# StackOverflow 问答 13867000-13867999

# mysql - MySQL SUM() 操作

> ID：13867002
> 
> 赞同：0
> 
> 时间：2012-12-13T19:29:09.077
> 
> 标签：mysql, sum

我有一个 MySQL 表`payment`，用于存储客户的所有支付相关数据。表字段为：`fileNo`、`clientName`、`billNo`、`billAmount`、`status`。我想构建一个搜索表单，我将在其中输入`fileNo`或`clientName`，这将产生一个表格，用于获取该文件编号或客户名称的所有记录`status = 0`（未付费）。这`billAmount`是一个浮点数。

我不擅长 MySQL，但这是我的 SQL by fileNo 版本

```
$sql = "SELECT * FROM `payment` WHERE `fileNo` = '$fileNo' AND `status` = '0'"; 
```

客户端名称的 SQL

```
$sql = "SELECT * FROM `payment` WHERE `clientName` = '$clientName' AND `status` = '0'"; 
```

无论以哪种方式进行查询，我还需要针对该 fileNo 或 clientName 显示未支付的总金额。

据我了解， SUM() 操作应该是这样的：

```
$sql = "SELECT SUM(billAmount) AS `unpaid` WHERE `fileNo` = '$fileNo' AND `status` = '0'"; 
```

或者

```
$sql = "SELECT SUM(billAmount) AS `unpaid` WHERE `clientName` = '$clientName' AND `status` = '0'"; 
```

我的问题是，我的 SUM() 操作是否正确？以及如何获得我选择的未付总额`unpaid`？我可以将它存储在变量中吗？

任何想法、建议或资源链接将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:49:33.380

我认为你应该使用第二个查询，但你错过了 WHERe 子句

```
 $sql = "SELECT SUM(billAmount) AS `unpaid` FROM payment WHERE `clientName` = '$clientName' AND `status` = '0'"; 
```

你的未付总金额是的，你不能像那样变数

```
 $result = mysql_query($sql);
 $row = mysql_fetch_array($result);
   ehco   $row['unpaid'] ;          <------ this will give you the unpaid amount. 
```

当然在你获取你的查询之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:35:43.957

我认为您的查询非常正确，不要忘记 FROM 子句：

```
$sql = "SELECT SUM(billAmount) AS `unpaid` FROM payment WHERE `clientName` = '$clientName' AND `status` = '0'"; 
```

如果您的客户名称可能包含引号，请小心（查看 addlashes 函数）

然后，得到总和：

```
$sum = current(mysql_fetch_row(mysql_query($sql))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:42:47.097

* * *

顺便提一句

在此查询中，您错过了`FROM`条款 :-)

```
 "SELECT SUM(billAmount) AS `unpaid` 
FROM payment
WHERE `fileNo` = '$fileNo' 
AND  `clientName` = '$clientName'
 AND `status` = '0'"; 
```

是的，可以将一个值存储在第一个查询的变量中并用于辅助查询。我希望我现在可以在移动设备上为您提供来自 SQLFIDDLE 的适当示例。如果您可以尝试此代码，将稍后更新。

# php - mysql更新mysql信息

> ID：13867004
> 
> 赞同：-1
> 
> 时间：2012-12-13T19:29:10.907
> 
> 标签：php, database, insert, sql-update

我有一个积分系统，人们可以用积分购买不同的东西。现在我要让人们可以升级到 [PRO] 用户。当他们注册时，他们以 [user] 身份登录 mysql。我正在编写代码，以便在行动后他们失去 50 分，并且他们的 [user] 被 [PRO] 取代。但现在我用 [pro] 替换。这是我的代码：

```
$insert = "UPDATE `users` SET `points` = (`points`-50) WHERE `username` = '".$username."' and points > 50";
mysql_query($insert);
if (mysql_affected_rows() > 0)
{

    // other codes

  $insert =  "UPDATE users SET rights=' [user]'  WHERE rights=' [pro]' WHERE `username` = '".$username."'";
    mysql_query($insert); 
header('location: succes.php');
}else{
    echo "You don't have enough points to upgrade to [PRO]";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:35:33.997

代替：

```
$insert =  "UPDATE users SET rights=' [user]'  WHERE rights=' [pro]' WHERE `username` = '".$username."'"; 
```

尝试：

```
$insert =  "UPDATE users SET rights=' [pro]' WHERE `username` = '".$username."'"; 
```

你有两个`WHERE`子句，那是行不通的。一旦你拿走 50 分，只需更新他们的权利即可。

您还可以将您的第一个和第二个查询与以下内容结合起来：

```
$insert = "UPDATE `users` SET `points` = (`points`-50), rights = ' [pro]' WHERE `username` = '".$username."' and points > 50"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:40:01.417

您可以在一个查询中实现这一切。

```
UPDATE users SET rights=' [pro]', points = points - 50 WHERE username = '$username' AND points >= 50 
```

您也可以考虑添加一个条件，仅`rights=' [user]'`在您的应用程序中有其他方式强制此升级选项仅适用于当前不是“专业”的人时才执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:40:24.030

只是为了完成 Sean sql 和你的代码

在您的第一个查询中替换它

```
 and points >= 50 
```

因为如果用户有 50 个，他也可以升级到 [pro]。

# jasper-reports - JasperReports - 我可以将表达式插入静态文本吗

> ID：13867011
> 
> 赞同：2
> 
> 时间：2012-12-13T19:29:26.323
> 
> 标签：jasper-reports

我有 JR 报告的这样片段（*jrxml*文件）：

```
<band height="110">
     <staticText>
     <reportElement style="disclaimer" mode="Transparent" x="0" y="10" width="522" height="100"/>
     <textElement markup="styled"/>
    <text>
$P{settings}.getData()
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do   eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </text>
    </staticText>
    </band> 
```

问题是：如何`$P{settings}.getData()`在静态文本中插入表达式？

我知道使用它的方法`<textFieldExpression>`，但在这种情况下，我的文本被空格破坏了，因此看起来不太好。

# svn - 只有我的一些程序可以使用相同的信息连接到我的 SVN

> ID：13867030
> 
> 赞同：0
> 
> 时间：2012-12-13T19:30:35.480
> 
> 标签：svn, netbeans, ssh, tortoisesvn

我有一个 svn 服务器，上面有我大约 6 个月没有接触过的存储库。我决定清理它们并将它们添加到我拥有的新计算机中。我去使用保存在我所有计算机上的 tortoise svn 中的相同信息作为存储库，但我得到了错误。

*   错误无法连接到 URL 列表项的存储库
*   错误'svn+ssh://192.168.1.6/var/svn-repos/Documentation
*   错误无法创建隧道：系统找不到指定的文件。

然后我去我的服务器检查发生了什么，但在本地使用相同的信息我能够连接。然后我尝试了 Netbeans 的 svn 工具，它能够使用相同的信息提交到服务器。然后我尝试使用设置工具清除乌龟的保存信息并再次输入信息，但仍然出现此错误。我真的很困惑为什么我可以连接除了 tortoise svn 之外的所有其他程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:01:01.890

再次感谢@Wrikkens，我发现了我的问题，再次感谢您将我带到包含问题的文件夹。出于某种原因，存储在 %APPDATE%\Subverion 的 Tortoise SVN 的颠覆配置文件有 ssh = $SVN_SSH ssh -o ControlMaster=no 未注释行。我评论了这条线，它运行良好。虽然它确实要求我输入密码 4 次，如果有人可以帮助我，我将不胜感激。

# c# - 对具有 5500 万行的表运行 SQL 查询到网格视图中。

> ID：13867032
> 
> 赞同：1
> 
> 时间：2012-12-13T19:30:44.387
> 
> 标签：c#, asp.net, sql

这是我的问题：我建立了一个小型 ASP.Net 站点来显示来自我们的一个内部数据库的一些数据。我已将查询设置为在单击按钮时运行，并考虑输入到 4 个不同文本框中的参数。如果我将查询限制在前 100 万行左右，这一切都很好。问题是我的表有超过 5500 万行。如果我取下限制器，我会经常遇到溢出和内存错误。我并不感到惊讶，但我想知道是否有办法解决这个问题。我想知道参数是否仅在运行查询后才应用。对不起，如果我不准确，我上周才开始做这些事情。这是我的代码：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

<span class="style1">

<strong>Date </strong>(dd/mm/yyyy)&nbsp;&nbsp;&nbsp; </span>
<asp:TextBox ID="TextBox4" runat="server" Text="14/08/2009" style="margin-left: 4px" 
    Width="125px"></asp:TextBox>
&nbsp; TO&nbsp;
<asp:TextBox ID="TextBox5" runat="server" Width="125px" Text="30/12/2012" ></asp:TextBox>
<br />
<span class="style1"><strong>Trans #&nbsp;&nbsp; </strong></span>
<asp:TextBox ID="TextBox2" runat="server" style="margin-left: 94px" 
    Width="125px"></asp:TextBox>
<br />
<strong><span class="style1">Part &nbsp; </span></strong>
<asp:TextBox ID="TextBox3" runat="server" style="margin-left: 117px" 
    Width="125px"></asp:TextBox>
<br />
<br />
<asp:Button ID="Button1" runat="server" Text="Go" onclick="Button1_Click" />
<br />
<br />
   <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" CellPadding="4" 
ForeColor="#333333" GridLines="None" HorizontalAlign="Left" 
    onselectedindexchanged="GridView1_SelectedIndexChanged" 
    style="text-align: center" >
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
      <asp:BoundField DataField="C6946_TRANS_TYPE" HeaderText="Type de Transaction/Transaction Type" 
            SortExpression="C6946_TRANS_TYPE" />
        <asp:BoundField DataField="C6946_TRANS_DATE" 
            HtmlEncode="false" HeaderText="Date de Transaction/Transaction Date" ConvertEmptyStringToNull="false"
            SortExpression="C6946_TRANS_DATE" FooterStyle-HorizontalAlign="Right" DataFormatString="{0:d}" 
           > 
```

"

```
SelectCommand="SELECT C6946_TRANS_TYPE, C6946_TRANS_DATE, C6946_SO, C6946_LATE_FLAG, C6946_TRANS_NUM, ALIGNED_PART_NUMBER, C1001_ENG_PART_NUMBER, C6946_PART_KEY, PART_DESCRIPTION, C6946_RECORD FROM DWH.AIXW2S_T6946_TRANS_IMS"

    FilterExpression= "C6946_TRANS_NUM LIKE '%{0}%' AND (C6946_PART_KEY LIKE '%{1}%' OR ALIGNED_PART_NUMBER LIKE '%{1}%' OR C1001_ENG_PART_NUMBER LIKE '%{1}%')  AND C6946_TRANS_DATE >= #{2}# AND C6946_TRANS_DATE <= #{3}#">
<FilterParameters> 
            <asp:ControlParameter ControlID="TextBox2" Name="C6946_TRANS_NUM" PropertyName="text" Type="String" DefaultValue="" ConvertEmptyStringToNull="false"/> 
            <asp:ControlParameter ControlID="TextBox3" Name="C6946_PART_KEY" PropertyName="text"  Type="string"  DefaultValue="" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="TextBox4" Name="C6946_TRANS_DATE" PropertyName="text"  Type="DateTime"  DefaultValue="" ConvertEmptyStringToNull="false"/>
            <asp:ControlParameter ControlID="TextBox5" Name="C6946_TRANS_DATE" PropertyName="text"  Type="DateTime"  DefaultValue="" ConvertEmptyStringToNull="false"/>
        </FilterParameters> 
</asp:SqlDataSource>
<br />
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:07:34.453

您可能需要重新设计架构。对数据库的分页查询（可能通过 REST API 调用？）以提取所需的记录，或者如果在如此大小的表之间执行 JOIN 时遇到查询性能问题，则可能是 NoSQL 替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:35:24.247

您可能会在 32 位工作进程中达到内存限制（如果这是您正在使用的）。即使通过了，浏览器也可能会崩溃。对于桌面应用程序来说，这将更适合和更现实。

# javascript - DIV出现时添加CSS动画

> ID：13867035
> 
> 赞同：1
> 
> 时间：2012-12-13T19:30:55.487
> 
> 标签：javascript, html, css

如果您看一下[这个网站](http://hockeyapp.net/)，您会发现当您滚动并点击某些区域时，动画会播放淡入淡出，并将内容呈现出来。我试图通过源代码来了解他们是如何做到这一点的，但我还没有找到任何运气。

我猜当 DIV 如下所示时，他们使用 Javascript/jQuery 添加一个类：

```
$('#element').addClass('animation'); 
```

但是问题仍然存在，他们如何知道 DIV 何时调用此类 Javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:33:02.747

不知道他们具体是如何做的，但你可能想看看 jQuery waypoints 可以完成你想要做的事情：http: [//imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T19:56:29.040

它在[http://hockeyapp.net/javascripts/jquery.features.js](http://hockeyapp.net/javascripts/jquery.features.js)

这里*稍微*漂亮一点：

```
function f_scrollTop() {
    return f_filterResults(
        window.pageYOffset ? window.pageYOffset : 0,
        document.documentElement ? document.documentElement.scrollTop : 0,
        document.body ? document.body.scrollTop : 0
    )
}

function f_filterResults(e, t, n) {
    var r = e ? e : 0;
    return t && (!r || r > t) && (r = t), n && (!r || r > n) ? n : r
}

$(document).ready(function() {
    var e = navigator.userAgent.match(/(iPad|iPhone|iPod)/i) ? !0 : !1;

    e ? ($("#crashes").css("opacity", 1),
        $("#feedback").css("opacity", 1),
        $("#distribution").css("opacity", 1),
        $("#analytics").css("opacity", 1),
        $("#customers").css("opacity", 1))
      : ($(window).scroll(function() {

            var e = $("body").height(),
                t = f_scrollTop(),
                n = 0;
            t > 250 && (n = 1), $("#crashes").css("opacity", n)

        }), $(window).scroll(function() {

            var e = $("body").height(),
                t = f_scrollTop(),
                n = 0;
            t > 2250 && (n = 1), $("#feedback").css("opacity", n)

        }), $(window).scroll(function() {

            var e = $("body").height(),
                t = f_scrollTop(),
                n = 0;
            t > 3100 && (n = 1), $("#distribution").css("opacity", n)

        }), $(window).scroll(function() {

            var e = $("body").height(),
                t = f_scrollTop(),
                n = 0;
            t > 4400 && (n = 1), $("#analytics").css("opacity", n)

        }), $(window).scroll(function() {

            var e = $("body").height(),
                t = f_scrollTop(),
                n = 0;
            t > 3200 && (n = 1), $("#customers").css("opacity", n)

        })), $(".switch-monthly").live("click", function(e) {
            $(this).addClass("switch-yearly"), $(this).removeClass("switch-monthly"), $(".price.monthly").fadeOut(), $(".price.yearly").fadeIn(), $(".save").slideDown(), e.preventDefault()
        }), $(".switch-yearly").live("click", function(e) {
            $(this).removeClass("switch-yearly"), $(this).addClass("switch-monthly"), $(".price.monthly").fadeIn(), $(".price.yearly").fadeOut(), $(".save").slideUp(), e.preventDefault()
        }), $(".fancybox").fancybox({openEffect: "elastic",closeEffect: "elastic"})
}); 
```

`f_scrollTop`并`f_filterResults`形成一种跨浏览器的方式来查找页面滚动了多远。

上`document.ready`，它们将五个函数绑定到`$(window).scroll`. 每次滚动时，它都会使用 获取距离，并根据 的值`t = t_scrollTop()`设置为 1 或 0 。然后将每个 div ( , , , , ) 的不透明度设置为. （下面有更好的解释）`n``t``#crashes``#feedback``#distribution``#analytics``#customers``n`

因此，他们不知道何时`div`出现 - 每次滚动时都会检查它是否存在并相应地设置不透明度。此外，他们不使用`animate`，而是为[http://hockeyapp.net/stylesheets/public.css](http://hockeyapp.net/stylesheets/public.css)`transition`中的四个`div`s设置了 CSS （不要尝试阅读）：

```
#distribution,
#crashes,
#feedback,
#analytics {
   opacity: 0;
   -webkit-transition:opacity .5s ease-in-out 0s
} 
```

* * *

在这样的行上：

```
t > 250 && (n = 1), $("#crashes").css("opacity", n) 
```

逗号运算符表示“评估每个表达式，整个表达式的值是最后一个的值”。这里可能只是为了简洁起见，因为源已经被缩小了。

由于`n`已经是 0 并且`&&`短路，如果`t > 250`那么它将评估`(n = 1)`，否则它将`n`保持为 0。然后它将不透明度设置为`n`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:45:36.947

看看他们的来源，我认为他们正在使用一些叫做 anchorScroll 的东西。[http://www.binpress.com/app/anchorscroll/228](http://www.binpress.com/app/anchorscroll/228)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T19:45:48.480

您可以使用一点点 jQuery 来跟踪用户滚动页面的深度，如下所示：

```
$(window).scroll(function(e){
    if($(this).scrollTop() > 150) //the 150 here is the height in pixels
    {
        $('#element').addClass('animation');
    }
}); 
```

在此代码中，以像素为单位的高度是您指定动画发生在页面下方的位置。您可能需要稍微调整一下高度才能完全按照您的意愿进行操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T19:45:55.407

您可以使用滚动 api：

```
$(window).scroll(function (event) {
    var top = $(window).scrollTop();
     if (top > 200){ // assuming the position of your div.
        $('#element').addClass('animation');
     }
}); 
```

# c++ - CoCreateInstanceEx 返回 0x80070005

> ID：13867041
> 
> 赞同：2
> 
> 时间：2012-12-13T19:31:04.947
> 
> 标签：c++, windows-7, dcom

我有一个 DCOM 对象，我正在尝试远程启动它。但是函数 CoCreateInstance 返回值 0x80070005 - 拒绝访问。我的测试是在 Windows 7 上完成的。可能有什么问题？

```
 HRESULT hr = CoInitializeEx(0, COINIT_APARTMENTTHREADED);
   hr = CoInitializeSecurity(0, -1, NULL, NULL, RPC_C_IMP_LEVEL_DEFAULT, RPC_C_IMP_LEVEL_IMPERSONATE, NULL, EOAC_NONE, NULL);

    COAUTHINFO ca = {RPC_C_AUTHN_DEFAULT, RPC_C_AUTHZ_NONE, 0, RPC_C_AUTHN_LEVEL_DEFAULT, RPC_C_IMP_LEVEL_IMPERSONATE,0, EOAC_NONE };

    COAUTHIDENTITY id = {0};
    ca.pAuthIdentityData = &id;
    id.User = (USHORT*) L"user";
    id.UserLength = userLenght;
    id.Password = (USHORT*) L"password";
    id.PasswordLength = passwordLenght;
    id.Domain = (USHORT*)L"domainName";
    id.DomainLength = domainName;
    id.Flags = SEC_WINNT_AUTH_IDENTITY_ANSI;

    COSERVERINFO c = {0};
    c.pwszName = L"machineName";
    c.pAuthInfo = &ca;
    MULTI_QI res = {0};
    res.pItf = NULL;
    res.hr = S_OK;
    res.pIID = &IID_ITextAnimationProxy;
    hr = CoCreateInstanceEx(CLSID_TextAnimationProxy,0, CLSCTX_REMOTE_SERVER,&c,1,&res); 
```

# jquery - 由 AJAX 填充的下拉菜单未设置初始值

> ID：13867042
> 
> 赞同：0
> 
> 时间：2012-12-13T19:31:08.373
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我有一个带有表格的页面，该表格带有一个按钮来动态添加行以及一种删除行的方法。每行有 2 个级联的下拉列表。创建行时，我使用 AJAX 调用来填充第一个下拉列表中的值。在此下拉列表的更改事件中，我执行另一个 AJAX 调用来填充第二个下拉列表。这一切都很好，但我的问题是，当我用最初应该显示的数据加载屏幕时，我可以用 AJAX 调用填充下拉列表，但我猜该值没有被选中，因为它是在绑定到我的之后被填充的模型。有没有办法正常处理这种情况？下面是我的文档准备功能中的代码

```
$(document).ready(function () {
    $.getJSON('@Url.Action("GetAll", "Customers")', function (customers) {
        var customerSelect = $('.Customers');
        customerSelect.empty();
        customerSelect.append('<option value="0">Choose Customer...</option>');
        $.each(customers, function (index, customer) {
            customerSelect.append($('<option/>', {
                value: customer.ID,
                text: customer.CustomerName
            }));
        });
    });
}); 
```

如果此信息有帮助，这里是加载表格的 HTML 代码

```
<table id="Attendees" class="table-gridview">
        <thead>
            <tr>
                <th style="width:320px">
                    Customer
                </th>
                <th style="width:250px">
                    Attendee
                </th>
                <th>
                    Attended
                </th>
                <th>
                    Paid
                </th>
                <th style="width:120px">
                    Check Number
                </th>
                <th>

                </th>
            </tr>
        </thead>
        <tbody>
            @Html.EditorFor(x => x.Attendees)
        </tbody>
    </table> 
```

以下代码是与会者编辑器模板中的内容

```
<tr class="ClassAttendee">

    <td>
        @Html.HiddenFor(model => model.ID)
        @Html.HiddenFor(model => model.ClassID)

        @Html.DropDownList("Customers", Enumerable.Empty<SelectListItem>(), new { @Class = "Customers", style="width:300px" })
    </td>
    <td>    
        @Html.DropDownListFor(
            x => x.CustomerEmailID,
            Enumerable.Empty<SelectListItem>(),
            "Choose Attendee...",
                              new { @Class = "Contact", style = "width:220px" }
        )
        @Html.ValidationMessageFor(model => model.CustomerEmailID)
    </td>
    <td>    
        @Html.CheckBoxFor(model => model.Attended)
        @Html.ValidationMessageFor(model => model.Attended)
    </td>
    <td>    
        @Html.CheckBoxFor(model => model.FeePaid, new { @Class = "FeePaid"})
        @Html.ValidationMessageFor(model => model.FeePaid)
    </td>
    <td>    
        @if (Model.FeePaid != true)
        {
            @Html.TextBoxFor(model => model.CheckNumber, new { @Class = "CheckNumber", disabled ="true", style = "width:100px" })
        }
        else
        {
            @Html.TextBoxFor(model => model.CheckNumber, new { @Class = "CheckNumber", style = "width:100px" })
        }

        @Html.ValidationMessageFor(model => model.CheckNumber)
    </td>
    <td>
        @Html.HiddenFor(x => x.Delete, new { @class = "mark-for-delete" })
        @Html.LinkToRemoveNestedFormUpdateCounter("Remove", "tr.ClassAttendee", "input.mark-for-delete")
    </td>
</tr> 
```

我要展示的最后一部分是 AJAX 调用的服务器端代码

```
public JsonResult GetAll()
    {
        var customers = customerRepository
            .All
            .Select(p => new
            {
                p.ID ,
                p.CustomerName
            })
            .OrderBy(o => o.CustomerName);
        return Json(customers, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:36:54.703

因此，当我加载页面时，我设法通过不使用 editorfor 来实现此功能。相反，我现在用下面的代码填充表格

```
<table id="Attendees" class="table-gridview">
        <thead>
            <tr>
                <th style="width:320px">
                    Customer
                </th>
                <th style="width:250px">
                    Attendee
                </th>
                <th>
                    Attended
                </th>
                <th>
                    Paid
                </th>
                <th style="width:120px">
                    Check Number
                </th>
                <th>

                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Attendees)
            {
              <tr class="ClassAttendee">
                <td>
                    @Html.HiddenFor(model => item.ID)
                    @Html.HiddenFor(model => item.ClassID)

                    @Html.DropDownList("Customers", ((IEnumerable<TRIOSoftware.Domain.Entities.Customer>)ViewBag.PossibleCustomers).Select(option => new SelectListItem
                   {
                       Text = (option == null ? "None" : option.CustomerName),
                       Value = option.ID.ToString(),
                       Selected = (Model != null) && (option.ID == item.CustomerEmail.CustomerID)
                   }),"Choose Customer...", new { @Class = "Customers", style = "width:300px" })
                </td>
                <td> 
                     @Html.DropDownListFor(model => item.CustomerEmailID, ((IEnumerable<TRIOSoftware.Domain.Entities.CustomerEmail>)ViewBag.PossibleContacts).Where(o => o.CustomerID == item.CustomerEmail.CustomerID).Select(option => new SelectListItem
                    {
                        Text = (option == null ? "None" : option.Name),
                        Value = option.ID.ToString(),
                        Selected = (Model != null) && (option.ID == item.CustomerEmailID)
                    }), "Choose Attendee...")   
                    @*@Html.DropDownListFor(model => item.CustomerEmailID, Enumerable.Empty<SelectListItem>(), "Choose Attendee...", new { @Class = "Contact", style = "width:220px" })*@
                    @Html.ValidationMessageFor(model => item.CustomerEmailID)
                </td>
                <td>    
                    @Html.CheckBoxFor(model => item.Attended)
                    @Html.ValidationMessageFor(model => item.Attended)
                </td>
                <td>    
                    @Html.CheckBoxFor(model => item.FeePaid, new { @Class = "FeePaid" })
                    @Html.ValidationMessageFor(model => item.FeePaid)
                </td>
                <td>    
                    @if (item.FeePaid != true)
                    {
                        @Html.TextBoxFor(model => item.CheckNumber, new { @Class = "CheckNumber", disabled = "true", style = "width:100px" })
                    }
                    else
                    {
                        @Html.TextBoxFor(model => item.CheckNumber, new { @Class = "CheckNumber", style = "width:100px" })
                    }

                    @Html.ValidationMessageFor(model => item.CheckNumber)
                </td>
                <td>
                    @Html.HiddenFor(x => item.Delete, new { @class = "mark-for-delete" })
                    @Html.LinkToRemoveNestedFormUpdateCounter("Remove", "tr.ClassAttendee", "input.mark-for-delete")
                </td>
            </tr>
            }
        </tbody>
    </table> 
```

基本上，我将模板代码移动到视图中，而不是使用 AJAX 填充下拉列表，而是使用发送到视图中的数据填充初始的。

我会把这个问题留一点，看看是否有人提出更好的答案，因为在我看来这似乎是一个蛮力解决方案。

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ------------------------------

我在将此解决方案传递回控制器以保存时遇到问题。由于我发现没有其他方法可以使其工作，我将其添加到视图的文档就绪功能中

```
 $("#Attendees tr").each(function (index) {
        $(this).find("input, select, span").each(function (indx, element) {
            if ($(element).attr('name') !== undefined) {
                var name = $(element).attr('name').replace("item", "Attendees[" + (index - 1) + "]");
                $(element).attr('name', name);
            } else {
                // attribute does not exist
            }

            if ($(element).attr('id') !== undefined) {
                var id = $(element).attr('id').replace("item", "Attendees_" + (index - 1) + "_");
                $(element).attr('id', id);
            } else {
                // attribute does not exist
            }

            if ($(element).attr('data-valmasg-for') !== undefined) {
                var dataval = $(element).attr('data-valmasg-for').replace("item", "Attendees[" + (index - 1) + "]");
                $(element).attr('data-valmasg-for', dataval);
            } else {
                // attribute does not exist
            }
        });

    }); 
```

基本上我会用正确的名称替换项目 ID 和名称，以将我的数据返回到控制器。这有点骇人听闻，但它确实有效，所以我想发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:41:30.483

我没有对此进行测试，但是您可以执行以下操作：

```
$(document).ready(function () {
    $.getJSON('@Url.Action("GetAll", "Customers")', function (customers) {
        var customerSelect = $('.Customers');
        customerSelect.empty();
        customerSelect.append('<option value="0">Choose Customer...</option>');
        $.each(customers, function (index, customer) {

            var option=$('<option/>', {
                value: customer.ID,
                text: customer.CustomerName
            });
            if(customer.ID=='@(Model.CustomerEmailID)')
                 $(option).attr("selected","selected");

            customerSelect.append(option);

        });
    });
}); 
```

**更新**

如果您可以将选定的 id 添加为父级的属性，`<td>`例如：

```
<td data-id="@(Model.CustomerEmailID)">    
    @Html.DropDownListFor(
        x => x.CustomerEmailID,
        Enumerable.Empty<SelectListItem>(),
        "Choose Attendee...",
                          new { @Class = "Contact", style = "width:220px" }
    )
    @Html.ValidationMessageFor(model => model.CustomerEmailID)
</td> 
```

你可以这样做：

```
$(document).ready(function () {
    $.getJSON('@Url.Action("GetAll", "Customers")', function (customers) {
        var customerSelect = $('.Customers');
        customerSelect.empty();
        customerSelect.append('<option value="0">Choose Customer...</option>');
        $.each(customers, function (index, customer) {

            var option=$('<option/>', {
                value: customer.ID,
                text: customer.CustomerName
            });
            if(customer.ID==$(this).parent().attr("data-id"))
                 $(option).attr("selected","selected");

            customerSelect.append(option);

        });
    });
}); 
```

# database - 与服务器通信的网站

> ID：13867043
> 
> 赞同：0
> 
> 时间：2012-12-13T19:31:11.073
> 
> 标签：database, client-side, procedures

我是新手。我正在考虑开发一个人们可以成为会员并登录的网站。我知道我需要一个带有数据库的服务器来存储信息。我需要知道的是，我是否只需要创建服务器主机站点来托管它，然后将我的网站托管在其他地方。综上所述，在开发这类网站的过程中需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:43:58.480

不，您可以在同一台服务器上托管所有内容。后端和前端只是描述代码组织的词，HTML、CSS 和 Javascript 文件是您的前端，其余的是您的后端。

今天的大多数主机服务都支持所有计划的 Ruby、PHP 和 ASP，就像 MySQL 一样。无需在您的应用程序中开发两个部分 - 但如果您愿意，您可以这样做。

我建议你从研究什么是 MVC 结构开始。

# groovy - 如何使用通过 logback.groovy 配置的 logback 和 groovy

> ID：13867057
> 
> 赞同：9
> 
> 时间：2012-12-13T19:31:51.807
> 
> 标签：groovy, logback

我无法将通过 logback.groovy 配置的 logback 与 groovy 一起使用。

如果在一个目录中我有一个名为 FooBar.groovy 的脚本文件，并且当我运行 `groovy FooBar.groovy` groovy 时文件 logback.groovy 也尝试编译 logback 配置文件并且我的脚本不起作用，我必须回退到默认的 xml 配置用于 logback 的文件 (logback.xml)。

我怎样才能使它起作用？我可以调用`groovy somefiles.groovy` 并配置 groovy 以忽略 logback.groovy 吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T15:52:25.070

出现问题的原因是永远不应该编译 logback 配置文件。它在运行时通过`GroovyShell`或类似机制从 LogBack 读取。

解决方案取决于您的项目设置。[接下来，您将找到使用Gradle](http://www.gradle.org/)构建项目的解决方案，遵循 Maven[标准目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)：

第一个文件是`src/main/groovy/Test.groovy`：

```
import org.slf4j.Logger
import org.slf4j.LoggerFactory

class Test {
    static Logger LOG = LoggerFactory.getLogger(Test.class)

    static void main(String[] args) {
        LOG.debug("Test")
    }
} 
```

第二个文件是`src/main/resources/logback.groovy`：

```
import static ch.qos.logback.classic.Level.INFO
import static ch.qos.logback.classic.Level.DEBUG

import ch.qos.logback.classic.encoder.PatternLayoutEncoder
import ch.qos.logback.core.ConsoleAppender

appender("CONSOLE", ConsoleAppender) {
  encoder(PatternLayoutEncoder) {
    pattern = "%-4relative [%thread] - %msg%n"
  }
}
root(DEBUG, ["CONSOLE"]) 
```

我省略了 Gradle 构建文件 ( `build.gradle`)。

标准的目录布局保证其中的每个文件都`src/main/groovy`被编译，而其中的所有内容`src/main/resources`都包含在类路径中。所以 LogBack 能够在运行时找到该文件。

**更新**：没有足够仔细地阅读您的问题。当两个文件都在同一个目录中并且我通过`groovy Test.groovy`. 我认为这是不可能的。groovy 命令总是编译当前目录和给定类路径中的所有 groovy 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-22T21:16:22.373

我在 Eclipse Greclipse 环境中遇到了同样的问题（并通过谷歌将此问题作为最佳问题参考）。它也很容易适应其他 Groovy 环境，并且基本原则/设置将适用。

以下是需要做/确保的事情：

**`Project -> Properties -> Java Build Path`**...

*   `-> Source -> Add Folder`或检查是否已正确设置
    *   所有相关文件必须在`Included`(eg `(All)`) 中而不是`Excluded`(eg `(None)`) 模式中
    *   **`src/main/groovy/`**（应该包含你的 Groovy 类）
    *   **`src/test/resources/`**（`logback.groovy`直接在下面）
*   确保在`-> Output Folders`之前`src/main/resources`是`src/test/resources`正确的`logback.groovy`（如果您也有一个用于测试）在正常运行中被采用

**`Project -> Properties -> Groovy Compiler -> Groovy Script Folders`**...

*   **`[ ] src/main/groovy/**/*.groovy`**（或您的课程的类似模式必须取消选中）
*   **`[x] src/main/resources/**/*.groovy`**`logback.groovy`（或必须检查正常的类似模式）
*   **`[x] src/test/resources/**/*.groovy`**`logback.groovy`（或必须检查您的测试的类似模式）

测试和正常`logback.groovy` [应该](https://stackoverflow.com/a/24919167/1915920)以这种方式工作。

结果，您应该会看到从源资源复制到目标文件夹的以下内容：

*   `target/classes/logback.groovy`
*   `target/test-classes/logback.groovy`

旁注：此外，如果您在 Eclipse 中的 ANT 中使用 Groovy，您所要做的就是`Windows -> Preferences -> Ant -> Runtime -> Classpath -> Ant Home Entries -> Add Variable... -> ${project_classpath}`并且`logback.groovy`也将正确应用 :)。（由于`${project_classpath}`似乎没有（总是）按上述顺序导出，我们不得不手动`Add Folder -> target/classes`移动到另一个上方以使其与正确的一起工作`logback.groovy`）

# objective-c - 当 UISearchBar 变为活动状态时调整 UIToolbar 的大小

> ID：13867059
> 
> 赞同：1
> 
> 时间：2012-12-13T19:31:58.987
> 
> 标签：objective-c, ios, uiview, uisearchbar, uitoolbar

我有`UIToolbar`5 件物品：

1.  `UIBarButtonItem`有图像
2.  `UIBarButtonItem`弯曲宽度
3.  `UIBarButtonItem`带有自定义视图 ( `UISearchBar`)
4.  `UIBarButtonItem`弯曲宽度
5.  `UIBarButtonItem`有图像

当我选择 时`UISearchBar`，我让它保持正确的大小并变得活跃。但是，我希望左侧和右侧的图像消失并`UISearchBar`给出`UIToolbar`. 我怎么做？

这就是我所拥有的： [https ://dl.dropbox.com/u/3077127/demo_1.mov](https://dl.dropbox.com/u/3077127/demo_1.mov)

这就是我想要的： [https ://dl.dropbox.com/u/3077127/demo_2.mov](https://dl.dropbox.com/u/3077127/demo_2.mov)

这是我的代码：

```
#pragma mark View lifecycle

- (void)viewDidLoad {
[...]

    SearchBar *mySearchBar = [[SearchBar alloc] init];
    mySearchBar.delegate = self;
    [mySearchBar sizeToFit];
    [mySearchBar setAutocapitalizationType:UITextAutocapitalizationTypeNone];
    [mySearchBar setTintColor:[UIHelpers getSlColor]];

    CGRect searchBarFrame = mySearchBar.frame;
    searchBarFrame.size.width = 218;
    [mySearchBar setFrame:searchBarFrame];

    UIView *searchBarContainer = [[UIView alloc] initWithFrame:mySearchBar.frame];
    [searchBarContainer addSubview:mySearchBar];
    [searchBarContainer setTag:99];

    UIBarButtonItem *left = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"location-arrow"] style:UIBarButtonItemStyleBordered target:self action:nil];
    UIBarButtonItem *right = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"location-arrow"] style:UIBarButtonItemStyleBordered target:self action:nil];
    UIBarButtonItem *flex = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
    UIBarButtonItem *search = [[UIBarButtonItem alloc] initWithCustomView:searchBarContainer];

    NSArray *items = [[NSArray alloc] initWithObjects:left, flex, search, flex, right, nil];

    UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [toolbar setItems:items];
    [toolbar setTintColor:[UIHelpers getSlColor]];

    self.tableView.tableHeaderView = toolbar;
    self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectNull];

[...]

    [super viewDidLoad];
}

#pragma mark - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:36:59.200

[这是我对此处](https://stackoverflow.com/a/12394703/719656)发布的类似问题的回答

正确动画的关键是指定动画`UIViewAnimationOptionLayoutSubviews`的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:19:33.377

不确定您是否尝试过，但也许您可以使用[UISearchBarDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBarDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UISearchBarDelegate)方法在用户单击搜索栏时获得通知。

例子：

```
 #pragma mark - UISearchBarDelegate Methods

    - (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar {
      // Remove the right and left buttons from the ToolBar
      [self updateToolBarWithImages:NO];
    }

    - (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar {
      // Add back the right and left buttons to the ToolBar
      [self updateToolBarWithImages:YES];
    }

    #pragma mark - Private Methods

    // Custom method used to Update the ToolBar
    - (void)updateToolBarWithImages:(BOOL)iShowImages {
      // Logic to update ToolBar based on the BOOL value in showImages
      // use "setItems:animated:" method of UIToolBar to set the ToolBar Items
      [toolBar setItem:items animated:YES];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:46:21.093

您不应该为此使用 ToolBar 。只需使用带有 2 个左右 ButtonItems 的 NavigationBar，并在 NavigationBar 的 titleView 中添加一个带有适当代表的 SearchBar。

因此，您不必调整 NavigationBar 的大小。这只是添加/删除 NavigationBar 的左右 ButtonItems 动画，如下所示：

```
if (self.searchBar.isActive) {
     [self.navigationItem setLeftBarButtonItem:nil animated:YES];
     [self.navigationItem setRightBarButtonItem:nil animated:YES];
}
else {
    [self.navigationItem setLeftBarButtonItem:self.leftButton animated:YES];
    [self.navigationItem setRightBarButtonItem:self.rightButton animated:YES];
} 
```

希望这可以帮助！

# iphone - performSegueWithIdentifier 问题 - 没有错误，但没有任何反应

> ID：13867060
> 
> 赞同：1
> 
> 时间：2012-12-13T19:32:07.490
> 
> 标签：iphone, objective-c, xcode, ios5

我是故事板的新手，我正在尝试连接一些要以编程方式调用的 segue。

基本上，我的应用程序使用 websockets 连接到服务器，然后根据从服务器接收到的消息显示内容。

所以我的应用程序中的第一个场景只是一个“正在连接...”屏幕，它会一直显示，直到它成功连接到我的服务器。连接后，我需要它来显示下一个屏幕。

这是我的故事板： ![在此处输入图像描述](../Images/4916b28c4ca812b94e5c691a15631d41.png)

当应用程序连接到服务器时，服务器会发送一条消息，询问客户端类型（移动网站和安卓应用程序将使用同一服务器）。

应用程序监听此消息，然后回复服务器说它是 iPhone。当服务器准备好让客户端登录时，它会发送“loginready”消息。

这是我用来切换到登录屏幕的唯一代码：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    UIViewController *loginVC = (UIViewController *)[storyboard instantiateViewControllerWithIdentifier:@"LoginView"];

    [mViewController presentViewController:loginVC animated:YES completion:nil]; 
```

但它需要它（模拟器至少......订阅几周前用完）15秒才能完成过渡。

我最初尝试过这个：

```
[mViewController dismissViewControllerAnimated:YES completion:^() {
    [mViewController performSegueWithIdentifier:segueID sender:mViewController];
}]; 
```

`mViewController`当前场景的位置在哪里`UIViewController`，但这绝对没有做任何事情。就像它只是停留在“正在连接...”页面上，没有任何错误或任何代码已运行的证据。

在服务器发送“logintrue”消息后，我还尝试使用此代码移动到第三个场景，并且登录屏幕消失，但只是显示“正在连接...”屏幕并且永远不会转换到第三个场景。

我真的不介意我是否必须使用该`presentViewController`技术，但前提是我可以让它不那么慢。

任何帮助将非常感激！

# .htaccess - 为什么这个 htaccess 代码不阻止指定的 IP？

> ID：13867066
> 
> 赞同：0
> 
> 时间：2012-12-13T19:32:30.247
> 
> 标签：.htaccess

我的网站有一个很大的 htaccess 文件。我试图阻止的 IP 之一是 27.153.228.56

尽管我使用了 htaccess，但我仍然看到 27.153.228.56 出现在我最新的访问者日志中。

我的 htaccess 是否有问题允许此 IP 访问该站点？

有更多 IP 被阻止，但这是一个缩写版本：

`# Protect from spam bots`

`<IfModule mod_rewrite.c>`

`RewriteEngine On`

`RewriteCond %{REQUEST_METHOD} POST`

`RewriteCond %{REQUEST_URI} .wp-comments-post\.php*`

`RewriteCond %{HTTP_REFERER} !.garagehangover.com* [OR]`

`RewriteCond %{HTTP_USER_AGENT} ^$`

`RewriteRule (.*) ^http://%{REMOTE_ADDR}/$ [R=301,L]`

`</IfModule>`

`# Begin IP blocking #`

`Order Allow,Deny`

`deny from 27.153.228.56`

`# End IP blocking #`

`#Begin Bad Bot Blocking`

`BrowserMatchNoCase yandex bad_bot`

`Deny from env=bad_bot`

`# End Bad Bot Blocking`

`Allow from all`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:39:04.477

`Order Deny,Allow`

并删除`Allow from all`

这将处理所有拒绝规则，如果不匹配，则允许请求。

此外，通常您会将这些规则放在`RewriteEngine on`指令之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:42:30.443

在我看来还可以。但是您可以尝试阻止这样的一系列 IP...

```
deny from 27.153.228.0/255.255.255.0 
```

或这个

```
deny from 27.153.0.0/255.255.0.0 
```

# javascript - 一页上的漂亮照片多个画廊

> ID：13867067
> 
> 赞同：5
> 
> 时间：2012-12-13T19:32:32.553
> 
> 标签：javascript, jquery, wordpress, lightbox, prettyphoto

我正在构建一个 worpdress 站点，并在使用简码构建的页面上有多个画廊。目前，所有图像都被赋予了 rel 属性“prettyPhoto[1]”，但我需要每个画廊都是分开的。我在页面上总共有 56 张图片，所以当画廊 1 的第一张图片在灯箱中打开时，它显示 1/56，我可以点击所有 56 张图片，我想要的是画廊一个说 1/16，然后是画廊 1 /16 等。有人告诉我在我的 raw.js 文件中编辑这行脚本：

```
$(".gallery-icon a").attr('rel', 'prettyPhoto[1]'); 
```

但也不知道该怎么办？任何帮助将不胜感激。这是相关页面的链接：

[http://www.tetra-shed.co.uk/news/](http://www.tetra-shed.co.uk/news/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:44:27.433

prettyPhoto 根据方括号的内容将画廊组合在一起。因此，您将在同一个图库中获得所有 56 张图像，因为它们都已分配给图库 1。

你真正想要的是画廊 1 中的前十六个；

```
$(".gallery-icon a").attr('rel', 'prettyPhoto[1]'); 
```

画廊 2 中的下一个 16 个；

```
$(".gallery-icon a").attr('rel', 'prettyPhoto[2]'); 
```

问题是 - 鉴于`rel`属性是通过 JS 分配的，如何做到这一点？好吧，我会考虑根据父父 div id 来做。每个画廊图标元素都有一个画廊项目父项。这些中的每一个都是具有特定 ID 的画廊类的一部分。例如

```
<div id='gallery-3' class='gallery galleryid-555 gallery-columns-4 gallery-size-thumbnail'>
    <dl class='gallery-item'>
        <dt class='gallery-icon'> 
```

因此，您需要将该唯一的画廊 ID 分配为漂亮的照片 rel 值。IE;

```
$(".gallery-icon a").attr('rel', 'prettyPhoto[gallery-3]'); 
```

我会通过查找所有画廊图标并使用`closest()`来查找父画廊 ID 来做到这一点，就像这样；

[使用 Jquery 查找父 div 的 id](https://stackoverflow.com/questions/545978/finding-the-id-of-a-parent-div-using-jquery)

我没有测试过它或其他任何东西，但这样的东西应该会让你朝着正确的方向前进；

```
 $('#content').find('.gallery-icon a').each(function() {

                var gallid = $(this).closest("div").attr("id");

                $(this).attr('rel', 'prettyPhoto['+ gallid +']');

            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T17:26:01.687

我可能会提供更简单的解决方案，我只是`div`在`each`功能中浏览我所有的画廊，然后初始化`prettyPhoto`它们里面的图像。

```
$(document).ready(function(){
    $.each($(".gallery"), function(i, val) {
        var queryString = ".gallery:nth(" + i + ") a[rel^='prettyPhoto']";
        $(queryString).prettyPhoto({animation_speed:'normal',theme:'light_square', social_tools: false});
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-18T17:48:37.697

所需要做的就是更改 html 中的 rel，在其中添加画廊，看起来像这样 rel="prettyPhoto[pp_gal]"

在您在 div 中创建的第一个画廊中，将 rel="prettyPhoto[pp_gal]" 更改为 "prettyPhoto[gallery1]" （例如）

以及“prettyPhoto[gallery2]”的旁边等等。

# clearcase-remote-client - 创建视图时如何避免此 CCRC 错误？

> ID：13867069
> 
> 赞同：1
> 
> 时间：2012-12-13T19:32:51.390
> 
> 标签：clearcase-remote-client

如果流被锁定，您可以在 CCRC 中创建视图吗？
似乎其他人可以创建视图，但是这个人在尝试创建视图时遇到了错误：

```
problems performing ClearCase operation

Problems were encountered while retrieving view synchronization information and data

ClearCase CM server: Error: unable to begin update session: unknown error in view server.
ClearCase CM Server: Error: Additional information may be available in the view log on host "hostname".
ClearCase CM Server: Error: operation "view_ws_begin_load_session" failed: unknown error in view server 
```

关于如何解决或解决此问题的任何想法？
（CCRC 在 Windows XP SP3 笔记本电脑上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:55:53.983

不，流没有被锁定。

查看服务器上的视图日志可以告诉您更多信息，但通常，由于访问权限（如主组不正确或未在 CCRC GUI 中设置），您可能会遇到错误。
或者存在某种*服务器*错误（CCRC 是所有 Web 视图的视图服务器：该`view_server`特定视图的进程可能有问题）

因此，请检查 CCRC 服务器日志以获取视图（请参阅 参考资料[`getlog`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_getlog.htm)）：

```
 cleartool getlog -host CCRC_servername -since yesterday view 
```

# javascript - 使用 jquery ui 滑块模拟悬停动作的策略

> ID：13867072
> 
> 赞同：1
> 
> 时间：2012-12-13T19:33:03.603
> 
> 标签：javascript, jquery

我们试图想出一种方法来触发 jquery 图表上的工具提示事件，例如[来自人力车](http://code.shutterstock.com/rickshaw/examples/lines.html)的这个事件，方法是通过沿底部 (x) 轴从 jquery ui 滑块控制事件。

因此，当用户沿轴滑动滑块时，图表的行为就好像鼠标从左到右拖过它一样。为了简化事情，滑块和图表将具有相同的宽度。谁能建议我可以在 jquery/javascript 中实现这一点的方法？

谢谢！

# c# - 如何使用 C# MVC 在控制器之间持久化文件？

> ID：13867078
> 
> 赞同：0
> 
> 时间：2012-12-13T19:33:25.930
> 
> 标签：c#, asp.net-mvc

[我在这里](https://codereview.stackexchange.com/questions/19559/how-could-i-make-my-controller-a-little-less-hideous "我的问题")问了一个先前的问题，其中一部分似乎本身就是一个完整的主题。

我正在尝试跨控制器调用保留文件数据。

场景是：用户上传包含要提交到数据库的条目的文件。如果文件有警告和错误，它们将被重定向到验证页面。如果没有警告或错误，他们的文件将被直接处理。

如果用户收到警告但没有错误（即文本字段太长并且将被截断），他们仍然可以导入文件。由于在上传文件和将其发送到数据库之间有两个单独的屏幕，因此需要保留文件数据。

我已经看到了十几个与此类似的问题，但似乎都没有相关的答案（因此，如果类似的问题没有对这个确切问题的答案，请不要将此问题标记为重复）。

我的第一个想法是使用上传的文件名 + guid 保存文件并将该文件名保存到会话状态，但是我在上一个问题上得到的答案都非常坚定地认为这是一个糟糕的解决方案。

我发现的其他类似问题的解决方案：

1.  重新上传文件（一个糟糕的解决方案）
2.  使用 viewbag 将文件名发送到视图，以发送回第二个控制器（听起来不对）
3.  保存视图模型中的文件位置以发送到视图，由第二个控制器再次检索（再次听起来不正确）
4.  将文件位置保存在会话或临时数据中（收到一般不利的评论）

我已经完成了我的研究，但找不到解决此问题的最佳方法。有人可以帮帮我吗？如果您认为另一个问题回答了这个问题，请您将其作为答案发送给我，而不是将此作为重复报告，因为我已经进行了大量搜索。

谢谢你，塞缪尔戴维斯

**编辑：**我的用户确实有一个可用的会话。我能想到的另一个解决方案是将硬编码字符串附加到包含在其会​​话 ID 中的 GUID，例如。“MyImporter-xxxx.xxxx.xxxx.xxxx.csv”。这样，“MyImporter”可以是一个私有常量字符串，我的控制器不必保留任何标识符。我不确定这种方法有什么缺点，但是由于我对 MVC 很陌生，所以肯定会有我没有想到的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:06:14.353

最好的办法是将文件的位置存储在您的服务器上。会话或数据库。

流动：

1.  用户上传文件
2.  服务器将文件存储在服务器上的某个位置，并将该文件的位置存储在 Session 变量或数据库中
3.  用户发送第二个请求
4.  服务器从会话或数据库中检索位置。
5.  服务器对文件做一些事情

值得一提的是，如果您决定将文件位置存储在数据库中，您还应该将当前经过身份验证的用户存储在同一个表中，以便您以后可以检索到正确的记录。如果您不使用身份验证，这可能不是一个好的解决方案，因为您将无法检索记录。在这种情况下，您可以在数据库中使用*难以猜测*的标识符来存储文件位置。然后这个标识符将被传递给视图（当然是在视图模型的形式下）并在后续请求中传递。重要的是，该标识符难以猜测，以避免一个用户使用另一个用户的文件。

另一种可能的解决方案可能是将文件的位置存储在加密的 cookie 中，该 cookie 将在后续请求中发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:04:48.697

你听说过`TempData`吗？它就像一个自毁的会话值。

# c# - 在 Process.StandardOutput.Read() 方法之前是否需要睡眠？

> ID：13867080
> 
> 赞同：1
> 
> 时间：2012-12-13T19:33:44.693
> 
> 标签：c#

我正在尝试在 C# 程序（例如 cmd）中创建一个子进程并使用进程 IO 流执行读/写。我正在使用 StandardOutput.Read() 方法来读取进程输出。

当我在 Read() 之前放置一个 Thread.Sleep() 方法时，它会提供完整的输出，但如果我删除它，它只会显示单行输出。

这是代码：

```
string sProcess = "cmd.exe";
ProcessStartInfo psiInfo = new ProcessStartInfo();
psiInfo.FileName = sProcess;
psiInfo.CreateNoWindow = true;
psiInfo.UseShellExecute = false;
psiInfo.RedirectStandardOutput = true;
psiInfo.RedirectStandardError = true;
psiInfo.RedirectStandardInput = true;
Process pChild = new Process();
pChild.StartInfo = psiInfo;
if (pChild.Start())
{
    int ch;
    do
    {
        Thread.Sleep(50);
        ch = pChild.StandardOutput.Peek();
        if (ch > 0)
            Console.Write((char)pChild.StandardOutput.Read());
    } while (ch > 0);
    Console.WriteLine("exit");
    pChild.StandardInput.WriteLine("exit");
} 
```

*启用睡眠的输出：*

```
Microsoft Windows [版本 6.1.7601]
版权所有 (c) 2009 Microsoft Corporation。版权所有。

D:\ProcessDemo_001\bin\Release>退出

```

*禁用睡眠的输出：*

```
Microsoft Windows [版本 6.1.7601] 退出

```

我想知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:35:57.777

> 我想知道为什么会这样？

您的循环运行速度比产生输出的速度快。一旦它通过输出，它就会结束，所以它永远不会看到第二行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:37:59.393

在 pChild 输出文本之前执行 Peek 命令可能会发生。发生这种情况时，ch 将为 0 并且 while 循环退出。

# javascript - 是否有跨浏览器的方式来使用 Javascript 关闭 cookie？

> ID：13867083
> 
> 赞同：0
> 
> 时间：2012-12-13T19:34:04.620
> 
> 标签：javascript, cookies, cross-browser

我们每个人都知道新法律，这对于在其网站上使用 cookie 的开发人员来说是一件痛苦的事情。

我们必须询问我们的用户是否允许我们在他们的机器上创建 cookie。如果他们不允许我们做这件事，我们如何用 javascript 关闭 cookie？

有没有办法只为一个网站关闭 cookie？是否有适用于所有浏览器的兼容脚本？

第三方 cookie（Youtube 或 Google Analytics）呢？它们也存储在我们的网站文件夹中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:01:58.383

您无法从客户端关闭 cookie。您的客户端代码可以停止创建新的 cookie，但即便如此，服务器仍可能将 cookie 放在页面上。如果您想停止为特定站点创建 cookie，那么您需要在客户端代码和服务器代码中都停止这样做。

仅供参考，问题是否真的是 cookie 本身 - 或者更多的是您对这些 cookie 所做的事情（例如跟踪给定用户）。例如，如果您设置一个 cookie 只是为了记住当前用户上次在哪个选项卡上（cookie 中没有其他识别信息，并且在服务器上没有使用该 cookie），这是一个问题吗？或者，存储临时会话 ID 的 cookie，以便服务器可以跟踪您购物车中的商品。我怀疑这些是问题，因为这些不是跟踪或隐私问题。

由于每个国家/地区对此都有自己的法律，因此如果您的目标是遵守特定国家/地区的法律，则必须查阅其确切的法律。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:04:21.360

我不知道不同国家/地区的所有不同法律是什么，但荷兰的 cookielaws 并不是那么严格，大多数网站都不必改变任何事情。在尝试从中清除所有 cookie 创建之前，您可能需要查看适用于您网站的确切法律。

简而言之，[荷兰 cookielaws](http://www.rijksoverheid.nl/onderwerpen/ict/veilig-online-en-e-privacy/internetbezoek-volgen-met-cookies)归结为：

*   网站必须**获得许可**才能放置**跟踪**用户的 cookie（这包括第三方 cookie，例如 Google 添加的 cookie）。
*   网站不需要征求用户的许可来放置运行网站所需的 cookie。此类 cookie 的一个示例是跟踪您在购物车中放置的内容的 cookie。

到目前为止，我看到的该法律的大多数实施都与[fok.nl](http://fok.nl/)上的类似。用户第一次打开网站时，他们的脸上会弹出一个大弹出窗口，只有在他们允许网站放置 cookie 的情况下，才会让用户打开真正的网站。我假设这个设置被存储在一个新的 cookie 中，这样用户就不会再被它打扰了。该解决方案实施起来应该不会太难。

**编辑：**

以下是更多的实现示例：http: [//www.stormmc.nl/nieuws/nederlandse-voorbeelden-implementatie-cookiewet/](http://www.stormmc.nl/nieuws/nederlandse-voorbeelden-implementatie-cookiewet/)（只需单击链接）。

# php - 如何将目录从 if 语句排除到标题页

> ID：13867084
> 
> 赞同：-1
> 
> 时间：2012-12-13T19:34:07.157
> 
> 标签：php, html, if-statement, header

您好，我通过一个不起作用的标头功能而发疯。

这个想法是，当用户调用页面 foo.php 时，他将被标头。因此我包含了来自 script.php 的脚本

该脚本从以下位置读出有关已接受语言的信息

> $_SERVER["HTTP_ACCEPT_LANGUAGE"])

好的，我有首选语言和国家代码，我需要将 foo.php 标头到正确的语言方向。script.php 中的代码如下：

```
if ($pref_language == 'af'){
    header('Location:en'.$_SERVER['SCRIPT_NAME']);
    exit;
}
if ($pref_language == 'sq'){
    header('Location:en'.$_SERVER['SCRIPT_NAME']);
    exit;
} 
```

所以这些例子会将 foo.php 标头到目录

> 根/en/foo.php

现在，当仅调用位于 root/scripts/script.php 中的 script.php 时，我将标头为 root/en/scripts/script.php。这就是为什么我想在所有带有 header() 的 if 语句中添加 if 条件；只发生在 root/scripts/ 之外的文件。

所以我补充说：

```
$filename = $_SERVER['SCRIPT_NAME'];
$path = $_SERVER['HTTP_HOST']."/scripts".$_SERVER['SCRIPT_NAME'];

if (isset($path == false)){

    if ($pref_language == 'af'){
        header('Location:en'.$_SERVER['SCRIPT_NAME']);
        exit;
    }
    if ($pref_language == 'sq'){
        header('Location:en'.$_SERVER['SCRIPT_NAME']);
        exit;
    }
} 
```

那是行不通的。所以如果有人可以帮助我，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:53:45.533

这可能是您的解决方案，虽然它在某种程度上有点愚蠢，但会完成这项工作：

```
<?php

$unwanted_dir = "/scripts";

// this will make sure that the script name doesnt start with "/scripts" 
if (substr($_SERVER['SCRIPT_NAME'], 0, strlen($unwanted_dir)) != $unwanted_dir){

    if ($pref_language == 'af'){
        header('Location:en'.$_SERVER['SCRIPT_NAME']);
        exit;
        }
    if ($pref_language == 'sq'){
        header('Location:en'.$_SERVER['SCRIPT_NAME']);
        exit;
        }
}
?> 
```

另一种方法是正则表达式，但这更简单

我建议您在选择语言时使其更加动态。IE：

```
<?php

$unwanted_dir = "/scripts";
$pref_language == 'af';  // dynamicaly set the language
$full_path = '/home/php/site/';

// this will make sure that the script name doesnt start with "/scripts" 
if (substr($_SERVER['SCRIPT_NAME'], 0, strlen($unwanted_dir)) != $unwanted_dir){

    if (is_dir($full_path . $pref_language)){
        header('Location:'$full_path . $pref_language . $_SERVER['SCRIPT_NAME']);
    }
    else{
        echo "Sorry, we don't support your language";
        // or
        // header('Location:go/to/unsopported/languages.php');
    }

    exit;
}
?> 
```

# css - Chrome 开发者工具：如何找出覆盖 CSS 规则的内容？

> ID：13867088
> 
> 赞同：208
> 
> 时间：2012-12-13T19:35:00.323
> 
> 标签：css, google-chrome, developer-tools, inspector

嗯，这很简单。如果 Chrome 的开发者工具显示样式被覆盖，如何查看覆盖它的 CSS 规则？

我想知道是否有类似*"Show me what overrides this" 之*类的东西。

**OBS：** *请不要将我指向 Firebug。*

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2012-12-13T20:03:16.460

使用元素检查器的**Computed Style**面板。展开感兴趣的财产以查看适用规则的列表，以及哪一项获胜。

![铬屏幕截图](../Images/c75f131d6bda4281889eeb175dffd1dc.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T19:41:43.413

您可以简单地查看未删除的具有相同名称的那些，记住列表是按重要性排列的。

或者您可以查看计算的样式。它们将是实际应用的样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T19:41:59.880

crtrl + shift + c 并检查元素。然后在右下角的框中找到没有线条的样式。

在大多数情况下，覆盖位于顶部（并且没有一条线穿过它，因为这种风格是“获胜”的风格）。

# javascript - 如何从javascript中的行中获取唯一数据

> ID：13867089
> 
> 赞同：0
> 
> 时间：2012-12-13T19:35:03.263
> 
> 标签：javascript, database

我正在尝试从行中获取唯一数据。

我的数据

```
name  title
tim    1
tim    1
tim    2
tim    3
time   3
jenny  5
jenny  5
jenny  6
jenny  7 
```

我的目标是使用 javascript 显示我的表格

```
tim    1
tim    2
time   3
jenny  5
jenny  6
jenny  7 
```

我知道更改数据结构或选择数据的方式很容易，但我无权访问数据库，所以我需要在 javascript 中弄清楚

我的第一步是将所有独特的东西推`title`到我的`peopleArray`：

```
1
2
3
5
6
7 
```

我试过的代码。

```
 for(var a=0; a<results.length; a++){
        if(results[(a+1)]){
             if(a==0 || results[a].title != results[(a+1)].title){

                peopleArray.push(results[(a)].title)
             }
         }
      } 
```

我的代码并没有真正起作用，我在这里存货。有人对此有提示吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:52:57.257

对于不需要对列表进行排序的内容，您可以使用以下内容：

[http://jsfiddle.net/4dvfq/1/](http://jsfiddle.net/4dvfq/1/)

```
var results = [{"name": "tim", "title": "1"},
               {"name": "jenny", "title": "2"},
               {"name": "tim", "title": "1"},
               {"name": "jenny", "title": "1"}];
// Should return "tim 1", "jenny 2", "jenny 1" items

function getUniques(arr) {
    var i = 0;
    var len = arr.length;
    var found = {};
    var ret = [];

    for (; i < len; i++) {
        var cur = arr[i];
        var name = cur.name;
        var title = cur.title;
        var name_title = name + title;

        if (!(name_title in found)) {
            ret.push(cur);
            found[name_title] = 1;
        }
    }
    return ret;
}

console.log(getUniques(results)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:44:23.630

如果它已经像您的问题一样排序，那么您可以使用 Array.filter()：

```
data = data.filter(function (d, i) {
    var next = data[i+1] || {name: '', title: ''};
    return d.name != next.name || d.title != next.title;
}); 
```

如果它还没有按照您的问题排序，请先执行以下操作：

```
data = data.sort(function (a, b) {
    return a.name < b.name ? -1 : a.name == b.name ? 0 : 1;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:42:53.500

```
function uniquify(results) {    
    var peopleArray = [];
    for (var a = 0; a < results.length; a++) {
        if (peopleArray.indexOf(JSON.stringify(results[a])) == -1) {
            peopleArray.push(JSON.stringify(results[a]));
        }
    }
    return peopleArray.map(function(val) {
        return JSON.parse(val);
    });
} 
```

这与排序顺序无关，并且足够灵活，可以与其他模式一起使用。这是一个使用您的数据的演示：http: [//jsfiddle.net/w4cKg/](http://jsfiddle.net/w4cKg/)

# c++ - 如何将我的 C++ DLL 包含在单独的项目中？

> ID：13867090
> 
> 赞同：1
> 
> 时间：2012-12-13T19:35:04.133
> 
> 标签：c++, dll, visual-studio-2012

这个问题似乎很明显，但我遇到了很多麻烦，经过大量搜索后，我最终不得不在这里发帖。

我目前打开了两个 Visual Studio 窗口。一个是导出一个类的 Win32 Console->DLL 项目，在输出目录中我有：

*   .dll 文件
*   .exp 文件
*   .pdb 文件
*   .lib 文件

我已将 DLL 文件放入我的另一个项目的输出目录中，就像我对所有 DLL 所做的那样，这通常可以正常工作。然后，我将该目录添加到链接器的库目录中。

但与我使用的大多数库不同，我认为我做错了什么或者我误解了它是如何工作的，我没有 .h[pp] 文件，所以我不知道应该如何将这些函数包含到我的代码中。我宁愿没有仅限 Windows 的黑客（我想将其限制在 DL​​L 项目中，以便可以轻松移植）。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:42:05.950

将 .h 文件提供给其他项目并没有什么特别的“hacky”或“windows”。您的 .lib 文件将提供完成构建所需的信息。请参阅：[如何在 Visual Studio C++ 中使用第三方 dll？](https://stackoverflow.com/questions/495795/how-do-i-use-a-third-party-dll-in-visual-studio-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:40:03.827

你有没有将.dll对应的.lib文件添加到其他项目的目录中？

链接器使用的是 .lib 文件，而不是 DLL（加载程序在运行时使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:47:47.403

.dll 是一个共享库，而不是静态库（Windows 上的 .lib）。

编译项目时必须始终链接静态库，您可以使用头文件 (.h/.hpp) 轻松调用它们的函数，而共享库有两种选择：

*   静态链接（在编译时，但实现方式与静态库不同）
*   动态链接（在运行时）

我建议您阅读这篇深入的文章： http: [//www.codeproject.com/Articles/85391/Microsoft-Visual-C-Static-and-Dynamic-Libraries](http://www.codeproject.com/Articles/85391/Microsoft-Visual-C-Static-and-Dynamic-Libraries)

另见维基百科文章：[https ://en.wikipedia.org/wiki/Dynamic-link_library](https://en.wikipedia.org/wiki/Dynamic-link_library)

# json - 使用 Jackson 解析 JSON 中的未命名映射

> ID：13867093
> 
> 赞同：0
> 
> 时间：2012-12-13T19:35:28.240
> 
> 标签：json, parsing, jackson

我有一些以下格式的 JSON，我试图用杰克逊解析 -

```
"response":{
"response_inner":{
"a":{"field1":2,"field2":0,"field3":5,"field4":0,"field5":[{"field5_1":"b","field5_2":1},{"field5_1":"c","field5_2":1}]},
"d":{"field1":2,"field2":6,"field3":11,"field4":0,"field5":[{"field5_1":"c","field5_2":1},{"field5_1":"b","field5_2":1}]},
"response_inner_bool":false
}
} 
```

这里的“a”、“b”等是一些可以在每个响应中改变的字符串。

我创建了一个 Java 对象来表示“response_inner”（我们称之为 ResponseInner）和另一个来表示包含该字段的对象（我们称之为 FieldInfo），但我不确定如何使用 @ 解析它JsonCreator 和 @JsonProperty 注释 - ResponseInner 对象可以包含任意数量的 String -> FieldInfo 映射。

我试着像这样解析它 -

```
public class Response {
    private ResponseInner responseInner;

    @JsonCreator
    public Response(@JsonProperty("response_inner") ResponseInner responseInner) {
        this.reponseInner = responseInner;
    }
}

public class ResponseInner {
    private Map<String, FieldInfo> stringToFieldInfoMap;
    private boolean responseInnerBool;

    @JsonCreator
    public ResponseInner(Map<String, FieldInfo> stringToFieldInfoMap, @JsonProperty("response_inner_bool") boolean responseInnerBool ) {
        this.stringToFieldInfoMap = stringToFieldInfoMap;
        this.responseInnerBool = responseInnerBool;
    }
} 
```

但它抱怨构造函数的参数 #0 没有属性名称注释；当多参数构造函数注释为 Creator 时必须有名称。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:58:03.483

无论如何，您似乎都没有使用`stringToFieldInfoMap`inside ResponseInner 。为什么需要将其作为参数传递？

如果您在该类中确实需要它，您可以简单地通过 setter 设置它，而不是将其传递给构造函数。

或者，您也许可以利用第三个类来处理响应的实际映射，该映射使用 Response 对象（这反过来又会使用已从中删除 Map 的 ResponseInner 对象）。这实际上可能允许您将映射逻辑与响应逻辑分离。

```
public class MappedResponse {
    private Map<String, FieldInfo> stringToFieldInfoMap;
    private Response response;

    public MappedResponse(Map<String, FieldInfo> stringToFieldInfoMap, Response response) {
        this.stringToFieldInfoMap = stringToFieldInfoMap;
        this.response = response;     
    }
} 
```

# emacs - 在 elisp 中对正则表达式搜索的结果进行一些算术运算

> ID：13867097
> 
> 赞同：1
> 
> 时间：2012-12-13T19:35:42.730
> 
> 标签：emacs, elisp

前段时间@Oleg Pavliv 在[https://unix.stackexchange.com/questions/47615/emacs-simple-arithmetics-in-query-replace](https://unix.stackexchange.com/questions/47615/emacs-simple-arithmetics-in-query-replace)中解释了如何在 emacs 中的查询替换（交互式）中进行简单的算术运算。

现在我想对一个小的 elisp 程序使用相同的方法，但它不起作用。例如，考虑以下 elisp 代码的最小示例：

```
(defun Nshift ()
(interactive)
(query-replace-regexp "\\([0-9]+\\)\\.Number" "\\,((+ 3 \\#1)).Number")
) 
```

现在假设我`Nshift`在包含例如字符串的缓冲区中运行，`4.Number`然后我收到以下错误消息。

```
match-substitute-replacement: Invalid use of `\' in replacement text 
```

一个正确的 elisp 实现`Nshift`会是什么样子？

**编辑：**

我看不到 Seans 的答案如何用简单易读的语法概括为更复杂的替换（我在我的应用程序中需要），例如，什么是正确的（并且易于阅读）相当于

```
(query-replace-regexp "\\([0-9]+\\)\\.Number.\\([0-9]+\\)" "\\,((+ 3 \\#1)).Number.\\,((+ 8 \\#2))") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:40:12.557

像这样：

```
(defun Nshift ()
  (interactive)
  (while (search-forward-regexp "\\([0-9]+\\)\\.Number" nil t)
    (replace-match (format "%s.Number" (+ 3 (string-to-number (match-string 1))))))) 
```

编辑添加：

您的扩展示例可以通过这种方式实现：

```
(defun Nshift ()
  (interactive)
  (while (search-forward-regexp "\\([0-9]+\\)\\.Number\\.\\([0-9]+\\)" nil t)
    (replace-match
     (number-to-string (+ 3 (string-to-number (match-string 1))))
     nil nil nil 1)
    (replace-match
     (number-to-string (+ 8 (string-to-number (match-string 2))))
     nil nil nil 2))) 
```

它实际上比我原来的解决方案更容易，因为我忘记了它`replace-match`有一个可选的第五个参数，它导致它只替换一个子表达式，并且使您不必在替换文本中复制固定文本（“.Number.”）。

这里可以进行一些重构：

```
(defun increment-match-string (match-index increment)
  (replace-match
   (number-to-string (+ increment (string-to-number (match-string match-index))))
   nil nil nil match-index)) 
```

然后 Nshift 可以这样实现：

```
(defun Nshift ()
  (interactive)
  (while (search-forward-regexp "\\([0-9]+\\)\\.Number\\.\\([0-9]+\\)" nil t)
    (increment-match-string 1 3)
    (increment-match-string 2 8))) 
```

# string - CakePHP 将变量视为日期时间而不是字符串

> ID：13867101
> 
> 赞同：1
> 
> 时间：2012-12-13T19:35:52.327
> 
> 标签：string, cakephp, variables, datetime

在我的 AppController beforeFilter 中，我将用户数据保存到变量中以便在我的视图中使用。我需要获取作为日期时间的 last_login 字段，然后使用 dateformat 函数显示我想要的日期，但是 cakephp 将此变量输出为字符串，有没有办法将表格的格式作为输入？（约会时间）。

```
 // Set user variables for each page load
        $id = $this->Auth->user('id');
        // Set $id
        $user_data = $this->User->findById($id);
        // Set User Last Login
        $user_lastlogin = $user_data['User']['last_login'];
        $this->set('lastLogin', $user_lastlogin); 
```

看法

```
<?php echo date_format($lastLogin, 'F jS \at h:i:s A'); ?> 
```

错误

```
Warning (2): date_format() expects parameter 1 to be DateTime, string given 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:25:10.167

首先，您的代码很混乱。试试这个：

```
$this->User->id = $this->Auth->user('id');
$this->set('lastLogin', $this->User->field('last_login')); 
```

Cake 有[一门课](http://book.cakephp.org/2.0/en/core-utility-libraries/time.html)用来做日期和时间。

```
echo CakeTime::niceShort($lastLogin); 
```

通常，您应该将数据字符串化到视图中，如果您需要对数据执行其他操作，使其成为控制器或模型的一部分将对您的应用程序产生负面影响。

# .net - 在多个匹配项中访问命名的正则表达式捕获组

> ID：13867102
> 
> 赞同：1
> 
> 时间：2012-12-13T19:35:52.890
> 
> 标签：.net, regex, vb.net

我有一行文本，其中可能包含 1 个或多个匹配项。我正在使用命名捕获组，因为我不断地改变周围的事物，这使它更容易。

细绳：

```
blah blah blah dasf{{optionA:B4}}t estsdf{{optionB:B4}}sadf{{optionB:B4}}sadf13 
```

图案：

```
(?<choice>\{\{(?<c>optionA|optionB):(?<d>[A-Z]\d{1,2})\}\}) 
```

我可以在网上找到的每个处理这种类型结构的示例都没有使用命名捕获组，而且我自己也无法将它拼凑在一起。

在我的示例场景中，有 3 个匹配项，对于每个匹配项，我希望能够访问“choice”、“c”和“d”捕获组的**内容**。

有人可以告诉我一个如何做到这一点的简单例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:50:08.733

要在匹配后访问命名捕获组的内容，您需要使用正则表达式对象：

```
Dim RegexObj As New Regex("(?<quote>['""])(?<text>.*?)\k<quote>")
Result = RegexObj.Match(Subject).Groups("text").Value 
```

现在`Result`将包含`(?<text>...)`捕获组的内容。

对于多个匹配，您可以遍历结果，调用`.NextMatch()`直到找到最后一个匹配：

```
Dim ResultList As StringCollection = New StringCollection()
Dim RegexObj As New Regex("(?<quote>['""])(?<text>.*?)\k<quote>")
Dim Result As Match = RegexObj.Match(Subject)
While MatchResult.Success
    ResultList.Add(Result.Groups("text").Value)
    Result = Result.NextMatch()
End While 
```

* * *

问题的原始答案（关于反向引用，而不是捕获组）：

有两种情况可以使用反向引用：

*   要在同一个正则表达式中引用反向引用，请使用`\k<groupname>`.
*   要在替换文本中插入与命名组匹配的文本，请使用`${groupname}`.

例如，

```
res = Regex.Replace(subject, "(?<quote>['""])(?<text>.*?)\k<quote>", "*${text}*") 
```

将改变

```
This is a "quoted text" and 'so is this'! 
```

进入

```
This is a *quoted text* and *so is this*! 
```

# user-interface - JavaFX TextInputArea 的最小实现

> ID：13867105
> 
> 赞同：2
> 
> 时间：2012-12-13T19:35:59.337
> 
> 标签：user-interface, javafx-2, rich-text-editor

我正在研究在 JavaFX 中编写富文本编辑器的最佳方法 - 不要向我提及 HTMLEditor：我们已经花了几个月的时间来破解它，我可以写很多关于为什么它不适合我们的目的！目前的选择是扩展 AnchorPane 并从头开始执行所有布局、导航等，或者扩展 TextInputArea，这看起来会有所帮助。任何人都有自己的实现或想提出一个最小的实现？

FWIW这是我的一个片段：

公共类 TryPain3 扩展 TextInputControl { private AnchorPane rootNode = new AnchorPane();

```
public TryPain3() {
    super(new Content() {
        private String text = "";

        @Override
        public String get(int i, int i1) {
            return text.substring(i, i1);
        }

        @Override
        public void insert(int i, String string, boolean bln) {
        }

        @Override
        public void delete(int i, int i1, boolean bln) {
        }

        @Override
        public int length() {
            return text.length();
        }

        @Override
        public String get() {
            return text;
        }

        @Override
        public void addListener(ChangeListener<? super String> cl) {

        }

        @Override
        public void removeListener(ChangeListener<? super String> cl) {
            throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
        }

        @Override
        public String getValue() {
            return text;
        }

        @Override
        public void addListener(InvalidationListener il) {

        }

        @Override
        public void removeListener(InvalidationListener il) {
            throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
        }
    });

    setEditable(true);

    Text text1 = new Text("fred was here");
    text1.setFont(Font.font("Tahoma", FontWeight.NORMAL, 18));
    text1.setTextAlignment(TextAlignment.LEFT);

    text1.setFontSmoothingType(FontSmoothingType.LCD);

    rootNode.getChildren().add(text1);

    setSkin(new TP3Skin(this, rootNode));

}

class TP3Skin implements Skin<TryPain3> {
    TryPain3 tp;
    Node root;

    public TP3Skin(TryPain3 tp, Node root) {
        this.tp = tp;
        this.root = root;
    }

    @Override
    public TryPain3 getSkinnable() {
        return tp;
    }

    @Override
    public Node getNode() {
        return root;
    }

    @Override
    public void dispose() {
        tp = null;
        rootNode = null;
    }

} 
```

}

看起来好像皮肤不是可选的。

我想知道的问题是：

*   UI 应该如何绘制 - 我很乐意从头开始编写代码，但如何从调用 forward() 中获益作为示例
*   UI 创建应该在皮肤中完成吗？
*   如果单击一些文本，基类是否处理诸如将光标放在哪里的事情

我相信其他问题会由此产生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:30:31.627

您可能想尝试下一个 JavaFX 8.0 控件`TextFlow`，它允许聚合各种文本样式。在此处查看示例：[https ://wikis.oracle.com/display/OpenJDK/Rich+Text+API+Samples](https://wikis.oracle.com/display/OpenJDK/Rich+Text+API+Samples)

JavaFX 8 是 JDK8 的一部分。所以你可以在这里下载开发人员构建[http://jdk8.java.net/download.html](http://jdk8.java.net/download.html)，它将包括 JavaFX 和新的 TextFlow 控件。

# sql - 仅返回具有多个正确选择的结果

> ID：13867106
> 
> 赞同：1
> 
> 时间：2012-12-13T19:35:59.400
> 
> 标签：sql, sql-server, having

我需要提出一个查询，以显示哪些问题有多个正确答案。一直在寻找，找不到我需要的东西。我找到了这个，这有点像我想要的，但它对我不起作用，也许我做错了。

[SQL Count where 子句](https://stackoverflow.com/questions/3440857/sql-count-where-clause)

这是我到目前为止...

```
SELECT pq.ItemID, pq.RevNum, pc.sequence, pc.correct FROM Choice pc 
JOIN Question pq on pc.UniqueQID = pq.UniqueQID and pc.RevNum = pq.RevNum
Group BY pq.ItemID, pq.RevNum, pc.Sequence, pc.Correct
ORDER BY ItemID, RevNum, Sequence 
```

这将返回每个问题/修订和所有选项的列表。结果看起来像这样...

```
ItemID      RevNum  Seq     Correct
12776   1   A   0
12776   1   B   0
12776   1   C   1

12777   1   A   0
12777   1   B   1
12777   1   C   0
12777   1   D   0

12778   1   A   1
12778   1   B   1
12778   1   C   0
12778   1   D   1

8301    3   a   1
8301    3   b   2
8301    3   c   2
8301    3   d   2

8303    3   a   2
8303    3   b   1
8303    3   c   2
8303    3   d   2 
```

为了清楚起见，我添加了新行。选择 = 1 正确，0 或 2 不正确。我只需要有多个正确答案的问题，例如上面的 12778。

根据上面链接的文章，我尝试了类似的方法，但没有成功，在第 4 行的 = 附近出现错误。

```
SELECT pq.ItemID, pq.RevNum, pc.sequence, pc.correct FROM pubChoice pc 
JOIN pubQuestion pq on pc.UniqueQID = pq.UniqueQID and pc.RevNum = pq.RevNum
Group BY pq.ItemID, pq.RevNum, pc.Sequence, pc.Correct
HAVING Count(correct=1) > 1
ORDER BY ItemID, RevNum, Sequence 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:41:28.943

您只需要正确为 1 的记录，因此将其添加到 where 子句。在其他人的这个组之后，并添加一个计数（*），因此您可以在该计数（*）上有一个有子句。像这样的东西应该工作：

```
SELECT pq.ItemID, pq.RevNum, pc.sequence,count(*) FROM pubChoice pc 
JOIN pubQuestion pq on pc.UniqueQID = pq.UniqueQID and pc.RevNum = pq.RevNum
WHERE pc.Correct = 1
Group BY pq.ItemID, pq.RevNum, pc.Sequence
HAVING Count(*) > 1
ORDER BY ItemID, RevNum, Sequence 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:11:25.943

根据您的评论和最初的问题，这似乎对您有用：

```
SELECT pq.ItemID, 
  pq.RevNum, 
  pc.sequence, 
  pc.correct 
FROM Choice pc 
JOIN Question pq 
  on pc.UniqueQID = pq.UniqueQID 
  and pc.RevNum = pq.RevNum
where exists (select count(*) TotalCorrect, UniqueQID, RevNum
              from choice c
              where correct = 1
                and pc.UniqueQID = c.UniqueQID
                and pc.RevNum = c.RevNum
              group by UniqueQID, RevNum
              having count(*) > 1); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/06400/10)

结果是：

```
| ITEMID | REVNUM | SEQUENCE | CORRECT |
----------------------------------------
|  12778 |      1 |        A |       1 |
|  12778 |      1 |        B |       1 |
|  12778 |      1 |        C |       0 |
|  12778 |      1 |        D |       1 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:54:00.013

你如何确定一个选择是正确的？你需要这样的东西：

```
SELECT pq.*
FROM Question pq
INNER JOIN 
(
SELECT ItemID, COUNT(*) as correctCount
FROM Question q
INNER JOIN Choice c
ON c.UniqueQID = q.UniqueQID 
WHERE ANSWER_IS_CORRECT
GROUP BY ItemID
HAVING COUNT(*) > 1
) mults
ON pq.ItemID = mults.ItemID 
```

请注意，我没有对此进行测试，但只要您有办法判断选择是否正确，它理论上应该可以工作。它将返回具有多个正确答案的所有 ItemID，然后重新加入 ItemID 上的问题以获取所有选项（您可能需要重新加入选择）。

# ruby - 获取 URL 中图像名称的第一个匹配项（正则表达式、Ruby）

> ID：13867111
> 
> 赞同：0
> 
> 时间：2012-12-13T19:36:17.550
> 
> 标签：ruby, regex

我正在尝试正则表达式 URL（红宝石）中图像名称的第一个匹配项。

这是我当前的代码：

```
@wikimedia_link.match(/(\/|:)([a-zA-Z\_\-0-9]*\.(jpeg|jpg|png|gif))/).try(:[], 2) 
```

如果我有一场比赛，它会起作用（返回“Samuel_L_Jackson_Comic_Con.jpg”），即

```
http://en.wikipedia.org/wiki/File:Samuel_L_Jackson_Comic_Con.jpg 
```

但是，这会返回错误（nil），似乎是因为 url 中有“Lucy_desi_1957.JPG”和“220px-Lucy_desi_1957.JPG”。

```
http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Lucy_desi_1957.JPG/220px-Lucy_desi_1957.JPG 
```

关于如何进行第一场比赛的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:05:18.207

你想要的是：

```
@wikimedia_link[/[^\/:]+\.(?i:jpeg|jpg|png|gif)/] 
```

使用`(?i:...)`分组开关进行不区分大小写的匹配，因此将匹配 jpg 或 JPG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T13:38:01.650

这就是我的做法：

```
2.0.0-p247 :008 > image_url = 'http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Lucy_desi_1957.JPG/220px-Lucy_desi_1957.JPG'
 => "http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Lucy_desi_1957.JPG/220px-Lucy_desi_1957.JPG" 
2.0.0-p247 :009 > image_name = image_url.match( /[-_\w:]+\.(jpe?g|png|gif)$/i ) => #<MatchData "220px-Lucy_desi_1957.JPG" 1:"JPG"> 
2.0.0-p247 :012 > image_name.to_s
 => "220px-Lucy_desi_1957.JPG" 
```

没有 IRB：

```
image_url = 'http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Lucy_desi_1957.JPG/220px-Lucy_desi_1957.JPG'
image_name = image_url.match( /[-_\w:]+\.(jpe?g|png|gif)$/i );
puts image_name #=> "220px-Lucy_desi_1957.JPG" 
```

这个解决方案是最好的，因为它从一个简单的 url 和一个简单的文件名派生出图像的文件名：

```
http://www.anexample.com/dog.jpg 
```

或更复杂的文件名：

```
http://www.anexample.com/342432_large-xs_dog.jpg 
```

或者如果在 URL 中多次引用图像：

```
http://www.anexample.com/cat.jpg/upload/342432_large-xs_dog.jpg/xs/342432_large-xs_dog.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:48:27.983

如果您希望文件名在末尾添加一个 $ 以匹配末尾。

```
/(/|:)([\w-\.]+\.(jpeg|jpg|png|gif)$)/i 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-13T19:42:38.930

以下正则表达式适用于您的两个示例

```
/^.+\/[\w:]+\.(jpe?g|png|gif)/i 
```

您可以通过`"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Lucy_desi_1957.JPG"`以下方式获得

```
"http://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Lucy_desi_1957.JPG/220px-Lucy_desi_1957.JPG".match(/^.+\/[\w:]+\.(jpe?g|png|gif)/i).to_a.first 
```

如果您只是在文件名本身之后，请`^.+\/`从正则表达式中删除，将其保留为简单

```
/[\w:]+\.(jpe?g|png|gif)/i 
```

在中使用此版本`match`将仅返回`"Lucy_desi_1957.JPG"`

在任何一种情况下，如果没有找到匹配项，`nil`将返回。

# dart - 升级的 dart，现在在我的 Web UI 自动生成的代码中出现 noSuchMethod 异常

> ID：13867113
> 
> 赞同：3
> 
> 时间：2012-12-13T19:36:25.293
> 
> 标签：dart, dartium, dart-webui

我刚刚升级到 Dart 编辑器 0.2.8_r15948，现在我的代码在我升级之前正在运行，当我尝试在 dart 浏览器中运行它时抛出以下异常。看起来 _e11 是我的模板中的 UnknownElement 集：< template iterate='pin in app.MainMap.Pins' >

这是我在 Dartium Launch 中收到的错误消息：

```
Exception: NoSuchMethodError : method not found: 'get:parentNode'
Receiver: Instance of 'UnknownElement'
Arguments: []
Stack Trace: #0      Element.noSuchMethod (file:///E:/b/build/slave/dartium-win-full-trunk/build/src/build/Release/obj/global_intermediate/webkit/bindings/dart/dart/html/Element.dart:317:7)
1      init_autogenerated.<anonymous closure> (http://127.0.0.1:3030/C:/Users/Jonathan/dart/MapWebComponent/web/out/MapWebComponent.dart:316:43)
2      watchAndInvoke (http://127.0.0.1:3030/C:/Users/Jonathan/dart/MapWebComponent/web/out/packages/web_ui/watcher.dart:114:13)
3      init_autogenerated (http://127.0.0.1:3030/C:/Users/Jonathan/dart/MapWebComponent/web/out/MapWebComponent.dart:283:47)
4      main (http://127.0.0.1:3030/C:/Users/Jonathan/dart/MapWebComponent/web/out/MapWebComponent.html_bootstrap.dart:7:30) 
```

关于发生了什么的任何想法？我认为这可能是一个错误，因为在升级到 Dartium 版本 0.2.8_r15948 之前一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:53:21.453

请查看我的 github 问题和开发人员给我的回复： [https ://github.com/dart-lang/web-ui/issues/263](https://github.com/dart-lang/web-ui/issues/263)

尝试固定 0.2.9 版的 web_ui。

我们正在为 SDK 的另一次推送做准备，所以我上传了 0.2.10 版本以使用最新的主干：版本 16102。

一些额外的背景信息。每次在主干中有新的推送时，我们都会准备我们的包以保持最新，我们对 pub 进行新的推送，以便我们可以测试发布，然后我们最终将主干发布推出。

不幸的是，在我们推送到 pub 和发布之间的这段时间里，任何使用 web_ui 之类的依赖项的人：任何执行 pub 安装或 pub 更新的人，可能会得到一个对于他们的 SDK 来说太新的包。

最终我们将有办法告诉 pub 我们的包的特定版本（http://code.google.com/p/dart/issues/detail?id=6285）需要哪个版本的 SDK，一旦那是可能，这种休息不应该再发生了。

您可以在 README.md 中找到有关如何固定特定版本的更多详细信息。我刚刚更新了 CHANGELOG.md 以提及 0.2.10 版本需要哪个版本的 SDK。

# tsql - SQLite SELECT 与 JOIN 生成所有关系数据

> ID：13867116
> 
> 赞同：0
> 
> 时间：2012-12-13T19:36:29.773
> 
> 标签：tsql, android-sqlite

我有一个数据库模式，但我对 T-SQL 不太熟悉，我知道，ORM 毁了我。开发人员:)

这是架构。

Table1 1 - 1 到三个表（Table2、Table3、Table4）和每个 Table(2,3,4) 1 - 1 到一个 Table5。

图形（尝试）表示：

```
Table1  1<->1 Table2 1<->1 Table5
        1<->1 Table3 1<->1 Table5
        1<->1 Table4 1<->1 Table5 
```

我需要一个查询来检索所有 Table1 记录及其对应的关系数据，Table1、Table2、Table3 及其与 Table5 的关系数据。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:40:37.890

在没有看到完整的表结构和列名的情况下，您应该能够以类似的方式连接表：

```
select *
from table1 t1
left join table2 t2
    on t1.id = t2.id
left join table3 t3
    on t1.id = t3.id
left join table4 t4
    on t1.id = t4.id
left join table5 t5
    on t2.id = t5.id
    or t3.id = t5.id
    or t4.id = t5.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:08:29.287

我真正需要的是：

```
SELECT F.*, DE.Title as EnergyDrinkTitle, DE.[Picture] AS EnergyPicture, DI.Title AS InspDrinkTitle, DR.Title AS RelaxDrinkTitle 
FROM
(Select M.*, E.DescriptionTitle, I.[DescriptionTitle], R.DescriptionTitle, 
E.[DrinkId] as EnergyDrink, I.DrinkId as InspDrink, R.[DrinkId] as RelaxDrink
FROM  [Member] M
LEFT JOIN [Energy] E
    ON M.[_id] = E.[MemberId]
LEFT JOIN [Inspiration] I
    ON M.[_id] = I.[MemberId]
LEFT JOIN [Relax] R
    ON M.[_id] = R.[MemberId]
) AS F JOIN Drink DE ON F.EnergyDrink = DE._id
JOIN Drink DI ON F.InspDrink = DI._id
JOIN Drink DR ON F.RelaxDrink = DR._id 
```

# c# - 如何使用 MSBuild 将链接文件添加到 csproj 文件。（3.5 框架）

> ID：13867117
> 
> 赞同：3
> 
> 时间：2012-12-13T19:36:42.330
> 
> 标签：c#, .net, xml, build, msbuild

我正在尝试使用 MSBuild 将链接文件添加到我的`.csproj`文件中。

这是 .Net Framework 3.5（而不是 4.0）。我提到这一点是因为我看到一些 4.0 特定的东西试图操纵 XML。

这是我的开始：

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core">
      <RequiredTargetFramework>3.5</RequiredTargetFramework>
    </Reference>
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>

  <ItemGroup>
    <Compile Include="MySuperCoolClass.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>

  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />

</Project> 
```

这就是我想要得到的：

```
 <Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
      <ItemGroup>
        <Reference Include="System" />
        <Reference Include="System.Core">
          <RequiredTargetFramework>3.5</RequiredTargetFramework>
        </Reference>
        <Reference Include="System.Data" />
        <Reference Include="System.Xml" />
      </ItemGroup>

      <ItemGroup>
        <Compile Include="MySuperCoolClass.cs" />
        <Compile Include="Properties\AssemblyInfo.cs" />
      </ItemGroup>

      <ItemGroup>
        <Content Include="..\..\SomeFunFolder\MyLinkFile.ext">
          <Link>MyLinkFile.ext</Link>
        </Content>
      </ItemGroup>    

      <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
    </Project> 
```

我有：

*   `MSBuild.Community.Tasks.dll`

和

*   `MSBuild.ExtensionPack.dll`

可用的。

有什么具体的帮助吗？

*像use 'MSBuild.ExtensionPack.Xml.XmlFile'*这样的衬线评论不会有帮助。

但我非常感谢任何指针或编码示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:50:24.367

好吧，我打开了“MSBuild.ExtensionPack.Xml.XmlFile(.cs)”的代码并环顾四周。谢天谢地开源。

我想通了..你必须“建立起来”。而且我必须添加一个小巫术技巧（使用下面的“MyUniqueKeyHelper123”）。

我会在这里发帖。如果您在使用“MSBuild.ExtensionPack.Xml.XmlFile(.cs)”时遇到问题，请获取源代码并查看它。您可以通过查看方法来弄清楚如何设置属性。起初有点棘手，但可以解决。

```
<PropertyGroup>
    <MSBuildExtensionPackPath Condition="'$(MSBuildExtensionPackPath)' == ''">.\ExtensionPackFiles</MSBuildExtensionPackPath>
    <MSBuildExtensionPackLib>$(MSBuildExtensionPackPath)\MSBuild.ExtensionPack.dll</MSBuildExtensionPackLib>
</PropertyGroup>    

<UsingTask AssemblyFile="$(MSBuildExtensionPackLib)" TaskName="MSBuild.ExtensionPack.Xml.XmlFile" />

<Target Name="XmlTest01Target">

    <Message Text="MSBuildExtensionPackLib = $(MSBuildExtensionPackLib)" />

    <!--

    The goal is:

    <ItemGroup>
    <Content Include="..\..\SomeFunFolder\MyLinkFile.ext">
    <Link>MyLinkFile.ext</Link>
    </Content>
    </ItemGroup>    

    -->

    <!-- Define a custom namespace.  I used "peanut" just to show it is any name you give it  -->

    <ItemGroup>
        <Namespaces Include="Mynamespace">
            <Prefix>peanut</Prefix>
            <Uri>http://schemas.microsoft.com/developer/msbuild/2003</Uri>
        </Namespaces>       
    </ItemGroup>

    <!-- 
        Add the <ItemGroup> (new) Element.  HOWEVER, since there will probably be multiple <ItemGroup> nodes, tag it with some unique identifier.  Will Clean up later.
    -->
    <XmlFile 
        TaskAction="AddElement" 
                    Namespaces="@(Namespaces)" 
                 File=".\MyCSharpProjectFile.csproj"
                 Element="ItemGroup"
                 Key="MyUniqueKeyHelper123"
                 Value ="MyUniqueValueHelper123"
                 XPath="//peanut:Project" 
        />

    <!-- 
        Add the <Content> (new) Element.  With Attribute Value.
    -->         
    <XmlFile 
        TaskAction="AddElement" 
                 File=".\MyCSharpProjectFile.csproj"
                 Element="Content"
                 Key="Include"
                 Value ="..\..\SomeFunFolder\MyLinkFile.ext"
                                Namespaces="@(Namespaces)" 
                 XPath="//peanut:Project/peanut:ItemGroup[@MyUniqueKeyHelper123='MyUniqueValueHelper123']" 
        />

    <!-- 
        Add the <Content> (new) Element.  With Element Value Value.
    -->                 
    <XmlFile 
        TaskAction="AddElement" 
                 File=".\MyCSharpProjectFile.csproj"
                 Element="Link"
                 InnerText ="MyLinkFile.ext"
                    Namespaces="@(Namespaces)" 
                 XPath="//peanut:Project/peanut:ItemGroup[@MyUniqueKeyHelper123='MyUniqueValueHelper123']" 
        />

    <!-- 
        Clean up the "unique" attribute to leave clean xml.
    -->             
    <XmlFile 
        TaskAction="RemoveAttribute" 
                 File=".\MyCSharpProjectFile.csproj"
                 Element="Link"
                 Key="MyUniqueKeyHelper123"
                    Namespaces="@(Namespaces)" 
                 XPath="//peanut:Project/peanut:ItemGroup[@MyUniqueKeyHelper123='MyUniqueValueHelper123']" 
        />

</Target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:51:23.540

您可以使用以下内容吗？

```
using System;
using System.Text;
using Microsoft.Build.BuildEngine;

namespace ConsoleApplication11
{
    class Program
    {
        static void Main(string[] args)
        {
            var fullPathName = @"PathToProjectFile\Project.csproj";

            Project project = new Project();
            project.Load(fullPathName);

            var itemGroup = project.AddNewItemGroup();

            var buildItem = itemGroup.AddNewItem("Content", @"..\..\SomeFunFolder\MyLinkFile.ext");
            buildItem.SetMetadata("Link", "MyLinkFile.ext");
            project.Save(fullPathName, Encoding.UTF8);
        }
    }
} 
```

# internet-explorer - 如何使 IE 将凭据传递到托管在同一服务器上的另一个站点？

> ID：13867118
> 
> 赞同：1
> 
> 时间：2012-12-13T19:36:49.957
> 
> 标签：internet-explorer, authentication, iis-7, web, windows-server-2008

这是上下文：
（Internet Information Services 7.0 左右）

**站点 X**绑定到**端口 p**，启用 Windows 身份验证
**站点 Y**绑定到**端口 q**，启用 Windows 身份验证

假设用户导航到站点 X。浏览器要求提供凭据，而用户正在提供它们。然后，在一个页面上，有一个指向站点 Y 的链接。用户点击该链接，浏览器再次要求提供凭据。

我知道浏览器应该这样做（因为毕竟这些是不同的 Web 应用程序），但是有没有办法实现单点登录？站点只能在 Intranet 中访问。

我想一种方法是将诸如**http://computer:p/Y_site 之类**的请求路由到**http://computer:q**，使用**Application Request Routing**作为反向代理（或类似的东西）。这样，浏览器可以发送所需的标头。但是，我认为“支持”网络应用程序不会收到凭据，因此无法知道用户的身份。或者可以吗？

先感谢您！

# r - 使用 R igraph 获取树图的 x,y 坐标

> ID：13867120
> 
> 赞同：2
> 
> 时间：2012-12-13T19:36:51.643
> 
> 标签：r, igraph

我正在使用 R 创建一组 x,y 坐标来绘制组织结构图，并且正在努力获得非径向的布局。我将使用这些坐标在另一个应用程序中绘制图形，因此需要坐标而不是绘图。

我的数据是一个 2 列数据框，显示与列 EmployeeID、ManagerID 的报告关系。

我正在使用包 igraph 并首先使用以下方法创建一个图形：

```
g<-graph.data.frame(dataframe) 
```

检查`E(g)`我得到了我期望的边缘。绘制图形以径向形式给出正确的结构。

我的理解是 reingold.tilford 算法是我想用来获得传统非径向树的算法。所以我创建了一个布局：

```
l<-layout.reingold.tilford(g) 
```

这应该给了我我的 x,y 坐标，但是当我看 l 时，我得到了类似的东西：

```
 [,1]           [,2]
 [1,]  0.000000e+00    3    
 [2,]  0.000000e+00    3    
 [3,]  0.000000e+00    1    
 [4,]  1.899762e-52    3
 [5,]  1.224168e-17    3   
 [6,]  6.582031e-85    3
 [7,] 5.626306e+175    3 
```

再次绘制图表：

```
plot(g,l) 
```

给我一个警告信息：

```
In if (axes) { :
  the condition has length > 1 and only the first element will be used 
```

和以前一样的径向图。此外

```
summary(g) 
```

给出：

```
IGRAPH DN-- 25 24 -- 
attr: name (v/c) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:11:17.893

似乎是 Reingold-Tilford 算法实现中的一个错误；至少布局第 7 行的 X 坐标很奇怪。[我会在igraph-help 邮件列表](https://lists.nongnu.org/mailman/listinfo/igraph-help)上问同样的问题，并发送一个小示例图，作者可以在上面重现您的问题。

**编辑**：在检查了您在邮件列表中发送的示例图之后，似乎 1）它是 Reingold-Tilford 实现中的一个错误，2）如果您反转所有边缘以便它们指向下方，则可以解决它树（从父级到子级），因为这是 Reingold-Tilford 布局算法所假设的，并且它会给您错误的结果，因为它没有为指向“错误”方向的边缘做好准备。更高版本的 igraph 将包含针对该问题的补丁。感谢您的提醒！

**编辑 2**：作为记录，上述错误已得到解决，并将包含在 igraph 0.6.1 中。有关更多信息和[相关补丁](http://bazaar.launchpad.net/~igraph/igraph/0.6-main/revision/3039)，请参阅[相应的错误报告](https://bugs.launchpad.net/igraph/+bug/1090812)。

# makefile - 使用 gsl 和现有的 makefile 编译

> ID：13867121
> 
> 赞同：1
> 
> 时间：2012-12-13T19:36:53.153
> 
> 标签：makefile, gsl

我有一个我正在使用的代码库的生成文件，现在我已经向该代码添加了一些使用 gsl 的代码。我不太确定如何以及将什么添加到将调用 gsl 的 makefile（我要保留它，因为它也在调用 boost）。

这是我的生成文件：

```
CXX = g++
ARCH = -mtune=generic
#   ARCH = -march=core2
#   ARCH = -march=native

COFLAGS = $(ARCH) -O3 -pipe
CXXFLAGS = -Wall $(COFLAGS)

PROGRAMS = getData analyzeData
BOOSTFLAGS = -I .
OPENMP = -fopenmp -DSUPPORT_OPENMP

all: $(PROGRAMS)
getData: getData.cpp common.o parse.o common.h
    $(CXX) $(CXXFLAGS) getData.cpp common.o parse.o -o getData
analyzeData:  analyzeData.cpp common.o parse.o parameters.o 
    $(CXX) $(CXXFLAGS) $(BOOSTFLAGS) $(OPENMP) estimateCrossReplicatesExpression.cpp common.o parse.o parameters.o -o analyzeData

parameters.o: parameters.cpp parameters.h
parse.o: parse.cpp parse.h
common.o: common.cpp common.h

clean:
    rm *.o $(PROGRAMS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T05:07:58.240

如果 GSL 安装在系统的默认路径 (/usr/local/include/gsl) 上，源文件“example.c”的编译命令将是

**gcc -Wall -I/usr/local/include -c example.c**

该库作为单个文件 libgsl.a 安装。库 libgsl.so 的共享版本也安装在支持共享库的系统上。这些文件的默认位置是 /usr/local/lib。如果此目录不在链接器的标准搜索路径上，您还需要提供其位置作为命令行标志。

要链接到库，您需要指定主库和支持的 cblas 库，它提供标准的基本线性代数子例程。如果您的系统没有提供合适的 cblas 实现，则库 libgslcblas.a 中提供了一个。以下示例显示了如何将应用程序与库链接，

**$ gcc -L/usr/local/lib 例子.o -lgsl -lgslcblas -lm**

选项 -lm 与系统数学库链接。在某些系统上，它不是必需的。

因此，您需要在编译命令中指定 gsl 特定标志。相应地更新 Makefile。

# c# - 将字符串解析为动态类型的最快、高效、优雅的方式？

> ID：13867125
> 
> 赞同：12
> 
> 时间：2012-12-13T19:37:19.360
> 
> 标签：c#, string, performance, typeconverter

我正在寻找将字符串转换为各种数据类型的最快（通用方法）。

我正在解析由某物生成的大型文本数据文件（文件大小为几兆字节）。此特定函数读取文本文件中的行，根据分隔符将每一行解析为列，并将解析后的值放入 .NET 数据表中。稍后将其插入数据库。FAR 的瓶颈是字符串转换（Convert 和 TypeConverter）。

我必须采用动态方式（即远离“Convert.ToInt32”等...），因为我永远不知道文件中将包含哪些类型。类型由运行时的早期配置确定。

到目前为止，我已经尝试了以下方法，并且都需要几分钟来解析文件。请注意，如果我注释掉这一行，它只会在几百毫秒内运行。

```
row[i] = Convert.ChangeType(columnString, dataType); 
```

和

```
TypeConverter typeConverter = TypeDescriptor.GetConverter(type);
row[i] = typeConverter.ConvertFromString(null, cultureInfo, columnString); 
```

如果有人知道像这样通用的更快方法，我想知道它。或者，如果我的整个方法由于某种原因很糟糕，我愿意接受建议。但是请不要向我指出使用硬编码类型的非泛型方法；这根本不是一个选择。

**UPDATE - 多线程提高性能测试**

为了提高性能，我考虑将解析任务拆分为多个线程。我发现速度有所提高，但仍然没有我希望的那么快。但是，对于那些感兴趣的人，这是我的结果。

***系统：***

Intel Xenon 3.3GHz 四核 E3-1245

内存：12.0 GB

Windows 7 企业版 x64

***测试：***

测试功能是这样的：

(1) 接收一个字符串数组。(2) 用分隔符分割字符串。(3) 将字符串解析为数据类型，并将它们存储在一行中。(4) 向数据表中添加行。(5) 重复(2)-(4)直到完成。

该测试包括 1000 个字符串，每个字符串被解析为 16 列，因此总共有 16000 个字符串转换。我测试了单线程、4 线程（因为四核）和 8 线程（因为超线程）。因为我只是在这里处理数据，所以我怀疑添加更多的线程会不会有任何好处。因此，对于单个线程，它解析 1000 个字符串，4 个线程每个解析 250 个字符串，8 个线程每个解析 125 个字符串。我还测试了几种使用线程的不同方式：线程创建、线程池、任务和函数对象。

***结果：*** 结果时间以毫秒为单位。

单线程：

*   方法调用：17720

4 线程

*   参数化线程开始：13836
*   ThreadPool.QueueUserWorkItem：14075
*   Task.Factory.StartNew：16798
*   函数 BeginInvoke EndInvoke：16733

8 个线程

*   参数化线程开始：12591
*   ThreadPool.QueueUserWorkItem：13832
*   Task.Factory.StartNew：15877
*   函数 BeginInvoke EndInvoke：16395

如您所见，最快的是使用 8 个线程（我的逻辑核心数）的参数化线程开始。然而，它并没有比使用 4 个线程好太多，并且仅比使用单核快 29%。当然结果会因机器而异。我也坚持了

```
 Dictionary<Type, TypeConverter> 
```

用于字符串解析的缓存，因为使用类型转换器数组并没有提供显着的性能提升，并且拥有一个共享的缓存类型转换器更易于维护，而不是在需要时到处创建数组。

**另一个更新：**

好的，所以我进行了更多测试，看看是否可以挤出更多性能，我发现了一些有趣的东西。我决定坚持使用 8 个线程，全部从 Parameterized Thread Start 方法开始（这是我之前测试中最快的）。运行与上述相同的测试，只是使用不同的解析算法。我注意到

```
 Convert.ChangeType and TypeConverter 
```

花费大约相同的时间。类型特定的转换器，例如

```
 int.TryParse 
```

稍微快一点，但对我来说不是一个选择，因为我的类型是动态的。ricovox 有一些关于异常处理的好建议。我的数据确实有无效数据，一些整数列会为空数字加上破折号“-”，所以类型转换器会爆炸：这意味着我解析的每一行至少有一个异常，那就是 1000 个异常！非常耗时。

顺便说一句，这就是我使用 TypeConverter 进行转换的方式。Extensions 只是一个静态类，GetTypeConverter 只返回一个cahced TypeConverter。如果在转换过程中抛出异常，则使用默认值。

```
public static Object ConvertTo(this String arg, CultureInfo cultureInfo, Type type, Object defaultValue)
{
  Object value;
  TypeConverter typeConverter = Extensions.GetTypeConverter(type);

  try
  {
    // Try converting the string.
    value = typeConverter.ConvertFromString(null, cultureInfo, arg);
  }
  catch
  {
    // If the conversion fails then use the default value.
    value = defaultValue;
  }

  return value;
} 
```

***结果：***

在 8 个线程上进行相同的测试 - 解析 1000 行，每列 16 列，每个线程 250 行。

所以我做了3件新的事情。

1 - 运行测试：在解析之前检查已知的无效类型以最小化异常。即 if(!Char.IsDigit(c)) value = 0; 或 columnString.Contains('-') 等...

*运行时间：29 毫秒*

2 - 运行测试：使用具有 try catch 块的自定义解析算法。

*运行时间：12424ms*

3 - 运行测试：在解析之前使用自定义解析算法检查无效类型以最小化异常。

*运行时间 15 毫秒*

哇！正如您所看到的，消除异常带来了天壤之别。我从来没有意识到异常的代价有多大！因此，如果我将例外情况最小化为真正未知的情况，那么解析算法的运行速度会快三个数量级。我正在考虑这绝对解决了。我相信我会用 TypeConverter 保持动态类型转换，它只会慢几毫秒。在转换之前检查已知的无效类型可以避免异常，这会大大加快速度！感谢 ricovox 指出这让我进一步测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:27:49.780

如果您主要将字符串转换为本机数据类型（字符串、int、bool、DateTime 等），您可以使用类似下面的代码，它缓存 TypeCodes 和 TypeConverters（对于非本机类型）并使用快速 switch 语句快速跳转到适当的解析例程。这应该比 Convert.ChangeType 节省一些时间，因为源类型（字符串）是已知的，您可以直接调用正确的 parse 方法。

```
/* Get an array of Types for each of your columns.
 * Open the data file for reading.
 * Create your DataTable and add the columns.
 * (You have already done all of these in your earlier processing.)
 * 
 * Note:    For the sake of generality, I've used an IEnumerable<string> 
 * to represent the lines in the file, although for large files,
 * you would use a FileStream or TextReader etc.
*/      
IList<Type> columnTypes;        //array or list of the Type to use for each column
IEnumerable<string> fileLines;  //the lines to parse from the file.
DataTable table;                //the table you'll add the rows to

int colCount = columnTypes.Count;
var typeCodes = new TypeCode[colCount];
var converters = new TypeConverter[colCount];
//Fill up the typeCodes array with the Type.GetTypeCode() of each column type.
//If the TypeCode is Object, then get a custom converter for that column.
for(int i = 0; i < colCount; i++) {
    typeCodes[i] = Type.GetTypeCode(columnTypes[i]);
    if (typeCodes[i] == TypeCode.Object)
        converters[i] = TypeDescriptor.GetConverter(columnTypes[i]);
}

//Probably faster to build up an array of objects and insert them into the row all at once.
object[] vals = new object[colCount];
object val;
foreach(string line in fileLines) {
    //delineate the line into columns, however you see fit. I'll assume a tab character.
    var columns = line.Split('\t');
    for(int i = 0; i < colCount) {
        switch(typeCodes[i]) {
            case TypeCode.String:
                val = columns[i]; break;
            case TypeCode.Int32:
                val = int.Parse(columns[i]); break;
            case TypeCode.DateTime:
                val = DateTime.Parse(columns[i]); break;
            //...list types that you expect to encounter often.

            //finally, deal with other objects
            case TypeCode.Object:
            default:
                val = converters[i].ConvertFromString(columns[i]);
                break;
        }
        vals[i] = val;
    }
    //Add all values to the row at one time. 
    //This might be faster than adding each column one at a time.
    //There are two ways to do this:
    var row = table.Rows.Add(vals); //create new row on the fly.
    // OR 
    row.ItemArray = vals; //(e.g. allows setting existing row, created previously)
} 
```

真的没有任何其他方法会更快，因为我们基本上只是使用类型本身定义的原始字符串解析方法。您可以自己为每种输出类型重新编写自己的解析代码，针对您将遇到的确切格式进行优化。但我认为这对你的项目来说太过分了。在每种情况下简单地定制 FormatProvider 或 NumberStyles 可能会更好更快。

例如，假设每当您解析 Double 值时，您知道，根据您的专有文件格式，您不会遇到任何包含指数等的字符串，并且您知道不会有任何前导或尾随空格等. 因此，您可以使用 NumberStyles 参数将解析器提示到这些事情，如下所示：

```
//NOTE:   using System.Globalization;
var styles = NumberStyles.AllowDecimalPoint | NumberStyles.AllowLeadingSign;
var d = double.Parse(text, styles); 
```

我不知道解析是如何实现的，但我认为 NumberStyles 参数允许解析例程通过排除各种格式化可能性来更快地工作。当然，如果您不能对数据的格式做出任何假设，那么您将无法进行这些类型的优化。

当然，您的代码总是有可能很慢，仅仅是因为将字符串解析为某种数据类型需要时间。使用性能分析器（如在 VS2010 中）尝试查看您的实际瓶颈在哪里。然后，您将能够更好地优化，或者干脆放弃，例如，在没有其他需要在汇编中编写解析例程的情况下：-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:29:56.157

这是一段快速尝试的代码：

```
Dictionary<Type, TypeConverter> _ConverterCache = new Dictionary<Type, TypeConverter>();

TypeConverter GetCachedTypeConverter(Type type)
{
    if (!_ConverterCache.ContainsKey(type))
        _ConverterCache.Add(type, TypeDescriptor.GetConverter(type));
     return _ConverterCache[type];
} 
```

然后改用下面的代码：

```
TypeConverter typeConverter = GetCachedTypeConverter(type); 
```

是不是快一点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:22:37.007

我常用的一种技术是：

```
var parserLookup = new Dictionary<Type, Func<string, dynamic>>();

parserLookup.Add(typeof(Int32), s => Int32.Parse(s));
parserLookup.Add(typeof(Int64), s => Int64.Parse(s));
parserLookup.Add(typeof(Decimal), s => Decimal.Parse(s, NumberStyles.Number | NumberStyles.Currency, CultureInfo.CurrentCulture));
parserLookup.Add(typeof(DateTime), s => DateTime.Parse(s, CultureInfo.CurrentCulture, DateTimeStyles.AssumeLocal));
// and so on for any other type you want to handle. 
```

这假设您可以弄清楚`Type`您的数据代表什么。的使用也意味着 .net 4 或更高版本，但在大多数情况下`dynamic`您可以将其更改为。`object`

缓存每个文件（或整个应用程序）的解析器查找，您应该会获得相当不错的性能。

# rest - HTTP 303 是否被认为对异步操作有害？

> ID：13867129
> 
> 赞同：10
> 
> 时间：2012-12-13T19:37:45.417
> 
> 标签：rest, http-status-code-303

在研究用于异步操作的 RESTful API 时，我遇到了以下设计模式：

`POST uri:longOperation`返回：

*   HTTP 202
*   位置：**uri:pendingOperation**

`GET uri:pendingOperation`返回：

*   如果操作正在运行
    *   返回进度报告。
*   如果操作完成
    *   HTTP 303
    *   位置：**uri：操作响应**

`GET uri:operationResponse`

*   异步操作的响应

我发现最后一步有问题。考虑一下如果异步操作完成时出现一个对 没有意义的错误代码`HTTP GET`，例如`HTTP 409 ("Conflict")`.

1.  不需要`HTTP 303`指向与**uri:pendingOperation**相关的响应，而不是**uri:operationResponse**？
2.  以这种方式使用是否`HTTP 303`有害？如果不是，为什么？
3.  这是我们能做的最好的，还是有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T23:27:29.400

> HTTP 303 是否需要指向与 uri:pendingOperation 相关的响应，而不是 uri:operationResponse？

[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4)没有明确说它是必需的，但我倾向于同意你的观点 。

> 以这种方式使用 HTTP 303 是否有害？如果不是，为什么？

我认为您通过执行 303 会失去功能。虽然完成后自动重定向“很好”，但它使您没有机会提供围绕结果的元数据，这些元数据可用于报告等...还有很多客户端不会自动关注 303，因此客户端可能需要做一些工作来关注 303 Location 标头。

> 这是我们能做的最好的，还是有更好的方法？

我倾向于建议在`GET uri:pendingOperation`“完成”时始终使用状态资源返回 200 并引用输出。就像是

不完整时

```
{
    "status" : "PENDING"
} 
```

错误时

```
{
    "status" : "COMPLETE"
    "errors" : [
       {
          "typeId" : "OPERATION_TIMEOUT",
          "description" : " "The request was unable to complete because the systems are unresponsive".
       }
    ]
} 
```

成功时

```
{
    "status" : "COMPLETE"
    "links" : {
       "result" : {
          "href" : "http://api.example.com/finished-resource/1234",
       }
    ]
} 
```

# oracle - 如何在 Toad 中删除整行？

> ID：13867130
> 
> 赞同：2
> 
> 时间：2012-12-13T19:37:46.513
> 
> 标签：oracle, oracle11g, toad

我开始更多地使用 Toad 11.0，我花了半个小时在线搜索键盘快捷键以删除编辑器窗口中的一整行 sql。我不想突出显示该行，我只想删除光标所在的行。此功能存在于许多其他应用程序中，通常是一种快捷方式，例如：

*   `Ctrl`+ `L`（记事本++）
*   `Shift`+ `Delete`（视觉工作室）等。

（这些按键在 Toad 中不起作用。）

一定有办法的。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T22:30:02.800

我找到了。这是`Ctrl`+ `Y`。很高兴我找到了它，但这是映射行删除的一种奇怪、蹩脚且不常见的方式。

我进入 Toad 的 Key Mapping 屏幕并尝试将其更改为`Ctrl`+ `L`，但这不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:35:19.283

试试`Ctrl`++ 。`Shift`_ [在Toad for MySQL 博客](http://toadformysql.com/entry.jspa?categoryID=501&externalID=4724)`Delete`中引用。

# java - 有没有办法在套接字通道上取消注册选择器

> ID：13867133
> 
> 赞同：8
> 
> 时间：2012-12-13T19:38:08.320
> 
> 标签：java, sockets, select, nonblocking, socketchannel

这是一个非常直接的问题，但我发现需要取消注册一个选择器，它可以俯瞰我的 java 套接字通道。

```
SocketChannel client = myServer.accept(); //forks off another client socket
client.configureBlocking(false);//this channel takes in multiple request
client.register(mySelector, SelectionKey.OP_READ | SelectionKey.OP_WRITE);//changed from r to rw 
```

我稍后可以在程序中调用类似的东西

```
client.deregister(mySelector); 
```

并且选择器将不再捕获该套接字通道的数据键。考虑到我的服务器/客户端设计，这将使我的生活更轻松。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-13T20:04:13.293

调用`cancel()`选择键：

```
SelectionKey key = client.register(mySelector,
    SelectionKey.OP_READ | SelectionKey.OP_WRITE);
...
key.cancel(); 
```

或者

```
...
SelectionKey key = client.keyFor(mySelector);
key.cancel(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-04T22:17:55.420

除了@Nikolai 的回答。这样做`client.close()`也会取消注册频道。

> 当一个键被取消时，一个键被添加到它的选择器的取消键集中，无论是通过关闭它的通道还是通过调用它的取消方法。

来自[https://docs.oracle.com/javase/7/docs/api/java/nio/channels/Selector.html](https://docs.oracle.com/javase/7/docs/api/java/nio/channels/Selector.html)

# ruby-on-rails - Webrick 服务器应用程序的“304 未修改”处理消息 - 本地主机

> ID：13867136
> 
> 赞同：0
> 
> 时间：2012-12-13T19:38:26.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, webrick

`304 Not Modified`处理消息发生`JavaScript` `(.js)` `file type`在`assets`项目文件夹中的每个`localhost`. 遇到的问题是`slow loading time`网页的一个。

是否有任何特定的`Webrick`和`JavaScript` `(.js)` `file types`组合导致这种情况发生？

*注意：Webrick 与 Ruby on Rails 3.2 和 jQuery UI 一起使用*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:44:15.890

只需清除您的缓存和cookies...就可以了

# arrays - Matlab：比较数组......续

> ID：13867144
> 
> 赞同：0
> 
> 时间：2012-12-13T19:39:32.397
> 
> 标签：arrays, matlab, comparison

我发布了一个关于比较数组的问题。我得到了帮助，它是这样的：

```
allNames = {'Cameron'; 'David'; 'Mike'; 'Bill'; 'Joe'};
%Here is how you then would get hold of them in a loop:

person = [98   206    35   114;
          60   206    28    52;
         100   210    31   116;
          69   217    26    35;
          88   213    42   100];

person1 = [93 208 34 107];

allNames = {'Cameron'; 'David'; 'Mike'; 'Bill'; 'Joe'};

for z = 1:5
    a = max(person(z,:),person1);
    b = min(person(z,:),person1);
    percent_error = b/a;
    if percent_error >= 0.85
        %title(['Match, its ', allNames{z} ,'!'],...
        %    'Position',[50,20,9],'FontSize',12);
        disp(['Match, its ', allNames{z} ,'!'])
    end
end 
```

运行代码会显示：

```
Match, its Cameron!
Match, its David!
Match, its Mike!
Match, its Joe! 
```

现在我想做一个错误检查，因此如果将打印多个名称，则第二列将**亲自**打印，而**person1**将通过将它们彼此相除来进行比较。如果商至少为 0.98，则打印该名称且仅打印该名称。这是我尝试过的，错误检查未被识别。

```
person1(count,:)=[pace height build stride]
allNames = {'Kassie'; 'Keyton'; 'Cameron'; 'Joseph'; 'Josh'};
for z = 1:5
    a = max(person(z,:),person1);
    b = min(person(z,:),person1);
    percent_error = b/a;
    error_count = 0;
    if percent_error >= 0.85
        %title(['Match, its ', allNames{z} ,'!'],...
        %    'Position',[50,20,9],'FontSize',12);
        disp(['Match, its ', allNames{z} ,'!'])
        error_count = error_count+1;
        if error_count >= 2
           ah=max(person(:,2),person1(1,2));
           bh=min(person(:,2),person1(1,2));
           height_check=b/a;
           if height_check >= 0.98
               disp(['Match, its ', allNames{z} ,'!'])
               break
           end
       end
    elseif percent_error < 0.85
        disp('Person is unknown!')
    end
end 
```

结果如下：

```
person1 =

    75   168     6    69

Person is unknown!
Match, its Keyton!
Person is unknown!
Match, its Joseph!
Person is unknown!
>> person

person =

    38   163    36    38
    70   162    35    73
    47   166    39    28
    70   163    39    62
    27   176    32    27 
```

所有**person1**都应该是“人员未知！” 因为 Keyton 和 Joesph 在第二列中的值都小于 0.98。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T19:50:36.153

你真的想做`a/b`吗？这就是未定方程组的最小二乘解`a*X = b`。有关这方面的更多详细信息，请参见[mrdivide](http://www.mathworks.nl/help/matlab/ref/mrdivide.html) 和[mldivide](http://www.mathworks.nl/help/matlab/ref/mldivide.html)。

难道你不想`max(a./b)`计算相应元素的比率，`a`并`b`取其中的最大值。（错误检查中的相同内容）

顺便说一句，您的错误检查没有运行，因为您`error_count`在第一个循环开始时重置。把它移出那个循环，这也是固定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:52:05.010

让我们关注这几行：

```
a = max(person(z,:),person1);
b = min(person(z,:),person1);
percent_error = b/a;
if percent_error >= 0.85 
```

`a`将以数组的形式返回两个值中较高的值。`b`会做同样的事情，但更低。因此，你有这样的事情：

a=[98 208 35 114]；b=[93 206 34 107]；

您要做的下一步是除法。然而，这实际上是一个矩阵划分。在这种情况下，`percent_error=0.97408`但我不确定您为什么要进行最小二乘感知划分，正如 Guther 指出的那样。您似乎更有可能想要做类似的事情`mean(a./b)`，以平均化这些值。\

我看到的其他一些事情：

*   `height_check=b/a;`似乎它应该与`bh./ah`
*   我真的不确定你的整体比较方法。似乎您最好将每个值与可能值的范围进行比较，而不是进行除法运算。

我不确定您到底要做什么，但我认为您想做更多类似的事情，还需要对您的假设进行一些工作：

```
person1(count,:)=[pace height build stride]
allNames = {'Kassie'; 'Keyton'; 'Cameron'; 'Joseph'; 'Josh'};
for z = 1:5
    a = max(person(z,:),person1);
    b = min(person(z,:),person1);
    percent_error = mean(b./a);
    error_count = 0;
    if percent_error >= 0.85
        %title(['Match, its ', allNames{z} ,'!'],...
        %    'Position',[50,20,9],'FontSize',12);
        disp(['Match, its ', allNames{z} ,'!'])
        error_count = error_count+1;
        if error_count >= 2
           ah=max(person(:,2),person1(1,2));
           bh=min(person(:,2),person1(1,2));
           height_check=bh./ah;
           if height_check >= 0.98
               disp(['Match, its ', allNames{z} ,'!'])
               break
           end
       end
    elseif percent_error < 0.85
        disp('Person is unknown!')
    end
end 
```

# gwt - GWT 2.5 的最佳谷歌地图 V3 API 是什么？

> ID：13867145
> 
> 赞同：2
> 
> 时间：2012-12-13T19:39:42.187
> 
> 标签：gwt, google-maps-api-3

我正在寻找一个“工作”的 API 来在我的新 WebApp 中使用谷歌地图。问题是：有很多第三方库，我尝试了一些不起作用。大家会推荐哪一款呢？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:34:41.427

branflake2267[的](https://github.com/branflake2267/GWT-Maps-V3-Api/commits/master)后备箱修复了很多错误，维护良好，对生产有好处，我推荐它作为第一选择，直到 google 发布官方版本（3.8.0-pre1 有点过时并且有一些错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T02:14:12.927

您是否检查了未发布的 gwt 团队库中的地图？[在GWT + Google Maps API v3](https://stackoverflow.com/a/11834578/459)
的答案中指出了这一点。

# android - Maven 和 android - 针对不同环境的稍微不同的构建

> ID：13867148
> 
> 赞同：4
> 
> 时间：2012-12-13T19:40:00.470
> 
> 标签：android, maven, ant

好的，我正在一个 android 项目上从 ant 切换到 maven，想知道以下是否易于实现：

目前我有一个自定义 build.xml 脚本，它有几个用于创建发布版本的目标。它们中的每一个都用于构建应用程序以针对不同的服务器 URL 运行，其中服务器可以是我们在其他国家/地区拥有的开发、生产、登台甚至部署服务器。

原因是我们的应用程序将在几个不同的服务器上运行，这取决于谁得到它，我不希望这是用户选择的东西。相反，它应该被硬编码到应用程序中，这就是它目前的工作方式。

这在 ant 中很容易设置，我只需从 [env].properties 文件中获取值，然后替换 res/values/config.xml 中的 server_url 字符串。例如：

```
ant release-prod 
```

将读取一个名为 prod.properties 的文件，该文件定义了 server_url 是什么。我将 config.xml 文件存储在 config/config.xml 中，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <string name="config_server_url">@CONFIG.SERVER_URL@</string>
</resources> 
```

然后我的蚂蚁脚本这样做：

```
<copy file="config/config.xml" todir="res/values" overwrite="true" encoding="utf-8">
    <filterset>
           <filter token="CONFIG.SERVER_URL" value="${config.server_url}" />
    </filterset>
</copy> 
```

其中 config.server_url 是在 prod.properties 中定义的。

我想知道如何用 Maven 完成类似的事情？有任何想法吗。我查找了如何使用 maven 读取属性文件，看起来结果好坏参半，无论这是否可行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:54:09.567

在 Maven 中，这称为资源过滤，android-maven-plugin 支持过滤以下资源类型：

*   AndroidManifest.xml，[看到这个答案](https://stackoverflow.com/questions/10803088/how-do-i-change-my-androidmanifest-as-its-being-packaged-by-maven/10808077#10808077)。
*   assets/，请参阅[此答案](https://stackoverflow.com/questions/10900017/android-maven-plugin-and-resource-filtering/10909923#10909923)。
*   res/，见下文。

示例 res/value/config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
  <string name="config_server_url">${config.server.url}</string>
</resources> 
```

过滤 res/ 目录下所有 xml 文件的示例 pom 配置：

```
<build>
  <resources>
    <resource>
      <directory>${project.basedir}/res</directory>
      <filtering>true</filtering>
      <targetPath>${project.build.directory}/filtered-res</targetPath>
      <includes>
        <include>**/*.xml</include>
      </includes>
    </resource>
  </resources>
  <plugins>
    <plugin>
      <artifactId>maven-resources-plugin</artifactId>
      <executions>
        <execution>
          <phase>initialize</phase>
          <goals>
            <goal>resources</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>com.jayway.maven.plugins.android.generation2</groupId>
      <artifactId>android-maven-plugin</artifactId>
      <extensions>true</extensions>
      <configuration>
        <sdk>
          <platform>10</platform>
        </sdk>
        <undeployBeforeDeploy>true</undeployBeforeDeploy>
        <resourceDirectory>${project.build.directory}/filtered-res</resourceDirectory>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

有几种方法可以定义替换值，您可以使用 properties-maven-plugin 在外部属性文件中定义它们。为简单起见，我更喜欢使用 Maven 配置文件并在 pom.xml 中定义它们，如下所示：

```
<profiles>
  <profile>
    <id>dev</id>
    <properties>
      <config.server.url>dev.company.com</config.server.url>
    </properties>
  </profile>
  <profile>
    <id>Test</id>
    <properties>
      <config.server.url>test.company.com</config.server.url>
    </properties>
  </profile>
  <profile>
    <id>Prod</id>
    <properties>
      <config.server.url>prod.company.com</config.server.url>
    </properties>
  </profile>
</profiles> 
```

然后使用`mvn clean install -Pxxx`构建相应的apk。

# javascript - Backbonejs：定期检查服务器

> ID：13867153
> 
> 赞同：0
> 
> 时间：2012-12-13T19:40:06.337
> 
> 标签：javascript, backbone.js

我试图让我的主干应用程序尽可能频繁地检查服务器以更新模型，类似于 twitter 的站点如何自动添加新的推文。

我当前的设置是通过他们的 api 检查外部应用程序，所以我无法访问他们的服务器，这让我不得不依赖客户端进行检查而不会太占用内存，我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:20:52.467

在 Javascript 中，你可以真正控制时间的唯一方法是通过 setTimeout/setInterval；没有“更复杂”的机制，除非您计算仅包装 setTimeout/setInterval 的辅助函数（例如“延迟”）。

所以，dmi3y 的回答是正确的。但是，由于您在标签和描述中都提到了 Backbone，所以这里有一个更类似于 Backbone 的版本......

```
var YourModelClass = Backbone.Model.extend({url: remoteUrl});
var instance = new YourModelClass();
var seconds = 5;
window.setInterval(_.bind(instance.fetch, instance), 1000 * seconds); 
```

或者，如果您想将其构建到您的班级中...

```
var YourModelClass = Backbone.Model.extend({
    url: remoteUrl,
    initialize: function() {
        var seconds = 5;
        window.setInterval(_.bind(this.fetch, this), 1000 * seconds);
    }
});
var instance = new YourModelClass(); 
```

还值得一提的是 setInterval 返回一个对象，如果您想停止“轮询”，您可以将其传递给 clearInterval。

PS 万一你不熟悉`_.bind`，它来自下划线库，Backbone 依赖于它，所以你已经拥有它。它所做的只是固定`this`到位，因此当您的 timeout/interval 函数解析时，`this`它的内部将是第二个参数`_.bind`（而不是`window`，这通常是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T19:52:23.323

可能的解决方案

```
(function IcallTheShoots(){
   console.log('am I?'); // any way you able communicate with server
   window.setTimeout(IcallTheShoots, 1500);
})(); 
```

为什么`setTimeout`而不是`setInterval`，因为它确保仅在当前完成时才调用下一个循环

# c# - 如何从txt文件中删除字符串？

> ID：13867154
> 
> 赞同：-1
> 
> 时间：2012-12-13T19:40:08.353
> 
> 标签：c#

> **可能重复：**
> [从文本文件中删除一行的有效方法](https://stackoverflow.com/questions/532217/efficient-way-to-delete-a-line-from-a-text-file)

我有一个多线程应用程序和一个包含代理服务器列表的文本文件。如果代理无效，我需要从文本文件中删除它。

如果我不想失去应用程序的速度，该怎么做？

例如我需要`62.109.29.58:8085` 从

```
62.109.7.22:8085
62.109.0.35:8085
92.63.106.111:8085
78.24.216.163:8085
92.63.97.156:8085
82.146.56.156:8085
62.109.29.58:8085
78.24.220.173:8085
78.24.220.111:8085
92.63.106.124:8085 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T19:44:24.063

由于您的文件看起来很小，您可以读取整个文件，删除您必须删除的行，然后将文件写回：

```
File.WriteAllLines("myfile.txt"
,   File.ReadLines("myfile.txt").Where(s => s != "62.109.29.58:8085").ToList()
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:47:08.853

```
string[] lines = System.IO.File.ReadAllLines("filename.txt");
for (int i = 0; i < lines.Length; i++)
{
    string line = lines[i];
    if (line == "what you are looking for")
       lines[i] = "";
}

string[] newLines = lines.Where(str => !string.IsNullOrEmpty(str)).ToArray();
using (Stream stream = File.OpenWrite("filename.txt"))
{
    using (StreamWriter sw = new StreamWriter(stream))
    {
        foreach (string line in newLines)
        {
            sw.WriteLine(line);  
        }
    }
} 
```

# c - 如何在c语言中创建指向位的指针

> ID：13867168
> 
> 赞同：3
> 
> 时间：2012-12-13T19:40:50.887
> 
> 标签：c, pointers, byte, bits

正如我们所知，c语言中的char指针逐字节遍历内存，即每次1个字节，整数指针每次4个字节（在gcc编译器中），每次2个字节（在TC编译器中）。

例如：

```
char *cptr; // if this points to 0x100
cptr++;     // now it points to  0x101

int *iptr;  // if this points to 0x100
iptr++;     // now it points to  0x104 
```

我的问题是：

如何在c中创建一个位指针，逐位递增遍历内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T19:43:57.077

char 是 C 中的“最小可寻址单元”。你不能直接指向比它更小的东西（比如一点）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T19:43:19.297

你不能。使用指针，不可能直接操作位。（你真的认为糟糕的假设`bit *p = 1; p++`会返回 1.125 吗？）

但是，您可以使用按位运算符（例如`<<`、`>>`和）`|`来`&`访问字节内的特定位。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T20:51:52.480

不，但您可以编写一个函数来逐位读取位：

```
int readBit(char *byteData, int bitOffset)
{
   const int wholeBytes = bitOffset / 8;
   const int remainingBits = bitOffset % 8;
   return (byteData[wholeBytes] >> remainingBits) & 1;
   //or if you want most significant bit to be 0
   //return (byteData[wholeBytes] >> (7-remainingBits)) & 1;
} 
```

用法：

```
char *data = any memory you like.
int bitPointer=0;
int bit0 = readBit(data, bitPointer);
bitPointer++;
int bit1 = readBit(data, bitPointer);
bitPointer++;
int bit2 = readBit(data, bitPointer); 
```

当然，如果这种功能具有普遍价值，它可能已经存在。与使用位掩码和移位等相比，逐位操作效率非常低。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T21:54:02.897

从概念上讲，“位指针”不是单个标量，而是由字节指针和该字节内的位索引组成的有序对。您可以使用包含两者的结构或两个单独的对象来表示它。对它们进行算术运算需要您进行一些模块化简化；例如，如果要访问给定位后 10 位的位，则必须将位索引加 10，然后以 8 为模减少它，并适当地增加字节指针部分。

顺便说一句，在只有字可寻址存储器而不是字节可寻址的历史系统上，它`char *`由字指针和字内的字节索引组成。这是完全相同的概念。不同之处在于，尽管 C`char *`甚至在没有字节可寻址内存的机器上也提供，但它不提供任何内置的“位指针”类型。如果需要，您必须自己创建它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-13T19:48:14.503

我认为这是不可能的，因为现代计算机是字节可寻址的，这意味着每个字节都有一个地址。所以一个位没有地址，因此指针不能指向它。您可以使用 char * 和按位运算来确定各个位的值。

如果你真的想要它，你可以编写一个使用 char* 来跟踪内存中地址的类，一个 char(或 short/int 但是该值永远不需要高于 0000 0111 所以一个 char 会减少内存足迹）来跟踪您所在的那个字节中的哪个位，然后重载运算符，以便它按您希望的方式运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T19:43:34.563

我不确定你问的是可能的。您需要使用位移来做一些魔术来遍历指针指向的字节的所有位。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-05T05:49:32.013

您始终可以将指针转换为整数，即大小至少比系统使用的字节指针大 3 位。然后只需将转换后的指针左移 3 位。然后将位信息存储在最低有效 3 位上。

然后可以使用普通算术递增这个整数“位指针”。

像这样的东西：

```
#include <stdio.h>

#define bitptr long long
#define create_bitptr(pointer,bit) ((((bitptr)pointer)<<3)|bit) ;
#define get_bit(bptr) ((bptr)&7)
#define get_value(bptr)  (*((char*)((bptr)>>3))) 
#define set_bit(bptr) get_value(bptr) |= 1<<get_bit(bptr)
#define clear_bit(bptr) get_value(bptr) &= (~(1<<get_bit(bptr)))

int main(void)
{
    char variable=0; 

    bitptr p ;
    p=create_bitptr(&variable,0) ;

    set_bit(p) ;    p++ ; //1
    clear_bit(p) ;  p++ ; //0
    set_bit(p) ;   p++ ;  //1
    clear_bit(p) ; p++ ;  //0
    clear_bit(p) ; p++ ;  //0
    clear_bit(p) ; p++ ;  //0
    clear_bit(p) ; p++ ;  //0
    clear_bit(p) ; p++ ;  //0

    printf("%d\n",variable) ;
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-09T14:23:27.810

使用指针看起来不太可能。但是要写入或读取任何数据位，您可以尝试这个。

```
unsigned char data;

  struct _p

{

unsigned char B0:1;

unsigned char B1:1;

unsigned char B2:1;

unsigned char B3:1;

unsigned char B4:1;

unsigned char B5:1;

unsigned char B6:1;

unsigned char B7:1;

} 

int main()

{

data = 15;

_p * point = ( _p * ) & data;

//you can read and write any bit of the byte with point->BX; ( Ex: printf( "%d" , point->B0;point->B5 = 1;

} 
```

# python - AttributeError：“属性”对象没有属性

> ID：13867172
> 
> 赞同：9
> 
> 时间：2012-12-13T19:41:07.923
> 
> 标签：python, class, exception, object, properties

Python (2.6) 似乎是无缘无故的，任何人都可以看到这段代码有问题吗？

```
class DB ():
    def doSomething (self, str):
        print str

class A ():
    __db = DB()

    @staticmethod
    def getDB ():
        return A.__db

    db = property(getDB)

A.db.doSomething("blah") 
```

失败，但有以下例外：

> AttributeError：“属性”对象没有属性“doSomething”

我的理解是一个属性在访问时会自动运行它的getter，那么为什么它会抱怨一个属性对象，为什么它没有找到我明确可用的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T19:45:46.267

除了需要从 继承之外`object`，属性仅适用于实例。

```
a = A()
a.db.doSomething("blah") 
```

要使属性在类上起作用，您可以定义一个元类。（类是元类的一个实例，因此在元类上定义的属性对类起作用，就像在类上定义的属性对该类的实例起作用一样。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:16:16.740

您没有正确使用类。一个类（通常）是两件事：

1.  用于创建一系列相关对象的工厂
2.  这些对象的共同行为的定义

这些相关的对象是类的**实例**。普通方法是在类的*实例*上调用的，而不是在类本身上。如果您想要可以从类中调用的方法，而不需要实例，则需要用`@classmethod`（或`@staticmethod`）标记这些方法。

但是，我实际上并不知道从类对象中检索属性是否有效。我现在不能检查，但我不这么认为。您得到的错误`A.db`是检索定义属性本身的属性对象，而不是“评估”要获取的属性`A.__db`。属性对象没有`doSomething`属性。属性被设计为在类中创建，作为对这些类的*实例如何工作的描述。*

如果您确实打算使用 A 的实例，那么您需要创建一个：

```
my_a = A()
my_a.db.doSomething("blah") 
```

但是，这也会失败。你没有正确地写成`getDB`任何一种方法。普通方法需要一个参数来表示它被调用的实例（传统上称为`self`）：

```
def getDB(self):
    ... 
```

静态方法不需要，但需要一个装饰器将它们标记为静态：

```
@staticmethod
def getDB():
    ... 
```

类方法既需要一个参数来接收调用它们的类，还需要一个装饰器：

```
@classmethod
def getDB(cls):
    ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T19:52:37.037

Python 中不需要 getter：

```
class B(object):
    def do_something(self, str):
        print str

class A(object):
    db = B()

A.db.do_something("blah") 
```

（我也 PEP8:ed 代码）

# c# - 安装了语言包的操作系统语言？

> ID：13867174
> 
> 赞同：0
> 
> 时间：2012-12-13T19:41:17.760
> 
> 标签：c#, .net, windows-mui

当用户拥有 en-US Windows 7 版本时，即使您安装了不同的语言包（例如 nl-NL），“CultureInfo.InstalledUICulture”功能也会返回 en-US。是否有 .NET/PInvoke 方法来获取当前用户实际使用的语言（最好作为 CultureInfo 类）？我也不能依赖 CultureInfo.CurrentUICulture，因为这可以由用户更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:59:26.190

使用“GetUserDefaultUILanguage”：

CultureInfo.GetCultureInfo(GetUserDefaultUILanguage());

# sql - 有没有办法在 SQL 中的多个表中进行搜索

> ID：13867177
> 
> 赞同：-1
> 
> 时间：2012-12-13T19:41:25.207
> 
> 标签：sql

现在我在 SQL 中有 100 个表，我正在所有表中寻找一个特定的字符串值，但我不知道它在哪一列。

`select * from table1, table2 where column1 = 'MyLostString'`将不起作用，因为我不知道它必须在哪一列。

是否有一个 SQL 查询，我必须强力搜索每个表的每一列的“MyLostString”

如果我要对所有表进行暴力搜索，是否有有效的查询？例如：

`select * from table3 where allcolumns = MyLostString`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:48:19.380

这是 RDBMS（或至少其中一个）的定义特征，值的**含义**取决于它所在的**列**。例如：如果该值位于列中，则与在列`17`中的含义完全不同。一个虚构的`customer_id`桌子。`product_id``orders`

这导致了这样一个事实，即 RDBMS 不能很好地搜索一个值，无论它可能在哪个表的哪一列中使用。

我的建议是首先研究数据模型以尝试找出哪个表的哪一列应该保存该值。如果这真的失败了，那么您遇到的问题比“丢失的字符串”要严重得多。

最后的办法是将数据库转换为更适合全文搜索的东西......例如平面文件。您可能想尝试`mydbexportcommand --options | grep -C10 'My lost string'`或朋友。

# javascript - 如何在jquery中用多个字符串作为分隔符分割一个字符串

> ID：13867182
> 
> 赞同：4
> 
> 时间：2012-12-13T19:41:51.603
> 
> 标签：javascript, jquery, regex, string, split

我想用多个分隔符分割 jquery 或 javascript 中的字符串。
对于一个字符串作为分隔符，我们可以有：

```
var x = "Name: John Doe\nAge: 30\nBirth Date: 12/12/1981";
var pieces = x.split("\n"), part;
for (var i = 0; i < pieces.length; i++) {
         bla bla bla
} 
```

但我想用 :`Age:`和`Date:`（表示一个字符串数组作为分隔符）拆分这样的字符串（x）
，最后我想要一个包含这些部分的字符串数组：“姓名：John Doe\n”，“30\nBirth”， 12/12/1981"
那个 x 字符串只是一个例子，我没有这样的字符串！我该如何重写这些代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T19:44:13.567

你可以做

```
var tokens = x.split(/Age:|Date:/g); 
```

这给出了 3 个字符串：

```
["Name: John Doe
", " 30
Birth ", " 12/12/1981"] 
```

如果您还想获得分隔符，请使用

```
var tokens = x.split(/(Age:|Date:)/g); 
```

这给出了 5 个字符串：

```
["Name: John Doe
", "Age:", " 30
Birth ", "Date:", " 12/12/1981"] 
```

如果您想动态构建您的正则表达式，请使用

```
var separators = ["Date:", "Age:"];
var tokens = x.split(new RegExp(separators.join('|'), 'g'));​​​​​​​​​​​​​​​​​ 
```

或者

```
var separators = ["Date:", "Age:"];
var tokens = x.split(new RegExp('('+separators.join('|')+')', 'g')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T15:26:59.853

这是一个基于@DenysSéguret 答案之一的函数：

```
String.prototype.xSplit = function(separators){
    return this
      .split(new RegExp(separators.join('|'), 'g'))
      .map(function(bar){ return bar.trim() }); // remove trailing spaces
} 
```

用法：

```
var foo = "Before date Date: between date & age Age: after age";
foo = foo.xSplit(​​​​​​​​​​​​​​​["Date:", "Age:"]); 
```

结果：

```
foo == ["Before date", "between date & age", "after age"] 
```

# c# - 单击“转到开始”按钮（Appbarbutton）从 Windows 8 应用程序跳转到开始屏幕

> ID：13867183
> 
> 赞同：0
> 
> 时间：2012-12-13T19:41:56.030
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-store-apps

我正在使用 c# 和 XAML 开发一个 Windows 8 商店应用程序。在查看 StandardStyles.xaml 中的一些标准 appbarbuttons 时，我看到一个名为“Go To Start”的按钮。！！

我不知道如何通过单击此按钮启动开始屏幕。如果有人分享如何做到这一点，那将很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:40:48.117

您可以这样做来关闭您的应用程序。如果那是你想要的。

Window.Current.Close();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:13:20.577

如果您的 Startscreen 被称为 MainPage，您可以这样做：

```
this.Frame.Navigate(typeof(MainPage)); 
```

如果这不是您想要的答案，也许看看[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx)会对您有所帮助。

# objective-c - 使用子视图优化 UIScrollView

> ID：13867185
> 
> 赞同：0
> 
> 时间：2012-12-13T19:42:03.437
> 
> 标签：objective-c, uiview, uiscrollview, subviews

我对 UIScrollView 有问题，我尝试用自己的行（单独的 nib）创建类似表格的东西。1-10 行一切正常，但超过 20 个元素会出现问题。该应用程序开始运行缓慢，并且特技。是否有任何解决方案可以优化 100-200 个自己的子视图的滚动视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:52:16.080

UITableView 和 UICollectionView 都通过删除不再需要的子视图并将它们放入重用队列来进行优化。通过重用这些视图，系统不必创建和销毁它们的支持层，而是可以重用它们。这样，您在屏幕上只能拥有尽可能多的子视图。

通常，您希望在滚动视图子类的 layoutSubviews 或相应的 didScroll 委托方法中添加/删除可见子视图。就我个人而言，我更喜欢 layoutSubviews，因为它在事件链中稍早一些。

基本上，只要至少 1 px 的子视图出现在滚动视图的边界内，您就会从重用队列中获得一个可重用的子视图，并在其像素不再可见时立即删除子视图。

如果您使用 UITableview 或 UICollectionView 而不是普通的滚动视图，它们会提供一种机制来在 NIB 中注册视图以获取某些重用标识符，然后出队将自动从 NIB 加载子视图的新实例，如果有，则没有队列或出队.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:44:30.853

使用[`UITableView`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html). 这正是它的设计目的。

# c++ - C++ winapi 和 gtk 包装器 (gui)

> ID：13867187
> 
> 赞同：1
> 
> 时间：2012-12-13T19:42:07.470
> 
> 标签：c++, api, user-interface, widget, gtk

我需要一个漂亮且可能是轻量级的 winapi gui 和 gtk gui 包装器（我的意思是一个 GUI 库，它有自己的抽象 api，可用于 windows 和 linux，它在 windows 上使用 winapi 来绘制小部件，并在它使用的 linux 上使用gtk）。wxwidgets 几乎是如何工作的，但是由于 wxwidget 宏 C 风格的 api 是一团糟，它很重，我不能让我的应用程序用它编译，所以我绝对不想要它。我也不想要 QT（我不想要额外的编译器和重量级依赖项）。还有fox toolkit和fltk，但是他们没有封装winapi和gtk而是有自己的渲染，我不喜欢。

我不需要很多功能，只需要一些基本的小部件和窗口管理，仅此而已。有许多非常好的库可以为 python 执行此操作，但在 C++ 中我找不到任何库（除了不起作用且太重的 wx 小部件）。

有人可以帮助我吗？因为我一直在开发我的游戏，因为我需要开发一个跨平台的编辑器。如果其他一切都失败了，我只会用 python 编写它，但我真的想用 C++ 编写它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:42:25.150

[IUP](http://www.tecgraf.puc-rio.br/iup/)很接近，但它不是 C++。

您的要求太接近 wxWidgets：我怀疑有人已经开始/将要开始一个基本上复制它的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:08:36.790

另一种选择是使用 GTKmm，它是 GTK 的 C++ 绑定，带有 Windows 主题。但确实，GTK 主题化可能很难在多个 Windows 版本上正确使用。

# x86-64 - “ia64”和“amd64”在 clickonce 清单中可以互换吗？

> ID：13867188
> 
> 赞同：2
> 
> 时间：2012-12-13T19:42:11.347
> 
> 标签：x86-64, manifest, clickonce, processor, itanium

我正在开发一种修改 clickonce 清单的工具。我在 Clickonce 应用程序清单周围的 MSDN 文档中发现了歧义。它[说](http://msdn.microsoft.com/en-us/library/0ecdhtes%28v=vs.110%29.aspx)：

> 指定处理器。所有处理器的有效值为 msil，32 位 Windows 的有效值为 x86，64 位 Windows 的有效值为 IA64，Intel 64 位安腾处理器的有效值为 Itanium。

但是，这并没有涵盖所有值。如果我为仅 64 位可执行文件编译 clickonce 应用程序，我将得到一个带有 value 的清单`amd64`。这可以互换`ia64`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:44:09.150

amd64 和 ia64 是完全不同的平台。它们不可互换。微软的评论确实具有误导性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-14T15:37:09.017

IA64 是指 Intel 的 Itanium CPU（与 HP 合作开发），它是 64 位的，但与广泛使用的 Intel x86 架构（386,486、Pentium、CORE i3/i5/i7、各种 AMD 等）不兼容。IA64 CPU 使用与 x86 完全不同的指令集，IA64 指令集实现了一种称为 VLIW（超长指令字）的设计。HP 显然是 IA64 系统的主要供应商，他们开发了 CPU（与 Intel 合作）作为他们自己的 RISC CPU HP PA-RISC 的替代品。惠普在其 Integrity 系列服务器中使用了 Itanium 2 CPU，该系列的高端型号配备多达 64 个 Itanium 2 CPU。HP 提供了他们的 Unix 变体 HP-UX 作为这些 IA64 系统的操作系统，但也可以选择为 IA64 运行 Linux 版本。尽管有针对基于 Itanium 的系统的 Windows XP 和 Windows Server 版本，但我不知道任何 Windows 台式 PC 型号在使用 IA64 CPU 方面取得了很大的销售成功。还有适用于 IA64 的 Linux 版本，包括 Red Hat。

# c# - 从 checkedListBox 添加动态标签和文本框

> ID：13867191
> 
> 赞同：-1
> 
> 时间：2012-12-13T19:42:13.767
> 
> 标签：c#, winforms, visual-studio, checkedlistbox

我有一个checkedListBox，其中包含我在SQL 数据库中拥有的一些充电站的名称。我已经用车站名称填充了checkedListBox，我希望如果你选中框中的一个项目，一个带有文本“Km to”+itemsChecked.StationName的标签会出现在checkedListbox的下方，以及一个文本框，一个人将进入到车站的公里处。它被用来创建一个新的充电站，公里数是到下一个充电站的边缘成本。我试过这样的事情：

```
private void stationCheckedListBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        foreach (BetterServiceReference.Station itemsChecked in stationCheckedListBox.CheckedItems)
        {
            var lbl = new Label();
            lbl.Name = "lblAuto" + itemsChecked.StationId;
            lbl.Text = "Km to " + itemsChecked.StationName;
            lbl.AutoSize = true;
            lbl.Location = new Point(33, 462);
            lbl.Name = "label1";
            lbl.Size = new Size(35, 13);
            tabPage7.Controls.Add(lbl);
        } 
```

只有它实际上并没有创建标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:47:00.107

我认为您需要在设计器中创建标签并将其设为 Visible="False"。然后在您的代码中，根据需要将其设为 Visible="True"。与文本框相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:22:25.470

我创建了一个示例程序，它对我来说似乎工作正常：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void checkedListBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            foreach (var item in checkedListBox1.CheckedItems)
            {
                Label lbl = new Label();
                lbl.Text = "Testing";
                lbl.Location = new Point(125, 125);
                this.Controls.Add(lbl);
            }
        }
    } 
```

需要检查/尝试的一些事情：

*   **确保标签的位置不在其他控制之下！！**
*   使用`var`/`object`而不是“BetterServiceReference.Station”
*   是`tabPage7`你表格的名字吗？尝试使用`this.Controls.Add(lbl);`

我还会警告您，一旦取消选中某个项目，您的功能将**不会删除标签。**此外，按原样，它只会在**一个**位置为选中的任何复选框创建**一个**标签。实现你想要做的事情需要做一些工作；正如另一个答案所建议的那样，您最好在可见/不可见之间切换控件。

 **但是，希望我的回答能帮助您动态创建标签，并且创建文本框将非常相似。**

# xslt - xslt 匹配特定节点之前的所有节点

> ID：13867192
> 
> 赞同：2
> 
> 时间：2012-12-13T19:42:26.510
> 
> 标签：xslt, xpath

我正在尝试匹配特定节点之前的所有节点。输入 XML

```
<story>
  <content>
    <p>This is the text I want</p>
    <p>This is the text I want</p>
    <p>This is the text I want</p>
    <ul>
       <li></li>
       ...
    </ul>
    ....
    ....
  </content>
</story> 
```

使用那作为我的输入 XML，我试图在`<p>`标签之前抓取所有`<ul>`标签并呈现它们，但未能成功。可能有 0`<p>`个标签或无限个标签。关于如何使用 XSLT 1.0 做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:47:34.953

```
/story/content/p[not(preceding-sibling::ul)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:24:05.190

**使用**：

```
//p[not(preceding::ul or ancestor::ul)] 
```

**这通常是错误的**：

```
//p[not(preceding-sibling::ul)] 
```

因为它不会选择出现在 any 之前但不是 any 的兄弟的`p`元素。`ul``ul`

**例如，给定这个 XML 文档**：

```
<story>
  <div>
    <p>Must be selected</p>
  </div>
  <ul>
    <li><p>Must not be selected</p></li>
  </ul>
  <content>
    <p>Must not be selected</p>
    <div>
      <p>Must not be selected</p>
    </div>
    <p>Must not be selected</p>
    <p>Must not be selected</p>
    <ul>
       <li></li>
       <li><p>This must not be selected</p></li>
    </ul>
    ....
    ....
  </content>
</story> 
```

**上面的错误表达式选择**：

```
<p>Must not be selected</p>
<p>Must not be selected</p>
<p>Must not be selected</p> 
```

并且不选择想要的元素：

```
<p>Must be selected</p> 
```

**但是这个答案开头的正确表达式只选择了想要的`p`元素：**

```
<p>Must be selected</p> 
```

# facebook - Facebook 开发人员会在他们的应用页面上获得一部分广告吗？

> ID：13867196
> 
> 赞同：0
> 
> 时间：2012-12-13T19:42:39.837
> 
> 标签：facebook, facebook-javascript-sdk, ads

我的老板问了我一个有趣的问题，即开发人员是否会从他们的应用页面上投放的广告中分一杯羹。我无法给他答案。我试图寻找答案，但找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:47:41.473

没有。仅仅运行你的应用程序你就不会得到任何钱。

赚钱的唯一方法是出售代币以购买应用程序内的东西。

有关应用内付款的更多信息，请参阅此文档：
[https ://developers.facebook.com/docs/payments/](https://developers.facebook.com/docs/payments/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T11:19:15.423

每天在facebook上制作超过1000个应用程序。facebook应用程序主要由不同服务级别的公司制作，作为促销媒介。他们没有心情或诱惑出售它们。但是如果有些人真的想出售代币应用程序的 ID。

# xmonad - 如何防止 Xmobar 隐藏在其他 Xmonad 窗口后面？

> ID：13867197
> 
> 赞同：4
> 
> 时间：2012-12-13T19:42:40.583
> 
> 标签：xmonad

编辑：原来我的问题只是 Xmobar 中的一个临时错误。请参阅已接受的答案。

谷歌上有很多解决方案，但几乎没有一个对我有用。我正在建立一个 Arch 系统，所以我的第一个倾向是使用[Arch wiki 上的配置](https://wiki.archlinux.org/index.php/Xmonad#Using_xmobar_with_xmonad)。这是我的：

```
import XMonad
import XMonad.Hooks.DynamicLog

main = xmonad =<< xmobar defaultConfig { terminal = "gnome-terminal" } 
```

如果没有 xmobarrc（或我尝试复制的任何内容），xmobar 在空工作区中可见，但打开任何应用程序会完全覆盖它。尝试使用 Alt-b 切换栏空间不会将其恢复。我还尝试逐字复制[John Goerzen 的配置文件](http://www.haskell.org/haskellwiki/Xmonad/Config_archive/John_Goerzen%27s_Configuration)，但这也不起作用。

一个有效的技巧（来自 John Goerzen）是在我的 xinitrc 中启动托盘程序。当托盘运行时，它以某种方式成功地在屏幕顶部保留了空间，xmobar 也可以使用。但我想让 xmobar 自己工作。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:47:44.177

由 OODavo 在#xmonad IRC 频道上解决。原来 Arch 上最新的 xmobar 包（0.16-3）只是有一个错误，它破坏了 AvoidStruts 布局。解决方法是降级到以前的版本，或者从 git 构建最新版本。

以前版本的包：[http ://arm.konnichi.com/2012/12/02/community/os/x86_64/xmobar-0.16-1-x86_64.pkg.tar.xz](http://arm.konnichi.com/2012/12/02/community/os/x86_64/xmobar-0.16-1-x86_64.pkg.tar.xz)

Arch中降级软件包的说明：[https ://wiki.archlinux.org/index.php/Downgrading_Packages#How_to_downgrade_a_package](https://wiki.archlinux.org/index.php/Downgrading_Packages#How_to_downgrade_a_package)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T05:08:16.237

我在 ubuntu 上使用 xmonad 和 xmobar，它按预期工作。

我在 xmonad.hs 中有以下配置

```
manageHook  = manageDocks <+> manageHook defaultConfig
layoutHook  = avoidStruts $ layoutHook defaultConfig 
```

我的 xmobarrc 有自定义配置，但没有特定于对齐的。

我的 xmonad 版本是 0.11，xmobar 版本是 0.18

我不会在系统启动时自动启动 xmobar，我更喜欢手动启动它，在它启动后，所有其他窗口都会礼貌地为 xmobar 状态栏腾出空间。

# mootools - Mootools 中的构造函数语法，容器参数 (noob)

> ID：13867200
> 
> 赞同：1
> 
> 时间：2012-12-13T19:42:50.467
> 
> 标签：mootools

抱歉这个绝对菜鸟问题。我正在尝试使用此 MooTools 插件实现选项卡：http: [//mootools.net/forge/p/simple_tab_pane](http://mootools.net/forge/p/simple_tab_pane)

构造函数的语法如下：

```
var myTabPane = new TabPane('tabs', { 
    tabSelector: 'li', 
    contentSelector: 'p' 
}); 
```

其中 'tabs' 是容器的 CSS-id。

现在我更愿意为容器使用一个类，但“.tabs”不起作用。什么是正确的语法？我应该如何处理例如每个 div-Element ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:11:32.570

首先是第一件事-预期的结果：

[https://github.com/akaIDIOT/MooTools-TabPane/blob/master/Source/TabPane.js#L44](https://github.com/akaIDIOT/MooTools-TabPane/blob/master/Source/TabPane.js#L44)

他希望参数是元素 id 或实际元素。你如何到达那个元素取决于你。

```
var myTabPane = new TabPane(document.getElement('.tabs'), { 
    tabSelector: 'li', 
    contentSelector: 'p' 
}); 
```

传递基于类搜索找到的元素`.tabs`。

或者，您可以在类上重新实现初始化方法并将该行编写为：

```
this.container = document.getElement(container);
this.container.getElements(this.options.contentSelector).setStyle('display', 'none'); 
```

所以你可以传递一个像选择器一样的jquery：`new TabPane('#someid')`或`new TabPane('div.someclass')`

你可以通过做`TabPane.implement({ initialize: fn(){... })`或做一个子类来重构它`var myTabs = new Class({extends: TabPane, initialize: fn(){ ... })`。当你扩展时，`this.parent()`会在原型之上调用父方法。

# c# - 如何捕获有关我的应用程序为何“挂起”的信息

> ID：13867201
> 
> 赞同：0
> 
> 时间：2012-12-13T19:42:49.780
> 
> 标签：c#, wpf

我有一个 WPF 监控应用程序，它使用单独的（内部开发的）C# 测试基础结构来执行测试并监控和记录结果。我还使用商业软件包 (InGear) 与 PLC 通信。结果，应用程序有很多线程（其中大部分是由我使用的工具创建的）。

由于环境的性质，在目标环境中使用调试器会非常困难；所以，我们都使用[log4net](http://logging.apache.org/log4net/)来记录诊断。

我在外部调用周围使用 try/catch 块，并且还在 WPF 和 AppDomain 级别设置了未处理的异常处理程序。

在我们第一次长期运行期间，应用程序似乎变得无响应，我得到了标准的“无响应”对话框。看着日志，似乎一切都停止了。例如：我可以从日志中看到[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)设置为在 1 秒内响应主线程；但是，从来没有。

所以....我的问题是：

1.  如何检测挂起或被 Window 检测到我挂起？请注意，我假设它可能是一个更高优先级的线程阻塞了我的 UI 线程；所以，我可能无法回复 Windows 消息。
2.  一旦我进入，我如何找出罪魁祸首。能够记录其调用堆栈将是一个很大的优势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:47:21.410

也许过于简单，但是将调试器附加到进程，执行“Break All”然后检查各个线程的堆栈跟踪怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:20:53.467

在我无法确定在 Windows 之前检测到“挂起”的方法的情况下，我能够捕获 Windows 超时异常并最终将问题追溯到 Oracle .NET 组件中的非托管代码。

# git - 从外部 bash shell (windows) 执行 GIT 命令时遇到问题

> ID：13867208
> 
> 赞同：0
> 
> 时间：2012-12-13T19:43:20.723
> 
> 标签：git, github-api, finalbuilder

我正在使用 finalbuilder 执行 GIT 命令但没有成功。FinalBuilder 文档建议将环境变量 HOME 设置为我已经完成的 %USERPROFILE% 。我可以从 git bash shell 成功执行 git clone 命令，但不能通过它们的 git 操作从 finalbuilder 内部执行。

将 finalbuilder 排除在图片之外，在 Windows 中，如何从 bash 外部执行 git 命令？

现在，我的错误只是超时。没有错误，只是超时。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:05:34.433

假设您的意思是 Windows 的 Git 而不是 cygwin git - 然后将 Program Files\Git\cmd 文件夹添加到您的 PATH 环境变量中，那么您将能够从 cmd 提示符或任何其他 shell 运行 git 命令。bash 提示使用 /etc/profile 文件设置了自己的 PATH，该文件单独处理。所以`git version`应该返回你正在运行的版本。如果这不足以解决您的问题，您可以考虑提供该信息以及您运行的实际命令以及您所在的 Windows 版本和平台等。

# c# - 从字典中删除元素

> ID：13867209
> 
> 赞同：0
> 
> 时间：2012-12-13T19:43:24.253
> 
> 标签：c#, linq

是否存在任何简单的解决方案，可以让我使用 LINQ 解决下一个问题。

例如，我有**Dictionary<string,int> 路径；**

其中包含以下元素

```
 <"/abc/12", 13>

   <"/test/abc", 22>

   <"/stack/overflow/com", 43>

   <"/stack/exception", 4> 
```

我有一个 **List<string> 过滤器**，其中包含以下元素

```
 "/abc"
   "/stack/overflow" 
```

而且我需要从路径字典中删除那些元素，这些元素不是从过滤器列表中提供的任何字符串开始的。所以我应该得到以下结果：

```
 <"/abc/12", 13>

   <"/stack/overflow/com", 43> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:48:11.403

您可以使用 Linq：

```
var toDelete = paths
    .Where(kv => !filter.Any(f => kv.Key.StartsWith(f)));
foreach(var delete in toDelete.Reverse())
    paths.Remove(delete.Key); 
```

[**演示**](http://ideone.com/m7tfgq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:53:43.857

对于非 linq 方式

创建要删除的新列表

通过paths.keys foreach

在该循环中通过过滤器进行遍历

如果 key.contains(filter) ---- 可能想要同时添加 toupper() 或 tolower()
然后将 key 添加到 toRemove

然后 foreach 到 toRemove 调用 paths.remove(toRemoveStr);

# ruby-on-rails - 1:Fixnum 的未定义方法“sum”

> ID：13867210
> 
> 赞同：0
> 
> 时间：2012-12-13T19:43:32.570
> 
> 标签：ruby-on-rails, sum

```
<% @user.friendships.each do |f| %>
  <%= f.friend.count %>
<% end %> 
```

这会返回一组数字`1 2 1 1 3`，但是当我尝试获取这些值的总和时，出现此错误：`undefined method sum for 1:Fixnum`。

```
<%= f.friend.count.sum %>
<%= f.friend.count.sum(:value) %>
<%= f.friend.count.inject {|sum, x| sum + x} %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:44:09.637

我想这就是你要找的：

```
<%= @user.friendships.inject(0) {|sum, f| sum + f.friend.count} %> 
```

需要注意的重要一点是，您正在对友谊集合调用注入并将总和增加 f.count。

# javascript - Bootstrap 模态褪色问题

> ID：13867213
> 
> 赞同：2
> 
> 时间：2012-12-13T19:43:39.370
> 
> 标签：javascript, twitter-bootstrap

我最近将我们的 Bootstrap 插件文件更新到了 2.2.1 版（提供所有插件的串联版本）。

像我们一直在使用 1.4 一样，交换了模态的所有旧 data-* api 引用 - 一切都是 hunky dorey。我们从未使用过的动画是“fade”类提供的。

所以今天我想打开动画，谁能解释为什么添加`fade`类不仅会完全破坏模态（显示背景，但模态本身从未设置为显示）而且还会使“触发器”事件处理程序不起作用？

我[这里](http://jsfiddle.net/Kerry350/ahB6C/5/)有一个小提琴显示问题。它发生在跨浏览器上，所以我知道我这边的错误。`fade`删除 - 一切都很好，`fade`打开 - 坏了:(

款式看起来不错？标记与我一直使用的一样，并且正如我最近所说的那样，缩小的插件源已更新。

在我因为我希望这是一个愚蠢的疏忽而花费更长的时间之前，任何人都可以提供帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:40:42.790

现在解决了。这是我自己的错，我忽略了需要添加的实际“组件动画”CSS。

我花了一段时间才进行明智的调试，但最后我看到背景方法回调没有从这里执行`doAnimate ? this.$backdrop.one($.support.transition.end, callback) : callback()`。

回调从未执行的原因现在很明显 - 缺少 CSS 类，因此没有应用转换，因此没有要挂钩的转换结束事件。所以背景元素正在`in`应用它的类，但从未达到回调的实际模式，这也是“触发器”似乎停止工作的原因——只有一个大背景位于顶部，但不透明度设置为 0 .

啊，这一切现在看起来都很愚蠢：）

# asp.net-mvc - .NET MVC 发布到生产服务器时出现错误 500

> ID：13867217
> 
> 赞同：5
> 
> 时间：2012-12-13T19:44:00.823
> 
> 标签：asp.net-mvc, dev-to-production

当我在 Visual Web Developper Express 2010 中按 F5 时，我的 MVC 网站在我的调试机器上运行良好。我已经发布了几次没有问题，但我最近做了很多更改，我的最新发布没有按预期工作.

事实上，发布工作完美，没有显示任何特殊消息。但问题是，当我连接到该地址时，我收到一个错误 500。我在谷歌上搜索并添加了所需的 web.config 信息，以便获得详细信息。

这是我得到的信息：

> HTTP 错误 500.0 - 内部服务器错误
> 
> 由于发生内部服务器错误，无法显示该页面。
> 
> 模块：AspNetInitializationExceptionModule
> 
> 通知：开始请求
> 
> 处理程序：ExtensionlessUrlHandler-Integrated-4.0
> 
> 错误代码：0x00000000

谁能指出我调试的正确方向？如有必要，我可以向您提供有关我的申请的更多信息！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T00:31:53.157

好的，我在帮助台和谷歌的帮助下自己找到了这个。

1.  帮助台向我发送有关如何在网站上显示更多错误的[链接。](http://blog.arvixe.com/how-to-get-more-detailed-errors-in-iis/)
2.  然后我看到我的错误是“访问路径 XXXX 被拒绝”。这与[ClientDependency 框架](http://clientdependency.codeplex.com/)有关，并试图访问服务器上不存在的路径
3.  我在 google 上发现这个路径是在 web.config 中指定的，所以我更改了路径。
4.  没有更多工作，所以我在服务器上更改了此文件夹的权限
5.  有效。

希望有一天这对某人有所帮助！

# ajax - 将 Json 从 servlet 发送到 javascript

> ID：13867218
> 
> 赞同：0
> 
> 时间：2012-12-13T19:44:07.107
> 
> 标签：ajax, json, jakarta-ee

我正在尝试将 json 对象数组从 servlet 发送到 javascript 。我都得到数组并解析。我的 ajax 适当地调用了 servlet，但无法在 javascript 端接收 json 数组，请帮助

```
public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws IOException {
    System.out.println("Post!!");
    response.setContentType("application/json");//since sendign jsonArray toString
    PrintWriter out = response.getWriter();
    try {
        Marker marker=new Marker( 40.72318,-74.03605);//

        JSONArray arrayObj=new JSONArray(); 
        arrayObj.add(marker);
        System.out.println(marker.toString());
        out.print(arrayObj);

    } finally {
        out.flush();
        out.close();
    } 
```

}

这是我在 javascript 中的 ajax 调用，我试图从 servlet 中获取 json 对象数组。

```
 $.ajax({
          url:'test',
          dataType:'json',
          type:'POST',
          success:function(data){

            <%System.out.println(" success");%>
          console.log(data);
          alert('got json hopefully');
          alert(data);
          //
      },
      error:function(jxhr){
          <%System.out.println(" faliure");%>
        console.log(jxhr.responseText);
      }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-12T17:02:08.463

这对我有用，下面是ajax代码。

```
$.ajax({
    type : 'POST',
    url : "URL",
    data: {array: array},
    success : function(response)
    {
        alert("Success "+response.message);
    },
    error : function(response)
    {
        alert("Error"+response.message);
        console.log('Error');
    }
}); 
```

小服务程序：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
    String[] array = request.getParameterValues("array[]");
    request.setCharacterEncoding("utf8");
    response.setContentType("application/json");
    ArrayList<String> message = new ArrayList<String>();
    message.add("response message goes here");
    PrintWriter writer = response.getWriter();
    JSONObject obj = new JSONObject();
    obj.put("message",message); 
    response.setStatus(200);
    //System.out.println(obj.get("message"));
    writer.append(obj.toString());
    writer.close();
} 
```

有关更多详细信息，请参阅[此处](https://stackoverflow.com/a/9647574/11997761)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T19:39:01.947

这就是我向 servlet 发出请求并用 json 响应的方式。我使用 google GSON library for java，我建议你也使用它。[https://code.google.com/p/google-gson/](https://code.google.com/p/google-gson/)

```
$.ajax({
                url: 'servletName', //the mapping of your servlet
                type: 'POST',
                dataType: 'json',
                data: $('#someForm').serialize(),
                success: function(data) {
                        if(data.isValid){
                     //maybe draw some html
                }else{
                    //data is not valid so give the user some kind of alert text
                }
                } 
```

这是小服务程序

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String someInput = request.getParameter("someInput");

     Map map=new HashMap();

       if(someInput!=null){ //or whatever conditions you need
              map.put("isValid",true);
              map.put("someInput",someInput); 
       }else{
       map.put("isValid", false);

       }
       write(response,map);
   }

private void write(HttpServletResponse response, Map<String, Object> map) throws IOException {
    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(new Gson().toJson(map)); //this is how simple GSON works
} 
```

我希望这很清楚。如果没有，请在评论中问我。

# c++ - OpenGL渲染纹理全白

> ID：13867219
> 
> 赞同：6
> 
> 时间：2012-12-13T19:44:08.620
> 
> 标签：c++, opengl

我正在尝试将 .png 图像渲染为纹理。但是，正在渲染的只是一个白色方块。

我给我的纹理一个称为 texID 的唯一 int ID，将像素数据读入缓冲区“图像”（在 .h 文件中声明）。我加载我的像素缓冲区，完成我所有的 OpenGL 工作并将该像素缓冲区绑定到 OpenGL 的纹理。然后我使用 glDrawElements 将其全部绘制出来。

此外，当调用构造函数时，我将纹理初始化为 32x32 的大小，因此我怀疑它与大小的二次幂问题有关。

任何人都可以在我的 OpenGL GL_TEXTURE_2D 设置中看到任何可能给我一个白色方块的错误。

```
 #include "Texture.h"

Texture::Texture(int width, int height, string filename)
{

    const char* fnPtr = filename.c_str(); //our image loader accepts a ptr to a char, not a string
    printf(fnPtr);
    w = width; //give our texture a width and height, the reason that we need to pass in the width and height values manually
    h = height;//UPDATE, these MUST be P.O.T.

    unsigned error = lodepng::decode(image,w,h,fnPtr);//lodepng's decode function will load the pixel data into image vector
    //display any errors with the texture
    if(error)
    {
        cout << "\ndecoder error " << error << ": " << lodepng_error_text(error) <<endl;
    }

    for(int i = 0; i<image.size(); i++)
    {
        printf("%i,", image.at(i));

    }

    printf("\nImage size is %i", image.size());

    //image now contains our pixeldata. All ready for OpenGL to do its thing

    //let's get this texture up in the video memory
    texGLInit();
}

void Texture::texGLInit()
{
    //WHERE YOU LEFT OFF: glGenTextures isn't assigning an ID to textures. it stays at zero the whole time
    //i believe this is why it's been rendering white
    glGenTextures(1, &textures);
    printf("\ntexture = %u", textures);
    glBindTexture(GL_TEXTURE_2D, textures);//evrything we're about to do is about this texture
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    //glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    //glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    //glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri (GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
    //glDisable(GL_COLOR_MATERIAL);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,w,h,0, GL_RGBA, GL_UNSIGNED_BYTE, &image);
    //we COULD free the image vectors memory right about now.

}

void Texture::draw(point centerPoint, point dimensions)
{
    glEnable(GL_TEXTURE_2D);
    printf("\nDrawing block at (%f, %f)",centerPoint.x, centerPoint.y);
    glBindTexture(GL_TEXTURE_2D, textures);//bind the texture
    //create a quick vertex array for the primitive we're going to bind the texture to
    printf("TexID = %u",textures);
    GLfloat vArray[8] = 
    {
        centerPoint.x-(dimensions.x/2), centerPoint.y-(dimensions.y/2),//bottom left i0
        centerPoint.x-(dimensions.x/2), centerPoint.y+(dimensions.y/2),//top left i1
        centerPoint.x+(dimensions.x/2), centerPoint.y+(dimensions.y/2),//top right i2
        centerPoint.x+(dimensions.x/2), centerPoint.y-(dimensions.y/2)//bottom right i3
    };

    //create a quick texture array (we COULD create this on the heap rather than creating/destoying every cycle)
    GLfloat tArray[8] = 
    {
        0.0f,0.0f, //0
        0.0f,1.0f, //1
        1.0f,1.0f, //2
        1.0f,0.0f //3
    };

    //and finally.. the index array...remember, we draw in triangles....(and we'll go CW)
    GLubyte iArray[6] =
    {
        0,1,2,
        0,2,3
    };

    //Activate arrays
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    //Give openGL a pointer to our vArray and tArray
    glVertexPointer(2, GL_FLOAT, 0, &vArray[0]);
    glTexCoordPointer(2, GL_FLOAT, 0, &tArray[0]);

    //Draw it all
    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_BYTE, &iArray[0]);

    //glDrawArrays(GL_TRIANGLES,0,6);

    //Disable the vertex arrays
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisable(GL_TEXTURE_2D);
    //done!

    /*glBegin(GL_QUADS);
    glTexCoord2f(0.0f,0.0f);
        glVertex2f(centerPoint.x-(dimensions.x/2), centerPoint.y-(dimensions.y/2));
    glTexCoord2f(0.0f,1.0f);
        glVertex2f(centerPoint.x-(dimensions.x/2), centerPoint.y+(dimensions.y/2));
    glTexCoord2f(1.0f,1.0f);
        glVertex2f(centerPoint.x+(dimensions.x/2), centerPoint.y+(dimensions.y/2));
    glTexCoord2f(1.0f,0.0f);
        glVertex2f(centerPoint.x+(dimensions.x/2), centerPoint.y-(dimensions.y/2));
    glEnd();*/
}

Texture::Texture(void)
{
}
Texture::~Texture(void)
{
} 
```

我还将包括主类的 init，在此之前我会在其中进行更多的 OGL 设置。

```
void init(void)
{
    printf("\n......Hello Guy. \n....\nInitilising");
    glMatrixMode(GL_PROJECTION);    
    glLoadIdentity();
    gluOrtho2D(0,XSize,0,YSize);
    glEnable(GL_TEXTURE_2D);
    myBlock = new Block(0,0,offset);
    glClearColor(0,0.4,0.7,1);

    glLineWidth(2);         // Width of the drawing line
    glMatrixMode(GL_MODELVIEW); 
    glDisable(GL_DEPTH_TEST);
    printf("\nInitialisation Complete");

} 
```

更新：在我第一次设置 OpenGL 窗口的地方添加主函数。

```
int main(int argc, char** argv) 
{
  glutInit(&argc, argv);    // GLUT Initialization 
  glutInitDisplayMode(GLUT_RGBA|GLUT_DOUBLE); // Initializing the Display mode
  glutInitWindowSize(800,600);  // Define the window size
  glutCreateWindow("Gem Miners");   // Create the window, with caption.
        printf("\n========== McLeanTech Systems =========\nBecoming Sentient\n...\n...\n....\nKILL\nHUMAN\nRACE \n");
  init();   // All OpenGL initialization

  //-- Callback functions ---------------------
  glutDisplayFunc(display);
  glutKeyboardFunc(mykey);
  glutSpecialFunc(processSpecialKeys);
  glutSpecialUpFunc(processSpecialUpKeys);
  //glutMouseFunc(mymouse);

  glutMainLoop();   // Loop waiting for event 
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T20:16:27.863

# c - 在C中将字符串转换为表达式

> ID：13867222
> 
> 赞同：0
> 
> 时间：2012-12-13T19:44:13.963
> 
> 标签：c, dynamic, expression

> **可能重复：**
> [什么是快速 C 或 Objective-C 数学解析器？](https://stackoverflow.com/questions/4892152/what-is-a-fast-c-or-objective-c-math-parser)

我可以使用什么函数代码将动态字符串转换为表达式并对其进行评估？

```
#include <stdio.h>
#include <conio.h>
#include <string.h>
int main() {
  char var1[] = "3";
  char var2[] = "2";
  char var3[] = "5";
  char exp[20]  = "";
  int result;

  // Trying to create a random expression "(3+2)*5" 
  strcat(exp, "( ");
  strcat(exp, var1);
  strcat(exp, " + ");  
  strcat(exp, var2);  
  strcat(exp, " ) * ");  
  strcat(exp, var3);    

  result = somefunction(exp);

  printf("Result : %i\n", result);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:47:06.903

您必须解析字符串并对其进行评估 - 这远非微不足道，抱歉。但是您可以[在这里看到一个工作示例](http://pastebin.com/iYnS9qFn)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:59:35.483

您正在谈论编写解析器。您的第一步是找出该解析器的规则。

如果您将它们简单地定义为“从左到右评估所有数学，括号优先”，那么这并不是非常困难。但这显然会为“1+2*3”产生一些意想不到的结果。

如果您可以选择，[反向抛光符号](http://en.wikipedia.org/wiki/Reverse_Polish_notation)计算器更容易实现。如果您没有该选项，您可能需要解析成一棵树才能开始，然后以“从叶到根”的顺序进行评估。

# c - C99 变量声明的位置

> ID：13867223
> 
> 赞同：3
> 
> 时间：2012-12-13T19:44:13.723
> 
> 标签：c, c99

我知道 C99 允许声明与代码混合，不仅在开始时，而且我试图在 ISO/IEC 9899:1999 中找到它的编写位置 - 你能指出我应该搜索的部分吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T19:56:07.297

在（非规范性）转发中，第 xii 页中提到了该更改，称为“混合声明和代码”。（恕我直言，声明*是*“代码”；它应该说“混合声明和声明”。）

它在 6.8.2中的*复合语句*的语法中定义：

```
compound-statement:
    { block-item-list[opt] }
block-item-list:
    block-item
    block-item-list block-item
block-item:
    declaration
    statement 
```

C89/C90标准中对应的语法是：

```
compound-statement:
    { declaration-list[opt] statement-list[opt] }
declaration-list:
    declaration
    declaration-list declaration
statement-list:
    statement
    statement-list statement 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T19:56:14.483

答案在第 6.8.2 条中：

```
block-item: declaration
            statement 
```

A`block-item`可以是声明或声明，它们不需要按特定顺序排列：

```
compound-statement:
                    { block-item-list_opt }
block-item-list: block-item
                 block-item-list block-item 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T19:56:29.477

C 1999 6.8.2 两个说复合语句是“{”、可选的块项目列表和“}”，并且块项目列表是块 = 项目或另一个块项目-list 和块项，并且块项是声明或语句。因此，声明可以是复合语句中的任何块项。反过来，6.8 说复合语句可以出现在语句可以出现的任何地方。此外，6.9.1 说函数定义的主体是复合语句。

```
compound-statement:
    { block-item-list[opt] }

block-item-list:
    block-item
    block-item-list block-item

block-item:
    declaration
    statement 
```

# css - IE8上隐藏在子图像后面的父元素伪元素

> ID：13867226
> 
> 赞同：6
> 
> 时间：2012-12-13T19:44:22.550
> 
> 标签：css, internet-explorer-8, pseudo-element

为什么在 IE8 中，伪元素的背景颜色在父元素的子元素后面流动？文本在前面流动，但背景颜色没有。Z-index 似乎没有任何帮助。

我无法确定这是否是 IE8 中的错误。这似乎是一个非常常见的用例，但我找不到很多博客文章或与之相关的 SO 问题。

[http://jsfiddle.net/VAg2E/](http://jsfiddle.net/VAg2E/)

```
 <div id="parent">
       <img src="http://placehold.it/200x200">
    </div>

    #parent{ padding: 20px; }
    #parent:before{
       content: 'Behind the image';
       position: absolute;
       top: 0;
       left: 0;   
       width: 100px;
       height: 100px;
       background-color: red;
    } 
```

编辑：[关于堆叠顺序的相关堆栈溢出问题](https://stackoverflow.com/questions/11088176/before-pseudo-element-stacking-order-issue/11088328#11088328)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T05:51:15.393

这绝对是 IE8 的一个 bug；由于您的`:before`伪元素已定位，因此它应该创建一个新的堆叠上下文并始终绘制在它的顶部，`img` [除非您给它一个负数`z-index`](http://jsfiddle.net/BoltClock/VAg2E/2)（即使那样，整个元素也应该绘制在它的后面，而不仅仅是它的背景）。

这个问题似乎也特定于伪元素和替换元素`:before`之间的堆叠，例如. 看起来 IE8 在堆叠方面对替换内容的处理方式有所不同，但无论它在做什么，它绝对不符合规范。`:after``img`

您可能知道，这在 IE9 中已修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-25T15:37:25.887

遇到完全相同的问题，您唯一能做的就是通过 CSS 和`z-index`. 唯一的问题是它被*放置*在`z-index`从父元素开始的子元素上，因此您将无法执行正确的逻辑顺序，因为and将`#parent-element {z-index: 2}`被设置为级别 1，作为.`#child-element {z-index: 1}``z-index``#child-element`*`#parent-element`*

 *您仍然可以使用 -1 值设置`z-index`，`#child-element`它只会取回整个`#parent-element`堆叠顺序。

回顾一下：

```
#parent-element { z-index: 99;} /* or any arbitrary number fitting */
#child-element {z-index: -1;} 
```

还要记住给两个元素 a`position: relative/absolute`以启用堆叠顺序`z-index`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:49:58.000

IE8 仅`<!DOCTYPE>`在声明时才支持伪。 [来源](http://www.w3schools.com/css/css_pseudo_classes.asp)

```
 #parent { padding: 20px; z-index: 2; }
    #parent:before {
       content: 'Behind the image';
       position: absolute;
       top: 0;
       left: 0;   
       width: 100px;
       height: 100px;
       background-color: red;
       z-index: -1;
    }​ 
```*

# facebook - Facebook 批量操作自定义对象

> ID：13867229
> 
> 赞同：3
> 
> 时间：2012-12-13T19:44:23.707
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试对我创建的 oat Open graph API 的自定义对象进行一些批处理操作。我已经看到了大量的提要或图像示例，但我仍然不知道 Facebook 是否支持自定义对象的批处理操作。例如，我想知道以下对象的批处理操作是否有效：

```
batch=[
{:method=>"post", :relative_url=>"/me/tfgtopquiz:win", "profile"=>"users/1/victories"} 
{:method=>"post", :relative_url=>"/me/tfgtopquiz:guessed", "triviaquestion"=>"questions/1"} ] 
```

请注意，我有自定义类型（琐事问题）。似乎如果我将它作为参数传递，facebook 会忽略它，我需要这些信息。请求后，我收到以下错误消息：

> “您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：琐事问题。”

我真的试图定义类型“琐事问题”，但看起来 Facebook 在批处理 JSON 之外忽略了它。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:37:38.017

一段时间后，我意识到我应该以其他格式发送 JSON：

```
{:access_token=>"MY_ACCESS_TOKEN", 
:requests=>
[{:action=>"guessed", :object_type=>"triviaquestion", :object_url=>"URL"},
{:action=>"guessed", :object_type=>"triviaquestion", :object_url=>"URL"},
{:action=>"guessed", :object_type=>"triviaquestion", :object_url=>"URL"},
{:action=>"play", :object_type=>"correct_answer", :object_url=>"URL"}]} 
```

谢谢！

# facebook - 如何在我的网站中管理来自多提供商（facebook、twitter）的用户帐户？

> ID：13867234
> 
> 赞同：5
> 
> 时间：2012-12-13T19:44:30.930
> 
> 标签：facebook, twitter, user-management, social-media, hybridauth

我即将使用其中一个多提供商身份验证框架 Opauth 或 Hybridauth（不知道哪个是最好的，但我对第二个有一点偏好）所以结果是我必须管理多个帐户。

事实上，我已经有了自己的帐户管理（登录名+密码+电子邮件），去年我就有了 facebook 用户。现在我将不得不处理 Twitter 帐户、linkedin 帐户等...所以问题很简单：如何管理用户名？例如，约翰在我的网站上创建了一个帐户。所以“约翰”登录/用户名被采用。但是，如果另一个来自 Facebook 的 John 和来自 Twitter 的另一个 John 来了，我该怎么办？在 Stackoverflow（或其他地方）中，做法是什么？

我不希望一个约翰代表另一个约翰写信。今天用我自己的系统，我验证登录名（用户名）是唯一的。如果不是，我拒绝用户。但现在 ？

我以为我可以检查电子邮件，但是...我了解到电子邮件地址不能成为密钥，因为 Twitter 不会将其提供给您。

希望我足够清楚:)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:51:38.857

HybridAuth 为您提供了一种将您的网站与社交媒体集成的绝佳方式...

[http://hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/)

这也应该有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:23:17.290

正如您所说，不可能只从不同来源检索用户名并存储它。我不知道它是如何在 stackoverflow 中完成的，但是如果您尝试注册名称是可选的，那么它可能不是唯一键。我在这里看不到使用 twitter 登录的方式，所以我敢打赌，电子邮件是唯一的密钥。

我会尝试回答您的问题，但我只使用了 facebook API，所以也许这不能与其他人一起完成。我想每个 API 都会为您提供一些可以存储在数据库中的内容，并在以后使用它来根据他们的 API 识别您的用户。

如果您允许用户在 facebook（或 gmail、twitter...）上注册，那么您可以使用以下方法（我敢肯定还有更多）：

1.  他们总是使用 facebook（或 twitter、gmail...）登录：您使用 API 提供的密钥和您可以收集的其他有用信息将他们的记录存储在您的数据库中。正如您所说，每个 API 都为您提供不同的东西，因此您必须提前考虑为用户提供良好体验真正需要什么：需要他们的名字吗？年龄？如果您需要比 API 提供的更多数据，您应该跳到下一个方法或预取它并使其之前可编辑。在这里，您不会要求您的用户输入密码，因此他们只能使用 facebook 而不是登录表单登录，如果用户再次尝试使用 facebook（或 twitter、gmail）进行身份验证，您知道您必须查找和验证哪个密钥你的用途。

2.  可以创建一个帐户并将其与 facebook（或其他）链接：您请求 facebook 许可，然后为他们预先填写表格以提供丢失的数据（密码、邮件，如果他们使用 twitter...），然后创建记录存储 API 提供的唯一密钥，如果他们使用他们的 facebook 帐户登录，则完全按照步骤 1 进行。如果您要求输入密码和电子邮件，他们也可以使用标准登录表单。

3.  您可以使用第一种方法并要求用户更改与其他用户冲突的属性（在您的情况下为名称），甚至要求根据他们用于登录的社交网络来填写缺少的内容。您可以使用姓名+姓氏作为用户名，以减少冲突的可能性，如果这是您要存储以识别您的用户的内容。

希望这可以帮助

# sql - 复杂SQL查询的解决方案

> ID：13867236
> 
> 赞同：0
> 
> 时间：2012-12-13T19:44:37.373
> 
> 标签：sql, oracle

我有以下数据库表`APP_USERS`

```
USER_NAME OLD_STATUS NEW_STATUS STATUS_CHANGE_DATE
-------------------------------------------------- ----------------------------
STEVE BALE LOGGED_OUT 不可用 2012 年 12 月 12 日上午 5:04:24.736437
STEVE BALE 不可用 2012 年 12 月 12 日上午 6:04:24.736437 可用
STEVE BALE 可用 不可用 2012 年 12 月 12 日上午 7:31:08.591801
STEVE BALE 不可用 2012 年 12 月 12 日上午 7:41:46.373138 可用
STEVE BALE 可用 不可用 2012 年 12 月 12 日上午 8:30:21.218388
STEVE BALE 不可用 2012 年 12 月 12 日上午 9:24:27.812461 可用
史蒂夫·贝尔 可用 不可用 2012 年 12 月 12 日上午 10:44:52.724405
STEVE BALE 不可用 LOGGED_OUT 2012 年 12 月 12 日上午 11:30:50.724405

```

我必须显示每个状态的用户状态开始日期和时间以及结束日期和时间。

从 2012 年 12 月 12 日上午 5:04:24.736437 到 2012 年 12 月 12 日上午 6:04:24.736437 的用户不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:51:22.283

您只需要“下一个”记录，因为状态似乎正在发生变化。您可以使用前导函数执行此操作：

```
select user_name, new_status, status_change_date as StartTime,
       lead(status_change_date) over (partition by user_name order by status_change_date) as EndTime
from app_users 
```

# c++ - 复制开销：双打与指针

> ID：13867240
> 
> 赞同：0
> 
> 时间：2012-12-13T19:44:54.167
> 
> 标签：c++, pointers, double, copying

> 复制两个双精度的开销可能很明显，但通常比一对指针强加的要少

来自 C++ 编。朗。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T15:23:09.173

这取自 Stroustrup 的“C++ 编程语言”的第 11 章。

让我们看一下上下文中的引用：

> 我们将`complex`运算符定义为接受类型为 的参数`complex`。这意味着对于`complex`运算符的每次使用，都会复制每个操作数。复制两个的开销`doubles`可能很明显，但通常比一对指针强加的开销要小（通过指针访问可能相对昂贵）。不幸的是，并非所有类都有方便的小表示。为避免过度复制，可以声明函数以获取引用参数。例如：

```
class Matrix {
      double m[4][4];
public:
      Matrix();
      friend Matrix operator+(const Matrix&, const Matrix&);
      friend Matrix operator*(const Matrix&, const Matrix&);
}; 
```

他只是说，因为它很小，所以通过价值而不是通过引用`complex`传递它是可以接受的。`const`然而，这对于较大的类型是不可接受的，例如`Matrix`上面的。对于这种类型，通过`const`引用传递是首选方法，因为它可以避免复制整个矩阵。

# python - heroku django 导入错误没有名为 _collections 的模块

> ID：13867242
> 
> 赞同：3
> 
> 时间：2012-12-13T19:45:08.710
> 
> 标签：python, django, heroku

值得注意的是，我正在使用[自定义 buildpack](https://github.com/theJohnnyBrown/heroku-buildpack-python)来启用使用 node.js 进行咖啡脚本编译。

在包含迁移的更改之后，运行迁移时出现以下错误

```
Running `./manage.py migrate talent` attached to terminal... up, run.3366
Traceback (most recent call last):
  File "./manage.py", line 8, in <module>
    from django.core.management import execute_from_command_line
  File "/app/lib/python2.7/site-packages/django/core/management/__init__.py", line 1, in <module>
    import collections
  File "/usr/local/lib/python2.7/collections.py", line 8, in <module>
    from _collections import deque, defaultdict
ImportError: No module named _collections 
```

在`heroku run bash`shell 会话中摸索了一下之后，我发现打开 python repl 并运行`import collections`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:51:56.543

进一步的研究表明，可以通过添加`/usr/local/lib/python2.7/:/usr/local/lib/python2.7/lib-dynload/`到 $PYTHONPATH 来抑制错误。我首先尝试在 buildpack 的 bin/release 文件中执行此操作，但我还有一个 PYTHONPATH 配置变量，它显然覆盖了环境的 buildpack 设置（可能应该如此）。

无论如何，修复 $PYTHONPATH 使一切恢复正常，但这感觉很尴尬，就像其他事情出错的症状一样。希望比我拥有更多 Heroku 知识的人能有所启发。

# c++ - C++ 引用传递和值传递函数的副作用？

> ID：13867245
> 
> 赞同：3
> 
> 时间：2012-12-13T19:45:22.460
> 
> 标签：c++, pass-by-reference, pass-by-value

我明白为什么会这样

```
#include <iostream>
using namespace std;

int additionFive (int a)
{
    a = a - 5;
    return a;
}

int subtractFive (int &a)
{
    a = a -5;
    return a;
}

int main()
{
    int local_A = 10;

    cout << "Answer: " << additionFive(local_A) << endl;
    cout << "local_A Value "<< local_A << endl;

    cout << "Answer: " << subtractFive(local_A) << endl;
    cout << "local_A = Value "<< local_A << endl;

    return 0;
} 
```

输出：

```
Answer: 5
local_A Value 10
Answer: 5
local_A = Value 5 
```

但我不明白为什么这种语法变化会改变答案（只需将算术和打印在同一行）

```
#include <iostream>
using namespace std;

int additionFive (int a)
{
    a = a - 5;
    return a;
}

int subtractFive (int &a)
{
    a = a -5;
    return a;
}

int main()
{
    int local_A = 10;

    cout << "Answer: " << additionFive(local_A) << " local_A Value: "<< local_A << endl;
    cout << "Answer: " << subtractFive(local_A) << " local_A = Value: "<< local_A << endl;

    return 0;
} 
```

输出：

```
Answer: 5 local_A Value: 10
Answer: 5 local_A = Value: 10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T19:46:52.053

您遇到了**未定义的行为**。第二个版本修改了`a`您在第二次读取的值`cout`2 次，读取之间没有序列点。

第一个版本：

```
cout << "Answer: " << subtractFive(local_A) << endl;
//                              |                  |
//                  reads and modifies local_A     |
//                                           sequence point
cout << "local_A Value ="<< local_A << endl;
//                             |
//                       reads local_A 
```

第二个版本：

```
cout << "Answer: " << subtractFive(local_A) << " local_A Value: "<< local_A << endl;
//                             |                                       |
//                  reads and modifies local_A                   reads local_A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:01:10.267

那么第二个代码的行为完全取决于系统/编译器。在 Dev C++ 上，第二个代码提供与第一个代码相同的输出。这取决于编译器如何在程序汇编中构建 cout 语句......

# python - 卸载以前通过 cx_freeze bdist_msi 创建的已安装 msi

> ID：13867247
> 
> 赞同：5
> 
> 时间：2012-12-13T19:45:25.313
> 
> 标签：python, windows, windows-installer, distutils, cx-freeze

我经常使用[cx_freeze](http://cx-freeze.sourceforge.net/)将我的 python 源与所有依赖项打包在一起，然后通过[distutils](http://docs.python.org/2/library/distutils.html) [bdist_msi](http://epydoc.sourceforge.net/stdlib/distutils.command.bdist_msi.bdist_msi-class.html)扩展创建一个 msi 安装包

当我尝试重新安装新创建的 msi windows 安装程序而不卸载以前的版本时，会出现唯一的问题。卸载程序会记录所有以前卸载的软件版本，并记录注册表和卸载程序信息。

是否可以检测到我以前安装的软件版本并自动卸载它而不安装新版本？

我知道[NSIS](http://nsis.sourceforge.net/Main_Page)，以及如何使用它的 python 绑定来创建安装程序，我提到的上述问题可以通过它轻松解决。不幸的是，此时此刻，除了 Python 提供的 distutils 之外，我并没有看到任何东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T18:35:00.017

在 cx_Freeze 中，`bdist_msi`有一个选项`upgrade-code`，[文档](http://cx_freeze.readthedocs.org/en/latest/distutils.html#bdist-msi)将其描述为：

> 为创建的包定义升级代码；这用于在安装此软件包之前强制删除使用相同升级代码创建的任何软件包

要指定它，我认为您必须将其传递给`setup()`调用，如下所示：

```
options = {"bdist_msi": {"upgrade-code":"..."}} 
```

（我总是忘记是否应该`-`或`_`在选项名称中像这样使用它们，所以如果这是错误的，请尝试作为`upgrade_code`）

[微软说](http://blogs.msdn.com/b/pusu/archive/2009/06/10/understanding-msi.aspx)升级代码应该是一个 GUID（随机生成的代码）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-21T16:52:23.890

Thomas K 的答案很接近，但至少在我的情况下，并不准确。经过反复试验，我发现 GUID 需要用大括号括起来：

```
bdist_msi_options = {
    "upgrade_code": "{96a85bac-52af-4019-9e94-3afcc9e1ad0c}"
    } 
```

并且这些选项需要与“build_exe”选项一起传递（一些在线示例对这些参数使用其他名称，但我发现只有 bdist_msi 有效）：

```
setup(  # name, version, description, etc...
        options={"build_exe": build_exe_options, # defined elsewhere
                 "bdist_msi": bdist_msi_options},
        executables=[Executable("run.py",
                                base="win32GUI",
                                shortcutName="My Program name",
                                shortcutDir='ProgramMenuFolder')]) 
```

使用此代码，在我的情况下，以前的安装程序已正确卸载并从添加/删除程序列表中删除。

# java - 我可以在表单登录重定向之前运行过滤器吗？

> ID：13867256
> 
> 赞同：0
> 
> 时间：2012-12-13T19:45:52.710
> 
> 标签：java, forms, servlets, servlet-filters

我有一个使用表单登录并且还包含过滤器的 Java webapp。我想使用过滤器显示在显示登录屏幕之前必须接受的确认页面。这可能吗？似乎登录内容在所有过滤器和 servlet 之前运行。

**更新：**我的登录页面没有实现过滤器；它使用容器提供的表单登录。

# drupal-7 - FullCalendar 月视图仅显示当月的事件

> ID：13867258
> 
> 赞同：1
> 
> 时间：2012-12-13T19:45:55.620
> 
> 标签：drupal-7, fullcalendar

我将几千个事件导入 Drupal 7 事件内容类型。它们都已发布，我可以单独查看每个事件。但是，在月视图中，仅显示当月的事件。如果我点击到其他月份，什么都不会出现。

我刚刚意识到它也在为其他视图（周和日）执行此操作。

我猜我有某种类型的过滤器设置不正确或什么的。有任何想法吗？

# c# - 显示视图的当前搜索路径

> ID：13867259
> 
> 赞同：1
> 
> 时间：2012-12-13T19:45:57.513
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我正在尝试对视图进行故障排除以及为什么它找不到编辑器模板。显然这与我们在 中配置搜索路径的方式有关`CustomRazorViewEngine`，但只要看看它，它应该可以工作。相反，它呈现默认的 MVC 编辑器模板，因为它找不到自定义模板。

如何显示视图的搜索路径列表，或触发错误以显示它正在寻找的搜索路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:25:28.003

这可能不是最好的方法，但是将它添加到控制器对我有用：

```
var searchedLocations = ViewEngines.Engines.[0]
    .FindPartialView(this.ControllerContext, "MyModel", false)
    .SearchedLocations
    .ToArray(); 
```

# php - 在贝宝中实施自适应链式延迟付款时出错

> ID：13867260
> 
> 赞同：0
> 
> 时间：2012-12-13T19:45:57.417
> 
> 标签：php, paypal, paypal-sandbox, paypal-adaptive-payments

第二个接收者在执行execute_payments.php后没有收到付款。虽然它只显示沙盒测试帐户中主要用户的付款

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:15:07.503

你在 ActionType 中设置了什么值？如果您设置 PAY_PRIMARY 那么付款将只到达主要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:49:16.137

确保按照建议设置这 2 个字段

在 PayRequest -> actionType = PAY_PRIMARY 中，并确保 feePayer 未设置为“SENDER”，因为这不是链式支付的有效值。

如果这不起作用，请在此处粘贴请求以供我们查看和建议。

# macos - NSTableView 错误：第 1 行应该在有效的可见部分中

> ID：13867263
> 
> 赞同：0
> 
> 时间：2012-12-13T19:46:23.767
> 
> 标签：macos, core-data

我在基于单元格的内容模式下有一个标准的 NSTableView，它的 dataSource 是一个附加到我的 AppDelegate 的 managedObjectContext 的数组控制器。在委托中，此代码删除后台线程上的对象（数据库可以有 30k+ 个对象，因此最好有一个响应式 UI、一个进度条和一个取消选项）：

```
-(void)deleteObjects:(NSArray*)objs completionBlock:(void (^)(void))aBlock
{
        [self showCancelButton:YES];
        __block __typeof__(self) blockself = self;
        dispatch_group_t dispatchGroup = dispatch_group_create();
        dispatch_group_async(dispatchGroup, dispatch_get_global_queue(0, 0), ^{
            NSManagedObjectContext *mainContext = [(AppDelegate*)[[NSApplication sharedApplication] delegate] managedObjectContext];
            [objs enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
                [mainContext deleteObject:obj];
                if ((idx % saveSpace == 0) && (idx > 0)) {
                    dispatch_sync(dispatch_get_main_queue(), ^{
                        NSError *error;
                        [blockself.managedObjectContext save:&error];
                        theProgressOverlay.filesCount -= saveSpace; //
                    });
                }
                if (isCancelled) {
                    *stop = TRUE;
                }
            }];
            NSError *error;
            [mainContext save:&error];
            NSLog(@"delete error: %@",error);
            if (aBlock) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self showCancelButton:NO];
                    aBlock();
                });
            }
        });
} 
```

此方法由代码调用：

```
 NSFetchRequest *toDelFetch = [NSFetchRequest fetchRequestWithEntityName:entity];
    [toDelFetch setIncludesPropertyValues:NO];
    NSError *error;
    NSArray *toDelObjs = [self.managedObjectContext executeFetchRequest:toDelFetch error:&error];
    NSLog(@"Error: %@",error);
    if (!toDelObjs || toDelObjs.count < 1) {
        return FALSE;
    }
    [self deleteObjects:toDelObjs completionBlock:{NSLog(@"Finished");}]; 
```

一切似乎都很好：用户界面的响应和取消按钮总是有效，但我经常收到错误：

```
2012-12-13 19:31:53.352 QS[1399:403] *** Assertion failure in -[NSTableRowData _addRowViewForVisibleRow:withPriorView:], /SourceCache/AppKit/AppKit-1138.51/TableView.subproj/NSTableRowData.m:2484
2012-12-13 19:31:53.353 QS[1399:403] Row 1 should be in the valid visible section
2012-12-13 19:31:53.358 QS[1399:403] (
    0   CoreFoundation                      0x00007fff8b773f56 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff88715d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8b773d8a +[NSException raise:format:arguments:] + 106
    3   Foundation                          0x00007fff8db1a71f -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 169
    4   AppKit                              0x00007fff917c6003 -[NSTableRowData _addRowViewForVisibleRow:withPriorView:] + 164
    5   AppKit                              0x00007fff917c5ef2 -[NSTableRowData _addRowViewForVisibleRow:withPriorRowIndex:inDictionary:withRowAnimation:] + 184
    6   AppKit                              0x00007fff917c5e38 -[NSTableRowData _addRowViewForVisibleRow:] + 38
    7   AppKit                              0x00007fff917c557c -[NSTableRowData _unsafeUpdateVisibleRowEntries] + 448
    8   AppKit                              0x00007fff917c5397 -[NSTableRowData updateVisibleRowViews] + 95
    9   AppKit                              0x00007fff9175d854 -[NSTableView viewWillDraw] + 156
    10  AppKit                              0x00007fff916c1f08 -[NSView viewWillDraw] + 666
    11  AppKit                              0x00007fff916c1f08 -[NSView viewWillDraw] + 666
    12  AppKit                              0x00007fff916c2796 -[NSScrollView viewWillDraw] + 43
    13  AppKit                              0x00007fff916c1f08 -[NSView viewWillDraw] + 666
    14  AppKit                              0x00007fff916c1f08 -[NSView viewWillDraw] + 666
    15  AppKit                              0x00007fff916c0c4d -[NSView _sendViewWillDrawInRect:clipRootView:suppressRecursion:] + 1358
    16  AppKit                              0x00007fff916bf9b8 -[NSView displayIfNeeded] + 1039
    17  AppKit                              0x00007fff916bf375 _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints + 648
    18  CoreFoundation                      0x00007fff8b7338e7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23
    19  CoreFoundation                      0x00007fff8b733846 __CFRunLoopDoObservers + 374
    20  CoreFoundation                      0x00007fff8b708af9 __CFRunLoopRun + 825
    21  CoreFoundation                      0x00007fff8b708486 CFRunLoopRunSpecific + 230
    22  HIToolbox                           0x00007fff8cb352bf RunCurrentEventLoopInMode + 277
    23  HIToolbox                           0x00007fff8cb3c4bf ReceiveNextEventCommon + 181
    24  HIToolbox                           0x00007fff8cb3c3fa BlockUntilNextEventMatchingListInMode + 62
    25  AppKit                              0x00007fff91683779 _DPSNextEvent + 659
    26  AppKit                              0x00007fff9168307d -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
    27  AppKit                              0x00007fff9167f9b9 -[NSApplication run] + 470
    28  AppKit                              0x00007fff918fbeac NSApplicationMain + 867
    29  QuickSlide                          0x00000001000019c2 main + 34
    30  QuickSlide                          0x0000000100001994 start + 52 
```

与我们亲爱的朋友谷歌一起搜索，显示了许多博客指出`Row 1 should be in the valid visible section`当 NSTableView 被`-reloadData`称为“太早”时是一个错误，即在`-awakeFromNib`. 但对我来说不是这样——删除肯定是在应用程序完全唤醒之后发生的。我还注释掉了`showCancelButton:`以确保它不是我的自定义进度条并尝试了

```
[contentArrayController setAutomaticallyRearrangesObjects:NO]; 
```

谁能告诉我是否有一个狡猾的技巧来避免这种断言？或者即使这很重要？该应用程序似乎可以继续运行，但我看到的其中一个博客说它正在为以后存储麻烦，但没有详细说明。该表在引发错误后似乎确实会更慢地刷新自身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:17:37.620

我想我已经想通了。大约一周后，我没有遇到问题...... S * d's Law意味着现在我已经回答了我自己的问题，它可能会再次开始。

无论如何，我使用的是委托方法：

```
- (id)tableView:(NSTableView *)aTableView objectValueForTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex 
```

和

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView 
```

该表似乎通过我的 CD DB 中的 NSManagedObjects 缓存的 NSArray 来填充我想要的。

我主要是在删除对象时遇到错误（尽管我认为，使用 NSFetchRequest 更新数组缓存）。

因此，以一种抓住稻草的方式，我决定在每个表列中对 NSTextFieldCell 进行子类化，并将 NSTableColumns 绑定到我的主 nib 文件中的数组控制器。这出人意料地好，并且在将鼠标悬停在表格行上时增加了关于工具提示的好处。无论如何，触摸的木头比正确的说法要多，现在一切似乎都平静下来了......如果情况随时发生变化，我会更新这个答案。

更新：似乎 NSTableView 和/或多线程不适合 UI api。我发现从后台线程返回时，诸如 NSDrawers 和工作表之类的东西不会动画——它们会忽略它们的标准方法，如 -orderOut 和 -toggle。使用上面的内容和带有延迟动画的 NSView（延迟后执行选择器）似乎已经完全解决了应用程序。

# mysql - 在我的时事通讯数据库中发现 'OR 1=1/* sql injection

> ID：13867266
> 
> 赞同：22
> 
> 时间：2012-12-13T19:46:34.257
> 
> 标签：mysql, security, sql-injection

我在我的时事通讯订阅者数据库的“电子邮件”字段中找到以下内容：**' OR 1=1/***

我知道这是一个 SQL 注入，但就是这样。我已经用谷歌搜索了一下，但我仍然清楚它到底想要达到什么目的。这发生在 11 月初，据我所知，我们在那段时间没有停电。有哪位好心人能告诉我这家伙可能在做什么吗？有没有办法知道他是否实现了他想要做的事情？

我对此几乎一无所知，我很担心。:(

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-13T19:50:33.293

`'OR 1=1`
是尝试使查询成功，无论什么`/*`是尝试启动多行注释，因此忽略查询的其余部分。

一个例子是

```
SELECT userid 
FROM users 
WHERE username = ''OR 1=1/*' 
    AND password = ''
    AND domain = '' 
```

如您所见，如果您要填充用户名字段而不转义，`'`无论用户在查询中传递什么凭据，都将返回系统中的所有用户 ID，可能会授予攻击者访问权限（如果管理员是您的第一个用户，则可能是管理员访问权限）。您还会注意到查询的其余部分将被注释掉，因为`/*`包含了 real `'`。

您可以在数据库中看到该值这一事实意味着它已被转义并且该特定攻击没有成功。但是，您应该调查是否进行了任何其他尝试。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T19:53:47.283

它可能旨在选择表中的所有信息。如果您使用这种查询（例如在 PHP 中）：

```
mysql_query("SELECT * FROM newsletter WHERE email = '$email'"); 
```

电子邮件 ' OR 1=1/* 将给出这种查询：

```
mysql_query("SELECT * FROM newsletter WHERE email = '' OR 1=1/*"); 
```

因此它选择所有行（因为 1=1 始终为真并且查询的其余部分是“注释的”）。但这并不成功

*   如果您的查询中使用的字符串被转义
*   如果您没有在页面上显示所有查询结果...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T20:03:08.427

数据库中的特定值不是您应该关注的。这可能是攻击者对您的系统进行*模糊测试*以查看它是否容易受到一[组标准攻击](http://code.google.com/p/fuzzdb/)的结果，而不是利用已知漏洞进行有针对性的攻击。

相反，您应该专注于确保您的应用程序对这些类型的攻击是安全的；[OWASP 是一个很好的资源](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)。

[如果您使用参数化查询来访问数据库](http://php.net/manual/en/book.pdo.php)，那么您可以安全地防止 Sql 注入，除非您也在后端使用动态 Sql。

如果你不这样做，你很容易受到攻击，你应该立即解决这个问题。

此外，您应该考虑对电子邮件地址进行某种验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-07T16:37:10.143

如果您对用户输入使用验证代码以限制在输入表单中使用符号和部分代码，则效果会更好。如果您在 html 代码中嵌入 php，则您的 php 代码必须位于顶部，以确保在黑客编辑页面并在您的 html 代码中添加 /* 时不​​会将其作为注释忽略

# java - 从 Java JTable 中删除多个项目

> ID：13867268
> 
> 赞同：0
> 
> 时间：2012-12-13T19:46:35.250
> 
> 标签：java, swing, jtable, defaulttablemodel

所以我有一个由我创建的对象填充的默认表模型。对象之一是名称，以及对象的其他三个字符串属性。我有一个执行操作的按钮，现在当此按钮执行此操作时，我需要遍历该 DefaultTableModel 中的所有项目，并删除第 0 列中与所选对象具有相同值的所有项目。所以我遇到的问题是这只会删除一个具有该值（名称）的项目。我需要此代码来删除包含与第 0 列相同的字符串值的所有项目。

```
 int nRow = suggestedAcTableModel.getRowCount() - 1;

                for (int i = 0; i < nRow; i++) {

                    String acNameStr = suggestedAcTableModel.getValueAt(i, 0).toString();

                    if (acNameStr.equals(acName)) {

                        suggestedAcTableModel.removeRow(i);
                    }
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:25:10.167

如果您想在每一列中搜索该值，然后在找到该值时删除整行，请参见下文。

```
for (int i = 0; i < suggestedAcTableModel.getRowCount(); i++) {
    for(int j = 0; j < suggestedAcTableModel.getColumnCount(); j++){
        String acNameStr = suggestedAcTableModel.getValueAt(i, j).toString();
        if (acNameStr.equals(acName)) { 
           suggestedAcTableModel.removeRow(i);
           j = suggestedAcTableModel.getColumnCount();
           i--;
        }
    }
} 
```

# java - 我应该何时覆盖 toString()？

> ID：13867269
> 
> 赞同：10
> 
> 时间：2012-12-13T19:46:39.150
> 
> 标签：java

我知道[Javadocs 说](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)：

> 返回对象的字符串表示形式。通常，toString 方法返回一个“以文本方式表示”该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于人们阅读。建议所有子类重写此方法。

`toString`但是我什么时候应该花时间为我的课程重写方法呢？它应该是我与覆盖`equals`和一起做的第一件事`hashCode`吗？还是我应该等到真正需要它？

我知道 Eclipse 可以`toString`为你自动生成方法，所以一旦我知道我的类的字段，我是否应该让 Eclipse 自动生成它们？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T19:55:37.780

Josh Bloch 在[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)的第 10 项中给出了很好的解释。

> [...] 提供一个好的 toString 实现会让你的类使用起来更加愉快。

它确实使输出调试跟踪变得更容易，或者产生更好的日志消息，因为您可以使用`toString()`直接提供的对象的字符串表示；您不必手动构建提供对象所需信息的字符串。

如书中所述，您应该在结果中包含所有有趣的信息`String`。您还应该正确记录您的方法；您可以记录`String`或不记录生成的格式，但您至少应该记录您的意图（格式是否会更改或不太可能更改）。

最后，由您（以及您公司的标准）决定是否在每个课程中覆盖它应该成为您习惯的一部分。就个人而言，我不会`toString ()`在每个类中都覆盖，只在那些最有可能在调试跟踪中使用的类中覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:21:11.593

我会`toString()`在任何持有`human understandable non confidential data`. 例如：传输对象、Beans、数据对象、包装器。对于这样的类，只需继续实现 'toString()' 方法。

表示服务的类，具有瞬态的进程不需要实现该方法。在这里，您可以等到真正需要它。

确保不要在“toString()”中使用“transient”关键字公开任何变量！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:50:28.753

通常，当我想指定显示对象的默认格式时，我会覆盖它，通常会格式化相关属性的紧凑/可消化显示。这样我就可以简单地，例如，通过执行以下操作在调试或日志中显示它：

```
MyClass myClsInst = new MyClass();
...
System.out.println(myClsInst); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-20T14:52:40.860

通常，它用于显示或查看对象具有的内容。

例如，假设有一个 Student 类并且您创建了对象。

学生班级有年龄、年级、gpa、姓名、国家、地址。

```
class Student{
    private int age;
    private int grade;
    private double gpa;
    private String name;
    private String country;
    private String address;

    Student(...){
       // ...
    }

    public String toString(){
        String str = "age is "+age+ ", grade is " + grade + ...
        return str;
    }
} 
```

你创建了 A 学生和 B 学生（也许还有更多）

你只需要'toString()'来检查它的内部，如下所示：

```
System.out.println(aStudent.toString());
System.out.println(bStudent.toString()); 
```

或者您可以只写对象名称，它会自动调用“toString()”

```
System.out.println(aStudent);
System.out.println(bStudent); 
```

它消除了多余的工作并更快。

然后，你会看到这样的：

```
Output:
age is 13, grade is 3, ...
age is 15, grade is 5, ... 
```

当您在调试时看到 A 学生或 B 学生有什么时，它很有用。

而且，当您制作自己的 JSON 格式时，它也很有用。

使用 JSON 格式操作其数据会更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-20T14:41:52.517

我试图以简单的方式进行演示。

```
package com.web.doamin;

public class User {

    String name;

    long id;

    /*@Override
    public String toString() {
        return "User [user = " + name + ", id="+ id + "]"; 
    }*/
    public static void main(String[] args) {
        User user = new User();
        System.out.println(" : user : " + user );
    }
} 
```

> > 如果我们没有覆盖 toString() 方法，我们将在 sysout 中获得对象哈希代码
> > 
> > **没有覆盖 toString()**方法的O/P - com.web.doamin。**用户@7852e922**
> > 
> > 如果我们**重写 ToString()**方法，我们将得到 O/P - **User [user = null, id=0]**

**注意**-*当在 System.out.println() 中使用对象时，我们会得到正确的输出，因此重写 toString() 是个好主意；*

# python - 在 Python 3.3 中从字符串创建列表

> ID：13867274
> 
> 赞同：1
> 
> 时间：2012-12-13T19:46:53.050
> 
> 标签：python, python-3.x

我有一个这样的字符串（有 n 个元素）：

```
input = 'John, 16, random_word, 1, 6, ...' 
```

如何将其转换为这样的列表？我想用“，”作为分隔符。

```
output = [John, 16, random_word, 1, 6, ...] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T19:55:05.063

您可以使用`input.split(',')`，但正如其他人所指出的那样，您必须处理前导和尾随空格。可能的解决方案是：

*   没有正则表达式：

    ```
    In [1]: s = 'John, 16, random_word, 1, 6, ...'

    In [2]: [subs.strip() for subs in s.split(',')]
    Out[2]: ['John', '16', 'random_word', '1', '6', '...'] 
    ```

    我在这里所做的是使用[列表推导](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)`s.split(',')`，在其中我创建了一个列表，其元素是通过调用它们的方法从字符串组成的[`strip`](http://docs.python.org/3/library/stdtypes.html#str.strip)。这相当于

    ```
    strings = []
    for subs in s.split(','):
        strings.append(subs)
    print(subs) 
    ```

*   使用[正则表达式](http://docs.python.org/library/re.html)：

    ```
    In [3]: import re

    In [4]: re.split(r',\s*', s)
    Out[4]: ['John', '16', 'random_word', '1', '6', '...'] 
    ```

另外，尽量不要`input`用作变量名，因为这样会隐藏[内置函数](http://docs.python.org/3.3/library/functions.html#input)。

您也可以仅`split`on `', '`，但您必须绝对确保逗号后始终有一个空格（考虑换行符等）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T19:52:45.107

你的意思是`output = ['John', '16', 'random_word', '1', '6', ...]`？你可以像`output = inpt.split(', ')`. 这也删除了 . 之后的空格`,`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:37:02.403

使用拆分功能。

```
output = input.split(', ') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T19:49:16.920

如果我理解正确，只需执行以下操作：

```
output = input.split(',') 
```

之后您可能需要修剪每个结果字符串，因为`split`不关心空格。

问候， 马特

# asp.net - 如何在 aspx 页面中将 string.format 与 eval 一起使用？

> ID：13867275
> 
> 赞同：1
> 
> 时间：2012-12-13T19:46:57.860
> 
> 标签：asp.net, eval

我的网页中有一个中继器，如下所示

```
<asp:Repeater runat="server" ID="AccountScrollRepeater" onitemdatabound="AccountRepeater_ItemDataBound">
<ItemTemplate>
    <tr class="primary-BL2" style="text-align:left">
        <td style="width:70px"><asp:Label runat="server" ID="AccountNoLabel" Text='<%# Eval("AccountNo") %>'></asp:Label></td>
        <td style="width:40px"><asp:HyperLink runat="server" ID="CustomerHyperLink" NavigateUrl="" Text='<%# Eval("CustId") %>' Enabled="false"></asp:HyperLink></td>
        ...
    </tr>
</ItemTemplate> 
```

我想将 CustomerHyperLink 的 NavigateUrl 设置为以下表达式，

```
string.Format(AppSetting.Instance.GetSearchDetailUrl(SearchTypeEnum.Customer), '<%# Eval("CustNo") %>'); 
```

我的问题不是在后面的代码中设置 NavigateUrl，而是如何将它放在 aspx 页面中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T20:49:17.173

开始了

```
NavigateUrl ='<%# String.Format (AppSetting.Instance.GetSearchDetailUrl(SearchTypeEnum.Customer), Eval("intSMCID")) %>'; 
```

# macos - 从 https 站点获取证书

> ID：13867276
> 
> 赞同：2
> 
> 时间：2012-12-13T19:46:59.227
> 
> 标签：macos, ssl, https, vpn

我需要为我公司的 vpn 站点获取站点证书，以便我可以使用它来设置 OS X 内置的 cisco 客户端。

我可以在 Chrome 和 Safari 的锁定图标下展开证书，但我无法从那里提取它。我尝试通过钥匙串访问进行搜索，但它不在那里。该证书位于浏览器中的 Go Daddy CA 下，但无法在 Keychain 中扩展它以获取派生证书。

关于如何获取此证书的副本（甚至只是它包含的公钥）的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:50:34.133

Firefox 可以下载它们。以同样的方式暴露它，然后选择导出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T12:20:35.130

您也可以在 Chrome 中导出，单击锁，选择连接选项卡，选择认证信息，选择详细信息，然后单击“复制到文件”按钮。真的很容易找到！

问候， 瓦西里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:52:29.600

它通常真的很容易。
我不使用这些浏览器，但在 IE 中，它在（显示的证书的）第二个选项卡中有该选项`Copy to File`，您可以将其保存为`der`或`pem`. 在`View Certificate`->`Details`选项卡中的 Firefox 中有一个`Export Button`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-30T16:23:19.347

使用 portecle 工具 ....单击选项检查 ssl 并提供您的主机名并尝试保存 pem ...您将获得证书

# python - Python string.replace 替代

> ID：13867282
> 
> 赞同：0
> 
> 时间：2012-12-13T19:47:18.167
> 
> 标签：python, string

我需要 Python 字符串操作方面的帮助（我将之前的 looong 问题归结为下面的这个问题）。

对于文件中的这一行：

```
L20B, CVS=1, HTYP=16, MLV=25 
```

第二个字段可以是 CVS 或 VS。相关数据将一直显示到行尾。

需要将 CVS 或 VS 开头的部分替换为另一个字符串：

```
if CVS found, then replacement is CFIXD(0,1,0) -OR-
if VS found, then replacement is FIXD(0,1,0) 
```

例子：

```
old line: L20B, CVS=1, HTYP=16, MLV=25
new line: L20B, CFIXD(0,1,0)

Old line: T10, M312, P10, Z3710, CL=L1, RH=1  (here, identify RH only and replace with)
New line: T10, M312, P10, Z3710, CL=L1, FIXD(0,1,0)

Old line: T20, M312, P20, Z100, CKR=10000 DV(0,1,0) 
New line: T20, M312, P20, Z100, CLS(0,1,0), MU=0.35

So, the replacement string keeps changing with what is found.
CVS or VS (till end of line) is replaced with CFIXD(0,1,0) or FIXD(0,1,0)
CRH or RH (till end of line) is replaced with CVR(0,1,0) or VR(0,1,0)
CFIXD or FIXD (till end of line) is replaced with CVR(0,1,0) or VR(0,1,0)
20 other variants.

Also, is it possible to modify the re.sub() expression to identify something in the search string and carry it over to the replacement string?
For e.g., 
Search for CFIXD(x,y,z) - replace with CVR (x,y,z) 
```

我无法搜索确切的子字符串（“CVS=1，HTYP=16，MLV=25”），因为 CVS（或 VS）之后的数据可能有许多不同的变体，例如

```
CVS=2, HTYP=11, MLV=25 
VS=4, HTYP=9, MLV=5      etc. 
```

您可以看到的长度也可能不同。我唯一确定的是，以 CVS 或 VS 开头的字符串一直到该行的末尾。据我所知，由于上述不同的长度和数据，string.replace 将不起作用。

任何现成的 Python 方法？还是我必须编写一个小程序来做到这一点？我可以找到 VS 或 CVS 的索引（使用 string.find），然后替换从该点到行尾的所有内容，是吗？我知道有一种简单的（不适合我）正则表达式方式。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:53:32.587

使用正则表达式：

```
import re
re.sub(r'(C|)VS=.*', r'\1FIXD(0,1,0)', line) 
```

解释：

```
# regex
  (C|)         # optionally match a 'C', save it or an empty string in group 1
  VS=          # match 'VS='
  .*           # match to the end of the line

# replacement
  \1           # the contents of group 1 (either 'C' or an empty string)
  FIXD(0,1,0)  # the literal string 'FIXD(0,1,0)' 
```

例子：

```
>>> re.sub(r'(C|)VS=.*', r'\1FIXD(0,1,0)', 'L20B, CVS=1, HTYP=16, MLV=25')
'L20B, CFIXD(0,1,0)'
>>> re.sub(r'(C|)VS=.*', r'\1FIXD(0,1,0)', 'L20C, VS=4, HTYP=9, MLV=5')
'L20C, FIXD(0,1,0)' 
```

**编辑：**根据您的编辑，这里有一些针对您不同情况的替代方案：

*   CVS 或 VS -> CFIXD(0,1,0) 或 FIXD(0,1,0)

    ```
    re.sub(r'(C|)VS=.*', r'\1FIXD(0,1,0)', line) 
    ```

*   CRH 或 RH -> CVR(0,1,0) 或 VR(0,1,0)

    ```
    re.sub(r'(C|)RH=.*', r'\1VR(0,1,0)', line) 
    ```

*   CFIXD(x,y,z) 或 VIXD(x,y,z) -> CVR(x,y,z) 或 VR(x,y,z)

    ```
    re.sub(r'(C|)FIXD(\([^)]*\)).*', r'\1VR\2', line) 
    ```

解释`(\([^)]\)).*`：

```
(         # start second capture group
   \(       # match a literal '('
   [^)]*    # match any number of characters that are not ')'
   \)       # match a literal ')'
)         # end capture group
.*        # match to the end of the line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:03:21.063

您可以使用正则表达式，但对我来说，将字符串拆分为列表会更直接：

```
line = "L20B, CVS=1, HTYP=16, MLV=25"

line = line.split(", ")
if line[1].startswith("CVS="):
    line[1:] = ["CFIXD(0,1,0)"]
elif line[1].startswith("VS="):
    line[1:] = ["FIXD(0,1,0)"]

line = ", ".join(line) 
```

这两种情况可以结合一些 jiggery-pokery，因为它们非常相似，但它们看起来完全可读。

# php - mysql与php在表中添加一行

> ID：13867284
> 
> 赞同：0
> 
> 时间：2012-12-13T19:47:25.427
> 
> 标签：php, mysql, sql, triggers, procedure

我非常困惑为什么这不起作用，因为它适用于我的另一张桌子。

这是程序：

```
CREATE PROCEDURE dodaj_ubezpieczenie
         (do_nazwa_ubezpieczenia     VARCHAR(30),
 do_wysokosc_ubezpieczenia   decimal(4,2)
 )
MODIFIES SQL DATA
BEGIN
INSERT INTO ubezpieczenia
(nazwa_ubezpieczenia,wysokosc_ubezpieczenia)
VALUES
(do_nazwa_ubezpieczenia,do_wysokosc_ubezpieczenia);
END$$ 
```

程序适用于示例：

```
call dodaj_ubezpieczenie('lol',5); 
```

这是脚本：

```
<?php
error_reporting(E_ALL|E_NOTICE);
$nazwabazydanych = "projekt";

$nazwa_ubezpieczenia = mysql_real_escape_string($_POST['nazwa_ubezpieczenia']);
$wysokosc_ubezpieczenia = mysql_real_escape_string($_POST['wysokosc_ubezpieczenia']);  

if (!$nazwa_ubezpieczenia || !$wysokosc_ubezpieczenia)

 {
        print "Nie zostały wypełnione wszystkie pola";
        exit;
 }

$db = mysql_pconnect("localhost", "root", "");
if (!$db)  
        {  
        print "Nie można nawiązać połączenia z bazą danych";
        exit;
        }

mysql_select_db("$nazwabazydanych");

$query = mysql_query("CALL dodaj_ubezpieczenie ('$nazwa_ubezpieczenia','$wysokosc_ubezpieczenia')"); 

?> 
```

它的用途：

```
<form action="ubezp.php" method="post">
Nazwa ubezpieczenia: <input type="text" name="nazwa_ubezpieczenia" maxlength=30 size=31><br><br> 
Wysokość ubezpieczenia: <input type="text" name="wartosc_ubezpieczenia" maxlength=6 size=8><br><br>
<input type="submit" value="Dodaj ubezpieczenie">
</form> 
```

最后是错误：

```
Notice: Undefined index: wysokosc_ubezpieczenia in C:\xampp\htdocs\proj\ubezp.php on line 6
Nie zostały wypełnione wszystkie pola 
```

我真的，真的很困惑这里有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:53:40.050

似乎只是拼写错误？

`$wysokosc_ubezpieczenia = mysql_real_escape_string($_POST['wysokosc_ubezpieczenia']);`

应该

`$wysokosc_ubezpieczenia = mysql_real_escape_string($_POST['wartosc_ubezpieczenia']);`

# math - 检测 2D 移动物体何时穿过自己的路径？

> ID：13867289
> 
> 赞同：3
> 
> 时间：2012-12-13T19:47:43.113
> 
> 标签：math

如何检测 2D 移动对象何时越过自己的路径？ ![在此处输入图像描述](../Images/499e20d31a9ab5d580570544981e6bcb.png)

我将路径存储为基于平面先前位置的点数组。
可以使用伪代码或任何编程语言来描述解决方案。

这是我已经尝试过的代码 - 它检测到完整的 360 度循环。我想我需要一种不同的方法。

```
 CGFloat angleDiff = angleCurr - lastAngleRecorded;
    lastAngleRecorded = angleCurr;

    // Ensure -180 < angleDiff < 180
    angleDiff = angleDiff > M_PI ? angleDiff - (M_PI*2) : angleDiff;
    angleDiff = angleDiff < -M_PI ? angleDiff + (M_PI*2) : angleDiff;

    // Reset tracking of the loop of the plane's angle exceeds (turns too sharply) or falls below the limits

    if(fabsf(angleDiff) < angleDiffMinAllowed || fabsf(angleDiff) > angleDiffMaxAllowed) {
        if(++ringFaultCount >= ringFaultCountMax) {
            [self resetTracking];
            return;
        }
    }

    ringFaultCount = 0;

    // Add plane position to ring polygon
    [ringPoints addObject:[NSValue valueWithCGPoint: ccp(targetPlane.position.x, targetPlane.position.y)]];

    // Add angleDiff to angleTotal
    angleTotal += angleDiff;

    // Completed loop?
    if(fabsf(angleTotal) >= M_PI * 2.f) {

        [self resetTracking];

        if(isRingJoined){
            CCLOG(@"%@ RING COMPLETE", NSStringFromSelector(_cmd));
        }

        return;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:20:58.510

我也有这个问题，我通过在坐标系中画一条直线来解决它：

```
y = mx+q±­tolerance 
```

让我解释一下：这条线是曲线在您检查是否存在碰撞的点处的切线，这是“飞机”在该点所遵循的线。容差将使线向上移动一点，也向下移动一点。所以你得到 2 条平行线，女巫可以被视为边界。您还必须在 x 轴上设置公差

m是线的方向，它的：tan(angle)，角度就是与x轴的夹角。

如果所有这些都设置好了，那么您必须这样做：

```
if(y_point < mx+q+tolerance && y_point> mx+q-tolerance && x_points > x-tolerance && x_point< x+tolerance
{
// some code
} 
```

# javascript - 在 HTML 中调用 Google Apps 脚本函数

> ID：13867291
> 
> 赞同：1
> 
> 时间：2012-12-13T19:47:48.497
> 
> 标签：javascript, google-apps-script, google-sheets

我执教一个运动队并为它建立了一个网站。我想在管理页面中添加一个按钮，我可以单击该按钮快速向团队中的每个人发送电子邮件。这封电子邮件的内容类似于：“今天的日程安排已更改，请访问网站了解更多信息。”

我相信这可以通过 Outlook 中的分发列表或其他东西更容易实现，但我想使用并更好地理解 Google Apps 脚本。

我有一个带有电子邮件地址的 Google 电子表格和一个发送电子邮件的简单脚本函数。

当我单击以在脚本编辑器中运行它时，这很有效，但是有没有办法从外部网站使用按钮和一些 JavaScript 调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:27:47.200

您需要创建一个可以嵌入到您的站点中的 Google UI 对象 - 您将通过创建一个将部署为 Web 应用程序的脚本来做到这一点。（请参阅[Google Apps 脚本 - Web 应用程序](https://developers.google.com/apps-script/execution_web_apps)。）该对象将包含一个按钮，该按钮将调用您现有的脚本函数来发送电子邮件。

发布您的 Web 应用程序以像您一样执行。对于您的具体情况，您还希望能够访问仅限于您的应用程序。这意味着您创建的 UI Blob 将无法为公众使用。这是非常不完整的，但会生成一个带有单个按钮的 blob，它将触发您的脚本：

```
function doGet() {
  var app = UiApp.createApplication();

  var button = app.createButton('Send Schedule Change Email');
  app.add(button);

  var handler = app.createServerHandler('myClickHandler');
  button.addClickHandler(handler);

  return app;
}

function myClickHandler(e) {
  var app = UiApp.getActiveApplication();

  // Call your library function, e.g.
  TeamSpreadsheet.sendScheduleChanged();

  var label = app.createLabel('Message Sent')
                 .setId('statusLabel')
                 .setVisible(false);

  label.setVisible(true);

  app.close();
  return app;
} 
```

您的网络应用程序将需要访问您现有的脚本，我假设该脚本嵌入在您的电子表格中。这是通过首先保存现有脚本的版本（文件 - 管理版本），然后将其作为库添加到新的 Web 应用程序脚本（资源 - 管理库）来完成的。[在此处](http://googleappsdeveloper.blogspot.ca/2012/05/introducing-versions-and-libraries-in.html)阅读有关库的更多信息。由于您的网络应用程序将以您的身份运行，因此您可以将电子表格保密。

**注意事项**

您库中的实用程序脚本将需要以一种可以在工作表外部工作的方式打开您的电子表格；使用[SpreadsheetApp.openById()](https://developers.google.com/apps-script/class_spreadsheetapp.html#openById)，而不是 SpreadsheetApp.getActiveSpreadsheet()。不幸的是，当您使用它打开主机电子表格时，openById 会呕吐，所以您需要这样的东西：

```
 var ss = null;
  try {
    // This works for scripts running in the host spreadsheet
    ss = SpreadsheetApp.getActiveSpreadsheet();
  } catch(err) {
    try {
      // This works for web apps
      ss = SpreadsheetApp.openById("SPREADSHEET ID");
    } catch(err) {
      Logger.log("Could not open source spreadsheet.");
      // Well, then, not much sense carrying on, is there?
      return;
    }
  }
  SpreadsheetApp.setActiveSpreadsheet(ss);
  ... 
```

事实上，请注意任何依赖从“活动”对象获取信息的调用。你可能需要做一些体操来绕过它们。

我发现调试这种类型的安排很痛苦，因为当您尝试跟踪库例程时，应用程序脚本调试器经常报告“服务器错误”。

我希望这可以帮助您入门！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:31:13.820

作为对 Mogsdad 回答的补充（这非常完整且有趣），我想说您的案例可能会更简单一些，因为您已经有了一个工作脚本。

使用您的脚本并添加一个`doGet()`类似 Mogsdad 示例的函数，在按钮上定义一个处理程序，该处理程序将调用您编写的现有函数来发送邮件，在此函数中替换`getActiveSpreadsheet()`by`SpreadsheetApp.OpenById("the ID of the SS")`和`getActiveSheet()`by `OpenByName()`，您就完成了修改。

之后按照 Mogsdad 的说明：将脚本部署为像您一样运行的 web 应用程序，并使用提供的 url 从您网站上的链接访问它。

如果您不想冒任何风险，请在原始电子表格的副本上进行所有这些更改，这样您就可以随时掌握工作模型。如果您想要更准确的建议（或者如果您遇到一些困难），请随时展示您现有的脚本以获得一些修改帮助。

*PS：请将此视为一个简单的评论，写在答案中以方便格式化*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T11:07:41.740

只需将您的脚本发布为 Web 应用程序，然后单击按钮，执行：

```
window.open("https://script.google.com/macros/s/<id>/exec"); 
```

不知道一年前这是否可行。

# ios - 用于游戏开发的 RubyMotion

> ID：13867293
> 
> 赞同：1
> 
> 时间：2012-12-13T19:47:51.933
> 
> 标签：ios, ruby, rubymotion

RubyMotion 如何适合 iOS 游戏开发？

我无法在文档中找到 CoreAnimation 主题，但我听说有人能够将 cocos-2d 与 RubyMotion 一起使用。

如果您有一些有用的信息愿意分享，我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:58:36.273

如果您愿意完全以编程方式对游戏进行编程，RubyMotion 是一个不错的选择。性能没有明显下降，每个 C 库和 API 都可用于 RubyMotion。使用motion-cocoapods，您甚至可以包含CocoaPods，还可以包含Objective-C 库。

您可能遇到的一个问题是缺少 RubyMotion 特定的游戏教程和文档。

编辑：我成功（在帮助下）在 RubyMotion 中重新创建了 Sparrow 游戏引擎演示：

[https://github.com/jamonholmgren/demo-sparrow](https://github.com/jamonholmgren/demo-sparrow)

它运行得很漂亮。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-16T09:04:01.593

你可以试试 JoyBox，它结合了流行的 iOS 2D 游戏引擎 Cocos2D，与 Box2D 物理引擎折叠，并包装到 Ruby API 中。Joybox 可以[在 github 上的这个链接上](https://github.com/rubymotion/Joybox)找到。

# python - 使用python清理大数据

> ID：13867294
> 
> 赞同：6
> 
> 时间：2012-12-13T19:47:51.580
> 
> 标签：python, pandas

我必须在 python 中清理输入数据文件。由于拼写错误，数据字段可能包含字符串而不是数字。我想识别所有作为字符串的字段，并使用熊猫用 NaN 填充这些字段。另外，我想记录这些字段的索引。

最粗略的方法之一是遍历每个字段并检查它是否为数字，但是如果数据很大，这会消耗大量时间。

*我的 csv 文件包含类似于下表的数据：*

```
Country  Count  Sales
USA         1   65000
UK          3    4000
IND         8       g
SPA         3    9000
NTH         5   80000 
```

.... 假设我在数据中有 60,000 行这样的行。

理想情况下，我想确定行 IND 在 SALES 列下具有无效值。关于如何有效地做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T20:49:59.170

有一个`na_values`论点[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)：

> `na_values`: list-like or dict, default`None`
>        识别为 NA/NaN 的附加字符串。如果 dict 通过，特定的每列 NA 值

```
df = pd.read_csv('city.csv', sep='\s+', na_values=['g'])

In [2]: df
Out[2]:
  Country  Count  Sales
0     USA      1  65000
1      UK      3   4000
2     IND      8    NaN
3     SPA      3   9000
4     NTH      5  80000 
```

使用[`pandas.isnull`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.isnull.html#pandas.Series.isnull)，您可以仅选择列中具有 NaN 的那些行`'Sales'`或`'Country'`系列：

```
In [3]: df[pd.isnull(df['Sales'])]
Out[3]: 
  Country  Count  Sales
2     IND      8    NaN

In [4]: df[pd.isnull(df['Sales'])]['Country']
Out[4]: 
2    IND
Name: Country 
```

*如果它已经在 DataFrame 中，您可以使用[`apply`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html#pandas.DataFrame.apply)将这些数字字符串转换为整数（使用[`str.isdigit`](http://docs.python.org/2/library/stdtypes.html#str.isdigit)）：*

```
df = pd.DataFrame({'Count': {0: 1, 1: 3, 2: 8, 3: 3, 4: 5}, 'Country': {0: 'USA', 1: 'UK', 2: 'IND', 3: 'SPA', 4: 'NTH'}, 'Sales': {0: '65000', 1: '4000', 2: 'g', 3: '9000', 4: '80000'}})

In [12]: df
Out[12]: 
  Country  Count  Sales
0     USA      1  65000
1      UK      3   4000
2     IND      8      g
3     SPA      3   9000
4     NTH      5  80000

In [13]: df['Sales'] = df['Sales'].apply(lambda x: int(x) 
                                                  if str.isdigit(x)
                                                  else np.nan)

In [14]: df
Out[14]: 
  Country  Count  Sales
0     USA      1  65000
1      UK      3   4000
2     IND      8    NaN
3     SPA      3   9000
4     NTH      5  80000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T20:17:04.803

```
import os
import numpy as np
import pandas as PD

filename = os.path.expanduser('~/tmp/data.csv')
df = PD.DataFrame(
        np.genfromtxt(
            filename, delimiter = '\t', names = True, dtype = '|O4,<i4,<f8'))
print(df) 
```

产量

```
 Country  Count  Sales
0     USA      1  65000
1      UK      3   4000
2     IND      8    NaN
3     SPA      3   9000
4     NTH      5  80000 
```

并找到有`NaN`销售额的国家，你可以计算

```
print(y['Country'][np.isnan(y['Sales'])]) 
```

这产生`pandas.Series`：

```
2    IND
Name: Country 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:03:11.840

尝试将 'sales' 字符串转换为 a `int`，如果格式正确，则继续，如果不是，它将引发`ValueError`我们捕获并替换为占位符的 a 。

```
bad_lines = []

with open(fname,'rb') as f:
    header = f.readline()
    for j,l in enumerate(f):
        country,count,sales = l.split()
        try:
            sales_count = int(sales)
        except ValueError:
            sales_count = 'NaN'
            bad_lines.append(j)
        # shove in to your data structure
        print country,count,sales_count 
```

您可能需要编辑分割行的行（因为您的示例复制为空格，而不是制表符）。用您想要对数据执行的操作替换打印行。您可能还需要使用 pandas NaN 来替换“NaN”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T23:56:51.157

```
filename = open('file.csv')
filename.readline()

for line in filename:
    currentline = line.split(',')
    try:
        int(currentline[2][:-1])
    except:
        print currentline[0], currentline[2][:-1] 
```

指数克

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T00:03:12.830

我建议使用正则表达式：

```
import re

ss = '''Country  Count  Sales
USA   ,      3  , 65000
UK    ,      3  ,  4000
IND   ,      8  ,     g
SPA   ,     ju  ,  9000
NTH   ,      5  , 80000
XSZ   ,    rob  ,    k3'''

with open('fofo.txt','w') as f:
    f.write(ss)

print ss
print

delimiter = ','

regx = re.compile('(.+?(?:{0}))'
                  '(( *\d+?)| *.+?)'
                  '( *(?:{0}))'
                  '(( *\d+?)| *.+?)'
                  '( *\r?\n?)$'.format(delimiter))

def READ(filepath, regx = regx):
    with open(filepath,'rb+') as f:
        yield f.readline()
        for line in f:
            if None in regx.match(line).group(3,6):
                g2,g3,g5,g6 = regx.match(line).group(2,3,5,6)
                tr = ('%%%ds' % len(g2) % 'NaN' if g3 is None else g3,
                      '%%%ds' % len(g5) % 'NaN' if g6 is None else g6)
                modified_line = regx.sub(('\g<1>%s\g<4>%s\g<7>' % tr),line)
                print ('------------------------------------------------\n'
                       '%r with aberration\n'
                       '%r modified line'
                       % (line,modified_line))
                yield modified_line
            else:
                yield line

with open('modified.txt','wb') as g:
    g.writelines(x for x in READ('fofo.txt')) 
```

结果

```
Country  Count  Sales
USA   ,      3  , 65000
UK    ,      3  ,  4000
IND   ,      8  ,     g
SPA   ,     ju  ,  9000
NTH   ,      5  , 80000
XSZ   ,    rob  ,    k3

------------------------------------------------
'IND   ,      8  ,     g\r\n' with aberration
'IND   ,      8  ,   NaN\r\n' modified line
------------------------------------------------
'SPA   ,     ju  ,  9000\r\n' with aberration
'SPA   ,    NaN  ,  9000\r\n' modified line
------------------------------------------------
'XSZ   ,    rob  ,    k3' with aberration
'XSZ   ,    NaN  ,   NaN' modified line 
```

# eclipse - 如何在 Eclipse 中清除窗口历史记录

> ID：13867295
> 
> 赞同：2
> 
> 时间：2012-12-13T19:47:53.050
> 
> 标签：eclipse

现在我在 Eclipse 中遇到了这个问题，我打开了一个非常大的 XML 文件，它几乎使 Eclipse 崩溃。但是，这个正在打开的文件保存在我的窗口历史记录中，因此我重新启动 eclipse，它会尝试再次打开这个大文件。如何清除eclipse中打开的窗口历史记录？

我宁愿不必完全清除我的工作区，因为我有我想要保留的 mylyn 数据。我试过使用 Eclipse clean 但这似乎没有做任何与打开的窗口相关的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T02:36:15.193

您的工作台信息保存在您工作区的此文件中：

```
.metadata/.plugins/org.eclipse.ui.workbench/workbench.xml 
```

或取决于您的 Eclipse 版本：

```
.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi 
```

您可以删除它，eclipse 将重新创建文件，您也可以尝试编辑它，但它是一个大文件，可能很难...删除此文件所有工作台相关设置都将丢失，但您的项目保持不变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-21T14:24:34.777

转到首选项并搜索“工作区”。您将看到可以删除的工作区列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:18:33.560

一些替代方案：移动或重命名攻击性文件，以便 eclipse 无法打开它。File->Switch Workspace->Other 加载复制工作台布局的新工作区。

只是一些想法，我的经验是关闭一个文件，然后程序意味着程序一旦再次启动就不会尝试打开文件。

# jquery - Jquery - 将点击事件处理程序添加到 由自动完成生成的

> ID：13867301
> 
> 赞同：2
> 
> 时间：2012-12-13T19:48:11.303
> 
> 标签：jquery, event-handling

我正在使用 jQuery 自动完成脚本将字符串值传递给我的数据库，该数据库以 json 格式返回数据。通过查看萤火虫，我可以在自动完成中单击的项目是具有样式的列表项，以删除项目符号并使其更漂亮。

我的问题是我想触发一个单击事件来捕获我选择的列表项。

```
$("#group_name").autocomplete('@Url.Action("LookUpGroupName", "UserManager")',
                    {
                        dataType: 'json',
                        parse: function (data) {
                            var rows = new Array();
                            for (var i = 0; i < data.length; i++) {
                                rows[i] = {
                                    data: data[i],
                                    value: data[i].group,
                                    result: data[i].group
                                }
                            }
                            return rows;

                        },
                        formatItem: function (row, i, max) { // loop returns autocomplete items
                            return row.group;
                        },
                        width: 300,
                        multiple: false
                    });              // End of autocomplete

$(document).ready(function () {
        chkSelection();

        $(".ac_results li").click(function (event) {
            alert($(this).text());
        });
    }); 
```

**这是从我的自动完成 javascript 生成的 html**

```
<div style="display: block; position: absolute; width: 300px; top: 437.9px; left: 103.65px;" class="ac_results">
    <ul style="max-height: 180px; overflow: auto;">
        <li class="ac_even">118 Medi<strong>a</strong> ltd</li>
        <li class="ac_odd">2CV Rese<strong>a</strong>rch ltd</li>
        <li class="ac_even">7digit<strong>a</strong>l</li <li class="ac_odd">
        <strong>A</strong> br<strong>a</strong>nd<strong>a</strong>p<strong>a</strong>rt television ltd</li>
        <li class="ac_even"><strong>A</strong> Tout Fr<strong>a</strong>nce</li>
        <li class="ac_odd"><strong>A</strong>bb<strong>a</strong> Blinds</li>
        <li class="ac_even"><strong>A</strong>berdeen Journ<strong>a</strong>ls</li>
        <li class="ac_odd"><strong>a</strong>cc suspended <strong>A</strong>LF connect <strong>A</strong>lw<strong>a</strong>ys on Mess<strong>a</strong>ge</li>
        <li class="ac_even ac_over"><strong>A</strong>ccount suspended South West Medi<strong>a</strong> Group</li>
        <li class="ac_odd"><strong>A</strong>ctive Intern<strong>a</strong>tion<strong>a</strong>l</li>
    </ul>
    </div> 
```

我不确定我的代码是否清楚我想在单击列表项时触发一个事件。

![截屏](../Images/009a5d5695c06a4041dfe750043d676b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T19:50:42.793

在 jQuery 1.8 + 中使用事件委托

```
$(document).on('click','.ac_results li',function(){blaa,blaa,blaa}); 
```

当您添加处理程序时，这允许该项目不存在。

替换`document`为您的代码运行时肯定存在的最接近的父元素。

[jQuery .on()](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:54:54.500

要扩展@Bluetoft 答案：如果您有多个事件，则可以像这样委托映射对象：

```
$('.ac_results').on({
  click : function(){alert($(this).text()}, 
  mouseleave : function(){ //etc...} 
}, 'li'); 
```

我通常更喜欢这种语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T08:57:16.190

最好的决定是将属性 methodChain 放在小部件调用的末尾：

```
`<?php $this->widget('CAutoComplete', array(
        'model'=>$model,
        'name'=>'name',
        'url'=>array('url'),
        'minChars'=>2,
        'methodChain'=>".result(function() { someFunction(); })",
    )); ?>` 
```

其中 comFunction() 是单击自动完成结果列表时调用的函数。

# css - 将 ValidationSummary MVC3 显示为“警报错误”引导程序

> ID：13867307
> 
> 赞同：58
> 
> 时间：2012-12-13T19:48:28.510
> 
> 标签：css, asp.net-mvc, twitter-bootstrap, validationsummary

我想展示一个带有“alert-error”引导样式的 ValidationSummary mcv3。

我正在使用 Razor 视图，并使用以下代码显示模型错误：

```
 @Html.ValidationSummary(true, "Errors: ") 
```

它生成如下 HTML 代码：

```
<div class="validation-summary-errors">
   <span>Errors:</span>
   <ul>
      <li>Error 1</li>
      <li>Error 2</li>
      <li>Error 3</li>
   </ul>
</div> 
```

我也试过这个：

```
@Html.ValidationSummary(true, "Errors:", new { @class = "alert alert-error" }) 
```

它工作正常，但没有关闭按钮（X）

它生成如下 HTML 代码：

```
<div class="validation-summary-errors alert alert-error">
   <span>Errors:</span>
   <ul>
      <li>Error 1</li>
      <li>Error 2</li>
      <li>Error 3</li>
   </ul>
</div> 
```

但引导警报应该在 div 中有这个按钮：

```
<button type="button" class="close" data-dismiss="alert">×</button> 
```

任何人都可以帮忙吗？

* * *

***这有效！- 谢谢里克 B***

```
@if (ViewData.ModelState[""] != null && ViewData.ModelState[""].Errors.Count() > 0) 
{ 
   <div class="alert alert-error"> 
      <a class="close" data-dismiss="alert">×</a> 
      <h5 class="alert-heading">Ingreso Incorrecto</h5> 
      @Html.ValidationSummary(true)
   </div>
} 
```

我还必须从“site.css”中删除类“.validation-summary-errors”，因为该样式定义了其他字体颜色和粗细。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-13T19:59:07.853

**再次编辑**

一开始我误解了你的问题。我认为以下是您想要的：

```
@if (ViewData.ModelState[""] != null && ViewData.ModelState[""].Errors.Count > 0)
{ 
    <div class="alert alert-error">
        <button type="button" class="close" data-dismiss="alert">×</button>
        @Html.ValidationSummary(true, "Errors: ")
    </div>
} 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-08-29T01:41:59.103

## 这个答案是基于 RickB 的

*   更新了最新的引导程序 ==>>~~`alert-error`~~不存在赞成`alert-danger`。

*   适用于所有验证错误，不仅是 Key String.Empty ("")

对于任何使用 Bootstrap 3 并试图获得漂亮警报的人：

```
if (ViewData.ModelState.Keys.Any(k=> ViewData.ModelState[k].Errors.Any())) { 
    <div class="alert alert-danger">
        <button class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        @Html.ValidationSummary(false, "Errors: ")
    </div>
} 
```

RickB 提供的解决方案仅适用于 (String.Empty key) 上手动添加的错误，但不适用于由 ModelState 生成的错误（通常这会首先通过 javascript 触发，但如果（例如）`Html.ValidationMessageFor`是失踪或许多其他情况。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-09-05T19:16:39.577

替代解决方案。=)

```
@if (ViewData.ModelState.Any(x => x.Value.Errors.Any())) 
{ 
   // Bootstrap 2 = "alert-error", Bootstrap 3 and 4 = "alert-danger"
   <div class="alert alert-danger alert-error"> 
      <a class="close" data-dismiss="alert">&times;</a> 
      @Html.ValidationSummary(true, "Errors: ")
   </div>
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-07-25T03:26:40.673

我不喜欢 ValidationSummary 如何使用项目符号列表（无序列表）呈现。它在错误列表下方有很多不必要的空间。

解决该问题的方法是简单地遍历错误并按照您的意愿呈现错误。我用了段落。例如：

```
@if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
{
    <div class="alert alert-danger" role="alert">
        <a class="close" data-dismiss="alert">×</a>
        @foreach (var modelError in Html.ViewData.ModelState.SelectMany(keyValuePair => keyValuePair.Value.Errors))
        {
            <p>@modelError.ErrorMessage</p>
        }
    </div>
} 
```

就我而言，结果如下所示： [![在此处输入图像描述](../Images/e0000583b377bccdd3a60ed8ffd03a8a.png)](https://i.stack.imgur.com/dBqvg.png)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-10-01T13:49:31.057

```
@Html.ValidationSummary("", new { @class = "alert alert-danger" }) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-10-16T08:39:04.783

考虑为 HtmlHelper 编写一个扩展方法，例如：

```
public static class HtmlHelperExtensions
{
    public static HtmlString ValidationSummaryBootstrap(this HtmlHelper htmlHelper)
    {
        if (htmlHelper == null)
        {
            throw new ArgumentNullException("htmlHelper");
        }

        if (htmlHelper.ViewData.ModelState.IsValid)
        {
            return new HtmlString(string.Empty);
        }

        return new HtmlString(
            "<div class=\"alert alert-warning\">"
            + htmlHelper.ValidationSummary()
            + "</div>");
    }
} 
```

然后你只需要在你的样式表中加入 ul-li 样式。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-04-24T14:02:42.520

在 MVC 5 中，`ViewData.ModelState[""]`总是返回一个空值。我不得不求助于`IsValid`命令。

```
if (!ViewData.ModelState.IsValid)
{
   <div class="alert alert-danger">
      <a class="close" data-dismiss="alert">×</a>
      <strong>Validation Errors</strong>
      @Html.ValidationSummary()
   </div>
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-21T17:50:50.520

我采取了稍微不同的路线：使用 JQuery 挂钩到表单提交：

```
$('form').each(function() {
    var theForm = $(this);
    theForm.submit(function() {
        if ($(this).valid()) {
            if ($(this).find('.validation-summary-valid').length) {
                $('.validation-summary-errors').hide();
            }
        } else {
            if ($(this).find('.validation-summary-errors').length) {
                $('.validation-summary-errors')
                    .addClass('alert alert-error')
                    .prepend('<p><strong>Validation Exceptions:</strong></p>');
            }
        }
    });
}); 
```

我在一个自动执行的 javascript 模块中设置了这个，这样它就可以连接到我创建的任何验证摘要上。

高温高压

查克

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-12-13T22:52:37.100

您可以使用 jquery：

```
$(function(){
 $('.validation-summary-errors.alert.alert-error.alert-block').each(function () {
     $(this).prepend('<button type="button" class="close" data-dismiss="alert">×</button>');
 });
}); 
```

它正在从引导程序中查找包含给定错误类的每个 div，并在 div 的开头编写 html。我正在添加`.alert-block`类，因为引导页面说：

> 对于更长的消息，通过添加 .alert-block 来增加警报包装器顶部和底部的填充。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-12-06T09:28:48.683

根据这里的答案：

```
@if (!ViewData.ModelState.IsValid)
{
    <div class="alert alert-danger">
        <button type="button" class="close" data-dismiss="alert">×</button>
        @Html.ValidationSummary(false, "Errors: ")
    </div>
} 
```

（我正在使用 Bootstrap 4）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-07-06T23:41:03.450

该解决方案使用**Sass**使其工作，但您可以使用基本的 css 实现相同的目标。为了使这项工作与客户端验证一起工作，我们不能依赖检查 ModelState，因为它假设已经发生了回发。开箱即用的 mvc 客户端验证已经使事情在正确的时间可见，所以让它做它的事情并简单地设置验证摘要中的列表项的样式，以像引导警报一样呈现。

**剃刀标记：**

```
@Html.ValidationSummary(false, null, new { @class = "validation-summary-errors-alerts" }) 
```

**萨斯**

```
.validation-summary-errors-alerts{
ul{
    margin: 0;
    list-style: none;
    li{
        @extend .alert;
        @extend .alert-danger;
    }
}} 
```

为我的项目生成的 CSS 看起来像这样 - 你的会有所不同：

```
.validation-summary-errors-alerts ul li {
min-height: 10px;
padding: 15px 20px 15px 62px;
position: relative;
border: 1px solid #ca972b;
color: #bb7629;
background-color: #fedc50;
font-family: Arial;
font-size: 13px;
font-weight: bold;
text-shadow: none;} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-09-19T18:12:34.503

**[TwitterBootstrapMVC](https://www.twitterbootstrapmvc.com/)**只用一行代码来处理这个问题：

```
@Html.Bootstrap().ValidationSummary() 
```

重要的是，为了确保它在服务器端和客户端（不显眼）验证期间的行为相同，您需要包含一个处理该问题的[javaScript 文件](https://www.twitterbootstrapmvc.com/Scripts/TwitterBootstrapMvcJs-3.0.0.js)。

您可以使用扩展方法自定义验证助手，但您认为合适。

免责声明：我是 TwitterBootstrapMVC 的作者。将它与 Bootstrap 3 一起使用需要许可证。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-11-27T20:37:08.557

纯 javascript (jQuery) 的替代解决方案。我正在使用 MVC4 + Bootstrap3，但它非常适合您。

```
$(function () {
        $(".validation-summary-errors").addClass('alert alert-danger');
        $(".validation-summary-errors").prepend('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>')
    }); 
```

如果您不想编写服务器端逻辑，那么这是一个不错的替代解决方案。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-03T16:31:05.930

扩展 Daniel Björk 的解决方案，您可以包含一个小脚本来调整`ValidationSummary()`输出中包含的 CSS。`validation-summary-errors`在我删除该类之前，生成的引导警报一直显示呈现问题。

```
@if (ViewData.ModelState.Any(x => x.Value.Errors.Any())) {
   <div class="alert alert-danger">
      <a href="#" class="close" data-dismiss="alert">&times;</a>
      <h4>Validation Errors</h4>
      @Html.ValidationSummary()
   </div>
}

<script>
$(".validation-summary-errors").removeClass("validation-summary-errors");
</script> 
```

您还可以轻松地为有错误的字段提供引导突出显示。请参阅[http://chadkuehn.com/convert-razor-validation-summary-into-bootstrap-alert/](http://chadkuehn.com/convert-razor-validation-summary-into-bootstrap-alert/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-02-11T06:49:45.493

要在 bootstrap 4 中实现相同的功能，请使用以下命令：

```
 @if (ViewData.ModelState[""] != null && ViewData.ModelState[""].Errors.Count() > 0)
        {
            <div class="col-auto alert alert-danger" role="alert">
                @Html.ValidationSummary(true)
            </div>
        } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-13T10:43:52.277

如果它需要使用客户端javascript，我建议这样做：

```
 .validation-summary-valid {
    display: none;
  } 
```

您仍然可以分配引导类

```
@Html.ValidationSummary(null, new {@class= "alert alert-danger" }) 
```

但它只会在您有实际错误时显示。

# sql - 审计 SQL Server 中存储过程的执行

> ID：13867309
> 
> 赞同：0
> 
> 时间：2012-12-13T19:48:33.440
> 
> 标签：sql, sql-server, stored-procedures, audit

我的老板和我一直在尝试看看我们可以为我们的存储过程尝试什么样的审计计划。目前有两个外部应用程序通过存储过程从我们的数据库中获取信息，我们对审计它们何时执行以及哪些值作为参数传递感兴趣。到目前为止，我所做的只是为其中一个应用程序正在使用的存储过程创建一个表，并且由于它们使用相同的输入参数，因此每个参数有一列。显然这不是最佳选择，但我们想快速了解它们是否在运行批处理以及它们何时运行。我尝试过 SQL Server Audit，但除非您在查询中执行 SP，否则它不会捕获参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:01:55.337

我没有尝试过使用它们，但您可能会查看事件通知，看看它们是否适合您。

来自 BOL

> 事件通知可用于执行以下操作：
> 
> 记录并查看数据库上发生的更改或活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:50:51.420

SQL Server Profiler 将为您执行此操作；它是免费的。设置跟踪并让它运行。

您还可以对跟踪应用相当多的过滤，因此您不需要跟踪所有内容；您还可以将输出定向到文件或 sql 表以供以后分析。这可能是您进行限时审核的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T19:51:57.827

我想我过去曾使用过 SQL Server Profiler (http://msdn.microsoft.com/en-us/library/ms181091.aspx) 来审核 SQL 执行。这不是你会一直运行的东西，但你可以获得正在运行的东西以及它是如何被执行的快照。

# android - 无法转换为 JSONObject

> ID：13867316
> 
> 赞同：0
> 
> 时间：2012-12-13T19:49:01.153
> 
> 标签：android, json

我试图[将此](http://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46?v%E2%80%8C%E2%80%8B=2&alt=json)链接解析为 JSON，但总是收到错误无法转换为 JSONOject。

我已经尝试了一些样本，将字符串转换为 JSONObject，但其中任何一个都没有运气。对于这么多数据，我不确定 Inputstream 的大小是否更小。

```
HttpClient client = new DefaultHttpClient();
        // Perform a GET request to YouTube for a JSON list of all the
        // videos by a specific user

        //URI uri_ = new URI("https://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46?v‌​=2&alt=json");
        HttpUriRequest request = new HttpGet("https://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46?v%E2%80%8C%E2%80%8B=2&alt=json");
        // Get the response that YouTube sends back
        HttpResponse response = client.execute(request);

        // Convert this response into a readable string
        String jsonString = StreamUtils.convertToString(response.getEntity().getContent());

        System.out.println("JSON:" + jsonString );

        // Create a JSON object that we can use from the String
        JSONObject json = new JSONObject(jsonString); 
```

将输入流转换为字符串的代码；

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
                    inputStream, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            inputStream.close(); 
```

输出字符串：

```
{"version":"1.0","encoding":"UTF-8","feed":{"xmlns":"http://www.w3.org/2005/Atom","xmlns$media":"http://search.yahoo.com/mrss/","xmlns$openSearch":"http://a9.com/-/spec/opensearchrss/1.0/","xmlns$gd":"http://schemas.google.com/g/2005","xmlns$yt":"http://gdata.youtube.com/schemas/2007","id":{"$t":"http://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46"},"updated":{"$t":"2012-11-22T17:11:53.000Z"},"category":[{"scheme":"http://schemas.google.com/g/2005#kind","term":"http://gdata.youtube.com/schemas/2007#playlist"},{"scheme":"http://gdata.youtube.com/schemas/2007/tags.cat","term":"Bartle"},{"scheme":"http://gdata.youtube.com/schemas/2007/tags.cat","term":"Doo"},{"scheme":"http://gdata.youtube.com/schemas/2007/tags.cat","term":"Mumbles"}],"title":{"$t":"Mumbles","type":"text"},"subtitle":{"$t":"Bartle Doo!","type":"text"},"logo":{"$t":"http://www.youtube.com/img/pic_youtubelogo_123x63.gif"},"link":[{"rel":"alternate","type":"text/html","href":"https://www.youtube.com/playlist?list=PL2B3B8DDAE8F71C46"},{"rel":"http://schemas.google.com/g/2005#feed","type":"application/atom+xml","href":"https://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46"},{"rel":"http://schemas.google.com/g/2005#batch","type":"application/atom+xml","href":"https://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46/batch"},{"rel":"self","type":"application/atom+xml","href":"https://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46?alt=json&start-index=1&max-results=25"}],"author":[{"name":{"$t":"edbassmaster"},"uri":{"$t":"https://gdata.youtube.com/feeds/api/users/edbassmaster"}}],"generator":{"$t":"YouTube data API","version":"2.1","uri":"http://gdata.youtube.com"},"openSearch$totalResults":{"$t":25},"openSearch$startIndex":{"$t":1},"openSearch$itemsPerPage":{"$t":25},"media$group":{"media$content":[{"url":"http://www.youtube.com/p/PL2B3B8DDAE8F71C46","type":"application/x-shockwave-flash","yt$format":5}],"media$description":{"$t":"Bartle Doo!","type":"plain"},"media$thumbnail":[{"url":"http://i.ytimg.com/vi/6S7zwXGBiTE/default.jpg","height":90,"width":120,"yt$name":"default"},{"url":"http://i.ytimg.com/vi/6S7zwXGBiTE/mqdefault.jpg","height":180,"width":320,"yt$name":"mqdefault"},{"url":"http://i.ytimg.com/vi/6S7zwXGBiTE/hqdefault.jpg","height":360,"width":480,"yt$name":"hqdefault"}],"media$title":{"$t":"Mumbles","type":"plain"}},"yt$playlistId":{"$t":"PL2B3B8DDAE8F71C46"},"entry":[{"id":{"$t":"http://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46/PLaFx1lHMY9-c3iy7KngIxLbSSS_9OLXMd"},"published":{"$t":"2011-07-21T15:14:04.000Z"},"updated":{"$t":"1970-01-01T00:00:00.000Z"},"category":[{"scheme":"http://schemas.google.com/g/2005#kind","term":"http://gdata.youtube.com/schemas/2007#video"},{"scheme":"http://gdata.youtube.com/schemas/2007/categories.cat","term":"Comedy","label":"Comedy"}],"title":{"$t":"Mumbles at the Bassmaster Classic","type":"text"},"content":{"$t":"My official Face Book:\r\nhttp://www.facebook.com/pages/Ed-Bassmaster/259411429706\r\n\r\nMy T Shirts:\r\nhttp://www.districtlines.com/ed-bassmaster","type":"text"},"link":[{"rel":"alternate","type":"text/html","href":"https://www.youtube.com/watch?v=6S7zwXGBiTE&feature=youtube_gdata"},{"rel":"http://gdata.youtube.com/schemas/2007#video.responses","type":"application/atom+xml","href":"https://gdata.youtube.com/feeds/api/videos/6S7zwXGBiTE/responses"},{"rel":"http://gdata.youtube.com/schemas/2007#video.related","type":"application/atom+xml","href":"https://gdata.youtube.com/feeds/api/videos/6S7zwXGBiTE/related"},{"rel":"http://gdata.youtube.com/schemas/2007#mobile","type":"text/html","href":"https://m.youtube.com/details?v=6S7zwXGBiTE"},{"rel":"related","type":"application/atom+xml","href":"https://gdata.youtube.com/feeds/api/videos/6S7zwXGBiTE"},{"rel":"self","type":"application/atom+xml","href":"https://gdata.youtube.com/feeds/api/playlists/2B3B8DDAE8F71C46/PLaFx1lHMY9-c3iy7KngIxLbSSS_9OLXMd"}],"author":[{"name":{"$t":"edbassmaster"},"uri":{"$t":"https://gdata.youtube.com/feeds/api/users/edbassmaster"}}],"gd$comments":{"gd$fee 
```

请帮我解决问题。谢谢，尤维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:02:09.117

```
String json = EntityUtils.toString(response.getEntity(), "UTF-8");
return new JSONObject(json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T21:27:51.853

我在 2.3 上也有同样的问题，但在 4.0 上没问题。我整个晚上都在寻找解决方案。这很简单 - 需要从字符串中删除从 url 接收的第一个符号。

```
// Convert this response into a readable string
String jsonString = StreamUtils.convertToString(response.getEntity().getContent());
jsonString = jsonString.substring(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:21:31.393

在这个 AnyTask 类中，我下载并解析 json

```
private List<HashMap<String, String>> mapList = new ArrayList<HashMap<String, String>>();

    private InputStream is;

     @Override
            protected List<HashMap<String, String>> doInBackground(String... urls) {

                try {
                    DefaultHttpClient httpClient = getNewHttpClient();
                    HttpGet get = new HttpGet((String) urls[0]);
                    HttpResponse httpResponse = httpClient.execute(get);
                    HttpEntity httpEntity = httpResponse.getEntity();

                    is = httpEntity.getContent();

                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            is, "iso-8859-1"));
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    JSONArray jsonArray = new JSONArray(sb.toString());
                        for (int i = 0; i < jsonArray.length(); i++) {
                            JSONObject row = jsonArray.getJSONObject(i);
                            DowloadSpecificJson(row);

                        }
                } catch (Exception e) {
                    e.printStackTrace();
                }

                return mapList;
            }

    private void DowloadSpecificJson(JSONObject row) throws JSONException {

        HashMap<String, String> map = new HashMap<String, String>();
map.put("id", row.getString("id"));
            map.put("name", row.getString("name"));
            map.put("img", row.getString("img"));

mapList.add(map);
} 
```

# haskell - 类型类。家族和多态性

> ID：13867317
> 
> 赞同：1
> 
> 时间：2012-12-13T19:49:13.473
> 
> 标签：haskell, polymorphism, ghc, emulation

我正在尝试编写一个相当简单的处理器模拟器，并试图将实际处理器与其内存接口分开。例如，旧的 TRS-80 有 12K 的 ROM，可以配置总共 16、32 或 48K 的总 RAM。我最初对内存系统的想法是一个类型类：

```
class MemorySystem memInternals addrType wordType where
  -- | General memory fetch. This always returns a 'wordType' value,
  -- even if the system's memory internals are byte addressable.
  mfetch :: addrType       -- ^ The address from which the instruction will be fetched
         -> memInternals   -- ^ The memory system
         -> wordType       -- ^ The fetched word

  -- | Fetch a block of words from the memory system
  mfetchN :: ( Unbox wordType
             ) =>
             addrType      -- ^ The address from which the instruction will be fetched
          -> Int           -- ^ Number of words to fetch
          -> memInternals  -- ^ The memory system
          -> Vector wordType -- ^ The words fetched 
```

澄清：重点`MemorySystem`是允许指令解码器（例如，在 TRS-80 的情况下为 Z80 指令解码器）独立于其内存接口运行，这样解码器所需要做的就是调用`mfetch`下一条指令及其操作数。因此，`memInternals`是一种实现与部分由类型类函数指定的内存系统的接口的类型。

如何是最好的约束方式`addrType`，`wordType`同时允许`memInterals`多态，即允许`memInternals`表示不同的内存配置。我发现自己正在向看起来像这样的函数添加上下文：

```
foo :: ( MemorySystem memSys Word16 Word8) =>
    -> memSys
    -> Word16
    -> Word16
bar :: ( MemorySystem memSys Word16 Word8) =>
    -> memSys
    -> Word16
    -> Word8
bar mem pc = ...
  -- bar calls foo -> rigid type variable error... 
```

这会导致 ghc 中出现很多刚性类型变量错误。

是否有更好的方法来表达 a `MemorySystem`，从而导致多态的“正确类型”，`memInternals`以便可以正确表示内存接口系列（并通过类型类或系列对其进行操作）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:02:42.657

要扩展我的评论，您可以尝试使用关联的类型系列。但看起来您当前的用例由数据类型而不是类型类很好地服务：

```
{-# LANGUAGE TypeFamilies, RankNTypes #-}
import Data.Vector.Unboxed

class MemorySystem memInternals where
  type AddrType memInternals
  type WordType memInternals

  mfetch :: memInternals
         -> AddrType memInternals
         -> AddrType wordType

  mfetchN :: Unbox wordType
          => memInternals
          -> AddrType memInternals
          -> Int
          -> Vector wordType

-- The record type may be more flexible and appropriate here
data MemorySystem addrType wordType = MemorySystem {
    mfetch :: addrType -> wordType
  , mfetchN :: Unbox wordType => addrType -> Int -> Vector wordType
  } 
```

看看类型类如何只有函数`memInternals`只接受一次类型参数并作为第一个参数？这似乎等同于记录方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:21:55.827

The record approach does work best, at least for proper separation of concerns. Here's what works for me:

```
data (Unbox wordType) => MemorySystem addrType wordType memSys =
  MemorySystem
  { _mfetch :: addrType -> wordType
  , _ mfetchN :: addrType -> Int -> Vector wordType
  , _memInternals = memSys
  } 
```

(Note that `memInternals` can be accessed from within `mfetch` and `mfetchN`, so no need to duplicate it as a parameter to those two functions.) It's then possible to create lenses for this record, e.g., using `Control.Lens` and `makeLenses`. It also permits defining types like:

```
import Data.Word
import Data.Int

type Z80addr = Word16
type Z80word = Word8
type Z80memory memConfig = MemorySystem Z80addr Z80word memConfig 
```

that permit a polymorphic memory configuration. Many thanks to Chris for the suggestion -- I'm not sure why I got wrapped around the proverbial axle thinking in terms of type families.

# jsf - p:ajax 事件用于惰性 p:dataTable 的分页

> ID：13867321
> 
> 赞同：6
> 
> 时间：2012-12-13T19:49:17.587
> 
> 标签：jsf, events, primefaces, datatable, pagination

在延迟加载数据表期间更新列表时，我无法找到将执行我的 javascript 的 ajax 事件。此 javascript 负责根据我的列表更新图像覆盖流，该列表在初始数据表加载、分页和更改页面上的记录数时重新填充。非常感谢在这些情况下找到使事件执行我的 javascript 的方法的任何帮助！提前致谢！

Primefaces 3.3.1 Mojarra 2.1.5 JBoss AS 7.1.0.Final

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-13T20:04:22.207

它不特定于延迟加载：

为了在分页完成后运行 js 函数`p:ajax event="page"`（它也可能适用于*更改页面上的记录数*）

像这样

```
<p:ajax event="page" oncomplete="myJsFunction();"></p:ajax> 
```

其他事件类型是

> page - 在分页上。
> 
> sort - 对列进行排序时。
> 
> 过滤器 - 过滤。
> 
> Rowselect - 选择行时。
> 
> rowUnselect - 当一行被取消选择时。
> 
> rowEdit - 编辑行时。
> 
> rowEditCancel - 当行编辑被取消时。
> 
> Colresize - 选择列时。
> 
> toggleSelect - 当标题复选框被切换时。
> 
> colReorder - 当列重新排序时。
> 
> rowSelectRadio - 带单选的行选择。
> 
> rowSelectCheckbox - 带有复选框的行选择。
> 
> rowUnselectCheckbox - 使用复选框取消选择行。
> 
> rowDblselect - 双击行选择。
> 
> rowToggle - 行展开或折叠。
> 
> contextMenu - 上下文菜单显示。

（取自[primefaces 用户指南](http://www.primefaces.org/documentation)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-12T17:31:34.247

在 primefaces 6.2 中，这里是 dataTable 事件的完整列表。

> 页面
> 排序
> 过滤器行选择 行 取消选择行编辑行编辑初始行 编辑取消 colResize 切换选择 col 重新排序上下文菜单行选择 单选 行选择复选框 行取消选择复选框行 Dbl 选择行 切换单元格 编辑 初始化 单元 格 编辑行 重新 排序
> swipeleft
> swiperight 点击点击 单元 格 EditCancel

来自文档：[javax.faces.component.behavior.ClientBehaviorHolder.getEventNames()](https://docs.oracle.com/javaee/6/api/javax/faces/component/behavior/ClientBehaviorHolder.html)

# perl - 使用 perl 将 2 个文件“合并”为第三个文件

> ID：13867324
> 
> 赞同：4
> 
> 时间：2012-12-13T19:49:34.120
> 
> 标签：perl, file-io

我正在审查一个测试，我似乎无法让这个示例正确编码。

**问题：编写一个名为 ileaf 的 perl 脚本，它将一个文件的行与另一个文件的行交织，将结果写入第三个文件。如果文件的长度不同，那么多余的行会写在最后。**

**示例调用：ileaf file1 file2 outfile**

这就是我所拥有的：

```
#!/usr/bin/perl -w

open(file1, "$ARGV[0]");
open(file2, "$ARGV[1]");
open(file3, ">$ARGV[2]");

while(($line1 = <file1>)||($line2 = <file2>)){
    if($line1){
            print $line1;
    }

    if($line2){
            print $line2;
    }
} 
```

这会将信息发送到屏幕，因此我可以立即看到结果。最后的版本应该“打印 file3 $line1;” 我得到了所有的file1，然后是所有的file2，没有和交错的行。

如果我理解正确，这是使用“||”的功能 在我的 while 循环中。while 检查第一次比较，如果为真，则进入循环。这只会检查file1。一旦 file1 为假，while 就会检查 file2 并再次进入循环。

我能做些什么来交错行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:09:09.810

你没有得到你想要的，`while(($line1 = <file1>)||($line2 = <file2>)){`因为只要`($line1 = <file1>)`是真的，`($line2 = <file2>)`永远不会发生。

尝试这样的事情：

```
open my $file1, "<", $ARGV[0] or die;
open my $file2, "<", $ARGV[1] or die;
open my $file3, ">", $ARGV[2] or die;

while (my $f1 = readline ($file1)) {
  print $file3 $f1;  #line from file1

  if (my $f2 = readline ($file2)) {  #if there are any lines left in file2
    print $file3 $f2;
  }
}

while (my $f2 = readline ($file2)) {   #if there are any lines left in file2
  print $file3 $f2;
}

close $file1;
close $file2;
close $file3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:52:32.430

你会认为如果他们教你 Perl，他们会使用现代 Perl 语法。请不要把这个当成个人。毕竟，这就是你被教导的方式。但是，您应该了解新的 Perl 编程风格，因为它有助于消除各种编程错误，并使您的代码更易于理解。

*   **使用编译指示`use strict;`和`use warnings;`**. 警告编译指示取代了`-w`命令行上对标志的需要。它实际上更灵活，更好。例如，当我知道它们会成为问题时，我可以关闭特定的警告。`use strict;`pragma 要求我使用my*或*our*声明*我的变量。（注意：不要声明 Perl 内置变量）。99% 的时间，你会使用*我的*. 这些变量称为*词法作用域*，但您可以将它们视为真正的局部变量。词法范围的变量在其范围之外没有任何值。例如，如果您`my`在 while 循环中使用声明变量，则该变量将在循环退出后消失。
*   **对`open`语句**使用三参数语法：在下面的示例中，我使用三参数语法。这样，如果一个文件被调用`>myfile`，我就可以从中读取。
*   **使用本地定义的文件句柄。请注意，我使用`my $file_1_fh`而不是简单的 FILE_1_HANDLE。旧方式 FILE_1_HANDLE 是全局范围的，而且很难将文件句柄传递给函数。使用词法范围的文件句柄效果更好。
*   **使用`or`and`and`代替`||`and`&&`**：它们更容易理解，并且它们的运算符优先级更好。他们更有可能不会引起问题。
*   **始终检查您的`open`语句是否有效**：您需要确保您的`open`语句实际打开了一个文件。或者使用`use autodie;`编译指示，如果语句失败，它将杀死你的程序`open`（这可能是你想要做的。

而且，这是你的程序：

```
#! /usr/bin/env perl
#

use strict;
use warnings;
use autodie;

open my $file_1, "<", shift;
open my $file_2, "<", shift;
open my $output_fh, ">", shift;

for (;;) {
    my $line_1 = <$file_1>;
    my $line_2 = <$file_2>;
    last if not defined $line_1 and not defined $line_2;
    no warnings qw(uninitialized);
    print {$output_fh} $line_1 . $line_2;
    use warnings;
} 
```

在上面的示例中，我从两个文件中读取，*即使它们是空*的。如果没有什么可读的，那么`$line_1`or`$line_2`就是未定义的。在我读完之后，我检查是否两者`$line_1`都`$line_2`未定义。如果是这样，我用`last`结束我的循环。

因为我的文件句柄是一个标量变量，所以我喜欢把它放在花括号中，这样人们就知道它是一个文件句柄，而不是我想要打印出来的变量。我不需要它，但它可以提高清晰度。

注意`no warnings qw(uninitialized);`. 这会关闭我将收到的未初始化警告。我知道要么`$line_1`或`$line_3`可能未初始化，所以我不想要警告。我在打印声明的正下方重新打开它，因为它是一个有价值的警告。

`for`这是执行该循环的另一种方法：

```
while ( 1 ) {
    my $line_1 = <$file_1>;
    my $line_2 = <$file_2>;
    last if not defined $line_1 and not defined $line_2;
    print {$output_fh} $line_1 if defined $line_1;
    print {$output_fh} $line_2 if defined $line_2;
} 
```

*无限循环*是 while 循环而不是for*循环*。有些人不喜欢 C 风格的`for`循环，并在他们的编码实践中禁止了它。因此，如果你有一个*无限循环*，你使用`while ( 1 ) {`. 对我来说，可能是因为我来自 C 背景，`for (;;) {`这意味着*无限循环*，并且`while ( 1 ) {`需要额外的几毫秒来消化。

另外，我在打印它们之前检查是否定义`$line_1`或定义。`$line_2`我想这比使用`no warning`and更好`warning`，但我需要两个单独的打印语句，而不是将它们组合成一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T23:32:24.173

这是另一个使用[List::MoreUtils](http://search.cpan.org/~adamk/List-MoreUtils-0.33/lib/List/MoreUtils.pm)交错`zip`数组和[File::](http://search.cpan.org/~uri/File-Slurp-9999.19/lib/File/Slurp.pm) Slurp读取和写入文件的选项：

```
use strict;
use warnings;
use List::MoreUtils qw/zip/;
use File::Slurp qw/read_file write_file/;

chomp( my @file1 = read_file shift );
chomp( my @file2 = read_file shift );

write_file shift, join "\n", grep defined $_, zip @file1, @file2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T20:43:56.457

刚刚注意到 Tim A 已经发布了一个很好的解决方案。这个解决方案有点冗长，但可能会更准确地说明正在发生的事情。

我采用的方法将两个文件中的所有行读取到两个数组中，然后使用计数器循环遍历它们。

```
#!/usr/bin/perl -w
use strict;

open(IN1, "<", $ARGV[0]);
open(IN2, "<", $ARGV[1]);

my @file1_lines;
my @file2_lines;

while (<IN1>) {
    push (@file1_lines, $_);
}
close IN1;
while (<IN2>) {
    push (@file2_lines, $_);
}
close IN2;

my $file1_items = @file1_lines;
my $file2_items = @file2_lines;

open(OUT, ">", $ARGV[2]);
my $i = 0;
while (($i < $file1_items) || ($i < $file2_items)) {
    if (defined($file1_lines[$i])) {
        print OUT $file1_lines[$i];
    }
    if (defined($file2_lines[$i])) {
        print OUT $file2_lines[$i];
    }
    $i++
}
close OUT; 
```

# r - 在ggplot2中获取绘图区域的宽度

> ID：13867325
> 
> 赞同：8
> 
> 时间：2012-12-13T19:49:40.337
> 
> 标签：r, ggplot2

有没有办法在网格窗口中获取绘图区域的宽度？例如，如果`plot.margin`更改或 y 轴标签的字体大小增加，它会增大或缩小。是隐藏在某处`str(p)`吗？

任何尺寸测量都可以。我需要能够测量不同场景下绘图区域宽度的相对变化，例如 y 轴标签的字体大小的变化。

![在此处输入图像描述](../Images/70d4000f38bfc369c51ff2bf0b475190.png)

```
df = data.frame(x = (1:3),One=c(12, 8, 13),Two=c(13, 7, 11),Three=c(11, 9, 11))
df.melt = melt(df, id.vars="x")

p = ggplot(df.melt, aes(x=x, y=value, color=variable)) + 
  geom_line() +
  coord_cartesian(xlim=c(min(df.melt$x),max(df.melt$x))) +
  theme(legend.position="none", plot.margin = unit(c(1, 4, 1, 1), "cm")) 
p 
```

* * *

更新 - 澄清：请帮我计算`a/b`。

![在此处输入图像描述](../Images/fbec801ec38efa35afc6048c5e93674b.png)

```
p = ggplot(df.melt, aes(x=x, y=value, color=variable)) + 
  geom_line() + coord_cartesian(xlim=c(min(df.melt$x),max(df.melt$x))) +
  theme(legend.position="none")

p1 = p + theme(plot.margin=unit(c(1,1,1,1),"cm"), axis.text.y=element_text(size=10))
p2 = p + theme(plot.margin=unit(c(1,1,1,2),"cm"), axis.text.y=element_text(size=30))
grid.arrange(p1, p2, ncol=2) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T21:03:28.837

ggplot2 中的绘图使用网格图形。使用网格图形包生成的图形场景由 grobs 和视口组成。

您可以使用**gridDebug**包来检查 grobs。

1.  showGrob 显示用于绘制场景的 grobs 的位置和名称

    ```
     showGrob() 
    ```

2.  获取 grob 的 gpath

    ```
     sceneListing <- grid.ls(viewports=T, print=FALSE)
      do.call("cbind", sceneListing)

       name                                gPath                                                      
    [1,] "ROOT"                              ""                                                         
    [2,] "GRID.gTableParent.45019"           ""                                                         
    [3,] "background.1-5-6-1"                "GRID.gTableParent.45019"                                  
    [4,] "spacer.4-3-4-3"                    "GRID.gTableParent.45019"                                  
    [5,] "panel.3-4-3-4"                     "GRID.gTableParent.45019"                                  
    [6,] "grill.gTree.44997"                 "GRID.gTableParent.45019::panel.3-4-3-4" 
    ```

3.  取回 gorb

    ```
    h <- grid.get(gPath="GRID.gTableParent.45019") 
    ```

4.  获取 h 属性（例如）

    ```
    h$layoutvp$width 
    ```

应用：

```
grid.get('x',grep=TRUE,global=T)
(polyline[panel.grid.minor.x.polyline.21899], polyline[panel.grid.major.x.polyline.21903], gTableChild[axis-l.3-3-3-3], gTableChild[axis-b.4-4-4-4], gTableChild[xlab.5-4-5-4]) 
>  grid.get('x',grep=TRUE,global=T)[[3]]
gTableChild[axis-l.3-3-3-3] 
>  xx <- grid.get('x',grep=TRUE,global=T)[[3]]
> grobWidth(xx)
[1] sum(1grobwidth, 0.15cm+0.1cm) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-15T18:09:13.770

这引起了我足够的兴趣，以便更深入地研究它。我希望该`grid.ls`功能能够提供信息以导航到正确的视口以获取信息，但是对于您的示例，有一堆步骤被替换为“...”，我看不出如何更改它提供易于使用的东西。但是，使用`grid.ls`或其他工具，您可以看到不同视口的名称。对于您的示例，感兴趣的视口都命名为“panel.3-4-3-4”，下面是一些将导航到第一个的代码，找到以英寸为单位的宽度，导航到第二个并找到那个的宽度以英寸来算。

```
grid.ls(view=TRUE,grob=FALSE)
current.vpTree()
seekViewport('panel.3-4-3-4')
a <- convertWidth(unit(1,'npc'), 'inch', TRUE)
popViewport(1)
seekViewport('panel.3-4-3-4')
b <- convertWidth(unit(1,'npc'), 'inch', TRUE)
a/b 
```

如果不弹出第一个面板，我想不出一个简单的方法来进入第二个面板。这有效并提供了您需要的信息，不幸的是，因为它从列表中弹出第一个面板，您无法返回它并查找其他信息或修改它。但这确实提供了您要求的信息，可以在未来的情节中使用。

也许其他人知道如何导航到第二个面板而不弹出第一个面板，或者让每个面板的完整 vpPath 直接导航。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-14T18:19:39.840

这个答案主要是回复@java_xof的评论。回复太长并且包含代码，因此不适合评论。但是，它也可能有助于解决原始问题（或至少给出一个起点）。

这是一个函数和一些使用它的代码（它需要 tcltk 和 tkrplot 包）：

```
library(ggplot2)
library(tkrplot)
TkPlotLocations <- function(FUN) {
    require(tkrplot)

    cl <- substitute(FUN)
    replot <- function() eval(cl)

    tt <- tktoplevel()
    img <- tkrplot(tt, replot, vscale=1.5, hscale=1.5)
    tkpack(img)

    tkpack(xfr <- tkframe(tt), side='left')
    tkpack(yfr <- tkframe(tt), side='left')

    xndc <- tclVar()
    yndc <- tclVar()
    xin <- tclVar()
    yin <- tclVar()

    tkgrid(tklabel(xfr, text='x ndc'), tklabel(xfr, textvariable=xndc))
    tkgrid(tklabel(yfr, text='y ndc'), tklabel(yfr, textvariable=yndc))
    tkgrid(tklabel(xfr, text='x inch'), tklabel(xfr, textvariable=xin))
    tkgrid(tklabel(yfr, text='y inch'), tklabel(yfr, textvariable=yin))

    iw <- as.numeric(tcl("image","width", tkcget(img, "-image")))
    ih <- as.numeric(tcl("image","height",tkcget(img, "-image")))

    cc <- function(x,y) {
        x <- (as.real(x)-1)/iw
        y <- 1-(as.real(y)-1)/ih
        c(x,y)
    }

    mm <- function(x, y) {
        xy <- cc(x,y)
        tclvalue(xndc) <- xy[1]
        tclvalue(yndc) <- xy[2]
        tclvalue(xin) <- grconvertX(xy[1], from='ndc', to='inches')
        tclvalue(yin) <- grconvertY(xy[2], from='ndc', to='inches')
    }

    tkbind( img, "<Motion>", mm)

    invisible()
}

x <- runif(25)
y <- rnorm(25, x, 0.25)
plot(x,y)
par()$pin
par()$plt
TkPlotLocations(plot(x,y))
qplot(x,y)
par()$pin
par()$plt
TkPlotLocations(print(qplot(x,y)))
qplot(x,y) + xlab('Multi\nline\nx\nlabel')
par()$pin
par()$plt
TkPlotLocations(print(qplot(x,y) + xlab('Multi\nline\nx\nlabel'))) 
```

定义上述函数，然后运行以下行将生成 3 个相同随机数据的图。您可以看到 3 个图的`par()$pin`和`par()$plt`（和其他参数）的结果完全相同，即使图中的绘图区域不同。

还会弹出 3 个新窗口，在这些窗口中，您可以将鼠标指针移到图形上，在窗口底部，您将看到指针的当前位置，以标准化设备坐标和英寸为单位（均来自设备区域的左下角）。您可以将鼠标指针悬停在图形（或任何其他部分）的角上以查看值并在 3 个图形之间进行比较。

这可能足以回答至少部分原始问题（只是不是以编程方式，这会更有用）。也可以修改该功能以打印出其他测量值。如果其他人有兴趣，我可能会扩展它并将其包含在将来的包中。

# jquery - 我可以从 CSS 类中已经建立的缩略图打开多个 Fancybox 画廊吗？

> ID：13867329
> 
> 赞同：2
> 
> 时间：2012-12-13T19:50:01.543
> 
> 标签：jquery, fancybox

我正在使用一个模板来构建一个网站，它有一个非常漂亮的画廊页面，我正在为我的设计使用它。页面的 CSS 和 HTML 是基于这样的想法编写的，即每个缩略图都会简单地打开到与该缩略图图像相关的全新页面。

然而，我想做的是从页面上的每个拇指打开一个不同的、覆盖的 Fancybox 画廊。我找到了很多与在单个页面上使用多个 Fancybox 画廊相关的答案，但没有具体到我想要做什么。

这是缩略图部分的 HTML：

```
 <div id="album-shelves">
    <h1 class="heading colr">Check out some of the great area events we cover!</h1>
    <div class="inner">
        <!-- Columns Section Start -->
        <ul class="album-list">
            <li>
                    <a href="album-detail.html" class="thumb"><img src="images/ascutneythumb.jpg" alt="" /></a>
                <h3><a href="album-detail.html" class="colr">Irene Benefit - Ascutney, VT</a></h3>
                <p>
                    Lorem ipsum and blah, blah, blah....![enter image description here][1]<a href="#">Read More</a>
                </p>
                <a href="album-detail.html" class="bigbutton">VIEW DETAIL</a>
            </li>

        </ul>
        <div class="clear"></div>
        <!-- Columns Section End -->
    </div>
</div>
<!-- Album Shades End -->
<div class="clear"></div> 
```

请注意，我只复制了一个缩略图代码实例以节省空间。目前在设计中有 12 个该缩略图块的实例。

CSS 显然设置了缩略图的外观和功能，因为它们最初是编写的，所以我很好奇如何在这些参数内工作以从缩略图中启动一个独特的 Fancybox 画廊。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:56:14.180

```
$("a.thumbs").fancybox({
        'transitionIn'  :   'elastic',
        'transitionOut' :   'elastic',
        'speedIn'       :   600, 
        'speedOut'      :   200, 
        'overlayShow'   :   false
    }); 
```

或者对于组使用属性`rel`

```
/* HTML */
<a class="grouped_elements" rel="group1" href="image_big_1.jpg"><img src="image_small_1.jpg" alt=""/></a>
<a class="grouped_elements" rel="group1" href="image_big_2.jpg"><img src="image_small_2.jpg" alt=""/></a>   

<a class="grouped_elements" rel="group2" href="image_big_3.jpg"><img src="image_small_3.jpg" alt=""/></a> 
<a class="grouped_elements" rel="group2" href="image_big_4.jpg"><img src="image_small_4.jpg" alt=""/></a> 

/* This will create two galleries */

$("a.grouped_elements").fancybox(); 
```

# php - 从 jQuery 文件上传中检索 formData

> ID：13867331
> 
> 赞同：0
> 
> 时间：2012-12-13T19:50:07.657
> 
> 标签：php, jquery, jquery-plugins

我有一段时间试图在 jQuery File Upload 插件中提交额外的表单数据。它在此处进行了描述[https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-Form-Data](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-Form-Data)但它没有详细介绍如何检索和使用该数据在 UploadHandler.php 中。以下是我所拥有的：

index.php（表格）：

```
 <form id="fileupload" action="<?php echo $this->config->item('base_url'); ?>/cool_upload/server/php/" method="POST" enctype="multipart/form-data">
    <input type="hidden" id="userID" value="<?php echo $this->session->userdata('id'); ?>">
    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
    <div class="row fileupload-buttonbar">
        <div class="span7">
            <!-- The fileinput-button span is used to style the file input field as button -->
            <span class="btn btn-success fileinput-button">
                <i class="icon-plus icon-white"></i>
                <span>Add files...</span>
                <!-- REMOVED MULTIPLE FROM HERE TO ONLY ALLOW ONE FILE AT A TIME!!!! -->
                <input type="file" name="files[]">
            </span>
            <button type="submit" class="btn btn-primary start">
                <i class="icon-upload icon-white"></i>
                <span>Start upload</span>
            </button>
            <button type="reset" class="btn btn-warning cancel">
                <i class="icon-ban-circle icon-white"></i>
                <span>Cancel upload</span>
            </button>
            <button type="button" class="btn btn-danger delete">
                <i class="icon-trash icon-white"></i>
                <span>Delete</span>
            </button>
            <input type="checkbox" class="toggle">
        </div>

    </div>

     <!-- The global progress information -->
        <div class="span5 fileupload-progress fade">
            <!-- The global progress bar -->
            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                <div class="bar" style="width:200%;"></div>
            </div>
            <!-- The extended global progress information -->
            <div class="progress-extended">&nbsp;</div>
        </div>

    <!-- The loading indicator is shown during file processing -->
    <div class="fileupload-loading"></div>
    <br>
    <!-- The table listing the files available for upload/download -->
    <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
</form>
<br>

 <!-- The template to display files available for upload -->
 <script id="template-upload" type="text/x-tmpl">

  <tr class="template-upload fade">
    <td colspan="2" class="preview"><span class="fade"></span></td>
    <td class="changeFileName"><input type="text" name="changeFileName" class="changeFileName" style="width: 110px;" placeholder="New File Name?" maxlength="25" />

        <select class="selectCat" name="selectCategory" style="width: 130px;">
          <option selected="selected" value="0">Select Category:</option>
          <?php
            foreach ($fileCategory as $t)
            {
                echo '<option value="'.$t['id'].'">'.$t['name'].'</option>';
            }
          ?>
          <option value="3">Other...</option>
        </select>

    </td>
    <td colspan="2" class="name" width="20"><span>{%=file.name%}</span></td>
    <td colspan="2" class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
    {% if (file.error) { %}
        <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
    {% } else if (o.files.valid && !i) { %}
        <td>
            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
        </td>
         <td class="start">{% if (!o.options.autoUpload) { %}
            <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                <span>Start</span>
            </button>
        {% } %}</td>
    {% } else { %}
        <td colspan="2"></td>
    {% } %}
    <td class="cancel">{% if (!i) { %}
        <button class="btn btn-warning">
            <i class="icon-ban-circle icon-white"></i>
            <span>Cancel</span>
        </button>
    {% } %}</td>
    <td rowspan="2"></td>
</tr>
{% } %}
</script> 
```

主.js：

```
$('#fileupload').bind('fileuploadsubmit', function (e, data) {
    data.formData = $('form').serializeArray();
}); 
```

上传处理程序.php：

- 这是我对帖子功能的编辑：

```
public function post($print_response = true) {
    if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
        return $this->delete($print_response);
    }
    $upload = isset($_FILES[$this->options['param_name']]) ?
        $_FILES[$this->options['param_name']] : null;
    // Parse the Content-Disposition header, if available:
    $file_name = isset($_SERVER['HTTP_CONTENT_DISPOSITION']) ?
        rawurldecode(preg_replace(
            '/(^[^"]+")|("$)/',
            '',
            $_SERVER['HTTP_CONTENT_DISPOSITION']
        )) : null;
    // Parse the Content-Range header, which has the following form:
    // Content-Range: bytes 0-524287/2000000
    $content_range = isset($_SERVER['HTTP_CONTENT_RANGE']) ?
        preg_split('/[^0-9]+/', $_SERVER['HTTP_CONTENT_RANGE']) : null;
    $size =  $content_range ? $content_range[3] : null;
    $files = array();
    // IF THERE ARE MULTIPLE FILES
    if ($upload && is_array($upload['tmp_name'])) {
        // param_name is an array identifier like "files[]",
        // $_FILES is a multi-dimensional array:
        foreach ($upload['tmp_name'] as $index => $value) {
            $files[] = $this->handle_file_upload(
                $upload['tmp_name'][$index],
                $file_name ? $file_name : $upload['name'][$index],
                $size ? $size : $upload['size'][$index],
                $upload['type'][$index],
                $upload['error'][$index],
                $index,
                $content_range,
                isset($_REQUEST['userID']) ? $_REQUEST['userID'] : null,
            null
            );
        }
    } else {
        // param_name is a single object identifier like "file",
        // $_FILES is a one-dimensional array:
        $files[] = $this->handle_file_upload(
            isset($upload['tmp_name']) ? $upload['tmp_name'] : null,
            $file_name ? $file_name : (isset($upload['name']) ?
                    $upload['name'] : null),
            $size ? $size : (isset($upload['size']) ?
                    $upload['size'] : $_SERVER['CONTENT_LENGTH']),
            isset($upload['type']) ?
                    $upload['type'] : $_SERVER['CONTENT_TYPE'],
            isset($upload['error']) ? $upload['error'] : null,
            null,
            $content_range,
            isset($_REQUEST['userID']) ? $_REQUEST['userID'] : null,
            null
        );
    }
    return $this->generate_response(array('files' => $files), $print_response);
} 
```

-我将参数添加到handle_file_upload

```
protected function handle_file_upload($uploaded_file, $name, $size, $type, $error,
        $index = null, $content_range = null, $userID) { 
```

当我尝试使用 $userID 时，我什么也得不到，因为它是空的。如何使用表单中的用户 ID？同样在 index.php 中，在模板显示区域中，我如何也可以使用这些添加的输入？例如，我有一个 changeFilerName 输入和一个 select 来选择类别。我已经阅读了文档，但我仍然不确定事情是如何传递给 UploadHandler 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:11:37.690

首先，通过查看页面的源代码，确保在隐藏的表单字段中填充了 $userID。隐藏的表单字段需要这样的名称：

```
<input name="userID" id="userID" .... 
```

在 PHP 端，该输入的值将在 $_POST 数组中可用

```
$_POST['userid'] 
```

您还应该在浏览器或 Firebug 等工具附带的开发人员工具控制台中观察 Ajax 请求的请求/响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:31:49.320

Try this plugin to upload large numbers of files. And it has automatic support for detecting if the browser supports html5 or flash or java

[http://des.delestesoft.com:8080/?go=2](http://des.delestesoft.com:8080/?go=2)

# java - 为什么我的数组会出现 NullPointerException？

> ID：13867333
> 
> 赞同：0
> 
> 时间：2012-12-13T19:50:11.343
> 
> 标签：java, interface, nullpointerexception

我无法弄清楚为什么我会收到 NullPointerException。我在这里想念什么？

```
public class CustomJourneyUserInformation {
    public IJourneyDetails journeyDetails;
    public IUserDetails userDetails;
    public ISubscribeJourney subscribedToJourneys;
} 
```

IJourneyDetails、IUserDetails、ISubscribeJourney都是接口

在另一个活动中，我打电话给

```
private CustomJourneyUserInformation[] allJourneyDetails;
    allJourneyDetails = new CustomJourneyUserInformation[subscribedToJourneys.length];
    if (providerDetails[i] != null)
>>> allJourneyDetails[i].journeyDetails = providerDetails[i];
    if (userDetails[i] != null)
    allJourneyDetails[i].userDetails = userDetails[i];
    if (subscribedToJourneys[i] != null)
        allJourneyDetails[i].subscribedToJourneys = subscribedToJourneys[i]; 
```

我在由 >>>> 标记的行中收到空指针异常

我确定`allJourneyDetails[i]`这里是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T19:51:59.213

看起来是空的，因为初始化后`allJourneyDetails[i]`数组仍然被填充。`null`

您是否期望创建数组以使用非空值填充数组？这不是它在 Java 中的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T19:53:05.833

```
allJourneyDetails = new CustomJourneyUserInformation[subscribedToJourneys.length]; 
```

应该

```
allJourneyDetails = new CustomJourneyUserInformation[providerDetails.length]; 
```

也; 但@LouisWasserman 是对的

# ios - 如何正确使用 UIScrollView 和 UIPageControl？

> ID：13867337
> 
> 赞同：1
> 
> 时间：2012-12-13T19:50:22.537
> 
> 标签：ios, uiscrollview, uipagecontrol

我有一个`UIScrollView`我想用一个`UIPageControl`来让不同的页面水平滑动。我需要为每一页添加一个`UITextView`和一个数字。`UIImageView`在我的`ViewController`我调用一个网络服务，当数据到达时，我添加如下项目：

```
for(int i=0;i<[arrData count];i++) {
    NSString *body=@"Dummy text";

    CGRect frame;

    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size.width = self.scrollView.frame.size.width;
    frame.size.height = 40; //vedere landscape

    UILabel *label = [[UILabel alloc] initWithFrame:frame];
    [label setText:body];
    label.numberOfLines=0;
    [label sizeToFit];
    label.autoresizingMask=UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.scrollView addSubview:label];

    [label setBackgroundColor:[UIColor whiteColor]];
    [self.scrollView addSubview:label];
    int y_pos=label.frame.size.height+10;
    int x_pos=0;
    for(int img=0; img<[[[arrData objectAtIndex:i]objectForKey:@"images"] count]; img++) {
        NSString *imageURL=[[[[arrData objectAtIndex:i] objectForKey:@"images"] objectAtIndex:img] objectForKey:@"fn"];

        NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageURL]];
        UIImage *image = [UIImage imageWithData:imageData];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        [imageView setFrame:CGRectMake(self.scrollView.frame.size.width * i+img*100, y_pos, image.size.width, image.size.height)];
        [self.scrollView addSubview:imageView];

    }

}
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * [arrData count], self.scrollView.frame.size.height); 
```

`ScrollView`它在纵向上运行良好，但是当设备旋转时，显然布局被破坏了......这是使用with的最佳方式`PageControl`？我是否必须处理旋转并更改插入项目之间的距离，或者（我认为）是否有更好的方法来构建所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:59:49.397

是的，每次方向更改时，您都必须再次设置滚动视图框架，因为灵活宽度会在横向模式下从两侧拉伸滚动视图的宽度，因此当您进行水平滚动时，其内容会重叠并导致问题。您可以做的一件事是将滚动视图的自动调整大小掩码设置为flexibleRightMargin|flexibleLeftMargin。它将滚动视图的内容保持在中心，但滚动看起来不干净。

# css - IE 8 - 鼠标悬停在 img 上会影响 ul

> ID：13867338
> 
> 赞同：0
> 
> 时间：2012-12-13T19:50:23.507
> 
> 标签：css, internet-explorer, mouseover

```
<div>
<ul class="ulCont">
<li><a href="#nogo">Sky</a></li>
<li><a href="#nogo">Sea</a></li>
</ul>
<img class="thinker01" src="images/thinker01.png"/>
<div class="clearBoth"></div>
</div> 
```

CSS

```
.ulCont{float:left;}
.thinker01{float:right;}
.thinker01:hover{margin-top:-5px;}
.clearBoth{clear:both;} 
```

Firefox 和 Chrome - 运行良好，即`img`在鼠标悬停时移动，并`ul`保持在原地。
IE8 - 当鼠标悬停时`img`- 它也向上移动`ul`到 -5px 上边距。
那么，有人可以禁止 IE 生产吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:33:45.823

我只是对你给我的东西做了一个[jsfiddle 。](http://jsfiddle.net/FmJ4E/1/)我已经在所有三种浏览器中尝试了您所说的内容。`-5px`就像你告诉它的那样，它们都在悬停时向上移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:50:43.983

我在 IE8 中没有任何悬停动作。这是因为悬停在 IE 中仅适用于带有 href 的“a”标签。

W3Schools 说你可以用适当的 DOCTYPE 让它工作，但我不确定是哪一个。 [http://www.w3schools.com/cssref/sel_hover.asp](http://www.w3schools.com/cssref/sel_hover.asp)

您可以在图像周围添加 a 标签。

```
<a href="#nogo" class="thinker01"><img src="images/thinker01png_round_coaster.jpg"/></a> 
```

and remove the border with

```
.thinker01 img {border: none;} 
```

I realize this extra "a" may cause other problems but it might be a start to your solution.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:58:10.363

I found this works in all browsers for me. Please, check

```
<div>
<ul class="ulCont">
<li><a href="#nogo">Sky</a></li>
<li><a href="#nogo">Sea</a></li>
</ul>
<div style="clear:right;"></div> // this line is added
<img class="thinker01" src="images/thinker01.png"/>
<div class="clearBoth"></div>
</div> 
```

# mysql - 如何在这个原始 SQL 调用中联合并找到中间时间？

> ID：13867344
> 
> 赞同：0
> 
> 时间：2012-12-13T19:50:47.333
> 
> 标签：mysql, sql, ruby-on-rails, union

我在尝试着

1.  收集两个不同`type`的对象（`Published`并且`InReviewing`来自同一个模型`Events`，
2.  `Published`找到和之间的中间时间`Created`，
3.  按日期分组..

这样我就可以返回一个带有日期的数组，以及任何类型之间的中等时间差，`InReviewing`并且每天`Published`共享一个。`target_id`我认为 SQL 会返回秒数？

例子 ：

```
[[Mon, 03 Dec 2012, 110000], [Thu, 13 Dec 2012, 2200000]] 
```

我的原始 SQL 语法缺乏一些结论。这是我到目前为止所拥有的：

```
 SELECT target_id, DATE(created_at), COUNT(*)
    FROM (   SELECT target_id, DATE(created_at)
          FROM events
          WHERE created_at > '#{@start_time}'
          AND events.type = 'InReviewing'
          UNION ALL
          SELECT target_id, DATE(created_at)
          FROM events
          WHERE created_at > '#{@start_time}'
          AND events.type = 'Published'   
      ) tmp
    GROUP BY DATE(created_at) 
```

不要介意`#{@start_time`}`，这是使用本机代码在这里实现时间，它可以正常工作..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:57:53.703

我不认为我理解您的问题，但我仍然决定试一试（另外，由于我此时无法访问 MySql，因此此示例来自 MS SQL）：

```
 SELECT x.target_id, x.created_at AS InReviewingCreated, y.created_at AS PublishedCreated, DATEDIFF(SECOND, x.created_at, y.created_at) AS DiffSeconds 
FROM 
    (SELECT *
        FROM Events a 
        WHERE a.created_at > '#{@start_time}'
            AND a.type = 'InReviewing') x INNER JOIN

    (SELECT *
        FROM Events a 
        WHERE a.created_at > '#{@start_time}'
            AND a.type = 'Published') y ON x.target_id = y.target_id
ORDER BY x.created_at 
```

这将为您提供每个目标是 InReview 和 Published 的时间戳以及它们之间的秒数。我对你想要什么有点困惑......这是我“认为”你想要的：

```
SELECT DATEPART(DAYOFYEAR, x.created_at), AVG(DATEDIFF(SECOND, x.created_at, y.created_at))
FROM 
    (SELECT *
        FROM Events a 
        WHERE a.created_at > '#{@start_time}'
            AND a.type = 'InReviewing') x INNER JOIN

    (SELECT *
        FROM Events a 
        WHERE a.created_at > '#{@start_time}'
            AND a.type = 'Published') y ON x.target_id = y.target_id
GROUP BY DATEPART(DAYOFYEAR, x.created_at)
ORDER BY DATEPART(DAYOFYEAR, x.created_at) 
```

免责声明：由于我没有您的表模式，因此我的测试并不完全有效。如果您要共享示例设置和所需的输出，那么我可以提供更好的查询。

希望这可以帮助。

# javascript - 用于确定平板电脑方向的 JavaScript 算法

> ID：13867347
> 
> 赞同：8
> 
> 时间：2012-12-13T19:50:56.017
> 
> 标签：javascript, android

我们正在构建一个为平板电脑开发的 HTML5/JavaScript 应用程序，我们希望以横向和纵向不同的方式布置我的屏幕。

最初，我们捕获方向更改通知，并跟踪当前方向（通常报告为 0、90、-90 或 180 度 - 请参阅[此问题](https://stackoverflow.com/questions/10131782/detect-orientation-using-javascript-on-android-devices)）。不幸的是，不同的设备将[不同的方向报告为“0”](http://forum.jquery.com/topic/orientationchange-event-returns-wrong-values-on-android)。该链接认为这是一个错误，但有一些证据表明这是按设计工作的 - 例如，[本文](http://www.samsung.com/us/article/samsung-galaxy-tab-10-1-tips--tricks/)建议“横向”是默认方向，并且这些设备在横向保持时报告“0”方向模式。

接下来我们尝试只查看实际的屏幕尺寸，假设当宽度大于高度时，我们处于横向模式。但是当屏幕键盘显示时，这个算法会变得混乱——当键盘显示时，会返回可见区域的尺寸。严格来说，当设备处于纵向模式，但未被键盘遮挡的屏幕部分比其高时更宽。

对[这个问题](https://stackoverflow.com/questions/1649086/detect-rotation-of-android-phone-in-the-browser-with-javascript)的回答已经很老了。这仍然是最好的答案吗？有没有人有一个很好的算法来考虑键盘的可见性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:51:12.327

[http://jsfiddle.net/jjc39/](http://jsfiddle.net/jjc39/)

试试这个：

```
<span id="orientation">orientation</span>​

$(document).ready(checkOrientation);
$(window).resize(checkOrientation);

function checkOrientation() {
    var orientation = "Portrait";
    var screenWidth = $(window).width();
    var screenHeight = $(window).height();
    if (screenWidth > screenHeight) {
        orientation = "Landscape";
    }
    $("#orientation").html(orientation);
}​ 
```

# java - Android列表视图仅显示两项中的一项

> ID：13867348
> 
> 赞同：0
> 
> 时间：2012-12-13T19:50:55.680
> 
> 标签：java, android, xml

我正在尝试制作一个包含两个项目（两个 textView）的 ListView

这是我的代码：

标头 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 

     <TextView android:id="@+id/txtHeader"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#FFFFFF"
        android:padding="10dp"
        android:text="Shoping List"
        android:background="#336699" />

</LinearLayout> 
```

她的行是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

     <TextView android:id="@+id/prudctName"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textStyle="bold"
        android:textSize="22sp"
        android:textColor="#000000"
     />

     <TextView android:id="@+id/productAmount"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textStyle="bold"
        android:textSize="22sp"
        android:textColor="#000000"
         />

</LinearLayout> 
```

这是主屏幕 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"> 

     <ListView
        android:id="@+id/shoping_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

这是表示包含两个字段的对象的类：

```
public class ShopingListItem
{
    public String productName;
    public String procuctAmount;
    public ShopingListItem(String _productName,String _productAmount)
    {
        this.procuctAmount=_productAmount;
        this.productName=_productName;
    }

} 
```

这是适配器类：

```
 public class ShopingListItemAdapter extends ArrayAdapter<ShopingListItem>
    {

        public Context context;
        public int layoutResourceId;
        public ShopingListItem[] items;

        public ShopingListItemAdapter(Context context,int layoutResourceId, ShopingListItem[] objects)
        {
            super(context, layoutResourceId, objects);
            this.context=context;
            this.layoutResourceId=layoutResourceId;
            this.items=objects;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            View row = convertView;
            ShopingListItemHolder holder = null;

            if(row==null)
            {
                LayoutInflater inflater = ((Activity)context).getLayoutInflater();
                row = inflater.inflate(layoutResourceId, parent, false);
                holder = new ShopingListItemHolder();
                holder.productName=(TextView)row.findViewById(R.id.prudctName);
                holder.productAmount=(TextView)row.findViewById(R.id.productAmount);
                row.setTag(holder); 
            }
            else
            {
                 holder = (ShopingListItemHolder)row.getTag();
            }

             ShopingListItem item = items[position];
             String amount = item.procuctAmount;
             String name = item.productName;
             TextView v = holder.productAmount;
             TextView vv = holder.productName;
             holder.productAmount.setText(amount);
             holder.productName.setText(name);

            return row;
        }
         static class ShopingListItemHolder
            {
                TextView productName;
                TextView productAmount;
            }

    } 
```

以下是主要活动：

```
public class ShopingListActivity extends Activity
{
    private ListView listView1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.shoping_list_screen);

        //fill list with temp data
        ShopingListItem[] items = fillData();
        ShopingListItemAdapter adapter = new ShopingListItemAdapter(this, R.layout.listview_item_row, items);

        listView1 = (ListView)findViewById(R.id.shoping_list);

        View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
        listView1.addHeaderView(header);
        listView1.setAdapter(adapter);

    }

    private ShopingListItem[] fillData()
    {
         ShopingListItem[] items = new ShopingListItem[]
                    {
                       new ShopingListItem("Bamba", "2"),
                       new ShopingListItem("Bisli", "12"),
                       new ShopingListItem("Shoko", "3"),
                       new ShopingListItem("Yello Cheese", "2"),
                       new ShopingListItem("Marak", "7"),
                       new ShopingListItem("Cola", "2"),
                       new ShopingListItem("Orez", "3"),
                       new ShopingListItem("Kaki", "9"),
                       new ShopingListItem("Battery", "1"),
                       new ShopingListItem("Bla", "1"),
                       new ShopingListItem("Bla bla", "100"),
                       new ShopingListItem("bbb", "200"),
                       new ShopingListItem("Red", "2"),

                     };
         return items;
    }
} 
```

代码的结果是一个列表，但只有一个项目（名称），金额未添加

任何人都可以找到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T19:54:30.510

您的行布局的第一个 TextView 填充了*整*行，将第二个 TextView 推离了屏幕。您需要更改行布局。要么使用`wrap_content`：

```
<TextView android:id="@+id/prudctName"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    ... /> 
```

或者您可以合并`layout_weight`.

# ruby-on-rails - 在 Foundation 中扩展几个按钮类不会继承它们的悬停状态

> ID：13867351
> 
> 赞同：0
> 
> 时间：2012-12-13T19:51:08.197
> 
> 标签：ruby-on-rails, sass, zurb-foundation, compass-sass

（这真的很难解释）我正在尝试在 Foundation 中创建一个新的按钮类，如下所示：

```
.btn {
  @extend .button;
  @extend .small;
  @extend .radius;
  @extend .secondary;
} 
```

它工作正常并获取所有父样式，除了`hover`状态样式。
例如考虑这些：

```
<a href="button small secondary radius disabled" href="#">A button</a>
<!-- hover color is gray --> 
```

和

```
<a href="btn disabled" href="#">A button</a>
<!-- hover color is white, but it should be gray --> 
```

我试过这个，但没有奏效：

```
.btn {
  @extend .button;
  @extend .small;
  @extend .radius;
  @extend .secondary;
  .disabled {
    @extend .disabled;
  }
} 
```

我正在使用带有 Rails 3.2.9 的 zurb-foundation gem。
知道如何解决吗？

**编辑**

这是生成的CSS：

```
.button.disabled, .disabled.btn, .btn .btn.disabled, .btn .button.disabled, .button[disabled], [disabled].btn {
  opacity: 0.6;
  cursor: default;
  background: #2ba6cb;
  -webkit-box-shadow: none;
  -moz-box-shadow: none;
  box-shadow: none;
}

.button.disabled :hover, .disabled.btn :hover, .button[disabled] :hover, [disabled].btn :hover {
  background: #2ba6cb;
}

.button.disabled.success, .disabled.success.btn, .button[disabled].success, [disabled].success.btn {
  background-color: #5da423;
}

.button.disabled.success:hover, .disabled.success.btn:hover, .button.disabled.success:focus, .disabled.success.btn:focus, .button[disabled].success:hover, [disabled].success.btn:hover, .button[disabled].success:focus, [disabled].success.btn:focus {
  background-color: #5da423;
  outline: none;
}

.button.disabled.alert, .disabled.alert.btn, .button[disabled].alert, [disabled].alert.btn {
  background-color: #c60f13;
}

.button.disabled.alert:hover, .disabled.alert.btn:hover, .button.disabled.alert:focus, .disabled.alert.btn:focus, .button[disabled].alert:hover, [disabled].alert.btn:hover, .button[disabled].alert:focus, [disabled].alert.btn:focus {
  background-color: #c60f13;
  outline: none;
}

.button.disabled.secondary, .disabled.btn, .btn .btn.disabled, .button[disabled].secondary, [disabled].btn {
  background-color: #e9e9e9;
}

.button.disabled.secondary:hover, .disabled.btn:hover, .button.disabled.secondary:focus, .disabled.btn:focus, .button[disabled].secondary:hover, [disabled].btn:hover, .button[disabled].secondary:focus, [disabled].btn:focus {
  background-color: #e9e9e9;
  outline: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:37:24.603

如果你想要的是一条捷径，`button small secondary radius`那么你为什么不扩展它呢？它应该产生更清洁的输出。

```
.btn
{
    @extend .button.small.secondary.radius;
} 
```

还要确保在foundation.css 之后引用了您的自定义CSS，这可能会覆盖您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:36:36.993

经过一段时间的努力，我设法以这种方式解决了它：

```
.btn {
  @extend .button;
  @extend .secondary;
  @extend .radius;
  @extend .small;
  &.disabled {
    @extend .button;
    @extend .disabled;
} 
```

现在它给了我正确的输出！

# html - CSS下拉菜单被父div高度切断

> ID：13867353
> 
> 赞同：2
> 
> 时间：2012-12-13T19:51:15.263
> 
> 标签：html, css

在我的设置中，我将导航栏水平设置并包含在我的标题 div 中，如下所示：

```
<div id="header-section">
    <div id="main-menu-wrapper">
        <ul id="main-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="#">Services</a>
                <ul id="sub-men">
                    <li><a href="#">Service 1</a></li>
                    <li><a href="#">Service 2</a></li>
                    <li><a href="#">Service 3</a></li>
                </ul>
            </li>
        </ul>
        <div class="clear"></div>
    </div>
</div> 
```

我的问题是子菜单没有显示，因为“主菜单包装器”的高度设置为自动。当我将高度设置为 100 像素时，会显示子菜单。当我将子菜单上的位置设置为静态而不是绝对时，它会扩展整个主菜单包装器。如何让子菜单正确显示？

这是我整个标题部分的 CSS 部分：

```
#header-section {
position: relative;
width: 100%;
padding: 5px 0px;
background: #740600;
}

#main-menu-wrapper {
position: relative;
width: 74%;
min-width: 600px;
height: auto;
margin: 0% auto;
}

#main-menu {
list-style: none;
font-weight: bold;
line-height: 150%;
}

#main-menu li {
position: relative;
float: right;
margin: 0px 5px;
}

#main-menu a {
padding: 3px;
color: #ffffff;
background: #740600;
text-decoration: none;
border-radius: 5px;
}

#main-menu a:hover {
padding: 3px;
color: #740600;
background: #ffffff;
text-decoration: none;
}

#main-menu li ul {
position: absolute;
display: none;
}

#main-menu li ul li{
float: none;
}

#main-menu li:hover ul {
display: block;
}

#main-menu li ul a {
padding: 3px;
color: #ccc;
background: #740600;
text-decoration: none;
border-radius: 5px;
}

#main-menu li ul a:hover {
padding: 3px;
color: #740600;
background: #ccc;
text-decoration: none;
}

#banner-wrapper {
position: relative;
padding: 5px 0 5px;
}

#banner {
position: relative;
max-width: 75%;
min-width: 600px;
margin: 0% auto;
background: #ffffff;
}

#logo {
max-width: 600px;
height: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:16:22.150

我对你在这里问的内容有点困惑，但我在你的菜单显示的地方创建了一个小提琴。

我删除了#main-menu-wrapper 的样式，并删除了#header-section 的背景颜色。

希望这对您来说是一个不错的起点：http: [//jsfiddle.net/44vRN/](http://jsfiddle.net/44vRN/)

```
#header-section {
position: relative;
width: 100%;
padding: 5px 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:10:42.057

您可以尝试在子菜单上使用绝对定位将其从文档流中删除。

# android - 使用自动增量字段和关系升级表

> ID：13867357
> 
> 赞同：0
> 
> 时间：2012-12-13T19:51:29.593
> 
> 标签：android, sqlite, upgrade, auto-increment, database-relations

我有 2 张桌子。带有名称的标题和带有文本的详细信息：

```
create table Headers (_id integer primary key autoincrement, name string);
create table Details (_id integer primary key autoincrement, id_headers integet, text string); 
```

id_headers 是表 Headers 行的链接（一对多）。我想写一个方法来升级这些表。我知道的第一个也是最少的情况是创建第一个和第二个表的临时表副本，创建新结构并将数据插入新结构。

但在这种情况下，所有“id_headers 到 _id”的关系都将丢失。我怎样才能让它们保持新的结构，同时我希望它们保持“自动增量”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:20:38.790

SQLiteDatabase.insert 返回新的 _id。首先插入 Headers 表数据，在临时数据结构中创建新 _id 与 _id 的映射。

现在，当您填充详细信息表时，请查阅地图以获取旧的 id_headers 值以获取新的 id_headers 值。

```
private void migrate(SQLiteDatabase db){
    ArrayList<Header> oldHeaders = new ArrayList<Header>();
    ArrayList<Detail> oldDetails = new ArrayList<Detail>)();
    HashMap<Long,Long> idMap = new HashMap<Long,Long>();

    Cursor oldHeadersCurs = db.query("Headers", null, null, null, null, null, null);
    oldHeadersCurs.moveToFirst();

    //store the old header records
    while (!oldHeadersCurs.isAfterLast()){
        long oldId = oldHeadersCurs.getLong(oldHeadersCurs.getColumnIndex("_id"));
        String name = oldHeadersCurs.getString(oldHeadersCurs.getColumnIndex("name"));
        oldHeaders.put(new Header(oldId,name));

        oldHeadersCurs.moveToNext();
    }

    //delete the headers table
    db.execSQL("DROP TABLE Headers");
    //create the new headers table
    db.execSQL(CREATE_NEW_HEADERS_TABLE_STMT);

    //insert the header records capturing the new id
    for (Header header : oldHeaders){
        ContentValues cv = new ContentValues();
        cv.put("name", header.getName());
        long newId = db.insert("Headers", null, cv);
        idMap.put(header.getId(), newId); //mapping the old _id to the new 
    }

    //store the old detail records
    Cursor oldDetailsCurs = db.query("Details", null, null, null, null, null, null);
    oldDetailsCurs.moveToFirst();
    while (!oldDetailsCurs.isAfterLast()){
        //btw text is a data type in sqlite, you need to rename this column
        String text = oldDetailsCurs.getString(oldDetailsCurs.getColumnIndex("text"));
        long oldHeaderId = oldDetailsCurs.getLong(oldDetailsCurs.getColumnIndex("id_headers"));
        oldDetails.put(new Detail(text,oldHeaderId));
        oldDetails.moveToNext();
    }

    //recreate details table
    db.execSQL("DROP TABLE Details");
    db.execSQL("CREATE_NEW_DETAILS_TABLE_STMT");

    //insert the new detail records using the id map
    for (Detail detail : oldDetails){
        ContentValues cv = new ContentValues();
        cv.put("text",detail.getText());
        cv.put("id", idMap.get(detail.getHeaderId())); //retrieving the new _id based on the old
        db.insert("Details", null, cv);
    }
} 
```

# android - Android位置修复不准确/旧但谷歌地图有效

> ID：13867363
> 
> 赞同：2
> 
> 时间：2012-12-13T19:51:54.593
> 
> 标签：android, google-maps, maps

这是一个奇怪的问题，主要出现在三星设备上，但我无法确认它只在三星上。

我的应用无法获取或更新到正确的位置修复。它会听取 GPS、网络和手机提供商的信息，但我得到的位置修复仍然过时且不准确，有时修复就像前一天一样。

我认为这可能是我的代码中的一个错误，但后来我打开了其他应用程序（Yelp 等），它们也有同样的问题。

然后我打开谷歌地图，位置非常准确且是最新的。

这是Android平台的错误吗？地图是否使用不同的内部位置源提供程序？有没有人处理过这个问题并且可以提供解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T14:12:35.753

转到设置>wifi>高级并关闭始终允许扫描

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T09:06:25.377

我遇到了同样的问题。这是一个 Android 平台错误，似乎这是 Google 知道的一个未解决问题： [https ://code.google.com/p/android/issues/detail?id=57707](https://code.google.com/p/android/issues/detail?id=57707)

它是随机发生的。Google 地图之所以有效，是因为它们的位置基于您也可以使用的 Google 服务（融合位置）。但是他们在 2014 年 1 月的更新中也有一个错误：如果您在外面并请求最快的位置更新速率（例如每秒）并且您连接到网络和 gps 接收器，您将在 10 点左右收到一个新位置即使 gps 已连接，秒数。他们破坏了我的应用程序，该应用程序曾经在此更新中正常工作，但至今仍未修复！

所以你可以做的是等待修复或使用谷歌位置服务融合位置，如果它适合你！

# javascript - jQuery滚动到锚标签时滑出一个DIV〜

> ID：13867369
> 
> 赞同：1
> 
> 时间：2012-12-13T19:51:58.150
> 
> 标签：javascript, jquery, css

我想在定义的页面区域内滑动一个包含内容的 DIV；在一个长的垂直 1 页网站内。

我用 6 个 DIV 块设置它；

块 5 我有一个包含在 DIV 中的 CSS3 / jQuery 动画——我想用*jQuery*滑出页面（从左侧或右侧）。

我正在考虑从定义的锚点确定滑动点；放在我希望DIV滑入的区域的标记内。

我怎么能写这个；

..类似于 -- if 锚标签；滑入？

就像是;

```
 slideLeftHide: function() {
    return this.each(function() {
      $(this).hide('slide', {direction: 'left'}, 1000);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:51:37.643

[http://jsfiddle.net/SZ8uH/2/](http://jsfiddle.net/SZ8uH/2/)

尝试这样的事情：

```
var animInTriggeredAt = $("a#slidein").offset().top; //show when the anchor comes on stage
var animOutTriggeredAt = animInTriggeredAt + $(window).height(); //hide when it leaves the stage
var animActive = false;

// handle scroll event
$(window).scroll(checkScrollCues);

function checkScrollCues(){
    var scrollY = $(window).scrollTop();
    if (scrollY > animInTriggeredAt && scrollY < animOutTriggeredAt && !animActive){
        animActive = true;
        $("#myAnimatedDiv").show(); //put whatever animation code you want in here
    } else if ((scrollY < animInTriggeredAt || scrollY > animOutTriggeredAt) && animActive){
         animActive = false;
        $("#myAnimatedDiv").hide(); //put whatever animation code you want in here
    }
} 
```

# xcode - 在设备项目之间共享代码

> ID：13867373
> 
> 赞同：0
> 
> 时间：2012-12-13T19:52:09.690
> 
> 标签：xcode, cordova, intellij-idea

我正在使用 ItelliJ 和 XCode 4.5 来开发 PhoneGap 应用程序。我想分享两个项目之间使用的大量资源，但还没有找到好的解决方案。我尝试了符号链接，但最终效果不佳。有没有办法让我做到这一点，而不必确保我的代码在设备之间同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:25:02.680

我将项目分为几个部分：

*   "www" 项目，其中包含 html/js/css
*   安卓项目
*   ios项目

Android 和 ios 项目回购有“www”项目回购作为子模块（我使用 git）。
我还在“www”项目中创建了单独的文件夹 ios 和 android。

在 index.html 中，我分析用户代理字符串并包含适当的 phonegap.js 文件。
[例子](https://gist.github.com/4283398)。

# http - 从简单的 HTML 按钮输入运行 Unix shell 脚本

> ID：13867375
> 
> 赞同：1
> 
> 时间：2012-12-13T19:52:16.660
> 
> 标签：http

我整个下午都在谷歌搜索，没有运气，所以我来找你帮忙！

我有一个托管最简单网页的嵌入式系统：

```
<html>
<head></head>
<body>
   <input type="button" value="Run" action="">
</body>
</html> 
```

该页面还有更多内容（仅显示了一些系统变量），但这基本上就是全部了。我从一个简单的 C 应用程序生成这个页面，该应用程序只是在我的嵌入式系统的 web 目录中创建和更新一个小的 run.html 文件。

我想要做的是，当用户浏览页面并按下按钮时，一个简单的 shell 脚本或 c 应用程序将创建一个小的 go.txt 文件，文件中可能包含两个字符“GO”。只是某种文件允许另一个应用程序最终知道该按钮已被按下。

我推测有一些类似`action="/root/fs/go.sh"`的语法可能允许我进行这种访问，但我的实验没有取得成功。我应该注意，我们使用的机器上没有启用 PHP。

我对小组的问题：就这么简单吗？还是我错过了一些明显的网络技术问题并走上了完全错误的道路？任何反馈将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:50:59.123

要获得所需的行为，您必须在 Web 服务器上做一些工作。您将需要在服务器上有一些代码，这些代码将在收到表单后运行您想要的脚本。服务器上的代码几乎可以是任何东西：PHP 脚本、您用 C 编写的 CGI 应用程序、自定义 Apache 模块等。

最重要的是，您必须在服务器端编写一些代码来支持该行为。HTML 标准中没有任何内容允许客户端请求任何脚本在服务器上运行。

# java - Mongdb 在创建初始集合时跳过插入

> ID：13867377
> 
> 赞同：0
> 
> 时间：2012-12-13T19:52:25.217
> 
> 标签：java, mongodb

似乎在最初创建集合时，有一段时间不能插入文档。所以运行下面的代码我只得到第一个插入。

```
Mongo mongo = new Mongo("localhost", 27017);
DB db = mongo.getDB( "workqueue" );
DBCollection coll = db.getCollection("jobs");

coll.insert(new BasicDBObject("desc", "test1"));
coll.insert(new BasicDBObject("desc", "test2"));
coll.insert(new BasicDBObject("desc", "test3")); 
```

但是，如果我在每个插入之间放置一个线程睡眠，我会得到所有 3 个。这是一个错误还是我做错了什么？

# asp.net-mvc - Sitecore 6.6、MVC 3 和 System.Web.Optimization？

> ID：13867383
> 
> 赞同：6
> 
> 时间：2012-12-13T19:52:40.853
> 
> 标签：asp.net-mvc, sitecore, bundle, minify

Sitecore 还不支持 MVC 4，我想使用 System.Web.Optimization 的捆绑和缩小。

对捆绑包的请求以 404 Not Found 响应。

**捆绑配置.cs**：

```
public class BundleConfig
{
    // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                    "~/Scripts/jquery-ui-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*"));

        // Use the development version of Modernizr to develop with and learn from. Then, when you're
        // ready for production, use the build tool at http://modernizr.com to pick only the tests you need.
        bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                    "~/Scripts/modernizr-*"));

        bundles.Add(new StyleBundle("~/content/css").Include(
                    "~/Content/site.css",
                    "~/Content/960.gs/960.css"));

        bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                    "~/Content/themes/base/jquery.ui.core.css",
                    "~/Content/themes/base/jquery.ui.resizable.css",
                    "~/Content/themes/base/jquery.ui.selectable.css",
                    "~/Content/themes/base/jquery.ui.accordion.css",
                    "~/Content/themes/base/jquery.ui.autocomplete.css",
                    "~/Content/themes/base/jquery.ui.button.css",
                    "~/Content/themes/base/jquery.ui.dialog.css",
                    "~/Content/themes/base/jquery.ui.slider.css",
                    "~/Content/themes/base/jquery.ui.tabs.css",
                    "~/Content/themes/base/jquery.ui.datepicker.css",
                    "~/Content/themes/base/jquery.ui.progressbar.css",
                    "~/Content/themes/base/jquery.ui.theme.css"));
    }
} 
```

**_Layout.cshtml**：

```
@using System.Web.Optimization
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title</title>
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>
    <body>
        <div class="container_12">
            <a href="/"><h1>Title</h1></a>
            @Html.Action("Utilities", "Navigation")
            @Html.Action("Menu", "Navigation")
            @RenderBody()
        </div>
        @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

捆绑包的路径是虚拟的，不会映射到物理文件夹。

忽略路由会引发 NotImplementedException 和 500 内部服务器错误：

```
routes.IgnoreRoute("content/{*pathInfo}");
routes.IgnoreRoute("bundles/{*pathInfo}"); 
```

.. 但除此之外，请求由 Sitecore 处理并以 404 Not Found + Redirect 响应。

我也试过：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="false">
        <remove name="BundleModule"/>
        <add type="System.Web.Optimization.BundleModule" name="BundleModule"/>
    </modules> 
```

我不能让这一切一起工作。帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T20:24:22.567

圣母玛利亚！

Hackaround以下路线：

```
routes.MapRoute(
    "sc_ignore_Bundles_Css",
    "content/{*pathInfo}"
);

routes.MapRoute(
    "sc_ignore_Bundles_Js",
    "bundles/{*pathInfo}"
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T18:15:09.360

有一个名为“IgnoreUrlPrefixes”的 Sitecore 设置，使用 sitecore 配置包含您可以修补此设置以包括例如“/bundles”，它允许您将 /bundles/* url 用于 ASP.NET Web 优化捆绑功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T12:55:26.800

在我的情况下，使用 Sitecore 6.6 update 5，我可以通过执行以下操作使捆绑工作：

首先，将其添加到 web.config：

```
<system.webServer>
<modules runAllManagedModulesForAllRequests="false">
    <remove name="BundleModule"/>
    <add type="System.Web.Optimization.BundleModule" name="BundleModule"/>
</modules>
... 
```

其次，我在管道中添加了一个管道方法，用于在捆绑表中注册捆绑包：

```
[UsedImplicitly]
public virtual void Process(PipelineArgs args)
{
    BundleTable.EnableOptimizations = true;            
    RegisterBundles( BundleTable.Bundles );
}

private void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                "~/Scripts/jquery-{version}.js"));
} 
```

接下来，我通过补丁文件将管道方法添加到管道中：

```
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
   <sitecore>
      <pipelines>
         <initialize>
            <processor patch:before="processor[@type='Sitecore.Mvc.Pipelines.Loader.InitializeGlobalFilters, Sitecore.Mvc']"
               type="MyStuff.Web.Pipelines.RegisterMyBundles, MyStuff.Web" />
         </initialize>
      </pipelines>
   </sitecore>
</configuration> 
```

最后，我修补了 sitecore 中的 IgnoreUrlPrefixes 设置以添加 /bundles 路径

```
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
   <sitecore>
      <settings>
         <setting name="IgnoreUrlPrefixes"
                  value="(all other sitecore paths here)|/bundles"/>
      </settings>
   </sitecore>
</configuration> 
```

... 不需要其他任何东西 - 像冠军一样工作。

# mysql - mysqldump：无法从亚马逊 RDS 创建/写入文件错误

> ID：13867387
> 
> 赞同：0
> 
> 时间：2012-12-13T19:53:04.757
> 
> 标签：mysql, amazon-rds

我正在尝试转储在 Amazon 的 RDS 服务 mysql 版本 5.5.27 上运行的数据库。这是我正在运行的命令：

```
my-ec2-instance# mysqldump -hec2-xx-xx-xx-xx.compute-1.amazonaws.com -uuser -pwhatever mydb 
```

我收到以下错误：

```
mysqldump: Couldn't execute 'show fields from `MyTable`': Can't create/write to file '/tmp/#sql_1405_0.MYI' (Errcode: 2) (1) 
```

因此，由于错误消息表明它在“显示字段”上失败，我尝试直接从 mysql 解释器执行“显示来自 MyTable 的字段”。我得到了似乎是文件问题：

```
mysql> show fields from MyTable;
ERROR 1 (HY000): Can't create/write to file '/tmp/#sql_1405_0.MYI' (Errcode: 2) 
```

但是，在出现此错误的同一 EC2 实例上，我可以创建此文件并将其删除：

```
my-ec2-instance# touch /tmp/#sql_1405_0.MYI; ls /tmp/#sql*;rm /tmp/#sql_1405_0.MYI
/tmp/#sql_1405_0.MYI
rm: remove regular empty file `/tmp/#sql_1405_0.MYI'? 
```

我在本地机器上尝试过同样的事情，我得到了同样的结果。谷歌搜索没有结果。如何防止发生此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T13:17:47.323

正如 Mike Brant 建议的那样，我在 EC2 上调整了实例的大小，这迫使它切换机器，将其重新调整回原来的大小，问题就不再发生了。

我仍然不清楚根本原因，但它似乎归结为某种不良状态或特定于我当时使用的 EC2 实例的错误配置。

# .net - 在线程上调用方法、使用异步编程模型处理任务和使用 BackgroundWorkerThread 之间的基本区别是什么

> ID：13867389
> 
> 赞同：2
> 
> 时间：2012-12-13T19:53:05.517
> 
> 标签：.net, multithreading

我了解多线程的基本目的。我也知道我们可以使用异步编程模型，BackgroundWorkerComponent，或者简单地调用另一个线程上的任务来实现并发。但是我不明白这三种实现并发的方式之间的基本区别。谁能告诉我清楚。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:00:28.413

使用异步编程模型或 BackgroundWorker 组件，您正在使用两种不同的模型 (API) 在线程池线程上运行代码。

BackgroundWorker 的模型相当简单，但非常适合某些类型的任务。BackgroundWorker 遵循（过时的）[基于事件的异步模式](http://msdn.microsoft.com/en-us/library/ms228969.aspx)(EAP)。一般来说，我更喜欢 APM，除非该任务非常适合 BackgroundWorker。

使用线程池可能是有利的，因为创建线程存在一定的开销（例如为线程分配堆栈空间等）。

当您自己创建线程时，您并没有使用线程池线程（除非您调用适当的 API 来访问它）。因此，您需要支付创建线程的成本。如果您的线程运行时间相当长，这可能是一件合理的事情，因为成本在线程的生命周期内分摊，并且您不会消耗有限的线程池线程之一。

我会指出你的问题没有提到

> 基于任务的异步模式 (TAP)

[http://msdn.microsoft.com/en-us/library/hh873175.aspx](http://msdn.microsoft.com/en-us/library/hh873175.aspx)

推荐用于所有新开发。

# matlab - 从 MATLAB 中的单元格中提取字符串

> ID：13867391
> 
> 赞同：0
> 
> 时间：2012-12-13T19:53:19.753
> 
> 标签：matlab

> **可能重复：**
> [使用正则表达式查找单词](https://stackoverflow.com/questions/13829563/using-regexp-to-find-a-word)

我正在为我的 CS 课程做作业。我们得到一个纯文本文件，在我的例子中，它包含一系列推文。我需要做的是创建一个脚本来检测主题标签，然后将每个主题标签保存到一个单元格数组中。

到目前为止，我知道如何编写一个检测“#”符号的函数......

```
strfind(textRead{i},'#'); 
```

where 在 for 循环中 i=1:30 （即文本单元格的数量）。但是，除此之外，我不知道应该如何编写一个脚本来检测“#”并返回该和下一个“”（空格）字符之间的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:02:02.027

尝试这个：

```
str = '#someHashtag other tweet text ignore #random';
regexp(str, '#[A-z]*', 'match') 
```

我想你可以自己找到其余的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:10:42.123

这是基本骨架。但请确保使用正确的正则表达式来提取值；-)

是的，使用上述 Dorin 的正则表达式并匹配您一次得到一个值。您可以`token`根据这个示例从 mathworks 添加一个。样本：

```
str = ['if <code>A </code> == x<sup>2 </sup>, ' ... '<em>disp(x) </em>'] 
str = if <code>A </code> == x<sup>2 </sup>, <em>disp(x) </em> 
expr = '<(\w+).*?>.*?</\1>';
[tok mat] = regexp(str, expr, 'tokens', 'match'); 
tok{:}
ans = 'code' 
ans = 'sup' 
ans = 'em' 
```

在上面的代码中，您实际上并不需要循环并且可以将整个文本块作为一个字符串处理，希望不会达到任何字符串限制......但是如果您想循环，或者如果您需要循环，您可以使用以下示例与 Rody 的正则表达式和仅匹配。

```
 fid = fopen('data.txt'); 
 dataText = fgetl(fid);
 while ~feof(fid) 
    ldata = textscan(dataText,'*%d#*'); 
          X = (ldata, '#[A-z]*', 'match') 
         Cellarray =  X{1}      
   end
  Disp(X)
 fclose(fid); 
```

# jquery - bootstrap-datepicker-rails - 选择日期不会持续

> ID：13867394
> 
> 赞同：1
> 
> 时间：2012-12-13T19:53:31.703
> 
> 标签：jquery, ruby-on-rails, datepicker, coffeescript, bootstrap-sass

我已经安装了以下 gem，并正在尝试实现一个 datepicker。日期选择器显示在该字段中，但是当我选择一个日期时，数据不会持续存在，甚至不会显示在该字段中。我的咖啡脚本或 html 是否出错 - 或者这可能是宝石之间的不兼容？

```
gem 'bootstrap-sass'
gem 'bootstrap-datepicker-rails' 
```

[http://www.eyecon.ro/bootstrap-datepicker/](https://github.com/Nerian/bootstrap-datepicker-rails)

[https://github.com/Nerian/bootstrap-datepicker-rails](https://github.com/Nerian/bootstrap-datepicker-rails)

文章.js.coffeescript

```
jQuery ->
  $('#datepicker').datepicker()
    dateFormat: 'yyyy-mm-dd'
    weekStart: 0
    autoclose: true 
```

_form.html.erb

```
<div class="field" id="datepicker" data-date="current" > 
  <%= f.label :due %>
  <%= f.text_field :due, 'data-behaviour' => 'datepicker' %>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-08T14:50:24.620

在 Bootstrap 日期选择器格式中，您需要以这种方式格式化日期：

```
<script type="text/javascript">
$(document).ready(function(){
  $('[data-behaviour=datepicker]').datepicker({format: 'yyyy-mm-dd'});
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:55:55.960

[尝试从http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)下载原始文件并将它们分别放入您的 javascripts 和 stylesheets 目录中。然后，在你的 application.js 中确保你有

```
//= require bootstrap-datepicker 
```

在您的 application.css 文件中

```
*= require datepicker 
```

在您的视图文件中，首先尝试以下简单的代码行（您可以将其放在 div 中，但删除 div 中的 id）：

```
<%= f.text_field :due, :id => "datepicker" %> 
```

和（在同一文件的末尾）

```
<script>
$('#datepicker').datepicker({format: 'mm-dd-yyyy'});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-19T14:22:31.070

您使用的日期选择器必须与其他一些 javascript 冲突。尝试在放置日期选择器的同一页面上使用它。

# image-processing - 移动居中图像/删除左边框并保留大小

> ID：13867398
> 
> 赞同：0
> 
> 时间：2012-12-13T19:53:43.190
> 
> 标签：image-processing, imagemagick

我有大约 400 张相同大小的图像，但实际图像内容以白色边框为中心。当我在列表中显示其中的一些时，这看起来很奇怪，因为左侧边框大小因图像内容而异。

我想基本上删除左侧边框但保持图像大小，并用白色填充右侧。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:04:48.107

我会为您的整个图像添加一个白色边框并使用 -trim 删除边框和白色 L/H 边框。然后使用带有 -gravity west 和 -background white 的 -extent 将边框添加到 RH 侧。

就像是：

```
convert input.jpg -bordercolor White -border 2x2 -trim +repage -background white -gravity west -extent 500x800 output.png 
```

其中 500x800 是图像的最终尺寸。

# c# - 如果对象为空，则返回空字符串

> ID：13867403
> 
> 赞同：2
> 
> 时间：2012-12-13T19:53:50.690
> 
> 标签：c#, linq

对象 i 来自数据库。PrDT 为字符串，PrDateTime 为 DataTimeOffset 类型，可为空

```
vi.PrDT = i.PrDateTime.Value.ToString("s"); 
```

什么是快速方法？我不想要 if else 等...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T19:55:10.037

使用[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)：

```
vi.PrDT = i.PrDateTime.HasValue ? i.PrDateTime.Value.ToString("s") :
                                  string.Empty; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T20:02:43.417

你可以做一个扩展方法：

```
public static class NullableToStringExtensions
{
    public static string ToString<T>(this T? value, string format, string coalesce = null)
        where T : struct, IFormattable
    {
        if (value == null)
        {
            return coalesce;
        }
        else
        {
            return value.Value.ToString(format, null);
        }
    }
} 
```

进而：

```
vi.PrDT = i.PrDateTime.ToString("s", string.Empty); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T20:43:35.230

```
string.Format("{0:s}", i.PrDateTime) 
```

如果它为空，上面将返回一个空字符串。由于`Nullable<T>.ToString`检查空值并返回空字符串，否则返回字符串表示形式（但不能使用格式说明符）。诀窍是使用 string.Format，它允许您使用所需的格式说明符（在本例中为`s`）并仍然获得`Nullable<T>.ToString`行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T11:08:06.713

```
return (i.PrDateTime.Value ?? string.Empty).ToString(); 
```

刚刚测试，它似乎工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-13T19:59:39.040

```
return i.PrDateTime.Value.ToString("s") ?? string.Empty; 
```

# ms-access - MsAccess - 如何仅查找重复记录

> ID：13867406
> 
> 赞同：1
> 
> 时间：2012-12-13T19:54:09.910
> 
> 标签：ms-access, ms-access-2003

我有桌子 -

```
Tbl1

ID       Sort   Amount Price  Address
000123   AAA    135.00 25.00  25Grant
000123   AAB    135.00 15.00  27Pent
000124   AAC    118.00 16.00  47Bay
000125   BBB    116.00 17.00  56Third
000125   BBB    116.00 66.50  56Third 
```

我只需要为字段 ID、排序、金额选择重复记录。我不需要选择价格和地址字段。

我期待结果：

```
ID      Sort  Amount
000125  BBB   116.00 
000125  BBB   116.00 
```

我知道我可以在 MsAccess 查询向导中使用“重复记录查询”。但我需要了解如何在 SQL 中执行此操作。

当我查看“设计”或“SQL”视图时，我仍然没有完全理解算法。

如果有人可以在这里写出 - 查找重复查询 - 并附上解释，我将不胜感激......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T19:55:37.113

```
SELECT ID, Sort, Amount, COUNT(*) 
FROM yourtable
GROUP BY ID, Sort, Amount
HAVING COUNT(*) > 1 
```

# ms-access-2007 - MS Access：对 SUM() 值进行排名

> ID：13867407
> 
> 赞同：2
> 
> 时间：2012-12-13T19:54:18.740
> 
> 标签：ms-access-2007

我正在开发一个仍在使用 MS Access 作为数据源的旧 Web 应用程序，并且在尝试对 SUM() 值进行排名时遇到了问题。

假设我有 2 个不同的帐号，每个帐号都有未知数量的发票。我需要总结所有发票的总数，按帐号分组，然后添加排名（1-2）。

原始表示例...

帐户 | 销售 | 发票编号
001 | 400 | 123
002 | 150 | 456
001 | 300 | 789

期望的结果...

帐户 | 销售 | 排名
001 | 700 | 1
002 | 150 | 2

我试过了...

SELECT Account, SUM(Sales) A​​S Sales, (SELECT COUNT(*) FROM Invoices) A​​S RANK FROM Invoices ORDER BY Account

但是该查询一直返回分配给该帐户的记录数，而不是排名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:47:35.940

这在带有运行计数的报告中会更容易：[报告 - 组内的运行计数](https://stackoverflow.com/questions/1062648/report-running-count-within-a-group)

这在查询中不是标准的，但您可以使用自定义函数做一些事情（它很精细，但可能）：http: [//support.microsoft.com/kb/94397/en-us](http://support.microsoft.com/kb/94397/en-us)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:00:12.133

最简单的方法是将其分解为 2 个查询，第一个是这个，我将其保存为**qryInvoices**：

```
SELECT Invoices.Account, Sum(Invoices.Sales) AS Sales
FROM Invoices
GROUP BY Invoices.Account; 
```

然后第二个查询使用第一个查询，如下所示：

```
SELECT qryInvoices.Account, qryInvoices.Sales, (SELECT Count(*) FROM qryInvoices AS I WHERE I.Sales > qryInvoices.Sales)+1 AS Rank
FROM qryInvoices
ORDER BY qryInvoices.Sales DESC; 
```

我已经对此进行了测试，并得到了问题中概述的预期结果。

注意：可以使用**定义**表在一个查询中实现，但在这种情况下，它看起来有点难看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T09:58:11.040

如果您需要一个查询的答案，它应该是

```
SELECT inv.*, ( 
    SELECT 1+COUNT(*) FROM (
        SELECT Account, Sum(Sales) AS Sum_sales FROM Invoices GROUP BY Account
    ) WHERE Sum_sales > inv.Sum_sales
) AS Rank
FROM (
    SELECT Account, Sum(Sales) AS Sum_sales  FROM Invoices GROUP BY Account
) inv 
```

我已经在 Access 上尝试过它并且它有效。您还可以为上述“Sum_sales”的两个实例使用不同的名称以避免混淆（在这种情况下，您可以删除“inv.”前缀）。

# ios - 我正在使用 uiwebview 中加载的内容可编辑 html。我需要代码来设置键盘隐藏/显示时的光标位置

> ID：13867411
> 
> 赞同：2
> 
> 时间：2012-12-13T19:54:35.220
> 
> 标签：ios, uiwebview, contenteditable, evernote, rich-text-editor

我正在使用 uiwebview 中加载的内容可编辑 html。我需要代码来设置键盘隐藏/显示时的光标位置。

目前，当我点击 webview 时，键盘会出现，但内容会隐藏在键盘后面。当我继续按下返回键时，也会发生同样的情况，光标/文本位于 webview 后面或不可见。

为了抢占先机，我需要 iPad Evernote 应用程序中使用的功能。你可以看到光标永远不会在键盘后面，它总是从键盘上方开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:49:20.033

我为此使用了javascript。我正在使用一个类来使代码更有条理（所以你会在代码中看到一些`this`），但这不是必需的。

```
// this is used to get the current coordinates of the selection - not very efficient, so it shouldn't be called too often
this.updateOffset = function() {
  try{
    var sel = window.getSelection();
    range = sel.getRangeAt(0);
    if(this.tmpSpan==null){
      this.tmpSpan = document.createElement('span');
    }
    range.insertNode(this.tmpSpan);
    this.yOffset = this.tmpSpan.offsetTop;
    this.xOffset = this.tmpSpan.offsetLeft;
    this.tmpSpan.parentNode.removeChild(this.tmpSpan);
  }
  catch(exc){
    log('updateOffset:' + exc.toString());
  }
}

// eContent is the div with 'contenteditable', while visibleHeight is an int, set from objective-c (depending on where the webview is positioned, keyboard height and screen height)
this.scrollToVisible = function(){
  try {
    if(this.eContent.clientHeight>this.visibleHeight){
      this.updateOffset();
      if(this.yOffset<window.pageYOffset){
        window.scrollTo(0, this.yOffset);
      }
      else if(this.yOffset-window.pageYOffset>this.visibleHeight){
        window.scrollTo(0, this.yOffset-this.visibleHeight);
      }
    }
  }
  catch (exc){
    log('scrollToVisible: ', exc.toString());
  }
} 
```

在objective-c中，我在键盘显示期间设置visibleHeight，然后在键盘显示`scrollToVisible`完成时调用。

```
-(void)setVisibleHeight:(int)height{
    [self stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"docState.visibleHeight=%d", height]];
}
-(void)scrollToVisible{
    [self stringByEvaluatingJavaScriptFromString:@"docState.scrollToVisible()"];
} 
```

`scrollToVisible`在 javascript 事件上也被调用：onkeyup、onpaset、oncut，它修复了按下“return”或换行时的问题。

如果您决定采用这种方式，则在滚动浏览 javascript 时需要非常小心，否则可能会导致 UIWebview 控件出现一些问题（例如：将光标放在错误的位置，将光标自动移动到顶部文件等）

**编辑**
关于`visibleHeight`. 据我所知，我使用它是因为我无法从 javascript 中获得实际的可见高度（`document.body.clientHeight`还包括键盘后面的区域）。

由于我正在`UIWebView`全屏显示，因此我将可见高度设置如下：

```
- (void)keyboardWillShow:(NSNotification *)notification {
    ...
    NSDictionary *userInfo = [notification userInfo];
    NSValue* aValue = [userInfo objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardRect = [aValue CGRectValue];
    CGRect kbRect = [self.window convertRect:keyboardRect fromView:nil];
    _kbRect = kbRect;

    CGPoint sorigin = [self.superview convertPoint:self.frame.origin toView:nil];
    int visibleHeight = _kbRect.origin.y-sorigin.y-_tlbInputAccessory.frame.size.height-lkPadBottom; // _tlbInputAccessory is a custom accessory view
    [self stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"docState.setVisibleHeight(%d)", height]];
    ...
} 
```

请注意，我是从 的子类调用它`UIWebView`，因此`self`将表示`UIWebView`控件。

# c# - 存储过程不会将控制权返回给 C# 代码

> ID：13867418
> 
> 赞同：2
> 
> 时间：2012-12-13T19:55:15.300
> 
> 标签：c#, .net, sql, sql-server, stored-procedures

我遇到了一个非常奇怪的问题：即使正确及时地插入了数据，存储过程也没有返回。最令人震惊的是，记录时间戳字段总是在几毫秒内填充，因此数据似乎非常快地进入表。但回归永远不会发生。

所有这一切的重要部分是它只发生在负载下——单个请求就可以了。只有当 DB 压力足够大时，这件事才开始发生。

欢迎任何想法，因为我几乎不了解什么是错误的。

这是简化的 C# 部分：

```
try 
{
    using (var conn = new SqlConnection(connString))
    {
        conn.Open();

        using (var cmd = new SqlCommand(conn, ....)
        {
            cmd.CommandType = StoredProcedure;

            cmd.ExecuteNonQuery();

            // THIS NEVER EXECUTES:
            ReportSuccess();
        }
    }
}
catch (TimeoutException)
{
    // EXCEPTION HERE
} 
```

和存储过程：

```
CREATE PROCEDURE dbo.Blah
BEGIN
    INSERT dbo.MyTable VALUES (...)

    INSERT dbo.MyTable2...

    -- Here is where everything stops.

END 
```

更新：我们尽力将超时和 SQL 服务器活动关联起来，并且似乎非应用程序用户活动导致了锁定。该过程旨在允许非常快速的插入和非常快速的读取。然而，有些人会在没有实际使用 DIRTY READ 策略的情况下执行非常昂贵的查询，这会破坏脆弱的硬件负载平衡。不过，感谢您的所有提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:05:47.510

根据提供的信息，我最好的猜测是您的存储过程中存在意外问题。

尝试在存储过程中使用事务。如果我的理论是正确的，则不会插入任何记录。

检查 MyTable2 上是否有任何锁被获取。如果您在其他地方对该表进行大选择，请确保您使用的是 nolock。

# matlab - 使用从 matlab 创建的 .vtk 文件进行 xtk 体绘制

> ID：13867422
> 
> 赞同：0
> 
> 时间：2012-12-13T19:55:21.860
> 
> 标签：matlab, vtk, xtk

我从 XTK 开始。我想加载一个 .vtk 文件，以便将体积渲染转换为 XTK。

此 .vtk 文件是使用 matlab 函数创建的，该函数将 3D 数据数组（体素）保存为 vtk 格式：

```
function savevtk(array, filename)
%  savevtk Save a 3-D scalar array in VTK format.
%  savevtk(array, filename) saves a 3-D array of any size to
%  filename in VTK format.
    [nx, ny, nz] = size(array);
    fid = fopen(filename, 'wt');
    fprintf(fid, '# vtk DataFile Version 2.0\n');
    fprintf(fid, 'Comment goes here\n');
    fprintf(fid, 'ASCII\n');
    fprintf(fid, '\n');
    fprintf(fid, 'DATASET STRUCTURED_POINTS\n');
    fprintf(fid, 'DIMENSIONS    %d   %d   %d\n', nx, ny, nz);
    fprintf(fid, '\n');
    fprintf(fid, 'ORIGIN    0.000   0.000   0.000\n');
    fprintf(fid, 'SPACING    1.000   1.000   1.000\n');
    fprintf(fid, '\n');
    fprintf(fid, 'POINT_DATA   %d\n', nx*ny*nz);
    fprintf(fid, 'SCALARS scalars float\n');
    fprintf(fid, 'LOOKUP_TABLE default\n');
    fprintf(fid, '\n');
    for a=1:nx
        for b=1:ny
            for c=1:nz
                fprintf(fid, '%d ', array(a,b,c));
            end
            fprintf(fid, '\n');
        end
    end
    fclose(fid);
return 
```

创建`'output.vtk'`文件后，我尝试以这种方式加载它：

```
window.onload = function() {

var r = new X.renderer3D();
r.init();

// create a mesh from a .vtk file
var skull = new X.mesh();
skull.file = 'output.vtk';

// add the object
r.add(skull);

// .. and render it
r.render();

}; 
```

但是浏览器中什么也没有显示。

我的 'output.vtk' 不是用于体积渲染的有效 .vtk 文件吗？

如何将这种文件加载到 XTK 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:53:50.037

XTK 代码看起来不错，但 vtk 格式的值之间通常没有超过 1 个空格。我认为这就是问题所在。

# gxt - 地图的 GXT Grid ValueProvider / PropertyAccess 数据存储？

> ID：13867424
> 
> 赞同：2
> 
> 时间：2012-12-13T19:55:26.687
> 
> 标签：gxt, datastore

我的数据模型不是使用 Bean 模型对象，而是建立在 HashMap 容器中的键值对之上。

有没有人有 GXT 的 Grid ValueProvider 和 PropertyAccess 的示例，可以与底层地图一起使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:08:52.890

它没有内置的，但很容易构建自己的。查看此博客文章以了解类似的思维方式，尤其是 ValueProvider 部分：[http ://www.sencha.com/blog/building-gxt-charts](http://www.sencha.com/blog/building-gxt-charts)

a 的目的`ValueProvider`是成为一种简单的类似反射的机制，用于在某个对象中读取和写入值。then的目的`PropertyAccess<T>`是根据 Java Beans 上的 getter 和 setter 自动生成其中一些 value/modelkey/label 提供程序实例，这是一个非常常见的用例。它没有比这更复杂的复杂性，它只是一种简单地要求编译器为你做一些非常简单的样板代码的方法。

正如那篇博文所示，您只需实现接口即可非常轻松地构建 ValueProvider。这是一个快速示例，说明如何制作一个读取`Map<String, Object>`. 当您创建每个实例时，您会告诉它您正在使用哪个键，以及它在读取该值时应该找到的数据类型：

```
public class MapValueProvider<T> implements 
            ValueProvider<Map<String, Object>, T> {
    private final String key;
    public MapValueProvider(String key) {
        this.key = key;
    }

    public T getValue(Map<String, Object> object) {
        return (T) object.get(key);
    }
    public void setValue(Map<String, Object> object, T value) {
        object.put(key, value);
    }

    public String getPath() {
        return key;
    }
} 
```

然后，您为要读取的每个键构建其中一个，并将其传递给`ColumnConfig`实例或任何其他可能期望它们的键。

重点是它`ValueProvider`只是一个接口，可以以任何你喜欢的方式实现。

# c++ - 为什么我收到错误“参数包'F'必须在模板参数列表的末尾”

> ID：13867429
> 
> 赞同：1
> 
> 时间：2012-12-13T19:55:42.677
> 
> 标签：c++

我有使用可变参数模板的代码，我试图了解省略号的放置位置。在下面的代码中，我将它们放在模板参数列表的*末尾，就像错误所说的那样。*但我仍然得到错误。我究竟做错了什么？

```
template <typename T> struct S {

    void operator << (const T &) {}

};

template <template <typename, typename...> class ... F, typename T = int>
struct N : S<F<T>> ... {}; 
```

> `prog.cpp:10:82: error: parameter pack 'F' must be at the end of the template parameter list`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:59:45.277

`T`在 .之后的列表末尾还有另一个参数`F`. 正如错误消息所说，可变参数包必须在最后。不幸的是，这使得在同一个模板中同时拥有可变参数和默认参数变得很尴尬。

# curl - cUrl 一个没有 http://www 的域

> ID：13867430
> 
> 赞同：2
> 
> 时间：2012-12-13T19:55:51.693
> 
> 标签：curl, subdomain

嗨，我有一个想用 cUrl 解析的域，情况如下：

当我进入域[http://register.metsad.ee/avalik/info_teatis.php?too_id=2942704201](http://register.metsad.ee/avalik/info_teatis.php?too_id=2942704201)

它会将我重定向到 [register.metsad.ee/avalik/info_teatis.php?too_id=2942704201]

没有 http://www 也是一样的。我用来解析的代码是：

```
function get_data($url) {
        $ch = curl_init();
        $timeout = 5;
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
        $data = curl_exec($ch);
        curl_close($ch);
        return $data;
    }
$src = 'http://register.metsad.ee/avalik/info_teatis.php?too_id=2942704201'; 
```

然后`$c = get_data($src); echo $c;` 对于结果，我得到一个空白的白页。我也尝试过这样的 Simple_Html_Dom 解析器：

`echo file_get_html($src)->plaintext;`

但我仍然得到一个空白的白页。当我尝试在没有 http:// 的情况下进行解析时，会出现一个错误

`Warning: file_get_contents(register.metsad.ee/avalik/info_teatis.php?too_id=2942704201) [function.file-get-contents]: failed to open stream: Result too large in C:\xampp\htdocs\Trash\metsakontroll\system\c_simple_html_dom.php on line 70`

cUrl 仍然是白屏，没有效果。当我试图像这样的文件夹解析它时：

[http://www.metsad.ee/register/avalik/info_teatis.php?too_id=2942704201](http://www.metsad.ee/register/avalik/info_teatis.php?too_id=2942704201)然后服务器说**未找到**

我搜索了整个互联网 =/ 任何想法如何通过 cUrl 或 Simple_html_dom 阅读该页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:14:20.510

register.metsad.ee 方面有某种保护。Thay 返回空响应，直到`User-Agent`设置标头。

呼叫失败（空响应）：

```
feedbee@server:~$ telnet register.metsad.ee 80
Trying 213.184.43.115...
Connected to register.metsad.ee.
Escape character is '^]'.
GET /avalik/info_teatis.php?too_id=2942704201 HTTP/1.1
Host: register.metsad.ee

HTTP/1.1 200 OK
Date: Thu, 13 Dec 2012 20:07:11 GMT
Server: Apache
Content-Length: 0
Content-Type: text/html; charset=UTF-8 
```

调用成功（返回 HTML 页面）：

```
feedbee@server:~$ telnet register.metsad.ee 80
GET http://register.metsad.ee/avalik/info_teatis.php?too_id=2942704201 HTTP/1.1
Host: register.metsad.ee
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0

HTTP/1.1 200 OK
Date: Thu, 13 Dec 2012 20:13:07 GMT
Server: Apache
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: SNS=a0e425c2aec17c38be3716b366f75749; path=/
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8

762
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
... 
```

因此，您需要将下一行添加到：

```
curl_setopt($ch, So you need to add CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0"); for example (or any other user agent string). 
```

# java - 使用java中的swing将按钮放置在指定位置

> ID：13867432
> 
> 赞同：8
> 
> 时间：2012-12-13T19:55:52.740
> 
> 标签：java, swing, jpanel, layout-manager, gridbaglayout

我正在尝试学习如何制作 JAVA 程序并且我正在使用 Swing。我试图在窗口的左上角放置一个按钮，并且它一直在顶部中心。

```
public void createGUI(){
    JFrame frame = new JFrame("My Project");
    frame.setDefaultCloseOperation(3);
    frame.setSize(400, 350);
    frame.setVisible(true);

    JPanel panel = new JPanel();

    frame.add(panel);

    addButtonGUI(panel, new JButton(), "test", 1, 1);
}

public void addButtonGUI(JPanel panel, JButton button, String text, int x, int y){
    GridBagConstraints gbc = new GridBagConstraints();
    button.setText(text);
    button.setEnabled(true);
    gbc.gridx = x;
    gbc.gridy = y;
    gbc.gridwidth = 2;
    gbc.weightx = 1.0D;
    gbc.fill = 2;
    panel.add(button, gbc);
} 
```

我做错了什么还是有更好的方法来做到这一点？请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T20:04:10.190

您需要设置`JPanel`要`GridBagLayout`使用的布局`GridBagConstraints`：

```
JPanel panel = new JPanel(new GridBagLayout()); 
```

此外，由于您只有一个有效的“单元格”，您需要使用锚点并设置`weighty`为`JButton`允许在 Y 轴上移动。

```
gbc.anchor = GridBagConstraints.NORTHWEST;
gbc.weighty = 1.0; 
```

我也将设置`fill`设置为`NONE`：

```
gbc.fill = GridBagConstraints.NONE; 
```

这样按钮就不会占据面板的整个宽度。（2 =*水平*填充）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:00:44.600

代替

```
addButtonGUI(panel, new JButton(), "test", 1, 1);
} 
```

如果你使用会发生什么

```
addButtonGUI(panel, new JButton(), "test", 0, 0);
} 
```

# ios - iOS UIViewAnimation 不工作

> ID：13867434
> 
> 赞同：0
> 
> 时间：2012-12-13T19:55:58.610
> 
> 标签：ios, animation, uiview, uiviewcontroller, viewdidappear

我有一个主详细信息应用程序，当出现详细信息视图并且字符串为空时，我希望它通过`UIViewAnimationFlip`. 动画正在工作，但它不断翻转到自身，而不是我启动的视图控制器。任何帮助都会很棒！

```
- (void)viewDidAppear:(BOOL)animated {

    if (masterView.parserURL == nil) {

        LoginViewController *login = [[LoginViewController alloc] init];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.8];
        [UIView setAnimationTransition:UIModalTransitionStyleFlipHorizontal
                               forView:self.view
                                 cache:YES];

        [self.navigationController presentViewController:login 
                                                animated:YES 
                                              completion:nil];

        [UIView commitAnimations];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:02:56.750

我同意您应该以模态方式执行此操作，而不仅仅是添加子视图。在您的示例代码中，您制作了两次动画，因为 presentviewcontroller 方法已经在为自己制作动画。尝试删除其他动画代码，如下所示：

```
LoginViewController *login = [[LoginViewController alloc] init];
login.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentViewController:login 
                   animated:YES 
                 completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:21:13.897

我只是简单地建议：

```
- (void)viewDidAppear:(BOOL)animated {

    if (masterView.parserURL == nil) {

        LoginViewController *login = [[LoginViewController alloc] init];

        login.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

        [self presentViewController:login
                           animated:YES
                         completion:nil];
    }
} 
```

请注意，有一个有趣的问题是登录屏幕应该如何更新`parserURL`. `masterView`您可以向登录控制器添加一个指向 的属性`masterView`，以便它具有更新`parserURL`. 因此它可能是这样的：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (masterView.parserURL == nil)
    {
        LoginViewController *login = [[LoginViewController alloc] init];

        login.masterView = masterView;

        login.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

        [self presentViewController:login
                           animated:YES
                         completion:nil];
    }
} 
```

然后您的登录控制器现在可以通过以下方式更新 parserURL：

```
self.masterView.parserURL = ... // set it as appropriate 
```

# r - 在多个条件下合并 R 中的数据库，其中缺失值 (NA) 遍布各处

> ID：13867436
> 
> 赞同：3
> 
> 时间：2012-12-13T19:55:59.107
> 
> 标签：r, merge, reshape

我正在尝试从多个 csvs 在 R 中构建一个数据库。每个 csv 都有 NA，我想建立一个主列表，将所有 csv 汇总在一个数据库中。这是一些说明我的问题的快速代码（大多数 csvs 实际上有 1000 个条目，我想自动化这个过程）：

```
d1=data.frame(common=letters[1:5],species=paste(LETTERS[1:5],letters[1:5],sep='.'))
d1$species[1]=NA
d1$common[2]=NA
d2=data.frame(common=letters[1:5],id=1:5)
d2$id[3]=NA
d3=data.frame(species=paste(LETTERS[1:5],letters[1:5],sep='.'),id=1:5) 
```

我一直在兜圈子（写循环），试图在没有太多运气的情况下使用合并和重塑（熔化/铸造），以简洁地总结可用的信息。这似乎很基本，但我想不出一个好的方法来做到这一点。提前致谢。

```
To be clear, I am aiming for a final database like this:
  common species id
1      a     A.a  1
2      b     B.b  2
3      c     C.c  3
4      d     D.d  4
5      e     E.e  5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:24:49.817

我最近也有类似的情况。下面将遍历所有变量并返回最可能的信息以添加回数据集中。一旦所有数据都在那里，对第一个变量运行最后一次将为您提供结果。

```
#combine all into one dataframe
require(gtools)
d <- smartbind(d1,d2,d3)

#function to get the first non NA result
getfirstnonna <- function(x){
  ret <- head(x[which(!is.na(x))],1)
  ret <- ifelse(is.null(ret),NA,ret)
  return(ret)
}

#function to get max info based on one variable
runiteration <- function(dataset,variable){
  require(plyr)
  e <- ddply(.data=dataset,.variables=variable,.fun=function(x){apply(X=x,MARGIN=2,FUN=getfirstnonna)})
  #returns the above without the NA "factor"
  return(e[which(!is.na(e[ ,variable])), ])
}

#run through all variables
for(i in 1:length(names(d))){
  d <- rbind(d,runiteration(d,names(d)[i]))
}
#repeat first variable since all possible info should be available in dataset
d <- runiteration(d,names(d)[1]) 
```

如果 id、species 等在不同的数据集中不同，那么这将返回位于顶部的任何非 NA 数据。在这种情况下，更改 d 中的行顺序和更改变量顺序可能会影响结果。更改 getfirstnonna 函数将改变这种行为（tail 会最后选择，甚至可能获得所有可能性）。您可以根据最完整的记录对数据集进行排序。

# android - 在特定帧启动 AnimationDrawable？

> ID：13867437
> 
> 赞同：0
> 
> 时间：2012-12-13T19:56:06.583
> 
> 标签：android, animation, animationdrawable

我有一个 AnimationDrawable 像这样：

```
 AnimationDrawable ani = new AnimationDrawable();       
        ani.addFrame(first, duration);
        ani.addFrame(second, duration);
        ani.addFrame(third, duration);
        ani.setOneShot(true); 
```

并开始这样：

```
ani.start(); 
```

我想知道是否可以直接开始，比如说第二帧。有没有办法做到这一点？我需要它来进行游戏，我希望能够在我按下暂停按钮调用时恢复确切的帧：

```
ani.stop(); 
```

现在它从“暂停模式”恢复后再次开始整个动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T03:57:03.653

当动画停止时，使用这个方法：ani.selectDrawable(index);

# windows-phone-7 - linq to sql，如何在不指定表属性的情况下定义 DataContext

> ID：13867446
> 
> 赞同：1
> 
> 时间：2012-12-13T19:56:32.640
> 
> 标签：windows-phone-7, linq-to-sql, windows-phone

我的意图是使用 linq to sql 为 Windows Phone 创建一个通用的（不是 C# 的意思）数据库模型。此类模型的用户应该能够将他的数据对象类型（标有 Table 属性的类）的数组传递给模型的构造函数，然后模型应该注意将相关表添加到数据库并为 CRUD 操作提供 API。

但后来我发现，为了将表添加到数据库，您的数据上下文（从 DataContext 类继承的类）必须将每个表声明为属性！这很尴尬。这个事实是否意味着我的想法不可行？因为我显然无法在运行时向基于 DataContext 的属性添加属性。

所以我的问题是，我的判断是否正确？如果是，是否有一些解决方法可以解决此问题？

提前致谢。

编辑：更好的问题标记，因为有人终于注意到了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:17:50.957

您不需要使用强类型（从每个表`DataContext`继承并声明属性的类）。`DataContext`您可以改为执行以下操作

```
var context = new DataContext("connection string", new AttributeMappingSource());

var table = context.GetTable<T>(); 
```

哪里是用属性`T`标记的某种类型。`Table`

# python - Django 不提供管理静态文件（Apache、mod_wsgi）

> ID：13867448
> 
> 赞同：0
> 
> 时间：2012-12-13T19:56:45.430
> 
> 标签：python, django, apache, ubuntu, mod-wsgi

我的管理静态文件（css、javascript、图像）有问题...我无法显示这个正确的模板...

操作系统：Ubuntu 12.10 / Apache2 / mod_wsgi / Django 1.4

我的 apache 配置 gile：

```
<VirtualHost *:80>
WSGIScriptAlias / /var/www/myhost.com/apache/buzzbal.wsgi

ServerName www.myhost.com
Alias /static /var/www/myhost.com/static/

<Directory /var/www/myhost.com/>
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:30:57.567

利用：

```
Alias /static/ /var/www/myhost.com/static/ 
```

也就是说，子 URL 挂载点和目标路径上的尾部斜杠。

# c# - 在不返回任何错误时调试 SqlBulkCopy 问题

> ID：13867450
> 
> 赞同：2
> 
> 时间：2012-12-13T19:56:52.430
> 
> 标签：c#, sqlbulkcopy

现在我对 sqlBulkCopy 的问题是它完成时没有任何错误，但是当我查看表时，我看不到任何数据。

try catch 块没有捕获任何错误，我错过了什么吗？因为我没有看到我的代码有任何问题

这是我使用的代码：

```
DataTable table = new DataTable();
table.Columns.Add(new DataColumn("Buying ID", typeof(string)));
table.Columns.Add(new DataColumn("Buying BPC ID", typeof(string)));
table.Columns.Add(new DataColumn("Buying BP Name", typeof(string)));
table.Columns.Add(new DataColumn("Buying BP Post Code", typeof(string)));
... snip ...
table.Columns.Add(new DataColumn("Buyer BP Type", typeof(string)));
table.Columns.Add(new DataColumn("Seller BP Type", typeof(string)));
table.Columns.Add(new DataColumn("FileSource", typeof(string)));
table.Columns.Add(new DataColumn("ImportDate", typeof(System.DateTime)));

while ( (line = sr.ReadLine()) != null)
{   
    string[] data = line.Split('\t');
    DataRow row = table.NewRow();
    for (int i=0; i<data.Length; i++)
    {
        row[i] = data[i];
    }
    row["FileSource"] = fi.Name;
    row["ImportDate"] = DateTime.Now;
}

try
{
    db.Connection.Open();
    SqlBulkCopy bulkcopy = new SqlBulkCopy(db.Connection);
    bulkcopy.BatchSize = 500;
    bulkcopy.BulkCopyTimeout = 600;
    bulkcopy.DestinationTableName = "dbo.LNST_test";
    foreach (var col in table.Columns)
    {
        bulkcopy.ColumnMappings.Add(col.ToString(), col.ToString()); //col names in datatable are identical to col names in database
    }
    bulkcopy.WriteToServer(table);
    db.Connection.Close();
}
catch (Exception e)
{
    Console.WriteLine("ERROR : "+e.Message);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:15:32.433

哦，上帝，我很愚蠢......我忘记了这一行：`table.Rows.Add(row);`

我试图插入一个空的数据表。这就是我喜欢stackoverflow的原因，即使我没有从这个讨厌的社区得到答案，它也可以帮助我解决我的问题：D

# javascript - 通过javascript更改iframe src时，整个页面刷新

> ID：13867458
> 
> 赞同：0
> 
> 时间：2012-12-13T19:57:26.690
> 
> 标签：javascript, asp.net, vb.net, iframe

在我的 asp.net 应用程序中，我有一个包含两个 iframe 的页面。这些框架上方是一些链接按钮。当这些按钮被点击时，它们应该改变两个 iframe 的 src。下面列出的是我用来执行此操作的客户端代码和 javascript。问题是当这些按钮中的任何一个被点击时，整个页面都会刷新，而不是仅仅更改其中一个 iframe 的 src。（我可以说这是令人耳目一新的，因为在您登录主框架中显示的第一页之前，链接按钮不可用，在您登录后，通过调用父级按钮变为可见 - window.parent.loginSuccess() ）。如果随后单击其中一个，它会将您发送回 iframe 中的登录页面，并且按钮不再可见。）这是代码，有人知道为什么会这样吗？感谢您的帮助。

```
<body id="bodysty">
<div id="fstyle" class="daform">
    <form id="form1" runat="server">
    <div id="master">
    <div id="topthing"> <asp:LinkButton ID="lbtnControlPanel" onclientclick="CPhit()" runat="server" style="display:none">Control Panel</asp:LinkButton> <asp:LinkButton ID="lbtnAddClient" runat="server" onclientclick="AddClientHit()" style="display:none">Add Client</asp:LinkButton> <asp:LinkButton ID="lbtnManageClients" runat="server" onclientclick="ManageClientsHit()" style="display:none">Manage Clients</asp:LinkButton> <asp:LinkButton ID="lbtnAdmin" runat="server" onclientclick="ManageClientsHit()" style="display:none">Admin Options</asp:LinkButton></div>
    <div id="leftcontrol">
    <iframe id="LeftIframe" runat="server" ></iframe>
        </div>
    <div id="mainbodyform">

    <iframe id="ContentIframe" runat="server" src="Login.aspx" class="mainiframe" ></iframe>
    </div>
    </div>
    </form>
    </div>
</body>
</html>
<script language="javascript">
    function CPhit() {
        document.getElementById("ContentIframe").src = "LoginNotes.aspx";
    }
    function AddClientHit() {
        document.getElementById("ContentIframe").src = "NewCustomer.aspx";
    }
    function loginSuccess() {
        document.getElementById('lbtnControlPanel').style.display = 'inherit'
        document.getElementById('lbtnAddClient').style.display = 'inherit'
        document.getElementById('lbtnManageClients').style.display = 'inherit'
        document.getElementById('lbtnAdmin').style.display = 'inherit'
    }
</script> 
```

代码隐藏中没有处理此页面的代码，它只是用于导航。有任何想法吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:04:30.593

您需要取消您正在单击的项目的默认单击操作。

简单的方法是在点击事件上返回 false。

```
onclientclick="CPhit(); return false;" 
```

更好的方法是[preventDefault()](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:04:24.527

可能与按钮 Try 的行为有关

```
event.stopPropagation() or  window.event.cancelBubble = true 
```

在你的 JS 函数中

# tfs - TFS 获取最新日志

> ID：13867461
> 
> 赞同：2
> 
> 时间：2012-12-13T19:57:38.873
> 
> 标签：tfs

我在 TFS 中运行了 Get Latest... 命令，它拉下了一堆在我的工作区中不是最新的文件。我的问题是我不知道如何判断它下拉了哪些文件。

有人可以将我指向一个可以查看 TFS 从我最近的 Get Latest... 操作中检索到的文件的位置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:00:36.317

在 Visual Studio 中，从菜单中选择 View->Output，然后在下拉框中“显示输出”选择“源代码控制 - tfs”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:59:42.547

我不认为有这个命令，但你可以查看 TFS 中的提交历史，看看自上次提交以来发生了什么变化。在获取最新版本之前查看历史记录通常是一种很好的做法，以了解发生了什么变化以及您将要更新什么。

# java - 如何比较 Java 对象并正确审核更新的值？

> ID：13867463
> 
> 赞同：-1
> 
> 时间：2012-12-13T19:57:47.070
> 
> 标签：java, compare, updates, audit

我有一个应用程序服务器，它向客户端发送一组记录数据以响应搜索。在将数据发送到客户端之前，我的想法是让服务器将数据存储在会话变量中。

当用户选择并提交要编辑的记录时，客户端将整个记录发送到服务器。它更新数据库中的整个记录​​（以防其他用户在搜索后提交了更新）。

但是，我仍然需要捕获更改，以便正确存储审计信息。我认为最好根据用户看到和改变的内容来捕捉新旧价值。因此，我计划（深入）逐字段比较会话数据中的记录和客户端发送的更新记录。我有两个问题：

1）这种方法是否存在陷阱/问题？

2）如果不是，那么用于比较对象的好的 Java 实用程序/库是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:02:22.343

如果其他用途更改了记录中的任何字段，您最好拒绝更改。您可以提醒用户记录已更改并向他们显示新数据以再次执行更新（也许让他们更改的值可供他们使用）。

这样，如果另一个用户更改了与他们没有更改的字段相关的字段，您将不会更改彼此不再有意义的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:04:05.617

有多种方法：
如果由于某种原因您无法在服务器端和响应中标记已更改的字段，我将使用反射来比较类的所有字段，希望它们是原始对象或至少支持 equals()。但是，我会将其限制为原始类型和字符串。

# emacs - 主要模式挂钩配置影响其他缓冲区

> ID：13867464
> 
> 赞同：5
> 
> 时间：2012-12-13T19:57:48.773
> 
> 标签：emacs, lisp, elisp, xemacs, major-mode

首先让我说我对emacs很陌生。

我正在尝试为主要模式创建自定义。虽然我的设置正常运行，但我观察到当我打开一个新缓冲区时，该缓冲区主模式自定义正在应用于不同类型的其他缓冲区。

例如，如果我打开一个名为“Makefile”的文件，则会使用 makefile-mode 并应用我的自定义设置。如果我随后打开另一个文件，例如“test.c”，则使用 c-mode，但 makefile-mode 的自定义项与 c-mode 的自定义项合并。

我的 .emacs 文件的相关部分如下所示：

```
(defun c-mode-settings ()
    (c-set-style                   "bsd")
    (set-buffer-file-coding-system 'utf-8-unix)
    (show-paren-mode               1)

    (setq c-basic-offset        4)
    (setq tab-width             4)
    (setq indent-tabs-mode      nil)
    (setq c-tab-always-indent   t)
    (setq require-final-newline t)
)

(defun makefile-mode-settings ()
    (setq whitespace-style '(tabs spaces space-mark tab-mark face lines-tail))
    (whitespace-mode       t)
    (show-paren-mode       1)

    (setq tab-width             4)
    (setq require-final-newline t)
)

(add-hook 'c-mode-hook        'c-mode-settings)
(add-hook 'makefile-mode-hook 'makefile-mode-settings) 
```

如何防止这些模式挂钩影响不同模式下的其他缓冲区？

谢谢！安德鲁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:11:51.263

您需要考虑到，有些变量在设置时会变成局部的缓冲区，而有些是全局的。通常他们的描述中有相应的注释（用于`C-h v var-name`获取此描述。

在某些情况下，您可以强制任何变量成为缓冲区的本地变量，使用

```
(set (make-local-variable 'var-name) var-value) 
```

但你需要小心这一点。

# python - 我可以使用 ctypes 为可变参数 Python 函数创建原型，以便 DLL 可以将此函数作为回调调用吗？

> ID：13867473
> 
> 赞同：3
> 
> 时间：2012-12-13T19:58:38.360
> 
> 标签：python, callback, ctypes, variadic

这是场景：我正在使用 ctypes 将 C DLL 加载到 Python 程序中。我想注册一个回调，以便 DLL 中的代码可以调用 Python 中的函数。

这一切都很好，直到我想让函数成为可变参数。例如，假设我想在 Python 中实现“printf”（为了参数，我也会让它返回一个整数）：

```
def printf(format, *args):
    (...)
    return 0 
```

我正在使用 ctypes 中的 CFUNCTYPE 工厂创建回调函数指针：

```
callback_type = CFUNCTYPE(c_int, c_wchar_p) 
```

当然，由于我只指定了一个输入参数（格式字符串为 Unicode char 数组），因此回调有效但`*args`为空。

那么，有什么方法可以使这项工作与 ctypes 一起工作，还是我需要重写我的 C 代码以不需要可变参数回调函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:22:02.140

不，底层 libffi 不支持它。您确实需要编写自定义 C 代码。

（Fwiw，[CFFI](http://cffi.readthedocs.org/)是 ctypes 的替代品。同样基于 libffi，它也有同样的限制 --- 但至少它可以很容易地编写自定义的 C 代码片段来进行接口。）

# python - Python 如何用 wxPython、PyQt、PySide 或 Tkinter 解释？

> ID：13867475
> 
> 赞同：3
> 
> 时间：2012-12-13T19:58:44.593
> 
> 标签：python, user-interface, wxpython, tkinter, pyside

我很好奇，过去一个小时一直在阅读有关使用 Python 进行 GUI 开发的内容。在阅读了 wxPython、PyQt、Nokia's Python bindings for Qt 和 Tkinter 的文档之后，我想到了一个问题。

当我使用 Python 创建控制台应用程序时，它使用嵌入式 Python 解释器运行（我假设通常是 cpython，如果不是总是这样的话）。

所以我想知道，*这些“小部件工具包”是什么情况？*

*   **Python 代码是如何执行的，是什么解释它（或执行它）？**

*   我的 Python 代码的哪一部分是使用 Python 解释器解释的？

*   或者 Python 代码是否得到词法分析，然后由小部件的工具包解析，然后解释和执行（或在构建期间编译）？

我期待了解与 Python 应用程序（更容易理解）与 Python 解释器的解释相比，在后台发生了什么。

谢谢你。

PS。无论哪个天才认为这个问题应该被关闭；很多人想知道外部库和系统的内部结构。尤其是那些不像看起来那么简单的东西。目前在 SE 上没有任何问题可以解释这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:07:45.387

这只是关于“GUI工具包”的一个非常概括的高级解释......

假设您决定使用 Qt 框架。这个框架是用 C++ 编写的。可以使用两种不同的 Python 绑定，允许一种使用 Python 针对与 C++ 版本相同的 API 编写 GUI 应用程序。

python 绑定提供了对 C++ 代码的调用的包装。例如 PyQt4 使用`sip`，而 PySide 使用`shiboken`. 这些只是语言包装工具，它们采用规范来说明如何在 C++ 对象与其预期的 Python 接口之间进行映射。

好的，所以你开始使用 PyQt... 你编写的所有代码都必须通过 python 解释器。其中一些可能是纯python。其中一些会调用 C++ 库来创建像你的小部件这样的东西。在 Qt 中，将有一个与对应的 python 实例相关联的 C++ 指针。

然后是 C++ 层与您平台的窗口管理器进行通信，将独立于平台的 API 调用转换为特定于平台的东西，例如如何准确地绘制按钮或菜单。

无论您是仅创建控制台还是基于 GUI 的 Python 应用程序，这一切都通过 Python 解释器来解释您的 Python 代码。有些东西必须为你解释 python 语言。

# c# - FileHelpers -- 只读取第 N 列

> ID：13867476
> 
> 赞同：1
> 
> 时间：2012-12-13T19:58:49.373
> 
> 标签：c#, csv, filehelpers

我正在使用[FileHelpers](http://filehelpers.sourceforge.net/)读取具有数百列的 CSV 文件，但我只需要前 20 列左右，因此在类中创建映射时，我只放置了这 20 列。

解析时出现以下异常

> Delimiter ',' 在最后一个字段 'CompanyDivision' 后找到（文件错误或需要在记录类中添加字段）

我在其他答案中读到，对此的一个**技巧**是为您不想阅读的其余列放置虚拟字段，但正如我所说，我有数百个。

有没有办法将引擎配置为在一定数量的列后停止？或者有没有办法扩展或修改引擎来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:52:03.117

您可以尝试添加一个数组虚拟字段：

```
private string[] mDummyField; 
```

这样，其余字段将在该字段中。您必须使用该库的最新版本。

# c++ - 易失性和非易失性实例的重载类

> ID：13867480
> 
> 赞同：3
> 
> 时间：2012-12-13T19:59:07.620
> 
> 标签：c++, overloading, volatile

我正在编写一个需要同时支持易失性和非易失性实例的类（易失性实例使用原子操作，非易失性实例使用常规操作），并且想知道我是否以正确的方式进行操作。到目前为止，这是类声明的片段：

```
class Yield {
public:
    Yield();
    Yield(Yield const &other);
    Yield(Yield const volatile &other);

    Yield &operator=(Yield const &other);
    Yield &operator=(Yield const volatile &other);

    Yield &operator+=(Yield const &other);
    Yield &operator+=(Yield const volatile &other);
    Yield volatile &operator+=(Yield const &other) volatile;
    Yield volatile &operator+=(Yield const volatile &other) volatile;

    // Other operators snipped...
}; 
```

*   问题 1：使用 MSVC 编译时，我收到以下警告：

    `warning C4521: 'util::Yield' : multiple copy constructors specified`

    这个警告是否预示着使用这个类有什么问题？还是可以安全地忽略它？

*   问题 2：就目前而言，所有运算符都对 volatile 和 non-volatile`other`参数进行了重载。我认为这是必要的，以避免对非易失性实例进行较慢的易失性访问？是否有替代方法允许每种方法只编码两次（易失性 lhs 和非易失性 lhs）而不是 4 次（易失性和非易失性 lhs，每个都有易失性和非易失性 rhs）？

我希望将这些问题放在一起是可以的，否则请发表评论，我可以将它们分开。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:48:04.453

> 该类具有多个单一类型的复制构造函数。此警告是信息性的；构造函数可以在您的程序中调用。

来自 msdn 网站：[编译器警告（级别 3）C4521](http://msdn.microsoft.com/en-us/library/e02fwk4s.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T19:54:49.867

[Volatile 不会像您认为的那样做](https://stackoverflow.com/questions/6866206/volatile-and-createthread/6866927#6866927)。

即使使用 VC++ 的特殊、非标准`volatile`行为，它也会导致代码比正确编写代码更慢。使用`std::atomic`，或者如果它不可用，那么您可能已经获得了特定于平台的屏障、栅栏和原子内在函数。VC++ 具有帮助您的功能`_ReadWriteBarrier`。`_Interlocked`

# ruby - 唯一的两个整数对

> ID：13867493
> 
> 赞同：3
> 
> 时间：2012-12-13T19:59:47.387
> 
> 标签：ruby, database, crc32

> **可能重复：**
> [以独特且确定的方式将两个整数映射为一个](https://stackoverflow.com/questions/919612/mapping-two-integers-to-one-in-a-unique-and-deterministic-way)

我正在尝试为两个整数对（Ruby）创建唯一标识符：

```
f(i1,i2) = f(i2, i1) = some_unique_value 
```

那么， i1+i2, i1*i2, i1^i2 -不是唯一的以及 (i1>i2) 吗？“i1”+“i2”：“i2”+“i1”。

我认为以下解决方案可以：

```
(i1>i2) ? "i1" + "_" + "i2" : "i2" + "_" + "i1" 
```

但：

1.  我必须将结果保存在数据库中并对其进行索引。所以我更喜欢它是一个整数，并且尽可能小。
2.  Zlib.crc32(f(i1,i2)) 能保证唯一性吗？

谢谢。

升级版：

实际上，我不确定结果必须是整数。也许我可以将其转换为十进制： (i1>i2) ？i1.i2：i2.i1

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T21:44:46.917

您要查找的内容称为[Pairing function](http://en.wikipedia.org/wiki/Pairing_function)。

以下来自[德国维基百科页面](http://de.wikipedia.org/wiki/Cantorsche_Paarungsfunktion)的插图清楚地显示了它的工作原理：

![http://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Pairing-function.svg/350px-Pairing-function.svg.png](../Images/52b75789a893d0951e90ae548c4f7201.png)

在 Ruby 中实现：

```
def cantor_pairing(n, m)
    (n + m) * (n + m + 1) / 2 + m
end

(0..5).map do |n|
  (0..5).map do |m|
    cantor_pairing(n, m)
  end
end
=> [[ 0,  2,  5,  9, 14, 20],
    [ 1,  4,  8, 13, 19, 26],
    [ 3,  7, 12, 18, 25, 33],
    [ 6, 11, 17, 24, 32, 41],
    [10, 16, 23, 31, 40, 50],
    [15, 22, 30, 39, 49, 60]] 
```

请注意，您需要将此配对的结果存储在一个数据类型中，该数据类型的位数与您的两个输入数字加起来的位数一样多。（如果两个输入数字都是 32 位的，您显然需要 64 位数据类型才能存储所有可能的组合。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:44:34.233

不，`Zlib.crc32(f(i1,i2))`对于 i1 和 i2 的所有整数值不是唯一的。

如果 i1 和 i2 也是 32 位数字，那么它们的组合比 CRC32 返回的 32 位数字所能存储的要多得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T20:55:31.643

CRC32 不是唯一的，不适合用作密钥。假设您知道整数的最大值`i1`和`i2`：

```
unique_id = (max_i2+1)*i1 + i2 
```

如果您的整数可以是负数，或者永远不会低于某个正整数，您将需要最大值和最小值：

```
(max_i2-min_i2+1) * (i1-min_i1) + (i2-min_i2) 
```

这将为您提供识别两个整数的绝对最小数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T20:44:28.073

好吧，当输入是超过 4 个字节的任意二进制字符串时，没有 4 个字节的哈希是唯一的。您的字符串来自高度受限的符号集，因此冲突会更少，但“不，不是唯一的”。

有两种方法可以使用小于两个整数的可能值范围的整数：

1.  拥有一个即使偶尔发生碰撞也能正常工作的系统
2.  检查碰撞并使用某种重新散列

使用 1:1 映射解决问题的明显方法要求您知道其中一个整数的最大值。只需将一个乘以最大值并加上另一个，或者确定两个上限的幂，相应地移动一个值，然后在另一个中进行 OR。无论哪种方式，每一位都是为整数中的一个或另一个保留的。这可能会也可能不会满足您的“尽可能小”的要求。

您的 ###_### 字符串每对都是唯一的；如果您可以将其存储为您获胜的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T02:36:06.493

[这是一个更好、更节省空间的解决方案：](http://szudzik.com/ElegantPairing.pdf) . 我的回答在[这里](https://stackoverflow.com/a/13871379/661933)

# c# - WPF、MVVM、ICommand 和存储库

> ID：13867494
> 
> 赞同：7
> 
> 时间：2012-12-13T19:59:54.247
> 
> 标签：c#, wpf, mvvm, repository

我有一个看起来像这样的 WPF 应用程序：

![在此处输入图像描述](../Images/c1b8caf8f2f9d80d61e03b49f76dcd77.png)

viewmodel 包装模型并通过 INotifyChanged 公开与视图相关的任何属性。视图还绑定到几个 ICommand 对象，这些对象处理视图触发的某些行为。我有一个外部 ICommand，其唯一目的是将模型保存到数据库中。

我读过的所有内容都表明视图或视图模型都不应该引用存储库。这就是视图模型之外的命令 3 的原因。

我的问题是双重的。首先，这是一个合理的架构，其次，有什么好方法可以将模型实例转移到命令 3 以便可以将其放入存储库中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T20:05:43.680

我个人认为让 ViewModel 引用存储库没有问题。试图避免这种情况会导致不必要的并发症。

在 MVVM 中，ViewModel 通常是位于模型之上的“粘合”层——而存储库是模型的一部分（它是特定领域数据/逻辑的一部分）。我[关于 MVVM 的博客系列很好地展示](http://reedcopsey.com/2010/01/06/better-user-and-developer-experiences-from-windows-forms-to-wpf-with-mvvm-part-7-mvvm/)了我个人对此的看法：

![MVVM 图](../Images/1c88aa226ac95b103f1193fa727f18d6.png)

通过将命令 3 放入 VM 让 VM 直接与存储库一起工作可能比尝试将其分离出来更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T15:07:29.140

视图模型应该与业务层（域对象 + 域服务）而不是直接与存储库通信。更进一步，这种通信应该通过命令来完成。

所以你有了：

**查看 -> 查看模型 -> 命令 -> 域对象/域服务 -> 存储库**

除非你正在开发一个非常简单的 CRUD 应用程序......

# css - 按钮不会变宽？

> ID：13867495
> 
> 赞同：0
> 
> 时间：2012-12-13T19:59:54.343
> 
> 标签：css

刚刚创建了这个应该看起来像这样的菜单

[http://gyazo.com/8afc87a69d0d859f9069bbcaa1547745.png](http://gyazo.com/8afc87a69d0d859f9069bbcaa1547745.png)

如果按钮的文本太长，我会为每个按钮使用最小宽度和最大宽度。我有一个渐变 bg-repeat 按钮

但是每当文本变大时，就会发生这种情况（最后一个按钮）：

[http://gyazo.com/44852f4b9b7b5fce3e8d156f469a6852.png](http://gyazo.com/44852f4b9b7b5fce3e8d156f469a6852.png)

这是我用于每个按钮的 HTML 代码：

```
<div class="menubutton"><span class="menupadding">hofffffffffffme</span></div> 
```

这是CSS：

```
.menubutton {
  background-image: url("../img/buttonbg.png");
  background-repeat: repeat-x;
  min-width: 82px;
  height: 55px;
}

.menupadding {
  position: absolute;
  padding: 16px;
  margin-left: 7px;
} 
```

如果菜单按钮的文本超过宽度限制，我该如何做到这一点，按钮会自动变宽？我试过 width: auto 但它只是搞砸了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:03:24.977

`.menupadding`跨度实际上根本不影响其父级的布局。如果您在 div 上没有最小宽度，则按钮将简单地折叠为零宽度。解决方案是不在跨度上使用绝对定位：

```
.menupadding {
    padding: 16px;
    margin-left: 7px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:05:01.933

我认为这是由于 .menupadding 的绝对位置。它的呈现独立于 .menubutton 的宽度。

尽量避免 .menupadding 的绝对位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:05:37.777

我无法弄清楚为什么，但是使用 SPAN 和 DIV 来包装相同的元素并不是一件好事。我总是为我的菜单使用一个列表。

```
<ul class="menu">
  <li>Button 1</li>
  <li>Button 2</li>
</ul> 
```

然后你可以在你的css中使用它：

```
.menu li {
  background-image: url("../img/buttonbg.png");
  background-repeat: repeat-x;
  float:left
  min-width: 82px;
  height: 55px;
} 
```

看看有没有效果！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T22:14:35.507

试试这个：

HTML：

```
<span class="menubutton">hofffffffffffme</span> 
```

CSS：

```
.menubutton {
   background:url(../gnome.png) repeat-x;
   height: 55px; /* adjust as needed; seems really high */
   padding: 16px 16px 16px 16px; /* adjust sub values to position txt correctly */
} 
```

对文本使用 span 将允许背景图像根据文本的宽度增长。您可以在 .menubutton 的 css 中使用“边距”值来调整位置。

# python - 在 MinGW32 编译 pySpotify 中使用 libspotify .dll/.lib 文件

> ID：13867498
> 
> 赞同：12
> 
> 时间：2012-12-13T20:00:00.770
> 
> 标签：python, c, spotify, cpython

在 Windows PC 上使用`MinGW32`我正在尝试编译[pySpotify](http://pyspotify.mopidy.com/)。第一个错误是`libspotify/api.h`丢失了。我通过将适当的文件夹从*libspotify*[复制](https://developer.spotify.com/technologies/libspotify/#download)到`C:\MinGW\include`. 但是，现在由于二进制文件分发`dllwrap`失败，并且无论我将它们放在哪里*（pySpotify 文件夹/子文件夹、临时构建文件夹/子文件夹和 MinGW 文件夹/子文件夹）*或我将它们命名为什么*（.a、.o 和 .so）*它**仍然显示相同的错误消息。**`ld linking.``Spotify``libspotify.dll``libspotify.lib.`

 ****相关的错误是：

```
C:\MinGW\bin\dllwrap.exe -mdll -static --output-lib build\temp.win32-2.7\Release\src\lib_spotify.a --def build\temp.win32-2.7\Release\src\_spotify.def -s build\temp.win32-2.7\Release\src\module.o build\temp.win32-2.7\Release\src\session.o build\temp.win32-2.7\Release\src\link.o build\temp.win32-2.7\Release\src\track.obuild\temp.win32-2.7\Release\src\album.o build\temp.win32-2.7\Release\src\albumbrowser.o build\temp.win32-2.7\Release\src\artist.o build\temp.win32-2.7\Release\src\artistbrowser.o build\temp.win32-2.7\Release\src\search.o build\temp.win32-2.7\Release\src\playlist.o build\temp.win32-2.7\Release\src\playlistcontainer.o build\temp.win32-2.7\Release\src\playlistfolder.o build\temp.win32-2.7\Release\src\image.o build\temp.win32-2.7\Release\src\user.o build\temp.win32-2.7\Release\src\pyspotify.o build\temp.win32-2.7\Release\src\toplistbrowser.o -LC:\Python26\libs -LC:\Python26\PCbuild -lspotify -lpython26 -lmsvcr90 -o build\lib.win32-2.7\spotify\_spotify.pyd
c:/mingw/bin/../lib/gcc/mingw32/4.7.2/../../../../mingw32/bin/ld.exe: cannot find -lspotify
collect2.exe: error: ld returned 1 exit status
dllwrap: gcc exited with status 1
error: command 'dllwrap' failed with exit status 1 
```

[bok 在 github 上](https://github.com/mopidy/pyspotify/issues/63)说：

> 您需要在包含路径中添加 API 标头（将 -I~\libspotify\include 之类的内容添加到编译器选项中）和库路径中的共享库（将 -L~\libspotify\lib 添加到链接器选项中）。这将允许编译器找到必要的包含文件，并让您的链接器找到必要的二进制对象。

但是`distutils`Extension 类似乎已被弃用并且很难找到文档（我相信这是自定义编译器选项需要去的地方）。欣赏`~`可能需要更改为`%USERPROFILE%`或类似。同样，除了该节`%PYTHONPATH%\Lib\distutils\distutils.cfg`之外几乎没有文档。`[build]` `compiler=mingw32`这使得编辑编译/链接命令及其选项无法更改。

**你如何在 Windows 上编译 pySpotify？**

**编辑：**

通过使用 Python 2.6 并将 libspotify.dll/libspotify.lib 复制到 C:\Python26\PCbuild 并将它们重命名为 spotify.dll/libspotify.lib 我现在收到来自 ld 的另一条错误消息：

```
C:\MinGW\bin\dllwrap.exe -mdll -static --output-lib build\temp.win32-2.6\Release\src\lib_spotify.a --def build\temp.win32-2.6\Release\src\_spotify.def -s build\temp.win32-2.6\Release\src\module.o build\temp.win32-2.6\Release\src\session.o build\temp.win32-2.6\Release\src\link.o build\temp.win32-2.6\Release\src\track.obuild\temp.win32-2.6\Release\src\album.o build\temp.win32-2.6\Release\src\albumbrowser.o build\temp.win32-2.6\Release\src\artist.o build\temp.win32-2.6\Release\src\artistbrowser.o build\temp.win32-2.6\Release\src\search.o build\temp.win32-2.6\Release\src\playlist.o build\temp.win32-2.6\Release\src\playlistcontainer.o build\temp.win32-2.6\Release\src\playlistfolder.o build\temp.win32-2.6\Release\src\image.o build\temp.win32-2.6\Release\src\user.o build\temp.win32-2.6\Release\src\pyspotify.o build\temp.win32-2.6\Release\src\toplistbrowser.o -LC:\Python26\libs -LC:\Python26\PCbuild -lspotify -lpython26 -lmsvcr90 -o build\lib.win32-2.6\spotify\_spotify.pyd
_spotify.exp: file not recognized: File format not recognized
collect2.exe: error: ld returned 1 exit status
dllwrap: gcc exited with status 1
error: command 'dllwrap' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:39:36.580

目前无法访问 mingw 安装，我可以提出一些建议。

首先，`ld`众所周知，对论点的顺序很挑剔。奇怪的是，当我在谷歌上搜索“ld 参数顺序”时，我得到了一堆页面暗示顺序无关紧要，但我已经被这个烧了好几次了。我在以下参数顺序方面取得了最大的成功：

1.  切换到`ld`（即`-Wall`）
2.  库搜索路径（即`-LPATH`）
3.  目标文件
4.  库（即`-lspotify`）

我在您的链接器输出中注意到一些对 amd64 的引用。我不确定你是如何编译你拥有的其他目标文件的，但由于 libspotify 在 Windows 上是 32 位的，我猜在这里混合 32/64 位不会很好。

我能想到的最后一件事是，也许 dll 扩展名令人困惑`ld`，您是否尝试将文件名更改为`libspotify.so`？我知道这有点像在黑暗中拍摄，但否则我不知道如何进一步帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:46:19.490

我猜您正在尝试将 64 位版本的 pyspotify 与 32 位版本的 libspotify 链接起来。尝试重建 pyspotify 将 -m32 添加到 CFLAGS 和 CXXFLAGS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T11:02:07.110

我已经添加了一些说明，说明如何在问题的实际票证上编译它。让我知道它是否对您有帮助！

[https://github.com/mopidy/pyspotify/issues/63](https://github.com/mopidy/pyspotify/issues/63)****

# c# - Windows Phone中的RestSharp同步请求

> ID：13867504
> 
> 赞同：1
> 
> 时间：2012-12-13T20:00:50.903
> 
> 标签：c#, rest, windows-phone-7.1, restsharp

有没有办法（任何，无论如何）使用restsharp模拟同步请求？

我正在开发一个应用程序，它必须等待成功的登录响应才能向前导航，在我的代码中传递回调只是为了检查东西是一件痛苦的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:23:56.173

使用[Microsoft.Bcl.Async 包](http://blogs.msdn.com/b/bclteam/archive/2012/10/19/using-async-await-without-net-framework-4-5.aspx)。

然后使用扩展方法，例如：

```
public static class RestClientExtensions
    {
        public static Task<IRestResponse> ExecuteTask (this IRestClient restClient, RestRequest restRequest)
        {
            var tcs = new TaskCompletionSource<IRestResponse> ();
            restClient.ExecuteAsync (restRequest, (restResponse, asyncHandle) =>
            {
                if (restResponse.ResponseStatus == ResponseStatus.Error)
                    tcs.SetException (restResponse.ErrorException);
                else
                    tcs.SetResult (restResponse);
            });
            return tcs.Task;
        }
    } 
```

您可以拨打以下电话：

```
var restResponse = await restClient.ExecuteTask(restRequest); 
```

# csv - 在外部 csv 中创建带有高图和数据的折线图

> ID：13867505
> 
> 赞同：4
> 
> 时间：2012-12-13T20:00:50.367
> 
> 标签：csv, graph, highcharts, line, temperature

我已经阅读了 Highcharts 操作方法，检查了演示画廊，搜索了谷歌，在 stackoverflow 上阅读了 X 数量的完全相同的线程，但我无法让它工作。

我以日期、值的形式将数据记录在 csv 文件中。

这是日期的样子

```
1355417598678,22.25
1355417620144,22.25
1355417625616,22.312
1355417630851,22.375
1355417633906,22.437
1355417637134,22.437
1355417641239,22.5
1355417641775,22.562
1355417662373,22.125
1355417704368,21.625 
```

这就是我设法获得代码的程度：

[http://jsfiddle.net/whz7P/](http://jsfiddle.net/whz7P/)

这会呈现一个图表，但根本没有序列或数据。我想我在格式化数据时会弄虚作假，以便可以在高图中进行解释。

任何人都可以伸出援助之手吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:26:53.100

所以，你有以下数据结构，对吧？

```
1355417598678,22.25
1355417620144,22.25
1355417625616,22.312
1355417630851,22.375
1355417633906,22.437
1355417637134,22.437
1355417641239,22.5
1355417641775,22.562
1355417662373,22.125
1355417704368,21.625 
```

然后你把它分成一个行数组，所以每个数组项都是一行。
然后对每一行执行以下操作。

```
var items = line.split(';'); // wrong, use ',' 
```

但是没有成行`;`，你应该使用`,`.
结果将是一个多维数组，其中每个项目都是具有以下结构的数组。它将存储在一个名为`data`.

```
"1355417598678","22.25" // date in utc, value 
```

这是每个系列的预期数据，因此您可以将其直接传递给您的`serie`.

```
var serie = {
    data: data,
    name: 'serie1' // chose a name
} 
```

结果将是一个[**工作**](http://jsfiddle.net/qUf2U/)图。

所以一切都可以恢复到以下。

```
var lines = data.split('\n');
lines = lines.map(function(line) {
    var data = line.split(',');
    data[1] = parseFloat(data[1]);
    return data;
});

var series = {
    data: lines,
    name: 'serie1'
};
options.series.push(series); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:25:37.870

查看您的 line.split 部分：

```
$.get('data.csv', function(data) {
        // Split the lines
        var lines = data.split('\n');
        $.each(lines, function(lineNo, line) {
            var items = line.split(';'); 
```

看起来您正在尝试使用分号 (;) 而不是逗号 (,) 进行拆分，这是示例 CSV 数据中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T02:40:14.953

你需要把

```
 $(document).ready(function() { 
```

在第一行，并且

```
 }); 
```

在 javascript 的最后一行来完成这项工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T20:18:49.460

你能上传你的csv文件吗？它与您在原始帖子中写的相同吗？我遇到了同样的问题，结果数据文件中有错误。

# magento - 我正在编写我的第一个 Magento 模块，需要覆盖默认模板文件

> ID：13867509
> 
> 赞同：1
> 
> 时间：2012-12-13T20:01:05.333
> 
> 标签：magento, module, block

我正在尝试覆盖购物车页面中的运输块。但是，我的代码只是将运输文件复制了两次。奇怪的是它复制了我的运输文件两次，而不是一个。如何禁用原始 shipping.phtml 文件并使 magento 仅使用我的布局？

这是我的代码：

```
app/etc/modules/config.xml

<?xml version="1.0" encoding="UTF-8"?>
<config>
<modules>
    <Module_Name>

        <!-- Whether our module is active: true or false -->
        <active>true</active>

        <!-- Which code pool to use: core, community or local -->
        <codePool>local</codePool>

    </Module_Name>
  </modules>
</config> 
```

等/config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- The root node for Magento module configuration -->
<config> 

<!-- 
    The module's node contains basic 
    information about each Magento module
-->
<modules>

    <!--
        This must exactly match the namespace and module's folder
        names, with directory separators replaced by underscores
    -->
    <Module_Name>

        <!-- The version of our module, starting at 0.0.1 -->
        <version>0.0.1</version>

    </Module_Name>

</modules>

<frontend>
    <layout>
        <updates>
            <brands>
                <file>shipping.xml</file>
            </brands>
        </updates>
    </layout>
</frontend>

</config> 
```

我的主题布局 XML 文件：

```
<?xml version="1.0"?>

<layout version="0.1.0">

<!--
Default layout, loads most of the pages
-->

<checkout_cart_index translate="label">
    <label>Shopping Cart</label>
    <remove name="right"/>
    <remove name="left"/>
    <!-- Mage_Checkout -->
<reference name="head">
    <action method="addCss"><stylesheet>css/shipping.css</stylesheet>  </action> 
</reference>
    <reference name="content">
        <block type="checkout/cart" name="checkout.cart">
            <action method="setCartTemplate"><value>checkout/cart.phtml</value></action>
            <action method="setEmptyTemplate"><value>checkout/cart/noItems.phtml</value></action>
            <action method="chooseTemplate"/>
            <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/item/default.phtml</template></action>
            <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/item/default.phtml</template></action>
            <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/item/default.phtml</template></action>

            <block type="core/text_list" name="checkout.cart.top_methods" as="top_methods" translate="label">
                <label>Payment Methods Before Checkout Button</label>
                <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
            </block>

            <block type="page/html_wrapper" name="checkout.cart.form.before" as="form_before" translate="label">
                <label>Shopping Cart Form Before</label>
            </block>

            <block type="core/text_list" name="checkout.cart.methods" as="methods" translate="label">
                <label>Payment Methods After Checkout Button</label>
                <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
                <block type="checkout/multishipping_link" name="checkout.cart.methods.multishipping" template="checkout/multishipping/link.phtml"/>
            </block>

            <block type="checkout/cart_coupon" name="checkout.cart.coupon" as="coupon" template="checkout/cart/coupon.phtml"/>
            <block type="checkout/cart_shipping" name="checkout.cart.shipping" as="shipping" template="module/shipping.phtml"/>
            <block type="checkout/cart_crosssell" name="checkout.cart.crosssell" as="crosssell" template="checkout/cart/crosssell.phtml"/>

            <block type="checkout/cart_totals" name="checkout.cart.totals" as="totals" template="checkout/cart/totals.phtml"/>
        </block>
    </reference>
    <block type="core/text_list" name="additional.product.info" translate="label">
        <label>Additional Product Info</label>
    </block>
 </checkout_cart_index>

</layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:48:01.360

你不需要复制所有的布局代码。只需更改模板：

```
<reference name="checkout.cart.shipping">
    <action method="setTemplate"><template>path/to/template.phtml</template></action>
</reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:17:16.993

这可能是由于

```
<reference name="content">
    <block type="checkout/cart" name="checkout.cart">
        <action method="setCartTemplate"><value>checkout/cart.phtml</value></action>
        <action method="setEmptyTemplate"><value>checkout/cart/noItems.phtml</value></action>
        <action method="chooseTemplate"/>
        <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/item/default.phtml</template></action>
        <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/item/default.phtml</template></action>
        <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/item/default.phtml</template></action>

        <block type="core/text_list" name="checkout.cart.top_methods" as="top_methods" translate="label">
            <label>Payment Methods Before Checkout Button</label>
            <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
        </block>

        <block type="page/html_wrapper" name="checkout.cart.form.before" as="form_before" translate="label">
            <label>Shopping Cart Form Before</label>
        </block>

        <block type="core/text_list" name="checkout.cart.methods" as="methods" translate="label">
            <label>Payment Methods After Checkout Button</label>
            <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
            <block type="checkout/multishipping_link" name="checkout.cart.methods.multishipping" template="checkout/multishipping/link.phtml"/>
        </block>

        <block type="checkout/cart_coupon" name="checkout.cart.coupon" as="coupon" template="checkout/cart/coupon.phtml"/>
        <block type="checkout/cart_shipping" name="checkout.cart.shipping" as="shipping" template="Beckin/dropdownshipping/drop_down_shipping.phtml"/>
        <block type="checkout/cart_crosssell" name="checkout.cart.crosssell" as="crosssell" template="checkout/cart/crosssell.phtml"/>

        <block type="checkout/cart_totals" name="checkout.cart.totals" as="totals" template="checkout/cart/totals.phtml"/>
    </block>
</reference> 
```

存在于 checkout.xml 中，现在您的运输模块布局（我猜 drop_down_shipping.xml）有一个句柄 checkout_cart_index，它的代码与它被调用两次的结果相同。

我建议在您的自定义模块布局中只更新您为处理程序所做的更改，而不是全部处理。

希望这有帮助。

# java - 尝试使用 ICEFACES 中的列组对 iceDataTable 进行排序

> ID：13867511
> 
> 赞同：0
> 
> 时间：2012-12-13T20:01:09.503
> 
> 标签：java, jsf, icefaces

我正在尝试向*IceDataTable*上的列添加排序功能。我尝试使用 ice:commandSortHeader 但它不起作用。

这是我的 xhtml 代码。我们试图绘制一个包含两个名为 HTRANS 和 STA 的列组的表，但一个包含所有数据的数组。它是一种数据比较报告

这是表定义

```
<ice:dataTable styleClass="iceDatTbl" rendered="#{not empty ConciliacionHTRANSMB.listaResultado }"
                               id="archivoProcesadoTable" 
                               value="#{ConciliacionHTRANSMB.listaResultado}"
                               sortColumn="#{ConciliacionHTRANSMB.sortColumn}"
                               sortAscending="#{ConciliacionHTRANSMB.sortAscending}"                               
                               var="item" 
                               rows="#{SingletonAppMB.PAGINACION}">

                    <f:facet name="header">

                       <!-- This is a first group with the colspan -->
                        <ice:columnGroup>
                            <ice:headerRow>
                                <ice:column colspan="5">
                                    <ice:outputText value="HTRANS"/>
                                </ice:column>
                                <ice:column colspan="5">
                                    <ice:outputText value="STA"/>
                                </ice:column>
                            </ice:headerRow>

                            <ice:headerRow>
                                <!-- HTRANS-->
                                <ice:column> 
                                    <ice:commandSortHeader arrow="true" columnName="fechaEnvioHtrans" immediate="true" actionListener="#{ConciliacionHTRANSMB.sortListener}">
                                        <ice:outputText value="Date"/>
                                        <f:attribute name="columnNameEvent" value="fechaEnvioHtrans" />                                
                                    </ice:commandSortHeader>  
                                </ice:column>
                                <ice:column>

                                    <ice:commandSortHeader  arrow="true" columnName="horaEnvioHtrans" immediate="true" actionListener="#{ConciliacionHTRANSMB.sortListener}">
                                        <ice:outputText value="Time"/>
                                        <f:attribute name="columnNameEvent" value="horaEnvioHtrans" />                                
                                    </ice:commandSortHeader>  

                                </ice:column>

                                <!-- STA-->

                                <ice:column>
                                    <ice:outputText value="Fecha procesado"/>
                                </ice:column>
                                <ice:column>
                                    <ice:outputText value="Hora procesado"/>
                                </ice:column>
                                <ice:column>
                                    <ice:outputText value="Operador originador"/>
                                </ice:column>
                                <ice:column>
                                    <ice:outputText value="Nombre archivo"/>
                                </ice:column>
                                <ice:column>
                                    <ice:outputText value="Estado"/>
                                </ice:column>

                            </ice:headerRow>
                        </ice:columnGroup>
                    </f:facet>

                    <!-- HTRANS -->
                    <ice:column>
                        <ice:outputText value="#{item.fechaEnvioHtrans}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.horaEnvioHtrans}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.operadorOriginadorHtrans}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.nombreArchivoHtrans}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.resultadoEnvioHtrans}" />
                    </ice:column>

                    <!-- sta -->
                    <ice:column>
                        <ice:outputText value="#{item.fechaProcesadoSTA}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.horaProcesadoSTA}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.operadorOriginadorSTA}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.nombreArchivoSTA}" />
                    </ice:column>
                    <ice:column>
                        <ice:outputText value="#{item.estadoArchivoSTA}" />
                    </ice:column>

                </ice:dataTable> 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:00:54.063

```
public String sortColumnName;
public boolean ascending = true;
public String oldSort;
public boolean oldAscending = ascending;
public MyClassName() {                                                  // constructor
    sortColumnName = serialNo;
    oldSort = sortColumnName;
    oldAscending = ascending;
}
public String getSortColumnName() {
    return sortColumnName;
}
public void setSortColumnName(String sortColumnName) {
    this.sortColumnName = sortColumnName;
}
public boolean isAscending() {
    return ascending;
}
public void setAscending(boolean ascending) {
    this.ascending = ascending;
}
public String getOldSort() {
    return oldSort;
}
public void setOldSort(String oldSort) {
    this.oldSort = oldSort;
}
public boolean isOldAscending() {
    return oldAscending;
}
public void setOldAscending(boolean oldAscending) {
    this.oldAscending = oldAscending;
}
public boolean isDefaultAscending(String sortColumn) {
    return false;
}
public void sort() {                                                                                                // Sort Method for Sorting
    Comparator<Object> comparator = new Comparator<Object>() {
        public int compare(Object o1, Object o2) {
            City c1 = (City) o1;                                                                                    // Entity Type Name of Datatable List
            City c2 = (City) o2;
            if (sortColumnName == null) {
                return 0;
            }
            if (sortColumnName.equals(serialNo)) {
                return ascending ?
                        new Integer(c1.getSerialNo()).compareTo(new Integer(c2.getSerialNo())) :
                            new Integer(c2.getSerialNo()).compareTo(new Integer(c1.getSerialNo()));
            }else if (sortColumnName.equals(code)) {
                return ascending ? c1.getCityCode().compareTo(c2.getCityCode()) :
                        c2.getCityCode().compareTo(c1.getCityCode());
            } else return 0;
        }
    };
    Collections.sort(listCity, comparator);
}
private static final String serialNo = "Sr No.";                                        //  fechaEnvioHtrans ------ name of Colum which u want to sort
private static final String code = "Code";
public static String getSerialno() {
    return serialNo;
}
public static String getCode() {
    return code;
} 
```

通过这些方式，您的列将被排序，最后您的数据表列表的 getter 方法只需在该方法中调用 sort() 方法

# sql - sql 根据另一个表中的列进行选择

> ID：13867519
> 
> 赞同：-1
> 
> 时间：2012-12-13T20:02:02.590
> 
> 标签：sql

好的，我有两张桌子。

一张表称为 Persons，只有列 Pname 和 Age。（一个人的名字和他们的年龄）。另一个表名为 Giving，其中包含捐赠者、接收者和礼物名称。（捐助者和接收者具有引用 people.pname 的外键约束）。

我需要找到所有向不同年龄的人捐赠礼物的人的姓名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:05:09.700

```
SELECT
  Giving.donor
FROM Giving
INNER JOIN Persons AS donor ON Giving.donor=donor.Pname
INNER JOIN Persons AS receiver ON Giving.receiver=receiver.Pname
WHERE donor.Age<>receiver.Age 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:24:16.450

如果您的意思是捐赠者年龄必须与接受者年龄不同，请尝试以下操作：

```
SELECT pd.pname 
FROM Persons pd
INNER JOIN giving g
ON pd.pname = g.donor
INNER JOIN persons pr
ON pr.pname = g.receiver AND pr.age != pd.age 
```

# compiler-construction - ANTLR 中的布尔和算术表达式语法

> ID：13867525
> 
> 赞同：5
> 
> 时间：2012-12-13T20:02:28.260
> 
> 标签：compiler-construction, antlr, grammar, antlr3

我正在尝试为算术和布尔表达式编写语法。我不明白我做错了什么。对于我的语法，ANTLR 说：

> [致命] 由于可从 alts 1,2 访问的递归规则调用，规则 logic_atom 具有非 LL(*) 决策。通过左分解或使用句法谓词或使用 backtrack=true 选项来解决。

但我不能做左分解。而且我不想碰`arith_expr`，因为为此我有一个代码。

错误`logic_atom : LBR logic_expr RBR | cmp_expr ;`

我的代码：

```
grammar ArithmeticInterpreter;

options { 
    output = AST;
    language = C;
}
//options{greedy=true;}:

axiom : lines EOF! ;
lines : line (SEP! line)* ;
line  : (def_var | print_expr | scan_expr)? ;

def_var    : VARIABLE ASSIGMENT^ logic_expr ;
print_expr : PRINT_KEYW^ arith_expr ;
scan_expr  : SCAN_KEYW^ VARIABLE ;

arith_expr : ((PLS | MNS)^)? term ((PLS | MNS)^ term)*;
term       : power ((MLP | DIV)^ power )*;
power      : atom  (options{greedy=true;}: PWR^ power )*;
atom       : INT | FLOAT | VARIABLE | LBR arith_expr RBR -> ^(arith_expr);

logic_expr    : logic_atom ((OR | AND)^ logic_atom)*;
logic_atom :   LBR logic_expr  RBR |  cmp_expr  ;
cmp_expr: arith_expr (LSS | LSQ | GRT | GRQ | EQL | NEQ) arith_expr;

WS  : ( ' '| '\t'| '\r') {$channel=HIDDEN;};

LBR :  '(' ;
RBR :  ')' ;
PLS :  '+' ;
MNS :  '-' ;
MLP :  '*' ;
DIV :  '/' ;
PWR :  '^' ;

LSS :  '<'  ;
LSQ :  '<=' ;
GRT :  '>'  ;
GRQ :  '>=' ;
EQL :  '==' ;
NEQ :  '!=' ;
AND :  '&&' ;
OR  :  '||' ;
NOT :  '!'  ;

ASSIGMENT : '=' ;
PRINT_KEYW : 'print' ;
SCAN_KEYW  : 'scan' ;

SEP : '\n' | ';' ;

INT :  ('0'..'9')+;

FLOAT : INT '.' INT* EXP? | '.' INT EXP? | INT EXP;
fragment EXP : ('e'|'E') (PLS | MNS)? INT;

VARIABLE : SS (SS | '0'..'9')* ;
fragment SS : 'a'..'z' | 'A'..'Z' | '_' ; 
```

//`(LBR arith_expr)=>`不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:31:27.190

考虑将您的`logic_expr`and更改`cmp_expr`为：

```
logic_expr : cmp_expr ((OR | AND)^ cmp_expr)*;
cmp_expr   : (arith_expr (LSS | LSQ | GRT | GRQ | EQL | NEQ))=> arith_expr (LSS | LSQ | GRT | GRQ | EQL | NEQ)^ arith_expr
           | LBR logic_expr RBR -> logic_expr
           ; 
```

我删除了该规则`logic_atom`，因为它掩盖了您遇到的错误并且没有增加价值。

通过使用 in 的语法谓词`cmp_expr`，您可以告诉 ANTLR any`arith_expr`后面跟着一个逻辑符号只会跟着 an `arith_expr`，这意味着 ANTLR 遇到的任何括号都必须属于算术表达式而不是逻辑表达式。

这确保`logic_expr`只处理布尔值并且`arith_expr`只处理数值。

* * *

我使用修改后的语法测试了各种场景，并且在 ANTLRWorks 或我的自定义测试代码中没有出现错误。你能发布更多关于你所看到的信息吗？

这是我正在使用的完整语法。请注意，我删除了`language`以便我可以在 Java 中测试它。这应该没问题，因为没有动作/语义谓词。我还做了一些小改动，但我不认为它们会是严重的修复。它们用注释表示。

```
grammar ArithmeticInterpreter;

options { 
    output = AST;
}
//options{greedy=true;}:

axiom : lines EOF! ;
lines : line (SEP! line)* ;
line  : (def_var | print_expr | scan_expr)? ;

def_var    : VARIABLE ASSIGMENT^ logic_expr ;
print_expr : PRINT_KEYW^ arith_expr ;
scan_expr  : SCAN_KEYW^ VARIABLE ;

arith_expr : ((PLS | MNS)^)? term ((PLS | MNS)^ term)*;
term       : power ((MLP | DIV)^ power )*;
power      : atom  (PWR^ atom)*;  //<-- changed
atom       : INT | FLOAT | VARIABLE 
           | LBR arith_expr RBR -> arith_expr //<-- changed
           ;

logic_expr : cmp_expr ((OR | AND)^ cmp_expr)*;
cmp_expr   : (arith_expr (LSS | LSQ | GRT | GRQ | EQL | NEQ))=> arith_expr (LSS | LSQ | GRT | GRQ | EQL | NEQ)^ arith_expr
           | LBR logic_expr RBR -> logic_expr
           ;

WS  : ( ' '| '\t'| '\r') {$channel=HIDDEN;};

LBR :  '(' ;
RBR :  ')' ;
PLS :  '+' ;
MNS :  '-' ;
MLP :  '*' ;
DIV :  '/' ;
PWR :  '^' ;

LSS :  '<'  ;
LSQ :  '<=' ;
GRT :  '>'  ;
GRQ :  '>=' ;
EQL :  '==' ;
NEQ :  '!=' ;
AND :  '&&' ;
OR  :  '||' ;
NOT :  '!'  ;

ASSIGMENT : '=' ;
PRINT_KEYW : 'print' ;
SCAN_KEYW  : 'scan' ;

SEP : '\n' | ';' ;

INT :  ('0'..'9')+;

FLOAT : INT '.' INT* EXP? | '.' INT EXP? | INT EXP;
fragment EXP : ('e'|'E') (PLS | MNS)? INT;

VARIABLE : SS (SS | '0'..'9')* ;
fragment SS : 'a'..'z' | 'A'..'Z' | '_' ; 
```

* * *

给定 input `x=(2<3)`，生成以下 AST 树：

```
(= x (< 2 3)) 
```

呈现如下：

![(= x (< 2 3))](../Images/d8493577d5bba55f853ee5b129e8d299.png)

修改后的语法现在还可以处理更复杂的情况，例如`x = 2 + 3 < 4 || (5 ^ 5 > 30 && 3 == 10 + 2)`：

```
(= x (|| (< (+ 2 3) 4) (&& (> (^ 5 5) 30) (== 3 (+ 10 2))))) 
```

![更复杂的图](../Images/512e0ae41a9d638939f13af36698d835.png)

所以试着复制上面的语法，看看是否能解决你得到的错误。如果没有，请让我了解更多有关您看到的错误的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:43:30.917

我的快速建议是结合算术和逻辑表达式。查看任何示例语法，例如 Java.g 或其他。顺便说一句，ANTLR v4 可以解决这个问题。

# asp.net - 使文本框无法选择

> ID：13867527
> 
> 赞同：1
> 
> 时间：2012-12-13T20:02:35.507
> 
> 标签：asp.net, html

嗨，我有一个文本框，我用它作为计数器来显示另一个文本框中仍然允许多少个字符。我已将其设为只读且背景透明，因此您无法判断它是一个选择框。唯一的问题是您仍然可以单击它或选择它。有没有办法做到这一点，让它看起来就像普通文本一样，人们不能点击它或标签到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:07:15.220

如果这是一个[Asp.Net Web 控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.aspx)，则将其`Enabled`属性设置为`false`

```
<asp:TextBox Enabled="false" /> 
```

如果是 HTML，你可以这样做：

```
<input type="text" disabled /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:10:42.307

你需要一些 CSS 风格和一些 Jquery 技巧。

**CSS**

```
.readonly{
    border:none;
    background:#aaa;    
}​ 
```

**jQuery**

```
 $(".readonly").focus(function(){
       $(this).blur();
});​ 
```

现在只需添加`class="readonly"`到您的文本框中。

```
<asp:TextBox cssClass="readonly" /> 
```

[在这里](http://jsfiddle.net/QX9jc/1/)查看演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:30:04.703

只需将`input`元素替换为`span`元素或其他一些非输入元素。这需要对您的 JavaScript 进行细微的更改；您将分配给`innerHTML`元素的属性，而不是`value`. 然后内容将显示为普通文本，您可以根据需要对其进行样式设置。

# matlab - 调用 MATLAB 类实例的副作用不会持续存在

> ID：13867533
> 
> 赞同：4
> 
> 时间：2012-12-13T20:03:09.347
> 
> 标签：matlab, oop, matlab-class

如果我在 MATLAB 中制作以下玩具类：

```
classdef testIt
    properties
        a
        b
        c
    end
    methods
        function obj = testIt
            obj.a = 1;
            obj.b = 2;
        end

        function obj = set.a(obj,a)
            obj.a = a;
        end

        function obj = set.b(obj,b)
            obj.b = b;
        end

        function obj = addup(obj)
            obj.c = obj.a + obj.b;
        end
    end
end 
```

然后实例化并调用`addup`方法：

```
>> aTest = testIt

Properties:
a: 1
b: 2
c: []

>> aTest.addup

Properties:
a: 1
b: 2
c: 3

>> aTest

Properties:
a: 1
b: 2
c: [] 
```

该属性`c`尚未创建。相反，我需要使用以下语法：

```
>> aTest = aTest.addup

>> aTest

Properties:
a: 1
b: 2
c: 3 
```

谁能向我解释为什么这是必要的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:12:55.893

Matlab 支持两种类型的类：**句柄类**和**值类**。

**值类**的操作类似于结构和其他 Matlab 变量，因为它们是按值传递的。因此，如果要在函数中修改值类的实例，则需要返回并覆盖调用工作区中的实例。

**另一方面，**句柄类是通过引用传递的。**如果您在任何地方更改属性的值，则会在所有工作区中更新该类。例如，您可以在基础工作区中引用对象，在 GUI 中引用一个对象，如果您修改一个，另一个会相应地更改其值。**

 **如果您将代码更改为`classdef testIt < handle`，则对象的行为将完全符合您的预期。

另外：[查看文档](http://www.mathworks.com/help/matlab/matlab_oop/comparing-handle-and-value-classes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:11:56.957

添加到类定义：

```
classdef testIt < handle 
```**

# python - Python 导入 gdata Google Apps 引擎：课程生成器

> ID：13867535
> 
> 赞同：0
> 
> 时间：2012-12-13T20:03:14.763
> 
> 标签：python, google-app-engine, google-api, google-apps, google-provisioning-api

我正在使用 Google Course Builder 并尝试导入 GData 库，以便在注册课程时利用配置 API 将成员添加到 google 组。

`utils.py`当然builder里面有注册的功能。

问题是当我添加`import gdata.apps.groups.client`然后在本地运行服务器时，浏览器返回内部服务器错误 500。

显然，我在这里遗漏了一步，但是如果不在我的站点包文件夹中，我应该将 GData 文件夹放在哪里？我已将其复制到课程构建器中的所有目录中，但没有成功。

这是文件中的*原始*导入部分`utils.py`：

```
import logging, urlparse, webapp2, jinja2
from models.models import Student, Unit, MemcacheManager
from google.appengine.api import users
from google.appengine.ext import db
from models.utils import getAllScores 
```

***非常***感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:36:31.847

尝试将[gdata-python-client](http://code.google.com/p/gdata-python-client/downloads/list)中的 gdata 和 atom 与 app.yaml（AppEngine 应用程序的根目录）放在同一文件夹中。

# c++ - BidirectionalIterator 的 decltype(*it) 是什么？

> ID：13867539
> 
> 赞同：2
> 
> 时间：2012-12-13T20:03:25.430
> 
> 标签：c++, c++11, iterator, type-inference, decltype

是`decltype(*it)`迭代器的值类型，还是对它的左值引用，还是别的什么？

我认为它是一个左值引用，因为它是一个左`*it`值，但我不确定。

注意：在我的情况下，`it`是*BidirectionalIterator*，但请随意回答一般情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:07:11.020

`*it`肯定不能保证是左值。输入迭代器可能返回一个右值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T20:11:13.100

`*it`不一定是左值。只有前向迭代器有这个要求。

迭代器（第 24.2.2 节）必须`*it`是一个有效的返回表达式`iterator_traits<Iterator>::reference`（和其他不相关的东西）。对此没有任何其他说明，并且`reference`不必是引用类型†。

输入迭代器（第 24.2.3 节）必须*是*返回可转换为值类型`*it`的内容的有效表达式。

 *但是，前向迭代器具有以下要求（第 24.2.5 节第 1 段）：

> — if`X`是可变迭代器，是对;`reference`的引用 `T`if`X`是 const 迭代器，`reference`是对 的引用`const T`，

（这里`T`是迭代器的值类型）

这需要`*it`是一个引用，这意味着它必须是一个glvalue（即不能是prvalue，但可以是一个xvalue，就像移动迭代器的情况一样）。

更高的迭代器类别不添加任何相关要求。

* * *

†`reference`被定义为`*it`使其有点循环定义的类型，但没有限制。*

# objective-c - “在演示过程中”收到此警告（Xcode）

> ID：13867541
> 
> 赞同：2
> 
> 时间：2012-12-13T20:03:34.657
> 
> 标签：objective-c, xcode, warnings, presentmodalviewcontroller, presentation

在我正在编写的一个项目中，当我展示一个新的视图控制器时出现此错误：

> 尝试演示......在演示过程中！

我认为这是因为我首先呈现了一个新的视图控制器，然后在该视图中我呈现了另一个视图控制器。

```
- (void)loadLabelSettings {
    LabelSettingsViewController *labelSettings = 
      [[LabelSettingsViewController alloc] init];
    labelSettings.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:labelSettings animated:YES completion:nil];
} 
```

该程序不会崩溃或运行正常，并且我的代码中没有错误或警告。所以我的问题是：这是我应该关注的问题，如果是，我该如何解决？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:32:51.777

正如您所说，这可能是由于同时呈现两个视图控制器引起的。等待呈现第二个视图控制器，直到完全呈现第一个视图控制器。一个好的位置是在`viewDidAppear`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T13:22:47.267

就我而言，我通过 a 将 a与`UIViewControllers` `UIButton`一秒连接起来。在我的代码中，第二次以编程方式调用它。所以按两次导致出现指定的视图。`UIViewController``UIStoryboardSegue``UIButton`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T19:22:09.083

我发现了我的问题，正如 Scott 所写的那样，因为我同时展示了 2 个视图控制器。发生这种情况是因为我有一个带有 UILongPressGestureRecognizer 的按钮，它显示了新的视图控制器。问题是当使用 UILongPressGestureRecognizer 时，被调用的方法被调用了两次。首先是检测到长按以及手指从屏幕上松开时。所以同一个视图的presentViewController方法，被调用了两次。我只对第一次检测做出反应来解决这个问题。这是代码：

```
- (void)loadButtonSettings:(UILongPressGestureRecognizer *)recognizer {

   if (recognizer.state == UIGestureRecognizerStateBegan) {

   }
} 
```

# php - htaccess - 将 .shtml 和 .html 重写为 . php

> ID：13867543
> 
> 赞同：3
> 
> 时间：2012-12-13T20:03:38.567
> 
> 标签：php, html, .htaccess, mod-rewrite, shtml

我对 mod_rewrite 很满意。我的第一行像冠军一样工作，但第二部分拒绝合作

```
RewriteRule ^(.*).html$ $1.php
RewriteRule ^(.*).shtml$ $1.php [R=301,L] 
```

该`.shtml`部分非常失败并且出现 404 - 没有我的自定义 404 页面。这应该合并为一个规则吗？我应该辞掉工作，让他们雇一只猴子来代替我吗？有没有人对此有解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:05:59.477

假设您打算将两者都`.shtml`重定向`.html`到`.php`...

这些都应该组合成一个规则，问题看起来是两者都匹配，因为`.`之前未转义`.html`的字符代表“任何字符”，因此也匹配`shtml`。

该模式`\.s?html`将匹配文字`.`，后跟一个*可选* `s`的，并以 . 结尾`html`。

```
RewriteEngine On
RewriteRule ^(.*)\.s?html$ $1.php [R=301,L] 
```

# zend-framework2 - ZF2 使用 POST 重定向

> ID：13867545
> 
> 赞同：2
> 
> 时间：2012-12-13T20:03:41.020
> 
> 标签：zend-framework2

在用户尝试未经授权的操作之前，我保存：

1) 控制器名称

2) 行动

3) 发布参数

然后，当用户成功登录时，我将其重定向到...

```
$params["controller"] = "manage";
$params["action"] = $lastRequest["action"];
$params["name"] = "Ignacio";
$params["email"] = "ignacio@gmail.com";

return $this->redirect()->toRoute("user-create", $params); 
```

它确实重定向，但没有发布参数。

如何从控制器模拟 ZF2 上的 POST 请求？关键是我不知道它将被重定向到哪里的用户，所以它可能是 GET 或 POST 以及任何控制器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T19:52:46.190

这是我保存请求并稍后使用它来重定向到正确操作的方式。

**1) 未经授权的操作使用所有 GET/POST 参数保存请求。**

```
$session = new Container('base');
$session->offsetSet("lastRequest", $event->getRequest()); 
```

**2）登录成功后，重定向到请求的**

```
$session = new Container('base');
if($lastRequest = $session->offsetGet("lastRequest")) {
    //Just redirect, because I could NOT find a way to POST params
    return $this->redirect()->toUrl($lastRequest->getRequestUri());
} 
```

**3) 在控制器动作之前，检索所有 POST/GET 参数**

```
class Module {
//...
    public function init($moduleManager)
    {
        $sharedEvents = $moduleManager->getEventManager()->getSharedManager();
        $sharedEvents->attach(__NAMESPACE__, \Zend\Mvc\MvcEvent::EVENT_DISPATCH, array($this, 'preDispatch'), 100);
    }

    public function preDispatch($event)
    {

    //Unauthorized request after success login
    $session = new Container('base');
    if($lastRequest = $session->offsetGet("lastRequest")) {
        $event->getTarget()->getRequest()->setMethod($lastRequest->getMethod());
        $event->getTarget()->getRequest()->setPost($lastRequest->getPost());
        $event->getTarget()->getRequest()->setQuery($lastRequest->getQuery());

        //Delete request
        $session->offsetSet("lastRequest", null);               
    }
} 
```

**4) 只需像往常一样在任何目标操作上使用请求**

```
class ManageController extends AbstractActionController {

    public function createAction() {
        if ($this->getRequest()->isPost()) {
            $post = $this->getRequest()->getPost()->toArray();
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:20:39.030

您不能使用 POST 数据重定向用户，但 ZF2 提供了模拟此功能的功能：http: [//framework.zend.com/manual/2.0/en/modules/zend.mvc.plugins.html#the-post-redirect-获取插件](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.plugins.html#the-post-redirect-get-plugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T05:15:39.380

此解决方案可能会有所帮助，但不是使用重定向，而是转发到另一个控制器。

在将其转发到另一个控制器之前，请替换（或更新）当前请求的 post 参数。然后接收控制器将看到替换（或更新）的帖子参数。

```
// Controller that handles unauthorized access

class YourController extends AbstractActionController
{

    // ...

    $request   = $this->getEvent()->getRequest();
    $postParam = new \Zend\Stdlib\Parameters();

    $postParam->set('controller', 'manage');
    $postParam->set('action',     $lastRequest['action']);
    $postParam->set('name',       'your-name';
    $postParam->set('email',      'your-email';

    $request->setPost($postParam);

    return $this->forward()->dispatch('Your\Other\UserCreateController', [
        'action' => 'userCreate',
    ]);

    // ...

} 
```

# heroku - 如何在heroku上流式响应rails应用程序

> ID：13867547
> 
> 赞同：2
> 
> 时间：2012-12-13T20:03:43.947
> 
> 标签：heroku, http-chunked

我有一个在 heroku 上运行的 rails 3.1 应用程序。我需要为用户提供下载 csv 数据的能力。我正在尝试流式传输数据，但它是一次性发送的。对于较大的请求，哪个会超时。

heroku 网站上有很多关于流和分块的讨论，但据我所知，thin 收集所有数据并一次性发送。我如何让它工作？

我必须添加一些中间件吗？例如 unicorn 与 mongrel 一起运行的代码流很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:13:51.073

我很确定你只需要添加

```
stream 
```

到控制器的顶部。

有关 HTTP 流的更多信息可以在 RailsCasts 上找到： [http: //railscasts.com/episodes/266-http-streaming](http://railscasts.com/episodes/266-http-streaming)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-08T21:16:26.930

这个问题确实很老，但由于 Heroku 响应中的 30 英寸限制，这个问题仍然很常见，所以我将添加一些关于我如何实现它的代码。在带有 Puma 服务器的 Heroku 上与 Rails 5.2 和 6.1 一起使用。

我正在使用 # [send_stream](https://edgeapi.rubyonrails.org/classes/ActionController/Live.html)方法（仅存在于边缘导轨，未来的导轨 7 中）所以我只是复制了它 + 手动设置 Last-Modified 标题。在 rails 关注中添加了 all 以重用它。

```
module Streameable
  extend ActiveSupport::Concern
  include ActionController::Live

  def send_stream(filename:, disposition: 'attachment', type: nil)
    response.headers['Content-Type'] =
      (type.is_a?(Symbol) ? Mime[type].to_s : type) ||
      Mime::Type.lookup_by_extension(File.extname(filename).downcase.delete('.')) ||
      'application/octet-stream'

    response.headers['Content-Disposition'] =
      ActionDispatch::Http::ContentDisposition.format(disposition: disposition, filename: filename)  # for Rails 5, use content_disposition gem

    # extra: needed for streaming correctly
    response.headers['Last-Modified'] = Time.now.httpdate

    yield response.stream
  ensure
    response.stream.close
  end
end

class ExporterController < ApplicationController
  include Streameable

  def index
    respond_to do |format|
      format.html # index.html
      format.js   # index.js
      format.csv do
        send_stream(attachment_opts) do |stream|
          stream.write "email_address,updated_at\n"

          50.times.each do |i|
            line = "user_#{i}@acme.com,#{Time.zone.now}\n"
            stream.write line
            puts line
            sleep 1  # force slow response for testing respose > 30''
          end
        end
      end
    end
  end

  private

  def attachment_opts
    {
      filename: "data_#{Time.zone.now.to_i}.csv",
      disposition: 'attachment',
      type: 'text/csv'
    }
  end
end 
```

然后，如果您使用 curl 之类的东西，您将看到逐秒生成的输出。

```
$ curl -i  http://localhost:3000/exporter.csv 
```

重要的是编写代码以使用 Enumerable 模块使用 #each 迭代数据。哦，关于 ActiveRecord 的提示，使用[#find_each](https://apidock.com/rails/ActiveRecord/Batches/ClassMethods/find_each)以便分批获取数据库。

# c++ - 分析和性能问题

> ID：13867548
> 
> 赞同：0
> 
> 时间：2012-12-13T20:03:48.377
> 
> 标签：c++, profiling

在观察了我的程序中的一些性能问题后，我决定运行一个分析会话。结果似乎表明，大约 87% 的样本与我的`Update()`功能有关。

在这个函数中，我将遍历一个等于 72 的列表`A*`，`sizeof(A)`并在处理后删除它们。

```
void Update()
{
//...

    for(auto i = myList.begin(); i != myList.end(); i++)
    {
        A* pA = *i;
        //Process item before deleting it.
        delete pA;
    }

     myList.clear();

//...
} 
```

其中 myList 是一个`std::list<A*>`. 平均而言，我每秒调用此函数 30 到 60 次，而列表平均包含 5 个项目。这意味着我`A`每秒要删除 150 到 300 个对象。

在大多数情况下，多次调用 delete 是否足以导致性能问题？有什么方法可以准确追踪问题发生在函数的哪个位置？删除通常被认为是一项昂贵的操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:00:16.457

很难说，因为你刷过可能是循环中完成的大部分工作并且没有暗示 A 是什么......

如果 A 是一个简单的数据集合，尤其是原语，那么删除几乎肯定不是罪魁祸首。您可以通过将更新函数分成两部分来测试理论 - update 和 uninit。更新完成所有处理， uninit 删除对象并清除列表。

如果只是更新很慢，那就是处理。如果只有 uninit 很慢，那就是删除。如果两者都很慢，那么内存碎片可能是罪魁祸首。

正如其他人在评论中指出的那样， std::vector 可能会给您带来性能提升。但要小心，因为它也可能在其他地方导致性能问题，具体取决于您构建数据结构的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:57:46.510

您可以从[gperftools](http://code.google.com/p/gperftools/)（Google 性能工具）查看[tcmalloc 。](http://gperftools.googlecode.com/svn/trunk/doc/tcmalloc.html)gperftools 还包含一个分析器（两个库只需要链接，非常简单）。tcmalloc 为小对象保留一个内存池，并在可能的情况下重新使用该内存。分析器可用于 CPU 和堆分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:08:47.620

**很容易知道发生了什么。**

帮自己一个忙，使用[*这个方法*](https://stackoverflow.com/a/378024/23771)。分析到n级，非常有效。

简而言之，如果 87% 的时间都在`Update`，那么如果你只是用 Ctrl-C 或其他什么来停止它几次，那么每次你在行动中抓住它的概率是 87%。

您不仅会看到它在`Update`. 您将看到*在哪里*，`Update`以及它在做*什么*。如果它正在处理`delete`，或者访问数据结构，你会看到。您还将在堆栈的更下方看到该操作需要时间的原因。

# vba - VBA 加载项加载但在 Office 2010 中不起作用

> ID：13867551
> 
> 赞同：1
> 
> 时间：2012-12-13T20:04:03.700
> 
> 标签：vba, add-in, office-2010

我使用 VBA 为 PowerPoint 2010 和 Excel 2010 创建了几个加载项（我没有可用的 Visual Studio）。加载项在使用 Windows 7 Enterprise SP1 32 位和 Office Professional Plus 2010 14.0.6123.5001 32 位的瘦客户端上运行良好。在装有 Windows 7 和 Office 2010 32 位的胖客户端（普通 PC）上，加载项将不起作用。当用户尝试安装它们时，什么也没有发生；工具栏没有出现，但没有错误消息或通知栏。但是，加载项显示为加载项管理器中的加载项，并且可以从 VBA 编辑器手动运行宏。

我调查了安全设置和数字签名的问题。加载项经过数字签名，尽管加载项管理器不显示发布者信息。尝试安装加载项时提示用户信任发布者；信任发布者不会使加载项工作，也不会导致任何错误消息。

在信任中心的加载项选项卡中，“禁用未签名加载项的通知”选项在加载项不起作用的胖客户端上被选中并显示为灰色，而在它们起作用的瘦客户端上取消选中工作。在瘦客户端上检查时，加载项继续工作，所以我认为这不是问题。而且这两种部署都使用 32 位版本的 office，所以它可能也不是这样。

任何想法可能导致问题，以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:15:14.873

我遇到了类似的问题，该网站上记录的信任发布者的说明帮助我解决了问题： [http](http://www.excelguru.ca/content.php?199-Security-In-Microsoft-Office) ://www.excelguru.ca/content.php?199-Security-In-Microsoft-Office 但是，对于我的工作我无法使用使用 Microsoft Office 附带的 selfcert.exe 程序创建的证书。

# c# - 与树视图中复选框的模拟操作相比，如何检测用户操作？

> ID：13867553
> 
> 赞同：1
> 
> 时间：2012-12-13T20:04:05.323
> 
> 标签：c#, forms, event-handling, treeview, focus

我有一个带有可扩展项目列表的树视图。当用户选中父节点的复选框时，我模拟检查子节点。但是，用户可以检查任何节点（不仅仅是父节点）。我想将触发节点复选框事件的用户第一次单击与子节点复选框的模拟检查区分开来。

我想区分用户的点击，以便在树视图更改之前保存它的状态。

我想过使用 mousedown 事件，但这不起作用，因为用户可能会单击以展开某些内容，并且我不想保存树视图的状态，因为没有任何改变。完成这项工作的一种方法是计算每个复选框位置的尺寸，然后检查 mousedown 的点击坐标，但我想避免这样做，因为这并不容易，因为我有嵌套节点，所以复选框有一些他们可能是不同的列。

另一种思考方式是我想将事件组转化为行动。因此，一个动作将代表用户的第一个动作，以及随后的所有模拟动作，直到控制权返回给用户。

另一个想法，也许我可以用窗口聚焦或控制做一些事情。例如，如果窗口在模拟时没有聚焦，如果它发生在用户检查树节点复选框的操作期间，我可以保存焦点更改。

### 附加信息

模拟的复选框点击由以下代码调用：

e.Node.Checked = false;

这会触发事件： private void tree_AfterCheck(object sender, System.Windows.Forms.TreeViewEventArgs e)

当用户单击节点时，会触发此 AfterCheck 事件。我想在这里保存树的状态。但是在 AfterCheck 事件内部，也有检查其他节点导致 AfterCheck 事件再次触发 n 次的情况，但这次是模拟了对复选框的检查。

Systems.Windows.Forms.TreeView 在所有情况下都是发送者对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:09:54.837

你试过这个[`CheckBox.Click`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.click.aspx)活动吗？

这可以很容易地告诉用户正在单击以进行更改。

您还可以使用标志来指示引发的任何事件都是因为方法正在进行更改。由于这是一个 Windows 窗体，因此在您的过程完成之前，用户将无法选中另一个框（因此没有滚道条件）。

```
/// <summary>
/// Flag which can be accessed by the checkboxes which indicates if the program is making the change or the user is.
/// </summary>
bool programmaticallySettingChecks { get; set; }

protected void FlagExample()
{
    CheckBox[] chToCheck = new CheckBox[10];        //Collection of checkboxes to set the Checked property on.

    programmaticallySettingChecks = true;

    for (int i = 0; i < chToCheck.Length; i++)
    {
        chToCheck[0].Checked = true;
    }

    programmaticallySettingChecks = false;
}

protected void Check_Clicked(Object sender, EventArgs e)
{
    if (programmaticallySettingChecks)
    {
        //do things which are done if setting programmatically.
    }
    else
    {
        //Do things which are done if user sets.
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:08:15.903

您能否向我们提供一些您尝试过的代码？

如果用户只会单击父节点并且您只会选择子节点，那么也许您可以在“如果父节点，则执行，否则返回”的事件触发期间进行简单检查

# breeze - 新项目使用 WebAPI 和 Breeze 失败

> ID：13867558
> 
> 赞同：0
> 
> 时间：2012-12-13T20:04:12.783
> 
> 标签：breeze

尝试按照自述文件中的说明运行新项目时，我收到以下错误。

1：查询待办事项

2：查询失败：控制器“BreezeSample”上的操作“Todos”，返回类型为“System.Collections.Generic.List`1[[MyTasks.Api.Models.BreezeSampleTodoItem, MyTasks.Api, Version=1.0.0.0, Culture=中性，PublicKeyToken=null]]' 不支持查询。确保返回内容的类型是 IEnumerable、IQueryable 或任一接口的通用形式。

更新：

我检查了我的事件查看器，并看到了一个我在尝试在我的机器上调试时从未见过的 SQL 错误 -

用户“我的机器\用户名”登录失败。原因：无法打开明确指定的数据库。[客户： ]

BreezeSamplesContext 生成的数据库似乎由于某种原因无法访问？它是由代码优先生成的，但我无法查询它（显然）。

更新 2：

我已将默认方法更改为 -

```
[HttpGet]
public IQueryable<BreezeSampleTodoItem> Todos()
{
    System.Data.Entity.DbSet<BreezeSampleTodoItem> result = null;
    try
    {
        result = _contextProvider.Context.Todos;
    }
    catch (Exception exc)
    {
        throw new Exception(exc.Message);
    }
    return result;
} 
```

尽管 Seed 方法有效，并且数据库被删除并重新填充了种子值，但我在上面的“结果”中得到了 0 个项目的响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:06:01.573

**更新：12月15日**

关键信息……问题的原因……是使用了**预发布的 SPA 模板**。

该模板与 Breeze 文档中描述的 MVC 4 **Web API**或**Empty模板不同**

**SPA 模板**和 MVC 更新包括对 OData 查询的 ASP.NET Web API 支持的开始。他们对 OData 的攻击与 Breeze 发生冲突；这两股力量正在争夺 OData 查询的所有权。希望我们可以使用他们的，但它缺少基本功能，例如对 $select 和 $expand 的支持。

幸运的是，很容易禁用 MS 版本，以便 Breeze 占上风。打开**App_Start/WebApiConfig.cs**文件并**删除或注释掉**以下内容：

```
config.EnableQuerySupport(); // 与 Breeze 的 ODataActionFilter 冲突

```

关于“返回类型”的误导性错误应该消失，你应该重新开始工作。

请注意，执行此步骤会关闭整个站点的 MS Web API OData 过滤器。我们在积压工作中有更新 Breeze`ODataActionFilterAttribute`以便它仅禁用*Breeze 控制器*的 MS Web API OData 处理。我们还没有打扰，因为此时 SPA 模板仍然是非官方的。对于 nonce ......你不能在同一个站点中混合 Breeze 和 Web API OData 查询......除非你准备好自己做每个控制器的过滤器清理。

我们有一个 Breeze 版本的新 SPA 模板正在运行，几乎可以发布了。我将很快写下它，并将通过链接更新此答案。

以下是我之前保留的答案，主要是因为（a）它描述了如何诊断问题，（b）是评论链的上下文。

* * *

让我们重新开始，看看我们是否可以诊断。关闭所有 Visual Studio 会话（应该停止 IIS Express）。启动一个新的 VS 会话。在 VS 2012 中创建一个 MVC4 Web Api 应用程序。添加*Breeze.MVC4WebApiClientSample* NuGet 包。运行它 (F5)。还在烦恼吗？

如果是这样，让我们​​用这样的新行更新控制器方法：

```
[HttpGet]
公共 IQueryable Todos() {
    var items = _contextProvider.Context.Todos.ToList(); // 测试查询
    返回_contextProvider.Context.Todos；
}

```

在该行上放置一个断点`var items ...`并使用调试器 (F5) 重新运行。走进那条线。它扔了吗（不好但很有趣）？如果没有，你得到了多少物品？零？你应该有6个。

如果您无法通过这一点，我认为这不是微风问题。微风还没有做任何事情。我会在你的环境中寻找意想不到的东西。

当你到达这一点时，让我们知道它的情况；如果仍然卡住，我们将为下一步做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:55:13.217

NuGet 的示例设置为在您每次运行代码时删除并重新创建数据库。您是否碰巧在 SQL Management Studio 中打开了数据库？我也遇到了这个。

看看 BreezeSampleDatabaseInitializer 类。查看有关保留服务器会话之间更改的评论。如果您更改类以实现 DropCreateDatabaseIfModelChanges 接口，它只会在您更改模型时尝试删除数据库。

# mysql - 在 MySQL 中将每日数据汇总到每月存储桶中

> ID：13867560
> 
> 赞同：0
> 
> 时间：2012-12-13T20:04:14.853
> 
> 标签：mysql

很难弄清楚它应该是一个基本的用例。给定每天写入的数据表（'activity_date' date NOT NULL），将数据汇总到每月存储桶中。GROUP BY[文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)和日期类型[文档](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)没有多大帮助，我在 Google 上找不到任何教程。[这里](https://stackoverflow.com/questions/2579803/group-mysql-data-into-arbitrarily-sized-time-buckets)有一个类似的问题，但我不知道如何使它适用于我的情况。有没有一种简单的方法可以得到我需要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:06:14.937

按年和月分组怎么样？

```
SELECT YEAR(activity_date), MONTH(activity_date), COUNT(*)
FROM table
GROUP BY YEAR(activity_date), MONTH(activity_date) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:08:56.940

在这种情况下，`YEAR`and`MONTH`函数可能是您正在寻找的。也就是说，如果您想要每个不同月份的不同聚合数据（仅使用`MONTH`不使用年份将跨年份按月分组日期）。所以是这样的：

```
SELECT YEAR(activity_date) as `year`, MONTH(activity_date) as `month`, [other fields with aggregation functions]
FROM table
GROUP BY `year`, `month`
ORDER BY `year`, `month` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:06:49.820

您可以在 GROUP BY 子句中使用函数，例如`MONTH()`

```
GROUP BY YEAR(activity_date), MONTH(activity_date) 
```

# xcode - 什么是 StoryBoard ID，我该如何使用它？

> ID：13867565
> 
> 赞同：112
> 
> 时间：2012-12-13T20:04:22.277
> 
> 标签：xcode, storyboard, interface-builder

我是 IOS 开发新手，最近开始使用 Xcode 4.5。我看到每个 viewController 都可以设置一些身份变量，包括情节提要 ID。这是什么，我该如何使用它？

![在此处输入图像描述](../Images/08d85a1aca6583bb37a52020185cd338.png)

我开始在 stackoverflow 上搜索，但找不到任何解释。

我认为这不仅仅是一些愚蠢的标签，我可以设置它来记住我的控制器，对吧？它有什么作用？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-12-13T20:10:49.837

故事板 ID 是一个字符串字段，可用于基于该故事板 ViewController 创建新的 ViewController。一个示例使用来自任何 ViewController：

```
//Maybe make a button that when clicked calls this method

- (IBAction)buttonPressed:(id)sender
{
    MyCustomViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];

   [self presentViewController:vc animated:YES completion:nil];
} 
```

这将基于您命名为“MyViewController”的情节提要 ViewController 创建一个 MyCustomViewController，并将其呈现在您当前的 View Controller 上方

如果您在您的应用程序委托中，您可以使用

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                         bundle: nil]; 
```

编辑：斯威夫特

```
@IBAction func buttonPressed(sender: AnyObject) {
    let vc = storyboard?.instantiateViewControllerWithIdentifier("MyViewController") as MyCustomViewController
    presentViewController(vc, animated: true, completion: nil)
} 
```

为 Swift >= 3 编辑：

```
@IBAction func buttonPressed(sender: Any) {
    let vc = storyboard?.instantiateViewController(withIdentifier: "MyViewController") as! ViewController
    present(vc, animated: true, completion: nil)
} 
```

和

```
let storyboard = UIStoryboard(name: "MainStoryboard", bundle: nil) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-08-17T19:51:29.787

要添加到 Eric 的答案并为 Xcode 8 和 Swift 3 更新它：

故事板 ID 完全符合其名称的含义：它标识。只是它在故事板文件中**标识**了一个**视图控制器**。故事板就是这样知道哪个视图控制器是哪个。

现在，不要被这个名字所迷惑。故事板 ID 不能识别“故事板”。根据 Apple 的文档，故事板“代表应用程序用户界面的全部或部分的视图控制器”。因此，当您有类似下图的内容时，您有一个名为 Main.storyboard 的故事板，它有两个视图控制器，每个控制器都可以被赋予一个故事板 ID（它们在故事板中的 ID）。

[![在此处输入图像描述](../Images/e28d07379ff3204c610d0014b81a346b.png)](https://i.stack.imgur.com/V4Ilo.png)

您可以使用视图控制器的故事板 ID 来实例化并返回该视图控制器。然后，您可以继续操作并随心所欲地呈现它。使用 Eric 的示例，假设您想在按下按钮时显示一个带有标识符“MyViewController”的视图控制器，您可以这样做：

```
@IBAction func buttonPressed(sender: Any) {
    // Here is where we create an instance of our view controller. instantiateViewController(withIdentifier:) will create an instance of the view controller every time it is called. That means you could create another instance when another button is pressed, for example.
    let vc = storyboard?.instantiateViewController(withIdentifier: "MyViewController") as! ViewController
    present(vc, animated: true, completion: nil)
} 
```

**请注意语法的变化。**

# kendo-ui - Kendo UI Grid 可排序（和其他属性）不起作用

> ID：13867568
> 
> 赞同：0
> 
> 时间：2012-12-13T20:04:32.540
> 
> 标签：kendo-ui

我正在尝试配置 Kendo 网格，但在尝试添加排序、分组等属性时遇到问题。网格在我添加属性之前一直有效，然后它不会显示任何数据。我查看了 Kendo 网站上的文档，看起来好像我的所有东西都和他们的一样，但显然我正在寻找一些东西。

这是视图：

```
@model ExampleKendoUI.Models.HeaderVm
@{
ViewBag.Title = "Index";
}
<h2>Index</h2>

<div>@Model.Name</div>

@section scripts {
<script>
  // Output the data as JSON
  var podata = @Html.Raw(Json.Encode(ViewBag.LineItems));
</script>

<div id="poGrid" class="k-content">  

<script> 
     $(document).ready(function () {

    $("#poGrid").kendoGrid({
        dataSource: {
            data: podata
        }, 
          // sortable:true, *** Uncommenting this will break the grid ***   
columns: [
  {
    field: "Description",
    title: "Desc"
  },
  {
    field: "Quantity",
    title: "Quantity"
  }
]

});
});   
</script>    
</div>
} 
```

这是控制器：

```
namespace ExampleKendoUI.Controllers
{
public class SampleController : Controller
{
//
// GET: /Sample/

public ActionResult Index(int id)
{
  var header = new HeaderVm()
  {
    Id = id,
    Name = "Req ID"
  };

 var results = new List<PoLineVm>()
  {
    new PoLineVm() 
    {
      Id = 1,
      Description = "Some Product",
      Quantity = 1.5
    },
    new PoLineVm() 
    {
      Id = 2,
      Description = "Another Product",
      Quantity = 4.0
    },
    new PoLineVm() 
    {
      Id = 3,
      Description = "Last Product",
      Quantity = 20
    },
  };

  ViewBag.LineItems = results;

  return View(header);
  }}} 
```

这是_布局：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title>@ViewBag.Title</title>
@Styles.Render("~/Content/css")
<link href="~/Content/kendo/2012.3.1114/kendo.default.min.css" rel="stylesheet" />
@Scripts.Render("~/bundles/modernizr")
</head>
<body>
@RenderBody()

@Scripts.Render("~/bundles/jquery")
<script src="/scripts/kendo/2012.3.1114/kendo.core.min.js"></script>
<script src="~/Scripts/kendo/2012.3.1114/kendo.data.min.js"></script>
<script src="~/Scripts/kendo/2012.3.1114/kendo.grid.min.js"></script>
@RenderSection("scripts", required: false)
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:14:58.700

您没有包含所需的 JavaScript 文件，并且 JavaScript 错误意味着缺少 kendoSortable。检查所需 JavaScript 文件的文档：[http ://docs.kendoui.c​​om/getting-started/javascript-dependencies](http://docs.kendoui.com/getting-started/javascript-dependencies)

# asp.net-mvc-3 - 为什么预编译我的 ASP .NET MVC 项目并没有提高我的首次访问速度？

> ID：13867569
> 
> 赞同：0
> 
> 时间：2012-12-13T20:04:33.683
> 
> 标签：asp.net-mvc-3, performance, jit, razorgenerator

我尝试了两件事。一种是使用 aspnet_compiler 预编译我的 ASP.NET MVC 3 项目，另一种是在项目中使用 RazorGenerator 以允许编译视图。使用这两种方法，我仍然看到我网站中的页面必须在第一次访问时进行编译。我看到 csc.exe 在第一次访问时在服务器上运行，并且下次不会发生。为什么这些预编译步骤不能阻止这种情况，从而让我有更快的第一次访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:16:20.260

预编译应用程序不会改善第一个请求的启动时间，因为当第一个请求到达时仍有许多事情需要发生：

*   Application_Start 方法执行
*   为后续请求检索和缓存控制器和视图位置
*   ...

[`AutoStart feature`](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)如果您想在 Web 服务器启动时将应用程序预加载到内存中，则可以使用IIS 7.5 和 ASP.NET 4.0。这样应用程序将很热并等待第一个请求。

# bash - 使用 awk 或 shell 脚本分块文件

> ID：13867570
> 
> 赞同：0
> 
> 时间：2012-12-13T20:04:42.590
> 
> 标签：bash, shell, awk

感觉这应该是一项简单的任务，但不知何故无法将我的大脑包裹起来。我有带有 H1-H4 标题的 HTML 文件。我想获取 H3 标签之间的内容。不是两个 H3 之间的文本`<H3>`，`</H3>`而是两个 H3 之间的文本。

```
<H3>some text</H3>
<p> more text that I would like to grab</p>
<H3> some other text </H3>
<p> some more text that I'd like to get </p> 
```

... 先感谢您

我被要求描述一个示例输出，我认为我在下面的评论中做了。我将重申相同的内容，如果有不清楚的地方，请告诉我。

输入：具有许多 H3 标题的长文件

输出：许多小文件，每个包含一个片段，该片段从包含 H3 标题的行开始，到下一个 H3 标题之前的行结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:14:18.013

如果没有您发布您的预期输出，我们只是在猜测，但如果您真的想要 and 之间的文本`</H3>`，`<H3>`这是使用 GNU awk 的一种方法：

```
$ cat file
<H3>some text</H3>
<p> more text that I would like to grab</p>
<H3> some other text </H3>
<p> some more text that I'd like to get </p>
$ gawk -F'</H3>' -v RS="<H3>" -v ORS= 'NR>1{print $NF}' file

<p> more text that I would like to grab</p>

<p> some more text that I'd like to get </p>
$

$ cat file
<H3>some text</H3><p>more text that I would like to grab</p><H3>some other text</H3><p> some more text that I'd like to get </p>
$ gawk -F'</H3>' -v RS="<H3>" -v ORS= 'NR>1{print $NF}' file
<p>more text that I would like to grab</p><p> some more text that I'd like to get </p>

$ gawk -F'</H3>' -v RS="<H3>" 'NR>1{print $NF}' file
<p>more text that I would like to grab</p>
<p> some more text that I'd like to get </p> 
```

为此，您需要 GNU awk，以便您可以拥有多字符 RS。

请注意，当块之间的文本中包含换行符时，这些换行符会像任何其他字符一样在输出中重现。

如果以上不是您想要的，请再次告诉我们更多......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:59:36.177

问题是 HTML 语法非常灵活。例如：

```
<H3>some text</H3>
<p> more text that I would like to grab</p>
<H3> some other text </H3>
<p> some more text that I'd like to get </p> 
```

和

```
<H3>
    some text
</H3>
<p> 
    more
    text
    that
    I
    would
    like
    to
    grab</p>
<H3> 
  some other text
        </H3>
<p>some        more     text that I'd        like to get
</p> 
```

将产生相同的输出。多余的空白被去除，标签可以四处散布。你不能简单地寻找一个特定的标签来知道你在追求什么。

唯一真正做到这一点的方法是使用完整的脚本语言，例如 Perl 或 Python，它具有可以为您解析和组织 HTML 格式文件的模块。您无法使用 Unix 的正则表达式解析 HTML 或 XML。

不幸的是，您已将其标记为*bash*、*shell*或*awk*，而这些都不能真正以干净的方式处理 HTML 输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:14:54.087

首先，这个 shell 行将提取第一个 H3 到 H3 部分......

```
$ sed -e '1,/<H3/d' -e '/<H3/,$d' 
```

# python - 我的模拟壁球游戏的代码有什么问题？

> ID：13867578
> 
> 赞同：1
> 
> 时间：2012-12-13T20:05:11.030
> 
> 标签：python

我正在尝试使用英语规则模拟壁球比赛的得分。这些都是：

*   如果服务器赢得集会，则只有服务器会获得积分。
*   如果服务器赢得一场集会，他们将获得一分并继续作为服务器。
*   如果返回者赢得了一场集会，他们将成为服务器，但不会获得积分。
*   首先达到 9 分的玩家获胜，除非比分达到 8-8。
*   如果比分达到 8-8，首先达到 8 的玩家决定是打到 9 还是到 10。

我的代码是这样的：

```
import random

def eng_game(a,b):
    A = 'bob'
    B = 'susie'
    players = [A, B]

    server = random.choice(players)
    print server

    points_bob = 0
    points_susie= 0

    prob_A_wins = 0.4
    prob_B_wins = 0.6

    while points_bob or points_susie < 9:
        probability = random.random()
        print probability
        if probability < prob_A_wins and server == A:
            points_bob += 1
        elif probability < prob_A_wins and server == B:
            server == A
            print server

        if probability > prob_A_wins and server == B:
            points_susie += 1
        elif probability > prob_A_wins and server == A:
            server == B
            print server

        print points_bob
        print points_susie 
```

此代码返回 Susie 以 9-0 获胜，而在某些情况下，应将服务器交换给 Bob 以赢得点数，但这并没有发生。苏西继续发球，她赢得了这一分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:12:02.900

我认为问题是陈述`server == A`，`server == B`应该是这样`server = A`，`server = B`所以分配发生而不是比较。

我看到的另一个极端情况错误是，如果概率最终恰好为 0.4，您的程序将表现得就像从未发生过虚拟发球一样。

我会将您的循环更改为：

```
while points_bob < 9 and points_susie < 9:
    probability = random.random()
    print probability
    if probability <= prob_A_wins and server == A:
        points_bob += 1
    elif probability <= prob_A_wins and server == B:
        server = A
        print server

    if probability > prob_A_wins and server == B:
        points_susie += 1
    elif probability > prob_A_wins and server == A:
        server = B
        print server

    print points_bob
    print points_susie 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:29:30.593

我怀疑你的循环条件

```
while points_bob or points_susie < 9: 
```

没有按照你的想法去做。当解释为布尔值时，`False`如果它们是零，则数字是，`True`否则，这意味着这实际上会检查`(points_bob != 0) or (points_susie < 9)`. 这只会`False`在 Susie 至少有 9 分而 Bob 没有积分时（即循环只会停止）——如果 Bob 得到任何积分，游戏将永远继续下去。

要解决此问题，您应该切换到一个`and`条件。这只会在两名球员的积分都低于 9 分时继续，或者换句话说，一旦有人达到 9 分就会停止。因此，您的循环条件应该是

```
while points_bob < 9 and points_susie < 9: 
```

如果要将获胜条件更改为 10 点，则需要将玩家的点数与变量而不是常数进行比较，然后根据需要更改变量：

```
winning_score = 9
while points_bob < winning_score and points_susie < winning_score:
    # ...
    # Accumulate your points etc.
    # ...

    # Now need to reach ten points to win.
    winning_score = 10 
```

# jquery - jQuery遍历构建数组与额外的html输出

> ID：13867579
> 
> 赞同：0
> 
> 时间：2012-12-13T20:05:16.153
> 
> 标签：jquery, highcharts, traversal

关于**使用 jquery**遍历与向页面添加额外平面内容的速度/效率的问题：

我有一个包含一组数据的表，其中每行包含第一个单元格中的文本，然后是该文本的时间值。我将使用[Highcharts](http://www.highcharts.com/)来允许用户查看每行中的值的图表。每行都有一个链接，用于在模式弹出框中启动图表。这个表可能有几十到几百行和最多 20 列。

该表将如下所示：

```
<table>
  <thead>
    <tr>
      <th>Graph</th><th>Location</th><th>Jan</th><th>Feb</th><th>Mar</th><th>Apr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#" class="view-chart">View</a></td><td>Paris</td><td>14</td><td>22</td><td>18</td><td>16</td>
    </tr>
    <tr>
      <td><a href="#" class="view-chart">View</a></td><td>London</td><td>32</td><td>24</td><td>22</td><td>27</td>
    </tr>
    .... 
```

要获取位置名称和每月值以创建折线图，我可以使用 jquery 在用户单击时获取值`.view-chart`并将它们放入 Highcharts 所需的格式。使用这样的东西：

```
$('.view-chart').click(function() {
  var series = { data: [] };
  var graphTitle = $(this).parent().next().text();
  var tds = $(this).parent().next().nextAll();
  $.each(tds, function(index, item) {
    series.data.push(parseFloat(item.innerHTML));
  });
}); 
```

或者我可以简单地创建一个包含所有值的某种隐藏元素，然后点击它们：

```
<div style="display: none">
  <div id="paris">14,22,18,16</div>
  <div id="london">32,24,22,27</div>
</div> 
```

所以我的问题是**为此目的哪种方法更快/更有效**？我是否应该向页面本身添加额外的平面代码，以易于使用的格式包含所有相关数据？还是缩短页面并让jquery在点击时解析更好？

我想两者都可以正常工作，但是如果表格增长到数千行或数百列怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:07:26.920

您甚至没有想到的**最佳**`.paris`方法（我认为）是制作,`.london`等类，您可以选择并获得所需的所有数字。

```
<tr>
  <td><a href="#" class="view-chart">View</a></td><td>Paris</td><td class='paris'>14</td><td class='paris'>22</td><td class='paris'>18</td><td class='paris'>16</td>
</tr>
<tr>
  <td><a href="#" class="view-chart">View</a></td><td>London</td><td class='london'>32</td><td class='london'>24</td><td class='london'>22</td><td class='london'>27</td>
</tr>
.... 
```

所以选择：

```
var paris = $('.paris');
var parisArray = [];
paris.each(function(){
    parisArray.push(this.innerText);
}); 
```

或者获取所有这些：

```
var allElements = {};
$('.view-chart').each(function(){
   var tableRow = $(this).parents('tr');
   var rowName = $('td', tableRow).eq(1).text().toLowerCase();
   var place = $('.' + rowName);
   var placeArray = [];
   place.each(function(){
        placeArray.push(this.innerText);
   });
   allElements[rowName] = placeArray;
}); 
```

小提琴：http: [//jsfiddle.net/maniator/YJSg4/](http://jsfiddle.net/maniator/YJSg4/)

# phpmyadmin - easyphp - phpmyadmin 没有连接到 mysql 服务器

> ID：13867580
> 
> 赞同：0
> 
> 时间：2012-12-13T20:05:16.123
> 
> 标签：phpmyadmin, easyphp

我刚刚安装了easy php，而phpmyadmin 没有连接到mysql 服务器。它抛出一个错误，上面写着 - #1045 - 用户'root'@'localhost'的访问被拒绝。

我没有进行任何设置或任何类型的更改。我刚刚安装并尝试打开 phpmyadmin。配置文件如下所示 -

```
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'config';
/* Server parameters */
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['hide_db'] = '(mysql|information_schema|performance_schema|phpmyadmin)';

/* Select mysqli if your server has it */
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = false; 
```

这真的很烦人..有人可以帮忙吗。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:28:01.243

我也有这个问题。这是我的解决方法：下载并安装 MySQL 服务器，停止 MySQL 服务器服务并使用 MySQL Workbench 通过 EasyPHP 控制已安装的 MySQL 服务器。

# c# - 将文件上传到 box.com 时找不到 404 错误？

> ID：13867583
> 
> 赞同：1
> 
> 时间：2012-12-13T20:05:33.097
> 
> 标签：c#, httpwebrequest, box-api

我一直在努力让上传文件发布工作。我得到的只是一个没有帮助的 404 not found 错误。我正在使用 C# HttpWebRequest。当我在提琴手中捕获请求时，这就是它的样子。

--

```
 POST https://api.box.com/2.0/files/content HTTP/1.1
  Authorization: BoxAuth api_key=APK_KEY&auth_token=AUTH_TOKEN
  Content-Type: multipart/form-data; boundary=----------------------------8cfa73fa0212bf1
  Host: api.box.com
  Content-Length: 198082

  ------------------------------8cfa73fa0212bf1

  ------------------------------8cfa73fa0212bf1
  Content-Disposition: form-data; name="folder_id";

  532901558
  ------------------------------8cfa73fa0212bf1

  ------------------------------8cfa73fa0212bf1
  Content-Disposition: form-data; name="filename"; filename="Pasha.pdf"
  Content-Type: application/pdf

  %PDF-1.5
  %����
  1 0 obj
  <</Type/Catalog/Pages 2 0 R/Lang(en-CA) /StructTreeRoot 29 0 R/MarkInfo<</Marked true>>>>
   endobj
  2 0 obj

  // rest of file data goes here ... too long to post

  ------------------------------8cfa73fa0212bf1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:34:39.517

这是您需要发送到 box.com 的请求示例

```
POST https://api.box.com/2.0/files/content HTTP/1.1
Authorization: BoxAuth api_key={key}&auth_token={token}
Content-Type: multipart/form-data; boundary="d174f29b-6def-47db-8519-3da38b21b398"
Host: api.box.com
Content-Length: 314
Expect: 100-continue

--d174f29b-6def-47db-8519-3da38b21b398
Content-Disposition: form-data; filename="hello.txt"; name="filename"
Content-Type: application/octet-stream

{Bytes}
--d174f29b-6def-47db-8519-3da38b21b398
Content-Disposition: form-data; name="folder_id"

0 
--d174f29b-6def-47db-8519-3da38b21b398-- 
```

# ruby-on-rails - 通过Rails中的外键从表中获取值？

> ID：13867587
> 
> 赞同：0
> 
> 时间：2012-12-13T20:05:43.453
> 
> 标签：ruby-on-rails, datatable, foreign-keys, show, relationship

嗨，我创建了两个模型，

```
class Fixture < ActiveRecord::Base
 attr_accessible :away_score, :away_team_id, :home_score, :home_team_id, :result, :week
 belongs_to :team, :class_name => Team
end

class Team < ActiveRecord::Base
 attr_accessible :form, :name
 has_many :fixtures, :class_name => Fixture, :foreign_key => :home_team_id
 has_many :fixtures, :class_name => Fixture, :foreign_key => :away_team_id
end 
```

在我的灯具表中，我将 team_id 存储在 home_team_id 和 away_team_id 列中。

然后在我的 fixtures/show.html.erb 中显示存储的 id

```
<p>
  <b>Home team:</b>
  <%= @fixture.home_team_id %>
</p> 
```

如何通过将 team.id 存储在夹具表中来显示团队表中的 team.name？

我需要将此行 <%= @fixture.home_team_id %> 更改为其他内容，但不确定是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:36:00.950

[http://guides.rubyonrails.org/association_basics.html#belongs_to-association-reference](http://guides.rubyonrails.org/association_basics.html#belongs_to-association-reference)

您可以通过`belongs_to`以下方式访问它：`@fixture.team`由于您定义了一对多关系，因此它永远不应该同时拥有`home_team_id`并且`away_team_id`将访问适当的关系。

# windows-8 - app.onactivated 不触发取决于 app.start() 的位置

> ID：13867590
> 
> 赞同：1
> 
> 时间：2012-12-13T20:05:54.230
> 
> 标签：windows-8, winjs

我对该`WinJS.Application.start()`函数的理解是，它允许 WinJS 将某些正常的页面初始化事件排队，让您有机会首先在`default.js`文件中设置其他数据。通过调用`start()`末尾的函数`default.js`，WinJS 会为您触发所有排队的事件（例如`activated`事件）。

我试图了解一切都适合生命周期的位置，所以我不清楚为什么以下示例中的第一个有效，而第二个无效。我所做的只是更新页面标题，当我`app.start()`在延迟 5 秒后调用时，它无法按预期工作：

首先，这里是`default.html`：

```
<html>
<head>
    <script references...>
</head>
<body>
    <h1 id="pageTitle">Page of coolness...</h1>
</body>
</html> 
```

这是第一个`default.js`示例（按预期工作）：

```
(function () {

    var app = WinJS.Application;

    app.onactivated = function () {
            document.getElementById("pageTitle").innerText = "Rock it!";
    };

    // This code *does* fire the onactivated event:
    //   The page displays "Rock it!" in the page title
    app.start();

})(); 
```

这是第二个`default.js`示例（未按预期工作）：

```
(function () {

    var app = WinJS.Application;

    app.onactivated = function () {
            document.getElementById("pageTitle").innerText = "Rock it!";
    };

    // This code *doesn't* fire the onactivated event:
    //   It initially displays "Page of coolness..." in the page title.
    //   After 5 seconds, it adds "Gettin' there...Almost made it..." 
    //   to the the page title, but "Rock it!" never gets displayed
    WinJS.Promise.timeout(5000).then(function () {
        document.getElementById("pageTitle").innerText += "Gettin' there...";
        app.start();
        document.getElementById("pageTitle").innerText += "Almost made it...";
    });
})(); 
```

为什么`app.start()`在 5 秒延迟后调用会导致`activated`事件不触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:27:16.870

该`start`函数的文档有点误导。

当您调用 时`start`，`WinJS.Application`开始排队和分派事件，包括由 发出的事件`Windows.UI.WebUI.WebUIApplication`。其中一个事件是`activated`，这会导致您的处理程序函数被调用。

重要的一点是，直到您调用`start`. `WebUIApplication`在排队开始之前发出的任何事件都将永远丢失。

这是您通过延迟调用来创建的情况`start`：在队列设置之前`activated`发送事件。该事件永远不会被接收，因此您的处理程序函数永远不会被调用。`WebUIApplication``WinJS.Application``activated``WinJS.Application`

我知道您只是想弄清楚生命周期，但没有理由延迟您`start`在现实生活中对该函数的调用。获得您试图在代码中创建的效果的唯一方法是将 Promise 放在`onactivated`处理程序函数中，如下所示：

```
(function () {

    var app = WinJS.Application;

    app.onactivated = function () {
        document.getElementById("pageTitle").innerText += "Gettin' there...";

        WinJS.Promise.timeout(5000).then(function () {
            document.getElementById("pageTitle").innerText = "Rock it!";
        });
        document.getElementById("pageTitle").innerText += "Almost made it...";

    };

    app.start();
})(); 
```

# java - Hibernate按日期范围进行一对多映射？

> ID：13867591
> 
> 赞同：0
> 
> 时间：2012-12-13T20:05:58.863
> 
> 标签：java, hibernate

我想将 Train.trainFares 从瞬态更改为映射到 TrainFare 类。但是，我想将 TrainFares 限制为对 Train.ddate 有效的那些。我该怎么做呢？

我发现了一个 Hibernate Jira[问题](https://hibernate.onjira.com/browse/HHH-4284)，我认为这可能是我的问题的根源。有没有其他人遇到过这个问题？你找到解决方法了吗？

```
@Entity
@Table(name = "TRAIN")
public class Train { 

    @EmbeddedId
    private TrainPK id;

    @Column
    private String trainType;

    @Transient
    private List<TrainFare> trainFares;

    @Embeddable
    public static class TrainPK {

        @Column
        private String company;

        @Column
        private Date departDate;

        @Column 
        private String trainNumber;
    }

    ... setters & getters
} 
```

```
@Entity
@Table(name = "SEATRATE")
public class SeatRate { 

    @EmbeddedId
    private SeatRatePK id;

    @Column
    private Date expiryDate; 

    @Column
    private String trainNumber;

    @Embeddable
    public static class SeatRatePK { 

        @Column
        private String company

        @Column 
        private Date effectiveDate;

    }

    ... setters & getters
} 
```

# mysql - 如果值为空，则将默认值插入非空列

> ID：13867593
> 
> 赞同：10
> 
> 时间：2012-12-13T20:06:04.330
> 
> 标签：mysql

我有一个表`foo`，其中有一`NOT NULL`列默认名为`message`：

```
CREATE TABLE foo(
    id int PRIMARY KEY,
    message varchar(64) NOT NULL DEFAULT 'Hello'
) 
```

有一个存储过程`bar`插入`foo`：

```
CREATE PROCEDURE bar(
    i_id int,
    i_message varchar(64)
)
BEGIN

    -- other logic

    IF i_message IS NOT NULL THEN
        INSERT INTO foo (id, message) VALUES (i_id, i_message);
    ELSE
        INSERT INTO foo (id, message) VALUES (i_id, DEFAULT);
        -- could also be: INSERT INTO foo (id) VALUES (i_id);
    END IF;
 END; 
```

您可以看到，我必须有条件地分支才能让我的插入使用默认值 if`i_message`为 null。这对于一列来说很好，但考虑如果`foo`有更多`NOT NULL DEFAULT`列 - 语法将是笨拙的方式。

是否有我可以使用的语法来指定插入的值如果为 null 则应回退到默认值？我尝试了以下但可以理解的语法错误：

```
INSERT INTO foo (id, message) VALUES (i_id, COALESCE(i_message, DEFAULT));
INSERT INTO foo (id, message) VALUES (i_id, IFNULL(i_message, DEFAULT)); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-13T20:10:26.940

```
 INSERT INTO foo (id, message) 
  VALUES
  (i_id, IFNULL(i_message,DEFAULT(message))); 
```

# c++ - 为什么在所有数据类型中 int 依赖于操作系统或编译器

> ID：13867595
> 
> 赞同：0
> 
> 时间：2012-12-13T20:06:05.223
> 
> 标签：c++, operating-system

我想知道，在 C/C++ 中通常可用的所有数据类型中，为什么其中一些依赖于操作系统或编译器？

这有什么合乎逻辑的原因，还是只是设计使然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:10:42.277

是的。因为 C/C++ 在许多不同的机器架构上运行。

所以`int`被定义为机器的“自然大小” - 这让编译器生成在该机器上运行良好的代码。

在现代机器上，通常是 32 位或 64 位。在旧机器上，它是 16 位。在某些机器上（你可以查一下）它是 24 位或 36 位的。

C 标准对这些类型的定义非常谨慎。它需要一些东西（例如“`long`不能小于`int`”），而将其他东西留给实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:50:25.753

`int`在这方面并不特别。每个整数数据类型都依赖于编译器。每种类型都有最小范围，并且类型具有非递减大小的顺序：`char`-> `short`-> `int`-> `long`-> `long long`。符合要求的实现可以使它们全部为 64 位宽。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T20:12:33.507

该`int`类型应该是您正在使用的体系结构的自然大小。所以在 32 位机器上，`int`通常是 32 位。在 64 位上，`int`通常是 64 位。（64 位机器上的 32 位操作系统可能是 32 位`int`。）

这样做的原因是效率。通常，最大可表示数量实际上并不重要，您只想使用最有效的类型。最常见的例子是循环。

```
for(int i=0; i< NUM_ITER; ++i) {
  // ...
} 
```

对于大多数循环，迭代次数通常不会那么大。但是，即使您知道您不需要循环超过 255 次，使用，例如，`unsigned char`因为您的循环计数器在寄存器使用等方面实际上可能效率较低。

编辑：这是另一个例子。假设字长为 4 个字节，并且您有一些以如下方式开头的函数：

```
void foo() {
  static char x;
  static char y;
  // ...
} 
```

一个天真的编译可能会将变量`x`放在某个地址，比如`0x0F00`. 然后变量`y`将由天真的编译放置在地址处，`0x0F01`因为`x`只需要 1 个字节。但是在许多架构上，内存访问针对 4 字节对齐的地址进行了优化，因此访问`y`可能被实现为对/从 4 字节的访问`0x0F00`，然后丢弃其中的 3 个字节。这在带宽消耗方面显然是浪费的，但更大的问题是必须进行额外的处理才能将 4 字节字中的字节打包/解包。

OTOH，如果大于 1 字节是可以的（即，如果您不依赖变量溢出作为算法的一部分），那么您最好将它们声明`x`为. 即使您的值 <256，您最终每次都访问 4 个字节，这很浪费，但不比前一种情况更多。但是，您不再需要对变量进行打包或解包，这样就没有了一些开销。`y``int`

关键是，如果您简单地将`x`and声明`y`为`int`，则不必担心 32 位体系结构与 64 位体系结构的对齐问题。无论哪种方式，编译器都会做正确的事情。

# java - 为什么我的片段中没有调用我的 android.R.id.home？

> ID：13867599
> 
> 赞同：2
> 
> 时间：2012-12-13T20:06:20.490
> 
> 标签：java, android, android-layout

我目前正在使用 FragmentStatePagerAdapter，我希望它具有“向上导航”功能 (DisplayHomeAsUpEnabled)。当我设置以下代码时，它显示为正确的导航返回按钮。但是当我点击它时什么也没有发生，你们能看到我在我的代码中做错了什么吗？按下“向上导航”按钮时我没有收到任何错误，我也没有收到编译器错误。

这是代码，它在“public boolean onOptionsItemSelected(MenuItem item) {”中，它在底部变得有趣。

```
public class ShareholdingDetailFragment extends FragmentActivity {

    final int NUM_ITEMS = Portfolio.getPortfolio().count();

    MyAdapter mAdapter;

    ViewPager mPager;
    Bundle extras; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        System.out.println(NUM_ITEMS + "e");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.shareholdingdetailview_fragment_wrapper);

        mAdapter = new MyAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

    }

    public class MyAdapter extends FragmentStatePagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        public int getCount() {
            return NUM_ITEMS;
        }

        public Fragment getItem(int position) {
            return ShareholdingFragment.newInstance(position);
        }
    }

    public static class ShareholdingFragment extends Fragment {
        int mNum;

        static ShareholdingFragment newInstance(int num) {
            ShareholdingFragment f = new ShareholdingFragment();

            // Supply num input as an argument.
            Bundle args = new Bundle();
            args.putInt("num", num);
            f.setArguments(args);

            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mNum = getArguments() != null ? getArguments().getInt("num") : 1;
        }

        @SuppressLint({ "NewApi", "NewApi" })
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.shareholdingdetailview_fragment, container, false);

            /****************Setting the Display as home and it shows*******************/
            ActionBar bar = getActivity().getActionBar();
            bar.setDisplayHomeAsUpEnabled(true);
            /**********************************/

            return view;
        }

            @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
                case android.R.id.home://Not working
System.out.println("test");//This isn't printed out
                    Intent upIntent = new Intent(getActivity(), DetailShareHoldingActivity.class);
                    if (NavUtils.shouldUpRecreateTask(getActivity(), upIntent)) {

                    getActivity().finish();
                } else {
                    NavUtils.navigateUpTo(getActivity(), upIntent);
                }
                return true;
        }
        return super.onOptionsItemSelected(item);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:08:49.640

尝试添加： setHasOptionsMenu(true); 在 ShareholdingFragment 的 onCreate() 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:44:12.073

`setHomeButtonEnabled(true)`配置操作栏时添加API 级别 14 及更高级别。在 API 级别 11-13 上，主页按钮会自动启用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-02T07:26:20.687

如果您使用的是新的 Toolbar 和 ActionbarDrawerToggle。您可以直接分配 clickHandler 。对于具有此抽屉工具栏的活动，我实现了一个界面以在根目录下启用抽屉，

```
 @Override
    public void enableDrawer(boolean enable) {
        mDrawerToggle.setDrawerIndicatorEnabled(enable);
        mDrawerToggle.setToolbarNavigationClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
// Pop fragment back stack or pass in a custom click handler from the fragment.
            }
        });
    } 
```

# css - Div，z-index，不透明度。错误、功能或用户相关问题？

> ID：13867601
> 
> 赞同：0
> 
> 时间：2012-12-13T20:06:42.673
> 
> 标签：css, z-index, opacity

嗨，我遇到了 CSS 不透明度换行预期输出的问题。

[小提琴](http://jsfiddle.net/Ztm35/)

红色 div 上的 Z-index 为 1，蓝色为 206。现在，从 CSS 中删除（或更改为 1.0）。`#menu {opacity: 0.8;}`

按预期工作。

有人可以解释一下吗？

或者更重要的是，我如何在顶部制作较暗的 div，同时拥有一个半透明的 div？我不是 CSS 专家，所以很可能是用户错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:14:35.053

您的问题是**[由](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)**`#menu`.

引用[MDN](https://developer.mozilla.org/)：

> 在文档中的任何位置，任何元素都可以形成堆叠上下文
> 
> *   根元素（HTML），
> *   以“auto”以外的 z-index 值定位（绝对或相对），
> *   **不透明度值小于 1 的元素。**

这就是当您应用 opacity < 1 时您的 div 行为异常的原因。`#menu`现在建立一个单独的堆叠上下文，它的后代的z-index`#status`在这个上下文之外没有任何意义。要更正此问题，请将 z-index 应用于`#menu`自身。

# python - 需要将一个csv文件提取到一个新文件中

> ID：13867603
> 
> 赞同：0
> 
> 时间：2012-12-13T20:06:52.137
> 
> 标签：python, file, csv, gzip

我是这里的python新手...

我有一个从 Internet 下载的 gzip 压缩文件 (C:\sample.gz)，我需要有关将 csv 文件提取到其自己的文件 (C:\sample.csv) 中的代码的帮助，我看到的只是代码将其加载到内存中...有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:11:04.830

您可以使用 python 的[gzip 库](http://docs.python.org/2/library/gzip.html)。

```
import gzip
with gzip.open('/sample.gz', 'rb') as my_gz:
    file_content = my_gz.read()
    with open('/sample.csv', 'wb') as my_csv:
        my_csv.write(file_content) 
```

# objective-c - 计算日期范围内的周数

> ID：13867605
> 
> 赞同：1
> 
> 时间：2012-12-13T20:06:59.930
> 
> 标签：objective-c, date, nsdate

我需要对一年中持续的日志进行一些基于时间的统计，我需要做的就是在确定的日期范围内计算（太阳）周数。

即我需要计算从 2011 年 8 月 1 日到 2012 年 9 月 3 日之间发生了多少周。诸如此类的事情。

我有计算两个日期之间的天数然后除以 7 的想法，但这不包括我可能在几周之间的事实，在这种情况下，值将不正确/不精确。

以前有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:17:53.880

我假设您在 NSDates 中有两个日期（date1 和 date2）。然后打电话

```
NSCalendar *calendar = [NSCalendar currentCalendar];
//declare your unitFlags
int unitFlags = NSWeekCalendarUnit;

NSDateComponents *dateComponents = [calendar components:unitFlags fromDate:date1  toDate:date2 options:0];

int weeksInBetween = [dateComponents week]; 
```

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:18:01.387

`NSCalendar`是你应该参加的课程。它允许您`NSDateComponents`使用该方法获取两个日期的日期[`components:fromDate:toDate:options:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/occ/instm/NSCalendar/components%3afromDate%3atoDate%3aoptions%3a)，同时为您处理所有混乱的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T13:09:25.437

```
NSDateComponents *difference = [[NSCalendar currentCalendar] components:NSCalendarUnitDay
                                                               fromDate:startDate]
                                                                 toDate:endDate]
                                                                options:0];
NSInteger weeksDiffCount = (((NSInteger)[difference day])/7); 
```

希望能帮助到你。

# c# - EntityFramework 将新对象添加到集合中

> ID：13867609
> 
> 赞同：2
> 
> 时间：2012-12-13T20:07:13.583
> 
> 标签：c#, .net, entity-framework

可能以前已经回答过这个问题，如果是这样的话，如果你们指出我正确的方向，我将不胜感激。

我想知道将新对象添加到 EntityFramework 集合时会发生什么。

更准确地说，我想知道是否为了添加新对象整个集合被加载到内存中

例如：

```
public class MyContext : DbContext
{
    public DbSet<Assignment> Assignments { get; set; }
}

public class SomeClass
{
    public void AddAssignment(Assignment assignment)
    {
        var ctx = new MyContext();

        ctx.Assignments.Add(assignment);

        ctx.SaveChanges();
    }
} 
```

是否必须将所有分配记录加载到内存中才能执行简单的插入？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:13:46.987

**简而言之：**整个实体集合的无加载过程。

该`AddObject()`方法用于添加数据库中不存在的新创建的对象。当`AddObject()`被调用时，会生成一个临时`EntityKey`的并且EntityState被设置为'Added'，如下图：

![在此处输入图像描述](../Images/0c1b4aa2c8e106e2a6e53e2a5bfa39fb.png)

当`context.SaveChanges()`被调用时，EF 4.0 继续并将记录插入到数据库中。请注意，Entity Framework 将代码转换为数据库可以理解的查询并处理所有数据交互和低级细节。还要注意在上面的代码中，我们正在以对象和属性的形式访问数据。

执行完代码后，您可以继续对数据库中的记录进行物理验证。

# google-maps - 绘制谷歌定义的“路线”

> ID：13867613
> 
> 赞同：0
> 
> 时间：2012-12-13T20:07:31.320
> 
> 标签：google-maps, google-maps-api-3

当使用 Google Places Autocomplete 返回“路线”类型（例如街道）时，我想采用该路线并在地图上沿该路线绘制多个标记。

示例：采用“Yonge Street, Toronto, ON, Canada”的整条路线，并在这条街上从头到尾放置标记。

当前搜索“Yonge Street, Toronto, ON, Canada”会返回整个路线的单个纬度/经度点。

这需要以一种不涉及我手动选择每个点的方式完成，因为我需要它来为全球任何谷歌“路线”工作。

我不知道如何使用 Google Maps API v3 来做到这一点。也许还有另一种服务可以帮助我获得我需要的纬度/经度点，然后我可以将其提供给 Google Maps API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:12:44.973

您正在寻找的内容目前无法使用 Google Maps API v3。[您可以向问题列表](http://code.google.com/p/gmaps-api-issues/)添加增强请求，但似乎不太可能发生。

[地理编码](http://www.geocodezip.com/v3_example_geo2.asp?addr1=Yonge%20Street,%20Toronto,%20ON,%20Canada&geocode=1)器实际上会为您的查询返回沿路的 3 个点（“Yonge Street, Toronto, ON, Canada”）。您可以使用路线服务获取[街道](http://www.geocodezip.com/v3_example_geo2.asp?addr1=%2844.144948,-79.502926%29&addr2=%2843.64188,-79.374725%29&geocode=1&geocode=2&walking=yes)的坐标，但您必须手动查找起点和终点，以及可能的步行路线，甚至可能添加航路点。但你说你不想那样做...

# hibernate - JPA 一对多关系子表行没有被删除

> ID：13867617
> 
> 赞同：0
> 
> 时间：2012-12-13T20:07:36.537
> 
> 标签：hibernate, jpa

我有 2 个实体 Order 和 Item，它们关联为 1:N，Order 是父表，item 是子表。当我删除订单时，我也希望删除相应的项目。但它没有发生，而是将子表中的 OrderId 设置为“null”。这是在 Item 表中的数据库中创建孤立行。

这是我的配置：我使用 Spring、Hibernate 作为 JPAVendor 和 mysql 数据库

```
 @Entity
@Table(name="T_ORDER")
public class Order {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long id;

    private String customer;

    @OneToMany(cascade=CascadeType.ALL)
    @JoinColumn(name="ORDER_ID")
    private Collection items = new LinkedHashSet();
} 
```

物品实体

```
 @Entity
public class Item {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long id;

    @ManyToOne
    private Order order;

    private String product;

    private double price;

    private int quantity; 
```

我只有 2JPA 属性集

```
 key="hibernate.show_sql"=true 
key="hibernate.hbm2ddl.auto" 
```

无法弄清楚还需要做什么来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:18:51.460

orphanRemoval=true 确保子表没有孤儿...

```
 @OneToMany(cascade=CascadeType.ALL, orphanRemoval=true ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:09:35.347

> @OneToMany(cascade=CascadeType.ALL,insertable=true,updatable=true) @JoinColumn(name="ORDER_ID")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:52:50.647

删除 JPA 级联 – **javax.persistence.CascadeType**，将其替换为 Hibernate 级联 – **org.hibernate.annotations.Cascade**，替换为**CascadeType.XXXXX**。

它看起来像是 JPA 和 Hibernate 级联注释之间的不兼容问题。

JPA 仅支持

```
– Persist 
– Merge 
– Remove
– Refresh
– All 
```

JAPA 目前不提供这些 Hibernate 额外的附加级联选项级联选项

```
– save-update 
– delete
– lock
– evict
– delete-orphan 
```

# c++ - win32 C++项目中的输入超时

> ID：13867618
> 
> 赞同：-1
> 
> 时间：2012-12-13T20:07:42.527
> 
> 标签：c++, winapi, input, directinput

如果按键之间的时间过长，我正在尝试找出使输入超时的最佳方法。我应该创建一个 cheatTime 浮点数，每次调用更新时都会增加 delta 吗？很晚了，我累了，我的大脑被炸了。任何帮助，将不胜感激。`m_pDI`是一个 DirectInput 包装对象。在该类中，我有一个`ClearInput()`函数可以清除其缓冲区内的任何输入。

```
if( m_pDI->KeyDown( DIK_TAB ) && m_pDI->KeyDown( DIK_1 ) )
    {
        if( m_pDI->KeyDown( DIK_H ) )
        {
            m_bGameCheats[ 0 ] = true;
            if( !m_pXA->SFXIsSoundPlaying( m_nCheatSoundID ) )
                m_pXA->SFXPlaySound( m_nCheatSoundID, false );
        }
        else if( m_pDI->KeyDown( DIK_C ) )
        {
            m_bGameCheats[ 1 ] = true;
            if( !m_pXA->SFXIsSoundPlaying( m_nCheatSoundID ) )
                m_pXA->SFXPlaySound( m_nCheatSoundID, false );
        }
        else if( m_pDI->KeyDown( DIK_S ) )
        {
            m_bGameCheats[ 2 ] = true;
            if( !m_pXA->SFXIsSoundPlaying( m_nCheatSoundID ) )
                m_pXA->SFXPlaySound( m_nCheatSoundID, false );
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:09:41.497

请告诉我我的问题是否正确。两种情况：

1：你只想在按下A之后按下B时做某事，除非2之间经过的时间太长。

在这种情况下，只要按下 A，就存储时间。按下 B 时，检查上次按下 A 的时间。

2：如果在按下A之后按下B，你想做一件事，如果按下A之后没有按下B，你想做另一件事。

由于在A被按下后等待超时后才知道B没有被按下，因此您需要在按下A时立即启动超时，并在再次按下A时重新启动它。实现可能是基于事件的，如果您有一个基于时间框架的运行循环，则基于定期检查；如果应用程序/线程没有做太多，则可能是繁忙的轮询循环。

投票看起来像这样：

```
void AIsPressed()
{
    mLastTimeAWasPressed = clock();
}

bool HasTooMuchTimePassedSinceAWasPressed()
{
    return (clock() - mLastTimeAWasPressed) > (mTimeout * CLOCKS_PER_SEC)
} 
```

# php - phpMyAdmin 执行时 MySQL 查询无法执行

> ID：13867621
> 
> 赞同：2
> 
> 时间：2012-12-13T20:07:56.260
> 
> 标签：php, mysql, phpmyadmin

我正在尝试执行下一个查询：

```
BEGIN;
INSERT INTO `jobs` ( `client` , `client_name` , `type` , `workers` , `date` , `hours` , `comments` , `project` ) VALUES ( '1' , 'one' , '1' , '1,2,5' , '2012-12-13' , '1234f' , '' , '0' ); 
INSERT INTO `jobs` ( `client` , `client_name` , `type` , `workers` , `date` , `hours` , `comments` , `project` ) VALUES ( '5' , 'two' , '3' , '1,2,5' , '2012-12-13' , '12' , '' , '0' ); 
COMMIT; 
```

这将返回下一个 MySQL 错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO `jobs` ( `client` , `client_name` , `type` , `workers` , `date` , `h' at line 1 
```

同时，phpMyAdmin 设法执行这个查询。

有人可以指出一个可能的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:09:43.417

你可以试试：

```
INSERT INTO `jobs` ( `client` , `client_name` , `type` , `workers` , `date` , `hours` , `comments` , `project` ) 
    VALUES ( '1' , 'one' , '1' , '1,2,5' , '2012-12-13' , '1234f' , '' , '0' )
    ,( '5' , 'two' , '3' , '1,2,5' , '2012-12-13' , '12' , '' , '0' ); 
```

这将在一个语句中为您提供两个插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:12:16.453

这不是“一个”查询。这是 4 个查询。在 PHP 中，您将不得不调用 mysql_query 四次。

# android - Android内部语言环境返回

> ID：13867625
> 
> 赞同：2
> 
> 时间：2012-12-13T20:08:04.837
> 
> 标签：android, localization

我已经在 android 应用程序中发布了内部本地化。语言环境保存在首选项中，并在`onCreate()`调用时获取值。但是当我强制停止应用程序或重新启动设备区域设置时恢复默认（通用设备）。问题仅在 android 2.3 上重现，在 android 4.0 上本地化是内部的并且没有改变。

```
String currentLocale = Localization.getLocaleFromPreferences(mPreferences);
Localization.setLocale(this, currentLocale, mPreferences); 
```

最有趣的问题。在应用程序完全初始化后的 adb 日志中，语言环境是正确的。但是，当我单击任何查看区域设置时，恢复到设备区域设置。

# solr - Solr 仅在有结果的字段中突出显示

> ID：13867628
> 
> 赞同：0
> 
> 时间：2012-12-13T20:08:13.453
> 
> 标签：solr, lucene, highlighting

我有一个 solr 查询，我在其中搜索`(webpage_text:*test* OR company_text:*test*)`

在我的突出显示中，我将字段设置为`webpage_text, company_text`. 但是现在我总是在突出显示结果中得到两个字段，即使搜索词只在 pages_text 中找到，我也得到 company_text 的突出显示结果，它只是完整的字段。

是否可以只返回匹配字段的亮点？

我试过 requireFieldMatch 但这不起作用。

@EDIT：可能是重要信息：这两个字段实际上是由复制字段填充的空字段。这有影响吗？

```
<field name="company_text" type="text_general" indexed="true" stored="true" multiValued="true" default="" termVectors="true" termPositions="true" termOffsets="true"/>
<field name="webpage_text" type="text_general" indexed="true" stored="true" multiValued="true" default="" termVectors="true" termPositions="true" termOffsets="true"/>

<dynamicField name="*company_*" type="string" indexed="true" stored="true" multiValued="true"/>
<dynamicField name="*talent_*" type="string" indexed="true" stored="true" multiValued="true"/>

<copyField source="company_*" dest="company_text" maxLength="30000000"/>
<copyField source="webpage_*" dest="webpage_text" maxLength="30000000"/> 
```

@EDIT2：似乎复制字段总是出现在突出显示中，即使它们没有匹配项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:54:42.450

我相信该`requireFieldMatch`选项是您需要使用的。但是，要使其正常工作，您还需要启用`usePhraseHighlighter`，然后通过将术语括在引号中来确保您正在执行 PhraseQueries。（例如。`webpage_text:"*test*"`）

所以一个例子可能如下：

```
http://localhost:8983/solr/select/q=webpage_text%3A"*test*"+OR
  +company_text%3A"*test*"&wt=xml&hl=true&hl.fl=webpage_text%2Ccompany_text
  &hl.simple.pre=<em>&hl.simple.post=<%2Fem>
  &hl.requireFieldMatch=true&hl.usePhraseHighlighter=true 
```

您将需要根据需要调整服务器设置并为您的方案调整其他参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:50:02.760

如果没有另外指定，Solr 总是返回所有字段。该字段是否包含在搜索查询中并不重要。匹配的字段会突出显示。

如果您只有两个字段，则返回这两个/所有字段并突出显示其中一个。

# matlab - matlab中未定义函数'insertObjectAnnotation'中的错误

> ID：13867635
> 
> 赞同：4
> 
> 时间：2012-12-13T20:08:43.350
> 
> 标签：matlab, matlab-cvst

我尝试在matlab中应用代码进行人脸检测和跟踪，但不幸的是这个错误提示了

我用matlab R2012a

这是我试过的代码

```
faceDetector = vision.CascadeObjectDetector();
videoFileReader = vision.VideoFileReader('visionface.avi');
videoFrame      = step(videoFileReader);
bbox            = step(faceDetector, videoFrame);
videoOut = insertObjectAnnotation(videoFrame,'rectangle',bbox,'Face'); 
```

这是错误：

```
Undefined function 'insertObjectAnnotation' for input
arguments of type 'single'. 
```

请帮忙 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T06:49:46.550

函数 insertObjectAnnotation 在 R2012b 中被引入 Matlab。它不适用于 matlab R2012a

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T13:44:46.980

`insertObjectAnnotation`R2012a 中不存在该功能。它是在 R2012b 中添加的。如果您还有 R2012a，您可以使用`vision.ShapeInserter`和`vision.TextInserter`系统对象来注释您的图像。它们不像 那样方便`insertObjectAnnotation`，但它们会完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:28:58.203

insertObjectAnnotation 适用于计算机视觉系统工具箱下的 windows 环境。它在ubuntu中不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T01:37:36.443

问题是它`videoFrame`的类型`single`不是有效的输入类型。大多数 matlab 函数期望它们的输入是`double`. 尝试转换`videoFrame`为`double`：

```
ideoOut = insertObjectAnnotation( double(videoFrame), 'rectangle', bbox, 'Face'); 
```

# entity-framework - 代码优先 POCO 设计实体身份不起作用

> ID：13867643
> 
> 赞同：1
> 
> 时间：2012-12-13T20:09:10.747
> 
> 标签：entity-framework, linq-to-entities, code-first, poco

我正在使用 POCO 编写代码第一个实体框架应用程序。这是简化版：

我定义了这个实体：

```
public class Respondent
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int RespondentId { get; set; }

    [Display(Name = "Your Name")]
    public string Name { get; set; }
} 
```

该实体用于创建表：

```
public class MyContext : DbContext
{
    public DbSet<Respondent> Respondents { get; set; }
} 
```

我还定义了一个包含这个实体的视图模型：

```
public class SurveyModel
{
    public Respondent Respondent { get; set; }
} 
```

现在，在代码中：

```
var survey = new SurveyModel();
survey.Respondent = new Respondent(); 
```

当我需要写入数据库时​​：

```
private MyContext db = new MyContext();

// HERE, after this line, SHOULD survey.Respondent.RespondentId be +1 ??
// Or only when I call db.SaveChanges() ??
db.Respondents.Add(survey.Respondent); 
```

此时，survey.Respondent.RespondentId 必须增加 1，因为它使用相应的属性定义为 IDENTITY。

但它不会发生。请指教我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:13:58.143

您需要调用 db.SaveChanges() 才能将其保存到数据库中。

# c# - 为什么 Windows ERASE 命令不会在 Windows Server 下的 FileSystemWatcher 上注册事件？

> ID：13867644
> 
> 赞同：1
> 
> 时间：2012-12-13T20:09:18.220
> 
> 标签：c#, .net, file-io, filesystemwatcher

我有一个程序可以监视特定文件的创建和删除以执行特定操作。我们使用 .NET FileSystemWatcher 来监视围绕这些特定文件的活动。该程序在 .NET 3.5 上作为 Windows 服务运行，并使用 C# 编码。我们遇到了一个问题，即使用 Windows DEL 命令或 ERASE 命令删除正在监视的文件不会触发任何 FileSystemWatcher 事件（更改、删除、创建、错误、重命名）。这似乎只是我的 Windows 2003 和 Windows 2008 机器上的问题，而不是我的 Windows 7 机器上的问题。它在 Windows 7 上运行良好。为此我在 Google 上进行了广泛搜索，并查看了几篇 StackOverflow 帖子，但都没有运气。我玩过 FileSystemWatcher 的不同配置 - 增加了缓冲区，尝试了 NotifyFilter 枚举的各种组合，打开 IncludeSubdirectories，增加和减少涉及修改文件和运行程序的用户的权限 - 所有这些都没有成功。我在我的事件处理程序的顶部放置了一个断点，它永远不会碰到 DEL 或 ERASE。它确实适用于创建和重命名 (REN)。作为一种解决方法，我们只是在删除文件之前重命名文件。但我想知道是否有解决方案。我可以通过某种方式对其进行编码，或者是否可以在 Windows 框上更改某些配置，这将导致服务获取 DEL 或 ERASE。这是我的文件观察器的代码（为简洁起见，删除了评论）：我在我的事件处理程序的顶部放置了一个断点，它永远不会碰到 DEL 或 ERASE。它确实适用于创建和重命名 (REN)。作为一种解决方法，我们只是在删除文件之前重命名文件。但我想知道是否有解决方案。我可以通过某种方式对其进行编码，或者是否可以在 Windows 框上更改某些配置，这将导致服务获取 DEL 或 ERASE。这是我的文件观察器的代码（为简洁起见，删除了评论）：我在我的事件处理程序的顶部放置了一个断点，它永远不会碰到 DEL 或 ERASE。它确实适用于创建和重命名 (REN)。作为一种解决方法，我们只是在删除文件之前重命名文件。但我想知道是否有解决方案。我可以通过某种方式对其进行编码，或者是否可以在 Windows 框上更改某些配置，这将导致服务获取 DEL 或 ERASE。这是我的文件观察器的代码（为简洁起见，删除了评论）：或者是否有一些我可以在 Windows 框中更改的配置会导致服务获取 DEL 或 ERASE。这是我的文件观察器的代码（为简洁起见，删除了评论）：或者是否有一些我可以在 Windows 框中更改的配置会导致服务获取 DEL 或 ERASE。这是我的文件观察器的代码（为简洁起见，删除了评论）：

```
using System;
using System.IO;
using System.Runtime.Serialization;

namespace GatewayEDI.ClaimRouter.FileManagement
{
    public delegate void FileChangedEventHandler(object sender, FileChangedEventArgs e);

    public enum Status
    {
        Added,
        Changed,
        Deleted,
        Unknown
    }

    public class FolderWatcher : IDisposable
    {
        protected FileSystemWatcher Watcher;

        public Status FileStatus
        {
            get;
            set;
        }

        public event FileChangedEventHandler FileChanged;

        public virtual void OnHasFileChanged(FileChangedEventArgs e)
        {
            FileChangedEventHandler fileChanged = FileChanged;
            if (fileChanged != null)
            {
                fileChanged(this, e);
            }
        }

        public FolderWatcher(string path, string file)
        {
            FileStatus = Status.Unknown;
            if (!string.IsNullOrEmpty(path) && !string.IsNullOrEmpty(file))
                CreateFileSystemWatcher(path, file);
        }

        private void CreateFileSystemWatcher(string path, string file)
        {
            Watcher = new FileSystemWatcher();

            try
            {
                if (path.LastIndexOf("\\", StringComparison.CurrentCulture) < path.Length - 1)
                    path += "\\";

                Watcher.Path = path;
                Watcher.NotifyFilter = NotifyFilters.FileName | NotifyFilters.DirectoryName | NotifyFilters.LastAccess | NotifyFilters.LastWrite;
                Watcher.Filter = file;

                Watcher.Created += WatcherChanged;
                Watcher.Changed += WatcherChanged;
                Watcher.Renamed += WatcherChanged;
                Watcher.Deleted += WatcherChanged;
                Watcher.Error += WatcherError;
                Watcher.EnableRaisingEvents = true;
            }
            catch (Exception ex)
            {
                FileStatus = Status.Unknown;
                throw new FolderWatcherException("Unexpected exception searching file.  Path = " + Watcher.Path + ".  Error = " + ex.Message, ex);
            }
        }

        void WatcherError(object sender, ErrorEventArgs e)
        {
            FileStatus = Status.Unknown;
            SendFileChangedEvent();
        }

        void WatcherChanged(object sender, FileSystemEventArgs e)
        {
            switch (e.ChangeType)
            {
                case WatcherChangeTypes.Created:
                    FileStatus = Status.Added;
                    break;
                case WatcherChangeTypes.Changed:
                    FileStatus = Status.Changed;
                    break;
                case WatcherChangeTypes.Renamed:
                    FileStatus = e.Name.Equals(Watcher.Filter) ? Status.Added : Status.Deleted;
                    break;
                case WatcherChangeTypes.Deleted:
                    FileStatus = Status.Deleted;
                    break;
                default:
                    FileStatus = Status.Unknown;
                    break;
            }

            SendFileChangedEvent();
        }

        protected void SendFileChangedEvent()
        {
            string fileName = Watcher == null ? string.Empty : Watcher.Filter;
            FileChangedEventArgs args = new FileChangedEventArgs
            {
                FileStatus = FileStatus,
                FileName = fileName
            };
            OnHasFileChanged(args);
        }

        public void DeleteFile()
        {
            FileInfo fi = new FileInfo(Watcher.Path + Watcher.Filter);
            try
            {
                fi.Delete();
            }
            catch (Exception ex)
            {
                throw new FolderWatcherException("Error deleting file.  Path = " + Watcher.Path + ", File = " + Watcher.Filter + ".  Error = " + ex.Message, ex);
            }
        }

        private bool _alreadyDisposed;

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool isDisposing)
        {
            if (_alreadyDisposed)
                return;
            if (isDisposing)
            {
                if (Watcher != null)
                    Watcher.Dispose();
            }
            _alreadyDisposed = true;
        }

        ~FolderWatcher()
        {
            Dispose(false);
        }
    }

    [Serializable]
    public class FolderWatcherException : Exception
    {
        public FolderWatcherException()
        {
        }

        public FolderWatcherException(string message) : base(message)
        {
        }

        public FolderWatcherException(string message, Exception inner) : base(message, inner)
        {
        }

        protected FolderWatcherException(SerializationInfo info, StreamingContext context) : base(info, context)
        {
        }
    }
} 
```

我用来修改文件的 Windows 命令是：

```
Create:  echo creating main flag > Main.flg
Delete:  DEL Main.flg
Rename:  REN Main.flg Main1.flg 
```

我意识到 FileSystemWatcher 可能有些不可靠，但在这种情况下，我可以始终如一地重现该问题。在某个时候，如果时间允许，我们将用更稳定的东西替换这个文件监视组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:16:46.850

我编写了一个小程序，看看是否可以在我自己的 Windows Server 2008 R2 机器上重现此问题。这是我的代码：

```
using System;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            FileSystemWatcher fsw = new FileSystemWatcher();
            fsw.Path = @"D:\test";
            fsw.Deleted += new FileSystemEventHandler(ReportChange); 
            fsw.Created += new FileSystemEventHandler(ReportChange);
            fsw.EnableRaisingEvents = true;

            Console.In.ReadLine();
        }

        private static void ReportChange(object source, FileSystemEventArgs e)
        {
            // Specify what is done when a file is created or deleted.
            Console.WriteLine("File: " + e.FullPath + " " + e.ChangeType);
        }
    }
} 
```

我上面的代码成功地报告了我正在监视的目录中的文件删除。

在仔细查看您的代码时，您似乎可以准确地告诉 FSW 要监控的文件。对我来说，这看起来像是一个时间问题。根据您粘贴的代码，我无法判断 FSW 的创建如何适应被删除文件的过程。您确定在删除您要观看的文件之前创建、初始化和启用 FSW？我的怀疑是首先删除该文件，然后创建 FSW 以监视实际上不再存在的特定文件。

# java - 如何使用外部 Java 库 jar 进行编译？

> ID：13867645
> 
> 赞同：0
> 
> 时间：2012-12-13T20:09:27.003
> 
> 标签：java, libraries

在 Eclipse 中，我可以使用 Eclipse 中的 Build Path > Library's > Add External jars 选项在 jarfile 中添加一个额外的库以供使用。如果没有 Eclipse，我怎么能做到这一点？

我正在使用 Mac。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:15:27.500

如果您从命令行运行 javac，请使用 -classpath 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:50:03.493

您可以轻松地键入以下命令

```
set CLASSPATH=".;[your jar file path]" 
```

然后运行您的文件，并为设置 java 的类路径和 jar 文件的详细参考，您可以点击 [链接](http://compilr.org/config/set-class-path-from-command-line-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:35:36.427

只需使用 Jar 文件的名称设置类路径。例如，如果您的 Jar 文件是**Mail.jar**，请编辑**Environment Variables中的“** **Path** ”变量，名称为 location 和 Mail,jar 的名称

# php - 1.对多个url变量使用开关

> ID：13867648
> 
> 赞同：0
> 
> 时间：2012-12-13T20:09:41.833
> 
> 标签：php

好吧，我有这些页面，

*   /admin/admin.php
*   /admin/blogger.php

在我的主 index.php 中，我有一个运行“如果存在 $page”函数的开关数组，它工作正常。我的所有页面都是从 site.com/index.php?page=about、site.com/index.php?page=misc 等调用的。

在我的 admin.php 页面内是一个 php 选项卡式导航，它使用 4 个选项卡作为我的管理部分（博主/图像管理器/文件管理器/引用管理器）。它为 4 个页面使用了选项卡功能的切换。

blogger.php 是我有问题的开关。

现在我的问题是：我没有为博客系统设置多个页面，而是使用“delete.php、add.php、edit.php 等”并使用“在此处删除点击 (delete.php?id=1)”，我想尝试从博客页面运行它。例如，“site.com/admin.php?page=blogger&act=dp/ep/ap”将获取正在传递的任何 $act，然后使用开关来完成操作。

我的 PAGE 开关工作正常，但是当我尝试调用更多开关时，它不起作用。我尝试使用它作为我的代码

```
if(isset($_SESSION['id'])) {  
  $act = $_GET['act'];  
  switch ($act) {  
    case 'ap':  
      addPost();  
      break;  
    case 'ep':  
      editPost();  
      break;  
    case 'dp':  
      delPost();  
      break;  
    default:  
      ~table setup  
      ~$query, $result  
      ~if / while loops
      ~echo $row->article_id/title/author/date  
      echo "<a href=\"index.php?page=admin&amp;tabindex=0&amp;act=ep&amp;id={$row->article_id}\">Edit</a>"  
      ...  
      ...  
      ... 
```

这是我遇到的问题。页面正确，tabindex 正确，然后停止工作。我只是得到一个空白页面，而不是我应该的编辑页面。我的 editPost 函数是正确的，因为我已经从 editpost.php?id=1 方式对其进行了测试，这是我试图避免的。是的，我的功能也包括在这里。

url 没有被正确传递吗？还是我的动作开关设置不正确。也许在切换之前设置 isset($_GET['act']) ？我不知所措。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:50:48.917

> site.com/admin.php?page=blogger&act=dp/ep/ap

你不能那样做。具体来说`act=dp/ep/ap`。我会推荐混合`mod_rewrite`和多重`$_GET`，这样你就可以像 WordPress 那样做：

> site.com/admin/blog/edit

Mod_rewrite 为：

> site.com/admin.php?page=blog&act=edit

从那里你只需要使用`$_GET`并且只有一个`switch`依赖项。

```
 $page = $_GET['page']; 
 $action = $_GET['act'];

  switch ($page) {  
    case 'blog':  
          do($action);  
      break;  
    case 'news':  
          do($action);
      break;  
    case 'users':  
          do($action);
      break;  
    default: echo 'Try again.';
      break;
    }

    function do($act) {
     switch($act) {
       case 'delete': confirmDelete();
       break;
       case 'update': updateConfirm();
       break;
       }
    } 
```

你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:28:47.800

你想像这样一次传递多个动作吗？

```
//test.php?action=add/update/notify
if(isset($_GET['action'])) {

  $act = $_GET['action'];

  //split actions
  $actions = explode('/', $_GET['action']);

  foreach( $actions as $action ){
      switch ($action) {  
        case 'add':  
          echo "add<br />\n";
          break;  
        case 'update':  
          echo "update<br />\n";
          break;  
        case 'notify':  
          echo "notify<br />\n";  
          break;  
        default:
        // default action if no match  (runs for every item of $actions array)
        break;
      }
  }
} 
```

# jquery - 将随机 ID 放入一个空数组

> ID：13867650
> 
> 赞同：0
> 
> 时间：2012-12-13T20:09:50.047
> 
> 标签：jquery

[这是我在http://jsfiddle.net/d0okie0612/22cTn/](http://jsfiddle.net/d0okie0612/22cTn/)上工作的小提琴

我写了一个函数getNewId（），我想把它放到我的空数组[]中，每次我点击添加位置链接，每个表单都应该有一个不同的随机ID

所以 name="locations[random_id_goes_here][street]" 现在它的 name="locations[][street]"

继承人的html

```
<div id="container">
    <div id="top_form">
        <form>
            Street: <input class="street" name="[][street]" id="form_element" type="text">          <br><br>
            City: <input class="city" name="[][city]" id="form_element" type="text">
            <select>
                <option value=" ">State</option>
                <option value="ca">CA</option>
                <option value="az">AZ</option>
                <option value="de">DE</option>
            </select>
            Zip: <input name="[][zipcode]" type="text"><br /><br />
        </form>
    </div>
</div>

<br />
<a href="#" id="awsomeButton">+ Add Loction</a>
<br />
<br />
<button id="submit_btn">Submit</button> 
```

这是jquery

```
var tpl = ""
    + "<div id='location_div_<%= id %>'><h1>My Location #<%= id %></h1></div>";

var newId = new Date().getTime();
var template = _.template(tpl);
var compiled = template({id: newId});

var addedForm = "<div id='added_form'>"
    + "<a href='#' class='close_btn'>x</a>"
    + "Street: <input name='locations[][street]' type='text'>"
    + "<br /><br />"
    + "City: <input name='locations[][city]' type='text'>"
    + "<select>"
    + "<option value=' '>State</option>"
    + "</select>"
    + "Zip: <input name='locations[][zipcode]' type='text'>"
    + "</div>"

function getNewId() {
    var newId = new Date().getTime();
    return newId;
}

$('#awsomeButton').on('click', function (e) {
    $(addedForm).hide().appendTo('form').fadeIn('slow');
    $(getNewId()).appendTo();
});

$('.close_btn').live('click', function (event) {
    event.preventDefault();
    $(this).parents('div#added_form:first').fadeOut('slow', function () {
        $(this).remove();
    });
}); 
```

所以基本上我只是想获得空数组中的数字任何帮助将不胜感激谢谢

我问这个问题很奇怪吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:04:41.157

加载 HTML 时，将随机数添加到第一个表单。这需要`class='zip'`添加到 zip 输入中。我假设您还需要每个`state`选择的唯一名称：

```
addFirstId();

function addFirstId() {
    var randomnumber=Math.floor(Math.random()*100001);
    var firstId=(new Date().getTime())+randomnumber.toString();
    $(".street").attr("name","locations["+firstId+"][street]");
    $("select").attr("name","locations["+firstId+"][state]");
    $(".city").attr("name","locations["+firstId+"][city]");
    $(".zipcode").attr("name","locations["+firstId+"][zipcode]");
    myArray.push(firstId);
} 
```

以下为每个新表单添加一个随机数：

```
function getNewId() {
    //Random number is date in milliseconds + another random number added
    var randomnumber=Math.floor(Math.random()*100001);
    var newId=(new Date().getTime())+randomnumber.toString();
    var customForm = addedForm.replace(/\[\]/g,"["+newId+"]");
    myArray.push(newId);
    return customForm;
}

$('#awsomeButton').on('click', function(e) {
    $(getNewId()).hide().appendTo('form').fadeIn('slow');
}); 
```

[小提琴在这里](http://jsfiddle.net/mccannf/Lhqg8/2/)。

**编辑**

在上面的 2 个地方添加`myArray.push(firstId);`。

# c++ - 无法将参数从 T 转换为 T&

> ID：13867655
> 
> 赞同：0
> 
> 时间：2012-12-13T20:09:58.637
> 
> 标签：c++

我在调用专用模板函数时遇到问题。

我的代码是这样的：

```
namespace{
    struct Y {};
}

template<>
bool pcl::visualization::PCLVisualizer::addPointCloud<Y>(const typename pcl::PointCloud< Y >::ConstPtr &cloud, const std::string &id, int viewport); 
```

呼叫地点是：

```
pcl::PointCloud<Y>::Ptr cloud(new pcl::PointCloud<Y>);
visualizer->addPointCloud(cloud, "cloud", 0); 
```

我得到的错误是

```
'bool pcl::visualization::PCLVisualizer::addPointCloud(const boost::shared_ptr<T> &,const std::string &,int)' : cannot convert parameter 1 from 'boost::shared_ptr<T>' to 'const boost::shared_ptr<T> &' 
```

以下是库中的一些声明和 typedef：

```
typedef boost::shared_ptr<PointCloud<PointT> > Ptr;
typedef boost::shared_ptr<const PointCloud<PointT> > ConstPtr;

template <typename PointT> bool pcl::visualization::PCLVisualizer::addPointCloud(
    const typename pcl::PointCloud<PointT>::ConstPtr &cloud,
    const std::string &id, int viewport
) 
```

我已经尝试过`boost::shared_ptr<const pcl::PointCloud<Y> > cloud;`，但同样的错误再次出现。

我正在拼命尝试调试库中的一个问题，如果我可以访问一个私有地图并遍历它，这将非常容易调试，但我无法编译整个库，因为这需要一些时间（我只是想看看它——我知道这是错的，但我整天都在为此苦苦挣扎）

编译器是VC++ 10。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:14:53.183

显然`T`，它出现在错误消息中的两次都不相同。

具体来说，由于您的标头使用`ConstPtr`并且您的调用方代码使用`Ptr`，我怀疑一个是`shared_ptr<Object>`，另一个是`shared_ptr<const Object>`。然后出现错误，因为这些类型不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:33:41.447

```
#include <string>
#include <memory>

namespace{
    struct Y {};
}

template<typename T>
struct PointCloud {
  typedef std::shared_ptr<PointCloud<T>> Ptr;
  typedef std::shared_ptr<const PointCloud<T>> ConstPtr;
};

template<typename T>
void addPointCloud(typename PointCloud<T>::ConstPtr const &cloud) {}

int main() {
  PointCloud<Y>::Ptr cloud(new PointCloud<Y>());
  addPointCloud<Y>( cloud );
} 
```

上面的代码运行良好。因此，无论您的问题是什么，它都不在您向我们展示的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:52:11.560

首先，谢谢大家回答我这个问题。Ben Voigt 帮助指导我查看模板参数，而不是实际的类型转换错误消息，并帮助 Yakk 写下他的代码。

与此同时，我试图将我的代码分解成一个简单的函数，这一次对我产生了不同的错误！

```
#include <iostream>
#include <memory>

template<typename PointT>
class PointCloud
{
public:
    typedef std::shared_ptr<PointCloud<PointT> > Ptr;
    typedef std::shared_ptr<const PointCloud<PointT> > ConstPtr;

};

class PCLVisualizer
{
    public:
        template<typename PointT>
        bool addPointCloud(
            const typename PointCloud<PointT>::ConstPtr &cloud,
            const std::string &id, int viewport
        ){}
};

namespace{
    struct Y {};
}

template<>
bool PCLVisualizer::addPointCloud<Y>(const typename PointCloud< Y >::ConstPtr &cloud, const std::string &id, int viewport)
{
    return true;
}

int main()
{
    PCLVisualizer p;
    PointCloud<Y>::Ptr cloud(new PointCloud<Y>());
    p.addPointCloud(cloud, "cloud", 0); 
} 
```

现在的错误是：

```
error C2783: 'bool PCLVisualizer::addPointCloud(const PointCloud<PointT>::ConstPtr &,const std::string &,int)' : could not deduce template argument for 'PointT' 
```

所以，我现在看到了我首先需要做的事情（我要出去拍摄自己，因为我现在感觉不太聪明:)）：

```
getVisualizer()->addPointCloud<Y>(cloud, "cloud", 0); 
```

再次感谢大家！

# cytoscape-web - Cytoscape.js 2.0 加载和添加方法

> ID：13867657
> 
> 赞同：2
> 
> 时间：2012-12-13T20:10:10.920
> 
> 标签：cytoscape-web, cytoscape.js

我正在实施 Cytoscape.js web 2.0。我对加载和添加之间的区别有点困惑。我知道在加载时，我们不需要指定节点的位置。我使用 add 添加了一个节点，该节点在我包含 position 属性时有效，但即使我添加了 position 属性，边缘也不会显示。另外，在幕后加载和添加有什么区别？我相信 load 会渲染整个图，所以每次我们使用 load 时，它都会重新渲染图。似乎 add 没有做有利于运营成本的事情？真的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:53:19.160

`cy.load()`用于加载新图并在该图上运行布局。 **这在 2.x 的较新版本中已被弃用，并且在 3.x 中不可用！`cy.add()`如果您想要这种行为，请在调用后运行布局。**

`cy.add()`用于仅向现有图形添加元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T20:01:13.290

在完整对象初始化后立即将 cy.add() 放在对象之外，允许添加节点以更新图形。

# mysql - mysql查询次数

> ID：13867658
> 
> 赞同：0
> 
> 时间：2012-12-13T20:10:12.863
> 
> 标签：mysql, mysql-workbench

我得到了以下mysql表

```
PrefixID + Prefix
001      + 110
005      + 550
005      + 550
005      + 550
005      + 550 
```

我想把它变成下表

```
PrefixID + Prefix + Count
001      + 110    + 1
005      + 550    + 4 
```

计数只是那个特定前缀的频率我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:13:18.983

使用`GROUP BY`子句和`COUNT()`聚合：

```
SELECT `PrefixID`
     , `Prefix`
     , COUNT(1) AS `Count`
  FROM mytable
 GROUP BY `PrefixID`, `Prefix` 
```

从您的示例数据来看，`Prefix`and似乎`PrefixID`是相关的（一一对应）。您可能需要调整查询，这取决于您是否要保证结果集中的`PrefixID`or`Prefix`是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:13:42.993

试试这个：

```
SELECT
  PrefixID,
  MAX(Prefix) as  Prefix,
  Count(Prefix) as Count
FROM table
GROUP BY PrefixID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:14:14.147

试试这个 ：

```
Select 
PrefixID, Prefix, count(Prefix)
from table
group by Prefix 
```

# c++ - OpenGL + libpng：图像上的颜色错误

> ID：13867661
> 
> 赞同：1
> 
> 时间：2012-12-13T20:10:12.707
> 
> 标签：c++, opengl, colors, png, gldrawpixels

自上周以来，我一直在尝试在屏幕上加载和显示 PNG。我使用库 libpng 将 png 复制到内存中，然后使用 glDrawPixels 在屏幕上显示它。结果如下：

原图：

![在此处输入图像描述](../Images/b71816e91430eb0568aeccda725892ce.png)

“游戏”中的截图：

![在此处输入图像描述](../Images/32b681dbfcae453bff85860719018dc2.png)

而代码，我正在使用静态 Image::loadPNG 将 PNG 加载到地图中，如下所示：

```
bool Image::loadPNG( std::string _image, FILE * file, unsigned char header[ 54 ] )
{
    fseek( file, 8, SEEK_SET );
    ImageData* imageData = new ImageData( );
    Image* image = new Image( );
    image->type = IMAGETYPE_PNG;
    imageData->image = image;
    png_structp png_ptr = png_create_read_struct( PNG_LIBPNG_VER_STRING, NULL, NULL, NULL );

    if( !png_ptr )
    {
        std::cout << "png_create_read_struct failed. " << std::endl;
        return false;
    }

    png_infop info_ptr = png_create_info_struct(png_ptr);

    if( !info_ptr )
    {
        std::cout << "png_create_info_struct failed. " << std::endl;
        return false;
    }

    if( setjmp( png_jmpbuf( png_ptr ) ) )
    {
        std::cout << "Error during init_io. " << std::endl;
        return false;
    }

    png_init_io( png_ptr, file );
    png_set_sig_bytes( png_ptr, 8 );
    png_read_info( png_ptr, info_ptr );
    png_set_strip_16( png_ptr );
    png_read_update_info(png_ptr, info_ptr);
    int bit_depth;
    int color;
    png_get_IHDR(png_ptr, info_ptr, &image->width, &image->height, &bit_depth, &color, NULL, NULL, NULL);
    png_read_update_info(png_ptr, info_ptr);
    int pitch = png_get_rowbytes(png_ptr, info_ptr);
    image->image = new unsigned char[pitch * image->height];
    png_bytep* row_pointers = new png_bytep[image->height];

    for (int y = 0; y < image->height; y++)
        row_pointers[image->height - 1 - y] = image->image + y * pitch;

    png_read_image(png_ptr, row_pointers);
    delete[] row_pointers;

    // tym na razie dupy sobie nie zawracam

    Image::images.insert( std::pair< std::string, ImageData* >( _image, imageData ) );
    glGenTextures(1, &imageData->texture);
    glBindTexture( GL_TEXTURE_2D, imageData->texture );
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, image->width, image->height, 0, GL_BGRA_EXT, GL_UNSIGNED_BYTE, image->image);
    gluBuild2DMipmaps( GL_TEXTURE_2D, 4, image->width, image->height, GL_RGBA, GL_UNSIGNED_BYTE, image->image );
    return true;
} 
```

最后在 OpenGL 中显示它：

```
Image* image = Image::images["f.png"]->image;

if( image )
{
    glDisable(GL_DEPTH_TEST);
    glPushMatrix( );
    //glPixelStorei(GL_UNPACK_ALIGNMENT, 4);  

    float nx = 0.0f;
    float ny = 0.0f;

    glLoadIdentity( );
    glTranslatef( 0, 0, -1 );

    if( nx > 0 || ny > 0 )
        glRasterPos2f( nx, ny );

    else
    {
        glRasterPos2f( 0, 0 );
        glBitmap(0,0,0,0, nx, ny, NULL);
    }

    glDrawPixels( image->width, image->height, GL_RGBA, GL_UNSIGNED_BYTE, image->image);
    glPopMatrix( );
    glEnable(GL_DEPTH_TEST);
} 
```

如您所见，颜色与应有的颜色不同。谁能帮我弄清楚如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:33:06.430

看起来您可能交换了一些颜色通道。我认为，在调用 to 时`glTexImage2D()`，尝试更改`GL_BGRA_EXT`to 。`GL_RGBA`或者，如果这不起作用，请更改`GL_UNSIGNED_BYTE`为`GL_UNSIGNED_INT_8_8_8_8_REV`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:21:58.970

在我看来，您的图像可能是使用（乘法？）混合绘制的。

您是否启用了 alpha 混合？（您的图像似乎有一个 alpha 通道）

你设置了什么混合模式？

它可能应该只是：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

# c# - MVVM 绑定双击到使用 Telerik radtreecontrol 的方法

> ID：13867667
> 
> 赞同：6
> 
> 时间：2012-12-13T20:10:40.057
> 
> 标签：c#, wpf, xaml, mvvm, telerik

我已经在这个问题上工作了很长时间。尽管我内心的人说“不要这样做”，但现在是问路的时候了。

我正在使用 MVVM 设计模式在 WPF C# 中进行编码。我们尽量严格遵守模式，并且在代码后面不放任何东西，除非没有选择或这样做完全不合理。话虽如此，我正在使用 Telerik RadTreeView。这是我的 XAML 中的一个片段：

```
<telerik:RadTreeView IsExpandOnSingleClickEnabled="True" IsLineEnabled="True" Margin="5" 
                                 ItemsSource="{Binding ItemsView}"
                                 SelectedItem="{Binding SelectedWidget, Mode=TwoWay}"
                                 ItemTemplate="{StaticResource NodeTemplate}" /> 
```

目前该树工作正常，因此如果您突出显示一个树项并单击视图上的“确定”按钮，一切都很好。但是，我还需要允许用户双击其中一个树项。这意味着我的视图模型中已经有一个命令和方法，*protected override void OkAction()*以及所需的逻辑。Telerik 提供了一个名为*ItemDoubleClick*的属性，该属性应该为树项双击提供功能。但我找不到任何东西可以让我在视图模型中执行此操作。换句话说，我该如何进行绑定？我们的项目中还有一个行为设置，用于双击我被告知可以使用，但我没有行为经验。我对 WPF 还是有点兴趣。

如果有帮助，这里是 Telerik 文档的链接：[http ://www.telerik.com/help/wpf/radtreeview-events-overview.html](http://www.telerik.com/help/wpf/radtreeview-events-overview.html)

我将不胜感激任何人可以提供的任何帮助或指导。

试试这个斯坦：

```
<Grid.Resources>
            <DataTemplate x:Key="WidgetTemplate">
                <StackPanel Orientation="Horizontal">
                    <Image Source="/Resources/gear1.png" Margin="1" Stretch="None" />
                    <TextBlock Text="{Binding Name}" VerticalAlignment="Center" Margin="6,0,0,0" />
                </StackPanel>
            </DataTemplate>

            <HierarchicalDataTemplate x:Key="NodeTemplate" ItemsSource = "{Binding Children}" ItemTemplate="{StaticResource WidgetTemplate}">
                <TextBlock Text="{Binding Name}"/>
            </HierarchicalDataTemplate>

        </Grid.Resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:49:47.733

这是您可能希望使用 DoubleClick 已有的附加行为的地方。

否则，这里是我使用的完整代码，它创建附加行为并将创建两个附加属性，它们绑定到命令和可选的命令参数。

**附加行为.cs**

```
public static class MouseDoubleClick
{
    public static DependencyProperty CommandProperty = 
        DependencyProperty.RegisterAttached("Command", 
            typeof(ICommand), 
            typeof(MouseDoubleClick), 
            new UIPropertyMetadata(CommandChanged));

    public static DependencyProperty CommandParameterProperty = 
        DependencyProperty.RegisterAttached("CommandParameter", 
            typeof(object), 
            typeof(MouseDoubleClick), 
            new UIPropertyMetadata(null));

    public static void SetCommand(DependencyObject target, ICommand value)
    {
        target.SetValue(CommandProperty, value);
    }

    public static void SetCommandParameter(DependencyObject target, object value)
    {
        target.SetValue(CommandParameterProperty, value);
    }
    public static object GetCommandParameter(DependencyObject target)
    {
        return target.GetValue(CommandParameterProperty);
    }

    private static void CommandChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        Control control = target as Control;
        if (control != null)
        {
            if ((e.NewValue != null) && (e.OldValue == null))
            {
                control.MouseDoubleClick += OnMouseDoubleClick;
            }
            else if ((e.NewValue == null) && (e.OldValue != null))
            {
                control.MouseDoubleClick -= OnMouseDoubleClick;
            }
        }
    }

    private static void OnMouseDoubleClick(object sender, RoutedEventArgs e)
    {
        Control control = sender as Control;
        ICommand command = (ICommand)control.GetValue(CommandProperty);
        object commandParameter = control.GetValue(CommandParameterProperty);
        if (command.CanExecute(commandParameter))
            command.Execute(commandParameter);
    }
} 
```

**.xaml** - 记得添加附加行为所在的命名空间。

```
<telerik:RadTreeView IsExpandOnSingleClickEnabled="True" 
                     IsLineEnabled="True" 
                     Margin="5" 
                     ItemsSource="{Binding ItemsView}"
                     SelectedItem="{Binding SelectedWidget, Mode=TwoWay}"
                     ItemTemplate="{StaticResource NodeTemplate}"
                     acb:MouseDoubleClick.Command="{Binding ShowItemCommand}" /> 
```

**SampleViewModel.cs**

```
private RelayCommand _showItemCommand;
public RelayCommand ShowItemCommand
{
    get
    {
        return _showItemCommand ?? (_showItemCommand =
            new RelayCommand(ShowItemDetails, IsItemSelected));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:50:12.923

显然我没有 Telerik 代码，所以我无法提供我想要的帮助，但你可以尝试这样的事情。（免责声明：我是从头顶写的）

定义你的风格`Grid.Resources`

```
<Style TargetType="{x:Type RadTreeViewItem }" x:Key="TreeViewItemStyle">
    <EventSetter Event="MouseDoubleClick" Handler="{Binding DoubleClick}" />
</Style> 
```

将样式添加到容器样式。

```
<telerik:RadTreeView IsExpandOnSingleClickEnabled="True" IsLineEnabled="True" Margin="5" 
                                 ItemsSource="{Binding ItemsView}"
                                 SelectedItem="{Binding SelectedWidget, Mode=TwoWay}"
                                 ItemTemplate="{StaticResource NodeTemplate}"
                                 ItemContainerStyle ="{StaticResource TreeViewItemStyle}"/> 
```

让我知道它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T19:56:08.697

我尝试了几种方法来完成这项工作。最后我发现 VS2012 让我很适合。我注意到更改没有应用于构建和运行。

我打开 VS2010 发现我没有遇到同样的问题。在与我的老板交谈后，我们发现这是一个很好的例子，即坚持 MVVM 可能不是最明智的选择，因为双击与 UI 严格相关。

我只是使用视图模型的实例化作为数据上下文，在后面的代码中跳转并进入视图模型。只需要一秒钟就可以做到这一点。

至于其他解决方案，我确信这是完全可能的，但由于我的 VS2012 问题，我无法确认或否认我在这里发布的帖子。

# php - PHP组合和计数关联数组

> ID：13867673
> 
> 赞同：-2
> 
> 时间：2012-12-13T20:10:57.640
> 
> 标签：php, arrays

我们的软件以关联数组的形式提供购买的产品列表。我们需要组合这个数组并创建一个具有合并计数的新数组。然后，该数组将用于为我们的计费部门创建采购清单。

**样本数组：**

```
Array
(
[0] => Array
    (
        [item] => Long Sleeve-Shirt & Hooded Sweatshirt
        [quantity] => 1
        [size] => Youth Small
        [color] => Blue
    )

[1] => Array
    (
        [item] => Long Sleeve-Shirt & Hooded Sweatshirt
        [quantity] => 1
        [size] => Adult Small
        [color] => Red
    )

[2] => Array
    (
        [item] => Hooded Sweatshirt Youth & Adult Sizes
        [quantity] => 1
        [size] => Youth Large
        [color] => Blue
    )
[3] => Array
    (
        [item] => Long Sleeve-Shirt & Hooded Sweatshirt
        [quantity] => 1
        [size] => Youth Small
        [color] => Blue
    )
} 
```

**合并阵列**

```
Array
(
[0] => Array
    (
        [item] => Long Sleeve-Shirt & Hooded Sweatshirt
        [quantity] => 2
        [size] => Youth Small
        [color] => Blue
    )

[1] => Array
    (
        [item] => Long Sleeve-Shirt & Hooded Sweatshirt
        [quantity] => 1
        [size] => Adult Small
        [color] => Red
    )

[2] => Array
    (
        [item] => Hooded Sweatshirt Youth & Adult Sizes
        [quantity] => 1
        [size] => Youth Large
        [color] => Blue
    )

} 
```

我将如何创建一个函数来组合第一个数组并创建第二个数组。我唯一能想到的就是创建几个 foreach 循环并慢慢分解列表。我没有使用过关联数组和函数，我相信做多个 foreach 循环会很慢，而且可以做得更有效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:58:35.983

在我看来，您与其说是合并或合并数组，不如说是删除重复项。问题变成了，条目重复的条件是什么？每个字段都必须完全相同吗？从阅读您的问题来看，它看起来是肯定的。由于您在这里嵌套了数组（而不是对象数组），因此在我看来您需要一个好的哈希算法来进行指纹识别。您可以使用[PHP 本机加密哈希算法](http://php.net/manual/en/book.hash.php)，但您真的不需要它们是加密安全的。我会看看[murmurhash](https://sites.google.com/site/nonunnet/php/php_murmurhash)，但还有[其他选择](http://en.wikipedia.org/wiki/List_of_hash_functions)。

PHP 有一个函数可以处理这个问题，但它不适用于多维数组：[array_unique](http://php.net/manual/en/function.array-unique.php)

您还可以使用类似 php 哈希表的数组实现来为您执行此操作。鉴于您只有 4 个字段，您可能不会遇到太多问题，但您很可能...

但是您的代码将如下所示：

```
// given an array with keys for item (string), size (string) and color (string),
// produce a unique fingerprint value identifying it
function hashProduct(array $product) {
    // Concatenate all the fields of the product array
    $key = $product['item'].$product['size'].$product['color'];

    // Add the length of the key to the end of the hash to reduce collisions
    return ((string)murmurhash($key)) . strlen($key);
}

// Assume $originalArray is passed in populated with the structure you provide above
// Build a consolidated array, selectively adding to it.
public function consolidateProductsList(array $originalArray) {
    $consolidatedArray = array();

    foreach($originalArray as $product) {

        // fingerprint the product
        $hash = hashProduct($product);

        // You could also just do this:
        // $hash = $product['item'].$product['size'].$product['color'];
        // php treats string-type array keys as hash maps

        if(array_key_exits($consolidatedArray[$hash]) {
             // Still a chance of collision here, but it is very small
             // You should try to handle it or at least report it
             $consolidatedArray[$hash]['quantity'] += $product[quantity];
        } else {
            // Product has not been encountered yet
            $consolidatedArray[$hash] = $product;
        }
    }

    return $consolidatedArray;
} 
```

哈希函数中的冲突是指您有两个输入生成相同的哈希输出，但彼此不相等。检测它的方法是进行长格式比较，在这种情况下：`$product1['item'] === $product2['item'] && $product1['size'] === $product2[size]`等。

我没有运行，甚至没有检查过代码中的 php 错误，但希望它足以让你开始，减去修复我所做的任何错误或拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:41:17.567

更通用的解决方案是准确定义要分组的字段以及应保存总和的字段：

```
function consolidate(array $data, array $group_fields, $sum_field)
{
    $res = array();

    foreach ($data as $item) {
        // work out a hash based on the grouped field names
        $hash = '';
        foreach ($group_fields as $field) {
            $hash .= $item[$field];
        }
        // perform summation if item hash matches
        if (isset($res[$hash])) {
            $res[$hash][$sum_field] += $item[$sum_field];
        } else {
            $res[$hash] = $item;
        }
    }

    return array_values($res);
}

print_r(consolidate($data, array('item', 'size', 'color'), 'quantity')); 
```

[**演示**](http://codepad.viper-7.com/rwH0Dg)

# python - 在 Python 中避免循环（循环）导入？

> ID：13867676
> 
> 赞同：8
> 
> 时间：2012-12-13T20:11:07.233
> 
> 标签：python, python-2.7

一种方法是使用 import x，而不使用“from”关键字。因此，您可以在任何地方使用其名称空间来引用事物。

还有其他方法吗？喜欢在 C++ ifnotdef __b__ def __b__ 中做类似的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T20:13:38.030

将任何一对相互依赖的模块合并到一个模块中。然后引入额外的模块来恢复旧名称。

例如，

```
# a.py
from b import B

class A: whatever

# b.py
from a import A

class B: whatever 
```

变成

```
# common.py
class A: whatever
class B: whatever

# a.py
from common import A

# b.py
from common import B 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T20:20:29.410

循环导入是一种“代码味道”，通常（但不总是）表明某些重构是合适的。例如，如果`A.x`uses`B.y`和`B.y`uses `A.z`，那么您可能会考虑移动`A.z`到它自己的模块中。

如果您确实认为需要循环导入，那么我通常建议导入模块并引用具有完全限定名称的对象（即，`import A`并使用`A.x`而不是`from A import x`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:33:35.817

如果你想这样做`from A import *`，答案很简单：不要那样做。您通常*应该*这样做`import A`并引用限定名称。

对于 quick&dirty 脚本和交互式会话，这是完全合理的做法——但在这种情况下，您不会遇到循环导入。

`import *`在某些情况下，在实际代码中执行是有意义的。例如，如果您想隐藏一个复杂的模块结构，或者您动态生成的模块结构，或者在版本之间频繁更改，或者如果您要包装其他人的包的嵌套太深，`import *`那么“包装模块”可能是有意义的" 或顶级包模块。但在这种情况下，您导入的任何内容都不会导入您。

事实上，我很难想象在任何情况下`import *`都有必要并且循环依赖甚至是可能的。

如果你正在做`from A import foo`，有办法解决这个问题（例如，`import A`then `foo = A.foo`）。但你可能不想这样做。再次，考虑您是否真的需要将`foo`名称带入您的命名空间——限定名称是一个特性，而不是一个需要解决的问题。

如果你`from A import foo`只是为了方便实现你的函数，因为`A`实际上`long_package_name.really_long_module_name`是因为所有这些调用而你的代码是不可读的`long_package_name.really_long_module_name.long_class_name.class_method_that_puts_me_over_80_characters`，请记住你总是可以`import long_package_name.really_long_module_name as P`然后使用`P`你合格的调用。

（另外，请记住，`from`为了实现方便，您可能需要确保指定 a以确保如果有人从交互式会话中对您`__all__`执行操作，导入的名称不会出现在您的命名空间中。）`import *`

此外，正如其他人所指出的，大多数（但不是全部）循环依赖的情况是糟糕设计的征兆，以合理的方式重构您的模块将解决它。在极少数情况下，您确实需要将名称带入命名空间，并且一组循环模块实际上是最好的设计，一些人为重构可能仍然是比`foo = A.foo`.

# c# - 无法读取 GridView 中的标签值

> ID：13867677
> 
> 赞同：1
> 
> 时间：2012-12-13T20:11:09.700
> 
> 标签：c#, gridview, null, label

我在这里阅读了很多帖子以寻找答案。但无论我做什么，我总是会为我的标签返回一个空值。

我可以很好地填充它并在那时阅读它，但是当我尝试阅读标签以填充 DB 时，它始终为空。

asp代码：

```
<asp:TemplateField HeaderText="TOTAL YIELD" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="130">
  <EditItemTemplate>
   <asp:Label ID="lb_TotalYield" runat="server" ></asp:Label>
  </EditItemTemplate>
</asp:TemplateField> 
```

在后面的代码中，我只是想阅读它。

```
foreach (GridViewRow currentRow in gv_Fruit.Rows)
{
Label tempLabel = (Label)currentRow.FindControl("lb_TotalValue") as Label;
string theTotalValue = tempLabel.Text; 
} 
```

完整信息这是我设置标签的方式：

```
myGridView.SelectedRow.Cells[4].Text = myTotalYield; 
```

我试过做一个 gv_RowDataBound，但它似乎从来没有被调用过。

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
   if (myGridView.EditIndex == e.Row.RowIndex &&
      e.Row.RowType == DataControlRowType.DataRow)
   {
      Label mylabel = (Label)e.Row.FindControl("lb_TotalYield");
      mylabel.DataBind();
   }
} 
```

# vba - 访问 2007 VBA DoCmd.Close 不起作用

> ID：13867679
> 
> 赞同：2
> 
> 时间：2012-12-13T20:11:27.780
> 
> 标签：vba, ms-access-2007

我知道这可能是一个愚蠢的问题，但你知道他们在说什么。我在 Access 数据库中有 VBA，其中包含 On Click 命令。本质上，它是一个带有组合框和用户登录时间戳的表单。单击按钮后，将根据从组合框中选择的名称加载数据输入表单。我希望登录表单在数据输入表单打开后关闭。问题是无论我把 DoCmd.Close 放在哪里，愚蠢的表格都不会关闭！

万一这很重要，此表单将设置为在用户打开数据库时自动打开。

下面是与按钮关联的事件过程的 VBA。

```
Option Compare Database

Private Sub TimeInButton_Click()
Dim strLoginForm As String

If Me.AgentCombo = "Amber" Then
  strForm = "frmCustomersAmber"
ElseIf Me.AgentCombo = "Amanda" Then
  strForm = "frmCustomersAmanda"
ElseIf Me.AgentCombo = "Brett" Then
  strForm = "frmCustomersBrett"
ElseIf Me.AgentCombo = "Marcus" Then
  strForm = "frmCustomersMarcus"
ElseIf Me.AgentCombo = "Terrah" Then
  strForm = "frmCustomersTerrah"

End If

'------------------------------------------------------------
' TimeInButton_Click
'
'------------------------------------------------------------

On Error GoTo TimeInButton_Click_Err

    On Error Resume Next
    DoCmd.GoToRecord , "", acNewRec
    If (MacroError <> 0) Then
    Beep
    MsgBox MacroError.Description, vbOKOnly, ""
End If

DoCmd.OpenForm strForm

TimeInButton_Click_Exit:
Exit Sub

TimeInButton_Click_Err:
MsgBox Error$
Resume TimeInButton_Click_Exit

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:27:46.800

DoCmd.Close 采用可选参数，使其更加可靠。例如，

```
DoCmd.Close acForm, "MyFormName" 
```

# vb6 - VB6中吸收错误的函数？

> ID：13867683
> 
> 赞同：1
> 
> 时间：2012-12-13T20:11:41.523
> 
> 标签：vb6, error-handling

有时有一个函数会在某些情况下抛出错误，并且您想使用该函数，但在您的特定用例中，导致抛出的情况并不是真正的错误情况。例如，也许有一个函数可以从键值集中删除一个条目，如果集合中没有这样的键，它会抛出错误，如果有则返回删除的值。*这在很多情况下都很好，但在某些特定情况下，如果条目存在*，您想要删除它，并且您不在乎它是否不存在。

因此，要么你用多条“On Error”行乱扔代码：

```
' General error handling
On Error GoTo ErrorHandler

' Do some stuff
(...)

' Don't throw an error just because the key doesn't have an entry
On Error Resume Next

' Delete it if it's there
DeletedValue = Delete(Key)

' Go back to regular error handling
On Error GoTo ErrorHandler

' Do some more stuff
(...) 
```

或者你写一个小包装函数：

```
Public Function DeleteButDoNotThrowError(ByVal Key As String) As String
    On Error GoTo ErrorHandler

    DeleteButDoNotThrowError = Delete(Key)

    Exit Function

ErrorHandler:
    DeleteButDoNotThrowError = vbNullString
End Function 
```

我讨厌第一种方式——它对我来说似乎太冗长了——所以我通常使用第二种方式。但我真正想要的是不必每次我想以这种方式使用函数时一遍又一遍地编写这样的包装器。所以我想要类似的东西：

```
Public Function AbsorbErrorString(ByVal CallReturn As String, _
        ByVal ErrorReturn As String) As String
    On Error GoTo ErrorHandler

    AbsorbErrorString = CallReturn

    Exit Function

ErrHandler:
    AbsorbErrorString = ErrorReturn
End Function 
```

然后您将（在我的幻想世界中）能够像这样使用它：

```
DeletedValue = AbsorbErrorString(Delete(Key), vbNullString) 
```

但这当然行不通，因为 AbsorbErrorString 调用 Delete 的情况并非如此；相反，主函数正在调用 Delete，如果成功，则只有在那时主函数才会调用 AbsorbErrorString。所以 Delete 抛出的错误会导致 AbsorbErrorString 被完全绕过，因此 AbsorbErrorString 的错误处理程序不会捕获。

有没有办法以相对干净且不太冗长的方式做我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:10:44.927

不幸的是，这是不可能的，除非将代码作为字符串传递（正如 Daniel Cook 提到的那样）。

我所能建议的只是对您的第二个示例进行较小的调整，以减少样板代码。它并不多，但它与 VB6 中的性能差不多。

```
Public Function SafeDelete(ByRef Key As String) As String
    On Error GoTo ErrorHandler
    SafeDelete = Delete(Key)
ErrorHandler:
End Function 
```

如果`Delete`引发错误，SafeDelete 仍将保留其旧值，默认为空字符串。然后可以通过（现在为空的）错误处理程序。此外，您将希望使用 ByRef 而不是 ByVal 来提高性能，以防包装函数需要 ByRef。（据我的一些同事说，它还保存了不必要的字符串副本。）

# android - android相机预览空白屏幕

> ID：13867693
> 
> 赞同：2
> 
> 时间：2012-12-13T20:12:28.433
> 
> 标签：android, camera, android-camera

我想手动拍摄照片，而不是使用现有的相机应用程序。所以我做了这个**活动**：

```
 public class CameraActivity extends Activity {

    private Camera mCamera;
    private Preview mPreview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);

         // Create an instance of Camera
        mCamera = Camera.open(0); if(mCamera !=null) Log.i("CameraActivity.onCreate()", "mCamera initialized");

        // Create our Preview view and set it as the content of our activity.
        mPreview = new Preview(this); if(mPreview !=null) Log.i("CameraActivity.onCreate()", "mPreview initialized");

        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);

        preview.addView(mPreview); Log.i("CameraActivity.onCreate()", "mPreview added to FrameLayout");

        mPreview.setCamera(mCamera); Log.i("CameraActivity.onCreate()", "mPreview.setCamera(mCamera)");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_camera, menu);
        return true;
    }

    @Override
    public void onPause() {
        super.onPause();
        mPreview.stopPreviewAndFreeCamera();
    }

} 
```

这是我想使用的 CameraPreview：

```
 public class Preview extends ViewGroup implements SurfaceHolder.Callback {

    SurfaceView mSurfaceView;
    SurfaceHolder mHolder;

    private Camera mCamera;
    List<Size> mSupportedPreviewSizes;

    /**
     * @param context
     */
    public Preview(Context context) {
        super(context);

        mSurfaceView = new SurfaceView(context); Log.i("CameraPreview.constructor(...)", "mSurfaceView initialized");
        if(mSurfaceView==null) {Log.i("CameraPreview.constructor(...)", "mSurfaceView is null");}
        addView(mSurfaceView);

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = mSurfaceView.getHolder(); Log.i("CameraPreview.constructor(...)", "mHolder setup");
        if(mHolder==null) {Log.e("PreviewCamera", "mHolder is null");}

        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    /**
     * @param context
     * @param attrs
     */
    public Preview(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public Preview(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

    /* (non-Javadoc)
     * @see android.view.ViewGroup#onLayout(boolean, int, int, int, int)
     */
    @Override
    protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // Now that the size is known, set up the camera parameters and begin
        // the preview.
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewSize(width, height);
        requestLayout();
        mCamera.setParameters(parameters);

        /*
          Important: Call startPreview() to start updating the preview surface. Preview must be
          started before you can take a picture.
        */
        mCamera.startPreview(); Log.i("CameraPreview.surfaceChanged(...)", "mCamera.startPreview()");

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        if (mCamera != null) {
            /*
              Call stopPreview() to stop updating the preview surface.
            */
            mCamera.stopPreview(); Log.i("CameraPreview.surfaceDestroyed(...)", "mCamera.stopPreview()");
        }

    }

    /**
      * When this function returns, mCamera will be null.
      */
    public void stopPreviewAndFreeCamera() {

        if (mCamera != null) {
            /*
              Call stopPreview() to stop updating the preview surface.
            */
            mCamera.stopPreview(); Log.i("CameraPreview.stopPreviewAndFreeCamera()", "mCamera.stopPreview()");

            /*
              Important: Call release() to release the camera for use by other applications. 
              Applications should release the camera immediately in onPause() (and re-open() it in
              onResume()).
            */
            mCamera.release(); Log.i("CameraPreview.stopPreviewAndFreeCamera()", "mCamera.release()");

            mCamera = null;
        }
    }

    /***
     * 
     * @param camera
     */
    public void setCamera(Camera camera) {
        if (mCamera == camera) { Log.i("CameraPreview.setCamera()", "mCamera equals the Camera you want to set"); return; }

        stopPreviewAndFreeCamera(); Log.i("CameraPreview.setCamera()", "stopPreviewAndFreeCamera()");

        mCamera = camera; Log.i("CameraPreview.setCamera()", "setup  new Camera");

        if (mCamera != null) {
            List<Size> localSizes = mCamera.getParameters().getSupportedPreviewSizes();
            mSupportedPreviewSizes = localSizes;
            requestLayout();

            try {
                mCamera.setPreviewDisplay(mHolder);
                Log.i("CameraPreview.setCamera()", "mCamera.setPreviewDisplay(mHolder)");
            } catch (IOException e) {
                e.printStackTrace();
            }

            /*
              Important: Call startPreview() to start updating the preview surface. Preview must 
              be started before you can take a picture.
              */
            mCamera.startPreview(); Log.i("CameraPreview.setCamera()", "mCamera.startPreview()");
        }
    }

    /***
     * 
     * @param id
     * @return
     */
    public boolean safeCameraOpen(int id) {
        boolean qOpened = false;

        try {
            releaseCameraAndPreview();
            mCamera = Camera.open(id);

            qOpened = (mCamera != null);
        } catch (Exception e) {
          //  Log.e(R.string.app_name, "failed to open Camera");
            e.printStackTrace();
        }

        return qOpened;    
    }

    /**
     * 
     */
    Camera.PictureCallback mPicCallback = new Camera.PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            // TODO Auto-generated method stub
            Log.d("lala", "pic is taken");
        }
    };

    /**
     * 
     */
    public void takePic() {

    //  mCamera.takePicture(null, mPicCallback, mPicCallback);

    }
    /**
     * 
     */
    private void releaseCameraAndPreview() {
        this.setCamera(null);
        if (mCamera != null) {
            mCamera.release();
            mCamera = null;
        }
    }

} 
```

这是CameraActivity的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".CameraActivity" >

  <FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="0dip"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />

  <Button
    android:id="@+id/button_capture"
    android:text="Capture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    />

</LinearLayout> 
```

**但是当我启动 CameraActivity 时，我只看到一个空白的白色背景和 Capture-Button ？？？为什么我看不到相机屏幕？**

编辑：Logcat：

```
12-16 13:09:39.941: I/CameraActivity.onCreate()(439): mCamera initialized
12-16 13:09:39.941: I/CameraPreview.constructor(...)(439): mSurfaceView initialized
12-16 13:09:39.941: I/CameraPreview.constructor(...)(439): mHolder setup
12-16 13:09:39.941: I/CameraActivity.onCreate()(439): mPreview initialized
12-16 13:09:39.952: I/CameraActivity.onCreate()(439): mPreview added to FrameLayout
12-16 13:09:39.952: I/CameraPreview.setCamera()(439): stopPreviewAndFreeCamera()
12-16 13:09:39.952: I/CameraPreview.setCamera()(439): setup  new Camera
12-16 13:09:39.961: D/Camera(439): app passed NULL surface
12-16 13:09:39.961: I/CameraPreview.setCamera()(439): mCamera.setPreviewDisplay(mHolder)
12-16 13:09:39.971: I/CameraPreview.setCamera()(439): mCamera.startPreview()
12-16 13:09:39.971: I/CameraActivity.onCreate()(439): mPreview.setCamera(mCamera)
12-16 13:09:40.622: I/ActivityManager(60): Displayed com.example.popup/.CameraActivity: +810ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:59:07.700

我认为你应该`open()`在`addView()`.
相机预览大小由 设置`addView()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:02:41.263

您没有使用相机调用 setCamera（仅为空），因此您从未设置预览显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T14:56:05.893

您可以检查 Preview 的 layout_width 和 layout_height 属性是否设置为 match_parent。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T06:12:45.193

我遇到了同样的问题。然后我将它扩展到 SurfaceView 而不是 ViewGroup。在一个神奇的时刻，它起作用了……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-29T11:55:33.507

看起来 OP 遵循了[http://developer.android.com/training/camera/cameradirect.html](http://developer.android.com/training/camera/cameradirect.html)中的“控制相机”教程。我尝试了同样的方法，但很快发现本教程不起作用。

为了避免其他初学者在尝试使教程正常工作时遇到同样的挫败感，这里有另一个确实有效的教程：[http](http://www.tutorialspoint.com/android/android_camera.htm) ://www.tutorialspoint.com/android/android_camera.htm 。

# python - Python，在 linux 中通过 lspci 或 HAL 获取 VGA 规范？

> ID：13867696
> 
> 赞同：1
> 
> 时间：2012-12-13T20:12:50.333
> 
> 标签：python, linux, hal

我目前正在使用`dmidecode`其他所有内容，但我还没有找到有关在 Linux（主要是 Fedora、Ubuntu、Debian、CentOS、RedHat）上检索视频卡规范的好信息

我想使用的是：`lspci -v`或`HAL`

解析数据的最有效方法是什么`lspci`，只获取 VGA 部分然后输出`json`。

```
def get_graphic_card_properties():
        import dbus
        bus = dbus.SystemBus()
        hal_manager_object = bus.get_object('org.freedesktop.Hal', '/org/freedesktop/Hal/Manager')
        hal_manager_interface = dbus.Interface(hal_manager_object, 'org.freedesktop.Hal.Manager')
        method = hal_manager_object.get_dbus_method('GetAllDevices', 'org.freedesktop.Hal.Manager')
        print "\n".join(list(iter(method()))) 
```

这是我能够作为示例遇到的唯一代码，在 Fedora 17 64 位中似乎不适用于我，我认为因为没有`/orc/freedesktop/Hal.Manager`.

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:28:45.433

这是 lspci [here](http://www.commandlinefu.com/commands/using/lspci)的命令示例。所以基本上你会调用 subprocess 从 python 访问命令。

```
import subprocess

def find_vga():
    vga = subprocess.Popen("lspci -v -s `lspci | awk '/VGA/{print $1}'`", shell=True)
    return vga

print(find_vga()) 
```

或者

```
def find_vga():
    vga = subprocess.check_output("lspci -v -s `lspci | awk '/VGA/{print $1}'`", shell=True, executable='/bin/bash')
    return vga

print(find_vga()) 
```

# php - 如何在详细订单页面中翻译性别

> ID：13867699
> 
> 赞同：1
> 
> 时间：2012-12-13T20:13:01.517
> 
> 标签：php, magento, e-commerce, translation

我尝试在订单详细信息页面中翻译性别、出生日期和 TAX/VAT。(/admin/sales_order/view/order_id)

我尝试，在应用程序 - 语言环境 - pt_Br - Mage_Customer.csv

我在应用程序中尝试-设计-前端-默认-2012-模板-客户-小部件-gender.phtml

我在应用程序中尝试 - 设计 - 前端 - 默认 - 2012 - 模板 - 客户 - 小部件 - taxvat.phtml.phtml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:20:13.410

我设法解决了翻译问题。我必须通过 SQL 来完成，因为它来自数据库。

我使用了以下代码：

税/增值税

```
UPDATE `eav_attribute` SET `frontend_label`='CPF/CNPJ' WHERE `frontend_label`='Tax/VAT Number'; 
```

性别

```
UPDATE `eav_attribute` SET `frontend_label`='Sexo' WHERE `frontend_label`='Gender'; 
```

出生日期

```
UPDATE `eav_attribute` SET `frontend_label`='Data de Nascimento' WHERE `frontend_label`='Date Of Birth'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:10:35.540

*   将管理商店的区域设置（默认配置范围）设置为“葡萄牙语（巴西）”
    *   **系统 > 配置 > 常规 > 区域设置选项 > 区域设置**
*   **在系统 > 缓存管理**中清除翻译、配置和 block_html 缓存
***   注销并重新登录。结论。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:44:16.550

您可以通过启用内联翻译功能直接在页面上翻译。为此，请访问系统 >> 配置 >> 高级 >> 开发人员 >> 内联翻译 >> 在为管理员启用时设置为是。

之后，您的管理页面看起来不同了。将指针悬停在文本上，然后会出现一本小书，单击它，然后出现弹出窗口，您可以在此处翻译文本。

进行更改后，刷新页面以查看结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-12T19:57:31.667

我已经解决了简单地将其相关值修改到数据库中，

**桌子** `eav_attribute_option_value`

无论如何，这是 Magento 社区强加的愚蠢限制，就像其他百万一样。**

# jquery - 使用 jQuery UI Widget Factory 创建实例变量的正确方法

> ID：13867704
> 
> 赞同：12
> 
> 时间：2012-12-13T20:13:18.017
> 
> 标签：jquery, jquery-ui, jquery-ui-widget-factory

我正在使用 jQuery UI 小部件工厂。

```
$.widget("myPlugin" , {

    options: {
    },

    _create: function() {
    },

    instanceVar: "huzzah!"

}); 
```

在测试中，看起来 instanceVar 实际上是原型的一部分。所以它在插件的所有实例中都是相同的。

我可以通过将 instanceVar 放入选项来解决此问题，如下所示：

```
$.widget("myPlugin" , {

    options: {
        instanceVar: "huzzah!"
    },

    _create: function() {
    },

}); 
```

然而，这似乎很奇怪，因为 instanceVar 只是插件使用的一个内部变量——插件的用户不应该能够改变它。

是否有另一种（更好的）方法来实现这一目标？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T20:26:03.803

您可以将私有数据存储在实例本身上，例如，在 内部`_create`，您应该能够做到`this.instanceVar = "huzzah!"`

```
$.widget("ui.myPlugin", {

    options: {
        foo: "foo"
    },

    _create: function() {
        this.instanceVar = "huzzah!"
    },

    _setOption: function() {
        this.instanceVar = "worky!";
    },

    destroy: function() {
        console.log(this.instanceVar);  
    }

});

$(document).myPlugin().myPlugin("option","foo","bar").myPlugin("destroy"); // "worky"

$("body").myPlugin().myPlugin("destroy"); // "huzzah! 
```

演示：http: [//jsfiddle.net/PGUqr/](http://jsfiddle.net/PGUqr/)

# git - git grep 按文件扩展名

> ID：13867705
> 
> 赞同：112
> 
> 时间：2012-12-13T20:13:25.240
> 
> 标签：git, grep, file-extension

我知道，如果我只想在具有某些扩展名的文件上查找模式，我可以这样做：

```
// searches recursively and matches case insensitively in only javascript files
// for "res" from the current directory
grep -iIr --include=*.js res ./ 
```

我一直在尝试寻找一种通过 git grep 执行此操作的方法（以利用 git grep 的速度从它存储在其树中的索引中），但无济于事。我在[这里](http://git.661346.n2.nabble.com/git-grep-while-excluding-files-in-a-blacklist-td7195648.html)看到排除某些文件类型是不可能的。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-12-13T21:16:09.497

是的，例如：

```
git grep res -- '*.js' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:14:35.177

尝试这样做：

```
find . -type f -iname '*.js' -exec grep -i 'pattern' {} + 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T23:29:22.080

如果要搜索所有分支，可以使用以下命令：

```
git log -Sres --all --name-only -- '*.js' 
```

（我看到你指定了 git grep；对我来说，这里的方法似乎更简单、更容易记住——更像是我通常需要的其他操作。）

# android - 如何在显示的文本右侧获取初始光标位置

> ID：13867713
> 
> 赞同：1
> 
> 时间：2012-12-13T20:13:48.117
> 
> 标签：android

这应该很简单，但是我在 stackoverflow 中就该主题尝试了大约十几件事，它们要么什么都不做，要么崩溃。

我有一个以最后一个条目开头的edittext字段，例如“12”，我希望初始光标位于2的右侧，并且始终从1的左侧开始。如果有del就可以了键，但键盘上只有一个后退键，用户必须手动重新定位光标，然后再在旧文本上键入。有几个领域，他很可能想不理会其中的大部分。如果他只想编辑第二个字段让他点击“下一个”、“bs”、“bs”、“45”、“下一个”、“完成”，我想要什么。这样他就不用定位光标了。

- - - - - - 更新 - - - - - - - - - - -

这是主文件

```
package com.example.test;
import android.os.Bundle;
import android.app.Activity;
import android.widget.EditText;

public class MainActivity extends Activity {
    static EditText edit;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        edit = (EditText) findViewById(R.id.edit);
        edit.setSelection(edit.getText().toString().length());
    }
} 
```

这是xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/edit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView2"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="60dp"
    android:text="12"
    android:nextFocusDown="@+id/textView4"
    android:inputType="number"
    android:ellipsize="end"
    android:gravity="right"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/edit"
    android:layout_alignBottom="@+id/edit"
    android:layout_toRightOf="@+id/edit"
    android:text=":"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView3"
    android:layout_alignBottom="@+id/textView3"
    android:layout_toRightOf="@+id/textView3"
    android:text="00"
    android:inputType="number"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:31:34.753

`setSelection()`在每个 EditText 上使用`onCreate()`：

```
edit.setSelection(edit.getText().toString().length());
edit2.setSelection(edit2.getText().toString().length()); 
```

光标仍将尊重用户的触摸手势，但轨迹球和其他移动方法将从右侧的光标开始。

# html - 如何使div的百分比宽度相对于父div而不是视口

> ID：13867717
> 
> 赞同：73
> 
> 时间：2012-12-13T20:14:08.407
> 
> 标签：html, css, width, css-position

[这是我正在使用的 HTML](http://jsfiddle.net/XXm6V/)。

```
<div id="outer" style="min-width: 2000px; min-height: 1000px; background: #3e3e3e;">
  <div id="inner" style="left: 1%; top: 45px; width: 50%; height: auto; position: absolute; z-index: 1;">
    <div style="background: #efffef; position: absolute; height: 400px; right: 0px; left: 0px;"></div>
  </div>
</div>
```

我想要发生的是内部 div 占据其父 div（外部）的空间的 50%。相反，它获得了视口可用空间的 50%，这意味着随着浏览器/视口的尺寸缩小，它也会缩小。

鉴于外部 div 具有`min-width`，`2000px`我希望内部 div 至少是`1000px`宽的。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-12-13T20:19:45.760

指定一个非静态位置，例如，`position: absolute/relative`在一个节点上意味着它将被用作其中绝对定位元素的参考[http://jsfiddle.net/E5eEk/1/](http://jsfiddle.net/E5eEk/1/)

请参阅[https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Positioning#Positioning_contexts](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Positioning#Positioning_contexts)

> 我们可以改变定位上下文——绝对定位元素相对于哪个元素定位。这是通过在元素的祖先之一上设置定位来完成的。

```
#outer {
  min-width: 2000px; 
  min-height: 1000px; 
  background: #3e3e3e; 
  position:relative
}

#inner {
  left: 1%; 
  top: 45px; 
  width: 50%; 
  height: auto; 
  position: absolute; 
  z-index: 1;
}

#inner-inner {
  background: #efffef;
  position: absolute; 
  height: 400px; 
  right: 0px; 
  left: 0px;
}
```

```
<div id="outer">
  <div id="inner">
    <div id="inner-inner"></div>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-13T20:17:04.410

在父元素上使用 position: relative 。

另请注意，如果您没有向任何 div 添加任何位置属性，您将不会看到此行为。胡安进一步解释。

# build - Dojo Build System - 自定义路径散列不起作用

> ID：13867723
> 
> 赞同：1
> 
> 时间：2012-12-13T20:14:20.433
> 
> 标签：build, dojo, app-config, config

我正在尝试从旧的 dojo 构建系统切换到新的系统。我一直在拔头发，但似乎无法让构建脚本获取我在构建配置文件中指定的自定义路径映射。所以如果我的项目结构是这样的：

```
/www/dojo
/www/dojox
/www/dijit
/www/app.profile.js
/www/myapp/package.json      #links to myapp.profile.js
/www/myapp/myapp.profile.js  #standard package profile stub
                             #with test,copyOnly,amd 
/www/myapp/main.js
/www/myapp/bar/hello.js
/www/myapp/bar/sometext.html 
```

文件如下所示：

```
//-------------------------------------------
//FILE: app.profile.js
//-------------------------------------------
var profile = (function(){
    return {
        basePath: ".",
        releaseDir: "builds",
        releaseName: "v0_0_1",
        optimize: "closure",
        cssOptimize: "comments",
        action: "release",

        packages:[
        {
           name: "dojo",
            location: "dojo/dojo"
        },
        {
           name: "myapp",
           location: "myapp"
        }
        ],

        prefixes: {
            "foo": "bar" //doesn't seem to work?
        },

        paths: {
            "foo": "bar" //doesn't seem to work?
        },

        loaderConfig:{
        paths: {
            "foo": "bar"  //doesn't seem to work?
        },
    },      

    layers: {
        "mypp/myapp-release": {
            include: [
                "myapp/main"
            ]
        }
    }
};
})();

//--------------------------------------
//FILE: main.js
//--------------------------------------
require(["dojo/_base/html", "foo/hello", "dojo/text!foo/sometext.html"], 
    function(html, Bar, sometext){
        alert(sometext);
    }
);

//--------------------------------------
//FILE: hello.js
//--------------------------------------
require([ ], 
    function(){
        alert("hello!");
    }
); 
```

我正在运行构建命令：

```
node /www/dojo/dojo.js load=build /www/app.profile.js 
```

构建脚本会告诉我没有找到依赖项“foo/hello”，即使它应该映射到 bar/hello.js ；foo/sometext.html 也是如此。

任何帮助将非常感激; 我不想一直拉头发直到我秃顶！:D

# cloud-foundry - 如何在 Openstack 上部署 cloudfoundry

> ID：13867727
> 
> 赞同：4
> 
> 时间：2012-12-13T20:14:36.007
> 
> 标签：cloud-foundry, openstack

我正在寻找有关如何在 OpenStack 之上部署 CloudFoundy 的文档。是否有可以在 OpenStack 之上自动部署 CloudFoundry 的 Dev/Ops 工具。

我已经能够下载 Openstack 并且能够非常轻松地部署它。我希望 CloudFoundry 与 OpenStack 有类似的自动化部署。由于这两项工作都是开源的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T07:51:20.113

要在 OpenStack 上部署，您需要使用 BOSH ( [https://github.com/cloudfoundry/bosh](https://github.com/cloudfoundry/bosh) )。这里有一个使用 BOSH 部署 CloudFoundry 的 github 项目... [https://github.com/piston/openstack-bosh-cpi](https://github.com/piston/openstack-bosh-cpi)

在 Google 上快速搜索“bosh cloudfoundry openstack”会产生大量的结果来帮助您入门。我计划自己做同样的事情，但还没有正确阅读这个主题。

编辑：

[我还应该添加一个链接，指向@drnic https://github.com/drnic/bosh-getting-started/blob/master/create-a-bosh/creating-a-micro-](https://github.com/drnic/bosh-getting-started/blob/master/create-a-bosh/creating-a-micro-bosh-from-stemcell-openstack.md)在 openstack 上创建 MicroBOSH 的文章[bosh-from-stemcell-openstack.md](https://github.com/drnic/bosh-getting-started/blob/master/create-a-bosh/creating-a-micro-bosh-from-stemcell-openstack.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T21:55:21.537

试试我的指南：

[http://ryangrenz.com/blog/2013/06/11/installing-cf-release-onto-openstack-with-bosh/](https://web.archive.org/web/20140628020837/http://ryangrenz.com/blog/2013/06/11/installing-cf-release-onto-openstack-with-bosh/)

使用它使用 bosh-bootstrap 将微型 BOSH 安装到 Openstack 中，然后通过它创建/上传/部署 cf-release。

未来的帖子还将包括 Cloud Foundry 服务的部署。

谢谢，

瑞安

# java - 如何使用 Jackson 将 JSON 反序列化为 java 对象

> ID：13867728
> 
> 赞同：2
> 
> 时间：2012-12-13T20:14:38.203
> 
> 标签：java, solr, jackson

我有一个从 solr 实例返回的相当 JSON 响应......

```
{"responseHeader":
  {"status":0,"QTime":1,"params":{"sort":"score asc","fl":"*,score",
    "q":"{! score=distance}","wt":"json","fq":"description:motor","rows":"1"}},
        "response":{"numFound":9,"start":0,"maxScore":6.8823843,"docs":
                  [{"workspaceId":2823,"state":"MN","address1":"1313 mockingbird Lane",
                    "address2":"","url":"http://mydomain.com/","city":"Minneapolis",
                    "country":"US","id":"399068","guid":"","geo":["45.540239, -98.580473"],
                    "last_modified":"2012-12-12T20:40:29Z","description":"ELEC MOTOR",
                    "postal_code":"55555","longitude":"-98.580473","latitude":"45.540239",
                    "identifier":"1021","_version_":1421216710751420417,"score":0.9288697}]}} 
```

我正在尝试将其映射到 java 对象：

```
public class Item extends BaseModel implements Serializable {
    private static final long serialVersionUID = 1L;

    protected Integer workspaceId;
    protected String name;
    protected String description;
    protected String identifier;
    protected String identifierSort;
    protected Address address;
    protected String url;

        /** getters and setters eliminated for brevity **/
}

public class Address implements Serializable {
    private static final long serialVersionUID = 1L;

    protected String address1;
    protected String address2;
    protected String city;
    protected String state;
    protected String postalCode;
    protected String country;
            /** getters and setters eliminated for brevity **/
    } 
```

如何将 address1、address2、city、state 等映射到 Item 对象中的 Address 对象中？我一直在阅读有关[杰克逊注释](https://github.com/FasterXML/jackson-annotations/wiki/JacksonAnnotations)的内容，但对于从哪里开始，我并没有真正跳出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:20:03.837

如果使用 Jackson 1.9 或更高版本，您可以使用[@JsonUnwrapped](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonUnwrapped.html)注释来处理此问题。

这是一个使用它的例子（主要来自杰克逊的文档）：

```
public class Name {
   private String first, last;

   // Constructor, setters, getters
}

public class Parent {
   private int age;
   @JsonUnwrapped
   private Name name;

   // Constructor, setters, getters
}

public static void main(String[] args) {
   try {
      final ObjectMapper mapper = new ObjectMapper();
      final Parent parent = mapper.readValue(new File(
            "/path/to/json.txt"), Parent.class);
      System.out.println(parent);
   } catch (final Exception e) {
      e.printStackTrace();
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:14:52.580

我们最终使用了 Solrj - 有点。

我们编写了自己的 SolrResult 对象，并将其提供给 SolrJ，如下所示：

```
List<SolrResult> solrResults = rsp.getBeans(SolrResult.class); 
```

然后在我们有复杂或嵌套对象的 SolrResult.java 中，我们首先使用 SolrJ 注释来获取字段，然后根据需要设置值......

```
@Field("address1")
public void setAddress1(String address1) {
    this.item.getAddress().setAddress1(address1);
} 
```

这并不难，只是感觉有点乱，但它确实有效。

# ios6 - 为什么 NSLayoutAttributeCenterX 与 NSLayoutAttributeWidth 是“无效配对”

> ID：13867736
> 
> 赞同：10
> 
> 时间：2012-12-13T20:15:05.743
> 
> 标签：ios6, autolayout, nslayoutconstraint

我试图让自动布局管理器根据超级视图的宽度调整视图的中心点。我不明白为什么这是属性的“无效配对”（如崩溃和 NSInvalidArgumentException 所述）

```
UIView *ac;
NSLayoutConstraint *cXloc = [NSLayoutConstraint constraintWithItem:ac 
                                                         attribute:NSLayoutAttributeCenterX 
                                                         relatedBy:NSLayoutRelationEqual 
                                                            toItem:ac.superview 
                                                         attribute:NSLayoutAttributeWidth 
                                                        multiplier:.1 
                                                          constant:x*ac.superview.frame.size.width*.2];
[ac.superview addConstraint:cXloc]; 
```

有人可以解释为什么这是“无效配对”以及我应该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:32:49.667

这是当前实现的限制`Auto Layout`。但是，您可以轻松解决它，因为所有约束都是线性的并且`NSLayoutAttribute`s 是相关的。例如，假设您想要的约束是：

```
subview.centerX = m * superview.width + c; 
```

您可以将其表示为 tow 之间的关系`centerX`：

```
// Since width == 2 * centerX
subview.centerX = m * 2 * superview.centerX + c; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:49:46.157

如果您将 ac 的 AttributeCenterX 与其父视图的 AttributeCenterX、AttributeLeading 或 AttributeTrailing 相关联，您应该能够使用乘数和约束来表达您想要的约束。请记住，仅在创建约束时才评估常量，并且示例的常量不会随着 ac.superview 的宽度变化而更新。

如果您可以用文字表达您希望 ac 相对于其父视图的位置，我们可以建议一个约束。

*编辑*

这是一个带有 5 个 NSButton 的示例。它们本身和它们之间的空间扩展，使得空间的宽度为按钮的 30%，所有按钮的宽度相同，所有空间的宽度都相同。仅为间距创建 4 个不可见的 NSView 非常麻烦，尤其是考虑到您已经让它在自动布局之外工作。但如果你好奇：

```
// Assuming these NSViews and NSButtons exist,
//NSView* superview ;
//NSButton *buttonOne, *buttonTwo, *buttonThree, *buttonFour, *buttonFive ;

[superView removeConstraints:superView.constraints] ;

// Create empty NSViews to fill the space between the 5 buttons.
NSView* spaceOne = [NSView new] ;
NSView* spaceTwo = [NSView new] ;
NSView* spaceThree = [NSView new] ;
NSView* spaceFour = [NSView new] ;
spaceOne.translatesAutoresizingMaskIntoConstraints = NO ;
spaceTwo.translatesAutoresizingMaskIntoConstraints = NO ;
spaceThree.translatesAutoresizingMaskIntoConstraints = NO ;
spaceFour.translatesAutoresizingMaskIntoConstraints = NO ;
[superView addSubview:spaceOne] ;
[superView addSubview:spaceTwo] ;
[superView addSubview:spaceThree] ;
[superView addSubview:spaceFour] ;

NSDictionary* views = NSDictionaryOfVariableBindings(superView,buttonOne,buttonTwo,buttonThree,buttonFour,buttonFive,spaceOne,spaceTwo,spaceThree,spaceFour) ;

// Vertically align buttonOne to its superview however you like.
[superView addConstraints: [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[buttonOne]"  options:0  metrics:nil  views:views ] ] ;

// Make the "space" NSViews' widths equal and >= 10\. Make the buttons' widths equal.
[superView addConstraints: [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[buttonOne][spaceOne(>=10)][buttonTwo(==buttonOne)][spaceTwo(==spaceOne)][buttonThree(==buttonOne)][spaceThree(==spaceOne)][buttonFour(==buttonOne)][spaceFour(==spaceOne)][buttonFive(==buttonOne)]|"  options: NSLayoutFormatAlignAllCenterY  metrics:nil  views:views ] ] ;
// Make the "space" NSViews' widths 30% of the NSButtons' widths.
[superView addConstraint: [NSLayoutConstraint constraintWithItem: spaceOne
                                                       attribute: NSLayoutAttributeWidth
                                                       relatedBy: NSLayoutRelationEqual
                                                          toItem: buttonOne
                                                       attribute: NSLayoutAttributeWidth
                                                      multiplier: 0.3
                                                        constant: 0 ] ] ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T01:03:15.247

根据 an0 的回答，并假设您有一个包含按钮的 NSArray，以下内容应在超级视图中平均分配按钮：

```
 NSUInteger currentButton = 1;
  for (UIButton *button in self.buttons)
  {
    [self.view addConstraint:[NSLayoutConstraint constraintWithItem:button attribute:NSLayoutAttributeCenterX relatedBy:NSLayoutRelationEqual toItem:self.view attribute:NSLayoutAttributeCenterX multiplier:2.0 * (CGFloat) currentButton / (CGFloat) (self.buttons.count + 1) constant:0.0]];
    currentButton++;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-18T15:27:43.873

如果您希望以编程方式生成的视图适合其父视图的宽度。您可以使用和的约束`NSLayoutAttributeLeading`配对`attribute:NSLayoutAttributeCenterX`

您必须进行正确的计算才能获得正确的乘数。计算涉及要布局的视图总数和当前视图的索引。

```
 //Caculate constraint multiplier from parentView CenterX.
    //This sets the width of the button relative to parentView.
    // A value of 2 = Full width.

    CGFloat multiplier = 2/(arr.count/counter);

    [parentView addConstraint:[NSLayoutConstraint constraintWithItem:btn
                    attribute:NSLayoutAttributeTrailing
                    relatedBy:NSLayoutRelationEqual toItem:parentView
                    attribute:NSLayoutAttributeCenterX multiplier:multiplier constant:0]]; 
```

这将分配视图宽度以填充其父视图。

# r - 从宽到长重塑数据？

> ID：13867737
> 
> 赞同：1
> 
> 时间：2012-12-13T20:15:14.647
> 
> 标签：r

如何重塑这些广泛的数据：（来自 csv 文件）

```
Name    Code    Indicator     1960    1961    1962 
```

进入这种长格式？

```
Name    Code    Indicator     Year 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T20:20:09.883

该`reshape2`包很好地完成了这个功能`melt`。

```
yourdata_melted <- melt(yourdata, id.vars=c('Name', 'Code', 'Indicator'), variable.name='Year') 
```

这将添加一列`value`您可以删除的列。`yourdata_melted$value <- NULL`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T03:07:39.160

仅仅因为我喜欢继续使用基本 R 函数的运动：

测试数据：

```
test <- data.frame(matrix(1:12,nrow=2))
names(test) <- c("name","code","indicator","1960","1961","1962")
test

  name code indicator 1960 1961 1962
1    1    3         5    7    9   11
2    2    4         6    8   10   12 
```

现在重塑它！

```
reshape(
   test,
   idvar=c("name","code","indicator"),
   varying=c("1960","1961","1962"),
   timevar="year",
   v.names="value",
   times=c("1960","1961","1962"),
   direction="long"
)

#           name code indicator year value
#1.3.5.1960    1    3         5 1960     7
#2.4.6.1960    2    4         6 1960     8
#1.3.5.1961    1    3         5 1961     9
#2.4.6.1961    2    4         6 1961    10
#1.3.5.1962    1    3         5 1962    11
#2.4.6.1962    2    4         6 1962    12 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-16T12:11:30.927

和`tidyr`

```
gather(test, "time", "value", 4:6) 
```

**数据**

```
test <- data.frame(matrix(1:12,nrow=2))
names(test) <- c("name","code","indicator","1960","1961","1962") 
```

# vba - 记事本中的 VBA 在 Excel 错误中运行代码

> ID：13867738
> 
> 赞同：0
> 
> 时间：2012-12-13T20:15:21.100
> 
> 标签：vba, excel

这是我保存在记事本中的代码。我需要更改 Excel.Applications 吗？

```
Option Explicit

Dim xlApp
Dim xlBook

Set xlApp = CreateObject("Excel.Application")
Set xlBook = xlApp.Workbooks.Open("H:\shane.xlsm", 0, True)

xlApp.Run "Email"
xlBook.close
xlApp.Quit

Set xlBook = Nothing
Set xlApp = nothing 
```

这是我必须发送电子邮件的代码，当我测试它工作正常并会向我发送电子邮件。

```
Option Explicit

Const strTo As String = "dvandervieren@enerplus.com"
Const strCC As String = ""  '<~~ change "def@abc.com" to "" if you do not want to CC
Const strBCC As String = "" '<~~ change "ghi@abc.com" to "" if you do not want to BCC

Sub Email()
Dim OutApp As Object, OutMail As Object
Dim strbody As String, strSubject As String

strSubject = "Hello World"
strbody = "This is the message for the body"

Set OutApp = CreateObject("Outlook.Application")

Set OutMail = OutApp.CreateItem(0)

On Error Resume Next
With OutMail
    .To = strTo
    .CC = strCC
    .BCC = strBCC
    .Subject = "This is the Subject line"
    .Body = strbody
    .Send
End With
On Error GoTo 0

Set OutMail = Nothing
Set OutApp = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T02:04:29.713

打开您的 excel 文档。打开 VB 编辑器。在左侧窗格中找到 excel 文档。右键单击并选择插入>>模块。将您的代码移动到新创建的模块中。然后，您应该能够仅使用方法名称 Email 来调用它。您不需要删除 excel 应用程序，因为您已经在 excel 中。– [巫术](https://stackoverflow.com/users/1586390/sorceri)

# java - Java Applet 从网络服务器加载时不播放音频

> ID：13867739
> 
> 赞同：1
> 
> 时间：2012-12-13T20:15:24.260
> 
> 标签：java, audio, browser, applet, webserver

当我从本地计算机打开 HTML 时，我的 Java Applet 运行正常，但当我将 HTML、JNLP 和 JAR 文件上传到我的网络服务器时，它无法播放。

两次尝试加载它时，我都使用了 Google Chrome、Firefox 和 Internet Explorer。他们给了我同样的问题。我正在使用 AudioClip 播放文件。

有任何想法吗？

# javascript - 在 jquery 中找到下一个非兄弟孩子的实例？

> ID：13867742
> 
> 赞同：2
> 
> 时间：2012-12-13T20:15:31.093
> 
> 标签：javascript, jquery, show-hide

我有一个带有输入的表单和表单之外的 div 容器，每个输入都有帮助文本。

```
<form>
    <input id="name" />
    <input id="email" />
    <input id="pass" />
</form>
<div class="help-container">
    <p class="help-name"></p>
    <p class="help-email"></p>
    <p class="help-pass"></p>
</div> 
```

现在 .help-container 最初是用 { display: none; 隐藏的。} 以及每个孩子 p。

我遇到问题的jQuery是：

```
$("form").find("input").focus(function(){
    var parent = $(this).attr("id");
    $(this).closest("form").next(".help-container").show();
}) 
```

1）这不起作用。为什么？

```
$("form").find("input").focus(function(){
    var parent = $(this).attr("id");
    $(this).closest("form").next(".help-container").show();
    $(".help-container").children("p").hide();
    $(".help-container").children("p").find(".help-" + parent).show();
}) 
```

2）这不起作用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:21:27.950

这是您的问题

```
$("form").find("input").focus(function(){
    var parent = $(this).attr("id");
    $(this).closest("form").next(".help-container").show(); // you show the container
    $(".help-container").children("p").hide(); // hide all p under it - nothing is shown now
    $(".help-container").children("p").find(".help-" + parent).show(); // you're trying to find elements under p with class .help-xxx
}) 
```

你需要把它改成这个

```
$("form input").focus(function(){
    var parent = $(this).attr("id");
    $(".help-container").children("p").hide();    // hide all p's
    $(".help-container").children("p.help-" + parent).show(); // show relevant p - since you want the p with the matching class
});​ 
```

[http://jsfiddle.net/vjUme/](http://jsfiddle.net/vjUme/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:22:24.793

这条线不起作用：

```
 $(".help-container").children("p").find(".help-" + parent).show(); 
```

**因为您正在元素内**搜索 .help-ID ，请`p`尝试以下操作：

```
 $(".help-container").children("p.help-" + parent).show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T20:23:56.103

**[JSBIN](http://jsbin.com/ufacoq/1/edit)**

```
$("form").find("input").focus(function(){
    var helper = $(this).attr("id");
    $(this).closest("form").next(".help-container").show();
    $(".help-container").find(".help-"+ helper ).show().siblings('p').hide();
}); 
```

# javascript - 防止功能在用户滚动时运行

> ID：13867744
> 
> 赞同：2
> 
> 时间：2012-12-13T20:15:48.933
> 
> 标签：javascript, jquery

我怎么能做这样的事情？

```
myfunction () {

    if (notscrolling) {

        // do stuff

    }
} 
```

**这是我能找到的最佳解决方案：**

它获取当前滚动位置，然后在 5 毫秒后再次获取。如果数字相同，则页面不滚动！不需要全局变量。

```
myfunction () {

    var a = $(document).scrollTop();

    setTimeout(function() { 
        var b = $(document).scrollTop();

            if (a === b) {

                // do stuff here cuz its not scrolling :) !!!!

            }
    }, 5);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:18:19.963

查看[http://james.padolsey.com/javascript/special-scroll-events-for-jquery/](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/) 了解 scrollstart 和 scrollstop 事件。

使用这些事件来设置一个全局变量`scrolling`并检查它`myfunction`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:19:35.883

我认为这篇文章非常符合您的要求： [如何在滚动停止时触发 ajax 请求？](https://stackoverflow.com/questions/6359148/how-to-trigger-ajax-request-on-scroll-stop)

您想要实现的是“scrollStop”行中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:31:37.490

在窗口滚动事件中，将全局滚动变量设置为 true 或 false，然后在滚动事件中设置一个 setTimeout，在 x 毫秒后将其设置回默认值。然后，您可以使用该全局变量的值来确定窗口是否正在滚动。

```
window.scrolling = false;
var timer;

$(window).on('scroll',function(){
    window.scrolling = true;
    clearTimeout(timer);
    timer = setTimeout(function(){
        window.scrolling = false;
        $(window).trigger("scrollend");
    },100);
});

function myfunction() {
    if (!window.scrolling) {
        alert("Window is not scrolling.");
    }
} 
```

甚至更好，不要使用全局范围。

```
(function(){
    var timer, scrolling = false;

    $(window).on('scroll',function(){
        scrolling = true;
        clearTimeout(timer);
        timer = setTimeout(function(){
            scrolling = false;
            $(window).trigger("scrollend");
        },100);
    });

    function myfunction() {
        if (!scrolling) {
            alert("Window is not scrolling.");
        }
    }
})(); 
```

# sql - 在不同列的总和上创建一个枢轴

> ID：13867749
> 
> 赞同：0
> 
> 时间：2012-12-13T20:16:25.850
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我的表如下所示：

```
+-----------+--------+--------+--------+--------+--------+--------+--------+--------+--------+---------+---------+---------+----------+-------------+
| client_id | count1 | count2 | count3 | count4 | count5 | count6 | count7 | count8 | count9 | count10 | count11 | count12 | Count13+ | PatientYear |
+-----------+--------+--------+--------+--------+--------+--------+--------+--------+--------+---------+---------+---------+----------+-------------+
|       123 |     23 |      8 | NULL   | NULL   | NULL   | NULL   | 1      | 1      | NULL   | NULL    | NULL    | NULL    | NULL     |    20120101 |
|       234 |     52 |     39 | 18     | 12     | 14     | 17     | 17     | 13     | 14     | 12      | 10      | 3       | 27       |    20120101 |
|        34 |     25 |      5 | NULL   | NULL   | NULL   | NULL   | NULL   | NULL   | NULL   | NULL    | NULL    | NULL    | NULL     |    20120101 |
|       345 |    211 |     29 | 31     | 9      | 7      | 4      | 6      | NULL   | NULL   | 1       | NULL    | 1       | 4        |    20120101 |
|      3457 |     13 |      4 | 3      | 7      | 8      | 6      | 9      | 1      | 7      | 5       | NULL    | 1       | 9        |    20120101 |
|      5645 |     39 |     15 | 14     | 7      | 13     | 4      | 14     | 6      | 3      | 5       | 2       | 1       | 41       |    20120101 |
|       474 |     47 |     25 | 12     | 8      | 6      | 3      | 5      | 6      | 6      | 3       | 1       | 8       | 26       |    20120101 |
|        66 |     11 |      3 | 2      | 1      | 2      | NULL   | 1      | 1      | NULL   | 2       | 1       | 1       | 18       |    20120101 |
|       333 |      5 |      3 | 1      | 1      | 2      | 3      | NULL   | 1      | 2      | 1       | NULL    | NULL    | 28       |    20120101 |
+-----------+--------+--------+--------+--------+--------+--------+--------+--------+--------+---------+---------+---------+----------+-------------+

... 
```

我正在尝试创建一个像这样的支点：

```
+-----------------+----------+----------+----------+----------+----------+
|     Values      | 20080101 | 20090101 | 20100101 | 20110101 | 20120101 |
+-----------------+----------+----------+----------+----------+----------+
| Sum of count1   |    20895 |    87470 |   213877 |   398484 |   533062 |
| Sum of count2   |     2750 |    19020 |    48820 |    95423 |   142200 |
| Sum of count3   |      477 |     5958 |    19419 |    38449 |    61968 |
| Sum of count4   |      201 |     2012 |     8865 |    19098 |    30179 |
| Sum of count5   |       71 |      911 |     3894 |     8941 |    15675 |
| Sum of count6   |       39 |      612 |     2148 |     5380 |     9899 |
| Sum of count7   |       14 |      427 |     1466 |     3555 |     6450 |
| Sum of count8   |       11 |      239 |     1036 |     2381 |     4667 |
| Sum of count9   |        2 |      137 |      726 |     1888 |     4000 |
| Sum of count10  |        2 |       82 |      544 |     1399 |     3600 |
| Sum of count11  |        1 |       53 |      370 |     1094 |     3122 |
| Sum of count12  |        4 |       38 |      262 |      826 |     1845 |
| Sum of Count13+ |       32 |      188 |      609 |     2662 |     4044 |
+-----------------+----------+----------+----------+----------+----------+ 
```

这是我到目前为止所尝试的：

```
select
* from 
( 
    select *
    from #TempTable
) DataTable
PIVOT
(
    sum (count1)
    ,sum(count2)
    For PatientYear
    in ([20120101],[20110101],[20100101],[20090101],[20080101])

)PivotTable 
```

但我收到此错误：

> 消息 102，级别 15，状态 1，第 11 行 ',' 附近的语法不正确。

我究竟做错了什么？感谢您的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:35:04.827

您将首先需要`UNPIVOT`数据，然后应用`PIVOT`：

```
select col, [20120101],[20110101], [20100101],[20090101],[20080101]
from
(
  select PatientYear,
    value, col,
    cast(replace(replace(col, '+', ''), 'count', '') as int) col_ord
  from
  (
    -- if you have different datatypes, then you will need to perform a cast/convert here in this query
    select [client_id], [count1], [count2], [count3], [count4], [count5], [count6], [count7], 
           [count8], [count9], [count10], [count11], [count12], [Count13+], [PatientYear]
    from yourtable
  ) s1
  unpivot
  (
    value
    for col in ([count1], [count2], [count3],      
                [count4], [count5], [count6], 
                [count7], [count8], [count9], 
                [count10], [count11], [count12], [Count13+])
  ) unpiv
) src
pivot
(
  sum(value)
  for PatientYear in ([20120101],[20110101],
                      [20100101],[20090101],[20080101])
) piv
order by col_ord 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4c4bb/14)

# iphone - 旋转图像图层保持中心

> ID：13867754
> 
> 赞同：4
> 
> 时间：2012-12-13T20:16:42.353
> 
> 标签：iphone, objective-c, ios, uiimageview, catransform3d

考虑这张图片（尺寸为 10x140；箭头为 10x70）：

![从 0 到 160° 的圆](../Images/549fc16801ac364bb286f82689bf9a03.png)

红色箭头是我的问题，因为我希望它旋转。

现在我正在使用

```
CGFloat Angle = [Speed.text intValue] / 160.0;
_Arr.layer.transform = CATransform3DMakeRotation(Angle * M_PI * 2, 0, 0, 1); 
```

`_Arr`旋转时，它失去了中心。正如您在图片中看到的，中心是加号（“+”），不透明的箭头是问题所在。

我也尝试设置中心和锚点，但我得到了相同的结果。我将箭头图像加倍（双倍高度，图像一半），同样的事情。

这是界面生成器：

![界面构建器](../Images/53b8e289bbb9421d34e57dd8b18ec63d.png)

可能是什么问题？

是`CATransform3DMakeRotation`问题还是图像？锚点？度数公式？两个都？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:47:27.770

anchorPoint 是答案（“将箭头中心点移动到图像的端点之一”）。查看本教程[http://www.mobisoftinfotech.com/blog/iphone/ios-tutorial-custom-speedometer-control/](http://www.mobisoftinfotech.com/blog/iphone/ios-tutorial-custom-speedometer-control/)

# javascript - Ruby on Rails 使用 AJAX 保存

> ID：13867758
> 
> 赞同：0
> 
> 时间：2012-12-13T20:17:04.070
> 
> 标签：javascript, ruby-on-rails, ruby, ajax

在我的 Rails 应用程序中，我正在寻找一种保存帖子的方法，并提出一条“已保存”的通知。无需重定向到任何地方。

我可以在控制器中执行此操作还是必须使用 Ajax？如果我必须使用 Ajax，有没有简单的方法来实现它？

以下是我的控制器中的创建和更新操作：

```
def create
  @document = current_user.documents.build(params[:document])

  if @document.save
    redirect_to @document.edit, notice: 'Saved'
  else
    render action: "new"
  end
end

def update
  @document = current_user.documents.find_by_url_id(params[:id])

  if @document.update_attributes(params[:document])
    redirect_to @document, notice: 'Saved'
  else
    render action: "edit"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:52:49.873

看起来您正试图用“编辑文档”表单替换“新文档”表单，并显示一条警告说它已保存。

老实说，可能最简单的方法是使用 jQuery 将整个表单替换为部分表单。它不是最苗条的，有办法做所有的 Javascript 客户端，但这会让你开始。

假设您有一个名为“新文档”的部分表单，请`_new.html.erb`创建一个名为的文件`create.js.erb`并将其放入其中：

```
$edit_form = "<%= escape_javascript(render :partial => 'new', :locals => {document: @document}) %>"
$("#document_form_container").html($edit_form) 
```

然后确保您的表单`:remote => true`在`form_for`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:01:16.143

如果您不想创建新的控制器操作（并且您可能不应该），那么我建议您将创建和更新操作设置为如下所示：

```
def create
  @document = current_user.documents.build(params[:document])

  if @flag = @document.save
    respond_to do |format|
      format.html
      format.js
    end
  else
    render action: "new"
  end
end

def update
  @document = current_user.documents.find_by_url_id(params[:id])

  if @flag = @document.update_attributes(params[:document])
    respond_to do |format|
      format.html
      format.js
    end
  else
    render action: "edit"
  end
end 
```

然后在 app/views/documents/create.js.erb 中：

```
var results_html;
var status;

<% if @flag %>
  results_html = $('<%= j(render("document"))%>');
  status = "success";
<% else %>
  results_html = $('');
  status = "failure";
<% end %>

$('destination').append(results_html); //assuming you're inserting a list item or some content besides the alert onto the page

alert(status); // replace this with your actual alert code 
```

在 update.js.erb 中：

```
var results_html;
var status;

<% if @flag %>
  results_html = $('<%= j(render("document"))%>');
  status = "success";
<% else %>
  results_html = $('');
  status = "failure";
<% end %>

$('#<%= @document.id %>').replaceWith(results_html); //assuming you're replacing a list item or some content besides the alert onto the page.  also, make sure you're searching for the correct element id

alert(status); // replace this with your actual alert code 
```

希望这可以帮助。关键是 rails 允许您为控制器操作上的不同访问方法定义不同的模板。当您发出 AJAX 请求时，您将默认获得 js.erb 视图，这将允许您通过返回将在服务器返回时运行的 javascript 来操作当前页面。

# jquery - 将 jQuery TouchSwipe 添加到 prettyPhoto

> ID：13867759
> 
> 赞同：1
> 
> 时间：2012-12-13T20:17:10.657
> 
> 标签：jquery, jquery-plugins, swipe, prettyphoto

我正在使用[prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)来显示从 Flickr 获得的图像。它在桌面和 iPad 上运行良好。对于 iPad，我想添加滑动手势来切换图像。所以我试图添加[TouchSwipe](http://labs.skinkers.com/touchSwipe/)。

这是我设置我的漂亮照片的方法。注意回调。

```
function setupBox() {
    $("a[rel^='prettyPhoto[gallery1]']").prettyPhoto({
        slideshow: 5000,
        social_tools: '',
        animation_speed:'normal',
        theme:'facebook',
        changepicturecallback: function() {
            setupSwipe();
        }
    });
} 
```

这是回调函数。'#fullResImg' 是图像的选择器。

```
function setupSwipe() {
    $('#fullResImg').swipe({
        swipe:function(event, direction, distance, duration, fingerCount) {
            if( direction == 'left' ) {
                $.prettyPhoto.changePage('next');
            }else if ( direction == 'right' ) {
                $.prettyPhoto.changePage('previous');
            }
        },
        allowPageScroll: "none",
    });
} 
```

正确调用了所有函数，但未检测到滑动。如果我将选择器更改为“.pp_content”，我可以在框的底部滑动，但也不能在图像本身上滑动。

我怀疑它与盒子的堆叠有关，但我尝试了其他几个选择器，它们对实际的 Image 不起作用。

我将在此处包含 pP 框的标记：

```
<div class="pp_pic_holder facebook" style="top: 90.5px; left: 80px; display: block; width: 816px;">
   <div class="ppt" style="opacity: 1; display: block; width: 776px;">LN-RKI</div>
   <div class="pp_top">
    <div class="pp_left"></div>
    <div class="pp_middle"></div>
    <div class="pp_right"></div>
   </div>
   <div class="pp_content_container">
    <div class="pp_left">
    <div class="pp_right">
     <div class="pp_content" style="height: 552px; width: 776px;">
      <div class="pp_loaderIcon" style="display: none;"></div>
      <div class="pp_fade" style="display: block;">
       <a href="#" class="pp_expand" title="Expand the image" style="display: inline;">Expand</a>
       <div class="pp_hoverContainer" style="height: 516px; width: 776px;">
        <a class="pp_next" href="#">next</a>
        <a class="pp_previous" href="#">previous</a>
       </div>
       <div id="pp_full_res"><img id="fullResImage" src="http://farm9.static.flickr.com/8489/8265747809_d0fca2a7c9_b.jpg" style="height: 516px; width: 776px;"></div>
       <div class="pp_details" style="width: 776px;">
        <div class="pp_nav" style=""><a href="#" class="pp_play">Play</a>
         <a href="#" class="pp_arrow_previous">Previous</a>
         <p class="currentTextHolder">1/50</p>
         <a href="#" class="pp_arrow_next">Next</a>
        </div>
        <p class="pp_description" style="display: none;"></p>
        <div class="pp_social"></div>
        <a class="pp_close" href="#">Close</a>
       </div>
      </div>
     </div>
    </div>
    </div>
   </div>
   <div class="pp_bottom">
    <div class="pp_left"></div>
    <div class="pp_middle"></div>
    <div class="pp_right"></div>
   </div>
  </div>
 <div class="pp_overlay" style="opacity: 0.8; height: 954px; width: 959px; display: block;"></div> 
```

那么，这里有没有人知道如何使用 TouchSwipe 在 prettyPhoto 上滑动图像？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:16:48.463

好的，我找到了解决方法。恕我直言，不是很干净，但对于这个网站来说已经足够了。

我在 changepicturecallback 中添加了以下代码：

```
if( document.width <= 1024 )
{
    $('.pp_hoverContainer').remove();
} 
```

当文档宽度 <= 1024 时，这完全会删除导航覆盖。这适用于 Android Chrome、iOS Chrome、iOS Safari。

我需要补充一点，我在“#pp_full_res”上设置了滑动。不像我的问题。

所以是的，这是一个堆叠问题。请注意，触发 .pp_hoverContainer 上的滑动也不起作用。不错的副作用：滑动模式下没有导航箭头 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:28:32.497

我使用上面的答案来实现相同的功能，但使用[TouchWipe](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library)并发现您可以像这样将滑动操作添加到该元素，而不是删除“.pp_hoverContainer”：

```
 $(document).ready(function(){
        function setupBox() {
           $("a[rel^='prettyPhoto']").prettyPhoto({
                social_tools: false,
                theme:'dark_rounded',
                changepicturecallback: function() {
                    setupSwipe();
                }
           });
        }
        function setupSwipe() {
           $(".pp_hoverContainer").touchwipe({
            wipeLeft: function() { 
                $.prettyPhoto.changePage('next');
            },  
            wipeRight: function() { 
               $.prettyPhoto.changePage('previous');
        },
           min_move_x: 20,
           min_move_y: 20,
           preventDefaultEvents: true
       });
   }
   setupBox();
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-18T11:22:39.730

我使用了您的代码，仅将“#fullResImg”选择器更改为“.pp_hoverContainer”，然后滑动对我有用。

# xcode - 支持新ipad的视网膜显示是必须的吗？

> ID：13867764
> 
> 赞同：0
> 
> 时间：2012-12-13T20:17:34.010
> 
> 标签：xcode, ipad, retina-display, ipad-3

我刚刚完成了一个长项目，通用（iPhone、iPod、iPad）的开发，我并没有考虑到视网膜显示器。

1.  我被迫添加资产来支持这项新决议？如果我使用的是最新的 SDK，我可以指定是否支持新 ipad 中的新分辨率吗？（例如修改目标设备系列中的值）。
2.  如果没有，我的应用程序将在新 ipad 中显示为 ipad 版本？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:24:37.927

您不必支持视网膜显示，只需省略`@2x`图形文件就足以让 iPad 使用非视网膜图形。无需进一步设置。
请记住，您的客户很可能需要视网膜显示支持，因此您应该考虑在某个时候添加视网膜图形（如果您想避免差评）。

# java - 基于兄弟节点的条件xquery

> ID：13867768
> 
> 赞同：1
> 
> 时间：2012-12-13T20:17:59.483
> 
> 标签：java, xml, xml-parsing

我有一个 xml 文件，其中包含一些具有这种一般结构的内容：

```
<List>
    <Outer>
        <CheckValue>
            no
        </CheckValue>
        <Inner>
            2345
        </Inner>
    </Outer>
    <Outer>
        <CheckValue>
            yes
        </CheckValue>
        <Inner>
            1234
        </Inner>
    </Outer>
</List> 
```

我想选择与某些 CheckValues 关联的内部节点。在此示例中，将查找 CheckValues 为 yes 的 Outer 节点并在那里返回 Inner 节点。

我目前的尝试涉及使用 xquery 拉出所有外部节点，并在每个节点上使用另一个 xquery 检查 CheckValue，以便如果 CheckValue 合适，我可以检索内部节点：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse("filePath.xml");
XPathFactory xPathfactory = XPathFactory.newInstance();
XPath xpath = xPathfactory.newXPath();
XPathExpression expr = xpath.compile("/List/Outer");
NodeList nodes = (NodeList)expr.evaluate(doc, XPathConstants.NODESET);
for (int i = 0; i < nodes.getLength(); i++) {
    Node curr = nodes.item(i);

    expr = xpath.compile("/CheckValue/text()");
    NodeList nodesInside = (NodeList)expr.evaluate(doc, XPathConstants.NODESET);
    for (int j = 0; j < nodesInside.getLength(); j++) {
        //Here I'd like to check the value of CheckValue and act appropriately, however execution never enters this for loop
    }

    System.out.println(curr.getNodeValue());
} 
```

据我所知，我的内部 xquery 什么也没找到。在节点而不是文档上调用 xquery 时，我是否必须使用不同的语法？我怀疑有一个更好的方法可以做到这一点，在一个命令中编写整个查询，但这是我第一次使用 xquery，我还没有弄清楚这一切。（指点我如何去做也很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:24:07.493

您应该能够只使用以下 XPath：

```
/List/Outer[normalize-space(CheckValue)='yes']/Inner 
```

# ios - iOS - UISearchBar 与弹出视图中的结果（使用故事板中的 UIViewController）

> ID：13867771
> 
> 赞同：1
> 
> 时间：2012-12-13T20:18:14.207
> 
> 标签：ios, delegates, uisearchbar, uipopover

我在将搜索栏文本传递给弹出视图时遇到了一些问题。流程是这样的：

1.  父视图有一个带有 uisearchbar 的工具栏
2.  父视图通过 segue 连接到另一个子类 uiviewcontroller，并将其显示为搜索栏中的弹出窗口
3.  弹出视图控制器使用表格视图来显示我想要过滤的数据（表格视图已设置并且工作正常，过滤结果的方法已设置并且工作正常）。
4.  父视图是搜索栏的代表，每次更改搜索词时都会收到文本

如何将搜索词传递给弹出框？我在父视图中设置了一个自定义委托，其方法应将搜索词传递给委托方法，但该方法未在弹出窗口中调用。

*我最好的**猜测**是我需要在某个地方指定弹出框使用我的自定义委托（即声明 ThisView.delegate = self，但这是一个问题，因为子视图是由 segue 创建的）

以下是弹出框的显示方式：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"segueSearchResults"]) {
        self.searchPopover = [(UIStoryboardPopoverSegue *)segue popoverController];
        self.searchPopover.delegate = self;//To avoid confusion, this is the popover's delegate to notify the parent view when it has closed, etc.
    }
} 
```

这是委托协议：

```
@class VideoViewController;
@protocol VideoViewDelegate <NSObject>
@required
- (void)searchTermChanged:(NSString *)value;
@end

@interface VideoViewController : UIViewController<UIScrollViewDelegate,UISearchBarDelegate,UISearchDisplayDelegate,UIPopoverControllerDelegate>{
    __weak id <VideoViewDelegate> delegate;
}
@property (nonatomic, weak) id <VideoViewDelegate> delegate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:00:41.467

Make a public method (or property) on the popover controller, and whenever the search text changes, send the new text to the popover using said method. Or you make the popover controller as the search bar's delegate.

# javascript - 在 IE8 中变换对象（仅旋转），类似于使用 CSS3 transform(rotate), transform-origin

> ID：13867775
> 
> 赞同：1
> 
> 时间：2012-12-13T20:18:25.400
> 
> 标签：javascript, internet-explorer, css, matrix, css-transforms

我正在尝试让一个应用程序在 IE8 中运行，而我一直在试图让我的 CSS 转换在 IE 中正常运行。

我可以使用以下代码计算我的角度：

```
//LEGACY IE ROTATE
var deg2radians = Math.PI * 2 / 360,
    rad = s.stone_rotation * deg2radians,
    costheta = Math.cos(rad),
    sintheta = Math.sin(rad),
    matrixValues = 'M11=' + costheta + ', M12='+ (-sintheta) +', M21='+ sintheta +', M22='+ costheta; 
```

然后我使用内联样式将 MS 过滤器设置为内联样式：

```
element.style.cssText =  "filter:progid:DXImageTransform.Microsoft.Matrix(" + matrixValues + ")"; 
```

但是，IE 不保留原点，因此可以旋转，但项目的位置不正确。我一直在研究一些插件/库...例如 sylvester 和其他一些 jQuery 插件。但我宁愿自己做这个，因为我在没有任何库的情况下构建这一切。

我只需要一些数学帮助来正确设置原点。我有每个对象的顶部/左侧/宽度/高度的变量（顶部、左侧、imgW、imgH）。

当然，CSS3 方面的一切都可以正常工作，只需使用变换原点和旋转，矩阵并不是非常困难，但我不知道如何做参考点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:48:28.723

如果您尝试将原点设置在元素的中心，则可以使用以下内容：

```
rotate = function (degrees) {

    while (degrees > 360) {
        degrees -= 360;

    }

    while (degrees < 0) {
        degrees += 360;

    }

    var matrix = element.filters.item("DXImageTransform.Microsoft.Matrix"),
        degrees = degrees,
        rad = (degrees * Math.PI) / 180,
        costheta = Math.cos(rad),
        sintheta = Math.sin(rad);

    matrix.M11 =  costheta;
    matrix.M12 = -sintheta;
    matrix.M21 =  sintheta;
    matrix.M22 =  costheta;

    rad %= Math.PI;
    if (rad > Math.PI / 2) rad = Math.PI - rad;

    costheta = Math.cos(rad),
    sintheta = Math.sin(-rad);

    element.style.top = y + Math.floor((h - h * costheta + w * sintheta) / 2) + 'px';
    element.style.left = x + Math.floor((w - w * costheta + h * sintheta) / 2) + 'px';

} 
```

它来自我自己的图书馆，并不完美，但至少对我来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T02:17:57.887

您可以使用 javascript 库来修复 IE8 及更低版本

[http://www.useragentman.com/blog/2010/03/09/cross-browser-css-transforms-even-in-ie/](http://www.useragentman.com/blog/2010/03/09/cross-browser-css-transforms-even-in-ie/)

并继续使用 CSS

```
#o1 {
    position: absolute;
    top: 25px;
    left: 25px;
    border: solid 1px black;
    position: absolute;
    width: 100px;
    height: 100px;
    padding: 10px;
    background-color: white;
    -sand-transform: rotate(45deg);
} 
```

仅使用关键字**-sand-transform**

你可以看到一个例子

[http://www.useragentman.com/tests/cssSandpaper/rotateTest.html](http://www.useragentman.com/tests/cssSandpaper/rotateTest.html)

# magento - 为以编程方式创建的优惠券代码指定操作

> ID：13867777
> 
> 赞同：2
> 
> 时间：2012-12-13T20:18:27.973
> 
> 标签：magento

基于在几篇在线帖子中找到的信息（[http://www.magentocommerce.com/boards/viewthread/178767/](http://www.magentocommerce.com/boards/viewthread/178767/)和[http://marius-strajeru.blogspot.co.uk/2010/04/create-bulk- discount-rules.html](http://marius-strajeru.blogspot.co.uk/2010/04/create-bulk-discount-rules.html)），我将一些代码放在一起以生成一些优惠券代码。

我坚持的一件事情是如何编写代码来指定优惠券使用的“动作”特定条件。这将在 Magento 管理系统中“操作”选项卡的“仅将规则应用于符合以下条件的购物车项目”部分中指定。

在 Magento 管理系统中，我将构建以下行：

类别不是 10,20,30 之一

我需要知道的是如何在代码中复制它。我目前有以下内容，但似乎不起作用 - 至少，当我检查生成的优惠券代码时，我需要的操作值丢失了。

```
 $actions = array();
    $actions[1] = array(
    'type' => 'salesrule/rule_condition_category',
    'aggregator' => 'all',
    'value' => 1,
    'new_child' => ''
    );
    $actions['1--1'] = array(
        'type' => 'salesrule/rule_condition_category',
        'attribute' => 'category_ids',
        'operator' => '!()',
        'value' => '932,341,800',
        'is_value_processed' => 0,
    );
    $model->setData('actions',$actions); 
```

我假设代码完全是错误的，尽管没有使系统跳闸。我怎样才能达到我所需要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:45:58.810

这就是我最终得到的，效果很好！

```
 $conditions = array(
            "1" => array(
                'type' => 'salesrule/rule_condition_combine',
                'aggregator' => 'all',
                'value' => 1,
                'new_child' => false
                ),
            "1--1" => array(
                'type' => 'salesrule/rule_condition_product_found',
                'value' => 1,
                'aggregator' => 'all',
                'new_child' => false
            ),
            "1--1--1" => array(
                'type' => 'salesrule/rule_condition_product',
                'attribute' => 'category_ids',
                'operator' => '!()',
                'value' => '10,20,30'
            )
        );
        $actions = array(
            "1" => array(
                    "type"          => "salesrule/rule_condition_product",
                    "aggregator"    => "all",
                    "value"         => "1",
                    "new_child"     => false
            ),
            "1--1" => array(
                    "type"          => "salesrule/rule_condition_product",
                    "attribute"     => "category_ids",
                    'operator' => '!()',
                    'value' => '10,20,30'
            )
        );

        $rule->setData('conditions',$conditions);
        $rule->setData("actions",$actions); 
```

# asp.net - 如何删除 ASP.NET Designer.cs 文件？

> ID：13867779
> 
> 赞同：3
> 
> 时间：2012-12-13T20:18:38.247
> 
> 标签：asp.net, visual-studio, partial-methods

在没有 .designer.cs 文件之前，我从事过 VS 项目。

现在我在另一台计算机上开始了一个新项目，我无法摆脱 Designer.cs 文件。这真的让我很烦。我真的需要它，我该如何删除它？一定有某个地方的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:21:43.517

您正在处理 Web 应用程序而不是网站（[澄清](https://stackoverflow.com/a/398049/621962)）

是的，在 Web 应用程序的上下文中，您*确实*需要它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-21T17:42:22.107

是的！你可以删除它们......这是如何......

如何从您的 WEB 应用程序中删除 DESIGNER.CS 页面

在经历了巨大的折磨和大量的测试之后，在 Visual Studio（v. 2015 及更早版本）中寻找避免 Designer.cs 页面的方法后，我终于找到了解决此问题的方法。**如果有人在 Visual Studio 的Web 应用程序项目**中遇到 Designer.cs 页面，此解决方案将允许您快速清除所有应用程序编译错误，然后从项目中完全删除 Designer.cs 页面。

首先了解以下内容：

**Web 应用程序项目**使用由 Visual Studio 自动生成的 Designer.cs 页面（部分类），这些页面与 Web 应用程序模型所支持的 Web 应用程序中内置的设计工具相关联。我称之为傻瓜网站。我找不到任何设置或方法来关闭部分类和 Designer.cs 页面的创建，因为它们通常是不必要的代码，更多地与 IDE 相关联，而不是应用程序的功能。无论如何，所有部分类都会编译成一个类。通常，Web 应用程序也可以通过设计提前预编译或构建，并且这些 dll 会被推送到 bin 文件夹中。

**网站项目**不使用 Designer.cs 文件，并且与 IDE 的联系较少。它们允许对类结构进行更清晰的编码。他们还使用部分类。但网站项目通常在运行时编译。

解决方案 - 如何从 Visual Studio 中的 Web 应用程序项目中删除“...designer.cs”错误和文件。

除非您想在 Visual Studio 中将 Web 项目从应用程序转换为网站模型，否则下面的此解决方案允许您按原样运行项目，但就像网站一样，您可以在其中移动大部分或全部 designer.cs 部分将该文件中的类控件引用到您的主网页部分类文件中。如果其他开发人员共享它们并向页面添加控件并且忘记在特定页面上使用此解决方案，它还可以删除所有错误并且不会干扰 Visual Studio 重新创建这些设计器文件。

1.  在前端.aspx 页面中，在顶部的@PAGE 指令中，将“CodeBehind”更改为“CodeFile”。确保它仍然引用相同的 .cs 代码或类文件。

2.  将“CodeFileBaseClass”属性添加到网页中的同一 @Page 指令中，并让它访问上述相同 .cs 的完全限定路径，路径中包含任何命名空间。

3.  确保使用与“CodeFileBaseClass”具有相同路径的“Inherit”属性。

您的 Web 应用程序中的每个网页都应该具有以下属性，这些属性的格式如下：

```
<%@ Page Language="c#" CodeFile="index.aspx.cs" CodeFileBaseClass="YourNameSpace.index" 
 Inherits="YourNameSpace.index" %> 
```

现在进入页面的designer.cs 文件，并将设计器文件中部分类中的任何控件引用复制到网页的主.cs 文件的部分类中。如果您丢失了您的 Designer.cs 文件，只需将任何 Web 控件作为字段引用添加为编译器说缺少的字段。完成后删除 Designer.cs 文件。您不需要它们，并且可以使用主 .cs 文件及其部分类来完全控制您的网页控件。

以下是我在删除之前在 Designer.cs 文件中的内容。下面是我的项目的主要 index.aspx.cs 文件，我在其部分类中添加了 Designers.cs 控件引用作为字段。然后我从我的项目中完全删除了 Designer.cs 文件及其代码：

```
namespace YourNameSpace
{
public partial class WebForm1
{

    /// <summary>
    /// form1 control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    protected global::System.Web.UI.HtmlControls.Literal Message1;
}
} 
```

在下面的 index.aspx.cs 文件中，您可以看到我将上面设计器的最后一个“Message1”参考行粘贴到顶部的部分类中的位置。您可以看到我是如何在我的 Page_Load 事件中访问网页文字控件 Message1 并修改文本的。这表明它现在被正确引用、编译和工作，如果 designer.cs 文件丢失或其部分类失败，则在此类引用失败之前：

```
namespace YourNameSpace
{
public partial class index : System.Web.UI.Page
{
    protected global::System.Web.UI.WebControls.Literal Message1;

    protected void Page_Load(object sender, EventArgs e)
    {
        this.Message1.Text = "hello world";
    }
}
} 
```

解决此问题的关键是主网页中 @Page 指令中的 CodeFileBaseClass 和 CodeFile 属性。这可以防止网页中的新成员引用和控件由 Visual Studio IE 自动生成并作为存根卡在设计器页面部分类中（当您希望在单个方便的区域中完全控制这些字段时，这对我没有帮助） .

注意：如果您稍后通过在 VS 中选择您的项目再次为您的项目重新生成 Designer.cs 文件，然后在顶部菜单中选择“项目”>“转换为 Web 应用程序”这些 Designer.cs 文件将被重新创建，但 Visual Studio 只会在其中放置对缺少的 Web 控件的引用，这些控件现在未添加到您的主 .cs 部分类页面中。换句话说，我在上面复制并添加到我的 index.aspx.cs 部分类文件的任何引用都不会在新的 Designer.cs 文件中重新创建。因此与您使用的 Web 应用程序模型没有冲突。当您看到这些设计器文件时，您现在可以让开发人员将它们安全地复制到 .cs 文件后面的主代码中，并根据需要安全地删除设计器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-27T01:38:13.263

真正的“答案”是让 MS 简单地允许您不使用它们。

# php - Python中的命理（Pitagoric）计算

> ID：13867780
> 
> 赞同：1
> 
> 时间：2012-12-13T20:18:39.067
> 
> 标签：php, python-3.x

大家！

我是 Python 新手，正在使用第 3 版。我已经在 PHP 中进行了编程，并且我已经完成了一个脚本，在该脚本中我输入了一个字符串（名称如 'John'），脚本返回与此名称关联的数字，基于来自 ASCII 表的计算。

公式为 => (ASCii 代码 - 65)%9+1。

这是我在 PHP 中的脚本：

```
<?php

$entry=strtoupper("Jack");
$value = 0;
for ($i = 0; $i < strlen($entry); $i++) {
if ($entry[$i] >= "A" && $entry[$i] <= "Z") {
    $temp = (ord($entry[$i]) - 65)%9 + 1;
    $value += $temp;
}
}
$result = $value%9;
if ($result == 0) $result = 9;
echo $result;
?> 
```

上面的结果应该是 7。

这是我在 Python 中的脚本：

```
entry = input("Type your name: ")
name = entry.upper()
value = 0

for letter in range(len(name)):
    while letter:
        temp = int(ord(name[letter])-65)%9+1
        value += temp
result = value%9
if result == 0:
    result = 9
print(result) 
```

好吧，它不起作用，因为 Python 似乎不像我在 PHP 中使用的第一个 IF 语句那样遍历字母。有谁知道我该如何解决这个问题？

提前致谢！！！上帝保佑你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:41:09.693

There are a few problems with your python code.
The biggest one is the `if` from php somehow becoming a `while`(and an infinite one) in python.

The direct translation to python would be(and it should make the code work):

```
if 'A' <= name[letter] <= 'Z': 
```

But, you should never loop through indices in python.
Instead, loop directly over the values you want to work with.

Instead of:

```
for i in range(len(some_list)):
    # do stuff with some_list[i] 
```

You should do:

```
for item in some_list:
    # do stuf with item 
```

* * *

**Edit:**

This is how the loop would look written in a more pythonic way:

```
for letter in name:
    if 'A' <= letter <= 'Z':
        value += (ord(letter) - 65) % 9 + 1 
```

Also, you can see here that the `int()` call and the `temp` variable are not really needed.

# image - 使用 image() 或 rasterImage() 在 R 中叠加红/绿图像

> ID：13867782
> 
> 赞同：1
> 
> 时间：2012-12-13T20:18:50.907
> 
> 标签：image, r, graphics

为了突出两个相同大小的矩阵之间的差异，我想以半透明的方式显示这两个矩阵，其中一个矩阵使用红色阴影，另一个矩阵使用绿色阴影（在它们相同的情况下产生黄色）。

只显示一个矩阵，我有

```
library(grDevices)
matr=replicate(10, rnorm(20,mean=0.5,sd=0.1))    
colpalette=colorRampPalette(c("black", "red")) 
image(matr^0.2,col = colpalette(1000),useRaster=T) 
```

有谁知道我应该如何调整它以显示两个矩阵`matr1`并`matr2`以红色/绿色叠加？

此外，对结果图像的亮度和对比度进行一些控制的最佳方法是什么？有没有比我现在使用的功率变换更好的方法？

干杯，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:15:31.493

Ha 刚刚找到了一个简单的解决方案，首先计算两个矩阵之间的 log2（差异），然后使用中断为零的调色板绘制它。这是有道理的，对吧？

```
library(grDevices)
matr1=replicate(10, rnorm(20,mean=0.5,sd=0.1)) 
matr2=replicate(10, rnorm(20,mean=0.5,sd=0.1))
matrdiff=log2(matr1/matr2)
nbcolors=1000
colpalette=colorRampPalette(c("red","yellow","green"))(nbcolors)
breaks = c(seq(min(matrdiff), 0, length.out=nbcolors/2), 0, 
           seq(0,max(matrdiff), length.out=nbcolors/2))
image(matrdiff,col=colpalette,breaks=breaks,useRaster=T) 
```

# wpf - 更改 BasedOn ControlTemplate 内的边框背景

> ID：13867784
> 
> 赞同：1
> 
> 时间：2012-12-13T20:19:01.150
> 
> 标签：wpf, xaml, controltemplate

这是我的应用程序资源中的 XAML，它将应用程序中的所有 Button 控件全局更改为我想要的外观和行为：

```
<Style TargetType="{x:Type Button}" x:Key="MyButtonStyle">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border x:Name="Border" CornerRadius="0" BorderThickness="0" 
                            Background="CornflowerBlue" BorderBrush="CornflowerBlue">
                    <ContentPresenter Margin="2" HorizontalAlignment="Center" VerticalAlignment="Center" RecognizesAccessKey="True" />
                </Border>
                <ControlTemplate.Triggers>
                    <!-- a bunch o' triggers here -->
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

在我的应用程序的一个用户控件上，我想更改此按钮的一些属性。这是我现在在 UserControl.Resources 部分中使用的一些 XAML 来执行此操作：

```
<Style x:Key="SpecialButton" TargetType="Button" BasedOn="{StaticResource MyButtonStyle}">
    <Setter Property="Width" Value="20" />
    <Setter Property="Visibility" Value="Collapsed" />
    <Setter Property="Content" Value=">" />
    <Setter Property="Border" Value="#eeeeee" />
    <Setter Property="Border.Background" Value="#eeeeee" />
</Style> 
```

我的 UserControl 上分配 SpecialButton 样式的 Button 控件具有正确的宽度、可见性和内容，但最后两次尝试不起作用。我将如何从这种特殊按钮样式的应用程序资源中更改名称为“边框”的边框的背景颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:25:33.567

您可以做的是使用`TemplateBinding`在基本样式中设置控件的背景属性。同样在基本样式中，将背景颜色设置为默认的“CornflowerBlue”。

```
<Setter Property="Background" Value="CornflowerBlue" />
<Setter Property="Template">
    <Setter.Value>    
        <ControlTemplate TargetType="{x:Type Button}">
            <Border x:Name="Border" Background="{TemplateBinding Background}" 
```

现在您可以覆盖派生样式中的背景：

```
<Style x:Key="SpecialButton" TargetType="Button" BasedOn="{StaticResource MyButtonStyle}">
    <Setter Property="Background" Value="#eeeeee" /> 
```

* * *

[（请注意，如果您想使用未在 Button 控件上定义的其他属性 - 或者说您想使用多种背景颜色 - 那么您必须创建自己的控件来继承`Button`，并公开新属性作为依赖属性。）]

# php - 关于 PHP array_diff() 函数的使用？

> ID：13867788
> 
> 赞同：0
> 
> 时间：2012-12-13T20:19:05.907
> 
> 标签：php, array-difference

当我使用 array_diff() 函数时；`$result = array_diff($array1, $array2);`

它变成了；数组（[5] => XXXXXX）

但我不想显示“数组（“这里的索引”）”，只有 XXXXX 部分。我怎样才能只显示 XXXXX？感谢每一个评论...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:22:10.117

获取第一个不同的元素- 或*-* `NULL`如果没有差异。

```
list($result) = array_values(array_diff($array1, $array2)) + [NULL]; 
```

你可以做：

```
var_dump($result); 
```

请参阅[演示](http://eval.in/4565)。

要输出您可以执行的值：

```
foreach($result as $value){
    echo $value;
} 
```

# android - 如何在网站中为不同的移动运营商添加本地语言支持？

> ID：13867793
> 
> 赞同：0
> 
> 时间：2012-12-13T20:19:20.247
> 
> 标签：android, mobile, windows-mobile, transliteration, hindi

在 Internet Explorer 等 Web 浏览器中显示本地语言支持（印地语、孟加拉语、乌尔都语等）已经非常困难。但是我们如何在Opera mini、windows浏览器等移动浏览器中提供支持呢？如果没有可能的方法，那么有什么可能的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:10:16.427

对于 android ，当您谈论语言时，相同的 html 应该在桌面网络浏览器上工作。

但是，无论设备的屏幕是什么，您可能希望支持多个屏幕以使其看起来很好：

[http://developer.android.com/guide/webapps/overview.html](http://developer.android.com/guide/webapps/overview.html)

并阅读一些不错的提示：

[http://developer.android.com/guide/webapps/best-practices.html](http://developer.android.com/guide/webapps/best-practices.html)

我认为对于 windows phone 和 iphone 也是如此。所有人都对语言有相同的标准。

# entity-framework - 返回空的 IQueryable<>

> ID：13867794
> 
> 赞同：30
> 
> 时间：2012-12-13T20:19:33.867
> 
> 标签：entity-framework

我有这种方法试图获取事物列表：

```
 private static IQueryable<Thing> GetThings(int thingsType)
        {
                try
                {
                    return from thing in entities.thing.Include("thingStuff")
                           select thing;
                }
                catch (Exception exception)
                {
                    return new EnumerableQuery<Thing>(?????);
                }
            }

        } 
```

如果出于某种原因我无法运行查询，我想返回一个空的 IQueryable。我不想返回 NULL，因为这可能会破坏调用代码。这有可能还是我完全错了？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-08-06T13:12:37.263

这些答案很好并且确实有效，但是我一直觉得使用 Empty 而不是创建新 List 更清洁：

```
Enumerable.Empty<Thing>().AsQueryable(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T20:23:12.690

尝试以下操作：

```
private static IQueryable<Thing> GetThings(int thingsType)
    {
            IQueryable<Thing> things = new List<Thing>().AsQueryable();
            try
            {
                things = from thing in entities.thing.Include("thingStuff")
                       select thing;

                return things;
            }
            catch (Exception exception)
            {
                return things;
            }
        } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-13T20:23:32.503

我会添加块`finally {}`并将我的返回类型放入该代码中。

这将通过返回您的应用程序期望的类型来解决这个问题。

```
private static IQueryable<T> GetThings(int thingsType)
    {
            IQueryable<T> list = new List<Thing>().AsQueryable();
            try
            {
                list = from thing in entities.thing.Include("thingStuff")
                       select t;
            }
            catch (Exception exception)
            {
               // handle exception here;
            }
            finally {    
              return list;
            }

        }

    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-02T15:56:08.660

> 返回空的 IQueryable<> DbSet.Take(0)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-07T10:00:27.213

我认为这会更整洁：

```
private static IQueryable<T> GetThings(int thingsType)
{
    try
    {
        return from thing in entities.thing.Include("thingStuff")
                   select t;
    }
    catch (Exception exception)
    {
       // Exception handling code goes here

       return new List<Thing>().AsQueryable();
    }
} 
```

# java - 使用 Java 库获取 IRC 用户的 IP 地址

> ID：13867795
> 
> 赞同：0
> 
> 时间：2012-12-13T20:19:33.613
> 
> 标签：java, ip-address, irc

是否有任何可用于 Java 的 IRC 库可以让我获取用户的 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:21:09.067

更重要的是，IRC 协议不允许您查看其他用户的 IP 地址，所以，不，没有。:)

# ruby-on-rails - rails-在我的视图中显示另一个应用程序目录中的图像

> ID：13867799
> 
> 赞同：0
> 
> 时间：2012-12-13T20:19:39.873
> 
> 标签：ruby-on-rails, image, file

我设置了一些 Rails 应用程序 - 一个用于管理员，另一个用于注册。

管理应用程序有一个照片文件夹“adminapp/u_photos/photo_browse/photos”

在注册方面，我有一个公共表单，它通过 ruby​​ 的“查找”gem 和一个找到它们的控制器操作来显示该目录的内容。

当用户在注册表单上单击“浏览图像”时，会弹出一个模式并允许他们搜索图像，返回所有匹配的文件（文件列表）。

如何在文件名旁边显示图像的缩略图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:02:26.737

我在搜索时找到了答案：

[Rails 3，显示来自 RAILS_ROOT 上方本地文件系统的 jpg 图像](https://stackoverflow.com/questions/11959203/rails-3-displaying-jpg-images-from-the-local-file-system-above-rails-root)

这完美地工作，并描述了我需要的东西，即在一页上显示多个图像。

# javascript - 在函数完成之前触发 Javascript 回调（无 jQuery）

> ID：13867806
> 
> 赞同：1
> 
> 时间：2012-12-13T20:20:11.980
> 
> 标签：javascript, ajax, callback

我有 2 个 javascript 函数，第一个是加载 ajax 内容的函数（通过另一个函数），第二个是回调函数。他们看起来像：

```
function createReply(callBack){
    ajaxPage('test.html', 'next-reply');
    callBack();
}

function updateNext(){
    document.getElementById('next-reply').id  = "reply-item";
}

createReply(updateNext); 
```

如您所见，我正在调用该`createReply()`函数并将回调函数的名称传递给它，在这种情况下`updateNext()`

在`createReply()`函数中，我正在调用另一个通过 ajax 加载内容的函数。当这个函数完成时，回调应该被执行。回调会更改正在加载 ajax 内容的 div 的 id。这就是问题发生的地方

我收到错误消息：

```
Uncaught TypeError: Cannot set property 'innerHTML' of null 
```

也就是说，它不能更改 id 为“ *next-reply* ”的元素的内容，因为它不存在，而它不存在的原因是因为回调函数更改了该元素的 id。目的是在加载 ajax 内容后触发回调（即，在`ajaxPage()`函数执行后）

任何人都可以看到问题是什么？有没有更好的方法在纯 javascript 中实现回调函数？

**PS：没有 jQuery**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:57:41.220

正如评论中所指出的，这是因为 AJAX 调用是异步发生的。在服务器返回响应之前，运行的线程会`createReply`继续运行。

您需要重构`ajaxPage`以接受对 的引用`callback`，并在响应准备好时调用它。就像是：

```
function createReply(callBack){
    ajaxPage('test.html', 'next-reply', callBack);
} 
```

然后，在 ajaxPage 中：

```
function ajaxPage(url, id, callback){
   //Do AJAX stuff

   //When the response is returned:
   if(callback) callback();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:31:20.147

现在你的回调是在 ajaxPage 函数之后执行的。我的意思是你不要等待 ajaxPage 返回成功。它在 ajax 调用结束后立即被触发。在您的回调被触发之前，它很可能没有完成。

# php - 在 PHP 中将空的 $_REQUEST 参数转换为整数

> ID：13867807
> 
> 赞同：0
> 
> 时间：2012-12-13T20:20:13.453
> 
> 标签：php, wordpress

我正在尝试对 wordpress 插件进行逆向工程，但我很难理解**另**一段代码。

该插件是：[http ://wordpress.org/extend/plugins/wordpress-social-login/](http://wordpress.org/extend/plugins/wordpress-social-login/)

这次我有以下几行：

```
$wslp = @ (int) $_REQUEST["wslp"];

if( $wslp < 1 || $wslp > 6 ){
    $wslp = 1;
} 
```

我担心的是，未设置参数`$wslp`时等于什么`wslp`（==`$_request`未设置时）

下一行按此编号获取一页，因此它不能只是空的或`null`...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:23:46.293

*   `@`用于抑制 PHP 警告。

*   使用时`(int)`，任何不能转换为整数的东西都会变成`0`.

因此，当`$_REQUEST`不包含 key时`wslp`，`$_REQUEST["wslp"]`返回`NULL`（带有*未定义的偏移*警告）并`(int) NULL`yield `0`。

# 编辑

从查询字符串中获取值、将其转换为所需类型、验证它并回退默认值（例如，当值丢失或无效时）的更好方法是使用 PHP[`filter_input`](http://php.net/manual/en/function.filter-input.php)函数：

```
$wslp = filter_input(INPUT_GET, "wslp", FILTER_VALIDATE_INT, array(
    "options" => array(
        "default" => 1,
        "min_range" => 1,
        "max_range" => 6
    )
)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:22:28.680

它变为零。

```
(int) undefined === 0 
```

[演示](http://codepad.org/EMBAK5Qq)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:24:55.873

`$wslp`被[强制转换为整数](http://php.net/manual/en/language.types.integer.php#language.types.integer.casting)。该`@`语句隐藏数组中不存在`"wslp"`的条目的任何通知/警告。`$_REQUEST`

# python - Noughts 和 crosss python 画板

> ID：13867808
> 
> 赞同：2
> 
> 时间：2012-12-13T20:20:19.583
> 
> 标签：python, python-3.x

我刚刚开始自学python 3.2（或尝试）。我认为我具备所有基础知识，所以我决定尝试构建很多人告诉我的最容易上手的游戏，0 和 X。我正在尝试使用列表列表绘制板，我想使用变量 N 将传递给方法以确定板 N * N 的大小。

我到处搜索如何做到这一点，但我能找到的只是那些用一组行和列的值对其进行编码的人。我想让它变得可变，这样我就可以继续并重用我的代码来尝试跳棋，也许还有国际象棋。

请有人帮助我，将不胜感激。

谢谢，戴夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:25:06.080

在 Python 中有更简洁的写法，但对于新手来说这可能是最容易理解的：

```
N=3
tictac = []

for i in range(N):
    row = []
    for i in range(N):
        row.append('O')
    tictac.append(row)

for row in tictac:
    print row 
```

# c - 如何从 C 中使用 MPI_Scatter 和 MPI_Gather？

> ID：13867809
> 
> 赞同：28
> 
> 时间：2012-12-13T20:20:28.013
> 
> 标签：c, parallel-processing, mpi, distributed-computing

到目前为止，我的应用程序正在读取一个包含整数列表的 txt 文件。这些整数需要由主进程（即等级为 0 的处理器）存储在一个数组中。这工作正常。

现在，当我运行程序时，我有一个 if 语句检查它是否是主进程，如果是，我正在执行`MPI_Scatter`命令。

据我了解，这将用数字细分数组并将其传递给从属进程，即所有 rank > 0 。但是，我不确定如何处理`MPI_Scatter`. 从进程如何“订阅”获取子数组？如何告诉非主进程对子阵列做某事？

有人可以提供一个简单的示例，向我展示主进程如何从数组中发送元素，然后让从属进程将总和返回给主进程，主进程将所有总和加在一起并打印出来？

到目前为止我的代码：

```
#include <stdio.h>
#include <mpi.h>

//A pointer to the file to read in.
FILE *fr;

int main(int argc, char *argv[]) {

int rank,size,n,number_read;
char line[80];
int numbers[30];
int buffer[30];

MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

fr = fopen ("int_data.txt","rt"); //We open the file to be read.

if(rank ==0){
printf("my rank = %d\n",rank);

//Reads in the flat file of integers  and stores it in the array 'numbers' of type int.
n=0;
while(fgets(line,80,fr) != NULL) {
  sscanf(line, "%d", &number_read);
  numbers[n] = number_read;
  printf("I am processor no. %d --> At element %d we have number: %d\n",rank,n,numbers[n]);
  n++;
}

fclose(fr);

MPI_Scatter(&numbers,2,MPI_INT,&buffer,2,MPI_INT,rank,MPI_COMM_WORLD);

}
else {
MPI_Gather ( &buffer, 2, MPI_INT, &numbers, 2, MPI_INT, 0, MPI_COMM_WORLD); 
printf("%d",buffer[0]);
}
MPI_Finalize();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-13T20:53:17.707

这是对 MPI 中的操作如何与刚接触它的人一起工作的常见误解；特别是在集体操作中，人们尝试`MPI_Bcast`从 0 级开始使用广播（），期望调用以某种方式将数据“推送”到其他处理器。但这并不是 MPI 例程的真正工作方式。大多数 MPI 通信需要发送方和接收方都进行 MPI 调用。

特别是，`MPI_Scatter()`和`MPI_Gather()`（和`MPI_Bcast`，以及许多其他）是*集体*操作；它们必须被通信器中的*所有*任务调用。通信器中的所有处理器都进行相同的调用，然后执行操作。（这就是为什么scatter和gather都需要“根”过程作为参数之一，所有数据都来自/来自哪里）。通过这种方式，MPI 实现有很大的空间来优化通信模式。

所以这是一个简单的例子（**更新**包括收集）：

```
#include <mpi.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
    int size, rank;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    int *globaldata=NULL;
    int localdata;

    if (rank == 0) {
        globaldata = malloc(size * sizeof(int) );
        for (int i=0; i<size; i++)
            globaldata[i] = 2*i+1;

        printf("Processor %d has data: ", rank);
        for (int i=0; i<size; i++)
            printf("%d ", globaldata[i]);
        printf("\n");
    }

    MPI_Scatter(globaldata, 1, MPI_INT, &localdata, 1, MPI_INT, 0, MPI_COMM_WORLD);

    printf("Processor %d has data %d\n", rank, localdata);
    localdata *= 2;
    printf("Processor %d doubling the data, now has %d\n", rank, localdata);

    MPI_Gather(&localdata, 1, MPI_INT, globaldata, 1, MPI_INT, 0, MPI_COMM_WORLD);

    if (rank == 0) {
        printf("Processor %d has data: ", rank);
        for (int i=0; i<size; i++)
            printf("%d ", globaldata[i]);
        printf("\n");
    }

    if (rank == 0)
        free(globaldata);

    MPI_Finalize();
    return 0;
} 
```

运行它给出：

```
gpc-f103n084-$ mpicc -o scatter-gather scatter-gather.c -std=c99
gpc-f103n084-$ mpirun -np 4 ./scatter-gather
Processor 0 has data: 1 3 5 7 
Processor 0 has data 1
Processor 0 doubling the data, now has 2
Processor 3 has data 7
Processor 3 doubling the data, now has 14
Processor 2 has data 5
Processor 2 doubling the data, now has 10
Processor 1 has data 3
Processor 1 doubling the data, now has 6
Processor 0 has data: 2 6 10 14 
```

# php - Mysql选择位置和顺序

> ID：13867813
> 
> 赞同：0
> 
> 时间：2012-12-13T20:20:51.330
> 
> 标签：php, mysql, database, syntax

我有一个积分系统，就像人们可以升级到 [PRO1] 用户一样。每个人的权限（pro1、pro2、user）都存储在我的 mysql 用户表中。但我想做一个小提要，显示升级到 [PRO1] 的最新提要。升级代码：

```
 $insert = "UPDATE `users` SET `points` = (`points`-50) WHERE `username` = '".$username."' and points > 50";
mysql_query($insert);
if (mysql_affected_rows() > 0)
{

    // other codes

  $insert =  "UPDATE users SET rights=' [PRO1]' WHERE `username` = '".$username."'";
    mysql_query($insert); 
header('location: succesupgrade.php');
}else{
    echo "You don't have enough points";
}

?> 
```

升级代码工作正常（以防我需要添加时间/日期。我希望“'用户名'最后升级到 [PRO1]”的代码在此代码中：

```
 <?php
require("dbc.php");  
$query = mysql_query("select * from users WHERE rights='[PRO1]' order by right DESC limit 1") or die(mysql_error());

while($array = mysql_fetch_array($query)) {
    echo "{$array['username']}<br>";
}
?>was the last to upgrade to:
<?php
require("dbc.php");  
$query = mysql_query("select * from users WHERE rights='[PRO1]' order by rights DESC limit 1") or die(mysql_error());

while($array = mysql_fetch_array($query)) {
    echo "{$array['rights']}<br>";
}
?> 
```

但是该代码给了我这个错误：`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DESC limit 1' at line 1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:25:41.633

`order by right`必须`order by rights`在第二个代码块的第一个查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:27:16.957

该查询不会告诉您最后升级到的用户是谁`rights='[PRO1]'`。那只是一个字符串字段。您需要某种在用户权限更改时更新的日期时间/时间戳字段，您可以通过它进行排序。

您也不需要进行 2 次查询。您有两个查询在做完全相同的事情。

做就是了：

```
SELECT username FROM users WHERE rights='[PRO1]' ORDER BY update_timestamp DESC LIMIT 1 
```

`update_timestamp`权限更改时更新的字段在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:23:14.893

原因是因为`right`是一个使用过的关键字，你需要一个回击来解决这个问题:;

喜欢 ：

```
select * from `users` WHERE rights='[PRO1]' order by `rights` DESC limit 1 
```

# android - 文本与 EditText 中的 ImageSpan 混淆

> ID：13867815
> 
> 赞同：8
> 
> 时间：2012-12-13T20:21:02.910
> 
> 标签：android, android-edittext, spannablestring, spannable

我正在构建一个简单的聊天应用程序，用户可以在其中发送文本和表情符号。我可以将文本和表情符号发送到另一部手机。我的问题是：

**1.当我输入一些东西并添加一个表情时：**

![在此处输入图像描述](../Images/4ef9bd7b1482b46ab39e8b9e1af1fa34.png)

然后我不能在图像之前和之后输入任何文本。我可以写在“o”字母之前。系统“看到”了我输入的内容，因此即使我在笑脸后输入“Honey”，我也看不到它，但 EditText 会注册它并发送消息：

![在此处输入图像描述](../Images/6f9c0c00f1bbf5badafa8f50f3df46f3.png)

**2.当我只在Edittext中添加一个表情然后我删除它时**，我无法输入任何内容，因为删除的表情出现了。它只出现一次，所以无论我输入多少个字符，EditText 看起来就像我删除表情符号之前一样，但是文本是在没有表情符号的情况下发送的，就像在所有三种情况下一样。

**3.当我在 EditText 中输入“something”然后在“some”之后插入一个表情符号：**

![在此处输入图像描述](../Images/5427a38ab5b65f83cae6ac1d8dfa7d03.png)

然后我把光标放在表情符号后面并删除它，剩下的就是：

![在此处输入图像描述](../Images/13d235877367f5818f642671f54a2fd5.png)

但是当我按下发送按钮时会发送正确的消息：

![在此处输入图像描述](../Images/e007c6345748e6b9af0058f62badf710.png)

这就是表情的按钮侦听器内部的内容（当我单击表情将其添加到 EditText 时，此方法被激活）。

```
ib_happy.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        int cursorPosition = mOutEditText.getSelectionStart();
            mOutEditText.getText().insert(cursorPosition, smileys[0]);
        SpannableStringBuilder ssb = new SpannableStringBuilder(mOutEditText.getText());
        ssb.setSpan(new ImageSpan(bitmapArray.get(0), ImageSpan.ALIGN_BASELINE), cursorPosition,  cursorPosition+2, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
        mOutEditText.setText(ssb, BufferType.SPANNABLE);
            mOutEditText.setSelection(cursorPosition+2);
        dialog_emoticon.dismiss();
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T16:22:30.143

我找到了解决方案。我所要做的就是 `Spannable.SPAN_INCLUSIVE_INCLUSIVE`改变`Spannable.SPAN_EXCLUSIVE_EXCLUSIVE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:40:26.633

我会在该edittext中添加一个textwatcher并在用户输入时观看，这样我就可以重新定位图像/设置文本/进行更正/验证输入/等。

```
editText.addTextChangedListener(textWatcher);

textWatcher = new TextWatcher() {
    public void afterTextChanged(Editable s) {
        //editText.doStuffHere
        //reposition your image/etc.
    }
    public void beforeTextChanged(CharSequence s, int start, int count, int after) { }
    public void onTextChanged(CharSequence s, int start, int before, int count) { }
}; 
```

# asp.net - 在 webconfig asp.net 和站点地图中配置角色

> ID：13867823
> 
> 赞同：1
> 
> 时间：2012-12-13T20:21:39.663
> 
> 标签：asp.net, sitemap, roles

我的站点地图与角色执行有关。让我一步一步解释。登录用户 A 具有 RoleXYZ。在 myFolder 中，我有两个资源：file1、file2。我对此部分的 web.config 配置：

```
<location path="myFolder">
  <system.web>
   <authorization>
    <allow roles="RoleXYZ, RoleABC" />
    <deny users="*" />
   </authorization>
 </system.web>
</location> 
```

我的站点地图：

```
<siteMapNode title="$Resources:Web.sitemap, Home" url="~/Home.aspx">    
   <siteMapNode title="Process"  roles="RoleXYZ, RoleABC">
      <siteMapNode title="Add Customers" url="~/myFolder/file1.aspx" roles="RoleXYZ"> </siteMapNode>
      <siteMapNode title="Add Partners" url="~/myFolder/file2.aspx" roles="RoleABC"> </siteMapNode>
   </siteMapNode>
   <siteMapNode title="ContactUs" url="~/ContactUs.aspx"></siteMapNode>
 </siteMapNode> 
```

由于 UserA 只有一个角色 RoleXYZ，通常他不会看到 siteMapNode（添加合作伙伴）。

任何想法，问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:53:11.703

“角色”属性只能用于扩大对某个 siteMapNode 的可见性，而不是对其进行限制。MSDN 文档对此充其量是误导性的。

另外，请记住您的配置将不安全：角色 RoleXYZ 和 RoleABC 的用户都可以通过在浏览器中键入他们的地址来访问这两个页面。您应该限制对 Web.config 中各个页面的访问，而不是尝试使用“角色”属性。

# shell - 排序命令未按预期工作

> ID：13867826
> 
> 赞同：4
> 
> 时间：2012-12-13T20:21:53.127
> 
> 标签：shell

我有一个非常简单的 3 个字段的文本文件，每个字段用空格分隔，如下所示：

```
123 15 0
123 14 0
345 12 0
345 11 0

```

我发出了一个排序命令，按第一列排序：`sort -k 1 myfile`. 但它不仅仅按第一列排序。它按整行排序，我得到以下结果：

```
123 14 0
123 15 0
345 11 0
345 12 0

```

我的命令或文件有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:47:42.353

你需要使用：

```
sort -k 1,1 -s myfile 
```

如果您只想对第一个字段进行排序。此语法指定排序的开始和结束字段。`sort -k 1`表示从第一个字段开始到行尾进行排序。为确保行在排序键相同的输入中保持相同的顺序，您需要使用带有`-s`标志 (GNU) 的稳定排序。

从`sort(1)`手册页看到这个：

```
KEYDEF is F[.C][OPTS][,F[.C][OPTS]] for start and stop position, where
F is a field number and C a character position in the field; both are
origin 1, and the stop position defaults to the line's end. 
```

和[信息页面](http://www.gnu.org/software/coreutils/manual/html_node/sort-invocation.html)：

```
The --stable (-s) option disables this last-resort comparison so that
lines in which all fields compare equal are left in their original relative
order. 
```

# javascript - Javascript 常量设置变量

> ID：13867827
> 
> 赞同：2
> 
> 时间：2012-12-13T20:21:51.053
> 
> 标签：javascript, jquery

运行此代码时，首先使用构造函数传入的任何值都将`Test(callbacks)`成为始终调用的回调，即使在以后的实例化中也是如此`Test`

```
function Test(callbacks) {
    if (callbacks) {
        if (callbacks.callback) {
            this.callback = callbacks.callback;
        }
    }

    this.options.complete = $.proxy(this.options.complete, this);
}

Test.prototype = {
    options: {
        type: "GET",
        complete: function() {
            this.callback();
        }
    },
    callback: function() { console.log("OVERRIDE ME"); },

    execute: function() {
        $.ajax(this.options);
    }
};

var eins = {callback: function() {console.log("AAA");}};
var zwei = {callback: function() {console.log("BBB");}};

var A = new Test(eins);
var B = new Test(zwei);

A.execute();
B.execute(); 
```

运行这段代码，每次你都会得到输出`AAA`。如何`function() {console.log("AAA");}`成为原型的常量值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:27:49.703

一切都从这一行开始：

```
this.callback = callbacks.callback; 
```

当你打电话`new Test(eins)`时，作为参数`eins`进来。`callbacks`然后，该行将`this.callback`（即新的 Test 实例上的“回调”属性）设置为 的回调属性`callbacks`，即。的`eins`。

现在，仅此一项不会影响 B。但是，有一些棘手的问题：

```
this.options.complete = $.proxy(this.options.complete, this); 
```

您会认为这会在您的测试实例上设置“选项”属性，对吧？错误的。Javascript 的工作方式是，如果您的实例上没有定义属性（例如，您没有定义`this.options = something`），那么 Javascript 将查找“原型链”，它会在其中找到原型的“选项”，并设置它（不是您的实例的“选项”，因为您的实例没有）。

您可以通过将该行更改为：

```
this.options = {complete: $.proxy(this.options.complete, this)}; 
```

但当然这会失去你`type: "GET",`，所以你需要这样做：

```
this.options = {type: "GET", complete: $.proxy(this.options.complete, this)}; 
```

或者您需要基于原型的选项：

```
this.options = {};
for (var key in this.prototype.options) {
    this.options[key] = this.prototype.options[key];
}
this.options.complete = $.proxy(this.options.complete, this); 
```

如果你碰巧在使用（优秀的）Underscore 库，它甚至有一个`extend`功能可以更轻松地完成这类事情：

```
this.options = _.extend({}, this.prototype.options,
                        {complete: $.proxy(this.options.complete, this)}); 
```

或者（取决于您的风格偏好）：

```
this.options = _.extend({}, this.prototype.options);
this.options.complete = $.proxy(this.options.complete, this); 
```

顺便说一句，Underscore 也有一个`_.bind`可以与 jQuery 的“代理”相媲美的方法，所以你也可以这样做：

```
this.options = _.extend({}, this.prototype.options);
this.options.complete = _.bind(this.options.complete, this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:27:39.980

当你这样做

```
 this.options.complete = $.proxy(this.options.complete, this); 
```

您将`options.complete`原型的功能替换为始终具有`this`上下文的功能。

问题是您没有`this.options`适合的对象`this`，但只有一个与具有相同原型的所有对象共享。

# c# - “To” vs “As” vs “Get” 方法前缀

> ID：13867829
> 
> 赞同：19
> 
> 时间：2012-12-13T20:22:07.913
> 
> 标签：c#, .net, vb.net

有谁知道任何命名约定规则/指南规定何时使用“To”前缀（`myVariable.ToList()`）、“As”前缀（`myVariable.AsEnumerable()`）或“Get”前缀（`myVariable.GetHashCode()`）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T20:29:07.427

我认为没有约定，所以只需使用最适合您正在做的事情。

*   “To”创造新事物/转换它
*   “作为”只​​是通过使用对同一 fe 的“不同视图”[`iterators`](http://msdn.microsoft.com/en-us/library/vstudio/dscyy5s0.aspx)
*   “Get”是其他一切的吸气剂

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:53:41.907

我的理解/约定：

"To" 执行转换；基于源中固有的数据在内存中创建一个新对象。

"As" 进行强制转换；传入的相同引用在不同类型的“掩码”后面返回。

“获取”几乎可以执行任何其他接收源并且其主要产品是转换结果的东西。Gets 可以执行计算、返回子项、从存储中检索数据、从默认状态实例化对象等。并非所有此类方法都必须命名为“Get”，但大多数方法旨在计算、实例化、投影或其他转换，然后返回产品，因为它们的主要目的是“吸气剂”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:29:20.937

1.  当`myObj`与 不相关时`List`，前缀“To”进行转换。
2.  何时`myObj`是 的子类`Enumerable`，前缀“As”以将其作为 Enumerable
3.  什么时候`myObj`不相关`List`，但它组成/可以组成`List`使用“Get”前缀

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:40:18.580

I would say that `To` vs `As` has more to do with differences like `class` vs `interface`

i e you are saying `AsEnumerable` when you really want to return something that implements interface.

`ToList` on opposite returns new object which is representation of current state of current object, ie `ToDictionary` just another way of representing same data.

Third ones `Get` methods returns some properties of the object OR something about part of it's state and not the full state.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T20:26:10.163

如果您在数据库上使用 Entity Framework 进行 CRUD 操作，那么使用 .ToList() 将使您的查询在此处执行，而不是使用 AsEnumerable() ，后者将使用延迟执行，直到您实际尝试访问记录。

那是我从头顶上想到的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T20:27:09.260

`As`是对现有数据的重新解释。`AsEnumerable`什么也没做。它被实现为`return input;`.

`To`意味着转换。

`Get`并不暗示任何前者。

您*会*发现与这些规则的有效偏差。它们不是一成不变的。

# validation - Grails：约束：数据库允许空值，但表单不能为空

> ID：13867831
> 
> 赞同：2
> 
> 时间：2012-12-13T20:22:19.663
> 
> 标签：validation, grails, grails-orm, nullable

我有一个名为 OurCompany 的域对象，我希望能够故意插入一行大部分都是空值。但是，当用户填写表格时，我想验证它并且不允许空白。

```
class OurCompany {

    static constraints = {        
        enterpriseName blank:false, nullable:true
    }

    String enterpriseName

    static belongsTo = [measurement:Measurement]

} 
```

当我在数据库中创建空行时，我关闭了验证，它工作正常。

```
ourCompany = new OurCompany();
measurement.addToOurCompany(ourCompany).save(validate:false); 
```

稍后，当我更新该行时，验证被忽略并且记录保存，即使有一个空/空白值。

```
def ourCompany = loadOrCreateOurCompany();
def industrySectors = loadIndustrySectors();

bindData (ourCompany, params)

ourCompany.validate()
if (ourCompany.hasErrors()) {
    ourCompany.errors.allErrors.each {
        println(it)
    }
} else {            
    ourCompany.save();
} 
```

如何告诉 grails 我希望 DATABASE 接受空值，但在验证时不允许空值或空白？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:54:13.043

这就是[命令对象](http://grails.org/doc/2.1.0/guide/single.html#commandObjects)的用途

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:31:00.107

解决方案（到目前为止）真的很难看。似乎没有办法使 grails 域属性既可以为空又具有约束。唯一的方法是使用命令对象进行验证。在我看来，这确实是一个非常痛苦的解决方案，也是一个相当不雅、记录不充分的方法。这是我最不愉快的 grails 经历。

# android - PhoneGap / Cordova javascript 调用是否需要 CordovaWebView 或 DroidGap？

> ID：13867832
> 
> 赞同：1
> 
> 时间：2012-12-13T20:22:21.770
> 
> 标签：android, cordova

可以从普通调用 PhoneGap javascript 函数`WebView`吗？

以下代码似乎不足以让我的 html 页面调用 PhoneGap 函数。当我的应用程序使用 时，我的函数调用失败`WebView`，但当我的应用程序使用`extends DroidGap`.

```
 <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:38:36.860

是的，可以从普通的 WebView 调用 javascript 函数。为此，您需要编写自己的 avaScriptInterface。请点击以下链接获取示例

[http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html](http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html)

但是，我确信您不能使用此方法使用 PhoneGap 功能。如果您正在寻找基于 phonegap 的解决方案，那么您必须从 DroidGap 活动扩展您的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:15:28.873

无法从普通 Web 视图调用 PhoneGap 函数。您显示的代码来自新 PhoneGap 项目的初始项目模板 - 初始化函数设置由 ondeviceready 事件触发的事件处理程序。ondeviceready 事件特定于 PhoneGap 应用程序。它不存在于普通的 Web 视图中。PhoneGap API 功能将不起作用 - 您只能使用系统 Web 浏览器支持的 JavaScript API。

# python - Python 应用程序在 RHEL 服务器上执行“yum update”后显着减慢并使用 100% CPU

> ID：13867837
> 
> 赞同：0
> 
> 时间：2012-12-13T20:22:39.337
> 
> 标签：python, linux, performance, centos

用 Python 构建的处理应用程序是 RabbitMQ 消息的侦听器，并将消息转换为另一个 JSON 消息并将其重新发布到另一个交换。它曾经每分钟处理超过 10,000 条消息。服务器更新后，它现在每分钟只处理 40-50 条消息，并且正在使用 100% 的 CPU。

我最近更新了所有运行 'yum update' 的 CentOS6 服务器，并将我们的一些软件包如 Java 升级到 1.7.0_09。从那时起，python 应用程序变得非常缓慢。我们为 Java 中的一个处理器重建了相同的功能进行测试，它的运行速度超过 10,000 / 分钟，所以我很困惑为什么 python 会这么慢。

有什么想法或事情要检查吗？

```
[root@app1 ~]# python --version
Python 2.6.6
[root@app1 ~]# uname -r
2.6.32-279.14.1.el6.x86_64
[root@app1 ~]# java -version
java version "1.7.0_09-icedtea"
OpenJDK Runtime Environment (rhel-2.3.3.el6_3.1-x86_64)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode)
[root@app1 ~]# 
```

我刚刚检查了一个未更新的框，这是更新前的操作系统版本：

```
[root@test1 ~]# uname -r
2.6.32-279.1.1.el6.x86_64 
```

所以从这个版本更新到上面的新版本似乎是变化。看来两个盒子上的 Python 版本相同，所以没有更新。我不知道去哪里看，甚至跟踪服务器审计日志，因为论坛在 RHEL 更新后报告了 python apache 插件的一些 SELinux 权限错误。

# java - 如何在 EWS 中获取本地化文件夹

> ID：13867839
> 
> 赞同：2
> 
> 时间：2012-12-13T20:22:42.847
> 
> 标签：java, localization, exchangewebservices

我想访问 EWS 中的本地化文件夹。只要文件夹的名称是英文，我的程序就可以完美运行。当我将邮箱的语言更改为阿拉伯语时，我仍然可以浏览所有文件夹，并且可以访问其中的电子邮件。但我的问题是我怎么知道哪个是 Inbox 。我读到了我们必须使用的答案之一：

```
var folder = Folder.Bind(service, WellKnownFolderName.Inbox); 
```

但我必须先知道哪个是收件箱，然后我使用这个命令来绑定它。我想知道 EWS 是否有知名文件夹的特殊代码？我使用了 EWS Spy，但在其他语言的收件箱文件夹中看不到任何共同点。

如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:23:42.287

你能更清楚你的问题吗？“但我必须首先知道哪个是收件箱，然后我使用此命令绑定它”是什么意思。?

根据我对您的问题的理解，也许您可​​以使用您拥有的绑定，然后根据 ID 进行检查。

例如，当我想确保约会（来自文件夹日历）已被删除时，我会检查该项目是否在“DeletedItems”文件夹中。

```
var deletedItemsFolder = Folder.Bind(service, WellKnownFolderName.DeletedItems);
if (appointment.ParentFolderId.ToString() == deletedItemsFolder.Id.ToString())
{
    return true;
} 
```

我希望这可以回答您的问题，否则请多问:)

# java - Apache Derby [Hibernate 框架] 看不到已创建的表。[Java EE + JSP]

> ID：13867841
> 
> 赞同：1
> 
> 时间：2012-12-13T20:22:44.903
> 
> 标签：java, hibernate, netbeans, jdbc, derby

我正在尝试解决一个问题，但 jdbc 让我保持距离。

我已经创建了表 USERS 并想用 Hibernate 插入一些数据，但我做不到。我不明白为什么，因为我在前面更简单的示例中具有相同的数据库配置并且它工作正常。这是我的 bean 中的部分代码：

```
 public void newUser() throws ParseException{
    SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
    Session session = sessionFactory.openSession();
    Transaction tran = session.beginTransaction();

    java.sql.Date dt = new java.sql.Date(year-1900,month,day);

    entity.Users user = new entity.Users();
    user.setBirthdate(dt);
    user.setFirstname(inputName);
    user.setLastname(inputSurname);
    user.setEmail(inputEmail);
    user.setPassword(inputPassword);
    user.setGender(selectedGender);

    Rights t = new Rights(3,"user");

    user.setPrivilageType(t);

    session.save(user);
    tran.commit();
} 
```

和堆栈跟踪：

```
javax.faces.el.EvaluationException: org.hibernate.exception.SQLGrammarException: could not insert: [entity.Users]
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.hibernate.exception.SQLGrammarException: could not insert: [entity.Users]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:40)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2158)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2638)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:48)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:250)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:298)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:107)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:187)
    at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:33)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:172)
    at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:27)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
    at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:535)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:523)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:519)
    at beans.RegistrationBean.newUser(RegistrationBean.java:155)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 32 more
Caused by: java.sql.SQLSyntaxErrorException: Table/View 'USERS' does not exist.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.client.am.Connection.prepareStatement(Unknown Source)
    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:505)
    at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:94)
    at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:30)
    ... 59 more
Caused by: org.apache.derby.client.am.SqlException: Table/View 'USERS' does not exist.
    at org.apache.derby.client.am.Statement.completeSqlca(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parsePrepareError(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parsePRPSQLSTTreply(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.readPrepareDescribeOutput(Unknown Source)
    at org.apache.derby.client.net.StatementReply.readPrepareDescribeOutput(Unknown Source)
    at org.apache.derby.client.net.NetStatement.readPrepareDescribeOutput_(Unknown Source)
    at org.apache.derby.client.am.Statement.readPrepareDescribeOutput(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.readPrepareDescribeInputOutput(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.flowPrepareDescribeInputOutput(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.prepare(Unknown Source)
    at org.apache.derby.client.am.Connection.prepareStatementX(Unknown Source)
    ... 63 more 
```

我很想得到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:00:21.060

好的，我已经解决了这个问题。这很简单。我只需要将表名从小写重命名为大写。

# jquery - jscrollpane添加水平鼠标滚轮

> ID：13867842
> 
> 赞同：1
> 
> 时间：2012-12-13T20:22:49.930
> 
> 标签：jquery, jscrollpane, horizontal-scrolling, jquery-jscrollpane

用图像制作了这个水平的 jscrollpane。选择器：`.scroll-pane` 同一页面上的多个滚动。

这就是我所说的：`$('.scroll-pane').jScrollPane();`

现在我想向它添加一个水平鼠标滚轮（因此，要水平滚动，通过使用水平滚动 - mac pad 或具有水平滚动的鼠标），所以我做了这个：

```
var api = element.data('jsp');
element.bind(
  'mousewheel',
  function (event, delta, deltaX, deltaY)
  {
   api.scrollByX(delta);
     return false;
 }
); 
```

并且效果很好，但仅对于第一个选择器+所有其余 div 都不再有滚动条。

我可以添加类似*each*的东西吗？

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:40:32.993

Found the working solution and tested in moz & chrome

```
$('.scroll-pane').each(function(){
var scrollPane = $(this).jScrollPane();
var api = scrollPane.data('jsp'); 
scrollPane.bind( 
    'mousewheel',
    function (event, delta, deltaY) 
    { 
        api.scrollByY(delta*-50);
        return false;
    } 
); 
}); 
```

# java - 休眠写入后跟读取导致找不到对象

> ID：13867843
> 
> 赞同：4
> 
> 时间：2012-12-13T20:23:01.427
> 
> 标签：java, hibernate, sakai

我目前正在开发一个使用休眠和弹簧的测验工具。我实际上将它构建为 Sakai LMS 工具，这使这个问题更加复杂，但让我看看我是否可以概括。

我当前的场景是当用户转到 StartQuiz 页面时，当他们在页面上提交表单时，会初始化一个 Attempt 对象（由 hibernate 存储）。它填充下面的对象：

```
<class name="org.quiztool.model.Attempt" table="QT_ATTEMPTS">
    <cache usage="transactional" />

    <id name="id" type="long">
        <generator class="native">
            <param name="sequence">QT_ATTEMPTS_ID_SEQ</param>
        </generator>
    </id>
    <many-to-one name="quizId" class="org.quiztool.model.Quiz" cascade="none" />
    <property name="score" type="int" not-null="true" />
    <property name="outOf" type="int" not-null="true" />

    <list name="responses" cascade="none" table="QT_RESPONSES" lazy="false">
        <key column="id"/>
        <index column="idxr"/>
        <many-to-many class="org.quiztool.model.QuizAnswer" />
    </list>

    <list name="questionList" cascade="none" table="QT_ATTEMPT_QUESTIONS" lazy="false">
    <key column="id"/>
        <index column="idxq"/>
    <many-to-many class="org.quiztool.model.QuizQuestion" />
    </list>

    <property name="userId" type="string" length="99" />

    <property name="siteRole" type="string" length="99"  />
    <property name="startTime" type="java.util.Date" not-null="true" />
    <property name="finishTime" type="java.util.Date" />        
</class> 
```

它随机挑选出一组问题并设置开始时间和其他一些属性，然后在通过休眠保存对象后将用户重定向到 TakeTheQuiz 页面。

在 TakeTheQuiz 页面上，它通过作为请求参数传递的 ID 加载尝试对象，然后将其打印并格式化为 html 表单供用户填写测验。大约 2/5 的并发用户将看不到任何问题。尝试对象加载，它的问题是空的。

我的理论是 Attempt 对象中的问题列表要么没有立即插入到数据库中（只要对象进入休眠缓存就可以了，然后我可以从缓存中获取它，我看不到出怎么做）或者它正在保存到数据库中，但是我在 TakeTheQuiz 页面上加载的对象正在从缓存中读取一个不完整的对象。

诚然，我的 Hibernate 知识有限，所以如果有人可以帮助我了解这里可能发生的情况以及如何解决它，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:37:16.510

我发现答案很简单。似乎我的保存功能正在懒惰地提交数据库。一旦我在每个事务结束时强制提交该对象，问题就解决了。

我最终编写了自己的休眠会话代码，如下所示：

```
Session session = getSession();
session.beginTransaction();
session.saveOrUpdate(attempt);
session.getTransaction.commit();
session.close(); 
```

问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:46:46.550

我的理论是随机选择问题的代码有问题。你确定它有效吗？请粘贴您的一些代码。

第二个理论是你的事务边界有问题。你什么时候刷新会话？您的交易何时提交？试一试，将会话上的 FlushMode 设置为 ALWAYS。这会改变什么吗？

# c# - var的特殊性是什么？

> ID：13867848
> 
> 赞同：3
> 
> 时间：2012-12-13T20:23:25.670
> 
> 标签：c#, var

所以，就实际问题的问题而言，这可能不是一个很好的问题，但它困扰着我，我找不到答案，所以我认为这是一个问题。

的特殊性是`var`什么？关于它的[MSDN 参考](http://msdn.microsoft.com/en-us/library/bb383973.aspx)说明如下：

> 隐式类型的局部变量是强类型的，就像您自己声明了类型一样

Bur 它似乎没有在任何地方说明它是强类型的。例如，如果我有以下内容：

```
var x = new Tree(); 
```

但是我然后不调用任何方法`Tree`，`x`仍然是强类型的`tree`？或者我可以有类似以下的东西吗？

```
var x = new Tree();
x = new Object(); 
```

我猜这是不允许的，但我现在无法访问编译器，我真的想知道是否有任何警告允许出现上述意外行为。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T20:25:21.973

它被强类型化为右侧表达式的类型：

> var 关键字指示编译器从初始化语句右侧的表达式推断变量的类型。

从[这里](http://msdn.microsoft.com/en-us/library/bb384061.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T20:25:39.480

它与等号右侧的类型相关联，因此在这种情况下，它等价于：

```
Tree x = new Tree(); 
```

无论接口或基类绑定到什么`Tree`。如果您需要`x`属于较低类型，则必须专门声明它，例如：

```
Plant x = new Tree();
// or
IHasLeaves x = new Tree(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T20:25:30.203

是的，在您的示例`x`中，强类型为`Tree` `just as if you had declared the type yourself`.

您的第二个示例无法编译，因为您正在重新定义`x`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T20:34:38.457

不，*完全*一样，如果您输入了`Tree x = new Tree();`. 显然编译器能做的唯一明确的推断是右边表达式的确切类型，所以它不会突然变成`ITree x`

所以这不起作用：

```
Tree x = new Tree();
x = new Object(); //cannot convert implicitly 
```

如果您很好奇，`dynamic`则更接近您期望的行为。

```
dynamic x = new Tree();
x = new Object(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T20:28:23.937

在示例中：

```
var x = new Tree(); 
```

是相同的

```
Tree x = new Tree(); 
```

我发现使用“var”总是更好，因为它有助于代码重构。

此外，添加，

```
var x = new Object(); 
```

由于您不能两次声明变量，因此在同一范围内会破坏编译。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T20:48:24.283

`var`既不是类型，也不会使变量变得特别。它告诉编译器在编译时通过分析赋值运算符右侧的初始化表达式来推断变量的类型。

这两个表达式是等价的：

```
Tree t = new Tree(); 
```

和

```
var t = new Tree(); 
```

* * *

就我个人而言，我更喜欢`var`在右侧明确提及类型名称或确切类型复杂且与 LINQ 查询返回的结果不真正相关时使用。这些 LINQ 结果通常只是进一步处理的中间结果：

```
var x = new Dictionary<string, List<int>>(); 
```

比下面的陈述更容易阅读，而且非常清楚：

```
Dictionary<string, List<int>> x = new Dictionary<string, List<int>>(); 
```

```
var query = someSource
    .Where(x => x.Name.StartsWith("A"))
    .GroupBy(x => x.State)
    .OrderBy(x => x.Date); 
```

这里`query`是类型`IOrderedEnumerable<IGrouping<string, SomeType>>`。谁在乎？

* * *

当类型名称没有出现在右侧并且很简单时，我更喜欢明确地编写它，因为它不会简化任何使用`var`：

```
int y = 7;
string s = "hello"; 
```

当然，如果您创建匿名类型，则必须使用`var`，因为您没有类型名称：

```
var z = new { Name = "Coordinate", X = 5.343, Y = 76.04 }; 
```

* * *

关键字与 LINQ 一起引入是`var`为了简化它们的使用并允许动态创建类型以模拟您使用 SQL 的方式：

```
SELECT Name, Date FROM Person 
```

```
var result = DB.Persons.Select(p => new { p.Name, p.Date }); 
```

# r - ddply 用于在因子变量上按日期聚合时速度很慢

> ID：13867855
> 
> 赞同：0
> 
> 时间：2012-12-13T20:24:12.830
> 
> 标签：r

我在两个变量上运行“ddply”时感觉很糟糕，这似乎应该是一个简单的命令。

样本数据（df）：

```
Brand    Day     Rev     RVP              
  A      1        2535.00  195.00 
  B      1        1785.45  43.55 
  C      1        1730.87  32.66 
  A      2        920.00   230.00
  B      2        248.22   48.99 
  C      3        16466.00 189.00      
  A      1        2535.00  195.00 
  B      3        1785.45  43.55 
  C      3        1730.87  32.66 
  A      4        920.00   230.00
  B      5        248.22   48.99 
  C      4        16466.00 189.00 
```

我正在使用命令：

```
df2<-ddply(df, .(Brand, Day), summarize, Rev=mean(Rev), RVP=sum(RVP)) 
```

我的数据框有大约 2600 个观察值，有 45 个级别的“品牌”和多达 300 个级别的“日”（使用 'difftime' 编码）。

简单地按“Day”分组时，我可以轻松使用“ddply”，但是当我也尝试按“Brand”分组时，我的电脑死机了。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:03:21.467

您应该通读、、 和的帮助页面`aggregate`，密切注意每个人期望的参数类型以及参数名称。然后运行所有示例或. @hadley 对 pkg:plyr 和 reshape/reshape2 所做的主要事情是强加某种程度的规律性，但这是以牺牲速度为代价的。我确实理解他为什么这样做，特别是当我尝试使用该函数时，以及当我反复忘记时，其中哪些需要一个列表，这需要 FUN= 参数标签，需要分组变量，. ...因为它们都有些不同。`by``ave``tapply``demo()``base::reshape``interaction()`

```
> aggregate(df[3:4], df[1:2], function(d) mean(d) )
   Brand Day       Rev    RVP
1      A   1  2535.000 195.00
2      B   1  1785.450  43.55
3      C   1  1730.870  32.66
4      A   2   920.000 230.00
5      B   2   248.220  48.99
6      B   3  1785.450  43.55
7      C   3  9098.435 110.83
8      A   4   920.000 230.00
9      C   4 16466.000 189.00
10     B   5   248.220  48.99 
```

# jquery - 动态获取jquery对象的值

> ID：13867858
> 
> 赞同：0
> 
> 时间：2012-12-13T20:24:21.163
> 
> 标签：jquery, object

我有这样的 jquery 对象`myObject`（console.log() 的结果）

> 对象 { 产品 1 {...}，产品 2 {...}，产品 3 {...} }

每个产品的图案都是这样的`Object { id="1", name="somename" }`

我想获得名称的值，当我更改单选按钮时，例如，如果选中第一个单选，我应该获得 的值`myObject.Product1`，如果是第二个 - `myObject.Product2`。当我尝试这个`console.log(myObject.Product1)`时，它通常会输出`Object { id="1", name="somename" }`，但是当我想动态地做它时

```
var number = getRadioValue(); // for example returns 1 
var productName = 'Product'+number; 
```

然后它输出`myObject.productName`为未定义。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:26:16.800

如果你传入一个变量..你应该使用`object[property]`语法而不是`.`符号

```
myObject[productName] 
```

# regex - 匹配所有内容，直到括号

> ID：13867860
> 
> 赞同：16
> 
> 时间：2012-12-13T20:24:22.860
> 
> 标签：regex, r

给定一个字符串`str = "Senior Software Engineer (mountain view)"`

我如何才能匹配所有内容，直到我打到第一个括号，让我回到“高级软件工程师”

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-13T20:26:16.513

你会用`^[^\(]+`它来匹配它，然后修剪它以删除尾随空格

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T20:28:07.167

`^[^\(]*`

`[^\(]`是一个字符类，它匹配除 , 之外的所有内容`(`，并且`*`是一个贪婪匹配，它尽可能多次匹配该类。`^`开头的 匹配字符串的开头。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-29T13:15:49.317

您可以在 R 中使用这个简单的正则表达式：`*\\(.*`

```
str <- "Senior Software Engineer (mountain view)"

sub(" *\\(.*", "", str)
# [1] "Senior Software Engineer" 
```

它还避免了尾随空格。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-13T20:35:55.947

要避免尾随空格，请尝试`^.*?(?=\s\()`.

`^(.*?)`告诉它从字符串的开头匹配尽可能少的字符，并将`(?=\s\()`匹配的另一端锚定到您的括号，而不捕获它或它之前的空格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-16T16:22:12.997

一个整洁的方式...

```
library("stringr") 
```

> 下面的输出将返回您的列表...

```
str_match_all(str, "^[^\\(]+") 
```

> 如果你需要在字符串

```
str_match_all(str, "^[^\\(]+") %>% toString() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-06T12:59:10.130

软件包*unglue*提供了一个可读的替代方案：

```
# install.packages("unglue")
library(unglue)

x <- "Senior Software Engineer (mountain view)"
unglue_vec(x,"{job} ({location})", var = "job")
#> [1] "Senior Software Engineer" 
```

更多信息：[https ://github.com/moodymudskipper/unglue/blob/master/README.md](https://github.com/moodymudskipper/unglue/blob/master/README.md)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-09T10:52:07.343

如果你想匹配括号之前和之后的所有内容，试试这个：

搜索： `^[^\(]+|(\)).*`

替换为： `\1`

如果你想匹配所有括号并删除它们，试试这个：

搜索：`\([^(\r\n]*?\)|\(|\)`

替换为： `(LEAVE EMPTY)`

# sql - SSIS 包在没有配置文件的情况下运行

> ID：13867868
> 
> 赞同：0
> 
> 时间：2012-12-13T20:24:57.590
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我是 SSIS 配置方面的新手。我用它的配置文件创建了一个包。我的项目放在服务器上我的帐户文件夹中。但我创建了放在共享驱动器文件夹中的配置文件，并将 mypackage.dtsx 文件复制到另一个共享文件夹中。

现在我已经用 dtexec.exe /f "mypackage.dtsx" 运行了这个包，而没有使用配置文件，即使它成功运行了。

甚至我已经将一些属性更改为配置文件并使用 dtexec.exe 命令（如上所述）运行包，它已成功执行。

所以我有一个问题，我是否需要 dtexec.exe 命令行中的配置文件，因为我也可以通过 "dtexec.exe /f "mypackage.dtsx" " 运行我的包？

我看到了 dtexec.exe /f "package.dtsx" /config "myconfig.dtsconfig" 的语法

请指导我...软件包是否包含配置文件及其更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:42:32.283

包会记住它保存的设置。配置文件的好处是，如果您需要覆盖/修改其中包含的设置，您可以这样做，而无需打开、修复和重新部署您的包。配置文件从来都不是必需的，它只是为您的开发人员提供方便，特别是如果您的环境具有严格的变更管理策略。在配置中更改值通常比在严格的更改管理下编辑和重新部署包更容易。

**澄清**

从您的问题看来，您可能会认为，当您更改配置时，它会更改您的包，而不管您的配置是否包含在您的执行中。配置中的所有信息将在您保存时包含在包中，但可能与配置中的信息不同。如果您在没有配置的情况下运行，那么您运行的正是包中保存的内容。包执行的工作方式如下：

1.  从保存的 .dtsx 文件中加载包含所有配置的包
2.  检查要加载的配置。
3.  在内存中加载配置并覆盖从 .dtsx 包加载的值。
4.  执行。

这被简化了，还有其他事情发生，但在基本层面上这是准确的。

# knockout-2.0 - isComputed 属性不返回预期值

> ID：13867876
> 
> 赞同：0
> 
> 时间：2012-12-13T20:25:15.813
> 
> 标签：knockout-2.0

我已经把头撞在桌子上一段时间了——并四处寻找我的问题的答案。我在 KO 视图模型中有一个 isComputed 属性，我试图在其中连接子集合的属性。然而，它顽固地返回一个布尔值......我知道我一定错过了一些非常简单的东西！

我只是在寻找关于我在这里做错了什么的指针：

```
self.allWorkcenters = ko.isComputed(function() {
    var centers = "";
    ko.utils.arrayForEach(self.locationScans(), function(item) {
        var wc = item.workCenter.code();
        centers += "\r\n" + wc;
    });

    /*
        expecting something like "vutek, vutek, packing, finishing"
    */
    return centers;
}); 
```

整个对象和数据都在这里：http: [//jsfiddle.net/austriacus/mGAcU/](http://jsfiddle.net/austriacus/mGAcU/)

更新：我是个白痴......我使用 isComputed 而不是计算。呃。好的，它正在工作：http: [//jsfiddle.net/austriacus/mGAcU/16/](http://jsfiddle.net/austriacus/mGAcU/16/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:51:53.587

得到它的工作。有趣的是，这有时是如何工作的。使用工作小提琴链接更新了原始问题

# c#-4.0 - 如果字符串为空，则赋值为 null

> ID：13867877
> 
> 赞同：0
> 
> 时间：2012-12-13T20:25:16.517
> 
> 标签：c#-4.0, string-comparison

请更正我的代码：

```
j.PrDateTime = string.Empty(t.PrDT)
    ? "NULL"
    : DateTimeOffset.ParseExact(t.PrDT, "s", CultureInfo.InvariantCulture); 
```

`PrDateTime`在 db 中是可以为空的，`t.PrDT`是一个`string`可能为空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:27:27.127

我相信你想要：

```
j.PrDateTime = string.IsNullOrEmpty(t.PrDT)
    ? (DateTimeOffset?)null
    : DateTimeOffset.ParseExact(t.PrDT, "s", CultureInfo.InvariantCulture); 
```

# java - 我从哪里获得 javax.servlet.http.annotation 包？

> ID：13867879
> 
> 赞同：0
> 
> 时间：2012-12-13T20:25:18.077
> 
> 标签：java, servlets

这里的代码：

```
package de.swt1321.servlet;

import java.io.OutputStream;

import javax.servlet.http.annotation.Servlet;
import javax.servlet.http.annotation.GET;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@Servlet(urlMappings={"/ServletTest"})
public class ServletTest {
    private static final java.nio.charset.Charset UTF8 = java.nio.charset.Charset.forName("UTF8");
    @GET
    public void handleGet(HttpServletRequest req,
                          HttpServletResponse res)
    {
        byte[] HTML = "<html><head><title>Hello World!</title></head><body><h1>IT WORKED!</h1></body></html>".getBytes(UTF8);
        res.setStatus(HttpServletResponse.SC_OK);
        res.setHeader("content-type","text/html;charset=utf8");
        res.setIntHeader("content-length",HTML.length);
        OutputStream os = res.getOutputStream();
        os.write(HTML);
        os.flush();
    }
} 
```

我希望这可以按照[this](http://today.java.net/pub/a/today/2008/10/14/introduction-to-servlet-3.html)工作 ，不幸的是，到目前为止我一直无法找到包含该`javax.servlet.http.annotation`包的 jar。[我查看了http://download.java.net/maven/2](http://download.java.net/maven/2)以及Jetty 9 附带的“javax:javaee-api:jar:6.0” `servlet-api-3.0.jar`，但到目前为止还没有运气。我在这里有点想法，我错过了什么？

到目前为止，我正在构建/尝试使用此 Buildr 构建文件进行构建：

```
# Version number for this release
VERSION_NUMBER = "1.0.0"
# Group identifier for your projects
GROUP = "swt1321"
COPYRIGHT = ""

# Specify Maven 2.0 remote repositories here, like this:
repositories.remote << "http://repo1.maven.org/maven2"

# This really bugs me, this isn't only supposed to build on my own PC after all!
# But as I said, the one at the download.java.net repo didn't work
JAVA_EE_PATH = "/home/hannes/Lib/Java/jetty-distribution-9.0.0.M3/lib/servlet-api-3.0.jar"
java_ee = artifact("de.swt1321:java_ee:jar:1.0").from(file JAVA_EE_PATH)

project_layout = Layout.new
project_layout[:source,:main,:java] = 'src'
project_layout[:source,:test,:java] = 'test'

desc "The Servlettest project"
define "ServletTest", :layout => project_layout do
  project.version = VERSION_NUMBER
  project.group = GROUP
  manifest["Implementation-Vendor"] = COPYRIGHT
  compile.with java_ee
  package :war
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:42:37.463

这个包是servlet-api.jar的子包，你可以在容器的lib文件夹中找到这个jar文件。对于tomcat是 **【tomcat安装目录】->lib->servlet-api.jar**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:18:15.570

我建议看一下web servlet api 的[更新示例](http://explodingjava.blogspot.com/2010/05/servlet-30-annotations.html)

尽管如此，如果您仍在寻找 2008 年示例使用的库，我会根据[Jarvana向您推荐这些库](http://www.jarvana.com/jarvana/view/org/mortbay/jetty/servlet-annotation-spec/3.0.pre0/servlet-annotation-spec-3.0.pre0.jar!/javax/servlet/http/annotation/Servlet.class?classDetails=ok)

```
Maven:  

<dependency>
   <groupId>org.mortbay.jetty</groupId>
   <artifactId>servlet-annotation-spec</artifactId>
   <version>3.0.pre0</version>
</dependency> 
```

奖励：您的 GET 注释似乎属于[另一个包](http://www.jarvana.com/jarvana/search?search_type=class&java_class=javax.servlet.http.annotation.%2a)

# ios6 - enabledRemoteNotificationTypes 在 ios 6.0.1 ipod 上返回错误值

> ID：13867882
> 
> 赞同：6
> 
> 时间：2012-12-13T20:25:24.567
> 
> 标签：ios6, apple-push-notifications, ipod-touch, uiapplication

我们正在检查是否使用 UIApplication 的 enabledRemoteNotificationTypes 方法启用了 APN。这适用于 iOS 6 及更低版本的 iPhone。但是，在装有 iOS 6.0.1 的 iPod 上，该方法继续返回 0，表示未启用任何 APN 类型，即使已在 iPod 的设置中手动启用 APN。

首次在设备上为此应用手动禁用 APN 后会发生这种情况。

有没有其他人看过这个？你对如何处理它有什么建议吗？

谢谢。

# php - PHP SOAP 客户端。HTTPS 无法连接

> ID：13867887
> 
> 赞同：0
> 
> 时间：2012-12-13T20:25:31.227
> 
> 标签：php, soap, soap-client

我一辈子都无法让这个 SOAP 客户端正常工作。在我的朋友框上工作正常，我比较了 php.ini，看不到任何与 SOAP 设置相关的内容。我正在运行最新的 PHP 和 UBuntu 12.10。

这是我的代码：

```
$url = "https://m2mconnect.orange.co.uk/orange-soap/services/MessageServiceByCountry?wsdl";
$options["connection_timeout"] = 1000;
$options["location"] = $url;
$options['trace'] = 1;

try {
$client = new SoapClient("orange.xml",$options);

print_r($client->__getFunctions());

$client->peekMessages(
    'user',
    'pass',
    10
);

var_dump($client);
} catch (Exception $e) {
    echo "REQUEST:\n" . $client->__getLastRequest() . "\n";
    echo "REQUEST HEADERS:\n" . $client->__getLastRequestHeaders() . "\n";
    echo "RESPONSE HEADERS:\n" . $client->__getLastResponseHeaders() . "\n";
    echo "Response:\n" . $client->__getLastResponse() . "\n";
    echo "Exception: \n" . $e->getMessage() . "\n";
    echo "Trace: \n" . $e->getTraceAsString() . "\n";
} 
```

我必须将 WSDL 保存为文件，否则我会收到不同的错误！

这是运行的代码：

```
Array
(
    [0] => int sendMessage(string $username, string $password, string $deviceMSISDN, string $message, boolean $deliveryReport, string $mtBearer)
    [1] => ArrayOf_xsd_string getDeliveryReports(string $username, string $password, string $deviceMSISDN, string $countryCode)
    [2] => ArrayOf_xsd_string readMessages(string $username, string $password, int $count, string $deviceMsisdn, string $countryCode)
    [3] => boolean flushMessages(string $username, string $password, string $deviceMSISDN, string $countryCode)
    [4] => ArrayOf_xsd_string waitForMessage(string $username, string $password, int $timeout, string $deviceMSISDN, int $msgref, string $countryCode)
    [5] => int sendMessageWithValidityPeriod(string $username, string $password, string $deviceMSISDN, string $message, boolean $deliveryReport, string $mtBearer, string $binarySmsDcs, string $validityDaysHoursMins)
    [6] => int sendBinarySmsMessage(string $username, string $password, string $deviceMSISDN, string $message, boolean $deliveryReport, string $mtBearer, string $binarySmsDcs)
    [7] => ArrayOf_xsd_string sendAndWait(string $username, string $password, int $timeout, string $deviceMSISDN, string $message, boolean $deliveryReport, string $mtBearer)
    [8] => ArrayOf_xsd_string sendBinarySmsAndWait(string $username, string $password, int $timeout, string $deviceMSISDN, string $message, boolean $deliveryReport, string $mtBearer, string $binarySmsDcs)
    [9] => ArrayOf_xsd_string peekMessages(string $username, string $password, int $count, string $deviceMsisdn, string $countryCode)
    [10] => ArrayOf_xsd_string getDeliveryReportsFromDate(string $username, string $password, string $deviceMSISDN, string $countryCode, string $fromDate)
)
REQUEST:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://soap.otel.telematics.orange.com" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:peekMessages><username xsi:type="xsd:string">username</username><password xsi:type="xsd:string">password</password><count xsi:type="xsd:int">10</count><deviceMsisdn xsi:nil="true"/><countryCode xsi:nil="true"/></ns1:peekMessages></SOAP-ENV:Body></SOAP-ENV:Envelope>

REQUEST HEADERS:

RESPONSE HEADERS:

RESPONSE:

EXCEPTION: 
Could not connect to host
Trace: 
#0 [internal function]: SoapClient->__doRequest('<?xml version="...', 'https://m2mconn...', '', 1, 0)
#1 /var/www/soap-app.com/Zend/public/soap.php(34): SoapClient->__call('peekMessages', Array)
#2 /var/www/soap-app.com/Zend/public/soap.php(34): SoapClient->peekMessages('username', 'password', 10)
#3 {main} 
```

我的用户名和密码是正确的。我相信这与 SSL 有关。这是我的 SOAP 和 SSL php.ini 设置：

```
soap
Soap Client     enabled
Soap Server     enabled 

Registered Stream Socket Transports tcp, udp, unix, udg, ssl, sslv3, tls

curl    SSL     Yes 

openssl
OpenSSL support             enabled
OpenSSL Library Version     OpenSSL 1.0.1c 10 May 2012
OpenSSL Header Version      OpenSSL 1.0.1c 10 May 2012 
SSL Version                 OpenSSL/1.0.1c 
```

任何帮助都会很棒。拔我的头发！

更多细节：

跑步：

```
echo file_get_contents('https://m2mconnect.orange.co.uk/orange-soap/services/Message‌​ServiceByCountry?wsdl'); 
```

结果是：

```
Warning: file_get_contents(): Failed to enable crypto. 
```

编辑：

似乎这些错误票是相关的： [https ://bugs.php.net/bug.php?id=52106](https://bugs.php.net/bug.php?id=52106)

但是我使用的是最新的 PHP 版本，我需要使用 Zend Framework 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:14:00.597

[https://m2mconnect.orange.co.uk/orange-soap/services/MessageServiceByCountry?wsdl](https://m2mconnect.orange.co.uk/orange-soap/services/MessageServiceByCountry?wsdl)

似乎没有加载，与 http:// 相同

如果你说你能做到，那么这应该不是问题。但是，如果您需要更多帮助，那么我建议您制作它以便我们可以访问该 URL。然后我们可以给它适当的测试和更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:17:57.030

看来这一切都是因为我的网络设置。我正在使用安装了开源固件 DD-WRT 的路由器来扩展我的无线网络。当我将该路由器从网络中取出时，连接成功。我花了一个星期来解决这个问题！

# cordova - phonegap 2.2 和 ios 6 (ipad) 上的 ChildBrowser 不工作

> ID：13867890
> 
> 赞同：2
> 
> 时间：2012-12-13T20:25:34.817
> 
> 标签：cordova, ios6, phonegap-plugins, childbrowser

我正在尝试在 iOS 6 和最新的 xCode 上使用 phonegap 2.2 让 ChildBrowser 插件工作。我按照插件的 github wiki/readme 中的官方说明进行操作。似乎插件正在加载但是当我打电话时

window.plugins.childBrowser.showWebPage('http://www.google.com',{ showLocationBar: true });

什么都没发生！

有什么线索吗？想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:09:53.803

1) 使用 build.phonegap.com

2) 在 assets\www 文件夹下添加 config.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "com.phonegap.example"
    version   = "1.0.0">

<name>PhoneGap Build Application</name>

<description>
A simple PhoneGap Build application.
</description>

<author href="https://example.com" email="you@example.com">
Your Name
</author>
    <preference name="orientation"     value="portrait" />
<feature name="http://plugins.phonegap.com/ChildBrowser/2.0.1" />
<access origin="*" />
</widget> 
```

3）删除所有phonegap2.xxjs和childbrowser2.xxjs，它们是从您使用childbrowser功能（如index.html）的特定页面引用的，然后只需添加以下内容，即使它不在文件夹中（phonegap builder将使用更新版本)

```
<script src="phonegap.js"></script>
<script src="childbrowser.js"></script> 
```

4）只需将以下内容用于测试

```
 <ul>
  <li><a href="#" onClick="window.plugins.childBrowser.showWebPage('http://www.xyz.com')">Click here to open</a></li>
 </ul> 
```

希望最好的 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:56:23.020

如果您只是收到“正在加载...”消息，请确保您引用的是 Ios ChildBrowser 插件随附的 childbrowser.js，而不是其他平台（如 Android）的。如果您没有得到任何东西，请确保您在 Cordova.plist 中有“ChildBrowser”->“ChildBrowserCommand”，而不是“ChildBrowser”->“ChildBrowser.js”。另外，请确保您的设备就绪事件被触发，我曾经不小心将 cordova-2.2.0.js 从一个 android 项目复制到 IOS，这导致所有事件都停止触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:58:39.867

iOS 6 的 ChildBrowser 插件存在一个突出问题。

您应该能够测试这是否是特定于 iOS6 的。在 iOS5 模拟器下运行您的应用程序。如果 ChildBrowser 有效，那么您就知道您遇到了 iOS 6 特定的问题。

支持问题已打开，但我知道尚无解决方案...

[https://github.com/phonegap/build/issues/55](https://github.com/phonegap/build/issues/55)

# objective-c - 核心数据和自反关系实体

> ID：13867891
> 
> 赞同：1
> 
> 时间：2012-12-13T20:25:35.750
> 
> 标签：objective-c, ios, core-data

好的，我建立了一个自反关系实体（在我之前发布的 [SO question] 的帮助下[1](https://i.stack.imgur.com/0gTaY.png)。

我相信我设置正确：

![在此处输入图像描述](../Images/c7a48d741133c2d4ae3919a13333517c.png)

我有一个实体 GroupMember。我创建了与自身的多对多关系。

然后我添加一个实体并创建一个“子”实体并将其设置为关系：

```
GroupMember *groupMember = [NSEntityDescription insertNewObjectForEntityForName:@"GroupMember" inManagedObjectContext:context];
groupMember.name = @"Ted";

GroupMember *subGroupMember = [NSEntityDescription insertNewObjectForEntityForName:@"GroupMember" inManagedObjectContext:context];
subGroupMember.name = @"sub member bill";

[groupMember addSub_member_relObject:subGroupMember]; 
```

然后，我对任何 GroupMember 实体发出获取请求，以查看是否设置了关系。我得到的是：

```
fetch objects: (
    "<GroupMember: 0x83cf280> (entity: GroupMember; id: 0x98686b0 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p1> ; data: {\n    \"member_rel\" =     (\n    );\n    name = Ted;\n    \"sub_member_rel\" =     (\n        \"0x989f390 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p2>\"\n    );\n})",
    "<GroupMember: 0x83cf4a0> (entity: GroupMember; id: 0x989f390 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p2> ; data: {\n    \"member_rel\" =     (\n        \"0x98686b0 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p1>\"\n    );\n    name = \"sub member bill\";\n    \"sub_member_rel\" =     (\n    );\n})"
)
2012-12-13 12:08:45.352 [9539:14003] name: Ted
2012-12-13 12:08:45.355 [9539:14003] set: Relationship 'sub_member_rel' on managed object (0x83cf280) <GroupMember: 0x83cf280> (entity: GroupMember; id: 0x98686b0 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p1> ; data: {
    "member_rel" =     (
    );
    name = Ted;
    "sub_member_rel" =     (
        "0x989f390 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p2>"
    );
}) with objects {(
    <GroupMember: 0x83cf4a0> (entity: GroupMember; id: 0x989f390 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p2> ; data: {
    "member_rel" =     (
        "0x98686b0 <x-coredata://D9082F84-03D9-408D-B0DA-5C75C1B905AB/GroupMember/p1>"
    );
    name = "sub member bill";
    "sub_member_rel" =     (
    );
})
)} 
```

A）我不太明白如何阅读这个输出。什么是“带对象”部分？是那个有关系的实体吗？“子会员账单”是否正确设置为子会员关系？

B) 当我尝试取回 groupMember.Sub_member_rel 时，我得到一个 NSSet。我如何遍历这些对象以取回子成员名称（以显示在表格视图中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:59:24.740

**A)**打印 an`NSManagedObject`或其关系的输出通常很冗长且有些复杂。在您的情况下，首先打印关系所属的对象。然后是“与对象”部分，它由该特定关系中的对象组成。

**B)**在多对多关系中，关系类型始终为`NSSet`. 就像`NSArray`你可以遍历`NSSet`这样的：

```
for (GroupMember *subGroupMember in groupMember.sub_member_rel) {
    // Do something with managedObject
} 
```

# c++ - C++ 程序未正确显示文本文件中的内容

> ID：13867895
> 
> 赞同：0
> 
> 时间：2012-12-13T20:25:49.587
> 
> 标签：c++, visual-studio-2010, visual-c++

我正在编写的程序是假设列出每个学生支付的所有款项，显示已支付和未付的金额。

但是问题是它由于某种我似乎找不到的原因而无法正确显示。

payment.txt 文件内容按以下顺序排列： Student Code 金额类型（空白为现金）

```
11  50
12  25  4543 2323 2321
12  25  Barclays
13  100 
14  100
15  50  4545 6343 4342
15  25  HSBC
16  100
17  100
18  100
19  100
20  25  4546 3432 3211
21  75
22  100 Lloyds
23  100 
```

这是到目前为止的代码：

```
void payment()
{
    // Display message asking for the user input
    std::cout << "\nList all payment made by each student, show amount paid and outstanding." << std::endl;

    // Read from text file and Display list of payment

    std::ifstream infile;               // enable to open, read in and close a text file
    float StudentCode;                  // to store the student enrolment number
    float Amount;                       // to store the amount of money
    float Type;                         // to store information on type of payment made
    float Outstanding;                  // to store amount of money is due
    std::map<int, float> amountsPaid;   

    infile.open("Payment.txt");         // open a text file called Payment

    if (!infile)                 
    {
        std::cout << "List is empty" << std::endl;      // if the file is empty it output the message
    } 
    else 
    {
        // Display Headings and sub-headings
        std::cout << "\nList of Payment: " << std::endl;
        std::cout << "" << std::endl;
        std::cout << "Enrolment No." << "   " << "Amount" << "  " << "Outstanding" << std::endl;

        // accumulate amounts
        while (infile >> StudentCode >> Amount) 
        {
            amountsPaid[StudentCode] += Amount;
        }

        // loop through map and print all entries
        for (auto i = amountsPaid.begin(); i != amountsPaid.end(); ++i) 
        {
            float outstanding = 100 - i->second;
            // Display the list of payment made by each student
            std::cout << i->first << "      " << i->second << " " << "$: " << outstanding << '\n' << std::endl;
        }
    }

    infile.close();         // close the text file  
} 
```

它在运行时显示以下内容：

11 50 $50 12 25 $75 2321 12 $88 4543 2323 $-2223

你能帮忙解释一下为什么这样做吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:41:02.033

The key section of code is here.

```
while (infile >> StudentCode >> Amount) 
{
    amountsPaid[StudentCode] += Amount;
} 
```

This loop pulls of pairs of numbers. These are the pairs that get pulled off the stream:

```
11   50
12   25 
4543 2323 
2321 12

```

At that point the text `Barclays` is encountered and so the while loop terminates. That is because the text cannot be converted into a `float`.

To solve your problem you will need to switch to line oriented processing. Use `getline()` to pull off a line at a time. And then break the line into distinct items. One possible solution would be like so:

```
string line;
while (getline(infile, line))
{
    istringstream strm(line);
    strm >> StudentCode >> Amount;
    amountsPaid[StudentCode] += Amount;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:43:05.370

您的文件包含的内容实际上不止两列，而且您只读取两列，因此下一个**infile >> StudentCode >> Amount**会将付款类型读取为 StudentCode。在阅读下一个“StudentCode >> Amount”组合之前，您应该在文件中只创建两列或丢弃更多列直到行尾，例如
while(infile >> StudentCode >> Amount)
{
    amountPaid[StudentCode] += Amount;
    infile.getline(buff, size); // 它会读取剩余的行
}

# c++ - 混合复合模式和奇怪重复的模板模式的可能性

> ID：13867901
> 
> 赞同：12
> 
> 时间：2012-12-13T20:26:10.977
> 
> 标签：c++, templates, design-patterns, composite, crtp

我有一个复合模式实现，用于 GUI 组件：

```
class CObject {
private:

  CObject * m_pParent;  
  CObjectContainer * m_pChildren;

  void private_foo() {
    this->foo();
    //Calls private_foo for each child in container.
    m_pChildren->foo();
  }

public:
  virtual void foo() {
    //empty for base class
  }

  virtual CObject * duplicate() {
    //Do duplication code
    return new CObject(*this);
  }

  virtual CObject * detach() {
    //Remove this object (along with it's children)
    //from current tree.
    m_pParent->RemoveChild(this);
    m_pParent = nullptr;
    return this;
  }
}

class CSpecificObject : public CObject {
public:
  virtual void foo() {
    //Specific code for this class
  }

  virtual CSpecificObject * duplicate() {
    //Overload, but the code only calls diferent constructor
    return new CSpecificObject(*this);
  }

  virtual CSpecificObject * detach() {
    //Note the code is identical.
    m_pParent->RemoveChild(this);
    m_pParent = nullptr;
    return this;
  }
} 
```

不幸的是，继承类的数量迅速增加，重复的代码（在给定的例子中只有 detach() 方法）让我头疼。

有没有办法干净地实现 detach() 方法，保持返回类型与调用它的对象相同？

我在考虑 CRTP，但我想不出一种方法来保持动态多态性和编译时多态性：

```
template <Child>
class CObject {
private:
  ...
  Child * detach() {
    m_pParent->RemoveChild(this);
    m_pParent = nullptr;
    return static_cast<Child*>(this);
  }
  ...
}

//Array of CObject* pointers is no longer possible. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T20:33:54.683

您可以添加一层抽象：

```
class CObjectBase
{
    public:
        // Other methods...
        virtual CObjectBase* detach() = 0;
        virtual CObjectBase* duplicate() const = 0;
};

template <typename Child>
class CObject : public CObjectBase
{
    public:
        // ...
        Child* duplicate() const
        {
            return new Child(*static_cast<Child*>(this));
        }

        Child* detach()
        {
            m_pParent->RemoveChild(this);
            m_pParent = nullptr;
            return static_cast<Child*>(this); // Cast needed here (inherent to CRTP)
        }
        std::vector<CObjectBase*> children; // Array possible now
        // ...
};

class MyObject : public CObject<MyObject>
{
    // ...
}; 
```

在自然语言中：所有对象的接口（`CObjectBase`）都有其后代（`CObject<Child>`）的部分实现，它只需要继承这个部分实现，减少复制代码的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:35:02.733

> 我在考虑 CRTP，但我想不出一种方法来保持动态多态性和编译时多态性

您可以通过使用 CRTP 样式基类为某些接口提供默认虚拟实现来混合它们。

因此，您可以聚合 CRTP 基本实现（可能配置有额外的“策略”模板参数），并且仍然能够覆盖继承类中的特定行为。

Microsoft 的[ATL 库经常](http://msdn.microsoft.com/en-us/library/3ax346b7%28v=vs.71%29.aspx)使用它。我还在我的[STTCL 状态机库](http://github.com/makulik/sttcl)中使用了这种技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:02:09.847

仅从代码片段就不清楚为什么需要`detach()`返回指向传递类型的指针。

要利用`detach()`返回已交付类型的优势，无论如何都需要使用对已交付类型的引用来调用它。像这样：

```
CSpecificObject* specific_object = new SpecificObject();
// ...
specific_object->detach()->method_declared_in_specific_object(); 
```

但这可以替换为即使 detach 无效的等效项：

```
specific_object->detach();
specific_object->method_declared_in_specific_object(); 
```

如果您有对基类型的引用，则不能利用`detach()`返回类型：

```
CObject* specific_object = new SpecificObject();
//...
// !!! Won't compile:
specific_object->detach()->method_declared_in_specific_object(); 
```

出于这个原因，目前尚不清楚您尝试实施的方法的优点是什么。

一个不好的地方是`duplicate()`方法很臭。当交付的类不覆盖它时它会中断，而是使用父类的默认实现。这可能表明高层设计有问题。

# sql - SQL Server Express 2012 - 如何永久合并两个单元格

> ID：13867903
> 
> 赞同：1
> 
> 时间：2012-12-13T20:26:13.377
> 
> 标签：sql, sql-server

我需要永久合并数据库中的 2 列。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:40:05.167

this should do the stuff :

```
ALTER TABLE table
ALTER COLUMN f1 NVARCHAR(4000)

UPDATE table SET f1 = ISNULL(f1,'') + '' + ISNULL(f2, '')

ALTER TABLE table
DROP COLUMN f2 
```

# asp.net - 是只有我还是有其他人注意到asp.net不识别2013？

> ID：13867907
> 
> 赞同：1
> 
> 时间：2012-12-13T20:26:24.440
> 
> 标签：asp.net, vb.net, html-select

我有一个代表我们部门重要职能的日期下拉列表。

这些日期年复一年地保持不变。

以下是日期的下拉列表：

```
 <asp:DropDownList id="txtdte" runat="server">
              <asp:ListItem Value="07/31/2012">Jul 31, 2012</asp:ListItem>  
              <asp:ListItem Value="08/21/2012">Aug 21, 2012</asp:ListItem>  
              <asp:ListItem Value="09/18/2012">Sep 18, 2012</asp:ListItem>  
              <asp:ListItem Value="11/06/2012">Nov 06, 2012</asp:ListItem>  
              <asp:ListItem Value="12/04/2012">Dec 04, 2012</asp:ListItem>  
            </asp:DropDownList> 
```

为了确保正确的日期显示在下拉列表框的顶部，我们有以下代码：

```
 For Each items As ListItem In txtdte.Items
        If (items.Value.CompareTo(DateTime.Today.ToString("MM/dd/yyyy"))) < 0 Then
            items.Enabled = False
        End If
    Next 
```

这意味着我们从 7 月 31 日开始。一旦 7 月 31 日过去，下一个可用日期将变为当前日期。

直到现在，当管理层决定添加 1 月的日期，即 2013 年 1 月 8 日时，这对我们来说一直很有效。

```
 <asp:ListItem Value="01/08/2013">Jan 08, 2013</asp:ListItem> 
```

现在，下拉列表框是空白的。

在我看来，2013 年需要进行一些调整才能得到认可，但我不确定是什么。

非常感谢任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:34:49.937

我猜这是在执行字符串比较，其中“01/08/2013”​​作为字符串比较小于“12/13/2012”（“0”按字母顺序早于“1”）

尝试更改代码以将值从字符串转换为日期并比较`DateTime`对象而不是它们的字符串表示：

```
For Each items As ListItem In txtdte.Items
    If (DateTime.Parse(items.Value).CompareTo(DateTime.Today)) < 0 Then
        items.Enabled = False
    End If
Next 
```

# java - 如何在数组的数组中查找重复元素？

> ID：13867908
> 
> 赞同：0
> 
> 时间：2012-12-13T20:26:24.023
> 
> 标签：java, arrays, loops

> **可能的重复：**
> [Java 数组，查找重复](https://stackoverflow.com/questions/3951547/java-array-finding-duplicates)

我有这个数组

```
int[][] array = {{1,2,3,4}, {5,6,2,8}, {9, 10, 11, 12}, {13, 14, 15, 16}}; 
```

如果这个数组中有重复的元素，我需要返回 false。例如索引 [0][1] 和 [1][2] 是相等的。我需要一种检测方法。如果解决方案只使用原语、数组和循环，那也很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:31:15.347

1：将所有值添加到列表（例如 ArrayList）
2：将所有值添加到集合（例如 TreeSet）

比较`list.size()`_`set.size()`

如果不相等，则比您有重复

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T20:42:21.003

如果您只想使用原语，您可以像这样使用 TIntHashSet

```
TIntHashSet set = new TintHashSet(); // like Set<Integer> but with primitives
for(int[] arr: array) for(int i: arr) if(!set.add(i)) return false;
return true; 
```

如果该值由于重复而无法添加，则 set.add 方法返回 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T06:38:44.203

试试下面的代码

```
package com.rais.duplicates;

import java.util.HashSet;
import java.util.Set;

/**
 * @author Rais.Alam
 * @date Dec 14, 2012
 */
public class DetectDuplicateClient
{

    public static boolean isDuplicate(int[][] array)
    {
        boolean retVal = false;
        if (array != null && array.length > 0)
        {
            Set<Integer> temp = new HashSet<Integer>();

            outer:
            for (int[] innerArray : array)
            {
                for (int value : innerArray)
                {
                    if(!temp.add(value))
                    {
                        retVal = true;
                        break outer;
                    }

                }
            }
        }
        return retVal;
    }

    public static void main(String[] args)
    {

        int[][] array =  { { 1, 2, 3, 4 }, { 5, 6, 2, 8 }, { 9, 10, 11, 12 },{ 13, 14, 15, 16 } };

        System.out.println(isDuplicate(array));
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T20:34:31.593

我认为这是一个家庭作业问题，因此没有实际的实施指南。

1.  仅当您有 2D 数组时，您才需要 2 个 for 循环。

2.  遍历数组中的所有数字并比较它们是否相等。

3.  如果找到任何重复项，则返回 false。

另一种方式

1.  将此二维数组转换为一维数组

2.  迭代并比较所有值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T21:17:33.197

我的解决方案：

1.  二维数组元素到列表
2.  对列表进行排序
3.  如果我索引列表项 == i + 1，则签入一个 for 循环

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T20:42:09.717

伪代码：

1.  循环遍历所有值，将它们添加到`HashSet`
2.  在每次迭代中，检查 是否`Set`包含该元素。如果是这样，`return false`立即。
3.  `return true;`.

* * *

这是另一种仅在您知道最大元素时才有效的方法

1.  创建一个新数组，其中数组中的每个单元格都由元素索引
2.  `If`数组单元格为零，增加单元格 ( `cell[element]++`)。
3.  `If`数组单元格为 1, `return false;`。
4.  `return true;`

# time - CUDA 测量每个 gpu 核心的执行时间

> ID：13867911
> 
> 赞同：1
> 
> 时间：2012-12-13T20:26:40.507
> 
> 标签：time, cuda, execution, measure

我对 cuda 编程真的很陌生（几周前才开始），我的任务是乘以大尺寸矩阵（如 960x960）并测量整体和每个 gpu 核心的执行时间。我查看了 Toolkit 安装随附的 CUDA 示例（更准确地说，是 0_Simple 文件夹中的项目 matrixMul）。我改变了样本以乘以大矩阵。示例本身具有测量执行时间的实现，但我的问题是如何测量每个 gpu 核心的执行时间。我很困惑。

此外，不太重要的是，为什么这个例子中的内核函数在一个 for 函数中被调用，最大迭代次数为 300 次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T21:22:05.390

每个 CUDA 设备都有多个流式多处理器 (SM)。每个 SM 可以有多个 warp 调度器和多个执行单元。CUDA 核心是执行单元而不是“核心”，所以我将在接下来的讨论中避免使用它们。

NVIDIA 分析工具

*   CUDA 命令行分析器
*   nvprof 命令行分析器（CUDA 5.0 中的新功能）
*   视觉分析器
*   Nsight VSE CUDA 分析器

支持为 CUDA 网格启动收集持续时间和 PM 计数器的能力。每个 SM 可以收集 PM 计数器的子集。

我已经为 nvprof 提供了用于收集这两条信息的命令行。这两个示例在具有 15 个 SM 的 GTX480 上运行 matrixMul 示例的调试构建。

**收集电网执行时间**

上面列出的每个工具都有简化模式来收集每个内核网格启动的执行持续时间。图形工具可以将其显示在时间轴或表格中。

```
nvprof --print-gpu-trace matrixMul.exe
======== NVPROF is profiling matrixMul.exe...
======== Command: matrixMul.exe
[Matrix Multiply Using CUDA] - Starting...
GPU Device 0: "GeForce GTX 480" with compute capability 2.0

MatrixA(320,320), MatrixB(640,320)
Computing result using CUDA Kernel...
done
Performance= 39.40 GFlop/s, Time= 3.327 msec, Size= 131072000 Ops, WorkgroupSize= 1024 threads/block
Checking computed result for correctness: OK

Note: For peak performance, please refer to the matrixMulCUBLAS example.
======== Profiling result:
     Start  Duration           Grid Size     Block Size     Regs*    SSMem*    DSMem*      Size  Throughput    Device   Context    Stream  Name
  267.83ms   71.30us                   -              -         -         -         -  409.60KB    5.74GB/s         0         1         2  [CUDA memcpy HtoD]
  272.72ms  139.20us                   -              -         -         -         -  819.20KB    5.88GB/s         0         1         2  [CUDA memcpy HtoD]
  272.86ms    3.33ms           (20 10 1)      (32 32 1)        20    8.19KB        0B         -           -         0         1         2  void matrixMulCUDA<int=32>(float*, float*, float*, int, int)
  277.29ms    3.33ms           (20 10 1)      (32 32 1)        20    8.19KB        0B         -           -         0         1         2  void matrixMulCUDA<int=32>(float*, float*, float*, int, int) 
```

为了在其他工具中收集

1.  CUDA 命令行分析器 - 指定时间戳
2.  Visual Profiler - 运行生成时间线
3.  Nsight VSE - 新分析活动 | 追踪 | 启用 CUDA

**收集 SM 活动**

您的问题表明您需要每个 GPU 核心的执行时间。这可能意味着每个 GPU（见上文）或每个 SM。可以使用 SM PM 计数器 active_cycles 收集 SM 执行时间。active_cycles 计算 SM 至少有一个活动 warp 的周期数。

对于输出中的每一行，将有 15 个值（每个 SM 一个）。

```
nvprof --events active_cycles --aggregate-mode-off matrixMul.exe
======== NVPROF is profiling matrixMul.exe...
======== Command: matrixMul.exe
[Matrix Multiply Using CUDA] - Starting...
GPU Device 0: "GeForce GTX 480" with compute capability 2.0

MatrixA(320,320), MatrixB(640,320)
Computing result using CUDA Kernel...
done
Performance= 12.07 GFlop/s, Time= 10.860 msec, Size= 131072000 Ops, WorkgroupSize= 1024 threads/block
Checking computed result for correctness: OK

Note: For peak performance, please refer to the matrixMulCUBLAS example.
======== Profiling result:
    Device   Context    Stream, Event Name, Kernel, Values
         0         1         2, active_cycles, void matrixMulCUDA<int=32>(float*, float*, float*, int, int), 2001108 2001177 2000099 2002857 2152562 2153254 2001086 2153043 2001015 2001192 2000065 2154293 2000071 2000238 2154905
         0         1         2, active_cycles, void matrixMulCUDA<int=32>(float*, float*, float*, int, int), 2155340 2002145 2155289 2002374 2003336 2002498 2001865 2155503 2156271 2156429 2002108 2002836 2002461 2002695 2002098 
```

# html - af:panelList 上的 css 未知属性“渲染”

> ID：13867913
> 
> 赞同：1
> 
> 时间：2012-12-13T20:26:43.680
> 
> 标签：html, css, jsf

我正在尝试`af:panelList`在 CSS 文件上设置渲染属性，因此我无法根据设备分辨率显示它，但是当我在 CSS 上定义时：

```
#pl2 {
    rendered:false;
} 
```

我得到了一个“渲染”的未知属性，当它的分辨率较小时，chrome 不会隐藏它。

这是我的 .jspx 文件上的组件定义：

```
<af:panelList  id="pl2" rows="3" maxColumns="5" > 
```

我能做些什么来解决这个问题？有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:39:03.707

> *它呈现一个 id 为 pt1:panelobile 的 div，然后是一个没有 id 的表。我将此行添加到 css #pt1:panelmobile { display: none; 但到目前为止我还没有运气*

如果您忽略不推荐使用的浏览器，例如 IE6/7，那么您应该使用此选择器：

```
#pt1\:panelmobile {
    display: none;
} 
```

即是 CSS 选择器中的`:`一个特殊字符，指示伪选择器，因此需要按`\`原样使用时进行转义。

但是，特别是在您的特定情况下，更好的方法是为 JSF 组件分配一个更通用和更好的可重用样式类。

```
<af:panelList ... styleClass="hidden"> 
```

和

```
.hidden {
    display: none;
} 
```

### 也可以看看：

*   [如何在 CSS 选择器中使用带有冒号“：”的 JSF 生成的 HTML 元素 ID？](https://stackoverflow.com/questions/5878692/how-to-use-jsf-generated-html-element-id-in-css-selectors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:30:40.900

如果您试图隐藏元素，请尝试：

```
#pl2
{
    display: none;
} 
```

# delphi - 如何将鼠标事件重定向到另一个控件？

> ID：13867915
> 
> 赞同：7
> 
> 时间：2012-12-13T20:26:46.480
> 
> 标签：delphi, delphi-7

我有一种情况，我有一个`TImage`，在它上面有一个`TPanel`部分覆盖它，它们共享同一个父级：

```
------------------
|  Image1        |
|  ------------  |
|  |  Panel1  |  |
|  ------------  |
|                |
------------------ 
```

Panel1 正在接收鼠标按下/移动/向上事件并对其进行处理（Image1 也是如此），但在某些情况下，我想将鼠标按下消息“重定向”到 Image1，就好像模拟单击了 Image1 而不是 Panel1。

这是我所做的：

```
procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  if (ssLeft in Shift) then
    Beep;
end;

procedure TForm1.Image1MouseMove(Sender: TObject; Shift: TShiftState; 
  X, Y: Integer);
begin
  //...
end;

procedure TForm1.Image1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  ShowMessage('boo!');
end;

procedure TForm1.Panel1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
  P: TPoint;
begin
  if FRedirectToImage then begin
    ReleaseCapture; // do I need to send a WM_LBUTTONUP as well to the panel?        
    GetCursorPos(P);
    P := ScreenToClient(P);
    Image1.Perform(WM_LBUTTONDOWN, MK_LBUTTON, Longint(PointToSmallPoint(P)));
    Exit;
  end;

  // Normal handling
  if (ssLeft in Shift) then begin
    // ...
  end;
end; 
```

它按预期工作，但我不确定这是正确的方法。
我的问题是，我做得对吗？有更好或推荐的方法吗？

* * *

更新（1）：`WM_NCHITTEST`按照建议处理是一个**有效**的答案，我也考虑过。即使设置`Panel1.Enabled`为`False`将鼠标消息路由到底层 Image1 控件。

但是（！）考虑这种情况，我单击`x`面板上的位置，仍然需要将消息路由到 Image1：

```
------------------
|  Image1        |
|          --------------
|          |  Panel1  x |
|          --------------
|                |
------------------ 
```

我的方法有效，但`WM_NCHITTEST`不适用于所描述的场景。如果我的方法有效与否，我仍然没有得到答案。（或者也许我应该对上述情况提出另一个问题？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T22:14:19.277

处理`wm_NCHitTest`发送到面板的消息并返回`htTransparent`。操作系统会将鼠标消息发送到下一个控件，而无需您的程序进行任何进一步处理。（从操作系统的角度来看，“下一个控件”是面板和图像的父控件；VCL 负责将鼠标消息路由回图像控件，就像它对所有`TGraphicControl`后代一样，因为它们不是t 真正的窗口控件。）

像这样的东西：

```
procedure TParentForm.PanelWindowProc(var Msg: TMessage);
begin
  FPrevPanelWindowProc(Msg);
  if (Msg.Message = wm_NCHitTest) and FRedirectToImage then
    Msg.Result := htTransparent;
end; 
```

将该方法分配给面板的 WindowProc 方法。将属性的先前值存储在表单的字段中。

```
var
  FPrevPanelWindowProc: TWndMethod;

FPrevPanelWindowProc := Panel.WindowProc;
Panel.WindowProc := Self.PanelWindowProc; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T00:15:11.407

如果您要从中重定向鼠标事件的控件不在其整个客户区内*，*这些事件应重定向到的控件内（如您在问题更新中所示），则`WM_NCHITTEST`消息可能会发送到另一个控件。然后唯一的一种方法仍然是使用恕我直言，重定向所有鼠标消息。

正如@David 在他的评论中提到的，您可以通过[`OnMessage`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TApplication.OnMessage)为[`TApplication`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TApplication). 或者使用一个[`TApplicationEvents`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.AppEvnts.TApplicationEvents)对象。

在以下示例中，您可以定义将被重定向的消息范围，并为该重定向指定源控件和目标控件的列表。重定向使用对象的[`OnMessage`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TApplication.OnMessage)事件[`TApplication`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TApplication)，但由于您的目标在这种情况下是`TGraphicControl`后代，您不仅不能更改传入消息的接收者，而且您必须吃掉此消息并通过目标控件执行消息[`Perform`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TControl.Perform)自己的方法。

这是显示如何将所有鼠标消息从重定向到的`Panel1`代码`Image1`。如果需要，您可以获得整个测试项目[`from here`](http://projects-stackoverflow-tlama.googlecode.com/files/13867915.ZIP)：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type
  TMsgRange = record
    MsgFrom: UINT;
    MsgTo: UINT;
  end;
  TRedirect = record
    Source: HWND;
    Target: TControl;
  end;

type
  TForm1 = class(TForm)
    Memo1: TMemo;
    Panel1: TPanel;
    Image1: TImage;
    procedure FormCreate(Sender: TObject);
    procedure Image1MouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure Panel1MouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure Image1MouseUp(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure Panel1MouseUp(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
  private
    FRedirectList: array of TRedirect;
    FRedirectEnabled: Boolean;
    FRedirectMsgRange: TMsgRange;
    procedure ApplicationMessage(var AMessage: TMsg; var Handled: Boolean);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.ApplicationMessage(var AMessage: TMsg; var Handled: Boolean);
var
  I: Integer;
begin
  if FRedirectEnabled and (AMessage.message >= FRedirectMsgRange.MsgFrom) and
    (AMessage.message <= FRedirectMsgRange.MsgTo) then
  begin
    for I := 0 to High(FRedirectList) do
      if (AMessage.hwnd = FRedirectList[I].Source) and
        Assigned(FRedirectList[I].Target) then
      begin
        Handled := True;
        FRedirectList[I].Target.Perform(AMessage.message,
          AMessage.wParam, AMessage.lParam);
        Break;
      end;
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FRedirectEnabled := True;
  FRedirectMsgRange.MsgFrom := WM_MOUSEFIRST;
  FRedirectMsgRange.MsgTo := WM_MOUSELAST;
  SetLength(FRedirectList, 1);
  FRedirectList[0].Source := Panel1.Handle;
  FRedirectList[0].Target := Image1;
  Application.OnMessage := ApplicationMessage;
end;

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Memo1.Lines.Add('Image1MouseDown')
end;

procedure TForm1.Image1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Memo1.Lines.Add('Image1MouseUp')
end;

procedure TForm1.Panel1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Memo1.Lines.Add('Panel1MouseDown')
end;

procedure TForm1.Panel1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Memo1.Lines.Add('Panel1MouseUp')
end;

end. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T22:05:03.050

您可以派生面板类来处理`WM_NCHITTEST`要返回`HTTRANSPARENT`的消息，以便面板下方的控件接收鼠标消息的区域。例如：

```
procedure TMyPanel.WMNCHitTest(var Message: TWMNCHitTest);
var
  Pt: TPoint;
begin
  Pt := ScreenToClient(SmallPointToPoint(Message.Pos));
  if (Pt.X < 80) and (Pt.Y < 60) then // devise your logic here...
    Message.Result := HTTRANSPARENT
  else
    inherited;
end; 
```

显然这只是一个测试，您可以在组件中发布一个字段，以解决该控件所在的位置等。

# php - 带有指向其他 php 文件的链接的 php

> ID：13867917
> 
> 赞同：-2
> 
> 时间：2012-12-13T20:26:54.897
> 
> 标签：php, mysql, sql, variables, syntax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:32:24.683

尝试类似：

```
Wybierz cos!.<br>
<a href="<?php echo((isset($_GET['p']) && $_GET['p']==4) ? 'dodaj.php' : 'index.php?p=4');?>">Dodaj osobe</a><br>
<a href="<?php echo((isset($_GET['p']) && $_GET['p']==3) ? 'dodaj_wplate.php' : 'index.php?p=3');?>">Dodaj wplate</a><br>
<a href="<?php echo((isset($_GET['p']) && $_GET['p']==2) ? 'dodaj_u.php' : 'index.php?p=2');?>">lDodaj ubezpieczenie</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:03:24.110

```
$p = 'index.php';
if( isset($_GET['p']) ){

    switch( $_GET['p'] ){

        case '2':
            $p = 'dodaj_u.php';
        break;

        case '3':
            $p = 'dodaj_wplate.php';
        break;

        case '4':
            $p = 'dodaj.php';
        break;

    }

}

?>

Wybierz coś!.<br>
<a href="index.php?p=4">Dodaj osobę</a><br>
<a href="index.php?p=3">Dodaj wpłatę</a><br>
<a href="index.php?p=2">lDodaj ubezpieczenie</a><br>

<?

include $p;

?> 
```

# php - 测试不安全的结帐页面

> ID：13867918
> 
> 赞同：0
> 
> 时间：2012-12-13T20:26:59.593
> 
> 标签：php, javascript, html, security, ssl-certificate

因此，我设置了一个新域，其中包含我的产品的结帐页面。在为该域购买 SSL 证书之前，我想在实时流量上测试此页面。我只想做一些销售，以确保一切正常。我的问题是：

如果我没有 SSL 证书，某些浏览器/防病毒软件会阻止用户输入信用卡信息和/或向他们发出警报或警告吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:29:55.573

如果您接受没有 SSL 的真实信用卡号码，您将直接严重违反 PCI，并可能被信用卡行业以 6 位数以上的价格起诉，并失去您的商家帐户。

在 Namecheap 这样的地方，一个便宜的 SSL 证书是 8 美元左右。这不是一个你想冒险的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:30:41.407

如果只是您在测试并且确实有问题，那么您可以禁用防病毒软件。但是，这应该不是问题。

不允许普通用户在非 SSL 连接上输入信用卡。

# box2d - IgnoreCCD = false 时用 AfterCollision/NormalImpulse 计算碰撞力不可靠？

> ID：13867920
> 
> 赞同：0
> 
> 时间：2012-12-13T20:27:03.313
> 
> 标签：box2d, farseer

我在一个非常简单的 XNA 4 测试游戏中使用 Farseer Physics Engine 3.3.1。（注意：我也标记了这个 Box2D，因为 Farseer 是 Box2D 的直接端口，我很乐意接受解决这个问题的 Box2D 答案。）

在这个游戏中，我创造了两个身体。第一个主体是使用`BodyFactory.CreateCircle`and创建的`BodyType.Dynamic`。可以使用键盘（设置 Body.LinearVelocity）来移动这个身体。第二个主体是使用`BodyFactory.CreateRectangle`and创建的`BodyType.Static`。这个身体是静止的，从不移动。

然后我使用这段代码来计算两个物体碰撞时的碰撞力：

```
staticBody.FixtureList[0].AfterCollision += new AfterCollisionEventHandler(AfterCollision);

protected void AfterCollision(Fixture fixtureA, Fixture fixtureB, Contact contact)
{
    float maxImpulse = 0f;
    for (int i = 0; i < contact.Manifold.PointCount; i++)
        maxImpulse = Math.Max(maxImpulse, contact.Manifold.Points[i].NormalImpulse);

    // maxImpulse should contain the force of the collision
} 
```

如果这两个主体都设置为`IgnoreCCD=true`. 我可以 100% 可靠地计算出它们之间的碰撞力。完美的。

**但问题是：如果我将主体设置为 IgnoreCCD=false，那么该代码将变得非常不可预测。**AfterCollision 被可靠地调用，但由于某种原因，NormalImpulse 大约有 75% 的时间为**0**，因此仅记录了大约四分之一的碰撞。更糟糕的是，由于完全随机的原因，NormalImpulse 似乎为零。*动态物体可以以几乎完全相同*的方式连续 10 次与静态物体碰撞，并且只有 2 或 3 次碰撞会记录到大于零的 NormalImpulse。在两个身体上设置`IgnoreCCD=true`立即解决了问题，但随后我失去了连续的物理检测。

为什么会发生这种情况，我该如何解决？

* * *

这是一个简单的 XNA 4 解决方案的链接，该解决方案演示了这个问题的实际效果： [http ://www.mediafire.com/?a1w242q9sna54j4](http://www.mediafire.com/?a1w242q9sna54j4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:13:49.877

虽然我没有尝试过，所以我无法给出明确的答案，但我认为 Box2D 源代码的摘录可能是相关的：

```
/// This lets you inspect a contact after the solver is finished. This is useful
/// for inspecting impulses.
/// Note: the contact manifold does not include time of impact impulses, which can be
/// arbitrarily large if the sub-step is small. Hence the impulse is provided explicitly
/// in a separate data structure.
/// Note: this is only called for contacts that are touching, solid, and awake.
virtual void PostSolve(b2Contact* contact, const b2ContactImpulse* impulse)
{
    B2_NOT_USED(contact);
    B2_NOT_USED(impulse);
} 
```

这可能是 AfterContact 的基础，也就是说，用于将身体推回 CCD 的原始第一个接触位置的所有脉冲的中间结果（冲击脉冲时间）对你来说基本上是不可用的:(

# mysql - 如何加快这个 Wordpress Mysql 查询？

> ID：13867921
> 
> 赞同：0
> 
> 时间：2012-12-13T20:27:06.137
> 
> 标签：mysql, performance, wordpress

我在 Wordpress 网站上构建了一个搜索功能，用于搜索名称和地点，如下所示：

```
#name search
select user_id from wp_usermeta where meta_key='first_name' 
AND meta_value LIKE 'term' 
AND user_id in (SELECT post_author FROM wp_posts WHERE post_type='attachment' 
AND length(post_content) > 0 
AND length(post_title) > 0 
AND post_author in (SELECT post_author FROM wp_posts WHERE post_type='article')) 

UNION 

#locality search
select user_id from wp_usermeta where meta_key in ('zip', 'city', 'state', 'country') 
AND user_id in (select user_id from wp_usermeta where meta_key = 'user_type'and meta_value = 'user') 
AND (meta_value LIKE 'term') 
AND user_id in (SELECT post_author FROM wp_posts WHERE post_type='attachment' 
AND length(post_content) > 0 
AND length(post_title) > 0 
AND post_author in (SELECT post_author FROM wp_posts WHERE post_type='article')) 
group by user_id 
```

这大约需要 3 秒才能运行。我正在尝试查看是否有更快的方法可以编写此查询。我有 innoDB 和索引，但有很多记录。这是我最快的查询版本，但 3 秒仍然很慢。有任何想法吗？

编辑（SQL解释结果，倒数第二个值是行数）：

'1', 'PRIMARY', 'wp_usermeta', 'ref', 'meta_key,FH_DanB_1', 'FH_DanB_1', '768', 'const', '98252', '使用 where'

'2', 'DEPENDENT SUBQUERY', 'wp_posts', 'index_subquery', 'type_status_date,post_author', 'post_author', '8', 'func', '1', 'Using where'

'3', 'DEPENDENT SUBQUERY', 'wp_posts', 'index_subquery', 'type_status_date,post_author', 'post_author', '8', 'func', '1', 'Using where'

'4', 'UNION', 'wp_usermeta', 'index', 'meta_key,FH_DanB_1', 'user_id', '8', NULL, '510714', '使用where'

'6', 'DEPENDENT SUBQUERY', 'wp_posts', 'index_subquery', 'type_status_date,post_author', 'post_author', '8', 'func', '1', 'Using where'

'7', 'DEPENDENT SUBQUERY', 'wp_posts', 'index_subquery', 'type_status_date,post_author', 'post_author', '8', 'func', '1', 'Using where'

'5', 'DEPENDENT SUBQUERY', 'wp_usermeta', 'ref', 'user_id,meta_key,FH_DanB_1', 'FH_DanB_1', '776', 'const,func', '1', 'Using where'

wp_usermeta 有超过 500k 行，但我认为我应该索引列 meta_value？

不确定我是否可以使查询本身在语法上更快。

这里使用的两个表是 wp_posts（post_author、post_date、post_date_gmt、post_content、post_title、post_excerpt、post_status、comment_status、ping_status、post_password、post_name、to_ping、pinged、post_modified、post_modified_gmt、post_content_filtered、post_parent、guid、menu_order、post_type、post_mime_type、comment_count 、上、下、流行度、robotsmeta、meta_robots）和 wp_usermeta（meta_id、user_id、meta_key、meta_value）。wp_posts.post_author 值与 wp_usermeta.user_id 相同。wp_posts 有超过 100K 行，wp_usermeta 有超过 500k。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:46:01.040

我无法测试您的查询，但我会这样做：

*   用内部连接替换 IN 子句
*   用`meta_value LIKE 'term'`_`meta_value='term'`
*   删除`GROUP BY`作为联合查询（无`union all`子句）已删除重复项
*   在键上添加索引，也可能在某些文本字段上添加索引。

如果我没有犯任何错误，这应该是结果查询：

```
select wp_usermeta.user_id
from
  wp_usermeta inner join wp_posts wp1
  on wp_usermeta.user_id=wp1.post_author and wp1.post_type='attachment'
  inner join wp_posts wp2
  on wp_usermeta.user_id=wp2.post_author and post_type='article'
where
  wp_usermeta.meta_key='first_name' 
  AND wp_usermeta.meta_value='term' 
  AND length(wp_usermeta.post_content) > 0 
  AND length(wp_usermeta.post_title) > 0 

UNION 

select wp_um1.user_id
from
  wp_usermeta wp_um1 inner join wp_usermeta wp_um2
  on wp_um1.user_id=wp_um2.user_id and wp_um2.meta_key = 'user_type'
     and wp_um2.meta_value = 'user'
  inner join wp_posts wp1
  on wp_usermeta.user_id=wp1.post_author and wp1.post_type='attachment'
  inner join wp_posts wp2
  on wp_usermeta.user_id=wp2.post_author and post_type='article'
where
  wp_um1.meta_key in ('zip', 'city', 'state', 'country')
  AND (wp_um1.meta_value = 'term')
  AND length(wp_um1.post_content) > 0
  AND length(wp_um1.post_title) > 0 
```

**编辑**：我想尝试的最后一个想法是这个。您可以替换这部分：

```
 inner join wp_posts wp1
  on wp_usermeta.user_id=wp1.post_author and wp1.post_type='attachment'
  inner join wp_posts wp2
  on wp_usermeta.user_id=wp2.post_author and post_type='article' 
```

有了这个：

```
inner join (select post_author
            from wp_posts
            where post_type in ('attachment','article')
            group by post_author
            having count(*)>1) wp on wp_usermeta.user_id = wp.post_author 
```

根据您的数据结构如何，它可以使查询更快，但也更慢......

# javascript - 使用 JavaScript 查找下一个标题的标记名和索引

> ID：13867923
> 
> 赞同：1
> 
> 时间：2012-12-13T20:27:08.900
> 
> 标签：javascript, jquery, dom

我正在为每个标题寻找下一个标题标记名和带有 JavaScript/jQuery 的索引。例如，如果第一个标题是 h1，第二个是 h2，第三个是 h1，并且您在第二个 h2 上执行了函数，您将获得标记名 h1 和索引 1（从 0 开始），因为它是第二个 h1 . 这是我的代码。奇怪的是，它总是将 h2 作为标记名，将 0 作为索引！

```
$("h1, h2, h3, h4, h5, h6").each(function(index){
    var nexth = $(this.tagName.toLowerCase() + "~ h1, h2, h3, h4, h5, h6")[0];
    var nexthtagname = nexth.tagName.toLowerCase();
    var nexthindex = $(nexthtagname).index(nexth);
    alert("Tag Name: " + nexthtagname + ", Index: " + nexthindex);
}); 
```

这是一些测试html：

```
<h1>Header 1</h1>
<p>Test</p>
<h2>Header 1.1</h2>
<p>Test</p>
<h3>Header 1.1.1</h3>
<p>Test</p>
<h3>Header 1.1.2</h3>
<h2>Header 1.2</h2>
<p>Test</p>
<h1>Header 2</h1>
<p>Test</p>
<h4>Header 2.0.0.1</h4> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:41:03.063

问题是你的选择器变成了`$("h2 ~ h1, h2 ...")`——你想实际使用元素本身来获取下一个元素类型：

```
var nexth = $(this).nextAll("h1, h2, h3, h4, h5, h6").first()[0]; 
```

据我所知，jQuery 没有“下一个类型”的方法，但我可能是错的。使用`$(this).next('h1, h2...')`将不起作用，因为这需要下一个兄弟在该过滤器中。 `nextAll`将查看所有以下兄弟姐妹，但您只想要下一个（因此`first`）。您的索引代码显示正确。看：

[http://jsfiddle.net/wTubu/](http://jsfiddle.net/wTubu/)

请注意，这将导致最后一个元素出错；您可以只检查是否`.nextAll`有长度，或者是否`nexth`未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:07:22.917

不要把它弄得那么复杂。您已经拥有按文档顺序排列的有效标题集合！

```
var headings = $("h1, h2, h3, h4, h5, h6").get();
for (var i=0; i<headings.length-1; i++) {
    var cur = headings[i],
        next = headings[i+1];
     … // get tag name etc
} 
```

# plsql - 创建触发器以更新插入或更新记录的时间戳？

> ID：13867926
> 
> 赞同：0
> 
> 时间：2012-12-13T20:27:18.127
> 
> 标签：plsql

我正在尝试创建一个 Oracle 触发器，该触发器将在某个表的每个插入或更新的记录上更新`entry_stamp`列（type= ）。`DATE`这是我的脚本：

```
CREATE OR REPLACE TRIGGER mytable_entry_stamp 
AFTER INSERT OR UPDATE ON mytable FOR EACH ROW
BEGIN :NEW.entry_stamp := SYSDATE; END; 
```

我收到此错误：

> ORA-04084: 无法更改此触发器类型的新值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:27:18.127

来自[Oracle/PLSQL：更新后触发器](http://www.techonthenet.com/oracle/triggers/after_update.php)：

*   您不能更新 :NEW 值。
*   您不能更新 :OLD 值。

`AFTER`与 MSSQL 不同，Oracle 似乎无法更新触发器内的记录。因此它保留用于记录/审计目的，即可以**在另一个表**中插入或更新记录。在我将此触发器转换为 后`BEFORE`，它完美地工作。

# c++ - C ++如何使用按值传递和按引用传递重载方法

> ID：13867933
> 
> 赞同：2
> 
> 时间：2012-12-13T20:27:45.380
> 
> 标签：c++, overloading

如何使以下重载工作

```
#include <iostream>

using namespace std;

int subtractFive (int a)
{
    a = a - 5;

    return a;
}

int subtractFive (int &a)
{
    a = a -5;

    return a -5;
}

int main()
{
    int A = 10;

    cout << "Answer: " << subtractFive(*A) << endl;
    cout << "A Value "<< A << endl;

    cout << "Answer: " << subtractFive(A) << endl;
    cout << "A Value "<< A << endl;

    return 0;
} 
```

试过但没有编译

```
 #include <iostream>

using namespace std;

int subtractFive (int a)
{
    a = a - 5;

    return a;
}

void subtractFive (int* a)
{
    *a = *a -5;
}

int main()
{
    int A = 10;

    cout << "Answer: " << subtractFive(A) << endl;
    cout << "A Value "<< A << endl;

    subtractFive(A);
    cout << "A Value "<< A << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:12:13.190

值和引用具有相同的类型，因此您不能对其进行重载。如果您想要两个函数，其中一个修改其参数，另一个返回新值，那么您必须给它们不同的名称或不同的类型（例如，使后一个函数使用指针类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:33:11.827

将一个函数声明为按**地址**传递，另一个按值或引用传递：

```
void subtractByFive(int * p_value)
{
    if (p_value != NULL)
    {
       *p_value -= 5;
    }
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:30:36.137

您可以尝试指定一个将地址作为参数的重载：

```
int subtractFive (int *a)
{
    *a = *a -5;

    return *a -5;
} 
```

# c# - XAML：如何使内容大小强制父对象和其他对象的高度？

> ID：13867936
> 
> 赞同：3
> 
> 时间：2012-12-13T20:27:55.583
> 
> 标签：c#, xaml

如果可能，我想用纯 XAML 解决以下问题，但如果不可能，请告诉我。我也没有 C# 解决方案，所以如果必须使用它，请发送给我适当的路径：

在下面，有一个 2 列的网格。左列是具有动态内容的滚动查看器。右列是具有动态内容的堆栈面板。我希望右栏的内容控制父网格和左栏的高度——换句话说，我希望右栏为主。在右列中可能有 3 个项，也可能有 10 个。如果只有 3 个，则整个网格的高度应该很短，并且左侧滚动查看器中的内容应该滚动。左侧滚动查看器中可能有 100 个项目，所以我不能让那个项目控制高度。

这是示例代码：

```
 <Grid x:Name="grd_Parent" Background="#FFF4E9FF">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <ScrollViewer x:Name="Left" Grid.Column="0">
            <!-- This side should scale (and scroll) to the height of the right column-->
            <StackPanel VerticalAlignment="Top">
                <Rectangle Height="50" Fill="Red"/>
                <Rectangle Height="50" Fill="Blue"/>
                <Rectangle Height="50" Fill="Black"/>
                <Rectangle Height="50" Fill="Brown"/>
                <Rectangle Height="50" Fill="Purple"/>
                <Rectangle Height="50" Fill="DarkGreen"/>
                <Rectangle Height="50" Fill="Violet"/>
                <Rectangle Height="50" Fill="Wheat"/>
                <Rectangle Height="50" Fill="DarkCyan"/>
                <Rectangle Height="50" Fill="DarkGray"/>
                <Rectangle Height="50" Fill="DarkOrange"/>
            </StackPanel>
        </ScrollViewer>
        <StackPanel x:Name="Right" Grid.Column="1" VerticalAlignment="Top">
            <!-- This content is dynamic as well, but height of this should be the height of the parent grid -->
            <TextBlock Height="50" Text="This"/>
            <TextBlock Height="50" Text="Side"/>
            <TextBlock Height="50" Text="Should"/>
            <TextBlock Height="50" Text="Determine"/>
            <TextBlock Height="50" Text="The"/>
            <TextBlock Height="50" Text="Height"/>
            <TextBlock Height="50" Text="Of"/>
            <TextBlock Height="50" Text="Parent"/>
        </StackPanel>
    </Grid> 
```

这是存在的示例的屏幕截图： ![示例应用](../Images/6145ceb265b0aa265b16b95a0321a766.png)

这是我希望它看起来像的屏幕截图： ![示例应用程序正确](../Images/ab4b2f1ff32ab9ce1ade8ff07f57be86.png)

提前致谢， 比姆斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:34:11.627

试试这个，让我知道它是否有效。以下更改导致 ScrollViewer 绑定到 StackPanel 的 ActualHeight。这样，它永远不会大于 StackPanel。

```
<Grid x:Name="grd_Parent" Background="#FFF4E9FF">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1*"/>
        <ColumnDefinition Width="1*"/>
    </Grid.ColumnDefinitions>
    <ScrollViewer x:Name="Left" Height="{Binding ElementName=Right, Path=ActualHeight}" Grid.Column="0">
        <!-- This side should scale (and scroll) to the height of the right column-->
        <StackPanel VerticalAlignment="Top">
            <Rectangle Height="50" Fill="Red"/>
            <Rectangle Height="50" Fill="Blue"/>
            <Rectangle Height="50" Fill="Black"/>
            <Rectangle Height="50" Fill="Brown"/>
            <Rectangle Height="50" Fill="Purple"/>
            <Rectangle Height="50" Fill="DarkGreen"/>
            <Rectangle Height="50" Fill="Violet"/>
            <Rectangle Height="50" Fill="Wheat"/>
            <Rectangle Height="50" Fill="DarkCyan"/>
            <Rectangle Height="50" Fill="DarkGray"/>
            <Rectangle Height="50" Fill="DarkOrange"/>
        </StackPanel>
    </ScrollViewer>
    <StackPanel x:Name="Right" Grid.Column="1" VerticalAlignment="Top">
        <!-- This content is dynamic as well, but height of this should be the height of the parent grid -->
        <TextBlock Height="50" Text="This"/>
        <TextBlock Height="50" Text="Side"/>
        <TextBlock Height="50" Text="Should"/>
        <TextBlock Height="50" Text="Determine"/>
        <TextBlock Height="50" Text="The"/>
        <TextBlock Height="50" Text="Height"/>
        <TextBlock Height="50" Text="Of"/>
        <TextBlock Height="50" Text="Parent"/>
    </StackPanel>
</Grid> 
```

# sql - SQL 在视图中创建新列

> ID：13867938
> 
> 赞同：0
> 
> 时间：2012-12-13T20:28:04.167
> 
> 标签：sql

我的高级技术人员准备了一个视图。查看源脚本，我无法理解该列的`label`存在位置，因为两个表都不包含该列。它是作为视图的一部分存在的列吗？

```
select label labelName
, e.name
, e.country 
from entity e 
```

源脚本：

```
SELECT e.entity_id
, se.screen_id
, s.country_code
,desc_trans translatedValue
, et.language_code
, cp.NAME name
FROM entity e 
LEFT OUTER JOIN CONTROL_PREFIX cp 
    ON e.CONTROL_PREFIX_CODE = cp.CONTROL_PREFIX_CODE
, entity_trans et
, screen s
, screen_entity se
WHERE e.entity_id = et.entity_id 
AND e.entity_id = se.entity_id 
AND se.screen_id = s.screen_id 
AND e.entity_type_code = 'LB'

UNION

SELECT e.entity_id
, se.screen_id
, s.country_code
, field_name labelName
, label labelText
, NULL translatedValue
, l.language_code
, cp.NAME name
FROM entity e 
LEFT OUTER JOIN CONTROL_PREFIX cp 
    ON e.CONTROL_PREFIX_CODE = cp.CONTROL_PREFIX_CODE
, language l
, screen s
, screen_entity se
WHERE l.language_code NOT IN
(
    SELECT et1.language_code
    FROM entity e1
    , entity_trans et1
    WHERE e1.entity_id = et1.entity_id 
    AND e1.entity_id = e.entity_id 
    AND e1.entity_type_code = 'LB'
) 
AND e.entity_type_code = 'LB' 
AND s.screen_id = se.screen_id 
AND e.entity_id = se.entity_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:32:47.893

假设您发布的SQL是用于生成视图的SQL并且是完整的

IE

```
create view myView as
select label labelName
, e.name
, e.country 
from entity e 
```

列`Label`在表格上，`Entity`但在视图中显示`myView`为`LabelName`。

如果`entity`是视图的名称，您需要提供该视图背后的源代码。

# jquery - 如何立即执行功能？

> ID：13867939
> 
> 赞同：1
> 
> 时间：2012-12-13T20:28:05.003
> 
> 标签：jquery

我有 10 个功能：

```
$("#one").mouseenter(function(){
$('#two,#three,#four,#five').fadeTo(700,0.2);
});
$("#one").mouseleave(function(){
$('#two,#three,#four,#five').fadeTo(700,1);
});

$("#two").mouseenter(function(){
$('#one,#three,#four,#five').fadeTo(700,0.2);
});
$("#two").mouseleave(function(){
$('#one,#three,#four,#five').fadeTo(700,1);
}); 
```

ETC...

如何让每个功能立即行动？目前，他们等待功能完成，然后再开始下一个功能。如果您在函数完成之前从 div 1 转到 div 2，这会导致[混乱（例如）。](http://tragicclothing.co.uk/index%202.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:30:19.243

```
$("#one").stop().fadeTo() 
```

[的文档`.stop`](http://api.jquery.com/stop/)，它会停止任何当前动画。

我也可能建议您使用类：

```
$(".thing").mouseenter(function () {
   $(".thing").not(this).stop().fadeTo(700, 0.2);
}); 
```

# web-applications - 如何在我的代码更新其内容时防止网页被查看

> ID：13867940
> 
> 赞同：1
> 
> 时间：2012-12-13T20:28:05.007
> 
> 标签：web-applications, web, glassfish-3

所以基本上我已经创建了一个网页，我的服务器端代码每 20 分钟运行一次以更新网页的内容。更新通常需要大约 10-15 秒（大量数据）。

现在，如果用户在更新网页时尝试访问网页会发生什么？我可以阻止用户在更新期间查看网页吗？或者有没有更好的方法来确保用户不会获得部分更新的网页？

我使用 glassfish 作为我的网络服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:34:30.933

**简而言之：**如果有一个繁重的更新过程，我会查看**某种类型的通知服务消息**来向用户提供反馈。一条信息性消息，例如：“正在生成最新数据。请在 10 分钟后访问。”

您还可以提供一个**弹出窗口，允许用户在**更新信息可供查看后通过电子邮件或其他方式订阅通知。

# messaging - 发送 500K 64 字节消息时，ZMQ 的适当设置是什么？

> ID：13867942
> 
> 赞同：6
> 
> 时间：2012-12-13T20:28:12.703
> 
> 标签：messaging, zeromq

我有一个应用程序需要定期发送其当前状态的快照，当前状态将由大约 500,000 条 64 字节消息表示。我一直难以使用 ZMQ 快速可靠地发送和接收这么多消息。

我目前一直在通过 tcp 使用 PUB/SUB 来执行此操作，但我并不热衷于模式或协议，只要它能完成工作。在我的实验中，我专注于处理发送和接收高水位标记、发送和接收缓冲区设置，并在发送循环中添加一些睡眠以尝试减慢它的速度。使用对我来说似乎相当慷慨的设置（500K HWM，10MB 缓冲区）并且仅使用环回连接，消息仍然无法始终如一地接收。

我对这些或其他调整参数的适当设置感兴趣，更广泛地对如何推断各种设置将产生的影响感兴趣。

一些可能有助于提供适当答案的进一步细节：

*   分布是一对多的。预计收件人人数约为 20 人。

*   每条消息代表一组关于不同金融工具的信息，所有这些信息都是同时观察到的。在我看来，既可以将它们组合成一个大消息（所有消息的集合在逻辑上构成一个完整的快照），也可以将它们分开（客户可能只对某些工具感兴趣，我认为这会有所帮助更容易过滤掉它们）。

*   消息的预期频率基本上不快于每 20 毫秒，也不慢于 5 秒。我实际登陆的位置可能会受到性能考虑的影响（即，我的服务器实际上可以多快将消息抽出，以及什么样的数据速率会证明对客户端来说是压倒性的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T08:42:34.170

让我们分解一下。

首先，为什么 HWM 不能“工作”：

HWM 不是一个确切的限制，因为内部缓冲区由两个单独的线程填充和清空，当有很多活动时，可用空间的计数可能会滞后很多。0MQ zmq_setsockopt 手册页说：“0MQ 不保证套接字将接受与 ZMQ_SNDHWM 一样多的消息，实际限制可能会降低 60-70%，具体取决于套接字上的消息流。”

其次，您为什么会丢失消息：

当您将 0.5M 消息 (x 20) 转储到套接字的缓冲区中时，您将随机命中 HWM，然后 PUB 套接字的行为是丢弃它无法排队的消息。

三、如何解决：

将状态分解为单独的消息的理由为零；这样做的唯一理由是，如果状态不适合记忆，它很容易做到。作为多部分发送（ZMQ_SNDMORE）；这将创建一条有效消息，该消息在传出缓冲区中占用 1 个插槽。

然后，删除您的 500K HWM 限制并恢复为默认值 (1000)，这将绰绰有余。

四、如何获得更好的性能：

显然，尽可能地描述和改进您的发布者和订阅者代码；这些是通常的瓶颈。

然后，如果消息是稀疏的，请考虑对消息进行某种形式的压缩，并且您可以在没有太多 CPU 成本的情况下做到这一点。在 20 个订阅者时，您从网络开销中获得的收益通常比从 CPU 成本中损失的多。

最后，如果您增长到更多的订阅者并且它是一个关键系统，请查看 PGM 多播，这将有效地消除网络成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T21:03:38.913

经过一天半随机的各种组合试验，我得出以下初步结论：

*   在我的发送循环中添加 sleep 语句以限制消息速率，基本上可以使用任何一组选项来提高可靠性。

*   将 500,000 条消息作为单个消息的帧而不是 500,000 条单独的消息发送可以提高可靠性。

*   使用 epgm 而不是 tcp 协议可以实现更高的吞吐量。

*   使用 epgm，多播速率选项需要与 sleep 语句实现的所需消息速率相匹配。

*   增加高水位线和缓冲区有助于提高可靠性，但您必须同时增加这两个设置，并在客户端和服务器上都这样做。如果所有这些都没有结合起来，它往往无济于事。您必须将这些设置得相当高才能使单个消息（而不是单个消息的帧）运行任何类型的可靠性。在这种情况下，直到我将高水位标记设置为 1,000,000 并将缓冲区设置为 65 MB 之前，我并没有得到好的结果。（两倍于我试图发送的消息集的大小。）这远远高于我本能地想尝试的。该案例在每轮 500K 消息之间暂停 5 秒。将间隔降低到 1 秒，我不得不将它们推得更高，达到单批消息大小的 4 倍。

*   使用 epgm，恢复间隔设置没有多大帮助。

# windows-8 - 如何检测 XAML 滑块何时完成？

> ID：13867948
> 
> 赞同：6
> 
> 时间：2012-12-13T20:28:40.433
> 
> 标签：windows-8, winrt-xaml

在 XAML 中，我有`<Slider />`. 它有 ValueChanged 事件。每次更改 Value 时都会触发此事件。我需要检测值更改何时结束。LostFocus、PointerReleased 不是正确的事件。我怎样才能检测到这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-16T09:12:28.510

XAML、**WinRT**、Windows8.1 和 UWP：

**PointerCaptureLost**事件应该适用于键盘的鼠标/触摸
**KeyUp事件**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-06T17:01:17.840

您可以创建一个新类并从 Slider 继承。从那里开始，您可以查找 Thumb 控件并监听您想要的事件。

像这样的东西应该工作：

```
public class SliderValueChangeCompletedEventArgs : RoutedEventArgs
{
    private readonly double _value;

    public double Value { get { return _value; } }

    public SliderValueChangeCompletedEventArgs(double value)
    {
        _value = value;
    }
}
public delegate void SlideValueChangeCompletedEventHandler(object sender, SliderValueChangeCompletedEventArgs args);

public class ExtendedSlider : Slider
{
    public event SlideValueChangeCompletedEventHandler ValueChangeCompleted;
    private bool _dragging = false;

    protected void OnValueChangeCompleted(double value)
    {
        if (ValueChangeCompleted != null)
        {
            ValueChangeCompleted(this, new SliderValueChangeCompletedEventArgs(value) );
        }
    }

    protected override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        var thumb = base.GetTemplateChild("HorizontalThumb") as Thumb;
        if (thumb != null)
        {
            thumb.DragStarted += ThumbOnDragStarted;
            thumb.DragCompleted += ThumbOnDragCompleted;
        }
        thumb = base.GetTemplateChild("VerticalThumb") as Thumb;
        if (thumb != null)
        {
            thumb.DragStarted += ThumbOnDragStarted;
            thumb.DragCompleted += ThumbOnDragCompleted;
        }
    }

    private void ThumbOnDragCompleted(object sender, DragCompletedEventArgs e)
    {
        _dragging = false;
        OnValueChangeCompleted(this.Value);
    }

    private void ThumbOnDragStarted(object sender, DragStartedEventArgs e)
    {
        _dragging = true;
    }

    protected override void OnValueChanged(double oldValue, double newValue)
    {
        base.OnValueChanged(oldValue, newValue);
        if (!_dragging)
        {
            OnValueChangeCompleted(newValue);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-13T09:02:43.240

您可以使用一对布尔值 isValueChanged 和（如果可能在不操纵指针的情况下更改值）isPressed；

```
private void Slider_ValueChanged(object s, RangeBaseValueChangedEventArgs e) {
    if (!isPressed) {
        AcceptChanges();
    } else {
        isValueChanged = true;
    }
} 
```

初始化代码：

```
Window.Current.CoreWindow.PointerPressed += (e, a) => { isPressed = true; };

Window.Current.CoreWindow.PointerReleased += (e, a) => {
    isPressed = false;
    if (isValueChanged) AcceptChanges();
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T10:37:12.047

`Slider`我在 Windows8/WinRT 上使用 a 时遇到了类似的问题。

我的问题如下：我正在对事件做出反应`ValueChanged`并在每次触发后执行长时间的操作（异步写入文件）。从而遇到并发编辑异常。为了避免这种情况，我使用了`DispatcherTimer`.

```
 //Class member
    private DispatcherTimer myDispatcherTimer = null;

    private void OnSliderValueChanged(object sender, RangeBaseValueChangedEventArgs e)
    {
        //I update my UI right away
        ...

        //If the dispatcher is already created, stop it
        if (myDispatcherTimer!= null)
            myDispatcherTimer.Stop();

        //Overwrite the DispatcherTimer and thus reset the countdown
        myDispatcherTimer= new DispatcherTimer();
        myDispatcherTimer.Tick += (sender, o) => DoSomethingAsync();
        myDispatcherTimer.Interval = new TimeSpan(0,0,2);
        myDispatcherTimer.Start();
    }

    private async void DoSomethingAsync()
    {
        await DoThatLongSaveOperation();
    } 
```

您无法直接检测最终值是什么，但您至少可以延迟操作，直到两次更新之间有长时间的停顿（例如，在我的情况下，如果用户拖动滑块并在保持拖动 2 秒的同时停止，则无论如何都会触发保存操作）。

# html5-video - 关于 video.js 的一些普遍疑问

> ID：13867969
> 
> 赞同：6
> 
> 时间：2012-12-13T20:30:20.733
> 
> 标签：html5-video, video.js

我对球员有一些普遍的怀疑。我会列出它们：

1.  video.js 是否支持 HLS 视频格式？如果是这样，在什么平台上？（浏览器、设备、浏览器...？）。对不起，我在网站上搜索了这个，没有找到任何东西。

2.  我看到 Ogg 和 MP4 文件格式是最受支持的文件类型，而 WebM 则不是那么多。我已经搜索了 WebM 是什么……那是 HLS 吗？除了网站上未列出的文件格式之外，还有其他支持的文件格式吗？

3.  video.js 是否支持视频广告和谷歌分析？

4.  播放功能，类似于视频结尾的列表，我可以在其中选择另一个。那可能吗？

5.  是否支持自适应流媒体？也就是根据不断变化的网络条件调整传送到网页的视频质量？

6.  自定义玩家创建皮肤并在其上应用它们是否容易？例如，我可以在播放器上放置我的网站符号吗？

我认为是这样。

如果有人可以提供帮助，我将非常高兴。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T21:31:49.283

> video.js 是否支持 HLS 视频格式？如果是这样，在什么平台上？（浏览器、设备、浏览器...？）。对不起，我在网站上搜索了这个，没有找到任何东西。

是的，今天在任何通过 HTML5（iPhone、Desktop Safari）支持它的平台上使用源代码上的“application/x-mpegURL”mimetype。很快也将在所有桌面上支持 HLS。

> 我看到 Ogg 和 MP4 文件格式是最受支持的文件类型，而 WebM 则不是那么多。我已经搜索了 WebM 是什么……那是 HLS 吗？除了网站上未列出的文件格式之外，还有其他支持的文件格式吗？

实际上，就最终用户支持而言，WebM、MP4 和 Ogg 现在都非常紧密地联系在一起。WebM 与 Ogg 一样是一种开放且免费的格式，但压缩效果更好。WebM 不是 HLS。HLS 是 MPEG-TS 视频文件段的播放列表。

![在此处输入图像描述](../Images/168ebb43400e00733d59c9825876ffef.png)

> video.js 是否支持视频广告和谷歌分析？

很快。

> 播放功能，类似于视频结尾的列表，我可以在其中选择另一个。那可能吗？

您可以自己构建它。目前还没有预制的解决方案。

> 是否支持自适应流媒体？也就是根据不断变化的网络条件调整传送到网页的视频质量？

通过 HLS，是的。

> 自定义玩家创建皮肤并在其上应用它们是否容易？例如，我可以在播放器上放置我的网站符号吗？

Video.js 都是开源的，皮肤是使用 HTML、CSS 和 JavaScript 构建的。如果您对这些技术感到满意，那么让它看起来像您想要的应该不难。

**总结**
过去几年 Video.js 一直是我的副项目，但 Zencoder（我的公司）被 Brightcove 收购，现在我开始全职工作，并得到 Brightcove 玩家团队的帮助。所以期待大事的到来。如果您受到启发，我仍然很乐意获得更多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:14:37.127

> 那个闪光灯兼容吗？

是的：如果配置正确，如果浏览器本身不支持该`<video>`元素，它将回退到使用其内置的 Flash 播放器。

您可以覆盖它，例如强制它一直使用它的 Flash 播放器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:35:55.653

您可以使用以下 API 自定义在 Google Analytics 中跟踪 VideoJS 3.2 视频事件：

```
// Once the video is ready
_V_("video-embed-1234").ready(function(){

    // Google Analytics event tracking
    var trackGaEvent = function() {
        var playerState = this;

        // Determine time
        var date = new Date( event.timeStamp );

        var hours = date.getHours();
        if ( hours < 10 ) hours = "0" + hours.toString();
        var minutes = date.getMinutes();
        if ( minutes < 10 ) minutes = "0" + minutes.toString();
        var seconds = date.getSeconds();
        if ( seconds < 10 ) seconds = "0" + seconds.toString();

        var formattedTime = hours + ':' + minutes + ':' + seconds;

        // Log event
        var gaCategory = 'VideoJS';
        var videoId = playerState.id;
        var playerStateUrl = videoId.replace('benchfly-embed-', 'https://secured.benchfly.com/player/') + '/';
        _gaq.push([ '_trackEvent', gaCategory, event.type, playerStateUrl, formattedTime, false ]);
    };

    // Attach GA tracking to event listeners
    this.addEvent( "play", trackGaEvent );
    this.addEvent( "pause", trackGaEvent );
    this.addEvent( "load", trackGaEvent );
    this.addEvent( "ended", trackGaEvent );
    this.addEvent( "volumechange", trackGaEvent );

}); 
```

# node.js - 如何检查用户是否已经在 NodeJS 和 Mongoose 应用程序中评价了该项目？

> ID：13867971
> 
> 赞同：0
> 
> 时间：2012-12-13T20:30:33.927
> 
> 标签：node.js, mongodb, mongoose

我在猫鼬中有以下模式：

```
UserSchema = new Schema({
    ratings = [{type : Schema.ObjectId, ref : 'Rating'}] })

ItemSchema = new Schema({
    ratings = [{type : Schema.ObjectId, ref : 'Rating'}] })

Rating = new Schema({
    user = [{type : Schema.ObjectId, ref : 'User'}],
    venue = [{type : Schema.ObjectId, ref : 'Venue'}]
}) 
```

他们是对的吗？我应该查询用户的评分，项目的评分。另外我想检查用户是否已经评价了一个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:30:41.193

您可以使用以下两个选项。

您可以维护一个单独的集合`Rating`，这与您在 SQL 中所做的非常相似。

```
User: voter (reference to User object),
Item: item_voted (reference to item object),
Rating: what so ever user rated
Time: time_rated,
other fields as per your requirements... 
```

现在维护索引`User`并`Item`增加查询以检查用户是否已经对某个项目进行了评分。

`OR``User`您可以在集合中为该用户评分的项目维护一个数组，并对该数组进行索引。这就是您可以拥有的数据模型`User`。

```
items_rated: [item1, item2, item3]
other fields of User as per your requirements... 
```

第二种方法有一个限制，如果您的 BSON 记录超过 16MB 限制，它会失败，但在实际使用中，您实际达到该限制的可能性非常小。虽然无话可说。如果您的用户像一些顶级 stackoverflow 用户一样疯狂，您将遇到 16MB 的墙：P

您可以检查项目是否已评级的方式（如果您选择第二选择）

```
if (db.user.count({item_rated: item_k, _id:'user-id-1'}) == 0) { ... } 
```

# playframework - 玩！框架，在视图标记中定义字符串

> ID：13867974
> 
> 赞同：1
> 
> 时间：2012-12-13T20:30:38.560
> 
> 标签：playframework, playframework-2.0

我刚开始使用 Play！2.0 并且我无法找到有关视图标记的任何好的文档或教程。我将我的“主要”视图定义为：

```
@(title: Html, nav: String = "")(content: Html) 
```

我不确定为什么标题参数是/是 Html，所以我将其更改为 String。现在，在另一种观点中，我有这个：

```
@title = {
    Sign Up
}

@main(title, nav = "signup") { etc...} 
```

我想将标题的定义更改为字符串，因此我将该定义更改为：

```
@title = "My Title goes here"

@main(title, nav = "signup") { etc...} 
```

但是当我尝试这样做时，刷新页面时出现错误：“未找到：值标题”。如何在这里定义字符串，就像定义 Html 一样？我意识到我可以将字符串放在第二行的 main 调用中，但我在这里想知道的是如何为字符串设置@title，就像为 Html 所做的那样。

另外，任何人都有一些好的标记教程或文档的链接（相当于[2.0 的链接会很棒](http://www.playframework.org/documentation/1.0/templates)）？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:31:44.803

请参阅[http://www.playframework.org/documentation/2.0.4/ScalaTemplates](http://www.playframework.org/documentation/2.0.4/ScalaTemplates)声明可重用块

```
@title = @{"My Title goes here"}

@main(title) {etc...} 
```

# c# - WS_EX_COMPOSITED causes entire app to flicker/shimmer when tab control has too many tabs

> ID：13867978
> 
> 赞同：8
> 
> 时间：2012-12-13T20:30:45.940
> 
> 标签：c#, winforms

为了解决闪烁的问题，我求助于`WS_EX_COMPOSITED`在 winforms 应用程序中使用。在选项卡控件获得如此多的选项卡以创建“滚动箭头”之前，这非常有效。在这一点上，我的整个应用程序看起来就像它不断重绘，到处闪烁闪烁。

为了查看它是否只是我的应用程序，我编写了一个简单的 winforms 程序来测试它。它所包含的只是一个带有添加选项卡的按钮的选项卡控件，并且它的表单已`WS_EX_COMPOSITED`启用......果然，当我单击添加按钮并出现滚动箭头时会发生闪烁。

多行选项卡控件解决了这个问题，但我在应用程序中没有空间来使用它。对于我的测试应用程序来说，代码真的很简单......只是添加了一个标签页和一个按钮，然后在表单中做了：

```
 protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
            return cp;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.tabControl1.TabPages.Add("SomeTab");
    } 
```

如果这很重要，我正在运行win7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T23:12:26.650

看看这个问题的答案[flicker free tab control with WS_EX_COMPOSITED](https://stackoverflow.com/questions/4188306/flicker-free-tab-control-with-ws-ex-composited)

可能需要一些时间来解决，但它应该会有所帮助。

# magento - Magento：当子引用更改时如何删除父对象？

> ID：13867979
> 
> 赞同：0
> 
> 时间：2012-12-13T20:30:49.713
> 
> 标签：magento

鉴于：

Magento 中的两个自定义类，它们之间具有多对一关系。
孩子持有父母的外键。
数据库设置为级联删除。

在某些情况下，孩子的参考更改为不同的父母。在其中一些情况下，我想在子项的 afterSave 方法中删除父项。当我这样做时，孩子本身就消失了，因为 FK 到新父级的更改尚未写入数据库，并且数据库级级联启动。

在子对象中写入新外键后，如何安排删除父对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:03:38.563

`afterSave`正如您自己注意到的那样，在将查询写入 DB 之前触发。您需要使用`*_save_commit_after`事件。星号是您的 Models `event_prefix`。创建一个 Observer 并监听这个事件，这样可以确保 DB 中的信息已经更新，并且不会受到外键影响。

# actionscript-3 - Flash中奇怪的对象属性问题

> ID：13867983
> 
> 赞同：0
> 
> 时间：2012-12-13T20:31:17.353
> 
> 标签：actionscript-3, flash, object, movieclip

我在我的 Flash 游戏中遇到了一个相当奇怪的问题。我收到“错误 #1009：无法访问空对象引用的属性或方法”。以下代码块中的错误：

```
 public function createHero()
    {
        hero = new Object();
        hero.mc = gamelevel.hero;
        hero.dx = 0.0;
        hero.dy = 0.0;
        hero.inAir = false;
        hero.direction = 1;
        hero.animstate = "stand";
        hero.walkAnimation = new Array(2, 3, 4, 5, 6, 7, 8);
        hero.animstep = 2;
        hero.jump = false;
        hero.moveLeft = false;
        hero.moveRight = false;
        hero.jumpSpeed = 0.8;
        hero.walkSpeed = 0.15;
        hero.width = 64.0;
        hero.height = 96.0;
        hero.startX = hero.mc.x;
        hero.startY = hero.mc.y;
        hero.profile = "technology";
        hero.ability = "robot";
        hero.activePhotoFrame = false;
    } 
```

使用调试器，我将错误缩小到“hero.mc = gamelevel.hero;”。我尝试通过使用测试对象来确定 hero.mc 或 gamelevel.hero 是否是罪魁祸首。

```
 testObject = gamelevel; //worked perfectly fine
    testObject = gamelevel.hero; //gave the error
    testObject.mc = gamelevel; //also gave the error
    testObject.mc = gamelevel.hero; //gave the same error as well 
```

我不明白问题是什么。为了澄清，“gamelevel”是包含另一个实例名称为“hero”的movieclip的实例名称

问题不仅限于英雄对象。如果我将其注释掉，我会收到任何其他将 gamelevel.something 分配给 mc 属性的对象的错误。

更奇怪的是，这之前工作得非常好。

如果需要任何其他信息，请随时询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:24:40.040

必须在舞台上才能访问舞台实例。

this.addEventListener(Event.ADDED_TO_STAGE,createHero)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:10:53.087

原来其中一张图片已损坏...

# entity-framework - 在 Visual Studio 2012 中从数据库创建实体框架模型

> ID：13867986
> 
> 赞同：1
> 
> 时间：2012-12-13T20:31:27.407
> 
> 标签：entity-framework, visual-studio-2012

当我尝试从数据库中选择所有表来创建模型时，我在模型浏览器中看不到任何表或模型，它只是空的，但没有错误。当我只选择其中一些时 - 一切正常。

# ruby-on-rails - rails 无法获取符号参数

> ID：13867992
> 
> 赞同：0
> 
> 时间：2012-12-13T20:31:55.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我有一个模型，这个模型有一个名称为状态的属性。这是状态验证；

```
validates_inclusion_of :status, :in => [:nil, :new, :old], :message => "......" 
```

我为我的模型创建了一个编辑表单，这是我的选择输入；

```
 =f.select :status, [["New Record", :new], ["Old Record", :old]], {:include_blank => false} 
```

当我提交编辑表单时，我无法获得作为符号的状态并收到有关此区域的错误。
当尝试使用“to_sym”方法更改状态参数时，它可以工作。

```
params[:my_model][:status] = params[:my_model][:status].to_sym 
```

我为什么要使用这种方法？有没有办法将数据作为符号发送？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:37:35.037

从您的 HTML 表单接收的数据始终是一个字符串，并且 rails 没有将这些类型的值自动转换为符号。通常，键是符号化的，而不是值。

我建议将您的值（例如：new、：old 等）视为字符串，然后事情就会保持一致。另请注意，如果没有某种序列化，您的数据存储很可能无法处理符号（例如，它们将被转换为 yaml）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:40:36.367

请记住，即使您在 Rails 视图中编写符号，所有符号也会被解析为 HTML 作为字符串。HTTP 没有红宝石符号的概念，因此您不能将数据作为符号发送。

当您在控制器中获取参数时，如果您根据符号检查它们，则您有责任将它们解析为符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:42:52.650

你从 params[:something] 得到的总是一个字符串。您的数据库中状态的数据类型是什么？
我想你可以这样做

validates_inclusion_of :status, :in => [nil, "new", "old"], :message => "......"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:42:57.063

在 HTTP 请求中没有数据类型。数据包装在查询字符串或请求正文中，完全是字符串。

Rails 仅解析该字符串并将其转换为称为“参数”的哈希值。键的每个值都是基于请求的字符串或文件对象。您永远不会将符号作为哈希键的值。

尝试使用类似的字符串

```
'new', 'old' 
```

这样您就可以避免函数调用 to_sym

# macos - 无法在 OSX 10.8 (Mountain Lion) 上使用颠覆

> ID：13867994
> 
> 赞同：2
> 
> 时间：2012-12-13T20:32:05.620
> 
> 标签：macos, apache, svn, ssl, openssl

我一直试图让颠覆在我的 Mac 上工作......

一些事实：1）我自己在 Linux 服务器上使用 Apache 配置了 subversion，并在那里安装了签名的 SSL 证书。

2) 在 Windows 上，Tortoisesvn 与我的存储库配合得很好。

3）在mac上，它没有告诉我以下错误：

> $ svn co https://www.[snip].com/svn/snip 。
> 
> svn：E175002：无法连接到 URL 'https://www.[snip].com/svn/snip' 的存储库
> 
> svn：E175002：“https://www.[snip].com/svn/[snip]”的选项：SSL 握手失败：SSL 错误代码 -1/1/336032856（https://www.[snip]。 com)

4）我搜索了网络，建议的操作是更新我机器上的 openssl。我这样做并在本地构建它。现在，当我执行“openssl 版本”时，它显示的版本是：

> $ openssl 版本
> 
> OpenSSL 1.0.1c 2012 年 5 月 10 日

[5) 我还从http://www.wandisco.com/subversion/download#osx](http://www.wandisco.com/subversion/download#osx)安装了 subversion 客户端

6）openssl 和 subversion 都放在 .bash_profile 的路径上，我已经验证它们是我正在使用的。

问题是它仍然在终端上给出相同的错误消息。

关于为什么它在 Windows 上运行良好而在 Mac 终端上不起作用的任何想法，最重要的是我应该怎么做？

谢谢！-YC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:32:49.677

当主机名/虚拟主机条目与 SSL 证书不匹配时，可能会发生这种情况。

# c++ - 指向成员函数解析

> ID：13867995
> 
> 赞同：2
> 
> 时间：2012-12-13T20:32:05.697
> 
> 标签：c++, function-pointers, pointer-to-member

这是一个用于过滤对象列表的函子。它必须用指向对象类的成员函数的指针来实例化，作为访问不同元素的一种方式。

```
class Filter_Compare : public Filter {
    std::string (File::*fun)();
public:
    Filter_Compare(const char *name, const char *desc, std::string (File::*f)())
        : Filter(name, desc), fun(f)
    {}
    ~Filter_Compare() {};

    int operator () (File* f1, File* f2) { return this->eval(*f1, *f2); }
    int eval(File* f1, File* f2) const { return this->eval(*f1,*f2); }

    int eval(File& f1, File& f2) const {
        return f1.*(this->fun()).compare(f2.*(this->fun()));
    }
};
//an instanciation example :
Filter_Compare fname("Name", "Compare by name", File::getPath); 
```

并且 g++ 返回这些错误：

> Filter.h：在成员函数'int Filter_Compare::eval(File&, File&) const'中：Filter.h:48:27：错误：必须使用'。*' 或 '->* ' 在 '((const Filter_Compare*)this)->Filter_Compare::fun (...)' 中调用指向成员函数的指针，例如 '(... ->* ((const Filter_Compare *)this)->Filter_Compare::fun) (...)' Filter.h:48:53: error: must use '. *' 或 '->* ' 在 '((const Filter_Compare*)this)->Filter_Compare::fun (...)' 中调用指向成员函数的指针，例如 '(... ->* ((const Filter_Compare *)this)->Filter_Compare::fun) (...)'</p>

我在这里看不到问题，因为我已经在另一个类上使用了它而没有任何错误（好吧，至少它可以编译，我现在无法运行它），代码在哪里：

> lit_type eval(File& f) const { return f.*(this->fun()) - thValue; }

这里到底有什么问题？我不知道如何以另一种方式引用指针。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:44:06.263

要通过指向成员函数的指针调用，请使用`.*`or `->*`。来电`fun`了`File& f1`，电就是了`(f1.*fun)()`。所以：`(f1.*fun)().compare((f2.*fun)())`。如果你想用`this->`不需要的显式 s 来复杂化表达式，你必须格外小心`(f1.*(this->fun))().compare((f2.*(this->fun))())`：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:41:02.093

括号错了：

```
int eval(File& f1, File& f2) const {
    return (f1.*fun)().compare((f2.*fun)());
} 
```

# c++ - 为什么 std::less 是类模板？

> ID：13867996
> 
> 赞同：19
> 
> 时间：2012-12-13T20:32:11.327
> 
> 标签：c++, templates, stl, operator-overloading, generic-programming

根据 20.8.5 §1，`std::less`是一个具有成员函数的类模板：

```
template<typename T>
struct less
{
    bool operator()(const T& x, const T& y) const;
    // ...
}; 
```

这意味着我在实例化模板时必须提及类型，例如`std::less<int>`. 为什么不是`std::less`带有成员函数模板的普通类呢？

```
struct less
{
    template<typename T, typename U>
    bool operator()(const T& x, const U& y) const;
    // ...
}; 
```

然后我可以简单地传递`std::less`给没有类型参数的算法，这可能会变得很麻烦。

这仅仅是出于历史原因，因为早期的编译器（据说）不能很好地支持成员函数模板（甚至可能根本不支持），还是有更深层次的东西？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-13T20:36:47.480

这样，由实例化模板创建的类具有嵌套的 typedef，它提供有关函子的结果类型和参数类型的类型信息：

```
 template <class Arg1, class Arg2, class Result>
  struct binary_function 
  {
    typedef Arg1 first_argument_type;
    typedef Arg2 second_argument_type;
    typedef Result result_type;
  };

  template <class T> 
  struct less : binary_function <T,T,bool> 
  {
    bool operator() (const T& x, const T& y) const;
  }; 
```

`std::less`继承自`std::binary_function`，它产生这些类型定义。例如，您可以使用`std::less<T>::result_type`.

`decltype`如今，这对于 C++11和`auto`关键字来说几乎是不必要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-13T20:36:39.000

这就是我们在 C++98 中所做的方式。现在我们对模板和转发有了更好的理解（有 14 年以上的经验），更新的函数类型就如你所说：函数调用运算符是一个模板函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T21:53:33.093

Stephan 提出的改变这一点的提议，以便所有这些函数对象都是多态的，`operator()`在上次会议上被接受，这是我的理解。

所以你的问题“为什么函数调用运算符没有模板化？”的答案就是它。