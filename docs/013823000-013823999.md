# StackOverflow 问答 13823000-13823999

# ios - iOS 中 UIImageView 的更快替代方案

> ID：13823005
> 
> 赞同：0
> 
> 时间：2012-12-11T15:26:33.917
> 
> 标签：ios, ipad, animation, uiimageview, core-animation

我有一个 png 图像列表，我希望它们一个接一个地显示以显示动画。在我的大多数情况下，我使用 UIImageView 和动画图像，它工作正常。但在某些情况下，我的 png 是 1280*768（全屏 iPad）动画，有 100 多帧。我看到在模拟器上使用 UIImageView 非常慢（第一次加载时间太长），我相信如果我把它放在设备上它会更慢。

是否有任何替代方法可以非常流畅地显示图像序列？也许是核心动画？我可以看到任何工作示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:33:36.823

核心动画可用于基于矢量/关键帧的动画 - 而不是图像序列。在 iPad 上加载超过一百个全屏 PNG 是一个*非常*糟糕的主意，如果不是完全终止，您几乎肯定会收到内存警告。

您应该使用视频来显示这些类型的动画。性能会好很多。您有什么理由不能在动画中使用 H.264 视频吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:45:42.770

为您的照片制作视频。这是最简单也可能是最合理的方法。

如果您想要真正好的性能和对动画的完全控制，您可以将图片转换为 pvrtc4 格式并使用 OpenGL 将它们绘制为广告牌（纹理精灵）。如果你不知道怎么做，这可能是很多工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T05:50:42.667

看第二个例子

[http://www.modejong.com/iPhone/](http://www.modejong.com/iPhone/)

**摘自[http://www.modejong.com/iPhone/](http://www.modejong.com/iPhone/)**

还有 UIImageView.animationImages API，但是当使用超过几个大小合适的图像时，它会迅速占用所有系统内存。

我想展示一个持续 2 秒、15 FPS 的全屏动画，总共有 30 张尺寸为 480x320 的 PNG 图像。这个例子实现了一个面向动画的视图控制器，它只是等待读取一帧的 PNG 图像数据，直到需要它。

这个类没有分配许多兆字节，而是在大约 0.5 兆的内存中运行，在第二代 iPhone 上的 CPU 利用率约为 5-10%。此示例也已更新，包括在显示动画时可选择通过 AVAudioPlayer 播放音频文件的功能。

# weblogic - 其中一个节点未显示其健康状态

> ID：13823011
> 
> 赞同：4
> 
> 时间：2012-12-11T15:26:47.047
> 
> 标签：weblogic, soa

在 中`weblogic console`，其中一个节点未显示其健康状态，而管理服务器和其他节点的健康状态显示为“OK”。

此节点之间的通信是否存在任何问题`admin server`，`managed server`或者是否有其他原因导致该节点未显示健康状态？

应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T05:10:44.813

我只能通过重新启动托管服务器来获取托管服务器的状态。似乎是环境不稳定造成的问题。托管服务器的启动参数有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:54:45.650

是的，这看起来像是管理员和托管服务器之间的通信问题。你通常可以做的是：

1.  全部重启。然后先启动 Admin 并等待它启动。然后启动托管服务器。问题是否仍然存在？

2.  检查受管服务器是否正确启动。查看日志文件中没有错误。

3.  检查托管服务器的日志。查看托管服务器是否抱怨无法连接到 Admin，否则应该有一条日志消息说与 Admin 的连接已建立。

4.  您也可以在不启动管理服务器的情况下启动托管服务器，查看托管服务器是否正在尝试联系管理服务器。

5.  检查`config.xml`管理和托管服务器的文件。检查节点和服务器定义，检查它们的 IP 地址、端口等。

# c# - 为什么调用 .Clear() 会加载相关实体？

> ID：13823015
> 
> 赞同：1
> 
> 时间：2012-12-11T15:26:57.017
> 
> 标签：c#, entity-framework

我有一个非常基本的 EF 模型，其中包含订单和订单行项目。在进行最终保存的过程中，我实际上将带有行项目的订单写入数据库，我在添加来自会话变量的订单项目之前调用 Order.OrderItems.Clear()。在大多数情况下，此代码工作正常。但是时不时地，我会收到一封错误电子邮件（错误被捕获并发送给我），其中包含以下堆栈跟踪：

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.   at System.Data.Objects.ObjectContext.EnsureConnection()
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.Execute(MergeOption mergeOption)
   at System.Data.Objects.DataClasses.EntityCollection`1.Load(List`1 collection, MergeOption mergeOption)
   at System.Data.Objects.DataClasses.EntityCollection`1.Load(MergeOption mergeOption)
   at System.Data.Objects.DataClasses.RelatedEnd.Load()
   at System.Data.Objects.DataClasses.RelatedEnd.DeferredLoad()
   at System.Data.Objects.DataClasses.EntityCollection`1.Clear()
   at UserRegistration.Models.SaveRepository.SaveOrder(Order order) 
```

我了解对象上下文以及为什么要处理它（我已经在我的 EF 模型上禁用了延迟加载，希望将来能防止这种情况发生）但是为什么 EF 在清除后会进行加载？

# java - Tomcat 没有启动

> ID：13823022
> 
> 赞同：0
> 
> 时间：2012-12-11T15:27:17.983
> 
> 标签：java, tomcat, enterprise

当我尝试启动我的嵌入式 tomcat 时，我的应用程序将运行，直到 tomcat 到达以下行：

“2012 年 11 月 11 日下午 3:28:06 org.apache.coyote.AbstractProtocol 启动信息：启动 ProtocolHandler [“http-bio-8080”]”

任何人都可以帮助我使用嵌入式Tomcat吗？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:33:22.287

试试这个。从命令行运行：

```
netstat -a -n 
```

查看那里并查看哪些端口处于 LISTEN 状态。你看到你的端口打开了吗？从日志看，它似乎在端口 8080 上运行（即 ["http-bio- **8080** "]）。如果您看到它在端口 8080 上运行，请点击以下 URL：

```
http://localhost:8080 
```

你从apache那里得到某种回应吗？即使是 404 也表明它正在运行。

阅读： http: [//www.copperykeenclaws.com/embedding-tomcat-7/](http://www.copperykeenclaws.com/embedding-tomcat-7/)

# internet-explorer - IE10 上 DotNetNuke 4.5.5 中的菜单消失了

> ID：13823023
> 
> 赞同：6
> 
> 时间：2012-12-11T15:27:23.657
> 
> 标签：internet-explorer, dotnetnuke, internet-explorer-10

我有一个运行 DotNetNuke 4.5.5 的站点。使用 IE10 的用户看不到站点主菜单。任何线索为什么会发生这种情况，以及在哪里寻找解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T20:10:10.657

我假设您使用的是与 IE10 不兼容的**SolPartMenu 。**除了主菜单，容器的操作菜单也不可见。

我建议升级到[DDRMenu](http://dnnddrmenu.codeplex.com/releases/view/70987)，它自 DNN 6 以来一直是默认导航提供程序。有一个可用于 DNN 4.5.0 及更高版本的安装包，因此您不必仅仅因为菜单而升级 DotNetNuke。

DDRMenu 提供了一种升级 SolPartMenu 外观和容器的简单方法，使用兼容性模板，该模板支持许多但不是所有 SolPartMenu 属性。

要升级 SolPart 菜单，请编辑皮肤的 ASCX 文件并替换：

```
<%@ Register TagPrefix="dnn" TagName="..." src="~/Admin/Skins/SolPartMenu.ascx" %> 
```

和

```
<%@ Register TagPrefix="dnn" TagName="..." src="~/DesktopModules/DDRMenu/SolPartMenu.ascx" %> 
```

升级容器是一个类似的过程，替换：

```
<%@ Register TagPrefix="dnn" TagName="..." Src="~/Admin/Containers/SolPartActions.ascx" %> 
```

和

```
<%@ Register TagPrefix="dnn" TagName="..." Src=""~/DesktopModules/DDRMenu/Actions.ascx"" %> 
```

### 也可以看看：

[DDRMenu 用户指南](http://www.dotnetnuke.com/Resources/Wiki/Page/DDRMenu-user-guide.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-14T22:22:29.853

我可能有点晚了，但我在一个客户那里遇到了这个问题，我通过更改 SPMenuCaps.config (\controls\SolpartMenu) 解决了这个问题。我在 Renders Uplevel 下添加。现在我的文件看起来像这样，它适用于 ie11：

```
<?xml version="1.0" encoding="utf-8" ?>
<capabilities> 
    <functionality nm="UpLevel" desc="Renders Uplevel">
        <supports>
            <browser nm="IE" minversion="4" />
            <browser nm="Netscape" minversion="5" />
            <browser nm="Gecko" minversion="1" />
            <browser nm="Opera" minversion="7" />
            <browser contains="Konqueror" />
            <browser contains="Safari" />
            <browser contains="FireFox" />
      <browser contains="Camino" />
      <browser contains="Mozilla" />
        </supports>
        <excludes>
        </excludes>
    </functionality>
    <functionality nm="XMLParsing" desc="Client Side XML Parsing">
        <supports>
            <browser nm="IE" minversion="4" />
            <browser nm="Netscape" minversion="5" />
            <browser nm="Gecko" minversion="1" />
            <browser contains="FireFox" />
      <browser contains="Camino" />
        </supports>
        <excludes>
            <browser contains="Konqueror" />
            <browser contains="Mac" />
            <browser contains="Windows CE" />
        </excludes>
    </functionality>
    <functionality nm="XMLDataIslands" desc="XML DataIslands supported (allows caching)">
        <supports>
            <browser nm="IE" minversion="5" />
        </supports>
        <excludes>
            <browser contains="Mac" />
            <browser contains="Windows CE" />
        </excludes>
    </functionality>
    <functionality nm="Transitions" desc="Menu Effects Transitions">
        <supports>
            <browser nm="IE" minversion="5" />
        </supports>
        <excludes>
            <browser contains="Mac" />
        </excludes>
    </functionality>
</capabilities> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T17:38:43.497

我遇到了类似的问题，每个人似乎都认为升级到更新版本的 DNN 是解决方案。就我而言，我继承了旧服务器（Windows 2003 旧），解决方案是服务器配置而不是 DNN。.NET 2.0 和 4.0 中似乎存在问题，其中浏览器定义不包括 IE 10，这导致 _doPostBack 在 DNN 4+ - DNN6 上几乎普遍失败？

可以在此 HotFix 中找到解决方案：http: [//support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)

或在 .Net 4.0 的可靠性更新 2 中：http: [//support.microsoft.com/kb/2600217](http://support.microsoft.com/kb/2600217)

不要忘记，如果出现问题，您可以使用参数“/uninstall”卸载修补程序。

祝你好运！

# mysql - 表分区的最佳实践 - mysql 5.5

> ID：13823025
> 
> 赞同：2
> 
> 时间：2012-12-11T15:27:37.687
> 
> 标签：mysql, innodb, partitioning

我有一个 mysql 5.5 服务器，其中有一个我想要分区的大（~150M 记录）innodb 表。

如何确定表的最佳分区数？

该表是一个“多对多”连接表，仅包含两个 int 列（aId、bId），

aId 接收的值大致在 1..1,000,000 的范围内 bId 接收的值大致在 1..10,000,000 的范围内

大多数查询首先查找 aId。

该表有两个索引：primary(aId, bId) index(bId)

同样，问题是如何确定表的最佳分区数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:46:48.140

如果您不想以逻辑方式构建数据，则最佳分区数与服务器上的核心数相同。这将有助于多个并发查询。由于使用主索引，单个查询将同时运行。

我建议将您的第二个索引更改为`index (bld,ald)`，因此 bld 到 ald 查询只能使用索引来获取 ald 值，而无需访问数据库。

# r - 如何绘制 R 表的箱线图？

> ID：13823028
> 
> 赞同：2
> 
> 时间：2012-12-11T15:27:48.090
> 
> 标签：r, boxplot

我有一个通过在数据列上调用 table(...) 生成的表，我得到一个如下所示的表：

```
0   1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16  17  18  19 
346 351 341 333 345 415 421 425 429 437 436 469 379 424 387 419 392 396 381 421 
```

我想绘制这些频率的箱线图，但是在表格上调用箱线图会导致错误：

```
Error in Axis.table(x = c(333, 368.5, 409.5, 427, 469), side = 2) : 
   only for 1-D table 
```

我尝试将表强制转换为数组，`as.array`但似乎没有什么区别。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:38:48.687

如果我理解正确，`boxplot(c(tab))`或者`boxplot(as.vector(tab))`应该工作（也归功于@joran）。

# database - “冲突可序列化”和“冲突等效”有什么区别？

> ID：13823030
> 
> 赞同：27
> 
> 时间：2012-12-11T15:27:51.197
> 
> 标签：database, conflict, serializable, equivalence

在数据库理论中，“冲突可序列化”和“冲突等效”有什么区别？

我的教科书有一节关于可序列化的冲突，但忽略了冲突等价。这可能是我熟悉的两个概念，但我不熟悉术语，所以我正在寻找解释。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2015-04-02T22:11:23.107

DBMS 中的冲突可以定义为两个或多个不同的事务访问同一个变量，并且其中至少一个是写操作。

例如：

```
T1: Read(X)   
T2: Read (X) 
```

在这种情况下，没有冲突，因为两个事务都只执行读取操作。

但在以下情况下：

```
T1: Read(X)   
T2: Write(X) 
```

有冲突。

假设我们有一个时间表`S`，我们可以重新排序其中的说明。并创建另外 2 个时间表`S1`和`S2`.

**冲突等效**：指的是时间表`S1`以及`S2`它们在两个时间表中维护冲突指令的顺序的位置。例如，如果必须在写入 之前`T1`读取，那么它也应该是相同的。（仅应为冲突操作维护顺序）。`X``T2``X``S1``S2`

**冲突可串行化**：`S`如果它与串行调度（即，事务一个接一个地执行）是冲突的，则称它是可冲突可串行化的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T15:34:17.507

来自[维基百科](http://en.wikipedia.org/wiki/Schedule_%28computer_science%29#Conflict_equivalence)。

### 冲突对等

`S1`如果满足以下条件，则称这些调度`S2`是冲突等价的：

1.  两个计划`S1`都`S2`涉及相同的事务集（包括每个事务*中的操作顺序）。*

2.  和 中每对冲突动作的顺序`S1`相同`S2`。

### 可冲突序列化

*当调度与一个或多个串行调度冲突等效*时，调度被称为是可冲突串行化的。

冲突可序列化的另一个定义是，当且仅当它的优先级图/可序列化图是非循环的，当且仅当它的优先级图/可序列化图是非循环的（如果该图被定义为还包括未提交的事务，则循环涉及未提交事务可能在没有冲突可串行化冲突的情况下发生）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-06T05:20:47.630

只有两个术语以不同的方式描述一件事。

**冲突等价**：你需要说附表A是冲突等价于附表B。它必须涉及两个时间表

**Conflict serializable**：仍然使用Schedule A 和B。我们可以说Schedule A 是conflict serializable。附表 B 是冲突可序列化的。

我们没有说附表 A/B 是冲突等价的

我们没有说附表 A 是可序列化到附表 B 的冲突

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-29T14:15:26.607

如果一个调度 S 可以通过一系列非冲突指令的交换转换为一个调度 S'，我们说 S 和 S' 是冲突等价的。

如果调度 S 与串行调度是等价的，我们就说调度 S 是冲突可串行化的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-13T09:17:58.130

冲突可串行化意味着冲突等同于任何串行调度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-19T11:00:41.180

**冲突等价调度：**如果调度 S 可以通过一系列非冲突指令的交换转换为调度 S'，我们说调度 S & S' 是冲突等价的。

**冲突可序列化调度：**如果调度 S 与串行调度等价，则它是可冲突序列化的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-27T21:43:43.723

定义已经被完美地解释了，但我觉得这对某些人来说非常有用。

我开发了一个[小型控制台程序](https://github.com/gudthing/Serializability)（在 github 上），它可以测试任何计划的冲突可序列化性，并且还会绘制优先图。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-13T08:21:35.570

如果考虑的事务调度至少有一个冲突等效调度，则它是可冲突序列化的。

# algorithm - 生成具有固定位数集的随机数的最有效方法

> ID：13823032
> 
> 赞同：9
> 
> 时间：2012-12-11T15:27:57.883
> 
> 标签：algorithm, optimization, language-agnostic, random, bit-manipulation

我需要生成一个随机数，但它需要从一组具有相同位数的二进制数中选择。例如，选择一个恰好设置了 2 位的随机字节值...

```
00000000 - no
00000001 - no
00000010 - no
00000011 - YES
00000100 - no
00000101 - YES
00000110 - YES
...

=> Set of possible numbers 3, 5, 6... 
```

请注意，这是一组简化的数字。更多地考虑“选择一个恰好设置了 40 位的随机 64 位数字”。集合中的每个数字必须同样可能出现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T15:37:33.693

从所有位位置的集合中进行随机选择，然后设置这些位。

Python 中的示例：

```
def random_bits(word_size, bit_count):
    number = 0
    for bit in random.sample(range(word_size), bit_count):
        number |= 1 << bit
    return number 
```

运行上述10次的结果：

```
0xb1f69da5cb867efbL
0xfceff3c3e16ea92dL
0xecaea89655befe77L
0xbf7d57a9b62f338bL
0x8cd1fee76f2c69f7L
0x8563bfc6d9df32dfL
0xdf0cdaebf0177e5fL
0xf7ab75fe3e2d11c7L
0x97f9f1cbb1f9e2f8L
0x7f7f075de5b73362L 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-30T20:01:16.383

我找到了一个优雅的解决方案：随机二分法。

平均而言，想法是：

*   *并且*用一个随机数除以 2 设置的位数，
*   *或*添加 50% 的设置位。

用 gcc 编译的 C 代码（要有 __builtin_popcountll）：

```
#include <assert.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
/// Return a random number, with nb_bits bits set out of the width LSB
uint64_t random_bits(uint8_t width, uint8_t nb_bits)
{
    assert(nb_bits <= width);
    assert(width <= 64);
    uint64_t x_min = 0;
    uint64_t x_max = width == 64 ? (uint64_t)-1 : (1UL<<width)-1;
    int n = 0;

    while (n != nb_bits)
    {
        // generate a random value of at least width bits
        uint64_t x = random();
        if (width > 31)
            x ^= random() << 31;
        if (width > 62)
            x ^= random() << 33;

        x = x_min | (x & x_max); // x_min is a subset of x, which is a subset of x_max
        n = __builtin_popcountll(x);
        printf("x_min = 0x%016lX, %d bits\n", x_min, __builtin_popcountll(x_min));
        printf("x_max = 0x%016lX, %d bits\n", x_max, __builtin_popcountll(x_max));
        printf("x     = 0x%016lX, %d bits\n\n", x, n);
        if (n > nb_bits)
            x_max = x;
        else
            x_min = x;
    }

    return x_min;
} 
```

通常需要少于 10 个循环来达到请求的位数（幸运的是，它可能需要 2 或 3 个循环）。即使特殊情况会更快，角落案例 (nb_bits=0,1,width-1,width) 也可以正常工作。

结果示例：

```
x_min = 0x0000000000000000, 0 bits
x_max = 0x1FFFFFFFFFFFFFFF, 61 bits
x     = 0x1492717D79B2F570, 33 bits

x_min = 0x0000000000000000, 0 bits
x_max = 0x1492717D79B2F570, 33 bits
x     = 0x1000202C70305120, 14 bits

x_min = 0x0000000000000000, 0 bits
x_max = 0x1000202C70305120, 14 bits
x     = 0x0000200C10200120, 7 bits

x_min = 0x0000200C10200120, 7 bits
x_max = 0x1000202C70305120, 14 bits
x     = 0x1000200C70200120, 10 bits

x_min = 0x1000200C70200120, 10 bits
x_max = 0x1000202C70305120, 14 bits
x     = 0x1000200C70201120, 11 bits

x_min = 0x1000200C70201120, 11 bits
x_max = 0x1000202C70305120, 14 bits
x     = 0x1000200C70301120, 12 bits

width = 61, nb_bits = 12, x = 0x1000200C70301120 
```

当然，你需要一个好的prng。否则你可能会面临一个无限循环。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T15:40:16.810

假设要设置的位数是 b，字长是 w。我将创建一个长度为 w 的向量 v，其中第一个 b 值设置为 1，其余设置为 0。然后只是随机播放 v。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T16:00:55.983

这是另一个在实践中非常简单且相当快的选项。

```
choose a bit at random
if it is already set
    do nothing
else
    set it
    increment count
end if 
```

重复直到 count 等于您要设置的位数。

`k`只有当您要设置的位数（调用它）超过字长的一半（调用它）时，这才会很慢`N`。在这种情况下，请使用算法设置`N`-`k`位，然后翻转结果中的所有位。

我敢打赌，这里的预期运行时间相当不错，尽管我现在太懒/太笨了，无法精确计算它。但是我可以将其限制为小于 2* `k`... 获得“正面”的预期抛硬币次数是两次，这里的每次迭代都有超过 1/2 的成功机会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T16:23:39.210

如果您没有 Python 的便利`random.sample`，您可以使用经典的顺序采样算法在 C 中执行此操作：

```
unsigned long k_bit_helper(int n, int k, unsigned long bit, unsigned long accum) {
  if !(n && k)
    return accum;
  if (k > rand() % n)
    return k_bit_helper(n - 1, k - 1, bit + bit, accum + bit);
  else
    return k_bit_helper(n - 1, k, bit + bit, accum);
}

unsigned long random_k_bits(int k) {
  return k_bit_helper(64, k, 1, 0);
} 
```

上述成本将主要由生成随机数的成本决定（在其他解决方案中也是如此）。如果您通过批处理获得了良好的 prng，则可以对其进行一些优化：例如，由于您知道随机数将处于稳步下降的范围内，因此您可以`n`通过`n-3`获取该范围内的随机数来获取随机数，`0..(n * (n - 1) * (n - 2) * (n - 3))`然后提取单个随机数：

```
r = randint(0, n * (n - 1) * (n - 2) * (n - 3) - 1);
rn  = r % n; r /= n
rn1 = r % (n - 1); r /= (n - 1);
rn2 = r % (n - 2); r /= (n - 2);
rn3 = r % (n - 3); r /= (n - 3); 
```

的最大值`n`大概是`64`2 ⁶，所以上面乘积的最大值肯定小于2 ^(24)。实际上，如果您使用 64 位 prng，您可以从中提取多达 10 个随机数。但是，除非您知道您使用的 prng 会产生独立的随机位，否则不要这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-22T22:31:58.713

我还有一个基于枚举的建议：在 1 和 n 之间选择一个随机数 i 选择 k，并生成第 i 个组合。例如，对于 n = 6、k = 3，20 种组合是：

```
000111
001011
010011
100011
001101
010101
100101
011001
101001
110001
001110
010110
100110
011010
101010
110010
011100
101100
110100
111000 
```

假设我们随机选择组合编号 7。我们首先检查它是否在最后一个位置有 1：它有，因为前 10 个（5 选择 2）组合有。然后我们递归地检查剩余的位置。这是一些 C++ 代码：

```
word ithCombination(int n, int k, word i) {
    // i is zero-based
    word x = 0;
    word b = 1;
    while (k) {
        word c = binCoeff[n - 1][k - 1];
        if (i < c) {
            x |= b;
            --k;
        } else {
            i -= c;
        }
        --n;
        b <<= 1;
    }
    return x;
}
word randomKBits(int k) {
    word i = randomRange(0, binCoeff[BITS_PER_WORD][k] - 1);
    return ithCombination(BITS_PER_WORD, k, i);
} 
```

为了快速起见，我们在 中使用预先计算的二项式系数`binCoeff`。该函数`randomRange`返回两个边界（包括）之间的随机整数。

我做了一些时间安排（[来源](https://github.com/falk-hueffner/randkbits)）。使用 C++11 默认随机数生成器，大部分时间都花在生成随机数上。那么这个解决方案是最快的，因为它使用了尽可能少的随机位数。如果我使用快速随机数生成器，那么 mic006 的解决方案是最快的。如果`k`已知非常小，最好只是随机设置位，直到`k`被设置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-08T19:07:15.040

不完全是算法建议，只是在 JavaScript 中找到了一个非常巧妙的解决方案，可以使用 ArrayBuffer 直接从 Math.random 输出位中获取随机位。

```
//Swap var out with const and let for maximum performance! I like to use var because of prototyping ease
var randomBitList = function(n){
    var floats = Math.ceil(n/64)+1;
    var buff = new ArrayBuffer(floats*8);
    var floatView = new Float64Array(buff);
    var int8View = new Uint8Array(buff);
    var intView = new Int32Array(buff);
    for(var i = 0; i < (floats-1)*2; i++){
        floatView[floats-1] = Math.random();
        int8View[(floats-1)*8] = int8View[(floats-1)*8+4];
        intView[i] = intView[(floats-1)*2];
    }
    this.get = function(idx){
        var i = idx>>5;//divide by 32
        var j = idx%32;
        return (intView[i]>>j)&1;
        //return Math.random()>0.5?0:1;
    };
    this.getBitList = function(){
        var arr = [];
        for(var idx = 0; idx < n; idx++){
            var i = idx>>5;//divide by 32
            var j = idx%32;
            arr[idx] = (intView[i]>>j)&1;
        }
        return arr;
    }
}; 
```

# javascript - 安全地使用 eval 将变量用作对象名称

> ID：13823036
> 
> 赞同：0
> 
> 时间：2012-12-11T15:28:22.707
> 
> 标签：javascript, arrays, object, eval

如本例所示

[javascript 使用变量作为对象名称](https://stackoverflow.com/questions/6084858/javascript-use-variable-as-object-name)

我正在使用 eval 使用 DOM 属性从数组中选择一个元素。尽管用户没有直接的方法来更改输入，但我希望尽可能安全，并在评估变量之前确保变量确实是整数。

以下哪一项是最好、最安全的方式？

```
$(".listitem").click(function(){
    var id = $(this).attr("record-id");
    if(!isNaN(new Number(id))){
        Storage.search.nearby.currec = rowsHolder[eval(id)];
    }else{
        // send email to admin, shut down
    }
}); 
```

或者

```
$(".listitem").click(function(){
    var id = $(this).attr("record-id");
    if(parseInt(id)){
        Storage.search.nearby.currec = rowsHolder[eval(id)];
    }else{
        // send email to admin, shut down
    }
}); 
```

更多但不是必需的信息：

基本上我从网上拉下一个大的 JSON 字符串，其中包含一组记录。*在使用 for 语句（ for(i in array)* ）从信息构建表时，我将每一行推入一个名为*rowsHolder*的数组中，并为 tr 赋予*record-id="i"*的属性。然后当用户单击该行时，我调用您在上面看到的方法。我正在将 PhoneGap 与 JQuery Mobile 一起使用。

一如既往，感谢您的意见

-D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:15:22.187

绝对没有理由在`eval`这里使用。

*   如果您`id`是一个数字，请使用`parseFloat(id)`它来获取它。不必要，因为当它用作属性名称时，它会被转换回字符串。
*   如果你`id`是一个整数，使用`parseInt(id, 10)`它来获取它。不必要，因为当它用作属性名称时，它会被转换回字符串。
*   如果你`id`是一个字符串，就让它成为一个字符串。无论如何，您使用它的属性名称将是一个。

# c# - 将事务结果用作参数时的超时错误

> ID：13823039
> 
> 赞同：1
> 
> 时间：2012-12-11T15:28:34.597
> 
> 标签：c#, concurrency, ado.net, transactions

我有以下使用 SqlTransaction 的代码

```
string connectionString = ConfigurationManager.AppSettings["ConnectionString"];
using (SqlConnection connection = new SqlConnection(connectionString))
{
    connection.Open();
    SqlTransaction transaction = connection.BeginTransaction();

    int logID = HelperClass.InsertException(connection, 1, DateTime.Now, "Y", "test", "test", 1, 1, transaction);
    LogSearch logSearch = new LogSearch();
    logSearch.LogID = 258;

    Collection<Log> logs = HelperClass.GetLogs(logSearch, connectionString);
} 
```

此代码引发以下**异常**。

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

但是，如果我为 LogID 传递硬编码值，也不例外。

**问题**

1.  为什么当我传递 logID（InsertException() 的结果）时会出现异常？
2.  请解释为什么当我将`hard coded`值作为 LogID传递时没有异常

注意：InsertException() 使用一个连接，`SqlTransaction`而 GetLogs() 使用一个没有任何事务的新连接

**更新的问题**

业务层代码不使用`Transaction`. 我需要在上面显示的单元测试代码中调用业务层方法（用于集成测试）。即使业务层不使用事务，我们如何将事务应用于 UT 代码（用于集成测试）？从@jbl 的回答看来，在单元测试中根本不可能使用事务。我们如何为 UT 代码申请交易。

**代码**

```
public static class HelperClass
{
    public static Collection<Log> GetLogs(LogSearch logSearch, string connectionString)
    {
        Collection<Log> logs = new Collection<Log>();
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            string commandText = "SELECT * FROM Application_EX WHERE application_ex_id = @application_ex_id";
            using (SqlCommand command = new SqlCommand(commandText, connection))
            {
                command.CommandType = System.Data.CommandType.Text;

                //Parameter value setting
                command.Parameters.AddWithValue("@application_ex_id", logSearch.LogID);

                using (SqlDataReader reader = command.ExecuteReader())
                {
                    if (reader.HasRows)
                    {
                        while (reader.Read())
                        {

                        }
                    }

                }
            }
        }

        return logs;

    }

    public static Int16 InsertException(SqlConnection connection, Int16 applicationID, DateTime createdDate, string isInternalLocationIndicator, string exceptionDescription, string operation, Int16 severityLevelNumber, Int16 exceptionTypeCode, SqlTransaction transaction)
    {

        Int16 newLogID = 0;
        string commandText = @"INSERT INTO Application_Ex
                            VALUES (@severity_level_nbr, @appl_service_id, @ex_internal_appl_ind, 
                            @application_ex_txt,@ex_location_txt,@create_ts,@application_ex_code);
                            SELECT SCOPE_IDENTITY() AS [LogIdentity];";
        using (SqlCommand command = new SqlCommand(commandText, connection, transaction))
        {
            command.CommandType = System.Data.CommandType.Text;
            command.Parameters.AddWithValue("@severity_level_nbr", severityLevelNumber);
            command.Parameters.AddWithValue("@appl_service_id", applicationID);
            command.Parameters.AddWithValue("@ex_internal_appl_ind", isInternalLocationIndicator);
            command.Parameters.AddWithValue("@application_ex_txt", exceptionDescription);
            command.Parameters.AddWithValue("@ex_location_txt", operation);
            command.Parameters.AddWithValue("@create_ts", createdDate);
            command.Parameters.AddWithValue("@application_ex_code", exceptionTypeCode);

            newLogID = Convert.ToInt16(command.ExecuteScalar(), CultureInfo.InvariantCulture);
        }
        return newLogID;

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T12:55:09.217

问题

1.  为什么当我传递 logID（InsertException() 的结果）时会出现异常？
2.  请解释为什么当我将硬编码值作为 LogID 传递时没有异常

答案

1.  当使用事务插入新记录时，这意味着在您自己提交事务之前不会最终提交新记录。在此之前，新记录被锁定，这意味着任何触及该新记录的查询都将被挂起，直到发生超时。在您的情况下，在事务仍在运行时执行对方法 GetLogs 的调用，并且该方法搜索新插入的记录 ID。由于该行被锁定，您的 GetLogs 调用将一直等到发生超时，这会导致超时异常。
2.  在硬编码值的情况下，对 GetLogs 的调用将搜索具有相应 id 的现有记录。由于您正在搜索 PK 值，因此 SQL 不必搜索所有行，因为它是 PK。因此，现有行被找到并返回，所有这些都在一个单独的事务中，因为事务在它们接触的数据中没有重叠。

假设您的方法 GetLogs 正在搜索另一列上的表，即非 pk 列（例如 application_message），则必须读取整个表才能找到具有 application_message 对应值的行（或行）。这将导致查询始终触及新插入的锁定行，然后使用硬编码 (application_message) 值，您将获得超时异常。我添加这个只是为了澄清锁定，以及 SQL 何时需要或不需要触摸锁定的行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T15:42:48.683

我想那是因为`HelperClass.GetLogs(logSearch, connectionString);`实例化一个超出您事务范围的新连接：

您可以根据自己的意愿：

*   让您的助手类接受保存事务的连接对象而不是连接字符串
*   或替换`"SELECT * FROM Application_EX WHERE application_ex_id = @application_ex_id"`为`"SELECT * FROM Application_EX with (nolock) WHERE application_ex_id = @application_ex_id"`

请注意，第二种情况有时会返回不正确的值，并且不会返回您当前在事务中插入的值

希望这会有所帮助

# php - 我的简单 HTML 上传器不起作用。为什么？

> ID：13823042
> 
> 赞同：0
> 
> 时间：2012-12-11T15:28:44.287
> 
> 标签：php, html, kohana

我用 html 和 php 创建了简单的多文件上传器。我在 kohana php 框架中做这件事。这是代码：

```
<form method="post" enctype="multipart/form-data" action="/test/test_uploader">
    <input type="file" class="btn btn-mini" name="report_1" />
    <input type="file" class="btn btn-mini" name="report_2"  />
    <input type="file" class="btn btn-mini" name="report_3" />
    <button type="submit" class="btn btn-primary">Zatwierdź</button>
    </form> 
```

测试/测试上传代码：

```
print_r($_FILES); 
```

当我尝试上传内容时，它总是显示：

```
Array ( 
        [report_1] => Array ( [name] => [type] => [tmp_name] => [error] => 4 [size] => 0 ) 
        [report_2] => Array ( [name] => [type] => [tmp_name] => [error] => 4 [size] => 0 ) 
        [report_3] => Array ( [name] => [type] => [tmp_name] => [error] => 4 [size] => 0 )
) 
```

它只是不上传。为什么？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:33:14.917

[PHP 上传错误代码](http://php.net/manual/en/features.file-upload.errors.php)

> UPLOAD_ERR_NO_FILE 值：4；没有上传文件。

没有文件到达服务器。您确定要上传一个吗？

大多数情况下，我在尝试上传非常大的文件（比`upload_max_filesize`和`post_max_size`php 设置大）时看到此错误。您要上传的文件有多大？

# java - 使用字符串作为 BST 键值

> ID：13823043
> 
> 赞同：0
> 
> 时间：2012-12-11T15:28:43.660
> 
> 标签：java, binary-search-tree

我有一个存储对象的二叉搜索树。为了向其中插入对象，我使用 Int 值作为键。我通过调用对象的方法来获得该值，如下所示：

```
public class Tree
{
    // The root node of the tree which is null;
    private Node root;
    private double largest;

    private Node insert (Node tree, Element d)
    {
        if (tree == null)  return new Node(d);
        else if (d.getPlaceInTable() < tree.data.getPlaceInTable()) tree.left = insert (tree.left, d);
        else if (d.getPlaceInTable() > tree.data.getPlaceInTable()) tree.right = insert (tree.right, d);

    return tree;

    }

    public void insert (Element d)
    {
    root = insert (root, d);
    } 
```

但是，如果我想使用元素名称作为字符串的键值呢？我该怎么做？我应该使用 compareTo() 方法吗？我知道如何比较 string1.compareTo(string2) 但我真的不知道在这种情况下如何使用它。如果您有任何建议，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:48:22.700

是的，String 实现了 Comparable，所以你可以这样做

`d.getName().compareTo(tree.data.getName()) < 0`对于左节点和 `d.getName().compareTo(tree.data.getName()) >= 0`右节点

另请注意，在您的原始代码中，当值相等时，您不会在树中插入任何内容。

# c# - 如何检测现代多显示器系统上是否可见窗口

> ID：13823045
> 
> 赞同：2
> 
> 时间：2012-12-11T15:28:48.047
> 
> 标签：c#, winforms

如何检测窗口是否对用户不可见，然后将其移动到可见的位置以允许用户根据自己的喜好调整其大小。

问题：-我有一个程序可以完美地保存表单的位置和大小。不幸的是，许多用户现在拥有多个屏幕显卡，可以在复制和扩展之间切换。

因此，如果用户关闭表单（程序保存在原来的位置）并且用户切换他的系统以说从重复扩展然后打开程序。程序表单现在不可见，因为它已经超出了当前屏幕系统的限制:(用户可以看到它在任务栏上运行。但是单击图标只会短暂闪烁最小化或最大化程序并右键单击只能选择关闭。

我需要捕获用户不可见的陷阱，然后自动调整大小到任何活动窗口。然后，用户可以按照他们认为合适的方式调整大小/移动。

我会欢迎任何想法/指针

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:33:00.200

[这个答案](http://social.msdn.microsoft.com/Forums/en/winforms/thread/cc586cd9-97a6-4b3b-866f-1c1b9b73b141)是在 MSDN 论坛上为同一个问题提供的——本质上，它是对屏幕边界的快速检查，并检查程序是否在这些边界内。如果没有，它会将其移至`0, 0`：

```
using System.Windows.Forms; 

class Form1 : Form {
    protected void EnsureVisible() {
        foreach (Screen scrn in Screen.AllScreens) {
        // You may prefer Intersects(), rather than Contains()
            if (scrn.Bounds.Contains(this.Bounds)) {
              return;
            }
        }
        this.Location = new Point( 0, 0 );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:33:56.523

您可以使用[AllScreens](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.allscreens.aspx)属性来获取连接到计算机的所有屏幕的列表。使用它，您可以检查每个屏幕的边界框并测试您的窗口是否位于所有屏幕之外。如果是这样，则重新设置位置。

Jared Harley 在我打字的时候打败了我。

# android - 在后台运行的不兼容的 Android 模拟器

> ID：13823048
> 
> 赞同：0
> 
> 时间：2012-12-11T15:29:02.677
> 
> 标签：android, eclipse, android-emulator, avd

我在我的 Win 7 中使用最新的 Android SDK。但每当我尝试启动我的任何 android 项目时，它都会显示以下窗口：![在此处输入图像描述](../Images/fa1fa1c8f3ea57d54c326a6b858adbf1.png)

我检查了 .android/avd/ 文件夹，但那里只有 3 个 avd。AVD 有什么问题或我的工作有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T11:14:53.393

试试`adb tcpip 5554`。这将重新启动您的 ADB 侦听端口 5554。该条目将消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:46:46.097

1.  你真的有一个 AVD 实例在运行吗？如果是这样，您是否尝试在点击该屏幕时单击“确定”？

2.  如果您没有运行 AVD，您是否尝试过重新启动 Eclipse/AVD Manager/您的机器？

此对话框表明您已经有一个 AVD 正在运行。它基本上是在提示您选择一个 AVD 来发送应用程序。至少在我的设置中，在此屏幕上选择 OK 应该会在活动 AVD 中运行应用程序。

# javascript - 如何更改窗口父级的 URL？

> ID：13823052
> 
> 赞同：1
> 
> 时间：2012-12-11T15:29:14.163
> 
> 标签：javascript, jquery, html, window

在我的 HTML 页面 A 中，有一个按钮可以使用该`window.open`功能打开一个弹出窗口 B。现在在弹出窗口 B 中，JavaScript 代码可以更改 A 的位置吗？注意：JavaScript 在 B 中。

我尝试过`parent.window.location = parent.window.location;`，因为我正在尝试刷新父级，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:32:07.297

要刷新父窗口，请尝试以下操作：

```
window.parent.location.reload(); 
```

或者

```
window.opener.location.reload(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:34:36.180

试试这个：

```
window.opener.location.reload(true); 
```

true 参数也用于强制重新加载。它将忽略缓存。

```
window.opener.location.reload(false); 
```

false 参数用于强制从缓存中重新加载。

我们可以使用 reload 函数而不使用参数，例如，

```
window.opener.location.reload(); 
```

谢谢..

# php - 在 foreach 中计算结果，然后将该值存储在变量中以在其他地方使用

> ID：13823055
> 
> 赞同：0
> 
> 时间：2012-12-11T15:29:23.273
> 
> 标签：php, foreach

你如何计算一个 foreach 中的结果，然后将该值存储在一个变量中以在另一个 foreach 上使用。

例子。此 foreach 返回 5 个项目

```
foreach ($xml->items as $item) {
  echo "$item->name";
  echo "$item->address"; 
} 
```

现在我希望计算上面的 foreach 并将其存储在 $totalitems 中，并在另一个 foreach 上使用。第二个 foreach 也计算其结果并存储在 $totalitems2 中。像这样的东西：

```
foreach ($xml->items as $item) { //Same source but they will be displayed separately based on a condition.
  echo "$item->name";
  echo "$item->address";
  if_blah_blah_meet_condition_then_break;
} 
```

所以基本上我在这里想要的是限制在两个 foreach 组合上显示的项目总数。$totalitems 和 $totalitems2 的总和应该是 8。8 是我想要限制返回的项目的数量。如果另一个 foreach 的项目比另一个多，则无关紧要。3 和 5。4 和 4。6 和 2。等等。

我怎样才能做到这一点？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:32:35.883

只需使用简单的迭代器`++`方法。当您在第二个`foreach`时，请注意何时`$i` **通过**您要停止它的数字。

### 代码：

```
$i = 0;    
foreach ($xml->items as $item) {
    echo "$item->name";
    echo "$item->address";
    $i++;
}

foreach ($xml->items as $item) {
    echo "$item->name";
    echo "$item->address";

    $i++;
    if ($i > 5) { // or whatever the number is
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:32:42.020

```
$totalItems = count($xml->items);
foreach ($xml->items as $item) {
  echo "$item->name";
  echo "$item->address"; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:33:21.810

只需`count($xml->items)`在循环内的条件中使用和该值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:36:29.330

似乎您的数组已存储在`xml->items`其中，如果您想存储它，您只需将其保存在另一个变量中。

```
foreach ($xml->items as $cont=>$item) {
  echo "$item->name";
  echo "$item->address"; 

  if($cont<8){
      $totalItems_one[] = $item; 
  }
}

//whatever changes you do to $xml->items

foreach ($xml->items as $cont=>$item) {
  echo "$item->name";
  echo "$item->address"; 

  if($cont<8){
      $totalItems_two[] = $item; 
  }
} 
```

像这样，您拥有两个新数组`totalItems_one`，并且您可以随时或`totalItems_two`随时获取项目的数量。`count($totalItems_one)``count($totalItems_two)`

# c# - 在 MVC 模型中应用用户指定的日期时间设置

> ID：13823057
> 
> 赞同：0
> 
> 时间：2012-12-11T15:29:26.457
> 
> 标签：c#, model-view-controller, datetime, model, data-annotations

我有一个在用户登录时实例化的用户对象，该对象存储所有用户的设置：

```
public class SiteUser
{

    public string LoginId { get; set; }
    public string Name { get; set; }        
    public DateTime PasswordChangedOn { get; set; }
    public string Language { get; set; }
    public string DateFormat { get; set; }
    public string RoleName { get; set; }        
    public ICollection<SitePermission> SitePermissions { get; set; }
} 
```

以及一个存储和管理用户会话的 UserContext 类

```
 public class UserContext
   {
         public SiteUser SiteUser { get; internal set; }

         public static UserContext Current
         {
                get
                {
                    if (HttpContext.Current == null || HttpContext.Current.Session == null)
                        return null;

                    if (HttpContext.Current.Session["UserContext"] == null)
                        CreateUserContext();

                    return (UserContext)HttpContext.Current.Session["UserContext"];
                }
            }
    } 
```

现在，每当我必须显示日期时，无论是在网格中还是在文本字段中，我总是希望引用`DateFormat`SiteUser 对象的属性。

在我看到的大多数示例中，数据注释用于定义日期格式，如下所示：

```
 [DataType(DataType.Date), DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
    public DateTime PasswordChangedOn { get; set; } 
```

我尝试将其修改为：

```
[DataType(DataType.Date), DisplayFormat(DataFormatString = UserContext.Current.SiteUser.DateFormat, ApplyFormatInEditMode = true)] 
```

但它没有用，给我一个错误，指出属性参数必须是一个常量。

那么在 MVC 应用程序中将日期格式设置为模型的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:38:32.730

您可以在视图模型中添加一个属性并使用它来呈现日期，而不是考虑用户特定日期并在视图中呈现它，例如

```
public string PasswordChangedOnLocal
{
    get { return PasswordChangedOn.ToString(DateFormat); }
} 
```

或者，您可以使用该`DateFormat`属性在视图本身中呈现日期。如果以后想更改它（例如，采用系统范围的约定），这实际上为您提供了更多的灵活性，因为您不需要重新编译站点，例如

```
@model SiteUser

...
<div id="passwordChangedOn">@Model.PasswordChangedOn.ToString(Model.DateFormat)</div>
... 
```

# .net - 在图片框上绘制多个多边形

> ID：13823060
> 
> 赞同：1
> 
> 时间：2012-12-11T15:29:30.303
> 
> 标签：.net, vb.net

我有一个带有平面图图像的 PictureBox。

在该图像上，我想绘制一个多边形，我可以使用以下代码：

```
Private points As New List(Of Point)

Private Sub FlorPlan_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles FlorPlan.MouseDown

points.Add(e.Location)
FlorPlan.Invalidate(New Rectangle(e.X, e.Y, 5, 5))
End Sub

Private Sub FlorPlan_Paint(ByVal sender As System.Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles FlorPlan.Paint
    For Each p As Point In points
        e.Graphics.FillRectangle(Brushes.Red, p.X, p.Y, 5, 5)
    Next
End Sub

Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim myPen As Pen
    myPen = New Pen(Drawing.Color.Red, 2)

    Dim myGraphics As Graphics = PictureBox.CreateGraphics
    myGraphics.DrawPolygon(myPen, points.ToArray)
    'myGraphics.FillPolygon(Brushes.Red, points.ToArray)
    myGraphics.Dispose()
End Sub 
```

我想做的是抓住那个对象，这样我以后就可以改变背景颜色等。

我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:18:34.327

他们通常有两种方法：

*   在某个自定义类的列表中手动跟踪所有图形对象。
*   为每个图形对象动态加载一个新控件。

如果您选择后者，我建议您创建自己的`UserControl`，其中包含有关每个图形对象的所有必要数据，例如多边形中的点。要动态加载它们，您可以执行以下操作：

```
Private Sub AddGraphicalObject(properties As GraphicalObjectProperties)
    Dim control As New GraphicalObjectControl()
    control.Properties = properties
    ' set position and size
    Panel1.Controls.Add(control)
End Sub 
```

在添加控件时，您可能还希望将一些事件处理程序添加到控件上的某些事件中。

# javascript - Javascript将整数解析为NaN？

> ID：13823062
> 
> 赞同：0
> 
> 时间：2012-12-11T15:29:31.323
> 
> 标签：javascript, integer, d3.js

我正在解析一些数据以显示在图表中，但是当我解析我的整数时，我总是得到 NaN。我知道这通常意味着它们没有被正确解析，但我正在使用`parseint`并且我认为这可以解决问题。我正在解析 Unixtime（第一个字段），然后是其他三个字段（正确解析）。然而，每当我去显示 Unixtime 时，它​​都会失败。我已经为 x 声明了 scale.linear，尽管 time.scale 也失败了。

我正在使用的代码片段如下：

```
d3.tsv("<?php echo $field; ?>values.tsv", function(error, data) {
  color.domain(d3.keys(data[0]).filter(function(key) { return key !== "Unixtime"; }));
  data.forEach(function(d) {
    d.Unixtime = parseInt(d.Unixtime/1000);
  });
  var cities = color.domain().map(function(name) {
    return {
      name: name,
      values: data.map(function(d) {
        return {Unixtime: d.Unixtime, value: parseFloat(d[name]/1000)};
      })
    };
  }); 
```

我收到的错误消息来自 Chrome 调试器。

```
Error: Problem parsing d="MNaN,1.7527908403982337CNaN,1.7527908403982337,NaN,1.7527908403982337,NaN,1.751122428294669CNaN 
```

数据如下：

```
1353168433      5557    6404    5510

1353175632      5478    6404    5510

1353182750      5432    6404    5510 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:33:46.257

问题是这一行：

```
d.Unixtime = parseInt(d.Unixtime/1000); 
```

当你将它除以 1000 时，你会得到一个十进制数。请尝试`parseFloat()`：

```
d.Unixtime = parseFloat(d.Unixtime/1000); 
```

或者，您可以`/1000`在转换为 int 后：

```
d.Unixtime = parseInt(d.Unixtime)/1000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:09:33.850

事实证明，根据 Alvaro 的建议，console.log(d.Unixtime) 打印为 undefined。有了这个，我回去注意到该字段的名称以某种方式更改为时间，而不是 unixtime。更改后，它可以工作。谢谢大家！

```
d3.tsv("<?php echo $field; ?>values.tsv", function(error, data) {
  color.domain(d3.keys(data[0]).filter(function(key) { return key !== "time"; }));
  data.forEach(function(d) {
    d.Unixtime = parseInt(d.time,10)/1000;
  });
  var cities = color.domain().map(function(name) {
    return {
      name: name,
      values: data.map(function(d) {
        return {time: d.time, value: parseFloat(d[name],10)/1000};
      })
    };
  }); 
```

# mysql - 对从 mysql 中的 db 中选择数据感到困惑

> ID：13823064
> 
> 赞同：2
> 
> 时间：2012-12-11T15:29:31.513
> 
> 标签：mysql, sql, reserved-words

我有 2 张桌子：`PLAYER`和`GROUP`.

当我打电话时：

```
SELECT * FROM PLAYER 
```

一切都很好，但是当我打电话时：

```
SELECT * FROM GROUP 
```

有错误：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“GROUP”附近使用正确的语法

我不明白为什么会出现这样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:30:15.560

`GROUP`是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，必须用反引号转义。

```
SELECT * FROM `GROUP` 
```

避免使用作为保留字的表名或列也是更好的做法。此外，指定一个列列表，而不是使用`*`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T15:30:11.480

`GROUP`是[**保留关键字**](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。你必须逃避它，就像这样

```
 SELECT * FROM `GROUP` 
```

**注意事项：**

*   强烈建议不要给表格命名`group`，最好使用复数`Groups`。
*   另外，尽量避免`*`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T16:40:17.710

正如您使用保留关键字 SELECT 和 FROM 来构建查询一样，在命名所有表、视图、约束和列时，您可能希望避免使用其他保留关键字，如下表中的那些。

（一些）保留关键字列表：WHERE、ORDER、GROUP、UPDATE、DELETE、CHECK、CHANGE、LIKE 等...

> 因此，在您的情况下，数据库引擎抱怨，因为查询需要 1 个强制子句 SELECT 和可选子句 FROM、WHERE、ORDER BY、GROUP BY、HAVING、LIMIT 等……[在这里阅读更多](http://dev.mysql.com/doc/refman/5.5/en/select.html "选择语法")

我们可能很想使用这些关键字；特别是如果它们已经在我们的问题域（或图表）中建模。例如，客户下订单产生 2 个实体 CLIENT 和 ORDER 等，或者机械师执行检查，给出 MECHANIC 和 CHECK。甚至是表达 LIKE 的 FACEBOOK_USER。或者在您的情况下，例如可能有一群人。

作为一般规则，您可以像这样转换实体以避免出现问题：-

a) 实体总是（在纸上）建模为单一的，因为它代表现实世界或问题域中的概念/资产/人。例如。订购，喜欢，检查，学生，汽车

b) 它转换成的相应 DB 表总是使用复数命名。逻辑是该表将包含该实体的许多实例。因此，订单、喜欢、支票、学生、汽车

> 最后，您做出决定，因为如果您真的想要或需要使您的表名像保留字一样，您真的可以使用 GROUP。只需记住在查询时使用反引号 (“`”) 将它们放在引号中，以便对其进行特殊处理。在创建时，数据库引擎不会抱怨，相信您知道自己在做什么。

# delphi - TColumn.FieldName 属性编辑器

> ID：13823066
> 
> 赞同：1
> 
> 时间：2012-12-11T15:29:37.440
> 
> 标签：delphi, delphi-7, tcollection, tcollectionitem, tpersistent

我正在分析`DBGrids.pas`单位。有一个`TColumn`类已经发布了该`FieldName`属性

```
property  FieldName: String read FFieldName write SetFieldName; 
```

它被声明为一个字符串，但在对象检查器中它显示为一个可编辑的组合框 ( `TDataFieldProperty`)

我分析了几乎所有`DBGrids`单元，但找不到完成该技巧的地方。我应该去哪里看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:39:52.787

您正在寻找的 - 亲爱的过去 - 是[RegisterPropertyEditor](http://docwiki.embarcadero.com/Libraries/XE2/en/DesignIntf.RegisterPropertyEditor)方法。

> 调用 RegisterPropertyEditor 将 EditorClass 参数指定的属性编辑器类与 PropertyType 参数指定的属性类型相关联。

在你的情况下，你需要一个 TDataFieldProperty 所以它会像：

```
RegisterPropertyEditor(TypeInfo(string), TColumn, 'FieldName', TDataFieldProperty); 
```

# api - 尽管凭据正确，但 Paypal API 错误 10002

> ID：13823068
> 
> 赞同：3
> 
> 时间：2012-12-11T15:29:52.417
> 
> 标签：api, paypal

我知道这个问题之前已经被问过一千次了，当我对这个问题进行一些谷歌研究时，我在这里遇到了一些话题。

我的问题是：我收到错误 10002 - “安全标头无效”。我检查了凭据，它们是正确的。我将实时凭据用于实时模式，并连接到正确的服务器和端点。

我正在使用用 PHP 编写的 Paypal 类。在沙盒模式下使用它时效果很好。如果我在实时模式下使用它，它会显示我们所知道的结帐：左侧是项目和总金额，右侧是登录屏幕。现在我使用我的 Paypal 帐户凭据登录，API 要求我确认购买。我这样做。当它处于执行交易并重定向到“购买成功”页面时，它突然说上面提到的错误。

所以我用沙盒帐户在我的机器上做了一些测试。假设我将使用无效的 API 凭据，我将永远看不到结帐（在右侧登录表单的左侧摘要中）。但是我愿意。首先，如果我确认交易，则 API 不再适用于凭证。

凭据如何先有效，然后再无效？这对我来说没有任何意义。在沙盒模式下测试时，一切正常。

我正在使用这个库：

[http://www.php-suit.com/paypal](http://www.php-suit.com/paypal)

非常感谢您的帮助，因为我再也找不到该行为的任何解释了。再次：我检查了凭据，它们是正确的。

最好的问候，奢侈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T16:19:11.810

我建议再次检查 API[凭据](https://developer.paypal.com/webapps/developer/docs/classic/api/apiCredentials/)或使用的端点。

由于以下常见原因，返回错误“错误 10002 - 安全标头无效”：

*   向您的实际 PayPal 帐户提供用户名/密码，而不是您的 API 用户名和 API 密码。当您生成 API 证书/签名时，我们会生成您的 API 用户名和密码。
*   对 Sandbox 和 Live 使用相同的 API 信息。您需要为您的沙盒和真实账户生成单独的 API 信息。
*   您尚未更新[端点](https://developer.paypal.com/webapps/developer/docs/classic/api/endpoints/)以指向 PayPal 的实时 API 服务器。
*   任何字符的尾随或前导空格。

例如，如果您使用的是 Live Environment 端点，请确保您使用的是在 Live 帐户中创建的凭据。在粘贴到集成时仔细检查空格。如果您使用变量“SUBJECT”，请仔细检查插入的值。

# python - 根据元素距离交错两个numpy数组（python）

> ID：13823079
> 
> 赞同：2
> 
> 时间：2012-12-11T15:30:30.467
> 
> 标签：python, sorting, numpy

我有两个数组，看起来像这样：

```
X = np.array([ 157,  262,  368,  472,  577,  682,  786,  891,  996, 1100, 1204,
       1310, 1415, 1520, 1625, 1731, 1879])

Y = np.array([  30,  135,  240,  345,  450,  555,  660,  765,  870,  975, 1080,
       1185, 1290, 1395, 1500, 1605]) 
```

阵列将：

*   使值从开始按升序排序。
*   有时长度不等。

我想`Z`根据以下内容将这两个交错成一个新数组：

*   每个元素只能使用一次
*   不需要使用所有元素
*   仅当存在元素in且其中没有其他元素的值差小于且不存在其值距离小于的元素时，`Xi`才可以包含元素。（同样的规则适用于 中的元素。）`Z``Yj``Y``Y``abs(Xi - Yj)``X``Yj``abs(Xi - Yj)``Y`

我看到我可以用一堆嵌套的 for 循环来做到这一点，但我想知道是否有一些更聪明、更整洁的方法来做到这一点？

（我意识到，我提出这个问题的方式，这听起来像是从教科书上剪下来的。它不是。但也许这是一个经典的排序功能，谁知道呢，但对于我作为一名生物学家来说......我只能说我不知道如何以有效，整洁的方式解决它。）

**编辑：不是那么漂亮的例子**

```
new_list = list()
for i in X:
    delta_i = np.abs(Y - i)
    delta_reciprocal = np.abs(X - Y[delta_i.argmin()])
    if delta_i.min() == delta_reciprocal.min():
        new_list += sorted([Y[delta_i.argmin()],
        X[delta_reciprocal.argmin()]])
Z = np.array(new_list) 
```

我什至不完全确定它是否满足所有标准，但是在重写旧代码时，我只需要一个循环......仍然必须有一些更好的方法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:57:59.690

让我们试着找出这个例子的解决方案：

```
In [1]: import numpy as np

In [5]: X = np.array([1879, 1731])

In [6]: Y = np.array([1481, 1691, 1586, 1796]) 
```

`X`我们可以像这样计算值 in和值 in之间的所有距离`Y`：

```
In [7]: dist = np.abs(np.subtract.outer(X,Y))

In [8]: dist
Out[8]: 
array([[398, 188, 293,  83],
       [250,  40, 145,  65]]) 
```

行对应于`X`值，列对应于`Y`值。

为了找到`X`最接近 中某个元素的值`Y`，我们正在寻找对应于矩阵*列*中的`X`最小值的值 。每列对应一个特定的，因此一列中的最小距离对应于一些和特定之间的最小值。*`dist``Y``X``Y`*

 *从视觉上讲，我们正在寻找的是**它们**所在行**和**`dist`所在列的最小值。我们称它们为“行列最小值”。

 ****在上面的`dist`数组中，40 是行列最小值。65 是列最小值，但不是行列最小值。

对于每一列，我们可以通过这种方式找到最小化该列的 X-index：

```
In [6]: idx1 = np.argmin(dist, axis = 0)

In [7]: idx1
Out[7]: array([1, 1, 1, 1]) 
```

同样，对于每一行，我们可以通过以下方式找到 Y 索引：

```
In [8]: idx2 = np.argmin(dist, axis = 1)

In [9]: idx2
Out[9]: array([3, 1]) 
```

现在，让我们暂时忘记这个例子，假设`idx1`看起来像这样：

```
 0,1,2,3,4,5   # the index value 
idx1 = (_,_,_,_,_,2,...) 
```

这就是说在第 5 列中，第 2 行具有最小值。

然后，如果第 2 行、第 5 列对应于行列最小值，则`idx2` 必须如下所示：

```
 0,1,2        # index value
idx2 = (_,_,5,...) 
```

我们可以用 NumPy 来表达这种关系

```
idx1[idx2] == np.arange(len(X))
idx2[idx1] == np.arange(len(Y)) 
```

因此，对应于行列最小值的 X、Y 值是

```
X[idx1[idx2] == np.arange(len(X))] 
```

和

```
Y[idx2[idx1] == np.arange(len(Y))] 
```

* * *

```
import numpy as np
tests = [
    (np.array([1879, 1731]),
     np.array([1481, 1691, 1586, 1806])), 
    (np.array([1879, 1731]),
     np.array([1481, 1691, 1586, 1796])),
    (np.array([ 157,  262,  368,  472,  577,  682,  786,  891,  996, 1100, 1204]),
     np.array([  30,  135,  240,  345,  450,  555,  660,  765,  870,  975])),
    (np.array([ 157, 262, 368, 472, 577, 682, 786, 891, 996, 1100, 1204, 1310,
                1415, 1520, 1625, 1731, 1879]),
     np.array([ 221, 326, 431, 536, 641, 746, 851, 956, 1061, 1166, 1271, 1376,
                1481, 1586, 1691, 1796]))]

def find_close(X,Y):
    new_list = list()
    for i in X:
        delta_i = np.abs(Y - i)
        # print(delta_i)
        delta_reciprocal = np.abs(X - Y[delta_i.argmin()])
        if delta_i.min() == delta_reciprocal.min():
            new_list += sorted([Y[delta_i.argmin()],
                                X[delta_reciprocal.argmin()]])
    Z = np.array(new_list)
    return Z

def alt_find_close(X,Y):
    dist = np.abs(np.subtract.outer(X,Y))
    idx1 = np.argmin(dist, axis = 0)
    idx2 = np.argmin(dist, axis = 1)
    Z = np.r_[X[idx1[idx2] == np.arange(len(X))], Y[idx2[idx1] == np.arange(len(Y))]]
    return Z

for X, Y in tests:
    assert np.allclose(sorted(find_close(X,Y)), sorted(alt_find_close(X,Y))) 
```

* * *

时间结果：

```
% python -mtimeit -s'import test' 'test.find_close(test.X, test.Y)'
1000 loops, best of 3: 454 usec per loop
% python -mtimeit -s'import test' 'test.alt_find_close(test.X, test.Y)'
10000 loops, best of 3: 40.6 usec per loop 
```

所以`alt_find_close`明显快于`find_close`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T22:21:15.947

我想你可能想要使用`scipy.spatial.cKDTree`（你可以用 numpys 自己构建这样的东西，`searchsorted`但我看不出有什么意义，除非可能对等距离的问题有更多的控制）。

但是，通常您应该小心。您的示例是整数数组，根据发现的情况可能会出现问题（argmin 总是找到第一个，所以也许没关系，但是对于这个，如果距离相等，您可能会丢分）。

```
import numpy as np
from scipy.spatial import cKDTree

def find_close_fast(X, Y):
    kX = cKDTree(X[:,None]) # needs to be 2D
    kY = cKDTree(Y[:,None])

    nearest_X = kX.query(Y[:,None], p=1)[1] # might as well use 1-norm

    # Which Y corresponds the other way around?
    nearest_Y = kY.query(X[nearest_X][:,None], p=1)[1]

    w = nearest_Y == np.arange(len(Y))
    result = np.concatenate((X[nearest_X[w]], Y[w]))
    return result 
```

如果您的阵列变大（每个阵列可能大约几百个），这将*快得多。*例如：

```
In [121]: X = np.random.random(5000)

In [122]: Y = np.random.random(5000)

In [123]: %timeit alt_find_close(X, Y)
1 loops, best of 3: 1.03 s per loop

In [124]: %timeit find_close_fast(X, Y)
10 loops, best of 3: 23.3 ms per loop

In [125]: np.all(np.sort(find_close_fast(X,Y)) == np.sort(alt_find_close(X, Y))) 
Out[125]: True 
```

但是我在这里使用浮点数是有原因的，如果你可以有相等的距离，则不能保证结果。排序是不同的，并没有真正试图弄清楚为什么。

编辑：实际上，您也可以将两个数组归为一个（并记住哪个属于哪个类），然后从那里检查两个不同类的相邻位置。如果一个点有另一个类的两个邻居，手动选择更接近的一个。这可能更快，并且只使用 numpy。*****

# c++ - 3D 模型文件并从中创建三角形网格

> ID：13823080
> 
> 赞同：1
> 
> 时间：2012-12-11T15:30:34.913
> 
> 标签：c++, model, 3d, geometry, mesh

我是新来的。我正在学习 C++，所以我对事物知之甚少（好吧，我在编程方面有很多经验，但在其他语言方面有很多经验。我也知道如何使用计算机 xD）。我决定开始研究游戏引擎。我知道这并不容易，但这就是我想做的原因之一——尝试/获得经验是我学习的最佳方式。

所以，我从渲染器开始，但我不知道如何制作一个 3D 模型文件，正如它在名称中所说的那样，它将有一个 3d 模型，并且它可以加载到 C++ 引擎中的三角形网格中，我可以与 Direct3D 一起使用。除了告诉我如何开始之外，我不希望你做任何事情。

如果您决定阅读本文并提供帮助，非常感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:35:34.213

这是一个很好的问题，听起来很真实，因为你和我三年前在同一个地方。我查看了可用于生成 3D 内容的各种应用程序。我不想花时间学习各种应用程序，因为我想编写我的游戏引擎。我找不到足够快的东西来学习让它值得我花时间（那是免费的）所以最后我把一些脚本放在一起来创建 3D 模型（顶点数组）。这些发展成一个 GUI 驱动的界面，它发展成我自己的功能齐全的 3D 建模工具。现在，3 年后，我的游戏引擎处于次要地位，而 MeshCreator（查看[http://www.MeshCreator.co.uk](http://www.MeshCreator.co.uk)）现在是我正在进行的项目。

您需要一种加载顶点数组的方法。OBJ 文件（波前）是基于文本的并且相当容易阅读。MeshCreator 的输出也是基于 ASCII 的，网站上有关于如何解释文件格式的详细信息。

MeshCreator 的文件输出旨在轻松导入任何 3D 项目。您还可以查看 .OBJ 文件，因为大多数 3D 应用程序（包括我的）都支持它们。OBJ 文件可能会变得有点复杂。

简而言之，您需要一个易于使用的工具。我花了 3 年时间写自己的，所以我不推荐它。试试 MeshCreator、MilkShape 3D 和 Google Shetchup。此外，还有许多网站提供可在项目中使用的免版税 3D 内容，其中许多都以 OBJ 格式提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:48:55.927

3D 模型文件格式可能非常复杂，主要是它们可以包含的大量事物类型（网格、图元、曲面、材质、照明等）。这也意味着你也很难想出自己的格式。所以，这里真的有两个选择：找到现成的库来处理模型的加载；或者，选择预先存在的格式并编写自己的代码来加载这些文件（并使用标准编辑器来创建它们）。

使用现成库加载模型的主要问题通常是这些库通常与特定的渲染器密切相关，并且在加载文件时生成的（可能的）数据结构通常非常复杂。因此，只有当您准备采用该模型加载库所属的渲染器或与之相关的渲染器时，这通常是一个更好的解决方案。有 Irrlicht、Ogre3D、Coin3D 等选项，它们在加载相当标准的 3D 模型文件格式方面都具有合理的能力。

如果您要选择预先存在的文件格式并自己创建加载代码（因此，与您自己的渲染器相关联），那么您应该谨慎选择。3ds 文件格式使用非常广泛，其内部结构很好且相当简单，其优点是您可以轻松跳过尚不支持的元素（这在您增量编写渲染代码时很有用）。大多数其他格式具有类似的功能（向前和向后兼容性，以及跳过“不支持”元素的能力）。还有一些重要的开放标准格式，vrml 和 x3d，您可能想看看。[此外，还有一些与Blender](http://www.blender.org/)等开源 3D 编辑器相关的更简单格式. 拥有一个能够以您可以加载的文件格式输出的良好 3D 编辑器非常重要。这就是为什么您不应该创建自己的文件格式的原因，因为您将有很多额外的工作要做，无论是为某些 3D 编辑器创建自定义“导出”脚本（或插件），还是创建自己的编辑器（一个不朽的任务）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:54:50.157

四处搜寻。如果你想让你的引擎基于 DirectX，我相信 SDK 附带了解释基础知识的代码示例，比如加载网格。

如果您只是学习 C++，我建议您从一个更简单的项目开始，例如使用[Irrlicht](http://irrlicht.sourceforge.net/)或[OGRE](http://www.ogre3d.org/)等引擎制作一个简单的游戏，但这取决于您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:57:53.030

我认为你需要像[obj 文件](http://en.wikipedia.org/wiki/Wavefront_.obj_file)这样的东西。您可以找到在线免费文件来玩。如果你想自己生成，我想你需要一些 3D 渲染软件。您还可以搜索如何解析它们并将它们的内容加载到您的程序中。

# c# - 用于网页打印屏幕的 Asp .Net C#

> ID：13823082
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:30:37.377
> 
> 标签：c#, javascript, asp.net, asp.net-mvc

有没有办法用 ASP.net C# 截屏，或者我们可以截屏任何 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:32:01.293

Asp.net 在 Web 服务器上运行，因此无法截取客户端的屏幕截图。

您应该使用 java 脚本，也许还有一个 ActiveX 控件来实现这一点。

反正我不建议你走这条路

你可以做什么来存储页面的内容（如果这可以帮助）做类似下面的事情

```
WebClient client = new WebClient();
string downloadString = client.DownloadString("http://www.gooogle.com"); 
```

然后，您可以创建一个看起来像该页面的 .html 文件

# iphone - 当用户在 iphone 中触摸其超级视图时，如何实现关闭子视图？

> ID：13823083
> 
> 赞同：0
> 
> 时间：2012-12-11T15:30:37.120
> 
> 标签：iphone, ios, view, uiviewcontroller, subview

我有一个视图控制器，我在同一个视图控制器中创建了另一个视图并将其添加为子视图。当单击按钮时，将出现子视图并占据屏幕的一半。当用户触摸时如何关闭子视图超级视图（背景中的主视图）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:32:41.323

您可以使用手势识别器并在子视图上调用 removeFromSuperview 的超级视图上的单击操作。

在您的 viewDidLoad 添加如下内容：

```
 UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];

    [singleTap setNumberOfTapsRequired:1];
    [mainView addGestureRecognizer:singleTap]; 
```

然后添加函数：

```
- (void) handleSingleTap: (id) sender
{

    [secondView removeFromSuperView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:55:01.603

为了更好地控制何时删除子视图，您可以像这样覆盖 mainViewController 的响应器方法：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    [subview removeFromSuperView];
} 
```

通过这种方式，您实际上可以看到用户在屏幕上点击的位置，并做出相应的响应。

# java - 在android中无法连接到互联网时如何放置对话框？

> ID：13823084
> 
> 赞同：0
> 
> 时间：2012-12-11T15:30:39.057
> 
> 标签：java, android, httpresponse

我的应用程序中有一个登录页面，并且我有一个服务器。每当我将选项卡设置为连接到其他无线连接并单击登录按钮时，它都会输出错误“无路由到主机”并崩溃。但是，如果我连接到我的服务器，它工作得很好。每当我在登录时连接到错误的服务器时，我都想发出提示。

这是我的代码......但我不知道把它放在哪里......请帮忙。

```
 AlertDialog.Builder builder = new AlertDialog.Builder(LoginPage.this);
        builder.setTitle("Attention!");
        builder.setMessage("Connection to Server failed.");
        builder.setPositiveButton("Retry", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
                new phpRequest().execute();

        }
        });
        builder.setNegativeButton("Cancel", null);

        AlertDialog dialog = builder.create();
        dialog.show(); 
```

这是我的phpRequest。

```
 private class phpRequest extends AsyncTask<String, Integer, String> 
{

    @Override
    protected String doInBackground(String... params) 
    {

        String responseString = "";

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost request = new HttpPost(myurl);

        try
        {    
            String studSt = etStudNo.getText().toString();
            String passSt = etPassword.getText().toString();

            List<NameValuePair> parameter = new ArrayList<NameValuePair>();
            parameter.add(new BasicNameValuePair("student_id", studSt));
            parameter.add(new BasicNameValuePair("password", passSt));

            request.setEntity(new UrlEncodedFormEntity(parameter));

            HttpResponse response = httpclient.execute(request);
            StatusLine statusLine = response.getStatusLine(); 

            if(statusLine.getStatusCode() == HttpStatus.SC_OK)
            {
                ByteArrayOutputStream out = new ByteArrayOutputStream();
                response.getEntity().writeTo(out);
                out.close();
                responseString = out.toString();                       
            }
            else
            {

                response.getEntity().getContent().close();
                throw new IOException(statusLine.getReasonPhrase());
            }

        }
        catch (Exception ioe)
        {

            Log.e("Error", ioe.toString());
        }

        return responseString;
    }

     @Override
     protected void onPostExecute(String result) 
     {      
         super.onPostExecute(result);
         String c = result;
         int check = Integer.parseInt(c);

         if (check == 1)
         {
             Intent i = new Intent(LoginPage.this,HomePage.class);
             startActivity(i); 

             globalVars globalVars = (globalVars)getApplicationContext();

                String idnumber = etStudNo.getText().toString();
                globalVars.setStudLoggedId(idnumber);               

             Toast.makeText(getBaseContext(), "Student No: "+etStudNo.getText().toString(),Toast.LENGTH_LONG).show();
         }
         else
         {
             etPassword.setText("");
             Toast.makeText(getBaseContext(), "Login Failed", Toast.LENGTH_LONG).show(); 
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:06:18.637

问题从这里开始：

```
HttpResponse response = httpclient.execute(request); 
```

`IOException`因为如果它无法连接到服务器并完成请求，这将引发一个错误。

然后，您会在此处捕获异常：

```
catch (Exception ioe)
{
    Log.e("Error", ioe.toString());
} 
```

并且您的函数继续，但`responseString`仍然包含您首先分配给它的空字符串“”，而不是 HTTP 响应（因为它从未完成）。

这意味着空字符串 "" 被返回并传递给`onPostExecute(String result)`， where`Integer.parseInt(c)`将失败并抛出 a `NumberFormatException`，这可能是导致您的应用程序崩溃的原因。

一个简单的解决方案是：

1.  在异常处理程序中`doInBackground()`，在记录错误后，您应该`return null`指示方法失败。
2.  然后在里面`onPostExecute(String result)`，检查结果是否`null`在做其他事情之前。如果是，您知道请求失败，您可以安全地弹出一个描述错误的对话框。

如果您在 Eclipse 中设置了一些断点，您可以自己遵循并正确理解它。

希望有帮助！

# google-chrome - 修复 IIS 中 Chrome 的内容处置逗号问题

> ID：13823087
> 
> 赞同：1
> 
> 时间：2012-12-11T15:30:47.560
> 
> 标签：google-chrome, iis, iis-7, url-rewriting, http-headers

从版本 16 开始的 Chrome 对包含不带引号的逗号的内容处置标头变得非常严格。尽管网络上的大多数站点都将面临用户修复其服务器的压力，但对于没有人愿意接触的小型或内部 Intranet 应用程序来说，这并不容易。

[在 Chrome 的论坛上讨论这个问题，什么有效，什么无效](http://productforums.google.com/forum/#!topic/chrome/H_DneQinvT0/discussion)。

简短的回答是`Content-Disposition`，如果包含标题，则文件名中不需要逗号或引用文件名。

我们有一个这样的系统处理文档管理，**触摸代码库不是一种选择**，但是任何名称中带有逗号的文件都会在 Chrome 中引发错误。我怎样才能解决这个问题？

*做一些[危险的事情！事情](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)在这里，但对我的回答不是 100% 有信心，并希望得到评论/替代方案*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:48:38.317

You could do this using IIS's URL Rewrite module which can also work on headers.

The key will be to match on `Content-Disposition` which includes filename= and doesn't have quotemarks for the filename.

```
<system.webServer>
    <rewrite>
        <outboundRules>
            <rule name="Chrome Comma Fix">
                <match serverVariable="RESPONSE_Content_Disposition" pattern="^(.*)(filename=)(?!&quot;)([^&quot;]*)(;.*)?$" />
                <action type="Rewrite" value="{R:1}{R:2}&quot;{R:3}&quot;{R:4}" />
            </rule>
        </outboundRules>
    </rewrite>
</system.webServer> 
```

I haven't yet tested this though.

# android - 如何在android中获取默认字符串值？

> ID：13823093
> 
> 赞同：3
> 
> 时间：2012-12-11T15:31:08.237
> 
> 标签：android, localizable.strings

我已经在我的 android 应用程序中实现了本地化，但我有一个小问题。我无法从默认 strings.xml 文件中检索字符串的默认值。例如。里面 `project/res/values/strings.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
        <string name="distance">distance</string>
</resources> 
```

和里面`project/res/values-nl/strings.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

  <string name="distance">afstand</string>
</resources> 
```

我的要求是从 project/res/values/strings.xml 文件中获取“距离”变量的值，而不管当前使用的是哪个语言环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-15T13:44:49.270

我们可以使用上下文配置来完成它，它将在 API +17 中运行，例如：

```
public static String getDefaultString(Context context, @StringRes int stringId){
        Resources resources = context.getResources();
        Configuration configuration = new Configuration(resources.getConfiguration());
        Locale defaultLocale = new Locale("en"); // default locale
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            LocaleList localeList = new LocaleList(defaultLocale);
            configuration.setLocales(localeList);
            return context.createConfigurationContext(configuration).getString(stringId);
        } else if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1){
            configuration.setLocale(defaultLocale);
            return context.createConfigurationContext(configuration).getString(stringId);
        }
        return context.getString(stringId);
    } 
```

对于早期版本的 Android，您可以使用以下内容：

```
public static String getDefaultString(Context context, @StringRes int stringId){
  Resources resources = context.getResources();
  Locale defaultLocale = new Locale("en");// default locale
  configuration.locale = newLocale;
  resources.updateConfiguration(configuration, res.getDisplayMetrics());
  return resources.getString();
} 
```

但我想它可以改变应用程序中的当前上下文。而且如果你不使用应用程序中的默认语言，本地化就会出现问题。

# android - 查询联系人 - 有时返回空游标

> ID：13823097
> 
> 赞同：4
> 
> 时间：2012-12-11T15:31:15.273
> 
> 标签：android, contacts, contactscontract

我正在尝试查询联系人的显示名称：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case REQ_CODE_PICK_CONTACT:
        if (resultCode == Activity.RESULT_OK) {
            Uri contactUri = data.getData();

            ContentResolver cr = getActivity().getContentResolver();
            Cursor c = cr.query(contactUri, null, null, null, null);

            if (c != null && c.moveToFirst()) {
                //get the contact name
            }
        }
        break;
    }
} 
```

现在问题来了：

对于某些联系人，光标返回为空，我不知道为什么。我检查了 的值`contactUri`，它看起来像： content://com.android.contacts/data/3032

对于我尝试过的所有类型的联系人 - facebook、google、电话等，Uri 看起来都一样。

对于某些联系人，光标会返回一个结果，这很好，我可以提取名称。但是对于其他人来说，即使 ContentUri 完全相同，它也是空的，它起源于 Intent.getData()。

以下是一些可能与这个奇怪问题有关的事实：

*   所有具有空光标的联系人都是 Facebook 联系人。Uri 看起来像上面。

*   并非所有 facebook 联系人都会导致此问题：我有 HTC One X，如果操作系统发现它们之间存在关系，我可以在电话簿上“链接”联系人（例如，如果它检测到 gmail 帐户和 facebook 帐户的相似电话号码，它建议我在它们之间“链接”）。只有未“链接”的 facebook 联系人返回空。

现在我没有想法。有没有人遇到过这个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:43:26.790

我在 HTC Incredible S 上遇到了同样的问题，这让我认为这可能是 HTC 手机的问题。无论如何，我最终使用的解决方法是从您返回的捆绑包中检索电话号码`data`。

```
final String phoneNumber = data.getStringExtra("android.intent.extra.PHONE_NUMBER"); 
```

此时，您需要执行一些“反向逻辑”来使用[PhoneLookup](http://developer.android.com/reference/android/provider/ContactsContract.PhoneLookup.html)获取联系人的其他数据。

# java - 有没有办法将排除项添加到 Eclipse 的“对所有成员进行排序”？

> ID：13823105
> 
> 赞同：1
> 
> 时间：2012-12-11T15:31:34.630
> 
> 标签：java, eclipse, sorting, save, members

一般来说，我喜欢 Eclipse 中的“对所有成员进行排序”功能，并为保存操作打开它。

但是，有时我想为个别部分停止它，例如枚举。有没有办法做到这一点？

*我知道“忽略字段和枚举常量”选项，但并不热衷于使用它，因为通常就像我按字母顺序排列的字段一样。还知道我可以在第一次保存后撤消更改，然后再次保存 - 但不想每次都记住要这样做。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:54:49.687

我发现最好的方法是为保存操作勾选“忽略字段和枚举常量”选项，但在 Java 代码样式 - 清理中取消勾选。然后，您可以根据需要通过 Source - Cleanup... 手动清理，并在保存之前更改任何未正确重新排序的内容。

不理想，但考虑到 Eclipse 的局限性，这似乎是最好的方法......

# android - 如何提高列表视图的性能？

> ID：13823106
> 
> 赞同：0
> 
> 时间：2012-12-11T15:31:34.213
> 
> 标签：android, database, listview, android-asynctask

我有一个场景，我必须执行以下任务： 1\. 填充列表视图。2.执行数据库操作，这是非常耗时的任务。3\. 数据库处理/操作时间有时是不可预测的。

我使用了持有者模式的 listView，现在它比以前工作得更快，但仍然需要大量时间。我还能做些什么来提高性能。我有一个想法，但我担心它是否会很好实施。想法是将数据库操作放在 AsyncTask 中并仅在那里更新我的列表视图。但我害怕这样做是因为我的列表视图完全依赖于数据库结果。所以只有当我完成数据库操作时，我才能在 Listview 上显示一些东西

请建议使用异步任务将是一个好方法，请提出任何其他想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:36:29.863

使用 Holder 方法很好。始终在您的适配器中使用它。确保您也在重用转换视图。

使用 an`AsyncTask`是最好的选择。但是您不必等待整个操作完成。阅读如何`AsyncTask`工作。使用您的方法`publishProgress()`将批量数据提供给您的列表。`doInBackground()``AsyncTask`

例如，如果您必须处理 100 行，则处理 10 行，然后执行`publishProgress()`将使用这 10 行更新列表的操作。当您处理下一批时，`publishProgress()`再次更新列表。

# asp.net - JSON.NET 读取 JObject 时出错

> ID：13823109
> 
> 赞同：5
> 
> 时间：2012-12-11T15:31:38.423
> 
> 标签：asp.net, ajax, json, asp.net-web-api, json.net

我通过 AJAX 和 Web Api 将 JSON 对象发送到我的服务器：

```
var data = [
  ["fdsfsd", "Kifdsfa", "fsdfsa", "fadsf", "fasdfsd", "fadsf", "fasdfsd"],
  ["2008", "-5", "11", "12", "13"],
  ["2009", "20", "-11", "14", "13"],
  ["2010", "30", "15", "-12", "readOnly"]
];

$.ajax({
        url: '../webapi/Products',
        type: 'POST',
        dataType: "text", 
        data: "="+JSON.stringify( data ),
        success: function (test) {
                alert(test);
            },
            error: function (test) {
                alert("Error");
            } 
```

所以我在服务器上获取我想用 JSON.NET 解析的值：

```
public void Post([FromBody]string value )
{
      JObject o = JObject.Parse(@value);
} 
```

这会引发异常：

```
Error reading JObject from JsonReader. Current JsonReader item is not an object:
StartArray. Path '', line 1, position 1. 
```

为什么？这个价值似乎对我来说是正确的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T15:40:38.130

json.stringify 将创建以下 json 字符串：

```
[
  ["fdsfsd", "Kifdsfa", "fsdfsa", "fadsf", "fasdfsd", "fadsf", "fasdfsd"],
  ["2008", "-5", "11", "12", "13"],
  ["2009", "20", "-11", "14", "13"],
  ["2010", "30", "15", "-12", "readOnly"]
] 
```

这是一个 jsonArray 而不是 JsonObject。因此，在服务器端，您必须使用`JArray a = JArray.Parse(@value);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:42:31.193

看看这个，我建议改变

```
data: "="+JSON.stringify( data ), 
```

至

```
data: "myJSON="+JSON.stringify( data ), 
```

...因为 jQuery 期望一个对象序列化，或者一个有效的查询字符串，然后监听该发布的变量。我认为您不能只发布一堆数据而不将其分配为名称/值对的值。

# sql - tsql循环表之间的父子关系

> ID：13823111
> 
> 赞同：1
> 
> 时间：2012-12-11T15:31:50.357
> 
> 标签：sql, sql-server, tsql, recursive-descent

我有一张这样的桌子：

```
table item
(
   id    int,
   quantity float,
   father int, -- refer to item itself in case of subitem
) 
```

我需要像这样总结 al 数量加上儿子数量：

```
select i.id, max(i.quantity)+sum(ft.quantity) as quantity
from item i
left join item ft on ft.id=i.id
group by i.id 
```

我的麻烦是因为父子之间的关系是递归的，所以我想把他的祖父数量等相加……我不知道最大深度，比我不能加入很多次。

我能做些什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:01:25.703

您必须使用递归 CTE。像这样的东西：

```
;WITH FathersSonsTree
AS
(
  SELECT Id, quantity, 0 AS Level
  FROM Items WHERE fatherid IS NULL
  UNION ALL
  SELECT c.id, c.quantity, p.level+1
  FROM FathersSonsTree p
  INNER JOIN items c ON c.fatherid = p.id
 ), ItemsWithMaxQuantities
AS
(
  SELECT *,
  ROW_NUMBER() OVER(PARTITION BY level 
                    ORDER BY quantity DESC) rownum
  FROM FathersSonsTree
  )
SELECT 
  ID,  
  (SELECT MAX(Quantity) 
   FROM FathersSonsTree t3 
   WHERE t3.level = t1.level
  ) + 
  ISNULL((SELECT SUM(t2.Quantity) 
   FROM FathersSonsTree t2
   WHERE t1.level - t2.level = 1), 0)
FROM FathersSonsTree t1
ORDER BY ID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/11cfe/18)

这会给你类似的东西：

```
| ID | QUANTITY |
-----------------
|  1 |       10 |
|  2 |       20 |
|  3 |       20 |
|  4 |       20 |
|  5 |       32 |
|  6 |       32 |
|  7 |       32 |
|  8 |       32 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:38:52.777

您可以尝试构建递归 CTE（公用表表达式），如 SQLAuthority 上的这篇文章中所述：

[http://blog.sqlauthority.com/2012/04/24/sql-server-introduction-to-hierarchical-query-using-a-recursive-cte-a-primer/](http://blog.sqlauthority.com/2012/04/24/sql-server-introduction-to-hierarchical-query-using-a-recursive-cte-a-primer/)

作者 Pinal Dave 讨论了在员工表上使用递归 CTE，该表具有 ManagerID 的自引用外键，以返回员工列表，其中包含员工之间的层级数和员工所在的层次结构的顶部没有经理（ManagerID = NULL）。这并不完全是您想要的，但它可能会让您入门。

我做了一些实验，最终得到了与 Mahmoud Gamal 的解决方案非常相似的东西，但略有不同，不仅包括父母、祖父母、曾祖父母等数量，还包括孩子数量。

这是我使用的测试表：

```
CREATE TABLE Items(ID int IDENTITY
                      CONSTRAINT PK_Items PRIMARY KEY,
               Quantity int NOT NULL,
               ParentID int NULL
                            CONSTRAINT FK_Item_Parents REFERENCES Items(ID)); 
```

和数据：

```
ID 数量 ParentID            
-------------------------------------------------- ----------
1 10 {NULL}
2 10 1
3 10 2
4 10 3
5 10 2
```

这是我的递归查询：

```
WITH cteRecursiveItems
AS (SELECT Id,
           quantity,
           0
          AS Level
    FROM Items
    WHERE ParentID IS NULL
    UNION ALL
    SELECT i.id,
           i.quantity,
           cri.level + 1
    FROM
         cteRecursiveItems cri
         INNER JOIN items i ON i.ParentID = cri.id)
SELECT ID,
       Quantity + (
                   SELECT MAX(Quantity)
                   FROM cteRecursiveItems cri3
                   WHERE cri3.level = cri1.level) + (
                                                 SELECT SUM(cri2.Quantity)
                                                 FROM cteRecursiveItems cri2
                                                 WHERE cri1.level - cri2.level = 1) as Total
FROM cteRecursiveItems cri1
ORDER BY ID; 
```

这是我对测试表运行它得到的结果：

```
身份证总数             
--------------------------------------
1 {NULL}
2 30
3 30
4 40
5 30
```

它仍然需要稍微调整，因为第一行和第二行相差 10。第 1 行应该总共有 10，第 2 行应该总共有 20。我正在做笔记，以便在我回家时尝试修复它. 现在不能把我雇主的太多时间花在这上面。:) 其他行具有我期望的值。

# c - Ruby 的线程#join(0) 的功能？

> ID：13823116
> 
> 赞同：2
> 
> 时间：2012-12-11T15:32:02.353
> 
> 标签：c, ruby, multithreading

因此，我们正在尝试调试我们的应用程序的问题，并且我们认为我们已将其范围缩小到线程问题。

我根据 Ruby 关于 Thread 的文档了解，为 join 方法提供一个整数参数指定在返回 nil 之前等待线程加入多长时间。

但是，我不确定当您传入“0”时会发生什么。

我的一位同事在研究了 Ruby 解释器的 C 代码之后，似乎认为这不是“根本不等待，立即加入它，如果它不回来就返回 nil”，而更像是“不要打扰加入，只需在给定时刻返回线程的快照。”

任何人都可以指出一些关于（或直接告诉我）将“0”参数传递给 join() 的文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:24:47.540

Diego Basch 测试代码后：

```
def f()
  y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
  puts "Waiting" until y.join(0)
end

def g()
  y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
  puts "Waiting" until y.join(0.0000000000001)
end

def h()
  y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
  puts "Waiting" until y.join(0.15)
end 
```

`f`并且`g`非常相似。这样做的原因是 f 只是极限 - 放入尽可能小的数字。他们的意思是一样的。几乎立即检查线程是否已完成。如果不是，则返回 nil。

因此在上面的代码中，直到在前两种情况下重复评估，但在第三种情况下只评估几次（特别是每 0.15 秒）。使用 0 作为参数的功能与所有其他数字完全一样——检查线程是否在接下来的 0 秒（现在）内完成，如果它没有返回 nil。

恐怕你的同事不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:39:27.327

你的同事是对的。试试这个代码，例如：

```
y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
puts "Waiting" until y.join(0) 
```

并与以下内容进行比较：

```
y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
puts "Waiting" until y.join(0.15) 
```

请参阅[加入文档](http://www.ruby-doc.org/core-1.9.3/Thread.html#method-i-join)

# regex - 正则表达式：替换分隔字符串中的确切单词

> ID：13823118
> 
> 赞同：0
> 
> 时间：2012-12-11T15:32:10.100
> 
> 标签：regex

我的字符串看起来像：`CR,CA,CD,CA_CR`或`CD,CR,CA_CR`

我只需要在字母上匹配正则表达式`CR`（以便替换它）。而不是在`CA_CR`。我在这里消隐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:50:38.187

使用[单词边界](http://www.regular-expressions.info/wordboundaries.html)：

```
/\bCR\b/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:47:06.367

如果你使用 ruby​​、perl 或任何其他支持零宽度否定后向断言的语言，试试这个：

```
s/(?<!CA_)CR/REPLACEMENT/g 
```

它匹配不跟随“CA_”的“CR”。

# javascript - JavaScript 是否支持类方法？

> ID：13823119
> 
> 赞同：0
> 
> 时间：2012-12-11T15:32:09.947
> 
> 标签：javascript

当我阅读 JavaScript The Definitive Guide，第 9.3 节时，我遇到了这个问题：

> **类方法**
> 这些是与类关联而不是与实例关联的方法。

如何在 JavaScript 中实现类方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:36:55.557

您可以创建一个函数作为另一个函数的属性：

```
function MyClass() {
}

MyClass.someFunction = function() { }; 
```

# android - 启动后台应用程序时如何向其发送数据？

> ID：13823120
> 
> 赞同：0
> 
> 时间：2012-12-11T15:32:09.733
> 
> 标签：android, android-intent, background

我的应用程序需要启动一个应用程序并将我的数据发送给它。我用它来启动应用程序（新的和后台的）：

```
Intent wakeIntent = new Intent(Intent.ACTION_MAIN);

wakeIntent.putExtra("type", type);

wakeIntent.putExtra("scheduleId", id);
wakeIntent.addCategory(Intent.CATEGORY_LAUNCHER);

//welcome is launcher of the target app                                                 

wakeIntent.setClass(getApplicationContext(), WelcomeActivity.class);
wakeIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(wakeIntent); 
```

当我启动应用程序作为新应用程序时，WelcomeActivity 可以接收意图中的数据“类型”，“id”，但是如果应用程序已经启动并切换了后台，则会发生唤醒的后台应用程序无法接收数据。如何

最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:05:03.033

您可以通过在从当前活动启动之前`Shared Preferences`存储 `"type","id"`在共享首选项中来执行此操作：`WelcomeActivity`

例如，我开始`WelcomeActivity`点击按钮`FirstActivity`：

```
public class FirstActivity extends Activity {
SharedPreferences myPrefs;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

       button.setOnClickListener(new OnClickListener() {
       void onClick() {
         //Create 

        myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putString("type", type);
        prefsEditor.putString("scheduleId", scheduleId);
        prefsEditor.commit();

       //start WelcomeActivity here
    Intent wakeIntent = new Intent(Intent.ACTION_MAIN);

    wakeIntent.addCategory(Intent.CATEGORY_LAUNCHER);

    //welcome is launcher of the target app                                                 

    wakeIntent.setClass(getApplicationContext(), WelcomeActivity.class);
    wakeIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(wakeIntent);

        }
    });
    }
} 
```

并在`WelcomeActivity`Activity`SharedPreferences`中将其 `onCreate`读`onResume`为：

```
public class FirstActivity extends Activity {
SharedPreferences myPrefs;

public static boolean status=false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // this will read when first time start
        myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        String strtype = myPrefs.getString("type", "nothing");
        String strscheduleId = myPrefs.getString("scheduleId", "0");
        status=true;

    }

    @Override
    protected void onResume() {
        super.onResume();
        // The activity has become visible (it is now "resumed").
       if(status!=true){
                 // this will read when first time start
        myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        String strtype = myPrefs.getString("type", "nothing");
        String strscheduleId = myPrefs.getString("scheduleId", "0");
       }
    }

    @Override
    protected void onPause() {
        super.onPause();
     // Another activity is taking focus (this activity is about to be "paused").

        // reset counter here
        status=false;
    }
} 
```

# postgis - 我可以检查多面体是否包含 PostGIS 中的点吗？

> ID：13823122
> 
> 赞同：16
> 
> 时间：2012-12-11T15:32:15.063
> 
> 标签：postgis

我有一个列 ( `latlon`)，它是`ST_MultiPolygon`.

另一个几何图形是一个点，我只想检查它是否在我的一个 MultiPolygons 内。

我试过了：

```
SELECT ST_CONTAINS(latlon, ST_GeometryFromText('POINT(48.208417 16.372472)')
FROM districts 
```

它总是返回 false；为什么我不能检查一个点是否在一个多多边形内`ST_Contains`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-11T16:33:05.000

它是这样工作的：

```
SELECT name, st_contains(latlon, ST_GeomFromText('POINT(16.391944 48.218056)', 4326))  FROM bezirks 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T18:15:10.087

st_contains 适用于多种几何形状。您必须确保该点位于多边形几何的同一坐标系上。

此外，您必须知道，如果该点落入多面体的边界，则不会被视为包含该点。在这种情况下，它将返回 false，因为多边形几何内部没有点。

# java - 直接从 URL 拆分信息

> ID：13823128
> 
> 赞同：0
> 
> 时间：2012-12-11T15:32:28.077
> 
> 标签：java, url, split

我想从这个[机场文件](http://openflights.svn.sourceforge.net/viewvc/openflights/openflights/data/airports.dat)的每一行中读取每个机场和相应的机场代码，然后用 [,] 分割该行，这样我就可以将所需的信息放入数据库中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:43:49.280

```
 LineNumberReader lnr = new LineNumberReader( new InputStreamReader(new URL( "http://..." ).openStream()) );
  String readLine = lnr.readLine();
  do {
     String[] split = readLine.split(",");
     for( String col : split )
     {
        // Write to DB
        System.out.println(col);
     }
     readLine = lnr.readLine();
  } while (readLine!=null) 
```

您可能想要使用 CSV 阅读库，例如[OpenCSV](http://opencsv.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:39:56.000

您可以使用[Apache Commons CSV](http://commons.apache.org/csv/)来读取文件。看看这篇文章[CSV parsing in Java - working example..？](https://stackoverflow.com/q/843997/221781).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:46:59.747

我在 ideone 中编写了一个小示例，向您展示如何从给定的流中逐行读取，然后用逗号分隔行：

这是代码：

```
import java.util.*;
import java.lang.*;

class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
        String temp;
        Scanner sc = new Scanner(System.in);

        while(sc.hasNextLine()) {
            temp = sc.nextLine();
            String[] strs = temp.split(",");
            for (int i = 0; i < strs.length; ++i) {
                System.out.println(strs[i]);
            }
            System.out.println("===========================================");
        }
    }
} 
```

我不是故意解决整个问题，所以也有一些想法留给你。此外，我有意使示例尽可能简单，以便更容易理解。

[您可以在 ideone 中看到](http://ideone.com/e1QVky)一个示例。

# c# - 在 SQL Server 中使用 sql_variant 而不是 varchar 有什么好处吗？

> ID：13823130
> 
> 赞同：15
> 
> 时间：2012-12-11T15:32:31.250
> 
> 标签：c#, performance, sql-server-2012, varchar, sql-variant

我目前有一个数据库表设置如下（EAV - 商业原因是有效的）：

*   Id - 整数 (PK)
*   键 - 唯一，varchar(15)
*   值 - varchar(1000)

这允许我将混合值作为键/值对添加到我的数据库中。例如：

```
1   | 'Some Text'      | 'Hello World'
2   | 'Some Number'    | '123456'
etc. 
```

在我的 C# 代码中，我使用 ADO.Net`reader.GetString(2);`将值作为字符串检索，然后让我的代码在其他地方根据需要对其进行转换，例如`Int32.ParseInt(myObj.Value);`...。我正在考虑通过可能将值列更改为`sql_variant`数据类型来增强我的表，但我不知道这样做有什么好处？基本上，让我的*价值*列是`sql_variant`vs有什么好处`varchar(1000)`吗？

* * *

更清楚地说，我在某处读到 sql_variant 以 nvarchar(4000) 的形式返回给进行调用的客户端（哎哟）！但是，我不能在返回之前将其转换为它的类型吗？显然，我的代码必须进行调整以将值存储为对象而不是字符串值。`sql_variant`我想，在我目前的情况下，使用与其他类型相比有哪些优点/缺点？哦，值得一提的是，我计划在 value 列中存储的只是日期时间、字符串和数值类型（int、decimal 等）；我不打算存储和 blob 或图像等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T16:25:59.463

sql 变体的好处是您可以在一列中存储多种类型并保留类型信息。

> 插入 MySettings 值（'Name'，'MyName'）；插入 MySettings 值（'ShouesNumber',45）；插入 MySettings 值（'MyDouble',31.32）；

如果要检索类型：

```
select SQL_VARIANT_PROPERTY ( value , 'BaseType' ) as DataType,* from mysettings 
```

你有：

```
Datatype Name          Value
-----------------------------
varchar  Name          MyName
int      ShoesNumber   45
numeric  MyDouble      31.32 
```

不幸的是，这有几个缺点：

1.  不是很快
2.  ORM 框架没有很好地支持

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-15T10:49:21.127

如果将类型更改为`sql_variant`，则必须使用[IDataRecord.GetValue](http://msdn.microsoft.com/en-us/library/system.data.idatarecord.getvalue.aspx)方法。它将一直保留类型。

因此，在 .NET 中，它将允许您拥有这种代码：

```
// read an object of SQL underlying data type 'int' stored in an sql_variant column
object o = myReader.GetValue(); // o.GetType() will be System.Int32

// read an object of SQL underlying data type '(n)varchar' or '(n)char' stored in an sql_variant column
object o = myReader.GetValue(); // o.GetType() will be System.String

// read an object of SQL underlying data type 'datetime' stored in an sql_variant column
object o = myReader.GetValue(); // o.GetType() will be System.DateTime

etc... 
```

当然，它假设您在保存时也这样做。只需将 SqlParameter.Value 设置为不透明值，不要使用 DbType。

`sql_variant`以各种（标准）类型为值的 EAV 是我个人认为有趣的一种情况。

当然，“专注于 SQLServer 的人”（阅读：DBA）根本不喜欢它 :-) 在 SQL Server 方面，`sql_variant`使用起来不是很实用（如评论中所述），但如果您将其保留为不透明的“东西”，不必在 SQL 过程代码中使用它，我认为没关系。因此，它在 .NET/OO 编程方面更具优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T19:18:40.490

我还没有看到它被提到过，所以我会提到一个相当常见的解决这个问题的方法是这样的表格：

*   Id - 整数 (PK)
*   键 - 唯一，varchar(15)
*   ValueType - 整数（0 - 字符串，1 - 整数，3 - 浮点数）（可选）
*   字符串值 - varchar(1000)
*   IntValue - 整数
*   FloatValue - 双倍

优点：

*   数据以适当的形式保存（将整数存储为字符串会浪费很多位）
*   你可以做一些花哨的查询，比如 WHERE left(key,5) = 'SHOES' 和 IntValue>5
*   ValueType 列仅在您在键上使用前缀/后缀（检索键集）时有用，并且该集可以是混合类型。即 WHERE left(key,4) = 'Size' 和 ValueType = 1

缺点：

*   在您使用此表的任何地方，您都必须确保您/获取/设置正确的值列
*   如果您决定需要/想要 ValueType 列，则必须确保正确获取/设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:58:56.377

sql_variant 类型有其局限性，正如 Zarathos 所描述的那样。

我感到困惑的是，您提到了 varchar(1000)，然后“哎哟”了返回转换后的 nvarchar(4000)。

我首先要说的是，整个世界终于停止使用本地和有限的字符集并决定全力以赴使用 Unicode 和 UTF-8，这是一件好事，所以你应该更喜欢 nvarchar 而不是 varchar 和 ntext 而不是文本。

并且返回是 nvarchar(4000) 而不是 nchar(4000)。不同之处在于任何 varchar 的大小都是可变的，而普通类型 char 的大小是固定的。返回 char(4000) 的元组会发送很多空的浪费，但是使用 varchar 这不是问题。

好的。但是什么是适合您的数据类型呢？我会推荐ntext。今天是 1000，明天可能是 10'000。如果您有“很多文本”没有编制索引，那么您的数据库可能不应该决定限制可能是多少。这只是文字。

ntext 也非常适合 .NET，因为它的字符串始终采用 Unicode。在 .NET 中从字符串到 int 的转换也比 sql server 更快。

希望这可以帮助

# c# - 缩短数据访问代码...这可行吗？

> ID：13823136
> 
> 赞同：0
> 
> 时间：2012-12-11T15:32:48.627
> 
> 标签：c#, asp.net, sqlcommand

我正在查询数据，如果数据不存在，我插入它。如果是这样，我会做其他事情：

```
SqlCommand checkHead = new SqlCommand("SELECT * FROM TABLE WHERE ORDER_NO = '" + orderNo + "';", connection);
SqlDataReader checkHeadReader = checkHead.ExecuteReader(CommandBehavior.SingleRow);

if (!checkHeadReader.HasRows)
{
    checkHeadReader.Close();
    addHead.ExecuteNonQuery();
} 
```

但我想知道是否有更短的编码方式？下面的代码会起作用吗？

```
SqlCommand checkHead = new SqlCommand("SELECT * FROM TABLE WHERE ORDER_NO = ' + orderNo + "';", connection);

if(checkHead.ExecuteReader(CommandBehavior.SingleRow).HasRows)
    addHead.ExecuteNonQuery();
else //this order already exists
    Server.Transfer(@"~/Views/Error.aspx"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:37:44.760

ExecuteScalar 非常适合这个，例如

```
using (SqlCommand cmdCheck = new SqlCommand("Select Count(*) From Table Where Order_No = '" + orderNo + "'", connection))
{
    int nExists = (int)cmdCheck.ExecuteScalar();
    if (nExists==0) addHead.ExecuteNonQuery();
} 
```

# jquery - jQuery click 函数什么时候需要一个“事件”？

> ID：13823142
> 
> 赞同：1
> 
> 时间：2012-12-11T15:33:00.657
> 
> 标签：jquery

我有一个带有 jquery 的点击功能，直到我添加了“事件”（见下文）。

什么时候需要活动？本文档不使用它：[http ://api.jquery.com/click/](http://api.jquery.com/click/)

没有工作：

```
$(document).ready(function () {
        $('#div a').click(function () {
            event.preventDefault();
            $('#menu,#wrapper').toggleClass('open');
        });
    }) 
```

作品：

```
$(document).ready(function () {
        $('#div a').click(function (event) {
            event.preventDefault();
            $('#menu,#wrapper').toggleClass('open');
        });
    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:33:53.480

您链接到的文档指出该`click`函数是与 eventType[绑定](http://api.jquery.com/bind/)`"click"`的快捷方式。这是该文档的摘录：

> .bind（事件类型 [，事件数据]，处理程序（事件对象））

绑定函数的原型显示，`handler`您提供的回调接收一个`eventObject`，这是您在代码中拥有的事件。

此事件是一个 jQuery 包装事件，具有您调用的函数，`preventDefault`.

所以这条线

```
event.preventDefault(); 
```

需要定义事件。写`function(event)`在你的函数声明中声明了局部变量 event ，其值将是`eventObject`jQuery 给定的值之一。

或者，如果你不喜欢定义变量，你可以这样做：

```
$(document).ready(function () {
    $('#div a').click(function () {
        $('#menu,#wrapper').toggleClass('open');
        return false; // this prevents default handling and also stops propagation
    });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:46:23.097

正如您所指出的，jquery 文档解释了该方法及其签名，但没有给出使用 eventObject 的示例。

```
.click( handler(eventObject) )

handler(eventObject) A function to execute each time the event is triggered. 
```

您正在提供一个匿名函数来代替处理程序（eventObject）：

```
function() {
// do something
} 
```

但函数签名包括您可以使用的 eventObject

```
function(event) {
// do something with event, such as event.preventDefault();
} 
```

请注意，如果这有助于您的理解，您也可以调用命名函数：

```
$(document).ready(function () {
        $('#div a').click(handleSomeClick);
    })

function handleSomeClick(event) {
    event.preventDefault();
    $('#menu,#wrapper').toggleClass('open');
} 
```

console.log(event) 可能对您有用，以查看您可以使用此对象做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T15:48:26.423

当事件触发时，您的侦听器函数正在传递一个*事件对象。*`click`在您的第一个示例中，您的函数不接受任何参数并且不以其他方式定义`event`，因此`event`in`event.preventDefault`未定义。

但是让我们备份一下：

在 JavaScript 中，当事件侦听器函数被触发时，它们被传递一个[*事件对象*](https://developer.mozilla.org/en-US/docs/DOM/event#DOM_Event_interface)作为它们的第一个参数。该事件对象包含有关刚刚发生的事件的详细细节，例如，为事件按下了哪个键`keydown`或为某个事件使用了哪个鼠标按钮（左、右、中）`click`。

事件对象还具有一些用于控制事件的特殊功能，包括`event.preventDefault`停止默认浏览器行为的 。例如，当您将`click`侦听器绑定到链接`<a>`元素时（如您在此处所做的那样），您可能希望阻止浏览器实际跟踪链接，这是浏览器对单击链接的默认反应。

具体就 jQuery 而言，事件对象是为跨浏览器使用而标准化的，但除此之外，我上面所说的关于纯 JS 的所有内容也适用。您可以在 jQuery 文档中查看[jQuery 事件对象的规范。](http://api.jquery.com/category/events/event-object/)

**tl;dr：**您希望您的函数能够使用`event.preventDefault`. 为此，您必须让事件侦听器函数接受来自事件的*事件对象*，然后调用其`.preventDefault`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T15:53:26.537

在您的代码片段中不起作用，`event`是未定义的，因为您没有声明它或接受它作为函数的参数。

```
$(element).click(function(event){ // "event" is optional, but required if you intend to use it
    event.preventDefault();
}); 
```

如果您打算使用事件对象，则仅*“需要”*传递事件对象参数，例如使用它来防止代码中的默认操作或从中获取信息，例如事件源自哪个元素。

另请注意，您可以使用任何您想要的名称来代替 event，它仍然可以工作。

```
$(element).click(function(foobar){
    foobar.preventDefault();
    alert("The id of the clicked element is: " + foobar.target.id);
}); 
```

如果您不确定，无论如何都将其包含在内，它不会伤害任何东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:07:43.813

因为你使用 `event` `event.preventDefault();`你必须将它作为参数传递，但在正常情况下它是可选的

# c# - 如何在运行时转换对象，同时在运行时获取类型信息

> ID：13823148
> 
> 赞同：0
> 
> 时间：2012-12-11T15:33:30.867
> 
> 标签：c#

请看下面的代码。问题在以下位置。MyClassExample obj2 = lstObjectCollection[0] 作为类型；

我想将列表对象类型转换为它的类型。但是类型将在运行时给出。

我们如何转换一个对象，在运行时知道它的类型？

```
class RTTIClass
{
    public void creatClass()
    {
        // Orignal object
        MyClassExample obj1 = new MyClassExample {NUMBER1 =5 };

        // Saving type of original object.
        Type type = typeof(MyClassExample);

        // Creating a list.
        List<object> lstObjectCollection = new List<object>();

        // Saving new object to list.
        lstObjectCollection.Add(CreateDuplicateObject(obj1));

        // Trying to cast saved object to its type.. But i want to check its RTTI with type and not by tightly coupled classname.
        // How can we achive this.
        MyClassExample obj2 = lstObjectCollection[0] as type;           
    }

    public object CreateDuplicateObject(object originalObject)
    {
        //create new instance of the object
        object newObject = Activator.CreateInstance(originalObject.GetType());

        //get list of all properties
        var properties = originalObject.GetType().GetProperties();

        //loop through each property
        foreach (var property in properties)
        {
            //set the value for property
            property.SetValue(newObject, property.GetValue(originalObject, null), null);
        }

        //get list of all fields
        var fields = originalObject.GetType().GetFields();

        //loop through each field
        foreach (var field in fields)
        {
            //set the value for field
            field.SetValue(newObject, field.GetValue(originalObject));
        }

        // return the newly created object with all the properties and fields values copied from original object
        return newObject;
    } 

}

class MyClassExample
{

    public int NUMBER1 {get; set;}
    public int NUMBER2{get; set;}
    public int number3;
    public int number4;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:38:41.477

我通常使用的模式是`is`运算符，它将判断您的对象是否是特定类型。如果您已经有点知道您将使用哪些对象，这将起作用

```
Object myObject

if(myObject is Obj1)
    // do obj1 stuff
else if(myObject is Obj2)
    // do stuff with obj2 
```

我从来没有遇到过这样的情况，我必须对多种不同的类型进行操作并特别对待它们，所以这就是我通常做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:38:53.407

`OfType<T>`您可以使用扩展方法轻松获取列表中某种类型的所有对象：

```
lstObjectCollection.OfType<MyClassExample>() 
```

如果类型仅在运行时已知，您可以这样做：

```
lstObjectCollection.Where(o => o.GetType() == type) 
```

# android - 添加 tapjoy 横幅广告- android

> ID：13823155
> 
> 赞同：2
> 
> 时间：2012-12-11T15:33:53.710
> 
> 标签：android, android-layout, tapjoy

我有活动（第二个活动），我想在底部放置横幅广告（350x50）。我的视图底部有一个线性布局（adLinear），我希望广告出现在这里。可惜在tapjoys知识中心，关于通过xml添加广告的信息为0..

所以，我读了几遍 TapJoy 的知识中心，我得到和做的一切都如下：

```
//imported classes
import com.tapjoy.TapjoyConnect;
import com.tapjoy.TapjoyDisplayAdNotifier; 
```

在 onCreate 添加

```
TapjoyConnect.requestTapjoyConnect(context, "myID", "mySecret"); 
```

在这里我卡住了。根据KC，我必须实施

```
getDisplayAdResponse(View view); 
```

看了知识中心，看了demo代码，没看懂，怎么才能在我想要的地方准确的展示banner广告呢？我需要更新 linearLayout 还是动态添加它？来自做过这件事的人的任何帮助，将不胜感激。

# jquery - 使用布尔值运行 fancybox 后，函数不会解除绑定

> ID：13823156
> 
> 赞同：0
> 
> 时间：2012-12-11T15:33:53.907
> 
> 标签：jquery, fancybox, unbind

我试图让一个按钮在fancybox关闭后停止闪烁。我已经尝试了所有我知道的方法，但我不确定为什么它没有解除约束。这是代码：

```
 var clicked = true;
    var playbtn = $('.playbtn');

    function unpulse(){
       clicked = false;
       playbtn.unbind(pulse);
    }

    function pulse(){
       playbtn.delay(200).fadeOut('slow').delay(50).fadeIn('slow', pulse);
    }

    if (clicked) {
       pulse();
    }else if (!clicked) {
       alert('finally');
     };

     $('.playbtn a').fancybox({
        'type' : 'iframe',
        'transitionIn':'elastic',
        'transitionOut' :'elastic',
         'speedIn':600, 
         'speedOut':200, 
        'overlayShow':  false,
         'onClosed':unpulse
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:37:03.427

您正在尝试删除一个事件，因为它就是这样`.unbind`做的。（此外，不支持您的 for 语法`.unbind`，但无论如何这不是您所追求的。）相反，只需检查内部`pulse`是否继续淡入淡出。这是有效的，因为`pulse`它被递归调用，所以每次淡入淡出迭代停止时都会进行检查：

```
function pulse(){
  if(clicked) {
    playbtn.delay(200).fadeOut('slow').delay(50).fadeIn('slow', pulse);
  }
} 
```

# asp.net-web-api - Web Api：在服务器运行时禁用跟踪

> ID：13823161
> 
> 赞同：0
> 
> 时间：2012-12-11T15:34:09.957
> 
> 标签：asp.net-web-api, trace

我可以通过替换默认的 No Op 跟踪编写器来启用跟踪。

```
GlobalConfiguration.Configuration.Services.Replace(typeof(ITraceWriter), new SimpleTracer()); 
```

但是如何在服务器运行时禁用（并再次启用）？

枚举“TraceLevel”具有选项 TraceLevel.Off。有没有办法将跟踪框架表单 web api 设置为 TraceLevel.Off？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:59:23.180

看看这篇文章[在这里](http://blogs.msdn.com/b/roncain/archive/2012/04/12/tracing-in-asp-net-web-api.aspx)。

> WebApi 不提供任何方式来配置有关其当前类别或级别的跟踪编写器。

和

> 确定当前启用哪些类别和级别是 ITraceWriter 实现的责任。Web API 框架没有跟踪配置或确定启用哪些类别和级别的概念。
> 
> 这种方法的目的是依靠 ITraceWriter 实现自己的机制来配置跟踪的内容和位置。
> 
> 例如，如果您使用特定于 NLog 的 ITraceWriter，则应通过 NLog 配置机制配置跟踪。

简而言之，如果您想启用和禁用跟踪或选择不记录特定级别的跟踪，则由您在`SimpleTracer`.

您可以创建自己的线程安全单例 TraceConfiguration（类似于 GlobalConfiguration）实现来控制跟踪配置以允许在代码中打开或关闭。

```
public void Trace(HttpRequestMessage request, string category, TraceLevel level, Action<TraceRecord> traceAction)
{
     if(TraceConfiguration.Configuration.IsEnabled)
     {
        //trace
     }
} 
```

或者您可以设置和访问请求对象的属性以确定是否启用跟踪。这可以由 ActionFilters 在动作和控制器上设置，甚至可以在控制器内设置。

```
public void Trace(HttpRequestMessage request, string category, TraceLevel level, Action<TraceRecord> traceAction)
{
     if(request.Properties["SupressTracing"] as string != "true")
     {
        //trace
     }
} 
```

或者正如文章建议的那样，如果您使用的是 NLog 或 Log4Net 等，则取决于您通过配置等设置启用的级别。

# mysql - 带有事务插入或更新的 MySQL 触发器

> ID：13823165
> 
> 赞同：3
> 
> 时间：2012-12-11T15:34:19.847
> 
> 标签：mysql, percona

我正在使用 mysql db & java，所以在我的应用程序中我需要使用触发器，但我需要在插入或更新时保存它。当在表 A 中插入新记录时，触发器将在另一个表 B 中插入一些信息。同样，在对表 A 中的记录进行更新时，触发器将更新表 B 的记录。

如果在更新或 insrt 回滚期间进行事务，这是否会回滚触发器所做的任何更改。??!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:44:50.660

是的，如果事务被回滚，触发器所做的工作也将被回滚（除非您在触发器内部对事务范围进行一些猴子以专门防止这种情况）

# c# - 如何知道一个类的属性类型是否为自定义

> ID：13823166
> 
> 赞同：2
> 
> 时间：2012-12-11T15:34:20.190
> 
> 标签：c#, reflection

我有一个这样定义的类：

```
public class Company
{
  public Int32 OrganisationID {get;set;}
  public CompanyStatus OrganisationStatus {get;set;} 
  // note that CompanyStatus is my custom type
} 
```

然后我将代码编译成`Entity.dll`. 当我使用下面的代码时，我 `((System.Reflection.MemberInfo)(properties[1])).Name`得到`CompanyStatus`. 当我动态读取所有属性时，如何判断它是否是自定义类型？

```
Assembly objAssembly = Assembly.LoadFrom(@"Entities.dll");

var types1 = objAssembly.GetTypes();

foreach (Type type in types1)
{
    string name = type.Name;
    var properties = type.GetProperties(); // public properties
    foreach (PropertyInfo objprop in properties)
    {
        // Code here
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:37:18.953

使用[IsPrimitive](http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx)属性来判断属性的类型是不是原始类型还是字符串

```
if(objprop.PropertyType.IsPrimitive || objprop.PropertyType == typreof(string)) 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx)：

> 基本类型是 Boolean、Byte、SByte、Int16、UInt16、Int32、UInt32、Int64、UInt64、IntPtr、UIntPtr、Char、Double 和 Single。

您可能还需要检查原始类型的*数组*等。要查看该类型是否包含另一种类型，请使用：

```
if(objprop.PropertyType.HasElementType)
    var t2 = objprop.PropertyType.GetElementType(); 
```

# c# - 以当前状态显示表单而不是 new form()

> ID：13823168
> 
> 赞同：0
> 
> 时间：2012-12-11T15:34:23.227
> 
> 标签：c#, winforms

我创建了一个 C# 应用程序。

这里我有两种形式，*form1*和*form2*。

**从form1*调用*form2*。*

 *后来*form2*被隐藏了。

现在我想从*form1显示**form2*。

 *请给我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:36:19.380

您需要保持对`Form2`对象的引用，并且当您希望它可见时，只需调用`frm2.Show()`- 不要使用现有对象构造新`Form2`对象。`new Form2()`

```
// You need to contruct Form2 before calling Show().
Form2 frm2 = new Form2();

// Some handler somewhere
void btnShowForm2_Click(..., ...)
{
    frm2.Show();
} 
```

编辑：正如 Micah 指出的那样，您需要隐藏 Form2 而不是关闭它：

```
private void Form2_FormClosing(object sender, FormClosingEventArgs e)
{
  this.Hide();
  e.Cancel = true; // this cancels the close event.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:36:29.760

在隐藏 form2 而不是 form.close 时，您将需要使用 form.hide()

保留对 form2 的引用，并在要再次显示时调用 form.show

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:42:31.080

在类级别采用 form2 实例变量

例子

```
Public Class Form1
{
Form frm2;

//Show form here
protected void Button1_Clik
{
frm2=new Form2();
frm2.Show();
}

//Even the form is hidden, you may show the same instance /same state of form again 
protected void Button2_Click()
{
frm2.Show();
}

} 
```**

# android - 使用 mediaRecorder 录制时出现空异常

> ID：13823169
> 
> 赞同：0
> 
> 时间：2012-12-11T15:34:25.960
> 
> 标签：android, broadcastreceiver, mediarecorder

我正在做一个通话录音应用程序。我的问题是接到电话时录音工作正常，但不会停止录音。我的代码和 logcat 在下面。非常感谢任何形式的帮助。

我的代码：

```
 public class IncomingCallReceiver extends BroadcastReceiver {
    private MediaRecorder mRecorder;
    @Override
    public void onReceive(Context context, Intent intent) {
            Bundle bundle = intent.getExtras();
            if(null == bundle)
                    return;
            String state = bundle.getString(TelephonyManager.EXTRA_STATE);
            if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
            {
            }
            else if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_OFFHOOK)){
                Log.i("TelephonyManager", "Call picked up");
                mRecorder = new MediaRecorder();
                mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
                mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                mRecorder.setAudioEncodingBitRate(16);
                mRecorder.setAudioSamplingRate(44100);
                mRecorder.setOutputFile("/sdcard/Recording/callrecord.mp4");
                try{
                    mRecorder.prepare();
                }
                catch(IOException e){
                }
                mRecorder.start();
                Log.i("StartRecordingCall", "Recording Call end");
            }
            else if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_IDLE)){
                Log.i("TelephonyManager", "Call hunged up");
                mRecorder.stop();
                mRecorder.release();
                mRecorder=null;
            }
    } 
```

} 日志猫

```
12-11 22:53:51.502: E/MediaRecorder(2831): stop called in an invalid state: 1
12-11 22:53:51.502: D/AndroidRuntime(2831): Shutting down VM
12-11 22:53:51.502: W/dalvikvm(2831): threadid=1: thread exiting with uncaught exception (group=0x2b544300)
12-11 22:53:51.502: E/AndroidRuntime(2831): FATAL EXCEPTION: main
12-11 22:53:51.502: E/AndroidRuntime(2831): java.lang.RuntimeException: Unable to start receiver com.example.callrecorder.IncomingCallReceiver: java.lang.IllegalStateException
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.app.ActivityThread.handleReceiver(ActivityThread.java:2362)
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.app.ActivityThread.access$1500(ActivityThread.java:142)
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1284)
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.os.Looper.loop(Looper.java:137)
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.app.ActivityThread.main(ActivityThread.java:4931)
12-11 22:53:51.502: E/AndroidRuntime(2831): at java.lang.reflect.Method.invokeNative(Native Method)
12-11 22:53:51.502: E/AndroidRuntime(2831): at java.lang.reflect.Method.invoke(Method.java:511)
12-11 22:53:51.502: E/AndroidRuntime(2831): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-11 22:53:51.502: E/AndroidRuntime(2831): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-11 22:53:51.502: E/AndroidRuntime(2831): at dalvik.system.NativeStart.main(Native Method)
12-11 22:53:51.502: E/AndroidRuntime(2831): Caused by: java.lang.IllegalStateException
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.media.MediaRecorder.stop(Native Method)
12-11 22:53:51.502: E/AndroidRuntime(2831): at com.example.callrecorder.IncomingCallReceiver.onReceive(IncomingCallReceiver.java:63)
12-11 22:53:51.502: E/AndroidRuntime(2831): at android.app.ActivityThread.handleReceiver(ActivityThread.java:2355)
12-11 22:53:51.502: E/AndroidRuntime(2831): ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:47:44.523

`TelephonyManager.EXTRA_STATE_OFFHOOK`当我们切断或结束通话并且你开始录音时，你做错了。

并且`TelephonyManager.EXTRA_STATE_IDLE`会在您接听电话时触发，这将在您访问 mRecorder.stop()之前`TelephonyManager.EXTRA_STATE_OFFHOOK`和状态下触发；`TelephonyManager.EXTRA_STATE_IDLE`这是空的......并且没有初始化。

而且您的 mRecorder 也应该是静态的，因为 BroadcastReceiver 为不同的事件调用多个。

# spring - 尝试登录时获取“org.jasypt.exceptions.EncryptionOperationNotPossibleException”

> ID：13823172
> 
> 赞同：0
> 
> 时间：2012-12-11T15:34:32.110
> 
> 标签：spring, security, password-encryption, jasypt

我正在使用 Jasypt 1.9.0、Spring 3.1.1.RELEASE 和 Maven 3.0.3。当我在登录页面输入用户名和密码并提交时，我收到以下错误...</p>

```
org.jasypt.exceptions.EncryptionOperationNotPossibleException
    org.jasypt.digest.StandardByteDigester.matches(StandardByteDigester.java:1107)
    org.jasypt.digest.StandardStringDigester.matches(StandardStringDigester.java:1052)
    org.jasypt.util.password.ConfigurablePasswordEncryptor.checkPassword(ConfigurablePasswordEncryptor.java:252)
    org.jasypt.spring.security3.PasswordEncoder.isPasswordValid(PasswordEncoder.java:207)
    org.springframework.security.authentication.dao.DaoAuthenticationProvider.additionalAuthenticationChecks(DaoAuthenticationProvider.java:64)
    org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:149)
    org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
    org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:94)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:194)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

这是我设置的 Spring 安全性

```
<beans:bean id="bcProvider" class="org.bouncycastle.jce.provider.BouncyCastleProvider" />

<beans:bean id="jasyptPasswordEncryptor" class="org.jasypt.util.password.ConfigurablePasswordEncryptor">
    <beans:property name="algorithm">
        <beans:value>SHA-256</beans:value>
    </beans:property>
    <beans:property name="provider">
        <beans:ref bean="bcProvider" />
    </beans:property>
</beans:bean>

<!-- This Spring Security-friendly PasswordEncoder implementation will -->
<!-- wrap the PasswordEncryptor instance so that it can be used from -->
<!-- the security framework. -->
<beans:bean id="passwordEncoder" class="org.jasypt.spring.security3.PasswordEncoder">
    <beans:property name="passwordEncryptor">
        <beans:ref bean="jasyptPasswordEncryptor" />
    </beans:property>
</beans:bean>

<authentication-manager alias="authenticationManager"
    id="authenticationManager">
    <authentication-provider user-service-ref="sbdUserDetailsService">
        <password-encoder ref="passwordEncoder" />
    </authentication-provider>
</authentication-manager> 
```

Jasypt 文档不是很有帮助，我不知道还要检查什么。感谢这里的任何帮助。-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:49:30.020

如果不对 Jasypt 库进行调试并找到潜在的异常，就可能故意无法从 Jasypt 库中找出错误的原因。我的猜测是您在后端存储中有一个未消化的密码（比较消化密码失败的最可能原因）。

# jquery - jQuery Append 不会影响页面内容

> ID：13823179
> 
> 赞同：0
> 
> 时间：2012-12-11T15:34:50.303
> 
> 标签：jquery, api, twitter, append, tumblr

这是一个 JSFiddle 方便：http: [//jsfiddle.net/u5XmR/](http://jsfiddle.net/u5XmR/)

我有很多事情要做，但我主要关心的是为什么 $("#content").append(); 没有改变我页面上的任何内容。

具体来说，此功能应动态调整和更改内容：

```
function findpost(timestamp, blog){
    //console.log(blog);
    var length = blog.length;
    for(var e=0; e<length; e++){
        var type = blog[e+1];
        if(timestamp === blog[e]){
            if(type === 0){
                $("#content").append("\
                    <div id='post' class='photo'>\
                    <img src='"+blog[e+2]+"' width='400px'/>\
                    </div>\
                ");
                console.log("Photo");
            } else if(type === 1){
                console.log("Video");
            } else if(type === 2){
                $("#content").append("\
                    <div id='post' class='link' />\
                    "+blog[e+2]+" "+blog[e+3]+"\
                    </div>\
                ");
                console.log("Link!");
            } else if(type === 3){
                console.log("Text!");
            } else if(type === 4){
                console.log("Tweet!");
            } else {
                console.warn("ERROR!");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:46:09.957

您正在清除`$('#content')`for 循环中的每次

看看这个更新的小提琴

[http://jsfiddle.net/u5XmR/6/](http://jsfiddle.net/u5XmR/6/)

在里面`.done()`

这是你需要改变的：

```
$("#content").empty();

for(var e=0;e<length;e++){
    $("#content").append( e +"<br>");

    ... 
```

# jquery - 如何从 jqGrid 中不可编辑的单元格中获取数据？

> ID：13823180
> 
> 赞同：0
> 
> 时间：2012-12-11T15:34:51.530
> 
> 标签：jquery, jqgrid

我正在使用 jqGrid，当我进行内联编辑时，我需要从一个不可编辑的单元格中发布一个值。

我尝试使用：

```
 editData: {
   proiect: jQuery("#Id").getCell(jQuery("#Id").getGridParam('selrow'), 'ColName') 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:37:46.687

我不确定我的理解是否正确。无论如何`editData`是可以在**表单编辑**的情况下使用的属性（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)）。如果您需要向服务器`extraparam`或`serializeRowData`. 确切的实现取决于您使用内联编辑的方式。例如，如果您`editRow`直接在内部调用`onSelectRow`then 您可以执行以下操作

```
onSelectRow: function (id) {
    var $this = $(this),
        cellValue = $this.jqGrid("getCell", id, 'ColName');

    if (id && id!==lastSel){ 
        $this.jqGrid("restoreRow", lastSel); 
        lastSel = id; 
    }

    $this.jqGrid("editRow", id, {
        keys: true,
        extraparam: {
            proiect: cellValue
        }
    });
} 
```

# cqrs - EventStore：学习如何使用

> ID：13823181
> 
> 赞同：3
> 
> 时间：2012-12-11T15:35:00.080
> 
> 标签：cqrs, event-sourcing, neventstore

我正在尝试学习 EventStore，我喜欢这个概念，但是当我尝试在实践中应用时，我陷入了同一点。让我们看看代码：

```
foreach (var k in stream.CommittedEvents)
{ 
   //handling events
} 
```

关于这个的两个问题：

*   当一个应用程序在一些维护后启动时，我们如何以一种安全的方式为开始读取的事件添加书签？有模式可以使用吗？

*   一旦事件全部消耗完，循环就结束了……消息到达运行时间呢？我希望呼叫阻塞，直到一些新消息到达（当然需要在线程中处理）或有类似 BeginRead EndRead 的东西。

我是否必须绑定 ESB 来处理运行时事件，或者 EventSore 是否提供了一些工具来执行此操作？

**我试着用一个例子更好地解释** 假设聚合是一个金融投资组合，并且应用程序是一个向交易者显示该投资组合的应用程序。假设交易者连接到网络应用程序并查看他自己的投资组合。当前状态将是整个历史记录，因此我必须阅读大量记录才能重现该状态。我想这可以通过所谓的快照来完成，但谁负责创建它？什么时候应该选择创建聚合？怎么能猜出聚合的快照存在？对于运行时部分：用户一看到重建的投资组合状态，实时部分就开始运行。用户可以下订单，并且可以通过在市场上成功执行该订单来创建新头寸。基础设施如何更新投资组合？我会期待，但也许我完全错了，拥有*相同的事件流*是该新事件**new long position**的来源，否则我有两条路径处理同一聚合的状态。我想知道这是否是该策略应该如何运作的，即使我觉得拥有两个国家代理有点棘手，这可能会重叠。只是为了澄清我如何担心重叠：

*   我知道事件必须是幂等的，所以我知道无论如何它一定不是问题，
*   但是让我们考虑以下几点：

在流式传输事件以更新投资组合的状态**之前**，我订阅了事件总线。公共汽车上出现了一些“未平仓事件”：我必须处理它们，但由于尚未实现，投资组合可能未处于处理它的正确状态。即使我能够处理此类事件，我也会在阅读流时再次找到它们。

更阴险：我打开流并读取所有事件并创建一个状态。然后我订阅总线：总线上的一些消息发生在 steram 读取结束和订阅开始之间的中间：这些事件丢失并且聚合未处于正确状态。

请大家耐心等待，我的英语很差而且争论很棘手，希望我设法分享我的疑问:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T00:58:34.023

> 当前状态将是整个历史记录，因此我必须阅读大量记录才能重现该状态。我想这可以通过所谓的快照来完成，但谁负责创建它？

在 CQRS 和事件溯源中，查询由聚合发出的事件生成的[投影提供服务。](http://cqrsguide.com/doc:projection)您不使用从事件存储重构的聚合实例来显示信息。

术语快照专门指事件存储的优化，它允许在不重播所有事件的情况下重建聚合。

投影本质上是事件处理程序，它维护聚合的非规范化视图。从聚合发出的事件被发布，可能是带外的，并且投影订阅并处理这些事件。例如，如果存在显示摘要信息的需求，则投影可以组合多个聚合。对于交易应用程序，每个视图通常包含来自各种聚合的数据。投影是以消费者驱动的方式设计的——应用程序需求决定了所需的底层数据的不同视图。

使用这种类型的工作流程，您必须在整个应用程序中实现最终的一致性。例如，如果最终用户正在查看他们的投资组合并开始新交易，则 UI 必须订阅更新以以异步方式反映更新的预测。

在[此处](http://abdullin.com/cqrs)查看 CQRS 和事件溯源的概述。

# c# - 延迟加载 Telerik 窗口内容

> ID：13823182
> 
> 赞同：0
> 
> 时间：2012-12-11T15:35:01.407
> 
> 标签：c#, asp.net-mvc-3, telerik, telerik-mvc

我正在使用 ASP.NET MVC 3 并使用 Telerik。我有一个空的 Telerik 窗口。我的目标是仅在用户单击按钮时向服务器询问内容，但是我不知道如何做到这一点。我想要做到这一点，我需要存储对相关 Telerik 窗口的引用。但是我该怎么做呢？请帮忙。这是我已经走了多远：

```
@{
   Html.Telerik().Window()
   .Name("ImportDialog")
   .ClientEvents(events => events.OnOpen("DialogOpen"))
   .Visible(false)
   .Title("Import users")
   .Draggable(false)
   .Resizable(resizing => resizing.Enabled(false))
   .Modal(true)
   .Width(400)
   .Height(400)
   .Render();
} 
```

我确实想在 DialogOpen 函数中做点什么，或者用服务器端函数替换该客户端函数....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:59:48.733

您应该使用 Telerik Window 的客户端 API，更具体地说是[ajaxRequest](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-window-client-api-and-events.html#ajaxRequest)方法。

因此，例如，当单击按钮时，您应该获取客户端对象并调用 ajaxRequest 方法，这将使 Window 从该 MVC 操作方法中检索其内容。例如

```
function DialogOpen(){
    var myWin= $('#ImportDialog').data('tWindow');
    myWin.ajaxRequest("Controller/Action", { name: "John",location:"Boston"});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:38:54.303

我找到了一种答案，但是我不确定它是否是最好的。

在 javascript 函数 DialogOpen 中，我向 url（在 MVC 中也称为 Controller 的 Action）发送了一个 ajax 请求，我将结果放在对话框窗口的内容中，如下所示：

```
function DialogOpen () 
{
 $.ajax({
    type: "POST",
    url: "Controller/Action",
    data: "name=John&location=Boston",
    success: function (htmlContent) 
    {
        $('#ImportDialogContent').html(htmlContent);
    },
    error: function () 
    {
        $('#ImportDialogContent').html("<p>Could not import user data at this time</p>");
    }
 });
} 
```

PS：我给 Telerik Window(ImportDialogContent) 的内容区域提供了一个 ID！

# opencl - ATI/AMD OpenCL 的局部变量对齐

> ID：13823185
> 
> 赞同：2
> 
> 时间：2012-12-11T15:35:20.717
> 
> 标签：opencl, gpu, memory-alignment, ati, amd-processor

我一直遇到结构错位的问题。以下是涉及的结构：

```
struct Ray
{
    float4 origin;
    float4 dir;
    float len;
    float dummy [3];
};

struct RayStack
{
    struct Ray r [STACK_DEPTH];
    int depth [STACK_DEPTH];
    float refr [STACK_DEPTH];
    int top;
    float dummy [3];
}; 
```

顺便说一句，STACK_DEPTH 是 4 的倍数。我一直小心确保所有结构的大小都是 16 的倍数，并且其中的 float4 位于对齐的边界上。

问题是当我将它用作局部变量时，结构 RayStack 未对齐：

```
struct RayStack stack;
printf("stack: %p\n", &stack); 
```

堆栈地址最终以 8 结尾，而不是 0，因为我想要一个 16 字节对齐的结构。这会导致 ATI 卡崩溃（尽管 Intel 和 nVidia 并没有为此烦恼）。我尝试将 __attribute__((aligned(16))) 放置在结构中（之前和之后）以及局部变量定义中，但这并没有改变任何东西。实际上，添加 printf 语句可以解决问题，尽管我不知道如何解决。

是否可以确保局部变量堆栈在 16 字节边界上对齐并停止 ATI 卡上的崩溃。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:33:37.053

您知道结构中的**数组**必须与 16 字节边界对齐吗？
“虚拟”数组有什么用？填充？如果是这样，请不要使用数组进行填充。
根据我对 Nvidia、ATI 和 Intel 的经验，以下是最安全的方法：

```
struct Ray
{
    float4 origin;
    float4 dir;
    float len;
    float padding1;
    float padding2;
    float padding3;
};

struct RayStack
{
    struct Ray r[STACK_DEPTH];
    int depth[STACK_DEPTH];
    float refr[STACK_DEPTH];
    int top;
    float padding1;
    float padding2;
    float padding3;
}; 
```

# android - Android 4.1 变化-transition 和 webkittransition defiend，如何正确确定transition 结束事件的名称？

> ID：13823188
> 
> 赞同：4
> 
> 时间：2012-12-11T15:35:31.150
> 
> 标签：android, css-transitions

我注意到随着从 android 4.0 到 4.1 的更新，股票浏览器和 webView 中的 css 转换前缀发生了变化

基本上，“transition”和“webkitTrantion”都是防御性的。

Modernizr.prefixed("transition") 在 android 4.0 上返回 webkitTrantion Modernizr.prefixed("transition") 在 android 4.1 上返回 trantion

但是，对于过渡结束事件名称，“transitionend”事件未定义/不起作用。您仍然需要使用 webkit 特定的“webkitTransitionEnd”事件名称

问题：我找不到有关此更改的任何文档，因此不确定如何进行...有人可以对此有所了解吗？任何建议或文档链接将不胜感激！

重现：

```
function whichTransitionEvent(){
    var t;
    var el = document.createElement('fakeelement');
    var transitions = {
        'OTransition':'oTransitionEnd',
        'MSTransition':'msTransitionEnd',
        'MozTransition':'transitionend',
        'WebkitTransition':'webkitTransitionEnd',
        'transition':'transitionEnd'
    }

    for(t in transitions){
        if( el.style[t] !== undefined ){
            alert (transitions[t]);
        }
    }
} 
```

上面的代码将导致在 android 4.0 上仅显示一个弹出窗口，而从 4.1 开始，android 4.1 将出现 2 个弹出窗口，“transition”和“webkitTransition”均有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-16T11:40:23.360

我有一个类似的问题，桌面上的 Chrome 和三星设备上的 Android 会报告另一个事件名称，而不是他们实际使用的名称。我能想到的唯一方法就是触发一个事件，设置几个不同的事件侦听器，然后查看哪个事件被触发了。下面的代码（来自[这个 gist](https://gist.github.com/fatso83/5714040)）本质上就是这样做的，并将 Modernizr.transitionEnd 设置为那个事件名。

```
var $M = window.Modernizr
var _ = window._ // underscore.js

// Defines prefixed versions of the
// transitionEnd event handler
transitionFinishedEvents = {
  'WebkitTransition' : 'webkitTransitionEnd',
  'MozTransition'    : 'transitionend',
  'OTransition'      : 'oTransitionEnd',
  'msTransition'     : 'msTransitionEnd',
  'transition'       : 'transitionEnd'
};

// Feature detect actual transitionEnd keyword by triggering an event
window.setTimeout(function () {
  var div = document.createElement('div');
  div.id = "my-transition-test";
  div.style.position = 'absolute';
  div.style.zIndex = -10;
  div.style.bottom = '-1000px';
  div.style.height = '100px';
  div.style.width = '100px';
  div.style.background = 'yellow';
  div.style.display = 'hidden';
  window.document.body.appendChild(div);

  $('#my-transition-test').one(_.values(transitionFinishedEvents).join(" "), function (e) {
    if ($M.transitionFinishedEvent !== e.type) {
      window.console.warn("Changing misconfigured Modernizr.transitionFinishedEvent to " + e.type + ". (Was " + $M.transitionFinishedEvent + ")");
      $M.transitionFinishedEvent = e.type;
    }
    window.document.body.removeChild(div);
  });

  window.setTimeout(function () {
    div.style[$M.prefixed('transition')] = '0.1s';
    div.style[$M.prefixed('transform')] = 'translate3d( 100px,0,0)';
  }, 25);

}, 25); 
```

之后，您可以轻松地为 transitionEnd 设置一个事件侦听器，该侦听器将适用于所有平台（具有 CSS3 转换）：

```
$("#fooBar").on($M.transitionEnd, function() {
    // do something clever
} 
```

该代码依赖 underscore.js 和 jQuery，但可以很容易地转换为[vanilla js](http://vanilla-js.com/)。

受此影响的人的相关链接：

1.  [[Modernizr]Android 4.1.1 (Samsung Note II) 错误返回无前缀版本的“transition”和“transform”](https://github.com/Modernizr/Modernizr/issues/897)
2.  [[传单] 在 Android 4.1.1 + 三星 Galaxy Note II 上冻结](https://github.com/Leaflet/Leaflet/issues/1182)

# scala - 在scala中一次（逐行）读取2个文件

> ID：13823191
> 
> 赞同：4
> 
> 时间：2012-12-11T15:35:41.663
> 
> 标签：scala, for-loop

我是 scala 的新手，我遇到了这个问题：

```
def main(args: Array[String]){

val source = Source.fromFile(args(0))
val target = Source.fromFile(args(1))

for (lines <- source.getLines ; linet <- target.getLines) { 
  println(lines + " =source| target= " + linet);
}
} 
```

如果源文件和目标文件包含纯数字：1、2（每行一个数字），则结果为：

```
    1 =来源| 目标= 1
    *1* =来源| 目标= 2

```

但是，我希望：

```
    1 =来源| 目标= 1
    *2* =来源| 目标= 2

```

问题：第二个文件（目标）被正确读取（逐行，即1和2），在第一个（源）中，只有第一行（即1）被读取。

最有可能的问题在于 for 循环。我虽然运算符“;” 行为类似于“&&”，因此应该同时从两个文件中读取一行。我试过替换“;” 通过“&&”，但它没有工作。

任何线索将不胜感激！托马斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:44:27.450

您可以[压缩](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/Iterator.scala#L684)它们并遍历行对：

```
def main(args: Array[String]){

  val source = Source.fromFile(args(0)).getLines
  val target = Source.fromFile(args(1)).getLines

  for ((s,t) <- source.zip(target)) { 
    println(s + " =source| target= " + t);
  }
} 
```

您的方法的问题在于，像 for(x <- xs, y <- ys) 这样编写的代码会产生笛卡尔积。在您的情况下，只要遍历第一个迭代器，它就会停止产生产品项（请记住 - 迭代器只能遍历一次）。

**更新。**

您的 for 循环在 java/C++/... 中是类似的：

```
for(int i = 0; i < source.length; i++)
  for(int j = 0; j < target.length; j++) {
    String s = source[i];
    String t = target[j];
    // println ....
  } 
```

（除此之外，上面我没有使用迭代器）

# python - 通过列表理解定义多个函数的奇怪行为

> ID：13823194
> 
> 赞同：1
> 
> 时间：2012-12-11T15:36:05.723
> 
> 标签：python, loops, user-defined-functions

> **可能重复：**
> [（lambda）函数闭包在 Python 中捕获了什么？](https://stackoverflow.com/questions/2295290/what-do-lambda-function-closures-capture-in-python)

使用此代码：

```
def problem():
    PHI_LIST_0 = [lambda a, b: a+b+u for u in xrange(3)]
    PHI_LIST_1 = [lambda a, b: a+b+0, lambda a, b: a+b+1, lambda a, b: a+b+2]

    for phi in PHI_LIST_0: print "v0:", phi(1,1)
    print
    for phi in PHI_LIST_1: print "v1:", phi(1,1)

if __name__ == '__main__':
    problem() 
```

我得到：

```
v0: 4
v0: 4
v0: 4

v1: 2
v1: 3
v1: 4 
```

预期的行为是最后一个行为，带有 PHI_LIST_1。我想我理解为什么结果与 PHI_LIST_0 不同：可能是因为 Python 在评估 phi(1,1) 时使用了最后一个“u”，即 2。

但是我想以定义 PHI_LIST_0 的方式声明一个函数列表，并带有列表理解。有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:45:24.040

当你定义一个函数时，它会在函数体中的自由变量上创建一个闭包。在您的 PHI_LIST_0 中，这就是变量`u`。它不保留 u 的值，它保留对名称 u 的引用。当您调用该函数时，它使用 u 的当前值。因此，您的所有函数都引用同一个变量，并且都看到它的相同（最后一个）值，因此它们的行为都相同。

您可以使用默认值技巧解决此问题：

```
PHI_LIST_0 = [lambda a, b, u=u: a+b+u for u in xrange(3)] 
```

现在 u 参数的默认值在定义函数时计算，并与函数一起存储。

# ruby - 从返回最大值的数组创建哈希映射

> ID：13823195
> 
> 赞同：0
> 
> 时间：2012-12-11T15:36:05.913
> 
> 标签：ruby, hashmap

我有一系列问题，每个问题都有 a`category_id`和 a `value`。

我想映射这些，以便当`category_id`哈希中已经存在键 () 时，将这些值相加。

最后，我想在哈希中找到最大值：

```
h = Hash.new {|k, v| k[v] = 0}  

@test_session.answered_questions.each do |q|

  if h.key?(q.category_id)
     #add q.value to the value stored in the hash
  else
     h = { q.category_id => q.value } #insert the "q.category_id" as key and with value "q.value"
  end        

end

key_with_max_value = h.max_by { |k, v| v }[0] #find the highest value

@result.category = key_with_max_value
@result.score = h[key_with_max_value].value 
```

可能有更好的方法来实现这一点，但我对 Ruby 还是很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:52:48.927

```
h = Hash.new(0)
@test_session.answered_questions.each {|q| h[q.category_id] += q.value}
@result.category, @result.score = h.max_by { |k, v| v } 
```

散列中的每个值都将被初始化为零，`Hash.new(0)`并且由于`h.max_by`返回键值对，您可以直接将它们分配给您的`@result`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:49:22.640

你可以简单地做：

```
@test_session.answered_questions.each { |q| h[q.category_id] += q.value } 
```

当键不存在时，由于您初始化散列的方式，它被假定为具有值`0`，因此它被插入`0 + q.value`。

[请参阅文档](http://www.ruby-doc.org/core-1.9.3/Hash.html)，或尝试一下。

此外，您可以将用逗号分隔的两个变量分配给`h.max_by { |k, v| v }`. 这称为多重赋值，它也适用于数组：

```
a,b,c = [1,2,3] 
```

# java - 在单独的类中重新绘制/更新 JPanel 问题

> ID：13823198
> 
> 赞同：1
> 
> 时间：2012-12-11T15:36:14.077
> 
> 标签：java, swing, jframe, jpanel

我正在处理一项 Java 任务，并且我创建了一个 JFrame 小程序，该小程序具有在单独的类中创建的四个面板，这些面板返回到主类并添加到主面板中。我面临的问题是我的南面板中有一个组合框。根据该组合框中的选择，我希望根据该选择更新一个或多个其他面板。我不知道如何做到这一点，我已经研究过重新粉刷那个面板，甚至重新创建整个主面板。任何帮助和/或建议将不胜感激。

我已经从初学者的主面板类中发布了下面的代码。

我是第一次在这里发帖，所以如果没有足够的细节或者我遗漏了一些东西，请告诉我。

```
public class Main_GUI_Panel extends JFrame {

    public static Panel_North northPanel;
    public static Panel_Center centerPanel;
    public static Panel_West westPanel;
    public static Panel_South southPanel;
    private int index = -1;

    public Main_GUI_Panel() {
        super("Java 2: Final Project");
        getContentPane().setBackground(Color.BLACK); //set the applet background color
        setLayout(new BorderLayout());  //set the Layout for the applet

        //START - call methods to create & set panels
            northPanel = new Panel_North();
            westPanel = new Panel_West();
            centerPanel = new Panel_Center();
            southPanel = new Panel_South();

            add(northPanel.setNorth(),BorderLayout.NORTH); //set the North portion of the applet
            add(westPanel.setWest(index),BorderLayout.WEST); //set the West portion of the applet
            add(centerPanel.setCenter(),BorderLayout.CENTER); //set the Center portion of the applet
            add(southPanel.setSouth(),BorderLayout.SOUTH); //set the South portion of the applet
        //END - call methods to set panels
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:52:46.250

当你创建一个 GUI 时，你应该（必须）创建一个或多个模型类来保存你的 GUI 的数据。这是模型。您的 GUI 组件就是视图。这些部分构成了应用程序的模型/视图/控制器 (MVC)。

您将顶层模型类的实例传递给 GUI 的所有面板。每个面板都可以更新模型类，然后面板从模型中获取数据。

因此，您在一个面板中所做的操作会影响不同面板的显示。

[这个答案](https://stackoverflow.com/questions/13423696/restart-replay-java-game-without-restarting-the-gui/13423840#13423840)更详细地介绍了 GUI 模型和 GUI 视图。

# python - 排序列表测试

> ID：13823207
> 
> 赞同：-5
> 
> 时间：2012-12-11T15:36:35.377
> 
> 标签：python, list, sorting, python-3.x

我还有一个学期的作业。它涉及测试以查看列表是否已排序。给定一个列表，比如一个数字列表，测试该列表是否已排序并返回 True 值，否则返回 False 值。我必须创建一个进行测试的函数。

我正在考虑使用 if 语句来测试 True。到目前为止，这是我的代码：

```
def my_list (list):
    list=[]
    if list.sorted() == True:
        print ("The list is sorted: True")
    else:
        print ("The list is unsorted: False")

list = input ("What is your list: ") 
```

我不确定这是要走的路。实际上，我不确定您是否可以以这种方式测试 sorted 方法。任务今天到期，我相信时间压力不会让我看到显而易见的事情。

任何帮助，即使只是向正确的方向发送我都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:40:26.643

我不会为你做功课，但我会提供一些提示。

有几种可能的方法：

1.  您可以对列表进行排序，看看排序是否改变了元素的顺序。
2.  您可以遍历列表，将每个元素与其直接前任进行比较。

第一种方法可以说更容易实现，而第二种方法更有效。

# java - ORMLite 数据库更新

> ID：13823208
> 
> 赞同：3
> 
> 时间：2012-12-11T15:36:37.820
> 
> 标签：java, android, database, data-migration, ormlite

根据我之前提出的问题（请参阅[this](https://stackoverflow.com/questions/13782084/ormlite-update-of-the-database)），如果我在分发应用程序后进行更改并添加新数据，那么删除和重新创建表将不会很好地工作，因为用户将失去他们所有的数据。

是否有处理此问题的推荐策略和/或您是否有一些示例说明我必须采取哪些措施来管理此问题？

谢谢

**编辑 ：**

会是这样的

```
@Override
    public void onUpgrade (SQLiteDatabase db, ConnectionSource connectionSource, int oldVersion, int newVersion){
        // TODO Auto-generated method stub
            //This is why I'm currently trying
        while(oldVersion < newVersion){
            switch(oldVersion){
            case 2:
                //add new datas from version 2 here
                break;
            case 3:
                //add new datas from version 3 here
                break;
            default:
                break;
            }
            oldVersion++;
        }
            /*
        try {
            Log.i(DatabaseHelper.class.getName(), "onUpgrade");
            TableUtils.dropTable(connectionSource, Category.class, true);
            TableUtils.dropTable(connectionSource, Level.class, true);
            TableUtils.dropTable(connectionSource, Hint.class, true);
            TableUtils.dropTable(connectionSource, HintCount.class, true);
            TableUtils.dropTable(connectionSource, Question.class, true);
            // after we drop the old databases, we create the new ones
            onCreate(db, connectionSource);
        } catch (SQLException e) {
            Log.e(DatabaseHelper.class.getName(), "Can't drop databases", e);
            throw new RuntimeException(e);
        }
            */
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:20:48.110

如果您只担心新数据，而不是模式修改，您可以尝试`createIfNotExists`ORM lite 中的方法。所以基本上每次升级你都会尝试插入所有数据。但只会插入新数据。

**编辑：**
另一种方法可能如下：将所有对象拆分为组，例如：初始对象、第一个升级对象、第二个升级对象等等。

在`onCreate`您将创建所有对象，迭代所有组。`onUpgrade`您将根据当前版本使用组。

# c# - 检查扩展对象是否在 xslt 模板中定义

> ID：13823209
> 
> 赞同：3
> 
> 时间：2012-12-11T15:36:41.357
> 
> 标签：c#, .net, xslt

我在我的 .NET (C#) 项目中使用 XSLT。我想知道是否可以在 XSLT 模板内部检查是否在 (add to) 中定义了扩展对象`XsltArgumentList`。

**XSLT 命名空间声明**

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt"
  xmlns:info="urn:info"> 
```

**C# 代码**

```
public string Render(XElement xml, IInfo info) {    
    XsltArgumentList arguments = new XsltArgumentList();   
    if(info != null)
        arguments.AddExtensionObject("urn:info", info);

    var writterSettings = GetWritterSettings();  //omitted details just for simplicity
    var xslt = CreateXslCompiledTransform(); //omitted details just for simplicity            

    StringBuilder sb = new StringBuilder();
    using (XmlWriter writer = XmlWriter.Create(sb, writerSettings))
    {
        using (var itemReader = xml.CreateReader())
        {
            xslt.Transform(itemReader, xsltArguments, writer);
        }
    }
    return sb.ToString();  
} 
```

在 XSLT 模板中，我想在扩展对象不为空时对它做一些事情，而在它为空时做一些其他事情。XSLT 是否有一些特殊的标记或语法来完成此操作，或者根本不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:34:10.557

XSLT 提供功能`element-available()`并`function-available()`用于检查特定的扩展元素/功能是否可用，因此请尝试类似

```
<xsl:choose>
  <xsl:when test="function-available('info:myFunction')">
    myFunction is available
  </xsl:when>
  <xsl:otherwise>
    myFunction is not available
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:11:35.997

我建议在您的 ArgumentList 中添加一个附加参数来表示它是否为空。

你可以试试 not() 运算符

# internet-explorer-7 - 单击 iframe 内的锚点时如何修复 IE7 中的页面向下滚动？

> ID：13823211
> 
> 赞同：0
> 
> 时间：2012-12-11T15:36:42.257
> 
> 标签：internet-explorer-7

我有一个 iframe，里面有一个锚。单击此锚点会调用首页函数来完成工作。但是当点击它时，IE7 会向下滚动首页。如何保持滚动位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:36:42.257

如果为锚设置了属性 href="#"，则会出现这种情况。

要解决此问题，请删除此属性。

要在此之后保留指针样式光标，请在 CSS 中设置其样式。

# android-notifications - BlackBerry 10 中的 NotificationManager（Android 运行时）

> ID：13823216
> 
> 赞同：0
> 
> 时间：2012-12-11T15:36:49.500
> 
> 标签：android-notifications, blackberry-10, blackberry-android

当应用程序在后台或关闭时，我的应用程序使用 AlarmManager 和 NotificationManager 来发布通知。在 PlayBook 模拟器中，它会弹出一条消息，其中包含在 Notification 对象中配置的自定义图标和消息。当我通过单击通知打开应用程序时，我会收到一个 Intent（如果应用程序已关闭，则在 onCreate 上调用 getIntent，如果活动已在运行，则调用 onNewIntent()），其中包含可用于执行操作的信息。然而，在 BlackBerry 10 模拟器上，所发生的只是应用程序的图标获得一个小徽章，没有任何信息，并且在打开时没有任何内容传递给应用程序。这是预期的行为吗？用户想知道是什么触发了通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:39:22.443

我收到了 BlackBerry 团队关于此问题的回复，但模拟器仍不支持此功能：

“对于 BlackBerry 10，用户将在 BlackBerry Hub 区域看到他们的通知。因此他们将能够对通知采取措施或将其删除等。不幸的是，您还不能在模拟器中看到它。但如果您会在应用程序图标上看到通知提示，通知将正确显示在 BlackBerry Hub 中。”

[http://supportforums.blackberry.com/t5/Android-Runtime-Development/NotificationManager-BB10/td-p/2030007](http://supportforums.blackberry.com/t5/Android-Runtime-Development/NotificationManager-BB10/td-p/2030007)

# php - PHP DOM 解析以获取特定 div id 内的元素

> ID：13823220
> 
> 赞同：1
> 
> 时间：2012-12-11T15:37:01.763
> 
> 标签：php, parsing, dom

我有一些html如下：

```
<div id="tvcap">
    <div class="c" id="tads">
        <ol>
            <li>
                <div class="vsc vsta">
                    <h3>
                        <a id="pa1" href="">
                        </a>
                        <a id="vpa1" href="http://www.link1.com">
                        Link 1 Text 1</a>
                    </h3>

                    <div>
                        <div class="kv kva">
                            <cite>
                            www.link1.com</cite>
                        </div>
                    </div>

                    <span class="ac">Link 1 Text2</span>
                </div>
            </li>

            <li>
                <div class="vsc vsta">
                <h3>
                <a id="pa2" href="">
                </a>
                <a id="vpa2" href="http://www.link2.com">Link 2 Text 1</a>
                </h3>

                <div>
                    <div class="kv kva">
                    <cite>www.link2.com</cite>
                    </div>
                </div>

                <span class="ac">Link 2 Text 3</span>
                <div>
                <div class="oslk">
                </div>
                </div>
                </div>
            </li>
        </ol>
    </div>
</div> 
```

可能会有未知数量的链接和文本，我希望迭代并能够访问每个链接和文本。

我正在使用[简单的 html dom 解析器](http://simplehtmldom.sourceforge.net/)。

我找不到进入 div id 'vpa1' 的命令。

我试过这个，但它什么也没返回：

```
foreach($html->find('a') as $element) 
 if ($element->id == "vpa1") echo $element->href . '<br>'; 
```

如何根据 ID 为 vpa[$i]（vpa1、vpa2 等）访问每个链接和文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-19T19:27:13.707

**从任何网页的特定 div id 中提取内容的函数**

下面的函数从指定的 div 中提取内容并返回它。如果没有找到具有 ID 的 div，则返回 false。

```
function getHTMLByID($id, $html) {
    $dom = new DOMDocument;
    libxml_use_internal_errors(true);
    $dom->loadHTML($html);
    $node = $dom->getElementById($id);
    if ($node) {
        return $dom->saveXML($node);
    }
    return FALSE;
} 
```

`$id``<div>`是您尝试提取其内容的 ID ，`$html`是您的 HTML 标记。

使用示例：

```
$html = file_get_contents('http://www.mysql.com/');
echo getHTMLByID('tagline', $html); 
```

输出：

```
The world's most popular open source database 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:01:38.370

正如@Wrikken 所说，Xpath 不会很快，而是简单的解决方案。

这里的代码，您可以将其用作起点：

```
 $some_html = file_get_contents('some_html.html'); // i put your html into some_html.html file   

        $doc = new DOMDocument();    
        $doc->loadHtml($some_html); // $some_html should contain your html string    

        $xpath = new DOMXPath($doc);    

        //process with no bugs    
        $result = $xpath->query('//*[@id="vpa1"]');    

        var_dump($result);    

        if (!empty($result)) {    
                foreach ( $result as $link ) {    
                        var_dump($link->nodeValue);    
                }    
        } 
        // output  
        // object(DOMNodeList)#4 (1) { ["length"]=> int(1) } string(38) " Link 1 Text 1"

        $result = $xpath->query('//a');    
        var_dump($result);    

        if (!empty($result)) {    
                foreach ( $result as $link ) {    
                        var_dump($link->nodeValue);    
                }    
        }    
        // output
        // object(DOMNodeList)#8 (1) { ["length"]=> int(4) } string(25) " " string(38) " Link 1 Text 1" string(17) " " string(13) "Link 2 Text 1" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T13:38:17.187

对我有用的是首先使用以下命令（使用[简单的 dom 解析器](http://simplehtmldom.sourceforge.net/)）找到具有指定 id 字符串的 div：

```
$div = $html->find('div#'.$divId) 
```

然后使用 div 变量来访问里面更多的东西。

# jira - 如何在 Jira API 中创建发布链接？

> ID：13823222
> 
> 赞同：1
> 
> 时间：2012-12-11T15:37:10.623
> 
> 标签：jira

我需要以编程方式创建从一个问题到另一个问题的“相关”类型的链接。我找到了一个方法

```
createIssueLink(Long sourceIssueId, Long destinationIssueId, Long issueLinkTypeId, Long sequence, User remoteUser) 
```

在 IssueLinkManager 中，但无论如何我都找不到获取 issueLinkTypeId。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:28:31.013

您可能想使用

```
 Collection linkTypes = issueLinkTypeManager.getIssueLinkTypesByName(name); 
```

然后迭代直到找到你想要的 IssueLinkType 实例，然后是 linkType.getId()

对于远程访问，我建议使用 jira-python 库和[create_issue_link](http://jira-python.readthedocs.org/en/latest/index.html#jira.client.JIRA.create_issue_link)方法。

在内部，该方法执行此操作：

```
def create_issue_link(self, type, inwardIssue, outwardIssue, comment=None):
    """
    Create a link between two issues.

    :param type: the type of link to create
    :param inwardIssue: the issue to link from
    :param outwardIssue: the issue to link to
    :param comment:  a comment to add to the issues with the link. Should be a dict containing ``body``\
    and ``visibility`` fields: ``body`` being the text of the comment and ``visibility`` being a dict containing\
    two entries: ``type`` and ``value``. ``type`` is ``role`` (or ``group`` if the JIRA server has configured\
    comment visibility for groups) and ``value`` is the name of the role (or group) to which viewing of this\
    comment will be restricted.
    """
    data = {
        'type': {
            'name': type
        },
        'inwardIssue': {
            'key': inwardIssue
        },
        'outwardIssue': {
            'key': outwardIssue
        },
        'comment': comment
    }
    url = self._get_url('issueLink')
    r = self._session.post(url, data=json.dumps(data)) 
```

〜马特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T20:00:13.810

这应该适用于 Jira 7.x

使 2 个问题相互关联

```
curl -u user:password -w '<%{http_code}>' -H 'Content-Type: application/json' https://jira.instance.com/rest/api/2/issueLink -X POST --data '{"type":{"name":"Related Incident"},"inwardIssue":{"key":"ISS-123"},"outwardIssue":{"key":"SYS-456"}}' 
```

# plasticscm - 关于在 Plastic SCM 中使用可写 Xlink 的几个问题

> ID：13823224
> 
> 赞同：2
> 
> 时间：2012-12-11T15:37:19.107
> 
> 标签：plasticscm

我需要一些关于使用可写 Xlink 的信息。

我有两个项目，我们称它们为**Project A**和**Project B**。

每个项目都有自己的存储库：**Repo A**；和**回购 B**。每个项目也有自己的工作区：**C:\Projects\Project A**；和**C:\Projects\Project B**；

**Project B**引用**Project A**，所以我在**Project B 的**工作区创建了一个可写的 Xlink 来引用**Project A**，将“XLink 目标变更集”设置为**Project A**中的最后一个变更集。我进行了签到和更新，来自**Project A**的代码现在出现在**Project B**下的文件夹中：**C:\Projects\Project B\Project A**。所有这一切似乎都按预期工作。

**但是，当我对项目 A**进行更改（在**项目 A 的**工作区中）并将它们签入时，Xlink 并没有改变。然后我编辑了 Xlink 并将“Xlink 目标变更集”更新为**Project A**中新的最后一个变更集，进行了签入和更新，然后将**Project A中的最新代码拉到了****Project B**下的文件夹中。

所以我有几个问题：

我必须做什么才能让 Xlink 显示为已更改？

在处理**项目 A**时，我应该在**项目 A 的**工作区 ( **C:\Projects\Project A** ) 中工作，还是应该在**项目 B 的**工作区 ( **C:\Projects\Project B\Project A** )中处理**项目 A**代码?

 ****假设我*在*Project **B 的工作区中对****Project A**进行更改，我什至需要**Project A**的工作区吗？

 ****任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:05:28.570

xlink 是一个静态对象，所以现在，它无法跟踪目标变更集分支（**项目 A**）中的最新更改。

您需要使用**项目 B存储库来发展****项目 A**存储库。因此，在您的情况下，您需要通过**Project B在****Project A**下进行更改。

 ******您可能知道，如果您在**项目 B**中创建一个新分支，然后在`C:\Projects\Project B\Project A`新分支下执行更改，则会在**项目 A**存储库中自动创建以保存更改，甚至更多，如果您合并**项目 B**任务分支**项目一个**任务分支也将自动合并。

在这里，您有一篇关于您的场景的博客文章：http: [//codicesoftware.blogspot.com/2011/12/how-to-link-repositories-using-xlinks.html](http://codicesoftware.blogspot.com/2011/12/how-to-link-repositories-using-xlinks.html)**************

# c# - 具有 1 个元素的数组导致 for 循环中的错误

> ID：13823229
> 
> 赞同：1
> 
> 时间：2012-12-11T15:37:33.947
> 
> 标签：c#, for-loop

我在我的 for 循环中使用数组长度作为测试条件。但如果数组中只有一个元素，我会收到“索引超出数组范围”错误。我究竟做错了什么？谢谢。

```
string templateList;
string[] template;

string sizeList;
string[] size;

templateList = textBox1.Text;
template = templateList.Split(',');

sizeList = textBox2.Text;            
size = sizeList.Split(',');

for (int i = 0; i <= template.Length; i++)
{
    for (int j = 0; j < size.Length; j++)
    {
         //do something with template[i] and size[j]
    }
} 
```

值来自文本框，用户只能输入一个值。在这种情况下，它只需要运行一次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:38:37.950

数组是`zero-based`索引，即第一个元素的索引为零。template[0] 指向第一个元素。当您只有一个`template[1] will refer to second element`不存在的元素时，您可能会遇到`out of index`异常。

改变

```
for (int i = 0; i <= template.Length; i++) 
```

至

```
for (int i = 0; i < template.Length; i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:42:47.077

使用...

```
for (int i = 0; i <= template.Length; i++) 
```

...在最后一次迭代`i`将等于`template.Length`. `template[template.Length]`将始终导致`IndexOutOfRangeException`. 由于 的最后一个元素`template`实际上具有 index `template.Length - 1`，因此您应该改用...

```
for (int i = 0; i < template.Length; i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:41:33.747

从零开始计数，您必须将第一个 for 语句更改为：

```
for (int i = 0; i < template.Length; i++) {....} 
```

# asp.net - ASP.NET 中的运行时异常 BC30456 InitializeCulture

> ID：13823230
> 
> 赞同：1
> 
> 时间：2012-12-11T15:37:35.567
> 
> 标签：asp.net, vb.net, visual-studio-2012

我有一个 ASP.NET WebForms 解决方案，它由 5 个 VB.NET 项目（1 个 WebForms 项目和 4 个类库项目）组成。通常，当我更改代码并构建项目并从 Chrome 启动它时，我会收到以下异常：

```
System.Web.HttpCompileException (0x80004005): D:\myprojectfolder\AccSubManage1.aspx(1): error BC30456: 'InitializeCulture' is not a member of 'ASP.accsubmanage1_aspx'.
at System.Web.Compilation.AssemblyBuilder.Compile()
at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp)
at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
at System.Web.UI.PageHandlerFactory.GetHandler(HttpContext context, String requestType, String virtualPath, String path)
at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

如果我然后回到 VS 2012，运行“清洁解决方案”，然后再次构建，那么一切都会正常工作。换句话说，Clean and Build 似乎解决了这个问题，但我不知道为什么。

另请注意，运行“全部重建”并不能解决问题，除非我在全部重建之前也运行干净构建。

有任何想法吗？

# git - git rebase，我想我做错了什么

> ID：13823231
> 
> 赞同：0
> 
> 时间：2012-12-11T15:37:37.367
> 
> 标签：git

我正在做一个非常活跃的项目。要实现新功能，请创建一个新分支（“my-feature”）。为了跟踪 master 中发生的事情，我不时执行以下步骤：

```
git checkout master
git pull
git checkout my-feature
git rebase master 
```

一开始，这工作得很好。但是几天以来，我不得不遇到许多错误，例如：

```
 stdin:28: trailing whitespace.

stdin:80: trailing whitespace.

stdin:83: trailing whitespace.

warning: 3 lines add whitespace errors. 
```

比我必须自己浏览代码。冲突总是我在“my-feature”分支和同一行的更高版本中完成的较旧的更改。看起来 rebase 以某种方式混淆了提交的顺序，我不知道。

在我修复它之后，我将它们标记为已修复（`git add`）并调用`git rebase --continue`这再次导致类似的错误。比我必须多次重复这个步骤，直到 rebase 过程完成。

在 master 那里，我在“my-feature”分支中编辑的文件没有更改。所以我认为应该在没有任何冲突的情况下进行变基。只需拉入所有其他更改，然后以正确的顺序应用我的更改。

我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:43:36.217

这听起来不像是冲突，听起来像是有人添加了一个检测空白错误的提交钩子。

当您变基时，您的功能分支提交会被一一重播。因此，您随后修复了空白错误这一事实不会阻止 git 在重放旧提交时抱怨。

要么使用变基来压缩你的提交，所以你的历史记录中没有错误的提交，或者只是停止变基。您可以合并`master -> my-feature`以使您的分支保持最新，然后仅在完成后合并回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:05:04.683

有时 git 会对空格发出警告。如果您的文件中的空白不重要，您可以使用此配置跳过这些警告：

```
 git config --global apply.whitespace nowarn 
```

如果您不想更改您的 git 配置，您可以在执行 rebase 时使用该选项：

```
 git rebase --ignore-whitespace 
```

# java - python neo4j jvm错误

> ID：13823234
> 
> 赞同：0
> 
> 时间：2012-12-11T15:37:52.580
> 
> 标签：java, python-2.7, jvm, neo4j

我正在尝试在 python 2.7 中设置 neo4j，但遇到了一个令人震惊的错误。我对 neo4j 和 python 以及 Ubuntu 还很陌生，非常感谢一些帮助

这是我得到的错误

```
>>> import neo4j

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import neo4j
  File "/usr/local/lib/python2.7/dist-packages/neo4j/__init__.py", line 29, in <module>
    from neo4j.core import GraphDatabase, Direction, NotFoundException, BOTH, ANY, INCOMING, OUTGOING
  File "/usr/local/lib/python2.7/dist-packages/neo4j/core.py", line 19, in <module>
    from _backend import *
  File "/usr/local/lib/python2.7/dist-packages/neo4j/_backend.py", line 135, in <module>
    raise Exception("Unable to start JVM, even though I found the JVM path. If you are using windows, this may be due to missing system DLL files, please see the windows installation instructions in the neo4j documentation.",e)
Exception: ('Unable to start JVM, even though I found the JVM path. If you are using windows, this may be due to missing system DLL files, please see the windows installation instructions in the neo4j documentation.', TypeError("unsupported operand type(s) for +: 'NoneType' and 'str'",)) 
```

我已经安装了 Java 6 Oracle 以及 jpype，正如我在使用 ubuntu 12.10 之前所说的那样？我应该设置**JAVA_HOME**吗？如果可以，如何设置，如果不是，有人可以提出什么其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:11:23.327

看起来 JPype 找不到您的 Java 运行时。您可以使用以下命令找出运行 Java 的位置：

`readlink -e `which java``

这应该给你类似的东西：

`/usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java`

然后，您可以使用此路径来设置 JAVA_HOME 环境变量：

`export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64/jre`

希望这可以帮助

尼日

# javascript - 销毁后rails在js中渲染另一个控制器动作

> ID：13823235
> 
> 赞同：0
> 
> 时间：2012-12-11T15:37:56.690
> 
> 标签：javascript, ruby-on-rails, render

我在 clipsController 中执行这段代码：

```
 def destroy
    @clip = Clip.find(params[:id])
    @clip.destroy
    respond_to do |format|
      format.html {redirect_to request.referer, notice: "Attachment deleted."}
      format.js {
        @pmdocument = @clip.attachable
        render action: "pmdocuments/show"
      }
    end
  end 
```

这应该呈现位于 pmdocuments 中的名为 show.js.erb 的模板，但相反，我收到此错误消息：

```
ActionView::MissingTemplate (Missing template clips/pmdocuments/show,
application/pmdocuments/show with {:locale=>[:en], :formats=>[:js, :html]
, :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in: 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:40:57.440

添加前导`/`. 它试图呈现相对于当前控制器的动作。所以这 -

```
render action: "/pmdocuments/show" 
```

# ruby-on-rails - 在 rake 任务中包含 Rails 类？

> ID：13823237
> 
> 赞同：3
> 
> 时间：2012-12-11T15:38:04.977
> 
> 标签：ruby-on-rails, rake-task

我对 Rails 很陌生，所以如果我的问题没有最有意义，我深表歉意。

我有一个名为的类`PaymentGatewayCipher`，如下所示：

```
require 'openssl'

# Encapsulates payment gateway encryption / decryption utility functions
class PaymentGatewayCipher
  class << self
    def encrypt(file, options = {})
      cipher = create_cipher
      cipher.encrypt(cipher_key)
      data = cipher.update(File.read(file))
      data << cipher.final

      if to_file = options[:to]
        # Write it out to a different file
        File.open(to_file, 'wb') do |f|
          f << data
        end
      end

      data
    end

    # Decrypts the given file
    def decrypt(file)
      cipher = create_cipher
      cipher.decrypt(cipher_key)
      encrypted_data = File.open(file, 'rb') {|io| io.read}
      data = cipher.update(encrypted_data)
      data << cipher.final
    end

    # Generates the cipher to be used for encryption/decryption
    def create_cipher
      OpenSSL::Cipher::Cipher.new('aes-256-cbc')
    end

    # Loads the cipher key used for the symmetric algorithm
    def cipher_key
      File.open(File.join(Rails.root, 'config/mystuff/live/cipher.key'), 'rb') {|io| io.read}
    end
  end
end 
```

我想写一个`rake task`来运行它来解密一个文件。我试过把一个文件放进去`tasks/Rakefile`，看起来像：

```
directory "tasks"

task :decrypt_test do
  puts "Decypting"
  pay_pal_config = PaymentGatewayCipher.decrypt('hpa1')
end 
```

但是，当我运行它时，它说找不到`Class::Rails`

帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T16:04:07.343

使用`lib/tasks`文件夹，不要忘记在您的任务中包含 rails 环境：

```
directory "tasks"

task :decrypt_test => :environment do
  puts "Decypting"
  pay_pal_config = PaymentGatewayCipher.decrypt('hpa1')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:01:23.867

您不必为此编辑**Rakefile**。例如，将您自己的任务添加到以**.rake**`lib/tasks`结尾的文件中，它们将自动可供 Rake 使用。**`lib/tasks/bootstrap.rake`**

# macos - 基于 Cocoa 中 PopUp 值的控件的条件隐藏

> ID：13823240
> 
> 赞同：0
> 
> 时间：2012-12-11T15:38:22.570
> 
> 标签：macos, cocoa, binding, popup

我有`NSPopUp`几个值，其中一个是“自定义”。自定义没有索引或标记等于零。假设它是第四个项目，标签也是 4。

如何检查“自定义”的选择？我想隐藏/显示基于此选择的另一个控件。只有当我选择“自定义”时，才会出现这个其他控件。希望我可以使用“隐藏”绑定，但是如何配置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:12:26.360

我不知道是否有一种简单的方法可以使用绑定来完成此操作，但可以使用弹出窗口的操作方法轻松完成。只需根据 titleOfSelectedItem 的值设置其他控件的隐藏属性：

```
-(IBAction)selectionChanged:(NSPopUpButton *)sender {
    if ([sender.titleOfSelectedItem isEqualToString:@"Custom"]){
        self.otherControl.hidden = YES;
    }else{
        self.otherControl.hidden = NO;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:19:31.230

这是解决方案...

创建一个属性“onOffValue”以跟踪从弹出窗口中选择的“自定义”。

更改 onOffValue 的一项操作。

在.h

```
@property(assign) BOOL onOffValue;
- (IBAction)popUp:(id)sender; 
```

在.m

```
- (id)init
{
    self = [super init];
    if (self) {
        self.onOffValue=NO;
    }
    return self;
}

- (IBAction)popUp:(id)sender {
    if ([[sender title]isEqualToString:@"Custom"]) {
        self.onOffValue=NO;
    }
    else{
        self.onOffValue=YES;
    }
} 
```

在 IB 中，选择要隐藏-取消隐藏的控件。

在绑定检查器中，在隐藏选项中绑定到您的类（在我的情况下是 AppDelegate）

将模型密钥路径设置为`self.onOffValue`

而已！！！

编辑： ![在此处输入图像描述](../Images/7f16a12369d4fa9efb21b0479620b188.png)

这是您可以下载文件以获取帮助的[链接...](http://www.keepandshare.com/doc/5245431/buttonbinding-zip-34k?da=y)

# ruby-on-rails - 测量师宝石检查已完成测量的结果

> ID：13823244
> 
> 赞同：2
> 
> 时间：2012-12-11T15:38:36.873
> 
> 标签：ruby-on-rails, ruby, sqlite

我有小问题。我已经安装了Surveyor gem。我在我的电脑上做了一个 Rails 应用程序，输入时：`http://localhost:3000/surveys`我可以回答我的调查。添加新调查不是问题，但我不知道如何从字符串中完成的调查中获取结果。

我知道结果在“db”文件夹 development.sqlite3 中。我知道每一行是数据库中的一条记录，每个元素都是一种类型的变量（int，string，date），但是如何将它从数据库中取出，然后将其转换为字符串呢？我不知道如何搜索解决方案！

```
C:\Ruby192\projekt\sample\db>rails db
SQLite version 3.7.14.1 2012-10-04 19:37:12

Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> SELECT*FROM response_sets;
1||1|nJL41HC_GQ|2012-12-11 14:30:21.024080|2012-12-11 14:32:04.367168|2012-12-11
 14:30:21.055329|2012-12-11 14:32:04.460918|ba67a3c1-c784-4ac3-af6d-e79a62089f8d

    sqlite> 
```

我的软件：

> 红宝石 1.9.2p290 (2011-07-09) [i386-mingw32]
> 
> 导轨 3.2.9
> 
> sqlite3 (1.3.6 x86-mingw32, 1.3.5 x86-mingw32)
> 
> sqlite3-ruby (1.3.3)
> 
> 测量员 (1.1.0)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T16:41:17.673

您运行的查询似乎是连接表的结果。再次检查测量员文档以设置模型之间的适当关系。'belongs_to' 'has_many' ...

此外，请查看测量员创建的迁移，以了解这些表是如何相关的。

这是我最好的猜测 b/c 我真的不明白问题是什么。

# java - 从一项活动到另一项活动的价值

> ID：13823248
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:38:48.440
> 
> 标签：java, android, class, outer-join

我需要`Strings`从一类中获得`LocationGetter.java`：

```
 @Override
  public void onLocationChanged(Location location) {
    int latitute = (int) (location.getLatitude());
    int longitude = (int) (location.getLongitude());
    String lat = (String.valueOf(latitute));
    String lon = (String.valueOf(longitude));

    //latituteField.setText(String.valueOf(lat));
    //longitudeField.setText(String.valueOf(lng));
  } 
```

到另一个班级`ParseJSON.java`：

```
public String readWeatherFeed() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://free.worldweatheronline.com/feed/weather.ashx?key=46d1ef574c094426121012&format=json&q="+lat+","+lon);
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } else {
            Log.e(ParseJSON.class.toString(), "Failed to download file");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return builder.toString();

} 
```

所以我想在第二类的 URL 字符串中使用第一类的值 String lat, lon。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:44:43.783

您可以通过`String lat, lon`在 LocationGetter 类中创建类的 Object 来从 LocationGetter 类传递到 ParseJSON 类`ParseJSON`：

```
 @Override
  public void onLocationChanged(Location location) {
    int latitute = (int) (location.getLatitude());
    int longitude = (int) (location.getLongitude());
    String lat = (String.valueOf(latitute));
    String lon = (String.valueOf(longitude));
    ParseJSON parsjosnobj=new ParseJSON();
    String strresutn =parsjosnobj.readWeatherFeed(lat,lon)
    //latituteField.setText(String.valueOf(lat));
    //longitudeField.setText(String.valueOf(lng));
  } 
```

并在`ParseJSON`课堂上将您的`readWeatherFeed`参数化为：

```
public String readWeatherFeed(String lat,String lon) {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://free.worldweatheronline.com
   /feed/weather.ashx?key=46d1ef574c094426121012&format=json&q="+lat+","+lon);
    try {
   //your code here 
```

**注意：**此解决方案仅在您的`ParseJSON`类不是 Activity时才有效。如果`ParseJSON`是 Activity，则使用 Intent 将数据从一个 Activity 传递到其他

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:44:06.763

;) 您需要使用意图和 BroadcastReceiver 来知道下载完成并使用 AsyncTask 下载 JSON

你有很多工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:51:15.217

如果这些跨越多个活动，您可以通过意图附加功能传递它们。在您的第一堂课中，当您定义启动第二个 Activity 的 Intent 时，您添加了一个额外的。

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
intent.putExtra("lat", mLatitude);
intent.putExtra("lon", mLongitude);
startActivity(intent); 
```

然后在第二个活动中，您可以通过 getExtras 获取这些内容。

```
Bundle extras = getIntent().getExtras();
float latitude = extras.getFloat("lat");
float longitude = extras.getFloat("lon"); 
```

# c# - 如何使用 LINQ 获取单个 IENumerable 来自 IEnumerable 的属性 ?

> ID：13823252
> 
> 赞同：2
> 
> 时间：2012-12-11T15:38:58.517
> 
> 标签：c#, .net, linq

考虑以下数组：

```
class B { }

class A 
{
    IEnumerable<B> C { get; }
}

IEnumerable<A> array; 
```

我需要结束一个`IEnumerable<B>`. 我最终得到`IEnumerable<IEnumerable<B>>`：

`var q = array.Select(a => a.C);`

如何展开数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T15:41:02.957

你只需要使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)：

```
IEnumerable<B> allBs = array.SelectMany(a => a.C); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:41:13.003

使用`SelectMany`：

```
var q = array.SelectMany(a => a.C); 
```

这将为您提供`IEnumerable<B>`包含.`C``array`

# visual-studio-2010 - 使用 Visual Studio 2010 编译 QT 时缺少包含

> ID：13823253
> 
> 赞同：5
> 
> 时间：2012-12-11T15:39:00.000
> 
> 标签：visual-studio-2010, qt, command-line, include

我尝试在 Windows 7、64 位的 Visual Studio 2010 的命令提示符下编译 QT 5.0.0。该过程本身是已知的，并[在此处](https://stackoverflow.com/questions/5601950/how-to-build-qt-for-visual-studio-2010)和[此处](http://www.holoborodko.com/pavel/2011/02/01/how-to-compile-qt-4-7-with-visual-studio-2010/)进行了描述。在我的机器上，编译停止是因为编译器找不到文件：

```
 fatal error C1083: [..] "GLES2/gl2.h": No such file or directory 
```

`C:\QTSources`我在我尝试构建源的文件夹的子目录中发现了丢失的文件。

我将这一行添加`INCLUDEPATH += "C:/QTSources/qtwebkit/Source/ThirdParty/ANGLE/include"`到文件*qtsdk.pro*中，当我说 qmake 时，该文件似乎被 qmake 用于生成 Makefile `configure [options]`。[建议在这里](https://stackoverflow.com/questions/2752352/how-to-add-include-path-in-qt-creator)这样做，但它没有帮助。该路径既不会出现在 Makefile 中，也不会出现在对编译器的任何调用中。

如何正确声明我的包含？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-04T09:42:47.660

当从 VS2008 迁移到 VS2010 (Win7) 时，我收到了关于“GLES2/gl2.h.

解决方案是添加

\include\QtANGLE

到项目属性中的“AdditionIncludeDirectory”参数。

据我所知，QtANGLE 是 opengl 图形库的替代品。

看来，您不必在 Windows 上从头开始构建 Qt，但您可以使用预编译版本。至少不是因为现在的话题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T04:36:04.340

我遇到了同样的问题，我终于找到了解决方案（唯一的区别是我使用的是 VS 2008，但我使用的是 Windows 7，我需要像你一样的 64 位目标）。

主要问题是你从 Qt 站点下载的压缩文件不正确。您必须使用 Git 存储库中的内容（当前版本为 5.0.1，但与您从下载页面获得的 5.0.1 版本不同）

这就是我所做的，一步一步，确切地说：

先决条件：已安装 git、perl、python 和 ruby​​，您必须检查您的路径以查看是否可以从任何地方访问可执行文件。在此处搜索下载链接：http: [//qt-project.org/wiki/Building-Qt-5-from-Git](http://qt-project.org/wiki/Building-Qt-5-from-Git)在“Windows 构建环境”部分下。对于 Git，从这里下载它[http://git-scm.com](http://git-scm.com)

然后执行以下操作：

转到要安装 Qt 的目录。

```
git clone git://gitorious.org/qt/qt5.git qt5

cd qt5

perl init-repository --no-webkit

configure -developer-build -opensource -nomake examples -nomake tests 
```

打开 Visual Studio x64 Win64 命令提示符，查找它或 VS 2008，您可以执行： %comspec% /k ""c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcvarsall.bat"" amd64

在那个窗口内：

```
SET CL=/MP

configure -developer-build -opensource -nomake examples -nomake tests -opengl desktop 
```

然后按“y”接受许可条款

```
nmake 
```

...就这样。

**注意原来的问题：** 你问*“我怎样才能正确地声明我的包含？”* 在你解释了你最终解决它的方式之后：*“......我将文件所在的整个文件夹复制到编译器已知的路径中......”*。

与其这样做，您可能更愿意将文件夹保留在其原始位置，并在调用 nmake 之前执行以下操作：

```
SET CL=/Ic:\MyFolder 
```

请注意，我之前使用过 SET CL=/MP，这是为了通过使用处理器的多个内核来更快地构建。因此，对于这种情况，您应该这样做：

```
SET CL=/MP /Ic:\MyFolder 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-04T21:11:04.873

我在尝试使用 vs2012 构建 qt5.0 和 qt5.1 时遇到了同样的问题。通过将参数“-opengl desktop”（不带引号）添加到配置命令并重建（make/nmake/jom/mingw32-make）简单地解决了这个问题。我认为所有其他提到的东西都没有必要解决你原来陈述的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T19:45:20.783

您是否尝试过查看此链接？

[http://qt-project.org/wiki/Building-Qt-5-from-Git](http://qt-project.org/wiki/Building-Qt-5-from-Git)

> Windows Windows 图形驱动程序
> 
> QML2 需要 OpenGL 2.1 或更高版本或 Open GL ES 2.0 才能工作。
> 
> 在 Windows 中，有两个选项可用：
> 
> ```
> Use the ANGLE-library [code.google.com] to translate OpenGL calls into DirectX (default)
> Use the native OpenGL driver for your graphics card 
> ```
> 
> ANGLE 的副本捆绑在 Qt 5 中。要使用选项 1，您需要安装 DirectX SDK [msdn.microsoft.com]（注意：从 Windows Kit 8 开始，它包含在 Windows SDK 中）。
> 
> 要使用选项 2，您需要确保您的显卡驱动程序支持 OpenGL 2.1 或更高版本（注意：库存的 Windows 驱动程序仅支持 OpenGL 1.1，这是不够的），并将 `-opengl desktop' 传递给 configure.exe。

# python - 使用类而不是全局变量

> ID：13823254
> 
> 赞同：3
> 
> 时间：2012-12-11T15:39:04.867
> 
> 标签：python, class, global-variables

我有一个程序对数组进行一些操作（小波变换和各种其他复杂性），然后将其与前一个数组及其属性进行比较，输出一个比较两者的图形，最后更新“前一个”数组以包含此信息. 基本上，我的程序开始变得有点长且难以阅读，但我无法真正将其拆分为函数，因为所有函数都在读取并更改相同的变量。每次我想要一个函数来改变它们时，如果不将所有这些变量都定义为全局变量，那就很难了。

然后我在网上找到了这个：

> 您可能有多个函数使用相同的状态变量，读取或写入它们。您正在传递很多参数。您有嵌套函数，它们必须将它们的参数转发给它们使用的函数。您很想创建一些模块变量来保存状态。
> 
> 您可以改为上课！一个类的所有方法都可以访问该类的所有实例数据。通过将共享状态存储在类中，您无需将其作为参数传递给方法。

所以我想知道如何使我的程序改用类来编写？如果有帮助，我可以附上我的代码，但它很长，我不想填满论坛！

这是代码：

```
import os, sys, string, math
from optparse import OptionParser
import numpy as np
import pywt
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
from matplotlib.ticker import MaxNLocator
import glob

dir = os.getcwd()
profiles = glob.glob(dir+"/B0740-28/*_edit.FT.ascii")
for x in range(0,len(profiles)):
    profiles[x] = profiles[x][28:]
#produce list of profile file names

mode = 'per'
wavelets = ['db12']
levels = range(3,4)
starts = []
fig = 1
ix = 0 #profile index
changes = np.zeros(len(profiles))
#array to record shape changes

for num_levels in levels:
    for wavelet in wavelets:
        for profile in profiles:

            prof_name = profile.partition('.')[0]
            #remove file extension

            pfile=open(dir+'/B0740-28/'+profile)
            data = []
            for line in pfile:
                data.append(float(line))
            data = np.array(data)
            end = len(data)
            data = np.array(data)/max(data)
            #get pulse profile and normalise
            #ignore first 2 lines

            wav_name = wavelet.partition('.')[0]
            w = pywt.Wavelet(wavelet)
            useful = pywt.dwt_max_level(end,w)
            #find max level of decomposition

            coeffs = pywt.wavedec(data,wavelet,mode,level=num_levels)
            #create wavelet coefficients: cAn, cDn, cD(n-1)... cD1

            lowpass = pywt.upcoef('a',coeffs[0],wavelet,level=num_levels,take=end)
            highpass = np.zeros(end)
            for x in range(1,(num_levels+1)):
                highpass += pywt.upcoef('d',coeffs[len(coeffs)-x],wavelet,\
                                        level=x,take=end)
            #reverse transform by upcoef
            #define highpass and lowpass components

            for n in range(0,len(data)):
                if float(data[n]) > 0.4:
                    value = n
                    starts.append(value)
                    break
            if profile != profiles[0]:
                offset = starts[0]- value
                data = np.roll(data,offset)
                lowpass = np.roll(lowpass,offset)
                highpass = np.roll(highpass,offset)
            #adjust profiles so that they line up

            if profile == profiles[0]:
                data_prev = 0
                lowpass_prev = 0
                highpass_prev = 0
                mxm = data.argmax()

            diff_low = lowpass - lowpass_prev
            diff_high = highpass - highpass_prev
            if max(diff_low) >= 0.15 or min(diff_low) <= -0.15:
                changes[ix] = 1
            else: changes[ix] = 0
            #significant change?

            def doPlotting(name,yaxis):
                plt.plot(name)
                plt.xlim([mxm-80,mxm+100])
                plt.ylabel(yaxis)
                plt.gca().yaxis.set_major_locator(MaxNLocator(nbins=4))

            figure = plt.figure(fig)
            figure.subplots_adjust(hspace =.5)
            plt.suptitle('Comparison of Consecutive Profiles')
            plt.subplot(411); plt.plot(data_prev); \
                              doPlotting(data,'Data'); plt.ylim(ymax=1.1)
            plt.subplot(412); plt.plot(lowpass_prev); \
                              doPlotting(lowpass,'Lowpass'); plt.ylim(ymax=1.1)
            plt.subplot(413); plt.plot(highpass_prev); doPlotting(highpass,'Highpass')
            plt.subplot(414); doPlotting(diff_low,'Lowpass\nChange')
            plotname = 'differences_'+str(ix+1)+'_'+wav_name+'_'+str(num_levels)
            plt.savefig(dir+'/B0740-28/Plots/'+plotname)
            #creates plots of two most recent profiles + their decomposition 

            fig += 1
            ix += 1
            #clears the figure content
            #increase array index

            data_prev = data
            lowpass_prev = lowpass
            highpass_prev = highpass
            #reassigns 'previous profile' values

figure = plt.figure(fig)
plt.plot(changes)
plt.title('Lowpass Changes')
plt.xlabel('Profile Number')
plt.ylabel('Change > Threshold?')
plt.ylim(-0.25,1.25)
plt.xlim(0,48)
plt.savefig(dir+'/B0740-28/Plots/changes')
#Save lowpass changes plot 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:49:34.227

I'll probably get downvoted for this answer, but in the grand scheme of things, in this particular situation, I don't really see the problem with adding some global variables to your package.

Classes are great and useful when you have a bunch of functionality that you want to use in lots of different places, however, what you are describing sounds very specific and unlikely to be reused elsewhere. Creating a one-use class with instance variables isn't really very different to having a bunch of functions in a package with global variables.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:48:52.530

Something like this is what you want:

```
class MyDataProcessor(object):
    def __init__(self, data_array):
        self.data_array = data_array

    def processX(self):
        # do stuff with self.data_array

    def processY(self):
        # do stuff with self.data_array

m = MyDataProcessor([1, 2, 3, 4, 5])
m.processX()

n = MyDataProcessor([5, 4, 3, 2, 1])
n.processX() 
```

# install4j - install4j 服务在任务管理器中有 2 个进程？

> ID：13823258
> 
> 赞同：3
> 
> 时间：2012-12-11T15:39:30.800
> 
> 标签：install4j

从 install4j 4x 升级到 5.x 后，install4j 服务现在在任务管理器中为每个配置的服务有 2 个进程。Witn install4j4，每个服务的任务管理器都有一个进程。

其中一个大约是 1,500 K，另一个是我希望我们的应用程序使用的 (100+ MB)。服务以系统用户身份运行。

因此，对于名为“DataEngineService”的服务，任务管理器中有以下内容： DataEngineService.exe System 1,500K DataEngineService.exe System 123,432K

这与“特权提升”有关，是正常的，还是出乎意料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:21:23.360

这是故意的。一个进程不可能可靠地处理 JVM 关闭挂钩。在 install4j 4.x 中，有很多与 JVM 关闭挂钩相关的问题，现在在 install4j 5.x 中得到了解决。

# php - 你如何回显图像类型的输入标签并在codeigniter中加载图像？

> ID：13823259
> 
> 赞同：0
> 
> 时间：2012-12-11T15:39:30.740
> 
> 标签：php, codeigniter

我正在尝试回显图像类型的提交按钮输入标签，但我无法让它加载图像，它存储在我网站的 public_html 目录中名为 imgs 的目录中。我拥有的代码是这样的：

```
echo '<input type="image" src="'.base_url("img/sign_up_0.png").'">'; 
```

我已经自动加载了 url helper 并使用它以相同的方式在链接中加载图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:41:55.417

试试这个：

```
 $image_path = base_url()."imgs/sign_up_0.png";
 echo '<input type="image" src="'.$image_path.'">'; 
```

# python - 基于python中的int列对元组进行排序

> ID：13823261
> 
> 赞同：3
> 
> 时间：2012-12-11T15:39:35.110
> 
> 标签：python, sorting, int, tuples

我有以下元组：

```
['Southampton', '9', '14', '13']
['Nottingham Forest', '8', '10', '17']
['Coventry City', '7', '4', '14']
['Blackburn Rovers', '4', '6', '14']
['Newcastle United', '24', '20', '10']
['FC Wimbledon', '21', '20', '11']
['Arsenal', '21', '19', '8'] 
```

我想按第 2 列和第 3 列对其进行排序。所以我使用以下代码：

```
sorted_rank = sorted(temp_rank, key=itemgetter(1,2), reverse=True) 
```

但正如您所见，第 2 列和第 3 列不是 int，因此排序过程完成错误。我如何“告诉”python 这些列是 int 而不是 string？

我试过这个但没有：

```
sorted_rank = sorted(temp_rank, key=itemgetter(1,int(2)), reverse=True) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T15:46:34.167

您必须指定自定义函数或 lambda。

以下作品：

```
sorted_rank = sorted(temp_rank, key=lambda i: (int(i[1]), int(i[2])), reverse=True) 
```

`sorted_rank`变成：

```
[['Newcastle United', '24', '20', '10'],
 ['FC Wimbledon', '21', '20', '11'],
 ['Arsenal', '21', '19', '8'],
 ['Southampton', '9', '14', '13'],
 ['Nottingham Forest', '8', '10', '17'],
 ['Coventry City', '7', '4', '14'],
 ['Blackburn Rovers', '4', '6', '14']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:47:35.350

```
def key_fct(tup):
    return (int(tup[1]), int(tup[2]))

sorted_rank = sorted(temp_rank, key=key_fct, reverse=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:58:11.090

要了解为什么您尝试的方法不起作用，请确保您了解是什么`itemgetter(1, 2)`。首先，`itemgetter`是一个函数。但更重要的是，它是一个返回函数的函数，而返回的函数就是您用作排序的关键函数的函数。要了解为什么将字符串转换为整数的尝试不起作用，让我们实现一个`itemgetter`始终需要两个参数的版本：

```
def itemgetter(i, j):
    def fn(e):
        return (e[i], e[j])
    return fn 
```

用作键的是内部函数的返回值，`fn`. 您所做的是`j`转换为 int，而不是`e[j]`. 为此，您必须捕获 的结果`fn`，执行强制转换，然后返回结果：

```
def keyfunc(e):
    return tuple(int(x) for x in itemgetter(1, 2)(e)) 
```

然后你可以使用它正确地执行你的排序：

```
sorted_rank = sorted(temp_rank, key=keyfunc, reverse=True) 
```

# visual-studio - “从数据库更新模型”

> ID：13823262
> 
> 赞同：0
> 
> 时间：2012-12-11T15:39:37.290
> 
> 标签：visual-studio, entity-framework, visual-studio-2012

我正在使用 Visual Studio 并开发基于 MVC 的应用程序。我正在尝试将一些表格添加到我的模型中。我使用了“从数据库更新模型”选项。新表出现在我的 edmx 文件中。我已经重建了我的解决方案，但是缺少新表的类。每次我想添加新表时，有什么技巧可以生成类吗？还是我必须手动完成？当我将“代码生成策略”设置为“默认”时，我收到了数百个与此类似的错误`Error 117 The type 'Mvc4.Models.DPR_MM' already contains a definition for 'DPR_TS'`。
我已经删除了整个模型。在搜索整个解决方案时，`DPR_MM`我得到了以下结果：查找所有“DPR_MM”、子文件夹、查找结果 1、整个解决方案、“”

```
 C:\\Mvc4\Controllers\HomeController.cs(41):                    var DPR_MM = from d in ctx.DPR_MM
  C:\\Mvc4\Controllers\HomeController.cs(45):                    var arr = new object[DPR_MM.Count()];
  C:\\Mvc4\Controllers\HomeController.cs(47):                    foreach (var d in DPR_MM)
  C:\\Mvc4\Models\Model1.edmx(9):          <EntitySet Name="DPR_MM" EntityType="Model.Store.DPR_MM" store:Type="Tables" Schema="QF" />
  C:\\Mvc4\Models\Model1.edmx(45):        <EntityType Name="DPR_MM">
  C:\\Mvc4\Models\Model1.edmx(366):          <EntitySet Name="DPR_MM" EntityType="Model.DPR_MM" />
  C:\\Mvc4\Models\Model1.edmx(389):        <EntityType Name="DPR_MM">
  C:\\Mvc4\Models\Model1.edmx(715):          <EntitySetMapping Name="DPR_MM">
  C:\\Mvc4\Models\Model1.edmx(716):            <EntityTypeMapping TypeName="Model.DPR_MM">
  C:\\Mvc4\Models\Model1.edmx(717):              <MappingFragment StoreEntitySet="DPR_MM">
  C:\\Mvc4\Models\Model1.edmx.diagram(8):        <EntityTypeShape EntityType="Model.DPR_MM" Width="1.5" PointX="0.75" PointY="0.75" IsExpanded="true" />
  Matching lines: 11    Matching files: 3    Total files searched: 168 
```

所以我没有看到任何 DPR_MM 类。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:53:09.493

**编辑**

既然我知道您遇到了错误，请查看生成的代码（您甚至可以对您的类 DPR_MM 进行解决方案搜索以查找该类的所有实例）。我猜你的项目中有一个类 Mvc4.Models.DPR_MM 已经将 DPR_TS 作为成员，并且代码生成会看到它并且不会生成另一个类，如下所示：

```
public partial class DPR_MM : EntityObject
{
    public global::System.Int32 DPR_TS
    {
    ...
    }
}

public partial class DPR_MM : EntityObject
{
    //maybe code generation fails because it doesn't want to do this a second time knowing it would be ambiguous 
    public global::System.Int32 DPR_TS  
    {
    ...
    }
} 
```

除非存在某些数据库或命名空间问题，否则您应该始终能够生成新模型，因此请确保您没有像 @Mamu 所说的那样放置额外的文件。或者你可以谷歌它：
[首先点击](https://stackoverflow.com/questions/1427703/350-errors-the-type-blah-blah-blah-already-contains-a-definition)
[另一个答案](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/6aca0a29-b40b-491c-912c-13694a430c4a/)

**初步答案**

做一个构建。然后，您应该根据“从数据库更新模型”时选择的表查看所有新类（显然，“从数据库更新模型”时必须选择新表）

# php - 可以在页面上加载 html 后设置 cookie 值吗？

> ID：13823265
> 
> 赞同：2
> 
> 时间：2012-12-11T15:39:58.607
> 
> 标签：php, html, cookies

我读到可以在将 HTML 内容从 PHP 脚本发送到 Web 服务器后设置 cookie 值。

但是，在处理这个问题时，我无法像我希望的那样设置 cookie。有人可以纠正我的差异吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:45:00.087

PHP 只能在发送页面标题时（即在发送内容 - HTML 之前）设置 cookie。这就是[HTTP 协议关于 cookie](https://en.wikipedia.org/wiki/HTTP_cookie#Setting_a_cookie)的工作方式，服务器可以向浏览器发送请求以存储 cookie。

如果您希望在页面加载后添加 cookie，您可以通过 JavaScript 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:44:29.993

[您可以设置一个 javascript cookie（使用jQuery 插件](http://www.electrictoolbox.com/jquery-cookies/)有点简单）——或者通过 AJAX 向 php 脚本发送一个值，然后让它设置 cookie。或者最好的选择，您可以在 PHP 级别使用会话而不是 cookie。取决于您的应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T15:48:34.913

I'm guessing you haven't [RTM](http://php.net/setcookie) because if you had you would of seen this:

> setcookie() defines a cookie to be sent along with the rest of the HTTP headers. Like other headers, cookies must be sent before any output from your script (this is a protocol restriction). This requires that you place calls to this function prior to any output, including and tags as well as any whitespace.

But more importantly in your case, this:

> Note:
> 
> You can use output buffering to send output prior to the call of this function, with the overhead of all of your output to the browser being buffered in the server until you send it. You can do this by calling ob_start() and ob_end_flush() in your script

# c# - app.config 中的 wcf 配置和硬编码

> ID：13823266
> 
> 赞同：1
> 
> 时间：2012-12-11T15:40:00.527
> 
> 标签：c#, .net, wcf

> **可能重复：**
> [WCF 服务：app.config 与属性或两者的混合](https://stackoverflow.com/questions/6761105/wcf-service-app-config-versus-attributes-or-a-mixture-of-both)

我可以用 app.config 配置覆盖硬编码配置吗？

例如，我有这个硬编码配置：

```
[ServiceBehavior(TransactionTimeout = "00:02:00")]
public class DateTimeService : IDateTimeService
{
    //....
} 
```

我想用 app.config 配置覆盖它，如下所示：

```
<serviceBehaviors >
    <behavior name ="DateTimeService_serviceBehavior">
      <serviceTimeouts transactionTimeout ="00:01:00"/>
    </behavior>
  </serviceBehaviors> 
```

可能吗 ？另外，如果元素不同，是否可以合并这些配置？

# javascript - Flowplayer 5.2：如何从事件绑定中获取时间？

> ID：13823267
> 
> 赞同：0
> 
> 时间：2012-12-11T15:40:00.297
> 
> 标签：javascript, jquery, flowplayer

我正在使用 jQuery 将事件侦听器绑定到 Flowplayer 5.2 视频，如下所示：

```
$(document).ready(function() {

    $(".flowplayer").each (function() {
        console.log("Got a flowplayer: " + $(this));
        $(this).bind("ready", function(event, api) {
            console.log("Flowplayer ready");
        }).bind("pause", function(event, api) {
            console.log("Flowplayer pause");
            var time = {?}.getTime();
            console.log("Time: " + time);
        });
     });
}); 
```

我想在发生暂停等事件时获取视频的当前时间/持续时间。上面代码中的应该`${?}`用什么替换？

我尝试用 , , 替换上面代码`{$}`中的，但这些都不起作用。我想知道是否可以从回调函数中的or参数中获取它，但我想我会问而不是随机尝试访问不存在的参数。`$(this)``$(this).getClip()``$f(0)``$f()``event``api`

我一直在研究我能找到的所有 Flowplayer 文档，但我还没有看到如何从绑定的事件处理程序中执行此操作（除非您使用自定义配置并在配置时绑定事件，如此处[所示](http://flash.flowplayer.org/demos/events/google-analytics.html)） .

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:41:49.400

`var time = api.video.time`

[http://flowplayer.org/docs/api.html#video-object](http://flowplayer.org/docs/api.html#video-object)

`console.debug(api.video)`帮我找到了...

# iphone - iphone 发布与测试

> ID：13823269
> 
> 赞同：1
> 
> 时间：2012-12-11T15:40:07.743
> 
> 标签：iphone, ios, testflight

我在通过 testflight 发布测试版本时遇到问题。我的应用程序在模拟器和设备上（通过 xcode）运行良好，但是当通过 TestFlight 测试应用程序时，我得到不同的行为，有时甚至崩溃。一切都发生在同一台设备上。iPhone 4 iOS 5.1 问题之一是 iCarousel 中没有显示图像。后来经过一些调试，我意识到这是由于声明为“弱”而不是“强”的属性在某些操作后丢失了引用。问题是......为什么这只会发生在通过 Testflight 的 ipa 上，而不会发生在模拟器或连接的设备中？你有没有遇到过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:10:17.840

首先下载崩溃日志并在此处发布详细信息。

SO中有很多关于如何获取和解释它们的帖子。例如[，符号化 iPhone 应用程序崩溃报告](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)

# c# - 继承设计审查

> ID：13823271
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:40:12.900
> 
> 标签：c#

我正在构建打开 Wireshark 服务的应用程序（Wireshark 有几个服务），以便对 Wireshark 文件进行不同的操作，例如编辑、更改格式、统计信息等...每个选项通常使用不同的服务，所以我想用继承来构建我的类想知道我想做的是适当的方式还是适当的方式：

具有以下成员和方法的主类 WiresharkServices： **这是所有其他类都应继承的类**

```
public class WiresharkProcesses
{
    protected string _filePath; //the file path who send to Wiresahrk process
    protected string _capinfos;
    protected string _dumpcap;
    protected string _editcap;
    protected string _mergecap;
    protected string _rawshark;
    protected string _text2pcap;
    protected string _tshark;
    protected string _wireshark;

    public void initializeServices()
    {
        if (Directory.Exists(@"C:\Program Files (x86)\Wireshark"))
        {
            _capinfos = @"C:\Program Files (x86)\Wireshark\_capinfos.exe";
            _dumpcap = @"C:\Program Files (x86)\Wireshark\_dumpcap.exe";
            _editcap = @"C:\Program Files (x86)\Wireshark\editcap.exe";
            _mergecap = @"C:\Program Files (x86)\Wireshark\_mergecap.exe";
            _rawshark = @"C:\Program Files (x86)\Wireshark\_rawshark.exe";
            _text2pcap = @"C:\Program Files (x86)\Wireshark\_text2pcap.exe";
            _tshark = @"C:\Program Files (x86)\Wireshark\_tshark.exe";
            _wireshark = @"C:\Program Files (x86)\Wireshark\_wireshark.exe";
        }
        else if (Directory.Exists(@"C:\Program Files\Wireshark"))
        {
            _capinfos = @"C:\Program File)\Wireshark\_capinfos.exe";
            _dumpcap = @"C:\Program Files\Wireshark\_dumpcap.exe";
            _editcap = @"C:\Program Files\Wireshark\editcap.exe";
            _mergecap = @"C:\Program Files\Wireshark\_mergecap.exe";
            _rawshark = @"C:\Program Files\Wireshark\_rawshark.exe";
            _text2pcap = @"C:\Program Files\Wireshark\_text2pcap.exe";
            _tshark = @"C:\Program Files\Wireshark\_tshark.exe";
            _wireshark = @"C:\Program Files\Wireshark\_wireshark.exe";
        }
    }
} 
```

当应用程序运行时，我当然会检查机器上是否安装了 Wireshark，如果没有抛出异常并且在 Wireshark 中存在：

```
WiresharkServices wservices = new WiresharkServices();
wservices .initializeServices(); 
```

并且在每个类中都有自己的方法。

接收文件路径以将其转换为其他 Wireshark 格式的子类示例：

```
public class Editcap : WiresharkProcesses
{
    private string _newFileName;

public void startProcess(string filePath)
{
    FileInfo file = new FileInfo(filePath);
    _newFileName = file.FullName.Replace(file.Extension, "_new") + ".pcap";
    ProcessStartInfo editcapProcess = new ProcessStartInfo(string.Format("\"{0}\"", _editcap))
    {
        Arguments = string.Format("{2}{0}{2} -F libpcap {2}{1}{2}", file.FullName, _newFileName, "\""),
        WindowStyle = ProcessWindowStyle.Hidden,
        RedirectStandardOutput = true,
        RedirectStandardError = true,
        CreateNoWindow = true,
        UseShellExecute = false,
        ErrorDialog = false
    };

    using (Process editcap = Process.Start(editcapProcess))
    {
        editcap.WaitForExit();
    }
}

public string getNewFileName()
{
    return _newFileName;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:16:54.217

```
public void initializeServices()
{
    string programFilesDirectory = "";

    if (Directory.Exists(@"C:\Program Files (x86)\Wireshark"))
        programFilesDirectory = @"C:\Program Files (x86)\";

    else if (Directory.Exists(@"C:\Program Files\Wireshark"))
        programFilesDirectory = @"C:\Program Files\";

    _capinfos = programFilesDirectory + @"_capinfos.exe";
    _dumpcap = programFilesDirectory + @"_dumpcap.exe";
    _editcap = programFilesDirectory + @"editcap.exe";
    _mergecap = programFilesDirectory + @"_mergecap.exe";
    _rawshark = programFilesDirectory + @"_rawshark.exe";
    _text2pcap = programFilesDirectory + @"_text2pcap.exe";
    _tshark = programFilesDirectory + @"_tshark.exe";
    _wireshark = programFilesDirectory + @"_wireshark.exe"; 
```

改变它开始...

# python - 用python求解联立多元多项式方程

> ID：13823275
> 
> 赞同：6
> 
> 时间：2012-12-11T15:40:21.940
> 
> 标签：python, math, scipy, polynomial-math, sympy

*编辑：我得到我的方程式的参考包含几个错误。我已经在这里修好了。解决方案现在可能真的有意义了！*

当两层流体流过地形时，根据流体中流速和波速的相对大小，存在许多不同的解决方案。

![临界流](../Images/e0c3bc0e8582c41bcc1f60a5ff1f3ab9.png)

这些被称为“超临界”、“亚临界”和“临界”（我在这里将前两个称为“超临界”）。

以下方程定义了 (h, U0) 参数空间中临界和超临界行为之间的边界线：

![eq1](../Images/0c35e325fcc42063c26d4c05ebe0c931.png)

![eq2](../Images/3ac392e0e3640718389b722400ded18c.png)

我想消除`d_1c`（即我不在乎它是什么）并在`(h, U_0)`.

简化因素：

*   我只需要给*定的答案* `d_0`
*   *我不需要精确的解决方案*，只需要解决方案曲线的轮廓，因此可以通过解析或数值方式解决。
*   我只想绘制区域 (h, U0) = (0,0) 到 (0.5, 1)。

我想使用 Enthought 发行版中提供的模块（numpy、scipy、sympy）来解决这个问题，但真的不知道从哪里开始。真正让我困惑的是变量 d1c 的消除。

以下是python中的方程式：

```
def eq1(h, U0, d1c, d0=0.1):
    f = (U0) ** 2 * ((d0 ** 2 / d1c ** 3) + (1 - d0) ** 2 / (1 - d1c - d0) ** 3) - 1
    return f

def eq2(h, U0, d1c, d0=0.1):
    f = 0.5 * (U0) ** 2 * ((d0 ** 2 / d1c ** 2) - (1 - d0) ** 2 / (1 - d1c - d0) ** 2) + d1c + (h - d_0)
    return f 
```

我期待一个具有许多解决方案分支的解决方案（并不总是物理的，但不要担心）并且看起来大致如下：

![关键制度图](../Images/9c8a0772d4cb63e19bbb8081db349fe0.png)

我该如何实施呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:51:17.000

半正式地，您要解决的问题如下：给定 d0，求解逻辑公式“存在 d1c 使得 eq1(h, U0, d1c, d0) = eq2(h, U0, d1c, d0) = 0" 用于 h 和 U0。

有一种算法可以将公式简化为多项式方程“P(h, U0) = 0”，称为“量词消除”，它通常依赖于另一种算法“圆柱代数分解”。不幸的是，这还没有在 sympy 中实现。

然而，由于 U0 很容易被消除，所以你可以用 sympy 做一些事情来找到你的答案。从...开始

```
h, U0, d1c, d0 = symbols('h, U0, d1c, d0')
f1 = (U0) ** 2 * ((d0 ** 2 / d1c ** 3) + (1 - d0) ** 2 / (1 - d1c - d0 * h) ** 3) - 1
f2 = U0**2 / 2 * ((d0 ** 2 / d1c ** 2) + (1 - d0) ** 2 / (1 - d1c - d0 * h)) + d1c + d0 * (h - 1) 
```

现在，从 f1 中删除 U0 并将值插入 f2 （我是“手动”而不是使用 solve() 来获得更漂亮的表达式）：

```
U2_val = ((f1 + 1)/U0**2)**-1
f3 = f2.subs(U0**2, U2_val) 
```

f3 仅取决于 h 和 d1c。此外，由于它是一个有理分数，我们只关心它的分子何时变为 0，因此我们得到一个包含 2 个变量的多项式方程：

```
p3 = fraction(cancel(f3)) 
```

现在，对于给定的 d0，您应该能够以数字方式反转 p3.subs(d0, .1) 以获得 h(d1c)，将其插入 U0 并制作 (h, U0) 作为函数的参数图d1c。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T19:21:00.687

让我先处理消除`d1c`。想象一下，你设法按摩了第一个方程得到了形式`d1c = f(U, h, d0)`。`U`然后你可以把它代入第二个等式，并且在`h`和之间有一定的关系`d0`。使用固定，这为两个变量和`d0`定义了一个方程，原则上您可以从中找到任何给定的。根据您最后的草图，这似乎就是您所说的解决方案。坏消息是，从你的任何一个方程中都不容易得到。好消息是您不需要这样做。`U``h``U``h``d1c`

`fsolve`可以采用一个方程组，比如两个方程，它们依赖于两个变量并给你解决方案。在这种情况下：修复`h`（`d0`已修复），并提供给`fsolve`您拥有的系统，将其视为变量`U0`和`d1c`. 记录 的值`U0`，重复 的下一个值`h`，依此类推。

请注意，与@duffymo 的建议相反，我建议使用`fsolve`，或者，至少从它开始，并且只有在它耗尽时才寻找其他求解器。

`U0`一个可能的警告是，您期望对于given有多个解决方案`h`：`fsolve`需要一个初始猜测，并且没有简单的方法可以告诉它收敛到一个解决方案分支。如果这被证明是一个问题，请查看`brentq`求解器。

另一种方法是观察您可以轻松地`U0`从系统中消除。这样，您将获得`h`和的单个方程，对的每个值`d1c`求解，然后使用您的任一原始方程来计算给定的和。`d1c``h``U0``d1c``h`

使用示例`fsolve`：

```
>>> from scipy.optimize import fsolve
>>> def f(x, p):
...   return x**2 -p
... 
>>> fsolve(f, 0.5, args=(2,))
array([ 1.41421356])
>>> 
```

这`args=(2,)`是告诉`fsolve`您实际想要解决的问题的语法，如果`f(x,2)=0`，并且`0.5`是 的值的开始猜测`x`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:59:22.110

您可以使用 Newton Raphson 或 BFGS 等非线性求解器来求解联立的非线性方程。它们对基质的起始条件和调节很敏感，因此需要注意。

# php - 在不使用中间变量的情况下访问 PHP 变量字段名称

> ID：13823276
> 
> 赞同：0
> 
> 时间：2012-12-11T15:40:21.343
> 
> 标签：php

> **可能重复：**
> [通过字符串获取 PHP 类属性](https://stackoverflow.com/questions/804850/get-php-class-property-by-string)

有没有更清洁的方法来做到这一点？它不编译

```
$object1->name = 'my_name';
$object1->address = 'address';
$object2->somefield->($object1->name) = $object1; 
```

只有当我分配给另一个变量 $object1->name 时它才有效

```
$object1->name = 'my_name';
$object1->address = 'address';
$temp = $object1->name;
$object2->somefield->$temp = $object1; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:41:39.850

试试这个：

```
$object2->somefield->{$object1->name} = $object1; 
```

# java - 为什么每次使用 Array 都会增加 2？

> ID：13823278
> 
> 赞同：-2
> 
> 时间：2012-12-11T15:40:25.920
> 
> 标签：java

有个小问题想请教各位。试图教她阵列，并试图弄清楚它的工作方式等。但我有一个小问题：

```
int [] array1 = new int[10];

for (int index = 0; index < array1.length; index++) {
            array1[index]++;
            System.out.println(array1[index]);
        } 
```

有了这个 for 循环。为什么数组每个元素都增加 2？我的意思是，我知道这个问题的答案是：2,4,6,8,10,12,14,16,18,20 但为什么每个元素都会增加 2？

为什么不是从0开始，每次加1？

编辑：

呸，谢谢各位。在我发布这个之前，我忘记了一些重要的事情。我误解了。

在我发布这个 for 循环之前，我有另一个 for 循环。

```
for (int index = 0; index < array1.length; index++) {
        array1[index] = 2 * index + 1;

    } 
```

所以我现在知道为什么循环正在增加它的方式。谢谢你的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:43:39.383

它没有理由增加 1。

我刚刚测试了你的代码，输出是

```
1 1 1 1 
```

因为每个元素都初始化为0，然后递增

（还要注意我做了初始化。否则没有变化）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:45:46.470

如果我跑

```
 int[] array1 = new int[10];

    System.out.println("Before loop: "+Arrays.toString(array1));
    for (int index = 0; index < array1.length; index++) {
        array1[index]++;
        System.out.println(array1[index]);
    }
    System.out.println("After loop: "+Arrays.toString(array1)); 
```

它打印

```
Before loop: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
1
1
1
1
1
1
1
1
1
1
After loop: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1] 
```

> 我知道这个问题的答案是：2,4,6,8,10,12,14,16,18,20

这表明您错误地复制了问题。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:47:25.493

去除

```
array1[index]++; 
```

它应该可以工作。

# drupal - 编辑具有过滤的 HTML 权限的完整 HTML 节点

> ID：13823281
> 
> 赞同：0
> 
> 时间：2012-12-11T15:40:31.007
> 
> 标签：drupal, drupal-6

我遇到了一个奇怪的问题，其中我有一个以完整 HTML 输入格式保存的现有节点。然后我有一个只允许使用过滤 HTML 的用户。当所述用户登录并编辑节点时，他仍然可以看到所见即所得的完整 HTML 按钮。我已经配置了不同的所见即所得配置文件，所以我期待普通用户只过滤 html。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:22:33.007

您是否检查过您在所见即所得下创建的所有配置文件？确保用户的角色未在除预期角色之外的任何其他配置文件中选择。

# css - 下拉菜单宽度排列

> ID：13823284
> 
> 赞同：1
> 
> 时间：2012-12-11T15:40:36.237
> 
> 标签：css, drop-down-menu, menu

我有一个宽度为 990px​​ 的站点可以查看[Click Here](http://www.fedri.com/bh/)。只是我安装了一个多层下拉菜单。如果你在这个网站上看到我在下拉菜单上有 6 个类别，然后是一个空白区域。我希望所有类别都完全排列，没有空间。

我的CSS代码是

```
 /* Page */
body,html,div,blockquote,img,label,p,h1,h2,h3,h4,h5,h6,pre,ul,ol,li,dl,dt,dd,form,a,fieldset,input,th,td{border:0;outline:none;margin:0;padding:0;}
ul{list-style:none;}

body {font: normal 13px Arial, sans-serif;}
h2 {font: normal 26px Arial, sans-serif; padding: 20px 0; margin: 0 0 30px 0;}
.wrap {width: 990px; margin: 0 auto;}
.demo-container {padding: 0 0;}
.demo-container h4 {font-size: 14px; margin: 0 0 5px 0;}

/* Mega Menu Styles */
.mega-menu ul, .mega-menu ul li {list-style: none;}
.mega-menu ul {position: relative; padding: 0; margin: 0;}
.mega-menu ul li ul {display: none;}
.mega-menu .sub {display: none;}
.mega-menu .sub ul {display: block;}

#mega-menu-1 {
font: normal 13px Arial, sans-serif; 
list-style: none; 
position: relative; 
padding: 0; 
margin: 0;
}
#mega-menu-1 .sub ul {
display: block;
}
#mega-menu-1 {
background: #222; 
width: 100%; 
height: 40px;
position: relative;
}
#mega-menu-1 li {
float: left; 
margin: 0; 
padding: 0; 
font-weight: bold;
}
#mega-menu-1 li a {
float: left; 
display: block; 
color: #fff; 
padding: 12px 25px; 
background: #222; 
text-decoration: none;
}
#mega-menu-1 li.mega-hover a, #mega-menu-1 li.mega-hover a:hover {
background: #CCC; 
color: #000;
}
#mega-menu-1 li a:hover {
background: #999; 
color: #000;
}
#mega-menu-1 li .sub-container {
position: absolute;
}
#mega-menu-1 li .sub {
background: #efefef; 
padding: 15px; 
border: 1px solid #ccc;
}
#mega-menu-1 li .sub .row {
width: 100%; 
overflow: hidden;
clear: both;
}
#mega-menu-1 li .sub li {
list-style: none; 
float: none; 
width: 170px; 
font-size: 1em; 
font-weight: normal;
}
#mega-menu-1 li .sub li.mega-hdr {
margin: 0 10px 10px 0; 
float: left;
}
#mega-menu-1 li .sub li.mega-hdr.last {
margin-right: 0;
}
#mega-menu-1 li .sub a {
background: none; 
color: #111; 
padding: 7px 10px; 
display: block; 
float: none; 
font-size: 0.9em;
}
#mega-menu-1 li .sub li.mega-hdr a.mega-hdr-a {
padding: 5px 15px; 
margin-bottom: 5px; 
background: #6B6B6B; 
text-transform: uppercase; 
font-weight: bold; 
color: #fff;
}
#mega-menu-1 li .sub li.mega-hdr a.mega-hdr-a:hover {
color: #000;
}
#mega-menu-1 .sub li.mega-hdr li a {
padding: 4px 5px; 
font-weight: normal;
}
#mega-menu-1 .sub li.mega-hdr li a:hover {
color: #a32403; 
background: #efefef;
}
#mega-menu-1 .sub ul li {
padding-right: 0;
}
#mega-menu-1 li .sub-container.non-mega .sub {
padding: 10px;
}
#mega-menu-1 li .sub-container.non-mega li {
padding: 0; 
width: 190px; 
margin: 0;
}
#mega-menu-1 li .sub-container.non-mega li a {
padding: 7px 5px 7px 22px;
}
#mega-menu-1 li .sub-container.non-mega li a:hover {
color: #a32403; 
background: #efefef;
} 
```

我有另一个名为 green.css 的文件，代码如下

```
.mega-menu ul, .mega-menu ul li {list-style: none;}
.mega-menu ul {position: relative; padding: 0; margin: 0;}
.mega-menu ul li ul {display: none;}
.mega-menu .sub {display: none;}
.mega-menu .sub ul {display: block;}

.green {font: normal 13px Arial, sans-serif; line-height: 16px;}
.green ul.mega-menu, .green ul.mega-menu, .green ul.mega-menu li {margin: 0; padding: 0; border: none;}
.green ul.mega-menu {background: #222 url(images/bg_green.png) repeat-x 0 -80px; width: 100%; height: 40px; border-right: 1px solid #44b3ff; border-left: 1px solid #44b3ff; position: relative;}
.green ul.mega-menu li {float: left; margin: 0; padding: 0; font-size: 13px; font-weight: bold;}
.green ul.mega-menu li a {float: left; display: block; color: #000; padding: 12px 38px 12px 25px; background: url(images/bg_green.png) repeat-x 100% 0; text-shadow: 1px 1px 1px #fff; text-decoration: none;}
.green ul.mega-menu li a.dc-mega {position: relative;}
.green ul.mega-menu li a .dc-mega-icon {display: block; position: absolute; width: 8px; height: 6px;  top: 18px; right: 15px; background: url(images/arrow.png) no-repeat 0 100%;}
.green ul.mega-menu li.mega-hover a, .green ul.mega-menu li a:hover {background-position: 100% -40px; color: #000; text-shadow: none;}
.green ul.mega-menu li.mega-hover a .dc-mega-icon {background-position: 0 100%;}
.green ul.mega-menu li .sub-container {position: absolute; background: url(images/bg_sub_left.png) no-repeat 0 100%; padding-left: 20px; margin-left: -3px;}
.green ul.mega-menu li .sub {background: url(images/bg_sub.png) no-repeat 100% 100%; padding: 20px 20px 20px 10px;}
.green ul.mega-menu li .sub-container.mega .sub {padding: 20px 20px 10px 0;}
.green ul.mega-menu li .sub .row {width: 100%; overflow: hidden; clear: both;}
.green ul.mega-menu li .sub li {list-style: none; float: none; width: 170px; font-size: 1em; font-weight: normal;}
.green ul.mega-menu li .sub li.mega-hdr {margin: 0 10px 10px 0; float: left;}
.green ul.mega-menu li .sub li.mega-hdr.last {margin-right: 0;}
.green ul.mega-menu li .sub a {background: none; border: none; text-shadow: none; color: #111; padding: 7px 10px; display: block; float: none; text-decoration: none; font-size: 0.9em;}
.green ul.mega-menu li .sub li.mega-hdr a.mega-hdr-a {padding: 5px 5px 5px 15px; margin-bottom: 5px; background: #4EC3F3 url(images/bg_mega_hdr.png) no-repeat 0 0; text-transform: uppercase; font-weight: bold; color: #000; text-shadow: 1px 1px 1px #fff;}
.green ul.mega-menu li .sub li.mega-hdr a.mega-hdr-a:hover {color: #fff; text-shadow: none;}
.green ul.mega-menu .sub li.mega-hdr li a {padding: 4px 5px 4px 20px; background: url(images/arrow_off.png) no-repeat 5px 8px; font-weight: normal;}
.green ul.mega-menu .sub li.mega-hdr li a:hover {color: #a32403; background: #efefef url(images/arrow_on.png) no-repeat 5px 8px;}
.green ul.mega-menu .sub ul li {padding-right: 0;}
.green ul.mega-menu li .sub-container.non-mega .sub {padding: 20px 20px 20px 0;}
.green ul.mega-menu li .sub-container.non-mega li {padding: 0; width: 190px; margin: 0;}
.green ul.mega-menu li .sub-container.non-mega li a {padding: 7px 5px 7px 22px; background: url(images/arrow_off.png) no-repeat 7px 10px;}
.green ul.mega-menu li .sub-container.non-mega li a:hover {color: #a32403; background: #efefef url(images/arrow_on.png) no-repeat 7px 10px;} 
```

请建议我如何解决这个问题..谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:03:23.547

```
.green ul.mega-menu li a {
float: left;
display: block;
color: black;
padding: 12px 38px 12px 25px;
background: url(images/bg_green.png) repeat-x 100% 0;
text-shadow: 1px 1px 1px white;
text-decoration: none;
width: 102px;
text-align: center;
} 
```

而不是你已经拥有的

然后是一个小的 jquery 插件来删除最后一个拆分器

```
$('.green ul.mega-menu li:last-child a').css('background','none'); 
```

**编辑**以获得更好看的按钮

```
.green ul.mega-menu li a .dc-mega-icon {
display: block;
position: absolute;
width: 8px;
height: 6px;
top: 18px;
right: 12%;
background: url(images/arrow.png) no-repeat 0 100%;
} 
```

**编辑回复使用以下 css**

```
.green {font: normal 13px Arial, sans-serif; line-height: 16px;}
.green ul.mega-menu, .green ul.mega-menu, .green ul.mega-menu li {margin: 0; padding: 0; border: none;}
.green ul.mega-menu {background: #222 url(images/bg_green.png) repeat-x 0 -80px; width: 100%; height: 40px; border-right: 1px solid #44b3ff; border-left: 1px solid #44b3ff; position: relative;}
.green ul.mega-menu li {float: left; margin: 0; padding: 0; font-size: 13px; font-weight: bold;}
.green ul.mega-menu li a {float: left; display: block; color: black; padding: 12px 38px 12px 25px; background: url(images/bg_green.png) repeat-x 100% 0; text-shadow: 1px 1px 1px white; text-decoration: none; width: 102px; text-align: center;}
.green ul.mega-menu li a.dc-mega {position: relative;}
.green ul.mega-menu li a .dc-mega-icon {display: block; position: absolute; width: 8px; height: 6px; top: 18px; right: 12%; background: url(images/arrow.png) no-repeat 0 100%;}
.green ul.mega-menu li.mega-hover a, .green ul.mega-menu li a:hover {background-position: 100% -40px; color: #000; text-shadow: none;}
.green ul.mega-menu li.mega-hover a .dc-mega-icon {background-position: 0 100%;}
.green ul.mega-menu li .sub-container {position: absolute; background: url(images/bg_sub_left.png) no-repeat 0 100%; padding-left: 20px; margin-left: -3px;}
.green ul.mega-menu li .sub {background: url(images/bg_sub.png) no-repeat 100% 100%; padding: 20px 20px 20px 10px;}
.green ul.mega-menu li .sub-container.mega .sub {padding: 20px 20px 10px 0;}
.green ul.mega-menu li .sub .row {width: 100%; overflow: hidden; clear: both;}
.green ul.mega-menu li .sub li {list-style: none; float: none; width: 170px; font-size: 1em; font-weight: normal;}
.green ul.mega-menu li .sub li.mega-hdr {margin: 0 10px 10px 0; float: left;}
.green ul.mega-menu li .sub li.mega-hdr.last {margin-right: 0;}
.green ul.mega-menu li .sub a {background: none; border: none; text-shadow: none; color: #111; padding: 7px 10px; display: block; float: none; text-decoration: none; font-size: 0.9em;}
.green ul.mega-menu li .sub li.mega-hdr a.mega-hdr-a {padding: 5px 5px 5px 15px; margin-bottom: 5px; background: #4EC3F3 url(images/bg_mega_hdr.png) no-repeat 0 0; text-transform: uppercase; font-weight: bold; color: #000; text-shadow: 1px 1px 1px #fff;}
.green ul.mega-menu li .sub li.mega-hdr a.mega-hdr-a:hover {color: #fff; text-shadow: none;}
.green ul.mega-menu .sub li.mega-hdr li a {padding: 4px 5px 4px 20px; background: url(images/arrow_off.png) no-repeat 5px 8px; font-weight: normal;}
.green ul.mega-menu .sub li.mega-hdr li a:hover {color: #a32403; background: #efefef url(images/arrow_on.png) no-repeat 5px 8px;}
.green ul.mega-menu .sub ul li {padding-right: 0;}
.green ul.mega-menu li .sub-container.non-mega .sub {padding: 20px 20px 20px 0;}
.green ul.mega-menu li .sub-container.non-mega li {padding: 0; width: 190px; margin: 0;}
.green ul.mega-menu li .sub-container.non-mega li a {padding: 7px 5px 7px 22px; background: url(images/arrow_off.png) no-repeat 7px 10px;}
.green ul.mega-menu li .sub-container.non-mega li a:hover {color: #a32403; background: #efefef url(images/arrow_on.png) no-repeat 7px 10px;} 
```

![它应该看起来如何的图像](../Images/8d01c9a82d678a8b1ccdf4409777613e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:43:56.217

你可以加

```
display: table; 
```

到 ul 和

```
display: table-cell; 
```

到 lis 而不是浮动。

这将导致类似：

```
.green ul.mega-menu {
    display: table;
}
.green ul.mega-menu li {
    display: table-cell;
    float: none;
} 
```

BTW：你真的认为选框是个好主意吗？

# python - Python上“def”后面的字符串是什么？（不是文档字符串）

> ID：13823290
> 
> 赞同：3
> 
> 时间：2012-12-11T15:40:48.227
> 
> 标签：python, python-2.7, docstring

我正在 Udacity 上观看 CS262 的视频，我对这种程序定义感到困惑：

```
def t_WORD(token):
    r'[^ <>]+' # any reg. exp. ruleset is placed here
    # ... more processing
    # ... more processing
    return token 
```

此代码使用库 ply (.lex)

我有一些 Python 经验和知识，但是我对过程定义行之后的第一行感到很困惑。

Python 解释器如何使用、解释或访问该字符串（reg. exp. string）？它只是一个未分配的字符串，没有指向它的变量。

我已经完成了通常的 Google 和 SO 搜索，但找不到它实际上是什么。

预先感谢您的所有答案和解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:41:38.517

该字符串是文档字符串，可作为`t_WORD.__doc__`. PLY 库使用它来为函数分配规则。

在这种情况下，PLY 将文档字符串用于自己的目的。字符串被分配给`__doc__`属性，任何人都可以读取该字符串。在这种情况下，PLY 使用它来构造解析器。

# android-intent - BlackBerry Android Runtime 上不支持的 Intent

> ID：13823295
> 
> 赞同：1
> 
> 时间：2012-12-11T15:40:58.530
> 
> 标签：android-intent, blackberry-10, blackberry-android

我正在将一个应用程序转换为 Android 运行时，但是我的一些 Intent 操作不起作用，LogCat 上没有显示错误/异常。我可以看到我的 onSaveInstanceState 代码正在运行，就好像 Activity 被暂停一样，但什么也没出现。当使用 IntentChooser 时，我可以在日志中看到：“invoking onCreate() for Activity com.android.internal.app.ChooserActivity”，但是在 PlayBook 上，没有任何反应。在 BB10 模拟器上，出现了选择器（即带有消息和 SMS 选项），但单击它们时没有任何反应。这些应该工作吗？可能有什么问题？文档没有提到任何这些限制：http: [//developer.blackberry.com/android/apisupport/](http://developer.blackberry.com/android/apisupport/)

```
working:
new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI) - (contact picker)
new Intent(MediaStore.ACTION_IMAGE_CAPTURE) - (camera pick image)

not working:
new Intent(android.content.Intent.ACTION_SEND) - (send e-mail)
new Intent(Intent.ACTION_GET_CONTENT) - (pick media from device)
new Intent(Intent.ACTION_VIEW) - (file/document preview)
new Intent(Intent.ACTION_CALL) - (calling phone number - have proper permissions)

Calling them with either below yields same results.
context.startActivity(intent)
context.startActivity(Intent.createChooser(intent)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:56:16.393

实际上它已经提到了一些你正在使用的 Intent 是不允许的。

```
Android applications cannot provide system-wide services to the rest of the device. E.g:
Dialing services (handling android.intent.action.ACTION_DIAL)
Viewing capabilities (system-wide handing of android.intent.action.ACTION_VIEW)
Data sharing capabilities (android.intent.action.ACTION_SEND) 
```

希望您参考此[文档页面](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_intents.html)。他们在那里提到了您在问题中提到的**ACTION_VIEW**和**ACTION_SEND 。**

但他们没有提到如何克服这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T15:34:16.573

在文档： [不支持的 BlackBerry 10 API 中，](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_overview.html) 您可以找到 BlackBerry Runtime for Android 应用程序在 BlackBerry 10 上不支持的功能。

请参阅：[意图](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_intents.html)

> Android 应用程序无法为设备的其余部分提供系统范围的服务。例如：
> 
> ```
> Dialing services (handling android.intent.action.ACTION_DIAL)
> Viewing capabilities (system-wide handing of android.intent.action.ACTION_VIEW)
> Data sharing capabilities (android.intent.action.ACTION_SEND) 
> ```

# c++ - 将 OpenCV 旋转和平移向量转换为 XYZ 旋转和 XYZ 位置

> ID：13823296
> 
> 赞同：17
> 
> 时间：2012-12-11T15:41:02.553
> 
> 标签：c++, opencv, rotation, rotational-matrices

似乎有 Google 结果和 stackoverflow 帖子可以回答这个问题，但简单的事实是我无法理解它们。无论我读了多少，我都无法理解四元数、欧拉角和罗德里格斯变换等等。

有人愿意像我 12 岁那样向我解释如何从 OpenCV 的 solvePnP() 方法返回的旋转和平移向量中获取我可以插入 3d 图形应用程序的 xyz Position 和 xyz Rotation 值吗？

这是用于 C++ 中的增强现实应用程序。我已经启动并运行了 OpenCV 部分，跟踪标记板并将旋转和平移矢量发送到图形程序，但我不知道如何使用这些信息来设置我的 3d 对象。

我真的很想了解这背后的数学原理，并会感谢这里对理论的任何耐心解释。但我也会接受指向一些代码的指针，我可以在另一天复制/粘贴并学习理论。事实上，通过查看具体代码并回归理论，我似乎可以更快地学习这样的东西。

编辑：就像有[这个](http://www.soi.city.ac.uk/~sbbh653/publications/euler.pdf)......这显然应该为我指明正确的方向，但据我所知，它也可能是时间机器的计划。我突然想到我可能会要求补习高中数学，但这不可能是第一次。

编辑：这是从solvePnP()返回的旋转向量和平移向量的示例...转换为XML以用于图形应用程序。请注意，我看到的每一个都包含三行一列。

```
<Tvec type_id="opencv-matrix">
  <rows>3</rows>
  <cols>1</cols>
  <dt>f</dt>
  <data>
    -2.50094433e+01 -6.59909010e+00 1.07882790e+02
  </data>
</Tvec>
<Rvec type_id="opencv-matrix">
  <rows>3</rows>
  <cols>1</cols>
  <dt>f</dt>
  <data>
    -1.92100227e+00 -2.11300254e-01 2.80715879e-02
  </data>
</Rvec> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T16:37:20.067

最初我对 OpenCV 使用什么格式一无所知。所以先研究一下。查看[的文档`solvePnP`](https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#solvepnp)，它似乎返回了一个矩阵。（这些天[似乎](http://tech.dir.groups.yahoo.com/group/OpenCV/message/82122)调用`Rodrigues2`了文档中旧版本中提到的函数。）[`Rodrigues`](https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#rodrigues)

那里的描述表明您可以期望一个具有单行或单列的矩阵。该向量的方向表示旋转轴，而向量的长度（或“范数”）表示角度。

所以你的输入是[角度轴表示](http://en.wikipedia.org/wiki/Axis-angle_representation)。您可以将其解释为[*同时*](http://en.wikipedia.org/wiki/Axis-angle_representation#Simultaneous_orthogonal_rotation_angle)围绕*x*、*y*和*z*轴[旋转。](http://en.wikipedia.org/wiki/Axis-angle_representation#Simultaneous_orthogonal_rotation_angle)因此，如果“XYZ 旋转”是指同时旋转，那么您已经在那里了。但是，如果您的意思是某个组合首先围绕*x*轴旋转，*然后*围绕*y*轴旋转，*然后*围绕*z*轴旋转，那么您处于一个奇怪的设置中，并且可能应该确保您使用的是正确的 API。

如果你追求的是[欧拉角](http://en.wikipedia.org/wiki/Euler_angles)，那么称它们为“XYZ 旋转”有点误导。Wikipedia 文章[Rotation forms in three dimensions](http://en.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions)列出了各种格式，以及如何在它们之间进行转换。特别是，它确实给出了从轴和角度转换为矩阵以及从那里转换为欧拉角的公式。

确保您使用正确的表示来匹配您的图形输出机器。或者，如果您有选择，请尝试直接处理[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix#In_three_dimensions)表示，因为这应该是最容易理解和使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:36:55.820

1.  将您的 3D 矢量扩展到齐次坐标 (4D)。这意味着具有分量 (X, Y, Z, 1) 的 4D 矢量

2.  根据您的旋转和平移参数创建一个 4x4 变换矩阵。它被称为仿射变换。关于旋转矩阵的文章，您走在了正确的轨道上。

3.  将坐标向量与变换矩阵相乘。

查看此维基百科部分：[http ://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations](http://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations)

它有一个在 2d 坐标中构成的示例，我相信您已经足够了解将其扩展到 3d 的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T20:31:59.720

我的猜测是 OpenCv 已经返回 XYZ 旋转。拿起你的左手（[左手法则](http://en.wikipedia.org/wiki/Right-hand_rule)）并握紧你的拳头。竖起拇指（z 轴），将食指伸直向前（x 轴），然后将中指向右伸（y 轴）。

任何特定的方向向量最多可以通过三个旋转来给出。重要的是要意识到您可以获得等效的旋转。例如，围绕 z 轴旋转，使您的索引指向您的右侧。等效旋转将是 Y，X，然后是 Y，而不涉及 Z 轴。

但是，当您使用完整的旋转矩阵 (3x3) 时，您不必担心这些约定，因为它们都在矩阵中合并在一起。这就是您链接的论文的内容，而不是时间旅行，这是幸运的，因为大多数数学专业的学生都能够进行时间旅行，从而注定了人类的命运。

然而，旋转矢量通常是指您的对象必须围绕空间中的哪个矢量旋转。

# c++ - 指向 boost::thread 的指针

> ID：13823300
> 
> 赞同：1
> 
> 时间：2012-12-11T15:41:09.757
> 
> 标签：c++, boost-thread

我对线程的托管有疑问。

我的问题是我想创建一个 ThreadManager 类，它必须管理所有创建的线程，当然还要销毁这个线程。

```
class DerivedInterface
{
public:
    DerivedInterface():id("Test"){};
    virtual ~DerivedInterface(){};
    virtual void run() = 0;
    virtual std::string getId() = 0;
    const std::string  id ;
};

class Object : public DerivedInterface
{
public:
    Object():id("VirtualDae"){};
    ~Object(){}

    void run()
    {

        std::cout<<"i'M IN RUN"<<std::endl;

        bool flag = true;

        while(flag){
            //allocate x resources

            try{
                //do some process on resources
                boost::this_thread::sleep(boost::posix_time::milliseconds(100));
                //clean resources
            }
            catch(boost::thread_interrupted const& )
            {
                //clean resources
                std::cout << "Worker thread interrupted" << std::endl;
                flag = false;
            }
            catch(std::exception x){
                std::cout<<"exx"<<x.what()<<std::endl;
            }
        }
    }
    std::string getId(){
        return id;
    }

    const std::string  id ;
};
class ThreadManager
{
public:

void createThread(DerivedInterface& t)
{
    boost::thread t1(&DerivedInterface::run, &t); 
    insert(&t1);

}

     }
/*
 * This method insert the pointer of the thread in a
 * map
 */

void insert(boost::thread* t1)
{

    boost::mutex::scoped_lock lock(m_mutex);

    int size = threadsMap.size()+1;

    std::cout<<"Size :"<<size<<std::endl;

    threadsMap.insert(std::make_pair(size, t1));
}

/*
 * This method return the pointer of the thread
 * inserted in a map
 */

boost::thread*  get(int key){

    boost::mutex::scoped_lock lock(m_mutex);

    if(threadsMap.find(key)!=threadsMap.end()){
        std::cout<<"non null get"<<std::endl;

        return threadsMap[key];
    }else{
        std::cout<<" null get"<<std::endl;
        return NULL;
    }
}

/*
 * This method stop the thread corrisponding
 * to the position pos as parameter in the map
 */
void stop(int pos){
    std::cout<<"Stop"<<std::endl;

    boost::thread* thread = get(pos);

    std::cout<<"thread  null"<<std::endl;

    if(thread != NULL)
    {
        std::cout<<"thread not null"<<std::endl;
        thread->interrupt();

        std::cout << "Worker thread finished" << std::endl;
    }
}

     private:

boost::shared_ptr<boost::thread> _mThread;

typedef std::map<int, boost::thread*> ThreadMapT;

ThreadMapT threadsMap;

std::map<int,boost::thread*>::iterator it;

boost::mutex m_mutex;

boost::thread_group g;

     };

   int main(){

    ThreadManager manager;
Object v;
//
manager.createThread(v);

std::cout<<"Interrupt"<<std::endl;

boost::thread *t1= manager.get(1);

t1->interrupt();
//
boost::posix_time::time_duration timeout = boost::posix_time::milliseconds(10000);
if (manager.get(1)->timed_join(timeout))
{
    //finished
    std::cout << "Worker thread finished" << std::endl;
}
else
{
    //Not finished;
    std::cout << "Worker thread not finished" << std::endl;
}

     } 
```

函数 t1.interrupt 或 manager.stop 返回分段错误..

```
Program terminated with signal 11, Segmentation fault.
#0  0x00007f3e1d095993 in boost::thread::get_thread_info() const () from libboost_thread.so.1.51.0
(gdb) where
#0  0x00007f3e1d095993 in boost::thread::get_thread_info() const () from libboost_thread.so.1.51.0
#1  0x00007f3e1d0965c6 in boost::thread::interrupt() () from libboost_thread.so.1.51.0
#2  0x00000000004088a9 in main () 
```

boost::thread 的指针不为空，那么会发生什么？先感谢您。

为什么我不能做这样的事情？

```
boost::thread *t1 = new boost::thread(&DerivedInterface::run, &t); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:50:24.310

```
void createThread(DerivedInterface& t)
{
    boost::thread t1(&DerivedInterface::run, &t); 
    insert(&t1);
} 
```

在上面的`t1`对象中，在堆栈上创建了一个指针，然后将一个指针`t1`插入到映射中，然后`t1`超出范围并被销毁，因此所有现有的指向它的指针都变得无效。

您可以通过传递`shared_ptr<thread>`而不是`thread*`：

```
void insert(boost::shared_ptr<boost::thread>);
void createThread(DerivedInterface& t)
{
    boost::shared_ptr<boost::thread> t1(new boost::thread(&DerivedInterface::run, &t)); 
    insert(t1);
} 
```

或者，通过在 C++11 中使用 r 值引用：

```
void insert(boost::thread&& t1);

void createThread(DerivedInterface& t)
{
    boost::thread t1(&DerivedInterface::run, &t); 
    insert(std::move(t1));
} 
```

或者，使用[`boost::thread_group`](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/thread_management.html#thread.thread_management.threadgroup)它为您完成上述操作。

# php - 检查mysql中是否已经存在行

> ID：13823312
> 
> 赞同：-2
> 
> 时间：2012-12-11T15:41:37.460
> 
> 标签：php, mysql

快速提问：

如何检查mysql中是否已经存在行？

我知道有些人会建议使用 mysql_num_rows()，我已经尝试过但没有用。

这是PHP代码：

```
...

$chk = mysql_query("SELECT * FROM f_table WHERE f = '$id' AND h = 'h' AND status = '1'");

if(mysql_num_rows($chk) > 0){
    $msg = 'exist';
}else{
            $msg = 'gotta';
    } 
```

Ps：我刚刚注意到php手册建议我们使用其他的而不是'mysql_num_rows（）'，而我的mysql版本是5.0。有关系吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:43:45.110

如果您不打算使用这些行，只需执行`SELECT COUNT(*) FROM ...`. 否则， mysql_num_rows 应该可以工作，即使这个 API 已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:45:00.990

通常，您希望让 MySQL 进行计数，而不是*获取所有行*。MySQL 可以使用索引并且不必检索所有数据，这可能会更有效：

```
$result = mysql_query('SELECT COUNT(*) as `count` FROM ...') /* or die(mysql_error()) */;
$row = mysql_fetch_assoc($result);

if ($row['count'] ...) 
```

# visual-studio-2012 - 从 Visual Studio 2012 GUI 通过 SFTP 上传文件？

> ID：13823319
> 
> 赞同：2
> 
> 时间：2012-12-11T15:41:45.470
> 
> 标签：visual-studio-2012, iis-7.5, sftp

我很确定这个问题的答案是“不”，但我必须问这个问题以防我遗漏了什么。

我正在使用 Visual Studio 2012 Premium，我想知道这个应用程序中是否有某种方法可以通过 SFTP 将文件上传到我的 IIS 7.5 服务器。我已经有一个使用 3rd 方产品进行文件传输的解决方案，但我想看看这个产品中是否有一种方法可以安全地上传文件（并且没有 Front Page Server 扩展）。

# azure - Azure blob 存储和安全性 - Sarbanes Oxley 要求

> ID：13823320
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:41:46.440
> 
> 标签：azure, azure-storage

我可以使用我的应用程序作为代理来控制对位于 Azure blob 存储中的文件的访问，如此 SO post [Azure blob storage and security](https://stackoverflow.com/questions/11165771/azure-blob-storage-and-security)中所述。

这是否足以满足 Sarbanes Oxley 对保护文件的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:54:13.980

不知道这些要求是什么，但 Windows Azure 存储服务符合 ISO 27001:2005 和 SAS70。[您可以在此处](http://www.windowsazure.com/en-us/support/trust-center/)了解有关 Windows Azure 安全合规性的更多信息。

你问的是一个**技术**社区无法回答的**法律问题。**您必须搜索法律建议，提供在[Windows Azure 信任中心](http://www.windowsazure.com/en-us/support/trust-center/)收集的信息。

 **查看[网站的常见问题解答部分，](https://stackoverflow.com/faq#questions)了解为什么它可能不是以当前形式提出问题的最佳场所。您很可能不会在这里得到答案。**

# mysql - MySQL：使用 IF 语句进行透视，但获得大量 NULL 值

> ID：13823324
> 
> 赞同：2
> 
> 时间：2012-12-11T15:42:01.617
> 
> 标签：mysql, pivot, pivot-table

我有一些按五分位数标签（-1、1、2、3、4、5）组织的数据。对于一列中的每个`Quintile`值，在另一列中都有一个名为 的值`ret`。最后，有一列以整数形式包含月末日期的日期。

我的目标是同时可视化所有 Quintile 返回的数据，每个数据都作为自己的列，只有日期列充当索引。

本质上，我想以该列为`Quintile`中心，并且我看到其他地方建议`IF`在 MySQL 中使用语句作为实现此目的的一种方式。

例如，下面的查询将显示一个 Quintile 的数据价值：

```
select yearmonth, ret
where Quintile=1
from quintile_returns 
```

但我不想对所有 Quintile 标签重复此操作，单独保存数据，然后在 Python Pandas 或 Excel 中将其拼凑在一起。我想让 SQL 将其显示为不同的列。

但是当我尝试这种`IF`语句风格的穷人的支点时，这是我使用的查询：

```
select yearmonth, 
       IF(Quintile=1, ret, NULL) as Q1_ret,
       IF(Quintile=2, ret, NULL) as Q2_ret
from quintile_returns 
```

我基本上得到了有效数据的对角线。Quintile 不是 1 的所有行仍然显示，填充为 NULL，然后对于 Quintile 2 以此类推。

如何避免所有这些额外的 NULL 值？基本上，我想告诉 SQL*只有*在满足条件时才返回列的值，并且不要使用 NULL 或其他任何东西作为默认的类似`else`占位符。

有没有一种不涉及嵌套连接类型语句的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:56:29.907

由于您希望多行输入数据只有一行输出，因此您必须汇总您的值。在这种情况下，您希望按 对它们进行分组`yearmonth`。一种可能（虽然不是特别便携）的方式如下：

```
SELECT yearmonth
     , SUM((Quintile=1)*ret) AS Q1
     , SUM((Quintile=2)*ret) AS Q2
FROM quintile_returns
GROUP BY yearmonth 
```

这种略显老套的方法利用了这样一个事实，即`Quintile=1`MySQL 中的比较会产生一个整数，分别`0`代表 false 和`1`true。因此，您选择`1*ret=ret`匹配的昆泰公司和`0*ret=0`其他公司。如果你想让事情更清晰、更便携，你也可以这样写

```
SELECT yearmonth
     , SUM(IF(Quintile=1, ret, 0)) AS Q1
     , SUM(IF(Quintile=2, ret, 0)) AS Q2
FROM quintile_returns
GROUP BY yearmonth 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:56:10.750

您可以使用`GROUP BY`为每个值仅显示一行`yearmonth`，然后使用 SUM() 以及 IF() 语句，以便`ret`仅当列的 IF() 条件评估为 TRUE 时才对 VALUES 求和：

```
SELECT `yearmonth`,
    SUM(IF(`Quintile` = 1, ret, NULL)) as `Q1_ret`,
    SUM(IF(`Quintile` = 2, ret, NULL)) as `Q2_ret`
FROM `quintile_returns`
GROUP BY `yearmonth` 
```

否则，您对 IF() 语句的想法是正确的。

# c++ - jbyteArray 是一个对象吗（即：作为 DeleteLocalRef 的参数）？

> ID：13823325
> 
> 赞同：3
> 
> 时间：2012-12-11T15:42:14.180
> 
> 标签：c++, java-native-interface

在 JNI 中，jbyteArray 是否被视为作业？即：如果我有一些长时间运行的 C++ 代码，我可以使用如下代码来释放对象引用吗？

```
JNIEnv* env;

jobject getJavaObj(bool useArray) {
    if (useArray) {
        jbyteArray dataArray = env->NewByteArray(getDataSize());
        env->SetByteArrayRegion(dataArray, 0, getDataSize(), dataPtr);
        return static_cast<jobject>(dataArray)
    } else {
        jobject javaByteBuffer = env->NewDirectByteBuffer(dataPtr, getDataSize());
        return javaByteBuffer;
    }
}

// ...
jobject theData = getJavaObj(true);
// ... Code to use theData jobject goes here...
env->DeleteLocalRef(theData); // Will this cause any issues? 
```

JDK 的 jni.h 包含文件似乎表明这将是一个正确的假设，但我在网上找不到太多来支持这个假设：

```
#ifdef __cplusplus
class _jobject {};
...
class _jarray : public _jobject {};
typedef _jbyteArray *jbyteArray;
#else
....
#endif 
```

**背景：**

我有一些 JNI 代码存在内存泄漏，我正试图确定它。总进程大小不断增加，但 JConsole 表示 JVM 的堆内存使用和非堆使用保持相当稳定。所以我的结论是泄漏必须在原始 C++ 本身或 JNI 代码中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:46:11.443

要回答您的问题，是`jbyteArray`的`jobject`，是的，您可以通过调用明确告诉 GC 释放它`DeleteLocalRef`。否则，当当前 JNI 调用返回 JVM 时，它会自动释放。**但我不认为它会帮助你**。通过使用`NewByteArray`，`NewDirectByteBuffer`您分配的是*JVM 堆，而不是本机内存*。必须如此，否则 GC 无法到达它（并且调用`DeleteLocalRef`没有意义）。但是你说 JVM 堆的使用是相当稳定的。如果 java 进程内存使用量正在增长，但 JVM 堆没有增长，那么您的*本机分配*有问题。你在哪里`dataPtr`来自（哪里？你是否正确地释放它？您的“长时间运行的代码”中没有其他重要的分配吗？根本不一定与JNI相关......

# ios - 在 iOS 中从 UITableView 生成 PDF 时包装列名

> ID：13823326
> 
> 赞同：1
> 
> 时间：2012-12-11T15:42:18.583
> 
> 标签：ios, pdf

我的 iPad 应用程序中有 7 列 UITableView。

我已成功从中生成 PDF，但最后一列名称显示不正确，因为它的字符多于列宽。（列名显示在表格边界之外）

我也无法包装此列名。

可能的解决方案是什么？

# java - 在android java.awt中使用java jdk

> ID：13823328
> 
> 赞同：0
> 
> 时间：2012-12-11T15:42:23.313
> 
> 标签：java, android, eclipse

我正在尝试在 android 编程中使用 java.awt.polygon 类。在 Java 构建路径中，我添加了

> Jave JRE 系统库 jdk 1.7

.

但是，在使用这段代码时

```
java.awt.Polygon polyGon = new Polygon(); 
```

我得到错误`NoClassDefFoundError`。如何在android中使用java类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:45:48.690

> 我正在尝试在 android 编程中使用 java.awt.polygon 类

这是不可能的，因为 Android 中不存在该类。

> 在 Java 构建路径中，我添加了 Jave JRE 系统库 jdk 1.7

那是行不通的，因为该类在 Android 中不存在。虽然您已将其添加到构建路径中，但它并未包含在 APK 中，也不在操作系统中。

> 如何在android中使用java类？

找到该类的源代码，将其重构为您自己的包（例如`org.umar.Polygon`），并将其添加到您的项目中，然后使用您重构的版本。在此过程中，请尊重该课程的许可（例如，如果您使用 OpenJDK，则为 GPL）。

# regex - htaccess 端口转发 URL

> ID：13823331
> 
> 赞同：0
> 
> 时间：2012-12-11T15:42:31.600
> 
> 标签：regex, apache, .htaccess, mod-rewrite, portforwarding

我正在寻找设置 2 .htaccess 重写，但不确定它们实际上会是什么样子：

```
http://www.mysite.com -> http://www.myothersite.com:880 
```

和

```
https://www.mysite.com -> https://www.myothersite.com:4443 
```

只是为了处理端口转发问题......

这是我目前正在尝试的：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^cloud\.mysite\.com$ [NC]
RewriteCond %{HTTPS} off
RewriteRule ^ http://mysite.no-ip.org:880%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTP_HOST} ^cloud\.mysite\.com$ [NC]
RewriteCond %{HTTPS} on
RewriteRule ^ https://mysite.no-ip.org:4443%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTP_HOST} ^mysite\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.mysite\.com$
RewriteRule ^/?$ "http\:\/\/www\.mysite\.com\/joomla" [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:46:29.897

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$ [NC]
RewriteCond %{HTTPS} off
RewriteRule ^ http://www.myothersite.com:880%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTP_HOST} ^(www\.)?mysite\.com$ [NC]
RewriteCond %{HTTPS} on
RewriteRule ^ https://www.myothersite.com:4443%{REQUEST_URI} [R=301,L] 
```

# jquery - Zend 框架 2.0 中的内联/外部 js

> ID：13823333
> 
> 赞同：2
> 
> 时间：2012-12-11T15:42:32.707
> 
> 标签：jquery, jquery-ui

我的负载有问题，库jquery ui（）中的方法draggable（）。我在 zend 框架 2 上有一个站点。但由于某种原因，我无法理解为什么我的内联代码没有在标签中执行。请帮忙！

文件：parallax.phtml - 布局页面（Application/view/layout/parallax.phtml

```
<?php echo $this->doctype(); ?>
<html lang="en">

        <head>
            <meta charset="utf-8"/>

            <?php echo $this->headTitle('alfared.zend.ua');?>
            <?php echo $this->headMeta()
                            ->appendName('Content-Type','text/html;charset=utf-8')
                            ->appendName('description','fsdfsafsa')
                            ->appendName('X-UA-Compatible','IE=edge,chrome=1')
                            ->appendName('viewport','width=device-width,initial-scale=1.0')
                            ->appendName('keywords','')?>
        <?php echo $this->headLink()->prependStylesheet($this->basePath() . '/css/parallax.css')
              ->prependStylesheet($this->basePath() . '/css/style.css')
              ->prependStylesheet($this->basePath() . '/css/flexslider.css')
              ->prependStylesheet($this->basePath(). '/css/bootstrap.min.css')
              ->prependStylesheet($this->basePath(). '/css/jquery-ui.css')
        ?>

       <?php echo $this->headScript()
             ->prependFile($this->basePath().'/js/html5.js','text/javascript', array('conditional' => 'lt IE 9'))
       ?>
            <?php $script ="   //<--inline script
                $(function() {
                        $('#draggable').draggable();
                });
         "?>
       <?php echo $this->headScript()->prependFile($this->basePath(). '/js/jquery-1.8.3.js','text/javascript')?>
       <?php echo $this->headScript()->prependFile($this->basePath(). '/js/jquery-ui.js')?>
       <?php echo $this->headScript()->prependScript($script,'text/javascript') ?>
            <style type="text/css">#draggable{
                width: 150px;
                height: 150px;
                padding: 0.5em;
            }</style>
        </head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:42:26.420

尝试使用[inlinescript 视图助手](http://framework.zend.com/manual/2.0/en/modules/zend.view.helpers.inline-script.html)

```
<?php echo $this->inlineScript()->appendScript(<<<EOT
$(function() {
   $('#draggable').draggable();
});

EOT
); ?> 
```

# android - 如何将图像从 http 流式传输到 CursomAdapter(Android)

> ID：13823334
> 
> 赞同：1
> 
> 时间：2012-12-11T15:42:32.707
> 
> 标签：android, imageview, adapter, bitmapfactory

我有一个 Android 自定义列表视图适配器，

我需要将一些图像流式传输/加载到我的自定义行布局/ImageView 中。

所以我尝试了：

> myImageView.setImageBitmap(BitmapFactory.decodeFile(o.getIcon_url()));

就像下面的这段代码。

```
public View getView(int position, View convertView, ViewGroup parent) {
       View v = convertView;
       if (v == null) {
            LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row_applications, null);
       }
       ApplicationsModel o = items.get(position);
       if (o != null) {
            ImageView tv_icon = (ImageView) v.findViewById(R.id.iv_icon);
            if(row_icon !=null)
            {              
                  tv_icon.setImageBitmap(BitmapFactory.decodeFile(o.getIcon_url()));
            }
       }
       return v;
} 
```

但是这些图像不能在我的自定义列表视图中阅读。

该代码适用于 TextView 的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:57:05.680

看起来@Max_Usanin 在这里有正确的答案。我留下另一个答案来解释为什么它现在不起作用。

您需要先下载图像，然后才能在`BitmapFactory`. 您使用的方法只能用于本地文件，不能用于 url。[请参阅此链接。](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String%29)

此外，您真的想异步下载图像，它看起来`LazyList`确实如此。在将另一个位图加载到您的`ListView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:48:35.783

imageLoader.DisplayImage("URL_you_image", YOUimageIcon);

hm i am use this source [https://github.com/thest1/LazyList](https://github.com/thest1/LazyList) works well, loads images asynchronously;)

# cordova - 应用程序沙箱下的android phonegap 文件创建

> ID：13823344
> 
> 赞同：0
> 
> 时间：2012-12-11T15:43:02.313
> 
> 标签：cordova

我正在使用 phoneGap 文件编写器创建一个文件。这些文件是在 Android 的 SD 卡下创建的。但是，在 iOS 上使用相同的代码，文件是在应用程序沙箱下创建的。请建议是否有办法使用phonegap filewriter api在android沙箱下创建文件。

我正在使用与 phonegap 示例中类似的代码。

[http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileWriter](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileWriter)

document.addEventListener("deviceready", onDeviceReady, false);

```
// PhoneGap is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", {create: true}, gotFileEntry, fail); 
}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.onwrite = function(evt) {
        console.log("write success");
    };
    writer.write("some sample text");
    // contents of file now 'some sample text'
    writer.truncate(11);
    // contents of file now 'some sample'
    writer.seek(4);
    // contents of file still 'some sample' but file pointer is after the 'e' in 'some'
    writer.write(" different text");
    // contents of file now 'some different text'
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T18:43:00.983

当您调用 getFile 时，您只需要将路径传递给应用程序沙箱。例如“/data/data/com.my.app/readme.txt”，您将能够写入沙箱。

我们正在讨论在未来的版本中使这更容易。

# java - JsonServiceExporter 日志记录

> ID：13823345
> 
> 赞同：1
> 
> 时间：2012-12-11T15:43:05.157
> 
> 标签：java, json, spring, logging, javabeans

我想记录以下 bean 的所有 JSON 请求和响应：

```
<bean name="/RPC.json" class="com.googlecode.jsonrpc4j.spring.JsonServiceExporter">
<property name="service" ref="RPC"/>
<property name="serviceInterface" value="interfaces.RPC"/>
</bean> 
```

我目前不知道该怎么做。

# asp.net - Asp.Net：滚动到验证标注扩展器的验证错误？

> ID：13823346
> 
> 赞同：1
> 
> 时间：2012-12-11T15:43:07.027
> 
> 标签：asp.net, validation, ajaxcontroltoolkit, extender

是否可以滚动到 ValidationCalloutExtender 的验证错误？

有时当我单击页面顶部的按钮时，我的页面很大，如果我忘记在页面末尾的一个字段中输入内容，除非我发生，否则我无法知道页面上到底发生了什么向下滚动并查看 ValidationCalloutExtender 弹出窗口，有没有办法滚动到已触发 ValidationCalloutExtender 的字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:27:39.457

将此脚本放在页面的最底部

```
<script type="text/javascript">
    var originalShow = Sys.Extended.UI.ValidatorCalloutBehavior.prototype.show;
    Sys.Extended.UI.ValidatorCalloutBehavior.prototype.show = function (force) {
        this._elementToValidate.scrollIntoView(false); //true to align with the top of the scroll area
        originalShow.call(this, force);
    };
</script> 
```

# java - 在 JTree 中禁用标准鼠标行为

> ID：13823348
> 
> 赞同：0
> 
> 时间：2012-12-11T15:43:32.347
> 
> 标签：java, swing, awt, jtree, mouselistener

我有一个 JTree，在特定情况下我想将它切换到“无用户输入模式”。在这种模式下，用户应该无法更改树的选择。但是，当前选择应该保持不变，并且应该仍然能够以编程方式进行更改。

我试图设置`tree.setFocusable(false)`-> 用户仍然可以更改选择

我构建了一个`MouseListener`消耗点击事件的 -> 用户仍然可以更改选择

我试过`tree.setSelectionModel(null)`- >没有选择可见

原则上我可以`tree.setEnabled(false)`，但后来树变灰变丑了。

关于如何防止用户更改选择，或者如何`JTree`在禁用状态下正常绘制的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:13:50.890

我想我会做这样的事情：

```
 tree.addChangeListener(new ChangeListener() {
        @Override
        public void stateChanged(ChangeEvent arg0) {
            TreePath path = ... // The path of the node you want to be selected 
            tree.setSelectionPath(path);
        }
    }); 
```

When selection changes you select again the node you need.

# sql-server-2008 - SQL Server 主体“dbo”不存在，

> ID：13823354
> 
> 赞同：264
> 
> 时间：2012-12-11T15:43:47.470
> 
> 标签：sql-server-2008

我收到以下错误

```
Cannot execute as the database principal because the principal "dbo" 
does not exist, this type of principal cannot be impersonated,
or you do not have permission. 
```

我读过`ALTER AUTHORIZATION`，但我不知道这是在哪个数据库中发生的。这个错误非常频繁地吐出，并且每天将错误日志增加大约 1GB。

* * *

## 回答 #1

> 赞同：577
> 
> 时间：2013-08-21T14:16:30.357

我通过设置数据库所有者解决了这个问题。在此问题之前，我的数据库没有任何所有者。在您的数据库中执行此命令以将所有者设置为 sysadmin 帐户：

```
use [YourDatabaseName] EXEC sp_changedbowner 'sa' 
```

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2017-01-02T00:57:32.520

[![在此处输入图像描述](../Images/c0e120ff7c5fe4e7510a0a1f6c136c81.png)](https://i.stack.imgur.com/8t1P7.png)

以图形方式进行。

数据库右键-->属性-->文件-->选择数据库所有者-->选择[sa]--确定

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-06-26T12:14:28.333

```
USE [<dbname>]
GO
sp_changedbowner '<user>' -- you can use 'sa' as a quick fix in databases with SQL authentication 
```

[KB913423 - 在 SQL Server 2005 中还原数据库后，您无法运行包含 EXECUTE AS 子句的语句或模块](http://support.microsoft.com/kb/913423 "MS - 帮助")

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2021-01-05T19:51:11.813

将数据库从 SQL2016 还原到 SQL2019 后，当我尝试访问数据库图表时遇到了同样的问题。我已经有了正确的数据库所有者，但文件的所有者是空的。一旦我设置了它，它就可以正常工作......

[![在此处输入图像描述](../Images/b8aa3588d8543f52a9be78cb38098cab.png)](https://i.stack.imgur.com/fQGu9.png)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-08-26T09:25:06.470

当数据库是从不同的 SQL 服务器或实例恢复时，也可能发生这种情况。在这种情况下，数据库中的安全主体“dbo”与还原数据库的 SQL 服务器上的安全主体不同。别问我怎么知道的……

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-03-02T08:47:33.860

另一种方法

```
ALTER AUTHORIZATION 
ON DATABASE::[DatabaseName]
TO [A Suitable Login]; 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-12-08T14:28:37.677

选择的答案和其他一些都很好。我只是想给出一个更纯粹的 SQL 解释。没有（有效）数据库所有者的解决方案相同。

错误提及的数据库所有者帐户`dbo`始终是使用数据库创建的。所以它不存在似乎很奇怪，但是您可以使用两个选择（或一个，但让我们保持简单）进行检查。

```
SELECT [name],[sid] 
FROM [DB_NAME].[sys].[database_principals]
WHERE [name] = 'dbo' 
```

显示`dbo`DB_NAME 数据库中用户的 SID 和

```
SELECT [name],[sid] 
FROM [sys].[syslogins] 
```

显示此 SQL Server 实例的所有登录名（及其 SID）。请注意，它没有写入任何 db_name 前缀，这是因为每个数据库在该视图中都有相同的信息。

因此，如果出现上述错误，**将不会使用**分配给数据库 dbo 用户的 SID 登录。

如上所述，这通常发生在从另一台计算机恢复数据库时（其中数据库和 dbo 用户是由不同的登录名创建的）。您可以通过将所有权更改为现有登录来修复它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-21T15:20:13.090

在安全性下，将主体添加为“无需登录的 SQL 用户”，使其拥有与主体同名的架构，然后在成员身份中使其成为 db_owner。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-30T05:32:21.023

当意外地将数据库连接字符串提供给只读镜像时也会出现此错误 - 而不是 HA 设置中的主数据库。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-20T07:22:42.033

正如消息所说，您应该将权限设置为您的用户的所有者。因此，您可以使用以下内容：

```
ALTER AUTHORIZATION 
ON DATABASE::[YourDBName]
TO [UserLogin]; 
```

希望有帮助！如果您觉得可以，请发表评论。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-17T21:25:35.007

就我而言，我在尝试冒充另一个用户时遇到了这个错误。例如

```
EXEC AS USER = 'dbo'; 
```

而且由于数据库是从另一个环境导入的，它的一些用户与 SQL Server 登录名不匹配。

[您可以通过运行（已弃用） sp_change_users_login](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-change-users-login-transact-sql?view=sql-server-2016) （在“报告”模式下）检查是否有相同的问题，或使用以下查询：

```
select p.name,p.sid "sid in DB", (select serp.sid from sys.server_principals serp where serp.name = p.name) "sid in server"
from sys.database_principals p
where p.type in ('G','S','U')
and p.authentication_type = 1
and p.sid not in (select sid from sys.server_principals) 
```

如果在该列表中显示您尝试模拟的用户，那么您可能可以通过将 DB 用户分配给服务器中的正确登录名来修复它。例如：

```
ALTER USER dbo WITH LOGIN = dbo; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-01-14T00:26:16.360

转到属性 - 文件。所有者名称必须为空。只需在用户名中输入“sa”即可解决问题。

# html - 如何使文本宽度同样适合任何浏览器？

> ID：13823361
> 
> 赞同：1
> 
> 时间：2012-12-11T15:44:17.200
> 
> 标签：html

无论使用哪种浏览器，是否有某种技巧可以使字体大小占用相同的宽度？（我使用像素作为字体大小，但我不确定这与这个问题有多相关。）

通常，如果我的网站上有一行文本，我只想占用一行而不是下降到一秒钟，我必须确保我写的文本足够短，可以在分配的范围内作为一行所有主要浏览器中的空间。例如，我可能会在 div 中写一些文本（也具有以像素为单位的指定宽度），这些文本在 firefox、safari 等上显示为一行，但是当我去检查 ie8 时，出于某种原因它被显示，它没有空间容纳最后一个单词并将该单词放到第二行的开头。我想知道是否有某种方法可以使文本在宽度方面占据相同的空间，无论如何。我在这里缺少某种简单的解决方案吗？

正如我所说，我使用像素来表示字体大小，并且我一直在研究使用其他度量单位，但据我所知，到目前为止，使用诸如 em 之类的其他东西来表示字体大小并不能真正解决这个问题因为它们基本上是像素的抽象。即使有一种方法可以使用不同的测量单位，我也很想知道是否有解决方案可以让我保留像素，因为这只是我喜欢的测量单位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:51:51.833

不同的浏览器和操作系统的字体处理略有不同，因此很难准确预测这些事情。我所做的是编写一个小的 jQuery 函数，它会增加容器中字体的大小，直到它包装之前，适合容器而不是包装。它通常在 IE 中加载时闪烁，但在普通浏览器上并不明显。您可以在附加的链接中看到它的实际效果（查看市场名称）：

[http://www.hdradioalliance.com/station_guides/widget.php?id=77](http://www.hdradioalliance.com/station_guides/widget.php?id=77)

[http://www.hdradioalliance.com/station_guides/widget.php?id=21](http://www.hdradioalliance.com/station_guides/widget.php?id=21)

[http://www.hdradioalliance.com/station_guides/widget.php?id=61](http://www.hdradioalliance.com/station_guides/widget.php?id=61)

如果符合您的需要，请随意回收代码。

**编辑：**实际上，那段特定的代码会缩小字体，直到它的容器只有一行高——而不是我所说的，这是相反的。我已经做到了两种方式。这里是：

```
$(document).ready(function(){
    var headingSize = 1;
    while($('#headingSling h1 span').height() > 34 && parseInt($('#headingSling h1 span').css('font-size').replace(/\D\./g,'')) > 10){
        headingSize -= 0.01;
        $('#headingSling h1 span').css('font-size', headingSize+'em');
    }
}); 
```

# javascript - 页面准备就绪时，javascript/jquery 开始加载隐藏图像

> ID：13823362
> 
> 赞同：1
> 
> 时间：2012-12-11T15:44:17.700
> 
> 标签：javascript, image, performance

我在一个网站上有一堆图像，它们有两个版本：一个大的和一个小的。

当您访问网站时，小版本会自动显示，当您单击它们时，我使用 jquery 打开一个隐藏的 div 并插入大版本。

由于在页面加载时浏览器看不到大图像（没有`img`将它们作为 a `src`），因此在用户单击其中一个小图像放大它之前不会加载它们，因此它们不会减慢页面加载时间.

但是，为了使 UI 尽可能响应，我想从页面加载的那一刻开始缓冲大图像（这样当用户单击其中一个时它们就在那里）。

如何开始在后台加载图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:45:58.057

当您将 a 设置`src`为`Image`对象 f.ex 时，您可以开始在后台加载图像：

```
(new Image).src = src; 
```

这是一个适合您的功能：

```
function preloadImages() {
    for(var i=0; i<arguments.length; i++) {
        (new Image).src = arguments[i];
    }
}

preloadImages('one.jpg', 'two.jpg'); 
```

我建议您在窗口加载后（在`window.onload`回调内）开始预加载图像，以防止它破坏 UI：

```
window.onload = function() {
    preloadImages('one.jpg', 'two.jpg');
}; 
```

# python - 如何在 Python 中从 Windows Server“应用程序和服务日志”读取 TaskScheduler 日志

> ID：13823366
> 
> 赞同：1
> 
> 时间：2012-12-11T15:44:24.937
> 
> 标签：python, windows, events, logging

如何读取（在 Python 中）来自 Windows Server 2008 的日志：

```
 Event Viewer
      Application and Services Logs
         Microsoft
            Windows
               Task Scheduler
                  Operational 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:39:46.087

我不知道如果不利用某种 C/C++ 支持，您将如何使用 Python 来做到这一点？

但是，然后我想，也许你可以从 python 外壳，并使用[LogParser](http://www.microsoft.com/en-us/download/details.aspx?id=24659)？Logparser 可以返回格式良好的输出，您可以在 python 中轻松切碎。但是，如果 LogParser 支持搜索扩展日志文件，我无法让它在我的 Windows Server 2008 R2 服务器上工作。

但是，然后我想，好吧，你也许可以使用 PowerShell，确定吗？但是，不使用`get-eventlog`我认为的 cmdlet 将是答案。

最终，我能够查询日志文件“Microsoft-Windows-TaskScheduler/Operational”的事件记录，但我不得不从 PowerShell 中使用 C# 来执行此操作。

总结一下这个悲伤的故事：

*   使用 python 内置的任何 C/C++ 扩展支持来调用新的[Windows 事件日志](http://msdn.microsoft.com/en-us/library/aa385772%28v=vs.85%29.aspx)函数
*   使用自定义 .net ( [EventLogQuery](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventlogquery.aspx) / [EventLogReader](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventlogreader.aspx) ) 代码将事件日志格式的 ETL 转换为 python 可以原生使用的内容

有关如何构建查询的示例，请参阅[事件查询和事件 Xml 。](http://msdn.microsoft.com/en-us/library/bb399427.aspx)

# vba - 让 VBA 类模块的属性 - 是否可以有多个参数？

> ID：13823367
> 
> 赞同：12
> 
> 时间：2012-12-11T15:44:26.077
> 
> 标签：vba, class, oop, excel, properties

到目前为止，我对在类模块中使用 Let 属性的理解是您在类模块中设置它，如下所示：

```
Dim pName as String
Public Property Let Name(Value As String)
    pName = Value
End Property 
```

然后你在你创建了这个类的一个对象之后，你可以像这样设置这个属性：

```
MyObject.Name = "Larry" 
```

问题：是否有可能以某种方式将多个参数输入到类属性中？例如：

```
Dim pFirstName as String, pLastName as String
Public Property Let Name(FirstName As String, LastName As String)
    pFirstName = FirstName
    pLastName = LastName
End Property 
```

然后，您将如何在课堂外设置此属性？

```
MyObject.Name = ?? 
```

或者这只是不可能做到的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-21T13:40:51.073

我意识到已经有 2 种解决方法，但我认为回答你原来的问题值得一试，因为这个问题收到的浏览量很大。

答案

> VBA 的 Let 属性中是否可以有多个参数？

是

# 是的！这是可能的。

首先让我们谈谈 GET 属性。考虑这是`Class1`

```
Private firstName as String
Private lastName as String

Public Property Get Name() As String
    Name = firstName & " " & lastName
End Property 
```

该`Name`属性将返回**全名**，这很好，但是如何使用该**`Let`**属性一次性分配`firstName`&`lastName`呢？

*旁注：您可以传递一个用特殊字符分隔的单个字符串，并将其拆分在主体内`Let`并分配`first`和`last`名称* **，但忘记了**，让我们正确完成它......

好的，在 VBA 中**`Let`**，当前设置的默认属性将采用 1 个参数并将其分配给名字或姓氏......

就像是：

```
Public Property Let Name(value As String)
    firstName = value
End Property 
```

规则：`Get`不带参数，`Let`只带一个。这是非常合乎逻辑的，因为它`Get`返回基础值，但`Let`需要从*某个地方*获取一个值以便将其分配给它所代表的数据。此时值得记住的是，该`Let`属性是通过`=`符号分配的，即。`myObject.Name = "IdOnKnuu"`

我们知道，如果我们与上述*规则*保持一致，理论上我们应该能够为[the 添加一个参数，`Get`](http://msdn.microsoft.com/en-us/library/office/gg264197(v=office.15).aspx)并[为`Let`](http://msdn.microsoft.com/en-us/library/office/gg278788(v=office.15).aspx). 添加一个参数。

让我们忘记`Let`-**现在将其注释掉**- 并为属性添加一个参数`Get`。

```
Private firstName As String
Private lastName As String

Public Property Get Name(first As String) As String
    Name = firstName & " " & lastName
End Property

'Public Property Let Name(value As String)
'    firstName = value
'End Property 
```

回到`Module1`创建实例`Class1`并键入`c.Name(`

![在此处输入图像描述](../Images/0d4a636428633061a74fe4034c2e1502.png)

哦，智能感知期待什么？惊人的！

在这一点上，值得理解的是，我们的`Get`属性返回`first + last` **的都是空的**，所以无论你要传递什么，`c.Name()`它都会返回一个空字符串。

好的，让我们现在取消注释并调整`Let`属性...

*侧节点：如果您跳回`Module1`并键入`c.`并且没有得到智能感知，这几乎意味着其中的某些东西`Class1`被破坏了......我们已经知道 - 这`Let`是导致它的属性*

我们已经为属性添加了一个参数`Get`，让我们对属性做同样的事情`Let`......

```
Public Property Let Name(first As String, value As String)
    firstName = value
End Property 
```

让我们回到`Module1`并尝试使用该`Let`属性：

请记住，您之前是如何使用该`Let`物业的？您需要为其分配一个值

```
c.Name = "John" 
```

但是现在，您的`Let`属性需要一个额外的参数`first as String`。

我们为什么不试试这个：

```
c.Name("John") = "Smith" 
```

嘿！编译并运行（*快速`F5`*）

太好了，让我们检查一下结果！

```
Debug.print c.Name("John") 
```

嗯...仅显示`Smith`在即时窗口（`Ctrl`+ `G`）中...不完全是我们想要的...。

回到`Let`属性，我们注意到我们通过参数获取了 2 个值，但我们只使用了其中一个？我们有两个不同的值进入函数，对吧？让我们将第一个视为 the `firstName`，将第二个视为`lastName`

```
Public Property Let Name(first As String, last As String)
    firstName = first
    lastName = last
End Property 
```

回到`Module1`

```
Sub Main()

    Dim c As New Class1

    c.Name("John") = "Smith"

    Debug.Print c.Name("John")

End Sub 
```

并重新运行当前代码为我们提供了我们需要的东西......它会打印**John Smith**但**请稍等！！！为什么我们必须通过名字才能检索全名**？

哈！诀窍是使两个属性的第一个参数[**`Optional`**](http://vba4all.com/optional-parameters-and-paramarray-in-vba/)

总结一下，代码：

**Class1.cls**

```
Private firstName As String
Private lastName As String

Public Property Get Name(Optional first As String) As String
    Name = firstName & " " & lastName
End Property

Public Property Let Name(Optional first As String, last As String)
    firstName = first
    lastName = last
End Property 
```

**模块1.bas**

```
Sub Main()

    Dim c As New Class1

    c.Name("John") = "Smith"

    Debug.Print c.Name ' prints John Smith

End Sub 
```

所以基本上在 VBA 中可以通过属性分配两个（*或更多*）值。**`Let`**可能会让你有点失望的是它的语法，但我希望我在这个答案中的解释能帮助你理解事情的来源和原因。

该`Get`属性有一个*可选参数*——它实际上只是一个*虚拟参数*……它没有在`Get`属性中的任何地方使用，但它允许我们获得所需的`Let`签名并允许我们将两个参数传递给它。它还授予易于记忆的`c.Name`语法。

通话

```
Debug.Print c.Name("first") 
```

仍然是可能的，但是该`"first"`参数就像一个假人，对实际的基础数据没有影响。它是一个虚拟对象，对实际数据没有影响 - 转储它并使用：

```
Debug.print c.Name 
```

绝对更方便:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T16:07:29.953

根据您的评论，如果您希望封装此逻辑，那么您可以使用类似于下面的内容。

下面包括子和功能。该函数返回一个 Person 对象：

```
Public Sub testing()

    Dim t As Person

    Set t = PersonData("John", "Smith")

End Sub

Public Function PersonData(firstName As String, lastName As String) As Person

    Dim p As New Person

    p.firstName = firstName
    p.lastName = lastName

    Set PersonData = p

End Function 
```

人物类：

```
Dim pFirstName As String, pLastName As String

Public Property Let FirstName(FirstName As String)
    pFirstName = FirstName
End Property

Public Property Get FirstName() As String
    FirstName = pFirstName
End Property

Public Property Let LastName(LastName As String)
    pLastName = LastName
End Property

Public Property Get LastName() As String
    LastName = pLastName
End Property 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T01:18:37.207

在类中用作 Public Sub 过程来执行此操作：

```
Public Sub testing()
Dim myPerson As New Person
myPerson.SetName "KaciRee", "Software"

End Sub 
```

人物类：

```
Dim pFirstName As String, pLastName As String

Public Property Let FirstName(FirstName As String)
    pFirstName = FirstName
End Property

Public Property Get FirstName() As String
    FirstName = pFirstName
End Property

Public Property Let LastName(LastName As String)
    pLastName = LastName
End Property

Public Property Get LastName() As String
    LastName = pLastName
End Property

Public Sub SetName(FirstName As String, LastName As String)
pFirstName = FirstName
pLastName = LastName
End Sub 
```

# c# - 此 LINQ 代码是否对原始数据执行多次查找？

> ID：13823368
> 
> 赞同：9
> 
> 时间：2012-12-11T15:44:25.997
> 
> 标签：c#, linq, linq-to-objects

我们在使用 LINQ 的一段代码中遇到了轻微的性能问题，它提出了一个关于 LINQ 在查找方面如何工作的问题

我的问题是这样的（请注意，我已经更改了所有代码，所以这是代码的指示性示例，而不是真实场景）：

给定

```
public class Person {
 int ID;
 string Name;
 DateTime Birthday; 
 int OrganisationID;
} 
```

如果我有一个说 100k Person 对象的列表，然后是一个日期列表，比如 1000，我运行以下代码：

```
var personBirthdays = from Person p in personList
    where p.OrganisationID = 123
    select p.Birthday;

foreach (DateTime d in dateList)
{
    if (personBirthdays.Contains(d))
        Console.WriteLine(string.Format("Date: {0} has a Birthday", d.ToShortDateString()));
} 
```

生成的代码将是以下代码的迭代：

100k（需要执行的循环以查找组织 ID 为 123 的用户）
乘以
1000（列表中的日期数量）
乘以
x（需要检查组织 ID 为 123 的用户数量） )

这是很多迭代！

如果我将代码 personBirthdays 更改为：

```
List<DateTime> personBirthdays = 
        (from Person p in personList
        where p.OrganisationID = 123
        select p.Birthday).ToList(); 
```

这应该将 100k 作为倍数删除，并且只执行一次？

所以你会有 100k + (1000 * x) 而不是 (100k * 1000 * x)。

问题是这似乎太容易了，我确信 LINQ 在某处做了一些聪明的事情，这应该意味着这不会发生。

如果没有人回答，我会进行一些测试并报告回来。

**清晰度更新：** 我们不考虑数据库查找，该`personList`对象是内存中列表对象。这都是 LINQ-to-Objects。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:00:25.737

> 这应该将 10k 作为倍数删除，并且只执行一次？

这意味着不是迭代`personList`100k 次，而是*为每个迭代*`where`执行and`select`操作，您将迭代生成的100k 次，并且and操作只会在底层数据源上执行一次。*`List``where``select`*

 *> 问题是这似乎太容易了，我确信 LINQ 在某处做了一些聪明的事情，这应该意味着这不会发生。

不，您的第一个查询只是您不应该使用 LINQ 执行的操作，如果您计划多次迭代它们（这是您更改的内容），您应该获取查询结果并将它们放入数据结构中.

您可以通过使用适当的数据结构进一步改进此查询。在 a 上搜索`List`效率相当低，因为它需要进行线性搜索。最好使用 a`HashSet`来存储查询的结果。在平均情况下， A 的`HashSet`搜索速度为 O(1)，而 a 的搜索时间为 O(n) `List`。

```
var dates = new HashSet<DateTime>(from Person p in personList
                                  where p.OrganisationID = 123
                                  select p.Birthday);

foreach (DateTime d in dateList.Where(date => dates.Contains(date)))
{
    Console.WriteLine(string.Format("Date: {0} has a Birthday", d.ToShortDateString()));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:01:41.807

这是一个典型的`select n+1`问题，你申请后`.ToList()`你已经部分解决了。下一步可能是：您不断迭代`personBirthdays`列表，将其替换为`HashSet`，您可以`Contains(d)`更快地执行并删除重复项：

```
var personBirthdays = new HashSet<DateTime>((from Person p in personList
    where p.OrganisationID = 123
    select p.Birthday).ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:08:00.163

我假设您指的是 LINQ-to-Objects，因为每个 LINQ 提供程序都有自己的实现（LINQ-to-SQL、LINQ-to-Entities、LINQ-to-XML、LINQ-to-anything）。

以您的示例为例`personBirthdays`，创建该表达式的目的是为了遍历整个结果集并不是一个定论，因此 LINQ 无法自动将结果具体化为数组或列表。

这些操作非常不同：

```
personBirthdays.Distinct()
personBirthdays.FirstOrDefault(b => b.Month == 7)
personBirthdays.Select(b => b.Year).Distinct() 
```

LINQ 作为一种“聪明”的技术，它允许构建表达式树并推迟执行。这就是阻止 - 在上面的第三个示例中 - 100k 迭代来获得生日，然后再 100k 来选择年份，然后是最终的、昂贵的传递来组装不同的值。

LINQ 使用者（你）必须拥有表达式的命运。如果您知道结果集将被迭代多次，那么您有责任将它们具体化为数组或列表。*

# algorithm - 查找数字中有多少位

> ID：13823370
> 
> 赞同：14
> 
> 时间：2012-12-11T15:44:26.903
> 
> 标签：algorithm, language-agnostic

我知道如何找出给定数字中有多少位（或布尔数组中有多少元素为真），使用掩码和按位运算符，检查所有位是否打开。假设数字是任意长度，算法在 O(n) 时间内运行，其中 n 是数字中的位数。有没有渐近更好的算法？我不认为这是可能的，**但我怎样才能正式证明呢？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-11T15:47:18.957

[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive)提出了许多方法，包括这个：

> ### 计数位设置，Brian Kernighan 的方式
> 
> ```
> unsigned int v; // count the number of bits set in v
> unsigned int c; // c accumulates the total bits set in v
> for (c = 0; v; c++)
> {
>   v &= v - 1; // clear the least significant bit set
> } 
> ```
> 
> Brian Kernighan 的方法经历了与设置位一样多的迭代。因此，如果我们有一个仅设置了高位的 32 位字，那么它只会通过循环一次。

实际算法示例：

### 128 == 10000000 [2] , 1 位设置

```
128 & 127 ==   0    10000000 & 01111111 == 00000000 
```

### 177 == 10110001 [2] , 4 位设置

```
177 & 176 == 176    10110001 & 10110000 == 10110000
176 & 175 == 160    10110000 & 10101111 == 10100000
160 & 159 == 128    10100000 & 10011111 == 10000000
128 & 127 ==   0    10000000 & 01111111 == 00000000 
```

### 255 == 11111111 [2] , 8 位设置

```
255 & 254 == 254    11111111 & 11111110 == 11111110
254 & 253 == 252    11111110 & 11111101 == 11111100
252 & 251 == 248    11111100 & 11111011 == 11111000
248 & 247 == 240    11111000 & 11110111 == 11110000
240 & 239 == 224    11110000 & 11101111 == 11100000
224 & 223 == 192    11100000 & 11011111 == 11000000
192 & 191 == 128    11000000 & 10111111 == 10000000
128 & 127 ==   0    10000000 & 01111111 == 00000000 
```

* * *

至于算法复杂性的语言不可知问题，不可能比 O( *n* ) 做得更好，其中*n*是位数。任何算法都必须检查一个数字中的所有位。

*棘手的是，当您对n*的定义不小心时，让*n*成为“位移/屏蔽指令的数量”或类似的东西。如果*n*是位数，那么即使是简单的位掩码 ( `&`) 也已经是 O( *n* ) 操作。

那么，这可以在比 O( *n* ) 位测试更好的情况下完成吗？不可以。
它可以在少于 O( *n* ) 的添加/移位/掩码操作中完成吗？是的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T15:51:34.777

我总是用这个：

```
int
count_bits(uint32_t v)
{
        v = v - ((v >> 1) & 0x55555555);
        v = (v & 0x33333333) + ((v >> 2) & 0x33333333);
        return ((v + (v >> 4) & 0xf0f0f0f) * 0x1010101) >> 24;
} 
```

你必须知道你的整数的大小。

[http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T15:49:32.373

Brian Kerninghan's algorithm to count 1-bits.

```
unsigned int v; // count the number of bits set in v
unsigned int c; // c accumulates the total bits set in v
for (c = 0; v; c++)
{
  v &= v - 1; // clear the least significant bit set
} 
```

Read this and other bit-twiddling hacks here: [Bit-twiddling hacks](http://graphics.stanford.edu/~seander/bithacks.html).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-11T20:19:24.063

进行此计算的最快方法是使用表数组 edx[bl]，其中 bl 寄存器包含一个字节值。如果数字是单字节，那么答案是一条指令：

```
 mov eax, [edx:bl] 
```

如果数字中有很多字节（例如 ebp 指向的数组），则循环遍历字节（其中 ecx 是包含数字的数组中的字节数）：

```
 sub ecx, 1
    mov eax, 0
 DoNextByte:
    mov bl, [ebp:ecx]
    add eax, [edx:bl]
    test ecx, ecx
    jz Done:
    sub ecx, 1
    jmp DoNextByte:
 Done:
    ; answer is in eax 
```

这是绝对最快的方法，并且比任何数学计算都要快。请注意，Art 解决方案中的移位指令非常耗费 CPU。

Kernighan 解决方案的问题在于，即使在汇编中手动编码，它也比我的算法慢。如果它是用 C 编译的，它可能会产生大量的内存访问，这会减慢它的速度，甚至超出它所需的大量时钟周期。

请注意，如果字节到计数的映射在该指令旁边内联，那么整个数据表将在 CPU 缓存中，因此它会非常快。在这种情况下，甚至没有 C 程序可以接近（想想慢 20 倍或更多）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T06:30:06.770

我认为您正在寻找的形式类型是“对抗性证明”。

假设一个算法 A 的运行速度比 O(n) 快。那么对于足够大的 n，A 不能查看某个位 i。然后我们声称 A 一定是不正确的。“对手”将给 A 两个字符串 s1 和 s2，除了位 i 的相反值外，它们是相同的。算法 A 将为 s1 和 s2 返回相同的值，因此对手“欺骗”了 A 给出错误的答案。因此不存在在 o(n) 时间内运行的正确算法 A。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-11T19:12:23.317

好吧，您还可以使用查找表来保存每个字节的#bits，然后将数字分成字节，将查找值相加。

它仍然是 O（位数），但系数很小。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T20:56:42.633

好的，这里似乎对顺序统计、渐近符号、“大 O”有些混淆。

Brian Kernighan 的算法在操作数方面更好，这是正确的。然而，*渐近*更好是**不正确的。**

 *这可以从[big-O 的定义中](http://en.wikipedia.org/wiki/Big_O_notation)看出。

回想一下，根据定义，当存在函数*g(n)*使得当*n*变得足够大时*f(n) ≤ kg(n)*时，函数是*O(f(n)) 。*

 ***现在，让我们将*w*定义为在字中设置的位数，并进一步注意单个字的运行时间，如上面所观察到的，是设置的位数的函数。调用该函数*c(w)*。我们知道有一个固定的字宽，叫它*ww*；显然对于任何单词， 0 ≤ *c(w)* ≤ *ww*，当然，最坏的情况是*c(w)* = *c(ww)*。所以，这个算法的运行时间，最坏的情况是*nc(ww)*。

因此，对于*n*，运行时间为 ≤ *nc(ww)*；也就是说，*n* ≤ *nc(ww)*，因此根据定义，该算法具有 O(n) 的渐近最坏情况运行时间。****

# tfs - 最后一个任务完成后如何关闭 TFS 用户故事

> ID：13823372
> 
> 赞同：2
> 
> 时间：2012-12-11T15:44:33.207
> 
> 标签：tfs

当我用最后一个打开的任务签入我的代码时，有没有办法在 TFS2010 中自动关闭用户故事？

我不想使用代码将用户故事添加到签入中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:17:08.117

TFS 不能自动执行此操作，但是[http://tfsaggregator.codeplex.com/](http://tfsaggregator.codeplex.com/)等工具可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:58:13.677

如前所述，[TFS Aggregator](http://tfsaggregator.codeplex.com)确实可以轻松做到这一点。请确保您确实想要这样做，因为您可能需要人眼来验证故事是否确实完成了。

我建议不要使用聚合器来*关闭*故事，而是将其移动到**代码完成**状态（或“准备好 UAT”，或“可部署”，或你有什么），如果你的任务没有，实际上，涵盖了**“DONE” done**所需的一切。

# cassandra - DataStax Cassandra 社区版与 Hive 0.96.0 集成

> ID：13823375
> 
> 赞同：1
> 
> 时间：2012-12-11T15:44:49.853
> 
> 标签：cassandra, integration, hive

我一直在寻找将 DataStax 社区版 Cassandra 1.1 与 Hive 0.96 集成的解决方案，但我还没有找到解决方案。有一些指针可以使用存储处理程序来集成更旧版本的 Cassandra 和 Hive。

DataStax Cassandra 企业版是唯一的解决方案吗？

# system-verilog - SystemVerilog 将函数作为参数传递

> ID：13823378
> 
> 赞同：5
> 
> 时间：2012-12-11T15:44:54.263
> 
> 标签：system-verilog

是否可以在 SystemVerilog 中将函数作为参数传递？

尽管它不起作用，但该代码有望演示。有什么帮助吗？谢谢。

```
 module funcparam;
            int result;

            function int xxx(int x, ref fun);
                    return fun(x);
            endfunction

            function int yyy(int y);
                    return y * (y + y);
            endfunction

            initial begin
                    result = xxx(5, yyy);
                    $display("result: %d", result);
            end
    endmodule 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:10:06.843

您受限于可以通过引用传递的内容：

> *   一个变量，
> *   类属性，
> *   解压结构的成员，或
> *   解压缩数组的元素。

您也许可以传入基类的句柄，尽管我怀疑这会起作用。

```
class base;
  function yyy(int x);
  endfunction
endclass

class class1 extends base;
  function yyy(int x);
  endfunction
endclass

class class2 extends base;
  function yyy(int x);
  endfunction
endclass

module funcparam;
   result;

   function int xxx(int x,input base fun);
     return fun.yyy(x);
   endfunction

   class1 cls = new;
   //class2 cls = new;

    initial begin
       result = xxx(5, cls);
      $display("result: %d", result);
    end
endmodule 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T17:14:43.570

不。

任务和函数只能接受数据类型作为参数，而函数不是数据类型。也没有办法将函数变成数据类型。

# c# - 去除货币中的小数

> ID：13823380
> 
> 赞同：7
> 
> 时间：2012-12-11T15:44:55.403
> 
> 标签：c#, asp.net-mvc, string-formatting

> **可能的重复：**
> [如何将双精度设置为四舍五入到最接近的美元的货币？](https://stackoverflow.com/questions/890100/how-do-i-format-a-double-to-currency-rounded-to-the-nearst-dollar)

如何从货币中删除小数点？

这是我将数字格式化为货币的方法：

```
string.Format("{0:C}", Amount) 
```

输出是 20,000,000.00 美元，但我需要 20,000,000 美元

提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-11T15:47:50.063

指定您想要零个小数位：

```
String.Format("{0:C0}",Amount) 
```

# javascript - 将函数引用作为回调传递给我的服务

> ID：13823387
> 
> 赞同：0
> 
> 时间：2012-12-11T15:45:03.987
> 
> 标签：javascript, angularjs

我正在尝试重构我的代码以避免 DRY，并发现我在 $resource 的两个回调函数中做同样的事情。但是我没有设法传递对函数的引用而不是函数声明本身。

我正在尝试这个：

```
emailService.getEmails(people, function(data) {
    data.foo();
}); 
```

但我想要这样的东西：

```
emailService.getEmails(people, $scope.callback);

$scope.callback = function(data) {
    data.foo();
}; 
```

我似乎没有让它工作。我还能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:54:57.780

这是因为在您运行该函数`$scope.callback`时（尚未）定义。`emailService.getEmails`您可以将其更改为：

```
emailService.getEmails(people, callback);

function callback(data) {
    data.foo();
}; 
```

# c# - 合并分组的通用列表

> ID：13823388
> 
> 赞同：0
> 
> 时间：2012-12-11T15:45:15.497
> 
> 标签：c#, asp.net, lambda

```
List<Foo> fooList = new List<Foo>();

fooList.Add(new Foo(){
    Id = 1,
    Bar = 1,
    Blah = 1
});

fooList.Add(new Foo(){
    Id = 1,
    Bar = 2,
    Blah = 1
});

fooList.Add(new Foo(){
    Id = 2,
    Bar = 1,
    Blah = 2
}); 
```

如果我`fooList`按属性对我的属性进行分组，则除每个组之外的`Id`所有属性都彼此相等。`Bar`我注意到有一个`GroupMy`lambda 方法，但是有没有办法将列表分组`Id`，并使`Bar`属性成为`Bar`每个 id 的所有 s 的列表？

因为现在我每行都有很多冗余数据。如果您希望我详细说明问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:48:46.490

使用允许您确定元素选择器的[GroupBy扩展：](http://msdn.microsoft.com/en-us/library/bb534304.aspx)

```
var query = fooList.GroupBy(f => f.Id, f => f.Bar);

// Iterate over each grouping in the collection. 
foreach (var group in query)
{
    // Print the key value.
    Console.WriteLine(group.Key);
    // Iterate over each value in the  
    // grouping and print the value. 
    foreach (int bar in group)
        Console.WriteLine("  {0}", bar);
} 
```

或者，如果您想`Bar`成为显式属性：

```
var query = fooList.GroupBy(
    f => f.Id, 
    (id, foos) => new {Id = id, Bars = foos.Select(f=>f.Bar)}); 
```

虽然我觉得这有点难以阅读。

# javascript - 在没有 iFrame 和 Popup 的 ActiveX 对象上放置一个半透明的 div

> ID：13823391
> 
> 赞同：0
> 
> 时间：2012-12-11T15:45:25.543
> 
> 标签：javascript, html, activex, opacity

我想将半透明的 div 放在正在流式传输视频的 ActiveX 对象上。我希望半透明让我（部分）看到 div 后面的视频。

我已经看到有一些方法可以[在 activeX 对象上放置一个 div，](https://stackoverflow.com/questions/3010699/place-a-div-over-an-activex-object)但这涉及 iFrame 或弹出窗口。不是我们要找的。

我们无法控制 ActiveX 流，因此我们无法在服务器端更改任何内容：如果我们这样做了，我们将避免使用 ActiveX。

# supervisord - supervisord 托管进程的最大数量？

> ID：13823402
> 
> 赞同：4
> 
> 时间：2012-12-11T15:46:16.043
> 
> 标签：supervisord

我们遇到了一个问题，supervisord 无法同时处理 200 多个进程 - 添加更多进程会导致它在启动时死机。

有人对supervisord和大量托管流程有任何经验吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:30:33.800

想通了 - 这是 supervisord 中的一个错误，它不允许超过 1024 个文件描述符。

[https://github.com/Supervisor/supervisor/issues/26](https://github.com/Supervisor/supervisor/issues/26)

# applescript-objc - 如何使用 AppleScriptObjC 创建类方法

> ID：13823410
> 
> 赞同：0
> 
> 时间：2012-12-11T15:46:38.057
> 
> 标签：applescript-objc

我正在尝试使用 ASOC 覆盖类的 +initialize 方法，但我找不到覆盖类方法的方法。甚至可能吗？

不要让我正在谈论的语言产生任何混淆，这里有一些代码：

```
script FLAppDelegate
    property parent: class "NSObject"

    -- -- Class Methods -- --
    -- Insert code here

end script 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:54:05.863

我做了一些测试，据我所知，虽然很奇怪，但使用 AppleScriptObjC 定义的方法既是类方法又是实例方法。

假设我有一个 AppleScriptObjC 文件：

```
script iTunesController
   property parent: class "NSObject"

   on playpause()
      tell application id "com.apple.iTunes" to playpause
   end playpause
end script 
```

在 Objective-C 方法中，两者：

```
- (void)callASOC
{
   iTunesControllerInstance = [NSClassFromString(@"iTunesController") new];
   [iTunesControllerInstance playpause];
   [iTunesControllerInstance release];
} 
```

和

```
- (void)callASOC
{
   [NSClassFromString(@"iTunesController") playpause];
} 
```

将调用 AppleScriptObjC 文件中的播放暂停处理程序。后一种公式将在编译时生成警告，但有效。

我找不到任何文件证实或反驳这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T10:27:21.303

感谢@Frizab，他让我想起了 NSClassFromString

所以我可以从另一个类（脚本）（NSView 子类）调用我的 AppDelegate.applescript 中的 AppleScriptObjC 方法

我不使用 AppleScriptObjC，所以可能有正确的方法，但这有效

```
 current application's  NSClassFromString("AppDelegate")'s popWindow() 
```

# postgresql - 将一个 pg 数据库从一个应用程序移动到 heroku 中的另一个应用程序

> ID：13823413
> 
> 赞同：0
> 
> 时间：2012-12-11T15:46:42.570
> 
> 标签：postgresql, heroku

我有一个在 heroku 上运行的应用程序。这个应用程序有一个数据库，我需要将此数据库从一个应用程序移动到另一个应用程序。我正在考虑创建备份，然后将该备份上传到新应用程序中，但我确信一定有一些更容易做的事情，但我找不到怎么做！

我的数据库是 9 美元/月，基本的...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:00:53.290

不需要 - 只需`DATABASE_URL`使用旧应用程序更新新应用程序上的配置变量。

# wcf - 为什么有时端点地址为空

> ID：13823414
> 
> 赞同：2
> 
> 时间：2012-12-11T15:46:44.567
> 
> 标签：wcf, iis, web-config, wcf-binding

假设我有一个托管在 IIS 中的 WCF 服务，端点中的地址可以为空吗？我在[WCF 教程中看到了一个示例。](http://wcftutorial.net/Binding-and-Behavior.aspx)

```
<system.serviceModel>
<services>
  <service name="MathService"
    behaviorConfiguration="MathServiceBehavior">
    <endpoint address="" contract="IMathService"
      binding="wsHttpBinding"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="MathServiceBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T03:02:54.653

如果端点地址为空，它将在您实例化服务时使用 ServiceHost 指定的 BaseAddress。

# iphone - iPhone 模拟器不再以 4 英寸分辨率运行应用程序

> ID：13823416
> 
> 赞同：1
> 
> 时间：2012-12-11T15:46:45.710
> 
> 标签：iphone, objective-c, ios, xcode, ios-simulator

在整个开发过程中，我的应用程序在 3.5 英寸和 4 英寸屏幕上的模拟器中运行良好。但是，当我最终将图标和启动图像添加到应用程序时，4 英寸模拟器不再工作。它以 3.5 英寸分辨率运行应用程序，顶部和底部都有黑条。它在我的实际 iPhone 5 上运行良好，所以我认为这是模拟器的错误。其他人经历过这种情况并知道解决方法吗？

问候，
迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:47:58.140

您缺少`Default-568h@2x.png`启动图像，如果它包含在您的项目中，请确保它也包含在您的目标中。

# scala - 如何逐步运行进化？

> ID：13823422
> 
> 赞同：2
> 
> 时间：2012-12-11T15:46:54.503
> 
> 标签：scala, playframework, playframework-2.0

我正在学习 Play 2.0 框架，我注意到其中一种演变存在一些问题。我有一些时间，直到我可以通过试验/错误找到问题......

但是我想知道是否有某种方法可以逐步进行进化，这样我就可以检查有问题的进化在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:54:15.170

不，你不能。防止这些问题的最佳方法是在创建进化时在测试数据库（仅为此目的创建）中手动测试进化，以便您可以单独验证每个命令。

鉴于您已经有错误，您可以这样做。另一种方法是在进化文件中注释行并重新应用“新”进化，但这可能（可能）破坏您的数据库，并且取决于您在那里用于测试目的的数据量，这可能是一个不好的选择.

# javascript - 尝试学习和运行一个简单的 if-else-if 脚本，但没有得到结果

> ID：13823425
> 
> 赞同：0
> 
> 时间：2012-12-11T15:47:01.550
> 
> 标签：javascript, if-statement

这是我制作并尝试运行的嵌套脚本：

```
 var coin = Math.round(Math.random() * 2);
    var character = Math.round(Math.random() * 2);
    if (character == 1) {
        //It's a kid
        if (coin == 0)   {
            alert("where'd the coin go?");
        }   else if (coin == 1) {
                alert("you got heads dude");
            }   else if (coin== 2) {
                    alert("you got tails dude");
                }
    }   else {
        //now it's a computer
        if (coin ==0) {
            alert("3RR0R C01N G0N3");
        }   else if (coin==1) {
                alert("H34D5");
            }   else if (coin==2) {
                    alert("T41L5");
        } 
```

可悲的是，什么都没有出现。有什么建议么？edit-t 更新为正确的代码格式，抱歉错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:49:53.710

您缺少最后一个括号：

```
var coin = Math.round(Math.random() * 2);
    var character = Math.round(Math.random() * 2);
    if (character == 1) {
        //It's a kid
        if (coin == 0)   {
            alert("where'd the coin go?");
        }   else if (coin == 1) {
                alert("you got heads dude");
            }   else if (coin== 2) {
                    alert("you got tails dude");
                }
    }   else {
        //now it's a computer
        if (coin ==0) {
            alert("3RR0R C01N G0N3");
        }   else if (coin==1) {
                alert("H34D5");
            }   else if (coin==2) {
                    alert("T41L5");
        }
    } 
```

在处理此类“神秘”的东西时，您应该始终检查浏览器的控制台输出！

哦，如果你需要一个简单的 JS 控制台来尝试代码片段 - 使用[jsbin](http://jsbin.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:49:39.487

看起来你错过了`}`关闭`else`语句。

**[例子](http://jsfiddle.net/mNUAD/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:50:37.743

你最大`else`的没有关闭。

# php - 获取所有xml元素ID并计入一个数字的方法？

> ID：13823429
> 
> 赞同：1
> 
> 时间：2012-12-11T15:47:08.753
> 
> 标签：php, xml

好的，可以说我有一个看起来像这个例子的xml，

```
 <?xml version="1.0" encoding="UTF-8"?>

   <stats id="865" name="blaah">
       <example name="blaahblaah">
           <example1>
               <x ppoints="500"/>
           </example1>
           <example2>
               <x ppoints ="150"/>
               <x points ="500"/>
               <x ppoints ="140"/>
               <x points="200"/>
           </example2>
       </example>
   </stats> 
```

我在这里要做的是获取所有点并将它们四舍五入为一个数字和所有点并将它们四舍五入为一个数字，就像这样

统计数据：“四舍五入” pp & “四舍五入” p

帮助任何人？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:50:52.637

在这种情况下，据我了解文档的结构可以包含多个“示例”节点，我认为最好的方法是加载 XML 文档并使用 XPath 表达式来获取具有`ppoints`属性和`points`属性的所有节点。

使用 XPath 有两种可能的解决方案。一种使用[SimpleXMLElement::xpath](http://php.net/manual/en/simplexmlelement.xpath.php)检索所有必需的节点并手动对它们求和。另一个使用[DOMXPath::evaluate](http://de2.php.net/manual/en/domxpath.evaluate.php)允许评估任何类型的 XPath 表达式并仅使用 XPath 对值求和。后一种解决方案更简单。

*DOMXPath::评估*

```
<?php

$doc = new DOMDocument;
$doc->load('file.xml');
$xpath = new DOMXPath($doc);

$sum_ppoints = $xpath->evaluate('sum(//x/@ppoints)');
$sum_points = $xpath->evaluate('sum(//x/@points)');

print "Ppoints: $sum_ppoints; Points: $sum_points\n";

?> 
```

*SimpleXMLElement::xpath*

```
<?php

// Load XML file
$file = "file.xml";
$content = file_get_contents($file);
$xml = new SimpleXMLElement($content);

// Compute sum ppoints
$sum_ppoints = 0;
$nodes = $xml->xpath('//x[@ppoints]');
foreach ($nodes as $node) {
    $sum_ppoints += $node->attributes()->ppoints;
}

// Compute sum points
$sum_points = 0;
$nodes = $xml->xpath('//x[@points]');
foreach ($nodes as $node) {
    $sum_points += $node->attributes()->points;
}

print "Ppoints: $sum_ppoints; Points: $sum_points\n";

?> 
```

# javascript - 遍历数组和具有属性的对象

> ID：13823432
> 
> 赞同：0
> 
> 时间：2012-12-11T15:47:12.950
> 
> 标签：javascript, raphael, qtip2

我不确定问题的标题是否正确。看代码：

```
var trails = new Array(trail1, trail2, trail3, trail4, trail5, trail6, trail7, trail8, trail9, trail10, trail11, trail12, trail13);
    var circles = new Array(circle1, circle2, circle3, circle4, circle5, circle6, circle7, circle8, circle9, circle10, circle11, circle12, circle13);
    var texts = new Array(text1, text2, text3, text4, text5, text6, text7, text8, text9, text10, text11, text12, text13);
    for(var i=0;i<=13;i++) {
        $([trails[i].node,circles[i].node,texts[i].node]).qtip({
        content: {
            text: 'test qtip',
            title: {text: 'test', button: 'close'}
        },
        position: {
            target: 'mouse',
            adjust: {mouse: false}
        },
        show: {
            event: 'click'
        },
        style: 'qtip-rounded qtip-shadow qtip-blue',
        hide: {
            event: 'click '
        }
    });
    } 
```

在这个例子中，我在另一个数组中调用一个数组元素，所以我不确定它是否正确，否则当点击 circle[i] 或 text[i] 时 .qtip 将不会显示，但只有在 onclick 轨迹时才会显示 [一世]。还有一个 .node 属性使这个问题对于初学者来说更加复杂。有任何想法如何改进代码以使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-31T10:54:04.340

首先：你的循环有'<='，你的数组包含13个项目，'<='将迭代14次可能会导致你遇到的任何错误......

只是为了稍微清理一下代码......（这部分是任意的）

```
var trails = [],circles = [],texts = [], i = 13;
while (i--){
    trails[i] = eval('trail'+i);//parses the text to return your js variable
    circles[i] = eval('circle'+i);
    texts[i] = eval('text'+i);
    . . .
    /** Continue with whatever else you wish to do inside the loop,
     *  I just included this bit to show how you can instantiate your
     *  arrays without having to hard code each of your variables...
     *  Also, it is possible to use the variables name as a reference
     *  inside the array like so: trails['trail'+i] = . . . 
     *  that way you can still call each variable by name. 
     */
} 
```

作为一个提示，js 在对数组使用键 'new' 时会变得暴躁，请改用 '[]'，您可以在此处阅读原因：[W3Schools.com - JS - Best Practices](http://www.w3schools.com/js/js_best_practices.asp)

# c# - 将字符串排序为另一个字符串的更简洁的方法

> ID：13823433
> 
> 赞同：2
> 
> 时间：2012-12-11T15:47:16.043
> 
> 标签：c#, string, linq, string-formatting

我有一个可能看起来像这样的字符串：“3, 7, 12-14, 1, 5-6”

我需要做的是将其更改为如下所示的字符串：“1, 3, 5, 6, 7, 12, 13, 14”

我已经使以下代码工作，但我非常感谢帮助如何用更少的代码行以更清洁的方式做到这一点：

```
private string sortLanes(string lanesString)
    {
        List<string> sortedLanes = new List<string>();

        if (lanesString.Contains(',') || lanesString.Contains('-'))
        {
            List<string> laneParts = lanesString.Split(',').ToList();

            foreach (string lanePart in laneParts)
            {
                if (lanePart.Contains('-'))
                {
                    int splitIndex = lanePart.IndexOf('-');
                    int lanePartLength = lanePart.Length;

                    int firstLane = Convert.ToInt32(lanePart.Substring(0, splitIndex));
                    int lastLane = Convert.ToInt32(lanePart.Substring(splitIndex + 1, lanePartLength - splitIndex - 1));
                    while (firstLane != lastLane)
                    {
                        sortedLanes.Add(firstLane.ToString().Trim());
                        firstLane++;
                    }
                    sortedLanes.Add(lastLane.ToString());
                }
                else
                {
                    sortedLanes.Add(lanePart.Trim());
                }
            }
            sortedLanes.Sort();
            sortedLanes = sortedLanes.OrderBy(x => x.Length).ToList();

            lanesString = "";
            foreach (string lane in sortedLanes)
            {
                if (lanesString.Length == 0)
                {
                    lanesString = lane;
                }
                else
                {
                    lanesString = lanesString + ", " + lane;
                }
            }
        }
        else
        {
            return lanesString;
        }
        return lanesString;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:04:56.543

我将首先拆分，`,`然后将每个值转换为单个整数或所需范围。获取结果并重新排序，然后连接回字符串。像这样的东西。

```
 string test = "3, 7, 12-14, 1, 5-6";
    var items = test.Split(',');
    var ints = items.SelectMany(item => Expand(item));
    string result = string.Join(", ", ints.OrderBy(i => i).ToArray());

    private static IEnumerable<int> Expand(string str)
    {
        if (str.Contains('-'))
        {
            var range = str.Split('-');
            int begin = int.Parse(range[0]);
            int end = int.Parse(range[1]);
            for (int i = begin; i <= end; i++)
                yield return i;
        }
        else
            yield return int.Parse(str);
    } 
```

当然，您可能想要添加一些错误检查，但我会留给您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:05:36.477

这将产生想要的结果（部分基于@Tigran的[错误答案）：](https://stackoverflow.com/a/13823591/1583)

```
var parts = "3, 7, 12-14, 1, 5-6".Split(new string[] {", "}, StringSplitOptions.None).ToList();

var finalResult = new List<int>();
foreach(var item in parts)
{
    if(item.Contains("-"))
    {
        var rangeParts = item.Split('-');
        var first = int.Parse(rangeParts[0]);
        var second = int.Parse(rangeParts[1]);

        var result = Enumerable.Range(first, second - first + 1); 

        finalResult.AddRange(result);
    }
    else
    {
       finalResult.Add(int.Parse(item));
    }
}
var sorted = finalResult.OrderBy(i => i);
var resultString = string.Join(", ", sorted); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:08:18.510

正则表达式在这里可以很好地工作......

```
static void Main()
{
    Assert.AreEqual("1, 3, 5, 6, 7, 12, 13, 14", Transform("3, 7, 12-14, 1, 5-6"));
}

private static string Transform(string input)
{
    StringBuilder sb = new StringBuilder();
    foreach(Match m in new Regex(@"(?<start>\d+)(?:-(?<end>\d+))?(?:,|$)\s*").Matches(input)
        .OfType<Match>().OrderBy(m => int.Parse(m.Groups["start"].Value)))
    {
        int start = int.Parse(m.Groups["start"].Value);
        int end = !m.Groups["end"].Success ? start : int.Parse(m.Groups["end"].Value);
        foreach (int val in Enumerable.Range(start, end - start + 1))
            sb.AppendFormat("{0}, ", val);
    }

    if (sb.Length > 0)
        sb.Length = sb.Length - 2;//remove trailing comma+space;
    return sb.ToString();
} 
```

**更新**

如果我想让它变得混乱，我只需使用一行代码：

```
return String.Join(", ",new Regex(@"(?<start>\d+)(?:-(?<end>\d+))?(?:,|$)\s*").Matches(input)
    .OfType<Match>().OrderBy(m => int.Parse(m.Groups["start"].Value)).SelectMany(m => 
        Enumerable.Range(int.Parse(m.Groups["start"].Value), int.Parse(m.Groups["end"].Success
        ? m.Groups["end"].Value : m.Groups["start"].Value) - int.Parse(m.Groups["start"].Value) + 1))
    .Select(i => i.ToString()).ToArray()); 
```

哈哈 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:22:32.840

如果你喜欢 Linq：

```
string input = "3, 7, 12-14, 1, 5-6";
List<int> all = input.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
    .Select(r => new
    {
        Range = r,
        Parts = r.Split(new[] { '-' }, StringSplitOptions.RemoveEmptyEntries)
                 .Select(p => int.Parse(p))
    })
    .SelectMany(x => Enumerable.Range(x.Parts.First(), 1 + x.Parts.Last() - x.Parts.First()))
    .ToList(); 
```

[**演示**](http://ideone.com/BYbEUZ)

# qt - QT 创建器中的 C 文件和库问题

> ID：13823435
> 
> 赞同：2
> 
> 时间：2012-12-11T15:47:16.027
> 
> 标签：qt, libraries

我在windows环境下工作，我最近安装了QT creator，想从QT中的.c文件执行ac程序。该文件无法编译的原因有几个问题，首先它无法识别库头文件“time.h”“math.h”甚至“stdio.h”

第二，我不确定它是否会在修复库后编译，因为我将 .pro 文件中的包含路径更改为库的路径。并且仍然存在编译问题。

有没有办法，编译器知道该文件是 .c 而不是 c++ ...我该如何继续。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:17:11.160

听起来您安装了 IDE，但没有安装 SDK。SDK 附带 gcc 和您所指的标准库。如果需要使用自己的单独编译器，可以在 Qt Creator > Tools > Options > Build and Run > Tool Chains 中进行配置。

对于您的问题，可以在此处找到一些附加信息：

[http://www.qtcentre.org/threads/33974-Compiling-c-files-using-C-and-QT](http://www.qtcentre.org/threads/33974-Compiling-c-files-using-C-and-QT)

所以，我的建议是下载完整的 Qt SDK，然后挑选你想要的元素，并确保它包含一个编译器。

希望有帮助。

# ios - UITableView reorderControl（或contentView）宽度

> ID：13823440
> 
> 赞同：1
> 
> 时间：2012-12-11T15:47:25.517
> 
> 标签：ios, cocoa-touch, uitableview

我使用`UITableView`可变单元高度。该表始终处于编辑模式（显示重新排序控件）。

问题是，为了计算单元格的高度`tableView:heightForRowAtIndexPath:`，我需要知道 的宽度`contentView`。或者，知道重新排序控件的宽度就足够了。

有没有办法在不从未记录的子视图中获取它或使用固定大小值的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:11:34.010

这几乎是一个 hack，但它应该可以工作。知道重新排序附件宽度在所有设备上始终为 40px，编辑模式下的单元格内容宽度应始终等于：

```
CGFloat contentWidth = tableView.frame.size.width - 40.0f; 
```

# r - 在 GML 中获取克里金结果

> ID：13823443
> 
> 赞同：1
> 
> 时间：2012-12-11T15:47:40.013
> 
> 标签：r

是否有可能获得 GML 格式的坐标、插值和预测方差的克里金结果？

```
require(gstat)
data(meuse)
coordinates(meuse) = ~x+y
data(meuse.grid)
gridded(meuse.grid) = ~x+y
m <- vgm(.59, "Sph", 874, .04)
# ordinary kriging:
x <- krige(log(zinc)~1, meuse, meuse.grid, model = m) 
```

x 包含坐标和插值锌值和相关的方差。我希望它采用 GML 格式，对于每个点我都可以有坐标和值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:31:45.763

就像是：

```
require(rgdal)
writeOGR(x,"x.gml","x",driver="GML") 
```

为您提供具有此类功能的 GML：

```
 <gml:featureMember>
    <ogr:x fid="x.0">
      <ogr:geometryProperty><gml:Point><gml:coordinates>181180,333740</gml:coordinates></gml:Point></ogr:geometry
Property>
      <ogr:var1.pred>6.49662446268745</ogr:var1.pred>
      <ogr:var1.var>0.310842119817784</ogr:var1.var>
    </ogr:x>
  </gml:featureMember> 
```

# java - Java 程序未正确添加金额

> ID：13823452
> 
> 赞同：0
> 
> 时间：2012-12-11T15:48:01.050
> 
> 标签：java, methods

所以我对java还是很陌生。我已经写了这个，但不确定为什么当我运行它时，金额不会添加到客户端中设置的内容中。

例如：我输入 500 作为起始余额，如果我点击存款，然后输入 500，然后点击案例 3，它应该说 1000 但它仍然是 500。然后如果我点击提款，它说我有 -500。

有任何想法吗？谢谢

```
package bankaccount;
import java.util.Random;
import java.util.Scanner;

public class Client {
 public static void main(String args[]) {
     Scanner input = new Scanner(System.in);       
     System.out.println("Enter your Name: ");
            String cusName = input.nextLine();
            Random randomGenerator = new Random();
            int accNo = randomGenerator.nextInt(100000);
            System.out.println("Enter Initial Balance: ");
            int balance = input.nextInt();
            BankAccount b1 = new BankAccount(cusName, accNo, balance);
            int menu;
            System.out.println("Menu");
            System.out.println("1\. Deposit Amount");
            System.out.println("2\. Withdraw Amount");
            System.out.println("3\. Display Information");
            System.out.println("4\. Exit");
            boolean quit = false;
            do {
                    System.out.print("Please enter your choice: ");
                    menu = input.nextInt();
                    switch (menu) {
                    case 1:            
                             System.out.print("Enter depost amount:");
                             Money.amount = input.nextInt(); 
                             b1.getDeposit(); 

                            break;

                    case 2:
                             System.out.println("Current Account Balance=" + b1.getBalance());
                             System.out.print("Enter withdrawal amount:");
                             Money.amount = input.nextInt();
                             b1.getWithdraw();

                            break;

                    case 3:
                            b1.display();
                            break;
                    case 4:
                            quit = true;
                            break;
                    }
            } while (!quit);
    } 
```

* * *

```
public class Money
{

public static int accountNumber, balance=0;
static int amount;

static String name;
public void setDeposit(int amount) {   

            balance = balance + amount;   
    }
public int getDeposit()
{

            balance = balance + amount;
            if (amount < 0) {
                    System.out.println("Invalid");
            }
                                    return 1; 

}
 public void setBalance(int b)
 {
     b = balance;
 }
 public int getBalance()
 {
     return balance;
 }

 public void setWithdraw(int amount)  {

            balance = balance - amount;
    }
 public int getWithdraw()
 {
            balance = balance - amount;
     if (balance < amount) 
     {
                    System.out.println("Not enough funds.");
                    return 1;
            }
           else if (amount < 0) {
                    System.out.println("Invalid");
                    return 1;}
                    else 
                             return 0;
 } 
```

* * *

```
import java.util.*;

public class BankAccount extends Money {
    static String name;
    public static int balance, amount, acctNum;
    Money customerMoney;

    BankAccount(String name, int accNo, int bal) {
            this.name = name;
            this.acctNum = accNo;
            this.balance = bal;
            this.customerMoney = new Money();
    }
            void display() {
            System.out.println("Name:" + name);
            System.out.println("Account No:" + acctNum);
            System.out.println("Balance:" + balance);

    }

    void displayBalance() {
            System.out.println("Balance:" + balance);
    }
    public Money getMoney(){
          return this.customerMoney;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:00:03.257

最大的问题在于声明**`balance=0`**

```
public static int accountNumber, balance=0;
                                 ^^^^^^^^^ 
```

每次您要插入金额时，您的余额**为零**。

你应该用过`setDeposit(input.nextInt())`

在`public void setBalance(int b)`,`b = balance;`应该是`balance = b;`

此外，您的`amount`,`balance`变量应该`Float`代替`int`as `balance`/ `amount`can be `23434.22`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:34:09.693

I would remove all the `public static int` variables that you are using. These are going to cause confusion because it's much harder to follow what their values are as the program executes. Best to encapsulate your logic into `BankAccount` using private variables and public methods to modify them.

I would, personally, eliminate the `Money` class from your code. It's just going to cause confusion and with your simplified logic is not required. Let's assume the account holds some arbitrary count of 'money' but there is no real-life money actually backing it up - (kind of like real life, it's just 'numbers on a screen' right?) - in this case we wouldn't need the `Money` class, just an `int` for our `BankAccount`'s `balance`.

Without trying to make too many changes to your underlying functionality, I rewrote as the below two classes:

A `BankAccount` class:

```
package banking;

public class BankAccount {

    /**
     * The balance of this account. <br/>
     * Assumes integer money (Floating point math is horrible and who really
     * needs pesky pence or cents right?!)
     */
    private int balance;
    /**
     * The account number
     */
    private final int acctNum;
    /**
     * Name of the account holder
     */
    private final String name;

    /**
     * Construct our basic account with an account number, account holder and
     * starting balance.
     *
     * @param name
     * @param accNo
     * @param bal
     */
    public BankAccount(String name, int accNo, int bal) {
        this.name = name;
        this.acctNum = accNo;
        this.balance = bal;
    }

    /**
     * Make a deposit to this account by adding a fixed sum to the existing
     * balance. <br/>
     *
     * @param amount
     */
    public void deposit(int amount) {
        if (amount <= 0) {
            throw new IllegalArgumentException("You cannot deposit zero or less");
        } else {
            this.balance += amount;
        }
    }

    /**
     * Make a withdrawal from this account by subtracting a fixed amount from
     * the existing balance. <br/>
     *
     * @param amount
     */
    public void withdraw(int amount) {
        if (amount > balance) {
            throw new IllegalArgumentException("Insufficient Funds");
        } else if (amount <= 0) {
            throw new IllegalArgumentException("You cannot withdraw zero or less");
        } else {
            balance -= amount;
        }
    }

    /**
     * Get the account holder name.
     *
     * @return
     */
    public String getName() {
        return name;
    }

    /**
     * Get the current account balance.
     *
     * @return
     */
    public int getBalance() {
        return balance;
    }

    /**
     * Get the account identifier for this account.
     *
     * @return
     */
    public int getAcctNum() {
        return acctNum;
    }

    /**
     * Debug print method.
     */
    public void display() {
        System.out.println("Name:" + name);
        System.out.println("Account No:" + acctNum);
        System.out.println("Balance:" + balance);
    }
} 
```

And the main class:

```
package banking;

import java.util.Random;
import java.util.Scanner;

public class BankMain {

    public static void main(String args[]) {
        Scanner input = new Scanner(System.in);

        System.out.println("Enter your Name: ");
        String customerName = input.nextLine();

        Random randomGenerator = new Random();
        int acctNo = randomGenerator.nextInt(100000);

        System.out.println("Enter Initial Balance: ");
        int balance = input.nextInt();

        BankAccount acct = new BankAccount(customerName, acctNo, balance);

        System.out.println("Menu");
        System.out.println("1\. Deposit Amount");
        System.out.println("2\. Withdraw Amount");
        System.out.println("3\. Display Information");
        System.out.println("4\. Exit");

        boolean quit = false;
        int menu;
        do {
            final int transaction;
            System.out.print("Please enter your choice: ");
            menu = input.nextInt();
            switch (menu) {
                case 1:
                    System.out.print("Enter depost amount:");
                    transaction = input.nextInt();
                    acct.deposit(transaction);
                    break;

                case 2:
                    System.out.println("Current Account Balance=" + acct.getBalance());
                    System.out.print("Enter withdrawal amount:");
                    transaction = input.nextInt();
                    try {
                        acct.withdraw(transaction);
                    } catch (IllegalArgumentException iaEx) {
                        System.out.println(iaEx.getMessage());
                    }
                    break;

                case 3:
                    acct.display();
                    break;

                case 4:
                    quit = true;
                    break;
            }
        } while (!quit);
    }
} 
```

This is still far from perfect, but I feel it's easier to follow for having the static variables and `Money` class removed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:29:15.623

You have many problems with the code e.g. none of your fields should be static, but the main one is that you have multiple duplicated fields.

e.g. In Money you have

```
public static int accountNumber, balance=0;
static int amount;

static String name; 
```

and in BankAccount you have

```
static String name;
public static int balance, amount, acctNum;
Money customerMoney; 
```

which means you have multiple fields called `name`, `balance` and `amount`. Some of the code uses the first group of fields and some of the code uses the second. You also have a `customerMoney` which is not updated directly.

To avoid confusion I suggest you have each field be non-static and in only one place. Remove the `customerMoney` as you might be tempted to use it ;)

# jquery - 我将如何将一个单击功能嵌套在另一个单击功能中？

> ID：13823453
> 
> 赞同：1
> 
> 时间：2012-12-11T15:48:00.293
> 
> 标签：jquery

我有一个表单，根据用户在回答第一个问题时选择/单击的内容，将显示一组不同的字段。例如，您更喜欢 Xbox 还是 ps3？然后根据答案，将显示一组 xbox 或 ps3 定制的字段。我还可以通过单击“添加朋友的偏好！”来克隆这些表单字段！关联。我可以单独执行这两个单击功能，但是无法将它们组合在一起，我可以单击链接以添加一组附加字段，然后可以单击某些内容以隐藏/显示我想要在附加组中的字段字段。

我的显示/隐藏 ps3//xbox 功能：

```
$(document).ready(function(){
    $("input[name$='console']").click(function(){
        var radio_value = $(this).val();
        if (radio_value=="ps3") {
            $("#ps3").show("fast");
            $("#xbox").hide();
        }
        else if (radio_value=="xbox") {
            $("#xbox").show("fast");
            $("#ps3").hide();
        }
    });
    $("#ps3").hide();
    $("#xbox").hide();
});

$(document).ready(function(){
    $("a#addmore").click(function() {
        $("#addpreference").clone().appendTo("form");
    });
}); 
```

# android - 使用 SAXparser 解析 Xml 后，如何支持列表视图中的所有字符（ı、ö、ü、ç、ğ、.. 例如）？

> ID：13823454
> 
> 赞同：0
> 
> 时间：2012-12-11T15:48:09.443
> 
> 标签：android, parsing, listview, character, saxparser

我用SAXparser解析xml标签。然后放在listview上。但是这些字符没有显示。而不是显示问号（？）。我怎么能弄清楚这个问题？

# php - 使用 cURL 获取文件的最后 MB

> ID：13823455
> 
> 赞同：3
> 
> 时间：2012-12-11T15:48:14.400
> 
> 标签：php, curl

是否可以使用 cURL 获取文件的最后 1MB 数据？我知道我可以获得第一个 MB，但我需要最后一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:23:14.387

是的，您可以通过在请求中指定 HTTP Range 标头来执行此操作：

```
// $curl = curl_init(...);
$lower = $size - 1024 * 1024;
$upper = $size;
url_setopt($curl, CURLOPT_HTTPHEADER, array("Range: bytes=$lower-$upper")); 
```

注意：您需要确保您请求数据的服务器允许这样做。发出`HEAD`请求，并检查`Accept-Ranges`标头。

这是一个示例，您应该可以对其进行调整以满足您的需求：

```
// Make HEAD request
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_HEADER, true);
curl_setopt($curl, CURLOPT_NOBODY, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec($curl);

preg_match('/^Content-Length: (\d+)/m', $data, $matches);
$size = (int) $matches[1];
$lower = $size - 1024 * 1024;

// Get last MB of data
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_HTTPGET, true);
curl_setopt($curl, CURLOPT_HTTPHEADER, array("Range: bytes=$lower-$size"));

$data = curl_exec($curl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-09T13:57:00.010

我知道这是一个老问题，但你可以通过只指定上限来做到这一点：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://example.com");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

// Get the last 100 bytes and echo the results
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Range: bytes=-100"));
echo htmlentities(curl_exec($ch)) . "<br /><br />";

// Get the last 200 bytes and echo the results
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Range: bytes=-200"));
echo htmlentities(curl_exec($ch)); 
```

这将返回：

```
100 bytes: <p><a href="http://www.iana.org/domains/example">More information...</a></p> </div> </body> </html> 

200 bytes: ou may use this domain in examples without prior coordination or asking for permission.</p> <p><a href="http://www.iana.org/domains/example">More information...</a></p> </div> </body> </html> 
```

来自[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-14.35)：

> 通过选择 last-byte-pos，客户端可以在不知道实体大小的情况下限制检索的字节数。

# objective-c - Add a second subtitle row to UITableViewCellStyleSubtitle

> ID：13823462
> 
> 赞同：0
> 
> 时间：2012-12-11T15:48:32.493
> 
> 标签：objective-c, cocoa-touch, uitableview

I have already made a custom class with the init:

```
if(self = [super initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifier]) {
} 
```

As I wanted to add a blue texted label to the right hand side of the cell and have it go right when selected otherwise it looked odd when highlighted:

```
self.sizeTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(self.contentView.frame.size.width-110, 0.0, 100.0, 44.0)];
self.sizeTextLabel.textAlignment = NSTextAlignmentRight;
self.sizeTextLabel.backgroundColor = [UIColor whiteColor];
self.sizeTextLabel.textColor = [UIColor colorWithRed:81/255.0 green:102/255.0 blue:145/255.0 alpha:1.0];
self.sizeTextLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleHeight;
[self.contentView addSubview:self.sizeTextLabel]; 
```

There is probably a better way of doing that ^

What I would like to do is add another label that is effectively another subtitle row, I then increase the height of the row when the cell is created with the heightForRowAtIndexpath method.

**Problem: When I add a new label 'row' to the content view, it does not get higher (the default views shift to the middle of the view). How do I create and position it correctly below the subtitle view? If I were to change the first subtitle to multiline it would be nice if the second label knew what to do.**

**I wish cocoa had relative positioning. Or I haven't found it yet!**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:03:11.200

您可以将详细文本标签设为多行并将两个字符串添加到一个标签中。在此示例中，我的数据在其字典中有三个键，“main”用于主标签文本，“detail1”和“detail2”用于两个字幕字符串。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    NSDictionary *object = _objects[indexPath.row];
    cell.textLabel.text = object[@"main"];
    NSString *concat = [NSString stringWithFormat:@"%@\n%@",object[@"detail1"],object[@"detail2"]];
    cell.detailTextLabel.numberOfLines = 2;
    cell.detailTextLabel.text = concat;
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:57:17.990

您可以使用界面生成器制作自定义单元格并使用它来代替 UITableViewCell。

检查这个：[http ://www.backslashtraining.com/blog/2012/3/10/ios-5-tip-of-the-week-custom-table-view-cells.html](http://www.backslashtraining.com/blog/2012/3/10/ios-5-tip-of-the-week-custom-table-view-cells.html)

# php - 尝试隐藏 div 时函数名必须为字符串错误

> ID：13823464
> 
> 赞同：1
> 
> 时间：2012-12-11T15:48:31.750
> 
> 标签：php, fatal-error

我试图在发布特定值时隐藏 div。我希望能够在 div 的 style="" 中回显附加的 css。这样做时出现以下错误：

致命错误：函数名称必须是第 185 行 /home/bryantrx/public_html/wo/or/wo_add.php 中的字符串

这是我第 185 行的代码：

```
<div <?php if (!$_POST('JobTypeDDL') == "New Mobility"){echo "style='display:none;'";}?>>test</div> 
```

如果有其他方法可以做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:50:07.470

`$_POST`是一个[超级全局的](http://php.net/manual/en/reserved.variables.post.php)*关联数组* ，而不是一个*函数*。

 *### 错误的：

```
$_POST('JobTypeDDL') 
```

### 对：

```
$_POST['JobTypeDDL'] 
```

**注意：**我鼓励您通读[PHP 类型](http://php.net/manual/en/language.types.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:50:16.323

您正在使用`$_POST`错误的括号进行访问：使用方括号：

```
$_POST['JobTypeDDL'] 
```

使用您的语法，PHP 认为您正在尝试调用一个以`$_POST`[which is an array]的值`JobTypeDDL`作为参数调用的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:50:45.027

使用此固定代码：

```
<div <?php if($_POST['JobTypeDDL'] == 'New Mobility') { echo "style='display:none;'"; } ?>>test</div> 
```

您的代码的问题是 $_POST('JobTypeDDL') 应该是 $_POST['JobTypeDDL']。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:50:13.663

你需要这样做，

```
<div <?php if (!$_POST['JobTypeDDL'] == "New Mobility"){echo "style='display:none;'";}?>>test</div> 
```

`$_POST`是一个数组，而不是一个函数。*

# python - Multiple accounts in Outlook; can I access all of them using IMAP?

> ID：13823469
> 
> 赞同：0
> 
> 时间：2012-12-11T15:48:39.813
> 
> 标签：python, imap

Basically, I have 3 accounts that I can access in Outlook, but I only have the username & password for one. Is there any way I can use IMAP to access the other 2 accounts, or do I need credentials? I'm using the python imaplib module, but I don't think that matters.

# android - UI 元素是在 Fragment 还是 FragmentActivity 中启动的？

> ID：13823472
> 
> 赞同：1
> 
> 时间：2012-12-11T15:48:51.513
> 
> 标签：android, android-fragments

我正在将 Activity 类型的应用程序移植到 Fragments 类型的应用程序。我有点困惑我应该在哪里启动片段的 UI 元素。

例如，如果我`Fragment`在`FragmentActivity`课堂上启动一个按钮，我**不会收到错误**。

```
 btnOne = (Button) findViewById(R.id.btn_one); 
```

但是，如果我尝试启动`onClick`侦听器，则会收到类型**错误**`java.lang.NullPointerException`。

`findViewById`再说一次，我在`Fragment`课堂上找不到方法。

我真的被迫开始`FragmentActivity`并指定听众`Fragment`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:58:58.133

您通常在片段中启动按钮。一个例子是：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View fragmentView = inflater.inflate(R.layout.yourlayout, container, false);

        Button yourbutton = (Button) fragmentView.findViewById(R.id.button);
        yourbutton.setOnClickListener(new View.OnClickListener(){

               @Override
               public void onClick(View v) {
                     //Do your thing
               }
        }

        return fragmentView;
} 
```

# iphone - reset brightness after exit application

> ID：13823477
> 
> 赞同：0
> 
> 时间：2012-12-11T15:49:02.627
> 
> 标签：iphone, objective-c, ios, uiapplicationdelegate

My code:

```
-(IBAction)changeSlider:(id)sender {

    [[UIScreen mainScreen] setBrightness:slider.value];

    NSString *string = [[NSString alloc] initWithFormat:@"%.1f", slider.value];
    label.text = string; 
```

When I leave my application on backlight brightness 1.0, the brightness stays. How to release it? So it goes back on the usual brightness what you have setup in the settings?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:00:11.623

我不确定这是否可行，因为我面前没有测试设备，但是您始终可以将原始亮度存储在某个地方，然后在 AppDelegate 中将亮度恢复到原始值

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
  [[UIScreen mainScreen] setBrightness:originalBrightness];

} 
```

# python - Finding all TR (from html ) in [Python] I want to get all my that's inside . I wrote this code: matchObj = re.search(r'(.*?)', txt, re.M|re.I|re.S) but I only get the first group. 问问题 问问题 2012-12-11T15:49:04.647 6217 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I want to get all my that's inside . I wrote this code: matchObj = re.search(r'(.*?)', txt, re.M|re.I|re.S) but I only get the first group. how can I get all groups? Thanks in advance :) I think I know your problem. Look at it this way: The line isn't drawn until you stroke the path. So whatever pattern is in effect when you call CGContextAddLineToPoint (for example) doesn't matter. When you call CGContextAddLineToPoint you're not drawing a line, you are simply building a path. I'm guessing that your subroutine for drawing the axes does not stroke them. The axes don't get drawn until you later call CGContextStrokePath, at which point the dashed pattern is in effect. pythonregexhtml-parsing 4 2 回答 2 This answer is useful 9 findall matchObj = re.findall(r'(.*?)', txt, re.M|re.I|re.S) search只找到给定字符串中的第一个。 您可以阅读更多关于您可以在regex中使用的不同方法的信息。 但是，看起来您正在解析 HTML。为什么不使用HTML 解析器？ 于 2012-12-11T15:49:49.160 回答 This answer is useful 4 要获得不止一场比赛，请使用re.findall(). 然而，使用正则表达式解析 HTML 会很快变得丑陋和复杂。请改用适当的 HTML 解析器。 Python有几个可供选择： ElementTree是标准库的一部分 BeautifulSoup是一个流行的第三方库 lxml是一个快速且功能丰富的基于 C 的库。 元素树示例： from xml.etree import ElementTree tree = ElementTree.parse('filename.html') for elem in tree.findall('tr'): print ElementTree.tostring(elem) BeautifulSoup 示例： from bs4 import BeautifulSoup soup = BeautifulSoup(open('filename.html')) for row in soup.select('table tr'): print row 于 2012-12-11T15:49:51.640 回答 Related 0 ajax - JSF Ajax 方法不在 bean 中持久化变量 2 c# - 为什么我的 Web API 的响应没有正确形成？ 1 android - 在 Android 中使用第三方库的问题 1 c# - 法线贴图给出奇怪的结果。(C# XNA) 2 javascript - 结果呈指数增长的测试场景 5 ssh - jenkins - 无法 ssh 到远程服务器（密钥 - 权限被拒绝），但可以从 cli 工作 1 xpath - 无法评估 XPath (Behat/Mink) 2 c# - C# 列表的乘法 0 ios - 如何使用 CALayer 调整图像大小 1 c# - QuickBooks SDK - response.StatusMessage 仅显示第一个错误发生 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13823479
> 
> 赞同：1
> 
> 时间：
> 
> 标签：python, regex, html-parsing

I want to get all my that's inside . I wrote this code:

```
matchObj = re.search(r'<tr>(.*?)</tr>', txt, re.M|re.I|re.S) 
```

but I only get the first group.

how can I get all groups?

Thanks in advance :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T15:49:49.160

`findall`

```
matchObj = re.findall(r'<tr>(.*?)</tr>', txt, re.M|re.I|re.S) 
```

`search`只找到给定字符串中的第一个。

您可以阅读更多关于您可以在[regex](http://docs.python.org/2/library/re.html)中使用的不同方法的信息。

但是，看起来您正在解析 HTML。为什么不使用[HTML 解析器](http://docs.python.org/2/library/htmlparser.html)？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T15:49:51.640

要获得不止一场比赛，请使用`re.findall()`.

然而，使用正则表达式解析 HTML 会很快变得丑陋和复杂。请改用适当的 HTML 解析器。

Python有几个可供选择：

*   [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)是标准库的一部分
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)是一个流行的第三方库
*   [lxml](http://lxml.de/)是一个快速且功能丰富的基于 C 的库。

元素树示例：

```
from xml.etree import ElementTree

tree = ElementTree.parse('filename.html')
for elem in tree.findall('tr'):
    print ElementTree.tostring(elem) 
```

BeautifulSoup 示例：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(open('filename.html'))
for row in soup.select('table tr'):
    print row 
```

# magento - Categorizing product data model

> ID：13823481
> 
> 赞同：1
> 
> 时间：2012-12-11T15:49:14.090
> 
> 标签：magento, e-commerce, datamodel, categorization

I'm about to rebuild an e commerce website with a mid sized database of about 40,000 product. One of the main reasons we are putting the old system to retire is the categorization mechanism.

We are looking for something that will allow us to place an item under multiple categories, or even better having no fixed category at all and we can classify products by putting descriptive labels on them and the front user can search for the products by using these labels. (I don't even sure that this can be done from a programming point of view).

It will be helpful to know what this model is called, whether it was implemented before? and even better if you can refer me to ready solutions.

# c# - Alternatives to giving a task X amount of time to finish

> ID：13823485
> 
> 赞同：1
> 
> 时间：2012-12-11T15:49:21.737
> 
> 标签：c#, multithreading

It's often the case when I need to get a task done within X amount of seconds and if it doesn't complete, I want to keep going, processing the rest of the tasks

I've been defaulting to something like this:

```
Thread worker = new Thread(() => {
    // do some long operation
});

Thread monitor = new Thread(() => {
    Thread.Sleep(10000);
    if(worker != null && worker.IsAlive) {
        worker.Abort();
        worker = null;
    }
    StartNextTask();
});

monitor.Start ();
worker.Start(); 
```

This works, but it is cumbersome because it uses two threads (yes, you can use the `Task` class as well to use threads from the threadpool).

`AutoResetEvent`s and `event` based models don't quite work because the former blocks the monitor thread until the worker is done, and the `event` driven approach relies on the client to call the event and notify the monitor.

Are there alternative patterns to this that can follow the same semantics?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:00:00.613

如果您按照您所说的那样使用 Task 类，您还可以使用 Task.Wait() ，它完全符合您的要求。指定等待的秒数。除非您使用 CancellationToken 取消任务，否则该任务不会被取消

请参阅：http: [//msdn.microsoft.com/en-us/library/dd235606.aspx](http://msdn.microsoft.com/en-us/library/dd235606.aspx)

# c# - Unable to Connect to Remote WCF Service - SecurityNegotiationException

> ID：13823487
> 
> 赞同：3
> 
> 时间：2012-12-11T15:49:23.263
> 
> 标签：c#, wcf

I am starting off with [WCF](http://en.wikipedia.org/wiki/Windows_Communication_Foundation), and I am following [the samples from MSDN](http://msdn.microsoft.com/en-us/library/dd483346.aspx). I managed to run the Getting Started sample on one machine as well as by deploying the client & service on separate machines and remotely accessing the service.

My goal is to implement the [Publish/Subscribe design pattern](http://msdn.microsoft.com/en-us/library/ms752254.aspx). I have managed to run it on one machine without any big issues. But when I am deploying client & service on different machine, my client is unable to connect to the service. I get the following exception:

```
System.ServiceModel.Security.SecurityNegotiationException was unhandled
  Message=The caller was not authenticated by the service.
  Source=mscorlib 
```

(I can share the stack trace if necessary.)

Here are my configurations:

**Service - web.config**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <protocolMapping>
      <add scheme="http" binding="wsDualHttpBinding"/>
    </protocolMapping>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

**Client - app.config**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <wsDualHttpBinding>
        <binding name="WSDualHttpBinding_ISampleContract" clientBaseAddress="http://<SERVICE MACHINE PUBLIC IP>:8000/myClient/"
                 closeTimeout="00:01:00"
                  openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                  bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                  maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                  messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" />
          <security mode="Message">
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
                algorithmSuite="Default"/>
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://<SERVICE MACHINE PUBLIC IP>/ServiceModelSamples/service.svc"
          binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_ISampleContract"
          contract="ISampleContract" name="WSDualHttpBinding_ISampleContract">
        <identity>
          <servicePrincipalName value="host/<SERVICE MACHINE PUBLIC IP>" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
</configuration> 
```

I have searched for a solution, but nothing has worked for me. I have tried to find a way to disable the security/authentication on the service side (just to get it work), but haven't been successful in that as well.

How can I fix this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:14:30.293

[wsDualHttpBinding](https://msdn.microsoft.com/en-us/library/ms731821%28v=vs.110%29.aspx)默认使用 Windows 身份验证。如果您现在不需要此身份验证，您可以更改配置以将其关闭：

```
<configuration>
  <system.serviceModel>
<bindings>
  <wsDualHttpBinding>
    <binding name="wsHttpDual">
      <security mode="None">
        <transport clientCredentialType="None" protectionLevel="EncryptAndSign" />
        <message clientCredentialType="None" algorithmSuite="Default" />
      </security>
    </binding>
  </wsDualHttpBinding>
</bindings>
    <protocolMapping>
      <add scheme="http" binding="wsDualHttpBinding" bindingConfiguration="wsHttpDual"/>
    </protocolMapping>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

以相同的方式更改客户端配置中的安全部分：

```
 <security mode="None">
        <transport clientCredentialType="None" protectionLevel="EncryptAndSign" />
        <message clientCredentialType="None" algorithmSuite="Default" />
      </security> 
```

# zend-framework - How to add special symbols in the page title, using zend framework?

> ID：13823495
> 
> 赞同：1
> 
> 时间：2012-12-11T15:49:35.643
> 
> 标签：zend-framework

In zend framework, using headTitle() ignores the special characters like trademark etc. How to add those?

# asp.net-mvc - 如何在一次提交中多次保存模型？

> ID：13823500
> 
> 赞同：0
> 
> 时间：2012-12-11T15:49:45.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-views, asp.net-mvc-viewmodel

我有一个模型：

```
public class CustomerAttributes
{
    public Int Id { get; set; }
    public string value { get; set; }
} 
```

我的创建视图如下所示：

```
 <div class="editor-label">
        @Html.Label("Name")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Value)
        @Html.ValidationMessageFor(model => model.Value)
    </div>

    <div class="editor-label">
        @Html.Label("Age")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Value)
        @Html.ValidationMessageFor(model => model.Value)
    </div>

    <div class="editor-label">
        @Html.Label("Height")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Value)
        @Html.ValidationMessageFor(model => model.Value)
    </div> 
```

所以每个文本框都将是数据库中的一条新记录。有可能做这样的事情吗？我该如何处理？另外我最大的问题是每个字段可能是一个文本框或一个组合框或一个收音机......等等......名称可能是一个文本框，但年龄可能是一个组合框......我知道我现在有所有文本框但是这可能会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:56:23.187

我个人建议为您的 CustomerAttributes 模型创建一个 IEnumerable ViewModel。

这样，您可以将多个值传递回控制器。

每次添加新表单元素（假设您是动态添加它们）时，您只需在模型中创建一个新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:34:38.450

评论中提供的链接很有帮助：

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

除此之外，可能有一个 ViewModel 可以保存一个字符串或一个枚举或其他东西来指定要显示的控件类型以及显示不同控件的一些局部视图。然后根据该说明符遍历并显示视图中的每个控件。

# php - Doctrine AST 自定义步行者

> ID：13823501
> 
> 赞同：0
> 
> 时间：2012-12-11T15:49:48.677
> 
> 标签：php, symfony, doctrine, abstract-syntax-tree, dql

我将 Doctrine 与 Symfony 2 一起使用。我有很多共享公共部分的 DQL 查询。我发现，可以使用修改 AST 的 Doctrine 自定义步行器来解决这个问题。以下是我想要完成的示例：

转换

```
SELECT a
FROM AcmeBundle:SomeEntity a
WHERE a.someColumn = 5 
```

到

```
SELECT a
FROM AcmeBundle:SomeEntity a
LEFT JOIN a.someOtherEntity b
WHERE a.someColumn = 5 AND (b.someOtherColumn = 2 OR b.someTotallyOtherColumn = 3) 
```

AST walker 应该添加一个左连接 - 或多个左连接并在 WHERE 部分添加条件。

我正在阅读文档（[http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-custom-walkers.html](http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-custom-walkers.html)），但只有一个示例。示例中使用的代码对我来说已经看起来很复杂，而且我无法找到任何其他文档，所以这就是我在这里询问的原因。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:42:35.287

考虑改用查询生成器：

```
$qb = $entityManager->createQueryBuilder();
$qb->addSelect('a');
$qb->from('AcmeBundle:SomeEntity','a');
$qb->andWhere(... someColumn = 5 ...); 
```

您可以直接执行上述查询或添加更多查询：

```
$qb->leftJoin('a.someOtherEntity','b');
$qb->andWhere(... additional conditions ...); 
```

# lotus-notes - Lotus Notes - 检查数据库是否停止服务（不使用管理客户端）

> ID：13823506
> 
> 赞同：0
> 
> 时间：2012-12-11T15:49:54.073
> 
> 标签：lotus-notes

有没有办法在不使用管理客户端（使用 Notes 客户端或设计器）的情况下检查特定服务器上的数据库副本是否“停止服务”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:56:02.797

是的`IsInService`，在`NotesDatabase`Lotus Script 对象中调用了一个属性。

[NotesDatabase.IsInService 文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_NOTESDATABASE_CLASS.html "NotesDatabase.IsInService")

# sql - 无法执行巨大的 sql 文件

> ID：13823511
> 
> 赞同：1
> 
> 时间：2012-12-11T15:50:10.487
> 
> 标签：sql, database-backups, heidisql

我的一个朋友通过 HeidiSQL 4 进行了备份，这是一个非常过时的备份。数据库被删除了，现在这是我唯一的救星。因此，HeidiSQL 在表中使用引号（“）而不是反引号（`）。尝试用反引号替换所有引号，然后执行它，但没有运气。甚至尝试使用 HeidiSQL 执行文件，但是需要永远。另一个朋友甚至做了一个程序来用反引号替换 qoutes。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:52:20.913

我想知道您的回滚段和事务发生了什么。

与其尝试一次性处理所有内容，不如将其分解成可以单独提交的块，您可能会有更好的运气。您将把所有数据放入数据库，重新生成索引，然后重新开始工作。

# php - 为php页面传递多个变量

> ID：13823512
> 
> 赞同：0
> 
> 时间：2012-12-11T15:50:10.170
> 
> 标签：php

嘿伙计们，我需要帮助为我的 PHP 传递多个值

[http://s596.beta.photobucket.com/user/kingbookal/media/Capture.png.html?sort=3&o=0](http://s596.beta.photobucket.com/user/kingbookal/media/Capture.png.html?sort=3&o=0)

这是第一页的代码，下一页是

```
$year = $_GET['yearlevel']; 
```

我试图提醒该值，但它为空。

请好好指导我..

[https://www.dropbox.com/sh/fokl2hnrjtpsfbn/Rcm8EfApm1](https://www.dropbox.com/sh/fokl2hnrjtpsfbn/Rcm8EfApm1) 这是我的脚本的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:54:49.857

您想从数组中的键中回显值吗？然后你这样做：

```
echo $rowProfName['professor_name']; 
```

如果它没有返回任何内容，您可以使用以下代码检查数组中是否存在键：

```
if(!isset($rowProfName['professor_name']))
{
    echo "Array key 'professor_name' is not set.";
} 
```

如果要检查数组包含的内容，只需运行以下代码：

```
$yourArray=array("value1","value2");

print_r($yourArray);

//If you want clean output as HTML, use this:
echo "<pre>";
print_r($yourArray);
echo "</pre>"; 
```

我希望我理解你的问题。

# c++ - 在 C++ 中为临时对象调用析构函数的顺序是什么？

> ID：13823520
> 
> 赞同：5
> 
> 时间：2012-12-11T15:50:40.457
> 
> 标签：c++, destructor, temporary, object-lifetime

考虑以下代码：

```
#include <iostream>

struct A {
  ~A() { std::cout << "~A" << std::endl; }
};

struct B {
  ~B() { std::cout << "~B" << std::endl; }
};

struct C {
  ~C() { std::cout << "~C" << std::endl; }

  void operator<<(const B &) {}
};

C f(const A &a = A()) {
  return C();
}

int main() {
  f(A()) << B();
} 
```

使用 GCC 编译并运行会得到以下输出：

```
~C
~A
~B 
```

是否保证在与其他编译器一起编译时，将按此顺序调用 A、B 和 C 类型的临时对象的析构函数？一般来说，如果有的话，对临时对象的析构函数调用的顺序是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T16:10:18.803

让我们谈谈子表达式及其排序。如果`E1`is*之前排序* `E2`，则意味着`E1`必须在 is 之前进行全面评估`E2`。如果`E1`未*用* `E2`排序，则表示`E1`并且`E2`可以按任何顺序进行评估。

对于`f(A()) << B()`，在您的情况下与 相同`f(A()).operator<<(B())`，我们知道：

*   `A()`之前排序`f(...)`，
*   `f(...)`排序之前`operator<<`和
*   `B()`之前排序`operator<<`

这也告诉我们：

*   `A()`之前排序`operator<<`
*   `A()`是无序的`B()`
*   `f(...)`是无序的`B()`

如果我们假设 RVO，为了不使事情复杂化，编译器评估子表达式的可能顺序是：

*   `A()`-> `f(...)`-> `B()`，产生`~B()`-> `~C()`->`~A()`
*   `A()`-> `B()`-> `f(...)`，产生`~C()`-> `~B()`->`~A()`
*   `B()`-> `A()`-> `f(...)`，产生`~C()`-> `~A()`->`~B()`

后者是在 OP 中观察到的顺序。请注意，销毁的顺序始终是构造的相反顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:54:01.233

`f(A()) << B();`未指定表达式的评估顺序。因此，也没有指定构建/销毁的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T15:54:17.123

的操作数的评估顺序`<<`未指定。因此，不能保证顺序。只有短路运算符`&&`, `||`, 三元运算符`?:`和逗号`,`运算符具有明确定义的操作数求值顺序。对于其他人，没有必要在右操作数之前评估左操作数（反之亦然）。

此外，不要将运算符优先级或关联性与评估顺序混淆。对于给定的表达式`E1 op E2`，只需要在`op`应用运算符之前，都应该计算`E1`和，但是在它们之间，并且可以以任何顺序计算。`E2``E1``E2`

当表达式中有多个运算符时，优先规则决定了运算符的应用顺序，例如`E1 op1 E2 op2 E3`.

关联性用于决定哪些操作数绑定到哪个运算符，当同一个运算符被多次使用时，即在 中`E1 op E2 op E3`，是否解释为`(E1 op E2) op E3`或`E1 op (E2 op E3)`。

# itextsharp - itextsharp PDF 到文本转储

> ID：13823525
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:50:47.427
> 
> 标签：itextsharp

我正在寻找一种方法来实际获取文件本身的内容，以文本格式转储。例如：我不想要一个字典对象，我不想要某种提取策略选项，我只想要 itextsharp 用来解析的同一个文本文档......整个事情作为一个字符串或字符串生成器......

我还没有找到一种方法来使用任何工具来做到这一点......我的问题是我正在尝试将动态 PDF 读入 C# 应用程序......我们都知道那些该死的动态 PDF 不能由 iTextSharp 解析（AcroForm 和 AcroFields 总是空的），所以我想如果我能得到整个文件的实际文本转储，我可以看到它的样子并为这个特定任务自己解析它（例如：make我知道我可以收到的每个文件的一个类，并根据我所看到的在那里制作地图）。

如果有人可以帮助我做到这一点，或者甚至更好地找到一种方法，在 C# 中提取 PDF 的 XML 源（有点像单击 LiveCycle 中的 XML 源选项卡），那将不胜感激。

谢谢！

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:36:49.630

如果您正在寻找原始文本格式的每个页面的实际操作符和命令，请尝试以下代码：

```
 var reader = new PdfReader("test.pdf");
    int intPageNum = reader.NumberOfPages;
    for (int i = 1; i <= intPageNum; i++)
    {
        byte[] contentBytes = reader.GetPageContent(i);
        File.WriteAllBytes("page-" + i + ".txt", contentBytes);
    }
    reader.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:03:00.173

> 我正在寻找一种方法来实际获取文件本身的内容，以文本格式转储。例如：我不想要一个字典对象，我不想要某种提取策略选项，我只想要 itextsharp 用来解析的同一个文本文档......整个事情作为一个字符串或字符串生成器......

不幸的是*，itextsharp 用来解析*的数据还不是文本。该数据中的运算符以某种文本格式给出，但实际字形可能以完全任意的 ad-hoc 编码给出。话虽如此，通常使用一些标准编码，因为它是使用中组件的最简单的解决方案。但是，您通常不能指望这一点。VahidN 的回答向您展示了如何访问该内容的起点；但是，他提取的页面内容数据很少包含对 包含在不同对象中的*资源的引用。*

> 我的问题是我正在尝试将动态 PDF 读入 C# 应用程序......而且我们都知道 iTextSharp 无法解析那些该死的动态 PDF（AcroForm 和 AcroFields 总是为空），

这听起来好像你手头实际上有一个完全不同的任务。动态表单及其内容**不是**页面内容的一部分，而是存储在单独的 XML Forms Architecture 流中。

[iText in Action，第 2 版](http://www.manning.com/lowagie2/)，在第 8 章中为您提供了一些有关如何访问 XFA 流数据的信息，请先查看示例[XfaMovie.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter08&ex=XfaMovie)。

您可能还想查看 iText XML Worker 项目，以便更轻松地操作 XFA 流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T22:38:20.507

如果您只想转储文本，请尝试以下操作：

```
 PdfReader reader = new PdfReader(pdfFileName);
        String text = "";
        nPages = reader.NumberOfPages;
        for (int i = 0; i < nPages; i++)
        {
            text += PdfTextExtractor.GetTextFromPage(reader, i + 1);
        } 
```

# sql-server - 使用 Datepart 更新表格

> ID：13823527
> 
> 赞同：0
> 
> 时间：2012-12-11T15:50:54.973
> 
> 标签：sql-server, datepart

嗨，我在 sql server 中有一张表，我为每个工作日添加了一位。我有一个日期属性，我想根据该日期的 dayofWeek 更新所有表来更新位。我已经阅读了一些关于 t-sql (datepart) 的内容，但我不知道该怎么做，有人可以帮帮我吗？

这是我的桌子的截图

[http://i.imgbox.com/adpsLL0D.jpg](http://i.imgbox.com/adpsLL0D.jpg)

例如，在前三个记录（2012-11-04，上个月，星期日）中，我想将“prt_Dom”更新为 1。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:16:14.680

```
SET DATEFIRST 1
UPDATE [tableName] SET [prt_Mar] = 1 WHERE DATEPART(dw, [prt_fecha]) = 2 
```

对于星期三，你会想要

```
UPDATE [tableName] SET [column] = 1 WHERE DATEPART(dw, [prt_fecha]) = 3 
```

`SET DATEFIRST`相对重要，因为不同的文化有不同的“一周的第一天”数字。如果您需要定期做某事，那么有完全确定的方法可以提取工作日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:20:58.600

我不完全确定你想要做什么，但也许是这样的？

```
set language spanish
go

update dbo.MyTable
set
    prt_Lun = case when datename(dw, prt_fecha) = 'Lunes' then 0x1 else 0x0 end,
    prt_Mar = case when datename(dw, prt_fecha) = 'Martes' then 0x1 else 0x0 end,
    prt_Mie = case when datename(dw, prt_fecha) = 'Miércoles' then 0x1 else 0x0 end,
    prt_Jue = case when datename(dw, prt_fecha) = 'Jueves' then 0x1 else 0x0 end,
    prt_Vie = case when datename(dw, prt_fecha) = 'Viernes' then 0x1 else 0x0 end,
    prt_Sab = case when datename(dw, prt_fecha) = 'Sábado' then 0x1 else 0x0 end,
    prt_Dom = case when datename(dw, prt_fecha) = 'Domingo' then 0x1 else 0x0 end
where
    ... 
```

如果您的逻辑真的这么简单，那么您根本不需要这些列，因为您总是可以按需`prt_%`派生位值。`prt_fecha`但我猜你在这里设置了默认值，以后可能会覆盖，在这种情况下，表格是有意义的。

在使用日期时，请注意特定于文化的设置，例如`SET DATEFIRST`和`SET LANGUAGE`。

# php - 常量文件中的codeigniter base_url

> ID：13823530
> 
> 赞同：3
> 
> 时间：2012-12-11T15:50:57.000
> 
> 标签：php, codeigniter, codeigniter-2

目前我以以下方式显示图像：

```
<img src="<?php echo base_url().USER_UPLOAD_URL.$post['userPhoto'] ?>" /> 
```

USER_UPLOAD_URL 在 application/config/constants.php 中定义。

```
define('USER_UPLOAD_URL', "uploads/user_uploads/"); 
```

有什么方法可以在 constants.php 中包含 base_url() 吗？这样我就不需要每次都在视图中编写 base_url() 。有没有替代方法？

tnx

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T17:47:56.863

constants.php 在 config.php 之前加载，所以不能`$config['base_url']`从 constants.php 使用。

但你可以这样做：

**常量.php**：

```
define('BASE_URL', "http://mysite.com");
define('USER_UPLOAD_URL', BASE_URL."uploads/user_uploads/"); 
```

**配置文件**

```
$config['base_url'] = BASE_URL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:58:41.043

您不能`base_url()`在常量文件中使用，因为首先加载常量文件，并且`base_url()`仅在您自动加载 url 帮助程序或按控制器加载它时才加载。

这是一个建议，您可以在控制器中定义它：

```
public function __construct()
{
    $this->load->helper('url');
    define('USER_UPLOAD_URL', base_url('uploads/user_uploads/'));
} 
```

然后视图可以访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T23:18:53.240

我会使用自定义控制器来补充@Dale 的答案。首先，在 /application/core/GeneralController.php 中创建控制器：

```
<?php
class GeneralController extends CI_Controller{
    public function __construct()
    {
        parent::__construct();
        $this->load->helper('url');
        define('USER_UPLOAD_URL', base_url('uploads/user_uploads/'));
    }
} 
```

现在，您可以从而`GeneralController`不是 CI_Controller 扩展所有控制器，因为`USER_UPLOAD_URL`现在已定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-13T13:46:27.117

这是一个老问题，我仍然使用`APPPATH`. `APPPATH`在 constants.php 中工作。但它返回路径作为`var/www/html/projectfolder/application`应用程序文件夹内的路径，您可以将数据存储在新文件夹或`third_party`文件夹中。在常量中，您可以定义为例如`define('pace-min-js',APPPATH.'third_party/luna/vendor/pacejs/pace.min.js');`

# c# - 解析 csv 以基于一个字段创建一个没有重复条目的查询

> ID：13823531
> 
> 赞同：2
> 
> 时间：2012-12-11T15:51:02.237
> 
> 标签：c#, csv, import, duplicates

我认为在这一点上，我已经看了这么长时间的代码，以至于逻辑变得模糊，我需要更多的关注它。

输入是一系列创建一些 List<> 对象的控件。涉及的变量是 importData，一个包含“sarray”的列表，它是包含字段值列表的字符串 []。为 "validIndeces" 和 "indecesCantBeDuplicated" 引用的 Lists<> 包含我们实际需要的 importData 的 sarray 中项目的索引，其中哪些不能在同一字段中有重复项（即，没有两个公司 ID 相同）。

这里的目标是取importData的string[]s，过滤掉查询中我们不需要的，执行一些指令使它们与某个表中的数据兼容，然后检查确保一个表中不存在重复给定的字段。如果在“indecesCantBeDuplicated”中指示了一个字段，并且之前在同一索引中的 importData 中找到了匹配项，那么它应该移动到下一个 string[] 对象，否则将该行添加到查询中。

输出基本上是 SQL 中的一系列插入语句，但该代码很好。这就是我卡住的地方。为什么我不过滤掉重复项？

```
//go through each string array in the import (i.e. each record to import)
foreach (string[] sarray in importData) {
    List<List<string>> QueryList = new List<List<string>>();
    List<string> Queriables = new List<string>();
    for (int i = 0; i < sarray.Count(); i++) {
        bool addit = true;
        if (validIndeces.Contains(i)) {
        //ensure this is one of the indeces used to import
            if (indecesCantBeDuplicated.Contains(i)) {
                // if THIS index can't have duplicate values
                foreach (string[] s2 in importData) {
                    //check each record in the import
                    foreach(string s in s2) {
                        //check each field in the record
                        if (s2.ElementAt(i) == sarray[i]) {
                            //if the field value at this index matches the one we're about to put in
                            addit = false;
                        } else {
                            addit = true;
                        }
                    }
                }
            }
            if (indecesToDelimit.Contains(i)) {
                //ensure that delimiters are added to all text field values
                sarray[i] = "'" + sarray[i] + "'";
            }

            if (addit) {
                Queriables.Add(sarray[i]);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:53:22.687

当你检测到一个`addit == false`. 否则，它将`true`在下一次循环迭代中再次设置为。

```
{
    addit = false;
    break;
} 
```

# jquery - 剑道网格。两个日期选择器的验证

> ID：13823532
> 
> 赞同：1
> 
> 时间：2012-12-11T15:51:04.927
> 
> 标签：jquery, grid, datepicker, kendo-ui

我现在有一个问题，我有一个只有两种日期类型的可编辑字段的 Kendo UI Grid，到目前为止一切正常。给我的问题是验证开始日期和结束日期。日期必须始终小于或等于结束日期。我需要验证这两个字段。有想法的人谢谢 ![在此处输入图像描述](../Images/72a06c82290cb9569883b6b5e84a16ba.png)

```
dataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: controller + "/read",
            type: "GET"
        },
        update: {
            url: controller + "/update",
            type: "POST",
            dataType: "json"

            //data: { model: "prueba" }
        },
        destroy: {
            url: controller + "/delete",
            dataType: "json",
            type: "POST"
        }
    },
    batch: true,
    //pageSize: 10,
    schema: {
        model: {
            id: "id_POSPlanningOpe",
            fields: {
                select: { type: "boolean", editable: false },
                id_POSPlanningOpe: { editable: false, nullable: true },
                codPdv: { editable: false },
                nombrePdv: { editable: false },
                regionPdv: { editable: false },
                zonapdv: { editable: false },
                fecha_Inicio: { type: "date", editable: true },
                fecha_Fin: { type: "date", editable: true },
                estado: { editable: false }
            }
        }
    }
});

$("#grid").kendoGrid({
    selectable: "multiple",
    sortable: {
        mode: 'single',
        allowUnsort: false
    },
    dataSource: dataSource,
    height: 500,
    toolbar: [
        { name: "save", text: "Grabar" },
        { name: "cancel", text: "Cancelar" }],
    columns: [
        { title: "<span></span>", width: "20px", template: '<input type="checkbox" name="CheckRow" value="#= id_POSPlanningOpe #"></input>' },
        { field: "id_POSPlanningOpe", title: "<span class='Cabecera'>NRORUTA</span>", width: 80 },
        { field: "codPdv", title: "<span class='Cabecera'>CODIGO PDV</span>", width: 100 },
        { field: "nombrePdv", title: "<span class='Cabecera'>NOMBRE</span>" },
        { field: "regionPdv", title: "<span class='Cabecera'>REGION</span>" },
        { field: "zonapdv", title: "<span class='Cabecera'>ZONA</span>" },
        { field: "fecha_Inicio", title: "<span class='Cabecera'>FECHA INICIO</span>", template: '#= kendo.toString(fecha_Inicio,"dd/MM/yyyy") #', width: 100 },
        { field: "fecha_Fin", title: "<span class='Cabecera'>FECHA FIN</span>", template: '#= kendo.toString(fecha_Fin,"dd/MM/yyyy") #', width: 100 },
        { field: "estado", title: "<span class='Cabecera'>ESTADO</span>", width: 80 },
        { command: ["edit"], title: "&nbsp;", width: "100px" }],
    editable: 'inline'

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:39:41.150

您可以尝试实现自定义验证规则，如下[所示](http://docs.kendoui.com/getting-started/framework/validator/overview#email--constrain-the-value-to-being-a-valid-email)。

或者，您可以使用 Grid 的**[编辑](http://docs.kendoui.com/api/web/grid#edit)**事件来检查值是否处于有效状态，如果不是，您可以阻止 Grid 关闭并通知用户出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T18:11:35.047

我已经使用此功能完成了此操作：

```
(function ($, kendo) {
    $.extend(true, kendo.ui.validator, {
        rules: { // custom rules
            startdatetimevalidation: function (input, params) {
                if ($(input).val() && $(input).attr('id') == "StartDateTime") {
                    if ($('#EndDateTime').val() && $(input).getKendoDateTimePicker().value() > $('#EndDateTime').getKendoDateTimePicker().value()) {
                        return false;
                    }
                }
                return true;
            },
            endatetimevalidation: function (input, params) {
                if ($(input).val() && $(input).attr('id') == "EndDateTime") {
                    if ($('#StartDateTime').val() && $(input).getKendoDateTimePicker().value() < $('#StartDateTime').getKendoDateTimePicker().value()) {
                        return false;
                    }
                }
                return true;
            }
        },
        messages: {
            startdatetimevalidation: function (input) {
                return "Start Date can't be greater than End Date.";
            },
            endatetimevalidation: function (input) {
                return "End Date can't be smaller than Start Date.";
            }
        }
    });
})(jQuery, kendo); 
```

希望这有帮助！我知道这篇文章很旧，但也许有人也需要这个..

如果您需要更多信息，请参阅此页面： [http ://demos.telerik.com/aspnet-mvc/grid/editing-custom-validation](http://demos.telerik.com/aspnet-mvc/grid/editing-custom-validation)

# java - 为什么 Comparable 是参数化的？

> ID：13823537
> 
> 赞同：0
> 
> 时间：2012-12-11T15:51:21.353
> 
> 标签：java

由于[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)只导出一个函数，并且[该函数](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)只接受一个“this”类型的参数（实现 Comparable 的类），为什么 Comparable 参数化？鉴于 Comparable 用于自然排序，为什么有人会传递与实现此接口的类不同的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:52:53.277

好吧，当您想到*消耗*它的东西时，它很有用。例如：

```
public <T extends Comparable<T>> void sort(List<T> list) 
```

这样你就可以`item.compareTo(otherItem)`以类型安全的方式调用，只要两者都是`T`.

同样，在*实现*它时，您可以编写：

```
public int compareTo(MyClass other) 
```

而不必使用：

```
public int compareTo(Object other) 
```

然后铸造。

所以是的，实现起来会很奇怪`Comparable<SomethingElse>`- 但是没有其他方法可以以通用方式引用“实现此接口的类型”，并且能够清晰地表达“其他”部分很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T15:53:32.327

您可以有两种类型`X`，`Y`它们都是`Comparable<B>`. 只要同时扩展（或实现）两者`X`，您就可以自由地交叉比较这些对象。`Y``B`

从理论上讲，您甚至可以编写`W`一个`Comparable<V>`. 这意味着您可以将其与其他实例进行比较，`V`但*不能*`W`与. 我目前想不出一个好的用例，但这是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:53:56.740

AFAIK，这是说 T 与自身可比的唯一方法。

他们本可以添加一些速记来表达这一点，我怀疑它不会更短。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:03:57.890

使用此参数，您不需要使用 instanceof 运算符。

Comparable 通常用于比较一个对象的实例是否对应于另一个实例。例如，如果你想现在如果 DogA 与 DogB 相同，你就知道没有人是猫。所以你永远不会知道猫是不是狗，因为它们有不同的起源。这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T15:55:14.203

Rajikumar，你已经回答了你的问题。Comparable 对保证类型安全是通用的，并确保您提供正确类型的参数，即实现 Comparable 的类。

# java - 杀死excel进程而不保存

> ID：13823538
> 
> 赞同：3
> 
> 时间：2012-12-11T15:51:21.577
> 
> 标签：java, excel, kill

我有这段代码可以正确地杀死任何正在运行的 Excel 进程。

```
 public static void killExcel(){
     while (isProcessRuning("EXCEL.EXE")){
        Runtime.getRuntime().exec("taskkill /IM EXCEL.EXE");
     }
}

 public static boolean isProcessRuning(String serviceName) throws Exception {
         Process p = Runtime.getRuntime().exec(TASKLIST);
         BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
         String line;
         while ((line = reader.readLine()) != null) {
          if (line.contains(serviceName)) {
           return true;
          }
         }    
         return false;
    } 
```

我的问题是如果 Excel 文件提示保存问题，我得到一个无限循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T15:53:37.163

您是否尝试过`taskkill`使用 /f 选项强制杀死？有关更多详细信息，请参见[此处](http://www.computerhope.com/taskkill.htm)。

如果可以的话，使用默认选项允许 Excel 很好地退出可能更合适。如果它不退出，则恢复为强制变体。如果请求，进程通常会退出。如果不是，这可能是有充分理由的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:57:02.107

你有一个无限循环的原因是因为它在一个while循环中，你应该把它放在一个if语句中。这样，它不会循环。如果一切都失败了，那么使用 /f。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T21:16:57.490

试试这个

```
public static void killExcel() {
    try {
        Runtime.getRuntime().exec("taskkill /f /t /IM EXCEL.EXE");
        Thread.sleep(1000);
    }
    catch (IOException | InterruptedException ex) {
        Logger.getLogger(ClassName.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

# vb.net - 使用数据库安装 .NET 应用程序

> ID：13823539
> 
> 赞同：0
> 
> 时间：2012-12-11T15:51:23.220
> 
> 标签：vb.net, sql-server-2008, deployment, setup-deployment, installshield-le

最后，在 Stackoverflow 的帮助下，我设法完成了我的项目。

我遇到的最后一个问题是在安装过程中。

我使用 installshield 限量版创建了我的安装程序。

安装程序包括 .net 2.0 sp2、.net 4.0、windows installer 4.5 和 sql server 2008 express。

在文件中，我包含了数据库文件，即 .MDF（即 ThesisDB.mdf）

默认情况下，它将安装在 C:\Program Files

安装后，数据库的当前位置是：

C:\ProgramFiles\HealthAndFitnessAppTest\我的产品名称\

这是我对连接字符串所做的技巧，我的连接字符串是，

Dim CN As New SqlConnection ("Data Source=.\SQLEXPRESS;AttachDbFilename=C:\ProgramFiles\HealthAndFitnessAppTest\My Product Name\ThesisDB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True")

但出现错误...

“尝试附加自动命名的数据库失败。存在具有相同名称的数据库，或者无法打开指定的文件，或者它位于 UNC 共享上。”

不幸的是，这个技巧没有奏效。抱歉，各位能否告诉我如何正确部署我的应用程序及其数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:16:21.843

路径中的 Program 和 Files 之间是不是缺少空格？

# java - 如何根据单选按钮组件的值验证输入文本组件

> ID：13823541
> 
> 赞同：1
> 
> 时间：2012-12-11T15:51:32.807
> 
> 标签：java, validation, jsf, primefaces

我正在尝试根据单选按钮组件的值来验证输入文本组件，但是它会抛出一个`NullPointerException`并且我不明白为什么。

这是视图：

```
<h:form id="formId">
    <p:inputText validator="#{searchBean.validate}" id="name"
        required="true" requiredMessage="should contain only characters">
        <f:validateRegex pattern="[a-zA-Z]*" />
        <f:validator validatorId="inputValidator" />
    </p:inputText>
    <p:selectOneRadio value="#{searchBean.searchForm.selectedRadio}" id="customRadio">
        <f:selectItem itemLabel="city" itemValue="1" />
        <f:selectItem itemLabel="zipcode" itemValue="2" />
        <f:selectItem itemLabel="state" itemValue="3" />
    </p:selectOneRadio>
    <p:commandButton value="Search" action="results.jsf" />
</h:form> 
```

这是验证器：

```
public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
    UIViewRoot ui = new UIViewRoot();
    UIInput radio = (UIInput) ui.findComponent("formId:customRadio");
    boolean convertedAndValidatedValue = (Boolean) radio.getValue(); // This line is throwing the exception.
    System.out.println("Validate"+convertedAndValidatedValue);

    if (searchForm.selectedRadio.equals("city")) {
        validateForCity(convertedAndValidatedValue);
    } else if (searchForm.selectedRadio.equals("zipcode")) {
        validateForZipcode(convertedAndValidatedValue);
    } else {
        validateForState(convertedAndValidatedValue);
    }
} 
```

这是一个例外：

```
javax.faces.FacesException
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:80)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
Caused by: java.lang.NullPointerException
    at com.placessearch.action.SearchBean.validate(SearchBean.java:76)
    at javax.faces.component.UIInput.validateValue(UIInput.java:1142)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1204)
    at javax.faces.component.UIInput.processValidators(UIInput.java:693)
    at javax.faces.component.UIForm.processValidators(UIForm.java:240)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1159)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:72) 
    ... 19 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:23:56.213

JSF 组件按照它们在组件树中出现的顺序进行转换和验证。您的验证器附加到出现*在*单选按钮组件之前的输入文本组件。但是，您正在尝试访问单选按钮组件的转换和验证值，而此时它还没有被转换和验证。

```
boolean convertedAndValidatedValue = (Boolean) radio.getValue(); 
```

它只会返回`null`您反过来尝试自动装箱的`boolean`只会导致`NullPointerException`.

您需要获取提交的值。请注意，您指定的项目值绝对不是布尔值。它是数字。另请注意，提交的值*始终* `String`是（仅仅是因为这正是`request.getParameter()`返回的类型，还因为此时它还没有被 JSF/EL 转换）。

```
String submittedRadioValue = (String) radio.getSubmittedValue();

if (submittedRadioValue != null) {
    int convertedRadioValue = Integer.valueOf(submittedRadioValue);
    // ...
} 
```

* * *

**更新**：由于其意外性质，我忽略的另一个原因如下：

```
UIViewRoot ui = new UIViewRoot(); 
```

这肯定也是不对的。您应该从 faces 上下文中检索当前的，而不是手动创建一个完全空的。

```
UIViewRoot ui = context.getViewRoot(); 
```

否则`radio`仍然是`null`，因此是另一个潜在的原因`NullPointerException`。

# javascript - 如何在几天内应用多种样式

> ID：13823544
> 
> 赞同：0
> 
> 时间：2012-12-11T15:51:35.403
> 
> 标签：javascript, jquery, css, jquery-ui-datepicker

我必须用不同的样式标记三种日子：Out_of_window、Free 或 Unavailable。不可用的必须被禁用。

[我根据这个问题做了一个函数](https://stackoverflow.com/questions/6048342/is-there-a-way-to-style-jquerys-datepicker-days/6048648)。而且我必须删除默认的 datepicker 类 ( `ui-state-default`)，否则我无法更改`bg-image`.

一切都按预期工作，直到我改变月份。当我回到原来的月份时，这一天又回到了原来的类别（`ui-state-default`），我不再有我根据这一天的类型定制的样式了。

所以，我有以下代码：

```
 var pick_up_out_of_window_dayDates = new Array("2012-12-11","2012-12-12");

 var pick_up_free_dayDates = new Array("2012-12-21","2012-12-22"); 
```

（作为全球的）

```
 function applyDayStyles(date){

var enabled = true;
var cssClass = "";
console.log(date);
var day = date.getDate();
var month = date.getMonth() + 1; //0 - 11
var year = date.getFullYear();
var compare = year  + "-" + month + "-" + day;

var pick_up_out_of_window_day = pick_up_out_of_window_dayDates.indexOf(compare) + " " + compare
var pick_up_free_day = pick_up_free_dayDates.indexOf(compare) + " " + compare

if (pick_up_out_of_window_dayDates.indexOf(compare) >= 0){
    cssClass = "pick_up_out_of_window_dayCalendar";
    console.log(1);
    return  new Array(enabled, cssClass, pick_up_out_of_window_day);

}
else
if (pick_up_free_dayDates.indexOf(compare) >= 0){
    cssClass = "pick_up_free_dayCalendar";
    console.log(2);
    return new Array(enabled, cssClass, pick_up_free_day);
}
else
    return new Array(false, cssClass, date); 
```

}

```
 $(document).ready(function() {

        $(".datepicker").datepicker({
            minDate: 0,
            beforeShowDay: applyDayStyles
    })
   //{edited}
   // this is un necesssary !
   // $('.pick_up_free_dayCalendar').children().removeClass('ui-state-default').addClass('pick_up_free_dayCalendarIN'); // I Had to add this line to remove the defaukt bg style.

 }) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:55:51.047

只需覆盖默认类：

```
 .datepicker .pick_up_out_of_window_dayCalendar .ui-state-default {background: red;}
 .datepicker .pick_up_free_dayCalendar .ui-state-default {background: blue;} 
```

感谢@adeneo（请参阅问题的评论）

[http://jsfiddle.net/Cwg3P/2/](http://jsfiddle.net/Cwg3P/2/)

# java - android在.txt文件的开头添加文本行

> ID：13823548
> 
> 赞同：0
> 
> 时间：2012-12-11T15:51:48.853
> 
> 标签：java, android

我有这个代码

```
 File gpxfile = new File(root, "mesaje.txt");

            BufferedWriter bW;

            bW = new BufferedWriter(new FileWriter(gpxfile, true));
            bW.write(format + " " + message + "\n-----------------------\n");
            bW.newLine();
            bW.flush();
            bW.close(); 
```

它写入一个 .txt 文件，在最后一行之后添加文本。我想在第一行添加文本，使其显示为最新信息。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:28:19.337

读取文件，将其存储到字符串中。然后只需通过添加新文本和从以前文件中保存的字符串来重写文件。这里有很多阅读文本文件的例子

# java - href 和 iframe webcenter 上的动态值

> ID：13823553
> 
> 赞同：1
> 
> 时间：2012-12-11T15:51:57.627
> 
> 标签：java, html, portlet, webcenter

我正在尝试为基于 portlet 的 Web 应用程序生成自定义地图，就我目前所见，谷歌地图提供和 i 框架，它采用一些坐标并将它们绘制在地图上。我想根据我存储的一些变量来执行此操作，但我无法将它们包含在 href 或 iframe 中，它只是打印对变量的整个引用，即 #{EntregaListaBean.entregaActual.longitud}。有人知道我的错误是什么吗？我该怎么做才能动态生成它？

这是一段可以工作并使用存储的值的代码：

```
 <h:outputLabel value="Etapa actual" id="ol3"
                     style="font-weight:bold;"/>
      <h:outputText value="#{EntregaListaBean.entregaActual.etapa}" id="ot4"/> 
```

这是一个根本不起作用的代码：

```
 <a href="https://maps.google.com/maps?q=#{EntregaListaBean.entregaActual.latitud}",#{EntregaListaBean.entregaActual.longitud}"&t=w&z=17" target="_blank">Ver posicion actual</a>
  <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?q=#  {EntregaListaBean.entregaActual.latitud},#{EntregaListaBean.entregaActual.longitud}&amp;ie=UTF8&amp;t=w&amp;z=14&amp;ll=#{EntregaListaBean.entregaActual.latitud},-#{EntregaListaBean.entregaActual.longitud}&amp;output=embed"></iframe><br /><small><a href="http://maps.google.com/maps?q=#{EntregaListaBean.entregaActual.latitud},#{EntregaListaBean.entregaActual.longitud}&amp;ie=UTF8&amp;t=w&amp;z=14&amp;ll=#{EntregaListaBean.entregaActual.latitud},#{EntregaListaBean.entregaActual.}&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:48:43.507

你可以使用 `<af:inlineFrame>` 标签，它呈现一个 iframe，你可以像你的例子一样使用 EL。

# python - Python 的弹性搜索客户端：建议？

> ID：13823554
> 
> 赞同：4
> 
> 时间：2012-12-11T15:52:06.567
> 
> 标签：python, elasticsearch

我正在为我们的销售人员编写一些脚本，以通过 python 使用弹性搜索查询索引。（最终脚本将更新我们的 Salesforce DB 中的潜在客户信息。）

我一直在使用带有 simplejson 的 urllib2 模块来提取结果。问题是这似乎不是一个很好的方法，运行时间越来越长的脚本证明了这一点。

问题：

1.  有没有人对 Python 的 Elastic Search 客户端有任何意见（意见，在互联网上？？？）？具体来说，我通过 elasticsearch.org 找到了 pyes 和 pyelasticsearch ---这两者是如何叠加的？

2.  我当前动态构建查询并通过它运行的方法有多好或多坏`self.raw_results = simplejson.load(urllib2.urlopen(self.query))`？

任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:54:16.627

我们使用pyes。它非常整洁。您可以使用比其他服务更快的节俭协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:09:19.010

听起来您遇到了与客户无关的问题。如果您可以减少发送到 ES 的内容并用一个简单的 curl 命令表示它，它将使实际运行缓慢的内容更加明显。我怀疑我们只需要调整您的查询以确保它最适合您的上下文。

# facebook - Facebook Graph API 中的 Unix 时间戳

> ID：13823555
> 
> 赞同：1
> 
> 时间：2012-12-11T15:52:08.770
> 
> 标签：facebook, facebook-graph-api, unix-timestamp

今天早上还有其他人遇到使用 UNIX 时间戳的 Graph API 请求的问题吗？例如，昨晚以下查询有效，但今天早上却无效 - 也许它与 Facebook 昨晚报告的最近服务器问题有关？

在 Facebook Graph API Explorer 中输入的查询：

`/[pageid]/posts&since=1311062400&until=1313740800?fields=id&limit=10000`

错误信息：

```
{
  "error": {
    "message": "Unknown path components: /posts&since=1311062400&until=1313740800",
    "type": "OAuthException",
    "code": 2500
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:29:31.477

您的查询不正确

```
/posts&since=1311062400&until=1313740800
      ^
      |
------- 
```

那应该是`?`

`/posts?since=1311062400&until=1313740800`

# google-maps - 升级到 jquerymobile 1.2 后谷歌地图不全屏

> ID：13823556
> 
> 赞同：1
> 
> 时间：2012-12-11T15:52:15.773
> 
> 标签：google-maps, jquery-mobile

下面的示例属于[Tolis Emmanouilidis](https://stackoverflow.com/a/12060654/1636051)，适用于 jquerymobile 1.0.1。当我想将它升级到 1.2.0 时，地图不是全屏显示在框架中，只有一部分显示在框架的左上角

互联网上到处都是 jquerymobile 和谷歌地图的例子。升级到 jqm 1.2.0 后，地图有这个问题，关于这个主题的资料不多。

你能帮我解决这个问题吗？

[http://jsfiddle.net/jCemG/4/](http://jsfiddle.net/jCemG/4/)

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Page Title</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=el"> </script>
    </head> 

    <body>
        <!-- /page -->
        <div data-role="page" class="page-map" style="width:100%; height:100%;">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>Map</h1>
                <a href="page_1_intro.html" id="home" rel="external" data-icon="home" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Home</a>
            </div>
            <!-- /content -->
            <div data-role="content" class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <div id="map_canvas" style="height:350px;"></div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:12:36.720

这应该可以解决您的问题：

```
$('#map').live('pagebeforeshow',function(e,data){
    $('#map_canvas').height($(window).height() - (10 + $('[data-role=header]').height() - $('[data-role=footer]').height()));
}); 
```

# firefox-addon - 构建一个 Firefox 插件

> ID：13823559
> 
> 赞同：0
> 
> 时间：2012-12-11T15:52:29.177
> 
> 标签：firefox-addon

在我设法为 Chrome 浏览器 (http://stackoverflow.com/questions/13686561/chrome-addon-with-my-server-interaction) 创建了一个插件之后，我的下一个目标是为 Firefox 做同样的事情。

我认为这很难做到，或者对于初学者来说没有很多好的教程。我要问的是分步教程，以便了解 FF 的工作流程。再次感谢您阅读我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:31:53.850

看看[Add-on SDK](https://addons.mozilla.org/en-us/developers/builder)。这里是[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/)，你也可以从[Github](http://github.com/mozilla/addon-sdk)下载。

我想说附加 SDK 文档的[入门](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/index.html#getting-started)部分是开始阅读的好地方。

如果您有任何疑问，您也可以加入 irc.mozilla.org 上的 IRC 频道 #jetpack 并直接向 SDK 团队寻求帮助！

# wso2 - WSO2 ESB 在启动时重写 WSO2 注册表值

> ID：13823566
> 
> 赞同：0
> 
> 时间：2012-12-11T15:52:52.420
> 
> 标签：wso2, wso2esb, wso2carbon

我目前安装了 WSO2 ESB 和 WSO2 Registry（均为 4.5.0）。

注册表共享完全按照分步[说明进行](http://ajithvblogs.blogspot.com/2012/09/create-jdbc-mount-to-wso2-governance.html)

然后用例如下：

1) 将包含 WSDL/Schemas 的 zip 添加到治理注册表。添加了我在注册表浏览器中看到的情况：

```
_system/governance/trunk
                        /endpoints
                        /schemas
                        /services
                        /wsdls 
```

将所有 WSDL/Schemas/Endpoints/Services 与刚刚添加的 WSDL 包相关联。

2) 启动 WSO2 ESB 的以下注册表配置：

```
<dbConfig name="wso2registry_mounted">
    <dataSource>jdbc/WSO2CarbonDB_GREG</dataSource>
</dbConfig>

<remoteInstance url="https:localhost:9445/registry">
    <id>wso2_registry_mounted</id>
    <dbConfig>wso2registry_mounted</dbConfig>
    <readOnly>false</readOnly>
    <enableCache>true</enableCache>
    <registryRoot>/</registryRoot>
</remoteInstance>

<mount overwrite="true" path="/_system/config">
    <instanceId>wso2_registry_mounted</instanceId>
    <targetPath>/_system/nodes</targetPath>
</mount>

<mount overwrite="true" path="/_system/governance">
    <instanceId>wso2_registry_mounted</instanceId>
    <targetPath>/_system/governance</targetPath>
</mount> 
```

3) 检查 ESB 和 Governance Registry 上的注册表浏览器。至少模式文件夹内容已被 ESB 覆盖。

谁能建议我如何强制 ESB 不覆盖初始注册表项。将已安装的注册表标记为 readOnly=true - 无济于事。

谢谢，弗拉基米尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:36:25.283

请使用`<mount overwrite="false"`不被覆盖的内容

有关详细信息，请参阅此[文档](http://docs.wso2.org/wiki/display/Governance451/Remote+Instance+and+Mount+Configuration+Details)

# php - kohana 3.0 目录到控制器

> ID：13823569
> 
> 赞同：0
> 
> 时间：2012-12-11T15:52:58.707
> 
> 标签：php, kohana, routes

我的网站在 Kohana 3.0 下，与默认路由完美配合

```
Route::set('default', '(<controller>(/<action>(/<id>)))')
     ->defaults(array(
          'controller' => 'user',
      'action'     => 'index',
    )); 
```

当我尝试在此地址访问我的网站时，`http://127.0.0.1/web/`它会加载 url `http://127.0.0.1/web/user`。没关系。但是现在我想在控制器下添加管理目录。所以我的网络树看起来像这样

```
classes
|  controller/
       Admin/
          dashboard
       web.php
|  model 
```

我想允许管理员以这样的 url 访问管理员页面 `http://127.0.0.1/admin/dashboard`。其中dashboard是管理员目录下的控制器。我用这个修改引导文件

```
Route::set('admin', '<directory>(/<controller>(/<action>(/<id>)))',
        array('directory' => '(admin)'))->defaults(array(
        'controller' => 'user',
        'action'     => 'index',
    )); 
```

我可以通过访问管理会话`http://127.0.0.1/web/admin/dashboard/` 但我无法访问默认控制器，即`http://127.0.0.1/web/`. 错误`Kohana_Request_Exception [ 0 ]: Unable to find a route to match the URI:` 我缺少控制器的默认访问权限。如何设置 Route 它以通过链接访问我的网站：

```
http://127.0.0.1/web/ 
```

和

```
http://127.0.0.1/web/admin/dashboard/ 
```

**编辑** 从kohana文档中，它被写成

```
In this example, we have controllers in two directories, admin and affiliate. Because this route will only match urls that begin with admin or affiliate, the default route would still work for controllers in classes/controller.
Route::set('sections', '<directory>(/<controller>(/<action>(/<id>)))',
    array(
        'directory' => '(admin|affiliate)'
    ))
    ->defaults(array(
        'controller' => 'home',
        'action'     => 'index',
    )); 
```

资源 ：`http://kohanaframework.org/3.0/guide/kohana/routing#examples`

现在我将我的代码修改为

```
Route::set('default', '<directory>(/<controller>(/<action>(/<id>)))',
        array(
            'directory' => '(admin)'))
        ->defaults(array(
        'controller' => 'user',
        'action'     => 'index',
    )); 
```

但我有这个错误

```
Kohana_Request_Exception [ 0 ]: Unable to find a route to match the URI: 
```

当我想访问默认控制器时`http://127.0.0.1/user/index`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:08:40.360

这条路线将转换为：`http://127.0.0.1/admin/web`，但您的`Admin`文件夹需要在`user`里面有控制器。

```
Route::set('default', '<directory>(/<controller>(/<action>(/<id>)))',
    array(
        'directory' => '(admin)'))
    ->defaults(array(
    'controller' => 'user',
    'action'     => 'index',
)); 
```

如果您希望目录是可选的，则需要

```
Route::set('default', '(<directory>(/<controller>(/<action>(/<id>))))',
    array(
        'directory' => '(admin)'
    )
)
    ->defaults(array(
    'directory' => 'admin', 
    'controller' => 'dashboard',
    'action'     => 'index',
)); 
```

但是，就您而言，您需要多条路线。在“catch all”路线上方，放置：

```
Route::set('user', 'user(/<controller>(/<action>(/<id>)))')
->defaults(array(
    'directory' => 'user',
    'controller' => 'user',
    'action'     => 'index',
));

Route::set('admin', 'admin(/<controller>(/<action>(/<id>)))')
->defaults(array(
    'directory' => 'admin',
    'controller' => 'dashboard',
    'action'     => 'index',
));

Route::set('default', '(/<controller>(/<action>(/<id>)))')
->defaults(array(
    'controller' => 'index',
    'action'     => 'index',
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:28:42.577

尝试在里面插入目录`->defaults`

```
Route::set('whatever', 'whatever')
    ->defaults(array(
    'directory' => 'admin',
    'controller' => 'user',
    'action' => 'index',
    )); 
```

# python - 结合两个列表并通过引用字典 Python 进行排序

> ID：13823570
> 
> 赞同：0
> 
> 时间：2012-12-11T15:53:01.843
> 
> 标签：python, regex, debugging, sorting, dictionary

我有（在我看来是）一个非常复杂的问题。我会尽量简洁——尽管为了完全理解这个问题，你可能需要点击我的个人资料并查看我在 StackOverflow 上发布的（只有其他）两个问题。简而言之：我有两个列表——一个由包含设施名称和事件日期的电子邮件字符串组成。另一个由每封电子邮件的设施 ID 组成（我使用以下正则表达式函数之一来获取此列表）。我使用 Regex 能够在每个字符串中搜索这些信息。3个正则表达式函数是：

```
def find_facility_name(incident):

    pattern = re.compile(r'Subject:.*?for\s(.+?)\n')
    findPat1 = re.search(pattern, incident)
    facility_name = findPat1.group(1)

    return facility_name

def find_date_of_incident(incident):

    pattern = re.compile(r'Date of Incident:\s(.+?)\n')
    findPat2 = re.search(pattern, incident)
    incident_date = findPat2.group(1)

    return incident_date

def find_facility_id(incident):
    pattern = re.compile('(\d{3})\n')
    findPat3 = re.search(pattern, incident)
    f_id = findPat3.group(1)

    return f_id 
```

我也有一个格式如下的字典：

```
d = {'001' : 'Facility #1', '002' : 'Another Facility'...etc.} 
```

**我正在尝试组合这两个列表并按字典中的键值排序，然后是事件日期。由于键值附加到设施名称，这应该会自动导致来自相同设施的电子邮件被组合在一起。为了做到这一点，我尝试使用这两个功能：**

```
def get_facility_ids(incident_list):
'''(lst) -> lst

Return a new list from incident_list that inserts the facility IDs from the
get_facilities dictionary into each incident.

'''
f_id = []
for incident in incident_list:
    find_facility_name(incident)
    for k in d:
        if find_facility_name(incident) == d[k]:
            f_id.append(k)

return f_id

id_list = get_facility_ids(incident_list)

def combine_lists(L1, L2):
    combo_list = []
    for i in range(len(L1)):
        combo_list.append(L1[i] + L2[i])

return combo_list

combination = combine_lists(id_list, incident_list)

def get_sort_key(incident):
'''(str) -> tup

Return a tuple from incident containing the facility id as the first
value and the date of the incident as the second value.

'''

return (find_facility_id(incident), find_date_of_incident(incident))

final_list = sorted(combination, key=get_sort_key) 
```

这是我的输入可能和所需输出的示例：

```
d = {'001' : 'Facility #1', '002' : 'Another Facility'...etc.}
input: first_list = ['email_1', 'email_2', etc.]
first output: next_list = ['facility_id_for_1+email_1', 'facility_id_for_2 + email_2', etc.]
DESIRED OUTPUT: FINAL_LIST = sorted(next_list, key=facility_id, date of incident) 
```

唯一的问题是，键值与在每个单独的电子邮件字符串中找到的内容不正确匹配。有些做，有些是完全随机的。我不知道为什么会发生这种情况，但我觉得这与我合并这两个列表的方式有关。谁能帮助这个卑微的n00b？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:24:49.633

首先，我建议您颠倒您的 ID-to-name 字典。按键查找值非常快，但按值查找键非常慢。

```
rd = { name: id_num for id_num, name in d.items() } 
```

然后您的第一个函数可以替换为列表推导：

```
id_list = [rd[find_facility_name(incident)] for incident in incident_list] 
```

这也可能会揭示为什么您的结果中的值会变得混乱。如果事件的设施名称不在您的字典中，则此代码将引发 a `KeyError`（而您的旧函数将跳过它）。

您的`combine`函数与 Python 的内置`zip`函数非常相似。我将其替换为：

```
combination = [id+incident for id, incident in zip(id_list, incident_list)] 
```

但是，由于您是从第二个列表构建第一个列表，因此直接构建组合版本可能有意义，而不是制作单独的列表然后在单独的步骤中组合它们。这是对上面列表理解的更新，直接得到`combination`结果：

```
combination = [rd[find_facility_name(incident)] + incident
               for incident in incident_list] 
```

要进行排序，您可以使用我们刚刚添加到电子邮件消息中的 ID 字符串，而不是再次解析以找到 ID：

```
combination.sort(key=lambda x: (x[0:3], get_date_of_incident(x))) 
```

`3`切片中的 是基于您的示例，并且`"001"`作为`"002"`id 值。如果实际 id 更长或更短，则需要对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:28:09.960

所以，这就是我认为正在发生的事情。如果可能，请纠正我。“incident_list”是电子邮件字符串的列表。您进入并在每封电子邮件中找到设施名称，因为您有一个外部字典，其中 (key:value)=(facility id: facility name)。从字典中，您可以在此“id_list”中提取设施 ID。

您将列表组合起来，以便获得字符串列表 [设施 ID + 电子邮件，...] 然后您希望它按元组排序（设施 ID，发生日期）。

看起来您正在搜索设施 ID 和设施名称两次。如果它们相同，您可以跳过一个步骤。然后，最好的方法是使用元组一次完成所有操作：

```
event_list = ['email1', 'email2',...]

未排序列表 = []
对于事件列表中的电子邮件：
    id = find_facility_id（电子邮件）
    日期 = find_date_of_incident（电子邮件）
    mytuple = ( id, date, id + email )
    unsorted_list.append(mytuple)

final_list = sorted(unsorted_list, key=lambda mytup:(mytup[0], mytup[1]))

```

然后你得到一个简单的元组列表，按第一个元素（id 作为字符串）排序，然后是第二个元素（日期作为字符串）。如果您只需要一个字符串列表（ id + email ），那么您需要一个包含每个元组部分的最后一个元素的列表

`FINALLIST = [ tup[-1] for tup in final_list ]`

# windows-8 - windows8 js&html 应用程序轮询磁贴通知的 js 代码放在哪里

> ID：13823572
> 
> 赞同：0
> 
> 时间：2012-12-11T15:53:08.267
> 
> 标签：windows-8, microsoft-metro, winjs

[http://msdn.microsoft.com/en-us/library/windows/apps/hh761476.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh761476.aspx)

这些说明很棒，但是我在哪里*放置*下面的代码（从上面的文章中获取）？在我的`default.js`文件中，在`app.addEventListener("activated", function (args) {`代码行上方？低于那条线？别处？谢谢微软，但告诉我把代码放在哪里！

```
var notifications = Windows.UI.Notifications;
var recurrence = notifications.PeriodicUpdateRecurrence.hour;
var url = new Windows.Foundation.Uri("http://mytileprovider.com/tile.xml");

notifications.TileUpdateManager.createTileUpdaterForApplication().startPeriodicUpdate(url, recurrence); 
```

理想情况下，这只是一个带有“频率”下拉列表的清单设置和一个用于获取 URL 的输入框。那将非常有帮助和方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:27:53.007

答案是……这取决于。:)

您想在哪里设置磁贴和投票？它是您的应用程序的核心“永远在线”功能吗？如果是这样，则在您的默认页面的**激活**事件中（通常在 default.js 中）。或者，您可能正在根据用户与之交互的内容添加图块（即，选择要固定到起始页的股票）。在这种情况下，您可以将该代码放在处理用户操作的页面中。

简单的答案是……在**激活**的事件中。如您所见，真正的答案可能会更多地参与其中。

# uiscrollview - UIScrollView 在横向模式下意外的内容位移

> ID：13823575
> 
> 赞同：0
> 
> 时间：2012-12-11T15:53:11.563
> 
> 标签：uiscrollview, height, offset

我遇到了一个非常奇怪的问题，我还不知道如何解决它，我已经连续工作了将近两天（除了吃饭、睡觉、喝咖啡和吸烟）。

**我有的：**

我的`UIScrollView`视图控制器内部有一个，包含一定数量的文本字段和一个`UICollectionView`. 通过一个按钮，我打开了另一个视图控制器，用于将新数据添加到集合视图中。添加新数据项后，回到我的第一个视图控制器，我调用`invalidateIntrinsicContentsize`my`UIScrollView`和 my`UICollectionView`来调整它们的大小以适应它们的内容（我使用 Autolayout 并让它们都拥抱它们的内容）。在这两个视图上，我都实现了这些方法以很好地适应它们的内容，这部分工作得很好。

**我的问题是：**

`UICollectionView`如果我以刚刚描述的方式添加数据，并且*如果我处于横向模式*，问题就开始了：在返回到我的初始视图控制器并更新内在内容大小后，*我的内容* `UICollectionView` *被替换*- 在这样的情况下被替换一种方式，在切换到数据添加视图之前内容的滚动位置`UIScrollView`现在变成了固定内容偏移量。如果我现在向上滚动，在切换到数据添加视图控制器之前，我可以通过滚动到最大的位置到达内容的位置。

**图片（每个人都喜欢）：**

为了说明这种情况有点难以解释，我附上了两张图片。红色是滚动视图的整个内容区域，深绿色是内容，两者重叠的地方颜色是橄榄色。的可见部分`UIScrollView`显示在突出显示的边框区域中。

在更新数据之前，内容应该是：

[![普通的](../Images/e10af8c80aa6b341081844945519816e.png)](https://i.stack.imgur.com/ICFDu.png)
[（来源：[grubbrother.com](https://grubbrother.com/wp-content/uploads/before.png)）]

更新数据和更新 UI 后，内容被之前的滚动位置 / 取代`contentOffset`：

[![不正常](../Images/73ac4355edb6db8ba27e97209aed98c9.png)](https://i.stack.imgur.com/NbviH.png)
[（来源：[grubbrother.com](https://grubbrother.com/wp-content/uploads/after.png)）]

请帮我解决这些奇怪的事情。不幸的是，我的截止日期很紧，需要继续进行该项目。尽管如此，我真的不知道如何解决这个问题，甚至不知道是什么原因造成的——我完全不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:22:59.810

尽管我还不知道是什么导致了我的问题中描述的问题，但我发现了一个解决方法，至少以某种方式解决了这些症状：

正如我上面所描述的，切换回`UIViewController`包含越野车时发生的不需要的内容位移`UIScrollView`等于切换到另一个场景之前`contentOffset`的位移。`UIscrollView`

知道了这一点，我在消失`contentOffset`后将其设置为零。`UIViewController`

```
- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];

    [self.scrollView setContentOffset: CGPointZero];
} 
```

当视图重新出现时，我向下滚动到有问题的底部新添加的内容`UIScrollView`：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (self.appearedFromActorsAdding)
    {
        [self.scrollView setContentOffset:CGPointMake(0, self.scrollView.contentSize.height - self.scrollView.frame.size.height) animated:YES];
    }
} 
```

希望这可以帮助遇到同样问题的任何人。

# c++ - 本机 C++ 类和 WinRT 组件（参考类）之间的自动映射？

> ID：13823592
> 
> 赞同：3
> 
> 时间：2012-12-11T15:54:06.117
> 
> 标签：c++, windows-runtime, winrt-xaml, c++-cx

假设我已经用纯原生 C++ 编写了我的 BL（为了在其他平台上重用它的明确目的），现在我想将某些类公开为 WinRT 组件（以便我可以用 C# 编写 UI）。

是否有任何代码生成器会自动为给定的本机 C++ 类生成等效的“引用类”（WinRT 组件），并生成将一组属性从一个复制到另一个的映射代码（有点像 AutoMapper 为 . NET POCO？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:03:18.660

没有这样的工具，WinRT 和 Cx 的想法也不是需要一个。我想说这是您在原生 C++ 逻辑中的架构责任的一部分。

针对 Windows 8 的 WinRT 和 C++ 环境如何帮助您：

*   您可以轻松地将 ISO C++ 代码与基于 Cx/WinRT 的 C++ 代码混合，潜在的方向是一个包装器
*   您可以使用 WRL 和一些 COM 魔法在 100% ISO C++ 中编写 WinRT 组件，这可以帮助您重新考虑 BL 以使其适应新目标

以下链接是 WRL 模板库的指针：

[http://channel9.msdn.com/Events/Windows-Camp/Developing-Windows-8-Metro-style-apps-in-Cpp/The-Windows-Runtime-Library-WRL-](http://channel9.msdn.com/Events/Windows-Camp/Developing-Windows-8-Metro-style-apps-in-Cpp/The-Windows-Runtime-Library-WRL-)

[http://msdn.microsoft.com/en-us/library/vstudio/hh438466.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh438466.aspx)

# php - 如何以另一个 Twig 函数或过滤器为参数调用 Twig 函数？

> ID：13823593
> 
> 赞同：2
> 
> 时间：2012-12-11T15:54:06.923
> 
> 标签：php, twig

我用一些过滤器制作了一个 Twig 扩展，需要调用一个函数，其参数是另一个函数或过滤器，但它没有正确输出，参数在函数调用之外输出。

例如：

```
 {% set clean_url = current_url|NoQuery %}
        {{ BeginPostForm(clean_url) }} 
```

或者

```
 {{ BeginPostForm(URL()) }} 
```

这首先输出函数参数，然后是函数输出，就好像传递了默认参数一样。（即： /blog/welcome 而不是 <form action='/blog/welcome'> ）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:26:08.437

我发现了错误，我在 Twig_Extension 函数上执行 echo 而不是 return，这就是它表现不佳的原因。

# thread-sleep - Thread.sleep（更改图像）Java

> ID：13823601
> 
> 赞同：2
> 
> 时间：2012-12-11T15:54:39.020
> 
> 标签：thread-sleep

我有两个带有图像的jlabels..我尝试在单击另一个标签时更改标签中的图像..（例如游戏）..我有问题..当我写Thread.sleep时，图像不是更改..查看代码：

```
public class Game extends JFrame{
private JLabel l1,l2;;
private boolean isClicked = false ,isClicked2 = false;
public Game(){
    setLayout(new FlowLayout());
    l1 = new JLabel(new ImageIcon(getClass().getResource("image1.png")));
    add(l1);
    l2 = new JLabel(new ImageIcon(getClass().getResource("image1.png")));
    add(l2);

    l1.addMouseListener(new MouseListener() {
        @Override
        public void mouseClicked(MouseEvent e) {}
        @Override
        public void mousePressed(MouseEvent e) {}
        @Override
        public void mouseReleased(MouseEvent e) {
            if(isClicked2){
                l1.setIcon(new ImageIcon(getClass().getResource("image2.png")));
                try {
                    Thread.sleep(1000);
                    l1.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                    l2.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                    isClicked2 = false;
                    isClicked = false;
            }catch(InterruptedException ex){}
            }
            else{
                l1.setIcon(new ImageIcon(getClass().getResource("image2.png")));
                isClicked = true;
            }     
        }@Override public void mouseEntered(MouseEvent e){}@Override public void mouseExited(MouseEvent e){}
    });

    l2.addMouseListener(new MouseListener() {
        @Override
        public void mouseClicked(MouseEvent e) {}
        @Override
        public void mousePressed(MouseEvent e) {}
        @Override
        public void mouseReleased(MouseEvent e) {
            if(isClicked){
              try {
                    l2.setIcon(new ImageIcon(getClass().getResource("image2.png")));
                    Thread.sleep(1000);
                    l2.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                    l1.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                isClicked = false;
                    isClicked2 = false;
              }catch(InterruptedException ex){}  
            }
            else{
                l2.setIcon(new ImageIcon(getClass().getResource("image2.png")));
                isClicked2 = true;
            }     
        }@Override public void mouseEntered(MouseEvent e){}@Override public void mouseExited(MouseEvent e){}
    });
}

public static void main(String[] args) {
    Game g = new Game();
    g.setTitle("Fint the same");
    g.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    g.pack();
    g.setVisible(true);
}

} 
```

运行它并首先单击第一个标签。单击第二个标签后，第一个标签将在 1 秒内更改图像，但 seconf 标签永远不会！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:29:08.747

您不应该在这些方法中使用 sleep() ——它们是从处理所有绘图事件的“事件调度”线程调用的。如果您正在睡觉，则线程无法重新绘制您的标签。

与其睡觉，不如更改您的图像，然后创建一个 javax.swing.Timer 任务，该任务将在 1 秒后触发以根据需要再次更改图像。上面的 koljaTM 示例使用了 java.util.Timer，它在“错误”线程中运行。这是他的代码，修改为使用 SWING 计时器：

```
 if (isClicked) {
            try {
                l2.setIcon(new ImageIcon(getClass().getResource("image2.png")));
                javax.swing.Timer timer = new javax.swing.Timer(1000, new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        l2.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                        System.out.println("image2 gone");
                        l1.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                        isClicked = false;
                        isClicked2 = false;
                    }
                });
                timer.setRepeats(false);
                timer.start();
            } catch (final Exception ex) {
                ex.printStackTrace();
            }
        } else {
           ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:44:04.047

图像的更改必须在事件线程（用于处理图形事件的线程）上完成。因此，设置图像将在您的方法返回后将要处理的适当事件排队。不过，那时图像已经变回了，因为事件线程上的 sleep() 不允许处理任何其他事件。正如 dashrb 所说，不要 sleep() 主线程，而是在 Timer 中安排翻转：

```
 if (isClicked) {

                    l2.setIcon(new ImageIcon(getClass().getResource("image2.png")));

                    new javax.swing.Timer(1000, new ActionListener() {
                        @Override
                        public void actionPerformed(final ActionEvent e) {
                            l2.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                            l1.setIcon(new ImageIcon(getClass().getResource("image1.png")));
                            isClicked = false;
                            isClicked2 = false;
                        }
                    }).start();

                } catch (final Exception ex) {
                    ex.printStackTrace();
                }
            } else {
               ... 
```

# php - 在（MYSQL）数据库中获取（PHP）数组并将一些php数组数据插入JavaScript

> ID：13823602
> 
> 赞同：1
> 
> 时间：2012-12-11T15:54:39.767
> 
> 标签：php

我正在获取一个数组，我想将一些数据插入到 javascript 中的两个位置，但我不知道如何正确执行，有人可以帮我吗？

我在 PHP/MYSQL 中获取一个数组，如下所示：

```
<?php while($row = mysql_fetch_array( $result )) { ?>

<?php
//I WANT TO LOOP THE BELOW CODE IN JAVASCRIPT SOMETHING LIKE THIS?: 
echo 'var point'.$count.'= new google.maps.LatLng('.$LAT.', '.$LNG.');'; 
?>

<?php
// I WANT TO LOOP THIS ALSO BUT IT IS AT THE END OF THE JAVASCRIPT CODE AND THERE IS CODE IN THE MIDDLE THAT I DON'T WANT LOOPED
echo 'var marker'.$count.'= new google.maps.Marker({draggable: true,raiseOnDrag: false,icon: image,shadow: shadow,shape: shape,map: map,position: point'.$count.'});'; 
?>

<?php } ?> 
```

JavaScript 看起来像这样：

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    function load(){

 //** START LOOP THIS IN PHP **//    
    var point1 = new google.maps.LatLng(44.8041322, -93.1668858); //LOOP THIS IN PHP
 //** END LOOP THIS IN PHP **//    

    var myMapOptions = {
    zoom: 5,
    center: point,
    mapTypeId: google.maps.MapTypeId.TERRAIN
    };
    var map = new google.maps.Map(document.getElementById("map"),myMapOptions);
    var image = new google.maps.MarkerImage(
    'marker-images/image.png',
    new google.maps.Size(40,35),
    new google.maps.Point(0,0),
    new google.maps.Point(20,35)
    );
    var shadow = new google.maps.MarkerImage(
    'marker-images/shadow.png',
    new google.maps.Size(62,35),
    new google.maps.Point(0,0),
    new google.maps.Point(20,35)
    );
    var shape = {
    coord: [27,0,30,1,32,2,34,3,35,4,36,5,38,6,39,7,39,8,39,9,39,10,38,11,37,12,33,13,34,14,34,15,33,16,32,17,31,18,27,19,28,20,28,21,27,22,26,23,22,25,23,26,24,27,24,28,24,29,24,30,24,31,24,32,23,33,22,34,17,34,16,33,15,32,15,31,14,30,14,29,15,28,15,27,16,26,17,25,13,23,12,22,11,21,11,20,12,19,8,18,7,17,6,16,5,15,5,14,6,13,2,12,1,11,0,10,0,9,0,8,0,7,1,6,3,5,4,4,5,3,7,2,9,1,12,0,27,0],
    type: 'poly'
    };

 //** START LOOP THIS IN PHP **//
    var marker1 = new google.maps.Marker({draggable: true,raiseOnDrag: false,icon: image,shadow: shadow,shape: shape,map: map,position: point1});
 //** END LOOP THIS IN PHP **//

    }
    </script> 
```

我只是不知道如何循环信息两次，顶部的 var point1... 循环并不是真正的问题，但是我如何在不循环所有 javascript 的情况下循环底部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:46:16.670

下面应该可以工作，然后只需在 while 循环后的适当位置插入 $point_str 和 $marker_str 即可。

```
<?php 
$point_str = '';
$marker_str = '';
while($row = mysql_fetch_array( $result )) {
    // define $LAT, $LNG, $count++
    $point_str .= 'var point'.$count.'= new google.maps.LatLng('.$LAT.', '.$LNG.');'."\n";
    $marker_str .= 'var marker'.$count.'= new google.maps.Marker({draggable: true,raiseOnDrag: false,icon: image,shadow: shadow,shape: shape,map: map,position: point'.$count.'});'."\n";
}
?> 
```

# php - 如何保持 cookie/session 相关的数据库干净？

> ID：13823603
> 
> 赞同：0
> 
> 时间：2012-12-11T15:54:44.360
> 
> 标签：php, database, cookies, shopping-cart

我正在开发一个通过 cookie 或 PHP 会话为用户（即使他们没有登录）持续存在的购物车。`users`因此，每当未登录的用户访问该站点时，我都会在表中创建一条新记录，`carts`当`carts_items`该用户将商品添加到购物车时，我会创建新记录，等等。

这些用户中的许多将永远不会返回，cookie 将过期并且生活还在继续，但这些表将填充无用的记录。

问题是：如何摆脱这些过期的 cookie 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:08:40.870

听起来您正在重新发明 PHP 会话。我建议只将购物车项目保留在数据库之外，而是保留在会话数组中。您可以根据需要将会话配置为持续多久。

长时间保留购物车物品有一些缺点 - 产品更改/被删除等，您需要在某个地方定期检查所有购物车物品仍然有效。

如果您必须将购物车项目存储在数据库中，那么您需要在每个页面视图上更新用户记录，并带有时间戳。使用它，您可以拥有一个 cron 作业/计划任务，该任务会删除时间戳为 X 天的用户和关联的购物车项目。

Cron 是 Linux/Unix 的一项功能，它允许您在设定的时间点安排任务。例如，如果您想每天凌晨 2 点调用清理脚本，那么您的 cronjob 可能如下所示：

```
* 2 * * * /path/to/php -q /path/to/script.php >/dev/null 
```

来自[维基百科](http://en.wikipedia.org/wiki/Cron)：

```
*    *    *    *    *  command to be executed
┬    ┬    ┬    ┬    ┬
│    │    │    │    │
│    │    │    │    │
│    │    │    │    └───── day of week (0 - 7) (0 or 7 are Sunday, or use names)
│    │    │    └────────── month (1 - 12)
│    │    └─────────────── day of month (1 - 31)
│    └──────────────────── hour (0 - 23)
└───────────────────────── min (0 - 59) 
```

[更多信息](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:02:14.787

使用 cron 作业，您可以删除过期和不必要的记录。例如：

```
$lastWeekStart = strtotime('-1 week'); 
```

和 sql 查询可能是这样的：

```
DELETE FROM users WHERE is_not_login = 1 AND updated_at < $lastWeekStart 
```

您每周运行一次此脚本。

# opengl - double in glutBitmapCharacter openGL

> ID：13823606
> 
> 赞同：0
> 
> 时间：2012-12-11T15:54:50.500
> 
> 标签：opengl

快速提问：

我怎样才能使用双倍的价值

`glutBitmapCharacter`

?

我尝试了很多选项，但没有一个有效，我不知道如何将 double 转换为 char *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:56:58.177

```
#include <GL/glut.h>
#include <sstream>
#include <iomanip>

void glString( const std::string str, void* font = GLUT_BITMAP_8_BY_13 )
{
    for( size_t i = 0; i < str.size(); ++i )
    {
        glutBitmapCharacter( font, str[i] );
    }
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    glOrtho( 0, w, h, 0, -1, 1);

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();

    glColor3ub( 255, 255, 255 );

    glRasterPos2i( 50, 50 );

    double val = 3.14159265358979323846;
    std::ostringstream oss;
    oss << std::setprecision(17) << val;

    glString( oss.str() );

    glutSwapBuffers();
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Text" );
    glutDisplayFunc( display );
    glutMainLoop();
    return 0;
} 
```

# iphone - 是否可以更改 PKAddPassesViewController 的标题？

> ID：13823607
> 
> 赞同：1
> 
> 时间：2012-12-11T15:54:51.450
> 
> 标签：iphone, objective-c, ios, ios6, passbook

每一个通行证，在添加时会`PKAddPassesViewController`根据通行证类型和尊重本地化自动设置其标题（通用获取“卡”，事件票获得“事件票”，商店卡获得“商店卡”等等......）；但是可以更改标题吗？

我试过设置实例的`title`属性`PKAddPassesViewController`，但什么也没发生，所以也许有一个属性`pass.json`可以控制标题（我在 PassKit 规范中没有找到）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:30:40.663

不，在当前框架中，无法通过 Pass Kit 框架或 pass.json 键自定义此标题。

# android - android取消扬声器输出。消除电话反馈

> ID：13823609
> 
> 赞同：4
> 
> 时间：2012-12-11T15:54:56.897
> 
> 标签：android, audio, echo, speaker

我正在开发一些语音识别应用程序。当电话响起时，我需要识别单词，但要做到这一点，我必须取消扬声器对麦克风的贡献。所以我希望麦克风忽略来自扬声器的所有音频。

我发现 AcousticEchoCanceler 用于 VoIP 应用程序来消除回声，但我尝试使用它，当我的手机响起铃声时没有区别。

我正在从名为“recorder”的 AudioRecord 对象中读取音频，然后应用 AcousticAudioCanceler

```
boolean isAvailable = AcousticEchoCanceler.isAvailable(); 
if (isAvailable) { 
    AcousticEchoCanceler aec = AcousticEchoCanceler.create(recorder.getAudioSessionId());
    if(!aec.getEnabled())
         aec.setEnabled(true);
    Log.d("AEC", " AEC enabled : " + aec.getEnabled() + " . Has control: " + aec.hasControl()); 
}
else
    Log.d("AEC", " AEC is not available"); 
```

应用 AcousticCanceler 和不应用它时，我得到相同的输入。为什么？当来自另一个应用程序时，它可能不控制音频？我需要它来取消扬声器的任何输出，与它们来自哪个应用程序无关。

此外，AcousticAudioCanceler 是唯一的方法吗？我的意思是，它只适用于 Android Jelly Bean，我需要它适用于所有设备......提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T13:57:30.543

你的方法很好。但正如您已经注意到的那样`AcousticEchoCanceler`，它是在 API 级别 16 中添加的。此外，制造商不会被迫实施它。因此，在 API 级别 >=16 的各种设备上`AcousticEchoCanceler.isAvailable()`产生`false`.

幸运的是，这并不一定意味着根本没有回声消除。由于您使用`AudioRecord`，您可以选择`MediaRecorder.AudioSource.VOICE_COMMUNICATION`在 API 11 中添加的输入，并且*通常*具有主动降噪和回声消除功能。

不幸的是，这也不能保证有效，因此如果您绝对需要它或需要您的应用程序使用 API <=10，那么您必须自己实现回声消除。

# c++ - C++中静态结构的初始化

> ID：13823612
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:55:07.337
> 
> 标签：c++, singleton, static-members

我正在用 C++ 实现一个线程安全的单例类。我需要一种方法来初始化保护该`getInstance()`方法的互斥锁。

这是一个自包含的共享库，所以我不能使用另一个类的互斥锁，我必须找到一种方法在类中初始化它。

该库必须移植到各种平台，所以让我们考虑互斥锁是：

```
static void * OS_mutex; 
```

并初始化它你使用

`OS_Mutex_Init ( void * mutex);`

我试图实现一个嵌套类，在它的构造函数中我初始化了 OS_mutex 结构。

但我遇到了一些麻烦，有没有人知道实现我需要的方法？任何参考资料或链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:04:23.937

首先，将其声明为变量：

```
static MyStruct OS_Mutex; 
```

在哪里：

```
struct MyStruct
{
    void* pointer;
    MyStruct() : pointer(0)
    {
        // Called on initialization of global variables by the CRT

        // You can call here your function OS_Mutex_Init()
        // Or you can use lazy initialization (leave the pointer to 0,
        // and initialize it only when someone needs it)
    }
}; 
```

那么，这两个答案可能会对您有所帮助：

*   [加载 DLL 未初始化静态类](https://stackoverflow.com/questions/5114683/loading-dll-not-initializing-static-c-classes)
*   [在 dll 中声明的全局变量会发生什么](https://stackoverflow.com/questions/75701/what-happens-to-global-variables-declared-in-a-dll)

# json - 对 Restful 服务器的 POST 请求中的 JSON 错误“无法实例化抽象类型”

> ID：13823615
> 
> 赞同：0
> 
> 时间：2012-12-11T15:55:17.757
> 
> 标签：json, rest, http-post

我正在尝试使用 JSON 格式（使用 Chrome 的附加组件 Advanced Rest Api）在 Restful 服务器上执行 POST 请求。这是 JSON 字符串：（带有标头：Accept: application/json; Authorization: Basic ....）

```
{
"datecreated": 1355237359326,
"datemodified": 1355237359326,
"entrylocation": "Düdingen",
"entrydate": 1347351720000,
"entryduration": 11900,
"comment": "Random text",
"publicvisible": 2,
-
"coursetype": "Running track (Outdoor)",
"courselength": 600,
"numberofrounds": 12,
"track": "Fast track"
} 
```

我收到以下错误：

```
Can not instantiate abstract type [simple type, class ch.unifr.cybercoach.server.entities.jaxb.entries.Entry] (need to add/enable type         information?) 
at [Source: org.eclipse.jetty.server.HttpInput@65ab8182; line: 1, column: 2] 
```

这很奇怪，因为相同的 POST 请求适用于 XML 格式：

```
 <?xml version="1.0" encoding="utf-8" standalone="yes"?>
 <entryrunning>
 <comment>Random text</comment>
 <entrydate>2012-09-11T10:22:00+02:00</entrydate>
 <entryduration>11900</entryduration>
 <entrylocation>Düdingen</entrylocation>
 <publicvisible>2</publicvisible>
 <courselength>600</courselength>
 <coursetype>Running track (Outdoor)</coursetype>
 <numberofrounds>12</numberofrounds>
 <track>
PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGttbCB4bWxucz0iaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9rbWwvMi4yIj4KICA8RG9jdW1lbnQ+CiAgICAgICAgICA8L1BvbHlnb24+CiAgICAgICAgPC9QbGFjZW1hcms+CiAgICAgIDwvRm9sZGVyPgogICAgPC9Gb2xkZXI+CiAgPC9Eb2N1bWVudD4KPC9rbWw+Cg==</track>
 </entryrunning> 
```

有人有什么想法吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:20:18.743

sys.stderr 原来是正确的 - 谢谢（请参阅我的问题帖子下方的评论）。服务器端存在解组问题。现在这个问题已经解决了，下面的 json 字符串就可以正常工作了：

```
{"entryrunning" :{
"datecreated": 1355237359326,
"datemodified": 1355237359326,
"entrylocation": "Düdingen",
"entrydate": 1347351720000,
"entryduration": 11900,
"comment": "Random text",
"publicvisible": 2,
"coursetype": "Running track (Outdoor)",
"courselength": 600,
"numberofrounds": 12,
"track": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGttbCB4bWxucz0iaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9rbWwvMi4yIj4KICA8RG9jdW1lbnQ+CiAgICAgICAgICA8L1BvbHlnb24+CiAgICAgICAgPC9QbGFjZW1hcms+CiAgICAgIDwvRm9sZGVyPgogICAgPC9Gb2xkZXI+CiAgPC9Eb2N1bWVudD4KPC9rbWw+Cg=="
}} 
```

# oracle - 从 Flyway 调用 Oracle 程序

> ID：13823616
> 
> 赞同：1
> 
> 时间：2012-12-11T15:55:19.553
> 
> 标签：oracle, flyway

我在 Java 应用程序中使用 Maven 3、FlyWay 和 Oracle。我正在尝试从我的 sql 脚本中调用 Oracle 过程。

该文件名为`V1.0.0__test.sql`，内容为：

```
execute pkg_test.pr_do_task('TEST_VALUE'); 
```

格式是否正确？我只在运行时收到一般错误

```
mvn -P DEV clean compile flyway:migrate 
```

这是：

```
[错误] 无法在项目 bambi-ex 上执行目标 com.googlecode.flyway:flyway-maven-plugin:2.0.3:migrate (default-cli)
man-sql：Flyway 错误：com.googlecode.flyway.core.api.FlywayException：迁移到版本 4.0.0 失败！请恢复
 备份和回滚数据库和代码！-> [帮助 1]
org.apache.maven.lifecycle.LifecycleExecutionException: 未能执行目标 com.googlecode.flyway:flyway-maven-plugin
:2.0.3:migrate (default-cli) on project bambi-exman-sql: Flyway Error: com.googlecode.flyway.core.api.FlywayException: M
迁移到 4.0.0 版本失败！请恢复备份并回滚数据库和代码！
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:217）
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:153）
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        在 org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute（LifecycleStarter.java:161）
        在 org.apache.maven.DefaultMaven.doExecute（DefaultMaven.java:320）
        在 org.apache.maven.DefaultMaven.execute（DefaultMaven.java:156）
        在 org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        在 java.lang.reflect.Method.invoke(Method.java:597)
        在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced（Launcher.java:290）
        在 org.codehaus.plexus.classworlds.launcher.Launcher.launch（Launcher.java:230）
        在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        在 org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
引起：org.apache.maven.plugin.MojoExecutionException：Flyway 错误：com.googlecode.flyway.core.api.FlywayException：
 迁移到版本 4.0.0 失败！请恢复备份并回滚数据库和代码！
        在 com.googlecode.flyway.maven.AbstractFlywayMojo.execute(AbstractFlywayMojo.java:200)
        在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo（DefaultBuildPluginManager.java:101）
        在 org.apache.maven.lifecycle.internal.MojoExecutor.execute（MojoExecutor.java:209）
        ... 19 更多
原因：com.googlecode.flyway.core.api.FlywayException：迁移到4.0.0版本失败！请恢复备份和
 回滚数据库和代码！
        在 com.googlecode.flyway.core.migration.DbMigrator.migrate(DbMigrator.java:186)
        在 com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:856)
        在 com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:820)
        在 com.googlecode.flyway.core.Flyway.execute(Flyway.java:1259)
        在 com.googlecode.flyway.core.Flyway.migrate(Flyway.java:820)
        在 com.googlecode.flyway.maven.MigrateMojo.doExecuteWithMigrationConfig(MigrateMojo.java:159)
        在 com.googlecode.flyway.maven.AbstractMigrationLoadingMojo.doExecute（AbstractMigrationLoadingMojo.java:162）
        在 com.googlecode.flyway.maven.AbstractFlywayMojo.execute(AbstractFlywayMojo.java:191)
        ... 21 更多

```

我似乎无法获得完整的堆栈跟踪。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:34:36.180

```
Try this,

begin
 pkg_test.pr_do_task('TEST_VALUE');
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:59:56.353

这种情况下的错误报告肯定可以而且应该改进。请在问题跟踪器中提交增强请求。

# c# - asp.net mvc触发jquery函数

> ID：13823618
> 
> 赞同：0
> 
> 时间：2012-12-11T15:55:24.787
> 
> 标签：c#, jquery, asp.net-mvc, visual-studio-2010

我有一个快速的问题，我希望没有什么激烈的。

在 crud 模板中，当有人将新记录添加到数据库中时，您可以让 ajax 表单将数据发送到服务器，然后重定向到数据库中所有记录的列表。

所以事件的流程是：

```
 ViewResult Edit => Edit Razor View => ActionResult Edit => ViewResult AllRecords => AllRecords Razor View 
```

我知道您可以让 JQuery 以动画方式将新记录引入列表。

我猜你需要将新添加的项目传递给控制器​​，然后让控制器将该信息传递给 JQuery，但是在 razor 视图中会做这种事情。

那么基本上你如何让 JQuery 以动画方式将新记录引入列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:08:33.970

如果我理解正确，您希望在添加项目后将其显示在列表中，但不进行重定向。

如果是这种情况，您有两个选择。

1.  当您提交表单并将数据发送到控制器的操作方法时，您可以返回带有新记录信息的 JSON，其中包括新添加的 Id。然后在 AJAX 回调中，您将解析返回的 JSON 并将其提供给某种模板以填充列表。

2.  或者更简单的方法是将信息发送到控制器的操作方法，一旦添加了记录，就将该新记录传递给已设置为专门呈现一行的 Razor 视图。然后，您在 AJAX 回调中返回此呈现的 HTML，并将其简单地插入到列表的末尾。

方法#2 更容易，但不是很可重用。

# matlab - 通过鼠标单击获取日期，matlab

> ID：13823620
> 
> 赞同：2
> 
> 时间：2012-12-11T15:55:31.687
> 
> 标签：matlab, matlab-uitable

我想从日历中获取两个日期。matlab函数是

```
c = calendar 
```

或者

```
dates = calendar; 
dates(~any(dates,2),:) = []; 
fh = figure; 
uh = uitable('parent',fh,'data',dates,'ColumnWidth',repmat({20},1,7),...
          'ColumnName',{'S','M','T','W','T','F','S'}); 
```

但是如何让用户点击这两个日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:43:28.927

创建回调函数：

```
function cell_select_callback(h, ind)
    dates = get(h, 'data');
    d = dates(ind.Indices(1), ind.Indices(2));
    if d == 0
        return
    end
    dn = datenum(2012, 12, d); % you have to have year & month here
    fprintf('cell_select_callback(): click at [%d %d] on %s\n', ind.Indices(1), ind.Indices(2), datestr(dn));
return 
```

并添加到 uitable() 参数中：`uitable(..., 'CellSelectionCallback', @cell_select_callback)`.

按下时，cell_select_callback 将打印点击的坐标和日期，例如： `cell_select_callback(): click at [2 3] on 04-Dec-2012`

# objective-c - 使用 UIImageView 显示正确的图像大小

> ID：13823624
> 
> 赞同：0
> 
> 时间：2012-12-11T15:55:44.997
> 
> 标签：objective-c, cocoa-touch, ios5, ios4, ios6

如何使用 UiimageView 显示图像以确保 imageview 是 UIImage 的正确大小？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:03:37.587

此代码应自动创建一个带有图像框架的 imageView。

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"ImageName"]]; 
```

[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImageView/initWithImage%3a)的一点背景。

> 此方法调整接收器的帧以匹配指定图像的大小。默认情况下，它还禁用图像视图的用户交互。

# c++ - 有没有办法禁用将临时绑定到 const 引用？

> ID：13823626
> 
> 赞同：2
> 
> 时间：2012-12-11T15:55:47.957
> 
> 标签：c++, reference, object-lifetime

在 C++ 中，可以将临时对象绑定到 const 引用：

```
struct A {};

int main() {
  const A& a = A();
} 
```

有没有办法为某些特定的类 A 禁用它，这样就不可能将此类的临时绑定到 const 引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T15:56:56.617

不，如果你需要这样做，你做错了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T05:56:33.990

一般来说，似乎没有办法禁用将临时绑定到 const 引用。

但是，为了给出一个有根据的答案，我想引用 C++ 2003 标准：

> 如果初始化表达式是右值，T2 是类类型，并且“cv1 T1”与“cv2 T2”引用兼容，则引用以下列方式之一绑定（选择由实现定义）：
> 
> — 引用绑定到由右值表示的对象（参见 3.10）或该对象内的子对象。
> 
> — 创建了一个“cv1 T2”[sic] 类型的临时对象，并调用构造函数将整个右值对象复制到临时对象中。引用绑定到临时对象或临时对象中的子对象。93)
> 
> 无论复制是否实际完成，用于制作复制的构造函数都应该是可调用的。

因此，这似乎可以在 C++03 中通过将复制构造函数设为私有来实现：

```
struct A {
  A() {}
 private:
  A(const A&);
};

int main() {
  const A& a = A();
} 
```

但是，这不适用于流行的编译器。例如，即使带有`-std=c++03`标志，GCC 也接受上述代码。Clang 也接受此代码，但带有警告：

> test.cc:8:12: 警告：C++98 需要一个可访问的复制构造函数，用于绑定对临时的引用时的类“A”；是私人的

因此，与标准相反，没有办法做到这一点。

在这种情况下，C++11 不再需要可访问的复制构造函数。

# sql - ORDER BY 函数在 Oracle 中不起作用

> ID：13823629
> 
> 赞同：3
> 
> 时间：2012-12-11T15:56:04.637
> 
> 标签：sql, oracle, sorting, sql-order-by

我正在使用下面的 ORDER BY 函数按客户 ID 订购一个简单的查询（它最初是派对年龄，但似乎不起作用，所以我更改了它以查看它是否是语法）。

```
SELECT   customer_id, customer_name, party_age
FROM     customer
ORDER BY customer_id 
```

报告没有返回错误，但是当我去查看报告时，它根本没有排序。我也尝试过使用数字（ORDER BY x）。

有人指导我正确的方向吗？

编辑：Customer_id 是 VARCHAR2(3)，有 10 个样本数据字段，范围从 001 到 010。我尝试按照下面的建议转换为 int，但结果仍然相同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T15:59:57.010

`Order by`在甲骨文工作。问题一定是你得到的结果与你期望的不同。

一个典型的原因是一个表示为字符串的数字。这会将事物排序为 1, 10, 100, 101, 102 。. . 如果您期望数字排序，这看起来不正确。

我的猜测是以下将起作用：

```
 order by cast(customer_id as int) 
```

# ruby-on-rails - 在一个长期运行的项目中整合 Rails 迁移

> ID：13823633
> 
> 赞同：7
> 
> 时间：2012-12-11T15:56:23.243
> 
> 标签：ruby-on-rails, migration

我正在从事一个积累了数百次迁移的项目，我不确定如何长期处理它们。我想他们没有伤害任何东西，但是保留一堆旧文件以进行增量迁移似乎很奇怪，其中一些创建了后来被删除的表。

到目前为止，我已经看到了三种可能性：

1.  别管他们。他们没有伤害任何东西。

2.  只需删除它们。我认为这样做并没有太大的危害，因为新开发人员可能会从模式加载开始，而不是迁移。

3.  将它们全部删除，使用与旧合并匹配的时间戳创建一个新合并，然后从您的架构创建一个新合并。这看起来很干净，但我不确定谁会真正使用它。

我倾向于删除它们，但我很好奇我是否遗漏了一个大陷阱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:59:51.783

在我看来，只要项目中的每个数据库，尤其是生产数据库，至少是版本“201xxxxxxxx”，删除该版本之前的迁移应该没问题。它们在技术上不再是必需的。

在那之后，如果你想用你的数据库历史玩考古，你仍然可以使用你的版本控制系统。

以**Git**为例，您可以使用以下命令快速查看过去：

```
git log --name-only db/migrate/    #to list commit involving migrations + migration filename
git show xxxxx db/migrate          #to see the code of commit xxxxx's migration(s) 
```

或者，您可以浏览存储库历史记录`schema.rb`，识别提交并使用上面的命令查看相应的迁移内容。

如果您更喜欢打火机`db/migrate`并使用版本控制，我会进行一些清理。

如果您发现直接提供整个迁移历史记录更方便，因为它更易于浏览，我会选择选项 1。

**注意**：旧的迁移很可能对当前的应用程序代码没有意义。例如，某些迁移可能会引用不再存在的类或方法。在编写迁移时使用版本控制来检查应用程序也可以避免一些混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:35:27.297

如果你在一个足够大的项目上工作了足够长的时间，那么有一天你会不屑地看着所有这些额外的迁移，并想知道有多少可以存在。

你对自己想，“只是删除它们......它们什么都不*做*。” 这是一个完全合乎逻辑且正常的思维过程（尤其是作为 Rails 开发人员，我们只是喜欢最小化代码并使事情变得高效！），但不要让阴暗面诱惑你。

通过删除迁移，您正在删除应用程序数据模型的历史记录，更糟糕的是，您获取当前模型的逻辑路径。这段历史可以帮助你记住你为什么做了你做过的事，而没有做你没做的事。

是的，我们都因不时删除迁移而感到内疚。但是您必须抵制诱惑，因为净收益只有几 kB 和更干净的迁移文件夹。

请记住：那些删除迁移的人注定要重蹈覆辙！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T19:40:06.877

就个人而言，我倾向于选项 1：在任何项目的某个时刻，架构是最重要的，迁移只是一种好奇心，但当你说它们没有伤害任何东西时，你是对的。从理论上讲，旧迁移对于想要返回并查看数据库在过去某个时间点是如何组织的人可能很有用。

我不知道删除它们有什么严重的陷阱，但我也看不出这样做有什么好处，除非在您想编辑新迁移时可以节省滚动过去的时间。

我不认为将复制模式的单个迁移放在一起的努力是有益的 - 这是额外的工作，无论如何这就是模式的用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T19:41:02.283

在我们以前的一个项目中，我们删除了所有迁移，创建了一个新的迁移，它将使用手动 sql 截断 schema_migrations 表，然后将 db/schema.rb 内容复制到其中。当然，这种迁移是不可逆转的，但是它让我们摆脱了数百个旧的无价值迁移，但仍然能够重新创建数据库，而不仅仅是从数据库模式，而是从迁移。

# c# - 使用 JSON.NET 反序列化不良数据结构

> ID：13823634
> 
> 赞同：1
> 
> 时间：2012-12-11T15:56:27.163
> 
> 标签：c#, json, customization, json.net

由于我无法控制的情况（SurveyGizmo API），我必须反序列化以以下（示例）格式保存的数据：

```
// Data in JSON format as produced by API
[{
    "id": "2",
    "contact_id": "",
    "status": "Deleted",
    "is_test_data": "1",
    "datesubmitted": "2012-11-12 08:41:49",
    "sResponseComment": "",
    "[question(3)]": "fsdfsd",
    "[question(4), option(10001)]": "",
    "[question(4), option(10002)]": "Some answer",
    "[question(5), option(10008)]": "",
    "[question(5), option(10009)]": "Other administrative role"
},{
    etc.
}] 
```

我正在使用[JSON.Net 对其](http://bit.ly/VxCWDx "JSON.NET 主页")进行解码，并且理想情况下希望将这些问题条目提取到一个键控结构中：问题 [qnum] [optnum]。

我可以很好地使用多维数组，并且可以使用 RegEx 根据需要将问题和选项分开，但是我找不到足以让我开始编写自定义 JSONConverter 以包含代码的工作示例。

到目前为止，我发现了以下内容（ISurveyObject 限制了我将要反序列化的类型，并指定了某些公共属性）

```
class SurveyGizmoJsonArrayConverter<T> : Newtonsoft.Json.Converters.CustomCreationConverter<T[]> where T : ISurveyObject
{
    public override T[] Create(Type objectType)
    {
        List<T> retArr = new List<T>();
        return retArr.ToArray();
    }

    public override object ReadJson(Newtonsoft.Json.JsonReader reader, Type objectType, object existingValue, Newtonsoft.Json.JsonSerializer serializer)
    {
        // What goes here? I can't seem to find working examples...
    }
} 
```

任何人都可以提供任何帮助或代码示例吗？

我想也许最有用的代码片段是我需要放入 ReadJson 函数以使其进行普通反序列化的代码片段 - 然后我可以针对特殊情况进行调整......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:39:16.907

这对我有用

```
var listofDicts = JsonConvert.DeserializeObject<List<Dictionary<string, object>>>(json); 
```

# objective-c - 如何用 arc4random 生成随机数？

> ID：13823638
> 
> 赞同：1
> 
> 时间：2012-12-11T15:56:37.970
> 
> 标签：objective-c, ios6, arc4random

我正在尝试生成从 -50 到 50 的随机数，但我不知道如何使用 arc4random 完成此任务。

有没有人有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:59:02.547

您可以获得一个最大为 100 并减去 50 的随机数。您还需要将其转换回 int，因为 arc4random 它是一个无符号类型。

```
(arc4random() % (101)) - 50 
```

# objective-c - 你如何设置about：home在webView，Obj-C上

> ID：13823648
> 
> 赞同：2
> 
> 时间：2012-12-11T15:56:58.660
> 
> 标签：objective-c, cocoa-touch, webkit

我正在创建一个 Cocoa web 浏览器，我注意到如果 webview 加载一个 nil 位置，它只会加载 about:home。由于我没有设置它，页面只是显示为白色。有没有办法可以改变 about:home 的样子。即使它是一个简单的 .rtf 文件什么的。

我环顾四周，但没有看到任何方法可以做到这一点。我是否想创建一个 NSURL 并将其设置为任何文件？

谢谢。哦，如果需要代码，我很乐意添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:14:45.357

尝试这样的事情：

```
// Inside your App Delegate
-(void)applicationDidFinishLaunching:(NSNotification *)notification {
    // Assuming WebView is called myWebView
    NSString *currentURL = [myWebView mainFrameURL];

    if(!currentURL) {
        NSString *homeResource = [[NSBundle mainBundle] pathForResource:@"home" ofType:@"html" inDirectory:@"default"];

        NSURL *homeURL = [NSURL fileURLWithPath:homeResource];

        NSURLRequest *request = [NSURLRequest requestWithURL:homeURL];

        [myWebView loadRequest:request];
    }
} 
```

您需要在项目**资源**部分的名为**default的文件夹中拥有一个名为****home.html**的预制文件。

 ****我想这并不*完全*取代`about:home`，但您也可以随时检查`about:home`并适当地处理它。****

# jquery - 逐步完成表格，因为所有输入都连续完成

> ID：13823649
> 
> 赞同：1
> 
> 时间：2012-12-11T15:56:59.223
> 
> 标签：jquery, dynamicform

--[**小提琴**](http://jsfiddle.net/sKsEw/1/)--

我正在设计一个像向导一样的表单，引导用户完成每个输入，并且在解决所有输入之前不允许他们继续。

*当且仅当*当前行中的所有输入都已填写或检查时，我想显示表中的下一行。行可以包含任意数量的文本输入、复选框或单选组。

这是我当前的代码：

```
<table>
    <tr>
        <td><input type="text"></td>

        <td><input type="radio"></td>
    </tr>

    <tr style="display:none">
        <td><input type='radio'></td>

        <td><input type='checkbox'></td>
    </tr>

    <tr style="display:none">
        <td><input type='text'></td>

        <td><input type='text'></td>
    </tr>
</table>​ 
```

* * *

```
function refreshCascadingLists() {
    // Get an array of tr's
    // Loop thorugh each and see if it should be shown based on it's predecessors status
    var prevHadUnselected = false;
    $("table tr").next("tr").each(function(curIdx, curEntity) {
        if (prevHadUnselected) {
            $(this).fadeOut();
        } else {
            $(this).fadeIn();
        }

        prevHadUnselected = false;
        $(this).find(":input").each(function(curSelIdx, curSelEntity) {
            if ($(curSelEntity).val() == "" && $(curSelEntity).not(":checked")) 
                prevHadUnselected = true;
        });
    });
}

$(document).ready(function() {
    $(":input").bind('keyup change', function() {
        refreshCascadingLists();
    });
});​ 
```

* * *

当用户在第一行的文本框中键入内容时，这将显示下一行，但他们还应该检查单选按钮。此外，它显示了表中的所有行，而不仅仅是下一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:12:38.583

我会做这样[的事情](http://jsfiddle.net/JGkwj/)：

```
function refreshCascadingLists($tr) {
    var all_filled = true;
    $tr.find(':input').each(function() {
        if($(this).is('input[type=radio], input[type=checkbox]')) {
            if(!$(this).is(':checked')) {
                all_filled = false;    
            }
        } else if($(this).val() == '') {
            all_filled = false;
        }
    });

    var $next_tr = $tr.next('tr');    
    if(all_filled) {
        if(!$next_tr.is(':visible')) {
            $next_tr.fadeIn(function() {
                refreshCascadingLists($(this));                    
            });    
        }
    } else {
        $tr.nextAll('tr').hide();
    }
}

$(document).ready(function() {
    $(":input").bind('keyup change', function() {
        refreshCascadingLists($(this).closest('tr'));
    });
});​ 
```

大多数功能实际上可以打得相当多，但我是这样写的，所以你可以很容易地看到它在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:02:57.073

问题在这里`$("table tr").next("tr").each(...`

您正在为 中的每一行选择所有下一行`$("table tr")`。固定移动`.next("tr")`里面`each()`。

这是简化的[小提琴](http://jsfiddle.net/liho1eye/sKsEw/8/)

# java - ItemWriter 回滚但数据已提交到数据库

> ID：13823654
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:57:33.080
> 
> 标签：java, spring-batch, spring-transactions

我正在使用在我的 ItemWriter 中自动装配的现有 DAO 在数据库中插入元素。

我设置了提交间隔 = 5。

在我的 xml（读取）中，我在第 5 个元素中放入了无效数据以测试重启功能。

这是我的 ItemWriter：

```
@Component("transactionItemWriter")
public class TransactionInteracItemWriter implements   ItemStreamWriter<TransactionConciliationInterac> {
    private static final Logger log = Logger.getLogger(TransactionInteracItemWriter.class);
    @Autowired
    private ConciliationContext conciliationContext;
    @Autowired
    private ServiceTransactionConciliationInterac paiementService;
    private int transactionCount;

    /**
     * @see ItemWriter#write(java.util.List)
     */
    public void write(List<? extends TransactionConciliationInterac> data) throws Exception {

    int index = ++transactionCount - 1;

    while (index < data.size()) {
        TransactionConciliationInterac trx = data.get(index);
        paiementService.insertAndReturnKey(trx,conciliationContext.getIdSommaire().toString());
    index = ++transactionCount - 1;
    }
} 
```

paiementService 是一个 Spring bean，它使用 JDBCTemplate 在数据库中插入数据。

我的配置：

```
 <batch:step id="traitementXmlIemtTransactionStep">
        <batch:tasklet transaction-manager="transactionManager" start-limit="10">
            <batch:chunk reader="IemtXmlTransactionReader" processor="IemtXmlTransactionConvertProcessor" writer="transactionItemWriter" commit-interval="5"/>
            <batch:transaction-attributes isolation="DEFAULT" propagation="REQUIRED"/>
            <batch:listeners>
                <batch:listener ref="transactionStepListener" />
            </batch:listeners>

        </batch:tasklet>
    </batch:step> 
```

现在，当我运行它时，我看到我得到一个异常（DataIntegrityEx）：

```
<Rollback for RuntimeException: org.springframework.dao.DataIntegrityViolationException:   PreparedStatementCallback; SQL []; Data truncation: Data too long for column  'TRANSACTIONTYPE' at row 1; nested exception is com.mysql.jdbc.MysqlDataTruncation: Data  truncation: Data too long for column 'TRANSACTIONTYPE' at row 1>
2012-12-11 09:50:28,949 DEBUG [org.springframework.batch.repeat.support.RepeatTemplate]  - <Handling exception: org.springframework.dao.DataIntegrityViolationException, caused by:  org.springframework.dao.DataIntegrityViolationException: PreparedStatementCallback; SQL [];  Data truncation: Data too long for column 'TRANSACTIONTYPE' at row 1; nested exception is  com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'TRANSACTIONTYPE' at row 1>
2012-12-11 09:50:28,949 DEBUG [org.springframework.batch.repeat.support.RepeatTemplate] - <Handling fatal exception explicitly (rethrowing first of 1): org.springframework.dao.DataIntegrityViolationException: PreparedStatementCallback; SQL []; Data truncation: Data too long for column 'TRANSACTIONTYPE' at row 1; nested exception is com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'TRANSACTIONTYPE' at row 1>
2012-12-11 09:50:28,950 ERROR [org.springframework.batch.core.step.AbstractStep] -    <Encountered an error executing the step>
org.springframework.dao.DataIntegrityViolationException: PreparedStatementCallback; SQL []; Data truncation: Data too long for column 'TRANSACTIONTYPE' at row 1; nested exception is com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'TRANSACTIONTYPE' at row 1
at     org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:101) 
```

步骤状态如下所示：

```
<Step execution complete: StepExecution: id=3, version=2, name=traitementXmlIemtTransactionStep, status=FAILED, exitStatus=FAILED, readCount=5, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=0, rollbackCount=1> 
```

这看起来不错，我可以看到我已经读取了 5 个元素，写入了 0 个元素并发生了 1 个回滚。

但是当我查看数据库时，我可以看到前 4 个元素已提交！！！！

我需要帮助来找出我做错了什么！

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:37:05.333

终于找到我的问题了！！！我使用的是 MySql，默认情况下，它使用不支持事务的 MyIsam 引擎。

将其更改为 innoDB，现在一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:11:48.693

我的猜测是它`ServiceTransactionConciliationInterac`有自己的事务处理，例如每个调用`paiementService.insertAndReturnKey()`都被事务包围。Spring Batch 将无法回滚那些内部事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-03T09:02:23.927

将其更改为 innoDB，现在一切正常。

`spring.jpa.database-platform: org.hibernate.dialect.MySQL5InnoDBDialect`

# ruby-on-rails - rails 1 db 列中的多个复选框。正确保存但未显示为已选中

> ID：13823655
> 
> 赞同：1
> 
> 时间：2012-12-11T15:57:35.790
> 
> 标签：ruby-on-rails, forms, checkbox, simple-form

事件将部分 id 保存在一个数组中。但是在`/events/1/edit`新创建的事件的视图中，未选中预期的复选框。我猜是因为复选框值的默认值是布尔值。

`Event.last.newsletters #=> ["108", "115", "116", "117", "118", ""]`

我有一个事件的 CRUD。每个事件可以属于多个部分。我将其显示为带有 simpleform gem 的复选框集合。

```
<%= simple_form_for @event do |f| %>
...
<%= f.collection_check_boxes :newsletters, Section.all, :id, :name, :input_html => { :class => 'checkbox' } %> 
```

这将产生以下 html：

```
<span><input id="event_newsletters_1" name="event[newsletters][]" type="checkbox" value="1" /><label class="collection_check_boxes" for="event_newsletters_1">Newsletter 1</label></span>
<span><input id="event_newsletters_2" name="event[newsletters][]" type="checkbox" value="2" /><label class="collection_check_boxes" for="event_newsletters_2">Newsletter 2</label></span>
etc. etc. 
```

当我创建新事件或编辑事件时，时事通讯值会正确保存在模型中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:49:49.223

尝试指定参数`:checked`：

```
<%= f.collection_check_boxes :newsletters,
                             Section.all,
                             :id,
                             :name,
                             :input_html => { :class => 'checkbox' },
                             :checked => @event.newsletters %> 
```

参考：[如何使用 simple_form 预选关联复选框](https://stackoverflow.com/questions/5500923/how-to-preselect-an-association-checkbox-using-simple-form?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T18:05:57.150

如果您使用的是 SimpleForm，则可以使用：

```
<%= f.input :newsletters, collection: Section.all, as: :check_boxes %> 
```

# c++ - 如何将char转换为c++中的位数组？

> ID：13823656
> 
> 赞同：0
> 
> 时间：2012-12-11T15:57:51.250
> 
> 标签：c++

我需要将字符串的每个字符作为一个位序列放在一个数组中，或者只是在循环中遍历它，无论哪种方式都有效。这是我过去在 ASM 中所做的事情，但不确定如何在 C++ 中完成。

编辑：我正在尝试用 asm 复制我曾经做过的事情，读取内存中的文件并一点一点地遍历它，操纵每一位，进行更多的密码化并将其保存回来。

基本上是一个简单的加密。它不是作业，也不是项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:02:47.563

您可以使用位运算符对其进行迭代：

```
unsigned char c = 'a'
for(int i = 0; i < 8; i++)
{
  std::cout << (c >> i) & 1 << std::endl;
} 
```

这将`c`向右移动`i`位置，并使用按位与来获取最低有效位的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T16:01:38.217

标准库为此提供了一个类，[`std::bitset`](http://www.cplusplus.com/reference/bitset/bitset/). 这可能是你需要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:07:29.257

您可以遍历字符并使用位掩码检查位

```
char c;
for (int i = 0; i < 8; ++i) {
    bool is_set = c & (1 << i);
    std::out << "Bit " << i << ": " << is_set << '\n';
} 
```

或字符串

```
std::string s;
for (auto p = s.begin(); p != s.end(); ++p) {
    char c = *p;
    // loop over the bits
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T16:01:01.737

您将希望使用位掩码和按位运算符`&`,`|`和`>>`/或可能`<<`. 我猜你会想要将它们存储在一个 bool 类型的数组中，比如`bool bitArray[256];`

当然，仅`unsigned char`用于存储一堆位是标准做法。

# javascript - 文本字段 onblur 事件

> ID：13823658
> 
> 赞同：0
> 
> 时间：2012-12-11T15:57:53.153
> 
> 标签：javascript, jquery, html, textfield, onblur

我有这个文本字段

```
<?php if($row_questionset['Constructor']=="TextField"){?>

    <?php while ($row_Answer=mysql_fetch_array($AnswersValue)){ ?> 

    <fieldset class="field" >   
        <?php $question=$row_questionset['QuestionIDFKPK'];?>
            <span class="symbol">
                <?php echo $row_questionset['QuestionValue']; ?>
                <input class="validate[required] text-input" type="text" name="sampletextanswer<?= $row_Answer['QuestionIDFK'];?>[]" id=" < ?php echo $question ?> "  value="<?= $answerSelect=$row_Answer['AnswerIDPK'] ; ?>"  onblur="textfieldfocus()" <?php if ($row_Answer['UserAnswer']!='') {echo "checked=checked";} ?> >
            </span>
    </fieldset>

    <?php }  ?>

<?php } ?> 
```

我尝试使用这些脚本将用户每次单击时在 texfield 上介绍的信息保存在表格中，但不起作用。我该怎么办？

```
<script>    
function textfieldfocus(){  

  var node_list = document.getElementsByTagName('input');

  for (var i = 0; i < node_list.length; i++) {
    var node = node_list[i];

    if (node.getAttribute('type') == 'text'){       
      UpdateItem('<?php echo $US_ID ?>;' + this.id + ';' + this.value);                                           
    }

  }

};
</script> 
```

# php - 文件中的字符串不起作用

> ID：13823660
> 
> 赞同：0
> 
> 时间：2012-12-11T15:57:57.387
> 
> 标签：php, string, preg-match, fread

我在处理从文件转换的字符串时遇到问题，结果与直接输入该字符串的行为相同：

这是我的 test.html 文件：

```
<html>

<font class="editable">
This is editable section 1
</font>
<br><br><hr><br>
<font class="editable">
This is editable section 2
</font>

</html> 
```

这是我的 php 文件：

```
<?php

//RETURN ARRAY OF RESULTS FOUND BETWEEN START & END IN STRING
function returnStartEnd($string,$start,$end){ 
     preg_match_all('/' . preg_quote($start, '/') . '(.*?)'. preg_quote($end, '/').'/i', $string, $m); 
     $out = array(); 

     foreach($m[1] as $key => $value){ 
       $type = explode('::',$value); 
       if(sizeof($type)>1){ 
          if(!is_array($out[$type[0]])) 
             $out[$type[0]] = array(); 
          $out[$type[0]][] = $type[1]; 
       } else { 
          $out[] = $value; 
       } 
     } 
  return $out; 
};

// RETURN FILE CONTENTS AS A STRING
function readFileToVar($file){
  $fh = fopen($file,'r') or die($php_errormsg);
  $html = fread($fh,filesize($file));
  return $html;
  fclose($fh) or die($php_errormsg);
};

$file = 'test.html';
$html = readFileToVar($file);
// OR
//$html = '<html> <font class="editable"> This is editable section 1 </font><br><br><hr><br><font class="editable"> This is editable section 2 </font> </html>';
$go = 'editable">';
$stop = '<';

$arrayOfEditables = returnStartEnd($html,$go,$stop);
echo "<br>Result:<br>";
var_dump($arrayOfEditables);

?> 
```

注意注释掉的 $html。它与 test.html 文件中应该（？）返回的内容相同。当尝试运行函数 returnStartEnd() 时，它在注释掉的字符串上按预期工作，但对从文件创建的字符串不起作用，返回一个空数组。

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:12:13.377

我认为您可以简单地[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)用于将文件作为字符串读取到变量中。
所以：

```
$html = file_get_contents($file); 
```

此外，使用绝对路径 (like ) 或以(like )`dirname(__FILE__)."/file.ext"`为前缀的相对路径总是一个好主意。所以你可以尝试改变`./``"./file.ext"`

```
$file = 'test.html'; 
```

进入

```
$file = './test.html'; 
```

甚至

```
$file = dirname(__FILE__).'/test.html' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:29:14.753

### 问题：

对我来说，它看起来好像正则表达式在多行时遇到了问题。这似乎是您传入的字符串（绕过`file_get_contents()`）与加载文件的内容之间的差异。

### 解决方案：

更改正则表达式的值以允许多行：

```
$expression = '/' . preg_quote($start, '/') . '([\w\s.]*?)'. preg_quote($end, '/') . '/im'; 
```

此正则表达式查找开始，并将该和结束之间的所有值放入字符类中。然后，最后，我添加了`m`修饰符，将其置于多行模式。

根据我的测试，这两种方式都对我有用：

```
$html = <<<HTML
<html>

<font class="editable">
This is editable section 1
</font>
<br><br><hr><br>
<font class="editable">
This is editable section 2
</font>

</html>
HTML;

$alternate = '<html><font class="editable">This is editable section 1</font><br><br><hr><br><font class="editable">This is editable section 2</font></html>';

var_dump($html);
$expression = '/' . preg_quote('editable">', '/') . '([\w\s.]*?)'. preg_quote('<', '/') . '/im';
var_dump($expression);

preg_match_all($expression, $html, $m);
var_dump($m);

preg_match_all($expression, $alternate, $m);
var_dump($m); 
```

# wpf - 根据项目对象更改 TreeViewItem 模板

> ID：13823665
> 
> 赞同：0
> 
> 时间：2012-12-11T15:58:05.557
> 
> 标签：wpf, xaml, treeview

我有一个 TreeView 绑定到一种对象的可观察集合，但我想根据该对象中的值而不是主对象类型显示不同的 DataTemplate，因为它们是相同的类型。进一步澄清，我实际上想基于它包含的对象类型。

```
Ok, so, rather than doing this:
<HierarchicalDataTemplate DataType="{x:Type listItem:TreeNodeViewModel}" ItemsSource="{Binding     Children}" 
```

`I actually want to do this:`

```
<HierarchicalDataTemplate DataType.EmbeddedItem="{x:Type listItem:MyEmbededObjectType}"ItemsSource="{Binding Children}" 
```

`I have searched all day and now asking the question.`

您好，感谢您的回答，但我仍然有点不确定在这里做什么。另外，我刚刚发现了如何格式化问题，以便全部显示出来，并且更容易知道我想要做什么。我是 Wpf 的新手，但我是一名长期开发人员，因此我很快就掌握了一些东西，但有些奇怪的事情让我很困惑。如果 ObservableCollection 中的对象是不同的对象，我有一个 TreeView 显示不同的模板，但在这种情况下，问题是在这种情况下，ObservableCollection 中的对象都是相同类型，但这些对象中的每一个都有一个嵌入的对象不同的类型，这就是我试图让 XAML 将其视为检索模板的对象类型。所以，我在 ObservableCollection 中提供的对象是 TreeNodeViewModel。这个类有一个嵌入的对象类型对象，称为Item。它是我用来了解 TreeNode 与什么相关的绑定项。此属性称为 Item ，我想使用此属性来提升模板。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:11:43.163

将这两个对象放入 DataTemplate 中，并使用 IValueConverter 设置可见性。

```
<DataTemplate>
  <StackPanel>
    <Button x:Name="Object1ShowThis" Visibility={StaticResource cMakeValueConverter/>
    <Button x:Name="Object2ShowThis" Visibility={StaticResource cMakeValueConverter2/>
   </StackPanel>
<DataTemplate> 
```

# c# - 如何在打开的 xml 上摆脱我的“后间距”

> ID：13823668
> 
> 赞同：10
> 
> 时间：2012-12-11T15:58:12.410
> 
> 标签：c#, ms-word, openxml

在打开的 XML 中，我的 word 文档默认设置为“之后的间距：10 pt”我将如何将其更改为 0，因此没有间距。

这是我的代码，它几乎可以从数据库中获取信息并将其放置到 Word 文档中以便能够打印出来。但是间距使文档太大。

```
using (WordprocessingDocument wordDoc = WordprocessingDocument.Create(filepath,  WordprocessingDocumentType.Document)) {
    MainDocumentPart mainPart = wordDoc.AddMainDocumentPart();
    mainPart.Document = new Document();
    Body body = mainPart.Document.AppendChild(new Body());

    Paragraph para_main = body.AppendChild(new Paragraph());
    Run run_main = para_main.AppendChild(new Run());

    // Goes through all of the forms
    foreach (var form in forms) {
        Table table = new Table();
        // Initialize all of the table properties
        TableProperties tblProp = new TableProperties(
            new TableBorders(
                new TopBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 },
                new LeftBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 },
                new RightBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 },
                new BottomBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 16 },
                new InsideHorizontalBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 8 },
                new InsideVerticalBorder() { Val = new EnumValue<BorderValues>(BorderValues.BasicBlackSquares), Size = 8 }
            ),
            new SpacingBetweenLines() { Before = "20", After = "20" }
            //new TableCellProperties(
            //    new 
            //new TableJustification() {Val = TableRowAlignmentValues.Center}
        );

        table.AppendChild<TableProperties>(tblProp);

        Paragraph para_header = body.AppendChild(new Paragraph());
        Run run_header = para_header.AppendChild(new Run());
        RunProperties runProps = run_header.AppendChild(new RunProperties(new Bold()));

        string username = form.Username;
        string proces_header = form.HeaderTitle;

        run_header.AppendChild(new Text(proces_header + " | " + username));

        for (int i = 0; i < form.FieldList.Count; i++) {
            if (!(form.FieldList[i].Token == "USR" || form.FieldList[i].Token == "SNT")) {
                TableRow tr = new TableRow();
                TableCell header_cell = new TableCell();
                header_cell.Append(new Paragraph(new Run(new Text(form.FieldList[i].Label))));
                TableCell value_cell = new TableCell();
                value_cell.Append(new Paragraph(new Run(new Text(form.FieldList[i].Value))));
                tr.Append(header_cell, value_cell);
                table.Append(tr);
            }
        }
        wordDoc.MainDocumentPart.Document.Body.Append(table);
    }
    mainPart.Document.Save();
    wordDoc.Close();
    return "Success";
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T13:25:14.740

行距需要附加到段落属性中，当然也需要附加到段落中。

这是很长的路要走。SpacingBetweenLines 还可以设置行高，“规则”控制如何使用前后值。

```
SpacingBetweenLines spacing = new SpacingBetweenLines() { Line = "240", LineRule = LineSpacingRuleValues.Auto, Before = "0", After = "0" };
ParagraphProperties paragraphProperties = new ParagraphProperties();
Paragraph paragraph = new Paragraph();

paragraphProperties.Append(spacing);
paragraph.Append(paragraphProperties); 
```

看起来您正在尝试将行距设置为表格。那不会那样工作（相信我我试过）。表格周围的文本由文本换行和表格的位置控制。

此外，在处理多个表格时，如果您想将它们分开，表格之后需要有一个段落（或表格以外的其他内容），否则我们会将您的表格合并在一起。

如果您需要该空间，请创建一个字体设置为 0.5 或非常小的段落，然后将其添加到每个表格之后。

# c - 如何强制在 C 中读取不会被优化的未使用内存？

> ID：13823669
> 
> 赞同：26
> 
> 时间：2012-12-11T15:58:13.650
> 
> 标签：c, embedded, microcontroller, volatile, cpu-registers

微控制器通常需要读取寄存器以清除某些状态条件。C 中是否有一种可移植的方式来确保在不使用数据的情况下不会优化读取？将指向内存映射寄存器的指针声明为易失性就足够了吗？换句话说，以下内容是否总是适用于标准兼容的编译器？

```
void func(void)
{
   volatile unsigned int *REGISTER = (volatile unsigned int *) 0x12345678;

   *REGISTER;
} 
```

[我知道处理这样的功能会遇到与编译器相关的问题。所以，在这种情况下，我对便携的定义有点松散。我的意思是它会尽可能广泛地与最流行的工具链一起使用。]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T16:21:01.820

人们非常激烈地争论到底是什么`volatile`意思。我认为大多数人都同意您展示的构造*旨在*执行您想要的操作，但是对于 C 标准中的语言*实际上*在 C99 中保证它并没有普遍的共识。（情况可能在 C2011 有所改善；我还没有读到。）

一种非标准的但被嵌入式编译器广泛支持的替代方案可能更有可能工作是

```
void func(void)
{
  asm volatile ("" : : "r" (*(unsigned int *)0x12345678));
} 
```

（这里的“volatile”适用于“asm”，意思是“即使它没有输出操作数，也不能删除它。也不必将它放在指针上。）

这种结构的主要缺点是您仍然无法保证编译器将生成*单指令*内存读取。使用 C2011，使用`_Atomic unsigned int` *可能*就足够了，但是在没有该功能的情况下，如果您需要该保证，您几乎必须自己编写一个真实的（非空）程序集插入。

**编辑：**今天早上我又出现了一个皱纹。如果从内存位置读取具有更改该内存位置值的副作用，则需要

```
void func(void)
{
  unsigned int *ptr = (unsigned int *)0x12345678;
  asm volatile ("" : "=m" (*ptr) : "r" (*ptr));
} 
```

以防止对该位置的其他读取进行错误优化。（要 100% 清楚，此更改不会更改为`func`自身生成的汇编语言，但可能会影响周围代码的优化，尤其`func`是内联代码时。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T15:11:48.320

是的，C 标准保证访问 volatile 变量的代码不会被优化掉。

C11 5.1.2.3/2

> “访问 volatile 对象，” ...“都是副作用”

C11 5.1.2.3/4

> “如果一个实际的实现可以推断出它的值没有被使用并且没有产生任何需要的副作用（包括调用函数或访问易失性对象引起的任何副作用），则它不需要评估表达式的一部分。”

C11 5.1.2.3/6

> “对符合要求的实施的最低要求是：
> 
> — 对 volatile 对象的访问严格按照抽象机的规则进行评估。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:01:51.173

IIRC，C 标准对使用的定义有点松散，因此`*REGISTER`不一定将其解释为执行*read*。

但以下应该做：

```
int x = *REGISTER; 
```

也就是说，内存引用的结果必须在某处使用。然而`x`，它不需要是易变的。

**更新**：为了避免 _unused 变量的警告，您可以使用无操作函数。静态和/或内联函数应该在没有运行时损失的情况下被优化掉：

```
static /*inline*/ void no_op(int x)
{ }

no_op(*REGISTER); 
```

**更新2**：我刚刚想出了一个更好的功能：

```
static unsigned int read(volatile unsigned int *addr)
{
    return *addr;
}

read(REGISTER); 
```

现在，这个函数既可以用于读取和使用，也可以用于读取和丢弃。8-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-05T20:47:49.277

也许 GNU C 特定的扩展不被认为是非常可移植的，但这里有另一种选择。

```
#define read1(x)  \
({ \
  __typeof(x) * _addr = (volatile __typeof(x) *) &(x); \
  *_addr; \
}) 
```

这将转换为以下汇编行（使用 gcc x86 编译并使用 -O2 优化）： `movl SOME_REGISTER(%rip), %eax?`

我从以下位置获得相同的汇编程序：

```
inline read2(volatile uint32_t *addr) 
{ 
   return *addr; 
}` 
```

...正如另一个答案中所建议的，但`read1()`将处理不同的寄存器大小。即使我不确定使用`read2()`8 位或 16 位寄存器是否会成为问题，但至少没有关于参数类型的警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T16:22:17.877

编译器通常不会优化汇编内联（很难正确分析它们）。此外，这似乎是一个合适的解决方案：您希望对寄存器进行更明确的控制，这对于汇编来说是很自然的。

由于您正在编写微控制器，我假设您的代码中已经有一些汇编，所以一些内联汇编不会成为问题。

# java - 从接口访问对单例的引用，可以吗？

> ID：13823672
> 
> 赞同：0
> 
> 时间：2012-12-11T15:58:32.780
> 
> 标签：java, interface, singleton

假设你有一个抛出一些异常`A`的单例。`getInstance()`

进一步假设`A`在整个程序中到处都在使用它，虽然`A.getInstance().doSomethingUseful()`很好，但很多代码都从`Constants`接口继承，我想声明：

`A a = A.getInstance()`在`Constants`，允许每个人都`Constants`可以访问`a`.

但是，正如预期的那样，`Java`抱怨方法抛出异常，因此不能在接口中声明。

**有解决方法吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:00:41.133

我认为这真的不是一个好主意。您试图将该对象的生命周期直接绑定到实现该接口的类的结构中。

如果您必须使用单例，那么最好通过该`getInstance()`方法显式引用它。它相对直观。如果必须，使您的实例化异常运行时。

更好的是接受单例模式被视为[反模式](http://molecularmusings.wordpress.com/2011/11/11/singleton-is-an-anti-pattern/)的前提，并考虑诸如[控制注入之类的](http://en.wikipedia.org/wiki/Inversion_of_control)替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:09:34.113

只需将已检查的异常转换为未检查的异常

```
static A getInstanceA2() throws Error
{
    try
    {   return A.getInstance();   }
    catch(Exception e)
    {   throw new Error(e);   }
}

interface Constants
{
    A a = getInstanceA2();
} 
```

如果`getInstane()`失败，界面`Constants`将被破坏，您的应用程序可能会崩溃。

`A`如果和之间存在循环依赖`Contants`，`A`可能会观察到一些未初始化的静态字段`Constants`

# asp.net - 我可以在 ASP.NET MVC 应用程序中的 Application_AuthenticateRequest 之外设置 HttpContext.Current.User 吗？

> ID：13823675
> 
> 赞同：2
> 
> 时间：2012-12-11T15:58:46.290
> 
> 标签：asp.net, lifecycle

在谷歌搜索之后，我发现（自然）意见各不相同。所以这里是：

`HttpContext.Current.User` *不是*在事件处理程序内部设置`AuthenticateRequest`，而是在其他地方（如`BeginRequest`或任何其他事件处理程序）设置是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T12:32:18.050

为了回答我自己的问题，在 IIS 7.0 下设置`Current.User`其他地方`AuthenticateRequest`会导致各种难以捉摸的错误。这些很难确定，但是 IIS/ASP.NET 支持的各种身份验证方法以及集成与经典管道模式以及 .NET 版本的并置......总而言之，这是一个坏主意。

# android - 在一个 java 文件中链接两个 XML 布局

> ID：13823678
> 
> 赞同：0
> 
> 时间：2012-12-11T15:58:49.237
> 
> 标签：android, xml

我正在创建一个手电筒应用程序...我想在一个 java 文件中链接两个布局...一个布局是当手电筒未点亮时...另一个布局显示一个照明手电筒...我已经研究过了现在，当我按下按钮时，它会切换到其他布局..（发光的）...但是当我单击按钮时不会回到第一个布局...该怎么办？这是代码..

我的 XML1：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/fl"
tools:context=".Flash" >

<Button
    android:id="@+id/ib2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/bu" /> 
```

我的 XML2：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/fl1"
android:orientation="vertical" >

<Button
    android:id="@id/ib2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/bu" /> 
```

我的 Flashlight.java 文件（不包括导入）：

```
 package com.potapptoes.flashlight;
    public class Flash extends Activity implements OnClickListener {
Camera cam = null;
Button ib1;
Parameters para;
PowerManager pm;
WakeLock wl;

@Override
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "whatever");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    wl.acquire();
    initialize();
    ib1.setOnClickListener(this);
}

private void initialize() {
    // TODO Auto-generated method stub
    ib1 = (Button) findViewById(R.id.ib2);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (cam == null) {
        setContentView(R.layout.main2);
        cam = Camera.open();
        para = cam.getParameters();
        para.setFlashMode(Parameters.FLASH_MODE_TORCH);
        cam.setParameters(para);
    } else {
                    setContentView(R.layout.main);
        para.setFlashMode(Parameters.FLASH_MODE_OFF);
        cam.setParameters(para);
        cam.release();
        cam = null;
    }
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    para.setFlashMode(Parameters.FLASH_MODE_OFF);
    cam.setParameters(para);
    cam.release();
    cam = null;
    wl.release();
    finish();
}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:09:08.840

查看[ViewSwitcher](http://developer.android.com/reference/android/widget/ViewSwitcher.html)。

[这](http://inphamousdevelopment.wordpress.com/2010/10/11/using-a-viewswitcher-in-your-android-xml-layouts/)是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:02:40.727

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (cam == null) {
        setContentView(R.layout.main2);
        cam = Camera.open();
        para = cam.getParameters();
        para.setFlashMode(Parameters.FLASH_MODE_TORCH);
        cam.setParameters(para);
    } else {
        setContentView(R.layout.main); // you forgot this line
        para.setFlashMode(Parameters.FLASH_MODE_OFF);
        cam.setParameters(para);
        cam.release();
        cam = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T22:31:54.050

为什么不只是更改按钮单击上的背景图像？

1.  为您的按钮创建**onClickListener**。
2.  创建布尔变量，该变量将在单击按钮时触发手电筒的开启和关闭。
3.  检查手电筒是否已经“触发”后更改背景。

希望我理解你的问题是正确的，你会发现这很有帮助。

# zend-framework - 登录时重定向的最佳方式

> ID：13823681
> 
> 赞同：1
> 
> 时间：2012-12-11T15:59:00.037
> 
> 标签：zend-framework, zend-auth

我正在寻找创建一个 example.com 的索引页面，当用户第一次访问该网站时，该页面会显示一个登录表单。然后登录后，example.com 将显示其内容的主页。在 Zend Framework 中完成此任务的最佳实践是什么？

可不可能是？

```
//example.com
//if auth is false, show a login form

//else...
$auth = Zend_Auth::getInstance();
if($auth->hasIdentity()) $loggedIn = true;

//show "Hello World" 
```

所以基本上就像“如果您已登录，则回显“Hello World”，否则显示登录表单”。我试图限制 if、else 语句的数量，并且想知道这是否是唯一的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:09:17.337

也许尝试渲染不同的视图： http: [//framework.zend.com/manual/1.11/en/zend.controller.action.html#zend.controller.action.viewintegration.render](http://framework.zend.com/manual/1.11/en/zend.controller.action.html#zend.controller.action.viewintegration.render)

我自己没有尝试过，但是：

```
$auth = Zend_Auth::getInstance();
if (!$auth->hasIdentity()) {
    //login.phtml
    $this->render('login');
} else {
    //content.phtml
    $this->render('content');
} 
```

不确定如果没有 if-else 是否有办法做到这一点，它们真的有那么大的问题吗？据我所知，控制器动作应该相当简单，所以不应该有大量的嵌套围绕这段代码，或者动作函数中的圈复杂度？

# php - php pdo mysql fetch 返回一般错误？

> ID：13823683
> 
> 赞同：1
> 
> 时间：2012-12-11T15:59:06.300
> 
> 标签：php, mysql, pdo

尝试执行此操作时：

```
 // make unread notifications
        $db->sqlquery("SELECT `participant_id` FROM `user_conversations_participants` WHERE `conversation_id` = ? AND `participant_id` != ?", array($_POST['conversation_id'], $_SESSION['user_id']));
        while ($participants = $db->fetch())
        {
            $db->sqlquery("UPDATE `user_conversations_participants` SET `unread` = 1 WHERE `participant_id` = ?", array($participants['participant_id']));
        } 
```

我似乎收到了这个错误：

> 警告：PDOStatement::fetch() [pdostatement.fetch]: SQLSTATE[HY000]: 第 68 行 /home/gamingon/public_html/prxa.info/includes/class_mysql.php 中的一般错误

这是我的查询和获取功能：

```
// the main sql query function
public function sqlquery($sql, $objects = array())
{
    global $core;

    try
    {
        $this->STH = $this->database->prepare($sql);

        foreach($objects as $k=>$p)
        {
            // +1 is needed as arrays start at 0 where as ? placeholders start at 1 in PDO
            if(is_numeric($p))
            {
                $this->STH->bindValue($k+1, (int)$p, PDO::PARAM_INT);
            }
            else
            {
                $this->STH->bindValue($k+1, $p, PDO::PARAM_STR);
            }
        }

        $this->counter++;

        return $this->STH->execute();
    }

    catch (Exception $e)
    {
        $core->message($e->getMessage());
    }
}

public function fetch()
{
    $this->STH->setFetchMode(PDO::FETCH_ASSOC); 
    **return $this->STH->fetch();**
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:06:02.203

在循环的第一次迭代期间，您会覆盖实例的`STH`属性。`$db`换句话说：

1.  你做一个 SELECT 查询，`$db->STH`是一个 SELECT 准备好的语句。
2.  您`fetch()`对 SELECT 语句进行调用，该语句有效。
3.  第一次循环迭代：您`$db->STH`使用 UPDATE 准备好的语句覆盖。
4.  就在第二次循环迭代之前：你不能再`fetch()`调用了，因为 SELECT 语句已经消失了，一个 INSERT 语句在它的位置。

重构您的数据库类或创建`$db`' 类的新实例（使用不同的变量名！）以在循环中使用。

# git - 如何通过 Web Designer 在 Rails 项目中使用 git

> ID：13823684
> 
> 赞同：1
> 
> 时间：2012-12-11T15:59:06.380
> 
> 标签：git

我有一个使用 git 检查历史记录的 Rails 项目。我的网页设计师同事帮助我做 html 和 css 并使用 git 检查她的项目。因此有两个 git repos 需要我检查。有时我想自己更改一些小的 css 东西。但我觉得这很糟糕，因为我需要在两个 repos 处将相同的东西提交给 git。

我如何与我的网页设计师同事合作？

文件夹目录如下：

### 导轨：

```
blog/    
  -app/
    -assets/
       -images/
       -javascripts/
       -stylesheets/
    -controllers/
    -..../    
  -config/    
  -...../ 
```

### html:

```
blog/
   -assets/
      -images/
      -javascripts/
      -stylesheets/
   index.html
   about.html 
```

如果我使用将html项目添加到Rails项目的子模块，我需要更改Html项目的目录结构，如何忽略Rails项目中的`index.html`and `about.html`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:22:47.297

只需使用`submodule`：

```
$ git submodule add path/to/remote/ui/repo path/to/local/ui/folder 
```

当您需要修改部分 UI 文件时，只需 cd into 即可`path/to/local/ui/folder`。只需将其视为单独的回购。

# xml - 根据其子元素将元素拆分为两个或多个元素

> ID：13823688
> 
> 赞同：1
> 
> 时间：2012-12-11T15:59:13.067
> 
> 标签：xml, xslt, xslt-2.0

***编辑：对于那些将来会遇到这个问题的人来说，这是一个写得很糟糕的问题。这不是我所追求的。 [这个问题](https://stackoverflow.com/questions/13848239/split-a-node-if-it-has-certain-children)也可能对你有用。***

所以，我`XSLT` 这几天一直在努力复习。我对它非常陌生，过去的大部分时间都`XQuery`用于转换我的 XML。我被困在一个相当简单的问题上，但是环顾四周，我还没有找到明确的解决方案。简单地说，我想根据它的子元素将一些元素分成两部分。

例如，如果我的 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>    
<root>
      <p>
         Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
         tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
         bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
         bacon filet mignon pork chop tail.
         <note.ref id="0001"><super>1</super></note.ref>
         <note id="0001">
           <p>
             You may need to consult a latin butcher. Good Luck.
           </p>
         </note>   
       Pork loin ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket rump ham, tail
      hamburger strip steak pig ham hock short ribs jerky shank beef spare ribs. Capicola short ribs swine   
      beef meatball jowl pork belly. Doner leberkas short ribs, flank chuck pancetta bresaola bacon ham 
      hock pork hamburger fatback.
    </p>
    </root> 
```

在我运行我之后，我`xsl`留下了如下内容：

```
<html>
<body>
   <p>
         Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
         tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
         bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
         bacon filet mignon pork chop tail.
         <span class="noteRef" id="0001"><sup>1</sup></span>
         <div id="note-0001"> 
           <p>
               You may need to consult a latin butcher. Good Luck.
           </p>
         </div>
           Pork loin ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket rump ham, tail
           hamburger strip steak pig ham hock short ribs jerky shank beef spare ribs. Capicola short ribs swine   
           beef meatball jowl pork belly. Doner leberkas short ribs, flank chuck pancetta bresaola bacon ham 
           hock pork hamburger fatback.
   </p>
</body>
</html> 
```

这样做的问题显然是一个`HTML` `<p>`不能有一个`<div>`作为孩子，让一个孤独的另一个`<p>`作为孙子。这只是无效的。浏览器（例如 chromium）可能会在点击 时呈现第一段结尾`<div>`，适当地将注释包装在它自己的`<p>`中，但在注释之后留下文本 orpahened。这样应用到的任何 CSS`<p>`都将无法应用。

**如何`<p>`根据元素后代将一个元素分成两个？**

**期望的输出**

```
 <html>
    <body>
       <p>
             Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
             tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
             bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
             bacon filet mignon pork chop tail.
             <span class="noteRef" id="0001"><sup>1</sup></span><
</p>
             <div id="note-0001"> 
               <p>
                   You may need to consult a latin butcher. Good Luck.
               </p>
             </div>
<p>
               Pork loin ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket rump ham, tail
               hamburger strip steak pig ham hock short ribs jerky shank beef spare ribs. Capicola short ribs swine   
               beef meatball jowl pork belly. Doner leberkas short ribs, flank chuck pancetta bresaola bacon ham 
               hock pork hamburger fatback.
       </p>
    </body>
    </html> 
```

我已经稍微抽象了我的问题，所以`XSL`我尝试过的以下内容可能会略有偏差。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
    exclude-result-prefixes="xs xd" version="2.0">

<xsl:template match="/">

        <html>
          <body>
             <xsl:apply-templates/>
          </body>
        </html>
</xsl:template>

    <xsl:template match="p">
        <p>
            <xsl:apply-templates/>
        </p>
    </xsl:template

    <xsl:template match="note.ref">
        <span class="noteRef" id="{@id}">
            <xsl:apply-templates/>
        </span>
    </xsl:template>

    <xsl:template match="super">
        <sup>
            <xsl:apply-templates/>
        </sup>
    </xsl:template>

    <xsl:template match="note">
          <div id="note-{@id}">
            <xsl:apply-templates/>
        </div>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:01:28.687

这可能太简化了，但是您可以尝试匹配包含 a 的 a`text()`并将其包装（以及任何跟随的）...`p``note``note.ref``text()`

**XML 输入**

```
<root>
    <p>
        Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs doner tri-tip 
        tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick short loin pastrami t-
        bone. Sirloin turducken short ribs t-bone andouille strip steak pork loin corned beef hamburger 
        bacon filet mignon pork chop tail.
        <note.ref id="0001"><super>1</super></note.ref>
        <note id="0001">
            <p>
                You may need to consult a latin butcher. Good Luck.
            </p>
        </note>   
        Pork loin ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket rump ham, tail
        hamburger strip steak pig ham hock short ribs jerky shank beef spare ribs. Capicola short ribs swine   
        beef meatball jowl pork belly. Doner leberkas short ribs, flank chuck pancetta bresaola bacon ham 
        hock pork hamburger fatback.
    </p>
</root> 
```

**XSLT 2.0**（也可以作为 1.0 工作）

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|*|processing-instruction()|comment()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/root">        
        <html>
            <body>
                <xsl:apply-templates/>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="p[note]">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="p[note]/text()">
        <p>
            <xsl:value-of select="normalize-space(.)"/>
            <xsl:apply-templates select="following-sibling::note.ref" mode="keep"/>
        </p>
    </xsl:template> 

    <xsl:template match="note">
        <div id="note-{@id}">
            <xsl:apply-templates/>
        </div>
    </xsl:template>

    <xsl:template match="note.ref"/>
    <xsl:template match="note.ref" mode="keep">
        <span class="noteRef" id="{@id}">
            <xsl:apply-templates/>
        </span>
    </xsl:template>

    <xsl:template match="super">
        <sup>
            <xsl:apply-templates/>
        </sup>
    </xsl:template>

    <xsl:template match="text()">
        <xsl:value-of select="normalize-space(.)"/>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<html>
   <body>
      <p>Bacon ipsum dolor sit amet bacon chuck pastrami swine pork rump, shoulder beef ribs
         doner tri-tip tongue. Tri-tip ground round short ribs capicola meatloaf shank drumstick
         short loin pastrami t- bone. Sirloin turducken short ribs t-bone andouille strip steak
         pork loin corned beef hamburger bacon filet mignon pork chop tail.<span class="noteRef" id="0001"><sup>1</sup></span></p>
      <div id="note-0001">
         <p>You may need to consult a latin butcher. Good Luck.</p>
      </div>
      <p>Pork loin ribeye bacon pastrami drumstick sirloin, shoulder pig jowl. Salami brisket
         rump ham, tail hamburger strip steak pig ham hock short ribs jerky shank beef spare
         ribs. Capicola short ribs swine beef meatball jowl pork belly. Doner leberkas short
         ribs, flank chuck pancetta bresaola bacon ham hock pork hamburger fatback.
      </p>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:41:55.113

假设我认为使用 XSLT 2.0 处理器`for-each-group`会有所帮助：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0">

<xsl:output method="html" indent="yes" version="5.0"/>

<xsl:template match="/">
  <html>
    <body>
      <xsl:apply-templates/>
    </body>
  </html>
</xsl:template>

<xsl:template match="p[not((.//p, .//div))]">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="p[.//p, .//div]">
  <xsl:for-each-group select="node()" group-adjacent="boolean((self::text(), self::note.ref))">
    <xsl:choose>
      <xsl:when test="current-grouping-key()">
        <p>
          <xsl:apply-templates select="current()/@*, current-group()"/>
        </p>
      </xsl:when>
      <xsl:otherwise>
        <xsl:apply-templates select="current-group()"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:template>

<xsl:template match="note.ref">
    <span class="noteRef" id="{@id}">
        <xsl:apply-templates/>
    </span>
</xsl:template>

<xsl:template match="super">
    <sup>
        <xsl:apply-templates/>
    </sup>
</xsl:template>

<xsl:template match="note">
      <div id="note-{@id}">
        <xsl:apply-templates/>
    </div>
</xsl:template>

</xsl:stylesheet> 
```

可能需要扩展模式`p[not((.//p, .//div))]`和表达式以覆盖您在输入中期望`p[.//p, .//div]`的其他类型的节点并且需要相同的处理。`group-adjacent``boolean((self::text(), self::note.ref))`

# c# - 从字符串中查找关键字并在字符串列表中查找

> ID：13823689
> 
> 赞同：1
> 
> 时间：2012-12-11T15:59:13.130
> 
> 标签：c#, regex, vb.net

我有一个`list`包含 4 个项目的字符串：

`Orange` `Lemon` `Pepper` `Tomato`

另外，我有`String str`一个句子：

`Today, I ate a tomato and an orange.`

1）我怎样才能检查`str`有一些关键字来自`list`？不考虑大小写字母，基本上捕获任何匹配的东西？

我试过了，但它不起作用，因为它会寻找相同的单词。`list.Contains(str)`

也`Dim result As String() = list.FindAll(str, Function(s) s.ToLower().Contains(str))`，但也没有工作。

2）如果单词`tomato`在`tomatoes`中`str`，我怎样才能检测到该`tomato`部分并丢弃该`es`部分？

有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:07:03.157

```
var list = new string[] { "Orange", "Lemon", "Pepper", "Tomato" };
var str = "Today, I ate a tomato and an orange."; 
```

使用 LINQ 和正则表达式，您可以检查字符串是否包含任何关键字：

```
list.Any(keyword => Regex.IsMatch(str, Regex.Escape(keyword), RegexOptions.IgnoreCase)); 
```

或者获取匹配的关键字：

```
var matched = list.Where(keyword =>
                Regex.IsMatch(str, Regex.Escape(keyword), RegexOptions.IgnoreCase));
// "Orange", "Tomato" 
```

顺便说一句，这将匹配`tomatoes`和`footomato`。如果您需要匹配单词的开头，则应稍微更改搜索模式：`@"(^|\s)" + keyword`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:08:46.283

如果区分大小写不是问题，您可以这样做：

```
List<string> test = new List<string>();
test.Add("Lemon");
test.Add("Orange");
test.Add("Pepper");
test.Add("Tomato");

string str = "Today, I ate a tomato and an orange.";

foreach (string s in test)
{
      // Or use StringComparison.OrdinalIgnoreCase when cultures are of no issue.
      if (str.IndexOf(s, StringComparison.CurrentCultureIgnoreCase) > -1)
      {
          Console.WriteLine("Sentence contains word: " + s);
      }
}

Console.Read(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:11:59.500

```
Regex reg = new Regex("(Orange|lemon|pepper|Tomato)", RegexOptions.IgnoreCase | RegexOptions.Singleline);
MatchCollection mc = reg.Matches("Today, I ate tomatoes and an orange.");
foreach (Match mt in mc)
{
    Debug.WriteLine(mt.Groups[0].Value);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T16:11:19.667

```
Private Function stringContainsOneOfMany(ByVal haystack As String, ByVal needles As String()) As Boolean
    For Each needle In needles
        If haystack.ToLower.Contains(needle.ToLower) Then
            Return True
        End If
    Next
    Return False
End Function 
```

使用：

```
 Dim keywords As New List(Of String) From {
        "Orange", "Lemon", "Pepper", "Tomato"}
    Dim str As String = "Today, I ate a tomato and an orange"
    If stringContainsOneOfMany(str, keywords.ToArray) Then
        'do something
    End If 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T16:11:52.303

```
 Dim str As String = "Today, I ate a tomato and an orange"
    Dim sWords As String = "Orange Lemon Pepper Tomato"
    Dim sWordArray() As String = sWords.Split(" ")

    For Each sWord In sWordArray

        If str.ToLower.Contains(sWord.ToLower) Then
            Console.WriteLine(sWord)
        End If

    Next sWord 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-11T16:06:41.457

使用`list.Contains(str)`，您正在检查它是否`list`包含整个字符串。你需要做的是检查是否`str`有单词`list`是这样的：

```
foreach(var s in list)
{
     if(str.ToLower().Contains(s.ToLower()))
     {
          //do your code here
     }
} 
```

这将遍历您的列表，并检查您的列表`str`是否在其中。它还将解决您的问题 2。由于`tomato`是 的一部分`tomatoes`，它将通过该检查。该`ToLower()`部分使所有内容都小写，通常在您想忽略大小写时使用。

# twitter - Twitter bootstrap - 右上角的响应式下拉菜单

> ID：13823690
> 
> 赞同：-1
> 
> 时间：2012-12-11T15:59:14.133
> 
> 标签：twitter, drop-down-menu, twitter-bootstrap, responsive-design

我有一个 codeigniter 应用程序我正在使用 bootstrap 进行模板化
我有一个主导航栏

```
<div class="navbar navbar-inverse navbar-fixed-top">..........</div> 
```

并希望为位于右上角的链接放置一个响应式下拉菜单

![在此处输入图像描述](../Images/b89179de549eea8a1742c11ae3f55ba1.png)

我的主要问题是下拉菜单有效，但是当下拉菜单显示并且不可见（全宽）时它会生成滚动。

**我使用了按钮下拉菜单......还有其他想法/建议吗？谢谢！**

[http://twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:38:41.273

看起来您只是使用了错误的组件。你应该使用的是：

[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

这将允许您将下拉菜单构建到导航中，而不是在其中粘贴一个按钮。当您的浏览器使用这种方法比某个宽度窄时，您的菜单会向下滑动到层次结构中。

Dropdown 3 为您提供 HTML 以使其正确浮动，就像您在屏幕截图中一样：

```
<ul class="nav pull-right">
  <li id="fat-menu" class="dropdown">
    <a href="#" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown">Dropdown 3 <b class="caret"></b></a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
    <li><a tabindex="-1" href="#">Action</a></li>
    <li><a tabindex="-1" href="#">Another action</a></li>
    <li><a tabindex="-1" href="#">Something else here</a></li>
    <li class="divider"></li>
    <li><a tabindex="-1" href="#">Separated link</a></li>
    </ul>
  </li>
</ul> 
```

# ruby-on-rails-3 - Omniauth-Twitter/Devise 错误：“无法从 Twitter 对您进行身份验证，因为“凭据无效””

> ID：13823694
> 
> 赞同：2
> 
> 时间：2012-12-11T15:59:20.287
> 
> 标签：ruby-on-rails-3, twitter, devise, omniauth

我正在使用带有设计的omniauth-twitter gem，并按照[railscast](http://railscasts.com/episodes/235-devise-and-omniauth-revised)了解如何实现它。

一切似乎都正常 - 我可以点击带有 twitter 链接的 sign_up，它会将我重定向到 twitter，我点击“登录”，然后它会将我重定向回来但错误消息“无法从 Twitter 验证你，因为”无效证书”。

我完全不知所措，显而易见的解决方案，比如混淆了我的消费者和我检查过的密钥的位置，它们都很好。

我尝试阅读关于omniauth-devise的几种不同的SO变体，但没有一个有帮助。

以下是相关代码：

```
 devise_scope :user do
    get 'sign_up', to: 'members#new', controllers: {registrations: "members"}
    get 'partners/sign_up', to: 'content_partners#new', controllers: {registrations: "content_partners"}
  end
  devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks"} 
```

从 config/initializers/device 文件：

```
 require "omniauth-twitter"
   config.omniauth :twitter, 'CONSUMER_KEY', 'CONSUMER_SECRET' 
```

我的宝石文件：

```
gem "omniauth", "~> 1.1.1"
gem "omniauth-twitter", "~> 0.0.14" 
```

我的控制器：

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def all
    user = User.from_omniauth(request.env["omniauth.auth"])
    if user.persisted?
      flash.notice = "Signed in!"
      sign_in_and_redirect user
    else
      session["devise.user_attributes"] = user.attributes
      redirect_to sign_up_path
    end
  end
  alias_method :twitter, :all
end 
```

我的用户模型：

```
 def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_create do |user|
      user.provider = auth.provider
      user.uid = auth.uid
    end
  end

  def self.new_with_session(params, session)
    if session["devise.user_attributes"]
      new(session["devise.user_attributes"], without_protection: true) do |user|
        user.attributes = params
        user.valid?
      end
    else
      super
    end
  end 
```

我的注册视图文件中的链接：

```
<%= link_to "or Sign up with Twitter", user_omniauth_authorize_path(:twitter) %> 
```

最后，这是我从记录器中得到的：

```
Started GET "/users/auth/twitter" for 127.0.0.1 at 2012-12-11 15:54:01 +0000
(twitter) Callback phase initiated.

Started GET "/users/auth/twitter/callback?oauth_token=****blanked****&oauth_verifier=****blanked****" for 127.0.0.1 at 2012-12-11 15:54:03 +0000
Processing by OmniauthCallbacksController#twitter as HTML
  Parameters: {"oauth_token"=>"****blanked****", "oauth_verifier"=>"****blanked****"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."provider" = 'twitter' AND "users"."uid" = '803184474' LIMIT 1
   (0.1ms)  BEGIN
  User Exists (0.4ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT 1
   (0.2ms)  ROLLBACK
Redirected to http://localhost:3000/sign_up
Completed 302 Found in 8ms (ActiveRecord: 1.3ms) 
```

谁能帮我解决这个问题？！

# f# - 如何用英语阅读函数类型

> ID：13823697
> 
> 赞同：3
> 
> 时间：2012-12-11T15:59:24.830
> 
> 标签：f#

```
let compose f g = fun x -> f (g x)
let mal2 x = 2 * x
let plus1 x = x + 1
let mal2Plus1 = compose plus1 mal2

val compose : ('b -> 'c) -> ('a -> 'b) -> ('a -> 'c) 
```

谁能教我如何阅读撰写的功能类型

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T16:04:23.500

有多种方法可以读取函数类型，具体取决于您如何使用它。但是，如果您以示例 ( `compose plus1 mal2`) 中演示的方式使用它，那么以下阅读是有意义的：

`compose`是一个函数：

*   接受一个参数，该参数`'b -> 'c`本身就是一个知道如何将类型值`'b`转换为不同类型值的函数`'c`

*   接受另一个参数`'a -> 'b`，它（再次）是一个可以将值`'a`转换为 type 值的函数`'b`。

给定这两个函数，可以按顺序运行它们——如果你有一个值`'a`，你可以应用第二个函数来获取一个类型的值，`'b`这个值可以传递给第一个函数来获取`'c`。这正是`compose`这样做的：

*   结果是一个组合函数，它接受`'a`并产生`'c`（只能通过将第二个函数`'a`应用于结果然后将第一个函数应用于结果来完成）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:22:52.243

Tomas 的回答是绝对正确的，但它不包括*currying*。

为了更好地理解什么是柯里化函数，看看`compose`函数，然后暂时忘记它的参数是函数。

让我们称它们为`'x`, `'y`, 和`'z`以避免与原始代码中的`'a`,`'b`和混淆：`'c`

```
val compose: 'x -> 'y -> 'z 
```

在命令式世界中，您将看到如下内容：

```
z compose(x theX, y theY); 
```

它是一个有**两个**参数`x`和的函数`y`，它返回一个 的值`z`。

在功能世界中，`val compose: 'x -> 'y -> 'z`可以以两种本质上不同的方式来考虑：

1.  一个有**两个**参数`'x`和的函数`'y`，返回`'z`
2.  一个有**一个**参数的函数`'x`，返回一个*函数*，该函数又将接受**一个**参数`'y`并返回`'z`。

这个过程称为*部分应用*。

回到原来`val compose : ('b -> 'c) -> ('a -> 'b) -> ('a -> 'c)`的 ，可以通过两种方式阅读：

1.  正如 Tomas 所描述的那样：一个函数
    *   接受**两个**参数,`('b -> 'c)`和 `('a -> 'b)`, 相应地;
    *   返回类型的函数`('a -> 'c)`
2.  或者，或者，一个函数
    *   接受**一个**论点`('b -> 'c)`
    *   返回一个函数
        *   接受**一个**论点`('a -> 'b)`
        *   返回类型的函数`('a -> 'c)`

# entity-framework - Linq to Entities 中的多个 OR Where 子句

> ID：13823703
> 
> 赞同：0
> 
> 时间：2012-12-11T15:59:30.230
> 
> 标签：entity-framework, linq-to-entities

有没有办法在 Linq to Entities 查询中使用多个 OR where 子句？

假设我在数据库中有一个表

`TABLE Key1 INT, Key2 INT, ...`

在代码中我有一个

```
List<KeyValuePair<int, int>> 
```

我想从表中获取与列表中的项目匹配的所有值。有什么办法我可以做到这一点。
包含不起作用，因为它似乎不适用于非原始类型。

有任何想法吗？

谢谢，埃里克

# vim - vim：打开 4 个水平和垂直拆分的文件

> ID：13823705
> 
> 赞同：15
> 
> 时间：2012-12-11T15:59:37.780
> 
> 标签：vim, viewport

在命令行中，vim可以打开4个横向分割的文件，

```
vim -o file1 file2 file3 file4 
```

或 4 个文件垂直拆分，

```
vim -O file1 file2 file3 file4 
```

如何打开 4 个文件，使其水平和垂直拆分，像这样？：

```
-----------
|    |    |
| 1  |  2 |
|    |    |
-----------
|    |    |
| 3  |  4 |
|    |    |
----------- 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:09:33.490

不那么优雅`-o`or `-O`：

```
vim file4 -c 'split file2' -c 'vsplit file1' -c 'wincmd j' -c 'vsplit file3' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T16:18:03.823

这是我能想到的最短的：

```
vim -O 1 2 -c 'sp 3' -c 'winc l"' -c 'sp 4' 
```

或者更明确地说，正如 Marcel 在评论中指出的那样：

```
vim -O file1 file2 -c 'split file3' -c 'wincmd l"' -c 'split file4' 
```

# bash - 在bash中将多行输出捕获为数组

> ID：13823706
> 
> 赞同：86
> 
> 时间：2012-12-11T15:59:52.157
> 
> 标签：bash

如果`inner.sh`是

```
#...
echo first
echo second
echo third 
```

并且`outer.sh`是

```
var=`./inner.sh`
# only wants to use "first"... 
```

如何`var`用空格分割？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-12-11T16:21:34.463

试试这个：

```
var=($(./inner.sh))

# And then test the array with:

echo ${var[0]}
echo ${var[1]}
echo ${var[2]} 
```

**输出：**

```
first
second
third 
```

**解释：**

*   例如，您可以通过执行在 bash 中创建一个数组`var=(first second third)`。
*   `$(./inner.sh)`运行脚本，该脚本在单独的行上`inner.sh`打印出`first`、`second`和。`third`由于我们没有在 周围加上双引号`$(...)`，因此它们会集中在同一行，但用空格分隔，因此您最终会得到上一个要点中的样子。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-12-11T17:40:24.990

不要忘记内置的`mapfile`。在您的情况下，这绝对是最有效的：如果您想将整个文件放入一个数组中，其字段将是由`./inner.sh`,输出的行

```
mapfile -t array < <(./inner.sh) 
```

然后你会有第一行`${array[0]}`，等等......

有关此内置和所有可能选项的更多信息：

```
help mapfile 
```

如果您只需要名为 的变量中的第一行`firstline`，请执行

```
read -r firstline < <(./inner.sh) 
```

这些绝对是最有效的方法！

这个小基准将证明这一点：

```
$ time mapfile -t array < <(for i in {0..100000}; do echo "fdjsakfjds$i"; done)

real    0m1.514s
user    0m1.492s
sys 0m0.560s
$ time array=( $(for i in {0..100000}; do echo "fdjsakfjds$i"; done) )

real    0m2.045s
user    0m1.844s
sys 0m0.308s 
```

如果您只想要由 输出的第一行的第一个单词（带空格分隔符）`./inner.sh`，最有效的方法是

```
read firstword _ < <(./inner.sh) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-11T16:22:47.493

您不是在空格上拆分，而是在换行符上拆分。试一试：

```
IFS=$'
'

var=$(./echo.sh)
echo $var | awk '{ print $1 }'
unset IFS 
```

# php - 创建过去一周最受欢迎的帖子列表 - Wordpress

> ID：13823707
> 
> 赞同：2
> 
> 时间：2012-12-11T15:59:53.240
> 
> 标签：php, wordpress, function, widget

我为我的 Wordpress 平台创建了一个小部件，用于显示本周最热门的帖子。但是，它有一个问题。**它计算的是星期一**最流行的帖子，而不是过去 7 天。例如，这意味着在星期二，它将只包括星期二和星期一的帖子。

这是我的小部件代码：

```
<?php class PopularWidget extends WP_Widget
{
    function PopularWidget(){
        $widget_ops = array('description' => 'Displays Popular Posts');
        $control_ops = array('width' => 400, 'height' => 300);
        parent::WP_Widget(false,$name='ET Popular Widget',$widget_ops,$control_ops);
    }

  /* Displays the Widget in the front-end */
    function widget($args, $instance){
        extract($args);
        $title = apply_filters('widget_title', empty($instance['title']) ? 'Popular This Week' : $instance['title']);
        $postsNum = empty($instance['postsNum']) ? '' : $instance['postsNum'];
        $show_thisweek = isset($instance['thisweek']) ? (bool) $instance['thisweek'] : false;

        echo $before_widget;

        if ( $title )
        echo $before_title . $title . $after_title;

?>
<?php
    $additional_query = $show_thisweek ? '&year=' . date('Y') . '&w=' . date('W') : '';

    query_posts( 'post_type=post&posts_per_page='.$postsNum.'&orderby=comment_count&order=DESC' . $additional_query ); ?>
        <div class="widget-aligned">
        <h3 class="box-title">Popular Articles</h3>
        <div class="blog-entry">
            <ol>
    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
            <li><h4 class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4></li>
    <?php endwhile; endif; wp_reset_query(); ?>
            </ol>
        </div>
        </div> <!-- end widget-aligned -->
        <div style="clear:both;"></div>
<?php
        echo $after_widget;
    }

  /*Saves the settings. */
    function update($new_instance, $old_instance){
        $instance = $old_instance;
        $instance['title'] = stripslashes($new_instance['title']);
        $instance['postsNum'] = stripslashes($new_instance['postsNum']);
        $instance['thisweek'] = 0;
        if ( isset($new_instance['thisweek']) ) $instance['thisweek'] = 1;

        return $instance;
    }

  /*Creates the form for the widget in the back-end. */
    function form($instance){
        //Defaults
        $instance = wp_parse_args( (array) $instance, array('title'=>'Popular Posts', 'postsNum'=>'','thisweek'=>false) );

        $title = htmlspecialchars($instance['title']);
        $postsNum = htmlspecialchars($instance['postsNum']);

        # Title
        echo '<p><label for="' . $this->get_field_id('title') . '">' . 'Title:' . '</label><input class="widefat" id="' . $this->get_field_id('title') . '" name="' . $this->get_field_name('title') . '" type="text" value="' . $title . '" /></p>';
        # Number of posts
        echo '<p><label for="' . $this->get_field_id('postsNum') . '">' . 'Number of posts:' . '</label><input class="widefat" id="' . $this->get_field_id('postsNum') . '" name="' . $this->get_field_name('postsNum') . '" type="text" value="' . $postsNum . '" /></p>';  ?>
        <input class="checkbox" type="checkbox" <?php checked($instance['thisweek'], 1) ?> id="<?php echo $this->get_field_id('thisweek'); ?>" name="<?php echo $this->get_field_name('thisweek'); ?>" />
        <label for="<?php echo $this->get_field_id('thisweek'); ?>"><?php esc_html_e('Popular this week','Aggregate'); ?></label>
        <?php
    }

}// end AboutMeWidget class

function PopularWidgetInit() {
  register_widget('PopularWidget');
}

add_action('widgets_init', 'PopularWidgetInit');

?> 
```

如何更改此脚本，以便计算过去 7 天而不是上周一的帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:01:40.170

好的，根据您的请求和 Diego 的链接，这样的东西（未经测试）应该可以工作。

首先，将一个函数添加到您的类中，该函数将过滤由 选择的行`query_posts`：

```
function this_week_filter($where = '') {
    $where .= " AND post_date >= '" . date('Y-m-d', strtotime('-7 days')) . "'";
    return $where;
} 
```

其次，在调用之前添加过滤器（如果需要）`query_posts`：

```
if ($show_thisweek) {
    add_filter('posts_where', array($this, 'this_week_filter'));
} 
```

为了安全起见，请在调用后将其删除`query_posts`（因此它不会影响您运行的任何其他查询）：

```
if ($show_thisweek) {
    remove_filter('posts_where', array($this, 'this_week_filter'));
} 
```

把它们放在一起：

```
<?php class PopularWidget extends WP_Widget
{
    function PopularWidget(){
        $widget_ops = array('description' => 'Displays Popular Posts');
        $control_ops = array('width' => 400, 'height' => 300);
        parent::WP_Widget(false,$name='ET Popular Widget',$widget_ops,$control_ops);
    }

    function this_week_filter($where = '') {
        $where .= " AND post_date >= '" . date('Y-m-d', strtotime('-7 days')) . "'";
        return $where;
    }

  /* Displays the Widget in the front-end */
    function widget($args, $instance){
        extract($args);
        $title = apply_filters('widget_title', empty($instance['title']) ? 'Popular This Week' : $instance['title']);
        $postsNum = empty($instance['postsNum']) ? '' : $instance['postsNum'];
        $show_thisweek = isset($instance['thisweek']) ? (bool) $instance['thisweek'] : false;

        echo $before_widget;

        if ( $title )
        echo $before_title . $title . $after_title;

        if ($show_thisweek) {
            add_filter('posts_where', array($this, 'this_week_filter'));
        }

        query_posts( 'post_type=post&posts_per_page='.$postsNum.'&orderby=comment_count&order=DESC'); ?>
        <div class="widget-aligned">
        <h3 class="box-title">Popular Articles</h3>
        <div class="blog-entry">
            <ol>
            <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
                <li><h4 class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4></li>
            <?php endwhile; endif;

            if ($show_thisweek) {
                remove_filter('posts_where', array($this, 'this_week_filter'));
            }

            wp_reset_query(); ?>
            </ol>
        </div>
        </div> <!-- end widget-aligned -->
        <div style="clear:both;"></div>
<?php
        echo $after_widget;
    } 
```

其余代码不变。

可能可以`remove_filter`提前（直接在 之后）移动呼叫`query_posts`，但我现在无法测试。

# c# - 如何在类库中使用 ASP .NET Webforms 视图引擎？

> ID：13823710
> 
> 赞同：1
> 
> 时间：2012-12-11T15:59:58.493
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-2

所以我已经搜索并找不到任何细节或示例，但我必须使用 .NET 3.5，所以我相信我被 webforms 视图引擎困住了。那么是否有任何关于如何在类库中使用 webfroms 视图引擎来实现模板系统的示例或信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:06:01.093

如果我理解正确，您需要在没有 Web 服务器的情况下托管和执行 ASP.NET 页面。Jim Klopfenstein 在他的[Executing ASPX pages without a web server](http://radio-weblogs.com/0105476/stories/2002/07/12/executingAspxPagesWithoutAWebServer.html) blog post 中很好地描述了这一点。

一般来说，所有工作都是通过以下课程完成的：

*   [HttpRuntime](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.processrequest%28v=vs.90%29.aspx)
*   [HttpWorkerRequest](http://msdn.microsoft.com/en-us/library/system.web.httpworkerrequest%28v=vs.90%29.aspx)
*   [HttpRuntime](http://msdn.microsoft.com/en-us/library/system.web.httpruntime%28v=vs.90%29.aspx)

这是上述帖子的片段（生成的 HTML 将打印到控制台）：

```
void ProcessRequest(String page)
{
    HttpWorkerRequest hwr = new SimpleWorkerRequest(page, null, Console.Out);
    HttpRuntime.ProcessRequest(hwr);
} 
```

# javascript - Chrome console.log 行为

> ID：13823712
> 
> 赞同：3
> 
> 时间：2012-12-11T16:00:00.543
> 
> 标签：javascript, google-chrome, console

> **可能重复：**
> [chrome 上的 console.log jquery 元素看起来很奇怪](https://stackoverflow.com/questions/13329849/console-log-jquery-element-on-chrome-look-strange)

假设简单的 jQuery`console.log( $('form') )`示例。

大约一个月前，Google Chrome 控制台输出的格式为：

```
[
<form class=​"edit" data-subdomain=​"f661a0b98992">​…​&lt;/form>​
] 
```

我可以扩展，看到孩子等。

最近 console.log 输出如下内容：

```
[<form>, context: <form>] 
```

这也是一个可扩展的对象，但它包含对我来说不必要的信息，我找不到“干净”的 HTML 子结构。我想要“旧”格式。现在，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:02:42.840

您正在记录一个 jQuery 对象；除了元素之外，还有很多东西。如果您只想查看元素，请执行以下操作：

```
console.log( $("form").get() ); // .get() returns an array of elements 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:07:54.467

尝试这个：

```
​console.log($('form')[0])​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:02:33.223

您可以使用`.get()`将 jQuery 对象转换为数组。

```
console.log($('form').get()) 
```

或者您可以遍历并记录每个元素：

```
$('form').each(function(){
    console.log(this);
}); 
```

# php - PHP 命名空间和文件夹

> ID：13823713
> 
> 赞同：1
> 
> 时间：2012-12-11T16:00:01.863
> 
> 标签：php, namespaces

如果我在根目录中有一个**System文件夹，其中包含一个****Database**文件夹，其中包含一个包含类的***Database.php文件***

```
class Database{
   static function Connect(){
      echo "connect";
   }
} 
```

我从`index.php`根目录中的一个中调用它。

如何创建一个命名空间来访问`Database::Connect();` 我真正在命名空间中苦苦挣扎的类。

我需要放在`namespace System\Database`我的 Database.php 文件的顶部还是什么？任何不在 php.net 页面上的好例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:14:04.983

命名空间（在 PHP 中）实际上只是防止项目中类之间命名冲突的一种方式。它们以名为“Zend_Controller_Action_Helper”之类的类的形式使用了一段时间（在正式支持之前）。PHP5.3 引入“真正的”命名空间实际上只是意味着我们现在可以通过“使用”命名空间在我们的代码中使用简短易读的名称。

例如。

文件：系统/数据库.php

```
namespace MyProject;

class Database {
// ...
} 
```

文件 public/index.php

```
require_once '../system/database.php';

// here we have to use the fully qualified name of the Database class,
// this is similar to the old unofficial underscore method.
$db = \MyProject\Database::connect(); 
```

文件：public/index2.php

```
require_once '../system/database.php';
use MyProject\Database;

// here we can simply use "Database" because the "use" statement says:
// for this file we are using the "Database" class from the "MyProject" namespace
$db = Database::connect(); 
```

命名空间仅按照约定（和自动加载）与目录相关，它们本身不会改变包含和使用类的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:12:20.310

如果要将数据库类命名为 System\Database，则需要在类声明上方添加：

`namespace System\Database;`

然后，在调用 Connect 方法时：

`\System\Database\Database::Connect();`

您的文件结构仅在自动加载要包含在脚本中的文件时与您的名称空间相关，因此如果您要在脚本中手动包含 Database.php，您可以根据需要设置名称空间。

# wpf - WPF 绑定 - 选中 CheckBox 时禁用 GroupBox

> ID：13823716
> 
> 赞同：1
> 
> 时间：2012-12-11T16:00:05.527
> 
> 标签：wpf, binding, ivalueconverter

我是 WPF 绑定的新手，并在选中 CheckBox“RunOnce”时尝试禁用名为“GrpRecurEndDate”的 GroupBox。我尝试按照下面的帖子进行操作，但没有太多运气使绑定正常工作。任何帮助，将不胜感激。

[WPF 绑定声明性语法：未设置复选框时启用 GroupBox](https://stackoverflow.com/questions/6613182/wpf-binding-declarative-syntax-enable-a-groupbox-when-a-checkbox-is-not-set)

我的复选框如下：

```
<RadioButton Content="Recurring" Height="16" HorizontalAlignment="Left" Margin="26,12,0,0" Name="RecurringArchive" VerticalAlignment="Top" IsChecked="True" Width="124" Checked="RecurringArchive_Checked"/>
<RadioButton Content="Run Once" Height="16" HorizontalAlignment="Left" Margin="156,12,0,0" Name="RunOnce" VerticalAlignment="Top" Grid.Column="1" IsEnabled="True" Width="77" Checked="RunOnce_Checked"/> 
```

我的组框：

```
<GroupBox Header="Recurrence End Date" Height="72" Margin="12,267,12,0" Name="GrpRecurEndDate" VerticalAlignment="Top" IsEnabled="{Binding ElementName=RecurringArchive, Path=IsChecked, Converter={StaticResource DisableGroupBoxConverter}}"></GroupBox> 
```

我的转换器代码：

```
[ValueConversion(typeof(bool), typeof(bool))]
    public class DisableGroupBoxConverter : System.Windows.Data.IValueConverter
    {       
            public object Convert(object value, Type targetType, object parameter,
                System.Globalization.CultureInfo culture)
            {
                if (targetType != typeof(bool))
                    throw new InvalidOperationException("The target must be a boolean");

                return !(bool)value;
            }

            public object ConvertBack(object value, Type targetType, object parameter,
                System.Globalization.CultureInfo culture)
            {
                throw new NotSupportedException();
            }     
        }
    } 
```

# javascript - .appendTo 或 .detach 后 HTML5 视频无法在 iPad 中播放

> ID：13823720
> 
> 赞同：11
> 
> 时间：2012-12-11T16:00:24.187
> 
> 标签：javascript, jquery, html, ipad

`.appendTo`我遇到了一个有趣的问题，即我的视频在或之后无法在 iPad 中播放`.detach`。它显示了一个播放按钮，但是当按下播放按钮时，什么也没有发生。

**jsfiddle** [http://jsfiddle.net/LHTb5/1/](http://jsfiddle.net/LHTb5/1/)

**HTML**

```
<video id="video1">
    <source id="mp4" src="https://s3.amazonaws.com/s3hub-1b3c58271cb3e0dfa49d60cae0ac8b86ade30aed6294bdb5fe682e2bf/HTML5/sintel_trailer-480.mp4" type="video/mp4"/>
</video>

<div id="new"></div> 
```

**Javascript**

```
​$(document).ready(function(){
   $("#video1").appendTo($("#new"));
});​ 
```

* * *

**编辑**

好的，伙计们，对于什么有效，什么无效，有些混乱。让我让它变得非常容易。

[http://jsfiddle.net/LHTb5/2/](http://jsfiddle.net/LHTb5/2/) <--- 有效

[http://jsfiddle.net/ecbUP/](http://jsfiddle.net/ecbUP/) <---- 不起作用

与 html、标签或自动播放没有任何关系。这只是一件让 iPad 无法播放的简单事情。我只是想知道为什么，或者如何做一个`.appendTo`or`.detach`并让它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T08:14:30.697

搬家好像确实有问题`video tag`。重建整个视频标签是一个可行的解决方案（[见小提琴](http://jsfiddle.net/NA5Sd/9/)）

```
$(document).ready(function(){
    var tt = $('<video/>', {
        id: 'video2',
        'autobuffer' : 'autobuffer',
        'controls'   : 'controls',
        'autoplay'   : 'autoplay',
        html         : $('<source />', {
            'src'    : 'http://media.w3.org/2010/05/sintel/trailer.mp4',
            'type'   : 'video/mp4'       
        })
    });
    $("#video1").remove();
    tt.appendTo($('#new'));
});​ 
```

我使用硬编码值来组装新的视频标签，但您可以`.attr()`在视频标签和源上使用以从标签中获取值。

我知道这并不能解决问题`appendTo()`。

完整性：在 iPad2 - iOS4.3.3 / iPod 5 - iOS6.0.1 / iPod 5 - iOS 7 上测试

**编辑**：更新小提琴中的视频链接并在 iOS7 上测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:31:18.357

试试这个：

```
$(document).ready(function(){
    $("#video1").appendTo("#new");
    $('#video1').get(0).play();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:57:14.907

自动播放在 iPad 上不起作用。

[你能在 iPad 上自动播放 HTML5 视频吗？](https://stackoverflow.com/questions/12496144/can-you-autoplay-html5-videos-on-the-ipad)

如果要播放视频，可以这样添加（不带<source>）：

```
<video controls src="https://s3.amazonaws.com/s3hub-1b3c58271cb3e0dfa49d60cae0ac8b86ade30aed6294bdb5fe682e2bf/HTML5/sintel_trailer-480.mp4"></video> 
```

[jsfiddle](http://jsfiddle.net/RHuuU/)

在我的项目中，我这样做：

```
 ...
            initVideoPlayer: function(id) {

                var firstvideo='foo.mp4';
                this.embeddVideoPlayer(firstvideo);
            },

            embeddVideoPlayer: function(videoFile) {
                this.setupVideoPlayer(videoFile);
                this.appendVideoPlayer();
            },

            /** Setup Video-Player with Size 950px x 406px */
            setupVideoPlayer: function(videoFile) {
                this.videotag = document.createElement('video');
                this.videotag.src = videoFile;
                this.videotag.height = "406";
                this.videotag.width = "950";
                this.videotag.seekable = true;
            },

            /** Setup Video-Player to DOM,  */
            appendVideoPlayer: function() {
                var node = document.getElementById('new'); 
                this._removeChildNodes(node);
                node.appendChild(this.videotag);

            },
            _removeChildNodes: function(node) {
                while (node.hasChildNodes()) {
                    node.removeChild(node.lastChild);
                };
            },
            .... 
```

每次我开始播放视频时，我都必须调用 embeddVideoPlayer(videoFile)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:43:58.500

我想你可以在这个链接中找到你的解决方案： [如何将 mp4 电影嵌入到我的 html 中？](https://stackoverflow.com/questions/2299347/how-do-i-embed-a-mp4-movie-into-my-html)

顺便说一句，我在我的 iphone 上尝试了 jsfiddle，它似乎不兼容。根本没有控制。

`controls="controls"`@BenjaminPowers您是否尝试添加`video`标签？

**编辑：**

我想我终于找到了解决方案，您能否确认您使用的是正确的 html5 文档类型，如下所示：

```
<!DOCTYPE html>
<html> 
```

这是来自 W3Schools 的代码：

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4"/>
  <source src="movie.ogg" type="video/ogg"/>
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

我在我的 iPhone 上尝试了下面的链接，它运行良好，视频完整显示，您将使用 IOS 控件：

[http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_video_all](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_video_all)

# node.js - 如何将“二进制”编码字符串解码为原始二进制缓冲区？

> ID：13823722
> 
> 赞同：10
> 
> 时间：2012-12-11T16:00:24.763
> 
> 标签：node.js, encoding, binary, imagemagick, buffer

NodeJS[文档](http://nodejs.org/api/buffer.html#buffer_buffer)强调`binary`字符串编码是非常不鼓励的，因为它会在将来的某个时候被删除。

但是，我正在尝试使用该模块生成图像缩略图，该[`node-imagemagick`](https://github.com/rsms/node-imagemagick)模块只能输出`binary`编码字符串。

我的最终目标是将生成的缩略图作为 BLOB 提交到 SQLite3 数据库（我正在使用[`node-sqlite3`](https://github.com/developmentseed/node-sqlite3)），所以我认为我需要将缩略图作为二进制 Buffer 对象。

如何将`binary`编码输出直接解码`node-imagemagick`为原始二进制缓冲区（不仅仅是包含`binary`编码字符串的缓冲区）？我不热衷于使用`base64`...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T16:14:28.400

```
const buffer = new Buffer(binaryString, "binary"); 
```

经测试：

```
$ node
> var binaryString = "\xff\xfa\xc3\x4e";
> var buffer = new Buffer(binaryString, "binary");
> console.log(buffer);
<Buffer ff fa c3 4e> 
```

**更新**：从 v10.0.0 开始 -`Buffer.from(string[, encoding])`改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T23:25:05.417

我不使用节点的 Buffer 进行编码。

如果这开始失败，您可以尝试`iconv-lite`（[https://www.npmjs.com/package/iconv-lite ）：](https://www.npmjs.com/package/iconv-lite)

```
var encode = require("iconv-lite");
var binaryString = "\xff\xfa\xc3\x4e";
var buffer = encode(binaryString, "binary");
console.log(buffer);
// Prints <Buffer ff fa c3 4e> 
```

**更新** 该`iconv-lite`库现在已切换到 es6 语法。所以下面的代码是行不通的。您必须执行以下操作：

```
import { encode } from "iconv-lite"; 
```

不会更新我的代码，因为这会不断变化。查阅文档： [https ://github.com/ashtuchkin/iconv-lite](https://github.com/ashtuchkin/iconv-lite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-28T02:41:54.373

```
const bin = 'PK\u0003\u0004\n\u0000\u0000\u0000\b\u0000\u0013{yB½g].9\u0001\u0000\u00005\u0004\u0000\u0000\u0013\u0000\u0000\u0000[Content_Types].xml'
const buf = new Buffer.from(bin, 'binary');
console.log(buf)
// <Buffer 50 4b 03 04 0a 00 00 00 08 00 13 7b 79 42 bd 67 5d 2e 39 01 00 00 35 04 00 00 13 00 00 00 5b 43 6f 6e 74 65 6e 74 5f 54 79 70 65 73 5d 2e 78 6d 6c> 
```

# datagrid - 数据网格行边框问题-某些行中缺少边框

> ID：13823723
> 
> 赞同：1
> 
> 时间：2012-12-11T16:00:27.157
> 
> 标签：datagrid

我的 Silverlight 应用程序有一个动态数据网格。我设置了数据网格样式、行样式和单元格样式。加载时的数据网格会隐藏某些行的边框。默认样式下一切看起来都不错。我找不到原因。请帮忙。

请注意：BasicColor 是一些已定义的颜色。

```
 <!--DataGridStyle : Sets the DataGrid Style : Selected Cell Background, Mouse Hover Background, etc-->
    <Style x:Key="DataGridStyle" TargetType="gridcontrol:DataGrid" >
        <Setter Property="RowBackground" Value="{StaticResource BasicColor1}" />
        <Setter Property="AlternatingRowBackground" Value="{StaticResource BasicColor1}" />
        <Setter Property="Background" Value="{StaticResource BasicColor6}"/>
        <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource BasicColor9}"/>
        <Setter Property="VerticalGridLinesBrush" Value="{StaticResource BasicColor4}"/>
    </Style>

<!--DataGridCol : Sets the Style of the Content of the Cell in the Datagrid-->
        <Style x:Key="DataGridCellContentStyle" TargetType="sdk:DataGridCell" >
            <Setter Property="Foreground" Value="{StaticResource BasicColor6}"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontStretch" Value="SemiCondensed"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Height" Value="Auto"/>
        </Style>

   <Style TargetType="gridcontrol:DataGridRow" x:Key="DataGridRowStyle">
            <Setter Property="IsTabStop" Value="False"/> 
            <Setter Property="BorderBrush" Value="Red"/>
            <Setter Property="BorderThickness" Value="2"/>![enter image description here][1]
            <Setter Property="Height" Value="20"/>
   </Style> 
```

# windows - Windows Phone 7.1 中的 OutOfMemoryException

> ID：13823728
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:00:42.603
> 
> 标签：windows, windows-phone-7, windows-phone-7.1, windows-phone-8

我`OutOfMemoryException`在我的 WP7.1 应用程序中得到了一个。这是堆栈跟踪：

> 在 System.String.ReplaceOrdinal(String oldValue, String newValue) 在 System.String.Replace(String oldValue, String newValue) 在 A_Contacts.ContactSync.ProcessDataFirstTime(APhone p) 在 A_Contacts.ContactSync.ContactsOnSearchCompletedFirstTime(IEnumerable`1 t) 在 A_Contacts .ContactSync.Contacts_SearchCompleted2(Object sender, ContactsSearchEventArgs e) at Microsoft.Phone.UserData.Contacts.OnSearchCompleted(Object e) at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo文化，布尔 isBinderDefault，程序集调用者，布尔 verifyAccess，StackCrawlMark 和 stackMark）在 System.Reflection.RuntimeMethodInfo.InternalInvoke（对象 obj，BindingFlags 调用Attr，活页夹绑定器，对象 [] 参数，CultureInfo 文化，StackCrawlMark& stackMark) at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters) at System.Delegate.DynamicInvokeOne(Object[] args) at System.MulticastDelegate.DynamicInvokeImpl(Object[] args) at System.Delegate.DynamicInvoke (Object[] args) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority 优先级) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System.Windows .Hosting.CallbackCookie.Invoke(Object[] args) 在 System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args) 在 System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam & pResult)在 System.MulticastDelegate.DynamicInvokeImpl(Object[] args) 在 System.Delegate.DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation 的 System.Delegate.DynamicInvokeOne(Object[] args) 的 Object[] 参数。 Invoke() 在 System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System.Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在系统。 Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args) at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam & pResult)Object[] 参数）在 System.Delegate.DynamicInvokeOne(Object[] args) 在 System.MulticastDelegate.DynamicInvokeImpl(Object[] args) 在 System.Delegate.DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation。 Invoke() 在 System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System.Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在系统。 Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args) at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam & pResult)DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System。 Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在 System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args) 在 System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams , ScriptParam & pResult)DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System。 Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在 System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args) 在 System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams , ScriptParam & pResult)System.Windows.RuntimeHost.ManagedHost.InvokeDelegate 处的 InternalInvoke（对象 [] 参数）（IntPtr pHandle，Int32 nParamCount，ScriptParam [] pParams，ScriptParam & pResult）System.Windows.RuntimeHost.ManagedHost.InvokeDelegate 处的 InternalInvoke（对象 [] 参数）（IntPtr pHandle，Int32 nParamCount，ScriptParam [] pParams，ScriptParam & pResult）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:19:24.490

谢谢布赖恩，我也做了同样的事情，经过大量研究后，我发现 Code First 数据库表的格式不正确；正如在属性上提到的允许 NULL 但该属性不可为 NULL。

# c# - Form_Closed 是删除事件处理程序的正确位置吗？

> ID：13823731
> 
> 赞同：1
> 
> 时间：2012-12-11T16:00:51.800
> 
> 标签：c#, memory-management, event-handling

我有一个程序集，其中拖放了一个 COM Interop VB 6.0 文本编辑器，并将其用作 .NET 包装控件...然后在一个新的程序集中，它是一个 Windows 窗体，我将程序集拖放到上面并开始使用它，声明它的一个变量并为其分配事件处理程序，例如，如果 Assmbley abvoe 被命名为**MyTextControl，**那么在这个 Windows 窗体中，我有一个**mytxtcntrl**变量和一些事件处理程序，例如

```
mytxtcntrl.TextEditor.ObjectDblClicked += new AxTextEditorLib._DTextEditorEvents_ObjectDblClickedEventHandler(ctlTEEditor_ObjectDblClicked); 
```

所以现在 Sholud 我什至担心用 "-=" 删除这些事件处理程序？还是 GC 会处理它？如果我应该手动操作，那么正确的操作位置是什么？我把它们放在 Form_Closed 部分并运行内存分析器，它没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:53:49.537

仅当事件源对象的寿命超过事件订阅者时，才需要显式取消订阅事件。不这样做将保留对订阅对象的引用，从而防止它们被垃圾收集。

Winforms 是经过精心设计的，以避免发生这种事故。您通常会在表单或用户控件中编写事件处理程序来侦听由子控件触发的事件。这些子控件的生命周期与窗体的生命周期密切相关，它们都在用户关闭窗体的同时被释放。垃圾收集器不会被这件事难住，会同时收集它们。

您的 ActiveX 控件符合这种模式，它将是您的窗体的子控件，因此在窗体消亡的同时消亡。根本不需要显式清理。

在某些极端情况下，这不会像描述的那样工作。一个经典的方法是您自己在自己的代码中删除一个控件，但保持表单处于活动状态。现在您*应该*取消订阅任何事件以允许对该控件进行垃圾收集。最重要的是，您还必须在控件上显式调用 Dispose() 以确保销毁它的本机窗口。不这样做会产生甚至垃圾收集器都无法解决的永久泄漏，控件通过其窗口句柄保持活动状态。

第二种情况是 SystemEvents 类。它的事件是静态的，类对象一直存在，直到您的程序终止。如果您以可能在不终止应用程序的情况下关闭的形式使用它们，则始终必须明确取消订阅其事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:29:13.550

不，你不应该。GC 会处理它。唯一需要担心“丢弃”对象的地方是，当您使用实现的类`IDisposable`或使用`System.Runtime.InteropServices`.

# google-nativeclient - PNACL pthread_mutex_lock 调用在某些地方卡住了

> ID：13823739
> 
> 赞同：1
> 
> 时间：2012-12-11T16:01:07.120
> 
> 标签：google-nativeclient

我正在尝试将一些异步 PPAPI 调用转换为同步。在 CallOnMainThread 调用之后，调用线程使用下面提到的 Block() 函数被阻塞，并且在调用回调函数之后，线程在使用下面提到的 Resume() 函数回调之后恢复。

```
void MyClass::Block()
{
    pthread_mutex_lock(&done_mutex);
    while (!is_done) {
        printf("Blocking...\n");
        pthread_cond_wait(&done_cond, &done_mutex);
    }
    pthread_mutex_unlock(&done_mutex);
}

void MyClass::Resume()
{
    pthread_mutex_lock(&done_mutex);
    is_done = true;
    printf("Resuming...\n");
    pthread_cond_signal(&done_cond);
    pthread_mutex_unlock(&done_mutex);
} 
```

这里，done_mutex 和 done_cond 是 MyClass 的属性，分别初始化为 pthread_mutex_init(&done_mutex, NULL) 和 pthread_cond_init(&done_cond, NULL)。

我无法得到的是，从我的代码中的某些特定点调用此机制时失败，在这种情况下， pthread_mutex_lock(&done_mutex) 调用会无限期地卡住并且页面变得无响应。

我试图打印 pthread_mutex_t 结构的一些属性（如下所示），发现有些不规则。

mutex_type = 0 owner_thread_id = 0x7d01，recursion_counter = 1，mutex_handle = 94

似乎 owner_thread_id 属性的值是垃圾，因为在它工作正常的地方，这些值是 4 字节宽（例如，0x101594c8），而且，相同的值会一遍又一遍地出现。我无法弄清楚它是如何获取这些垃圾值的，而且仅在代码中的某些特定点也是如此。

我还尝试在 MyClass 中使用 done_mutex 作为 pthread_mutex_t 指针，在堆上分配它，然后按如下方式使用 pthread_mutex_init。

```
done_mutex = (pthread_mutex_t *)malloc(sizeof(pthread_mutex_t));
int ret = pthread_mutex_init(done_mutex, NULL); 
```

真正奇怪的是，当从代码中的这些特定点调用 pthread_mutex_init 调用后，done_mutex 被重置为 NULL，否则它按预期工作。

我正在使用pepper21 工具链编译我的代码并在pepper_canary 上进行尝试。这会导致这样的问题吗？

我已经坚持了很长时间了。任何帮助都感激不尽。

# android - android 应用程序教程 74

> ID：13823741
> 
> 赞同：-1
> 
> 时间：2012-12-11T16:01:14.717
> 
> 标签：android, canvas, youtube

我在 youtube 上关注“thenewboston”的 toturial，我在第 74 个 toturial，我在“GFXSurface”应用程序中触摸屏幕后立即获得了 FC。我尝试调试，它停在“canvas.drawBitmap(test, (x - (test.getWidth() / 2)),(y - (test.getHeight() / 2)), null);”行

有任何想法吗？[这是教程的链接： http](http://www.youtube.com/watch?v=PmOtvJqDfqY) ://www.youtube.com/watch?v= PmOtvJqDfqY

这是我的代码：

```
public class GFXSurface extends Activity implements OnTouchListener {

    MyBringBackSurface ourSurfaceView;
    float x, y, sX, sY, fX, fY;
    Bitmap test, plus;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        ourSurfaceView = new MyBringBackSurface(this);
        ourSurfaceView.setOnTouchListener(this);
        Bitmap test = BitmapFactory.decodeResource(getResources(),
                R.drawable.green_ball);
        Bitmap plus = BitmapFactory.decodeResource(getResources(),
                R.drawable.button_plus);
        x=0;
        y=0;
        sX=0;
        sY=0;
        fX=0;
        fY=0;
        setContentView(ourSurfaceView);
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        ourSurfaceView.pause();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        ourSurfaceView.resume();
    }

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
        // TODO Auto-generated method stub
        x = event.getX();
        y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            sX = event.getX();
            sY = event.getY();
            break;
        case MotionEvent.ACTION_UP:
            fX = event.getX();
            fY = event.getY();
            break;
        }
        return true;
    }

    public class MyBringBackSurface extends SurfaceView implements Runnable {

        SurfaceHolder ourHolder;
        Thread ourThread = null;
        Boolean isRunning = false;

        public MyBringBackSurface(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
            ourHolder = getHolder();

        }

        public void pause() {
            isRunning = false;
            while (true) {
                try {
                    ourThread.join();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                break;
            }
            ourThread = null;
        }

        public void resume() {
            isRunning = true;
            ourThread = new Thread(this);
            ourThread.start();
        }

        @Override
        public void run() {
            // TODO Auto-generated method stub
            while (isRunning) {
                if (!ourHolder.getSurface().isValid())
                    continue;

                Canvas canvas = ourHolder.lockCanvas();
                canvas.drawRGB(23, 233, 254);

                if (x != 0 && y != 0) {

                    canvas.drawBitmap(test, (x - (test.getWidth() / 2)),
                            (y - (test.getHeight() / 2)), null);
                }
                if (sX != 0 && sY != 0) {

                    canvas.drawBitmap(plus, (sX - (plus.getWidth() / 2)),
                            (sY - (plus.getHeight() / 2)), null);
                }
                if (fX != 0 && fY != 0) {

                    canvas.drawBitmap(plus, (fX - (plus.getWidth() / 2)),
                            (fY - (plus.getHeight() / 2)), null);
                }

                ourHolder.unlockCanvasAndPost(canvas);
            }
        }

    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:18:05.867

```
Bitmap test = BitmapFactory.decodeResource(getResources(),
                R.drawable.green_ball); 
```

应该：

```
test = BitmapFactory.decodeResource(getResources(),
                R.drawable.green_ball); 
```

类中的`test`变量永远不会被设置，当你尝试使用它时它是空的。

（你的`plus`变量也是如此）

# django - Django RDF 支持？

> ID：13823746
> 
> 赞同：7
> 
> 时间：2012-12-11T16:01:34.520
> 
> 标签：django, rdf, sparql, semantic-web, triplestore

我正在寻找一种有助于为 Django 项目提供 RDF 支持的工具。

到目前为止，我发现了两个：

*   [django-rdf](http://code.google.com/p/django-rdf/) - 上次修改是 4 年前，所以它看起来像一个死项目。
*   [djubby](http://code.google.com/p/djubby/) - 看起来像一个全有或全无的项目 - 要么你将你的 django 应用程序创建为一个完全面向 RDF 的软件，没有任何其他 url，或者你不能使用它。

我正在寻找其他替代品，你知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:32:45.147

我不是 Python/Django 人，但这里有一些链接。如果您可以详细说明“支持”的含义，这也会有所帮助：rdf parsing? Sparql 加工？链接到三重商店？微格式？别的东西？

类似的问题：[djangonic 处理 rdf 的方式？](https://stackoverflow.com/questions/11365796/djangonic-way-to-deal-with-rdf)

不是 Django 本身，而是 Python，你可能会发现一些东西： http: [//www.michelepasin.org/blog/2011/02/24/survey-of-pythonic-tools-for-rdf-and-linked-data-programming/](http://www.michelepasin.org/blog/2011/02/24/survey-of-pythonic-tools-for-rdf-and-linked-data-programming/)

您还可以在这里找到一些信息[http://semanticdjango.org/](http://semanticdjango.org/)

github上的一些项目：[https ://github.com/odeoncg/django-rdflib](https://github.com/odeoncg/django-rdflib)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:43:26.817

这里有几个不同的问题。

您可以使用[http://d2rq.org/](http://d2rq.org/)为您的数据库提供 SPARQL 端点。（根据上面的评论，这似乎是您正在寻找的东西，并且它比 rdb->django model->rdf->sparql 更迂回）

您可以使用 surf 作为 ORM 层将数据放入 django 模板。

您可以将 rdfa 添加到您的模板中

您指向的 django 应用程序作为示例很有用（例如，用于重定向、与三重存储接口等）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-23T05:15:52.760

在四处搜索后，只发现了各种项目尸体，我开始了一个项目，对上述任何一个都采用了不同的方法：它是一个 django 项目，用于配置 Django 模型的自定义 RDF 序列化。这允许将模型的元素以及与其相关的模型映射到 RDF 谓词。

它位于[https://github.com/rob-metalinkage/django-rdf-io](https://github.com/rob-metalinkage/django-rdf-io) 并在[https://github.com/rob-metalinkage/django-skosxl中使用](https://github.com/rob-metalinkage/django-skosxl)

目前正致力于通过推理器连接到关联数据平台 (LDP) 容器以生成完整的语句集 - 例如计算传递关系。

# facebook - 查询 Facebook Open Graph Api 检查权限时出现 400 错误

> ID：13823747
> 
> 赞同：0
> 
> 时间：2012-12-11T16:01:35.153
> 
> 标签：facebook, facebook-graph-api

所以我想检查我的用户拥有的权限：

[https://graph.facebook.com/me/permissions&access_token=](https://graph.facebook.com/me/permissions&access_token=)

但我得到以下回复：

{ "error": { "message": "必须使用活动访问令牌来查询当前用户的信息。", "type": "OAuthException", "code": 2500 } }

我知道访问令牌有效，因为我可以代表用户进行状态更新并访问他的朋友信息。

这以前工作得很好。不知道发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:18:56.857

不确定您是否已经注意到但您的 URL 缺少 {?}

`https://graph.facebook.com/me/permissions&access_token=`

应该

`https://graph.facebook.com/me/permissions?access_token=`

# android - BluetoothChat 示例，无法识别丢失的连接

> ID：13823752
> 
> 赞同：2
> 
> 时间：2012-12-11T16:01:44.537
> 
> 标签：android, bluetooth

我已使用 BluetoothChat 示例在我的应用程序中构建蓝牙连接。应用程序连接正确，并正确存储所有配对设备，但未正确报告丢失的连接。

我的手机连接的设备由一块小电池供电，并在闲置约 30 秒后关闭。我希望我的应用程序在此设备关闭时通知用户。我曾认为这将包含在 BluetoothChat 示例中，但我认为不会。

```
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;
    private String mSocketType;

    public ConnectThread(BluetoothDevice device, boolean secure) {

        mmDevice = device;
        BluetoothSocket tmp = null;
        mSocketType = secure ? "Secure" : "Insecure";

        try {
            if (secure) {
                tmp = device.createRfcommSocketToServiceRecord( MY_UUID
                        );
            } else {
                tmp = device.createInsecureRfcommSocketToServiceRecord(
                        MY_UUID );
            }
        } catch (IOException e) {
            Log.e(TAG, "Socket Type: " + mSocketType + "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        //Log.i(TAG, "BEGIN mConnectThread SocketType:" + mSocketType);
        setName("ConnectThread" + mSocketType);

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() " + mSocketType +
                        " socket during connection failure", e2);
            }
            connectionFailed();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (BluetoothService.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice, mSocketType);
    }

    public void cancel() {
        RelayAPIModel.bluetoothConnected = false;
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect " + mSocketType + " socket failed", e);
        }
    }
} 
```

ConnectedThread 如下：

```
/**
 * This thread runs during a connection with a remote device.
 * It handles all incoming and outgoing transmissions.
 */
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final BufferedReader mmInBuffer;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket, String socketType) {
        Log.d(TAG, "create ConnectedThread: " + socketType);
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        RelayAPIModel.bluetoothConnected = true;
        mmInStream = tmpIn;
        mmOutStream = tmpOut;
        mmInBuffer = new BufferedReader( new InputStreamReader( mmInStream ) );
    }

    public void run(int length) {
        buffer = new byte[1024];

        // Keep listening to the InputStream while connected
        //while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer, 0, length);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(MainMenu.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {

                Message msg = mHandler.obtainMessage(MainMenu.MESSAGE_TOAST);
                Bundle bundle = new Bundle();
                bundle.putString( TOAST, "Device has disconnected from the Bluetooth Module." );
                msg.setData(bundle);
                mHandler.sendMessage(msg);
                Log.e(TAG, "disconnected a", e);
                connectionLost();

                // Start the service over to restart listening mode
                BluetoothService.this.start();
                //break;
            }
       // }
    }

    /**
     * Write to the connected OutStream.
     * @param buffer  The bytes to write
     */
    public void write( byte[] buffer ) {
        try {
            mmOutStream.write(buffer);

            // Share the sent message back to the UI Activity
            mHandler.obtainMessage(MainMenu.MESSAGE_WRITE, -1, -1, buffer)
                    .sendToTarget();
        } catch (IOException e) {
            Log.e(TAG, "Exception during write", e);
        }
    }

    public void cancel() {
        RelayAPIModel.bluetoothConnected = false;
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }
} 
```

我也有这个`connectionLost`函数，如果在 中捕获到异常，应该调用它`ConnectedThread`，但似乎永远不会捕获到异常。

```
private void connectionLost() {
    // Send a failure message back to the Activity
    Message msg = mHandler.obtainMessage(MainMenu.MESSAGE_TOAST);
    RelayAPIModel.bluetoothConnected = false;
    Bundle bundle = new Bundle();
    bundle.putString(TOAST, "Device connection was lost");
    msg.setData(bundle);
    mHandler.sendMessage(msg);
    Log.i("Here.",  "Connection Lost" );
    // Start the service over to restart listening mode
    BluetoothService.this.start();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T03:01:34.407

在这里，在您的广播接收器中，覆盖 onRecieve 以获取蓝牙连接的断开连接意图。

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if (BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED.equals(action)) {
            //disconnect request
        } else if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {
            //disconnected, do what you want to notify user here, toast, or dialog, etc.
        }
    }
} 
```

# r - 通过单击识别现有 splom 中的子面板

> ID：13823753
> 
> 赞同：4
> 
> 时间：2012-12-11T16:01:46.020
> 
> 标签：r, interactive, lattice, trellis

我希望能够`splom`在 R 中生成一个基本图，然后使用鼠标单击其中一个子面板（`panel.pairs`具体而言）并让 R 返回该子面板的坐标，甚至更好的是在该子面板中绘制的相应变量的名称。

这是一个可以使用的示例`splom`：

```
require(lattice)
data(iris)
super.sym <- trellis.par.get("superpose.symbol")
splom(~iris[1:4], groups = Species, data = iris,
      panel = panel.superpose,
      key = list(title = "Three Varieties of Iris",
                 columns = 3, 
                 points = list(pch = super.sym$pch[1:3],
                               col = super.sym$col[1:3]),
                 text = list(c("Setosa", "Versicolor", "Virginica")))) 
```

这是迄今为止我得到的最接近的，这让我可以单击其中一个子面板中的一个点，并观察该点出现在其他地方的位置。实际上不是我想要的，但它让我相信这是可能的：

```
trellis.focus()
panel.link.splom()

trellis.unfocus() #to close the trellis.focus session 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:28:12.023

您可以使用选项详细来获取详细信息：

```
 panel.link.splom(verbose=TRUE) 
```

你进入控制台：

```
Click to choose one point to highlight
    Sepal.Length Sepal.Width Petal.Length Petal.Width
141          6.7         3.1          5.6         2.4 
```

可以想象这样的场景：

1.  然后，您可以使用重定向控制台 `sink`

    ```
    con <- file("pointsselected.log")
    sink(con, append=TRUE) 
    ```

2.  选择图中的一些点。

3.  选择一个不在面板上的点（绘图外部）

4.  恢复控制台

    ```
    sink() 
    ```

5.  读取所有选定的点

    ```
     cat(readLines("pointsselected.log"), sep="\n") 
    ```

但是从帮助来看，交互选项仍然是实验性的，未来可能会改变确切的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:04:12.413

这与我正在寻找的内容非常接近，昨天发布到 R 帮助列表中：[http ://r.789695.n4.nabble.com/Focus-on-a-sub-panel-of-a-splom- with-trellis-focs-return-coordinate-of-sub-panel-or-names-of-variabln-td4652825.html](http://r.789695.n4.nabble.com/Focus-on-a-sub-panel-of-a-splom-with-trellis-focs-return-coordinate-of-sub-panel-or-names-of-variabln-td4652825.html)

1) 构造`splom()`同上。

2）确保你已经运行`library(grid)`

3）现在运行这些行：

```
trellis.focus()
names(iris)[round(unlist(grid.locator()))] 
```

4）点击情节的任何部分，然后结束焦点会议：

```
trellis.unfocus() 
```

我说这非常接近，因为它完全符合我的要求，但我希望捕获`names(.)[.]`即使在单击后仍保持打开状态。有什么想法吗？

# linux - CGI 环境，读取最大大小是固定的吗？

> ID：13823755
> 
> 赞同：1
> 
> 时间：2012-12-11T16:01:59.940
> 
> 标签：linux, apache, cgi

在 Apache2 提供的 CGI 环境中，我使用 C 编写的 cgi 可执行文件

cgi.c：

```
#define         MY_SIZE                 102400
#define         MY_SIZE_OUT             (2 + (MY_SIZE * 2))

    int main()
{
char          buf[SIZE + 2];
int           n;

if (write(1, "Content-type: text/html\n\n", 25) == -1)
        {
          puts("An internal error occured, please report the bug #005");
          goto EXIT;
        }
      if ((n = read(0, buf, MY_SIZE)) == -1)
        {
          puts("An internal error occured, please report the bug #004");
          goto EXIT;
        }

      buf[n] = '\n';
      buf[n + 1] = 0;

      printf("Size of input = %i |--| |%s| max size = %i\n", n, buf, MY_SIZE);

     EXIT:
      return 1;
} 
```

我的 POST 请求由 Ajax 代码发送：

```
ajaxRequest.onreadystatechange = function(){
            if(ajaxRequest.readyState == 4){
                var text;
                var exp;
            text = ajaxRequest.responseText;

            exp = new RegExp("([^ ]+)", "g");
            text = text.replace(exp, "<a class='wd' onClick='man_wd(this);'>$1</a>");
            document.getElementById("out").innerHTML = text;
            }
 }

  document.getElementById("out").innerHTML = "Processing...";
  ajaxRequest.open("POST", "cgi-bin/a.cgi", true);
  ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 ajaxRequest.setRequestHeader("Content-length", 5 + document.forms['f_main'].ta_in.value.length);
 ajaxRequest.setRequestHeader("Connection", "close");

  ajaxRequest.send(getPrefix() + " " + document.forms['f_main'].ta_in.value); 
```

我的问题是，当我发送一个包含 N 个以上字符的请求时，我的 CGI 可执行文件读取最多 1060 个字符，即使 MY_SIZE 值为 102400。

我遇到了 php.ini 但限制 POST 大小为 8Mb

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:10:10.743

从`read`手册页：

> read() 尝试将文件描述符 fd 中的 count 个字节读入缓冲区，从 buf 开始。

因此，可能需要多次调用 read。

在[Unix Network Programming](http://www.kohala.com/start/) Vol 1 中，Stevens 建议使用这个包装器来阅读：

```
ssize_t readn (int fd, void *vptr, size_t n)
{
    size_t ret;
    size_t nleft;
    ssize_t nread;
    char *ptr;

    /* Initialize local variables */
    ptr = (char*)vptr;
    nleft = n;
    while (nleft > 0)
    {
        if ((nread = read (fd, ptr, nleft)) < 0)
        {
            if (errno == EINTR)
            {
                /* Read interrupted by system call, call read() again */
                nread = 0;
            }
            else
            {
                /* Other type of errors, return */
                return -1;
            }
        }
        else if (nread == 0)
        {
            /* No more data to read, exit */
            break;
        }

        /* Update counters and call read again */
        nleft -= nread;
        ptr += nread;
    }
    ret = n - nleft;

    return ret;
} 
```

它多次调用 read 并且仅在读取所需数量的数据或输入真正结束时停止。

# c# - ColdFusion 与 C# Something<> 的等价物是什么？

> ID：13823764
> 
> 赞同：0
> 
> 时间：2012-12-11T16:02:46.107
> 
> 标签：c#, model-view-controller, coldfusion

我正在开发一个 ASP.NET 应用程序，当我看到类似`List<MyObject>`. 我实际上还有其他几个问题，但这是一个好的开始。我还尝试找到一些从 ColdFusion 迁移到 ASP MVC 的指南，但我发现的都是 2003 年的东西。感谢您的帮助 :)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T16:12:46.107

您所指的尖括号表示法称为[generics](http://en.wikipedia.org/wiki/Generic_programming#Genericity_in_.NET)。在像 C# 或 Java 这样的静态类型语言中，它们是必要的（或至少非常有用）。他们说的是这个列表将包含“MyObject”类型的对象。

一旦您声明了 List 可以包含哪种类型的对象，IDE（可能还有运行时）可以检查您的代码，以确保您只将该类型或子类型的对象放入 List 中。

因为 ColdFusion 是动态类型的，所以这个概念没有意义，这就是为什么在 CFML/CFScript 中没有相同的符号。与 Java/.Net 中的 List 最接近的等价物是 ColdFusion 中的 Array。这会让你在其中投入任何价值。您可以认为 ColdFusion 中的 Array 等同于 List。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T16:09:46.733

```
List<MyObject> 
```

意味着您有一个由`MyObject`元素组成的 List 对象。我建议您在[此处查看](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)有关列表的 microsoft 文档。

更一般地说，我建议您使用上面的链接来查找教程和潜在问题的答案，您也可以查看这个非常适合初学者的网站[dotnetperls](http://www.dotnetperls.com/)。（对于列表，看看[这里](http://www.dotnetperls.com/list)）

希望这有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T17:33:57.367

你的问题的第一部分已经回答。我将讨论 CF 应用程序向 MVC .net 的迁移。我目前处于类似情况。

我建议的方法是查看您的 CF 应用程序并写下它所做的一切。以看起来像规范的方式编写它。然后使用此文档编写您的新应用程序。

如果您的 CF 应用程序与其他 CF 应用程序共享自定义标签、udfs、cfcs 或其他类型的可重用代码，请将此功能写入 .net 类库。然后，如果您希望迁移这些其他应用程序，它们将可用。

祝你好运。

# c# - 错误：System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小

> ID：13823767
> 
> 赞同：0
> 
> 时间：2012-12-11T16:03:01.700
> 
> 标签：c#, .net, exception

我在下面的代码中得到一个异常“索引超出范围。必须是非负数并且小于集合的大小”。在代码中实际上发生了什么，处理一些最终占据的重复值数据网格

```
try
         {
            int index = alerts.Find(alertName);
            if (index >= 0 && tblAlarm.Rows.Count > idx)
            {
               DataRow row = tblAlarm.Rows[idx];
               m_dcDuplicates.ReadOnly = false;

            }
         } 
```

我需要增加喜欢的类型的大小`int`吗`long`？或者需要任何额外的签入代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:38:33.590

由于您使用的是`lock`语句，因此这可能是一个多线程实现。

一个可能的原因是您未能正确同步对对象的访问。查看更新集合的任何其他代码（`this`在上面的代码中） - 如果问题不明显，请发布。

**更新**

例如，在您更新的源代码中，索引器的设置器不同步：

```
public Alert this[int index]
{
    get ...
    set
    {
        this.List[index] = value;
    }
} 
```

您可能需要以下内容：

```
public Alert this[int index]
{
    get ...
    set
    {
        lock(this)
        {    
            this.List[index] = value;
        }
    }
} 
```

您的代码中的另一个奇怪之处是`Add`and`Remove`方法引用`this.InnerList`，而索引器引用`this.List`。

# numpy - Numpy FFT 稳定性

> ID：13823768
> 
> 赞同：3
> 
> 时间：2012-12-11T16:03:02.140
> 
> 标签：numpy, signal-processing, fft

我试图理解这两个 numpy 傅里叶变换之间的区别：

```
import numpy as np

samples = 256

# define the domain in slightly different ways
t_1 = np.linspace( 0.0, 1.0, samples )
t_2 = np.arange( 0.0, 1.0, 1.0/samples )

## The two domains are not identical, but they're close
print np.sum( (t_1 - t_2) ** 2 )
# 0.0013046364379084878

# simple sin wave
f = lambda t : 2 * np.sin( 2 * 2 * pi * t )

# signals over each domain
s_1 = f( t_1 )
s_2 = f( t_2 )

# fourier transform
fft_1 = np.fft.fft( s_1 )
fft_2 = np.fft.fft( s_2 )

freq = np.fft.fftfreq( samples )

# plot the FFT differences
plt.figure()
plt.subplot( 2,1,1 )
plt.plot( freq, fft_1, 'x' )
plt.subplot( 2,1,2 )
plt.plot( freq, fft_2, 'x' ) 
```

![fft_plot](../Images/482a55e51ac456dc40e60e9ed182cb3c.png)

在一种情况下，可以清楚地检测到信号中的单一频率，而在另一种情况下则没有。一种程序是否比另一种程序更正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:01:28.583

这两个情节比你想象的更相似。请记住，fft 返回一个复杂的数组。此外，输入函数的偏移会导致“k 空间”中的相移。因为`2*sin(a*pi*x) == i*(exp(i*a*pi*x) - exp(-i*a*pi*x))`s_2 在 k 空间的虚部中具有所有的力量（注意 y 轴在 1e-12 的数量级上），所以 s_1 稍微移动了一点，因此您在 k- 的实部中看到了一点信号空间，但大部分的力量仍然在虚部。看看当我绘制幅值 abs(k-space) 时会发生什么，而不是只绘制实部（这是 matplotlib 在给定复数时似乎所做的）。

```
import numpy as np

samples = 256

# define the domain in slightly different ways
t_1 = np.linspace( 0.0, 1.0, samples )
t_2 = np.arange( 0.0, 1.0, 1.0/samples )

## The two domains are not identical, but they're close
print np.sum( (t_1 - t_2) ** 2 )
# 0.0013046364379084878

# simple sin wave
f = lambda t : 2 * np.sin( 2 * 2 * pi * t )

# signals over each domain
s_1 = f( t_1 )
s_2 = f( t_2 )

# fourier transform
fft_1 = np.fft.fft( s_1 )
fft_2 = np.fft.fft( s_2 )

freq = np.fft.fftfreq( samples )

# plot the FFT differences
plt.figure()
plt.subplot( 2,1,1 )
plt.plot( freq, np.abs(fft_1.imag), 'x' )
plt.subplot( 2,1,2 )
plt.plot( freq, np.abs(fft_2.imag), 'x' ) 
```

![abs(fft(f)) 的图](../Images/f874ac4225951fe77f300a8ed7e24f22.png)

# sql - Oracle SQL 时间数据类型

> ID：13823770
> 
> 赞同：3
> 
> 时间：2012-12-11T16:03:21.677
> 
> 标签：sql, oracle

我想在多列中存储一个时间值，但我不确定我必须使用什么数据类型？目前有 TIMESTAMP，但这似乎也存储了日期，如果我试图存储比赛的记录时间，这将是无用的。

任何想法，我已经四处搜索，但找不到我要找的东西。

感谢您的阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:08:13.077

比赛经过的时间应存储在`INTERVAL DAY TO SECOND`.

```
SQL> create table runner(
  2    runner_id number primary key,
  3    runner_name varchar2(100),
  4    runner_time interval day to second
  5  );

Table created.

SQL> insert into runner
  2    values( 1, 'Justin', numtodsinterval( 250, 'second' ) );

1 row created.

SQL> select *
  2    from runner;

 RUNNER_ID RUNNER_NAME          RUNNER_TIME
---------- -------------------- ------------------------------
         1 Justin               +00 00:04:10.000000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:08:22.037

`TIMESTAMP`并且`DATETIME`不适合这里。您要存储的不是*单个*时间点，而是*时间间隔*。Oracle 9i 及更高版本支持此类间隔。尝试使用`INTERVAL DAY TO SECOND`：

```
INTERVAL '3 12:30:06.7' DAY TO SECOND(1) 
```

参考：[http ://www.techrepublic.com/article/master-oracles-time-interval-datatypes/6085801](http://www.techrepublic.com/article/master-oracles-time-interval-datatypes/6085801)

# asp.net - asp.net 中的任何其他类似 iframe

> ID：13823773
> 
> 赞同：0
> 
> 时间：2012-12-11T16:03:28.767
> 
> 标签：asp.net, iframe, frame

我正在使用 asp.net 3.5。我想在我的 aspx 页面中显示一个页面（带有链接）。首先，我尝试使用 iframe 或框架。但是，如果不支持框架，我的页面将无法显示。是否有任何其他方式，或该目标的任何控制。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:06:04.497

您可以尝试在 ASP.NET 中使用 Google 搜索“屏幕抓取”。您基本上会打开与该站点的连接并将 HTML 复制到您的站点。

这可能会变得一团糟，具体取决于您尝试将哪些内容拉入您的网站。

# php - 拆分和替换 HTML 标签元素

> ID：13823774
> 
> 赞同：1
> 
> 时间：2012-12-11T16:03:30.893
> 
> 标签：php, html-parsing

我有一个动态标签元素，我需要用 PHP 替换特定标签。

基本上我只需要将标签`<a>`部分替换`<img>`为文本。例如：

```
<a target="_blank" 
   title="Visit MarcAira14 on Facebook" 
   href="http://www.facebook.com/MarcAira14"
>
  <img alt="Facebook icon" src="/sites/all/modules/contrib/socialmedia/icons/levelten/glossy/48x48/facebook.png">
</a> 
```

会成为：

```
<a target="_blank" 
   title="Visit MarcAira14 on Facebook"
   href="http://www.facebook.com/MarcAira14"
>Facebook</a> 
```

在本例中，我还需要获取标题属性 ( `title="Visit MarcAira14 on Facebook"`) 中的最后一个字符串`"Facebook"`。

任何有想法或建议的人将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:40:05.440

这正是 HTML 解析器存在的目的。一种方法是使用 PHP 自己的`DOMDocument`.

另一种可能更简单的方法是[phpQuery](https://code.google.com/p/phpquery/)，它是 DOMDocument 的一个很好的包装器。（似乎有一段时间没有更新了，最后一次更新是从 2009 年 5 月开始的。）

phpQuery 大量借鉴了 jQuery，因此如果您熟悉它，可以使用许多已知概念。

对于您的情况，它应该是这样的：

```
$doc = phpQuery::newDocument($yourHtmlOrHtmlFragment);

$links = $doc['a[title!=""]:has(img)'];

foreach( $links as $link )
{
    $title = $link->getAttribute('title');
    $words = explode(' ', $title);
    $last_word = end( $words );
    pq($link)->empty()->text( $last_word );
} 
```

另请参阅[phpQuery 手册](https://code.google.com/p/phpquery/wiki/Manual)。

此处讨论了其他用于 PHP 的 HTML 解析器：[Robust and Mature HTML Parser for PHP](https://stackoverflow.com/questions/292926/robust-mature-html-parser-for-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:30:01.040

这是正则表达式版本。我已经对其进行了测试，并且可以正常工作。text.html 是您的源字符串。

```
<?php

$string = file_get_contents('text.html');
$pattern = "/<img alt=([^<])*/m";
$replacement = 'Facebook';
echo preg_replace($pattern, $replacement, $string);

?> 
```

它搜索“<img alt=”，然后搜索每个字符，直到第一个“<”，并将其替换为 Facebook。末尾的 m 表示搜索多行。

# ruby-on-rails-3 - 使用 Globalize3 加载特定翻译

> ID：13823776
> 
> 赞同：2
> 
> 时间：2012-12-11T16:03:45.920
> 
> 标签：ruby-on-rails-3, globalize3

是否可以使用 Globalize 3 加载特定的翻译？

例如，我有一个`Post`可翻译的，并在前端以正确的语言环境显示。但是，我想在管理员中显示一个相同的版本，它具有固定的语言环境：en。

这样做的一种方法似乎是告诉我们所处的语言环境：

```
Globalize.locale = :de
Post.where(id: params[:id]) 
```

工作得很好，但这将覆盖全球的语言环境。

那么，我怎样才能为这一个实例请求特定的语言环境呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:51:25.640

您需要`Globalize.with_locale`在视图中使用：

```
- Globalize.with_locale(:de) do
  = debug @post 
```

# r - 设置支持与客户端异步通信的 R-Server

> ID：13823778
> 
> 赞同：12
> 
> 时间：2012-12-11T16:04:00.557
> 
> 标签：r, sockets, webserver, client-server

## 简而言之

是否可以设置一个可以以**异步**方式处理/调度多个客户端请求的 R-Server？

我想我正在寻找某种套接字通信。或者有什么更有效的方法可以让 R 与其他应用程序对话？

现在，我真的不在乎通信是否最终通过“普通套接字通信”（类似于`socketConnection(port=6011, server=TRUE)`服务器进程、`socketConnection(host=Sys.info()["nodename"], port=6011)`客户端进程与 JSON 字符串的组合`writeLines()`）`readLines()`或其他方式实现“高级”，例如使用基于 HTTP 请求的 Web 服务器设施。

## 更多细节

首先：关于那些细节的信息学细节，我的背景都是“DIY”，所以像*套接字通信、**主服务器概念*或*异步通信*等细节对我来说是相当新的。所以请不要咬人;-)

我希望我的一个进程充当 R-Server。AFAIU, R 不是在“多线程范式”下设计的。**所以我想知道如何让我的 R-Server 以异步**方式处理并发客户端请求（当前来自通过 JSON 样式字符串发送其请求/对象的第三方软件） 。

用简单的英语，我想告诉我的服务器进程是这样​​的：

> > 一旦您在端口 xy 收到传入消息，请执行您需要做的事情，但*立即*切换回“响应模式”以便能够处理下一个客户端请求，并始终注意每个客户端获得与其逻辑链接的结果各自的要求。

## 家庭作业

我从一些非常基本的东西开始：

```
con <- socketConnection(port=as.numeric(port), server=TRUE) 
```

这将使我的 R 进程成为服务器。它是一种享受，但由于`con`是我的“唯一”连接对象，服务器注定要按顺序处理每个客户端请求：

> > 从连接读取输入，进行一些计算，将输出写回连接，**然后**才处理下一个客户端请求。

我想过让我的服务器进程立即将需要完成的所有事情分派给**辅助 Rscript 进程**，以便“主”服务器进程准备好接受下一个请求。但是由于最终结果需要`con`再次通过（在我的“主”服务器进程中），我认为这并没有真正让我得到任何分数，因为服务器进程仍然需要等到辅助进程完成在接受下一个请求之前。或者我可以告诉这个辅助过程以某种方式“直接”报告回客户端请求吗？

尽管我目前的目标不是将我的服务器变成一个成熟的 Web 服务器，但乍一看，这些复杂的 Web 服务器方法对我来说似乎很有希望：

*   [RServe](http://www.rforge.net/Rserve/)（[CRAN 页面](http://cran.r-project.org/web/packages/Rserve/index.html)）
*   [Rook](http://jeffreyhorner.tumblr.com/post/25035081768/rook-tutorial-at-user-2012)（[CRAN 页面](http://cran.r-project.org/web/packages/Rook/index.html)）

是否可以使用其中之一进行异步客户端通信？

任何指针都将**不胜**感激！

* * *

## 编辑

**一旦问题符合条件，我将提供 300 学分的赏金。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T20:35:50.117

[Rserve](http://rforge.net/Rserve)正是为此而设计的。

它支持许多客户端，R 就是其中之一。在[RSclient](http://rforge.net/RSclient)包中，您可以`RS.eval(.., wait=FALSE)`在后台执行评估。`RS.collect`您可以使用可以指定连接列表的位置收集结果。

另请参阅[Rserve.cluster](http://rforge.net/Rserve.cluster)包以将并行处理分派到`Rserve`实例。

如果您还希望以其他方式进行异步通信（从服务器到客户端），请参阅 Rserve 中的 OOB 命令（这些是代表服务器而不是客户端执行的未经请求的命令）。如果需要，现在还提供代理支持。请在[stats-rosuda-devel](http://mailman.rz.uni-augsburg.de/mailman/listinfo/stats-rosuda-devel)邮件列表中提问。

# c# - 使用 QueryString 显示详细信息

> ID：13823782
> 
> 赞同：0
> 
> 时间：2012-12-11T16:04:04.863
> 
> 标签：c#, asp.net, linq, entity-framework

我有一个显示结果的搜索。结果有两种类型的项目和联系人。它们显示在 ListView 中的一个模板下，使用 `.Union()`. 我有两个页面 ContactDetails.aspx 和 ItemDetails.aspx。

下面是我的一个例子`<ItemTemplate>`。这仅显示联系人部分。我将如何根据它是项目还是联系人来更改这些链接，并据此更改 URL？

这是我需要用于项目的 URL`~/LoggedIn/ItemDetails.aspx?ItemID={0}`

```
 <ItemTemplate>
                        <asp:HyperLink runat="server" ID="link"
                        Text='<%#Eval("Name") %>'
                       NavigateUrl='<%#Eval("ID", "~/LoggedIn/ContactDetails.aspx?ContactID={0}")                             %>' />
                    <br />

                    <ul>

                        <li>
                            <span><b>Identity:</b><%#Eval("ID") %></span></li>

                        <li><span><b>Phone:</b><%#Eval("Phone") %></span></li>

                    </ul>

                                    <asp:HyperLink runat="server" CssClass="btn"  ID="ConUpdateLink"
                        Text='Update'
                        NavigateUrl='<%#Eval("ID", "~/Admin/UpdateContact.aspx?ContactID={0}") %>' />                        

                </ItemTemplate> 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:27:54.613

更改：

```
 <asp:HyperLink runat="server" CssClass="btn"  ID="ConUpdateLink"
        Text='Update' 
        NavigateUrl='<%# GetValidUrl((string)Eval("ID")) %>' /> 
```

然后在后面的代码中：

```
 public string GetValidUrl(string id)
    {
        string ret = string.Empty;
        if (/*it is item id*/)
        {
            ret = string.Format("~/Admin/UpdateContact.aspx?ContactID={0}", id);
        }
        else if (/*it is contact id*/)
        {
            ret = string.Format("~/LoggedIn/ItemDetails.aspx?ItemID={0}", id);
        }
        return ret;
    } 
```

您需要添加用于按 id 检查类型的部分，或传递可用于此目的的其他值。

# java - 访问与 Jaxb 不在同一个 XSD 中的对象

> ID：13823788
> 
> 赞同：0
> 
> 时间：2012-12-11T16:04:19.593
> 
> 标签：java, xml, xsd, jaxb

首先，我有一个 XSD，其中包含对 commentType 对象的引用：

```
...
<xs:complexType>
    <xs:sequence>
        <xs:element name="entry" type="ref:commentType">
... 
```

commentType 被描述为（相同的 XSD）：

```
...
<xs:complexType name="commentType" mixed="true">
    <xs:annotation>
        <xs:documentation>Some text</xs:documentation>
    </xs:annotation>
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:any/>
    </xs:sequence>
    <xs:attribute name="date" type="xs:dateTime" use="required"/>
    <xs:attribute name="type" use="optional" default="PRODUCT">
        <xs:simpleType>
            <xs:restriction base="xs:token">
                <xs:enumeration value="PRODUCT"/>
                <!--Several values-->
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
</xs:complexType>
... 
```

在我使用 Jaxb 解析的 XML 文件中，entry 指的是 opDetails 对象，该对象在另一个 XSD 中定义......

```
...
<entry date="2010-03-26T10:40:27Z" type="PRODUCT">
    <opDetails xmlns="http://path/to/opDetails">
        <!--Object properties-->
    </opDetails>
... 
```

（为了清楚起见，我简化了名称和结构）

问题 ：

如何在我的代码中正确映射这个其他对象？

我有一个 entry.getContent()，它是 TinyElementImpl 的列表。

显然，生成 2 个 xsd 的类并尝试将 TinyElementImpl 转换为 opDetails 不是一种选择:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:42:59.977

我找到了答案

unmarshall 也适用于节点。 [http://docs.oracle.com/javaee/5/api/javax/xml/bind/Unmarshaller.html](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Unmarshaller.html)

我的代码：

```
org.w3c.dom.Node nodeEntryContent = (org.w3c.dom.Node)entry.getContent().get(0);

JAXBContext ctx;
Unmarshaller um;
opDetails dOp = null;
try {
    ctx = JAXBContext.newInstance("package.of.opDetails.containing.xjc.generated.classes");
    um = ctx.createUnmarshaller();
    dOp = (opDetails)um.unmarshal(nodeEntryContent);
} catch (JAXBException e1) {
    System.out.println("XML parsing error" + e1.getMessage());
} 
```

# java - Java Date object constructor for getting string is deprecated

> ID：13823797
> 
> 赞同：2
> 
> 时间：2012-12-11T16:04:40.197
> 
> 标签：java, string, date, deprecated

I have problem using Date in java, I have a string that represent a date for example String date = "23/10/2012"; and i have a function that get a date as parameter, for example

```
public void foo(Date date){...} 
```

my problem is that Date constructor that accept a string is deprecated and i do not want to use a deprecated object.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:06:15.050

Use [**SimpleDateFormat.parse(String)**](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29) to parse a string to **java.util.Date** object

```
String date = "23/10/2012"  
Date date = new SimpleDateFormat("dd/MM/yyyy").parse(date); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:06:16.803

So, you look at the [Javadoc for the deprecated method](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28java.lang.String%29) which specifies:

> Deprecated. As of JDK version 1.1, replaced by DateFormat.parse(String s).

You then look up [`DateFormat.parse`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29) and proceed accordingly. You probably want to create a `SimpleDateFormat` - or better still, use [Joda Time](http://joda-time.sf.net) which is a much better date/time API.

When a method is deprecated, it's always a good idea to give an indication of what existing code should be migrated to, and ideally why the old method was deprecated. Follow this guidance when you deprecate your own methods... and whenever you try to *use* a deprecated method, check the documentation to see if it suggests a better alternative.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:05:47.537

You may need to use [SimpleDatFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html) (or) [Joda library](http://joda-time.sourceforge.net/).

Example:

```
new SimpleDateFormat("dd/MM/yyyy").parse(yourDateString); 
```

# javascript - 使用递归 javascript 函数可扩展表行

> ID：13823799
> 
> 赞同：0
> 
> 时间：2012-12-11T16:04:53.503
> 
> 标签：javascript, jquery

```
<tr onclick="removeAllDescendant(this)" parentid="@item.parentId" id="@item.id">
    <td>
    Use: <input type="checkbox" value="@item.iaId" />&nbsp; &nbsp; &nbsp; 
    Qty: <input type="text" class="width_100" />
</td>
<td>@item.location</td>
<td>@item.qty @item.uom</td>
<td>@item.createDt</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr> 
```

我已经动态地创建了这些表行，每一行都有 parent-id 和一个 id。当用户单击行时，我想折叠所有后代行。

这是javascript代码-

```
function removeAllDescendant(row)
{
   var id = $(row).attr("id");
   removeRows(row, id);
}

function removeRows(row, id) {
    var tr = $(row).nextAll('tr [parentid=' + id + ']');
    if (tr.length > 0) {
        for (i = 0; i < tr.length; i++) {
            id = $(tr[i]).attr("id");
            alert(id);
            removeRows(tr[i], id);
        }
    }
    $(tr).remove();
} 
```

你们在这个递归函数中看到任何错误吗，由于某种原因，如果我有超过 3 个级别，这将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:31:41.193

在我看来，您提供的代码并不能很好地说明您想要做什么（并且该`expandMainRow`功能未定义）。无论如何，如果我理解正确，您想让单击后的所有行都消失，对吗？（我的意思是，这样：http: [//jsfiddle.net/Polmonite/Hdaeg/](http://jsfiddle.net/Polmonite/Hdaeg/)）如果是这种情况，你可以简单地这样做：

```
$('table tr:not(:last-child)').on('click',function(){
    if($(this).hasClass('clicked')){
        $(this).removeClass('clicked').nextAll('tr').show();
    }else{
        $(this).addClass('clicked').nextAll('tr').removeClass('clicked').hide();
    }
}); 
```

这样，当您单击一行时，后面的行会消失，而如果您再次单击它，它们会重新出现。如果您不希望它们在点击时重新出现，您可以更简单地执行以下操作：

```
$('table tr').on('click',function(){
    $(this).nextAll('tr').hide();
} 
```

如果我误解了这个问题，我深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:14:59.030

调试 javascript 代码后，我找到了问题的原因。我应该为每个递归调用定义变量（i）。所以更正的代码是......

```
function removeRows(row, id) {
    var tr = $(row).nextAll('tr [parentid=' + id + ']');

    if (tr.length > 0) {
        for (var i = 0; i < tr.length; i++) {
            var tempId = $(tr[i]).attr("id");
            removeRows(tr[index], tempId);
        }
    }
    $(tr).remove();
} 
```

现在完美运行:)

# maven - 一般 Maven 从 repo 中提取而不从 SVN 进行构建

> ID：13823801
> 
> 赞同：0
> 
> 时间：2012-12-11T16:04:54.623
> 
> 标签：maven

我已经建立了战争，对于某些过程，我想让 maven 从我的 repo (Nexus) 中获取特定版本，然后我会让 jenkins 用它做一些事情。这是否可能，没有 maven 从 svn 中提取该源，而只从 repo 中获取特定版本的战争？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:14:43.213

我认为已经提出了类似的问题，请参阅：[如何在一个命令行中下载特定的 Maven 工件？](https://stackoverflow.com/questions/1895492/how-can-i-download-a-specific-maven-artifact-in-one-command-line)

Maven 依赖插件应该为您完成这项工作。

# regsvr32 - 如何调试：regsvr32 dll注册错误0x3

> ID：13823807
> 
> 赞同：1
> 
> 时间：2012-12-11T16:05:05.737
> 
> 标签：regsvr32, dllregistration

我有一个正在为其创建 innosetup 安装 (setup.exe) 的应用程序。20 个 COM dll 注册良好。我有**一个**没有。

regsvr32（以管理员身份运行）报告 0x3 错误。但是如何找出丢失的 DLL 呢？我有另一台 regsvr 工作的电脑！（两者都是win7 64位计算机，几乎相同）。

我在 DLL (vpfmap.dll) 上运行了 DEPENDENCY-WALKER.exe，并查看了所有依赖项。

据我所知，它们应该都在该计算机上（c:\windows（许多 dll），然后是我已复制到目标计算机上目标文件夹的 8 个其他文件。

我在事件日志中看不到任何错误。

我想要的是如何弄清楚缺少什么？

![在此处输入图像描述](../Images/7a68a5c1b82ebf2d8c4b472f269a7f86.png)

![在此处输入图像描述](../Images/2793003d0f3a67cd8db17b1b1bd963e2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:40:00.873

使用dependency walker，如果您正在扫描64 位文件，请确保您使用的是64 位版本的dependency walker。否则，结果将不是您所期望的。

另一个提示：尝试注册 DLL，然后检查应用程序事件日志。通常，事件日志将包含更多详细信息，包括丢失文件的文件名。

如果这是一个并行依赖问题，工具**sxstrace.exe**可能会告诉您缺少什么。此文件随 Windows 7 一起安装。 [http://technet.microsoft.com/en-us/library/hh875651%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/hh875651%28v=ws.10%29.aspx)

跑

```
sxstrace TRACE -logfile:tracelog.etl 
```

然后尝试注册您的文件。

停止跟踪后，您需要解析日志以获得人类可读的版本。

```
sxstrace PARSE -logfile:tracelog.etl -outfile:tracelog.txt 
```

# java - 一组值的 Java 验证方法

> ID：13823809
> 
> 赞同：0
> 
> 时间：2012-12-11T16:05:06.933
> 
> 标签：java, spring, validation

我正在尝试验证一组值“RecordStatus”和“Condition”。想出了下面的方法。

1.  使用字符串 recordStatus 和条件定义类 RecordStatusCodition。

2.  定义一个类 RecordStatusCoditionValidator 实现如下

> ArrayList 有效列表 = 新 ArrayList() {{
> 
> ```
>  add(new RecordStatusCodition ("CREATED","A"));
>                   add(new RecordStatusCodition ("INSERTED","B"));
>                   add(new RecordStatusCodition ("INSERTED","A"));
>                   }}; 
> ```

```
public boolean isProcessed(RecordStatusCodition recordStatusCodition ) {
                    return checkList.contains(recordStatusCodition);
    }
} 
```

正在从我在其他地方的代码中调用此类以检查条件

```
 if(!RecordStatusCoditionValidator.isProcessed(new RecordStatusCodition("","")))
               // do processing
        } 
```

与上述类似，还有其他各种不同列表的条件，可能需要经常更改

虽然这很好用，但我需要知道是否有更好的方法，因为这是我的大部分代码所依赖的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:09:23.210

我建议您使用`Map`(`HashMap`实现) 而不是`ArrayList`. 这样，您可以保留对象的标识符（在本例中为`A`or `B`）并将其状态存储为值。然后，您的`isProcessed`方法可以简化为

```
map.containsKey(key); //Where key is either "A", "B", etc. 
```

此映射不应该是类中的原始字段。我建议你将它包装在你自己的对象中，你可以在你的应用程序中引用它而不是原始地图。这将使您能够控制不同的操作，并允许您在这些操作中进行一些预处理或后处理。

如果您愿意，您的`RecordStatusCondition`类也可以重构为枚举，定义给定对象可以具有的条件范围：

```
RecordStatusCondition.CREATED;
RecordStatusCondition.INSERTED; 
```

然后，您可以像这样添加一个对象：

```
recordStatusContainer.put(record.getId(), RecordStatusCondition.CREATED); 
```

您也可以使用该方法相当容易地获得状态，`get()`但请记住，如果您使用游览自己的对象作为键，则必须重新定义`hascode()`并`equals()`使其正常工作。

作为一个附带建议，如果可能的话，您可以让您的（或此处代表您的主要逻辑单元的任何对象）通过向其添加字段来`RecordStatus`了解其当前状况。`RecordStatusCondition`

# java - Sort integers in ascending order

> ID：13823813
> 
> 赞同：2
> 
> 时间：2012-12-11T16:05:25.197
> 
> 标签：java, android, arrays, sorting

I would like to generate a sequence of 5 random integers from 0 to 11, and then sort this in an increasing order. I have coded as follows but the logcat shows `NullPointerException`.

How could such be solved? Many thanks!!

```
public class Memory extends Activity 
{     
   Integer[] NumSeq;
   private Random random1;  

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {...
      random1 = new Random();
      setQup();
   }

   private void setQup() 
   {
       NumSeq[0] = random1.nextInt(12);            
       NumSeq[1] = random1.nextInt(12); 
       while (NumSeq[1] == NumSeq[0]) {NumSeq[1] = random1.nextInt(12);}
       NumSeq[2] = random1.nextInt(12); 
       while ((NumSeq[2] == NumSeq[1]) || (NumSeq[2] ==NumSeq[0])) {NumSeq[2] = random1.nextInt(12);}

      ...

       Arrays.sort(NumSeq, new Comparator<Integer>()
                {
                    @Override
                    public int compare(Integer x, Integer y)
                    {
                        return x - y;
                    }
                });        

       Button11.setText(""+NumSeq[0]);
       Button12.setText(""+NumSeq[1]);
       Button13.setText(""+NumSeq[2]);         
   }
} 
```

## Logcat:

```
12-12 00:01:17.875: E/AndroidRuntime(18703): FATAL EXCEPTION: main
12-12 00:01:17.875: E/AndroidRuntime(18703): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pearappx.logic.run/com.pearappx.logic.run.Memory}: java.lang.NullPointerException
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.os.Looper.loop(Looper.java:137)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.ActivityThread.main(ActivityThread.java:4511)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at java.lang.reflect.Method.invokeNative(Native Method)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at java.lang.reflect.Method.invoke(Method.java:511)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at dalvik.system.NativeStart.main(Native Method)
12-12 00:01:17.875: E/AndroidRuntime(18703): Caused by: java.lang.NullPointerException
12-12 00:01:17.875: E/AndroidRuntime(18703):    at com.abc.logic.run.Memory.setQup(Memory.java:111)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at com.abc.logic.run.Memory.onCreate(Memory.java:66)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.Activity.performCreate(Activity.java:4470)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
12-12 00:01:17.875: E/AndroidRuntime(18703):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931) 
```

line 111 represents the line for above `NumSeq[0] = random1.nextInt(12);`

## Solution:

```
 private List<Integer> NumS;  

   private void setQup() 
   {
// set random number from 0 to 11   
           int num0 = random1.nextInt(12);
           int num1 = random1.nextInt(12);
           while (num1 ==num0) {num1 = random1.nextInt(12);}
           int num2 = random1.nextInt(12);
           while ((num2 ==num0)||(num2 ==num1)) {num2 = random1.nextInt(12);}
           int num3 = random1.nextInt(12);
           while ((num3 ==num0)||(num3 ==num1)||(num3 ==num2)) {num3 = random1.nextInt(12);}

       NumS = new ArrayList<Integer>();
       NumS.clear();           
       NumS.add(num0);
       NumS.add(num1);
       NumS.add(num2);
       NumS.add(num3);
       Collections.sort(NumS);

       Button11.setText(""+NumS.get(0));
               ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:09:08.303

`NumSeq` is never create:

```
Integer[] NumSeq = new Integer[12]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:12:17.340

you forget to initialize `Integer[] NumSeq` so initialize it as:

```
Integer[] NumSeq = new Integer[12]; 
```

and to avoid static size use `ArrayList<Integer>` instead of `Integer Array`

you can sort ArrayList easy using `Collections.sort`

```
Collections.sort(unsortedList); // in ascending Order 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:09:59.293

```
Integer[] NumSeq = new Integer[]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:22:44.573

You have to initialize NumSeq:

```
Integer[] NumSeq = new Integer[12] 
```

However, you should avoid static sized arrays for two reasons:

1.  It restricts the scalability of your code.
2.  If you use some subclass of `List<T>`, you can easily use `Collections.sort` to sort by an arbitrary comparator or the default one. See [Java how to sort a Linked List?](https://stackoverflow.com/questions/6247233/java-how-to-sort-a-linked-list).

# ruby-on-rails - sunspot_solr 存储字段

> ID：13823814
> 
> 赞同：1
> 
> 时间：2012-12-11T16:05:31.727
> 
> 标签：ruby-on-rails, solr, sunspot, sunspot-solr

我在可搜索块中有这一行

```
text :title, :stored => true 
```

我正在通过太阳黑子 solr 搜索书名。但是我真的必须使用存储字段吗？

```
:stored => true 
```

根据文档

> 存储字段允许在不访问底层数据库（通常是 SQL 服务器）的情况下检索数据。它们也是突出显示和更多类似查询所必需的。
> 
> Solr 索引中的存储字段会带来一些性能成本，因此请明智地使用它们。

但我不知道什么时候应该真正使用这些存储的字段。因为我在可搜索块中有很多字段。我应该将它们全部存储起来以避免击中 db 吗？性能成本是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:18:17.633

太阳黑子的维护者在这里。

只要您使用 Sunspot 加载 ActiveRecord 对象，则建议仅将字段值存储用于需要它们的 Solr 功能，例如突出显示。

如果您`hits`从 Sunspot 搜索响应进行渲染，而不是加载`results`，那么您将需要存储您在视图中渲染的字段值。但是由于我在[其他地方](https://stackoverflow.com/a/13870207/154694)提到的原因，您可能应该有明确的理由以这种方式绕过 ActiveRecord。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:56:45.833

如果您希望将字段作为 Solr 响应返回，通常出于显示目的，您会将字段标记为已存储。
如果您希望字段仅可搜索而不显示，请仅对它们进行索引。
相反，您回击数据库，在您执行搜索时，它会更快地从 Solr 存储和检索。
在多个字段上使用 Stored 的背景是索引大小会变大，因为 Solr 必须存储实际值。但是，如果文档数量不是那么高，它不应该打扰你。

# java - 如何在java中停止我的线程

> ID：13823819
> 
> 赞同：0
> 
> 时间：2012-12-11T16:05:40.167
> 
> 标签：java, multithreading

我有一个小型暴力破解器的以下代码部分。我一直在尝试学习多线程，并且我有不会停止的执行程序。

```
private void generateThreads(int cores){
    if (cores > Runtime.getRuntime().availableProcessors() || cores <= 0)
        cores = Runtime.getRuntime().availableProcessors();

    ArrayList<Future<?>> tasks = new ArrayList<Future<?>>(cores);
    ExecutorService executor = Executors.newFixedThreadPool(cores);
    final long step = 2000;

    for (long i = 0; i < Long.MAX_VALUE; i += step){
        while(tasks.size() > cores) {
            for(int w = 0; w < tasks.size();w++){
                if(tasks.get(w).isDone()){
                    tasks.remove(w);
                    break;
                }
            }

            try{
                Thread.sleep(0);
            }

            catch (InterruptedException e){
                e.printStackTrace();
            }
        }
        {
            if (passwordFound == false){
                tasks.add(executor.submit(new Runnable(){

                    public void run(){
                        String attempt;
                        while(true){
                            try {

                                Thread.sleep(0);
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                            attempt = bf.toString();
                            bf.increment();
                            if (passwordCrack(attempt)){
                                crackedPassword.append(attempt);
                                passwordFound = true;
                                break;
                            }

                        }
                    }
                }));
            }
            else
                break;
        }
    }
    executor.shutdownNow();
} 
```

我认为 Thread.sleep(0) 将使线程能够捕获 InterruptedException，但我的线程继续永远存在。我能做些什么来确保一旦找到密码，线程就会正确停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:11:04.567

您还必须检查`passwordFound`变量：

```
// inside your run() method
while(!Thread.currentThread().isInterrupted() && !passwordFound) {
  ...
} 
```

`Thread.sleep()`据我所知，不需要。

PS更正了我的答案，以使其更清楚我的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:13:54.167

看来您想要这样的行为：

```
public void run() {
  /* do something */
  while(!passwordFound) {
      /* do something */
  }      
} 
```

小心锁定存储密码的变量！

# mysql - MySQL：如何从同一张表的不同行中获取单元格的值

> ID：13823820
> 
> 赞同：0
> 
> 时间：2012-12-11T16:05:44.013
> 
> 标签：mysql

对于可能含糊/不准确的标题，我深表歉意，但我不确定该写什么。随意编辑。

我自己有一个名为 A 的 MySQL 表。A 有三列

ID、父 ID 和姓名。

组织 ID 是自动递增的，并且永远不会为空。父 ID 可以为空。名称只是 A、B、C、D、E 等。

我的问题是。当我显示信息时，我不想显示父 ID，而是要获取父名称。

为了进一步解释我想要什么，请考虑以下信息：

```
ID, PID, NAME:
1,  5,   HELLO
2,  5,   POPPET
3,  5,   HI
4,  5,   BYE
5,   ,   PARENT
6,   ,   LOL
7,  8,   LUL
8,   ,   TROPICAL 
```

应该成为

```
ID, PID,      NAME:
1,  PARENT  , HELLO
2,  PARENT  , POPPET
3,  PARENT  , HI
4,  PARENT  , BYE
5,          , PARENT
6,          , LOL
7,  TROPICAL, LUL
8,          , TROPICAL 
```

类似的东西。我半信半疑地认为解决方案很简单，但我对 MySQL 还很陌生，对做很酷的事情的语法知之甚少。

这似乎过于简单，但我需要自己加入表格吗？我正在考虑在表上使用 SELECT 并在其自身上使用 LEFT JOIN。有什么方法可以引用另一行吗？也许更简单的方法？:)

非常感谢您的任何见解，在此先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:08:59.497

将表连接到自身正是您需要做的。像这样：

```
SELECT t1.ID, t2.NAME, t1.NAME
FROM table t1
LEFT JOIN table t2 ON t2.ID = t1.PID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:09:49.553

你已经成功了一半！

```
SELECT a.ID, p.Name as ParentName, a.Name as ItemName
FROM TableA a LEFT JOIN TableParent p on a.ParentID = p.ID 
```

# mysql - 对我的 MySQL 查询的扩展。需要比较不同行和列的值

> ID：13823822
> 
> 赞同：0
> 
> 时间：2012-12-11T16:05:46.930
> 
> 标签：mysql

这是我的桌子：

![在此处输入图像描述](../Images/d267babfcbeafba68a8f92426d15b09b.png)

我想从中选择代码和编号，这是我的查询的可视化：

![在此处输入图像描述](../Images/489979687042542cf7cbd14f133093b8.png)

这是查询：

```
SELECT Code,Number,(1894 - Limit1) AS spread1,(Limit2 - 1894) AS spread2 
FROM MyTable WHERE Name="John" AND 600>=L1 AND 600<=L2 
AND 1894>=Limit1 AND 1894<=Limit2 
```

如图所示，此查询返回两个值，我只需要一个。所以我应该比较**row1**中的**spread2**和**row2**中的**spread1**并获取更大点差的代码和数量，在这种情况下它是.******`spread2`******

 ******为什么我比较row1中的**spread2和 row2 中的****spread1**是因为它们相互重叠。所以，我正在比较重叠范围内的价差：

![在此处输入图像描述](../Images/9a8651beb45ca4c0739f180cf507ae1c.png)

通过上面的查询，我只能得到**一两行，永远不会更多**。为什么？因为表是这样创建的。如果结果出现一行，我将不需要任何比较，这意味着我只有一个代码和数字。

所以，归根结底，我需要扩展我的查询来做上面提到的事情。

我尝试的是添加：

```
ORDER BY (spread2,spread1) DESC LIMIT 1 
```

而且我确信它不会比较值，因为我想要的是来自同一行的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:01:25.823

解决了！

对于 Value1 = 600 和 Value2 = 1894：

```
SELECT number,code,(spread2)AS spread FROM(SELECT number,code,@curRow := @curRow + 1 AS RowNumber, (1894 - Limit1) AS spread1,(Limit2 - 1894) AS spread2
FROM MyTable JOIN (SELECT @curRow := 0) r WHERE name="John" AND 600>=L1 AND 600<=L2 AND 1894>=Limit1 AND 1894<=Limit2)temp WHERE RowNumber=1
UNION
SELECT number,code,(spread1)AS spread FROM(SELECT number,code,@curRow := @curRow + 1 AS RowNumber, (1894 - Limit1) AS spread1,(Limit2 - 1894) AS spread2
FROM MyTable JOIN (SELECT @curRow := 0) r WHERE name="John" AND 600>=L1 AND 600<=L2 AND 1894>=Limit1 AND 1894<=Limit2)temp WHERE RowNumber=2
ORDER BY spread DESC limit 1 
```

当 Value1 = 950 且 Value2 = 2400 时：

```
SELECT number,code,(spread2)AS spread FROM(SELECT number,code,@curRow := @curRow + 1 AS RowNumber,(2400 - Limit1) AS spread1,(Limit2 - 2400) AS spread2
FROM MyTable JOIN (SELECT @curRow := 0) r WHERE name="John" AND 950>=L1 AND 950<=L2 AND 2400>=Limit1 AND 2400<=Limit2)temp WHERE RowNumber=1
UNION
SELECT number,code,(spread1)AS spread FROM(SELECT number,code,@curRow := @curRow + 1 AS RowNumber,(2400 - Limit1) AS spread1,(Limit2 - 2400) AS spread2
FROM MyTable JOIN (SELECT @curRow := 0) r WHERE name="John" AND 950>=L1 AND 950<=L2 AND 2400>=Limit1 AND 2400<=Limit2)temp WHERE RowNumber=2
ORDER BY spread DESC limit 1 
```

结果当我得到一排时它也有效。******

# mysql - 是否可以在 mysql 子查询中使用 IF？

> ID：13823834
> 
> 赞同：0
> 
> 时间：2012-12-11T16:06:22.313
> 
> 标签：mysql, mysqli

尝试检查名称是否存在（在另一个表中）并在一个步骤中添加到插入查询。我发现如果提交的 empNum 不在用户数据库中，则查询错误：列'lastName'不能为空。可以在子查询中使用 if 语句吗？

```
INSERT INTO Password_Reset (empNum, lastName, fromIP, dateReset)
    VALUES (34567, 
    IF(SELECT COUNT(*) FROM User WHERE empNum = 34567, SELECT lastName FROM User WHERE empNum = 34567, '---'),
    '192.168.1.1',
    NOW()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:36:00.647

您的子查询应该在括号中：

```
IF( (SELECT COUNT(*) FROM User WHERE empNum = 34567), 
    (SELECT lastName FROM User WHERE empNum = 34567), 
 '---'), 
```

您可以通过许多其他方法来执行其他人已经提到的相同操作，但您的版本在添加必需的“（）”后也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:09:37.580

在这种情况下，最好的办法是使用[COALESCE](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)运算符。

```
INSERT INTO Password_Reset (empNum, lastName, fromIP, dateReset)
    VALUES (34567, 
    COALESCE((SELECT COUNT(*) FROM User WHERE empNum = 34567, SELECT lastName FROM User WHERE empNum = 34567), '---'),
    '192.168.1.1',
    NOW()) 
```

可以使用[IF](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)函数，但它会更冗长：

```
INSERT INTO Password_Reset (empNum, lastName, fromIP, dateReset)
    VALUES (34567, 
    IF((SELECT COUNT(*) FROM User WHERE empNum = 34567, SELECT lastName FROM User WHERE empNum = 34567) IS NOT NULL, (SELECT COUNT(*) FROM User WHERE empNum = 34567, SELECT lastName FROM User WHERE empNum = 34567), '---'),
    '192.168.1.1',
    NOW()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:24:36.917

你可以使用一个案例：

```
INSERT INTO Password_Reset (empNum, lastName, fromIP, dateReset)
SELECT 
    34567,
    CASE (EXISTS (SELECT * FROM User WHERE empNum = 34567))
        WHEN 1 THEN (SELECT lastName FROM User WHERE empNum = 34567)
        ELSE '---'
    END,
    '192.168.1.1',
    NOW() 
```

# javascript - jquery textarea 调整宽度和高度

> ID：13823836
> 
> 赞同：0
> 
> 时间：2012-12-11T16:06:26.993
> 
> 标签：javascript, jquery, css

我正在尝试为 Firefox 和 Chrome 创建 jQuery 插件，这将使`textarea`高度和宽度都自动增长。 [这就是我所做](http://jsfiddle.net/8SMMn/)的。

HTML：

```
<div class="textbox">
    <textarea>Some Text</textarea>
</div> 
```

CSS：

```
body, html {
    height: 100%;
    width: 100%;
    padding: 0;
    margin: 0;
}

.textbox {
    position: absolute;
    border: 4px dashed #CCCCCC;
    min-width: 30px;
    padding: 8px;
}

.textbox textarea {
    background: transparent;
    padding: 0;
    margin: 0;
    resize: none;
    font-family: Arial, sans-serif;
    font-size: 60px;
    overflow: hidden;
    width: 100%;
    height: 100%;
    border: none;
    white-space: nowrap;
}

.hiddendiv {
    display: none;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
} 
```

JS：

```
$(function() {
    $.fn.textbox = function(options) {
        options = options || {};

        var maxWidth = options.maxWidth || $(window).width(),
            maxHeight = options.maxHeight || $(window).height();

        this.each(function() {
            var elem = $(this),
                clone = $("<div class='hiddendiv'></div>").appendTo("body"),
                textarea = elem.find("textarea"),
                content = "";

            function setMaxSize() {
                var widthSpace = elem.outerWidth(true) - elem.width();
                var heightSpace = elem.outerHeight(true) - elem.height();
                var newMax = {
                    "max-width": maxWidth - widthSpace,
                    "max-height": maxHeight - heightSpace
                };

                elem.css(newMax);
                clone.css(newMax);
            }

            function adjust() {
                clone.css({
                    "font-family": textarea.css("font-family"),
                    "font-size": textarea.css("font-size")
                });

                content = textarea.val().replace(/\n/g, '<br>&nbsp;');
                if (content === "") {
                    content = "&nbsp;";
                }

                clone.html(content);

                elem.css({
                    height: clone.height(),
                    width: clone.width() + 5
                });
            }
            textarea.on("keyup", adjust);

            setMaxSize();
            adjust();

        });
    };

    $(".textbox").textbox();
}); 
```

我有几个问题：

1.  每当我输入一个字母并展开框时，只有在 Firefox 中我才会奇怪地闪烁。我怎样才能摆脱这种眨眼？
2.  在 Chrome 中，当我键入一个字母时，第一个字母会向后移动，然后返回到它的位置。我怎样才能防止这种情况？
3.  在 Chrome 中，每当我输入一个长词时，例如“Sdfsdfsdfwejhrkjsdhfsdf”，文本在达到最大宽度时不会换行，而是会出现一个新行。我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:47:23.033

您可以在元素上使用 css 过渡`.textbox`，即：`transition: all 0.5s;`

# .net - 程序集重新编译和程序集加载问题

> ID：13823838
> 
> 赞同：2
> 
> 时间：2012-12-11T16:06:46.573
> 
> 标签：.net, .net-assembly, ilasm, ildasm

我有一个可执行文件 (Foo.exe) 和一个库 Bar.dll。两个二进制文件都**没有**强名称签名。Bar.dll 库依赖于可执行文件，并以如下方式在其清单中指定：

```
<dependency>
    <dependentAssembly dependencyType="install" allowDelayedBinding="true" codebase="Foo.exe" size="334336">
      <assemblyIdentity name="Foo" version="1.2.3.4" language="neutral" processorArchitecture="msil" />
    </dependentAssembly>
</dependency> 
```

我使用 ildasm 和 ilasm 从 Foo.exe -> msil -> Foo.exe 进行往返。使用 ildasm 进行反编译会生成单个 .il 文件、.res 文件和多个 .resources 文件。我以这种方式重新编译应用程序：

```
ilasm Foo.il /resource=Foo.res 
```

重新编译后，应用程序工作并可以启动。现在的问题是依赖于可执行文件的库 Bar.dll 在重新编译后无法加载它（Foo.exe 可执行文件）。这是融合日志给我的：

```
 *** Assembly Binder Log Entry  (11/12/2012 @ 5:00:38 PM) ***

The operation failed.
Bind result: hr = 0x8013101b. No description available.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
Running under executable  C:\Program Files (x86)\SomeApplication\Something.EXE
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = Bartek-W7\Bartek
LOG: DisplayName = Bar, Version=1.2.3.4, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Program Files (x86)/FooBar
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = NULL
Calling assembly : Bar, Version=1.2.3.4, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Application configurtion file not found.
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Program Files (x86)/FooBar/Foo.dll
LOG: Attempting download of new URL file:///C:/Program Files (x86)/FooBar/Foo/Foo.dll
LOG: Attempting download of new URL file:///C:/Program Files (x86)/FooBar/Foo.exe
LOG: Assembly download was successful. Attempting setup of file: C:/Program Files (x86)/FooBar/Foo.exe
LOG: Entering download cache setup phase.
ERR: Error extracting manifest import from file (hr = 0x8013101b).
ERR: Setup failed with hr = 0x8013101b.
ERR: Failed to complete setup of assembly (hr = 0x8013101b). Probing terminated. 
```

现在在重新编译之前，文件加载成功，融合日志中的唯一区别是最后 4 行：

```
LOG: set name: Foo, Version=1.2.3.4, Culture=neutral, PublicKeyToken=null
WARNING: found a duplicate set during cache setup
LOG: Bind successful.
LOG: Bind is in default load context. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:07:55.390

> ERR：从文件中提取清单导入时出错（hr = 0x8013101b）

错误代码 8013101b 是 COR_E_NEWER_RUNTIME。换句话说，程序集需要比实际加载的版本更新的 CLR 版本。对此有一个非常简单的解释，您可能使用了错误版本的 ilasm.exe。版本 4 而不是版本 2。

请务必使用 C:\Windows\Microsoft.NET\Framework\v2.0.50727\ilasm.exe，而不是 v4.0.30319 中的那个

# c# - 防止使用 SDK 2.0 在 Word 文档中编辑段落

> ID：13823840
> 
> 赞同：1
> 
> 时间：2012-12-11T16:07:00.173
> 
> 标签：c#, asp.net, openxml-sdk

我 `Open XML SDK`用来为用户将下载的每个文档添加一个序列号。

这是代码：

```
public static void OpenAndAddTextToWordDocument(string filepath, string txt)
{
    // Open a WordprocessingDocument for editing using the filepath.
    WordprocessingDocument wordprocessingDocument = WordprocessingDocument.Open(filepath, true);

    // Assign a reference to the existing document body.
    Body body = wordprocessingDocument.MainDocumentPart.Document.Body;

    // Add new text.
    Paragraph para = body.AppendChild(new Paragraph());

    Run run = para.AppendChild(new Run());
    run.AppendChild(new Text(txt));

    DocumentWatermarkTest.AddWaterMark(wordprocessingDocument);

    // Close the handle explicitly.
    wordprocessingDocument.Close();
}
protected void Button1_Click1(object sender, EventArgs e)
{
    string strDoc = @"C:\Users\xxx\Desktop\2138-1.doc";
    string strTxt = "Serial number: 23jl4hk52345h32jkl";
    OpenAndAddTextToWordDocument(strDoc, strTxt);
} 
```

现在我需要防止用户在打开文档时删除序列号。

我在 Open XML SDK 2.0 FAQ 中阅读：

> Open XML SDK 仅支持保护文档的功能，例如防止在 UI 中编辑工作表

但是，它并没有解释你是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:08:47.660

您可以通过 Microsoft Word 中的“开发人员”选项卡创建内容占位符（标签）。在此标签的属性中，您可以限制用户“无法编辑内容”和“无法删除内容控制”。现在，您可以通过编程方式使用其标签名称访问此内容占位符，并将您的序列号放入其中。

# javascript - jQuery - 跨窗口通信（弹出选择文件，无服务器端）

> ID：13823843
> 
> 赞同：1
> 
> 时间：2012-12-11T16:07:12.913
> 
> 标签：javascript, jquery, popup, picker, cross-window-scripting

我有一个使用 jQuery 的离线网页。我希望它读取用户选择的文件（或多个文件）。我希望将文件选择器显示在另一个浏览器窗口中，这会将数据发送回原始窗口。

所以：

1.  在原始窗口中有一个“选择文件”按钮。
2.  新窗口打开，允许用户在表单中选择文件。用户单击“确定”，窗口关闭，并以某种方式将有关所选文件的数据发送到原始窗口。
3.  处理已接收的数据（并触发事件）。

我设法找到的是： [http ://www.sfpeter.com/2008/03/communication-between-browser-windows-with-jquery-my-new-plugin/](http://www.sfpeter.com/2008/03/communication-between-browser-windows-with-jquery-my-new-plugin/)

然而，这似乎相当陈旧 - 你知道任何更新更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:11:40.607

检查您发布的链接中的底部评论（由文章作者发布）：

> 我自己不再使用它，但如果有需求，可能会进行新的修订。自从我编写了这个插件以来，已经开发了一个新的 HTML5 功能，它实际上会使这变得更加容易：[postMessage API（链接在这里）](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。但是我不知道在 IE7 或 IE8 等旧版浏览器中该功能的支持情况如何。我会重写我的插件以默认使用 postMessage API，但如有必要，我会使用我的旧方法。
> 
> 这个 API 的语法和我的很相似。根据您需要哪种浏览器支持，postMessage API 可能就是您所需要的。

也许这会有所帮助。

# objective-c - 通过 Cordova 插件从 Objective-C 调用 Javascript

> ID：13823844
> 
> 赞同：5
> 
> 时间：2012-12-11T16:07:15.773
> 
> 标签：objective-c, ios, cordova, sencha-touch

我正在开发一个使用 Phonegap (cordova 2.0.0) 的 iPad 应用程序项目。

我知道如何编写插件，以便可以从 javascript 调用本机方法，但我现在真正需要的是能够通过插件从我的本机代码调用 Javascript 方法。就像是：

```
- (void) callTestJsFunction
{
    [super writeJavascript:@"testJsFunction();"];
} 
```

这将调用`testJsFunction()`位于文件`www`夹中我的一个 JS 文件中的 a 。我们正在使用 Sencha Touch 来处理一些逻辑，我需要从`app.js`.

我在网上找不到任何此类示例，所以首先我想知道是否可以做这样的事情？如果是这样，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-10T00:24:55.840

您必须创建一个插件并将本机代码放在那里，而不是在 AppDelegate.m 中使用它。

从插件类你可以这样做：

`NSString* jsString = [NSString stringWithFormat:@"myJSFunction(\"%@\");", stringParameter]; [self.webView stringByEvaluatingJavaScriptFromString:jsString];`

[Phonegap Cordova 从 Objective-C 调用 javascript 函数](https://stackoverflow.com/questions/17748631/phonegap-cordova-call-javascript-functions-from-objective-c)

# asp.net - 用户代码未处理 IOE 异常

> ID：13823845
> 
> 赞同：0
> 
> 时间：2012-12-11T16:07:23.520
> 
> 标签：asp.net, soap, sugarcrm

我得到了这个例外

## **用户代码未处理 IOE 异常**

**无法从传输连接读取数据：连接已关闭。**

对于这一行代码：

```
 //Try to authenticate
  SugarCRM.entry_value LoginResult = SugarClient.login(UserAuth, "SoapTest", LoginList); 
```

[点击这里](http://support.sugarcrm.com/04_Find_Answers/03_Developers/100Web_Services/100Soap_API/100Examples/100CSharp/Logging_In_-_SOAP_and_C%23)查看完整代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:47:22.280

遇到问题了。我没有提供我配置的 AMP 帐户的正确 url。由于它抛出错误并且我没有处理它，所以我得到了那个异常。

因此，如果遇到此类异常，请确保正确检查所有三个参数 Username、Password 和 InstanceUrl。

# advantage-database-server - 使用 Clipper 在数据字典中创建索引

> ID：13823846
> 
> 赞同：0
> 
> 时间：2012-12-11T16:07:24.310
> 
> 标签：advantage-database-server, data-dictionary, clipper

我正在将现有的 Clipper 代码从免费表转换为数据字典。我可以读写表，但不能创建索引。

这是代码：

```
connSaisie := DacSession():new(GetSsoConnection(1))
connSaisie:SetDefault()
DbeInfo( COMPONENT_DATA, ADSDBE_RIGHTS_MODE, ADSDBE_CHECKRIGHTS  )
DbeInfo( COMPONENT_DATA, ADSDBE_LOCK_MODE, ADSDBE_PROPRIETARY_LOCKING )
DbeInfo( COMPONENT_DATA , ADSDBE_TBL_MODE, ADSDBE_CDX )
DbeInfo( COMPONENT_ORDER, ADSDBE_TBL_MODE, ADSDBE_CDX )

DBUSEAREA (.F., , "Nomencla", connSaisie, .F., .F.)  
cTag:="SEBTAG"
SELECT Nomencla
Index on Code_nomen + Padl(Alltrim(Nom_champ1), 5, "0") +;
Padl(Alltrim(Nom_champ2), 4, "0") +;
Padl(Alltrim(Nom_champ3), 3, "0") TAG (cTag)

Set Order to TAG (cTag) 
```

该`(GetSsoConnection(1))`语法负责检索正确的连接字符串。

问题是索引已创建但在可执行目录中，而不是为数据字典定义的数据库或临时文件夹中。

我期待任何帮助或指示，并且非常愿意提供一个 sql 脚本来创建一个示例表来重现该问题。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:58:07.253

我认为您需要命令的`TO`子句，`INDEX ON`以指定创建索引的目录（而不仅仅是命令的名称）。我没有尝试过，因为我没有 Clipper（尽管我可能能够在工作中挖掘它:-)）。

此页面建议可以更改目录： [http](http://www.itlnet.net/programming/program/reference/c53g01c/ngcc94d.html) ://www.itlnet.net/programming/program/reference/c53g01c/ngcc94d.html （适用于 Clipper 5.3）

```
INDEX ON <expKey> TAG <cOrderName> TO <cOrderBagName> 
```

但是，它并没有说明您如何在`TO`子句中实际指定目录。

[此页面](http://objectmix.com/clipper/507967-trying-compile-program-lfn-lib-support-clipper.html)包含“INDEX ON ID TO (cFileName)”行，所以我认为您可以这样做`INDEX ON blah TAG (cTag) TO ("d:\example\SEBTAG")`（也许需要文件扩展名）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T16:35:46.710

如果我没记错的话，Advantage Clipper 库仅使用数据字典作为 AIS（Advantage Internet Server）通信的身份验证机制，但是表是在字典之外打开的。

在这种情况下，我不相信 Clipper 对数据字典中的任何默认设置等有任何了解。

您是在使用 Clipper，还是在使用支持 Clipper 语法但生成 32 位应用程序的众多其他语言中的一种？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:12:10.520

感谢您的帮助，但我已经通过删除所有这些调用并用永久索引替换它们来解决（或者更确切地说是规避）了这个问题。

再次感谢您的意见。

# html - 需要滚动时，CSS 下拉菜单在 iPad 上不起作用

> ID：13823849
> 
> 赞同：3
> 
> 时间：2012-12-11T16:07:33.200
> 
> 标签：html, css, ipad, drop-down-menu

我有一个带有 mouseout 和 mouseover 事件的 CSS 下拉菜单。在 iPad 或 iPhone 上，菜单在滚动时会自动关闭，并且拒绝打开任何链接，除非菜单足够短而无法滚动。谁能想到解决办法？

[http://willosteen.com/flvec/index_ipad.html](http://willosteen.com/flvec/index_ipad.html)

“选择县”列表无法正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:24:39.917

这是我找到的最简单的解决方案。在您的 span、li 或 anchor 中添加以下行会使 iPad 在 mac 上表现得像 safari，然后单击打开下拉菜单

```
onClick="return true" 
```

在这里查看它的实际效果 - [http://www.naturalsal.it/](http://www.naturalsal.it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:03:07.997

你可以让它成为触摸设备的点击下拉菜单并保持花哨的风格。

# javascript - 如何在 Notepad++ 插件中创建 JSLint 忽略注释块

> ID：13823851
> 
> 赞同：1
> 
> 时间：2012-12-11T16:07:45.310
> 
> 标签：javascript, plugins, notepad++, jslint

我一直在尝试许多不同的变体，并开始对 JavaScript Lint 和 JSLint 建议的参数感到非常困惑。

我想做的就是忽略“开始”和“结束”块之间的“linting”过程中的代码。就像是：

```
/*jslint ignore start */
var initializing = false,
    fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;
/*jslint ignore end */ 
```

但这不幸在 Notepad++ 控制台中触发了这个 JSLint 错误：

**意外的“忽略”。**

在 Notepad++ 中为 JSLint 插件编写忽略代码块的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T14:26:43.837

没有像您建议的那样忽略语法，但是您可以做的是临时修改单个 jslint 设置。

例如：

> ```
> /*jslint sloppy:true*/
> ...
> /*jslint sloppy:false*/ 
> ```

# c# - 在构造函数中使用线程异常和应用程序域未处理的异常

> ID：13823852
> 
> 赞同：0
> 
> 时间：2012-12-11T16:07:48.687
> 
> 标签：c#, winforms, inheritance, exception-handling

我以前使用过`Application.ThreadException`，`AppDomain.CurrentDomain.UnhandledException`但通常我只将它用于单个表单。所以通常我会使用`Main`in `Program.cs`。

```
try {
    AppDomain.CurrentDomain.UnhandledException += (sender, e) => .Handle(sender, (Exception)e.ExceptionObject);
    Application.ThreadException += (sender, e) => ExceptionHandler.Handle(sender, e.Exception);
    Application.Run(ApplicationBase);
} catch (Exception ex) {
    MessageBox.Show("Handled Exception");
} 
```

然而，在我的新情况下，我有许多用于当前项目的表单，其中一个基本表单是其他表单继承的。

我想要做的是处理从基本形式的代码中以派生形式抛出的异常 - 我将上面的代码放入我的基本构造函数中，希望我可以这样做，但是当出现异常时，它不会击中事件。

为什么我不能在构造函数和任何替代方案中这样做？

**注意：**我之前问过这个问题，`Vb.net`而不是`C#`删除了我之前的问题并重构了我的代码，以便我可以得到`C#`答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:10:29.117

这些事件是全球事件；它们与个别形式无关。

您可以保留当前代码`Main()`，它可以在多种表单中正常工作。（除非你有多个 UI 线程）

# javascript - javascript 检查时间并显示消息

> ID：13823856
> 
> 赞同：0
> 
> 时间：2012-12-11T16:07:59.137
> 
> 标签：javascript, conditional-statements

如何检索`Date`对象的小时和分钟，然后显示消息？如果时间在晚上 9 点到凌晨 12 点之间，我想显示“We are closed”，否则我想显示“We are open”。

```
<script language="javascript"> 
<!-- 
    today = new Date();
    document.write('<BR>We are Open');
//--> 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:13:35.617

我不确定我的“时间逻辑”是否正确（检查 if 语句），但这应该是你要找的。

```
var objDate = new Date();
var hours = objDate.getHours();
if(hours >= 12 && hours <= 21){
    document.write('We Are Closed');
}
else{
    document.write('We are Open');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:09:40.253

`today`是 a `Date`，所以你可以使用它的功能。在您的情况下，使用`today.getHours()`并检查它是否是`>= 12`并`< 21`显示打开的消息。关闭的消息可以出现在`else`.

请注意，这会使用客户的时间，因此如果您在全球网页上使用它，那么您可能会在欧洲打开，但同时在美国关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:10:40.260

您可以使用以下方法获取日期后的分钟和小时数：

```
var d = new Date();
    var m = d.getMinutes();
    var h = d.getHours(); 
```

使用以下条件比较您的 var h 并获得所需的结果：

```
if(h>= 12 && h<= 21) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:13:52.020

我通常使用这种解决方案，我只是为了知识而发布（pimvdb的答案确实更清楚）

```
var d = new Date();
var currtime = d.getHours() * 100 + d.getMinutes();

// now your currtime looks like 530 if it's 5.30am, or 1730 if it's 5.30 pm
// you can just do a simple comparison between ints

if (currtime > 2000 and currtime < 800){
    // closed between 20:00 (8 pm) and 8:00 (8 am) as an example
    alert("We are closed");
} 
```

您基本上将您的时间转换为整数，使比较更容易（因此不那么可读和可维护）

# php - php - 转义字符串

> ID：13823871
> 
> 赞同：0
> 
> 时间：2012-12-11T16:08:53.830
> 
> 标签：php, escaping, newline

我正忙于一个必须以不同语言工作的 PHP 项目，所以我制作了一个系统，其中包含从文件中读取的字符串，但是当我想读取这样的文件时：

用户名/\n 密码错误

它显示 \n 而不是将其转义到换行符。我怎样才能让 PHP 做到这一点？

已经超过了，DirkWillem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:13:56.050

这可能是因为您已将字符串封装在单引号`'`中。您必须将字符串封装在双引号`"`中才能`\n`正常工作。

例子：

[http://codepad.viper-7.com/Fr4SHH](http://codepad.viper-7.com/Fr4SHH)

请注意，我在网页上显示时使用该功能`nl2br`替换`\n`to 。`<br />`但是您可以看到，在第一个字符串中，`\n`只是简单地打印为字符串，但`\n`确实在第二个字符串中被解析。

这是因为 PHP 将`\n`其视为某种变量。并且变量仅适用于带有双引号的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:39:22.717

考虑使用合适的存储格式，而不是您自己创建的格式。base64_encode() 或 json_encode() 将是不错的选择。

但是，要解决您眼前的问题，只需使用 str_replace()

```
$new = str_replace('\n', "\n", $str); 
```

# typescript - 在构造函数之外扩展属性形式

> ID：13823873
> 
> 赞同：0
> 
> 时间：2012-12-11T16:09:01.393
> 
> 标签：typescript

假设我有这样的事情：

```
interface Scope extends ng.Scope {
   getMeSome(id:string):number[];
}
export class AwesomeController {
    constructor (public $scope:Scope) {
       $scope.getMeSome = id => this.getMeSome(id);
    }
    getMeSome(id:string){
      console.log('Alright... alright... here it is'); 
    }
} 
```

现在你可以看到我在 3 个不同的地方有相同的方法签名。当然，我可以把它剪掉一点，然后在构造函数中执行它：

```
constructor (public $scope:Scope) {
   $scope.getMeSome = id => {
      console.log('Alright... alright... here it is'); 
   };
} 
```

但这会像使用类固醇一样打击构造函数的身体（如果您有数十种不同的方法）。所以我想知道为什么我不能做这样的事情：

```
export class AwesomeController {
   constructor (public $scope:Scope) { }

   $scope.getMeSome(id:string) { // Can't extend $scope here, although I can do that in the constructor
      console.log('Alright... alright... here it is'); 
   }
} 
```

为什么这不起作用？有什么让它更性感的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:22:27.697

据我所知，在类中（与模块不同），您是在*定义*类，而不是*在运行*类，因此您不能在类的主体中进行任何分配（与方法主体相反）。所以这个语法不起作用：

```
export class AwesomeController {
    constructor (public $scope:Scope) {}
    $scope.getMeSome = id => {
      console.log('Alright... alright... here it is'); 
    }
} 
```

你也只是定义了*这个*类的方法，而不是其他类的方法，所以你上面的语法也不起作用，因为它在你期望的地方与另一个类的方法混在一起定义你自己的：

```
export class AwesomeController {
    constructor (public $scope:Scope) {}
    $scope.getMeSome(id:string) => {
      console.log('Alright... alright... here it is'); 
    }
} 
```

我认为你只需要按照你提出的前两种方式之一来做——这两种方式对我来说都很好。

# overflow - 边界半径、Z-index、溢出中断

> ID：13823875
> 
> 赞同：2
> 
> 时间：2012-12-11T16:09:05.830
> 
> 标签：overflow, z-index, css, css-position

我有两个`border-radius`设置为 max 的 div 以使它们成为圆形。我在第一个圆圈中有一个不同的标题 div，`background-color`因此`overflow:hidden`看起来圆圈的顶部是不同的颜色。

第二个圈子我想在第一个圈子下面，基本上达到顶峰。问题是，一旦我设置`position:relative`（或其他任何东西），Chrome 和 Safari 的标题背景颜色就会溢出。

这应该是可行的。帮助？想法？

*   [红色应该在绿色之后](http://live.bluefantail.com/demo.html)。
*   [标题应该被溢出部分隐藏](http://live.bluefantail.com/demo-2.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:37:10.317

我想这有点'你在找什么。

[http://codepen.io/AntonNiklasson/pen/kxwFB](http://codepen.io/AntonNiklasson/pen/kxwFB)

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:37:24.763

只需尝试在大圆圈周围放置另一个 DIV 并在其上设置 position:relative 和 z-index 。

# uitableview - iPhone 5 上的静态 UITableView

> ID：13823878
> 
> 赞同：0
> 
> 时间：2012-12-11T16:09:09.223
> 
> 标签：uitableview, height, iphone-5, autolayout

我的应用程序的主屏幕是一个带有一些选项的静态表格视图。对于新的 iPhone 5，我必须处理屏幕底部的额外空间：我想根据屏幕尺寸增加单元格的高度，并因此缩放其中的标签字体大小。有没有办法只使用自动布局来做到这一点？如果不是，哪个是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:13:17.073

我认为为 iPhone 5 分辨率拉伸表格视图的单元格不是一个好习惯。他们给你更多像素的原因是用户可以看到更多的屏幕。

如果您坚持这样做，您可以在表格视图委托方法中设置行高，检查屏幕高度以查看它是否为 568 点（iPhone 5 高度），使用`[[UIScreen mainScreen] bounds].size.height`：

```
// sets the height for a row based on indexPath
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    // check if the iPhone 5 is used by using the screen height
    BOOL isIPhone5Used = ([[UIScreen mainScreen] bounds].size.height == 568.0f);

    // set the height to a larger number for iPhone 5 rows
    return (isIPhone5Used ? 50.0f : 44.0f); // this sets a height of 50 for iPhone 5 rows, and 44 for all other iPhones

} 
```

`indexPath`如果对不同的行使用不同的高度，则应根据 对其进行自定义。或者，如果所有行的高度相同，则返回一个值。

# ember-data - Ember-data - 获取模型的哈希值

> ID：13823885
> 
> 赞同：0
> 
> 时间：2012-12-11T16:09:26.633
> 
> 标签：ember-data

这可能是一个常见问题，但如何从 Ember.Data 模型中获取不透明哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:29:24.507

这取决于您当时的 Ember 版本。最近发生了很多变化，但它应该是这三种方法之一：

```
object = App.MyModel.find(1)

object.toString()
object.toData()
object.serialize() //latest version 
```

# c - c，将结构作为参数传递

> ID：13823886
> 
> 赞同：2
> 
> 时间：2012-12-11T16:09:32.750
> 
> 标签：c, struct

我需要像这样传递一些结构作为函数参数

```
void myFunc(unsigned char c); 
```

我会用`myFunc(4)`，`myFunc(8)`左右。

现在该函数接受一个结构作为参数，所以我尝试了

```
typedef struct {
    unsigned char address;
    unsigned char command;
    unsigned char group;
    unsigned char response;
    unsigned char flags1;
    unsigned char flags2;
}test_t;

void myFunc(test_t test);

myFucn({0,0,0,0,0}); // but this gives me error 
```

如何将 const struct 作为参数传递而不必先实例化？就像 myFunc(4) 作为 unsigned char 一样。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:11:41.020

在 C99 中，您可以使用[复合文字](http://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html)：

```
myFunc((test_t) { 0, 0, 0, 0, 0 }); 
```

当然，由于结构是按值传递的，因此您是否认为它是“const”并不重要。无论函数对它做什么，对外部来说都无关紧要。

在以前的 C 版本中，您不能这样做。

# vb.net - 神秘空参考

> ID：13823891
> 
> 赞同：0
> 
> 时间：2012-12-11T16:09:37.790
> 
> 标签：vb.net

```
Imports System.IO
Imports System

Public Class Form1

    Private Class movie
        Public name As String
        Public actors() As String
        Public year As String
        Public country As String
        Public votes As String

    End Class

    Private movies(0) As movie
    Private fs As FileStream
    Private input As StreamReader

    Private Sub LoadToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles LoadToolStripMenuItem.Click
        OpenFileDialog1.ShowDialog()
        Dim i As Integer = 0

        Dim currentmv As New movie
        Dim reader As String()

        If File.Exists(OpenFileDialog1.FileName) Then

            lblPath.Text = OpenFileDialog1.FileName
            Dim iFile As New StreamReader(lblPath.Text)

            While Not iFile.EndOfStream

                reader = iFile.ReadLine.Split(";")

                currentmv.name = reader(0)
                currentmv.actors = reader(1).Split(",")
                currentmv.year = reader(2)
                currentmv.country = reader(3)
                currentmv.votes = reader(4)

                lbMovies.Items.Add(currentmv.name)

                movies(i) = currentmv

                i = i + 1
                ReDim movies(i)

            End While
        End If

    End Sub

    Private Sub lbMovies_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles lbMovies.SelectedIndexChanged
        Dim i As Integer

        For i = 0 To movies(lbMovies.SelectedIndex).actors.Length

            lbActors.Items.Add(movies(lbMovies.SelectedIndex).actors(i))

        Next

    End Sub
End Class 
```

当我请求长度时，问题就来了。它说这是一个空引用，但我看不出有任何错误。当我请求对象数组中的数组长度时是否有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:17:38.457

尝试

```
ReDim Preserve movies(i) 
```

IIRC`ReDim`会将所有元素初始化为`Nothing`without `Preserve`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:41:23.557

不需要使用数组来存储您的数据并将它们的“名称”存储在列表框中。列表框不存储`String`，但是`Object`。您可以将数据存储在列表框本身内。

```
Private Class Data
    Public SomeNumber As Integer
    Public SomeString As String
    Public Overrides Function ToString() As String
        Return String.Format("{0} ({1})", SomeString, SomeNumber)
    End Function
End Class

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    ListBox1.Items.Add(New Data With {.SomeString = "John", .SomeNumber = 12})
    ListBox1.Items.Add(New Data With {.SomeString = "Paul", .SomeNumber = 36})
    ListBox1.Items.Add(New Data With {.SomeString = "Ringo", .SomeNumber = 48})

End Sub

Private Sub ListBox1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ListBox1.SelectedIndexChanged
    Dim d As Data = DirectCast(sender, ListBox).SelectedItem
    If d IsNot Nothing Then
        Console.WriteLine(d.ToString)
    End If
End Sub 
```

**或者**您将数据存储在列表中并将`bind`其存储到您的列表框中：

```
Private Class Data
    Public SomeNumber As Integer
    Public SomeString As String
    Public Overrides Function ToString() As String
        Return String.Format("{0} ({1})", SomeString, SomeNumber)
    End Function
End Class

Private datalist As New List(Of Data)

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    datalist.Add(New Data With {.SomeString = "John", .SomeNumber = 12})
    datalist.Add(New Data With {.SomeString = "Paul", .SomeNumber = 36})
    datalist.Add(New Data With {.SomeString = "Ringo", .SomeNumber = 48})

    ListBox1.DataSource = datalist

End Sub

Private Sub ListBox1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ListBox1.SelectedIndexChanged
    Dim d As Data = DirectCast(sender, ListBox).SelectedItem
    If d IsNot Nothing Then
        Console.WriteLine(d.ToString)
    End If
End Sub 
```

# jquery - 如何在单击 div 时为正在运行的函数添加延迟

> ID：13823899
> 
> 赞同：1
> 
> 时间：2012-12-11T16:09:53.727
> 
> 标签：jquery, delay

我有一个名为 autoSlide 的函数，它可以为 div 的边距设置动画，以将图像精灵显示到 img 标记中

```
function marginCalc(){
        var getmargin = parseInt($("#scrollimage").css('margin-left'));
        var usemargin =  -1350 ;
        var increment= getmargin+usemargin;
        if(increment <= -2750)
        {
        $("#scrollimage").animate({'margin-left':0},1000);
        }
        else{
        $('#scrollimage').animate({'margin-left': ++increment},1000);
        }
    }
function autoSlide(){
        setInterval(function() {
        marginCalc();
        }, 5000);
        } 
```

当单击 div 时，它会重置边距以显示相应的图像

```
 $(document).ready(function(){

        $("#Image1").click(function(){
                $("#scrollimage").animate({'margin-left':0});
        });

        $("#Image2").click(function(){
                $("#scrollimage").animate({'margin-left':-1350});
        });

       autoSlide();

       }); 
```

我的问题是，当单击 div 时，它会滚动回相应的图像，但 autoSlide 功能继续运行，我想在单击 div 后停止 3 秒以供用户查看图像，然后再次继续运行 autoSlide 功能从那里。

如何实现这一点。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:11:04.223

超时的简单演示：
[DEMO](http://jsfiddle.net/czf6m/)
试试这个：

```
$(document).ready(function(){

        $("#Image1").click(function(){
                $("#scrollimage").animate({'margin-left':0});
        });

        $("#Image2").click(function(){
                $("#scrollimage").animate({'margin-left':-1350});
        });

    var timeout;
    if(timeout) {
      clearTimeout(timeout);
      timeout = null;
    }

    timeout = setTimeout( autoSlide, 3000);

       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:03:15.590

答案是这个

```
 function marginCalc(){
            var getmargin = parseInt($("#scrollimage").css('margin-left'));
            var usemargin =  -1350 ;
            var increment= getmargin+usemargin;
            if(increment <= -2750)
            {
            $("#scrollimage").animate({'margin-left':0},1000);
            }
            else{
            $('#scrollimage').animate({'margin-left': ++increment},1000);
            }
        }

$(document).ready(function(){
        var autoslide = setInterval(marginCalc,5000);

        $("#Image1").click(function(){
                 clearInterval(autoSlide);
                $("#scrollimage").animate({'margin-left':0}).delay(3000);
                 autoslide = setInterval(marginCalc,5000);
        });

        $("#Image2").click(function(){
                clearInterval(autoSlide);
                $("#scrollimage").animate({'margin-left':-1350}).delay(3000);
                autoslide = setInterval(marginCalc,5000);
        });

       }); 
```

# mysql - 如何使用 Ebean 和 mysql 获取超过 100000 行

> ID：13823900
> 
> 赞同：2
> 
> 时间：2012-12-11T16:09:54.480
> 
> 标签：mysql, playframework-2.0, ebean

在我的 Company 表中，我有 200 万行要获取并执行一些操作。我编写了一个服务类和一个提取 id 的方法。但默认情况下它只获取 100000 行。我查看了 Ebean 文档，但我找不到原因。

**简化的服务类：**

```
public static List<Long> getAllIds(){   

    String sql = "select distinct c.id from Company c where c.state='PUBLISHED'";
    List<SqlRow> sqlRows =
            Ebean.createSqlQuery(sql).findList();

    Logger.info("Rows: "+sqlRows.size());               

    return new ArrayList<Long>(0);
} 
```

**给我：**

```
Rows: 100000 
```

为什么？我该如何解决这个问题？获取时我不想要限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:24:35.510

看来您可以通过调用[setMaxRows](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/SqlQuery.html#setMaxRows%28int%29)方法来设置返回的最大结果。您使用的数字可能需要从另一个查询中获取，该查询获取该表中的行数。

未经测试...

```
public static List<Long> getAllIds(){   

    String sql = "select distinct c.id from Company c where c.state='PUBLISHED'";
    SqlQuery sqlQuery = Ebean.createSqlQuery(sql);    
    sqlQuery.setMaxRows(3000000);
    List<SqlRow> sqlRows = sqlQuery.findList();

    Logger.info("Rows: "+sqlRows.size());               

    return new ArrayList<Long>(0);
} 
```

# c# - asp:DropDownList 会是安全威胁吗？

> ID：13823901
> 
> 赞同：1
> 
> 时间：2012-12-11T16:09:56.687
> 
> 标签：c#, asp.net, security, drop-down-menu, postback

这个问题是关于安全威胁的。我想知道下面的用法可以在客户端更改 DropDownList 选择的值并影响服务器端吗？

这里的用法（aspx定义）

```
 <asp:DropDownList AutoPostBack="true" ID="dropDownListDrawingArtists" CssClass="DropDownArtists"
                runat="server">
  </asp:DropDownList> 
```

服务器端填充

```
 if (IsPostBack == false)
    {
        if (srLang == "tr")
        {
            dropDownListDrawingArtists.Items.Add("Çizen Artist Filtresi: Bütün Çizen Artistler");
        }
        else
        {
            dropDownListDrawingArtists.Items.Add("Drawing Artist Filter: All Drawing Artists");
        }

        DataSet dsDrawingArtists = DbConnection.db_Select_Query("select DrawingArtist,COUNT(PokemonId) as Pokecount from tblPokedex group by DrawingArtist order by Pokecount desc,DrawingArtist asc");

        for (int i = 0; i < dsDrawingArtists.Tables[0].Rows.Count; i++)
        {
            dropDownListDrawingArtists.Items.Add(dsDrawingArtists.Tables[0].Rows[i]["DrawingArtist"].ToString());
        }

        if (Session["FilterByArtist"] != null)
        {
            dropDownListDrawingArtists.SelectedIndex = Convert.ToInt32(Session["FilterByArtist"].ToString());
        }
    } 
```

以及回发时的最终用法

```
 if (dropDownListDrawingArtists.SelectedIndex > 0)
    {
        srFilterByDrawingArtist = " and DrawingArtist='" + dropDownListDrawingArtists.SelectedItem.ToString() + "'";
        Session["FilterByArtist"] = dropDownListDrawingArtists.SelectedIndex.ToString();
    } 
```

如您所见，我直接在 SQL 查询中使用它。我在谷歌浏览器上测试了自己。更改了 dropDownListDrawingArtists 的值并进行了回发。服务器端的值没有受到影响。只是要确定

感谢您的回答

ASP.NET 4.0 C# 4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:17:01.753

目前是否可行无关紧要。您仍然应该使用[参数化查询](http://www.mindfiresolutions.com/How-to-use-parameterized-queries-in-ASPNet-174.php)而不是连接字符串。

其原因与 OWASP 将字符转义定义为与参数化查询和参数化存储过程相比“弱”，以及为什么[白名单优于黑名单的](http://www.schneier.com/blog/archives/2011/01/whitelisting_vs.html)原因相同。

从[OWASP 备忘单到防止 SQL 注入](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet#Defense_Option_3%3a_Escaping_All_User_Supplied_Input)：

> 第三种技术是在将用户输入放入查询之前对其进行转义。如果您担心将动态查询重写为准备好的语句或存储过程可能会破坏您的应用程序或对性能产生不利影响，那么这可能是您的最佳方法。**但是，与使用参数化查询（强调我的）相比，这种方法是脆弱的**，我们不能保证它会在所有情况下阻止所有 SQL 注入。仅应谨慎使用此技术以具有成本效益的方式改造遗留代码。从头开始构建的应用程序或需要低风险容忍度的应用程序应该使用参数化查询来构建或重写。

它脆弱的***原因***是有人总是在寻找一种新的方法来利用任何潜在的漏洞。今天可以防止篡改的方法明天可能会被规避。

* * *

也就是说，目前，ViewState 保护为此提供了保护。如果有人篡改了列表，他们通常会得到一个自动生成的“Invalid Viewstate”错误，并且代码不会处理。

[http://msdn.microsoft.com/en-us/magazine/ff797918.aspx](http://msdn.microsoft.com/en-us/magazine/ff797918.aspx)

但不要依赖这种行为。它可以关闭，我见过一个 Jr. Developer 关闭它以尝试解决错误。（感谢代码审查。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:13:11.203

从外观上看，您对 SQL 注入攻击非常开放。永远不应该使用字符串连接来与数据库通信。您如何知道用户没有使用程序与您的站点/应用程序进行通信？可以有各种各样的操作。

如果你让一扇门打开，所有的事情都会通过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:13:14.080

是的，任何时候您接受任何类型的用户输入并将其直接修补到 SQL 查询中，都存在风险。

首先，您应该验证所有需要采用某种格式或几个已知值的输入。

其次，使用 SQL 查询参数而不是像您一样创建查询。

# macos - Mac OS X：自定义 HID 驱动程序

> ID：13823907
> 
> 赞同：1
> 
> 时间：2012-12-11T16:10:05.510
> 
> 标签：macos, kernel, hid

我参与为 Mac OS 开发自定义 HID 设备支持。但是它不是 HID 投诉，即它被 IOUSBCompositeDriver 抓取。

该设备应该用作输入设备（键盘、鼠标），因此我正在尝试将驱动程序实现为 kext。我试图继承 IOUSBHIDDriver 和 IOHIDDevice 从 newReportDescriptor() 方法返回以下报告描述符（取自 Windows 团队）：

```
const unsigned char g_ReportDescriptor[] = {
// Keyboard report   
0x05, 0x01,                         // USAGE_PAGE (Generic Desktop)
0x09, 0x06,                         // USAGE (Keyboard)
0xa1, 0x01,                         // COLLECTION (Application)
0x85, REPORTID_KEYBOARD,            //   REPORT_ID (Keyboard)    
0x05, 0x07,                         //   USAGE_PAGE (Keyboard)
0x19, 0xe0,                         //   USAGE_MINIMUM (Keyboard LeftControl)
0x29, 0xe7,                         //   USAGE_MAXIMUM (Keyboard Right GUI)
0x15, 0x00,                         //   LOGICAL_MINIMUM (0)
0x25, 0x01,                         //   LOGICAL_MAXIMUM (1)
0x75, 0x01,                         //   REPORT_SIZE (1)
0x95, 0x08,                         //   REPORT_COUNT (8)
0x81, 0x02,                         //   INPUT (Data,Var,Abs)
0x95, 0x01,                         //   REPORT_COUNT (1)
0x75, 0x08,                         //   REPORT_SIZE (8)
0x81, 0x03,                         //   INPUT (Cnst,Var,Abs)
0x95, 0x05,                         //   REPORT_COUNT (5)
0x75, 0x01,                         //   REPORT_SIZE (1)
0x05, 0x08,                         //   USAGE_PAGE (LEDs)
0x19, 0x01,                         //   USAGE_MINIMUM (Num Lock)
0x29, 0x05,                         //   USAGE_MAXIMUM (Kana)
0x91, 0x02,                         //   OUTPUT (Data,Var,Abs)
0x95, 0x01,                         //   REPORT_COUNT (1)
0x75, 0x03,                         //   REPORT_SIZE (3)
0x91, 0x03,                         //   OUTPUT (Cnst,Var,Abs)
0x95, 0x06,                         //   REPORT_COUNT (6)
0x75, 0x08,                         //   REPORT_SIZE (8)
0x15, 0x00,                         //   LOGICAL_MINIMUM (0)
0x25, 0x65,                         //   LOGICAL_MAXIMUM (101)
0x05, 0x07,                         //   USAGE_PAGE (Keyboard)
0x19, 0x00,                         //   USAGE_MINIMUM (Reserved (no event indicated))
0x29, 0x65,                         //   USAGE_MAXIMUM (Keyboard Application)
0x81, 0x00,                         //   INPUT (Data,Ary,Abs)
0xc0,                               // END_COLLECTION

// Relative Mouse report
0x05, 0x01,                         // USAGE_PAGE (Generic Desktop)
0x09, 0x02,                         // USAGE (Mouse)
0xa1, 0x01,                         // COLLECTION (Application)
0x85, REPORTID_RELATIVE_MOUSE,      //   REPORT_ID (Mouse)
0x09, 0x01,                         //   USAGE (Pointer)
0xa1, 0x00,                         //   COLLECTION (Physical)
0x05, 0x09,                         //     USAGE_PAGE (Button)
0x19, 0x01,                         //     USAGE_MINIMUM (Button 1)
0x29, 0x05,                         //     USAGE_MAXIMUM (Button 5)
0x15, 0x00,                         //     LOGICAL_MINIMUM (0)
0x25, 0x01,                         //     LOGICAL_MAXIMUM (1)
0x75, 0x01,                         //     REPORT_SIZE (1)
0x95, 0x05,                         //     REPORT_COUNT (5)
0x81, 0x02,                         //     INPUT (Data,Var,Abs)
0x95, 0x03,                         //     REPORT_COUNT (3)
0x81, 0x03,                         //     INPUT (Cnst,Var,Abs)
0x05, 0x01,                         //     USAGE_PAGE (Generic Desktop)
0x09, 0x30,                         //     USAGE (X)
0x09, 0x31,                         //     USAGE (Y)
0x15, 0x81,                         //     Logical Minimum (-127)
0x25, 0x7F,                         //     Logical Maximum (127)
0x75, 0x08,                         //     REPORT_SIZE (8)
0x95, 0x02,                         //     REPORT_COUNT (2)
0x81, 0x06,                         //     INPUT (Data,Var,Rel)
0x05, 0x01,                         //     Usage Page (Generic Desktop)
0x09, 0x38,                         //     Usage (Wheel)
0x15, 0x81,                         //     Logical Minimum (-127)
0x25, 0x7F,                         //     Logical Maximum (127)
0x75, 0x08,                         //     Report Size (8)
0x95, 0x01,                         //     Report Count (1)
0x81, 0x06,                         //     Input (Data, Variable, Relative)
0xc0,                               //   END_COLLECTION
0xc0,                               // END_COLLECTION

// Control report
0x06, 0x00, 0xff,              // USAGE_PAGE (Vendor Defined Page 1)
0x09, 0x01,                    // USAGE (Vendor Usage 1)
0xa1, 0x01,                    // COLLECTION (Application)
0x85, REPORTID_VXYCONTROL,     //   REPORT_ID ()
0x15, 0x00,                    //   LOGICAL_MINIMUM (0)
0x26, 0xff, 0x7f,              //   LOGICAL_MAXIMUM (32767)
0x75, 0x10,                    //   REPORT_SIZE (16)
0x95, 0x02,                    //   REPORT_COUNT (2)
0x09, 0x01,                    //   USAGE (Vendor Usage 1)
0x91, 0x00,                    //   OUTPUT (Data,Ary,Abs)
0xc0,                          // END_COLLECTION

// Trigger Macro report
0x06, 0x00, 0xff,              // USAGE_PAGE (Vendor Defined Page 1)
0x09, 0x02,                    // USAGE (Vendor Usage 2)
0xa1, 0x01,                    // COLLECTION (Application)
0x85, REPORTID_MACROTRIG,      //   REPORT_ID (5)
0x15, 0x00,                    //   LOGICAL_MINIMUM (0)
0x26, 0xff, 0x00,              //   LOGICAL_MAXIMUM (255)
0x75, 0x08,                    //   REPORT_SIZE (8)
0x95, 0x01,                    //   REPORT_COUNT (1)
0x09, 0x02,                    //   USAGE (Vendor Usage 2)
0x81, 0x02,                    //   INPUT (Data,Var,Abs)
0xc0                           // END_COLLECTION

}; 
```

然后将以下结构提供给 handleReport() 方法

```
#define KBD_KEY_CODES        6

#pragma pack(1)
typedef struct _VHID_KEYBOARD_REPORT
{
    UInt8      ReportID;
    // Left Control, Left Shift, Left Alt, Left GUI
    // Right Control, Right Shift, Right Alt, Right GUI
    UInt8      ShiftKeyFlags;
    UInt8      Reserved;
    UInt8      KeyCodes[KBD_KEY_CODES];
} VHID_KEYBOARD_REPORT;

VHID_KEYBOARD_REPORT keyboardReport;

bzero(&keyboardReport, sizeof(keyboardReport));
keyboardReport.ReportID = REPORTID_KEYBOARD;
keyboardReport.ShiftKeyFlags = 0;
keyboardReport.KeyCodes[0] = kHIDUsage_KeyboardA;

IOBufferMemoryDescriptor *report = IOBufferMemoryDescriptor::withBytes(&keyboardReport, sizeof(keyboardReport), kIODirectionInOut);

handleReport(report); 
```

但是我没有看到任何影响。我预计会生成按键事件。

我错过了什么？这种驱动程序的一般工作流程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:24:25.073

这里有很多问题……从你的 info.plist 的 IOKitPersonalities 开始……和 OSBundleLibraries（你所有的版本都匹配吗？）你知道你的 kext 是匹配的吗？（您可以 kextload/kextstat 您的驱动程序吗？）假设这很好，您将如何替换报告描述符？假设您正确地覆盖 ::newReportDescriptor（您是否调用了 super::newReportDescriptor？）您将如何返回新描述符？

```
IOBufferMemoryDescriptor* memDesc = IOBufferMemoryDescriptor::withBytes(& g_ReportDescriptor, sizeof(g_ReportDescriptor), kIODirectionOutIn, false); 
```

在您的代码中添加一些 IOLog 可能会有所帮助，以确保一切都按您的预期进行。

# php - Magento：使用实际数据预览/测试交易电子邮件，而不实际发送它们？

> ID：13823911
> 
> 赞同：37
> 
> 时间：2012-12-11T16:10:15.167
> 
> 标签：php, oop, magento

我正在编辑 Magento 交易电子邮件中包含的一些 phtml 文件，但为了测试更改，我必须实际发送电子邮件。在（例如）订单确认电子邮件的情况下，这意味着我每次想要测试电子邮件时都必须下订单！

在后端选择“预览电子邮件”没有帮助，因为电子邮件不包含可见的订单数据。

有没有一种方法可以预览交易电子邮件，但让它与订单数据一起呈现？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-14T12:00:00.263

来自用户 RS：

> 您不必创建新订单，您可以重新发送以前的订单电子邮件（通过转到该订单并单击重新发送电子邮件）。

这是我在使用模板时发现的最接近快速重新测试电子邮件的方法。谢谢RS！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-19T07:54:55.530

以下代码段将呈现“新销售订单”电子邮件并针对任何给定订单显示它。例如，将以下内容放在 /test.php 中，然后浏览到正确的位置，例如[http://www.example.com/test.php](http://www.example.com/test.php)

```
require_once 'app/Mage.php';
Mage::app();

// loads the proper email template
$emailTemplate  = Mage::getModel('core/email_template')
                      ->loadDefault('sales_email_order_template');

// All variables your error log tells you that are missing can be placed like this:

$emailTemplateVars = array();
$emailTemplateVars['usermessage'] = "blub";
$emailTemplateVars['store'] = Mage::app()->getStore();
$emailTemplateVars['sendername'] = 'sender name';
$emailTemplateVars['receivername'] = 'receiver name';

// order you want to load by ID

$emailTemplateVars['order'] = Mage::getModel('sales/order')->load(673);

// load payment details:
// usually rendered by this template:
// web/app/design/frontend/base/default/template/payment/info/default.phtml
$order = $emailTemplateVars['order'];
$paymentBlock = Mage::helper('payment')->getInfoBlock($order->getPayment())
                ->setIsSecureMode(true);
$paymentBlock->getMethod()->setStore(Mage::app()->getStore()); 

$emailTemplateVars['payment_html'] = $paymentBlock->toHtml();

//displays the rendered email template
echo $emailTemplate->getProcessedTemplate($emailTemplateVars); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-05-21T20:54:27.010

对于销售订单，我使用测试帐户和根目录中的脚本。

脚本如下所示：

```
<?php
include 'app/Mage.php';
Mage::app('default');

$_order = Mage::getModel('sales/order')->load($argv[1]);
$_order->sendNewOrderEmail(); 
```

我称之为：

```
php -f sendTestEmail.php -- 4303 
```

其中 4303 是我之前用于测试的顺序。

希望有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T11:10:03.150

按照这篇博文中的说明进行操作：[Magento (L)ocalhost (E)mail (S)erver (S)imulator（2010 年 11 月；Branko Ajzele）](http://inchoo.net/ecommerce/magento/magento-l-e-s-s/) Magento 将保存 html 电子邮件，包括您尝试保存的所有变量送进来`var/log`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-04T12:58:22.143

[我们开发了一个名为Hackathon_EmailPreview](https://github.com/magento-hackathon/E-MailPreview)的免费开源扩展。

关于订单邮件，您可以在浏览器中预览它们而无需发送，您可以输入任何订单号来查看不同订单的外观。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-05T19:57:44.250

实际上，我们开发了一个扩展程序，让您可以做到这一点：测试从 Magento 后端发送任何 Magento 交易电子邮件。希望在这里提及它不是太商业化。： [http ://www.yireo.com/software/magento-extensions/emailtester](http://www.yireo.com/software/magento-extensions/emailtester)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-14T22:28:08.967

您可以进入后台，进入客户，选择您自己的客户用户，在底部您将有“发送自动生成的密码”。输入管理员密码，然后单击“保存并继续编辑”。这样，您将向您自己的帐户发送密码并测试您的模板。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-08T08:20:04.913

我发布了一个扩展程序，允许您从后台预览交易邮件。您只需传递一个订单，然后在 BO 中就会出现一个邮件预览按钮。此外，它允许您直接在邮件预览窗口中启用模板/块提示。

在这里看到它：[https ://github.com/OddBrew/Oddbrew_MailViewer](https://github.com/OddBrew/Oddbrew_MailViewer)

这是一个免费的扩展，所以我希望它不属于 SO 的促销规则。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-25T08:33:29.057

[http://www.magentocommerce.com/magento-connect/send-a-test-newsletter-to-an-email.html](http://www.magentocommerce.com/magento-connect/send-a-test-newsletter-to-an-email.html)

测试通讯的良好扩展

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-20T13:27:40.603

我使用一个小测试脚本再次发送订单确认电子邮件。这适用于 Magento 1.9，因为它触发 cronjob 来处理电子邮件队列。此外，它会重置属性“已发送电子邮件”，因此 Magento 不会跳过发送该电子邮件。

```
include 'app/Mage.php';
Mage::app('default');

$oid = '1234567';

$_order = Mage::getModel('sales/order')->load($oid);    
$_order->setEmailSent('0');
$_order->save();

$_order->sendNewOrderEmail();

// var_dump($_order);

// Trigger email queue
$a = new Mage_Core_Model_Email_Queue();
$a->send();

echo "\nFinished\n"; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-09T08:19:19.480

转到 app/code/local/Mage/Core/Model/Email/Template.php 文件。在发送函数中，在第 441 行附近有一段代码

```
 if ($this->isPlain()) {
         $mail->setBodyText($text);
    } else {
        $mail->setBodyHTML($text);
    }
  echo $text;die(); 
```

它会在浏览器上回显邮件，而不会实际发送给用户。可以将其用于测试。

# vba - 如果使用 VBScript 不使用任何循环技术，如果任何一组单元格为空白，则将组中的单元格值从右向左移动？

> ID：13823912
> 
> 赞同：0
> 
> 时间：2012-12-11T16:10:15.050
> 
> 标签：vba, excel

如果任何一组单元格使用 VBScript 为空白而不使用任何循环技术，是否有更快的过程将组中的单元格值从右向左移动？（将每一行的数据打包，向左）

***输入表：*** *****

```
Project#    T1Name     T1StartDate    T1FinishDate   T2Name     T2StartDate    T2FinishDate  T3Name     T3StartDate    T3FinishDate

   11         S1        12/7/2012      19/7/2012                                               S2        12/7/2012      19/7/2012
   12                                                                                          S2        12/6/2012 
   13                                                  S4        11/05/12                      S6                       12/5/10 
```

***输出表：***

```
Project#    T1Name     T1StartDate    T1FinishDate   T2Name     T2StartDate    T2FinishDate  T3Name     T3StartDate    T3FinishDate

   11         S1        12/7/2012      19/7/2012       S2        12/7/2012      19/7/2012
   12         S2        12/6/2012  
   13         S4        11/05/12                       S6                       12/05/10 
```

***更新了我的输出表*** 请检查，首先它放错地方了！

***更新1***

```
Project#    T1Name     T1StartDate    T1FinishDate   T2Name     T2StartDate    T2FinishDate  T3Name     T3StartDate    T3FinishDate

  10         S1                         11/5/2011                                              S2                        5/5/2011

  11                                                   S1         11/5/2011     5/4/2011        S1         11/5/2011     5/4/2011 
```

***更新2***

```
Project#    T1Name     T1StartDate    T1FinishDate   T2Name     T2StartDate    T2FinishDate  T3Name     T3StartDate    T3FinishDate 

  11                     11/5/2011                      S1       11/5/2011        5/4/2011      S2         11/5/2011    5/4/2011 
```

将此条目添加到未正确移动的表中。你能检查一下吗？

***更新代码：***

```
 Option Explicit

 Dim objExcel1,objWorkbook
 Dim strPathExcel1
 Dim objSheet1,IntRow1
 Dim Task,Totltask
 Dim DataArray(14),index,Counter

 Set objExcel1 = CreateObject("Excel.Application")
 strPathExcel1 = "D:\VA\TestVBSScripts\Test.xlsx"

 Set objWorkbook=objExcel1.Workbooks.open(strPathExcel1)
 Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)

 IntRow1=2
Do While objSheet1.Cells(IntRow1,1).Value <> ""
 Totltask=2
 index=0
Do Until Totltask> 10

 'MsgBox("Hi")

  If objSheet1.Cells(IntRow1,Totltask).Value <> "" Or   objSheet1.Cells(IntRow1,Totltask+1).Value <> "" Or objSheet1.Cells(IntRow1,Totltask+2).Value <> "" Then

  DataArray(index)=objSheet1.Cells(IntRow1,Totltask).Value
  DataArray(index+1)=objSheet1.Cells(IntRow1,Totltask+1).Value
  DataArray(index+2)=objSheet1.Cells(IntRow1,Totltask+2).Value

  index=index+3

   End If

  Totltask=Totltask+3
  Loop

  Totltask=2
 Counter=index-1
 index=0
 'MsgBox(Counter)
 Do While index < Counter 
     'MsgBox("Hi")
objSheet1.Cells(IntRow1,Totltask).Value=DataArray(index)
objSheet1.Cells(IntRow1,Totltask+1).Value=DataArray(index+1)
objSheet1.Cells(IntRow1,Totltask+2).Value=DataArray(index+2)

Totltask=Totltask+3
index=index+3

  Loop

  Erase DataArray

 Do Until Totltask >10

    objSheet1.Cells(IntRow1,Totltask).Value=""
 Totltask=Totltask+1

 Loop

IntRow1=IntRow1+1
 Loop

  '=======================
  objExcel1.ActiveWorkbook.SaveAs strPathExcel1
  objExcel1.Workbooks.close
  objExcel1.Application.Quit
 '====================== 
```

***如果可能的话，任何机构都可以建议我应该如何让它更快？这段代码是正确的，可以根据需要产生输出。但是太慢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:05:52.590

编辑：使组中的列数从 3 到 N (ColumnInGroup)

编辑：修复了一些错误，并允许“NAME”字段为空，如果名称、开始日期、结束日期存在，则“T”类型被视为存在，通过在 ROW 单元而不是单元格单元中分配来提高性能

编辑：修复了一个错误

编辑：我在VBA中得到这些常量的值，你打开一个excel，`Alt + F11`打开VB编辑器，`Crtl + G`打开一个即时窗口，输入`?xlUp` ，它会在下面显示xlUp的值

下面的代码在 VBS 中，适用于您当前显示的工作表，性能应该没问题...更改工作簿完整路径，要使用的工作表名称

```
Option Explicit

Dim xlApp
Dim xlBook
dim xlSheet
Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = False
xlApp.EnableEvents = False
xlApp.ScreenUpdating = False
'xlApp.Calculation = -4135 'xlCalculationManual

set xlBook = xlApp.Workbooks.Open("C:\Users\wangCL\Desktop\data.xlsx")
set xlSheet = xlBook.Worksheets("data (4)")

'CONTENT HERE

Dim count 
Dim dataArray 
Dim height 
Dim width 
Dim rWidth 
Dim packArray 
Dim i 
Dim j
dim rowArray
dim ColumnInGroup
dim k 
dim b 
With xlSheet 
    .activate
    ColumnInGroup= 4
    height = .Cells(.Rows.count, 1).End(-4162).Row
    ' assume 1st line is header
    ' start from 2nd line
    If height > 1 Then
        For i = 2 To height

            width = .Cells(i, .Columns.count).End(-4159).Column
            'round width
            if (width -1 )mod columnInGroup <> 0 then  
                width = (((width -1)\columnInGroup )+1)* columnInGroup + 1
            end if
            if width > 1 then 
                'finding the last unit originally packed 
                redim rowArray(0,width-1)
                rowArray = .range(.cells(i,1), .cells(i,width)).value
                'default value
                rWidth = width
                for j = 2 to width  step ColumnInGroup
                    if j+ColumnInGroup -1 <= width then 
                        b = false
                        for k = 0 to ColumnInGroup - 1
                            if rowArray(1,j+k) <> "" then 
                                b = true 
                                exit for 
                            end if
                        next 
                        if not b then 
                            rWidth = j - 1
                            exit for
                        end if
                    else
                        rWidth = width
                    end if
                next
                'rWidth = .Cells(i, 1).End(-4161).Column

                'If .Cells(i, rWidth - 1).Value = "" Then
                '    rWidth = 1
                'End If
                ''check for each new "T" - 1
                'If rWidth Mod 3 = 0 Then
                '    rWidth = rWidth  + 1
                'ElseIf rWidth Mod 3 = 1 Then
                '    rWidth = rWidth 
                'ElseIf rWidth Mod 3 = 2 Then
                '    rWidth = rWidth  + 2
                'End If
                ' if is not packed
                If width > rWidth Then
                    ReDim dataArray(1 ,(width - rWidth))
                    dataArray = .Range(.Cells(i, rWidth + 1), .Cells(i, width)).Value

                    count = 0

                    For j = LBound(dataArray, 2) To UBound(dataArray, 2) Step ColumnInGroup
                        if j+ColumnInGroup - 1<= ubound(dataArray,2) then 
                            b = false
                            for k = 0 to ColumnInGroup - 1
                                if dataArray(1,j+k) <> "" then 
                                    b = true 
                                    exit for 
                                end if
                            next 
                            if  b then 
                                count = count + 1
                            end if
                        else
                            exit for
                        end if
                    Next

                    ReDim packArray(0, count * columnInGroup - 1)
                    count = 0
                    For j = LBound(dataArray, 2) To UBound(dataArray, 2) Step columnInGroup
                        ' we found a "T" Unit
                        if j+columnInGroup -1<= ubound(dataArray,2) then 
                            b = false
                            for k = 0 to ColumnInGroup - 1
                                if dataArray(1,j+k) <> "" then 
                                    b = true 
                                    exit for 
                                end if
                            next 
                            if  b then 
                                count = count + 1
                                for k = 0 to columnInGroup - 1
                                    If j + k <= UBound(dataArray, 2) Then
                                        packArray(0, (count - 1) * columnInGroup  + k ) = dataArray(1, j + k)
                                    end if
                                next 
                            end if

                        else
                            exit for
                        end if

                    Next

                    'clear original data
                    .Range(.Cells(i, rWidth + 1), .Cells(i, width)).ClearContents

                    'for j = 1 to ubound(packArray,2)
                '       .cells(i,rWidth+j).value = packArray(1,j)
                '   next 
                    .Range(.Cells(i, rWidth + 1), .Cells(i, rWidth + count * columnInGroup)).Value = packArray

                End If
            end if
        Next

    End If

End With

xlBook.save
xlApp.Quit
set xlSheet = nothing
set xlBook = nothing
set xlApp = nothing

msgbox "Done" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:37:15.453

我建议使用删除空单元格的`Delete`方法`Excel.Range`，并传递一个参数将剩余的单元格向左移动：

```
Option Explicit

Dim xlApp, xlBook, xlSheet
Dim rowCount, columnCount, i, j, currentColumnCount
Dim rng, cell, hasValue
Const xlShiftToLeft = -4159

Set xlApp = CreateObject("Excel.Application")
Set xlBook = xlApp.Workbooks.Open("C:\path\to\excel\file.xlsx")
Set xlSheet = xlBook.Worksheets("WorksheetName")
rowCount = xlSheet.UsedRange.Rows.Count
columnCount = xlSheet.UsedRange.Columns.Count - 3

For i = 2 To rowCount
    currentColumnCount = columnCount
    j = 2

    Do While j <= currentColumnCount
        Set rng = xlSheet.Range(xlSheet.Cells(i,j), xlSheet.Cells(i,j+2))
        hasValue = False
        For Each cell In rng.Cells
            If cell.Value <> "" Then
                hasValue = True
                Exit For
            End If
        Next

        If hasValue Then
            j = j + 3
        Else
            rng.Delete xlShiftToLeft
            currentColumnCount = currentColumnCount - 3
        End If
    Loop    
Next

xlBook.Save
xlApp.Quit 
```

# sql - SQL Server 2008 中的过程

> ID：13823913
> 
> 赞同：1
> 
> 时间：2012-12-11T16:10:15.660
> 
> 标签：sql, sql-server-2008, stored-procedures

我创建了一个程序 ( `sp_ET1_ClassificacaoPPIInferior`) 来按分数 ( )对表 ( ) 中已经存在的候选人`Numr_TotalEt1`的特定类别 ( ) 进行排序：`TipoPrograma = 1``CandidatosVestAtual`

```
CREATE TABLE [dbo].[CandidatosVestAtual](
[NUMG_Candidato] [bigint] NOT NULL,
[CODG_Curso] [varchar](4) NOT NULL,
[TipoPrograma] [int] NOT NULL,
[Numr_TotalEt1] [int] NULL,
[Numr_Classificacao_PPIInf_Et1] [int] NULL, 

    CONSTRAINT [PK_CandidatosVestAtual_1] PRIMARY KEY CLUSTERED ([NUMG_Candidato] ASC)
) 
```

遵循使用的程序代码：

```
ALTER PROCEDURE [dbo].[sp_ET1_ClassificacaoPPIInferior] @CODG_Curso varchar(4)
AS

DECLARE @Cnt INT
DECLARE @NUMG_Candidato INT

    DECLARE Candidatos_C CURSOR FOR

    SELECT NUMG_Candidato
    FROM CandidatosVestAtual
    WHERE TipoPrograma in (1) AND 
    Codg_Curso =@CODG_Curso
    ORDER BY Numr_TotalEt1 DESC

    set @Cnt = 1
     OPEN Candidatos_C
     FETCH NEXT FROM Candidatos_C INTO @NUMG_Candidato
      WHILE (@@FETCH_STATUS = 0)
      BEGIN 

        UPDATE CandidatosVestAtual SET Numr_Classificacao_PPIInf_Et1=@Cnt
        FROM CandidatosVestAtual
        WHERE NUMG_Candidato=@NUMG_Candidato

        SET @Cnt = @Cnt + 1
        FETCH NEXT FROM Candidatos_C INTO @NumG_Candidato
      END

     CLOSE Candidatos_C
     DEALLOCATE Candidatos_C 
```

然而，这个过程没有做任何事情。仅当我更改原始查询过程时，它才做了一些事情：

```
SELECT NUMG_Candidato 
FROM CandidatosVestAtual 
WHERE TipoPrograma in (1) 
  AND Codg_Curso = @ CODG_Curso 
ORDER BY DESC Numr_TotalEt1 
```

经过

```
SELECT NUMG_Candidato 
FROM CandidatosVestAtual 
WHERE Codg_Curso = @CODG_Curso 
ORDER BY DESC Numr_TotalEt1 
```

如何使该过程与原始查询一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:08:34.993

我使用创建了一些虚假数据

```
declare @i int = 1
while @i <= 100
Begin
insert into [CandidatosVestAtual]
(NUMG_Candidato,
CODG_Curso,
TipoPrograma,
Numr_TotalEt1,
Numr_Classificacao_PPIInf_Et1)
select @I, 'a', 1, 1

end 
```

当我运行程序时

```
[dbo].[sp_ET1_ClassificacaoPPIInferior] 'a' 
```

Numr_Classificacao_PPIInf_Et1 中的数据完全递增。从触发器中删除更新并替换为

```
select @Cnt, @NUMG_Candidato 
```

如果这增加了数据；您是否被困在事务回滚中？如果它不能你可以注释掉/修剪直到它工作并说出它再次开始工作的地方？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:38:36.667

问题是 varchar 和 varchar(6)，请检查您的 Proc peremeter 是 @CODG_Curso varchar(6) 并且表模式字段 def 是 [CODG_Curso] varchar NOT NULL..

# java - Xstream (Java) 未正确将 Xml 字符串反序列化为对象

> ID：13823918
> 
> 赞同：3
> 
> 时间：2012-12-11T16:10:39.880
> 
> 标签：java, xml, xstream

我有以下 XML 字符串，我试图将其反序列化为一个对象，但最终结果不正确。

XML 字符串是：
`<Header><Sequence value=\"bbb-mySeq\"/><Session value=\"aaa-myValue\"/></Header>";`

我试图反序列化的对象是：

```
public class Header implements Serializable {

private static final long serialVersionUID = 1L;

private List<Session> sessions = new ArrayList<Session>();
private List<Sequence> sequences = new ArrayList<Sequence>();

public List<Session> getSession() {
    return sessions;
}

public void setSession(Session session) {
    this.sessions.add(session);
}

public List<Sequence> getSequence() {
    return sequences;
}

public void setSequence(Sequence sequence) {
    this.sequences.add(sequence);
    }

} 
```

序列对象是：

```
public class Sequence implements Serializable {

private static final long serialVersionUID = 1L;
private String value;

public String getValue() {
    return value;
}

public void setValue(String value) {
    this.value = value;
}

} 
```

反序列化代码为：

```
 XStream xstream = new XStream();

    xstream.alias("Header", Header.class);
    xstream.alias("Session", Session.class);
    xstream.alias("Sequence", Sequence.class);

    xstream.addImplicitCollection(Header.class, "sessions");
    xstream.addImplicitCollection(Header.class, "sequences");

    xstream.useAttributeFor(Session.class, "value");
    xstream.useAttributeFor(Sequence.class, "value");
    System.out.println("msg: " + msg);

    Header result = (Header) xstream.fromXML(msg); 
```

当我`toString()`对结果对象执行 a 时，我看到：

```
Header [sessions=null, sequences=[Sequence [value=bbb-mySeq], Session [value=aaa-myValue]]] 
```

如您所见，Sequences 中不应该有 Session。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:57:03.187

更改对 addImplicitCollection 的调用：

```
xstream.addImplicitCollection(Header.class, "sessions", Session.class);
xstream.addImplicitCollection(Header.class, "sequences", Sequence.class); 
```

波阿斯

# asp.net - 创建用于对 ASP.Net GridView 列进行排序的 DataView

> ID：13823921
> 
> 赞同：0
> 
> 时间：2012-12-11T16:10:56.417
> 
> 标签：asp.net, vb.net, gridview, dataview, tableadapter

我们有一个由 Visual Studio 数据集设计器创建的类型化数据集。

你能告诉我如何从类型化的 DataSet 创建一个 DataView 对象吗？我们想要更改它的排序，以便它可以显示在 ASP.Net DataView 中。

我们搜索了很长时间才找到这个，但空手而归。

这是 DataView 的标记。由于我们的 Web 表单很大，所有编码都被减少了：

```
<asp:UpdatePanel 
    ID="UpdatePanelSummary" 
    runat="server" 
    UpdateMode="Always">

    <ContentTemplate> 

        <h1>Maintenance</h1>

        <% '-- GridView (Grid) for summary.                                                      -- %>
        <% '-- The user chooses a summary row from here and details are shown in a DetailsView.  -- %>
        <% '--------------------------------------------------------------------------------------- %>

        <asp:GridView
            ID="GridViewSummary" 
            runat="server" 
            AllowSorting="True" 
            AutoGenerateColumns="False" 
            DataKeyNames="ID" 
            Width="224px" 
            AllowPaging="True" 
            PageSize="7">

            <Columns>
                <asp:BoundField DataField="Unit" HeaderText="Unit" 
                    SortExpression="Unit" />

                <asp:BoundField DataField="TheName" HeaderText="Name" 
                    SortExpression="TheName" />

                <asp:BoundField DataField="ID" 
                    HeaderText="ID" SortExpression="ID" InsertVisible="False" ReadOnly="True" 
                    Visible="False" />

                <asp:CommandField ButtonType="Button" SelectText="Select Unit Details" 
                    ShowSelectButton="True" />
            </Columns>
        </asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

这是我们要从代码隐藏文件中创建到 DataView 中的数据：

```
' Database objects.
'------------------
Dim theTableAdapter As New DataSetClassesTableAdapters.ClassesTableAdapter

Private Sub Teachers_Init(sender As Object, e As EventArgs) Handles Me.Init

    ' Load the data from the database into the GridView.
    '---------------------------------------------------
    GridViewSummary.DataSource = theTableAdapter.GetDataByAllClasses
    GridViewSummary.DataBind()

End Sub

Private Function bindgrid() As DataView

    Dim dv As DataView = New DataView()

    If ViewState("sortExpr") IsNot Nothing Then
        dv = New DataView("The DataSet Is Here")
        dv.Sort = DirectCast(ViewState("sortExpr"), String)
    Else
        dv = ds.Tables(0).DefaultView
    End If

    Return dv
End Function

Protected Sub GridViewSummary_Sorting(sender As Object, e As GridViewSortEventArgs) Handles GridViewSummary.Sorting

    ViewState("sortExpr") = e.SortExpression
    GridViewSummary.DataSource = bindgrid()
    GridViewSummary.DataBind()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:49:14.020

DataView 需要连接到为其提供排序的 DataTable。

```
if ViewState(...) IsNot Nothing then
    dv = New DataView()
    dv.Table = ds.Tables(0)
    ....
else

end if 
```

顺便说一句，没有仅将字符串作为输入参数的[DataView 构造函数](http://msdn.microsoft.com/en-us/library/ahf1ez2d%28v=vs.110%29.aspx)

# asp.net-mvc - MVC 模型外键导航属性

> ID：13823922
> 
> 赞同：0
> 
> 时间：2012-12-11T16:10:57.680
> 
> 标签：asp.net-mvc, model, foreign-keys, code-first

我目前有一个博客模型，其中我有一个博客作者的外键：

```
 [Required]
    [ForeignKey("BlogAuthorModel")]
    [Display(Name = "Author")]
    public int BlogAuthorId { get; set; }

    public BlogAuthorModel BlogAuthorModel { get; set; } 
```

我必须将 BlogAuthorModel 属性添加到类中才能使外键工作。

有谁知道这是什么，因为当我尝试使用它时，它是空的 - 它应该自动完成还是我必须放入我自己的代码以使其使用外键来填充？

**更新**

无论谁将此标记为重复项，我的问题不是关于如何添加外键，而是如何填充 BlogAuthorModel，事实证明，如果您将其设为虚拟，那么它将自动填充：

```
 public virtual BlogAuthorModel BlogAuthorModel { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:55:24.397

那是针对您的 EF 类的导航属性。我相信您需要将 ForiegnKey 向下移动到实际对象，指向您各自类中的外键字段。

```
[Required]
[Display(Name = "Author")]
public int BlogAuthorId { get; set; }

[ForeignKey("BlogAuthorId")]
public BlogAuthorModel BlogAuthorModel { get; set; } 
```

# c - 遍历数组，什么更好，更快等？

> ID：13823926
> 
> 赞同：0
> 
> 时间：2012-12-11T16:11:10.060
> 
> 标签：c, arrays, algorithm, search, coding-style

我想实现一个哈希或类似 PHP 的数组。哪个更好，选项 a) 或选项 b) 通过键查找元素？

（所有变量都被设置和初始化等等！）

一种）

```
for( i = 0; i < ary->element_cnt && found == NULL; i++ ) {
    current_element = &(ary->elements[i]);
    if( 0 == memcmp(current_element->key, search_key, keysize) ) {
        found = current_element;
    }
} 
```

b)

```
for( i = 0, current_element = &(ary->elements[i]) ; 
        i < ary->element_cnt &&  
        0 != memcmp(current_element->key, searchkey, keysize); 
        i++, current_element = &(ary->elements[i]) );
/*found = current_element;*/ 
```

第一个更好，因为它更具可读性/可维护性？第二个会更快吗？

在一个大循环中做所有事情是“坏风格”吗？

我知道，那里有更好的搜索算法，但这不是我的问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T16:15:34.437

这两种都是 O(N) 算法——它们都只是简单地遍历一个数组并调用`memcmp`每个元素——所以它们应该执行类似的操作。主观上，我认为第一个更好，因为它更容易阅读。

然而，实现按键查找的最佳方式不是使用像这样的线性搜索，而是使用专门的数据结构，如哈希表或平衡二叉树。像 PHP 这样的脚本语言通常使用哈希表来实现这样的查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:16:33.170

当然，所有风格问题都是高度主观的。这是有时由本地代码样式指南“规范”的事物类型。

就我个人而言，我认为调用`memcmp()`有点过于“沉重”，我会写成：

```
for( i = 0; i < ary->element_cnt; ++i ) {
    current_element = &ary->elements[i];
    if( memcmp(current_element->key, search_key, keysize) == 0 )
        break;
} 
```

这消除了`found`循环头中的检查，因为这实际上是对我不喜欢的同一件事进行了两次检查。

如果我*真的*想使用`found`，我会写成：

```
for( i = 0; i < ary->element_cnt && !found; ++i ) {
    current_element = &ary->elements[i];
    found = memcmp(current_element->key, search_key, keysize) == 0;
} 
```

这消除了无意义的`if`，只是直接分配布尔值，我认为这很好。

# cakephp - 将 CakePHP Console / Shell 用于编程任务的优点是什么

> ID：13823927
> 
> 赞同：0
> 
> 时间：2012-12-11T16:11:13.133
> 
> 标签：cakephp, cron, cakephp-2.2, cakephp-2.3

我目前正在执行一个通过 URL 直接调用控制器操作的编程任务。（使用windows 2003 server 编程任务管理器）

我见过一些人使用 CakePHP 控制台或 shell 来进行这种操作。

如果有的话，使用它有什么好处？

我的行动目前正在调用多个控制器并使用供应商库。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:30:50.020

我能想到的网络脚本的一些缺点是：

*   执行时间受网络服务器限制
*   它可以消耗的内存受网络服务器的限制
*   脚本 URL 必须受到保护，以便仅在您需要时执行
*   显然，当您要调用脚本时，网络服务器必须启动并运行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T16:31:07.560

以下是我想到的几个原因：

*   一个 shell 是不可公开访问的，其中一个 url（通常）是
*   shell 不会访问您的网络服务器
*   shell 调度过程的开销较小
*   与输出相比，Shell 输出更容易记录错误

我可以进行关注点分离，但这通常是由意见驱动的。我认为前两点是足够的理由。

# objective-c - 使用 API v3 在 Objective-C 中检索 YouTube 频道上传

> ID：13823928
> 
> 赞同：4
> 
> 时间：2012-12-11T16:11:15.340
> 
> 标签：objective-c, youtube-api

**您好，我正在尝试使用 xcode 中的 google-api 库从 youtube api 获取频道对象，这是我正在使用的代码：**

```
 //youtubeService type is GTLServiceYouTube
    youtubeService = [[GTLServiceYouTube alloc] init];
    youtubeService.shouldFetchNextPages = YES;
    //auth is the object from the authentication callback 
    youtubeService.authorizer = auth;
    videoQuery = [GTLQueryYouTube 
    queryForChannelsListWithPart:@"RayWilliamJohnson"];
    videoQuery.maxResults = 20;

    youtubeTicket = [youtubeService executeQuery:videoQuery completionHandler:
^(GTLServiceTicket *ticket, id channel, NSError *error) {
                NSLog(@" %@ ", error.description);
                NSLog(@"WIN! : %@ ", channel);
                }]; 
```

**到目前为止，我一直收到此错误：**

> 错误域 = com.google.GTLJSONRPCErrorDomain 代码 = -32602“操作无法完成。（RayWilliamJohnson）”用户信息 = 0x7532c40 {error = RayWilliamJohnson，GTLStructuredError = GTLErrorObject 0x7533d30：{消息：“RayWilliamJohnson”代码：-32602 数据： [1]}, NSLocalizedFailureReason=(RayWilliamJohnson)}

**知道是什么引发了这个错误吗？**

**在此先感谢您的帮助！**

**编辑**：我已经阅读了“不存在”的类中的文档：P 并检查了也遵循相同方法的其他示例。

**Edit2**：好的，我尝试了以下更改，但没有一个起作用:(，它在查询资源管理器上使用相同的示例对我有用。

```
videoQuery.maxResults = 20;
videoQuery.q = @"RayWilliamJohnson";
videoQuery.type = @"channel";

/*tried setting the part without calling the query 
 method on GTLQueryYoutube but that did not work videoQuery.part = @"id";*/

videoQuery = [GTLQueryYouTube queryForChannelsListWithPart:@"id"];
//fetching only 20 items.
youtubeTicket = [youtubeService executeQuery:videoQuery completionHandler:
^(GTLServiceTicket *ticket, id channel, NSError *error) {
    NSLog(@" %@ ", error.description);
    NSLog(@"WIN! : %@ ", channel);
    }]; 
```

错误略有不同，它表示即使我指定了任何过滤器，我也没有指定任何过滤器。

```
Error Domain=com.google.GTLJSONRPCErrorDomain Code=-32602 "The operation couldn’t be completed. (No filter selected.)" UserInfo=0x8870250 {error=No filter selected., GTLStructuredError=GTLErrorObject 0x88707f0: {message:"No filter selected." code:-32602 data:[1]}, NSLocalizedFailureReason=(No filter selected.)} 
```

**Edit3**：好的，我已经改变了几件事，首先我犯了一个愚蠢的错误，我在设置参数后初始化我的查询，这只是删除了它们。所以代码现在看起来像这样：

```
 youtubeService.authorizer = auth;
        videoQuery = [GTLQueryYouTube queryForChannelsListWithPart:@"id"];
        videoQuery.maxResults = 1;
        videoQuery.q = @"RayWilliamJohnson";
        videoQuery.type = @"channel";

        youtubeTicket = [youtubeService executeQuery:videoQuery
                         completionHandler:^(GTLServiceTicket *ticket, GTLYouTubeChannel *channel,
                                             NSError *error) {
            NSLog(@" %@ ", error.description);
            NSLog(@"WIN! : %@ ", channel.description);
            }]; 
```

但我仍然收到'**没有指定过滤器**'的错误，这意味着变量没有设置任何一种方式......

**Edit4**：好吧，经过这么多金发女郎的时刻，我设法做到了，这是我正在初始化的查询对象，我试图使用专门为频道查找制作的前缀对象，我应该只使用*queryForSearchListWithPart*，所以有效的代码如下所示：

```
youtubeService.authorizer = auth;       
videoQuery = [GTLQueryYouTube queryForSearchListWithPart:@"id"];
videoQuery.maxResults = 1;
videoQuery.q = @"RayWilliamJohnson";      
youtubeTicket = [youtubeService executeQuery:videoQuery
         completionHandler:^(GTLServiceTicket *ticket, GTLYouTubeChannel *channel,
            NSError *error) {
            NSLog(@" %@ ", error.description);
            NSLog(@"WIN! : %@ ", channel.description);
            }]; 
```

并提供了这个结果：

> 2012-12-12 00:17:21.315 测试[13099:c07] (null) 2012-12-12 00:17:21.316 测试[13099:c07] 赢了！: GTLYouTubeSearchListResponse 0x727f6d0: {pageInfo:{totalResults,resultsPerPage} etag:""bm4JOKyioI0quSqrxEnI8H7snE4/A2tE7ag9HxUC5HxeD2vDlGNg5iM"" nextPageToken:"CAEQAA" kind:"youtube#searchListResponse" items:[1]}

感谢您的帮助杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:08:15.940

我不是 Objective-C 程序员，所以我不能具体建议如何修改你的代码，但这是一般问题。

看起来您正在调用 YouTube 数据 API v3`channels.list()`方法，该方法记录在[https://developers.google.com/youtube/v3/docs/channels/list](https://developers.google.com/youtube/v3/docs/channels/list)

一个必需的参数是`part`，我假设这是该`ueryForChannelsListWithPart()`方法作为其一个参数所采用的参数。`part`应该设置为类似`id`or `id,contentDetails`，如文档中所述。

然后，您需要添加一个附加参数来告诉 API 您正在尝试检索有关哪个通道的信息。文档的“过滤器”部分列出了各种选项。

API 的 v3 不支持在`channels.list()`调用中指定旧版 YouTube 用户名。它确实接受了一个`id`参数，该参数对应于您要检索信息的频道的 YouTube 频道 ID。这些通常是 形式`UC...`，在`RayWilliamJohnson`频道 id 的情况下是`UCGt7X90Au6BV8rf49BiM6Dg`。（您可以通过`search.list()`调用解决此问题；这里是[使用 API Explorer 的示例](https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.search.list?part=id&maxResults=1&q=RayWilliamJohnson&type=channel&_h=1&)。）

请注意，channels.list() 方法实际上并不返回视频列表。如果要检索给定频道中的最新视频，则需要`channels.list()`调用从该`contentDetails`部分获取相应的上传播放列表 id，然后`playlistItems.list()`调用以获取该上传播放列表中的视频。我们在[Python](https://developers.google.com/youtube/v3/code_samples/python#my_uploads)中有一个这样做的例子，但在 Objective-C 中还没有端到端的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-23T13:13:39.283

```
service = [[GTLServiceYouTube alloc] init];
service.shouldFetchNextPages = YES;
service.retryEnabled = YES;
service.APIKey = @"xxxxxxxx";

GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"id,snippet"];
query.maxResults = 15;
query.q = YOUR_SEARCH_TEXT;
query.fields = @"items(id,snippet)";
query.order = @"viewCount";

[service executeQuery:query completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
    if (!error) {
        for (GTLYouTubeVideoListResponse *videoInfo in object) {
            [youtubeList addObject:videoInfo.JSON];
        }
        NSLog(@"youtubeList count %lu",(unsigned long)youtubeList.count);
        NSLog(@"youtubeList %@",youtubeList);
        [self.tableView reloadData];
    } else {
        NSLog(@"%@", error);
    }
    -- i'm test this currently for pagination --
    GTLYouTubePlaylistItemListResponse *playlistItems = object;
    NSLog(@"playlistItems.nextPageToken %@",playlistItems.nextPageToken);
    NSLog(@"playlistItems.prevPageToken %@",playlistItems.prevPageToken);
    if(playlistItems.nextPageToken) {
        NSLog(@"new page!!!");
        query.pageToken = playlistItems.nextPageToken;
        [self requestYoutubeVideo:withText];
    } else {
        NSLog(@"No more pages");
    }
}]; 
```

`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-15T14:10:08.427

任何搜索如何通过 id 查找频道的人，使用这个

```
GTLServiceYouTube *youTubeService = [[GTLServiceYouTube alloc] init];
youTubeService.APIKey = @"<YOUR_API_KEY>";

GTLQueryYouTube *channelsQuery = [GTLQueryYouTube queryForChannelsListWithPart:@"id,snippet,brandingSettings,contentDetails,invideoPromotion,statistics,status,topicDetails"];
channelsQuery.identifier = @"<CHANNEL_ID>";

[youTubeService executeQuery:channelsQuery completionHandler:^(GTLServiceTicket *ticket, GTLYouTubeChannelListResponse *channelListResponse, NSError *error) {
    if (error == nil) {
        if (channelListResponse.items.count > 0) {
            GTLYouTubeChannel *channel = channelListResponse.items.firstObject;
            NSLog(@"Got youtube channel - %@", channel);
        } else {
            NSLog(@"Cannot find channels with id %@", channelsQuery.identifier);
        }
    } else {
        NSLog(@"Cannot get youtube channels - %@", error);
    }
}]; 
```

# javascript - Javascript 迭代 .NET SerializedJson

> ID：13823935
> 
> 赞同：0
> 
> 时间：2012-12-11T16:11:42.027
> 
> 标签：javascript, jquery, .net, json

NET 的家伙，所以我对 Javascript（或 JQuery）非常生疏

我从服务器端 .NET 序列化了我需要在客户端访问的列表。字符串结果采用以下格式。

```
[{"id":"1","name":"xxx"},{"id":"2","name":"yyy"}] 
```

我如何在 Javascript 中遍历它？我很难真正获得数组中的值。我最终遍历了 JSON 字符串的每个字符。

```
function BuildList() {

           var result = '<%= JSON %>';

           for (var obj in result) {
                alert("Obj: " + obj);
                for (var property in result[obj]) {
                    alert(property + "value: " + result[obj][property]);
                }
            }

       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:13:56.447

Javascript 内置了将 JSON 转换为 javascript 对象的函数，试试这个：

```
var myObject = JSON.parse(myJSONtext); 
```

此代码示例[取自此处](http://www.json.org/js.html)，您可以在此处阅读更多相关信息。

* * *

以您的示例为例，它可以像这样使用：

```
var result = '<%= JSON %>';
var resultObject = JSON.parse(result);
var firstId = resultObject[0].id; 
```

[这是一个工作示例](http://jsfiddle.net/jVQz8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:19:09.357

您可以使用`$.parseJSON()`将字符串文字解析为对象，然后可以遍历该对象的属性。

```
function BuildList() {
    var result = '[{"id":"1","name":"xxx"},{"id":"2","name":"yyy"}]';
    var resultObject = $.parseJSON(result);

    $.each(resultObject, function(key, value) {
         alert("Obj: " + + value.id + ' / ' + value.name);
    })
}

BuildList() 
```

[**示例小提琴**](http://jsfiddle.net/sqVAT/)

# php - 使用 PHP 插入时使用 If 语句消除 MySQL 中的空行和空列

> ID：13823946
> 
> 赞同：4
> 
> 时间：2012-12-11T16:12:01.323
> 
> 标签：php, mysql

我正在使用 PHP 从表单中插入日期。我有 24 个字段，用户可以在其中将数据插入数据库。问题是我如何不允许空字段成为 MySQL 中的行，它们是否被用户留空？所有字段都不是必需的，并且字段被格式化为输入文本字段。一旦被查询，我被认为使用的是值部分中的 if 语句；这是一个例子：

```
/**************
* HTML Form
**************/
<form action='insert.php' method='post'>

<p> What items do you have for sale?</p>

Item 1: <input type='text' name='item1'> Price: <input type='text' name='item1cost'>
Item 2: <input type='text' name='item2'> Price: <input type='text' name='item2cost'>
Item 3: <input type='text' name='item3'> Price: <input type='text' name='item3cost'>

<input type="submit" name="Submit" value="Submit">
</form>

/**************
* PHP
**************/

$user = (from $_SESSION)
$item1      = $_POST['item1'];
$item1cost  = $_POST['item1cost'];
$item2      = $_POST['item2'];
$item2cost  = $_POST['item2cost'];
$item3      = $_POST['item3'];
$item3cost  = $_POST['item3cost'];

/*********************
* MySQL INSERT query
*********************/

$query = "INSERT INTO monthly_expenses (`userid`, `item`, `amount`)" 
                                   . "VALUES ($user,'$item1', '$item1cost'),
                                             ($user,'$item2', '$item2cost'),
                                             ($user,'$item3', '$item3cost'), 
```

如果用户将任一字段留空，我怎样才能让它们不插入到数据库中，所以没有只有用户 ID 的空行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:21:40.127

您可以将值放入数组中，然后检查它们是否为空（可能会推荐一些其他有关安全问题的检查）并创建 $values 变量，您可以将其加载到数据库中。

```
$item[0]      = mysql_real_escape_string(trim($_POST['item1']));
$itemcost[0]  = mysql_real_escape_string(trim($_POST['item1cost']));
$item[1]      = mysql_real_escape_string(trim($_POST['item2']));
$itemcost[1]  = mysql_real_escape_string(trim($_POST['item2cost']));
// and so on

$values = "";
for ($i = 0; $i < 2; ++$i) {
    if ($item[$i] != "" && $itemcost[$i] != "") {
        $values .= "($user,'$item[$i]', '$itemcost[$i]'),";
    }
}

/*********************
* MySQL INSERT query
*********************/

if ($values != "") {
  $values = substr($values, 0, -1);
  $query = "INSERT INTO monthly_expenses (`userid`, `item`, `amount`)" 
                                   . " VALUES $values";
} 
```

也可以将 HTML 输入字段名称作为数组提供，如 item[] 并将它们直接解析为 php-arrays。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:39:57.670

在摆姿势之前使用客户端验证。如果未按照您的要求填写表格，则会通知并强制用户填写。

请参阅本[**教程**](http://www.codeproject.com/Tips/404274/Client-Side-Validation-using-JavaScript)以获取帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:56:19.487

您可以将 html 存储为数组值。

```
 <input type="text" name="item[]" />
   <input type="text" name="itemcost[]" /> 
```

然后你可以像这样循环它们：

```
 $query = "INSERT INTO monthly_expenses (`userid`, `item`, `amount`) VALUES ";

   foreach($_POST['item'] as $key => $value){
   {
        // Check if it's not filled.
        if($value !== '')
        {
              $query .= "($user, '$value', $_POST['itemcost'][$key])"; // whatever you need to insert.
        }
   }
   // Run the query. 
```

我可能有一些错别字，但这个概念是存在的。

# apache - Apache 超载的服务器

> ID：13823947
> 
> 赞同：0
> 
> 时间：2012-12-11T16:12:10.727
> 
> 标签：apache, drupal, load, webserver

在具有 Apache 和 MySQL 的专用服务器上，如果流量超过一定数量的请求/分钟，我们就会遇到问题。在这种情况下，服务器变得完全没有响应。该服务器是具有 4GB RAM 的 Intel Dual-Core G6950，其上只有一个 Drupal 6 站点。

如果启用了 Boost（静态 HTML 缓存方法），则服务器在相同的流量下保持正常工作（负载几乎为零），因此这是解决方案的一部分。即使我想知道如何配置服务器，即使由于某种原因禁用了缓存，或者如果流量上升到 Apache 将再次关闭服务器的数字，即使启用了 Boost，它也不会关闭。

我发现将 MaxClients 设置为 10 可以确保服务器不会在禁用 Boost 缓存的情况下关闭，但我读到在这种情况下它应该设置为大约 600（150 * 大量 RAM）。这可能在启用 Boost 的情况下没问题，但显然不是没有它。

长话短说：我有点迷路了。我能做些什么来确保 Apache 不会破坏整个服务器？我不在乎在极端情况下 Apache 是否无法处理所有请求（启用 Boost 后，这不会很快发生），但它永远不会因为无法足够快地处理请求而变得完全无响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:05:50.560

最佳 MaxClients 值取决于 Apache 可用的内存量以及每个进程的平均内存量。在 4GB 机器上 600 的值可能有点高，因为每个进程可能占用 25 MB 或更多，这将需要 25MB x 600 = 15000MB 的可用内存。在您的情况下，我会尽量保守一点，并将 MaxClients 设置为 100-125。

# php - 将数组转换为 XML 时出错

> ID：13823952
> 
> 赞同：0
> 
> 时间：2012-12-11T16:12:19.027
> 
> 标签：php, xml, arrays

我正在构建一个 API。其中一个函数返回具有动态记录数的多维数组。当返回单个记录时，我的 array2xml 函数工作正常，但是当有多个记录时，我收到错误“XML Parsing Error: junk after document element”。我在下面包含了应该将其转换为 xml 的函数和未转换格式的数组：

```
/* Setting XML header */
            @header ("content-type: text/xml charset=utf-8");

            /* Initializing the XML Object */
            $xml = new XmlWriter();
            $xml->openMemory();
            $xml->startDocument('1.0', 'UTF-8');
            $xml->startElement('callback');
            $xml->writeAttribute('xmlns:xsi','http://www.w3.org/2001/XMLSchema-instance');
            $xml->writeAttribute('xsi:noNamespaceSchemaLocation','schema.xsd');

            /* Function that converts each array element to an XML node */
            function write(XMLWriter $xml, $data){
                foreach($data as $key => $value){
                    if(is_array($value)){
                            $xml->startElement($key);
                            write($xml, $value);
                            $xml->endElement();
                            continue;
                    }
                    $xml->writeElement($key, $value);
                }
            }

            /* Calls previously declared function, passing our results array as parameter */
            write($xml, $data);

            /* Closing last XML node */
            $xml->endElement();

            /* Printing the XML */
            echo $xml->outputMemory(true); 
```

被转换的数组：

```
Array
(
    [0] => Array
        (
            [Scope_CH] => Intruder Alarm Systems (ACPO) Certified                                                             
            [Scope_ID] => 1
        )

    [1] => Array
        (
            [Scope_CH] => CCTV Systems Approved                                                                               
            [Scope_ID] => 5
        )

) 
```

如果我从 xml 创建者中删除标头，输出是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<callback xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="schema.xsd"><Scope_CH>Intruder Alarm Systems (ACPO) Certified                                                             </Scope_CH><Scope_ID>1</Scope_ID></callback><Scope_CH>CCTV Systems Approved                                                                               </Scope_CH><Scope_ID>5</Scope_ID> 
```

# java - 返回作为方法参数给出的类型列表？

> ID：13823954
> 
> 赞同：2
> 
> 时间：2012-12-11T16:12:22.557
> 
> 标签：java, generics

我想创建一个方法来执行查询并返回一组特定类型的对象。类型作为参数提供给方法，如下所示：

```
Set<Person> people = Dao.executeQuery("select * from PERSON",Person.class); 
```

在 Dao 类中，我想定义方法如下：

```
public static Set<???> executeQuery(String sql, ????){} 
```

你能帮我写一下executeQuery方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:15:43.323

```
public static <T> Set<T> executeQuery(String sql, Class<T> klass) {

    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:19:21.103

```
public static <T> Set<T> executeQuery( String sql, Class<T> type ); 
```

# android - GroundOverlay 边界在创建后发生变化

> ID：13823955
> 
> 赞同：2
> 
> 时间：2012-12-11T16:12:24.570
> 
> 标签：android, google-maps

我目前正在 MapFragment 中定义多个 GroundOverlays。我正在通过 LatLngBounds 创建每个 GroundOverlay，并且在大多数情况下，所有内容都对齐；然而，一些 GroundOverlays 最终会略微偏离。

如果我在创建后记录边界，它们符合我的期望。我第二次记录它们时，它们略微偏离了。

```
LatLngBounds bounds = new LatLngBounds(new LatLng(point1_lat, point1_lon), new LatLng(point2_lat, point2_lon));

Log.d(TAG, "Bounds southwest: " + bounds.southwest.latitude + ", " + bounds.southwest.longitude);
Log.d(TAG, "Bounds northeast: " + bounds.northeast.latitude + ", " + bounds.northeast.longitude);

GroundOverlay groundOverlay = getMap().addGroundOverlay(new GroundOverlayOptions()
                        .image(bitmapDescriptor)
                        .positionFromBounds(bounds)
                    );

Log.d(TAG, "southwest: " + groundOverlay.getBounds().southwest.latitude + ", " + groundOverlay.getBounds().southwest.longitude);
Log.d(TAG, "northeast: " + groundOverlay.getBounds().northeast.latitude + ", " + groundOverlay.getBounds().northeast.longitude); 
```

任何想法为什么 GroundOverlay 创建会使纬度和经度发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T06:36:13.053

可能正在调整图像大小以确保宽度/高度的长度是 2 的幂。来自文档...

> **注意**：当图像添加到地图中时，它将被转换为边是 2 次方的图像。您可以通过使用尺寸为 2 次方的原始图像来避免这种转换，例如 128x512 或 1024x1024。

安迪。

# python - 使用 dict.fromkeys() 禁用自动 dict 排序？

> ID：13823956
> 
> 赞同：5
> 
> 时间：2012-12-11T16:12:24.350
> 
> 标签：python, dictionary, data-analysis

```
def parse_urls(weeks_urls):
    for wkey in weeks_urls.keys():
        results=urllib2.urlopen(weeks_urls[wkey])
        lines = list(csv.reader(results))
        lines=clean_lines(lines)
        week_dict=dict.fromkeys(lines[i][1] for i in range(len(lines)))
        fare_data=list((lines[i][1:]) for i in range(3,len(lines)))
        fare_data=get_fare_data(fare_data)
        n=3
        for station in week_dict: .....
....... 
```

当我用来`dict.fromkeys( )`从字符串列表中生成字典时，它会自动对它们进行排序，生成一个字典，其中的字符串按字母顺序排列。我需要保留字符串的原始顺序。有没有办法做到这一点？

感谢这里的任何帮助

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T16:14:08.143

> 它会自动对它们进行排序，生成一个按字母顺序排列的字符串

这不太正确。Python 的标准`dict`是无序的，这意味着它可以随意重新排序项目。因此，您不能依赖以任何特定顺序出现的键（也不能依赖于在插入/删除中保持相同的顺序）。

要保留插入顺序，您可以使用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)：

```
In [6]: l = [1, 2, 20, 5, 10]

In [7]: list(dict.fromkeys(l).keys())
Out[7]: [1, 2, 10, 20, 5]

In [8]: list(collections.OrderedDict.fromkeys(l).keys())
Out[8]: [1, 2, 20, 5, 10] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T16:13:53.673

Python[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)是“无序的”——在字典中产生项目的顺序取决于实现（和插入顺序），有时可能几乎是随机的，或者在其他时间（显然）很好地排序。对于 Cpython，这里为感兴趣的读者提供了一些[附加信息](https://stackoverflow.com/questions/12165200/order-of-unordered-python-sets/12165239#12165239)。

您可以使用 a[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)代替（它会记住插入顺序）。 `OrderedDict`在 python2.7 中添加，对于早期版本，python 官方文档中链接了一个[ActiveState 配方。](http://code.activestate.com/recipes/576693/)

# performance - 使用 Siege 和 AB 进行测试的准确度如何？

> ID：13823964
> 
> 赞同：23
> 
> 时间：2012-12-11T16:12:41.277
> 
> 标签：performance, apache, performance-testing

我很想知道我可以在多大程度上依赖 Siege 和 AB 的负载测试结果。我意识到他们没有考虑静态资产（图像、JS、CSS），但假设所有这些东西都是从 CDN 提供的，如果 Siege/AB 告诉我可以同时满足 200 个用户，我有什么理由应该不相信吗？我是否没有考虑任何其他因素，例如运行测试的机器可能存在的任何限制？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-12T03:36:10.523

这是一篇非常好的文章，讨论了尝试进行`Siege`或`ab`类型测试的陷阱，然后抽象出您的 web 应用程序或网站在负载下的性能。

[http://www.sonassi.com/knowledge-base/magento-kb/why-siege-isnt-an-accurate-test-tool-for-magento-performance/](http://www.sonassi.com/knowledge-base/magento-kb/why-siege-isnt-an-accurate-test-tool-for-magento-performance/)

### 以下是该页面中的一些项目符号，它们提出了进行此类测试的问题：

*   Siege 并不代表真实用户（或多个用户）在您的网站上实际执行的操作。它只能加载原始响应代码和 HTML，而不是页面中的所有其他元素（图像、CSS、JS 或其他静态内容）——如此有效，它只测试 PHP 性能。

*   它还具有非常有限的会话/cookie 支持，不支持流水线和对 HTTP/1.1 的基本支持。它产生的负载与真实用户的负载完全不同，因此虽然它有利于更改后的快速参考；它并不真正表明现实生活中的用户会发生任何变化。

*   Siege 很容易上当，它无法区分提供的静态文件（即纯 HTML 文件）或动态文件（即动态 Magento PHP 页面）。因此，如果您正在运行任何类型的静态文件代理，结果会立即出现偏差。此时——您将只测试缓存代理，而不是它背后的交付速度。

*   因此，那些使用 Varnish、Nginx 缓存、mod_pagecache 的人可以轻松地将页面缓冲到缓存中，您将看到低于 20 毫秒的渲染时间。如果您使用 Varnish，然后使用 Siege 来测试性能 - 您可能会加载图像而不是类别 URL，因为它会给出完全相同的结果。

*   测试远程服务器几乎没有意义，因为它是一个并发测试（即可以重复满足多少请求），直接的瓶颈是两台机器之间的网络连接。延迟和 TCP/IP 开销使测试远程站点完全没有意义，两台服务器之间的对等点之间最轻微的网络拥塞将立即显示性能下降。因此，真正开始发挥作用的是 TCP 3 次握手可以多快完成——被测试的服务器可以提供动态页面或静态 0 字节文件——你可以看到完全相同的性能速率，如连通性是瓶颈。

他们在文章中讨论的另一个对您网站的整体性能影响最大的问题是您的网站与访问它的客户之间的延迟。他们很好地解释了延迟如何以最终用户会感觉到的方式影响您的网站性能，但测试工具`Siege`的`ab`类型永远不会暴露。

再次摘录文章：

### 从英国ping到英国

```
[~]$ ping www.bytemark.co.uk -c4
PING www.bytemark.co.uk (212.110.161.177) 56(84) bytes of data.
64 bytes from extapp-front.bytemark.co.uk (212.110.161.177): icmp_seq=1 ttl=57 time=2.86 ms
64 bytes from extapp-front.bytemark.co.uk (212.110.161.177): icmp_seq=2 ttl=57 time=2.51 ms
64 bytes from extapp-front.bytemark.co.uk (212.110.161.177): icmp_seq=3 ttl=57 time=2.54 ms
64 bytes from extapp-front.bytemark.co.uk (212.110.161.177): icmp_seq=4 ttl=57 time=2.63 ms
--- www.bytemark.co.uk ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3005ms
rtt min/avg/max/mdev = 2.515/2.641/2.869/0.142 ms 
```

### 从英国ping到美国

```
[~]$ ping www.mediatemple.net -c 4
PING www.mediatemple.net (64.207.129.182) 56(84) bytes of data.
64 bytes from mediatemple.net (64.207.129.182): icmp_seq=1 ttl=49 time=158 ms
64 bytes from mediatemple.net (64.207.129.182): icmp_seq=2 ttl=49 time=154 ms
64 bytes from mediatemple.net (64.207.129.182): icmp_seq=3 ttl=49 time=154 ms
64 bytes from mediatemple.net (64.207.129.182): icmp_seq=4 ttl=49 time=154 ms

--- www.mediatemple.net ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3004ms
rtt min/avg/max/mdev = 154.155/155.282/158.321/1.802 ms 
```

> 您可以立即看到性能上的差异。对于从英国到美国的单个 TCP/IP 连接，它需要 156 毫秒，是英国服务器的 62 倍。这意味着，在您尝试任何事情之前，您在 Siege 上在一秒钟内可以实现的最大吞吐量将是每秒大约 6 个事务，仅由于延迟。

我强烈建议阅读整篇文章。它很好地解释了使用`Siege`和`ab`！

# c# - 在列表中查找项目的位置 - 第一，最后

> ID：13823965
> 
> 赞同：1
> 
> 时间：2012-12-11T16:12:43.030
> 
> 标签：c#

我目前正在处理程序开始时加载的项目列表。我正在尝试确定每个项目的位置。所以我有`First`显示第一个项目（当前）的按钮，`Next`它在第一个（Current.Next）之后显示以下项目，`Last`它应该显示最后一个项目，但它根本不显示任何内容。在按钮单击名为 的标签后显示结果`labelSpecificTree`。我尝试在`Last`按钮单击行内设置中断`Current = Trees.Last;`以查看结果，但没有给我任何具体细节。如何通过标签显示列表中的最后一项？

**代码**

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        ListOfTrees Trees = new ListOfTrees();
        FruitTrees Tree;
        FruitTrees Current;

        double Total;

        public class ListOfTrees
        {
            private int size;

            public ListOfTrees()
            {
                size = 0;
            }

            public int Count
            {
                get { return size; }
            }

            public FruitTrees First;
            public FruitTrees Last;

             public int Add_Initialize(FruitTrees NewItem)
             {
                 NewItem.Next = First;
                 First = NewItem;
                 Last = First.Next;

                 if (Last == null)
                 {
                     Last = First;
                 }

                 return size++;
             }

            public int Add(FruitTrees newItem)
            {
                if (First == null)
                    return Add_Initialize(newItem);

                FruitTrees item = First;
                while (item.Next != null)
                {
                    item = item.Next;
                }

                item.Next = newItem;
                return size++;
            }

        }

        public void Clear()
        {
            textBoxType.Clear();
            textBoxHeight.Clear();
            textBoxPrice.Clear();
            textBoxStock.Clear();
        }

        public void Current_Tree()
        {
            Current = Trees.First;
            labelSpecificTree.Text = Current.Type.ToString();
        }

        private void Form1_Load_1(object sender, EventArgs e)
        {

            Tree = new FruitTrees();
            Tree.Stock = 15;
            Tree.Type = "Pear";
            Tree.Price = 49.99;
            Tree.Height = 20;
            Total += Tree.Price * Tree.Stock;
            Trees.Add(Tree);

            ShowTrees();
            Current_Tree();
        }

        private void buttonLast_Click(object sender, EventArgs e)
        {
            Current = Trees.Last;
            labelSpecificTree.Text = Current.Type.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:27:13.880

在您的代码中，当您使用 Add 添加新项目时，您不会移动 Last。试试这个：

```
public int Add(FruitTrees newItem)
{
    if (First == null)
    return Add_Initialize(newItem);

    FruitTrees item = First;
    while (item.Next != null)
    {
        item = item.Next;
    }

    item.Next = newItem;
    Last = newItem;
    return size++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:27:03.130

您没有在 ListOfTrees.Add() 方法中设置 Last 。

尝试在您的`return size++;`陈述之前添加此内容：

```
Last = newItem; 
```

# php - 在 Xampp 和 godaddy 上安装 NET_DNS2

> ID：13823969
> 
> 赞同：0
> 
> 时间：2012-12-11T16:12:54.340
> 
> 标签：php, dns, pear

我想使用 PHP 获取域名记录。我找到了这个梨包[NET_DNS2](http://pear.php.net/package/Net_DNS2/download)。我如何在 Xampp 上使用这个包并使用库。我有 Godaddy 共享主机，我可以在我的共享服务器或任何其他解决方案上安装此软件包以获取记录。

我也可以使用 php 本机函数`dns_get_record("php.net");`来获取 DNS 信息。如果我使用它们，它将适用于每个域吗？使用本机 dns 记录功能有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:50:10.110

首先你需要先安装pear安装向导，

请参阅此处的文档：http: [//pear.php.net/manual/en/installation.getting.php](http://pear.php.net/manual/en/installation.getting.php)

然后您可以使用命令行安装任何 pear 包

```
pear install package_name 
```

# cakephp - CakePHP HABTM 递归问题

> ID：13823975
> 
> 赞同：0
> 
> 时间：2012-12-11T16:13:15.057
> 
> 标签：cakephp, has-and-belongs-to-many

为了解释我遇到的问题，我将使用一个示例。假设我正在构建一个系统，学生可以在其中注册课后课程，但管理员必须批准注册才能使其有效。所以我有这些模型：

*   日历（属于“老师”，hasAndBelongsToMany“学生”）
*   学生（hasAndBelongsToMany“日历”）
*   老师（有很多“日历”）

现在假设我想查看所有针对九年级学生的未批准注册的列表。我希望该列表包含日历日期、学生姓名和教师姓名。我会做这样的事情：

```
$this->request->data = $this->Student->CalendarsStudent->find('all', array(
    'conditions' => array(
        'CalendarsStudent.is_approved' => null,
        'Student.grade' => 9
    )
)); 
```

上面代码的问题是返回的数组缺少老师的名字：

```
Array
(
    [0] => Array
        (
            [CalendarsStudent] => Array
                (
                    [id] => 1274
                    [calendar_id] => 200
                    [student_id] => 872
                    [is_approved] => 
                )

            [Calendar] => Array
                (
                    [id] => 200
                    [date] => 2012-12-17
                    [teacher_id] => 1
                    [total_slots] => 15
                )

            [Student] => Array
                (
                    [id] => 872
                    [teacher_id] => 1
                    [first_name] => Billy
                    [last_name] => Smith
                    [grade] => 9
                )

        )

) 
```

如果我添加`'recursive' => 2`参数`find`，我会得到太多信息。`$this->request->data[0]['Calendar']`will have `[Teacher]`，这是我想要的，但它也会有`[Student]`，这是我不想要的。此外，`$this->request->data[0]['Student']`将有我不想要的子数组。似乎`Containable`可以解决这个问题，但我也无法让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:21:52.917

使用 CakePHP 的[[Containable Behavior]](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。这太棒了 - 易于使用，并且会返回您想要的任何东西。

**旁注：**如果您将“递归”用作除 -1 之外的任何东西，它应该是一个危险信号。Containable 是绝对可行的方法，因为它可以让您轻松准确地指定要返回的数据。递归通常会导致内存问题和/或其他不良情况。

**最佳实践 IMO：**在您的 AppModel.php 中 设置`$recursive = -1;`，并且永远不要将其设置为其他任何东西......永远。

# sql-server-2008 - 使用以前更新的值更新

> ID：13823978
> 
> 赞同：0
> 
> 时间：2012-12-11T16:13:22.887
> 
> 标签：sql-server-2008

我正在尝试在单个查询运行中使用以前更新的值来更新记录。这是一个正在运行的总案例，但它是一个 UPDATE 查询而不是一个 SELECT 查询。

表**库存**（简化）

```
Id Qty RunningQty ItShouldBeUpdatedTo InsteadItsUpdatedTo
1  200 0          200                 200
2  300 0          500                 300
3  400 0          900                 400
4  100 0          1000                100 
```

我当前的查询是这样的

```
UPDATE Inventory
SET RunningQty = ISNULL(A.RunningQuantity, 0) + Quantity
FROM Inventory I
OUTER APPLY
(
    -- Take previous row RunningQty
    SELECT TOP 1 RunningQty
    FROM Inventory
    WHERE Id < I.Id
    ORDER BY Id DESC
) A 
```

似乎更新了下一行，sql server 没有使用以前更新的值。

注意：这将是一个非常大的表，所以我使用前一行运行数量来计算它，并将该值与当前行数量相加，而不是从第一行计算它。

这样做的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:05:22.547

让我先说一下，这在 SQL Server 2012 中会更容易做到。在那个版本中，您将能够使用如下内容：

```
update i1
set i1.runningqty = i2.RunningQty
from inventory i1
inner join
(
  select id, SUM(qty) OVER(ORDER BY id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) RunningQty
  from inventory
) i2  
  on i1.id = i2.id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/9ee91/4)

但这在 SQL Server 2008 中并不容易，但是您应该能够使用如下内容：

```
declare @total int 
set @total = 0

update inventory
set runningqty = @total, 
  @total = @total + qty; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/5b57b/1)。

还有其他方法，包括在 sql server 2008 中使用游标来执行此操作。

# java - 使用安全管理器保护对象

> ID：13823982
> 
> 赞同：1
> 
> 时间：2012-12-11T16:13:29.100
> 
> 标签：java, security, object

我想使用 java.security.manager 创建自定义权限。基本上我想创建一个权限，策略文件必须指定，以便执行我的 Java 应用程序的用户能够使用 Java 的 GuardedObject 功能访问我正在保护的对象。我似乎无法让它工作。请在下面找到具体信息。如果我做错了，请告诉我。我是 Java 安全管理器的新手：

应用程序源代码：

```
import java.security.AccessControlException;
import java.security.Guard;
import java.security.GuardedObject;
import java.util.PropertyPermission;
import java.security.*;

class person {}

class custompermission extends BasicPermission {
custompermission(String name) {
super(name);
}

custompermission(String name, String action) {
super(name,action); 
}
}

public class program1 {
public static void main(String[] argv) throws Exception {
String person = "person";
Guard guard = new custompermission("perm");
GuardedObject gobj = new GuardedObject(person, guard);
try {
Object o = gobj.getObject();
} catch (AccessControlException e) {
e.printStackTrace();
}
}
} 
```

我的 jar 的 Manifest.txt 文件：

```
Main-Class: program1 
```

我的策略文件 - my.security.policy：

```
grant codeBase "file:/C:/users/root/desktop/temp/temp2/program1.jar" {               
permission "perm";
}; 
```

程序的编译和jar文件的创建：

```
C:\Users\root\Desktop\temp\temp2>javac program1.java
C:\Users\root\Desktop\temp\temp2>jar -cvfm program1.jar Manifest.txt *.class
added manifest
adding: custompermission.class(in = 335) (out= 234)(deflated 30%)
adding: person.class(in = 188) (out= 162)(deflated 13%)
adding: personpermission.class(in = 335) (out= 232)(deflated 30%)
adding: program1.class(in = 790) (out= 488)(deflated 38%) 
```

程序的执行：

```
C:\Users\root\Desktop\temp\temp2>java -Djava.security.manager -Djava.security.policy=my.security.policy -jar program1.jar
java.security.AccessControlException: access denied ("custompermission" "perm")
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at java.security.Permission.checkGuard(Unknown Source)
at java.security.GuardedObject.getObject(Unknown Source)
at program1.main(program1.java:37)
C:\Users\root\Desktop\temp\temp2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:01:43.210

您的代码在策略文件中缺少权限类定义。您的策略文件应类似于：

```
grant codeBase "file:/C:/users/root/desktop/temp/temp2/program1.jar" {               
    permission CustomPermission "perm";
}; 
```

而且我认为 CustomPermission 应该在它自己的文件中通过公共类。

# c - 检查结构数组中的索引在C中是否为空

> ID：13823984
> 
> 赞同：0
> 
> 时间：2012-12-11T16:13:33.377
> 
> 标签：c

我不是 C 的真正粉丝，但我为这个练习做了功课。到目前为止，我得到的是，在 C 中，初始化一个数组，据我所知，不像 JavaScript。C 有固定的数组，而不是由特定值初始化。所以`NULL`在这种情况下检查将不起作用。

我有一系列结构。我怎么知道数组中的索引是否为空（是否填充了结构）？

```
#define LIST_LENGTH 30

//This is the struct that is inserted in the array
typedef struct node{
    char fName[30];
    char mName[30];
    char lName[30];
    char id[8];
} NODE;

typedef struct {
    int size;   //size is the struct's total capacity (at 30)
    int length; //tracks how many elements are added, but not where
    NODE nodes[LIST_LENGTH]; //This is the array in question
} List;

//somewhere in my code, I have to insert a value to the array at a specific position.
//if that position is occupied, I have to find the nearest empty position
//to the right, and shift the values rightward for that spot to be empty 
```

此外，我们受限于在此练习中使用数组。如果我们被允许使用链表，这将是在公园里散步，因为我们已经知道如何使用动态列表。

我该怎么做？还是我从错误的角度看待问题（除了必须使用数组而不是链表）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T16:17:11.007

一种选择是在结构中使用某种哨兵值。例如，您可以检查该`id`字段的长度是否为零，这将指示数组中的一个未占用位置。

缺点是您必须在创建数组时正确初始化所有元素。如果您从数组中“删除”一个元素，您还必须重置标记值。

如其他答案之一所述，您还可以更改为具有指向结构的指针数组，在这种情况下，您可以直接检查 NULL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:17:39.657

C 中的数组没有空的位置。如果数组存在，则其中的所有元素都存在。

一个元素可能没有被初始化，但没有通用的方法来确定它，除非在你的程序中自己跟踪它。例如，一旦分配了数组，就初始化其中的所有内容。或者保持一个数字 N 表示数组的前 N ​​个元素已经被初始化。

如果您想知道每个单独的元素是否已被初始化，您必须自己维护该信息，要么在单独的数组中，要么在结构中添加一个标志，以便每个元素都有自己的标志，说明其余的是否该元素中的结构已被初始化。当然，您需要初始化这些标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:17:54.190

> 我有一系列结构。我怎么知道数组中的索引是否为空（未填充结构）？

您可以做的是向结构添加一个标志，isInitialized，以存储它是否已填充

```
//This is the struct that is inserted in the array
typedef struct node{
    char fName[30];
    char mName[30];
    char lName[30];
    char id[8];
    int  isInitialized;
} NODE; 
```

并将其在数组中的所有实例初始化为 0。

或者，您可以使用非法或“无用”值（例如，所有字符串长度为零，或特殊 ID）来初始化结构。

```
int isInitialized(NODE *s)
{
    /* Since C strings are zero-terminated, char id[8] is at most one
       seven-char string terminated by a binary zero. It can never be
       normally a sequence of eight 0xFF. */
    return memcmp(s->id, 0xFF, 8);
}

// You still have to manually mark nodes free at the beginning.
void initialize(NODE *s)
{
    memset(s->id, 0xFF, 8);
}

if (isInitialized(&(myList->nodes[15])))
{
    ...
} 
```

对上述代码的一个警告是，现在不能安全地获取和打印“id”：*必须*执行初始化检查，否则 printf() 可能无法找到终止零并继续前进，对于最后一个结构，可能超出可访问内存的边界并确定保护故障崩溃。然而，一个可能的原因是，由于打印未初始化的结构（其中可能缺少保存的二进制零）没有意义，因此无论如何都必须执行这样的检查。

或者，您可以保留一个计数器来记录到目前为止已经使用了多少结构（这假设您从未将数组“中间”的结构标记为可用）。

如果您有一个指向结构的指针数组，那么您将能够在指向尚未初始化的结构的指针中存储 NULL（即，分配了指针数组，它指向的结构不一定如此）；但是在这里你预先分配了结构，所以你必须以不同的方式来做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:24:05.137

例如，将“set/valid”字段添加到您的 NODE typedef 中，每次将 NODE 插入 List 时，只需将“set/valid”设置为 1。这样你总是可以判断这是否是有效的数组元素等。

# apache - 如何将新的/更改的文件从开发服务器上传到生产服务器？

> ID：13823985
> 
> 赞同：2
> 
> 时间：2012-12-11T16:13:32.480
> 
> 标签：apache, svn, ftp

最近我开始在我的开发工作流程中加入一些好的实践，所以我将开发服务器和生产服务器分开。我还使用 Subversion (Tortoise SVN) 合并了一个版本控制系统。

现在我遇到了将生产服务器（Apache 共享主机）与本地机器上最后一个开发版本的文件同步的问题。

之前我没有这个问题，因为我通过 Filezilla 直接处理服务器文件。但是现在我不知道如何以有效的方式传输文件以及这方面的良好做法是什么。

我读了一些关于 Ant 和 Phing 的东西，但我不确定这是否适合我或者是不必要的复杂性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:52:54.450

[Rsync](http://rsync.samba.org/)是一个跨平台工具，旨在帮助解决此类情况；我曾多次将其用于类似目的。这个[DevShed 教程](http://www.devshed.com/c/a/Administration/File-Synchronization-With-Rsync/)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:34:29.300

我不认为你想“自动化”它，而是建立对你的部署和集成过程的控制。我通常喜欢 SVN，但它有一些错误，我遇到的一个问题是它不支持基线 - 相反，如果你想拥有一个稳定的版本来提升到更高的环境，你需要创建存储库的物理分支同时继续推进[后备箱](https://stackoverflow.com/questions/16142/what-do-branch-tag-and-trunk-mean-in-subversion-repositories)。

无论如何，你应该看看持续集成和[Jenkins](http://en.wikipedia.org/wiki/Jenkins_%28software%29)。这是一个相当广泛的话题，无法给出具体的答案。有很多来龙去脉，你有什么。取决于您的应用程序平台、组件、您是否有数据库更改、您是在处理外部 Web 服务还是第 3 方 API 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T21:42:23.550

也许有更多结构化的解决方案，但使用 Tortoise SVN，您只能导出文件夹树结构中版本之间更改的文件。然后，像往常一样在 Filezilla 中上传。

看看：http: [//verysimple.com/2007/09/06/using-tortoisesvn-to-export-only-newmodified-files/](http://verysimple.com/2007/09/06/using-tortoisesvn-to-export-only-newmodified-files/)

*   使用 TortoiseSVN，右键单击您的工作文件夹并从 TortoiseSVN 菜单中选择“显示日志”。
*   单击上次发布的修订
*   Ctrl+单击 HEAD 修订版（或您要发布的任何修订版），以便突出显示旧修订版和新修订版。
*   右键单击任一突出显示的修订，然后选择“比较修订”。这将打开一个对话框窗口，列出所有新的/修改的文件。
*   从此列表中选择所有文件 (Ctrl+a)，然后右键单击突出显示的文件并选择“将选择导出到...”</li>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T00:44:36.197

**边注：**

您必须打开有关您的工作流程和配置的更多详细信息 - 适用的解决方案取决于它。我看到游戏中有 4 个主要节点：Workplace、Repo Server、DEV、PROD，一些节点可能是联合的（1+2、2+3），可能有不同的工具集（你有 SSH、Rsync、NFS、Subversion*客户端*吗？在开发|产品上）。所有细节都很重要

在任何情况下 - Subversion 存储库都有这样的东西，例如[hooks](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)，在您的情况下，可以使用[post-commit 钩子](http://svnbook.red-bean.com/en/1.7/svn.ref.reposhooks.post-commit.html)（在每次提交后在 Repository Server 端执行）

如果这个钩子（任何代码，可以在无人值守模式下执行），您可以定义和实现任何规则以在任何条件下执行部署到任何目标。你必须只知道

*   将使用哪种传输方式传输文件
*   您在服务器上的网络空间是什么（仅干净的未版本化文件的工作副本 - 两种解决方案都有赞成和反对集） - 它将定义您必须在挂钩中实施的部署策略（“导出”或“更新”）

[一些指向脚本的链接](https://stackoverflow.com/a/13063724/960558)，这些链接将受修订（或修订范围）影响的文件导出到未版本化的树中

# java - Neo4j 的批量插入

> ID：13823988
> 
> 赞同：5
> 
> 时间：2012-12-11T16:13:42.190
> 
> 标签：java, mysql, graph, neo4j, batch-processing

我正在从一个表中导入 23 亿个关系，导入速度不是很快，每小时 500 万个，这需要 20 天才能完成迁移。我听说过 neo4j 批量插入和[批量插入实用程序](https://github.com/jexp/batch-import/)。该实用程序通过从 csv 文件导入来做一些有趣的事情，但最新的代码有些损坏并且无法运行。

我在 neo4j 中有大约 100M 的关系，我必须检查是否有重复的关系。

我怎样才能快速neo4j中的东西

按当前代码就像

```
begin transaction
for 50K relationships
create or get user node for user A
create or get user node for user B
check there is relationship KNOW between A to B if not create the relationhsip
end transaction 
```

我还阅读了以下内容：

*   [Neo4j 的批量插入](http://docs.neo4j.org/chunked/milestone/batchinsert.html)
*   [如何加快 Neo4j 中的插入速度](https://stackoverflow.com/questions/13686850/how-to-speed-up-insertion-in-neo4j-from-mysql)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:36:52.233

在关系的情况下，假设你有足够的存储空间，我会尽量不在导入阶段建立唯一的关系——现在我实际上也在导入一个包含约 3 百万条记录的 SQL 表，但我总是创建一个关系并且不介意它是否是重复的。

您可以稍后在导入后简单地执行密码查询，这将创建这样的独特关系：

```
START n=node(*) MATCH n-[:KNOW]-m
CREATE UNIQUE n-[:KNOW2]-m; 
```

和

```
START r=rel(*) where type(r)='KNOW' delete r; 
```

至少这是我现在的方法，运行后面的密码查询只需要几分钟。问题可能是当你真的有数十亿个节点时，密码查询可能会陷入内存错误（取决于你为 neo4j 引擎设置了多少缓存）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:27:52.197

您如何“获取用户 A 的用户节点”，从索引中查找？索引查找确实减慢了批量插入的速度。尝试在索引“前面”的简单 HashMap 中缓存尽可能多的用户，或使用 BatchInserterIndex#setCacheCapacity

# python - 导入 PIL 图像有问题

> ID：13823989
> 
> 赞同：0
> 
> 时间：2012-12-11T16:13:43.197
> 
> 标签：python, python-imaging-library

我想在 PIL 中使用 Image 模块

如果我执行以下操作

```
 import PIL
    PIL.Image.open() 
```

它说没有名为 Image 的模块。

但以下工作正常

```
 from PIL import Image 
```

我正在使用一个包并且无法更改 PIL.Image.open()

如何克服这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:26:43.103

鸭子打字来救援。`PIL`实际上不必是一个模块，它只需要是一个具有属性的对象`Image`。

```
>>> from PIL import Image
>>> class MakePIL(object):
    def __init__(self, Image):
        self.Image = Image

>>> PIL = MakePIL(Image)
>>> PIL.Image
<module 'PIL.Image' from 'C:\Python27\lib\site-packages\PIL\Image.pyc'>
>>> PIL.Image.open(r'c:\temp\temp.jpg')
<PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=400x250 at 0x2C88D78> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T17:16:16.363

尝试：

```
import PIL.Image 
```

那是你要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:14:09.237

你可以试试：

```
from PIL import Image as MyImage 
```

并使用 MyImage

# php - 在 $_FILES 循环中创建缩略图失败

> ID：13823990
> 
> 赞同：0
> 
> 时间：2012-12-11T16:13:46.523
> 
> 标签：php, codeigniter, imagelibrary

我遍历 $_FILES 来创建上传图片的缩略图。它适用于第一张图片，但不适用于以下图片。我是否错过了添加特殊行或我的代码中有流？

注意：原始文件已成功上传并存在于文件夹中，然后再从中创建拇指。

当我回显错误时，我得到：“*您的服务器不支持处理此类图像所需的 GD 功能。* ”。当我自己上传它时，它可以工作！！！！

谢谢

```
public function upload_image()
{
    $config['upload_path']      = './web/uploads/images/';
    $config['allowed_types']    = 'gif|jpg|png';
    $config['max_size']         = 5120;
    $config['max_width']        = '0';
    $config['max_height']       = '0';
    $config['encrypt_name']     = true;

    $this->load->library('upload');
    $this->upload->initialize($config);     

   foreach ($_FILES as $file => $value)
   {
      $this->upload->do_upload($file);

      $result = $this->upload->data();

      if ($this->manipulate_image($result['file_name']) === false)
      {
          echo 'Failed to create thumb for the image ' . $value['name'] . '<br />';
      }
   }
}

    public function manipulate_image($file_name)
    {
        $config['image_library']    = 'gd2';
        $config['source_image']     = './web/uploads/images/' . $file_name;
        $config['create_thumb']     = true;
        $config['maintain_ratio']   = false;
        $config['width']            = 100;
        $config['height']           = 100;
        //$config['master_dim']     = 'width';
        $config['thumb_marker']     = '_thumb';

        $this->load->library('image_lib', $config);

        if (! $this->image_lib->resize())
        {
            $this->image_lib->clear();
            return false;
        }

        $this->image_lib->clear();
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:29:53.670

我看到两件事，首先，我会将`load`库上的 移到循环之外，`foreach`然后`initialize`在循环内部使用来设置配置：

```
$this->image_lib->initialize($config); 
```

此外，如此[处](http://ellislab.com/codeigniter/user-guide/libraries/image_lib.html)所述，您可以使用

```
echo $this->image_lib->display_errors(); 
```

为了更深入地了解您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:28:43.693

显然在循环中多次加载加载 image_lib 会导致此问题。

在不包含循环的情况下解决。

# android - 在 Android 上使用 NFC 将简单数据读入变量

> ID：13823995
> 
> 赞同：0
> 
> 时间：2012-12-11T16:13:53.547
> 
> 标签：android, nfc, ndef, android-applicationrecord

我正在制作一个简单的 Android 应用程序。主要功能是，我想从 NFC 标签中读取数据。我已经构建了基本应用程序（不比 Hello World 应用程序多多少）。我正在使用 Eclipse。我的标签上有 Android 应用程序记录，当我的标签被扫描时，应用程序成功启动。我只是不确定如何继续。我需要：

*   除了 AAR，标签中还存储了一个四位数字。

*   扫描标签时，打开应用程序并将四位数字存储在局部变量中（我认为使用意图？）。

感谢任何帮助，以及完成工作的最简单的代码。这是我的第一个 Android 应用程序，也是第一次使用 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:20:10.327

在您的启动器活动中，您应该检查意图类型是否与您存储在标签中的相同 - getIntent.getType()。然后您可以使用以下代码从标签中读取数据：

```
Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
NdefMessage msg = (NdefMessage)rawMsgs[0];
NdefRecord cardRecord = msg.getRecords()[0];
String message = new String(cardRecord.getPayload()); 
```

如果它是一个数字，那么您需要从消息中解析它。我希望这可以帮助你。

# .net - 在 IIS 中启动应用程序池后调用 Application_Start

> ID：13823998
> 
> 赞同：5
> 
> 时间：2012-12-11T16:13:56.917
> 
> 标签：.net, iis-7.5, application-start

我想知道如何为下一个要求设置 IIS 或应用程序（如果需要）： - 当应用程序池在 IIS 中启动时，它应该调用 Global.asax 中的 Application_Start

我正在使用 applicationHost.config 获取以下代码：

```
<applicationPools>
        <add name="mySite" autoStart="true" managedRuntimeVersion="v4.0" startMode="AlwaysRunning" />
        <applicationPoolDefaults>
            <processModel identityType="ApplicationPoolIdentity" loadUserProfile="true" setProfileEnvironment="false" />
        </applicationPoolDefaults>
    </applicationPools> 
```

. .

```
 <site name="mySite" id="2" serverAutoStart="true">
            <application path="/" serviceAutoStartEnabled="true" applicationPool="mySite">
                <virtualDirectory path="/" physicalPath="C:\inetpub\wwwroot\mySite" />
            </application>
            <bindings>
                <binding protocol="http" bindingInformation="127.0.0.1:8080:" />
            </bindings>
        </site> 
```

到目前为止，仅当请求完成时才会调用 Application_Start。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-20T21:09:38.737

我只是想补充@paul 所说的话，并同意我永远无法让 Scott Guthrie[在他的博客](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)上所说的完全发挥作用。使用：

```
<applicationPools>

    <add name="MyAppWorkerProcess" managedRuntimeVersion="v4.0" startMode="AlwaysRunning" />

</applicationPools> 
```

将在回收后预加载应用程序池（例如，在回收应用程序池时看到 w3wp.exe 进程重新加载）。

但我从来没有能够让第二部分工作：

```
<sites>

     <site name="MySite" id="1">

          <application path="/" applicationPool="MyAppWorkerProcess" serviceAutoStartEnabled="true" />

     </site>

</sites> 
```

这可能是因为在使用serviceAutoStartEnabled**时，还需要使用****serviceAutoStartProvider**，这对我来说太过分了，因为我只是希望初始化**Global.asax 的 Application_Start 。**

幸运的是，在阅读[了这篇文章](http://www.orcsweb.com/blog/terri/implementing-application-initialization-on-iis-7-5/)并安装了[应用程序初始化模块](http://www.iis.net/downloads/microsoft/application-initialization)并在应用程序配置中使用这个值之后：

```
<sites>

     <site name="MySite" id="1">

          <application path="/" applicationPool="MyAppWorkerProcess" preloadEnabled="true" />

     </site>

</sites> 
```

我能够看到**Application_Start**在初始化期间被调用。这将我的 10 秒初始 Web 服务调用变成了 750 毫秒的初始 Web 服务调用。使用 preloadEnabled 正是我所需要的。我希望它也能帮助其他人。

# jquery - 使用 emberjs 开发多页面应用程序？

> ID：13823999
> 
> 赞同：0
> 
> 时间：2012-12-11T16:13:57.353
> 
> 标签：jquery, ember.js

我想用 emberjs 开发一个多页 Web 应用程序。

例如： 1) 登录页面 2) Mian view

显示第一个登录页面，一旦登录成功，我需要显示主视图，其中包含其他子视图（如导航）。

我认为为此，emberJS、statemanger 和路由器很重要。但是伙计们，关于这方面的基础知识的文档非常少。

请您指导我，如何进行！

谢谢大家

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T16:53:54.670

这是我的收藏，根据你对Ember的理解程度挑选

**来自 Ember 官方**

*   [文档](http://emberjs.com/documentation/)*   [指南](http://emberjs.com/guides/)*   [API](http://emberjs.com/api/)*   [来自 Emberjs github 项目的更高级和详细的文档](https://github.com/emberjs/website/tree/master/source/guides)（我猜这将在未来的官方网站上）*   [余烬数据](https://github.com/emberjs/data)

    **一些关键概念**

    *   [了解 Ember 对象](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)*   [命名约定](http://www.emberist.com/2012/04/09/naming-conventions.html)*   [类中的绝对路径](http://www.emberist.com/2012/04/30/absolute-paths-in-classes.html)

    **例子**

    *   [余烬托多](https://github.com/emberjs/todos)*   [最小可行的 Ember 应用程序](http://trek.github.com/)

    ****附加功能****

    *   **[有用的 Ember 函数](http://code418.com/blog/2012/03/08/useful-emberjs-functions/)***   **[灰烬链接](https://github.com/emberjs/ember.js/wiki/Links)**