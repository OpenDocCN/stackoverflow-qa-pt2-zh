# StackOverflow 问答 14516000-14516999

# php - 将本地文件替换为在 ftp 中下载文件

> ID：14516001
> 
> 赞同：0
> 
> 时间：2013-01-25T05:38:41.527
> 
> 标签：php, ftp

```
<?php
$local_file = "/home/zzh/Desktop/1.txt";
$server_file = "/var/www/helpdesk/1.txt";
$ftpserver = "xxx.xxx.xxx.xx";
$port = xx;
$conn_id = ftp_connect($ftpserver,$port) or die('can\'t connect to ftp'); 
$ftpname="xxx";
$ftppass = "xxx";
ftp_login($conn_id, $ftpname, $ftppass); 

if (ftp_get($conn_id, $local_file, $server_file, FTP_ASCII)) {
echo "Successfully written to $local_file\n";
} else {
echo "There was a problem\n";
}
// close the connection
ftp_close($conn_id);
?> 
```

我想用这个php登录ftp服务器下载1.txt来替换桌面上的1.txt，但是好像不行，我用的是ubuntu。需要帮助。

附言。我可以成功连接到ftp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:42:14.013

It should replace it if IIRC.

If not, why not do

```
if ( file_exists($local_file) ) unlink($local_file) 
```

This would go before your ftp_get procedure.

# mysql - 更改大型数据表的字符集的更好方法是什么？

> ID：14516003
> 
> 赞同：5
> 
> 时间：2013-01-25T05:38:56.487
> 
> 标签：mysql, sql, character-encoding

在我的生产数据库中，警报相关的表是使用默认的“拉丁语”字符集创建的，因此，当我们尝试在表中插入日文字符时会出错。我们需要将表和列的默认字符集更改为 UTF8。由于这些表有大量数据，Alter 命令可能需要很长时间（在我的本地数据库中使用相同数量的数据需要 5 小时）并锁定表会导致数据丢失。我们能否计划一种机制将 Charset 更改为 UTF8，而不会丢失数据。

更改大型数据表的字符集的更好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-16T13:40:40.947

您可以查看 Percona Toolkit::online-chema-change 工具： [pt-online-schema-change](http://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html)
它正是这样做的 - “在不阻塞读取或写入的情况下更改表的结构” - 有一些限制（仅限 InnoDB 表等）和涉及的风险。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T05:51:15.727

我在 mysql 手册[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)上找到了这个：

> 在大多数情况下，ALTER TABLE 会制作原始表的临时副本。MySQL 等待其他正在修改表的操作，然后继续。它将更改合并到副本中，删除原始表并重命名新表。在执行 ALTER TABLE 时，其他会话可以读取原始表。在 ALTER TABLE 操作开始后开始的对表的更新和写入会停止，直到新表准备好，然后自动重定向到新表，没有任何失败的更新

所以是的 - 在这样做时尽量减少停机时间是很棘手的。这取决于您的表的使用情况，是否有更多的读/写？

我能想到的一种方法是使用某种复制。因此，创建一个使用 UTF-8 的新 Alert 表，并找到一种将原始表复制到新表而不影响可用性/吞吐量的方法。当复制完成（或足够接近）时，通过重命名来切换表？

当然，这说起来容易做起来难——如果可能的话，需要更多的学习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-30T10:26:42.020

当您设置复制发出停止从命令并更改表时，在其他机器或实例上创建数据库的复制副本。如果您有多个表，则在每次对话之间您可以考虑再次发出 start slave 以同步两个数据库。（如果您不这样做，同步可能需要更长的时间）当您完成转换时，复制的副本可以替换您的旧生产数据库并删除旧数据库。这是我发现减少停机时间的方法。

# vba - 如果数组中的工作表不存在，则 VBA 代码忽略错误

> ID：14516005
> 
> 赞同：0
> 
> 时间：2013-01-25T05:39:09.160
> 
> 标签：vba, excel

我正在尝试将特定工作表合并到工作簿中的一张工作表中。这里的挑战是阵列中的工作表可能并非一直可用。所以宏应该忽略那些并移动到下一张表来复制数据。我已经编写了代码，但是当工作表不存在时，宏会出现错误。

```
Sub test()
Dim MyArr, j As Long
Dim ws As Worksheet
Dim sary, i As Long

Worksheets.Add Before:=Worksheets("Equity")
ActiveSheet.Name = "Consolidated"
MyArr = Array("Sample Sheet_Equity", "Sample Sheet_Funds", "Sample Sheet_Warrants",    "Eq", "Fu", "Wa")

For j = 0 To UBound(MyArr)

Set ws = Worksheets(MyArr(j))

If Not ws Is Nothing Then

    ws.Select
    Rows("2:2").Select
    Range(Selection, Selection.End(xlDown)).Select
    Selection.Copy
    Sheets("Consolidated").Select
    Range("A2").End(xlDown).Offset(1, 0).Select

    ActiveSheet.Paste
End If
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:46:26.360

你可以这样做：

```
For j = 0 To UBound(MyArr)
    On Error Resume Next
    Set ws = Worksheets(MyArr(j))
    If Err.Number = 0 Then
        On Error GoTo 0    
        If Not ws Is Nothing Then
            'Your copying code goes here
        End If
    Else
        Err.Clear
    End If
Next 
```

**更新：**感谢 Doug Glancy 的评论，这里是更精简的版本

```
For j = 0 To UBound(MyArr)
    Set ws = Nothing

    On Error Resume Next
    Set ws = Worksheets(MyArr(j))
    On Error GoTo 0    

    If Not ws Is Nothing Then
        'Your copying code goes here
    End If
Next 
```

# jsp - 在 JSP 中对请求参数进行类型转换

> ID：14516009
> 
> 赞同：0
> 
> 时间：2013-01-25T05:39:25.300
> 
> 标签：jsp, exception, numbers, format

我正在尝试对请求参数“gross”进行类型转换，它抛出了一个数字格式异常。

下面是我的 JSP：

```
 <%
    if (request != null) `enter code here`
             {
    String gross = request.getParameter("gross");   //GROSS PARAM
    int grossSal = Integer.parseInt(gross);          //Type-Casting
    double netSal = 0;
%>

<jsp:useBean id="emp" class="com.source.EmpPOJO" scope="session" />
<jsp:setProperty name="emp" property="id" />
<jsp:setProperty name="emp" property="name" />
<jsp:setProperty name="emp" property="desg" />
<jsp:setProperty name="emp" property="gross" value='<%=grossSal%>' />

<%
    netSal = emp.calculateNet();
    }
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:47:08.573

更改您的代码，如下所示：

```
<%
if (request != null) `enter code here`
         {
String gross = request.getParameter("gross");   //GROSS PARAM
if(gross!=null)
{
    int grossSal = Integer.parseInt(gross);          //Type-Casting
}
double netSal = 0;
%> 
```

我已经添加了`if(gross!=null)`，因为您的脚本也会在您的表单加载时运行，并且如果它没有获得所需的值，它将给出异常。

# azure - 如何通过网站 MVC4 连接 Azure Blob 存储

> ID：14516011
> 
> 赞同：0
> 
> 时间：2013-01-25T05:39:43.863
> 
> 标签：azure, web, blob

我在 Windows Azure、MVC4 上开发了一个网站。我尝试从 blob 上传和获取照片。我的相关代码（我从网络上的其他示例中获得）：

var storageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings["StorageConnection"].ConnectionString);

```
 var blobStorage = storageAccount.CreateCloudBlobClient();
        CloudBlobContainer container = blobStorage.GetContainerReference("abc");
        container.CreateIfNotExists();

            var permissions = container.GetPermissions();
            permissions.PublicAccess = BlobContainerPublicAccessType.Container;
            container.SetPermissions(permissions); 
```

我相关的 web.config 代码：

```
<add name="StorageConnection" connectionString="DefaultEndPointsProtocol=https;AccountName=abc;AccountKey=*******"/> 
```

当我运行时，出现格式异常。请注意，它是网站。

根据一些帖子，当我将连接字符串放入 app.config 时，没有解决方案。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:16:59.513

You shall not use `connectionStrings` section to store Azure Storage Connection string! Use `appSettings` instead and you will have no issues. It is confusion that the Storage credentials is also named "Connection string", but it has nothing to do with the `connectionStrings` section in your configuration file. `connectionStrings` section is intended solely for use DataBase connection strings.

# c# - VS 2010 automatic rebuild project after modification non .cs file

> ID：14516012
> 
> 赞同：0
> 
> 时间：2013-01-25T05:39:48.640
> 
> 标签：c#, wpf, visual-studio-2010, build

In my C# project(WPF), I have a XML file, and I need to modify this file very often, because it is metadata for my application. After modifying this file, I pressed F5 for debugging my app, but the project would not rebuild, and I got an old version of this file in the debug folder. I need to force a rebuild of the project every time after modifying the XML file.

Can i tune VS 2010 to automatically rebuild the project after modifying the XML file?

Xml file properties in VS: `Build Action=Content`, `Copy to Output Directory=Always`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:55:58.887

1) 打开“工具”菜单，点击“选项”。

2) 展开“项目和解决方案”。

3) 单击“构建并运行”选项卡。

4) 在“On Run, when projects are out of date”下拉菜单中，选择“Always build”。

# c# - converting text in textbox to decimal format

> ID：14516013
> 
> 赞同：1
> 
> 时间：2013-01-25T05:39:59.650
> 
> 标签：c#, datagridview

I have Textbox which takes decimal values. I have written Keypress event to enter decimal numbers. But when I am trying to convert the value in the textbox to Decimal format to store in database, it is only converting it to Integer.

I am trying to convert text to decimal as follows:

```
dr["Total Amount"] = Decimal.Parse(txtTotalAmount.Text.ToString()); 
```

well I am using the above code with the `datagridview`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:50:21.290

请检查您表`DataType`中的**总金额**。如果您使用 SQL Server 并且想要存储十进制值，那么您必须根据需要使用[货币](http://msdn.microsoft.com/en-us/library/ms179882.aspx)或[十进制](http://msdn.microsoft.com/en-us/library/ms187746.aspx)。
注意：`DECIMAL(2,2)`和`DECIMAL(2,4)`是不同的数据类型。这意味着 11.22 和 11.2222

# python - selenium with python web crawler

> ID：14516014
> 
> 赞同：1
> 
> 时间：2013-01-25T05:40:03.147
> 
> 标签：python, selenium, web-crawler

I want to screen scrape a web site having multiple pages. These pages are loaded dynamically without changing the URL. Hence I'm using selenium to screen scrape it. But I'm getting an exception for this simple program.

```
import re
from contextlib import closing
from selenium.webdriver import Firefox 

url="http://www.samsung.com/in/consumer/mobile-phone/mobile-phone/smartphone/"

with closing(Firefox()) as browser:
    n = 2
    link = browser.find_element_by_link_text(str(n))
    link.click()
    #web_page=browser.page_source
    #print type(web_page) 
```

Error is as follows

```
raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.NoSuchElementException: Message: u'Unable to locate element: {"method":"link text","selector":"2"}' ; Stacktrace: Method FirefoxDriver.prototype.findElementInternal_ threw an error in file:///tmp/tmpMJeeTr/extensions/fxdriver@googlecode.com/components/driver_component.js 
```

Is it the problem with the url given or with the firefox browser. Would be great help if someone helped me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T19:11:01.003

我正在开发一个可能涵盖您（或其他人）用例的python模块：

[https://github.com/cmwslw/selenium-crawler](https://github.com/cmwslw/selenium-crawler)

它将记录的 selenium 脚本转换为爬虫函数，从而避免编写上述任何代码。它适用于动态加载内容的页面。我希望有人觉得这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:38:37.147

我认为您的主要问题是页面本身需要一段时间才能加载，并且您立即尝试访问该链接（可能尚未呈现，因此堆栈跟踪）。您可以尝试的一件事是在您的 中使用隐式等待[1](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)`browser`，这将告诉您`browser`等待一段时间以使元素在超时之前出现。在您的情况下，您可以尝试以下操作，这将在轮询 DOM 以获取特定项目（在本例中为链接文本）时最多等待 10 秒`2`：

```
browser.implicitly_wait(10)
n = 2
link = browser.find_element_by_link_text(str(n))
link.click()
#web_page=browser.page_source
#print type(web_page) 
```

# haskell - 如何在 Haskell 中调用 void C 函数

> ID：14516022
> 
> 赞同：3
> 
> 时间：2013-01-25T05:40:39.617
> 
> 标签：haskell, ffi

我正在尝试使用外部函数接口在 Haskell 中调用 C 文件的主函数。

主函数声明如下：

```
int main(void); 
```

我无法弄清楚要告诉 Haskell 函数如何处理 void 类型。我无法修改 C 源代码。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T05:54:58.350

像 C 中那样“接受”的函数`void`不接受任何参数（这看起来更像是 C 问题而不是 Haskell 问题）。导入它的类型只是`IO Int`.

（请注意，通过 FFI 从 Haskell 调用实际函数可能不是一个好主意`main`。但这取决于您。）

# mysql - 当查询有 GROUP BY 时如何获得总数的百分比？

> ID：14516023
> 
> 赞同：27
> 
> 时间：2013-01-25T05:40:41.863
> 
> 标签：mysql, sql

假设我有一个包含电影演员姓名和他们去过的电影的非标准化表格。例如。

```
CREATE TABLE movies_actors (
  movies_actors_id INT,
  movie VARCHAR(255),
  actor VARCHAR(255),
  PRIMARY KEY (movies_actors_id)
); 
```

我会`SELECT actor, COUNT(1) FROM movies_actors GROUP BY actor`查明该演员参演了多少部电影。但我也想查明该演员参演的电影的百分比。

我想我可以这样做：

```
SELECT
  actor,
  COUNT(1) AS total,
  COUNT(1) / (SELECT COUNT(1) FROM movies_actors) * 100 AS avg
FROM movies_actors
GROUP BY actor; 
```

但这似乎...... idk...... 恶心。

有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-25T05:45:51.460

对于大型集合，JOIN 可能比子查询执行得更好。

```
SELECT ma.actor
     , COUNT(1) AS total
     , COUNT(1) / t.cnt * 100 AS `percentage`
  FROM movies_actors ma
 CROSS
  JOIN (SELECT COUNT(1) AS cnt FROM movies_actors) t
 GROUP
    BY ma.actor
     , t.cnt 
```

对于大型集合，并且当返回很大比例的行时，JOIN 操作通常可以胜过子查询。在你的情况下，它不是一个相关的子查询，所以 MySQL 不应该多次执行，所以它可能没有任何区别。

请注意，对于 ... 的非粉丝，`COUNT(1)`我们可以将任何和所有出现的 替换为`COUNT(1)`or`COUNT(*)`以`IFNULL(SUM(1),0)`达到等效的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:57:18.317

每当您想从同一个表中获取操作数据时，请执行自交叉连接。

```
SELECT
m.actor,
COUNT(m.actor) AS total,
(COUNT(m.actor) / t.total_movies) * 100 AS avg
FROM movies_actors m
cross (select count(*) as total_movies from movies_actors) t
GROUP BY m.actor; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-18T12:29:39.173

不使用连接和多个查询：-

```
select actor,counter,  100 * counter / @total as percentage
from(
select actor, 
        case when actor is null
            then @total := count(*)
            else count(*)
        end as counter
    from movies_actors 
    group by actor
    with rollup
) mytable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:47:57.357

我不确定它是否“更好”，但你可以做一个 SUM 并在其他地方做数学：

```
SELECT actor,
    COUNT(1) AS total,
    SUM(oneMoviePercentPts) AS percentage
FROM movies_actors
CROSS JOIN 
(
    SELECT 100 / CAST(COUNT(1) AS DECIMAL(15,4)) AS oneMoviePercentPts 
    FROM movies_actors
) t
GROUP BY actor 
```

我希望 MySQL 优化器足够聪明，不会多次执行您的子查询，但连接语法使这一点变得明确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-06T17:26:11.590

这对我有用：

```
SELECT tmpTotal.yearmonth, tmpTotal.rec_count, 
      (tmpTotal.rec_count / @myCumul) * 100 AS myPercentage
FROM
(
  SELECT tmpResult.*, @myCumul := @myCumul + tmpResult.rec_count AS myNewCumul
  FROM
  (
    SELECT date_format(d.created_at, '%Y/%m') as yearmonth, count(*) rec_count
    FROM cf4a_webapp.factTable d 
      join cf4a_webapp.dimTable c on (d.client_id = c.id)
    WHERE c.id = 25 
      AND d.created_at >= '2019-01-01 00:00:01' 
      AND d.created_at < '2020-01-01 00:00:01'
    GROUP BY yearmonth
  ) tmpResult
  JOIN (SELECT @myCumul := 0) tmpCumul
) tmpTotal; 
```

# mvvm - Knockout Model vs ViewModel

> ID：14516025
> 
> 赞同：8
> 
> 时间：2013-01-25T05:40:46.190
> 
> 标签：mvvm, knockout.js

I am trying to understand the difference between Model and ViewModel in KO. I understand the conceptual difference, but to me it seems that all Models in KO will become or are candidates to become ViewModels. Ill explain:

Say you have a table with a row of seats, so in your main **ViewModel** you will initialise and load a collection of objects from a Seat **Model** into an observable array.

Now you want to hide display seats based on a certain property of seats...this is the point where your model becomes another viewmodel...

So is it right to say that in KO all we have is ViewModels?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T06:24:42.327

是的。本质上，任何带有 a`ko.observable`的东西都在创建一个 ViewModel。您可以创建一个简单的 javascript 模型，只能表示为 JSON，并将其包装，但 Knockout 的 MVVM 模式中的“模型”通常只存在于*server*上。您从服务器获取模型数据，然后将模型数据发送回服务器（请记住，您不发送`observables`，只是发送它们的数据）

Knockout 并不真正关心模型的来源，因为它的主要作用是处理声明性视图 (HTML) 和 ViewModel（及其 View-aware `observables`）之间的数据绑定。

MVVM 模式由 Knockout 之外的技术完成，因为它是一个仅限客户端的框架。您可以说它只是该模式的 VVM 部分，但这令人困惑。

# java - Send multiple arguments to reducer-MapReduce

> ID：14516029
> 
> 赞同：2
> 
> 时间：2013-01-25T05:41:09.650
> 
> 标签：java, hadoop, mapreduce

I've written a code which does something similar to SQL GroupBy.

The dataset I took is here:

* * *

250788681419,20090906,200937,200909,619,SUNDAY,WEEKEND,ON-NET,MORNING,OUTGOING,VOICE,25078,PAY_AS_YOU_GO_PER_SECOND_PSB,SUCCESSFUL-RELEASEDBYSERVICE,17,0,1,21.25,635-10-112-30455

* * *

```
public class MyMap extends Mapper<LongWritable, Text, Text, DoubleWritable> {

public void map(LongWritable key, Text value, Context context) throws IOException 
{

        String line = value.toString();
        String[] attribute=line.split(",");
        double rs=Double.parseDouble(attribute[17]);

        String comb=new String();
        comb=attribute[5].concat(attribute[8].concat(attribute[10]));

            context.write(new Text(comb),new DoubleWritable (rs));

    }
 } 
public class MyReduce extends Reducer<Text, DoubleWritable, Text, DoubleWritable> {

protected void reduce(Text key, Iterator<DoubleWritable> values, Context context) 
          throws IOException, InterruptedException {

             double sum = 0;
             Iterator<DoubleWritable> iter=values.iterator();
                while (iter.hasNext()) 
                {
                    double val=iter.next().get();
                    sum = sum+ val;
                }
                context.write(key, new DoubleWritable(sum));
        };
     } 
```

In the Mapper, as its value sends the 17th argument to the reducer to sum it. Now I also want to sum the 14th argument how do i send it to the reducer?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:23:16.573

如果您的数据类型相同，那么创建一个 ArrayWritable 类应该可以解决这个问题。该类应类似于：

```
public class DblArrayWritable extends ArrayWritable 
{ 
    public DblArrayWritable() 
    { 
        super(DoubleWritable.class); 
    }
} 
```

您的映射器类看起来像：

```
public class MyMap extends Mapper<LongWritable, Text, Text, DblArrayWritable> 
{
  public void map(LongWritable key, Text value, Context context) throws IOException 
  {

    String line = value.toString();
    String[] attribute=line.split(",");
    DoubleWritable[] values = new DoubleWritable[2];
    values[0] = Double.parseDouble(attribute[14]);
    values[1] = Double.parseDouble(attribute[17]);

    String comb=new String();
    comb=attribute[5].concat(attribute[8].concat(attribute[10]));

    context.write(new Text(comb),new DblArrayWritable.set(values));

  }
} 
```

在您的 reducer 中，您现在应该能够迭代 DblArrayWritable 的值。

但是根据您的示例数据，它们看起来可能是单独的类型。您*也许*可以实现一个可以解决问题的 ObjectArrayWritable 类，但我不确定这一点，我看不出有多少支持它。如果它有效，那么课程将是：

```
public class ObjArrayWritable extends ArrayWritable 
{ 
    public ObjArrayWritable() 
    { 
        super(Object.class); 
    }
} 
```

您可以通过简单地连接这些值并将它们作为 Text 传递给 reducer 来处理这个问题，然后再将它们拆分。

另一种选择是实现您自己的 Writable 类。这是如何工作的示例：

```
public static class PairWritable implements Writable 
{
   private Double myDouble;
   private String myString;

    // TODO :-  Override the Hadoop serialization/Writable interface methods
    @Override
    public void readFields(DataInput in) throws IOException {
            myLong = in.readDouble();
            myString = in.readUTF();
    }

    @Override
    public void write(DataOutput out) throws IOException {
            out.writeDouble(myLong);
            out.writeUTF(myString);
    }

    //End of Implementation

    //Getter and Setter methods for myLong and mySring variables
    public void set(Double d, String s) {
        myDouble = d;
        myString = s;
    }

    public Long getLong() {
        return myDouble;
    }
    public String getString() {
        return myString;
    }

} 
```

# ios - Gaussian Blur Filter Reversal: iOS

> ID：14516032
> 
> 赞同：5
> 
> 时间：2013-01-25T05:41:59.963
> 
> 标签：ios, xcode, uiview, gaussian

I've got a gaussian blur which I'm doing for an app.

```
 //Get a UIImage from the UIView
    UIGraphicsBeginImageContext(self.view.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //Blur the UIImage
    CIImage *imageToBlur = [CIImage imageWithCGImage:viewImage.CGImage];
    CIFilter *gaussianBlurFilter = [CIFilter filterWithName:@"CIGaussianBlur"];
    [gaussianBlurFilter setValue:imageToBlur forKey:@"inputImage"];
    [gaussianBlurFilter setValue:[NSNumber numberWithFloat:2] forKey:@"inputRadius"];
    CIImage *resultImage = [gaussianBlurFilter valueForKey:@"outputImage"];
    UIImage *endImage = [[UIImage alloc] initWithCIImage:resultImage];

    //Place the UIImage in a UIImageView
    newView = [[UIImageView alloc] initWithFrame:self.view.bounds];
    newView.image = endImage;
    [self.view addSubview:newView]; 
```

It works great, but I want to be able to reverse it and return the view back to normal.

How can I do this as trying to simply remove the blur's view from it's superview didn't work. I've also tried setting various properties to nil with no luck.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:17:10.057

在属性中保留指向 viewImage 的指针

```
@property (nonatomic, strong) UIImage* originalImage; 
```

然后

```
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext(); 
```

添加

```
self.originalImage = viewImage; 
```

要恢复您的图像：

```
newView.image = self.originalImage; 
```

当您应用模糊时，它不会改变 viewImage.. 您已经创建了一个单独的 CIImage，该 CIImage 变得模糊，并且您从模糊的 CIImage 制作了一个新的 UIImage。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T08:10:14.040

*   我在您的代码中看到的第一件事是您没有在异步任务中应用过滤器。模糊图像需要时间，所以如果你不想冻结你应该使用的主线程：

* * *

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //blur the image in a second thread
    dispatch_async(dispatch_get_main_queue(), ^{
        //set the blurred image to your imageView in the main thread
    });
}); 
```

* * *

*   要反转原始图像，您只需将模糊副本放在出现在原始图像上的其他 imageView 中。在我的情况下，原始图像不是 imageView，而是视图本身。所以我只在我的视图中添加一个 imageView 来设置模糊图像，并在我想反转时设置为 nil。

* * *

*   最后，如果您想在设置模糊图像时避免眨眼，您可以在动画中使用 alpha 来进行软过渡：

* * *

```
[self.blurredImageView setAlpha: 0.0]; //make the imageView invisible
[self.blurredImageView setImage:blurredImage];
//and after set the image, make it visible slowly.
[UIView animateWithDuration:0.5 delay:0.1
                            options:UIViewAnimationOptionCurveEaseInOut
                         animations:^{
                             [self.blurredImageView setAlpha: 1.0]; 
                         }
                         completion:nil]; 
```

* * *

*   这是我的完整方法：

* * *

```
- (void)makeBlurredScreenShot{
    UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *imageView = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CIContext *context   = [CIContext contextWithOptions:nil];
    CIImage *sourceImage = [CIImage imageWithCGImage:imageView.CGImage];

    // Apply clamp filter:
    // this is needed because the CIGaussianBlur when applied makes
    // a trasparent border around the image
    NSString *clampFilterName = @"CIAffineClamp";
    CIFilter *clamp = [CIFilter filterWithName:clampFilterName];
    if (!clamp)
        return;

    [clamp setValue:sourceImage forKey:kCIInputImageKey];
    CIImage *clampResult = [clamp valueForKey:kCIOutputImageKey];

    // Apply Gaussian Blur filter
    NSString *gaussianBlurFilterName = @"CIGaussianBlur";
    CIFilter *gaussianBlur           = [CIFilter filterWithName:gaussianBlurFilterName];
    if (!gaussianBlur)
        return;

    [gaussianBlur setValue:clampResult forKey:kCIInputImageKey];
    [gaussianBlur setValue:[NSNumber numberWithFloat:8.0] forKey:@"inputRadius"];

    CIImage *gaussianBlurResult = [gaussianBlur valueForKey:kCIOutputImageKey];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        CGImageRef cgImage = [context createCGImage:gaussianBlurResult fromRect:[sourceImage extent]];

        UIImage *blurredImage = [UIImage imageWithCGImage:cgImage];
        CGImageRelease(cgImage);

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.blurredImageView setAlpha: 0.0];
            [self.blurredImageView setImage:blurredImage];
            [UIView animateWithDuration:0.5 delay:0.1
                                options:UIViewAnimationOptionCurveEaseInOut
                             animations:^{
                                 [self.blurredImageView setAlpha: 1.0]; 
                             }
                             completion:nil];
        });
    });
} 
```

* * *

```
- (void)removeBlurredScreenShot{
    [UIView animateWithDuration:0.5 delay:0.1
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                          [self.blurredImageView setAlpha: 0.0];
                             }
                     completion:^(BOOL finished) {
                          [self.blurredImageView setImage:nil];
                     }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:40:55.233

就像我在之前的评论中所说的那样，您可以创建一个属性/iVar，在应用效果之前保存图像并在您想要撤消时恢复。

```
if(!_originalImage)
    _originalImage = [[UIImage alloc] init];

_originalImage = viewImage; //(Creates a copy, not a C-Type pass-by-reference)

// Do your Blur Stuff

// Now somewhere down the line in your program, if you don't like the blur and the user would like to undo:

viewImage = _originalImage; 
```

根据您对@HeWas 回答的评论，您不应该完全模糊视图。如果视图变得模糊，则说明您在程序的其他地方做错了其他事情。

# django - Setting up local django environment for multiple domains

> ID：14516034
> 
> 赞同：0
> 
> 时间：2013-01-25T05:42:13.880
> 
> 标签：django, subdomain, django-middleware

I'm trying to set up a Django application that will accept multiple subdomain URLs. I'd like to test this locally. Since I can't nail this first step of passing in a url that has a subdomain, I can't get to the second part (figuring out if the URLconf I've set up for django-subdomains is working). The middleware checks for a subdomain, and chooses a URLconf file based on that subdomain.

I've set the following configs in /etc/hosts. When I've got the server running, and I hit these URLs, I go to the real test.com.

```
127.0.0.1 payments.test.com  
127.0.0.1 rampup.test.com 
```

(in case it matters) django-subdomains middleware settings from settings.py:

```
SUBDOMAIN_URLCONFS = {                                                          
    'payments': 'main.urls',                                                    
    'rampup': 'rampup.urls'                                                     
    }      

MIDDLEWARE_CLASSES = (                                                          
    'subdomains.middleware.SubdomainURLRoutingMiddleware',                      
    'django.middleware.common.CommonMiddleware',                                
    'django.contrib.sessions.middleware.SessionMiddleware',                     
    'django.middleware.csrf.CsrfViewMiddleware',                                
    'django.contrib.auth.middleware.AuthenticationMiddleware',                  
    'django.contrib.messages.middleware.MessageMiddleware',                     
    # Uncomment the next line for simple clickjacking protection:               
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',                 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:02:47.777

尝试这个：

```
0.0.0.0 payments.test.com 
0.0.0.0 rampup.test.com 
```

# php - CURL https 报错

> ID：14516037
> 
> 赞同：1
> 
> 时间：2013-01-25T05:42:19.230
> 
> 标签：php, facebook, facebook-graph-api, curl

我在使用此功能时遇到问题。它适用于`http`但在使用时不返回任何内容`https`。我正在使用 facebook 的 url 来获取所有公共团体的帖子。

```
function fetchUrl($url)
{
    $ch = curl_init();
     curl_setopt($ch, CURLOPT_URL, $url);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
     curl_setopt($ch, CURLOPT_TIMEOUT, 20);

     $retData = curl_exec($ch);
     curl_close($ch); 

     return $retData;
} 
```

我见过的唯一方法是通过简单的 php html dom 解析器抓取 url 并将其转换为数组。但是，我觉得有更好的方法，或者可以对这个现有功能进行一些更改。我哪里错了？

仅供参考：我在 php.ini 中启用了 openSSL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:51:24.313

尝试添加这些选项

```
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

引用 PHP 手册

> CURLOPT_SSL_VERIFYHOST: 1 检查 SSL 对等证书中是否存在通用名称。2 检查公用名是否存在，并验证它是否与提供的主机名匹配。
> 
> CURLOPT_SSL_VERIFYPEER：FALSE 阻止 CURL 验证对等方的证书。可以使用 CURLOPT_CAINFO 选项指定要验证的备用证书，或者可以使用 CURLOPT_CAPATH 选项指定证书目录。如果 CURLOPT_SSL_VERIFYPEER 被禁用（默认为 2），CURLOPT_SSL_VERIFYHOST 也可能需要为 TRUE 或 FALSE。

# java - 如何获取输入流并将其显示在 textArea 中？

> ID：14516053
> 
> 赞同：-2
> 
> 时间：2013-01-25T05:44:00.290
> 
> 标签：java, swing, io, stream, jtextarea

我正在向我的客户发送一个流。如何将客户端中的流逐行读取到客户端的文本区域中？

我用于发送数据的服务器代码：

公共类服务器扩展 javax.swing.JFrame {

```
public Server() 
{
    int server=5555;
    initComponents();
}

    jRadioButton1.setText("a");
    jRadioButton1.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt)
        {
            jRadioButton1ActionPerformed(evt);
        }
    });

    jRadioButton2.setText("b");
    jRadioButton2.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            jRadioButton2ActionPerformed(evt);
        }
    });

    jRadioButton3.setText("c");
    jRadioButton3.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            jRadioButton3ActionPerformed(evt);
        }
    });

    jRadioButton4.setText("d");
    jRadioButton4.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            jRadioButton4ActionPerformed(evt);
        }
    });

    jButton1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
    jButton1.setText("SEND");
    jButton1.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
             Greedy gg=new Greedy();
             gg.greedy();
            jButton1ActionPerformed(evt);
        }
    });

    jMenu1.setText("OPEN FILE");
    jMenu1.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            OPEN(evt);

        }
    });

    jMenuItem3.setText("OPEN");
    jMenuItem3.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt)
        {
             String cwd=System.getProperty("user.dir");
            JFileChooser jfc=new JFileChooser(cwd);

             Component frame = null;
            if (jfc.showOpenDialog(frame) !=JFileChooser.APPROVE_OPTION)
             return;

             File f = jfc.getSelectedFile();

             try {
                content1(f.toString());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             readin(f.toString(), jTextArea1);  
        }
    });

private void readin(String string, JTextArea jTextArea12) 
{
    try 
            {

                    FileReader fr = new FileReader(string);
                    jTextArea1.read(fr, null);
                    fr.close();
            }
            catch (IOException e) 
                {
                    System.err.println(e);
                }

}

private void EXIT(java.awt.event.ActionEvent evt) 
{                      
    System.exit(0); 
}                     

private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{

}

private void jRadioButton2ActionPerformed(java.awt.event.ActionEvent evt) 
{

            }

private void jRadioButton3ActionPerformed(java.awt.event.ActionEvent evt)
{

            }

private void jRadioButton4ActionPerformed(java.awt.event.ActionEvent evt) 
{

}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 

    { 
```

你好（）; }

```
public static void main(String args[]) 
{

          java.awt.EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
            new Server().setVisible(true);
            System.out.println("SERVER IS STARTED.....");
        }
    });

    int port=5000;
    while(true)
    {
       try

    {
    ServerSocket ser=new ServerSocket(port+10);

    System.out.println("CLIENT A IS CONNECTED");

    }
    catch(Exception e)
    {
        System.out.println(e);
    }
       try
    {
    ServerSocket ser=new ServerSocket(port+20);

    ser.accept();

    System.out.println("CLIENT B IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }
       try
    {
    ServerSocket ser=new ServerSocket(port+30);

    ser.accept();

    System.out.println("CLIENT C IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }
       try
    {
    ServerSocket ser=new ServerSocket(port+40);

    ser.accept();

    System.out.println("CLIENT D IS CONNECTED");
    }
    catch(Exception e)
    {
        System.out.println(e);
    }

    }
}

public void hello()

 {

     try
     {
     FileReader buf=new FileReader("e:\\buffer.txt");

     int port=5010;
     try
     {

        @SuppressWarnings("resource")
        ServerSocket ser=new ServerSocket(port);
        Socket soc=ser.accept();
        BufferedReader toclient=new BufferedReader(buf);
        DataOutputStream dos=new DataOutputStream(soc.getOutputStream());
        System.out.println(dos.toString());

        dos.flush();
        dos.close();

    }catch(Exception e)
    {

    }
     }
     catch(Exception e)
     {
         System.out.println(e+"BUFFER IS EMPTY");
     }

 }

 public void content1(String s) throws IOException { 
     try (BufferedReader br = new BufferedReader(new FileReader(s));
             PrintWriter pr = new PrintWriter(new File("e:\\buffer.txt"))) {
         for (String line; (line = br.readLine()) != null;) {
             pr.println(line);
         }
     } 
```

}

}

客户端代码：

/* * 要更改此模板，请选择工具 | 模板 * 并在编辑器中打开模板。*/

```
 public class NodeA extends javax.swing.JFrame 
  {

public JLabel sys=new JLabel();

public NodeA() 
{

    initComponents();
}

@SuppressWarnings("unchecked")

private void initComponents() {

    jLabel1.setText("NODE A");

    jTextArea1.setColumns(20);
    jTextArea1.setRows(5);
    jScrollPane1.setViewportView(jTextArea1);

    jButton1.setText("CONNECT");
    jButton1.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            jButton1ActionPerformed(evt);

        }
    });

    jButton2.setFont(new java.awt.Font("Tahoma", 1, 14)); 
    jButton2.setForeground(new java.awt.Color(255, 0, 51));
    jButton2.setText("OFFLOAD DATA");

    jButton2.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            jButton2ActionPerformed(evt);
        }
    });

    jComboBox2.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "B", "C", "D" }));
    jComboBox2.addActionListener(new java.awt.event.ActionListener() 
    {

        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            jComboBox2ActionPerformed(evt);
        }
    });

    jLabel2.setText("SELECT NODE TO OFFLOAD");

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
{

  try
  {
  Socket client=new Socket("localhost",5010);

  if(client.isConnected())
  {
      System.out.println("SERVER ACCEPTS CONNECTION");
  }

  }
  catch(Exception e)
  {
      System.out.println("SERVER IS BUSY.......");
  }
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) 
{

}

private void jComboBox2ActionPerformed(java.awt.event.ActionEvent evt) 
{

}

public void data()
{

     DataInputStream is;
     BufferedReader bsr=new BufferedReader(new InputStreamReader(System.in));

} 
```

}

我想读取服务器流，并在我的客户端文本区域中一次显示一行数据。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:49:08.733

```
FileReader b = new FileReader("read.txt");
jTextArea.read(b, "read.txt");  // we're done! 
```

请参阅文档。了解[`JTextComponent.(Reader,Object)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#read%28java.io.Reader,%20java.lang.Object%29)详情。

# iphone - 如何从 facebook Friendspickercontroller 获取好友列表

> ID：14516055
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:44:14.983
> 
> 标签：iphone, ios, objective-c, facebook, facebook-graph-api

在我的 Iphone 应用程序中，我使用的是 facebook sdk 3.1。我想先重定向 facebook 登录页面。再次登录后重定向到我的应用程序。

当我没有在 iphone 的设置中登录 facebook 时，我还想从friendspickercontroller 获取 facebook 好友列表。

我正在使用此代码

Facebook登入：

```
-(IBAction)facebookButtonPressed:(id)sender
{
NSLog(@" hi im ");

NSArray *permissions =
[NSArray arrayWithObjects:@"user_photos", @"friends_photos",@"email", nil];

[FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {

     if(!error)
     {
         NSLog(@" hi im sucessfully lloged in");
         [self sessionStateChanged:session state:state error:error];
     }
 }];

}

- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation
{
   return [FBSession.activeSession handleOpenURL:url];
}

- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{

  switch (state) {
    case FBSessionStateOpen:
    {
        UIViewController *topViewController =
        [appDelegate.naviCon topViewController];
        if ([[topViewController modalViewController]
             isKindOfClass:[ViewController class]]) {
            [topViewController dismissModalViewControllerAnimated:YES];
        }
        NSLog(@"h im in state open 1111111");
        {
           NSLog(@"hi iam in open state9999999999999999999");
        }
    }
        break;
    case FBSessionStateClosed:
      {
          NSLog(@"iam in loginfailed 444444444444");
      }
    case FBSessionStateClosedLoginFailed:
          NSLog(@"iam in loginfailed 555555555555");

        NSLog(@"iam in statecloze 555555555555");
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    default:
        break;
}

if (error)
{

}
} 
```

得到油炸物：

```
 NSArray *permissions =
    [NSArray arrayWithObjects:@"user_photos", @"friends_photos",@"email", nil];

    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
    {            
        [FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:YES    completionHandler: ^(FBSession *session, FBSessionState state, NSError *error)
        {
            if(!error)
            {
if (self.friendPickerController == nil)
            {
                self.friendPickerController = [[FBFriendPickerViewController alloc] init];
                self.friendPickerController.title = @"Pick Friends";
                self.friendPickerController.delegate = self;
            }
            [self.friendPickerController loadData];
            //[self.friendPickerController clearSelection];
            [self presentModalViewController:self.friendPickerController animated:YES];
}
}];
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:49:16.440

您还需要 read_friendlists 权限才能获取好友列表。

然后使用

```
-(void)friendPickerViewControllerSelectionDidChange:(FBFriendPickerViewController *)friendPicker
{

 NSArray *friends = friendPicker.selection;

} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:46:53.393

```
- (void)friendPickerViewControllerSelectionDidChange:(FBFriendPickerViewController *)friendPicker
{
 NSArray *friends = friendPicker.selection;
} 
```

我希望这就是你要找的！

# c - 为什么我的 getservbyname 函数总是返回 NULL？

> ID：14516062
> 
> 赞同：1
> 
> 时间：2013-01-25T05:45:37.267
> 
> 标签：c, linux, sockets, null, linux-mint

现在我`getservbyname()`在linux mint中遇到了一些问题，每次我尝试获取一个端口它都会返回`NULL`，我不知道会是什么

```
 extern struct servent *get_port(char *name, char *prot) {
      struct servent *tmp;
      tmp = getservbyname(name, prot);
      if(tmp == NULL) {
        return NULL;
      }
      return tmp;
    } 
```

这就是我调用函数的方式

```
 struct servent *port;

    if((port = (struct servent*)get_port("server", "tcp")) == NULL){
        perror("Error... \n");
        return -1;
    }
    printf("Got the port... \n"); 
```

我使用 perror 函数来获取有关该问题的更多信息，但是每次运行代码时，我都会发现该函数正常工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:02:41.777

`getservbyname()`不设置`errno`，所以`perror()`不起作用。

如果返回`NULL`，则最可能的原因是您指定的服务在服务文件中不存在，或者服务文件无法打开。

您示例`"server"`中的名称不是通常包含在服务数据库中的名称 - 尝试查找类似`"ftp"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T21:53:56.073

从`getservbyname`手册页：

> getservbyname() 函数使用protocol proto从数据库中返回与服务**名称**匹配的条目的servent结构 。如果**proto**为 NULL，则将匹配任何协议。

该`/etc/services`文件具有以下结构：

```
echo        7/tcp
echo        7/udp
ftp         21/tcp
smtp        25/tcp 
```

在*tcp*和*udp*协议 ( *echo* ) 中提供了一些服务，而其他服务仅在其中一个 ( *ftp* , *smtp* ) 中可用。该`getservbyname`函数查询`/etc/services`文件以查找服务名称，并返回一个包含*名称*、*端口号*、*协议*和*别名*等信息的结构。

正如其他人已经指出的那样，您的代码的问题在于该函数的***name***参数不是服务器名称（例如*localhost*或其他名称），而是您要查找的服务名称（例如*ftp*）。***proto***参数是可选的，当它的值为 NULL 时，它匹配任何协议。有效的协议是*tcp*或*udp*，以防您对其中之一特别感兴趣。

# php - cakephp 重定向错误的路径

> ID：14516063
> 
> 赞同：3
> 
> 时间：2013-01-25T05:45:38.833
> 
> 标签：php, cakephp

我的成员视图中有一个登录表单 (login.ctp)。但是，当我将 url 提供为 /login 时，而不是显示成员视图的登录，而是显示用户视图的登录页面。

/Views/login.ctp 文件

```
<div class="members form">
<?php echo $this->Session->flash('auth'); ?>
<?php echo $this->Form->create('Member'); ?>
<fieldset>
    <legend><?php echo __('Please enter your username and password'); ?></legend>
    <?php echo $this->Form->input('username');
    echo $this->Form->input('password');
?>
</fieldset>
<?php echo $this->Form->end(__('Login')); ?>
</div> 
```

应用控制器文件

```
class AppController extends Controller {
//...

public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'members', 'action' => 'home'),
        'logoutRedirect' => array('controller' => 'members', 'action' => 'index')
    )
);

public function beforeFilter() {
    $this->Auth->allow('index', 'view');
}
//...
} 
```

我的 routes.php 文件

```
 Router::connect('/', array('controller' => 'members', 'action' => 'index'));
Router::connect('/login', array('controller' => 'members', 'action' => 'login')); 
```

我已经清除了所有的 cookie。错误在哪里？

还有一件事，我什至尝试过删除用户控制器，但是如果我删除用户控制器，我会收到以下错误...

错误：找不到用户控制器。

这是我在 MembersController.php 中的登录功能

```
 public function login() {
    if ($this->request->is('post')) {

        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
        }
    }
} 
```

//成员模型中的代码。

```
class Member extends AppModel {

/**
 * Validation rules
 *
 * @var array
 */
public $validate = array(
    'firstname' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'lastname' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'email' => array(
        'email' => array(
            'rule' => array('email'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'password' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'age' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'address' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'phone' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'created_on' => array(
        'datetime' => array(
            'rule' => array('datetime'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
);

function beforeSave() {
  if(isset($this->data[$this->alias]['password']))
    $this->data[$this->alias]['password'] = Security::hash($this->data[$this->alias]['password'], null, true);
  return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:14:29.993

**编辑**

测试代码和流程

**应用控制器代码**

```
<?php
class AppController extends Controller
{
    public $components = array
    (
        'Session',
        'Auth' => array
        (
            'loginRedirect' => array('controller' => 'members', 'action' => 'home'),
            'logoutRedirect' => array('controller' => 'members', 'action' => 'index')
        )
    );

    public function beforeFilter()
    {
        $this->Auth->allow('index', 'view');
        $this->Auth->fields = array('username' => 'email', 'password' => 'password');
        $this->Auth->userModel = 'Member';
    }
} 
```

您的所有代码都运行良好，您只需将其设置`Auth->userModel`为`Member`.

**成员控制器**

```
<?php
class MembersController extends AppController
{

    var $name = 'Members';

    function beforeFilter()
    {
        parent::beforeFilter();
    }

}
?>
```

并在成员控制器中定义`beforeFilter as above.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:21:52.780

尝试将您的组件数组修改为：

```
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'members', 'action' => 'home'),
        'logoutRedirect' => array('controller' => 'members', 'action' => 'index'),
        'Form' => array(
            'userModel' => 'Member'
        ),
    )
); 
```

或者在 beforeFilter() 中试试这个：

```
// Pass settings in using 'all'
$this->Auth->authenticate = array(
    AuthComponent::ALL => array('userModel' => 'Member'),
    'Form',
    'Basic'
); 
```

# ios - Apple iOS MDM 服务器设置设备注册/配置

> ID：14516065
> 
> 赞同：5
> 
> 时间：2013-01-25T05:45:46.670
> 
> 标签：ios, provisioning-profile, mdm

我们正在尝试设置我们自己的内部 iOS MDM 服务器，但我们遇到了一些问题，即根据 Apple 文档，我们看到的内容不一定与我们的预期相符。

按照 Apple 网站上的说明，我们设置了一个网页，用户可以在其中通过单击链接来注册他们的设备。此链接使设备经历“设备注册过程”，如苹果“Over-The-Air Profile Delivery and Configuration”文档的图 1.1 所示：[https ://developer.apple.com/library/ios/#文档/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html)

我们的问题是：在上述文档的第 3 阶段（设备配置）开始之前，我们的功能都按预期运行。但是，当我们查看 Web 服务器和设备之间的流量时，注册流程似乎执行了两次。根据文档，这些是我们希望看到的服务器调用：

```
/enroll
/scep?operation=GetCACert&message=EnrollmentCAInstance
/scep?operation=GetCACaps&message=EnrollmentCAInstance
/scep?operation=PKIOperation&message=MII.....AAA 
```

然而，实际上，我们看到调用块执行了两次，一个接着一个，看起来是相同的数据。有没有人看到这种行为，这是预期的吗？

一个更紧迫的问题是，在执行第 2 阶段、第 3 步之后，我们将生成的证书传递给设备，设备成功安装。但是，根据文档，此时我们应该从设备获得响应，我们可以使用新的配置文件以及我们想要在设备上设置的设置来回复它。然而，我们从来没有得到那个回应，即使到那时为止的一切似乎都已成功完成。有谁知道为什么没有发送响应，或者当时可能出了什么问题？

提前致谢，

使用 iphone 配置实用程序检索的设备日志：

```
<Notice>: (Note ) MC: Profile “com.test.profileservice.scep” queued for installation.
<Notice>: (Note ) MC: Checking for MDM installation...
<Notice>: (Note ) MC: ...finished checking for MDM installation.
<Notice>: (Note ) MC: Enrolling in OTA Profile service...
<Error>: Jan 25 16:34:13  SecTrustEvaluate  [leaf AnchorTrusted]
<Error>: Jan 25 16:34:14  SecTrustEvaluate  [leaf AnchorTrusted]
<Notice>: (Note ) MC: Attempting to retrieve issued certificate...
<Notice>: (Note ) MC: Issued certificate received.
<Notice>: (Note ) MC: Retrieving profile from OTA Profile service...
<Notice>: (Note ) MC: Received final profile: Test Config
<Notice>: (Note ) MC: Beginning profile installation...
<Error>: Jan 25 16:34:17  SecTrustEvaluate  [leaf AnchorTrusted]
<Notice>: (Note ) MC: Attempting to retrieve issued certificate...
<Notice>: (Note ) MC: Issued certificate received.
<Notice>: (Note ) MC: Profile “Test Config” installed.
<Error>: Checking for changed log settings
<Error>: valid 0 value 0
<Error>: Verbose logging disabled
<Notice>: (Note ) MC: mc_mobile_tunnel starting.
<Notice>: (Note ) MC: mc_mobile_tunnel shutting down. 
```

发送到 MDM 服务器的完整请求流：

```
/enroll
/checkin
/scep?operation=GetCACert&message=EnrollmentCAInstance
/scep?operation=GetCACaps&message=EnrollmentCAInstance
/scep?operation=PKIOperation&message=MII.....AAA
/checkin
/scep?operation=GetCACert&message=EnrollmentCAInstance
/scep?operation=GetCACaps&message=EnrollmentCAInstance
/scep?operation=PKIOperation&message=MII.....AAA 
```

添加作为 SCEP 配置的一部分发回的有效负载：

```
<plist version="1.0">
  <dict>
    <key>PayloadVersion</key>
    <integer>1</integer>
    <key>PayloadUUID</key>
    <string>Ignored</string>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadIdentifier</key>
    <string>Test Config</string>
    <key>PayloadDisplayName</key>
    <string>Test Profile:SCEP</string>
    <key>PayloadContent</key>
    <array>
      <dict>
        <key>PayloadContent</key>
        <dict>
          <key>URL</key>
          <string>https://test.com/mdm_scep</string>
          <key>Name</key>
          <string>EnrollmentCAInstance</string>
          <key>Subject</key>
          <array>
            <array>
              <array>
                <string>O</string>
                <string>Test Organization, Inc.</string>
              </array>
            </array>
            <array>
              <array>
                <string>CN</string>
                <string>test.com</string>
              </array>
            </array>
          </array>
          <key>Challenge</key>
          <string>DummyChallenge</string>
          <key>Keysize</key>
          <integer>1024</integer>
          <key>Key Type</key>
          <string>RSA</string>
          <key>Key Usage</key>
          <integer>5</integer>
        </dict>
        <key>PayloadDescription</key>
        <string>Provides device encryption identity</string>
        <key>PayloadUUID</key>
        <string>12345678-1234-1234-1234-123456789012</string>
        <key>PayloadType</key>
        <string>com.apple.security.scep</string>
        <key>PayloadDisplayName</key>
        <string>Encryption Identity</string>
        <key>PayloadVersion</key>
        <integer>1</integer>
        <key>PayloadOrganization</key>
        <string>Test Organization, Inc.</string>
        <key>PayloadIdentifier</key>
        <string>com.test.profileservice.scep</string>
      </dict>
    </array>
  </dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T16:21:41.703

回答您关于两个 SCEP 块执行的问题。

请看一下这个问题： [更新过期的 iO​​S MDM 配置文件](https://stackoverflow.com/questions/14355726/update-an-expired-ios-mdm-profile)

在答案中，我描述了为什么设备会进行两次 SCEP 调用。这是每个设计（没有错）。

关于第 2 阶段第 3 步的问题。请您 a) 在您的问题中添加对服务器的调用的完整打印输出 b) 设备日志

当我使用 MDM 时，我发现如果没有这两条信息，几乎不可能对其进行故障排除。

**-- 更新 1 --**

正确的调用顺序如下

**协议的OTA部分**

**/enroll**
返回：第一个配置文件请求 UDID、IMEI 等

**/profile**
输入：由 iOS 设备私钥签名的 UDID、IMEI 等 / 返回：带有 SCEP 有效负载的配置文件

**/scep?operation=GetCACert&message=EnrollmentCAInstance**

**/scep?operation=GetCACaps&message=EnrollmentCAInstance**

**/scep?operation=PKIOperation&message=MII.....AAA**

This is SCEP calls for device to get an identify which is used for OTA part Return: OTA identity certificate.

**/profile**

Input: UDID, IMEI etc signed by private key associated with OTA certificate Return: Profile with SCEP payload + MDM payload

**/scep?operation=GetCACert&message=EnrollmentCAInstance**

**/scep?operation=GetCACaps&message=EnrollmentCAInstance**

**/scep?operation=PKIOperation&message=MII.....AAA**

This is SCEP calls for device to get an identify which is used for MDM part Return: MDM identity certificate.

**MDM PART of PROTOCOL**

**/checkin** Input: Checkin request Return: HTTP code 200

As you can see it's VERY different from what you have. Did you implement everything as described in [OTA Delivery and Configuration][1]? It's really hard to guess what's wrong, because it looks like the whole part of "/profile" usage is missing.

I would recommend to start from the very beginning and make sure that each call to the server is done in described order and return described return profiles.

# javascript - 排序完成后解绑点击事件

> ID：14516067
> 
> 赞同：0
> 
> 时间：2013-01-25T05:45:56.963
> 
> 标签：javascript, jquery, jquery-ui-sortable

我有一个图像列表，可以通过 jquery sortable 进行排序。我可以拖放图像以进行排序。现在，每个图像的父锚点也附加了灯箱事件的 Click 事件。

因此，当用户单击图像时，它会在灯箱中打开。而且我还可以将图像拖放到其他地方。

事件冒泡：当我尝试拖动图像时，点击事件被触发。我没想到。拖动图像时如何禁用单击事件？

HTML 代码：

```
<div class="shop-photos">
<div id="shop-photos">
<ul class="ui-sortable">

    <li class="photo-frame media-placeholder media-9108" id="mediaid-9108">
    <a class="preload" data-media-id="9108" href="http://usauto.vo.llnwd.net/o37/dev/07/95/0795f614c4e4d7704e54cc6e48d7ce2c0c16c91b13566015990874.jpg"><img id="9108" data-media-id="9108" src="/shop_portal/api_get_uploaded_photo/?mediaid=9108"></a>
    </li>

    <li class="photo-frame media-placeholder media-9082" id="mediaid-9082">
    <a class="preload" data-media-id="9082" href="http://usauto.vo.llnwd.net/o37/dev/4d/f5/4df5db9819ff891deb60e9c5d85315ccbed41d9413565853192746.jpg"><img id="9082" data-media-id="9082" src="/shop_portal/api_get_uploaded_photo/?mediaid=9082"></a>
    </li>

    <li class="photo-frame media-placeholder media-9089" id="mediaid-9089">
    <a class="preload" data-media-id="9089" href="http://usauto.vo.llnwd.net/o37/dev/9b/24/9b248b3c1308cf3f57f4220ec2aea2c0e954592113565988843784.jpg"><img id="9089" data-media-id="9089" src="/shop_portal/api_get_uploaded_photo/?mediaid=9089"></a>
    </li>

    <li class="photo-frame media-placeholder media-9391" id="mediaid-9391">
    <a class="preload" data-media-id="9391" href="http://usauto.vo.llnwd.net/o37/dev/69/ed/69ed3eac6bfd4af09256e54ed3e5d2d4d4f9948a13572811600895.jpg"><img id="9391" data-media-id="9391" src="/shop_portal/api_get_uploaded_photo/?mediaid=9391"></a>
    </li>

</ul> 
</div>
</div> 
```

我用下面的代码做到了这一点。

```
$('#shop-photos a').lightBox({overlayBgColor: '#111', overlayOpacity: 0.6, containerResizeSpeed: 150});

     $("#shop-photos ul").sortable({
             start: function(event, ui) {
              ui.item.find("a").unbind("click");
             },
             stop: function(event, ui) {            
               $("#shop-photos a").bind("click");
               },
             opacity: 0.6, 
             cursor: 'move', 
             update: function() {           
                var order = $(this).sortable("serialize"); 
                var arr_mediaid = order.split('&');
                for(var i=0;i<arr_mediaid.length;i++){
                    arr_mediaid[i] = arr_mediaid[i].replace("mediaid[]=", ""); 
                }
                $("input[id=sorted-photos]").val(arr_mediaid);
            }   
        }) 
```

我已经正确删除了锚点上的点击事件。但是，图像拖动完成后无法返回。

我的问题是经过几次排序后，点击事件没有出现。解绑事件是否正确触发？我有没有把它解绑在合适的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:36:22.967

如果您使用的是最新版本的 jQuery，则意味着您必须使用`.on`并且`.off` 不推荐使用绑定。

而不是解绑

```
ui.item.find("a").off("click"); 
```

而不是绑定

```
$("#shop-photos a").on("click"); 
```

或者如果你想禁用标签上的点击事件意味着

```
$("#shop-photos a").click(function() { return false; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:53:57.847

.bind() 方法采用两个变量。该事件，“点击”和一个功能。你不能只说 $("#shop-photos a").bind('click');

你需要说 $("#shop-photos a").bind('click',[some function]); 那个 [一些功能] 将是灯箱触发器。

我建议在图像缩略图之外使用单独的图标进行拖动；分离您的 UI - 一个用于拖动，一个用于缩放。

否则，拖动完成后重新绑定灯箱打开功能到锚点。说得通？

# c++ - 在 CentOS 6.x 64 位操作系统中构建 C++ 项目时出错

> ID：14516068
> 
> 赞同：0
> 
> 时间：2013-01-25T05:46:00.253
> 
> 标签：c++, linux, centos

我在 64 位 CentOS 6.x 中构建 C++ 项目时遇到了一些错误。该项目已在 32 位 CentOS 6.x 中成功构建。尽管有一些关于这些类型错误的线索，但我需要更多说明。错误是-

```
/usr/include/sys/types.h:198: error: conflicting declaration ‘typedef long int int64_t’
./Headers/PALsystypes.h:22: error: ‘int64_t’ has a previous declaration as ‘typedef long  long int int64_t’
/usr/include/sys/types.h:204: error: conflicting declaration ‘typedef long unsigned int u_int64_t’
./Headers/PALsystypes.h:23: error: ‘u_int64_t’ has a previous declaration as ‘typedef long long unsigned int u_int64_t’ 
```

还有更多错误，如下所示 -

```
d5-x86_64.o md5-x86_64.s
md5-x86_64.s: Assembler messages:
md5-x86_64.s:41: Error: 0xd76aa478 out range of signed 32bit displacement
md5-x86_64.s:50: Error: 0xe8c7b756 out range of signed 32bit displacement
md5-x86_64.s:68: Error: 0xc1bdceee out range of signed 32bit displacement
md5-x86_64.s:77: Error: 0xf57c0faf out range of signed 32bit displacement
md5-x86_64.s:95: Error: 0xa8304613 out range of signed 32bit displacement
md5-x86_64.s:104: Error: 0xfd469501 out range of signed 32bit displacement
md5-x86_64.s:122: Error: 0x8b44f7af out range of signed 32bit displacement
md5-x86_64.s:131: Error: 0xffff5bb1 out range of signed 32bit displacement 
```

请给我对这篇文章的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:13:15.503

```
typedef int foo;
typedef float foo; 
```

看，这是最小的例子，这与 32 位或 64 位无关。问题是某些头文件声明的符号比另一个已经声明的符号多，并且以不兼容的方式这样做。我会责怪 PALsystypes，它没有特别声明 int64_t 的业务，它应该来自系统的 stdint.h。

关于汇编程序警告，请考虑使用无符号整数，变量和常量（0x123u 是无符号的）。

# oracle - EntityFramework 和 DBContext 是否适用于 Oracle？

> ID：14516078
> 
> 赞同：0
> 
> 时间：2013-01-25T05:47:05.877
> 
> 标签：oracle

EntityFramework 和 DBContext 是否适用于 Oracle？如果是，我需要注意什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T03:53:58.707

是的，请看一下我刚刚做出的这个答案：[https ://stackoverflow.com/a/18710419/14533](https://stackoverflow.com/a/18710419/14533)

我正在使用 EF 4.0 / .NET 4.5 和 ODAC / ODP.Net v12，但我在它之前尝试过使用 ODAC 的 v11.2 并且也可以工作。

# php - PHP正则表达式替换除字母数字、点和连字符外的UTF-8字符

> ID：14516083
> 
> 赞同：1
> 
> 时间：2013-01-25T05:47:09.493
> 
> 标签：php, regex

我正在对应仅包含字母数字（utf-8）、点、空格和连字符的字符串进行预替换。你能建议我在 PHP 中使用正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:50:06.163

```
preg_replace('/[^-\pL.\s]/u', '', $entity); 
```

# excel - 突出显示重叠天数 Excel VBA

> ID：14516085
> 
> 赞同：0
> 
> 时间：2013-01-25T05:47:32.003
> 
> 标签：excel, vba

我有以下问题要解决，以提高代码执行任务的速度。

我有一张桌子，上面有 Hire Cars 的名称和两个日期——从和到。我需要检查范围（比如 10k 行）并突出显示所有重叠的日期。

没有租车 从 到

1 ABC 12 月 1 日 12 月 12 日
2 ABC 12 月 14 日 12 年 1 月 15 日
3 ABC 12 月 25 日 4 DEF 2 月 12 日
4 DEF 12 月 12 日 12 月 12 日
5 DEF 1 月 12 日 2 月 12 日
6 DEF 12 月 14 日 2012 年 1 月 15 日

对于租车 DEF 有重叠的日子，事实上我需要能够突出显示重复计算，以便用户能够快速识别和纠正。

这是我开发的代码。问题是，如果你有一个 10k 行的范围，它会非常慢。

我正在使用带有 Office/Excel 2010 的 Windows 7 Ultimate

```
 Function CheckOverlap(StartLine, EndLine, StartColumn)

Dim i As Integer, y As Integer
Dim DateToCompare
Dim HireCar
Dim Count As Integer
Dim Msg, Style, Title, Response

'Check StartDate Column
For i = StartLine To EndLine

    DateToCompare = Cells(i, StartColumn)
    HireCar = Cells(i, 2)
    For y = StartLine To EndLine
        'If we are at the same line with DateToCompare cell then we should not perform any check
        If i <> y Then    
            If DateToCompare >= Cells(y, StartColumn) And DateToCompare <= Cells(y, StartColumn + 1) And HireCar = Cells(y, 2) Then
                'We should highlight both cells that contain overlapping dates
                ActiveSheet.Cells(i, StartColumn).Interior.Color = 5296274
                ActiveSheet.Cells(y, StartColumn).Interior.Color = 5296274
            End If
        End If
    Next y
Next i

HireCar = 0

'Check EndDate Column
For i = StartLine To EndLine

    DateToCompare = Cells(i, StartColumn + 1)
    HireCar = Cells(i, StartColumn - 1)
    For y = StartLine To EndLine
        'If we are at the same line with DateToCompare cell then we should not perform any check
        If i <> y Then    
            If DateToCompare >= Cells(y, StartColumn) And DateToCompare <= Cells(y, StartColumn + 1) And HireCar = Cells(y, StartColumn - 1) Then
                'We should highlight both cells that contain overlapping dates
                ActiveSheet.Cells(i, StartColumn + 1).Interior.Color = 5296274
                ActiveSheet.Cells(y, StartColumn + 1).Interior.Color = 5296274
            End If
        End If
    Next y
Next i

'Last check: If the starting and ending date are the same
For i = StartLine To EndLine
    If Cells(i, StartColumn) - Cells(i, StartColumn + 1) = 0 Then
        ActiveSheet.Cells(i, StartColumn).Interior.Color = 5296274
        ActiveSheet.Cells(i, StartColumn + 1).Interior.Color = 5296274
    End If
Next i

' If there are no Overlap Days in Database skip filtering
' StartDate and EndDate Column
' Count Cells with Interior.Color = 5296274 (Green Colour)
Count = 0

For i = StartLine To EndLine
    If Cells(i, StartColumn).Interior.Color = 5296274 Then
        Count = Count + 1
    End If
Next i

' Msg if Database has no Overlap Days
Msg = "Validation check completed. There are 'NO' Overlap Days"
Style = vbOKOnly
Title = "Cash Flow"

' Require on Error Resume Next in case Database is NOT filtered
On Error Resume Next
If Count = 0 Then
    ActiveSheet.ShowAllData
    Response = MsgBox(Msg, Style, Title)
    Exit Function
Else
    Call Filter_Colour
End If

MsgBox "Any Green highlights indicate Overlap Days" 
```

结束功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:56:42.073

最快的方法是对表格进行排序（第一顺序：汽车，第二顺序：从日期）

然后对于每条线：如果上面的线是同一辆车并且上面的to-date大于当前线的from-date，那么就会发生碰撞。

您可以使用 VBA 或 Excel-Formulas 执行这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:15:58.983

Here is a simple algo to show you a blank when there's an overlap on the latter rows. To run this, it's strictly assumed that your CAR column is sorted as per sample shown in the question.

```
Option Explicit

'-- assuming the CAR names column is sorted
'-- so each car block in one place
'-- run on button click event

Sub FindOverlaps()
Dim i As Integer, j As Integer
Dim vInput As Variant
Dim rng As Range

Set rng = Sheets(2).Range("B2:E7")
vInput = WorksheetFunction.Transpose(WorksheetFunction.Transpose(rng))

For i = LBound(vInput) To UBound(vInput) - 1
    For j = LBound(vInput) + 1 To UBound(vInput)
        If vInput(i, 2) = vInput(j, 2) Then
            If vInput(i, 4) = vInput(j, 3) Then
                vInput(j, 3) = ""
                vInput(j, 4) = ""
            End If
        End If
    Next j
Next i

rng.Offset(0, 6).Resize(UBound(vInput), UBound(Application.Transpose(vInput))) = vInput

End Sub 
```

Output:

![enter image description here](../Images/fc323037c5a296e46e68465caf65e03d.png)

* * *

## EDIT AS PER OP'S COMMENT

1.  Transpose the sorted data into the **same range** as per input data, so remove `offset(0,4)`:
2.  Add `conditiona formatting` to highlight anyrow that's null within the specified range. (otherwise entire sheet will be coloured where empty cells are)

Code changes:

```
rng.Offset(0, 6).FormatConditions.Delete
rng.Offset(0, 6).FormatConditions.Add Type:=xlCellValue, Operator:=xlEqual, _
        Formula1:="="""""
rng.Offset(0, 6).FormatConditions(1).Interior.ColorIndex = 20 
```

# jquery - 拆分不适用于使用 jquery 的字符串

> ID：14516088
> 
> 赞同：0
> 
> 时间：2013-01-25T05:48:05.490
> 
> 标签：jquery, jquery-ui

我有一个字符串为 - 0-100，我试图将其拆分为 0 和 100

我试过使用 jquery

```
$("#costFilter li a").click(function () {
                var temp = $(this).html().split("- ");
                var temp1 = temp.split("-");
                alert(temp1[0]);
                alert(temp1[1]);
                //                $("#<%=initialCost.ClientID%>").val(temp1[0]);
                //                $("#<%=endCost.ClientID%>").val(temp1[1]);
                //                $("#<%=BtnCostFilter.ClientID %>").click();
            }); 
```

这是行不通的。我的html为：

```
 <ul style="list-style-type: none" id="costFilter">
                        <li><a href="#.">- 0-100</a> </li>
                        <li><a href="#.">- 100-200</a> </li>
                        <li><a href="#.">- 200 - 300</a> </li>
                        <li><a href="#.">- 400-500</a> </li>
                        <li><a href="#.">- 600-600</a> </li>
                    </ul> 
```

没有警报在起作用。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T05:51:34.400

首先，您应该使用`text()`而不是`html()`仅获取锚点的文本。

其次，只要你的字符串有规律地格式化，你就可以使用`substring()`而不是`split()`去掉前导文本。这将解决您的代码的实际问题，即第一个`split()`返回数组而不是单个字符串的事实。

以下代码应该完全符合您的要求：

```
var temp = $(this).text().substring(2).split("-");
alert(temp[0]);
alert(temp[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:50:25.200

你用'-'分开，`html()`所以你的真正价值在于`temp[1]` 这个

```
$("#costFilter li a").click(function () {
            var temp = $(this).html().split("- ");
            var temp1 = temp[1].split("-"); //here
            alert(temp1[0]);
            alert(temp1[1]);
            //                $("#<%=initialCost.ClientID%>").val(temp1[0]);
            //                $("#<%=endCost.ClientID%>").val(temp1[1]);
            //                $("#<%=BtnCostFilter.ClientID %>").click();
        }); 
```

[在这里摆弄](http://jsfiddle.net/bipen/FdA8g/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:03:23.650

有几点需要澄清：

1.  您没有使用 jQuery 来拆分字符串。那只是很好的旧本机javascript。jQuery 是一个库，用于包装大量与[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)交互的功能。

2.  当您调用`split()`它时，将返回一个由分隔符分隔的字符串数组。这意味着尝试以下行将导致解释器错误：`var temp1 = temp.split("-");`因为`temp`是字符串数组，而不是字符串本身。

[$.map](http://api.jquery.com/jQuery.map/)的 api 文档

也就是说，尝试类似以下的方法：

```
$("#costFilter li a").click(function () {
    var text = $(this).text();  
    var strings = text.split('-');

    // jQuery utility function that takes an array and creates a new one based on items
    // that are actually returned by the callback function (mine only keeps elements
    // that aren't empty)
    var filteredStrings = $.map(strings, function(str) { 
        if (str.length > 0) 
            return str; 
    });

    //do what you need with your strings now
}); 
```

这是一个 jsfiddle，演示了如何使用它。[http://jsfiddle.net/AVEeN/](http://jsfiddle.net/AVeeN/)

# javascript - 如何将使用 ImageService 提供的图像作为背景的画布元素转换为可下载图像？

> ID：14516089
> 
> 赞同：1
> 
> 时间：2013-01-25T05:48:27.697
> 
> 标签：javascript, html, google-app-engine, google-chrome

我正在编写一个应用程序，用户可以在其中上传图像，在其上绘制并保存结果。我试图通过使用画布元素并使用上传的图像作为其背景来实现这一点。我正在通过 ImageService 检索图像。下面是初始化画布的客户端代码：

```
var image = new Image();
image.src = "http://some.google.domain.com/foobar123";
var ctx = canvas.getContext('2d')
image.onload = function() {
    ctx.drawImage(image, 0, 0);
}; 
```

现在用户可以在图像上绘制东西。

然后当用户想要保存图像时，我调用：

```
canvas.toDataURL("image/png") 
```

这在 Chrome 中给出了这个错误：

```
Error: SecurityError: DOM Exception 18.
"Error: An attempt was made to break through the security policy of the user agent." 
```

我假设 Chrome 不喜欢它，因为图像是从某个谷歌域提供的，这与我的应用引擎应用程序的域不同。

有解决办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:41:50.397

作为一种解决方法，我现在使用 BlobstoreService 来提供图像数据，而不是 ImageService。这种方法提供与我的应用程序相同域的图像，但是您失去了使用 Google 的静态图像服务基础架构的所有好处。

# mfc - SDI设备上下文中的图像加载（MFC VC++）

> ID：14516096
> 
> 赞同：0
> 
> 时间：2013-01-25T05:49:15.503
> 
> 标签：mfc, sdi

如何将图像从磁盘加载到 SDI MFC 应用程序的设备上下文。我想在运行时从现有文件夹中选择图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:58:27.897

它可能是最容易使用的 CImage，请参阅：http: [//msdn.microsoft.com/en-us/library/bwea7by5 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bwea7by5(v=vs.80).aspx)

它是这样的：

```
void CMyDlg::OnBnClickedOpenImage()
{
    CFileDialog dialog(TRUE, NULL, NULL,
        OFN_FILEMUSTEXIST | OFN_HIDEREADONLY,
        L"Windows Bitmap (*.bmp)|*.bmp|JPEG Compressed Image (*.jpg;*.jpeg)|*.jpg; *.jpeg|PNG Image (*.png)|*.png|All Images (*.bmp;*.jpg;*.jpeg;*.png)|*.bmp; *.jpg; *.jpeg; *.png|All Files (*.*)|*.*||");

    if (dialog.DoModal() == IDOK)
    {
        HDC hDC = pDC->GetSafeHdc();
        CImage image;
        image.Load(dialog.GetPathName());
        image.Draw(hDC, 0, 0);
    }
} 
```

**编辑：**添加了打开文件对话框。

# c# - Appfabric 缓存未刷新 - sharedId 的使用

> ID：14516098
> 
> 赞同：1
> 
> 时间：2013-01-25T05:49:20.240
> 
> 标签：c#, asp.net, session-state, appfabric-cache

我有一个网络场，其中包含 4 个托管 Web 应用程序 (x) 的 Web 服务器，它由网络负载平衡器控制，用于我用作`App fabric cache`会话提供者的分布式会话维护。

我只使用一个创建了区域的缓存服务器。

我的配置包含区域名称和共享应用程序 ID，这在整个场中托管的所有 Web 应用程序 (x) 中都是相同的。

但是我看看我是否使用 IP 访问网络应用程序所有会话都不同

```
http://10.10.10.1/myapp/file.aspx returns different session values
http://10.10.10.2/myapp/file.aspx returns different session values
http://10.10.10.3/myapp/file.aspx returns different session values
http://10.10.10.4/myapp/file.aspx returns different session values
http://servername/myapp/file.aspx returns different session values 
```

在这种情况下 sharedId 有什么用？我的目的是维护一个会话，尽管我的应用程序托管在多个服务器中以提高性能。

主要问题是**我的缓存行为不正常，有时会话值在更改后 1-2 分钟都没有更新**

我的 web.config 设置

```
<section name="dataCacheClient" type="Microsoft.ApplicationServer.Caching.DataCacheClientSection, Microsoft.ApplicationServer.Caching.Core, Version=1.0.0.0,Culture=neutral, PublicKeyToken=31bf3856ad364e35" allowLocation="true" allowDefinition="Everywhere"/>

<dataCacheClient>
    <!-- cache host(s) -->
        <hosts>     
          <host name="x" cachePort="22233" />
        </hosts>
    <securityProperties mode="None" protectionLevel="None" />
</dataCacheClient>

<sessionState mode="Custom" customProvider="AppFabricCacheSessionStoreProvider">
    <providers>
        <add name="AppFabricCacheSessionStoreProvider" type="Microsoft.ApplicationServer.Caching.DataCacheSessionStoreProvider" cacheName="xyz" sharedId="app123"  />
  </providers>
</sessionState> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:28:18.763

尝试查看您是否始终保持相同的 ASPNET Cookie（在您最喜欢的浏览器中使用开发工具）。因为 cookie 也绑定到域，所以如果域不同，您的浏览器将不会发送它。

在缓存集群上，检查会话数：如果你有多个会话，你的分布式会话管理肯定会出现问题。

# playframework-2.0 - Play 2.0：如何将 SBT 版本号添加到页脚

> ID：14516100
> 
> 赞同：8
> 
> 时间：2013-01-25T05:49:28.647
> 
> 标签：playframework-2.0, sbt

我想将构建信息添加到我的 Play 的页脚！应用程序（使用 Scala 播放！2.0.4），类似于在 stackoverflow 上所做的。我是 SBT 的新手，很高兴大多数时候一切都像魅力一样。:-)

基本上，我想从中提取应用程序版本`project/Build.scala`，添加当前日期，最后添加一个内部版本号（自动递增，但这可能是另一个要发布的问题的主题）。此信息应添加到`conf/build-info.conf`包含在 main中的文件中`conf/application.conf`。我知道如何从应用程序配置中提取构建信息并将其添加到页面中。

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:07:41.853

我想出了一个`bash`脚本的扩展，它执行我的应用程序的实际登台和启动，从而在开始 SBT / 播放之前提供构建信息。此扩展从 repo 中获取工作目录的修订版，并将`Mercurial`其与当前日期一起写入文件`conf/build-info.conf`。我没有使用自动递增的构建计数器，因为 repo 提供的信息应该足够了。

```
#!/bin/bash
CHANGESET=`hg tip | grep changeset`
while IFS=":" read -ra PARTS; do
    REV=`echo "${PARTS[1]}" | tr -d ' '`@`hg branch`
    echo application.build=\"`date +"%Y-%m-%d"` "[$REV]"\" > conf/build-info.conf
done <<< "$CHANGESET" 
```

导致文件包含类似于

```
application.build="2013-01-25 [98@bug-001]" 
```

该脚本可以很容易地扩展到应用程序版本`grep`的文件`project/Build.scala`，并将其包含在创建的构建信息中。

随意复制/粘贴和调整/改进。无需注明出处，但始终欢迎在此提供反馈 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-09T11:29:11.797

在编译时将构建信息添加到项目的一种简单方法是使用名为[sbt-buildinfo](https://github.com/sbt/sbt-buildinfo)的 SBT 插件。

首先根据您的 SBT 版本选择合适的版本，然后按照说明进行操作。默认情况下，只有您的应用程序`name`、、`version`和在编译时记录`scalaVersion`。`sbtVersion`

要添加`build time`或`dependencies`任何其他自定义值，您可以将此代码添加到您的`build.sbt`并对其进行自定义：

```
 buildInfoKeys ++= Seq[BuildInfoKey](
      resolvers,
      libraryDependencies in Test,
      BuildInfoKey.map(name) { case (k, v) => "project" + k.capitalize -> v.capitalize },
      "custom" -> 12345, // computed at project load time
      BuildInfoKey.action("buildTime") {
        System.currentTimeMillis
      } // re-computed each time at compile
    ) 
```

# android - 如何在 ZeroMQ(jzmq) 3.xx 中使用 XPUB 和 XSUB 使用代理实现 Pub-Sub 网络

> ID：14516102
> 
> 赞同：5
> 
> 时间：2013-01-25T05:49:31.023
> 
> 标签：android, zeromq, jzmq

我正在尝试使用下图中提供的 XPUB 和 XSUB 来实现。我已经浏览了他们提供的示例，但在 Java 中找不到用于 XPUB 和 XSUB 的示例。[在这里](https://github.com/imatix/zguide/blob/master/examples/C/espresso.c)，他们给出了一个 C 语言的例子，因为我是 ZeroMQ 的新手，所以它有点复杂。

![ZeroMQ 中带有代理的 Pub-Sub 网络](../Images/3b68e65b3d8df2cb49d7e60da0951ffd.png)
我正在尝试使用[jni 包装版本](https://github.com/zeromq/jzmq)在 android 中使用它。请帮我找一个例子，如何使用 java 在 ZeroMQ 中使用**代理实现这个 Pub-Sub 网络。**

目前我指的是[http://zguide.zeromq.org/page:all](http://zguide.zeromq.org/page:all)

我试图将其移植如下。 **订阅者.java**

```
公共类订阅者扩展线程实现可运行{

```
private static final String TAG = "Subscriber";
private Context ctx;

public Subscriber(ZMQ.Context z_context) {
    this.ctx = z_context;
}

@Override
public void run() {

    super.run();

    ZMQ.Socket mulServiceSubscriber = ctx.socket(ZMQ.SUB);
    mulServiceSubscriber.connect("tcp://localhost:6001");
    mulServiceSubscriber.subscribe("A".getBytes());
    mulServiceSubscriber.subscribe("B".getBytes()); 

        while (true) {
            Log.d(TAG, "Subscriber loop started..");
            String content = new String(mulServiceSubscriber.recv(0));
            Log.d(TAG, "Subscriber Received : "+content);
        }
} 
```

}
```

**Publisher.java**

```
公共类发布者扩展线程实现可运行{

```
private static final String TAG = "Publisher";
private Context ctx;

public Publisher(ZMQ.Context z_context) {
    this.ctx = z_context;
}

@Override
public void run() {

    super.run();

    ZMQ.Socket publisher = ctx.socket(ZMQ.PUB);
    publisher.connect("tcp://localhost:6000");

    while (true) {
        Log.d(TAG, "Publisher loop started..");
        publisher.send(("A Hello " + new Random(100).nextInt()).getBytes() , 0);
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

}
```

**XListener.java**（现在是一个简单的转发器）

```
公共类 XListener 扩展 Thread 实现 Runnable {

```
private static final String TAG = null;
private Socket publisherX;
private Context ctx;
private Socket subscriberX;

public XListener(ZMQ.Context ctx, ZMQ.Socket subscriberX,
        ZMQ.Socket publisherX) {
    this.ctx = ctx;
    this.subscriberX = subscriberX;
    this.publisherX = publisherX;

}

@Override
public void run() {
    super.run();
    while (true) {          
        Log.d(TAG, "XListener loop started..");

        String msg = new String(subscriberX.recvStr());
        Log.v(TAG, "Listener Received: " +"MSG :"+msg);
        publisherX.send(msg.getBytes(), 0);         
    }
} 
```

}
```

在应用程序**main()**

```
私人无效主要（）{
        ZMQ.Context ctx = ZMQ.context(1);   

 `ZMQ.Socket subscriberX = ctx.socket(ZMQ.XSUB);
    subscriberX.bind("tcp://*:6000");
    try {
        Thread.sleep(500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ZMQ.Socket publisherX = ctx.socket(ZMQ.XPUB);
    publisherX.bind("tcp://*:6001");
    try {
        Thread.sleep(500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    new XListener(ctx, subscriberX, publisherX).start();
    try {
        Thread.sleep(500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

   new XSender(ctx, subscriberX, publisherX).start();
    try {
        Thread.sleep(500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    new Subscriber(ctx).start();
    new Publisher(ctx).start();
}` 

使用代码我无法收听**XSUB**。在移植**espresso.c**时，我无法在 ZMQ 的 java 绑定中找到任何包装器。如何实现一个简单的代理或者我错过了什么？

            回答 #1

赞同：1

时间：2013-01-28T08:46:27.393

哇，我正在回答我自己的问题。我错过了从**publisherX**添加转发器到**subscriberX**。这是缺少的代码。现在 XSUB 和 XPUB 可以发送和获取数据了。

```
公共类 XSender 扩展 Thread 实现 Runnable {

```
private static final String TAG = null;
private Socket publisherX;
private Context ctx;
private Socket subscriberX;

public XSender(ZMQ.Context ctx, ZMQ.Socket subscriberX,
        ZMQ.Socket publisherX) {
    this.ctx = ctx;
    this.subscriberX = subscriberX;
    this.publisherX = publisherX;

}

@Override
public void run() {
    super.run();
    while (true) {
        // Read envelope with address
        Log.d(TAG, "XListener loop started..");

        String msg = new String(subscriberX.recv(0));
        Log.v(TAG, "Listener Received: " +"MSG :"+msg);
        publisherX.send(msg.getBytes(), 0);         

    }

} 
```

}
```

```

# c# - 如何使用 linq 加入 aspnet_membership 和 aspnet_users？

> ID：14516110
> 
> 赞同：0
> 
> 时间：2013-01-25T05:50:18.223
> 
> 标签：c#, linq, join

我很难弄清楚如何使用 LINQ 加入 aspnet 表。所以这是我的询问。

> 如何加入这些 aspnet 表或如何使用 LINQ/MVC 3\. aspnet_Membership、aspnet_Users、aspnet_UsersInRoles 和 aspnet_Roles 获取这些 aspnet 表的确切列名或数据。

一旦我得到这些值或它们的列名，我将把它们加入我在不同数据库中的另外两个表中。

这是我在 sqlserver 中的代码，我想将其转换为 LINQ 语句。

```
SELECT AU.UserId,
       AU.UserName,
       ( MNTP.LastName + ',' + MNTP.FirstName + ' '
         + LEFT(MNTP.MiddleName, 1) + '.' ) Name,
       AR.RoleName
FROM   aspnetdb..aspnet_Membership AM
       INNER JOIN aspnetdb..aspnet_Users AU
               ON AM.UserId = AU.UserId
       INNER JOIN aspnetdb..aspnet_UsersInRoles AUR
               ON AU.UserId = AUR.UserId
       INNER JOIN aspnetdb..aspnet_Roles AR
               ON AUR.RoleId = AR.RoleId
       INNER JOIN User_ManagementDB..MNT_Users MNTU
               ON AU.UserId = MNTU.aspnet_UsersID
       INNER JOIN User_ManagementDB..MNT_Person MNTP
               ON MNTU.PersonID = MNTP.ID 
```

这是我尝试将其转换为 LINQ 语句的代码：

```
var _rolesRepo = new RolesRepository();
var _users = LoadAll();// Um_MNT_Users
var _person = entities.People.ToList();// UM_Person
var _role = _rolesRepo.LoadAll(); 

var _userMem = Membership.GetAllUsers()
        .Cast<MembershipUser>()
        .Select(m => m).ToList(); // I dont know if this is the right syntax to get the aspnet_membership.

var _query = from user in _users
             join personID in _person on user.PersonID equals personID.ID 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:21:38.443

由于我没有看到带有标记的问题，因此`Entity Framework`我假设您无法使用该逻辑创建存储过程并在需要结果时调用它...

如果您的所有数据都在内存中，您可以使用此查询：

```
var result = AspMemmership // the collection of data from aspnetdb..aspnet_Membership table
    .Join(AspUsers,        // the collection of data from aspnetdb..aspnet_Users table
        m => m.UserId,
        u => u.UserId,
        (m, u) => u)
    .Join(AspUsersInRoles,
        u => u.UserId,
        ur => ur.UserId,
        (u, ur) => new
        {
            u.UserId,
            u.UserName,
            ur.RoleId
        })
    .Join(AspRoles,
        x => x.RoleId,
        r => r.RoleId,
        (x, r) => new
        {
            x.UserId,
            x.UserName,
            r.RoleName
        })
    .Join(MNT_Users,
        x => x.UserId,
        u => u.aspnet_UsersID,
        (x, u) => new
        {
            x.UserId,
            x.UserName,
            u.PersonId,
            r.RoleName
        })
    .Join(MNT_Persons,
        x => x.PersonId,
        p => p.Id,
        (x, p) => new
        {
            x.UserId,
            x.UserName,
            u.PersonId,
            Name = String.Format("{0},{1} {2}.", 
                p.LastName, p.FirstName, p.MiddleName.Substring(0, 1)),
            r.RoleName
        }) 
```

# wpf - 在 wpf datagrid 中当前选定的行之前和之后插入一个新行

> ID：14516116
> 
> 赞同：0
> 
> 时间：2013-01-25T05:50:59.657
> 
> 标签：wpf, xaml, datagrid, row

我正在使用 WPF 数据网格。我需要在当前选定的行之前和之后插入新行。我怎样才能做到这一点？

有没有直接的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:28:34.620

我假设您有一个网格绑定到类似`ObservableCollection`带有 SelectedItem 属性的东西，如下所示 `<DataGrid ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedItem}">`：

因此，在您的视图模型或代码隐藏中，您可以这样做：

```
int currentItemPosition = Items.IndexOf(SelectedItem) + 1;
if (currentItemPosition == 1)
    Items.Insert(0, new Item { Name = "New Item Before" });
else
    Items.Insert(currentItemPosition - 1, new Item { Name = "New Item Before" });

Items.Insert(currentItemPosition + 1, new Item { Name = "New Item After" }); 
```

这是一个完整的例子，我只是使用了一个空白的 WPF 项目。后面的代码：

```
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            Items = new ObservableCollection<Item>
            {
                new Item {Name = "Item 1"},
                new Item {Name = "Item 2"},
                new Item {Name = "Item 3"}
            };

            DataContext = this;
        }

        public ObservableCollection<Item> Items { get; set; }

        public Item SelectedItem { get; set; }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            int currentItemPosition = Items.IndexOf(SelectedItem) + 1;
            if (currentItemPosition == 1)
                Items.Insert(0, new Item { Name = "New Item Before" });
            else
                Items.Insert(currentItemPosition - 1, new Item { Name = "New Item Before" });

            Items.Insert(currentItemPosition + 1, new Item { Name = "New Item After" });
        }
    }

    public class Item
    {
        public string Name { get; set; }
    } 
```

XAML：

```
<Window x:Class="DataGridTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Button Grid.Row="0" Content="Add Rows" Click="Button_Click_1" />
        <DataGrid Grid.Row="1" ItemsSource="{Binding Items}"  SelectedItem="{Binding SelectedItem}" />
    </Grid>
</Window> 
```

# ruby-on-rails - 如何继续将 Rails 2 项目升级到 Rails 3+？

> ID：14516120
> 
> 赞同：1
> 
> 时间：2013-01-25T05:51:25.867
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我从另一个在 Ruby 1.8 上运行并使用 Rails 2 的开发人员那里继承了一个旧项目。我对 Ruby 和 Rails 项目非常陌生，所以我想获得有关升级此类项目的建议。这个项目的一个主要问题是它没有测试覆盖率。根本没有单元测试。以下是一些项目统计数据：

```
$ cloc .

http://cloc.sourceforge.net v 1.56  T=3.0 s (149.3 files/s, 15714.0 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Ruby                           379           3106           1476          15246
Javascript                      18           2981           2369          11008
CSS                             16            690           1208           7156
HTML                            21            324             69           1039
YAML                            13             46            164            236
Bourne Shell                     1              2              5             17
-------------------------------------------------------------------------------
SUM:                           448           7149           5291          34702
------------------------------------------------------------------------------- 
```

我的计划是开始一个新的 Rails 项目并编写测试，看到主题失败，然后一点一点地引入旧代码，更新需要更新的部分并继续前进。

这是否像我被告知的那样令人生畏？上述方法是否现实？我应该注意哪些陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:36:54.743

我最近自己做过这个；我通过 Rails 3.0 和 3.1 迁移了一个 Rails 2.3 项目，然后最终迁移到 3.2。这有点令人生畏，但我的观察：

1.  我开始尝试创建一个新项目，就像你建议的那样 - 但我很快就决定反对它，并回到只是更新现有项目。
2.  我发现关于迁移到 Rails 3 的 RailsCasts 非常有用。第一个在这里：[http ://railscasts.com/episodes/225-upgrading-to-rails-3-part-1](http://railscasts.com/episodes/225-upgrading-to-rails-3-part-1)
3.  如果您无论如何都要编写测试（这绝对是正确的做法），我发现在升级到 3.0.0 之后开始这个是最容易的。我记得，在 2.3 和 3.0 之间，关于测试 gem 的兼容版本存在几个问题。我最喜欢的测试环境包括[RSpec](http://rspec.info)、[Cucumber](http://cukes.info)和[Guard](https://github.com/guard/guard)。这个 RailsCast 非常适合设置测试： [http ://railscasts.com/episodes/275-how-i-test](http://railscasts.com/episodes/275-how-i-test)
4.  版本控制是您的朋友。我为我完成的每个主要版本创建了一个 git 分支。这样，当我把东西弄得很糟糕时，我可以很容易地把树枝报废，然后再试一次。

总而言之 - 它是可行的，但需要一些时间才能让它正确。至少在我的情况下，从一个“新鲜”项目开始，结果证明没有必要或有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:38:13.533

嗯..我认为这不是一个好主意，最好升级到最新的稳定 2.x 版本，目前是 2.3.15。

但是，如果您仍然想这样做，可能这些文章可以帮助您：

[http://www.railsdispatch.com/posts/upgrading-a-rails-2-app-to-rails-3](http://www.railsdispatch.com/posts/upgrading-a-rails-2-app-to-rails-3)

[http://net.tutsplus.com/tutorials/ruby/5-awesome-new-rails-3-features/](http://net.tutsplus.com/tutorials/ruby/5-awesome-new-rails-3-features/)

[从 Rails 2 迁移到 Rails 3](https://stackoverflow.com/questions/3781385/migrating-from-rails-2-to-rails-3)

还有这个插件：

[https://github.com/rails/rails_upgrade](https://github.com/rails/rails_upgrade)

# c++ - 为什么我在声明 ifstream 时收到“已定义”错误？

> ID：14516123
> 
> 赞同：3
> 
> 时间：2013-01-25T05:51:32.247
> 
> 标签：c++, visual-studio-2010, linker-errors

我不熟悉使用头文件等，上学期我们在一个巨大的（可怕的：p）文件中完成了所有工作......

我在做我不应该做的事吗？尝试运行程序会导致以下结果：

```
1>  LINK : ~~~\CSC 161\Accounting Assignment\Debug\Accounting Assignment.exe not found or not built by the last incremental link; performing full link
1>driver.obj : error LNK2005: "class std::basic_ifstream<char,struct std::char_traits<char> > welcomeFile" (?welcomeFile@@3V?$basic_ifstream@DU?$char_traits@D@std@@@std@@A) already defined in statistics.obj
1>~~~~\CSC 161\Accounting Assignment\Debug\Accounting Assignment.exe : fatal error LNK1169: one or more multiply defined symbols found
1> 
```

统计.h：

```
#ifndef _STATISTICS_INTERFACE_
#define _STATISTICS_INTERFACE_
...
#include<fstream>

using namespace std;
ifstream  welcomeFile;   //if I comment this out, it compiles

class Stats
{
...blah...
};

void welcome();
void pause();
void printFile(ifstream &inFile);

#endif 
```

统计.cpp：

```
#include "statistics.h"

...working functions...

void welcome()
{
    system("CLS");
    welcomeFile.open("about.txt");
    printFile(welcomeFile);
    welcomeFile.close();
    pause();
} 
```

这些错误看起来像是试图定义两次，但我认为#ifndef 应该设置它，所以它只定义了尚未定义的东西？这是我声明welcomeFile 的唯一地方...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T05:52:37.803

因为你在头文件中定义了对象，违反了**一个定义规则**。

**永远不要在头文件中定义对象！**

标头保护可防止标头的内容在预处理期间多次包含在***同一*** ***[翻译单元中。](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)***它们不会阻止内容包含在不同的翻译单元中。当您将此头文件包含在不同的翻译单元中时，这些单元中的每一个都将具有此对象的定义。
编译器分别编译每个翻译单元以生成一个单独的目标文件（*.o*），每个 .o 文件都将具有此目标定义的副本。当链接器在生成时试图链接到对象/符号名称时，`.exe`它会发现同一个对象/符号的多个定义，从而导致对链接到哪一个的混淆。为了避免这个问题，标准定义了一个规则，称为***[一个定义规则（ODR）](http://en.wikipedia.org/wiki/One_Definition_Rule)***，它禁止同一实体的多个定义。
如您所见，在头文件中包含对象定义并将该头文件包含在多个翻译单元中违反了 ODR。

如果要使用全局对象，则需要将其声明为`extern`并定义在一个且只有一个源文件中。

**好读：**
[错误 LNK2005，已定义？](https://stackoverflow.com/questions/10046485/error-lnk2005-already-defined)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:52:48.033

您应该将该定义放在 .cpp 文件中。否则，包含此 .h 文件的每个文件都将具有此变量的定义，这最终会在链接期间发生冲突。

ps 放入`using namespace std;`你的标题，[被认为是坏的](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c?rq=1)。

# objective-c - UIWebView没有从其他视图控制器Objective C打开请求的url

> ID：14516126
> 
> 赞同：2
> 
> 时间：2013-01-25T05:52:04.563
> 
> 标签：objective-c, url, uiwebview, controller

## 主视图控制器.h

```
#import "ECSlidingViewController.h"
-(void)Loadwebview:(NSURL *)url; 
```

## 主视图控制器.m

```
-(void)Loadwebview:(NSURL *)url
{
   // NSURL *testURL = [NSURL URLWithString:@"http://www.google.com"];
    NSLog(@"loadwebview: %@", url);
    [webViewBox loadRequest:[NSURLRequest requestWithURL:url]];
} 
```

## 左视图控制器.h

```
#import "mainViewController.h"
#import "ECSlidingViewController.h" 
```

## 左视图控制器.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *urlString = [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"url"];

    NSURL *url = [NSURL URLWithString:@"http://www.google.com"]; //urlString];

    NSLog(@"selected url: %@", url);

    mainViewController *mvc = [[mainViewController alloc]init];
    [mvc Loadwebview:url];  

    //NSLog(@"%@", [[dao libraryItemAtIndex:indexPath.row] valueForKey:@"url"]);

    [self.slidingViewController resetTopView]; //it will show mainViewController 

} 
```

此代码不起作用...输出步骤是，日志显示：

> 选择的网址：[http ://www.google.com](http://www.google.com)
> 
> 加载网络视图：[http ://www.google.com](http://www.google.com)

这意味着我正在将 url 传递给`leftViewController.m`to`mainViewController.m`并正确调用`loadwebview`函数。但问题是`webViewBox`没有打开请求的网址。:-(

# symfony - 如何扩展 Sonata\DoctrineORMAdminBundle\Model\ModelManager

> ID：14516128
> 
> 赞同：3
> 
> 时间：2013-01-25T05:52:05.833
> 
> 标签：symfony, extends, symfony-sonata, sonata-admin

我想要在 ModelMangaer 中进行一些更改，然后我正在扩展 ModelManager 但它不起作用。我不知道为什么？

有人告诉我为什么它不起作用？

我在其中扩展 Sonata\DoctrineORMAdminBundle\Model\ModelManager-> 的文件

```
<?php

use Sonata\DoctrineORMAdminBundle\Model\ModelManager;

class ModelManager extends ModelManager
{

/**
 * {@inheritdoc}
 */
public function getSortParameters(FieldDescriptionInterface $fieldDescription,            DatagridInterface $datagrid)
{
    $values = $datagrid->getValues();
    $values = $_GET['filter'];

    if ($fieldDescription->getName() == $values['_sort_by']) {

        if ($values['_sort_order'] == 'ASC') {
            $values['_sort_order'] = 'DESC';
        } else {
            $values['_sort_order'] = 'ASC';
        }
    } else {
        $values['_sort_order'] = 'ASC';
        $values['_sort_by']    = $fieldDescription->getName();
    }
    return array('filter' => $values);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T12:22:35.057

你这里有一个很大的问题：

```
class ModelManager extends ModelManager 
```

你试图从自我扩展类。这是错的！您需要使用完全限定名称或 use`use`语句声明您的基类。你也忘了把命名空间声明。像这样的东西会起作用：

```
namespace Acme\Bundle\DemoBundle\Model;

use Sonata\DoctrineORMAdminBundle\Model\ModelManager as BaseClass;

class ModelManager extends BaseClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:29:56.587

你忘记了命名空间

```
namespace Acme\MyDoctrineORMAdminBundle\Model\ModelManager; 
```

您需要使用[捆绑继承](http://symfony.com/doc/master/cookbook/bundles/inheritance.html)。

```
// src/Acme/MyDoctrineORMAdminBundle/MyDoctrineORMAdminBundle.php

namespace Acme\MyDoctrineORMAdminBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class MyDoctrineORMAdminBundle extends Bundle
{
    public function getParent()
    {
        return 'DoctrineORMAdminBundle';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T11:56:17.533

您必须修改将要注入的服务，请参阅：

[管理员文档 - 参考 - 高级（主） - 26.1。服务配置](http://sonata-project.org/bundles/admin/master/doc/reference/advanced.html#service-configuration)

```
# app/config/config.yml
admins:
sonata_admin:
    sonata.order.admin.order:   # id of the admin service this setting is for
        model_manager:          # dependency name, from the table above
            sonata.order.admin.order.manager  # customised service id 
```

对于管理类上的单个模型管理器，请参阅此答案： [SonataDoctrineORM - 模型扩展](https://stackoverflow.com/questions/15030787/sonatadoctrineorm-model-extends#15640967)

# java - Hibernate Load 不会从会话缓存中获取对象

> ID：14516133
> 
> 赞同：1
> 
> 时间：2013-01-25T05:52:42.337
> 
> 标签：java, hibernate, session, get, load

我尝试了以下代码：

```
Student s1 = (Student) s.load(Student.class, 5); // this records not there in DB
 try {
    s1.setName("Kaushik1");
} catch (ObjectNotFoundException e) {
    s1 = new Student();
    s1.setId(5);
    s1.setName("trying1");
}
s.saveOrUpdate(s1);

Student s2 = (Student) s.load(Student.class, 5);
try {
    s2.setName("Kaushik2");
} catch (ObjectNotFoundException e) {
    //Why should it throw ObjectNotFoundException now
    s2 = new Student();
    s2.setId(5);
    s2.setName("trying2");
}
s.saveOrUpdate(s2); //Why it throws NonUniqueObjectException 
```

我曾经`load`从 ID#5 的数据库中获取记录。记录不存在。然后我尝试在对象上调用 setter，它抛出了一个异常。同意！！

由于记录不存在，我创建了一个新对象并调用`saveOrUpdate()`. 所以现在我假设 ID#5 的对象在会话缓存中。

现在我再次尝试调用`load()`ID#5 的方法并调用它的设置器。它再次抛出 ObjectNotFoundException。

***问题 1***

为什么它不能从 Session 缓存中选择记录？

当我创建新对象并尝试调用`saveOrUpdate()`它时 `NonUniqueObjectException`

> org.hibernate.NonUniqueObjectException：具有相同标识符值的不同对象已与会话关联：[com.cts.closr.Student#5]

它抛出了 ObjectNotFoundException，现在说“对象已与会话关联”。这不矛盾吗？

***问题2***

这是否意味着`load()`方法永远不会检查会话上下文？它总是从数据库中获取？那么在这种情况下我必须使用`get()` 方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T08:09:37.563

[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation-exceptions)说：

> 如果 Session 抛出异常，包括任何 SQLException，立即回滚数据库事务，调用 Session.close() 并丢弃 Session 实例。Session 的某些方法不会使会话保持一致状态。Hibernate 抛出的任何异常都不能被视为可恢复的。

因此，使用`Session.load()`、捕获异常并继续使用会话是一个很大的禁忌。`Session.load()`当您认为该对象必须存在于数据库中时必须使用，如果不存在则必须抛出异常。如果您不确定该对象是否存在，请使用`Session.get()`，测试返回的对象是否为空，并采取相应措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:05:17.093

“现在我再次尝试为 ID#5 调用 load() 方法”，我相信你打错了。

```
 Student s2 = (Student)s.load(Student.class, 6); 
```

应该是

```
 Student s2 = (Student)s.load(Student.class, 5); 
```

?

# emacs - 单元格的 Orgmode 表格格式

> ID：14516134
> 
> 赞同：6
> 
> 时间：2013-01-25T05:52:44.427
> 
> 标签：emacs, org-mode, org-table

我有一个 Emacs 组织模式表，如下所示：

```
 |--------------------------------+------------------------------------------------------|
 | <20>                           | <60>                                                 |
 | How do you alter your password | The command to alter your password in oracle is::    |
 | in Oracle?                     |                                                      |
 |                                |     ALTER USER {userid} IDENTIFIED BY {password};    |
 |                                |                                                      |
 |--------------------------------+------------------------------------------------------| 
```

当使用`C-c C-c`ie 使用键盘快捷键调整表格大小时：`Ctrl-C + Ctrl-C`或自动，它会破坏表格元素内部的间距，我得到：

```
 |--------------------------------+------------------------------------------------------|
 | <20>                           | <60>                                                 |
 | How do you alter your password | The command to alter your password in oracle is::    |
 | in Oracle?                     |                                                      |
 |                                | ALTER USER {userid} IDENTIFIED BY {password};        |
 |                                |                                                      |
 |--------------------------------+------------------------------------------------------| 
```

它会自动修剪表格内容中的前导空格。有没有办法在组织模式表中防止这种情况？我希望 org 模式不更改内容的格式。

这是 Emacs 版本`24.3.50`，但版本中的行为是相同的`24.2`（我在两个版本中都尝试过）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T04:03:34.427

解决这个问题的一种非常hack-ish的方法是围绕org-table-align重新定义或defadvice。相关的片段大致在此处。通过将 * 更改为 ?，您将保留开头的空格。

```
--- ./org-table.el
+++ ./org-table.el.orig
@@ -752,7 +752,7 @@
     ;; 通过拆分行获取数据字段。
     (setq 字段 (mapcar
          (λ (l)
- (org-split-string l " *| *"))
+ (org-split-string l " *| ?"))
          (delq nil (复制序列行))))
     ;; 最长的行有多少个字段？
     （条件情况为零

```

不过，我不确定你是否真的想这样做。您是否会考虑使用自定义标记功能来重构您的标记，也许通过使用标题来代替，以防您以后真的需要它看起来像表格？如果这让您感到困惑，那么另一种方法可能是使用 #+BEGIN_HTML 和 #+END_HTML 块。不优雅，但嗯...

# objective-c - 通过比较Objective C中的字符串值对数组进行排序

> ID：14516137
> 
> 赞同：-4
> 
> 时间：2013-01-25T05:52:50.677
> 
> 标签：objective-c

我有一组自定义对象。对象包含状态：已付款或未付款。我想对数组进行排序：第一次单击时，对数组进行排序以先显示付费记录，然后再显示未付费记录。在第二次单击时，对数组进行排序以显示未付费记录，然后显示已付费记录。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:56:48.983

您可以尝试以下类似声明：

```
NSSortDescriptor *Sorter = [NSSortDescriptor sortDescriptorWithKey:@"yourfield" ascending:YES selector:@selector(caseInsensitiveCompare:)];
[yourArray sortUsingDescriptors:[NSArray arrayWithObject:Sorter]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:54:33.030

你可以这样做：

```
- (IBAction)sort:(id)sender {
    static BOOL isPaidFirst=YES;

    NSSortDescriptor *Sorter = [NSSortDescriptor sortDescriptorWithKey:@"isPaid"
                                                             ascending:!isPaidFirst
                                                              selector:@selector(compare:)];
    [self.array sortUsingDescriptors:[NSArray arrayWithObject:Sorter]];

    isPaidFirst=!isPaidFirst;

    for (MyObject *obj in self.array) {
        NSLog(@"-->%@, %ld, %d",obj.courseName, obj.totalFee, obj.isPaid);
    }
    NSLog(@"------------------");

} 
```

这里 MyObject 是：

```
@interface MyObject : NSObject

@property(strong)NSString *courseName;
@property NSInteger totalFee;
@property BOOL isPaid;

@end 
```

# ruby-on-rails - 我正在尝试动态添加一个块。我给出了一个错误，说“错误的参数数量”（1 代表 2）。

> ID：14516138
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:52:54.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3

部分被命名为 new_campaign_partial.rhtml。它只有用于创建某些文本字段和日历的 html 代码

```
 <div id="new_campaign"
 <%render :partial =>'new_campaign_partial'%>
 </div>

 <%= link_to_function "Add a campaign" do |page|
    inser_html :bottom, :new_campaign, :partial=>'new_campaign_partial'
   end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:57:35.770

更改`inser_html`为`page.insert_html`Ref :- [insert_html](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/PrototypeHelper/JavaScriptGenerator/GeneratorMethods.html#M002186)

```
<%= link_to_function "Add a campaign" do |page|
    page.insert_html :bottom, :new_campaign, :partial=>'new_campaign_partial'
   end %> 
```

# eclipse - 如何在 Eclipse“git 存储库浏览”中格式化代码？

> ID：14516140
> 
> 赞同：0
> 
> 时间：2013-01-25T05:53:11.173
> 
> 标签：eclipse, git, eclipse-plugin

如何`Git Repository perspective`在 Eclipse 中将代码格式化为特定的编码风格？喜欢`Ctrl+shift+f`在 Java 角度工作。有人可以帮我解决这个问题吗？

这里我的问题是格式化一个 android repo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:37:46.327

“格式”操作与特定的编辑器相关联。连续使用`ctrl`+ `shift`+两次打开所有可用热键的列表。`L`按“格式”过滤该列表，您应该会看到一些潜在的候选人......以及他们的背景。Java `ctrl`++ （格式`shift`）`F`操作在任何 Java 编辑器中都可用……即使在 Git 透视图中（至少，在我刚刚尝试过的 Eclipse 4.2 中是这样）。也就是说，只要您打开了 Java 编辑器并且它具有焦点。Ant“格式化”操作应该以相同的方式工作：只要您打开并聚焦“ant build file”编辑器。

*您*想要的“ `ctrl`++ ”是否处于活动状态取决于您尝试触发的具体操作：java 格式、ant 格式、xtext 格式......以及该特定操作如何*由其*`shift`贡献*插件*贡献（和绑定）。要检查这一点，您可以打开一个您知道该操作处于活动状态的编辑器，点击++然后右键单击您的编辑器并找到“格式”操作。当您在按下 ++ 之后单击该操作时，它不会被触发：而是会弹出一个对话框，告诉您哪个操作，谁贡献它，通过哪个 plugin.xml...`F`***`alt``shift``F2``alt``shift``F2`***

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:19:30.163

我找到了答案，很简单，

```
Right Click on project in Git perspective -> import project -> check import as a general project ->select the working directory which you want to import -> finish 
```

现在转到java透视图并找到项目:)就是这样***

# ios - 无法读取资源文件夹中的文件 - iOS

> ID：14516150
> 
> 赞同：2
> 
> 时间：2013-01-25T05:54:02.263
> 
> 标签：ios, objective-c, ipad, nsbundle

我正在尝试读取位于`Object Bank`资源文件夹内的目录中的文件。

```
//Get path for file in object bank
NSString* path = [[NSBundle mainBundle] pathForResource:fileId ofType:@"eam" inDirectory:@"Object Bank"];
NSError *error=nil;

//Check if it is present at the location
Boolean prepositioned=[[NSFileManager defaultManager] fileExistsAtPath:path];
NSLog(@"File Found : %@",prepositioned?@"Yes":@"No");

//This outputs "File Found : Yes"

//Read file
NSString *fileContents=[NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:&error];
NSLog(@"Prepostioned content length: %d",fileContents.length);
//This outputs "Prepostioned content length: 0"

//if file is present:
if (!error) {
    //Do something

}
else
{   
    //Print the error
    NSLog(@"Error : %@",error.description);
} 
```

我收到以下错误：

```
Error Domain=NSCocoaErrorDomain Code=261 "The operation couldn’t be completed. (Cocoa error 261.)" UserInfo=0x8c410d0 {NSFilePath=/Users/ctb/Library/Application Support/iPhone Simulator/6.0/Applications/16881651-3790-4C87-A3A0-1E1D60563684/OAS IPAD.app/Object Bank/70118600.eam, NSStringEncoding=4} 
```

`nil`即使文件不存在，路径也不会返回，并且`fileExistsAtPath:path`无论文件是否存在，总是返回 yes。

我也试过这个：

```
NSArray *paths =[[NSBundle mainBundle] pathsForResourcesOfType:@"eam" inDirectory:@"Object Bank"];
for (NSString *path in paths) {
    NSString *fileString=[NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
    NSLog(@"Resource : %u ",fileString.length);
} 
```

但它有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:35:29.237

您没有从`Resources`文件夹中读取。您正在尝试从`Object Bank`目录中读取。回来`nil`是有道理的，因为那里不存在该文件。

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:fileId ofType:@"eam" inDirectory:@"Object Bank"];

NSFileManager *fileManager = [NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:filePath]) {
        NSLog(@"file exist");
    } 
```

下面是我尝试读取`pk`从资源目录命名的文本文件的屏幕截图。希望能帮助到你。快乐编码:-)

![截屏](../Images/0d4d034635567cc4e7d27d6d10231bdb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-06T00:08:34.190

绝对肯定地确保您要读取的文件是 NSUTF8StringEncoding，否则您将遇到此类错误，这会误导您不告诉您由于编码不匹配而未读取它。

使用 TextWrangler 打开您的文件（eam 类型的文件 ID）并检查它的编码，然后在编码参数中使用该编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-03T09:51:11.680

我必须将`file://`前缀添加到 url

```
guard let resourceString = Bundle.main.resourcePath,
    let fileURL = URL(string: "file://\(resourceString)/mock.txt") else {

    print(">>> url fail")
    return
}

do {

    let data = try Data(contentsOf: fileURL)
    let string = String(data: data, encoding: .utf8)

    print(">>> \(string)")

} catch let error {

    print(">>> failed: \(error)")
    return
} 
```

# linux - bash 别名问题

> ID：14516152
> 
> 赞同：0
> 
> 时间：2013-01-25T05:54:08.757
> 
> 标签：linux, bash

我收到以下错误

```
find: paths must precede expression: a 
```

我不确定我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:59:35.227

这里有几个问题。论点在`$@`，不是`@`。变量插值也不会发生在单引号内。不过，我只提到那些用于教育目的，因为最终的问题是你不能在别名中进行参数扩展：它会在声明别名时评估它，而不是在你使用别名时动态评估。您必须创建一个函数来执行此操作。像这样：

```
function makeprivate() { find "$@" -exec chmod go-rwx {} \; ; } 
```

编辑：添加缺少的分号。

# python - 在python中遍历一长串列表的最佳方法是什么

> ID：14516154
> 
> 赞同：0
> 
> 时间：2013-01-25T05:54:20.790
> 
> 标签：python, sorting, memory, memory-management

我有一个 python 列表，它有大约 10000000 行，每行有 8 个元素。我注意到遍历这个列表并处理它们非常缓慢。在程序的某个地方，我还需要使用特定的键对这个列表列表进行排序。我在具有 2gb RAM 的系统中使用它。在如此大的列表上进行处理的最佳方法是什么？

**编辑**

让我们假设 data[] 有大约 10000000 个列表。我需要使用每个列表的第 0 个元素对数据进行排序

所以我正在遍历数据如下

```
for m in data: 
```

和我正在使用的排序

```
data=sorted(data, key=itemgetter(0)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:00:08.080

在不知道您的排序标准是什么的情况下，我不能说太多。

我能想到的最节省内存的迭代方式是使用`itertools.chain`：

```
for element in itertools.chain.from_iterable(myLongList):
    print element 
```

**编辑**：

`sorted`从旧列表中创建一个新列表。使用`list.sort`就地执行此操作：

```
myLongList.sort(key=operator.itemgetter(0)) 
```

如果您想遍历每一行中的元素并且仍然能够访问任一侧的项目：

```
for rowInd, row in enumerate(myLongList):
    for colInd, element in enumerate(row):
        print "myLongList[%d][%d] is %s" %(rowInd, colInd, element) 
```

# python - Django 表单在 forms.py 中添加锚标记

> ID：14516156
> 
> 赞同：0
> 
> 时间：2013-01-25T05:54:55.663
> 
> 标签：python, django, django-forms

在 django 表单中如何在表单类中添加锚标记而不自定义 form.html

## 表格.py

```
class HealthCheckerForm(PortalModelForm):
    name = forms.CharField(max_length=128,required = False ,help_text="Enter Name", label='Name')
    description = forms.CharField(max_length=128, required = False, label='desc*')

    age = forms.CharField(max_length=128,required = False ,help_text="Enter age", label='age')
    group = forms.CharField(max_length=128, required = False, label='group*') 
```

## 表单.html

```
{% for field in form %}
    <div class="fieldWrapper">
        <div class="fieldInfo">
            {{ field.label_tag }}{{ field }}
            <span class="errorList">{{ field.errors|striptags}}</span>
        </div>
    </div>
{% endfor %} 
```

无需自定义 form.html 如何添加按钮或锚标记

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:56:38.483

我希望我理解你的问题；这似乎与我今天遇到的问题相似。

基本上您可以创建自己的小部件和字段。

```
from django.utils.safestring import mark_safe

class AnchorOnlyWidget(forms.Widget):
    def render(self, name, value, attrs):
        final_attrs = self.build_attrs(attrs, name=name)
        if hasattr(self, 'initial'):
            value = self.initial
        return mark_safe("<a href='%s' %s>%s</a>" %
            (value, flatatt(final_attrs), value))

    def _has_changed(self, initial, data):
        return False

class AnchorOnlyField(forms.FileField):
    widget = AnchorOnlyWidget
    def __init__(self, widget=None, label=None, initial=None, help_text=None):
        forms.Field.__init__(self, label=label, initial=initial,
            help_text=help_text, widget=widget)

    def clean(self, value, initial):
        self.widget.initial = initial
        return initial 
```

然后将其添加到您的表单中：

```
class HealthCheckerForm(PortalModelForm):
    youranchor = AnchorOnlyField(help_text="the help")
    ... 
```

# php - 来自数据库的 PHP For Loop 动态

> ID：14516161
> 
> 赞同：0
> 
> 时间：2013-01-25T05:55:19.837
> 
> 标签：php

我正在从此代码生成我的复选框。但是，我很难让它由 5 个输出生成，然后一旦显示第 5 个输出，它应该跳到下一行。将不胜感激任何帮助。

```
<?php 
    $result=mysql_query("SELECT * FROM tbl_tourism_type order by type_name ");
    while($row = mysql_fetch_array($result))
    echo '<input type="checkbox" name="type" value='.$row['type_id'].'>'
            .'<label>'.$row['type_name']. '</label>'.'<br>'.'<br>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:02:22.547

```
<?php 
$result=mysql_query("SELECT * FROM tbl_tourism_type order by type_name ");
$i=1;
while($row = mysql_fetch_array($result))
{
echo '<input type="checkbox" name="type" value='.$row['type_id'].'><label>'.$row['type_name']. '</label>';
if($i%5==0)
{
   echo "<br>";
}
$i++;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:00:22.323

```
$result = mysql_query("SELECT * FROM tbl_tourism_type order by type_name ");
                $i=0;
                while($row = mysql_fetch_array($result)){
                if($i%5 == 0){
                 //skip to next line
                 //continue??
                 }
                echo '<input type="checkbox" name="type" value='.$row['type_id'].'>'.'
                <label>'.$row['type_name']. '</label>'.'<br>'.'<br>';                   
                $i++;
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:01:47.343

您的问题是如何跳过每 5 个条目并改为换行？

试试这样：

```
<?php 
    $i=0;
    $result=mysql_query("SELECT * FROM tbl_tourism_type order by type_name ");
    while($row = mysql_fetch_array($result)) 
    {
        if (++$i % 5)
            echo sprintf ( '<input type="checkbox" name="type" value="%s">'
                          .'<label>%s</label>'."\n", 
                           htmlentities($row['type_id']), 
                           htmlentities($row['type_name']) );
        else
            echo "<br>\n";
    }
?> 
```

除了迭代结果中的所有条目之外，只需使用每次迭代都会增加的计数器。然后，在迭代内部，如果计数器模 5 不为零，则仅输出当前条目。因此，如果它不是 5 的净倍数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:02:54.380

这样做

```
<?php 
    $i =1;
    $result=mysql_query("SELECT * FROM tbl_tourism_type order by type_name ");
    while($row = mysql_fetch_array($result)){
    if($i == 5){
      echo "<br>";
      $i = 1;
    }
    else
    echo '<input type="checkbox" name="type" value='.$row['type_id'].'>'
            .'<label>'.$row['type_name']. '</label>';
    $i++;
}
?> 
```

# iphone - 如何找到连接到iphone的充电器类型？

> ID：14516163
> 
> 赞同：1
> 
> 时间：2013-01-25T05:55:41.403
> 
> 标签：iphone, ios, objective-c, power-management

是否可以找到连接到使用 ios sdk的`type of charger`（USB 电缆、电源适配器、无线车载充电器...） ？`iPhone`我想了解连接到 iPhone 的充电器详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T08:29:42.983

看起来这是不可能的`ios6 sdk`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:16:21.417

您可以检查手机是否连接到电源。 [http://www.uinnoblog.com/programmatic-access-to-battery-level-on-the-iphone.html](http://www.uinnoblog.com/programmatic-access-to-battery-level-on-the-iphone.html)

# sql - 以编程方式生成 SQL 脚本以在没有 PRIMARY 语句的情况下创建数据库 .. 使用脚本

> ID：14516164
> 
> 赞同：3
> 
> 时间：2013-01-25T05:55:42.670
> 
> 标签：sql, sql-server-2008, c#-4.0, sql-scripts

我创建了由`Scripter.Script()`方法自动生成的脚本。但是如果想摆脱脚本中包含的文件路径。使用 Scripter 类生成脚本时需要设置哪个属性？

SQL 脚本：

```
CREATE DATABASE [ContactManager] ON  PRIMARY 
( NAME = N'ContactManager', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\ContactManager.mdf' , SIZE = 8192KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'ContactManager_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\ContactManager.ldf' , SIZE = 5184KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO 
```

但现在我想生成没有主要语句的脚本，如下所示：

```
CREATE DATABASE [ContactManager] GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T23:09:53.420

`ScriptingOptions.NoFileGroup`应该禁止附加文件组子句。

[更多信息在这里](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scriptingoptions.nofilegroup.aspx)。

此外，似乎在`db.Script()`没有启用属性的情况下简单地调用会忽略文件组，所以我不肯定这对你有用而不会看到你的代码。

请参阅下面的示例：

```
Microsoft.SqlServer.Management.Smo.Server srv = new Server(".");
Microsoft.SqlServer.Management.Smo.Database db = new Database(srv, "Yak");       

System.Collections.Specialized.StringCollection statements = db.Script();

Console.WriteLine(statements);

ScriptingOptions so = new ScriptingOptions();
so.NoFileGroup = false;

foreach (string s in db.Script(so))
{
      Console.WriteLine(s);
} 
```

# asp.net - 更改gridview页码后无法更改结果

> ID：14516165
> 
> 赞同：1
> 
> 时间：2013-01-25T05:55:45.333
> 
> 标签：asp.net, gridview

当我更改页码时，出现错误

```
"The GridView 'GridView1' fired event PageIndexChanging which wasn't handled." 
```

但之后，我搜索并尝试将此代码放入 PageIndexChanging 中，但它仍然无法正常工作：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.SelectedIndex = e.NewPageIndex;
    GridView1.DataSource = SqlDataSource1;
    GridView1.DataBind();
} 
```

最初，当用户提示页面时，我在 gridview 上显示所有数据，然后用户可以搜索数据，然后单击搜索按钮，执行以下代码：

```
 protected void Button1_Click(object sender, EventArgs e)
{
    DateTime dt1 = DateTime.Now, dt2 = DateTime.Now;
    Connection.getCon();
    try
    {
         dt1 = Convert.ToDateTime(TextBox3.Text);
         dt2 = Convert.ToDateTime(TextBox4.Text).AddDays(1);
        lblError.Visible = false;
    }
    catch (Exception exc) {
        lblError.Visible = true;
    }

    string cmd = "select * from tblLogs where (users like '%"+TextBox1.Text.Trim()+"%') and (request like '%"+TextBox2.Text.Trim()+"%') and (requesttime>='"+dt1+"') and (requesttime<'"+dt2+"') ";
    SqlDataSource1.SelectCommand = cmd;
    DataView dv= (DataView) SqlDataSource1.Select(DataSourceSelectArguments.Empty);
    GridView1.DataSourceID = null;
    GridView1.DataSource= dv;
    GridView1.DataBind();
    //GridView1.AllowPaging = false;

} 
```

现在，我没有收到任何错误，但页面仍然没有改变并保持在 1。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:59:58.030

您在 PageIndexChanging 事件中使用了错误的属性，它应该是[PageIndex](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.pageindex.aspx)而不是 SelectedIndex：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    GridView1.DataSource = SqlDataSource1;
    GridView1.DataBind();
} 
```

# asp.net-mvc - 在不使用 ViewModel 对象的情况下，Razor 视图是否可以拥有多个模型？

> ID：14516174
> 
> 赞同：9
> 
> 时间：2013-01-25T05:56:48.173
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

```
@model MyMVC.Models.MyMVC.MyModel

@{
    ViewBag.Title = "Index";
} 
```

我问这个问题的原因是在 MVC 中我们可以有多个表单，所以我想为每个表单都有一个模型。但是当我试图在视图顶部添加另一个模型时，它会显示一个错误。我知道我们可以使用内部有 model1 和 model2 的**ViewModel**，但这不是我要问的问题。

我只是想知道有什么方法可以将 2 个模型放入 1 个视图中。

**更新：**

例如，我想在我的视图中有 2 个表单，所以对于每个表单，我都希望有一个单独的模型。

**更新 2** 谢谢大家的回复。我现在知道 MVC 在一个视图上只支持一个模型。你们认为这是MVC的缺点吗？为什么或为什么不？（还没有人回答……为什么？）

你的答案很相似，所以我什至不知道应该将哪一个设置为答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T06:05:07.497

您应该为其他模型使用一些 prtialviews。您有主模型的主视图。在该视图中，您可以对它们的模型和验证有一些局部视图。

- - - - - - - - - - - - - - - - - - - 编辑：

正如其他人所说，最好使用视图模型并将模型相互结合。但正如你所愿，我在我的 Github 帐户上为你创建了一个示例项目：

[https://github.com/bahman616/ASPNET_MVC_multiple_models_in_a_view_with_partialview.git](https://github.com/bahman616/ASPNET_MVC_multiple_models_in_a_view_with_partialview.git)

这是该项目的简化代码：

这里有两个模型：

```
public partial class Person
{
    public int ID { get; set; }
    [Required]
    public string Name { get; set; }
}
public partial class Company
{
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }
} 
```

我想在一个视图中同时创建视图，所以这是父视图：

```
@model ASP_NET_MVC_Multiple_Models_In_A_View.Models.Person

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm("Create","Person")) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Person</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@{Html.RenderAction("_CompanyCreate", "Company");}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

这是部分观点：

```
@model ASP_NET_MVC_Multiple_Models_In_A_View.Models.Company

<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

@using (Html.BeginForm("_CompanyCreate","Company")) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Company</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T06:03:13.667

**简单的回答：** 不，你不能有两个模型。

**详细信息** 只有一种方法可以声明视图使用的模型：

```
@model [namespace].[path].[ViewModelName] 
```

无法指定上述多个。

除此之外，您只能将一个对象从控制器发送到视图，即模型：

```
public ActionResult WhateverAction()
{
    var model = new MyViewModel();
    return View(model);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T07:23:28.467

理论上你不能这样做，因为它将一个模型绑定到一个视图。但是您可以创建一些想法，例如将其他两个模型组合在一起的模型助手

```
public class model1
{
     string var1 {get; set;}
     string var2 {get; set;}
}

public class model2
{
     string var3 {get; set;}
     string var4 {get; set;}
}

public class modelofBoth
{
     model1 mod1 {get; set;}
     model2 mod2 {get; set;}
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-05T18:51:51.857

如果您不能/不想修改传递给视图的模型，那么您可以通过 ViewBag 对象传递附加对象。对我来说这感觉像是一个黑客，但它有效：

控制器：

```
ViewBag["Model2"] = yourObject 
```

看法：

```
@{var Model2 = ViewBag["Model2"] as yourObjectType;} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-25T06:15:06.373

从技术上讲，您可以使用自定义 WebViewPage 编写自己的视图引擎（从 RazorViewEngine 派生？）并让它做任何您想做的事情。视图派生自`WebViewPage<T>`where`T`是页面模型的类型。为了支持多个模型，视图基类需要有多个泛型类型。但是，使用 RazorViewEngine 中的烘焙后，您仅限于每个视图的单一模型类型，并且大部分控制器框架假定每个视图只有一个模型，因此您也必须重写它。然而，这似乎没有什么意义，因为您可以简单地让您的模型成为（单个）视图模型的属性，然后为每个提供该属性的表单使用局部视图作为局部模型的模型。

有关更多信息，请参阅[http://haacked.com/archive/2011/02/21/changeing-base-type-of-a-razor-view.aspx](http://haacked.com/archive/2011/02/21/changing-base-type-of-a-razor-view.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T06:12:08.217

答案是否定的。这就是 ViewModel 模式存在的原因。因为 razor 引擎完全依赖于您传递的模型，所以该模型用于 ModelBinding 以进行基本的 CRUD 操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-04T14:23:31.107

您可以轻松地为每个表单创建 1 个模型。对于每个表单，您只需要执行以下操作：

```
var model = new MyModel();
@Html.TextBoxFor(m => model.Title)
@Html.ValidationMessageFor(m => model.Title) 
```

验证就像一个魅力。

这样，您可以让您的模型像往常一样显示信息，并且每个表单有 1 个模型来提交数据（例如时事通讯订阅）

# ios - xcode ios HMAC SHA 256 哈希

> ID：14516191
> 
> 赞同：19
> 
> 时间：2013-01-25T05:58:48.843
> 
> 标签：ios, objective-c, cryptography, hmac, sha256

所以我试图弄清楚如何在 ios 上进行 hmacshad256 哈希，因为这是我为我制作的 wcf 服务 api 所做的哈希。我一直在尝试寻找有关它的一些信息，但通常最终会得到一个 SHA-256 哈希。

这是我唯一的参考：

[需要像在 Java 中一样在 Objective C 中生成 HMAC SHA256 哈希](https://stackoverflow.com/questions/8458917/need-to-generate-hmac-sha256-hash-in-objective-c-as-in-java)

而且我不确定这是否是唯一的方法（导入 java hmac 类）

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-27T13:49:37.760

```
NSString * parameters = @"string to hash"
NSString *salt = @"saltStringHere";
NSData *saltData = [salt dataUsingEncoding:NSUTF8StringEncoding];
NSData *paramData = [parameters dataUsingEncoding:NSUTF8StringEncoding];
NSMutableData* hash = [NSMutableData dataWithLength:CC_SHA256_DIGEST_LENGTH ];
CCHmac(kCCHmacAlgSHA256, saltData.bytes, saltData.length, paramData.bytes, paramData.length, hash.mutableBytes);
NSString *base64Hash = [hash base64Encoding]; 
```

并且

```
#import <CommonCrypto/CommonHMAC.h> 
```

由于已从 iOS 7.0[`base64Encoding`弃用](https://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSData_Class/index.html)，最后一行应为：

```
NSString *base64Hash = [hash base64EncodedStringWithOptions:0]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-24T18:23:36.717

这是我提交的解决方案，我从有关此事的其他答案中汇总：

通过更改 CC_SHA256_DIGEST_LENGTH 和 kCCHmacAlgSHA256，这很容易适应其他哈希类型。

如果您对此感兴趣，请查看 CommonCrypto 库中的 CommonDigest.h 文件。

```
#import <Foundation/Foundation.h>
#import <CommonCrypto/CommonCrypto.h>

+ (NSString *)hmac:(NSString *)plaintext withKey:(NSString *)key
{
    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [plaintext cStringUsingEncoding:NSASCIIStringEncoding];
    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
    CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
    NSData *HMACData = [NSData dataWithBytes:cHMAC length:sizeof(cHMAC)];
    const unsigned char *buffer = (const unsigned char *)[HMACData bytes];
    NSMutableString *HMAC = [NSMutableString stringWithCapacity:HMACData.length * 2];
    for (int i = 0; i < HMACData.length; ++i){
        [HMAC appendFormat:@"%02x", buffer[i]];
    }

    return HMAC;
} 
```

这已经在 iOS 8.x 和 iOS 7.x 上测试过了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-15T08:43:24.347

```
+ (NSString *)hmacSHA256EncryptString{

    NSString * parameterSecret = @"input secret key";
    NSString *plainString = @"input encrypt content string";
    const char *secretKey  = [parameterSecret cStringUsingEncoding:NSUTF8StringEncoding];
    const char *plainData = [plainString cStringUsingEncoding:NSUTF8StringEncoding];
    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
    CCHmac(kCCHmacAlgSHA256, secretKey, strlen(secretKey), plainData, strlen(plainData), cHMAC);
    NSData *HMACData = [NSData dataWithBytes:cHMAC length:sizeof(cHMAC)];
    const unsigned char *bufferChar = (const unsigned char *)[HMACData bytes];
    NSMutableString *hmacString = [NSMutableString stringWithCapacity:HMACData.length * 2];
    for (int i = 0; i < HMACData.length; ++i){
        [hmacString appendFormat:@"%02x", bufferChar[i]];
    }
    return hmacString;

}
```

# c# - 用于读写一个非常大的 XML 文件的 Windows 窗体应用程序，但它是挂起的

> ID：14516192
> 
> 赞同：0
> 
> 时间：2013-01-25T05:58:48.457
> 
> 标签：c#, xml, winforms

我试图开发一个[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序来读取和写入一个非常大的 XML 文件。我有两个按钮，1) 用于编写 XML 文件，** 和 2) 读取 XML 文件。当我单击写入 XML 按钮时，我的 winForm 应用程序挂起。写入 XML 文件时不允许执行其他操作，但我想读取和写入同一个 XML 文件。

### 用于阅读

```
void btnReading_Click(object sender, EventArgs e)
{
    strXpathQuery = "/AppXmlLogWritter/LogData[substring(LogDateTime, 1, 8)  >='" +
                    dateTimePickerFromDate.Value.ToString("yyyyMMdd") +
                    "' and substring(LogDateTime, 1, 8)  <='" +
                    dateTimePickerToDate.Value.ToString("yyyyMMdd") +
                    "']";
    XmlElement objXmlRoot = null;
    XmlNodeList objxmlNodeList = objXmlRoot.SelectNodes(strXpathQuery);
}

void   BindData(objxmlNodeList);
{
    BindData(XmlNodeList objxmlNodeList)
    DataTable dataTable = new DataTable();
    dataTable = XmlNodeListToDataTable(objxmlNodeList, new string[] { "LogID", "LogDateTime"});

    lstViewInfo.View = View.Details;
    lstViewInfo.Clear();
    lstViewInfo.Columns.Add("LogID", Convert.ToInt32(lstViewInfo.Width * 0.20));
    lstViewInfo.Columns.Add("LogDateTime", Convert.ToInt32(lstViewInfo.Width * 0.20));
    ListViewItem objListViewitem = null;
    for (int i = 0; i < dataTable.Rows.Count; i++)
    {
        objListViewitem = new ListViewItem();
        objListViewitem.Text = dataTable.Rows[i]["LogID"].ToString();
        objListViewitem.SubItems.Add(dataTable.Rows[i]["LogDateTime"].ToString());
        lstViewInfo.Items.Add(objListViewitem);
    }
} 
```

### 写作用

```
void button1_Click(object sender, EventArgs e)
{
    Mutex objMutex = new Mutex(false, @"Global\MySharedLog");
    XmlDocument xmlDoc = new XmlDocument();
    string currentDateTime = DateTime.Now.ToString("yyyyMMddHHmmss");
    XmlElement newelement = xmlDoc.CreateElement("LogData");
    XmlElement xmlLogID = xmlDoc.CreateElement("LogID");
    XmlElement xmlLogDateTime = xmlDoc.CreateElement("LogDateTime");

    int randomNumber = random.Next(9999);
    xmlLogID.InnerText = _logIDPrefix + currentDateTime + DateTime.UtcNow.Ticks + randomNumber;
    xmlLogDateTime.InnerText = currentDateTime;

    newelement.AppendChild(xmlLogID);
    newelement.AppendChild(xmlLogDateTime);

    try
    {
        objMutex.WaitOne();
        if (!File.Exists(_logFilePath))
        {
            File.WriteAllText(
              _logFilePath,
              "<?xml version='1.0' encoding='utf-8' standalone='yes'?>\r\n<AppXmlLogWritter><objMutex></objMutex></AppXmlLogWritter>");
        }

        using (FileStream fileStream = new FileStream(_logFilePath,
               FileMode.OpenOrCreate,
               FileAccess.ReadWrite,
               FileShare.ReadWrite))
        {
            xmlDoc.Load(fileStream);
            xmlDoc.DocumentElement.AppendChild(newelement);
            fileStream.SetLength(0);
            xmlDoc.Save(fileStream);
        }
    }
    finally
    {
        objMutex.ReleaseMutex();
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:29:44.183

应用程序挂起是因为您使用 UI 线程来完成所有工作，而不是将其移至单独的线程。

这需要时间（作为操作），只要 UI 线程很忙，它就无法处理重绘、移动、对鼠标做出反应等重要消息。

后台工作程序，在处理程序的 .NET 4.5 异步方法中，将立即修复该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:27:34.317

开箱即用...您也可以尝试[Xsd2Code](http://xsd2code.codeplex.com/)。它是一个开源工具，甚至我们在我们的项目中都在使用它。它易于维护和管理。即使我们处理大型 XML 文件。

而关于 Windows Forms 挂起，首先，使用[XPath](http://en.wikipedia.org/wiki/XPath)可以让你的操作更快。关于挂起，在新线程中操作是我能看到的唯一希望。当您编写 XML 文件时，您的主窗口线程很忙。线程的骨架代码可能是：

```
private void WriteXML_Click(object sender, EventArgs e)
{
    Thread t = new Thread(new ThreadStart(WriteXMLFile));
    t.Start();
}

private void WriteXMLFile()
{
    // Write an XML file
} 
```

此代码只是使用线程的示例代码。这些[帖子](https://stackoverflow.com/questions/5703478/whats-the-fastest-way-to-write-xml)，[帖子](https://stackoverflow.com/questions/284324/what-is-the-best-way-to-build-xml-in-c-sharp-code)也可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:15:27.450

应用程序挂起，因为它正在尝试打开文件。您在“XmlNodeListToDataTable”中使用什么方法？MSXML？如果是这样，请尝试使用[XPath](http://en.wikipedia.org/wiki/XPath)，它会更快，并且会更快地加载您的 XML。此外，“XmlNodeListToDataTable”可以在单独的线程中完成，以使您的 GUI 在需要时仍能响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:51:44.527

是的，因为您用来编写的方法 XmlNodeListToDataTable() 绑定了整个[xml](http://en.wikipedia.org/wiki/XML)节点。您创建行，然后添加列，然后将值添加到相应的列。想象一下，如果 XML 文件的文件大小为 1 GB。然后有大量的 XML 节点，因此将整个 XML 数据绑定到数据表需要花费大量时间。

因此，更好的方法是在数据集中获取 XML 文件并出于显示目的，您可以遍历数据集中的数据表。具体来说，与将 XML 绑定到数据表相比，它花费的时间更少。

# php - 如何将数据从php返回到eclipse？

> ID：14516194
> 
> 赞同：9
> 
> 时间：2013-01-25T05:59:03.763
> 
> 标签：php, android, mysql

嗨，我正在使用 php 从 mysql 数据库中获取数据，并且在成功接收到数据后，我调用了一个需要打印数据的新活动。

这是我的代码：

```
public class RecoProd extends Activity {
    EditText pd;
    TextView error;

    ArrayList<NameValuePair> postParameters;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recomain);
        pd = (EditText) findViewById(R.id.name);

        error = (TextView) findViewById(R.id.myTableLayout);

        pd.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("product", pd
                        .getText().toString()));

                // String valid = "1";

                DownloadWebPageTask dw = new DownloadWebPageTask();
                dw.execute("");

            }
        });
    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = null;
            for (String url : urls) {
                try {
                    response = CustomHttpClient.executeHttpPost("http://10.0.2.2/abc/check2.php", postParameters);  
                    String res = response.toString();
                    // res = res.trim();
                    res = res.replaceAll("\\s+", "");
                    // error.setText(res);
                    if(res.equals("1")){     ***<<--------------I think the error is here***
                        Intent loginintent = new Intent(RecoProd.this, RecoProd1.class);
                        startActivity(loginintent);
                    }
                    else
                        error.setText("Sorry!! ");

                } catch (Exception e) {

                }
            }
            return response;
        }

        @Override
        protected void onPostExecute(String result) {
        }
    }
} 
```

这是我的 php 代码：

```
<?php
$pd=$_POST['name'];

//connect to the db
$user = "root";
$pswd = "";
$db = "mylogin";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);

$query = "SELECT * FROM recoprod  ";
$result = mysql_query("SELECT * FROM recoprod");
while($row = mysql_fetch_array($result))
  {
  $output[]=$row;
  }
/*
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());
//this is where the actual verification happens  
if(mysql_num_rows($result) > 0)  
echo 1;  // for correct login response  
else  
echo 0; // for incorrect login response */
?> 
```

当我执行它时，我正在关闭它。

```
EDITED CODE

package com.androidhive.googleplacesandmaps;

import java.lang.reflect.Constructor;
import java.lang.reflect.Method;
import java.util.ArrayList;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;
public class RecoProd extends Activity {
    EditText pd;
    TextView error;

    ArrayList<NameValuePair> postParameters;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        try {
            Class<?> strictModeClass = Class.forName("android.os.StrictMode", true, Thread.currentThread()
                    .getContextClassLoader());

            Class<?> threadPolicyClass = Class.forName("android.os.StrictMode$ThreadPolicy", true, Thread
                    .currentThread().getContextClassLoader());

            Class<?> threadPolicyBuilderClass = Class.forName("android.os.StrictMode$ThreadPolicy$Builder", true,
                    Thread.currentThread().getContextClassLoader());

            Method setThreadPolicyMethod = strictModeClass.getMethod("setThreadPolicy", threadPolicyClass);

            Method detectAllMethod = threadPolicyBuilderClass.getMethod("detectAll");
            Method penaltyMethod = threadPolicyBuilderClass.getMethod("penaltyLog");
            Method buildMethod = threadPolicyBuilderClass.getMethod("build");

            Constructor<?> threadPolicyBuilderConstructor = threadPolicyBuilderClass.getConstructor();
            Object threadPolicyBuilderObject = threadPolicyBuilderConstructor.newInstance();

            Object obj = detectAllMethod.invoke(threadPolicyBuilderObject);

            obj = penaltyMethod.invoke(obj);
            Object threadPolicyObject = buildMethod.invoke(obj);
            setThreadPolicyMethod.invoke(strictModeClass, threadPolicyObject);

        } catch (Exception ex) {
            String TAG = null;
            Log.w(TAG, ex);
        }
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recomain);
        pd = (EditText) findViewById(R.id.name);

        error = (TextView) findViewById(R.id.showresult);

        pd.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("product", pd
                        .getText().toString()));

                // String valid = "1";

                DownloadWebPageTask dw = new DownloadWebPageTask();
                dw.execute("");

            }
        });
    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = null;
            for (String url : urls) {
                try {
                    response = CustomHttpClient.executeHttpPost("http://10.0.2.2/abc/check2.php", postParameters);  
                    String res = response.toString();
                    // res = res.trim();
                    res = res.replaceAll("\\s+", "");
                    // error.setText(res);
                    try{
                        res = "";
                  JSONArray jArray = new JSONArray(res);
                        for(int i=0;i<jArray.length();i++){
                                JSONObject json_data = jArray.getJSONObject(i);
                                Log.i("prod_id","id: "+json_data.getInt("prod_id")+
                                        ", prod_name: "+json_data.getString("prod_name")+
                                        ", prod_category: "+json_data.getInt("prod_category")+
                                        ", prod_cost: "+json_data.getInt("prod_cost")
                                );
                                //Get an output to the screen
                                res += "\n" + json_data.getString("prod_id") + " -> "+ json_data.getInt("prod_name");
                        }
                }
                catch(JSONException e){
                        Log.e("log_tag", "Error parsing data "+e.toString());
                }

                try{
                 error.setText(res);
                }
                catch(Exception e){
                 Log.e("log_tag","Error in Display!" + e.toString());;          
                }   
           }
                 catch (Exception e) {
            Log.e("log_tag","Error in http connection!!" + e.toString());     
           }
            }
            return response;

               }
        @Override
        protected void onPostExecute(String result) {
        }
    }
} 
```

这是我的 php 代码：

```
<?php
$pd = $_POST['name'];

//connect to the db
$user = "root";
$pswd = "";
$db = "mylogin";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);

$query = "SELECT * FROM recoprod  ";
$result = mysql_query("SELECT * FROM recoprod");
while($row = mysql_fetch_array($result)) {
    $output[] = $row;
}
print(json_encode($output));
mysql_close();
/*
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());
//this is where the actual verification happens  
if(mysql_num_rows($result) > 0)  
echo 1;  // for correct login response  
else  
echo 0; // for incorrect login response */
?> 
```

嗨，我对上面编辑的代码进行了一些更改。

而且我只有 2 行，每行包含 4 个数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:53:41.297

您的问题出在 AsyncTask 部分

当您使用 AsyncTask 时，您可以在 doInBackground 函数上处理数据，但在 onPostExecute 上更新 UI。将处理后的值返回给 onPostExecute，因为在 android 上使用 AsyncTask 允许您在加载完成后更改布局上的内容。但仅在 onPostExecute 状态下，因此在 doInBackground 上处理您的 json，然后将其反映到 onPostExecute 上的布局

```
public class RecoProd extends Activity {
EditText pd;
TextView error;

ArrayList<NameValuePair> postParameters;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recomain);
    pd = (EditText) findViewById(R.id.name);

    error = (TextView) findViewById(R.id.myTableLayout);

    pd.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("product", pd
                    .getText().toString()));

            // String valid = "1";

            DownloadWebPageTask dw = new DownloadWebPageTask();
            dw.execute("");

        }
    });
}

private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        String response = null;
        for (String url : urls) {
            try {
                response = CustomHttpClient.executeHttpPost("http://10.0.2.2/abc/check2.php", postParameters);  
                String res = response.toString();
                // res = res.trim();
                res = res.replaceAll("\\s+", "");
                // error.setText(res);

            } catch (Exception e) {

            }
        }
        return res;
    }

    @Override
    protected void onPostExecute(String result) {

         if(result.equals("1")){    
             Intent loginintent = new Intent(RecoProd.this, RecoProd1.class);
             startActivity(loginintent);
         }
         else
             error.setText("Sorry!! ");
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:41:58.660

这是您可以执行的操作：

```
public class RecoProd extends Activity {
EditText pd;
TextView error;

ArrayList<NameValuePair> postParameters;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recomain);
    pd = (EditText) findViewById(R.id.name);

    error = (TextView) findViewById(R.id.myTableLayout);

    pd.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("product", pd
                    .getText().toString()));

            // String valid = "1";

            downloadWebPageTask();

        }
    });
}

private void downloadWebPageTask extends AsyncTask<String, Void, String> {
    String url = "http://10.0.2.2/abc/check2.php?postParameters=paramValue";
    grabURL(url);
}

public void grabURL(String url){
    try {
        new GrabURL().execute(new URL(url));
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
}

private class GrabURL extends AsyncTask<URL, Integer, JSONObject> {

    @Override
    protected JSONObject doInBackground(URL... urls) {
        // This method will send the http request
        JSONObject jsonResponse=null;
        try 
        {
            URL link = urls[0];
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet request = new HttpGet(link.toString());
            ResponseHandler<String> responseHandler=new BasicResponseHandler();
            String responseBody = httpClient.execute(request, responseHandler);
            jsonResponse = new JSONObject(responseBody);
        }
        catch (Exception e) {
            e.printStackTrace();
        }

        return jsonResponse;
    }

    @Override
    protected void onPreExecute() {
        // This method will be executed before the http request
        // In this method you can do things like showing the loading sign
    }

    @Override
    protected void onPostExecute(JSONObject jsonObj) {
        // This method will run after the http request and contains the results
        // This method expectes you return a valid jSon from the server
        try {
            if(! jsonObj.getString("code").equalsIgnoreCase("200") ){
                // Bad response from server
            }
            else if( jsonObj.has("data") ){
                JSONArray dataArray = jsonObj.getJSONArray("data");

                String tmpUserLoc = (String) jsonObj.getJSONObject("data").get("userLocation");
                String tempUserNIC = (String) jsonObj.getJSONObject("data").get("userNIC");
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }
        // You can stop the loading sign here if you showed it in OnPreExecute
    }

} 
```

}

我没有测试过这段代码，但它应该可以工作。如果您要从服务器返回 jSon Array，您可能需要查看[jSonArray](http://developer.android.com/reference/org/json/JSONArray.html) doc 或者[此链接](https://stackoverflow.com/questions/4244879/reading-a-json-array-in-android)也可能会有所帮助。

# doxygen - Doxygen：图像未显示在生成的 chm 文件中

> ID：14516196
> 
> 赞同：1
> 
> 时间：2013-01-25T05:59:07.177
> 
> 标签：doxygen

我已经复制了文件夹名称报告，其中包含 doxygen 的 HTML 输出文件夹所必需的 html 文件和图像。在其中一个页面中，我试图提供指向外部 HTML 文档（在报告目录中）的链接。在 chm 文件中，HTML 文档正在打开，但图像未显示。当我在 html 中打开 index.html 文件时输出目录并尝试打开图像正确显示的链接。

# maven-release-plugin - Maven 发布插件 - 多模块项目 - 发布：准备 - 为什么我看到子模块已跳过，尽管 BUILD IS SUCCESSFUL

> ID：14516202
> 
> 赞同：4
> 
> 时间：2013-01-25T05:59:35.820
> 
> 标签：maven-release-plugin

早上好。

我在 MultiModule 项目中使用 maven release-plugin。

虽然`mvn release:prepare`并且`mvn release:perform`是成功的，为什么我在运行时看到子 maven 模块的“SKIPPED” `mvn release:prepare`。

请帮我。

我的代码库文件夹结构如下：

```
 PARENT 
##############
c:\projects\MavenRightMultiModuleParent\pom.xml

c:\projects\MavenRightMultiModuleParent\src\main\java

c:\projects\MavenRightMultiModuleParent\src\test\java

Parent POM.xml have below as <MODULES><MODULEchild1webapp></MODULE>......</MODULES>

 CHILD MODULES 
###################

c:\projects\MavenRightMultiModuleParent\child1webapp\pom.xml
.....

c:\projects\MavenRightMultiModuleParent\child2webapp\pom.xml
......

    [INFO] Cleaning up after release...
    [INFO] ------------------------------------------------------------------------
    [INFO] Reactor Summary:
    [INFO]
    [INFO] MavenRightMultiModuleParent ....................... SUCCESS [16.766s]
    [INFO] child1webapp Maven Webapp ......................... SKIPPED
    [INFO] child2webapp ...................................... SKIPPED
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 17.911s
    [INFO] Finished at: Fri Jan 25 00:38:58 EST 2013
    [INFO] Final Memory: 6M/15M
    [INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T19:06:05.340

是正确的。

如果孩子没有把标签“版本”不需要更新。

最终结果是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T13:42:33.810

如果将标签“版本”放在“父”中，则不能更新子代，如果要更新子代，请输入父代的版本号，如下所示：

```
<parent>
    <groupId>com.xxx</groupId>
    <artifactId>xxx</artifactId>
    <version>X.X.X</version>
</parent> 
```

因此，合并属性“-DautoVersionSubmodules=true”，例如：“mvn -B release:clean release:prepare release:perform -DautoVersionSubmodules=true”，自动更新子级对“父级”的所有调用

# ios - 带有星期几而不是完整日期的 iO S 日期选择器

> ID：14516204
> 
> 赞同：6
> 
> 时间：2013-01-25T05:59:46.427
> 
> 标签：ios, uidatepicker

我想要一个 iOS 日期选择器，允许用户选择星期几和时间。例如：周三中午 12:00。我不需要像下面那样显示月份或日期。有谁知道如何只允许用户设置一周中的一天和时间？谢谢！

![在此处输入图像描述](../Images/94b96010103996865a2f0c4da80eae10.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:07:17.510

在默认的 IOS 日期选择器中，这是不可能的。但是如果您仍然想要这种选择器，那么您需要使用简单的选择器并在其中添加逻辑，我的意思是根据您的要求对其进行自定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:09:39.423

我认为您不能自定义`UIDatePicker`显示工作日。我认为您可以使用`UIPickerView`和创建自己的日期选择器。

请参阅用户[Igor](https://stackoverflow.com/questions/3348247/uidatepicker-select-month-and-year/11150960#11150960)在此问题中的回答以了解如何自定义`UIPickerView`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-30T11:34:29.027

如果您想从日期选择器中选择日期，则只写

```
[dateFormat setDateStyle:NSDateFormatterFullStyle]; 
```

# google-apps-script - 将谷歌电子表格作为表格嵌入到电子邮件正文中

> ID：14516211
> 
> 赞同：0
> 
> 时间：2013-01-25T06:00:11.140
> 
> 标签：google-apps-script, google-sheets

我在谷歌电子表格中有数据（A1：B16 - 工作表名称“test2”），我想不出一个脚本来从特定工作表中提取数据并将其放入电子邮件正文的表格中。然后我会使用时间触发器来自动化这个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:04:00.390

使用[getValues()](https://developers.google.com/apps-script/class_range#getValues)检索范围的值。然后[sendEmail()](https://developers.google.com/apps-script/class_mailapp#sendEmail)发送您的电子邮件。

# html - 我无法让 div 向上移动

> ID：14516216
> 
> 赞同：0
> 
> 时间：2013-01-25T06:00:33.717
> 
> 标签：html, css

我无法获得标语！(id h2) 提升到图片上方。h1 非常好，但不是 h2。如果这意味着什么，我是 CSS、HTML 和 Stackoverflow 的新手。我提前感谢您的帮助。

的HTML：

```
<html>
<head>
    <link href="HomePage.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="Icon">
    <div id="h1">Name</div>
    <img src="RightArrow.jpg" class="img-circle">
    <div id="h2">Slogan!</div>
</div> 
```

CSS：

```
#h1{
    line-height:120px;/*to lower it*/
    position:absolute;
    left:-150px;
    font-size:38.5px;
}

#h2{
    line-height:-300px/*to raise it*/
    position:absolute;
    right:400px;
    font-size:38.5px;
}

#Icon{
    position:relative;
    margin-top:25px;
    margin-bottom:100px;
    margin-left:600px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:03:56.853

行高不应该用来移动任何东西。使用相对或绝对定位。但是，这是一个更简单的解决方案：

```
<html>
<head>
    <link href="HomePage.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="Icon">
    <div id="h1">Name</div>
    <div id="h2">Slogan!</div>
    <img src="RightArrow.jpg" class="img-circle">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:17:25.323

你到底想做什么？？？
提升上面的图像可以通过

```
<div id="h2">Slogan!</div>
<img src="RightArrow.jpg" class="img-circle"> 
```

我没有得到你想做的事？？？
请更具体地说明您的要求...

# java - 从 servlet 获取响应

> ID：14516219
> 
> 赞同：1
> 
> 时间：2013-01-25T06:01:08.160
> 
> 标签：java, android, servlets

我正在使用以下代码从 servlet 获取响应。它将检查变量“get”中的给定名称是否在特定表中，`1`如果存在则打印。

部分servlet代码：

```
get = request.getParameter("nam");// such as get="kannan"
try {
    // Connection code

    ResultSet rs = stmt
            .executeQuery("select * from newfarmer where rname='" + get
                    + "'");
    while (rs.next()) {
        username = rs.getString("rname");

        if (get.equals(username)) {
            out.println(1);
        }

    }
} catch (Exception e) {
    out.println(e.toString());
} 
```

在我的 android 应用程序中，我按如下方式检查此响应：

```
response = CustomHttpClient.executeHttpPost(
        "http://moberp.svsugar.com:8080/androidservlt/Modify",
        postParameters);
String res = response.toString();
res = res.trim();

if (res.equals("1")) {
    flag = 1;
    Toast.makeText(getBaseContext(), "Correct", Toast.LENGTH_LONG)
            .show();
} else {
    flag = 2;
    Toast.makeText(getBaseContext(), "please enter correct Ryot name",
            Toast.LENGTH_LONG).show();
} 
```

它非常适合单张唱片。我的意思是，在“newfarmer”表中，如果“rname”包含多个相同的名称，则只执行 else 部分。

示例：如果“kannan”在表中出现 2 次 Servlet 输出为

```
1 1 
```

现在在 android 应用程序中，显然 else 部分被执行，因为 response 不是 1。这只是两个相同名称的情况。该表可能包含超过 10 个相同的名称。如果有 10 个相同的名称，则 servlet 输出为

```
1 1 1 1 1 1 1 1 1 1 
```

所以我需要检查所有。所以我需要改变我的 if 条件，但我不知道该怎么做。有人请给出答案。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:58:49.567

而不是 while 循环使用

```
if(rs.next()) 
```

现在它只会打印一次。

安卓没有变化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:06:47.683

在 servlet 中执行此操作

如果（rs.next（））

```
 {
               username=rs.getString("rname");

             if(get.equals(username))
             {
                   out.println(1);
             }

           } 
```

}

如果记录存在，则此循环现在仅运行 1 次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:08:19.997

我不明白`get.equals(username)`当您的 SQL 查询中有`where`子句时，为什么会评估为 false？

所以试试这个。

```
if(rs.next()) 
{    
              // The above condition will make the code inside if executed 
              // only if any matching record is found and 
              //hence it will print `1` only once 
              //if any matching record is found. 
   username=rs.getString("rname");

   if(get.equals(username))
   {
       out.println(1);
   }

} 
```

此外，您使用`stmt.executeQuery("select * from newfarmer where rname='"+get+"'");` 的是易受 SQL 注入影响的。

所以最好改用准备好的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:13:41.370

试试看`if(rs.next())`，这肯定会帮助你

# php - 终极密码盐

> ID：14516221
> 
> 赞同：2
> 
> 时间：2013-01-25T06:01:09.600
> 
> 标签：php, passwords, salt

所以最近我一直在做大量关于如何保护密码的研究。我相信我了解它的基本原理。因此，我正在尝试编写自己的函数来保护 php 中的密码。

但是当谈到加盐密码时，我有些困惑。我们创建一个随机唯一的 salt 并将其附加到密码，然后对其进行哈希处理，最后将未哈希处理的 salt 和哈希后的密码/salt 组合一起存储在数据库中。如果他获得对数据库和我们散列密码的访问权限，这会增加黑客的搜索空间。

所以这似乎完全是对安全性的过度杀伤，但无论我在哪里看到盐总是附加在密码的前面或后面。因此，查看单个用户的密码，这个唯一的盐不会影响搜索空间吗？尽管由于每个用户都有一个独特的盐，每个用户的整体搜索空间都大大增加了。

创建一个将盐插入密码中可预测的半随机位置（例如用户名/ 2 的长度）的算法不是更安全吗？例如，这是我提出的保护功能的步骤：

```
Create a random salt
take username length %(mod) password length
insert the salt at the spot determined
hash 
```

示例运行：

```
random salt = 12345
len("imauserwithalongname") % len("mypass") = 2
valueToHash = my12345pass 
```

现在我们的破解者不知道在没有看到我们的 php/source 的情况下将盐放在哪里，这（如果我错了，请纠正我）比数据库更难获得访问权限。

我也知道安全性应该取决于密钥的安全性而不是算法的保密性，但是我认为基于它添加层没有错，只要整个系统不依赖于算法的保密性。

**编辑：**这样做会大大增加饼干的搜索空间吗？

如果我们将盐放在一个取决于密码长度的位置，那会不会破坏使用字典攻击的目的，即使是在每个用户的基础上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:07:00.633

将盐插入不同的位置不会增加搜索空间。如果您为每个用户使用随机盐，那么黑客无论如何都不知道每个用户的每个盐是什么。知道它在未散列字符串中的位置无关紧要。

使用`bcrypt`或`PBKDF2`。两种算法都强制执行盐和循环数。如果你有足够的耐心，PHP 5.5 会让你做`password_hash($password)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:24:34.663

> 因此，我正在尝试编写自己的函数来保护 php 中的密码。

哇哇，抱在那儿。

密码学家向我们这些凡人传授了一句谚语，多年来一直如此。谚语是这样的：

> 不要发明自己的加密货币。

大声说出来，然后再说一遍。

我知道你只是想保护你的密码，但我不得不把它弄出来。有很多很多经过尝试和测试的方法可以完成您想要实现的目标。

感谢您进行了一些研究，但互联网上充满了可怕的可怕信息，因此我将向您指出一些有用的文章。

*   查看[ircmaxell 的安全相关博客](http://blog.ircmaxell.com/search/label/Security)。

一个不错的短名单。

这里有一些关键字可以帮助您。

*   加密货币
*   ~~Scrypt~~ ^(（当 PHP 支持它时，请有人取消它）)

又是一个非常简短的清单。

解决您的具体问题。盐不需要保密，正如您所说，它们旨在阻止攻击者预先计算有效密码/哈希组合的表。但是，如果您使用弱散列算法，它们会很快失去价值。

通过默默无闻的安全性并不像看起来那么好。如果黑客获得了对您数据库的访问权，那么他们也很有可能获得对您的文件系统的访问权。如果他们可以访问您的来源，那么您存储密码的自定义方法将是一个有争议的问题。

总之，自定义算法 + 弱哈希 = 不安全。

相反，您想使用久经考验的密钥派生函数/密钥加强算法。

这些旨在使计算机非常努力地生成哈希，并使攻击者很难暴力破解密码。

Bcrypt 将盐存储在密码旁边，并且被证明是非常安全的。事实上，它足够安全，目前是安全专家推荐的散列密码的方法。

在 PHP 5.5 中，基于 Bcrypt 引入了一个简单的密码哈希 API，对于 5.5 以下的版本，有一个密码哈希兼容性库可以做同样的事情。

这对你来说应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:04:20.667

我*个人*认为你做得太过分了。对哈希进行加盐的最有效方法是在系统上的只读文件中存储一个动态的、特定于记录的和一个静态的。这是一种非常有效但安全的加盐哈希方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:16:45.473

我想你误解了盐的用途。盐不会增加攻击者的搜索空间，毕竟它是用哈希值存储的明文。盐的目的是，攻击者不能建立一个单一的彩虹表，然后检索所有存储的密码。

如果您将相同的盐附加到每个密码，那么攻击者不能简单地使用来自互联网的现有预先计算的彩虹表，他必须为这个盐构建一个新的彩虹表（现有的彩虹表将包含像“ horse”，但不是 horse8ze*w398dhek3+qmxno0 等密码。不幸的是，这个单一的彩虹表可以用来获取所有密码。

所以我们为每个密码使用一个唯一的盐。攻击者现在必须为每个密码构建一个单独的彩虹表，但是为什么他要继续构建该表，当他已经找到匹配项（？）时，他以后不能将该表重新用于其他密码。换句话说，蛮力比构建彩虹表要快，所以我们让彩虹表没用。

所以盐对于每个密码应该是**唯一**的，如果可能的话，它应该是**不可预测**的。确定性计算机很难满足这些标准，您能做的最好的事情就是使用操作系统的随机源来构建盐。BCrypt 和 PBKDF2 等密码的良好哈希算法会重复哈希以变慢，并在每次迭代中结合密码和原始盐。它不仅仅是密码+盐的串联。

您关于将盐放在某个秘密位置的想法确实增加了一个秘密（盐在哪里？），只要攻击者不知道您的代码，它就会起作用。获取数据库（SQL 注入）确实比获取代码更容易，但同样的目标可以用**胡椒**更容易地实现。

[我试图在一个教程](http://www.martinstoeckli.ch/hash/en/index.php)中总结这一点，也许你想看看它。

# ios - 纵向模式下的 iPad 视频

> ID：14516223
> 
> 赞同：0
> 
> 时间：2013-01-25T06:01:18.093
> 
> 标签：ios, objective-c, ipad, cocos2d-iphone, mpmovieplayercontroller

我做了一个`iPad video`in `portrait mode`ie `768*1024`。现在，当我将其转换为`mp4`格式时，转换器将其转换为`1024*768`ie `landscape mode`。有没有办法以纵向模式显示纵向视频或任何软件以 mp4 纵向模式转换纵向视频？

或者我必须在横向模式下再次制作视频？

我正在使用`MPMoviePlayerController`.

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:04:08.080

**MPMoviePlayerController** no longer works in **landscape** by default so to make it work in landscape you need to apply a transform to the view.

```
UIView * playerView = [moviePlayerController view];
[playerView setFrame: CGRectMake(0, 0, 480, 320)];//iPhone

CGAffineTransform landscapeTransform;
landscapeTransform = CGAffineTransformMakeRotation(90*M_PI/180.0f);
landscapeTransform = CGAffineTransformTranslate(landscapeTransform, 80, 80);

[playerView setTransform: landscapeTransform];
In addition, if you want the regular full screen controls, use the following sample.

moviePlayerController.fullscreen = TRUE;
moviePlayerController.controlStyle = MPMovieControlStyleFullscreen; 
```

This is for your information "[**playing a video with MPMoviePlayerController in Portrait WITHOUT Private API-Will get rejected by Apple**](https://stackoverflow.com/questions/3452540/playing-a-video-with-mpmovieplayercontroller-in-portrait-without-private-api-w)".Good luck and happy coding :-)

# php - 是否需要检查每个控制器页面中的登录功能

> ID：14516229
> 
> 赞同：3
> 
> 时间：2013-01-25T06:02:31.200
> 
> 标签：php, javascript, jquery, html

我在我的 PHP 页面中遵循了 MVC 模式。我为每个视图页面创建了一个控制器页面，它将与模型页面进行交互。我已经检查了每个视图页面顶部的用户登录。但我从未检查过控制器页面。因为任何人都可以直接进入控制器页面并可能更改数据库内容。

所以有人请告诉我，是否可以通过控制器页面进入数据库。以及我是否需要在控制器页面中检查用户的登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:08:32.150

如果我理解正确，您将在控制器页面的每个链接页面的顶部放置一个登录检查（假设您的 index.php）。

如果是这样，那么您不需要在每个链接页面的顶部进行登录检查，只需从 index.php 进行。如果您在 index.php 的顶部登录成功，那么您将继续包含您的目标视图页面。

例如（在您的 index.php 中）

```
<?php

if ( !$user->checkSession() )
    header('Location: login.php');

if ( $_GET['p'] == 'viewPageName' )
    include('modules/viewPageName.php' )
elseif and so on

?> 
```

**编辑**

现在我对你的问题有了更好的理解。

*解决方案 1*：
在您的**index.php**中（放在顶部）

```
<?php
define('DIRECT', true);

your login check, etc...
?> 
```

在您的**其他文件**中，放在顶部

```
<?php
if (!defined('DIRECT')) die('No direct access is allowed');

other code, etc...
?> 
```

*解决方案 2：*
将 .htaccess 文件放在所有其他文件所在的文件夹中，并拒绝直接访问这些文件。

在 .htaccess 中放入以下内容：

```
deny from all 
```

*Solution 3:*
Well, assuming you've defined the $db file at the index.php and have set the class up in your index.php, your other files will return errors because you didn't define your DB class in them.

In other words, if you defined $db = new Database(); in your index.php, your other files will get an error if you try to access directly because $db has yet to be defined in them.

# request - Mootools 请求跟随进度输出

> ID：14516231
> 
> 赞同：1
> 
> 时间：2013-01-25T06:02:35.303
> 
> 标签：request, mootools, progress

使用 Mootools 发出请求时，是否有任何方法可以跟踪“到目前为止”下载的输出？我知道有“onProgress”，但这只会给我下载的字节数。

正在下载的页面是一个电子邮件地址列表，对于已发送的每封电子邮件，该页面都会在页面上附加一行，直到执行完毕。

我想采用最新的线路，并将其呈现给用户，随着进展的进行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:47:08.133

mootools 只支持 webkit 和 gecko 支持的东西（现在可能是 IE9/10）。

```
onLoadstart(event, xhr)

onProgress(event, xhr) 
```

进度事件——如果有的话——应该足以让你继续前进。有关可用规范，请参阅[https://dvcs.w3.org/hg/progress/raw-file/tip/Overview.html](https://dvcs.w3.org/hg/progress/raw-file/tip/Overview.html)。

[http://jsfiddle.net/dimitar/tYdjN/](http://jsfiddle.net/dimitar/tYdjN/)

```
var list = [], 
    len = 10000, 
    loaded = $('loaded'),
    output = $('output'),
    count = 168,
    chunks = 0;

while(len--)
    list.push(Faker.Internet.email());

list = list.join('<br/>\n');

new Request({
    url: '/echo/html/',
    data: {
        html: list
    },
    onProgress: function (event, xhr) {
        chunks++;
        loaded.set('html', event.loaded + ' bytes');
        new Element('h4[html=Chunk ' + chunks +']').inject(output);

        new Element('div.chunk', {
            html: xhr.response,
            styles: {
                background: ['rgb(', count, ',', count,',', count, ')'].join('')
            }
        }).inject(output);
        count -= 16;
    },
    onComplete: function(){
        //console.log(this.response.text);
        // $('list').set('html', this.response.text);
    }
}).send(); 
```

这个例子使用了 jsfiddle 的 ajax api，我使用 Faker.js 生成 10000 封随机电子邮件 - jsfiddle 分块发回给我。每个块在 div 中输出自己的电子邮件。

# pinchzoom - 在android中对3D对象进行捏合/缩放效果

> ID：14516239
> 
> 赞同：3
> 
> 时间：2013-01-25T06:03:04.023
> 
> 标签：pinchzoom

我对android有点新。我想通过手指将捏合/缩放效果应用于 3D 对象。我在 ImageView 上提到了图像的捏合/缩放效果。我试图在 GLSurfaceView 上显示 3D 对象（如三角形、立方体）。可以显示对象，甚至可以旋转对象，但我无法应用捏合/缩放效果来缩放 3d 对象。

我列出了一些我浏览过的链接[http://www3.ntu.edu.sg/home/ehchua/programming/android/Android_3D.html](http://www3.ntu.edu.sg/home/ehchua/programming/android/Android_3D.html) http://insanitydesign.com/wp/projects/nehe-android -ports/ [http://x-tutorials.blogspot.sg/2011/11/implement-pinch-zoom-in-ontouchlistener.html](http://x-tutorials.blogspot.sg/2011/11/implement-pinch-zoom-in-ontouchlistener.html)

我在这里提供我的代码...

公共类 MyGLActivity 扩展 Activity {

```
 private GLSurfaceView glView;   // Use GLSurfaceView
    public static Context context;

   // Call back when the activity is started, to initialize the view
   @Override
   protected void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);

      glView = new MyGLSurfaceView(this);           // Allocate a GLSurfaceView

      setContentView(glView);                // This activity sets to GLSurfaceView
   }

   // Call back when the activity is going into the background
   @Override
   protected void onPause() {
      super.onPause();
      //glView.onPause();
   }

   // Call back after onPause()
   @Override
   protected void onResume() {
      super.onResume();
     // glView.onResume();
   }

 class MyGLSurfaceView extends GLSurfaceView
   {
       private final float TOUCH_SCALE_FACTOR = 180.0f / 320;
        private float mPreviousX;
        private float mPreviousY;

        // touch events
        private final int NONE = 0;
        private final int DRAG = 0;
        private final int ZOOM = 0;

        // pinch to zoom
        float oldDist = 100.0f;
        float newDist;

        int mode = 0;

        MyGLRenderer renderer;

        public MyGLSurfaceView(Context context) 
        {
            super(context);

            renderer=new MyGLRenderer();
            setRenderer(renderer);

            // Render the view only when there is a change in the drawing data
            setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
        }

    public boolean onTouchEvent(MotionEvent event)
    {
        //Log.e("tag", "Touched");
        //Toast.makeText(this.getContext(), "Touched",Toast.LENGTH_SHORT).show();

        float x = event.getX();
        float y = event.getY();
        switch (event.getAction())
        {
                case MotionEvent.ACTION_DOWN:           // one touch: drag
                    mode = DRAG;
                    break;
                case MotionEvent.ACTION_POINTER_DOWN:   // two touches: zoom
                    oldDist = spacing(event);
                    if (oldDist > 10.0f) {
                        mode = ZOOM; // zoom
                    }
                    break;
                case MotionEvent.ACTION_UP:     // no mode
                    mode = NONE;
                    oldDist = 100.0f;
                    break;
                case MotionEvent.ACTION_POINTER_UP:     // no mode
                    mode = NONE;
                    oldDist = 100.0f;
                    break;
                case MotionEvent.ACTION_MOVE:                       // rotation
                    if (event.getPointerCount() > 1 && mode == ZOOM) 
                    {
                        newDist = spacing(event);
                        //Log.d("SPACING: ", "OldDist: " + oldDist + ", NewDist: " + newDist);
                        if (newDist > 10.0f) 
                        {
                            float scale = newDist/oldDist; // scale
                            // scale in the renderer

                            Log.i("Zoom", "Zooming......");

                            oldDist = newDist;
                        }
                    }
                    else if (mode == DRAG)
                    {
                        float dx = x - mPreviousX;
                        float dy = y - mPreviousY;
                        renderer.mAngleX += dx * TOUCH_SCALE_FACTOR;
                        renderer.mAngleY += dy * TOUCH_SCALE_FACTOR;
                        requestRender();
                    }
                    break;
                }
                mPreviousX = x;
                mPreviousY = y;
                return true;
        }
   }

    private float spacing(MotionEvent event)
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return (float) Math.sqrt(x * x + y * y);
    } 
```

}

谁能给我一些演示示例来对 3d 立方体进行缩放效果？我被这个问题困住了，我的进一步工作停止了。任何帮助将不胜感激。提前致谢

# c# - 重定向“响应在此上下文中不可用”时出错

> ID：14516241
> 
> 赞同：13
> 
> 时间：2013-01-25T06:03:12.040
> 
> 标签：c#, asp.net, session

我正在使用以下代码将用户重定向到页面。

```
Session["USERDATA"] = user;
if (roleName.Equals("Zerker", StringComparison.CurrentCulture))
   Response.Redirect("~/Account/Dashboard.aspx"); 
```

但这会导致错误。

> *在这种情况下没有响应。*

我该怎么办？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-25T07:38:06.407

我认为您正在自己的班级中使用响应对象。该对象将在那里不可用。

尝试使用

```
HttpContext.Current.Response.Redirect("~/Account/Dashboard.aspx"); 
```

# android - 如何清除网格视图中的编辑框

> ID：14516243
> 
> 赞同：0
> 
> 时间：2013-01-25T06:03:14.590
> 
> 标签：android

我的活动中有 Gridview。我的 GridView 的数据适配器：

```
private class EfficientAdapter extends BaseAdapter {
        ...
        public View getView(int position, View convertView, ViewGroup parent) {
            final ViewHolder holder;
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.item3, null);
                holder = new ViewHolder();
                holder.Attitude_Value = (EditText) convertView.findViewById(R.id.editText1);
                holder.Attitude_Value.addTextChangedListener(new TextWatcher()
                    {
                        public void afterTextChanged(Editable edt) 
                        {attitude_values.set(holder.ref, edt.toString());}

            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3){}
            public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}});
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            holder.ref=position;
            holder.Attitude_Value.setText(attitude_values.get(position));
            return convertView;
        }
   ... 
```

如何在开始输入之前清除网格视图中的编辑框，当我关注它时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:30:11.710

您是否尝试过这样我不太确定更改您的 XML Edittext

```
android:hint="Something" 
```

试试这个链接[示例](https://stackoverflow.com/questions/4175398/clear-edittext-on-click)

```
et.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        et.setCompoundDrawables(null, null, et.getText().toString().equals("") ? null : x, null);
    }

    @Override
    public void afterTextChanged(Editable arg0) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:53:36.587

```
String value = "anyValue";

final EditText et = (EditText) findViewById(R.id.edtText);
et.setText(value);
et.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        if (event.getAction() != MotionEvent.ACTION_UP) {
            et.setText(et.getText().toString.trim());
            return false;
        }

        if (event.getAction() != MotionEvent.ACTION_DOWN) {
            value = et.getText().toString.trim();
            et.setText("");
            return true;
        }
        return false;
    }
});

et.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void afterTextChanged(Editable arg0) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }
}); 
```

# html - 电子邮件中的砌体式网格布局

> ID：14516249
> 
> 赞同：0
> 
> 时间：2013-01-25T06:04:02.093
> 
> 标签：html, css, email, jquery-masonry

这甚至可能吗？我的网站使用 Masonry 来布置盒子。为了设计的连续性，我很想在我的摘要电子邮件中使用类似的布局。

有没有人看到这个或知道它是否可能？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:09:24.373

无法在电子邮件模板中使用砌体。甚至不可能可靠地使用浮点数。为了获得最大的客户端兼容性，您仍然坚持使用表。当然，对于桌子，您无法进行适当的砌体布局。

话虽如此，您可以使用一个简单的 PHP 脚本将每个图像调整为定义的大小，然后将这些图像插入到一个表格中，以便在您的电子邮件中实现品牌一致性。

关于这些坏消息我很遗憾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-30T04:11:47.310

是的，可以在电子邮件中实现砌体布局。您可以参考 Mailerstock 的电子邮件模板： [https ://mailerstock.com/email-templates/loki-v1-2-responsive-masonry-grid-email-template/](https://mailerstock.com/email-templates/loki-v1-2-responsive-masonry-grid-email-template/)

注意：此模板还允许砌体布局响应所有设备宽度。

# sas - 当我将 SAS 数据集导出到 csv 时；它正在修剪字符中的所有前导空格

> ID：14516251
> 
> 赞同：3
> 
> 时间：2013-01-25T06:04:04.397
> 
> 标签：sas, sas-macro

当我将 SAS 数据集导出到 csv 时；它正在修剪字符中的所有前导空格。请帮助我保留 csv 输出中的所有前导空格。使用的语句是：

```
Proc Export Data = Globl_Mth_Sumry
OutFile = "&GMUPath.\20&RptYr._&RptMt.\03 Output\01 GMU\&Brnd_Abbr.\&Brnd._&Mkt._Globl_Mth_Sumry_&RptMt.&RptYr.&NeuronQTR..csv" 
DBMS = CSV Replace; 
Run; 
```

所以，有一列包含国家列表，就像

亚洲印度中国等但 csv 文件显示如下：- 亚洲印度中国。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:55:42.470

我发现这是一个有趣的问题，主要是因为我确信我知道答案……发现我不知道。

从技术上讲，这是一种解决方案，如果您处于时间紧缩状态，也许就足够了，尽管我怀疑它太笨拙而无法以实际方式使用。首先，我生成数据（使用 $CHAR8\. 输入以保留前导空格），然后使用固定列输出而不是列表输出来输出它。

```
data test;
input
@1 x $CHAR8.
@9 y $CHAR8.;
format x y $char8.;
datalines;
     USA   China
  Canada N Korea
  Russia  Mexico
;;;;
run;

 data _null_;
 file "c:\temp\test.csv" lrecl=80 dropover;
 set test;
 if _n_ = 1 then do;
 put "x,y";
 end;
 put @1 x $char8\. @9 "," @10 y $char8.;
 run; 
```

不幸的是，使用 DBMS=CSV 似乎不允许使用 $CHAR8。发挥你所期望的作用。我不知道为什么会这样。我期望的解决方案是这样写出来：

```
data _null_;
file 'c:\temp\test.csv' delimiter=',' DROPOVER lrecl=32767;
  if _n_ = 1 then        /* write column names or labels */
   do;
     put
        "x"
     ','
        "y"
     ;
   end;
 set  TEST;
 put x $ :char8\. y $ :char8.;
  run; 
```

这本质上是 PROC EXPORT 打印到日志的代码，然后是 :$CHAR8。在每个变量之后。无论出于何种原因，这（以及许多其他类似的事情）都不起作用。ODS CSV 似乎也不适用于保留前导空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:59:55.877

像乔一样，我很感兴趣。它似乎不会`PROC EXPORT`做你想做的事。但这里有一个 SAS 宏可以解决问题：

```
%macro mydlm(dsn, outf, dlm, headers);
/*****************************************************************
  MYDLM.SAS
     SAS Macro to create a delimited file from a SAS data set

  Positional Parameters
     DSN     = SAS Dataset Name
     OUTF    = Output Text File
     DLM     = Delimiter to use (CSV, TAB, PIPE, or constant)
     HEADERS = Y or N, Include line with variable names at top

  Example
     %mydlm( sashelp.class , 'c:\temp\tempfile.csv', csv, Y);
 ****************************************************************/

%if       %QUPCASE(&DLM)=CSV  %then %let DLM=%str(,);
%else %if %QUPCASE(&DLM)=TAB  %then %let DLM='09'x;
%else %if %QUPCASE(&DLM)=PIPE %then %let DLM=%str(|);

proc contents noprint data=&DSN
     out=_temp_(keep=name type length varnum label format formatd formatl);
run;
proc sort data=_temp_;
   by varnum;
run;
data _null_;
   set _temp_ end=eof;
   call symput(cats('zvnm',put(_n_,5.)), name);
   if format ne ' '
      then call symput(cats('zvft',put(_n_,5.))
                     , cats(format
                          , put(formatl,best.), '.'
                          , put(formatd,best.))
                       );
   else if type=2
      then call symput(cats('zvft',put(_n_,5.)),cats('$char',put(length,best.),'.'));
      else call symput(cats('zvft',put(_n_,5.)),' ');
   if eof then call symput('zvcnt',left(put(_n_,8.)));
run;
data _null_;
   file &outf;
   set &dsn;

%if %upcase(&headers) = Y %then %do;
   if _n_ = 1 then put

   %do i =1 %to %eval(&zvcnt.-1);
         "'%trim(&&zvnm&i)'" "&dlm"
   %end;
         "'%trim(&&zvnm&zvcnt)'" ;
%end;

   put
   %do i =1 %to %eval(&zvcnt.-1);
       &&zvnm&i &&zvft&i "&dlm"
   %end;
       &&zvnm&i &&zvft&i;
run;
%mend mydlm; 
```

该宏允许您选择 CSV、TAB 或 PIPE (|) 作为分隔符。字符变量将保留前导空格，所有变量的宽度将基于任何预定义的 SAS 变量格式。我用这个示例测试了宏：

```
data a;
   number2 = 2;
   format num comma7.;
   format date yymmdd10.;
   format char $char40.;
   date = today();
   num = 1; char = '          This has 10 leading blanks'; output;
   num = 2; char = 'This has no leading blanks'; output;
run;
%mydlm( a , 'c:\temp\tempfile.csv', csv, y); 
```

**更新：**为了表扬，上面的代码来源于我[在这个网页上](http://www.sconsig.com/sastips/tip00391.htm)找到的想法。我本来只是将您指向该链接，但它并没有真正做到您想要的。也真的很难读。

**UPDATE2**：修改了示例宏以更正语法错误并使其更通用。这个新版本允许您指定任何字符串作为列分隔符。我添加它是为了支持[另一个 Stack Overflow 问题](https://stackoverflow.com/q/14608322/1275871)，可以使用以下宏调用来回答：

```
%mydlm( Exp_TXT, '/fbrms01/dev/projects/tadis003/Export_txt_OF_New.txt', ~|~, Y); 
```

# php - 如何让亲子关系发挥作用？

> ID：14516252
> 
> 赞同：0
> 
> 时间：2013-01-25T06:04:14.397
> 
> 标签：php, mysql

我正在建立一个工程和建筑网站，其中列出了诸如桥梁、塔楼之类的产品列表，所有这些都是链接的。当用户单击桥时，它的类型会从同一页面上的 mysql 表中以图像的形式出现，但问题是我想再次检索该值，即它的子类型也是图像。然后当用户单击该图像时，将显示其详细信息。基本上它的层次结构高达 3-4 级。但不知道如何建立表之间的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:10:23.253

如果您的层次结构中的项目可以足够概括，您可以制作一个包含以下列的表：id、父级、信息

一个条目可以是 id=Bridge、Parent=Architecture、information=picture_source

然后，您可以进行查找，向我展示以 Architecture 作为其父项的每个条目并将列表发送给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:10:30.103

使用`InnoDB`mysql 引擎。`MyISAM`不支持外键（如果您使用默认值）。

您可以使用：

```
ALTER TABLE table_name ENGINE=InnoDB; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:42:34.173

![在此处输入图像描述](../Images/9fa4b06b7ef0e5181fcb9936e9dc855f.png)

使用这样的**父子关系**，
**例如：**

1.  单击桥时 - 从子 1 表中获取数据，该表具有与主表相同的 fk 键，因此您的所有桥类型都会出现
2.  对所有子项目执行相同操作

# java - android-是否可以直接从zip文件夹中播放swf文件而不解压缩它

> ID：14516255
> 
> 赞同：1
> 
> 时间：2013-01-25T06:04:30.130
> 
> 标签：java, android, zip

我正在尝试从受密码保护的 zip 文件夹中播放 swf 文件。我正在使用（zip4j_1.3.1 库）和以下代码将其提取到单独的位置，然后我正在使用 webview 播放它。

```
String source = "/sdcard/Test.zip";
        String destination = "/sdcard";
        String password = "dhinesh";

        try {
            ZipFile zipFile = new ZipFile(source);
            if (zipFile.isEncrypted()) {
                zipFile.setPassword(password);
            }
            zipFile.extractAll(destination);
                   mWebView.loadUrl("/sdcard/catmouse.swf");

        } catch (net.lingala.zip4j.exception.ZipException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

我尝试使用以下代码直接从 zip 文件夹本身播放文件，但它不工作。我这样做是因为它可以得到保护。

```
String source = "/sdcard/Test.zip";
        String password = "dhinesh"; 

        try {
             ZipFile zipFile = new ZipFile(source);
             if (zipFile.isEncrypted()) {
                zipFile.setPassword(password);
                mWebView.loadUrl("/sdcard/Test.zip!/catmouse.swf");
            } 
```

有没有办法从受密码保护的 zip 文件中播放 swf 文件而无需解压缩...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:09:33.813

这不是 zip 文件格式的工作方式。即使在台式计算机上，当您“直接打开”来自 zip 的文件时，它也会从临时文件夹中的存档中解压缩，然后打开。你肯定要先解压。

# javascript - 在选定的 tr 中选择特定的 tr 和特定的 td

> ID：14516256
> 
> 赞同：0
> 
> 时间：2013-01-25T06:04:43.297
> 
> 标签：javascript, jquery

我已经能够选择我想要的特定行，但我无法从这些 tr 中选择特定的 td。

我用它来选择行：

```
$('#time-slot tr:not(:first, :last)') 
```

然后在那些选定的行中，我试图忽略第一个和最后一个 td 但它不起作用。我使用了与上面类似的方法

```
$('#time-slot tr:not(:first, :last) td:not(:first, :last)') 
```

任何想法我应该如何解决这个问题。顺便说一句，我正在尝试单击并拖动鼠标以使用用户定义的颜色绘制单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:11:26.017

我更喜欢使用较少的字符串选择器和更多的 jQuery 方法，以及使用`:first-child`and`:last-child`选择器来解决您的问题：

```
$("#time-slot").find("tr").not(":first-child, :last-child").find("td").not(":first-child, :last-child").addClass("active"); 
```

[http://jsfiddle.net/7b4Ms/](http://jsfiddle.net/7b4Ms/)

根据您的期望，您没有很好地解释，这可能是也可能不是您想要的。这样做是选择所有`tr`不是第一个和最后一个的元素。在那些匹配的`tr`元素中，它选择所有`td`不是第一个和最后一个的元素。所以基本上，它不会选择`table`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:20:36.633

完全同意 Ian，只是我更喜欢使用 .children() 而不是 .find()。因为如果您有嵌套表，它可能会产生问题。

```
$("#time-slot").find("tr").not(":first-child, :last-child").find("td").not(":first-child, :last-child").addClass("active"); 
```

更改为：

```
$("#time-slot").children("tr").not(":first-child, :last-child").children("td").not(":first-child, :last-child").addClass("active"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:39:40.837

试试这个（仅使用 css 选择器）：

```
$("#time-slot tr:not(:first,:last) td:not(:first-child,:last-child)").addClass("active"); 
```

**[样本](http://jsfiddle.net/pw5M8/)**

# java - 打印 Java epoch 的毫秒数返回 18000000？

> ID：14516257
> 
> 赞同：3
> 
> 时间：2013-01-25T06:04:59.930
> 
> 标签：java, datetime, jodatime

在 Joda，如果我打印

```
DateTime(GregorianChronology.getInstance())
    .withYear(1970)
    .withMonthOfYear(1)
    .withDayOfMonth(1)
    .withHourOfDay(0)
    .withMinuteOfHour(0)
    .withSecondOfMinute(0)
    .withMillisOfSecond(0).getMillis(); 
```

我明白`18000000`了（这也恰好是 FWIW 的 1/4 `MILLIS_PER_DAY`）。

我不明白的是，如果毫秒代表定义为 Jan-1970-01-01 的纪元的偏移量，那么毫秒不应该是 0 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:53:12.290

时代是 Jan-1970-01-01 **`GMT`**。您拥有的实例显然具有不同的`DateTimeZone`. 事实上，看起来你在 GMT+5。（18000000 毫秒 = 5 小时）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:52:56.850

“时代”是一个特定且普遍 的**瞬间**，是宇宙时间中的一个点（例如，阿波罗 XI 号登陆月球的那一刻）。这个参考点在不同的国家可以用不同的方式表示（火星人也可以用他自己的日历来表示）。例如，对于英格兰 (GMT) 的人们来说，那是他们的时钟指针标记为“00:00:00”并且他们的（公历）日历标记为“1/1/1970”的时刻；但这只是一个例子。

线

```
DateTime(GregorianChronology.getInstance()).withYear(1970).withMonthOfYear(1)
    .withDayOfMonth(1).withHourOfDay(0).withMinuteOfHour(0)
    .withSecondOfMinute(0).withMillisOfSecond(0) 
```

*为您提供您所在*国家/地区的时钟和日历标记为“00:00:00 1970-01-01”的时刻。一般来说，那是一个不同的瞬间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:54:34.120

我认为这个问题与 Java 日期将时区作为计算的一部分的方式有关。

对我来说，这意味着我比 epoc 提前了 10 小时。

尝试创建一个设置为 0 GMT 的日期/时间值。

# mysql - NOT IN AND IN 条件 mysql

> ID：14516262
> 
> 赞同：0
> 
> 时间：2013-01-25T06:05:15.627
> 
> 标签：mysql

我有如下的 SQL 查询设计。

```
SELECT (THIS ITEMS) 
FROM (TABLES) 
WHERE(SOME CONDITION) AND NOT IN (CONDITION) AND IN (CONDITION) 
```

但未按要求获得正确的输出，因为“输入”条件无法正常工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:07:47.517

您需要一列进行比较。正确的语法是（注意`column_expression`）：

```
SELECT <select_list>
FROM <table_expression>
WHERE <column_expression> [NOT] IN (<comparison_list>) 
```

例如，

```
SELECT col1, col2
FROM tab
WHERE col3 IN ('yes', 'no')
AND col4 NOT IN ('no', 'maybe') 
```

* * *

请注意，您还可以使用单列结果集而不是静态比较列表，如下所示：

```
SELECT col1, col2
FROM tab
WHERE col3 IN (SELECT filterValues FROM table2) 
```

**但**在这种情况下使用`EXISTS`子句更为理想：

```
SELECT col1, col2
FROM tab
WHERE EXISTS (SELECT 1 FROM table2 WHERE filterValues = col3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:09:28.027

在某些情况下，您可能需要括号。

```
Example 1:
Select all persons who are active and have an invoice 
Person->Invoice (1 to Many)
SELECT * FROM person WHERE active=1 AND person_id IN (SELECT person_id FROM invoice)

Example 2:
Select all person who are active, do not have a cat, and have an invoice

SELECT * FROM person WHERE active=1 AND person_id NOT IN (SELECT person_id FROM people_with_cats) AND person_id IN  (SELECT person_id FROM invoice) 
```

# android - NDK编译多个库

> ID：14516268
> 
> 赞同：17
> 
> 时间：2013-01-25T06:05:30.533
> 
> 标签：android, android-ndk

我在我的 android 应用程序中使用本机代码。首先，我只使用一个库。所以一切正常。但现在我必须再将一个库集成到其中。我不知道我的项目的 jni 文件夹的理想结构应该是什么（如放置整个代码的位置等）。我找到了解决办法。我在 jni .ie library1 和 library2 中创建了两个文件夹。再次在两个文件夹中创建了一个 jni 文件夹，并将各自的代码放置在文件夹中。

我得到它来编译。正在生成两个 .so 文件，但我无法在我的应用程序中使用它。我无法使用 System.loadLibrary("library1.so"); 加载库 还尝试提供完整路径。但失败了

我也不知道在父 jni 文件夹的 Android.mk 文件中写什么。

当前结构：project_folder -> jni -> library1 -> jni -> "source code" an Android.mk 写在这里 project_folder -> jni -> library2 -> jni -> "source code" an Android.mk 写在这里

更新#1：

```
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
make: *** No rule to make target `jni/zap/jni/zap/zap/error.c', needed by `obj/local/armeabi/objs-debug/zap/jni/zap/zap/error.o'.  Stop. 
```

我没有使用 Application.mk。这是我的 Android.mk：

```
TOP_PATH := $(call my-dir)

# Build library 1
include $(CLEAR_VARS)
LOCAL_PATH := $(TOP_PATH)/zap
LOCAL_MODULE := zap
LOCAL_C_INCLUDES := $(LOCAL_PATH)/zap
LOCAL_SRC_FILES := $(LOCAL_PATH)/zap/error.c \
$(LOCAL_PATH)/zap/hello-jni.c \
$(LOCAL_PATH)/zap/zap.c \
$(LOCAL_PATH)/zap/zapd.c \
$(LOCAL_PATH)/zap/zaplib.c 
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T06:26:03.887

我发现的最佳结构是仅将 jni/ 文件夹用于 ndk-build makefile，并将源代码保存在它们自己的文件夹中。这很容易添加到现有项目中，而无需在 jni 下重构您的树。

但是，您必须小心处理 LOCAL_PATH 变量和 $(call my-dir) 的使用。这是一个工作示例：

*   我的项目/
    *   图书馆1/
        *   源1.cpp
    *   图书馆2/
        *   源代码2.cpp
    *   杰尼/
        *   安卓.mk
        *   应用程序.mk

安卓.mk：

```
# TOP_PATH refers to the project root dir (MyProject)
TOP_PATH := $(call my-dir)/..

# Build library 1
include $(CLEAR_VARS)
LOCAL_PATH := $(TOP_PATH)/library1
LOCAL_MODULE := library1
LOCAL_C_INCLUDES := $(LOCAL_PATH)
LOCAL_SRC_FILES := source1.cpp
include $(BUILD_SHARED_LIBRARY)

# Build library 2
include $(CLEAR_VARS)
LOCAL_PATH := $(TOP_PATH)/library2
LOCAL_MODULE := library2
LOCAL_C_INCLUDES := $(LOCAL_PATH)
LOCAL_SRC_FILES := source2.cpp
include $(BUILD_SHARED_LIBRARY) 
```

您可以选择将 Android.mk 中的部分拆分为它们自己的 makefile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T10:42:11.243

我发现从命令行编译时，我可以通过运行`android update project`两次来包含多个库，每个库一次：

```
android update project -l ../SDK/library1/ --path . --name $name --target 23  --subprojects
android update project -l ../SDK/library2/ --path . --name $name --target 23  --subprojects
ant release 
```

# asp.net - 设置asp.net验证器的顺序

> ID：14516269
> 
> 赞同：8
> 
> 时间：2013-01-25T06:05:37.040
> 
> 标签：asp.net, validation

我正在使用 3 个验证器来验证 TextBox，但是当在 Textbox 中输入无效值时都会触发所有验证器。但是我希望这些验证器以特定的顺序工作，以便用户可以一一解决这些故障。

```
<asp:TextBox ID="txt_temp" runat="server"></asp:TextBox>                                                  

<asp:CompareValidator ID="cv_txt_temp" runat="server" CssClass="error" ControlToValidate="txt_temp" ValueToCompare="0" Type="Double" Operator="GreaterThanEqual" ValidationGroup="insert" SetFocusOnError="true" ErrorMessage="Must be valid value" Display="Dynamic"></asp:CompareValidator>

<asp:RegularExpressionValidator ID="rev_txt_temp" CssClass="error" SetFocusOnError="true"
 runat="server" ErrorMessage="Value upto 1 decimal place" Display="Dynamic" ControlToValidate="txt_temp" ValidationExpression="\d+(?:(?:\.|,)\d{0,1})?" ValidationGroup="insert"></asp:RegularExpressionValidator>

<asp:RangeValidator ID="rv_txt_temp" Display="Dynamic" runat="server" SetFocusOnError="true" ValidationGroup="insert" ControlToValidate="txt_temp" Type="Double" CssClass="error"></asp:RangeValidator> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T06:16:20.410

您添加的验证器会按照它们的创建顺序自动添加到**Page.Validators 集合中。****验证按照它们在 Page.Validators 集合中出现的顺序运行，**这意味着**在 aspx 文件中显示的第一个验证器定义首先在 Page.Validators 中。**如果您想更改顺序，那么唯一的方法是**让所有验证器按照您希望它们触发的顺序进入页面**。

**编辑：**在您的情况下，唯一的方法是**使用 css 来重叠验证器**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T12:17:14.213

您可以创建自定义验证。这需要时间，但您可以控制验证的顺序。您还可以使用蒙版文本框扩展器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T12:16:31.723

您可以使用自定义验证器、自定义 Java 脚本或掩码编辑验证器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T19:54:55.043

我的“设置验证顺序”的解决方案是：在有验证器的页面上：1）我在 aspx 代码中将 AutoEventWireup 设置为 false 并使用自定义验证器 2）我创建和调用验证函数并为相关验证器设置“IsValid”：

```
 validCustom1.IsValid = Validation1(textbox1.Text);
 if (Page.IsValid)
     validCustom2.IsValid = Validation2(textbox2.Text);
 if (Page.IsValid)
     validCustom3.IsValid = Validation3(textbox3.Text);
 if (Page.IsValid)
 { 
     //Do somethink
 }
 else
 {
     //Do somethink else
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-07T05:59:39.333

您可以尝试仅使用 RegularExpressionValidator

```
<asp:RegularExpressionValidator ID="rev_txt_temp" CssClass="error" SetFocusOnError="true"   
 runat="server" ErrorMessage="Error.." Display="Dynamic" ControlToValidate="txt_temp"    
     ValidationExpression="^[1-9]\d*(\.\d{0,1})?$" ValidationGroup="insert"> 
</asp:RegularExpressionValidator> 
```

让我知道，如果你想以其他方式..

# google-bigquery - 在子选择中重写分组

> ID：14516271
> 
> 赞同：0
> 
> 时间：2013-01-25T06:05:45.627
> 
> 标签：google-bigquery

我有 2 个查询，当在内部选择查询中移动 where 子句时，这两个查询都显示不同的结果。

```
select destination_number, count(*) as cnt from (
select caller_id_number as caller_id_number, destination_number as destination_number 
from Final1  where start_stamp > '2013-01-01 00:00:00' and start_stamp < '2013-01-26 00:00:00' 
group by caller_id_number, destination_number) 
where destination_number = '1234' 
group by  destination_number 
```

计数结果：294636

```
select destination_number, count(*) as cnt from (
select caller_id_number as caller_id_number, destination_number as destination_number 
from Final1  where destination_number = '1234' and start_stamp > '2013-01-01 00:00:00' and start_stamp < '2013-01-26 00:00:00' 
group by caller_id_number, destination_number) 
group by  destination_number 
```

计数结果：310627

我想知道为什么计数会改变以及哪个查询是正确的。

# java - OpenOffice - java - 在 RTF 文件中添加标题。

> ID：14516274
> 
> 赞同：1
> 
> 时间：2013-01-25T06:06:00.203
> 
> 标签：java, openoffice-writer

我有一个基于 java 的桌面应用程序。它需要读取和修改一堆 RTF 文件。为此，我们正在使用 OpenOffice。

我们正在成功读取 RTF 文件并对其进行一些修改。但是，我们无法向 RTF 文件添加“页眉”（默认 MS Word 功能的页眉/页脚）。

有没有人使用 OpenOffice 做到这一点。如果是这样，您能否分享代码/指导我获取一些信息。

万分感谢。

# tomcat - 如何将集合添加到 solr 核心？

> ID：14516279
> 
> 赞同：3
> 
> 时间：2013-01-25T06:06:46.013
> 
> 标签：tomcat, solr, tomcat7

我想在 solr core 中再添加一个集合。我需要博客来获取示例和建议。

我为此使用 Tomcat 7 和 Ubuntu。

虽然 wiki 中提到了如何安装 Solr 和创建内核，但没有完整的视图关于如何在同一个内核下创建集合。

在这种情况下如何添加 Solr 集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:54:08.007

Core 和 Collection 基本上是相同的，您可以在其中保存与不同不相关实体有关的信息。

您将有不同的核心/集合，例如文档、人员、新闻等...
您始终可以在同一个核心/集合中包含信息，例如文档和人员等。
这实际上取决于您如何索引数据以及要求是什么.

您需要检查 Solr Multicore 功能，它允许您设置多个核心/集合

[您可以找到多个关于多核设置](http://lucidworks.lucidimagination.com/display/solr/Configuring+solr.xml#Configuringsolr.xml-UsingMultipleSolrCores)的博客

您也可以从 LucidWorks[下载这本书以获取更多详细信息](http://lucidworks.lucidimagination.com/display/home/PDF+Versions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T16:41:07.210

如果您的一个集合存在于 example/solr 目录中，那么您可以在同一个 example/solr 目录中创建另一个集合。请注意，它不是严格意义上的多核，因为所有集合都存在于同一个内核中，因此所有集合将共享同一个 solr.war 文件。集合目录将有自己的子目录：- conf 和 data。此外，每个集合都应该有自己的 schema.xml 和 solrconfig.xml

例如，假设您在 example/solr 目录中有两个集合：- collection1 和 collection2。然后您可以通过以下方式致电他们：-

```
http://localhost:8983/solr/collection1/select?parameters

http://localhost:8983/solr/collection2/select?parameters 
```

创建所有集合后，您必须修改 example/solr 目录中的 solr.xml 文件。查看 cores name xml 标签中的 core child 标签并在那里添加新的集合。

```
<core name="collection1" instanceDir="collection1" />
<core name="collection2" instanceDir="collection2" /> 
```

instanceDirs 是您的核心所在目录的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-11T11:10:54.640

这很简单，只需复制/粘贴现有​​集合，然后重命名此副本，例如*collection2*。也不要忘记编辑**core.properties**文件，将新集合的名称放在那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-10T00:42:39.877

最好的方法是从控制台创建它：

```
solr create -с collection2 
```

在 linux 中，你应该从*solr*用户运行它

```
sudo su - solr -c "/opt/solr/bin/solr create -c collection2" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T12:54:54.777

正如 Max 提到的，此 URL 的顶部将为您提供帮助

[http://wiki.apache.org/solr/Solr.xml](http://wiki.apache.org/solr/Solr.xml)

此外，我只简要阅读了 ApacheSolrRefGuide-v4.1.pdf [http://docs.lucidworks.com/display/home/PDF+Versions](http://docs.lucidworks.com/display/home/PDF+Versions)但它帮助我理解了如何在服务器上设置 Solr 以及如何设置添加多个内核，请参见第 pg。398

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-29T20:13:36.067

在 Solr 4.x 中，只需[`solr.xml`](https://wiki.apache.org/solr/Solr.xml%20%28supported%20through%204.x%29)在您的 下创建`solr.home`，例如：

```
<solr persistent="true" sharedLib="lib">
 <cores adminPath="/admin/cores">
  <core name="core0" instanceDir="core0" />
  <core name="core1" instanceDir="core1" />
 </cores>
</solr> 
```

[`core.properties`](https://cwiki.apache.org/confluence/display/solr/Defining+core.properties)在 Solr 5.x 中，当您在目录下的任何位置创建文件`solr.home`并在其中添加`name=my_core_name`属性时，应该会自动发现内核。

# visual-c++ - 在单个变量中初始化和计算的坏习惯？视觉 C++

> ID：14516290
> 
> 赞同：0
> 
> 时间：2013-01-25T06:07:54.870
> 
> 标签：visual-c++, variables, initialization, arithmetic-expressions

在变量中初始化和做算术是不好的做法吗？即说我有多个不同面积尺寸的房间，我必须找到以下区域：

（以英尺为例）

```
double room_area1 = 9.5 * 6.8;
double room_area2 = 9.1 * 6.2;
double room_area3 = 10.0 * 7.1; 
```

还是最好这样做：

```
double room_area1 = 9.5;
room_area1 = room_area1 * 6.8; 
```

这两种方式之间是否有任何差异，或者是同一件事，只是风格问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:09:38.980

第一个只涉及一个操作：**初始化**，
而第二个涉及两个操作：**初始化+赋值**。

对于像开销这样的内在数据类型`double`，可以忽略不计，但对于用户定义的数据类型，第二个对性能有害（*多少？分析应该说明这一点*）。

所以一般来说使用 First 是更好的做法，因为：

*   如果不比 Second 快，它保证至少与 Second 一样快
*   它更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:09:39.693

第一种方法更好。原因：它更具可读性。

虽然这些构造在语义上是不同的是正确的，但**对于简单类型**，编译器几乎肯定会将第二种情况优化为与第一种情况一样，并生成相同的机器代码，将一个常量（在编译时计算）存储到`room_area1`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:11:18.920

第一个例子没有错。事实上，这样更好，因为您可以声明变量 const。

# azure-diagnostics - 尝试获取 Autoscaler 类型的实例时发生激活错误，键“”

> ID：14516291
> 
> 赞同：0
> 
> 时间：2013-01-25T06:07:54.860
> 
> 标签：azure-diagnostics

**异常：** 尝试获取 Autoscaler 类型的实例时发生激活错误，键“”

**堆栈跟踪：** 在 D:\Windows Azure Cloud\Samples\Windows Azure HelloWorld Sample\C#\HelloWorld_WebRole\WebRole.cs: 中的 IUSCRM.WebRole.OnStart() 处：Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeRoleInternal(RoleType roleTypeEnum) 的第 43 行在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeRole(RoleType roleType) 在 Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.b__0()

**内部异常：** 依赖项解析失败，类型 =“Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Autoscaler”，名称 =“（无）”。异常发生时：解决时。

## 异常是： InvalidOperationException - 无法构造类型 String。您必须配置容器以提供此值。

在异常发生时，容器是：

解析 Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Autoscaler，（无）解析构造函数 Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Autoscaler 的参数“dataPointsStoreStorageAccountConnectionString”（System.String dataPointsStoreStorageAccountConnectionString，System.String dataPointsTableName，System.TimeSpan ruleEvaluationRate， Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Rules.IRulesStore rulesStore、Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.ServiceModel.IServiceInformationStore serviceInformationStore、Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.DataPointsCollection.IDataPointsCollectorsProvider dataPointsCollectorsProvider、Microsoft.Practices.EnterpriseLibrary .WindowsAzure.Autoscaling.IExecutionLease executionLease, Microsoft。Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Logging.ILogger 记录器，Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Scaling.IServiceManagementRequestTracker 跟踪器，Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Scaling.IScaler 缩放器）解析 System.String，（无)

**来源：** Microsoft.Practices.Unity

**堆栈跟踪：** 在 Microsoft.Practices.Unity.UnityContainer.Resolve(Type t, String name, ResolverOverride[] resolverOverrides) 的 Microsoft.Practices.Unity.UnityContainer.DoBuildUp(Type t, Object existing, String name, IEnumerable `1 resolverOverrides) at Microsoft.Practices.Unity.UnityContainer.DoBuildUp(Type t, String name, IEnumerable`1 resolverOverrides) Microsoft.Practices.Unity.UnityServiceLocator.DoGetInstance(Type serviceType, String key) 在 Microsoft.Practices.ServiceLocation.ServiceLocatorImplBase.GetInstance(Type serviceType, String key) 在 c:\Home\Chris\Projects\CommonServiceLocator\main\Microsoft.Practices .ServiceLocation\ServiceLocatorImplBase.cs：第 49 行

**内部异常：** 无法构造类型 String。您必须配置容器以提供此值。

**来源：** Microsoft.Practices.Unity

**堆栈跟踪：** 在 Microsoft.Practices.ObjectBuilder2.DynamicMethodConstructorStrategy.GuardTypeIsNonPrimitive(IBuilderContext context, SelectedConstructor selectedConstructor) 在 Microsoft.Practices.ObjectBuilder2.DynamicMethodConstructorStrategy.PreBuildUp(IBuilderContext context) 在 Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(IBuilderContext context) 在 Microsoft.Practices。 ObjectBuilder2.DynamicMethodBuildPlanCreatorPolicy.CreatePlan(IBuilderContext context, NamedTypeBuildKey buildKey) 在 Microsoft.Practices.ObjectBuilder2.BuildPlanStrategy.PreBuildUp(IBuilderContext context) 在 Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(IBuilderContext context) 在 Microsoft.Practices.ObjectBuilder2.BuilderContext.NewBuildUp (NamedTypeBuildKey newBuildKey) 在 Microsoft.Practices.Unity.ObjectBuilder。NamedTypeDependencyResolverPolicy.Resolve(IBuilderContext context) at BuildUp_Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling.Autoscaler(IBuilderContext ) at Microsoft.Practices.ObjectBuilder2.DynamicMethodBuildPlan.BuildUp(IBuilderContext context) at Microsoft.Practices.ObjectBuilder2.BuildPlanStrategy.PreBuildUp(IBuilderContext context)在 Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp（IBuilderContext 上下文）在 Microsoft.Practices.Unity.UnityContainer.DoBuildUp（类型 t，现有对象，字符串名称，IEnumerable`1 resolverOverrides）Practices.ObjectBuilder2.BuildPlanStrategy.PreBuildUp(IBuilderContext context) 在 Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(IBuilderContext context) 在 Microsoft.Practices.Unity.UnityContainer.DoBuildUp(Type t, Object existing, String name, IEnumerable`1 resolverOverrides)Practices.ObjectBuilder2.BuildPlanStrategy.PreBuildUp(IBuilderContext context) 在 Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(IBuilderContext context) 在 Microsoft.Practices.Unity.UnityContainer.DoBuildUp(Type t, Object existing, String name, IEnumerable`1 resolverOverrides)

在过去的两天里，我遇到了这个例外，所以请有人帮忙......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:36:16.847

最后我找到了上述问题的解决方案，如下所示，

在没有 app.config 与 Web 角色中的 RoleEntryPoint 实现一起使用的情况下，许多人采用的一种众所周知的解决方法是在他们的项目中包含一个 WaIISHost.exe.config 文件。这种方法的背景和内部细节可以在这里找到。如果您正在使用这种方法，并且已经迁移到最新版本的 Windows Azure SDK 1.8 版，您可能已经注意到它不再像以前的版本那样工作了。

我们最近有一些客户使用这种方法，现在迁移到 Windows Azure SDK 1.8，却发现他们在 WaIISHost.exe.config 中的应用程序设置不再可用于在 RoleEntryPoint 实现中运行的代码。不，进程名称没有改变，稍后我会找时间详细了解我们发现已更改的更多细节。现在，我只想提供另一种适用于 SDK 1.8 的解决方法，供那些可能遇到此问题的人使用。在某些情况下，例如某些第 3 方依赖项会阻止我们将所有配置设置移动到 .cscfg 甚至代码中，并且某些设置确实不需要存在。

解决方法。其实很简单。

基本上，我们将 WaIISHost.exe.config 重命名为包含 Web 项目中 RoleEntryPoint 实现的输出程序集的名称，当然还添加了 .config 扩展名。因此，对于名为“MyApp.Web”的 Web 应用程序项目和“MyApp.Web”的程序集名称，我们将 WaIISHost.exe.config 重命名为 MyApp.Web.dll.config。如果您要将此文件添加到新项目，请不要忘记将“复制到输出目录”属性设置为“始终复制”。

以下链接是此解决方案的来源，

[http://www.fullscale180.com/post/2012/11/08/WaIISHostexeconfig-in-Web-Roles-does-not-work-in-Windows-Azure-SDK-18.aspx](http://www.fullscale180.com/post/2012/11/08/WaIISHostexeconfig-in-Web-Roles-does-not-work-in-Windows-Azure-SDK-18.aspx)

# actionscript-3 - 如何在 adobe air for android 中实现 stagevideo？

> ID：14516296
> 
> 赞同：1
> 
> 时间：2013-01-25T06:08:20.877
> 
> 标签：actionscript-3, apache-flex, air

我一直在为 Adob​​e AIR 中的客户开发基于桌面的应用程序，它使用 mx:videoDisplay 播放视频和播放列表中的图像。现在，他还需要在 AIR for Android 中使用相同代码库的相同应用程序。

我能够制作该应用程序的 APK。但他希望 StageVideo 播放视频。我搜索并找到了这篇（http://www.adobe.com/devnet/flashplayer/articles/stage_video.html）文章和示例代码，但在我的情况下我找不到它可以播放。谁能帮我吗？我没时间了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:19:09.360

根据我的测试，`StageVideo`仅适用于 Android 4.0+。它在 2.3 中肯定不起作用，我无法让它在 3.0 上运行，尽管这可能只是由于我们可用于测试的平板电脑乏善可陈。

您还必须使用 GPU 或直接渲染模式。在这里使用 CPU 或 Auto（当前默认为 CPU）将不起作用。这也会导致一些问题，因为并非所有 Android 设备都支持 GPU 或直接渲染，而 GPU 渲染有其自身的怪癖（例如不允许半透明像素）。

还有一点值得注意：StageVideo 不在显示列表中。它直接在舞台上渲染，舞台*下方*。因此，如果您尝试将其放置在您的应用程序中，舞台上的其他所有内容都会覆盖它。为了解决这个问题，我创建了一个自定义类，它不断地画出一个蒙版，然后将其应用于我的顶级容器。这个面具有效地在我的应用程序上打了一个洞，以便可以看到视频播放器。

StageVideo 无可否认的流畅性和出色的表演者，但最终实施起来确实很痛苦。除非您的客户绝对要求您使用它，否则我建议坚持使用 VideoDisplay 或基于 OSMF 包制作自己的视频播放器。

# android - 如何在不使用任何命令的情况下在 Sqlite 中查看我创建的表结构

> ID：14516300
> 
> 赞同：-2
> 
> 时间：2013-01-25T06:08:35.297
> 
> 标签：android, sqlite, android-sqlite

如何在不使用任何命令的情况下在 sqlite 中查看 Table 的结构。 [http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html) - 这将帮助我们使用 android 中的命令查找表的结构。但我听说有一个插件可以帮助我们获取表的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:37:29.410

如果您使用的是 eclipse Indigo 和 Up 版本，那么您可以执行以下操作。

1.  [从这里](http://www.questoid.com/Download.aspx)下载 SQlite 的 eclipse 插件

2.  解压缩`sqlitexmlbrowser_1.2.0.zip`文件并获取`net.cellobject.sqlitexmlbrowser_1.2.0.jar`该文件并将其放入您的`eclipse\plugins`文件夹中。

3.  重启你的日食

4.  在 Eclipse 中转到`Windows->Show View->Other`这个新安装的插件会在那里。（在 EclipseJuno 中，它会自动将这些东西附加到当前透视图）

5.  如何使用这个插件打开你的 sqlite 文件看这个[视频](http://www.questoid.com/Tools/CellObjectSQLiteXMLBrowser.aspx)

6.  您可以使用此插件查看结构和数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:31:29.840

如果您使用 Eclipse，您可以下载此插件，只需复制粘贴 .jar 文件即可：) 只需按照说明通过此[链接](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/)并在 Eclipse 模拟器中查看数据库。

通常数据库存储在 Android 设备的 //data/data//databases/ 文件夹中。

# vim - 嵌套屏幕会话中的 Vim 中没有鼠标

> ID：14516301
> 
> 赞同：3
> 
> 时间：2013-01-25T06:08:37.587
> 
> 标签：vim, gnu-screen

由于许多原因，我经常使用嵌套的[GNU Screen](http://www.gnu.org/software/screen/)会话。但是在嵌套屏幕实例中运行的 Vim 似乎没有捕捉到任何鼠标信息。我试过`:set mouse=a`and `:set ttymouse=xterm2`，通常让 Vim 识别鼠标的技巧，但无济于事。任何指针？还是……光标？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:22:17.103

不支持鼠标`screen`。您可以尝试`tmux`使用这些conf：

```
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on 
```

# git - github说commit缺少作者信息，为什么

> ID：14516304
> 
> 赞同：3
> 
> 时间：2013-01-25T06:08:59.700
> 
> 标签：git, github

我承诺使用 msysgit，并看到了这个奇怪的消息。但是我实际上已经设置了用户名和电子邮件，为什么？

```
$ git last
commit 770a3f0744437a7a070f536e5a798c8d8b4e40ab
Author: Xi Hui Liang <xihuiliang@example.com>
Date:   Fri Jan 25 12:51:36 2013 +0800

    undo fix form data filter. 
```

镜头

![项目主页](../Images/c60a8ca9269f7c1c7da3f92daba44bad.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T06:21:36.260

对我来说似乎是一个 GitHub 错误 - 例如，如果您转到专门用于提交的页面，GitHub 似乎可以很好地加载作者信息：

[https://github.com/xihuiliang/thinkphp/commit/770a3f0744437a7a070f536e5a798c8d8b4e40ab](https://github.com/xihuiliang/thinkphp/commit/770a3f0744437a7a070f536e5a798c8d8b4e40ab)

我建议[让他们知道](https://help.github.com/contact)，这样他们就可以修复主页显示上的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:13:46.097

您的 github 帐户与您使用的电子邮件无关。Github 使用指定的电子邮件链接到您的帐户。

转到[https://github.com/settings/emails](https://github.com/settings/emails)并添加您的 kokozu.net 地址。然后 Github 会将您的提交正确链接到您的 github 帐户。

# java - 在 servlet 中应该在哪里初始化 logger(log4j)？

> ID：14516305
> 
> 赞同：0
> 
> 时间：2013-01-25T06:09:10.570
> 
> 标签：java, log4j, jersey

我正在 servlet 的构造函数中初始化记录器。这是一个好习惯吗？我应该在 servletContextListener 中初始化它吗？

示例代码：

```
public class MyService{
Logger logger;

 public MyService(){
   logger = Logger.getLogger(MyService.class);
 }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:20:06.597

> 通过将记录器声明为静态，将记录器用作类级别成员
> 
> [正确初始化](http://www.avajava.com/tutorials/lessons/how-do-i-initialize-log4j-in-a-web-application.html)
> 
> [小方法](http://arctecgroup.net/pdf/howtoapplogging.pdf)

```
private static final Logger logger = Logger.getLogger(*<yourclass>*.class) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:02:13.573

我认为您正在谈论初始化 log4j 日志记录系统，而不是特定的记录器。

使用 servletContextListener 优于 servlet 的构造函数。

# android - android活动中的滚动视图

> ID：14516306
> 
> 赞同：0
> 
> 时间：2013-01-25T06:09:18.897
> 
> 标签：android, android-layout, scrollview, android-scrollview

我做了一个简单的活动，因为我使用了 scrollView 但它不工作并显示错误，所以我删除了 scrollView ..我需要的朋友是所有菜单都应该包含在 scrollView 中。请任何人都可以建议我应该放在哪里我活动中的“scrollView”标签。

我的活动如下： ![在此处输入图像描述](../Images/dcb6b576659c9fe7c974bdd1c9faf525.png)

**主菜单.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:orientation="vertical">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/kevingreen" android:background="#000" android:layout_weight="1"/>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.3"
        android:background="#fffff3"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="fill_parent"
            android:layout_height="190dp" >

            <LinearLayout
                android:id="@+id/linearLayout6"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/imageButtonVideos"
                    android:layout_width="fill_parent"
                    android:layout_height="115dp"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="20dp"
                    android:background="#0000"
                    android:scaleType="centerCrop"
                    android:src="@drawable/balcony_pic" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:text="Videos"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout7"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/ImageButtonTraining2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="20dp"
                    android:background="#0000"
                    android:scaleType="centerCrop"
                    android:src="@drawable/crowd_pic" />

                <TextView
                    android:id="@+id/TextView02"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="0.6"
                    android:gravity="center"
                    android:text="Training"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout8"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/ImageButtonCalculator"
                    android:layout_width="fill_parent"
                    android:layout_height="94dp"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="20dp"
                    android:background="#0000"
                    android:scaleType="fitCenter"
                    android:src="@drawable/calculator" />

                <TextView
                    android:id="@+id/TextView01"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="0.6"
                    android:gravity="center"
                    android:text="Property Calculator"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />
            </LinearLayout>

        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout5"
            android:layout_width="fill_parent"
            android:layout_height="148dp"
            android:layout_marginBottom="10dp" >

            <LinearLayout
                android:id="@+id/LinearLayout01"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/ImageButtonShop"
                    android:layout_width="fill_parent"
                    android:layout_height="77dp"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="15dp"
                    android:background="#0000"
                    android:scaleType="centerCrop"
                    android:src="@drawable/compra" />

                <TextView
                    android:id="@+id/TextView03"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:text="Shop"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/LinearLayout02"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/ImageButtonAboutKevin"
                    android:layout_width="fill_parent"
                    android:layout_height="82dp"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="15dp"
                    android:background="#0000"
                    android:scaleType="centerCrop"
                    android:src="@drawable/about_me_pic" />

                <TextView
                    android:id="@+id/TextView04"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:text="About Kevin"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/LinearLayout03"
                android:layout_width="84dp"
                android:layout_height="match_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/ImageButtonLinks"
                    android:layout_width="fill_parent"
                    android:layout_height="88dp"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="15dp"
                    android:background="#0000"
                    android:scaleType="fitCenter"
                    android:src="@drawable/coaching_pic" />

                <TextView
                    android:id="@+id/TextView05"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.88"
                    android:gravity="center"
                    android:text="Social"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />

            </LinearLayout>

        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayoutthird"
            android:layout_width="match_parent"
            android:layout_height="102dp"
            android:layout_marginBottom="10dp" >

            <LinearLayout
                android:id="@+id/LinearLayoutsubthird"
                android:layout_width="298dp"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="0.83"
                android:orientation="vertical" >

                <ImageButton
                    android:id="@+id/ImageButtonBlog"
                    android:layout_width="130dp"
                    android:layout_height="102dp"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="10dp"
                    android:background="#0000"
                    android:scaleType="centerCrop"
                    android:src="@drawable/blogger" />

                <TextView
                    android:id="@+id/TextViewblogger"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:text="Blogger"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/LinearLayoutabout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_marginBottom="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:orientation="vertical" >
                <LinearLayout android:layout_width="fill_parent" android:id="@+id/LinearLayoutabout" android:layout_height="fill_parent" android:layout_marginBottom="10dp" android:layout_marginTop="10dp" android:layout_weight="1" android:orientation="vertical">
                    <ImageButton android:id="@+id/ImageButtonContactUs" android:layout_width="130dp" android:layout_height="102dp" android:layout_marginBottom="10dp" android:layout_marginLeft="10dp" android:layout_marginRight="10dp" android:layout_marginTop="40dp" android:background="#0000" android:scaleType="centerCrop" android:src="@drawable/contact_us_478x318"/>
                    <TextView android:id="@+id/TextViewcontactus" android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_weight="1" android:gravity="center" android:text="Contact Us" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textStyle="bold"/>
                </LinearLayout>

                <ImageButton
                    android:id="@+id/ImageButtonContactUs"
                    android:layout_width="130dp"
                    android:layout_height="182dp"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_marginTop="40dp"
                    android:background="#0000"
                    android:scaleType="centerCrop"
                    android:src="@drawable/contact_us_478x318" />

                <TextView
                    android:id="@+id/TextViewcontactus"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:gravity="center"
                    android:text="Contact Us"
                    android:textAppearance="?android:attr/textAppearanceMediumInverse"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:layout_weight="1" android:background="@drawable/gradient_grey">
        <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" android:orientation="vertical">
        <ImageButton
            android:id="@+id/imageButtonHome"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/g3570" android:layout_weight="0.6" android:background="#0000" android:scaleType="fitCenter" android:layout_marginTop="5dp"/>

        <TextView                 android:layout_width="fill_parent"
            android:layout_height="fill_parent"
             android:layout_weight="1"
             android:text="Home"
            android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

        </LinearLayout> <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" android:orientation="vertical">

        <ImageButton
            android:id="@+id/imageButtonTraining"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/g4404" android:layout_weight="0.6" android:scaleType="fitCenter" android:background="#0000" android:layout_marginTop="5dp"/>
            <TextView                 android:layout_width="fill_parent"
            android:layout_height="fill_parent"
             android:layout_weight="1"
             android:text="Training"
            android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

        </LinearLayout> <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" android:orientation="vertical">
        <ImageButton
            android:id="@+id/imageButtonContactUs"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/icon_email" android:layout_weight="0.6" android:scaleType="fitCenter" android:background="#0000" android:layout_marginTop="5dp"/>
           <TextView                 android:layout_width="fill_parent"
            android:layout_height="fill_parent"
             android:layout_weight="1"
             android:text="Contact Us"
            android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

请告诉我应该在哪里放置scrollView标签，以便它能够正常工作..提前谢谢你。！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T06:11:23.803

将所有视图放在父布局中，然后在 xml 中将 ScrollView 添加到该父布局。由于 ScrollView 只能添加到一个孩子。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:11:33.703

放置`<ScrollView>`after first`<ImageView>`标记并将您的菜单项放在单个`<LinearLayout>`标记中，因为 ScrollView 仅适用于单个子项。

# icarousel - 我们怎样才能只显示特定的编号。在 iCarousel 中查看，如果我们有 'n' 没有。的意见？

> ID：14516310
> 
> 赞同：0
> 
> 时间：2013-01-25T06:09:31.393
> 
> 标签：icarousel

实际上，我在 iCarousel 中有 5 个视图，它显示了所有 5 个视图，但我只需要显示 3 个视图而不是 5 个视图，我该如何实现这个场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:31:48.460

在 ViewController 中覆盖此函数以指定项目数

```
// ViewController.m
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    //return the total number of items in the carousel
    return 3;
} 
```

确保 ViewController 设置为委托和数据源

```
// ViewController.h
@interface ViewController : UIViewController <iCarouselDataSource, iCarouselDelegate> 
```

# ruby - Ruby 中的递归

> ID：14516311
> 
> 赞同：-2
> 
> 时间：2013-01-25T06:09:32.717
> 
> 标签：ruby

我正在编写一个选择排序，当我传入一个数组时我让它工作，但是当我尝试使用递归时，它给了我一个堆栈太深的错误。我做错了什么？

```
def selectionSortRecursive(array, arrayPosition)
   if arrayPosition == (array.length-1)
      puts "End of the line folks!"
      return array
   end   
   while arrayPosition >= 1 && array[arrayPosition] < array[arrayPosition - 1] do 
    puts "This is pass #{arrayPosition}"
    if array[arrayPosition] < array[arrayPosition - 1]
      tmp = array[arrayPosition]
      array[arrayPosition] = array[arrayPosition - 1]
      array[arrayPosition - 1] = tmp
    end # end if
    arrayPosition += 1
  end
  selectionSortRecursive(array, arrayPosition)
  return array
end 
```

这是我用来测试它的：

```
selectionSortRecursive(array, 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:39:27.487

在这种情况下，只需输入打印语句即可查看执行了哪些代码以及使用了哪些值。你会看到：

```
$ ruby -w t4.rb 
t4.rb:21: warning: mismatched indentations at 'end' with 'while' at 10
initial array=[4, 3, 2, 1], initial position=2
last_pos=3
This is pass 2 cur=2  pre=3
after switching elements : [4, 2, 3, 1]
This is pass 3 cur=1  pre=3
after switching elements : [4, 2, 1, 3]
initial array=[4, 2, 1, 3], initial position=4
last_pos=3
initial array=[4, 2, 1, 3], initial position=4
last_pos=3
initial array=[4, 2, 1, 3], initial position=4
last_pos=3
initial array=[4, 2, 1, 3], initial position=4
last_pos=3
.......
t4.rb:2: stack level too deep (SystemStackError) 
```

要停止递归，您需要检查一些条件。看看数百万个总是用来解释递归的阶乘或斐波那契例子。

我不确定你想如何排序，但这段代码有效：

```
def selectionSortRecursive(array, arrayPosition)
   puts "initial array=#{array}, initial position=#{arrayPosition}"
   initial_array_position = arrayPosition
   last_pos = array.length - 1
   puts "last_pos=#{last_pos}"
   if arrayPosition == (last_pos)
      puts "End of the line folks!"
      return array
   end   
   while arrayPosition >= 1 && arrayPosition <= last_pos && array[arrayPosition] < array[arrayPosition - 1] do
    cur = array[arrayPosition]
    pre = array[arrayPosition - 1]
    puts "This is pass #{arrayPosition} cur=#{cur}  pre=#{pre}"
    if array[arrayPosition] < array[arrayPosition - 1]
      tmp = array[arrayPosition]
      array[arrayPosition] = array[arrayPosition - 1]
      array[arrayPosition - 1] = tmp
      puts "after switching elements : #{array}"
    end # end if
    arrayPosition += 1
   end
   selectionSortRecursive(array, arrayPosition) if arrayPosition != initial_array_position
   return array
end

p selectionSortRecursive([4,3,2,1], 2) 
```

执行 ：

```
$ ruby -w t4.rb 
initial array=[4, 3, 2, 1], initial position=2
last_pos=3
This is pass 2 cur=2  pre=3
after switching elements : [4, 2, 3, 1]
This is pass 3 cur=1  pre=3
after switching elements : [4, 2, 1, 3]
initial array=[4, 2, 1, 3], initial position=4
last_pos=3
[4, 2, 1, 3] 
```

# vb.net - VB.NET 简化动作(Of T)

> ID：14516318
> 
> 赞同：2
> 
> 时间：2013-01-25T06:09:48.357
> 
> 标签：vb.net, lambda, refactoring

我正在使用 VB.Net 4 并成功使用具有以下签名的类：

> Sub Register(Of TMessage)(recipient As Object, action As System.Action(Of TMessage))

我想了解 VB 中的 lambda，所以我想看看是否可以简化我当前的代码。

当前：我在类的构造函数中有以下内容（为清楚起见进行了简化）

```
Public Sub New()
    Dim myAction As New Action(Of String)(AddressOf HandleMessage)
    Messenger.Default.Register(Of [String])(Me, myAction)            
End Sub 
```

后来在课堂上我有以下内容：

```
Private Function HandleMessage(sMsg As String)
    If sMsg = "String Value" Then
        If Me._Selection.HasChanges Or Me._Selection.HasErrors Then
            Return True
        End If
        Return False
    Else
        Return False
    End If
End Function 
```

问题：有没有办法将它简化为像 C# 中的 lambda，我不必在构造函数中声明 MyAction 变量，而只需将字符串值传递给带有寄存器子的HandleMessage 函数“ **inline ”？**（我希望这是有道理的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:01:40.263

So your constructor code is equivalent to:

```
Messenger.[Default].Register(Of String)(Me,
    Function(sMsg)
        If sMsg = "String Value" Then
            If Me._Selection.HasChanges Or Me._Selection.HasErrors Then
                Return True
            End If
            Return False
        Else
            Return False
        End If
    End Function) 
```

It's worth mentioning though you don't need to use lambdas just to get rid of your explicit delegate creation. This is perfectly legal too:

```
Messenger.[Default].Register(Of String)(Me, AddressOf HandleMessage) 
```

There is a bit of strangeness though with your example: you've declared your Register method as taking an `Action(Of TMessage)` which means the function passed needs no return value. Your function however is returning a `Boolean`. Visual Basic here is doing the fancy "delegate relaxation" and is throwing away the return value. So all your `Return True`/`Return False` bits aren't actually doing anything special.

# java - Spring Hibernate 的 Google Appengine Cloud SQL 问题

> ID：14516319
> 
> 赞同：1
> 
> 时间：2013-01-25T06:09:50.037
> 
> 标签：java, mysql, hibernate, google-app-engine, spring-mvc

我有一个使用 MySQL 在 Amazon EC2 上运行的 Spring Hibernate 应用程序。我正在考虑将我的应用程序移植到 Google App Engine，因为 Google 现在支持 MySQL 和 Google Can SQL。

因此，将我现有的应用程序配置为 Google App Engine Web 应用程序，然后编译代码没有任何错误。我没有对现有应用程序进行任何更改，它编译并创建了所需的表，服务器成功启动。

但是，当运行通过休眠访问数据库的应用程序时，我收到以下错误。

```
org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Cannot open connection
at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy30.findById(Unknown Source)
at com.openentry.catgen.services.impl.WebsiteServiceImpl.getMasterDomain(WebsiteServiceImpl.java:99) 
```

我正在为我的实体类使用注释。

有什么我需要改变的吗？

下面是我的 applicationContext.xml

```
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource"
    p:driverClassName="${jdbc.driverClassName}" p:url="${jdbc.url}"
    p:username="${jdbc.username}" p:password="${jdbc.password}" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
    p:dataSource-ref="dataSource" p:configurationClass="org.hibernate.cfg.AnnotationConfiguration"
    p:packagesToScan="com.package.app.entities">
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
            <prop key="hibernate.generate_statistics">${hibernate.generate_statistics}</prop>
            <prop key="hibernate.connection.useUnicode">${hibernate.connection.useUnicode}</prop>
            <prop key="hibernate.connection.characterEncoding">${hibernate.connection.characterEncoding}</prop>
            <prop key="hibernate.connection.charSet">${hibernate.connection.charSet}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
        </props>
    </property>

</bean>

<tx:annotation-driven />

<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    p:sessionFactory-ref="sessionFactory" />

<bean id="hibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
    <constructor-arg>
        <ref bean="sessionFactory" />
    </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:16:20.940

要在 Eclipse localhost 和 appengine 实例上运行 Google Cloud SQL，您必须检查以下几点。

1.  使用创建 Cloud SQL 实例的同一 google 帐户登录到您的 eclipse。
2.  右键单击项目属性转到**Google>Appengine**选中**Enable Google Cloud SQL instance**
3.  为 localhost 选择 MySQL 实例并配置其值。

    ```
    Hostname : localhost
    Database Name : yourdatabasename
    Port No : 3306
    Username : yourMySQLUserName
    Password : yourPassword
    Path to MySQL JDBC Jar : Path where your mysql-connector-java-x.x.xx.jar   // I usually put this jar on the WEB-INF/lib 
    ```

4.  还要配置 Google Cloud SQL 实例：

    ```
    Instance Name : something:something     // This you will get under Google Cloud SQL tab under Google API Console
    Database Name : yourdatabasename
    Username : yourMySQLUserName
    Password : yourPassword 
    ```

5.  只需复制您的 mysql-connector-java-xxxx.jar 文件并将其粘贴到 Eclipse 中您的 Appengine SDK 的此位置下

    ```
    // This path is shown for Eclipse

    D:\MyEclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.2.1\appengine-java-sdk-1.7.2.1\lib\impl\ 
    ```

6.  驱动程序类名和数据库访问 URL 应更改为以下值。

    ```
    AppengineDriver Class Name : com.google.appengine.api.rdbms.AppEngineDriver
    Database Access URL : jdbc:google:rdbms://instance_name/database_name
    e.g. jdbc:google:rdbms://XXXXXX:xxxxx/XXX_databasename
    user : username   // Your Database User by default its root
    password : password  // Your Database Password by default its blank in GAE Cloud SQL 
    ```

7.  通过遵循所有这些，您可以轻松地在 Eclipse 中配置 Google Cloud SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:16:48.193

我相信这是一个连接问题。要么你写的数据库配置错误，要么数据库和应用程序之间的连接有数据丢失。

# ruby-on-rails - 设计编辑用户更改链接

> ID：14516321
> 
> 赞同：1
> 
> 时间：2013-01-25T06:09:52.297
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

当我访问设计编辑用户页面时，此 URL 是 users/edit/ 但是当我说更改密码并更新时，用户将被重定向到现在呈现编辑页面的 /users/ ，例如，如果我写了当前密码错误，它显示该错误。如果当前密码错误，或者如果字段为空白并且在单击更新按钮时未重定向到 /users/，我如何让 Devise 停留在 /users/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:06:14.043

您处于控制器的更新操作中，但呈现部分编辑。

这不仅仅是设计 - 如果您使用验证创建自己的模型，然后转到编辑页面，进行未通过验证的编辑，您会看到 url 丢失了 /edit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:07:52.977

我在 Devise github 页面上找到了答案：
[https ://github.com/plataformatec/devise/issues/2242](https://github.com/plataformatec/devise/issues/2242)

# azure - 可以将 SQL server express 添加到 Azure“网站”

> ID：14516323
> 
> 赞同：5
> 
> 时间：2013-01-25T06:10:03.763
> 
> 标签：azure

我知道我可以将 SQL server express 添加到 Azure 虚拟机，但我可以将数据库添加到天蓝色的“网站”，还是如果我想为 Azure“网站”使用 SQL 数据库，是否需要使用 Azure SQL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:13:33.990

不，

使用 Azure 网站时不能使用/添加/安装任何软件。在 Azure 网站中运行的应用程序的数据存储可能性有：Azure SQL 数据库（以前的 SQL Azure）、Azure Blob 存储、Azure 表存储、MySQL 数据库（目前仅作为在 Azure 网站中预配 PHP CMS 的一部分提供）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-03T04:52:04.697

可以，但您必须在根目录中创建 SQL Compact Edition，而不是 SQL Server Express。

我写了[一篇](http://sincode.blogspot.tw/2014/09/sql-compact-edition-database-azure.html)关于它的文章。

[这](https://stackoverflow.com/questions/26169526/use-azure-websites-with-sql-compact-edition-for-free)是我在 StackOverflow 上的相关问题帖子，[这](http://www.dotnetcurry.com/showarticle.aspx?ID=883)是我找到的英文版本。

## 以下是我研究后的解决方案：

像这样一步一步来：

1.  **安装两个 Nuget 包**( `EntityFrame.SqlServerCompact`& `Microsoft SQL Server Compact Edition`)

2.  **将您的 SQL 数据库文件 (.sdf/.mdf) 放在 APP_Data 文件夹中** （添加这样的连接字符串以便使用它：

    ```
    <add name ="DefaultConnection" connectionString ="Data Source=|DataDirectory|CompactDB.sdf" providerName ="System.Data.SqlServerCe.4.0" />) 
    ```

3.  将包含上述 SQL 数据库文件的完整项目发布到 AzureWebsites。

你会发现它运行良好，而且完全免费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T12:11:18.913

它是预装的。如果你去 KUDU/Environment 你会发现

```
Connection Strings
  LocalSqlServer
    ConnectionString = data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true
    ProviderName = System.Data.SqlClient 
```

# jquery - Tumblr API v2：显示图像？

> ID：14516326
> 
> 赞同：4
> 
> 时间：2013-01-25T06:10:24.320
> 
> 标签：jquery, arrays, json, api, tumblr

我正在尝试在我的网站上设置 Tumblr API。

到目前为止，我的文字帖子可以正常工作，如下所示：

```
$.ajax({
    url: "http://api.tumblr.com/v2/blog/myblog.tumblr.com/posts?api_key=myapikey",
    dataType: 'jsonp',
    success: function(results){

     var i = 0;

     while (i < 20) {

       var type = results.response.posts[i].type;
       var date = results.response.posts[i].date;

       if (type == "text") {
         var title = results.response.posts[i].title;
         var content = results.response.posts[i].body;
         $("#myDivId").append("<div class='posttitle'><h2>" + title + "</h2></div>");
         $("#myDivId").append("<div class='postbody'>" + content + "</div>");
       }
    i++;
     }//END WHILE

    }//END RESULTS FUNCTION
}); 
```

但我无法让图像正常工作。我知道，无论出于何种原因，帖子中的图像都保存在一个数组中，所以我认为执行以下操作就足以获得第一张图像：

```
 else if (type == "photo") {
         var photourl = results.response.posts[i].photos[0].url;
         $("#myDivId").append("<div class='postbody'><img src='" + photourl + "'/></div>");
       } 
```

但无济于事。如果有人感兴趣，文档就在这里：[http ://www.tumblr.com/docs/en/api/v2#photo-posts](http://www.tumblr.com/docs/en/api/v2#photo-posts)

有人知道如何让这些图像工作吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:17:09.880

看起来它实际上在`alt_sizes`：

```
results.response.posts[i].photos[0].alt_sizes[i].url 
```

[http://jsfiddle.net/ExplosionPIlls/WQqLC/](http://jsfiddle.net/ExplosionPIlls/WQqLC/)

# javascript - 取消第一次函数调用与第二次调用相同函数的影响

> ID：14516330
> 
> 赞同：-1
> 
> 时间：2013-01-25T06:10:57.550
> 
> 标签：javascript, jquery

我想修剪其模糊上的所有输入元素值。我定义了一个函数 trimElements 并在全局页面 global.js 中调用。但是在某些页面中我不想要这个功能（修剪）；但我已经调用了 global.js。我试图通过第二次调用同一函数来消除第一次调用函数的影响。我的代码在这里。

* * *

## global.js

```
function trimElements(trim) {

if(trim) {
    $("input,textarea").blur(function() {
        $.each($("input"),function() {
            $(this).val($.trim($(this).val()))
        })
    })
}
}

$(document).ready(function(){ 

    trimElements(true);

}); 
```

* * *

在其他页面中，我不想要此修剪功能。即我正在尝试做如下

```
$(document).ready(function(){ 

    trimElements(false); // want to cancel the affect of first function call

}); 
```

但我在逻辑上遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:27:53.197

只需将元素与`false`

```
if(trim) {
...
else {
    $("input,textarea").unbind('blur');
} 
```

[http://jsfiddle.net/ExplosionPIlls/b9E47/](http://jsfiddle.net/ExplosionPIlls/b9E47/)

# c - Gdb 通过 C 编译的 objdump 的汇编输出单步执行

> ID：14516340
> 
> 赞同：1
> 
> 时间：2013-01-25T06:11:55.590
> 
> 标签：c, linux, assembly, gdb, x86

我有一个由 gcc 在 IA32 上编译的二进制可执行文件。它最初是用 C 编码的。我希望能够逐步调试它。我可以运行 objdump 并将其铲到要读取的文件中。

```
objdump -d mybinary > mytext.txt 
```

我希望能够逐步通过我可以通过 objdump 看到的装配线。我已经使用了一点 gdb，我希望能够在 objdump 的输出上运行 gdb。这是可能的还是有一个好方法可以做到这一点？我在想的是尝试做以下显然行不通的事情。

```
objdump -d mybinary > gdb 
```

有人可以指出我正确的方向或向我展示如何以我可以将其与 gdb 一起使用的形式获取我的二进制文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:22:55.043

> 我希望能够在 objdump 的输出上运行 gdb

这种要求毫无意义。

您可能要问的是“我可以在 GDB 中单步执行一条指令吗？”，在这种情况下，答案是肯定的：使用`stepi`命令。

# c# - 在循环内以编程方式添加带有事件的控件

> ID：14516341
> 
> 赞同：1
> 
> 时间：2013-01-25T06:11:57.907
> 
> 标签：c#, asp.net, .net-4.0

我在以编程方式添加控件时遇到问题，`Panel`其中控件在循环内有事件。这是我的代码：

```
pnlAccompanies.Controls.Clear();

foreach (var accompany in this.RetrieveAccompanyList())
{
    var btnRemoveAccompany = new LinkButton();
    btnRemoveAccompany.CommandArgument = accompany.AccompanyID.ToString();
    btnRemoveAccompany.CssClass = "close";
    btnRemoveAccompany.Controls.Add(new Literal() { Text = "&times;" });
    btnRemoveAccompany.Click += this.btnRemoveAccompany_Click;
    smGTPForm.RegisterAsyncPostBackControl(btnRemoveAccompany);

    pnlAccompanies.Controls.Add(btnRemoveAccompany);
} 
```

这是我的事件代码：

```
protected void btnRemoveAccompany_Click(object sender, EventArgs e)
{
    var accompanyID = ((LinkButton)sender).CommandArgument.Parser<int>();
    var accompanies = this.RetrieveAccompanyList();
    if (accompanies.Exists(o => o.AccompanyID == accompanyID))
    {
        accompanies.RemoveAll(o => o.AccompanyID == accompanyID);
        HttpContext.Current.Session["gtpd_accompany01"] = accompanies;
        this.PopulateAccompanyList();
    }
} 
```

`accompanies`当我在. `((LinkButton)sender).CommandArgument` **_** `((LinkButton)sender).CommandArgument`为什么会这样？

我的代码在 C# 4.0、ASP.NET 中，在 VS2010 Pro 中构建。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:44:52.310

您尚未为 btnRemoveAccompany 分配 ID 值，因此当您单击此按钮时，事件不知道哪个控件引发了此事件，因为所有控件具有相同的属性。尝试为所有控件添加 ID 值。

# alias - 如何在 vhdl 中使用别名命令

> ID：14516344
> 
> 赞同：0
> 
> 时间：2013-01-25T06:12:11.367
> 
> 标签：alias, vhdl

我在 vhdl 中使用别名命令，但出现错误“索引约束不能应用于已经约束的类型 vec。”

我的代码是

```
 type vec is array (11 downto 0) of std_logic;
    signal s:vec;
    alias s1:vec (3 downto 0) is s(11 downto 8);
    alias s2:vec (4 downto 0) is s(7 downto  4); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:14:29.080

这将做：

```
signal vec: std_logic_vector(11 downto 0);-- std_logic_vector IS an array of std_logic's
alias s1: std_logic_vector(3 downto 0) is vec(3 downto 0);
alias s2: std_logic_vector(3 downto 0) is vec(7 downto 0);-- note: Left: #4 = Right: #4 
```

# iphone - 是否可以在ios中找到应用程序的电池消耗？

> ID：14516346
> 
> 赞同：1
> 
> 时间：2013-01-25T06:12:23.007
> 
> 标签：iphone, ios, power-management

我想找出`iOS`设备中`battery usage`的一个。是否可以这样做，如果可以的话如何估计电池使用量？`application`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:14:15.750

这是不可能的。您只能查询当前的电池寿命。您无法弄清楚其他应用程序的消耗。

# c# - 优先级最高的号码

> ID：14516347
> 
> 赞同：-2
> 
> 时间：2013-01-25T06:12:30.863
> 
> 标签：c#, .net, algorithm

给定数字的整数及其优先级，返回优先级最高的数字说

```
int[] number={0,1,3,4}
int[] priority={1,3,4,2} //All numbers are distinct 
```

我想要值 3（优先级 4 是最大的），我怎样才能轻松有效地实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:19:44.277

要直接回答您的问题而不提出任何关于使用其他对象的建议，请尝试使用`MAX()`and ，`IndexOf()`因为您已经提到其中的所有数字`priority`都是不同的，

```
int _value = number[Array.IndexOf(priority, priority.Max())]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:14:18.033

```
Dictionary<int,int> priority; 
```

这将是比 2 个数组更好的起点。键是一个数字，值是它的优先级。然后可以使用此映射来检查任何数字的优先级。

尽管在您的情况下，您需要做的就是在第二个数组中找到具有最大值的元素的索引，并在第一个数组中的该索引处输出元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:49:03.913

```
int max=0;
for(int i=1; i<priority.length; i++)
   if(priority[max] < priority[i])
          max = i;

return num[max]; 
```

没有要创建的对象，O(n) 复杂度——你可以做的最好的事情，因为你必须访问每个对象。此外，没有对象意味着没有内存开销，因为您只使用原语`int max`

*   内存复杂度 O(1)

*   时间复杂度 O(n)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:17:19.160

我认为以下是您正在寻找的内容：

```
IDictionary<int, int> priority = new Dictionary<int, int>(); // priority, value
priority.Add(1, 3);
priority.Add(2, 4);
priority.Add(3, 5);

Console.WriteLine(priority[2]); //get value with priority 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T06:19:24.307

```
var highestPriorityNumber = number.Select((n, i) => new {p = priority[i], n})
    .OrderByDescending(a => a.p)
    .First().n; 
```

# java - 如何查看发生了哪一列数据截断

> ID：14516348
> 
> 赞同：19
> 
> 时间：2013-01-25T06:12:36.953
> 
> 标签：java, sql-server, ssms, management-studio-express

使用 Java 将数据插入 Microsoft SQL Server 数据库时，我遇到了 SQL 截断异常。但异常没有显示哪一列有问题值。

有没有办法找到错误详细信息，例如从 SQL Server Management Studio？

注意：我在 Windows 中使用 SQL Server 数据库。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T07:07:52.523

抱歉不行。错误消息是 SQL Server 为您提供的尽可能多的信息。

要发现哪些行的哪些列中的哪些值有问题，您需要分析数据。发现此类问题的一种常见方法是执行二进制切分 - 删除一半数据或一半列，再次尝试插入（可能插入与真实表具有相同结构的临时表）并查看错误是否反复出现。

如果确实如此，那太好了，至少有一个问题出在剩余的数据中。如果没有，那么您已经消除了一半的数据，因为它不会导致问题。

# ruby-on-rails - 如何在 HTTP/1.1 中隐藏/停止服务器版本 200 OK 在 rails [ nginx/1.0.6 + Phusion Passenger 3.0.9 ]

> ID：14516351
> 
> 赞同：0
> 
> 时间：2013-01-25T06:12:54.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, passenger

嗨，在我的 rails 应用程序中，我正在使用 nginx/1.0.6，Phusion Passenger 来托管我的 rails 应用程序。但是出于安全问题，我想停止在公共网络上显示标头。现在，当我运行以下 curl 命令时。`

> curl -I [http://domain.name](http://domain.name)

它给了我以下痕迹：

```
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Status: 200
X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.9
ETag: "b7da2b7b2fa6349"
X-UA-Compatible: IE=Edge,chrome=1
X-Runtime: 1.193656
Set-Cookie: demand_session=BAh7ByIQX2NzcmZfdG9rZW4iMUVMREdHRDJGcHhnVzhWNTNsRGhGSWRyNmRQbWZZSnpyZGcwbFYx3D%3D--eb470df0951aac0e6612861ef30ed7a699d073a0; path=/; HttpOnly
Cache-Control: max-age=0, private, must-revalidate
Server: nginx/1.0.6 + Phusion Passenger 3.0.9 (mod_rails/mod_rack) 
```

但我想隐藏这些标题：要显示的服务器、Set-Cookie、X-Powered-By、X-UA-Compatible、ETag、Cache-ControlCache-Control。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:24:41.263

使用[passenger_show_version_in_header off](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_passenger_show_version_in_header_lt_on_off_gt)和[server_tokens off](http://nginx.org/en/docs/http/ngx_http_core_module.html#server_tokens)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T07:01:25.203

If you are using proxy you can use and configure directive `proxy_hide_header` from `proxy` module by that:

```
proxy_hide_header X-Powered-By;
proxy_hide_header X-UA-Compatible;
proxy_hide_header X-Runtime;
proxy_hide_header ETag;

# and so on... 
```

But this directive allow you only to hide headers coming from proxy server. For response headers coming from main server not proxy you can use directive `set` and variable `$sent_http_HEADER` where `HEADER` means header name you would like to set. Here an example:

```
set $sent_http_x_powered_by your_value;
set $sent_http_etag your_value;
set $sent_http_cache_control your_value;

# and so on... 
```

But take in consideration two things: 1\. `Set` directive works only in `server`,`location` and `if` blocks, 2\. As you can read in comments to your question it's not realy good idea to hide or change some headers like Cache-Control because they aren't only information but have impact on browser and user clients work.

# email - 如何在mac邮件中使用applescript自动重播附件？

> ID：14516355
> 
> 赞同：0
> 
> 时间：2013-01-25T06:12:59.833
> 
> 标签：email, applescript

我正在尝试在包含附件的 Mac Mail 中设置自动回复。我可以让自动回复与短信一起使用，但不能与附件一起使用。我正在尝试使用applescript，但我对它并不是很熟悉。我试过了

```
tell application "Mail"
    set {theSender, theAddress, theSubject} to {extract name from sender, extract address from sender, subject}
    set theBody to "Hi - attached you will find out paper, Effects of experimental forest management on a terrestrial, woodland salamander in Missouri, which you requested. If you believe you received this email without solicitation please let me know at dhocking@unh.edu.I hope you find our paper useful! -Dan"

    set theAttachment to "Macintosh HD:Users:Dan:Documents:Papers2:Hocking:2013:Articles:Hocking_2013_Forest_Ecology_and_Management.pdf" as alias
    set MyReply to make new outgoing message with properties {recipient:theSender, subject:"Hello: " & theSubject, content:theBody}
    make new attachment at MyReply with properties {file:_Attachment}
    --open MyReply --comment out if you dont need
    send MyReply --un comment this to auto send your mail
end tell 
```

我也试过

```
using terms from application "Mail"
on perform mail action with messages theMessages for rule theRule
    repeat with eachMessage in theMessages
        tell application "Mail"
            set theAttachment to "Macintosh HD:Users:Dan:Documents:Papers2:Hocking:2013:Articles:Hocking_2013_Forest_Ecology_and_Management.pdf"
            tell eachMessage
                set {theSender, theAddress, theSubject} to {extract name from sender, extract address from sender, subject}
            end tell
            set newMessage to make new outgoing message with properties {subject:"Re: " & theSubject, visible:true}
            tell newMessage
                make new to recipient at end of to recipients with properties {name:theSender, address:theAddress}
                tell content to make new attachment with properties {file name:theAttachment as alias} at after the last paragraph
            end tell
            activate
            send newMessage
        end tell
    end repeat
end perform mail action with messages
end using terms from 
```

我确定我遗漏了一些简单的东西，但我以前从未使用过苹果脚本，所以很明显我遗漏了一些东西。任何帮助，将不胜感激。我在 Mac OS 10.8 上使用 Mail v6.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:48:23.337

试试这个，设置为规则后：

```
using terms from application "Mail"
    on perform mail action with messages theMessages for rule theRule
        try
            set theAttachment to "Macintosh HD:Users:Dan:Documents:Papers2:Hocking:2013:Articles:Hocking_2013_Forest_Ecology_and_Management.pdf"
            repeat with eachMessage in theMessages
                tell application "Mail"
                    tell eachMessage
                        set {theSender, theAddress, theSubject} to {extract name from sender, extract address from sender, subject}
                    end tell
                    set newMessage to make new outgoing message with properties {subject:"Re: " & theSubject, visible:true}
                    tell newMessage
                        make new to recipient at end of to recipients with properties {name:theSender, address:theAddress}
                        tell content to make new attachment with properties {file name:theAttachment as alias} at after the last paragraph
                    end tell
                    activate
                    send newMessage
                end tell
            end repeat
        on error m number n
            display dialog "Error: " & m
            tell application "Mail"
                log "Exception in Mail action: (" & n & ") " & m
            end tell
        end try
    end perform mail action with messages
end using terms from 
```

# iphone - 来自 ImagePicker 的图像时无法检测面部特征

> ID：14516356
> 
> 赞同：1
> 
> 时间：2013-01-25T06:13:02.053
> 
> 标签：iphone, ios, ios6, face-detection

我正在使用`CoreImage`IOS 框架进行人脸检测。示例代码工作正常。但是当我`ImagePicker`从照片库中加载图像时，它不会进行正确的人脸检测。这是我用于人脸检测的代码：

```
-(void)openCamera

{
    picker_ = [[UIImagePickerController alloc] init];
    picker_.delegate = (id)self;
    picker_.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    picker_.wantsFullScreenLayout = YES;
    [self presentViewController:picker_ animated:YES completion:nil];
    picker_=nil;
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info

{
    [picker dismissModalViewControllerAnimated:YES];
    imgVw_User.image =    [info objectForKey:UIImagePickerControllerOriginalImage];
    [picker dismissModalViewControllerAnimated:YES];
    [self faceDetector];
}

-(void)faceDetector
{
    // Draw the face detection image
    [self.view addSubview:imgVw_User];

//     imgVw_User.image=[UIImage imageNamed:@"73_Before_Fractional_Skin_Resurfacing.jpg"];

    // Execute the method used to markFaces in background
    [self performSelectorInBackground:@selector(markFaces:) withObject:imgVw_User];

    // flip image on y-axis to match coordinate system used by core image
    [imgVw_User setTransform:CGAffineTransformMakeScale(1, -1)];

    // flip the entire window to make everything right side up
    [self.view setTransform:CGAffineTransformMakeScale(1, -1)];
}

-(void)markFaces:(UIImageView *)facePicture
{
    // draw a CI image with the previously loaded face detection picture
    CIImage* image = [CIImage imageWithCGImage:facePicture.image.CGImage];

    // create a face detector - since speed is not an issue we'll use a high accuracy
    // detector
    CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace
                                              context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];

    // create an array containing all the detected faces from the detector
    NSArray* features = [detector featuresInImage:image];

    // we'll iterate through every detected face.  CIFaceFeature provides us
    // with the width for the entire face, and the coordinates of each eye
    // and the mouth if detected.  Also provided are BOOL's for the eye's and
    // mouth so we can check if they already exist.
    for(CIFaceFeature* faceFeature in features)
    {
        // get the width of the face
    `CGFloat faceWidth = faceFeature.bounds.size.width;`

    `// create a UIView using the bounds of the face`
    `UIView* faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];`

    // add a border around the newly created UIView
    faceView.layer.borderWidth = 1;
    faceView.layer.borderColor = [[UIColor redColor] CGColor];

    // add the new view to create a box around the face
    [self.view addSubview:faceView];

    if(faceFeature.hasLeftEyePosition)
    {
        // create a UIView with a size based on the width of the face
        UIView* leftEyeView = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.leftEyePosition.x-faceWidth*0.15, faceFeature.leftEyePosition.y-faceWidth*0.15, faceWidth*0.3, faceWidth*0.3)];
        // change the background color of the eye view
        [leftEyeView setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.3]];
        // set the position of the leftEyeView based on the face
        [leftEyeView setCenter:faceFeature.leftEyePosition];
        // round the corners
        leftEyeView.layer.cornerRadius = faceWidth*0.15;
        // add the view to the window
        [self.view addSubview:leftEyeView];
    }

    if(faceFeature.hasRightEyePosition)
    {
        // create a UIView with a size based on the width of the face
        UIView* leftEye = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.rightEyePosition.x-faceWidth*0.15, faceFeature.rightEyePosition.y-faceWidth*0.15, faceWidth*0.3, faceWidth*0.3)];
        // change the background color of the eye view
        [leftEye setBackgroundColor:[[UIColor blueColor] colorWithAlphaComponent:0.3]];
        // set the position of the rightEyeView based on the face
        [leftEye setCenter:faceFeature.rightEyePosition];
        // round the corners
        leftEye.layer.cornerRadius = faceWidth*0.15;
        // add the new view to the window
        [self.view addSubview:leftEye];
    }

    if(faceFeature.hasMouthPosition)
    {
        // create a UIView with a size based on the width of the face
        UIView* mouth = [[UIView alloc] initWithFrame:CGRectMake(faceFeature.mouthPosition.x-faceWidth*0.2, faceFeature.mouthPosition.y-faceWidth*0.2, faceWidth*0.4, faceWidth*0.4)];
        // change the background color for the mouth to green
        [mouth setBackgroundColor:[[UIColor greenColor] colorWithAlphaComponent:0.3]];
        // set the position of the mouthView based on the face
        [mouth setCenter:faceFeature.mouthPosition];
        // round the corners
        mouth.layer.cornerRadius = faceWidth*0.2;
        // add the new view to the window
        [self.view addSubview:mouth];
    }
 }
} 
```

如果我将来自 的图像更改为`imagePicker`应用程序中的静态图像，即`73_Before_Fractional_Skin_Resurfacing.jpg`，则检测是正确的。当图像来自照片库（即来自`ImagePicker`. 请指教..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:39:48.160

可能是这段代码会帮助你，使用这个函数返回的图像

```
- (UIImage *)scaleAndRotateImage:(UIImage *)image {
static int kMaxResolution = 640;

CGImageRef imgRef = image.CGImage;
CGFloat width = CGImageGetWidth(imgRef);
CGFloat height = CGImageGetHeight(imgRef);

CGAffineTransform transform = CGAffineTransformIdentity;
CGRect bounds = CGRectMake(0, 0, width, height);
if (width > kMaxResolution || height > kMaxResolution) {
    CGFloat ratio = width/height;
    if (ratio > 1) {
        bounds.size.width = kMaxResolution;
        bounds.size.height = bounds.size.width / ratio;
    } else {
        bounds.size.height = kMaxResolution;
        bounds.size.width = bounds.size.height * ratio;
    }
}

CGFloat scaleRatio = bounds.size.width / width;
CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
CGFloat boundHeight;

UIImageOrientation orient = image.imageOrientation;
switch(orient) {
    case UIImageOrientationUp:
        transform = CGAffineTransformIdentity;
        break;
    case UIImageOrientationUpMirrored:
        transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        break;
    case UIImageOrientationDown:
        transform = CGAffineTransformMakeTranslation
            (imageSize.width, imageSize.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;
    case UIImageOrientationDownMirrored:
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
        transform = CGAffineTransformScale(transform, 1.0, -1.0);
        break;
    case UIImageOrientationLeftMirrored:
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation
            (imageSize.height, imageSize.width);
        transform = CGAffineTransformScale(transform, -1.0, 1.0);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;
    case UIImageOrientationLeft:
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
        break;
    case UIImageOrientationRightMirrored:
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeScale(-1.0, 1.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;
    case UIImageOrientationRight:
        boundHeight = bounds.size.height;
        bounds.size.height = bounds.size.width;
        bounds.size.width = boundHeight;
        transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        transform = CGAffineTransformRotate(transform, M_PI / 2.0);
        break;
    default:
        [NSException raise:NSInternalInconsistencyException
            format:@"Invalid image orientation"];
}

UIGraphicsBeginImageContext(bounds.size);
CGContextRef context = UIGraphicsGetCurrentContext();
if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
    CGContextScaleCTM(context, -scaleRatio, scaleRatio);
    CGContextTranslateCTM(context, -height, 0);
} else {
    CGContextScaleCTM(context, scaleRatio, -scaleRatio);
    CGContextTranslateCTM(context, 0, -height);
}
CGContextConcatCTM(context, transform);
CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
UIImage *returnImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return returnImage;
} 
```

# salesforce - 在 Salesforce 中使用验证规则

> ID：14516359
> 
> 赞同：-1
> 
> 时间：2013-01-25T06:13:07.623
> 
> 标签：salesforce

我有一个文本字段，当我没有填写文本字段时，显示一个默认值。

使用验证规则。

谢谢库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:13:31.070

你的问题不清楚。

如果您想在未填写值的情况下阻止保存记录 - 最简单的方法是将字段标记为必填（在字段本身或页面布局上）。如果确实必须使用验证规则来完成 - `ISBLANK(TextField__c)`.

如果您想提供默认值 - 同样，最简单的方法是将字段本身设置为默认值。

如果您想要“用户没有填写任何内容并且他正在保存记录，我需要在保存实际发生之前覆盖它”之类的东西 - 最好的方法是工作流规则。与上面写的条件相同，动作=字段更新

# java - Java中的双重调度

> ID：14516361
> 
> 赞同：0
> 
> 时间：2013-01-25T06:13:10.760
> 
> 标签：java, polymorphism, object-reference, double-dispatch

我不确定我是否对双重调度有错误的想法。但这就是我的想法：

```
class A{
   void testA( B obj ){
         System.out.println( "A-Parent" );
          obj.testB();
   }
}

class AChild extends A{
   void testA( B obj ){
         System.out.println( "A-Child" );
         obj.testB();
   }
}

class B{
   void testB(){
         System.out.println( "B-Parent" );
   }
}

class BChild extends B{
   void testB(){
         System.out.println( "B-Child" );
   }
}

class Launcher{
  public static void main(){
  A objA = new AChild();
  B objB = new BChild();

  objA.testA(objB);
  }
}

What I expected:

A-Child
B-Parent

Actual output:

A-Child
B-Child   // How ??????? 
```

由于Javas Single diapatch，我认为Java在运行时将objA正确解析为Achild，而在编译时将参数解析为B。请告诉我哪里弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:24:41.003

看不到为什么应该打印**“B-Parent”而不是****“B-Child”的原因**

```
 B objB = new BChild();
     objA.testA(objB); 
```

**objB**实际上有一个 B 的子实例。所以**B-Child**将被打印出来。所以这是运行时绑定或 Java 的多态特性 :)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-25T06:17:44.260

您需要使用[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)在 java 中实现双重调度。

# c++ - 使用指针的 C++ 简单递减（困惑）

> ID：14516365
> 
> 赞同：3
> 
> 时间：2013-01-25T06:13:24.513
> 
> 标签：c++

我对这种行为有点困惑。谁能解释

```
 void Decrement(int* x){
        *x--; //using this line, the output is 5 

        //*x=*x-1; //using this l ine, the output is 4

    }

    int main(){
        int myInt=5;
        Decrement(&myInt);
        cout<<myInt<<endl;
        return 0;
    }

    Output: 5 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T06:15:27.613

`*x--`意味着`*(x--)`。也就是说，您的程序修改`x`，而不是它指向的内容。由于它是按值传递的，因此该修改在`main()`. 要匹配您的注释行，您需要使用`(*x)--`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T06:16:28.823

试试`(*x)--;`。

您的代码正在递减指针，然后取消引用并丢弃该值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T06:17:54.423

这是一个运算符优先级问题。

该`--`运算符优先于取消引用运算符 ( `*`)。因此，您实际上所做的只是访问 x 位置下方一个内存位置的值（并且什么都不做）。

我觉得你可能想要做的是通过 x “通过引用”。看起来像这样：

```
void Decrement(int& x){
    x--;
}

int main(){
    int myInt = 5;
    Decrement(myInt);
    cout << myInt << endl;
    return 0;
} 
```

当您通过引用传递值时，C++ 会自动为您取消引用指针，这就是`*`Decrement 函数中不再需要 的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T06:19:20.070

你期待 (*x)-- 并且得到 *(x--)。原因是[操作的优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)。查一下。“取消引用地址”之前的前后增量绑定。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-25T06:34:55.137

您基本上是`x`按值传递指针。因此，函数中的哪些更改`x`（而不是它指向的内容）`void Decrement(int*)`不会反映在`main()`. 此代码将实现您打算做的事情：

```
void Decrement(int& x)
    {
        x--;

    }

int main()
    {
        int myInt=5;
        Decrement(myInt);
        cout<<myInt<<endl;
        return 0;
    }

    Output: 4 
```

这是通过引用调用，通过它传递对变量的引用（或地址）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T06:16:05.063

表达式`*x--`等价于`*(x--)`。

# android - 为什么布局上的项目不能在课堂上使用？

> ID：14516367
> 
> 赞同：0
> 
> 时间：2013-01-25T06:13:43.473
> 
> 标签：android, google-maps

我正在尝试一个我在互联网上获得的项目，但是当我在 Eclipse Juno 上导入它时，activity_main.xml 中的项目无法使用。这是activity_main.xml 代码`

```
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >      

    <Button 
        android:id="@+id/btn_find"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="@string/str_btn_find" 
        android:layout_alignParentRight="true" />

    <EditText
        android:id="@+id/et_location"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        android:inputType="text" 
        android:hint="@string/hnt_et_location"
        android:layout_toLeftOf="@id/btn_find" />

</RelativeLayout>

 <com.google.android.maps.MapView        
    android:id="@+id/map_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:apiKey="02XkocQETlvu36mzmDnwYr-A4GTX5mENmESOG8A"
    android:clickable="true" /> 
```

`

这是 MainActivity.java 的代码

```
import java.io.IOException;
import java.util.List;

import android.R;
import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Geocoder;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class MainActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Getting reference to btn_find of the layout activity_main
    Button btn_find = (Button) findViewById(R.id.btn_find);

    // Defining button click event listener for the find button
    OnClickListener findClickListener = new OnClickListener() {         
        @Override
        public void onClick(View v) {
            // Getting reference to EditText to get the user input location
            EditText etLocation = (EditText) findViewById(R.id.et_location);

            // Getting user input location
            String location = etLocation.getText().toString();

            if(location!=null && !location.equals("")){
                new GeocoderTask().execute(location);
            }
        }
    };

    // Setting button click event listener for the find button
    btn_find.setOnClickListener(findClickListener);     
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}   

// An AsyncTask class for accessing the GeoCoding Web Service
private class GeocoderTask extends AsyncTask<String, Void, List<Address>>{

    @Override
    protected List<Address> doInBackground(String... locationName) {
        // Creating an instance of Geocoder class
        Geocoder geocoder = new Geocoder(getBaseContext());
        List<Address> addresses = null;

        try {
            // Getting a maximum of 3 Address that matches the input text
            addresses = geocoder.getFromLocationName(locationName[0], 3);
        } catch (IOException e) {
            e.printStackTrace();
        }           
        return addresses;
    }

    @Override
    protected void onPostExecute(List<Address> addresses) {

        // Getting Reference to MapView of the layout activity_main
        MapView mapView = (MapView) findViewById(R.id);

        // Setting ZoomControls
        mapView.setBuiltInZoomControls(true);

        // Getting MapController for the MapView
        MapController mc = mapView.getController();

        // Getting Drawable object corresponding to a resource image
        Drawable drawable = getResources().getDrawable(R.drawable.marker);

        // Getting Overlays of the map
        List<Overlay> overlays = mapView.getOverlays();

        // Creating an ItemizedOverlay
        LocationOverlay locationOverlay = new LocationOverlay(drawable,getBaseContext());

        // Clearing the overlays
        overlays.clear();

        if(addresses==null || addresses.size()==0){
            Toast.makeText(getBaseContext(), "No Location found", Toast.LENGTH_SHORT).show();

            // Redraws the map to clear the overlays
            mapView.invalidate();
        }

        // Adding Markers on Google Map for each matching address
        for(int i=0;i<addresses.size();i++){                

            Address address = (Address) addresses.get(i);

            // Creating an instance of GeoPoint, to display in Google Map
            GeoPoint p = new GeoPoint(
                                      (int)(address.getLatitude()*1E6),
                                      (int)(address.getLongitude()*1E6)
                                     );

            String addressText = String.format("%s, %s",
                    address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                    address.getCountryName());

            // Creating an OverlayItem to mark the point
            OverlayItem overlayItem = new OverlayItem(p, "Location",addressText);

            // Adding the OverlayItem in the LocationOverlay
            locationOverlay.addOverlay(overlayItem);

            // Adding locationOverlay to the overlay
            overlays.add(locationOverlay);

            // Locate the first location
            if(i==0)
                mc.animateTo(p);                    
        }

        // Redraws the map
        mapView.invalidate();

    }       
} 
```

}`

该错误在“R.layout.activity_main”、“Button btn_find = (Button) findViewById(R.id.btn_find)”之类的行上显示了一些错误。activity_main 和 btn_find 以及另一个 R.id.x 标记为错误。那里有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:41:41.753

添加这个 xmlns:android="http://schemas.android.com/apk/res/android" 之后

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:22:08.020

您需要做的第一件事是 OnClickListener 的类应如下所示：-

```
 public void onCreate(Bundle savedInstanceState){

 Button btn_find = (Button) findViewById(R.id.btn_find);
 btn_find.setOnClickListener(findClickListener);

}

 OnClickListener findClickListener = new OnClickListener() {         
    @Override
    public void onClick(View v) {
        // Getting reference to EditText to get the user input location
        EditText etLocation = (EditText) findViewById(R.id.et_location);

        // Getting user input location
        String location = etLocation.getText().toString();

        if(location!=null && !location.equals("")){
            new GeocoderTask().execute(location);
        }
    }
}; 
```

看看这个并尝试清理你的项目......！！！！

使用您的布局如下： -

```
<RelativeLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >      

<Button 
    android:id="@+id/btn_find"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/str_btn_find" 
    android:layout_alignParentRight="true" />

<EditText
    android:id="@+id/et_location"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"        
    android:inputType="text" 
    android:hint="@string/hnt_et_location"
    android:layout_toLeftOf="@id/btn_find" />

 <com.google.android.maps.MapView        
android:id="@+id/map_view"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:apiKey="02XkocQETlvu36mzmDnwYr-A4GTX5mENmESOG8A"
android:clickable="true" />

</RelativeLayout> 
```

并检查出来......！！！！

# android - 如何获取数据库表中列中所有数字的总和

> ID：14516377
> 
> 赞同：0
> 
> 时间：2013-01-25T06:14:53.843
> 
> 标签：android, database, sqlite

我有以下函数，并试图获取列中的所有整数并将它们相加为总数。

下面的代码不起作用，因为对于测试，我在表中放了两行，KEY_HITS 列有数字 5 和 6，总数应该是 11，但结果是 4

```
 public int getTotal() {

    String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_HITS };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
            null, null);
    int total = 0;

    int iHits = c.getColumnIndex(KEY_HITS);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        total = total + iHits;
    }
    return total;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T07:54:15.913

您可以直接进行 sqlite 查询，例如：

```
Cursor cursor = sqliteDatabase.rawQuery(
    "SELECT SUM(COL_VALUES) FROM myTable", null);
if(cursor.moveToFirst()) {
    return cursor.getInt(0);
} 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:19:42.777

那是因为您要添加两次列索引。你应该写

```
total= total + c.getLong(KEY_HITS); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:20:34.920

getColumnIndex 返回给定列名的从零开始的索引，如果该列不存在，则返回 -1。你应该有`c.getInt(KEY_HITS)`

# php - 在新选项卡中打印 php 数据

> ID：14516382
> 
> 赞同：2
> 
> 时间：2013-01-25T06:15:12.240
> 
> 标签：php

我有一个像这样的简单 php 代码：

```
 //index.php
    $file  = fil1.txt;
    //open file using fopen...
    echo $file; 
```

如果我需要在另一个 php 文件（ex result.php）的新选项卡中打印我的文件数据，我该怎么办？

这是我的真实代码示例：

```
function elementStart($parser, $name, $attrs) {
global $depth;

echo str_repeat("&nbsp;", $depth * 0); 
//echo "<b>$name</b><br>";     

$depth++; 

    foreach ($attrs as $attr => $value) {
        echo str_repeat("&nbsp;", $depth * 0); 

        echo $value.'<br>';
    }
}

function elementStr($parser, $str) {
    if (strlen(trim($str)) > 0) {
        global $depth;

        echo str_repeat("&nbsp;", $depth * 0); 
        echo $str.'<br>'; 
    }
}

function elementEnd($parser, $name) {
    global $depth;

    $depth--;
}

require_once 'connect.php';

if(isset($_POST['submit1']))
{

$db = new database('localhost', 'root', '', 'database1');
$val = mysql_escape_string($_POST['xml1']); 
$db->query("SELECT * FROM xmltable1 WHERE xmlvalue LIKE '%$val%' LIMIT 1");
if($_POST['submit1'])
{

    if($dbase->numRows() == 0){
        echo 'No rows';
    }
    else{
        foreach($db->rows() as $name){
            //echo $name['xmlvalue'];

            define('FOLDER_PATH', 'C:user/folder1/xmld/');
            $full_path = FOLDER_PATH.$name['xmldata'];
            //echo $full_path;
                    $depth = 0;
                    $file  = $full_path;

                    $xml_parser = xml_parser_create();

                    xml_set_element_handler($xml_parser, "elementStart", "elementEnd");
                    xml_set_character_data_handler($xml_parser, "elementStr");

                    while ($data = fgets($fp)) {

                    thexml_parser_free($thexml_parser);

            }

        }
    }

$dbase->disconnect();
} 
```

在我的函数中有回声。当然，我会在当前页面中得到回显，但我需要在新标签中回显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:19:01.437

将数据传递到另一个窗口（或选项卡）中的另一个 PHP 文件的唯一方法是使用会话。

在两个 PHP 文件的顶部，*启动一个会话*：

```
session_start(); 
```

在您的*index.php*中，将文件数据分配给会话变量：

```
$_SESSION['file_data'] = $file_contents; 
```

在您的*results.php*中，打印出数据：

```
echo $_SESSION['file_data']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:23:20.083

打开一个新标签不是PHP应该做的，你可以尝试使用javascripntk来实现这样的：

```
echo <<<EOF
<script>
var win = window.open('about:blank');
var doc = win.document;
doc.write('{$yourdata}');
</script>
EOF; 
```

# android - 蓝牙未知连接错误Android

> ID：14516386
> 
> 赞同：0
> 
> 时间：2013-01-25T06:15:34.953
> 
> 标签：android, bluetooth

我正在开发一个应用程序，我正在使用蓝牙连接到设备，该设备适用于所有 android 版本，但三星 Galaxy Tab 2 10.1 存在一些问题。 **问题：-** 如果设备在一段时间后关闭，我的应用程序检测到然后开始搜索远程设备。但应用程序无法找到设备（打开时）。当我再次在这里开始正常搜索时，我也有一个正常的设备列表活动，它找到了设备并正确连接到它。 **代码：--** 我的连接代码如下，我使用的是低级连接而不是串行端口。我遵循的步骤：1）查找蓝牙设备（获取mac）2）启动HHDService.start（）；3）HHDService.connect（蓝牙设备）；

主要问题是设备断开后应用程序无法找到设备...

```
public class HHDService {
    // Debugging
    private static final String TAG = "HHDService";
    private static final boolean D = true;

    boolean isRequestSend = true;

    // Unique UUID for this application
    //private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

    private BluetoothSocket mmSocket = null;
    private InputStream mmInStream = null;
    private OutputStream mmOutStream = null;

    // Member fields
    private final BluetoothAdapter mAdapter;
    private Handler mHandler;
    //private AcceptThread mAcceptThread;
    private ConnectThread mConnectThread;
    private ConnectedThread mConnectedThread;
    private int mState;

    private long waitTime = 15000;

    // Constants that indicate the current connection state
    public static final int STATE_NONE = 0; // we're doing nothing
    public static final int STATE_LISTEN = 1; // now listening for incoming
                                                // connections
    public static final int STATE_CONNECTING = 2; // now initiating an outgoing
                                                    // connection
    public static final int STATE_CONNECTED = 3; // now connected to a remote
                                                    // device

    public static final int STATE_SLEEP = 4; // now connected to a remote
    // device

    private Context mContext;

    /**
     * Constructor. Prepares a new BluetoothChat session.
     * 
     * @param context
     *            The UI Activity Context
     * @param handler
     *            A Handler to send messages back to the UI Activity
     */
    public HHDBapiBTService(Context context, Handler handler) {
        mAdapter = BluetoothAdapter.getDefaultAdapter();
        mState = STATE_NONE;
        mHandler = handler;
        mContext = context;
    }

    /**
     * Set the current state of the chat connection
     * 
     * @param state
     *            An integer defining the current connection state
     */
    public synchronized void setState(int state) {
        if (D)
            Log.d(TAG, "setState() " + mState + " -> " + state);
        mState = state;

        // Give the new state to the Handler so the UI Activity can update
        mHandler.obtainMessage(GlobalValues.MESSAGE_STATE_CHANGE, state, -1)
                .sendToTarget();
    }

    /**
     * Return the current connection state.
     */
    public synchronized int getState() {
        return mState;
    }

    public void setHandler(Handler handler) {
        mHandler = handler;
    }

    /**
     * Start the chat service. Specifically start AcceptThread to begin a
     * session in listening (server) mode. Called by the Activity onResume()
     */
    public synchronized void start() {
        if (D)
            Log.d(TAG, "start");

        // Cancel any thread attempting to make a connection
        if (mConnectThread != null) {
            mConnectThread.cancel(true);
            mConnectThread = null;
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        setState(STATE_LISTEN);
    }

    /**
     * Start the ConnectThread to initiate a connection to a remote device.
     * 
     * @param device
     *            The BluetoothDevice to connect
     */
    public synchronized void connect(BluetoothDevice device) {
        if (D)
            Log.d(TAG, "connect to: " + device);

        // Cancel any thread attempting to make a connection
        if (mState == STATE_CONNECTING) {
            if (mConnectThread != null) {
                mConnectThread.cancel();
                mConnectThread = null;
            }
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        // Start the thread to connect with the given device
        mConnectThread = new ConnectThread(device);
        mConnectThread.start();
        setState(STATE_CONNECTING);
    }

    /**
     * Start the ConnectedThread to begin managing a Bluetooth connection
     * 
     * @param socket
     *            The BluetoothSocket on which the connection was made
     * @param device
     *            The BluetoothDevice that has been connected
     */
    public synchronized void connected(BluetoothSocket socket,
            BluetoothDevice device) {
        if (D)
            Log.d(TAG, "connected");

        // Cancel the thread that completed the connection
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        // Start the thread to manage the connection and perform transmissions
        mConnectedThread = new ConnectedThread(socket);
        mConnectedThread.start();

        setState(STATE_CONNECTED);
    }

    /**
     * Stop all threads
     */
    public synchronized void stop() {
        if (D)
            Log.d(TAG, "stop");
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        setState(STATE_NONE);
    }

    /**
     * Write to the ConnectedThread in an unsynchronized manner
     * 
     * @param out
     *            The bytes to write
     * @see ConnectedThread#write(byte[])
     */
    public void write(byte[] out) {
        if(getState() == STATE_SLEEP){
            connectionLost();
            return;
        }
        // Create temporary object
        ConnectedThread r;
        // Synchronize a copy of the ConnectedThread
        synchronized (this) {
            if (mState != STATE_CONNECTED)
                return;
            r = mConnectedThread;

        }
        // Perform the write unsynchronized
        r.write(out);
    }

    public void closeConnection(){
        ConnectedThread r;
        // Synchronize a copy of the ConnectedThread
        synchronized (this) {
            if (mState != STATE_CONNECTED)
                return;
            r = mConnectedThread;
        }
        r.cancel();
    }

    /**
     * Indicate that the connection attempt failed and notify the UI Activity.
     */
    private void connectionFailed() {
        if(getState() != STATE_LISTEN){
            setState(STATE_LISTEN);

        }

    }

    /**
     * Indicate that the connection was lost and notify the UI Activity.
     */
    private void connectionLost() {
        //setState(STATE_LISTEN);

        // Send a failure message back to the Activity
        setState(STATE_SLEEP);

    }

    /**
     * This thread runs while attempting to make an outgoing connection with a
     * device. It runs straight through; the connection either succeeds or
     * fails.
     */

    /* private class ConnectThread extends Thread {
            private final BluetoothSocket mmSocket;
            private final BluetoothDevice mmDevice;

            public ConnectThread(BluetoothDevice device) {
                mmDevice = device;
                BluetoothSocket tmp = null;

                // Get a BluetoothSocket for a connection with the
                // given BluetoothDevice
                try {
                    tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
                } catch (IOException e) {
                    Log.e(TAG, "create() failed", e);
                }
                mmSocket = tmp;
            }

            public void run() {
                Log.i(TAG, "BEGIN mConnectThread");
                setName("ConnectThread");

                // Always cancel discovery because it will slow down a connection
                mAdapter.cancelDiscovery();

                // Make a connection to the BluetoothSocket
                try {
                    // This is a blocking call and will only return on a
                    // successful connection or an exception
                    mmSocket.connect();
                } catch (IOException e) {
                    connectionFailed();
                    // Close the socket
                    try {
                        mmSocket.close();
                    } catch (IOException e2) {
                        Log.e(TAG, "unable to close() socket during connection failure", e2);
                    }
                    // Start the service over to restart listening mode
                    HHDService.this.start();
                    return;
                }

                // Reset the ConnectThread because we're done
                synchronized (HHDService.this) {
                    mConnectThread = null;
                }

                // Start the connected thread
                connected(mmSocket, mmDevice);
            }

            public void cancel() {
                try {
                    mmSocket.close();
                } catch (IOException e) {
                    Log.e(TAG, "close() of connect socket failed", e);
                }
            }

    }*/

    private class ConnectThread extends Thread {
        private BluetoothSocket mmSocket;
        private final BluetoothDevice mmDevice;

        public ConnectThread(BluetoothDevice device) {
            mmDevice = device;
        }

        @SuppressLint("NewApi")
        protected boolean simpleComm(Integer port) {
            // byte [] inputBytes = null;

            // The documents tell us to cancel the discovery process.
            mAdapter.cancelDiscovery();

            Log.d(this.toString(), "Port = " + port);
            try {
                Method m = mmDevice.getClass().getMethod("createRfcommSocket",
                        new Class[] { int.class });
                mmSocket = (BluetoothSocket) m.invoke(mmDevice, port);

                // debug check to ensure socket was set.
                assert (mmSocket != null) : "Socket is Null";

                mAdapter.cancelDiscovery();
                // attempt to connect to device
                mmSocket.connect();
                try {
                    Log.d(this.toString(),
                            "************ CONNECTION SUCCEES! *************");

                    // Reset the ConnectThread because we're done
                    synchronized (HHDService.this) {
                        mConnectThread = null;
                    }

                    connected(mmSocket, mmDevice);
                    return true;
                } finally {
                    // close the socket and we are done.
                    // //mmSocket.close();
                }
                // IOExcecption is thrown if connect fails.
            } catch (IOException ex) {
                Log.e(this.toString(), "IOException " + ex.getMessage());
                if (port == 256) {
                    connectionFailed();
                    try {
                        mmSocket.close();
                        mmSocket = null;
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }
            } catch (NoSuchMethodException ex) {
                Log.e(this.toString(),
                        "NoSuchMethodException " + ex.getMessage());
            } catch (IllegalAccessException ex) {
                Log.e(this.toString(),
                        "IllegalAccessException " + ex.getMessage());
            } catch (InvocationTargetException ex) {
                Log.e(this.toString(),
                        "InvocationTargetException " + ex.getMessage());
            }catch (NullPointerException ex) {
                Log.e(this.toString(),
                        "NullPointerException " + ex.getMessage());
            }
            return false;
        }

        public void run() {
            for (Integer port = 1; port <= 256; port++) {
                if (simpleComm(Integer.valueOf(port)))
                    break;
            }

        }

        public void cancel() {
             if (mmSocket != null) { 
                 try { 
                     mmSocket.close(); mmSocket = null;
                 } catch (IOException e) { 
                     Log.e(TAG, "close() of connect secure socket failed", e); 
                 } 
             }
        }

        public void cancel(boolean val) {
             if (mmSocket != null) { 
                 try { 
                     mmSocket.close(); mmSocket = null;
                 } catch (IOException e) { 
                     Log.e(TAG, "close() of connect secure socket failed", e); 
                 } 
             }
        }

    }

    /**
     * This thread runs during a connection with a remote device. It handles all
     * incoming and outgoing transmissions.
     */
    private class ConnectedThread extends Thread {

        private Logger logger;

        public ConnectedThread(BluetoothSocket socket) {
            Log.d(TAG, "create ConnectedThread");
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the BluetoothSocket input and output streams
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) {
                Log.e(TAG, "temp sockets not created", e);
            }

            logger = Logger.getInstance();

            mmInStream = tmpIn;
            mmOutStream = tmpOut;

        }

        @Override
        public void run() {
            Log.i(TAG, "BEGIN mConnectedThread");
            byte[] buffer = new byte[1024];
            int bytes;

            byte commandByte = 00;

            //Logic to parse incoming data

        }; 

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:03:11.080

经过大量研究找到解决方案？只需在请求打开套接字之前添加延迟（在我的情况下为 500 毫秒）。

# android - Number Picker android ICS 显示旧的 numberpicker

> ID：14516389
> 
> 赞同：0
> 
> 时间：2013-01-25T06:15:51.520
> 
> 标签：android

嗨，我首先使用目标 api 3.0 开发了项目。当时它显示数字选择器如下

![在此处输入图像描述](../Images/cba27e87228ce4fcd393398b3832bdcf.png)

现在我用 15(4.0.3) 更改了目标和最低版本。它仍然显示旧的数字选择器。

我想看看下面的选择器。

![在此处输入图像描述](../Images/8b5b8f52a933a64764f4ad4633fff5fe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:16:53.867

The problem can be resolved in one of several ways,

1 If you want to change the look and feel of all the date/time pickers in your app, you could apply a proper theme to the application

From Android 3.0 and afterwards app could use one of the following themes:

*   android:Theme series: the traditional (legacy) Android themes
*   android:Theme.Holo series: new Holo themes introduced since Android 3.0, the themes are created by Android and no one else shall modify it. Meaning that using the themes can keep your apps look and feel across devices.
*   android:Theme.DeviceDefault series: they are based on the Holo themes, but could b customized by every device manufacturer. Using the themes can make your app have similar look and feel as the built-in apps.

Applying one of the last two themes to your app could resolve your problem:

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/android:Theme.DeviceDefault" > 
```

2 If you have no android:theme set for your app, then be aware of that the uses-sdk tag could decide the actual theme in use

See [http://android-developers.blogspot.com/2012/01/holo-everywhere.html](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)

So setting android:targetSdkVersion to a number equals or greater than 11 can resolve your problem.

3 If you are using a picker dialog and just want to change the look & feel of the single picker, then you could set a theme to the dialog only.

Like this:

```
Dialog dialog = new DatePickerDialog(this, AlertDialog.THEME_DEVICE_DEFAULT_DARK, new OnDateSetListener()...); 
```

Note that AlertDialog.THEME_DEVICE_DEFAULT_DARK an API Level 14 API, you may also choose Holo themes like AlertDialog.THEME_HOLO_DARK which is available in API Level 11.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:15:53.753

Just need to change theme to holo in manifiest file.

# magento - 如何将具有特定角色的用户添加到magento中的产品

> ID：14516390
> 
> 赞同：0
> 
> 时间：2013-01-25T06:15:52.503
> 
> 标签：magento, catalog

我有一组具有自定义资源访问权限的用户

当我将产品添加到我的目录时，我希望此用户显示在下拉列表中，并且管理员可以为每个产品分配一个用户

如何做到这一点？

magento 是否有内置功能。

如果没有哪个是最佳方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:52:31.430

您需要使用设置脚本向产品实体添加属性。您的属性将需要一个自定义`source_model`来读取管理员用户信息并根据角色分配构建一个集合。

# javascript - 在 IE 上动态设置 Select 的 OPTIONS

> ID：14516394
> 
> 赞同：0
> 
> 时间：2013-01-25T06:16:09.953
> 
> 标签：javascript, internet-explorer, dom, select, prototypejs

我正在使用从 Ajax 调用中获得的数据设置近 10 多个 Select 控件；以下是我的代码：

```
function arrayToOptionList(list) {

    var optList = [];
    for (i = 0; i < list.length; i++) {
        optList.push("<option value ='" + list[i][1] + "' >" + list[i][0] + "</option>");
    }

    return optList.join("");

}

 opt = arrayToOptionList(list);
 $("select_ctrl_id").update(opt); 
```

我知道 IE 在 dom 操作方面存在重大问题。经过几次谷歌搜索后，我优化了 IE 代码。在设置选择控件时，我仍然发现我的 IE 有一段时间没有响应。你们能建议我还能做些什么来改善这个问题吗？

我正在使用prototype.js 来设置选择控件，我在IE 8/9 上遇到了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:37:52.167

尝试使用 Prototype 提供的内置方法 - 例如

```
var select = $("select_ctrl_id").clone();
list.each(function(i){
    select.insert(new Element('option',{'value':i[1]}).update(i[0]));
});
$("select_ctrl_id").replace(select); 
```

这将创建一个 select DOM 元素的副本，并将所有选项插入到 select 中，然后替换 select。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:38:03.863

根据我的经验`innerHTML`，它最适合 IE，因此请尝试将其与普通 DOM 脚本结合使用：

```
document.querySelector('#select_ctrl_id').innerHTML = opt.join(''); 
```

[**JSFiddle**](http://jsfiddle.net/rKc9Q/)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-25T06:21:12.617

尝试旧时尚方式[http://www.w3schools.com/jsref/met_select_add.asp](http://www.w3schools.com/jsref/met_select_add.asp)

```
var x=document.getElementById("mySelect");
var option=document.createElement("option");
option.text="Kiwi";
try
  {
  // for IE earlier than version 8
  x.add(option,x.options[null]);
  }
catch (e)
  {
  x.add(option,null);
  } 
```

# wpf - 半透明控件上的不透明控件

> ID：14516398
> 
> 赞同：5
> 
> 时间：2013-01-25T06:16:31.210
> 
> 标签：wpf, controls, transparency

我有一个 StackPanel，里面有一些按钮。我希望 StackPanel 是半透明的，但按钮保持不透明。我已经在谷歌上搜索了一段时间，但仍然无法弄清楚这一点。我可以找到在半透明窗口上具有不透明控件的解决方案，但不能在半透明控件上找到不透明控件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T09:20:37.613

当您说半透明 StackPanel 时，您当然是指 StackPanel 的`Background`. 您始终可以将其设置为不透明度小于 1 的画笔。在纯色背景的情况下，这将是[SolidColorBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush.aspx)：

```
<StackPanel>
    <StackPanel.Background>
        <SolidColorBrush Color="Red" Opacity=".5"/>
    </StackPanel.Background>
    ...
</StackPanel> 
```

或者您只需使用具有适当 alpha 值的颜色：

```
<StackPanel Background="#7FFF0000"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:29:39.407

啊哈！！我一问就自己想出来了（它带来了我在解决塞尔达谜题后总是得到的同样有益的感觉）。

我没有将我的不透明控件放在半透明控件中，而是在网格中放置了一个不透明度设置为 0.5 的边框控件，然后将我的 StackPanel 添加到相同的网格位置，以便它只是覆盖它。

# java - 在单个线程中排队多个操作

> ID：14516401
> 
> 赞同：-1
> 
> 时间：2013-01-25T06:16:45.650
> 
> 标签：java, android, multithreading

我正在设计一个应用程序，我需要不时下载多个图像。但是，我希望每当我发送下载请求时，它都应该排队到单个线程而不是产生多个线程。

如果您能为我提供详细的解决方案，我将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:24:47.427

我会看看[`Executors.newFixedThreadPool()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)方法。它创建了一个线程池，它一次只运行尽可能多的线程，就像你在函数中传递的一样大。如果您通过 1，它将一次只运行一个线程，因此您的下载将按顺序进行，但在“一个”不同的线程上。

在你[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)用这个方法创建你之后，你只需要在它的方法中传递一个`Runnable`/ ，它就会执行它。完成后不要忘记。`Callable``submit()``shutdown()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:53:57.557

您可以创建自己的队列并将所有图像请求放在那里。使用 android AsynkTask，但只有在上一个任务完成后才开始新任务（棘手的方式）。

或者创建一个执行器服务来顺序下载图像（很难，重新发明轮子）。

或者在 github 上找到任何适用于 Android 的 ImageDownloader。有几个支持单线程下载。[这个很受欢迎。](https://github.com/nostra13/Android-Universal-Image-Loader)（简单的方法）

PS 你可以让 android AsyncTask 顺序执行，但它在 API 11+ 中受支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:25:24.650

如果您在活动中进行设计，您可以使用 AsyncTask，它使用执行程序处理线程并为您管理它们。如果您正在使用一项服务，只需在单个线程中逐个下载文件，请在一段时间不活动或出现错误数后中断并重新启动线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:46:51.333

Metova [Android SDK](https://github.com/metova/metova-android-sdk)有一个名为[`ThreadPoolWorker`](https://github.com/metova/metova-android-sdk/blob/master/metova-android-core/src/com/metova/android/util/thread/ThreadPoolWorker.java). 它的工作方式与 完全相同`AsyncTask`，但有一个将[`ThreadPool`](https://github.com/metova/metova-android-sdk/blob/master/metova-android-core/src/com/metova/android/util/concurrent/ThreadPool.java)对象作为参数的构造函数，可以限制为一个线程。该`ThreadPool`对象可以在各种`ThreadPoolWorker`对象之间重用，并且每个`TheadPoolWorker`的`doInBackground`方法将基本上按照它们启动的顺序执行。

这是一个简单的例子：

```
private static final ThreadPool THREAD_POOL = new ThreadPool(1);

private void executeSomeWorkers() {

    new MyThreadPoolWorker().execute("Jimmy");
    new MyThreadPoolWorker().execute("Bobby");
    new MyThreadPoolWorker().execute("Ronny");
}

private class MyThreadPoolWorker extends ThreadPoolWorker<String, Void, Object> {

    public MyThreadPoolWorker() {

        super(THREAD_POOL);
    }

    @Override
    protected Object doInBackground(String... params) {

        // Fun background stuff goes here!
    }
} 
```

# java - 继承后行为正在改变

> ID：14516403
> 
> 赞同：0
> 
> 时间：2013-01-25T06:16:54.077
> 
> 标签：java, inheritance

我有一个以下 ApplContext 类。
[http://codetidy.com/4498/](http://codetidy.com/4498/)（这是400行文件。无需完整阅读此文件。）

下面的类是在类之上的扩展。

```
public class validatorApplContext extends ApplContext {

    private static final String FAKE_FILE_NAME = "file://";
    private static final String USER_MEDIUM_ALL = "all";
    private static final String CSS_VERSION_3 = "css3";
    private static final String PROFILE_NONE = "none";
    private static final int DEFAULT_WARNING_LEVEL = 0;

    public validatorApplContext(String lang) {
        super(lang);
    }
} 
```

现在我有另一个类返回 ApplContext 对象。

```
public class ApplContextFactory {

    private static final String FAKE_FILE_NAME = "file://";
    private static final String USER_MEDIUM_ALL = "all";
    private static final String CSS_VERSION_3 = "css3";
    private static final String PROFILE_NONE = "none";
    private static final int DEFAULT_WARNING_LEVEL = 0;

    public static ApplContext getApplContext(String lang) {
        ApplContext ac = new ApplContext(lang);
        ac.setWarningLevel(DEFAULT_WARNING_LEVEL);
        ac.setCssVersion(CSS_VERSION_3);
        ac.setProfile(PROFILE_NONE);
        ac.setMedium(USER_MEDIUM_ALL);
        ac.setFakeURL(FAKE_FILE_NAME);
        ac.setTreatVendorExtensionsAsWarnings(true);
        return ac;
    }
} 
```

现在在我正在做的 ApplContextFactory 类中

```
ApplContext ac = new ApplContext(lang); 
```

客户端的每件事都运行良好。但是当我在做

```
ApplContext ac = new validatorApplContext(lang); 
```

它不工作。看起来继承引起了一些问题。

如果您能够确定问题，请提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:21:15.143

在 Java 中，当您有一个具有属性的类时，您**不能**在继承时覆盖它，就像使用方法一样。属性只是工作方式不同。

您可以添加另一个具有相同名称的属性，这就是您所做的。所以你的 ApplContextFactory 有两个名为 FAKE_FILE_NAME 的字段，一个在 ApplContextFactory 中定义，一个在 validatorApplContext 中。读取哪一个**不取决于实例类型**，就像方法一样。它仅取决于引用的类型。所以：

```
// an object with two FAKE_FILE_NAME attributes
validatorApplContext vac = new validatorApplContext ();
ApplContext AC= ac; // the same object, just a different variable

System.out.println(v.FAKE_FILE_NAME) //  this reads from validatorApplContext
ac.FAKE_FILE_NAME = "test"; // this sets in ac, because this is the type of the variable
System.out.println(v.FAKE_FILE_NAME) //  no change visible here
System.out.println(ac.FAKE_FILE_NAME) //  change visible here. 
```

您可能会说对方法的访问是动态的（使用运行时可用的信息），而对属性的访问是静态的（仅使用编译期间可用的类型）。如果要使用多态，则需要使用方法。

在您的情况下， ApplContext 中的所有代码都会看到 FAKE_FILE_NAME 的原始值，validatorApplContext 中的所有代码都会看到构造函数中设置的值。

最简单的解决方案是将 getter 和 setter 添加到两个类（不是静态的！），这将获取和设置所有静态字段。吸气剂将相互覆盖。但是您仍然会有两个属性副本，这似乎不是您真正想要做的。

坦率地说，代码看起来有点错误。好像您对某种脚本语言有丰富的经验，并尝试用 Java 构建您的第一个更大的项目，遵循的做法并不真正适合并且与语言的本质背道而驰。如果是这样，预计会有更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T08:18:33.677

如果您的客户执行以下操作：

`ApplContext ac = ApplContextFactory.getInstance(language); logger.log(ac.DEFAULT_WARNING_LEVEL, message);`

这将获得在 ApplContext 中定义的 DEFAULT_WARNING_LEVEL 的值，即使 ac 在运行时具有 ValidatorApplContext 类型。静态引用的绑定是在编译时确定的，并且 ac 将 ApplContext 作为声明的类型。

# java - 在 Ruby (JRuby) 中包装现有 Java 库的最佳方法

> ID：14516410
> 
> 赞同：8
> 
> 时间：2013-01-25T06:17:22.867
> 
> 标签：java, jruby

我希望将一个 ruby​​ (JRuby) 包装器放在一个中型 Java 库上，并且正在寻找关于从包装到策略的所有最佳实践的建议和文章。

我在这里找到了关于这个主题的相对过时的（2009 年）讨论：[http](http://www.ruby-forum.com/topic/188447) ://www.ruby-forum.com/topic/188447 。

我正在寻找使用最新版本的 JRuby。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T21:13:02.857

我已经为 Java 库（[Eurydice](https://github.com/iconara/eurydice)、[HotBunnies](https://github.com/ruby-amqp/hot_bunnies)、[MessagePack](https://github.com/iconara/msgpack-jruby)、[Rubydoop](https://github.com/iconara/rubydoop)和[Mikka](https://github.com/iconara/mikka)等）编写了一些包装器。其中一些只是适应 Java 库的 JRuby 代码，其中一些包含与 JRuby 运行时接口的 Java 代码（[MessagePack](https://github.com/iconara/msgpack-jruby)实际上完全用 Java 编写）。

我发现没有很好解决的问题是如何为 Java 库发送 JAR 文件。您不想将它包含在 gem 中，因为那样您最终会陷入 JAR 地狱。像 Netty 这样的通用 Java 库将捆绑在许多 gem 中，最终您将拥有捆绑不兼容版本的 gem。我已经通过打包仅包含 Java 库 JAR 的 gem（参见例如[scala-library-jars](https://rubygems.org/gems/scala-library-jars)和[ning-compress-jars](https://rubygems.org/gems/ning-compress-jars)）然后让我的包装器依赖于该 gem 解决了这个问题。它不是一个特别可扩展的解决方案，但至少它比将 JAR 捆绑在包装器 gem 中更易于管理。

你的问题不是很清楚你想知道什么，我建议你修改并更具体。但是，这里有一些随机的事情在我的脑海中

*   让 Ruby 更容易访问 Java API 的一种快速方法是向 Java 类和接口添加方法。这就像打开一个 Ruby 类一样简单（但 Java 接口是模块），并且可以使在 Ruby 中处理 Java 对象变得更加容易。这些方法只会被 Ruby 看到，它们不会被 Java 代码看到。
*   不要`java_import`进入全局范围。会给大家带来很多麻烦。请记住，这`java_import`不像`import`在 Java 中它只是文件的本地文件，它实际上是在范围内创建一个别名。包装`java_import`和`include_package`模块。
*   不要使用`import`——它与 Rake 不兼容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T21:35:11.233

wiki 页面：[Scripting Java from JRuby (jruby 1.0+)](http://kenai.com/projects/jruby/pages/CallingJavaFromJRuby)包含极好的建议和想法，您可以利用它们来获取包装器

我认为使用模块名称来确定对导入的 Java 类的访问范围很有趣

例如：创建一个名为*JavaLangDemo*的 Ruby 模块，其中包含 Java 包 java.lang 中的类。

```
 module JavaLangDemo
   include_package "java.lang"
   # alternately, use the #import method
   import "java.lang"
 end 
```

现在，您可以使用 JavaLangDemo:: 作为所需 Java 类名称的前缀，以访问包含的类：

```
 version = JavaLangDemo::System.getProperties["java.runtime.version"]
 => "1.5.0_13-b05-237"
 processors = JavaLangDemo::Runtime.getRuntime.availableProcessors
 => 2 
```

本文还解释了以下主题：

*   在 Ruby 中实现 Java 接口
*   Java和Ruby之间的类名歧义
*   在 JRuby 中“混入”多个 Java 接口到 Jruby 模块
*   异常处理
*   线程安全的对象同步

并包含指向“相关文章”的有用链接列表，以获取有关 Java 集成层的更多信息

# android - 如果没有网络，使用传输管理器等待很长时间的 Amazon s3 上传

> ID：14516412
> 
> 赞同：0
> 
> 时间：2013-01-25T06:17:33.230
> 
> 标签：android, web-services, amazon-web-services, amazon-s3

我正在使用传输管理器将视频上传到亚马逊 s3。在调用异步上传方法后，我正在调用 waitForUploadResult()。

如果网络不可用，则流量将被阻塞，直到网络恢复。如果长时间没有网络，甚至不会抛出异常。

如果网络不可用超过 5 分钟，我需要得到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:03:26.690

[TransferManager](http://docs.aws.amazon.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/services/s3/transfer/TransferManager.html)由[AmazonS3Client](http://docs.aws.amazon.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html)支持。[您可以通过将自定义的ClientConfiguration](http://docs.aws.amazon.com/AWSAndroidSDK/latest/javadoc/com/amazonaws/ClientConfiguration.html)对象传递给客户端来配置 S3 客户端的超时。我希望这将有所帮助。

# html - 隐藏 CSS 选择器规则的元素

> ID：14516417
> 
> 赞同：6
> 
> 时间：2013-01-25T06:17:57.473
> 
> 标签：html, css, css-selectors

我正在尝试构建一个具有手风琴风格功能的 HTML 页面。首先，我有这个简单的 CSS 选择器，说明“如果 H1 紧跟在另一个 H1 之后，则将背景设为红色”。

```
<style type="text/css">
    h1 + h1 
    {
        background-color: red;
    }
</style> 
```

然后是一些纯 HTML：

```
<h1>First</h1>
<p>Blah, blah...</p>
<h1>Second</h1>
<p>Blah, blah...</p>
<h1>Third</h1>
<p>Blah, blah...</p> 
```

所有的 H1 看起来都应该，没有一个有红色背景，因为它们前面有一个 P 标签。

为了这：

```
<h1>First</h1>
<h1>Second</h1>
<p>Blah, blah...</p>
<h1>Third</h1>
<p>Blah, blah...</p> 
```

第二个 H1 有红色背景，因为它和前一个 H1 之间的 P 标签被删除了。非常好。

现在，我*真正*想做的是以编程方式隐藏 H1 下方的“内容”，然后我希望看到红色规则生效。像这样：

```
<h1>First</h1>
<p>Blah, blah...</p>
<h1>Second</h1>
<p style="display: none">Blah, blah...</p>
<h1>Third</h1>
<p>Hello world...</p> 
```

但是由于P标签还在，CSS规则不适用于第三个H1，也没有红色背景。

**问题：有没有办法使用 JavaScript 将某些东西应用到 P 标签上，这会导致它们（暂时）被 CSS 规则忽略？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:21:26.420

啊，我在写问题的时候突然想到了。因此，为了将来参考，这是我自己的解决方案：

为红色背景添加第二条规则，简单地说明“H1 在 H1 之后或 H1 在任何带有‘隐藏’类集的标签之后”：

```
h1 + h1, .hidden + h1
{
    background-color: red;
} 
```

还有一个简单的隐藏类：

```
.hidden
{
    display: none;
} 
```

然后我可以简单地在内容 P 标签中添加一个“隐藏”类：

```
<h1>First</h1>
<p>Blah, blah...</p>
<h1>Second</h1>
<p class="hidden xxx">Blah, blah...</p>
<h1>Third</h1>
<p>Hello world...</p> 
```

中提琴，第三个H1是红色的。:) 而且我可以将我需要的任何其他类（“xxx”）应用于内容 P 标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:22:22.363

如果您要使用内联样式隐藏内容，这应该可以工作：

```
h1 + h1, p[style*="display: none"] + h1 {
    background-color: red;
} 
```

检查**演示**：http: [//jsfiddle.net/qFyUc/](http://jsfiddle.net/qFyUc/)

# javascript - 使用原型继承的子类 THREE.Mesh

> ID：14516425
> 
> 赞同：2
> 
> 时间：2013-01-25T06:19:06.097
> 
> 标签：javascript, three.js

我正在尝试`THREE.Mesh`像下面这样子类化（[THREE.Mesh](https://github.com/mrdoob/three.js/blob/master/src/objects/Mesh.js)继承自[THREE.Object3D](https://github.com/mrdoob/three.js/blob/master/src/core/Object3D.js)）。

```
Planet = function(geometry, material) {
    THREE.Mesh.call(this);

    this.geometry = geometry;
    this.material = material;
};

Planet.prototype = Object.create(THREE.Mesh.prototype); 
```

当我传入 a 时，它似乎工作正常`SphereGeometry`，只是**没有**像我只使用 a那样设置`boundRadius`属性。场景绘制正确。 **`THREE.Mesh`**

 **但是，当我传入 a`CubeGeometry`时，渲染循环变得非常不开心。

```
Uncaught TypeError: Cannot read property 'radius' of null three.min.js:105
THREE.Frustum.intersectsObject three.min.js:105
render three.min.js:414
starsgl.Application.render Application.js:60
starsgl.Application.animate Application.js:55
starsgl.Application Application.js:50
(anonymous function) 
```

我模仿了`Three.js`使用. 我一定是错过了什么。`THREE.Object3D``THREE.Mesh`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:39:38.810

未调用半径，因为未设置几何。

```
Planet = function(geometry, material) {
  THREE.Mesh.call(this,geometry,material);
};

Planet.prototype = Object.create(THREE.Mesh.prototype); 
```**

# php - 使用最新 PHP 5.4.11 处理旧 PHP 代码的问题

> ID：14516426
> 
> 赞同：1
> 
> 时间：2013-01-25T06:19:07.207
> 
> 标签：php, regex

我在 9 年前使用了一个 PHP 脚本。

将 PHP 版本更新到最新的稳定版本（PHP 5.4.1.1）后，我的脚本不再工作。

我找到了问题区域，谁能帮我把这个旧的 PHP 代码转换为最新的 PHP 5.4.11。

```
if ((strlen($user_name)<$nick_min_length) or (strlen($user_name)>$nick_max_length)) {
    $error_text ="$w_incorrect_nick<br><a href=\"index.php\">$w_try_again</a>";
    include($file_path."designes/".$design."/error_page.php");
    exit;
}
if (ereg("[^".$nick_available_chars."]", $user_name)) {
    $error_text ="$w_incorrect_nick<br><a href=\"index.php\">$w_try_again</a>";
    include($file_path."designes/".$design."/error_page.php");
    exit;
}
if (strtolower($user_name) == strtolower(strip_tags($w_rob_name))) {
    $error_text ="$w_incorrect_nick<br><a href=\"index.php\">$w_try_again</a>";
    include($file_path."designes/".$design."/error_page.php");
    exit;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T06:21:01.113

```
if (ereg("[^".$nick_available_chars."]", $user_name)) { 
```

应该：

```
if (preg_match("/[^" . preg_quote($nick_available_chars) . "]/", $user_name)) { 
```

`ereg()`已弃用，不应使用。此外，使用[preg_match()](http://us3.php.net/manual/en/function.preg-match.php)你想确保你的变量中的特殊字符被正确转义，所以你会使用[preg_quote()](http://us3.php.net/preg_quote)并且正则表达式需要[delimiters](http://us3.php.net/manual/en/regexp.reference.delimiters.php)，我`/`在这种情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:23:42.527

问题在于`ereg`它现在已弃用，可能会在此版本中删除。

使用`preg_match`而不是`ereg`

# sql-server - 字符串数据长度不匹配delphi+sql server 2008

> ID：14516436
> 
> 赞同：1
> 
> 时间：2013-01-25T06:19:49.817
> 
> 标签：sql-server, delphi, bde

在我的一个应用程序中，我使用 Delphi 7、Sql server 2008 R2、BDE，我使用 Sql server 本机客户端驱动程序通过 odbc 使用 bde 连接数据库。

插入始终有效，但某些地方编辑失败，Delphi 引发 EDBEngineError [Sql native client 10.0] 字符串数据长度不匹配。

我在表中有 4 个文本字段（sql 数据类型 TEXT），如果我评论这些字段行编辑工作。

请任何人帮助解决这个问题？

我知道 BDE 已贬值，但这是数据库迁移。这是一个大型应用程序，所以我不想从 BDE 更改。除上述情况外，一切正常。

[原谅我的英语不好]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:27:24.460

恐怕BDE是这里的原因。BDE 从未设计为与 SQL Server 2008 或更高版本一起使用。我们最近在这里遇到了与 informix 类似的问题（访问冲突也与错误的字符串长度有关）。

您可以做些什么来真正确定 BDE 是否是问题所在，捕获获取字符串长度错误的 sql 语句，并直接使用 ODBC 驱动程序执行相同的 SQL，而中间没有 BDE 层（例如，来自某些 SQL -通过 ODBC 连接的编辑器）。我打赌你不会再遇到问题了。

# java - 从某些站点的 html 页面中提取标题

> ID：14516437
> 
> 赞同：1
> 
> 时间：2013-01-25T06:19:55.253
> 
> 标签：java, html, jsoup

我正在尝试使用 jsoup 从特定站点[http://www.justdial.com](http://www.justdial.com)提取网页的标题，如下所示：

```
 Document doc=jsoup.connect("http://www.justdial.com/Mumbai/Satkar-Veg-Restaurant-%3Cnear%3E-Sahakar-Nagar-Next-To-Talwalkars-Gym-Wadala/022P5318248_TXVtYmFpIFJlc3RhdXJhbnRz_BZDET").get();
    String title=doc.title();
    System.out.println("Title="+title); 
```

它给了我一个标题字符串，它甚至不在该页面的源代码中的任何位置，但可以在浏览器中查看。但是对于来自不同站点的所有页面，它都可以正常工作。那么任何人都可以给出背后的原因是什么以及如何在这种情况下获得预期的结果。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:42:03.210

您应该设置用户代理标头，以便网站为您返回合适的 html

```
Document doc = Jsoup.connect("http://www.justdial.com/Mumbai/Satkar-Veg-Restaurant-%3Cnear%3E-Sahakar-Nagar-Next-To-Talwalkars-Gym-Wadala/022P5318248_TXVtYmFpIFJlc3RhdXJhbnRz_BZDET").userAgent("Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.120 Safari/535.2").get();
String title = doc.title();
System.out.println(title); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:24:50.413

如果给定页面的标题是通过 Javascript 更新的，它将无法在源代码中查看，也无法被脚本抓取。

您可以使用 webdeveloper 工具中的“查看生成的源”菜单项将原始源与生成的源进行比较

# android - 如何使用我的相机录制视频并上传到 android 中的 wowza 服务器？

> ID：14516446
> 
> 赞同：0
> 
> 时间：2013-01-25T06:20:41.790
> 
> 标签：android, video-streaming, wowza

我如何使用我的 android 手机录制视频并上传到 android 中的 wowza 服务器。我尝试了许多代码。我可以使用此代码[http://code.google.com/p/android-recorder/](http://code.google.com/p/android-recorder/)将音频上传到 wowza 服务器。但我也需要视频。现在我只想用我的相机录制视频，然后上传到 wowza 服务器。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T09:44:37.430

这是一个教程，您需要在 android 设备中以 MP4 格式录制视频。

[http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android](http://www.codeproject.com/Articles/107270/Recording-and-Playing-Video-on-Android)

录制完视频后，您需要将此视频上传到 Wowza 内容目录。

# python - 使用 celery 输出到文件

> ID：14516447
> 
> 赞同：4
> 
> 时间：2013-01-25T06:20:47.030
> 
> 标签：python, multithreading, celery

我正在尝试使用 Celery 输出到多个文件。任务非常简单：

*   获取一些数据以及文件路径
*   将该数据附加到文件路径（如果文件不存在则创建文件）

我不想每次都打开/关闭文件句柄，因为在很多情况下我会写入同一个文件。所以我做了一个简单的 FileHandlePool。

但是，在运行时，我注意到对于每个线程/实例，celery 都会创建一个新的 FileHandlePool！所以，我有被覆盖的文件。

处理这种情况的最佳方法是什么？是否可以让 m FileHandlePool 在与主线程相同的范围内并让其他 celery 线程访问它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:28:54.690

芹菜线程似乎没有共享该池。理想的方法是为单个进程分配写入文件的任务，并且所有 celery 线程都应通过队列写入该进​​程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:51:07.313

如果我不想让单独的服务（在 Celery 之外）同步到文件，我在 Celery 中完成此操作的方法是将一个工作池（并发 1 的池）绑定到仅接受文件的特定队列写任务。这种方式任务是串行运行的，并且在编写时不会有任何竞争条件。

或者，正如您最初建议的那样，您可以更改您的 CELERYD_POOL 模式以使用线程，然后将文件句柄引用存储在您的任务实例上，以便您可以从不同的工作线程访问它。我假设文件句柄是线程安全的。

# jquery-dropkick - 当 dropkick 样式的下拉菜单包含多个项目时，不调用 Ajax 回调函数

> ID：14516449
> 
> 赞同：0
> 
> 时间：2013-01-25T06:20:54.967
> 
> 标签：jquery-dropkick

我有一个包含许多 dropkick 样式下拉列表的 aspx 页面。页面中的某些下拉菜单只有一个项目，而同一页面中的某些下拉菜单可能有多个项目。每个下拉菜单都有一个 onchange 事件（javascript），当用户选择下拉菜单中的项目时，该事件会调用 Ajax 函数。

从 dropkick.js 文件调用 Ajax 函数

```
if ($option.parents('.dk_container').siblings('select').attr('type') == "AttributeValue") {

    //for changing the details of a product when the product attribute is changed
     var selectedItemValue = ''; //the value of the current
     var dropDownName = '';
     selectedItemValue = parseInt($option.attr('data-dk-dropdown-value'));
     dropDownName = $option.parents('.dk_container').siblings('select').attr('name');

     /*javascript function that calls the Ajax function */
     ChangeProductDetails(selectedItemValue, dropDownName);
            } 
```

问题是当用户在包含多个项目的下拉列表中选择一个项目时，会调用 Ajax 函数，但不会调用 Ajax 回调函数。

如果下拉列表仅包含一项，则按预期调用 Ajax 回调函数。

提前感谢您的任何提示

问候

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:41:53.080

DropKicks 看起来像这样：

```
 $('.change').dropkick({  
     change: function (value, label) {  
     alert('You picked: ' + label + ':' + value);  
       }  
 }); 
```

Multiselect Widget 有一个如下所示的单击事件：

```
 $("#multiselect").bind("multiselectclick", function(event, ui){ 
```

/* event：原始事件对象

```
 ui.value: value of the checkbox

 ui.text: text of the checkbox

 ui.checked: whether or not the input was checked

 or unchecked (boolean) 
```

*/

});

您必须以这种方式附加您的更改事件逻辑

我有这个给你..看看它...

**已编辑**

```
<script type="text/javascript" src="Your-JQueryDropKick_JS_file_path"></script>

 <script type="text/javascript" language="javascript">

    $(document).ready(function () {

   // Logic Code
     $('.change').dropkick({  
         change: function (value, label) {  
         alert('You picked: ' + label + ':' + value);  
         }  
      });
    });

</script> 
```

# php - 动态站点地图脚本提交站长工具？

> ID：14516458
> 
> 赞同：0
> 
> 时间：2013-01-25T06:21:31.117
> 
> 标签：php, sitemap, google-search-console

我为 Google 的网站管理员工具创建了一个动态`sitemap.php`脚本。`sitemap.xml`如何安排它每天运行脚本？当我在网站管理员工具中上传站点地图时，是否可以每天运行该脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:51:01.797

如果您托管支持，您可以设置 CRON 作业以每天运行一次 sitemap.php。

Google 将尽可能多地搜索您的 sitemap.xml。只要您设置一个每天运行您的 sitemap.php 的 CRON 作业，只要谷歌访问您的 sitemap.xml，它就应该是最新的（在 24 小时内）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:33:07.720

您有两个选择
1）创建 sitemap.php 以便它回显站点地图 XML 并通过 .htaccess 创建重写规则，以便 sitemap.xml 与 sitemap.php 映射，然后您可以提交 url www.website.com/sitemap.xml 到谷歌

此选项将使谷歌自动捕获新链接，无需自动化脚本。

2）其他选项是让sitemap.php创建单独的文件sitemap.xml，您可以提交相同的网址www.website.com/sitemap.xml

在此选项中，您需要安排 sitemap.php 文件使用 crontab 定期运行。[您可以在此处](http://linux.about.com/od/commands/l/blcmdl5_crontab.htm)了解有关 crontab的更多信息

* * *

但是不要将 www.website.com/sitemap.php 提交给谷歌，它不会工作 AFAIK。

# c# - automapper：映射依赖于其他属性

> ID：14516465
> 
> 赞同：1
> 
> 时间：2013-01-25T06:21:54.237
> 
> 标签：c#, automapper

我有两个对象：

```
public class Info
{
   public string ArtificialPerson {get; set;}
   ...
}

public class DtoInfo
{
   public string FullName {get; set;}
   public bool IsLegal {get; set;}
} 
```

我想做以下事情，如果`IsLegal`是真的那么映射`FullName`到`ArtificialPerson`. 我怎样才能做到这一点？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:37:04.503

您应该设置一些映射配置：

```
 Mapper.CreateMap<DtoInfo, Info>().ForMember(info => info.ArtificialPerson, configExpr => 
        { 
            configExpr.MapFrom(dtoInfo => dtoInfo.FullName);
            configExpr.Condition((DtoInfo dtoInfo) => dtoInfo.IsLegal);
        });

        var info1 = Mapper.Map<Info>(new DtoInfo
        {
            FullName = "Lemons",
            IsLegal = true
        });

        Console.WriteLine(info1.ArtificialPerson); // displays "Lemons"

        var info2 = Mapper.Map<Info>(new DtoInfo
        {
            FullName = "Cocaine",
            IsLegal = false
        });

        Console.WriteLine(info2.ArtificialPerson); // displays null string 
```

# php - php curl上传在我的服务器上不起作用

> ID：14516467
> 
> 赞同：0
> 
> 时间：2013-01-25T06:22:00.080
> 
> 标签：php, file-upload, curl

我的 php curl 上传脚本在 localhost 上成功运行，但在服务器上没有运行。curl 对于简单的发布工作正常，但不适用于发布文件。一旦我开始将文件添加到我的帖子数据（在文件路径前加上 @ 前缀），它在服务器上什么也没有显示（$_FILE 和 $_POST 都未设置），而没有文件，$_POST 被填充。我也在我的本地主机和服务器上使用以下脚本。

```
$request_url = 'http://localhost/curl_upload/curl_upload_process.php';
$post_params['uploadfile'] = '@'.'D:\images\photo-b4.jpg';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $request_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_params);
$result = curl_exec($ch);
curl_close($ch); 
```

我已将 request_url 更改为服务器上的 curl_upload_process.php 文件。它在本地主机上可以正常工作，用于简单的帖子和文件上传，但不能在服务器上仅用于文件上传。请让我知道是什么导致我的服务器上的脚本出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:16:10.787

嗨，经过大量挖掘后，我发现您可以使用 scp 命令，它使用 SSH（安全 SHell）协议，并且 php 有库可以在 php 代码中使用它，但是您需要让服务器允许 scp 连接

```
<?php
$connection = ssh2_connect('shell.example.com', 22);
ssh2_auth_password($connection, 'username', 'password');
ssh2_scp_send($connection, '/local/filename', '/remote/filename', 0644);
?> 
```

更多细节可以在[scp+php](http://php.net/manual/en/function.ssh2-scp-send.php)找到希望这可以帮助你:)。请根据您的需要进行更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:34:25.420

我想问题是当服务器中的代码正在执行时，文件是在你的机器上`@'.'D:\images\photo-b4.jpg';`而不是从你的机器上归档的

在本地主机的情况下，您的机器和服务器是相同的，因此它会找到物理上位于`@'.'D:\images\photo-b4.jpg';`

如果您要上传什么文件，您需要在运行时发出整个 Web 表单请求并将其发布到服务器

尝试这样的事情：-它不是您需要相应更改的确切代码

```
 $requestparameters["title"] = $filetitle;

    $content = file_get_contents($_FILES['uploadingfile']['tmp_name']);
    $filefieldname = (array_keys($_FILES));
    $delimiter = '-------------' . uniqid();
    $filefields = array(
    'file1' => array(
    'name' => $_FILES['uploadingfile']['name'],
    'type' => $_FILES['uploadingfile']['type'],
    'content' => $content),
    );
    $data = '';
    foreach ($requestparameters as $name => $value) {
        $data .= "--" . $delimiter . "\r\n";
        $data .= 'Content-Disposition: form-data; name="' . $name . '";' . "\r\n\r\n";
        // note: double endline
        $data .= $value . "\r\n";
    }
    foreach ($filefields as $name => $file) {
        $data .= "--" . $delimiter . "\r\n";
        // "filename" attribute is not essential; server-side scripts may use it
        $data .= 'Content-Disposition: form-data; name="' . $filefieldname['0'] . '";' .
        ' filename="' . $file['name'] . '"' . "\r\n";
        // this is, again, informative only; good practice to include though
        $data .= 'Content-Type: ' . $file['type'] . "\r\n";
        // this endline must be here to indicate end of headers
        $data .= "\r\n";
        // the file itself (note: there's no encoding of any kind)
        $data .= $file['content'];
   }
   $data .= "\r\n"."--" . $delimiter . "--\r\n";
   $str = $data;
   // set up cURL
   $ch=curl_init($url);
    curl_setopt_array($ch, array(
       CURLOPT_HEADER => false,
       CURLOPT_RETURNTRANSFER => true,
       CURLOPT_POST => true,
       CURLOPT_HTTPHEADER => array( // we need to send these two headers
            'Content-Type: multipart/form-data; boundary='.$delimiter,
            'Content-Length: '.strlen($str)
       ),
       CURLOPT_POSTFIELDS => $data,
   ));
   $ress =   curl_exec($ch);
   curl_close($ch); 
```

# asp.net - 使用 SqlDataReader 时出现无效操作异常，为什么？

> ID：14516468
> 
> 赞同：0
> 
> 时间：2013-01-25T06:22:04.667
> 
> 标签：asp.net, sqldatareader

这是我的代码：

```
public List<Remarks1> fillRemarks1List(RemarksRequest oei)
{
    List<Remarks1> mylist = new List<Remarks1>();
    SqlConnection sqlConn = new SqlConnection(strConn);
    sqlConn.Open();
    SqlCommand commInfo = new SqlCommand();
    commInfo.CommandType = CommandType.StoredProcedure;
    commInfo.CommandText = "dbo.SPQueryRemList";
    commInfo.Connection = sqlConn;

    commInfo.Parameters.Add(new System.Data.SqlClient.SqlParameter("@reqNo", System.Data.SqlDbType.Char, 20));
    commInfo.Parameters["@reqNo"].Value = "0200000458";//oei.reqNo1.ToString().Trim();
    commInfo.Parameters.Add(new System.Data.SqlClient.SqlParameter("@lgnId", System.Data.SqlDbType.Char, 10));
    commInfo.Parameters["@lgnId"].Value = oei.loginid.ToString().Trim();

    SqlDataReader rdr4;
    try
    {
        rdr4 = commInfo.ExecuteReader();

        while (rdr4.Read())
        {
            mylist.Add(new Remarks1(rdr4.GetString(7).Trim(), rdr4.GetString(8).Trim(), rdr4.GetString(0).Trim(), rdr4.GetString(5).Trim()));
        }

        rdr4.Close();
    }
    catch (Exception ex)
    {

    }
    finally
    {
        commInfo.Dispose();

    }
    sqlConn.Close();

    return mylist;
} 
```

服务：

```
[OperationContract]
[WebInvoke(Method = "POST",
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Wrapped,
    UriTemplate = "remarksList")]
List<Remarks1> fillRemarks1List(RemarksRequest oei); 
```

使用我的服务的 ajax 调用：

```
urlToHandler = 'http://localhost/WcfService/Service1.svc/remarksList';

var tempyear="";

$.ajax({
    url: urlToHandler,
    data:JSON.stringify({oei:{"loginid":userid}}),
    type: 'POST',
    dataType:"json",
    contentType: 'application/json',
    success: function(data) {    
        alert(data.fillRemarksListResult);
        $.each(data.fillRemarksListResult,function(key,val) {
        });
    },
    error: function(data, status, jqXHR) {                       
        alert('There was an error.');
    }
}); // end $.ajax 
```

我收到以下错误：

> rdr4.Depth 抛出 System.InvalidOperationException 类型的异常：关闭阅读器时调用 Depth 的尝试无效。
> 
> rdr4.FieldCount 抛出 System.InvalidOperationException 类型的异常：关闭阅读器时调用 FieldCount 的尝试无效。
> 
> rdr4.HasRows 引发 System.InvalidOperationException 类型的异常：关闭阅读器时调用 HasRows 的尝试无效。

为什么？

# time - 如何估计压缩一个又深又大的目录的时间？

> ID：14516473
> 
> 赞同：0
> 
> 时间：2013-01-25T06:22:35.407
> 
> 标签：time, zip

图像的静态服务器目录。子目录数约为4,000 文件数约为2,000,000 该目录总大小接近200G。

```
 zip -r images.zip ./* 
```

我想知道当我想压缩这个目录时如何估计时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:27:55.447

不同的操作系统有不同的应用程序，并且有许多应用程序，它们为用户提供了一些关于如何压缩文件的选项（例如：快速，压缩，...）。尝试在您的应用程序中查找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:28:04.230

`-dd`请注意选项`zip`。捕获`zip`进程的输出并将每个点与 的值相乘`-ds`。您可能需要熟悉进程间通信`exec`、`fork`和管道。

> ```
>  -dd
>    --display-dots
>           Display dots while each entry is zipped (except  on  ports  that
>           have  their  own progress indicator).  See -ds below for setting
>           dot size.  The default is a dot every 10 MB of input  file  pro-
>           cessed.   The -v option also displays dots (previously at a much
>           higher rate than this but now -v also defaults  to  10  MB)  and
>           this rate is also controlled by -ds. 
> ```

或者，您可以只阅读这些行并计算添加了多少文件与存在多少；考虑到尺寸可能差异很大，这不太精确。

您也可以只计算文件，但参考文件大小 - 这比计算点更容易，具有良好的准确性，但您会失去分辨率（至少在您已经处理多个文件之前）。

无论如何，`quantity_processed_so_far / time_so_far * total_quantity`应该给你一个总时间估计。

# java - java.security.NoSuchProviderException：没有这样的提供者：BC

> ID：14516475
> 
> 赞同：9
> 
> 时间：2013-01-25T06:22:51.533
> 
> 标签：java, bouncycastle

我正在使用 AdvancedInstaller 9.8 将我的 javacode (webapplication) 构建到安装程序。通常我的应用程序运行良好。使用 Advanced Installer 9.8 创建我的安装程序后，安装程序大小约为 55 MB。但是高级安装程序中有一个选项可以压缩为安装而制作的所有 jar。如果我压缩 jar，安装程序大小约为 16 MB。但是当我使用 Advanced Installer 9.8 进行压缩时，在执行 **KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA", "BC") 行时出现异常（如标题中所述）**；在我的代码中。**KeyPairGenerator 再次来自包 java.security.*;**

谁能告诉我，这个问题的原因可能是什么。我知道使用 AdvancedInstaller 压缩时，Advanced Installer 压缩可能会出现问题。但我的问题是，在 java 方面通常会出现什么问题来解决这个问题。（我的意思是可能是什么原因，比如任何文件都可能被损坏（或）等等任何其他原因）这样我就可以从那里开始工作了。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-06-19T21:11:28.190

在您的代码之前添加这一行：

```
Security.addProvider(new BouncyCastleProvider()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-01T07:40:35.717

您可以通过使用以下代码编辑 java.security 并创建静态块来添加安全提供程序：

```
static {
    Security.addProvider(new BouncyCastleProvider());
} 
```

如果您使用的是 maven 项目，则必须在项目的 pom.xml 文件中添加 BouncyCastleProvider 的依赖项，如下所示。

```
<dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcprov-jdk15on</artifactId>
            <version>1.47</version>
</dependency> 
```

如果您使用的是普通的 java 项目，那么您可以从下面给出的链接添加下载 bcprov-jdk15on-147.jar 并编辑您的类路径。

[http://www.java2s.com/Code/Jar/b/Downloadbcprovextjdk15on147jar.htm](http://www.java2s.com/Code/Jar/b/Downloadbcprovextjdk15on147jar.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-25T08:55:20.843

除了检查 jre 配置，您还需要检查

1.检查配置中是否设置了java home

2.查看应用使用的java环境

3.检查 \jre\lib\security\java.security 是否有 bouncycastle 提供程序条目。即security.provider.9=org.bouncycastle.jce.provider.BouncyCastleProvider

4.同时检查 bouncy castle jar 是否已添加到 \jre\lib\ext\ bcprov-jdk15on-147.jar（适用于 java 1.5 和 1.6 的最新版本）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-28T14:05:19.713

它通过替换最新的 bcprov-jdk15-.jar 得到修复。我以前的版本是 bcprov-jdk15-135.jar，它产生了上面提到的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-24T07:09:45.647

通过导入以下内容可以解决该问题：

```
import org.bouncycastle.jce.provider.BouncyCastleProvider; 
```

然后将以下代码放入您的类方法中：

```
Security.addProvider(new BouncyCastleProvider()); 
```

# java - 帮助按钮自动完成

> ID：14516485
> 
> 赞同：0
> 
> 时间：2013-01-25T06:24:10.343
> 
> 标签：java, android, android-layout, autocomplete, autocompletetextview

这是我的带有自动完成功能和 5 个按钮的布局。按钮中的文本是从活动类中设置的。使用字符串数组填充以自动完成即时消息。Buttons 中的文本是从活动中手动填充的。现在比赛会发生吗？在模拟器中，自动完成功能无法对其进行测试。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/white"
android:gravity="center_horizontal"
android:orientation="vertical" >

<AutoCompleteTextView
    android:id="@+id/autoCompleteTextView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight=".16"
    android:ems="10"
    android:text="Rule" >

    <requestFocus />
</AutoCompleteTextView>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b1"
            style="@style/buttons"
            android:layout_weight=".16"
           />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll41"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t1"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt1"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b2"
            style="@style/buttons"
            android:layout_weight=".16"/>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll42"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t2"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt2"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b3"
            style="@style/buttons"
            android:layout_weight=".16"/>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll43"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t3"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt3"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b4"
            style="@style/buttons"
            android:layout_weight=".16"/>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll44"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t4"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt4"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout style="@style/verticallayout" >

    <LinearLayout style="@style/verticallayout" >

        <Button
            android:id="@+id/b5"
            style="@style/buttons"
            android:layout_weight=".16"/>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll45"
        style="@style/horizontallayouthidden" >

        <TextView
            android:id="@+id/t5"
            style="@style/textview"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/tt5"
            style="@style/textview"
            android:layout_weight="0.5" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:enabled="false"
        android:text="Prev" />

    <Button
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:text="Next" />
</LinearLayout> 
```

如何 shd 我的活动类 b 以便当我在自动完成中键入名称时，填充带有该文本的按钮，并且所有按钮功能将继续工作..

# ios - 如何在uitableview中隐藏特定单元格高度的高度

> ID：14516486
> 
> 赞同：0
> 
> 时间：2013-01-25T06:24:11.863
> 
> 标签：ios, uitableview

单击按钮时如何在uitableviewcell中隐藏标签？

当我单击那个单元格高度应该减小并且单元格标签应该被隐藏的细节单元格按钮时，我在 tableviewcell 中有标签和按钮。

`enter code here`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
   {
   UIWebView *webView=(UIWebView*)[cell.contentView viewWithTag:999+indexPath.row];
    if(webView==nil)
    {

     webView =[[UIWebView alloc]initWithFrame:CGRectMake(100, 50, 700, 100)];
    [webView loadHTMLString:[text_Array objectAtIndex:indexPath.row] baseURL:nil];
    webView.backgroundColor=[UIColor clearColor];
    [cell.contentView addSubview:webView];
    webView.tag=indexPath.row+999;

    int hideWeb=[[webHideArr objectAtIndex:indexPath.row]intValue];
    if(hideWeb==1)
    {
        webView.hidden=YES;
    }
    else           
    {
        webView.hidden=NO;
    }
    }
   }

  -(void)reviewedCustomButtonClicked:(id)sender
   {
int irow=[sender tag]-222;

UITableViewCell *Cell=(UITableViewCell*)[progressTableView cellForRowAtIndexPath:    [NSIndexPath indexPathForRow:irow inSection:0]];

UIWebView *web=(UIWebView*)[Cell.contentView viewWithTag:irow+999];
isCustomReviewed=YES;

[webHideArr removeAllObjects];
for(int h=0;h<[array count];h++)
{
    [webHideArr addObject:@"0"];
}

if([btn currentImage]!=[UIImage imageNamed:@"arrow_up.png"])
{
    [btn setImage:[UIImage imageNamed:@"arrow_up.png"] forState:UIControlStateNormal];
    web.hidden=YES;
     [imgArr replaceObjectAtIndex:irow withObject:@"1"];
    [webHideArr replaceObjectAtIndex:irow withObject:@"1"];

}
else
{
    [btn setImage:[UIImage imageNamed:@"arrow_dwn.png"] forState:UIControlStateNormal];
    web.hidden=NO;
    [imgArr replaceObjectAtIndex:irow withObject:@"0"];
    [webHideArr replaceObjectAtIndex:irow withObject:@"1"];
}

increseCellHeight=[sender tag]-222;
decreaseCellHeight=[sender tag]-222;
[progressTableView reloadData];
 }

       - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
   {
    if(isCustomReviewed==YES)
     { 
         if (indexPath.section == 0 && indexPath.row == increseCellHeight)
        {

            return 150;
        }
        else
        {
            return 50;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:28:41.523

当您单击具有更新高度的按钮并隐藏标签时，您需要重新加载表格视图（[tableView reloadData]）

*   (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath

方法。

# java - GWT - 从 GWT 应用程序连接到 talk.google.com

> ID：14516487
> 
> 赞同：2
> 
> 时间：2013-01-25T06:24:24.310
> 
> 标签：java, gwt, xmpp, google-talk

我想从我的 GWT 应用程序连接到谷歌服务器，将谷歌聊天集成到我的应用程序中。我曾尝试使用 emite gwt 库，但连接到谷歌服务器所需的配置并没有成功。

对此的任何帮助都将受到高度赞赏。

尝试在 GWT 应用程序中使用 Emite 时出现以下异常。

```
00:01:07.158 [INFO] Thu Jan 24 16:54:19 IST 2013 com.calclab.emite.core.client.bosh.XmppBoshConnection SEVERE: Connection error #1: Bad status: 302 
```

在 web.xml 中

```
<servlet>
<servlet-name>Proxy</servlet-name>
<servlet-class>de.spieleck.servlets.ProxyServlet</servlet-class>
<init-param>
    <param-name>remotePath</param-name>
    <param-value>/http-bind/</param-value>
</init-param>
<init-param>
    <param-name>remoteServer</param-name>
    <param-value>talk.google.com</param-value>
</init-param>
<init-param>
    <param-name>remotePort</param-name>
    <param-value>5222</param-value>
</init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Proxy</servlet-name>
    <url-pattern>/http-bind</url-pattern>
</servlet-mapping> 
```

在 GWTModule.html 中

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="emite.httpBase" content="/http-bind">
<meta name="emite.host" content="talk.google.com">
<meta name="emite.session" content="login">
<meta name="emite.onBeforeUnload" content="logout">
<meta name="emite.user" content="abc@gmail.com">
<meta name="emite.password" content="xxxxx">
<meta name="emite.chat" content="xxxx@gmail.com"> 
```

我在这里想念什么？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:02:46.563

经过一些搜索和尝试 - 谷歌似乎没有自己的 bosh 端点来代理对谷歌 xmpp 服务器的请求。所以，不知何故 ProxyServlet 不适合我连接到谷歌服务器。

但现在我可以使用`JabberHTTPBind`. 我使用了捆绑`emite-0.4.7-proxies.jar`了`JabberHTTPBind`servlet 的 . 在 web.xml 中，添加了以下 servlet 映射

```
 <servlet>
        <servlet-name>Jabber HTTP Binding Servlet</servlet-name>
        <servlet-class>org.jabber.JabberHTTPBind.JHBServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jabber HTTP Binding Servlet</servlet-name>
        <url-pattern>/http-bind/*</url-pattern>
    </servlet-mapping> 
```

这对我有用。现在我可以使用 Emite 连接到谷歌服务器了。

# tridion - 如何获取 KeywordFieldDefinitionData 类型字段的类别的 TCM URI？

> ID：14516488
> 
> 赞同：6
> 
> 时间：2013-01-25T06:24:38.060
> 
> 标签：tridion, tridion-core-services

我想获取 KeywordFieldDefinitionData 类型字段的类别的 TCM URI。

我正在使用以下链接的代码来读取组件的元数据字段：-

[https://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata](https://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)

我可以在 Reference.cs 类中看到 Category 和 CategoryFields 属性（在给出对核心服务的引用时自动生成），但是 Field 类中没有定义属性（在上面的 code.google 链接中定义）来访问 Category 和 CategoryFields 属性。我尝试通过以下方式定义属性：-

```
 public System.Reflection.PropertyInfo Category
    {
        get { return definition.GetType().GetProperty("Category", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.NonPublic); }
    } 
```

即使上面不起作用，你们中的任何人都请分析并回复。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T14:00:35.323

您需要读取每个 SchemaField 定义数据并检查 Type 是否为`KeywordFieldDefinitionData`然后获取 Category 信息。请参阅下面的示例片段。

```
SchemaFieldsData schemaFields = (SchemaFieldsData)_client.ReadSchemaFields(
               "tcmuriofschema", true, readOptions);
foreach (ItemFieldDefinitionData schemaField in schemaFields.Fields) {
   switch (schemaField.GetType().Name) {
      // handle other fields..
      // CategoryLink Fields
      case "KeywordFieldDefinitionData":
               KeywordFieldDefinitionData keywordTextSchemaField = (KeywordFieldDefinitionData)schemaField;
               string LinkedCategoryTitle =  keywordTextSchemaField.Category.Title;
               string LinkedCategoryId = keywordTextSchemaField.Category.IdRef;
               break;
      default:
               break;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:12:57.647

我希望下面的代码解决了你的问题

```
 Publication publication = GetPublication();

            TcmUri uri = new TcmUri(int.Parse(_itemId), ItemType.Category, publication.Id.ItemId);
            _session = engine.GetSession();
            Category cat = new Category(uri, _session);

            Log.Debug("the uri is " + uri);
            Log.Debug("the cat is " + cat);

            Filter filter = new Filter();
            //filter.Conditions["IsRoot"] = true; // This works with Tridion 2011 only!

            List<Keyword> keys = cat.GetKeywords(filter) as List<Keyword>; 
```

在上面的代码中，您可以从 Cat 对象中获取 Category 信息，并从 keys 对象中获取所有关键字信息

# php - 系统输出未显示在 Web 浏览器 php 中

> ID：14516493
> 
> 赞同：0
> 
> 时间：2013-01-25T06:24:53.200
> 
> 标签：php, system, exec, output

我有一个在终端中测试过的命令，它工作正常，但是当我在脚本中调用该命令以在浏览器上显示输出时，它似乎不起作用。我的命令需要时间才能在终端中显示输出，这将是它不显示在浏览器上的原因。

```
set_time_limit (0); 
echo '<pre>';
$output=array();
$last_line = system('cat /home/me/dev/test/working/test_string.txt | java -jar /home/simon/logstash/build/logstash-1.1.10.dev-monolithic.jar agent -f /home/me/dev/test/working/my_itch_con.config',$output);
echo '</pre>';
echo "Complete";
print_r($output);
echo "<br>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:00:17.080

的参数`system`（它不会显示输出，它只是返回命令的状态）

**命令**

将要执行的命令。

**return_var**

如果 return_var 参数存在，则执行命令的返回状态将写入此变量。

/////////////////////////// **........ ..................................................... ....................** //////////////////////////// ///////////

```
Use `exec` command instead 
```

**命令**

将要执行的命令。

**输出**

如果存在输出参数，则指定的数组将填充命令的每一行输出。此数组中不包含尾随空格，例如 \n。请注意，如果数组已经包含一些元素，则 exec() 将附加到数组的末尾。如果您不希望函数附加元素，请在将数组传递给 exec() 之前对数组调用 unset()。

**return_var**

如果 return_var 参数与输出参数一起存在，则执行命令的返回状态将写入此变量。

**例如：-**

```
exec('whoami', $test, $arr);

print_r($test); 
```

在浏览器中它 o/p

```
Array ( [0] => nt authority\system ) 
```

欲了解更多信息

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:33:51.123

确认是否在块`system`中禁用 php.ini 中的功能`disable_function`

当设置 error_reporting(E_ALL) 显示所有错误

# windows - 控制音频/视频流服务器的流

> ID：14516497
> 
> 赞同：2
> 
> 时间：2013-01-25T06:25:39.893
> 
> 标签：windows, api, driver, device

我已经到处寻找答案，绝望中，我现在开始在这些类型的论坛上向任何可以给我一些见解的人提问！

我正在研究能够控制来自开源流服务器的音频和/或视频流。我正在寻找像 Icecast、Darwin 和 OggVorbis 这样的软件包。如果足够实用，我什至会考虑像 VLC 之类的东西。

我想要实现的是 - 如果许多客户端正在（通过 Internet Explorer）在特定的通道/端口组合上监听特定的音频或视频文件，我希望能够（作为所述流服务器的管理员）暂停/快退/快进他们正在收听的音频或视频文件，然后继续为客户播放文件。最终它将是一个简单的模拟 USB 设备，它将管理这些控件（我将简单地构建一个设备驱动程序，该驱动程序将能够使用我还将为流服务器构建的某种 API），但目前我只想找到一种从命令行获得这种级别控制的方法。

有没有人知道如何实现这一目标？

最初，我正在考虑使用 JWPlayer 之类的东西作为基于 IE 的音频（在这种情况下）客户端，因为它有一个可以写入的 API，然后通过该 API 控制播放/暂停/倒带/快进。但是，我无法从 USB 设备注册事件来控制 IE 中的事件。从与其他人的讨论中，可以通过用户模式应用程序带来这种级别的功能，只有 Chrome 才能真正实现，但是，我**不得不**使用 IE 作为客户端浏览器。

因此，我想知道是否可以有不同的方法来控制服务器对这些客户端的流，因此我的问题（和我的挫败感！）

想法/评论或问题！？

# ruby-on-rails - 我怎样才能在控制器中做到这一点？

> ID：14516504
> 
> 赞同：0
> 
> 时间：2013-01-25T06:27:08.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的模型中有这个。
但是，该模型用作多态模型，我希望有不同的条件。
如果我在控制器中执行此操作，我该如何编写代码？

**模型/comment.rb**

```
validates_length_of :body, 
                    :within => 10..100, 
                    :message => "must be between 10 to 100 characters" 
```

更新：

我只想在社区模型在评论模型中创建评论时使用此验证条件。评论模型是多态的！它有commentable_type 和commentable_id

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:30:38.697

不，你不能在控制器中做这样的事情。在您的模型中使用条件或将其放入社区模型中。

```
validates_length_of :body, 
                    :within => 10..100, 
                    :message => "must be between 10 to 100 characters", :if => "community?"

  def community?
    return self.commentable_type == "Community"
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:32:31.470

您必须在模型中执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:38:36.040

在你的模型中，

```
validates_length_of :body,
                    :when => [ :comment ],
                    :within => 10..100, 
                    :message => "must be between 10 to 100 characters" 
```

你可以使用`:unless`like ( `:unless => Community.new { |a| a.comment? }`)

此[链接](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_length_of)将帮助您根据需要理解和编辑。这只是`idea`为了解决您的问题。

# php - 如何从其他服务器php下载服务器上的pdf文件

> ID：14516505
> 
> 赞同：0
> 
> 时间：2013-01-25T06:27:10.167
> 
> 标签：php, cakephp, pdf

我陷入了一种情况，我必须`pdf`从绝对路径下载文件到我们的服务器，但我无法这样做。所有进程都在后台工作，我不希望前台用户看到后台会发生什么。

任何人都可以提供任何解决方案吗？也许它是如此简单，但我被困住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:36:01.743

您可以使用[复制](http://php.net/manual/en/function.copy.php)

```
$pdf = "http://wwww.somesite.com/something.pdf";
$pdf = str_replace(" ", "%20", $pdf);
$savedpdf = "/rootsomething/savedpdf/saved.pdf";
if(copy($pdf, $savedpdf)){
//The file was copied correctly 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:28:51.157

使用一些 HTTP 客户端库，如[PHP CURL](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:43:22.000

是的，您可以使用`PHP CURL`，但它会阻塞，直到您从外部资源接收文件。如果文件较重，则不是一个好的选择。您可能希望`cronjob`在该场景中运行您的脚本或使用一些多线程库，如[multirequest](http://code.google.com/p/multirequest/)

这是发出 http 请求的基本代码片段。我尚未对其进行测试，但您可以自己获得一些见解并对其进行调整/调试。

```
 function saveCompleteRequestToFile(MultiRequest_Request $request, MultiRequest_Handler $handler) {
    $filename = preg_replace('/[^\w\.]/', '', $request->getUrl());
    file_put_contents('directory_path_here' . $filename, $request->getContent());
}

$mrHandler = new MultiRequest_Handler();
$mrHandler->onRequestComplete('saveCompleteRequestToFile');

$headers = array();
$headers[] = 'Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5';
$headers[] = 'Cache-Control: no-cache';
$headers[] = 'Connection: Keep-Alive';
$headers[] = 'Keep-Alive: 300';
$headers[] = 'Accept-Charset: UTF-8,Windows-1251,ISO-8859-1;q=0.7,*;q=0.7';
$headers[] = 'Accept-Language: ru,en-us,en;q=0.5';
$headers[] = 'Pragma:';
$mrHandler->requestsDefaults()->addHeaders($headers);

$options = array();
$options[CURLOPT_USERAGENT] = 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12';
$mrHandler->requestsDefaults()->addCurlOptions($options);

$request = new MultiRequest_Request('http://somedomain/path/file.pdf');
$mrHandler->pushRequestToQueue($request);
$mrHandler->start(); 
```

# javascript - 如何获取刚刚使用图形 API 创建的 facebook 标签 ID？

> ID：14516507
> 
> 赞同：1
> 
> 时间：2013-01-25T06:27:17.207
> 
> 标签：javascript, facebook-graph-api

我正在使用图形 API (Javascript) 在 facebook 页面上以编程方式创建一个选项卡。我用以下代码对此进行了排序：

```
FB.api(pageId + '/tabs', 'POST', { app_id: APP_ID, access_token: access_token }, function(response) {
                if (!response || response.error) {
                    console.log('Facebook add app error ' + response.error);
                } else {
                    console.log('app has been added');
                    console.log(response);
                } 
```

但是我正在尝试更改选项卡的名称并向其添加自定义图像。有没有办法同时做到这一点？还是我需要遍历页面的所有选项卡，检查我的应用程序的安装位置，获取选项卡 ID 并更改 custom_name 和 custom_image？我查看了响应，但这只是安装成功时的布尔值。谢谢

# php - 即使设置了 max_execution_time 和 IIS7 连接超时，PHP 脚本也会挂起

> ID：14516509
> 
> 赞同：0
> 
> 时间：2013-01-25T06:27:18.983
> 
> 标签：php, iis-7, connection, timeout

即使在后台进程完成运行后，我的 PHP 脚本“挂起”也遇到了一个非常奇怪的问题。我正在运行安装了 Tomcat Apache 的 PHP 5.3、Windows Server 2008 R2、IIS7。

**项目背景**我的脚本通过“shell_exec()”函数生成 PDF 表单。可以生成 1 - 3,000 个表格。生成所有表单后，下载链接和“重新开始”链接应该显示在页面底部 - 相反，该站点继续“加载”并且链接永远不会显示 - 即使我检查了服务器并查看所有文件已完成生成。

此问题仅在生成 300 多个表单时出现，需要 3-6 分钟。

我已将 php.ini 的“max_execution_time”设置为 1200（20 分钟），IIS7 的“连接超时”也设置为 1200 秒。以下是这些设置图片的链接，以确认我已正确设置它们：http: [//i49.tinypic.com/15gavew.png](http://i49.tinypic.com/15gavew.png) -- php.ini [http://i49.tinypic.com/9u5j0n.png](http://i49.tinypic.com/9u5j0n.png) -- IIS7

我还缺少其他设置吗？是否有我不知道的 Tomcat Apache 连接超时设置？除了“max_execution_time”和“set_time_out”之外，PHP 是否还有另一个“超时”设置？我已经用尽了我的资源，并且不知道为什么我的脚本继续挂起，即使在“while 循环”完成运行并且所有 PDF 都已成功创建之后。

感谢您提供的任何帮助/建议。

**While 循环代码**

```
/* build zip & directory for PDFs */
$zip = new ZipArchive;
$time = microtime(true);

    $new_dir = "c:/pdfgenerator/f-$time";
    if(!file_exists($new_dir)) {
      mkdir($new_dir);
    }

$res = $zip->open("pdf/tmppdf/mf-pdfs_" . $time . ".zip", ZipArchive::CREATE);

$num = 0;
while($row = mysql_fetch_array($result)) {

    /* associate a random # assigned to each PDF file name */
    $num++;
        include($form);
    $rand = rand(1,50000);
     $file_num = $num * $rand;

    $fo = fopen('c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.html', 'w') or die("can't open file");

    fwrite($fo, $output);
    echo shell_exec('c:\wkhtmltopdf\wkhtmltoimage c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.html c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg');

    /* the follow uses ghost script to execute the ImageMagick convert command from cmd.exe */
    $magick_dir = 'C:\imagemagick'; // install IM in short DOS 8.3 compatible path
    $send_cmd=$magick_dir .'\convert c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg -resize "1710x2200^!" c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg' ;

    echo shell_exec($send_cmd);
    $send_cmd=$magick_dir .'\convert c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.pdf';
    echo shell_exec($send_cmd);

    /* EO ghostscript code */

/* add the newly generated files to the Zip Archive */
    if ($res === TRUE) {
    //echo "RESULT TRUE...";
     $zip->addFile('c:/pdfgenerator/f-' . $time . '/mf_pdf-' . $time . '-' . $file_num . '.pdf','c:/pdfgenerator/f-' . $time . '/mf_pdf-' . $time . '-' . $file_num . '.pdf');

    //echo "FILE ADDED!";
    } 

}
echo "<h2><a href=\"http://50.63.85.232/med/pdf/tmppdf/mf-pdfs_$time.zip\">Download Zip</a></h2>";
echo "<h2><a href=\"index.php\">Start Over</a></h2>";
$zip->close("pdf/tmppdf/mf-pdfs_" . $time . ".zip", ZipArchive::close());
} 
```

}

**特定壳线**

```
echo shell_exec('c:\wkhtmltopdf\wkhtmltoimage c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.html c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg');

    /* the follow uses ghost script to execute the ImageMagick convert command from cmd.exe */
    $magick_dir = 'C:\imagemagick'; // install IM in short DOS 8.3 compatible path
    $send_cmd=$magick_dir .'\convert c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg -resize "1710x2200^!" c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg' ;

    echo shell_exec($send_cmd);
    $send_cmd=$magick_dir .'\convert c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.jpeg c:\\pdfgenerator\\f-' . $time . '\\mf_pdf-' . $time . '-' . $file_num . '.pdf';
    echo shell_exec($send_cmd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:04:35.477

转换了我所有的**mysql_ 函数**，这些函数现在在 PHP 5.5 中已被弃用，并使用了[MySQLi](http://www.php.net/manual/en/book.mysqli.php)函数。

# gstreamer - 在一个进程中多次加载相同的 gstreamer 元素

> ID：14516511
> 
> 赞同：0
> 
> 时间：2013-01-25T06:27:50.917
> 
> 标签：gstreamer

这可能是个愚蠢的问题。如何在一个进程中多次加载 gstreamer 元素？当 Gstreamer 元素创建时，如果已经创建并存在于内存中，它们是否共享？在我的情况下，一个进程创建多个线程，对于每个线程，我正在创建以下 gstreamer 元素，链接并将管道设置为 PLAYING 状态，filesrc->Q->filesink 并且这有效。但是当我在 Q->filesink 之间添加 gstreamer 元素（新编写用于处理 gst 缓冲区数据）时，所有线程都停止工作，可能是什么问题？我该如何调试？请提供输入。提前致谢。-opensid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:01:53.457

The elements are within shared libraries and thus the code will be just once in memory. Each instance will occupy some memory for its own state though. When doing multithreaded stuff, you should call gst_init() just once from your main thread. As gstreamer already creates new threads for the data processing, it is saver to create all the gstreamer pipeline from one main thread. You can run several pipelines in parallel.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-02T18:36:05.457

我同意 ensonic 的回答，因为它适用于存储在 klass 中的数据。但是，它似乎不适用于 gbuffers。我正在研究基于 basetransform 的 IEEE1278 音频转换版本。在一个版本中，有一个过滤器插件允许 UDP 数据包通过基于可设置的属性和一个用于双向转换的插件，IEEE1278 <-> mulaw 取决于垫设置的内容。

对于一个简单的测试，我尝试了一个循环：

*   gst-launch-1.0 -v filesrc 位置=IsaacAsimov-Foundation1Of8_64kb.mp3 \
*   ！mpegaudioparse \
*   ！mpg123audiodec
*   ！'音频/x-raw,rate=8000,channels=1' \
*   ！音频重采样\
*   ！'音频/x-raw,rate=8000,channels=1' \
*   ！穆拉文克\
*   ！'音频/x-mulaw,rate=8000,channels=1' \
*   ！分配音频\
*   ！过滤器\
*   ！分配音频\
*   ！'音频/x-mulaw,rate=8000,channels=1' \
*   ！穆劳德克\
*   ！'音频/x-raw,rate=8000,channels=1' \
*   ！自动音频接收器

无论我对 dissignalausio_transform 中的 gbuffer 数据或元数据做什么，输出音频都会有很多强烈的咔嗒声。mulawdec 中的 gprints 显示我的任何变换更改都没有到达 mulawdec。我使用 UDP 环回将循环分成两个启动管道，噪音就消失了。不知何故，来自第一个 dissignalaudio 实例的 gbuffer 覆盖了第二个实例。

学过的知识：

没有双向转换的示例是有原因的，并且所有转换都有单独的编码和解码插件。

# c++ - reinterpret_cast 时值发生变化

> ID：14516514
> 
> 赞同：3
> 
> 时间：2013-01-25T06:28:02.693
> 
> 标签：c++, casting, reinterpret-cast

在使用 reinterpret_cast 将整数转换为浮点数时，内存的内容会发生变化。

例如，

```
 float fDest = 0;
  __int32 nTempDest = -4808638;

  fDest = *reinterpret_cast<float*>(&nTempDest); 
```

变量值 nTempest 的十六进制表示为“42 a0 b6 ff”，但在 reinterpret_cast 之后，fDest 的内容为“42 a0 f6 ff”。

任何人都可以回答为什么第三个字节从 b6 变为 f6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:20:04.173

在纯 C++ 中，这实际上是未定义的行为。尽管如此，您所看到的还是有解释的。

我假设您给出的十六进制表示来自内存的字节视图。显然，您使用的是小端架构。所以我们开始的 32 位数量是 0xffb6a042，这确实是 -4808638 的二进制补码表示。

作为 IEC 60559 单精度浮点数（也是 32 位），0xffb6a042 是负数，表示 NaN。此表示中的 NaN 具有以下形式（二进制）

```
s1111111 1qxxxxxx xxxxxxxx xxxxxxxx 
```

这里 s 是符号，x 是任意的，q=1 表示安静的 NaN，q=0 表示发信号的 NaN。

现在您正在使用信号 Nan，因为您将其分配给 fDest。如果浮点信号处于活动状态，这将引发浮点无效异常。默认情况下，此类异常会被简单地忽略，并且在传播时信号 NaN 值会被“静默”。

所以：在分配给 fDest 时，传播了 NaN，实现通过设置位 22 将其转换为安静的 NaN。这是您观察到的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:30:48.467

您的代码会产生一个**Undefined Behavior(UB)**。
`reinterpret_cast`仅保证如果您从一种指针类型转换为另一种指针类型并将其转换回原始指针类型，那么您将获得原始数据。除此以外的任何东西都会产生 UB ^([注 1])

这是一个 UB，因为您不能依赖以下事实：

```
sizeof(float) == sizeof(nTempDest) 
```

这不能保证`true`在所有实现上都适用，对于遵循严格别名的实现来说绝对不是这样。如果实现不是你得到的是未定义的行为。

* * *

^([注1])*这条规则有例外，如果你需要依赖这些角落规则，你是在波涛汹涌的水域游泳，所以要绝对确定你在做什么。*

# rspec - 如何在渲染视图上测试文本？

> ID：14516516
> 
> 赞同：5
> 
> 时间：2013-01-25T06:28:18.347
> 
> 标签：rspec, ruby-on-rails-3.2, rspec2

这是我的测试：

```
require "rspec"

describe HomeController do
  render_views

  it "should renders the home" do
    get :home
    response.should render_template("home")
    response.should include_text("Simulate Circuits Online")
  end

end 
```

但是，我得到了：

```
1) HomeController should renders the home
     Failure/Error: response.should include_text("Some text to be test ..")
     NoMethodError:
       undefined method `include_text' for #<RSpec::Core::ExampleGroup::Nested_1:0xd429a0c>
     # ./spec/controllers/home_controller_spec.rb:9:in `block (2 levels) in <top (required)>'
     # (eval):6:in `block in fork'
     # (eval):6:in `fork'
     # (eval):6:in `fork' 
```

那么，测试呈现的文本的正确方法是什么？

**编辑** 如果我尝试 `response.should have_content("My text ..")`

我明白了

```
1) HomeController should renders the home
     Failure/Error: response.should have_content("My text ..")
       expected there to be text "My text .." in "#"
     # ./spec/controllers/home_controller_spec.rb:9:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T01:34:01.073

在您的视图模板中，您实际上是否有要检查的文本？错误似乎是它实际上无法找到文本。

另外，尝试使用`response.should have_text`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:32:18.987

试试这个：

```
response.should have_content("Simulate Circuits Online") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-16T17:46:26.603

您还可以使用 DOM 元素的属性和内容。

```
expect(page).to have_selector 'h1', :text => 'Your text here' 
```

此方法不会检索任何弃用警告。

# node.js - 如何从 node.js 调用其他服务 API 方法

> ID：14516517
> 
> 赞同：0
> 
> 时间：2013-01-25T06:28:19.627
> 
> 标签：node.js

在我的应用程序中，我需要使用 twillio 模块 API 来发送和接收短信。但我不知道如何在 node.js 中调用其他 API 方法。现在我使用带有 socketstream 的 node.js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:42:43.640

您可以使用[请求](https://npmjs.org/package/request)模块，文档中有很多很棒的示例如何调用 REST API 方法。

对于 Twilio，您可以阅读本指南“ [Twilio 和 Node.js 入门](http://www.twilio.com/blog/2011/05/getting-started-with-twilio-and-node-js.html)”并使用[twilio](https://npmjs.org/package/twilio)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-05T13:39:06.757

假设您有一个已经在使用 curl 的 API 调用，例如：

> curl -X POST -H "Token:SecurityToken" -H "Content-Type: application/json" [https://yourURL.com](https://yourURL.com) -d '{"records":[{"value":"测试 API 函数"} ]}'

您需要首先为您的 node.js 安装适当的模块：

```
npm install request 
```

然后你需要创建一个包含以下内容的 js 文件：

```
var Request = require("request");

// Preparing API CAll with Post Action and its arguments
Request.post({
    "headers": { "content-type": "application/json" ,"Token":"SecurityToken" },
    "url": "YourURL.com",
    "body": JSON.stringify({"records":[{"value":"Testing the API Function"}]})
}, (error, response, body) => {
    if(error) {
        return console.dir(error);
    }
    // console.log(response);
    console.dir(JSON.parse(body));
}); 
```

# geolocation - 给定经度和纬度，如何找到国家

> ID：14516519
> 
> 赞同：0
> 
> 时间：2013-01-25T06:28:22.297
> 
> 标签：geolocation, gps, latitude-longitude

如果我有纬度和经度，我如何找到该位置的国家/地区.. 如果找到有关[Google Reverse Geocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)的信息，但不幸的是，它需要该服务与 Google Maps 一起使用，这不是我的情况..

是否有静态数据库或我可以参考的东西？如果我有一个静态数据库而不是服务会更好..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T00:47:29.637

您可以使用 Bing Maps Api，据我所知，它不需要显示地图，

```
http://dev.virtualearth.net/services/v1/geocodeservice/geocodeservice.asmx/ReverseGeocode?latitude=22.98&longitude=35.43637&key=[YOU_KEY]&culture=%22en-us%22&format=json 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T00:36:07.730

没有服务，工作量很大。

首先，您需要具有指定国家代码的国家多边形。一个国家平均有大约 50.000 个顶点。

然后是一个简单的多边形点搜索。

使用空间索引来限制要搜索的国家多边形。如果您必须考虑飞地，这将变得更加困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:32:57.613

您可以使用[geonames.org](http://www.geonames.org) [“国家代码/反向地理编码”](http://www.geonames.org/export/web-services.html#countrycode)网络服务，例如：

[http://api.geonames.org/countryCode?lat=47.03&lng=10.2&username=demo](http://api.geonames.org/countryCode?lat=47.03&lng=10.2&username=demo) ->`AT`

# asp.net - 从后面的代码将自定义样式应用于 div 内的锚标记

> ID：14516526
> 
> 赞同：1
> 
> 时间：2013-01-25T06:29:02.647
> 
> 标签：asp.net, css

在这里，我想从后面的代码将自定义样式应用于 div 内的锚标记。这是我的代码。这里应用了几种样式。字体系列正在应用，但字体颜色和字体大小不适用

```
<div id="sidenav" style="height:600px" runat="server">
            <ul id="abcd" runat="server" style="margin-top:30px;">
                <li>><a href="ViewEvents.aspx">Events</a></li>
                <li>><a href="PhotoGalleries.aspx">Photo Galleries</a></li>
                <li>><a href="InProgress.aspx">Location</a></li>
                <li>><a href="InProgress.aspx">Officials</a></li>
                <li>><a href="InProgress.aspx">Honours Board</a></li>
                <li>><a href="InProgress.aspx">History</a></li>
                <li>><a href="InProgress.aspx">Links</a></li>
                <li>><a href="InProgress.aspx">Site map</a></li>
                <li>><a href="InProgress.aspx">Help</a></li>                    
            </ul>
             <span id="myspan" runat="server">&nbsp;</span>
        </div>
 foreach (Control c in sidenav.Controls)
            {
                string abc = abcd.InnerText;
                abcd.InnerHtml = "<font ForeColor='" + objpage.NavigatioinTextcolor + "'>" + abc;
                //abc.Style.Add("color", objpage.NavigatioinTextcolor);
            }
                abcd.Style.Add("background-color", objpage.NavigationBackcolor);
                ////abcd.Style.Add("ForeColor", objpage.NavigatioinTextcolor);
                ////sidenav.Style.Add("color", objpage.NavigatioinTextcolor);
                ////sidenav.Style.Add("ForeColor", objpage.NavigatioinTextcolor);
                abcd.Style.Add("font-family", objpage.NavigatioinTextStyle);
                abcd.Style.Add("font-size", objpage.NavigatioinTextsize);
                abcd.Style.Add("font-size", string.Format(objpage.NavigatioinTextsize + "px"));
                abcd.Style.Add("style", "font-size:" + string.Format(objpage.NavigatioinTextsize + "px")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:03:20.387

You can create entire div into code-behind, by doing so, you can simply add styles fetched from database. Moreover, you can define the links in XML and progammatically build 'DIV' innerHTML in code-behind.

```
HtmlGenericControl div = new HtmlGenericControl();

div.InnerHtml += "<ul id='abcd' runat='server' style='margin-top:30px;'>";

div.InnerHtml += "<li><a herf='somepage.aspx' style='color:black;'>Events</a></li>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:34:59.950

使用 css 作为锚标签

```
a
{
font family:cursive;
color :red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:09:34.520

在 css 中找到***sidenav***添加这个

```
sidenav
{ 
   font-color: red;
   font-size:14px;
   font-family:Arial;

} 
```

***注意***：字体颜色、大小及其系列由您决定。

# c - 如何确定同一条线上的最大点数？

> ID：14516527
> 
> 赞同：1
> 
> 时间：2013-01-25T06:29:03.473
> 
> 标签：c, algorithm

给定：很多点，每个点都有一个唯一的坐标 (x [i] ,y [i] )

输出：同一行上的最大点数

这是我的方法：

```
for i=1..n
    for j=i..n
        get the line determined by point[i] and point[j]
        for k=1..n
            check if point[k] is on this line 
```

但似乎这种方法耗时太长，而且总是超过 OJ 系统的时间限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:32:19.550

迭代每个点，计算每个其他点的极角，对极角排序

这个成本 O(n^2*lgn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:25:18.957

我还没有实现这个，但你也许可以在 O(n) 中做到这一点。

*   使用哈希图按极角存储点：`Map<Double,List<Point>>`，`Double`角度在哪里

*   然后迭代地图，`List<Point>`用最大长度跟踪。该列表将包含结果。

玩那个。看起来它应该工作。

# jquery - 创建 jQuery 数组

> ID：14516528
> 
> 赞同：0
> 
> 时间：2013-01-25T06:29:04.683
> 
> 标签：jquery, arrays

有一个更新文本区域的代码：

```
var input_baseprice = $('.active .input_baseprice').html();

$('[name=baseprice]').html(input_baseprice); 
```

但是，当有很多`.input_baseprice`元素时，textarea 仅从第一个获取内容。

如何自动创建`input_baseprice*`以获得：

```
$('[name=baseprice]').html(input_baseprice + '<br>' + input_baseprice2 + '<br>' + input_baseprice3 ...); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:31:22.337

这记录在 api 说明[http://api.jquery.com/html/](http://api.jquery.com/html/)

> 为了检索以下内容

尝试这个

```
var html = '';

$('.active .input_baseprice').each( function () {
    html += $( this ).html();
});

$('[name=baseprice]').html( html ); 
```

重新阅读您的问题后，您可能需要根据您正在处理的元素类型交换我们`.html()`的`.val()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:34:59.713

使用[.map](http://api.jquery.com/map/)方法，然后加入它们。

```
$('[name=baseprice]').html($('.active .input_baseprice').map(function() {
  return $(this).html();
}).get().join('<br>')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:32:19.533

使用 each 循环遍历 textarea 内容...`.val()`应该可以试试这个

```
var str="";

$('.active .input_baseprice').each(function(){
      str += $(this).val();
 });

$('[name=baseprice]').val( str); 
```

**或者**

在数组中..

```
var temparray= [];

$('.input_baseprice').each(function(){
   temparray.push($(this).html());
}

 $('[name=baseprice]').html(temparray.join('<br>')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T06:33:10.860

使用 each() 函数遍历每个元素并将数据附加到一个数组中，然后将其组合成一个字符串：

```
var data = [];

$('.input_baseprice').each(function(){
    data.push($(this).html());
}

$('[name=baseprice]').html(data.join('<br>')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T06:31:52.797

您还可以通过以下方式创建数组[`jQuery.makeArray()`](http://api.jquery.com/jQuery.makeArray/)

```
 var arr = jQuery.makeArray(elements); 
```

# php - 即使登录，facebook api也会在getUser方法上返回0

> ID：14516532
> 
> 赞同：-1
> 
> 时间：2013-01-25T06:29:40.003
> 
> 标签：php, facebook, facebook-php-sdk, facebook-login

我有以下一组代码：

```
<?php
require("facebook.php");
require("settings.php");
$facebook=new Facebook(array('appId'=>$app_id,'secret'=>$secret,'cookie'=>true));
$user=$facebook->getUser();
if($user)
{
    var_dump($user);
    $logout_url=$facebook->getLogoutUrl();
    echo "<a href='$logout_url'>logout</a>";
    //logged in...
}
else
{
$login_url = $facebook->getLoginUrl(array("scope"=>"read_mailbox,publish_stream"));
    echo "<a href='$login_url'>Login</a>";
    //not logged in...
}
?> 
```

即使我登录时，getUser 返回 0，我看到某处进行页面刷新会起作用，但在我的情况下，它也不起作用......当我检查我的 cookie 时，只设置了会话 ID，并且没有设置任何其他cookie，可能是什么问题？等待解决...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:21:44.580

最新的 SDK 不再需要`'cookie'=>true`，因此您应该更新 SDK，您的问题的原因很可能是在 SDK 的先前版本中发生的证书错误。

# perl - 催化剂需要整个应用程序的 lib

> ID：14516534
> 
> 赞同：0
> 
> 时间：2013-01-25T06:29:44.470
> 
> 标签：perl, file, require, catalyst

所以我有一个 .lib 文件，其中包含我自己的一些子例程，我想将其提供给整个 Catalyst 应用程序。现在我需要 lib/myapp.pm 中的文件，我没有问题。但是，每当我尝试在控制器中调用该子例程时，都会收到此错误：

```
"Undefined subroutine &myapp::Controller::Root::my_sub called at 
/home/user/myapp/lib/myapp/Controller/Root.pm line 35, <DATA> line 1003." 
```

如果我需要我想在控制器中需要的文件，那不会给我带来任何问题。但是，如果可能的话，我宁愿只将它加载到整个应用程序的一个地方。另外，如果我需要控制器中的文件，这是否意味着每次发出请求时都会加载该文件？（如果这有什么不同，我正在使用 mod_perl）。我想让它在为整个应用程序和任何请求加载一次的文件方面变得高效，但为了干净的代码也只在一个地方加载。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:18:32.997

```
use myapp; 
```

基本上是

```
BEGIN {
   require myapp;
   import myapp;
} 
```

`require myapp;``myapp.pm`如果尚未执行，则执行。换句话说，无论您`use myapp;`在一个进程中执行多少次，该文件都只会被执行（“加载”）一次。

`import myapp;`如果它存在则调用`myapp::import()`以导出内容。假设`myapp`export `my_sub`，这就是您的代码不起作用的原因。

你有两个选择。

1.  调用包`mysub`中的`myapp`：`myapp::my_sub(...)`。
2.  用于为您调用的每个包`use myapp;`创建一个本地名称，以便您可以仅使用. （这假设出口。）`my_sub``my_sub``my_sub(...)``myapp``my_sub`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T07:59:05.720

该命令`use myapp;`只会加载您的 myapp.pm 文件一次，即使多次调用也是如此。但是每次它调用导入例程时都会使 my_sub() 可用（假设您使用 Exporter 或其他东西导出它），而无需编写 myapp::my_sub()。

# c# - 我们可以在foreach中使用多个变量吗

> ID：14516537
> 
> 赞同：19
> 
> 时间：2013-01-25T06:29:53.260
> 
> 标签：c#, asp.net-mvc-4

我们可以在foreach中使用多个变量吗

```
foreach (var item1 in collection1;var items2 in collection2)
{

} 
```

我想这样做是因为我需要从数据库中获取两个集合并将它们都附加到 ComboBox。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T06:32:23.850

使用 LINQ 连接数组，将结果放入匿名类型，然后遍历生成的集合。

```
var col = collection1.Join(collection2, x => x, y => y, (x, y) => new { X = x, Y = y });
foreach (var entry in col) {
    // entry.X, entry.Y
} 
```

**编辑：**

在发布答案时，我假设`collection1`并`collection2`包含不同的类型。如果它们都包含相同的类型或共享一个共同的基本类型，则有替代方案：

如果要允许重复：

```
collection1.Concat(collection2); // same type
collection1.select(x => (baseType)x).Concat(collection2.select(x => (baseType)x)); // shared base type 
```

没有重复：

```
collection1.Union(collection2); // same type
collection1.select(x => (baseType)x).Union(collection2.select(x => (baseType)x)); // shared base type 
```

Form framework 4.0 及以上 Zip 可以替代原来的解决方案：

```
collection1.Zip(collection2, (x, y) => new { X = x, Y = y }); 
```

有关大多数可用 LINQ 功能的概述，请参阅[101 LINQ 示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)。

如果不使用 LINQ，请使用两个分层 foreach 循环（增加交互次数）或一个 foreach 循环来创建中间类型，然后使用第二个循环来遍历中间类型的集合，或者如果集合中的类型相同，则将它们添加到列表中（使用`AddRange)`然后遍历这个新列表。

多条道路通向一个目标……由您选择一个目标。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T06:52:36.620

您可以压缩收藏

```
foreach (var item in collection1.Zip(collection2, (a, b) => new {  A = a, B = b }))
{
  var a = item.A;
  var b = item.B;
  // ...
} 
```

这假定元素在相同位置匹配（例如，collection1 中的第一个元素连接到collecion2 的第一个元素）。这是相当有效的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T06:31:30.157

不，您不能在 foreach、in 循环中使用多个变量。检查[语言参考](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)。如果每个集合有不同数量的项目会发生什么？

如果要遍历两个集合，请尝试使用联合：

```
foreach (var item1 in collection1.Union(collection2))
{
   ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T06:32:45.610

从您的评论来看，我认为您真正想做的*不是*获得两个集合的笛卡尔积，而是获得两个集合的 [SQL] `UNION`。你有两个选择：

1.  `Concat`两个集合：

    ```
    foreach(var items in collection1.Concat(collection2)) {} 
    ```

2.  只需分别添加它们，假设您不需要通过迭代来做任何花哨的事情（可能是最好的/最简单的）：

    ```
    myComboBox.Items.AddRange(collection1);
    myComboBox.Items.AddRange(collection2); 
    ```

* * *

但是，如果您确实需要 [SQL 伪代码] 的 n*m 笛卡尔积`collection1 CROSS JOIN collection2`，则可以使用两个嵌套的 foreach 语句：

```
foreach(var item1 in collection1)
foreach(var item2 in collection2)
{
} 
```

或者，您可以在 LINQ 中加入这两者并遍历加入的集合：

```
foreach(var items in (from i1 in collection1 
                      from i2 in collection2 
                      select Tuple.Create(i1, i2)))
{
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T06:42:06.100

foreach 用于枚举集合中的单个项目。所以不，你不能。你必须一个接一个地使用它。最好使用：

```
void myfunc()
{}

foreach(var item1 in collection1){myfunc();}
foreach(var item2 in collection2){myfunc();} 
```

比

```
foreach(var item1 in collection1)
foreach(var item2 in collection2)
{
    myfunc();
} 
```

这将运行 n*m 次。而前面的示例只运行 n+m 次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T07:28:20.147

您想将一个集合中的项目与另一个集合中的相应项目配对吗？

```
foreach (var pair in col1.Zip(col2, (Item1, Item2) => new { Item1, Item2 })
{
    //do something with pair.Item1 and pair.Item2
} 
```

注意：如果第一个系列有 10 件，第二个有 8 个，您将获得 8 双；第一个集合中的最后两个项目将被删除，因为在第二个集合中没有任何东西可以匹配它们。更一般地，迭代次数为`Min(col1.Count(), col2.Count())`.

您是否要迭代一个集合中的所有项目，然后迭代第二个集合中的所有项目？

```
foreach (var element in col1.Concat(col2))
{
    //do something with element
} 
```

注意：如果第一个集合有 10 个元素，第二个有 8 个元素，则此循环将执行 18 次，或者更一般地说，迭代次数为`col1.Count() + col2.Count()`.

您想将一个集合中的每个项目与另一个集合中的每个项目配对吗？

```
foreach (var item1 in col1)
    foreach (var item2 in col2)
    {
         //do something with item1 and item2
    } 
```

注意：这是笛卡尔积，因此毫不奇怪，迭代次数是集合大小的乘积。如果我们有 10 和 8 个项目，循环将执行 80 次。为了一致性起见，这是`col1.Count() * col2.Count()`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-03T17:49:24.410

使用枚举器是最简单的方法。您可以使用这两个集合中的任何一个来获取枚举器并在另一个上运行 foreach。

```
 public void MatchSentences() {
                string[] OrigSentences = { "hello you", "what are you doing", "hope things are fine" };
                string[] CompareSentences = { "hello you", "what are you doing", "hope things are fine" };
                // Get enumerator on the second collection
                var outputStrEnum = CompareSentences.GetEnumerator();

                // Run foreach on the first collection
                foreach (var sentence in OrigSentences) {
                    outputStrEnum.MoveNext();
                    string testAgainst = outputStrEnum.Current.ToString();
                    bool result = sentence.Equals(testAgainst);

                    Assert.IsTrue(result,
                        String.Format(" Expected for '{0}': {1}; Actual: '{2}'",
                                testAgainst, result,sentence) );
                }

            } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-06T15:48:07.250

您可以使用迭代器：

```
IEnumerator <Item2Type> item2Itt = Collection2.GetEnumerator();
item2Itt.MoveNext(); // The iterator returned above is BEFORE the first element in the collection.
foreach (Item1Type item1 in collection1)
{
    item1.blahblahblah;
    item2Itt.Current.blahBlahBlah;
    item2Itt.MoveNext();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-18T15:41:04.447

我认为可以使用这种方式：

```
List<Type> allOfThem = new List<Type>(); //use proper type for collection
allOfThem.AddRange(collection1);
allOfThem.AddRange(collection2);

foreach (Type item in allOfThem)
{
...
} 
```

# iphone - 如何检查 UILabel 是否已启用？

> ID：14516539
> 
> 赞同：0
> 
> 时间：2013-01-25T06:29:59.297
> 
> 标签：iphone, ios, cocoa-touch, uilabel

UILabel 有能力 setEnabled: 效果很好。但是，如果标签已启用，我以后如何才能知道呢？

Apple文档说有一个getter（isEnabled），但它没有被识别为有效的访问器......

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:39:33.030

检查这个。

```
UILabel *lbl = [[UILabel alloc] init];
lbl.enabled = YES;
//     lbl.enabled = NO;
if (lbl.isEnabled)
{
    NSLog(@"Enabled");
}
else
{
    NSLog(@"Not Enabled");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:38:44.393

如果您正在尝试`label.isEnabled`，请将其更改为`label.enabled`or `[label isEnabled]`。

在 Objective-C 中，`BOOL`属性是按照约定命名和访问的。

# iphone - setHttpMethod 奇怪的行为

> ID：14516549
> 
> 赞同：0
> 
> 时间：2013-01-25T06:31:23.290
> 
> 标签：iphone, ios, nsurlconnection, nsmutableurlrequest, http-method

我在从服务器下载 xml 文件时遇到了一个奇怪的问题。

我正在尝试使用以下代码获取 schedulist.xml，

```
- (void) downloadXml:(NSString*)url {

_urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];

    [_urlRequest setHTTPMethod:@"GET"];

       if(_urlConnection !=NULL)
        return NO;

    _urlConnection = [[NSURLConnection alloc] initWithRequest:_urlRequest delegate:self startImmediately:YES];

} 
```

问题是 ，

1.  当互联网可用时，如果我单击按钮下载 xml，很好。正在下载 XML。
2.  现在关闭互联网，如果我再次单击该按钮，它正在调用`didReceiveResponse,didReceiveData and connectionDidFinishLoading.`FYI，我已删除旧的响应数据。

但问题是，如果我使用`[_urlRequest setHTTPMethod:@"POST"];`它工作正常，那就是

1.  使用互联网正常工作
2.  `didFailWithError`被叫

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:55:46.083

默认情况下`NSURLRequest`使用协议数据来决定是否缓存请求。
例如，如果响应标头（[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)）中存在“Cache-control”或“Expires”指令，它们的值将用于决定是否可以按原样使用缓存的响应。
通常只有 GET 请求被缓存，这就是你得到`didFailWithError`你的`POST`请求的原因。
为避免缓存，您可以修复服务器上的标头或将`cachePolicy`属性设置`NSURLRequest`为`NSURLRequestReloadIgnoringLocalCacheData`

# java - 如何检查对象是否包含对象集合

> ID：14516554
> 
> 赞同：2
> 
> 时间：2013-01-25T06:31:37.587
> 
> 标签：java, object

在Java中我想知道对象是否是一个对象集合？？

```
String [] abc=new String[]{"Joe","John"};
Object ob=abc; 
```

我想检查变量 ob 持有对象集合？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:34:24.910

您可以使用 Java 反射，如下所示：

```
Class<?> clazz = ob.getClass();
boolean isArray = clazz.isArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:33:27.110

与`instanceof`操作员核对。

> instanceof 运算符将对象与指定类型进行比较。您可以使用它来测试对象是类的实例、子类的实例还是实现特定接口的类的实例。 [参考](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

```
String [] abc=new String[]{"Joe","John"};
Object ob=abc;
...
if(ob instanceof String[]){
   String[] str = (String[])ob;
}else{...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:38:46.927

从您的示例中，您需要更准确地检查对象数组而不是集合。

你可以尝试类似的东西

```
String [] abc=new String[]{"Joe","John"}; 
Object ob=abc;
if (ob instanceof Object[]) {
  // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:49:27.647

首先检查它是否是一个数组：

```
boolean isArray = ob.getClass().isArray(); 
```

或者

```
if (ob instanceof Object[]) {

  // ...

} 
```

如果不通过检查 instanceof 和`java.util.Collection`接口检查它是不是一个集合：

```
if (ob instanceof Collection) {

  // ...

} 
```

# android - VideoView 不适用于 LG Android 手机上的旋转视频

> ID：14516555
> 
> 赞同：1
> 
> 时间：2013-01-25T06:31:41.770
> 
> 标签：android, android-videoview

使用 LG MS840，如果我以横向拍摄视频，然后将其显示在 VideoView 中，它看起来与以前一样。

但是，如果以纵向拍摄视频，然后将其显示在 VideoView 中，则视频的宽度和高度将被交换，并且图像将被缩放以适应交换后的大小。

例如，如果我拍摄的视频中的图像是：

```
--------
| 一个|
| |
| |
| |
|BC|
 --------

```

录制文件中的图像仍然是：

```
------------
| 交流 |   
| |   
| 乙|
 ------------

```

由于在报告视频大小时已经考虑了旋转，所以我看到的是：

```
--------
|交流|
| |
| |
| |
| 乙|
 --------

```

任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T20:02:16.040

VideoView 不支持视频旋转，即使组合矩阵设置正确并使用了旋转属性。

您可以做的是使用 TextureView 并设置其属性 rotation="90" （例如）。然后它会旋转帧，但纵横比是你需要自己处理的。为此，您可以使用 textTureView.setScaleX((screenHeight * 1.0f) / screenWidth)

更多细节在这里：[旋转一个android VideoView](https://stackoverflow.com/questions/8586526/rotating-an-android-videoview/16490065#16490065)

# javascript - 有什么既定的方法可以在 JS 中获取页面视图的 kwargs 吗？

> ID：14516557
> 
> 赞同：0
> 
> 时间：2013-01-25T06:32:00.230
> 
> 标签：javascript, django, django-urls

本质上，我正在尝试与[django-ds-utils](https://github.com/Dimitri-Gnidash/django-js-utils/)做相反的事情，即从解析的 URL 中获取 URL 参数，例如，采用以下 URL 定义：

```
url(r'^reset_pwd/(?P<code>[A-Za-z0-9]+)/$', ResetPasswordView.as_view(), name='my.registration.views.reset_pwd'), 
```

在那个页面上，在 JS 中，我想检索`<code>`到一个 kwargs 数组。这是存在的东西，还是有标准的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:00:57.247

AFAIK没有标准方法。你可以：

*   将 JS 放入模板并渲染视图变量
*   在 JS 全局变量中传递变量，在模板文本中设置它的值
*   解析 window.location ...等。

我个人更喜欢第二种方式，例如将此代码放入模板中，然后在 javascript 文件中使用 _reset_pw_code 全局：

```
<script> var _reset_pw_code = "{{ reset_code|escapejs }}" </script> 
```

# c - 如何检测我的 C 编译器是否支持原子 `__sync_bool_compare_and_swap` 功能？

> ID：14516569
> 
> 赞同：0
> 
> 时间：2013-01-25T06:32:35.177
> 
> 标签：c, atomic

我想`__sync_bool_compare_and_swap`在我的 C 程序中使用。

如何检测编译器是否支持此扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:35:11.293

编写一个使用它的短程序并尝试编译它。如果它编译 - 你很高兴。

# php - 如何将此功能放入超时jquery

> ID：14516570
> 
> 赞同：-4
> 
> 时间：2013-01-25T06:32:41.250
> 
> 标签：php, jquery, ajax

当我使用 ajax 加载 file.php 时，masonry.desandro 和 isotope 不起作用。也许超时会解决问题。

```
$(function(){

      var $container = $('#container');

      $container.imagesLoaded( function(){
        $container.isotope({
          itemSelector : '.photo'
        });
      });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:13:18.987

某些插件可能不支持动态添加的元素。作为一种解决方法，您可以使用`.on()`（jQuery 1.7+）来初始化`focusin`文档或父容器上的插件，例如：

```
$(function () {
    var $container = $('#container');
    $(document).on("focusin", function () {
        $container.isotope({
            itemSelector: '.photo'
        });
    });
}); 
```

...或者如果`$container`有父容器，则应用`.on()`到这样的父容器而不是`document`委托事件。

# android - 如何修复android中sqlite数据库的编译器错误

> ID：14516580
> 
> 赞同：0
> 
> 时间：2013-01-25T06:33:26.117
> 
> 标签：android, database, sqlite

这行代码有问题，getInt 方法上的编译器错误。因为变量 KEY_HITS 是 String 而不是 int。我该如何解决这个问题？

```
 total = total + c.getInt(KEY_HITS); 
```

这是更多代码；

```
 public static final String KEY_ROWID="_id";
    public static final String KEY_NAME="persons_name";
    public static final String KEY_HITS="persons_hits";

 public int getTotal() {

String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_HITS };
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
        null, null);
int total = 0;

for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
    total = total + c.getInt(KEY_HITS);
}
return total;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:35:32.320

执行错误所说**的操作，因为变量 KEY_HITS 是 String 而不是 int**
，您需要在[getInt()](http://developer.android.com/reference/android/database/Cursor.html#getInt%28int%29)中传递整数参数。[您可以通过getColumnIndex()](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)获取列的索引

```
total = total + c.getInt(c.getColumnIndex(KEY_HITS)); 
```

# jquery - jQuery ImagesLoaded 插件在 IE8 标准模式下触发错误

> ID：14516581
> 
> 赞同：0
> 
> 时间：2013-01-25T06:33:25.820
> 
> 标签：jquery

我有一个空白图像标签，例如：

```
<img id="m_usr_img" alt="" src="" style="border:none;margin-left:0;"/> 
```

我正在通过 jquery 设置 src 并使用 imagesLoaded 插件来调整图像大小，但是，在 imagesLoaded 触发后，图像大小在 IE8 标准模式下似乎设置为“1x1”。它虽然在FF中正常工作。

```
$("#m_usr_img").attr('src',url_txt).imagesLoaded(function(){
...
... 
```

`url_txt`是生成图像的 php 文件的路径。

有什么想法可能是错的吗？

# d3.js - d3.js 用于图形分析，突出显示一个节点

> ID：14516583
> 
> 赞同：0
> 
> 时间：2013-01-25T06:33:33.247
> 
> 标签：d3.js

我正在使用 d3.js 进行图形分析。我正在为图中的节点找到中间因素和关键影响因素。处理完节点后，我只希望通过增加其大小或使其他节点褪色来突出显示结果节点。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:07:40.817

例如：
如果您的节点有两个属性：名称、性别。然后你让所有的女性节点都比男性节点大：

```
d3.select("circle").attr("r", function(d) { return d.gender=='female'?10:5; }); 
```

如果你想删除那些男性节点，你最好先处理你的数据，然后使用exit()和remove()删除那些ndo。请参考[https://github.com/mbostock/d3/wiki/Selections#wiki-enter](https://github.com/mbostock/d3/wiki/Selections#wiki-enter)

# javafx - javaFx 中的 Json 和 XML Web 服务

> ID：14516587
> 
> 赞同：3
> 
> 时间：2013-01-25T06:34:16.953
> 
> 标签：javafx

1.  我是 Javafx 的新手，我们可以在 Javafx 中实现 JSON 和 XML Web 服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:29:57.883

是的。

JavaFX 只是 Java，并且有许多 Java 库用于生成和使用 json 和 xml Web 服务。

[Jersey 客户端](http://jersey.java.net/nonav/documentation/latest/client-api.html)和RestEasy[客户端](http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html/RESTEasy_Client_Framework.html)是一些示例客户端 API，适用于 JavaFX 程序，用于使用基于 json 或 xml 的 web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T07:56:39.690

您可以使用 DataFX 解决此问题：[http](http://www.javafxdata.org/) ://www.javafxdata.org/ 以下是一些教程：

*   [http://jaxenter.com/getting-real-world-data-into-java-ui-controls-with-datafx-46600.html](http://jaxenter.com/getting-real-world-data-into-java-ui-controls-with-datafx-46600.html) [http://fxapps.blogspot.de/2012/01/show-data-in -javafx-is-made-easy-by.html](http://fxapps.blogspot.de/2012/01/show-data-in-javafx-is-made-easy-by.html)

# python - 如何使用 Python 保存“完整网页”而不仅仅是基本的 html

> ID：14516590
> 
> 赞同：26
> 
> 时间：2013-01-25T06:34:28.110
> 
> 标签：python, html, python-2.7, urllib2, urllib

我正在使用以下代码使用 Python 保存网页：

```
import urllib
import sys
from bs4 import BeautifulSoup

url = 'http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html'
f = urllib.urlretrieve(url,'test.html') 
```

**问题**：此代码将 html 保存为没有 javascript、图像等的基本 html。我想将网页保存为完整的（就像我们在浏览器中有选项一样）

**更新**：我现在使用以下代码来保存 webapge 的所有 js/images/css 文件，以便它可以保存为完整的网页，但我的输出 html 仍然像基本 html 一样保存：

```
import pycurl
import StringIO

c = pycurl.Curl()
c.setopt(pycurl.URL, "http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html")

b = StringIO.StringIO()
c.setopt(pycurl.WRITEFUNCTION, b.write)
c.setopt(pycurl.FOLLOWLOCATION, 1)
c.setopt(pycurl.MAXREDIRS, 5)
c.perform()
html = b.getvalue()
#print html
fh = open("file.html", "w")
fh.write(html)
fh.close() 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-25T07:43:01.257

尝试使用[selenium](http://pypi.python.org/pypi/selenium)模拟您的浏览器。此脚本将弹出`save as`网页对话框。由于文件对话框超出了 selenium 的范围（您的操作方式也取决于操作系统），因此您仍然必须弄清楚如何模拟按 Enter 以开始下载。

```
from selenium import webdriver
from selenium.webdriver.common.action_chains import ActionChains
from selenium.webdriver.common.keys import Keys

br = webdriver.Firefox()
br.get('http://www.google.com/')

save_me = ActionChains(br).key_down(Keys.CONTROL)\
         .key_down('s').key_up(Keys.CONTROL).key_up('s')
save_me.perform() 
```

此外，我认为遵循*@Amber*获取链接资源的建议可能更简单，因此是更好的解决方案。不过，我认为使用 selenium 是一个很好的起点，因为它`br.page_source`可以让你了解整个 dom 以及 javascript 生成的动态内容。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-07-26T13:04:19.677

您可以使用简单的 python 库 pywebcopy 轻松做到这一点。

> *当前版本：5.0.1*

```
from pywebcopy import save_webpage

url = 'http://some-site.com/some-page.html'
download_folder = '/path/to/downloads/'    

kwargs = {'bypass_robots': True, 'project_name': 'recognisable-name'}

save_webpage(url, download_folder, **kwargs) 
```

您将在您的 download_folder 中拥有 html、css、js。完全像原始网站一样工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-26T04:39:44.147

要让@rajatomar788 上面的脚本运行，我必须首先执行以下所有导入：

# 要运行 pywebcopy，您需要安装以下软件包：

```
pip install pywebcopy 
pip install pyquery
pip install w3lib
pip install parse 
pip install lxml 
```

之后它出现了一些错误，但我确实得到了包含构成网页的文件的文件夹。

```
webpage    - INFO     - Starting save_assets Action on url: 'http://www.gatsby.ucl.ac.uk/teaching/courses/ml1-2016.html'
webpage    - Level 100 - Queueing download of <89> asset files.
Exception in thread <Element(LinkTag, file:///++resource++images/favicon2.ico)>:
Traceback (most recent call last):
  File "C:\ProgramData\Anaconda3\lib\threading.py", line 917, in _bootstrap_inner
    self.run()
  File "C:\ProgramData\Anaconda3\lib\threading.py", line 865, in run
    self._target(*self._args, **self._kwargs)
  File "C:\ProgramData\Anaconda3\lib\site-packages\pywebcopy\elements.py", line 312, in run
    super(LinkTag, self).run()
  File "C:\ProgramData\Anaconda3\lib\site-packages\pywebcopy\elements.py", line 58, in run
    self.download_file()
  File "C:\ProgramData\Anaconda3\lib\site-packages\pywebcopy\elements.py", line 107, in download_file
    req = SESSION.get(url, stream=True)
  File "C:\ProgramData\Anaconda3\lib\site-packages\pywebcopy\configs.py", line 244, in get
    return super(AccessAwareSession, self).get(url, **kwargs)
  File "C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py", line 546, in get
    return self.request('GET', url, **kwargs)
  File "C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py", line 640, in send
    adapter = self.get_adapter(url=request.url)
  File "C:\ProgramData\Anaconda3\lib\site-packages\requests\sessions.py", line 731, in get_adapter
    raise InvalidSchema("No connection adapters were found for '%s'" % url)
requests.exceptions.InvalidSchema: No connection adapters were found for 'file:///++resource++images/favicon2.ico'

webpage    - INFO     - Starting save_html Action on url: 'http://www.gatsby.ucl.ac.uk/teaching/courses/ml1-2016.html' 
```

# c# - Javascript 调用 webservice 和 ASP.Net 序列

> ID：14516593
> 
> 赞同：0
> 
> 时间：2013-01-25T06:34:36.303
> 
> 标签：c#, javascript, asp.net, json, web-services

我正在使用使用 Web 服务的 Javascript 函数，完成后我必须更新网格数据源

为了完成这个任务，我通过 RegisterClientScriptBlock 调用了 javascript 函数，然后调用了 UpdateGridDataSource 方法

但是在调试时我发现它首先调用了UpdateGridDataSource方法..然后调用WebService中的方法！

ASP.Net 代码

```
System.Web.UI.ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "delete", "DrawPOI();", true);

UpdateDataSource(); 
```

JavaScript代码

```
function DeletePOI(arg) {
      //Some Code  
        $.ajax({
            url: "JSBLL.asmx/DeletePOI",
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: "{id:'" + arg + "'}",
            success: function (msg) {
                alert(msg.d);
            },
            error: function (e) {
                alert('Error');
            }
        }); //some code
        return false;
    } 
```

网络服务 ：

```
[WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public string DeletePOI(string ID)
        try
            {
                if (id == "")
                    throw new Exception();

                long ID = Convert.ToInt64(id);
                using (GuardEntities database = new GuardEntities())
                {
                    var poi = database.POIs.Where(x => x.ID == ID).FirstOrDefault();

                    database.POIs.DeleteObject(poi);
                    database.SaveChanges();
                }

                return "POI Deleted Successfully";
            }
            catch
            {
                return "Error Occured";
            }
} 
```

问题是 UpdateDataSource() 在 DeletePOI(string ID) 之前被调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:35:53.107

注册的 Javascript 代码`RegisterClientScriptBlock()`在浏览器的客户端上运行。ASP.NET 代码在服务器上运行。

当它到达这条线时：

```
System.Web.UI.ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "delete", "DrawPOI();", true); 
```

它说，当页面加载到客户端时，调用`DrawPOI()`. 然后它立即运行下一行代码：

```
UpdateDataSource(); 
```

完成所有 ASP.NET 代码后，它会将您的页面发送到客户端。基本上，您尝试做的事情是行不通的。您不能在服务器端 ASP.NET 代码中间调用客户端 Javascript 并等待它返回。

您可以做的是直接从您的服务器端代码调用 Web 服务。

# asp.net-mvc-3 - MVC3 使用命名空间将区域路由到根目录

> ID：14516594
> 
> 赞同：0
> 
> 时间：2013-01-25T06:34:40.667
> 
> 标签：asp.net-mvc-3, routing, namespaces, areas

我有一个有两个领域的项目。这两个区域允许不共享任何控制器或视图的不同成员类型（例如学生和教师）。但是，它们都共享联系人和支持页面等的根控制器。

目前我使用命名空间在每个区域内路由。

我想做这样的事情，但优先考虑命名空间，这样它们就没有冲突的控制器：

```
context.MapRoute(
    "Student_Default",
    "{controller}/{action}/{id}",
    new { area = "Student", controller = "Home", action = "Index", id = UrlParameter.Optional },
    new { RoleConstraint = new AuthenticationConstraint() },
    new[] { "Test.Web.Areas.Student.Controllers", "Test.Web.Controllers" }
); 
```

或者，我尝试使用“UseNamespaceFallback”，但会导致在所有我不想要的区域中进行搜索。

我没有尝试过的其他方法是仅在用户登录时注册该区域。这是一种可以接受的方法吗？

我也可以只映射每一页，但可能会有很多，而且每一页都会很乱。

所以问题是如何使根控制器对两个区域都可用，而这些区域彼此不可用？如果需要更多信息，请告诉我，我很乐意提供更多关于我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:23:23.807

尽管周末考虑了这个问题，但我决定使用“UseNamespaceFallback”。我还实现了用户角色来管理每个用户可以访问的区域。我认为这是一种更好的方法，因为我已经阅读了一条建议，即永远不要使用命名空间作为身份验证方法。

# ios - 设备日志未出现在 Xcode 中

> ID：14516595
> 
> 赞同：17
> 
> 时间：2013-01-25T06:34:41.160
> 
> 标签：ios, xcode, ipad

当我转到设置->关于->诊断和使用->诊断和使用数据时，我可以在 iPad 中看到一些崩溃日志。但是当我将 iPad 连接到计算机并单击 Xcode->Window->Organizer->My Device Name 时，我根本看不到日志。可能是什么问题？任何的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:30:31.620

获取设备日志的更好方法：

```
~/Library/Logs/CrashReporter/MobileDevice/<your iPhone’s name>/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-21T13:38:06.877

设备日志现在包含在此文件夹中的 SQLite 数据库中：

```
~/Library/Developer/Xcode/iOS Device Logs 
```

清除它并再次从 Xcode 控制您的 CPU！一旦它被清除，那么如果再次执行崩溃，也许你会让它显示你想要的那个。

# algorithm - 提高序数排名

> ID：14516597
> 
> 赞同：0
> 
> 时间：2013-01-25T06:34:51.387
> 
> 标签：algorithm, statistics, ranking, scoring

我正在尝试改进我们目前用于确定竞争对手在一组任务中的唯一排名的序数排名实施。

问题如下。有 K 个任务和 N 个竞争者。所有的任务都同样重要。对于每项任务，参赛者执行任务并记录他们完成任务所花费的时间。对于每个任务，根据完成时间的顺序给每个参赛者打分。最快的选手获得 N 分，第二快获得 N-1 分，以此类推，最后一名选手获得 1 分。积分被累积用于建立排名的最终计数。

请注意，如果任何两名参赛者同时完成比赛，他们将获得同等分数 - 简而言之，按序号排名。

我的问题如下，即使它们都同样重要的任务并不同样复杂。有些任务比其他任务更难。因此我们观察到的是，第一名和最后一名的竞争对手之间的时间差有时可以达到 2-3 个数量级。当 M% 的顶级竞争对手在比次佳竞争对手少 1-3 个数量级的时间内完成时，这种情况会更加复杂。

我想在最终排名中以某种方式表示并明确这些差异。

有这样的排名系统可以满足这样的要求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:38:40.407

由于您的系统是基于完成时间的，因此您显然需要按预期时间对每个任务的复杂性进行排名。因此，每个任务都需要有一个权重，然后将 N 乘以，这样第一个位置的权重*N，第二个的权重*(N-1)。最终统计将对每个参赛者的最终体重排名进行排序，并将该顺序作为他们的最终排名。

另一方面，您可以保持系统现在的样子。让竞争的一部分成为区分哪个任务比另一个任务更复杂的智慧。

# java - 如何在struts2显示表格中固定表格标题行

> ID：14516605
> 
> 赞同：0
> 
> 时间：2013-01-25T06:35:29.497
> 
> 标签：java, struts2, displaytag

如何在struts2显示表格中固定表格标题行..

下面的代码在struts2显示表中

```
<display:table id="approvalList" name="approvalList" pagesize="${PAGESIZE}" export="false"  style="width:934px;align:right;overflow: auto" class="tableHeading" requestURI="approval-list" >
<display:column  title="Reports"  sortable="false" style="width:11%;text-decoration:none;text-align:left;">111</display:column> 
<display:column  title="Project No."  sortable="false" style="width:13%;text-decoration:none;text-align:left;">222</display:column>
<display:column  title="Status"  sortable="false" style="width:16%;text-decoration:none;text-align:left;">333</display:column>   
<display:column  title="Client Name"  sortable="false" style="width:18%;text-decoration:none;text-align:left;">444</display:column>
<display:column  title="Project Name"  sortable="false" style="width:20%;text-decoration:none;text-align:left;">555</display:column>   
<display:column  title="Set No."  sortable="false" style="width:10%;text-decoration:none;text-align:left;">666</display:column>
<display:column  title="Placed Date"  sortable="false" style="width:12%;text-decoration:none;text-align:center;">777</display:column>                </display:table> 
```

上面的代码生成下面的 HTML 代码。关于如何固定表格标题行。

```
<table id="approvalList" style="width:934px;align:right;overflow: auto"  class="tableHeading">
    <thead>
    <tr>
        <th>Reports</th>
        <th>Project No.</th>
        <th>Status</th>
        <th>Client Name</th>
        <th>Project Name</th>
        <th>Set No.</th>
        <th>Placed Date</th>
    </tr>
</thead>
<tbody>     
    <tr class="even">
        <td style="width:11%;text-decoration:none;text-align:left;">111</td>
        <td style="width:13%;text-decoration:none;text-align:left;">222</td>
        <td style="width:16%;text-decoration:none;text-align:left;">333</td>
        <td style="width:18%;text-decoration:none;text-align:left;">444</td>
        <td style="width:20%;text-decoration:none;text-align:left;">555</td>
        <td style="width:10%;text-decoration:none;text-align:left;">666</td>
        <td style="width:12%;text-decoration:none;text-align:left;">777</td>
    </tr>
    <tr class="odd">
        <td style="width:11%;text-decoration:none;text-align:left;">111</td>
        <td style="width:13%;text-decoration:none;text-align:left;">222</td>
        <td style="width:16%;text-decoration:none;text-align:left;">333</td>
        <td style="width:18%;text-decoration:none;text-align:left;">444</td>
        <td style="width:20%;text-decoration:none;text-align:left;">555</td>
        <td style="width:10%;text-decoration:none;text-align:left;">666</td>
        <td style="width:12%;text-decoration:none;text-align:left;">777</td>
    </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T17:53:27.480

Struts 不给你，但 CSS 或/和 Javascript 给你。

试试[http://www.tablefixedheader.com/](http://www.tablefixedheader.com/)或[http://www.imaputz.com/cssStuff/bigFourVersion.html](http://www.imaputz.com/cssStuff/bigFourVersion.html)。一切都取决于您的要求。

另一个建议，避免内联样式（样式属性）并更喜欢 CSS 文件和类属性。它们有很多优点，你只需要在谷歌上搜索它。

我希望这对你有帮助，欢迎任何评论。

# html - 使用 YouTube 进行电子学习

> ID：14516609
> 
> 赞同：0
> 
> 时间：2013-01-25T06:35:41.887
> 
> 标签：html, youtube

我有一个包含 30 个链接的 HTML 页面，每个链接都指向一个 YouTube 视频。所有视频都属于同一个 YouTube 频道。HTML 页面还具有 YouTube 播放器。我试图弄清楚以下是否可行（可能不使用 PHP）：单击链接后，视频播放器会在同一页面上刷新并显示视频。页面本身不会刷新 - 只有视频播放器会。除了 PHP 还有其他选择吗？任何人都可以将我链接到某种超级简单的指南来自己做吗？（...“低于初学者”级别）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:39:44.723

你是如何与 youtube 链接的？带`iframe`标签？如果您正在使用，`iframe`那么您只能在同一页面中看到所有视频。页面不会刷新。

如果不是这种情况，请更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:55:30.953

您可以使用 jquery 执行此操作。在链接的 href 属性中，使用视频的嵌入 url，如下代码所示。

```
<script type='text/javascript' src='jquery.js'></script>
<script type='text/javascript'>
    $(document).ready(function() {      
        $('a').click(function() {
            $('iframe').attr('src', $(this).attr('href'));
            return false;
        });
    })
</script>

<iframe width="560" height="315" src="http://www.youtube.com/embed/J5x5gduEWtI" frameborder="0" allowfullscreen></iframe>

<br><br>
<a href='http://www.youtube.com/embed/J5x5gduEWtI'>Link1</a>
<a href='http://www.youtube.com/embed/WmDmUDXxeXU'>Link2</a>
<a href='http://www.youtube.com/embed/UNlgAuMWuvw'>Link3</a> 
```

**编辑：** 这也可以。

```
<iframe id='iframe' width="560" height="315" src="http://www.youtube.com/embed/J5x5gduEWtI" frameborder="0" allowfullscreen></iframe>

<br><br>
<a href='http://www.youtube.com/embed/J5x5gduEWtI' target='iframe'>Link1</a>
<a href='http://www.youtube.com/embed/WmDmUDXxeXU' target='iframe'>Link2</a>
<a href='http://www.youtube.com/embed/UNlgAuMWuvw' target='iframe'>Link3</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:39:23.743

如果您不想刷新页面，那么您唯一的选择是 JavaScript（即您必须在客户端执行此操作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:56:14.160

您可以通过将 youtube 播放器保存在具有某些 ID（例如：id="playerFrame"）的 iframe 中来做到这一点。然后在相关的超链接（'a'标签）中，将 iframe 的 id 作为“target”属性的值。

```
<iframe id="playerFrame"></iframe>
<a href="http://youtubeurl" target="playerFrame">Click to see video 1</a> 
```

请参阅[http://webdesign.about.com/od/iframes/qt/target-links-iframes-and-frames.htm](http://webdesign.about.com/od/iframes/qt/target-links-iframes-and-frames.htm)

# jquery - 下面的代码在 jquery 中返回什么？

> ID：14516614
> 
> 赞同：0
> 
> 时间：2013-01-25T06:36:20.963
> 
> 标签：jquery, textbox

```
$("#para").text('')
.append($("input.selected").map(function() {
return $(this).val() || null;
}).get().join("<br/> ")); 
```

这里的目的是 `$(this).val() || null;`什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T06:39:43.947

`val()`将输入的值作为字符串返回。空字符串是 JS 中的假值，这意味着如果字符串为空，那么它将评估为假。`||`如果前一个条件为假，OR 短路运算符将评估其后的代码。`null`因此，如果值为空，则该代码正在执行的操作是返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:39:00.293

[$.map()](http://api.jquery.com/jQuery.map/) ... 将 input.selected 的值映射到一个数组.. 并将`join`它们与`<br>`.

> 将数组或对象中的所有项转换为新的项数组。

因此，您的代码将值（如果存在）或`input`带有类的 NULL 附加`selected`到具有 id 的元素`para`

**例子..**

```
<div id="para"></div>

<input class="selected" value="test"/>
<input class="selected" value="test2"/>
 <input class="selected" value=""/>  // || NULL works here so returns null 
```

上面的函数将附加这个

```
test <br> test2 
```

到`#para`

**最后结果**

```
<div id="para">test <br> test2</div>  //result is the same 
```

# c# - 在列表视图中添加控件

> ID：14516621
> 
> 赞同：0
> 
> 时间：2013-01-25T06:36:46.897
> 
> 标签：c#, .net, listview, windows-mobile

我正在使用 .NET CF 在 Windows Mobile 中制作应用程序。

需要在 listview 的第三列中添加 textboc。谷歌搜索但只获得网络应用程序的解决方案。

在window mobile中不可能吗？？？？

到目前为止我尝试过的代码......（虽然它不起作用:-)）

```
 for (int i = 0; i < soups.Length; i++)
      {
         ListViewItem li = new ListViewItem();
         li.Text = "RSO" + (i+1);
         li.SubItems.Add(arrval[i]);

         //in 1st attemp i  tried                                             
         li.SubItems.Add(new TextBox());
         //in 2nd attemped           
         TextBox tbox =  new TextBox();  
         li.SubItems.Add(tbox);

         li.SubItems.Add(Convert.ToString(5 * (i + 1)));
         li.SubItems.Add(Convert.ToString(35 * (i + 1)));
         lst_option.Items.Add(li);
      } 
```

但两种方法都不起作用....原因很明显，因为我试图在 add() 方法中添加 obj 而不是字符串:) :)

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:09:49.160

Compact Framework 的所有现成控件（ListView、ListBox、DataGrid 等）都没有提供此功能。The common work-around is to place a separate TextBox on the form and when a ListViewItem is selected, move the Textbox to cover the location of the subitem/cell, put the subitem/cell text into the TextBox, then make it visible.

# comparison - WSO2 ESB 中介序列与代理服务

> ID：14516623
> 
> 赞同：2
> 
> 时间：2013-01-25T06:36:55.737
> 
> 标签：comparison, wso2, wso2esb, synapse, eai

WSO2 ESB 具有用于实现 EAI 模式的中介序列和代理服务。我目前是新手，无法区分何时使用中介序列或代理服务。两者似乎在大多数用例中都运行良好。我应该什么时候使用每个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T07:37:16.347

序列（Mediation Sequence）是一个中介序列。一条消息进入序列，按照它们在序列中的位置顺序通过每个中介。因此，中介序列是 WSO2 ESB 的通用构建材料。

中介序列理论上可用于处理通过它的任何类型的消息（二进制、JSON、XML），前提是中介可以成功处理这些消息。

因此，可以使用中介序列，

1.  将消息代理到/来自 Web 服务
2.  将消息代理到/来自 REST 服务
3.  还有更多的应用......

代理服务是 WSO2 ESB 中的特殊模块，旨在满足第 1 条的要求。（代理与 Web 服务之间的消息）因此，代理服务是在 Web 服务端点支持下的专用中介序列。

WSO2 ESB 有助于以不同的方式为不同类型的需求创建代理服务。

例如：

1.  基于 WSDL 的代理 - 用于使用给定的 WSDL 创建代理服务
2.  Pass through proxy - 用于简单地使用 Endpoint URL 创建代理服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:26:13.437

如果您需要代理服务，并且需要对消息进行调解和执行不同的操作，则可以使用代理服务。

序列是一组中介（中介树），您可以通过它们发送消息。如果您将调解器视为构建单元，则可以按顺序添加它们并将其定义为以后可重用的序列。您可以在代理服务中引用序列，并让消息流经序列中定义的中介。

在高级别的代理显然也是服务消费者的服务，但它实际上调用实际的端点来完成实际的工作。

# java - Spring MVC：如何在不使用表单的情况下将模型对象传递给控制器 方法

> ID：14516626
> 
> 赞同：0
> 
> 时间：2013-01-25T06:37:19.743
> 
> 标签：java, spring-mvc

我有一个控制器类，我正在向模型添加一个对象，在视图中我可以访问它，现在我想将此对象发送回一个新的控制器方法，是否可以不使用表单来做到这一点？示例代码是：

在这里，我正在为模型添加“细节”。

```
@RequestMapping(...)
public ModelAndView method1() {
       .....
        mv.addObject("details", details);
         mv.setViewName(REVIEW_PAGE);
         return mv;
} 
```

我在查看详细信息的评论页面上有一个“确定”按钮。现在我想将此“详细信息”对象发送回新的提交方法。我想在同一控制器类的第二种方法中访问详细信息对象。

我尝试将其添加为模型属性（如您在以下代码中所见），但我在详细信息对象中获取空值。

```
@RequestMapping(....)
public ModelAndView method2(@ModelAttribute("details") Details details){
//access details object here        

} 
```

流程是这样的：（在模型中添加详细信息（方法1）->发送查看以供审核->确认（单击确定）->发送回提交（方法2））

我是 Spring MVC 的新手，所以如果我的问题有错误，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:53:35.323

`@SessionAttributes`您可以使用控制器上的注释告诉 Spring 在服务器端保留模型的副本

```
@Controller
@SessionAttributes("details")
public class TheController {
} 
```

这有一些警告。默认的内置实现非常基本，例如，不考虑跨选项卡使用相同会话的多选项卡浏览器。它也没有自动清理。完成数据后，您必须手动调用`session.setComplete()`。

# jsp - 如果影响 Struts 2 的标签包含标签

> ID：14516627
> 
> 赞同：0
> 
> 时间：2013-01-25T06:37:22.507
> 
> 标签：jsp, struts2

我正在尝试将一个 jsp 页面包含到另一个 jsp 页面中。例如，我有一个`main.jsp`包含`extra.jsp`但它不起作用的页面。`extra.jsp`包含一个 Struts if 标签，当我删除它时，包含工作正常。可能的问题是什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:17:16.853

我认为`if condition`如果您提到任何条件，那么问题就出在您的手中，那么它将无法正常工作，例如：在 extra.jsp 中

```
<s:if test='(#session.name == "admin")'>
</s:if> 
```

（“名称”可以是您的应用程序的任何名称。）

现在，如果您尝试打开`extra.jsp`它，它将询问包含 admin 的名称。

如果您输入任何错误的名称页面将不会打开，直到使用正确的名称，所以直接进入 else 块（或）网页将显示为空白页面。

在您的情况下，问题可能是相同的手段，如果条件存在且某些条件可能显示错误。

# delphi - 使用 DragMode=dmAutomatic 时 OnClick 和 MouseDown 不起作用

> ID：14516629
> 
> 赞同：2
> 
> 时间：2013-01-25T06:37:29.440
> 
> 标签：delphi

我也有左键单击 TPanel 和 TAdvPanel（TMS 组件）的问题。如果我设置`DragMode = dmAutomatic`然后左键单击不起作用。右键单击有效。

```
procedure TMain_Form.Panel_Item_01MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
if Button = mbLeft then
   begin
     { whatever I type here nothing happen, even showmessage wont popup - no effect}
   end;
if Button = mbRight then
   begin
     { here code works fine }
   end;
end; 
```

对我来说这似乎很简单，但是......找不到解决此问题的方法并在左键单击时调用程序。伙计们，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:02:50.823

猜猜问题现在解决了。

如果将 TPanel 组件 DragMode 设置为 dmAutomatic 似乎无法触发 OnClick 事件。但是，当我将相同的 TPanel DragMode 设置为 dmManual 时，它甚至可以运行 OnClick。

即使我手动设置 Panel_Item_01.DragMode := dmManual; 现在它可以识别鼠标左键并保留 TPanel DragDrop 功能。

这是完整的代码：

```
procedure TMain_Form.Panel_Item_01MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
 if Button = mbLeft then
    begin
     Panel_Item_01.DragMode := dmManual;    
     { ..rest of code.. }  
    end;
 if Button = mbRight then
    begin
     Panel_Item_01.DragMode := dmAutomatic;
     { ..rest of code.. }  
    end;
end;

procedure TMain_Form.Panel_Item_01MouseEnter(Sender: TObject);
begin
 Panel_Item_01.DragMode := dmManual;
end;

procedure TMain_Form.Panel_Item_01MouseLeave(Sender: TObject);
begin
 Panel_Item_01.DragMode := dmAutomatic;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-26T22:48:27.640

有一个技巧可以“检查” eq。带有 DragMode=TDragMode.dmAutomatic 的 TButton。只需检查 OnMouseLeave 和 OnMouseEnter 之间的时间距离... 代码：

```
uses DateUtils;
var Time1:TDateTime;

procedure TForm4.Button2MouseLeave(Sender: TObject);
begin
  Memo1.Lines.Add('OnMouseLeave');
  Time1:=Now;
end;

procedure TForm4.Button2MouseEnter(Sender: TObject);
var
  A:Integer;
begin
  A:=MillisecondsBetween(Time1,Now);
  Memo1.Lines.Add('OnMouseEnter '+IntToStr(A));
end; 
```

然后看到单击 TButton 时，时间距离始终为 0。另一个事件的时间距离更大。

我知道解决这个问题的方法并不明确，但 Embarcadero 有时会让我发疯......

# mysql - 我如何找到服务器的地理坐标/位置？

> ID：14516632
> 
> 赞同：1
> 
> 时间：2013-01-25T06:37:44.783
> 
> 标签：mysql, networking, geography

我有一个包含 190 个 IP 地址列表的文本文件。我如何获得所有这些服务器的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T23:15:27.420

在带有 pygeoip 的 python 中：

```
#!/usr/bin/env python
import sys
import pygeoip

def main():
    db = pygeoip.GeoIP('GeoLiteCity.dat')
    source = "MyIpList.txt"
    with open(source, 'r') as fs:
        lignes = fs.readlines()
        for ip in lignes:
            dico =  db.record_by_addr(ip)
            for k,v in dico.iteritems():
                print "%s : %s" % (k,v)

if __name__ == '__main__':
    main() 
```

您下载[地理城市数据库](http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz "下载 Geo City 数据库")并以此格式创建 MyIpList.txt 文件。

```
64.233.161.99
209.131.36.159 
```

此脚本打印： country_code country_code3 country_name region, city postal_code latitude longitude dma_code metro_code area_code region_name time_zone

[record_by_addr()](http://packages.python.org/pygeoip/pygeoip-pysrc.html#GeoIP.record_by_addr "男人")返回一个字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:57:00.957

有一些免费的 IP 到地理位置 API，例如[ipinfodb](http://ipinfodb.com/ip_location_api.php)，在页面下方有一些不同语言的示例。我建议在谷歌上搜索“ip to location api”一词以获取更多 api。

# reference - collada 外部参考

> ID：14516633
> 
> 赞同：4
> 
> 时间：2013-01-25T06:37:44.290
> 
> 标签：reference, external, collada

当我使用 collada dom 1.4 的查看器加载样本时。外部参考文件

```
 <library_nodes>
  <node>
       <instance_geometry url="cube.dae#box-lib"/>
  </node>
</library_nodes> 
```

我尝试了许多 collada 加载器，例如 glc_player、google sketchUp，但没有一个成功。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:57:08.240

我是[pycollada](https://github.com/pycollada/pycollada)的维护者，我对 COLLADA 格式有丰富的经验。

COLLADA 中的外部引用是一个好主意，但在当今可用的一组库和工具中几乎不支持它。如果您想在自己的工具中使用外部引用，那很好，但是您破坏了与几乎所有导入 COLLADA 的工具的兼容性。

[COLLADA Conformance Test Suite](https://github.com/KhronosGroup/COLLADA-CTS)已经为解决此类问题做出了一些努力，但尚未得到太多采用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T01:28:29.893

根据此文档：[vandaengine 文档](http://vandaengine.com/exporting-from-maya/)OpenCOLLADA 导入/导出应该支持外部引用，vandaengine 也是如此。我自己没有尝试过。

# java - 通过子字符串解析后如何回收内存？实习生（）还是新字符串（）？

> ID：14516635
> 
> 赞同：20
> 
> 时间：2013-01-25T06:37:48.183
> 
> 标签：java, memory

短版：如果调用string.substring(n,m).intern()，字符串表是保留子字符串还是原始字符串？

...但我不确定这是一个正确的问题，所以这里是长版本：

我正在使用遗留 Java 代码 (PCGen)，它通过将每个文件作为一个大字符串来解析文件，然后使用 String.split、.trim、.substring 和 StringTokenizer 将它们分解为令牌。这对于解析非常有效，因为这些方法都不会复制原始字符串，而是都指向共享 char[] 的一部分。

解析结束后，我想回收一些内存。只需要原始大字符串的几个小子字符串，但强引用阻止了大字符串被收集。后来我遭受了OOM，我相信部分是由于大量已解析文件的巨大堆影响。

`new String(String)`我知道我可以通过（写时复制）修剪大字符串。而且我知道我可以通过 String.intern 减少字符串重复（这很重要，因为解析的文件中有很多冗余）。我需要同时使用两者来回收最大数量的堆，还是 .intern() 两者都做？阅读 OpenJDK7 热点源代码（hotspot/src/share/vm/classfile/symbolTable.cpp），看起来字符串表保留了整个字符串，并且根本没有修剪它的偏移量/长度。所以我想我需要制作一个新的字符串，然后实习这个结果。对？

综上所述，切换到流式解析器在内存方面将是一个巨大的胜利，但这对于短期而言变化太大了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T06:48:15.150

您可以使用 new String(String) 和 intern() 方法，这将根据需要获取 Java 7 update 4 的副本。从 Java 7 update 5 开始，子字符串将获取更深的副本，但您可能仍想使用 intern ()。注意：Java 7 使用堆而不是 perm gen 来存储字符串文字。

```
public static void main(String[] args) {
    char[] chars = new char[128];
    Arrays.fill(chars, 'A');
    String a128 = new String(chars);
    printValueFor("a128", a128);
    String a16 = a128.substring(0, 16);
    printValueFor("a16", a16);
}

public static void printValueFor(String desc, String s) {
    try {
        Field value = String.class.getDeclaredField("value");
        value.setAccessible(true);
        char[] valueArr = (char[]) value.get(s);
        System.out.println(desc + ": " + Integer.toHexString(System.identityHashCode(valueArr)) + ", len=" + valueArr.length);
    } catch (Exception e) {
        throw new AssertionError(e);
    }
} 
```

在 Java 7 更新 4 打印

```
a128: 513e86ec, len=128
a16: 53281264, len=16 
```

我希望 Java 6 不会这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T06:59:14.553

我们可以测试一下。字符串将其字符数组保存在一个字段中

```
 private final char value[]; 
```

让我们看看在 substring() 之后会发生什么；实习生（）;

```
 Field f = String.class.getDeclaredField("value");
    f.setAccessible(true);
    String s1 = "12345";
    String s2 = s1.substring(1, 2);
    String s3 = s2.intern();
    System.out.println(f.get(s2) == f.get(s1));
    System.out.println(f.get(s3) == f.get(s2)); 
```

输出

```
true
true 
```

也就是说，所有 3 个字符串共享同一个字符数组

# c++ - openGL glx.h 缺少表单 xcode 4 mac lion

> ID：14516637
> 
> 赞同：2
> 
> 时间：2013-01-25T06:37:50.570
> 
> 标签：c++, xcode, opengl

我正在尝试设置一个使用[GLSDK](http://glsdk.sourceforge.net/docs/html/index.html)的示例项目。我使用 premake 进行了设置（将项目基础 sdk 设置为 10.6，因为我使用的是 xcode 4）但是当我尝试编译时，我从示例文件中得到“GL/gl.h not found”。

所以我手动添加了 opengl 框架并将 GL/gl.h 更改为 OpenGl/gl.h 并且它可以工作，但是我在不同的行中得到了相同的错误，现在我意识到在 opengl 框架中不存在标题，即使它应该。

我可以看到它在其他程序中得到引用，并且我一直看到它的示例代码。但是由于某种原因它在我的计算机上不存在？

还是我错过了像往常一样的东西。[仅供参考，我想在这里](http://www.arcsynthesis.org/gltut/Building%20the%20Tutorials.html)设置示例项目，我确定我搞砸了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:07:01.653

[http://support.apple.com/kb/HT5293](http://support.apple.com/kb/HT5293)

如果您安装 XQuartz，您将获得具有 glx.h 的 X11

# javascript - 如果找不到路由，则调用函数

> ID：14516643
> 
> 赞同：0
> 
> 时间：2013-01-25T06:38:34.883
> 
> 标签：javascript, backbone.js, backbone-routing

在我的应用程序中有如下定义的 3 条路由，一切正常，但是当调用未定义的路由时，会显示空白页。比如，如果我输入 url，`http://example.com/page.php/#invalidRoute`那么我会得到一个空白页面，如果没有找到路由，我想加载“个人资料”视图，我的代码在下面给出....

```
ProfileRouter = Backbone.Router.extend({
    initialize : function() {},
    routes : {
        '' : 'profile',
        'detailedProfile' : 'detailedProfile',
        'moreReviews' : 'moreReviews',
    },
    profile : function() {
       /*Load a profile*/
    },
    detailedProfile : function() {
        /*Load detail profile*/
    },
    moreReviews : function() {
        /*Load more review*/
    }
}); 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:51:22.847

你可以做这样的事情。最后一条路线将匹配其他路线未完成的所有其他路线。在这种情况下，路线的顺序也很重要。

```
routes : {
    '' : 'profile',
    'detailedProfile' : 'detailedProfile',
    'moreReviews' : 'moreReviews',
    '*invalidRoute' : 'profile' /* catch all route */
} 
```

# php - 如何将月份名称数组转换为数字数组

> ID：14516650
> 
> 赞同：-2
> 
> 时间：2013-01-25T06:39:17.337
> 
> 标签：php

在这里我定义了我的月份名称数组

```
$months = array(1 => 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'); 
```

下面是我循环通过它以在下拉列表中获取月份名称的代码。

```
<tr>
    <td>Period From:<span id="star">*</span> 

        <select name="monthfrom" id="monthfrom" style="width:60px">
            <option value="Month">Month</option>
            <?php
            foreach ($months as $value) {
                echo '<option value="' . $value . '">' . $value . '</option>\n';
            }
            ?>
        </select>
    </td>
</tr> 
```

执行后，我希望下拉列表中的月份名称，但值应该是两位数的月份编号（带前导零）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:41:09.290

```
foreach ($months as $key=>$value) {
    printf('<option value="%02d">%s</option>', $key, $value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:42:49.887

除了使用`$key=>$value`，还可以使用计数器来确定对应月份的数值：

```
$x = 1;

foreach ($months as $value) {
    echo '<option value="' . $x . '">' . $value . '</option>\n';
    $x++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:43:35.897

你可以使用 foreeach 之类的

```
 foreach (array_expression as $key => $value)
     statement 
```

[来自手动 foreach ¶](http://php.net/manual/en/control-structures.foreach.php#control-structures.foreach)

所以现在你可以通过

```
foreach ($months as $key=>$value) {
    echo '<option value="' . $key . '">' . $value . '</option>\n';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:43:42.000

它会帮助你。尝试这个，

```
$months = array('1' => 'Jan', '2'=>'Feb', '3'=>'Mar', '4'=>'Apr', '5'=>'May', '6'=>'Jun', '7'=>'Jul', '8'=>'Aug', '9'=>'Sep', '10'=>'Oct', '11'=>'Nov', '12'=>'Dec'); 
```

你的选择框应该是，

```
<select name="monthfrom" id="monthfrom" style="width:60px">
                        <option value="Month">Month</option>
                        <?php
                        foreach ($months as $key=> $value) {
                            echo '<option value="' . $key . '">' . $value . '</option>\n';
                        }
                        ?>
                        </select> 
```

# vb.net - vb2010中添加、编辑、删除、搜索的代码

> ID：14516653
> 
> 赞同：0
> 
> 时间：2013-01-25T06:39:25.870
> 
> 标签：vb.net, visual-studio-2010

我目前正在学校写论文，他们要求我使用 VB2010 和 MS ACCESS 2010。

连接和操作数据库的更简单方法是什么？是使用 MS ACCESS 2003 吗？还是 MS ACCESS 2007？

我需要一些帮助，因为我是 Visual Basic 2010 的新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:42:28.083

你用谷歌搜索过 - [insert update delete access vb.net](http://www.google.co.in/search?q=insert%20update%20delete%20access%20vb.net&aq=1&oq=insert%20update%20delete%20access%20with%20&sourceid=chrome&ie=UTF-8)，有很多关于此的参考。

[使用 VB.NET 在 Access 数据库中插入更新删除导航和搜索](http://www.dotnetheaven.com/article/insert-update-delete-navigation-searching-in-access-databa)

*   创建 Visual Basic 2010 项目：VB-Access
*   假设，我们有一个名为 data.mdb 的数据库文件
*   将 data.mdb 文件放入 ..\bin\Debug\ 文件夹（项目可执行文件 (.exe) 所在的位置）

**连接和操作数据库的更简单方法是什么？**
使用 OleDBConnection 类与 DB 建立连接

**是使用 MS ACCESS 2003 还是 MS ACCESS 2007？**
您可以使用任何您想使用的东西，或者您的客户将在他们的机器上使用。

似乎您想找到一些数据库操作的示例。以下是 Access 2010 的示例供您参考：

示例代码片段：

```
Imports System
Imports System.Data
Imports System.Data.OleDb

Public Class DBUtil

 Private connectionString As String

 Public Sub New()

  Dim con As New OleDb.OleDbConnection
  Dim dbProvider As String = "Provider=Microsoft.ace.oledb.12.0;"
  Dim dbSource = "Data Source=d:\DB\Database11.accdb"

  connectionString = dbProvider & dbSource

 End Sub

 Public Function GetCategories() As DataSet

  Dim query As String = "SELECT * FROM Categories"
  Dim cmd As New OleDbCommand(query)
  Return FillDataSet(cmd, "Categories")

 End Function

 Public SubUpdateCategories(ByVal name As String)
  Dim query As String = "update Categories set name = 'new2' where name = ?"
  Dim cmd As New OleDbCommand(query)
cmd.Parameters.AddWithValue("Name", name)
  Return FillDataSet(cmd, "Categories")

 End Sub

 Public Function GetItems() As DataSet

  Dim query As String = "SELECT * FROM Items"
  Dim cmd As New OleDbCommand(query)
  Return FillDataSet(cmd, "Items")

 End Function

 Public Function GetItems(ByVal categoryID As Integer) As DataSet

  'Create the command.
  Dim query As String = "SELECT * FROM Items WHERE Category_ID=?"
  Dim cmd As New OleDbCommand(query)
  cmd.Parameters.AddWithValue("category_ID", categoryID)

  'Fill the dataset.
  Return FillDataSet(cmd, "Items")

 End Function

 Public Sub AddCategory(ByVal name As String)

  Dim con As New OleDbConnection(connectionString)

  'Create the command.
  Dim insertSQL As String = "INSERT INTO Categories "
  insertSQL &= "VALUES(?)"
  Dim cmd As New OleDbCommand(insertSQL, con)
  cmd.Parameters.AddWithValue("Name", name)

  Try
   con.Open()
   cmd.ExecuteNonQuery()
  Finally
   con.Close()
  End Try

 End Sub

 Public Sub AddItem(ByVal title As String, ByVal description As String, _
    ByVal price As Decimal, ByVal categoryID As Integer)

  Dim con As New OleDbConnection(connectionString)

  'Create the command.
  Dim insertSQL As String = "INSERT INTO Items "
  insertSQL &= "(Title, Description, Price, Category_ID)"
  insertSQL &= "VALUES (?, ?, ?, ?)"
  Dim cmd As New OleDb.OleDbCommand(insertSQL, con)
  cmd.Parameters.AddWithValue("Title", title)
  cmd.Parameters.AddWithValue("Description", description)
  cmd.Parameters.AddWithValue("Price", price)
  cmd.Parameters.AddWithValue("CategoryID", categoryID)

  Try
   con.Open()
   cmd.ExecuteNonQuery()
  Finally
   con.Close()
  End Try

 End Sub

 Private Function FillDataSet(ByVal cmd As OleDbCommand, ByVal tableName As String) As DataSet

  Dim con As New OleDb.OleDbConnection
  Dim dbProvider As String = "Provider=Microsoft.ace.oledb.12.0;"
  Dim dbSource = "Data Source=D:\DB\Database11.accdb"

  connectionString = dbProvider & dbSource
  con.ConnectionString = connectionString
  cmd.Connection = con
  Dim adapter As New OleDbDataAdapter(cmd)
  Dim ds As New DataSet()

  Try
   con.Open()
   adapter.Fill(ds, tableName)
  Finally
   con.Close()
  End Try
  Return ds

 End Function

End Class 
```

请参阅这些链接：
[在 MS Access 2003 中使用 VB.NET 2005 插入、更新、删除和搜索值 在](http://www.codeproject.com/Articles/26801/Insert-Update-Delete-Search-Values-in-MS-Access-20)
[MS-Access 中使用 VB 2008 插入、删除、更新和选择数据](http://www.setha.info/ict-vb2008/43-ict-vb2008-0011.html)
[如何使用 Vb.net 添加新记录、更新记录、删除记录Access 作为后台时的表单](http://www.dotnetspider.com/forum/305022-How-Add-new-record-Update-record-Delete-Records-using-Vb.net-Forms-Access-back.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:44:39.460

[**MSDN**](http://msdn.microsoft.com/en-us/library/ms123401.aspx)是一个很好的资源起点，因为您正在研究 Microsoft 产品

# jasper-reports - 如何将图表拆分为多个页面，如 JasperReports Server 中的交叉表？

> ID：14516654
> 
> 赞同：1
> 
> 时间：2013-01-25T06:39:29.873
> 
> 标签：jasper-reports, jasperserver

我想将水平条形图拆分为多个页面，因为类别表达式数据集在 200 左右很大，这导致图表的格式不可读。

我想要类似的东西，将类别表达式数据集分布在 15 个块中，以便在 page1 中显示前 15 个类别，依此类推。我想知道，如果它在*JasperReports Server*中使用*iReport Professional 4.5.0*可行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:07:06.487

您可以利用报告组来实现这一点。在 iReport 中打开您的报告。报告查询是主要的报告查询，在我的示例中，我将引用两个字段：`cat`作为类别和`val`作为值。

*   在报告检查器中右键单击报告并选择*Add Report Group*。按照向导，设置名称（例如*splitter*）并选择*Group by the following expression*并输入`$V{REPORT_COUNT} - 1 - ( ($V{REPORT_COUNT} - 1) % 15 )`。单击下一步并选择*添加组页脚*。
*   将图表元素从 Palette 拖放到组页脚区域的报表设计器中。选择条形图，按照向导：
    *   选择*Main report dataset*，单击 Next。
    *   将系列表达式更改为您需要的（例如`"Sample"`），单击下一步。
    *   将类别表达式设置为`$F{cat}`，将值表达式设置为`$F{val}`。单击完成。向导关闭，图表现在已在报告中配置。
*   右键单击图表，单击*图表数据*。在 Dataset 面板中，将 Reset type 设置为*Group*，选择作为 Reset Group 您的组（例如*splitter*）。单击关闭。

*建议 1*：选择图表并在 Properties 面板中滚动到*Range Axis Max Value Expression*，在那里设置图表的最大值。这将确保所有图表都具有相同的比例。在随附的示例中，我将其静态设置为 100，最好通过数据库查询提供最大值。

*建议 2*：当您运行报告时，您可能会注意到最后一个条形图可能看起来不同，因为 JasperReports/jfreechart 根据类别数缩放条形的宽度。要为条形图设置静态宽度，您需要创建一个图表定制器，将固定宽度设置为单个条形。

我附加了一个示例输出，我在示例数据集上将拆分器值设置为 3。 ![报告输出](../Images/7aca39aa8ead670887802191e10c7b19.png)

我还附上了 JRXML 以供进一步参考。与上述描述的不同之处在于，我没有使用静态值，而是定义了一个参数来定义单个条形图中的元素数量。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report5" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="271b22ae-bc2f-4da1-a499-e41a8f4252b2">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="splitBy" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[3]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[select val, cat from (
select 15 as val, "A" as cat
union select 65 as val, "B" as cat
union select 34 as val, "C" as cat
union select 99 as val, "D" as cat
union select 67 as val, "E" as cat
union select 23 as val, "F" as cat
union select 76 as val, "G" as cat
union select 23 as val, "H" as cat
union select 56 as val, "I" as cat
union select 11 as val, "J" as cat
union select 23 as val, "K" as cat
union select 5 as val, "L" as cat
union select 11 as val, "M" as cat
union select 15 as val, "N" as cat
union select 12 as val, "O" as cat
union select 13 as val, "P" as cat
) tbl group by cat
]]>
    </queryString>
    <field name="val" class="java.lang.Long"/>
    <field name="cat" class="java.lang.String"/>
    <group name="splitter">
        <groupExpression><![CDATA[$V{REPORT_COUNT} - 1 - ( ($V{REPORT_COUNT} - 1) % $P{splitBy} ) ]]></groupExpression>
        <groupFooter>
            <band height="154">
                <barChart>
                    <chart>
                        <reportElement uuid="e046c83e-11c5-4f3a-adfb-a540024400f5" x="0" y="0" width="555" height="154"/>
                        <chartTitle/>
                        <chartSubtitle/>
                        <chartLegend/>
                    </chart>
                    <categoryDataset>
                        <dataset resetType="Group" resetGroup="splitter"/>
                        <categorySeries>
                            <seriesExpression><![CDATA["Sample"]]></seriesExpression>
                            <categoryExpression><![CDATA[$F{cat}]]></categoryExpression>
                            <valueExpression><![CDATA[$F{val}]]></valueExpression>
                        </categorySeries>
                    </categoryDataset>
                    <barPlot>
                        <plot/>
                        <itemLabel/>
                        <rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
                    </barPlot>
                </barChart>
            </band>
        </groupFooter>
    </group>
</jasperReport> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:53:53.217

您可以使用 Groups 来添加组并在添加组时添加条件。

```
 $V{REPORT_COUNT} - 1 - ( ($V{REPORT_COUNT} - 1) % 10 ) 
```

# youtube - YouTube 自动调整大小

> ID：14516657
> 
> 赞同：0
> 
> 时间：2013-01-25T06:39:34.793
> 
> 标签：youtube

如果将 YouTube 视频嵌入网页中，是否有办法使其尺寸变小（例如 200 x 150），然后在播放时将其重新调整为更大尺寸（例如 400 x 300）。一个示例是在 Gmail 中收到视频时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:54:25.923

您可以尝试让 javascript 监听播放器的 onStateChange 事件，当状态更改为“1”（正在播放）时，您将宽度和高度更改为新大小。也许这样的事情可以工作：

```
var player = document.getElementById("youtube-player");

function onPlayerStateChange(evt) {
  if (evt.data == "1") {
    player.style.width = "400px";
    player.style.height = "300px";
  }
}

player.addEventListener("onStateChange", onPlayerStateChange); 
```

您可以在此处使用 javascript api：[https](https://developers.google.com/youtube/youtube_player_demo) ://developers.google.com/youtube/youtube_player_demo这里是参考：[https](https://developers.google.com/youtube/iframe_api_reference#Events) ://developers.google.com/youtube/iframe_api_reference#Events这假设它是一个嵌入你在网页上，我真的不明白你的意思是“......视频在Gmail中收到”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:44:45.780

您可以尝试将点击事件绑定到标签，然后将元素调整为更大的尺寸，但我猜测 Flash 视频播放器会劫持点击事件而不是将其冒泡到 DOM。

否则，您可以使用海报图像占位符，然后单击该占位符，将图像替换为您想要的任何大小的实际视频播放器。

# php - Linux 托管中的 PHP Websocket 服务器

> ID：14516662
> 
> 赞同：6
> 
> 时间：2013-01-25T06:39:49.970
> 
> 标签：php, websocket, vps, paas

我有一个 GoDaddy Linux 主机，知道如何为我的 HTML5 网络应用程序运行 websocket 服务器吗？还有其他推荐吗？

我知道 VPS 可以做到，但它很昂贵，有什么 PaaS 解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:48:46.633

如果您有共享托管计划，您很可能无法访问套接字，从而无法使用 WebSocket API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:22:18.403

目前最好的 PHP WebSocket 自托管/安装解决方案是[Ratchet](http://socketo.me)。

但是，正如@HartleySan 所述，由于需要持久连接，您不太可能被允许在共享计划中使用 WebSocket 解决方案。对于为每个请求分配大量资源的通用 PHP 解决方案尤其如此。Ratchet 可能已经解决了这个问题，我不知道。

恕我直言，PHP 的最佳解决方案是使用托管服务，例如我工作的[Pusher 。](http://pusher.com)还有其他可用的[实时网络托管解决方案](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)。这意味着您将持久连接卸载到托管服务，并且可以以正常方式使用您的 PHP 堆栈。

也相关：OpenShift，一种 PaaS，写了一篇文章，涵盖[了 WebSockets 的挑战](https://openshift.redhat.com/community/blogs/paas-websockets)。这有助于解释其他托管服务提供商在支持 WebSocket 时遇到的问题。

OpenShift 在预览版中确实支持 WebSocket，因此您可以尝试一下。但是，如果您已经为共享主机付费，这显然是一个问题。如上所述，我建议将托管服务作为最佳解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:01:27.313

您将需要一台虚拟专用服务器。

如果你设置好了，你可以看看[socket.io](http://socket.io/)和[node.js](http://nodejs.org/)，它们正是你想要的。有几个示例说明如何在他们的网站上进行设置，另外您可以查看[这篇博客文章](http://wesbos.com/html5-canvas-websockets-nodejs/)，其中有一些关于如何使用 html5 的画布和 websockets 设置 node.js 和 socket.io 以获得一些实时性的示例绘图正在进行。

* * *

编辑：有第二个选项运行基于 php 的套接字服务器，虽然不如上面的选项好，但它可能（？）可以在没有 vps 的情况下完成。

PHP 具有创建套接字服务器的一些基本函数，这些函数在[此处](http://php.net/manual/en/ref.sockets.php)列出。有几个示例说明如何设置[它](http://www.funphp.com/?p=33)。还有this [stackoverflow answer here](https://stackoverflow.com/a/9047627/1312672)列出了几个谷歌代码项目，这些项目正是您需要的，例如[this](http://code.google.com/p/phpwebsocket/)。

# codeigniter - 带有 GET 参数的 Codeigniter 页面缓存

> ID：14516670
> 
> 赞同：1
> 
> 时间：2013-01-25T06:40:15.867
> 
> 标签：codeigniter, caching

我是 CI 缓存的新手。我在使用 codeigniter 页面缓存时遇到了一些奇怪的问题。`$this->output->cache(300);` 如果参数发生变化，我期待缓存版本不会加载`GET[]`。但它是在不考虑任何`GET[]`参数的情况下加载缓存。

我有一页显示评论是否已保存[通过获取参数]， `/product/product-name/?saved=true`重定向到评论表单所在的同一页面。但它不起作用。如何根据 get 参数使旧缓存无效并创建新缓存？或者我需要改变我的评论系统的行为？

谢谢。

**编辑**

在这种情况下我应该简单地使用`database cache`而不是吗？`Web page cache`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-28T17:36:03.590

您只需`cache_query_string`在文件中启用该选项`config/config.php`。

```
$config['cache_query_string'] = TRUE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:57:14.570

创建一个 cache_override 挂钩以检查是否设置了任何 GET[] 变量，然后跳过 cache_override。

[编辑#1]

这是一个例子：

在你的 hooks 目录中创建这个文件：

```
<?php

class GetChecker {

    public function checkForGet()
    {
        global $OUT, $CFG, $URI;

        if (isset($_GET) AND ! empty($_GET))
        {
            return;
        }

        if ($OUT->_display_cache($CFG, $URI) == TRUE)
        {
            exit;
        }
    }

} 
```

然后将其添加到 config/hooks.php：

```
$hook['cache_override'][] = array(
    'class' => 'GetChecker',
    'function' => 'checkForGet',
    'filename' => 'GetChecker.php',
    'filepath' => 'hooks'
); 
```

我还没有测试它，它可能需要一些调整才能工作......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-04T14:35:18.130

我在 CI 3+ ，文件系统/核心/Output.php 559 行上测试，改变这个

```
if ($CI->config->item('cache_query_string') && !empty($_SERVER['QUERY_STRING']))
    {
        $uri .= '?'.$_SERVER['QUERY_STRING'];
    } 
```

在这

```
if ($CI->config->item('cache_query_string') /* && ! empty($_SERVER['QUERY_STRING']) */ && !empty($_REQUEST))
    {
        // $uri .= '?'.$_SERVER['QUERY_STRING'];
        $uri .= '?'.http_build_query($_REQUEST);

    } 
```

并将字符串添加到您的 application/config/config.php

```
$config['cache_query_string'] = true; 
```

它适用于 GET、POST、COOKIE .... 如果只需要 GET，只需 $config['cache_query_string'] = true; - 足够的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T12:44:44.310

我发现没有更简单的方法`Hooks`来防止写入缓存，因为它在类的方法本身`_write_cache()`内部调用。`_display()``CI_Output`

为了快速和最简单的解决方案，我添加了两个条件来显示缓存和写入缓存，如果查询字符串参数定义了变量（`offset`在我的情况下，我想要分页）

**编辑：system/core/Output.php**

如果找到特定参数，则添加 Condition 以防止*写入缓存：*`GET`

```
function _write_cache($output)
{
    if (isset($_GET['offset']) AND ! empty($_GET['offset']))
    {
        log_message('debug', " Don't write cache please. As as its matching condition");
        return;
    }
    ...
    ...
} 
```

如果找到特定参数，则添加 Condition 以防止*显示缓存：*`GET`

```
function _display_cache(&$CFG, &$URI)
{
    if (isset($_GET['offset']) AND ! empty($_GET['offset']))
    {
        log_message('debug', " Don't display cache please. As as its matching condition");
        return FALSE;
    }
    ...
    ...
} 
```

# c# - 从 MS SQL 表中选择参考特定 Lat Lan 的前 35 个 Lat Lan 记录

> ID：14516671
> 
> 赞同：0
> 
> 时间：2013-01-25T06:40:26.917
> 
> 标签：c#, asp.net, sql-server-2005

我正在使用 C#、Asp.net、.net 2.0 版和 MSSQL 2005 中的“NearBy Properties”模块。我的要求是，

我将一个特定的`Lat`值传递`Lan`给 DB，它应该通过将传递`Lat` `Lan`的`Lat` `Lan`值与已保存在 DB 中的值进行比较来获取我最近的 35 个属性。这可以在 SQL 部分本身中完成吗？

我可以通过以下`Asp.net`方式部分做到这一点

1.  循环遍历 DataTable 中的所有行，然后
2.  在 DataTable 中创建一个名为“Miles”的额外字段并将 Km 值插入其中，如下所示

    ```
    public decimal calcDistance(decimal latA, decimal longA, decimal latB, decimal longB)
    {
            double theDistance = (Math.Sin(DegreesToRadians(latA)) *
            Math.Sin(DegreesToRadians(latB)) +
            Math.Cos(DegreesToRadians(latA)) *
            Math.Cos(DegreesToRadians(latB)) *
            Math.Cos(DegreesToRadians(longA - longB)));

    return Convert.ToDecimal((RadiansToDegrees(Math.Acos(theDistance)))) * 69.09M * 1.6093M;
    } 
    ```

3.  然后使用“Miles”字段对 DataTable 进行排序，并从 DataTable 中获取前 35 行。

**问题**是，

我必须将所有数据库行提取到 asp 部分，然后执行 for 循环，然后进行排序，这会占用大量时间和资源，有什么办法可以在 SQL 部分本身中执行吗？

**解决方案**

我将@Bacon Bits 的答案调整为如下

```
SELECT PM.Id AS PropertyId,PM.Address,PM.PropertyImage,  ROUND((DEGREES(ACOS(SIN(RADIANS('9.98')) * SIN(RADIANS(PM.Latitude)) + COS(RADIANS('9.98')) * COS(RADIANS(PM.Latitude)) * COS(RADIANS(76.27999999999997 - PM.Longitude)))) * 69.09 * 1.6093),0) AS Miles 
FROM Tbl_PropertyMaster PM 
INNER JOIN dbo.Tbl_PropertyApproval AS PA  
ON PA.PropertyId = PM.Id 
WHERE PM.IsDeleted='False' AND PM.Enabled='True' and PA.Action='Approved' AND ROUND((DEGREES(ACOS(SIN(RADIANS('9.98')) * SIN(RADIANS(PM.Latitude)) + COS(RADIANS('9.98')) * COS(RADIANS(PM.Latitude)) * COS(RADIANS(76.27999999999997 - PM.Longitude)))) * 69.09 * 1.6093),0) < 1000 
ORDER BY Miles DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:24:01.820

创建一个标量函数，计算给定的两组 lan-lat 参数之间的距离（就像您在 asp.net 端所做的那样）。例子：

```
SELECT TOP 35 * FROM Table_1 ORDER BY dbo.calcDistance(field_latitude,field_longitude, param_lat,param_long) DESC; 
```

我不知道如何计算给定两组 lang,lat 的距离。由您编写函数实现。你可以[在这里](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)和[这里使用](http://msdn.microsoft.com/en-us/library/ms177516.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:54:36.883

尝试以下用户定义函数，它是您提供给 TSQL 的函数的转换。这应该与 SQL Server 一样准确。查询应在 SQL Server 2005 及更高版本上运行。请注意，您可能应该评估两个静态值的乘积。我只是懒惰。

```
CREATE FUNCTION dbo.calcDistance (
    @latA AS NUMERIC(38, 35),
    @longA AS NUMERIC(38, 35),
    @latB AS NUMERIC(38, 35),
    @longB AS NUMERIC(38, 35)
    )
RETURNS NUMERIC(38, 35)
AS
BEGIN
    RETURN (DEGREES(ACOS(SIN(RADIANS(@latA)) * SIN(RADIANS(@latB)) + COS(RADIANS(@latA)) * COS(RADIANS(@latB)) * COS(RADIANS(@longA - @longB)))) * 69.09 * 1.6093)
END 
```

[SQLFiddle](http://www.sqlfiddle.com/#!6/c4616/1)。我的示例使用测试中的位置和 Mangalore 的 Wikipedia 坐标。

# javascript - 请帮我处理这个javascript

> ID：14516675
> 
> 赞同：-4
> 
> 时间：2013-01-25T06:41:08.103
> 
> 标签：javascript, jquery, blogger

这是我的脚本：

```
function createSummaryAndThumb(pID) {
var div = document.getElementById(pID);
var imgtag = "";
var img = div.getElementsByTagName("img");
var summ = summary_noimg;
if(img.length >= 1) {
    imgtag = '<span class="thumbnail pull-left"><img src="' + img[0].srcreplace('/s640/', '/s' + image_size + '/') + '" width="' + img_thumb_width + 'px" height="' + img_thumb_height + 'px"/></span>';
    summ = summary_img;
}

var summary = imgtag + '<p>' + removeHtmlTag(div.innerHTML, summ) + '</p>';
div.innerHTML = summary;
} 
```

上面的脚本将 /s640 替换为 /image_size。但是我能做些什么来改变'640'部分的任何值。我试过这个，但它不会奏效-

```
function createSummaryAndThumb(pID) {
var div = document.getElementById(pID);
var imgtag = "";
var img = div.getElementsByTagName("img");
var summ = summary_noimg;
if(img.length >= 1) {
    if (uh>img_thumb_width) imgtag = '<span class="thumbnail pull-left"><img src="' + img[0].src.replace('/s' + uh + '/', '/s' + img_thumb_width + '/') + '" width="' + img_thumb_width + 'px" height="' + img_thumb_height + 'px"/></span>';
    summ = summary_img;
}

var summary = imgtag + '<p>' + removeHtmlTag(div.innerHTML, summ) + '</p>';
div.innerHTML = summary;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:45:25.797

您需要将内部的数字与以下内容匹配：

```
replace(/\/s[0-9]+\//, '/s' + image_size + '/') 
```

这是一个例子：http: [//jsfiddle.net/nfDea/](http://jsfiddle.net/nfDea/)

另一种选择是仅捕获开头和结尾，以便连接：

```
replace(/(\/s)[0-9]+(\/)/, "$1" + image_size + "$2"); 
```

[http://jsfiddle.net/nfDea/1/](http://jsfiddle.net/nfDea/1/)

如果您实际上指的是一个名为 的变量`uh`，那么您需要使用以下内容：

```
var re = new RegExp("/s(" + uh + ")/");
a = a.replace(re, "/s" + image_size + "/"); 
```

[http://jsfiddle.net/nfDea/4/](http://jsfiddle.net/nfDea/4/)

或者

```
var re = new RegExp("(/s)" + uh + "(/)");
a = a.replace(re, "$1" + image_size + "$2"); 
```

[http://jsfiddle.net/nfDea/3/](http://jsfiddle.net/nfDea/3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T06:49:23.300

```
var reg = new RegExp('/s' + uh);
...
img[0].src.replace(reg, '/s' + img_thumb_width + '/') 
```

# sql - 检查 sql db 列是否为空的 SSRS 多值

> ID：14516677
> 
> 赞同：0
> 
> 时间：2013-01-25T06:41:16.090
> 
> 标签：sql, reporting-services, reporting

我有一个可为空的 datetime2 列。该列包含最近的登录日期。如果该列为空，则用户尚未登录。

我有一个 SSRS 报告，用于过滤用户是否已登录。如果列为空，则用户尚未登录。我有一个参数，它接受多个值（全部，已登录，未登录），我将其传递给存储过程。目前，我已将值设置为已登录 = 1 而未登录 = 2。

我的存储过程接收值作为@HasLoggedIn varchar(50)。

我将如何在 sql.xml 中选择（全部，已登录，未登录）。

有没有更好的方法在 ssrs 中进行设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:56:46.030

我在传递参数时有点迷茫，但基本上我认为你正在寻找这个：

```
DECLARE
  @loginOption int = 0

SELECT 
  [UserID],
  [Timestamp]
FROM [Logins]
WHERE 
  (CASE
     WHEN @loginOption = 0 THEN 1 -- ALL
     WHEN @loginOption = 1 AND [Timestamp] IS NOT NULL THEN 1 -- Logged in
     WHEN @loginOption = 2 AND [Timestamp] IS NULL THEN 1 -- Not logged in
     ELSE 0
   END) = 1 
```

这是一个[小提琴](http://sqlfiddle.com/#!3/5358d/4)。

# sitecore - 如何在不同的 Sitecore 设备之间实现不同的内容？

> ID：14516681
> 
> 赞同：1
> 
> 时间：2013-01-25T06:41:33.537
> 
> 标签：sitecore, asp.net-4.0, asp.net-4.5

我需要在默认设备和移动设备之间显示不同的内容。有没有办法根据设备创建语言版本？或者是否可以创建一个处理程序或模块，我可以在其中识别当前设备类型？另外，是否可以创建一个自定义`MediaRequestHandler`，我可以在其中识别当前设备并更改`MediaPath`请求的图像？

这是我对管道处理器的实现：

```
public class MediaToDeviceProcessor : HttpRequestProcessor 
{
    public override void Process(HttpRequestArgs args)
    {
        HttpContext currentHttpContext = HttpContext.Current;

        if (currentHttpContext == null || Context.Database == null || Context.Device == null)
            return;

        var request = MediaManager.ParseMediaRequest(currentHttpContext.Request);
        if (request != null)
        {
            var media = MediaManager.GetMedia(request.MediaUri);
            if (media != null)
            {
                if (!Context.Device.IsDefault)
                {

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:32:02.410

对于您问题的第一部分，您可以查看创建自定义设备解析器。查看`<processor type="Sitecore.Pipelines.HttpRequest.DeviceResolver, Sitecore.Kernel" />`web.config，然后使用 dotPeek 查看 Sitecore 中的实现方式。用您自己的解析器替换标准解析器通常非常简单 - 您可以从 Sitecore 的设备解析器继承并添加您想要的任何设备检测代码。然后，您*可以*在此设备解析器中设置语言上下文。

对于您网站的移动版本，您是否使用单独的演示组件？如果是这样，您可以考虑在模板中简单地包含一组用于移动演示组件的字段。

关于风俗`MediaRequestHandler`；我不确定这是必要的。如果您有媒体项目的替代内容字段，则这些字段只会引用您的媒体项目的移动等效项。如果您对移动内容使用不同的语言，那么这将再次指向您的图像的移动等效项。

**编辑**

如果您选择为移动/默认内容使用不同语言版本的内容，您可以使用“版本化”媒体模板（基于`/sitecore/templates/System/Media/Versioned/File`）而不是“未版本化”（基于`/sitecore/templates/System/Media/Unversioned/File`）进行调查。有一个配置设置允许您设置创建新媒体项目时使用的默认值。这意味着您可以为移动网站创建相应语言版本的媒体项目（上传不同的图像），在这种情况下您不需要特殊的媒体处理程序。

# android - 父视图绘制子视图高效

> ID：14516683
> 
> 赞同：0
> 
> 时间：2013-01-25T06:41:40.117
> 
> 标签：android, android-layout, view, ondraw

例如，顶级 LinearLayout 视图有 300 个子视图。但设备屏幕尺寸仅显示 11 个子视图一次。android如何计算一次可以显示多少个子视图？视图如何知道它将被绘制？

**编辑**
在我的工作中，这样的一种情况：父 LinearLayout 视图可能有数百个子视图。为了更好的性能，我的解决方案是这样的：likelazy load。

1.  List list = new ArrayList();//包含使用构造View对象的实体对象
2.  默认加载 5 个子视图。
3.  父 LinearLayout 视图最后一个子视图是自定义加载视图，我已经覆盖了它的 onDraw() 方法。如果加载视图是绘制，这意味着我需要获取下一个 5 子视图（从列表中获取下一个 5 对象，并创建相应的视图）。

我想知道android框架如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:35:32.437

> 一个父 LinearLayout 视图可能有数百个子视图。为了更好的性能，我的解决方案是这样的：likelazy load。

`LinearLayout`（可能）数百个子视图与*更好的性能*相矛盾。我认为您正在寻找的是`ListView`一个无尽的适配器（一个简单的谷歌搜索将显示如何实现它，而不是那么困难）。一旦您到达最后加载的元素，此适配器将开始加载视图（在加载新内容时显示加载视图）。

如果您仍想使用`LinearLayout`：

如果您只想在`LinearLayout`第一次布局时填充屏幕的内容，您可以`Runnable`在方法中的一个视图上发布一个`onCreate`（如果这是您首先填充的地方`LinearLayout`）。在那里`Runnable`找到 的高度`LinearLayout`并将其与当前存在的孩子的组合高度进行比较。如果组合的子高度小于`LinearLayout`高度，则添加更多视图以进行补偿。

如果`LinearLayout`在 a 中`ScrollView`，并且您想在加载视图可见时添加其他子级，则监视 的滚动，`ScrollView`并在加载视图可见时添加新子级。通过检查用户滚动了多少与当前存在的`LinearLayout`.

**初步反应：**

关于您想知道的内容，您的问题有点模棱两可。如果你有一个特定的问题，你应该从那个开始。

> 例如，顶级 LinearLayout 视图有 300 个子视图。但设备屏幕尺寸仅显示 11 个子视图一次。

请不要让自己陷入这样的场景。如果你的内存用完，那么这个数量的视图会导致性能下降甚至应用程序崩溃（因为所有这些视图都将保存在内存中）。

> android如何计算一次可以显示多少个子视图？

如果可用，每个`View`和`ViewGroup`都有`onMeasure`测量自身及其子级的方法。将调用`LinearLayout`它的`onMeasure`方法，并且在这个方法中它将测量它的孩子（使用 measure `method`）给他们一些关于他们应该有多大的建议（`LinearLayout`从它的父母那里收到一些关于它应该有多大的建议）。如果您想了解这是如何完成的，请查看`LinearLayout`.

> 视图如何知道它将被绘制？

我不明白你想知道什么。要在屏幕上绘制视图，`onDraw`将调用其方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:53:21.013

您是否在顶级 LinearLayout 视图中使用滚动条并在该布局上添加子视图，这很简单......

# asp.net - 从组合框中选择值时动态更改列表框的值

> ID：14516686
> 
> 赞同：0
> 
> 时间：2013-01-25T06:41:46.537
> 
> 标签：asp.net, vb.net, visual-studio-2005

我有一个从数据库获取数据的组合框和一个从数据库获取数据的列表框。

现在我想做的是根据组合框的值更改列表框上的值。

例如，如果我从组合框中选择“苹果”，那么在列表中它应该显示苹果的类型。

在这种情况下，假设苹果的类型是 Granny Smith、Red Delicious 等。我希望你们能明白我想说的。我还没有开始编码，但我需要一种方法来获得所需的输出。而且我是使用 vb 的 asp.net 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:00:03.957

```
Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    ListBox1.Items.Clear()

    Dim com As New SqlClient.SqlCommand("SELECT type FROM Tbl WHERE category = '" & ComboBox1.Text & "'", sqlConn)
    Dim sql As SqlClient.SqlDataReader = com.ExecuteReader()

    While sql.Read
        ListBox1.Items.Add(sql.GetString(0))
    End While
    sql.Close()
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:45:08.730

使用**ComboBox的****OnSelectedIndexChanged**函数。检查[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.onselectedindexchanged.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.onselectedindexchanged.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)然后检索来自数据库的**ListBox**的值。

# extjs - 如何在 Senchatouch 中将数据从一页移动到另一页

> ID：14516690
> 
> 赞同：0
> 
> 时间：2013-01-25T06:42:00.553
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在 sencha touch 中开发一个应用程序，我是这项技术的新手首先看我的代码

***查看-->Main.js***

```
Ext.define('DealsList.view.Main', {
    extend: 'Ext.Container',
    xtype: 'mainlist',
    requires: [
        'Ext.TitleBar',
        'Ext.Toolbar'

    ],
    config: {
        fullscreen:true,
        scrollable:false,
        layout: {
            // type:'fit'
        },

        items: [
            {
                xtype: 'toolbar',
                //ui   : 'green',
                docked: 'top',
                title: 'SampleDeals'
            },
            {
                xtype:'formpanel',
                fullscreen:false,
                scrollable:false,
                centered:true,
                style: 'background-color: gray',
                width:'90%',
                height:'70%',
                items:[
            {
                xtype:'selectfield',
                name:'Grade',
                label:'Grade',
                options:[
                    {
                        text:'All',
                        value:'Agrade'
                    },
                    {
                        text:'Drink',
                        value:'Bgrade'
                    },
                    {
                        text:'Entertainment',
                        value:'cgrade'
                    },
                    {
                        text:'Food',
                        value:'Dgrade'
                    }
                ]
            },
            {
                xtype:'searchfield',
                id:'usernametext',
                name:'ZipCode',
                placeHolder:'ZipCode',
                top:'25%'
            },
                    {
                        xtype:'button',
                        text:'Gps On/Off',
                        id:'btnList',
                        ui:'action',

                        height:33,
                        top:'40%',
                        left:'5%',
                        right:'5%'
                    },
                    {
                        xtype:'selectfield',
                        name:'Grade',
                        label:'Grade',
                        top:'55%',
                        options:[
                            {
                                text:'2 miles',
                                value:'Agrade'
                            },
                            {
                                text:'5 miles',
                                value:'Bgrade'
                            },
                            {
                                text:'10 miles',
                                value:'cgrade'
                            },
                            {
                                text:'15+ miles',
                                value:'Dgrade'
                            }
                        ]
                    },
                    {
                        xtype:'button',
                        text:'My Favorites',
                        id:'favbutton',
                        ui:'action',
                        width:150,
                        height:33,
                        top:'75%',
                        left:'5%'
                    }
                    ,{
                        xtype:'button',
                        text:'Go',
                        id:'gobutton',
                        ui:'action',
                        width:100,
                        height:33,
                        top:'75%',
                        right:'5%',
                        handler:this.regButton,
                        scope:this
                    }
                ]
            }

        ]
    }
}); 
```

***查看-->ListPage.js***

```
Ext.define('DealsList.view.ListPage', {
    extend: 'Ext.List',
    xtype: 'listPage',
    requires:['Ext.data.Store','Ext.dataview.List','Ext.data.proxy.JsonP'],
    config: {
       // itemTpl: '<table><tr><td><img src="{imageUrl}" width="70%" height="70%"/></td><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><div class=\"list-item-firstname\">{firstName}</div><div class=\"list-item-lastname\">{lastName}</div></td></tr></table>',
        itemTpl: ' <table><tr>' +
            '<td><img src="{logopath}"/></td>' +
            '<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>' +
            '<td><div><h3>{subcategoryname}</h3></div>' +
            '<div><h1>{specialinfo}</h1></div>' +
            '<div>Price:{originalprice}</div>' +
            '<div><h1>{fromdate}</h1></div>' +
            '</td></tr></table>',
        store: 'DetailStore',
        onItemDisclosure: true,
        items:
        [
            {
                xtype:'toolbar',
                title:'SampleDeals',
                docked:'top',
                items:[
                    {
                        xtype:'button',
                        id:'backbutton',
                        ui:'back',
                        text:'back'
                    }
                ]
            }

        ]

    }
}); 
```

***查看-->DealsDescription.js***

```
 Ext.define('DealsList.view.DealsDescription', {
    extend: 'Ext.Container',
    xtype: 'dealsdescription',
    requires:['Ext.Toolbar','Ext.field.Email','Ext.field.Password'],

    config: {
        fullscreen:true,
        scrollable:false,
        layout: {
            // type:'fit'
        },

        items: [
            {
                xtype:'toolbar',
                docked:'top',
                title:'SampleDeals',
                items:[
                    {
                        xtype:'button',
                        id:'backbutton',
                        ui:'back',
                        text:'back'

                    }
                ]
            },
            {
                xtype:'label',
                html: '<h1>{subcategoryname}</h1>'
                //html: ["test test"].join("") '',
            },
            {
                xtype:'label',
                html: '<h1>{dealtimestampfrom}</h1>'
                //html: ["test test"].join("") '',
            },
            {
                xtype:'label',
                html: '<h1>{specialinfo}</h1>'
                //html: ["test test"].join("") '',
            },
            {
                xtype:'label',
                html: '<h1>{originalprice}</h1>'
                //html: ["test test"].join("") '',
            },

            {
                xtype:'button',
                text:'Button',
                id:'xxxbutton',
                ui:'action',
                top:'30%',
                left:'35%',
                right:'35%',
                handler:this.saveButton
            }
        ]
    }
}); 
```

***商店-->DetailStore.js***

```
Ext.define('DealsList.store.DetailStore', {
    extend: 'Ext.data.Store',

    config: {
        model: 'DealsList.model.DetailModel',
        autoLoad: true,
        remoteFilter: true,
        //sorters: 'leadid',
        grouper: {
            groupFn: function(record) {

               // return record.get('user_id')[0];
                return record.get('dealtimestampfrom')[0];
            }
        },
        proxy: {
            type: 'ajax',
            //url: 'http://113.193.181.53:8081/Test/chat/index.php/chat/onlineusers',
            url:'http://www.nomdeal.com/services/getbusinessoffers?catid=All&subcatid=All&lat=17.4418224&lng=78.4752594&dist=1000&userid=100&zipcode=&pagesize=1',
            //headers: {'Authorization': 'Basic GVU0IXZ6cFGzczE='},

            reader: {
                type: 'json',
                model: 'DealsList.model.DetailModel',
               // rootProperty: 'online-users'
                record:'businessholder',
               rootProperty: 'specialinfo'
              //  rootProperty:''
            }
        }
    }

}); 
```

***模型-->DetailModel.js***

```
Ext.define('DealsList.model.DetailModel', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            {name: "dealtimestampfrom",         type: "string"},
            {name: "dealtimestampto",         type: "string"},
            {name: "subcategoryname",         type: "string"},
            {name: "specialinfo",         type: "string"},
            {name: "originalprice",         type: "string"},
            {name: "logopath",         type: "string"},
            {name: "fromdate",         type: "string"}
        ]
    }
}); 
```

***控制器-->交易控制器.js***

```
Ext.define('DealsList.controller.dealscontroller', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            BtnList:'#btnList',
            listPage:'listPage',
            mainpage:'mainlist',
            backHome:'#backbutton',
            goButton:'#gobutton',
            DealsDescriptionpage:'dealsdescription'

        },
        control: {
            goButton:
            {
                tap:'mainCategories'
            },
            backHome:
            {
                tap:'backToHome'
            },

            listPage:
            {
                itemtap: 'ListItemSelect'
            }
        }
    },
    // Transitions
    slideLeftTransition: { type: 'slide', direction: 'left' },
    slideRightTransition: { type: 'slide', direction: 'right' },

    //called when the Application is launched, remove if not needed
    launch: function(app) {

    },

    mainCategories:function()
    {
        //alert('sf');
         Ext.Viewport.animateActiveItem(this.getListPage(), this.slideLeftTransition);
    },
    backToHome:function()
    {
         Ext.Viewport.animateActiveItem(this.getMainpage(), this.slideLeftTransition);
    },
    ListItemSelect : function (list, index, element, record)
    {
        Ext.Msg.alert('Alert',record.get('subcategoryname'));
        Ext.Viewport.animateActiveItem(this.getDealsDescriptionpage(), this.slideLeftTransition);

    }

    }); 
```

***应用程序.js***

```
 //<debug>
    Ext.Loader.setPath({
        'Ext': 'touch/src',
        'DealsList': 'app'
    });
    //</debug>

    Ext.application({
        controllers: ["dealscontroller"],

        name: 'DealsList',

        requires: [
            'Ext.MessageBox'
        ],

        views: ['Main','ListPage','DealsDescription'],
        stores:['DetailStore'],
        models:['DetailModel'],

        icon: {
            '57': 'resources/icons/Icon.png',
            '72': 'resources/icons/Icon~ipad.png',
            '114': 'resources/icons/Icon@2x.png',
            '144': 'resources/icons/Icon~ipad@2x.png'
        },

        isIconPrecomposed: true,

        startupImage: {
            '320x460': 'resources/startup/320x460.jpg',
            '640x920': 'resources/startup/640x920.png',
            '768x1004': 'resources/startup/768x1004.png',
            '748x1024': 'resources/startup/748x1024.png',
            '1536x2008': 'resources/startup/1536x2008.png',
            '1496x2048': 'resources/startup/1496x2048.png'
        },

        launch: function()
        {
                   // Destroy the #appLoadingIndicator element
            Ext.fly('appLoadingIndicator').destroy();

            var mainPage = {
                xtype:'mainlist'
            };

            var listpage = {
                xtype:'listPage'
            };
            var dealsdescription = {
                xtype:'dealsdescription'
            };

            // Initialize the main view
            Ext.Viewport.add(([mainPage,listpage,dealsdescription]));
        },

        onUpdated: function() {
            Ext.Msg.confirm(
                "Application Update",
                "This application has just successfully been updated to the latest version. Reload now?",
                function(buttonId) {
                    if (buttonId === 'yes') {
                        window.location.reload();
                    }
                }
            );
        }
    }); 
```

在我的应用程序的第一个屏幕中，我有一个开始按钮。当我单击此按钮时，它会显示一个列表（listpage.js），我的问题是，当我单击一个列表项时，数据不会移动到下一页（DealsDescription.js）。我的要求是数据移动到下一页并附加到该页面`xtype:label`（DealsDescription.js 屏幕）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:22:02.973

我们大多数人都设置了单页应用程序。因此，您无需刷新页面而是切换[卡片](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.Card)（或标签等等......）。这样，您始终可以通过 javascript 获取数据。向上或向下导航组件树。

[上](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-up)：

```
mycomponent.up() //go up one level
mycomponent.up(selector) //go up till you reach the component meeting the criteria 
```

[下](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)：

```
mycomponent.query(someComponentQuery) //go down and find all components meeting the criteria
mycomponent.getComponent(componentId) //get the (direct) child with given Id 
```

如果你确实想加载一个新页面，你需要一个全新的应用程序。所以你可以使用会话或本地存储在页面之间传输数据。（在您的商店/模型上使用 sessionstorageProxy 或 localstorageProxy）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:41:47.963

基本上，您必须在视图的配置中声明一个数据持有者变量，并且在创建此视图时，您可以使用所需的任何数据对其进行初始化。

```
var myView = Ext.create('DealsList.view.DealsDescription', {
  rec : someData //this would contain all data
}); 
```

然后在初始化时你可以这样访问`rec`：

```
var data = this.config.rec; 
```

然后您可以创建所有内部组件并添加到此视图的容器中。

```
var items = [{
  xtype:'toolbar',
  docked:'top',
  title:'SampleDeals',
  items:[
      {
      xtype:'button',
      id:'backbutton',
      ui:'back',
      text:'back'

      }
  ]
  },
  {
  xtype:'label',
  html: '<h1>'+data.subcategoryname+'</h1>'
  }];
  this.setItems(items); 
```

# logging - 渐变颜色输出

> ID：14516693
> 
> 赞同：31
> 
> 时间：2013-01-25T06:42:07.417
> 
> 标签：logging, groovy, build, gradle

我在谷歌上查过这个，但 Gradle 网站上似乎没有任何文档，甚至没有人在论坛上讨论这个问题。

我在我的 Mac（10.8.2，ML）上安装了 Gradle，并且正在构建一个自定义 build.gradle 脚本。当我调用 println() 时，我想让输出着色（如红色错误、绿色信息等）。如何在我的 gradle 构建脚本中执行此操作？

这是我到目前为止的代码示例：

```
def proc = "echo `DATE`".execute()
proc.in.eachLine {line -> println line}
proc.err.eachLine {line -> println 'ERROR: ' + line} 
```

在[这个 gradle 论坛上](http://gradle.1045684.n5.nabble.com/Colourizing-console-output-td3073839.html)，他们讨论了作为 StyledTextOutput 类的一部分的各种样式，例如 normal、header、userinput、identifier、description、progressstatus、failure、info 和 error。看起来这是一个内部类。有没有一种简单的方法可以在不导入大量包的情况下利用 Gradle/Groovy 的彩色打印功能？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-25T09:03:05.527

找到了答案！根据[这个 gradle forum post](http://forums.gradle.org/gradle/topics/the_correct_way_for_a_custom_plugin_to_output_colored_styled_text_to_the_gradle_logging_system)，没有用于为记录器的输出着色的公共界面。您可以自由使用内部类，但在未来的版本中可能会发生变化。在 gradle 脚本中，放在顶部：

**较旧的 Gradle**：

```
import org.gradle.logging.StyledTextOutput;
import org.gradle.logging.StyledTextOutputFactory;
import static org.gradle.logging.StyledTextOutput.Style; 
```

**摇篮 3.3+**：

```
import org.gradle.internal.logging.text.StyledTextOutput;
import org.gradle.internal.logging.text.StyledTextOutputFactory;
import static org.gradle.internal.logging.text.StyledTextOutput.Style; 
```

（我还没有弄清楚如何将它移动到 init.gradle 文件中。）然后不久之后，定义

```
def out = services.get(StyledTextOutputFactory).create("blah") 
```

我仍然不确定 create 方法的字符串中需要包含什么（它似乎还没有影响任何东西）。然后在你的任务中，

```
out.withStyle(Style.Info).println('colored text') 
```

这应该适用于所有类别：正常、标题、用户输入、标识符、描述、进度状态、失败、信息和错误。如果要自定义每个类别的颜色，则需要额外的步骤，将以下内容添加到 ~/.gradle 目录（或[其他选项](http://gradle.org/docs/current/userguide/init_scripts.html)）中的 init.gradle 文件中：

```
System.setProperty('org.gradle.color.error', 'RED') 
```

然后将“错误”类别替换为上述列表中的任何类别。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-09-25T08:02:31.423

只是完成接受答案的附加信息。这是默认样式`gradle 4.10`

```
StyledTextOutput.Style.values().each {
    out.style(it).println("This line has the style $it")
} 
```

[![所有风格](../Images/a276e22f9162ef6f0024db2a49aa2e3e.png)](https://i.stack.imgur.com/AhApw.png)

此外，您可以创建多色线，如`StringBuilder`

```
out.style(Style.ProgressStatus).text('This is ').style(Style.Failure).text('a multicolor ').style(Style.Identifier).println('line') 
```

[![多色的](../Images/b8f517e6a9a32c4774b553bbbf25790e.png)](https://i.stack.imgur.com/pCWsK.png)

编辑：这是一个工作示例：

```
import org.gradle.internal.logging.text.StyledTextOutput 
import org.gradle.internal.logging.text.StyledTextOutputFactory
import org.gradle.internal.logging.text.StyledTextOutput.Style

def out = services.get(StyledTextOutputFactory).create("an-ouput")

out.style(Style.ProgressStatus).text('This is ').style(Style.Failure).text('a multicolor ').style(Style.Identifier).println('line') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-14T23:22:02.877

> 有没有一种简单的方法可以在不导入大量包的情况下利用 Gradle/Groovy 的彩色打印功能？

为了探索更多选项，*无需导入包*，您可以直接使用[ANSI 转义码](https://en.wikipedia.org/wiki/ANSI_escape_code)（不是严格的 Gradle/Groovy 技术）来格式化输出。以下是一个工作示例：

```
task myTask {
    def styler = 'black red green yellow blue magenta cyan white'
        .split().toList().withIndex(30)
        .collectEntries { key, val -> [(key) : { "\033[${val}m${it}\033[0m" }] }

    doLast {
        println "Message: ${styler['red']('Hello')} ${styler['blue']('World')}"
    }
} 
```

[GitHub上的完整代码](https://github.com/marco-ruiz/stackoverflow-qa/tree/master/so-common/src/main/groovy/so/a56139852)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-24T10:36:03.987

ToYonos 在 Kotlin DSL 上提出的类似解决方案

```
val printStyles by tasks.registering {
    doLast {
       val out = project.serviceOf<org.gradle.internal.logging.text.StyledTextOutputFactory>().create("an-output")
        org.gradle.internal.logging.text.StyledTextOutput.Style.values().forEach {
            out.style(it).println("This line has the style $it")
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-27T07:38:52.157

使用 Kotlin 编写的自定义任务的简单示例：

```
import org.gradle.api.DefaultTask
import org.gradle.api.tasks.TaskAction
import org.gradle.internal.logging.text.StyledTextOutput
import org.gradle.internal.logging.text.StyledTextOutputFactory
import javax.inject.Inject

abstract class ExampleTask @Inject constructor(outputFactory: StyledTextOutputFactory) :
    DefaultTask() {

    private val out = outputFactory.create("example-task")

    @TaskAction
    fun run() {
        out.style(StyledTextOutput.Style.Success)
            .text("Hello, ")
            .style(StyledTextOutput.Style.Failure)
            .println("World!")
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-27T15:27:54.610

我通过创建外部着色器并使用 shell 别名制作宏以始终使用着色器来为 gradle 添加颜色。此解决方案将轻松扩展以使其他命令着色。

在 Mac 上使用 tcsh

```
alias gr ./gradlew !* |& ~/scripts/colorize.pl 
```

或手动运行

```
./gradlew assembleDebug | & ~/scripts/colorize.pl 
```

着色器只是一个具有两个特殊功能的 perl 脚本：

1.  无缓冲读取标准输入
2.  使用 color perl 模块来选择性地着色输出

-- 着色.pl --

```
 #!/usr/bin/perl
    use warnings;
    use strict;
    use Term::ANSIColor;
    use Term::ANSIColor qw(:constants);
    use IO::Select;

    sub colorize($);

    # unbuffered output
    $| = 1;

    # unbuffered input
    my $inStream = IO::Select->new(\*STDIN);
    my $line;
    while () {
        if ($inStream->can_read(2)) {
            last unless defined($line = get_unbuf_line());
            colorize($line)
        }
    }

    sub colorize($) {
        my $line = shift;
        # Example line to colorize
        #    NetInfo.java:142: warning: [unchecked]
        chomp( $line );
        if ($line =~ /([^:]+):([0-9]+): ([a-z]+): ([^ ]+)(.*)/) {
            my $head = $1;
            my $lineNo = $2;
            my $state = $3;
            my $code = $4;
            my $tail = $5;

            my $stateColor = WHITE;
            if ("$state" eq "warning") { $stateColor = MAGENTA; }
            if ("$state" eq "error") { $stateColor = RED; }
            print "$head" . YELLOW . ":$lineNo :" . $stateColor . " $state " . YELLOW . $code . RESET . $tail . "\n";
        } elsif ($line =~ /^(BUILD) ([A-Z]+)(.*)/) {
            my $head = $1;
            my $state = $2;
            my $tail = $3;
            my $stateColor = RED;
            if ("$state" eq "SUCCESSFUL") { $stateColor = GREEN; }
            print BOLD . $stateColor . "$line" . RESET  . "\n";
        } elsif ($line =~ /^(> Task) ([^ ]+)(.*)/) {
            print CYAN . $1 . WHITE . " $2" . YELLOW . " $3" . RESET  . "\n";
        } elsif ($line =~ /(.*)(warnings*)(.*)/i) {
            print   $1 . MAGENTA . "$2" . RESET . "$3" . "\n";
        } elsif ($line =~ /(.*)(errors*|unresolved|^e[:] .*)(.*)/i) {
            print   $1 . RED . "$2" . RESET . "$3" . "\n";
        } elsif ($line =~ /(.*)(-----.*|=====.*)/) {
            print   $1 . GREEN . "$2" . RESET . "\n";
        } else {
            print "$line\n";
        }
    }

    sub get_unbuf_line {
        my $line="";
        while (sysread(STDIN, my $nextbyte, 1)) {
                return $line if $nextbyte eq "\n";
                $line .= $nextbyte;
        }
        return(undef);
    } 
```

# javascript - 不允许使用 enyo 加载本地资源

> ID：14516694
> 
> 赞同：0
> 
> 时间：2013-01-25T06:42:10.740
> 
> 标签：javascript, android, cordova, webos, enyo

我正在使用 phonegap 构建一个 enyo 应用程序。我的程序在 chrome 中运行良好，它也适用于黑莓的波纹仿真器服务。我的问题是，当我使用 webOS 的 .ipk 构建和 android 的 .apk 构建时，我得到了同样的错误：

```
Not allowed to load local resource: file:///usr/palm/enyo.js
Uncaught ReferenceError: enyo is not defined, package.js:1
Uncaught ReferenceError: enyo is not defined, tests/package.js:1
Uncaught ReferenceError: enyo is not defined, index.html:10 
```

这使我认为这一定是我的索引文件中的问题，即：

```
<!DOCTYPE html>
<html>
<head>
    <title>Enyo Bootplate App</title>
    <link rel="shortcut icon" href="assets/favicon.ico">
    <!-- -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <!-- look this up for blackberry ad error -->
    <!-- css -->
    <link href="build/enyo.css" rel="stylesheet">
    <link href="build/app.css" rel="stylesheet">
    <!-- js -->
    <script src="enyo/enyo.js"></script>
    <script src="phonegap.js"></script>
    <script src="source/mobile.js" type="text/javascript" ></script>
    <script type="text/javascript" src="http://www.blackberry.com/app_includes/asdk/adBanner.js"></script>
    <script src="source/gameBanks.js" type="text/javascript"></script>
    <script src='https://cdn.firebase.com/v0/firebase-auth-client.js' type='text/javascript'></script>
    <script src="https://static.firebase.com/v0/firebase.js" ></script>
    <script src="build/enyo.js" ></script>
    <script src="build/app.js" onerror="alert('No application build found, redirecting to debug.html.'), location='debug.html';"></script> 
</head>
<body class="enyo-unselectable">
    <script>
        new App().write();
    </script>
</body>
 </html> 
```

奇怪的是 index.html:10 是一个评论（css评论），所以我不知道怎么可能出现错误。有人知道为什么我会收到此错误吗？或者“file:///usr/palm/enyo.js”是什么？那不是我包裹中的文件。

此外，在弄乱了一点之后，在 index.html 的顶部添加行不会改变错误所在的位置（index.html:10），所以错误可能是指其他形式的索引。 html? 我在 github 上完成了我的提交，除了 index.html:10 行的评论外，没有其他任何时间点。

更新：当使用任何其他服务打包应用程序（如 palm-run）时，它会正确更新我的代码。我从 phonegap 下载的构建无法正常工作。phonegap 的构建特别会导致这个问题有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:01:19.867

终于解决了这个问题，phonegap 莫名其妙地找到了错误的 index.html 文件。当我下载 enyo 引导板时，在 api 和 tools 文件夹中有一些 index.html。在我删除这些之后，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:01:34.463

奇怪......不知道是什么原因造成的，但我确实看到你正在尝试加载 enyo.js 两次。我怀疑这是问题所在，但这是您想要澄清的问题。

如果您从基本 bootplate 项目开始而不做任何更改，那么打包 ipk/apk 是否有效？

# javascript - 无法使用 javascript 和 jquery 获取 XML 属性值

> ID：14516704
> 
> 赞同：0
> 
> 时间：2013-01-25T06:42:57.610
> 
> 标签：javascript, jquery, html, xml, nodes

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<Publications LatestPubDate="2012-12-20" Version="0">
<PubYear Year="2012">
<PubMonth Month="12">
<Publication Name="Headline" PubDay="15" ThumbnailWidth="300" ThumbnailHeight="400" ThumbnailPath="FlippingBook/Dev/Frontend/OutPutFolder/Headline/2012/12/15/0/0/A/Content/1/Pg001.jpg" Version="0" Visible="true"/>
<Publication Name="Headline" PubDay="16" ThumbnailWidth="300" ThumbnailHeight="400" ThumbnailPath="FlippingBook/Dev/Frontend/OutPutFolder/Headline/2012/12/16/0/0/A/Content/1/Pg001.jpg" Version="0" Visible="true"/>
<Publication Name="Headline" PubDay="17" ThumbnailWidth="300" ThumbnailHeight="400" ThumbnailPath="FlippingBook/Dev/Frontend/OutPutFolder/Headline/2012/12/17/0/0/A/Content/1/Pg001.jpg" Version="0" Visible="true"/>
<Publication Name="Headline" PubDay="18" ThumbnailWidth="300" ThumbnailHeight="400" ThumbnailPath="FlippingBook/Dev/Frontend/OutPutFolder/Headline/2012/12/18/0/0/A/Content/1/Pg001.jpg" Version="0" Visible="true"/>
<Publication Name="Headline" PubDay="19" ThumbnailWidth="300" ThumbnailHeight="400" ThumbnailPath="FlippingBook/Dev/Frontend/OutPutFolder/Headline/2012/12/19/0/0/A/Content/1/Pg001.jpg" Version="0" Visible="true"/>
<Publication Name="Headline" PubDay="20" ThumbnailWidth="300" ThumbnailHeight="400" ThumbnailPath="FlippingBook/Dev/Frontend/OutPutFolder/Headline/2012/12/20/0/0/A/Content/1/Pg001.jpg" Version="0" Visible="true"/>
</PubMonth>
</PubYear>
</Publications> 
```

**js：**

```
function get_past_issues(year,month) {  
    $.ajax({ url: './demo/Headline/PublicationList.xml', 
         async: false,
         success: function(xml) {
            //$("#dialog").append("<div class = 'issues'>");    
            $(xml).find("Publications").find($("PubYear[Year='" + year + "']")).each(function() {
                //alert ($(this).attr ('Year'));
                    $(xml).find("Publications").find($("PubMonth[Month='" + month + "']")).find("Publication").each(function() {
                        alert ($(this).attr ('ThumbnailPath'));
                    });
            });
            //$("#dialog").append("</div>");    
        }
    }); 
```

例如，我提供了函数 year 是 2012，month 是 12，但是，fliter $("PubYear[Year='" + year + "']") 似乎不适用于 find 函数？如何解决问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:57:18.563

使用过滤器`find("PubYear[Year='" + year + "']")`

```
function get_past_issues(year,month) {  
    $.ajax({ url: './demo/Headline/PublicationList.xml', 
         async: false,
         success: function(xml) {
            //$("#dialog").append("<div class = 'issues'>");    
            $(xml).find("Publications").find("PubYear[Year='" + year + "']").each(function() {
                //alert ($(this).attr ('Year'));
                    $(xml).find("Publications").find("PubMonth[Month='" + month + "']").find("Publication").each(function() {
                        alert ($(this).attr ('ThumbnailPath'));
                    });
            });
            //$("#dialog").append("</div>");    
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:22:09.543

在这里，我以这种方式使用它：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script>
        function get_past_issues(year, month){
            $.ajax({ 
                url: 'list.xml', 
                type:"get",
                async: false,
                success: function(xml) { 
                        $(xml).find("PubYear[Year='" + year + "']").find("PubMonth[Month='" + month + "']").each(function(){
                            console.log($(this).find('Publication').attr('ThumbnailPath'));
                         // Output is:FlippingBook/Dev/Frontend/OutPutFolder/Headline/2012/12/15/0/0/A/Content/1/Pg001.jpg
                        });
                },
                error:function(){
                    alert('err');
                }
            });
        }
        $(function(){
            get_past_issues(2012, 12);
        });
    </script> 
```

# iphone - 即使已安装，也无法在 iOS 5 模拟器上进行测试

> ID：14516709
> 
> 赞同：2
> 
> 时间：2013-01-25T06:43:23.830
> 
> 标签：iphone, xcode, ios5, ios6, ios-simulator

我能够在 Xcode 4.5 中安装 iOS 5.0 和 5.1，并且在 Simulator > Hardware 菜单上我可以在不同版本之间切换。但是，在 Xcode 上我只看到 iOS6。因此，即使模拟器设置为 iOS5，当我在 Xcode 中单击运行时，应用程序也会在模拟器上的 iOS6 中运行。如何在 iOS5 模拟器中运行应用程序？

这是图像

![在此处输入图像描述](../Images/d837da2d915fcdbfffde51d4a02c308d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T19:22:06.687

确保您的项目设置为支持 iOS 5/5.1 作为部署目标：

![在此处输入图像描述](../Images/a436a111e448858479b71cc9b7928d6b.png)

# asp.net-mvc - 解决模型绑定器中的依赖关系的问题

> ID：14516713
> 
> 赞同：1
> 
> 时间：2013-01-25T06:43:52.963
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, ninject

我正在开发一个`ASP.NET MVC 4 application + NHibernate/Fluent NHibernate + Ninject`应用程序。

我创建了一个单独的模块来解决下面`ISession`和`ISessionFactory`s 的依赖关系，

```
 public class RepositoryModule: NinjectModule
  {
    public override void Load()
    {
      Bind<ISessionFactory>()
        .ToMethod(e => Fluently.Configure()
        .Database(MsSqlConfiguration.MsSql2008.ConnectionString(c => c.FromConnectionStringWithKey("DbConnString")))
        .Cache(c => c.UseQueryCache().ProviderClass<HashtableCacheProvider>())
        .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Post>())            
        .BuildConfiguration()
        .BuildSessionFactory())
        .InSingletonScope();

      Bind<ISession>()
        .ToMethod((ctx) => ctx.Kernel.Get<ISessionFactory>().OpenSession())
        .InRequestScope();
    }
  } 
```

我有一个`BlogRepository`实现`IBlogRepository`.

```
 public class BlogRepository : IBlogRepository
  {
    private readonly ISession _session;

    public BlogRepository(ISession session)
    {
      _session = session;
    }

    public IList<Post> Posts(int pageNo, int pageSize)
    {
      var query = _session.Query<Post>()
                          .Where(p => p.Published)
                          .OrderByDescending(p => p.PostedOn)
                          .Skip(pageNo * pageSize)
                          .Take(pageSize)
                          .Fetch(p => p.Category);

      query.FetchMany(p => p.Tags).ToFuture();

      return query.ToFuture().ToList();
    }

    // others
  } 
```

`BlogRepository`我需要一个自定义模型绑定器中的实例。

我在 Global.asax.cs 中尝试过类似的方法。

```
ModelBinders.Binders.Add(typeof(Post), new PostModelBinder(Kernel.Get<IBlogRepository>())); 
```

在第一个请求时一切正常，但从第二个请求我得到

> 会话关闭错误

. 有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:30:02.560

这是因为`ModelBinder`生命周期比一个请求长。如您所见，您正在`PostModelBinder`使用`new`操作员进行注册。MVC 应用程序保持对这个 binder 的引用，并且 binder 具有对 的引用`IBlogRepository`，其`ISession`将在第一个请求结束时被释放。

您可以使用**factory**解决此问题：

而不是`IBlogRepository`您将注入工厂`IBlogRepositoryFactory`对象，然后`IBlogRepository`在每次`BindModel`调用时创建新对象。

为此，您可以使用[Ninject factory extension](http://www.planetgeek.ch/2011/12/31/ninject-extensions-factory-introduction/)。

或者按照接受的答案中的描述创建自己的工厂：[Inject a dependency into a custom model binder and using InRequestScope using Ninject](https://stackoverflow.com/questions/9186560/inject-a-dependency-into-a-custom-model-binder-and-using-inrequestscope-using-ni)

# node.js - 从 Node.js 公开方法的最佳方式是什么？

> ID：14516717
> 
> 赞同：3
> 
> 时间：2013-01-25T06:44:30.803
> 
> 标签：node.js, module

考虑我想公开一个名为`Print`

1.  绑定方法为`prototype`：

文件另存为 Printer.js

```
var printerObj = function(isPrinted) {
            this.printed = isPrinted;        
    }

printerObj.prototype.printNow = function(printData) {
        console.log('= Print Started =');
};
module.exports = printerObj; 
```

然后`printNow()`通过将代码`require('Printer.js').printNow()`放入任何外部 .js 节点程序文件中进行访问。

1.  导出方法本身使用`module.exports`：

文件另存为 Printer2.js

```
var printed = false;   
function printNow() {
console.log('= Print Started =');
}    
module.exports.printNow = printNow; 
```

然后`printNow()`通过将代码`require('Printer2.js').printNow()`放入任何外部 .js 节点程序文件中进行访问。

谁能说出与 Node.js 相关的区别和最佳方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:53:56.807

绝对是第一种方式。它被称为，您可以在[Twitter](https://twitter.com/n8agrin/status/261151288685907968)和 Mikeal Rogers 的[博客](http://www.futurealoof.com/posts/coffee-perspective.html)`substack pattern`上阅读它。一些代码示例可以在解析器中的[玉 github 存储库中找到：](https://github.com/visionmedia/jade/blob/master/lib/parser.js)

```
var Parser = exports = module.exports = function Parser(str, filename, options){
  this.input = str;
  this.lexer = new Lexer(str, options);
  ...
};

Parser.prototype = {

  context: function(parser){
    if (parser) {
      this.contexts.push(parser);
    } else {
      return this.contexts.pop();
    }
  },

  advance: function(){
    return this.lexer.advance();
  }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:33:47.097

在第一个示例中，您正在创建一个类，理想情况下，您应该在调用程序中将它与“new”一起使用：

```
var PrinterObj = require('Printer.js').PrinterObj;
var printer = new PrinterObj();
printer.PrintNow(); 
```

这是一个很好的阅读主题：[http ://www.2ality.com/2012/01/js-inheritance-by-example.html](http://www.2ality.com/2012/01/js-inheritance-by-example.html)

在第二个示例中，您将返回一个函数。

不同之处在于您可以拥有第一个示例的多个实例（前提是您按照指示使用 new），但只有一个第二个方法的实例。

# iphone - 在 GMGridView 中添加另一个视图

> ID：14516719
> 
> 赞同：0
> 
> 时间：2013-01-25T06:44:42.990
> 
> 标签：iphone, ios5, ios6, gmgridview, gmgridviewcell

大家好，

我必须在`GMGridView`. 但我无法做到这一点，因为我必须将我的标签从视图拖到`view1`.

我的代码是：

```
- (GMGridViewCell *)GMGridView:(GMGridView *)gridView1 cellForItemAtIndex:(NSInteger)index
        {
        // set size based on orientation

        CGSize size = [self GMGridView:gridView sizeForItemsInInterfaceOrientation:[[UIApplication sharedApplication] statusBarOrientation]];
        GMGridViewCell *cell = [gridView dequeueReusableCell];
        if (!cell)
        {
                cell = [[[GMGridViewCell alloc]init]autorelease];

//one view
                UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];
                view.backgroundColor = [UIColor redColor];
                view.layer.masksToBounds = NO;
                view.layer.cornerRadius = 2;
                cell.contentView = view;

//another view
            UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(0, 80, size.width, size.height)];
            view1.backgroundColor = [UIColor yellowColor];
            view1.layer.masksToBounds = NO;
            view1.layer.cornerRadius = 2;
            cell.contentView = view1;
        }
        [[cell.contentView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];

        // allocate label
        UILabel *label = [[UILabel alloc] initWithFrame:cell.contentView.bounds];
        label.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        label.text = (NSString *)[self.currentData objectAtIndex:index];
        label.textAlignment = UITextAlignmentCenter;
        label.backgroundColor = [UIColor clearColor];
        label.textColor = [UIColor blackColor];
        label.font = [UIFont boldSystemFontOfSize:20];
        [cell.contentView addSubview:label];
        return cell;
    } 
```

单元格的高度为 200。但它仍然只显示一个视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T13:55:36.763

* * *

***在 GMGridView 中加载两种类型的 Cell***

这是您的解决方案，它具有魅力..

**首先做到这一点**

```
-(void)prepareExhibitor
{
    NSInteger spacing = 1.0;
    CGRect rect=self.view.frame;
    rect.origin=CGPointMake(0, 0);
    self.gmGridView = [[GMGridView alloc] initWithFrame:rect];
    self.gmGridView.backgroundColor = [UIColor clearColor];
    self.gmGridView.centerGrid=NO;

self.gmGridView.style = GMGridViewStylePush;

self.gmGridView.layoutStrategy = [GMGridViewLayoutStrategyFactory strategyFromType:GMGridViewLayoutHorizontal];

self.gmGridView.showsHorizontalScrollIndicator=FALSE;
self.gmGridView.clipsToBounds=YES;
self.gmGridView.itemSpacing = spacing;
self.gmGridView.minEdgeInsets = UIEdgeInsetsMake(0,30, 0, 0);
[self.viewNewsHeadline addSubview:self.gmGridView];
self.gmGridView.actionDelegate = self;
self.gmGridView.dataSource = self;
self.gmGridView.mainSuperView = self.superView;

} 
```

**然后根据您的代码相应地编写**

```
- (GMGridViewCell *)GMGridView:(GMGridView *)gridView cellForItemAtIndex:(NSInteger)index
{

    GMGridViewCell *cell = [gridView dequeueReusableCell];
    NewsCell_iPad *view;
    UIViewController *controller;

    if (!cell)
    {

        // [self removeGrid];
        cell = [[GMGridViewCell alloc] init];
        if(index%2==0)
        {
            controller=[[UIViewController alloc] initWithNibName:@"NewsCellTypeA_iPad" bundle:nil];
        }
        else
        {
            controller=[[UIViewController alloc] initWithNibName:@"NewsCellTypeB_iPad" bundle:nil];
        }
        if(!view)
        {
            view=(NewsCell_iPad *)controller.view;
        }

        cell.layer.masksToBounds = NO;
        cell.contentView = view;
    }

    NewsCell_iPad *newsView=(NewsCell_iPad *)cell.contentView;
        newsView.news=[self.arrNews objectAtIndex:index];
      [self hideGradientBackground:newsView.webViewDetailedNews];
    [newsView downloadImage];
    [newsView loadWebView];
   // NSLog(@"cell=%d ,arr image index=%@",index,[self.arrNews objectAtIndex:index]);

    return cell;
} 
```

# c# - 如何在不更改 RowState 属性的情况下使用 LINQ 从数据库中复制 DataTable

> ID：14516721
> 
> 赞同：0
> 
> 时间：2013-01-25T06:44:50.513
> 
> 标签：c#, linq, datatable, rowstate

我正在从数据库 sa 填充我的数据表

```
var z = from ins in cstmrDC.customersCntcts_rd(101)
        select ins;
foreach (var dtbl in z)
{
    DataRow drDtls;
    drDtls = dtDtls.NewRow();
    drDtls[0] = dtbl.cust_Slno;
    drDtls[1] = dtbl.cust_Cntctnm;
    drDtls[2] = dtbl.cust_Cntctdesig;
    drDtls[3] = dtbl.cust_Cntctmobl;
    drDtls[4] = dtbl.cust_Cntctmail;
    //drDtls.RowState = DataRowState.Unchanged; 
    dtDtls.Rows.Add(drDtls);
} 
```

这样我可以填写我的`DataTable`，但默认情况`RowState`下`DataTable`设置为`Added`。但我想从`DataGridView`.

在不更改的情况下`RowState`，如何插入、删除和更新我的`DataGridview`？帮我直接从数据库中填写数据表。

我尝试使用`CopyToDataTable()`它出现在我的 IntelliSense 框中。也许这是因为我使用的是 .Net 3.5。

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:12:39.537

做就是了

```
...
dtDtls.Rows.Add(drDtls);
dtDtls.AcceptChanges();
... 
```

并且`RowState`将是`Unchanged`。

# php - 使用php验证大写和小写的现有数据

> ID：14516723
> 
> 赞同：0
> 
> 时间：2013-01-25T06:44:51.187
> 
> 标签：php, javascript, mysql, ajax

我正在处理一个有两个字段的表单。一个是代码，另一个是名称。我有一个检查数据库中现有代码的验证。代码查询似乎可以正常工作，但名称却无法正常工作，尤其是在小写字母中。谁能帮我？这是我的代码：

```
<?php
session_start();
if (!isset($_SESSION["username"])) {
    header("Location: unauthorize_access.php");
}

require("includes/dbconnect.php");

if (isset($_POST['save'])) {

    $code   = $_POST["code"];
    $name   = $_POST["name"];

 {     
        mysql_query("INSERT INTO `country`(code, `name`)
            Values
                   ('$code', '$name')") or die(mysql_error());  

        print '<script type="text/javascript">';
        print 'alert("RECORDS ADDED SUCCESSFULLY")';
        header('refresh: 1; country.php');
        PRINT '</script>';
    }
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Country</title>
<link rel="stylesheet" type="text/css" href="form2/view.css" media="all">
<script type="text/javascript" src="form2/view.js"></script>
<script type="text/javascript" src="form2/calendar.js"></script>
<script type="text/javascript">

  function checkForm()
  {
   if(country.code.value == "") {
      alert("Error: Code cannot be Empty!");
      country.code.focus();
      return false;
     }

   if(country.name.value == "") {
      alert("Error: Name cannot be Empty!");
      country.name.focus();
      return false;
     }

 }

</script>
<script type="text/javascript" src="chk/jquery-1.2.6.min.js"></script>

<SCRIPT type="text/javascript">
<!--

pic1 = new Image(16, 16); 
pic1.src = "loader.gif";

$(document).ready(function(){

$("#code").change(function() { 

var code = $("#code").val();

if(code.length >= 2)
{
$("#status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');

    $.ajax({  
    type: "POST",  
    url: "check_con.php",  
    data: "code="+ code,  
    success: function(msg){  

   $("#status").ajaxComplete(function(event, request, settings){ 

    if(msg == 'OK')
    { 
        $("#code").removeClass('object_error'); // if necessary
        $("#code").addClass("object_ok");
        $(this).html('&nbsp;<img src="tick.gif" align="absmiddle">');
    }  
    else  
    {  
        $("#code").removeClass('object_ok'); // if necessary
        $("#code").addClass("object_error");
        $(this).html(msg);
    }  

   });

 } 

  }); 

}
else
    {
    $("#status").html('<font color="red">The code should have at least <strong>2</strong> characters.</font>');
    $("#code").removeClass('object_ok'); // if necessary
    $("#code").addClass("object_error");
    }

});

});

//-->
</SCRIPT>
<SCRIPT type="text/javascript">
<!--

pic1 = new Image(16, 16); 
pic1.src = "loader.gif";

$(document).ready(function(){

$("#code").change(function() { 

var code = $("#code").val();

if(code.length >= 2)
{
$("#status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');

    $.ajax({  
    type: "POST",  
    url: "check_con.php",  
    data: "code="+ code,  
    success: function(msg){  

   $("#status").ajaxComplete(function(event, request, settings){ 

    if(msg == 'OK')
    { 
        $("#code").removeClass('object_error'); // if necessary
        $("#code").addClass("object_ok");
        $(this).html('&nbsp;<img src="tick.gif" align="absmiddle">');
    }  
    else  
    {  
        $("#code").removeClass('object_ok'); // if necessary
        $("#code").addClass("object_error");
        $(this).html(msg);
    }  

   });

 } 

  }); 

}
else
    {
    $("#status").html('<font color="red">The code should have at least <strong>2</strong> characters.</font>');
    $("#code").removeClass('object_ok'); // if necessary
    $("#code").addClass("object_error");
    }

});

});

//-->
</SCRIPT><SCRIPT type="text/javascript">
<!--

pic1 = new Image(16, 16); 
pic1.src = "loader.gif";

$(document).ready(function(){

$("#name").change(function() { 

var code = $("#name").val();

if(code.length >= 0)
{
$("#stat_2").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');

    $.ajax({  
    type: "POST",  
    url: "check_con.php",  
    data: "name="+ name,  
    success: function(msg){  

   $("#stat_2").ajaxComplete(function(event, request, settings){ 

    if(msg == 'OK')
    { 
        $("#name").removeClass('object_error'); // if necessary
        $("#name").addClass("object_ok");
        $(this).html('&nbsp;<img src="tick.gif" align="absmiddle">');
    }  
    else  
    {  
        $("#name").removeClass('object_ok'); // if necessary
        $("#name").addClass("object_error");
        $(this).html(msg);
    }  

   });

 } 

  }); 

}
else
    {
    $("#stat_2").html('<font color="red"><strong>The name cannot be empty</strong></font>');
    $("#name").removeClass('object_ok'); // if necessary
    $("#name").addClass("object_error");
    }

});

});

//-->
</SCRIPT>
</head>
<body id="main_body" >

    <img id="top" src="form2/top.png" alt="">
    <div id="form_container">

        <h1><a>Country</a></h1>
        <form id="country" class="appnitro" enctype="multipart/form-data" method="post" onsubmit="return checkForm()">
                    <div class="form_description">
        <h2>Country</h2>

        </div>
                    <table border ="0px" width="100%">
                        <tr>
                            <td><label class="description" for="element_1">Code</label></td><td><input id="code" name="code"  type="text" maxlength="6"  Placeholder="Please enter a code" value=""/></td><td width="400" align="left"><div id="status"></div></td>
                        </tr>
                        <tr>
                            <td><label class="description" for="element_1">Name</label></td><td><input id="name" name="name" size="40" type="text" maxlength="40" Placeholder="Please enter a name" value=""/></td><td width="400" align="left"><div id="stat_2"></div></td>

                        </tr>
                        <tr>
                            <td></td><td ><input type="submit" name="save" value="Save"></td>
                        </tr>
                    </table>
                </form> 
```

这是我的php代码。它适用于代码字段，但不适用于名称。

```
<?php
$dbHost     = 'localhost'; // usually localhost
$dbUsername = 'root';
$dbPassword = '';
$dbDatabase = 'pts_root';

$db = mysql_connect($dbHost, $dbUsername, $dbPassword) or die ("Unable to connect to Database Server.");
mysql_select_db ($dbDatabase, $db) or die ("Could not select database.");
if(isSet($_POST['code']))
{
$code = $_POST['code'];

$sql_check = mysql_query("SELECT * FROM country WHERE code='".$code."'") or die(mysql_error());

if(mysql_num_rows($sql_check))
{
echo '<font color="red">The code <STRONG>'.$code.'</STRONG> is already exist.</font>';
}
else
{
echo 'OK';
}

}

?>
<?php
$dbHost     = 'localhost'; // usually localhost
$dbUsername = 'root';
$dbPassword = '';
$dbDatabase = 'pts_root';

$db = mysql_connect($dbHost, $dbUsername, $dbPassword) or die ("Unable to connect to Database Server.");
mysql_select_db ($dbDatabase, $db) or die ("Could not select database.");
if(isSet($_POST['name']))
{
$name = $_POST['name'];

$sql_check = mysql_query("SELECT * FROM country WHERE UPPER(`name`)='".$name."'") or die(mysql_error());
if(mysql_num_rows($sql_check))
{
echo '<font color="red">The name <STRONG>'.$name.'</STRONG> is already exist.</font>';
}
else
{
echo 'OK';
}

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:49:31.573

改变

```
$name = $_POST['name']; 
```

到

```
$name = strtoupper($_POST['name']); 
```

因此，您将大写输入与大写字段进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:59:51.030

我正在看这个特定的部分：

```
$sql_check = mysql_query("SELECT * FROM country WHERE UPPER(`name`)='".$name."'") or die(mysql_error());
if(mysql_num_rows($sql_check)) 
```

如果不阅读所有其余代码，并试图找出您的测试用例，了解 MySQL 可以使用“不区分大小写”排序规则可能会对您有所帮助。

UPPER 函数会将存储的值转换为大写，但如果排序规则不区分大小写，则不会真正影响比较。

您可能需要考虑使用 BINARY 运算符。

```
SELECT * FROM country WHERE BINARY UPPER(`name`)= 'FOO' 
```

[http://dev.mysql.com/doc/refman/5.5/en/charset-binary-op.html](http://dev.mysql.com/doc/refman/5.5/en/charset-binary-op.html)

在 MySQL 中检查排序规则的一种快速方法是：

```
SHOW VARIABLES LIKE 'collation%' 
```

您可能会看到如下值：

```
utf8_general_ci
latin1_swedish_ci 
```

在`_ci`排序规则名称的末尾将其标识为“不区分大小写”排序规则，这基本上意味着 'ABC' = 'abc' 评估为 TRUE。

排序规则也可以在单个表和列级别指定。

有关更多信息，请参阅 MySQL 参考 [http://dev.mysql.com/doc/refman/5.5/en/charset.html](http://dev.mysql.com/doc/refman/5.5/en/charset.html)

注意：对于 php 5 和 mysqli，不要使用`SET names`查询，而是使用`mysqli_set_charset`.

[http://php.net/manual/en/mysqli.set-charset.php](http://php.net/manual/en/mysqli.set-charset.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:01:20.497

您也可以使用`like`

```
SELECT * FROM country WHERE `name` like '$name' 
```

希望这可以帮助

# ios - 注释，注释，注释

> ID：14516726
> 
> 赞同：2
> 
> 时间：2013-01-25T06:45:03.120
> 
> 标签：ios, mkmapview, mkannotation

所以`MKAnnotation's。好玩的东西。

我的问题：

注释的标题和副标题之间有什么区别？这对注释的视觉组件有何影响？

a`MKPinAnnotationView`和 a 和有什么不一样`MKAnnotationView`？除了图钉之外，iOS 中还有不同类型的地图注释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:59:08.423

`Title`是您的别针的主要标题。

这`subtitle`实际上是显示放置的 pin 的地址/（公共信息）。您可以存储与放在 pin 上的**标题相关的其他深层信息。**

![在此处输入图像描述](../Images/906292558db27835907dd7ff2dfbbc3f.png)

`MKAnnotation`如果您希望在`MKMapView`. 坐标属性告诉`MKMapView`放置它的位置。title 和 subtitle 属性是可选的，但如果您希望显示标注视图，您至少应该实现 title。

`MKAnnotationView`直观地呈现`MKAnnotation`在`MKMapView`. 可以设置 image 属性来确定要为注释显示什么。但是，您可以将其子类化并`drawRect:`自己实现。

`MKPinAnnotationView`是`MKAnnotationView`使用 Pin 图形作为图像属性的子类。您可以设置图钉颜色和放置动画。

不要忘记可用于自定义标注视图的`leftCalloutAccessoryView`和`rightCalloutAccessoryView`属性。`MKAnnotationView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:55:38.897

在地图上选择图钉时会显示标题和副标题。副标题只是低于标题。

`MKPinAnnotationView`只是一种特殊形式，`MKAnnotationView`它知道如何绘制图钉（和阴影）并且还允许设置图钉颜色。它是唯一带有图像的内置注释视图，如果你想要不同的东西，你必须自己制作（但这很容易做到）。

# android - KR070PC7S LCD 显示器的 Linux 或 Android 驱动程序

> ID：14516730
> 
> 赞同：1
> 
> 时间：2013-01-25T06:45:13.193
> 
> 标签：android, linux, driver, kernel, lcd

我正在尝试为 amlogic meson3 处理器构建一个 android linux 内核。具体来说，当前运行的 Linux 显示的显示配置是

CONFIG_AML_TCON_KR070PC7S

在google上搜索，原来是“60P液晶屏KR070PC7S”。但是，谷歌似乎没有搜索网络上的源代码存储库来给出答案。

因此问题：

1.  在哪里可以找到源代码中的驱动程序？还是在预建的 obj 二进制文件中？
2.  如果驱动程序不可用，您在哪里可以找到 LCD 的数据表？
3.  哪些其他设备（型号、品牌）使用相同的显示器？
4.  60P LCD是标准接口吗？规格在哪里？

提前感谢您的任何答案或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:58:48.203

Google 通常会在 Linux 主线内核的部分内容中索引 CONFIG_xxx。我怀疑您正在运行一个自定义内核，他们没有将其合并回主线，也没有将源代码放在可公开索引的区域中。

据我所知，根据 GPL 的条款，后者没有任何问题，但原始硬件供应商应根据要求向客户提供修改后的内核源代码，假设他们基于 GPL 代码的驱动程序。否则，他们没有义务提供数据表/代码等。

# java - Java UDP 服务器，并发客户端

> ID：14516734
> 
> 赞同：4
> 
> 时间：2013-01-25T06:45:36.653
> 
> 标签：java, sockets, udp

下面的代码是否足以接受并发 UDP 传输？更具体地说，如果 2 个客户端同时传输，DatagramSocket 将排队传输并在我调用 receive() 时将它们一一交付，还是只有一个通过？

```
DatagramSocket socket = new DatagramSocket(port, address);
byte[] buffer = new byte[8192];

while(!disconnect){

    DatagramPacket p = new DatagramPacket(buffer, buffer.length);
    socket.receive(p);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:49:40.617

默认情况下没有排队。客户端可能会重试，直到超时或达到类似情况。UDP 速度很快，但在重负载时，您可能会有无法连接的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:44:30.540

如果数据包到达您的网络接口（想象在拥塞的无线信道上丢失数据包），它们将通过并`socket.receive(p)`调用阻塞方法。如果由于两个客户端同时传输而在通道上发生数据包冲突，您将不会收到这两个数据包中的任何一个。但这很可能是不可能的，因为网络接口的访问技术会解决这个问题，检查 [CSMA/CA](http://en.wikipedia.org/wiki/Carrier_sense_multiple_access_with_collision_avoidance)或[CSMA/CD](http://en.wikipedia.org/wiki/Carrier_sense_multiple_access_with_collision_detection)

调用后，`socket.receive(p)`您应该创建一个新线程来处理数据包本身。这将确保可以在套接字上接收下一个数据包。

**编辑：** [INTEL 的 TX 和 RX 描述符的描述](http://communities.intel.com/community/wired/blog/2011/06/24/parameter-talk-tx-and-rx-descriptors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T06:20:55.203

一个基本的解决方案是在线程上负责处理许多传入请求（具有您想要的限制），然后将它们交给其他工作程序/请求处理程序线程。这种基本结构与大多数服务器非常相似：主线程负责将请求传递给工作线程。当每个工作线程完成后，您可以更新共享/全局计数器，让主线程知道它可以建立新连接。这将需要同步，但它是一个简洁的抽象。

这是想法：

**服务器线程**：

```
// Receive Packet
while (true) {
    serverLock.acquire();

    try {
        if (numberOfRequests < MAX_REQUESTS) {
            packet = socket.receive();
            numberOfRequests++;
            requestThread(packet).run();
        } else {
            serverMonitor.wait(serverLock);
        }
    } finally {
        serverLock.release();
    }
} 
```

**请求线程**：

```
// Handle Packet
serverLock.acquire();

try {
    if (numberOfRequests == MAX_REQUESTS){         
        numberOfRequests--;
        serverMonitor.pulse();
    }
} finally {
    serverLock.release();
} 
```

这只是为了让您了解可以从什么开始。但是当您掌握了它的窍门后，您将能够进行优化和增强以确保同步完全正确。

一种特殊的增强，也适用于有限数量的请求，称为[ThreadPool](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。

# c# - 下拉列表和文本框文本中的文本不匹配

> ID：14516736
> 
> 赞同：1
> 
> 时间：2013-01-25T06:45:51.763
> 
> 标签：c#, asp.net, .net, drop-down-menu, textbox

我有**下拉列表**和一个**文本框**。

我正在从下拉列表中选择一个项目，并在选择时从下拉列表中选择的文本显示在文本框中。

我在这里面临一个问题，如下所示：

下拉列表中填充的文本之一是：

```
SUNROOF, POWER, TILT-SLIDING, ELECTRIC with express-open and wind deflector -Includes (CJ2) Air conditioning, dual-zone, automatic.  -Includes (ZM9) Universal Transmitter) 
```

But when this is selected and the same text shown in textbox, the text is becoming as below .. ie losing a space, and this is causing a problem.

```
SUNROOF, POWER, TILT-SLIDING, ELECTRIC with express-open and wind deflector -Includes (CJ2) Air conditioning, dual-zone, automatic. -Includes (ZM9) Universal Transmitter) 
```

注意：下拉列表中的“自动。[此处的 2 个空格]-包含”和文本框中的“自动。[此处的 1 个空格]-包含”。即少一个空格。

文本被加载到下拉列表中，如下所示：

```
ddlEngine.Items.Add(new ListItem(Engine[i][0], Engine[i][1])); 
```

这里引擎[i][0] = TEXT

Engine[i][1] = 用于差异目的的整数值..

并且在更改下拉列表值时...文本被复制到文本框中，如下所示：

```
document.getElementById("engineText").value = document.getElementById("ddlEngine").options[document.getElementById("ddlEngine").selectedIndex].text; 
```

我需要这两个值相同。知道为什么会这样吗？？？我怎样才能得到这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:31:02.410

只是想确认您的两个控件是否都是asp.net控件？

我刚刚复制了你的代码并执行了。它对我来说很好。

```
<asp:DropDownList ID="DropDownList1" runat="server" Width="1108px" AutoPostBack="True"
            onchange="changeCursor()" Height="26px">
     <asp:ListItem>SUNROOF, POWER, TILT-SLIDING, ELECTRIC with express-open and wind deflector -Includes (CJ2) Air conditioning, dual-zone, automatic.  -Includes (ZM9) Universal Transmitter)</asp:ListItem>
     <asp:ListItem>select</asp:ListItem>
</asp:DropDownList>

<asp:TextBox ID="TextBox1" runat="server" Width="1103px"></asp:TextBox> 
```

以下是显示所选值的 javascript 函数-

```
<script language="javascript" type="text/javascript">
    function changeCursor() {
        document.getElementById("TextBox1").value = document.getElementById("DropDownList1").options[document.getElementById("DropDownList1").selectedIndex].text;
    }
</script> 
```

你用的一样吗？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:47:35.140

我刚刚尝试过，然后在代码隐藏中：

```
ddl1.Items.Add("12        34") 
```

文本出现在页面的下拉列表中“12 34”。

如果可行，您可以在将字符串添加到下拉列表之前将所有多个空格转换为单个空格。

另一种方法是使用 ddlEngine.SelectedIndex 复制原始文件，如下所示：

```
TextBox1.Text = Engine[ddlEngine.SelectedIndex][0] 
```

# python - Django：在 Django 启动时只调用一次方法

> ID：14516737
> 
> 赞同：6
> 
> 时间：2013-01-25T06:45:51.467
> 
> 标签：python, django, django-views, django-database

我想在 Django 启动时初始化一些变量（来自数据库）。

我能够从数据库中获取数据，但问题是我应该如何调用初始化方法。这应该只调用一次。

尝试查看其他页面，但找不到答案。

代码目前看起来像这样::

* * *

def get_latest_dbx（请求，....）：

#从数据库中获取数据

* * *

def get_latest_x（请求）：

get_latest_dbx（请求，x，...）

* * *

def 启动（请求）：

get_latest_x（请求）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T07:08:41.293

有人建议（[仅在 Django 启动 ONCE 时执行代码？](https://stackoverflow.com/questions/6791911/execute-code-when-django-starts-once-only)）在顶级 urls.py 中调用该初始化（这看起来不寻常，因为 urls.py 应该处理 url 模式）。通过编写中间件还有另一种解决方法：[在哪里放置 Django 启动代码？](https://stackoverflow.com/questions/2781383/where-to-put-django-startup-code) 但我相信大多数人都在等待[解决](https://code.djangoproject.com/ticket/13024)问题。

更新：

由于OP已经更新了问题，似乎中间件方式可能更好，因为他实际上需要一个`request`启动对象。所有启动代码都可以放在自定义中间件的`process_request`方法中，其中`request`对象在第一个参数中可用。在这些启动代码执行后，可能会设置一些标志以避免稍后重新运行它们（引发`MiddlewareNotUsed`异常仅适用于`__init__`不接收`request`参数的 ）。

顺便说一句，OP 的要求看起来有点奇怪。一方面，他需要在 Django 启动时初始化一些变量，另一方面，他需要`request`在初始化时使用对象。但是当 Django 启动时，可能根本没有传入请求。就算有，也没多大意义。我猜他真正需要的可能是为每个会话或用户做一些初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:02:33.137

there are some cheats for this. The general solution is trying to include the initial code in some special places, so that when the server starts up, it will run those files and also run the code.

Have you ever tried to put `print 'haha'` in the settings.py files :) ?

**Note:** be aware that settings.py runs twice during start-up

# installshield - 如何在 sdLicense 对话结束时更改 installshield 名称

> ID：14516738
> 
> 赞同：0
> 
> 时间：2013-01-25T06:45:58.760
> 
> 标签：installshield, installshield-2009

在 SdLicense Dilogue 的左角，一个蒙面文本将显示为“InstallShield”，如何更改文本的呈现位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:02:07.127

根据 InstallShield，他们不允许更改文本。请参阅 Q105444：
[https ://flexeracommunity.force.com/customer/articles/en_US/FAQ/Q105444](https://flexeracommunity.force.com/customer/articles/en_US/FAQ/Q105444)

# php - 在 php laravel 项目中使用 .htaccess 清理 url 问题

> ID：14516740
> 
> 赞同：1
> 
> 时间：2013-01-25T06:46:06.483
> 
> 标签：php, apache, .htaccess, mod-rewrite, clean-urls

我正在开发一个 php laravel 项目。我目前面临 .htaccess 文件的问题。我有以下 .htaccess

```
<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [L]
</IfModule> 
```

当我重新加载页面时，它给了我以下错误

```
404 Not Found

The requested URL /contacts was not found on this server. 
```

然后我打开`/etc/apache2/users/username.conf`了具有以下代码行的文件

```
<Directory "/Users/username/Sites/">
    Options Indexes MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

在上面的代码中，我更改`AllowOverride None`为`AllowOverride All`. 然后我重新加载页面并收到以下错误

```
403 Forbidden

You don't have permission to access /contacts on this server. 
```

当我添加`FollowSymLinks`到这样的`.htaccess`文件时。然后有时我会收到此错误，有时会收到此错误。每次我重新加载我的页面时，这些错误都带有选项。`Options``Options -MultiViews FollowSymLinks``500 Internal Server Error``Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.``FollowSymLinks`

我还取消注释以下行`/etc/apache2/httpd.conf`

```
LoadModule rewrite_module libexec/apache2/mod_rewrite.so
LoadModule php5_module libexec/apache2/libphp5.so 
```

我还是一样`permission denied error`。

请帮助我，我在过去的 3 天里一直在尝试解决这个问题，但直到没有解决。

**更新**

这是我的整个`httpd.conf`文件。

```
#
# Mac OS X / Mac OS X Server
# The <IfDefine> blocks segregate server-specific directives
# and also directives that only apply when Web Sharing or
# server Web Service (as opposed to other services that need Apache) is on.
# The launchd plist sets appropriate Define parameters.
# Generally, desktop has no vhosts and server does; server has added modules,
# custom virtual hosts are only activated when Web Service is on, and
# default document root and personal web sites at ~username are only
# activated when Web Sharing is on.
#
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "log/foo_log"
# with ServerRoot set to "/usr" will be interpreted by the
# server as "/usr/log/foo_log".

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# Do not add a slash at the end of the directory path.  If you point
# ServerRoot at a non-local disk, be sure to point the LockFile directive
# at a local disk.  If you wish to share the same ServerRoot for multiple
# httpd daemons, you will need to change at least LockFile and PidFile.
#
ServerRoot "/usr"

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#  
#Listen 12.34.56.78:80
<IfDefine !MACOSXSERVER>
Listen 80
</IfDefine>

#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
LoadModule authn_file_module libexec/apache2/mod_authn_file.so
LoadModule authz_host_module libexec/apache2/mod_authz_host.so
LoadModule cache_module libexec/apache2/mod_cache.so
LoadModule disk_cache_module libexec/apache2/mod_disk_cache.so
LoadModule dumpio_module libexec/apache2/mod_dumpio.so
LoadModule reqtimeout_module libexec/apache2/mod_reqtimeout.so
LoadModule ext_filter_module libexec/apache2/mod_ext_filter.so
LoadModule include_module libexec/apache2/mod_include.so
LoadModule filter_module libexec/apache2/mod_filter.so
LoadModule substitute_module libexec/apache2/mod_substitute.so
LoadModule deflate_module libexec/apache2/mod_deflate.so
LoadModule log_config_module libexec/apache2/mod_log_config.so
LoadModule log_forensic_module libexec/apache2/mod_log_forensic.so
LoadModule logio_module libexec/apache2/mod_logio.so
LoadModule env_module libexec/apache2/mod_env.so
LoadModule mime_magic_module libexec/apache2/mod_mime_magic.so
LoadModule cern_meta_module libexec/apache2/mod_cern_meta.so
LoadModule expires_module libexec/apache2/mod_expires.so
LoadModule headers_module libexec/apache2/mod_headers.so
LoadModule ident_module libexec/apache2/mod_ident.so
LoadModule usertrack_module libexec/apache2/mod_usertrack.so
#LoadModule unique_id_module libexec/apache2/mod_unique_id.so
LoadModule setenvif_module libexec/apache2/mod_setenvif.so
LoadModule version_module libexec/apache2/mod_version.so
LoadModule proxy_module libexec/apache2/mod_proxy.so
LoadModule proxy_http_module libexec/apache2/mod_proxy_http.so
LoadModule proxy_scgi_module libexec/apache2/mod_proxy_scgi.so
LoadModule proxy_balancer_module libexec/apache2/mod_proxy_balancer.so
#LoadModule ssl_module libexec/apache2/mod_ssl.so
LoadModule mime_module libexec/apache2/mod_mime.so
LoadModule dav_module libexec/apache2/mod_dav.so
LoadModule autoindex_module libexec/apache2/mod_autoindex.so
LoadModule asis_module libexec/apache2/mod_asis.so
LoadModule info_module libexec/apache2/mod_info.so
LoadModule cgi_module libexec/apache2/mod_cgi.so
LoadModule dav_fs_module libexec/apache2/mod_dav_fs.so
LoadModule vhost_alias_module libexec/apache2/mod_vhost_alias.so
LoadModule negotiation_module libexec/apache2/mod_negotiation.so
LoadModule dir_module libexec/apache2/mod_dir.so
LoadModule imagemap_module libexec/apache2/mod_imagemap.so
LoadModule actions_module libexec/apache2/mod_actions.so
LoadModule speling_module libexec/apache2/mod_speling.so
LoadModule alias_module libexec/apache2/mod_alias.so
LoadModule rewrite_module libexec/apache2/mod_rewrite.so
LoadModule php5_module libexec/apache2/libphp5.so

#Apple specific modules
LoadModule apple_userdir_module libexec/apache2/mod_userdir_apple.so
LoadModule bonjour_module libexec/apache2/mod_bonjour.so

<IfDefine !MACOSXSERVER>
LoadModule authn_dbm_module libexec/apache2/mod_authn_dbm.so
LoadModule authn_anon_module libexec/apache2/mod_authn_anon.so
LoadModule authn_dbd_module libexec/apache2/mod_authn_dbd.so
LoadModule authn_default_module libexec/apache2/mod_authn_default.so
LoadModule auth_basic_module libexec/apache2/mod_auth_basic.so
LoadModule auth_digest_module libexec/apache2/mod_auth_digest.so
LoadModule authz_groupfile_module libexec/apache2/mod_authz_groupfile.so
LoadModule authz_user_module libexec/apache2/mod_authz_user.so
LoadModule authz_dbm_module libexec/apache2/mod_authz_dbm.so
LoadModule authz_owner_module libexec/apache2/mod_authz_owner.so
LoadModule authz_default_module libexec/apache2/mod_authz_default.so
LoadModule mem_cache_module libexec/apache2/mod_mem_cache.so
LoadModule dbd_module libexec/apache2/mod_dbd.so
LoadModule proxy_connect_module libexec/apache2/mod_proxy_connect.so
LoadModule proxy_ftp_module libexec/apache2/mod_proxy_ftp.so
LoadModule proxy_ajp_module libexec/apache2/mod_proxy_ajp.so
LoadModule status_module libexec/apache2/mod_status.so
</IfDefine>

<IfDefine MACOSXSERVER>
LoadModule hfs_apple_module libexec/apache2/mod_hfs_apple.so
#LoadModule auth_digest_apple_module libexec/apache2/mod_auth_digest_apple.so
#LoadModule encoding_module libexec/apache2/mod_encoding.so
#LoadModule jk_module libexec/apache2/mod_jk.so
LoadModule apple_auth_module libexec/apache2/mod_auth_apple.so
LoadModule spnego_auth_module libexec/apache2/mod_spnego_apple.so
LoadModule apple_digest_module libexec/apache2/mod_digest_apple.so
#LoadModule python_module libexec/apache2/mod_python.so
#LoadModule xsendfile_module libexec/apache2/mod_xsendfile.so
LoadModule apple_status_module libexec/apache2/mod_status_apple.so
</IfDefine>

# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User _www
Group _www

# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin you@example.com

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
#ServerName www.example.com:80

<IfDefine MACOSXSERVER>
DocumentRoot /var/empty

<IfModule mod_auth_digest_apple.c>
    BrowserMatch "MSIE" AuthDigestEnableQueryStringHack=On
</IfModule>
<IfModule mod_headers.c>
    Header add MS-Author-Via "DAV"
    RequestHeader set X_FORWARDED_PROTO 'https' env=https
    RequestHeader set X_FORWARDED_PROTO 'http' env=!https
</IfModule>
<IfModule mod_encoding.c>
    EncodingEngine on
    NormalizeUsername on
    DefaultClientEncoding UTF-8
# Windows XP?
    AddClientEncoding "Microsoft-WebDAV-MiniRedir/" MSUTF-8
# Windows 2K SP2 with .NET
    AddClientEncoding "(Microsoft .* DAV\$)" MSUTF-8
# Windows 2K SP2/Windows XP
    AddClientEncoding "(Microsoft .* DAV 1.1)" CP932
# Windows XP?
    AddClientEncoding "Microsoft-WebDAV*" CP932
# RealPlayer
    AddClientEncoding "RMA/*" CP932
# MacOS X webdavfs
    AddClientEncoding "WebDAVFS" UTF-8
# cadaver
    AddClientEncoding "cadaver/" EUC-JP
</IfModule>
<Directory /usr/share/web>
AllowOverride None
Options MultiViews FollowSymlinks
Order allow,deny
Allow from all
Header Set Cache-Control no-cache
</Directory>
Alias /webmail /usr/share/web/webmail.html
Alias /changepassword /usr/share/web/changepassword.html
Alias /profilemanager /usr/share/web/profilemanager.html
Alias /webcal /usr/share/web/webcal.html
</IfDefine>

<IfDefine !MACOSXSERVER>
<IfDefine WEBSHARING_ON>
#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "/Library/WebServer/Documents"

#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "/Library/WebServer/Documents">
#
# Possible values for the Options directive are "None", "All",
# or any combination of:
#   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
#
# Note that "MultiViews" must be named *explicitly* --- "Options All"
# doesn't give it to you.
#
# The Options directive is both complicated and important.  Please see
# http://httpd.apache.org/docs/2.2/mod/core.html#options
# for more information.
#
Options Indexes FollowSymLinks MultiViews

#
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
AllowOverride None

#
# Controls who can get stuff from this server.
#
Order allow,deny
Allow from all

</Directory>

#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
<IfModule dir_module>
DirectoryIndex index.html
</IfModule>
</IfDefine>
</IfDefine>
#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<FilesMatch "^\.([Hh][Tt]|[Dd][Ss]_[Ss])">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

#
# Apple specific filesystem protection.
#
<Files "rsrc">
    Order allow,deny
    Deny from all
    Satisfy All
</Files>
<DirectoryMatch ".*\.\.namedfork">
    Order allow,deny
    Deny from all
    Satisfy All
</DirectoryMatch>

#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog "/private/var/log/apache2/error_log"

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

<IfModule log_config_module>
#
# The following directives define some format nicknames for use with
# a CustomLog directive (see below).
#
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%v %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combinedvhost
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%v %h %l %u %t \"%r\" %>s %b" commonvhost

<IfModule logio_module>
  # You need to enable mod_logio.c to use %I and %O
  LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
  LogFormat "%v %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinediovhost
</IfModule>

#
# The location and format of the access logfile (Common Logfile Format).
# If you do not define any access logfiles within a <VirtualHost>
# container, they will be logged here.  Contrariwise, if you *do*
# define per-<VirtualHost> access logfiles, transactions will be
# logged therein and *not* in this file.
#
CustomLog "/private/var/log/apache2/access_log" common

#
# If you prefer a logfile with access, agent, and referer information
# (Combined Logfile Format) you can use the following directive.
#
#CustomLog "/private/var/log/apache2/access_log" combined
</IfModule>

<IfModule alias_module>
#
# Redirect: Allows you to tell clients about documents that used to 
# exist in your server's namespace, but do not anymore. The client 
# will make a new request for the document at its new location.
# Example:
# Redirect permanent /foo http://www.example.com/bar

#
# Alias: Maps web paths into filesystem paths and is used to
# access content that does not live under the DocumentRoot.
# Example:
# Alias /webpath /full/filesystem/path
#
# If you include a trailing / on /webpath then the server will
# require it to be present in the URL.  You will also likely
# need to provide a <Directory> section to allow access to
# the filesystem path.

#
# ScriptAlias: This controls which directories contain server scripts. 
# ScriptAliases are essentially the same as Aliases, except that
# documents in the target directory are treated as applications and
# run by the server when requested rather than as documents sent to the
# client.  The same rules about trailing "/" apply to ScriptAlias
# directives as to Alias.
#
ScriptAliasMatch ^/cgi-bin/((?!(?i:webobjects)).*$) "/Library/WebServer/CGI-Executables/$1"
</IfModule>

<IfModule cgid_module>
#
# ScriptSock: On threaded servers, designate the path to the UNIX
# socket used to communicate with the CGI daemon of mod_cgid.
#
#Scriptsock /private/var/run/cgisock
</IfModule>

#
# "/Library/WebServer/CGI-Executables" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "/Library/WebServer/CGI-Executables">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

#
# DefaultType: the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

<IfModule mime_module>
#
# TypesConfig points to the file containing the list of mappings from
# filename extension to MIME-type.
#
TypesConfig /private/etc/apache2/mime.types

#
# AddType allows you to add to or override the MIME configuration
# file specified in TypesConfig for specific file types.
#
#AddType application/x-gzip .tgz
#
# AddEncoding allows you to have certain browsers uncompress
# information on the fly. Note: Not all browsers support this.
#
#AddEncoding x-compress .Z
#AddEncoding x-gzip .gz .tgz
#
# If the AddEncoding directives above are commented-out, then you
# probably should define those extensions to indicate media types:
#
AddType application/x-compress .Z
AddType application/x-gzip .gz .tgz

#
# AddHandler allows you to map certain file extensions to "handlers":
# actions unrelated to filetype. These can be either built into the server
# or added with the Action directive (see below)
#
# To use CGI scripts outside of ScriptAliased directories:
# (You will also need to add "ExecCGI" to the "Options" directive.)
#
#AddHandler cgi-script .cgi

# For type maps (negotiated resources):
#AddHandler type-map var

#
# Filters allow you to process content before it is sent to the client.
#
# To parse .shtml files for server-side includes (SSI):
# (You will also need to add "Includes" to the "Options" directive.)
#
#AddType text/html .shtml
#AddOutputFilter INCLUDES .shtml
</IfModule>

#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
#MIMEMagicFile /private/etc/apache2/magic

#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://www.example.com/subscription_info.html
#

#
# EnableMMAP and EnableSendfile: On systems that support it, 
# memory-mapping or the sendfile syscall is used to deliver
# files.  This usually improves server performance, but must
# be turned off when serving from networked-mounted 
# filesystems or if support for these functions is otherwise
# broken on your system.
#
#EnableMMAP off
#EnableSendfile off

TraceEnable off

# Supplemental configuration
#
# The configuration files in the /private/etc/apache2/extra/ directory can be 
# included to add extra features or to modify the default configuration of 
# the server, or you may simply copy their contents here and change as 
# necessary.

# Server-pool management (MPM prefork specific)
StartServers 1
MinSpareServers 1
MaxSpareServers 1
# ServerLimit and MaxClients support n% syntax which sets them to a
# fraction of the current RLIMIT_NPROC limit. 
ServerLimit 50%
MaxClients 50%
ListenBackLog 512
MaxRequestsPerChild 100000

# Timeout: The number of seconds before receives and sends time out.
#
Timeout 300

# KeepAlive: Whether or not to allow persistent connections (more than
# one request per connection). Set to "Off" to deactivate.
#
KeepAlive On

# KeepAliveTimeout: Number of seconds to wait for the next request from the
# same client on the same connection.
#
KeepAliveTimeout 15

# MaxKeepAliveRequests: The maximum number of requests to allow
# during a persistent connection. Set to 0 to allow an unlimited amount.
# We recommend you leave this number high, for maximum performance.
#
MaxKeepAliveRequests 100

# UseCanonicalName: Determines how Apache constructs self-referencing
# URLs and the SERVER_NAME and SERVER_PORT variables.
# When set "Off", Apache will use the Hostname and Port supplied
# by the client.  When set "On", Apache will use the value of the
# ServerName directive.
#
UseCanonicalName Off

#
# AccessFileName: The name of the file to look for in each directory
# for additional configuration directives.  See also the AllowOverride
# directive.
#
AccessFileName .htaccess

# ServerTokens
# This directive configures what you return as the Server HTTP response
# Header. The default is 'Full' which sends information about the OS-Type
# and compiled in modules.
# Set to one of:  Full | OS | Minor | Minimal | Major | Prod
# where Full conveys the most information, and Prod the least.
#
ServerTokens Full

# Optionally add a line containing the server version and virtual host
# name to server-generated pages (internal error documents, FTP directory
# listings, mod_status and mod_info output etc., but not CGI generated
# documents or custom error documents).
# Set to "EMail" to also include a mailto: link to the ServerAdmin.
# Set to one of:  On | Off | EMail
#
ServerSignature On

# HostnameLookups: Log the names of clients or just their IP addresses
# e.g., www.apache.org (on) or 204.62.129.132 (off).
# The default is off because it'd be overall better for the net if people
# had to knowingly turn this feature on, since enabling it means that
# each client request will result in AT LEAST one lookup request to the
# nameserver.
#
HostnameLookups Off

# PidFile: The file in which the server should record its process
# identification number when it starts.
PidFile /var/run/httpd.pid

# The accept serialization lock file MUST BE STORED ON A LOCAL DISK.
LockFile "/private/var/log/apache2/accept.lock"

<IfModule mod_rewrite.c>
RewriteLock /var/log/apache2/rewrite.lock
</IfModule>

# Language settings
Include /private/etc/apache2/extra/httpd-languages.conf

<IfDefine WEBSHARING_ON>
# Multi    -language error messages
#Include /private/etc/apache2/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
Include /private/etc/apache2/extra/httpd-autoindex.conf

# User home directories
Include /private/etc/apache2/extra/httpd-userdir.conf

# Real-time info on requests and configuration
#Include /private/etc/apache2/extra/httpd-info.conf

# Virtual hosts
Include /private/etc/apache2/extra/httpd-vhosts.conf

# Local access to the Apache HTTP Server Manual
Include /private/etc/apache2/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
#Include /private/etc/apache2/extra/httpd-dav.conf

</IfDefine>

# Secure (SSL/TLS) connections
<IfDefine !MACOSXSERVER>
#Include /private/etc/apache2/extra/httpd-ssl.conf
</IfDefine>
<IfDefine MACOSXSERVER>
<IfModule mod_ssl.c>
    SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown
    SSLPassPhraseDialog exec:/etc/apache2/getsslpassphrase
    SSLSessionCache shmcb:/var/run/ssl_scache(512000)
    SSLSessionCacheTimeout 300
    SSLMutex file:/var/run/ssl_mutex
    SSLRandomSeed startup builtin
    SSLRandomSeed connect builtin
    AddType application/x-x509-ca-cert crt
    AddType application/x-pkcs7-crl crl
</IfModule>
</IfDefine>

<IfModule mod_jk.c>
    JKWorkersFile /etc/apache2/workers.properties
    JKLogFile /var/log/apache2/mod_jk.log
    JkShmFile /var/log/apache2/jk-runtime-status
</IfModule>

<IfModule php5_module>
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
<IfModule dir_module>
    DirectoryIndex index.html index.php
</IfModule>
</IfModule>
<IfDefine !MACOSXSERVER>
Include /etc/apache2/other/*.conf
</IfDefine>
<IfDefine MACOSXSERVER>
<IfDefine WEBSERVICE_ON>
    Include /etc/apache2/sites/*.conf
</IfDefine>
<IfDefine !WEBSERVICE_ON>
    Include /etc/apache2/sites/virtual_host_global.conf
    Include /etc/apache2/sites/*_.conf
    Include /etc/apache2/sites/*__shadow.conf
</IfDefine>
</IfDefine> 
```

**更新 2**

错误日志如下

[错误日志链接](https://gist.github.com/4640328)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-14T19:09:55.073

在您的文件中使用以下内容`/etc/apache2/users/username.conf`：

```
<Directory "C:/Developments/Projects/php/laravel/t-ravel/public">
     Options Indexes FollowSymLinks Includes ExecCGI
     AllowOverride All
     Require all granted
</Directory> 
```

# plone - 为什么 plone 的 EasyNewsletter 在 'toLocalizedTime 上抛出 NameError

> ID：14516741
> 
> 赞同：0
> 
> 时间：2013-01-25T06:46:07.417
> 
> 标签：plone

我已经安装了 EasyNewsletter，但是每当我添加一个问题时，我都会得到一个追溯声明：

NameError：未定义名称“toLocalizedTime”

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:29:14.587

该问题已提交并修复： [https ://github.com/collective/Products.EasyNewsletter/commit/9d756f22c3117aa239c60283a8249edb56b9bf8f](https://github.com/collective/Products.EasyNewsletter/commit/9d756f22c3117aa239c60283a8249edb56b9bf8f)

根据上面的链接，联系作者以请求新版本或自行应用修复程序。

原因在于“不再有全局定义”——从 Plone-3 到 Plone-4 的变化，请参阅以下内容的进一步解释： http: [//plone.org/documentation/manual/upgrade-guide/version/upgrading-plone-3 -x-to-4.0/updating-add-on-products-for-plone-4.0/no-more-global-definitions-in-templates](http://plone.org/documentation/manual/upgrade-guide/version/upgrading-plone-3-x-to-4.0/updating-add-on-products-for-plone-4.0/no-more-global-definitions-in-templates)

# c# - 为安装程序添加文件

> ID：14516743
> 
> 赞同：0
> 
> 时间：2013-01-25T06:46:08.267
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio, installation

我可以添加`.JPEG, .PNG, .SDF, .MDF`等等。但为什么我不能`.Ink`为我的安装项目添加扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T12:32:02.960

.Ink 是快捷方式我认为这就是为什么你不能添加它，我想你想在桌面上创建一个快捷方式，你可以试试这个

```
Imports IWshRuntimeLibrary

 Dim WshShell As WshShellClass = New WshShellClass
        Dim MyShortcut As IWshRuntimeLibrary.IWshShortcut
        ' The shortcut will be created on the desktop
        Dim DesktopFolder As String = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory)
        MyShortcut = CType(WshShell.CreateShortcut(DesktopFolder & "\MyShortcutName.lnk"), IWshRuntimeLibrary.IWshShortcut)
        MyShortcut.TargetPath = Application.StartupPath & "\YourApp.exe" 'Specify target app full path
        MyShortcut.Save()
End Sub 
```

# javascript - 如何从 v8 shell 运行外部 javascript 文件？

> ID：14516744
> 
> 赞同：1
> 
> 时间：2013-01-25T06:46:21.553
> 
> 标签：javascript, v8

我正在寻找一种运行外部 javascript frm v8 shell 的方法。
要在 v8 shell 中运行 javascript，整个脚本应该在一行中。否则 v8 shell 会在 javascript 中给出语法错误。

我可以做些什么来从 v8 shell 运行一些大型 javascript 代码？

我已经成功地从控制台运行了 javascripts。它工作正常。当涉及到运行一些大型 javascript 代码时，v8 给出了 sysntax 错误，但是当我删除新行时它起作用了。我只想知道有没有办法从外部运行 javascript文件。

```
function strAdd1()
{
    var start = new Date().valueOf();
    var str = "This is the string that will be tested. it is a long one with numbers 1234567890";
    for(var i=0;i<100000;i++)
    {
        str += "This is the string that will be tested. it is a long one with numbers 1234567890";
    }
    return new Date().valueOf() - start;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:06:46.217

你的意思是`How to load external javascript file from v8 shell`？

然后，使用`load`.

**foo.js**

```
print("hello world"); 
```

称呼`load()`

```
> load("foo.js") 
```

但是，这仅适用于 v8 shell。所以如果你想在javascript上使用一般的方式，你应该改进v8 shell。

# icarousel - 我们如何改变 iCarousel 中的淡入淡出颜色？

> ID：14516746
> 
> 赞同：2
> 
> 时间：2013-01-25T06:46:27.807
> 
> 标签：icarousel

假设，我想将蓝色应用于淡入淡出图像，我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T01:19:33.843

淡入淡出由委托方法控制：

```
- (CGFloat)carousel:(iCarousel *)carousel valueForOption:(iCarouselOption)option withDefault:(CGFloat)value; 
```

该方法用于自定义标准轮播类型的参数。通过实施此方法，您可以调整选项，例如：

```
iCarouselOptionFadeMin
iCarouselOptionFadeMax
iCarouselOptionFadeRange 
```

这三个选项控制轮播项目视图的淡出，基于它们与当前居中项目的偏移量。FadeMin 是项目视图在开始淡出之前可以达到的最小负偏移量。FadeMax 是一个视图在开始淡出之前可以达到的最大正偏移量。FadeRange 是淡出发生的距离，以项目宽度的倍数衡量（默认为 1.0）。

例如，从 0.5f 淡出到 2.5f：

```
- (CGFloat)carousel:(iCarousel *)carousel valueForOption:(iCarouselOption)option withDefault:(CGFloat)value {
    switch (option) {
        case iCarouselOptionFadeMax:
            return 0.5f;
            break;
        case iCarouselOptionFadeMin:
            return -0.5f;
            break;
        case iCarouselOptionFadeRange:
            return 2.5f;
            break;

        default:
            return value;
            break;
    }
} 
```

现在-要将蓝色应用于淡入和淡出图像，您可以将 iCarousel 子类化。下面的示例假设随着图像淡出（alpha 接近 0.0f），蓝色叠加层使用余弦函数淡入（alpha 接近 1.0f）。

```
#import "iCarousel.h"

// Done to suppress compiler warning to super
@interface iCarousel (BlueOverlay)

- (UIView *)containView:(UIView *)view;
- (void)transformItemView:(UIView *)view atIndex:(NSInteger)index;
- (CGFloat)alphaForItemWithOffset:(CGFloat)offset;

@end

@interface BlueCarousel : iCarousel

@end

@implementation BlueCarousel

- (UIView *)containView:(UIView *)view
{    
    //get container frame
    UIView *containerView = [super containView:view];
    CGRect frame = containerView.frame;

    //create the blue overlay layer
    UIView *overlayView = [[UIView alloc] initWithFrame:frame];
    overlayView.backgroundColor = [UIColor blueColor];
    overlayView.alpha = 0.0f;
    [containerView addSubview:overlayView];

    return containerView;
}

- (void)transformItemView:(UIView *)view atIndex:(NSInteger)index
{
    [super transformItemView:view atIndex:index];

    //calculate offset
    CGFloat offset = [self offsetForItemAtIndex:index];

    //update blue overlay alpha e.g. using cosine function
    CGFloat alpha = cosf(M_PI_2*[self alphaForItemWithOffset:offset]);
    [(UIView*)[view.superview.subviews lastObject] setAlpha:alpha];
}

@end 
```

# sql-server-2008 - 如何通过比较其他字段mssql来检索字段记录？

> ID：14516752
> 
> 赞同：3
> 
> 时间：2013-01-25T06:46:47.743
> 
> 标签：sql-server-2008

我有一张桌子；让它被称为table1；具有以下字段和数据

```
msgid  msisdn teaserid send
1      333     1        1
2      333     1        0
3      444     2        1
4      444     2        1
5      444     3        1 
```

我需要一个查询，它返回那些 msgid，对于具有相同 msisdn、teaserid 的每条记录，send = 1。在上述情况下，我想要 msgid: 3,4,5 作为结果。如何使用 mssql 查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:14:53.927

这是[窗口函数](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.105%29.aspx)的一个可爱用法：

```
declare @t table (msgid int,msisdn int,teaserid int,send int)
insert into @t (msgid,msisdn,teaserid,send) values
(1,333,1,1),
(2,333,1,0),
(3,444,2,1),
(4,444,2,1),
(5,444,3,1)

select * from (
select *,MIN(send) OVER (PARTITION BY msisdn,teaserid) as all1
from @t
)t
where all1 = 1 
```

结果：

```
msgid       msisdn      teaserid    send        all1
----------- ----------- ----------- ----------- -----------
3           444         2           1           1
4           444         2           1           1
5           444         3           1           1 
```

通过`MIN(send)`跨`msisdn,teaserid`分区计算，如果所有值都是 1，则这只能`send`是 1。如果只有一行有 0，那将是该分区的最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:59:40.980

您可以使用此查询来获取结果

```
 select msgid 
 from table1 t 
 where send=1 
       and exists(select * from table
                  where send=1 
                  and msisdn=t.msisdn
                  and teaserid=t.teaserid and msgid != t.msgid) 
```

# objective-c - Unity AppController.mm 文件导致错误

> ID：14516760
> 
> 赞同：0
> 
> 时间：2013-01-25T06:47:56.250
> 
> 标签：objective-c, xcode, unity3d

我创建了一个新的 Xcode 项目，并从 unity 生成的 Xcode 项目中添加了“Data”、“Classes”和“Libraries”文件夹。现在 AppController.mm 导致错误。以下是错误所在的代码：

```
(surface->eaglLayer) = (CAEAGLLayer*)[view layer]; 
```

这是错误行：从不兼容的类型“CAEAGLLayer *”分配给“void *”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:30:32.833

当您将 Unity 项目导出到 Xcode 时，Unity 会为您生成所有需要的东西，包括添加所有必要的框架和库、添加需要编译的文件、设置项目文件和其他一些东西。当您在 Xcode 中创建新项目并将三个文件夹复制/粘贴到其中时，上述所有内容均未设置。所以你在处理它们时会遇到很多麻烦。在您的示例中，CAEAGLLayer 与 OpenGL 相关，您至少应该添加 OpenGLES.framework。

结论是：除非您完全知道自己在做什么，否则不要创建项目并复制/粘贴。否则不太可能使项目构建和链接成功。始终使用 Unity 导出的项目并对其进行修改。

# javascript - 是否可以通过 firefox 和 chrome 中的调试器更新 javascript 方法？

> ID：14516765
> 
> 赞同：0
> 
> 时间：2013-01-25T06:48:15.067
> 
> 标签：javascript, security, google-chrome, firefox

有谁知道通过 Firefox 或 chrome 中的调试器更改 javascript 功能的步骤？它有任何严重的安全问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:16:56.387

使用 chrome devtools 更改 JS 功能的步骤如下：

1.  打开 chrome 开发工具（您可以使用右键单击，然后选择检查元素）。
2.  打开“源”选项卡。
3.  选择包含您要更改的函数的 javascript 文件。
4.  编辑代码。
5.  点击“ctrl-s”保存。
6.  你完成了。如果从页面上的事件调用此代码（例如单击按钮），您将能够看到您的更改而无需重新加载。

至于安全问题，您应该始终在服务器端验证用户输入。在客户端上，您应该“引导”用户输入正确的数据，但永远不要相信它。在很多情况下，有人能够“即时”更改数据（=中间人），所以你永远不应该相信客户。

# google-app-engine - Python：如何在 Google App Engine 数据存储区中存储数组

> ID：14516766
> 
> 赞同：3
> 
> 时间：2013-01-25T06:48:19.650
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore

我正在做一个项目，我处理一个 URL 并使用 beautifulsoup 获取一个数组（包含列和行）。现在我需要将这些数据存储在数据存储中。我找不到任何关于在数据存储中存储数组的参考。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T07:03:20.060

A multivalued property is represented in the datastore api as a python list. If you can organize the data in list, you can define a part of your data model as

```
class MyData(ndb.Model):
    array = ndb.StringProperty(repeated=True) 
```

In the request handler, store the data like

```
data = MyData()
data.array = list_you_got_from_request
data.put() 
```

# c# - C#构造函数声明

> ID：14516767
> 
> 赞同：-1
> 
> 时间：2013-01-25T06:48:25.313
> 
> 标签：c#, constructor

由于我是构造函数主题的新手，我对我们为什么使用它有点困惑？声明构造函数和不声明它有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:51:02.103

构造函数用于初始化类对象。如果您不声明/定义它，那么将为您创建一个默认构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:54:45.793

如果不声明任何构造函数，编译器将生成不带参数的默认构造函数。

考虑这个类：

```
public Class X
{
    public int A { get; set; }
} 
```

那里没有构造函数声明，因此编译器会将默认构造函数放在该类中，如下所示：

```
public Class X
{
    public int A { get; set; }

    public X () 
    { 
    }

} 
```

如果在类中声明构造函数，则不会生成默认构造函数。

```
public Class X
{
    public int A { get; set; }

    public X (int a) 
    { 
          // do something
    }

} 
```

在此示例中，不会生成默认的空构造函数。如果您尝试创建这样的实例：

```
X obj = new X(); 
```

它会产生编译错误。

更多细节：[默认构造](http://msdn.microsoft.com/en-us/library/aa645608%28v=vs.71%29.aspx%20constructor)函数， [C#中的构造函数](http://www.yoda.arachsys.com/csharp/constructors.html "C#中的构造函数")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T06:55:05.523

声明一个简单地调用基类的公共无参数构造函数的公共无参数构造函数没有区别：

```
public class Test
{
    public Test() : base() {}
} 
```

相当于：

```
public class Test
{
} 
```

编译器为您提供了一个*默认构造函数*。

（并且这`base()`部分是隐式的；如果您没有显式链接到另一个构造函数，编译器会将其视为您尝试链接到无参数基类构造函数¹。）

但这并不意味着构造函数是无用的……你通常会把代码放在那里。通常它会复制参数：

```
public class Test
{
    private readonly string name;

    public Test(string name)
    {
        this.name = name;
    }
} 
```

...但构造函数大多可以包含与普通方法相同的代码。值得注意的是，当您的构造函数运行时，对象可能尚未*完全*初始化，因为派生类的构造函数主体尚未执行。出于这个原因，建议不要在构造函数中调用虚方法。

有关实例构造函数的一般详细信息，请参阅 C# 5 规范的第 10.11 节，有关默认构造函数的详细信息，请参阅第 10.11.4 节。

* * *

¹更具体地说，它会像你写的那样链接`base()`。如果没有无参数的构造函数，但是有*一个*参数都是可选的构造函数，就会被调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T07:07:59.527

构造函数用于类的许多事情。

1.  如果你想对类实例的初始化做一些事情。

    ```
     public class MyClass
     {
         private string myWork = string.Empty;
         public MyClass()
         {
             myWork = "Started";
         }
      } 
    ```

2.  如果要限制类的对象创建范围

    ```
    public class MyClass
    {
        private string myWork = string.Empty;
        protected MyClass() 
        {
            myWork = "Started";
        }
    } 
    ```

还有很多其他的东西，比如基类支持等等。也请在 MSDN 上搜索。

# ios - 我们真的需要在 iOS 6 上进行应用内验证吗？

> ID：14516769
> 
> 赞同：8
> 
> 时间：2013-01-25T06:48:39.093
> 
> 标签：ios, iphone, ipad, in-app-purchase

早在去年，那个俄罗斯黑客就创建了一种无需付款即可验证应用内购买的方法，[这个人创建了一个类来验证每次购买](https://github.com/evands/iap_validation)。

据我所知，黑客公开的这种技术在 iOS 6 上不再适用，但我不确定。

我正在为 iOS 6 创建一个新应用程序，并试图将代码最小化，甚至比这更好，我的应用程序内涉及与 Apple 托管的内容，所以我想知道这个添加的验证是否真的对我的情况是必要的。

请记住

1.  我正在为 iOS 6 及更高版本开发；
2.  我的应用内托管了苹果的内容，所以即使黑客技术有效，这个人也永远不会得到苹果托管的内容。

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:22:59.830

该漏洞应该在 iOS6 中得到解决，但这并不意味着您应该偏离一般的收据验证最佳实践。有关更多信息，请参阅在 iOS 上[验证商店收据](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html "验证商店收据")和 [应用内购买收据验证](http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html#//apple_ref/doc/uid/TP40012484)。

正如上面的链接中提到的，Apple 建议您遵循他们的收据验证最佳实践，无论是在 iOS 5 还是 iOS 6 上。“代码的简单性”并不是偏离这些准则的充分借口。如果您将代码构造成定义良好的类，您可以将所有收据验证逻辑抽象到它自己的类中，从而使使用它的代码更加简洁。

如果您直接从 App 连接到 App Store 进行验证，他们明确声明的措施（请参阅[“我的应用程序通过直接连接到 App Store 服务器来执行验证。我受到什么影响？”](http://developer.apple.com/library/ios/releasenotes/StoreKit/IAP_ReceiptValidation/_index.html#//apple_ref/doc/uid/TP40012484-CH0-SW5)）应该会有所帮助。如果您以抽象的方式（在类别或类中）实现它们，那么它仍然应该保持您的代码干净。

即使您的内容由 Apple 托管，您仍然可以为自己提供额外的防欺诈保护。苹果并不完美；他们可能会滑倒自己，让您的应用程序处于打开状态。

最终，**当您处理自己的收入时，您最好谨慎行事，而不是事后后悔。**

# android - 为什么我的 FrameLayout 的高度为 0？

> ID：14516771
> 
> 赞同：1
> 
> 时间：2013-01-25T06:49:07.550
> 
> 标签：android

我有一个 FrameLayout，包含各种叠加的 ImageView：

```
<FrameLayout
    android:id="@+id/australia_frame"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <ImageView
        android:id="@+id/australia"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/map_australia"
        />
    <ImageView
        android:id="@+id/nsw"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/map_nsw"
        android:visibility="invisible"
        />
    <ImageView
        android:id="@+id/victoria"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/map_victoria"
        android:visibility="invisible"
        />
        ...etc...
</FrameLayout> 
```

在我的代码中，我尝试渲染我的 FrameLayout：

```
final Dialog dialog = new Dialog((Context) parent);
dialog.setContentView(R.layout.dialog_region);

FrameLayout fl = (FrameLayout) dialog.findViewById(R.id.australia_frame);
final int height = fl.getHeight();
Validate.isTrue(height > 0); 
```

我的代码崩溃：

```
java.lang.IllegalArgumentException: The validated expression is false
    at org.apache.commons.lang3.Validate.isTrue(Validate.java:180) 
```

崩溃的线是`Validate.isTrue(height > 0);`.

为什么我的 FrameLayout 没有高度？有没有办法获得我的 FrameLayout 正在渲染的确切 px 高度和宽度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T06:59:44.497

这可能会帮助你

```
 FrameLayout target = (FrameLayout) dialog.findViewById(R.id.australia_frame);
    target.post(new Runnable() {

        @Override
        public void run() {             
            int width = target.getWidth();
                            int height = width/2;
            /*your code with width and height*/
        }

    });
} 
```

# javascript - 未捕获的类型错误：无法读取未定义的属性“1”

> ID：14516772
> 
> 赞同：-1
> 
> 时间：2013-01-25T06:49:12.083
> 
> 标签：javascript, json, google-maps-api-3

试图摆弄一个应用程序，在开发工具控制台中收到此错误“Uncaught TypeError: Cannot read property '1' of undefined”。我很确定这是因为我拉的 json 和我使用的代理没有正确地相互交谈。严肃的n00b问题，我真的不明白文件中发生了什么。我还看到有很多类似的问题，所以我猜它们非常本地化，对社区来说不是很好。不过对我来说仍然很重要...我想了解代码中发生了什么，而不仅仅是解决问题。你可以在这里查看：http: [//dev.bowdenweb.com/busfinder.html](http://dev.bowdenweb.com/busfinder.html) 我确实把它放在了 jsfiddle 上，但它没有正确呈现。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:27:17.797

`loadBusesIntoMap`似乎是问题的根源。在 Chrome 开发人员工具上，单击错误旁边的箭头并跟踪堆栈。就在运行谷歌地图代码之前，引发错误的函数就是那个函数。您很可能在某个地方发送了一个空`buses`数组。我会先检查它是空的还是有`length`第一个...

# wordpress - Wordpress .htaccess 文件 - 在 #END Wordpress 行之后添加的代码

> ID：14516778
> 
> 赞同：3
> 
> 时间：2013-01-25T06:49:34.563
> 
> 标签：wordpress, .htaccess

我的 .htaccess WordPress 文件不断添加代码，如下所示：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress
AME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

在第一个“# END WordPress”之后我不需要任何代码

我不知道发生了什么变化，我刚刚将 WordPress 更新到 3.5 版以尝试解决问题，但它仍然存在：/ 有人遇到这个问题或知道如何解决吗？

* * *

2013 年 2 月 5 日编辑：我更新了 WordPress、我的主题（AIT 的宾馆）和 WPML 插件，问题似乎已经消失。我仍然不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T21:06:49.420

如果有人仍在寻找这个答案，我最近不得不做一些研究来自己解决这个问题。

事实证明，只要您修改永久链接，WordPress 就可以更新您的 .htaccess。我遇到了这个问题，但是基于我尝试更新的一些杂散插件。我按照我想要的方式设置了 .htaccess 文件，并通过将权限设置为 644 来阻止对文件的任何更改。如果这对您来说不够严格，您也可以执行 444。我使用 SSH，但 Filezilla 或类似的 FTP/SFTP 程序可以工作。

另外作为主动提示，尝试使用版本控制来维护您的网站（我通过 BitBucket 使用 Git），您可以获得日志，告诉您 WordPress 何时以及哪些更改。非常有用！

# android - 在 Android 中开启自动亮度时，亮度始终返回 255

> ID：14516779
> 
> 赞同：0
> 
> 时间：2013-01-25T06:49:35.250
> 
> 标签：android, brightness, screen-brightness

当我的手机（HTC Desire HD (2.3.3)）开启自动亮度时，我的亮度为 255。

我的代码

```
int value = Settings.System.getInt(c.getContentResolver(),
                Settings.System.SCREEN_BRIGHTNESS); 
```

自动亮度开启时如何获取亮度级别？

## 试过了

我试过了，在获得亮度之前，我正在设置`manual`模式。但是当我将模式设置为时亮度为 0 `manual`。

```
Settings.System.putInt(getContentResolver(),
                Settings.System.SCREEN_BRIGHTNESS,
                Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL); 
```

当我的手机具有自动亮度时，如何获得亮度级别`on`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-02T13:19:14.930

在自动亮度的情况下，您需要传递不同的键

```
float brightness = android.provider.Settings.System.getInt(getContentResolver(),
                    "screen_auto_brightness_adj"); 
```

它应该返回值从 -1 到 +1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:25:10.957

```
WindowManager.LayoutParams oLayOutParam = use from an activity getWindow().getAttributes(); 
```

`oLayOutParam.screenBrightness`是亮度的值。

# sql - 如何获取sql server 2008中的所有字段

> ID：14516780
> 
> 赞同：0
> 
> 时间：2013-01-25T06:49:35.843
> 
> 标签：sql, sql-server, database, sql-server-2008

我想从我在查询中选择的表中获取所有字段，即使字段不包含值（值 null 或空）。以下是我写的查询。

```
SELECT (
           SELECT T1.[CarrierCode_Destination] AS '@CarrierCode_Destination',
                  T1.[CarrierCode_Destination_Address] AS 
                  '@CarrierCode_Destination_Address',
                  T1.[CarrierCode_Destination_Address1] AS 
                  '@CarrierCode_Destination_Address1',
                  T1.[CarrierCode_Destination_Address2] AS 
                  '@CarrierCode_Destination_Address2',
                  T1.[CIMtrek_RegContact] AS '@CIMtrek_RegContact',
                  T1.[CIMtrek_CarrierContact] AS '@CIMtrek_CarrierContact',
                  [T1].[CIMtrek_AdditionalContacts] AS 
                  '@CIMtrek_AdditionalContacts'
           FROM   (
                      SELECT CD.[CIMtrek_DestinationName] 
                             CarrierCode_Destination,
                             CD.[CIMtrek_DestinationAdd] 
                             CarrierCode_Destination_Address,
                             CD.[CIMtrek_DestinationAdd_1] 
                             CarrierCode_Destination_Address1,
                             CD.[CIMtrek_DestinationAdd_2] 
                             CarrierCode_Destination_Address2,
                             CD.[CIMtrek_RegContact] CIMtrek_RegContact,
                             CD.[CIMtrek_CarrierContact] CIMtrek_CarrierContact,
                             CD.[CIMtrek_AdditionalContacts] 
                             CIMtrek_AdditionalContacts
                      FROM   CIMtrek_SystemTable_DatawareHouse CD
                      WHERE  LEN(
                                 LTRIM(
                                     RTRIM(ISNULL(LTRIM(RTRIM(CD.[CIMtrek_DestinationName])), ''))
                                 )
                             ) != 0
                  ) AS T1 
                  FOR XML PATH('Record'),
                  TYPE
       ) FOR XML PATH('CarrierCode_Destination'),
       TYPE 
```

我得到的结果是

```
<CarrierCode_Destination>
  <Record CarrierCode_Destination="8S - San Fran" CarrierCode_Destination_Address="SAN FRANCISCO  -  Redistribution" CarrierCode_Destination_Address1="4025 Whipple Road, " CarrierCode_Destination_Address2="Union City CA  94587" CIMtrek_RegContact="RDC San Francisco" />
  <Record CarrierCode_Destination="8G - St Louis" CarrierCode_Destination_Address="ST. LOUIS  -  Redistribution" CarrierCode_Destination_Address1="126 Enterprise  Drive, " CarrierCode_Destination_Address2="Wentzville MO  63385" CIMtrek_RegContact="RDC St Louis" />
  <Record CarrierCode_Destination="V8     PHO/CYPR/CUST/TL  " />
</CarrierCode_Destination> 
```

但我想要查询中选择的所有字段。如果您看到结果，它会为我提供有价值的字段并省略没有值的字段。

如何做到这一点，请帮助。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:18:05.667

如果您`isnull()`对正在选择的每一列使用语句并将空值转换为空字符串，则它应该强制为所有列生成属性。您可能还需要也可能不需要添加`rtrim()`如下所示的语句，具体取决于您是否具有将返回固定大小字符串的数据类型：

```
SELECT (
       SELECT rtrim(isnull(T1.[CarrierCode_Destination],'')) AS '@CarrierCode_Destination',
              rtrim(isnull(T1.[CarrierCode_Destination_Address],'')) AS 
              '@CarrierCode_Destination_Address',
              rtrim(IsNull(T1.[CarrierCode_Destination_Address1],'')) AS 
              '@CarrierCode_Destination_Address1',
              rtrim(IsNull(T1.[CarrierCode_Destination_Address2],'')) AS 
              '@CarrierCode_Destination_Address2',
              rtrim(IsNull(T1.[CIMtrek_RegContact],'')) AS '@CIMtrek_RegContact',
              rtrim(IsNull(T1.[CIMtrek_CarrierContact],'')) AS '@CIMtrek_CarrierContact',
              rtrim(IsNull([T1].[CIMtrek_AdditionalContacts],'')) AS 
              '@CIMtrek_AdditionalContacts'
       FROM   (
                  SELECT CD.[CIMtrek_DestinationName] 
                         CarrierCode_Destination,
                         CD.[CIMtrek_DestinationAdd] 
                         CarrierCode_Destination_Address,
                         CD.[CIMtrek_DestinationAdd_1] 
                         CarrierCode_Destination_Address1,
                         CD.[CIMtrek_DestinationAdd_2] 
                         CarrierCode_Destination_Address2,
                         CD.[CIMtrek_RegContact] CIMtrek_RegContact,
                         CD.[CIMtrek_CarrierContact] CIMtrek_CarrierContact,
                         CD.[CIMtrek_AdditionalContacts] 
                         CIMtrek_AdditionalContacts
                  FROM   CIMtrek_SystemTable_DatawareHouse CD
                  WHERE  LEN(
                             LTRIM(
                                 RTRIM(ISNULL(LTRIM(RTRIM(CD.[CIMtrek_DestinationName])), ''))
                             )
                         ) != 0
              ) AS T1 
              FOR XML PATH('Record'),
              TYPE
   ) FOR XML PATH('CarrierCode_Destination'),
   TYPE 
```

当我对其进行测试时，这对我有用，但如果您还遇到空值不生成属性的问题，您可以首先强制所有空值`NULL`从选择中返回，使用针对您的原始数据表`NULLIF()`

```
SELECT (
       SELECT rtrim(isnull(T1.[CarrierCode_Destination],'')) AS '@CarrierCode_Destination',
              rtrim(isnull(T1.[CarrierCode_Destination_Address],'')) AS 
              '@CarrierCode_Destination_Address',
              rtrim(IsNull(T1.[CarrierCode_Destination_Address1],'')) AS 
              '@CarrierCode_Destination_Address1',
              rtrim(IsNull(T1.[CarrierCode_Destination_Address2],'')) AS 
              '@CarrierCode_Destination_Address2',
              rtrim(IsNull(T1.[CIMtrek_RegContact],'')) AS '@CIMtrek_RegContact',
              rtrim(IsNull(T1.[CIMtrek_CarrierContact],'')) AS '@CIMtrek_CarrierContact',
              rtrim(IsNull([T1].[CIMtrek_AdditionalContacts],'')) AS 
              '@CIMtrek_AdditionalContacts'
       FROM   (
                  SELECT NullIF(CD.[CIMtrek_DestinationName],'') 
                         CarrierCode_Destination,
                         NullIF(CD.[CIMtrek_DestinationAdd],'') 
                         CarrierCode_Destination_Address,
                         NullIF(CD.[CIMtrek_DestinationAdd_1],'') 
                         CarrierCode_Destination_Address1,
                         NullIF(CD.[CIMtrek_DestinationAdd_2],'') 
                         CarrierCode_Destination_Address2,
                         NullIF(CD.[CIMtrek_RegContact],'') CIMtrek_RegContact,
                         NullIF(CD.[CIMtrek_CarrierContact],'') CIMtrek_CarrierContact,
                         NullIF(CD.[CIMtrek_AdditionalContacts],'') 
                         CIMtrek_AdditionalContacts
                  FROM   CIMtrek_SystemTable_DatawareHouse CD
                  WHERE  LEN(
                             LTRIM(
                                 RTRIM(ISNULL(LTRIM(RTRIM(CD.[CIMtrek_DestinationName])), ''))
                             )
                         ) != 0
              ) AS T1 
              FOR XML PATH('Record'),
              TYPE
   ) FOR XML PATH('CarrierCode_Destination'),
   TYPE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:52:10.720

我通常使用以下语法：

```
SELECT *
FROM   TABLE_NAME
WHERE  FIELD_NAME = "CRITERIA" 
```

# javascript - javascript中的私有成员

> ID：14516781
> 
> 赞同：4
> 
> 时间：2013-01-25T06:49:40.187
> 
> 标签：javascript

谁能告诉我我们如何在javascript中使用或声明私有成员。我会很感激一个例子。我是新手

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T06:53:38.790

道格拉斯·克罗克福德（Douglas Crockford）有一篇关于[私人会员](http://javascript.crockford.com/private.html)的文章：

私有成员由构造函数创建。构造函数的普通变量和参数成为私有成员。

```
function Container(param) {
    this.member = param;
    var secret = 3;
    var that = this;
} 
```

此构造函数生成三个私有实例变量：param、secret 和 that。它们附加到对象上，但外部无法访问它们，对象自己的公共方法也无法访问它们。私有方法可以访问它们。私有方法是构造函数的内部函数。

```
function Container(param) {

    function dec() {
        if (secret > 0) {
            secret -= 1;
            return true;
        } else {
            return false;
        }
    }

    this.member = param;
    var secret = 3;
    var that = this;
} 
```

私有方法 dec 检查秘密实例变量。如果它大于零，它会递减 secret 并返回 true。否则返回false。它可用于使此对象仅限于三种用途。

按照惯例，我们将那个变量设为私有。这用于使对象可用于私有方法。这是 ECMAScript 语言规范中错误的解决方法，该错误导致内部函数的设置不正确。

私有方法不能被公共方法调用。为了使私有方法有用，我们需要引入一个特权方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T06:54:24.897

这是一种方法：

```
function TheClass() {
    var _this = this;
    var privateMember = 'foo';
    this.publicMember = 'bar';

    var privateMethod = function(){
        // things happen here
    };

    this.publicMethod = function(){
        //other things here
        _this.publicMember = 'sparky';
        return privateMember;
    };
}

var myObj = new TheClass();

alert(myObj.privateMember);  //won't work
alert(myObj.publicMember);   //should work
alert(myObj.publicMethod()); //should work too 
```

看看这个[工作小提琴](http://jsfiddle.net/RUt2b/2/)并玩一下它;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:59:35.933

JavaScript 没有单独的私有变量。在 JS 中，变量的作用域是最近函数的顶部。因此，创建函数（或闭包）是一种使私有变量只能在该范围内访问的方法。要记住的重要一点是*始终*使用`var`来声明变量，否则，即使在函数内部，变量也会变成全局变量，这很糟糕。

如果您正在使用原型继承，那么它就像创建构造函数一样简单，并且声明的任何变量`var`都将是私有的，而声明的变量`this`将是公共的。

```
function Bar() {
  var foo = ''; // private
  this.baz = function() {}; // public
}

var bar = new Bar(); // create new instance of Bar
alert(bar.foo); // error
alert(bar.baz); // function 
```

上面的构造函数也很简单，通常你会把函数方法放在`prototype`对象的实际值上，比如`Bar.prototype.baz = function(){}`.

例如，如果您正在使用单例，则可以使用模块模式：

```
var bar = (function(){ // bar is public

  var foo = ''; // foo is private
  function baz() {}; // baz is private  

  return {
    baz: baz // expose 'baz' as a public member of 'bar'
  }

}());

alert(bar.foo); // error
alert(bar.baz); // function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-11T12:17:51.987

你可以试试这个[https://www.npmjs.com/package/private-members](https://www.npmjs.com/package/private-members)

此包将按实例保存成员。

```
const pvt = require('private-members');
const _ = pvt();

let Exemplo = (function () {    
    function Exemplo() {
        _(this).msg = "Minha Mensagem";
    }

    _().mensagem = function() {
        return _(this).msg;
    }

    Exemplo.prototype.showMsg = function () {
        let msg = _(this).mensagem();
        console.log(msg);
    };

    return Exemplo;
})();

module.exports = Exemplo; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T06:53:29.273

私有成员由构造函数创建。构造函数的普通变量和参数成为私有成员。

```
function Container(param) {
    this.member = param;
    var secret = 3;
    var that = this;
} 
```

此构造函数生成三个私有实例变量：param、secret 和 that。它们附加到对象上，但外部无法访问它们，对象自己的公共方法也无法访问它们。私有方法可以访问它们。私有方法是构造函数的内部函数。

[您可以在此链接](http://javascript.crockford.com/private.html)上找到更多详细信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-22T06:29:45.520

（目前的草案）ECMAScript 2022 规范包括私有标识符的概念。请参阅MDN 上的[私有类功能：](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields)

> 默认情况下，类字段是公共的，但可以使用哈希 # 前缀创建私有类成员。这些类特性的隐私封装由 JavaScript 本身强制执行。

大多数流行的 JS 引擎已经支持它。

例子：

```
class Animal {
    #owner;

    constructor(name, owner) {
        this.name = name;
        this.#owner = owner;
    }

    hasOwner() {
        return Boolean(this.#owner);
    }
}

let dog = new Animal("blacky", "trincot");
console.log(dog.hasOwner()); // true
console.log("#owner" in dog, "#owner" in Animal.prototype); // false, false
```

# svn - svn -> mercurial 转换后不完整的日志

> ID：14516782
> 
> 赞同：0
> 
> 时间：2013-01-25T06:49:40.827
> 
> 标签：svn, mercurial

我`hg convert -A AUTHORS_FILE repo`在一个颠覆存储库上运行。如果我`hg log`在新创建的 mercurial 存储库中运行，我只会得到 subversion 修订历史中的最后 8 次更改。

有没有办法转换我的 subversion 存储库并维护整个日志？我知道这不是很多信息，我不确定在这种情况下调试信息会有什么帮助。问我，我会尝试查找信息。

编辑：有问题的颠覆存储库包含多个项目（这不能很好地转化为 mercurial），但我只想要一个项目。解决方案大致如下：

```
hg --config convert.svn.trunk=project/trunk --config convert.svn.branches=project/branches --config convert.svn.tags=project/tags convert file:///net/vol1/svn 
```

convert.svn.* 表示项目的主干、分支和标签到转换工具的位置。/net/vol1/svn 是 svn 存储库所在的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:30:50.810

我认为并期望，您在修订版中有基本的布局更改，在您无法转换历史之前 -**如果**您从 repo-root 转换**并且|或**没有在 .hgrc 中定义 tree-relatedsvn.* 选项

如何调试您的案例

*   检查存储库的 svn-client 日志（`svn URL-OF-REPO-ROOT -v`将向您显示受完整路径修订影响的文件） - 如果布局已更改，您必须分两个或更多步骤转换源代码库，一次仅转换具有永久布局的范围，并正确选项

`svn.trunk`

> 主干的相对路径（默认：“主干”）

`svn.branches`

> 分支树的相对路径（默认值：“分支”）`

`svn.tags`

> 标签树的相对路径（默认：“标签”）

（在命令行中）和`--rev`选项

*   For the same job (checking layout) you can use `svn ls URL@PEG-REV` or recursively over tree with -R
*   you can convert Subversion repository to Mercurial repo transparently, using [HGSubversion](http://mercurial.selenic.com/wiki/HgSubversion) extension (you clone Subversion repo, can pull|push with it, but cloned local repo is Mercurial repository)

# php - facebook 创建日期中使用的时间格式是什么？

> ID：14516792
> 
> 赞同：13
> 
> 时间：2013-01-25T06:50:30.913
> 
> 标签：php, facebook, facebook-graph-api, datetime

嗨，我正在研究 facebook Graph API，我需要一个组的所有帖子信息。所以我做到了，看到`[created_date'] => '2013-01-25T00:11:02+0000'`这个日期和时间代表什么，我的意思是我知道 `2013-01-25`日期和时间`00:11:02`，但代表什么。`T``+0000`

顺便说一句，facebook的服务器在哪里。我应该使用哪个时间戳来匹配 Facebook 时间？

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-25T06:55:53.470

T = TIME，+0000 是时区偏移量。Facebook 使用本地化时区。您可以通过在图形 API 调用中添加参数：date_format=U 来请求 Unix 时间戳而不是字符串。

请参阅[此链接](https://chris.banes.me/2011/06/24/correctly-parsing-graph-api-event-times/)了解更多信息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-25T07:01:51.313

日期格式称为[`ISO 8601`](http://en.wikipedia.org/wiki/ISO_8601). 该字母`T`用于明确分隔日期和时间，并`+0000`用于表示时区偏移量，在本例中为 GMT 或 UTC。

也就是说，您通常不需要太担心实际内容；相反，您应该知道如何与他们合作。要使用这样的日期，您可以使用`strtotime()`将其转换为时间戳：

```
$ts = strtotime('2013-01-25T00:11:02+0000'); 
```

要将时间戳转换回字符串表示，您可以简单地使用`gmdate()`预定义的日期常量[`DATE_ISO8601`](http://sg2.php.net/manual/en/class.datetime.php#datetime.constants.iso8601)：

```
echo gmdate(DATE_ISO8601, $ts); 
```

或者，使用[`DateTime`](http://www.php.net/manual/en/class.datetime.php)：

```
// import date
$d = DateTime::createFromFormat(DateTime::ISO8601, '2013-01-25T00:11:02+0000');

// export date
echo $dd->format(DateTime::ISO8601), PHP_EOL; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T06:54:24.537

这是一种标准格式，特别是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)。

尽管我不喜欢链接到它，[http://www.w3schools.com/schema/schema_dtypes_date.asp](http://www.w3schools.com/schema/schema_dtypes_date.asp)确实有一个很好的“人类可以理解”的解释：

> dateTime 以以下形式指定“YYYY-MM-DDThh:mm:ss”，其中：
> 
> ```
> YYYY indicates the year
> MM indicates the month
> DD indicates the day
> T indicates the start of the required time section
> hh indicates the hour
> mm indicates the minute
> ss indicates the second 
> ```
> 
> 要指定时区，您可以通过在时间后面添加“Z”来输入 UTC 时间中的 dateTime - 如下所示：
> 
> `2002-05-30T09:30:10Z`
> 
> 或者您可以通过在时间后面添加正时间或负时间来指定与 UTC 时间的偏移量 - 如下所示：
> 
> `2002-05-30T09:30:10-06:00`
> 
> 或者
> 
> `2002-05-30T09:30:10+06:00`

因此，在您的情况下，`+0000`表示与 UTC 的时间偏移量为 0。

# php - 动态生成的javascript的缓存和压缩

> ID：14516795
> 
> 赞同：0
> 
> 时间：2013-01-25T06:50:46.607
> 
> 标签：php

我正在使用 php 根据不同的条件动态生成 javascript。我希望浏览器能够将其缓存特定的时间。

我正在使用以下代码进行缓存，但它似乎不起作用。

```
header("Content-type: text/javascript; charset: UTF-8");
header("Cache-Control: must-revalidate");
$offset = 60 * 60 ;
$ExpStr = gmdate("D, d M Y H:i:s", time() + $offset) . " GMT";
header($ExpStr); 
```

另外，这个 js 文件很大，大约 290 KB，所以我想将它压缩后发送到浏览器以减少下载时间。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:51:56.450

您忘记了**Expires**标题名称，所以该行

```
$ExpStr = gmdate("D, d M Y H:i:s", time() + $offset) . " GMT"; 
```

应该

```
$ExpStr = "Expires: " . gmdate("D, d M Y H:i:s", time() + $offset) . " GMT";

// output your js file here 
```

对于压缩输出，取消注释（如果不存在则添加）PHP.ini 中的以下行。放气或压缩输出。修改 PHP.ini 后不要忘记重启服务器

```
output_handler = ob_gzhandler 
```

# android - NullPointerException android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState

> ID：14516804
> 
> 赞同：5
> 
> 时间：2013-01-25T06:51:40.393
> 
> 标签：android, android-intent, android-fragments

在使用共享意图时，应用程序崩溃并出现以下错误

```
01-25 12:16:09.270: E/AndroidRuntime(28699): FATAL EXCEPTION: main
01-25 12:16:09.270: E/AndroidRuntime(28699): java.lang.NullPointerException
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1576)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1617)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:481)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at com.actionbarsherlock.app.SherlockFragmentActivity.onSaveInstanceState(SherlockFragmentActivity.java:127)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.app.Activity.performSaveInstanceState(Activity.java:1113)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1188)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:2805)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.app.ActivityThread.handleStopActivity(ActivityThread.java:2863)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.app.ActivityThread.access$900(ActivityThread.java:127)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.os.Looper.loop(Looper.java:137)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at android.app.ActivityThread.main(ActivityThread.java:4507)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at java.lang.reflect.Method.invokeNative(Native Method)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at java.lang.reflect.Method.invoke(Method.java:511)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-25 12:16:09.270: E/AndroidRuntime(28699):    at dalvik.system.NativeStart.main(Native Method) 
```

PlacesActivity.java

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.action_share:
        // Google Analytics Tracking
        GATracker.sendEvent("ui_action", "button_press", "share",
                click_value);

        shareIt();
        break;
    default:
        break;
    }
    return true;
}

private void shareIt() {
    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");

    String shareText = name + "\n" + distance + " kms - " + days + " days"
            + "\n" + todo + "\n\n"
            + "Check out Nomad for Android http://goo.gl/i1mH9";

    sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            "Check out this!!");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareText);
    startActivity(Intent.createChooser(sharingIntent, "Share via"));
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-25T22:21:26.343

它是某种错误（或者可能不是）。但请尝试以下操作：对于所有片段，覆盖 onSaveInstanceState 如下

```
@Override 
public void onSaveInstanceState(Bundle outState) 
{
//first saving my state, so the bundle wont be empty.
outState.putString("WORKAROUND_FOR_BUG_19917_KEY",  "WORKAROUND_FOR_BUG_19917_VALUE");
super.onSaveInstanceState(outState);
} 
```

这个[链接](https://code.google.com/p/android/issues/detail?id=19211)有更多的见解

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-01T18:55:08.047

尝试使用 FragmentStatePagerAdapter 而不是 FragmentPageAdapter。是一个更好的方法。

# javascript - jquery中'a'标签的点击事件

> ID：14516811
> 
> 赞同：2
> 
> 时间：2013-01-25T06:52:26.963
> 
> 标签：javascript, jquery, html, web-applications

我需要触发“ `deletable`”类中“a”标签的点击事件。我在 SO 中看到了一些类似的问题，但是下面的代码对我不起作用。我想要做的是`<li>`从`<ul>`.

```
 $(document).ready(function () {
      $('.deletable').live("click", function () {
        alert("test"); // Debug
        // Code to remove this <li> from <ul>
     });
   });

<form ...>   
    <ul>
        <li>One<a href="#" class="deletable">Delete</a></li>
        <li>Two<a href="#" class="deletable">Delete</a></li>
        <li>Three<a href="#" class="deletable">Delete</a></li>
    </ul>
</form> 
```

我假设我在`$('...')`标签内使用了不正确的对象层次结构。但是我没有足够的 js/jquery/DOM 知识来解决这个问题。请帮忙。

**编辑**

感谢您的答案，但它们都不适合我。实际上我正在`<li>`动态添加 s 。可能有问题。请检查，

`#sps`- 一个列表框 `#add`- 一个按钮 `#splist`- 另一个列表框 `#remove`- 一个按钮

```
$(document).ready(function() {
        $('#add').click(function(e) {
            var selectedOpts = $('#sps option:selected');
            if (selectedOpts.length == 0) {
                alert("Nothing to move.");
                e.preventDefault();
            }

            $('#splist').append($(selectedOpts).clone());
            $('ul').append('<li>' + selectedOpts.text() + '<a href="#" class="deletable" id="id' + selectedOpts.val() + '">Remove</a>' + '</li>');
            e.preventDefault();
        });

        $('#remove').click(function(e) {
            var selectedOpts = $('#splist option:selected');
            if (selectedOpts.length == 0) {
                alert("Nothing to move.");
                e.preventDefault();
            }

            $(selectedOpts).remove();
            e.preventDefault();
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:53:57.667

您可以使用`$('a.deletable')`选择器...这会找到`<a>`with 类`deletable`。

你也可以通过委托事件..这里是[文档](http://api.jquery.com/on/)

试试这个

```
$('a.deletable').on("click",function(){
   alert("test"); // Debug
   // Code to remove this <li> from <ul>
   $(this).parent("li").remove();
}); 
```

如果您`<li>`是动态添加的..

```
 $(document).on("click",'a.deletable',function(){ .... //even more better if u replace the document with closest elements to a.deletable ..like $(form) 
```

`live()`被贬低了。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:56:34.463

jQuery的`.live()`方法已被弃用。您可以像我在以下代码中所做的那样使用`$('body')`和委托来获得类似的功能：`.deletable`

```
$('body').on('click', '.deletable', function(e){
  e.preventDefault();
  // this is the li that was clicked
  $(this).parent().remove();
}); 
```

如果 href 属性中存在目标内容，则 preventDefault 方法用于阻止链接加载新页面。如果您保持与示例中相同的 HTML 结构，那么您可以简单地获取锚元素 ( `this`) 并获取父元素，然后将其从 DOM 中删除。

明智的做法是，而不是使用`$('body')`.deletable 锚定位容器，在这种情况下，它是 .deletable 锚`$('ul')`。该函数如下所示：

```
$('ul').on('click', '.deletable', function(e){
  e.preventDefault();
  // this is the li that was clicked
  $(this).parent().remove();
}); 
```

使用`$('body')`意味着必须过滤页面上的每个事件以查看它是否源自 .deletable 锚点。通过将其范围限定为`ul`前面的 li，您可以限制调用函数的次数来提高性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:57:22.843

先做一些事情：如果您使用的是 jQuery 1.9，`.live()`则不再支持该功能。之前的版本，该特定功能无论如何**都已弃用**，因此您不应该真正使用它。

话虽如此，您的语法看起来是正确的。所以我假设这是你在处理函数中的层次结构是不正确的。

如果您尝试删除父级，这样的事情应该可以工作`<li>`：

```
$('.deletable').on('click', function (e) {
    // since you're working with a link, it may be doing wonky default browser stuff
    // so disable that for now
    e.preventDefault();

    // then we delete the parent li here:
    $(this).parent('li').remove();
}); 
```

如果你真的想把它变成一个委托签名，这样的事情应该可以工作：

```
$('form').on('click', '.deletable', function (e) {
    // same banana
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:55:23.037

```
$('a.deletable').live("click",function(){
    alert("test"); // Debug
    $(this).parent('li').remove();
}); 
```

# iphone - 在 iPhone 中使用 UIScrollView 和 ImageView 滚动图像

> ID：14516815
> 
> 赞同：1
> 
> 时间：2013-01-25T06:52:51.047
> 
> 标签：iphone, uiscrollview, uiimageview, uiimage

我正在使用其中一个应用程序，在该应用程序中，只有一个视图上有图像。我希望能够向左或向右滑动，让第一个图像离开视图，第二个图像进入。图像是不同的，我希望它看起来像它们是连接的。我在 xib 文件上使用了 UIScrollView 和 UIImageView 下面是我在视图中使用的代码确实加载方法。当我运行应用程序时，滚动视图中只显示最后一个图像。

```
NSMutableArray *images = [[NSMutableArray alloc] initWithObjects:[UIImage imageNamed:@"iPad.png"],[UIImage imageNamed:@"iPadMini.png"],[UIImage imageNamed:@"iPhone4.png"],[UIImage imageNamed:@"iPhone5.png"], nil];
for (int i = 0; i < [images count]; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;
    imgView.frame = frame;
    imgView.image = [images objectAtIndex:i];
    [scrollView addSubview:imgView];
}
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * images.count, self.scrollView.frame.size.height); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:03:15.400

尝试使用此代码块...

```
NSMutableArray *images = [[NSMutableArray alloc] initWithObjects:[UIImage imageNamed:@"iPad.png"],[UIImage imageNamed:@"iPadMini.png"],[UIImage imageNamed:@"iPhone4.png"],[UIImage imageNamed:@"iPhone5.png"], nil];
for (int i = 0; i < [images count]; i++)
{

    UIImageView *imgView = [[UIImageView alloc] init];
    imgView.frame = CGRectMake(100*i, 0, 100, self.scrollView.frame.size.height);
    imgView.image = [images objectAtIndex:i];
    [scrollView addSubview:imgView];

}
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * images.count, self.scrollView.frame.size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:05:00.900

试试这个..

```
 NSMutableArray *images = [[NSMutableArray alloc] initWithObjects:[UIImage imageNamed:@"iPad.png"],[UIImage imageNamed:@"iPadMini.png"],[UIImage imageNamed:@"iPhone4.png"],[UIImage imageNamed:@"iPhone5.png"], nil];
for (int i = 0; i < [images count]; i++) {
UIImageView *imgView = [[UIImageView alloc]init];
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * i;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;
imgView.frame = frame;
imgView.image = [images objectAtIndex:i];
[scrollView addSubview:imgView];
}
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * images.count, self.scrollView.frame.size.height); 
```

希望能帮助到你...

# php - CakePHP：数据未保存在多个表中

> ID：14516819
> 
> 赞同：0
> 
> 时间：2013-01-25T06:53:08.217
> 
> 标签：php, cakephp

嘿伙计们，我是 CakePHP 的新手，所以请帮助我，我无法将单个表单数据保存在两个表中。这是我的代码。

**主要型号代码：**

```
var $hasMany = array('Option'); 
```

**控制器代码：**

```
public function add()
{
    if (!empty($this->request->data))
    {
       $this->Question->saveAll($this->data);
    }
} 
```

**查看文件：**

```
echo $this->Form->create('Question');
echo $this->Form->input('question');
foreach (range(0,2) as $index) {
  echo $this->Form->input('Option.'.$index.'.option');
}
echo $this->Form->end('Save Poll'); 
```

请告诉我哪里出错了。数据仅插入单个表中，而不插入其他表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:03:08.567

试试这个，如果它的工作。

```
<?php

if ($this->Question->save($this->data))
{
    $this->Question->Option->saveAll($this->data['Option']);
    $this->Session->setFlash(__('Question has been successfully edited.', true), 'default',array('class'=>'alert alert-success'));
    $this->redirect(array
    (
        'controller' => 'questions',
        'action'     => 'index'
    ));
    exit;
}
```

# excel - 从具有匹配行和列 ID 的外部工作簿导入数据

> ID：14516822
> 
> 赞同：0
> 
> 时间：2013-01-25T06:53:28.240
> 
> 标签：excel, excel-2010, vba

这是我第一次在这里发帖

我有一个**错误**：

`error 91 Object variable or With block variable not set`

上线`r2Val = activSheet.Columns(1).Find`...

我已经这样做了一个月了，并被困在导入部分

这是工作表更新列表 [www.mediafire.com/view/?av8skl7e3ry93p3](http://www.mediafire.com/view/?av8skl7e3ry93p3) 以上打开文件浏览器以选择要导入工作表的工作簿

这是我要填写的表格 [http://www.mediafire.com/view/?r7y2xfa2s7kc9wx](http://www.mediafire.com/view/?r7y2xfa2s7kc9wx)

这是它将从 [http://www.mediafire.com/view/?6wp8ywme1kgehqn获取数据的地方](http://www.mediafire.com/view/?6wp8ywme1kgehqn)

我当前的代码为此工作：

```
' updates data based on excel or csv file uploaded
' This version uses "find" to find similar meterID and billing period between 2 worksheets
Sub Push2Sheets(filePath As String, shtName As String)
    On Error GoTo ErrorHandler
    If filePath = "False" Then Exit Sub

    Dim targetWorkbook As Workbook 'workbook to get data from
    Dim MyWorkbook As Workbook 'this workbook to merge

    Set MyWorkbook = Application.ActiveWorkbook 'sets this workbook for merging
    Set targetWorkbook = Application.Workbooks.Open(filePath) 'copies source workbook to memory

    Dim activSheet As Worksheet
    Set activSheet = MyWorkbook.Worksheets(shtName) 'selects the worksheet to merge with source sheet
    Dim sourceSheet As Worksheet
    If targetWorkbook.Sheets.Count > 1 Then 'checks first if the target workbook has one or many sheets to draw data
        Set sourceSheet = targetWorkbook.Worksheets(1)
        Else
        Set sourceSheet = targetWorkbook.Worksheets(shtName)
    End If

    Dim rw As Long 'used as a counter for reading the first column of the source sheet
    Dim Col As Long 'used as a counter for reading the first row of the source sheet
    Dim rVal As String, r2Val As Range 'row value
    Dim cVal As String, c2Val As Range 'cell value

    For rw = 2 To sourceSheet.Rows.Count
    rVal = sourceSheet.Cells(rw, 1).Value
    Debug.Print rVal
        'this finds if there is a similar meterID in the target sheet (This Workbook)
        r2Val = activSheet.Columns(1).Find(What:=rVal, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
        If Not r2Val Is Nothing Then
            For Col = 2 To sourceSheet.Columns.Count
            cVal = sourceSheet.Cells(1, Col).Value
            Debug.Print cVal
                'uses the table headers to find a match and copies the content of source to target sheet if found
                c2Val = activSheet.Rows(1).Find(What:=cVal, LookIn:=xlValues, _
                        LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
                        MatchCase:=False, SearchFormat:=False)
                If Not c2Val Is Nothing Then
                sourceSheet.Cells(rw, Col).Copy Destination:=activSheet.Cells(r2Val.Row, c2Val.Column)
                End If
            Next
        Else
            Call UniAutoFiller 'adds a new row at the end of the table if there is a new MeterID
            [addrow].Offset(-1, 0).Value = rVal
        End If
    Next

    targetWorkbook.Close SaveChanges:=False
    Exit Sub

ErrorHandler:
    If Not err.Number = 0 Then Call LogInformation(ThisWorkbook.Name & " has error " & err.Number & " " & err.Description & " on " & Format(Now, "yyyy-mm-dd hh:mm"))
    MsgBox "Something went wrong :?" & vbNewLine & vbNewLine & "Make sure the worksheet name you" & _
     vbNewLine & "are importing match the internal sheet name"
End Sub 
```

说到excel vba，我还是个新手

我想要它做的是：

1.  打开外部工作簿，其中包含完整的工作表
2.  在meterID上找到与内部工作表的meterID匹配的匹配项，
3.  如果找到在列上的计费周期（日期）上找到匹配项，如果
4.  找到复制meterID和计费周期匹配的数据
5.  重复 1-4 直到它到达表的末尾

如果您想查看源代码，请在此处获取：[www.mediafire.com/ ?9z924s7wtrb5md3](http://www.mediafire.com/?9z924s7wtrb5md3)

这是我要导入的工作表：[www.mediafire.com/view/ ?i7td9gm336wg6cg](http://www.mediafire.com/view/?i7td9gm336wg6cg)

我还不能发布图片和链接，所以如果 mods 或 mod 类用户可以清理它，那么我很感激

任何建议、更正、提示都会有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:36:13.913

乍一看，第 91 行错误的原因是您尝试使用 just设置**Range**`=`，而`Set`应该使用 while 来代替，即：

```
Set r2Val = activSheet.Columns(1).Find(What:=rVal, LookIn:=xlValues, _
            LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False) 
```

下面也一样`c2Val`。试着先纠正这些。

# haskell - 卡在状态单子中

> ID：14516835
> 
> 赞同：8
> 
> 时间：2013-01-25T06:54:09.550
> 
> 标签：haskell, state-monad

我想使用节点和唯一键的 IntMap 创建图形结构。[这个话题在这里](https://stackoverflow.com/questions/12941625/ids-from-state-monad-in-haskell?lq=1)和[这里](https://stackoverflow.com/questions/6311512/creating-unique-labels-in-haskell)已经很好地涵盖了. 我通过基本上将 state -> (val,state) 的函数包装在一个新类型中来理解 state monad 的工作原理，这样我们就可以为它创建一个 monad 实例。我已经阅读了很多关于这个主题的内容。我似乎仍然无法理解如何在整个程序执行过程中获得唯一（或只是增量）值。获得一系列连续的 ID 很容易，但是一旦我“runState”退出 monad，我似乎又回到了开始跟踪当前 ID 的地方。我觉得我被困在单子里了。我考虑的另一个选择是将整个 IntMap 和当前的“下一个”ID 保留为状态，但这似乎非常“必要”和极端。[这](https://stackoverflow.com/questions/5385363/propogation-of-state-monad)问题非常相似，但没有得到很多答案（或者我只是遗漏了一些明显的东西）。在整个程序执行过程中，利用 state monad 获取唯一 ID 的惯用方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T16:11:28.000

假设我们要`IO`-ify `State`monad。那会是什么样子？我们的纯`State`monad 只是一个新类型：

```
s -> (a, s) 
```

好吧，该`IO`版本在返回最终值之前可能会产生一些副作用，如下所示：

```
s -> IO (a, s) 
```

这种模式很常见，它有一个名字，特别是`StateT`：

```
newtype StateT s m a = StateT { runStateT :: s -> m (a, s) } 
```

这个名字`T`的末尾有一个，因为它是一个单子变形器`T`。我们称其`m`为“基本单子”和`StateT s m`“转换后的”单子。

`StateT s m`is only a `Monad`if `m`is a `Monad`:

```
instance (Monad m) => Monad (StateT s m) where {- great exercise -} 
```

但是，除此之外，所有 monad 转换器都实现了`MonadTrans`该类，定义如下：

```
class MonadTrans t where
    lift :: (Monad m) => m a -> t m a

instance MonadTrans (StateT s) where {- great exercise -} 
```

如果`t`is `StateT s`，则`lift`'s 类型专门用于：

```
lift :: m a -> StateT s m a 
```

换句话说，它让我们“提升”基本单子中的一个动作，使其成为转换后的单子中的一个动作。

因此，对于您的特定问题，您需要`StateT (IntMap k v) IO`monad，它`IO`以附加`State`的 . 然后你可以在这个 monad 中编写你的整个程序：

```
main = flip runStateT (initialState :: IntMap k v) $ do
    m <- get        -- retrieve the map
    lift $ print m  -- lift an IO action
    (k, v) <- lift readLn
    put (insert k v m) 
```

请注意，我仍然使用`get`and `put`。那是因为这个`transformers`包实现了我描述的所有概念，它概括了`get`和的签名`put`：

```
get :: (Monad m) => StateT s m s
put :: (Monad m) => s -> StateT s m () 
```

这意味着它们会自动在`StateT`. `transformers`然后定义`State`为：

```
type State s = StateT s Identity 
```

这意味着您可以同时使用`get`and和。`put``State``StateT`

要了解有关 monad 转换器的更多信息，我强烈推荐[Monad Transformers - Step by Step](http://www.cs.virginia.edu/~wh5a/personal/Transformers.pdf)。

# mysql - 插入时的 MySQL 数据验证

> ID：14516839
> 
> 赞同：2
> 
> 时间：2013-01-25T06:54:24.557
> 
> 标签：mysql

我不知道 MySQL（或任何数据库）是否可以做到这一点，但我假设它可以做到。

我有一张桌子，有多个字段。其中一个字段跟踪可用“项目”的总数，另一个字段保存当前正在使用的项目数量。

是否可以在 UPDATE 语句中验证传入数据，这样如果正在使用的项目数大于可用的总数，则 UPDATE 将失败？IE 我可以根据另一个字段的内容向一个字段添加数字限制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T07:21:10.950

假设您有几张桌子：

```
Items
------------
ItemID
NumAvailable
-------------

Checkout
-----------
UserID
ItemID
----------- 
```

您可以[创建一个触发器](https://dev.mysql.com/doc/refman/8.0/en/create-trigger.html)，对特定项目的 进行求和`ItemID`并与 进行比较。`NumAvailable`它看起来像这样（可能有错误，只提出一般想法:)。[从这里](https://web.archive.org/web/20180330233216/http://www.brokenbuild.com/blog/2006/08/15/mysql-triggers-how-do-you-abort-an-insert-update-or-delete-with-a-trigger/)收集的错误方法，可能有更好的方法可用）：

```
CREATE TRIGGER check_available 
BEFORE INSERT ON Checkout 
FOR EACH ROW 
BEGIN
  SELECT IF (COUNT(new.ItemID) > Items.NumAvailable) THEN
    DECLARE dummy INT;
        SELECT 'No more items to check out!' INTO dummy 
  FROM new NATURAL JOIN Items WHERE NEW.ItemID = Items.ItemID
  END IF;
END 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-25T07:22:30.230

```
update tableName set useItemColumnName= case when totalItemColumnName>=amount then amount else useItemColumnName end . 
```

注意：`amount`是您的可更新变量。可能是1、2、3...

# c# - 加载 xml 文档并保存时，Xml 实体被删除

> ID：14516842
> 
> 赞同：1
> 
> 时间：2013-01-25T06:54:24.990
> 
> 标签：c#, xml

我有一个包含实体的 xml 文档。当我加载它并处理并保存时，所有实体都会转换为 UTF 编码。如何获取与输入内容相同的文档。

输入xml是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter SYSTEM "DTD_v1.5\PLI.dtd">
 <chapter num="1" update-date="November 2012" type="chapter">
 <page num="3"/>
 <title>Artist-Dealer Relations</title>
<para align="left"><content-style font-style="bold">S</content-style>i &#x00AD;Salander-O&#x2019;Reilly .</para>
<para>Since that time, the New York state artist consignment statute&#x2014;which,      </para>
 <para>The of the artist&#x2019;s work; the amount o and the like. </para>
 <para>But firss of  &#x201C;dealer&#x201D; and &#x201C;gallery&#x201D; interchangeably.</para>
 <itemizedlist type="&#x2022;">
 <item><para>To care </para></item>
</itemizedlist>
  <chapter> 
```

我想输出也与上面的 xml 相同，我尝试了以下代码

```
 XmlDocument xDoc = new XmlDocument();

        string text = string.Empty;
        text = ReadFile("38149_Chapter01_Art_Law_XML.xml", enmReadType.None, Encoding.Default);
        xDoc.LoadXml(text);
        xDoc.Save("38149_Chapter01_Art_Law_XML.xml"); 
```

和

```
string sXmlData = File.ReadAllText("38149_Chapter01_Art_Law_XML.xml", Encoding.Default);
        xDoc.LoadXml(sXmlData);

 XmlAttribute aa = xDoc.CreateAttribute("Name");
        aa.Value = "Sarvesh";

        XmlNode snode = xDoc.SelectSingleNode("//chapter");
        snode.Attributes.Append(aa);

        using (MemoryStream ms = new MemoryStream())
        {
            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Encoding = Encoding.GetEncoding("ISO-8859-1");
            XmlWriter xw = XmlWriter.Create(ms, settings);
            xDoc.Save(xw);
            xw.Close();
            using (TextWriter tx = new StreamWriter("38149_Chapter01_Art_Law_XML.xml", false, Encoding.Default))
            {
                tx.Write(Encoding.UTF8.GetString(ms.ToArray()));
                tx.Close();
            }
        } 
```

# wpf - Mvvm - 取消 Wpf Listbox 中的更改，vb.net

> ID：14516843
> 
> 赞同：0
> 
> 时间：2013-01-25T06:54:31.293
> 
> 标签：wpf, vb.net, listview, mvvm, mvvm-light

我有一个带有主/详细视图的 wpv/mvvm-light/vb.net 应用程序。在此视图中，有一个客户列表框和客户详细信息的详细视图，用户可以在其中查看和编辑客户。

我想添加一个功能，当在列表框中选择新客户端时，系统会提示用户保存更改。如果用户从消息框中选择是，则保存更改，如果否，则丢弃更改并将先前选定的项目返回到其原始值。我有这一切工作正常。

我的问题是，当用户选择一个新客户端并且消息框要求他们保存更改时，列表框会不同步。这意味着列表框显示选择的新客户端，但详细视图仍显示以前的客户端。奇怪的是它在极少数情况下可以正常工作。

以下是我的看法：

```
<UserControl x:Class="FTC.View.ClientListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:FTC_Application"
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="900">

                <ListBox    
                    Grid.Column="1" 
                    Width="350"                    
                    Style="{DynamicResource FTC_ListBox}"  
                    ItemTemplate="{DynamicResource FTC_ClientListTemplate}" 
                    ItemContainerStyle="{DynamicResource FTC_ListItem}"
                                ItemsSource="{Binding ClientViewSource.View}" 
                                SelectedItem="{Binding Path=Selection, Mode=TwoWay}"                
                    />

                    <ContentControl DataContext="{Binding Path=Selection, Mode=TwoWay}" >
                        <!--all the display stuff goes here for the detail view-->
                    </ContentControl>

</UserControl> 
```

以下是列表框的选定项绑定到的视图模型中的属性。它也是显示详细信息的内容控件的绑定。

```
Public Property Selection As client
            Get
                Return Me._Selection
            End Get
            Set(ByVal value As client)
                ''capture current value of selection
                _PreviousClient = _Selection

                ''If they are the same, 
                If value Is _PreviousClient Then
                    Return
                End If

                ' Note that we actually change the value for now.This is necessary because WPF seems to query the
                '  value after the change. The list box likes to know that the value did change.
                If Me._Selection.HasChanges = True And _Selection.HasErrors = False Then
                    'If HasChangesPrompt(value) = True Then
                    '    ''user rejects saving changes, exit property
                    '    Return
                    'End If
                    If FTCMessageBox.Show("Do you want to save your changes", "Unsaved Changes", MessageBoxButton.YesNo, MessageBoxImage.Warning) = MessageBoxResult.No Then
                        ''SELECTION IS CANCELLED
                        ' change the value back, but do so after the  UI has finished it's current context operation.
                        Application.Current.Dispatcher.BeginInvoke(New Action(Sub()
                                                                                  '' revert the current selected item to its original values and reset its HasCHanges tracking
                                                                                  objHelper.CopyProperties(_OriginalClient, _Selection)
                                                                                  _Selection.HasChanges = False
                                                                                  RaisePropertyChanged(ClientSelectedPropertyName)
                                                                                  ''continue with listbox selection changing to the new value for selection
                                                                                  _ClientCollectionViewSource.View.MoveCurrentTo(value)
                                                                              End Sub), DispatcherPriority.Normal, Nothing)
                        Return
                    Else
                        ''save changes to database
                        SaveExecute()
                    End If
                End If

                _Selection = value

                _Selection.HasChanges = False
                RaisePropertyChanged(ClientSelectedPropertyName)

                ''clone the unchanged version of the current selected client on na original variable
                objHelper.CopyProperties(_Selection, _OriginalClient)

            End Set
        End Property 
```

所以想法是，如果用户不想保存更改，则将客户端的原始值复制（使用反射）覆盖当前值，然后更新 ui 并继续选择用户选择的新值. 但是，就像我上面所说的，即使我厌倦了使用以下行对其进行硬编码，列表框也没有反映这种变化：

```
''continue with listbox selection changing to the new value for selection  
 _ClientCollectionViewSource.View.MoveCurrentTo(value) 
```

我通过自定义[此处发布的解决方案获得了此解决方案](http://blog.alner.net/archive/2010/04/25/cancelling-selection-change-in-a-bound-wpf-combo-box.aspx)

任何人都可以帮我弄清楚为什么我的列表框在发生这种情况时会不同步。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:16:18.917

首先：我在您的解决方案中找不到真正的问题，但是您的 Property Setter 中肯定有 - 我重复一遍 - 肯定有太多的代码和逻辑。尝试将其移至其他方法并验证您对那些“if else”块的实现。

第二：只有当您在列表框中选择一个新项目时，Setter 才会被触发，但是您为“ClientSelectedPropertyName”而不是“Selection”引发属性更改，因为它应该是。将始终更改的属性移动到设置器的末尾。

试试这个。我希望它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:07:44.740

所以我有一个我认为遵循 MVVM-Light 标准的工作示例。有很多事情要做，所以我会尽量保持简短和准确。

我最终使用 EventToCommand 绑定到带有 ListView（而不是列表框）的 SelectionChanged 事件。EventToCommand 需要新的命名空间引用，如下所示。然后，我将 EventToCommand 绑定到视图模型中的 RelayCommand，该 RelayCommand 又调用一个私有子来处理客户端验证并保存/取消/并根据需要更新列表视图选择项。

有关更多信息，我有一个导航服务，用于在我的 wpf 应用程序中的视图之间导航。我使用 MVVM-Light messanger 发送了一个由该视图模型“接收”的导航启动消息。然后执行相同的客户端验证功能，并根据用户对抛出的对话消息的响应取消/允许导航。除非要求，否则我不会包含所有 hte 导航代码。以下是解决我原来的问题所需的代码。

```
<UserControl x:Class="FTC.View.ClientListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:FTC_Application"
            xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
            xmlns:cmd="http://www.galasoft.ch/mvvmlight"
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="900">

               <ListView    
                    Grid.Column="1" 
                    Width="350"                    
                    Style="{DynamicResource FTC_ListView}"  
                    ItemTemplate="{DynamicResource FTC_ClientListTemplate}" 
                    ItemContainerStyle="{DynamicResource FTC_ListViewItem}"
                    ItemsSource="{Binding ClientViewSource.View}" 
                    SelectedItem="{Binding Path=Selection, Mode=TwoWay}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <cmd:EventToCommand Command="{Binding SelectedItemChangedCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </ListView> 

                   <ContentControl DataContext="{Binding Path=Selection, Mode=TwoWay}" >
                        <!-- Display stuff and bound controls go here -->
                    </ContentControl>

    </Grid>
</UserControl> 
```

然后以下是我的视图模型中的相关代码（我删除了尽可能多的代码以保持清晰）：

```
Imports System.Data
Imports System.ComponentModel
Imports System.Collections.ObjectModel
Imports System.Windows.Threading

Imports GalaSoft.MvvmLight
Imports GalaSoft.MvvmLight.Command
Imports GalaSoft.MvvmLight.Messaging

Imports FTCModel
Imports FTC_Application.FTC.Model
Imports FTC_Application.FTC.View
Imports FTC_Application.FTC.ViewModel
Imports FTC_Application.FTC.MessageBox
Imports FTC_Application.FTC.Helpers
Imports FTC_Application.FTC.MessengerHelper

Namespace FTC.ViewModel
    Public Class ClientListViewModel
        Inherits ViewModelBase
        Implements IDataErrorInfo

#Region "DECLARATIONS"

        Public Const ClientCollectionPropertyName As String = "ClientCollection"
        Public Const ClientSelectedPropertyName As String = "Selection"
        Public Const ClientDetailCollectionPropertyName As String = "ClientDetailCollection"
        Public Const ClientPropertyName As String = "Client"

        ''gets the data from LINQ to ENT Model
        Private _Clients As New ObservableCollection(Of client)
        ''creats holder for the selected item two way binding
        Private _Selection As New client
        ''the following is used to track changes for unding and canceling selection changed
        Private _PreviousClient As New client
        Private _PreviousOriginalClient As New client
        Private _OriginalClient As New client

        ''Recieves observable collection and provicdes sorting and filtering function
        Private _ClientCollectionViewSource As New CollectionViewSource

        ''RELAY COMMANDS declarations
        Private _SaveCommand As RelayCommand
        Private _SelectedItemChangedCommand As RelayCommand

        ''gets the VML for getting the data service
        Private vml As ViewModelLocator = TryCast(Application.Current.Resources("Locator"), ViewModelLocator)
        ''this is a holder for the client data service
        Private _ClientAccess As IClientDataService = vml.Client_Service

        '' has functions using reflection for copying objects
        Dim objHelper As New ObjectHelper

        ''tracks if client validation is coming from navigation or listview selecteditemchanged
        Private bNavigatingFlag As Boolean = False

#End Region

#Region "PROPERTIES"

        Public ReadOnly Property ClientViewSource As CollectionViewSource
            Get
                Return Me._ClientCollectionViewSource
            End Get
        End Property
        Private Property Clients As ObservableCollection(Of client)
            Get
                Return Me._Clients
            End Get
            Set(ByVal value As ObservableCollection(Of client))
                Me._Clients = value

                _Clients = value
                RaisePropertyChanged(ClientCollectionPropertyName)

            End Set
        End Property
        Public Property Selection As client
            Get
                Return Me._Selection
            End Get
            Set(ByVal value As client)
                ''capture current value of selection
                _PreviousClient = _Selection
                objHelper.CopyProperties(_OriginalClient, _PreviousOriginalClient)

                ''If they are the same, 
                If value Is _PreviousClient Then
                    Return
                End If

                _Selection = value
                _Selection.HasChanges = False
                RaisePropertyChanged(ClientSelectedPropertyName)
                ''clone the unchanged version of the current selected client on na original variable
                objHelper.CopyProperties(_Selection, _OriginalClient)

            End Set
        End Property

#End Region

#Region "COMMANDS"

        Public ReadOnly Property SelectedItemChangedCommand() As RelayCommand
            Get
                If _SelectedItemChangedCommand Is Nothing Then
                    _SelectedItemChangedCommand = New RelayCommand(AddressOf SelectionChangedValidate)
                End If
                Return _SelectedItemChangedCommand
            End Get
        End Property

#End Region

#Region "METHODS"

        Private Sub SelectionChangedValidate()

            ''Uses falg to tell if validation request triggered by navigation event or listview selecteditemchanged event
            ''use previous client for listview event and current client for navigating event
            Dim _ClientToValidate As client
            If bNavigatingFlag = True Then
                _ClientToValidate = _Selection
            Else
                _ClientToValidate = _PreviousClient
            End If

            If _ClientToValidate.HasChanges = True And _ClientToValidate.HasErrors = False Then
                Dim message = New DialogMessage(_ClientToValidate.chrCompany.ToString + " has been changed." + vbCrLf + "Do you want to save your changes?", AddressOf SavePreviousResponse) With { _
                     .Button = MessageBoxButton.YesNo, _
                     .Caption = "Unsaved Changes" _
                }
                Messenger.[Default].Send(message)
                Exit Sub
            End If

            If _ClientToValidate.HasErrors = True Then
                Dim message = New DialogMessage(_ClientToValidate.chrCompany.ToString + " has errors." + vbCrLf + "You must correct these errors before you can continue.", AddressOf HasErrorsResponse) With { _
                     .Button = MessageBoxButton.OK, _
                     .Caption = "Validation Error" _
                }
                Messenger.[Default].Send(message)
                Exit Sub
            End If

            ''reset the navigation flag
            bNavigatingFlag = False

        End Sub
        Private Sub SavePreviousResponse(result As MessageBoxResult)
            If result = MessageBoxResult.No Then
                objHelper.CopyProperties(_PreviousOriginalClient, _PreviousClient)
                _PreviousClient.HasChanges = False
            Else
                ''user wants to save changes, save changes to database
                SaveExecute()
            End If
        End Sub
        Private Sub HasErrorsResponse(result As MessageBoxResult)
            Selection = _PreviousClient
            ''_ClientCollectionViewSource.View.MoveCurrentTo(_PreviousClient)
        End Sub
        Private Function HasChangesPrompt(value As client) As Boolean
            If FTCMessageBox.Show("Do you want to save your changes", "Unsaved Changes", MessageBoxButton.YesNo, MessageBoxImage.Warning) = MessageBoxResult.No Then
                '' change the selected client back to its original value, but do so after the  UI has finished its current context operation.
                Application.Current.Dispatcher.BeginInvoke(New Action(Sub()
                                                                          '' revert the current selected item to its original values and reset its HasCHanges tracking
                                                                          objHelper.CopyProperties(_OriginalClient, _Selection)
                                                                          _Selection.HasChanges = False
                                                                          RaisePropertyChanged(ClientSelectedPropertyName)
                                                                          ''continue with listbox selection changing to the new value for selection
                                                                          _ClientCollectionViewSource.View.MoveCurrentTo(value)
                                                                      End Sub), DispatcherPriority.Normal, Nothing)
                Return True
            Else
                ''user wants to save changes, save changes to database
                Return False
                SaveExecute()
            End If
        End Function

#End Region

        Public Sub New()

            Clients = _ClientAccess.GetClient_All

            ''Sets the observable collection as the source of the CollectionViewSource
            _ClientCollectionViewSource.Source = Clients

            If Selection.idClient = 0 Then
                Selection = Clients.Item(0)
            End If

            ''register for messages
            Messenger.[Default].Register(Of String)(Me, AddressOf HandleMessage)

        End Sub

    End Class

End Namespace 
```

INXS，您会注意到选择属性设置器的代码/逻辑更少。另外，我认为视图模型的每个部分都是可测试的，并且我的视图和视图模型之间没有直接耦合。但这是我的第一个 WPF/MVVM 应用程序，所以我不会完全掌握所有概念。

我希望这可以帮助某人，因为我花了很长时间才弄清楚。

# axapta - 字段类型返回数字 [Axapta]

> ID：14516845
> 
> 赞同：0
> 
> 时间：2013-01-25T06:54:42.853
> 
> 标签：axapta, dynamics-ax-2009, ax

我想获取字段类型。我的代码如下：

```
tID = dict.tableName2Id(tableName);
counter = 0;
dt = new DictTable(tID);
if (dt)
{
    counter = dt.fieldNext(counter);
    while (counter)
    {
        df = dt.fieldObject(counter);
        if (df)
        {
            fields = conIns(fields,1,df.baseType());

        }
        counter = dt.fieldNext(counter);
    }
} 
```

返回到 .NET Business 连接器时，类型显示为数字而不是字符串。请帮忙。

编辑： DataField.baseType() 返回“类型”可以将其转换为字符串然后添加到容器中吗？

编辑2：好的，我得到了一个类型枚举。有没有办法在 AX 中映射这个枚举并作为字符串添加到容器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:50:49.013

知道了！！这是代码：

```
tID = dict.tableName2Id(tableName);
counter = 0;
dt = new DictTable(tID);
if (dt)
{
    counter = dt.fieldNext(counter);
    while (counter)
    {
        df = dt.fieldObject(counter);
        if (df)
        {
            t = df.baseType();
            fields = conIns(fields,1,enum2str(t));

        }
        counter = dt.fieldNext(counter);
    }
} 
```

# sql-server - ssis xml 配置修改包 xml - 我疯了吗？

> ID：14516847
> 
> 赞同：1
> 
> 时间：2013-01-25T06:54:58.383
> 
> 标签：sql-server, ssis

SSIS XML 配置真的可以改变包的内容吗？

我创建了一组连接到我的本地机器的包，然后运行它。然后我创建了 XML 配置，然后我修改了 dtsconfig XML，将 ConnectionString 和 ServerName 中的 DataSource 更改为第二个服务器。

我收到登录错误，所以我查看了我的包的代码。包中的连接管理器现在有了第二台服务器，而不是我在包中编码的本地主机连接。我绝对确定我没有修改包中的连接管理器，只修改了配置。

所以我的问题是，SSIS 配置可以改变包本身吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:05:35.940

如果您在设计时指定配置文件，然后运行您的包，则设计时对象的属性将更新（在您的设计时包中）为您的配置中指定的值。

如果您随后保存您的包，它将与更新的属性值一起保存。

# security - Shiro 向 DefaultSecurityManager 抱怨“没有 id 为 xxx 的会话”

> ID：14516851
> 
> 赞同：12
> 
> 时间：2013-01-25T06:55:09.380
> 
> 标签：security, shiro

我在一个长时间运行的应用程序中使用 Apache Shiro 1.2.0，它从队列中读取消息并采取行动。所采取的操作需要 Shiro 身份验证会话，因此我实现了“ActAsAuthenticationToken”和自定义凭据匹配器，它允许我们仅使用用户名登录。我正在使用 DefaultSecurityManager，只注入了我的自定义领域和主题工厂。其他一切都应该是默认的。

在配置后，一段时间内一切正常，但随着应用程序运行了很长时间（不是那么长 - 像一整天），每当我执行任何需要会话的操作时，我都会开始获取此堆栈跟踪：

```
Caused by: org.apache.shiro.session.UnknownSessionException: There is no session with id [f5b7c3bf-2c53-40e9-a707-37f4265970aa]
    at org.apache.shiro.session.mgt.eis.AbstractSessionDAO.readSession(AbstractSessionDAO.java:170)
    at org.apache.shiro.session.mgt.DefaultSessionManager.retrieveSessionFromDataSource(DefaultSessionManager.java:236)
    at org.apache.shiro.session.mgt.DefaultSessionManager.retrieveSession(DefaultSessionManager.java:222)
    at org.apache.shiro.session.mgt.AbstractValidatingSessionManager.doGetSession(AbstractValidatingSessionManager.java:118)
    at org.apache.shiro.session.mgt.AbstractNativeSessionManager.lookupSession(AbstractNativeSessionManager.java:105)
    at org.apache.shiro.session.mgt.AbstractNativeSessionManager.lookupRequiredSession(AbstractNativeSessionManager.java:109)
    at org.apache.shiro.session.mgt.AbstractNativeSessionManager.getAttribute(AbstractNativeSessionManager.java:206)
    at org.apache.shiro.session.mgt.DelegatingSession.getAttribute(DelegatingSession.java:141)
    at org.apache.shiro.session.ProxiedSession.getAttribute(ProxiedSession.java:121)
    at org.apache.shiro.session.ProxiedSession.getAttribute(ProxiedSession.java:121)
    at org.apache.shiro.session.ProxiedSession.getAttribute(ProxiedSession.java:121)
    at com.factorlab.security.FactorlabDelegatingSubject.getUser(FactorlabDelegatingSubject.java:34)
    at com.factorlab.security.FactorlabDelegatingSubject.getUser(FactorlabDelegatingSubject.java:10)
    at com.factorlab.persistence.AbstractEntityDao.getCurrentUser(AbstractEntityDao.java:227)
    at com.factorlab.persistence.AbstractEntityDao.fireEvent(AbstractEntityDao.java:215)
    at com.factorlab.persistence.AbstractEntityDao.saveOrUpdate(AbstractEntityDao.java:190)
    at com.factorlab.persistence.AbstractEntityDao.saveOrUpdate(AbstractEntityDao.java:177)
    at com.factorlab.persistence.AbstractEntityDao.saveOrUpdate(AbstractEntityDao.java:38)
    at sun.reflect.GeneratedMethodAccessor106.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy72.saveOrUpdate(Unknown Source)
    at com.factorlab.observations.sales.OpportunityScoreUpdateServiceImpl.receiveOpportunityEvent(OpportunityScoreUpdateServiceImpl.java:83)
    at sun.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy76.receiveOpportunityEvent(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:69)
    at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:84)
    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57)
    at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)
    at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:102)
    at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:126)
    at org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:227)
    at org.springframework.integration.util.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:127)
    at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:73)
    ... 49 more 
```

真正奇怪的部分（就我而言）是我成功登录（或至少表明我在收到错误之前已经通过身份验证：

```
@Transactional(propagation = Propagation.REQUIRED, isolation = Isolation.REPEATABLE_READ)
@Trace(dispatcher = true)
public void receiveOpportunityEvent(EntityEvent<Opportunity> event) {
    sessionFactory.getCurrentSession().refresh(event.getEntity());
    log.info("OpportunityScoreUpdateService receiveOpportunityEvent: " + event);

    //
    //
    // Here we see that we are either authenticated or we log in successfully
    //
    //
    if (!securityUtils.getSubject().isAuthenticated()) {
        try {
            securityUtils.getFactorlabSubject().login(new ActAsAuthenticationToken(event.getEventUsername()));
        } catch (RuntimeException e) {
            log.error("Could not log in user " + event.getEventUsername() + ": " + e.getMessage(), e);
            return;
        }
    }
    if (event.getEntity() instanceof ObservedOpportunity) {
        ObservedOpportunity opportunity = (ObservedOpportunity) event.getEntity();
        opportunity = (ObservedOpportunity) opportunityDao.getById(opportunity.getId(), SkippedCheck.PERMISSION, SkippedCheck.DELETED);
        if (!opportunity.isDeleted()) {
            List<Stage> stages = stageDao.getAllByZone(opportunity.getZone(), SkippedCheck.PERMISSION);
            Map<Stage, Double> originalScoresByStage = new HashMap<Stage, Double>();
            Map<Stage, Double> newScoresByStage = new HashMap<Stage, Double>();
            final Double originalTotal = opportunity.getTotalScore();
            for (Stage stage : stages) {
                originalScoresByStage.put(stage, opportunity.getScoreByStage(stage));
                double score = calculator.getScoreForOpportunityAndStage(opportunity, stage);
                opportunity.setScoreByStage(stage, score);
                newScoresByStage.put(stage, opportunity.getScoreByStage(stage));
            }

            final double newTotalScore = calculator.getTotalScoreForOpportunity(opportunity);
            opportunity.setTheTotalScore(newTotalScore);
            final boolean scoreChanged = originalTotal == null ||
                    Math.round(originalTotal) != Math.round(newTotalScore) ||
                    checkStageScoresChanged(originalScoresByStage, newScoresByStage);
            if (scoreChanged) {
                opportunity.setScoreCalculated(new Date());

                //
                //
                // Here is where we get the exception
                //
                //
                opportunityDao.saveOrUpdate(opportunity, SkippedCheck.PERMISSION);
            } else {
                opportunityDao.refresh(opportunity);
            }
        }
    }
} 
```

什么可能导致此异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-05T17:51:00.940

我收到此错误，发现在调用`subject.login(credentials)`修复之前完全破坏了任何现有会话。

```
// Login the user
private Subject loginUser()
{
  ensureUserIsLoggedOut();
  Subject subject = SecurityUtils.getSubject();
  subject.login(credentials);
} 
```

并且支持的套路是：

```
// Logout the user fully before continuing.
private void ensureUserIsLoggedOut()
{
    try
    {
        // Get the user if one is logged in.
        Subject currentUser = SecurityUtils.getSubject();
        if (currentUser == null)
            return;

        // Log the user out and kill their session if possible.
        currentUser.logout();
        Session session = currentUser.getSession(false);
        if (session == null)
            return;

        session.stop();
    }
    catch (Exception e)
    {
        // Ignore all errors, as we're trying to silently 
        // log the user out.
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T12:49:37.773

Shiro 正在针对存储在 Session 中的 SecuritySubject 验证凭据。因此，您的会话很可能在一段时间不活动后过期。您可以在 web.xml 中更改过期时间，也可以使用 Shiro rememberMe 功能，但您的客户端必须支持 cookie。在rememberMe 函数之后SecuritySubject 将获得不同的会话并且针对isAuthenticated 将返回false，但isRemembered 将返回true。

**会话永远不会过期**这将产生另一个问题，即您的会话永远不会过期。它很可能会让您内存不足，因为您的 Web 容器很可能使用内存会话管理器。

```
<session-config>
    <session-timeout>-1</session-timeout>
</session-config> 
```

**Shiro rememberMe** [http://shiro.apache.org/java-authentication-guide.html](http://shiro.apache.org/java-authentication-guide.html)

```
//Example using most common scenario:
//String username and password.  Acquire in
//system-specific manner (HTTP request, GUI, etc)

UsernamePasswordToken token =
 new UsernamePasswordToken( username, password );

//”Remember Me” built-in, just do this:
token.setRememberMe(true); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-12T09:29:11.613

我们可以在 shiro 中禁用会话存储。

org.apache.shiro.mgt.DefaultSessionStorageEvaluator 类包含一个名为 sessionStorageEnabled 的标志。我们可以把它弄错。

我在我的 spring 应用程序上下文中使用以下内容来不使用会话存储。

```
<bean id="defaultSessionStorageEvaluator" class="org.apache.shiro.mgt.DefaultSessionStorageEvaluator">
        <property name="sessionStorageEnabled" value="false" /> 
```

```
<bean id="defaultSubjectDAO" class="org.apache.shiro.mgt.DefaultSubjectDAO">
        <property name="sessionStorageEvaluator" ref="defaultSessionStorageEvaluator" />
    </bean> 
```

# xml - 如何将字符串转换为字典

> ID：14516853
> 
> 赞同：0
> 
> 时间：2013-01-25T06:55:17.577
> 
> 标签：xml, c#-4.0

```
 string putContactRequestBody = string.Format("<Contacts><Contact><Name>{0}</Name></Contact></Contacts>", contactName); 
```

我想将 putContactRequestBody 转换为 Idictionary

# c# - 动态绑定更新图片

> ID：14516854
> 
> 赞同：0
> 
> 时间：2013-01-25T06:55:20.517
> 
> 标签：c#, wpf, xaml

我有一个带有标题和描述的图像列表（ListBox）。图像尚未下载，但标题和描述将首先显示。下载图像后，我怎么知道要更新图像？

部分xml：

```
<ListBox.ItemTemplate>
   <DataTemplate>
       <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Image Margin="5" Source="{Binding Image}" Grid.Column="0" Name="DCIM" />
            <TextBlock Grid.Column="1" Margin="2" Text="{Binding Title}" Name="Title" TextWrapping="NoWrap" TextTrimming="WordEllipsis" />
            <TextBlock Grid.Column="1" Margin="2" Text="{Binding Desc}" Name="count" TextWrapping="NoWrap" TextTrimming="WordEllipsis" />
       </Grid>
   </DataTemplate>
</ListBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:07:30.310

下载图像时调用 `NotifyProperyChanged("Image")`更新`Source="{Binding Image}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:17:06.920

您需要在您的项目类中实现[INotifyPropertyChanged ：](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

```
public class MyDataItem : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private ImageSource image;
    public ImageSource Image
    {
        get { return image; }
        set
        {
            image = value;
            NotifyPropertyChanged("Image");
        }
    }

    // do the same for Title and Desc

    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

分配属性时`Image`，会引发属性更改通知，更新绑定。

# android - 以编程方式打开 GPS 时出现权限被拒绝异常

> ID：14516855
> 
> 赞同：0
> 
> 时间：2013-01-25T06:55:23.340
> 
> 标签：android, android-permissions

我需要以编程方式启用 GPS，以便我使用以下代码启用 GPS：

```
 String provider = Settings.Secure.getString(getContentResolver(),
                Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

        if (!provider.contains("gps")) { // if gps is disabled
            final Intent poke = new Intent();
            poke
                    .setClassName("com.android.settings",
                            "com.android.settings.widget.SettingsAppWidgetProvider");
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3"));
            sendBroadcast(poke); 
```

但是当我使用这段代码时，我得到了以下异常：

```
 01-25 12:11:37.218: W/ActivityManager(477): Permission denied: checkComponentPermission() reqUid=1000
    01-25 12:11:37.218: W/ActivityManager(477): Permission Denial: broadcasting Intent { cat=[android.intent.category.ALTERNATIVE] dat=3 cmp=com.android.settings/.widget.SettingsAppWidgetProvider } from com.gpstraking (pid=982, uid=10186) requires null due to receiver com.android.settings/com.android.settings.widget.SettingsAppWidgetProvider 
```

我必须给予什么许可才能避免此异常并启用 GPS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:05:10.433

您的清单中是否有以下行：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:08:31.717

将此添加到清单中：

```
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"></uses-permission> 
```

# java - Apache axis2 jar 文件在运行时不占用

> ID：14516859
> 
> 赞同：1
> 
> 时间：2013-01-25T06:55:35.040
> 
> 标签：java, web-services, axis2, axis

在运行应用程序时，我收到以下错误。该错误仅在运行时出现。它已经编译成功。

它在eclipse下运行没有任何问题。但是使用 Apache 轴，我们在上传到服务器时会得到以下错误跟踪。Apache axis2 jar 文件在运行时没有占用。但是编译成功。

该应用程序在 Oracle R12 服务器下运行。我没有找到在 R12 服务器中为运行时设置类路径的任何选项。

使用 Java 版本为 1.6 和 Apache axis2.1.6.2

错误跟踪：

```
Exception :java.lang.NoClassDefFoundError: Could not initialize class org.apache.axis2.description.AxisService
Error : java.lang.NoClassDefFoundError: Could not initialize class org.apache.axis2.description.AxisService
com.rightnow.ws.wsdl.RightNowSyncServiceStub.populateAxisService(RightNowSyncServiceStub.java:41)
com.rightnow.ws.wsdl.RightNowSyncServiceStub.(RightNowSyncServiceStub.java:636)
com.rightnow.ws.wsdl.RightNowSyncServiceStub.(RightNowSyncServiceStub.java:625)
com.rightnow.ws.wsdl.RightNowSyncServiceStub.(RightNowSyncServiceStub.java:673)
com.rightnow.ws.wsdl.RightNowSyncServiceStub.(RightNowSyncServiceStub.java:665)
com.rightnow.ws.util.ContactUtils.initializeService(ContactUtils.java:57)
_somejsp._jspService(_somejsp.java:189)
com.orionserver.http.OrionHttpJspPage.service(OrionHttpJspPage.java:59)
oracle.jsp.runtimev2.JspPageTable.service(JspPageTable.java:473)
oracle.jsp.runtimev2.JspServlet.internalService(JspServlet.java:594)
oracle.jsp.runtimev2.JspServlet.service(JspServlet.java:518)
javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
com.evermind.server.http.ResourceFilterChain.doFilter(ResourceFilterChain.java:64)
oracle.apps.jtf.base.session.ReleaseResFilter.doFilter(ReleaseResFilter.java:26)
com.evermind.server.http.EvermindFilterChain.doFilter(EvermindFilterChain.java:15)
oracle.apps.fnd.security.AppsServletFilter.doFilter(AppsServletFilter.java:318)
com.evermind.server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:642)
com.evermind.server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:391)
com.evermind.server.http.HttpRequestHandler.doProcessRequest(HttpRequestHandler.java:908)
com.evermind.server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:458)
com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:313)
com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:199)
oracle.oc4j.network.ServerSocketReadHandler$SafeRunnable.run(ServerSocketReadHandler.java:260)
com.evermind.util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:303)
java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:05:44.380

当 Java 虚拟机无法在运行时找到在编译期间可用的特定类时，Java 中的 NoClassDefFoundError 就会出现。我相信您的服务器中应该缺少或放错了axis.jar。再次检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:52:33.217

您需要在服务器的 lib 目录中拥有所有与 axis2 相关的库，或者它们需要与您的 .war 文件一起打包。

要在 Eclipse 中处理此问题，请选择您的项目并转到

属性-> 部署程序集-> 添加-> Java 构建路径条目

并添加所有axis2 jar。这将确保所有相关的 jar 都与您的 .war 捆绑在一起

另一种解决方案是将所有axis2 jars硬拷贝到WebContent/WEB-INF/lib

# encoding - Tapestry 5.36 部署在 Jetty 9 上，编码问题

> ID：14516863
> 
> 赞同：1
> 
> 时间：2013-01-25T06:55:58.643
> 
> 标签：encoding, jetty, debian, locale, tapestry

我刚刚在 Jetty 9 Web 服务器上部署了我的 Tapestry 5 应用程序，在 Debian Squeeze 上运行。我有编码问题。我看不到塞尔维亚字母 (šđčćž)。例如，我将“Dobrodošli”视为“Dobrodo??li”。你可以在[这里](http://cls.metropolitan.ac.rs/elearning)查看。据我所知，Tapestry 默认使用 UTF8，在 Debian 语言环境中设置为 SR Latin UTF8，在 Jetty 上我找不到任何可以设置的配置设置。我在我的电脑（Ubuntu 12.10）上做了同样的事情，一切都很好。你能帮我吗？如何解决这个问题，我不知道我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:28:23.680

您是否尝试为`tapestry.charset`.

> 生成输出（或解析输入）时使用的字符编码。默认值为“UTF-8”。

有关详细信息，请查看[http://tapestry.apache.org/configuration.html](http://tapestry.apache.org/configuration.html)

# asp.net - 是否需要在域中上传 bin 文件夹？

> ID：14516866
> 
> 赞同：0
> 
> 时间：2013-01-25T06:56:31.983
> 
> 标签：asp.net, bin

我刚刚在我的域中上传了我的 Web 应用程序。bin文件夹是否也需要在域中上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:25:17.043

通常 .net 会将一些必需的 DLL 放入 bin 文件夹中，并且必须上传这些 DLL。但是，可以更改它们的位置，因此可以不使用 bin 文件夹。

# python - 购物车不工作，我想哭

> ID：14516868
> 
> 赞同：-1
> 
> 时间：2013-01-25T06:56:34.607
> 
> 标签：python, django, shopping-cart

试图为求职面试构建一个购物车应用程序。几个小时后就要到期了，我不能让它工作。

任何建议都会有所帮助——这是完成繁重工作的产品视图：

```
def products(request, store_subdomain):
    store_db, store_products = database_selector(store_subdomain)
    context = RequestContext(request)
    if request.method == 'POST': #load catalog page with "item added"
        product = store_products.get(pk=request.POST['product_id'])
        cart = request.session.get('cart', {})
        if cart.get(product):
            cart['product_id'] += 1
        else:
            cart['product_id'] = 1
        request.session['cart'] = cart
    request.session.modified = True
        return render_to_response('catalog.html', 
                {'store_name': store_db.name, 'store_products': store_products, 
                'message':'Item Added'}, context_instance=context)  
    return render_to_response('catalog.html', 
        {'store_name': store_db.name, 
        'store_products' : store_products}, context_instance=context) 
```

以及应该添加到购物车的相关模板部分：

```
<form method="post" action="." class="cart">{% csrf_token %}
    {{ form.as_p }}
    <br />
    Qty <input type="number" name="qty" value = "1"> </br>
    <button type="submit" value="{{p.id}}" name= "product_id" />Add to Cart</button>
</form> 
```

以及调用购物车的视图：

```
def shoppingcart(request, store_subdomain):
    #load page of all shopping cart items
    store_db, store_products = database_selector(store_subdomain)
    return render_to_response('shoppingcart.html', 
            {'store_name': store_db.name, 
            'store_products': store_products, 
            'cart' : cart}) 
```

以及应该显示购物车中内容的模板：

```
{% for p,k in cart %}
<div class="product_image" >
        <img src="{{ STATIC_URL }}images/{{p.image}}" alt={{p.name}}/>      <br />
    </div>
    <h1><span property="v:name">{{ p.name }}</span></h1>
    <br />
    Price: {{ p.price|currency }} X Qty {{ k }} = 
{{cart}} 
```

Post 方法肯定会被触发，但是当我转到购物车页面（应该显示其中的所有产品）时，它是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:41:00.293

您需要将模板包装在一个块中，因为它正在扩展某些内容。您不能只是在 {% extends %} 标记之后将该代码放在那里并期望它能够工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:06:21.390

`cart`在请求会话中设置后添加以下行。

```
...
request.session['cart'] = cart
request.session.modified = True 
```

默认的 django 行为是，`request.session`如果其任何属性未更改，则不会保存，这通常是存储 dict 的情况。

[保存会话时的](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs#when-sessions-are-saved)更多文档

# java - 使用 JNA/JNI 从多个线程调用共享库何时安全？

> ID：14516869
> 
> 赞同：1
> 
> 时间：2013-01-25T06:56:35.120
> 
> 标签：java, concurrency, native, jna, shared-libraries

我已经将一些`FORTRAN`子例程编译到一个`.so`文件中，我`JNA`用来从`Java`.

从多个线程同时（可重入）调用子例程是否安全？

我不认为子程序保持任何全局状态，但是有什么要求`JNA`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:16:53.063

AFAIK JNA doesn't have any specific limitations of multi-threaded use. At least I have assumed it doesn't and it hasn't shown a problem. JNA is stateless so I would be surprised if it did.

# html - 在 Windows 8 Phone 中无法使用 HTML 5 播放音频

> ID：14516871
> 
> 赞同：2
> 
> 时间：2013-01-25T06:56:45.103
> 
> 标签：html, windows-8, windows-phone-8

我正在尝试使用 HTML 5 项目模板制作音频播放器。我正在使用以下 HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" href="/html/css/phone.css" />
        <title>Windows Phone</title>
    </head>
    <body>
        <div>
            <p>Audio Player</p>
        </div>
        <div id="page-title">
            <p>Play Audio</p>
            <audio controls="">
            <source src="horse.ogg" type="audio/ogg">
             Your browser does not support the audio element.
            </audio>
        </div>
    </body>

</html> 
```

[我从这里](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_audio_all)获取了这段代码，我已将“horse.ogg”添加到解决方案资源管理器中，如下面的屏幕截图所示......

![在此处输入图像描述](../Images/b2d50409199ebf9e15fef762c263aa48.png)

但是当我运行这个应用程序时，我得到以下输出，它显示

> 无效来源

但是当我使用浏览器打开相同的 html 时，我能够正确播放文件。

![在此处输入图像描述](../Images/dfa68bb32d21c3999e4d432fba2687aa.png)

可能是什么问题呢 ？

有没有更好更简单的方法可以播放音频文件，我将添加到解决方案资源管理器并使用 HTML 5 播放？我计划添加 10-15 个小而有趣的音频剪辑，该应用程序将允许用户选择它并使用 HTML 5 播放它。

请分享您对此的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:37:36.830

正如错误消息所说，它是一个无效的来源。

Internet Explorer 10 不支持 Ogg 音频文件，但支持 MP3 文件。将您的 Ogg 转换为 MP3，它应该可以正常工作。

```
<audio controls>
   <source src="horse.mp3" type="audio/mp3">
</audio> 
```

此外，如果您只提供一个来源，则可以使用音频元素的 src 属性：

```
<audio src="horse.mp3" controls></audio> 
```

但仅当您仅针对一种特定类型的浏览器时，才真正推荐这样做。

# python - 如何在 python 中的 if 语句中测试异常？

> ID：14516873
> 
> 赞同：4
> 
> 时间：2013-01-25T06:56:47.193
> 
> 标签：python, function, exception, if-statement

我想编写一个函数来报告来自另一个函数的不同结果，这些结果中有一些例外，但我无法将它们转换为 if 语句

例子 ：

> 如果 f(x) 引发 ValueError，那么我的函数必须返回字符串 'Value' 如果 f(x) 引发 TypeError，那么我的函数必须返回字符串 'Type

但我不知道如何在 Python 中做到这一点。有人可以帮我吗。

我的代码是这样的： -

```
def reporter(f,x):    

    if f(x) is ValueError():
        return 'Value'
    elif f(x) is E2OddException():
        return  'E2Odd'
    elif f(x) is E2Exception("New Yorker"):
        return 'E2'
    elif f(x) is None:
        return 'no problem'
    else:
        return 'generic' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T06:59:36.557

您必须[`try-except`](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)在 Python 中处理异常：-

```
def reporter(f,x): 
    try:
        if f(x):  
            # f(x) is not None and not throw any exception. Your last case
            return "Generic"
        # f(x) is `None`
        return "No Problem"
    except ValueError:
        return 'Value'
    except TypeError:
        return 'Type'
    except E2OddException:
        return 'E2Odd' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:00:22.070

```
def reporter(f,x):    
    try:
        if f(x) is None:
            return 'no problem'
        else:
            return 'generic'
    except ValueError:
        return 'Value'
    except E2OddException:
        return  'E2Odd'
    except E2Exception:
        return 'E2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:59:14.653

你把你的函数调用放在一个`try-except`像这样的结构中

```
try:
    f(x)
except ValueError as e:
    return "Value"
except E20ddException as e:
    return "E20dd" 
```

函数本身不返回异常，异常被外部捕获。

# ruby-on-rails - Ruby ActiveRecords 的资源

> ID：14516877
> 
> 赞同：1
> 
> 时间：2013-01-25T06:57:03.823
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ 新手，想更深入地了解活动记录库。我应该从哪里开始？我可以浏览任何印刷/在线书籍/资源吗？

我偶然看到了由 Kevin Marshall、Chad Pytel 和 Jon Yurek 撰写的“Pro Active Record: Databases with Ruby and Rails”一书。但这似乎很旧（2007年版）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:11:14.077

Rails 指南是学习 Rails 的最佳场所之一。以下几个链接将对您有所帮助。

[http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:15:56.107

The [Official Rails Guides documentation](http://guides.rubyonrails.org/index.html) is a good place to start. All four chapters under the `Model` section will be useful.

In addition check out this useful introduction blogpost (with screencast videos) by Richard Schneeman : [Active Record Deep Dive](http://schneems.com/post/28125445535/active-record-deep-dive)

# java - java swing中的动作监听器方法内部没有调用方法

> ID：14516878
> 
> 赞同：-2
> 
> 时间：2013-01-25T06:57:06.740
> 
> 标签：java, swing, actionlistener, method-call

我必须在 java swing actionperformed 方法中调用一个方法。但是当我单击按钮时，什么也没有发生。如何解决这个问题呢？

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
   {
    hellocalled();
    }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T07:05:14.707

您需要为按钮添加动作侦听器以响应点击事件：

```
Button b = new Button();
b.addActionListener(new ActionListener(){

    public void actionPerformed(ActionEvent evt){
       jButton1ActionPerformed(evt);
       // call the method jButton1ActionPerformed
       // or you can call the one you have defined `hellocalled();` here
    } 
  }
} 
```

# android - 如何以中心旋转组合物理体：corona SDK

> ID：14516884
> 
> 赞同：1
> 
> 时间：2013-01-25T06:57:37.680
> 
> 标签：android, rotation, physics, coronasdk

我正在用电晕 SDK 做一个物理应用程序。在那，我正在创建一个带有关节的组合物理体。我需要的是：'我需要用它的中心旋转新的组合体'。我正在给出代码。任何人请帮助...

```
 --------------------------------------------------------------------------------------
  local physics = require( "physics" )
  physics.start()
  physics.setDrawMode("debug")
  ---------------------------
     -- Creating bodies --
  ---------------------------
  local body_1 = display.newRect(0,0,40,40)
  local body_2 = display.newRect(0,0,40,40)
  local body_3 = display.newRect(0,0,40,40)
  local base_1 = display.newRect(0,display.contentHeight,display.contentWidth,display.contentHeight)
  body_1.x = 100; body_1.y = 250;
  body_2.x = 100; body_2.y = 300;
  body_3.x = 150; body_3.y = 275;

  ---------------------------
     -- Adding Physics --
  ---------------------------
  physics.addBody( body_1, { density=1.6, friction=0.5, bounce=0.0} )
  physics.addBody( body_2, { density=1.6, friction=0.5, bounce=0.0} )
  physics.addBody( body_3, { density=1.6, friction=0.5, bounce=0.02, radius = 20} )
  physics.addBody( base_1, "static", { density=1.6, friction=0.5, bounce=0.2} )

  ---------------------------
     -- Creating Joints --
  ---------------------------
  local myJoint_1 = physics.newJoint( "weld", body_1, body_2, 100,250 )
  local myJoint_2 = physics.newJoint( "pivot", body_1, body_3, 100,250 )
  local myJoint_2 = physics.newJoint( "pivot", body_2, body_3, 100,300 )

  ---------------------------
      -- My Function --
  ---------------------------
  local function rotateTheGroup()
       -- I want to rotate the combined body here. And I need to know the newBodie's referencepoint.
  end
 Runtime:addEventListener("tap",rotateTheGroup)
 -------------------------------------------------------------------------------------- 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:46:44.220

如果简单体**B**位于 (x [b] , y [b] )，并且轴点**C**在 (x [b] , y [b] )，并且您想将**B**绕**C**旋转角度 t（逆时针），则**B**去至

**B'** = (x [c] +(x [b] -x [c] )cos(t)-(y [b] -y [c] )sin(t), y [c] +(x [b] -x [c] )sin(t)+(y [b] - y [c] )cos(t))

您可以用矩阵表示法更简洁地表达这一点：

B' = **C** + **R** ( **B** - **C** )

在哪里

```
R = cos(t) -sin(t)
    sin(t)  cos(t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:35:17.367

谢谢@Beta，但我已经找到了解决方案。我只是使用下面的代码给身体一个角度脉冲并连续应用它，我完成了工作。

```
 body_3:applyAngularImpulse( -1000 ) 
```

感谢你们的支持。

# android - ANDROID：删除数据库数据后列表视图不会更新

> ID：14516889
> 
> 赞同：0
> 
> 时间：2013-01-25T06:58:11.450
> 
> 标签：android, listview, cursor, adapter, updates

`ListView`Android 新手，我在从数据库中删除条目后更新我的 a 时遇到问题。

在我的活动中，我在每一行都有`ListView`多项选择`checkboxes`。用户按下删除按钮后，`deleteName()`被调用。`deleteName()`然后将删除在`ListView`. 名称从数据库中删除，但`ListView`永远不会更新。

我尝试使用`adapter.notifyDataSetChanged()`但没有任何反应。为什么我的`ListView`更新不行？

```
public void deleteName() {

    NamesDataSource datasource = new NamesDataSource(this);
    datasource.open();

    ListView listView = (ListView) findViewById(android.R.id.namelist);
    SparseBooleanArray checked = listView.getCheckedItemPositions();

    List<Name> values = datasource.getAllNames();
    ArrayAdapter<Name> adapter = new ArrayAdapter<Name>(this, android.R.layout.simple_list_item_multiple_choice, values);

    for (int i = 0; i < checked.size(); i++) {
        int position = checked.keyAt(i);
        if (checked.valueAt(i))
            datasource.deleteName(adapter.getItem(position));
    }

    adapter.notifyDataSetChanged();
    setListAdapter(adapter);
    datasource.close();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:20:39.333

您的代码不是最优的，因为您在每次调用 delete 方法时都创建了一个新适配器。您应该维护对适配器的活动范围引用（可能在您的“OnCreate”中）

您的列表视图未更新的原因是因为您正在用值填充其适配器，但没有从中删除已删除的值。

例如你是

```
datasource.deleteName(adapter.getItem(position)); 
```

但是没有对应的

```
adapter.remove(name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:02:30.037

试试这个

```
listView.inValidate(): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:02:55.227

发生这种情况是因为您`adapter`在清除之前添加了值`database`

`adapter`在清除/删除值后添加值`database`，然后调用`adapter.notifyDataSetChanged();`

让我知道这是否对您有帮助

# html - 在 Mozilla 中显示嵌入推文的突然问题

> ID：14516894
> 
> 赞同：0
> 
> 时间：2013-01-25T06:58:23.220
> 
> 标签：html, css, firefox, twitter, mozilla

我的一个网站几周前上线了。该设计包括在当时正确显示的 div 中嵌入推文。

然而，在今天检查时，我注意到嵌入推文在 Mozilla 中移到了右侧。现在让我感到困惑的是，我什至没有接触过代码，所以 twitter 或 Mozilla 更新了它们的属性之一？？？

继承人到我的网站的[链接。](http://www.whitehousegroup.in/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:14:20.607

好的，问题终于解决了，覆盖了twitter创建的css。

我只是使用了以下 scc 选择器

```
 "div_containing_twitter_script" iframe {properties} 
```

因此，如果我将代码放在以“twitter”为 id 的 div 中，则代码将是

```
 #twitter iframe {property:value} 
```

不过，非常感谢您尝试帮助我...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T07:06:04.793

如果 Twitter 提要未显示，您可以使用以下代码。

```
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> <p></p> <script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 5,
  interval: 1000,
  width: 180,
  height: 200,
  theme: {
    shell: {
      background: '#88d4ff',
      color: '#ffffff'
    },
    tweets: {
      background: '#ffffff',
      color: '#333333',
      links: '#00aeef'
    }
  },
  features: {
    scrollbar: false,
    loop: true,
    live: true,
    behavior: 'default'
  }
}).render().setUser('@YourUser').start(); /* Need to change User ID*/
</script> 
```

# html - 使边距相对于高度而不是宽度进行缩放

> ID：14516898
> 
> 赞同：0
> 
> 时间：2013-01-25T06:58:46.693
> 
> 标签：html, css

[http://jsfiddle.net/NykbP/](http://jsfiddle.net/NykbP/)

我正在尝试使我的 margin-bottom css 属性在`.header`、`.mainBanner`和`li`s 上相对于文档/窗口的高度进行缩放，但是它们相对于文档/窗口的宽度进行缩放，而`div`s 的高度正在正确缩放。 ..

```
height:8% 
```

上述比例正确

```
margin-bottom:2%; 
```

以上没有。

如何使它们相对于高度缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:02:31.700

以百分比声明的边距基于其父节点的宽度。去搞清楚。

这是一篇很棒的文章，应该可以帮助您： http: [//mattsnider.com/css-using-percent-for-margin-and-padding/](http://mattsnider.com/css-using-percent-for-margin-and-padding/)

# svn - SVN 更新：最有效的使用方法是什么？

> ID：14516902
> 
> 赞同：0
> 
> 时间：2013-01-25T06:58:50.610
> 
> 标签：svn

远程服务器中有一个活动的 SVN 项目，其中有两个或多个贡献者（我是其中一个）。

我已经有 svn 文件夹的文件，所以我做了一个：

```
svn diff 
```

在我的本地副本中检查更改。现在服务器中的文件和我的副本中的文件之间存在差异。

所以如果我做一个：

```
svn update 
```

它会更新远程副本并覆盖那里的更改吗？还是相反，它将下载那里正在更改的内容并与我的副本合并？

几个小时后，假设我进行了必要的更改，有什么建议？

1.  先做`svn diff`之前`svn update`？
2.  `svn update`先做后做`svn commit`？

我想确保我不会覆盖其他贡献者在服务器中所做的某些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:11:00.723

运行 'svn update' 不会将您的任何更改提交到服务器，因此在提交之前执行此操作是安全的 - 尽管正如您所怀疑的，它会检索其他人所做的任何更改并将它们合并到您的工作副本中。

如果您想在运行 'svn update' 之前预览将对您的工作副本进行哪些远程更改，请尝试：

```
svn status --show-updates 
```

绝对推荐在提交之前（以及在你开始工作之前！）运行 svn update。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:31:06.230

`update`将远程更改带入您的本地副本，因此您可以随时使用它而无需担心。

也就是说，如果远程更改很复杂，那么您可能会失去*本地*更改的神圣性，从而导致任何冲突的混乱。

我倾向于`svn diff`经常关注我的本地工作目录与工作基础的不同之处；当准备好开始时，我会做一个`svn update`让一切都保持最新状态，做一个决赛`svn diff`来了解我在做什么，最后执行`svn commit`.

所有这一切的唯一变化是我在 Windows 上使用 TortoiseSVN，因此整个过程是图形化和直观的。

# joomla - Joomla 模块渲染说明

> ID：14516903
> 
> 赞同：0
> 
> 时间：2013-01-25T06:58:52.217
> 
> 标签：joomla, joomla2.5, joomla-module

我正在渲染相同模块类型的许多实例，每次都通过代码（通过获取模块和渲染模块）为其赋予不同的 id 和参数。每当一个人访问一个页面时，就会发生这种渲染。这意味着模块是在那时和那里自己创建的。这会减慢网站的速度吗？请说清楚。提前非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:01:45.763

depends on how the cache is configured, if it's properly cached you shouldn't see a noticeable delay.

Try to put the site in debug mode and load the page, it will give you detailed times for each module.

# c# - 如何使用 FileSystemWatcher 检查文件是否被另一个进程锁定？

> ID：14516905
> 
> 赞同：0
> 
> 时间：2013-01-25T06:59:02.627
> 
> 标签：c#, .net, filesystemwatcher

> **可能重复：**
> [等到文件在 .NET 中解锁](https://stackoverflow.com/questions/50744/wait-until-file-is-unlocked-in-net)

在很多情况下，程序必须等到文件被另一个进程解锁（例如，正在复制的文件）才能再次使用它。一个标准的解决方案是等待它使用 Thread.Sleep() 在循环中迭代。我不认为这种好。我已经读过可以使用 .NET 的 FileSystemWatcher 来做到这一点（我正在使用 C#）。任何人都可以说明吗？非常感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:11:28.457

[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)顾名思义，可让您监视**文件**或文件夹时发生的任何事件`change``create``delete``rename`

你不能`FileSystemWatcher`用来检查文件是否被锁定..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:32:17.520

```
FileSystemWatcher _watcher;
int _watcherEventFiredCounter;

_watcher = new FileSystemWatcher {
    Path = @"C:\temp",
    NotifyFilter = NotifyFilters.LastWrite,
    Filter = "*.zip",
    EnableRaisingEvents = true
};

_watcher.Changed += OnChanged;

private void OnChanged(object sender, FileSystemEventArgs e)
{
    _watcherEventFiredCounter++;
    // The event is fired two times: on start copying and on finish copying
    if (_watcherEventFiredCounter == 2) {
        Console.WriteLine("Copying is finished now!");
        _watcherEventCounter = 0;
    }
} 
```

现在的问题是如何才能回到调用线程？

# c# - asp.net 中非静态字段中的会话值

> ID：14516906
> 
> 赞同：1
> 
> 时间：2013-01-25T06:59:03.607
> 
> 标签：c#, asp.net

我需要获取用户的当前用户 ID，我尝试了以下代码

```
ClsUser User = (ClsUser)Session["USER"]; 
```

但它显示错误应该写入非静态函数..所以我的问题是如何在静态字段中获取当前会话值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:03:14.147

如果您使用的是静态函数，则需要使用

`HttpContext.Current.Session` 所以你可以直接在静态函数中引用命名空间

尝试类似的东西

```
ClsUser User = (HttpContext.Current.Session["USER"] as ClsUser); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:04:05.257

这是解决方案还检查`null`值

```
public static class UserInfo
{
    public static ClsUser showName()
    { 
        return (ClsUser)(HttpContext.Current.Session["USER"]);
    }
 } 
```

# facebook - 具有基本 http auth 和 facebook 社交插件、twitter 按钮的网站

> ID：14516907
> 
> 赞同：2
> 
> 时间：2013-01-25T06:59:04.700
> 
> 标签：facebook, authentication, twitter

我正在一个关于登台环境的网站上工作。在登台环境中，网站使用 http 基本身份验证。而且我发现如果启用了 http 基本身份验证，facebook 社交按钮和推文分享按钮将不起作用。有什么解决方法吗？或者我应该完全禁用http基本身份验证

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:33:06.213

[更好的解决方案可能是利用Facebook 应用程序安全文档](https://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper)中提供给我们的一些信息。截至 2012 年 8 月，Facebook 将这些 IP 地址列为其服务器用来访问外部站点的 IP 地址：

```
31.13.24.0/21
31.13.64.0/18
66.220.144.0/20
69.63.176.0/20
69.171.224.0/19
74.119.76.0/22
103.4.96.0/22
173.252.64.0/18
204.15.20.0/22

2401:db00::/32
2620:0:1c00::/40
2a03:2880::/32 
```

要获取更新的列表，您可以使用此命令 -

```
whois -h whois.radb.net -- '-i origin AS32934' | grep ^route 
```

所以你会使用一些类似于这个 PHP 版本的代码 -

```
if(in_array($_SERVER["REMOTE_ADDR"],$arrayOfIPAddresses) === TRUE){
  // current request is coming from Facebook's IP
}else{
  // current request is not from Facebook
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:28:43.093

此解决方案取决于您的基本身份验证方法对您的重要性。不过，您已经准确地确定了您的问题 - 事实上，Facebook 的服务器无法访问需要密码的页面。

您似乎愿意禁用此密码身份验证，这让我相信它的目的只是*混淆*对登台服务器的访问，而不是保护它。如果这是真的，那么有一些简单的方法可以让 Facebook 的服务器访问数据，同时仍然要求到达您页面的普通用户（可能是偶然的）输入密码。一种这样的方法是检查与请求一起发送的用户代理 -

PHP中的一个例子 -

```
if(stristr($_SERVER["HTTP_USER_AGENT"],'facebook') === FALSE){
  // require password
}else{
  // allow request with user agent containing Facebook  
} 
```

现在必须在这里说，用户代理字符串可以被欺骗/伪造，不应该被认为足够准确，不能被 100% 信任。

# wso2 - 如何在本地机器上配置 wso2 负载均衡器

> ID：14516909
> 
> 赞同：1
> 
> 时间：2013-01-25T06:59:12.837
> 
> 标签：wso2, wso2carbon

我是 wso2 的新手。我想在我的本地系统上配置 wso2 负载均衡器，我正计划测试 camel cxf tomcat 示例。如果可以测试，请帮我配置相同的。

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:45:51.413

[这](http://nirmalfdo.blogspot.com/2012/06/fronting-wso2-application-server-50.html)是 WSO2 负载均衡器的创建者（主要程序员）的一篇很好的博客文章。

# shopify - 在 Shopify 中创建指向家庭年龄标签的链接

> ID：14516912
> 
> 赞同：0
> 
> 时间：2013-01-25T06:59:17.613
> 
> 标签：shopify

我正在尝试在侧边栏中动态创建一个导航栏。我使用了以下代码：

```
<ul>{% for collection in collections %}
{%if collection.title != 'Frontpage' %}
<li class="abcdef"><span class="heading">{{ collection.title | link_to: collection.url }}</span></li>
<ul>
{% for tag in collection.tags %}  
<li><a href="{{ collection.url }}/{{ tag }}">&emsp;&emsp;{{ tag }}</a> </li>
{% endfor %}
</ul>
{% endif %}
{% endfor %}
</ul> 
```

它对我来说很好，但有一个例外是我的标签不能包含空格。但我有一些带有图像的标签。你们能告诉我该怎么做，我什至可以在没有任何中断的情况下包含空间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:06:12.650

我想你想使用`link_to_tag`过滤器。

请参阅：Shopify Wiki 上的[标签链接。](http://wiki.shopify.com/Link_to_tag)在您的情况下，解决方案可能是：

```
{% for tag in collection.tags %}  
<li><a href="{{ tag | link_to_tag: tag }}">&emsp;&emsp;{{ tag }}</a> </li>
{% endfor %} 
```

# ruby-on-rails - 如何生成仅用于在其中复制字符串的输入字段？

> ID：14516913
> 
> 赞同：1
> 
> 时间：2013-01-25T06:59:25.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想生成这样的输入字段。我怎样才能？

我想通了。但是有什么聪明的方法可以为rails做到这一点吗？

```
<input type="text" name="url" value="<%= user_path(@user) %>>"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:04:54.620

```
text_field_tag 'url', user_path(@user)
text_field_tag(name, value = nil, options = {}) 
```

使用 rails helper 来做到这一点。

# php - 将天数转换为两位数格式

> ID：14516914
> 
> 赞同：1
> 
> 时间：2013-01-25T06:59:25.657
> 
> 标签：php

下面我定义了日期范围

```
$days = range(1, 31); 
```

我们如何循环使用此范围以获取 01,02,03 中的天数，例如下拉列表中的格式

试过这个

```
foreach ($days as $value) {
    echo '<option value="' . $value . '">' . $value . '</option>\n';
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T07:03:37.580

```
$days = array_map(function($val) {
  return sprintf('%02d', $val);
}, range(1, 31)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:05:56.737

希望这可以帮助

```
<?php
$arr = "0";
for ($arr = 0; $arr < 32; $arr++) {
    if ($arr < 10) {
        $arr = "0" . $arr;
    }
    echo $arr . "<br>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T16:09:36.327

```
function get_day()
{
    $days = array();
    for($i=1; $i<=31; $i++)
    {
        if(strlen($i) == 1)
        { 
            $i = '0' . $i; 
        }
        $days[$i] = $i;
    }
    return $days;
}

$days = get_day();

foreach($days as $day)
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:04:31.510

```
echo "<select>";
for($i=1; $i<=31; $i++) {
    echo "<option>".str_pad($i, 2, '0', STR_PAD_LEFT)."</option>";
}
echo "</select>"; 
```

# c++ - 从 C++ 中的文本文件中读取数值数据

> ID：14516915
> 
> 赞同：57
> 
> 时间：2013-01-25T06:59:29.100
> 
> 标签：c++

例如，如果外部文本文件中的数据是这样的：

```
45.78   67.90   87
34.89   346     0.98 
```

如何读取此文本文件并将每个数字分配给 C++ 中的变量？使用 ifstream，我可以打开文本文件并将第一个数字分配给变量，但我不知道如何读取空格后的下一个数字。

```
#include <iostream>
#include <fstream>
using namespace std;

int main()
{
    float a;
    ifstream myfile;
    myfile.open("data.txt");
    myfile >> a;
    cout << a;
    myfile.close();
    system("pause");
    return 0;
}

#include <iostream>
#include <fstream>
using namespace std;
int main()
{
    int data[6], a, b, c, d, e, f;
    ifstream myfile;
    myfile.open("a.txt");

    for(int i = 0; i << 6; i++)
        myfile >> data[i];

    myfile.close();
    a = data[0];
    b = data[1];
    c = data[2];
    d = data[3];
    e = data[4];
    f = data[5];
    cout << a << "\t" << b << "\t" << c << "\t" << d << "\t" << e << "\t" << f << "\n";
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-25T07:16:39.280

重复 >> 循环读取。

```
#include <iostream>
#include <fstream>
int main(int argc, char * argv[])
{
    std::fstream myfile("D:\\data.txt", std::ios_base::in);

    float a;
    while (myfile >> a)
    {
        printf("%f ", a);
    }

    getchar();

    return 0;
} 
```

结果：

`45.779999 67.900002 87.000000 34.889999 346.000000 0.980000`

如果您*确切*知道文件中有多少个元素，则可以链接 >> 运算符：

```
int main(int argc, char * argv[])
{
    std::fstream myfile("D:\\data.txt", std::ios_base::in);

    float a, b, c, d, e, f;

    myfile >> a >> b >> c >> d >> e >> f;

    printf("%f\t%f\t%f\t%f\t%f\t%f\n", a, b, c, d, e, f);

    getchar();

    return 0;
} 
```

* * *

**编辑：**回应您对主要问题的评论。

你有两个选择。

*   您可以在一个循环（或两个循环）中运行先前的代码并丢弃定义数量的值 - 例如，如果您需要点 (97, 60) 处的值，则必须跳过 5996 (= 60 * 100 + 96 ) 值并使用最后一个。如果您*只*对指定值感兴趣，这将起作用。
*   您可以将数据加载到数组中 - 正如 Jerry Coffin 所建议的那样。他已经给你上了很好的课，这将解决问题。或者，您可以使用简单的数组来存储数据。

* * *

**编辑：**如何跳过文件中的值

要选择第 1234 个值，请使用以下代码：

```
int skipped = 1233;
for (int i = 0; i < skipped; i++)
{
    float tmp;
    myfile >> tmp;
}
myfile >> value; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-25T07:23:04.067

它可能取决于，特别是取决于您的文件是否在每行上具有相同数量的项目。如果可以，那么您可能需要某种 2D 矩阵类，通常是这样的：

```
class array2D { 
    std::vector<double> data;
    size_t columns;
public:
    array2D(size_t x, size_t y) : columns(x), data(x*y) {}

    double &operator(size_t x, size_t y) {
       return data[y*columns+x];
    }
}; 
```

请注意，正如它所写的那样，这假设您预先知道您需要的大小。这可以避免，但代码会变得更大更复杂。

在任何情况下，为了读取数字并保持原始结构，您通常会一次将一行读入一个字符串，然后使用字符串流从该行中读取数字。这使您可以将每行的数据存储到数组中的单独行中。

如果您不提前知道大小或（尤其是）如果不同的行可能不都包含相同数量的数字：

```
11 12 13
23 34 56 78 
```

您可能想改用 a `std::vector<std::vector<double> >`。这确实会带来一些开销，但如果不同的行可能有不同的大小，这是一种简单的方法来完成这项工作。

```
std::vector<std::vector<double> > numbers;

std::string temp;

while (std::getline(infile, temp)) {
    std::istringstream buffer(temp);
    std::vector<double> line((std::istream_iterator<double>(buffer)),
                             std::istream_iterator<double>());

    numbers.push_back(line);
} 
```

...或者，使用现代 (C++11) 编译器，您可以使用方括号进行`line`' 的初始化：

```
 std::vector<double> line{std::istream_iterator<double>(buffer),
                             std::istream_iterator<double>()}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-25T07:01:19.643

数字的输入运算符会跳过前导空格，因此您可以在循环中读取数字：

```
while (myfile >> a)
{
    // ...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-04T01:37:55.703

你可以像其他人一样单独读写。但是如果你想写同一个，你可以试试这个：

```
#include <iostream>
#include <fstream>

using namespace std;

int main() {

    double data[size of your data];

    std::ifstream input("file.txt");

    for (int i = 0; i < size of your data; i++) {
        input >> data[i];
        std::cout<< data[i]<<std::endl;
        }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T06:32:02.370

您可以使用**2D`vector`**存储从文本文件中读取的数字，如下所示：

```
#include <iostream>
#include <vector>
#include <string>
#include <sstream>
#include<fstream>
int main() {
    std::string line;
    double word;

    std::ifstream inFile("data.txt");

    //create/use a std::vector
    std::vector<std::vector<double>> vec;

    if(inFile)
    {
        while(getline(inFile, line, '\n'))        
        {
            //create a temporary vector that will contain all the columns
            std::vector<double> tempVec;

            std::istringstream ss(line);

            //read word by word(or double by double) 
            while(ss >> word)
            {
                //std::cout<<"word:"<<word<<std::endl;
                //add the word to the temporary vector 
                tempVec.push_back(word);

            }      

            //now all the words from the current line has been added to the temporary vector 
            vec.emplace_back(tempVec);
        }    
    }

    else 
    {
        std::cout<<"file cannot be opened"<<std::endl;
    }

    inFile.close();

    //lets check out the elements of the 2D vector so the we can confirm if it contains all the right elements(rows and columns)
    for(std::vector<double> &newvec: vec)
    {
        for(const double &elem: newvec)
        {
            std::cout<<elem<<" ";
        }
        std::cout<<std::endl;
    }

    return 0;
} 
```

上述程序的输出可以在[这里](https://onlinegdb.com/bPgxN0y0H)看到。

# php - 如何优化大型集合的 mongodb find() 查询

> ID：14516924
> 
> 赞同：0
> 
> 时间：2013-01-25T07:00:18.410
> 
> 标签：php, mongodb, find, mongoid

我正在使用 find("report.num"); 在 php 脚本中，它花费了太多时间，有时它显示代码 0 致命错误，即使异常处理程序无法处理它

有什么办法可以优化这个，因为我的收藏如此之大？？？？

# windows-phone-7 - Application poor responsiveness in wp7

> ID：14516931
> 
> 赞同：0
> 
> 时间：2013-01-25T07:01:10.123
> 
> 标签：windows-phone-7, responsive-design

I am showing one MessageBox inside manipulationStarted event(or Tap Event ) of an image and that is causing App poor responsiveness when we perform store monitoring test in V2012\.

Xaml Image control -

```
 <Image HorizontalAlignment="Left" Height="100" VerticalAlignment="Top" 
        Width="104" Margin="90,60,0,0" Grid.Row="1"  
        ManipulationStarted="Image_ManipulationStarted_1" 
        Source="Background.png"/ > 
```

Event Code –</p>

```
private void Image_ManipulationStarted_1(object sender, 
                                         ManipulationStartedEventArgs e)
{
    var m = MessageBox.Show("The file will be saved here.", "File Save", MessageBoxButton.OKCancel);

    if (m == MessageBoxResult.OK)
    {
        int temp = 10;
    }
} 
```

When I perform "Automated tests" in open store test kit for above sample code, it is causing poor responsiveness and that cause to certification failure when we upload app the the market place. Here are the steps -

1.  Right click on Application Name in the solution explore in Visual Studio 2012

2.  Open store test kit -> Automated test -> Start Windows Phone Analysis -> Select App Analysis -> Click on Start Session (App will start)

3.  Application Will start running

4.  Perform the Tap event on the image, MessageBox will appear and click OK.

5.  Click on End Session (App Will Exit) in V2012.

6.  The result of App Analysis will be shown in Summary. In that summary you can see the Red Line in front of Responsiveness means the application responsiveness is poor which causes certification failure.

My requirement is like that only. I have one image (As a Button) and on click i.e Tap i want to do some operation.

Note – Build is targeted to WP7 but application is running on WP8 emulator.

Regards

Mukesh Sharma

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:22:30.910

在事件处理程序中放置一个模态对话框将锁定调用线程，直到对话框被关闭。这可能会给出较差的响应评级。

您可能想要尝试的是在事件处理程序中禁用图像以进行操作并将 MessageBox 分派到事件处理程序返回后的某个时间，例如（未经测试的）；

```
private void Image_ManipulationStarted_1(object sender, 
                                         ManipulationStartedEventArgs e)
{
    // <disable image manipulation here>
    Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        var m = MessageBox.Show("The file will be saved here.", 
                               "File Save", MessageBoxButton.OKCancel);

        if (m == MessageBoxResult.OK)
        {
            int temp = 10;
        }
        // <enable image manipulation again>
    }
} 
```

# java - 使用 Java Apache POI 在 Excel 中插入一行

> ID：14516932
> 
> 赞同：17
> 
> 时间：2013-01-25T07:01:15.710
> 
> 标签：java, excel, apache-poi

我正在开发一个与 Excel 工作表相关的桌面应用程序。我在两行之间插入行时遇到一些问题。有没有可能使用**Apache POI**在 Java 中做到这一点？

```
Workbook wb3=WorkbookFactory.create(new FileInputStream("Book1.xls"));
Sheet sh=wb3.getSheet("sheet1"); 
```

`//Reading the available rows using (sh.getRow(1))`

`//Here i need to insert second row (????)`

`//I have third row here which already exists (sh.getRow(3))`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-08-24T05:54:52.160

我有一个运行良好的解决方案：

```
Workbook wb3=WorkbookFactory.create(new FileInputStream("Book1.xls"));
Sheet sh=wb3.getSheet("sheet1");  
int rows=sh.getLastRowNum(); 
```

向下移动工作表的行数。

```
sh.shiftRows(2,rows,1); 
```

这里

*   `2` -- 我们需要插入行的位置
*   `rows`-- 总行数
*   `1` -- 我们要插入多少行

我们做上述过程的原因是做一个空行；只有这样我们才能创建一个新行。

*现在我们移动了行，然后我们可以做我们的事情*

**编码：**

```
sh.createRow(1); 
```

正如我们定义的那样，上面的代码用于在第一个位置插入一行。

# sed - 批处理 - 将 3 列 x、y、z 值合并为 1 列而不使用 MatLab

> ID：14516935
> 
> 赞同：1
> 
> 时间：2013-01-25T07:01:21.030
> 
> 标签：sed, multiple-columns

我有大约 150 个文件，其中包含 3 列 x、y、z 值且没有标题。

> x1 y1 z1
> 
> x2 y2 z2
> 
> x3 y3 z3
> 
> ...
> 
> xn yn zn

对于我们的压缩感知算法，我只需要将这些值放在一列中

> x1
> 
> y1
> 
> z1
> 
> x2
> 
> y2
> 
> z2
> 
> . . .
> 
> xn
> 
> 因
> 
> 锌

在不使用 MatLab 的情况下，如何对 150 个文件执行此批处理操作？根据我之前的[问题](https://stackoverflow.com/questions/14392411/gnu-plot-plotting-x-y-z-values-stored-as-one-column)，我相信这可以通过使用[sed](http://www.grymoire.com/Unix/Sed.html#uh-61)来完成。但是有效地批处理 150 个文件超出了我的能力。我在安装了 cygwin 的 Win7 上运行。任何建议将不胜感激。

感谢您的帮助。

问候，

伊克尔

**编辑：分隔符是 TAB**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:11:21.687

假设您当前的工作目录中只有感兴趣的文件，并且文件的分隔符是一个空格，并且您已`GNU sed`安装：

```
sed -i 's/ /\n/g' * 
```

或者，您可以避免`sed`并使用`tr`and`for`循环，如下所示：

```
for i in file*; do tr " " "\n" < "$i" > "$i.bak" && mv "$i.bak" "$i"; done 
```

# android - Using two setContentView in one activity class

> ID：14516936
> 
> 赞同：0
> 
> 时间：2013-01-25T07:01:24.070
> 
> 标签：android

I have the following code where MyClass basically extends View. I was wondering if I need to use both `setContentView(R.layout.activity_mainlcass_app)` and `setContentView(myDrawing)` to show the 2D graphics that I draw in MyClass.

```
public class MainClass extends Activity {
    MyClass myDrawing;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mainlcass_app);

        myDrawing = new myDrawing(this);
            setContentView(myDrawing);
            myDrawing.requestFocus();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:12:21.093

不，你不能那样做。第二个布局将覆盖父视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:14:15.143

在您的主布局（`activity_mainlcass_app`）中只需添加`MyClass`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.example.MyClass
        android:id="@+id/myclass"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:18:40.223

Try like this

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<com.example.firstactivity
android:layout_width="fill_parent"
  android:layout_height="fill_parent"/>

<com.example.secondactivity
android:layout_width="fill_parent"
  android:layout_height="fill_parent"/>

</LinearLayout> 
```

For more information check this [link](https://stackoverflow.com/questions/6248177/android-how-to-add-two-views-to-one-activity) and this [example](https://stackoverflow.com/questions/9194102/is-it-possible-to-have-more-than-one-setcontentview-in-one-class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:37:55.790

如果您想在其他（可能具有不同的布局大小）之上新绘图，请使用 FrameLayout 进行原始布局并使用重力来定位新绘图并使用 addView 活动方法。

# iphone - Show UILabel in landscape mode in AppDelegate

> ID：14516944
> 
> 赞同：0
> 
> 时间：2013-01-25T07:02:25.437
> 
> 标签：iphone, ios, objective-c, xcode, landscape

I am showing a custom UILabel in my appdelegate class when a push notification comes. It is working fine in Portrait mode but when i rotate my device to landscape mode, label is still showing in Portrait mode. How can i fix it. I have implement rotation method. But it did not worked. Thanks in advance.

My code is :

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {   
CGRect frame=[[UIApplication sharedApplication] statusBarFrame];
 if ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeLeft
                || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeRight) {

                 backgroundImageView=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 480, 32)]; 
            } else {
                backgroundImageView=[[UILabel alloc] initWithFrame:CGRectMake(0, frame.size.height, 320, 44)];   
                NSLog(@"portrait");   
            }
[backgroundImageView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"alert.png"]]];
backgroundImageView.userInteractionEnabled=YES;
UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(click:)];  
            [backgroundImageView addGestureRecognizer:tgr];  
[self.window addSubview:backgroundImageView];
 }![enter image description here][1] 
```

![see here](../Images/da35a27a281a45a0e8ed2b8757ba577f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:14:32.353

```
I have done the similar kind of thing using the following code...

   - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation       duration:(NSTimeInterval)duration {

                    [self adjustUrLableViewForOrientation:toInterfaceOrientation];

                }

              -(void) adjustUrLableViewForOrientation:(UIInterfaceOrientation)orientation
                {
                 if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown)
                    {
                        //Ur lable portrait view
                    }
                    else if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
                    {

                  //Ur lable for landscape view

                    }

                } 
```

您也可以[根据方向研究更改标签位置](https://stackoverflow.com/questions/14291600/ios-trying-to-rotate-a-text-label-and-the-label-disappears)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:32:12.613

```
[backgroundImageView setTransform:CGAffineTransformMakeRotation(M_PI/2.0)]; 
```

应该适用于这种情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:05:50.203

`UiWindow subviews`不要自己旋转..你需要检查设备旋转变化这样

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceOrientationDidChange:) 
                                             name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

然后在方法中..根据当前方向手动旋转标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:09:22.327

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 return (interfaceOrientation == UIInterfaceOrientationPortrait ||
   interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
   interfaceOrientation == UIInterfaceOrientationLandscapeRight ||
   interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown );
} 
```

添加这个...希望这有帮助..

或者添加这个：

```
- (BOOL)shouldAutorotate{
   return YES;
}

- (NSUInteger)supportedInterfaceOrientations{
  return UIInterfaceOrientationPortrait || UIInterfaceOrientationLandscapeLeft || UIInterfaceOrientationLandscapeRight || UIInterfaceOrientationPortraitUpsideDown ;
} 
```

# coronasdk - 在电晕中触摸时在屏幕上发现压力？

> ID：14516945
> 
> 赞同：0
> 
> 时间：2013-01-25T07:02:27.970
> 
> 标签：coronasdk

在我的电晕应用程序中，当我触摸时，我必须在屏幕上找到压力。请帮助我。它在 iphone 中可能，但在电晕中它可能与否。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:25:54.853

Corona 不支持压力设置。

# wordpress - 如何在网站上预览用户想要上传的视频文件（PHP、FiileAPI JS）

> ID：14516947
> 
> 赞同：3
> 
> 时间：2013-01-25T07:02:30.003
> 
> 标签：wordpress, file-upload, web, html5-video, fileapi

我的意思是，当用户从他们的系统中选择视频文件时，让网页已经向他们显示他们想要上传的文件。

我已经在使用 FileAPI JS 使用图像文件进行预览。我想对视频文件的 FileAPI JS 做同样的事情。

（所以，它必须在我的客户端工作）

感谢和回答表示赞赏:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T07:48:02.507

您可以使用[FileReader](http://caniuse.com/#feat=filereader)或[createObjectURL](http://caniuse.com/#feat=bloburls)。他们都会完成工作，但 FileReader 在浏览器中的支持稍微广泛一些。

`createObjectURL`将同步运行并返回一个 Blob URL，一个引用内存中文件的短字符串。并且您可以在使用完后立即释放它。

`FileReader`将异步运行，需要一个回调，提供一个数据 URI，一个代表整个文件的更长的字符串。这可能非常大，并且会在 Javascript 垃圾收集中从内存中释放出来。

这是一个首先尝试`createObjectURL`并回退到`FileReader`. （请提供您自己的错误检查等）

```
var video = document.getElementById('video'),
    input = document.getElementById('input');

input.addEventListener('change', function (evt) {
    var reader = new window.FileReader(),
        file = evt.target.files[0],
        url;

        reader = window.URL || window.webKitURL;

    if (reader && reader.createObjectURL) {
        url = reader.createObjectURL(file);
        video.src = url;
        reader.revokeObjectURL(url);  //free up memory
        return;
    }

    if (!window.FileReader) {
        console.log('Sorry, not so much');
        return;
    }

    reader = new window.FileReader();
    reader.onload = function(evt) {
       video.src = evt.target.result;
    };
    reader.readAsDataURL(file);
}, false); 
```

这里的工作示例：http: [//jsbin.com/isodes/1/edit](http://jsbin.com/isodes/1/edit)

Mozilla 有一篇[更详细的文章](https://hacks.mozilla.org/2011/01/how-to-develop-a-html5-image-uploader/)，其中包含有关如何在获得文件后上传的说明。

IE10 两者都支持，但 IE9 都不支持，因此您必须退回到没有预览的常规表单上传。

# jsp-tags - 从显示标签表创建和导出 csv

> ID：14516950
> 
> 赞同：2
> 
> 时间：2013-01-25T07:02:48.397
> 
> 标签：jsp-tags

导出不适用于 csv：

(org.displaytag.decorator.MessageFormatColumnDecorator:66 - decorate) ==> 在尝试格式化具有模式 {0,date,dd-MMM-yyyy} 的对象时捕获非法参数异常，返回未格式化的值。对象类是 {0,date,dd-MMM-yyyy}

异常是 :(org.displaytag.decorator.MessageFormatColumnDecorator:66 - decorate) ==> 在尝试格式化具有模式 {0,date,dd-MMM-yyyy} 的对象时捕获非法参数异常，返回未格式化的值。对象类是 {0,date,dd-MMM-yyyy}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-10T09:16:21.900

确保您没有`escapeXml="true"`作为`display:column`标签的属性。

我知道 OP 得到这个答案可能为时已晚，但我认为这可以帮助一些人解决这个问题。

# google-apps-script - How do I build a datagrid using google apps script?

> ID：14516954
> 
> 赞同：0
> 
> 时间：2013-01-25T07:03:07.380
> 
> 标签：google-apps-script

Using Google Apps Script + GUI API, How can I build a datagrid?

I am trying to build an object to show a range from spreadsheet into google site, with title columns, data, and clicking on the title columns, order the data.. and a scroll bar.

could you please let me know some pointer to build it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T16:20:28.043

您可以访问 Google Apps 脚本中的一部分可视化服务，这些服务以[Charts Services](https://developers.google.com/apps-script/reference/charts/)的形式提供。您要求的行为在`Class TableChart`.

这是文档中显示的示例[`Class TableChartBuilder`](https://developers.google.com/apps-script/reference/charts/table-chart-builder)，它创建了一个简单的 TableChart。

```
function doGet() {
  // Get sample data from a spreadsheet.
  var dataSourceUrl = 'https://docs.google.com/spreadsheet/tq?range=A1%3AF' +
      '&key=0Aq4s9w_HxMs7dHpfX05JdmVSb1FpT21sbXd4NVE3UEE&gid=4&headers=-1';

  var chartBuilder = Charts.newTableChart()
      .setDimensions(600, 500)
      .enablePaging(20)
      .setDataSourceUrl(dataSourceUrl);

  var chart = chartBuilder.build();
  return UiApp.createApplication().add(chart);
} 
```

要在 google 站点中使用它，首先将脚本发布为 web 应用程序。然后，在您的站点中，编辑您要嵌入 TableChart 的页面，并添加一个 Google Apps 脚本小工具。编辑小工具，然后粘贴您发布的 Apps 脚本的 URL。您可以根据需要为小工具设置其他属性。

[构建站点应用程序](https://developers.google.com/apps-script/articles/building-sites-app-part1)教程中提供了更多详细信息，尤其是[第 4](https://developers.google.com/apps-script/articles/building-sites-app-part1?hl=en#section4)节和[第 5 节](https://developers.google.com/apps-script/articles/building-sites-app-part1?hl=en#section5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:55:40.880

我没有使用谷歌应用脚​​本，但我认为谷歌可视化 api 可以为你创建一个数据网格。

[谷歌图表/谷歌可视化 api](https://google-developers.appspot.com/chart/interactive/docs/gallery/controls)

# c# - 抽象类的 C# 接口继承

> ID：14516955
> 
> 赞同：50
> 
> 时间：2013-01-25T07:03:11.407
> 
> 标签：c#, oop, interface, abstract-class, concrete

假设我有一个如下定义的接口：

```
public interface IFunctionality
{
    void Method();       
} 
```

我为一个抽象类实现了这个接口，如下所示：

```
public abstract class AbstractFunctionality: IFunctionality
{
    public void Method()
    {
        Console.WriteLine("Abstract stuff" + "\n");
    }       
} 
```

我再次有一个从抽象类继承的具体类，如下所示：

```
public class ConcreteFunctionality: AbstractFunctionality
{
    public void Method()
    {
        Console.WriteLine("Concrete stuff" + "\n");
    }
} 
```

现在我有以下代码，

```
ConcreteFunctionality mostDerived = new ConcreteFunctionality();
AbstractFunctionality baseInst = mostDerived;
IFunctionality interfaceInst = mostDerived;
mostDerived.Method();
baseInst.Method();
interfaceInst.Method(); 
```

执行这些东西后我得到的输出如下。

```
Concrete stuff
Abstract stuff
Abstract stuff 
```

但是我一直期望输出在所有三种情况下都是“具体的东西”，因为我在这里所做的是将 的引用分配给和 类型的`ConcreteFunctionality`变量。`AbstractFunctionality``IFunctionality`

内部发生了什么。请澄清。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-25T07:05:26.033

这里：

```
public class ConreteFunctionality:AbstractFunctionality
{
    public void Method()
    {
        Console.WriteLine("Concrete stuff" + "\n");
    }
} 
```

...您没有覆盖*现有*方法。您正在创建一种*隐藏*现有方法的*新*方法。（如果你真的想要这种行为，你也应该得到一个警告，建议使用修饰符。）接口是在 中实现的，所以接口映射表引用了该类中的方法。*`new``AbstractFunctionality`*

 *现在如果你*重新实现*接口：

```
public class ConcreteFunctionality : AbstractFunctionality, IFunctionality 
```

...然后接口映射将引用方法`ConcreteFunctionality`，您将获得通过*接口*调用的预期行为（即您的第三次调用），但您仍然会在`AbstractFunctionality`第二次调用中获得实现。

将方法设置为`AbstractFunctionality`virtual 并在`ConcreteFunctionality`. 这样，它将`ConcreteFunctionality`在所有情况下使用实现。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-01-25T07:05:04.743

您需要将类定义为：

```
public abstract class AbstractFunctionality:IFunctionality
{
    public virtual void Method()
    {
        Console.WriteLine("Abstract stuff" + "\n");
    }       
}

public class ConreteFunctionality:AbstractFunctionality
{
    public override void Method()
    {
        Console.WriteLine("Concrete stuff" + "\n");
    }
} 
```

由于您没有在 ConreteFunctionality 中覆盖 Method()，因此运行时环境执行与 AbstractFunctionality 对象关联的 Method()，因为它不能在此处应用动态多态性。引入`virtual`并使`override`运行时环境在子类中执行被覆盖的方法。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-25T07:04:10.110

您缺少`virtual`关键字`override`。没有这个，您将无法获得虚拟功能。

您可以将`Method`AbstractFunctionality 标记为`virtual`并将`Method`in标记`ConreteFunctionality`为`override`。正如 mihirj 所展示的那样。

解决的类似问题 -[为什么 C# 接口方法没有声明为抽象或虚拟的？](https://stackoverflow.com/questions/3621410/why-are-c-sharp-interface-methods-not-declared-abstract-or-virtual)*

# objective-c - 我应该使用什么 url 来验证我在应用内购买中的收据

> ID：14516958
> 
> 赞同：3
> 
> 时间：2013-01-25T07:03:18.440
> 
> 标签：objective-c, in-app-purchase, receipt

[我在 Apple 技术说明 ( QNo: 15](http://developer.apple.com/library/ios/#technotes/tn2259/_index.html) )的常见问题解答中找到了上述问题。他们给出了这样的答案：

> 在沙箱中测试您的应用程序和审查您的应用程序时，请使用沙箱 URL [https://sandbox.itunes.apple.com/verifyReceipt 。](https://sandbox.itunes.apple.com/verifyReceipt)
> 
> 一旦您的应用程序在 App Store 中上线，请使用生产 URL [http://buy.itunes.apple.com/verifyReceipt 。](http://buy.itunes.apple.com/verifyReceipt)

但在应用内购买编程指南（[使用 App Store 部分验证收据](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)）中。苹果提供了一个这样的网址：

> 使用 HTTP POST 请求将 JSON 对象发布到 App Store。商店的 URL 是[https://buy.itunes.apple.com/verifyReceipt](https://buy.itunes.apple.com/verifyReceipt)。

请注意，第一个 url 使用 http 作为真实帐户来验证应用内购买，而第二个使用 https。我应该使用哪一个？我的应用程序被拒绝，因为服务器在向 Apple 发送收据时没有得到正确的响应。我正在使用[https://buy.itunes.apple.com/verifyReceipt](https://buy.itunes.apple.com/verifyReceipt)来验证收据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:07:17.333

最好的方法是首先与生产服务器进行验证。如果您收到 21007 代码，您应该再次调用沙盒服务器。这是必需的，因为在提交过程中，您并不总是确定他们将使用实时服务器还是沙盒服务器。它需要在两者上都起作用。

这是一些以安全方式验证收据的源代码（反击去年的应用商店黑客攻击）。我将上面的代码添加到这个项目中，它将首先检查生产服务器，然后回退到沙盒服务器：

[https://github.com/evands/iap_validation](https://github.com/evands/iap_validation)

编辑：我不会在 iOS 7 中使用上面的代码。我认为它有一些问题！

# codeigniter - CodeIgniter 翻译 PHP 日期

> ID：14516966
> 
> 赞同：0
> 
> 时间：2013-01-25T07:04:02.060
> 
> 标签：codeigniter

我有一个`datetime`存储在mysql中的时间戳。

然后我使用格式化日期时间

```
$newdate = date('d M Y', strtotime($this->query->datetime)); 
```

我的问题是如何使用 codeigniter builtin lang helper 翻译日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:15:16.390

在应用程序语言文件夹中为您要翻译的语言添加一个子文件夹。在该文件夹中创建一个名为 date_lang.php 的文件并处理所有日期翻译。

```
 $lang['datefrom'] = "dateTo"; 
```

日期翻译的另一种选择是使用语言环境。

PHP 将为您处理日期翻译。为用户全局设置语言环境。

```
setlocale(LC_ALL, 'en_UK.utf8'); 
```

在我当前的项目中，我们使用语言环境来处理金钱和日期。我们使用 CI 语言文件来处理字符串翻译

# javascript - 如何让嵌入的 YouTube 视频连续重播？

> ID：14516971
> 
> 赞同：1
> 
> 时间：2013-01-25T07:04:10.653
> 
> 标签：javascript, html, youtube, embed

我确信必须有一个可以设置或使用的小选项或调整，以使这成为可能。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:06:57.003

从[他们的文档](https://developers.google.com/youtube/player_parameters#loop)中，您应该能够添加循环参数。

```
http://www.youtube.com/v/VIDEO_ID?version=3&loop=1&playlist=VIDEO_ID 
```

# email - How to maximize deliverability through Amazon SES? DKIM, SPF, Sender Id or all of them?

> ID：14516972
> 
> 赞同：4
> 
> 时间：2013-01-25T07:04:11.323
> 
> 标签：email, amazon-ses, dkim, spf, sender-id

I'm working on a digital gifting platform that relies on email reaching the inbox. Email is sent through Amazon SES, and has high quality (recipient's name in the email, single recipient, personally crafted message, extremely low bounce and complaint rate). However, I am still seeing very mixed results as to spam filter behaviour. Some get marked as spam some don't on the same ISPs.

I currently have no DKIM, SPF, or Sender ID set ([http://docs.aws.amazon.com/ses/latest/DeveloperGuide/authentication.html](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/authentication.html))

Is there any downside to using all of these together, or should I pick and choose?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T06:12:36.380

你的问题似乎在这里：

> 我目前没有 DKIM、SPF 或发件人 ID

您肯定需要 SPF 记录才能从 AWS 可靠地发送电子邮件。由于易于使用，EC2 将成为没有 SPF 的垃圾邮件避风港。请参阅[此 SO 答案](https://stackoverflow.com/a/7236872/343302)，该答案描述了如何配置 SPF 以与 EC2 一起使用。不要忘记填写[此表格](https://aws-portal.amazon.com/gp/aws/html-forms-controller/contactus/ec2-email-limit-rdns-request)以请求 Amazon 从您的 EC2 实例中删除发送限制。

# delphi - Delphi Indy Sharepoint Windows 登录

> ID：14516975
> 
> 赞同：1
> 
> 时间：2013-01-25T07:04:27.177
> 
> 标签：delphi, sharepoint, indy

我将这些包含在**使用**条款中

```
 IdAuthentication
  ,
  IdAuthenticationDigest
  ,
  IdAuthenticationNTLM
  ,
  IdAuthenticationSSPI 
```

目前我有这样做的代码：

```
 W.Request.BasicAuthentication := True;
    W.Request.Username := AOptionsPtr^.AuthUsername;
    W.Request.Password := AOptionsPtr^.AuthPassword; 
```

如果我可以访问 OpenSSL：

```
 TmpOpenSSL := TIdSSLIOHandlerSocketOpenSSL.Create;
    TmpOpenSSL.SSLOptions.Method := sslvSSLv23;
    TmpOpenSSL.SSLOptions.Mode := sslmClient;
    TmpOpenSSL.SSLOptions.VerifyMode := [];
    TmpOpenSSL.SSLOptions.VerifyDepth := 0;
    //--
    W.IOHandler := TmpOpenSSL; 
```

从浏览 WinINet 的文档（是的，我知道它不是 Indy）看来，身份验证也需要持久连接。我想这也适用于印地？网址： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa384220 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384220(v=vs.85).aspx)

我需要让它与 SharePoint 一起工作。但是，问题是我没有要测试的 Intranet SharePoint 服务器。因此，我无法单步执行代码并查看哪些有效，哪些无效。但是，我有一个可以为我测试它的潜在客户。

我还需要做些什么才能使上述代码使用 Windows 身份验证（NTML？SPPI？）与 SharePoint 一起工作

Indy 会自动测试并使用正确的身份验证吗？

我需要设置`W.Request.BasicAuthentication := False;`自动身份验证/检测才能工作吗？

如果需要多个请求（第一个响应为 401），我假设我需要在发出 GET 请求时在自己的代码中添加对此的支持？（设置身份验证模式并发出新请求？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:06:17.087

`Request.Connection`您可以通过将属性设置为 来请求持久连接`'keep-alive'`。

TIdHTTP 将检查服务器的`WWW-Authorization`标头并将其与`TIdAthentication`您包含在`uses`子句中的类进行比较。该`TIdHTTP.OnSelectAuthorization`事件将告诉您选择了哪个类，并允许您在需要时覆盖它。`TIdHTTP.OnAuthorization`如果身份验证失败并且需要不同的凭据，则将触发该事件。

The `BasicAuthrnication` property simply allows `TIdHTTP` to fall back to `TIdBasicAuthentication` if no other `TIdAuthentication` class is assigned.

No, you do not need to handle multi-request authentications manually, like NTLM. `TIdHTTP` and `TIdAuthentication` handle those details for you.

# php - 电子邮件模式的 preg_split

> ID：14516978
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:04:41.827
> 
> 标签：php, preg-split

```
$email_address_pattern="([-!#\$%&'*+./0-9=?A-Z^_`a-z{|}~])+@([-!#\$%&'*+/0-9=?A-Z^_`a-z{|}~]+\\.)+[a-zA-Z]{2,6}";
$address= "abc@gmail.com";
$length=strlen($address);

for($position=0;$position<$length;) {
    $match=preg_split($email_address_pattern,strtolower(substr($address,$position)),2);
    print_r($match);

    if(count($match)<2)
        break;

    $position+=strlen($match[0]);
    $next_position=$length-strlen($match[1]);
    $found=substr($address,$position,$next_position-$position);

    if(!strcmp($found,""))
        break;
    if(IsSet($addresses[$found]))
        $addresses[$found]++;
    else {
        $addresses[$found]=1;
        $position=$next_position;
    }
} 
```

我收到警告：

> 警告：preg_split()：第 10 行 /home/www/html/cusidevelopment/test.php 中的未知修饰符“+”

我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:37:11.633

尝试这个

```
$email_address_pattern="/([-!#\$%&'*+.\/0-9=?A-Z^_`a-z\{|\}~]+)@([-!#\$%&'*+\/0-9=?A-Z^_`a-z\{|\}~]+).[a-zA-Z]{2,6}/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:21:39.107

您必须添加开始和结束符号。添加`ü`给出了一个有效的正则表达式。（此外，此站点将您的反引号解释为格式，因此您需要对问题中的反斜杠进行转义。）

尝试这个：

```
$email_address_pattern="ü([-!#\$%&'*+./0-9=?A-Z^_`a-z{|}~])+@([-!#\$%&'*+/0-9=?A-Z^_`a-z{|}~]+\.)+[a-zA-Z]{2,6}ü"; 
```

正如您当然知道的那样，正则表达式不适合描述电子邮件地址。

# perl - 需要修复 perl 脚本以读取文件和写入新文件

> ID：14516982
> 
> 赞同：-2
> 
> 时间：2013-01-25T07:04:54.833
> 
> 标签：perl, parsing

我需要复制包含单词“make”、“model”、“year”的文档的每一行。我需要将每一行放入一个新文件中。这些行中的每一行都会有其他信息。即：品牌：福特，型号：Fusion，年份：2004。

我需要重复位于同一文件夹中的 300 个文件，所有复制的数据都将写入同一个文件。文档很长，但单词保证在前 30 行。

我的数据位于目录“c:\incoming\temp”中。我要写入的文件是车辆.txt。

我不知道我是否应该制作一个文件，或者脚本会为我制作它吗？任何帮助将不胜感激，即使您必须完全为我写出来。我什么都不知道。我非常绝望地想让这件事发挥作用。再次感谢所有帮助。

```
#!/usr/bin/perl 

use strict; 
use warnings; 
my $dir_path="\Incoming\Temp"; 
opendir (Incoming\Temp, $tmp_dir) or die $!; 
open (MYFILE, '>>vehicles.txt'); 
while (my $file_name = readdir(Incoming\Temp)) {print "$file_name\n";} print MYFILE $file_content; close (MYFILE); CLOSEDIR; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:27:22.620

你没有问一个问题。我们如何编译您的代码？

的第一个参数`opendir`是 var 以获取文件句柄（稍后您将传递给`readdir`）。

```
opendir(my $dh, $tmp_dir)
   or die("Can't open dir \"$tmp_dir\": $!\n"); 
```

你真的应该使用 var 作为第一个参数`open`。

```
open(my $fh, '>>', 'vehicles.txt')
   or die("Can't open \"vehicles.txt\": $!\n"); 
```

# android - 在列表视图中搜索数据存储在 db 中的位置

> ID：14516985
> 
> 赞同：0
> 
> 时间：2013-01-25T07:05:01.823
> 
> 标签：android, android-listview, android-arrayadapter, android-sqlite, android-adapter

我有一个`listview`存储在 DB 中的不同数据，当我单击特定数据时，它将显示该数据的详细信息，而且我通过位置使用了适配器类`listview`，它会获取要显示的数据的详细信息。

`listview`我需要从结果中添加搜索`listview`，如果我单击数据，它应该显示详细信息。请，任何人都可以提供此代码。

公共类 CustomerAdapter 扩展 BaseAdapter{

```
public CustomerAdapter(Context context) {    
    this.context = context;
    this.layoutInflater = LayoutInflater.from(context);
    reload(0, TAKE);
}

private void reload(int skip, int take)
{
    totalSize = customers.size();
    System.out.println("Total Size:   "+totalSize);
    loadedCustomer = loadCustomers(skip, take);
}

private ArrayList<HashMap<String, Object>> loadCustomers(int skip, int take)
{
    ArrayList<HashMap<String, Object>> arrayList = new ArrayList<HashMap<String,Object>>();  

    Query query = new Query();
    query.select("x.fname, x.lname, x.surrogateKey, x.id");
    query.from("Customer", "x");
    query.orderBy("id", SortOrder.ASCENDING);
    query.setTake(take);
    query.setSkip(skip);

    lowIndex = skip;
    highIndex = lowIndex;

    QueryResultSet rs = SUP101.SUP101DB.executeQuery(query);
    while(rs.next())
    {
        String fname = rs.getString(1);
        String lname = rs.getString(2);
        long sk = rs.getLong(3);

        HashMap<String, Object> tempHashMap = new HashMap<String, Object>();
        tempHashMap.put(NAME, " " + fname + " " + lname);  
        tempHashMap.put("sk", sk);
        arrayList.add(tempHashMap);

        highIndex++;
    }

    return arrayList;  
}

public int getCount() {
    return totalSize;
}

public Object getItem(int position) {
    reloadIfNeeded(position);
    return loadedCustomer.get(position - lowIndex);
}

@SuppressWarnings("unchecked")
public String getSK(int position)
{
    HashMap<String, Object> map = (HashMap<String, Object>)getItem(position);
    return map.get("sk").toString();
}

private void reloadIfNeeded(int newPosition)
{
    if(newPosition < lowIndex || newPosition >= highIndex)
    {
        int lowIndex = (newPosition);
        reload(lowIndex, TAKE);
    }
}

public void refreshUI(boolean force)
{
    if(force)
    {
        reload(lowIndex, TAKE);
        ((Activity)context).runOnUiThread(
                new Runnable()
                {
                    public void run()
                    {
                        CustomerAdapter.this.notifyDataSetChanged();    
                    }                        
                }
           );
    }
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    TextView tv = null;
    if(convertView==null){
        convertView = layoutInflater.inflate(R.layout.customer, null);
    }
    tv = (TextView)convertView.findViewById(R.id.textView1);        
    reloadIfNeeded(position);        
    tv.setText(loadedCustomer.get(position - lowIndex).get(NAME).toString());
return convertView;
} 
```

// 主菜单类

```
 Mainmenu.this.runOnUiThread(new Runnable()
                    {
                        public void run()
                        {
                            adapter1 = new CustomerAdapter(Mainmenu.this);
                            listView.setAdapter(adapter1);

                            array_sort = new ArrayList<String>();
                            adapter1 =  new CustomerAdapter(Mainmenu.this);
                            listView.setAdapter(adapter1);
                            inputSearch.addTextChangedListener(new TextWatcher() {

                                @Override
                                public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                                    // When user changed the Text
                                    Mainmenu.this.adapter1.getFilter().filter(cs);  
                                }

                                @Override
                                public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                                        int arg3) {
                                    // TODO Auto-generated method stub

                                }

                                @Override
                                public void afterTextChanged(Editable arg0) {
                                    // TODO Auto-generated method stub                          
                                }
                            });
                            listView.setOnItemClickListener(new OnItemClickListener()
                            {
                                public void onItemClick(AdapterView<?> a, View v, int position, long id)
                                {
                                    Intent intent = new Intent(Mainmenu.this, Detailview.class);
                                    intent.putExtra("sk", adapter1.getSK(position));
                                    Mainmenu.this.startActivityForResult(intent, REQUEST_DETAIL);
                                }

                            });
                        }

                    });
                }
            }).start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:22:36.073

您可以使用如下`FilterQueryAdapter`界面：

```
 DataBaseHelper myDbHelper = new DataBaseHelper(this);
  FilterQueryProvider fqp = new myFilterQueryProvider(myDbHelper);
        <YourCursorAdapter>.setFilterQueryProvider(fqp);
        <YourListView>.setTextFilterEnabled(true); 
        <YourEditTextSearchbox>.addTextChangedListener(new TextWatcher()
        {
            @Override
            public void onTextChanged(CharSequence s, int start,
                    int before, int count) {
                // TODO Auto-generated method stub

            }
            @Override
            public void beforeTextChanged(CharSequence s, int start,
                    int count, int after) {
                // TODO Auto-generated method stub

            }
            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                this.adaptr.getFilter().filter(s);
            }               
        });

  public class myFilterQueryProvider implements FilterQueryProvider {
    DataBaseHelper myDbHelper;
    public myFilterQueryProvider(DataBaseHelper mdb) {
        myDbHelper = mdb;
    }
    public Cursor runQuery(CharSequence constraint) 
    { 

        try {
            myDbHelper.openDataBase();
        }catch(SQLException sqle){
            throw sqle;
        }

        sql =""; //Your DB Query here
        Cursor cursor = myDbHelper.getLobbyView(sql);
        return cursor; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:39:02.247

如果您正在使用数据库

*   只需获得一个 Edittext textwatcher。
*   每个 textchanged 调用 db "LIKE" 查询以显示您的结果

# iphone - 如何在 iOS5 中获取默认的 LandscapeLeft 方向？

> ID：14516992
> 
> 赞同：0
> 
> 时间：2013-01-25T07:05:36.703
> 
> 标签：iphone, ios, objective-c, xcode, uiinterfaceorientation

对不起，如果这个问题是重复的，但我找不到相同的解决方案。在 iOS6 中，如果我想为一个 UIViewController 设置默认方向，我只需使用：

```
- (BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscapeLeft;
} 
```

但是如何在 iOS5 中做同样的事情，我测试了两个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft);//not default
}
and
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return (toInterfaceOrientation == UIInterfaceOrientationMaskLandscapeLeft);// = return NO;
} 
```

但默认方向总是纵向。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:19:55.893

调用下面的方法来检查orientation.happy编码的状态:-)

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self CheckForViewForOrientation:toInterfaceOrientation];
}

- (void) CheckForViewForOrientation:(UIInterfaceOrientation)orientation
{
    if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        //Ur lable portrait view
    }
    else if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
    {
        //Ur lable for landscape view
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:14:37.923

如果您想为整个应用程序实现这一点，请在 app.plist 文件中更改支持的方向 UISupportedInterfaceOrientations

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:20:24.577

```
- (BOOL)shouldAutorotate {

UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];

if (orientation==UIInterfaceOrientationPortrait) {
 // do some 

}

return YES;
} 
```

包括支持 5 和 6 的两种方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T07:27:36.307

您需要提供

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
     UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

对于那个单一的视图控制器。

# c# - 使用 DataGrid 更新访问表时出错

> ID：14516997
> 
> 赞同：2
> 
> 时间：2013-01-25T07:05:57.287
> 
> 标签：c#, sql

我正在使用 DataGridView 来更新、插入或删除表中的数据。该代码可以很好地插入数据，但是在更新或删除数据或行时会出错。代码如下。

```
OleDbCommand sCommand;
    OleDbDataAdapter sAdapter;
    OleDbCommandBuilder sBuilder;
    DataSet sDs;
    DataTable sTable; 

    //Load Data...
    private void button1_Click(object sender, EventArgs e)
    {
        string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source= " + Application.StartupPath + @"\Label-Data.accdb";
        string sql = "SELECT * FROM _Default";
        OleDbConnection connection = new OleDbConnection(connectionString);
        connection.Open();
        sCommand = new OleDbCommand(sql, connection);
        sAdapter = new OleDbDataAdapter(sCommand);
        sBuilder = new OleDbCommandBuilder(sAdapter);
        sDs = new DataSet();
        sAdapter.Fill(sDs, "_Default");
        sTable = sDs.Tables["_Default"];
        connection.Close();
        dataGridView1.DataSource = sDs.Tables["_Default"];
        dataGridView1.ReadOnly = true;
        button4.Enabled = false;
        dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    }

    //Add or Edit...
    private void button2_Click(object sender, EventArgs e)
    {
        dataGridView1.ReadOnly = false;
        button4.Enabled = true;
        button2.Enabled = false;
        button3.Enabled = false;
    }

    //Delete...
    private void button3_Click(object sender, EventArgs e)
    {
        if (MessageBox.Show("Do you want to delete this row ?", "Delete", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
            dataGridView1.Rows.RemoveAt(dataGridView1.SelectedRows[0].Index);
            sAdapter.Update(sTable);
        }
    }

    //Save...
    private void button4_Click(object sender, EventArgs e)
    {
        sAdapter.Update(sTable);
        dataGridView1.ReadOnly = true;
        button4.Enabled = false;
        button2.Enabled = true;
        button3.Enabled = true;
    } 
```

它在 sAdapter.Update(sTable) 上给出错误；错误是

> 查询表达式 '((ID = ?) AND ((? = 1 AND Prn IS NULL) OR (Prn = ?)) AND ((? = 1 AND _Copy IS NULL) OR (_Copy = ?)) AND ( (? = 1 AND _Item IS NULL) OR (_Item = ?)) AND ((? = 1 AND _Design IS NULL) OR (_Design = ?)) AND ((? = 1 AND Tray_No IS NULL) OR (Tray_No = ? ）） 和 （（'。

如何消除这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:19:44.393

你有一些非常奇怪的字段名称，前导下划线是什么？

但看起来框架无法自动生成插入和更新 SQL。

查看以下[SO](https://stackoverflow.com/questions/5874887/using-oledbdataadapter-and-dataset-to-update-access-mdb)问题，该问题描述了将您自己的 UPDATE 和 INSERT 语句添加到适配器。

或者，您可以查看使用 VisualStudio 的 DataSet 设计器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:02:39.113

尝试这个。

```
 private void button3_Click(object sender, EventArgs e)
 {
    if (MessageBox.Show("Do you want to delete this row ?", "Delete",     MessageBoxButtons.YesNo) == DialogResult.Yes)
    {
        dataGridView1.Rows.RemoveAt(dataGridView1.SelectedRows[0].Index);
       string sql="write your Delete query"
      OleDbCommand dCommand = new OleDbCommand(sql, connection);
        OleDbCommandBuilder builder = new OleDbCommandBuilder(sAdapter);
       sAdapter.DeleteCommand=dCommand
        sAdapter.Update(sTable);
    }
}

//Save...
private void button4_Click(object sender, EventArgs e)
{
     string sql="write your update query"
     OleDbCommand uCommand = new OleDbCommand(sql, connection);
     OleDbCommandBuilder builder = new OleDbCommandBuilder(sAdapter);
     sAdapter.UpdateCommand=uCommand 
    sAdapter.Update(sTable);
    dataGridView1.ReadOnly = true;
    button4.Enabled = false;
    button2.Enabled = true;
    button3.Enabled = true;
} 
```

# drools - Drools 数组列表访问

> ID：14516998
> 
> 赞同：0
> 
> 时间：2013-01-25T07:05:57.520
> 
> 标签：drools

如何在规则文件的 LHS 上从 arraylist 中的一些 POJO 属性创建列表？

例如 ：

```
class Employee{
    private String firstName;
    private String lastName;
    /* setter-getter */
 } 
```

事实上，我有一份工作记忆中的员工名单。我想从 LHS 上的员工名字创建一个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:34:36.213

我建议您将员工作为事实而不是他们的列表。它使您更容易识别您的事实。然后你可以写这样的东西：

```
when
    $names: Set(empty != false) 
        from accumulate ( Employee($fn: firstName), collectSet($fn) )
then 
```

此致