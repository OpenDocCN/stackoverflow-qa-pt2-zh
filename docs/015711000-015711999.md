# StackOverflow 问答 15711000-15711999

# java - 如何从 TimeZone 字符串 ID 和 Epoch 实例化 Joda DateTime

> ID：15711005
> 
> 赞同：7
> 
> 时间：2013-03-29T20:34:38.630
> 
> 标签：java, datetime, time, timezone, jodatime

我正在查看[Joda Time](http://joda-time.sourceforge.net/index.html)图书馆。我试图弄清楚如何在给定纪元时间戳和时区的情况下构造 DateTime 对象。我希望这能让我在那个时区找到那个时代的星期几、星期几等。但是我不确定如何将 DateTimeZone 传递给 DateTime 构造函数。

```
import org.joda.time.DateTime;
import org.joda.time.DateTimeZone;
import org.joda.time.Instant;

public class TimeZoneTest {

    public static void main (String[] args) {

        long epoch = System.currentTimeMillis()/1000;

        DateTimeZone tz = new DateTimeZone( "America/New_York" );

        DateTime dt = new DateTime( epoch, tz );

        System.out.println( dt );
    }

} 
```

我尝试了上述“America/New_York”的硬编码示例，但从编译器中得到了这个。我究竟做错了什么？

```
$ javac -cp "joda-time-2.2.jar:." TimeZoneTest.java
    TimeZoneTest.java:12: org.joda.time.DateTimeZone is abstract; cannot be instantiated
    DateTimeZone tz = new DateTimeZone( "America/New_York" );
                      ^
    1 error 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T20:36:21.733

要从 ID 获取时区，请使用[`DateTimeZone.forID`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTimeZone.html#forID%28java.lang.String%29)：

```
DateTimeZone zone = DateTimeZone.forID("America/New_York"); 
```

As an aside, I don't think "epoch" is a good name for your variable - it's really "seconds since the Unix epoch". Additionally, I don't see why you're dividing by 1000... [the relevant constructor for `DateTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#DateTime%28long,%20org.joda.time.DateTimeZone%29) takes a time zone and the *milliseconds* since the Unix epoch... so you can pass the value returned from `System.currentTimeMillis()` directly.

# c++ - 具有不同类型的可变参数函数，传递给线程 cout

> ID：15711008
> 
> 赞同：2
> 
> 时间：2013-03-29T20:34:48.413
> 
> 标签：c++, multithreading, function, variadic

好吧，首先到目前为止，这是可行的，但是非常有问题。我希望它能够接受`ints`, `floats`, `doubles`, `strings`, 和`char*s`. 它通过将所有内容都尝试为 char* 来工作，但如果失败，我希望它作为另一种类型重试。我也想如果我不必传递参数的数量。（更多在底部）

```
#include <iostream>
#include <cstdlib>
#include <sstream>
#include <iostream>
#include <windows.h>
#include <ctime>
#include <tchar.h>
#include <stdio.h>
#include <vector>
#include <thread>
const enum loglevel{INFO,WARNING,OK,SEVERE};
void logHelperMessage(loglevel,int, ...);
void threadedloghelpermessage(loglevel,string);

int main(int argc, char **argv)
{
    logHelperMessage(INFO,4,"Hi","I","DO","WORK");
}

void logHelperMessage(loglevel severity,int number, ...)
{
    va_list messages;
    va_start(messages,number);
    std::stringstream ss;

    for(int i = 0;i < number;i++)
    {
            ss << va_arg(messages,char*);
    }
    std::string s = ss.str();
    thread t1(threadedloghelpermessage,severity,s);
    t1.join();
}

void threadedloghelpermessage(loglevel severity,string message)
{
    //TODO: implement a stack?
    switch (severity)
    {
    case INFO:
        SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),FOREGROUND_BLUE);
        cout << "[IF]";
        break;
    case WARNING:
        SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),0x06);
        cout << "[WA]";
        break;
    case OK:
        SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),FOREGROUND_GREEN);
        cout << "[OK]";
        break;
    case SEVERE:
        SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),FOREGROUND_RED);
        cout << "[ER]";
        break;
    default:
        break;
    }
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),0x08);
    time_t t = time(0);
    struct tm now;
    localtime_s(&now, &t );
    cout << "[";
    int hour = now.tm_hour;
    if(hour < 10)
    {
        cout << 0 << hour << ":";
    }
    else
    {
        cout << hour << ":";
    }
    int minu = now.tm_min;
    if(minu < 10)
    {
        cout << 0 << minu << ":";
    }
    else
    {
        cout << minu << ":";
    }
    int sec = now.tm_sec;
    if(sec < 10)
    {
        cout << 0 << sec;
    }
    else
    {
        cout << sec;
    }
    cout << "] ";
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),0x07);
    cout << message << endl;
} 
```

现在，无论如何：

1.  让线程输出到控制台，而不会在线程重新加入时使主程序崩溃或挂起（线程池？）
2.  使用：（`logHelperMessage(logLevel,firstpram,...)`使用第一个参数获取其内存位置并从那里开始？）
3.  在：`ss << va_arg(messages,char*);`如果它不能作为一个`char*`可能尝试别的东西？

我四处寻找更高级的可变函数，但似乎它们都需要参数数量的参数。或只允许一种类型。另外，如果需要连续循环，我会在程序的其他地方设置一个循环。（我认为这就是一切）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:46:30.873

如果 C++11 对您来说是一个选项（并且考虑到包含`<thread>`标头，这似乎是这种情况），您可以[使用**可变参数模板**而不是 C 风格的可变参数函数](https://stackoverflow.com/questions/15465543/why-use-variadic-arguments-now-when-initializer-lists-are-avaiable/15465877#15465877)。

像这样的东西应该可以完成工作（现在无法测试，所以请告诉我它是否不起作用，我会尝试修复它）：

```
template<typename T>
void insert_messages(std::stringstream& ss, T&& arg)
{
    ss << std::forward<T>(arg);
}

template<typename T, typename... Ts>
void insert_messages(std::stringstream& ss, T&& arg, Ts&&... args)
{
    ss << std::forward<T>(arg);
    logMessage(std::forward<Ts>(args)...);
}

template<typename... Ts>
void logHelperMessage(loglevel severity, Ts&&... args)
{
    std::stringstream ss;
    insert_messages(ss, std::forward<Ts>(args)...);

    std::string s = ss.str();
    std::thread t1(threadedloghelpermessage,severity,s);
    t1.join();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:41:31.463

然而，可变参数函数可以采用不同类型的变量。函数本身必须确切地知道每个参数是哪种类型。以 printf() 为例。您可以将字符串、整数、指针等传递给它，格式字符串会准确地告诉函数每个变量是什么类型。

关于参数的数量，这是 C99 的一个特性。AFAIK Visual Studio 编译器不支持它。

[您可以在此问题](https://stackoverflow.com/questions/3272444/use-variadic-functions-in-c89-without-passing-number-of-arguments-or-a-final-arg)中找到 C99 的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:47:45.570

在 C++11 中，这很容易：

首先，一些辅助函数：

```
void do_in_order() {};
template<typename Lambda0, typename... Lambdas>
void do_in_order( Lambda0&& L0, Lambdas&&... Ls ) {
  std::forward<Lambda0>(L0)();
  do_in_order( std::forward<Lambdas>(Ls)... );
} 
```

`do_in_order`接受一组可变的 nullary lambda，并按顺序运行它们。

接下来，`logHelperMessage`：

```
template<typename... Args>
void logHelperMessage(loglevel severity,Args&&... args) {
  std::stringstream ss;

  do_in_order( [&](){
    ss << std::forward<Args>(args);
  }...);
  std::string s = ss.str();
  thread t1(threadedloghelpermessage,severity,s);
  t1.join();
} 
```

并做了。大部分繁重的工作都是由 完成的`do_in_order`，我们打包一堆任务，一次将每个 arg 塞入`stringstream`一个。

就个人而言，我不会使用这种设计，因为启动一个线程并立即加入它对内联并没有太大的改进。

# scheme - 带引号的 eval 方案函数

> ID：15711010
> 
> 赞同：0
> 
> 时间：2013-03-29T20:34:54.203
> 
> 标签：scheme, let

我正在尝试评估方案中的公式：

```
(define formula '(if (or (equal? '?country 'United-States) (equal? '?country 'England))
                  #t
                  #f))
(define (eval-formula formula)
  (eval `(let ([?country 'United-States])
           (display formula) (newline)
           (display ?country) (newline)
           ,formula)))

(eval-formula formula) 
```

阅读应该返回#t的[http://docs.racket-lang.org/guide/eval.html ，但是当我运行它时，它返回#f。](http://docs.racket-lang.org/guide/eval.html)你能告诉我我误解了什么吗？

我也试过：

```
(define formula '(if (or (equal? '?country 'United-States) (equal? '?country 'England))
                  #t
                  #f))
(define ?country 'United-States)
(eval formula) 
```

但我得到了同样的结果。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:22:57.440

在您`formula`引用的定义中`?country`-这是错误的。这是行为（注意，我的方案`eval`需要一个额外的`environment`参数）：

```
(define formula '(if (or (equal? ?country 'United-States) (equal? ?country 'England))
                  #t
                  #f))

(define (eval-formula formula)
  (eval `(let ([?country 'United-States])
           (display formula) (newline)
           (display ?country) (newline)
           ,formula)
    (interaction-environment)))

> (eval-formula formula)
(if (or (equal? ?country 'United-States) (equal? ?country 'England)) #t #f)
United-States
#t 
```

有几件事可以使这变得更好。你并不真正需要`if`（你会得到`#t`或`#f`作为的结果`or`）。您可以`eval-formula`为国家/地区名称传递一个附加参数。像这样（`display`删除）：

```
> (define (eval-formula formula country)
  (eval `(let ([?country ',country]) ,formula)
    (interaction-environment)))
> (eval-formula formula 'United-States)
#t
> (eval-formula formula 'England)
#t
> (eval-formula formula 'Japan)
#f 
```

事实上，如果你得到了`formula`with`(quote ?country)`那么你可以产生一个 new `formula`with `?country`unquoted with：

```
(define (unquoting identifiers expression)
  (if (null? expression)
      '()
      (let ((next (car expression)))
        (cons (cond ((not (pair? next)) next)
                    ((not (null? next))
                     (if (and (eq? 'quote (car next))
                              (member (cadr next) identifiers))
                         (cadr next) ; unquote here
                         (unquoting identifiers next)))
                    (else 'error))
          (unquoting identifiers (cdr expression))))))

 (set! formula (unquoting '(?country) formula) 
```

# r - R中的空间自相关分析

> ID：15711013
> 
> 赞同：3
> 
> 时间：2013-03-29T20:35:04.303
> 
> 标签：r

我正在尝试对整个采样区域的光值运行空间自相关 (SAC)。我做了一些搜索，发现 Moran's I（在猿包中）是 R 中用于执行 SAC 的常用工具。但是，我运行了代码，但我不完全确定 R 是否在做我想做的事。代码没有中断，但我使用 Moran.I 函数输入了我的变量（转换后的光值）：

```
Moran.I (ovenbird$ARCSINE.SQRT.TRAN, ld.dist.mat) 
```

我的距离矩阵 (ld.dist.mat) 是网格上所有点 (AO) 之间的距离矩阵。它看起来像这样：

```
 A     B     C     D     E     F     G     H     I     J    K     L     M     N     O
A  0.00  5.00 10.00  2.50  5.59 10.31  5.00  7.07 11.18  7.50 9.01 12.50 10.00 11.18 14.14
B  5.00  0.00  5.00  5.59  2.50  5.59 11.18  5.00 11.18  9.01 7.50  9.01 11.18 10.00 11.18
C 10.00  5.00  0.00 10.31  5.59  2.50 11.18  7.07  5.00 12.50 9.01  7.50 14.14 11.18 10.00
D  2.50  5.59 10.31  0.00  5.00 10.00  2.50  5.59 10.31  5.00 7.07 11.18  7.50  9.01 12.50
E  5.59  2.50  5.59  5.00  0.00  5.00  5.59  2.50  5.59 11.18 5.00 11.18  9.01  7.50  9.01
F 10.31  5.59  2.50 10.00  5.00  0.00 10.31  5.59  2.50 11.18 7.07  5.00 12.50 11.18  7.50
G  5.00 11.18 11.18  2.50  5.59 10.31  0.00  5.00 10.00  2.50 5.59 10.31  5.00  7.07 11.18
H  7.07  5.00  7.07  5.59  2.50  5.59  5.00  0.00  5.00  5.59 2.50  5.59 11.18  5.00 11.18
I 11.18 11.18  5.00 10.31  5.59  2.50 10.00  5.00  0.00 10.31 5.59  2.50 11.18  7.07  5.00
J  7.50  9.01 12.50  5.00 11.18 11.18  2.50  5.59 10.31  0.00 5.00 10.00  2.50  5.59 10.31
K  9.01  7.50  9.01  7.07  5.00  7.07  5.59  2.50  5.59  5.00 0.00  5.00  5.59  2.50  5.59
L 12.50  9.01  7.50 11.18 11.18  5.00 10.31  5.59  2.50 10.00 5.00  0.00 10.31  5.59  2.50
M 10.00 11.18 14.14  7.50  9.01 12.50  5.00 11.18 11.18  2.50 5.59 10.31  0.00  5.00 10.00
N 11.18 10.00 11.18  9.01  7.50 11.18  7.07  5.00  7.07  5.59 2.50  5.59  5.00  0.00  5.00
O 14.14 11.18 10.00 12.50  9.01  7.50 11.18 11.18  5.00 10.31 5.59  2.50 10.00  5.00  0.00 
```

我的问题是 R 如何知道我的网格上的哪些点与每个光值相关联？我试图`print(Moran.I)`弄清楚这一点，但自去年秋天（2012 年）以来我才开始编程，而且我对 R 的了解还不够，不知道如何解释该函数。另外，如果 R 没有以正确的方式识别我的光值，我该如何解决？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:48:35.163

您可以使用以下代码使用 Moran 的度量来获取空间自相关的全局和局部度量：

```
library(raster)
r  <-  raster(nrows=10,  ncols=10)
r[]  <-  1:ncell(r)
Moran(r) #this is the global index of autocorrelation
x1  <-  MoranLocal(r) #local measure of autocorr as a raster object that can be plotted
plot(x1) #this will plot the autocorrelation raster results 
```

对于 Geary 的自校正度量：

```
Geary(r) #this is the global index of autocorrelation
x1  <-  GearyLocal(r) #local measure
plot(x1) 
```

# php - PHP中foreach循环中的变量

> ID：15711015
> 
> 赞同：0
> 
> 时间：2013-03-29T20:35:33.523
> 
> 标签：php, loops

我从来都不擅长使用循环。我有以下问题：

当我执行下面的代码时，我收到此错误消息：`"Parse error: syntax error, unexpected T_VARIABLE in XXXXXXXXX on line 8"`. 我只想给数组中的每个元素一个“评级”，说明值有多高。

```
 <?
    $input = array( 12413535, 13452465246, -13451, 8);
    $input_size = count($input);
    $var_rating = array ();
    foreach ($input as $value) {
        $var_rating[$value] = 0;
        foreach ($input as $test) {
            if ($value > $test) {
                $var_rating[$value] = $var_rating[$value] + 1;
            }
            else {}
        }
    }

    var_dump($var_rating);
?> 
```

对困惑感到抱歉。我编辑了我的问题并添加了完整的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:02:57.337

看起来你的代码不起作用的罪魁祸首是第 8 行复制的隐藏隐藏字符，就在`$test`变量之前。删除“空格”和`>`符号，然后重新输入两者都可以解决您的问题。

```
<?php
    $input = array( 12413535, 13452465246, -13451, 8);
    $input_size = count($input);
    $var_rating = array ();
    foreach ($input as $value) {
        $var_rating[$value] = 0;
        foreach ($input as $test) {
            if ($value > $test) {
                     // ^  right here there is a hidden character, remove it and the code works fine
                $var_rating[$value] = $var_rating[$value] + 1;
            }
            else {}
        }
    }

    var_dump($var_rating);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:06:34.773

`>`在第 8 行，在和之间有一个不间断的空格，而不是通常的空格`$test`。用通常的空格替换它就可以了。使用像[PsPad](http://pspad.com)这样的高级文本编辑器，它提供了查看不可打印字符而不是记事本的可能性 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T21:12:22.503

这只是为了更好地显示此错误的原因，我使用[了 Fred](http://sourceforge.net/projects/frhed/?source=dlp)

有隐藏`Â`字符:)

![在此处输入图像描述](../Images/b2d4ed2598d2e04870199523330cd568.png)

# ios - 制作我自己的容器文件类型

> ID：15711016
> 
> 赞同：2
> 
> 时间：2013-03-29T20:35:34.757
> 
> 标签：ios, containers, file-format

我想通过组合其他两种文件类型（如 .mp3 和 .pdf）来创建具有个人扩展名的文件类型。

稍后我需要重新打开我制作的自定义文件，并能够在我的应用程序中使用包含的文件。

我如何在 iOS 上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:19:37.740

One option is to append the data of the two files together. Include a few bytes of data at the start that tell you the size of each and maybe their original filenames. Then when you want to recreate the two files from the one custom one, you read your header to get the sizes and names, then use that info to recreate the original files.

Another option would be to zip the two files together. Just give the zip file your own custom extension.

Another option would be to use an `NSFileWrapper`. Include the two regular files in the wrapper.

# javascript - 这个从数组中删除重复项的代码片段如何工作

> ID：15711018
> 
> 赞同：0
> 
> 时间：2013-03-29T20:35:49.537
> 
> 标签：javascript, arrays

关于这篇关于从另一个数组创建唯一值的新数组的帖子（[从 JavaScript 数组中删除重复项）。](https://stackoverflow.com/questions/9229645/remove-duplicates-from-javascript-array)

有问题的代码：

```
uniqueArray = myArray.filter(function(elem, pos) {
    return myArray.indexOf(elem) == pos;
}) 
```

使用它作为测试数据：

```
var names = ["Mike","Matt","Nancy","Adam","Jenny","Nancy","Carl"]; 
```

期望的结果是一个只有唯一值的数组：

```
var unique_names = ["Mike","Matt","Nancy","Adam","Jenny","Carl"]; 
```

我在哪里：

我知道过滤器将在数组的每个成员上运行一个函数，而 elem 是被审查的元素，而 pos 是它的索引。如果某些原因导致该函数返回 false，则该元素将不会包含在新数组中。因此，通过它，会发生这种情况：

1.  myArray.indexOf("Mike") 和 0 一样吗？是的，所以将“Mike”添加到新数组中。
2.  myArray.indexOf("Matt") 是否与 1 相同？是的，所以将“Matt”添加到新数组中。
3.  myArray.indexOf("Nancy") 是否与 2 相同？是的，所以将“Nancy”添加到新数组中。

[对所有元素重复。全部通过。]

基本上我不明白为什么第二个南希会评估为假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:40:57.823

indexof 是元素*第一次*出现的索引，所以第二个 Nancy 会得到第一个 Nancy 的索引，会被过滤掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:41:47.367

6) myArray.indexOf("Nancy") 是否与 5 相同？不（它是 2，就像第 3 步一样），所以跳过重复的“Nancy”。

`indexOf`为您提供该项目的*第一次*出现。

# python - How to detect if a 2D array is inside another 2D array?

> ID：15711019
> 
> 赞同：3
> 
> 时间：2013-03-29T20:35:54.100
> 
> 标签：python, python-2.7, numpy, scipy, detection

So with the help of a stack-overflow member, I have the following code:

```
data = "needle's (which is a png image) base64 code goes here"
decoded = data.decode('base64')
f = cStringIO.StringIO(decoded)
image = Image.open(f)
needle = image.load()

while True:
    screenshot = ImageGrab.grab()
    haystack = screenshot.load()
    if detectImage(haystack, needle):
        break
    else:
        time.sleep(5) 
```

I've written the following code to check if the needle is in the haystack:

```
def detectImage(haystack, needle):
    counter = 0
    for hayrow in haystack:
        for haypix in hayrow:
            for needlerow in needle:
                for needlepix in needlerow:
                    if haypix == needlepix:
                        counter += 1

    if counter == 980: #the needle has 980 pixels
        return True
    else:
        return False 
```

The issue is that I get this error for line 3: 'PixelAccess' object is not iterable

It was suggested to me that it would be easier to copy both needle and haystack into a numpy/scipy array. And then I can just use a function that checks to see if the 2D array needle is inside the 2D array haystack.

I need help with:

1) converting those arrays to numpy arrays.

2) a function that checks to see if the 2D array needle is inside the 2D array haystack. My function doesn't work.

These are the images:
Needle:
[![针](../Images/8506e4e5985ff005941a530937e74c7f.png)](https://i.stack.imgur.com/7R6YD.png)
Haystack:
![草垛](../Images/11953c8d6d639a4d99611fc5ff27ebd5.png) ![草垛](../Images/046eb8340145ef186d7be6b042ee5f03.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:48:02.113

要将图像转换为 numpy 数组，您应该能够简单地执行以下操作：

```
import numpy as np
from PIL import Image

needle = Image.open('needle.png')
haystack = Image.open('haystack.jpg')

needle = np.asarray(needle)
haystack = np.asarray(haystack) 
```

为了让您开始寻找针，请注意，这将为您提供角落匹配的所有位置的列表：

```
haystack = np.array([[1,2,3],[3,2,1],[2,1,3]])
needle = np.array([[2,1],[1,3]])

np.where(haystack == needle[0,0])
#(array([0, 1, 2]),   row-values
# array([1, 1, 0]))   col-values 
```

然后，您可以查看所有角点匹配，看看那里的 subhaystack 是否匹配：

```
h,w = needle.shape
rows, cols = np.where(haystack == needle[0,0])
for row, col in zip(rows, cols):
    if np.all(haystack[row:row+h, col:col+w] == needle):
        print "found it at row = %i, col = %i"%(row,col)
        break
else:
    print "no needle in haystack" 
```

下面是一个更强大的版本，可以找到最佳匹配，如果匹配好于某个百分比，则认为找到了针。如果找到，则返回角坐标，`None`如果没有。

```
def find_needle(needle, haystack, tolerance=.80):
    """ input:  PIL.Image objects
        output: coordinat of found needle, else None """

    # convert to grayscale ("L"uminosity) for simplicity.
    needle = np.asarray(needle.convert('L'))   
    haystack = np.asarray(haystack.convert('L'))

    h,w = needle.shape
    H,W = haystack.shape
    L = haystack.max()

    best = (None, None, 1)
    rows, cols = np.where((haystack - needle[0,0])/L < tolerance)
    for row, col in zip(rows, cols):
        if row+h > H or col+w > W: continue # out of range
        diff = np.mean(haystack[row:row+h, col:col+w] - needle)/L
        if diff < best[-1]:
            best = (diff, row, col)

    return best if best[-1] < tolerance else None 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T08:10:48.720

我终于设法使互相关搜索工作的 numpy-only 实现......互相关是使用[互相关定理](http://mathworld.wolfram.com/Cross-CorrelationTheorem.html)和 FFT 计算的。

```
from __future__ import division
import numpy as np
from PIL import Image
import matplotlib.pyplot as plt

def cross_corr(a, b):
    a_rows, a_cols = a.shape[:2]
    b_rows, b_cols = b.shape[:2]
    rows, cols = max(a_rows, b_rows), max(a_cols, b_cols)
    a_f = np.fft.fft2(a, s=(rows, cols), axes=(0, 1))
    b_f = np.fft.fft2(b, s=(rows, cols), axes=(0, 1))
    corr_ab = np.fft.fft2(a_f.conj()*b_f, axes=(0,1))
    return np.rint(corr_ab / rows / cols)

def find_needle(haystack, needle, n=10):
    # convert to float and subtract 128 for better matching
    haystack = haystack.astype(np.float) - 128
    needle = needle.astype(np.float) - 128
    target = np.sum(np.sum(needle*needle, axis=0), axis=0)
    corr_hn = cross_corr(haystack, needle)
    delta = np.sum(np.abs(corr_hn - target), axis=-1)
    return np.unravel_index(np.argsort(delta, axis=None)[:n],
                            dims=haystack.shape[:2])

haystack = np.array(Image.open('haystack.jpg'))
needle = np.array(Image.open('needle.png'))[..., :3]
plt.imshow(haystack, interpolation='nearest')
dy, dx = needle.shape[:2]
candidates = find_needle(haystack, needle, 1)
for y, x in zip(*candidates):
    plt.plot([x, x+dx, x+dx, x, x], [y, y, y+dy,y+dy, y], 'g-', lw=2)
plt.show() 
```

所以得分最高的点是真针：

![在此处输入图像描述](../Images/fe3ca6e3156cc31422cf7440cfcf5625.png)

```
>>> print candidates
(array([553], dtype=int64), array([821], dtype=int64)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T22:35:06.373

您可以`matchTemplate`在 opencv 中使用来检测位置：

```
import cv2
import numpy as np
import pylab as pl

needle = cv2.imread("needle.png")
haystack = cv2.imread("haystack.jpg")

diff = cv2.matchTemplate(haystack, needle, cv2.TM_CCORR_NORMED)
x, y = np.unravel_index(np.argmax(diff), diff.shape)

pl.figure(figsize=(12, 8))
im = pl.imshow(haystack[:,:, ::-1])
ax = pl.gca()
ax.add_artist(pl.Rectangle((y, x), needle.shape[1], needle.shape[0],  transform=ax.transData, alpha=0.6)) 
```

这是输出：

![在此处输入图像描述](../Images/8ae89956905c7b2535989770fb5160b0.png)

# ruby-on-rails - rails - 如何从另一台 PC 访问在瘦服务器上运行的站点

> ID：15711020
> 
> 赞同：0
> 
> 时间：2013-03-29T20:36:07.550
> 
> 标签：ruby-on-rails

我有一个在 2 个不同位置运行的 rails 应用程序。第一个是开发者虚拟机。当我在那里的瘦服务器上运行应用程序时，我可以从我的台式电脑访问它。我还让应用程序在另一个 VM 上运行（据我所知）相同的配置。当我尝试在那里连接时，我无法从我的桌面查看该站点。有人能想出一个理由吗？我确实在第二个 VM 上运行了 Apache 服务器，这是一个问题吗？

失败的确切性质是，当尝试从另一个位置连接时，浏览器永远不会响应。它不会显示错误消息或给出 404。选项卡上的加载图形只是继续旋转。

谢谢。

# c - 循环列表中具有相同值的节点

> ID：15711023
> 
> 赞同：0
> 
> 时间：2013-03-29T20:36:23.463
> 
> 标签：c, circular-list

我有以下代码：（由 Armin 提供）

```
 int InsForward (TL2 p, void* x){
 /* Inserta a node a step forward from the supplied p*/
 TL2 h = (TL2)calloc(1,sizeof(TCel2));
 if (!h)
    return 0;
h->pre = p;        //sets h previous to point to p
h->nxt= p->nxt;    //sets h next to point to where p was pointing ( sentinel )
p->nxt->prv = h;   //sets the sentinel previous to point to h
p->nxt = h;        //sets the p next to point to h
h->info = x;   
return 1; 
```

我尝试了什么：

```
/* TCel a, int p, FILE fi*/
while(fscanf(fi,"%i%i", &(p.x), &(p.y)) == 2)
 if ( InsForward(a, &p) == 0)   
   break; 
```

结构：

```
typedef struct cel2
{ 
  struct cel2 *pre, *nxt;  
 void* info;              
} TCel2, *TL2; 
```

所以我检查了它：

```
 /* TL2 u*/

 for (u = a->nxt; u != a; u = u->nxt)
   printf("%p \n",  u->info); 
```

是的，信息是无效的，但我很好奇地址是否不同......我想不是：

```
 0028FEA8 0028FEA8 0028FEA8 0028FEA8 0028FEA8 0028FEA8 
```

为什么都一样？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:59:57.350

在这个循环中，您永远不会创建新的`p`. 您正在重用它`p`来存储 的结果`fscanf`，然后使用指针来`p`设置`info`节点的字段。

```
while(fscanf(fi,"%i%i", &(p.x), &(p.y)) == 2)
 if ( InsForward(a, &p) == 0)   
   break; 
```

这就是为什么所有指针最终都指向同一个`p`. 这不是您想要的，因为：

1.  您的所有节点都将指向与它们相同`p`的`info`.
2.  由于您正在创建这些节点的动态 #，因此您应该在堆上分配这些信息结构`malloc`,`calloc`等。

我假设`p`是一个带有`x`and`y`字段的结构，这两个字段都是`int`s。你应该这样。我称之为 struct `tuple_t`。

```
while(true) {
 tuple_t *p = malloc(sizeof(tuple_t));
 int f = fscanf(fi,"%i%i", &(p->x), &(p->y));
 if (f != 2 || InsForward(a, p) == 0) {
   break;
} 
```

当然，您需要添加更多您认为合适的错误处理和内存管理。

# asp.net - 读取二维码

> ID：15711026
> 
> 赞同：0
> 
> 时间：2013-03-29T20:36:33.160
> 
> 标签：asp.net, vb.net, image-processing, qr-code

我下载`Refinery.Barcodes.Reader.dll`了，正在使用这个：

```
Imports BusinessRefinery.Barcodes.Reader

Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub btnread_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnread.Click
        Dim barcodes As String() = BarCodeReader.scanBarCode("D://QRSAMPLE.png", BusinessRefinery.Barcodes.Reader.BarCodeType.QRCODE)
    End Sub
End Class 
```

它运行良好；没有错误被抛出。但是我如何看到解码过程的结果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:43:23.917

尝试`myTextBox.Text = barcodes`在`End Sub`.

*编辑：*

看到评论后，我认为您遇到的是 scanBarCode 返回一个数组，而不是一个字符串。检查一下，然后尝试这样的事情：

```
Imports BusinessRefinery.Barcodes.Reader

Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub btnread_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnread.Click
        Dim barcodes As String() = BarCodeReader.scanBarCode("D://QRSAMPLE.png", BusinessRefinery.Barcodes.Reader.BarCodeType.QRCODE)
        myTextbox.Text = barcodes(0)
    End Sub
End Class 
```

# jquery - MVC 3 和 jquery

> ID：15711027
> 
> 赞同：0
> 
> 时间：2013-03-29T20:36:36.827
> 
> 标签：jquery, css, asp.net-mvc

我有一张桌子（模拟网格行为）：

```
<table class="searchResult" border="1" width="100%">
<thead>
    <tr>
        <th></th>
        <th>Last Name</th>
        <th>Middle Name</th>
        <th>First Name"</th>
    </tr>
</thead>
<tbody>@foreach (var per in @Model) {
    <tr class="parent">
        <td>+</td>
        <td>@per.LastName</td>
        <td>@per.MiddleName</td>
        <td>@per.FirstName</td>
    </tr>
    <tr class="child">
        <td colspan="11">
            <table width="100%">
                <tr>
                    <td>
                        Home Address: @per.HomeAddress
                    </td>
                    <td>
                         Race : @per.Race
                    </td>
                </tr>
            </table>
        </td>`
    </tr>}
</tbody> 
```

class="parent" 行上的 "+" 展开 class="child" 行（展开/折叠）

jquery 用于展开和折叠：

```
$(document).ready(function () {
    $('table.searchResult').each(function () {
        var $table = $(this);
        $table.find('tr.child').hide();
        $table.find('.parent').click(function () {
            var sign = $.trim($(this).find('td:first').text());
            $(this).nextUntil('.parent').toggle();
            if (sign == '+')
                $(this).find('td:first').text('-');
            else
                $(this).find('td:first').text('+');
        });
    });
}); 
```

我的问题是

1.  如何将备用行样式应用于具有 class="parent" 的行？
2.  如果有多个记录具有完全相同的名字、中间名和姓氏，则行应以绿色高亮显示。（模型按姓氏然后按中间名排序，然后按名字排序）

我对 jquery 和 mvc 很陌生，确切地说是 10。我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:57:39.543

对于您的第一个请求 CSS`nth-child(even)`或`nth-child(odd)`可能不完全有效，因为您的带有类的行`parent`可能不完全是`evens`或`odd`按照它们出现的顺序，但是可以使用 jQuery 选择器轻松定位这些：

```
$(".parent:even").each(function()
{
    $(this).css("background-color","#CCC");
}); 
```

对于第二个请求，试试这个：

```
var cats = [];
$('.child').each(function() {
    var text = $(this).text();
    if ($.inArray(text, cats) === -1) {
        cats.push(text);
    } else {
        $(this).css("background-color","green");
    }
}); 
```

这假设该行的全部内容已经存在。它可能无法完全按照您的意愿工作，因此您可能需要根据您的需要对其进行一些调整。

**jsfiddle**：http: [//jsfiddle.net/atngN/](http://jsfiddle.net/atngN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:44:55.560

第1部分）

```
$(function() {
    var index = 1;
    $("tr.parent").each(function() {
        $(this).siblings().each(function() {
           if ($(this).hasClass("parent")) {
             return false; // stop execution
          }
          else if ((++index % 4) == 1) {
              $(this).toggleClass("highlighted");
          }
       });
    });
}); 
```

第2部分）

```
@{
    var namesWithIndex = Model.Select(pers => pers.FirstName + pers.MiddleName + pers.LastName);
    var duplicateRows = Model.Where(pers => namesWithIndex.Count(name => pers .FirstName + pers .MiddleName + pers.LastName == name) > 1);
} 
```

然后只需检查当前人员是否在该 duplicateRows 列表中，并为他们提供另一个 css 类以将背景颜色突出显示为绿色。

```
 <tbody>@foreach (var per in @Model) {
 <tr class="parent @(duplicateRows.Contains(per)?"highlightGreen":string.Empty)  " > 
```

# image - 画布drawimage（）黑色结果

> ID：15711035
> 
> 赞同：2
> 
> 时间：2013-03-29T20:37:15.230
> 
> 标签：image, canvas, drawimage

我有一个大图像要在画布上绘制：1900px X 7000px

80% 加载正确，但 20% 我有一个黑色画布而不是我的图像。似乎是GPU，但不确定。

我是否必须将此img分成两三个，否则它不会改变任何东西。

它只是一个背景图像，上面没有 requestanimationframe。

只是drawimage（bg，宽度，高度，0，0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-13T10:31:11.700

如果您在代码中的某处使用它

```
canvas.toDataURL() 
```

改用这个：

```
canvas.toDataURL('image/jpg') 
```

# java - 午餐清单安卓应用

> ID：15711036
> 
> 赞同：-1
> 
> 时间：2013-03-29T20:37:18.813
> 
> 标签：java, android

我是 Android 编程新手。我正在从书中做这个项目。我编写了类来返回名称和地址，然后为它编写了 OnClickListener，但是当我单击保存按钮时它似乎不起作用。这是我的两个 Java 文件：

```
package com.example.lunchlist;

public class Returant {

        private String name="";
        private String address="";
        public String getName() {
        return(name);
        }
        public void setName(String name) {
        this.name=name;
        }
        public String getAddress() {
        return(address);
        }
        public void setAddress(String address) {
        this.address=address;
        }
        } 
```

这是我的 MainActivity 文件：

```
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

    Returant r = new Returant();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button save = (Button) findViewById(R.id.save);
        save.setOnClickListener(onSave);
        }

    private View.OnClickListener onSave=new View.OnClickListener() {
        public void onClick(View v) {
        EditText name=(EditText)findViewById(R.id.name);
        EditText address=(EditText)findViewById(R.id.addr);
        r.setName(name.getText().toString());
        r.setAddress(address.getText().toString());
        }

    };  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:51:35.863

> 我相信一旦您单击保存按钮，它会返回您在 TextField 上的名称和地址

我不知道你为什么会这样想。这本书当然没有表明这一点。我知道这一点，因为我写了这本书。具体来说，这似乎来自我退休的书，*Android 编程教程*，特别是教程 #2。

在[本书最新的知识共享版（3.4 版）](http://commonsware.com/AndTutorials/AndTutorials-3_4-CC.pdf)中，教程 #2 的教程步骤的结尾有：

> 运行应用程序以确保它看起来运行时没有错误，尽管此时我们还没有真正使用保存在餐厅对象中的数据。

在教程的这一点上，我们所做的就是从对象中取出数据`EditText`并将其放入`Restaurant`（或者，在您的情况下，`Returant`）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:50:57.567

您可以只记录该值并查看日志。尝试在 OnClickListener 中添加这两行。

```
Log.i(TAG, r.getName());
Log.i(TAG, r.getAddress()); 
```

如果打印出某些内容，则意味着您成功地将值设置为变量。

```
public class MainActivity extends Activity {

Returant r = new Returant();
EditText name;
EditText address;
String TAG = "MainActivity";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button save = (Button) findViewById(R.id.save);
    name=(EditText)findViewById(R.id.name);
    address=(EditText)findViewById(R.id.addr);
    save.setOnClickListener(onSave);
    }

private View.OnClickListener onSave=new View.OnClickListener() {
    public void onClick(View v) {
    r.setName(name.getText().toString());
    r.setAddress(address.getText().toString());
    Log.i(TAG, r.getName());
    Log.i(TAG, r.getAddress());
    }
};  
} 
```

# sql - 获取最多两列（一列存储日期，另一列存储时间）

> ID：15711043
> 
> 赞同：0
> 
> 时间：2013-03-29T20:37:54.160
> 
> 标签：sql, oracle, subquery, max

*tableABC*有单独的日期和时间列：

```
+-----------+--------+-----------+-----------+
| AccountID | userID |   date    | timestamp |
+-----------+--------+-----------+-----------+
|       123 |      1 | 29-MAR-13 |     21005 |
|       123 |      1 | 29-MAR-13 |     11005 |
|       123 |      1 | 23-MAR-13 |     21005 |
+-----------+--------+-----------+-----------+ 
```

我需要日期列和时间戳列的最大值。我写的查询只做日期的最大值而不是时间戳：

```
select * 
from tableABC rn 
where userID = '1'  
    and accountID = '123'
    and date =
    (
        select max(date) MaxDate 
        from tableABC b 
        where b.userID = rn.userID
            and b.accountID = rn.accountID
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:53:15.387

首先，Oracle 不会让你命名一个列`DATE`，除非你用双引号将列名括起来，但我建议不要命名它`DATE`——你会避免各种麻烦。

Oracle 不介意列是否被命名`TIMESTAMP`，但这仍然是一个“特殊”的 Oracle 词，所以我再次建议不要这样做。Oracle 不会感到困惑，但任何阅读您的代码的人都会感到困惑。

假设列名为`my_date`and `my_timestamp`。要查询所有用户的最高日期/时间戳，请执行以下操作：

```
SELECT * FROM (
  SELECT
    AccountID,
    userID,
    my_date,
    my_timestamp,
    ROW_NUMBER() OVER (
      PARTITION BY AccountID, UserID
      ORDER BY my_date DESC, my_timestamp DESC) AS DateTimestampRank
  FROM TableABC
) WHERE DateTimeStampRank = 1 
```

如果您只想查询一个用户，@GordonLinoff 的答案就是您可以使用的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:45:25.353

只需使用`order by`：

```
select *
from (select *
      from tableABC
      order by "date" desc, "timestamp" desc
     ) t
where rownum = 1 
```

如果您尝试获取每个 accountID/userID 组合的最大值，请使用`row_number()`：

```
select *
from (select *, row_number() over (partition by userId, accountId order by "date" desc, "timestamp" desc) as seqnum
      from tableABC
     ) t
where seqnum = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:45:24.210

为什么不按日期排序，然后按时间排序，然后占据第一行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T11:07:45.097

```
SELECT ACCOUNTID,USERID,MAX(DATE1),MAX(TIMESTAMP) FROM tableABC
GROUP BY ACCOUNTID,USERID,DATE1; 
```

# python - 在字段中添加“UOM”（计量单位） - OpenErp

> ID：15711045
> 
> 赞同：1
> 
> 时间：2013-03-29T20:38:07.570
> 
> 标签：python, module, field, openerp, inheritance

我需要在模块中添加度量单位字段，这是我的代码

```
 _columns = {
            'Items' : fields.integer('Items'),
            'Codigo Arancelario' : fields.integer('Codigo Arancelario'),
            'Descripcion Arancelaria' : fields.char('Descripcion Arancelaria', size=42, required = True, translate = True), 
            'Especificaciones Tecnicas' : fields.char('Especificaciones Tecnicas', size=60, required = True, translate = True), 
            'Cantidad' : fields.float('Cantidad'),
            'Precio Unitario Declarado' : fields.float('Precio Unitario Declarado'),
            'Valor En Divisas' : fields.float('Valor En Divisas'),
            'notas' : fields.text('Notas'),
            } 
```

在“Cantidad”字段中，我需要添加一个 UOM 字段。

我应该通过'self.pool.get（object）'继承它吗？

例如，“Cantidad”（数量）应该以吨表示，这就是我需要 UOM 字段的原因。

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:41:20.750

您可以将 many2one 字段添加到“product.uom”

```
'uom_id': fields.many2one('product.uom', 'Uom') 
```

# list - 如何在 Scala 中调用具有 Int 列表参数的函数？

> ID：15711051
> 
> 赞同：0
> 
> 时间：2013-03-29T20:38:45.133
> 
> 标签：list, scala, function-call

我有一个这样的函数签名：

```
def countChange(money: Int, coins: List[Int]): Int = { 
```

并且需要使用如下参数调用函数：money = 4, coin = [1,2]

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:42:51.607

答案就在表面上：

```
countChange(4, List(1,2)) 
```

不要认为这是一种冒犯，但也许你应该阅读[一些关于 Scala 的基本教程](http://twitter.github.com/scala_school/basics.html)？

# ruby-on-rails - Nginx + Passenger 在不同的子 URI 中为 Rails 应用程序提供服务

> ID：15711053
> 
> 赞同：1
> 
> 时间：2013-03-29T20:38:59.713
> 
> 标签：ruby-on-rails, nginx, passenger

我在 Debian 服务器（ip 192.168.1.193）中运行 Rails 应用程序，乘客作为独立

```
$ cd /home/hector/webapps/first
$ passenger start -a 127.0.0.1 -p 3000 
```

我想在不同的子文件夹中为这个应用程序抛出带有反向代理的 Nginx：

```
http://192.168.1.193/first 
```

我的 nginx.conf 服务器：

```
...
server {
    listen 80;
    server_name 127.0.0.1;
    root /home/hector/webapps/first/public;
    passenger_base_uri /first/;
    location /first/ {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
    }
}
... 
```

然后我运行 Nginx 服务器

```
$ /opt/nginx/sbin/nginx 
```

使用此配置运行一个 rails 应用程序，一切似乎都可以正常工作。

但是当我尝试添加我的第二个应用程序时

```
$ cd /home/hector/webapps/second
$ passenger start -a 127.0.0.1 -p 3001 
```

使用这个 nginx.conf 文件：

```
...
server {
    listen 80;
    server_name 127.0.0.1;
    root /home/hector/webapps/first/public;
    passenger_base_uri /first/;
    location /first/ {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
    }
}

server {
    listen 80;
    server_name 127.0.0.1;
    root /home/hector/webapps/second/public;
    passenger_base_uri /second/;
    location /second/ {
        proxy_pass http://127.0.0.1:3001;
        proxy_set_header Host $host;
    }
}
… 
```

我重新加载 Nginx 服务器配置

```
$ /opt/nginx/sbin/nginx -s reload
nginx: [warn] conflicting server name "127.0.0.1" on 0.0.0.0:80, ignored 
```

我收到警告，我无法访问第二个应用程序

```
http://192.168.1.193/second/ 
```

服务器为第二个应用程序返回 404，并且第一个应用程序仍在运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:03:40.043

我认为您只需将两个位置放入同一服务器：

```
server {
  listen 80;
  server_name 127.0.0.1;

  location /first/ {
    root /home/hector/webapps/first/public;
    passenger_base_uri /first/;

    proxy_pass http://127.0.0.1:3000/;
    proxy_set_header Host $host;
  }
  location /second/ {
    root /home/hector/webapps/second/public;
    passenger_base_uri /second/;

    proxy_pass http://127.0.0.1:3001/;
    proxy_set_header Host $host;
  } 

} 
```

# c++ - 如何在 Windows 8 现代应用程序上从视频流中抓取帧？

> ID：15711054
> 
> 赞同：7
> 
> 时间：2013-03-29T20:39:04.317
> 
> 标签：c++, windows-8, windows-runtime, winrt-xaml, ms-media-foundation

我正在尝试从 mp4 视频流中提取图像。在查找内容之后，似乎正确的方法是在 C++ 中使用媒体基础并打开框架/从中读取内容。

文档和示例很少，但经过一番挖掘，似乎有些人通过将帧读入纹理并将该纹理的内容复制到内存可读纹理（我什至不是确定我是否在这里使用了正确的术语）。尝试我发现的东西会给我带来错误，我可能做错了很多事情。

这是我尝试执行此操作的一小段代码（项目本身附在底部）。

```
 ComPtr<ID3D11Texture2D> spTextureDst;
    MEDIA::ThrowIfFailed(
        m_spDX11SwapChain->GetBuffer(0, IID_PPV_ARGS(&spTextureDst))
        );

    auto rcNormalized = MFVideoNormalizedRect();
    rcNormalized.left = 0;
    rcNormalized.right = 1;
    rcNormalized.top = 0;
    rcNormalized.bottom = 1;
    MEDIA::ThrowIfFailed(
        m_spMediaEngine->TransferVideoFrame(m_spRenderTexture.Get(), &rcNormalized, &m_rcTarget, &m_bkgColor)
        );

    //copy the render target texture to the readable texture.
    m_spDX11DeviceContext->CopySubresourceRegion(m_spCopyTexture.Get(),0,0,0,0,m_spRenderTexture.Get(),0,NULL);
    m_spDX11DeviceContext->Flush();

    //Map the readable texture;                 
    D3D11_MAPPED_SUBRESOURCE mapped = {0};
    m_spDX11DeviceContext->Map(m_spCopyTexture.Get(),0,D3D11_MAP_READ,0,&mapped);
    void* buffer = ::CoTaskMemAlloc(600 * 400 * 3);
    memcpy(buffer, mapped.pData,600 * 400 * 3);
    //unmap so we can copy during next update.
    m_spDX11DeviceContext->Unmap(m_spCopyTexture.Get(),0);

    // and the present it to the screen
    MEDIA::ThrowIfFailed(
        m_spDX11SwapChain->Present(1, 0)
        );            
} 
```

我得到的错误是：

> App1.exe 中 0x76814B32 处的第一次机会异常：Microsoft C++ 异常：Platform::InvalidArgumentException ^ 在内存位置 0x07AFF60C。HRESULT:0x80070057

我不确定如何进一步研究它，因为就像我说的那样，关于它的文档很少。

这是我正在处理[的修改后的示例。](http://www.box.net/s/0hcg28pwka2x3s2od9om)此问题特定于 WinRT（Windows 8 应用程序）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T08:16:56.753

**更新**成功！！见底部编辑

* * *

部分*成功*，但可能足以回答您的问题。请继续阅读。

在我的系统上，调试异常显示该`OnTimer()`函数在尝试调用时失败`TransferVideoFrame()`。它给出的错误是`InvalidArgumentException`.

所以，我在谷歌上搜索了一下，我的第一个发现是——显然[NVIDIA 驱动程序中存在一个错误](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/2f467b60-a99b-481d-baa1-fe0be124d8bb)——这意味着视频播放似乎在 11 和 10 功能级别时失败。

所以我的第一个变化是功能`CreateDX11Device()`如下：

```
static const D3D_FEATURE_LEVEL levels[] = {
/*
        D3D_FEATURE_LEVEL_11_1,
        D3D_FEATURE_LEVEL_11_0,  
        D3D_FEATURE_LEVEL_10_1,
        D3D_FEATURE_LEVEL_10_0,
*/
        D3D_FEATURE_LEVEL_9_3,
        D3D_FEATURE_LEVEL_9_2,
        D3D_FEATURE_LEVEL_9_1
    }; 
```

现在`TransferVideoFrame()`仍然失败，但给出`E_FAIL`（作为 HRESULT）而不是无效参数。

更多谷歌搜索导致我的[第二个发现](http://answers.flyppdevportal.com/categories/metro/nativecode.aspx?ID=69b3aa89-c5af-4fc4-9dd6-d38387a4ef8b)-

这是一个示例，展示了使用`TransferVideoFrame()`不使用`CreateTexture2D()`来预先创建纹理。我看到您已经有一些`OnTimer()`与此类似但未使用的代码，所以我猜您找到了相同的链接。

无论如何，我现在使用这段代码来获取视频帧：

```
ComPtr <ID3D11Texture2D> spTextureDst;
m_spDX11SwapChain->GetBuffer (0, IID_PPV_ARGS (&spTextureDst));
m_spMediaEngine->TransferVideoFrame (spTextureDst.Get (), nullptr, &m_rcTarget, &m_bkgColor); 
```

完成此操作后，我看到`TransferVideoFrame()`成功（好！）但调用`Map()`您复制的纹理 - `m_spCopyTexture`- 失败，因为该纹理不是使用 CPU 读取访问权限创建的。

因此，我只是使用您的读/写作`m_spRenderTexture`为副本的目标，因为它具有正确的标志，并且由于之前的更改，我不再使用它。

```
 //copy the render target texture to the readable texture.
        m_spDX11DeviceContext->CopySubresourceRegion(m_spRenderTexture.Get(),0,0,0,0,spTextureDst.Get(),0,NULL);
        m_spDX11DeviceContext->Flush();

        //Map the readable texture;                 
        D3D11_MAPPED_SUBRESOURCE mapped = {0};
        HRESULT hr = m_spDX11DeviceContext->Map(m_spRenderTexture.Get(),0,D3D11_MAP_READ,0,&mapped);
        void* buffer = ::CoTaskMemAlloc(176 * 144 * 3);
        memcpy(buffer, mapped.pData,176 * 144 * 3);
        //unmap so we can copy during next update.
        m_spDX11DeviceContext->Unmap(m_spRenderTexture.Get(),0); 
```

现在，在我的系统上，该`OnTimer()`功能不会失败。视频帧被渲染到纹理，像素数据被成功复制到内存缓冲区。

在查看是否有进一步的问题之前，也许这是一个很好的时机，看看你是否能取得和我目前一样的进步。如果您对此答案发表评论并提供更多信息，我将编辑答案以添加更多帮助（如果可能）。

**编辑**

对纹理描述的更改`FramePlayer::CreateBackBuffers()`

```
 //make first texture cpu readable
        D3D11_TEXTURE2D_DESC texDesc = {0};
        texDesc.Width = 176;
        texDesc.Height = 144;
        texDesc.MipLevels = 1;
        texDesc.ArraySize = 1;
        texDesc.Format = DXGI_FORMAT_B8G8R8A8_UNORM;
        texDesc.SampleDesc.Count = 1;
        texDesc.SampleDesc.Quality =  0;
        texDesc.Usage = D3D11_USAGE_STAGING;
        texDesc.BindFlags = 0;
        texDesc.CPUAccessFlags =  D3D11_CPU_ACCESS_READ | D3D11_CPU_ACCESS_WRITE;
        texDesc.MiscFlags = 0;

        MEDIA::ThrowIfFailed(m_spDX11Device->CreateTexture2D(&texDesc,NULL,&m_spRenderTexture)); 
```

另请注意，有时需要清除内存泄漏（我相信您知道） - 在下一行中分配的内存永远不会被释放：

```
void* buffer = ::CoTaskMemAlloc(176 * 144 * 3); // sizes changed for my test 
```

**成功**

我现在已经成功保存了一个单独的帧，但现在没有使用复制纹理。

首先，我下载了最新版本[的 DirectXTex 库](http://directxtex.codeplex.com/)，它提供了 DX11 纹理辅助函数，例如从纹理中提取图像并保存到文件。需要仔细遵循将 DirectXTex 库作为现有项目添加到您的解决方案的说明，并注意 Windows 8 应用商店应用所需的更改[。](http://directxtex.codeplex.com/wikipage?title=DirectXTex&referringTitle=Documentation)

一旦包含、引用和构建了上述库，将以下内容添加`#include`到`FramePlayer.cpp`

```
#include "..\DirectXTex\DirectXTex.h"  // nb - use the relative path you copied to
#include <wincodec.h> 
```

最后，代码的中心部分`FramePlayer::OnTimer()`需要类似于以下内容。你会看到我每次都保存到相同的文件名，所以这需要修改，例如在名称中添加帧号

```
// new frame available at the media engine so get it 
ComPtr<ID3D11Texture2D> spTextureDst;
MEDIA::ThrowIfFailed(m_spDX11SwapChain->GetBuffer(0, IID_PPV_ARGS(&spTextureDst)));

auto rcNormalized = MFVideoNormalizedRect();
rcNormalized.left = 0;
rcNormalized.right = 1;
rcNormalized.top = 0;
rcNormalized.bottom = 1;
MEDIA::ThrowIfFailed(m_spMediaEngine->TransferVideoFrame(spTextureDst.Get(), &rcNormalized, &m_rcTarget, &m_bkgColor));

// capture an image from the DX11 texture
DirectX::ScratchImage pImage;
HRESULT hr = DirectX::CaptureTexture(m_spDX11Device.Get(), m_spDX11DeviceContext.Get(), spTextureDst.Get(), pImage);
if (SUCCEEDED(hr))
{
    // get the image object from the wrapper
    const DirectX::Image *pRealImage = pImage.GetImage(0, 0, 0);

    // set some place to save the image frame
    StorageFolder ^dataFolder = ApplicationData::Current->LocalFolder;
    Platform::String ^szPath = dataFolder->Path + "\\frame.png";

    // save the image to file
    hr = DirectX::SaveToWICFile(*pRealImage, DirectX::WIC_FLAGS_NONE, GUID_ContainerFormatPng, szPath->Data());
}

// and the present it to the screen
MEDIA::ThrowIfFailed(m_spDX11SwapChain->Present(1, 0)); 
```

I don't have time right now to take this any further but I'm very pleased with what I have achieved so far :-))

Can you take a fresh look and update your results in comments?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:59:16.647

查看[Video Thumbnail Sample](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757933%28v=vs.10%29.aspx)和[Source Reader](http://msdn.microsoft.com/en-us/library/windows/desktop/dd940436%28v=vs.10%29.aspx)文档。

您可以在下面找到示例代码`SDK Root\Samples\multimedia\mediafoundation\VideoThumbnail`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-06T04:32:50.053

我认为 OpenCV 可以帮助你。OpenCV 提供 api 来从相机或视频文件中捕获帧。你可以在这里下载它[http://opencv.org/downloads.html](http://opencv.org/downloads.html)。以下是我用“OpenCV 2.3.1”编写的演示。

```
#include "opencv.hpp"

using namespace cv;
int main()
{
    VideoCapture cap("demo.avi");   // open a video to capture
    if (!cap.isOpened())        // check if succeeded
        return -1;

    Mat frame;
    namedWindow("Demo", CV_WINDOW_NORMAL);
    // Loop to capture frame and show on the window
    while (1) {
        cap >> frame;
        if (frame.empty())
            break;

        imshow("Demo", frame);
        if (waitKey(33) >= 0)  // pause 33ms every frame
            break;
    }

    return 0;
} 
```

# python - 在 Django 中一次更新所有模型

> ID：15711056
> 
> 赞同：18
> 
> 时间：2013-03-29T20:39:04.797
> 
> 标签：python, sql, django

我正在尝试在 Django（python）中以特定顺序一次更新所有对象的位置字段。

这就是我现在所做的，但问题是它会产生大量查询。

```
 servers = frontend_models.Server.objects.all().order_by('-vote_count')

    i = 1
    for server in servers:
        server.last_rank = i
        server.save()
        i += 1 
```

有没有办法更新

```
Model.objects.all().order_by('some_field').update(position=some_number_that_changes_for each_object) 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T21:52:24.563

你可以使用[`F()`](https://docs.djangoproject.com/en/dev/topics/db/queries/#query-expressions)表达式 from`django.db.models`来做同样的事情：

```
Model.objects.all().order_by('some_field').update(position=F(some_field)+1) 
```

这将生成单个 SQL 查询来更新所有列值，因此对数据库也很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:44:07.583

据我所知，Django 的对象关系映射系统并没有提供表达这种更新操作的方法。但是，如果您知道如何用 SQL 来表达它，那么您可以通过[自定义 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)来运行它：

```
from django.db import connection
cursor = connection.cursor()
cursor.execute('''UPDATE myapp_server ...''') 
```

不同的数据库引擎以不同的方式表达此操作。在 MySQL 中，您将运行以下查询：

```
SET @rownum=0;
UPDATE myapp_server A,
       (SELECT id, @rownum := @rownum + 1 AS rank
        FROM myapp_server
        ORDER BY vote_count DESCENDING) B
SET A.rank = B.rank
WHERE A.id = B.id 
```

在 PostgreSQL 中，我认为你会使用

```
UPDATE myapp_server A,
       (SELECT id, rownumber() AS rank
        OVER (ORDER BY vote_count DESCENDING)
        FROM myapp_server) B
SET A.rank = B.rank
WHERE A.id = B.id 
```

（但这是未经测试的，所以要小心！）。

# java - Java 修复代码中的正则表达式

> ID：15711058
> 
> 赞同：0
> 
> 时间：2013-03-29T20:39:22.333
> 
> 标签：java, regex

我需要打印**@OPOK**，但在以下代码中：

```
String s = "\"MSG1\":\"00\",\"MSG2\":\"@OPOK\",\"MSG3\":\"XXXXXX\"}";

Pattern pattern = Pattern.compile(".*\"MSG2\":\"(.+)\".*");
Matcher matcher = pattern.matcher(s);

if (matcher.find()) {
    System.out.println(matcher.group(1));
} else {
    System.out.println("Match not found");
} 
```

我得到**@OPOK","MSG3":"XXXXXX**代替，我该如何修复我的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:42:04.913

您可能需要以下内容：

```
Pattern pattern = Pattern.compile("\"MSG2\":\"([^\"]+)\""); 
```

对于您感兴趣的捕获组，这将匹配除双引号之外的任何字符。由于该组被双引号包围，这应该可以防止它在比赛中“走得太远”。

*编辑添加*：正如@bmorris591 在评论中建议的那样，您可以添加一个额外的`+`（如下所示）以使量词[具有所有格](http://www.regular-expressions.info/possessive.html)。在匹配器找不到匹配项的情况下，这可能有助于提高性能。

```
Pattern pattern = Pattern.compile("\"MSG2\":\"([^\"]++)\""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:42:09.117

你想让你的`.+`部分*不情愿*。默认情况下它是贪婪的——它会尽可能多地匹配而不阻止模式匹配。您希望它尽可能*少*地匹配，如下所示：

```
Pattern pattern = Pattern.compile(".*\"MSG2\":\"(.+?)\".*"); 
```

这`?`就是让它不情愿的原因。有关更多详细信息，请参阅[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)文档。

或者，当然你可以匹配“除了双引号之外的任何字符”，这就是 Brian 的方法。据我所知，两者都同样有效；它们之间可能存在*性能*差异（老实说，我希望 Brian 的性能更好）但是如果性能对您很重要，您应该测试这两种方法。

# html - 文本文件的 HTML Web 下载链接

> ID：15711063
> 
> 赞同：2
> 
> 时间：2013-03-29T20:39:44.247
> 
> 标签：html, download, skype

我正在使用 HTML 网络，我希望用户可以下载像 .vbs (skype bot) 这样的文件，然后我使用这样的代码：

```
<a href='skypebot.vbs' target='_blank'>download</a> 
```

我只得到那个文件文本。我怎样才能让它下载链接不上传到其他网站，如 zippyshare？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:43:44.483

> 我怎样才能让它下载链接不上传到其他网站，如 zippyshare？

您可以使用`data`链接。将文件的内容（用 编码`encodeURI()`）放入链接本身：

```
<a href='data:application/octet-stream,encodeURI(hereContentsGoes)' target='_blank'>download</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:43:12.063

该文件可能被您的浏览器识别为 vbs 类型，并试图显示它。

最简单的解决方案是压缩或压缩文件并将其作为可下载文件。

`<a href='skypebot.zip' target='_blank'>download</a>`

# c - 链接列表指针的位置（索引）问题

> ID：15711064
> 
> 赞同：1
> 
> 时间：2013-03-29T20:39:47.137
> 
> 标签：c, pointers, indexing, while-loop

```
Status ListDelete(LinkList *L, int i, int *e)
{
   int j=0;
   LinkList p=L,q;
   while(p->next && j > i-1)
   {
     p = p->next;
     j++;
   }

   if(!p->next||j>i-1) 
     return ERROR;
   q=p->next; 
   p->next=q->next;
   *e=q->data;
   free(q);
   return OK;
} 
```

代码是正确的，但我需要对指针 p 的位置变化进行一些解释。

我的问题是：
如果我想删除`(i=2)`链表中的第二个元素，那么`while()`第一次的条件应该是`(j<i-1 => 0<2-1)`，所以实际上while 只执行了一次，但是while 循环中的p 已经指向了第二个元素，所以我认为`q->next`应该指向第三个要素。

当我执行代码时，它运行良好，如果输入`i = 2`，它将删除第二个元素，但在我的理解中，它应该删除第三个元素。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:44:17.310

因为 i-1，使得 i = 1，它指向列表中的第二个元素。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:46:51.440

循环条件的第二部分告诉代码在删除之前循环必须*跳过*多少元素。当您需要删除第二个元素时，您需要跳过它前面的一个元素。一般来说，要删除第 N 个元素，需要跳过 N-1 个元素。

# java - 如果常量会阻止使用它，优化器会阻止创建字符串参数吗？

> ID：15711073
> 
> 赞同：1
> 
> 时间：2013-03-29T20:40:41.683
> 
> 标签：java, android, logging, compiler-optimization

我的问题最好举个例子。

```
 public static boolean DEBUG = false;

  public void debugLog(String tag, String message) {
    if (DEBUG)
      Log.d(tag, message);
  }

  public void randomMethod() {
    debugLog("tag string", "message string"); //Example A

    debugLog("tag string", Integer.toString(1));//Example B

    debugLog("tag string", generateString());//Example C 
  }

  public String generateString() {
    return "this string";
  } 
```

我的问题是，在任何示例中，A、B 或 C - 因为字符串最终不会被使用，优化器会删除它吗？

或者换一种方式问，做下面这样会不会更好，从而确保不会创建字符串对象？

```
 public void randomMethod() {
    if (DEBUG) debugLog("tag string", "message string"); //Example A

    if (DEBUG) debugLog("tag string", Integer.toString(1));//Example B

    if (DEBUG) debugLog("tag string", generateString());//Example C 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:16:21.787

似乎第一个片段没有删除它，但它是第二个：

```
public class TestCompiler {
    public static boolean DEBUG = false;
    private static void debug(Object o) {
        if (DEBUG) {
            System.out.println(o);
        }
    }
    public static void main(String[] args) {
        if (DEBUG) {
            System.out.println(new InnerClass());
        }
        System.out.println("now nested");
        debug(new InnerClass());
    }
    private static final class InnerClass {
        static {
            System.out.println("Innerclass initialized");
        }
    }
} 
```

对我（openjdk7）来说，这会导致：

```
now nested
Innerclass initialized 
```

意思`if (DEBUG) {...}`是去掉了，但是方法调用没有，因此设置了方法参数。

# javascript - 容器溢出时浮动表头？

> ID：15711077
> 
> 赞同：0
> 
> 时间：2013-03-29T20:41:02.207
> 
> 标签：javascript, css, prototypejs

当用户滚动到顶部时，我使用`position:fixed`在我的表格中浮动一些标题，ala 这种方法：[http ://css-tricks.com/persistent-headers/](http://css-tricks.com/persistent-headers/)

在常规页面上一切都很好，但是每当我在另一个 div 内有一张桌子或具有固定高度的东西时，`overflow:auto`它就会爆炸。

我需要做什么来不仅考虑页面范围的滚动，还考虑容器的滚动？并考虑滚动超过所述容器的“顶部”？

感谢你们可以指出我的任何方向。

这是我现有的代码：

```
var mainheader = table.rows[0];
var tableHeight = table.getHeight();
var tableScroll = table.viewportOffset();
var headerHeight = mainheader.getHeight();

// TODO: If we're scrolling a subcontainer, we need to get the offset for that too! Somehow?

// If tableHeight < 1, it means our table his hidden right now, so skip it
if (tableHeight < 1)
    continue;

// If we've scroll down past the very tip top of the table, but haven't yet scroll past the end of it, show our floating headers
if (tableScroll.top < 0 && tableHeight + tableScroll.top - headerHeight > 0)
{
    table.floatingheader.style.display = '';

    // Handle horizontal scrolling too!
    table.floatingheader.style.left = (tableScroll.left + 1) + 'px'; // 1px offset for border
}
else
    table.floatingheader.style.display = 'none'; 
```

注意：我可以访问prototype.js，但没有jQuery 或任何其他第三方库。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:53:55.987

I realize you're not using jQuery but you may want to look at this guys code on github and see how he implements it, then modify it for your purposes: [http://webpop.github.com/jquery.pin/](http://webpop.github.com/jquery.pin/)

# java - 模拟，而不是抑制，一个 java 超类构造函数（使用 PowerMockito）

> ID：15711079
> 
> 赞同：1
> 
> 时间：2013-03-29T20:41:03.850
> 
> 标签：java, unit-testing, junit, mockito, powermock

我正在寻找一种方法来模拟或以其他方式在其子构造函数的单元测试中存根父类的功能。Parent 类本身设计得很糟糕，但由于合同协议而无法触及。我们已经在使用 PowerMockito，但 PowerMock(EasyMock) 也在批准的库列表中。这是简化的代码，以及迄今为止我在单元测试工作方面的最佳尝试：

```
/**
 * The class Parent is locked
 */
public class Parent {

    private final Integer x;
    private final Integer y;

    public Parent(Integer x) {
        this.x = x;
        this.y = loadY();
    }

    private int loadY() {
        // Actual code loads a bunch of stuff from DB
        throw new RuntimeException();
    }

    protected Integer getSum() {
        return x+y;
    }
}

/**
 * This code is not locked, but Child MUST extend Parent and foo MUST be final.
 */
public class Child extends Parent{

    private final Integer foo;

    public Child(int x) {
        super(x);
        foo = getSum();
    }

    public Integer getFoo() {
        return foo;
    }
}

@RunWith(PowerMockRunner.class)
@PrepareForTest({Child.class, Parent.class})
public class ChildTest {

    @Mock
    private Parent par;

    @Test
    public void testGetFoo() throws Exception {

        MemberModifier.suppress(MemberMatcher.constructor(Parent.class, Integer.class));
        PowerMockito.whenNew(MemberMatcher.constructor(Parent.class)).withNoArguments().thenReturn(par);
        Mockito.when(par.loadY()).thenReturn(new Integer(3));
        Mockito.when(par.getSum()).thenReturn(7);

        Child child = new Child(4);

        Assert.assertEquals(new Integer(7), child.getFoo());
    }
} 
```

我能够并且愿意编辑 Child 类，只要它继续扩展 Parent 并且 foo 是最终的，但我无法以任何方式编辑 Parent 。模拟对 getSum() 的调用会更理想，因为这将允许验证该调用（此处不相关，但可能在其他情况下）。尽管如此，模拟 loadY() 或设置 child.y 的状态似乎是可以接受的，但设置 child.foo 似乎并不正确。我花了一天的大部分时间在网站和 eclipse 之间来回弹跳，试图弄清楚这一点，但到目前为止，每次运行都会导致预期的 RTE 或 NPE。有任何想法吗？

# php - 类的 Print_R 作为数组

> ID：15711080
> 
> 赞同：2
> 
> 时间：2013-03-29T20:41:04.777
> 
> 标签：php, arrayaccess, debug-print

我有一个类，它实际上对一个复杂的数组进行操作，以使操作更简单。原始数组的格式如下所示：

```
array(
    array(
        "name" =>"foo",
        "type" =>8,         //The array is NBT format and 8 stands for string
        "value" =>"somevalue"
    )
} 
```

该类将上面的数组作为构造函数：

```
class NBT_traverser implements ArrayAccess {
    function __construct(&$array) {
       $this->array = $array;
    }
} 
```

然后，这是访问成员的方式：

```
$parser = new NBT_traverser($somearray);   
echo $parser["foo"];  //"somevalue" 
```

当我`print_R`上课时，我得到了它的值列表和原始的复杂数组。像这样：

```
 object(NBT_traverser)#2 (1) { 
    ["nbt":"NBT_traverser":private]=> &array(1) {
 /*Tons of ugly array contents*/
 } 
```

相反，我想得到这样的输出`print_r`：

```
array(
    "foo" => "somevalue"
) 
```

是否有可能欺骗`print_r`这样做？当前的行为使得使用类进行调试比没有它更难。
当然，我**可以**编写自己的方法来打印它，但我想让该类的用户使用更简单。相反，我想提供`print_R`一些东西，它将打印为数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:50:10.203

`ArrayAccess`如果您正在扩展只是编写一个方法来获取您的值，那么您应该没有问题

例子

```
$random = range("A", "F");
$array = array_combine($random, $random);

$parser = new NBT_traverser($array);
echo $parser->getPrint(); 
```

输出

```
Array
(
    [A] => A
    [B] => B
    [C] => C
    [D] => D
    [E] => E
    [F] => F
) 
```

使用的类

```
class NBT_traverser implements ArrayAccess {
    private $used; // you don't want this
    protected $ugly = array(); // you don't want this
    public $error = 0202; // you don't want this
    private $array = array(); // you want this
    function __construct(&$array) {
        $this->array = $array;
    }

    function getPrint() {
        return print_r($this->array, true);
    }

    public function offsetSet($offset, $value) {
        if (is_null($offset)) {
            $this->array[] = $value;
        } else {
            $this->array[$offset] = $value;
        }
    }

    public function offsetExists($offset) {
        return isset($this->array[$offset]);
    }

    public function offsetUnset($offset) {
        unset($this->array[$offset]);
    }

    public function offsetGet($offset) {
        return isset($this->array[$offset]) ? $this->array[$offset] : null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:32:27.193

你可以在你的类中使用 __toString 函数

```
class Test
{
    private $_array = array();

    public function __toString()
    {
        return print_r($this->_array, true);
    }
} 
```

然后只是呼应你的课

```
$test = new Test();
echo $test; 
```

我认为这会按照您的意愿打印出您的数组？

```
Array
(
) 
```

# c# - 如何裁剪带有旋转矩形的图像？

> ID：15711083
> 
> 赞同：7
> 
> 时间：2013-03-29T20:41:20.383
> 
> 标签：c#, .net

我有一个 a 形式的图像`System.Drawing.Bitmap`和一个 4 点形式的矩形（`Vector2`s 被简单地转换为`PointF`s ）。

我想使用这些点来裁剪图像的一部分。我发现[这个答案](https://stackoverflow.com/a/8700371/65387)非常接近我想要的，但我不确定如何从中得到正确的矩阵。

这是我到目前为止所得到的：

```
protected static Bitmap CropImage(Bitmap src, Vector2[] rect)
{
    var width = (rect[1] - rect[0]).Length;
    var height = (rect[3] - rect[0]).Length;
    var result = new Bitmap(M2.Round(width), M2.Round(height));
    using (Graphics g = Graphics.FromImage(result))
    {
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
        using (Matrix mat = new Matrix())
        {
             // ????
        }
    }
    return result;
} 
```

如何从我的矩形中获得正确的变换矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:47:11.307

这将与链接答案中的相同，但不是：

```
mat.Translate(-rect.Location.X, -rect.Location.Y);
mat.RotateAt(angle, rect.Location); 
```

你会使用：

```
double angle = Math.Atan2(rect[1].Y - rect[0].Y, rect[1].X - rect[0].X);
mat.Translate(-rect[0].X, -rect[0].Y);
mat.RotateAt((float)angle, rect[0]); 
```

（或者类似的东西。它可能是`-angle`，或者`rect[0]`不是，`rect[1]`反之亦然`Atan2`。我不能立即检查......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:53:15.340

弄清楚了：

```
protected static Bitmap CropImage(Bitmap src, Vector2[] rect)
{
    var width = (rect[1] - rect[0]).Length;
    var height = (rect[3] - rect[0]).Length;
    var result = new Bitmap(M2.Round(width), M2.Round(height));
    using (Graphics g = Graphics.FromImage(result))
    {
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
        using (Matrix mat = new Matrix())
        {
            var rot = -Math.Atan2(rect[1].Y - rect[0].Y, rect[1].X - rect[0].X) * M2.RadToDeg;

            mat.Translate(-rect[0].X, -rect[0].Y);
            mat.RotateAt((float)rot, rect[0].ToPointF());

            g.Transform = mat;
            g.DrawImage(src, new Rectangle(0, 0, src.Width, src.Height));
        }
    }
    return result;
} 
```

# php - MySQL插入表失败

> ID：15711084
> 
> 赞同：-3
> 
> 时间：2013-03-29T20:41:22.450
> 
> 标签：php, mysql, insert

我正在开发一个两天前尝试过的实时系统，我重新设计了它，但现在帖子没有插入 MySQL 表中。有人可以帮忙吗？提前致谢。

```
$con=mysqli_connect("localhost","h26them_live","tpcadmin","h26them_live");
if (mysqli_connect_errno($con))
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }    
mysqli_query($con, "INSERT INTO posts (location, post, date, by) VALUES('$post_location', '$post_field', '$date', '$by')"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T20:43:02.867

您应该报告插入错误，但`by`它是 MySQL 中的保留字。你需要用反引号包围它。

```
INSERT INTO posts (location, post, date, `by`) 
```

您在 mysql 上使用 mysqli 很好，但是您的代码仍然容易受到攻击，因为您的查询没有参数化。

# android - 尝试在 Android 中创建文件：打开失败：EROFS（只读文件系统）

> ID：15711098
> 
> 赞同：61
> 
> 时间：2013-03-29T20:42:22.787
> 
> 标签：android, file, file-io, filesystems, android-file

这一行：

```
final FileOutputStream outputStream = new FileOutputStream(name); 
```

结果是一条`FileNotFoundException`消息，`/2ozjfFQzwv: open failed: EROFS (Read-only file system)`其中“2ozjfFQzwv”是我作为文件名传递的。

我在有和没有`WRITE_INTERNAL_STORAGE`许可的情况下都试过这个。如何创建此文件以进行写入？

或者，我只是希望能够为新活动提供图像，并且它太大而无法将其序列化。有没有比将其写入文件然后再次读取更简单的方法？这里的所有问题似乎都是关于写入 SD 卡的，我不想这样做，因为很多人没有 SD 卡插槽。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-29T20:54:53.020

> 我在有和没有 WRITE_INTERNAL_STORAGE 许可的情况下都试过这个。

Android中没有`WRITE_INTERNAL_STORAGE`权限。

> 如何创建此文件以进行写入？

如果您的应用程序以超级用户权限运行，则您不需要，除非在有根设备上。您正在尝试写入应用程序无权访问的内部存储的根目录。

请使用接受对象的`FileOutputStream`构造函数版本。`File`根据您可以写入的某个位置创建该`File`对象，例如：

*   `getFilesDir()`（打电话给你`Activity`或其他人`Context`）
*   `getExternalFilesDir()`（打电话给你`Activity`或其他人`Context`）

后者将需要`WRITE_EXTERNAL_STORAGE`作为许可。

> 有没有比将其写入文件然后再次读取更简单的方法？

你可以暂时把它放在一个静态数据成员中。

> 因为很多人没有SD卡槽

总的来说，“SD 卡插槽”是无关紧要的。99% 的 Android 设备用户将拥有外部存储设备——用户移除 SD 卡的 4 年以上设备除外。自 2010 年中以来制造的设备将外部存储作为板载闪存的一部分，而不是作为可移动媒体。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-29T21:40:25.040

尝试使用 WRITE_EXTERNAL_STORAGE 的权限，无论是否有外部卡，您都应该使用该权限。

这对我很有效：

```
path = Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_MOVIES);
File file = new File(path, "/" + fname); 
```

并将我的文件放在适当的文件夹中

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-29T20:58:30.297

[这是来自android developer](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)的简单示例。

基本上，您可以像这样在内部存储中写入文件：

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-22T21:04:49.807

添加

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
 <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

在清单中并使用与 Martin 相同的方法：

```
path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES); 
File file = new File(path, "/" + fname); 
```

有效。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-29T21:18:01.460

正如其他人所提到的，Android 上的应用程序无法将文件写入内部存储的任何文件夹，但他们自己的私有存储（位于 /data/data/PACKAGE_NAME 下）。

您应该使用 API 来获取您的应用程序允许的正确路径。

读[这个](http://developer.android.com/guide/topics/data/index.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-13T14:39:29.217

要为应用程序使用内部存储，您不需要权限，但您可能需要使用：`File directory = getApplication().getCacheDir();`来获取应用程序允许的目录。

或者：
`getCashDir();`<-- 应该可以工作
`context.getCashDir();`（如果在广播接收器中）
`getDataDir();`<--Api 24

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-27T14:51:29.670

谷歌限制了对外部 sdcard 的写入权限。从 API 19 开始，有一个称为存储访问框架的框架，它允许您设置“合同”以允许写入访问。

欲了解更多信息：

[Android - 如何使用新的存储访问框架将文件复制到外部 sd 卡](https://stackoverflow.com/questions/36023334/android-how-to-use-new-storage-access-framework-to-copy-files-to-external-sd-c)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-04T13:10:30.720

如果有人在单元/仪器测试中得到这个，请确保您调用`getFilesDir()`应用程序上下文，而不是测试上下文。即使用：

```
Context appContext = getInstrumentation().getTargetContext().getApplicationContext(); 
```

不是

```
Context appContext = InstrumentationRegistry.getContext; 
```

# php - 文件获取内容和 cURL 错误

> ID：15711102
> 
> 赞同：1
> 
> 时间：2013-03-29T20:42:52.913
> 
> 标签：php, curl, httprequest, file-get-contents

“file_get_contents”和“cURL”有问题。当我做这个时：

```
$myFile = 'http://example.com/asset_compress/assets/get/bbb.js?file%5B0%5D=myfile.js';
$a=file_get_contents( $myFile ); 
```

我收到此错误：

```
Warning (2): file_get_contents
(http://example.com/asset_compress/assets/get/bbb.js?file%5B0%5D=myfile.js)
 [function.file-get-contents]: failed to open stream: 
    HTTP request failed! HTTP/1.0 404 Not Found
   [APP/Controller/MyController.php, line 1373] 
```

然后我尝试了这样的 CURL：

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $myFile);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($curl, CURLOPT_USERAGENT, $this->userAgent);
curl_setopt($curl_handle, CURLOPT_VERBOSE, true);
curl_setopt($curl_handle, CURLOPT_AUTOREFERER, true);
$a = curl_exec($curl);
curl_close($curl); 
```

我得到这个错误：

```
404 Not Found: The resource requested could not be found on this server! 
```

但是当我写到`http://example.com/asset_compress/assets/get/bbb.js?file%5B0%5D=myfile.js`浏览器的地址栏时，我得到了完美的文件。浏览器的标题是这样的：

```
Request URL:http://example.com/asset_compress/assets/get/bbb.js?file%5B0%5D=myfile.js
Request Method:GET
Status Code:200 OK

Request Headers
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:tr,en-US;q=0.8,en;q=0.6
Cache-Control:max-age=0
Connection:keep-alive
Host:example.com
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.28 Safari/537.31

Query String Parameters
file[0]:myfile.js

Response Headers
Connection:close
Content-Length:15911
Content-Type:application/javascript; charset=UTF-8
Date:Fri, 29 Mar 2013 20:33:43 GMT
Server:Apache
X-Powered-By:PleskLin 
```

我怀疑 file_get_contents ，当我这样做时，我得到了完美的输出：

```
$d1 = file_get_contents("http://www.yahoo.com");
print_r($d1); 
```

当我尝试 cURL 时，出现 404 错误。尽管我从浏览器请求中得到了 200，但我如何才能更多地诊断我得到 404 的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:59:13.790

This being hosted on a local computer? Or else where? I was having an similar issue that my host determined to be an ISP down the line blocking my requests.

# android - 从 URL 解析 XML 到 ListView

> ID：15711104
> 
> 赞同：0
> 
> 时间：2013-03-29T20:43:01.487
> 
> 标签：android, xml, parsing, nullpointerexception, token

我在以下活动中遇到了意外的令牌错误和空指针异常，我无法找出问题所在。我正在解析以下 URL，它是一个包含临时高尔夫选手详细信息的 XML 文件。当文件中的节点较少时，我让它工作，但现在我收到导致空指针的令牌错误。谁能指出哪里出错了？

```
public class AndroidXMLParsingActivity extends ListActivity {

    // All static variables
    static final String URL = "http://dl.dropbox.com/u/90179278/helloworld.xml";
    // XML node keys
    static final String KEY_PLAYER = "player"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_NAME = "playername";
    static final String KEY_DOB = "dob";
    static final String KEY_WEIGHT = "weight";
    static final String KEY_HEIGHT = "height";
    static final String KEY_HANDED = "handed";
    static final String KEY_COUNTRY = "country";
    static final String KEY_BIO = "bio";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_PLAYER);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_DOB, parser.getValue(e, KEY_DOB));
            map.put(KEY_WEIGHT, parser.getValue(e, KEY_WEIGHT));
            map.put(KEY_HEIGHT, parser.getValue(e, KEY_HEIGHT));
            map.put(KEY_HANDED, parser.getValue(e, KEY_HANDED));
            map.put(KEY_COUNTRY, parser.getValue(e, KEY_COUNTRY));
            map.put(KEY_BIO, parser.getValue(e, KEY_BIO));
            // adding HashList to ArrayList
            menuItems.add(map);
        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_DOB, KEY_WEIGHT, KEY_HEIGHT, KEY_HANDED, KEY_COUNTRY, KEY_BIO }, new int[] {
                        R.id.name, R.id.dob, R.id.weight, R.id.height, R.id.handed, R.id.country, R.id.bio });

        setListAdapter(adapter);

    }
} 
```

输出：

03-30 11:07:48.060: E/Error:(1742): Unexpected token (position:TEXT ï»¿@1:4 in java.io.StringReader@b514c300)

03-30 11:07:48.070: D/AndroidRuntime(1742): 关闭 VM

03-30 11:07:48.070: W/dalvikvm(1742): threadid=1: 线程以未捕获的异常退出 (group=0xb4e15908)

03-30 11:07:48.090：E/AndroidRuntime（1742）：致命异常：主要

03-30 11:07:48.090: E/AndroidRuntime(1742): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.androidhive.xmlparsing/com.androidhive.xmlparsing.AndroidXMLParsingActivity}: java.lang.NullPointerException

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.app.ActivityThread.access$600(ActivityThread.java:141)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.os.Handler.dispatchMessage(Handler.java:99)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.os.Looper.loop(Looper.java:137) 03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android. app.ActivityThread.main(ActivityThread.java:5039) 03-30 11:07:48.090: E/AndroidRuntime(1742): at java.lang.reflect.Method.invokeNative(Native Method) 03-30 11:07:48.090 : E/AndroidRuntime(1742): at java.lang.reflect.Method.invoke(Method.java:511) 03-30 11:07:48.090: E/AndroidRuntime(1742): at com.android.internal.os。 ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)

03-30 11:07:48.090: E/AndroidRuntime(1742): at dalvik.system.NativeStart.main(Native Method)

03-30 11:07:48.090：E/AndroidRuntime(1742)：由：java.lang.NullPointerException 引起

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 com.androidhive.xmlparsing.AndroidXMLParsingActivity.onCreate(AndroidXMLParsingActivity.java:47)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.app.Activity.performCreate(Activity.java:5104)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)

03-30 11:07:48.090: E/AndroidRuntime(1742): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)

03-30 11:07:48.090: E/AndroidRuntime(1742): ... 11 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:52:55.987

我发现问题是文件开头出现的 BOM 或“字节顺序标记”。在记事本++中，可以通过选择编码选项并从下拉菜单中选择无BOM选项的UTF-8编码来轻松删除它。

[http://www.sitepoint.com/forums/showthread.php?592741-Byte-Order-Mark-found-in-UTF-8-File](http://www.sitepoint.com/forums/showthread.php?592741-Byte-Order-Mark-found-in-UTF-8-File)

# core-data - 获取的属性是否符合 KVO？

> ID：15711106
> 
> 赞同：2
> 
> 时间：2013-03-29T20:43:03.883
> 
> 标签：core-data, fetch, key-value-observing

我的核心数据应用程序出现了奇怪的行为。我有一个具有获取属性的实体，其结果存储在控制器的内容数组中。

我第一次运行应用程序时，控制器数组的第一个实体的结果是 NIL（而不是其他实体）。如果我重新启动应用程序，一切正常。

控制器是否真的被告知有一个新对象已添加到其数组中？如果是，为什么这么晚？你遇到过这样的异常吗？

问候，

# wordpress - Wordpress - 函数参数未传入

> ID：15711108
> 
> 赞同：0
> 
> 时间：2013-03-29T20:43:13.043
> 
> 标签：wordpress, email, hook, php

我正在尝试编写一个在发布新帖子后向我的用户发送电子邮件的功能。这是我到目前为止所拥有的：

```
require_once('db.php');

$sql="SELECT email FROM table";

$result = sqlsrv_query($sqlsrvconnection, $sql);

$emailList="";

while($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)){
    $emailList.=", ".$row['email'];
}

add_action('save_post', 'email_members');

function email_members( $post_id, $emailList )  {

    if ( !wp_is_post_revision( $post_id ) ) {

        $to      = 'example@test.com';
        $subject = 'the subject';
        $message = "email list consists of: ".$emailList;
        $headers = 'From: webmaster@example.com' . "\r\n" .
            'Reply-To: webmaster@example.com' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();

        mail($to, $subject, $message, $headers);

}

} 
```

在我的函数中，我尝试传入 $emailList 变量，但我无法用它做任何事情。我传递错了吗？挂钩到另一个 wp 操作时是否不允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:51:47.940

我发现我的函数在其他地方被调用（使用 save_post 操作）。因此，该函数无权访问 $emailList 变量。我在函数内移动了所有东西（除了 add_action()），一切都很好！

```
add_action('save_post', 'email_members');

function email_members( $post_id, $emailList )  {

    require_once('db.php');

    $sql ="SELECT email FROM table";

    $result = sqlsrv_query($sqlsrvconnection, $sql);

    $emailList="";

    while($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)){
        $emailList.=", ".$row['email'];
    }

    if ( !wp_is_post_revision( $post_id ) ) {

        $to      = 'example@test.com';
        $subject = 'the subject';
        $message = "email list consists of: ".$emailList;
        $headers = 'From: webmaster@example.com' . "\r\n" .
            'Reply-To: webmaster@example.com' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();

        mail($to, $subject, $message, $headers);

    }

} 
```

# api - Google 通讯录 API 文档发生了什么变化？

> ID：15711112
> 
> 赞同：1
> 
> 时间：2013-03-29T20:43:44.303
> 
> 标签：api, documentation

在过去两周的某个时候，Google Contacts API 的文档已经下线。它曾经位于[https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/)。

ContactsAPI 未显示在[https://developers.google.com/apis-explorer/#p/](https://developers.google.com/apis-explorer/#p/)的较新 Google API 资源管理器中。

Google 通常非常擅长宣布 API 和产品的弃用和生命周期结束日期，但我在他们的博客中找不到有关此 API 的任何内容，所以我无法判断这只是一个错误还是有意更改.

Contacts API 本身仍然可以通过[OAuth 2.0 Playground](https://developers.google.com/oauthplayground/)访问，因此它实际上并不离线。

我们可以访问上面第一个 URL 的 Google 缓存中的 API 文档，但是我们对针对未来不明朗的东西进行开发感到紧张！

有谁知道这个文档发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:23:51.747

Sbleon，这对于离线文档来说真的很奇怪。但是我在我们的应用程序中使用了这个 API，现在没有遇到任何问题 - 所以它的 API 并不是真正离线的。根据我对 Google API 的经验，即使新版本出来，它也会与旧版本高度兼容。Google Api 的唯一问题是域范围/Google Apps OAuth 2.0 在某些 API 中仍然不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:44:20.873

[Google 通讯录 v3 文档因](https://developers.google.com/google-apps/contacts/v3/)**错误 404 PAGE NOT FOUND**已第三天关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:04:04.460

我们从来没有得到任何解释，但文档已经备份到今天。终于解脱了！

# ios - 预览具有不同大小和语言样式的自动布局

> ID：15711115
> 
> 赞同：7
> 
> 时间：2013-03-29T20:43:52.093
> 
> 标签：ios, objective-c, uikit, autolayout

我已经开始在 iOS 上的 XCode 中学习新的自动布局。自动布局实际上非常整洁，但测试起来似乎很痛苦。我似乎记得在 Mac 端有一种方法可以预览界面并将其拖动到不同的大小以测试控件是否正确排列。是否有类似的 iOS 或一些工具来帮助测试您的 AutoLayout 视图？此外，切换到从右到左的东西也会很有用。我只想测试我所有的约束并确保它们是完美的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-28T00:57:14.113

要预览 Auto Layout 在不同条件下的作用，请在 Xcode 5 中执行以下操作：

1.  打开故事板。
2.  打开助理编辑器（任意数量）。
3.  在助理编辑器中，点击第四个按钮（显示手动/自动/等的那个）。
4.  选择“预览”。
5.  您现在可以使用右下角的控件进行自定义：
    *   iOS 版本（6 或 7）
    *   设备旋转（纵向或横向）
    *   设备屏幕尺寸（3.5" 或 4"）

为了模拟从右到左的语言，根据[WWDC 2012](https://developer.apple.com/videos/wwdc/2012/) Auto Layout by Example (Session 232) 视频：

*   设置以下参数：（使用诸如[this](https://stackoverflow.com/a/13138933/35690)的方法）
    *   `AppleTextDirection YES`
    *   `NSForceRightToLeftWritingDirection YES`

可以[在此处找到](http://www.objc.io/issue-3/advanced-auto-layout-toolbox.html#nsuserdefault_options)更多有助于自动布局的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T21:48:06.323

如果你有本地化的字符串，你可以去 Xcode Product 菜单然后选择 Scheme ---> Edit Scheme。在右侧的顶部（启动时传递的参数），单击 + 按钮，然后输入：-NSDoubleLocalizedStrings YES 并确保选中它旁边的复选框。这将使您所有的本地化字符串加倍，以模拟像德语这样往往有长词的语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T14:16:15.880

感谢 Apple，我们在新的 XCode 5 中进行了实时预览。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T21:41:19.870

我发现 iOS 的一个选项是在 XIB 的根视图上将状态栏设置为无。这将删除黑色状态栏并显示调整大小手柄。这样，您可以拖动框架并查看控件的行为方式。它仍然不会运行代码。另外，我还没有找到如何启用从右到左的文本。

# c - How to determine if an integer belongs in a range of integers?

> ID：15711116
> 
> 赞同：-4
> 
> 时间：2013-03-29T20:43:54.487
> 
> 标签：c, operators, range

I want to compare a value against the two ends of the range. This is how my code looks like:

```
if ( timeramount >5 && <10 )...do some stuff... 
```

So my application needs to know if `timeramount` is greater than 5 but less than 10.

Can anyone help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:54:53.133

Logical operators such as `&&`, `||` etc. take two operands. Those operands must be expressions. `< 10` is not a valid expression, as it is missing one operand ("what is less than 10?").

To express in C what in natural language you described as "if timerarount is greater than 5 but less than 10", you must be more verbose:

```
if (timeramount > 5 && timeramount < 10) {
    /* if timeramount is greater than 5 AND timeramount is less than 10 */
    ;
} 
```

I suggest you grab a good introductory book on C in order to learn the basics of the language. Kernighan & Ritchie's "The C Programming Language" is a good start but you can consult [this question](https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list).

# apache-zookeeper - 从单个 Zookeeper 服务器到集群配置

> ID：15711120
> 
> 赞同：4
> 
> 时间：2013-03-29T20:44:03.570
> 
> 标签：apache-zookeeper

我现在想要复制一台服务器并提高可用性。我的软件堆栈中的元素之一是 Zookeeper，所以在它上面进行集群配置似乎很自然。

但是，我的单台服务器上有数据，我找不到任何关于集群设置的指南。我尝试设置两个独立的实例，然后进行集群配置，但只保留了所选主服务器上的数据。

那么，如何在不丢失数据的情况下安全地从单个服务器设置转到集群设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:39:17.000

If you go from 1 server straight to 3 servers, you may lose data, as the 2 new servers are sufficient to form a quorum, and elect one of themselves as a leader, ignoring the old server, and losing all data on that machine.

If you grow your cluster from 1 to 2, when the two servers start up, then a quorum can't form without the old server being involved, and data will not be lost. When the cluster finishes starting, all data will be synced to both servers.

Then you can grow your cluster from 2 to 3, and again a quorum can't form without at least 1 server that has a copy of the database, and again when the cluster finishes starting all data will be synced to all three servers.

# c++ - OpenCV SURF extractor.compute 错误

> ID：15711122
> 
> 赞同：-4
> 
> 时间：2013-03-29T20:44:11.440
> 
> 标签：c++, opencv, surf

我使用 OpenCV 2.44 和 Visual Studio C++ 2010

当我编译这个

```
#include <opencv2/imgproc/imgproc_c.h>
#include <stdio.h>
#include <math.h>
#include <opencv/highgui.h>
#include <opencv/cv.h>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/calib3d/calib3d.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/nonfree/features2d.hpp>
#include <opencv2/legacy/legacy.hpp>
using namespace cv;

void main()
{

    Mat img1 = imread( "hh.jpg", CV_LOAD_IMAGE_GRAYSCALE );
    Mat img2 = imread( "hh.jpg", CV_LOAD_IMAGE_GRAYSCALE );

    // detecting keypoints
    FastFeatureDetector detector(15);
    vector<KeyPoint> keypoints1;
    detector.detect(img1, keypoints1);

    // computing descriptors
    SurfDescriptorExtractor extractor;
    Mat descriptors1;
    extractor.compute(img1, keypoints1, descriptors1); 
```

当我运行代码时，我在 prj.exe 中的 0x580f375b 处得到未处理的异常：0xC0000005：访问冲突读取位置 0x001f7014。错误在提取器

我正在使用这个教程[链接](http://docs.opencv.org/doc/tutorials/features2d/detection_of_planar_objects/detection_of_planar_objects.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:37:44.900

看起来您忘记了初始化非自由模块。*在使用SurfDescriptorExtractor*之前尝试调用适当的函数：

```
#include <opencv2/nonfree/nonfree.hpp>
...
cv::initModule_nonfree(); 
```

# javascript - 具有编辑功能的 JavaScript 资源规划组件/甘特图

> ID：15711126
> 
> 赞同：6
> 
> 时间：2013-03-29T20:44:22.207
> 
> 标签：javascript, html, gantt-chart

我正在寻找一个基于 JS 的资源规划组件，其中左侧有可用资源，右侧有资源负载。

![在此处输入图像描述](../Images/41cd3e5953b92ebcfb4e4f40f5fda9d7.png)

到目前为止，我只发现了一些甘特图实现，它们缺乏添加、移动和编辑功能。我怀疑是否存在这样的组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:28:53.953

我不知道任何开箱即用的解决方案，但这可能很容易实现。如果您`div`为行创建多个 s，然后`div`为资源创建 sub-s，您可以构建类似规范的东西。

1.  首先，以某种数据结构跟踪所有资源和持续时间。

    *   我可能会使用主干 JS 的模型，因为这是我用于大多数事情的模型。
2.  创建一个`render`函数，在页面上放置一组资源，并将它们布置出来，等等。

3.  创建添加/删除元素的添加/删除函数，然后调用该`render`函数重新布局元素

4.  要添加拖动，我会使用[jQuery UI Draggable](http://jqueryui.com/draggable/)，这使得拖动元素变得相当容易，并且包括在元素被拖放等时附加回调的地方。

    *   这可能需要做一些事情，因为拖动事件/资源的持续时间可能不是很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T07:25:41.503

有一个相当不错的库叫做 DHTMLX Scheduler，它还包括一个时间线视图： [http://dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml](http://dhtmlx.com/docs/products/dhtmlxScheduler/index.shtml) 您可以获得免费的 GNU GPL 版本或商业版本。可以在此处找到一个运行示例：http: [//booking.javaplanner.com/](http://booking.javaplanner.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T15:02:04.093

我找到了[http://sourceforge.net/projects/jsrmt/](http://sourceforge.net/projects/jsrmt/)但它是 GPL 许可的。我很想知道，如果你在此期间发现了其他任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-14T12:26:22.787

我发现了很多 js 甘特图工具，但它们都有超过 1000 个任务的性能问题。

这个效果最好[http://www.bryntum.com/products/gantt/](http://www.bryntum.com/products/gantt/)，但它相当昂贵。

# node.js - Express Passport (node.js) 错误处理

> ID：15711127
> 
> 赞同：71
> 
> 时间：2013-03-29T20:44:23.150
> 
> 标签：node.js, express, passport.js

我通过[这个问题查看了错误处理应该如何在节点中工作*Node.js + Express.js 应用程序的错误处理原则？*](https://stackoverflow.com/questions/7151487/error-handling-principles-for-nodejs-express-apps)，但我不确定护照在认证失败时会做什么。我有以下本地策略：

```
passport.use(new LocalStrategy({ usernameField: 'email', passwordField: 'password' },
  function(email, password, next) {

    User.find({email: UemOrUnm}, function(err, user){
      if (err) { console.log('Error > some err'); return next(err); }
      if (!user) { console.log('Error > no user'); return next('Incorrect login or password'); } 

      if (password != user.password) {
        return next(Incorrect login or password);
      }
      return next(null, user);
    });
  }
)); 
```

在我看到 'Error > some err' 控制台打印输出后，没有其他任何反应。我认为它应该在带有错误参数的下一条路径上继续，但它似乎没有这样做。这是怎么回事？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-03-29T21:13:36.513

策略实现与`passport.authenticate`验证请求和处理成功/失败结合使用。

假设您正在使用这条路线（它传递了一个电子邮件地址和一个密码）：

```
app.post('/login', passport.authenticate('local', {
  successRedirect: '/loggedin',
  failureRedirect: '/login', // see text
  failureFlash: true // optional, see text as well
}); 
```

这将调用策略中的代码，其中可能发生以下三种情况之一：

1.  尝试获取用户信息时发生内部错误（例如数据库连接已断开）；这个错误将被传递：`next(err)`; 这将由 Express 处理并生成 HTTP 500 响应；
2.  提供的凭据无效（没有提供的电子邮件地址的用户，或密码不匹配）；在这种情况下，您不会产生错误，但您将 a`false`作为用户对象传递`next(null, false)`：这将触发`failureRedirect`（如果您没有定义，则会生成 HTTP 401 Unauthorized 响应）；
3.  一切都检查出来了，你有一个有效的用户对象，所以你传递它`next(null, user)`：这将触发`successRedirect`；

如果身份验证无效（但不是内部错误），您可以将额外消息与回调一起传递：

```
next(null, false, { message : 'invalid e-mail address or password' }); 
```

如果您使用`failureFlash` *并*安装[了 connect-flash 中间件](https://github.com/jaredhanson/connect-flash)，则提供的消息将存储在会话中，并且可以轻松访问，例如在模板中使用。

**编辑：**也可以自己完全处理身份验证过程的结果（而不是 Passport 发送重定向或 401）：

```
app.post('/login', function(req, res, next) {
  passport.authenticate('local', function(err, user, info) {
    if (err) {
      return next(err); // will generate a 500 error
    }
    // Generate a JSON response reflecting authentication status
    if (! user) {
      return res.send({ success : false, message : 'authentication failed' });
    }
    // ***********************************************************************
    // "Note that when using a custom callback, it becomes the application's
    // responsibility to establish a session (by calling req.login()) and send
    // a response."
    // Source: http://passportjs.org/docs
    // ***********************************************************************
    req.login(user, loginErr => {
      if (loginErr) {
        return next(loginErr);
      }
      return res.send({ success : true, message : 'authentication succeeded' });
    });      
  })(req, res, next);
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-05-12T20:00:37.040

Christian 说的是你需要添加这个函数

```
req.login(user, function(err){
  if(err){
    return next(err);
  }
  return res.send({success:true});
}); 
```

所以整个路线是：

```
app.post('/login', function(req, res, next) {
  passport.authenticate('local', function(err, user, info) {
    if (err) {
      return next(err); // will generate a 500 error
    }
    // Generate a JSON response reflecting authentication status
    if (! user) {
      return res.send(401,{ success : false, message : 'authentication failed' });
    }
    req.login(user, function(err){
      if(err){
        return next(err);
      }
      return res.send({ success : true, message : 'authentication succeeded' });        
    });
  })(req, res, next);
}); 
```

来源： http: [//passportjs.org/guide/login/](http://www.passportjs.org/docs/login/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-20T17:44:58.100

您需要`req.logIn(function (err) { });`在回调函数中添加并执行成功重定向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T04:47:01.583

一段时间过去了，现在最正确的代码是：

```
 passport.authenticate('local', (err, user, info) => {
    if (err) {
      return next(err); // will generate a 500 error
    }
    // Generate a JSON response reflecting authentication status
    if (!user) {
      return res.status(401).send({ error: 'Authentication failed' });
    }
    req.login(user, (err) => {
      if (err) {
        return next(err);
      }
      return res.status(202).send({ error: 'Authentication succeeded' });    
    });
}); 
```

# php - 在页面加载时更改表单位置

> ID：15711128
> 
> 赞同：0
> 
> 时间：2013-03-29T20:44:27.727
> 
> 标签：php, html

好的，我知道这是可以做到的，因为我以前见过。然而，我不知道如何让它发挥作用，我到处寻找答案。

我需要的是让我的表单在页面从页面上的 3 个不同位置加载时随机更改位置。所以例如....

[这里] [这里] [这里]

可能都是表单可以加载的可能点，但每次加载时只能在 1 个点加载。我不知道你需要什么信息来帮助我。我现在就给出我的表格。

```
<form name="inputt" action="" method="post">
  <div align="center">
    <input type="submit" class="catch" value="Catch Pokemon" name="catch">
  </div>
</form> 
```

如果您需要更多，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:48:50.360

只是我最初的想法，但是您可以为 3 个不同的位置类编写 CSS，并将它们称为“位置 1”、“位置 2”、“位置 3”。如果需要，然后在 javascript（或 PHP）中加载页面时，生成 1 到 3 之间的随机数，将类添加`"position"+randomNumber`到元素中，然后它将位于其中一个位置。这类似于我用于随机背景图像的技术。

**更新**

Also, if you want to use more descriptive class names for the locations, you could keep a mapping of a number to a class name (or use something like position in an array), to relate a a random number to the class to apply.

**Code**

CSS:

```
<style>
    .position1 {
        // Whatever style you want for position 1
    }
    .position2 {
        // Whatever style you want for position 2
    }
    .position3 {
        // Whatever style you want for position 3
    }
</style> 
```

JS:

```
$(document).ready( function () {
    var randomIndex = Math.floor(Math.random()*3)+1; //3 is the number of options you have; +1 makes the range 1 - 3 instead of 0 - 2
    $('#my-form').addClass('position'+randomIndex); //Adds the new class the element with id = 'my-form'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:48:10.437

如果您的意思是“加载”页面刷新，那么您将不得不在 cookie 或其他机制中保留表单的先前位置。根据表单的最后一个位置，您可以决定下一个位置。

如果基于 ajax 调用重新加载表单，那么我建议使用 var 来存储表单的上一个位置，并通过检查 var 的值使下一个位置与上一个位置不同。如果每次表单加载位置应该是唯一的，而不是使用数组来存储以前使用的显示位置。

HTH。

# angularjs - Angular 指令和动态模板：控制器逻辑在哪里？

> ID：15711129
> 
> 赞同：0
> 
> 时间：2013-03-29T20:44:35.223
> 
> 标签：angularjs, angularjs-directive

情况如下：我的实体具有许多不同的属性：标量、数组、对其他实体的引用等。每种属性类型可以根据操作（创建、编辑属性定义、编辑属性值、视图）以不同方式显示。每个属性都被实体平等对待，通常通过迭代属性数组和创建通用属性指令来呈现。

property 指令检查链接函数中的属性类型和所需的操作，获取适当的模板并编译它。这是一些伪代码：

```
myModule.directives('property', function() {
  return function(scope, element, attributes) {
    var template = fetchTemplate(scope.propertyType, attributes.action);
    element.html($compile(template)(scope));
  }
} 
```

我应该把控制器逻辑放在哪里？目前，我为模板中的每个属性定义了一个专用控制器，`ng-controller`并将该控制器放入应用程序的控制器文件中。然而，我觉得逻辑应该进入指令本身。这里有一个问题：我不能使用指令的控制器功能，因为那时模板还没有准备好。我应该在获取模板的同一个链接函数中处理不同属性类型的所有逻辑吗？或者我应该为每个属性定义指令，然后在属性模板中声明这些指令？（这似乎根本不正确，因为指令加载了一个模板，该模板声明了另一个指令来执行控制器的工作）。

使用动态模板实现这一目标的角度方式是什么？

# c# - 有没有办法制定更清晰的规则来阻止 ref & out 参数？

> ID：15711131
> 
> 赞同：1
> 
> 时间：2013-03-29T20:44:38.427
> 
> 标签：c#, visual-studio, resharper, structural-search

我*认为*`ref`&参数会`out`损害代码的可读性。在大多数情况下，可以使用泛型和可为空的类型替换它们。

当有人试图定义一个具有 ref 或 out 参数的函数时，我想让 resharper 发出警告。但是，我所能找到的只是一种重构声明为使用 out 参数的方法的方法。似乎没有任何现有的检查或方法来编写针对 ref 和 out 参数的自定义模式。

这是 out 参数的常见用法：

```
int i;
if(!int.TryParse(str, out i))
{
    i = -1;
} 
```

将其与此进行比较：

```
var i = str.TryParse<int>() ?? -1; 
```

TryParse 只是字符串的扩展方法。我有一个自定义的 resharper 规则，它强调任何 ValueType.TryParse() 调用。*请注意，现在可以将字符串解析为 linq 表达式的一部分。*

```
T? TryParse<T>(this string str) 
{
   //magic
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:37:14.697

令我惊讶的是，以下自定义模式实际上有效：

```
$type$ $X2$($pb$, ref $pt$ $i$, $pa$)
{
$stmts$;
} 
```

在哪里

X2 是标识符
i 是标识符
type 是对象的类型或派生的
stmts 是任意数量的语句
pt 是任意类型的对象或派生
的 pa 是任意数量的参数
pb 是任意数量的参数

`public int X(ref int y)`这也匹配`private int X2(string j, ref int i, DateTime k)`。

我还没有找到匹配方法的`void`方法。

这适用于 Visual Studio 2012 上的 ReSharper 7.1.1。

# c++ - C++析构函数，动态分配

> ID：15711138
> 
> 赞同：-1
> 
> 时间：2013-03-29T20:45:09.293
> 
> 标签：c++, constructor, operator-overloading, destructor, rule-of-three

由于缺少析构函数，我最近遇到了一些错误（bad_alloc）。

我目前有两个类，以这种方式设置：

```
class ObjOne {
friend class ObjTwo;
public:                  //constructors and some other random methods
    ObjOne(int n) {
    }

    ObjOne() {
    }

private:
    int currSize;
    int size;
    int *jon;
};

 class ObjTwo {
 public:                       //constructors and some other methods
     ObjTwo(ObjOne, int n) {}  //
     ObjTwo() {}
     ObjTwo(const ObjTwo &source) {    //copy constructor
        num = source.num;
        x = source.x;
        myObjOne=source.myObjOne;
     }
     ~ObjTwo() {                          //destructor
           delete &num;
           delete &x;
           delete &myObjOne;
      }

private:
    ObjOne myObjOne;
    int num, x;
}; 
```

这是我的运算符 = ObjTwo

```
ObjTwo& ObjTwo::operator=(const ObjTwo& other) {
    num = source.num;
    x = source.x;
    myObjOne=source.myObjOne;
    return *this;
} 
```

首先，我的假设是（如果不正确，请更正这些）：

ObjOne 不需要析构函数，因为它只是原始类型，编译器何时会使用默认析构函数来清理它。ObjTwo 确实需要一个析构函数，因为它包含 ObjOne ObjTwo 析构函数需要从 x、num 和 myObjOne 释放内存。

我已经在析构函数上做了一些尝试，但是我仍然遇到了 bad_alloc 错误（在使用巨大的循环等进行测试时）或其他错误（当前的错误在调用析构函数时会崩溃）。

感谢任何关于我做错的指导

编辑：当我简单地将它放在一个循环中时，我抛出了一个 bad_alloc 异常：

```
ObjTwo b(//some parameters);
ObjTwo a(//some parameters);
for (int i=0; i<20000000; i+) {
    bool x = (a == b);
} 
```

这是重载的 == 运算符

```
bool ObjTwo::operator==(const ObjTwo& other) {

ObjTwo temp = other;

for(int i=myObjOne.x; i>=0; i--) {
    if(myObjOne.get(i)!=temp.myObjOne.get(i)) {
        return false;
    }
}
return true;
} 
```

在阅读了一些错误之后，它似乎是由于内存不足引起的；我无法正常工作的析构函数会导致。这里可能是什么问题？

get 方法只返回 jon[i];

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:48:33.527

您不需要任何使用`delete`. 你应该*只* `delete`使用你以前分配的东西`new`。

在`ObjTwo`中，成员`myObjOne`、`num`和`x`绝对不应该是`delete`d。事实上，你永远不应该获取成员的地址和`delete`它。当成员所属的对象被销毁时，成员会自动销毁。

例如，考虑有一个这样定义的成员：

```
int* p; 
```

这`p`是一个指向`int`. 当它所属的对象被销毁时，指针本身也将被销毁。然而，想象一下在构造函数中你`int`像这样动态分配一个对象：

```
p = new int(); 
```

现在，由于`new`动态分配对象，您将需要 . 指向`delete`的对象`p`。您应该在析构函数中使用`delete p;`. 请注意，这不是破坏`p`，而是破坏它指出的对象。由于`p`是成员，因此您不应手动销毁它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:50:06.750

`ObjOne`可能需要一个析构函数。这不是关于原始类型，而是关于动态分配的内存（指针）之类的东西。您有一个`int*`成员，它可能是动态分配的，或者至少是指向动态内存的指针。所以你需要在这个上使用`delete`或`delete[]`。
你在做什么`~ObjectTwo`是致命的！您正在尝试从堆栈中删除内存-> 未定义的行为，但大多数情况下会崩溃。你所有的对象/变量都是堆栈分配的，所以你不能删除它们......

# zend-framework2 - 布局中的图像滑块

> ID：15711141
> 
> 赞同：0
> 
> 时间：2013-03-29T20:45:19.347
> 
> 标签：zend-framework2

我需要开发将在布局中的图像滑块，但我是 zf2 的初学者。有什么方法可以从数据库加载图像 src？我知道如何在 onBootstrap() 中设置变量，唯一的问题是连接数据库并通过我的 tableGateway 中的 fetchAll() 检索数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:03:10.797

关于您的图像滑块，我认为它将在 jquery, bootstrap 中？所以你只需要从你的数据库中打印结果。例如： http: [//framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html#quickstart](http://framework.zend.com/manual/2.0/en/modules/zend.db.result-set.html#quickstart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-12T02:32:35.893

您可以使用内置的 zf2 模块：-

```
https://packagist.org/packages/ledsinclouds/leds-js-slider 
```

# jquery - jQuery：使用 .find() 按类动态选择元素

> ID：15711145
> 
> 赞同：1
> 
> 时间：2013-03-29T20:45:25.510
> 
> 标签：jquery, jquery-selectors

我正在处理一个包含许多部分的表格。每个部分都有一个单选按钮，用于指示用户想要使用的单位（磅/盎司与公斤等）。当他们点击一个单元时，我想隐藏（）同一部分中的所有输入，然后显示（）相关的输入。

我无法让它工作。我想我以某种方式误解了 find() 函数，因为它没有选择任何元素。

```
var show_hide_units = function (selectedUnitElement) {
    $element = $(selectedUnitElement);
    unit_class = $element.attr("class");
    $section = $($element.parents('.measurement'));
    $inputs = $($section.find('.inputs *'));
    $inputs.hide();
    $inputs.find('.' + unit_class).show();
}; 
```

这是一个显示更多上下文的小提琴：http: [//jsfiddle.net/32Q9t/](http://jsfiddle.net/32Q9t/)

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:56:53.680

[http://api.jquery.com/find/](http://api.jquery.com/find/)：

> .find(selector) 描述：获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

所以只是`$('.youClass')`用来匹配目标元素。

```
var show_hide_units = function (selectedUnitElement) {
    var targetClass = $(selectedUnitElement).attr('class');
    $('.inputs > *').hide();
    $('.' + targetClass).show();
}; 
```

你用你的分叉小提琴去那里：http: [//jsfiddle.net/BE8ZV/](http://jsfiddle.net/BE8ZV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:55:14.077

你知道如何使用 JavaScript 调试器吗？这才是你问题的真正答案。以下是如何开始：在您的 fiddle 中，在函数`debugger;`的开头插入一条语句`show_hide_units()`，就像在这个[更新的 fiddle](http://jsfiddle.net/geary/32Q9t/3/)中一样。我还对您的代码进行了一些小改动，添加了缺失`var`的声明，并删除了两行的冗余`$()`包装器。（`.parents()`or的返回值`.find()`已经是一个 jQuery 对象。）

我没有做的是修复错误。现在是如何开始：在 Chrome 中加载该页面并打开开发者工具。然后单击您的一个单选按钮，它将在该`debugger;`语句上停止。从那里您可以通过将鼠标悬停在变量上来检查变量，单步执行代码，并执行各种有用的操作。在那里闲逛一会儿，您应该会找到错误，或者如果没有，请报告您在调试器中发现的内容，我们可以再解决一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:59:21.523

如果您选择隐藏所有`'.inputs *'`元素（这根本不是最简单的解决方案），那么您必须显示更多输入，因为隐藏中“可见”的元素并不真正可见：

```
$inputs.parent().find('.' + unit_class+', .' + unit_class+' *').show(); 
```

[示范](http://jsfiddle.net/C8Mzy/)

一个更简单的解决方案是仅隐藏/显示一个级别的元素：

```
$('.inputs > *').hide();
$('.inputs > .'+unit_class).show(); 
```

[示范](http://jsfiddle.net/jRsHK/)

# java - 使用java中的数组打印水平和垂直图中的数字图

> ID：15711146
> 
> 赞同：1
> 
> 时间：2013-03-29T20:45:29.373
> 
> 标签：java, arrays

```
import java.util.Scanner;

public class Assignment5 {
  public static void main(String[] args) {
    Scanner scan = new Scanner(System.in);
    int a;

    System.out.println("Please enter a number between 1 and 9:");
    int[] graph = new int[10];
    for(int i = 0; i < 10; ++i){
      a = scan.nextInt();
      graph[i] = a;
    }
  }

  // this is the method I'm required to use for 
  // this array assignment

  public static void printVertical(int[] graph){
    for(int i = 0; i < graph.length; i++){
      for(int j = 0; j < graph[i]; j++){
        System.out.print(" " + graph[i]);
      }
      System.out.println();
    }
  }

  // this is what I've got for the horizontal method

  // I took the for loop and nested for loop from the vertical.
  // I'm stuck on changing the variable to flip the graph -90 degrees

  public static void printHorizontal(int[] graph){
    for(int i = 0; i < graph.length; i++){
      for(int h = 0; h < graph[i]; h++){
        System.out.print(" " + graph[i]);
      }
      System.out.println();
    }
  }

  public static int calculateTotal(int[] graph){
    int sum = 0;
    for( int num : graph ){
      sum = sum + num;
    }
    System.out.print("The total is: " + sum);
    return sum;
  }
} 
```

我在方法中的 for 循环`printVertical`没有正确返回图表。

我究竟做错了什么？

输出需要如下所示：

```
 Sample output:
    2 4 6 8 9 8 6 4 3 2
    ---- Vertical Graph ----
    2 2
    4 4 4 4
    6 6 6 6 6 6
    8 8 8 8 8 8 8 8
    9 9 9 9 9 9 9 9 9
    8 8 8 8 8 8 8 8
    6 6 6 6 6 6
    4 4 4 4
    3 3 3
    2 2

    ---- Horizontal Graph ----

            9
          8 9 8
          8 9 8
        6 8 9 8 6
        6 8 9 8 6
      4 6 8 9 8 6 4 
      4 6 8 9 8 6 4
    2 4 6 8 9 8 6 4 2

    The total is: 52
    2 4 6 8 9 8 6 4 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:51:33.740

考虑下面给出的代码。它可能会解决您的问题..

```
import java.util.Scanner;
public class Assignment5 {
public static void main(String[] args) {

    Scanner scan = new Scanner(System.in);

    int a;
    System.out.println("Please enter a number between 1 and 9:");
    int[] graph = new int[10];
    for(int i = 0; i < 10; ++i){
        a = scan.nextInt();
        graph[i] = a;
    }
    System.out.println("----------Vertical Graph-------------");
    printVerticalGraph(graph);
    System.out.println("----------Horizontal Graph-------------");
    printHorizontalGraph(graph);
}
    public static void printVerticalGraph(int[] graph)
    {
        for (int i = 0 ; i < graph.length; i++)
        {
            for (int j = 0 ; j < graph[i] ; j++)
            {
                System.out.print(graph[i]+" ");
            }
            System.out.println();
        }
    }
    public static void printHorizontalGraph(int[] graph)
    {
        for (int i = 0 ; i < graph.length; i++)
        {
            for (int j = 0 ; j < graph.length; j++ )
            {
                if (i > 10 - graph[j])
                {
                    System.out.print(graph[j]);
                }
                else
                    System.out.print( " ");
                System.out.print(" ");
            }
            System.out.print("\n");
        }
    }
} 
```

这是示例输出..

```
Please enter a number between 1 and 9:
2
4
6
8
9
8
6
4
3
2
----------Vertical Graph-------------
2 2
4 4 4 4
6 6 6 6 6 6
8 8 8 8 8 8 8 8
9 9 9 9 9 9 9 9 9
8 8 8 8 8 8 8 8
6 6 6 6 6 6
4 4 4 4
3 3 3
2 2
----------Horizontal Graph-------------

        9
      8 9 8
      8 9 8
    6 8 9 8 6
    6 8 9 8 6
  4 6 8 9 8 6 4
  4 6 8 9 8 6 4 3
2 4 6 8 9 8 6 4 3 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-03T08:05:53.753

```
package Kashish;

public class arrayseries1 {

  public static void main(String[] args) {

    int arr[]={2,5,4,1,6,9};

    System.out.println("--Horizontal--");

    for (int i=0;i<arr.length;i++)
    {
        int j=arr[i];
        for(int k=0;k<j;k++)
        {
            System.out.print(j);
        }
        System.out.print("\n");
    }
    System.out.println("--Vertical--");
    int max=0;                       /// take the max element
    for(int i=0;i<arr.length;i++)    ///to find max
    {
        if(arr[i]>max)
        {
            max=arr[i];
        }
    }
    int x=max;

    for(int i=0;i<x;i++)
    {
        //int j=arr[i];
        for(int j=0;j<arr.length;j++)
        {
            int k=max-arr[j];
            if(k>0)
                System.out.print(" ");   
            else 
                System.out.print(arr[j]);
            System.out.print(" ");
        }System.out.print("\n");
        max--;
    }
  }
} 
```

# c++ - 选择要在函数中作用的数组，而无需为每个数组副本提供函数版本

> ID：15711148
> 
> 赞同：0
> 
> 时间：2013-03-29T20:45:43.927
> 
> 标签：c++, arrays, big-o, time-complexity

我正在尝试将 minimax 类型算法应用于 Reversi/Othello 类型的游戏 - 我发现的问题是每个 1/2 层都需要自己的“假”游戏板进行测试。

因此看起来，由于数组不能作为参数传递，我要么需要一个具有 64 个参数的函数和每个 1/2 层的数组，要么我需要为每个层手动复制函数和数组的代码（即 checkMovePly1， checkMovePly2 等），或在本地创建数组（此时 AI 采取行动将导致每回合生成和创建 64^(2*ply) 个数组，这看起来可能运行得有些慢）。

如果我能解决数组问题，这似乎应该适用于几层，因为它只会是 O(64^(2*ply)) 的时间复杂度，尽管取决于可能是 64^(2 *ply) 数组的创建和销毁。

知道如何解决多阵列问题，这是一种合理的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:49:05.080

C++ 提供了比数组更受欢迎的各种容器。在这种情况下，我建议使用`std::array`. 如果你没有`std::array`， an`std::vector`也可以。

```
void foobar(std::array<int, 64> board); 
```

此函数将复制按值传入的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:43:56.843

第一个数组可以作为参数传递，但调用的函数将直接在原始数组上操作，而不是它自己的副本（注意）。

```
void foo(int[8][8] board); 
```

其次，标准（或自定义，如果需要）容器类使用起来更安全，并且在需要时更容易复制。如果没有一些小技巧，本机数组不会轻易复制，此时使用容器类应该会使您的代码更易于阅读。

第三，这个问题看起来像是递归算法的经典主题，它可以允许所有工作在同一个数组（或容器类）实例上完成，从而保持您的资源需求 O(1)：固定游戏板大小和已知最大递归深度。

# list - jar tvf 输出差异

> ID：15711149
> 
> 赞同：0
> 
> 时间：2013-03-29T20:45:45.903
> 
> 标签：list, jar

什么会导致 jar tvf 输出出现以下差异？

```
bash-3.00$ jar tvf DC_Aging.jar
     0 Wed May 16 14:17:48 CDT 2012 META-INF/
    71 Wed May 16 14:17:48 CDT 2012 META-INF/MANIFEST.MF
     0 Wed May 16 14:17:30 CDT 2012 com/
     0 Wed May 16 14:17:30 CDT 2012 com/perf/
     0 Wed May 16 14:17:30 CDT 2012 com/perf/sess/
     0 Wed May 16 14:17:30 CDT 2012 com/perf/sess/reports/
     0 Wed May 16 14:17:30 CDT 2012 com/perf/sess/reports/
     0 Wed May 16 14:17:30 CDT 2012 com/perf/sess/reports/business/
     0 Wed May 16 14:17:30 CDT 2012 com/perf/sess/reports/business/rules/
     0 Wed May 16 14:17:30 CDT 2012 com/perf/sess/reports/business/rules/ed/
22139 Wed May 16 14:17:36 CDT 2012 com/perf/sess/reports/business/rules/ed/DateComparisons.class 
```

这是在同一控制台上使用相同 java 版本的相同 jar 文件产生以下输出。唯一的区别是运行 jar 命令的日期。这打破了我们的脚本之一。

```
bash-3.00$ jar tvf DC_Aging.jar
    25 Fri Mar 29 09:56:14 CDT 2013 META-INF/MANIFEST.MF
25476 Fri Mar 29 09:52:54 CDT 2013 com/perf/sess/reports/business/rules/ed/DateComparisons.class 
```

# extjs - Sencha Ext JS Architect - 如何添加插件

> ID：15711153
> 
> 赞同：0
> 
> 时间：2013-03-29T20:46:17.460
> 
> 标签：extjs, sencha-architect

我有一个带有工具栏的基本网格，但想为工具栏使用插件。手动编写代码时，我可以正常工作，但我希望能够使用 Architect 2。这是一个片段......

```
{
    xtype: 'gridpanel',
    title: 'My Grid Panel',
    columns: [
        {
            xtype: 'gridcolumn',
            dataIndex: 'string',
            text: 'String'
        },
        {
            xtype: 'numbercolumn',
            dataIndex: 'number',
            text: 'Number'
        }
    ],
    dockedItems: [
        {
            xtype: 'pagingtoolbar',
            dock: 'bottom',
            width: 360,
            displayInfo: true,
            plugins: new Ext.ux.ProgressBarPager()
        }
    ]
} 
```

`plugins: new Ext.ux.ProgressBarPager()`是我无法使用 Architect 2 添加的行。我在配置面板的任何地方都找不到 plugins 属性。关于如何添加插件的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:00:22.770

我认为您可以做的是覆盖您的`pagingtoolbar`并执行以下操作：

```
Ext.define('MyApp.view.override.ProgressBarPager.PagingToolbar', {
requires: 'MyApp.view.ProgressBarPager.PagingToolbar'
}, function() {
    Ext.override(MyApp.view.ProgressBarPager.PagingToolbar, {
        initComponent: function () {
            this.plugins = [new Ext.ux.ProgressBarPager()];
            this.callParent(arguments);
        }
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-23T16:34:10.413

我知道问题是针对早期版本的 SA。在 SA 4.2.3 中，您可以通过在配置上方的编辑器中键入属性名称并按 Enter 来添加未出现在配置列表中的组件属性。然后，您可以将属性值的类型更改为适合您需要的类型。使用此方法，您可以添加 plugins 属性，然后您可以将其设为 Array 类型，然后编辑该值，您可以输入类似`[{ptype: 'datatip'}]`或在您的情况下的内容`[new Ext.ux.ProgressBarPager()]`

# javascript - 如何在 jQuery 中比较这些字符串？

> ID：15711154
> 
> 赞同：0
> 
> 时间：2013-03-29T20:46:24.267
> 
> 标签：javascript, jquery, html, xml

该程序现在读取 xml 代码，获取股票缩写，按字母顺序对它们进行排序，然后将它们打印到 uo 列表中。如果将鼠标悬停在缩写上，颜色将变为红色。我的目标是当您将鼠标悬停在缩写上时，它将显示该公司的 xml 数据中的所有数据。我尝试使用 if 语句来说明符号（xml 文件中的缩写）是否等同于名称（数组中的缩写），然后它会为它打印出所有垃圾。打印所有内容的行以我想要的格式正常工作。我只需要处理 if 语句。

我发现我无法将两个变量与 == 进行比较。请记住，符号也是一个属性，名称来自存储符号的数组。我也试着说 - if(checkPassword(name, symbol)) - 并像我在下面的 jQuery 代码中所做的那样将其全部打印出来，但这不起作用。

我在我正在处理的 if 语句旁边放了一条评论，它位于 jQuery 的底部。

HTML：

```
 <body onload="onBodyLoad()">
  <div id="stockList"></div>
  <br />
  <br />
  <br />
  <div id="stockInfo"></div> 
```

jQuery：

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "stocks.xml",
        dataType: "xml",
        success: function (xml) {
            var companyNames = [];
            $(xml).find('Stock').each(function () {
                var symbol = $(this).attr('symbol');
                companyNames.push(symbol);
            });

            companyNames.sort();
            $.each(companyNames, function (index, name) {
                $('#stockList').append('<div><li>' + name + '</li></div>');

            });

            function CheckPassword(val, val2) {

                var strInput = val.value;
                var strInput2 = val2.value;

                if (strInput != strInput2) {
                    val2.focus();
                    val2.select();
                    return false;
                } else
                    return true;

            }

            $(xml).find('Stock').each(function () {
                var company = $(this).find('Company').text();
                var symbol = $(this).attr('symbol');                  
                var market = $(this).find('Market').text();
                var sector = $(this).find('Sector').text();
                var price = $(this).find('Price').text();

                var low = $(this).find('Low').text();
                var high = $(this).find('High').text();

                var amount = $(this).find('Amount').text();
                var yieldx = $(this).find('Yield').text();
                var frequency = $(this).find('Frequency').text();

                $('*').mouseover(function () {
                    $('#stockList li').text($(this).attr('comparison'));
                });

                $('#stockList li').hover(
                function () {
                    $(this).css({ color: 'red' }); //mouseover
                    if (name == symbol) {  // THIS IS THE STATEMENT YOU'RE LOOKING FOR PROGRAMMING GODS

                            $('#stockInfo').append('<div><ol><li>' + "Company = " + company + '</li><br/><li>' + "Market = " + market + '</li><br/><li>' + "Sector = " + sector + '</li><br/><li>' + "Price = " + price + '</li><br/><li>' + "Year Range = " + low + " " + high + '</li></ol><br/>');
                        }

                },
                function () {
                    $(this).css({ color: 'navy' }); // mouseout
                    $('#stockInfo').empty();
                }

            );

            });

        }
    });
}); 
```

XML 示例：

```
<Products>
<Stock symbol="GOOG">
    <Company>Google</Company>
    <Market>NASDAQ</Market>
    <Sector>Software</Sector>
    <Price>$487.80</Price>
    <YearRange>
        <Low>$331.55</Low>
        <High>$488.50</High>
    </YearRange>
    <Dividend available="false"/>
</Stock>
<Stock symbol="BA">
    <Company>Boeing Company</Company>
    <Market>NYSE</Market>
    <Sector>Aerospace</Sector>
    <Price>$79.05</Price>
    <YearRange>
        <Low>$63.70</Low>
        <High>$89.58</High>
    </YearRange>
    <Dividend available="true">
        <Amount>$1.20</Amount>
        <Yield>$1.50</Yield>
        <Frequency>QTR</Frequency>
    </Dividend>
</Stock>
<Stock symbol="MO">
    <Company>Altria Group</Company>
    <Market>NYSE</Market>
    <Sector>Comsumables</Sector>
    <Price>$81.70</Price>
    <YearRange>
        <Low>$68.36</Low>
        <High>$85.00</High>
    </YearRange>
    <Dividend available="true">
        <Amount>$3.44</Amount>
        <Yield>$4.2</Yield>
        <Frequency>ANNUAL</Frequency>
    </Dividend>
</Stock>
</Products> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:14:00.920

```
 var companyData = [];
        $(xml).find('Stock').each(function () {
            var symbol = $(this).attr('symbol');
            companyNames.push(symbol);
            companyData[symbol] = {
                company: $(this).find('Company').text(),
                symbol: $(this).attr('symbol'),                
                market: $(this).find('Market').text(),
                sector: $(this).find('Sector').text(),
                price: $(this).find('Price').text(),
                low: $(this).find('Low').text(),
                high: $(this).find('High').text(),
                amount: $(this).find('Amount').text(),
                yieldx: $(this).find('Yield').text(),
                frequency: $(this).find('Frequency').text()
            };
        });

        ...

        $("#stocklist li").hover(function() {
            $(this).css({ color: 'red' }); //mouseover
            var info = companyData[$(this).text()];
            $('#stockInfo').append('<div><ol><li>' + "Company = " + info.company + '</li><br/><li>' + "Market = " + info.market + '</li><br/><li>' + "Sector = " + info.sector + '</li><br/><li>' + "Price = " + info.price + '</li><br/><li>' + "Year Range = " + info.low + " " + info.high + '</li></ol><br/>');
        }); 
```

# javascript - 在 DOM 初始加载后监听元素渲染

> ID：15711156
> 
> 赞同：0
> 
> 时间：2013-03-29T20:46:32.373
> 
> 标签：javascript, jquery, dom, dom-manipulation

无论如何要监听加载后将自己添加到 DOM 的元素吗？目前，我有一堆使用 DataTables 的表，还有一堆其他元素，我想在何时以及是否发现我正在寻找的元素类型“出现”在页面上时进行操作。看到我正在尝试做的事情只适用于加载时页面上当前的元素，而不是加载后的元素，例如当前正在播放的许多元素。

最终，我目前正在寻找一种避免返回整个代码库的方法，只是为了仅在页面上找到某些内容但在加载之后才发生某些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T20:51:13.763

没有跨浏览器兼容的“添加到 dom 的元素”类型的事件，并且通常不鼓励针对特定浏览器存在的事件，因为它们往往会导致比解决的问题更多的问题。

通常 DOM 中不存在的元素的问题是它们错过了事件绑定。jQuery 有很棒的事件委托，可用于将事件绑定到容器，以便当事件冒泡到容器时，在接收事件的元素的上下文中触发回调。

例如，您可以使用以下方式绑定事件：

```
$('a').click(doStuff); 
```

但这不适用于任何新链接，而是您可以使用以下内容：

```
$('#some-container').on('click', 'a', doStuff); 
```

这将拦截`#some-container`元素中所有链接上的所有点击事件，无论它们何时添加到页面。

# javascript - IE8 中不显示叠加层

> ID：15711157
> 
> 赞同：0
> 
> 时间：2013-03-29T20:46:37.137
> 
> 标签：javascript, css, internet-explorer-8, internet-explorer-9

我正在使用它在 css 中的可见性来显示和隐藏一个 div。它在除 IE8 和 9 之外的所有其他浏览器中都能正常工作，我完全可以弄清楚原因。看到这里，谁能给出答案？

HTML

```
<div id="action-panel">
            Show mne
        </div> 
```

CSS

```
#action-panel {
    position : fixed;
    height: 80%;
    width: 300px;
    background-color: #EEEEEE;
    right: 10px;
    visibility:hidden;
    display: block;
    top: 10%;
    overflow:scroll;
    padding: 10px;
    z-index: 1000;
    border-color: #000;
    border-width: 1px;
    border-style: groove;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
} 
```

和 javascript

```
$('#action-panel').css('visibility', 'visible'); 
```

似乎它应该工作，除非我错过了一些东西

# c - 在对文件调用 exec() 之前检测到挂载点没有设置 noexec？

> ID：15711158
> 
> 赞同：1
> 
> 时间：2013-03-29T20:46:41.070
> 
> 标签：c, linux, mount, stat, fcntl

我的程序在已写入用户指定目录的二进制文件上调用 exec()。如果该目录位于使用“noexec”挂载的树中，则 exec() 将失败并显示 EACCES。

我不想让 exec() 失败，而是希望能够确定一个目录是否使用 noexec 挂载，但 fcntl()、stat() 或 mount() 都没有返回此信息（通过阅读手册页）。查看 exec 系统调用的内核源代码，看起来此信息存储在 inode 的元数据中，我没有看到任何系统调用返回此信息。

```
 673     struct nameidata nd;
 (..)
 677     err = path_lookup_open(AT_FDCWD, name, LOOKUP_FOLLOW, &nd, FMODE_READ|FMODE_EXEC);
 678     file = ERR_PTR(err);
 (..)
 682         file = ERR_PTR(-EACCES);
 683         if (!(nd.mnt->mnt_flags & MNT_NOEXEC) &&
 684             S_ISREG(inode->i_mode)) { 
```

有谁知道这样做的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:16:24.410

你可以使用[statvfs](http://man7.org/linux/man-pages/man3/fstatvfs.3.html) ()

```
struct statvfs st;
inr rc = statvfs("/mnt/foo", &st);
if (rc == -1)
   error();
if (st.f_flag & ST_NOEXEC) {
 //no exec flags was set
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:51:26.417

您是否考虑过阅读`/proc/mounts`然后确定您的程序二进制文件所在的文件系统，也许使用[statfs(2)](http://man7.org/linux/man-pages/man2/fstatfs.2.html)和/或[realpath(3)](http://man7.org/linux/man-pages/man3/realpath.3.html)？

但是您始终应该关心并处理[execve(2)](http://man7.org/linux/man-pages/man2/execve.2.html)和相关`exec`函数的失败，这些失败可能由于多种原因而失败。

^(失败的方法有很多`execve`，其中一些不容易重现；同样对于失败`fork`或任何其他系统调用。)

我会离开并报告`EACCESS`错误 (of `execve`)，或者，如果您绝对想捕获并解释更多mount 选项，请在此类 失败后`noexec`执行更复杂的事情（`statfs`和/或`realpath`扫描`/proc/mounts`or ）。`/proc/self/mounts``EACCESS`

在 -ing之前测试二进制路径没有多大意义`execve`......只是在......之后报告错误

# java - 篡改数据post参数证明NULL指针案例（JAVA JSP）

> ID：15711162
> 
> 赞同：0
> 
> 时间：2013-03-29T20:47:11.553
> 
> 标签：java, jsp, tampering, post-parameter

生产中发生 NULL 指针异常我试图在本地系统中复制运行时异常。我其实是在使用火狐篡改工具截取post参数。我在篡改窗口中输入了 NULL 值并将请求提交给服务器端代码。

Post 参数是 ccNumber 、 ccYear 和 ccMonth。所有这些变量都在 JSP 页面中定义。这是在很久以前开发的遗留代码，所以你会在 jsp 中看到大量的 scriptlet 代码

在用户提交信用卡号、月份和年份字段后的网页页面上，我们使用 AJAX 将参数发布到下面的 JSP 页面。我实际上是使用火狐篡改数据拦截请求参数并将所有这些值设置为 null 并提交篡改数据.. 但有趣的是，这些值在 JSP 页面中为 null 但如果我使用 ccNumber 并没有抛出 NULL 指针异常.lenghth () 方法，而是将长度显示为 4。我在篡改工具窗口中设置正确的值吗？我只是将参数值更改为null，也许这不正确？

为什么该值在 JSP 页面中不作为 null 出现？

# 付款.jsp

```
 ccNumber = (request.getParameter("ccNumber"));
 ccExpireMonth = (request.getParameter("ccExpireMonth"));
 ccExpireYear = (request.getParameter("ccExpireYear"));
 ccType = (request.getParameter("ccType"));

 If ( cisCardNotVlaid) 
  { 

   ccNumber .length () == 0  // this suppose to throw the NULL pointer exception . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:57:58.560

要`request.getParameter("anyParameter")`返回`null`，根本不指定参数。

# javascript - inputText 的绑定属性如何影响javascript方法？

> ID：15711164
> 
> 赞同：1
> 
> 时间：2013-03-29T20:47:16.800
> 
> 标签：javascript, jquery, jsf, liferay

我正在使用 jsf 和 liferay。我对它很陌生。对于为某些 javascript 或 jquery 方法选择 jsf 的任何元素的任何 javascript 方法，我需要将其设置为。

```
<h:inputText id="abc" binding="#{abc}"/> 
```

请注意，我设置了与 id 相同的绑定，有人告诉我这样做。如果没有像这样设置绑定，我无法在我的 javascript 方法中选择任何元素。我真的不知道原因。因为这对我有用，所以我使用了它，没有详细说明

但是现在对于某些功能，我确实需要实际使用绑定，将 UIInput 绑定到托管 bean。所以我改变了我的标签。

```
<h:inputText id="abc" binding="#{mybean.uiAbc}"/> 
```

在这种情况下，我的 javascript 方法就像

```
function doSomething(){
    $("##{abc.clientId}").val("hello everyone");
} 
```

它不工作。它给了我例外... # 是未定义的..

在javascript中我与绑定无关，为什么它现在停止工作？以及为什么它使用与 id 相同的绑定值更早地工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:10:28.150

如果您替换`binding="#{abc}"`为`binding="#{myBean.uiAbc}"`，那么您显然也应该`#{abc.clientId}`在视图中的其他地方更改为`#{myBean.uiAbc.clientId}`。

```
function doSomething(){
    $("##{myBean.uiAbc.clientId}").val("hello everyone");
} 
```

That the `id` and `binding` need have to be the same name is complete nonsense.

The only problem which you may face is that the default JSF naming container separator character, `:`, is a special character in CSS selectors, like as used in jQuery, and thus this construct would possibly fail. This construct would only work if you've manually reconfigured your JSF webapp to use a different, CSS-safe, character like `-` or `_`. If you indeed use the default of `:`, then you should use

```
function doSomething(){
    $("[id='#{myBean.uiAbc.clientId}']").val("hello everyone");
} 
```

### See also:

*   [How to use JSF generated HTML element ID with colon ":" in CSS selectors?](https://stackoverflow.com/questions/5878692/how-to-use-jsf-generated-html-element-id-in-css-selectors)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:51:46.233

您的追随神话是错误的，即具有相同的 id 和绑定属性。

```
id="abc" binding="#{abc}" 
```

JSF 使用我们提供的 id 渲染组件，前面是表单 id。例如，在你的情况下，它会是，

```
:formId:abc 
```

为避免在表单 id 前面添加，只需将 prependId 属性设置为 false。它只会渲染 id 为“abc”的组件。

此外，如果您的组件正在命名容器，例如 dataTable。那么你访问客户端ID的方法是不同的。

简而言之，只需在浏览器中单击鼠标右键并检查元素的 id，您就可以找到 jQuery 的 id。

# php - API 或 XML：逐字逐句获取服务

> ID：15711166
> 
> 赞同：5
> 
> 时间：2013-03-29T20:47:24.757
> 
> 标签：php, javascript, xml, api, dictionary

我正在尝试找到可以逐字逐句的免费服务。这可能是对这个词的解释，也可能是对这个词的任何其他句子的解释。有没有无需注册的免费服务？我以为[thefreedictionary.com](http://thefreedictionary.com)有类似的东西，但我没有在他们的网站上找到这种服务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T18:36:06.690

您正在寻找 Wordnik API：http: [//developer.wordnik.com/docs.html](http://developer.wordnik.com/docs.html)

具体来说，检查`word/example`端点：

[http://developer.wordnik.com/docs.html#!/word/getExamples_get_0](http://developer.wordnik.com/docs.html#!/word/getExamples_get_0)

仅供参考：当您想要按主题获取 API 时， [Temboo 库是一个很好的资源。](https://www.temboo.com/library/keyword/)

（全面披露：我在 Temboo 工作）

# php - 设计，重复代码 - 需要一些建议

> ID：15711172
> 
> 赞同：1
> 
> 时间：2013-03-29T20:47:46.367
> 
> 标签：php, architecture

我会尽可能清楚地解释我的情况。

我正在构建一个框架。它的系统包含以下目录：
1）核心 - 路由，主类（自动加载，配置，常量），请求
2）助手
3）库

在 index.php 中，我设置了所有最重要的配置变量，例如基本 url 或索引文件。我将它们设置在“主类”中。

这些属性是私有的，因为我不希望任何人在请求流期间更改它们。

所以访问这些变量的唯一点是“主类”方法。

* * *

现在，这些私有变量之一是`$_base_url`.

但是，我希望用户能够从更好的地方访问 base_url，例如 URL 类（在 helper 目录内）。

* * *

为了实现这一点，我必须创建两个方法 - “主类”中的 get_base_url() 和 url 类中的 get_base_url() ，它们将执行以下操作：

```
class Url {

   public static function get_base_url() {
      return Main_Class::get_base_url();
   }

} 
```

我的问题是 - 我有几个这样的变量，我想从不同的类中调用它们。

我会有很多重复的代码。

我看到的唯一解决方案是将这些变量直接设置在不同的类中，但我想让它们集中在主类中。

我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:53:04.263

您可以创建另一个名为变量的类（或任何您喜欢的），然后使用该类的静态变量来来回调用它们。像这样的东西：

```
<?php class Variables {
  static $_base_url = "http://base_url";
} ?> 
```

这样你就可以像这样调用你的变量：

`Variables::$_base_url;`

**要扩展您的评论：**

With inheritance you can have a situation where 2 classes have different values for the same $variable. In this example all instances will hold a different value for $_base_url;

```
class ParentClass {
  protected $_base_url = "SOME VALUE";
}

class SubClassA extends ParentClass {

  protected __construct() {
    $this->_base_url = 'VALUE X';
  }
}

class SubClassB extends ParentClass {

  protected __construct() {
    $this->_base_url = 'DIFFERENT VALUE THAN SubClassA';
   }
} 
```

Again, it depends on what you are trying to accomplish. If you want your variables act more like Settings or if you just want to have those variables within your instance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:56:01.970

Why you need a variable to be called from the classname, if the classes extends your MainClass then use parent::get_base_url();

# c++ - 如何获取上一个关注的应用程序的进程 ID

> ID：15711174
> 
> 赞同：1
> 
> 时间：2013-03-29T20:47:55.773
> 
> 标签：c++, linux, windows, qt, linux-kernel

我想将一些文本放入正在运行的应用程序中，当使用全局热键调用我的程序在后台运行时，我想获取焦点应用程序的进程 ID。

我的操作系统是 Ubuntu，我正在使用带有 C++ 的 QT。但我也打算对 Windows 做同样的事情。所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:53:01.167

在 windows 下，您可以尝试使用 GetForegroundWindow 来获取用户当前正在使用的窗口的 HWND。如果可行，则可以使用 GetWindowThreadProcessId 获取该应用程序的进程 ID。

# regex - IIS 7 使用正则表达式重定向

> ID：15711177
> 
> 赞同：1
> 
> 时间：2013-03-29T20:48:06.820
> 
> 标签：regex, iis

我们目前有一个在子域 http://blog.domain.com 下运行的 wordpress 博客。该站点当前也通过反向代理运行，作为指向原始子域站点的 http://www.domain.com/blog。

目前这两个站点都运行正常，但我们遇到的问题是我们希望子域站点重定向到反向代理站点而不是呈现。我们只希望站点呈现为 http://www.domain.com/blog。我一直在尝试在服务器 2008 机器上使用 IIS 7 中的 URL 重写。

我认为我遇到的问题是正则表达式。我尝试使用 -- ^(blog.)* -- 当我在 IIS 中测试它时，它返回它匹配 (blog.domainname.com) 但是当我在浏览器中打开它时，该站点本身不会重定向。我不确定我错过了什么。在此先感谢您的帮助。

```
 <rewrite>
      <rules>
        <rule name="Main Rule" stopProcessing="true">
          <match url=".*" />
          <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          </conditions>
          <action type="Rewrite" url="index.php" /></rule>
        <rule name="wordpress" patternSyntax="Wildcard">
          <match url="*" />
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          </conditions>
          <action type="Rewrite" url="index.php" /> </rule>
        <rule name="redirect to /blog" enabled="false" patternSyntax="ECMAScript" stopProcessing="true">
          <match url="^(blog.)*" />
           <action type="Redirect" url="http:// www.domainname.com/blog" />
           <conditions logicalGrouping="MatchAny">
            <add input="{HTTP_HOST}" pattern="(.*)" />
          </conditions>
        </rule>
      </rules>
    </rewrite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:50:16.040

~~问题可能是当您点击该 URL 时，您的重写规则没有运行。确保它实际映射到该站点。~~

抱歉，我刚刚注意到您的规则未启用：

```
<rule name="redirect to /blog" enabled="false" patternSyntax="ECMAScript" stopProcessing="true"> 
```

您必须将 enabled 属性修改为 True。

# java - 字符串的断言失败消息包含子字符串

> ID：15711180
> 
> 赞同：2
> 
> 时间：2013-03-29T20:48:15.337
> 
> 标签：java, string, junit, functional-testing, assertions

我最近在文本生成软件上对文本输出做了很多功能测试，发现自己写了很多

```
assertTrue(actualString.contains(wantedString)); 
```

但是，失败时的消息是非描述性的，例如

```
Expected [true], but was [false] 
```

另一种方法是包含自定义失败消息作为

```
String failMsg = String.format("Wanted string to contain: %s, Actual string: %s", wantedString, actualString);
assertTrue(failMsg, actualString.contains(wantedString)); 
```

但是一直手动执行此操作感觉有点乏味。有没有更好的办法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T20:52:32.900

使用 hamcrest Matcher`containsString()`

```
// Hamcrest assertion
assertThat(person.getName(), containsString("myName"));

// Error Message
java.lang.AssertionError:
Expected: a string containing "myName"
     got: "some other name" 
```

您可以选择添加更详细的错误消息。

```
// Hamcrest assertion with custom error message
assertThat("my error message", person.getName(), containsString("myName"));

// Error Message
java.lang.AssertionError: my error message
Expected: a string containing "myName"
     got: "some other name" 
```

# asp.net-web-api - Web API 中的操作和 QueryString 参数

> ID：15711182
> 
> 赞同：6
> 
> 时间：2013-03-29T20:48:19.727
> 
> 标签：asp.net-web-api, query-string, asp.net-web-api-routing

我想让我的通用路由确定是否像这样在 URL 中传递了查询字符串

```
http://localhost/query/DailyLogs/1?dateOfLog='1/13/2013' 
```

这是我当前的路线定义：

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "query/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional}
        ); 
```

* * *

我已经阅读了一些答案，说将 dateOfLog 值添加为 Route 定义的可选操作：

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "query/{controller}/{id}/{dateOfLog}",
            defaults: new { id = RouteParameter.Optional, 
            dateOfLog = RouteParameter.Optional }
        ); 
```

这似乎不起作用，也许我做错了什么，我不确定。

* * *

这就是我目前处理问题的方式，但我想使用路由引擎的 ModelBinding 功能：

```
 var queryValue = Request.RequestUri.ParseQueryString();
 string dateOfLog = queryValue["dateOfLog"]; 
```

请告诉我如何创建一个正确使用 ModelBinding 的 Route 定义并将我的自定义 url 映射到控制器的参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:57:11.987

In the controller action, just include `DateTime dateOfLog` as a method parameter and continue to use the query string as it will get mapped just fine, Web API will use the correct method overload if it finds it.

# c++ - 与向量一起使用的 C++ 可空/可选整数

> ID：15711184
> 
> 赞同：0
> 
> 时间：2013-03-29T20:48:25.667
> 
> 标签：c++, android-ndk, nullable

我在 Android 上使用 NDK，我希望得到类似于 Java 上的 List 的东西，其中元素可以是空值。我知道在 C++ 中 null 与 Java 不同，所以我在寻找元素的值是可选的。

我知道 Boost 有**Boost.Optional**，我不想为此添加这个库。我`return Nullable<double>();`在 stackoverflow 上 看到过这样的代码[How to use Nullable types in c++/cli?](https://stackoverflow.com/questions/1457723/how-to-use-nullable-types-in-c-cli) 但我认为这仅适用于 MS Visual C++，当我编写类似的代码时，它说 Nullable 无法解决。

我正在使用 STLPort 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:54:08.320

使用[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)或在列表中存储（智能）指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:19:30.810

`int`这是我们正在谈论的32位。您的变量的性质是什么 - 您确定所有 4294967296 个可能的值都同样可能和有效吗？在绝大多数情况下，您可以将特定的 int 值（零、-1 或十亿）指定为“非值”，并像对待 null 一样对待它。仔细考虑您的列表，看看您是否可以选择一个不可能出现在列表中的值，如果有，则将其视为空值。

我能想到的所有可能的 int 值都同样有效的唯一用例是 32 位散列或校验和（如 CRC32）。

所有其他方法都失败了，旋转您自己的可为空原语的实现相当容易。基本情况如下：

```
template<typename T>
class Nullable<T>
{
    T _Value;
    bool _IsNull;
public:

    Nullable<T>();
    Nullable<T>(T);
    Nullable<T>(Nullable<T> &);
    Nullable<T> &operator=(Nullable<T> &);
    Nullable<T> &operator=(T);

    operator T(); //Value extractor
    bool IsNull(); //Nullity extractor
}; 
```

And so forth. You won't need a destructor. You can even throw an exception if they're trying to extract the value from a null object.

# titanium - 如何从 WebView 中引用 Titanium JavaScript？

> ID：15711191
> 
> 赞同：1
> 
> 时间：2013-03-29T20:49:08.170
> 
> 标签：titanium

我有一个大型 HTML5 应用程序，并且正在使用 Titanium 为其添加本机支持。对我来说最简单的 hello world 是：

```
var webview = Titanium.UI.createWebView({url:'http://myApp.com'});
var window = Titanium.UI.createWindow();
window.add(webview);
window.open(); 
```

但是，如果我尝试在现有代码中使用 Titanium API，它将没有参考。是否有一个配置文件选项可以使 Titanium API 可用于我的 Web 应用程序？

我刚刚在[文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.WebView)中找到了这个：

```
Scripts downloaded from remote web servers cannot access the Titanium namespace, 
however, you can use the web view evalJS method to execute a JavaScript 
expression inside the web view, and retrieve the value of an expression. 
```

除了轮询 webview 的上下文之外，还有什么方法可以让上下文访问 Titanium API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:50:22.170

节省一些时间并使用 phonegap，您所做的并不是 Appcelerator 的最佳实践

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:01:11.680

我同意 Aaron 的观点，PhoneGap 听起来确实更适合您尝试做的事情。但是，如果您仍然想在 Titanium 中执行此操作......

简短的回答是您必须从 webview 运行 Ti.App.fireEvent()，这将允许您从 Titanium javascript 文件运行函数调用。在 Titanium javascript 文件中，您将使用 Ti.App.addEventListener 添加一个事件侦听器。

对于更详细的示例，我们需要更多上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T09:31:34.217

使用 web-view 将所有 html 文件加载到不同的 .JS 文件中并尝试执行此代码

Applicationwindow.js 文件，如果您想要 android 选项菜单，请保留此代码，否则请修改

根据你的事件。

功能应用程序窗口（）{

```
//declare module dependencies

var All = require('ui/common/All');

    Tree = require('ui/common/Tree');

    EBOM = require('ui/common/E-BOM');

    MBOM = require('ui/common/M-BOM');

    SBOM = require('ui/common/S-BOM');

//create object instance

var self = Ti.UI.createWindow({

    title:'Products',

    exitOnClose:true,

    navBarHidden:true,

    backgroundColor:'#ffffff',
    /////////////////////////////////////////////////////////////////////////////

    activity: {

        onCreateOptionsMenu: function(e) {

            var menu = e.menu;              

            var menuItem = menu.add({ title: "C-BOM", icon: 'Arrow-Hover.jpg' });

            //menuItem.setIcon("Arrow-Hover.jpg");

            menuItem.addEventListener("click", function(e) {

                 var all = new All();

                        self.add(all);

            });

            var menuItem = menu.add({ title: "ALL-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                   var tree = new Tree();

                        self.add(tree);

            });

            var menuItem = menu.add({ title: "E-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                    var ebom = new EBOM();

                        self.add(ebom);

            });

            var menuItem = menu.add({ title: "M-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                    var mbom = new MBOM();

                        self.add(mbom);

            });

            var menuItem = menu.add({ title: "S-BOM" });

            menuItem.setIcon("images/refresh_icon.png");

            menuItem.addEventListener("click", function(e) {

                   var sbom = new SBOM();

                        self.add(sbom);

            });

            var menuItem = menu.add({ title: "Logout" });

            menuItem.setIcon("Arrow-Hover.jpg");

            menuItem.addEventListener("click", function(e) {

                 alert("Logout");

            });

           }

          }

    /////////////////////////////////////////////////////////////////////////////

});

var webview = Titanium.UI.createWebView({

    url:'/ui/common/Login.html'

    });

self.add(webview);

return self; 
```

};

module.exports = 应用程序窗口；

# javascript - Apple Touch Icon: Is it possible to update on the favicon on a web-mobile app for iOS?

> ID：15711198
> 
> 赞同：3
> 
> 时间：2013-03-29T20:49:36.733
> 
> 标签：javascript, jquery, ios, mobile

Is it possible to push update on the favicon (ex. apple-touch-icon.png) on a web-mobile app for iOS? I mean, I saw a weather app that uses the actual app icon to update the temperature...

is it possible in your html5 web app (saved to your home screen)?

to be precise i just saw it working on this web app: pattern.dk/sun and their icon displays exactly the realtime temperature, is that just a trick maybe??

UPDATE The icon doesn't really update in real-time but only when you open and closes the app. still interesting though.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:52:19.247

I think I found the trick

i'm adding a time stamp to the icon filename like:

```
 <link rel="apple-touch-icon-precomposed" href="favicon.png?<?php echo $date->format('U'); ?>" /> 
//this is a PHP piece of code but you generat a timestamp in any way you want 
```

so anytime you open the boomark the icon app refresh itself

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T18:58:18.057

从 iOS 7.1 开始，即使文件名相同，Web 应用程序图标也会更新。

# drupal-7 - Drupal Organic Groups: Entity Reference Other groups

> ID：15711199
> 
> 赞同：0
> 
> 时间：2013-03-29T20:49:51.810
> 
> 标签：drupal-7, organic-groups

I have Organic Groups installed on my Drupal website. I created groups and a group content type. In the group content type I have an OG Reference field to refer to the group it can belong. However, this field also automatically shows a "Other groups" field. How can I remove this "Other groups" field, as I do not want to enable users to choose other groups to fill in.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T12:29:10.210

You can hide it by using hook_field_widget_form_alter():

```
/**
 * Implements hook_field_widget_form_alter().
 */
function fr_groups_field_widget_form_alter(&$element, &$form_state, $context) {
  // Hide "Other groups" table for group selection.
  if ($element['#field_name'] == 'og_group_ref' && isset($element['admin'])) {
    $element['admin']['#access'] = FALSE;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:26:49.143

The "Other groups" field is only visible to users with "Administer Group" permissions. This permission is under:

```
/drupal/admin/config/group/permissions/node/%node% 
```

I wouldn't worry about this since regular users won't see this but if you want this removed you can remove this field for ALL users by removing ALL roles from Administer Group permissions. Just unselect the option in the above mentioned URL.

# python - 对于这条长长的 Python 行，正确的 PEP8 做法是什么？

> ID：15711209
> 
> 赞同：1
> 
> 时间：2013-03-29T20:50:39.783
> 
> 标签：python, python-2.7, pep8

我应该如何分解这条线以使其遵守 PEP8？

```
 assert (sum(map(lambda x: len(x), 
                    (activities,apps,classes,users,verbs))) ==
            Object.query
                  .filter(Object.status != ObjectStatusChoices.DELETED)
                  .count()) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:59:35.897

如果您将内容重写为单独的行，则永远不会出现这种情况。

它还可以让你给中间值起有意义的名字（我不得不猜测，但大概你知道它们），甚至可以将一些逻辑重构为函数（你也*可以*给它起有意义的名字）。

例如，不改变任何逻辑，甚至重写任何逻辑（除了`len`代替使用`lambda x: len(x)`）：

```
lengths = map(len, (activities,apps,classes,users,verbs))
db_query = Object.query.filter(Object.status != ObjectStatusChoices.DELETED)
assert sum(lengths) == db_query.count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:56:10.020

首先，请记住，对此没有单一的“正确的 PEP8 答案”。我更喜欢：

```
in_mem = sum(len(x) for x in (activities,apps,classes,users,verbs))
in_db = Object.query.filter(
                        Object.status != ObjectStatusChoices.DELETED
                        ).count()
assert in_mem == in_db 
```

当然，如果您发现自己的语句需要分成五行，那么您可能需要更多语句。

# c# - 构建数据以动态传递给 jquery/ajax

> ID：15711211
> 
> 赞同：0
> 
> 时间：2013-03-29T20:50:55.610
> 
> 标签：c#, asp.net, ajax, jquery

我有以下希望通过 jquery-ajax 调用的**Web 方法。**

```
[System.Web.Services.WebMethod]
public static int saveDataToServer(string cntName, string cntEmail, string cntMsg)
{
     // Implementation
} 
```

这是我的**jquery ajax 调用方法**...

```
 function makeAjaxCall(arrOfObjName, arrOfObjValues, urlToCall) {
        debugger;
        var tempData;
        // Check if objNames's length is same as objValues's length.
        if (arrOfObjName.length != arrOfObjValues.length) {
            return null;
        }
        var dataString = "";
        // Building data object, we know the two arrays have same length!
        for (var intIndex = 0; intIndex < arrOfObjName.length; ++intIndex) {
            if (intIndex == arrOfObjName.length - 1) {
                dataString += arrOfObjName[intIndex] + ":" + arrOfObjValues[intIndex];
                continue;
            }
            dataString += arrOfObjName[intIndex] + ":" + arrOfObjValues[intIndex] + ",";
        }
        $.ajax({
            type: "POST",
            url: urlToCall,
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify("{" + dataString + "}"),
            dataType: "json",
            success: function (data) {
                tempData = data;
            },
            error: function (data) {
                tempData = null;
            }
        });
        return tempData;
    } 
```

在调用该方法之前，我**将其传递给数组**，

```
 var arrOfObjects = new Array("cntName", "cntEmail", "cntMsg");
 var arrOfObjectVals = new Array($(cntName).val(),$(cntEmail).val(),$(cntMsg).val()); 
```

但是当实际调用发生时，我**在 Fiddler 中收到以下错误**。

```
{"Message":"Cannot convert object of type \u0027System.String\u0027 to type \u0027System.Collections.Generic.IDictionary`2[System.String,System.Object]\u0027","StackTrace":" at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object\u0026 convertedObject)\r\n at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object\u0026 convertedObject)\r\n at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\r\n at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)\r\n at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)\r\n at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\r\n at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"} 
```

我假设该方法在将“字符串类型数据”转换为字典时遇到问题。但为什么首先如此呢？我可以不构建我希望动态传递给网络方法的数据吗？

**按要求更新**：

```
>> JSON.stringify("{" + dataString + "}")

""{cntName:asdasdasd,cntEmail:abijeet.p@osmosys.asia,cntMsg:saveDataToServersaveDataToServersaveDataToServersaveDataToServersaveDataToServersaveDataToServersaveDataToServer}"" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:58:40.017

您正在构建一个字符串`dataString`，您应该构建一个对象，然后将该对象转换为 json。就像是

```
 var dataString = {};
    // Building data object, we know the two arrays have same length!
    for (var intIndex = 0; intIndex < arrOfObjName.length; ++intIndex) {
        dataString[arrOfObjName[intIndex]] = arrOfObjValues[intIndex];
    }
    $.ajax({
        type: "POST",
        url: urlToCall,
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify( dataString ),
        dataType: "json",
        success: function (data) {
            tempData = data;
        },
        error: function (data) {
            tempData = null;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:47:48.077

我将继续添加这个作为答案：你自己做了太多的工作，让框架来做所有这些事情！

[http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)

您的 AJAX 调用只需这样......无需自己制作 JSON 字符串！

```
 $.ajax({
        type: "POST",
        url: urlToCall,
        contentType: "application/json; charset=utf-8",
        data: arrOfOBJECTS, //looky here! 
        dataType: "json",
        success: function (data) {
            tempData = data;
        },
        error: function (data) {
            tempData = null;
        }
    }); 
```

然后在您的后端服务上，将签名更改为类似这样的内容......

```
[System.Web.Services.WebMethod]
public static int saveDataToServer(string[] myArray)
{
     // Implementation
} 
```

仅，使用一些与您的 JSON 对象匹配的结构或对象。不要自己做这项工作。我确实花了几天时间才弄清楚这一点，但当你这样做时，它就是美丽。

# xml - 如何构建简单的 XPath 查询

> ID：15711213
> 
> 赞同：0
> 
> 时间：2013-03-29T20:51:02.097
> 
> 标签：xml, xpath

我想在下面的代码片段中检索 connectionString 值。我尝试了几种 XPath，但总是出错或找不到对象。我一直在使用这些网站：

```
http://www.xpathtester.com/test
http://www.xmlme.com/XpathTool.aspx 
```

这是我尝试过的 XPath：

```
/connectionStrings/add/@connectionString
/connectionStrings/add[@connectionString] 
```

这是代码：

```
<connectionStrings>
  <add name="mydb" connectionString="Data Source=.;Initial Catalog=mydb;Integrated Security=True" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:17:12.030

您的两个 XPath 查询都是有效的。第一个选择属性，第二个选择`<add>`具有属性的元素`connectionString`。

你得到什么错误，在什么情况下？

这是 XPath 良好的“证明”，使用[Ruby](http://ruby-lang.org)和[Nokogiri](http://nokogiri.org)，它构建在 libxml2 之上：

```
require 'nokogiri'
doc = Nokogiri.XML '<connectionStrings>
  <add name="mydb" connectionString="foo" providerName="bar" />
</connectionStrings>'

puts doc.at_xpath('/connectionStrings/add/@connectionString')
#=> foo

puts doc.at_xpath('/connectionStrings/add[@connectionString]')
#=> <add name="mydb" connectionString="foo" providerName="bar"/> 
```

# xamarin.ios - C#/MonoTouch 实现一个秒表，在标签上动态显示时间

> ID：15711214
> 
> 赞同：0
> 
> 时间：2013-03-29T20:51:02.377
> 
> 标签：xamarin.ios, stopwatch

是否可以实现一个秒表，在手表运行时显示标签上的秒表值变化。

我使用以下代码添加了秒表

```
Stopwatch stopwatch = new Stopwatch();
// Begin timing
stopwatch.Start();

// Stop timing
stopwatch.Stop(); 
```

我应该如何在标签上显示时间？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:17:33.477

使用[Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)而不是[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)。

```
// create a timer that fires every 10 ms
Timer aTimer = new Timer(10);

// Hook up the Elapsed event for the timer.
aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

aTimer.Enabled = true;

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    // update your label here
} 
```

# iis-7.5 - Windows 7 上的 Wamp 服务器错误

> ID：15711222
> 
> 赞同：-2
> 
> 时间：2013-03-29T20:51:32.143
> 
> 标签：iis-7.5, wamp

我的机器上没有 SKYPE。

我确实遇到了 wamp 2.2E 无法启动/橙色图标问题。

所有这三件事都在发生：

1.  另一个应用程序在 wamp 使用的端口 80 上运行。wamp > apache > service > Test port 80 说我的端口被 Microsoft-IIS/7.5 使用

    我找不到 IIS 来删除我的程序文件 - 我该如何解决这个问题？

2.  WINDOWS文件夹中的hosts文件，如果条目127.0.0.0 localhost被注释了，已经尝试了九种方法到周日取消注释并保存。
    无论我如何更改我的权限（为此花费了 2 个小时）- 都不会让我保存

    这是我旅程的终点​​吗？这可以克服吗？

3.  在系统托盘 Wamp 图标上，在 Apache/Service 下，我注意到 Start&Stop&Restart 显示为灰色，并且安装服务可用。

    点击安装服务，弹出确认端口 80 正在使用，我被卡住了

我是前端开发人员/设计师 - 谁能帮我弄清楚如何让 wamp 运行？

（ps - 甚至尝试运行旧版本的 2.1 - 与上述相同的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:04:24.217

您可以为 WAMP 使用不同的端口号：[http](http://www.brucerick.com/changing-wamp-2-1-port-from-80-to-81-or-other-port/) ://www.brucerick.com/sharing-wamp-2-1-port-from-80-to-81-or-other-port/或者您可以关闭 IIS释放 80 端口：[http ://forums.iis.net/t/1150139.aspx/1](http://forums.iis.net/t/1150139.aspx/1)

由于权限问题，您很可能无法“保存”您的主机文件。尝试将其保存到您允许保存的位置，然后将文件复制到适当的位置 - 这样您将获得 UAC 提示，假设您有权回答该问题。

Apache cannot start on port 80 if port 80 is occupied. Fix problem one before you worry about problem three.

I know it is frustrating when WAMP will not turn green or give you a helpful error - I'm sorry it is being so difficult.

# ruby - 在“Daemon.run”中运行 ruby 脚本时出现奇怪的错误，而“bundle exec ruby ”中没有错误

> ID：15711224
> 
> 赞同：1
> 
> 时间：2013-03-29T20:51:32.927
> 
> 标签：ruby, activerecord, sinatra, daemon, koala

我使用 Daemons gem、应用程序 oAuth oh facebook 编写基于 sinatra 的应用程序，并更改某些页面的封面。所以当我直接从“bundle exec ruby​​ daemon.rb”调用守护进程时，输出中没有错误，但是当我运行这个守护进程时，我看到了很多错误：

像这样：

```
E, [2013-03-29T19:04:15.762886 #40814] ERROR -- : method `_create_callbacks' not defined in Class (NameError)
E, [2013-03-29T19:04:15.767114 #40814] ERROR -- : method `_active_authorizer' not defined in Class (NameError)
E, [2013-03-29T19:04:15.767434 #40814] ERROR -- : method `_protected_attributes' not defined in Class (NameError)
E, [2013-03-29T19:04:15.774713 #40814] ERROR -- : uninitialized constant MIME (NameError)
E, [2013-03-29T19:04:15.775264 #40814] ERROR -- : uninitialized constant Koala::HTTPService::MIME (NameError)
E, [2013-03-29T19:04:15.775527 #40814] ERROR -- : uninitialized constant Koala::MIME (NameError)
E, [2013-03-29T19:04:15.776317 #40814] ERROR -- : uninitialized constant Koala::HTTPService::UploadableIO::MIME (NameError) 
```

和

```
E, [2013-03-29T19:04:15.779144 #40814] ERROR -- : read would block (OpenSSL::SSL::SSLError) 
```

我使用宝石考拉，Sinatra/activerecord

我不明白为什么会这样？

**PS：**

我有守护进程控制脚本 run_daemon.rb

```
 require 'daemons'
 ....
 file = file passed with argument
 Daemons.run(file, options) 
```

在守护进程的每个文件中我加载应用程序配置，在这个配置之上我放置“需要'捆绑器/设置'”

当我从守护进程控制运行时，在日志中出现错误

```
 bundle exec ruby run_daemon.rb daemon_name start 
```

但是当我没有恶魔直接运行时

```
 bundle exec ruby path_do_daemon/daemon_name.rb 
```

没有错误

# titanium - Titanium 中的最大数据库大小是多少？

> ID：15711230
> 
> 赞同：1
> 
> 时间：2013-03-29T20:51:40.527
> 
> 标签：titanium

最大数据库大小是多少？是否有图表显示不同设备的最大数据库大小？您能否将预先填充的数据库存储在 SD 卡上并将其插入设备并使用钛读取该数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:50:55.920

1.  除了设备上的可用存储之外，数据库的大小没有限制（据我所知，除了 SQL 限制），*但*显然，如果您在设备。
2.  该图表只是比较手机闪存。
3.  应该是吧，但成功率并不高。检查[这里](http://developer.appcelerator.com/question/118474/create-folder-on-sdcard---android)，[这里](http://developer.appcelerator.com/question/122888/attach-a-sqlite-db-from-sd-card)和[这里](https://jira.appcelerator.org/browse/TIMOB-10223)。

# iphone - 应用程序保留自己的联系人 - 不与联系人同步

> ID：15711231
> 
> 赞同：0
> 
> 时间：2013-03-29T20:51:41.800
> 
> 标签：iphone, ios, app-store

我正在寻找一些将是一个单独的应用程序的应用程序，我可以在其中保留我的联系人，这在我的典型联系人列表中是不需要的。我相信你知道，我的意思是……如果我有一些电话号码并想把它写下来，我不想把它放在我的联系人列表中并把它弄得一团糟。在 Notes 中做笔记有点傻，而且不是原生的。我想要像“联系人”这样的单独应用程序，它与我的典型联系人列表无关。

你知道这样的事吗？我找不到或无法搜索：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:00:00.050

您可以创建单独的地址簿和组来组织您的联系人。但是，一切都将通过联系人应用程序公开。

# python - 为什么 Python MVC web 框架使用 views.py 来包含路由函数？

> ID：15711233
> 
> 赞同：1
> 
> 时间：2013-03-29T20:51:47.960
> 
> 标签：python, model-view-controller, web-frameworks

我在 Zend 和 Symfony 中使用 MVC 模式开发了许多应用程序。现在我在 Pythonland，我发现许多框架，如 Flask、Django 和 Pyramid 使用一个名为 views.py 的文件来包含实现路由的函数。但是，这些“视图”实际上是我之前使用过的其他 MVC 框架中的控制器。为什么它们在 Python Web 框架中被称为视图？而且，我可以将它们更改为 controller.py 而不会在 Python 世界中留下一个洞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:05:54.473

从 django 的角度来看，视图是页面上呈现的内容*。*模板就是*它*的呈现方式。

django 视图并不完全等同于控制器。其他一些框架中的控制器是*函数调用的发生方式*。在 django 中，这是框架本身的一部分。

从技术上讲，没有什么可以阻止您将视图重命名为控制器。- URL 路由方案将函数或字符串带到函数。只要您可以将适当的字符串发送给函数（或函数本身），您就可以随意调用您的视图。但是，由于上一段中所述的原因以及满足在 django 上工作的其他人的期望这一事实，您不应该真正将文件称为`controller.py`.

这只是习惯的问题。在那儿呆一会儿。

# asp-classic - 经典 ASP - 提交未知数量和名称的字段？

> ID：15711234
> 
> 赞同：1
> 
> 时间：2013-03-29T20:51:50.197
> 
> 标签：asp-classic

我有一个大型记录集正在显示给用户。每条记录都有一个编辑按钮，允许用户编辑记录中的各种数据。某些记录具有比其他记录更多的字段，因此编辑表单具有各种不同的名称和字段数量。

例如，如果单击编辑按钮，一条记录将产生以下内容：

```
<form id="frm1" name="frm1" method="post" action="changeJob.asp?jobNo=1101&jQueryID=1" target="_blank">
<input type='text' name='Qty13' value='8' size="3" maxlength="3"/>
<input type="submit" name="btnFrm1" id="button" value="Submit" />
</form> 
```

然而，另一条记录会产生这个：

```
<form id="frm2" name="frm2" method="post" action="changeJob.asp?jobNo=1102&jQueryID=2" target="_blank">
<input type='text' name='Qty15' value='8' size="3" maxlength="3"/>
<input type='text' name='Qty16' value='8' size="3" maxlength="3"/>
<input type='text' name='Qty17' value='8' size="3" maxlength="3"/>
<input type='text' name='Qty18' value='8' size="3" maxlength="3"/>
<input type="submit" name="btnFrm2" id="button" value="Submit" />
</form> 
```

如上所述，每个输入字段都分配有其唯一的名称，例如“Qty14”，并且其表单有自己的名称，例如“frm2”。这些需要是唯一的，因为我有一些 jQuery 加号和减号按钮，允许用户增加数量。

在 changeJob.asp 中，我如何确定哪些字段具有唯一名称和编号？我可以很容易地使用隐藏字段获取表单名称。

我正在尝试实现以下目标：

> 对于 frm1 中的每个字段 ** 执行 SQL 更新 ** 下一步

任何指导将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:14:17.693

只需迭代所有表单集合并查找以所需名称开头的键：

```
Dim strSQL, curValue, blnFirst
blnFirst = True
strSQL = "Update MyTable Set "
For Each key In Request.Form
    If Left(key, 3)="Qty" Then
        'prevent nasty hacking
        If IsNumeric(Replace(key, "Qty", "")) Then
            curValue = Request.Form(key)
            If IsNumeric(curValue) Then
                If Not(blnFirst) Then
                    strSQL = strSQL & ", "
                End If
                strSQL = strSQL & key & "=" & curValue
                blnFirst = False
            End If
        End If
    End If
Next
If blnFirst Then
    'no values, show alert of some sort...
Else  
    strSQL = strSQL & " Where [filter here]"
    '...
End If 
```

这将基于提交的值构建动态查询。

如果每个值都需要单独更新代码变得更简单，希望您可以自己更改。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:35:39.313

我很乐意提供帮助。需要更多信息，因为我不想告诉你你已经知道的东西。你能告诉我你是否已经有代码来填写表格......就像......这个表格是用于编辑新数据和/或旧数据还是仅用于编辑新记录？

此外，您是否想过使用一种表单，然后让您的服务器端代码 (ASP) 动态生成输入框？这是我的建议，因为在这种情况下拥有多个表单（除非我遗漏了某些内容）......不雅。

您可以下载这个 zip 文件，其中有两个 asp 页面，展示了一种更动态的方法：[http ://www.oceanmedia.net/files/hk_config.zip](http://www.oceanmedia.net/files/hk_config.zip)

# java - 不想匹配一个字符后跟另一个字符 - 正则表达式

> ID：15711241
> 
> 赞同：0
> 
> 时间：2013-03-29T20:52:31.173
> 
> 标签：java, regex

我想为 Basenote 创建一个令牌（编写一个 Java MIDI 播放器）。

Basenote 制作它的令牌的正则表达式是`BASENOTE("[A-Ga-g]")`. 现在，我有一个名称标记，它必须与模式“C：贝多芬”相匹配。（C代表作曲家）。这是我的名称令牌应该匹配的内容：`NAME("(?<=C:)[^\n\r\f]+")`. 为简单起见，这意味着应该匹配后面跟“C:”的任何内容

问题是，我的词法分析器认为名称中的 C 是 Basenote，它标记“C：贝多芬”，如下所示：

```
<Basenote> C  <Name> Beethoven 
```

而我只想要贝多芬。我该如何解决这个问题？

PS：我对正则表达式模式匹配非常陌生，所以我希望我在那里写的任何东西都有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:01:15.173

尝试改用这个：

```
BASENOTE("[A-Ga-g](?!:)") 
```

# c++ - 获取正确的案例工作目录？

> ID：15711243
> 
> 赞同：2
> 
> 时间：2013-03-29T20:52:37.047
> 
> 标签：c++, winapi

为了更好地熟悉 C++，我正在重做一个旧的大学操作系统任务：编写自己的 shell。我正在使用各种`Windows.h`我从未知道存在的东西。到目前为止，我已经取得了不错的进展，但我注意到了一些关于我的`cd`实现和我从`getcwd`.

我的`cd`命令进行了一些错误检查，但最终归结为`chdir(path)`. 假设我在`C:\`并且存在一个文件夹`FOLDER`。如果我`chdir("folder")`稍后在调用时使用 then ，`getcwd(dir, FILENAME_MAX)`那么我将得到字符串`C:\folder`而不是大小写正确的字符串`C:\FOLDER`。如何检索具有正确大小写的每个文件夹的工作目录？

注意：当我第一次启动我的 shell 并运行我的`pwd`命令（`dir`仅从我的`getcwd`调用中打印）时，我得到了一个正确大小写的路径。一旦我开始更改工作目录，那么外壳总是与我的字符串匹配，而不是实际的文件夹外壳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:01:46.760

您可以使用`GetFullPathName`API 函数返回当前目录的正确（大小写正确）路径，如下例所示：

```
TCHAR tchPath[MAX_PATH];
GetFullPathName(TEXT("."), MAX_PATH, tchPath, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:06:24.037

我认为 Windows 命令提示符只使用`GetLongPathName`，它返回具有适当大小写的路径（但是，它不会更改驱动器号的大小写）。

如果您需要大写的驱动器号，该`GetShortPathName`函数将返回驱动器号大写的短路径。然后，您可以将此短路径传递给`GetLongPathName`，这会将其转换为正确大小写的长路径，但这不是 cmd 所做的。

您也可以使用`SHGetFileInfo`，但这不是最简单的方法。

# jqgrid - jqGrid自定义元素单选按钮列在saveRow上编辑后未返回选定值

> ID：15711248
> 
> 赞同：1
> 
> 时间：2013-03-29T20:53:10.410
> 
> 标签：jqgrid

我有一个从服务获取 json 数据的 jqGrid。在编辑模式下，我必须将单选按钮添加到列中。这必须是内联编辑。我需要批量更新记录。我创建了一个自定义元素和自定义值来`selectRow`在 jqGrid 中显示单选按钮。我遇到的问题是我无法获取所选单选按钮的值。相反，它总是返回第一个单选按钮的值。代码可以找到[链接](http://jsfiddle.net/srinivaspotluri/xx7Jg/10/)

以下是创建自定义元素的代码

```
function radioelem(value, options) {
    var receivedradio = '<input type="radio" name="receivednaradio" value="R"';
    var breakline = '/>Received<br>';
    var naradio = '<input type="radio" name="receivednaradio" value="N"';
    var endnaradio = '/>NA<br>';
    if (value == 'Received') {
        var radiohtml = receivedradio + ' checked="checked"' + breakline + naradio + endnaradio;
        return radiohtml;
    }
    else if (value == 'NA') {
        var radiohtml = receivedradio + breakline + naradio + ' checked="checked"' + endnaradio;
        return radiohtml;
    }
    else {
        return receivedradio + breakline + naradio + endnaradio;
    }
};

function radiovalue(elem, operation, value) {
    if (operation === 'get') {
        return $(elem).val();
    } else if (operation === 'set') {
        if ($(elem).is(':checked') === false) {
            $(elem).filter('[value=' + value + ']').attr('checked', true);
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:16:47.207

您代码中的主要问题是您的`custom_element`（函数）实现返回**不是一个元素**`radioelem`的HTML 片段。返回**`radioelem`**

 **```
<input type="radio" ... value="R"/><input type="radio" ... value="R"/> 
```

as string. It consists from **two** input elements. So custom control failed in the case. You will be able to understand the problem if you examine the code how jqGrid use it. Look at [the lines](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.common.js#L461-L467) of jqGrid code which I rewrite in simplified form as following

```
var celm = options.custom_element.call($t,vl,options);
if(celm) {
    celm = $(celm).addClass("customelement").attr({id:options.id,name:options.name});
    $(elem).empty().append(celm);
} 
```

jqGrid 使用`$(celm)`where`celm`是`custom_element`函数返回的字符串。在您的情况下`$(celm)`，将是**两个** `<input>`元素的 jQuery 包装器。我的意思是`$(celm) === 2`。因此，代码不会在**一个**自定义元素上设置类“customelement”，而是将类“customelement”`$(celm).addClass("customelement")`添加到**两个** `<input>`元素。下一次调用（调用）在**两个**元素上`attr`设置*相同。* 您如何知道 id 必须是唯一的，但代码确实会产生重复。`id` **`<input>``id`**

 **确切地说，`custom_element`（函数`radioelem`）的实现会返回更复杂的 HTML 片段

```
<input type="radio" ... value="R"/><br/><input type="radio" ... value="R"/><br/> 
```

If you examine the code which produce jqGrid at the end from the HTML fragment you will see very funny and very wrong HTML fragment like below

```
<input name="NA" class="customelement" id="2_NA" type="radio" value="R">
Received
<br class="customelement" id="2_NA" name="NA">
<input name="NA" class="customelement" id="2_NA" type="radio" value="N">
NA
<br class="customelement" id="2_NA" name="NA"> 
```

Probably you didn't seen ever before so strange `<br/>` elements. You can see that the code fragment contains 4 elements with the same `id="2_NA"`. After that you should be not wonder that the custom control works not as expected.

**To fix the problem you need just place the code which you returned before inside of `<span>...</span>` or inside of `<div>...</div>`**:

```
function radioelem(value, options) {
    var receivedradio = '<input type="radio" name="receivednaradio" value="R"',
        breakline = '/>Received<br>',
        naradio = '<input type="radio" name="receivednaradio" value="N"',
        endnaradio = '/>NA<br>';

    if (value === 'Received') {
        return "<span>" + receivedradio + ' checked="checked"' + breakline + naradio + endnaradio + "</span>";
    }
    if (value === 'NA') {
        return "<span>" + receivedradio + breakline + naradio + ' checked="checked"' + endnaradio + "</span>";
    }
    return "<span>" + receivedradio + breakline + naradio + endnaradio + "</span>";
} 
```****

# drupal - websolr没有索引？（“401”状态：需要授权）

> ID：15711249
> 
> 赞同：0
> 
> 时间：2013-03-29T20:53:12.847
> 
> 标签：drupal, solr, websolr

我刚刚安装了 Websolr 并测试了连接，并且可以正常工作。但是没有任何东西被索引。我有一个 drupal 7 站点，当我单击配置文件选项卡时，出现此错误：

```
"401" Status: Authorization Required: Authorization Required<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML>
<HEAD>
<TITLE>Error</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
</HEAD>
<BODY><H1>401 Unauthorised.</H1></BODY>
</HTML> 
```

我的日志没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:20:42.473

在[websolr](https://websolr.com/home)，我们在共享集群环境中运行索引。我们的设计原则之一是将对我们认为安全的特定索引操作的访问列入白名单。由于性能、安全和/或隐私问题，这种方法限制了对 Solr 中大多数管理操作的访问。

在这种情况下，Drupal apachesolr 模块发出请求以`/admin/stats.jsp`获取索引使用情况的一些使用统计信息。不幸的是，来自我们端的 HTTP 401 响应被视为一个相当严重的错误并被报告为这样。

![Drupal apachesolr 401 需要授权错误](../Images/2e9fd6c4c9a634ced4337f2ccb754eaa.png)

我们仍在研究解决此问题的选项，无论是在模块本身内还是在我们的服务端。有关解决方法和更多最新摘要，您可以关注我们支持知识库中的这篇文章：

*   [Websolr 支持 - Drupal apachesolr 模块：“需要 401 授权”](http://help.websolr.com/kb/common-problems/drupal-apachesolr-module-401-authorization-required)

# google-apps-script - 从应用程序脚本构建驱动器应用程序 - 下面的代码有什么问题

> ID：15711256
> 
> 赞同：0
> 
> 时间：2013-03-29T20:53:46.573
> 
> 标签：google-apps-script

下面是取自 Arun Nagarajan 示例的代码：我尝试使用相同的代码进行检查。但它没有正确安装。（我在下面删除了我的重定向网址、客户端 ID 和密码）。请告诉我下面的代码有什么问题。

```
var AUTHORIZE_URL = 'https://accounts.google.com/o/oauth2/auth';
var TOKEN_URL = 'https://accounts.google.com/o/oauth2/token';
var REDIRECT_URL =             'exec';
var tokenPropertyName = 'GOOGLE_OAUTH_TOKEN';

var CLIENT_ID = '';
var CLIENT_SECRET = '';

function doGet(e) {
var HTMLToOutput;

if(e.parameters.state){
var state = JSON.parse(e.parameters.state);
if(state.action === 'çreate'){
var meetingURL = createMeetingNotes();
HTMLToOutput = '<html><h1>Meeting notes document created!</h1><a href="'+meetingURL+'">    <click here to open</a></html>';
}
else if (state.ids){
var doc = DocsList.getFileById(state.ids[0]);
var url = doc.getContentAsString();
HTMLToOutput = '"<html><a href="' +url+'"</a></html>"';
}
else {
zipAndSend(state.ecportIds.Session.getEffectUser().getEmail());
HTMLToOutput = '"<html><h1>Email sent. Check your Inbox.</h1></html>"';
}
}
else if(e.parameters.code){
getAndStoreAccessToken(e.parameters.code);
HTMLToOutput = '<html><h1>App is installed. You can close this window now or navigate to your </h1><a href="https://drive.google.com/">Google Drive</a></html>';
}
else {
HTMLToOutput = '<html><h1>Install this App into your google drive </h1><a href="' + getURLForAuthorization() + '">Click here to start install</a></html>';
}

return HtmlService.createHtmlOutput(HTMLToOutput);

}

function getURLForAuthorization() {
return  AUTHORIZE_URL + '?response_type=code&client_id=' + CLIENT_ID + '&redirect_uri='     + REDIRECT_URL + '&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.install+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email';
}

function getAndStoreAccessToken(code) {
var parameters = { method : 'post',
                  payload : 'client_id='+ CLIENT_ID + '&client_secret=' + CLIENT_SECRET + '&grant_type=authorization.code&redirect_uri=' + REDIRECT_URL};
var response = UrlFetchApp.fetch(TOKEN_URL.parameters).getContentText();
var tokenResponse = JSON.parse(response);
UserProperties.getProperty(tokenPropertyName, tokenResponse.access_token);
}

function getUrlFetchOptions() {
return {'contentType' : 'application/json',
        'headers' : {'Authorization': 'Bearer ' +         UserProperties.getProperty(tokenPropertyName),
                     'Accept' : 'application/json'}};           

}

function IsTokenValid() {
return UserProperties.getProperty(tokenPropertyName);
} 
```

显示的错误是：错误请求：未定义

我认为错误在名为 getAndStoreAccessToken 的函数内部。

```
var parameters = { method : 'post',
payload : 'client_id='+ CLIENT_ID + '&client_secret=' + CLIENT_SECRET + '&grant_type=authorization.code&redirect_uri=' + REDIRECT_URL}; 
```

请告诉我有效载荷的正确 url 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:14:55.240

错误似乎在这一行 -

```
var response = UrlFetchApp.fetch(TOKEN_URL.parameters).getContentText(); 
```

我想你想要`TOKEN_URL , parameters`（注意逗号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:16:46.527

首先，如果您尝试从 Google Apps 脚本中访问 Google Drive，授权的目的是什么？无需授权即可使用 Google 云端硬盘。您是否试图让您的应用程序利用其他用户（或代表其他用户）的 gDrive？

[其次，您可以利用OAuthConfig 类](https://developers.google.com/apps-script/reference/url-fetch/o-auth-config)简化授权/请求过程，而不是手动执行授权，这很难排除故障。唯一的缺点是 OAuthConfig 当前使用 OAuth1.0（目前已弃用）。虽然它的特殊用途是 Fusion Tables，而不是驱动器，[但这个库](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/fusion-tables-class)充分利用了 OAuthConfig 和 .fetch，我已经用它来模拟我自己的 OAuth 函数。我下面的例子效果很好。该`googleAuth()`功能设置授权，然后应用程序的其余部分可以使用`UrlFetchApp.fetch(url,options)`Google 在后台执行所有授权操作来发出授权请求。

```
function googleAuth(oAuthFields) {
      var oAuthConfig = UrlFetchApp.addOAuthService(oAuthFields.service);
      oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/"+
                 "OAuthGetRequestToken?scope=" + oAuthFields.scope);
      oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
      oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
      oAuthConfig.setConsumerKey(oAuthFields.clientId);
      oAuthConfig.setConsumerSecret(oAuthFields.clientSecret);
      return {oAuthServiceName:oAuthFields.service, oAuthUseToken:"always"};
}
function fusionRequest(methodType, sql, oAuthFields, contentType) {
  var fetchArgs = OAL.googleAuth(oAuthFields);
  var fetchUrl = oAuthFields.queryUrl;
  fetchArgs.method = methodType;
  if( methodType == 'GET' ) {
    fetchUrl += '?sql=' + sql;
    fetchArgs.payload = null;
  } else{
    fetchArgs.payload = 'sql='+sql;
  }
  if(contentType != null) fetchArgs.contentType = contentType;
  Logger.log(UrlFetchApp.getRequest(oAuthFields.queryUrl, fetchArgs));
  var fetchResult = UrlFetchApp.fetch(oAuthFields.queryUrl, fetchArgs);

  if( methodType == 'GET' ) return JSON.parse(fetchResult.getContentText());
  else return fetchResult.getContentText();

} 
```

# c++ - Windows C++ 整数数组堆损坏

> ID：15711259
> 
> 赞同：0
> 
> 时间：2013-03-29T20:53:58.683
> 
> 标签：c++, arrays, visual-studio-2010, visual-studio-2012, int

我一直在为学校研究排序算法，遇到了一个奇怪的问题。当我创建一个大于六个元素的整数数组时，我会在“free.c”和堆损坏错误中遇到中断。

我将其缩小到的代码如下。

```
#include <iostream>

using namespace std;

int main(){
    int * pie = new int(7);
    pie[6] = 1;

    cout << pie[6];

    return 0;
} 
```

有时您需要分配的不仅仅是最后一个值，但是我可以在多台计算机上的 Visual Studio 2012 和 2010 上遇到此错误，但是在 Linux 中，此代码可以正常工作。

这是 Windows 的问题，我一直在做动态 int 数组错误还是什么？

注意：运行几次后，有时 VS 中的输出会说明添加堆保护分流器，这似乎解决了引发异常的测试，但仍然不能解决大型应用程序中的问题（我会觉得不得不需要将这种保护应用于我的代码）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T20:55:30.893

在这种情况下，您分配了一个具有值但将其视为元素`7`数组的整数。`7`您需要进行实际的数组分配

```
int* pie = new int[7]; 
```

在结束时释放内存也不会受到伤害`main`:)

```
delete[] pie; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T20:55:12.857

`new int(7)`分配一个`int`值 7。它不为 7 个`int`值分配空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T20:57:35.703

要解决您的问题，您需要使用：

```
int* pie = new int[7]; 
```

否则，您只分配**一个 int**。

执行下面的代码，将覆盖超出数组边界的任何内容。

```
int * pie = new int(7);
pie[6] = 1; 
```

这可能导致难以跟踪的随机错误。例如，如果它覆盖了一个指针……</p>

**更多信息在：[C++ 动态内存分配](http://www.cplusplus.com/doc/tutorial/dynamic/)**

> **运算符 new 和 new[]**
> 
> 为了请求动态内存，我们使用操作符 new。new 后跟一个数据类型说明符，并且 - 如果需要一个以上元素的序列 - 括号 []
> 中这些元素的数量。
> 它返回一个指向新
> 分配的内存块开始的指针。它的形式是： 指针 = 新类型 指针 = 新类型 [number_of_elements] 第一个表达式用于分配内存以包含一个类型类型的单个元素。第二个用于分配类型类型元素的块（数组），其中 number_of_elements 是一个整数值，表示这些元素的数量。例如：

```
int * bobby; 
bobby = new int [5]; 
```

> 在这种情况下，系统为五个 int 类型的元素动态分配空间，并返回一个指向序列的第一个元素的指针，该指针分配给 bobby。因此，现在，bobby 指向一个有效的内存块，其中有五个 int 类型元素的空间。

> **运算符 delete 和 delete[]**
> 
> 由于动态内存的必要性通常仅限于程序中的特定时刻，因此一旦不再需要它就应该释放它，以便内存再次可供其他动态内存请求使用。这就是操作符删除的目的，其格式为：

```
delete pointer;
delete [] pointer; 
```

> 第一个表达式应该用于删除为单个元素分配的内存，第二个表达式用于删除为元素数组分配的内存。
> 
> 作为参数传递给 delete 的值必须是指向先前使用 new 分配的内存块的指针，或者是空指针（在空指针的情况下，delete 无效）。

# php - 通过 PHP 脚本中弹出的魔术引号获取

> ID：15711261
> 
> 赞同：0
> 
> 时间：2013-03-29T20:54:25.523
> 
> 标签：php, magic-quotes

我的编程风格需要使用 Word，如果不破坏我使用的其他 Word 实用程序，就无法在我工作的机器上关闭魔术引号。我需要一种自动清除魔术引号的方法，如果可能的话，使用 PHP、Perl 或 JavaScript 从 PHP 脚本远程清除。

我经常会同时运行一千个或更多语句；在一个脚本上。如果只有一个魔术报价成功了，我必须通过反复试验来识别错误（它们是不可能看到的），即通过转到相同的魔术报价（左或右）并将其复制粘贴到写字板中的替换实用程序，我在其中粘贴了我的脚本，然后点击替换。

如果这种情况一天发生 40 次（最多），我可能会浪费一两个小时来完成这项愚蠢的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:25:23.580

这是我想适应我的问题的那种脚本；它不会删除前面带有 0 的行并将输出写入新文件，而是将更改的内容写入新文件，并将花引号更改为直引号。

```
?>php
$file = file("text.php");
$newLines = array();
foreach ($file as $line)
if (preg_match("/^(-\d+|0)/", $line) ===0)
$newLines[] = chop($line);
$newFile = implode("\n", $newLines);
file_put_contents("demo2.txt", $newFile);
<? 
```

# firefox - 将项目向下拖动到可见区域下方时，JQuery可排序，窗口在Firefox中不滚动

> ID：15711262
> 
> 赞同：0
> 
> 时间：2013-03-29T20:54:35.137
> 
> 标签：firefox, jquery-ui-sortable

当使用 jquery ui 可排序小部件并将项目向下拖动到浏览器中的可见区域下方时，窗口不会滚动，因此您可以将其拖放到其他项目可能所在的区域下方。我无法为 Firefox 找到答案 - 我已经看到了 Chrome 的一种解决方法，您可以在其中向可排序函数添加一个辅助属性，该函数执行以下操作：

```
helper: function (event, element) {
   return element.clone().appendTo('body');
} 
```

...但同样，这只修复了 Chrome 中的相同问题，而不是 Firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:18:17.230

尝试这样的事情

```
helper: function(){
    $('yourScrollableContainer').append('<div id="clone">' + $(this).html() + '</div>');
    $("#clone").hide();
    setTimeout(function(){
        $('#clone').appendTo('body');
        $("#clone").show();
    },1);
    return $("#clone");
} 
```

您可以参考[this](https://stackoverflow.com/questions/14241994/jquery-ui-draggable-not-scrolling-the-sortable-container)和[this](https://stackoverflow.com/questions/12670124/jqueryui-drag-elements-into-cells-of-a-scrolling-dropable-div-containing-large) question以获得更多帮助。

# angularjs - AngularJS - 不需要的 IE8 重定向

> ID：15711265
> 
> 赞同：2
> 
> 时间：2013-03-29T20:54:39.340
> 
> 标签：angularjs, internet-explorer-8, click

使用 AngularJS，这：

```
<a ng-click="Click()" ng-href="#">Click me</a> 
```

在 IE8 中重定向到 /#。就像这样：

```
<a ng-click="Click()" href="#">Click me</a> 
```

和这个：

```
<a ng-click="Click()">Click me</a> 
```

最后一个转到/。我正在遵循使 IE 快乐的所有准则：

```
<!--[if lt IE 9]>
  <script src="js/3rd party/html5.js"></script>
<![endif]-->
<!--[if lte IE 8]>
  <script>
    document.createElement('ng-include');
    document.createElement('ng-pluralize');
    document.createElement('ng-view');
    document.createElement('ng:include');
    document.createElement('ng:pluralize');
    document.createElement('ng:view');
  </script>
<![endif]-->
<!--[if lt IE 8]>
  <script src="js/3rd party/json2.js"></script>
<![endif]--> 
```

包括使用这个：

```
<div ng-view></div> 
```

它不会发生在 IE7 或任何好的浏览器中。只有IE8。

我想要它做的就是调用我的作用域的 Click 函数，而不做任何重定向。我怎样才能在 IE8 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-15T11:19:07.470

`button`在 IE8 中无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T23:08:03.420

关闭 html5Mode

```
$locationProvider.html5Mode(false); 
```

这将解决问题，但我的问题是为什么？

* * *

更好的解决方案是使用按钮而不是

```
<button ng-click="Click()" class="link">Click me</button> 
```

您可以使用 CSS 更改按钮的样式

```
button.link { border:none; background: none;}
button.link:hover {text-decoration:underline} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T09:18:54.493

我知道这是一篇旧文章，但`return false;`在 ng-click 处理程序中不起作用。

我发现我必须将 event.result 设置为 false，这样 jQuery 会在 Angular 完成后消耗事件

```
$scope.Click = function ($event) {                

            // needed for IE8 - jQuery will preventDefault action for href=#                
            if ($event != undefined) {
                $event.result = false;
            }
        } 
```

点我

如果您使用的是引导程序，这将特别有用，其中您有一个下拉菜单。例如

```
<button type="button" class="btn dropdown-toggle btn-primary" ng-disabled="disabled">
    Actions <span class="caret"></span>
</button>
<ul class="dropdown-menu" role="menu">
    <li><a href="#" ng-click="Click1($event)">Option 1</a></li>
    <li><a href="#" ng-click="Click2($event)">Option 2</a></li>
    <li><a href="#" ng-click="Click3($event)">Option 3</a></li>        
</ul> 
```

# windows-8 - Why Windows 8/AnkhSVN remove permissions?

> ID：15711266
> 
> 赞同：0
> 
> 时间：2013-03-29T20:54:40.893
> 
> 标签：windows-8, visual-studio-2012, ankhsvn

I am using `Windows 8 Pro`, `Visual Studio 2012` and `AnkhSVN`.

The problem is: when I update my solution using SVN, Windows, AnkhSVN, VS or anything else changes the permission of that file. So when I run the project I get permission denied.

I am working on an ASP.NET MVC3 project and using the local IIS 8 as my server.

I've researched and solved the problem by giving permission for my local users. But I don't want to do that for every time I update my solution.

What could be done to solve this problem? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:11:48.883

First suggestion: You should try set permission for parent folder of the folder where you have SVN enlistment. Then all folders / files should inherit permissions from parent folder.

Second suggestion: Also you can try to change User for your Application Pool, so it will be launched by your user. It is not good for security, but if this is only for your dev box, this should work.

# database-design - 为颜色+数字设计唯一性数据库表的更好方法？

> ID：15711270
> 
> 赞同：0
> 
> 时间：2013-03-29T20:55:00.953
> 
> 标签：database-design

我需要设计一个“标签”表，其中一些值本身是唯一的（例如 123456），但其中一些值是标签颜色和数字的组合（例如红色 1234）。

我可以像下面那样做，如果 TagColor 不为空，则将其纳入逻辑，但这种方式感觉不对。任何其他想法我可以如何更好地设计这个？

```
TagId TagNumber TagColor
(指导) 123456 (空)
(指导) 234567 (空)
（指导）ABC123（空）
(导) 1234 红色
(导) 2345 蓝色
(指导) 2345 绿色
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:59:06.847

`TagNumber`并且`TagColor`是单独的属性，应该这样定义。它们一起构成了一个独特的元组。然后，您将在 ( `TagNumber`, `TagColor`) 上有一个复合索引。代理键的意义何在？

# ios - 核心数据 - 创建 NSFetchedResultsController 时的运行时崩溃

> ID：15711272
> 
> 赞同：2
> 
> 时间：2013-03-29T20:55:09.977
> 
> 标签：ios, objective-c, core-data, runtime-error, nsfetchedresultscontroller

我使用的 TableViewController 类与您在 Xcode 中启动新的 Master-Detail Application 项目时创建的类非常相似。因此，我使用在 TableViewController 类中预填充的相同代码供我自己使用。但是，我遇到了运行时崩溃，我不知道为什么。我在我的应用程序的另一类中使用了这个确切的代码，它运行良好。

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Binder" inManagedObjectContext:[appDelegate managedObjectContext]];
    [fetchRequest setEntity:entity];

    // Edit the sort key as appropriate.
    //NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    //NSArray *sortDescriptors = @[sortDescriptor];

    //[fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".

//This is where it crashes
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[appDelegate managedObjectContext] sectionNameKeyPath:nil cacheName:@"Master"];
//End crash
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return _fetchedResultsController;
} 
```

我不确定要在此处包含哪些其他代码片段。当崩溃发生时，输出没有告诉我任何信息，Xcode 跳转到主线程的这一部分：

```
libsystem_kernel.dylib`__kill:
0x972893b0:  movl   $786469, %eax
0x972893b5:  calll  0x9728b4c2                ; _sysenter_trap
0x972893ba:  jae    0x972893ca                ; __kill + 26 //This is highlighted
0x972893bc:  calll  0x972893c1                ; __kill + 17
0x972893c1:  popl   %edx
0x972893c2:  movl   27739(%edx), %edx
0x972893c8:  jmpl   *%edx
0x972893ca:  ret    
0x972893cb:  nop 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T03:32:32.120

Thanks to @flashfabrixx, the problem was that I was not using a sort descriptor and they are required when using a `NSFetchedResultsController`. Once I added the sort descriptor back in, everything worked perfectly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:03:47.060

好吧，您正在做的唯一非标准的事情是您正在使用来自应用程序委托的托管对象上下文。这真的不推荐，有很多很好的理由。

尝试通过将上下文属性添加到主控制器并使用该上下文创建获取的结果控制器来更改此设置（用于获取对实体的引用和创建 FRC）。

最后，确保您的模型确实包含有效`Binder`实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:22:53.513

`nil`将托管对象上下文传递给`initWithFetchRequest:managedObjectContext:sectionNameKeyPath:cacheName:`将引发异常。我很惊讶您在控制台日志中没有看到任何内容。

尝试`NSAssert()`验证您的 MOC 和`Binder`实体都不是零。

如果您的缓存名称`NSFetchedResultsController`已用于另一个 FRC，除非两个控制器的获取请求相同，否则您将看到错误。设置一个`nil`（或不同的）`cacheName:`，看看你是否得到不同的结果。

# javascript - 客户关系管理 2011 | 从 Javascript 表单触发 Silverlight 函数

> ID：15711277
> 
> 赞同：0
> 
> 时间：2013-03-29T20:55:22.160
> 
> 标签：javascript, silverlight, dynamics-crm-2011

我正在在线开发 CRM 2011。我有一个表单并向其中添加了 Silverlight 网络资源。当查找值发生变化时，我需要触发/调用 Silverlight 函数。我完全遵循了本[指南](http://blogs.msdn.com/b/thecrmguys/archive/2011/06/13/making-up-getting-your-dynamics-crm-forms-and-silverlight-web-resources-talking-to-each-other.aspx)和其他一些具有相同概念的指南，但由于以下声明仍然无法正常运行：

```
silverlightPlugin.Content.interactionObject.FormAttributeChanged(attName, attValue); 
```

我使用了 IE 调试器，发现**Content**属性总是**undefined**。为什么它是未定义的？

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:23:10.260

我将回答我自己的问题：

问题是我引用的是 HTML 页面而不是 .XAP。

调试后设置 Content 属性。

# python - Split a python list without calling itertools' grouper function but get a error

> ID：15711282
> 
> 赞同：1
> 
> 时间：2013-03-29T20:56:10.197
> 
> 标签：python, list, itertools

In this code the grouper function works fine, however if I do it without calling the function. It throws a error

`TypeError: izip_longest argument #1 must support iteration`

```
from itertools import *

def grouper(n, iterable, fillvalue=None):
    args = [iter(iterable)] * n
return izip_longest(fillvalue=fillvalue, *args)

x = [1,2,3]

args = [iter(x)] * 2
l = izip_longest(None , *args )
#l = grouper(2,x)
print [x for x in l] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:05:33.103

All positional arguments should be iterables, not fillvalue. [Pass `fillvalue` as a keyword argument](http://docs.python.org/2/library/itertools.html#itertools.izip_longest):

```
it = izip_longest(*iterables, fillvalue=None) 
```

If `fillvalue` is `None`; you could omit it:

```
it = izip_longest(*iterables) 
```

# date - 如何仅列出名称中包含今天日期的 .log 文件和 ERROR: in their body in UNIX

> ID：15711286
> 
> 赞同：0
> 
> 时间：2013-03-29T20:56:35.250
> 
> 标签：date, unix, text-processing

我正在使用此代码获取正文中的所有`.log`文件`ERROR:`（不是名称）。但是，我想不出一种方法来仅选择名称中包含今天名称的文件。

```
ls -1 /fbrms01/dev/Logs/*.log | xargs grep -l "ERROR:" 
```

给出这个输出：

```
/fbrms01/dev/Logs/JB_Authorized_Inventory_End_2013.03.27_17.06.40.log
/fbrms01/dev/Logs/JB_Authorized_Inventory_End_2013.03.27_18.03.05.log
/fbrms01/dev/Logs/JB_Authorized_Inventory_End_2013.03.27_20.54.34.log
/fbrms01/dev/Logs/JB_CreateFormat_2013.03.18_08.27.49.log
/fbrms01/dev/Logs/JB_CreateFormat_2013.03.18_17.21.31.log
/fbrms01/dev/Logs/JB_CreateFormat_2013.03.28_15.30.41.log
/fbrms01/dev/Logs/JB_ExtReservationDetail_2013.03.15_13.06.26.log
/fbrms01/dev/Logs/JB_Report_Master_2013.03.18_09.53.38.log
/fbrms01/dev/Logs/JB_Throughput_Capacity_2013.03.28_16.49.05.log 
```

文件名称中的日期是`_yyyy.mm.dd_`格式。有什么方法可以在 unix 中获取今天的日期并将其与名称进行比较并仅提取那些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:05:05.063

你得到今天的约会

```
TODAY=$(date +"%Y.%m.%d") 
```

您可以通过以下方式找到具有特定模式的文件的名称：

```
grep -l ERROR /your/dir/* 
```

as `-l`pattern 将显示与该模式匹配的文件。

因此，您甚至可以直接 grep`$TODAY`名称中包含的文件：

```
grep -l ERROR /fbrms01/dev/Logs/JB_Authorized_Inventory_End_$TODAY*.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:37:58.373

我想这就是你要找的：

```
grep -l "ERROR:" `ls -1 /fbrms01/dev/Logs/*.log | grep "\`date +"%Y.%m.%d"\`"` 
```

# rest - ColdFusion 10 REST API：如何在没有 RestSetResponse() 的情况下设置状态代码 201

> ID：15711287
> 
> 赞同：6
> 
> 时间：2013-03-29T20:56:35.507
> 
> 标签：rest, coldfusion, coldfusion-10

我正在使用 ColdFusion 10 的新内置 REST API，我想返回状态代码 201（已创建）。我首先尝试了此处描述的 RestSetResponse() 方法：http: [//www.adobe.com/devnet/coldfusion/articles/restful-web-services.html](http://www.adobe.com/devnet/coldfusion/articles/restful-web-services.html)。它运行良好，除了它强制您将函数的返回类型设置为“void”。“void”的问题是，每当我抛出异常时，它不再返回正确的 JSON 错误消息。

抛出此异常：

```
<cfthrow errorcode="400" message="Validation error." /> 
```

当返回类型为“struct”时，返回格式良好的 JSON：

```
HTTP/1.1 400 Bad Request
Content-Type: application/json

{"Message":"Validation error."} 
```

但是当返回类型为“void”时（这是使用 RestSetResponse() 所必需的），响应是一些丑陋的 HTML 响应。

因此，我不得不恢复使用返回类型“struct”，放弃了 RestSetResponse()，并尝试了这个：

```
<cfheader statusCode="201" statusText="Created" /> 
```

但它不起作用。似乎 ColdFusion 会覆盖 statusCode 并在成功时始终返回 200（OK）。任何人都知道在不将函数的返回类型设置为“void”的情况下将状态码更改为 201 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:35:32.207

我看不出为什么`restSetResponse()`需要返回类型为 void 的充分理由，但已经证实如果不是这种情况，它会被忽略。这有点垃圾。

The only thing I can think by way of working around your situation is to roll-your-own struct with the error detail in it, then use that as the `content` value set for the `restSetResponse()` call.

This is a bit jerry-built, but you're constrainted by the jerry-built-ness of ColdFusion in this instance, I think.

I've [logged a bug](https://bugbase.adobe.com/index.cfm?event=bug&id=3546046) relating to this.

# magento - Magento：致命错误：找不到类'Mage_Catalogrule_Helper_Data'

> ID：15711295
> 
> 赞同：1
> 
> 时间：2013-03-29T20:57:05.927
> 
> 标签：magento, backend

我刚刚通过管理界面对我的网上商店进行了一些更改（没什么大不了的，比如没有短媒体 URL ..），现在每次登录 Magento 时都会显示以下错误。我看不到其他任何东西。前端仍在工作。

> 致命错误：在第 546 行的 /var/www/vhosts/mysite.com/httpdocs/app/Mage.php 中找不到类“Mage_Catalogrule_Helper_Data”

可能是什么问题，我该如何解决？如果有人可以帮助我，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:20:19.397

听起来您已经编辑了一些核心文件。

确保此文件存在：`app/code/core/Mage/CatalogRule/Helper/Data.php`

它定义了这个类：`Mage_CatalogRule_Helper_Data`

并且在 global/helpers 中声明的类`app/code/core/Mage/CatalogRule/etc/config.xml`为：

```
<config>
    <modules>
        <Mage_CatalogRule>
            <version>1.6.0.1</version>
        </Mage_CatalogRule>
    </modules>
    <global>
        <helpers>
            <catalogrule>
                <class>Mage_CatalogRule_Helper</class>
            </catalogrule>
        </helpers>
.... 
```

并刷新您的配置缓存。

还要检查您是否没有覆盖`catalogrule`任何本地/社区代码池中的帮助程序节点。

# entity-framework - 有没有办法在 MVC 4 中删除对实体框架的默认依赖？

> ID：15711298
> 
> 赞同：6
> 
> 时间：2013-03-29T20:57:12.260
> 
> 标签：entity-framework, asp.net-mvc-4, dapper

有没有办法在 ASP.NET MVC 4 项目中删除对 Entity Framework 的默认依赖，并用另一种类似技术（如[Dapper ）替换它](https://code.google.com/p/dapper-dot-net/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T22:29:40.250

如果您创建一个新的 ASP.NET MVC 4 Web 应用程序并选择“Internet 应用程序”作为项目模板，您会注意到实体框架被引用并用作 SimpleMembership 的一部分。但是，对实体框架的依赖非常小，可能不值得删除它。

**实体框架似乎仅用于 2 个小任务**

使用实体框架的第一种方法是创建存储成员数据所需的数据库模式。Dapper 不会为您创建数据库模式，如果您删除实体框架，您将不得不手动管理对您的成员模型/数据库的更改。

第二种使用实体框架的方法是在默认“AccountController”中名为“ExternalLoginConfirmation”的单个方法中，作为其 OAuth 集成的一部分。它用于注册已从外部提供商（如 Facebook）认证的新用户。

我们可以说 SimpleMembership 使用 SQL 命令而不是实体框架 [1]。

因为 SimpleMembership 使用 SQL 命令而不是实体框架，所以它应该与用于此任务的可比较的 Dapper 解决方案一样快。此外，SimpleMembership 的这种配置已经过微软和社区的广泛测试。出于这些原因，我将不理会它。处理安全问题的代码应该留给经过认证的安全专家 [2]。

**如何从新的 ASP.NET MVC 4 Web 应用程序中删除实体框架**

如果你真的想要，这个依赖很容易移除（我假设你的会员数据库已经创建并且正在工作）。

=====>**第 1 步**

在 Visual Studio 解决方案资源管理器中打开“参考”文件夹。

右键单击“EntityFramework”并选择“删除”。

=====>**第二步**

打开*过滤器/InitializeSimpleMembershipAttribute.cs*

删除以下内容：

```
using System.Data.Entity.Infrastructure; 
```

和

```
Database.SetInitializer<UsersContext>( null ); 
```

和

```
using ( var context = new UsersContext() ) {
    if ( !context.Database.Exists() ) {
        // Create the SimpleMembership database without Entity Framework migration schema
        ( ( IObjectContextAdapter ) context ).ObjectContext.CreateDatabase();
    }
} 
```

=====>**第三步**

打开：*模型/AccountModels.cs*

删除以下内容：

```
public class UsersContext : DbContext {
    public UsersContext()
        : base( "DefaultConnection" ) {
    }

    public DbSet<UserProfile> UserProfiles {
        get;
        set;
    }
} 
```

=====>**第四步**

打开：*控制器/AccountController.cs*

查找名为“ExternalLoginConfirmation”的方法。

替换以下内容：

```
using ( UsersContext db = new UsersContext() ) {
    UserProfile user = db.UserProfiles.FirstOrDefault( u => u.UserName.ToLower() == model.UserName.ToLower() );
    // Check if user already exists
    if ( user == null ) {
        // Insert name into the profile table
        db.UserProfiles.Add( new UserProfile {
            UserName = model.UserName
        } );
        db.SaveChanges(); 
```

使用您的 dapper 等效代码——代码注释告诉您需要实现什么。

如果您不使用 OAuth，您应该能够完全删除此方法和其他方法。

等瞧;)

> [1] “一切都作为 SQL 调用实现，而不需要存储过程、视图、代理和更改通知。”
> [乔恩·加洛韦，微软](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)
> 
> [2] "Let me give you all my standard caution about rolling your own cryptographic algorithms and security systems: don't. It is very, very easy to create security systems which are almost but not quite secure. A security system which gives you a false sense of security is worse than no security system at all!"
> [Eric Lippert, Legend](http://blogs.msdn.com/b/ericlippert/archive/2005/01/28/you-want-salt-with-that-part-one-security-vs-obscurity.aspx)

# css - element.style in chrome element inspector?

> ID：15711300
> 
> 赞同：51
> 
> 时间：2013-03-29T20:57:17.277
> 
> 标签：css, google-chrome, styles, google-chrome-devtools

When I inspect elements in Chrome, under my styles I have `element.style {}`, What does this refer to? It contains styles I am not including in my code source.

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-03-29T20:58:33.797

Those are inline styles.
They come from the `style=""` attribute or from Javascript code that sets `element.style.someProperty`.

# jquery - jQuery remove() 之后的斑马条纹

> ID：15711302
> 
> 赞同：0
> 
> 时间：2013-03-29T20:57:23.370
> 
> 标签：jquery

我使用 jQuery 对我的表进行斑马条纹处理，因为它适用于 ie8。

`$('table.data tr:nth-child(odd)').css('background-color', '#ececec');`

问题是，我有一个按钮可以让你删除一行。

`$(this).parents('tr').remove();`

这摆脱了斑马条纹。所以我试过：

```
$(this).parents('tr').remove();
$('table.data tr:nth-child(odd)').css('background-color', '#ececec');
$('table.data tr:nth-child(even)').css('background-color', '#ffffff'); 
```

和

```
$(this).parents('tr').remove();
$('table.data tr').css('background-color', '#ffffff');
$('table.data tr:nth-child(odd)').css('background-color', '#ececec'); 
```

两者都不起作用。`.remove()`没有回调函数，否则我会将斑马条纹放入其中。有任何想法吗？

编辑 - 上面的代码有效，但存在 css 冲突。（见下面的答案）。然而，冲突并没有设置背景颜色。所以，我仍然想知道为什么规则会导致冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:01:58.967

`.remove`不需要回调，因为它是同步的。我建议远离`.css`并使用一个类，这样您就可以简单地删除该类，然后将其添加回奇数行。

进行初始条带化：

```
$('table.data tr:nth-child(odd)').addClass('odd'); 
```

然后删除：

```
$(this).parents('tr').remove();
$('table.data tr').removeClass('odd').filter(':nth-child(odd)').addClass('odd'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:06:42.030

如果您的目标是相当现代的浏览器（IE 9+），您可以使用 CSS3 样式表来处理所有这些。

样式.css：

```
table.data tr:nth-child(odd)
{
    background-color: #ececec;
}
table.data tr:nth-child(even)
{
    background-color: #ffffff;
} 
```

不需要javascript；这些规则由浏览器应用，并在 DOM 更改时自动重新应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:20:56.420

发现了问题。

我的问题中的代码有效，但存在 CSS 冲突。奇怪的是，导致冲突的 css 规则没有设置`background-color`

```
table.headerShadow tr:nth-child(2) {
    background-image:url(../_images/faux-shadow.png);
    background-repeat:repeat-x;
} 
```

删除规则可以解决问题。奇怪，嗯？为什么这条规则会引起冲突？

这是一个要演示的小提琴：http: [//jsfiddle.net/W7yZC/2/](http://jsfiddle.net/W7yZC/2/)

# emacs - 是否可以从其他代码块调用 Org Babel 代码块？

> ID：15711303
> 
> 赞同：5
> 
> 时间：2013-03-29T20:57:25.133
> 
> 标签：emacs, org-mode, org-babel

我的 Babel 库中有许多 Org Babel 代码块，我经常按顺序调用它们。

是否可以制作一个按顺序调用这些其他代码块的 Org Babel 代码块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T14:53:45.450

是的，我有几个 org-babel 文件在其中执行此操作。这是一种方法：

```
#+srcname: foo
#+begin_src python :exports code :tangle yes
  def foo():
      print "I'm foo()"
#+end_src

#+name: bar
#+begin_src python :exports code :tangle yes
  def bar():
      foo()
      print "I'm bar()'"
#+end_src

#+srcname: main
#+begin_src python :exports code :tangle yes
  foo()
  bar()
#+end_src 
```

其输出是一个如下所示的文件：

```
def foo():
    print "I'm foo()"

def bar():
    foo()
    print "I'm bar()'"

foo()
bar() 
```

如果 org 文件中的代码与您想要生成的顺序不同，您可以使用 noweb 标签按照您想要的顺序生成代码文件，如下所示：

```
#+name: bar
#+begin_src python :noweb-ref bar :tangle no
  def bar():
      foo()
      print "I'm bar()'"

#+end_src

#+srcname: foo
#+begin_src python :noweb-ref foo :tangle no
  def foo():
      print "I'm foo()"

#+end_src

#+begin_src python :noweb tangle :tangle yes

  <<foo>>
  <<bar>>

  foo()
  bar()
#+end_src 
```

纠结这个的输出是：

```
def foo():
    print "I'm foo()"

def bar():
    foo()
    print "I'm bar()'"

foo()
bar() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T21:55:23.693

是的你可以。只需使用 :var ，其中参数是另一个块执行的结果。

```
#+name: clean
#+begin_src ...
...
#+end_src

#+name: plot
#+begin_src :var data=clean
...
#+end_src 
```

# android - Photoshop 设计到 Android 屏幕

> ID：15711307
> 
> 赞同：0
> 
> 时间：2013-03-29T20:57:40.220
> 
> 标签：android

我有一些我使用 Photoshop 开发的 Android 移动应用程序的屏幕设计……它们可以用来开发屏幕吗？如果可以，它们是如何从 psd 转换为 android 屏幕的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:00:01.100

将任何版本的 Photoshop 或其他编辑软件中的图像导出为“.png”格式的平面文件。

您可以通过多种方法将这些图像设置为 Android 壁纸。最简单的可能是将图像通过电子邮件发送到您的设备，然后长按显示的图像并选择“设置为墙纸”。

更复杂的解决方案包括创建一个 Android 应用程序来在手机上设置图像，例如这个[墙纸教程](http://www.helloandroid.com/tutorials/wallpaper-tutorial-part-2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:35:37.267

通过裁剪 Photoshop 文件创建 .png 文件。然后在您的对象中使用这些图像（图像或图像按钮等）。首先，您应该阅读如何在 Android 开发人员指南[http://developer.android.com/guide/topics/ui/index.html上设计界面](http://developer.android.com/guide/topics/ui/index.html)

# c++ - 编辑控件捕获回车键

> ID：15711311
> 
> 赞同：8
> 
> 时间：2013-03-29T20:57:58.493
> 
> 标签：c++, winapi

我有一个编辑控件

```
HWND hInput = CreateWindowEx(WS_EX_CLIENTEDGE, "EDIT", "", 
    WS_CHILD | WS_VISIBLE | WS_VSCROLL | ES_MULTILINE | ES_AUTOVSCROLL, 
    0, 0, 100, 100, hwnd, (HMENU)IDC_MAIN_INPUT, GetModuleHandle(NULL), NULL); 
```

和一个按钮：

```
HWND hSendButton = CreateWindowEx(WS_EX_CLIENTEDGE,"BUTTON","Send!",
        BS_DEFPUSHBUTTON | WS_VISIBLE | WS_CHILD,
        0,0,0,0,hwnd,(HMENU)IDC_MAIN_SENDBUTTON,GetModuleHandle(NULL),NULL); 
```

有没有办法查看在编辑控件中键入时按下 Enter 键并发送消息，如按下按钮？

我想也许

```
SendMessage(hwnd,WM_COMMAND,(WPARAM)IDC_MAIN_SENDBUTTON,LPARAM(0)); 
```

会完成发送消息的工作，但我仍然坚持捕获 Enter 键。

先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T21:04:25.793

您需要子类化编辑控件并处理 WM_KEYDOWN 消息。如果它是您想要的密钥，请发送消息，否则，让默认的编辑控制程序完成它的工作。

代码如下：

```
WNDPROC oldEditProc;

LRESULT CALLBACK subEditProc(HWND wnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
   switch (msg)
   {
    case WM_KEYDOWN:
         switch (wParam)
         {
          case VK_RETURN:
          //Do your stuff
              break;  //or return 0; if you don't want to pass it further to def proc
          //If not your key, skip to default:
         }
    default:
         return CallWindowProc(oldEditProc, wnd, msg, wParam, lParam);
   }
   return 0;
}

void somecreateeditproc()
{
  HWND hInput = CreateWindowEx(WS_EX_CLIENTEDGE, "EDIT", "", 
    WS_CHILD | WS_VISIBLE | WS_VSCROLL | ES_MULTILINE | ES_AUTOVSCROLL, 
    0, 0, 100, 100, hwnd, (HMENU)IDC_MAIN_INPUT, GetModuleHandle(NULL), NULL);

  oldEditProc = (WNDPROC)SetWindowLongPtr(hInput, GWLP_WNDPROC, (LONG_PTR)subEditProc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-24T14:24:40.537

我在对话框中这样做：

```
BOOL CDialogObject::PreTranslateMessage(MSG* pMsg)
{
    if (pMsg->message == WM_KEYDOWN && pMsg->wParam == VK_RETURN)
    {
        SendMessage(WM_COMMAND, (WPARAM)IDC_BUTTON3,LPARAM(0));
    }
    return CDialog::PreTranslateMessage(pMsg);
} 
```

# c++ - 从 cvFindContour 中提取对象

> ID：15711313
> 
> 赞同：0
> 
> 时间：2013-03-29T20:58:02.507
> 
> 标签：c++, opencv, contour

我可以在网络摄像头的捕获中使用 cvFindContour 绘制一些轮廓，但现在我想将每个轮廓存储到某个对象中。

这里的目标是在相机的捕捉上进行活体检测，但我真的不知道如何处理这些轮廓。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:12:59.297

> *我想将每个轮廓存储到某个对象中*

好吧，如果您执行以下操作：

```
// detect edges using canny:
Mat edges;
Canny(myImg, edges, 100, 200, 3);

vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
findContours(edges, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_NONE); 
```

`findContours`通话后，`contours`矢量已经保存了您的轮廓。

> *我真的不知道如何处理这些轮廓*

这是完全不同的问题，对于您的具体领域，具体方法非常具体......没有人可以告诉您究竟***应***该做什么，但您可以研究一些现有的解决方案并了解更多关于当前状态的信息以找出你***能做***什么。你需要自己做:)

# ruby-on-rails - 从嵌入式文档中的数组中提取

> ID：15711314
> 
> 赞同：0
> 
> 时间：2013-03-29T20:58:04.820
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, mongodb, mongoid

我有三个文件。

```
User
List
Food 
```

一个列表可以包含许多食物，并且嵌入在用户文档中。我的控制器中有一个动作，当用户完成食物项目时，循环遍历用户的列表并删除列表与用户完成的特定食物之间的任何关联。

```
@user.lists.to_a.each do |list|

  list.food_ids.to_a.map do |food_id|
    if food_id.eql? params[:food_id]

      food = Food.find(params[:food_id])

      # Pull food from list
      list.pull(:foods, food)

    end
  end
end

@user.save 
```

我的模型

# 用户

```
class User

  # INCLUDES
  # ========
  include Mongoid::Document

  include Mongoid::Paperclip

  include Mongoid::MultiParameterAttributes

  include Mongoid::Spacial::Document

  # EMBEDDING
  # =========
  embeds_many :lists

  # NESTED ATTRIBUTES
  # =================
  accepts_nested_attributes_for :lists
end 
```

# 列表

```
class List
  include Mongoid::Document

  has_and_belongs_to_many :foods

  embedded_in :user

  belongs_to: popular_list  
end 
```

# 食物

```
class Food

  # INCLUDES
  # ========
  include Mongoid::Document

  include Mongoid::Timestamps

  include Mongoid::Paperclip

  include Mongoid::Spacial::Document

  # ASSOCIATIONS
  # ============
  belongs_to :user

  has_and_belongs_to_many :popular_lists

end 
```

问题是，我的代码不会从列表中删除食物项目。我的问题是如何遍历一个数组，从该数组中拉出一个项目，并期望保存新数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:03:54.590

由于两个问题，它不起作用：首先，您不能 embed `List`，因为您有来自/到它的引用（关系）。用普通的`belongs_to :user`.

You cannot have relations to embedded models, because the other side will only store the id. If you use that relation, Mongoid will call `MyEmbeddedModel.find(related_id)` which cannot find the embedded model, because it's inside another document and not an own collection.

Second, your code is missing the counterparts for `belongs_to :user` and `has_and_belongs_to_many :foods`. The [documentation](http://mongoid.org/en/mongoid/docs/relations.html#embeds_one) states: `Definitions are required on both sides to the relation in order for it to work properly.` If you add these ([see my gist](https://gist.github.com/pascalj/e0fd4ea9847aeb1d9776)), Mongoid will raise an error that also suggests not to embed `List`:

> (Mongoid::Errors::MixedRelations)
> 
> **Problem**: Referencing a(n) List document from the Food document via a relational association is not allowed since the List is embedded.
> 
> **Summary**: In order to properly access a(n) List from Food the reference would need to go through the root document of List. In a simple case this would require Mongoid to store an extra foreign key for the root, in more complex cases where List is multiple levels deep a key would need to be stored for each parent up the hierarchy. Resolution: Consider not embedding List, or do the key storage and access in a custom manner in the application code.

# opencv - 从训练集中识别图像，JavaCV

> ID：15711316
> 
> 赞同：1
> 
> 时间：2013-03-29T20:58:09.450
> 
> 标签：opencv, set, javacv

所以基本上我在做一个关于图像识别的项目，我正在尝试使用识别器来识别一个人，当我需要识别器为我扫描图像的每个文件夹使用不同的训练集时，怪癖就来了。

遍历文件夹的代码如下：

```
public class FileIterator {
int ft; int et; int at;
OpenCVFaceRecognizer recogniser;
public FileIterator(int ft, int et, int at){
    this.ft=ft;
    this.et=et;
    this.at=at;
}

public void main() {
    OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);
File[] files = new File("C:/Users/David/Documents/NetBeansProjects/Honours Project/storage").listFiles();

JOptionPane jP=new JOptionPane();
jP.showMessageDialog(jP, "Please look at the camera");

   try{
        grabber.start();
             System.out.println("Grabbing");
      try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
            Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
        IplImage img = grabber.grab();
        if (img != null) {
           try{
            BufferedImage img1 =img.getBufferedImage();
             File image = new File("recognize.jpg");
            ImageIO.write(img1, "jpg", image);
                System.out.println("Image written");
           }
             catch(Exception x){
                 x.printStackTrace();
             }
             grabber.stop();

        }

         } catch (Exception e) {
            e.printStackTrace();
        }
showFiles(files);
}

public void showFiles(File[] files) {
for (File file : files) {
    if (file.isDirectory()) {
        System.out.println("\n---- Directory: " + file.getName()+" ----");
        // showFiles(file.listFiles());
        recogniser = new OpenCVFaceRecognizer ("storage/"+file.getName(),"recognize.jpg",ft,et,at);           
    } else {
        System.out.println("File: " + file.getName());
    }
}
}
} 
```

因此，识别器类将训练目录和图像作为参数进行比较（其余为阈值设置）。我为每个循环提供一个目录并保持图像识别相同。

现在识别器无论如何都识别出它训练过的人，即即使文件中的人与图片中的人不同，他们仍然会被识别并允许通过。有谁知道如何解决这个问题？

谢谢

ps，（如果您需要识别器类的代码，请告诉我）。

# c++ - 'std::pair' : 使用类模板需要模板参数列表

> ID：15711317
> 
> 赞同：0
> 
> 时间：2013-03-29T20:58:16.460
> 
> 标签：c++, unordered-map, std-pair

我正在尝试创建一个 unordered_map，其键将是 Gdiplus::Color 类的成员和一个浮点数，但我不知道为什么我不能这样做。这是我的宣言

```
std::unordered_map<std::pair(Gdiplus::Color, float), std::shared_ptr<Gdiplus::Pen>> mymap; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:58:54.517

您为您的`std::pair`类型使用了错误类型的括号。模板参数应在尖括号中给出：

```
std::pair<Gdiplus::Color, float> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:59:22.883

您实例化类模板的语法`std::pair`不正确：它应该是

```
 std::pair<Gdiplus::Color, float>
 //       ^                     ^ 
```

用尖括号代替圆括号。因此，整个声明变为：

```
std::unordered_map<
    std::pair<Gdiplus::Color, float>, 
//           ^                     ^
    std::shared_ptr<Gdiplus::Pen>
    > mymap; 
```

# python - Python 错误：能够从命令行但不能从 IDE 运行程序

> ID：15711318
> 
> 赞同：1
> 
> 时间：2013-03-29T20:58:28.033
> 
> 标签：python, python-2.7, jython

我正在尝试使用 Charm Cryptography 库。我已经安装了该库，并且可以看到 Python/Lib/site-packages 中的彩蛋。当我使用命令行运行以下程序时，它确实如此，但是当我尝试将 Eclipse 与 PyDev 插件一起使用时，它给了我这个错误。我使用的是 Python 2.7、Windows 7。如果需要任何其他信息，请告诉我。

```
Traceback (most recent call last):
  File "C:\Users\raunak\Documents\workspace1\ABETest\src\test\ABETest.py", line 6, in <module>
    from charm.toolbox.pairinggroup import PairingGroup,GT
  File "C:\Python27\Lib\site-packages\Charm_Crypto-0.42-py2.7-win32.egg\charm\toolbox\pairinggroup.py", line 2, in <module>
    from charm.core.math.pairing import pairing,ZR,G1,G2,GT,init,pair,hashPair,H,random,serialize,deserialize,ismember,order
ImportError: DLL load failed: The specified module could not be found.

from charm.toolbox.pairinggroup import PairingGroup,GT
from charm.schemes.abenc.abenc_waters09 import CPabe09
group = PairingGroup('SS512')
cpabe = CPabe09(group)
msg = group.random(GT)
(master_secret_key, master_public_key) = cpabe.setup()
policy = '((ONE or THREE) and (TWO or FOUR))'
attr_list = ['THREE', 'ONE', 'TWO']
secret_key = cpabe.keygen(master_public_key, master_secret_key, attr_list)
cipher_text = cpabe.encrypt(master_public_key, msg, policy)
decrypted_msg = cpabe.decrypt(master_public_key, secret_key, cipher_text)
print decrypted_msg == msg 
```

**更新：**

```
Python Path from IDE:
['C:\\Users\\raunak\\Documents\\workspace1\\ABETest\\src\\test', 
'C:\\Users\\raunak\\Documents\\workspace1\\ABETest\\src', 
'C:\\Python27\\Lib\\site-packages\\distribute-0.6.35-py2.7.egg', 
'C:\\Python27\\Lib\\site-packages\\Charm_Crypto-0.42-py2.7-win32.egg', 
'C:\\Python27\\DLLs', 
'C:\\Python27\\lib', 
'C:\\Python27\\lib\\plat-win', 
'C:\\Python27\\lib\\lib-tk', 'C:\\Python27', 
'C:\\Python27\\lib\\site-packages', 
'C:\\eclipse\\plugins\\org.python.pydev_2.7.3.2013031601\\pysrc\\pydev_sitecustomize', 
'C:\\Windows\\system32\\python27.zip', 
'C:\\Python27\\lib\\plat-win']

Python From Command Line:
['C:\\', 
'C:\\Python27\\lib\\site-packages\\distribute-0.6.35-py2.7.egg', 
'C:\\%JYTHONPATH%', 
'C:\\Windows\\system32\\python27.zip', 
'C:\\Python27\\DLLs', 
'C:\\Python27\\lib', 
'C:\\Python27\\lib\\plat-win', 
'C:\\Python27\\lib\\lib-tk', 
'C:\\Python27', 
'C:\\Python27\\lib\\site-packages', 
'C:\\Python27\\lib\\site-packages\\Charm_Crypto-0.42-py2.7-win32.egg'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:10:54.467

这可能是 Python 路径问题。比较运行：

```
import sys
print sys.path 
```

在你的命令行与通过 PyDev。

找到丢失的项目后，您可以像任何其他列表一样添加到 python 路径，例如：

```
import os
sys.path.append(os.path.join("C:\\", "folder", "file")) 
```

# jquery - jQuery - 砌体布局问题

> ID：15711321
> 
> 赞同：1
> 
> 时间：2013-03-29T20:58:39.420
> 
> 标签：jquery, layout, jquery-plugins, jquery-masonry

第一次使用 jquery，我试图让基本的砌体风格工作，我的 html 中有以下代码......

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<head>

<title>_Box</title>

<link href="styles.css" rel="stylesheet" type="text/css">

<body>

<script src="jquery.js"></script>
<script src="masonry.js"></script>
<script>
$(window).ready(function() {
    $("#container").masonry({
          itemSelector: '.item',
          columnWidth: 240,
          isAnimated: !Modernizr.csstransitions
        });
});
</script>

<div id="container">

<div class="item"><img src="images/eventbox.png"></img></div>
<div class="item"><img src="images/forumbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/weekbox.png"></img></div>
<div class="item"><img src="images/top10box.png"></img></div>
<div class="item"><img src="images/eventbox.png"></img></div>

</div>

</body>
</head> 
```

以及我的css文件中的以下内容......

```
html {
  height:100%;
}

body {
  width:950px;
  height:100%;
  margin:0 auto;
  margin-top:100px;
  background-image: url(images/gridbg.png);
}

.item{
    float: left;
    padding: 5px;
    margin: 5px;
} 
```

任何帮助都会很棒，因为我几乎遵循了教程但它不起作用

这就是它的样子

[http://i47.tinypic.com/2jfdr7n.jpg](http://i47.tinypic.com/2jfdr7n.jpg)

如果有帮助，图像的宽度和高度不同。

问题：我怎样才能得到砌体应该做的布局，很好地相互融合；砌体现场的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:57:44.313

在 jQuery Masonry 示例中，它为包装器定义了额外的 CSS。

你尝试过不同的 CSS 定义吗？它可能正在寻找高度和宽度属性来获取页面上对象的测量值。

I would also suggest checking your implementation with a document ready and not window like what you have: `$(window).ready(function() {` >>> `$(document).ready(function() {`

Check out the source from the Masonry site. It's definitely different than what you have here and then use firebug or something similar to debug.

```
 var $items = $( items.join('') );
    $items.imagesLoaded(function(){
      $container
        .masonry( 'remove', $loadingItem ).masonry()
        .append( $items ).masonry( 'appended', $items, true );
    }); 
```

# java - 我对 Intellij、JSON 和 JAVA 比较陌生，我很难使用 JSON-LIB.JAR，很多方法都不起作用，我可能哪里出错了？

> ID：15711323
> 
> 赞同：0
> 
> 时间：2013-03-29T20:58:46.173
> 
> 标签：java, json, intellij-idea

所以我按下了 ctrl+shift+alt+s 并在项目库中弹出了 json-lib-2.4-jdk15.jar ，我发现我现在可以`JSONObject obj = new JSONObject`正常使用了。我不能继续在那里使用`assertEquals`，只是似乎没有任何合适的导入文件有效，我也不能像示例中那样使用公共类。

我是一个非常中级的初学者，我不知道我期望如何将编码的 json 对象发送到任何地方，或者我将如何在他们回来的路上收听它们。我没有做过任何教程，我想知道我是否先安装了库。

他们也是一种我可以永久添加 json 库的方式，以便我可以在我喜欢的时候自由使用 JSOn？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:44:14.847

这里有几个问题......我会尽我所能回答他们。

> 我不能继续在那里使用`assertEquals`，只是似乎没有任何合适的导入文件有效。

根据`assertEquals`您的需要，您必须导入包含所需方法的正确类。这可能`net.sf.json.test.JSONAssert`位于 json lib jar 中或`junit.org.Assert`位于 junit jar 中。如果对方法进行静态导入，则不需要为类添加前缀；就像是

```
import static net.sf.json.test.JSONAssert.assertEquals; 
```

但是如果您需要两者（方法具有相同的名称，但采用不同的参数），您可能应该导入类并在引用它们时使用类前缀。

> 我也不能像示例中那样使用公共类

抱歉，如果没有更多信息，就无法在这方面为您提供帮助。如果您无法弄清楚，您需要提供有关您无法访问哪些类以及您收到哪些错误消息的信息。

听起来您提到的课程确实位于*另一个 jar*中。即，如果您可以访问`JSONObject`但不能访问这些其他类，则它们不包含在 json lib jar 中。提示：尝试[findjar](http://www.findjar.com/)来定位您的课程。

> 我想知道我是否先安装了库。

对于它的价值，我认为您在这里按正确的顺序进行操作。在尝试进行高级编码之前，首先要掌握基础知识。

> 他们也是一种我可以永久添加 json 库的方式，以便我可以在我喜欢的时候自由使用 JSOn？

在我看来，这并不是一个好主意。我想你*可以*将它添加到`lib`idea安装的目录中（我自己从未真正尝试过），但是当你开始拥有多个项目时，它*会变*得很痛苦。当一个项目需要最新最好的库版本而您的另一个项目由于某种原因需要旧版本时会发生什么？

相信我，随着项目的增长以及开始处理多个项目，库依赖项将成为您需要考虑的事情。您可能需要使用一些外部构建工具，例如[gradle](http://www.gradle.org/)或[maven](http://maven.apache.org/)来跟踪这些依赖关系，并确保您的项目能够独立于所选的 IDE 正确构建。

同样，您以正确的顺序执行此操作；在研究构建工具之前先学习编程语言和 IDE。但是，请只需将您需要的 jar 添加到项目中即可。不要使这些依赖关系“全局”。

编辑：关于“ [findjar](http://www.findjar.com/) ”的提示

# python - gtk 3 弹出菜单

> ID：15711326
> 
> 赞同：0
> 
> 时间：2013-03-29T20:58:56.123
> 
> 标签：python, menu, gtk

我正在用 python 编程 GTK 3.4（使用 GObject 内省）。我不明白为什么在 cb2 函数中创建的菜单不显示，或者有时会闪烁和消失，而单击 bc1 工作正常。

在用户单击按钮之前，程序并不知道要放在菜单上的所有项目。有任何想法吗？

```
#!/usr/bin/python

from gi.repository import Gtk

def create_menu():
    m = Gtk.Menu()
    item = Gtk.MenuItem(u"piano")
    m.append(item)
    m.show_all()
    return m

menu1 = create_menu()

def cb1(widget):
    menu1.popup(None, None, None, None, 0, 0)
    return True

def cb2(widget):
    menu2 = create_menu()
    menu2.popup(None, None, None, None, 0, 0)
    return True

w = Gtk.Window()
grid = Gtk.Grid()
w.add(grid)

b1 = Gtk.Button("cb1")
grid.add(b1)
b1.connect('clicked', cb1)

b2 = Gtk.Button("cb2")
grid.add(b2)
b2.connect('clicked', cb2)

w.connect('destroy', Gtk.main_quit)
w.show_all()
Gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T08:46:10.100

我不熟悉python绑定

不要在回调中创建菜单，只需用项目填充它

```
m = Gtk.Menu()

def populate_menu(widget)
  item = Gtk.MenuItem(u"piano")
  m.append(item)
  m.show()
  return True

w = Gtk.Window()
grid = Gtk.Grid()
w.add(grid)

b1 = Gtk.Button("foofoo")
grid.add(b1)
b1.connect('clicked', populate_menu)
... 
```

# javascript - Dojo 1.8 用提供的 JsonRest 的对象和子对象填充增强网格

> ID：15711344
> 
> 赞同：1
> 
> 时间：2013-03-29T21:00:10.983
> 
> 标签：javascript, dojo, dojox.grid

有没有办法用 JSON 结构中的子对象填充 dojox/grid/EnhancedGrid 的列？例如，如果我有一个看起来像这样的 JSON-Row：

```
 {
        id: 2,
        name: "TestItem2",
        created: {
             date: "2013-03-28 11:59:40",
             timezone_type: 3,
             timezone: "Europe/Berlin"
        }
   } 
```

我想在“创建”子对象中用“日期”填充网格的一列。我已经尝试过在网格的“结构”属性中将列的“字段”属性设置为“created.date”，但这并没有起到作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:20:20.657

[显然](http://dojotoolkit.org/reference-guide/1.8/dojox/grid/DataGrid.html)，您可以在这种情况下使用格式化程序：

```
var structure = [[
    {'name': 'Date', 'field': '_field', formatter: myFormatter }
]]; 
```

这会将整个节点从商店传递到一个调用的函数`myFormatter`中，您可以从中传递相关条目，例如：

```
function myFormatter(node, rowIdx){
    return node.created.date;
}; 
```

另请参阅 citress 的答案：[Dojo 网格嵌套 json](https://stackoverflow.com/questions/6954704/dojo-grid-nested-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:54:56.057

这有点邪恶和蹩脚，但也许改变对象结构会帮助你进入网格。听起来你只想要日期，所以你可以这样做：

```
var o = {
    id: 2,
    name: "TestItem2",
    created: {
         date: "2013-03-28 11:59:40",
         timezone_type: 3,
         timezone: "Europe/Berlin"
    }
};

o.created = o.created.date; 
```

现在对象看起来像这样：

```
created: "2013-03-28 11:59:40"
id: 2
name: "TestItem2" 
```

这是来自控制台的示例：

![这是来自控制台的示例](../Images/027a5d14eb38e877d8170ff30d1f9d33.png)

# php - 标头“X-XSS-Protection：0”不能防止错误

> ID：15711345
> 
> 赞同：2
> 
> 时间：2013-03-29T21:00:12.333
> 
> 标签：php, .htaccess, redirect, http-headers

提交带有 Vimeo 视频链接的表单后，视频未显示并且 Safari 返回：`Refused to execute a JavaScript script. Source code of script found within request.`刷新后视频会显示。这个之前已经讨论[过](https://stackoverflow.com/questions/4635403/how-to-set-http-header-x-xss-protection/)了。当我在 .htaccess 文件中添加这一行时，Kendall Hopkins 的解决方案非常有效：

```
 Header set X-XSS-Protection 0 
```

但显然我更喜欢只添加一次标题：在提交表单之后。不幸的是，这不起作用：

```
 header("X-XSS-Protection: 0");
    header($redirect); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:44:37.973

如果没有更多您的代码，我无法确定，但我感觉您正在重定向到在*重定向*HTTP 回复`X-XSS-Protection: 0`上设置了标头的页面。

 *如果我理解`X-XSS-Protection`正确的解释，您将需要在实际重定向*到*的页面上正确设置此标头。

警告：`X-XSS-Protection`不是标准标题。也就是说，我认为 Safari 支持它。*

# compiler-construction - 编译 Clementine 时 Mac OS X 上的编译器错误

> ID：15711347
> 
> 赞同：2
> 
> 时间：2013-03-29T21:00:20.570
> 
> 标签：compiler-construction, clang, homebrew, macports

我尝试在 Mac OS X Mountain Lion 上构建[Clementine ，](http://code.google.com/p/clementine-player/)

最终在其 gstreamer 依赖项中出现了许多错误。克莱门汀错误看起来像

```
 /usr/lib/clang/4.2/include/stddef.h:31: syntax error, unexpected '(' in 'typedef __typeof__(((int*)0)-((int*)0)) ptrdiff_t;' at '('
 /usr/lib/clang/4.2/include/stddef.h:35: syntax error, unexpected SIZEOF in 'typedef __typeof__(sizeof(int)) size_t;' at 'sizeof'
/usr/include/time.h:131: syntax error, unexpected identifier in 'size_t strftime(char * restrict, size_t, const char * restrict, const struct tm * restrict) __asm("_" "strftime" );' at 'size_t'
/usr/include/time.h:131: syntax error, unexpected ',', expecting identifier or '(' in 'size_t strftime(char * restrict, size_t, const char * restrict, const struct tm * restrict) __asm("_" "strftime" );' at ','
/usr/include/time.h:131: syntax error, unexpected ',', expecting identifier or '(' in 'size_t strftime(char * restrict, size_t, const char * restrict, const struct tm * restrict) __asm("_" "strftime" );' at ','
/usr/include/time.h:131: syntax error, unexpected ')', expecting identifier or '(' in 'size_t strftime(char * restrict, size_t, const char * restrict, const struct tm * restrict) __asm("_" "strftime" );' at ')'
/usr/include/pthread.h:256: syntax error, unexpected identifier in '                                      size_t * restrict);' at 'size_t'
/usr/include/pthread.h:265: syntax error, unexpected identifier in '                                      void ** restrict, size_t * restrict);' at 'size_t'
/usr/include/pthread.h:269: syntax error, unexpected identifier in '                                      size_t * restrict);' at 'size_t'
/usr/include/pthread.h:273: syntax error, unexpected identifier in 'int pthread_attr_setguardsize(pthread_attr_t *, size_t );' at 'size_t'
/usr/include/pthread.h:282: syntax error, unexpected identifier in '                                      void *, size_t );' at 'size_t'
/usr/include/pthread.h:285: syntax error, unexpected identifier in 'int pthread_attr_setstacksize(pthread_attr_t *, size_t );' at 'size_t'
/usr/include/pthread.h:377: syntax error, unexpected identifier in 'int pthread_getname_np(pthread_t,char*,size_t) __attribute__((availability(macosx,introduced=10.6)));' at 'size_t'
/usr/include/pthread.h:384: syntax error, unexpected identifier in 'size_t pthread_get_stacksize_np(pthread_t);' at 'size_t'
/usr/include/stdio.h:255: syntax error, unexpected identifier in 'size_t fread(void * restrict, size_t, size_t, FILE * restrict);' at 'size_t'
/usr/include/stdio.h:255: syntax error, unexpected ',', expecting identifier or '(' in 'size_t fread(void * restrict, size_t, size_t, FILE * restrict);' at ',' 
```

在我的系统上，我安装了带有命令行工具的 Xcode4.6，还有 MacPorts 和 HomeBrew。难道是三个系统之间存在冲突的问题？我尝试在项目 makefile 中添加更多 -I ，但它们似乎没有修复错误。

# python - 使用循环在python中用字符串替换方法

> ID：15711349
> 
> 赞同：0
> 
> 时间：2013-03-29T21:00:34.257
> 
> 标签：python, replace

我有以下代码：

```
secretWord = 'hello'
letter = 'l'
tag = '_ '*len(secretWord) # tag = '_ _ _ _ _'

for m in rage(len(secretWord)):
    if letter == secretWord[m] and m == 0:
         tag.replace(tag[m],letter)
    else:
         tag.replace(tag[m+2],letter) 
```

我想要的理想输出是`tag = '_ _ l l _'` 出于某种原因，即使我的逻辑完全准确，我也无法让它工作。我有一个 for 循环遍历 secretWord 中的每个字符，如果字母等于当时在 for 循环中的特定字符，则用该字母替换标记中的适当位置并保持所有其他空白（'_'）相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:04:10.073

字符串在 Python 中是不可变的，您不能修改它们。这就是你`tag`没有更新的原因。

Python 有一个非常奇怪但有用的数据模型。有些类型是可变的（例如列表和字典），有些是不可变的（例如字符串和数字）。

字符串实例的`replace()`函数（实际上是所有其他字符串函数）不能修改字符串。相反，它返回原始字符串的新修改版本。

python 和非托管编程语言（如 C/C++）之间更大的区别之一是，在 python 中，变量总是对值的引用，而在 C/C++ 中，变量是值的实际存储。

奇怪的是，当从 python 开始时，这在一定程度上可以忽略，因为某些算法的语法是相同的。就像是：

```
a = 7
a += 35
s = "Hello"
s += " World" 
```

在 Python 和 C/C++ 中产生`a = 42`和。`s = "Hello World"`这对于 C/C++ 来说是很清楚的，但在 python 中却发生了一些完全不明显的事情。

在python`s`中首先指的是字符串`"Hello"`（不是：`s`包含字符串`"Hello"`）。然后将字符串`Hello`和字符串`World`连接起来，然后将引用`s`重置为指向新字符串`"Hello World"`。

接下来的事情`a = b`总是意味着：复制参考。它永远不会复制该值。对于字符串和整数，它在实践中并没有太大的区别，但对于更复杂的类型却有。但这现在可能超出了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:04:09.320

让`tag`是已知或空白字符的列表。用于`' '.join(tag)`在需要时制作显示的表格。

* * *

```
secretWord = 'hello'
letter = 'l'

tag = ['_']*len(secretWord)
tag = [(letter if m == letter else t) for m, t in zip(secretWord, tag)]

print(' '.join(tag))
# _ _ l l _ 
```

* * *

以下是一些解释此解决方案中使用的工具的链接：

*   `[expr for variable in iterable]`是一个[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。
*   `letter if m == letter else t`是一个[条件表达式](http://docs.python.org/reference/expressions.html#conditional-expressions)。
*   [`zip`](http://docs.python.org/2/library/functions.html#zip)用于将 中的字母与 中的`secretWord`字母 配对`tag`。
*   [`' '.join`](http://docs.python.org/2/library/stdtypes.html#str.join)用于将字母列表连接成单个字符串，每个字母之间有一个空格。

# r - How can I draw a graph with three variables on the y axis in R?

> ID：15711350
> 
> 赞同：2
> 
> 时间：2013-03-29T21:00:35.170
> 
> 标签：r, axis, sharing

I have a data set with a nominale variable "count session" and three other quantitatives variables including wildlife counts from three different methods. I would like to plot my group sizes from the different methods (y-axis) against the count session. I am a beginner with R. Do you know any function that would allow me to do that?

@siva974: Data belongs in the question *not* in comments:

```
 COUNT 
SESSION MEANVISUAL MEANOVERLAP MEANWIDEANGLE 
1 290 286 NA 
2 137 132 120 
3 289 280 289 
4 310 287 250 
5 280 286 260 
6 139 142 144 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:12:21.920

Generally in base graphics you would create an initial plot using one variable on the y-axis (but leaving room to add the others), then use the function `points` or `lines` to add the additional variables to the existing plot.

There are alternative ways to plot such as ggplot2 or lattice graphics, sometimes it is easier to make complicated plots using these tools (and sometimes it is harder).

If you can give more detail on your data and what you would like the plot to look like then we can give more help.

A first try would be something like:

```
with(COUNT, plot(SESSION, MEANVISUAL, type='b', 
  ylim=range(MEANVISUAL,MEANOVERLAP,MEANWIDEANGLE)))
with(COUNT, lines(SESSION, MEANOVERLAP, type='b', col='blue', pch=2))
with(COUNT, lines(SESSION, MEANWIDEANGLE, type='b', col='green', pch=3)) 
```

Or possibly use the `matplot` function:

```
matplot( COUNT$SESSION, COUNT[ , 2:4], type='b' ) 
```

# php - .htaccess file disappears from live serever

> ID：15711352
> 
> 赞同：1
> 
> 时间：2013-03-29T21:00:38.667
> 
> 标签：php, .htaccess, url-rewriting

I am using Racspace server, whose directory structure is as

```
ROOT > web > Content 
```

All of the files are placed in `content` folder. But when I place .htaccess file it automatically disappears. and rules doesn't work. Whereas it is working fine on local server The rules that are defined in .htaccess file are

```
RewriteEngine on
RewriteRule ^dashboard/([0-9]*)?$ dashboard.php?user_id=$1 [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [NC,L]
RewriteCond %{QUERY_STRING} ^(\w+)=(\w+)$ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T21:10:16.947

If you are using a FTP program like FileZilla, than click "Server" and than click "Force show hidden files" and you are done!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:06:48.977

I'm going to guess that its actually there, you just need to know to see it. In linux any filename starting with a `.` is considered hidden and will not display by default.

If you are access the file via ssl, you can see hidden files with `ls -a`. If you are using another client, you may need to configure it to show hidden files.

# java - 如何在 XSD 中扩展用户定义的类

> ID：15711358
> 
> 赞同：-1
> 
> 时间：2013-03-29T21:01:13.207
> 
> 标签：java, xsd

我想生成一个java类xsd，这样它还扩展了某个特定包中的用户定义类......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:12:58.140

如果您想添加行为/业务逻辑，请在此处查看这个漂亮的 stackoverflow 答案：[如何扩展由 JAXB、CXF 或 Hibernate 工具生成的 Java 代码？](https://stackoverflow.com/questions/780567/how-can-i-extend-java-code-generated-by-jaxb-cxf-or-hibernate-tools)

# asp.net-mvc-3 - 如何使用 .net 将文件上传到 RackSpace Cloud Files？

> ID：15711361
> 
> 赞同：2
> 
> 时间：2013-03-29T21:01:29.847
> 
> 标签：asp.net-mvc-3, c#-4.0, .net-4.0, rackspace-cloud, rackspace

我想使用 RackSpace 的 CDN（云文件）来存储我的静态内容。问题是我正在使用`ASP.NET MVC3`，我还没有看到任何当前的工作示例来说明如何做到这一点。

我在网上看到了几个例子，但它们都是 RackSpace 不再支持的版本。*您可以在他们的Note*上确认：

[http://www.rackspace.com/knowledge_center/article/sample-csharp-application-for-cloud-files](http://www.rackspace.com/knowledge_center/article/sample-csharp-application-for-cloud-files)

当您在 openstack.net 下查看 RackSpace 的 gitHub 帐户（他们的支持重定向到的项目）时，您会看到不支持将文件上传到 Cloud Files。您可以在 Files 表下看到：

[https://github.com/rackspace/openstack.net/wiki/Feature-Support](https://github.com/rackspace/openstack.net/wiki/Feature-Support)

如何使用 C# 以编程方式将文件上传到 RackSpace 的云文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:16:16.030

你是对的，目前 openstack.net 项目不支持 CloudFiles。该功能定于本月晚些时候（4 月中旬）发布。如果您愿意，您仍然可以使用 csharp-cloudfiles ( [https://github.com/rackerlabs/csharp-cloudfiles](https://github.com/rackerlabs/csharp-cloudfiles) )，因为它仍然有效，它只是处于弃用状态，不会收到任何更新或错误修复.

但是，这里有一个快速而肮脏的控制台应用程序，使用内置的 HttpWebRequest/Response 对象，它应该可以帮助您在 openstack.net v1.1 发布之前开始使用。

```
class Program
{
    const string filePath = @"Path\FileName";
    const string myToken = "myToken";
    const string url = "Url/Container/FileName";

    static void Main(string[] args)
    {
        //Do();
        DoAsync();
    }

    static void Do()
    {
        using (var fs = File.Open(filePath, FileMode.Open, FileAccess.Read))
        {
            UploadStream(new Uri(url), fs, myToken,
                (response) => Console.WriteLine("Upload Complete.  Status Code: {0} ({1})", response.StatusCode, response.StatusDescription));
        }

        Console.WriteLine("Done!");
        Console.ReadLine();
    }

    static void DoAsync()
    {
        IAsyncResult asyncRes;
        using (var fs = File.Open(filePath, FileMode.Open, FileAccess.Read))
        {
            asyncRes = UploadStreamAsync(new Uri(url), fs, myToken,
                (asyncResult) =>
                {
                    var request = (HttpWebRequest)asyncResult.AsyncState;
                    var response = (HttpWebResponse)request.EndGetResponse(asyncResult);
                    Console.WriteLine("Upload Complete.  Status Code: {0} ({1})", response.StatusCode, response.StatusDescription);
                });
        }

        asyncRes.AsyncWaitHandle.WaitOne();

        Console.WriteLine("Done!");
        Console.ReadLine();
    }

    static IAsyncResult UploadStreamAsync(Uri uri, Stream contents, string token, AsyncCallback resultCallback, int chunkSize = 8 * 1024)
    {
        var req = (HttpWebRequest)WebRequest.Create(uri);
        req.Headers.Add("X-Auth-Token", token);
        req.Method = "PUT";

        req.AllowWriteStreamBuffering = false;
        if (req.ContentLength == -1L)
            req.SendChunked = true;

        using (Stream stream = req.GetRequestStream())
        {
            var buffer = new byte[chunkSize];
            int count;
            while ((count = contents.Read(buffer, 0, chunkSize)) > 0)
            {
                stream.Write(buffer, 0, count);
            }
        }

        return req.BeginGetResponse(resultCallback, req);
    }

    static void UploadStream(Uri uri, Stream contents, string token, Action<HttpWebResponse> resultCallback, int chunkSize = 8 * 1024)
    {
        var req = (HttpWebRequest)WebRequest.Create(uri);
        req.Headers.Add("X-Auth-Token", token);
        req.Method = "PUT";

        req.AllowWriteStreamBuffering = false;
        if (req.ContentLength == -1L)
            req.SendChunked = true;

        using (Stream stream = req.GetRequestStream())
        {
            var buffer = new byte[chunkSize];
            int count;
            while ((count = contents.Read(buffer, 0, chunkSize)) > 0)
            {
                stream.Write(buffer, 0, count);
            }
        }

        using (var resp = req.GetResponse() as HttpWebResponse)
        {
            resultCallback(resp);
        }
    }
} 
```

在上面的代码中，我提供了 Async 和 Synchronous 方法，因此您不需要两者，只需使用最适合您的方法即可。

如果您安装了 Http Client NuGet 包 ( [http://nuget.org/packages/Microsoft.Net.Http/2.0.20710.0](http://nuget.org/packages/Microsoft.Net.Http/2.0.20710.0) )，也可以使用 HttpClient 库。这是一个示例：

```
static void UploadFileToRSCloud(string path, string filename)
{
    HttpClient client = new HttpClient();
    MemoryStream ms = new MemoryStream();

    client.DefaultRequestHeaders.TransferEncodingChunked = true;

    var filePath = 
    // Copy the data to the Resource Part 
    using (FileStream fileStream = new FileStream(filename, FileMode.Open, FileAccess.Read))
    {
        CopyStream(fileStream, ms);
    }// end:using(fileStream) - Close and dispose fileStream. 

    ms.Position = 0;
    StreamContent sc = new StreamContent(ms);

    client.DefaultRequestHeaders.Add("X-Auth-Token", "TOKEN HERE");

    var result = client.PutAsync( "UrlBase/Container/ChipperJones.jpg", sc);

    result.Wait();
}

private static void CopyStream(Stream source, Stream target)
{
    const int bufSize = 0x1000;
    byte[] buf = new byte[bufSize];
    int bytesRead = 0;
    while ((bytesRead = source.Read(buf, 0, bufSize)) > 0)
        target.Write(buf, 0, bytesRead);
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-23T13:44:53.127

截至 2014 年并回复 Marc M，应该这样做：

首先安装 openstack.net 包

[https://www.nuget.org/packages/openstack.net/](https://www.nuget.org/packages/openstack.net/)

```
PM> Install-Package openstack.net 
```

要上传的代码：

```
public static string Upload(Stream stream, string fileName)
{
    CloudFilesProvider cloudFilesProvider = getProvider();
    IEnumerable<string> containerObjectList = 
        cloudFilesProvider.ListObjects(CONTAINER_NAME, region: REGION_DFW)
        .Select(o => o.Name);
    string extension = Path.GetExtension(fileName);
    string name = Path.GetFileNameWithoutExtension(fileName);

    stream.Position = 0;

    name = name.GenerateSlug(); //my method
    fileName = name + extension;

    while (containerObjectList.Contains(fileName))
        fileName = name + Guid.NewGuid().ToString().Split('-')[0] + extension;

    cloudFilesProvider
        .CreateObject(CONTAINER_NAME, stream, fileName, region: REGION_DFW);

    return Constants.Rackspace.CloudFiles.PUBLIC_CONTAINER + fileName;
}

private static CloudFilesProvider getProvider()
{
    CloudIdentity cloudIdentity = 
        new CloudIdentity() { APIKey = API_KEY, Username = USERNAME };
    return new CloudFilesProvider(cloudIdentity);
} 
```

用途：

```
using net.openstack.Core.Domain;
using net.openstack.Providers.Rackspace; 
```

请注意，某些部分是我的技术要求，例如生成 slug、使用 Guid、Region 等。

# c# - 使用 C# 或任何开源文本挖掘 API 从文本文件中分离有意义的单词

> ID：15711363
> 
> 赞同：2
> 
> 时间：2013-03-29T21:01:39.847
> 
> 标签：c#, text, text-mining

我正在做一个视频处理项目，在该项目中，我从作为输入的视频中提取文本并将该文本保存在文本文件中。我有包含垃圾文本和单词的文本，我现在需要从生成文本并将它们转换为标签？任何人都可以建议可用于此的 API/算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:06:46.853

您可以查看[Apache OpenNLP](https://opennlp.apache.org/)（自然语言处理）和 C# 衍生的[SharpNLP](http://sharpnlp.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T19:25:18.007

您可以将 SharpNLP 与**SharpEntropy.dll 和 OpenNLP.dll**与以下代码片段一起使用。

```
private OpenNLP.Tools.Tokenize.EnglishMaximumEntropyTokenizer mTokenizer;
private string[] Tokenize(string text)
{
    if (mTokenizer == null)
    {
        mTokenizer = new OpenNLP.Tools.Tokenize.EnglishMaximumEntropyTokenizer(mModelPath + "EnglishTok.nbin");
    }
    return mTokenizer.Tokenize(text);
} 
```

现在您将拥有一个字符串标记数组。我的意思是一个包含所有数据的字符串数组。可能包括垃圾。现在您只需分离有意义的标记。为此，您可以使用 NHunspell.dll

```
public list<string> validate(string[] tokens)
{
      Hunspell hunspell = new Hunspell("en_US.aff", "en_US.dic");
      List<string> valid_tokens = new List<string>();
      foreach (string token in tokens)
      {
           if (!hunspell.Spell(token))
           {
                valid_tokens.Add(token);
           }
      }
      hunspell.Dispose();
      return valid_tokens;
} 
```

现在您将拥有一个**valid_tokens**列表，其中仅包含具有英语含义的有效标记。希望这能解决您的问题。

要逐步将 SharpNLP 集成到您的 Visual Studio 项目中，请阅读我撰写的这篇详细文章。 [将 SharpNLP 与 Visual Studio C# 项目集成的简单方法](https://stackoverflow.com/questions/11279054/sharpnlp-as-nbin-file-extension/19456965#19456965)

# javascript - 滚动滑动元素

> ID：15711364
> 
> 赞同：0
> 
> 时间：2013-03-29T21:01:41.533
> 
> 标签：javascript, jquery, scroll, parallax

我有这段代码，它可以让两个 div 在滚动时从左侧滑入，问题是 2 个 DIV 在滑入时会相互重叠，另一个问题是这段代码启动了一个函数，而不是像你在滚动。我宁愿它根据滚动位置移动到中心。

如果有人可以帮助我修改此代码以执行我上面提到的操作，我会很高兴。

这是在 jsfiddle [http://jsfiddle.net/qqSc3/1/](http://jsfiddle.net/qqSc3/1/)

```
jQuery(document).ready(function(){
var slide = jQuery(".post-129");
var slide2 = jQuery(".post-169");
var opening = false;
var closing = false;
jQuery(window).scroll(function() {
var pos = jQuery(window).scrollTop();
console.log(pos);
if (pos > 100) {
    if (!opening) {
        opening = true; closing = false;
        slide.stop().animate({
            'opacity': 1,
            'margin-left': 0
        }, 1000, function() {
            opening = false;
        });
        slide2.stop().animate({
            'opacity': 1,
            'margin-left': 0
        }, 1000, function() {
            opening = false;
        });
    }

} else {
    if (!closing) {
        closing = true; opening = false;
        slide.stop().animate({
            'opacity': 0,
            'margin-left': -1000
        }, 500, function() {
            closing = false;
        });
         slide2.stop().animate({
            'opacity': 0,
            'margin-left': -1000
        }, 500, function() {
            closing = false;
        });
    }
}
});
}); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:21:11.003

试试这个。

[在 JS Fiddle 中查看](http://jsfiddle.net/GY84R/4/)

```
function scrollingSlider(selector, beginpos, endpos) {
    var slide,
        timeout = 0;
    slide = function () {
        var scrollpos;
        window.clearTimeout(timeout);
        timeout = 0;
        scrollpos = $(window).scrollTop();
        $(selector).each(function () {
            var $this = $(this),
                margintarget,
                margin = parseInt($this.css('margin-left'), 10),
                step;
            if (scrollpos <= beginpos) {
                margintarget = -1000;
            } else if (scrollpos >= endpos) {
                margintarget = 0;
            } else {
                margintarget = Math.round(-1000 * (endpos - scrollpos) / (endpos - beginpos));
            }
            if (margintarget === margin) {
                return; // nothing more to do
            }
            step = margintarget - margin;
            if (Math.abs(step) > 25) {
                step = 25 * (step < 0 ? -1 : 1);
            }
            $this.css('margin-left', margin + step);
            if (!timeout && (margin + step) !== margintarget) {
                timeout = window.setTimeout(slide, 10);
            }
        });
    };
    $(window).on('scroll', slide);
}
$(document).ready(function (){
    scrollingSlider('.post-129, .post-169', 100, 300);
}); 
```

**笔记**

要使用该`scrollingSlider`函数，请传入一个 jQuery 选择器、开始滑入的滚动顶部位置（以像素为单位）以及应完成滑动的以像素为单位的滚动顶部位置。如果您使用字符串选择器，您将避免在 DOM 元素上创建闭包的潜在问题，该闭包可能会干扰在大量使用场景中释放内存。

**定位**

另外，我建议不要使用滚动位置来确定何时显示元素，而是更改代码以根据每个元素当前顶部的位置与底部视图的距离进行比较的滚动窗口。这完成了两件事：

1.  如果您更改页面以添加或删除内容（从而更改元素的垂直位置），则滚动不会出错。
2.  更重要的是，对于任何拥有足以容纳整个页面的大屏幕的人来说，他们甚至都不会看到您的滑入式元素，因为他们没有滚动条！将事物的可见性与滚动条的位置（而不是项目必须进入视口的距离）联系起来是使您的内容完全无法访问的好方法——可能不是您想要的。注意：我当前的屏幕是 2880 像素高，如果我将它旋转到纵向模式，它将是 5120 像素高。这是*很多*一次可见的网页。容纳这些大屏幕尺寸需要仔细考虑。您可以在页面底部添加某种取决于窗口高度的填充或间距，强制滚动条出现并可用（意味着滚动到底部会导致最低可见项目位于或超出页面*顶部*而不是*底部*）。

还有一点：我`opacity`完全放弃了。问题是因为在 CSS 中你必须说`-1000px`as`-1000`没有单位并且被忽略。您唯一可以不使用单位的情况是`0`-- 否则，浏览器将如何知道您的意思是像素而不是`em`s?。

确实，我没有使用 jQuery 的动画能力。我可能有。与其设置我自己的超时来再次运行该函数，我可以简单地告诉 jQuery 将元素动画到正确的位置，`.stop()`首先停止任何未完成的动画。那将是完全有效的。这次我只是这样做了。随意修改。

**解释**

将滑动的初始触发器设置为`scroll`事件。在`slide`函数中，对于我们感兴趣的每个元素，根据当前滚动位置计算出我们想要滑动到的目标左边距。将元素向该目标移动不超过 25 个像素。如果尚未达到目标位置，请设置计时器以重复此过程。由于滚动事件不仅可以从根本上改变目标位置，而且可以触发它自己的级联动画，因此取消在`slide`函数开始时设置的任何未完成的计时器。

**速度注意事项**

如果你发现 10 毫秒太频繁并且动画太粗或者 CPU 密集型，提高它以减少函数触发的频率，将最大步长增加一个类似的因子（当前为 25）。如果动画太慢或太快，相应地增加或降低最大步长。

进一步提速思路：

在您的网站中，同时运行的其他代码会阻止在 10 毫秒之前调用幻灯片函数。然后奇怪的事情发生了。

1.  在滑动元素上使用 id 而不是类。

2.  按照建议，将超时更改为 40 毫秒或 100 毫秒，并增加对象移动的最大像素数。

3.  In your targeted usage scenario your two images are locked together, so take out the `each` function and just do the operation on both at the same time--this should achieve some significant reduction in execution time.

Last, a usage note: Don't include the script multiple times to animate multiple objects. Instead, just call `scrollingSlider` multiple times in the `ready` function!

**UPDATE**

Please see the "Positioning" section above, which has been updated with new and important information about screen sizes.

# iphone - 通过编程滚动更正计算的表格单元格高度

> ID：15711367
> 
> 赞同：0
> 
> 时间：2013-03-29T21:02:03.993
> 
> 标签：iphone, objective-c, uitableview

我自己单独计算我的 tavleview 单元格的高度。

虽然这在我滚动时效果很好，但有时当表格出现时它看起来不对。

然后，如果我上下滚动它看起来是正确的。

因此我需要以编程方式滚动表格。

现在的问题是，有时我只有 3 行，所以我无法以编程方式滚动 - 但即使没有更多单元格，手动也可以“滚动”视图。在这种情况下，我仍然需要以编程方式“滚动”视图，因为这可以更正表格单元高度的计算，

所以这段代码不起作用：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:10 inSection:0];
[self.theTable scrollToRowAtIndexPath:indexPath
                      atScrollPosition:UITableViewScrollPositionTop
                              animated:YES]; 
```

所以问题是，如何以编程方式滚动视图？

****编辑**** 我检查了计算出的高度，它们都是正确的——即使在滚动之后，它们的计算结果也与最初显示时完全相同。

所以我给框架设置了一个红色背景，以查看在视图确实出现之后的显示与滚动之后的显示之间的差异。

事实上，在 viewDidAppear 之后的所有帧都具有相同的（错误的）高度，这不是它们设置的高度，如下所示：

```
-(void) layoutSubviews {
[super layoutSubviews];

//                              x     y   width height
float h = expectedLabelSize.height;
[imageView setFrame:CGRectMake(    8.0, 10.0,  20.0, 20.0)];
[t1 setFrame:CGRectMake(          40.0,  4.0, 280.0, h)]; //total width 320
[t1 setBackgroundColor:[UIColor redColor]];
[t2 setFrame: CGRectMake(        235.0, h+4, 85.0, 15.0)];
NSLog(@"-layoutSubviews--> h:%f w:%f",h,expectedLabelSize.width); 
```

}

滚动后，高度计算为完全相同的值，现在框架最终具有此处分配的高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:17:31.673

在`viewWillAppear`：

```
[self.tableView beginUpdates];
[self.tableView endUpdates]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:43:48.643

I used to have the exact same problem with resizing a cell dynamically to accomodate the contents of a UITextView. I ended up using the free Sensible TableView framework, which amongst many other things, automatically calculates the height for all my cells.

# google-chrome-extension - 如何为 pageAction 添加点击？

> ID：15711369
> 
> 赞同：6
> 
> 时间：2013-03-29T21:02:09.787
> 
> 标签：google-chrome-extension

第一次延期——请善待。

我的目标是在用户访问来自特定域的页面时提供一个选项，以提供启动另一个页面的选项，该页面使用访问页面的部分域名作为变量。

下面的代码做了我想要的，但它没有提供作为选项的操作——它只是执行。

当访问与域匹配的页面时，它会在地址栏中添加一个图标。我希望仅在用户单击该图标时才加载调用的新页面。如果这不可能，请提出替代方案。

谢谢！

```
function checkForValidUrl(tabId, changeInfo, tab) {

  if (tab.url.indexOf('.foo.com') > -1) {

    chrome.pageAction.show(tabId);
    var myName = tab.url.split(".")[0].slice(7);

    if (myName != "www"){ //ignore main site

    chrome.tabs.update(tab.id, {url: "http://foo.com/foo.html?t=" + myName});
    }

  }
};

chrome.tabs.onUpdated.addListener(checkForValidUrl); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T21:12:31.117

你只需要使用[`chrome.pageAction.onClicked`](http://developer.chrome.com/extensions/pageAction.html#event-onClicked). 例如：

```
function checkForValidUrl(tabId, changeInfo, tab) {
  if (tab.url.indexOf('.foo.com') > -1) 
    chrome.pageAction.show(tabId);
};

chrome.tabs.onUpdated.addListener(checkForValidUrl);

chrome.pageAction.onClicked.addListener(function(tab){
  var myName = tab.url.split(".")[0].slice(7);
  if (myName != "www") //ignore main site
    chrome.tabs.update(tab.id, {url: "http://foo.com/foo.html?t=" + myName});
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-03T13:32:39.657

上面的答案是正确的，但请注意，您需要在清单中拥有正确的权限才能使其正常工作，否则`tab.url`将是未定义的。

From the docs `The URL the tab is displaying. This property is only present if the extension's manifest includes the "tabs" permission.`

Link - [https://developer.chrome.com/extensions/tabs#type-Tab](https://developer.chrome.com/extensions/tabs#type-Tab)

# ios - Send push notifications in iOS6

> ID：15711370
> 
> 赞同：1
> 
> 时间：2013-03-29T21:02:50.400
> 
> 标签：ios, ios6, push-notification, apple-push-notifications

I have an iOS6 app that works. Now what do I have to do in my app and on my server to set up push notification.

There are bits and pieces of answers to this question. But most of it is dated and I don't want set something up the old way just to find out it's been deprecated.

*   [http://maniacdev.com/2011/05/tutorial-ios-push-notification-services-for-beginners/](http://maniacdev.com/2011/05/tutorial-ios-push-notification-services-for-beginners/)
*   [http://answers.oreilly.com/topic/1541-how-to-send-a-push-notification-to-an-iphone-user/](http://answers.oreilly.com/topic/1541-how-to-send-a-push-notification-to-an-iphone-user/)
*   [http://blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/](http://blog.serverdensity.com/how-to-build-an-apple-push-notification-provider-server-tutorial/)

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:24:53.007

I recently set up push on an app I was working on and followed these tutorials :

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12) [http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)

These are well written and they work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T08:52:10.487

This is a very helpful mac application. I use this to simulate push notification without server : [https://github.com/noodlewerk/NWPusher](https://github.com/noodlewerk/NWPusher)

# sql - 有没有办法将 DBCC CheckIdent 的值存储到变量中？

> ID：15711375
> 
> 赞同：3
> 
> 时间：2013-03-29T21:03:15.103
> 
> 标签：sql, tsql, stored-procedures, syntax

我正在尝试做这样的事情：

```
declare @myCurrentSeedValue int;
select @myCurrentSeedValue = DBCC CheckIdent('MyTable', NORESEED); 
```

这显然是不正确的语法。有人对我如何做到这一点有任何建议吗？

我知道我可以做这样的事情：

```
select @myCurrentSeedValue = IDENT_SEED('MyTable'); 
```

但问题在于 IDENT_SEED 函数上的每个 MSDN：

> 使用 DBCC CHECKIDENT 更改标识列的当前值不会更改此函数返回的值。

这可能会有问题，因为我们有其他存储过程将调用 DBCC CHECKIDENT 并重新设置标识列的种子，因此我实际上需要当前种子而不是原始种子。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T21:30:08.100

使用**Ident_current**可以获取表的当前标识，无论哪个进程更新表标识。它适用于任何会话，任何范围。

```
 declare @myCurrentSeedValue int;
select @myCurrentSeedValue = IDENT_CURRENT( 'MyTable' )
select @myCurrentSeedValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-19T09:27:30.210

`IDENT_CURRENT``DBCC CHECKIDENT`如果根本没有填充表，则不会返回与显示相同的值。

对于刚刚创建的表`DBCC CHECKIDENT('NewTable', NORESEED)`输出当前标识为 NULL（即从未分配过）：

> 检查身份信息：当前身份值“NULL”，当前列值“NULL”。

但是，`IDENT_CURRENT('NewTable')`返回`1`。[根据规格](https://docs.microsoft.com/en-us/sql/t-sql/functions/ident-current-transact-sql?view=sql-server-ver15#remarks)这是正确的：

> 当 IDENT_CURRENT 值为 NULL 时（因为表从未包含行或已被截断），IDENT_CURRENT 函数返回种子值。

`1` `IDENT_CURRENT`当表中有单行时，返回相同的值。

要获得当前身份的正确值，您可以直接从`sys.identity_columns`表中获取此信息：

```
SELECT last_value
FROM sys.identity_columns
WHERE object_id = OBJECT_ID('NewTable') 
```

PS: Not sure if this approach will properly work on production DB where table is heavily updated, but for unit tests it suites well. I use this script to figure out what new seed value i should set for table when doing clean up of that table. Because for never populated table the new seed value must be 1 and 0 otherwise.

# javascript - 如何让 HTML 中的 JavaScript 工作？

> ID：15711376
> 
> 赞同：1
> 
> 时间：2013-03-29T21:03:28.820
> 
> 标签：javascript, html, function, switch-statement

我是 javaScript 的新手，我试图让一个函数在我在 HTML 文件中创建的按钮单击时运行。我希望函数将值返回到 html 文件中的段落标记。

现在，这是我第一次尝试这个，我不知道如何将参数从文本框传递到脚本的函数中，并将值打印到段落标签。有人可以告诉我如何，请。

谢谢

```
<script>
var calculateTotalCosts = function(salary,numWorkers,city)
    {
        fixedCosts = 5000;
        variableCosts = salary*numWorkers;
        switch(city)
        {
            case "BEJ":
                rent = 25000;
                break;
            case "NYC":
                rent = 30000;
                break;
            default:
                rent = 10000;
                break;
        }
        return rent + variableCosts + fixedCosts;
    };
</script>
Salary: <input type="text" value="Costs" />
No. Workers: <input type="text" value="Num of Workers" />
City: <input type="text" value="City" /><br />
<button onclick="calculateTotalCosts()"type="button">Calculate</button>
<p id="displayCost"></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:11:45.327

您可以获取元素值并在函数中计算它们并将其传递给 p html elemnet

```
 <script>

    function CalculateCosts() {
        var costsVal = document.getElementById("costs").value;
        var workersVal = document.getElementById("workers").value;
        var cityVal = document.getElementById("city").value;
        calculateTotalCosts(costsVal, workersVal, cityVal);
    }

    var calculateTotalCosts = function (costsVal, workersVal, cityVal) {

        var variableCosts = costsVal * workersVal;
        var rent;
        switch (cityVal) {
        case "BEJ":
            rent = 25000;
            break;
        case "NYC":
            rent = 30000;
            break;
        default:
            rent = 10000;
            break;
        }
        //return rent + variableCosts + fixedCosts;
        document.getElementById("displayCost").innerHTML = rent + variableCosts;
    };

</script>
Salary:
<input id="costs" type="text" placeholder="Costs" />
No. Workers:
<input id="workers" type="text" placeholder="Num of Workers" />
City:
<input id="city" type="text" placeholder="City" /><br />
<button onclick="CalculateCosts()" type="button">
    Calculate</button>
<p id="displayCost">
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:12:55.177

您必须提供输入 id 或知道哪些输入指向什么。见下文：

```
 <script>
  function calculateTotalCosts()
     {
        input_text = document.getElementsByTagName("input");
        salary = input[0];
        numWorkers = input[1];
        city = input[2];

        fixedCosts = 5000;
        variableCosts = salary*numWorkers;
        intcity = 0;
        if (city == "BEJ") { intCity = 0;}
        if (city == "NYC") { intCIty = 1;}
        switch(intCity)
        {
            case 0:
               rent = 25000;
               break;
            case 1:
               rent = 30000;
               break;
            default:
               rent = 10000;
               break;
    }
    result = rent + variableCosts + fixedCosts;
    document.getElementById("displayCost").innerHtml = result;
}
</script> 
```

或使用 ids 进行输入，这样您就可以确定您选择的是哪个输入。

# mediawiki - 我如何删除除我在 mediawiki 中的所有用户创建的所有 wiki 页面

> ID：15711379
> 
> 赞同：0
> 
> 时间：2013-03-29T21:03:44.243
> 
> 标签：mediawiki

我实现了一个 mediawiki 网站，但不幸的是，有人通过数千名用户创建了数千个页面。

我可以运行哪个查询来删除这些用户创建的所有页面，但我的除外？

Mediawiki 页面位于 mediawiki 数据库中的 wiki_page 和 wiki_text 中，但没有关于谁创建这些页面的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T19:42:39.887

我会以愚蠢的方式去做。

1.  从 Special:AllPages 或使用[https://code.google.com/p/wikiteam/dumpgenerator.py](https://code.google.com/p/wikiteam/)列出所有页面标题
2.  列出您从 Special:Contributions 和一些正则表达式过滤或使用 WebAPI 创建的所有标题
3.  使用例如 comm 命令从 1\. 中删除 2.
4.  使用 PyWikipediaBot 中的 delete.py 或[deletebatch.php](https://www.mediawiki.org/wiki/Manual:DeleteBatch.php)或具有相同名称的扩展来删除所有有问题的标题。

1-3 可以替换为任何其他方式以使列表更适合您，包括数据库查询和 WebAPI，或者只是最近的更改，具体取决于垃圾邮件的创建时间/方式。如果有标题模式，您可以使用 Nuke 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T16:48:36.480

我也在处理这个问题。我找到了一些代码来阻止用户创建和编辑，所以它不应该再次发生，但我并不期待一个一个地删除所有垃圾......

将以下内容复制到您的`LocalSettings.php`:

```
# Prevent new user registrations by anyone
$wgGroupPermissions['*']['createaccount'] = false;
$wgGroupPermissions['sysop']['createaccount'] = false;

# Disable anonymous editing
$wgGroupPermissions['*']['edit'] = false;

# Prevent new user registrations except by sysops
$wgGroupPermissions['*']['createaccount'] = false;

$wgGroupPermissions['*']['edit'] = false;
$wgGroupPermissions['user']['edit'] = false;
$wgGroupPermissions['sysop']['edit'] = true; 
```

# z3 - 计算最大值的宏

> ID：15711384
> 
> 赞同：1
> 
> 时间：2013-03-29T21:04:08.607
> 
> 标签：z3

我找到了计算最大值的宏`Z3 Sat Solver`。

```
(define-fun max_integ ((x Int) (y Int)) Int 
    (ite (< x y) y x)) 
```

如何在 中使用 C-API 进行相同的编程`Z3 Sat Solver`？

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:17:31.940

该`define-fun`命令只是创建一个宏。请注意，SMT 2.0 标准不允许递归定义。Z3 将扩展`max_integ`解析期间的每一次出现。该命令`define-fun`可能用于使输入文件更简单、更易于阅读，但在内部它并不能真正帮助 Z3。这个问题在以下帖子中讨论：

*   [相当于 Z3 API 中的 define-fun](https://stackoverflow.com/questions/7740556/equivalent-of-define-fun-in-z3-api/7745041#7745041)

*   [Z3 SMT 2.0 与 Z3 py 实施](https://stackoverflow.com/questions/13826217/z3-smt-2-0-vs-z3-py-implementation)

# c# - 如何防止 PDFBox 用连字符拆分单词

> ID：15711389
> 
> 赞同：4
> 
> 时间：2013-03-29T21:04:21.050
> 
> 标签：c#, pdfbox, hyphenation

我正在使用 PDFBox 1.7.0 版从 PDF 中提取文本。这些类使用 .NET 编译为 .NET `IKVM.NET`。我正在使用以下代码，我在其中传递文件的名称和路径：

```
public static String PDFText(String PDFFilePath)
    {
        PDDocument doc = PDDocument.load(PDFFilePath);
        PDFTextStripper stripper = new PDFTextStripper();
        string text = stripper.getText(doc);
        doc.close();
        return text;
    } 
```

PDF 有 2 列。提取工作相当好。然而，许多单词被一个连字符分割到下一行，它们应该被保留为一个完整的单词。

例如，单词“becoming”变成了“becoming”，
就像许多其他单词一样。

有没有办法防止 PDFBox 用破折号“-”或连字符随机拆分单词并在一行上显示部分单词，而将其余部分带到下一行？

我在 stackoverflow 上看到了一篇文章，该文章涉及在单词之间随机插入空格，即[PDFBox 在单词中添加空格](https://stackoverflow.com/questions/7954788/pdfbox-adding-white-spaces-within-words/7956950#7956950)。

但是，我的问题是 PDFBox 用破折号或连字符拆分。

我还看到了对名为 的方法的引用，该方法`charactersByArticle`专门用于双列 PDF，我认为这可能会正确呈现提取的文本。但是，我还没有找到如何使用这种方法的工作示例，只是对它的预告片引用。

如果该`charactersByArticle`方法不能阻止这种情况，我什至会考虑 Regex，如果有人可以提供一个很好的工作示例，将其与我上面的 PDFTextStripper 方法结合使用。先感谢您。

# php - 通过部分匹配在php中对数组值进行分组

> ID：15711397
> 
> 赞同：-1
> 
> 时间：2013-03-29T21:05:09.010
> 
> 标签：php, arrays, preg-match, grouping, preg-match-all

我有一个这样的数组：

```
Array
(
    [0] => Saturday 19th January 2013 07:59:57 PM
    [1] => Sunday 20th January 2013 07:00:26 PM
    [2] => Monday 21st January 2013 02:08:15 PM
    [3] => Monday 21st January 2013 02:11:00 PM
    [4] => Monday 21st January 2013 02:41:02 PM
    [5] => Monday 21st January 2013 02:42:14 PM
    [6] => Monday 21st January 2013 03:03:34 PM
    [7] => Monday 21st January 2013 03:07:39 PM
    [8] => Monday 21st January 2013 03:37:11 PM
    [9] => Monday 21st January 2013 03:37:52 PM
    [10] => Monday 21st January 2013 04:14:08 PM
    [11] => Monday 21st January 2013 04:16:38 PM
    [12] => Monday 21st January 2013 04:19:18 PM
    [13] => Monday 21st January 2013 05:45:17 PM
    [14] => Monday 21st January 2013 06:39:04 PM
    [15] => Monday 21st January 2013 08:01:56 PM
    [16] => Monday 21st January 2013 08:03:23 PM
    [17] => Monday 21st January 2013 08:12:15 PM
    [18] => Monday 21st January 2013 08:15:20 PM
    [19] => Monday 21st January 2013 08:29:57 PM
    [20] => Monday 21st January 2013 09:57:25 PM
    [21] => Tuesday 22nd January 2013 01:57:59 AM
    [22] => Tuesday 22nd January 2013 06:39:34 AM
    [23] => Tuesday 22nd January 2013 11:38:25 AM
    [24] => Tuesday 22nd January 2013 03:21:08 PM
    [25] => Tuesday 22nd January 2013 04:09:36 PM
} 
```

我想对这个数组进行分组，以便得到：

```
Array
(
    [Saturday 19th January 2013 07:59:57 PM] => 1
    [Sunday 20th January 2013 07:00:26 PM] => 1
    [Monday 21st January 2013 02:08:15 PM] => 19
    [Tuesday 22nd January 2013 01:57:59 AM] => 5
   } 
```

这里的键应该是前一个数组中匹配 20-23 个字符的匹配值，值是前一个数组中匹配值的计数，我一直在努力解决这个问题。将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:12:48.063

这有效（尽管新数组不能保持时间，这可能更可取）：

```
$array = array('Saturday 19th January 2013 07:59:57 PM', 'Sunday 20th January 2013 07:00:26 PM', 'Monday 21st January 2013 02:08:15 PM', 'Monday 21st January 2013 02:11:00 PM', 'Monday 21st January 2013 02:41:02 PM', 'Monday 21st January 2013 02:42:14 PM', 'Monday 21st January 2013 03:03:34 PM', 'Monday 21st January 2013 03:07:39 PM', 'Monday 21st January 2013 03:37:11 PM', 'Monday 21st January 2013 03:37:52 PM', 'Monday 21st January 2013 04:14:08 PM', 'Monday 21st January 2013 04:16:38 PM', 'Monday 21st January 2013 04:19:18 PM', 'Monday 21st January 2013 05:45:17 PM', 'Monday 21st January 2013 06:39:04 PM', 'Monday 21st January 2013 08:01:56 PM', 'Monday 21st January 2013 08:03:23 PM', 'Monday 21st January 2013 08:12:15 PM', 'Monday 21st January 2013 08:15:20 PM', 'Monday 21st January 2013 08:29:57 PM', 'Monday 21st January 2013 09:57:25 PM', 'Tuesday 22nd January 2013 01:57:59 AM', 'Tuesday 22nd January 2013 06:39:34 AM', 'Tuesday 22nd January 2013 11:38:25 AM', 'Tuesday 22nd January 2013 03:21:08 PM', 'Tuesday 22nd January 2013 04:09:36 PM');

foreach ($array as $date)
{

  $name = date('l jS F Y', strtotime($date));

  if (!isset($newArray[$name]))
  {
    $newArray[$name] = 1;
  }

  else
  {
    ++$newArray[$name];
  }

}

print_r($newArray); 
```

如果您想要时间，请使用以下命令：

```
foreach ($array as $date)
{

  $name = date('l jS F Y', strtotime($date));

  $time = substr($date, -11);

  if (!isset($times[$name]))
  {
    $newArray[$name . ' ' . $times[$name] = $time] = 1;
  }

  else
  {
    ++$newArray[$name . ' ' . $times[$name]];
  }

} 
```

# python - 转换从 fetchall() 返回的类型

> ID：15711398
> 
> 赞同：3
> 
> 时间：2013-03-29T21:05:12.510
> 
> 标签：python, psycopg2

我正在使用 psycopg2，并运行以下代码：

```
conn = psycopg2.connect(database = mydb_name, host = mydb_server, user = mydb_uname, password = mydb_pwd)
cur = conn.cursor()
cur.execute("SELECT desiredParams FROM tableOfInterest;")
all_data = cur.fetchall()
nlargest = heapq.nlargest(5, all_data) 
```

这将返回一个带小数的元组列表：

> [(Decimal('254.000'),), (Decimal('154.000'),), (Decimal('244.000'),), (Decimal('134.000'),), (Decimal('254.000'),) ]

我怎样才能将其转换为更像：

> [254.000、154.000、244.000、134.000、254.000]

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:10:08.210

小数是与数据库数字类型很好匹配的定点数字。它们真的很有用，但如果我不能说服你使用它们。

```
largest = [float(d[0]) for d in nlargest] 
```

会给

```
[254.0, 154.0, 244.0, 134.0, 254.0] 
```

甚至更好，因为 cur 是可迭代的

```
cur.execute("SELECT desiredParams FROM tableOfInterest;")
nlargest = [float(g[0]) for g in heapq.nlargest(5, cur)] 
```

为了让它漂亮

```
cur.execute("SELECT param FROM tableOfInterest ORDER BY param DESC FIRST 5;")
nlargest = [float(r.param) for r in cur] 
```

或跳过列表构建并执行此操作

```
cur.execute("SELECT param FROM tableOfInterest ORDER BY param DESC FIRST 5;")
for param, in cur:
    stuff_to_do_with_first_5(float(param)) 
```

the way to bind that looks good but is really bad (due to pyscopg's mishandling of bind variables). The problem with this is that pysco just % the values into the string and thus hides the ability to inject sql into your string.

```
cur.execute("SELECT param FROM tableOfInterest ORDER BY param DESC FIRST %s;", (num_results,)) 
```

the way that looks bad but is safer then the previous

```
cur.execute("SELECT param FROM tableOfInterest ORDER BY param DESC FIRST %d;" % num_results) 
```

# c# - 无法从 HttpListenerRequest 获取发布数据

> ID：15711400
> 
> 赞同：0
> 
> 时间：2013-03-29T21:05:30.743
> 
> 标签：c#, html, postdata, httplistenerrequest

我似乎无法在以下简单的 Web 服务器应用程序中检索任何帖子数据。request.InputStream 从不返回任何内容。

来自发布表单的 HTML 在代码中。这是非常基本的 - 只是一个 , 和提交按钮。

我错过了什么吗？我以前没有使用过 HttpListener 程序集，所以我不知道我是否遗漏了一些简单的东西。我应该使用不同的程序集吗？

任何帮助将不胜感激！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Threading;

class Program
{
    static void Main(string[] args)
    {
        WebServer ws = new WebServer(SendResponse, "http://localhost:8088/");
        ws.Run();
        Console.WriteLine("Press any key to exit.");
        Console.ReadKey();
        ws.Stop();
    }

    public static string SendResponse(HttpListenerRequest request)
    {
        try
        {
            using (System.IO.StreamReader reader = new System.IO.StreamReader(request.InputStream, request.ContentEncoding))
            {
                string s = reader.ReadToEnd();
                Console.WriteLine("InputStream: {0}", s);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error: {0}", ex.Message);
        }

        return @"<html><body><form action='http://localhost:8088/' method='post'><input type='text' value='My Input'><input type='submit'></form></body></html>";
    }
}

public class WebServer
{
    private readonly HttpListener _listener = new HttpListener();
    private readonly Func<HttpListenerRequest, string> _responderMethod;

    public WebServer(string[] prefixes, Func<HttpListenerRequest, string> method)
    {
        foreach (string s in prefixes)
            _listener.Prefixes.Add(s);

        _responderMethod = method;
        _listener.Start();
    }

    public WebServer(Func<HttpListenerRequest, string> method, params string[] prefixes) : this(prefixes, method) { }

    public void Run()
    {
        ThreadPool.QueueUserWorkItem((o) =>
        {
            Console.WriteLine("Listening...");
            try
            {
                while (_listener.IsListening)
                {
                    ThreadPool.QueueUserWorkItem((c) =>
                    {
                        var ctx = c as HttpListenerContext;
                        try
                        {
                            string rstr = _responderMethod(ctx.Request);
                            byte[] buf = Encoding.UTF8.GetBytes(rstr);
                            ctx.Response.ContentLength64 = buf.Length;
                            ctx.Response.OutputStream.Write(buf, 0, buf.Length);
                        }
                        catch {}
                        finally
                        {
                            ctx.Response.OutputStream.Close();
                        }
                    }, _listener.GetContext());
                }
            }
            catch {}
        });
    }

    public void Stop()
    {
        _listener.Stop();
        _listener.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:45:19.713

DOH - 我需要输入标签中的名称属性以使其显示在帖子数据中。

有10多个小时我再也回不来了！

# java - 索引超出范围异常但无法找出问题所在

> ID：15711405
> 
> 赞同：0
> 
> 时间：2013-03-29T21:05:44.510
> 
> 标签：java, arrays, recursion, arraylist

基本上我必须接受用户输入，直到他们输入 0，然后找到数组中的最大值、负数的数量和正数的总和。问题是我必须使用和数组并且不能使用 ArrayList 来调用其他方法，所以我想我会创建一个 ArrayList 并使用它的元素来创建一个数组，因为数组中有未指定数量的元素。我一直把它当作错误，并尝试了我能想到的一切。请帮忙。

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 3, Size: 3
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at Assignment9.assignment9(Assignment9.java:37)
    at Assignment9.assignment9(Assignment9.java:49)
    at Assignment9.assignment9(Assignment9.java:49)
    at Assignment9.assignment9(Assignment9.java:49)
    at Assignment9.main(Assignment9.java:17) 
```

* * *

```
//Class Description: Takes user input and makes it into an array until 0 is entered.
// It then computes the maximum #, amount of negative #s and the sum of the positive #s.
import java.util.*;
import java.text.*;;

public class Assignment9 {

//main method initializes variables then calls method assignment9
public static void main(String[] args)
{
    int count = 0;
    ArrayList<Double> help = new ArrayList<Double>();
    assignment9(help, count);
}//end main

//adds user input to array until 0 is entered; it then calls other methods
public static void assignment9(ArrayList<Double> help, int count)
{
    DecimalFormat fmt = new DecimalFormat("#.##");
    double input;
    double max = 0;
    int negative = 0;
    double sum = 0;
    Scanner scan = new Scanner(System.in);

    input = scan.nextInt();

    if (input == 0)
    {
        double[] numbers = new double[help.size()];
        for(int i = 0; i < numbers.length; i++)
        {
            numbers[i] = help.get(i);
        }
        findMax(numbers, count, max);
        countNegative(numbers, count, negative);
        computeSumPositive(numbers, count, sum);
        System.out.println("The maximum numer is " + fmt.format(max));
        System.out.println("The total number of negative numbers is " + negative);
        System.out.println("The sum of positive numbers is " + fmt.format(sum));
        System.exit(0);
    }else{
            help.add(input);
            count++;
            assignment9(help, count);
    }//end if
}//end assignment9

//compares elements of array to find the max until count = -1
public static double findMax(double[] numbers, int count, double max)
{

    if (count == -1)
    {
        return max;
    }else if(numbers[count] > max){
        max = numbers[count];
        count--;
        findMax(numbers, count, max);
    }//end if
    return max;

}//end findMax

public static int countNegative(double[] numbers, int count, int negative)
{

    if(count == -1)
    {
        return negative;
    }else if(numbers[count] < 0){
        negative++;
        count--;
        countNegative(numbers, count, negative);
    }
    return negative;
}//end countNegative

public static double computeSumPositive(double[] numbers, int count, double sum)
{
     if(count == -1)
     {
         return sum;
     }else{
         sum = sum + numbers[count];
         count++;
         computeSumPositive(numbers, count, sum);
         return sum;
     }
}//end computeSumPositive 
```

}//结束类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:23:22.710

问题是您正在将数字传递`count`给并且尝试访问此行的上限时`findMax`会抛出一段时间：`ArrayIndexOutOfBoundsException`

```
} else if (numbers[count] > max) { 
```

请记住，Java 中的数组是从零开始的。此外，由于 Java 使用*按值传递，*您需要将结果分配给以下输出`findMax`：

```
max = findMax(numbers, count - 1, 0); 
```

* * *

从逻辑上讲，`findMax`将始终返回*最后一个*数字而不是最高数字。`max`您需要从递归方法中返回临时值：

```
double findMax(double numbers[], int count, int index) {
   // This needs to be size - 1 because the array is 0-indexed.
   // This is our base case
   if (index == count - 1)
      return numbers[index];

   // Call the function recursively on less of the array
   double result = findMax(numbers, count, index + 1);

   // Return the max of (the first element we are examining, the max of the
   // rest of the array)
   if (numbers[index] > result)
      return numbers[index];
   else
      return result;
} 
```

此版本在`count`内部处理索引上限：

```
max = findMax(numbers, count, 0); 
```

# xamarin.ios - 在情节提要视图之间传递对象的最佳方式是什么？

> ID：15711406
> 
> 赞同：1
> 
> 时间：2013-03-29T21:05:50.457
> 
> 标签：xamarin.ios, xamarin

假设我有一个带有 2 个视图和视图控制器的故事板应用程序与导航控制器链接，那么将对象从第一个视图控制器传递到第二个视图控制器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:10:37.403

覆盖`PrepareForSegue`第一个控制器。

```
public class ViewControllerA : UICollectionViewController
{
    public override void PrepareForSegue(UIStoryboardSegue segue, NSObject sender) 
    {
        var destination = (ViewControllerB)segue.DestinationViewController;
        destination.SomeProperty = 2;
        destination.DoSomething();
    }
} 
```

`segue`如果您有几个来自 A 的不同 segue，您可能需要在进行演员表之前检查名称。

# ruby - Rake - 捕获：task_name 作为选项？

> ID：15711409
> 
> 赞同：0
> 
> 时间：2013-03-29T21:06:18.570
> 
> 标签：ruby, rake, rake-task, rakefile

我正在观看 Peepcode 截屏视频[Play by Play：Jim Weirich](https://peepcode.com/products/play-by-play-jimweirich-ruby)。

他执行了一个 rake 任务，该任务似乎将最终任务名称作为选项传递。

![rake -g 项目：红宝石：演示](../Images/4482ba369bad15bc00d94d21fe03ebec.png)

查看任务 :demo 如何创建“演示”文件夹。这是怎么做到的？

**编辑：**

谢谢，亚历克斯布拉德。

所以有这样的事情：

```
namespace :project do
    namespace :ruby do
        rule "" do |t|
            puts t.name
        end
    end
end 
```

运行`$ rake project:ruby:demo`输出`project:ruby:demo`。

我是否必须`t.name.split(":")`或有办法只获取最终名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:26:23.247

如果您定义这样的任务：

```
 namespace :test do
    rule "" do |t|
      # t.name is 'test::[whatever]"
    end
  end 
```

然后该`""`任务将充当一个包罗万象的任务，您可以将其名称用作您想要的任何参数

# windows - BAT 文件可以删除一些文件，但不能删除其他文件

> ID：15711410
> 
> 赞同：0
> 
> 时间：2013-03-29T21:06:20.193
> 
> 标签：windows, batch-file

我正在尝试创建一个简单的 BAT 文件来删除一些存储在应用数据中的缓存 .sst 文件。我运行该文件，但我的第一行没有删除 .SST。我在文件夹中添加了一个 .txt 文件并将该行修改为 del .txt 并且它可以工作。想法？或者也许是一种找出原因的方法？这就是我所拥有的-

```
@ Echo Off
del "%userprofile%\AppData\Local\Entrust\ESPOLK\*.sst" /q /s> nul
del "%userprofile%\AppData\Local\Entrust\ESP\*.sst" /q /s> nul 
```

谢谢， 马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:13:48.967

尝试将`/f`开关添加到命令中。例如

```
del "%userprofile%\AppData\Local\Entrust\ESPOLK*.sst" /q /s /f> nul 
```

这使得命令忽略大多数删除约束。

# ios - IOS 和 Parse.com - 如何为托管对象设置 ACL？

> ID：15711412
> 
> 赞同：1
> 
> 时间：2013-03-29T21:06:23.857
> 
> 标签：ios, core-data, webservice-client, parse-platform

我在后端为 Parse.com 的 iOS 应用程序中有三个托管对象。

我知道如何为常规对象设置访问控制列表。如何使用托管对象实现相同的目标？

我正在寻找这样的东西：

```
someManagedObject.ACL = [PFACL ACLWithUser:[PFUser currentUser]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:07:12.530

在文档中找到了解决方法：

[https://www.parse.com/docs/ios_guide#security-recommendations/iOS](https://www.parse.com/docs/ios_guide#security-recommendations/iOS)

> 为了帮助确保您的用户数据在默认情况下是安全的，您可以设置一个默认 ACL 以应用于所有新创建的 PFObject：

```
[PFACL setDefaultACL:[PFACL ACL] withAccessForCurrentUser:YES]; 
```

因此，登录 Parse.com 后，Parse 库会负责您的安全对象处理。您有自己的业务逻辑，当尝试与 Parse 通信并发送模型时，它会自动将 ACL 添加到您的对象。稍后 Parse 将仅下载与登录用户的 ACL 匹配的对象。

# javascript - 添加到主屏幕时 iPhone webapp 中断

> ID：15711419
> 
> 赞同：0
> 
> 时间：2013-03-29T21:07:08.190
> 
> 标签：javascript, jquery, iphone, ios, mobile

我正在为 iPhone 创建一个 webapp，但我遇到了一些问题。我想对我拥有的搜索表单实现自动完成。一切似乎都运行良好，无论是在桌面浏览器还是网络浏览器上，包括 iPhone 的移动 Safari（当用户开始输入时，会显示建议的结果）。

问题是当我将应用程序添加到主屏幕时（Safari 中的“添加到主屏幕”）。添加了应用程序，但是当我尝试使用搜索框时，没有像浏览器中那样的建议。我捕获的事件是 jQuery 的 keyup。

知道如何解决这种行为吗？

*   晒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:18:48.807

好吧，删除它，清除历史记录并再次添加它似乎可以工作。

# java - 在java json中转义引号

> ID：15711428
> 
> 赞同：0
> 
> 时间：2013-03-29T21:08:05.607
> 
> 标签：java, json

我正在准备 JSON 和我做的一些部分

```
ls += "{ \"id\": \"" + list.indexOf(el) + "\", \"cell\" : [\"" +  el.toString() + "\"]}," ; 
```

但是当我检查 Firebug 发送的内容时，我看到没有删除反斜杠：

```
{"total":"1","page":"1","records":"1","rows":"[{ \"id\": \"0\", \"cell\" : [\"data1\"]},{ \"id\": \"1\", \"cell\" : [\"data2\"]}]"} 
```

有任何想法吗？我试过了，`ls.replaceAll("\\\\", " ");`但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:23:20.747

What JSON library are you using? It looks to me like you're correctly building strings like

```
{ "id": "0", "cell" : ["data1"]} 
```

but then inserting them *as strings* into some structure that is serialized by a JSON library. The JSON serializer then has to re-escape the quotes to make the result into a valid JSON string literal.

Edit: you say you're using Gson, so I presume you have a top level class you're serializing which currently has a `String rows` property which you're filling with a JSON string. Instead you need to create a new class to represent one row

```
class Row {
  private String id;
  private List<String> cell;
  // constructor, getters and setters as usual
} 
```

And change the rows property to be a `List<Row>`. Now rather than concatenating strings together to build the JSON yourself you simply populate your top-level object with the appropriate `Row` objects and let Gson handle converting them to JSON.

# mediawiki - 在语义记录中设置非绑定空间

> ID：15711430
> 
> 赞同：7
> 
> 时间：2013-03-29T21:08:12.403
> 
> 标签：mediawiki, mediawiki-templates, semantic-mediawiki

无论如何，是否允许在语义记录中使用非绑定空间`&nbsp;`或其他 HTML 编码字符？我遇到的问题是该`;`字符被软件视为记录的结尾。

例如：假设我有一个婚姻记录，其中设置了 2 个结婚的人的姓氏、他们结婚的年份和他们结婚的国家。

`[[has marriage::Jones & Smith; 1990; United States]]`看起来很轻它应该工作。问题是`&`被编码为`&amp;`. 然后软件看到`;`并且我最终得到一个看起来像这样的记录：`Jones &amp; Smith; 1990`因为`;`末尾的`&amp;`被视为记录的一部分的结尾。有谁知道解决这个问题的任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:23:36.090

我的下一个尝试是[#urlencode](http://www.mediawiki.org/wiki/Extension%3aStringFunctions#.23urlencode%3a_and_.23urldecode%3a)函数：

```
[[has marriage::{{#urlencode:Jones & Smith}}; 1990; United States]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:32:49.780

您是否尝试过像这样格式化链接？

```
[[has marriage::Jones %26 Smith; 1990; United States]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T20:02:09.887

我无法在 MW 1.25 + SMW 2.3 上重现您的问题，也许最简单的答案就是升级您的安装。

但是，我认为您错误地尝试将多个值存储在单个属性中，而应该使用另一个功能来存储此记录类型。Semantic Mediawiki 具有所谓的“子对象”实体，用于将一组相互关联的属性存储在一个地方。

```
{{#subobject:
 |Page=Title of page this object linked to
 |Name1=John
 |Name2=Smith
 |Year=1990
 |Location=United States
}} 
```

然后你可以像这样简单地查询这些数据：

```
{{#ask: [[Page::{{PAGENAME}}]] 
|?Name1 |?Name2 |?Year |?Location
|format=template 
|template=Item template
|named args=yes
}} 
```

并有类似的模板：

```
Record info: 
 * Name 1: {{{?Name1}}}
 * Name 2: {{{?Name2}}}
 * Year: {{{?Year}}}
 * Location: {{{?Location}}} 
```

# jsf - Primefaces 咆哮不适用于所有页面

> ID：15711434
> 
> 赞同：4
> 
> 时间：2013-03-29T21:08:33.327
> 
> 标签：jsf, primefaces

我的网站有一个通用模板，即`xhtml file`同时包含`growl`

```
<p:growl id="message" showDetail="true" life="3000" /> 
```

该模板在所有页面中进一步使用。我注意到这`growl`适用于页面`index.xhtml`，但不适用于其他页面。以下是`faces-config.xml`文件片段-

```
<navigation-rule>
    <display-name>index.xhtml</display-name>
    <from-view-id>/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>NORMAL_USER</from-outcome>
        <to-view-id>/home.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

但是每当我`home.xhtml`通过链接访问页面时`http://localhost:8080/portal/home.xhtml`， 就会`growl`开始工作。在我`update=":message"`用来更新的所有页面中`growl`。谁是罪魁祸首？

下边是`index.xhtml`

```
<ui:composition template="/template/common/base.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <ui:define name="center">

        <h:form>
            <div align="center" style="margin-top: 10%; margin-bottom: 10%;">
                <p:panelGrid columns="2">
                    <f:facet name="header">  
                     #{msg.HEADER}
                    </f:facet>

                    <h:outputLabel for="username" value="#{msg.USERNAME}" />
                    <p:inputText id="username" value="#{client.user.username}"
                        required="true" requiredMessage="#{msg.USERNAME_REQUIRED_MSG}" />

                    <h:outputLabel for="password" value="#{msg.PASSWORD} " />
                    <p:password id="password" value="#{client.user.password}"
                        required="true" requiredMessage="#{msg.PASSWORD_REQUIRED_MSG}" />

                    <f:facet name="footer">
                        <div align="right">
                            <p:commandButton value="#{msg.LOGIN_BUTTON}" icon="ui-icon-check"
                                update=":message" action="#{client.login}" />
                        </div>
                    </f:facet>
                </p:panelGrid>
            </div>
        </h:form>

    </ui:define>
</ui:composition> 
```

下边是`base.xhtml`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>My Web Portal</title>
    <h:outputStylesheet library="css" name="default.css" />
</h:head>

<h:body>

    <p:growl id="message" showDetail="true" life="3000" />

    <h:link outcome="index" style="text-decoration: none;">
        <div id="header" style="margin: 2px; width: 100%; text-align: center;">
            <p:panel>
                <h:outputText value="My Web Portal"
                    style="font-size: 20px; " />
            </p:panel>
        </div>
    </h:link>

    <div id="middle" style="margin: auto; width: 80%;">
        <ui:insert name="center"></ui:insert>
    </div>

    <div id="footer"
        style="clear: both; text-align: center; margin: 2px; width: 100%;">
        <p:panel header="2013 All rights reserved. Designed by Ravi Joshi">
            <h:link value="Home" outcome="index" />
            <p:spacer width="10px;" />
            <h:link value="About Us" outcome="index" />
            <p:spacer width="10px;" />
        </p:panel>
    </div>

</h:body>
</html> 
```

下一页`home.xhtml`也`base.xhtml`以与使用它相同的方式`index.xhtml`使用...下面是它的片段-

```
<ui:composition template="/template/common/base.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <ui:define name="center">

    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->

    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T19:28:26.403

> If a parent of the with the UICommand button is been rendered/updated by an ajax request beforehand, then the first action will always fail. The second and subsequent actions will work. This is caused by a bug in view state handling which is reported as JSF spec issue 790 and fixed in JSF 2.2\. For JSF 2.0 and 2.1 you need to explicitly specify the ID of the in the render of the `<f:ajax>`

Says BalusC [here](https://stackoverflow.com/a/2120183/1659451). So in your case you are doing navigation to another page and stucks into that view state bug, `ajax=false` indicates submit the button without AJAX that's why it works.

Also BalusC suggests to use a script which fixes this bug [here.](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click)

# asp.net - Visual Studio 在尝试创建事件处理程序时崩溃

> ID：15711435
> 
> 赞同：0
> 
> 时间：2013-03-29T21:08:38.017
> 
> 标签：asp.net, visual-studio-2010

Visual Studio 2010 设计网页。一直在做这个，从来没有这个问题。我重新安装了，我重置了设置，这两者都是我的谷歌搜索告诉我的。这并没有解决问题。

当我双击一个控件以创建处理程序并转到代码页时，它崩溃了。当我转到属性并尝试设置事件处理程序时，它崩溃了。

这只是突然开始发生。有任何想法吗？

# java - Apache Karaf 是否处理任何 JAR 或 WAR 的热部署？

> ID：15711438
> 
> 赞同：2
> 
> 时间：2013-03-29T21:08:44.007
> 
> 标签：java, osgi, containers, executable-jar, apache-karaf

我正在尝试查看是否可以重构我继承的项目的体系结构，并且对 Apache Karaf 作为可能的解决方案感兴趣。

目前，我们为我们拥有的每个（非盈利）客户构建一个可执行 JAR，并 cron 让 JAR 在不同时间运行。每个“客户端 JAR”在其中使用多个“公共” JAR，并在其中包含特定于客户端的逻辑。总共有数百个客户端 JAR 和大约十几个常见 JAR。

这种架构的问题很多：

1.  由于公共 JAR 只是作为库，因此客户端 JAR 没有可在其上运行的公共**平台**。他们中的许多人使用 Apache Camel 并使用这些 JAR 本地的路由，并且在所有 JAR 中复制了大量的 Camel 代码。如果有一个解决方案，所有客户端 JAR 可以共享相同的 Camel 路由，那就太好了。
2.  它将何时运行每个客户端 JAR 的业务逻辑置于 cron 手中，这很好，但这是 Java，我更希望有一个主 Quartz“调度程序”来控制所有 JAR 何时运行。
3.  每次我需要向其中一个公共 JAR 中添加依赖项时，我都需要检查每个客户端 JAR 的每个 crontab 条目并修改类路径参数以获取额外的依赖项。
4.  名单还在继续……
5.  我只是不喜欢 cronning 可执行客户端 JAR 的想法，因为如果它们被部署到同一个容器中，它们可以更加紧密地工作。

所以基本上，我需要一个解决方案：

*   允许我随时部署/取消部署和重新部署新版本的客户端 JAR，而不会中断系统的其余部分
*   部署/取消部署任何公共 JAR，以便任何开始使用的新客户端 JAR 获取公共 JAR 的新版本
*   允许我部署/取消部署 Quartz 调度程序（WAR 或 JAR），该调度程序可以 cron/调度每个客户端 JAR 以在一周的不同时间运行
*   允许我部署/取消部署消息代理，也许还有 ESB，例如 Camel 或 Mule，这样我的每个客户端 JAR 都可以使用相同的队列和路由
*   允许我部署/取消部署单个日志 JAR（log4j、commons logging 等）和单个 JPA 实现 JAR（Hibernate、MyBatis 等），并使其对所有客户端 JAR 普遍使用/可用

**以上这些都可以用Karaf来完成吗？**如果没有，我在这里有什么选择吗（Felix、Equinox 等）？还是我在追逐梦想？鉴于我的问题域，是否有任何警告或理由让我坚持当前的解决方案？提前致谢！

请注意：如果有人认为 EJB3 对我来说是一个很好的解决方案，而不是 OSGi，我当然愿意听取你的论点，但我的项目经理*讨厌*EJB（在 EJB2 沉重的日子里，他嘴里的味道很差）并且不会可能会批准这样的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:52:39.067

是的，Karaf 确实有 JAR 文件和 WAR 文件的部署器。它甚至能够自动增强它们以获得所需的 OSGi Manifest 条目。我认为随着进入 OSGi 模块化，你是一个很好的公司，而 Karaf 可能是 Camel 的最佳运行时。

我只是想稍微考虑一下您的部署方案。可以做到，但我不会那样做。使用功能文件是 Karaf 为您提供的将一组包部署为功能的东西，结合使用 Maven 作为您的存储库，您可以为您的应用程序提供一个非常好的运行时。

# emacs - Bookmark+ 使用临时文件，尽管已要求特定文件

> ID：15711440
> 
> 赞同：4
> 
> 时间：2013-03-29T21:08:47.070
> 
> 标签：emacs, bookmarks

键入后`C-x r l`，我得到一个名为`*Bookmark List*` In this buffer 我看到的缓冲区：

```
Bookmark file:
/tmp/bmkp-temp/19236bkt 
```

如果我打开帮助（即按`h`），我会看到：

```
Bookmark file:  /tmp/bmkp-temp-19236bkt
Sorted:         
Filtering:      none
Marked:         0
Omitted:        0
Autosave bookmarks: no
Autosave list display:  yes 
```

即使我的`.emacs`文件中有以下内容：

```
(setq bookmark-file "~/.emacs.d/bookmarks")
(setq bookmark-default-file "~/.emacs.d/bookmarks")
(setq bmkp-default-bookmark-file "~/.emacs.d/bookmarks")
(setq bmkp-last-as-first-bookmark-file nil) 
```

为什么它使用与我指定的不同的书签文件？

我还注意到，当我加载 Emacs 时，会发生以下情况：

```
Emptying bookmark file `/tmp/bmkp-temp-23808OMn'...
Saving file /tmp/bmkp-temp-23808OMn...
Wrote /tmp/bmkp-temp-23808OMn
Emptying bookmark file `/tmp/bmkp-temp-23808OMn'...done
...
Helm completion enabled
Emptying bookmark file `/tmp/bmkp-temp-23808bWt'...
Saving file /tmp/bmkp-temp-23808bWt...
Wrote /tmp/bmkp-temp-23808bWt
Emptying bookmark file `/tmp/bmkp-temp-23808bWt'...done
... 
```

Emacs 继续删除临时书签文件。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:56:42.960

看起来某处（例如检查您的 .emacs 文件）已打开`bmkp-temporary-bookmarking-mode`。当该模式打开时，您创建的任何书签仅适用于当前会话 - 它们不会保存到您的书签文件中。

这意味着您的书签文件位置设置将被忽略。（注意，顺便说一句，这`bmkp-default-bookmark-file`是一个函数，而不是变量——它不是您设置的东西。而且您不需要所有这些书签文件设置；有些是多余的：旧版本的 Emacs 书签中的旧名称。 )

我不知道您为什么要创建和保存多个临时书签文件。你没有提供完整的食谱。你应该只得到一个这样的。这就是我`*Messages*`在这方面看到的所有内容，例如：

```
  正在清空书签文件 `c:/DOCUME~1/me/LOCALS~1/Temp/bmkp-temp-5348su1'...
  保存文件 c:/Documents and Settings/me/Local Settings/Temp/bmkp-temp-5348su1...
  写了 c:/Documents and Settings/me/Local Settings/Temp/bmkp-temp-5348su1
  清空书签文件 `c:/DOCUME~1/me/LOCALS~1/Temp/bmkp-temp-5348su1'...完成

```

看起来您还有很多事情要做（Helm 等）。在尝试理解或调试问题时，它有助于尽可能缩小范围。谁能说出这里可能涉及哪些其他交互？

综上所述，我的建议是*不要*一开始就使用临时书签模式。在您对 Bookmark+ 非常熟悉之前，我不建议您使用它。您可以在不使用此模式的情况下使用临时书签。

这是关于使用临时书签的文档： [http ://www.emacswiki.org/cgi-bin/wiki/BookmarkPlus#toc55](http://www.emacswiki.org/cgi-bin/wiki/BookmarkPlus#toc55)

最后，正如 Stefan 所建议的，请通过电子邮件跟进。详细调试/讨论事情要容易得多。

谢谢——德鲁

* * *

2019-04-21 更新：

我认为可能发生的情况是您在`bmkp-temporary-bookmarking-mode`启用的情况下退出了 Emacs。尽管 Bookmark+（正确）不保存临时书签的文件，但它并没有阻止记录`bmkp-last-as-first-bookmark-file`更新以指向临时文件。在您的下一个 Emacs 会话中，由于`bmkp-last-as-first-bookmark-file`.

现在应该没问题了。启用`bmkp-temporary-bookmarking-mode`现在重置`bmkp-last-as-first-bookmark-file`为`nil`，因此如果您在临时模式仍然启用的情况下退出，那么当您在新会话中加载书签文件时，读取的文件是`bookmark-default-file`. （的值`bookmark-default-file`永远不会改变，除非您的自定义。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T23:38:18.533

也许您正在尝试使用“书签文件书签”？或者无论如何，不​​小心撞到了`C-x p x`？

[在EmacsWiki：Bookmark Plus / Bookmark-File Bookmarks](http://www.emacswiki.org/emacs/BookmarkPlus#toc39)上，这些声称对应，他们说，“ `bmkp-set-bookmark-file-bookmark`，绑定到`C-x p x`”。对于我的 Emacs，这不是真的。

通过键入`C-x p C-h`，我可以检查以 . 开头的键绑定`C-x p`。我发现

*   `C-x p x`必然`bmkp-toggle-autotemp-on-set`，并且

*   `C-x p y`必然`bmkp-set-bookmark-file-bookmark`。

然后，链接应该`C-x p y`改为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T14:33:54.370

这是一个很老的问题，但是由于我遇到了同样的问题并且其他答案对我没有帮助，我将发布我的解决方案：

我正在使用 desktop.el 中的桌面文件，并且在桌面文件中设置了临时模式！从我的所有桌面文件中删除该设置解决了这个问题。

这可能很方便：

```
find ~ -name .emacs.desktop -print0 | xargs -0 grep -l bmkp-temporary-bookmarking-mode 
```

# java - Java - 使用 Accessor 和 Mutator 方法

> ID：15711442
> 
> 赞同：7
> 
> 时间：2013-03-29T21:08:52.207
> 
> 标签：java, accessor, mutators

我正在做家庭作业。我对应该如何做感到困惑。

问题是：

> 创建一个名为 IDCard 的类，其中包含一个人的姓名、ID 号和包含该人的照片的文件的名称。为每个字段编写访问器和修改器方法。将以下两个重载构造函数添加到类中：
> 
> public IDCard() public IDCard(String n, int ID, String filename)
> 
> 通过使用这两个构造函数创建不同的 ojbect 并使用 accessor 和 mutator 方法在控制台上打印出它们的值来测试您的程序。

到目前为止，我已经重写了这个：

```
public class IDCard {
String Name, FileName;
int ID;

public static void main(String[] args) {

}

public IDCard()
{
    this.Name = getName();
    this.FileName = getFileName();
    this.ID = getID();
}

public IDCard(String n, int ID, String filename)
{

}

public String getName()
{
    return "Jack Smith";
}

public String getFileName()
{
    return "Jack.jpg";
}

public int getID()
{

        return 555;
    }
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-29T21:50:34.770

让我们回顾一下基础知识：“Accessor”和“Mutator”只是 getter 和 setter 的花哨名称。一个 getter，“Accessor”，返回一个类的变量或它的值。设置器“Mutator”设置类变量指针或其值。

所以首先你需要设置一个包含一些变量的类来获取/设置：

```
public class IDCard
{
    private String mName;
    private String mFileName;
    private int mID;

} 
```

但是哦不！如果您实例化此类，这些变量的默认值将毫无意义。顺便说一句，“实例化”是一个花哨的词：

```
IDCard test = new IDCard(); 
```

所以 - 让我们设置一个默认构造函数，这是当你“实例化”一个类时调用的方法。

```
public IDCard()
{
    mName = "";
    mFileName = "";
    mID = -1;
} 
```

但是，如果我们确实知道我们想要赋予变量的值怎么办？所以让我们创建另一个构造函数，一个带参数的构造函数：

```
public IDCard(String name, int ID, String filename)
{
    mName = name;
    mID = ID;
    mFileName = filename;
} 
```

哇 - 这很好。但是很愚蠢。因为我们无法访问（=读取）变量的值。因此，让我们添加一个 getter，同时添加一个 setter：

```
public String getName()
{
    return mName;
}

public void setName( String name )
{
    mName = name;
} 
```

好的。现在我们可以访问`mName`. 添加其余的访问器和修改器，您现在是经过认证的 Java 新手。祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T21:28:15.960

您需要`static`从访问器方法中删除 - 这些方法需要是实例方法并访问实例变量

```
public class IDCard {
    public String name, fileName;
    public int id;

    public IDCard(final String name, final String fileName, final int id) {
        this.name = name;
        this.fileName = fileName
        this.id = id;
    }

    public String getName() {
        return name;
    }
} 
```

您可以像这样创建`IDCard`和使用访问器：

```
final IDCard card = new IDCard();
card.getName(); 
```

每次调用都会创建`new`一个新实例，`IDCard`并且它将拥有 3 个变量的自己的副本。

如果您使用`static`关键字，那么这些变量在`IDCard`.

有几件事要记住：

1.  不要添加无用的注释——它们只会添加代码混乱，仅此而已。
2.  符合命名约定，使用小写的变量名 - `name`not `Name`.

# java - 使用带有 Ajax 的单个提交按钮在 JSP 中提交两个 HTML 表单

> ID：15711443
> 
> 赞同：2
> 
> 时间：2013-03-29T21:09:08.277
> 
> 标签：java, jquery, jsp, struts2, double-submit-problem

我的页面设计是这样的，我必须使用两个单击提交然后保存到数据库的表单，反之亦然。

我在带有 Struts 2 框架的 JSP 页面上使用它。我已经尝试过 Ajax 解决方案，但它们对我不起作用。

**这是我的脚本（更新）：**

```
$("#visitType").buttonset();
$("#patientCondition").buttonset();
$("input[type=submit], a, button").button().click(function(event) {
  event.preventDefault();
  var inputs=$('#visitType,#patientCondition ').find(':input').not(this);
  var form_data={};
  inputs.each(function(){
    form_data[this.name]=$(this).val();
  });
  $.post('patientSoapAll',  form_data, function(response){  
  });
}); 
```

**我的表格1：**

```
<s:form action="PatientSoapAll" method="post">

        <div id="visitType">
            <input type="radio" id="I" value="I" <s:if test='pSB.rOS == "I"'>checked</s:if> name="pSB.rOS" /><label for="I">I V</label> 
            <input type="radio" id="R" value="R"<s:if test='pSB.rOS == "R"'>checked</s:if>name="pSB.rOS" /><label for="R">Regular   Visit</label> 
            <input type="radio" id="P/N" <s:if test='pSB.rOS == "P/N"'>checked</s:if>name="pSB.rOS" /><label for="D/N">Re- Evaluation</label> 
            <input type="radio" id="D/N"<s:if test='pSB.rOS == "D/N"'>checked</s:if> name="pSB.rOS" /><label for="

    P/N">Discharge</label>
    </div>
</s:form> 
```

**我的表格2：**

```
<s:form action="PatientSoapAll" method="post">

    <div id="patientCondition">
        <input type="radio" id="new" value="n"<s:if test='pSB.r2 == "n"'>checked</s:if> name="pSB.r2" /> <label for="new">New</label>
        <input type="radio" id="noChange" value="nC" <s:if test='pSB.r2 == "nC"'>checked</s:if> name="pSB.r2" /><label for="noChange">No Change</label> 
        <input type="radio" id="progressing" value="p"<s:if test='pSB.r2 == "p"'>checked</s:if> name="pSB.r2" /><label for="progressing">Progressing</label> 
        <input type="radio" id="notProgressing" value="nP" <s:if test='pSB.r2 == "nP"'>checked</s:if>   name="pSB.r2" /><label for="notProgressing">Not Progressing</label>
    </div>
</s:form> 
```

**这是我的更新提交按钮。从桌子上取下`<div>`并放置在桌子内。**

```
<tr>
  <td></td>
  <td><input type="submit" value="Save Note" /></td>
</tr> 
```

我正在使用 Struts 2，我想将此提交按钮重定向到一个操作`PatientSoapAll`。我正在使用自定义扩展`.do`而不是`.action`（默认情况下）。请告诉我如何将此提交按钮重定向到 Struts 2 中的相应操作类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:41:04.630

你可以使用 jQuery[`.serialize`](http://api.jquery.com/serialize/)来做你想做的事。为您的表单提供一些类，然后使用它来选择您的表单并调用 serialize 以获取标准 URL 编码表示法的字符串。之后，您可以使用一些 AJAX 方法将其发布到您的操作中。

```
$(function() {
  $("#saveNoteButton").click(function() {
    alert($(".forms").serialize());
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:56:48.743

您可以使用 Struts2 jQuery 提交多个表单

```
<sj:submit formIds="visitType,patientCondition" targets="result" value="Submit" /> 
```

*表单ID：*

> 单击此元素时在提交期间序列化所有字段的表单 ID 的逗号分隔列表（如果多个表单具有重叠的元素名称，则不确定将使用哪个）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T23:40:42.647

找到了一个简单的解决方案。

javascript:

```
submitForms = function() {
  $('#form2 :input').not(':submit').clone().hide().appendTo('#form1');
    document.getElementById("form1").submit();
}; 
```

提交按钮：

```
<input type="button" value="Save Note" onclick="submitForms()" /> 
```

# c++ - 如何使用 libgit2 提交到 git 存储库？

> ID：15711444
> 
> 赞同：2
> 
> 时间：2013-03-29T21:09:08.377
> 
> 标签：c++, c, libgit2

由于没有复制粘贴示例来创建提交而不使用[libgit2磁盘上的文件](http://libgit2.github.com/) [，据我所知，](https://www.google.ro/search?q=commit%20to%20a%20git%20repository%20using%20libgit2)我认为我应该添加一个。

不要忘记此时（2013 年 3 月）libgit2 正在全面开发中，因此请查看官方文档和源代码，因为每天都会添加新功能：

*   [libgit2 API](http://libgit2.github.com/libgit2/#HEAD)
*   标题的评论很好 -[这是一个例子](https://github.com/libgit2/libgit2/blob/HEAD/include/git2/clone.h#L99-103)
*   [广泛的测试](https://github.com/libgit2/libgit2/tree/master/tests)可能是灵感的来源
*   有一些[官方的例子](https://github.com/libgit2/libgit2/tree/master/examples)，[general.c](https://github.com/libgit2/libgit2/blob/master/examples/general.c)是一个很好的起点
*   可以在[LibGit2Sharp](https://github.com/libgit2/libgit2sharp)中找到灵感——这里有[一些测试](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp.Tests/ObjectDatabaseFixture.cs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:09:08.377

```
bool addGitCommit ( 
  git_repository * repo, git_signature * sign, 
  const char * content, int content_sz,
  const char * message )
{
  int rc;              /* return code for git_ functions */
  git_oid oid_blob;    /* the SHA1 for our blob in the tree */
  git_oid oid_tree;    /* the SHA1 for our tree in the commit */
  git_oid oid_commit;  /* the SHA1 for our initial commit */
  git_blob * blob;     /* our blob in the tree */
  git_tree * tree_cmt; /* our tree in the commit */
  git_treebuilder * tree_bld;  /* tree builder */
  bool b = false;

  /* create a blob from our buffer */
  rc = git_blob_create_frombuffer( 
        &oid_blob,
        repo, 
        content, 
        content_sz );
  if ( rc == 0 ) { /* blob created */
    rc = git_blob_lookup( &blob, repo, &oid_blob );
    if ( rc == 0 ) { /* blob created and found */
      rc = git_treebuilder_create( &tree_bld, NULL );
      if ( rc == 0 ) { /* a new tree builder created */
        rc = git_treebuilder_insert( 
              NULL, 
              tree_bld, 
              "name-of-the-file.txt", 
              &oid_blob, 
              GIT_FILEMODE_BLOB );
        if ( rc == 0 ) { /* blob inserted in tree */
          rc = git_treebuilder_write( 
                &oid_tree, 
                repo, 
                tree_bld );
          if ( rc == 0 ) { /* the tree was written to the database */
            rc = git_tree_lookup(
                  &tree_cmt, repo, &oid_tree );
            if ( rc == 0 ) { /*we've got the tree pointer */  
              rc = git_commit_create(
                    &oid_commit, repo, "HEAD",
                    sign, sign, /* same author and commiter */
                    NULL, /* default UTF-8 encoding */
                    message,
                    tree_cmt, 0, NULL );
              if ( rc == 0 ) {
                b = true;
              }
              git_tree_free( tree_cmt );
            }
          }
        }
        git_treebuilder_free( tree_bld );
      }
      git_blob_free( blob );
    }
  }
  return b;
} 
```

存储库来自`git_repository_init()`or `git_repository_open()`。签名来自`git_signature_now()`or `git_signature_new()`。

该函数更新当前分支的 HEAD。

如果您`git status`在函数执行后执行 a 操作，您会注意到该文件`name-of-the-file.txt`显示为已删除。那是因为该函数不会创建一个实际的文件，只是在 git 数据库中创建一个条目。

另外，请注意`git_commit_create()`. 0 和 NULL 表示这是第一个（根）提交。对于所有其他应至少指定一个父提交，可能使用`git_commit_lookup()`.

* * *

我只是在学习这些东西。如果您知道得更好，请改进此答案。

# django - 在新的 Django 项目中设置 South 时出错

> ID：15711448
> 
> 赞同：1
> 
> 时间：2013-03-29T21:09:14.103
> 
> 标签：django, django-south

我正在开发一个新的 django 项目并遵循[本教程](http://www.jeffknupp.com/blog/2012/10/24/starting-a-django-14-project-the-right-way/)。我正在尝试运行“使用 South 进行数据库迁移”步骤，`python manage.py syncdb`但出现以下错误：

```
(editorial)[hookedonwinter@hookedonwinter editorial (master *)]$ python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/django/core/management/__init__.py", line 453, in execute_from_command_line
    utility.execute()
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/django/core/management/__init__.py", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/django/core/management/__init__.py", line 272, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/django/core/management/__init__.py", line 77, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/south/management/commands/__init__.py", line 13, in <module>
    from south.management.commands.syncdb import Command as SyncCommand
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/south/management/commands/syncdb.py", line 18, in <module>
    from south import migration
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/south/migration/__init__.py", line 11, in <module>
    from south.models import MigrationHistory
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/south/models.py", line 4, in <module>
    class MigrationHistory(models.Model):
  File "/Users/hookedonwinter/.virtualenvs/editorial/lib/python2.6/site-packages/django/db/models/base.py", line 97, in __new__
    new_class.add_to_class('_meta', Options(meta, **kwargs))
TypeError: Error when calling the metaclass bases
    __init__() keywords must be strings 
```

这是我的 settings.py 文件：[https ://gist.github.com/pjhoberman/5273653](https://gist.github.com/pjhoberman/5273653)

目前还没有应用程序，只是一个空项目。我猜这是我的一个简单的忽视 - 有什么想法吗？

* * *

**编辑**

从评论：

*   我还没有任何模型。只是按照那个教程，在我做任何模型工作之前，我试图从 South 开始。

*   版本：

    *   Django==1.5.1
    *   南==0.7.6
*   如果我在 settings.py 中注释掉南，我会得到这个错误：

    `$ python manage.py syncdb`

    `TypeError: Error when calling the metaclass bases __init__() keywords must be strings`

* * *

**编辑2**

我重新开始并使用了 django 1.4，它可以工作。

**编辑3**

我将 python 更新到 2.7 并使用了 django 1.5，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T04:28:11.517

底部的“TypeError”是解决方案。如果您使用低于 2.6.5 的 Python 版本，则会从 Django 1.5 收到此错误。有一个[Django 错误报告](https://code.djangoproject.com/ticket/18961)和一个关于这个问题的[讨论](https://stackoverflow.com/questions/14310373/django-server-can-not-run-why)。可以说，错误信息不够直观。

OP是对的，没有一个答案可以解决这个问题。解决方案是：1）将 Python 升级到 2.7，2）将 Django 降级到 1.4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:57:24.193

我将 python 更新到 2.7 并使用了 django 1.5，一切正常。

没有一个答案真正解决了这个问题，所以我自己回答，因为现在有赏金我不能删除这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T04:38:23.237

我认为问题出在数据库设置中的“~”字符上。尝试将设置`#coding=utf-8`作为第一行或第二行，看看会发生什么。

如果这不能解决您的问题，请在文件的同一目录中更改数据库文件名，`manage.py`如下所示：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'databasename.sql',
    }
} 
```

我尝试按照您发布的教程创建一个新环境，我没有问题。但是，当我尝试使用数据库名称时（名称中带有“~”的数据库名称），我收到此错误：

```
(env) user@pc:/path >$  python manage.py syncdb --noinput
Syncing...
OperationalError: unable to open database file 
```

我敢打赌，这个符号是你问题的根源......告诉我们这是否解决了你的问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:40:09.203

南方有很好的记录，我相信你在经历过之后就会清楚。

这是教程。

[http://south.readthedocs.org/en/0.7.6/tutorial/part1.html](http://south.readthedocs.org/en/0.7.6/tutorial/part1.html)

还是为了让生活更简单..

1）下载南并将其添加到您的应用程序目录。
2) 在 settings.py 中将 'south' 添加到 INSTALLED APPS
3) 运行 syncdb
4) $ ./manage.py schemamigration appname --initial
5) $ ./manage.py migrate appname

这是一个非常基本的开始所需要的一切。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T15:19:50.597

您需要 Python 2.6.5+ 才能运行 Django 1.5。这就是为什么降级到 Django 1.4 或升级到 Python 2.7 可以解决您的问题。

[https://docs.djangoproject.com/en/dev/releases/1.5/#python-compatibility](https://docs.djangoproject.com/en/dev/releases/1.5/#python-compatibility)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T00:04:11.510

似乎是数据库配置问题，试试这个。在文件的顶部：

```
import os 
```

然后：

```
PROJECT_DIR = os.path.abspath(os.path.dirname(__file__))
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(PROJECT_DIR, 'yourdatabasename.db'),
    }
} 
```

最后一个 syncdb 应该可以解决问题。您也可以尝试“python manage.py reset south”来修复APP中可能出现的问题。如果这不起作用，我建议您开始一个新问题以丢弃其他错误。

原帖：[Django setup with sqlite3?](https://stackoverflow.com/questions/13301419/django-setup-with-sqlite3)

# c# - 从 C# 应用程序内部调用 Matlab 编译器会引发异常

> ID：15711456
> 
> 赞同：1
> 
> 时间：2013-03-29T21:10:07.703
> 
> 标签：c#, matlab, matlab-deployment, matlab-compiler

我发现这段代码可以调用 Matlab 编译器，当从 Matlab 命令提示符调用该函数时它工作正常，我将此函数构建为 .Net 程序集，但每当我尝试在我的 C# 应用程序中使用它以构建一些 .m 文件时我得到一个例外，你认为我的问题在哪里？

Matlab代码：

```
function compileCode(mfile,dllName , dnetdir)

    %% Create directories if needed
    if (exist(dnetdir, 'dir') ~= 7)
        mkdir(dnetdir);
    end

    %% Build .NET Assembly
    eval(['mcc -N -d ''' dnetdir ''' -W ''dotnet:' dllName ',' ...
          '' dllName ',0.0,private'' -T link:lib ''' mfile '''']);
    end 
```

C#代码：

```
var cmm = new compiler.MatlabCompiler();
MWCharArray x = new MWCharArray(@"C:\Users\ePezhman\Documents\MATLAB\Graph2D.m");
MWCharArray y = new MWCharArray("Graph");
MWCharArray z = new MWCharArray(@"C:\Matlab\dotnet");
cmm.compileCode(x,y,z); 
```

例外：

> ... MWMCR::EvaluateFunction 错误 ... 'char' 类型的输入参数的未定义函数'mcc'。第 9 行 => compileCode.m 中的错误。
> 
> ... Matlab M 代码堆栈跟踪 ... 在文件 C:\Users\ePezhman\AppData\Local\Temp\ePezhman\mcrCache8.0\compil0\compiler\compileCode.m，名称 compileCode，第 9 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:42:35.477

有趣的是，我假设您正在尝试编译一个可以动态编译其他函数的函数。

Unfortunately, I dont think the `mcc` function can be compiled/deployed itself

* * *

To be exact, the problem you are seeing is because MATLAB needs to know all functions called at compile-time, and by using `eval`, it wont figure it out on its own (since it wont parse inside the string). You can fix this particular issue by writing [special comments](http://www.mathworks.com/help/compiler/function.html) for the compiler..

```
function myEval()
    %#function foo
    eval('...');
end 
```

(Another alternative is using [function handles](https://stackoverflow.com/a/7409779/97160)).

Still even if you do that, it will fail at runtime inside the `mcc` function saying that: `"License checkout failed, [...] Cannot find a valid license for Compiler"`.

The reason is as mentioned in the comments, `mcc` is a development tool and cannot be deployed to standalone programs which only depends on the free MCR runtime.

Think about it, if it was possible, it would defeat the whole purpose of buying licenses for the product, as you could create a standalone program that can compiler other codes without having the Compiler toolbox :)

# c# - 使用单个 Visual Studio 解决方案同时为 C++/CLI 项目构建 x86 和 x64

> ID：15711460
> 
> 赞同：0
> 
> 时间：2013-03-29T21:10:27.820
> 
> 标签：c#, visual-studio-2010, msbuild, c++-cli

作为这个问题的后续： [使用单个 Visual Studio 解决方案同时构建 x86 和 x64？](https://stackoverflow.com/questions/1574075/use-a-single-visual-studio-solution-to-build-both-x86-and-x64-at-the-same-time)

我在 C# 项目的公认答案中使用了该技术，并且效果很好。 **有没有办法为 C++/CLI 项目 (.vcxproj) 做同样的事情？** 使用该技术似乎不起作用（“BeforeBuild”和“AfterBuild”目标似乎被忽略了）。

我什至可以从解决方案中另一个 C# 项目的 Before/AfterBuild 目标执行任务：

```
<Target Name="BeforeBuild">
  <MSBuild Condition=" '$(Platform)' == 'x64' " Projects="MyCPPCLIProject.vcxproj" Properties="Platform=x86;" />
</Target> 
```

当我这样做时，我收到以下错误（即使项目在解决方案中）：

```
C:\VS\MyCSProj.csproj(1773,5): error MSB3202: The project file "MyCPPCLIProject.vcxproj" was not found. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:46:33.750

尝试为项目文件名指定更多内容。用作`$(SolutionDir)`完整路径的一部分。

# linqpad - 如何在 LINQPad 中创建新的示例库

> ID：15711463
> 
> 赞同：1
> 
> 时间：2013-03-29T21:10:34.663
> 
> 标签：linqpad

我想弄清楚如何在 LINQPad 中编写示例库。

去官方网站，也尝试谷歌arround，但找不到任何东西。

我正在开发一个用于工作的小型框架库，我想通过一些示例来展示该框架的用法。我不想公开分发这些示例，只是希望能够将它们发送给与我合作的其他开发人员。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:17:53.900

在[最新的测试版](http://www.linqpad.net/beta.aspx)中，您只需右键单击**My Queries**中的文件夹并选择**Create sample library**即可创建示例库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:16:50.073

您可以在此处找到一些示例库 .zip 文件：

> [LINQPad 示例库](http://www.linqpad.net/RichClient/SampleLibraries.aspx)

只需解压缩它们并查看内容即可。

看起来您所要做的只是压缩一个充满 LINQPad 脚本的文件夹，并`header.xml`在 zip 文件的根目录中提供一个文件，其中包含如下内容：

```
<SampleLibrary>
    <Name>Name of your sample library</Name>
</SampleLibrary> 
```

如果您检查该网页上某些库的内容，您会注意到它们还捆绑了 zip 文件中使用的库，您也应该考虑这样做，以便您发送库的人不必在尝试之前修复任何示例中的引用。

# vim - vim 跳转到下一个不同的行

> ID：15711465
> 
> 赞同：3
> 
> 时间：2013-03-29T21:10:36.983
> 
> 标签：vim

我正在查看可能具有多个连续相同行的文件。

有没有一种简单的方法可以跳到下一个不同的行？

或者，我希望能够折叠所有等于初始行的行，仅显示折叠的行数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T21:41:47.553

您可以定义自己的折叠表达式：

首先设置 fdm：

```
:set fdm=expr 
```

然后

```
:set foldexpr=getline(v:lnum)==#getline(v:lnum-1)?1:0 
```

现在你可以通过输入`z``M`, 来测试关闭所有折叠，如果你幸运的话 ^_^ 所有重复的行都被折叠了。

您可以键入`z``R`以打开所有折叠。

如果它有效并且您经常打开此类文件，则可以将上述行放入您的 .vimrc.(au with ft) 如果只有一次工作，您可以将模式行写入该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:14:01.793

试试这个：

```
 :nmap <F2> "1y$<CR>/^\(<C-R>1$\)\@!<CR> 
```

它将 F2 映射到：

*   将当前行复制到寄存器 1
*   search for (and move to) the first line that does not match the contents of register 1

This seems to work well, unless the text of your copied line has escaped characters that will confuse the search regexp. This is because register 1 is just dropped into the search expression without escaping. This would be tricky to fix reliably, but for normal log files, it shouldn't be much of a problem.

Also: if you're not married to vim and just need to read the non-consecutively-duplicated lines of a file, the canonical UNIX way is:

```
uniq filename 
```

If you want to be in vim but won't need to make changes to the file, try:

```
:%!uniq 
```

(If you try the latter, be sure to exit without saving)

# java - Eclipse 调试器：线程与“守护进程”线程

> ID：15711473
> 
> 赞同：3
> 
> 时间：2013-03-29T21:11:26.380
> 
> 标签：java, eclipse, multithreading, debugging, daemon

每当我在 Eclipse 中运行调试配置（“调试会话”）并切换到调试透视图时，我总是在调用堆栈视图中看到“线程”和“守护线程”。

为什么有些线程守护进程和其他只是 POT（普通旧线程）？提前致谢！

（注意：我不是在问什么是守护进程，或者什么是守护线程，只是 Eclipse 如何确定哪些线程是守护进程。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:15:40.007

**Java中的**守护线程*是在后台运行的线程（主要由*JVM*创建），用于执行后台任务（如垃圾收集）。*守护线程*和*用户线程*之间的主要区别在于，一旦所有用户线程完成执行，Java 就会自行终止。*JVM*不会等待守护线程完成它们的执行。*

 *请注意，您可以使*用户*线程创建的线程成为*守护线程*（`setDaemon(true)`并且必须在调用线程的`start()`方法之前调用它）。
为了让程序继续运行，它必须始终*至少有*一个活动*用户线程*。

Eclipse 和您一样，可以轻松检查是否是线程`isDaemon()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:15:24.073

守护线程是任何调用了 setDamon(true) 的线程。或者任何作为守护线程子线程的线程。我猜 eclipse 使用 isDaemon() 来确定哪些线程是守护进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:19:23.790

当所有*非守护*线程都终止时，JVM 将退出。所以守护线程用于守护任务——即不应该阻止JVM退出的任务。

创建`Thread`对象后，您可以调用and`setDaemon(true)`将`Thread`其标记为守护进程。

然后，您可以调用`isDaemon()`线程以确定该线程是否已被标记为守护进程。

eclipse 调试器只是读取这个标志。*

# javascript - 如何使用 RegExp 修改此字符串

> ID：15711475
> 
> 赞同：0
> 
> 时间：2013-03-29T21:11:36.980
> 
> 标签：javascript, regex, string

我有这个字符串：

```
str = "<table><tr><td>!img! images/image1.jpeg !*img!</td><td> 12:34</td></tr><tr><td>!img! images/image2.jpeg !*img!</td><td>12:35</td><tr></table>; 
```

我需要`!img! text.... !*img!`用`<img src="text...." />`

我对 RegExp 不是很好，我尝试了很多东西，但都没有奏效，我能想到的最好的方法是：

```
str.replace(/(!img!)(.+)(!\*img!)/g,  '<img src="$2" />'); 
```

然而，上面代码的问题是它选择了第一次`!img!`出现和最后一次`!*img!`出现，而忽略了它们之间的所有内容！

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:14:51.577

正则表达式默认是贪婪的，它`.+`会匹配尽可能多的文本。尝试添加 ? 在它之后，你的正则表达式是`/(!img!)(.+?)(!\*img!)/`.

问号会给出加号“惰性”行为，因此它会尝试匹配尽可能少的文本。

# c# - 未正确关闭 Odbc 连接

> ID：15711478
> 
> 赞同：0
> 
> 时间：2013-03-29T21:11:45.767
> 
> 标签：c#, odbc, dbase

我有一个简单的测试 Windows 窗体应用程序。我第一次在 VS 中运行它一切正常。如果我立即再次运行它，它会在 adapter.fill(ds); 处引发关于读取受保护内存的异常；线。如果我等待 5 分钟左右，应用程序会再次运行。我想从 stackoverflow 社区获得一些关于我被愚弄的建议。我猜这是一些连接超时。代码如下：

C＃

```
 public void Button1_Click(object sender, EventArgs e)
    {
        string connectionString = @"Driver={Microsoft dBASE Driver (*.dbf)};DriverID=277;Dbq=x:\CMSBak\ISP;";

        var conn = new OdbcConnection(connectionString);

        conn.Open(); // Open the connection

        string strQuery = "SELECT * FROM ISPINMAS";

        var adapter = new OdbcDataAdapter(strQuery, conn);

        var ds = new DataSet();

        try
        {
            adapter.Fill(ds);
        }
        catch (Exception)
        {
            conn.Close();
            throw;
        }

        DataTable dt = ds.Tables[0];

        dataGridView1.DataSource = dt.DefaultView;

        conn.Close(); // That's it, now close the connection
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T21:17:41.283

像往常一样，`OdbcConnection`当您不再需要一次性对象 ( ) 时，应将其丢弃。
在这种情况下[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)将非常有用

```
 DataSet ds = new DataSet();
    using(OdbcConnection conn = new OdbcConnection(connectionString))
    {
        conn.Open(); // Open the connection
        string strQuery = "SELECT * FROM ISPINMAS";
        var adapter = new OdbcDataAdapter(strQuery, conn);
        adapter.Fill(ds);
    }
    // At this point the connection is closed and dispose has been called to 
    // free the resources used by the connection
    DataTable dt = ds.Tables[0];
    dataGridView1.DataSource = dt.DefaultView;
    // No need to close the connection here 
```

Also note that I have removed from your code the try/catch because you are not trying to handle anything there. You have just closed the connection, but the using statement will ensure that also in case of exceptions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:01:41.303

I found a work around. Use OledB instead and the Microsoft.Jet.OLEDB.4.0 Provider. No more file lock worries.

```
 string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=X:\CMSBak\ISP;Extended Properties=dBASE IV;User ID=Admin;Password=;";
    DataSet ds = new DataSet();
    using(OleDbConnection conn = new OleDbConnection(connectionString))
    {
        conn.Open(); // Open the connection
        string strQuery = "SELECT * FROM ISPINMAS";
        var adapter = new OleDbDataAdapter(strQuery, conn);
        adapter.Fill(ds);
    }
    // At this point the connection is closed and dispose has been called to 
    // free the resources used by the connection
    DataTable dt = ds.Tables[0];
    dataGridView1.DataSource = dt.DefaultView;
    // No need to close the connection here 
```

# jquery - jquery UI 对话框：第一次打开时加载 ajax 数据 - OOP

> ID：15711481
> 
> 赞同：0
> 
> 时间：2013-03-29T21:12:08.037
> 
> 标签：jquery, jquery-ui, dialog

我想实现一个 jquery UI 对话框，使 ajax 在第一次显示操作期间调用数据（每次调用 ajax 都是无用的）。到目前为止，我可以显示标准模式（就像在[jqueryui docs](http://jqueryui.com/dialog/#modal-confirmation)中一样）。我可以声明一个全局布尔变量来说明数据是否已通过 ajax 加载，但是拥有 10 多个这样的变量并不是一个好的架构方法。是否可以使用 js/jquery 使其更像 OOP？我的意思是 - 创建一个管理整个对话框存在的对象，就像在 Qt、swing 等中一样？

如果可能的话，谁能给我一个关于如何做到这一点的提示？

# java - 在 jar 文件中加载属性文件

> ID：15711482
> 
> 赞同：0
> 
> 时间：2013-03-29T21:12:09.913
> 
> 标签：java

我正在尝试使用需要附加到 jar 的属性文件的 java 程序。因此，我确实 jar 程序，并解压缩它以附加属性文件。我有一个类 MyClass，它需要属性文件。因此，我基本上将属性文件放在与 MyClass.class 相同的文件夹中。然后我把它震了回去。

在我的 MyClass.java 中，我试图通过以下方式访问属性：

```
Properties prop = new Properties();
prop.load(MyClass.class.getClassLoader().getResourceAsStream("prop.properties")); 
```

其中 prop.properties 与我的 MyClass.class 位于同一文件夹中。

它无法加载它。任何帮助将不胜感激 ！

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:17:16.827

`ClassLoader.getResourceAsStream()`将路径视为相对于类路径的根目录，即它在类加载器上的每个 JAR 或目录的根级别查找资源。

您可能想要`Class.getResourceAsStream`，它将路径视为相对于相关类的包。您还需要确保在阅读后关闭流。

```
Properties prop = new Properties();
InputStream in = MyClass.class.getResourceAsStream("prop.properties");
try {
  prop.load(in);
} finally {
  in.close();
} 
```

如果`MyClass`在包中，`com.example`则将`com/example/prop.properties`从 JAR 加载。

# tcl - 包含 [digits] 的 tcl 字符串

> ID：15711483
> 
> 赞同：0
> 
> 时间：2013-03-29T21:12:13.353
> 
> 标签：tcl

我有一个包含 [一些数字] 示例的变量：

```
set parse_var "Interface {} {} [1] [] 
FastEther0/1} {} {} {} {} {} {} {} {} {} {} {} 
unassigned {} {} {} {} {} YES unset {} administratively down down" 
```

当我确实`$parse_var`因为`[1]`.

> 执行“1”时命令名称“1”无效

我如何处理这个令牌，我需要`parse_var`在 puts 语句之后拆分

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:22:49.617

该错误不会发生在 上`puts`，它会发生在 上`set`。双引号字符串执行插值，因此它试图`[1]`立即运行。

如果大括号在你的字符串中是平衡的，你可以用大括号替换引号，但不幸的是你在 . 之后有一个不平衡的右大括号`FastEther0/1`。因此，您可能只想用 s 转义`[`s `\`，如下所示：

```
set parse_var "Interface {} {} \[1] \[]
FastEther0/1} {} {} {} {} {} {} {} {} {} {} {}
unassigned {} {} {} {} {} YES unset {} administratively down down" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:33:11.240

方括号在 Tcl 中具有特殊含义：它调用命令，在这种情况下命令名称为`1`，并返回用该命令的输出替换 [...]。它被称为命令替换。为避免这种情况，您可以：

1.  使用大括号 { ... } 而不是引号“ ...”
2.  或者，逃避，见凯文巴拉德的解决方案

如果你想使用大括号：

```
set parse_var {Interface {} {} [1] [] 
FastEther0/1} {} {} {} {} {} {} {} {} {} {} {} 
unassigned {} {} {} {} {} YES unset {} administratively down down} 
```

# jquery - 如何根据动态生成的 div 元素 id 计算大小

> ID：15711487
> 
> 赞同：-2
> 
> 时间：2013-03-29T21:12:27.680
> 
> 标签：jquery

我想知道我有动态生成的具有唯一 id 的 div 元素我想从下拉更改中添加文本框初始化 .. 那么我如何计算这里已经存在多少输入元素...请告诉我 size() 上的代码..

```
 $(Idvalue).bind('change',function () {

       var index1 = $this((".child input")).size();
            var requested = $((this[this.selectedIndex]).val(), 5);

            if (requested > index1) {
                for (i = index1; i < requested; i++) {
                    var $ctrl = $('<input/>').attr({ type: 'text', name: 'text', value: '' });
                    $("#chileage_" + forage).append($ctrl);
                }
            }
            else if (requested < index1) {
                var x = requested - 1;
                $("#chileage_ input:gt(" + x + ")").remove();
            }
        }); 
```

.child 是我的班级 ...bt 我想计算 id 值的大小请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:19:21.663

在 jQuery 中查找元素的宽度/高度的最简单方法是：

```
var height = $('#element_id').height(),
    width = $('#element_id').width(); 
```

如果您想更深入地挖掘，您还可以查询`padding`, `margin`,`border-width`等。

# python - 以 SSH 将终端连接到远程服务器结尾的 Python 脚本

> ID：15711497
> 
> 赞同：0
> 
> 时间：2013-03-29T21:13:19.980
> 
> 标签：python, ssh

我正在编写一个 python 脚本，我想通过将终端 SSH 连接到远程机器来结束。我读过有关子流程的信息，但我认为这些都不合适。然后我希望用户与终端交互，就好像他们已经`ssh user@server.path`在终端中输入了一样。

我只关心它在 Ubuntu 下运行。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:19:39.570

```
>>> import os
>>> os.execlp('ssh', 'ssh', 'user@server') 
```

或者

```
import subprocess
proc = subprocess.Popen(['ssh', 'user@server'])
result = proc.wait()
print result 
```

# c++ - 字符串的 '\n' 太多了

> ID：15711498
> 
> 赞同：1
> 
> 时间：2013-03-29T21:13:28.647
> 
> 标签：c++

我创建了一个名为*FileReader*的类。这是我在这个类的阅读功能中。它打开一个文件并读取它。当然，它将文件的内容放在我班级的一个名为“内容”的变量中。它在最后一行。

```
std::string file_content;
std::string temp;
std::ifstream file;

file.open(filepath,std::ios_base::in);

while(!file.eof()){

    temp.clear();
    getline(file, temp);

    file_content += temp;
    file_content += '\n';
}

file_content = file_content.substr(0, file_content.length()-1); //Removes the last new line

file.close();

content = file_content; 
```

我打开的文件有以下内容：

“你好\n怎么了\n酷”。

当然，我没有在我的文本文件中准确地写 \n。但正如你所看到的，最后没有新行。

我的问题是，每当我将“内容”打印到屏幕上时，最后都会有一个新行。但我删除了最后一个新行......怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:17:40.253

经典错误，`eof`在阅读之前而不是之后使用。这是对的

```
while (getline(file, temp))
{
    file_content += temp;
    file_content += '\n';
} 
```

或者如果您必须使用`eof`，请记住在**之后** `getline`而不是之前使用它。

```
for (;;)
{
    getline(file, temp);
    if (file.eof()) // eof after getline
        break;
    file_content += temp;
    file_content += '\n';
} 
```

It's incredible how many people think that `eof` can predict whether the next read will have an eof problem. But it doesn't, it tells you that the last read had an eof problem. It's been like this throughout the entire history of C and C++ but it's obviously counter-intuitive because many, many people make this mistake.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T21:17:31.033

`eof`直到您尝试读取文件**末尾**之后才会设置。您的循环为三行迭代四次；但是，最后一次迭代没有读取任何数据。

更正确的方法是将您的 while 循环更改为`while (std::getline(file, temp))`; 这将在第三次读取后到达文件末尾时终止循环。

# android - 使用地理编码器和 android Google Maps API v2 获取纬度和经度

> ID：15711499
> 
> 赞同：23
> 
> 时间：2013-03-29T21:13:31.683
> 
> 标签：android, google-maps, maps, android-maps-v2

我正在使用适用于 android 的 Google Maps API v2 并且可以正常工作。但是，我正在尝试使用地理编码器来获取地址的经度和纬度，但没有成功。

它改变了从 v2 开始的方式？

我正在使用常规代码

```
Geocoder gc = new Geocoder(context);
//...
  List<Address> list = gc.getFromLocationName("1600 Amphitheatre Parkway, Mountain View, CA", 1);

  Address address = list.get(0);

  double lat = address.getLatitude();
  double lng = address.getLongitude();
//... 
```

总是返回一个强制关闭，而 Log 什么也解决不了。使用 try/catch 块时，打开地图但始终使用相同的位置 使用 Internet 权限，我已将 COARSE_LOCATION 包含在项目中 我已经使用了位于此处和其他站点上的各种代码，但没有成功。

先感谢您。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-01T16:43:31.290

使用此示例 url 尝试此解决方案：

> [http://maps.google.com/maps/api/geocode/json?address=mumbai&sensor=false](http://maps.google.com/maps/api/geocode/json?address=mumbai&sensor=false)

它以of的`json`格式返回数据。`lat/lng``address`

```
private class DataLongOperationAsynchTask extends AsyncTask<String, Void, String[]> {
   ProgressDialog dialog = new ProgressDialog(MainActivity.this);
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        dialog.setMessage("Please wait...");
        dialog.setCanceledOnTouchOutside(false);
        dialog.show();
    }

    @Override
    protected String[] doInBackground(String... params) {
        String response;
        try {
            response = getLatLongByURL("http://maps.google.com/maps/api/geocode/json?address=mumbai&sensor=false");
            Log.d("response",""+response);
            return new String[]{response};
        } catch (Exception e) {
            return new String[]{"error"};
        }
    }

    @Override
    protected void onPostExecute(String... result) {
        try {
            JSONObject jsonObject = new JSONObject(result[0]);

            double lng = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location")
                    .getDouble("lng");

            double lat = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location")
                    .getDouble("lat");

            Log.d("latitude", "" + lat);
            Log.d("longitude", "" + lng);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
    }
}

public String getLatLongByURL(String requestURL) {
    URL url;
    String response = "";
    try {
        url = new URL(requestURL);

        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setReadTimeout(15000);
        conn.setConnectTimeout(15000);
        conn.setRequestMethod("GET");
        conn.setDoInput(true);
        conn.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");
        conn.setDoOutput(true);
        int responseCode = conn.getResponseCode();

        if (responseCode == HttpsURLConnection.HTTP_OK) {
            String line;
            BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            while ((line = br.readLine()) != null) {
                response += line;
            }
        } else {
            response = "";
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    return response;
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-30T04:40:53.840

试试这个。

```
private void getLatLongFromAddress(String address)
{
    double lat= 0.0, lng= 0.0;

    Geocoder geoCoder = new Geocoder(this, Locale.getDefault());    
    try 
    {
        List<Address> addresses = geoCoder.getFromLocationName(address , 1);
        if (addresses.size() > 0) 
        {            
            GeoPoint p = new GeoPoint(
                    (int) (addresses.get(0).getLatitude() * 1E6), 
                    (int) (addresses.get(0).getLongitude() * 1E6));

            lat=p.getLatitudeE6()/1E6;
            lng=p.getLongitudeE6()/1E6;

            Log.d("Latitude", ""+lat);
            Log.d("Longitude", ""+lng);
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T09:00:22.840

由于 HttpClient 已被贬值，您可以使用 Asynctask 尝试以下代码（另请注意，我们需要将地址编码为 URL）：

```
public class GeoCoding extends AsyncTask<Void, Void, Void> {
    private String address;
    private static final String TAG = GeoCoding.class.getSimpleName();
    JSONObject jsonObj;
    String URL;
    private String Address1 = "", Address2 = "", City = "", State = "", Country = "", County = "", PIN = "", Area="";
    private  double latitude, longitude;
    HttpURLConnection connection;
    BufferedReader br;
    StringBuilder sb ;

    public GeoCoding(String address){
        this.address = address;
    }

    public String getArea(){
        return Area;
    }

    public void getAddress() {
        Address1 = "";
        Address2 = "";
        City = "";
        State = "";
        Country = "";
        County = "";
        PIN = "";
        Area ="";

        try {

            String Status = jsonObj.getString("status");
            if (Status.equalsIgnoreCase("OK")) {
                JSONArray Results = jsonObj.getJSONArray("results");
                JSONObject zero = Results.getJSONObject(0);
                JSONArray address_components = zero.getJSONArray("address_components");

                for (int i = 0; i < address_components.length(); i++) {
                    JSONObject zero2 = address_components.getJSONObject(i);
                    String long_name = zero2.getString("long_name");
                    JSONArray mtypes = zero2.getJSONArray("types");
                    String Type = mtypes.getString(0);

                    if (! TextUtils.isEmpty(long_name) || !long_name.equals(null) || long_name.length() > 0 || !long_name.equals("")) {
                        if (Type.equalsIgnoreCase("street_number")) {
                            Address1 = long_name + " ";
                        } else if (Type.equalsIgnoreCase("route")) {
                            Address1 = Address1 + long_name;
                        } else if (Type.equalsIgnoreCase("sublocality")) {
                            Address2 = long_name;
                        } else if (Type.equalsIgnoreCase("locality")) {
                            City = long_name;
                        } else if (Type.equalsIgnoreCase("administrative_area_level_2")) {
                            County = long_name;
                        } else if (Type.equalsIgnoreCase("administrative_area_level_1")) {
                            State = long_name;
                        } else if (Type.equalsIgnoreCase("country")) {
                            Country = long_name;
                        } else if (Type.equalsIgnoreCase("postal_code")) {
                            PIN = long_name;
                        }else if( Type.equalsIgnoreCase("neighborhood")){
                            Area = long_name;
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public void getGeoPoint(){
        try{
             longitude = ((JSONArray)jsonObj.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location")
                    .getDouble("lng");
            latitude = ((JSONArray)jsonObj.get("results")).getJSONObject(0)
                    .getJSONObject("geometry").getJSONObject("location")
                    .getDouble("lat");

        }catch (Exception e){
            e.printStackTrace();
        }

    }

    @Override
    protected Void doInBackground(Void... params)  {
        try {
            StringBuilder urlStringBuilder = new StringBuilder("http://maps.google.com/maps/api/geocode/json");
            urlStringBuilder.append("?address=" + URLEncoder.encode(address, "utf8"));
            urlStringBuilder.append("&sensor=false");
            URL = urlStringBuilder.toString();
            Log.d(TAG, "URL: " + URL);

            URL url = new URL(URL);
            connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("GET");
            connection.setDoInput(true);
            connection.connect();
            br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            sb = new StringBuilder();
            String line;
            while ((line = br.readLine()) != null) {
                sb = sb.append(line + "\n");
            }
        }catch (Exception e){e.printStackTrace(); }
        return null;
    }

    @Override
    protected void onPostExecute(Void aVoid) {
        try {
            Log.d(TAG, "response code: " + connection.getResponseCode());
            jsonObj = new JSONObject(sb.toString());
            Log.d(TAG, "JSON obj: " + jsonObj);
            getAddress();
            Log.d(TAG, "area is: " + getArea());
            getGeoPoint();
            Log.d("latitude", "" + latitude);
            Log.d("longitude", "" + longitude);

            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        super.onPostExecute(aVoid);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-01T11:03:58.287

对我有用的一个简单的纠正方法是在设备上启用互联网连接。[Pxaml](https://stackoverflow.com/users/8765409/pxaml)的建议。

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2013-06-08T12:38:01.670

您可以通过这个简单的代码获取当前位置的纬度和经度

```
GPS_Location mGPS = new GPS_Location(MyApplication.getAppContext());

    if (mGPS.canGetLocation) {

        mLat = mGPS.getLatitude();
        mLong = mGPS.getLongitude();

    } else {
        System.out.println("cannot find");
    } 
```

您必须为您的应用添加 GPS 和其他权限

# c# - C# 反射：获取类和基类的所有成员的信息

> ID：15711500
> 
> 赞同：4
> 
> 时间：2013-03-29T21:13:36.340
> 
> 标签：c#, reflection

当我运行以下代码时，它只返回一个`MethodInfo`/ `FieldInfo`/etc。它直接属于`Type`我正在搜索信息对象的那个。如何找到信息对象，而不管它驻留在基类中并且可能是私有的？

```
obj.GetType().GetMethod(methodName, bindingFlags); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:22:13.687

好吧，你回答了你自己的问题，但据我了解，你的主要要求是`How do I find the info object regardless of where it is found in the hierarchy?`

您不需要在这里递归来获取完整层次结构中的所有成员。您可以`GetMembers`在 a 上使用函数，`Type`它将返回所有成员，包括所有基类。

下一个代码示例演示了这一点：

```
var names = 
    typeof(MyClass).GetMembers()
                   .Select (x => x.Name);

Console.WriteLine (string.Join(Environment.NewLine, names)); 
```

对于这样的结构

```
class MyClass : Base
{
    public string Name { get; set; }
    public string Surname { get; set; }
}

class Base
{
    public string Name { get; set; }
} 
```

返回

```
get_Name
set_Name
get_Surname
set_Surname
get_Name
set_Name
ToString
Equals
GetHashCode
GetType
.ctor
Name
Surname 
```

请注意，`get_Name`自动属性的访问器出现两次，因为`MyClass`隐藏`Name`了基类的属性。另请注意`ToString`，`GetType`和其他方法，在`object`类中定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:13:36.340

如果在子类中找不到 info 对象，以下代码将查看对象的每个基类。请注意，虽然它会返回基类信息对象，但它会返回它“首先遇到”的对象，因此如果您有一个`_blah`在子类中调用的变量和一个`_blah`在基类中调用的变量，那么`_blah`来自子类课程将被退回。

```
public static MethodInfo GetMethodInfo(this Type objType, string methodName, BindingFlags flags, bool isFirstTypeChecked = true)
{
    MethodInfo methodInfo = objType.GetMethod(methodName, flags);
    if (methodInfo == null && objType.BaseType != null)
    {
        methodInfo = objType.BaseType.GetMethodInfo(methodName, flags, false);
    }
    if (methodInfo == null && isFirstTypeChecked)
    {
        throw new MissingMethodException(String.Format("Method {0}.{1} could not be found with the following BindingFlags: {2}", objType.ReflectedType.FullName, methodName, flags.ToString()));
    }
    return methodInfo;
}

public static FieldInfo GetFieldInfo(this Type objType, string fieldName, BindingFlags flags, bool isFirstTypeChecked = true)
{
    FieldInfo fieldInfo = objType.GetField(fieldName, flags);
    if (fieldInfo == null && objType.BaseType != null)
    {
        fieldInfo = objType.BaseType.GetFieldInfo(fieldName, flags, false);
    }
    if (fieldInfo == null && isFirstTypeChecked)
    {
        throw new MissingFieldException(String.Format("Field {0}.{1} could not be found with the following BindingFlags: {2}", objType.ReflectedType.FullName, fieldName, flags.ToString()));
    }
    return fieldInfo;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-03T16:39:45.153

我改变了 bsara 的实现，以便能够找到私有成员。

我这样使用它：

```
public static void Save(string filename, object obj)
{
    try
    {
        using Stream s = new FileStream(filename, FileMode.Create, FileAccess.Write, FileShare.None);
        var b = new BinaryFormatter();
        b.Serialize(s, obj);
    }
    catch(SerializationException e)
    {
        var type= e.Message.Split("in Assembly")[0].Replace("Type", string.Empty).Replace("'", string.Empty).Trim();
        var assembly=e.Message.Split("in Assembly")[1].Split("'")[1];
        var atype= Type.GetType(type);

        string path = FindObject(new Stack<object>(new object[] { obj }), atype, "[myself]");

        throw new SerializationException($"Could not serialize path {path} in {obj.GetType().Name} due to not being able to process {type} from {assembly}. see inner exception for details", e);
    }            
} 
```

有小更新的方法：

```
private static bool TrySerialize(object obj)
{
    if(obj == null)
        return true;
    var stream = new MemoryStream();
    var bf = new BinaryFormatter();
    try
    {
        bf.Serialize(stream, obj);
    }
    catch(SerializationException)
    {
        return false;
    }
    return true;
}
private static string FindObject(Stack<object> self, Type typeToFind, string path)
{
    var _self = self.Peek();
    if(self.Where(x => x.Equals(_self)).Count() > 1) return null;
    foreach(var prop in _self.GetType().GetMembers(BindingFlags.Public | BindingFlags.Instance | BindingFlags.NonPublic).Where(x => !x.GetCustomAttributes(true).Any(y => y is XmlIgnoreAttribute)))
    {
        switch(prop.MemberType)
        {
            case System.Reflection.MemberTypes.Property:
                {
                    var line = string.Format("{0}::{1}", path, prop.Name);
                    var _prop = prop as PropertyInfo;

                    if(_prop.GetIndexParameters().Count() > 0) break;

                    if(typeToFind.IsAssignableFrom(_prop.PropertyType))
                        return line;

                    if(_prop.PropertyType.IsPrimitive || _prop.PropertyType == typeof(DateTime) || _prop.PropertyType == typeof(string))
                        continue;

                    var subInst = _prop.GetValue(_self, new object[0]);
                    if(subInst == null)
                        continue;

                    if(!TrySerialize(subInst))
                    {
                        System.Diagnostics.Debugger.Log(0, "", string.Format("Cannot serialize {0}\n", line));
                    }

                    self.Push(subInst);
                    var result = FindObject(self, typeToFind, line);
                    self.Pop();
                    if(result != null)
                        return result;
                }
                break;
            case System.Reflection.MemberTypes.Field:
                {
                    var line = string.Format("{0}::*{1}", path, prop.Name);
                    var _prop = prop as FieldInfo;

                    if(typeToFind.IsAssignableFrom(_prop.FieldType))
                        return line;

                    if(_prop.FieldType.IsPrimitive || _prop.FieldType == typeof(DateTime) || _prop.FieldType == typeof(string))
                        continue;

                    var subInst = _prop.GetValue(_self);
                    if(subInst == null)
                        continue;

                    if(!TrySerialize(subInst))
                    {
                        System.Diagnostics.Debugger.Log(0, "", string.Format("Cannot serialize field {0}\n", line));
                    }

                    self.Push(subInst);
                    var result = FindObject(self, typeToFind, line);
                    self.Pop();
                    if(result != null)
                        return result;
                }
                break;

            case System.Reflection.MemberTypes.Event:
                {
                    var line = string.Format("{0}::!{1}", path, prop.Name);
                    var _prop = prop as EventInfo;

                    if(typeToFind.IsAssignableFrom(_prop.EventHandlerType))
                        return line;

                    var field =  _self.GetType().GetField(_prop.Name,
                BindingFlags.NonPublic |BindingFlags.Instance |BindingFlags.GetField);

                    if(field != null && !field.GetCustomAttributes(true).Any(x => x is NonSerializedAttribute)  && !TrySerialize(field.GetValue(_self)))
                    {
                        System.Diagnostics.Debugger.Log(0, "", string.Format("Cannot serialize event {0}\n", line));
                    }

                }
                break;

            case System.Reflection.MemberTypes.Custom:
                {

                }
                break;
            default: break;
        }

    }
    if(_self is IEnumerable)
    {
        var list = (_self as IEnumerable).Cast<object>();
        var index = 0;
        foreach(var item in list)
        {
            index++;
            self.Push(item);
            var result = FindObject(self, typeToFind, string.Format("{0}[{1}]", path, index));
            self.Pop();
            if(result != null)
                return result;
        }
    }

    return null;
} 
```

# android - 在 Android 运行时更改自定义视图的大小

> ID：15711504
> 
> 赞同：2
> 
> 时间：2013-03-29T21:13:43.780
> 
> 标签：android, android-layout, android-ui, android-custom-view

我正在更改`height`和`width`我的在运行时`CustomView`扩展Android `View`，如下所示：

```
 @Override
        public void onGlobalLayout() {          
            if(!initialized) {          
                int containerHeight = instance.getHeight();
                int containerWidth = instance.getWidth();
                myView.getLayoutParams().height = (int) (containerHeight * HEIGHT_RATIO);
                myView.getLayoutParams().width = (int) (containerWidth * WIDTH_RATIO);
                instance.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                initialized = true;
            }
        } 
```

此代码在`container view`构造函数中。

另外我`CustomView` `onMeasure()`的如下：

```
 @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // maximum width we should use
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = MeasureSpec.getSize(heightMeasureSpec);
        setMeasuredDimension(width, height);
    } 
```

这是结果：

![在此处输入图像描述](../Images/d4df4fec47720e2838ecc03b53360f39.png)

`width`和我指定`height`的位置与绿色矩形的大小相同。

**我的问题是：**为什么我的自定义视图（红色矩形）的实际大小与我在`LayoutParams`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:37:06.900

不确定您正在为您的视图使用什么对象，但您可以尝试这样的事情：

CustomViewget.Window().setLayout(370, 480); //控制宽度和高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T07:11:42.053

我的问题出在图纸上`CustomView`。在`onDraw()`中，我用`width`and`height`代替`canvas`了`View`本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-07T18:12:28.303

调用时可能无法正确计算大小，因此您可能需要将代码放在处理程序中并在发布时运行它，以便在 UI 线程上的所有其他操作完成后完成。试试下面的代码。

```
Handler handler = new Handler();
handler.post(new Runnable() {
    public void run() {
    //check sizes and update sizes here
    }); 
```

# javascript - Detect if string contains javascript tags using jQuery/JavaScript

> ID：15711506
> 
> 赞同：2
> 
> 时间：2013-03-29T21:13:49.887
> 
> 标签：javascript, jquery, regex, pattern-matching

I am trying to create a very simplistic XSS detection system for a system I am currently developing. The system as it stands, allows users to submit posts with javascript embedded within the message. Here is what I currently have:-

`var checkFor = "<script>";`
`alert(checkFor.indexOf("<script>") !== -1);`

This doesn't really work that well at all. I need to write code that incorporates an array which contains the terms I am searching for `[e.g - "<script>","</script>","alert("]`

Any suggestions as to how this could be achieved using JavaScript/jQuery.

Thanks for checking this out. Many thanks :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:33:03.733

Replacing characters is a very fragile way to avoid XSS. (There are dozens of ways to get `<` in without typing the character -- like `&#60;` Instead, HTML-encode your data. I use these functions:

```
var encode = function (data) {
    var result = data;
    if (data) {
        result = $("<div />").html(data).text();
    }
};
var decode = function (data) {
    var result = data;
    if (data) {
        result = $("<div />").text(data).html();
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:29:10.463

As Explosion Pills said, if you're looking for cross–site exploits, you're probably best to either find one that's already been written or someone who can write one for you.

Anyway, to answer the question, regular expressions are not appropriate for parsing markup. If you have an HTML parser (client side is easy, server a little more difficult) you could insert the text as the innerHTML of an new element, then see if there are any child elements:

```
function mightBeMarkup(s) {
  var d = document.createElement('div');
  d.innerHTML = s;
  return !!(d.getElementsByTagName('*').length);
} 
```

Of course there still might be markup in the text, just that it's invalid so doesn't create elements. But combined with some other text, it might be valid markup.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T21:28:07.533

The most effective way to prevent xss attacks is by replacing all <, > and & characters with `&lt;`, `&gt;`, and `&amp;`.

There is a javascript library from OWASP. I haven't worked with it yet so can't tell you anything about the quality. Here is the link: [https://www.owasp.org/index.php/ESAPI_JavaScript_Readme](https://www.owasp.org/index.php/ESAPI_JavaScript_Readme)

# openoffice.org - OpenOffice Draw 宏查找替换文本

> ID：15711509
> 
> 赞同：0
> 
> 时间：2013-03-29T21:13:58.293
> 
> 标签：openoffice.org, openoffice-basic

我希望使用 Draw 在多个 PDF 文档中查找替换文本。到目前为止，我已经设法打开 PDF

```
mydoc.createReplaceDescription 
```

似乎不是 Draw 文档上的有效属性/方法。尽管奇怪的是，这在许多 writer 和 calc 示例中都使用了。

有没有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:38:46.910

好的，在 Writer 中使用了一些记录器后，我设法录制了一个宏，该宏似乎比我之前尝试的 createReplaceDiscription 更通用。它有很多麻烦，我想可以清理一下，但它确实有效......

```
REM  *****  BASIC  *****

Sub Main

End Sub

sub WriterFindReplace
rem ----------------------------------------------------------------------
rem define variables
dim document   as object
dim dispatcher as object
rem ----------------------------------------------------------------------
rem get access to the document
document   = ThisComponent.CurrentController.Frame
dispatcher = createUnoService("com.sun.star.frame.DispatchHelper")

rem ----------------------------------------------------------------------
dim args1(18) as new com.sun.star.beans.PropertyValue
args1(0).Name = "SearchItem.StyleFamily"
args1(0).Value = 2
args1(1).Name = "SearchItem.CellType"
args1(1).Value = 0
args1(2).Name = "SearchItem.RowDirection"
args1(2).Value = true
args1(3).Name = "SearchItem.AllTables"
args1(3).Value = false
args1(4).Name = "SearchItem.Backward"
args1(4).Value = false
args1(5).Name = "SearchItem.Pattern"
args1(5).Value = false
args1(6).Name = "SearchItem.Content"
args1(6).Value = false
args1(7).Name = "SearchItem.AsianOptions"
args1(7).Value = false
args1(8).Name = "SearchItem.AlgorithmType"
args1(8).Value = 0
args1(9).Name = "SearchItem.SearchFlags"
args1(9).Value = 65536
args1(10).Name = "SearchItem.SearchString"
args1(10).Value = "<<THE WORD YOUR FINDING>>"
args1(11).Name = "SearchItem.ReplaceString"
args1(11).Value = "<< THE WORD YOUR USING TO REPLACE>>"
args1(12).Name = "SearchItem.Locale"
args1(12).Value = 255
args1(13).Name = "SearchItem.ChangedChars"
args1(13).Value = 2
args1(14).Name = "SearchItem.DeletedChars"
args1(14).Value = 2
args1(15).Name = "SearchItem.InsertedChars"
args1(15).Value = 2
args1(16).Name = "SearchItem.TransliterateFlags"
args1(16).Value = 1280
args1(17).Name = "SearchItem.Command"
args1(17).Value = 3
args1(18).Name = "Quiet"
args1(18).Value = true

dispatcher.executeDispatch(document, ".uno:ExecuteSearch", "", 0, args1())

end sub 
```

# ssl - 我应该在 SSL 证书请求的通用名称中包含“www”吗？

> ID：15711511
> 
> 赞同：7
> 
> 时间：2013-03-29T21:14:01.593
> 
> 标签：ssl

我即将为一个小型网站购买 SSL 证书。为通用名称输入“www.domainName.com”或“domainName.com”是最佳做法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T21:38:09.103

确保使用该`subjectAltName`字段，并包含您要使用的主机名的所有变体，或者如果您不确定所有变体将是什么，则使用通配符。公用名 (CN) 仅用作备份。有关详细信息，请参阅[RFC 2818 ：](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)

> ###3.1。服务器身份
> 
> 通常，HTTP/TLS 请求是通过取消引用 URI 生成的。因此，客户端知道服务器的主机名。如果主机名可用，客户端必须根据服务器证书消息中显示的服务器身份检查它，以防止中间人攻击。
> 
> 如果客户端有关于服务器预期身份的外部信息，则可以省略主机名检查。（例如，客户端可能连接到一台机器，其地址和主机名是动态的，但客户端知道服务器将提供的证书。）在这种情况下，尽可能缩小可接受证书的范围很重要为了防止中间人攻击。在特殊情况下，客户端简单地忽略服务器的身份可能是合适的，但必须理解这会使连接对主动攻击开放。
> 
> 如果存在 dNSName 类型的 subjectAltName 扩展，则必须将其用作身份。否则，必须使用证书主题字段中的（最具体的）通用名称字段。尽管使用通用名称是现有的做法，但它已被弃用，并且鼓励证书颁发机构使用 dNSName 代替。
> 
> 使用 [RFC2459] 指定的匹配规则执行匹配。如果证书中存在多个给定类型的身份（例如，多个 dNSName 名称，则认为可以接受任何一个集合中的匹配。）名称可能包含通配符 *，该通配符被认为匹配任何单个域名组件或组件片段。例如，`*.a.com`匹配`foo.a.com`但不匹配`bar.foo.a.com`。`f*.com`匹配`foo.com`但不匹配`bar.com`。
> 
> In some cases, the URI is specified as an IP address rather than a hostname. In this case, the iPAddress subjectAltName must be present in the certificate and must exactly match the IP in the URI.
> 
> If the hostname does not match the identity in the certificate, user oriented clients MUST either notify the user (clients MAY give the user the opportunity to continue with the connection in any case) or terminate the connection with a bad certificate error. Automated clients MUST log the error to an appropriate audit log (if available) and SHOULD terminate the connection (with a bad certificate error). Automated clients MAY provide a configuration setting that disables this check, but MUST provide a setting which enables it.
> 
> Note that in many cases the URI itself comes from an untrusted source. The above-described check provides no protection against attacks where this source is compromised. For example, if the URI was obtained by clicking on an HTML page which was itself obtained without using HTTP/TLS, a man in the middle could have replaced the URI. In order to prevent this form of attack, users should carefully examine the certificate presented by the server to determine if it meets their expectations.

# mongodb - 选择具有自定义随机概率分布的 MongoDB 文档

> ID：15711512
> 
> 赞同：1
> 
> 时间：2013-03-29T21:14:02.327
> 
> 标签：mongodb

我有一个看起来像这样的集合：

```
[
  {
    "id": 1,
    "tier": 0
  },
  {
    "id": 2,
    "tier": 1
  },
  {
    "id": 3
    "tier": 2
  },
  {
    "id": 4,
    "tier": 0
  }
] 
```

有没有一种标准的方法来选择*n 个*元素，其中选择最低层元素的概率是*p*，下一个最低层是 (1- *p* )* *p*，依此类推，标准随机选择元素？

因此，例如，**如果最有可能发生的事情发生并且我使用***n* = 2 和任何*p* > .5对上述示例运行查询（我认为这将永远是正确的），那么我会回来`[{"id": 1, ...}, {"id": 4}]`；*n* = 3，则等`[{"id": 4}, {"id": 1}, {"id": 2}]`。

例如，这里有一些伪 Python 代码，给定一个像*objs*这样的字典：

```
def f(objs, p, n):
  # get eligible tiers
  tiers_set = set()
  for o in objs:
    eligible_tiers.add(o["tier"])
  tiers_list = sorted(list(tiers_set))
  # get the tier for each index of results
  tiers = []
  while len(tiers) < min(n, len(obis)):
    tiers.append(select_random_with_initial_p(eligible_tiers, p))
  # get res
  res = []
  for tier in tiers:
    res.append(select_standard_random_in_tier(objs, tier)
  return res 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-12T12:12:31.147

首先，对集合启用地理空间索引：

`db.docs.ensureIndex( { random_point: '2d' } )`

要创建一堆在 X 轴上具有随机点的文档：

```
for ( i = 0; i < 10; ++i ) {
    db.docs.insert( { key: i, random_point: [Math.random(), 0] } );
} 
```

然后你可以像这样从集合中获取一个随机文档：

```
db.docs.findOne( { random_point : { $near : [Math.random(), 0] } } ) 
```

或者您可以检索几个最接近随机点的文档：

```
db.docs.find( { random_point : { $near : [Math.random(), 0] } } ).limit( 4 ) 
```

这只需要一次查询，不需要空检查，而且代码干净、简单、灵活。您甚至可以使用地理点的 Y 轴为您的查询添加第二个随机维度。

要进行自定义随机选择，您可以更改该部分`[Math.random(), 0]`，使其最适合您的随机分布

来源：[来自 MongoDB 的随机记录](https://stackoverflow.com/questions/2824157/random-record-from-mongodb)

# operating-system - Ti.UI.Tray 的使用

> ID：15711519
> 
> 赞同：1
> 
> 时间：2013-03-29T21:14:58.227
> 
> 标签：operating-system, system-tray, tidesdk

有人可以解释一下 Ti.UI.Tray 的用途吗？我想创建一个显示更新通知的系统托盘应用程序，当用户关闭窗口时，它会进入系统托盘而不是退出，并且用户通过明确选择退出来关闭应用程序。Ti.UI.Tray 可以用来做这个吗？如果没有，有没有其他方法可以为每个 windows、osx 和 linux 平台制作一个tidesdk 系统托盘应用程序

# asp.net-mvc-4 - 从 ajax 局部视图访问主视图数据

> ID：15711520
> 
> 赞同：0
> 
> 时间：2013-03-29T21:15:05.893
> 
> 标签：asp.net-mvc-4

**情况**：假设我们有一个产品列表，每个产品都有一堆订单。我有一个我的索引视图，其中包含模型中包含的产品列表。我遍历列表并在页面上显示产品列表。我为每个项目添加了一个 jquery 点击事件，点击事件为产品列表下方的每个订单加载了部分视图。

订单部分视图如下所示：

```
@model Order
<p>@Model.orderNum</p>
@Html.DropDownListFor(Order.CustomerName,CustomerNameList)
<input type="submit"/> 
```

索引视图如下所示：

```
@model List<Products>
@foreach(Product p in @Model)
{<button class="product-button">@p.productId</button>}
<div id="orderDiv"/> 
```

然后我将为产品的每个订单执行以下 javascript：

```
$("#orderDiv").append($("<div></div>).load("MyController/Order/[order ID would go here]")); 
```

这将为产品具有的每个订单 ID 加载带有单独部分视图的订单。

**问题**：简单的解决方案是在订单模型中包含 CustomerNameList。但是，我不想多次将该数据加载到页面。有没有办法可以将它放在 ViewBag 中或将其存储在其他地方，以便整个页面都可以使用此列表？

**注意**：我不想为所有订单使用一个部分视图（即，让订单视图模型成为一个列表并在部分视图中对其进行迭代），因为我希望能够单独提交每个订单（到保存它）我还可能需要在页面的其他部分使用此客户列表。我想保持可用。例如，也许我有一个显示新订单的按钮，它使用 ajax 加载部分视图，并且该部分视图还需要客户列表。我不想多次将该数据发送到页面。

我可以这样做吗？

这只是一个不好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:23:03.150

不太清楚为什么要为现有订单加载用户下拉列表。这意味着您希望设施更改谁下的命令？

但是，如果必须，您可以将客户下拉列表加载为带有客户类的空下拉列表，然后可以进行内部调用以获取客户的 json，然后加载客户类的所有实例，使用来自您对客户数据的 json 调用的数据。

这将允许您列出 50 个订单，其中包含一个客户数据集合。

不过，就个人而言，您应该使用外键与您的模型建立关系，或者使用已经添加到您的客户列表中的视图模型，您也只希望向用户显示完整的订单详细信息，如果他们单击该行以显示完整细节。

即使有人在屏幕上发了疯，点击所有 50 来查看，您应该仍然可以轻松处理这些请求，否则同样您将无法让 50 位客户同时查看那里的篮子，或 50 位客户同时搜索产品数据库！

# java - Java 开关结构未读取“\n”

> ID：15711522
> 
> 赞同：1
> 
> 时间：2013-03-29T21:15:23.850
> 
> 标签：java, switch-statement, structure, newline, case

我正在写一个词法分析器。我有一个开关结构，这是该区域出现的代码片段。

```
 //whitespace
    case ' ':
    case '\t':
    case '\n':
        consume(); System.out.println("consumed ws");
        break;

    //identifier
    default:
        if (isLetter()) {
            consume();
            state = 8;
        } else {
            System.out.println("invalid character: " + look);
        }
        break; 
```

问题是，虽然它会正确使用空格和制表符，但它不会使用换行符，而是使用默认值。

我在其他地方与 '\n' 进行了比较，它们工作正常。例如，如果注释掉了一行，则执行以下代码：

```
 case 10:
                while(look != '\n'){
                    consume();
                }
                consume();
                state = 0;
            break; 
```

所以看起来它只是在 switch 结构中的错误，而不是 if 或 while 语句。但是，如果我在默认情况下添加一些处理换行符的内容，则将 (look == '\n') 评估为 true，即使我打印出外观，它也会在输出中创建一个新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:17:48.050

Are you using MS Windows? If yes, the end line in Windows is `\r\n`. But in Linux your program should be OK.

You should ignore `\r` character by adding another case for `\r` to do nothing!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:31:19.433

boomz answer is correct. I just had to add a under whitespace where the case is '\r'.

```
 //whitespace
    case ' ':
    case '\t':
    case '\r':
    case '\n':
        consume();
        break; 
```

Keep in mind that all consume() does is get another character, so nothing else is done here.

Thanks.

# linux - Run Ubuntu 13.04 / Linux mint 14 on Amazon EC2 with 'NX free edition for Linux' from NoMachine

> ID：15711525
> 
> 赞同：2
> 
> 时间：2013-03-29T21:15:29.800
> 
> 标签：linux, ubuntu, amazon-web-services, amazon-ec2, nomachine-nx

I have recently been trying to create a Linux workstation in the cloud which I can access from any of my personal machines/OS using NX. I found a few old [guides](http://activeintelligence.org/blog/archive/remote-graphical-linux-desktop-on-ec2/) which I was following. I used the Ubuntu 13.04 AMI - [ami-1e831d77](http://cloud-images.ubuntu.com/locator/ec2/) . However, since Ubuntu has now moved to Unity by default, I could not exactly follow these guides step by step. I managed to set up the NX server in the EC2 but then connection from NX client on my local machine to EC2 does not work (which I had expected). What changes would I have to make for this to work? Could anyone recommend me a guide of some kind.

Any help would be appreciated.

PS: I am new to deploying EC2 instances.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T13:46:07.143

what i used on 12.04 to get unity working is in the client using the option for a new virtual desktop, and the custom session "gnome-session --session=ubuntu-2d"

# jquery - 带有骨架样板的 Flexslider

> ID：15711530
> 
> 赞同：0
> 
> 时间：2013-03-29T21:16:03.747
> 
> 标签：jquery, flexslider, skeleton-css-boilerplate

我正在使用带有 Skelton 样板的 flexslider 插件。但是，我无法让滑块处理大图像。理论上，滑块应该使图像符合 .flexslider 类的大小，但它只显示图像的一部分，而不是在调整视口大小时调整图像大小以适应屏幕。

我正在使用一个非常标准的 Skeleton 框架，并且丝毫没有触及 flexslider css 或 javascript。

对应的HTML如下：

```
<div class="container">
<div class="sixteen columns">
        <h1 class="remove-bottom"> Skeleton </h1>
        <h5>Version 1.2</h5>
        <div id="divider"><hr></div>
    <div class="flexslider">
      <ul class="slides">
        <li>
            <img src="images/kitchen_adventurer_cheesecake_brownie.jpg" />
            </li>
            <li>
            <img src="images/kitchen_adventurer_lemon.jpg" />
            </li>
            <li>
            <img src="images/kitchen_adventurer_donut.jpg" />
            </li>
            <li>
            <img src="images/kitchen_adventurer_caramel.jpg" />
            </li>
      </ul>
    </div> 
```

当文档中没有调用 flexslider javascript 插件时，图像似乎符合容器 div 的大小，但是一旦它在那里，它似乎就不起作用了。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T20:51:00.300

I missed a line a very integral line of code...the jQuery library! Took care of all my problems!

# php - 跨换行符使用 preg_match_all

> ID：15711533
> 
> 赞同：3
> 
> 时间：2013-03-29T21:16:22.977
> 
> 标签：php, regex, preg-match-all

我正在尝试使用 preg_match_all 从网站上获取特定部分的出现，并且我之前已经成功地做到了这一点，但现在的不同之处在于这些部分跨越了换行符......正如我所理解的那样，我应该可以用一些修饰符来做到这一点......

因此，相关网站上的部分结构如下所示：

```
<div id="LICRabatGuideAftale">
    <something in between>
    <div class="clear"></div>
</div>

<div id="LICRabatGuideAftale">
    <something in between>
    <div class="clear"></div>
</div>

<div id="LICRabatGuideAftale">
    <something in between>
    <div class="clear"></div>
</div> 
```

因此，我正在尝试使用 LICRabatGuideAftale 获取所有事件并清除...

我试过：

```
preg_match_all ("/LICRabatGuideAftale(.*)clear/s", $link_section, $link_array); 
```

但它似乎没有将网站分成几个部分，而只是给了我数组中的 1 个条目......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:19:33.427

使用`.*?`而不是`.*`. 使`?`量词不情愿而不是贪婪，因此匹配将停在第*一个* `clear`而不是最后一个。

使用`U`其他答案中建议的修饰符也是可能的。这基本上颠倒了他们的行为，`.*`并`.*?`分别使他们不情愿和贪婪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:20:33.620

使用 U 选项使其变得不贪心：

```
preg_match_all ("`YOUR_REGEX`U", …); 
```

大多数情况下，我使用：

```
preg_match_all ("`YOUR_REGEX`Uis", …); 
```

这使得它不贪心，不区分大小写。 如果您有兴趣，
这里是 php.net 上的所有[**模式修饰符。**](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

引用自[php.net](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)：

> **U (PCRE_UNGREEDY)**
> 这个修饰符反转量词的“贪心”，使它们默认不贪心，但如果后面跟着？它与 Perl 不兼容。它也可以通过模式内的 (?U) 修饰符设置或量词后面的问号（例如 .*?）来设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T21:26:51.130

问题肯定出在 .* 与 .*？
.* 默认是贪婪的。

干得好：

```
preg_match_all ("/LICRabatGuideAftale(.*?)clear/s", $link_section, $link_array);

foreach($link_array[1] as $match) {
    // Clean up scraps
    $data = preg_replace('/">\n\s*|\n\s*<div class="/', "", $match);
    echo $data;
} 
```

输出：

```
 - <something in between>
 - <something in between>
 - <something in between> 
```

# mysql - Create a website to show data from a remote XML dataset

> ID：15711540
> 
> 赞同：0
> 
> 时间：2013-03-29T21:17:04.637
> 
> 标签：mysql, xml, dataset, remote-access

I am currently making a data visualisation website which looks at a remote source of data which is in XML.

I am confused on how to get the data from the XML dataset into a MySQL database.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:26:42.317

in order to visualize, probably you don't need to put the data into the database. probably you just need to have the data accessible on the client side (javascript). in this case, you should just call the XML data interface from javascript (with jquery, for example), and process the result

# maven - Maven 执行器未检测到 jdk 1.7

> ID：15711547
> 
> 赞同：5
> 
> 时间：2013-03-29T21:17:36.667
> 
> 标签：maven, java

我正在使用 maven enforcer 插件来强制执行 jdk 1.7（我正在使用 java.nio.file）。由于某种原因，maven enforcer 插件无法检测到 jdk 1.7。

```
λ ~/ java -version
java version "1.7.0_13"
Java(TM) SE Runtime Environment (build 1.7.0_13-b20)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)
λ ~/ javac -version
javac 1.7.0_13
λ ~/ mvn --version
Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 2013-02-19 15:51:28+0200)
Maven home: /usr/local/Cellar/maven/3.0.5/libexec
Java version: 1.7.0_13, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "mac os x", version: "10.7.5", arch: "x86_64", family: "mac" 
```

这是我在 pom.xml 中的代码 -

```
 <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-enforcer-plugin</artifactId>
      <executions>
        <execution>
          <id>enforce-versions</id>
          <goals>
            <goal>enforce</goal>
          </goals>
          <configuration>
            <rules>
              <requireJavaVersion>
                <version>1.7</version>
              </requireJavaVersion>
            </rules>
          </configuration>
        </execution>
      </executions>
    </plugin> 
```

这是我得到的错误 -

```
[INFO] --- maven-enforcer-plugin:1.2:enforce (enforce-versions) @ com.microsoft.gittf.core ---
[WARNING] Rule 0: org.apache.maven.plugins.enforcer.RequireJavaVersion failed with message:
Detected JDK Version: 1.6.0-43 is not in the allowed range 1.7. 
```

**编辑**

> mvn 执行者：显示信息

显示版本 1.7 而不是 1.6...为什么强制检测 Java 版本 1.6？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-04T04:31:21.557

添加以下内容（如果缺少，则创建此文件）`~/.mavenrc`

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/{your-jdk-here}/Contents/Home 
```

仅由 maven 获取，`.mavenrc`因此其他 Java 程序不会受到此更改的影响。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-05T02:23:56.203

版本声明是固定的。你给的是一个确切版本的java。永远记住，如果我们不确定我们应该使用的确切版本，请给出范围。将版本更改为 [1.7,)

```
 <requireJavaVersion>
            <version>[1.7,)</version>
          </requireJavaVersion> 
```

这意味着任何等于或大于 1.7 的版本都是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-09T17:22:18.823

你没有说你在什么操作系统下运行，但命令“java ....”会在路径上找到第一个名为 java（或 windows 上的 java.exe）的可执行文件，这可能是也可能不是那个您想与 Maven 一起使用。

linux 下有一个名为“alternatives”的系统，它将特定的 java 安装映射到一个几乎可以肯定（除非你弄乱你的路径）在你的路径上的位置。该系统的目的是允许您在系统上保留许多版本的程序，例如 java，除非您指定不同的内容，否则您将使用一个作为默认版本。

然而，这与 Maven**无关**，它需要安装 JDK 才能正确运行。maven 依赖的 java JDK 安装中有许多可执行文件、javac 编译器、用于构建 jar 的 jar 可执行文件，仅举几个最明显的例子。使用替代系统，您必须为每一个映射替代方案，您可能很容易错过一些。这就是 Maven 依赖 JAVA_HOME 变量的原因。

在 linux 系统上，设置 JAVA_HOME 变量的一个方便的地方是文件 ~/.mavenrc。Maven 会读取该文件（如果存在）。

# php - Yii常用数据如何包含？

> ID：15711549
> 
> 赞同：0
> 
> 时间：2013-03-29T21:17:41.137
> 
> 标签：php, yii

我知道如何在 Yii 的辅助类中包含常用函数。但是像下拉值这样的常见数据呢？如何在不重复包含在许多文件中的情况下访问 Yii 中的一些常见数据？例如，数据库中的用户类型是 varchar(1)，在代码中我定义了一个数组，如：

> userTypes 数组
> 'c' => string 'customer'
> 'o' => string 'official
> 'f' => string 'financial
> 't' => string 'clearancer'
> 'a' => string 'administrator'

有很多这样的东西，我想知道处理它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:25:24.290

由于 PHP 的性质，有直接的方法来实现这一点。我通过创建类来存储我的公共数据来做到这一点，例如：

```
class GlobalData {
 const USER_TYPE_CUSTOMER = 'c';

 static function getUserTypes(){
   return array(
    'c' => string 'customer',
    'o' => string 'official',
    'f' => string 'financial,
    't' => string 'clearancer',
    'a' => string 'administrator');
 }
} 
```

然后我像这样使用它：

$userType = GlobalData::getUserTypes(); 回声 $userType[USER_TYPE_CUSTOMER]; //显示客户的用户类型

但是有一个[yii 扩展可以让你创建枚举](http://www.yiiframework.com/extension/enum/)（为了节省时间，但就像我告诉你的那样工作），你应该检查一下。

希望这会对你有所帮助，我不确定这是你想要的。

# linux - Equal alignment of columns with tabs instead of spaces

> ID：15711552
> 
> 赞同：0
> 
> 时间：2013-03-29T21:17:51.283
> 
> 标签：linux, perl, bash, shell

I had a file with contents as below, with three columns which needed to be formatted/aligned:

```
ABCD  XYZAB 1234
PQRSTUV   STU  9113
LMN        OPRQM   8966 
```

I came up with the following shell script:

```
while read -r col1 col2 col3;
do printf "%s%-80s%-80s\n" "$col1" "$col2" "$col3";
done <spaced-define.txt > tabbed-define.txt 
```

and managed to get them aligned like this, with spaces in between:

```
ABCD     <SPACES>  XYZAB  <SPACES>  1234
PQRSTUV  <SPACES>  STU    <SPACES>  9113
LMN      <SPACES>  OPRQM  <SPACES>  8966 
```

What I am unable to figure out is how to achieve the same alignment using tabs instead of spaces ?

```
ABCD    <TABS>  XYZAB  <TABS>  1234
PQRSTUV <TABS>  STU    <TABS>  9113
LMN     <TABS>  OPRQM  <TABS>  8966 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:24:09.190

If you pipe your output to `col` it will reduce sequences of spaces to TABs when appropriate.

```
while read -r col1 col2 col3;
do printf "%-20s%-80s%-80s\n" "$col1" "$col2" "$col3";
done <spaced-define.txt | col > tabbed-define.txt 
```

# javascript - 共享点；页面上已经存在 Javascript 重复点击事件

> ID：15711559
> 
> 赞同：2
> 
> 时间：2013-03-29T21:18:45.047
> 
> 标签：javascript, jquery, sharepoint, click

我有一个 SharePoint 日历，并且我有一些 Javascript 代码来强制日历覆盖事件在模式对话框中打开。基本上，它强制他们通过以下代码在模式对话框中打开：

```
$('.ms-acal-ddiv a').click(function(){ 
     EditLink2(this,'WPQ2');
     return false; 
}); 
```

问题是日历上已经有使用此代码打开的“本机”事件，而正在发生的事情是，当您单击它时，事件会以模式对话框打开 TWICE，从而使页面无法使用。

我不擅长编写 jquery 或 javascript。如何编写 javascript 来查找加粗的代码，并在链接已经执行的情况下阻止它运行？

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:24:40.490

尝试这个：

```
$('.ms-acal-ddiv a').click(function(event){
    EditLink2(this,'WPQ2');
    event.stopPropagation();
    event.stopImmediatePropagation()
    return false;
}); 
```

这将防止`click`事件冒泡。

*   [http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)
*   [http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T15:26:30.203

我遇到了同样的问题。以下代码似乎已经为我清除了它：

```
$('.ms-acal-mdiv a, .ms-acal-ddiv a, .ms-acal-sdiv a').click(function(event){
    event.preventDefault();
    event.stopPropagation();
    event.stopImmediatePropagation();
    EditLink2(this,'WPQ2');
}); 
```

我想知道`return false`最终是否会阻碍覆盖层消失。

# azure - How do I display the region to which Azure Traffic Manager has directed the user?

> ID：15711560
> 
> 赞同：1
> 
> 时间：2013-03-29T21:18:47.307
> 
> 标签：azure, asp.net-mvc-4

We want to display the region to which users are being directed by Azure Traffic Manager in our MVC 4 application (we have cloud services set up in Europe, Asia, and the US). We're thinking of handling this similarly to the way we display the version number in the footer (so it would say something like Version: 1.5.7 Region: East US). I've heard this can be done but I have no idea how. Any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:40:56.640

Your hosted service in Europe would say "Region: Europe" for every single request that comes to it. Similarly, your hosted service in Asia would say "Region: Asia" for every single request that it receives. When WATM sends a user to the Europe service then the user would see "Region: Europe".

The Cloud Cover Episode 46 shows a sample of this. [http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-46-Windows-Azure-Traffic-Manager](http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-46-Windows-Azure-Traffic-Manager)

# ios - UITableView 没有重新加载

> ID：15711562
> 
> 赞同：4
> 
> 时间：2013-03-29T21:19:16.143
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我正在制作一个使用`UITableView`and的应用程序`UITableViewController`。但是，当我调用`[self.tableView reloadData];`时`UITableViewController`，没有任何反应， (`tableView: cellForRowAtIndexPath:`不调用)。我应该怎么办？

```
- (void) UserChangedAmmountAndCurrency: (NSNotification*) notification {
    self.localBank.activeAmmount=((NSNumber*)[notification.userInfo objectForKey:@"newAmmount"]).doubleValue;
    self.localBank.activeCurrency=[self.localBank.worldBank requestCurrencyForLocalBank:((NSString*)[notification.userInfo objectForKey:@"newISO4217Currency"])];
    [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSNumber *ammount= [self.localBank ammountForElementAtIndex:indexPath.row];
    VIPCurrency* currency=[self.localBank currencyForElementAtIndex:indexPath.row];

    static NSString *CellIdentifier = @"cellWithCurrencyAndAmmount";
    VIPConversionCell* cell=[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.longCurencyIdentifier.text=currency.longName;
    cell.shortCurrencyIdentifier.text=currency.shortName;
    cell.textfieldForAmmount.text=ammount.stringValue;
    return cell;
} 
```

编辑：我做了一些额外的测试。我测试过tableview数据源和delegate是我用来调用reload方法的viewcontroller，没问题。我还注意到其他一些奇怪的事情。调用 reloadData 时，既不调用`numberOfSectionsInTableView:`也不`numberOfRowsInSection:`调用。我觉得在调用 reloadData 之前我没有做一件基本的事情，但我不知道是什么。难道是我必须以某种方式专门将单元格设置为过时的？

编辑：我还检查了该方法是否在主线程中被调用，这也可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:10:12.817

检查`nil`from `dequeReusableCellWithIdentifier`call 的想法是创建一个新单元格并将其返回。除非您之前使用给定标识符创建了一个单元格并且在可重用池中，否则该方法将返回`nil`. 因此，正如**@Verec 所**提到的，您应该自己检查`nil`并创建单元格，并且`return`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:47:21.737

`.xib`在文件和`.h`文件中设置表视图委托`(UITableViewDataSource, UITableViewDelegate)`

`[myTableView reloadData];`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-30T11:41:45.113

你只需要添加

```
UITableViewDataSource,UITableViewDelegate 
```

在.h

例子

```
@interface yourviewcontroller : UIViewController <UITableViewDataSource,UITableViewDelegate> 
```

# javascript - setInterval 在第一次迭代后退出。请帮我纠正这个片段？

> ID：15711563
> 
> 赞同：0
> 
> 时间：2013-03-29T21:19:17.753
> 
> 标签：javascript, jquery

有人可以帮我纠正与 相关的问题`setInterval`吗？我对 JavaScript 很陌生，我不确定这里有什么问题。我的页面中有这个块：

```
GlobalTicker.prototype.TickElements = function () {
    this.timer = setInterval(this.initializeElement.apply(this) , 1000);
};
GlobalTicker.prototype.initializeElement = function () {
    for (var i = 0; i < this.tickerElements.length; i++) {
        var existingRun = this.tickerElements[i].secs;
        var elementId = $('#' + this.tickerElements[i].id + ' .comment-editor').find('.ticker');
        existingRun -= 1;
        $(elementId).text(existingRun);
        if (existingRun === 0) {
            $(elementId).remove();
            this.tickerElements.splice(i, 1);
            if (this.tickerElements.length == 0) clearInterval(this.tickerElements.timer);
        }
    }
}; 
```

然后在代码的某个地方，我在一个函数中有这个调用

```
var objTicker = new GlobalTicker();
CommentManagement.prototype.createComment = function (domObject) {
    objTicker.TickElements();
}; 
```

这个函数调用实际上调用`setInterval`函数并运行第一次迭代并跳转到，`initialiseComment();`但是一旦这个块被执行，在下一个间隔，而不是`initialiseComment();`再次执行，它跳回到我的函数调用`CreateComment();`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:31:04.333

`setInterval()` requires a function reference. You were calling the function itself and passing the return result from executing the function (which was `undefined`) to `setInterval()`. Since that return value is not a function, there was no callback function for `setInterval()` to call. Thus, your method was executed once when you first called it, but couldn't be called by the interval.

To fix it, you should change from this:

```
this.timer = setInterval(this.initializeElement.apply(this) , 1000); 
```

to this:

```
var self = this;
this.timer = setInterval(function() {self.initializeElement()}, 1000); 
```

Note, the value of `this` will also be different in the `setInterval()` callback than the value you want so the one you want is saved here in `self` so it can be referenced from that. There's also no need to use `.apply()` in this case because calling a method on an object will automatically set the `this` pointer as needed.

# java - 来自 OSGI 的可配置 Java Servlet

> ID：15711567
> 
> 赞同：0
> 
> 时间：2013-03-29T21:19:34.910
> 
> 标签：java, sling, osgi-bundle

我正在尝试创建一个可通过 OSGi 控制台配置的 Java 类。我听说你可以通过 SCR 注释来做到这一点，但不完全确定如何。我已经掌握了大部分内容，但不确定要获取和发布什么以及如何在 JSP 中引用它。这是我到目前为止所拥有的：

```
import org.apache.felix.scr.annotations.Properties;
import org.apache.felix.scr.annotations.Property;
import org.apache.felix.scr.annotations.sling.SlingServlet;
import org.apache.sling.api.SlingHttpServletRequest;
import org.apache.sling.api.SlingHttpServletResponse;
import org.apache.sling.api.servlets.SlingAllMethodsServlet;

import javax.servlet.ServletException;
import java.io.IOException;

@SlingServlet(
paths={"/somepath/"}
)
@Properties({
@Property(name="email.add", value="Email Info",propertyPrivate=false),
@Property(name="user.info",value="User Info", propertyPrivate=false)
})
public class WelcomeMessage extends SlingAllMethodsServlet
{
@Override
protected void doGet(SlingHttpServletRequest request, SlingHttpServletResponse                                 response) throws ServletException, IOException
{
    //Do something here
}

@Override
protected void doPost(SlingHttpServletRequest request, SlingHttpServletResponse response) throws ServletException, IOException
{
    //Do something here
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:33:28.953

为了能够处理此类注释，您需要设置 Maven SCR 插件（来自 Apache Felix）。该插件将处理注释并在生成的 JAR 文件中创建元数据。

@SlingServlet 注释是特定于 Apache Sling 的，并且需要某些 Apache Sling 包才能注册 servlet。@SlingServlet 注释也由 Maven SCR 插件处理。

这是一个关于如何在 Maven 中配置 SCR 插件的示例。

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.felix</groupId>
      <artifactId>maven-scr-plugin</artifactId>
      <version>1.9.0</version>
      <executions>
        <execution>
          <id>generate-scr-scrdescriptor</id>
          <goals>
            <goal>scr</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

Also, to be able to create an OSGi bundle (Jar with OSGi metadata), you will need to setup the Maven Bundle Plugin.

You can find a brief documentation on the Maven SCR Plugin here: [http://felix.apache.org/documentation/subprojects/apache-felix-maven-scr-plugin.html](http://felix.apache.org/documentation/subprojects/apache-felix-maven-scr-plugin.html).

Maven Bundle plugin documentation is here: [http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html).

But, the best way to understand this is by looking at examples in the Sling bundles here: [https://github.com/apache/sling/tree/trunk/bundles](https://github.com/apache/sling/tree/trunk/bundles).

# plone - 将 PloneFormGen 自定义脚本适配器中的目标文件夹更改为站点中的其他文件夹

> ID：15711568
> 
> 赞同：0
> 
> 时间：2013-03-29T21:19:36.190
> 
> 标签：plone, ploneformgen

从自定义脚本适配器模板：

```
# Find our target folder from the context. The ID of
# our target folder is "submissions"
target = context.submissions 
```

在站点顶部的提交文件夹中创建对象的语法是什么？

IE。`http://mysite/submissions/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:21:30.923

获取门户根目录：

```
portal_root = context.portal_url.getPortalObject()
target = portal_root.submissions 
```

# regex - 如何简洁的正则表达式匹配唯一字符串的任何部分？

> ID：15711572
> 
> 赞同：1
> 
> 时间：2013-03-29T21:20:08.270
> 
> 标签：regex, permutation, subset

**语境：**

假设我有一组完全不同的字符串，尽管它们可能共享起始序列，即`apple, banana, bpple, canana, applf`.

我将如何最好地使用正则表达式来匹配可以包含其中一个字符串的任何左开始子集的*字符串*？例如`apple`，`banana`显然会匹配。`banan`,`ba`和`bp`也是如此`c`。`b`并且`appl`会模棱两可（因此不应该匹配）。

在动态构建的正则表达式（缓慢而丑陋）中使用生成的字符类，我可以为此制作一个匹配引擎。然而，这很复杂，当我尝试时，我最终会在 Python/pick-your-language 中完成大部分匹配逻辑并完全放弃正则表达式。是否有一些简洁的方法可以使用正则表达式进行这项工作？

最简单的方法可能是将每个可能的字符串（`apple, banana`等）分解成一个列表并按顺序匹配每个字符串，但是好奇心和固执让我想知道是否没有办法单独/主要使用正则表达式.

**TL;博士：**

有没有一种方法，使用正则表达式来匹配：当且仅当提供的字符串是给定字符串集中的**一个****唯一**且**左开始**的子字符串？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:16:48.320

不要使用正则表达式。你在找[树叶](http://en.wikipedia.org/wiki/Trie)。

如果您绝对必须使用正则表达式，那么它们可以这样构建：

```
(a(p(p(le?)?)?)?|b(a(n(a(na?)?)?)?)? ...) 
```

编写一些构造它的代码很容易，但是您将无法找出实际匹配的内容（例如，用户输入“app”-您可能想知道它与“apple”匹配）。此外，修改它以确保不超过*一个*匹配项确实很麻烦。构造正则表达式的代码将比仅仅创建一个 trie 复杂得多（事实上，您可能必须创建与 trie 等效的东西才能创建正则表达式，这是您所要求的）。**

# java - SQLSyntaxErrorException: ORA-00911: 无效字符

> ID：15711573
> 
> 赞同：4
> 
> 时间：2013-03-29T21:20:13.230
> 
> 标签：java, sql, database, oracle, jdbc

我正在尝试使用 PreparedStatement 将记录插入 Oracle 数据库，但我只收到此错误。在这一点上，我克服它的努力远远超过了我的进步，所以另一双眼睛可能会有所帮助。无效字符在哪里？

我发现的很多内容表明，**`;`**你的 sql 字符串中的尾随“”可能是罪魁祸首，但从一开始我的陈述中就没有。

我的连接本身，在程序中的其他几个地方**都能完美运行：**

```
Properties props = new Properties();
props.setProperty( "user", username );
props.setProperty( "password", password );
props.setProperty( "defaultRowPrefetch", "10" );
props.setProperty( "defaultBatchValue", "10" );
props.setProperty( "processEscapes", "false" );

DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
Connection conn = DriverManager.getConnection(DB_URL_SVC, props); 
```

我想要完成它的方式（除了我会将它包装在一个接受三个字符串的方法中）但它会抛出一个**SQLSyntaxErrorException**

```
String INSERT_BIKE = "INSERT INTO RACEBIKES ( BIKENAME , COUNTRY_OF_ORIGIN , COST ) VALUES ( ? , ? , ? )";
PreparedStatement preStatement = conn.prepareStatement( INSERT_BIKE );
preStatement.setString(1, "JHT");
preStatement.setString(2, "USA");
preStatement.setInt(3, 2500);
preStatement.executeUpdate();    // ORA-00911: invalid character error 
```

这**可行**，但由于参数是硬编码的，因此违背了使用 PreparedStatement 的目的：

```
String INSERT_BIKE = "INSERT INTO RACEBIKES ( BIKENAME , COUNTRY_OF_ORIGIN , COST ) VALUES ( 'JHT' , 'USA' , '2500' )";
PreparedStatement preStatement = conn.prepareStatement( INSERT_BIKE );
preStatement.executeUpdate(); 
```

**作品**。但是，我知道用单引号和双引号连接变量也不是最好的方法，因为 PreparedStatement 应该使我们不必处理这部分语法：

```
String value1 = "JHT";
String value2 = "USA";
int value3 = 2500;
String INSERT_BIKE = "INSERT INTO RACEBIKES ( BIKENAME , COUNTRY_OF_ORIGIN , COST ) VALUES ( '" + value1 + "', '" + value2 + "', '" + value3 + "' )";
PreparedStatement preStatement = conn.prepareStatement( INSERT_BIKE );
preStatement.executeUpdate(); 
```

**失败**并出现**SQLSyntaxErrorException**。因此，即使我自己使用代码引用语法，我仍然无法将这些变量放在 preStatement.setString() 中，这至少可以提供一点灵活性。

```
String INSERT_BIKE = "INSERT INTO RACEBIKES ( BIKENAME , COUNTRY_OF_ORIGIN , COST ) VALUES ( ? , ? , ? )";
PreparedStatement preStatement = conn.prepareStatement( INSERT_BIKE );
preStatement.setString(1, "' + value1 + '");
preStatement.setString(2, "' + value2 + '");
preStatement.setInt(3, "' + value3 + '");
preStatement.executeUpdate();    // ORA-00911: invalid character error 
```

**失败。**用单引号将占位符括在我的 String 中会导致**SQLException**。

```
String INSERT_BIKE = "INSERT INTO RACEBIKES ( BIKENAME , COUNTRY_OF_ORIGIN , COST ) VALUES ( '?' , '?' , '?' )";
PreparedStatement preStatement = conn.prepareStatement( INSERT_BIKE );
preStatement.setString(1, "JHT");
preStatement.setString(2, "USA");
preStatement.setInt(3, 2500);
preStatement.executeUpdate();    // invalid column index 
```

**失败。**用单引号将我的 String 中的两个`String`（但不是`int`）占位符括起来会导致**SQLException**。

```
String INSERT_BIKE = "INSERT INTO RACEBIKES ( BIKENAME , COUNTRY_OF_ORIGIN , COST ) VALUES ( '?' , '?' , ? )";
PreparedStatement preStatement = conn.prepareStatement( INSERT_BIKE );
preStatement.setString(1, "JHT");
preStatement.setString(2, "USA");
preStatement.setInt(3, 2500);
preStatement.executeUpdate();    // invalid column index 
```

这**不会失败，但也不会写入数据库**（即使我没有禁用自动提交）。

```
String INSERT_BIKE = "INSERT INTO RACEBIKES ( BIKENAME , COUNTRY_OF_ORIGIN , COST ) VALUES ( ? , ? , ? )";
PreparedStatement preStatement = conn.prepareStatement( INSERT_BIKE );
preStatement.setString(1, "JHT");
preStatement.setString(2, "USA");
preStatement.setInt(3, 2500);
preStatement.executeBatch(); 
```

我还尝试了所有使用反斜杠、双反斜杠、反引号、[quitsies、no-startsies、erasies、double-stamps 和 tofus-make-it-true 的转义问题](http://www.youtube.com/watch?v=0RKDifoyra8 "你不能三印双印！")！也许有人知道会帮助我的巫毒教？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T23:03:38.220

你有理由`props.setProperty( "processEscapes", "false" );`吗？

I believe that this turns off the ability to use `?` as bind parameter placeholder. I believe that if escape processing is enabled, JDBC does some 'magic' with the `?` placeholders before passing the SQL string to Oracle. Otherwise, the `?` character is sent to the database as-is.

There are occasional uses for disabling escape processing. I used it in [a previous answer](https://stackoverflow.com/a/4518750/) to a question involving `?` characters in passwords. I believe it can be disabled at the connection or the statement level; to re-enable escape processing on a PreparedStatement, try calling `preStatement.setEscapeProcessing(true);`. I would expect the first of your failing examples to succeed with this option set.

至于您失败的示例，那些未转义`?`的 s 将导致问题，因为`?`它不是 SQL 中的有效字符。用`?`单引号括起来会变成单字符串，因此即使启用了转义处理，它也不会是绑定参数。我不能说为什么最后一个不写入数据库。

# c# - 将 Kinect Beta 代码转换为 1.5 版

> ID：15711574
> 
> 赞同：0
> 
> 时间：2013-03-29T21:20:14.613
> 
> 标签：c#, vb.net, sdk, kinect

嗨，我有这个方法用于我正在使用 Kinect 进行的项目。不幸的是，代码是 beta 版本，我需要将它更新到 1.5 sdk 版本。我尝试了一些东西，但它们不起作用。到目前为止，这是我必须要做的。该方法称为 nui_DepthFrameReady。

```
 void nui_DepthFrameReady(object sender, ImageFrameReadyEventArgs e)
    {
        if (!savedDepth)
        {
            PlanarImage Image = e.ImageFrame.Image;
            byte[] convertedDepthFrame = convertDepthFrame(Image.Bits);

            depth.Source = BitmapSource.Create(
                Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, convertedDepthFrame, Image.Width * 4);

            ++totalFrames;

            DateTime cur = DateTime.Now;
            if (cur.Subtract(lastTime) > TimeSpan.FromSeconds(1))
            {
                int frameDiff = totalFrames - lastFrames;
                lastFrames = totalFrames;
                lastTime = cur;
                frameRate.Text = frameDiff.ToString() + " fps";
            }

            if (subscribed)
            {
                //byte[] ColoredBytes = GenerateColoredBytes(e.ImageFrame);
                //create an image based on the colored bytes
                BitmapSource myBitmapDepth = BitmapSource.Create(Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, convertedDepthFrame, Image.Width * PixelFormats.Bgr32.BitsPerPixel / 8);
                string imageFilePath = @"C:\Temp\kinect\depth\bmpDepthFrame_" + cur.TimeOfDay.ToString().Replace(':', '.') + ".png";
                string dataFilePath = @"C:\Temp\kinect\depth\depthFrame_" + cur.TimeOfDay.ToString().Replace(':', '.') + ".dat";
                //savePngFrame(myBitmapDepth, imageFilePath);

                //Crop frame to size 180x240
                byte[] croppedDepthFrame = new byte[180 * 240 * 2];

                for (int i = 0; i < 240; i++)
                {
                    for (int j = 0; j < 180 * 2; j += 2)
                    {
                        croppedDepthFrame[i * 180 * 2 + j] = Image.Bits[i * 320 * 2 + j + 69 * 2];
                        croppedDepthFrame[i * 180 * 2 + j + 1] = Image.Bits[i * 320 * 2 + j + 1 + 69 * 2];
                        //Console.Write((i * 180 * 2 + j) + "-" + (i * 180 * 2 + j + 69*2) +", ");
                    }
                    //Console.WriteLine();
                }
                FileStream fs = new FileStream(dataFilePath, FileMode.Create);
                fs.Write(croppedDepthFrame, 0, croppedDepthFrame.Length);
                fs.Close();
            }

            savedDepth = true;
        }
    } 
```

感谢您的帮助。这是我到目前为止所拥有的

```
void nui_DepthImageReady(object sender, DepthImageFrameReadyEventArgs e)
    {
        if (!savedDepth)
        {
            short[] pixelData;
            bool receivedData = false;
            using (DepthImageFrame depthImageFrame = e.OpenDepthImageFrame())
            {
                if (depthImageFrame != null)
                {
                    if (pixelData == null) //allocate the first time
                    {
                        pixelData = new short[depthImageFrame.PixelDataLength];
                    }
                    depthImageFrame.CopyPixelDataTo(pixelData);
                    receivedData = true;
                }
                else
                {
                    // apps processing of image data took too long; it got more than 2 frames behind.
                    // the data is no longer avabilable.
                }
            }
            if (receivedData)
            {
                byte[] convertedDepthFrame = convertDepthFrame(Image.bits);

                depth.Source = BitmapSource.Create(Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, convertedDepthFrame, Image.Width * 4);

                ++totalFrames;

                DateTime cur = DateTime.Now;
                if (cur.Subtract(lastTime) > TimeSpan.FromSeconds(1))
                {
                    int frameDiff = totalFrames - lastFrames;
                    lastFrames = totalFrames;
                    lastTime = cur;
                    frameRate.Text = frameDiff.ToString() + " fps";
                }

                if (subscribed)
                {
                    //byte[] ColoredBytes = GenerateColoredBytes(e.ImageFrame);
                    //create an image based on the colored bytes
                    BitmapSource myBitmapDepth = BitmapSource.Create(Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, convertedDepthFrame, Image.Width * PixelFormats.Bgr32.BitsPerPixel / 8);
                    string imageFilePath = @"C:\Temp\kinect\depth\bmpDepthFrame_" + cur.TimeOfDay.ToString().Replace(':', '.') + ".png";
                    string dataFilePath = @"C:\Temp\kinect\depth\depthFrame_" + cur.TimeOfDay.ToString().Replace(':', '.') + ".dat";
                    //savePngFrame(myBitmapDepth, imageFilePath);

                    //Crop frame to size 180x240
                    byte[] croppedDepthFrame = new byte[180 * 240 * 2];

                    for (int i = 0; i < 240; i++)
                    {
                        for (int j = 0; j < 180 * 2; j += 2)
                        {
                            croppedDepthFrame[i * 180 * 2 + j] = Image.Bits[i * 320 * 2 + j + 69 * 2];
                            croppedDepthFrame[i * 180 * 2 + j + 1] = Image.Bits[i * 320 * 2 + j + 1 + 69 * 2];
                            //Console.Write((i * 180 * 2 + j) + "-" + (i * 180 * 2 + j + 69*2) +", ");
                        }
                        //Console.WriteLine();
                    }
                    FileStream fs = new FileStream(dataFilePath, FileMode.Create);
                    fs.Write(croppedDepthFrame, 0, croppedDepthFrame.Length);
                    fs.Close();
                }
            }
            savedDepth = true;
        }
    } 
```

Image.Bits 在 kinect 或 Image.Width、Image.Height 的新 SDK 中没有定义这些是正在发生的错误，所以我不知道如何转换代码以获得相同的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:40:22.970

我将您的示例与 Kinect 1.5 SDK 示例中的示例进行比较，看来您调用`Image`的内容可能与`pixelData`. 我没有看到在哪里`Image`定义，所以我猜。这有帮助吗？

# android - 如何与我的本体建立联系？

> ID：15711575
> 
> 赞同：0
> 
> 时间：2013-03-29T21:20:18.777
> 
> 标签：android, ontology

我用 Protégé 创建了一个本体。然后我创建了一个包含两个编辑文本和一个按钮的 Android 界面。我的代码的主要功能是在我的应用程序和本体之间建立连接并将这些数据存储到其中。我使用三重商店进行存储。

但它不能正常工作。我使用 Sesame 作为服务器，但我不知道如何获取“更新”服务的正确 URL。我可能犯了其他错误，但这是我的活动代码：

```
package com.example.ontologie1;
import com.hp.hpl.jena.ontology.DatatypeProperty;
import com.hp.hpl.jena.ontology.Individual;
import com.hp.hpl.jena.ontology.OntClass;
import com.hp.hpl.jena.ontology.OntModel;
import com.hp.hpl.jena.ontology.OntModelSpec;
import com.hp.hpl.jena.rdf.model.Literal;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.rdf.model.Property;
import java.io.BufferedInputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.InputStream;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import java.io.IOException;

import org.apache.commons.httpclient.NameValuePair;
import org.apache.commons.httpclient.methods.PostMethod;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {
  private Button buttonconnexion;
  private EditText editpseudo;
  private EditText editpassword;
  public String ps;
  public String pa;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    editpseudo = (EditText) findViewById(R.id.welcomeedittextlogin);
    editpassword = (EditText) findViewById(R.id.welcomeedittextpassword);
    buttonconnexion = (Button) findViewById(R.id.welcomebuttonconnexion);
    buttonconnexion.setOnClickListener(click1);
  }

  protected OnClickListener click1 = new OnClickListener() {
    public void onClick(View arg0) {
      ps= editpseudo.getText().toString();
      pa= editpassword.getText().toString();
      try {
        connexion(ps , pa);
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    }
  };

  protected void connexion(String pseudo,String password) throws IOException {

    String requete = "<http://www.w3.org/2002/07/owl#> .\n"
        + "INSERT DATA {\n"
        + "    <http://www.owl-ontologies.com/Ontology_profile.owl#USER>   a   onto:USER;\n"
        + "        onto:Login  " + pseudo + ";\n"
        + "        onto:Password  " + password + ";\n"
        + "}";

    PostMethod post = new PostMethod("<http://www.openrdf.org/config/repository#>");
    NameValuePair[] paramRequete = {
        new NameValuePair("query", requete),
    };
    post.setRequestBody(paramRequete);

    InputStream in = post.getResponseBodyAsStream();
    Toast t = null ;
    t.setText(in.toString());
    t=new Toast(null);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:27:15.457

我没有 Android 编程经验，但有一些问题表明你需要重新考虑你的目标。

本体不是数据库。您不需要将数据存储在本体中，也不需要本体将数据存储在三元存储中。

要将数据存储在三重存储中（使用 SPARQL），您的三重存储需要一个 SPARQL 端点。该端点具有您发送`POST`或`GET`请求的 URI。如果您在本地计算机上安装了 Sesame，则该 URI 可能看起来像`http://localhost:8080/sparql`. 如果你想插入数据，triplestore 需要允许。

您还需要一个有效的 SPARQL 查询，而您`requete`不是。第一行，

```
<http://www.w3.org/2002/07/owl#> . 
```

不完整。通常在 SPARQL 查询的第一行有`PREFIX`es，但它们不以`.`. 例如：

```
PREFIX owl: <http://www.w3.org/2002/07/owl#> 
```

要像您一样使用前缀`onto:`，您需要以相同的方式定义它。有关完整的 SPARQL 教程，请参阅[此](http://www.cambridgesemantics.com/semantic-university/sparql-by-example)。

此外，线条

```
Toast t = null ;
t.setText(in.toString());
t=new Toast(null); 
```

会生成一个`NullPointerException`，因为你调用的方法`t`就是`null`.

# javascript - JS传单：如何将（Geo-）json ID传递给点击事件？

> ID：15711576
> 
> 赞同：8
> 
> 时间：2013-03-29T21:20:22.073
> 
> 标签：javascript, onclick, leaflet, geojson

我的 django web 应用程序应该执行以下操作：将 Geojson 对象传递给视图，使用传单映射点并在用户单击点标记时显示一些附加信息。我对 js 不太熟悉，所以我陷入了将正确类型的数据绑定到`click`事件中。这是一个示例 geojson 对象。如何通过我的`click`活动访问“id”？

```
var geojsonFeature = {'geometry':
                          {'type': 'MultiPoint', 
                          'coordinates': [[4.939, 52.33], [4.9409, 52.33]]
                          }, 
                     'type': 'Feature', 
                     'properties': 
                        {'id': '52','popupContent': 'id=52'}
                     }; 
```

将geojson对象添加到地图..

```
var gj = L.geoJson(geojsonFeature, {
    pointToLayer: function (feature, latlng) {
    return L.circleMarker(latlng, geojsonMarkerOptions);
    }}).addTo(map); 
```

和`on()`-click....

```
gj.on('click', function(evt) {
   alert(id) // well, this is where I need help
}); 
```

注意：我不想使用类似的东西，`bindPopup(feature.properties.popupContent)`因为我想打开一个新窗口，该窗口使用数据库中的一些额外数据调用不同的 django 视图。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-30T07:11:10.760

对于每个有类似问题的人：您要使用的是`onEachFeature`功能。该特征表示一个 geojson 对象。使用上面提供的示例数据，可以通过 访问 id `feature.properties.popupContent`。

```
function onEachFeature(feature, layer) {
    layer.on('click', function (e) {
        alert(feature.properties.popupContent);
        //or
        alert(feature.properties.id);
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T16:57:05.157

在尝试了上面发布的解决方案但没有成功后，我得到了这个版本：

```
function onEachFeature(feature, layer) {
    layer.on('click', function (e) {
        alert(e.target.feature.properties.popupContent);
        //or
        alert(e.target.feature.properties.id);
    });
} 
```

# javascript - Foundation 3 导航和 Fancybox javascript 冲突

> ID：15711577
> 
> 赞同：1
> 
> 时间：2013-03-29T21:20:31.260
> 
> 标签：javascript, jquery, fancybox, zurb-foundation, fancybox-2

使用 Foundation 3 时，我发现存在 javascript 冲突，因此在使用 Fancy Box 灯箱 javascript 时，顶部导航下拉菜单不显示。我使用 Fancy Box javascript 在图库页面上显示图像，但现在导航下拉菜单在此页面上不起作用。

这是 Foundation 为导航提供的 javascript：

```
 ;(function ($, window, undefined) {
  'use strict';

  $.fn.foundationNavigation = function (options) {

    var lockNavBar = false;
    // Windows Phone, sadly, does not register touch events :(
    if (Modernizr.touch || navigator.userAgent.match(/Windows Phone/i)) {
      $(document).on('click.fndtn touchstart.fndtn', '.nav-bar a.flyout-toggle', function (e) {
        e.preventDefault();
        var flyout = $(this).siblings('.flyout').first();
        if (lockNavBar === false) {
          $('.nav-bar .flyout').not(flyout).slideUp(500);
          flyout.slideToggle(500, function () {
            lockNavBar = false;
          });
        }
        lockNavBar = true;
      });
      $('.nav-bar>li.has-flyout', this).addClass('is-touch');
    } else {
      $('.nav-bar>li.has-flyout', this).on('mouseenter mouseleave', function (e) {
        if (e.type == 'mouseenter') {
          $('.nav-bar').find('.flyout').hide();
          $(this).children('.flyout').show();
        }

        if (e.type == 'mouseleave') {
          var flyout = $(this).children('.flyout'),
              inputs = flyout.find('input'),
              hasFocus = function (inputs) {
                var focus;
                if (inputs.length > 0) {
                  inputs.each(function () {
                    if ($(this).is(":focus")) {
                      focus = true;
                    }
                  });
                  return focus;
                }

                return false;
              };

          if (!hasFocus(inputs)) {
            $(this).children('.flyout').hide();
          }
        }

      });
    }

  };

})( jQuery, this ); 
```

这是fancybox网站的链接，因为我无法在此处发布javascript：

[Fancybox 网站](http://fancyapps.com/fancybox/)

我真的不知道他们为什么会发生冲突。

任何帮助都会非常有用。

# ipad - 是否可以从仍在使用 MPMoviePlayerViewController 写入的文件中播放视频？

> ID：15711579
> 
> 赞同：0
> 
> 时间：2013-03-29T21:20:36.933
> 
> 标签：ipad, ios6, mpmovieplayercontroller, buffering

我正在尝试在下载的同时开始播放视频文件（即我正在尝试模拟缓冲。）

我的方法：
我维护创建的视频文件的文件句柄。
在`– connection:didReceiveData:`实现中，我将接收到的数据附加到视频文件中（我用 确保这一点`seekToEndOfFile`）。
一旦收到的总数据超过阈值，我就开始播放文件。
同时，我希望`– connection:didReceiveData:`通过附加传入的数据来继续以与以前相同的方式工作。
这种方法的灵感来自以下帖子。 [http://lists.apple.com/archives/cocoa-dev/2011/Jun/msg00844.html](http://lists.apple.com/archives/cocoa-dev/2011/Jun/msg00844.html)

结果：
虽然上面帖子的作者似乎能够播放文件的至少一部分，但在我的情况下，MoviePlayerViewController 只是显示在屏幕上并消失，就好像文件中没有内容一样。
如果我将整个视频数据写入文件并在连接完成加载后播放，则代码工作得非常好。

有没有人尝试过这种方法并成功了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T00:31:41.123

实验了很多。不要认为没有专用的流媒体服务器是可能的[https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html) 因此采用了不同的方法。

# c# - Base64编码和解码不起作用

> ID：15711583
> 
> 赞同：0
> 
> 时间：2013-03-29T21:21:05.443
> 
> 标签：c#, encoding, base64, decoding

我到处看了很多教程，他们都说应该可以，但没有。

我想输入“ *encode RandomText* ”，然后它应该将“ *RandomText* ”编码为 Base64，如果我输入“ *decode [theEncodedText]* ”，它应该从 Base64 解码并给我“ *RandomText* ”。我做了我能做的一切，但它仍然不起作用。

检查我的完整代码：

```
 static public void Write(string text, int ms)
    {
        foreach (char c in text)
        {
            Thread.Sleep(ms);
            Console.Write(c);
        }
    }
    static public string Encode(string text)
    {
        byte[] encodedBytes = ASCIIEncoding.ASCII.GetBytes(text);
        return Convert.ToBase64String(encodedBytes);
    }
    static public string Decode(string text)
    {
        byte[] decodedBytes = Convert.FromBase64String(text2);
        return ASCIIEncoding.ASCII.GetString(decodedBytes);
    }
    static void Main(string[] args)
    {
        string input = "";
        while (input != "exit")
        {
            Console.ForegroundColor = ConsoleColor.White;
            Write("Input:> ", 10); Console.ForegroundColor = ConsoleColor.Gray;
            input = Console.ReadLine().ToLower().Trim();

            if (input.StartsWith("encode"))
            {
                try
                {
                    string toEncode = input.Substring(7);
                    Write(Encode(toEncode) + "\n\n", 10);
                }
                catch
                {
                    Write("Please enter the text to encode!\n\n", 10);
                }
            }
            else if (input.StartsWith("decode"))
            {
                try
                {
                    string toDecode = input.Substring(7);
                    Write(Decode(toDecode) + "\n\n", 10);
                }
                catch
                {
                    Write("The entered text is either missing or is not encoded!\n\n", 10);
                }                  
            }
            else
            {
                if (input != "" && input != "exit")
                {
                    Write("Invalid command.\n\n", 10);
                }
                else
                {
                }
            }
            Console.ForegroundColor = ConsoleColor.White;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:28:36.547

Base64 区分大小写。您正在降低输入数据的大小写。因此它不会工作。

# html - HTML - 带有 CSS 和文本的 img

> ID：15711585
> 
> 赞同：0
> 
> 时间：2013-03-29T21:21:34.617
> 
> 标签：html, css

我尝试将图片放在页面的右侧。问题是它附近有文字，而在某些浏览器中，图片隐藏了文字。我使用下一个 CSS 作为`<img>`属性：

```
.imgP
{
position:relative;
top:10px;
right: 10px;
float:right;
} 
```

文本是下一个元素：

```
<p> bla bla bla... </p> 
```

我怎样才能改变它，以便文本会在图片附近自动移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:36:10.003

我认为您正在尝试在图像上实现文本换行。

这样做的原理很简单。

像这样创建一些 HTML 标记：

```
<img src="myimage.jpg" alt="" class="imgP" />
<p>My Paragraph text which will wrap around the image...</p> 
```

为了使文本包裹图像，您只需将图像浮动到右侧：

```
.imgP
{
   float: right;
} 
```

浮动将导致图像所在的水平间距折叠，并导致文本填充该区域。

# r - 创建数据透视表

> ID：15711592
> 
> 赞同：2
> 
> 时间：2013-03-29T21:22:05.940
> 
> 标签：r, pivot-table

假设我有一个如下所示的数据集，其中年份按行列出：

```
id<-c(1,1,1,2,2,2,3,3,3)
year<-c(1990, 1991, 1992, 1992, 1993, 1994, 1993, 1994, 1995)
N<-c(7,8,9,7,1,2,5,4,3)
dataset<-data.frame(cbind(id, year, N)) 
```

我希望输出如下所示，以年份作为列标题：

```
id   1990   1991   1992   1993   1994   1995
1    7      8      9      0      0      0
2    0      0      7      1      2      0        
3    0      0      0      5      4      3 
```

我知道这是一个相当简单的问题，但我一直在搞乱 xtabs() 和 melt() 和 cast()，但我不能完全正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:25:45.487

```
> xtabs(N~id+year, data=dataset)
   year
id  1990 1991 1992 1993 1994 1995
  1    7    8    9    0    0    0
  2    0    0    7    1    2    0
  3    0    0    0    5    4    3 
```

`dataset`使用 reshape2 术语，您处于“熔化”形式。在数据查询圈中也称为“第一范式”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:27:02.277

另一种方法：

```
> library(reshape2)
> dcast(dataset, id ~ year, fill=0)
# Using N as value column: use value.var to override.
  id 1990 1991 1992 1993 1994 1995
1  1    7    8    9    0    0    0
2  2    0    0    7    1    2    0
3  3    0    0    0    5    4    3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-01T20:26:29.690

这些天使用 tidyverse 更为流行：

```
library(tidyr)

dataset %>% 
  spread(year, N, fill = 0) 
```

# asp.net-mvc - 异步 MVC 控制器

> ID：15711593
> 
> 赞同：0
> 
> 时间：2013-03-29T21:22:08.017
> 
> 标签：asp.net-mvc, asynchronous, controller, task-parallel-library, async-await

我正在学习 ASP.NET MVC 中的 AsyncController 并将其与 TPL 一起使用，但我很难看到它的需求，我可以理解您何时想要异步运行 Action 来执行诸如发送电子邮件之类的操作，但实际上你会用它从一个动作中返回一个视图吗？

例如，如果 Action 从设置为异步工作的数据库中获取一些数据，然后返回一个 View，如果数据未能及时检索，View 会不会只是返回模型中没有数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:08:39.573

> 你会用它从一个动作中返回一个视图吗？

ASP.NET 中异步的主要优点是可伸缩性。在执行异步工作时，您不会消耗任何线程。这意味着您的应用程序将消耗更少的内存，并且它也可能更快。

> 如果数据未能及时检索，视图是否会在模型中没有数据的情况下返回？

这取决于您以及您将如何处理该故障。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:19:08.190

异步控制器主要用于放弃当前线程池线程，以允许其他传入连接在您等待长时间运行的进程完成时处理工作。

这与传回视图无关。从最终用户的角度来看，该过程仍将“阻塞”，但在服务器上，服务器响应传入请求所需的资源将不会被消耗。

By default, there are 250 thread pool threads per cpu core in an IIS worker process to respond to incoming connections (this can be tuned, but in general you should know what you're doing). If you have to people waiting for long requests to complete, then nobody else will be able to connect to your server until one of them finishes. Async controllers fix that problem.

You can also offload CPU bound work to a dedicated thread when using async controllers, where that was more difficult in synchronous controllers. And, it allows you to perform tasks in parallel. For instance, suppose you have to go out to 10 web sites and retrieve data. Most of the time is spent waiting for those web requests to return, and they can be done in parallel if you are doing things async.

# javascript - javascript输出NaN，我不知道为什么

> ID：15711595
> 
> 赞同：0
> 
> 时间：2013-03-29T21:22:15.500
> 
> 标签：javascript, binary, decimal, nan

好吧，我的 Javascript 作业遇到了这个问题。我需要制作一个二进制翻译器，而 Javascript 并不真的希望我...

它可以工作，但不是真正应该的......如果我用数字声明变量，它就可以工作。但是，如果我用`document.getElementById`它来使它具有某种交互性，那么它就不会起作用。它只是给出NaN。我知道这不是一个数字，但我使用 parseInt() 并且它在没有`document.getElementById`...

所以这里是它是如何工作的代码：

```
var input = 15;
function convertdec()
{
    document.getElementById("output").innerHTML 
        = "binary number: " + parseInt(input).toString(2);
} 
```

输出是 1111，这是正确的，但这也是它应该如何工作以及我希望它是如何工作的：

```
var input = document.getElementById("input").value;
function convertdec()
{
    document.getElementById("output").innerHTML 
        = "binary number: " + parseInt(input).toString(2);
} 
```

如果您填写 15，则此输出也应为 1111，但它显示：

二进制数：NaN

如果有人可以帮助我，那就太好了！

## 编辑

好的，所以有人问我的 HTML：

```
<!DOCTYPE html>
<html>
<head>

    <title>Binairy Converter</title>
    <link type="text/css" href="global.css" rel="stylesheet" />
    <script type="text/javascript" src="javascript.js"></script>

</head>

<body>
    <div id="main">
        <input type="text" name="text" id="input" />
        <input type="button" id="conbin" onclick="convertbin()" value="bin to dec" />
        <p id="output" ><p>
    </div>
</body>

</html> 
```

## 编辑

是的，我通过以下方式解决了这个问题：

```
var input;
function convertdec()
{
    input = document.getElementById("input").value;
    document.getElementById("output").innerHTML = "binary number: " + parseInt(input).toString(2);
} 
```

但无论如何感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:27:43.490

您可以很好地获取函数外部的 DOM 元素，因为此 DOM 解析很昂贵且 DOM 不会更改，但您确实需要获取函数内部的值以获取它们的当前值，而不是页面加载时的值. 尝试这个：

```
var input = document.getElementById("input");
var output = document.getElementById("output");
function convertdec()
{
    output.innerHTML = "binary number: " + parseInt(input.value, 10).toString(2);
} 
```

另请注意，`parseInt()`如果您有前导零，则以八进制解析，因此询问“08”会得到“10”。通过使用`parseInt(num, 10)`. 我也在上面的例子中制作了那个模组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:25:42.910

这可能是您如何显示片段的工件...但看起来您正在将输入设置为页面加载时的任何值...您可能会更好

```
function convertdec()
{
    var input = document.getElementById("input").value;

  document.getElementById("output").innerHTML = "binary number: " + parseInt(input).toString(2);
} 
```

以便在调用函数时设置值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T21:27:13.553

如果没有在上下文中看到这一点，这就是我怀疑正在发生的事情：

```
// you're getting the value from the textbox as it exists
// when the page is rendered: ""
var input = document.getElementById("input").value;

// when you call this, it operates on value ... which is always ""
function convertdec()
{
    document.getElementById("output").innerHTML 
        = "binary number: " + parseInt(input).toString(2);
} 
```

一个微妙的变化应该可以解决它：

```
var input = document.getElementById("input");
function convertdec()
{
    document.getElementById("output").innerHTML 
        = "binary number: " + parseInt(input.value).toString(2);
} 
```

附录：正如 robrich 在他的回答中指出的那样，使用`parseInt(input.value, 10)`将确保文本框中的字符串被解释为以 10 为底的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T21:26:12.697

问题的最可能原因是您没有选择正确的元素，因此 in 的实际值`input`不是 string `"15"`。将`input`自身用作 ID 是可疑的，因为它是一种标签类型，通常不是 ID

你能告诉我们声明的 HTML`input`吗？

# java - 从 jtextfield 将数据插入 jtable

> ID：15711597
> 
> 赞同：-5
> 
> 时间：2013-03-29T21:22:31.827
> 
> 标签：java, swing, jtable, jtextfield, defaulttablemodel

我找到了以下代码：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        DefaultTableModel tableModel = new DefaultTableModel();
        JTable table = new JTable();
        table.setModel(tableModel);
        int c=0;
        Vector rl=new Vector<Object(6);        
        rl.add(c+1);
        rl.add(jTextField1.getText());
        rl.add(jTextField11.getText());
        rl.add(jTextField7.getText());
        rl.add(jTextField8.getText());
        rl.add(jTextField9.getText());
        tableModel.addRow(rl);} 
```

但它不起作用。

我必须复制与 pcode、产品名称、价格、数量、总价相对应的字段，这些字段是文本字段，当我单击添加按钮到其中给出的表时

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T21:28:08.240

不要直接使用“找到”的代码。使用找到的代码中的想法，然后编写自己的代码。如果您遇到代码问题，您会想告诉我们您可能遇到的问题。“不工作”告诉我们很少，我们可以用来帮助你。

如果您只想在现有的 JTable 中添加一行，则不应在 ActionListener 中创建新的 JTable。反而，

*   获取 JTable 的模型。
*   如果 JTable 使用 DefaultTableModel，则从您的 JTextField 获取数据并使用这些数据创建一个 Object 数组或一个填充了数据的 Vector。
*   或者，如果 JTable 使用 AbstractTableModel，则使用 JTextField 保存的数据创建适当的行对象。所需的对象类型取决于 TableModel 持有的对象类型。
*   如果它是 DefaultTableModel，那么您可以调用它的`addRow(...)`方法将 Vector 或 Object[] 数组添加到模型中。否则，您需要`addRow(...)`为 AbstractTableModel 类创建自己的方法。
*   如果您确实创建了自己的`addRow(...)`方法，请务必在更改模型数据后调用相应的 fireTableXXX(...)` 方法。检查[AbstractTableModel API](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)以获取有关这些方法的更多详细信息，但要知道它们对于通知所有侦听器模型的更改很重要，包括 JTable 本身。
*   首先，请务必阅读[Swing JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，因为其中大部分内容都在此处进行了讨论。在我个人看来，本教程唯一的缺点是它讨论了 AbstractTableModel 并且几乎没有提供有关 DefaultTableModels 的任何信息，但我们可以在这方面为您提供一些帮助。

# paypal - 自适应付款和预先批准/定期付款

> ID：15711602
> 
> 赞同：1
> 
> 时间：2013-03-29T21:22:51.623
> 
> 标签：paypal, payment

我正在实施一个解决方案，用户将使用以下两种选择之一购买产品，使用信用卡或使用 PayPal。现在基本上我希望如果用户在他的帐户中没有任何积分，我会向他们的 PayPal 帐户收取一定数量的钱。我将为此使用自适应支付，我将使用 .NET。

现在我有一些问题。有谁知道这是否可以做到？还有别的东西。如果我要使用自适应支付.. PayPal 方面的自适应支付是否更贵？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:27:30.963

所以只是为了确保我遵循，他们的帐户将有“积分”来购买东西。他们将选择物品，然后用积分结账。如果该项目花费 10 个学分而他们只有 8 个学分，您会向他们收取 2 个学分的适当金额吗？

这不需要是自适应支付。您需要做的就是编辑您的结帐流程以考虑多种付款方式（信用和抄送或信用和贝宝）。

所以流程是这样的：

Cust 将商品添加到购物车 -> Cust 结帐 -> 购物车确定是否有任何款项到期 -> 购物车向商家提供新的调整后总额（减去信用） -> Cust 选择付款方式并付款。

# javascript - 取两个数组并将它们组成键值对

> ID：15711606
> 
> 赞同：1
> 
> 时间：2013-03-29T21:23:00.313
> 
> 标签：javascript, jquery

我有两个数组如下。

```
idOne =  ["6", "6", "11"]
counts =  ["2", "1", "1"] 
```

我如何将它变成一个关联数组，其中 idOne 是键，counts 是值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:29:10.417

（根据您的评论更新）

```
var totalsByID = {};
for(var i = 0; i < idOne.length; i++) {
   var id = idOne[i];
   var count = parseInt(counts[i]);
   if(totalsByID[id] === undefined) {
      // We have no entry for this ID, so create one
      totalsByID[id] = count;
   } else {
      // We already have an entry for this ID, so we need to add our current count to it
      totalsByID[id] += count;
   }
} 
```

plalx 建议了一个替代结构，其中包含用于测试的数组：

```
var idOne = ["6", "6", "11"],
    counts = ["2", "1", "1"],
    totalsById = {},
    i = 0,
    len = idOne.length,
    k;

for(; i < len; i++) {
   k = idOne[i];

   //initialize the total to 0
   totalsById[k] = totalsById[k] || 0;

   //you could remove the parseInt call if your count values were numbers instead of strings
   totalsById[k] += parseInt(counts[i], 10);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:27:04.040

您必须使用一个对象来完成此操作：

```
var obj = {};
for(var i=0, l=idOne.length; i<l; i++){
  obj[idOne[i]] = counts[i];
} 
```

然后，您可以通过以下方式访问它：

```
obj['6']; // -> 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T21:48:32.293

试试这个：

```
idOne = ["6", "6", "11"]
counts = ["2", "1", "1"]

var dict = []; // create an empty array
$.each(idOne, function (index, value) {
    dict.push({
        key: idOne[index],
        value: counts[index]
    });
});

console.log(dict); 
```

您可以像这样访问键值对：

```
$.each(dict, function (index, data) {
    console.log(data.key + " : " + data.value);
}); 
```

# java - 从 Web 服务解析日出和日落值

> ID：15711607
> 
> 赞同：0
> 
> 时间：2013-03-29T21:23:11.210
> 
> 标签：java, android, web-services

好的，看来我被困住了，可以做一些帮助。

用我当前的经度和纬度成功调用[这个 web 服务](http://www.earthtools.org/sun/52.77431872/-1.20639/4/12/99/0)后，我得到了整个 xml 文件作为响应。

然而，我想要的 xml 文件的唯一一点是日出和日落时间，我该如何去解析这些，只有这些到 TextViews？

我已经查看并尝试了无数关于 XmlPullParser、DOMParser 和 SAXParser 的教程，现在我正在苦苦挣扎。

要求的代码：

```
import java.io.IOException;
import java.io.InputStream;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class SunriseSunset extends Activity implements OnClickListener {

    public Button getLocation;
    public TextView LongCoord;
    public TextView LatCoord;
    public double longitude;
    public double latitude;
    public LocationManager lm;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sunrisesunset);
        findViewById(R.id.my_button).setOnClickListener(this);
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
                new MyLocationListener());

        getLocation = (Button) findViewById(R.id.GetLocation);
        LongCoord = (TextView) findViewById(R.id.LongCoord);
        LatCoord = (TextView) findViewById(R.id.LatCoord);

        getLocation.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // When GetLocation button is clicked the showCurrentLocation
                // function is ran
                showCurrentLocation();
            }

        });
    }

    protected void showCurrentLocation() {
        // TODO Auto-generated method stub
        // This is called to find current location based on GPS data and sends
        // this to LongCoord and LatCoord TextViewsw
        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        LongCoord.setText(Double.toString(longitude));
        LatCoord.setText(Double.toString(latitude));
    }

    @Override
    public void onClick(View arg0) {
        Button b = (Button) findViewById(R.id.my_button);
        b.setClickable(false);
        new LongRunningGetIO().execute();
    }

    private class LongRunningGetIO extends AsyncTask<Void, Void, String> {

        protected String getASCIIContentFromEntity(HttpEntity entity)
                throws IllegalStateException, IOException {
            InputStream in = entity.getContent();
            StringBuffer out = new StringBuffer();
            int n = 1;
            while (n > 0) {
                byte[] b = new byte[4096];
                n = in.read(b);
                if (n > 0)
                    out.append(new String(b, 0, n));
            }
            return out.toString();
        }

        @Override
        protected String doInBackground(Void... params) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            //Finds todays date and adds that into the URL
            Calendar c = Calendar.getInstance();
            System.out.println("Current time => " + c.getTime());
            SimpleDateFormat df = new SimpleDateFormat("dd/MM");
            String formattedDate = df.format(c.getTime());

            String finalURL = "http://www.earthtools.org/sun/"
                    + LatCoord.getText().toString().trim() + "/"
                    + LongCoord.getText().toString().trim() + "/"
                    + formattedDate + "/99/0";
            HttpGet httpGet = new HttpGet(finalURL);
            String text = null;

            try {
                HttpResponse response = httpClient.execute(httpGet,
                        localContext);
                HttpEntity entity = response.getEntity();
                text = getASCIIContentFromEntity(entity);
            } catch (Exception e) {
                return e.getLocalizedMessage();
            }
            return text;
        }

        protected void onPostExecute(String results) {
            if (results != null) {
                EditText et = (EditText) findViewById(R.id.my_edit);
                et.setText(results);
            }
            Button b = (Button) findViewById(R.id.my_button);
            b.setClickable(true);
        }
    }

    class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub
        }
    }
} 
```

这是正在使用的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".SunriseSunset" >

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Date:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

       <TextView
            android:id="@+id/Date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Today"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Location:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/Date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Current Location"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <Button
        android:id="@+id/GetLocation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Find Location" />

    <TextView
        android:id="@+id/LatCoord"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <TextView
        android:id="@+id/LongCoord"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

     <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Calculate Sunrise/Sunset Time"
        android:id="@+id/my_button"/>
    <EditText 
        android:layout_margin="20dip"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:minLines="30"
        android:maxLines="30"
        android:textSize="12sp"
        android:editable="false"
        android:id="@+id/my_edit"/>

</LinearLayout> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:38:44.650

您可以尝试用下面的替换您的 onPostExecute 并添加此导入...

```
import java.io.StringReader;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

protected void onPostExecute(String results) {
        if (results != null) {
        try {

            DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            InputSource s = new InputSource(new StringReader(result));
            Document doc = dBuilder.parse(s);
            doc.getDocumentElement().normalize();
                            //EditText et = (EditText) findViewById(R.id.my_edit);
                            TextView tv = (TextView) findViewById(R.id.Date);
                            tv.setText("sunrise at "+doc.getElementsByTagName("sunrise").item(0).getTextContent() + " sunset at "+doc.getElementsByTagName("sunset").item(0).getTextContent());
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    Button b = (Button) findViewById(R.id.my_button);
    b.setClickable(true);
    } 
```

EDIT: I'm not sure which TextView you want to set but I guess this one (R.id.Date). You can change the id if it's not the right one.

```
//EditText et = (EditText) findViewById(R.id.my_edit); 
TextView tv = (TextView) findViewById(R.id.Date);
tv.setText... 
```

# scala - Scala 不可变案例类是否应该定义为包含 Seq[T]、immutable.Seq[T]、List[T] 或 Vector[T]？

> ID：15711609
> 
> 赞同：2
> 
> 时间：2013-03-29T21:23:22.180
> 
> 标签：scala, collections, scala-collections

如果我们想定义一个包含单个对象的案例类，比如一个元组，我们可以很容易地做到：

```
sealed case class A(x: (Int, Int)) 
```

在这种情况下，检索“x”值将花费一小段常数时间，而这个类将只占用一小段常数空间，无论它是如何创建的。

现在，假设我们想要保存一个值序列；我们可以这样：

```
sealed final case class A(x: Seq[Int]) 
```

这似乎和以前一样有效，只是现在存储和读取所有 x 的时间与 x.length 成正比。

然而，事实并非如此，因为有人可以这样做：

```
val hugeList = (1 to 1000000000).toList
val a = A(hugeList.view.filter(_ == 500000000)) 
```

在这种情况下，a 对象看起来像一个在序列中保存单个 int 的无辜案例类，但实际上它需要千兆字节的内存，并且每次访问该单个元素都需要几秒钟的时间。

这可以通过将 List[T] 之类的东西指定为类型而不是 Seq[T] 来解决；然而，这看起来很难看，因为它添加了对特定实现的引用，而实际上其他表现良好的实现，如 Vector[T]，也可以。

另一个令人担忧的问题是可以传递一个可变的 Seq[T]，因此似乎至少应该使用 immutable.Seq 而不是 scala.collection.Seq（尽管编译器目前实际上不能强制执行不变性）。

查看大多数库，似乎常见的模式是使用 scala.collection.Seq[T]，但这真的是个好主意吗？

或者也许使用 Seq 只是因为它是最短的类型，实际上最好使用 immutable.Seq[T]、List[T]、Vector[T] 或其他东西？

## 编辑中添加的新文本

查看类库，一些最核心的功能，如 scala.reflect.api.Trees 实际上确实使用 List[T]，并且通常使用具体类似乎是个好主意。

但是，为什么要使用 List 而不是 Vector？

Vector 的长度为 O(1)/O(log(n))，具有前置、附加和随机访问，渐近地更小（由于 vtable 和 next 指针，List 大约大 3-4 倍），并且支持缓存高效和并行计算, 而 List 除了 O(1) 前置之外没有任何这些属性。

所以，我个人倾向于 Vector[T] 是图书馆数据结构中公开的东西的正确选择，尽管它似乎不太受欢迎，但人们不知道图书馆用户需要什么操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:23:26.080

First of all, you talk both about space and time requirements. In terms of **space**, your object will always be as large as the collection. It doesn't matter whether you wrap a mutable or immutable collection, that collection for obvious reasons needs to be in memory, and the case class wrapping it doesn't take any additional space (except its own small object reference). So if your collection takes "gigabytes of memory", that's a problem of your collection, not whether you wrap it in a case class or not.

You then go on to argue that a problem arises when using **views instead of eager collections**. But again the question is what the problem actually is? You use the example of lazily filtering a collection. In general running a filter will be an O(n) operation just as if you were iterating over the original list. In that example it would be O(1) for successive calls if that collection was made strict. But that's a problem of the calling site of your case class, not the definition of your case class.

The only valid point I see is with respect to **mutable collections**. Given the defining semantics of case classes, you should really only use *effectively* immutable objects as arguments, so either pure immutable collections or collections to which no instance has any more write access.

There is a design error in Scala in that `scala.Seq` is not aliased to `collection.immutable.Seq` but a general seq which can be either mutable or immutable. I advise against any use of unqualified `Seq`. It is really wrong and should be rectified in the Scala standard library. Use **`collection.immutable.Seq`** instead, or if the collection doesn't need to be ordered, **`collection.immutable.Traversable`**.

So I agree with your suspicion:

> Looking at most libraries it seems that the common pattern is to use scala.collection.Seq[T], but is this really a good idea?

No! Not good. It might be convenient, because you can pass in an `Array` for example without explicit conversion, but I think a cleaner design is to require immutability.

# android - 我将 ANT_HOME 和 JAVA_HOME 设置为什么？

> ID：15711612
> 
> 赞同：2
> 
> 时间：2013-03-29T21:23:32.937
> 
> 标签：android

我在 CentOS 6.3 机器上。我通过 yum 安装了 ant 和 openjdk。我应该将环境变量 ANT_HOME（和 JAVA_HOME）设置为什么？我查看了整个文件系统，找不到任何适合 ant 的东西。

对于 java，/usr/lib/jvm 中有很多符号链接。而“java”实际上是一个符号链接，它指向另一个链接，另一个链接最终指向/usr/lib/jvm/jre-1.7.0-openjdk/bin/java，这是一个实际的文件。我应该将 JAVA_HOME 设置为什么？

最后，我之所以问，是因为我正在尝试构建一些简单的 Android 程序书 'Beginning Android 4' 并收到此错误消息：

```
# ant debug
 Buildfile: build.xml

 BUILD FAILED
      NowRedux/build.xml:49: taskdef class com.android.ant.SetupTask cannot be found 
```

从其他 WWW 搜索来看，上述情况似乎是由于没有设置 ANT_HOME 和 JAVA_HOME 造成的，而我没有设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:59:21.390

```
export ANT_HOME=/usr/share/ant
export JAVA_HOME=/usr/lib/jvm/java 
```

I dont' use CentOS, but I looked in the RPM package "files" section (yum is an RPM frontend/wrapper of sorts, if I recall). [http://rpmfind.net//linux/RPM/centos/6.3/i386/Packages/ant-1.7.1-13.el6.i686.html](http://rpmfind.net//linux/RPM/centos/6.3/i386/Packages/ant-1.7.1-13.el6.i686.html)

Also, I'd stick to the packages if you can, but for simple Java stuff you can also just download the ant dist and Java dist and unpack them somewhere on your own (say /opt) and then use those dirs the non-package way.

Once you've set the variables you can make sure they exist with echo $JAVA_HOME and echo $ANT_HOME and so on.

LASTLY, you might want to post this on ServerFault, that seems like it might be more appropriate and you might get better Linux/Package related responses (I answered anyway, in case it helps, but again, I'm not a CentOS guy, and haven't used YUM/RPM in a long time, so grain of salt and all).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:20:08.930

> 对于 java，/usr/lib/jvm 中有很多符号链接。而'java'实际上是一个符号链接，它指向另一个链接，另一个链接最终指向/usr/lib/jvm/jre-1.7.0-openjdk/bin/java，这是一个实际文件。我应该将 JAVA_HOME 设置为什么？

对于你可能还没有的东西。

理论上，在这种情况下，您应该将它指向`/usr/lib/jvm/jre-1.7.0-openjdk`Java 目录，该目录是`java`您将使用的程序的主目录。

然而：

*   那是 JRE，而不是 JDK
*   Android SDK 不正式支持 Java 7——系统要求适用于 JDK 6

因此，我建议下载 JDK 6（或等效的 OpenJDK），安装它，并设置`JAVA_HOME`为指向其等效目录（可能是 JDK 的对等目录`usr/lib/jvm/jre-1.7.0-openjdk`）。您可能还需要运行适当的 CentOS 命令来将这些符号链接切换`java`为指向 JDK 中的符号链接。我不使用 CentOS，所以我不能告诉你这些是什么，但应该有一些“更新替代”命令可以运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:43:33.760

我不确定这是否是解决问题的正确方法，或者它只是回避它，但我这样做了

```
rm MyProjects/NowRedux/build.xml
android update project --target 8 --path MyProjects/NowRedux 
```

它奏效了。它基本上创建了一个不引用 com.android.ant.SetupTask 的新 build.xml 文件（因此，该问题可能仍然存在，但至少我找到了解决方法）

# iphone - 我可以为不同的应用程序或配置文件使用相同的 iOS 开发人员证书吗

> ID：15711614
> 
> 赞同：0
> 
> 时间：2013-03-29T21:23:48.490
> 
> 标签：iphone, ios, appstore-approval

我已经在 App Store 中发布了 App1，我有一个开发人员证书和多个开发人员配置文件，用于 DEV/QA，以及用于 APP1 的相同开发人员证书。

现在我要开始 App2 的开发了。我是否也可以将 App1 中使用的相同开发人员证书用于 App2。如果我使用相同的开发人员证书会有任何问题吗？

最佳做法是什么？

提前致谢，

萨米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:43:36.877

您的开发人员证书应该适用于您想要生产的尽可能多的应用程序。如果您想将应用程序分开，以防其他人与您一起处理其中一些应用程序，那么设置通配符是一个很好的做法。所以答案是肯定的，你可以为这两个应用程序使用相同的 Dev sett。

# cocoa - Cocoa Foundation Framework 的完整类图？

> ID：15711618
> 
> 赞同：0
> 
> 时间：2013-03-29T21:24:15.320
> 
> 标签：cocoa

Cocoa Foundation Framework 是否有任何 PDF 格式的全类图？

我找到[了一个链接](http://developer.apple.com/library/ios/documentation/cocoa/reference/Foundation/ObjC_classic/FoundationObjC.pdf)和[另一个链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/ObjC_classic/Intro/IntroFoundation.html)，但找不到一个不错的链接。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:17:04.027

还有[Application Kit Classes and Protocols](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/ObjC_classic/Intro/IntroAppKit.html) ,

但无论哪种方式：这是一个非常全面的类列表.. 即不是你可能打印出来并放在白板（甚至办公室墙上）的东西 - 就是以可读的字体大小。

在一些 WWDC 上还展示了一些演示应用程序，它将使用 Obj-C 运行时创建具有所有 Cocoa 或 AppKit 类的某种可导航类树。不过，刚才没能找到那个特定的例子。

# mysql - SQL count 键值列的唯一组合中的行数

> ID：15711621
> 
> 赞同：1
> 
> 时间：2013-03-29T21:24:33.513
> 
> 标签：mysql, sql, count, group-by, pivot

给定以下 MySQL 表结构：

```
CREATE TABLE `order_params`( `order_id` BIGINT(30) NOT NULL, 
              `key` VARCHAR(50) NOT NULL, `value` VARCHAR(255) NOT NULL ); 
```

而这个数据：

```
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('1', 'browser', 'Firefox'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('1', 'os', 'Windows'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('2', 'browser', 'Firefox'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('2', 'os', 'Windows'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('3', 'browser', 'Firefox'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('3', 'os', 'OSX'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('4', 'browser', 'Safari'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('4', 'os', 'OSX'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('5', 'browser', 'Safari'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('5', 'os', 'OSX'); 
INSERT INTO `order_params` (`order_id`, `key`, `value`) VALUES ('5', 'version', '5'); 
```

如何获得以下结果？

```
browser Firefox os Windows              2
browser Firefox os OSX                  1
browser Safari os OSX                   1
browser Safari os OSX version 5         1 
```

右边的数字是匹配唯一键/值组合的记录数。这甚至可能吗？

好的，更新以表明我已经尝试过：

```
SELECT CONCAT(`key`, `value`), COUNT(*)
FROM order_params 
GROUP BY `order_id`, `key`, `value`; 
```

这是结果：

```
browserFirefox  1
osWindows       1
browserFirefox  1
osWindows       1
browserFirefox  1
osOS X          1
browserSafari   1
osOS X          1 
```

我也试过这个：

```
SELECT `key`, `value`, COUNT(*)
FROM order_params 
GROUP BY `key`, `value`; 
```

产生这个：

```
browser Firefox  3
browser Safari   1
os OS X          2
os Windows       2 
```

显然，这些都不是我们想要的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:28:11.320

一种方法是两个聚合阶段

```
select browser, os, version, count(*)
from (select order_id,
             max(case when `key` = 'browser' then `value` end) as browser,
             max(case when `key` = 'os' then `value` end) as os,
             max(case when `key` = 'version' then `value` end) as version
      from order_params op
      group by order_id
     ) p
group by browser, os, version 
```

如果你真的想要你拥有的字符串，你可以将它们连接在一起：

```
select concat(coalesce(concat('browser ', browser), ''),
              coalesce(concat('os ', os), ''),
              coalesce(concat('version ', version), ''), count(*)
from (select order_id,
             max(case when `key` = 'browser' then `value` end) as browser,
             max(case when `key` = 'os' then `value` end) as os,
             max(case when `key` = 'version' then `value` end) as version
      from order_params op
      group by order_id
     ) p
group by os, browser, version 
```

# sql - 访问不会按总值对货币进行排序 - SQL - 排名

> ID：15711624
> 
> 赞同：0
> 
> 时间：2013-03-29T21:24:43.510
> 
> 标签：sql, ms-access, format, currency, ranking

这可能是一个简单的问题，但令人惊讶的是，我没有找到任何适合这里的东西。我进行了一个查询，其中我将数字格式化为货币。具体来说：

```
Format((Sum([CombineTables].[Total Extended Price])),'Currency') 
```

现在，当我尝试对 Access 进行排序时，它会执行以下操作：

```
$9,994,340.95
$9,200.50
$9.75
$8,000,0000.00
$4,000
$1,000,000,000.00 
```

我想通过 SQL 对这些进行排名，我认为排序是最简单的方法。你知道如何纠正这个问题吗，输出仍然需要采用货币格式。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:48:46.610

好吧，一种选择是`order by`原始值：

```
order by Sum([CombineTables].[Total Extended Price]) 
```

如果由于某种原因您不能这样做*并且*所有内容都具有相同的格式，请使用以下技巧：

```
order by len(TotalExtendedPrice), TotalExtendedPrice 
```

（或任何列）。

你可以用这个技巧处理小数：

```
order by len(TotalExtendedPrice) - iif(TotalExtendedPrice like '*.*',  3, 0),
         TotalExtendedPrice 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:03:04.290

在我看来它正在将其视为/排序为字符串，您应该为其添加另一个“列”`Sum([CombineTables].[Total Extended Price])`并对其进行排序。在查询设计器中，您可以选中/取消选中一个框以在输出 iirc 中显示它

# ruby - 如何在 Ruby 中编写“if in”语句

> ID：15711625
> 
> 赞同：5
> 
> 时间：2013-03-29T21:24:50.540
> 
> 标签：ruby, arrays, if-statement

我正在寻找和 if-in 类似 Python 的 Ruby 语句。

本质上，如果 x**在**an_array 做

这是我正在处理的代码，其中变量“line”是一个数组。

```
def distance(destination, location, line)
  if destination and location in line
    puts "You have #{(n.index(destination) - n.index(location)).abs} stops to go"
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:30:58.930

```
if line.include?(destination) && line.include?(location)

if [destination,location].all?{ |o| line.include?(o) }

if ([destination,location] & line).length == 2 
```

第一个是最清晰但最不干燥的。

最后一个是最不清晰的，但当您有多个要检查的项目时最快。（这是`O(m+n)`对`O(m*n)`。）

我个人会使用中间那个，除非速度是最重要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T21:27:04.190

如何使用[包含？](http://ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)

```
def distance(destination, location, line)
  if line.any? { |x| [destination, location].include?(x) }
    puts "You have #{(n.index(destination) - n.index(location)).abs} stops to go"
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T21:30:52.790

你可以使用[Enumerable#include?](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-include-3F) - 看起来有点难看 - 或者创建你自己的抽象，这样你就可以写出你对操作的看法：

```
class Object
  def in?(enumerable)
    enumerable.include?(self)
  end
end

2.in?([1, 2, 3]) #=> true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T22:47:13.857

Ruby 支持集合操作。如果你想要简洁/简洁，你可以这样做：

```
%w[a b c d e f] & ['f']
=> ['f'] 
```

Turning that into a boolean is easy:

```
!(%w[a b c d e f] & ['f']).empty?
=> true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T08:29:21.967

If it is that you want to ensure that both destination and location are in line, I'd go with one intersect in preference to two ".include?" checks:

```
def distance(destination, location, line)
  return if ([destination, location] - line).any? # when you subtract all of the stops from the two you want, if there are any left it would indicate that your two weren't in the original set
  puts "You have #{(line.index(destination) - line.index(location)).abs} stops to go"
end 
```

# knockout.js - 淘汰赛自定义绑定处理程序 - 加载模板和显示弹出框

> ID：15711626
> 
> 赞同：1
> 
> 时间：2013-03-29T21:24:53.167
> 
> 标签：knockout.js, popover

我正在尝试从我的淘汰视图模型中的数据创建一个动态弹出框。我正在编写一个自定义绑定处理程序，它为数组中的每个项目加载一个模板。

这是我的绑定处理程序的开始。

```
ko.bindingHandlers.notificationsPopover = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        console.log('init called');
    },

    update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        console.log('update called');
        console.log(value);

        var notifications = $("<div>");

        $.each(value, function () {
            console.log(ko.toJS(this));
            var data = this;
            var elm = $("<div>");

            ko.renderTemplate('Notification', data, {
                afterRender: function (nodes) {
                    notifications.append(elm.html());
                    console.log("Called");
                }
            }, elm.get(0), "replaceChildren");
        });

        var options = {
            title: 'Notifications',
            html: true,
            content: "'" + notifications.html() + "'",            
            placement: 'bottom'
        };
        $(element).popover(options);
        console.log(notifications.html());
    }
}; 
```

在控制台中，我看到更新被调用了两次。一次没有数据，第二次将数据加载到该元素绑定的数组中。虽然我的 afterRender 只被调用一次，但当时的 notification.html() 包含：

```
<div class="infuser-loading">Loading...</div> 
```

我的模板如下所示：

```
<div class="row-fluid">
    <div class="span3">
        <img data-bind="attr: { src: senderphoto(), alt: sendername() }" />
    </div>
    <div class="span9">
        <p data-bind="html: message()"></p>
    </div>
</div> 
```

我怎样才能让它为数组中的每个项目加载模板，然后将这些模板连接在一起作为弹出框的内容？

# c# - 强制 GC.Collect() 减少在时间敏感代码期间运行的机会？

> ID：15711627
> 
> 赞同：5
> 
> 时间：2013-03-29T21:24:54.920
> 
> 标签：c#, performance, garbage-collection

在一次采访中，我被要求想出一种方法来确保 c# 中的代码块可以在一致的时间运行以满足假设的时间要求。面试官提到，一种方法是在代码块执行之前调用垃圾收集器进行收集，这样可以显着降低在该代码块期间GC再次运行的概率。它被应用于医疗设备的基于时间的精确测量，其中垃圾收集会影响这些测量。

这对我来说很有意义，但我找不到任何支持它的信息。我审查的普遍共识是永远不要调用 GC.Collect()，例外情况不包括这种情况。

运行 GC.Collect() 真的可以降低它很快运行的概率吗？这是使用 .net 框架执行此操作的正确方法吗？GC.Collect() 是否也为其他 CLR 程序收集，还是仅适用于当前进程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T21:53:57.613

贾里德的回答当然很棒。添加其他几点：

> 运行 GC.Collect() 真的可以降低它很快运行的概率吗？

是的。

> 这是使用 .net 框架执行此操作的正确方法吗？

I would not want the correctness of software that has human-life-safety-critical functions to depend on probabalistic *guesses* about the *undocumented* behaviour of the collector.

That said: you should do a WaitForPendingFinalizers after the collection. Remember, finalizers run on their own thread, and that might be taking up processor time.

> Does GC.Collect() collect for other CLR programs too or is it only applicable to the current process?

Collecting cleans up managed memory in the current process, so if you have multiple appdomains in one process, collecting in one appdomain collects in the others. It does not go cross process.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-29T21:29:38.790

运行 a绝对**有可能**`GC.Collect`降低它在紧随其后的代码中发生的概率。您可以制定许多明确的方案，在这些方案下它会有这种确切的行为。例如，如果下一次分配将导致收集并`GC.Collect`释放至少在场景期间分配的内存量。

然而，这是我**永远不会**依赖的事情。绝对不能保证会出现这种情况。事实上，收集可能不会在场景期间发生，并且运行强制的时间`GC.Collect`可能会超过场景时间本身。

保证`GC.Collect`在给定场景中不会运行的唯一方法是

1.  不要分配任何内存
2.  不要让其他人打电话`GC.Collect`

极难保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:11:53.057

what you could possibly do, is specify to disable concurrent/background garbage collection through app.config: [Concurrent Garbage Collection on MSDN](http://msdn.microsoft.com/en-us/library/at1stbec%28v=vs.110%29.aspx)

# excel - 如何在 Excel 2010 中计算第 95 个百分位数

> ID：15711630
> 
> 赞同：0
> 
> 时间：2013-03-29T21:25:07.617
> 
> 标签：excel, excel-2010, percentile

我正在尝试计算在 95% 的时间内返回了多少电话。下面是我的结果集。我正在与`Excel 2010`

```
Milliseconds    Number
0               1702
1               15036
2               14262
3               13190
4               9137
5               5635
6               3742
7               2628
8               1899
9               1298
10              963
11              727
12              503
13              415
14              311
15              235
16              204
17              140
18              109
19              83
20              72
21              55
22              52
23              35
24              33
25              25
26              15
27              18
28              14
29              15
30              13
31              19
32              23
33              19
34              21
35              20
36              25
37              26
38              13
39              12
40              10
41              17
42              6
43              7
44              8
45              4
46              7
47              9
48              11
49              12
50              9
51              9
52              9
53              8
54              10
55              10
56              11
57              3
58              7
59              7
60              2
61              5
62              7
63              5
64              5
65              2
66              3
67              2
68              1
70              1
71              2
72              1
73              4
74              1
75              1
76              1
77              3
80              1
81              1
85              1
87              2
93              1
96              1
100             1
107             1
112             1
116             1
125             1
190             1
356             1
450             1
492             1
497             1
554             1
957             1 
```

只是一些背景信息是什么意思-

```
1702 calls came back in 0 milliseconds
15036 calls came back in 1 milliseconds
14262 calls came back in 2 milliseconds
etc etc 
```

因此，要从上述数据计算第 95 个百分位数，我在 excel 2010 中使用此公式-

`=PERCENTILE.EXC(IF(TRANSPOSE(ROW(INDIRECT("1:"&MAX(H$2:H$96))))<=H$2:H$96,A$2:A$96),0.95)`

谁能帮助我我在 Excel 2010 中的做法是否正确？

通过使用上述场景，我得到了 10 的第 95 个百分位数。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:41:57.320

这基本上与您[在此处](https://stackoverflow.com/questions/15671408/calculate-percentile-in-excel-2010/15671753#15671753)提出的问题和我建议的公式相同。根据我对该问题的最后评论 - 只要您正确使用，该公式应该可以正常工作`CTRL+SHIFT+ENTER`。我使用该公式得到 10 作为此示例的答案。

我认为您可以手动验证这确实是正确的答案。如果您在相邻列中有一个运行总计，那么您可以看到达到第 95 个百分位的位置......

# dynamics-crm-2011 - 单击功能区上的按钮时如何更改行为？

> ID：15711633
> 
> 赞同：0
> 
> 时间：2013-03-29T21:25:21.550
> 
> 标签：dynamics-crm-2011, ribbon

当用户回复电子邮件时，我想保留正在执行的操作，**但**还要执行其他任务（向 Web 服务发送调用，我已经单独工作了）。我的问题包括以下两项。

*   我找不到回复电子邮件外观的表单定义（不过我找到了*电子邮件*表单）。
*   我不知道如何到达该表单的功能区按钮并在其上设置*onclick*方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:18:38.950

[您可以使用功能区 XML 自定义文件（此处](http://msdn.microsoft.com/en-us/library/gg309639.aspx)为 ms 文章）更改功能区属性（例如添加/删除按钮、更改行为）。

好在有人替他们做了微软的工作，想出了一个可视化的编辑工具，省去了手动修改xml文件的麻烦。
我喜欢[可视化功能区编辑器](http://crmvisualribbonedit.codeplex.com/)，但还有其他几个（msdn 文章包含指向它们的链接）。

您可能想要的是向回复按钮添加一个[操作](http://msdn.microsoft.com/en-us/library/gg328199.aspx)，这将在您的代码中触发一个 javascript 函数

# php - 使 imagettftext 接受整个 pwgen -ny 输入，而不仅仅是第一个密码

> ID：15711639
> 
> 赞同：0
> 
> 时间：2013-03-29T21:25:54.000
> 
> 标签：php, imagettftext

所以我有这个： [https ://indigodaddy.koding.com/](https://indigodaddy.koding.com/)

（基本上直接来自[http://us2.php.net/manual/en/function.imagettftext.php](http://us2.php.net/manual/en/function.imagettftext.php)）

```
<?php

// Set the content-type

header('Content-Type: image/png');

// Create the image

$im = imagecreatetruecolor(400, 30);

// Create some colors

$white = imagecolorallocate($im, 255, 255, 255);

$grey = imagecolorallocate($im, 128, 128, 128);

$black = imagecolorallocate($im, 0, 0, 0);

imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw

$text = `../../../bin/pwgen -ny 12`;

// Replace path by your own font path

$font = 'font/DejaVuSans-Bold.ttf';

// Add some shadow to the text

imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text

imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()

imagepng($im);

imagedestroy($im);

?> 
```

如何使 txt 到图像的转换接受 pwgen -ny -12 的整个输入？这将输出 6 列 12 字符的密码，例如： http: [//pwgen.net/](http://pwgen.net/)。我希望将整个输出转换为 png，而不仅仅是第一个密码，就像现在一样。

有任何想法吗？

** 根据要求编辑 pwgen -ny 12 的示例输出：

```
Uo/thengohy5 phie=Tahw8ko Cohh1seiz]ua ooY@ee4chei) noo}Mioyei5u au$x5Isaigho
aht6vahGia{j aeph8yoh#kuY EeNgees#ae4k boh5yie1Ic\e aiSh5bahp]ai kiex%ahL0Oob
bei|G{ohm8ae Ieth|ee|wee9 koo@R2iZeot" Nai5Phain(ie Oam*ub0thoth quu6Eyimohd-
geeNgool}ee1 Oow5Pie_sija ab#ahcoo8eeJ ahcoe_r6Vae3 pi%wiedeit4A biegh}u@vu6K
euwei.gei9Of ahr?ai2UquaZ ha3eiXee"koo eiLohf*u1sao ave&aqui8Hie oc-a@z'oh1Le
iv$eeX0eo0Wu rel7aGh6gee& baig3ooN%uz, eoj9eGo.haih Aoka4Uizae:r aiG6aiP.iera
IaY?oo0Aibai pekaeth5Aeh% taav*eiK5Soo zohL5haeng?o teT^u3yash3S xudoh%Dai4ph
tho`R\ahd7ae ohf#e9Ceeph7 Uce7ou{woe8o eeb9jo!Y#aep la7Voo.chae7 te;y5Choo4ie
neeZ5out'oo) ze{iw4Aethok fah3Shoh^Re9 Quoo8au%koot xo2chu>Lae0e Shee#g1eibak
que5Og3aiN&e aw(eetooJ5Ei aeV8ging(eib ohGh9Chah[ch ieYiv5gagh-a kahm2yohR%uo
Eiraivi!o}W0 eo0Oot{ai5sh saT[ae2ahj5O Aefae,l5ieth jo0iJ,ai5eih deer9Aigol'i
aet1Ce,za+fi OFi3exoh)ng3 tae7ooGhaim/ nei$V8Ohh!ae eiy~ia4Itoh; Baisish+ai5d
iib+ooHaoj4t Ayac3aiCh>ee ka/eChoosh2c vanu1Zeex#uy phieB(ai8iev Ou|Gh3zuwo,f
ool3AxiNo~ch zai3Eew&ie*w Zee7eey4eJ*o kooree9Va>B5 FaiB-ah8yahK oha4uP3Oth<o
Aegah2aesh.u eiQuuduu>v1M ae5re8yaXuw% gei5rua1Lu/i eeNg3uyaf"ei Ootee|h8Shai
sa6ed0nieF+e aed8rah;Kai4 boghahH]a7ei eiba$Roh5uu' Ook6oonae`th Vai9taer#oo?
aich7ohMoi/d Ohh1ew-aa"xi Eig%ae]jo2ne urooX1iagh|u iiY8reew,i8d eGhee4fahw(a
ieS%ai1ieh4e pun9Ich0jee; Waer_ai1ieph re)Che`xud0A Aek2wioh\a2u deedae0Ai[be
ohr!a4Ohtae* keNai8aes%oh ookiM3uiRei~ fei-Boo2tu3i coo=c4Yie?w8 ThaiN7fe$o"t
ahw[uChae3va Ej5Evaa&Giix seat|eeZ1yae ee5wiengo]Ba Oo2aThu^p!ai ez{i4too8ohD 
```

# android - Android模拟器不显示输出

> ID：15711640
> 
> 赞同：1
> 
> 时间：2013-03-29T21:26:00.823
> 
> 标签：android, android-emulator

我是新来的，只是使用一些基本的 Android 代码。我的问题是运行代码时 Android Emulator 没有显示任何输出。这需要很长时间，在控制台上它会粘在这里

```
 [2013-03-31 03:17:55 - Helloworld] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.helloworld/.MainActivity } 
```

模拟器看起来像这样

![在此处输入图像描述](../Images/8aba5d2d4a1364421c5a7ec13d51b68c.png)

我已经等了 5-10 分钟，但它没有显示输出。请指导我可能出现的问题。我按照官方网站中的说明下载`sdk ADT Bundle for Windows`并配置了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T01:21:49.043

我刚刚遇到了类似的问题，在我的情况下，我忘记在 AndroidManifest.xml 文件中添加活动。

以下是我的清单文件，例如...

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testalarm"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10" />

    <uses-permission android:name="com.android.alarm.permission.SET_ALARM" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.testalarm.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.testalarm.CheckpointActivity" >
            <intent-filter>
                <action android:name="com.example.testalarm.CheckpointActivity" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

检查您是否在 <application> 下将所有必需的活动作为 <activity>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:29:12.827

在 Eclipse 中，尝试：Window -> Show View -> Other -> Android/Devices

从新添加的设备窗口中选择模拟器，然后检查您的 logcat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:31:08.717

我会尝试进行一些调试，并在应用程序主要活动的第一行代码上设置一个断点。然后我会穿过去看看它在哪里断裂。

# mysql - 从单元格中提取特定数据，MYSQL

> ID：15711642
> 
> 赞同：0
> 
> 时间：2013-03-29T21:26:12.143
> 
> 标签：mysql

好的，我有一个表名 ORDERS，并且我在 orders 表中有一个名为 OrderedItems 的列

在订购的项目中，数据如下面的示例所示

```
Flavor Name (10ml, 0mg nic)
Flavor Name (15ml, 12mg nic)
Flavor Name (15ml with Flavor Boost, 12mg nic)
Flavor Name (30ml, 24mg nic)
Flavor Name (30ml with Flavor Boost, 24mg nic) 
```

我希望能够提取下面的项目并将它们放在一个视图中，每个视图都有自己的列，具有风味名称 10/15/30ml 等... 0/12/24mg 等...

我不是最好的写作查询，但如果有人能指出我正确的方向，我也许可以完成它。

有什么建议么？我需要在excel或类似的东西中这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:37:51.057

你想做这样的事情吗？

```
select orderId,
       sum(case when flavor_name like 'Chocolate%' then 1 else 0 end) as ChocolateCnt,
       sum(case when flavor_name like 'Vanilla%' then 1 else 0 end) as VanillaCnt,
       sum(case when flavor_name like 'Rocky Road%' then 1 else 0 end) as RockyRoadCnt
from orders o
group by orderId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:47:05.277

假设您的格式对于***所有***口味都是相同的......

```
SELECT Substring_index(flavor, ' (', 1)                        AS flavorName, 
       Substring(flavor, Locate('(', flavor) + 1, 
       ( Locate('ml', flavor) + 1 ) - Locate('(', flavor))     AS volumne, 
       Substring(flavor, Locate(', ', flavor) + 2, 
       Locate(' nic)', flavor) - ( Locate(', ', flavor) + 2 )) AS dose 
FROM   flavors 
```

**结果**

```
| 风味名称 | 卷 | 剂量 |
--------------------------------
| 口味名称 | 10ml | 0mg |
| 口味名称 | 15毫升 | 12毫克|
| 口味名称 | 15毫升 | 12毫克|
| Flavor Name |    30ml | 24mg |
| Flavor Name |    30ml | 24mg |
```

[See the demo](http://sqlfiddle.com/#!2/526f6/5)

# iphone - 如何从 UITableViewCell 获取 UITableView？

> ID：15711645
> 
> 赞同：102
> 
> 时间：2013-03-29T21:26:31.590
> 
> 标签：iphone, ios, objective-c, xcode, tableview

我有一个`UITableViewCell`链接到一个对象的，我需要判断单元格是否可见。根据我所做的研究，这意味着我需要以某种方式访问`UITableView`​​包含它的内容（从那里，有几种方法可以检查它是否可见）。所以我想知道是否`UITableViewCell`有指向 的指针`UITableView`，或者是否有任何其他方法可以从单元格中获取指针？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-09-13T06:59:52.263

为了避免检查 iOS 版本，从单元格的视图迭代地向上遍历超级视图，直到找到 UITableView：

**Objective-C**

```
id view = [cellInstance superview];

while (view && [view isKindOfClass:[UITableView class]] == NO) {
    view = [view superview]; 
}

UITableView *tableView = (UITableView *)view; 
```

**迅速**

```
var view = cellInstance.superview
while (view != nil && (view as? UITableView) == nil) {
  view = view?.superview
}

if let tableView = view as? UITableView {
   tableView.beginUpdates()
   tableView.endUpdates()
} 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-23T16:53:29.633

在 iOS7 beta 5`UITableViewWrapperView`中是一个`UITableViewCell`. **也是`UITableView`a的superview `UITableViewWrapperView`。**

所以对于iOS 7，解决方案是

`UITableView *tableView = (UITableView *)cell.superview.superview;`

所以对于 iOS 到 iOS 6 的解决方案是

`UITableView *tableView = (UITableView *)cell.superview;`

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2017-01-29T11:24:55.643

## 斯威夫特 5 扩展

### 递归

```
extension UIView {
    func parentView<T: UIView>(of type: T.Type) -> T? {
        guard let view = superview else {
            return nil
        } 
        return (view as? T) ?? view.parentView(of: T.self)
    }
}

extension UITableViewCell {
    var tableView: UITableView? {
        return parentView(of: UITableView.self)
    }
} 
```

### 使用循环

```
extension UITableViewCell {
    var tableView: UITableView? {
        var view = superview
        while let v = view, v.isKind(of: UITableView.self) == false {
            view = v.superview
        }
        return view as? UITableView
    }
} 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-09-15T14:33:53.693

在 iOS7 之前，cell 的 superview 是`UITableView`包含它的。从 iOS7 GM 开始（大概也将在公开版本中），单元格的超级视图是 a `UITableViewWrapperView`，其超级视图是`UITableView`. 该问题有两种解决方案。

## 解决方案 #1：创建一个`UITableViewCell`类别

```
@implementation UITableViewCell (RelatedTable)

- (UITableView *)relatedTable
{
    if ([self.superview isKindOfClass:[UITableView class]])
        return (UITableView *)self.superview;
    else if ([self.superview.superview isKindOfClass:[UITableView class]])
        return (UITableView *)self.superview.superview;
    else
    {
        NSAssert(NO, @"UITableView shall always be found.");
        return nil;
    }

}
@end 
```

这是一个很好的替代 using `cell.superview`，可以轻松重构现有代码 - 只需搜索和替换 with `[cell relatedTable]`，并输入一个断言以确保如果视图层次结构在未来发生更改或恢复，它将立即显示在你的测试中。

## 解决方案#2：添加一个弱`UITableView`引用`UITableViewCell`

```
@interface SOUITableViewCell

   @property (weak, nonatomic) UITableView *tableView;

@end 
```

这是一个更好的设计，尽管它需要更多的代码重构才能在现有项目中使用。在您`tableView:cellForRowAtIndexPath`使用 SOUITableViewCell 作为您的单元格类或确保您的自定义单元格类从子类`SOUITableViewCell`化并将 tableView 分配给单元格的 tableView 属性。在单元格内，您可以使用`self.tableView`.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-29T21:32:08.223

如果它是可见的，那么它有一个超级视图。而且......惊喜......超级视图是一个 UITableView 对象。

但是，拥有超级视图并不能保证出现在屏幕上。但是 UITableView 提供了确定哪些单元格可见的方法。

不，没有从单元格到表格的专用引用。但是当你继承 UITableViewCell 时，你可以引入一个并在创建时设置它。（在我想到子视图层次结构之前，我自己做了很多。）

**iOS7 更新：** Apple 在此处更改了子视图层次结构。像往常一样，在处理没有详细记录的事情时，总是存在事情发生变化的风险。在最终找到 UITableView 对象之前，“爬上”视图层次结构要省事得多。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-03-29T22:43:35.310

无论您最终通过调用超级视图或通过响应者链设法完成的工作都将非常脆弱。做到这一点的最好方法，如果细胞想知道一些事情，就是将一个对象传递给细胞，该对象响应某种方法来回答细胞想问的问题，并让控制器实现确定要回答什么的逻辑（从你的问题我猜细胞想知道某些东西是否可见）。

在单元格中创建一个委托协议，将单元格的委托设置为 tableViewController 并将所有 ui“控制”逻辑移动到 tableViewCotroller 中。

表格视图单元格应该是只显示信息的虚拟视图。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-08-10T14:58:35.073

斯威夫特 2.2 解决方案。

UIView 的扩展，它递归地搜索具有特定类型的视图。

```
import UIKit

extension UIView {
    func lookForSuperviewOfType<T: UIView>(type: T.Type) -> T? {
        guard let view = self.superview as? T else {
            return self.superview?.lookForSuperviewOfType(type)
        }
        return view
    }
} 
```

或更紧凑（感谢 kabiroberai）：

```
import UIKit

extension UIView {
    func lookForSuperviewOfType<T: UIView>(type: T.Type) -> T? {
        return superview as? T ?? superview?.superviewOfType(type)
    }
} 
```

在您的牢房中，您只需将其称为：

```
let tableView = self.lookForSuperviewOfType(UITableView)
// Here we go 
```

请注意 UITableViewCell 仅在 cellForRowAtIndexPath 执行后才添加到 UITableView 上。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-09-28T00:47:28.793

我在 UITableViewCell 上创建了一个类别来获取其父 tableView：

```
@implementation UITableViewCell (ParentTableView)

- (UITableView *)parentTableView {
    UITableView *tableView = nil;
    UIView *view = self;
    while(view != nil) {
        if([view isKindOfClass:[UITableView class]]) {
            tableView = (UITableView *)view;
            break;
        }
        view = [view superview];
    }
    return tableView;
}

@end 
```

最好的，

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-04-17T08:30:32.280

这是基于上述答案的**Swift版本。**我已经概括`ExtendedCell`为以后使用。

```
import Foundation
import UIKit

class ExtendedCell: UITableViewCell {

    weak var _tableView: UITableView!

    func rowIndex() -> Int {
        if _tableView == nil {
            _tableView = tableView()
        }

        return _tableView.indexPathForSelectedRow!.row
    }

    func tableView() -> UITableView! {
        if _tableView != nil {
            return _tableView
        }

        var view = self.superview
        while view != nil && !(view?.isKindOfClass(UITableView))! {
            view = view?.superview
        }

        self._tableView = view as! UITableView
        return _tableView
    }
} 
```

希望这有帮助:)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-08-22T03:42:13.090

我基于 Gabe 的建议`UITableViewWrapperView`object is the superview of `UITableViewCell`object in iOS7 beta5 这个解决方案。

子类`UITableviewCell`：

```
- (UITableView *)superTableView
{
    return (UITableView *)[self findTableView:self];
}

- (UIView *)findTableView:(UIView *)view
{
    if (view.superview && [view.superview isKindOfClass:[UITableView class]]) {
        return view.superview;
    }
    return [self findTableView:view.superview];
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-07-29T06:58:37.517

我从上面的答案中借用和修改了一点，并提出了以下片段。

```
- (id)recursivelyFindSuperViewWithClass:(Class)clazz fromView:(id)containedView {
    id containingView = [containedView superview];
    while (containingView && ![containingView isKindOfClass:[clazz class]]) {
        containingView = [containingView superview];
    }
    return containingView;
} 
```

传入类提供了在某些其他情况下遍历和获取 UITableView 以外的视图的灵活性。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-08-18T20:17:34.880

我对这个问题的解决方案与其他解决方案有些相似，但使用了优雅的 for 循环并且很短。它也应该是面向未来的：

```
- (UITableView *)tableView
{
    UIView *view;
    for (view = self.superview; ![view isKindOfClass:UITableView.class]; view = view.superview);
    return (UITableView *)view;
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-07-01T08:27:41.243

```
UITableView *tv = (UITableView *) self.superview.superview;
BuyListController *vc = (BuyListController *) tv.dataSource; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-12-09T18:52:15.923

尝试使用 ["UItableViewvariable" visibleCells]，而不是 superview。

我在 foreach 循环中使用它来遍历应用程序看到的单元格并且它工作。

```
for (UITableView *v in [orderItemTableView visibleCells])//visibleCell is the fix.
{
  @try{
    [orderItemTableView reloadData];
    if ([v isKindOfClass:[UIView class]]) {
        ReviewOrderTableViewCell *cell = (ReviewOrderTableViewCell *)v;
        if (([[cell deleteRecord] intValue] == 1) || ([[[cell editQuantityText] text] intValue] == 0))
            //code here 
    }
  }
} 
```

奇迹般有效。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-11-09T20:49:30.073

最低限度的测试，但这个非通用 Swift 3 示例似乎有效：

```
extension UITableViewCell {
    func tableView() -> UITableView? {
        var currentView: UIView = self
        while let superView = currentView.superview {
            if superView is UITableView {
                return (superView as! UITableView)
            }
            currentView = superView
        }
        return nil
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-04-02T07:49:23.273

此代码``UITableView *tblView=[cell superview];`将为您提供 UItableview 的实例，其中包含 tabe 视图单元

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-09-01T17:26:47.420

我建议你以这种方式遍历视图层次结构来找到父 UITableView：

```
- (UITableView *) findParentTableView:(UITableViewCell *) cell
{
    UIView *view = cell;
    while ( view && ![view isKindOfClass:[UITableView class]] )
    {
#ifdef DEBUG
        NSLog( @"%@", [[view  class ] description] );
#endif
        view = [view superview];
    }

    return ( (UITableView *) view );
} 
```

*否则，当 Apple再次*更改视图层次结构时，您的代码将中断。

[另一个](https://stackoverflow.com/a/18371308/878857)遍历层次结构的答案是递归的。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-05-28T08:27:32.007

```
UITableViewCell Internal View Hierarchy Change in iOS 7

Using iOS 6.1 SDK

    <UITableViewCell>
       | <UITableViewCellContentView>
       |    | <UILabel>

Using iOS 7 SDK

    <UITableViewCell>
       | <UITableViewCellScrollView>
       |    | <UIButton>
       |    |    | <UIImageView>
       |    | <UITableViewCellContentView>
       |    |    | <UILabel>

The new private UITableViewCellScrollView class is a subclass of UIScrollView and is what allows this interaction:

![enter image description here][1]

  [1]: http://i.stack.imgur.com/C2uJa.gif 
```

[http://www.curiousfind.com/blog/646](http://www.curiousfind.com/blog/646) 谢谢

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-06-13T07:36:35.593

你可以用一行代码得到它。

```
UITableView *tableView = (UITableView *)[[cell superview] superview]; 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-19T20:05:45.540

```
extension UIView {
    func parentTableView() -> UITableView? {
        var viewOrNil: UIView? = self
        while let view = viewOrNil {
            if let tableView = view as? UITableView {
                return tableView
            }
            viewOrNil = view.superview
        }
        return nil
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-01-04T09:37:49.233

from @idris answer I wrote an expansion for UITableViewCell in Swift

```
extension UITableViewCell {
func relatedTableView() -> UITableView? {
    var view = self.superview
    while view != nil && !(view is UITableView) {
        view = view?.superview
    }

    guard let tableView = view as? UITableView else { return nil }
    return tableView
} 
```

# ruby-on-rails - 如何在一张表中继承“二级”？

> ID：15711648
> 
> 赞同：0
> 
> 时间：2013-03-29T21:26:46.987
> 
> 标签：ruby-on-rails, sqlite, single-table-inheritance

我有一个类`Resource0`和一个类`Resource1`，该类继承自一个类`ResourceContainer1`，该类继承自一个类`Resource`。

我的类*Resource*的模型如下所示：

```
class Resource < ActiveRecord::Base
  attr_accessible :type
end

class ResourceContainer0 < Resource
end

class ResourceContainer1 < Resource
end

class Resource0 < ResourceContainer1
end

class Resource1 < ResourceContainer1
end 
```

在迁移中，我的类*Resource*看起来像这样：

```
class CreateResources < ActiveRecord::Migration
  def change
    create_table :resources do |t|
      t.string :type #inheritance -> Resource

      t.timestamps
    end
  end
 end 
```

我想知道是否需要多个`:type`参数才能完成这项工作，甚至可能吗？

# java - Mule 是否为 Camel 路由提供热部署能力？

> ID：15711651
> 
> 赞同：0
> 
> 时间：2013-03-29T21:26:56.460
> 
> 标签：java, mule, esb, middleware, hotdeploy

我有一个 Camel-heavy Web 应用程序，它遭受长期发布的困扰，因为业务逻辑总是在变化，我们也在不断地添加/修改我们的路线。

我听到一位同事谈论 Mule ESB，它符合 Camel 标准，允许您热部署路由。仔细阅读 Mule 的网站/在线文档后，我没有看到任何提及这些内容，但它确实引起了我的注意。

我需要 Mule 允许我将现有的 Camel 路由转换为可部署的单元（如 JAR、WAR 等），然后允许我在添加或修改新业务逻辑时热部署或取消部署每个“路由 JAR”。骡子是这样做的，还是我的同事是个小丑？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:52:12.483

一般来说，如果您想从 Mule 应用程序热重新部署能力中受益，将您的 Camel 路由转换为 Mule 流会更有意义。

无论如何，假设您可以将您的 Camel 路由打包为 Mule 应用程序（我不知道您将如何做到这一点），如果您要在 Mule Standalone 服务器中运行包含它们的 Mule 应用程序，您就可以热重新部署这些路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:05:09.090

Apache ServiceMix / Apache Karaf / Fuse ESB 都提供 Camel 应用程序的热部署。您可能还想看看那个。然后，您无需将任何 Camel 路由/代码迁移到全新的服务器。

*   [http://servicemix.apache.org/](http://servicemix.apache.org/)
*   [http://karaf.apache.org/](http://karaf.apache.org/)
*   [http://fusesource.com/products/fuse-esb-enterprise/](http://fusesource.com/products/fuse-esb-enterprise/)

# jquery - 两个滑块（范围）

> ID：15711659
> 
> 赞同：-1
> 
> 时间：2013-03-29T21:27:26.313
> 
> 标签：jquery, html, slider, range

我想在我的页面上创建一个贷款计算器。所以我需要两个滑块，一个是“你想借多少钱”，第二个是“多长时间”。并结合他们的输出。某事喜欢（多少）+（多长时间）并将其打印为单独的输出。我想我已经尝试了一切......最好的解决方案似乎是jQuery，但我被困在那里......拜托，有没有办法做到这一点？谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:29:22.053

为此，我过去使用过 jQuery UI ( [http://jqueryui.com/slider/](http://jqueryui.com/slider/) )。您可以将它们放在页面上，然后编写一个简单的脚本来打印出两个输入。

如果您想访问该页面上滑块的值，只需在脚本中键入`$('#slider').val()`即可获取该值。如果您想在他们移动滑块时更新输出，只需编写类似

```
<script>
$('#slider').change( function () { 
    $('#sliderDisplay').html( $('#slider').val());
});
</script> 
```

# php - 计数值只为每行抓取 1

> ID：15711660
> 
> 赞同：2
> 
> 时间：2013-03-29T21:27:29.353
> 
> 标签：php, sql, count, group-by

我正在为和我一起打球的人制作一个关于高尔夫的统计页面。我试图从数据库中提取我们收到小鸟的所有记分卡的次数（低于标准杆 -1）。它确实在每个洞拉出了-1，但是我注意到如果你在记分卡上有 2 只小鸟，它仍然只算作 1 只小鸟而不是 2 只。我希望它继续计数，所以如果有人得到 9 只小鸟，那些总共增加了 9 个。

```
$query_p321 = "SELECT t1.*,COUNT(t1.player_id),t2.* FROM scorecards t1 LEFT JOIN courses t2 ON t1.course_id=t2.course_id 
WHERE t1.hole1<t2.hole1_par AND t1.hole1>t2.hole1_par-2
     OR t1.hole2<t2.hole2_par AND t1.hole2>t2.hole2_par-2
     OR t1.hole3<t2.hole3_par AND t1.hole3>t2.hole3_par-2
     OR t1.hole4<t2.hole4_par AND t1.hole4>t2.hole4_par-2
     OR t1.hole5<t2.hole5_par AND t1.hole5>t2.hole5_par-2
     OR t1.hole6<t2.hole6_par AND t1.hole6>t2.hole6_par-2
     OR t1.hole7<t2.hole7_par AND t1.hole7>t2.hole7_par-2
     OR t1.hole8<t2.hole8_par AND t1.hole8>t2.hole8_par-2
     OR t1.hole9<t2.hole9_par AND t1.hole9>t2.hole9_par-2
     OR t1.hole10<t2.hole10_par AND t1.hole10>t2.hole10_par-2
     OR t1.hole11<t2.hole11_par AND t1.hole11>t2.hole11_par-2
     OR t1.hole12<t2.hole12_par AND t1.hole12>t2.hole12_par-2
     OR t1.hole13<t2.hole13_par AND t1.hole13>t2.hole13_par-2
     OR t1.hole14<t2.hole14_par AND t1.hole14>t2.hole14_par-2
     OR t1.hole15<t2.hole15_par AND t1.hole15>t2.hole15_par-2
     OR t1.hole16<t2.hole16_par AND t1.hole16>t2.hole16_par-2
     OR t1.hole17<t2.hole17_par AND t1.hole17>t2.hole17_par-2
     OR t1.hole18<t2.hole18_par AND t1.hole18>t2.hole18_par-2
GROUP BY t1.player_id ORDER BY count(t1.player_id) DESC";
$result_p321 = mysql_query($query_p321);
$number = 1;
while ($row_p321 = mysql_fetch_array($result_p321)) {
    $player_id2 = $row_p321["player_id"];
    } 
and so on.. 
```

你会注意到那里的“-2”。那是标准杆负 2，因为我不想记录这个人是否低于 2 杆。只差一杆。任何帮助表示赞赏。谢谢你。哦，另外，需要使用 GROUP BY，因为我不想多次列出玩家姓名。只是想让它计算所有的小鸟。我想我的大问题是每行不超过 1 个。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:44:20.697

问题是`where`条款。您需要在`select`子句中进行比较才能计算它们：

```
SELECT t1.*,
       sum((t1.hole1 = t2.hole1_par - 1) +
           (t1.hole2 = t2.hole2_par - 1) +
           . . .
           (t1.hole18 = t2.hole18_par - 1)
          ) as birdies
FROM scorecards t1 LEFT JOIN
     courses t2 ON t1.course_id=t2.course_id
GROUP BY t1.player_id
ORDER BY birdies DESC 
```

这使用了 MySQL 约定，即 true 为 1，false 0 将数字相加。使用标准 SQL 的另一种表述是：

```
 sum((case when t1.hole1 = t2.hole1_par - 1) then 1 else 0 end) + 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:42:48.740

尝试这样的事情：

```
SELECT t1.*, SUM( IF(t1.hole1 = t2.hole1_par-1,1,0) +
        IF(t1.hole2 = t2.hole2_par-1,1,0) +
        IF(t1.hole3 = t2.hole3_par-1,1,0) +
        IF(t1.hole4 = t2.hole4_par-1,1,0) +
       -- etc.
        IF(t1.hole18 = t2.hole18_par-1,1,0) ) AS birdies
FROM scorecards t1
LEFT JOIN courses t2 ON t1.course_id=t2.course_id
GROUP BY t1.player_id
ORDER BY birdies DESC 
```

# mysql - MySQL查询两个表，匹配两列

> ID：15711667
> 
> 赞同：0
> 
> 时间：2013-03-29T21:27:46.047
> 
> 标签：mysql

我有两个表 - 模块表和学生表。我将向查询传递一个值，并且需要从两个表中检索数据，其中传递的值与 moduletable.moduleNo 和 studenttable.moduleNo1 或 moduletable.moduleNo 和 studenttable.moduleNo2 匹配。

任何人都可以给我一个关于正确的 MySQL 语法的指针吗？我尝试了一个例子：

`function getStudents($id) { $sql = "select s.studentID, s.firstName, s.lastName, s.moduleNo1, s.moduleNo2, m.moduleNo from studenttable s, moduletable m where m.moduleNo=:id AND s.moduleNo1=:id OR s.moduleNo2=:id";`

但我得到的结果不正确。任何帮助表示赞赏！

两个表的 SQL DDL 是：

```
CREATE TABLE `moduleTable` (

  `moduleNo` int(6) NOT NULL,
  `moduleName` varchar(30) NOT NULL,
  `credits` int(2) NOT NULL,
  `website` varchar(30) NOT NULL,
  `dueDate` date NOT NULL,
  `location` varchar(25) NOT NULL,
  `room` varchar(10) NOT NULL,
  `lat` varchar(20) NOT NULL,
  `long` varchar(20) NOT NULL,
  PRIMARY KEY (`moduleNo`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='This table contains all module records for the example database.'; 
```

--

## -- 为表转储数据`moduleTable`

```
INSERT INTO `moduleTable` VALUES(999001, 'Dynamic Web Development', 15, 'www.dynWeb.ie', '2013-05-14', 'Aungier Street', '4037', '53.338545', '-6.26607');
INSERT INTO `moduleTable` VALUES(999002, 'Human Computer Interaction', 10, 'www.hci.ie', '2013-04-09', 'Aungier Street', '2005', '53.338545', '-6.26607');
INSERT INTO `moduleTable` VALUES(999003, 'Introduction to Programming', 15, 'www.jscriptIntro.ie', '2013-01-11', 'Kevin Street', '1045', '53.337015', '-6.267933');
INSERT INTO `moduleTable` VALUES(999004, 'Design Principles', 15, 'www.designIntro.ie', '2013-04-25', 'Bolton Street', '0130', '53.351406', '-6.268724');
INSERT INTO `moduleTable` VALUES(999005, 'Design Practice', 10, 'www.designPract.ie', '2013-01-11', 'Cathal Brugha Street', '0123', '53.352044', '-6.259514');
INSERT INTO `moduleTable` VALUES(999006, 'Digital Audio', 10, 'www.dspAudio.com', '2013-05-10', 'Aungier Street', '3025', '53.338545', '-6.26607');
INSERT INTO `moduleTable` VALUES(999007, 'Digital Signal Processing', 10, 'www.dspGeneral.ie', '2013-04-04', 'Kevin Street', '2103', '53.337015', '-6.267933');
INSERT INTO `moduleTable` VALUES(999008, 'History of Digital Media', 5, 'www.itsbeendone.ie', '2013-03-28', 'Aungier Street', '0120', '53.338545', '-6.26607');
INSERT INTO `moduleTable` VALUES(999009, 'Digital Asset Management', 5, 'www.contentStore.ie', '2013-05-30', 'Bolton Street', '1004', '53.351406', '-6.268724');
INSERT INTO `moduleTable` VALUES(999010, 'Production Skills', 10, 'www.webDevPro.ie', '2013-04-02', 'Aungier Street', '1089', '53.338545', '-6.26607'); 
```

* * *

--

## -- 表的表结构`studentTable`

```
CREATE TABLE `studentTable` (
  `studentID` int(6) NOT NULL,
  `firstName` varchar(10) NOT NULL,
  `lastName` varchar(15) NOT NULL,
  `moduleNo1` int(6) NOT NULL,
  `moduleNo2` int(6) NOT NULL,
  `courseID` int(6) NOT NULL,
  PRIMARY KEY (`studentID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='This table contains all student records for the example database.'; 
```

--

## -- 为表转储数据`studentTable`

```
INSERT INTO `studentTable` VALUES(123, 'Kermit', 'Frog', 999003, 999008, 888001);
INSERT INTO `studentTable` VALUES(124, 'Gonzo', 'Great', 999001, 999009, 888001);
INSERT INTO `studentTable` VALUES(125, 'Cookie', 'Monster', 999004, 999005, 888002);
INSERT INTO `studentTable` VALUES(126, 'Fozzie', 'Bear', 999006, 999010, 888001);
INSERT INTO `studentTable` VALUES(127, 'Bunsen', 'Honeydew', 999007, 999009, 888003);
INSERT INTO `studentTable` VALUES(128, 'Miss', 'Piggy', 999002, 999003, 888003);
INSERT INTO `studentTable` VALUES(129, 'Gobo', 'Fraggle', 999008, 999010, 888002);
INSERT INTO `studentTable` VALUES(130, 'Mokey', 'Fraggle', 999002, 999005, 888001);
INSERT INTO `studentTable` VALUES(131, 'Red', 'Fraggle', 999006, 999008, 888003);
INSERT INTO `studentTable` VALUES(132, 'Wembley', 'Fraggle', 999004, 999007, 888003);
INSERT INTO `studentTable` VALUES(133, 'Travelling', 'Matt', 999002, 999003, 888002);
INSERT INTO `studentTable` VALUES(134, 'Convincing', 'John', 999004, 999008, 888001);
INSERT INTO `studentTable` VALUES(135, 'Cotterpin', 'Doozer', 999008, 999009, 888002);
INSERT INTO `studentTable` VALUES(136, 'Judge', 'Dog', 999003, 999007, 888003);
INSERT INTO `studentTable` VALUES(137, 'Doctor', 'Astro', 999005, 999001, 888001);
INSERT INTO `studentTable` VALUES(138, 'Sneaky', 'Snake', 999006, 999008, 888002);
INSERT INTO `studentTable` VALUES(139, 'Sunni', 'Gummi', 999009, 999010, 888002);
INSERT INTO `studentTable` VALUES(140, 'Cubbi', 'Gummi', 999004, 999008, 888001);
INSERT INTO `studentTable` VALUES(141, 'Papa', 'Smurf', 999008, 999009, 888003);
INSERT INTO `studentTable` VALUES(142, 'Lazy', 'Smurf', 999001, 999002, 888001);
INSERT INTO `studentTable` VALUES(143, 'Vanity', 'Smurf', 999008, 999010, 888002);
INSERT INTO `studentTable` VALUES(144, 'Joe', 'Frasier', 999004, 999006, 888003);
INSERT INTO `studentTable` VALUES(145, 'Muhammad', 'Ali', 999003, 999005, 888002);
INSERT INTO `studentTable` VALUES(146, 'George', 'Foreman', 999002, 999003, 888001);
INSERT INTO `studentTable` VALUES(147, 'Larry', 'Holmes', 999001, 999002, 888001);
INSERT INTO `studentTable` VALUES(148, 'Marvin', 'Hagler', 999004, 999005, 888003);
INSERT INTO `studentTable` VALUES(149, 'John', 'Coltrane', 999002, 999006, 888002);
INSERT INTO `studentTable` VALUES(150, 'Sonny', 'Rawlins', 999009, 999010, 888002);
INSERT INTO `studentTable` VALUES(151, 'Coleman', 'Hawkins', 999006, 999007, 888003);
INSERT INTO `studentTable` VALUES(152, 'Wes', 'Montgomery', 999002, 999004, 888001);
INSERT INTO `studentTable` VALUES(153, 'Joe', 'Pass', 999006, 999009, 888001);
INSERT INTO `studentTable` VALUES(154, 'Charlie', 'Christian', 999008, 999010, 888002);
INSERT INTO `studentTable` VALUES(155, 'Stanley', 'Jordan', 999004, 999007, 888003);
INSERT INTO `studentTable` VALUES(156, 'Rory', 'Gallagher', 999006, 999009, 888003);
INSERT INTO `studentTable` VALUES(157, 'Gary', 'Moore', 999001, 999008, 888002);
INSERT INTO `studentTable` VALUES(158, 'Jimi', 'Hendrix', 999004, 999008, 888001);
INSERT INTO `studentTable` VALUES(159, 'Paco', 'Pena', 999005, 999009, 888003);
INSERT INTO `studentTable` VALUES(160, 'Andres', 'Segovia', 999003, 999007, 888003);
INSERT INTO `studentTable` VALUES(161, 'Bootsy', 'Collins', 999004, 999005, 888002);
INSERT INTO `studentTable` VALUES(162, 'George', 'Clinton', 999003, 999010, 888002); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:41:29.963

`AND`具有比`OR`SQL 更高的优先级，因此您需要括号：

```
$sql = "select s.studentID, s.firstName, s.lastName, s.moduleNo1, s.moduleNo2, m.moduleNo
        from studenttable s, moduletable m
        where m.moduleNo=:id AND (s.moduleNo1=:id OR s.moduleNo2=:id)"; 
```

# c - 令人费解的行为，malloc 和 free()，与 libuv

> ID：15711668
> 
> 赞同：0
> 
> 时间：2013-03-29T21:27:47.133
> 
> 标签：c, malloc, free, libuv

使用示例代码了解 libuv 我遇到了一个我不确定的副作用。该代码使用 malloc() 获取内存以存储来自网络上的客户端的数据，然后将相同的数据发送回，只是回显。然后它使用 free 释放内存。这通过回调循环一遍又一遍地重复。获取内存的代码行是：

```
uv_write_t *req = (uv_write_t *) malloc(sizeof(uv_write_t)); 
```

释放内存的行是：

```
free((char*) req->data);
free(req); 
```

但是，如果您输入一个长字符串，例如“街上的单词是什么？” 要回显，然后放入较短的字符串，例如旧字符串的“Hi”片段，在较短的字符串回显后将重新出现。例如输出可以是这样的：

街上说什么？嗨嗨你好，他在街上说的话？

由于内存正在被释放，我不确定为什么旧片段会重新出现。我对这个主题的想法是，要么我对 malloc 和 free() 有一些我不了解的地方，要么在库中存在一个错误，它决定了传入数据所需的大小以及在使用更长的字符串后我得到了垃圾作为太大的内存块的一部分。如果是这样的话，那么它是我之前输入的一个片段的事实只是偶然的。这是可能的原因，还是我错过了什么？有没有其他信息。我应该包括澄清吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:36:41.170

malloc() 的实现会有所不同，但可以安全地假设对 malloc() 的调用可以返回指向先前 free() 的内存块的指针，并且返回的内存不会被清零。换句话说，malloc() 给我们一个指向包含先前初始化数据的数据的指针是完全正常的。

也就是说，我怀疑这里的根本问题将是一个未终止的字符串，这可能是您序列化字符串方式的产物。例如，如果您只是从客户端写入 strlen(str) 字节，则不会写入 NULL。因此，当服务器接收到消息时，它将有一个未终止的字符串。如果这是您计划传递字符串的方式，并且您计划将其视为普通的以空字符结尾的字符串，则服务器将需要将数据复制到足够大的缓冲区以容纳字符串和额外的 NULL 字符。

那么为什么你会看到过去消息的片段呢？大概是运气不好。如果这是一个非常简单的应用程序，那么 malloc() 很有可能返回一块与前一个请求重叠的内存。

So then why am I getting such clean output, shouldn't I see tons of garbled data, or a segfault for my string operations walking off into infinity? Again, dumb luck. Keep in mind that when the kernel first gives your application a page of memory, it will have first zeroed-out page out (this is done for security reasons). So, even though you might not have terminated the string, the page of heap memory where your string resides *might* be sitting in a relatively pristine zeroed-out state.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-22T08:02:28.080

uv_write_t *req is *not* the data to be sent or received. It's just something like a handle to a write request.

Neither is req->data. That is a pointer to arbitrary private data for you. It might be used for example if you wanted to pass around some data related to the connection.

The actual payload data are sent through a write buffer (uv_buf_t) and received into a buffer that is allocated when a read request is served. That's why the read function wants an alloc parameter. Later that buffer is passed to the read callback.

The freeing of req->data assumes that 'data' pointed to some private data, typically a structure, that was malloc'd (by you).

As a rule of thumb, a socket is represented by a uv_xxx_t while reading and writing use 'request' structures. Writing a server (a typical uv use case) one doesn't know how many connections there will be, hence everything is allocated dynamically.

To make your life easier you might think in terms of pairs (open/close or start/done). So when accepting a new connection you start a cycle and allocate the client. When closing that connection you free it. When writing, you allocate the request as well as the payload data buffer. When done writing, you free them. When reading you allocate a read request and the payload data buffer is allocated behind the scene (through the alloc callback) when done reading (and having copied the payload data) you free them both.

There are ways to get the job done without all those malloc/free pairs (which aren't glourious performance wise) but for a novice I would agree with the uv docs; you should definitely start with the malloc/free route. To give you an idea: I pre-allocate everything for some ten or hundred thousand connections but that brings some administration and trickery with it, e.g. faking in the alloc call back to merely assign one of your pre-allocated buffers.

If asked to guess I'd suggest that avoiding malloc/free is only worth the trouble beyond well over 5k - 10k connections at any point in time.

# xml - 使用 Perl 解析 XML 文件时遇到问题

> ID：15711673
> 
> 赞同：1
> 
> 时间：2013-03-29T21:28:01.677
> 
> 标签：xml, perl, parsing, manifest

我正在尝试解析 Articulate eLearning 课程 (imsmanifest.xml) 的 XML 清单文件。

下面提供了 XML 结构的摘录（我正在尝试深入了解 adlcp:masteryscore）：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest xsi:schemaLocation="http://www.imsproject.org/xsd/imscp_rootv1p1p2 imscp_rootv1p1p2.xsd http://www.imsglobal.org/xsd/imsmd_rootv1p2p1 imsmd_rootv1p2p1.xsd http://www.adlnet.org/xsd/adlcp_rootv1p2 adlcp_rootv1p2.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" xmlns="http://www.imsproject.org/xsd/imscp_rootv1p1p2" version="1.0" identifier="Electrical_Design_Part_3">
    <metadata/>
    <organizations default="Electrical_Design_Part_3_ORG">
      <organization identifier="Electrical_Design_Part_3_ORG">
        <title>Electrical Design - Part 3</title>
        <item identifier="Electrical_Design_Part_3_SCO" identifierref="Articulate_Presenter_RES" isvisible="true">
          <title>Electrical Design - Part 3</title>
          <adlcp:masteryscore>65</adlcp:masteryscore>
        </item>
      </organization>
    </organizations>
    <resources/>
</manifest> 
```

我尝试过使用 XML::Simple 和 XML::LibXML。我可以让这些模块与更简单的 XML 文件一起正常工作，但不是我实际需要解析的清单文件。

以下代码显示了我尝试使用 XML::LibXML 深入到标题标签：

```
use XML::LibXML;
$filename = "imsmanifest.xml";
$parser = XML::LibXML->new();
$xmldoc = $parser->parse_file($filename);

for my $sample ($xmldoc->findnodes('/manifest/organizations/organization/item/title')) {
    for my $property ($sample->findnodes('./*')) {
        print $property->nodeName(), ": ", $property->textContent(), "\n";
    }
    print "\n"; 
}; 
```

如何处理 adlcp:masteryscore 标签中的冒号？每当我尝试使用它时，都会出现错误 - 但也许我做得不对。

有人可以告诉我深入了解 adlcp:masteryscore 的正确方法吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T23:01:21.113

您要求定位`manifest`在 null 命名空间中命名的元素，但您想要`manifest`在命名空间中`http://www.imsproject.org/xsd/imscp_rootv1p1p2`命名的元素。

修复：

```
use strict;
use warnings;

use XML::LibXML               qw( );
use XML::LibXML::XPathContext qw( );

my $xml_qfn = 'imsmanifest.xml';

my $parser = XML::LibXML->new( no_network => 1 );
my $doc = $parser->parse_file($xml_qfn);

my $xpc = XML::LibXML::XPathContext->new();
$xpc->registerNs( a => "http://www.adlnet.org/xsd/adlcp_rootv1p2" );
$xpc->registerNs( i => "http://www.imsproject.org/xsd/imscp_rootv1p1p2" );

for my $item ($xpc->findnodes('/i:manifest/i:organizations/i:organization/i:item', $doc)) {
    my $title   = $xpc->find('i:title/text()', $item);
    my $mastery = $xpc->find('a:masteryscore/text()', $item);
    print "$title: $mastery\n"; 
} 
```

`a`注意：在 XPath (和)中使用的前缀的实际选择`i`是任意的。您可以选择任何您想要的东西，就像编写 XML 文档一样。

注意：我添加`no_network => 1`了防止 libxml 在您每次解析 XML 文档时获取 DTD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:46:59.240

第一步，修复您的示例，使其格式正确 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:adlcp="http://www.adlnet.org/xsd/adlcp_rootv1p2" xmlns="http://www.imsproject.org/xsd/imscp_rootv1p1p2" xsi:schemaLocation="http://www.imsproject.org/xsd/imscp_rootv1p1p2 imscp_rootv1p1p2.xsd http://www.imsglobal.org/xsd/imsmd_rootv1p2p1 imsmd_rootv1p2p1.xsd http://www.adlnet.org/xsd/adlcp_rootv1p2 adlcp_rootv1p2.xsd" version="1.0" identifier="Electrical_Design_Part_3">
    <metadata>
    <organizations default="Electrical_Design_Part_3_ORG">
      <organization identifier="Electrical_Design_Part_3_ORG">
        <title>Electrical Design - Part 3</title>
        <item identifier="Electrical_Design_Part_3_SCO" identifierref="Articulate_Presenter_RES" isvisible="true">
          <title>Electrical Design - Part 3</title>
          <adlcp:masteryscore>65</adlcp:masteryscore>
        </item>
      </organization>
    </organizations>
    <resources/>
</metadata>
</manifest> 
```

启动 perl 调试器

```
DB<2> use XML::Simple

  DB<3> $x=XMLin("example.xml")

  DB<4> x $x
0  HASH(0x2733c48)
   'identifier' => 'Electrical_Design_Part_3'
   'metadata' => HASH(0x2733828)
      'organizations' => HASH(0x2733288)
         'default' => 'Electrical_Design_Part_3_ORG'
         'organization' => HASH(0x272d7e8)
            'identifier' => 'Electrical_Design_Part_3_ORG'
            'item' => HASH(0x27285f8)
               'adlcp:masteryscore' => 65
               'identifier' => 'Electrical_Design_Part_3_SCO'
               'identifierref' => 'Articulate_Presenter_RES'
               'isvisible' => 'true'
               'title' => 'Electrical Design - Part 3'
            'title' => 'Electrical Design - Part 3'
      'resources' => HASH(0x27333d8)
           empty hash
   'version' => 1.0
   'xmlns' => 'http://www.imsproject.org/xsd/imscp_rootv1p1p2'
   'xmlns:adlcp' => 'http://www.adlnet.org/xsd/adlcp_rootv1p2'
   'xmlns:xsi' => 'http://www.w3.org/2001/XMLSchema-instance'
   'xsi:schemaLocation' => 'http://www.imsproject.org/xsd/imscp_rootv1p1p2 imscp_rootv1p1p2.xsd http://www.imsglobal.org/xsd/imsmd_rootv1p2p1 imsmd_rootv1p2p1.xsd http://www.adlnet.org/xsd/adlcp_rootv1p2 adlcp_rootv1p2.xsd'

  DB<6> x keys %$x
0  'xmlns'
1  'xmlns:xsi'
2  'identifier'
3  'version'
4  'metadata'
5  'xsi:schemaLocation'
6  'xmlns:adlcp'
  DB<9> x keys %{$x->{metadata}}
0  'resources'
1  'organizations'
  DB<10> x keys %{$x->{metadata}{organizations}}
0  'default'
1  'organization'
  DB<11> x keys %{$x->{metadata}{organizations}{organizations}
Missing right curly or square bracket at (eval 22)[/usr/share/perl/5.14/perl5db.pl:640] line 4, at end of line
syntax error at (eval 22)[/usr/share/perl/5.14/perl5db.pl:640] line 4, at EOF
  DB<12> x keys %{$x->{metadata}{organizations}{organizations}}
  empty array
  DB<13> x keys %{$x->{metadata}{organizations}{organization}}
0  'identifier'
1  'item'
2  'title'
  DB<14> x keys %{$x->{metadata}{organizations}{organization}{item}}
0  'identifier'
1  'identifierref'
2  'isvisible'
3  'title'
4  'adlcp:masteryscore'
  DB<19> x $x->{metadata}{organizations}{organization}{item}{'adlcp:masteryscore'}
0  65
  DB<20> 
```

所以你所要做的就是

```
use XML::Simple;
$x=XMLIN("example.xml");
print $x->{metadata}{organizations}{organization}{item}{'adlcp:masteryscore'}; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:47:44.260

xml 无效，您需要关闭标签元数据和资源

之后 XML::Simple 将使用此代码

```
#!/usr/bin/env perl 

use strict;
use warnings;
use XML::Simple;
use Data::Dumper;

use XML::Simple qw(:strict);

my $ref = XMLin('test.xml',ForceArray => [], KeyAttr => {});
print STDERR Dumper $ref; 
```

# python - 在数据库更新时触发 Django 模块

> ID：15711677
> 
> 赞同：1
> 
> 时间：2013-03-29T21:28:12.920
> 
> 标签：python, database, django, sqlite, triggers

我想开发一个应用程序来监视数据库中的新记录，并允许我在插入新记录时在我的 Django 应用程序的上下文中执行一个方法。

我计划使用一种方法，其中 Celery 任务检查数据库自上次检查以来的更改并触发上述方法。

有没有更好的方法来实现这一目标？

我使用 SQLite 作为后端并尝试了 apsw 的 setupdatehook API，但它似乎没有在 Django 上下文中运行我的模块。

注意：更新是由 Django 之外的不同应用程序进行的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:24:14.570

Create a celery task to do whatever it is you need to do with the object:

**tasks.py**

```
from celery.decorators import task

@task()
def foo(object):
    object.do_some_calculation() 
```

Then create a [django signal](https://docs.djangoproject.com/en/dev/topics/signals/) that is fired every time an instance of your Model is saved , queuing up your task in Celery:

**models.py**

```
class MyModel(models.Model):
    ...

from django.db.models.signals import post_save
from django.dispatch import receiver
from mymodel import tasks

@receiver(post_save, sender=MyModel)
def queue_task(sender, instance, created, **kwargs):
    tasks.foo.delay(object=instance) 
```

What's important to note that is django's signals are synchronous, in other words the `queue_task` function runs within the request cycle, but all the `queue_task` function is doing is telling Celery to handle the actual guts of the work (`do_some_calculation`) in theb background

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:23:57.137

A better way would be to have that application that modifies the records call yours. Or at least make a celery queue entry so that you don't really have to query the database too often to see if something changed.

But if that is not an option, letting celery query the database to find if something changed is probably the next best option. (surely better than the other possible option of calling a web service from the database as a trigger, which you should really avoid.)

# build - 构建 gcc-4.8

> ID：15711681
> 
> 赞同：2
> 
> 时间：2013-03-29T21:28:38.233
> 
> 标签：build, gcc4.8

我正在尝试在 64 位 Fedora 17 服务器上编译 gcc/g++ 4.8。我正在配置构建过程

```
./configure --prefix=/opt/gcc-4.8 --with-cpu=x86-64 --enable-languages=c,c++ --disable-multiarch 
```

然后我运行make。构建块会持续一段时间，然后在找不到 crti.o 时失败。我注意到失败之前的编译步骤使用 -m32 选项，这意味着正在为 32 位架构执行编译。当我搜索 crti.o 时，我在 /usr/lib64 路径中找到它，而不是在 /usr/lib 路径中，它通常用于 32 位。我只想编译 64 位，这就是为什么我在配置中包含了 with-cpu 参数。显然，这还不够。

我需要在配置中包含哪些参数，以便仅对源代码进行 64 位编译，并且仅链接 64 位系统库和类似文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:59:55.603

我也在使用 64 位 fc17 并拥有 crti.o：

```
$ locate crti.o
/usr/lib/crti.o
/usr/lib64/crti.o
$ rpm -qf /usr/lib/crti.o
glibc-devel-2.15-58.fc17.i686
$ rpm -qf  /usr/lib64/crti.o
glibc-devel-2.15-58.fc17.x86_64 
```

尝试显式安装 32 位版本的 glibc-devel：

```
yum install glibc-devel.i686 
```

# windows - Bitvise SSH Server 如何在没有密码的情况下对用户进行身份验证？

> ID：15711683
> 
> 赞同：3
> 
> 时间：2013-03-29T21:28:44.417
> 
> 标签：windows, winapi, authentication

从 5.50 版开始，Bitvise SSH 服务器允许连接的客户端对 Windows 用户帐户进行身份验证，而无需提供该用户的 Windows 密码。见这里：[https ://www.bitvise.com/ssh-server-version-history](https://www.bitvise.com/ssh-server-version-history)

我自己检查过——确实如此。

我的问题纯粹是出于好奇：这是什么魔法？是否有任何允许此类事情的 WinAPI 或者这是某种巧妙的 hack？我一直认为没有密码就不可能冒充其他用户（因为即使将 Windows 服务或计划任务配置为“以用户身份运行”也需要提供一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:45:57.633

IIRC，Cygwin 中的 SSH 服务器做同样的事情。

如果您有适当的权限，您可以使用 ZwCreateToken 创建访问令牌，无需密码。这样的令牌有一些限制。例如，您无法在没有密码的情况下访问网络资源，并且无法访问[某些加密材料](http://support.microsoft.com/kb/290260)。

这里有一个解释和[一些示例代码](http://www.codeproject.com/Articles/6443/GUI-Based-RunAsEx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:42:56.967

从 5.50 版本开始，Bitvise SSH Server 带有一个 Windows 身份验证包。身份验证包可以以自定义方式增强 Windows 登录过程。当 SSH 服务器需要您登录，但没有密码（例如，因为您使用公钥登录）时，它会调用身份验证包来构造一个登录令牌，该登录令牌与由以下人员创建的登录令牌非常相似视窗。正如 arx 所指出的，以这种方式创建的会话不包含您的身份验证凭据，因此副作用是您无法访问网络资源和 EFS 等内容。

# ios - self.view.frame.size.height 1004 而不是 1024

> ID：15711696
> 
> 赞同：2
> 
> 时间：2013-03-29T21:29:25.463
> 
> 标签：ios, objective-c, ios6

以下代码行：

```
NSLog(@"%f, %f", self.view.frame.size.width, self.view.frame.size.height); 
```

对于 iPad 设备返回 768 * 1004。我已经使用隐藏状态栏

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

在`viewDidLoad`方法中，并使用隐藏`navigationbar`在`viewWillAppear`方法中

```
[self.navigationController setNavigationBarHidden:YES]; 
```

我到底错过了什么？我相信它应该返回 1024 而不是 1004。

**注意**：这`viewcontroller`是通过情节提要创建的，并且`ModalStoryboardSegue`具有全屏演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:56:00.727

`viewDidLoad`在视图布局之前调用。在这种方法中，视图的大小是您在界面构建器中设置的大小（模拟大小）。

大小应该不是问题，视图很快就会得到正确的大小（检查`viewDidLayout`方法）。

请注意，您仍然可以`viewDidLoad`根据控制器的视图大小设置视图，只需正确设置自动调整大小的蒙版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:03:54.350

你在哪里做日志？如果我在 viewDidLoad 中隐藏状态栏，并在 viewDidAppear 中登录，我会得到 1024。

# java - 检查字符是否等于一个单词

> ID：15711697
> 
> 赞同：0
> 
> 时间：2013-03-29T21:29:25.510
> 
> 标签：java, class, methods, character

```
 do {            
            System.out.println("Word: " + secretWord.getWordMask());
            //System.out.print("Guesses: " + guesses);
            System.out.print("Enter your guess: ");
            Scanner keyboard = new Scanner(System.in);
            String guess = keyboard.next();

            WordHider revealChar = new WordHider();

            revealChar.revealLetter(guess);
            System.out.println(revealChar.getWordMask());
            secretWord.revealLetter(guess);

    } while (); 
```

我的代码现在所做的是不断地向用户询问一个字母，然后如果它是单词的一部分，则显示它。我在另一个类中有另一种方法，可以检查是否找到隐藏的单词

```
public boolean isHiddenWordFound() {
    for (int i = 0; i < wordMask.length(); i++) {
        if(wordMask.charAt(i) == HIDE_CHAR.charAt(0)) {
            return false; 
```

我需要弄清楚如何对`while`零件进行检查。但我简直不知所措，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:33:26.743

如果 isHiddenWordFound 说如果文件的一部分被隐藏则找不到文件，那么您需要将其反转为 true 以继续循环，一旦找到单词，它将返回 true，此时反转将为 false 允许程序继续执行：

```
while (!isHiddenWordFound()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:34:15.607

似乎 isHiddenWordFound 方法正是为了这个目的。

```
do {   
    ...
} while (!isHiddenWordFound()); 
```

# html - PHP mail() - 如何在电子邮件中添加 html 链接？

> ID：15711700
> 
> 赞同：2
> 
> 时间：2013-03-29T21:29:39.740
> 
> 标签：html, php

我正在通过 PHP 的 mail() 函数发送电子邮件。在消息中，我设置了一个如下所示的链接：

```
$message = "<a href='". $link. "'>" .$title. "</a>\n\n"; 
```

但是，当收到电子邮件时，电子邮件正文会显示 html 代码而不是标题作为超链接。我对html电子邮件不是很熟悉。我怎样才能实现我想要得到的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T21:32:24.690

尝试添加一个标头，以便邮件客户端不相信它是纯文本：

```
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n"; 
```

请参阅[PHP 邮件功能手册](http://www.php.net/manual/en/function.mail.php)：

**Example #4 发送 HTML 电子邮件**：

```
<?php
// multiple recipients
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = 'Birthday Reminders for August';

// message
$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
      <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
    </tr>
    <tr>
      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T21:34:23.513

Please see the documentation for PHP mail() at [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

You need to specify a Content Type of HTML in your function.

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers); 
```

Although it's generally recommended to avoid using mail() alone.

You should consider using PHPMailer, for example.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T21:32:48.783

您必须告诉电子邮件客户端电子邮件中有一个 HTML 部分。我建议使用[Swiftmailer](http://swiftmailer.org/)之类的东西来完成这项工作，而不是自己做所有事情。

# c - EOF 上的意外 fgets 行为

> ID：15711701
> 
> 赞同：0
> 
> 时间：2013-03-29T21:29:44.060
> 
> 标签：c, eof, fgets

我有从标准输入获取一行的代码：

```
char string[USR_SIZE+1];
/*USR_SIZE is 9 */ 
fgets(string, USR_SIZE, stdin);
size_t len = strlen(string);
if (string[len-1] == '\n') {
    // read in whole line, no need to clear buffer
    string[len-1] = 0;
}    
else {
    if(feof(stdin)){
        printf("EXACT LEN\n");
    }
    else{
        //username too long, clear stdin and retry
        printf("Dumping...");
        dump_line(stdin); //clear stdin
        /*something that loops until success*/

    }

} 
```

缓冲区中没有换行符`string`意味着`EOF`字符串被剪切。

现在。所需的最佳字符串类似于`"user_123"`(8 char)。现在，如果我正确键入`"user_12345678"`它只存储`"user_123"`并执行 else 主体。如果我键入`"user_123"`它也会执行 else 正文。

我想将`"user_123"`( `EOF`) 字符串与`"user_1234"`(cutted) 区分开来，因为仅在最后一种情况下输入不正确。为什么`feof`不设置？

此外：我如何检查`fgets`错误管理的返回值？

找到了这个解决方案：

```
if (fgets(string, USR_SIZE + 1, stdin)){
    if (strlen(string) == USR_SIZE && string[USR_SIZE - 1] == '\n'){
        printf("EXACT\n");
        /* User entered an eight character string. */
        string[USR_SIZE - 1] = 0;
    }
    else{
        if(strlen(string) < USR_SIZE-1){
        printf("INVALID<<<\n");
        /*don't dump*/
    }
        else{
            printf("INVALID>>>\n");
            dump_line(stdin);
        }
    }

    printf("EXIT\n");
    printf("%s\n", string);
}
else{
    free(auth_data);
    EXIT_ON_ERROR_("Error while getting user input\n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:26:25.907

如果你想允许 8 个字符和 EOF 以及换行符，这样的东西会起作用：

```
char buf[10];
fgets(buf, 10, stdin);

int len=strlen(buf);
if (buf[len-1] == '\n') buf[len-1] = '\0';
if (strlen(buf) == 8)
    puts("Correct length");
else
    puts("Incorrect length"); 
```

（`fgets`在此示例中未测试成功）

# c++ - 正确的逐个字符输入？

> ID：15711703
> 
> 赞同：-1
> 
> 时间：2013-03-29T21:29:54.703
> 
> 标签：c++, winapi, command-prompt

为了更好地熟悉 C++，我正在重做一个旧的大学操作系统任务：编写自己的 shell。我处理的第一件事是接受命令，但我的方法留下了一些不足之处。这是我所拥有的：

```
string GetLine() {
    string line;
    char input = _getch();
    while (input != 13) {
        switch (input) {
        case 8: // backspace
            if (line.length() != 0) {
                line = line.substr(0, line.length() - 1);
                cout << "\b \b";
            }
            break;
        case -32: // all arrows' first byte
            input = _getch(); // distinctly different arrow byte
            switch (input) {
                case 72: // up
                    break;
                case 80: // down
                    break;
                case 75: // left
                    break;
                case 77: // right
                    break;
            }
            break;
        case 9: // tab
            break;
        default:
            line += input;
            cout << input;
            break;
        }
        input = _getch();
    }
    cout << endl;
    return line;
} 
```

它工作得很好，我知道我与箭头键有更多关系（如果我什至可以正确区分它们的话）。我要问的主要问题是光标已经换到终端上的下一行的某种情况。为了模拟`cmd.exe`，我打印了一个提示并在其末尾等待用户输入。当这个提示很长时，我的命令只需要几个字符就可以跨两行运行。如果我只是输入它并让它环绕并按 Enter 一切正常。如果我换行到第二行并想退格回到第一行，光标会停在新行的第一个字符处，并且不会像我希望的那样“解开”回到第一行。我可以在这里做什么来实现这种展开行为？

我认为问题在于尝试打印 '\b' 不会解开，但我没有替代方案的想法，我希望我不必将其视为特殊情况和代码将在一行中间退格也将在一行的开头工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:16:14.763

你需要使用winapi，[SetConsoleCursorPosition](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686025%28v=vs.85%29.aspx)会帮助你。这是一个将光标从当前位置向上移动一行的最小示例：

```
#include <iostream>
#include <windows.h> 

int main() {
    std::cout << "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
        "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
        "aaaaaaaaaaaaaaa";
    HANDLE hStdout = GetStdHandle(STD_OUTPUT_HANDLE);

    CONSOLE_SCREEN_BUFFER_INFO csbiInfo; 
    GetConsoleScreenBufferInfo(hStdout, &csbiInfo);
    csbiInfo.dwCursorPosition.Y -= 1; // Move Y coordinate up by one
    SetConsoleCursorPosition(hStdout, csbiInfo.dwCursorPosition);

    std::cin.get();
} 
```

此外，[控制台功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)具有控制控制台的所有必要功能的完整列表。你会想在你的程序中使用这些。

您需要使用[CreateConsoleScreenBuffer 创建](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682122%28v=vs.85%29.aspx)自己的屏幕缓冲区，然后先将其设置为缓冲区。然后自己处理从控制台写入和读取的所有内容。

# c# - C# 中的垃圾回收

> ID：15711705
> 
> 赞同：0
> 
> 时间：2013-03-29T21:30:06.410
> 
> 标签：c#, memory-management

因此，我正在为一个类的 MySQL 数据库制作一个客户端程序，并且我在表单类的顶部声明了一些变量，这些变量在表单的整个生命周期中都会使用和重用。每次使用变量时，我只是在做类似的事情：

```
variableName = new VariableClass(); 
```

然后使用它，主要用于 DataSets/Tables。我想知道的是我应该在再次调用 new 之前显式释放内存还是 C# 为我处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:31:34.373

无需在 C# 中显式释放 .Net 对象。它在 CLR 上运行，这是一个垃圾收集环境，因此将为您清理这些项目。

That being said ... it's unclear from your question if you are allocating these as fields or locals. If you are allocating them in fields and only using them in one function then you should move that declaration to a local. While the memory won't leak you will be holding onto the objects for significantly longer than is needed. This unnecessarily increases the memory footprint of your application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:37:16.020

It depends upon what the class of the variables does. If it uses resources that require disposal or if it uses unmanaged resources, you should implement IDisposable and ensure that they are disposed of correctly. If not, you can rely on the garbage collector to do its thing.

# node.js - Can I have a package.json but avoid my project from getting published to npm servers?

> ID：15711709
> 
> 赞同：36
> 
> 时间：2013-03-29T21:30:37.460
> 
> 标签：node.js, npm

Basically the thing is I'm working on a project that uses `grunt` for build tasks and as I have a few dependencies here and there I thought it was a good idea to declare those on a `package.json` so that my co-workers can `npm install` without being required to manually install every package at the correct version.

Now the thing is, what if someone "accidentally" runs `npm publish`? Is there a way to have the `package.json` while keeping my stuff private?

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-29T21:34:30.887

[Yes, set `private` to `true`.](https://docs.npmjs.com/files/package.json#private)

> If you set `"private": true` in your package.json, then npm will refuse to publish it.
> 
> This is a way to prevent accidental publication of private repositories. If you would like to ensure that a given package is only ever published to a specific registry (for example, an internal registry), then use the publishConfig hash described below to override the registry config param at publish-time.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-29T21:34:37.030

You can set `"private" : true` in your package.json file

Your CoWorkers will get an error if they try to publish it

# r - 列的随机洗牌

> ID：15711712
> 
> 赞同：-6
> 
> 时间：2013-03-29T21:30:54.370
> 
> 标签：r, random-sample

我有一个包含两列和不定行数的文件。第 1 行包含一个人员 ID，第 2 行包含每个人员 ID 的分数。我正在尝试随机打乱分数并将它们随机重新分配给新的 2 列数据框中的人员 ID。基本上破坏了分数和人名之间的真实关系。我怎样才能在 R 中做到这一点？我不知道如何编写一个函数来做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:56:42.820

As @Dason said in the comments it looks like you are just looking for sample. I have to say this is pretty basic stuff and even a rudimentary google query (or with your other favourite search engine) would have given you many posts and links on how to do this.

I assume that your data is in `data.frame` called `data` and it has a column called `"id"` for the person IDs and a column called `"score"` for the scores. You can easily make a new data.frame using sample like so...

```
data2 <- data.frame( ID = sample( data$id , nrow( data ) ) , Score = sample( data$score , nrow( data ) ) ) 
```

# javascript - 用于在浏览器中实现命令行的 JavaScript 库

> ID：15711720
> 
> 赞同：18
> 
> 时间：2013-03-29T21:31:29.343
> 
> 标签：javascript, browser, command-line-interface

我想允许高级用户在类似命令行的界面中在站点上执行某些操作（想想从上方滑入的 Quake 控制台；-）。是否有一个库已经实现了我在浏览器中需要的基础知识？诸如从用户那里获取输入、命令历史记录等任务。我和我的同事在黑客马拉松期间实现这一点的时间有限，因此我们希望有尽可能多的时间来实现与我们的应用程序交互的实际命令。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T21:36:27.690

在浏览器中查看 Josh.js 以了解类似 bash 的环境：

*   [http://sdether.github.com/josh.js/](http://sdether.github.com/josh.js/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T21:40:13.527

当然这里也有[优秀](http://www.masswerk.at/termlib/index.html)`termlib`的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T21:41:30.367

您可能会发现这个项目很有帮助：

[https://github.com/chjj/tty.js](https://github.com/chjj/tty.js)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-29T21:42:48.643

查看来自 mozilla.org的[JavaScript shell](https://developer.mozilla.org/en-US/docs/JavaScript/Shells)

另请参阅[Jash：JavaScript Shell](http://www.billyreisinger.com/jash/)

# silverlight - 只有此按钮上的文本是可点击的：它的正文不可点击

> ID：15711723
> 
> 赞同：0
> 
> 时间：2013-03-29T21:31:54.133
> 
> 标签：silverlight

我对 Silverlight 非常陌生，并尝试使用嵌套的 TextBlock 创建一个 Button，同时将两者都放在 Grid 中。一切正常，除了文本是可点击的......

```
 <Grid x:Name="ValueHeadingContainer" Grid.Column="0" Grid.Row="0" Grid.RowSpan="2">
                        <Border Background="Transparent" BorderThickness="0,0,1,1" BorderBrush="#000" />
                        <Button Click="Button_Click" Name="ValueHeadingButton">
                            <Button.Template>
                                <ControlTemplate>
                                    <TextBlock x:Name="ValueHeadingLabel" 
                                               Text="{Binding ValueLabel}" 
                                               Margin="10,0,0,0"
                                               Style="{StaticResource FakeColumnHeader}"/>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:44:12.160

如果您想要的只是一个按钮（不是模板），那么就足够了：

```
<Button Click="Button_Click" Name="ValueHeadingButton">
                                    <TextBlock x:Name="ValueHeadingLabel" 
                                               Text="{Binding ValueLabel}" 
                                               Margin="10,0,0,0"
                                               Style="{StaticResource FakeColumnHeader}"/>
</Button> 
```

即，您只是在`<Button><TextBlock></TextBlock></Button>`没有内容模板的情况下使用 smth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:09:04.367

只有文本块是可点击的，因为您还没有定义任何其他将处理鼠标事件的元素。您需要在文本块周围放置一个包装器以增加按钮的可点击表面积。

我还建议您将 TextBlock 上的 IsHitTestVisible 设置为 false 以防止它干扰任何其他鼠标事件。

```
<Button.Template>
    <ControlTemplate>
        <Border Background="Transparent">
            <TextBlock x:Name="ValueHeadingLabel" 
                       IsHitTestVisible="False"
                       Text="{Binding ValueLabel}" 
                       Margin="10,0,0,0"
                       Style="{StaticResource FakeColumnHeader}"/>
        </Border>
    </ControlTemplate>
</Button.Template> 
```

# pdf - 从pdf中提取区域

> ID：15711729
> 
> 赞同：1
> 
> 时间：2013-03-29T21:32:28.790
> 
> 标签：pdf

我想从 pdf 页面中提取由 xy 坐标给出的区域。提取的区域可以作为页面存储在新的pdf文档中。这需要做几次，所以我希望这个过程被脚本化。是否有任何工具/库可以帮助做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:27:49.250

如果 iText（用于 Java）或 iText(Sharp)（用于 .Net）对您来说是可接受的库，您可以使用它们从某个 PDF 导入现有页面作为模板，其中的部分可以在另一个 PDF 中显示。

[查看](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=TilingHero)[iText in Action — 第 2 版](http://itextpdf.com/book/)第[6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)中的示例[TilingHero.java/TilingHero.cs](http://itextpdf.com/examples/iia.php?id=116)。中心代码是：

```
PdfImportedPage page = writer.getImportedPage(reader, 1);
// adding the same page 16 times with a different offset
float x, y;
for (int i = 0; i < 16; i++) {
    x = -pagesize.getWidth() * (i % 4);
    y = pagesize.getHeight() * (i / 4 - 3);
    content.addTemplate(page, 4, 0, 0, 4, x, y);
    document.newPage();
} 
```

如您所见，原始页面被导入一次，并且它的不同部分显示在不同的页面上。

(iText and iTextSharp are available either for free --- subject to the AGPL --- or commercially)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:21:50.703

你可以使用 'pdftoppm' 来完成这个任务：

```
pdftoppm -f <first page> -l <last page> -jpeg -x <start x> -y <start y> -W <width> -H <height> -jpeg <in file> > <out file> 
```

例如，从点 (x,y) = (100,200) 裁剪第一个 PDF 页面的区域，这是裁剪区域的左上角，宽度为 50，高度为 80，并将其保存为 JPEG文件是通过使用完成的：

```
pdftoppm -f 1 -l 1 -jpeg -x 100 -y 200 -W 50 -H 80 'my.pdf' > 'crop.jpg' 
```

如果您在文档分辨率方面遇到问题，可以使用 'pdftoppm' 的 '-r' 选项（有关更多信息，请参见 'pdftoppm' 的手册页）。

当然，如果需要，您可以轻松地将 JPEG 文件转换为 PDF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T18:02:40.933

使用`ghostscript`，您可以通过以下方式裁剪 pdf：

```
gs -f original.pdf -o final.pdf -sDEVICE=pdfwrite \
    -c "[/CropBox [x-left y-bottom x-right y-top] /PAGES pdfmark" 
```

`x-left`, `y-bottom`, 等等，坐标可以用所需的坐标代替。请注意，对于`gs`，坐标`(0, 0)`位于页面的左下角。

这可以很容易地编写脚本。

# windows-phone-7 - 提供不同结果的仿真器

> ID：15711730
> 
> 赞同：0
> 
> 时间：2013-03-29T21:32:31.640
> 
> 标签：windows-phone-7, listview, data-binding, windows-phone-7-emulator, windows-phone-8-emulator

我正在 Windows Phone 上开发一个应用程序，版本 7.1 设置为我的目标版本。我遇到的问题是我的页面中的一个列表视图拒绝显示。

我已经调试以确保列表被解析为其中的内容。当我使用 Windows 8 模拟器时，该应用程序也运行良好。但是，在应用程序的其他页面中填充其他列表视图时使用的相同技术在所有模拟器上都可以正常工作，该模拟器来自这个不显示的单个页面。

我什至尝试设置绑定堆栈面板的颜色以查看它是否会显示并且它会显示但没有任何内容。我真的很困惑，我的代码非常完美。我想知道是否有人在使用 Windows Phone 模拟器之前出现过这个问题？

```
private void countdownClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        HtmlDocument doc = new HtmlDocument();            
        if (e.Error != null)
        {
            //MessageBox.Show(e.Error.InnerException.Message + "\n Ensure You Have A Working Internet Connection");                
            return;
        }
        doc.LoadHtml(e.Result);
        String noCountdown = "<div><span>Sorry no buses are expected within 30 minutes of this stop.  Please try again later or go to www.tfl.gov.uk</span></div>";

        if (e.Result.Contains(noCountdown))
        {
            //No Buses Expected;
            return;
        }
        else
        {
            HtmlNode stopCountdownNode;
            try
            {
                stopCountdownNode = doc.DocumentNode.SelectSingleNode("//*[contains(@id, 'stopBoard')]").SelectSingleNode("tbody");
            }
            catch (Exception)
            {
                MessageBox.Show("Error Responce From Server");
                return;
            }

            if (stopCountdownNode != null)
            {
                HtmlNodeCollection countdownNodeList = stopCountdownNode.SelectNodes("tr");
                CountDownListBox.ItemsSource = GetCountdownList(countdownNodeList);
            } 
        }
    }

    private ObservableCollection<BusCountdown> GetCountdownList(HtmlNodeCollection countdownNodeList)
    {
        ObservableCollection<BusCountdown> countdownList = new ObservableCollection<BusCountdown>();
        foreach (HtmlNode countDown in countdownNodeList)
        {
            String busName = HttpUtility.HtmlDecode(countDown.SelectSingleNode("*[contains(@class, 'resRoute')]").InnerHtml);
            String busDestination = HttpUtility.HtmlDecode(countDown.SelectSingleNode("*[contains(@class, 'resDir')]").InnerHtml);
            String countDownTime = HttpUtility.HtmlDecode(countDown.SelectSingleNode("*[contains(@class, 'resDue')]").InnerHtml);
            countdownList.Add(new BusCountdown(busName, busDestination, countDownTime));       
        }                                                    
        return countdownList;
    }

    public string GetRandomSlash()
    {
        Random r = new Random();
        String slash = "";
        int rand = r.Next(1, 20);
        for (int i = 0; i < rand; i++)
        {
            slash += "/";
        }
        return slash;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:22:46.717

尝试设置用于绑定到公共的类访问说明符并尝试一下。让我知道它是否有效。

例如：

```
public class Bindingclass
{
public string Name{get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:18:55.917

1.  尝试使用**Expression Blend**并删除您以前的解决方案文件并**构建一个新的解决方案**。
2.  还要为所有页面正确设置**构建操作**属性。
3.  将您的**SDK 更新到 7.8**版本。您将获得多种模拟器选择 - **Emulator 7.1 (256 MB)、Emulator 7.1 (512 MB)、Emulator 7.8 (256 MB)、Emulator 7.8 (512 MB)**。在所有这些版本上测试它并检查每种模拟器类型的输出。

我希望其中至少一项可以帮助您让事情顺利进行。让我们知道。

# iphone - iOS 6：SQLite 数据库不起作用

> ID：15711736
> 
> 赞同：0
> 
> 时间：2013-03-29T21:33:06.927
> 
> 标签：iphone, ios, sqlite

我总是使用这段代码在我的 iPhone 应用程序中打开一个 sqlite 数据库，但现在使用 iOS6，这段代码不起作用。功能： sqlite3_prepare_v2 失败，但我不明白为什么！

我也不明白为什么如果我尝试用另一个不存在文件的名称更改 sqlite db 的名称：“gamer.sqlite”，函数：'sqlite3_open' 再次返回 SQLITE_OK 值。

这是我的代码：

```
-(NSMutableArray*)view_table
{
    const char *sql;

    NSMutableArray *content=[[NSMutableArray alloc] initWithObjects:nil];
    [self msgbox:@"eseguo"];
    /*elementi da visualizzare nella tabella*/
    if(sqlite3_open([databasePath  UTF8String],&database)==SQLITE_OK)
    {
            [self msgbox:@"opened"];
        sql = "SELECT * FROM  list_gamer";
        if (sqlite3_prepare_v2(database,sql, -1, &selectstmt, NULL) == SQLITE_OK)
        {
              [self msgbox:@"query eseguita"];
            while(sqlite3_step(selectstmt) == SQLITE_ROW)
            {
                [content addObject:[NSString stringWithFormat:@"%s",sqlite3_column_text(selectstmt,0)]];
            }
        }
    }

    return content;

}

- (void)viewDidLoad{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [[documentsDir stringByAppendingPathComponent:@"gamer.sqlite"] copy];

    if(![[NSFileManager defaultManager] fileExistsAtPath:databasePath])
    {
        NSFileManager *fileManager = [NSFileManager defaultManager];
        int success = [fileManager fileExistsAtPath:databasePath];
        if(success)
        {
            [fileManager removeItemAtPath:databasePath error:nil];
            return;
        }

        NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"gamer.sqlite"];

        // Copy the database from the package to the users filesystem
        [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];

        documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        documentsDir = [documentPaths objectAtIndex:0];
    }

 [super viewDidLoad];
}

- (void)didReceiveMemoryWarning{
    [super didReceiveMemoryWarning];

}

-(IBAction)start_game:(id)sender{
    self.view=frmgame;
    [self view_table];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:28:28.507

不完全是一个直接的答案，但我个人真的很喜欢使用 fmbd 来帮助管理 sqlite 和错误。

Fmdb 是一个围绕 SQLite 的 Objective-C 包装器：http: [//sqlite.org/](http://sqlite.org/)

[https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)

# javascript - FancyBox，添加了物品但损坏了？

> ID：15711739
> 
> 赞同：0
> 
> 时间：2013-03-29T21:33:17.640
> 
> 标签：javascript, jquery, fancybox

这是代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        beforeLoad: function() {
            var el, id = $(this.element).data('title-id');

            if (id) {
                el = $('#' + id);

                if (el.length) {
                    this.title = el.html();
                }
            }
        }
        helpers : {
        title: {
            type: 'inside'
        }
    }
    });
    });
</script> 
```

但它出现问题了，因为当我移动它时，我不断在不同的地方出错。写这个的正确方法是什么？

# spring-security - 无法在 Windows 7 的 GGTS 中使用 Spring Security Core 运行 Grails 项目

> ID：15711743
> 
> 赞同：2
> 
> 时间：2013-03-29T21:33:29.650
> 
> 标签：spring-security, grails-plugin, grails-2.2

我是 Grails 的新手，我正在拼命尝试让 Spring Security 插件运行。我将以下行添加到我的项目中`BuildConfig.groovy`：

```
plugins{
    ... 
    compile ":spring-security-core:1.2.7.3" 
    ...
} 
```

然后我尝试通过`install-plugin`命令安装插件。无论我选择哪种方式，我都无法启动项目，因为我已经运行了`s2-quickstart`脚本（它[创建了 Spring Security 域类和控制器](http://grails-plugins.github.io/grails-spring-security-core/docs/manual/ref/Scripts/s2-quickstart.html)）。

我使用 PostgreSQL 作为数据库并在 Windows 7 上运行 Groovy/Grails Tool Suite，Grails 版本为 2.2.1。

这是错误消息：

```
| Loading Grails 2.2.1
| Configuring classpath.
| Environment set to development.....
| Packaging Grails application....
| Compiling 7 source files.....
| Running Grails application

Configuring Spring Security Core ...
... finished configuring Spring Security Core

| Error 2013-03-29 22:15:17,677 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error initializing the application: Error creating bean with name 'instanceTagLibraryApi': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.codehaus.groovy.grails.plugins.web.api.TagLibraryApi.setGspTagLibraryLookup(org.codehaus.groovy.grails.web.pages.TagLibraryLookup); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gspTagLibraryLookup': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.codehaus.groovy.grails.web.mapping.LinkGenerator org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib.linkGenerator; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'grailsLinkGenerator': Post-processing failed of bean type [class org.codehaus.groovy.grails.web.mapping.CachingLinkGenerator] failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
Message: Error creating bean with name 'instanceTagLibraryApi': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.codehaus.groovy.grails.plugins.web.api.TagLibraryApi.setGspTagLibraryLookup(org.codehaus.groovy.grails.web.pages.TagLibraryLookup); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gspTagLibraryLookup': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.codehaus.groovy.grails.web.mapping.LinkGenerator org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib.linkGenerator; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'grailsLinkGenerator': Post-processing failed of bean type [class org.codehaus.groovy.grails.web.mapping.CachingLinkGenerator] failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
    Line | Method
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by BeanCreationException: Could not autowire method: public void org.codehaus.groovy.grails.plugins.web.api.TagLibraryApi.setGspTagLibraryLookup(org.codehaus.groovy.grails.web.pages.TagLibraryLookup); nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gspTagLibraryLookup': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.codehaus.groovy.grails.web.mapping.LinkGenerator org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib.linkGenerator; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'grailsLinkGenerator': Post-processing failed of bean type [class org.codehaus.groovy.grails.web.mapping.CachingLinkGenerator] failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'gspTagLibraryLookup': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.codehaus.groovy.grails.web.mapping.LinkGenerator org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib.linkGenerator; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'grailsLinkGenerator': Post-processing failed of bean type [class org.codehaus.groovy.grails.web.mapping.CachingLinkGenerator] failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.codehaus.groovy.grails.web.mapping.LinkGenerator org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib.linkGenerator; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'grailsLinkGenerator': Post-processing failed of bean type [class org.codehaus.groovy.grails.web.mapping.CachingLinkGenerator] failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by BeanCreationException: Could not autowire field: private org.codehaus.groovy.grails.web.mapping.LinkGenerator org.codehaus.groovy.grails.plugins.web.taglib.ApplicationTagLib.linkGenerator; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'grailsLinkGenerator': Post-processing failed of bean type [class org.codehaus.groovy.grails.web.mapping.CachingLinkGenerator] failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'grailsLinkGenerator': Post-processing failed of bean type [class org.codehaus.groovy.grails.web.mapping.CachingLinkGenerator] failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by ClassCastException: com.sun.proxy.$Proxy26 cannot be cast to java.lang.annotation.Annotation
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread 
```

**编辑：** 使用运行应用程序`run-app --verbose --stacktrace`会导致服务器成功启动，但该过程不会在后台完成。片刻之后，服务器关闭并出现错误：

```
run-app --verbose --stacktrace encountered a problem

timelimit was exceeded. 
```

**编辑2：** `grails -noreload run-app`然后`grails clean`是`grails run-app`两者都会导致服务器正常启动，但服务器会在短时间内关闭（正如我在第一次编辑中解释的那样）：

```
grails -noreload run-app encountered a problem 
```

当我删除`$USER/.grails/`.

有关此错误的信息是控制台输出的副本：

```
| Loading Grails 2.2.1
| Configuring classpath.
| Environment set to development.....
| Packaging Grails application....
| Compiling 1 source files
  [groovyc] Compiling 1 source file to C:\Grails\test\target\classes
| Compiling 1 source files.....
| Running Grails application

Configuring Spring Security Core ...
... finished configuring Spring Security Core

| Server running. Browse to http://localhost:9000/test 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:00:01.133

应用程序是否在禁用重新加载（[弹簧加载代理](https://github.com/SpringSource/spring-loaded)）的情况下启动？

```
grails -noreloading run-app 
```

Grails Jira 已向Grails Jira 报告了类似的问题[GRAILS-9952](http://jira.grails.org/browse/GRAILS-9952)。如果您可以提供重现问题的测试应用程序，这将有助于解决问题。请将其附加到 jira 问题上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T22:27:45.403

我自己解决了这个问题。当我从 cmd 运行应用程序时，它似乎可以工作。原因是我安装的 groovy 编译器和 GGTS 正在使用的编译器不匹配。

# c# - 如何获取 ItemsPanel 的实例？

> ID：15711744
> 
> 赞同：0
> 
> 时间：2013-03-29T21:33:33.350
> 
> 标签：c#, wpf

我正在编写自定义控件，在其中切换默认`ItemsPanel`值

```
ItemsPanelProperty.OverrideMetadata(typeof(DataGrid),
    new FrameworkPropertyMetadata(new ItemsPanelTemplate(
    new FrameworkElementFactory(typeof(AdvancedVirtualizingStackPanel))))); 
```

如何获得对 created 实例的引用`AdvancedVirtualizingStackPanel`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:31:42.440

好的，我会自己回答。

首先你需要得到`ItemsPresenter`. 您可以使用以下代码：

```
ItemsPresenter itemsPresenter = 
    (ItemsPresenter)GetTemplateChild(ItemsPresenterTemplateName);
// You have to name ItemsPresenter (using value of 
// ItemsPresenterTemplateName string) in your XAML 
```

然后：

```
itemsPresenter.ApplyTemplate(); // In case template is not applied yet
_stackPanel = 
    Helper.GetVisualChild<AdvancedVirtualizingStackPanel>(itemsPresenter); 
```

你得到了你的面板。代码`Helper.GetVisualChild()`：

```
public static T GetVisualChild<T>(DependencyObject parent) where T : Visual
{
    T child = default(T);

    int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
    for (int i = 0; i < numVisuals; i++)
    {
        Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
        child = v as T;
        if (child == null)
        {
            child = GetVisualChild<T>(v);
        }
        if (child != null)
        {
            break;
        }
    }

    return child;
} 
```

# ruby-on-rails - jquery-1.9.1.min.js 在部署到 Heroku 时未预编译

> ID：15711745
> 
> 赞同：1
> 
> 时间：2013-03-29T21:33:42.947
> 
> 标签：ruby-on-rails, heroku

我得到错误：

`ActionView::Template::Error(jquery-1.9.1.min.js isn't precompiled)`在我的应用程序中访问具有包含标签的页面时：`<%= javascript_include_tag "jquery-1.9.1.min"%>`

请注意，我的观点适用于所有其他没有前面提到的包含标签的页面。

我已经设置`config/application.rb`好了`config.assets.initialize_on_precompile = false`，我也在`bundle exec rake assets:precompile`本地完成了。然后我推送到 heroku，但我仍然在 Heroku 日志中看到错误。

请注意，它`jquery-1.9.1.min.js`是在本地下载并放入`vendoer\assets\javascripts`我的应用程序的，但我认为这不是问题，因为我在该文件夹中有其他 javascript，它们在生产中可访问的其他页面上工作。

我的 application.js 有以下内容：

```
//= require jquery-1.9.1.min
//= require jquery_ujs
//= require jquery.numeric
//= require_tree .
//= require bootstrap 
```

这在开发中运行良好。`gem 'jquery-rails', '2.0.2'`如果相关的话，我的 gemfile 有。

最后，在 production.rb 我尝试添加`config.assets.precompile += %w( jquery-1.9.1.min.js, highstock.js )`和使用`bundle exec rake assets:precompile`.

由于`rake assets:precompile`我`public/assets`有一个`application.js`已经编译好的代码，`jquery-1.9.1.min`而且它还有一个单独的文件`jquery-1.9.1.min`，所以看起来它被编译了两次。虽然我不认为这是问题...

我想不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:38:54.187

行，

我想办法解决这个野兽。我认为'，'在`config.assets.precompile += %w(...,...)`影响预编译。我拿出了'，'。我还设置`config.assets.initialize_on_precompile = true`并取消了任何预编译`rake assets:clean`

现在 heroku 进行了预编译，它可以工作了。

# gtk - 在 gtk 哈希表和列表存储中处理 flex+bison 输出

> ID：15711749
> 
> 赞同：0
> 
> 时间：2013-03-29T21:34:22.927
> 
> 标签：gtk, hashtable, bison

这个问题是[在 glib 的哈希容器中讨论 flex+bison 输出之后](https://stackoverflow.com/questions/15438810/flexbison-output-in-a-glibs-hash-container) 让我重新发布它（经过一些讨论后，最后一篇帖子仍未得到答复。）我想使用 flex 和 bison 解析 bibtex 文件，并将使用 gtk 库显示这些数据（在 C)。词法分析器是

```
%{
#include "bib.tab.h"
%}

%%
[A-Za-z][A-Za-z0-9]*      { yylval.sval = strdup(yytext); return KEY; }
\"([^\"]|\\.)*\"|\{([^\"]|\\.)*\}  { yylval.sval = strdup(yytext); return VALUE; }
[ \t\n]                   ; /* ignore whitespace */
[{}@=,]                   { return *yytext; }
.                         { fprintf(stderr, "Unrecognized character %c in input\n", *yytext); }
%% 
```

解析器是：

```
%{
#include <stdio.h>
#include <glib.h>
#include <gtk/gtk.h>
#include <string.h>
#include <glib/gstdio.h>
#include <fcntl.h>
enum
{
  COL_BIB_KEY=0,
  COL_BIB_TYPE, COL_BIB_AUTHOR, COL_BIB_YEAR,
  NUM_COLS} ;
#define slen 1024
GHashTable* table;
GtkTreeIter siter;
GtkListStore *store;
%}

// Symbols.
%union
{
    char    *sval;
};
%token <sval> VALUE
%token <sval> KEY
%token OBRACE
%token EBRACE
%token QUOTE
%token SEMICOLON 

%start Input
%%
Input: 
     /* empty */ 
     | Input Entry ;  /* input is zero or more entires */
Entry: 
     '@' KEY '{' KEY ','{ g_hash_table_insert(table, g_strdup("TYPE"), g_strdup($2));
                  g_hash_table_insert(table, g_strdup("ID"), g_strdup($4));
          g_printf("%s:%s\n","KEY=>",g_hash_table_lookup(table,"TYPE"));
//                  g_printf("%s: %s\n", $2, $4);
              } 
     KeyVals '}' 
     ;
KeyVals: 
       /* empty */ 
       | KeyVals KeyVal ; /* zero or more keyvals */
KeyVal: 
      KEY '=' VALUE ',' { g_hash_table_insert(table, g_strdup($1), g_strdup($3));
//                          g_printf("%s: %s\n", $1, $3); 
              };

%%

int yyerror(char *s) {
  printf("yyerror : %s\n",s);
}

int main(int argc, char** argv) {
gtk_init(&argc, &argv);
GtkWidget  *window = gtk_window_new (GTK_WINDOW_TOPLEVEL);    
  GtkWidget *tree=gtk_tree_view_new();
  setup_tree(tree);

gtk_container_add (GTK_CONTAINER (window), tree);
store= gtk_list_store_new (NUM_COLS, 
      G_TYPE_STRING, G_TYPE_STRING, G_TYPE_STRING, G_TYPE_STRING);
  table = g_hash_table_new(g_str_hash, g_str_equal);
gint i;
do{
   g_hash_table_remove_all (table);
   yyparse();
   parse_entry (table);
gtk_tree_view_set_model (GTK_TREE_VIEW (tree), GTK_TREE_MODEL (store));
g_object_unref (store);
  }
  while(!EOF);
  g_hash_table_destroy (table);
gtk_widget_show_all (window);
gtk_main ();
return 0;
}
void parse_entry (GHashTable *table)
{
  GHashTableIter iter;
  gchar *key, *val;
  char *keys[] = {"id", "type", "author", "year", "title", "publisher", "editor", 
    "volume", "number", "pages", "month", "note", "address", "edition", "journal",
    "series", "book", "chapter", "organization", NULL};
  char *vals[] = {NULL,  NULL,  NULL, NULL, NULL,
    NULL,  NULL,  NULL, NULL, NULL,
    NULL,  NULL,  NULL, NULL, NULL,
    NULL,    NULL,  NULL, NULL, NULL};

  gchar **kiter;
  gint i;
  g_hash_table_iter_init (&iter, table);
  while (g_hash_table_iter_next (&iter, (void **)&key, (void **)&val))
  {
    for (kiter = keys, i = 0; *kiter; kiter++, i++)
    {
      if (!g_ascii_strcasecmp(*kiter, key))
      {
    vals[i] = g_strndup(val,slen);
//    g_printf("%s:%s\n",keys[i],g_hash_table_lookup(table,keys[i]));
    g_printf("%d=>%s:%s\n",i,keys[i],vals[i]);
    break;
      }
    }
  }
    gtk_list_store_append (store, &siter);
    gtk_list_store_set (store, &siter,
      COL_BIB_TYPE,         vals[COL_BIB_TYPE],
      COL_BIB_KEY,      vals[COL_BIB_KEY],
      COL_BIB_AUTHOR,       vals[COL_BIB_AUTHOR],
      COL_BIB_YEAR,         vals[COL_BIB_YEAR],
      -1);
}

void setup_tree(GtkWidget *tree){
GtkCellRenderer *renderer;
GtkTreeViewColumn *column;

renderer = gtk_cell_renderer_text_new ();
column = gtk_tree_view_column_new_with_attributes
("Type", renderer, "text",COL_BIB_TYPE , NULL);
gtk_tree_view_append_column (GTK_TREE_VIEW (tree), column);
renderer = gtk_cell_renderer_text_new ();
column = gtk_tree_view_column_new_with_attributes
("Author", renderer, "text", COL_BIB_AUTHOR, NULL);
gtk_tree_view_append_column (GTK_TREE_VIEW (tree), column);
renderer = gtk_cell_renderer_text_new ();
column = gtk_tree_view_column_new_with_attributes
("Year", renderer, "text",COL_BIB_YEAR, NULL);
gtk_tree_view_append_column (GTK_TREE_VIEW (tree), column);
g_printf("HIIIIIIIIIi");
} 
```

问题在于填充哈希表，而不是列表视图（我封闭了列表存储，以便人们可以看到我的最终目标并提出改进建议。）如果我们把这条线

```
g_printf("%s:%s\n",$1,g_hash_table_lookup(table,$1)); 
```

在第 50 行，它会正确打印哈希表的内容，但如果我们想要通过取消注释第 105 行来获取内容，那么只会解析最后一个条目。所以，我的猜测是我没有正确处理哈希文件（第 97-107 行可能是？）

生成文件是：

```
CC=gcc -g
FLEX=flex
BISON=bison
LIBS=lfl
PROG=parse

${PROG}:bib.y bib.l
    ${BISON} -d bib.y
    ${FLEX} -i bib.l
    ${CC} lex.yy.c bib.tab.c `pkg-config --cflags --libs glib-2.0``pkg-config --cflags --libs gtk+-3.0` -${LIBS} -o $@

clean:
    rm -f lex.yy.c bib.tab.c ${PROG}
    touch bib.l bib.y 
```

一个示例 bibtex 文件是：

```
@Book{a1,
    Title="ASR",
    Publisher="oxf",
    author = "a {\"m}ook, Rudra Banerjee",
    Year="2010",
    Address="UK",
    Edition="1",
}
@Booklet{ab19,
    Author="Rudra Banerjee and A. Mookerjee",
    Title="Fe{\"Ni}Mo",
    Editor="sm1",
    Title="sm2",
    Publisher="sm3",
    Volume="sm4",
    Number="sm5",
    Pages="sm6",
    Month="sm8",
    Note="sm9",
    Key="sm10",
    Year="1980",
    Address="osm1",
    Edition="osm2",
} 
```

如果有人告诉我一些正确填充哈希表的方法，我将不胜感激。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:02:46.277

看起来您只是将所有数据转储到一个哈希表中。因此，第一个条目将进入哈希表中的键`TYPE`、`ID`、`Title`、`Publisher`等。然后第二个条目将覆盖这些相同的键和值（除了它使用`Author`而不是`author`），从而导致两个条目的混合。

如果您想使用哈希表，我希望您需要为每个条目创建一个哈希表，以及一个哈希表以将 ID 映射到包含该条目信息的哈希表。或者，您可以将每个条目解析为列表或其他容器结构，并使用单个哈希表将 ID 映射到列表/容器。

You're also leaking memory very rapidly, as you allocate new memory for each `KEY` or `VALUE` and then duplicate the memory to put it into the hashtable.

# python - 将 dict 转换为 OrderedDict

> ID：15711755
> 
> 赞同：150
> 
> 时间：2013-03-29T21:35:00.140
> 
> 标签：python, ordereddictionary

我在使用`collections.OrderedDict`课程时遇到了一些问题。我在 Raspberry Pi 的 Debian 发行版 Raspbian 上使用 Python 2.7。我正在尝试打印两个字典以便比较（并排）文本冒险。顺序对于准确比较至关重要。无论我尝试什么，字典都以通常的无序方式打印。

这是我在 RPi 上执行此操作时得到的结果：

```
import collections

ship = {"NAME": "Albatross",
         "HP":50,
         "BLASTERS":13,
         "THRUSTERS":18,
         "PRICE":250}

ship = collections.OrderedDict(ship)

print ship
# OrderedDict([('PRICE', 250), ('HP', 50), ('NAME', 'Albatross'), ('BLASTERS', 13), ('THRUSTERS', 18)]) 
```

显然有些地方不对，因为它正在打印函数调用并将键和值组放入嵌套列表中......

这是我通过在我的 PC 上运行类似的东西得到的：

```
import collections

Joe = {"Age": 28, "Race": "Latino", "Job": "Nurse"}
Bob = {"Age": 25, "Race": "White", "Job": "Mechanic", "Random": "stuff"}

#Just for clarity:
Joe = collections.OrderedDict(Joe)
Bob = collections.OrderedDict(Bob)

print Joe
# OrderedDict([('Age', 28), ('Race', 'Latino'), ('Job', 'Nurse')])
print Bob
# OrderedDict([('Age', 25), ('Race', 'White'), ('Job', 'Mechanic'), ('Random', 'stuff')]) 
```

这一次，它是有序的，但它不应该打印其他的东西，对吧？（将其放入列表并显示函数调用。）

我在哪里犯错误？它不应该与 Python 的 pi 版本有任何关系，因为它只是 Linux 版本。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-03-29T21:40:59.733

您*首先*创建一个字典，然后将该字典传递给一个`OrderedDict`. 对于 Python 版本 < 3.6 ^((*))，当您这样做时，排序将不再正确。`dict`本质上是无序的。

而是传入一个元组序列：

```
ship = [("NAME", "Albatross"),
        ("HP", 50),
        ("BLASTERS", 13),
        ("THRUSTERS", 18),
        ("PRICE", 250)]
ship = collections.OrderedDict(ship) 
```

打印时看到的`OrderedDict`是它的*表示*，它是完全正确的。`OrderedDict([('PRICE', 250), ('HP', 50), ('NAME', 'Albatross'), ('BLASTERS', 13), ('THRUSTERS', 18)])`只是以可*重现*的表示形式向您展示`OrderedDict`.

* * *

^((*))：在 CPython 3.6 实现中，该`dict`类型已更新为使用内存效率更高的内部结构，该结构具有保留插入顺序的愉快副作用，并且通过扩展，问题中显示的代码可以正常工作。从 Python 3.7 开始，*Python 语言规范*已更新为要求所有 Python 实现必须遵循此行为。有关详细信息以及为什么您仍可能希望在某些情况下使用 an ，请参阅[我的其他答案。](https://stackoverflow.com/questions/1867861/how-to-keep-keys-values-in-same-order-as-declared/39537308#39537308)`OrderedDict()`

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-09-27T12:33:16.050

如果您无法编辑定义 dict 的这部分代码，您仍然可以在任何时候以任何您想要的方式对其进行排序，如下所示：

```
from collections import OrderedDict

order_of_keys = ["key1", "key2", "key3", "key4", "key5"]
list_of_tuples = [(key, your_dict[key]) for key in order_of_keys]
your_dict = OrderedDict(list_of_tuples) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-04-28T07:51:54.537

大多数时候，当我们需要自定义订单而不是 ASC 等通用订单时，我们会选择 OrderedDict。

这是建议的解决方案：

```
import collections
ship = {"NAME": "Albatross",
         "HP":50,
         "BLASTERS":13,
         "THRUSTERS":18,
         "PRICE":250}

ship = collections.OrderedDict(ship)

print ship

new_dict = collections.OrderedDict()
new_dict["NAME"]=ship["NAME"]
new_dict["HP"]=ship["HP"]
new_dict["BLASTERS"]=ship["BLASTERS"]
new_dict["THRUSTERS"]=ship["THRUSTERS"]
new_dict["PRICE"]=ship["PRICE"]

print new_dict 
```

这将被输出：

```
OrderedDict([('PRICE', 250), ('HP', 50), ('NAME', 'Albatross'), ('BLASTERS', 13), ('THRUSTERS', 18)])
OrderedDict([('NAME', 'Albatross'), ('HP', 50), ('BLASTERS', 13), ('THRUSTERS', 18), ('PRICE', 250)]) 
```

**注意**：删除条目时，新排序的字典会保持其排序顺序。但是当添加新键时，键被附加到末尾并且不维护排序。（[官方文档](https://docs.python.org/2/library/collections.html#collections.OrderedDict)）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-13T17:56:10.963

您可以在一行中从旧字典创建有序字典：

```
from collections import OrderedDict
ordered_dict = OrderedDict(sorted(ship.items()) 
```

默认排序键是按字典键，所以新`ordered_dict`的按旧字典的键排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-05T04:40:17.500

使用 dict.items(); 它可以简单如下：

```
ship = collections.OrderedDict(ship.items()) 
```

# javascript - 有没有办法使用 JS 或 jQuery 来操作 JavaScript 表单？

> ID：15711757
> 
> 赞同：0
> 
> 时间：2013-03-29T21:35:03.763
> 
> 标签：javascript, jquery, forms

我使用的附属程序可以为您提供一些可以放在您的网站上的小表格，但通常它们完全由 javascript 组成（因此，其中没有 HTML 标记、ID 或类）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:38:04.257

这些可能使用 AJAX 引入表单。JS 或 JQuery 不能自己显示页面元素，因为它们需要 HTML。您可以做的是使用[Chrome 开发人员工具](https://developers.google.com/chrome-developer-tools/docs/overview "Chrome 开发者工具")在它们加载的表单中查找 ID 或类，然后在 AJAX 调用之后从那里编辑表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:38:07.713

如果有一个表单，那么它最终必须将元素绘制到 DOM 中以供页面呈现。如果您确实需要，总有一种方法可以访问这些节点，但如果它们不包含 ID 或名称，那么您将不得不遍历树并根据您在完成页面中看到的内容查找特定关系。它肯定会是一个 PITA，但它是可行的。

# git - git push 在一个新分支上：自动化

> ID：15711758
> 
> 赞同：-3
> 
> 时间：2013-03-29T21:35:11.030
> 
> 标签：git

任何时候我开一家分店（我每张票都需要一张），我试着做`git push`我得到的

```
fatal: The current branch testchx has no upstream branch.
To push the current branch and set the remote as upstream, use

  git push --set-upstream origin testchx 
```

有没有办法告诉 git 自动执行`git push --set-upstream origin testchx`而不是死于致命？

Git版本：1.8.1.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:39:32.483

一种方法是按照错误消息中的说明进行操作：

```
git push --set-upstream origin testchx 
```

另一个是设置`push.default`行为：

```
git config push.default current 
```

更多详情：

```
git help config 
```

# verilog - 错误：Verilog 系统函数 $value$plusargs 作为任务调用。返回值将被忽略

> ID：15711764
> 
> 赞同：0
> 
> 时间：2013-03-29T21:35:45.940
> 
> 标签：verilog, system-verilog

> Verilog 系统函数 $value$plusargs 作为任务调用。返回值将被忽略

我在编译我的 verilog 测试期间遇到上述错误，该测试基本上是试图通过 i2c 读取和写入值。我之前没有收到此错误。我不知道是什么更改导致我出现此错误。此外，此错误指向另一个名为 tb.v 的文件，其中包含测试台基础结构。它在 tb.v 中指向的行只是说 `ifdef TEST

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:51:06.400

该错误消息意味着您正在调用一个函数，该函数返回一个值而不对返回值做任何事情。正如布赖恩所说，`$value$plusargs`返回一个值，因此您需要将其分配给某物，或者在 SystemVerilog 中您可以使用`void'(..)`.

```
// For Verilog
reg result;
result = $value$plusargs(...); 
```

-

```
// For SystemVerilog
void'($value$plusargs(...)); 
```

您可能还想知道 plusarg 是否匹配。在这种情况下，最好以这种方式编码：

```
if ($value$plusargs(...)) begin
  // do something
end 
```

关于为什么你突然开始看到这个的一种解释是，如果你改变了一些东西，所以源代码被编译为 SystemVerilog 而不是 Verilog。它依赖于工具，但给定的编译器可能会在 SystemVerilog 中抱怨这一点，但在 Verilog 中不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:38:53.287

$value$pluargs 是一个返回值的函数。这个值是调用是否成功。不是您尝试获得的 +arg 的值。如果您不将结果分配给某些东西，我已经看到一些模拟器会感到不安。

基本上这将解决它：

```
reg dummy;
dummy = $value$plusargs(...) 
```

# jquery - 结合两个 html 表单（一个在 JSP 页面顶部，另一个在 jQuery 选项卡内）？

> ID：15711766
> 
> 赞同：0
> 
> 时间：2013-03-29T21:35:50.677
> 
> 标签：jquery, forms, jquery-ui, jsp

我有两个简单的表单，我想在单击 jQuery 选项卡内的单个提交时将数据保存在这两个表单上。

我已经读过，结合 2 个表单比为这些表单使用单个提交按钮更好。我正在使用 Strut2，它们都进入同一个动作类。我不知道如何组合位于两个不同位置的两种形式。

如果您需要代码，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:25:53.793

要通过 AJAX 发送数据可以执行以下操作，只需相应地调整表单的 ID：

```
$('#saveNoteButton').click(function(evt){
    evt.preventDefault();/* prevent browser default submit*/
    var inputs=$('#form1,#form2').find(':input').not(this);
    var form_data={};
    inputs.each(function(){
        var $this=$(this)
        if( $this.is(':radio') && !this.checked){
            return;
        }
        form_data[this.name]=$this.val();
    });

    /* now send via AJAX*/
  $.post('/path/To/Server/',  form_data, function(response){  
        // do something with server response here
    });/* if return json add datatype argument, see docs*/

}); 
```

演示：http: [//jsfiddle.net/HnyYe/1](http://jsfiddle.net/HnyYe/1)

**已更新**- 仅针对已检查的无线电进行调整

# html - 如何使用 d3 创建键值对的动态表

> ID：15711773
> 
> 赞同：0
> 
> 时间：2013-03-29T21:36:12.973
> 
> 标签：html, csv, d3.js, html-table

我想使用 d3 为可选数据点动态生成键值对表。

例如，对于下面粘贴的 data.csv 文件，我有 d3 代码，它将 4 个数据点的 x、y 值绘制为 svg 中的圆圈。我希望能够在单击每个圆圈时生成一个键值对表。因此，对于 point1（第 1 行），表格将是：

```
<table>
<thead>
<tr> <th>Key</th>  <th>Value</th>  </tr>
</thead>
<tbody>
<tr> <td>name</td> <td>point1</td> </tr>
<tr> <td>x</td>    <td>50</td>     </tr>
<tr> <td>y</td>    <td>200</td>    </tr>
<tr> <td>f</td>    <td>1</td>      </tr>
</tbody>
</table> 
```

此表将根据所选数据点进行更新 - 请注意标题保持不变，但表的内容应更改。到目前为止的示例数据和我的 d3 + html 代码如下。非常感谢任何帮助。

**数据.csv**

```
name,x,y,f
point1,50,170,1
point2,100,75,2
point3,150,125,3
point4,35,25,4 
```

**例子.js**

```
var svg = d3.select("body")
   .append("svg")
   .attr("width", 400)
   .attr("height", 200);

var mktable = function(dat) {
   console.log(dat)  // data is available!

   var tr = d3.select("tbody").selectAll("tr")
      .data(d3.keys(dat)).enter().append("tr")  

   var td = tr.selectAll("td")
      .data(function(d){return d})
      .enter().append("td")
      .text(function(d) {return d})
};

d3.text("data.csv", function(text) {
   var data = d3.csv.parse(text);

   svg.selectAll("circle")
      .data(data)
      .enter()
      .append("svg:circle")
      .attr("cx", function(d) {
         return parseFloat(d.x);
      })
      .attr("cy", function(d) {
         return parseFloat(d.y);
      })
      .attr("r", function(d) {
         return 3;
      })
      .on("mouseover", function() {
         d3.select(this)
            .attr("r", function(d) { return 7 });
      })
      .on("mouseout", function() {
         d3.select(this)
            .attr("r", function(d) { return 3 });
      })
      .on("click", mktable)
}); 
```

**例子.html**

```
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>D3 Test</title>
     <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
 </head>
 <body>
   <script type="text/javascript" src="example.js"></script>
<table>
   <thead>
      <tr><th>Key</th><th>Value</th></tr>
   </thead>
   <tbody>
   </tbody>
</table>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:31:19.037

进度 - 此 mktable 函数为第一次单击生成正确的表格，但单击第二个点会添加**额外的**td 元素而不是**替换**它们。

```
var mktable = function(dat, i) {
    var tr = d3.select("tbody").selectAll("tr")
        .data(d3.entries(dat));

     tr.enter().append("tr");

    tr.append("td")
        .text(function(d) { return d.key });

    tr.append("td")
        .text(function(d) { return d.value });

    tr.exit().remove();
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:45:36.623

在编写属性时，您还可以读取它们，处理点击事件。因此，您可以读取您在矢量`circle`元素中设置的任何属性，并使用它们来生成表格。

如果需要额外的值，可以将它们保存在`data-`圆圈中的属性中，例如`data-name`. 以这种`data-`方式构造属性以符合 w3c 规范。

在您的情况下，我认为表格对齐很难以简单的方式实现，因为表格是 HTML 元素，不能附加到 SVG 元素。您可能可以用 覆盖表格`z-index`，但我建议您使用其他技术来显示该值，例如设置`title`或附加和 SVG 元素。

# r - 你如何在 R 中使用 solve.QP 使用 quadprog 进行投资组合优化，没有卖空

> ID：15711776
> 
> 赞同：1
> 
> 时间：2013-03-29T21:36:31.013
> 
> 标签：r

在R中，使用quadprog，在用于投资组合优化的函数solve.QP中，如何将权重总和的约束设置为等于1，并且每个权重都是非负的（没有卖空）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T22:45:28.837

设`V`是资产收益、 `mu`预期收益和`n`资产数量的方差矩阵。以下发现`w`最小化 `t(w) %*% V %*% w - mu` 受约束 `sum(w)=1`和`w>=0`。

```
library(quadprog)
A <- cbind(                 # One constraint per column
  matrix( rep(1,n), nr=n ), # The weights sum up to 1
  diag(n)                   # No short-selling
)
b <- c(1, rep(0,n))
r <- solve.QP(V, mu, A, b, meq=1) 
```

# c# - 如何“取消引用”闭包？

> ID：15711777
> 
> 赞同：2
> 
> 时间：2013-03-29T21:36:33.587
> 
> 标签：c#, lambda, expression-trees

所以我正在解析一个表达式树，但我遇到了一个异常。给定表达式：

```
Int32 five = 5;

var query = Z<MyPersonTable>.QueryVia<IPersonQuery>()
    .Where(person => five == 5); 
```

当我解析该`five`字段而不是获取实际数字时，我得到：

`Program.Hosting.TestService.P+<>;c__DisplayClass0`

我承认必须是一个闭包，但我如何从中获得实际价值？

这是我的解析器：

```
 private static XElement Parse(ConstantExpression constant)
    {
        return new XElement("CONSTANT",
            new XAttribute("TYPE", constant.Type),
                constant.Value);
    } 
```

这通常适用于其他值，但不是当我传入闭包时。

# java - 将输入文件作为参数传递

> ID：15711778
> 
> 赞同：0
> 
> 时间：2013-03-29T21:36:33.600
> 
> 标签：java, string, methods, input

我真的需要关于我的 java 项目的帮助。我的问题是我是 Java 新手，我不知道如何在 Java 中传递输入文件。

我需要打开一个 .dat 文件，读取该文件，并将其设置为命名常量，以便可以将其作为字符串传递给其他方法。

例如，我想在我的开始方法中打开 myFle.dat 并将其传递给这样的方法，以便我可以使用它

```
doMethod(fileString); 
```

如果可能的话，和我谈谈简单的 java，因为我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:50:43.070

您需要打开 a`Stream`并将其`File`读入 a `StringBuilder`，这是一个简单的示例：

```
final File file = new File("/path/to/my/file.txt");
final StringBuilder stringBuilder = new StringBuilder();
try (final Reader reader = new InputStreamReader(new FileInputStream(file), "UTF-8")) {
    final CharBuffer cb = CharBuffer.allocate(1024);
    while (reader.read(cb) != -1) {
        stringBuilder.append(cb.flip());
        cb.clear();
    }
}
final String fileAsString = stringBuilder.toString(); 
```

这假定文件采用“UTF-8”编码。该代码使用 Java 7 try-with-resources 构造`Reader`在您完成后关闭它。否则，您将需要使用 try-finally。

# git - Go：如何将 git 修订添加到构建的二进制文件中？

> ID：15711780
> 
> 赞同：6
> 
> 时间：2013-03-29T21:36:39.783
> 
> 标签：git, version-control, go

我想将当前的 git 修订号添加到构建的二进制文件中，`go build`以便我可以做一些事情，例如`./mybinary --revision`查看它是从哪个修订版构建的（通常用于稍后部署后的故障排除）。

显然，我不能将修订号放入源代码中，因为这会用新版本更改源代码。

我想知道是否有其他方法可以做到这一点？
或者你认为这只是一个坏主意？如果是这样，在构建的二进制文件与其源版本之间建立关系的推荐方法是什么？
对于分布式版本控制系统，版本号似乎不是一个好主意。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T11:12:49.667

如果您可以将 git 修订版放入 $VERSION 并`version`在您的主包中有一个名为（类型字符串）的变量，您可以在构建期间使用以下命令设置它：

```
#!/bin/sh
VERSION=`git rev-parse --short HEAD`
go build -ldflags "-X main.version=$VERSION"  myfile.go 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:02:45.803

对于Git 代码中的*所有版本和任何*版本，获取任何变更集的标识字符串的**最明显方法**`--revision`是（而我留给您在选项上显示此字符串的任务）是

*   使用（至少偶尔）标签
*   构建阶段的[git describe （带有相关选项）](https://www.kernel.org/pub/software/scm/git/docs/git-describe.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T03:32:16.590

我会`version.go`用一个文件创建一个文件，`var version string`然后在调用之前处理`go build`它并在之后重置它。换句话说，go 不支持任何类型的代码生成，因此您需要依赖外部的东西来执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-18T06:45:43.230

`ldflags`从 Go 1.18（2021 年第 4 季度/2022 年第 1 季度）开始，正常流程不应再涉及任何.

请参阅[问题 37475](https://github.com/golang/go/issues/37475)和[CL 356013](https://go-review.googlesource.com/c/go/+/356013/2/doc/go1.18.html)

> **该`go`命令现在将版本控制信息嵌入到二进制文件中，**包括当前签出的修订版和指示是否存在已编辑或未跟踪文件的标志。
> 
> Version control information is embedded if the `go` command is invoked in a directory within a Git or Mercurial repository, and the `main` package and its containing `main` module are in the same repository.
> This information may be omitted using the flag `-buildvcs=false`.
> 
> Additionally, the `go` command embeds information about:
> 
> *   the build including build and tool tags (set with `-tags`),
> *   compiler,
> *   assembler, and
> *   linker flags (like `-gcflags`),
> *   whether `cgo` was enabled, and if it was, the values of the `cgo` environment variables (like `CGO_CFLAGS`).
> 
> This information may be omitted using the flag `-buildinfo=false`.
> 
> Both VCS and build information may be read together with module information using:
> 
> *   `go version -m file` or
> *   `runtime/debug.ReadBuildInfo` (for the currently running binary) or
> *   the new [`debug/buildinfo` package](https://pkg.go.dev/debug/buildinfo@master).

[CL 373875](https://go-review.googlesource.com/c/go/+/373875/) adds

> *   The `BuildInfo` struct has new fields with additional information about how the binary was built.
> *   The new `GoVersion` field holds the version of Go used to build the binary.
> *   The new `Settings` field is a slice of `BuildSettings` structs holding key/value pairs describing the build.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T21:57:46.287

您通常会使用标签（在其他版本控制系统中也称为标签）来记录构成特定构建的文件。 [http://git-scm.com/book/en/Git-Basics-Tagging](http://git-scm.com/book/en/Git-Basics-Tagging)。我通常制作包含版本和构建日期的标签。例如 v1.2_29Mar2013。如果我有几个可以从同一个代码库构建的产品，我将包含一些东西来识别哪个产品。

# c++ - 丢失 OpenGL 输出

> ID：15711781
> 
> 赞同：1
> 
> 时间：2013-03-29T21:36:44.270
> 
> 标签：c++, qt, opengl

一周前我将我的操作系统升级到最新版本，所以 GLEW、nVidia 驱动程序、g++、Qt 等也都升级了。那是我`QGLWidget`停止显示原始 OpenGL 3.3 内容的那一天，只显示基于 2D`QPainter`的内容。由于我机器上的其他 OpenGL 应用程序（包括我的 DE）没有受到影响，我一定在我的应用程序中编写了一些不可靠的代码，这些库的旧版本可能已经允许这些代码 - 现在已经修改。

我有很多高度抽象的 OpenGL 代码，有很多潜在的失败地方；经过几天尝试从中获取任何类型的输出（`glGetError()`在我开始弄乱它之前没有返回错误），我决定最好的办法是编写最简单的 OpenGL 应用程序，然后慢慢构建它直到它坏了。

但我什至不能让一个三角形出现！

```
void Viewer::initializeGL()
{
    //  Initialise GLEW, compile/link fragment and vertex shaders, error check, etc.
    ...

    //  Create default VAO.
    glGenVertexArrays( 1, &vao_ );
    glBindVertexArray( vao_ );

    glUseProgram( shader_ );
    vVertex_ = glGetAttribLocation( shader_, "vVertex" );

    //  Create the test triangle VBO.
    glGenBuffers( 1, &vbo_ );
    glBindBuffer( GL_ARRAY_BUFFER, vbo_ );
    glEnableVertexAttribArray( vVertex_ );
    glVertexAttribPointer( vVertex_, 3, GL_FLOAT, false, 0,
                           reinterpret_cast< GLvoid* >( 0 ) );

    //  Upload the data to the GPU.
    static const float verts[9] = { 0.0f, 0.0f, -0.5f,
                                    1.0f, 0.0f, -0.5f,
                                    0.5f, 1.0f, -0.5f };
    glBufferData( GL_ARRAY_BUFFER, sizeof( verts ),
                  static_cast< const void* >( verts ), GL_STATIC_DRAW );

    glBindBuffer( GL_ARRAY_BUFFER, GL_NONE );
    glDisableVertexAttribArray( vVertex_ );
    Sy_GL::checkError();
}

void Viewer::paintGL()
{
    //  Clear the buffers.
    qglClearColor( QColor( Qt::black ) );
    glClear( GL_COLOR_BUFFER_BIT );

    glPolygonMode( GL_FRONT_AND_BACK, GL_LINE );

    glBindBuffer( GL_ARRAY_BUFFER, vbo_ );
    glEnableVertexAttribArray( vVertex_ );
    glVertexAttribPointer( vVertex_, 3, GL_FLOAT, false, 0,
                           reinterpret_cast< GLvoid* >( 0 ) );

    glDrawArrays( GL_TRIANGLES, 0, 3 );

    glBindBuffer( GL_ARRAY_BUFFER, GL_NONE );
    glDisableVertexAttribArray( vVertex_ );

    Sy_GL::checkError();
} 
```

我没有将我的 VAO 用于它的用途，因为 VAO 不能跨上下文共享，这是我的“真实”应用程序中的场景，所以我在这里复制这种情况。 `Sy_GL::checkError()`如果有问题，只需调用`glGetError()`并抛出异常。我的两个着色器再简单不过了：

```
//  Vertex shader.
#version 330
in vec3 vVertex;
void main( void )
{
    gl_Position = vec4( vVertex, 1.0 );
}

//  Fragment shader (in different file).
#version 330
out vec4 fragColour;
void main( void )
{
    fragColour = vec4( 1.0, 0.0, 0.0, 1.0 );
} 
```

这应该在黑色背景上显示一个红线渲染的三角形，但我只是得到黑色背景 - 没有控制台输出或异常。我的系统确实支持 OpenGL 3.3 及更高版本，这是我的 `glxinfo`输出的顶部：

```
name of display: :0
display: :0  screen: 0
direct rendering: Yes
server glx vendor string: NVIDIA Corporation
server glx version string: 1.4 
```

我的`glewinfo`输出：

```
GLEW version 1.9.0
Reporting capabilities of display :0, visual 0x2b
Running on a GeForce GTX 560 Ti/PCIe/SSE2 from NVIDIA Corporation
OpenGL version 4.3.0 NVIDIA 310.32 is supported 
```

所以我的问题是：我的代码错了吗？还是我的系统被非常微妙地损坏了？

## 编辑

似乎`QGLFormat`报告说我只有**OpenGL v1.0** - Qt 使用什么机制来获取该值？

在我的“真实”应用程序中，我使用 执行 OpenGL 版本检查`QGLFormat::openGLVersionFlags() & QGLFormat::OpenGL_Version_3_3`，并且通过了；但分别使用`myQGLWidget->format().majorVersion()`和`myQGLWidget->format().minorVersion()`返回`1`和`0`。

## 编辑 2

有趣的是，如果我`QGLFormat`在 main.cpp 中设置 v3.3 的默认值：

```
QGLFormat format( QGL::DoubleBuffer |
                  QGL::DepthBuffer |
                  QGL::AlphaChannel );
format.setVersion( 3, 3 );
QGLFormat::setDefaultFormat( format ); 
```

It segfaults on the first of *my* OpenGL calls, specifically `glGenVertexArrays(1, &vao_)`, but `myQGLWidget->format().majorVersion()` and `myQGLWidget->format().minorVersion()` return `3` and `3` respectively.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:00:57.247

We recently had this at work. The cause was the latest NVIDIA drivers, which broke the major and minor version queries.

**Edit:** I think it may have been related to calling these functions before setting up a valid GL context. **End edit**

So, you could try with a slightly older driver. However, there is also an issue with some Qt versions and glversion. Check this link out:

[http://qt-project.org/forums/viewthread/20424](http://qt-project.org/forums/viewthread/20424)

# jsf-2 - jsf datagrid的自定义布局

> ID：15711782
> 
> 赞同：0
> 
> 时间：2013-03-29T21:36:44.350
> 
> 标签：jsf-2, datagrid, primefaces

使用 JSF2 数据网格组件在页面上显示 8 个实体的图像很容易，如下所示：

![在此处输入图像描述](../Images/6c2b7f4680221dc208901241b3da9162.png)

我想要的是看起来像这样的东西：

![在此处输入图像描述](../Images/8edd8494f229ba33de131c283f87b587.png)

我一直无法实现这种布局。有谁知道我该如何进行？

# php - Wordpress admin_ini 在主题和插件中声明，中断

> ID：15711783
> 
> 赞同：0
> 
> 时间：2013-03-29T21:36:48.410
> 
> 标签：php, wordpress

我刚刚完成定制的一个新的现成的 wordpress 主题遇到了问题。当我将它安装在我的生产机器上（带有许多插件）时，网站会抛出一个错误：

致命错误：无法重新声明 admin_init()

以及两个实例的路径。当我查找它们时，我看到在主题文件中声明了这个函数：

```
add_action('admin_init', 'admin_init');
function admin_init()
{.... 
```

这个在插件文件中声明：

```
add_action("admin_init", "admin_init");
function admin_init(){... 
```

显然错误表明这是不允许的。但我的问题是，解决这个问题的**最佳**方法是什么，以便主题和插件都能获得他们需要的工作？在这种情况下，我将“最佳”定义为在更新（插件和主题......认为插件可能比主题更频繁地更新）时需要最少保姆的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:46:22.713

在开发 WordPress 主题时，[Codex 说](http://codex.wordpress.org/Theme_Review#Theme_Namespacing)：

> 主题需要使用唯一的 slug 作为公共命名空间中任何内容的前缀，包括所有自定义函数名称、类、挂钩、公共/全局变量、数据库条目（主题选项、发布自定义元数据等）

So, the standard solution to the problem would be to use a unique slug to prefix the public function, based on the name of the theme.

```
add_action('admin_init', 'my_theme_slug_admin_init');
function my_theme_slug_admin_init()
{.... 
```

If you're familiar with PHP classes, and OOP in general, one approach that people use to minimise changes (and typing out slugs!) is to wrap custom functions up in a class. That approach (as described [here](http://hardcorewp.com/2012/using-classes-as-code-wrappers-for-wordpress-plugins/) and to some degree in [the answers to this (slightly annoyed!) question](https://wordpress.stackexchange.com/questions/5777/using-oop-in-themes) encapsulates your custom functions in a class, so only the class name itself appears in the global namespace.

# c - 常量的正确定义

> ID：15711785
> 
> 赞同：1
> 
> 时间：2013-03-29T21:36:50.077
> 
> 标签：c, arrays, global-variables

我在以正确的方式定义我在代码中使用的常量时遇到了一些麻烦。虽然我在[How do I use extern to share variables between source files？](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c)，我好像误会了什么。这是设置：

```
/*   constants.h   */
extern int NUM_PARTICLES;
extern int LIGHTSPEED; 
```

此标头用于[random.h](http://pastebin.com/STmL2WWj)和[main.c](http://pastebin.com/UdVf08xs)，看起来像

```
#include "constants.h"
int NUM_PARTICLES=104; 
```

在`random.h`或

```
#include "constants.h"
int LIGHTSPEED=104; 
```

中`main.c`，分别。`NUM_PARTICLES`在 main.c 中使用

```
30:  double ghosts[NUM_PARTICLES][4];
31:  double output[NUM_PARTICLES][3]; 
```

虽然这件事有效，但我收到以下警告，

```
main.c: In function ‘int main()’:
main.c:30:32: warning: ISO C++ forbids variable length array ‘ghosts’ [-Wvla]
main.c:31:32: warning: ISO C++ forbids variable length array ‘output’ [-Wvla] 
```

这很奇怪，因为在我看来，我**确实**给数组一个在编译时已知的常量值。（通常这些数组长度错误会导致一些段错误，在这种情况下它们不会。）有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:39:53.863

短篇小说：这是 C 的一个怪癖。

通常，您会将整数常量定义为

```
const int LIGHTSPEED = 104; 
```

问题是根据语言规则，这个常量不是*常量表达式*，因此不能用于指定静态分配数组的大小。

C 标准的相关部分（6.6/6，我不是编造的）定义了*整数常量表达式*是什么：

> 整数常量表达式应具有整数类型，并且应仅具有整数常量、枚举常量、字符常量、结果为整数常量的 sizeof 表达式和作为强制转换的直接操作数的浮点常量的操作数。

有两种解决方案。经典的方法是使用宏，它只是`104`在编译器看到代码之前在尖括号之间粘贴，因此使数组大小成为整数常量：

```
#define NUM_PARTICLES 104 
```

更好的一个（IMO）是避免使用宏，因为你可以使用一个`enum`，这是可能的（你正在使用一个枚举常量）：

```
enum { NUM_PARTICLES = 104 }; 
```

# java - Eclipse 代码格式化程序：如何删除它的效果？

> ID：15711786
> 
> 赞同：5
> 
> 时间：2013-03-29T21:36:57.710
> 
> 标签：java, eclipse

对于一个错误，我在 eclipse v. 3.4.2 中将我的源代码格式化为单个类文件。这真的很令人困惑，我怎样才能恢复我自己的原始文本格式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T21:39:20.020

最简单的方法可能是使用 Eclipse 的 Local History。在文件的上下文菜单中，选择“从本地历史记录恢复”。如果它不在*本地*历史记录中，您可能需要在源代码控制中返回到以前的版本...（我假设您正在使用源代码控制。如果不是，我强烈建议您立即这样做.)

当然，如果您仍然打开文件，另一种选择就是按 Ctrl-Z 撤消操作 - 继续这样做直到格式消失:)

# ant - Ant - 轮询 REST 资源以监控远程进程

> ID：15711787
> 
> 赞同：1
> 
> 时间：2013-03-29T21:37:03.617
> 
> 标签：ant

我有点像 Ant n00b，但我希望这个问题不是太无厘头：

我有一段 Ant 脚本需要监视远程进程并报告它是成功还是失败。远程信息作为 REST 资源公开。它背后的过程可能需要几分钟，所以我可能需要轮询几次才能得到“进行中”以外的结果。

在非常粗糙的伪代码中，我需要这样的东西：

```
while(true) {
  get REST resource status
  if status='success' or status='failure'
    break;
  sleep 10
} 
```

我知道我可以（ab）使用该`<waitfor>`任务来反复评估一个条件，但我无法终生弄清楚那个条件应该是什么。我能想到的最好的方法是使用 a `<scriptcondition>`，但是我遇到了 Rhino JS（Ant 使用的）没有`XMLHttpRequest`发送 REST 查询的问题。

在 Ant 脚本的其他部分，我们使用`<exec>`运行 curl 命令来与 REST 服务交互，但我不知道如何在`<waitfor>`.

**编辑：**我忘了提到我（暂时）被 Ant 1.7.1 卡住了。此外，我意识到将其推送到外部（bash、python、php 等）脚本可能更容易，但我更愿意将其保留在 Ant 脚本中。

# php - PHP需要替换字符串第一个单词中的“空格”

> ID：15711796
> 
> 赞同：0
> 
> 时间：2013-03-29T21:37:32.710
> 
> 标签：php, str-replace

我有一个输出如下的 php 字符串：

```
San Jose, California 
```

我需要这样的php字符串输出：

```
SanJose, Caliornia 
```

我一直在玩 str_replace 但运气不佳。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:40:23.750

更新：首先爆炸

```
$string = explode(",",$string); 
```

然后对 $string 的所有值执行（例如在 foreach 中）

对于空格，使用 str_replace：

```
$string = str_replace(' ', '', $string); 
```

对于所有空格，使用 preg_replace：

```
$string = preg_replace('/\s+/', '', $string); 
```

看看这里 [如何从php中的字符串中去除所有空格？](https://stackoverflow.com/questions/2109325/how-to-strip-all-spaces-out-of-a-string-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:41:00.367

也许它不是很好，但你可以`explode`然后连接：

```
$your_string="San Jose, California";
$arr = explode(" ", $your_string);
$result = $arr[0] . $arr[1] . " " . $arr[2]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T21:43:10.673

你可以试试`substr_replace`

```
$str = "San Jose, California" ;
echo substr_replace($str, '', strpos($str, " "), 1); 
```

输出

```
SanJose, California 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T21:45:42.043

鉴于字符串是 CSV，您可以分解它，处理每个值，然后分解它。

## 例子：

```
$string = "San Jose, California";
$values = explode(",", $string);
foreach($values as &$value)
{
    $value = str_replace(" ", "", $value);
}

$output = implode(", ", $values); 
```

*未经测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T21:41:13.760

不要使用正则表达式，它是矫枉过正（慢）。使用 strreplace 的 count 参数：

```
mixed str_replace ( mixed $search , mixed $replace , mixed $subject [, int &$count ] ) 
```

来自 PHP 手册：

> **数数**
> 
> 如果通过，这将设置为执行的替换次数。

```
$str = "San Jose, California";
$result = str_replace(" ", "", $str, 1); 
```

# c++ - std::map 如何确保所有指针都为空？

> ID：15711798
> 
> 赞同：1
> 
> 时间：2013-03-29T21:37:38.537
> 
> 标签：c++, stl, std, stdmap

我正在实现一个类似于 std 的自定义地图类，但是我有一个问题。在他们的地图中，当你这样做时（例如）：

```
map<string, SomeObject*> container;
SomeObject* object = container["this doesn't exist"]; 
```

在调试器对象中是**0x0000000**，因此映射中的无效值始终为空。但是，在我的映射中，无效值就像未初始化的指针 - 它们具有像**0xcdcdcdcd**这样的无效值，但是在发布模式下它是别的东西，所以我不能依赖检查为了

```
if(object == 0xcdcdcdcd) 
```

所以我希望能够做到这一点：

```
MyMap<string, SomeObject*> container;
SomeObject* object = container["this doesn't exist"]; //and for this to definetely be nullptr 
```

所以我可以这样做

```
if(object == nullptr)
   DoSomething(); 
```

我有一个**bool ContainsKey(KeyType key);** 函数，但它涉及一个 for 循环。是否有某种方法可以确保我在初始化时为地图提供什么，或者我是否必须制作一个自定义**PointerWrapper**，该指针将包含 SomeObject 的指针，该指针在**PointerWrapper**中**设置**为**nullptr** ' s 构造函数？我很难弄清楚 std 标头中发生了什么，它们有大量的宏和 typedef。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:40:17.417

`std::map`value 初始化它在内部创建的任何新值。对于标量类型，这意味着它们被初始化为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T21:41:25.077

Your values (**for any type**) will be initialized if you *explicitly construct* the object

```
SomeObject* object = SomeObject*();
//                              ^^ Explicit construction 
```

For classes, the default constructor is obviously being called.

For built-in types like `int`s and pointers (like `SomeObject*`), they will be zero-initialized (instead of uninitialized)

So, whileyou could use `= NULL` in your specific pointer example, syntax like this will do The Right Thing for **all types**.

```
template < typename Key, typename Value >
void MyMap<Key, Value> add_new_key( const Key &k )
{
   std::pair<Key, Value>( k, Value() );
//                                ^^ Either calls constructor or zero-initializes

   // Store the data as you wish...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T21:40:29.803

使用 std::map 当您引用不存在的条目时，它会创建一个并将其值设置为空。对于意味着将值设置为 null 的指针；**

# scala - Use List.foreach to write the equivalent of this for loop

> ID：15711803
> 
> 赞同：0
> 
> 时间：2013-03-29T21:37:54.563
> 
> 标签：scala

I have this code snippet:

```
val ln = List (1, 2, 3)

for (i <- ln){
  println(i*2)
  } 
```

Is it possible to write the same code but using the `List.foreach` method?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:39:50.537

```
ln.foreach(i => println(i*2)) 
```

# sql - 使用 CONVERT(DATE, column) 添加计算列时出现“验证公式时出错”

> ID：15711807
> 
> 赞同：4
> 
> 时间：2013-03-29T21:38:08.027
> 
> 标签：sql, sql-server, ssms, calculated-columns

我正在尝试通过 SSMS 将计算列添加到表中 - 我宁愿不要详细了解为什么基列是 a`VARCHAR(10)`而不是 a`DATE`和不，我对更改它不感兴趣。

`CONVERT(DATE, [charDob])`当我在表设计器 SSMS 报告中输入公式时：

> 验证列的公式时出错`charDobTyped`。

按预期使用公式`[charDob]`“有效”，这意味着该列已正确绑定。公式也`CONVERT(DATE, '2001')`按预期“有效” - 因此使用导致错误的列存在一些问题。

原始列是 a`VARCHAR(10)`并且包含 NULL 值*或*可转换为 的值`DATE`。查询`SELECT CONVERT(DATE,charDob) as dob FROM people`按预期工作。此外，错误消息是关于“无效公式”而不是关于数据转换错误，所以我不认为不可转换是造成这种情况的原因。

我已经用新的计算列和一个虚拟值保存了表并重新连接到数据库——这是为了确保不会发生奇怪的缓存问题，就像有时会发生的那样。该错误独立于持久化标志而持续存在——如果它很容易关闭就好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T21:45:07.663

Management Studio 并不是执行大多数 DDL 的最佳方式。请打开一个新的查询窗口并使用：

```
ALTER TABLE dbo.whatever ADD newcolumn AS (CONVERT(DATE, CharDob)); 
```

这是具体的错误：

[http://connect.microsoft.com/SQLServer/feedback/details/291134/katmai-table-designer-cant-validate-computed-column-formula](http://connect.microsoft.com/SQLServer/feedback/details/291134/katmai-table-designer-cant-validate-computed-column-formula)

"Next release" in this context is most certainly SQL Server 2012, so if you are using 2008 or 2008 R2 SSMS (why?), the fix won't apply to you.

# c++ - what is the purpose of std::set >?

> ID：15711812
> 
> 赞同：6
> 
> 时间：2013-03-29T21:38:20.210
> 
> 标签：c++, set, std, owner

I'm trying to dissect this websocket++ example [https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp)

At line 126, there is `typedef std::set<connection_hdl,std::owner_less<connection_hdl>> con_list;`. I'm wondering why it isn't merely `typedef std::set<connection_hdl> con_list;`.

I've read [How does the Comma Operator work](https://stackoverflow.com/questions/54142/how-does-the-comma-operator-work) and [http://en.cppreference.com/w/cpp/memory/owner_less](http://en.cppreference.com/w/cpp/memory/owner_less) but I'm not sure what the purpose is.

What is actually stored in the `std::set`? What does `std::owner_less` actually do? What is the purpose of making a container with this structure instead of storing the `connection_hdl`s themselves?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T21:43:45.643

This has nothing to do with comma operator. A `set<T>` requires that `T` be less-than-comparable, i.e. `operator <` should be defined for `T`. The reason for this is that the set keeps its elements in an ordered fashion(via one kind of tree or another). You can supply a set with a second template argument - a functor that compares two elements so that the set can use that comparison. [`std::owner_less`](http://en.cppreference.com/w/cpp/memory/owner_less) is a predicate template that operates on shared and weak pointers and performs owner-based (as opposed to value-based) ordering.

# ip - 端口转发后响应的包内容

> ID：15711813
> 
> 赞同：1
> 
> 时间：2013-03-29T21:38:43.603
> 
> 标签：ip, router, nat, portforwarding

我以为我了解关于 NAT 等的全部内容，但现在我遇到了问题。
首先我假设：
因为没有足够的 IPv4 地址可用，我们需要另一个系统。今天在家中连接到互联网的设备是以下组合：
1) 物理级别的调制解调器，用于更改线路上的信号类型。
2）链路级交换机，因此您可以将多台计算机连接到设备
3）路由器将所有计算机连接到互联网并超出您的家庭子网等
4）允许所有内部计算机连接的 NAT到外部
5) 一个端口转发器，让外部连接到内部网络

我称之为 NAT：
当向外部发出请求时：设备的 NAT 部分会更改来自内部计算机的请求的源端口和源 IP。新的源 IP 将是您的公共 IP。NAT 部分将在具有此映射的表中保存一条记录：“original-ip, original-port, new-port”。
当响应返回时，NAT 将检查目标端口并将其与他的表中的新端口进行比较。如果找到匹配项，NAT 将用 original-ip 替换 destination-ip，用 original-port 替换 new-port。结果，响应将被转发到发出请求的内部计算机。因此，NAT 部分用于从内部初始化连接时。当这个请求穿过 NAT 时，有两件事发生了变化：source-ip 和 source-port。

然后是端口转发器：
设备的这一部分将接受在外界初始化到您的网络的连接。它将查看传入请求的目标端口，并通过为该端口号制定规则，它可以将请求的目标端口和目标 IP 更改为内部 IP。使用这些规则，来自外部的请求可以连接到内部网络上的计算机，因此端口转发器会更改两件事：目标 IP 和目标端口。

A：在我问我的问题之前，这是怎么解释的？

现在我的问题是通过端口转发器从外部发出请求后的响应。假设制定了正确的规则，并且通过内部计算机上的端口转发发出了请求。因此，在端口转发器中，destination-ip 更改为计算机的 internal-ip，destination-port 更改为运行服务的端口。如果此内部计算机是网络服务器，它将生成响应。因此destination-ip 将是请求的源ip，destination-port 将是请求的源端口。source-ip 将是计算机的内部 ip，source-port 将是服务的端口。

现在，这种反应必须传到外面。所以我假设它通过 NAT 到外部？所以通过NAT后，source-ip就是public-ip，source-port是随机的。现在我用wireshark测试了这个。我联系了 NAT 后面的网络服务器，我看到响应来自端口 80？！这怎么可能？这说明转发请求的响应没有通过NAT？

我重新思考了这个概念，我的新假设是，当从外部初始化连接时，它将通过端口转发器并到达正确的计算机。这将创建一个响应，当该响应到达我们的“一体机”设备时，该设备可以识别它转发了响应的请求，并且不会更改源端口。
B：确实是这样，还是以其他方式进行？

维基百科关于端口转发的说法是：“在这种情况下，源地址和端口保持不变。当在不是网络默认网关的机器上使用时，源地址必须更改为翻译机器的地址，或者数据包将绕过转换器，连接将失败。” ( [http://en.wikipedia.org/wiki/Port_forwarding](http://en.wikipedia.org/wiki/Port_forwarding) )
这确认转发请求的响应必须再次通过端口转发器而不是通过 NAT，因此源端口不会更改。端口转发器会将源 IP 更改为公共 IP。

有人可以验证这一点或给我比我的其他解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T15:08:01.363

> 现在我用wireshark测试了这个。我联系了 NAT 后面的网络服务器，我看到响应来自端口 80？！这怎么可能？这说明转发请求的响应没有通过NAT？

NAT 内的网络服务器不必在端口 80 上运行。它当然是在 NAT 上设置的，以便像在端口 80 上一样进行端口转发和响应，但这对网络服务器的端口没有多大意义实际运行。

这是一些可能有帮助的ASCII“艺术”。

```
**Internal Network**          **NAT Router**              **External Computer**
Web Server running at         IP 9.9.9.9 port 80          IP 20.20.20.20 
IP 192.168.1.7 port 4567      

                                                         Request web page at 9.9.9.9:80

                              Forwards port 80 traffic       
                              to 192.168.1.7:4567

Replies with the web page

                              Puts 9.9.9.9:80 in the 
                              source field and sends
                              the page on

                                                         Gets the page from "9.9.9.9:80" 
                                                         even though it actually came 
                                                         from 192.168.1.7:4567 
```

# java - 了解有效的 Java 深拷贝示例

> ID：15711815
> 
> 赞同：1
> 
> 时间：2013-03-29T21:38:47.580
> 
> 标签：java, copy, deep-copy, effective-java

在 Effective Java, 2nd Edition, Item 11 中可以找到以下深拷贝示例：

```
public class HashTable implements Cloneable {
    private Entry[] buckets = ...;

    private static class Entry {
        final Object key;
        Object value;
        Entry next;
        Entry(Object key, Object value, Entry next) {
            this.key = key;
            this.value = value;
            this.next = next;
        }

        // Recursively copy the linked list headed by this Entry
        Entry deepCopy() {
            return new Entry(key, value,
                    next == null ? null : next.deepCopy());
        }
    }
    @Override public HashTable clone() {
        try {
            HashTable result = (HashTable) super.clone();
            result.buckets = new Entry[buckets.length];
            for (int i = 0; i < buckets.length; i++)
                if (buckets[i] != null)
                    result.buckets[i] = buckets[i].deepCopy();
            return result;
        } catch (CloneNotSupportedException e) {
            throw new AssertionError();
        }
    } 
```

我不明白这是如何进行深层复制的：键和值是对象，因此没有原始类型。所以据我了解，使用

```
// Recursively copy the linked list headed by this Entry
Entry deepCopy() {
    return new Entry(key, value,
            next == null ? null : next.deepCopy());
} 
```

`Entry`参考原始的键和值创建一个新的`Entry`?

深拷贝基本上不是意味着：向下直到达到原始类型，然后将它们复制到克隆？

感谢您对此的任何提示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T21:41:40.530

这是一个“深拷贝”，因为对原始对象的链表（通过`next`）的更改不会在副本中看到，反之亦然。将其与新对象刚刚复制原始`next`引​​用时所采用的“浅拷贝”进行比较。

不过，就键和值而言，这是一个浅拷贝——如果它们是可变类型并且发生了变异，那么是的，变异将通过原始版本和“克隆”版本看到。

所以最终，它是比天真的“复制所有引用”方法更深的副本——但它不是一个*完全*深的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:43:26.550

创建深层副本时，在新的 HashTable 中拥有“相同”的条目是不够的。您必须为每个条目创建*新实例。*否则，每个表都将保存对同一条目对象的引用。然后，当有人修改第一个表中的值时，它也会在第二个表（新副本）中被修改。

# java - Why am I running out of memory?

> ID：15711819
> 
> 赞同：1
> 
> 时间：2013-03-29T21:39:10.933
> 
> 标签：java, android, bitmap

I have a 300 x 355 image that is only 50 kb in size. I am trying to decode it with the below code:

```
Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId)
    .copy(Bitmap.Config.ARGB_8888, true); 
```

According the logcat 10674000 bytes is trying to be allocated. Why so many? The image is only 50 kb.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T21:43:20.800

300 x 355 = 106500 pixels.

At 4 bytes per pixel, that is 426KB, which is closer to the allocation reported by your LogCat.

The `.copy()` command in your code will double the memory to 852KB, slightly closer to the 10.6MB reported.

The 50KB number you reported is probably the compressed size of the .jpg or .png file, not the uncompressed `Bitmap` being used by Android.

# java - 将背景图像添加到 JPanel

> ID：15711821
> 
> 赞同：7
> 
> 时间：2013-03-29T21:39:19.933
> 
> 标签：java, image, swing, jpanel, paintcomponent

我正在用 Java 构建棋盘游戏。对于游戏板本身，我试图将板的图像放置为整个 JPanel 的背景，它填充了 JFrame。我找到了一种方法来做到这一点，但只有本地存储的文件，它还需要能够从 GUI 所在的包中获取图像。

```
package Gui;

import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JPanel;

//Proof of concept for setting an image as background of JPanel

public class JBackgroundPanel extends JPanel {
    private BufferedImage img;

    public JBackgroundPanel() {
        // load the background image
        try {
            img = ImageIO.read(new File(
                    "C:\\Users\\Matthew\\Desktop\\5x5     Grid.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        // paint the background image and scale it to fill the entire space
        g.drawImage(img, 0, 0, getWidth(), getHeight(), this);
    }
} 
```

我读过使用 ImageIcon 是一个很好的解决方法，但我不知道如何正确使用它。

编辑 1 - 我在这里找到了答案 [http://www.coderanch.com/how-to/java/BackgroundImageOnJPanel](http://www.coderanch.com/how-to/java/BackgroundImageOnJPanel) 我的工作区中的图片格式也有误。谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T21:46:40.567

1.  确保要加载的资源位于 Jar 文件中
2.  Use `getClass().getResource("/path/to/resource")` to obtain a `URL` reference to the resource, which can be used by `ImageIO` to read the resource

So, for example, if the image was located in the /images folder inside your Jar, you could use

```
 ImageIO.read(getClass().getResource("/images/5x5    Grid.jpg")); 
```

For example...

# java - 在 Java 继承方面需要一些帮助！（在 LuxuryCarRental 中，int 天数始终为 0）

> ID：15711823
> 
> 赞同：0
> 
> 时间：2013-03-29T21:39:26.590
> 
> 标签：java, inheritance

创建一个名为 CarRental 的类，其中包含包含租户姓名、邮政编码、所租汽车大小、每日租赁费用、租赁天数和总租赁费用的字段。该类包含一个构造函数，它要求所有租赁数据都接受每日费率和总费用，这些费用是根据汽车的大小计算的：经济型每天 29.99 美元，中型每天 38.99 美元，全尺寸每天 43.50 美元. 该类还包括一个显示所有租赁数据的 display() 方法。

创建一个名为 LuxuryCarRental 的子类。此类将租赁费设置为每天 79.99 美元，并提示用户对包含司机的选项做出回应，费用为每天 200 美元以上。覆盖父类 display() 方法以包含司机费用信息。编写一个名为 UseCarRental 的应用程序，提示用户提供租赁所需的数据并创建一个正确类型的对象。显示总租金。

将文件另存为 CarRental。爪哇，豪华汽车租赁。java 和 UseCarRental。爪哇

```
public class CarRental
{
String name;
int zip;
String size;
double dailyFee;
int days;
double total;

public CarRental(String size)
{

if(size.charAt(0)=='e')
  dailyFee = 29.99;
else if(size.charAt(0)=='m')
  dailyFee = 38.99;
else
  dailyFee =43.50;
}
public String getname()
{
  return name;
}
public int getzip()
{
  return zip;
}
public String getsize()
{
return size;
}
public int getdays()
{
  return days;
}
public void computetotal(int days)
{
total = dailyFee*days;
}
public void print()
{
System.out.println("The cost of your rental car is $" + total);
}
} 

public class LuxuryCarRental extends CarRental
{
public LuxuryCarRental(String size, int days)
{
super(size);
}
public void computetotal1()
{
super.computetotal(days);
dailyFee = 79.99;
 total = dailyFee;
System.out.println(days);    //trying to see if days still 0
}
}

import javax.swing.*;
import java.util.Scanner;
public class UseCarRental
{
public static void main(String args[]) throws Exception
{
int days;
String name;
int zip;
String size;
Scanner inputDevice = new Scanner(System.in);
System.out.println("Enter days: ");
days= inputDevice.nextInt();
System.out.println("Enter name: ");
name = inputDevice.next();
System.out.println("Enter zip: ");
zip = inputDevice.nextInt();
System.out.println("Enter size: ");
size = inputDevice.next();
CarRental econ = new CarRental(size);
econ.computetotal(days);
econ.print();
CarPhone full = new CarPhone(size, days);
full.computetotal1();
full.print();
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:48:36.843

您在 LuxuryCarRental 中没有做任何事情，您的构造函数将它作为参数但不做任何事情。理想情况下，它应该传递给 CarRental 对象构造函数，但无论如何，添加

```
this.days = days; 
```

到 LuxuryCarRental 构造函数，或者使用新参数更好的 CarRental 构造函数。

也不需要重命名您的 computetotal 方法，保留相同的名称；它的子对象将覆盖其父对象的实现细节。查看多态性：[http ://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

此外，缩进您的代码以使其更具可读性[http://en.wikipedia.org/wiki/Indent_style](http://en.wikipedia.org/wiki/Indent_style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:50:02.037

您没有在两个类中的任何地方初始化天数，这就是 getdays 返回 0 的原因。请在访问它之前初始化天数。

在 CarRental 类的构造函数中，将 days 作为参数，如下所示：

```
public CarRental(String size, int days)
{

   if(size.charAt(0)=='e')
      dailyFee = 29.99;
   else if(size.charAt(0)=='m')
      dailyFee = 38.99;
   else
      dailyFee =43.50;
   this.days = days;
} 
```

在 LuxuryCarRental 的构造函数中，执行以下操作：

```
public LuxuryCarRental(String size, int days)
{
   super(size, days);
} 
```

# makefile - Autoreconf 以“非 POSIX 变量名”停止

> ID：15711824
> 
> 赞同：3
> 
> 时间：2013-03-29T21:39:27.593
> 
> 标签：makefile, posix, autoreconf

我创建了一个 Makefile.in，在其中从文件中读取内容并将其传递给 CFLAGS。调用 ./configure ... Makefile 将生成，一切正常。

```
Makefile.in: 
... 
MY_REVISION_FILE=my-revision.txt 
MY_REVISION=$(shell cat $(top_srcdir)/$(MY_REVISION_FILE)) 
AM_CFLAGS = -I$(EXTRAS_INCLUDE_DIR) -I$(top_srcdir) -DMY_REVISION=$(MY_REVISION) 
... 
```

一旦我将 Makefile.in 代码移动到 Makefile.am 以允许自动生成 Makefile.in，就会出现问题。那里调用 autoreconf -i --force 停止并出现以下错误：

```
server/Makefile.am:9: cat $(top_srcdir: non-POSIX variable name 
server/Makefile.am:9: (probably a GNU make extension) 
autoreconf: automake failed with exit status: 1 
```

这个问题已经困扰我很久了。我到处搜索，但没有找到任何可以帮助我找到解决方案的东西。简而言之，我唯一需要的是一种方法来获取未解释的文本，例如从 Makefile.am 复制到 Makefile.in 的“$(shell cat $(top_srcdir)/$(MY_REVISION_FILE))”

任何的想法？

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T22:28:23.977

正如它所说，问题是你在你的 GNUism 中使用`Makefile.am`它，而它只是为了包含可移植的 Makefile 代码。

要么重写你的代码，所以它是可移植的（你应该使用`AM_CPPFLAGS`，因为你将标志传递给预处理器，而不是编译器）：

```
AM_CPPFLAGS = -I$(EXTRAS_INCLUDE_DIR) -I$(top_srcdir) -DMY_REVISION=`cat $(top_srcdir)/$(MY_REVISION_FILE)` 
```

如果您不想`cat`在每次编译时都调用，您可以在 in 中找到值`configure.ac`并将`AC_SUBST`其放入`Makefile`或`AC_DEFINE`it 放入`config.h`.

或者，如果您想成为非便携式（ಠ_ಠ），您可以`-Werror`取出您的`AM_INIT_AUTOMAKE`or `AUTOMAKE_OPTIONS`，或添加`-Wno-portability`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:57:24.947

经过长时间的反复测试，我决定使用 AC_SUBST。我的解决方案可能不是最干净的，但它对我有用。

在 configure.ac 我添加了以下行 AC_SUBST([DOLLAR_SIGN],[$])

In the Makefile.am I changed my previous line into MY_REVISION=@DOLLAR_SIGN@(shell cat $(SRC_DIR)/$(MY_REVISION_FILE))

And it works. Again, thanks for your help.

# javascript - requirejs 文本插件将 html 解释为脚本

> ID：15711831
> 
> 赞同：3
> 
> 时间：2013-03-29T21:40:06.583
> 
> 标签：javascript, cross-domain, requirejs, requirejs-text

我使用 require.js 文本插件（[https://github.com/requirejs/text](https://github.com/requirejs/text)）从服务器加载我的 html 模块。

服务器有另一个主机，因此通过在 require.config 对象中使用 Xhr 来允许 coss-domain-request。

```
text: {
  useXhr: function (url, protocol, hostname, port) {
    // allow cross-domain requests
    // remote server allows CORS

    return true;
  }
}, 
```

但是当我加载一些模块时，浏览器会尝试将加载的文件解释为 javascript 文件。

```
define([
  'text!/view_templates/header.html'], function(html){
    console.log(html) 
}) 
```

在broser中得到：

> 资源解释为脚本，但使用 MIME 类型 text/html 传输：“ [http://app-id.appspot.com/gadget/js/app/view_templates/header.html](http://app-id.appspot.com/gadget/js/app/view_templates/header.html) ”。require.js:1843 Uncaught SyntaxError: Unexpected token < header.html:1

有谁知道问题出在哪里？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-14T08:58:08.333

[我花了好几个小时才在这里](https://stackoverflow.com/a/38369034/57091)找到它。useXhr 没有被调用可能是因为配置键不正确。不仅如此`text`，它还需要包含路径。所以应该是：

```
'some/path/to/text': {
  useXhr: function (url, protocol, hostname, port) {
    return true;
  }
}, 
```

或者什么也应该起作用：

```
text: {
  useXhr: function (url, protocol, hostname, port) {
    return true;
  }
},
paths: {
    text: 'some/path/to/text'
} 
```

# windows-8 - Windows 8：如何检测 UI 元素何时被拖出屏幕

> ID：15711832
> 
> 赞同：1
> 
> 时间：2013-03-29T21:40:11.307
> 
> 标签：windows-8, microsoft-metro, windows-store-apps, winrt-xaml

如何检测何时将 UI 元素拖出 Windows 8 商店应用程序的屏幕。

我有一个显示给用户的项目列表。我希望用户将他/她想要从他们的视图中删除的项目从屏幕上弹开。

谢谢，斯科特尼姆罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:32:15.723

是的。您可以使用 ManipulationDelta 事件和 CompositeTransform 操作您的对象。然后，您需要使用 TransformToAncestor 方法检查相对于 CoreWindow 的对象坐标，以确保您不会将对象转换出窗口。

# java - 搜索栏“if”语句一直显示“else”结果

> ID：15711839
> 
> 赞同：0
> 
> 时间：2013-03-29T21:40:37.723
> 
> 标签：java, android, sqlite

我正在尝试为我的应用程序创建一个自定义搜索栏，它工作正常，但我需要包含一个 if/else 语句，让我的用户知道他搜索的用户不存在。我尝试实现一个 if/else 语句但是当我尝试搜索数据库中的用户时，当我知道我输入了正确的用户名时，它会向我显示“找不到用户名”的 else 语句。

从我提供的代码中，我想知道我做错了什么？

```
search.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        String Username = sbar.getText().toString();
        String foundplayer = db.getUsername();
         if (Username.equals(foundplayer)) {
             ResultFrame.setVisibility(View.VISIBLE);
             ResultText.setText(foundplayer);
             Toast.makeText(getApplicationContext(), "Player Found", Toast.LENGTH_LONG).show();                          
         } else {
             Toast.makeText(getApplicationContext(), "Username Not Found", Toast.LENGTH_LONG).show();
         }    
    }

});

public String getUsername() {
    String[] userName = new String[] { "USERNAME" };
    Cursor c = db.query( "NFDB", null, null, null, null, null, null, null);
    String result = "";
    int iName = c.getColumnIndex("USERNAME");
    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = c.getString(iName);
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:57:31.857

首先确保您的 getUsername() 方法返回值。如果它返回值，那么就这样做。

```
 String foundplayer = db.getUsername(); 
```

这将需要一些时间来处理，因为它涉及从数据库获取数据，因此您的编译器不会等待它完成，因为编译器将在完成 getUsername() 方法之前进入 if 条件。所以你会让你的foundplayer为空

所以它永远不会满足条件。

所以在一个单独的线程中调用它并让另一个语句等待它完成

```
 String foundplayer = "";
Thread t=new Thread()
{
public void run()
{
  foundplayer = db.getUsername();
}
};
t.start();
t.join(); 
```

或者

`equals`是否区分大小写`equalsIgnoreCase`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:05:25.917

您的`getUsername`函数实际上从数据库中返回一些*随机*用户名。

您必须为其提供要搜索的用户名作为参数：

```
public String getUsername(String searchName) {
    Cursor c = db.query("NFDB",
                        new String[] { "USERNAME" },
                        "USERNAME = ?",
                        new String[] { searchName },
                        null, null, null);
    if (c.moveToNext())
        return c.getString(0);
    else
        return "";
} 
```

就此而言，从该函数返回用户名毫无意义，因为调用者已经知道搜索的名称。你最好返回一个布尔值。

# xslt - 如何在 XSL 中“重用”代码

> ID：15711840
> 
> 赞同：8
> 
> 时间：2013-03-29T21:40:38.253
> 
> 标签：xslt

我正在使用 XSLT 节点。我的问题是关于 XSL。我在 Internet 上进行了搜索，但我只找到了有关 XML 处理的信息，以便在网页上显示它。我正在搜索的信息是在这种情况下如何“重用”某些代码：

我的 XSL 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:wsb="http://tempuri.org/">

    <xsl:import href="HubGenerico.xsl" />

    <xsl:template match="/RCECSTD2">
        <xsl:element name="soap:Envelope">
            <xsl:element name="soap:Header" />
            <xsl:element name="soap:Body" />

            <xsl:choose>

                <xsl:when test="STDR2_DATOS_CONTROL/STDR2_CODOPE = 1010">
                    <xsl:element name="wsb:ConsultarSC">
                        <xsl:element name="wsb:codigoOperacion">
                            <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_CODOPE" />
                        </xsl:element>
                        <xsl:element name="wsb:numeroOperacion">
                            <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_NUMOPEBCO" />
                        </xsl:element>
                        <xsl:element name="wsb:codigoBanco">
                            <xsl:value-of select="STDR2_DATOS_EMPRESA/STDR2_CODBCO" />
                        </xsl:element>
                        <xsl:element name="wsb:codigoConvenio">
                            <xsl:value-of select="STDR2_DATOS_EMPRESA/STDR2_CODCONTR" />
                        </xsl:element>
                        <xsl:element name="wsb:numeroReferenciaDeuda">
                            <xsl:value-of
                                select="normalize-space(STDR2_DATOS_TRANSACCION/STDR2_NUMREF_DEUDA)" />
                        </xsl:element>
                        <xsl:element name="wsb:canalOperacion">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_CANAL" />
                        </xsl:element>
                        <xsl:element name="wsb:codigoOficina">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_CODOFI" />
                        </xsl:element>
                        <xsl:element name="wsb:fechaOperacion">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_FECOPE" />
                        </xsl:element>
                        <xsl:element name="wsb:horaOperacion">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_HOROPE" />
                        </xsl:element>
                        <xsl:element name="wsb:datosEmpresa" />
                    </xsl:element>
                </xsl:when>

                <xsl:when test="STDR2_DATOS_CONTROL/STDR2_CODOPE = 2010">
                    <xsl:element name="wsb:NotificarPago">
                        <xsl:element name="wsb:codigoOperacion">
                            <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_CODOPE" />
                        </xsl:element>
                        <xsl:element name="wsb:numeroOperacion">
                            <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_NUMOPEBCO" />
                        </xsl:element>
                        <xsl:element name="wsb:codigoBanco">
                            <xsl:value-of select="STDR2_DATOS_EMPRESA/STDR2_CODBCO" />
                        </xsl:element>
                        <xsl:element name="wsb:codigoConvenio">
                            <xsl:value-of select="STDR2_DATOS_EMPRESA/STDR2_CODCONTR" />
                        </xsl:element>
                        <xsl:element name="wsb:otrosDatosEmpresa" />
                        <xsl:element name="wsb:numeroReferenciaDeuda">
                            <xsl:value-of
                                select="normalize-space(STDR2_DATOS_TRANSACCION/STDR2_NUMREF_DEUDA)" />
                        </xsl:element>
                        <xsl:element name="wsb:NumDocDeuda">
                            <xsl:text>1</xsl:text>
                        </xsl:element>
                        <xsl:element name="wsb:formaPago">
                            <xsl:value-of select="STDR2_DATOS_TRANSACCION/STDR2_FORPAG" />
                        </xsl:element>
                        <xsl:element name="wsb:codigoMoneda">
                            <xsl:value-of select="STDR2_DATOS_TRANSACCION/STDR2_CODMON" />
                        </xsl:element>
                        <xsl:element name="wsb:importeTotalPagado">
                            <xsl:variable name="importeTotalPagado">
                                <xsl:call-template name="string-replace">
                                    <xsl:with-param name="text"
                                        select="string(STDR2_DATOS_TRANSACCION/STDR2_IMPTOT_PAG)" />
                                    <xsl:with-param name="pattern" select="'.'" />
                                    <xsl:with-param name="replace-with" select="''" />
                                </xsl:call-template>
                            </xsl:variable>
                            <xsl:value-of select="$importeTotalPagado" />
                        </xsl:element>
                        <xsl:element name="wsb:detallePagoBBVA" />
                        <xsl:element name="wsb:canalOperacion">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_CANAL" />
                        </xsl:element>
                        <xsl:element name="wsb:codigoOficina">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_CODOFI" />
                        </xsl:element>
                        <xsl:element name="wsb:fechaOperacion">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_FECOPE" />
                        </xsl:element>
                        <xsl:element name="wsb:horaOperacion">
                            <xsl:value-of select="STDR2_DATOS_OPERACION/STDR2_HOROPE" />
                        </xsl:element>
                        <xsl:element name="wsb:datosEmpresa" />
                    </xsl:element>
                </xsl:when>

            </xsl:choose>

        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

您会看到一些创建的元素是“重复的”（相同的代码），但它们有不同的父元素（`ConsultarSC`和`NotificarPago`）。所以我的问题是如何重用“重复代码”，如果存在一些“标签”，我可以使用“引用”（如 ESQL）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T21:58:19.860

In your example, "named" templates are you friend here. For example, if you wanted to create the same two elements in different places, create a named template like so

```
 <xsl:template name="exampleTemplate">
    <xsl:element name="wsb:codigoOperacion">
        <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_CODOPE" />
    </xsl:element>
    <xsl:element name="wsb:numeroOperacion">
        <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_NUMOPEBCO" />
    </xsl:element>
 </xsl:template> 
```

Then, to create these two elements, just call the template like so:

```
<xsl:call-template name="exampleTemplate" /> 
```

And that's it!

Note, just like functions, you can pass parameters to templates too.

```
<xsl:template name="example">
    <xsl:param name="value" />
    Value is <xsl:value-of select="$value" />
</xsl:template>

<xsl:call-template name="example">
    <xsl:with-param name="value" select="element" />
</xsl:call-template> 
```

As an aside, there is no need to use **xsl:element** to create an element if you are using a static name, just write out element name directly. So, instead of this

```
 <xsl:element name="wsb:numeroOperacion">
        <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_NUMOPEBCO" />
    </xsl:element> 
```

Just do this

```
 <wsb:numeroOperacion>
        <xsl:value-of select="STDR2_DATOS_CONTROL/STDR2_NUMOPEBCO" />
    </wsb:numeroOperacion> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:12:08.917

感谢“JLRishe”和“Tim C”。我的 XSL 文件导致：

主要的：

`

```
<xsl:import href="HubGenerico.xsl" />
<xsl:variable name="myns" select="'http://tempuri.org/'" />

<xsl:template match="/RCECSTD2">
    <soap:Envelope>
        <soap:Header />
        <soap:Body />
        <xsl:variable name="codOperacion" select="STDR2_DATOS_CONTROL/STDR2_CODOPE" />
        <xsl:choose>
            <xsl:when test="$codOperacion = 1010">
                <wsb:ConsultarSC xmlns:wsb="'http://tempuri.org/'">
                    <xsl:call-template name="STDR2_DATOS_CONTROL">
                        <xsl:with-param name="ns" select="$myns" />
                    </xsl:call-template>
                    <xsl:call-template name="STDR2_DATOS_EMPRESA">
                        <xsl:with-param name="ns" select="$myns" />
                    </xsl:call-template>
                    <wsb:numeroReferenciaDeuda>
                        <xsl:value-of
                            select="normalize-space(STDR2_DATOS_TRANSACCION/STDR2_NUMREF_DEUDA)" />
                    </wsb:numeroReferenciaDeuda>
                    <xsl:call-template name="STDR2_DATOS_OPERACION">
                        <xsl:with-param name="ns" select="$myns" />
                    </xsl:call-template>
                    <wsb:datosEmpresa />
                </wsb:ConsultarSC>
            </xsl:when>

            <xsl:when test="$codOperacion = 2010">
                <wsb:NotificarPago xmlns:wsb="$ns">
                    <xsl:call-template name="STDR2_DATOS_CONTROL">
                        <xsl:with-param name="ns" select="$myns" />
                    </xsl:call-template>
                    <xsl:call-template name="STDR2_DATOS_EMPRESA">
                        <xsl:with-param name="ns" select="$myns" />
                    </xsl:call-template>
                    <wsb:otrosDatosEmpresa />
                    <wsb:numeroReferenciaDeuda>
                        <xsl:value-of
                            select="normalize-space(STDR2_DATOS_TRANSACCION/STDR2_NUMREF_DEUDA)" />
                    </wsb:numeroReferenciaDeuda>
                    <wsb:NumDocDeuda>
                        <xsl:text>1</xsl:text>
                    </wsb:NumDocDeuda>
                    <wsb:formaPago>
                        <xsl:value-of select="STDR2_DATOS_TRANSACCION/STDR2_FORPAG" />
                    </wsb:formaPago>
                    <wsb:codigoMoneda>
                        <xsl:value-of select="STDR2_DATOS_TRANSACCION/STDR2_CODMON" />
                    </wsb:codigoMoneda>
                    <wsb:importeTotalPagado>
                        <xsl:variable name="importeTotalPagado">
                            <xsl:call-template name="string-replace">
                                <xsl:with-param name="text"
                                    select="string(STDR2_DATOS_TRANSACCION/STDR2_IMPTOT_PAG)" />
                                <xsl:with-param name="pattern" select="'.'" />
                                <xsl:with-param name="replace-with" select="''" />
                            </xsl:call-template>
                        </xsl:variable>
                        <xsl:value-of select="$importeTotalPagado" />
                    </wsb:importeTotalPagado>
                    <wsb:detallePagoBBVA />
                    <xsl:call-template name="STDR2_DATOS_OPERACION">
                        <xsl:with-param name="ns" select="$myns" />
                    </xsl:call-template>
                    <wsb:datosEmpresa />
                </wsb:NotificarPago>
            </xsl:when>
        </xsl:choose>
    </soap:Envelope>
</xsl:template> 
```

`

导入的 XSL：

`

```
<xsl:template name="string-replace">
    <xsl:param name="text" />
    <xsl:param name="pattern" />
    <xsl:param name="replace-with" />
    <xsl:choose>
        <xsl:when test="contains($text, $pattern)">
            <xsl:value-of select="substring-before($text, $pattern)" />
            <xsl:value-of select="$replace-with" />
            <xsl:call-template name="string-replace">
                <xsl:with-param name="text"
                    select="substring-after($text, $pattern)" />
                <xsl:with-param name="pattern" select="$pattern" />
                <xsl:with-param name="replace-with" select="$replace-with" />
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$text" />
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<!-- Datos de Control -->
<xsl:template name="STDR2_DATOS_CONTROL">
    <xsl:param name="ns" />
    <xsl:variable name="datControl" select="STDR2_DATOS_CONTROL" />
    <xsl:element name="wsb:codigoOperacion" namespace="{$ns}">
        <xsl:value-of select="$datControl/STDR2_CODOPE" />
    </xsl:element>
    <xsl:element name="wsb:numeroOperacion" namespace="{$ns}">
        <xsl:value-of select="$datControl/STDR2_NUMOPEBCO" />
    </xsl:element>
</xsl:template>

<!-- Datos de Empresa -->
<xsl:template name="STDR2_DATOS_EMPRESA">
    <xsl:param name="ns" />
    <xsl:variable name="datEmpresa" select="STDR2_DATOS_EMPRESA" />
    <xsl:element name="wsb:codigoBanco" namespace="{$ns}">
        <xsl:value-of select="$datEmpresa/STDR2_CODBCO" />
    </xsl:element>
    <xsl:element name="wsb:codigoConvenio" namespace="{$ns}">
        <xsl:value-of select="$datEmpresa/STDR2_CODCONTR" />
    </xsl:element>
</xsl:template>

<!-- Datos de Operacion -->
<xsl:template name="STDR2_DATOS_OPERACION">
    <xsl:param name="ns" />
    <xsl:variable name="datOperacion" select="STDR2_DATOS_OPERACION" />
    <xsl:element name="wsb:canalOperacion" namespace="{$ns}">
        <xsl:value-of select="$datOperacion/STDR2_CANAL" />
    </xsl:element>
    <xsl:element name="wsb:codigoOficina" namespace="{$ns}">
        <xsl:value-of select="$datOperacion/STDR2_CODOFI" />
    </xsl:element>
    <xsl:element name="wsb:fechaOperacion" namespace="{$ns}">
        <xsl:value-of select="$datOperacion/STDR2_FECOPE" />
    </xsl:element>
    <xsl:element name="wsb:horaOperacion" namespace="{$ns}">
        <xsl:value-of select="$datOperacion/STDR2_HOROPE" />
    </xsl:element>
</xsl:template> 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T04:42:30.893

由于您的输出遵循相同的模式并在某些情况下添加了一些额外的东西，因此您可以为主布局使用一个模板，然后调用其他条件模板来获取额外的东西：

```
 <xsl:import href="HubGenerico.xsl" />

  <xsl:template match="/RCECSTD2">
    <soap:Envelope>
      <soap:Header />
      <soap:Body />

      <xsl:apply-templates select="STDR2_DATOS_CONTROL/STDR2_CODOPE" />
    </soap:Envelope>
  </xsl:template>

  <!-- Override the default handling of text nodes -->
  <xsl:template match="text()" />

  <xsl:template match="STDR2_CODOPE[. = 1010]">
    <wsb:ConsultarSC>
      <xsl:call-template name="Content" />
    </wsb:ConsultarSC>
  </xsl:template>

  <xsl:template match="STDR2_CODOPE[. = 2010]">
    <wsb:NotificarPago>
      <xsl:call-template name="Content" />
    </wsb:NotificarPago>
  </xsl:template>

  <xsl:template name="Content">
    <xsl:call-template name="Basic" />
    <xsl:apply-templates select="." mode="otrosDatos" />
    <xsl:call-template name="NumeroDeuda" />
    <xsl:apply-templates select="." mode="deudaPagado" />
    <xsl:call-template name="Operacion" />
  </xsl:template>

  <!-- Context node is STDR2_CODOPE -->
  <xsl:template name="Basic">
    <xsl:variable name="empresa" select="../../STDR2_DATOS_EMPRESA" />
    <wsb:codigoOperacion>
      <xsl:value-of select="."/>
    </wsb:codigoOperacion>
    <wsb:numeroOperacion>
      <xsl:value-of select="../STDR_NUMOPEBCO" />
    </wsb:numeroOperacion>
    <wsb:codigoBanco>
      <xsl:value-of select="$empresa/STDR2_CODBCO"/>
    </wsb:codigoBanco>
    <wsb:codigoConvenio>
      <xsl:value-of select="$empresa/STDR2_CODCONTR"/>
    </wsb:codigoConvenio>
  </xsl:template>

  <xsl:template name="NumeroDeuda">
    <wsb:numeroReferenciaDeuda>
      <xsl:value-of 
        select="normalize-space(../../STDR2_DATOS_TRANSACCION/STDR2_NUMREF_DEUDA)"/>
    </wsb:numeroReferenciaDeuda>
  </xsl:template>

  <xsl:template name="Operacion">
    <xsl:variable name="operacion" select="../../STDR2_DATOS_OPERACION" />

    <wsb:canalOperacion>
      <xsl:value-of select="$operacion/STDR2_CANAL" />
    </wsb:canalOperacion>
    <wsb:codigoOficina>
      <xsl:value-of select="$operacion/STDR2_CODOFI" />
    </wsb:codigoOficina>
    <wsb:fechaOperacion>
      <xsl:value-of select="$operacion/STDR2_FECOPE" />
    </wsb:fechaOperacion>
    <wsb:horaOperacion>
      <xsl:value-of select="$operacion/STDR2_HOROPE" />
    </wsb:horaOperacion>
    <wsb:datosEmpresa />
  </xsl:template>

  <xsl:template match="STDR2_CODOPE[. = 2010]" mode="otrosDatos">
    <wsb:otrosDatosEmpresa />
  </xsl:template>

  <xsl:template match="STDR2_CODOPE[. = 2010]" mode="deudaPagado">
    <xsl:variable name="transaccion" select="../../STDR2_DATOS_TRANSACCION" />

    <wsb:NumDocDeuda>1</wsb:NumDocDeuda>
    <wsb:formaPago>
      <xsl:value-of select="$transaccion/STDR2_FORPAG" />
    </wsb:formaPago>
    <wsb:codigoMoneda>
      <xsl:value-of select="$transaccion/STDR2_CODMON" />
    </wsb:codigoMoneda>
    <wsb:importeTotalPagado>
      <xsl:call-template name="string-replace">
        <xsl:with-param name="text"
            select="string($transaccion/STDR2_IMPTOT_PAG)" />
        <xsl:with-param name="pattern" select="'.'" />
        <xsl:with-param name="replace-with" select="''" />
      </xsl:call-template>
    </wsb:importeTotalPagado>
    <wsb:detallePagoBBVA />
  </xsl:template> 
```

# linux - 如何手动发出 http/https POST 请求？

> ID：15711841
> 
> 赞同：19
> 
> 时间：2013-03-29T21:40:38.660
> 
> 标签：linux, http, rest, post

我想在我正在处理的小型自定义服务器上测试一些 url。我在 Windows 上使用过 Wfetch，它很棒

我对这些测试的要求是： - 应该能够在 linux(ubuntu) 上运行 - 应该能够手动设置所有参数 - 应该支持摘要认证

有人可以为这样的工作建议一些 gui 或扩展。

我已经尝试过 RESTclient 和 Poster，但它们不支持摘要认证。

[如何使用 Firefox 或 Chrome 手动触发 HTTP POST 请求的](https://stackoverflow.com/questions/4797534/how-to-manually-fire-http-post-requests-with-firefox-or-chrome#_=_)可能重复项？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-30T02:40:48.940

wget 可以帮助你。

得到：

```
wget http://example.com 
```

邮政：

```
wget --post-data "username=Yarkee" http://example.com 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-29T22:21:17.470

你可以用[`wget`](http://www.gnu.org/software/wget/)这个。从[`manual`](http://www.gnu.org/software/wget/manual/html_node/HTTP-Options.html)它支持摘要身份验证并可以发送 POST 请求。

[wget::gui](http://www.martin-achern.de/wgetgui/)似乎有一个 GUI ，但我不知道它有多可靠或完整。

# c - C 网络库

> ID：15711842
> 
> 赞同：1
> 
> 时间：2013-03-29T21:40:55.747
> 
> 标签：c, networking, nio

我正在为 C 寻找一个 NIO 类型的库。我想实现一个多线程 UDP 网络服务器，它将有很多客户端连接到它。

而不是尝试编写我自己的程序来处理数据包和“连接”。我想我会看看是否还没有经过测试和构建以实现可伸缩性和高性能的现有库。

我找到了一些用于 Java 的，但没有找到用于 C 的。例如 Apache Mina。

我希望有人知道一个可以帮助我的好人。塔克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:45:35.773

听起来你想要抽象一些东西`select()`，`poll()`或者任何对你的平台最有效的机制。

你看过[libevent](http://libevent.org/)和[libev](http://software.schmorp.de/pkg/libev.html)吗？[这里](http://daniel.haxx.se/docs/poll-vs-select.html)有一篇不错的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:45:31.787

首先，C 没有类。其次，C 为您提供了实现可扩展和高性能解决方案所需的一切。它比 java 的 NIO 级别更低，但在 google 中有很好的教程。

如果你想要一个库 - 试试[boosts' asio](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html)。它是 C++，但也许你可以使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T21:46:28.897

如果您使用的是 Linux，我强烈建议您使用 POSIX API。它为您提供跨任何 Linux 机器的多线程和网络资源。

[GNU C 库](http://www.gnu.org/software/libc/manual/html_mono/libc.html#toc_Sockets)

# python - 如何更改 gtk.Assistant 上的内置按钮标签？

> ID：15711845
> 
> 赞同：2
> 
> 时间：2013-03-29T21:41:11.447
> 
> 标签：python, pygtk, wizard

我想将 a 的“应用”按钮的标签更改`gtk.Assistant`为“开始”。我在实例中找不到相应的`gtk.Button`小部件。`Assistant`

这是两页的一些基本代码`Assistant`：

```
import gtk

a = gtk.Assistant()

page = gtk.CheckButton("Something optional")
a.append_page(page)
a.set_page_type(page, gtk.ASSISTANT_PAGE_CONTENT)
a.set_page_title(page, "Make decisions")
a.set_page_complete(page, True)

page = gtk.Label("Alright, let's build some foo.")
a.append_page(page)
a.set_page_type(page, gtk.ASSISTANT_PAGE_CONFIRM)
a.set_page_title(page, "Confirm")
a.set_page_complete(page, True)

a.connect('delete-event', gtk.main_quit)
a.connect('close', gtk.main_quit)
a.show_all()

gtk.main() 
```

在最后一页，您会看到“应用”按钮。我想将该文本更改为“开始”。

`gtk.Assistant.children()`并`.get_children()`返回页面小部件列表。

`gtk.Assistant.get_child()`返回无。

`gtk.Assistant.get_action_area()`不是一种方法。

这是文档的链接。：http: [//www.pygtk.org/docs/pygtk/class-gtkassistant.html](http://www.pygtk.org/docs/pygtk/class-gtkassistant.html)

如何找到`gtk.Button`我感兴趣的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:13:12.063

在尝试变通方法时，我设法找到了解决方案。

`gtk.Assistant`用返回页面列表的东西覆盖该`gtk.Container.get_children()`方法，但它实际上仍然是 a 的父级，`gtk.HBox()`其中包含“下一步”、“应用”、“取消”等按钮。

该方法`gtk.Assistant.add_action_widget()`将小部件添加到所谓的“操作区域”。事实证明这是`HBox`包含相关按钮的。以下函数将产生对 的引用`HBox`：

```
def get_buttons_hbox(assistant):
    # temporarily add a widget to the action area and get its parent
    label = gtk.Label('')
    assistant.add_action_widget(label)
    hbox = label.get_parent()
    hbox.remove(label)
    return hbox 
```

然后使用 检索按钮`get_buttons_hbox(a).get_children()`。

```
for child in get_buttons_hbox(a).get_children():
    print child.get_label() 
```

这打印：

```
gtk-goto-last
gtk-go-back
gtk-go-forward
gtk-apply
gtk-cancel
gtk-close 
```

所以下面的代码解决了这个问题（使用`get_buttons_hbox()`上面定义的）：

```
for child in get_buttons_hbox(a).get_children():
    label = child.get_label()
    if label == 'gtk-apply':
        child.set_label('Start') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T11:22:58.810

我不确定 pygtk 是否可以做到这一点。如果您使用 python 切换到 GObject Introspection，您可以设置一个完全自定义的操作区域。来自[Gtk3 GtkAssistant](https://developer.gnome.org/gtk3/stable/GtkAssistant.html "GtkAssistant")文档：

> 如果您的情况不太适合 GtkAssistants 处理按钮的方式，您可以使用 GTK_ASSISTANT_PAGE_CUSTOM 页面类型并自己处理按钮。

和

> **GTK_ASSISTANT_PAGE_CUSTOM**当其他页面类型不合适时使用。不会显示任何按钮，应用程序必须通过 gtk_assistant_add_action_widget() 添加自己的按钮。

# php - 使用 PHP 和 mySQL 的 HTML 登录问题

> ID：15711848
> 
> 赞同：0
> 
> 时间：2013-03-29T21:41:16.510
> 
> 标签：php, mysql, sql

我正在使用 HTML5 创建一个基于 Web 的应用程序，它连接到一个 mySQL 数据库。我正在尝试使用 PHP 来连接两者。

我正在尝试创建一个登录页面，该页面检查数据库中的号码和密码，以查看它是否是有效的登录名。对数字和密码进行硬编码可以正常工作，但是在尝试将其应用于数据库时，即使登录凭据无效，我总是会收到“登录”消息。我尝试同时使用 $_POST 和 $dbRow 但无济于事。

```
<?php

session_start();

$s_number = $_POST["snumber"];
$s_pass = $_POST["passwd"];

//$s_number = "12345";
//$s_pass = "qwerty";
//$s_permission = "manager";

include ("dbConnect.php");

$dbQuery = "SELECT * FROM staff_details WHERE staff_number='$s_number' AND password='$s_pass'";
$dbResult = mysql_query($dbQuery);
$dbRow=mysql_fetch_array($dbResult);

if ($_POST["snumber"]==$s_number) {
    if ($_POST["passwd"]==$s_pass) {
        echo "<p>Logged in!</p>";
    } else {
        echo "<p>Wrong Password</p>";
    }
}

else echo "<p>Bad username and password</p>";

/*if ($dbRow["username"]==$s_number) {       
     if ($dbRow["password"]==$s_pass) {
        echo "<p>Logged in!</p>";
     }
     else {
        echo "<p>Wrong Password</p>";
     }
  } else {
        echo "<p>Bad username and password</p>";
  }*/

?> 
```

我对 PHP 很陌生。我已经搜索了其他示例，但似乎有很多不同的方法可以做到这一点，我不明白。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:53:31.583

试试这个：

```
<?php

include ("dbConnect.php");

if(isset($_POST["snumber"]))
{
  $s_number = mysql_real_escape_string($_POST["snumber"]);
  $s_pass = mysql_real_escape_string($_POST["passwd"]);
  $dbQuery = "SELECT * FROM staff_details WHERE staff_number='$s_number' AND password='$s_pass'";
  $dbResult = mysql_query($dbQuery);
  $dbRow=mysql_fetch_assoc($dbResult);

  if ($dbRow["staff_number"]==$s_number && $dbRow["password"]==$s_pass) {       

        echo "<p>Logged in!</p>";
     }
     else {
        echo "<p>Wrong Password</p>";
     }
  }
   else {
        echo "<p>Bad username and password</p>";
  }

?> 
```

PS：去 mysqli 或 PDO ;) ; 您可以尝试计数或 mysql_num_rows 来查看匹配结果是否为零。

萨卢多斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:15:26.910

阿德里安和罗伯特已经解决了*部分*问题。

如果您只是在学习 PHP，那么您更有理由开始编写代码以使用 mysqli API 而不是已弃用的 mysql_ 函数。它们几乎相同——但后者将在未来的某个时候消失。

如果您正在编写登录页面，那么您可能会担心安全性 - 但是如果没有正确转义您的代码，绕过控制机制是微不足道的（并且在某些情况下会使您的数据库暴露于严重的破坏/泄露问题）。

此外，即使通过修复 SQL 注入问题，使用会话固定也很容易通过身份验证。

下一个错误是您从不检查与数据库的交互是否成功。

因此，这看起来像是[这个问题](https://stackoverflow.com/questions/15690867/php-sql-authentication-issue)的重复- 尽管由于该帖子的答案/讨论质量差，我没有将其标记为这样。

此外，既然您只从数据库中选择了与用户名/密码匹配的行，为什么还要将用户名和密码与您检索的数据进行比较？

它通常被认为是良好的安全实践，不解释为什么在某些提供身份验证详细信息时登录失败。

所以再试一次......

```
<?php

session_start();
include ("dbConnect.php");

function auth($user, $pass)
{
   $user=mysqli_real_escape_string($user);
   $pass=mysqli_real_escape_string($pass);
   $qry="SELECT SUM(1) AS matches 
 FROM YOURDB.staff_details 
 WHERE staff_number='$user' 
 AND password='$pass'";
   $res=mysqli_query($qry) || die "Sorry - not available";
   $r=mysql_fetch_assoc($res);
   return $r['matches'];
}
if (auth($_POST["snumber"], $_POST["passwd"])) {
      session_regenerate_id();
      echo "<p>Logged in!</p>";
} else {
      echo "<p>Sorry - invalid authentication</p>";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T21:45:13.700

您需要使用 $dbRow 而不是 $_POST。目前您只是将 $_POST 与 $_POST 进行比较。

它总是一样的。

其次，您在查询和数组键中指定了不同的字段名称。

试试这个。

```
<?php

session_start();

$s_number = $_POST["snumber"];
$s_pass = $_POST["passwd"];

//$s_number = "12345";
//$s_pass = "qwerty";
//$s_permission = "manager";

include ("dbConnect.php");

$dbQuery = "SELECT * FROM staff_details WHERE staff_number='$s_number' AND password='$s_pass'";
$dbResult = mysql_query($dbQuery);
$dbRow=mysql_fetch_array($dbResult);

if ($_POST["snumber"]==$dbRow['staff_number']) {
    if ($_POST["passwd"]==$dbRow['password']) {
        echo "<p>Logged in!</p>";
    } else {
        echo "<p>Wrong Password</p>";
    }
}

else echo "<p>Bad username and password</p>";

/*if ($dbRow["username"]==$s_number) {       
     if ($dbRow["password"]==$s_pass) {
        echo "<p>Logged in!</p>";
     }
     else {
        echo "<p>Wrong Password</p>";
     }
  } else {
        echo "<p>Bad username and password</p>";
  }*/

?> 
```

编辑：虽然你真的不需要在之后执行 If 语句。如果您从数据库查询中获得用户名/密码匹配的结果，则凭据是正确的。

所以你可以这样做，

```
 if (!empty($dbRow)){
            echo "<p>Logged in!</p>";
        } else {
            echo "<p>Wrong Password</p>";
        }
    } 
```

# c# - LuaInterface & .NET- LuaAPI 失败：L->top < L->ci->top

> ID：15711855
> 
> 赞同：1
> 
> 时间：2013-03-29T21:41:31.567
> 
> 标签：c#, .net, lua, luainterface

尝试从.NET 在 LuaInterface Lua VM 实例中设置全局时，我正在努力解决以下错误。

```
LuaAPI failure: L->top < L->ci->top, file 'h:\dev\vastpark\~repositories\public\trunk
\components\luainterface\lua-5.1.2\src\lapi.c', line 227 
```

我将全局分配如下：

```
_LuaVM[globalName] = value; 
```

任何有关该错误的信息将不胜感激！谢谢

# asp.net-mvc - 在控制器上获得自定义授权后公开访问一项操作？

> ID：15711865
> 
> 赞同：0
> 
> 时间：2013-03-29T21:42:29.360
> 
> 标签：asp.net-mvc, asp.net-mvc-3, custom-authentication, authorize-attribute

我正在使用 MVC 3 并在我的控制器上具有继承 AuthorizeAttribute 的自定义授权属性。但是，在一种情况下，我想从该控制器访问一项操作，而无需对其进行任何身份验证。是否可以？

我想在控制器文件中不做任何更改，因为该代码已经在生产中。有没有办法从网络配置中覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:59:30.010

是的，您可以通过简单地从整个控制器类中删除 Authorize 属性来做到这一点，而是在您想要的任何地方对个人操作使用 Authorize 属性。

# magento - Magento 自定义路由器丢失布局对象

> ID：15711866
> 
> 赞同：1
> 
> 时间：2013-03-29T21:42:36.197
> 
> 标签：magento

似乎一切都已正确配置，我可以获得我想要的输出，但我不希望直接从我的控制器回显布局对象：

这是我使用 config.xml 的内容

```
<config>
    <modules>
        <ALS_Bestselling>
            <version>0.1.0</version>
        </ALS_Bestselling>
    </modules>
    <global>
        <models>
            <bestselling>
                <class>ALS_Bestselling_Model</class>
            </bestselling>
        </models>
        <blocks>
            <bestselling>
                <class>ALS_Bestselling_Block</class>
            </bestselling>
        </blocks>
        <helpers>
            <bestselling>
                <class>ALS_Bestselling_Helper</class>
            </bestselling>
        </helpers>
    </global>
    <frontend>
        <layout>
            <updates>
                <als_bestselling>
                    <file>bestselling.xml</file>
                </als_bestselling>
            </updates>
        </layout>
    </frontend>
    <default>
        <web>
            <routers>
                <bestselling_router>
                    <area>frontend</area>
                    <class>ALS_Bestselling_Controller_Router</class>
                </bestselling_router>
            </routers>
        </web>
        <shorturls>
        </shorturls>
    </default>
</config> 
```

和

```
#File: Controller/Router.php

<?php    
class ALS_Bestselling_Controller_Router extends Mage_Core_Controller_Varien_Router_Abstract
{

    private static $_module = 'bestsellers';
    private static $_realModule = 'ALS_Bestselling';
    private static $_controller = 'index';
    private static $_controllerClass = 'ALS_Bestselling_Controller_Index';
    private static $_action = 'view';

    public function initControllerRouters($observer)
    {
        $front = $observer->getEvent()->getFront();
        $front->addRouter('bestselling', $this);
    }

    public function collectRoutes()
    {
        // nothing to do here
    }

    public function match(Zend_Controller_Request_Http $request)
    {
        $this->_request = $request;
        $front = $this->getFront();
        $identifier = trim($request->getPathInfo(), '/');
        if(!substr($identifier,0,strlen('bestsellers')) == 'bestsellers'){
            return false;
        }else{
            //$rewrite = Mage::getModel('core/url_rewrite');
            $route_params = str_replace ( "bestsellers/" , "" , $identifier );
            $rewrite = Mage::getModel('core/url_rewrite');
            $rewrite->setStoreId(1);
            $rewrite->loadByRequestPath($route_params);
            $category_route = $rewrite->getIdPath();

            //If no route exists for category send to a different router
            if(!$category_route != ""){
                return false;
            }//Otherwise send the parameters to the request
            else{
                $id = str_replace ( "category/" , "" , $category_route );
                $this->_request->setParam('id',$id);
            }

        $this->_setRequestRoute();
        $this->_dispatch();
        return true;
        }
    }
    protected function _setRequestRoute()
    {
        $this->_request->setModuleName(self::$_module);
        $this->_request->setControllerName(self::$_controller);
        $this->_request->setActionName(self::$_action);
        $this->_request->setControllerModule(self::$_realModule);

    }
    protected function _dispatch()
    {
        $this->_request->setDispatched(true);
        $controller = Mage::getControllerInstance(self::$_controllerClass, $this->_request, $this->_response);
        $controller->dispatch(self::$_action);
    }
} 
```

和

```
File: Controller/Index.php

     class ALS_Bestselling_Controller_Index extends Mage_Core_Controller_Front_Action{   
    public function viewAction(){
            $layout = Mage::app()->getLayout();
            $layout->generateXml()->generateBlocks();
            $render = $layout->getBlock('root')->toHtml();
            echo $render;
        }

    } 
```

以前的作品，但以下：

```
$update = $this->getLayout()->getUpdate();
$update->addHandle('default');
$this->renderLayout(); 
```

对非对象调用成员函数 appendBody() 时抛出错误。

这是我应该这样做还是食谱中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:56:18.993

自定义路由类处于大多数开发人员使用 Magento 所做的边缘 - 标准方法是[设置一个前端名称为 的标准模块控制器`bestselling`](http://alanstorm.com/magento_controller_hello_world)，或者以非 seo 友好的方式创建您的功能，然后创建一个重写实体/对象对其进行 SEO 化。

然而，我对自定义路由对象情有独钟，即使它们背后几乎没有最佳社区实践。没有行号，这听起来像你的例外

> 在非对象上调用成员函数 appendBody()

来自以下代码

```
#File: app/code/core/Mage/Core/Controller/Varien/Action.php

$this->getResponse()->appendBody($output); 
```

给定定义`getResponse`

```
public function getResponse()
{
    return $this->_response;
} 
```

听起来您的控制器对象没有正确的响应对象集。

查看您的控制器实例化代码

```
$controller = Mage::getControllerInstance(self::$_controllerClass, $this->_request, $this->_response); 
```

你引用了一个`$this->_response`属性——但是你的路由类和抽象路由类没有这个属性。根据您发布的内容不可能说，但这可能是您的问题。看看标准路由器的匹配方法是如何做到的。

```
#File: app/code/core/Mage/Core/Controller/Varien/Router/Standard.php
//...
$controllerInstance = Mage::getControllerInstance($controllerClassName, $request, $front->getResponse()); 
```

因此，使用前端控制器对象来获取响应对象，将其传递到`getCongrollerInstance`工厂方法中，您应该一切顺利（或者至少可以解决下一个问题）

# python - 无法启动 Python 线程循环

> ID：15711868
> 
> 赞同：0
> 
> 时间：2013-03-29T21:42:41.407
> 
> 标签：python, multithreading, loops, tkinter, chat

我正在尝试在 python 中创建一个简单的“聊天”客户端。我有基础知识和一切，但我根本无法让我的线程工作。这仍然是一项正在进行的工作，因此并非所有代码都在那里，我知道，但是如果您确实有任何整体建议，将不胜感激。

```
from Tkinter import *
import time
import socket
import thread
import threading

HOST = 'localhost'
PORT = 5454
fromserver = ''
data = ''

#Declares socket information
s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)

s.bind((HOST,PORT))

#Loop for receiving
def receivingloop():
    global fromserver
    while 1:
        fromserver = s.recv(30)
        time.sleep(.5)

class ChatClient:
    def __init__(self, master):

        #Use Global fromserver
        global fromserver
        global data
        #Create both frames        
        top_frame = Frame(master)
        bot_frame = Frame(master)
        #Create and pack the Buttons
        self.send_but = Button(bot_frame, \
                               text='Send',\
                               command=self.sending)
        self.quit_but = Button(bot_frame, \
                               text='Quit', \
                               command=client_window.destroy)        
        self.send_but.pack(side=LEFT)
        self.quit_but.pack(side=LEFT)

       #Create and pack label 
        self.received_lab = Label(top_frame,\
                                  text=(fromserver))        

        self.received_lab.pack()

        self.sent_lab = Label(top_frame,\
                              text='Message Sent: ' +data)

        self.sent_lab.pack()

        self.sending_entry = Entry(top_frame, \
                                   width=10)

        self.sending_entry.pack()

        #Pack Frames
        top_frame.pack()
        bot_frame.pack()

    #Function to send stuff          
    def sending(self):
        global data
        s.sendto(data,(HOST,PORT))
        data = str(self.sending_entry.get())
        print data

#Start the thread    
l1 = threading.Thread(target=receivingloop)
l1.start()

client_window = Tk()
chat_client = ChatClient(client_window)        
client_window.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:53:04.550

如果我没记错的话，我会说接收循环方法采用 self 元素，但 self 参数只需要类，并且此方法不在类中

尝试这个：

```
#Loop for receiving
def receivingloop():
    global fromserver
    while 1:
        fromserver = s.recv(30)
        time.sleep(.5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:44:03.980

你的函数是用一个名为“self”的变量定义的，看起来你以前在一个类中拥有这个函数，但后来决定从类中提取它。

无论如何，要解决您的问题，它应该是：

def 接收循环（）：

请注意，函数参数中的“自我”部分已被删除。

此外，您可能希望添加`global data`到您的发送功能。

# mysql - sqlalchemy 中 sql LIKE 的反向版本

> ID：15711872
> 
> 赞同：4
> 
> 时间：2013-03-29T21:42:50.800
> 
> 标签：mysql, sql, sqlalchemy, sql-like

通过“类似的反向版本”，我的意思是完全喜欢[这个问题](https://stackoverflow.com/questions/472063/mysql-what-is-a-reverse-version-of-like)。问题是如何在 sqlalchemy 中进行这样的查询？

我发现要在 sqlalchemy 中进行“SELECT LIKE”查询，我应该做类似的事情

```
session.query(Book).filter(Book.title.like("%"+my_title+"%")) 
```

因为`like`是专栏的方法，所以不知道怎么用`like`方法问`"%" + Book.title + "%"`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:37:39.170

多亏了[这个](https://stackoverflow.com/questions/13176252/python-startswith-equivalent-for-sqlalchemy)问题，我才知道该怎么做:)

```
session.query(Book).
    filter(bindparam('book_title', book.title).contains(Book.title)).first() 
```

# javascript - 使整个页面的 javascript 对象全局化

> ID：15711873
> 
> 赞同：0
> 
> 时间：2013-03-29T21:43:05.983
> 
> 标签：javascript, object

我已经定义了以下 javascript 对象：

```
var WealthyLaughingDuckControl = {
    users: [],
    setUsers: function(new_users) {
        this.users = new_users;
    }
}; 
```

我希望它可以在 chrome/firebug 的 javascript 控制台中使用：

```
> WealthyLaughingDuckControl
// console result goes here 
```

现在，我得到：

```
> ReferenceError: WealthyLaughingDuckControl is not defined 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:44:37.607

删除`var`关键字，或将其附加到窗口：`window.WealthyLaughingDuckControl`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T21:46:31.963

`WealthyLaughingDuckControl`在顶层定义，即不在任何函数中。

# sql - 从具有当前用户架构的表中选择

> ID：15711877
> 
> 赞同：1
> 
> 时间：2013-03-29T21:43:29.137
> 
> 标签：sql, sql-server, tsql, stored-procedures, database-schema

我在一个数据库中工作，每个用户在他们的架构中都有一个名为 FindResults 的表

例如：MyDatabase.User1.FindResults、MyDatabase.User2.FindResults 等。

如果我在以用户之一身份登录时在此表上运行 SELECT 查询，它就可以正常工作。但是，我有一个存储过程 (MyDatabase.dbo.ReadFindResults) 尝试在此表上运行 SELECT 查询，它失败了，因为它尝试读取 MyDatabase.dbo.FindResults （不存在）。我已经通过使用动态 SQL 解决了这个问题，但我希望有办法避免这种情况。

有没有办法告诉存储过程使用当前用户的模式或者改变范围以允许它找到我想要的表？

编辑：这是存储过程的代码

```
-- Returns the IDs contained in the given find results set
CREATE PROCEDURE [dbo].[ReadFindResults]
    @resultsid int  -- The ID of the results set
AS
BEGIN

   SELECT objectid FROM FindResults WHERE resultsid = @resultsid

END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:49:59.027

在您的存储过程中，您可以说：

```
SELECT cols FROM MyDatabase..FindResults; 
```

（省略模式名称。）

然而，这似乎很容易出错，恕我直言，您应该有单独的、模式绑定的存储过程，或者有一个带有列的表来指示它是谁的行。

黑客可以作为用户名执行：

```
DECLARE @sql NVARCHAR(255) = N'EXECUTE AS USER = N''' + SUSER_SNAME() + '''';
EXEC sp_executesql @sql;
SELECT whatever FROM Findresults; 
```

但是我还没有机会对此进行测试（无论如何，您都更有能力在您的场景中进行测试）。

首先，这似乎仍然是一个非常可避免的问题，但也许这只是我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T17:37:31.283

您可以像这样使用动态 SQL：

```
DECLARE @sql NVARCHAR(1024) = "SELECT something FROM [userName].someTable"
DECLARE @userName NVARCHAR(255) = SUSER_SNAME()
SET @sql = REPLACE(@sql, "[userName]", @userName)

EXEC sp_executesql @sql 
```

这也是进行该查询的一种狂妄自大的方式。更多关于动态 SQL 的阅读：http: [//www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

我现在在家，无法访问 SQL Server。如果需要，我会在早上上班时编辑我的帖子。

# scripting - InDesign Server CS5.5“ReferenceError: User cancelled this action/”关于 XML 导入

> ID：15711884
> 
> 赞同：3
> 
> 时间：2013-03-29T21:43:58.187
> 
> 标签：scripting, adobe-indesign, indesign-server

最近，当我们尝试将新的 InDesign 文档导入到文档中时，我收到了这个
**ReferenceError: User cancelled this action。**
有没有人知道这个错误实际上是什么？XML 是有效的，文档检查不确定它在抱怨什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T13:06:08.140

此错误的根本原因是在 InDesign 中打开了模式对话框，进而引发错误。我敢肯定有很多方法可以发生这种情况。

除了您提到的无效文件路径外，如果链接引用发生更改，也可能导致此问题。例如，如果您链​​接图像，请关闭 InDesign 文档，然后修改图像。解决方案是打开 InDesign 文件，您将看到一个模式框，询问您是否要更新链接。一旦您可以干净地打开 InDesign 文件，错误就会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:28:37.857

我撒谎了，XML 实际上是无效的。或者更清楚地说，XML 是一个有效的文档，但是我的一个属性对于 InDesign 解析是无效的，并且它不喜欢它。我在**href**属性值中有一个无效的文件路径。

# java - 解析json时Android应用程序崩溃？

> ID：15711886
> 
> 赞同：-1
> 
> 时间：2013-03-29T21:44:12.877
> 
> 标签：java, android, json

我试图在我的 android 应用程序中解析 JSON，并且正在使用本机 java 解析器。我已按照本[教程](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)进行操作，我的代码如下。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // getting JSON string from URL
    JSONObject json = getObject();

    try {
        // Getting Array of Contacts
        photos = json.getJSONObject("photos");

        JSONArray photo = photos.getJSONArray("photo");
        // looping through All Contacts
        for(int i = 0; i < photo.length(); i++){
            JSONObject c = photo.getJSONObject(i);

            String id = c.getString("id");
            String owner = c.getString("owner");
            String secret = c.getString("secret");
            String server = c.getString("server");
            int farm = c.getInt("farm");
            String title = c.getString("title");
            int ispublic = c.getInt("ispublic");
            int isfriend = c.getInt("isfriend");
            int isfamily = c.getInt("isfamily");

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

}

private String getJSon() throws IOException{

    String urlString = "http://api.flickr.com/services/rest/?method=flickr.photos.search&format=json&api_key=APIKEY"+
            "&tags="+ "ubccpsc210" +"&lat=49.260887&lon=-123.24902&safe_search=1&per_page=20";   

    URL flickrJSon = new URL(urlString);
    BufferedReader in = new BufferedReader(
                new InputStreamReader(
                        flickrJSon.openStream()));

    String inputLine;

    while ((inputLine = in.readLine()) != null)
        inputLine += inputLine;

    in.close();

    return inputLine.substring(14, inputLine.length());
}

private JSONObject getObject(){

    try{
        obj = new JSONObject(getJSon());
    }catch(Exception e){
        return null;
    }
    return obj;
} 
```

我已经完全按照教程进行操作，并且应用程序一次又一次地崩溃。日志猫如下：

```
03-29 13:50:40.899: E/Zygote(33): setreuid() failed. errno: 2
03-29 13:50:48.378: E/Zygote(33): setreuid() failed. errno: 17
03-29 13:50:49.858: E/BatteryService(59): usbOnlinePath not found
03-29 13:50:49.858: E/BatteryService(59): batteryVoltagePath not found
03-29 13:50:49.858: E/BatteryService(59): batteryTemperaturePath not found
03-29 13:50:49.879: E/SurfaceFlinger(59): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
03-29 13:50:55.479: E/EventHub(59): could not get driver version for /dev/input/mouse0, Not a typewriter
03-29 13:50:55.479: E/EventHub(59): could not get driver version for /dev/input/mice, Not a typewriter
03-29 13:50:55.649: E/System(59): Failure starting core service
03-29 13:50:55.649: E/System(59): java.lang.SecurityException
03-29 13:50:55.649: E/System(59):   at android.os.BinderProxy.transact(Native Method)
03-29 13:50:55.649: E/System(59):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
03-29 13:50:55.649: E/System(59):   at android.os.ServiceManager.addService(ServiceManager.java:72)
03-29 13:50:55.649: E/System(59):   at com.android.server.ServerThread.run(SystemServer.java:184)
03-29 13:50:56.408: E/SoundPool(59): error loading /system/media/audio/ui/Effect_Tick.ogg
03-29 13:50:56.418: E/SoundPool(59): error loading /system/media/audio/ui/KeypressStandard.ogg
03-29 13:50:56.418: E/SoundPool(59): error loading /system/media/audio/ui/KeypressSpacebar.ogg
03-29 13:50:56.418: E/SoundPool(59): error loading /system/media/audio/ui/KeypressDelete.ogg
03-29 13:50:56.418: E/SoundPool(59): error loading /system/media/audio/ui/KeypressReturn.ogg
03-29 13:50:57.559: E/ThrottleService(59): Could not open GPS configuration file /etc/gps.conf
03-29 13:50:58.488: E/logwrapper(131): executing /system/bin/tc failed: No such file or directory
03-29 13:50:58.518: E/logwrapper(134): executing /system/bin/tc failed: No such file or directory
03-29 13:50:58.549: E/logwrapper(135): executing /system/bin/tc failed: No such file or directory
03-29 13:51:07.671: E/HierarchicalStateMachine(59): TetherMaster - unhandledMessage: msg.what=3
03-29 14:29:09.924: E/AndroidRuntime(548): FATAL EXCEPTION: main
03-29 14:29:09.924: E/AndroidRuntime(548): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.jsonparser/com.test.jsonparser.MainActivity}: java.lang.NullPointerException
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.os.Looper.loop(Looper.java:123)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-29 14:29:09.924: E/AndroidRuntime(548):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 14:29:09.924: E/AndroidRuntime(548):  at java.lang.reflect.Method.invoke(Method.java:521)
03-29 14:29:09.924: E/AndroidRuntime(548):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-29 14:29:09.924: E/AndroidRuntime(548):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-29 14:29:09.924: E/AndroidRuntime(548):  at dalvik.system.NativeStart.main(Native Method)
03-29 14:29:09.924: E/AndroidRuntime(548): Caused by: java.lang.NullPointerException
03-29 14:29:09.924: E/AndroidRuntime(548):  at com.test.jsonparser.MainActivity.onCreate(MainActivity.java:35)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 14:29:09.924: E/AndroidRuntime(548):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-29 14:29:09.924: E/AndroidRuntime(548):  ... 11 more
03-29 14:29:31.411: E/AndroidRuntime(578): FATAL EXCEPTION: main
03-29 14:29:31.411: E/AndroidRuntime(578): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.jsonparser/com.test.jsonparser.MainActivity}: java.lang.NullPointerException
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.os.Looper.loop(Looper.java:123)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-29 14:29:31.411: E/AndroidRuntime(578):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 14:29:31.411: E/AndroidRuntime(578):  at java.lang.reflect.Method.invoke(Method.java:521)
03-29 14:29:31.411: E/AndroidRuntime(578):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-29 14:29:31.411: E/AndroidRuntime(578):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-29 14:29:31.411: E/AndroidRuntime(578):  at dalvik.system.NativeStart.main(Native Method)
03-29 14:29:31.411: E/AndroidRuntime(578): Caused by: java.lang.NullPointerException
03-29 14:29:31.411: E/AndroidRuntime(578):  at com.test.jsonparser.MainActivity.onCreate(MainActivity.java:35)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 14:29:31.411: E/AndroidRuntime(578):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-29 14:29:31.411: E/AndroidRuntime(578):  ... 11 more
03-29 14:33:29.061: E/AndroidRuntime(606): FATAL EXCEPTION: main
03-29 14:33:29.061: E/AndroidRuntime(606): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.jsonparser/com.test.jsonparser.MainActivity}: java.lang.NullPointerException
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.os.Looper.loop(Looper.java:123)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-29 14:33:29.061: E/AndroidRuntime(606):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 14:33:29.061: E/AndroidRuntime(606):  at java.lang.reflect.Method.invoke(Method.java:521)
03-29 14:33:29.061: E/AndroidRuntime(606):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-29 14:33:29.061: E/AndroidRuntime(606):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-29 14:33:29.061: E/AndroidRuntime(606):  at dalvik.system.NativeStart.main(Native Method)
03-29 14:33:29.061: E/AndroidRuntime(606): Caused by: java.lang.NullPointerException
03-29 14:33:29.061: E/AndroidRuntime(606):  at com.test.jsonparser.MainActivity.onCreate(MainActivity.java:35)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 14:33:29.061: E/AndroidRuntime(606):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-29 14:33:29.061: E/AndroidRuntime(606):  ... 11 more
03-29 14:33:47.161: E/AndroidRuntime(635): FATAL EXCEPTION: main
03-29 14:33:47.161: E/AndroidRuntime(635): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.jsonparser/com.test.jsonparser.MainActivity}: java.lang.NullPointerException
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.os.Looper.loop(Looper.java:123)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-29 14:33:47.161: E/AndroidRuntime(635):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 14:33:47.161: E/AndroidRuntime(635):  at java.lang.reflect.Method.invoke(Method.java:521)
03-29 14:33:47.161: E/AndroidRuntime(635):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-29 14:33:47.161: E/AndroidRuntime(635):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-29 14:33:47.161: E/AndroidRuntime(635):  at dalvik.system.NativeStart.main(Native Method)
03-29 14:33:47.161: E/AndroidRuntime(635): Caused by: java.lang.NullPointerException
03-29 14:33:47.161: E/AndroidRuntime(635):  at com.test.jsonparser.MainActivity.onCreate(MainActivity.java:35)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 14:33:47.161: E/AndroidRuntime(635):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-29 14:33:47.161: E/AndroidRuntime(635):  ... 11 more
03-29 14:39:02.912: E/AndroidRuntime(665): FATAL EXCEPTION: main
03-29 14:39:02.912: E/AndroidRuntime(665): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.jsonparser/com.test.jsonparser.MainActivity}: java.lang.NullPointerException
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.os.Looper.loop(Looper.java:123)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-29 14:39:02.912: E/AndroidRuntime(665):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 14:39:02.912: E/AndroidRuntime(665):  at java.lang.reflect.Method.invoke(Method.java:521)
03-29 14:39:02.912: E/AndroidRuntime(665):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-29 14:39:02.912: E/AndroidRuntime(665):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-29 14:39:02.912: E/AndroidRuntime(665):  at dalvik.system.NativeStart.main(Native Method)
03-29 14:39:02.912: E/AndroidRuntime(665): Caused by: java.lang.NullPointerException
03-29 14:39:02.912: E/AndroidRuntime(665):  at com.test.jsonparser.MainActivity.example(MainActivity.java:76)
03-29 14:39:02.912: E/AndroidRuntime(665):  at com.test.jsonparser.MainActivity.onCreate(MainActivity.java:30)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-29 14:39:02.912: E/AndroidRuntime(665):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-29 14:39:02.912: E/AndroidRuntime(665):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:59:55.897

该语句`e.printStackTrace();`在 Android 应用程序中没有多大用处，因为您不会在 logcat 中看到它。最好将其转换为 logcat 输出

```
Log.d(TAG, "Exception", e); 
```

除此之外，一种可能的异常来源`IOException`是

```
return inputLine.substring(14, inputLine.length()); 
```

如果来自服务器的响应少于 14 个字符。

在`getObject()`中，添加一个`Log.d`之前`return null`

```
private JSONObject getObject(){
    try {
        obj = new JSONObject(getJSon());
    } catch(Exception e) {
        Log.d(TAG, "getObject(): Exception", e);
        return null;
    }

    return obj;
} 
```

你会看到发生了什么。吞下没有痕迹的异常几乎总是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T22:57:44.233

如您所见，有几个*NullPointerException*

```
03-29 14:29:09.924: E/AndroidRuntime(548): Caused by: java.lang.NullPointerException
03-29 14:29:09.924: E/AndroidRuntime(548):  at com.test.jsonparser.MainActivity.onCreate(MainActivity.java:35) 
```

和

```
03-29 14:39:02.912: E/AndroidRuntime(665): Caused by: java.lang.NullPointerException
03-29 14:39:02.912: E/AndroidRuntime(665):  at com.test.jsonparser.MainActivity.example(MainActivity.java:76)
03-29 14:39:02.912: E/AndroidRuntime(665):  at com.test.jsonparser.MainActivity.onCreate(MainActivity.java:30) 
```

确保给定行号中的语句（在*MainActivity.onCreate()*中）适用于非空对象。例如，确保方法*getObject()*返回一个非空值。

- 编辑 -

```
String inputLine;

while ((inputLine = in.readLine()) != null)
    inputLine += inputLine;

in.close();

return inputLine.substring(14, inputLine.length()); 
```

首先，这个 while 循环是没有用的。*(1) 它覆盖了inputLine* (2)中的读取行，它最终使*inputLine*无效，因为那是循环结束的时候。很明显，return 语句将因 NPE 而失败。您可以尝试以下方法。

```
String inputLine;
StringBuilder builder = new StringBuilder();

while ((inputLine = in.readLine()) != null) {
    builder.append(inputLine);
}

in.close();

return builder.substring(14).toString(); 
```

# iphone - 如何从 Cell 中获取 UITableViewCell indexPath？

> ID：15711889
> 
> 赞同：79
> 
> 时间：2013-03-29T21:44:23.953
> 
> 标签：iphone, ios, objective-c, xcode, cocoa

我如何从一个单元格中获取`indexPath`它`UITableView`？

我搜索了堆栈溢出和谷歌，但所有信息都在其他方面。有没有办法访问`superView`/`UITableView`然后搜索单元格？

有关上下文的更多信息：我有两个类，一个被调用`Cue`，一个被调用`CueTableCell`（它是 的子类`UITableViewCell`）`CueTableCell`是`Cue`（两个类都有指向彼此的指针）的视觉表示。`Cue`对象位于链表中，当用户执行某个命令时，需要选择`CueTableCell`下一个的视觉表示（the ） 。`Cue`因此，`Cue`该类调用列表`select`中 next 的方法，该方法从`Cue`检索并调用其，为此它需要的​​ 。`UITableView``cell``selectRowAtIndexPath:animated:scrollPosition:``indexPath``UITableViewCell`

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-03-29T21:46:08.893

```
NSIndexPath *indexPath = [self.tableView indexPathForCell:cell]; 
```

它有助于阅读[UITableView 文档](https://developer.apple.com/documentation/uikit/uitableview)，即使这被一些人认为是有争议的（见下面的评论）。

单元不知道它的索引路径是什么。**控制器**应包含任何基于数据模型操作 UI 元素或基于 UI 交互修改数据的代码。（参见[MVC](https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)。）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-28T20:10:10.980

从你的 UITableViewCell 尝试这个：

```
NSIndexPath *indexPath = [(UITableView *)self.superview indexPathForCell: self]; 
```

编辑：似乎这不适用于 iOS 8.1.2 及更高版本。感谢克里斯普林斯指出。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-23T11:21:29.513

1.  在单元格的 .h 文件中放置一个弱 tableView 属性，例如：

    `@property (weak,nonatomic)UITableView *tableView;`

2.  在 cellForRowAtIndex 方法中分配属性，例如：

    `cell.tableView = tableView;`

3.  现在无论您需要单元格的 indexPath ：

    `NSIndexPath *indexPath = [cell.tableView indexPathForCell:cell];`

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-10-06T11:20:58.127

你可以试试这个简单的技巧：

在你的`UITableViewCell`班级：

```
@property NSInteger myCellIndex; //or add directly your indexPath 
```

并根据您的`cellForRowAtIndexPath`方法：

```
...
[cell setMyCellIndex : indexPath.row] 
```

现在，您可以在任何地方检索您的单元格索引

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-03-25T00:31:19.703

为了解决那些说*“这是个坏主意”*的人，就我而言，我对此的需要是我的按钮上有一个按钮`UITableViewCell`，当按下它时，它会转到另一个视图。由于这不是单元格本身的选择，`[self.tableView indexPathForSelectedRow]`因此不起作用。

这给我留下了两个选择：

1.  **将需要传递到视图中的对象存储在表格单元格本身中。**虽然这可行，但它会破坏我的观点，`NSFetchedResultsController`因为我*不想*将所有对象都存储在内存中，特别是如果表很长。
2.  **使用索引路径从 fetch 控制器中检索项目。**是的，我必须通过黑客来弄清楚这似乎很难看`NSIndexPath`，但它最终比将对象存储在内存中更便宜。

`indexPathForCell:`是正确的使用方法，但我会这样做（假设此代码在以下子类中实现`UITableViewCell`：

```
// uses the indexPathForCell to return the indexPath for itself
- (NSIndexPath *)getIndexPath {
    return [[self getTableView] indexPathForCell:self];
}

// retrieve the table view from self   
- (UITableView *)getTableView {
    // get the superview of this class, note the camel-case V to differentiate
    // from the class' superview property.
    UIView *superView = self.superview;

    /*
      check to see that *superView != nil* (if it is then we've walked up the
      entire chain of views without finding a UITableView object) and whether
      the superView is a UITableView.
    */
    while (superView && ![superView isKindOfClass:[UITableView class]]) {
        superView = superView.superview;
    }

    // if superView != nil, then it means we found the UITableView that contains
    // the cell.
    if (superView) {
        // cast the object and return
        return (UITableView *)superView;
    }

    // we did not find any UITableView
    return nil;
} 
```

PS我的真实代码确实从表格视图中访问了所有这些，但我给出了一个示例，说明为什么有人可能想直接在表格单元格中执行类似的操作。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-06-02T10:23:35.787

为了迅速

```
let indexPath :NSIndexPath? = (self.superview.superview as! UITableView)?.indexPathForCell(self) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-14T02:13:00.393

这个问题的答案实际上对我帮助很大。

我用了`NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];`

在`sender`我的情况下是 a`UITableViewCell`并且来自`prepareForSegue`方法。

我用这个是因为我没有**，**但`TableViewController`我有`UITableView property outlet`

我需要找出它的标题，`Cell`因此需要知道它的 indexPath。

希望这对任何人都有帮助！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-11-06T11:02:42.533

在 iOS 11.0 上，您可以使用`UITableView.indexPathForRow(at point: CGPoint) -> IndexPath?`：

```
if let indexPath = tableView.indexPathForRow(at: cell.center) {
    tableView.selectRow
    (at: indexPath, animated: true, scrollPosition: .middle)
} 
```

它获取单元格的中心点，然后 tableView 返回与该点对应的 indexPath。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-09T08:58:41.860

试试这个（只有当 tableView 只有一个部分并且所有单元格的高度相同时才有效）：

```
//get current cell rectangle relative to its superview
CGRect r = [self convertRect:self.frame toView:self.superview];

//get cell index
int index = r.origin.y / r.size.height; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-20T18:15:12.900

**Swift 3.0 及以上版本-**

如果需要从自定义单元格中获取索引路径-

```
if let tableView = self.superview as? UITableView{
    if let indexPath = tableView.indexPath(for: self){
        print("Indexpath acquired.")
    }else{
        print("Indexpath could not be acquired from tableview.")
    }
}else{
    print("Superview couldn't be cast as tableview")
} 
```

一个好的做法是寻找失败的案例。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-26T09:59:57.643

从你的 UITableViewCell 尝试这个：

```
NSIndexPath *indexPath = [(UITableView *)self.superview.superview indexPathForCell:self]; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-08-03T17:06:33.583

> 斯威夫特 4.x

为了提供对我的手机的访问权限，我做了这样的事情：

我有 UIView 的扩展：

```
extension UIView {
    var parentViewController: UIViewController? {
        var parentResponder: UIResponder? = self
        while parentResponder != nil {
            parentResponder = parentResponder!.next
            if let viewController = parentResponder as? UIViewController {
                return viewController
            }
        }
        return nil
    }
} 
```

然后..在我的单元格类中：

```
class SomeCell: UITableViewCell {

    func someMethod() {
        if let myViewController = self.parentViewController as? CarteleraTableViewController {
            let indexPath : IndexPath = (myViewController.tableView).indexPath(for: self)!
            print(indexPath)
        }
    }
} 
```

这就是我的全部。

此致。

# javascript - javascript 和 jQuery 中的“This”关键字

> ID：15711895
> 
> 赞同：0
> 
> 时间：2013-03-29T21:44:47.773
> 
> 标签：javascript, jquery

我目前正在学习 jQuery，并且刚刚开始实现`"this"`关键字。我了解它在 jQuery 中的作用，但它在 javascript 中是否具有与范围参考相同的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:46:04.683

`this`不是一些 jQuery 魔法，它是一个 JavaScript 关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:56:09.330

Yes, `this` keyword in JavaScript still means the element in the current scope.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:57:32.280

Short explanation: `this` is the context of a function that can change depending on how that function is called. For example:

```
function myfunc() {
  console.log(this.toString());
}

myfunc(); //=> [object Window] 
myfunc.call('Hello World'); //=> Hello World 
```

When using prototypes, `this` refers to the current instance. In jQuery it works something like this (very simplified):

```
(function(win) {

  // Constructor
  function jQuery(selector) {

  }

  // Shortcut to create news instances
  function $(selector) {
    return new jQuery(selector);
  }

  // Public methods
  jQuery.prototype = {

    // All methods 'return this' to allow chaining
    // 'this' is the jQuery instance
    method: function() {
      return this;
    }

  };

  win.$ = $; // expose to user

}(window)); 
```

So when you do this `$(this)` you're just creating a new jQuery instance of whatever `this` refers to (usually a DOM element) so you can inherit the prototype and use the public methods.

# php - 如何使用php获取标签之间的数据

> ID：15711904
> 
> 赞同：-3
> 
> 时间：2013-03-29T21:45:33.140
> 
> 标签：php, regex

如果我有这样的输入，`<n>336197298</n>`我如何使用 php 编程获取标签之间的数字。我尝试使用正则表达式，但找不到此任务的方法。请你帮助我好吗 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:50:05.943

我认为正则表达式最好尝试这种方法，

```
function get_content( $tag , $content )
{
    preg_match("/<".$tag."[^>]*>(.*?)<\/$tag>/si", $content, $matches);
    return $matches[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:49:12.157

假设没有标签嵌套，您需要的正则表达式是

```
n >(.*?)< 
```

这准确地捕获了 和 之间`n >`的内容`<`，但它做出了许多您不清楚的假设。它总是`n`还是可以是别的东西？标签名称和 ? 之间是否总是有一个空格`>`？您是否担心匹配标签？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T22:01:56.077

不要为此使用正则表达式。

请参阅[xml_parse_into_struct](http://www.php.net/manual/en/function.xml-parse-into-struct.php)：

```
<?php
$simple = "<para><note>simple note</note></para>";
$p = xml_parser_create();
xml_parse_into_struct($p, $simple, $vals, $index);
xml_parser_free($p);
echo "Index array\n";
print_r($index);
echo "\nVals array\n";
print_r($vals);
?> 
```

输出：

```
Index array
Array
(
    [PARA] => Array
        (
            [0] => 0
            [1] => 2
        )

    [NOTE] => Array
        (
            [0] => 1
        )

)

Vals array
Array
(
    [0] => Array
        (
            [tag] => PARA
            [type] => open
            [level] => 1
        )

    [1] => Array
        (
            [tag] => NOTE
            [type] => complete
            [level] => 2
            [value] => simple note
        )

    [2] => Array
        (
            [tag] => PARA
            [type] => close
            [level] => 1
        )

) 
```

# python-2.7 - 如何在 PyGraphviz 中创建重复节点？

> ID：15711909
> 
> 赞同：3
> 
> 时间：2013-03-29T21:45:55.943
> 
> 标签：python-2.7, binary-tree, graphviz, pygraphviz

我正在使用 PyGraphviz 绘制二叉搜索树。我无法使用 PyGraphviz 创建重复节点，因此边缘循环回节点。

例如，以下代码仅生成 5 个节点，省略了重复节点。我尝试用唯一索引标记每个节点，但这并不能解决问题。

```
import pygraphviz as pgv
tree = pgv.AGraph(directed=True, strict=True)
tree.add_node(2)
tree.add_node(3)
tree.add_node(1)
tree.add_node(7)
tree.add_node(3)
tree.add_node(9)
tree.add_node(2)
tree.write('foo.dot')
image = pgv.AGraph('foo.dot')
image.layout()
image.draw('foo.pdf')
image.close() 
```

![重复节点丢失](../Images/aa800ad176ff8eddbebac60c55cb8e11.png)

**我绘制到 BST 的代码：**

```
import pygraphviz as pgv
import random

class Node:
    insertion_step = []

    def __init__(self, data):
        self.data = data
        self.left = None
        self.right = None

    def addNode(self, data):
        if data < self.data:
            if self.left is None:
                self.left = Node(data)
                self.printSubtree()
            else:
                self.left.addNode(data)  # recursively calling addNode method
        else:
            if self.right is None:
                self.right = Node(data)
                self.printSubtree()
            else:
                self.right.addNode(data)

    def printSubtree(self):
        if not (self.left is None or self.right is None):
            print self.left.data, self.data, self.right.data
            self.insertion_step.append((self.left.data, self.data, self.right.data))

        elif self.left is None and not self.right is None:
            print None, self.data, self.right.data
            self.insertion_step.append((None, self.data, self.right.data))

        elif not self.left is None and self.right is None:
            print self.left.data, self.data, None
            self.insertion_step.append((self.left.data, self.data, None))

        else:
            print None, self.data, None
            self.insertion_step.append((None, self.data, None))

    def drawTree(self, tree, f):
        print self.insertion_step
        for step in self.insertion_step:
            if not step[0] is None:
                tree.add_node(step[0], color='goldenrod2', style='filled')

            tree.add_node(step[1], color='goldenrod2', style='filled')

            if not step[2] is None:
                tree.add_node(step[2], color='goldenrod2', style='filled')

            if step[0] is None or step[1] is None or step[2] is None:
                tree.add_node('', color='goldenrod1', shape='box', style='filled')

            if not step[0] is None:
                tree.add_edge(step[1], step[0], color='sienna', style='filled')
            else:
                tree.add_edge(step[1], '', color='sienna', style='filled')
            if not step[2] is None:
                tree.add_edge(step[1], step[2], color='sienna', style='filled')
            else:
                tree.add_edge(step[1], '', color='sienna', style='filled')

        tree.write(f)
        img = pgv.AGraph(f)
        img.layout()
        img.draw(f.split('.')[0] + '.pdf')
        img.close()

if __name__ == '__main__':
    lst = [random.randint(1, 10) for i in range(10)]
    print lst
    n = Node(lst[0])
    n.printSubtree()
    for num in lst[1:]:
        n.addNode(num)

    tree = pgv.AGraph(directed=True, strict=True)
    filename = 'tree.dot'
    n.drawTree(tree, filename) 
```

![BST](../Images/b5fcc3bc36e0cd5dbae005d0c85ec3a9.png)

从上图中可以看出，边是循环的，因为没有创建重复节点。请建议我实现这一目标的方法。图中方框代表空节点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T14:18:24.070

节点名称是 GraphViz 跟踪单个节点的原因，因此它们*必须*被唯一命名。

但是，您可以随意使用重复*标签*。标签将显示在最终结果中，节点的标签默认设置为节点名称。

创建时将标签与节点名称一起设置：

```
tree.add_node(1, label=2)
tree.add_node(2, label=3)
tree.add_node(3, label=1)
tree.add_node(4, label=7)
tree.add_node(5, label=3)
tree.add_node(6, label=9)
tree.add_node(7, label=2) 
```

请注意，在内部，所有内容都在此处转换为字符串。

这导致：

![标记图](../Images/9909b737be41ef612308d0a79d54f05e.png)

您需要重构代码以生成唯一节点的唯一 ID，然后使用这些 ID 创建边缘。在这里，我只是使用带有父 ID 的堆栈遍历您的树：

```
def drawTree(self, tree, f):
    id = 0
    nodes = [(None, self)]  # queue with nodes to process

    while nodes:
        parent, node = nodes.pop(0)
        tree.add_node(id, label=node.data, color='goldenrod2', style='filled')
        if parent is not None:
            tree.add_edge(parent, id, color='sienna', style='filled')

        if node.left is not None:
            nodes.append((id, node.left))
        else:
            none_id = '{}_left_none'.format(id)
            tree.add_node(none_id, label='', color='goldenrod1', shape='box', style='filled')
            tree.add_edge(id, none_id, color='sienna', style='filled')

        if node.right is not None:
            nodes.append((id, node.right))
        else:
            none_id = '{}_right_none'.format(id)
            tree.add_node(none_id, label='', color='goldenrod1', shape='box', style='filled')
            tree.add_edge(id, none_id, color='sienna', style='filled')

        id += 1

    tree.write(f)
    img = pgv.AGraph(f)
    img.layout(program='dot')
    img.draw(f.split('.')[0] + '.pdf')
    img.close() 
```

这使：

![二叉搜索树](../Images/19542dc6c3e5140a8927e559a1d59ffa.png)

要理顺具有相等值的节点之间的边缘，您需要尝试向边缘添加权重：

```
def drawTree(self, tree, f):
    id = 0
    nodes = [(None, self)]  # queue with nodes to process

    while nodes:
        parent, node = nodes.pop(0)
        tree.add_node(id, label=node.data, color='goldenrod2', style='filled')

        if parent is not None:
            weight = 1
            if tree.get_node(parent).attr['label'] == str(node.data):
                # same value, increase weight of edge to straighten it.
                weight = 10
            tree.add_edge(parent, id, color='sienna', style='filled', weight=weight)

        if node.left is not None:
            nodes.append((id, node.left))
        else:
            none_id = '{}_left_none'.format(id)
            tree.add_node(none_id, label='', color='goldenrod1', shape='box', style='filled')
            tree.add_edge(id, none_id, color='sienna', style='filled')

        if node.right is not None:
            nodes.append((id, node.right))
        else:
            none_id = '{}_right_none'.format(id)
            tree.add_node(none_id, label='', color='goldenrod1', shape='box', style='filled')
            tree.add_edge(id, none_id, color='sienna', style='filled')

        id += 1

    tree.write(f)
    img = pgv.AGraph(f)
    img.layout(prog='dot')
    img.draw(f.split('.')[0] + '.png')
    img.close() 
```

这导致：

![带加权边的二叉树](../Images/ad4326049e38d8fef8b628e28625db52.png)

您可以调整确切的权重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T22:59:57.427

GraphViz 正在为您简化图表。为了阻止它这样做，您可以添加具有相同标签的不同节点，例如添加 21 和 22 而不是 2 并将它们标记为 2。然后您可以单独使用它们。标签是节点的属性。

我拿了你上面的示例表格来说明节点和标签的使用。它演示了节点的不同数据类型。有些有相同的标签。绘制的图形并没有显示我使用节点 ID 创建的混乱，而只是显示了标签。当然，您会为您的 BST 选择一个合理的命名方案，即使它可能只是唯一的数字。

```
import pygraphviz as pgv
import random
tree = pgv.AGraph(directed=True, strict=True)
tree.add_node("2.1", label='2')
tree.add_node(3.0, label='3')
tree.add_node(3.1, label='3')
tree.add_node(random.randint(1, 1000000), label='7')
tree.add_node(random.randint(1, 1000000), label='7')
tree.add_node(random.randint(1, 1000000), label='7')
tree.add_node("2.2", label='2')
tree.write('foo.dot')
image = pgv.AGraph('foo.dot')
image.layout()
image.draw('foo.pdf')
image.close() 
```

这让我：![示例图，只有节点，没有边](../Images/3a82a0bfa6e299cf26028e0217c116d7.png)

编辑：添加了示例代码。

# java - 将值添加到整数 []

> ID：15711910
> 
> 赞同：-3
> 
> 时间：2013-03-29T21:45:59.587
> 
> 标签：java, android, integer

我想给这个整数加一个值

```
Integer[] nums = new Integer[] {1, 393993, 2918282} 
```

我尝试为此添加值，但代码错误，请给我最好的方法来做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T21:50:56.733

在 Java 中，数组具有固定大小。所以如果你想要一个动态的数据结构，你应该使用 Java 集合包中的类。

例如，使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)：

```
ArrayList<Integer> intList = new ArrayList<Integer>();
intList.add(1);
intList.add(393993);
intList.add(2918282);

// Then add value when you need it using .add() method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:50:37.357

一旦实例化了一个数组，就不能向它添加值；它的大小是固定的。你最好使用`Java.Util.ArrayList`支持添加超出其容量的项目的东西。

# arrays - Last element in array syntax error?

> ID：15711914
> 
> 赞同：0
> 
> 时间：2013-03-29T21:46:22.803
> 
> 标签：arrays, bash, syntax-error

I need to fill an array and find out what the highest value is, which I've done. With this code:

```
full=($LASTOCT[*])
for i in $LASTOCT
do
    echo $i
done

echo "Highest value is: $(printf "%d\n" ${full[*]} | sort -n | tail -1) " 
```

My question is that no matter what number is in the last element of the array, I always get this error: `./ipcheck: line 16: printf: 134[*]: invalid number`

Any ideas of what might be causing this? Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:17:45.177

Change:

```
full=($LASTOCT[*]) 
```

to:

```
full=(${LASTOCT[*]}) 
```

# ruby-on-rails - haml 语法错误，意外的keyword_ensure，期待$end

> ID：15711918
> 
> 赞同：1
> 
> 时间：2013-03-29T21:46:38.863
> 
> 标签：ruby-on-rails, haml

已搜索广泛但没有找到适用的答案：

```
.activity
    - form_tag("/contacts/mightyfield_action", :method => "post",:class=>['form', 'form-add'])
        = text_field_tag(:name => "content", :rows => "6", :placeholder => "Notiz oder Aufgabe hinzufügen")
        .actions
            .help Hier steht vielleicht nützlicher Text
            .buttons.right
            = submit_tag("Send", :value => "Speichern", :class=>['btn', 'btn-primary'])

    %ul
        - @contact.actions.each do |action|
            %li
                .action-user
                    %img.avatar{ :src => "http://gravatar.com/avatar/#{@gravatar_id}?s=200", :width => "35px" }
                .action-content
                    = action.content
                    .action-meta= "von #{action.user.name} #{action.created_at}"

- content_for :sidebar do

    %h3 
        Aufgaben
        %span.small= "zu #{@contact.first_name} #{@contact.last_name}"

    .tasks
        %ul
        - @contact.tasks.each do |task|
            %li
                =check_box_tag(:pet_cat)
                =label_tag(:pet_cat, task.title) 
```

错误**语法错误，意外的keyword_ensure，期望$end**不断弹出最后两行。我完全迷路了。

# asp.net-mvc-4 - 在 DropDownListFor 中使用自定义对象类型 - MVC 4

> ID：15711920
> 
> 赞同：3
> 
> 时间：2013-03-29T21:46:45.047
> 
> 标签：asp.net-mvc-4

`@Html.DropDownListFor`需要一个 SelectListItem 列表。有没有办法在这里使用自定义对象而不是选择列表项并告诉下拉列表自定义对象的哪些属性用于值和文本？或者有没有一种简单的方法可以将我的客户对象转换为 SelectListItem？

我有一个状态对象： public string StatusCode {get;set;} public string StatusCodeDescription {get;set;}

所以现在我必须编写一个 for 循环来将我所有列表的状态转换为 SelectListItem ......这似乎需要一种更简单的方法......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T21:55:10.940

> @Html.DropDownListFor requires a List of SelectListItem. Is there a way to use a custom object here instead of select list item and tell the drop down list which properties of the custom object to use for the value and text?

You could use the [`SelectList constructor`](http://msdn.microsoft.com/en-us/library/dd505286%28v=vs.108%29.aspx) taking 3 arguments: an `IEnumerable<T>` and 2 strings representing the names of the value and text properties of the custom type:

```
@Html.DropDownListFor(
    x => x.SelectedStatusCode, 
    new SelectList(
        Model.Satuses, 
        "StatusCode",  
        "StatusCodeDescription"
    )
) 
```

In this example we assume that `Model.Satuses` is a property of type `IEnumerable<StatusViewModel>` where `StatusViewModel` contains at least 2 properties to bind the respectively the value and the text of the dropdown:

```
public class StatusViewModel
{
    public string StatusCode { get; set; } 
    public string StatusCodeDescription { get; set; }
    ...
} 
```

# php - 选择表中的所有数据，同时用另一个表中的值替换列？

> ID：15711921
> 
> 赞同：0
> 
> 时间：2013-03-29T21:46:47.183
> 
> 标签：php, mysql

目前我有两个表，约会和用户：

```
约会ID | 时间 | 教师编号 | 学生卡
1 | 11 | 2 | 1
2 | 12 | 2 | 1

用户 ID | 姓名
1 | 学生
2 | 老师
```

期望的结果：

```
约会ID | 时间 | 老师姓名 | 学生姓名
1 | 11 | 老师 | 学生
2 | 12 | 老师 | 学生
```

基本上我想从约会表中执行 SELECT *，但不是查询给我 id，而是希望名称替换它们。我尝试创建一个临时表和一个 JOIN，但无法弄清楚。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:50:55.100

那这个呢？

```
SELECT
    appointment_id,
    time,
    u.name AS teachername,
    v.name AS studentname
FROM
    appointments AS a
LEFT JOIN
    users AS u ON
    a.teacher_id = u.user_id
LEFT JOIN
    users AS v ON
    a.student_id = v.user_id 
```

You can check in this **[SQL Fiddle](http://sqlfiddle.com/#!2/3047e/13)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:56:10.750

try this

```
 select a.appointment_id , a.time ,b.name as teachername ,
          c.name as studentname
   from appointments a 
   inner join users b
   on a.teacher_id = b.user_id
   inner join users c
   on a.student_id = c.user_id 
```

[**DEMO HERE**](http://sqlfiddle.com/#!2/af1c2/3)

OUTPUT:

```
 APPOINTMENT_ID   TIME    TEACHERNAME     STUDENTNAME
          1          11     teacher         student
          2          12     teacher         student 
```

# linq - Sharepoint/Linq error inserting into lookup column

> ID：15711923
> 
> 赞同：0
> 
> 时间：2013-03-29T21:46:58.890
> 
> 标签：linq, sharepoint, insert, lookup

Within Sharepoint, I have a Products list and a Categories list. I'm trying to create a new (Product) item from a web form. The Product list has a Category lookup column, and when i try to create a new instance of Product, I get a null reference error on my insert. I read a post that the item needs to be created with the non-lookup column values, retrieve the new item's id, then insert the value into the lookup column, but I get the same error. Can anyone help with the correct way to do this?

```
ProductDevelopmentDataContext dc = new ProductDevelopmentDataContext(SPContext.Current.Web.Url);
EntityList<ProductItem> Product = dc.GetList<ProductItem>("Product");

ProductItem newProduct = new ProductItem();
newProduct.Title = title.Text;
newProduct.ProductDescription = description.Text;

dc.Product.InsertOnSubmit(newProduct);
dc.SubmitChanges();

var newProductID = (int)newProduct.Id;
ProductDevelopmentDataContext newdc = new ProductDevelopmentDataContext(SPContext.Current.Web.Url);

newProduct = (from p
        in newdc.Product
        where p.Id == newProductID
        select newProduct).Single();
newProduct.CategoryName.Title = category.Text;

newdc.Product.InsertOnSubmit(newProduct);
newdc.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:58:36.810

This is because `newProduct.CategoryName` is null. Rather than assigning the lookup title, assign the object itself:

```
newProduct.CategoryName = category 
```

Then all you need to do is `SubmitChanges()`. Calling `InsertOnSubmit` again will create a new record.

Also you don't need to create two `ProductDevelopmentDataContext` objects, just use dc for all the commands.

**Edit:** To get the CategoryItem object:

```
newProduct.CategoryName = (from c
        in dc.Categories
        where c.Title == category
        select new c).First(); 
```

# python - 在 rdflib 命名空间中创建 unicode 项时出现 Unicode 解码错误

> ID：15711931
> 
> 赞同：1
> 
> 时间：2013-03-29T21:47:50.243
> 
> 标签：python, rdflib

在 rdflib 命名空间中创建 unicode 项时出现 Unicode 解码错误

```
$ python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from rdflib.graph import ConjunctiveGraph
>>> from rdflib import Namespace, BNode, Literal, RDF, URIRef
***>>> rdfsNS = Namespace("http://www.w3.org/2000/01/rdf-schema#")
>>> item = "Petra Němcová"
>>> i = rdfsNS[item]***
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/rdflib/namespace.py", line 88, in __getitem__
    return self.term(key)
  File "/usr/local/lib/python2.7/dist-packages/rdflib/namespace.py", line 85, in term
    return URIRef(self + name)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc4 in position 7: ordinal not in range(128) 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:08:37.323

我不知道 rdflib，但是当你写的时候：

```
item = "Petra Němcová" 
```

您正在创建普通字符串对象 - 尝试使用以下方式定义 unicode：

```
item = u"Petra Němcová" 
```

如评论 - 如果您已经将项目作为字符串，并且您知道它的编码，请使用（如果编码是 utf-8）：

```
item = item.decode('utf-8') 
```

# android - 关闭飞行模式导致应用程序被 Android 操作系统杀死

> ID：15711932
> 
> 赞同：2
> 
> 时间：2013-03-29T21:47:51.403
> 
> 标签：android

当我的应用程序在前台并且我在应用程序的任何屏幕上时，我通过拉下通知栏打开飞行模式，几秒钟后我再次关闭飞行模式。

一旦我在几秒钟后关闭飞行模式，操作系统就会杀死我的应用程序。它不会通过 LogCat 中的任何异常。它通过 onPause()/onDestroy()，我可以在 onPause() 和 onDestroy() 方法中放置一个断点，然后它就停在那里。但我无法找出原因。

如果有人看到这种情况或让我知道找出原因的方法，我将不胜感激。

操作系统版本：4.1.2

# javascript - 变量被意外覆盖

> ID：15711936
> 
> 赞同：1
> 
> 时间：2013-03-29T21:48:12.370
> 
> 标签：javascript, variables, module, appcelerator, commonjs

我在我的应用程序中观察到（对我而言）无法解释的行为。我有一些通过 require() 包含的内容。其中一个名为“addUserFunction.js”，我有两个函数和一个包含对象的数组。
这是对象数组的定义：

```
exports.itemList = [{itemType:"info",itemName:"Information"},{...},{...}]; 
```

这是两个函数的定义：

```
exports.getItem = function(data) {
    var returnItem = {};
    for (var i=0;i<exports.itemList.length;i++) {
        if (exports.itemList[i].itemType == data.itemType){
            returnItem = exports.itemList[i]; // This line seems to pass a reference, not assign/copy
        }
    }
    returnItem.itemName = (data.itemName) ? data.itemName : returnItem.itemName;
    return returnItem;
}

exports.createPlan = function(formValues) {
    var returnItem = {
        id: 0,
        description: 'foobar',
        items: [
            exports.getItem({itemType:'info',itemName:'Information'}),
            exports.getItem({itemType:'somethingelse'}),
            exports.getItem({itemType:'bla',itemName:'yougottheidea'})
        ]
    };
    return returnItem;
} 
```

现在的问题是：一旦我使用该函数`exports.getItem`并覆盖一些属性，`getItem`似乎将新创建`returnItem`的与原始的`itemList[i]`. 所以下一次调用`itemList[i]`使用第一次调用的属性值。希望解释清楚。怎么会这样？

`createPlan()``required()`从另一个文件中调用，如下所示：

```
var aF = require('addUserFunctions');
function addUser() {
    var formValues = {name: 'test'};
    formValues.foo = aF.createPlan(formValues);
}
module.exports = addUser; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:14:08.073

每当您将变量或属性分配给对象（这包括各种对象，甚至数组）时，所分配的是对对象实例的引用的值。也就是说，如果我有

```
a = {};
b = a; 
```

then `a.foo = 1`, then also `b.foo === 1`. But then if you do `a = null;`, b still points to the same object it was pointing to before. All you were doing in your code was digging through your array, finding an appropriate entry, an returning a reference to that entry. What you meant to do was to use that reference as a template for creating a new object. There are several ways to create such an object. The most common way is to use one of a common library's `extend` methods. However, if your object is more than one level deep, or your object is composed of thing other than trivial objects, things might get tricky, and it might not be possible using these generic methods to create a deep copy of your objects, only shallow ones.

The simplest approach is modify your `getItem` to clone your templates specifically copying into the new objects the properties you need. If any property in your template references some object that you may need a copy of, be sure to make a copy of that object as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:45:34.460

原因是我不复制元素，我只链接到它，因为它是我要复制的对象。`=`不复制对象，只复制简单的变量类型，如数组、整数、布尔值等。

我创建了一个新函数，它知道这个对象的结构并逐个复制属性：

```
exports.copyListItem = function(item) {
    var newItem = {};
    newItem.itemType = item.itemType;
    newItem.itemName = item.itemName;
    // and so on
    return newItem;
} 
```

不是最优雅的方式，但它有效。有关更通用的方法，请查看此处：[克隆 JavaScript 对象的最优雅方法](https://stackoverflow.com/a/728694/1532004)

我正在回答我自己的问题，因为最初的答案只是一个评论，并且（到目前为止）对我的反驳没有反应。

# python - 在 python 中输入“实例”

> ID：15711937
> 
> 赞同：0
> 
> 时间：2013-03-29T21:48:20.577
> 
> 标签：python

我尝试`print type (variable)`查看变量是什么类，repl 告诉我：

```
<type 'instance'> 
```

有没有办法查看变量是如何构造/谁构造的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T21:50:42.880

这意味着您正在使用旧式类。在新代码中，您的所有类都应继承自`object`：

```
In [3]: class A(object):
   ...:         pass

In [5]: type(A())
Out[5]: __main__.A 
```

您仍然可以通过查看以下内容来获得旧式课程的课程`__class__`：

```
In [1]: class A: pass

In [2]: A().__class__
Out[2]: __main__.A 
```

[http://docs.python.org/2/reference/datamodel.html#new-style-and-classic-classes](http://docs.python.org/2/reference/datamodel.html#new-style-and-classic-classes)：

> 类和实例有两种风格：旧式（或经典）和新式。
> 
> 直到 Python 2.1，旧式类是用户唯一可用的风格。（旧式）类的概念与类型的概念无关：如果`x`是旧式类的实例，则`x.__class__`指定 的类`x`，但`type(x)`始终是`<type 'instance'>`。这反映了这样一个事实，即*所有旧式实例，独立于它们的类，都是用一个名为 instance 的内置类型实现的*。
> 
> Python 2.2 中引入了新型类来统一类和类型。新式类既不多也不少于用户定义的类型。if`x`是新式类的实例，则`type(x)`通常与 相同`x.__class__`（尽管不能保证 - 允许新式类实例覆盖返回的值`x.__class__`）。
> 
> ...
> 
> *For compatibility reasons, classes are still old-style by default*. New-style classes are created by specifying another new-style class (i.e. a type) as a parent class, or the “top-level type” object if no other parent is needed. The behaviour of new-style classes differs from that of old-style classes in a number of important details in addition to what `type()` returns. Some of these changes are fundamental to the new object model, like the way special methods are invoked. Others are “fixes” that could not be implemented before for compatibility concerns, like the method resolution order in case of multiple inheritance.
> 
> Old-style classes are removed in Python 3, leaving only the semantics of new-style classes.

# android - 使用手电筒后无法使用条形码扫描仪

> ID：15711938
> 
> 赞同：2
> 
> 时间：2013-03-29T21:48:26.007
> 
> 标签：android, cordova, phonegap-plugins, barcode-scanner

我正在使用 Phonegap 2.5，并且我已经下载了最新版本的 BarcodeScanner 和 Torch。如果我使用手电筒然后尝试扫描图像，我会收到“抱歉，Android 相机遇到问题。您可能需要重新启动设备。”。我在想手电筒并没有放开手电筒。如果您同意这是问题所在，任何人都知道强制它释放的方法吗？

```
03-29 16:36:53.094: I/dalvikvm-heap(15000): Grow heap (frag case) to 13.967MB for 3686416-byte allocation
03-29 16:36:53.104: W/MediaPlayer-JNI(15000): MediaPlayer finalized without being released
03-29 16:36:53.104: W/MediaPlayer-JNI(15000): MediaPlayer finalized without being released
03-29 16:36:53.104: W/MediaPlayer-JNI(15000): MediaPlayer finalized without being released
03-29 16:36:53.114: W/MediaPlayer-JNI(15000): MediaPlayer finalized without being released
03-29 16:36:53.114: W/MediaPlayer-JNI(15000): MediaPlayer finalized without being released
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.204: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.214: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.224: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.224: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x00000000
03-29 16:36:53.234: I/PlatformSupportManager(15000): Using implementation class com.google.zxing.client.android.common.executor.HoneycombAsyncTaskExecInterface of interface com.google.zxing.client.android.common.executor.AsyncTaskExecInterface for SDK 11
03-29 16:36:53.404: I/PlatformSupportManager(15000): Using implementation class com.google.zxing.client.android.camera.open.GingerbreadOpenCameraInterface of interface com.google.zxing.client.android.camera.open.OpenCameraInterface for SDK 9
03-29 16:36:53.404: I/GingerbreadOpenCamera(15000): Opening camera #0
03-29 16:36:53.414: W/CaptureActivity(15000): Unexpected error initializing camera
03-29 16:36:53.414: W/CaptureActivity(15000): java.lang.RuntimeException: Fail to connect to camera service
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.hardware.Camera.native_setup(Native Method)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.hardware.Camera.<init>(Camera.java:340)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.hardware.Camera.open(Camera.java:302)
03-29 16:36:53.414: W/CaptureActivity(15000):   at com.google.zxing.client.android.camera.open.GingerbreadOpenCameraInterface.open(GingerbreadOpenCameraInterface.java:57)
03-29 16:36:53.414: W/CaptureActivity(15000):   at com.google.zxing.client.android.camera.CameraManager.openDriver(CameraManager.java:78)
03-29 16:36:53.414: W/CaptureActivity(15000):   at com.google.zxing.client.android.CaptureActivity.initCamera(CaptureActivity.java:701)
03-29 16:36:53.414: W/CaptureActivity(15000):   at com.google.zxing.client.android.CaptureActivity.surfaceCreated(CaptureActivity.java:384)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.SurfaceView.updateWindow(SurfaceView.java:569)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.SurfaceView.access$000(SurfaceView.java:86)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:174)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:680)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1842)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.Choreographer.doFrame(Choreographer.java:532)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.os.Handler.handleCallback(Handler.java:725)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.os.Handler.dispatchMessage(Handler.java:92)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.os.Looper.loop(Looper.java:137)
03-29 16:36:53.414: W/CaptureActivity(15000):   at android.app.ActivityThread.main(ActivityThread.java:5234)
03-29 16:36:53.414: W/CaptureActivity(15000):   at java.lang.reflect.Method.invokeNative(Native Method)
03-29 16:36:53.414: W/CaptureActivity(15000):   at java.lang.reflect.Method.invoke(Method.java:525)
03-29 16:36:53.414: W/CaptureActivity(15000):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
03-29 16:36:53.414: W/CaptureActivity(15000):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
03-29 16:36:53.414: W/CaptureActivity(15000):   at dalvik.system.NativeStart.main(Native Method)
03-29 16:36:53.424: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x01030042
03-29 16:36:53.424: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x01030042
03-29 16:36:53.434: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x01030044
03-29 16:36:53.434: W/asset(15000): deep redirect failure from 0x01030046 => 0x0208000c, defStyleAttr=0x01010084, defStyleRes=0x01030022, style=0x01030044 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T16:34:19.207

尝试使用这个 phonegap 插件代替普通的条码扫描器。

[https://github.com/Scandit/BarcodeScannerPlugin](https://github.com/Scandit/BarcodeScannerPlugin)

# html - 表展开剩余空间

> ID：15711944
> 
> 赞同：1
> 
> 时间：2013-03-29T21:48:45.110
> 
> 标签：html, deployment, html-table, max, space

你如何分配表格列的剩余空间？就像我想要一个包含以下列的表：

*   id：应该尽可能小（宽度），因为我不想要很多空格
*   标题：应该占用尽可能多的空间
*   内容：应该占用尽可能多的空间
*   行动：（编辑删除）应该尽可能小

这是我想做的脚手架：

```
| <--------------------------------- MAX WIDTH ---------------------------------> |

| id |            title            |            content            |    action    | < this is what i want
+----+-----------------------------+-------------------------------+--------------+
| 23 | test1                       | 123080asdu0a                  | edit  delete |
| 32 | test2                       | 123080asdu0a                  | edit  delete |
... 
```

您如何将剩余空间（100% - id 的宽度 - 动作的宽度除以 2）部署到标题和内容的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:02:05.107

将小列设置`width`为`1px`（`0`不起作用）。内容会拉伸它，但会尽可能小。

将大列设置`width`为`50%`。这将使它们具有相同的宽度（除非一个文本比另一个文本多得多并且需要更多空间）。

要将“编辑”和“删除”保持在同一行，请使用容器`div`或`span`设置`white-space: nowrap`来防止自动换行。

我做了一个小提琴：http: [//jsfiddle.net/RSsNS/](http://jsfiddle.net/RSsNS/)

**HTML**：

```
<table>
    <tr>
        <td class="small">ID</td>
        <td class="big">Title</td>
        <td class="big">Content</td>
        <td class="small">Action</td>
    </tr>
    <tr>
        <td class="small">23</td>
        <td class="big">Test 1</td>
        <td class="big">123080asdu0a</td>
        <td class="small">
            <div>
                edit delete
            </div>
        </td>
    </tr>
    <tr>
        <td class="small">32</td>
        <td class="big">Test 2</td>
        <td class="big">123080asdu0a</td>
        <td class="small">
            <div>
                edit delete
            </div>
        </td>
    </tr>
</table> 
```

**CSS**：

```
table {
    width: 400px;
    border: 1px dashed #AAA;
}
td {
    border: 1px solid #CCC;
}
.small {
    width: 1px;
}
.big {
    width: 50%;
}
td > div {
    white-space: nowrap;
} 
```

# linux - 如何在本地获取我在共享主机上创建的存储库？

> ID：15711948
> 
> 赞同：1
> 
> 时间：2013-03-29T21:49:30.783
> 
> 标签：linux, git

在共享主机上，我有一个网站，我想通过将其添加到 git 版本控制系统来改进它。

# 在远程服务器上

```
$cd public_html
$git init
$git add .
$git commit -m 'First Commit'
$cd .git
$ git config git-ftp.user myuser
$ git config git-ftp.password mypass
$ git config git-ftp.url ftp.mydomain.ro 
```

# 本地 linux mint/apache

现在如何从本地服务器克隆/获取/使用我的存储库？

我试过

```
$ git clone ftp://ftp.mydomain.ro/my-project.git 
```

致命：找不到“ftp”的远程助手

# 更新

我还尝试初始化一个空/裸存储库：

```
git init --bare my-project.git 
```

和本地

```
$git clone ssh://myuser@ftp.mydomain.ro/my-project.git 
```

后果是：

```
Cloning into ftp.mydomain.ro...
ssh: connect to host ftp.mydomain.ro port 22: Connection timed out
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:25:12.647

尝试在克隆 URL 上指定 ftp: 方案。

[ftp://ftp.mydomain.ro](ftp://ftp.mydomain.ro)

这告诉 git 使用哪个协议来访问您的远程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:21:52.547

我找到了答案：

```
ssh://myuser@mydomain.ro:15554/home/mydomain/public_html/.git 
```

这行得通。

# loops - HLA 高级装配连续循环

> ID：15711949
> 
> 赞同：0
> 
> 时间：2013-03-29T21:49:35.470
> 
> 标签：loops, assembly, count, continuous, hla

问题想从输入循环遍历一个小数，直到剩下的唯一数字是一。但是，一旦第一个循环达到 0，它应该像这样从第一个数字负 1 再次循环，

```
Input decimal for loop: 4
Your loop result is: 4321 321 21 1 
```

或者，

```
Input decimal for loop: 6
Your loop result is: 654321 54321 4321 321 21 1 
```

我现在有，

```
DoWhileLoop:
DoWhileBody:
    stdout.put( " I => ", I );
    dec( I );
DoWhileTermination:
    cmp( I, 0 );
    jng DoWhileLoopDone;
    jmp DoWhileLoopBody;
DoWhileLoopDone: 
```

如果输入为 4，则打印，

```
I => 4 I => 3 I => 2 I => 1 
```

我尝试了一个嵌套的 for 循环来获得所需的连续性，但我不知道如何在不使计算机崩溃的情况下增加它...帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:44:19.723

解决了。我需要一个内部循环和第二个变量（J）来传输这个值。像这样（虚拟代码），

```
myWhileLoop:
myWhileLoopTermination:
    cmp( Y, 0 );
    jng WhileLoopDone;
myWhileLoopBody:

// Inner for loop goes in the body

    innerForLoop:
    InitializeinnerForLoop:        
    // Passing value of Y to Z
        mov( Y, Z );
    innerForLoopTerminationTest:
        cmp( Z, 0 );
        jng innerForLoopDone;
    innerForLoopBody:
        stdout.put( Z );
    innerForLoopDecrement:
        dec( Z );
        jmp innerForLoopTerminationTest;
    innerForLoopDone:

    dec( Y );
    jmp myWhileLoop;
myWhileLoopDone: 
```

# jquery - jQuery 自动完成中的自定义数据格式

> ID：15711950
> 
> 赞同：0
> 
> 时间：2013-03-29T21:49:50.563
> 
> 标签：jquery, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

我有一个 jQuery 自动完成脚本，它从数据库 (Oracle) 获取数据。它工作正常，但我想以不同的方式显示数据。

我以[http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)为例。不知何故，我不让它工作。我基本上是在尝试与示例中的相同（与项目一起显示描述），但使用远程数据源。

这是我的代码：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/redmond/jquery-ui.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<script>
$(document).ready(function()
{
$('#id').val("");
$('#value').val("");
$('#desc').val("");

            $("#value").autocomplete({
                source: "states.php",
                minLength: 1,

                select: function(event, ui) {
                    $('#id').val(ui.item.id);
                    $('#value').val(ui.item.value);
                    $('#desc').val(ui.item.desc);
                }
            });
             .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
             return $( "<li>" )
             .append( "<a>" + item.value + "<br>" + item.desc + "</a>" )
             .appendTo( ul );
};
});
</script>
</head>
<body>
<form action="<?php echo $PHP_SELF;?>"  method="post">
<p class="ui-widget">
<input type="text" id="value"  name="value" />
<input type="text" id="desc" name="desc" />
<input type="text" id="id" name="id" /></p>
<p><input type="submit" name="submitBtn" value="Submit" /></p>
</form>
</body>
</html> 
```

如果我删除 .data 块，我的自动完成工作正常。但当然没有正确的格式。

```
 .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
             return $( "<li>" )
             .append( "<a>" + item.value + "<br>" + item.desc + "</a>" )
             .appendTo( ul );
}; 
```

有人有想法吗？

# erlang - Erlang rotating/random global value

> ID：15711951
> 
> 赞同：0
> 
> 时间：2013-03-29T21:49:53.560
> 
> 标签：erlang, load-balancing

I have a cluster of c-nodes that connect to my erlang instance and need to have messages distributed amongst them. My current method of doing this is to have a `-define` of the list of cnode name atoms, and a `gen_server` which simply responds to request for the names by rotating the list and sending back whatever is currently at the front, and the requesting process then interacts with whatever node it was given. Unfortunately these c-nodes are very heavily used and that `gen_server` is backing up significantly (staying at around 2k-6k messages in its queue).

I'm wondering if there's any other way I could "load balance" across these c-nodes. My initial thought was to just pick a random element from the list whenever a process needs to interact with one, but that seems extremely inefficient to me. Are there any other methods I'm not thinking of?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T21:49:56.430

There are a few other methods you could try out:

1.  **Hashing** - you take a client id or something unique and hash it over the list of down stream servers to pick
2.  **Round Robin** - you store all down stream servers in an ets table and keep a last accessed tuple with them. You then grab all servers from the ets table and find the least recently used, updating the field at the same time.
3.  **Random** - just pick one.

But I'm going to have to agree with Saurabh Barjatiya.

> **不要在没有运行...基准的情况下放弃随机分布。**

我有一个生产系统，我们尝试在其中进行循环负载平衡，因为我认为随机分区太“低效”并且对于我们需要的不够“平滑”。

在完成了一些不同的解决方案（ets表、散列、gen_server 的东西主要是上述三个以及其他一些非常令人尴尬的解决方案）之后，我尝试了以下方法，因为它**知道**它不会很好地工作：

```
Count = length(Targets),
random:seed(now()),
Route = lists:nth(random:uniform(Count),Targets), 
```

在本地测试之后，然后在生产系统中，结果证明**它足够快**（如果不是最快的话），并且它分发的所有东西都**足够平滑以**满足我们的需要，并且因此我们没有任何性能问题。

In general don't make the same mistake I did and waste time ~~optimizing~~ complicating code that does not need to be optimized. **Always** benchmark a solution to really see if your assumptions are correct.

# ant - 在 Ant 中重命名一个动态命名的目录？

> ID：15711955
> 
> 赞同：2
> 
> 时间：2013-03-29T21:50:18.247
> 
> 标签：ant

关于如何重命名目录有很多答案，但它们都需要知道确切的目录名称。就我而言，名称是动态生成的。我想做这样的事情，但这失败了，因为我不能通配源目录：

```
<copy todir="./some/runtime/directory/mydir">
    <fileset dir="some/build/dir/mydir*"/> <!-- name is mydir_<timestamp> -->
</copy> 
```

在 bash 中，我可以做到`mv some/build/dir/mydir* some/runtime/dir/mydir`。我正在尝试找到等效的 ant 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:04:31.673

如果复制目录内容就足够了，那么只需清理你的构建文件夹，你可以试试这个：

```
<copy todir="./some/runtime/directory/mydir">
    <fileset dir="some/build/dir">
        <include name="**/mydir*/**/*" /> <!-- or just mydir/**/* -->
    </fileset>
</copy> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T09:17:51.360

我先创建了一个属性，然后复制了它：-

```
<dirset id="my-dir-set" 
        dir="some/build/dir" includes="mydir*"/>
<property name="my-dir-name" refid="my-dir-set" />
<fail message="Must have exactly one directory - ${my-dir-name}">
    <condition>
        <resourcecount refid="my-dir-set" count="1" when="ne" />
    </condition>
</fail>
<move file="${my-dir-name}" 
      tofile="./some/runtime/directory/mydir" /> 
```

但是，如果您可以保证 dirset 在没有测试的情况下是唯一的：-

```
<move tofile="./some/runtime/directory/mydir">
    <dirset dir="some/build/dir" includes="mydir*" />
</move> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-27T09:55:20.230

我偶然发现了同样的问题。在没有找到答案后按要求工作，因为总是动态目录名称也被复制，我来到了这个解决方案：

```
<copy todir="some/runtime/directory/myTargetDir">
    <fileset dir="some/build/dir" includes="mySourceDir_*/**/*"/>
    <cutdirsmapper dirs="1"/>
</copy> 
```

这会将“some/build/dir/mySourceDir_*”的**包含内容**复制到“some/runtime/directory/myTargetDir”。“cutdirsmapper”通过剥离动态目录名称“mySourceDir_*”来解决问题。

（使用 Ant 1.10.9 测试。）

# javascript - Trampoline over Recursion 用于数组和对象迭代

> ID：15711956
> 
> 赞同：1
> 
> 时间：2013-03-29T21:50:19.450
> 
> 标签：javascript, performance, recursion, continuation-passing, trampolines

这可能只是“周五 5:00 后我想回家”的效果，但我被这个问题难住了。我有一个递归迭代器方法，我将调用每个方法：

```
function canIterate(obj) {
   return (obj && (typeof obj === 'object' || Array.isArray(obj)));
}

function each(obj, onSuccess, recursive) {
    if (canIterate(obj)) {
        Object.keys(obj).forEach(function(key) {
            var val = obj[key];
            if (onSuccess && val && key) {
                var quit = onSuccess(val, key);
                if (false === quit) {
                    return false;
                }
            }
            if (true === recursive) {
                each(val, onSuccess, true);
            }
        });
    }
} 
```

这在大量数据上非常慢（我将在下面解释）。正如@raganwald 在这里解释的那样，[蹦床是解决问题的方法。](http://raganwald.com/2013/03/28/trampolines-in-javascript.html). *我的问题是：如何重构这个递归函数以利用蹦床技术？*

所以我有一个轮询机制来请求树的当前状态，在这种情况下，它是一个位置树，它看起来像：

```
Hospital Campus Main
    Main Building
        Radiology Department
             Lab 1
             Lab 2
             MRI Lab
                 Machine Cabinets
                     Spare Parts Shelf 
```

树呈现在属于位置的事物网格中，对于网格中具有位置的每一行，我需要呈现树，将根设置为该行的位置。所以如果我们有：

```
Part   | Location | Tree
widget   MRI Lab    MRI Lab > Machine Cabinets > Spare Parts Shelf 
```

所以不要介意部分或全部这些可以在服务器端处理——我稍后会优化数据获取的性能。

有没有一种有效的方法来重写我的每种方法以使用 Trampoline 或[CPS 样式](http://www.2ality.com/2012/06/continuation-passing-style.html)？

# c# - 将具有 C# 和 VB 的 ASP.NET 网站转换为 Web 应用程序

> ID：15711964
> 
> 赞同：5
> 
> 时间：2013-03-29T21:50:50.350
> 
> 标签：c#, asp.net, vb.net

我有一个已转换为 Web 应用程序的 ASP.NET 网站项目。我将具有 vb 和 cs 子目录的 App_Code 转换为将文件夹重命名为 Old_App_Code。现在 C# 代码将无法编译，无法识别任何语法，并且错误列表中显示数百个错误。

我知道在网站项目中可能同时使用两种语言，但是如何在 Web 应用程序项目中同时编译这两种语言？还是我必须将所有 C# 转换为 VB？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T21:57:16.303

To run C# and VB together you can do some [changes in web.config](http://msdn.microsoft.com/en-us/library/a15ebt6c%28v=vs.85%29.aspx) such as;

```
<system.codedom>
<compilers>
        <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="%ASSEMBLY_VERSION%"/>
        </compiler>
        <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <providerOption name="CompilerVersion" value="%ASSEMBLY_VERSION%"/>
        </compiler>
    </compilers> 
```

and

```
<compilation debug="true" defaultLanguage="VB">
<codeSubDirectories>
                <add directoryName="CS_Code"/>
            </codeSubDirectories>
        </compilation> 
```

for the rest you you use this walktrough

[https://stackoverflow.com/a/735062/929902](https://stackoverflow.com/a/735062/929902)

# mysql - 我该如何解决这个查询？

> ID：15711968
> 
> 赞同：-1
> 
> 时间：2013-03-29T21:50:57.087
> 
> 标签：mysql, sql, database

有人可以帮忙解决这个问题吗：

列出所有拥有多个仪表的客户。

我是一个完整的新手，如果这是一个容易解决的问题，请原谅我。

```
Customers – minimum 20 records
Meters – min. 30 records
Meter Readings – min. 100 readings
Invoices – 1 per Meter Reading 
```

我尝试了以下查询但没有成功...

```
select *
from Customers
LEFT OUTER JOIN Meters ON Customers.idCustomers = Meters.Customers_idCustomers
where Customers.idCustomers = Customers.idCustomers; 
```

我也尝试过 SELECT CASE 查询

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:53:23.553

这是一种方法：

```
select c.*
from customers c
where c.idCustomer in (select idCustomer
                       from Meters
                       group by Customers_idCustomers
                       having count(*) > 1
                      ) 
```

在 MySQL 中，您还可以通过以下方式将其表示为与组的联接：

```
select c.*
from customers c join
     meters m
     on c.idCustomer = m.Customers_idCustomer
group by c.idCustomer
having count(*) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:56:44.037

这就是 GROUP BY 子句的用武之地！

```
select customers.*, count(*) meter_count
from customers
inner join meters on customers.idCustomer = meters.idCustomer
group by customers.idCustomer
having meter_count > 1 
```

# php - PHP从url数组同时（并行）下载多个文件

> ID：15711971
> 
> 赞同：0
> 
> 时间：2013-03-29T21:51:10.273
> 
> 标签：php, curl, download

我想从php中的url数组（同时）下载多个文件

例子 ：

```
$array = array(
    "http://mysite.com/a1.zip",
    "http://mysite.com/a2.zip",
    "http://mysite.com/a3.zip",
    "http://mysite.com/a4.zip",
    "http://mysite.com/a5.zip"
); 
```

我想在不使用 foreach 的情况下将上述文件下载到下面提到的路径我想在 php 中同时下载它们。

```
$to_file_path = "http://www.mysite.com/downloaded"; 
```

如果（$to_file_path）

///它应该在将所有文件复制到新路径后返回

echo '成功';

我确信 curl 可以做到这一点，但请任何人为我创建一些简单的例子，因为我对 curl 不是很熟悉。

请一点帮助将不胜感激..

嘿，它实际上并不是重复的，我的逻辑有很大不同我想同时下载多个文件而不等待一个文件完成，这样我们可以利用服务器的全部功能，它可以节省我们的时间..请帮助我。 ..我非常需要这个..

我可以一一下载

foreach($array 作为 $filename){

复制（$文件名，$to_file_path.basename（$文件名））

}

但它太浪费时间了，它分别下载每个文件，但我想同时下载数组中提到的所有文件..

请帮助.. 评论中的示例编码表示赞赏.. 谢谢

# c - converting little to big endian by reversing bytes

> ID：15711974
> 
> 赞同：0
> 
> 时间：2013-03-29T21:51:21.770
> 
> 标签：c

I am trying to convert my little endian to big endian by reversing the bytes but i get the same output as of the little endian. I have modified my code alot but the value remains the same. If someone could tell me where i am going wrong. Thank you for the help

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
        FILE* input;
        FILE* output;

        input = fopen(argv[1],"r");
        output = fopen(argv[2],"w");

        int zipcode, population, value;
        int popluationEndian;

        unsigned char *convert =  (unsigned char*) &population;
        unsigned char temp[4];

        int i;
        while(fscanf(input,"%d %d\n",&zipcode, &population)!= EOF)
        {
                for(i = 0; i<4; i++)
                {
                        temp[i] = convert[3-i];
                }
               popluationEndian = fwrite(&population,sizeof(int),1,output);
        }

        fclose(input);                
        fclose(output);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:53:09.950

You change the byte order here

```
temp[i] = convert[3-i]; 
```

but then never use `temp` again.

You probably want to output what is in `temp` rather than what is in `population`.

# c# - 如何在 C# 中以编程方式确定 HttpWebRequest 的标头？

> ID：15711977
> 
> 赞同：0
> 
> 时间：2013-03-29T21:52:12.090
> 
> 标签：c#, httpwebrequest, bots, webautomation

我涉足了一些机器人/网络自动化软件的编码。为了做我所做的，我只是用 Fiddler 嗅探标头并手动将它们添加到请求中。我想知道是否有更简单的方法可以做到这一点，也许我可以只为 GET 请求指定 URL，它将自动确定所需的标头并添加它们。

我不确定这是否可行，但我正在寻找一种方法来创建更清洁、更简单的代码，这会很有帮助。

谢谢，布拉德

# vbscript - 新窗口未与 VBScript 成为焦点

> ID：15711980
> 
> 赞同：1
> 
> 时间：2013-03-29T21:52:21.550
> 
> 标签：vbscript

我有一段简单的代码，它要求用户导航到 .csv 文件，它会计算列数（更大项目的一部分），虽然它运行良好，但我遇到了一个非常烦人的问题。 .. 当窗口打开提示用户导航到文件时，它不在焦点上，而是位于先前处于焦点的窗口后面。谁能指出出了什么问题？

我正在使用运行 IE 9 版本 9.0.8112.16421 的 Windows 7 64 位

```
'Get location of .csv file

'set the type of dialog box you want to use: 1 = Open 2 = SaveAs 3 = File Picker 4 = Folder Picker
Const msoFileDialogOpen = 1

Set fso = CreateObject("Scripting.FileSystemObject")
Set objWord = CreateObject("Word.Application")
Set WshShell = CreateObject("WScript.Shell")
'Launch at default path
strInitialPath = WshShell.ExpandEnvironmentStrings("C:\")
objWord.ChangeFileOpenDirectory(strInitialPath)

With objWord.FileDialog(msoFileDialogOpen)
   .Title = "Select the file to process"
   .AllowMultiSelect = False
   .Filters.Clear
    .Filters.Add "CSVFiles", "*.csv"
   .Filters.Add "All Files", "*.*"               
   If .Show = -1 Then 
      For Each File in .SelectedItems 
        Set objFile = fso.GetFile(File) 
      Next 
   End If
End With
'Close Word
objWord.Quit

'Counts columns in csv file if delimiter is comma

Dim oFso, oReg, sData, lCount
Const ForReading = 1
Set oReg = New RegExp
Set oFso = CreateObject("Scripting.FileSystemObject")
sData = oFso.OpenTextFile(objFile.Path, ForReading).ReadLine
With oReg
.Global = True
'Check Pattern (delimiter, has qualifier?)
'.Pattern = ","
'.Pattern = "|"
'.Pattern = "^"
.Pattern = ""","""
'.Pattern = """|"""
'.Pattern = """^"""
lCount = .Execute(sData).Count + 1
End With
WScript.Echo lCount
Set oFso = Nothing
Set oReg = Nothing 
```

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:46:13.373

您是否尝试过[AppActivate](http://msdn.microsoft.com/en-us/library/wzcddbek%28v=vs.84%29.aspx)？

```
CreateObject("WScript.Shell").AppActivate "Your window title here..." 
```

# java - swing jtable默认显示多行

> ID：15711984
> 
> 赞同：0
> 
> 时间：2013-03-29T21:52:48.680
> 
> 标签：java, swing, netbeans, jtable, abstracttablemodel

我正在使用 java swing 和 NetBeans 开发一个桌面应用程序它使用带有自定义表模型的 jtable 来呈现数据。我想在表格中显示最小行数，这样即使要显示的实际行数小于最小值，表格也应该显示额外的虚拟行以构成最小行数。

下面是表格模型的代码片段

```
public class MyTableModel extends AbstractTableModel {

    private List<List<Object>> dataList = new ArrayList<>();
     private String[] header = { "ID","SUBJECT","LETTTER FROM","LETTER DATE","DATE RECEIED",
                                  "REMARKS","DATE DISPATCHED","DESTINATION OFFICE"};

    public List<List<Object>> getDataList() {
        return dataList;
    }

    public void setDataList(List<List<Object>> dataList) {       
        this.dataList = dataList;
        fireTableDataChanged();       
        fireTableStructureChanged();        
    }

    public void setHeader(String[] header) {
        this.header = header;
    }

    public String[] getHeader() {
        return header;
    }

    @Override
    public int getRowCount() {
        return dataList.size();
    }

    @Override
    public int getColumnCount() {
        return header.length;
    }

    @Override
   public String getColumnName(int col) {
    return header[col];
   }

    @Override
    public Object getValueAt(int row, int col) { 
    return dataList.get(row).get(col);
    }

    @Override
     public Class<?> getColumnClass(int column)
        {
            for (int row = 0; row < getRowCount(); row++)
            {   
                Object o = getValueAt(row, column);

                if (o != null)
                {
                    return o.getClass();
                }              
            }
            return Object.class;
        }
    } 
```

任何可用的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T22:17:22.380

首先，您需要返回`minRowCount`较大的行数或行数...

```
@Override
public int getRowCount() {
    return Math.max(dataList.size(), minRowCount);
} 
```

然后你需要检查一个值的请求是否在数据列表的范围内

```
@Override
public Object getValueAt(int row, int col) { 
    Object value = null;
    if (row < dataList.size()) {
        value = dataList.get(row).get(col);
    }
    return value;
} 
```

如果您打算让表格可编辑，您还需要调整`isCellEditable`和`setValueAt`方法

# c# - 如何以 0,00E+00 形式显示浮点和双精度值？

> ID：15711985
> 
> 赞同：-2
> 
> 时间：2013-03-29T21:52:54.217
> 
> 标签：c#, .net

如何以 0,00E+00 形式显示浮点和双精度值？CultureInfo 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:08:48.357

您正在寻找的是[指数格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#EFormatString)，而不是 CultureInfo。使用您的用户想要的 CultureInfo。

```
double value = 12345.6789;
Console.WriteLine(value.ToString("E", CultureInfo.InvariantCulture));
// Displays 1.234568E+004

Console.WriteLine(value.ToString("E10", CultureInfo.InvariantCulture));
// Displays 1.2345678900E+004

Console.WriteLine(value.ToString("e4", CultureInfo.InvariantCulture));
// Displays 1.2346e+004

Console.WriteLine(value.ToString("E", CultureInfo.CreateSpecificCulture("fr-FR")));
// Displays 1,234568E+004 
```

# php - 更改数组中的键名

> ID：15711986
> 
> 赞同：-1
> 
> 时间：2013-03-29T21:52:59.040
> 
> 标签：php

我有一个名为的数组`$eduAdd`，我在它的开头添加了一个字符串，如下所示：

```
array_unshift($eduAdd, $userId); 
```

这是结果：

```
Array
(
    [0] => 3
    [fieldId] => Array
        (
            [0] => 4
        )

    [educationTitle] => Array
        (
            [0] => g
        )

    [educationDegree] => Array
        (
            [0] => g
        )

) 
```

我怎样才能重命名`[0] => 3`为`['userId'] => 3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T21:55:15.260

而不是首先使用`array_unshift`use `$eduAdd['userId'] = $userId`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:03:30.073

如果它需要成为第一个元素（尽管在数组中毫无意义），请尝试使用[`array_merge()`](http://www.php.net/manual/en/function.array-merge.php)-

```
$userId['userId'] = $userId
$eduAdd = array_merge($userId,$eduAdd); 
```

phpfiddle - [http://phpfiddle.org/main/code/1m0-yfn](http://phpfiddle.org/main/code/1m0-yfn)

# c# - 将数据从一种形式的列表框移动到另一种形式的列表框 (Visual C#)

> ID：15711998
> 
> 赞同：0
> 
> 时间：2013-03-29T21:53:37.813
> 
> 标签：c#, forms, listbox

我是 C# 的新手（一直在学习 Java），这是我第一次发帖！我浏览了论坛，但找不到我需要的东西。

我正在尝试将字符串的详细信息从一种形式的列表框中移动到另一种形式的列表框中——它应该是一个电子邮件客户端。

原始数据由流式阅读器接收并拆分为姓名和电子邮件。

这是包含数据的表单的代码部分 (frmAddressBook)：

```
public void btnOK_Click(object sender, EventArgs e)
    {                                 
             if (tmpLine.StartsWith(lstAddresses.SelectedItem.ToString()))
                {
                //Split the line.
                namesEmailAddresses = tmpLine.Split(',');

                lstTest.Items.Add(namesEmailAddresses[0] + ", " + namesEmailAddresses[1]);

                frmWorldEmail frmWE = new frmWorldEmail();
                frmWE.names = namesEmailAddresses[0];
                frmWE.emails = namesEmailAddresses[1];
                frmWE.Show();    

                }//if       

            } 
```

我试图将数据输入（frmWorldEmail）的表单的代码部分：

```
public partial class frmWorldEmail : Form
{
   public frmWorldEmail()
    {
        InitializeComponent();
    }
    public string names 
    {
        get { 
            names = this.names; 
            return names; 
        }
        set { }
    }

    public string emails
    {
        get {
            emails = this.emails;
            return emails; 
        }
        set { }
    }

    public void lstNameTo_SelectedIndexChanged(object sender, EventArgs e)
    {
        lstNameTo.Items.Add(names);
        lstNameTo.Show();            
    }

    public void lstEmailTo_SelectedIndexChanged(object sender, EventArgs e)
    {
        lstEmailTo.Items.Add(emails);        
        lstEmailTo.Show();            
    }      
} 
```

我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:05:35.217

将您的表格更改为此。我不明白您在选定的索引更改事件中添加的项目

```
 public partial class frmWorldEmail : Form
 {
      public frmWorldEmail(string names, string emails)
      {
         InitializeComponent();

         lstNameTo.Items.Add(names);
         lstEmailTo.Items.Add(emails);
      }     
  } 
```