# StackOverflow 问答 14029000-14029999

# python - 为什么根小部件的窗口大小不同？

> ID：14029010
> 
> 赞同：2
> 
> 时间：2012-12-25T08:33:01.500
> 
> 标签：python, kivy

我正在尝试使用带有 的自定义小部件`GridLayout`，但结果始终是角落中的一个非常小的网格，而不是在整个窗口中扩展的网格。

示例代码：

```
import kivy
kivy.require('1.5.1')

from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.label import Label
from kivy.uix.widget import Widget
from kivy.uix.gridlayout import GridLayout

class MyWidget(Widget):
    def __init__(self):
        super(MyWidget, self).__init__()

        grid_layout = GridLayout(cols=3)
        grid_layout.add_widget(Button(text='A'))
        grid_layout.add_widget(Button(text='B'))
        grid_layout.add_widget(Label(text='text'))
        grid_layout.add_widget(Label(text='other'))
        grid_layout.add_widget(Button(text='text'))
        self.add_widget(grid_layout)

class MyApp(App):
    def build(self):
        float = 
        return MyWidget()

MyApp().run() 
```

由于`Widget`' 的默认值`size_hint`是`(1,1)`它应该在整个窗口中展开，而且`GridLayout`。为什么这没有发生？我怎样才能得到我想要的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T20:17:40.723

```
`class MyWidget(Widget):` 
```

您的根小部件`MyWidget`继承自 a`Widget`而不是其中一个布局，因此不控制其子级的大小 如此处所述[，](http://kivy.org/docs/api-kivy.uix.layout.html#understanding-size-hint-property-in-widget) “size_hint 是***布局***用于管理其子级大小的值的元组”。

您的根小部件确实占据了窗口的整个空间。您可以通过在画布上添加一个矩形来测试它，`MyWidget`如下所示::

```
with self.canvas.before:
    Color(1,0,0,1)
    Rectangle(pos=self.pos, size=self.size) 
```

你应该熟悉 canvas、[canvas.before 和 canvas.after](http://kivy.org/docs/api-kivy.graphics.instructions.html#kivy.graphics.instructions.Canvas)。它们基本上是指令组，前组在小部件的画布指令之前绘制，后组在之后。

Kivy 中的一个关键不同之处在于，小部件的大小/布局会延迟到下一帧，所以如果您只是将上述代码段添加到您的代码中，如下所示：

```
from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.label import Label
from kivy.uix.widget import Widget
from kivy.uix.gridlayout import GridLayout
from kivy.graphics import *

class MyWidget(Widget):

    def __init__(self, **kwargs):
        # I'd make sure to pass of kwargs through to the super
        # as there are widgets's that process their initial
        # arguments through.
        super(MyWidget, self).__init__(**kwargs)

        grid_layout = GridLayout(cols=3)
        grid_layout.add_widget(Button(text='A'))
        grid_layout.add_widget(Button(text='B'))
        grid_layout.add_widget(Label(text='text'))
        grid_layout.add_widget(Label(text='other'))
        grid_layout.add_widget(Button(text='text'))
        self.add_widget(grid_layout)
        with self.canvas.before:
            Color(1,0,0,1)
            Rectangle(pos=self.pos, size=self.size)

class MyApp(App):
    def build(self):
        return MyWidget()

if __name__ == '__main__':
    MyApp().run() 
```

这只会在您的小部件的初始位置和大小处显示一个红色矩形，当时它将是它的默认位置和大小，分别是 (0, 0) 和 (100, 100)。

为了使红色矩形符合小部件的大小，我们应该[将](http://kivy.org/docs/api-kivy.event.html#kivy.event.EventDispatcher.bind)它的大小绑定到小部件的大小，如下所示：

```
...
        grid_layout.add_widget(Button(text='text'))
        self.add_widget(grid_layout)
        with self.canvas.before:
            Color(1,0,0,1)
            self.rect = Rectangle(pos=self.pos, size=self.size)
        self.bind(size=self.update_rect)

    def update_rect(self, instance, value):
        self.rect.pos = self.pos
        self.rect.size = self.size

class MyApp(App):
    def build(self):
... 
```

正如上面代码的输出所示，您的小部件占据了整个窗口的大小。但是，这并不能解决您的问题，并且子布局仍保持其原始位置和原始大小。这是因为小部件不会如上所述控制其子级的大小。

您在这里有两个选择，要么像更新 rect 一样更新小部件的子/子的大小和位置（如果有多个子，很快就会变得复杂），或者使用其中一个布局作为根小部件。

这也可以在 kv 中完成，如下所示：

```
from kivy.app import App
from kivy.uix.widget import Widget
from kivy.lang import Builder

Builder.load_string('''
# this is the rule for MyWidget that defines
# what MyWidget looks like i.e.drawing
# instructions and widgets etc 
<MyWidget>:
    canvas.before:
        Color:
            rgba: 1, 0, 0, 1
        Rectangle:
            # this implicitly binds the size of the
            # rect to the size of the widget
            size: self.size
            # self here still refers to the widget as Rectangle is only a
            # graphics instruction and not a widget
            pos: self.pos
    GridLayout:
        cols: 3
        # root here refers to the `MyWidget`, bind the size of the
        # GridLayout to the size of your root widget
        size: root.size
        Button:
            text: 'A'
        Button:
            text: 'B'
        Label:
            text: 'text'
        Label:
            text: 'other'
        Button:
            text: 'text'        
''')

class MyWidget(Widget):
    pass

class MyApp(App):
    def build(self):
        return MyWidget()

if __name__ == '__main__':
    MyApp().run() 
```

上面的示例将孩子的大小绑定到它的父窗口小部件的大小。我仍然建议使用布局作为您的根小部件，并且不要犹豫嵌套布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T08:31:52.603

我更喜欢让你的主类继承自 GridLayout 而不是 Widget 的解决方案。事实上，回想起来这似乎是如此明显，以至于我想知道为什么教程使用 Widget 方法。上一个答案推荐了这种技术，但我想我会提供一些代码。

```
import kivy
kivy.require('1.5.1')

from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.label import Label
from kivy.uix.gridlayout import GridLayout

class MyWidget(GridLayout):
    def __init__(self):
        super(MyWidget, self).__init__(cols=3)

        self.add_widget(Button(text='A'))
        self.add_widget(Button(text='B'))
        self.add_widget(Label(text='text'))
        self.add_widget(Label(text='other'))
        self.add_widget(Button(text='text'))

class MyApp(App):
    def build(self):
        return MyWidget()

MyApp().run() 
```

或使用 kvlang：

```
import kivy
kivy.require('1.5.1')

from kivy.app import App
from kivy.uix.button import Button
from kivy.uix.label import Label
from kivy.uix.gridlayout import GridLayout
from kivy.lang import Builder

Builder.load_string('''
<MyWidget>:
    cols:3
    Button:
        text:'A'
    Button:
        text:'B'
    Label:
        text:'text'
    Label:
        text:'other'
    Button:
        text:'text'
''')

class MyWidget(GridLayout):
    pass
class MyApp(App):
    def build(self):
        return MyWidget()

if __name__ == "__main__":
    MyApp().run() 
```

# yahoo - Mailchimp 模板仅在 yahoo webmail 客户端中显示第一部分

> ID：14029015
> 
> 赞同：0
> 
> 时间：2012-12-25T08:34:11.847
> 
> 标签：yahoo, mailchimp

我已经为 Mailchimp 编写了一个电子邮件模板，它似乎在我测试过的大多数电子邮件客户端（windows mail、mac mail、gmail webclient）中运行良好——但在 yahoo webmail 客户端中，它只显示了第一部分模板 - 标题 - 仅此而已。

如果我将电子邮件发送到我的雅虎地址，但在 Mac Mail 中显示它，它可以工作。如果我将模板的网页通过电子邮件发送到我的 yahoo 地址（即，不要通过 mailchimp），并在 yahoo webmail 客户端中查看它，它就可以工作。只有当我通过 mailchimp 发送电子邮件并在 Yahoo webmail 客户端中检查它时，它才只显示第一部分。

我尝试了各种方法，例如删除顶部或其他各种部分。它通常似乎只显示模板的一部分 - 但我似乎找不到任何一致的行为或原因。

有谁之前经历过这个吗？你找到问题/解决方案了吗？或者，有没有一种简单的方法可以在发送电子邮件之前立即查看 HTML mailchimp 生成的内容，以便我可以对其进行调试？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:04:10.237

好吧，经过一番痛苦之后，我发现罪魁祸首是一个看不见的角色，不知何故最终出现在我的模板中。我仍然不知道这个角色是什么，或者确切地说是什么——但我现在已经在我的文本编辑器中打开了“显示隐藏的角色”！

# primefaces - 在 primefaces 选项列表中禁用选择

> ID：14029017
> 
> 赞同：2
> 
> 时间：2012-12-25T08:34:14.887
> 
> 标签：primefaces

有没有办法禁用移动按钮并根据条件拖放？如果目标包含 3 个项目，我想禁用从源到目标的移动\选择（反之亦然）？

可能吗？我找不到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-19T16:30:23.663

您可以尝试使用`disabled`属性 of `picklist`，它会禁用整个选项列表。您可以通过调用支持 bean 属性，该属性返回根据您的条件计算的布尔值。

在你看来

```
disabled="#{backingBean.targetHasThreeItems}" 
```

和支持豆

```
 public boolean targetHasTreeItems() {
    // here your code that calculates target item's count
   } 
```

# objective-c - 无法隐藏我的自定义标签栏

> ID：14029024
> 
> 赞同：-1
> 
> 时间：2012-12-25T08:35:42.490
> 
> 标签：objective-c, ios, tabbar

我正在使用这个例子：[https](https://github.com/tciuro/CustomTabBar) ://github.com/tciuro/CustomTabBar作为标签栏。我试图通过按下按钮来隐藏它，但中心图片将始终保持可见。尝试了很多方法，`self.tabbarcontroller.tabbar.hidden=YES;`但是即使将其添加为子视图，中心图片也会保持显示。

更新：有一个隐藏标签栏而不是矩形背景的解决方案。我正在尝试使其隐藏而没有动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T08:51:02.743

固定在我的叉子里。你得打电话`((WBTabBarController*)self.tabbarcontroller).tabbarHidden = YES`

[https://github.com/Daij-Djan/CustomTabBar/tree/master/CustomTabBar](https://github.com/Daij-Djan/CustomTabBar/tree/master/CustomTabBar)

将请求拉到原始仓库：

[https://github.com/tciuro/CustomTabBar/pull/2](https://github.com/tciuro/CustomTabBar/pull/2) && [https://github.com/tciuro/CustomTabBar/pull/3](https://github.com/tciuro/CustomTabBar/pull/3)

# php - 使用 ajax mysql 和 javascript 自动填充列表

> ID：14029029
> 
> 赞同：0
> 
> 时间：2012-12-25T08:36:09.117
> 
> 标签：php, javascript, ajax

如果您查看[http://thecomputerwarehouse.com/test.php](http://thecomputerwarehouse.com/test.php)，您可以看到我正在尝试完成的工作示例。您可以键入“q”以显示列表中的结果。

我正在使用我在网上找到的一些自制脚本，基本上我正在尝试自动填充一个列表并选择记录，然后将值插入到工作正常的字段中。

我想弄清楚的是，当您单击“添加另一个序列号”时，它会为您提供另一个字段。问题是除了第一个字段之外的下一个字段不会自动填充列表。

在我拥有的javascript中

```
newdiv.innerHTML = "Serial Number " + (counter + 1) + " <br><input type='text' name='course"+(counter + 1)+"' id='course"+(counter + 1)+"'>"; 
```

我正在尝试将计数器添加到它，以便它广告一个唯一的 id 名称。问题是我不知道如何将相同的东西应用于 ajax 代码

```
$("#course").autocomplete("getinventoryajax.php", { 
```

由于第一个字段被命名为“课程”，我需要能够使用 javascript 更改字段，并且 ajax 也需要以某种方式识别它。因为我知道所有其他字段没有自动填充的原因，因为以下字段的名称被重复为“课程”，这会破坏代码。

有什么建议吗？

更新

我终于弄清楚如何完成我需要做的事情。我需要将自动完成功能添加到我的 JS 中，这最终解决了我的问题。Nameisnull 的链接帮助了我:) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:16:11.253

问题是新添加的元素没有绑定到它们的自动完成（保留您所做的更改）。

你应该看看[这个](https://stackoverflow.com/questions/4551230/bind-jquery-ui-autocomplete-using-live)

# java - Neo4j 服务器问题：“找不到主类：org.neo4j.server.storemigration.PreStartupStoreUpgrader。程序将退出。”

> ID：14029035
> 
> 赞同：0
> 
> 时间：2012-12-25T08:36:53.703
> 
> 标签：java, neo4j, openjdk, graph-databases, linux-mint

在迁移到 Mint 13 之前，我已经在我的 Ubuntu 12.04 上成功使用了 Neo4j 数据库。所以，我安装了数据库（如此[处](http://docs.neo4j.org/chunked/stable/server-installation.html)所述）并尝试启动 neo4j-service：

```
sudo service neo4j-service start 
```

每次我尝试开始时，我都会看到：

```
WARNING: Max 1024 open files allowed, minimum of 40 000 recommended. See the Neo4j manual.
WARNING! You are using an unsupported Java runtime. Please use JDK 6.
Starting Neo4j Server...Exception in thread "main" java.lang.NoClassDefFoundError: org/neo4j/server/storemigration/PreStartupStoreUpgrader
Caused by: java.lang.ClassNotFoundException: org.neo4j.server.storemigration.PreStartupStoreUpgrader
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: org.neo4j.server.storemigration.PreStartupStoreUpgrader. Program will exit. 
```

以下是`java -version`命令的结果：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

我运行 Linux Mint 13 Cinnamon x86_64。正如我所说，在具有相同版本的 OpenJDK 的 Ubuntu 12.04 x86_64 上一切正常。

我应该怎么办？谢谢你。

# c# - 如何在 GridView 控件中禁用此 LinkBut ton？

> ID：14029038
> 
> 赞同：2
> 
> 时间：2012-12-25T08:37:14.453
> 
> 标签：c#, asp.net, linkbutton

我正在开发一个列出事件的注册系统，用户将能够在这些事件中注册。每个活动都有特定数量的座位。我现在面临的问题是，即使注册人数达到座位数，活动仍然可用，我无法通过禁用预订按钮来停止预订过程。

供您参考，我有以下数据库设计：

```
Event Table: ID, Title, NumberOfSeats
BookingDetails Table: BookingID, EventID, Username
User Table: Username, Name 
```

事件将在 GridView 控件中列出，并且 GridView 内有 LinkBut​​ton 用于在事件中进行预订。我正在使用 ModalPopUp Extender 控件，这就是我使用 LinkBut​​ton 的原因，如下面的 ASP.NET 代码所示。在代码隐藏中，在 GrivView_RowDataBound 内，我比较了每个活动的座位数和预订数。如果预订人数大于或等于座位数。预订按钮应该被禁用。我编写了代码，但我不知道为什么它不适合我以及为什么我收到以下错误： ***无法将类型为“System.Web.UI.WebControls.GridView”的对象转换为类型“System.Web. UI.WebControls.LinkBut​​ton'。***

***ASP.NET 代码：***

```
<asp:GridView ID="ListOfAvailableEvents_GrivView" runat="server" AutoGenerateColumns="False"
                    DataKeyNames="ID" CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333"
                    GridLines="None" AllowPaging="True" PageSize="10" 
                    onrowdatabound="ListOfAvailableEvents_GrivView_RowDataBound">
                    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" CssClass="generaltext" />
                    <Columns>
                        <asp:TemplateField HeaderText="">
                            <ItemTemplate>
                                <asp:LinkButton ID="lnkTitle" runat="server" CssClass="button" Text="Book &rarr;" OnClick="lnkTitle_Click"></asp:LinkButton>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
                        <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
                        <asp:BoundField DataField="Location" HeaderText="Location" SortExpression="Location" />
                        <asp:BoundField DataField="StartDateTime" HeaderText="Start Date & Time" SortExpression="StartDateTime" />
                        <asp:BoundField DataField="EndDateTime" HeaderText="End Date & Time" SortExpression="EndDateTime" />
                    </Columns>
                    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                    <HeaderStyle Font-Bold="True" CssClass="complete" />
                    <EditRowStyle BackColor="#999999" />
                    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                    <EmptyDataTemplate><h2>No Events Available</h2></EmptyDataTemplate>
                </asp:GridView> 
```

***代码隐藏 (C#) 代码：***

```
protected void ListOfAvailableEvents_GrivView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        int numberOfBookings = 0;
        int numberOfAvailableSeats = 0;

        string connString = "..........."
        string selectCommand = @"SELECT     COUNT(*) AS UserBookingsCount, dbo.Events.NumberOfSeats
                                    FROM         dbo.BookingDetails INNER JOIN
                                                          dbo.Events ON dbo.BookingDetails.EventID = dbo.Events.ID
                                    GROUP BY dbo.Events.NumberOfSeats";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            //Open DB Connection
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(selectCommand, conn))
            {
                SqlDataReader reader = cmd.ExecuteReader();
                if (reader != null)
                    if (reader.Read())
                    {
                        numberOfBookings = Int32.Parse(reader["UserBookingsCount"].ToString());
                        numberOfAvailableSeats = Int32.Parse(reader["NumberOfSeats"].ToString());
                    }
            }
            //Close the connection
            conn.Close();
        }

        if (numberOfBookings >= numberOfAvailableSeats)
        {
            LinkButton bookButton = (LinkButton)(sender);
            bookButton.Enabled = false;
        }
    } 
```

**那么你能告诉我如何解决这个问题吗？**

**更新：**

GridView 列出了许多不同的事件。让我们采取其中之一。如果活动 A 有 3 个可用座位且预订数量达到 3，则应仅针对此活动禁用“预订”按钮，而不是针对所有活动。因此，当预订数量达到可用座位数时，此事件的按钮将被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:26:02.537

请使用以下代码隐藏链接按钮，即`lnkTitle`。

代码如下：

```
protected void ListOfAvailableEvents_GrivView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    int numberOfBookings = 0;
    int numberOfAvailableSeats = 0;

    string connString = "Data Source=appServer\\sqlexpress;Initial Catalog=EventRegMgnSysDB;Integrated Security=True;";
    string selectCommand = @"SELECT     COUNT(*) AS UserBookingsCount, dbo.Events.NumberOfSeats
                                FROM         dbo.BookingDetails INNER JOIN
                                                      dbo.Events ON dbo.BookingDetails.EventID = dbo.Events.ID
                                GROUP BY dbo.Events.NumberOfSeats";
    using (SqlConnection conn = new SqlConnection(connString))
    {
        //Open DB Connection
        conn.Open();
        using (SqlCommand cmd = new SqlCommand(selectCommand, conn))
        {
            SqlDataReader reader = cmd.ExecuteReader();
            if (reader != null)
                if (reader.Read())
                {
                    numberOfBookings = Int32.Parse(reader["UserBookingsCount"].ToString());
                    numberOfAvailableSeats = Int32.Parse(reader["NumberOfSeats"].ToString());
                }
        }
        //Close the connection
        conn.Close();
    }
 if (e.Row.RowType == DataControlRowType.DataRow)
    {

        LinkButton lnkTitle = (LinkButton )e.Row.FindControl("lnkTitle");

         if (numberOfBookings >= numberOfAvailableSeats)
        {

            lnkTitle.Visible = false;
        }
        else
        {

            lnkTitle.Visible = true;
        }

    }
} 
```

如果您会得到答案，请标记它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:53:31.103

尝试 ：

```
LinkButtton lbtn = new LinkButtton();
lbtn = (LinkButton)e.Row.FindControl("ButtonId"); 
```

然后`lbtn`用于进一步操作。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T09:12:30.840

RowDataBound 事件用于 GridView，因此无法将 sender 参数强制转换为 LinkBut​​ton。

修改您的代码以包含以下内容。

```
if(numberOfBookings >= numberOfAvailableSeats)
{

if (e.Row.Cells[0].HasControls())
        {
            var button = e.Row.Cells[0].Controls[1] as LinkButton;

            button.Enabled = false;

        }
} 
```

我担心你是如何处理这个问题的。

RowDataBound 事件触发它绑定到的数据源中的每一行，并且您每次都在执行数据库查询。

您可以尝试在初始查询中包含 numberOfBookings 和 numberOfAvailableSeats ，这些将可供您使用，您可以每次（每行）检查它们，而不必每次都访问数据库。

# mysql - 列出所有发送或接收消息的用户

> ID：14029044
> 
> 赞同：0
> 
> 时间：2012-12-25T08:38:09.743
> 
> 标签：mysql

我有一个表“消息”。

字段是：

```
- id (primary key, int, auto increment)
- uid (the user who sent the message)
- rid (the user who received the message)
- text (text of the message)
- time (time of message)
- read (read or unread. 0 is unread, 1 is read). 
```

作为用户，我可以是 UID 或 RID。因此，如果我想显示我发送/接收消息的用户列表，我该怎么做？另外，每个用户应该只显示一次。请帮忙。谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:40:36.520

一种可能的方法是使用 UNION（不是 UNION ALL），以便删除重复的行：

```
SELECT uid FROM messages WHERE rid = 'me'
UNION
SELECT rid FROM messages WHERE uid = 'me' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:45:57.697

我假设，你的桌子设计看起来像这样，

```
ID | UID | RID |TEXT |TIME | READ 
```

所以，我相信，根据你的桌子设计，你可以使用这个

```
SELECT * FROM messages WHERE rid = 'me' OR uid='me' 
```

# android - Android自定义stackview

> ID：14029048
> 
> 赞同：8
> 
> 时间：2012-12-25T08:39:31.137
> 
> 标签：android, android-layout, android-widget

我正在尝试自定义 StackView 小部件以使其看起来有点不同。

stackview 默认顺序和视图是这样的：

![Stackview 默认视图](../Images/675d5c0c4f9ad05ad808bbaddb36fa1c.png)

我正在尝试做一些类似这样的事情： ![在此处输入图像描述](../Images/3ba55cb448d76e8c457c923ea7c980f3.png)

任何帮助将不胜感激

石米

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-14T08:42:45.360

尝试查看[StackView](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/StackView.java/?v=source)的源代码。

作为第一步，您可以使用名为“PERSPECTIVE_SHIFT_FACTOR_X”和“PERSPECTIVE_SHIFT_FACTOR_Y”的参数。

# java - 如何在android应用程序中检查FD（文件描述符）表的当前使用情况

> ID：14029049
> 
> 赞同：2
> 
> 时间：2012-12-25T08:39:37.423
> 
> 标签：java, android, file-descriptor

我想检查当前正在运行的进程的 FD（文件描述符）表的使用情况。这是为了避免这样的错误**To many file open**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:44:10.743

安装busybox并通过本机实现使用unix命令lsof。

使用 unix 终端并键入 man lsof 了解更多详细信息。

# php - 如何从 php 数组中删除 SimpleXMLElement 对象

> ID：14029050
> 
> 赞同：3
> 
> 时间：2012-12-25T08:39:54.237
> 
> 标签：php, simplexml

我已经使用`simplexml_load_file`php 函数读取了 xml 文件。

我已将 xml 数据存储到 php 数组中，但在某些数组中，它的显示数组 xml`like SimpleXMLElement Object ( [0] => some value )`

当我打印 xml 数据时，它的显示正确但是当我将 xml 值分配给 php 数组时，它的显示为数组中的 xml 对象

**XML**

```
<data>
    <request>
        <type>City</type>
        <query>Anand, India</query>
    </request>
    <current_condition>
        <observation_time>08:55 AM</observation_time>
        <temp_C>28</temp_C>
        <temp_F>82</temp_F>
        <weatherCode>113</weatherCode>            
        <weatherDesc>Sunny</weatherDesc>
        <windspeedMiles>9</windspeedMiles>
        <windspeedKmph>14</windspeedKmph>
        <winddirDegree>63</winddirDegree>
        <winddir16Point>ENE</winddir16Point>
        <precipMM>0.0</precipMM>
        <humidity>23</humidity>
        <visibility>10</visibility>
        <pressure>1014</pressure>
        <cloudcover>0</cloudcover>
    </current_condition>
        <weather>
            <date>2012-12-22</date>
            <tempMaxC>33</tempMaxC>
            <tempMaxF>91</tempMaxF>
            <tempMinC>18</tempMinC>
            <tempMinF>64</tempMinF>
            <windspeedMiles>11</windspeedMiles>
            <windspeedKmph>17</windspeedKmph>
            <winddirection>ENE</winddirection>
            <winddir16Point>ENE</winddir16Point>
            <winddirDegree>63</winddirDegree>
            <weatherCode>113</weatherCode>
            <weatherDesc>Sunny</weatherDesc>
            <precipMM>0.0</precipMM>
        </weather>
        <weather>
            <date>2012-12-23</date>
            <tempMaxC>34</tempMaxC>
            <tempMaxF>92</tempMaxF>
            <tempMinC>18</tempMinC>
            <tempMinF>65</tempMinF>
            <windspeedMiles>9</windspeedMiles>
            <windspeedKmph>15</windspeedKmph>
            <winddirection>ENE</winddirection>
            <winddir16Point>ENE</winddir16Point>
            <winddirDegree>64</winddirDegree>
            <weatherCode>113</weatherCode>
            <weatherDesc>Sunny</weatherDesc>
            <precipMM>0.0</precipMM>
        </weather>
        <weather>
            <date>2012-12-24</date>
            <tempMaxC>33</tempMaxC>
            <tempMaxF>92</tempMaxF>
            <tempMinC>18</tempMinC>
            <tempMinF>64</tempMinF>
            <windspeedMiles>9</windspeedMiles>
            <windspeedKmph>14</windspeedKmph>
            <winddirection>NE</winddirection>
            <winddir16Point>NE</winddir16Point>
            <winddirDegree>45</winddirDegree>
            <weatherCode>113</weatherCode>
            <weatherDesc>Sunny</weatherDesc>
            <precipMM>0.0</precipMM>
        </weather>
    </data> 
```

**PHP：**

```
$child=$xml->children();
foreach($xml->children() as $child)
{               
    foreach($child->children() as $child_t)
    { 
        $weather_arr[$child_t->getName()]=$child_t;
        echo $child_t->getName() . ": " . $child_t . "<br />";   

    }
}

echo "<pre>".html_entity_decode(print_r($weather_arr,true))."</pre>"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T08:51:14.017

这将为您提供一个简单的关联数组：

```
$array = json_decode(json_encode($xml), true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T10:18:56.017

我已经使用下面的代码解决了我的问题。

```
function simplexml_to_array($xmlobj) {
    $a = array();
    foreach ($xmlobj->children() as $node) {
        if (is_array($node))
            $a[$node->getName()] = simplexml_to_array($node);
        else
            $a[$node->getName()] = (string) $node;
    }
    return $a;
} 

foreach($xml->children() as $child)
{
    $arr=simplexml_to_array($child );
    echo "<pre>".html_entity_decode(print_r($arr,true))."</pre>";
} 
```

# android - 如何打开相机然后切换到图像模式（反之亦然）

> ID：14029057
> 
> 赞同：0
> 
> 时间：2012-12-25T08:40:47.137
> 
> 标签：android, video, camera, photo, switching

就我而言，我想拍照或捕捉视频，如果我创建单独的意图，实际上我可以做到这些。我的意思是我可以将相机打开为图像模式或视频模式，但不能在它们之间切换。这与我使用的意图过滤器有关吗？我应该怎么办？我如何在它们之间切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:02:05.510

我有同样的问题。在我认为放置一个按钮以在具有相同表面视图的同一个活动中录制视频之后，我为照片相机做了一个表面视图和一个活动，但我不知道这是否可能。嗯，我在Activity中写了这个方法来准备de MediaRecorder，取表面视图。

```
 public Boolean prepararCamaraVideo(){

    mMediaRecorder = new MediaRecorder();

    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    state = MediaRecorderState.INITIALIZED;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO)
        mMediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
    else { 
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    }

    state = MediaRecorderState.DATA_SOURCE_CONFIGURED;

    mOutputFile = Files.getExternalMediaFile(Files.MEDIA_TYPE_VIDEO).toString();
    mMediaRecorder.setOutputFile(mOutputFile);

    mMediaRecorder.setPreviewDisplay(mCameraPreview.getHolder().getSurface());

    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        Log.d("Video", "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;

    } catch (IOException e) {
        Log.d("Video", "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;

} 
```

这个命令 mMediaRecorder.setPreviewDisplay(mCameraPreview.getHolder().getSurface()); 获取摄像机的表面。

最后是录制视频的方法。

```
 public void grabaVideo(View v) {
    if (state!=MediaRecorderState.RECORDING){
        if (prepararCamaraVideo()) {
            mMediaRecorder.start();
            state = MediaRecorderState.RECORDING;
            Toast.makeText(getApplicationContext(), getString(R.string.capturing_video), Toast.LENGTH_SHORT).show();                
        } else {
            // prepare didn't work, release the camera
            releaseMediaRecorder();
            // inform user
        }
    }
    else{
        mMediaRecorder.stop();  // stop the recording
        releaseMediaRecorder(); // release the MediaRecorder object
        mCamera.lock();         // take camera access back from MediaRecorder

        state = MediaRecorderState.INITIAL;
        Toast.makeText(getApplicationContext(), getString(R.string.video_stored_in) + " " + mOutputFile, Toast.LENGTH_SHORT).show();

    }

} 
```

我希望能帮助你。

# python - 在 Python 中打开 Word 2007 (Windows 7) 文件时出错

> ID：14029058
> 
> 赞同：0
> 
> 时间：2012-12-25T08:40:56.487
> 
> 标签：python, string, unicode, escaping

使用以下行：

```
>>> file = open('C:\Users\mihir\Documents\test.txt') 
```

我收到此错误：

> SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in position 2-4: truncated \UXXXXXXXX escape

关于我为什么收到该消息的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T08:45:09.080

反斜杠用于在字符串中形成转义序列。始终避开它们，或在路径中使用正斜杠。

```
file = open('C:\\Users\\mihir\\Documents\\test.txt')
file = open(r'C:\Users\mihir\Documents\test.txt')
file = open('C:/Users/mihir/Documents/test.txt') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:47:47.127

反斜杠被视为跳过空格，因此您应该为此使用原始字符串。尝试：

```
file = open(r'C:\Users\mihir\Documents\test.txt') 
```

它应该工作。谢谢

# ios - NSDate dateWithTimeIntervalSince1970：我必须从 NSTimeInterval 中减去 1800 秒才能显示正确的值

> ID：14029059
> 
> 赞同：4
> 
> 时间：2012-12-25T08:41:08.640
> 
> 标签：ios, nsdate, nsdateformatter

我对 iOS 很陌生，作为我的第一个主要项目，我正在尝试编写一个音乐播放器应用程序。

我正在使用`AVAudioPlayer`，它将当前文件的持续时间报告为`NSTimeInterval`. 为了以 mm:ss 格式显示，我使用`NSDate`and `NSDateFormatter`。最方便的方法是使用`dateWithTimeIntervalSince1970:`方法。但是，由于我不知道的原因，该方法将 1800 秒（30 分钟）添加到`NSTimeInterval`.

为什么要这样做，我如何比减去 1800 秒更干净地解决问题`NSTimeInterval`？

我不知道这是否相关，但我的时区是 GMT+5:30。也许是不寻常的时区导致了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:20:05.357

看到这个问题：[如何在 iPhone 中将 NSTimeInterval 定义为 mm:ss 格式？](https://stackoverflow.com/questions/2558995/how-can-i-define-nstimeinterval-to-mmss-format-in-iphone)

你用算术方法计算小时和分钟，然后将它们格式化为 NSString。这将比使用 NSDate 和 NSDateFormatter 更快。

# validation - 在 Spring MVC 中验证失败后无法显示正确的错误消息

> ID：14029062
> 
> 赞同：2
> 
> 时间：2012-12-25T08:41:42.367
> 
> 标签：validation, model-view-controller, spring-mvc, uiviewcontroller

我刚开始使用 spring MVC 并且无法在验证失败时显示正确的错误消息。

控制器是：

```
 @RequestMapping(value = "/MobiusDashboardWebsiteContent/csiBatchSubmission", method = RequestMethod.POST)
        @LogAction(actionPerformed = "submitCSIBatch")
        public String submitCSIBatch(ManualCSIBatch manualCSIBatch, BindingResult result, Model model, MobiusAuthenticationToken authToken) throws Throwable {

            ManualCSIBatch mBatch = new ManualCSIBatch();
            manualCSIBatch.setBatchUser(getUserName(authToken));
            csiBatchValidator.validate(manualCSIBatch, result);
            if (result.hasErrors()) {
                 LOG.error("Validation errors found for the batch " + manualCSIBatch.getBatchName() + " error code is " + manualCSIBatch.getErrorCode());  
model.addAttribute("localeList", localeList);
            model.addAttribute("evaluateAttributeList", evaluateAttibutes);
            model.addAttribute("csiBatchSubmission", manualCSIBatch);                
return "csiBatchSubmission";
            }
            mBatch.setErrorCode(StatusCode.SUCESS.getCode());
            model.addAttribute("csiBatchSubmission", mBatch);
            return "csiBatchSubmission";
        } 
```

验证器是：

```
 @Override
    public void validate(Object target, Errors errors) {
        ManualCSIBatch manualCSIBatch = (ManualCSIBatch) target;
        boolean isDuplicate = getiMobiusService().checkDuplicateCSIBatchName(manualCSIBatch.getBatchName(), manualCSIBatch.getBatchUser());
        if (isDuplicate) {
            logger.debug("This is a duplicate batch " + manualCSIBatch.getBatchName() + " for this user " + manualCSIBatch.getBatchUser());
            errors.rejectValue("batchName", "errors.csi.duplicateBatch", new Object[] { manualCSIBatch.getBatchName() }, null);
        } 
```

当验证失败时，一切正常，表单不提交，但错误值未在 UI 上填充。

JSP 是这样的：

```
<div class="row">

    <label for="batch-name"><spring:message code="csi.label.batchname"/></label><form:input path="batchName" onkeyup="checkDuplciateBatch(this.value);" onblur="checkDuplciateBatch(this.value);"/> 
    <span id="availmsg" style="display:none"></span>
    <form:errors path="batchName" cssClass="error"/>
    </div> 
```

在我看到的所有例子中，这就是方式。这里可能有什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:33:58.640

所以我们开始吧。

我开始知道 BindingResult 映射到每个模型属性。

根据[http://blog.nigelsim.org/2011/09/07/spring-mvc-validation-bindingresult/](http://blog.nigelsim.org/2011/09/07/spring-mvc-validation-bindingresult/)在模型对象解决问题之前添加@ModelAttribute ！！惊人的！:)

# html - HTML5：是 或者 更好的服务器状态？

> ID：14029063
> 
> 赞同：1
> 
> 时间：2012-12-25T08:41:54.440
> 
> 标签：html

我有一个自动保存到服务器的页面（如果发生任何更改，会在计时器上）。我想添加一个小指示器，
它将显示或。`Unsaved``Saved``Error`

为此使用`<output>`标签在语义上是否有效，还是应该使用`<div>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:53:42.693

这是一个有趣的问题，尽管答案会有些主观。我会尝试给出我的结论和推理。

让我们从规范对`<output>`元素的说明开始：

> 输出元素表示计算的结果。

真的，这没什么好说的。然而，假设它曾经说过：

> 输出元素表示进程运行的结果。

那么很明显，您的用例已包含在该定义中。所以关键问题就变成了：“计算”是否可以解释为“进程的运行”。在我看来，一个通情达理的人可以支持该论点的任何一方。

但是 HTML5 中的 HTML 元素语言只有大约 107 个单词。在这么小的空间里，没有任何意义的细微差别，每个单词都必须涵盖很多用法。为此，需要尽可能宽泛地解释每个元素的语义，而不是尽可能狭隘。在这种情况下，对我来说，“运行进程”与“计算”非常*相似*`<output>`，即元素的使用适合您的用例。

另一个需要牢记的问题是“元素的使用是否会导致 HTML 消费者（例如用户代理和搜索引擎）出现不良行为？” 如果确实如此，那么这将是不使用它的明确理由。然而，`<output>`它似乎是一个被动元素，不会导致任何可能不受欢迎的行为。

所以我的结论是，使用该`<output>`元素将适合您的用例。

# python - 用于 python 的通用加密哈希库中的漩涡

> ID：14029068
> 
> 赞同：2
> 
> 时间：2012-12-25T08:42:46.357
> 
> 标签：python, whirlpool

是否有一些用于在 Python 中生成哈希的通用（推荐）模块？

特别是我需要`whirlpool`一些像`mhash`PHP 或`jacksum`java 中的扩展，其中存在许多散列算法，这将是理想的，所以它可以在将来使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:06:01.430

快速的[Google 搜索](https://www.google.com/search?q=python+whirlpool)既可以找到[纯 Python 实现](http://www.bjrn.se/code/whirlpoolpy.txt)，也可以找到用 C 语言编写的 Whirlpool 算法[绑定。](https://github.com/radiosilence/python-whirlpool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T11:02:02.557

我使用 librhash（[这里的例子](https://github.com/rhash/RHash/blob/master/bindings/python/test_rhash.py)）。那里有很多哈希算法，包括 Whirlpool。它可以在最流行的发行版中使用，例如[ubuntu](http://packages.ubuntu.com/search?keywords=python-rhash&searchon=names&suite=all&section=all)

# java - 在内存中编译 Java

> ID：14029069
> 
> 赞同：1
> 
> 时间：2012-12-25T08:42:48.403
> 
> 标签：java, dynamic, compilation, bytecode, execution

有没有办法在内存中发出 Java 字节码并执行它？我知道有[`JavaCompiler`](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)课，但我问`Reflection.Emit`的是`.NET`平台之类的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T08:45:36.760

你能看看下面的

*   [BCEL](http://commons.apache.org/bcel/)
*   [ASM](http://asm.ow2.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:12:36.747

您需要使用类加载器来动态加载某些类。关于这个主题有一些有趣的 SO 问题：

*   [在内存中 jar/class 文件执行](https://stackoverflow.com/q/3270871/317266)
*   [如何从 jar 文件的内存流中加载类](https://stackoverflow.com/q/9964076/317266)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T08:48:24.833

这是可能的，但这需要最终用户也安装`JDK`. 将字节码编译到内存并创建一个新的 java 进程并启动它。也可以`java source`直接执行。

见[`Beanshell2`](http://code.google.com/p/beanshell2/)。

# rss - 从用户的 rss 阅读器中删除条目

> ID：14029070
> 
> 赞同：2
> 
> 时间：2012-12-25T08:42:50.543
> 
> 标签：rss, feed, atom-feed, google-reader

我在我的应用程序中实现了非常简单的原子提要。有时记录会过期并且不再在提要中发布。有没有办法从用户的阅读器中删除条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:53:13.573

如果您在提要中使用了 GUID/ID* 元素，则发布与已删除帖子具有相同 GUID 的空白项目将使用空白内容更新 Google 阅读器中的帖子。

[https://superuser.com/questions/446845/is-it-possible-to-prevent-deleted-posts-from-appearing-in-blog-readers-like-goog](https://superuser.com/questions/446845/is-it-possible-to-prevent-deleted-posts-from-appearing-in-blog-readers-like-goog)

[http://support.google.com/reader/answer/69998?hl=en](http://support.google.com/reader/answer/69998?hl=en)

是否有任何其他提要聚合器会更新帖子（或者甚至缓存旧帖子开始）取决于他们。

*   RSS 2.0 的 GUID，Atom 的 ID

# android - 尝试获取图像时错误的标题

> ID：14029073
> 
> 赞同：1
> 
> 时间：2012-12-25T08:43:12.190
> 
> 标签：android, spring, resttemplate, robospice

我正在尝试使用 Spring for Android 和 Robospice 获取图像。根据 GitHub 上的各种示例，我使用 createRestTemplate 方法设置了我的 SpiceService，这是我设置我的标题。我还设置了 Gson、Form 和 StringHttp 消息转换器。

此设置仅在获取纯 JSON 时工作正常，但是当我尝试获取图像时，标头会设置为一些默认值，这意味着我丢失了 Auth 标头并且请求失败。

我还尝试在请求本身内设置一个新的resttemplate。

我在这里想念什么。

编辑：用于下载 json 的请求：

```
public class GetMeRequest extends SpringAndroidSpiceRequest<User> {
public static final String TAG = "GetMeRequest";

public GetMeRequest() {
    super(User.class);
}

@Override
public User loadDataFromNetwork() throws Exception {
    Log.d( TAG, "================loading from network" );
    ResponseObject response = getRestTemplate().getForObject( ApiCalls.USERS_ME_URI, ResponseObject.class );

    Log.d(TAG, response.toString());
    if(!response.data.users.isEmpty() && response.data.users != null){
        return response.data.users.get(0);
    }
    return null;
   }
} 
```

图像请求看起来像这样，基本上是[BigBinaryRequest](http://grepcode.com/file/repo1.maven.org%24maven2@com.octo.android.robospice%24robospice@1.0.0@com%24octo%24android%24robospice%24request%24simple%24BigBinaryRequest.java)：

```
public class ImageRequest extends SpringAndroidSpiceRequest<InputStream> {
protected String url;
protected File cacheFile;
protected String auth;

public ImageRequest(String url, File cacheFile, String auth) {
    super(InputStream.class);
    this.url = url;
    this.cacheFile = cacheFile;
    this.auth = auth;
}

@Override
public InputStream loadDataFromNetwork() throws Exception {
    try {
        java.io.InputStream is = new URL(url).openStream();
        // touch
        cacheFile.setLastModified(System.currentTimeMillis());

        FileOutputStream fileOutputStream = new FileOutputStream(cacheFile);
        Utils.copyLargeFile(is, fileOutputStream);
        return new FileInputStream(cacheFile);
    } catch (MalformedURLException e) {
        Log.e(getClass().getName(), "Unable to create image URL", e);
        return null;
    } catch (IOException e) {
        Log.e(getClass().getName(), "Unable to download image", e);
        return null;
    }
}
} 
```

现在看看这两个，我发现我使用了 getRestTemplate 方法，它可能会用我的标题获取 RestTemplate。这可能是问题所在，但有人可以给我一个关于如何进行的提示吗？

Edit2：以及我 SpiceService 中的 createRestTemplate 方法

```
@Override
public RestTemplate createRestTemplate() {
    RestTemplate restTemplate = new RestTemplate() {
        @Override
        protected ClientHttpRequest createRequest( URI url, HttpMethod method ) throws IOException {
            ClientHttpRequest request = super.createRequest( url, method );
            HttpHeaders headers = request.getHeaders();
            headers.setAcceptEncoding( ContentCodingType.GZIP );
            headers.set("Accept", "*/*");
            headers.setUserAgent(P1Application.USER_AGENT);
            headers.setContentType(new MediaType("application","json"));
            headers.set("Authorization", ((P1Application)getApplication()).getAuth());
            return request;
        }
    };

    // set timeout for requests
    ClientHttpRequestFactory factory = restTemplate.getRequestFactory();
    if ( factory instanceof HttpComponentsClientHttpRequestFactory ) {
        HttpComponentsClientHttpRequestFactory advancedFactory = (HttpComponentsClientHttpRequestFactory) factory;
        advancedFactory.setConnectTimeout( TIMEOUT );
        advancedFactory.setReadTimeout( TIMEOUT );
    } else if ( factory instanceof SimpleClientHttpRequestFactory ) {
        SimpleClientHttpRequestFactory advancedFactory = (SimpleClientHttpRequestFactory) factory;
        advancedFactory.setConnectTimeout( TIMEOUT );
        advancedFactory.setReadTimeout( TIMEOUT );
    }

    GsonHttpMessageConverter jsonConverter = new GsonHttpMessageConverter();
    FormHttpMessageConverter formHttpMessageConverter = new FormHttpMessageConverter();
    StringHttpMessageConverter stringHttpMessageConverter = new StringHttpMessageConverter();
    final List< HttpMessageConverter< ? >> listHttpMessageConverters = restTemplate.getMessageConverters();

    listHttpMessageConverters.add( jsonConverter );
    listHttpMessageConverters.add( formHttpMessageConverter );
    listHttpMessageConverters.add( stringHttpMessageConverter );
    restTemplate.setMessageConverters( listHttpMessageConverters );
    return restTemplate;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:04:34.170

您可以也应该使用`RestTemplate`来检索图像： http: [//blog.springsource.org/2009/03/27/rest-in-spring-3-resttemplate/](http://blog.springsource.org/2009/03/27/rest-in-spring-3-resttemplate/) -> “检索照片”。

# php - 数组计数（）问题

> ID：14029075
> 
> 赞同：0
> 
> 时间：2012-12-25T08:43:39.617
> 
> 标签：php

```
$nialiakhirpraktikum = $ntugasakhir+$ratarata; //from other process 
if ($nialiakhirpraktikum>79) { $grade="A"; } 
else if ($nialiakhirpraktikum<=79 AND $nialiakhirpraktikum>67) { $grade="B"; } 
else if ($nialiakhirpraktikum<=67 AND $nialiakhirpraktikum>55) { $grade="C"; } 
else if ($nialiakhirpraktikum<=55 AND $nialiakhirpraktikum>44) { $grade="D"; } 
else { $grade="E"; }     
$array = array($grade); 
print_r(array_count_values($array)); 
```

我在这样的数组中有一些结果：

```
Array ( [B] => 1 ) 
Array ( [B] => 1 ) 
Array ( [C] => 1 ) 
Array ( [C] => 1 ) 
Array ( [B] => 1 ) 
Array ( [B] => 1 ) 
Array ( [B] => 1 ) 
Array ( [B] => 1 ) 
Array ( [B] => 1 ) 
Array ( [B] => 1 ) 
```

如何得到如下结果：

```
score for B = 8

score for C = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:04:44.147

如果您的子数组仅包含 1 个项目，则可以使用以下代码。

```
array_count_values(array_map('key', $array)); 
```

这里，

*   [`array_count_values()`](http://php.net/manual/en/function.array-count-values.php)计算数组的所有值
*   [`array_map()`](http://php.net/array_map)将回调应用于给定数组的元素
*   [`key()`](http://php.net/key)从数组中获取一个键

[**爱迪生**](http://ideone.com/wAnHos)

### 更新

由于您只是循环更好，因此您在循环`$array`之前进行初始化，然后向其中添加项目。循环结束后调用`array_count_values`。

```
$array = array(); // initialize before loop
for(...){   /// sample loop
   // your original code
   $array[] = $grade;  // add grades here
}
$grade_distribution = array_count_values($array); // count it

foreach($grade_distribution as $g => $count)
    echo "score for $g = $count\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:02:04.270

```
$base=array(array("B"=>1),array("C"=>1),array("B"=>1),array("B"=>1),array("C"=>1));
print_r($base); // just to debug
$score=array_reduce($base,function(&$rst,$i){
    foreach($i as $k=>$s){
        if(empty($rst[$k])){
            $rst[$k]=0;
        }
        $rst[$k]+=$s;
    }
    return $rst;
},array());
print_r($score); 
```

输出`print_r($base)`：

```
Array
(
    [0] => Array
        (
            [B] => 1
        )

    [1] => Array
        (
            [C] => 1
        )

    [2] => Array
        (
            [B] => 1
        )

    [3] => Array
        (
            [B] => 1
        )

    [4] => Array
        (
            [C] => 1
        )

) 
```

输出`print_r($score)`：

```
Array
(
    [B] => 3
    [C] => 2
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:50:30.510

这是一个返回特定字母总和的函数：

```
function getTotal($key, $array) {
    $total = 0;
    foreach ($array as $currentArray) {
        foreach ($currentArray as $currentKey => $currentValue) {
            if ($key === $currentKey) {
                $total += $currentValue;
            }
        }
    }
    return $total;
} 
```

然后像这样使用它：

```
$totalForB = getTotal('B', $myArray); 
```

# python - Pickle 到文件而不是使用数据库

> ID：14029077
> 
> 赞同：7
> 
> 时间：2012-12-25T08:44:02.080
> 
> 标签：python, mysql, pickle

我正在用 python 编写一个基本的会员网络应用程序。

完全放弃数据库并简单地将python字典腌制到文件中总是不好的做法（http://docs.python.org/2/library/pickle.html）？该程序永远不必处理超过 ca。500 个成员，并且每个成员只保留几个字段，所以我不认为扩展是一个问题。由于这个应用程序可能还需要在本地运行，如果事情尽可能简单，让它在各种机器上运行会更容易。

所以选项是设置一个 mysql 数据库，或者简单地腌制到一个文件。我更喜欢第二个，但想知道这是否是一个糟糕的主意。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T08:56:06.630

不，如果您可以将所有数据保存在内存中，则不需要数据库，只需腌制一切都可以。

酸洗的显着缺点是它不安全，有人可以用其他东西（包括可执行代码）替换您的数据，并且它仅适用于 Python。使用数据库，您通常还会同时更新数据并写入磁盘，而您必须记住腌制数据并将其保存到磁盘。由于这需要时间，因为您一次写入所有数据，通常仅在您退出时完成，因此崩溃意味着您丢失所有更改。

但是有一个中间立场：sqlite。它是 Python 中包含的轻量级、简单的 SQL 数据库（自 Python 2.5 起），因此您无需安装任何额外的软件即可使用它。它通常是一个快速的解决方案。由于 SQLAlcehmey 支持 SQLite，这也意味着您甚至可以将 SQLAlchemy 与 SQLite 一起用作默认数据库，从而为更重要的数据库提供“升级路径”。

# html - 如何在 HTML 选择中添加选项组？

> ID：14029080
> 
> 赞同：18
> 
> 时间：2012-12-25T08:44:45.920
> 
> 标签：html

如何在 HTML 选择标签中添加选项组？我想用选项组对我的选项列表进行分类....我该如何使用它？

这是一个例子

```
<select>
<!-- First category option -->
   <option value="volvo">Volvo</option>
   <option value="saab">Saab</option>
<!-- Second catgory option -->
   <option value="mercedes">Mercedes</option>
   <option value="audi">Audi</option>
</select> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-25T08:48:32.747

通过使用`optgroup`标签。这是一个例子：

```
<select name="browser">

    <optgroup label="Firefox">
      <option value="2.0 or higher">
        Firefox 2.0 or higher
      </option>
      <option value="1.5.x">Firefox 1.5.x</option>
      <option value="1.0.x">Firefox 1.0.x</option>
    </optgroup>

    <optgroup label="Microsoft Internet Explorer">
      <option value="7.0 or higher">
        Microsoft Internet Explorer 7.0 or higher
      </option>
      <option value="6.x">Microsoft Internet Explorer 6.x</option>
      <option value="5.x">Microsoft Internet Explorer 5.x</option>
      <option value="4.x">Microsoft Internet Explorer 4.x</option>
    </optgroup>

    <optgroup label="Opera">
      <option value="9.0 or higher">Opera 9.0 or higher</option>
      <option value="8.x">Opera 8.x</option>
      <option value="7.x">Opera 7.x</option>
    </optgroup>

    <option>Safari</option>
    <option>Other</option>

</select> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T08:49:16.270

您正在寻找[`<optgroup>`](https://developer.mozilla.org/en-US/docs/HTML/Element/optgroup)应该嵌套选项的标签。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-25T08:49:24.613

[Optgroup](http://www.w3schools.com/tags/tag_optgroup.asp)是您正在寻找的。

# python - Python facebook-sdk Graph api 访问错误

> ID：14029085
> 
> 赞同：1
> 
> 时间：2012-12-25T08:45:22.927
> 
> 标签：python, facebook-graph-api, facebook-access-token

我正在使用[Python facebook-sdk](https://github.com/pythonforfacebook/facebook-sdk)在 Facebook 页面中获取用户的帖子。

在 facebook Graph api explorer 中，请求进展顺利：

```
Get .../coldplay/feed?limit=2 
```

![在此处输入图像描述](../Images/29632a01b930e449ce6756275d11b11c.png)

在我的程序中，请求：

```
In [27]: graph = facebook.GraphAPI("...")
In [28]: posts = graph.get_object('coldplay/feed?limit=2') 
```

报告错误：

```
GraphAPIError                             Traceback (most recent call last)

/home/ubuntu/<ipython console> in <module>()

/usr/local/lib/python2.7/dist-packages/facebook.pyc in get_object(self, id, **args)
     97     def get_object(self, id, **args):
     98         """Fetchs the given object from the graph."""
---> 99         return self.request(id, args)
    100
    101     def get_objects(self, ids, **args):

/usr/local/lib/python2.7/dist-packages/facebook.pyc in request(self, path, args, post_args)
    296         except urllib2.HTTPError, e:
    297             response = _parse_json(e.read())
--> 298             raise GraphAPIError(response)
    299         except TypeError:
    300             # Timeout support for Python <2.6 
```

如果我要求没有“？limit = 2”，则程序运行良好：

```
In [45]: graph = facebook.GraphAPI("...")
In [46]: posts = graph.get_object('coldplay/feed')                                        
In [47]: len(posts)
Out[47]: 2 
```

所以我想知道如何提出请求：'.../feed?limit=2' 适用于 Python facebook-sdk？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:37:56.873

您应该`limit`作为参数提供而不是对象的一部分。

`get_object`is的定义`def get_object(self, id, **args)`意味着您需要提供关键字 args

在你的情况下：`graph.get_object('coldplay/feed', limit=2)`

# java - Warning in JUnit tests

> ID：14029086
> 
> 赞同：18
> 
> 时间：2012-12-25T08:45:25.327
> 
> 标签：java, junit

I would like to display a warning in a `JUnit` test. I don't want the test to fail because of that warning but I would like to know that the warning occurs. Obviously, I can use `System.err.print` or something similar. Now I wonder what is the *right* way to do it

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T08:53:02.993

I have also thought that this would useful at times, but this can't be done. JUnit insists on a right and wrong answer and so only has "success", "fail", and "error". Error being when something breaks in the code while running the test. I would refactor and consider if you really need a warning (or log like the previous answer suggests, although I think this warning would soon get lost),

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T08:46:33.223

use logger with console appender for it

```
final Logger logger = LoggerFactory.getLogger(LoggingTest.class);

@Test
public void test() {
    logger.warn("message");
} 
```

PS. Example using slf4j logger.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T08:57:38.430

you can have log4j configuration specific to your tests.

**Step 1:** create a file src/test/resources/test-log4j.properties containing the configuration of log4j for your tests.

Example:

```
log4j.rootLogger=DEBUG, R
log4j.appender.R=org.apache.log4j.ConsoleAppender
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{3}:%L - %m%n 
```

Step 2: Edit your pom.xml like the following:

```
<build>
 ...
 <plugins>

   <plugin>
     <artifactid>maven-surefire-plugin</artifactid>
     <version>2.3</version>
     <configuration>
       <systemproperties>
         <property>
           <!-- Specific log4j config for tests -->
           <name>log4j.configuration</name>
           <value>test-log4j.properties</value>
         </property>
       </systemproperties>
     </configuration>
   </plugin>
   ...
 </plugins>
</build> 
```

Now your log4j.properties is located in src/main/webapp/WEB-INF/classes/

Hope this helps.

# php - 为什么我没有滚动条？

> ID：14029102
> 
> 赞同：8
> 
> 时间：2012-12-25T08:48:16.683
> 
> 标签：php, html, css

我正在用 HTML、CSS 和 PHP 制作一个网站，页面超出了屏幕，但浏览器没有提供滚动条（Mac 上的 Safari 5.0.6 和 Firefox 14.0.1）。是因为我包含了 PHP 吗？但是在页面渲染之前不应该在那里吗？

这是一个链接：[测试网站](http://a4ftest.net63.net/ "测试地点")

我的 PHP 语法：

```
<div id="content">
        <div class="wrapper">
            <div id="home" class="alert">
                Welcome to always4free&copy;! To browse the classifieds, you must first either choose a location or have your location detected.
            </div>
            <?php include "res/pages/categories.php"; ?>
        </div>
    </div>
</div> 
```

到底是怎么回事？

**编辑：**这是我的 CSS：

```
 body {
    background-image: url("http://always4free.org/site/images/bg.jpg");
    background-size: cover;
    font-family: "Mouse Memoirs",sans-serif;
}
.wrapper {
    margin: 0 auto;
    width: 850px;
}
#header {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.5);
    border-bottom: 3px solid green;
    box-shadow: 0 2px 10px #888888;
    height: 50px;
    left: 0;
    position: fixed;
    top: 0;
    width: 100%;
}
#logo {
    color: rgba(255, 255, 255, 0.7);
    float: left;
    font-family: "Wendy One",sans-serif;
    font-size: 30px;
    line-height: 50px;
    width: 250px;
}
#logo a:hover {
    color: #FFFFFF;
}
#nav {
    float: right;
    line-height: 50px;
    width: 600px;
}
#nav a:first-child {
    margin-left: 0;
}
#nav a:last-child {
    margin-right: 0;
}
#nav a:link, #nav a:visited {
    color: rgba(255, 255, 255, 0.9);
    font-family: "Mouse Memoirs",sans-serif;
    letter-spacing: 1px;
    margin-left: 10px;
    margin-right: 10px;
}
#nav a:hover {
    border-bottom: 2px solid #FFFFFF;
    color: #FFFFFF;
    padding-bottom: 1px;
}
#nav a.detect {
    background-color: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 2px 2px 2px 2px;
    color: rgba(0, 0, 0, 0.7);
    padding: 5px;
}
#nav a.detect:hover {
    color: #000000;
}
#content {
    font-family: "Mouse Memoirs",sans-serif;
    letter-spacing: 1px;
    margin-top: 70px;
}
.page {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.5);
    border: 1px solid green;
    color: #FFFFFF;
    font-size: 20px;
    padding: 10px;
}
.alert {
    background: none repeat scroll 0 0 #AD2E1D;
    border: 1px solid #911E0F;
    color: white;
    font-size: 20px;
    padding: 10px;
    text-align: center;
}
#categories {
    margin-top: 20px;
}
#categories h2 {
    color: rgba(255, 255, 255, 0.7);
    font-family: "Wendy One",sans-serif;
    font-size: 26px;
}
#categories a:link, #categories a:visited {
    background: none repeat scroll 0 0 white;
    color: black;
    padding: 3px;
}
#categories .block {
    line-height: 35px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:00:54.733

您将所有内容都包裹在`position: fixed;`. body 无法检索固定或绝对子级的高度，因此设置为实际高度 0 - 从而消除了任何滚动需要。

如果您将`#content`元素移到固定标题之外，则应该按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:24:37.150

添加**溢出：滚动；** 在您的 #header 样式中并将位置更改为**relative**。

```
#header {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.5);
    border-bottom: 3px solid green;
    box-shadow: 0 2px 10px #888888;
    height: 50px;
    left: 0;
    position: **relative**;
    top: 0;
    width: 100%;
    **overflow: scroll;**
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:54:28.243

使用 .wrapper添加一个[clearfix](http://www.webtoolkit.info/css-clearfix.html)类，使其具有高度，然后使用：

```
.wrapper{
    overflow: scroll;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T08:58:16.637

将带有 id`content`的 div 移到 div 之外`header`。

它会解决你的问题。

# c - 如何使用 C 获取 Unix 文件的所有者

> ID：14029109
> 
> 赞同：3
> 
> 时间：2012-12-25T08:49:15.153
> 
> 标签：c, file-ownership

我正在尝试使用 C 获取 Unix 文件的所有者名称。我发现的唯一方法是使用 stat()，然后使用 getpwuid(stat.st_uid)。但是，它只返回具有该 uid 的第一个用户名，其中密码文件中的用户可以具有相同的 uid。显然，这是不可接受的，也不可信。

**参考：**

所有者是从密码文件中收到的：http: [//pubs.opengroup.org/onlinepubs/007904875/functions/getpwuid.html](http://pubs.opengroup.org/onlinepubs/007904875/functions/getpwuid.html)

Uid 在密码文件中找到： [http ://www.cyberciti.biz/faq/understanding-etcpasswd-file-format/](http://www.cyberciti.biz/faq/understanding-etcpasswd-file-format/)

Unix允许多个用户拥有相同的uid： [http ://www.e-reading.org.ua/htmbook.php/orelly/networking/puis/ch04_01.htm](http://www.e-reading.org.ua/htmbook.php/orelly/networking/puis/ch04_01.htm)

是否有准确的方法或较低级别的方法，某种可以保证我准确结果的查找表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T08:54:17.150

Unix 文件权限通过使用 UID 起作用。用户名不能拥有文件。只有 UID 可以。因此，如果文件属于特定的 UID，则具有该 UID 的所有用户都拥有该文件。

因此，您获得哪个用户名并不重要，因为具有该 UID 的所有用户都拥有该文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T08:54:35.447

如果您有多个名称与单个 UID 关联，则您有多个名称与该 UID 关联。但就内核而言，所有这些名称都是 SAME 用户的别名。

也就是说，这个名字纯粹是人类虚构的，唯一存储的就是 UID。

例如，假设我们在 /etc/passwd 中有两行：

```
user:50:50:...
resu:50:50:... 
```

这定义了从用户名到 UID 的两个映射。在内部，只有数字 UID 用于确定“某人是谁”，因此如果`resu`创建文件并将权限设置为 user:read/write、group:none、other:none，`user`仍然可以读取它，因为就就内核而言，他们是*同一个*用户。

```
/the/example/file
  owner: 50
  group: 50
  permissions: rw------- 
```

就所有权而言，存储在文件系统中的唯一内容是数字用户 ID 和数字组 ID。对于从数字 ID 到人类友好字符串的映射，找到的第一个映射就是使用的映射，因为它们都是相同的。

简而言之，不要给两个用户提供相同的数字 ID，因为如果你这样做，你会让自己的生活变得太难。

# jquery - jquery droppable - 嵌套 div，获取实际目标 id

> ID：14029112
> 
> 赞同：0
> 
> 时间：2012-12-25T08:49:44.197
> 
> 标签：jquery, jquery-ui-droppable

我有这样的事情：

```
 $('#mover' ).draggable({});
    $('div').droppable({
    drop: function(event, ui) {
        console.log(event.target.id)
    } 
```

然后

```
<div id="container">
    <div id="target_1"></div>
    <div id="target_2"></div>
    <div id="target_3"></div>
</div> 
```

当我将移动器放在 div 上时，“容器”会返回。我如何返回该项目被丢弃的最低孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:53:11.713

你为什么不让容器的孩子成为放置目标？

```
$('#container').children().droppable(... 
```

# ios - UIWebView 插入文本？

> ID：14029114
> 
> 赞同：0
> 
> 时间：2012-12-25T08:49:56.147
> 
> 标签：ios, uiwebview

有没有类似的方法

> `[textfield Inserttext:NSString]`

在 UIWebView 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-28T07:14:23.857

第一的：

获得第一响应者。[获取第一响应者](https://stackoverflow.com/questions/5029267/is-there-any-way-of-asking-an-ios-view-which-of-its-children-has-first-responder/14135456#14135456)

第二：

```
id responder = [UIResponder currentFirstResponder];
UITextRange *selectedTextRange = responder.selectedTextRange;
[responder replaceRange: textRange withText: @"text"]; 
```

# railstutorial.org - 在 michael hartl 的 ruby on rails 教程中安装 ruby 1.9.3

> ID：14029119
> 
> 赞同：3
> 
> 时间：2012-12-25T08:50:36.653
> 
> 标签：railstutorial.org, ruby-1.9.3, installation

我正在研究 Michael Hartl 的 ruby​​ on rails 教程[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec-development_tools](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec-development_tools)。

我安装了 Git，将我的操作系统更新到 10.8.2 并下载了 XCode 4.5.2。

当我输入

```
rvm install 1.9.3 
```

这么长的东西出现了...

```
Ruby (and needed base gems) for your selection will be installed shortly.
Before it happens, please read and execute the instructions below.
Please use a separate terminal to execute any additional commands.

  Notes for Mac OS X 10.8.2, Xcode 4.5.2.

For JRuby:  Install the JDK. See http://developer.apple.com/java/download/  # Current Java version "1.6.0_26"
For IronRuby: Install Mono >= 2.6
For Ruby 1.9.3: Install libksba # If using Homebrew, 'brew install libksba'
For Opal: Install Nodejs with NPM. See http://nodejs.org/download/

To use an RVM installed Ruby as default, instead of the system ruby:

    rvm install 1.8.7 # installs patch 357: closest supported version
    rvm system ; rvm gemset export system.gems ; rvm 1.8.7 ; rvm gemset import system.gems # migrate your gems
    rvm alias create default 1.8.7

And reopen your terminal windows.

Xcode and gcc:

Right now Ruby requires gcc to compile, but Xcode 4.2 and later no longer ship with gcc. Instead they ship with llvm-gcc (to which gcc is a symlink) and clang, neither of which are supported for building Ruby. Xcode 4.1 was the last version to ship gcc, which was /usr/bin/gcc-4.2.

Xcode 4.1 and earlier:
- Ruby will build fine.

Xcode 4.2 and later (including Command Line Tools for Xcode):
- If you have gcc-4.2 (and friends) from an earlier Xcode version, Ruby will build fine.
- If you don't have gcc-4.2, you have two options to get it:
 * Install apple-gcc42 from Homebrew
 * Install osx-gcc-installer

  Homebrew:

  If you are using Homebrew, you can install the apple-gcc42 and required libraries from homebrew/dupes:

      brew update
      brew tap homebrew/dupes
      brew install autoconf automake apple-gcc42
      rvm pkg install openssl

  Xcode 4.2+ install or/and Command Line Tools for Xcode is required to provide make and other tools.

  osx-gcc-installer:

  If you don't use Homebrew, you can download and install osx-gcc-installer: https://github.com/kennethreitz/osx-gcc-installer.

  Warning: Installing osx-gcc-installer on top of a recent Xcode is known to cause problems, so you must uninstall Xcode before installing osx-gcc-installer. Afterwards you may install Xcode 4.2+ or Command Line Tools for Xcode if you desire.

  ** NOTE: Currently, Node.js is having issues building with osx-gcc-installer. The only fix is to install Xcode over osx-gcc-installer.

Press 'q' to continue.
~
(END) 
```

最初我不得不自制和

```
brew install libksba 
```

但我已经这样做了，而且效果很好。这会导致“Xcode 和 gcc：”以及它下面的所有内容。

所以，我有自制软件，以下三个命令有效：

```
 brew update
  brew tap homebrew/dupes
  brew install autoconf automake apple-gcc42 
```

但是当我尝试

```
rvm pkg install openssl 
```

这就是发生的事情

```
Fetching openssl-1.0.1c.tar.gz to /Users/adamzerner/.rvm/archives
Extracting openssl to /Users/adamzerner/.rvm/src/openssl-1.0.1c
Configuring openssl in /Users/adamzerner/.rvm/src/openssl-1.0.1c.
Compiling openssl in /Users/adamzerner/.rvm/src/openssl-1.0.1c.
Error running 'make', please read /Users/adamzerner/.rvm/log/openssl/make.log

Please note that it's required to reinstall all rubies:

    rvm reinstall all --force

Updating openssl certificates
Error running 'update_openssl_certs', please read /Users/adamzerner/.rvm/log/openssl.certs.log 
```

这就是当我尝试它所说的时会发生的事情......

```
Adam-Zerners-MacBook-Pro:~ adamzerner$ rvm reinstall all --force
Adam-Zerners-MacBook-Pro:~ adamzerner$ 
```

其他一些信息...

我没有在 adamzerner 下看到 .rvm 文件夹，所以我无法阅读它告诉我的内容（不是说我会理解我将要阅读的内容）。

看来我安装了 1.8.7：

```
Adam-Zerners-MacBook-Pro:~ adamzerner$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0] 
```

所以......总结......当我尝试跑步时

```
rvm install 1.9.3 
```

我得到 gcc/Xcode 问题。为了解决这个问题，它说要从 Homebrew 下载 apple-gcc42。当我这样做时，我会在做之后遇到问题

```
rvm pkg install openssl 
```

问题是我需要重新安装所有红宝石。当我这样做时：

```
rvm reinstall all --force 
```

似乎什么也没发生。

提前感谢任何愿意帮助我解决这个问题的人！

编辑：我之前忘了说这个。对于上面的“长事”，当我按 q 继续时，会发生这种情况......

```
Searching for binary rubies, this might take some time.
https://rvm.io/binaries/osx/10.8/x86_64/ruby-1.9.3-p327.tar.bz2 - #configure
ruby-1.9.3-p327 - #download
ruby-1.9.3-p327 - #extract
ruby-1.9.3-p327 - #validate
Libraries missing for ruby-1.9.3-p327: env. Refer to your system manual for installing libraries
Mounting remote ruby failed, trying to compile.
Fetching yaml-0.1.4.tar.gz to /Users/adamzerner/.rvm/archives
Extracting yaml to /Users/adamzerner/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/adamzerner/.rvm/src/yaml-0.1.4.
Error running './configure --prefix=/Users/adamzerner/.rvm/usr', please read /Users/adamzerner/.rvm/log/ruby-1.9.3-p327/yaml/configure.log
Compiling yaml in /Users/adamzerner/.rvm/src/yaml-0.1.4.
Error running 'make', please read /Users/adamzerner/.rvm/log/ruby-1.9.3-p327/yaml/make.log
Installing Ruby from source to: /Users/adamzerner/.rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...
ruby-1.9.3-p327 - #extracted to /Users/adamzerner/.rvm/src/ruby-1.9.3-p327 (already extracted)
ruby-1.9.3-p327 - #configuring
Error running './configure --enable-shared --disable-install-doc --prefix=/Users/adamzerner/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/adamzerner/.rvm/usr', please read /Users/adamzerner/.rvm/log/ruby-1.9.3-p327/configure.log
There has been an error while running configure. Halting the installation. 
```

编辑：当我按照 github 链接 OliverAtkinson 发布时会发生什么

```
Last login: Wed Dec 26 15:55:12 on ttys000
Adam-Zerners-MacBook-Pro:~ adamzerner$ brew update
Updated Homebrew from 751a0d6e to c67c126c.
==> New Formulae
ume
==> Updated Formulae
akka        global      markdown    ruby        slrn
basex       gnuplot     mu      ruby-build  ttytter
casperjs    gradle      qt      shiboken    vice
cassandra   groonga     qt5     shocco      wine
discount    jenkins     rakudo-star signing-party   xvid
Adam-Zerners-MacBook-Pro:~ adamzerner$ brew tap homebrew/dupes
Error: Already tapped!
Adam-Zerners-MacBook-Pro:~ adamzerner$ brew install autoconf automake apple-gcc42
Error: autoconf-2.69 already installed
Error: automake-1.12.6 already installed
Error: apple-gcc42-4.2.1-5666.3 already installed
Adam-Zerners-MacBook-Pro:~ adamzerner$ brew remove autoconf automake apple-gcc42
Uninstalling /usr/local/Cellar/autoconf/2.69...
Uninstalling /usr/local/Cellar/automake/1.12.6...
Uninstalling /usr/local/Cellar/apple-gcc42/4.2.1-5666.3...
Adam-Zerners-MacBook-Pro:~ adamzerner$ brew install autoconf automake apple-gcc42
==> Downloading http://ftpmirror.gnu.org/autoconf/autoconf-2.69.tar.gz
Already downloaded: /Library/Caches/Homebrew/autoconf-2.69.tar.gz
==> Patching
patching file bin/autoreconf.in
==> ./configure --prefix=/usr/local/Cellar/autoconf/2.69
==> make install
/usr/local/Cellar/autoconf/2.69: 69 files, 2.0M, built in 13 seconds
==> Downloading http://ftpmirror.gnu.org/automake/automake-1.12.6.tar.gz
Already downloaded: /Library/Caches/Homebrew/automake-1.12.6.tar.gz
==> ./configure --prefix=/usr/local/Cellar/automake/1.12.6
==> make install
/usr/local/Cellar/automake/1.12.6: 130 files, 2.1M, built in 16 seconds
==> Downloading http://r.research.att.com/tools/gcc-42-5666.3-darwin11.pkg
Already downloaded: /Library/Caches/Homebrew/apple-gcc42-4.2.1-5666.3.pkg
==> Caveats
NOTE:
This formula provides components that were removed from XCode in the 4.2
release. There is no reason to install this formula if you are using a
version of XCode prior to 4.2.

This formula contains compilers built from Apple's GCC sources, build
5666.3, available from:

  http://opensource.apple.com/tarballs/gcc

All compilers have a `-4.2` suffix. A GFortran compiler is also included.
==> Summary
/usr/local/Cellar/apple-gcc42/4.2.1-5666.3: 104 files, 75M, built in 5 seconds
Adam-Zerners-MacBook-Pro:~ adamzerner$ rvm pkg install openssl
Fetching openssl-1.0.1c.tar.gz to /Users/adamzerner/.rvm/archives
Extracting openssl to /Users/adamzerner/.rvm/src/openssl-1.0.1c
Configuring openssl in /Users/adamzerner/.rvm/src/openssl-1.0.1c.
Compiling openssl in /Users/adamzerner/.rvm/src/openssl-1.0.1c.
Error running 'make', please read /Users/adamzerner/.rvm/log/openssl/make.log

Please note that it's required to reinstall all rubies:

    rvm reinstall all --force

Updating openssl certificates
Error running 'update_openssl_certs', please read /Users/adamzerner/.rvm/log/openssl.certs.log
Adam-Zerners-MacBook-Pro:~ adamzerner$ CC=/usr/local/bin/gcc-4.2 rvm reinstall 1.9.3 --patch falcon --force-autoconf -j 3
Removing /Users/adamzerner/.rvm/src/ruby-1.9.3-p327...
/Users/adamzerner/.rvm/rubies/ruby-1.9.3-p327 has already been removed.
Fetching yaml-0.1.4.tar.gz to /Users/adamzerner/.rvm/archives
Extracting yaml to /Users/adamzerner/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/adamzerner/.rvm/src/yaml-0.1.4.
Error running './configure --prefix=/Users/adamzerner/.rvm/usr', please read /Users/adamzerner/.rvm/log/ruby-1.9.3-p327/yaml/configure.log
Compiling yaml in /Users/adamzerner/.rvm/src/yaml-0.1.4.
Error running 'make -j3', please read /Users/adamzerner/.rvm/log/ruby-1.9.3-p327/yaml/make.log
Installing Ruby from source to: /Users/adamzerner/.rvm/rubies/ruby-1.9.3-p327, this may take a while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your connection...
ruby-1.9.3-p327 - #extracting ruby-1.9.3-p327 to /Users/adamzerner/.rvm/src/ruby-1.9.3-p327
ruby-1.9.3-p327 - #extracted to /Users/adamzerner/.rvm/src/ruby-1.9.3-p327
Applying patch /Users/adamzerner/.rvm/patches/ruby/1.9.3/p327/falcon.diff
ruby-1.9.3-p327 - #autoreconf-f
ruby-1.9.3-p327 - #configuring
Error running './configure --enable-shared --disable-install-doc --prefix=/Users/adamzerner/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/adamzerner/.rvm/usr', please read /Users/adamzerner/.rvm/log/ruby-1.9.3-p327/configure.log
There has been an error while running configure. Halting the installation.
Adam-Zerners-MacBook-Pro:~ adamzerner$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
Adam-Zerners-MacBook-Pro:~ adamzerner$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:15:21.027

我现在已经成功下载了 Ruby 1.9.3！

我认为问题在于我没有从 XCode 下载命令行工具。见[http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion](http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion)

请注意，对于`whoami`，它使用的是反引号键，它位于制表键的正上方。它不使用引号。

下载命令行工具后，我输入了`rvm install 1.9.3`. 我得到了和以前一样的“长东西”，但那时我已经拥有了我需要的一切，所以我只是按 q 继续，并且成功安装了 ruby​​ 1.9.3！

注意：虽然安装成功，但是当我输入时`ruby -v`，它仍然说它是 1.8.7，即使它不是。但是，关闭并重新打开终端后，它又说版本确实是1.9.3。

# django - 隐藏主键或 ID 不被暴露

> ID：14029120
> 
> 赞同：1
> 
> 时间：2012-12-25T08:50:40.317
> 
> 标签：django, primary-key, django-urls, identifier

目前，在添加、编辑或删除对象时，我正在使用 url 中对象的 id (pk)，这当然会向用户公开该特定对象的全局主键 id。在使用 POST 时，我想以某种方式从 url 和/或表单中的隐藏字段中隐藏这些全局 id。

为了更清楚一点，让我用一个例子来解释一下。所以说我有以下型号。

# 模型.py

```
class Profile(User)
    # Some fields here

class Student(Profile)
    # some fields here

class Teacher(Profile)
    # Some fields here

class Project(models.Model)
    student = models.ForeignKey(Student)
    # some more fields here. 
```

根据上述模型，假设我想编辑或删除现有`Project`实例。我目前做的是`id(pk)`在网址中使用作为参数，如下所示：

# 网址.py

```
url(r'^project/(?P<id>\d+)/edit/$', 'app.views.edit_project'),
url(r'^project/(?P<id>\d+)/delete/$', 'app.views.delete_project'), 
```

从 url 中完全隐藏这些 id 的最佳方法是什么？

有没有办法让每个学生都有项目 ID？像`auto_increment`在项目表中添加另一列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T22:14:24.667

`SlugField()`安东尼提出的方案是个好主意。在字段上放置一个唯一约束（`unique=True`在您的模型定义中）。然后像这样写你的`urls.py`规则：

```
url(r'^project/(?P<slug>[A-Za-z0-9_\-]+)/edit/$', 'app.views.edit_project'),
url(r'^project/(?P<slug>[A-Za-z0-9_\-]+)/delete/$', 'app.views.delete_project'), 
```

# c# - 如何覆盖嵌套界面中的某些属性？

> ID：14029121
> 
> 赞同：1
> 
> 时间：2012-12-25T08:50:50.073
> 
> 标签：c#, .net, interface

我需要覆盖嵌套界面中的一些属性。我试试看：

```
public interface INode {
    INode Parent { get; }
    ICollection<INode> Items { get; }
    Boolean IsKey { get; }
    String Name { get; set; }
    Object Value { get; set; }
    Boolean IsValidValue(Object value);
    Boolean HasFixedValues { get; }
    ICollection<Object> FixedValues { get; }
    String Description { get; set; }
    String GetFullPath();
    Boolean IsExists();
    INode GetFromXML(XElement xml);
    XElement WriteToXml();
}

public interface INode<T> : INode {       
    new T Value { get; set; }
    new Boolean IsValidValue(T value);
    new ICollection<T> FixedValues { get; }
} 
```

但我得到编译错误。我该怎么做？

异常消息：

> 来自程序集“AcadInfo_Accessor，版本=0.0.0.0，文化=中性，PublicKeyToken=null”的类型“AndreyBushman.AutoCAD.INode_Impl `1' from assembly 'AcadInfo_Accessor, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' does not have an implementation. TestProject Error 22 The "BuildShadowTask" task failed unexpectedly. System.TypeLoadException: Method 'set_Value' in type 'AndreyBushman.AutoCAD.INode_Impl`1”中的错误 21 方法“set_Value”没有实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:23:04.310

实现此接口时，请确保同时实现成员 from`INode`和 from `INode<T>`：

```
class Test : INode<int>
{
    public int Value {
        get {
            throw new NotImplementedException();
        }
        set {
            throw new NotImplementedException();
        }
    }

    object INode.Value {
        get {
            throw new NotImplementedException();
        }
        set {
            throw new NotImplementedException();
        }
    }
} 
```

# java - java exec() 运行一个 db2 导入命令，waitfor() 永远不会返回

> ID：14029122
> 
> 赞同：-1
> 
> 时间：2012-12-25T08:50:59.197
> 
> 标签：java, process, import, db2, runtime.exec

我用java进程运行一个外部命令。该命令是带有一些 db2 命令的 .bat 文件。当我想使用进程 waiffor() 返回结果时，我什么也得不到。程序必须是阻塞的。

爪哇代码：

```
.....

Runtime rt = Runtime.getRuntime();
Process p = null;     

String command = "db2cmd -c -w -i C:/import1.bat";

p = rt.exec(command);   
p.waitFor();

..... 
```

进口1.bat：

```
@echo off
db2 connect to text_DB user text using tesxt0114  

db2 IMPORT FROM "C:\MVCMSInputFiles\IIS20121224180129.csv" OF DEL METHOD P (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16) MESSAGES "C:\MVCMSInputFiles\20121224180129.log" INSERT INTO BLUEX.BIZ_MACHINE (MACHINE_SSERIALNO, MACHINE_STYPE, MACHINE_SPROJECTID, MACHINE_SCATEGORY, MACHINE_SNAME, MACHINE_SBRAND, MACHINE_SSPOT, MACHINE_SPRODUCEDATE, MACHINE_SSERVPERIOD, MACHINE_SENDDATE, MACHINE_SCONTRACTID, MACHINE_SSERVSTATUS, MACHINE_NSTATUS, MACHINE_SSCID, LOG_SLASTUSER, MACHINE_TSIMPORTTIME) 

db2 connect reset 
```

* * *

我也 `p.getInputStream()`用来处理`InputStream`，但该过程总是被第三个命令阻止`(db2 import.....)`

代码：

```
Runtime rt = Runtime.getRuntime();
Process p = null;

String command = "db2cmd -c -w -i C:/import1.bat";

p = rt.exec(command);

BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));

while ((line = reader.readLine())!= null){              
   System.out.println(line);            
}

reader.close();

while(true){                
    if (p.waitFor() == 0) break;            
} 
```

* * *

当我使用`db2 export...`或`db2 select * from ....`替换第三个命令时。该函数`waitfor`可以返回结果。进程不能被阻塞。

这太奇怪了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:56:59.960

我得到了关于这个问题的答案。原因是：在 p = rt.exec(command) 之前，存在未提交的连接对象。所以这样的代码可以正常运行。

```
.... ...
ConnectionFactory.commit(conn);
p = rt.exec(command); 
... .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:52:10.733

Mabye你可以这样做：

```
Runtime rt = Runtime.getRuntime();
Process p = null;     

String command = "db2cmd -c -w -i C:/import1.bat";

p = rt.exec(command); 
p.getInputStream().close();  
p.waitFor(); 
```

霍尔普可以帮助你。

# sphinx - 在 ubuntu 中安装 sphinxbase 和 pocketsphinx 时出错

> ID：14029131
> 
> 赞同：0
> 
> 时间：2012-12-25T08:52:02.300
> 
> 标签：sphinx

我正在尝试在 ubuntu 中安装 sphinxbase，但是在执行 make install 命令时出现以下错误。

make[4]: *** [install-libLTLIBRARIES] 错误 1 ​​make[4]: 离开目录`/home/aniruddha/project/sphinxbase-0.8/src/libsphinxbase' make[3]: *** [install-am] Error 2 make[3]: Leaving directory`/home/aniruddha/project/sphinxbase-0.8/src/libsphinxbase' make[2]:****[install-recursive] 错误 1 ​​make[2]: 离开目录`/home/aniruddha/project/sphinxbase-0.8/src/libsphinxbase' make[1]: *** [install-recursive] Error 1 make[1]: Leaving directory`/home/aniruddha/project/sphinxbase-0.8/src' make: ** * [install-recursive] 错误 1*

 *请帮助我如何省略这些错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T10:13:38.150

有完全相同的错误......将“sudo”放在 make install 前面将其整理出来。:-)*

# wcf - 从 Windows Phone 8 模拟器访问本地 Azure WCF 服务

> ID：14029135
> 
> 赞同：0
> 
> 时间：2012-12-25T08:52:24.630
> 
> 标签：wcf, azure, windows-phone-8-emulator

我对 Windows Phone 8 模拟器有一个大问题。

首先我有一个 Azure 项目，我有一个 WebRole，这个 webrole 暴露了一些 DomainServices (RIA Services)。

我公开了这个 DomainServices 像 SOAP，以及其他应用程序，如 Windows 8 Metro 风格或 WPF 应用程序客户端，这些服务工作正常。

但是我尝试使用 Windows Phone 8 Emulator 使用此服务，但我做不到！

我关注了这篇文章：[如何从 Windows Phone 8 模拟器连接到本地 Web 服务](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580%28v=vs.105%29.aspx)

我需要更具体：

我在 Windows Azure 项目的 webRole 中有一个网站。

这个网站有一个 DomainServices（RIA 服务），因为我里面有一个 Silverlight 应用程序。我用这个暴露了这个服务。

```
 <domainServices>
  <endpoints>
    <add name="Soap" type="Microsoft.ServiceModel.DomainServices.Hosting.SoapXmlEndpointFactory,
         Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, 
         Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </endpoints>
</domainServices> 
```

我可以将此服务与其他应用程序一起使用。Windows Metro Style 和 WPF 以及此服务工作正常。

现在，我想为 Windows Phone 8 开发一个新的应用程序。但我需要使用这些服务。

在我的本地机器中，我尝试将此服务与模拟器连接，因此，我研究并发现模拟器是虚拟机，我需要配置 IIS Express。我关注了这篇文章[如何从 Windows Phone 8 模拟器连接到本地 Web 服务](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580%28v=vs.105%29.aspx)

但我无法将托管在 webRole 中的服务与 Windows Phone 8 Emulator 连接起来。

这是我的网站项目的结构： ![项目结构](../Images/1de14c1ed37ea823d4fe6cbf9a0a5edb.png)

这是我的 WebRole 的配置，称为 LandingPage，此 Web 角色具有服务。 ![在此处输入图像描述](../Images/b223111791769b2ab5aa02ea988510ae.png)

这是 Applicationhost.config 中 IIS Express 的配置。

```
 <site name="LandingPage" id="2">
            <application path="/" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="E:\AnimesideFinal\AnimesideWebsite\LandingPage" />
            </application>
            <bindings>
                <binding protocol="http" bindingInformation="*:24939:localhost" />
        <binding protocol="http" bindingInformation="*:24939:192.168.2.114" />
            </bindings>
        </site> 
```

这是运行在 IIS Express 中的应用程序不同的文章。 ![在此处输入图像描述](../Images/2fef8333f90aa5e00b9cc8033527a62d.png)

最后这是 Windows Phone 8 模拟器中服务的配置。

```
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_AuthenticationServiceSoap" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://192.168.2.114/Services/LandingPage-Services-AuthenticationService.svc/Soap"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_AuthenticationServiceSoap"
            contract="AuthService.AuthenticationServiceSoap" name="BasicHttpBinding_AuthenticationServiceSoap" />
    </client>
</system.serviceModel> 
```

我按照文章的所有步骤都没有结果。我认为出了点问题，因为我需要从 Azure 项目运行我的项目，并且在该项目的属性中存在使用 IIS express 或 IIS Web 服务器的选项。 ![在此处输入图像描述](../Images/f2b1080d176df056d7097eb2a5ff4da2.png)

这是Windows Phone Emulator 的错误。

{System.ServiceModel.CommunicationException：远程服务器返回错误：NotFound。---> System.Net.WebException：远程服务器返回错误：NotFound。---> System.Net.WebException：远程服务器返回错误：NotFound。在 System.Net.Browser.ClientHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.ClientHttpWebRequest.<>c__DisplayClasse.b__d(Object sendState) 在 System.Net.Browser.AsyncHelper.<>c__DisplayClass1.b__0(Object sendState) --- 内部异常堆栈跟踪结束 --- System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.ServiceModel.Channels。 HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest。`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result) at AnimesideWP7.AuthService.AuthenticationServiceSoapClient.AuthenticationServiceSoapClientChannel.EndLogin(IAsyncResult result) at AnimesideWP7.AuthService.AuthenticationServiceSoapClient.AnimesideWP7.AuthService.AuthenticationServiceSoap.EndLogin(IAsyncResult result) at AnimesideWP7。 AuthService.AuthenticationServiceSoapClient.OnEndLogin(IAsyncResult 结果) at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult 结果)}

谢谢您的帮助 。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:28:54.693

请参阅 iis express 解决方案部分

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580(v=vs.105).aspx)

# java - 以编程方式构建 Web 应用程序

> ID：14029136
> 
> 赞同：-4
> 
> 时间：2012-12-25T08:52:34.257
> 
> 标签：java, web, compilation

我想以编程方式编译具有大量导入和依赖项的 Web 应用程序我可以使用 javax.tools

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
compiler.run(System.in , System.out ,System.err, "D:/data/jeeViews/projects/seds/vcvd/main/com/vcvd/servlet/Dispatcher.java"); 
```

问题是它不会导入类并引发`ClassNotFound`异常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:34:50.673

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        compiler.run(System.in , System.out ,System.err, "/home/visruth/Desktop/Sample.java"); 
```

示例.java：

```
public class Sample {

    public static void main(String... args) {

    System.out.println("Hello world");

    }

} 
```

上面的代码对我有用。

确保`"D:/data/jeeViews/projects/seds/vcvd/main/com/vcvd/servlet/Dispatcher.java"`您提供的路径有效。请在 中发布代码`Dispatcher.java`。因为，如果它引用内部的其他类也可能会出现此异常。例如，假设在 Sample.java 所在的同一位置还*存在*另一个*Another.java*文件。如果将上面的*Sample.java*修改如下可能会出现这个异常，因为，它从类路径中引用了*另一个类。***`Another another = new Another();`**

 ***```
public class Sample {

    public static void main(String... args) {

    // makes exception as it is not in the class path.
    // to avoid exception make it available in the class path.
    Another another = new Another();

    System.out.println("Hello world");

    }

} 
```

另一个.java：

```
public class Another {

//codes........

} 
```

更好的解决方案是使用像[ant这样的](http://www.tutorialspoint.com/ant/ant_build_files.htm)*构建工具*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:38:57.583

`ClassNotFound`例外基本上就是它所说的。

它找不到编译所需的文件。

这意味着两件事之一

1.  您指向错误的位置（希望不是）

2.  您正在使用未编译文件的包或其他类。例如：如果您使用包`C`类`A`，则必须确保在编译类之前编译包类`C`。`A`

（这适用于您导入的任何类）***

# android - ListView 增加和适配器动态变化

> ID：14029137
> 
> 赞同：0
> 
> 时间：2012-12-25T08:52:43.380
> 
> 标签：android, android-layout, android-intent

朋友们。我是新的 android 开发人员并提出问题。我搜索了很多，但没有得到想要的结果。所以，这是我的问题。

**1\. 我有一个 ListView 包含许多项目**

```
 ListView
 _________
    item1
    item2
    item3
   _________ 
```

**2.当我点击onItem点击Listener时，我得到了item conation(ItemDetail.java)的所有值**

**3.现在我在(ItemDetail.java)中有两个按钮buttonNext和buttonPrevious**

因此，当我单击 buttonNext 和 buttonPrevious 时，我的查询列表中的列表视图项详细信息应动态更改位置的增量和减量。

先谢谢朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T06:52:30.983

您必须在该列表活动的 onResume 上进行编码。

只需根据需要使用新排序的数据更新您的适配器，然后使用该新数据刷新列表视图。

如有任何疑问，请告诉我。

希望你明白我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:23:03.780

你试过这个：

1.  `OnClick()`更改您在适配器中使用的列表（已绑定的列表）的集合元素顺序。`SwapElements(list, index1, index2)`

2.  你需要用来`runOnUiThread()`绑定 UI 组件的数据。

`runOnUiThread(new Runnable() { public void run() { refreshListview() } });`

1.  `refreshListview()`方法是您用于刷新例程的方法。

# google-app-engine - Appengine、excel 文件和 30 秒请求限制

> ID：14029138
> 
> 赞同：1
> 
> 时间：2012-12-25T08:52:46.380
> 
> 标签：google-app-engine

如何在需要超过 30 秒的 Google appengine 中上传解析和下载 excel 文件？我使用 java poi 和后端任务，但是一旦后端完成工作，我就无法通知客户端。我无法下载从后端任务创建的 excel ......任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:12:23.967

这里最好的方法不是对抗 HTTP 和 Web 服务架构，而是使用它。

引入工作 ID 的概念。当您的客户端上传文件时，立即返回代表该作业的令牌。额外学分，包括预计的工作时间。首先，让我们说它的 2 分钟。

然后，客户端负责使用令牌向服务器查询该作业 ID 的状态。服务器要么返回答案，要么返回带有更新的 ETA 的令牌。

对于初学者，您总是可以告诉客户在 2 分钟后检查（或任何对您的工作量最有意义的常数）。随着您的服务器处理变得更加智能，您可以给出更准确的估计，并减少客户端的忙碌等待。

# asp.net - 如何在运行时将我的数据列表的数据源设置为数据表

> ID：14029142
> 
> 赞同：0
> 
> 时间：2012-12-25T08:52:53.633
> 
> 标签：asp.net

我的页面中有两个数据列表，其中一个嵌套在另一个中。我想在页面加载事件期间在运行时提供他们的数据源，但是我的内部数据列表没有显示数据表的值，我不知道如何将我的内部数据列表数据源设置为数据表运行。

我已经搜索了很多关于它的信息，但我找不到有用的信息。请帮我。

在页面中，我想显示哪个用户购买了哪些产品，显示每个产品的数量和价格，并显示一些有关付费索引的信息。如索引号或索引库名称。问题是，对于一个索引号，我可以拥有多个产品。为了向每个索引号显示相关产品，我使用了嵌套数据列表。现在，在我的第一个数据列表中，我的外部（父）数据列表可以显示信息，但应该显示产品信息的内部数据列表不显示任何内容。

我真的需要帮助

这是我的代码：

```
 <asp:DataList ID="outerDataLiat" runat="server" RepeatColumns="1" 
            BackColor="#CCCCCC" BorderColor="#999999" BorderStyle="Solid"    BorderWidth="3px" 
            CellPadding="4" CellSpacing="2" ForeColor="Black" GridLines="Both"  DataKeyField="idfromIndex" OnItemDataBound="DataList1_ItemDataBound" />
            <FooterStyle BackColor="#CCCCCC"  />;
            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
        <ItemStyle BackColor="White" />
        <ItemTemplate />           
    <fieldset>

    <legend&gt>customer information&lt</legend&gt>
    <table style="width: 100%;"/>
     <tr>
      <td>
     &nbsp;customer code:
    </td>
     <td>
                    &nbsp;<asp:Label ID="Label1" runat="server" Text='<%# Eval("idFromUsers") %>'</asp:Label>
             </td>;

                 <td>
                    &nbsp;telephone:
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label2" runat="server" Text='<%# Eval("user_phone") %>'></asp:Label>
                </td>

            </tr>
            <tr>
                <td>
                    &nbsp; customer name :
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label3" runat="server" Text='<%# Eval("user_name") %>'></asp:Label>
                </td>
                <td>
                    &nbsp;cellphone number:
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label4" runat="server" Text='<%# Eval("user_cellphone") %>'></asp:Label>
                </td>
            </tr>
            <tr>
                <td>
                    &nbsp; customer familly name :
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label5" runat="server" Text='<%# Eval("user_familly") %>'></asp:Label>
                </td>
                <td>
                    &nbsp;email :
                </td>
                <td>
                   &nbsp;<asp:Label ID="Label6" runat="server" Text='<%# Eval("user_email") %>'></asp:Label>
                </td>
            </tr>

        </table>

    </fieldset>
    <fieldset>
    <legend>Index Information</legend>
      <table style="width: 100%;">
          <asp:Label ID="hiddenLable" runat="server" Text='<%# Eval("idfromIndex") %>' Visible="false"></asp:Label>
            <tr>
                <td>
                    &nbsp;Index number :
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label7" runat="server" Text='<%# Eval("IndexNO") %>'></asp:Label>
                </td>
                <td>
                    &nbsp;date of index :
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label8" runat="server" ></asp:Label>
                </td>
                <td>
                    &nbsp;bank name:
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label9" runat="server" Text='<%# Eval("bankName") %>'></asp:Label>
                </td>
            </tr>

        </table>

    </fieldset>
    <fieldset>
    <legend>purchased products</legend>
    <asp:DataList ID="innerDataLiat" runat="server" RepeatColumns="1" 
            BackColor="#CCCCCC" BorderColor="#999999" BorderStyle="Solid" BorderWidth="3px" 
            CellPadding="4" CellSpacing="2" ForeColor="Black" GridLines="Both" OnItemDataBound="DataList2_ItemDataBound"  >
            <FooterStyle BackColor="#CCCCCC"  />
            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
            <ItemStyle BackColor="White" />
        <ItemTemplate >
        <table style="width: 100%;" id="tbl1"></table>
       <table style="width: 100%;">
            <tr>
                <td>
                    &nbsp;product name :
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label10" runat="server" Text=""></asp:Label>
                </td>
                <td>
                    &nbsp;quantity:
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label11" runat="server" Text=""></asp:Label>
                </td>
                <td>
                    &nbsp;unit price of each product :
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label12" runat="server" Text=""></asp:Label>
                </td>
               <td>
                    &nbsp;Total Amount:
                </td>
                <td>
                &nbsp;<asp:Label ID="Label13" runat="server" Text=""></asp:Label>

                </td>
            </tr>

        </table>
                   </ItemTemplate> 

        </asp:DataList>

    </fieldset>
    <fieldset><legend>shopping cart Information</legend>
        <table style="width: 100%;">
            <tr>
                <td >
                    &nbsp;Total quantity :
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label14" runat="server" Text=""></asp:Label>
                </td>
              <td>
                    &nbsp;total amount of shopping cart:
                </td>
                <td>
                    &nbsp;<asp:Label ID="Label15" runat="server" Text=""></asp:Label>
                </td>

            </tr>
            <tr>
            <td> &nbsp;date of shopping :</td>
            <td dir="rtl">&nbsp<asp:Label ID="Label16" runat="server" Text='<%# Eval("orderDate") %>'  /></td>
            </tr>

        </table>
        </fieldset>

          <asp:LinkButton ID="LinkButton1" runat="server" CommandName="confirm">confirm</asp:LinkButton>
          &nbsp;
          <asp:LinkButton ID="LinkButton2" runat="server" CommandName="notconfirm">not confirm</asp:LinkButton>
        </ItemTemplate>

            <SelectedItemStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />

        </asp:DataList>

    protected void Page_Load(object sender, EventArgs e)
   {
    if (!IsPostBack)
    {
        getDistinctOrderId();
        doPaging();
    }     
 }
private void getDistinctOrderId()
{
    SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["mobile_storeConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = myConnection;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT min(id), [idfromIndex] FROM Orders WHERE [idfromIndex] IN(SELECT DISTINCT [idfromIndex] FROM Orders) GROUP BY [idfromIndex] ";
    DataView MyDv = new DataView();

    try
    {
        myConnection.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        DataTable dt = new DataTable();
        dt.Load(dr);
        MyDv = dt.DefaultView;
        for (int i = 0; i &lt; MyDv.Count; i++)
        {
            if (i == MyDv.Count - 1)
            {
                distinctList += MyDv[i][0].ToString();
            }
            else
                distinctList += MyDv[i][0].ToString() + ",";
        }

    }
    catch (Exception EXP)
    {
    }
    finally
    { myConnection.Close(); }
}
 public DataTable getTheData()
 {

 DataSet DS = new DataSet();
 SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString1"].ConnectionString);
        SqlDataAdapter objSQLAdapter = new SqlDataAdapter("select idfromIndex,user_name,user_email,indexNO,bankName,Ispay,user_familly,user_cellphone,orderDate,user_phone,idFromUsers,orderId from factors where orderId IN (" + distinctList + ")", myConnection); objSQLAdapter.Fill(DS, "mobile_store");

    return DS.Tables[0];
 }

  void doPaging()
  {
    //DataTable mydatatable = 
    pagedData.DataSource = getTheData().DefaultView;
    pagedData.AllowPaging = true;
    pagedData.PageSize = 4;

 /* 
 ...
   here I wrote some code to make my outer datalist pagable
 ...
*/

    outerDataLiat.DataSource = pagedData;
    outerDataLiat.DataBind();

}

  protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
 {
    if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType == ListItemType.AlternatingItem))
    {
        Label lbl = (Label)e.Item.FindControl("hiddenLable");
        string idfromindex = lbl.Text;
        DataList lst2 = (DataList)e.Item.FindControl("innerDataLiat");
        SqlDataSource ds = new SqlDataSource();
        DataTable mydt = new DataTable();

        dataset t = setinnerDataList(idfromindex);
        tb2 = t;
        int sumqty = 0;
        double sumprice = 0;
        for (int i = 0; i &lt; t.Rows.Count; i++)
        {
            sumprice += Convert.ToDouble(t.Rows[i]["p_price"]) * Convert.ToInt32(t.Rows[i]["qty"]);
             sumqty += Convert.ToInt32(t.Rows[i]["qty"]);
        }
        Label lbl14 = (Label)e.Item.FindControl("Label14");
        lbl14.Text = sumqty.ToString();
        Label lbl15 = (Label)e.Item.FindControl("Label15");
        lbl15.Text = sumprice.ToString();

          Label pname = (Label)lst2.FindControl("pname");
        Label qty = (Label)lst2.FindControl("qty");
        Label price = (Label)lst2.FindControl("unit_price");
        DataRow[] dr = t.Tables[0].Select("idfromIndex = '" + idfromindex + "'");//new DataRow[t.Tables[0].Rows.Count]; //=  //This will select all rows where the Name Column has value MAK
        for (int i = 0; i < t.Tables[0].Rows.Count; i++)
        {
            dr[i] = t.Tables[0].Rows[i];
        }
        for (int i = 0; i < dr.Length; i++)
        {
            pname.Text = dr[i]["pname"].ToString();
            price.Text = dr[i]["p_price"].ToString();
            qty.Text = dr[i]["qty"].ToString();
        }

    }
}

  private dataset setinnerDataList(string idfromindex)
 {

    SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["mobile_storeConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = myConnection;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT [pname], [p_price], [idfromIndex], [qty] FROM [factors] WHERE ([idfromIndex] = " + idfromindex + ") ";
    DataView MyDv = new DataView();
    dataset dt = new DataTable();
    try
    {
        myConnection.Open();
        SqlDataReader dr = cmd.ExecuteReader();

        dt.Load(dr);
        dr.Close();

    }
    catch (Exception EXP)
    {

    }
    finally
    { myConnection.Close(); }

    return dt;
 }</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:14:27.203

**您必须为外部 DataList**实现***OnItemDataBound***方法，以便您可以将**dataSource 分配给内部 DataList**

 ****```
<asp:DataList ID="outerDataList" runat="server" OnItemDataBound="outerRep_ItemDataBound"> 
```

在代码中你必须这样做

```
protected void outerRep_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item)
        {
            DataRowView drv = e.Item.DataItem as DataRowView;
            DataList innerDataList = e.Item.FindControl("innerDataList") as DataList;
            innerDataList.DataSource = drv.CreateChildView("CategoriesRelation");
            innerDataList.DataBind();
        }
    } 
```

有关更多详细信息，您可以在此处找到工作示例[Nested DataList](http://www.c-sharpcorner.com/UploadFile/rohatash/nested-datalist-in-Asp-Net/)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:32:19.770

> 感谢 AYK 的帮助，当我以这种方式更改它时它起作用了：

```
 protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
   {
   if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType == ListItemType.AlternatingItem))
    {
        DataList dls1 = (DataList)sender;
        Label lbl = (Label)e.Item.FindControl("hiddenLable");
        string idfromindex = lbl.Text;
        DataList lst2 = (DataList)e.Item.FindControl("innerDataLiat");
        Panel pnl = (Panel)e.Item.FindControl("Panel1");           
         t = setinnerDataList(idfromindex);
        int sumqty = 0;
        double sumprice = 0;

        for (int i = 0; i < t.Tables[0].Rows.Count; i++)
        {
            sumprice += Convert.ToDouble(t.Tables[0].Rows[i]["p_price"]) * Convert.ToInt32(t.Tables[0].Rows[i]["qty"]);
            sumqty += Convert.ToInt32(t.Tables[0].Rows[i]["qty"]);

        }
        Label lbl14 = (Label)e.Item.FindControl("Label14");
        lbl14.Text = sumqty.ToString();
        Label lbl15 = (Label)e.Item.FindControl("Label15");
        lbl15.Text = sumprice.ToString();
        lst2.DataSource = t;
        lst2.DataBind();
     }
    }  

       <asp:DataList ID="innerDataLiat" runat="server" RepeatColumns="1" 
            BackColor="#CCCCCC" 
            CellPadding="4" CellSpacing="2" ForeColor="Black" GridLines="Both" OnItemDataBound="DataList2_ItemDataBound"  >
            <FooterStyle BackColor="#CCCCCC"  />
            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
            <ItemStyle BackColor="White" />
        <ItemTemplate >
        <table style="width: 100%;" ></table>
        <table style="width: 100%;" id="tbl1">
            <tr>
                <td>
                    &nbsp;product name:
                </td>
                <td>
                    &nbsp;<asp:Label ID="pname" runat="server" Text='<%# Eval("pname") %>'></asp:Label>
                </td>
                <td>
                    &nbsp;quantity :
                </td>
                <td>
                    &nbsp;<asp:Label ID="qty" runat="server" Text='<%# Eval("qty") %>'></asp:Label>
                </td>
                <td>
                    &nbsp;unit price:
                </td>
                <td>
                    &nbsp;<asp:Label ID="unit_price" runat="server" Text='<%# Eval("p_price") %>' ></asp:Label>
                </td>

            </tr>

        </table>
                   </ItemTemplate> 

        </asp:DataList> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T09:46:56.723

您尚未为 inner 事件定义`DataList2_ItemDataBound`处理程序。您还需要为内部设置控制值，就像在处理程序中一样。`ItemDataBound``DataList``DataList``DataList1_ItemDataBound`

编辑：在下面添加了更多详细信息：

```
 protected void DataList2_ItemDataBound(object sender, DataListItemEventArgs e)
 {
    if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType == ListItemType.AlternatingItem))
    {
       /*Algorithm to implement in this space :
           1\. Find a Label control using FindControl.
           2\. If label is not null, set its text.
           3\. Do this for all controls which are inside your inner data list.
*/
    } 
```****

# android - 如何使用按钮单击Android将语音短信发送到另一个联系人号码

> ID：14029144
> 
> 赞同：1
> 
> 时间：2012-12-25T08:53:06.333
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

如何使用按钮 onclick 将语音短信发送到另一个联系人号码，我也想在这里自动安排，比如一旦用户点击按钮，然后语音呼叫需要每 1 分钟重复发送一次。

请帮我提供一些指导和教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:05:17.373

你应该看看下面的链接

[http://code.google.com/p/google-voice-java/w/list](http://code.google.com/p/google-voice-java/w/list)

[编辑 1]

对于重复任务：

```
new Timer().scheduleAtFixedRate(task, after, interval); 
```

task 是要执行的方法

在初始执行时间之后

（间隔重复执行的时间）

[编辑 2]

```
package com.tutorialspoint;

import java.util.*;

public class TimerDemo {
   public static void main(String[] args) {
      // creating timer task, timer
      TimerTask tasknew = new TimerScheduleFixedRate();
      Timer timer = new Timer();

      // scheduling the task at fixed rate
      timer.scheduleAtFixedRate(tasknew,new Date(),1000);      
   }
   // this method performs the task
   public void run() {
      System.out.println("working at fixed rate");      
   }    
} 
```

让我们编译并运行上面的程序，这将产生以下结果。

以固定费率工作

以固定费率工作

以固定费率工作

以固定费率工作等等......

# iphone - Xcode 忽略了我的一些行

> ID：14029149
> 
> 赞同：0
> 
> 时间：2012-12-25T08:53:46.640
> 
> 标签：iphone, xcode

我的代码中有一部分调用了不同类的方法。

**不同的类是单例。**

我对此没有任何问题，`class`直到`today`一切正常。我不知道为什么，但是在我做了一些微不足道的更改之后`today`，代码似乎忽略了我的一些代码。似乎一切正常，它通过了所有行，但是如果我在我的单例类的一个方法中放置一个断点，它不会停止。它只是不调用这些方法。

**有谁知道为什么会这样？**

我尝试清理项目，尝试退出`Xcode`，到目前为止没有任何帮助。

这是我在单例“.m”中的方法的示例：

```
-(void)setUserCurrentLocationWithLatitude:(NSNumber *)latitude andLongitude:(NSNumber *)longitude andUserIndex:(NSNumber *)userIndex{
    NSMutableArray* tempPlayersArray = [NSMutableArray arrayWithArray: [[NSUserDefaults standardUserDefaults] arrayForKey: @"kgpsUsersArray"]];

    NSMutableDictionary * userTempDict = [[NSMutableDictionary alloc] initWithDictionary:[tempPlayersArray objectAtIndex:[userIndex integerValue]]];

    NSLog(@"latitude = %f",[latitude floatValue]);

    [userTempDict setObject:latitude forKey:@"latitude"];
    [userTempDict setObject:longitude forKey:@"longitude"];

    [defaults setObject:tempPlayersArray forKey:@"kgpsUsersArray"];

    [defaults synchronize];
} 
```

这就是它在“.h”文件中的定义方式：

```
-(void)setUserCurrentLocationWithLatitude:(NSNumber *)latitude andLongitude:(NSNumber *)longitude andUserIndex:(NSNumber *)userIndex; 
```

在我的 viewController.m 文件中，单例被称为初始化，如下所示：

```
#import "PlayersData.h"
usersData = [PlayersData sharedInstance]; 
```

该方法的调用如下：

```
[usersData setUserCurrentLocationWithLatitude:[NSNumber numberWithFloat:32.125493] andLongitude:[NSNumber numberWithFloat:34.858962] andUserIndex:[NSNumber numberWithInt:j]]; 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:07:24.110

可能没有创建singelton。调试它，以确保它不为零。

# sql-server - 多少数据来优化我们的查询

> ID：14029155
> 
> 赞同：1
> 
> 时间：2012-12-25T08:54:24.283
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2, query-optimization

我有一张带有这种结构和索引的表

```
CREATE TABLE [dbo].[Report4](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Mesc] [nvarchar](50) NULL,
    [Line] [nvarchar](5) NULL,
    [Unit] [nvarchar](5) NULL,
    [Description] [nvarchar](500) NULL,
    [ST_CODE] [nvarchar](5) NULL,
    [PbsNo] [nvarchar](50) NULL,
    [PbsDate] [nvarchar](10) NULL,
    [PbsQty] [nvarchar](10) NULL,
    [PbsQtyRec] [nvarchar](10) NULL,
    [QtyConsum1] [nvarchar](10) NULL,
    [QtyConsum2] [nvarchar](10) NULL,
    [QtyConsum3] [nvarchar](10) NULL,
    [QtyConsum4] [nvarchar](10) NULL,
    [QtyConsum5] [nvarchar](10) NULL,
    [Type] [nvarchar](20) NULL,
    [InvQty] [nvarchar](10) NULL,
    [TypeRequest] [nvarchar](50) NULL,
    [HeaderId] [bigint] NULL,
    [LOCATION] [nvarchar](10) NULL,
 CONSTRAINT [PK_Report4] PRIMARY KEY CLUSTERED
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [HeaderId] ON [dbo].[Report4]
(
    [HeaderId] ASC
)
INCLUDE ( [Id],
[Mesc],
[Line],
[Unit],
[Description],
[ST_CODE],
[PbsNo],
[PbsDate],
[PbsQty],
[PbsQtyRec],
[QtyConsum1],
[QtyConsum2],
[QtyConsum3],
[QtyConsum4],
[QtyConsum5],
[Type],
[InvQty],
[TypeRequest]) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [HeaderIdRAll] ON [dbo].[Report4]
(
    [HeaderId] ASC
)
INCLUDE ( [Id],
[Mesc],
[Line],
[Unit],
[Description],
[ST_CODE],
[PbsNo],
[PbsDate],
[PbsQty],
[PbsQtyRec],
[QtyConsum1],
[QtyConsum2],
[QtyConsum3],
[QtyConsum4],
[QtyConsum5],
[Type],
[InvQty],
[TypeRequest]) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [LineNOIRHeaderId] ON [dbo].[Report4]
(
    [Line] ASC
)
INCLUDE ( [HeaderId])
WHERE ([line]='I')
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [LineNoRHeaderId] ON [dbo].[Report4]
(
    [Line] ASC
)
INCLUDE ( [HeaderId])
WHERE ([line]='H')
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [LineNoRMesc] ON [dbo].[Report4]
(
    [Line] ASC
)
INCLUDE ( [Mesc])
WHERE ([line]='I')
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO
CREATE NONCLUSTERED INDEX [MescRAll] ON [dbo].[Report4]
(
    [Mesc] ASC
)
INCLUDE ( [Id],
[Line],
[Unit],
[Description],
[ST_CODE],
[PbsNo],
[PbsDate],
[PbsQty],
[PbsQtyRec],
[QtyConsum1],
[QtyConsum2],
[QtyConsum3],
[QtyConsum4],
[QtyConsum5],
[Type],
[InvQty],
[TypeRequest],
[HeaderId]) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

我想为此表运行此查询

```
ALTER PROCEDURE [dbo].[SPSelectReport2] (@StringWhereParameter nvarchar(4000),@PageIndex int,@PageSize int )
AS
BEGIN

    SET NOCOUNT ON;

-- َ Begin Of Transaction
begin tran

declare @from int=(@PageSize*(@PageIndex-1))+1
declare @to int=(@PageIndex*@PageSize)

declare @Query nvarchar(max)
set @Query=' select 

distinct id, [Mesc], [Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[StCode]
      ,[PlanCode]
      ,[MIN]
      ,[MAX]
      ,[LastDateConsum]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[TypeRequest]
      ,[HeaderId]
      ,LOCATION
 from (

SELECT *, ROW_NUMBER() OVER(ORDER BY Id) ROW_NUM
  FROM(
((SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[StCode]
      ,[PlanCode]
      ,[MIN]
      ,[MAX]
      ,[LastDateConsum]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[TypeRequest]
      ,[HeaderId]
      ,LOCATION
  FROM [MyMaterialDB].[dbo].[Report2]
  WHERE headerid IN(SELECT HeaderId FROM [MyMaterialDB].[dbo].[Report2] WHERE line=''H'''+ @StringWhereParameter+'))
  UNION
  (
    (SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[StCode]
      ,[PlanCode]
      ,[MIN]
      ,[MAX]
      ,[LastDateConsum]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[TypeRequest]
      ,[HeaderId]
      ,LOCATION
  FROM [MyMaterialDB].[dbo].[Report2]
  WHERE mesc IN(SELECT mesc FROM [MyMaterialDB].[dbo].[Report2] WHERE line=''I''' +@StringWhereParameter+'))
  UNION
  (SELECT Id, [Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[StCode]
      ,[PlanCode]
      ,[MIN]
      ,[MAX]
      ,[LastDateConsum]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[TypeRequest]
      ,[HeaderId]
      ,LOCATION
  FROM [MyMaterialDB].[dbo].[Report2]
  WHERE mesc IN(SELECT HeaderId FROM [MyMaterialDB].[dbo].[Report2] WHERE line=''I'''+@StringWhereParameter+')
  )))) a)b where b.ROW_NUM between '+CAST(@from as varchar(10))+' and '+CAST(@to as varchar(10))

  -- Order by Mesc,Line,unit
 exec(@Query)
 --print @Query

--

 if @@error = 0    
 Commit Tran    
 Else   
 rollback tran
End 
```

进入这个表我有超过 1000000 条记录，当运行这个 sp 时，它需要十分钟或更长时间。如何优化结构或查询。请帮我。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:19:06.467

对于初学者，您必须执行以下操作（我认为只有这些操作才能将您的查询执行时间缩短到不到一分钟）：

*   删除每个`in clause`. `select ... from ... where a in (select ...)`a) 非常非常慢，b) 很危险，因为它会使您的 sql server 内存不足——尤其是对于像你这样的大型数据集。您必须将所有 in 子句更改为`left outer joins`，这很容易做到。
*   删除`distinct clause`. 这会强制您的查询按（在程序后面）进行排序，并且通常也很慢。尝试改写您的查询，以便记录已经不同
*   只要您有不同的数据，您还必须更改`union`为`union all`. 联合与`distinct union`我之前的声明相同。如果您使用`union all`，您将看到查询的巨大改进......只要您可以使您的数据不需要区分......

如果您设法在之前的 3 个更改中至少进行 2 个更改，我认为您会看到很大的改进。如果你能处理所有这些，你将有一个非常快速的查询。

而且，不要费心将您的 sql exec 更改为“预编译”存储过程。我认为这样做不会使您获得显着改善（我看到您在哪里有动态，因此无论如何这都不是申请人）。

请告诉我这是否有效。

# java - 在java中的拆分窗格上添加jpanels

> ID：14029158
> 
> 赞同：1
> 
> 时间：2012-12-25T08:54:58.047
> 
> 标签：java, swing, jpanel, jsplitpane

我正在尝试在单个 JFrame 表单上添加三个面板。如果我只添加三个面板，它们将被显示，但如果我在拆分窗格上添加面板，则不会显示任何内容，这表明以下代码中的错误

```
 import javax.swing.*;
 import java.awt.*;
 class paneltest extends JFrame{
 paneltest()
 {
   Container cp=this.getContentPane();
   cp.setLayout(null);
   panel1 p1= new panel1();
   panel2 p2= new panel2();
   panel3 p3= new panel3();
   cp.add(p1);
   cp.add(p2);
   cp.add(p3);
   Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();

   p1.setBounds(0,0,screenSize.width/3,screenSize.height);
   p2.setBounds(screenSize.width/3,0,screenSize.width/3,screenSize.height);
   p3.setBounds(2*(screenSize.width/3),0,screenSize.width/3,screenSize.height); 

   try{

       JSplitPane splitPaneLeft = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
       JSplitPane splitPaneRight = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
        splitPaneLeft.setLeftComponent( p1 );
        splitPaneLeft.setRightComponent( p2 );
        splitPaneRight.setLeftComponent( splitPaneLeft );
        splitPaneRight.setRightComponent( p3 );

        JPanel panelSplit = new JPanel();
        panelSplit.add(splitPaneRight);
        cp.add(panelSplit);
       panelSplit.setVisible(true);
       }
    catch(Exception ex)
    {

     JOptionPane.showMessageDialog(null,"exception occured"+ex);   

     }
   }
     public static void main(String arsg[])
    {

       paneltest frm= new paneltest();
       frm.show ();

       }

       }
       class panel1 extends JPanel
        {
        panel1()
           {
           setLayout(new FlowLayout());
           JLabel l1= new JLabel("panel1");
           add(l1);

           }    

           }

         class panel2 extends JPanel
        { 
         panel2()
           {
           setLayout(new FlowLayout());
           JLabel l1= new JLabel("panel2");
          add(l1);

           }    

         }
      class panel3 extends JPanel
       {
       panel3()
        {
          setLayout(new FlowLayout());
          JLabel l1= new JLabel("panel3");
          add(l1);

         }    

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T08:59:41.283

删除线`cp.setLayout(null)`。这将解决最初的问题。

在那之后：

*   缩进代码
*   尊重 Java 命名约定
*   如果您之后将面板添加到拆分窗格，请不要将它们添加到内容窗格。可以将组件添加到单个父级。将它们添加到两者是没有意义的
*   不要使用`setBounds()`. 这就是布局管理器的作用
*   不要扩展 JPanel 和 JFrame。使用它们
*   尊重[Swing 的线程策略](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)。
*   别`catch (Exception)`

# linux - bash if 语句

> ID：14029159
> 
> 赞同：0
> 
> 时间：2012-12-25T08:55:00.320
> 
> 标签：linux, bash, sh

我找到了这个 bash 脚本（有效）。这个脚本起着重要的作用。脚本的整体代码质量很好。我只是想知道以下构造是否有任何意义？

```
if [ "${G_FILE}" != "" ] && [ -f "${G_FILE}" ] && [ -r "${G_FILE}" ]; then
.... 
```

手册说：

```
[ -f FILE ] True if FILE exists and is a regular file.
[ -r FILE ] True if FILE exists and is readable.
[ STRING1 != STRING2 ]  True if the strings are not equal. 
```

我的想法：

1.  `[ -n "${G_FILE}" ]`或`[ "${G_FILE}" ]`应该代替`[ "${G_FILE}" != "" ]`.
2.  只会`[ -r "${G_FILE}" ]`做同样的事情。

我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:01:31.287

首先，只有在您需要严格的 POSIX 一致性`[`时才有意义。如果它们的选项参数被正确引用，并且测试应该始终为假，因此第一个测试是无用的。例如命名管道、套接字等将是正确的。将事物限制在常规文件中。`[[``-f``-r``-r``-f`

通常，您不需要检查文件是否真正可读。该检查可以与测试捆绑在一起，以测试使用该文件的东西在大多数情况下是否成功。失败的重定向是错误的，最好以失败时返回适当状态的方式编写函数，而不是首先测试可读文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:58:14.777

除非您特别*要求*它是常规文件，否则仅使用`-r`就足够了。

# javascript - JavaScript 编码从“UTF-8”到“cp1252”

> ID：14029161
> 
> 赞同：1
> 
> 时间：2012-12-25T08:55:25.087
> 
> 标签：javascript, encode

我想用 JavaScript 将字符串从“UTF-8”编码为“cp1252”。

我有一个作为 utf-8 发送的 HTML 文档，并且在该文档中有一个隐藏字段保留 JsonString，其中包含“UTF-8”字符，例如“二”。我的 Java Bean 在服务器端没有收到正确的值，它得到“？”。

```
 <h:inputHidden id="hiddenPropertiesValues" 
        value="#{Bean.newProperties}"/> 
```

Java Bean 类[sscce](http://sscce.org/)

```
 public void setNewProperties( String newProperties ) {
        this.newProperties = newProperties;
    } 
```

我尝试先通过java代码将JsonString转码为“cp1252”。然后将转码后的 JsonString 输入到隐藏字段中。Bean 可以获得正确的字符。

所以我想我可以通过使用 JavaScript 将字符串从“UTF-8”编码为“cp1252”来解决这个问题。

Html 和 Java Bean 文件都使用“UTF-8”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:45:18.263

首先，这是不可能的，因为 Unicode 包含*的*字符比 ISO8859-1 多得多。

其次，您应该（几乎）永远不需要担心编码，因为浏览器会为您处理。在内部，无论文档编码是什么，JS 总是使用 UTF-16。当你使用`document.write`DOM 操作时，当`form`需要某种编码时，浏览器会负责转换。

我认为你真正应该做的是改进你的服务器端实现并在那里切换到 UTF-8。

# javascript - JavaScript 使用 preloadJS 预加载图像

> ID：14029162
> 
> 赞同：0
> 
> 时间：2012-12-25T08:55:30.550
> 
> 标签：javascript, image, html, canvas, preload

我正在用 HTML 5 和 JS 制作一个骰子游戏。现在我需要预加载骰子图像。我正在使用 preloadJS 库。所以我的问题是如何在不为每个骰子编写相同代码的情况下预加载两个或多个清单？请看我的例子。

**我的清单文件是：dice_twos、dice_threes、dice_fours、dice_fives、dice_sixes。** **一个骰子有 50 张图片**

```
var n=0;
var diceRegX = 45;//X registration point for dice 
var diceRegY = 45;//Y registration point for dice 

for(var i=0; i<50;i++){
    dice_twos.push({ src: "Assets/DiceImages/ONE_Main." + i + ".png", id: "dice" + i, reelImg: false });
    dice_threes.push({ src: "Assets/DiceImages/ONE_Main." + i + ".png", id: "dice" + i, reelImg: false });
    dice_fours.push({ src: "Assets/DiceImages/ONE_Main." + i + ".png", id: "dice" + i, reelImg: false });
    dice_fives.push({ src: "Assets/DiceImages/ONE_Main." + i + ".png", id: "dice" + i, reelImg: false });
    dice_sixes.push({ src: "Assets/DiceImages/ONE_Main." + i + ".png", id: "dice" + i, reelImg: false });
}
preload = new createjs.PreloadJS();
preload.onFileLoad = handleFileLoad;
preload.onProgress = handleOverallProgress;
preload.onFileProgress = handleFileProgress;
preload.onError = handleFileError;

function stop() {
    if (preload != null) {
        preload.close();
    }
}

function loadAll() {
    while (dice_twos.length > 0) {
        loadAnother();
    }
}

function loadAnother() {
    var item1 = dice_twos.shift();
    handleFileLoad(item1);
}

// File complete handler 
function handleFileLoad(event1) {
    dice_1[n] = new createjs.Bitmap(event1.src);
    dice_1[n].name = ('dice' + (n + 1));
    dice_1[n].regX = (diceRegX - 5);
    dice_1[n].regY = (diceRegY - 5);
    dice_1[n].x = (canvas.width + 80);
    dice_1[n].y = (canvas.height / 2);
    n++;
} 
```

我试图将另一个参数传递给 handleFileLoad 函数，但似乎不起作用。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:10:46.523

大家好这是我需要的解决方案。我希望这会对某人有所帮助......干杯

```
var dice_twos = new Array();
        var dice_threes = new Array();
        var dice_fours = new Array();
        var dice_fives = new Array();
        var dice_sixes = new Array();   
        var dice_1 = new Array();
        var dice_2 = new Array();
        var dice_3 = new Array();
        var dice_4 = new Array();
        var dice_5 = new Array();
        var dice_6 = new Array();
        var i = 0;
        var n = 0;
        var item1;
        var item2;
        var item3;
        var item4;
        var item5;
        var item6;

     for (var i = 1; i <= 50; i++) {
                        dice_twos.push({ src: "Assets/DiceImages/TWO_Main." + i + ".png", id: "dice" + i, reelImg: false });
                        dice_threes.push({ src: "Assets/DiceImages/THREE_Main." + i + ".png", id: "dice" + i, reelImg: false });
                        dice_fours.push({ src: "Assets/DiceImages/FOUR_Main." + i + ".png", id: "dice" + i, reelImg: false });
                        dice_fives.push({ src: "Assets/DiceImages/FIVE_Main." + i + ".png", id: "dice" + i, reelImg: false });
                        dice_sixes.push({ src: "Assets/DiceImages/SIX_Main." + i + ".png", id: "dice" + i, reelImg: false });
                    }
            }
            // Create a preloader. There is no manfest added to it up-front, we will add items on-demand.
            preload = new createjs.PreloadJS();
            preload.onFileLoad = handleFileLoad;
            preload.setMaxConnections(5);
            loadAll();
        }

        function stop() {
            if (preload != null) { preload.close(); alert("preloader closed..."); }
        }
        function loadAll() {
            while (dice_ones.length > 0) {
                loadAnother();
            }
        }
        function loadAnother() {
            // Get the next manifest item, and load it
            item1 = dice_ones.shift();
            item2 = dice_twos.shift();
            item3 = dice_threes.shift();
            item4 = dice_fours.shift();
            item5 = dice_fives.shift();
            item6 = dice_sixes.shift();
            handleFileLoad(item1);

        }
        // File complete handler
        function handleFileLoad(event1) {
            dice_1[n] = new createjs.Bitmap(event1.src);
            dice_1[n].name = ('dice' + (n + 1));
            dice_1[n].regX = (diceRegX - 5);
            dice_1[n].regY = (diceRegY - 5);
            dice_1[n].x = (canvas.width + 80);
            dice_1[n].y = (canvas.height / 2);
            dice_1[n].in_holder = (-1);

            dice_2[n] = new createjs.Bitmap(item2.src);
            dice_2[n].name = ('dice' + (n + 1));
            dice_2[n].regX = (diceRegX - 5);
            dice_2[n].regY = (diceRegY - 5);
            dice_2[n].x = (canvas.width + 80);
            dice_2[n].y = (canvas.height / 2);
            dice_2[n].in_holder = (-1);

            dice_3[n] = new createjs.Bitmap(item3.src);
            dice_3[n].name = ('dice' + (n + 1));
            dice_3[n].regX = (diceRegX - 5);
            dice_3[n].regY = (diceRegY - 5);
            dice_3[n].x = (canvas.width + 80);
            dice_3[n].y = (canvas.height / 2);
            dice_3[n].in_holder = (-1);

            dice_4[n] = new createjs.Bitmap(item4.src);
            dice_4[n].name = ('dice' + (n + 1));
            dice_4[n].regX = (diceRegX - 5);
            dice_4[n].regY = (diceRegY - 5);
            dice_4[n].x = (canvas.width + 80);
            dice_4[n].y = (canvas.height / 2);
            dice_4[n].in_holder = (-1);

            dice_5[n] = new createjs.Bitmap(item5.src);
            dice_5[n].name = ('dice' + (n + 1));
            dice_5[n].regX = (diceRegX - 5);
            dice_5[n].regY = (diceRegY - 5);
            dice_5[n].x = (canvas.width + 80);
            dice_5[n].y = (canvas.height / 2);
            dice_5[n].in_holder = (-1);

            dice_6[n] = new createjs.Bitmap(item6.src);
            dice_6[n].name = ('dice' + (n + 1));
            dice_6[n].regX = (diceRegX - 5);
            dice_6[n].regY = (diceRegY - 5);
            dice_6[n].x = (canvas.width + 80);
            dice_6[n].y = (canvas.height / 2);
            dice_6[n].in_holder = (-1);
            n++;                
        } 
```

# c# - 从 xml 文档中提取最后 10 个元素

> ID：14029165
> 
> 赞同：0
> 
> 时间：2012-12-25T08:55:57.370
> 
> 标签：c#, linq, windows-phone-7, linq-to-xml

我正在尝试从我的 xml 文档中提取最后 10 个元素，我正在使用此代码来解析它：

```
slideView.ItemsSource = 
    from channel in xmlItems.Descendants("album") 
    let id = channel.Element("catid")
    let tit = channel.Element("name")
    let des = channel.Element("picture")
    orderby (int) id descending 
    select new onair
    {
        title = tit == null ? null : tit.Value,
        photo = des == null ? null : des.Value,
    }; 
```

请帮忙:)谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:09:47.303

此代码将返回按以下顺序排序的最后 10 个元素`catid`：

```
slideView.ItemsSource = 
    xmlItems.Descendants("album") 
            .OrderByDescending(channel => (int)channel.Element("catid"))
            .Select(channel => new onair
            {
                title = (string)channel.Element("name"),
                photo = (string)channel.Element("picture")
            }).Take(10); 
```

与查询语法相同（好吧，几乎是查询语法 - Take 运算符没有关键字）：

```
slideView.ItemsSource = 
    (from channel in xmlItems.Descendants("album")     
     orderby (int)channel.Element("catid") descending 
     select new onair
     {
         title = (string)channel.Element("name"),
         photo = (string)channel.Element("picture")
     }).Take(10); 
```

# ios - 在 Vuforia 的 iOS FrameMarker 上渲染声音和 3D 模型

> ID：14029167
> 
> 赞同：1
> 
> 时间：2012-12-25T08:56:07.567
> 
> 标签：ios, render, audio, framemaker

我正在尝试在 FrameMarker 中渲染声音和 3D 模型。比如有A1.h A2.h A3.h <----- 3D模型 A4.wav A5.wav <------声音

FrameMarker ID 0,1,2 用于 A1-A3.h（3D 模型）

如何在 FrameMarker ID 3,4 的代码中添加声音

下面是渲染 3D 模型的代码：

```
- (void) setup3dObjects

{

    [self add3DObjectWith:A1NumVerts ofVertices:A1Verts normals:A1Normals texcoords:A1TexCoords

                     with:NUM_R_OBJECT_INDEX ofIndices:RobjectIndices usingTextureIndex:0];

    [self add3DObjectWith:A2NumVerts ofVertices:A2Verts normals:A2Normals texcoords:A2TexCoords

                     with:NUM_R_OBJECT_INDEX ofIndices:RobjectIndices usingTextureIndex:1];

    [self add3DObjectWith:A3NumVerts ofVertices:A3Verts normals:A3Normals texcoords:A3TexCoords

                     with:NUM_R_OBJECT_INDEX ofIndices:RobjectIndices usingTextureIndex:2];

} 
```

# opencv - Fern 平面物体检测 OpenCV

> ID：14029168
> 
> 赞同：1
> 
> 时间：2012-12-25T08:56:12.953
> 
> 标签：opencv, object-detection, feature-extraction

我正在尝试运行平面对象检测算法 FERN。这是我正在使用的代码，我的问题是是否有人可以告诉我我的错是什么以及我如何正确训练蕨类植物。

首先，我在 FAST 特征检测器的帮助下获得了参考图像的关键点。完成后，我初始化一个 FernDescriptorMatcher 并添加带有关键点的图像并调用 train 函数。有问题？

```
FernDescriptorMatcher fern;
fern.add(images,keypoints);
fern.train(); 
```

之后，我用我在其中训练过的对象加载另一个图像并获取关键点，以便我可以通过调用 match 函数来匹配它们。

```
fast.detect(testimage,keypoints_testimage);
fern.match(testimage,keypoints_testimage,correspondence); 
```

我不明白的是为什么匹配功能与训练功能花费相同的时间并且没有可行的结果。那么我如何正确使用 FernDescriptorMatcher 类？

有人可以告诉我如何正确使用它吗？

# java - freeswitch 中的类加载错误

> ID：14029171
> 
> 赞同：3
> 
> 时间：2012-12-25T08:56:28.100
> 
> 标签：java, classloader, freeswitch

加载后`mod_java.so`，我收到异常`class not found in org.freeswitch.Launcher`

在 freeswitch 控制台上获取以下异常..我已经在`java.conf.xml`.

```
Exception in thread "Thread-7" java.lang.ClassNotFoundException: org/freeswitch/Launcher.class
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.freeswitch.Launcher.launch(Launcher.java:65) 
```

主要是我使用`JavaSession`swig 包类进行 dtmf 识别..

请任何人告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:10:36.573

在您的 java.conf.xml 中删除或注释掉任何启动或关闭类。关闭任何正在运行的 freeswitch 实例并再次运行它。Mod_java 这次将完美加载。

# android - Android 应用内结算国外

> ID：14029175
> 
> 赞同：1
> 
> 时间：2012-12-25T08:57:25.170
> 
> 标签：android, in-app-purchase, in-app-billing

我目前正在尝试集成一项服务，使我的用户能够购买应用内虚拟产品。

但是，我尝试将 Google 的应用内结算服务集成到我的应用中，但它需要一个 Google Checkout 商家帐户，由于某种原因，南非不支持该帐户。所以我可以放弃这个想法，除非我在受支持的国家/地区之一拥有银行账户？

我只是看看PayPal。这是一个不错的选择吗？

所以我的问题是：无论如何我仍然可以以某种方式让 Google 应用内计费工作吗？贝宝是一个不错的选择吗？（我猜这会限制潜在客户） IAP 还有其他好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T04:15:51.813

阅读开发者协议并在必要时咨询律师，但只需将*虚拟*物品的所有计费都需要通过 Google Checkout/Wallet。如果您通过 Google Play 分发，PayPal 将违反这些条款。

唯一可靠的方法是在支持付费应用的国家/地区开设开发者和银行账户。

# python - 动态数组如何存储不同的数据类型？

> ID：14029177
> 
> 赞同：0
> 
> 时间：2012-12-25T08:57:30.693
> 
> 标签：python, list

语言如何知道为每个元素保留多少空间？或者它是否保留了数据类型所需的最大空间？（谈论大浮点数）。那样的话是不是有点低效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:00:57.693

Python 只在列表中保留足够的空间来**引用**各种对象；*当对象被实例化*时，由对象的分配器为它们保留足够的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:02:14.747

Python 中的数组是通过`array`模块完成的。它们不存储不同的数据类型，它们存储特定数值的数组。

我想你的意思是`list`类型。它不包含值，它只包含对对象的引用，对象可以是任何类型的对象。

这些都没有为任何元素保留任何空间（嗯，它们确实如此，但这是内部实现细节）。当将元素添加到列表/数组时，它会为所需的元素添加空间。

列表类型确实比数组类型效率低，这也是数组类型存在的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T09:05:00.103

它是一个引用数组，仅存储对元素对象的引用。所以每个块的大小是特定的。

[http://docs.python.org/2/faq/design.html#how-are-lists-implemented](http://docs.python.org/2/faq/design.html#how-are-lists-implemented)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T12:12:31.897

在 C 语言术语中，Python 列表类似于`PyObject *mylist[100]`，除了它是动态分配的。它是一块连续的内存，用于存储对 Python 对象的引用。

# svn - 匿名 SVN 结帐，但验证提交

> ID：14029183
> 
> 赞同：6
> 
> 时间：2012-12-25T08:58:18.527
> 
> 标签：svn, apache, mod-auth

我正在使用 Httpd 设置 SVN 存储库。目前，我的存储库可通过 Httpd 获得，但任何人都可以签出并提交回来。我想使用 Microsoft Active Directory 身份验证限制提交操作。

我在我的`subversion.conf`.

```
<Location /repos>
   DAV svn

   # Directory containing all repository for this path
   SVNParentPath /srv/svn/repositories

   # List repositories colleciton
   SVNListParentPath On

   # Enable WebDAV automatic versioning
   SVNAutoversioning On

   # Repository Display Name
   SVNReposName "RepositoryName"

   # Do basic password authentication in the clear
   AuthType Basic

   # The name of the protected area or "realm"
   AuthName "RepositoryName"

   # Make LDAP the authentication mechanism
   AuthBasicProvider ldap

   # Make LDAP authentication is final
   AuthzLDAPAuthoritative off

   # Active Directory requires an authenticating DN to access records
   #AuthLDAPBindDN "ou=people,o=example,dc=com"

   # The LDAP query URL
   AuthLDAPURL "ldap://example.com:389/DC=com,DC=example,ou=people?uid(objectClass=*)" NONE

   # Read access to everyone
   Satisfy Any

   # Require a valid user
   Require valid-user

   # Authorization file
   AuthzSVNAccessFile /subversion/apache2/auth/repos.acl

   # Limit write permission to list of valid users.
   #<LimitExcept GET PROPFIND OPTIONS REPORT>
      # Require SSL connection for password protection.
      # SSLRequireSSL

      #AuthType Basic
      #AuthName "Authorization Realm"
      #AuthUserFile /etc/httpd/conf/.htpasswd
      #Require valid-user
   #</LimitExcept>
</Location> 
```

使用上述配置，它每次都要求提供凭据。此外，当提供时，存储库是不可访问的。提供正确的凭据后，我收到 500 内部服务器错误。

我确实检查了日志文件，但没有任何内容表明实际原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T22:43:36.910

为了允许公共阅读/结帐，您需要取消注释`<LimitExcept>`指令之间的位并注释其上方的单独`Require valid-user`行。

该指令`<LimitExcept GET PROPFIND OPTIONS REPORT>`告诉服务器内部的所有内容都不适用于任何`GET`,或对存储库的请求`PROPFIND`，这些请求用于签出/读取存储库。换句话说，如果您将这段代码放在您的 Apache 配置中，那么除了上述方法之外，它只需要一个有效用户（例如，如果请求提交，则它需要一个有效用户）：`OPTIONS``REPORT``PUT`

```
<LimitExcept GET PROPFIND OPTIONS REPORT>
    Require valid-user
</LimitExcept> 
```

在您的情况下，它可能看起来像这样（我只是稍微修改了您发布的配置，假设除了强制登录问题之外这是正确的（我没有用于测试它的 LDAP 服务器）。请注意`example.com`在您`AuthLDAPURL`的真实服务器中替换主持人）：

```
<Location /repos>
   DAV svn

   # Directory containing all repository for this path
   SVNParentPath /srv/svn/repositories

   # List repositories colleciton
   SVNListParentPath On

   # Enable WebDAV automatic versioning
   SVNAutoversioning On

   # Repository Display Name
   SVNReposName "RepositoryName"

   # Do basic password authentication in the clear
   AuthType Basic

   # The name of the protected area or "realm"
   AuthName "RepositoryName"

   # Make LDAP the authentication mechanism
   AuthBasicProvider ldap

   # Make LDAP authentication is final
   AuthzLDAPAuthoritative off

   # Active Directory requires an authenticating DN to access records
   #AuthLDAPBindDN "ou=people,o=example,dc=com"

   # The LDAP query URL
   AuthLDAPURL "ldap://example.com:389/DC=com,DC=example,ou=people?uid(objectClass=*)" NONE

   # Authorization file
   AuthzSVNAccessFile /subversion/apache2/auth/repos.acl

   # Limit write permission to list of valid users.
   <LimitExcept GET PROPFIND OPTIONS REPORT>
       SSLRequireSSL
       Require valid-user
   </LimitExcept>
</Location> 
```

只要你把它放在`Require valid-user`里面`LimitExcept`，一切都应该按照你的意愿工作。您可以将其余的身份验证配置放在`Location`指令之间的任何位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T09:27:33.620

行。我完成了第一部分。

参考[此处](http://wiki.centos.org/HowTos/Subversion)`6\. Access control lists`的部分，我在文件中添加了只读访问权限。`AuthzSVNAccessFile`

```
# Authorization file
AuthzSVNAccessFile /srv/svn/repos.acl 
```

`/srv/svn/repos.acl`文件内容

```
[/]
* = r 
```

现在，我所有的存储库都可以匿名访问。现在提交部分是剩余的。

现在我在提交时收到以下消息。

```
Commit failed (details follow):
Server sent unexpected return value (500 Internal Server Error) in response to 
MKACTIVITY request for '/repos/project1/!svn/act/783d45f7-ae05-134d-acb0-f36c007af59d' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:14:35.527

我见过的每个 Subversion 服务器：

*   允许匿名结帐而无需提交。
*   需要经过身份验证的签出并允许提交。

我相信 Subversion 提交过程必须如此。

*   接收身份验证凭据。
*   带有身份验证的结帐代码。
*   重新应用更改。
*   提交更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T11:50:27.773

我建议使用[Visual SVN Server](http://www.visualsvn.com/server/)。它支持[Active Directory](http://www.visualsvn.com/server/features/windows-auth/)。Visual Svn Server 安装 apache 和 svn 二进制文件。它还为 apache 创建了必要的 conf 文件。

使用您想要的功能安装它并检查它创建的 apache 配置文件。如果您可以在 Windows 框中运行，我还建议使用/购买它而不是维护您的 apache 服务器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-28T12:45:08.537

**只是一些注意事项**：

1.  我从未见过`SVNAutoversioning`在 Subversion 位置使用过
2.  阅读 Apache 错误日志可以提供更详细的信息，而不是“500 错误”以防出现问题
3.  我在这里读到了一些关于 CentOS 上 Subversion 问题的主题，与 Apache 进程的所有者有关（httpd 的某些进程具有不同的所有者，而不是另一个：nobody 和 httpd）：检查它`ps -au | grep`
4.  提交问题*通常*与权限不足有关：Apache 进程必须对存储库中的**所有文件具有写权限**
5.  最后但同样重要的是，优先级高于第 3-4 页 - 在使用`AuthzSVNAccessFile`至少一个用户|组的情况下，至少一个路径必须具有写入权限`... = rw`才能提交。我不知道，如何在 repos.acl 文件中写入继承自 AD 用户名

# java - 如何在 Java 类中执行 cmd 命令？

> ID：14029187
> 
> 赞同：1
> 
> 时间：2012-12-25T08:59:04.270
> 
> 标签：java, process, cmd, runtime.exec

我想在 java 代码中调用 cmd 命令。我说：

```
String str ="C:/uploaded_files/111.txt";
Process process = Runtime.getRuntime().exec(new String[]{"cmd.exe", "/c",str});
System.out.println(str); 
```

不要得到`111.txt`。这很奇怪，因为当这段代码`jsp`一切正常时。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:09:54.183

这段代码有什么问题。这是完美的工作。打开并显示文件 111.txt 的内容

```
try {
    String str ="C:/uploaded_files/111.txt";
    Process process = Runtime.getRuntime().exec(new String[]{"cmd.exe", "/c",str});
    System.out.println(str);
    } catch (Exception ex) {} 
```

请检查路径是否正确，目录和文件是否有遗漏或拼写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:06:39.897

我希望它不是**cmd.exe**请试试这个：

```
String[] command = new String[3];
command[0] = "cmd";
command[1] = "/c";
command[2] = "C:/uploaded_files/111.txt";

Process p = Runtime.getRuntime().exec (command); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T09:07:10.840

如果你想在记事本中打开文件，试试这个。

```
String file = "C:/uploaded_files/111.txt";

Runtime.getRuntime().exec("cmd", "/c", "notepad.exe", file); 
```

希望它是你想要的那个。

# javascript - 为什么canvas元素不能绑定事件？

> ID：14029189
> 
> 赞同：0
> 
> 时间：2012-12-25T08:59:38.210
> 
> 标签：javascript, jquery, html5-canvas

这是代码：

```
$('#insert_text').click(function(){
 var drawing_plate= $("#Drawing_Plate")[0];
 context = drawing_plate.getContext('2d');
 drawing_plate.bind('touchstart',insert_the_text);
}); 
```

我选择画布元素，将其分配给drawing_plate。但是铬抱怨说

`Uncaught TypeError: Object #<HTMLCanvasElement> has no method 'bind`

但是drawing_plate确实是一个jQuery对象，为什么它不拥有方法： `.bind()`...？

更新：请给出解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:01:20.363

您正在尝试调用仅对带有 DOM 对象的 jQuery 对象可用的方法。`Convert DOM object to jQuery object before calling jQuery object function`.

改变

```
 drawing_plate.bind('touchstart',insert_the_text); 
```

到

```
 $(drawing_plate).bind('touchstart',insert_the_text); 
```

# php - PHP 三元运算符给出意外的 T_echo

> ID：14029197
> 
> 赞同：1
> 
> 时间：2012-12-25T09:00:37.027
> 
> 标签：php, echo, ternary-operator

我的三元返回错误。我是否忘记了一些关于使用带有回声的 PHP 三元组的基本规则或怪癖？

```
isset($tag) ? 
    echo '<a href="#">' . $tag['firstname'] . '</a>' : null; 
```

上述三元组返回以下错误：

```
Parse error: syntax error, unexpected T_ECHO in /classes/Photo.php on line 216 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-25T09:02:04.283

你应该这样写：

```
echo (isset($tag) ? '<a href="#">' . $tag['firstname'] . '</a>' : ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-17T23:44:10.813

当您需要在表达式中显示文本时，请使用 print() 而不是 echo。

# linux - 通过 bash 自动将 iptables 中的 IP 地址列入白名单

> ID：14029212
> 
> 赞同：2
> 
> 时间：2012-12-25T09:02:11.697
> 
> 标签：linux, bash, iptables

我正在寻找将 IP 地址自动列入`iptables`. ip 地址和端口列表来自一个 JSON 文件`/accept-rules.json`，其格式如下：

```
[
  {
    "ip": "1.2.3.4",
    "cidr": 32,
    "protocol": "tcp",
    "port": 3306
  },
  {
    "ip": "2.4.5.6",
    "cidr": 32,
    "protocol": "tcp",
    "port": 80
  },
  {
    "ip": "5.6.7.8",
    "cidr": 32,
    "protocol": "tcp",
    "port": 443
  },
  {
    "ip": "6.8.3.1",
    "cidr": 32,
    "protocol": "tcp",
    "port": 53
  }
] 
```

我需要一个`bash`或`python`脚本来读取 json 文件并创建`ACCEPT`iptables 规则。`ACCEPT`基于上述内容的示例规则`json`应如下所示：

```
iptables -A INPUT -s 1.2.3.4/32 -p tcp -m tcp --dport 3306 -j ACCEPT
iptables -A INPUT -s 2.4.5.6/32 -p tcp -m tcp --dport 80 -j ACCEPT
iptables -A INPUT -s 5.6.7.8/32 -p tcp -m tcp --dport 443 -j ACCEPT
iptables -A INPUT -s 6.8.3.1/32 -p tcp -m tcp --dport 53 -j ACCEPT 
```

知道最好的编码方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:15:36.247

## 基于提供的语法的纯[bash](/questions/tagged/bash "显示标记为“bash”的问题")

有一个更干净的*纯 bash*版本。（没有`eval`）

```
declare -A iptArray
iptArray[action]='A'
getval() {
    [[ "$@" =~  \"([^\*]*)\"\ *:\ *\"?([^\",]*)\"?[,\ ]*$ ]] && \
        iptArray[${BASH_REMATCH[1]}]=${BASH_REMATCH[2]}
}
while read line;do
    getval $line
    [[ "$line" =~ } ]] && \
        echo iptables -${iptArray[action]} INPUT -p ${iptArray[protocol]} \
            -s ${iptArray[ip]}/${iptArray[cidr]} \
            --dport ${iptArray[port]} -j ACCEPT
  done < ipt_whitelist.json 
iptables -A INPUT -p tcp -s 1.2.3.4/32 --dport 3306 -j ACCEPT
iptables -A INPUT -p tcp -s 2.4.5.6/32 --dport 80 -j ACCEPT
iptables -A INPUT -p tcp -s 5.6.7.8/32 --dport 443 -j ACCEPT
iptables -A INPUT -p tcp -s 6.8.3.1/32 --dport 53 -j ACCEPT 
```

（删除`echo`以执行操作，而不仅仅是打印它）

## 使用工具在[bash](/questions/tagged/bash "show questions tagged 'bash'")下处理[json](/questions/tagged/json "显示标记为“json”的问题")`jq`

如您所知，必须在每个字段中找到名为`protocol`、和的值`ip`，您可以通过使用以下内容来确保排序和提取值：`cidr``port``jq`

```
i=0
while :;do
    for var in proto ip mlen port ;do
        read -r $var
        [ "${!var}" = "null" ] && break 2
    done < <(
      jq -r ".[$i].protocol,.[$i].ip,.[$i].cidr,.[$i].port" <whitelist.json
    )
    echo iptables -A INPUT -p $proto -s $ip/$mlen -dport $port -j ACCEPT
    ((i++))
done
iptables -A INPUT -p tcp -s 1.2.3.4/32 -dport 3306 -j ACCEPT
iptables -A INPUT -p tcp -s 2.4.5.6/32 -dport 80 -j ACCEPT
iptables -A INPUT -p tcp -s 5.6.7.8/32 -dport 443 -j ACCEPT
iptables -A INPUT -p tcp -s 6.8.3.1/32 -dport 53 -j ACCEPT 
```

（再次：删除`echo`以执行操作，而不仅仅是打印它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:26:25.713

这是一个python代码：

这将生成一个包含所有 iptable 条目的 bash 脚本文件“accept.sh”。

```
# accept.py

fp = open("accept-rules.json", "r")

data = fp.readlines()
fp1 = open("accept.sh", "w")

for line in data:

    if "{" in line:
        datum = {}
    elif "}" in line:
        s = "iptables -A INPUT -s " + datum["ip"] + "/" + datum["cidr"] + " -p " + datum["protocol"] + " -m " + datum["protocol"] + " --dport " + datum["port"] + " -j ACCEPT\n"
        fp1.write(s)
    elif "[" in line or "]" in line:
        continue
    else:
        datum[line.split(":")[0].strip().strip('"')] = line.split(":")[1].strip().strip(",").strip('"')

fp1.close()
fp.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:35:55.540

请注意，`iptables -A`将规则添加到表的末尾。匹配规则时，iptables 从上到下工作，第一个匹配获胜，所以如果您之前阻止了一个地址，那么将其列入白名单`-A`将不起作用（例如，许多默认规则集最后都有一个 blaket reject all）在这种情况下，用于`iptables -I`在开头插入规则。

```
#!/bin/bash

function getval {
    set -- $1
    RET=${2//[\",]/}
}
while read line
    do
        set -- $line
        if [[ "$1" == '"ip":' ]]
            then
                getval "$line"
                IPADDRESS=$RET
                read line
                getval "$line"
                CIDR=$RET
                read line
                getval  "$line"
                PROTOCOL=$RET
                read line
                getval "$line"
                PORT=$RET
                /sbin/iptables  -I INPUT -s "$IPADDRESS"/"$CIDR" -p "$PROTOCOL" -m "$PROTOCOL" --dport "$PORT" -j ACCEPT
             fi
    done <file.json 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T13:15:53.510

更干净的 Python 版本：

```
#!/usr/bin/env python
import json
import sys

for rule in json.load(sys.stdin):
    print("iptables -I INPUT -s {ip}/{cidr} -p {protocol} "
          "-m {protocol} --dport {port} -j ACCEPT".format(**rule)) 
```

注意：它用于`-I`在开头插入规则。

### 例子

```
$ json2iptables < accept-rules.json 
```

### [输出](http://ideone.com/fYvc6t)

```
iptables -I INPUT -s 1.2.3.4/32 -p tcp -m tcp --dport 3306 -j ACCEPT
iptables -I INPUT -s 2.4.5.6/32 -p tcp -m tcp --dport 80 -j ACCEPT
iptables -I INPUT -s 5.6.7.8/32 -p tcp -m tcp --dport 443 -j ACCEPT
iptables -I INPUT -s 6.8.3.1/32 -p tcp -m tcp --dport 53 -j ACCEPT 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T12:26:09.477

Python实现：

```
import json
rules_file = open('accept-rules.json', 'r')
rules = json.load(rules_file)
rules_file.close()
iptables = open('iptavles.sh', 'w')
for rule in rules:
    rule_str = 'iptables -A INPUT -s %s/%s -p tcp -m %s --dport %s -j ACCEPT\n' % (rule['ip'], rule['cidr'], rule['protocol'], rule['port'])
    iptables.write(rule_str)
iptables.close() 
```

accept-rules.json - 启动 json 文件，iptables.sh - 目标文件

# algorithm - 块放置算法

> ID：14029214
> 
> 赞同：0
> 
> 时间：2012-12-25T09:02:15.373
> 
> 标签：algorithm

我目前有一个正方形和一系列以下大小的矩形：(225,300)、(225,450)、(450,225)、(300,225)

我需要设计一个算法来确定这个正方形中所有可能的块组合而不重叠，总是填充整个盒子并假设每个块有无限数量。目前是否有任何算法可以有效地处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:18:28.553

在文献中，*有效地*=*多项式*。

* * *

请注意，即使您知道可以完全填充正方形 - 找到所有可能的方法也是指数级的，因为**其中有指数级**。

看看 6K * 6K 板。填充它的一种方法是将其减少到所有大小为 6*6 的 K^2 子方格，对于每个子方格，您可以使用 (6,3) 或 (3,6) 来创建它 - 导致`2^(K^2)`可能的填充方式广场。（我们仍然没有涵盖所有可能的方法）。

因此，生成所有解决方案不能多项式（=有效）完成。
我会寻求一些回溯/详尽的搜索解决方案来检查所有可能的 placemenets 以获得所需的结果。

* * *

原始答案，忽略特定问题中的一些问题，并面临更普遍的变化（给出的板是矩形，而不是正方形，瓷砖不是固定尺寸）：

但是，确定是否有*任何*可能的方法可以完全填充~~方形~~矩形¹的问题是[NP-Hard ，在](http://en.wikipedia.org/wiki/NP-hard)[这个线程](https://stackoverflow.com/q/7342389/572670)中讨论了它的一个私有案例（给定一个“板”和一个可能的大小为 nxm 的矩形），并且被证明是 NP-Hard，因此**对于这个问题没有已知的多项式解**。

由于确定是否存在任何可能的平铺是 NP-Hard 的，因此也不能多项式地找到所有平铺（或什至其中之一）（除非[P=NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)，但大多数人认为不太可能）。

* * *

(1) 原始答案写成正方形，但假定为矩形。对于正方形，可能更容易找到一个答案，并且减少不成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:58:43.340

如果只用四种矩形来填充正方形，我们就可以解决这个问题。

**输入：** N
**输出：**确定维度为 N 的正方形是否可以用矩形 (3,4)、(3,6)、(6,3) 和 (4,3) 填充。

答案是真的**当且仅当**

1.  N 为正整数
2.  N mod 6 == 0

以下是我的解释。

1.  N 应该是整数，因为我们无法通过整数相加得到分数。
2.  如果 N mod 6 == 1，那么这个正方形的面积 mod 6 == 1。
    如果 N mod 6 == 2，那么这个正方形的面积 mod 6 == 4。
    如果 N mod 6 == 3，那么这个正方形的面积 mod 6 == 3。
    如果 N mod 6 == 4，那么这个正方形的面积 mod 6 == 4。
    如果 N mod 6 == 5，那么这个正方形的面积 mod 6 == 1。
    由于每个给定矩形的面积都是 6 的倍数。不可能用这些矩形填充这些正方形。
3.  如果 N mod 6 == 0，那么我们可以用 (3,6) 或 (6,3) 填充这个正方形。

# forms - 如何发送表单数据并将生成的页面加载到 iframe 中

> ID：14029215
> 
> 赞同：1
> 
> 时间：2012-12-25T09:02:27.593
> 
> 标签：forms, iframe

好的，所以我有一个只加载一个简单表单的基本网页。

此表单提交一个文本字段，一个单选按钮选择。很简单。

它将它发送到使用数据的网页并根据数据显示网页。

我想知道如何将这些数据提交到位于不同服务器上的网页，并显示该网页随后将在 iframe 中显示的内容。

我问的原因是我只希望有一个几乎像标题一样的 iframe，该标题始终锚定在其生成的网页顶部并带有广告。

希望这足够清楚。我似乎找不到我要找的东西:(

感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:14:08.220

你在找这个吗？该表单将针对具有域的 iframe`http://example.com`并获取其 post 值

```
<form action="#" method="post" target="iframe_name">
        <input type="submit" name="post" value="Post">
 </form>

    <iframe src="http://example.com" name="iframe_name"></iframe> 
```

# objective-c - 为什么在为一个模型分配属性时需要添加自我？

> ID：14029216
> 
> 赞同：1
> 
> 时间：2012-12-25T09:02:30.133
> 
> 标签：objective-c, ios6

我有一个模型。

我想在初始化后每 3 秒更新一个属性，稍后我需要在另一个视图控制器中更改该属性。

代码是：

## 模型

```
 @interface Ap : NSObject        
    @property (nonatomic, retain) NSString *address;
    @property (nonatomic, retain) NSString *sessionId;

    + (id)sharedInstance;

@end

@implementation Ap
    @synthesize  sessionId, address;
    -(id) init {
        if (self = [super init])  {
            self.address = nil;
            self.sessionId = nil;
            [NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(heartbeat) userInfo:nil repeats:YES];

        }
        return self;
    }

    -(void) updateSession{
       sessionId = @"some string";
    }

    - (void) update{
       self.sessionId = @"some value from network";
    }

    + (Ap *)sharedInstance {
      if (!sharedInstance) {
        sharedInstance = [[super allocWithZone:NULL] init];
       }
       return sharedInstance;
    }
@end 
```

## 控制器

```
- (void) viewDidLoad {
    [super viewDidLoad];
    [[Ap sharedInstance] updateSession];
} 
```

* * *

错误是：`(lldb) bad access`模型更新时

我将 updateSession 方法更改为

```
 -(void) updateSession{
        self.sessionId = @"some string";
     } 
```

错误消失了，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:16:20.943

您应该`self.ap = [[Ap alloc] init];`在您的应用程序委托中使用。当您尝试调用`update`可能导致崩溃的模型对象时，您的模型对象可能会被释放。

您的代码将如下所示，

```
@interface SomeAppDelegate : UIResponder{
@property(nonatomic, retain) Ap *ap; //declare property here
@end 

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    if(!self.ap){ 
        self.ap = [[Ap alloc] init]; //use property here as self.ap which will retain ap. Otherwise it will not retain it.
    }
} 
```

**更新：** 看起来您已经删除了上一个问题，并在上​​一个问题中添加了一个全新的问题。无论如何，我也会尝试回答这个问题。

> 错误消失了，谁能告诉我为什么？

原因和我上面说的一样。如果使用`self.sessionId = @"some string";`，则保留对象。因为它是一个属性，并且一个属性将在内部保留，因为您已将该属性声明为保留。但是，如果您使用`sessionId = @"some string";`，它的范围仅在该方法内，因为您没有使用该属性。您直接设置值而不调用属性，它将在该方法之后自动释放。因此你会得到一个`bad access`.

我建议您阅读苹果文档以了解有关属性及其工作的更多信息。

# android - 为什么 DialogFragments 在 Android 2.3.3 中呈现 forceclose？

> ID：14029219
> 
> 赞同：1
> 
> 时间：2012-12-25T09:02:58.243
> 
> 标签：android, datepicker

据我所知**，**如果在旧版本中使用 datepicker 到 android 3.0 [，](http://developer.android.com/guide/topics/ui/controls/pickers.html)我需要扩展 `FragmentActivity 而不是 Activity 。如果我运行这个应用程序，它会强制关闭。

 **在该站点中提到我们需要使用`getSupportFragmentManager()`相当`getFragmentManager()`。如果`getFragmentManager()`使用我的应用程序崩溃并显示错误，如果我使用`getSupportFragmentManager()`. 任何帮助，将不胜感激。在此先感谢我的代码。

```
public class MainActivity extends FragmentActivity {

     static EditText edit = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        edit = (EditText)findViewById(R.id.editText1);

        edit.setOnClickListener(new OnClickListener() {

            @TargetApi(Build.VERSION_CODES.HONEYCOMB)
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                DialogFragment newFragment = new DatePickerFragment();
                newFragment.show(getFragmentManager(), "datePicker");   

            }
        });
    }
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public static class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
    // Do something with the date chosen by the user
        StringBuffer sb = new StringBuffer();
        sb.append(year).append("/").append(month).append("/").append(day);
        edit.setText(sb);

    }
}
} 
```

**日志文件** 编辑...

```
12-25 14:23:26.575: E/AndroidRuntime(443): FATAL EXCEPTION: main
12-25 14:23:26.575: E/AndroidRuntime(443): java.lang.NoClassDefFoundError: com.example.datetestapp.MainActivity$DatePickerFragment
12-25 14:23:26.575: E/AndroidRuntime(443):  at com.example.datetestapp.MainActivity$1.onClick(MainActivity.java:33)
12-25 14:23:26.575: E/AndroidRuntime(443):  at android.view.View.performClick(View.java:2485)
12-25 14:23:26.575: E/AndroidRuntime(443):  at android.view.View$PerformClick.run(View.java:9080)
12-25 14:23:26.575: E/AndroidRuntime(443):  at android.os.Handler.handleCallback(Handler.java:587)
12-25 14:23:26.575: E/AndroidRuntime(443):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-25 14:23:26.575: E/AndroidRuntime(443):  at android.os.Looper.loop(Looper.java:123)
12-25 14:23:26.575: E/AndroidRuntime(443):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-25 14:23:26.575: E/AndroidRuntime(443):  at java.lang.reflect.Method.invokeNative(Native Method)
12-25 14:23:26.575: E/AndroidRuntime(443):  at java.lang.reflect.Method.invoke(Method.java:507)
12-25 14:23:26.575: E/AndroidRuntime(443):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-25 14:23:26.575: E/AndroidRuntime(443):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-25 14:23:26.575: E/AndroidRuntime(443):  at dalvik.system.NativeStart.main(Native Method)
12-25 14:23:28.654: I/Process(443): Sending signal. PID: 443 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:27:17.920

看来您混合了来自操作系统和支持库的类。检查您的导入以确保您只使用来自支持库的片段相关类，例如`android.support.v4.app.FragmentActivity`.**

# javascript - 主干添加一个搜索路径以获取（Rails、coffeescript、主干）

> ID：14029224
> 
> 赞同：1
> 
> 时间：2012-12-25T09:04:03.983
> 
> 标签：javascript, ruby-on-rails, backbone.js, coffeescript

在我的主干视图中，我在这样的集合上调用 fetch：

```
@collection.fetch
      data: 
        query: query
      success: (collection, response) =>
        #do stuff 
```

如果我只想在我的 rails 路线中调用 spot#index，这非常有用。但我想在我的 spot_controller.rb 中设置一个“搜索”路由，它返回一组不同的结果。我该如何设置。

这是我的模型和收藏：

```
class App.Models.Spot extends Backbone.Model

  initialize: -> 

  url: ->
    if @isNew()
      "#{App.getURL()}/spots.json"
    else
      "#{App.getURL()}/spots/#{@id}.json"

  urlRoot: ->
    App.getURL() + "/spots.json"

class App.Collections.SpotsCollection extends Backbone.Collection
  model: App.Models.Spot

  initialize: (models, options) ->

  url: ->
    "#{App.getURL()}/spots.json" 
```

这是一个地点的路由器：

```
class App.Routers.SpotsRouter extends Backbone.Router
  routes:
    '' : 'index'

  initialize: ->
    @collection = new App.Collections.SpotsCollection()
    @collection.fetch()

  index: -> 
```

在我的rails后端我有一个简单的控制器，这里是spots_controller.rb

```
class SpotsController < ApplicationController

  def index

    @spots = Spot.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @spots }
    end
  end
end 
```

我只是好奇如何添加搜索方法，所以当我调用 fetch 时，我可以告诉它根据一些搜索词获取所有现场记录。我知道我可以在调用我的点#index 操作时添加一些数据参数，然后在索引操作中找到这些术语，但是，告诉 fetch 从点#search 获取记录似乎会更好。做这个的最好方式是什么？谢谢！

# ant - MacBook OS X 10.8.2 ant 无法找到自定义环境变量

> ID：14029225
> 
> 赞同：4
> 
> 时间：2012-12-25T09:04:18.650
> 
> 标签：ant, environment-variables, osx-mountain-lion

当我在 ant 上运行目标时，它说它无法找到我传递给它的变量。

配置环境变量：

在 build.xml

`<property environment="Env"/>`

但我无法找到参数定义的参数 `${Env.CATALINA_HOME}`

.bash_profile 在哪里

`export CATALINA_HOME=/Users/olgunkaya/development/apache-tomcat-7.0.34` 和`export PATH=${PATH}:$CATALINA_HOME`

我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:27:53.923

在运行之前`ant`，请检查是否`CATALINA_HOME`实际定义为环境变量。我打赌你会发现它不是。Ant 在开始之前不会读取您的`.profile`or `.bash_profile`，因此如果您的环境中尚未定义它，Ant 将看不到它。

正如您所见，在 Mac 上打开终端窗口并不一定保证`.bash_profile`文件已被执行。`.bashrc`尝试在文件中设置这些环境变量。

或者，您可以通过将其设置为终端中的启动文件来*强制运行。* `.bash_profile`从菜单中选择*File->Preferences*，转到*Shell*选项卡，选择您的默认 shell，然后单击*Run Command*复选框并放入`.bash_profile`其中。这将保证`.bash_profile`在每个新的终端窗口中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T00:11:16.150

我在引用自定义变量时遇到了类似的问题，该变量肯定是在 shell spawning 中定义的`ant`。

解决方案是`EXPORT`定义变量时（in `~/.profile`），因此 shell 会将其传递给其子项。

# graph - 如何在 gremlin 中获取名为 ID 的属性

> ID：14029227
> 
> 赞同：1
> 
> 时间：2012-12-25T09:04:47.123
> 
> 标签：graph, groovy, gremlin

在编写 gremlin 查询时，我得到了奇怪的结果。我可以愉快地为我的节点的大多数属性使用 has 函数，例如“ *().has('name', 'VerisignCzagExtension').property('id')”将返回 v5086。但是当我尝试使用带有属性 id 的 has 函数时，它永远不会返回 true。例如 "* ().has('id', 'v5086').property('id')" 不返回任何结果。有人知道为什么会这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:41:25.797

在内部，Neo4j 将所有 ID 存储为`java.lang.Long`对象。`id`这只是属性的特殊行为。所有其他属性都与其隐含的数据类型一起存储。这就是为什么`has('name', 'VerisignCzagExtension')`起作用的原因（*因为`name`属性被排除在这种特殊行为之外`id`*）。我假设`v5086`正在被强制转换为`java.lang.Long`，因此失去了它的真正价值。`has('id', 'v5086')`这可以解释Gremlin 步骤后的零结果。

AFAIK，`id`属性是不可变的（*无法更改*）。如果您需要`id`使用`has`Gremlin 步骤查找顶点，它看起来就像`has('id', 5086L)`假设顶点`id`是`5086`并且正在被存储为一个`java.lang.Long`值。额外`L`的是显式类型转换，如果您不添加`java.lang.Long`，Neo4j 会假设您的 Gremlin 步骤将再次导致零结果。`java.lang.Integer``L`

最后，您可能希望将您的命名 ID 称为其他名称，例如带有 key 的属性`name`。

希望这可以帮助。

# wcf - C# - 加密与编码

> ID：14029228
> 
> 赞同：1
> 
> 时间：2012-12-25T09:04:55.763
> 
> 标签：wcf

有人可以解释一下加密和编码之间有什么区别吗？您应该在哪些场景下使用它们，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:11:27.207

这两件事之间的主要区别在于，编码是将某些内容转换为众所周知且不是秘密的其他内容。例如，将一些文本编码为 base64 以节省内存和存储数据。当您使用它们时，您会将其编码回字符串。

加密实际上是对数据进行编码，但出于安全原因，数据已被解密。解密不应该是公开的——这意味着只有一个拥有解密密钥的人才能解密数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:13:52.577

尽管两者看起来相似，但您希望完成的是主要区别。

加密用于密封文件的内容，因此其他人无法读取它，而编码则用于其他方式。加密主要使用某种密码短语的密码。

例如，如果您使用 zip 压缩文件，那么您就是在对其进行编码。如果他们知道正确的算法，每个人都可以对其进行解码。但是，如果您使用密码压缩 zip，它也会被加密。

加密示例如下：

*   SSL
*   加密的 zip 档案
*   ...

编码示例如下：

*   压缩
*   通道编码（向通过通道发送的数据添加额外的位，以便您可以查看到达的数据是否正确，如果不正确则可能更正）
*   ...

# magento - 如何选择显示我的块的页面类型（cms、产品、类别）？

> ID：14029231
> 
> 赞同：0
> 
> 时间：2012-12-25T09:05:08.850
> 
> 标签：magento, block, layer

我正在研究一个滑块块 Magento，我希望能够选择在前面显示它的位置。

是否可以从 (cms, product, category) 中选择页面类型？

需要帮助:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:35:13.353

我喜欢 Lee Saferite[提出](https://stackoverflow.com/questions/3041510/determine-if-on-product-page-programmatically-in-magento/7249805#7249805)的方式：在模块布局中添加自己的类型参数

# linux - 即使事件发生，Linux进程也会卡在等待事件上

> ID：14029236
> 
> 赞同：0
> 
> 时间：2012-12-25T09:06:34.313
> 
> 标签：linux, kernel

我在几个地方有一个非常奇怪的系统行为，简而言之：用户或内核空间中有一个进程等待事件，虽然事件发生，但进程没有唤醒。

我将在下面对此进行描述，但由于问题出在许多不同的地方（至少 4 个），我开始寻找系统问题而不是本地问题，例如抢占标志（已经检查而不是问题），这将使区别。

该系统是在飞思卡尔 IMX6 上运行的 Linux，它是全新的，仍处于测试阶段。相同的代码在许多其他 Linux 系统上运行良好。

该系统正在运行 2 个独立的进程，一个是使用 gstreamer 从文件播放视频，使用从未使用过的新图像处理器显示视频。如果这个过程单独运行，系统可以运行一夜。

另一个过程是使用通过 USB 连接的数字调谐器。该过程仅在循环中获取设备版本，再次单独运行时可以运行过夜。

如果这两个进程同时在系统上运行，一个在几分钟内就会卡住。如果我们更改测试参数（如定期获取版本时间），其他进程将卡住。
进程总是停留在等待事件（`wait_event_interruptible`在内核驱动程序中，或在用户空间中`pthread_cond_wait`）。事件本身发生了，我有日志可以看到。但进程不会唤醒。

试图杀死这个过程会导致僵尸。我设法找到了一个有非常具体的时间问题的地方，其中条件检查放错了位置，如果进程切换到正确的位置，可能会导致这种卡住。它解决了一个问题，而我又遇到了另一个具有相同特征的问题。无论如何，发现的错误无法解释为什么它会如此频繁地发生，它可以解释理论上会在很多时间卡住一次的错误，但不会这么快。

无论如何-即使问题是真实的，系统中的某些东西也会导致它很快出现。再一次 - 这段代码（除了新的显示驱动程序）在其他系统中工作，甚至在单独工作时也在同一个系统上工作。这些进程不相关，也不相互协作，它们的共同点是它们正在运行的机器。

它可能与系统资源（1G内存使用100M，CPU使用率为5％），调度程序行为或系统配置有关。任何人都有想法可能导致这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:19:54.330

如果它是一个全新的 Linux 端口，那么它可能是你实际上有一个真正的内核错误 - 如果它是新硬件，则可能是一个硬件错误。

但是，您需要非常好的证据，因此`strace`，`ftrace`甚至可能需要对相关内核代码进行一些检测，以向能够真正解决问题的人展示这一点——我猜，既然您以您的方式提出这个问题，那你不是一个普通的内核黑客。

抱歉，如果这不是您正在寻找的答案。

# android - 是否可以进行循环活动？

> ID：14029239
> 
> 赞同：3
> 
> 时间：2012-12-25T09:06:48.733
> 
> 标签：android, android-activity, modal-dialog, geometry, drawing

我们知道活动的默认形状在 Android 中是矩形的。我使用以下样式进行了模态活动：

```
<style name="Theme.TransparentD0" parent="android:Theme">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowBackground">@color/semi_transparentD0</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:backgroundDimEnabled">false</item>
    </style> 
```

![在此处输入图像描述](../Images/c8a1ffdf4b1000c13f03d414eaedb235.png)

现在我有一个矩形模态活动。是否可以创建**圆形**模态活动？如何？

我的意思是我想将模态 Activity 的形状更改为**Circle**。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T09:12:35.987

您可以创建`Dialog`基于`Activity`.

`Activity`为您的in设置主题`AndroidManifest.xml`：

```
<android:name="YourActivity"
   ...
   android:theme="@android:style/Theme.Dialog"/> 
```

在`YourActivity class`创建你的轮播`Gallery`

***为 Activity 创建这样的布局***： ![在此处输入图像描述](../Images/3e2e98c0f86319b88ebcc76b6875e137.png)

*这是示例布局：*

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:app="http://schemas.android.com/apk/res/com.sits.TaxiMoldova"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                android:background="@android:color/transparent">

    <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/backgroundCircleImage"
            android:background="@drawable/bg"
            android:layout_centerInParent="true"/>

    <LinearLayout
            android:orientation="vertical"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_centerInParent="true"
            android:id="@+id/contentLayout"
            android:background="@android:color/transparent">

        <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="button 1"
                android:id="@+id/button"/>

        <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="button 2"
                android:id="@+id/button1"
                android:layout_gravity="center"/>
    </LinearLayout>

</RelativeLayout> 
```

**资源：** *透明背景的圆圈![](../Images/0906ccd401b1e31dac7566e1e5d1b14f.png)*

**结果：** ![在此处输入图像描述](../Images/4a66701c91b7ba0c7d47342bb97b2031.png)

背景**不是**黑色，100%。而不是那个黑色背景将是您的活动（模态活动的父级）。这就是想法，玩弄比例，一切都会好起来的:)

# yii - 无法让 Yii urlManager 工作

> ID：14029242
> 
> 赞同：0
> 
> 时间：2012-12-25T09:07:29.753
> 
> 标签：yii, url-routing

经过几个小时的搜索，我问这个问题。我只是说不出我在这里想念什么。我正在尝试为我的 Yii 应用程序设置友好的 URL。

1.  我的基本网址是[http://www.baby-registry.org/BABYREG/app/](http://www.baby-registry.org/BABYREG/app/)
2.  我正在尝试将此网址[http://www.baby-registry.org/BABYREG/app/index.php?r=generalProducts/admin](http://www.baby-registry.org/BABYREG/app/index.php?r=generalProducts/admin)更改为[http://www.baby-registry.org/BABYREG/app/productAdmin](http://www.baby-registry.org/BABYREG/app/productAdmin)
3.  在我的 main.php 配置文件中使用它：

    'urlManager'=>array('urlFormat'=>'path', 'rules'=>array(), ),

4.  无论有没有规则（尝试了我在 stackoverflow 上找到的不同规则），这完全破坏了我的应用程序，我收到了著名的通知“恭喜！你已经成功地创建了你的 Yii 应用程序。您可以通过修改以下两个文件来更改此页面的内容：......'

我究竟做错了什么？这与我有一个像（BABYREG/app）这样的基本网址有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T19:28:48.080

我只是花了太长时间来反转我的数组参数。这是我第一次成功的重写：

应用内链接：

```
<a href='<?php echo Yii::app()->createUrl("home"); ?>'>Rewriting test</a> 
```

PHP 配置：

```
'rules'=>array('successfully/rewritten' => 'home'); 
```

请注意，它是*所需的 url*，然后是*现有的 url*。倒退，在我的脑海里——我认为它是“把这个改写成这个”。相反，它是“这是对此的重写”。^_^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:04:24.057

您将需要发布更多代码，以及您收到的错误消息（如果有）。

但是，URL 重写在 Yii 中不起作用的一个常见原因是 apache 模块[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)已关闭。这个 apache 模块需要使用 Yii URL 重写。

要检查此模块是否已启用，在 PHP 中，`use apache_get_modules();`这将返回一个启用的 apache 模块数组。因此，检查 mode_rewrite 是否启用的简单方法是：

```
if (in_array('mod_rewrite', apache_get_modules())){
    // mod_rewrite is enabled
} 
```

如果未启用，请让您的托管公司为您启用它。如果您在本地主机上工作（使用 WAMP），只需通过在*apache 菜单下单击它来启用它 -*系统托盘上 WAMP 图标中的模块

# codeigniter - 在codeigniter中从url中删除index.php后

> ID：14029243
> 
> 赞同：2
> 
> 时间：2012-12-25T09:08:39.530
> 
> 标签：codeigniter

我的登录控制器：`$this->load->view('login-view');`

我重定向到“登录视图”的链接在模板中是：`anchor('login','Login');`

在从 codeigniter 中的 url 中删除 index.php 之前效果很好。但是从 url 中删除 index.php 后它不起作用。

我的 .htaccess 文件是：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

我认为很难解释，这就是我所拥有的。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:46:13.823

在 .htaccess 中试试这个

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

而在`config.php`

```
$config['uri_protocol'] = 'AUTO'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T11:07:10.117

只需从您的配置文件中删除 index.php。

```
$config['index_page'] = "index.php"; 
```

应该

```
$config['index_page'] = ""; 
```

# python - 将 if-elif-else 语句放在一行上？

> ID：14029245
> 
> 赞同：190
> 
> 时间：2012-12-25T09:09:13.010
> 
> 标签：python, if-statement, syntax

我已阅读下面的链接，但它没有解决我的问题。
[Python有三元条件运算符吗？](https://stackoverflow.com/questions/394809/python-ternary-operator)（问题是关于将 if-else 语句压缩为一行）

有没有更简单的方法来编写 if-elif-else 语句，使其适合一行？
例如，

```
if expression1:
   statement1
elif expression2:
   statement2
else:
   statement3 
```

或者一个真实的例子：

```
if i > 100:
    x = 2
elif i < 100:
    x = 1
else:
    x = 0 
```

我只是觉得如果上面的例子可以这样写，它看起来会更简洁。

```
x=2 if i>100 elif i<100 1 else 0 [WRONG] 
```

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2012-12-25T09:16:46.143

不，这是不可能的（至少不是任意陈述），也不是可取的。将所有内容放在一行很可能违反[PEP-8](http://www.python.org/dev/peps/pep-0008/)，其中规定行的长度不应超过 80 个字符。

这也违背了 Python 的禅宗：“可读性很重要”。（`import this`在 Python 提示符下键入以阅读整个内容）。

您*可以*在 Python 中使用三元表达式，但只能用于表达式，不能用于语句：

```
>>> a = "Hello" if foo() else "Goodbye" 
```

**编辑：**

您修改后的问题现在表明，除了分配的值之外，这三个语句是相同的。在这种情况下，链式三元运算符确实有效，但我仍然认为它的可读性较差：

```
>>> i=100
>>> a = 1 if i<100 else 2 if i>100 else 0
>>> a
0
>>> i=101
>>> a = 1 if i<100 else 2 if i>100 else 0
>>> a
2
>>> i=99
>>> a = 1 if i<100 else 2 if i>100 else 0
>>> a
1 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-12-25T09:36:08.597

如果您只需要针对不同情况使用不同的表达式，那么这可能对您有用：

```
expr1 if condition1 else expr2 if condition2 else expr 
```

例如：

```
a = "neg" if b<0 else "pos" if b>0 else "zero" 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2019-10-10T08:44:56.540

尽管有其他一些答案：**是的，这是可能的**：

```
if expression1:
   statement1
elif expression2:
   statement2
else:
   statement3 
```

转换为以下一个班轮：

```
statement1 if expression1 else (statement2 if expression2 else statement3) 
```

实际上，您可以将它们嵌套到无穷大。享受 ;）

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-12-25T09:42:41.757

只需在 else 语句中嵌套另一个 if 子句。但这并没有使它看起来更漂亮。

```
>>> x=5
>>> x if x>0 else ("zero" if x==0 else "invalid value")
5
>>> x = 0
>>> x if x>0 else ("zero" if x==0 else "invalid value")
'zero'
>>> x = -1
>>> x if x>0 else ("zero" if x==0 else "invalid value")
'invalid value' 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-01-26T16:44:43.210

在我看来，有一个非常难以理解的替代方案，但我还是会出于好奇而分享：

```
x = (i>100 and 2) or (i<100 and 1) or 0 
```

更多信息在这里：[https ://docs.python.org/3/library/stdtypes.html#boolean-operations-and-or-not](https://docs.python.org/3/library/stdtypes.html#boolean-operations-and-or-not)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-11-22T13:50:54.960

您可以选择实际使用`get`a 的方法`dict`：

```
x = {i<100: -1, -10<=i<=10: 0, i>100: 1}.get(True, 2) 
```

`get`如果保证其中一个键的计算结果为：则不需要该方法`True`：

```
x = {i<0: -1, i==0: 0, i>0: 1}[True] 
```

理想情况下，最多一个键应该评估为`True`。如果多个键的计算结果为`True`，则结果似乎无法预测。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-05-17T21:14:28.743

[三元运算符](https://docs.python.org/3/reference/expressions.html#conditional-expressions)是简洁表达式的最佳方式。语法是`variable = value_1 if condition else value_2`. 因此，对于您的示例，您必须应用三元运算符两次：

```
i = 23 # set any value for i
x = 2 if i > 100 else 1 if i < 100 else 0 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2021-08-12T16:41:50.727

是的，你可以这样做：

```
i = int(input('type your num here : '))

x = 2 if i > 100 else ( 1 if i < 100 else 0)
print (x) 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-01-10T03:24:39.367

```
if i > 100:
    x = 2
elif i < 100:
    x = 1
else:
    x = 0 
```

如果要在一行中使用上述代码，可以使用以下代码：

```
x = 2 if i > 100 else 1 if i < 100 else 0 
```

这样做时，如果 i > 100，x 将被分配 2，如果 i < 100，则分配 1，如果 i = 100，则分配 0

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-12-25T12:55:19.550

这也取决于你表达的性质。关于“不这样做”的其他答案的一般建议对于通用语句和通用表达式非常有效。

但是，如果您只需要一个“调度”表，例如根据给定选项的值调用不同的函数，您可以将要调用的函数放在字典中。

就像是：

```
def save(): 
   ...
def edit():
   ...
options = {"save": save, "edit": edit, "remove": lambda : "Not Implemented"}

option = get_input()
result = options[option]() 
```

而不是 if-else：

```
if option=="save":
    save()
... 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-12-25T21:30:36.927

人们已经提到了三元表达式。有时以简单的条件赋值为例，可以使用数学表达式来执行条件赋值。这可能不会使您的代码非常具有可读性，但它确实可以在相当短的一行中得到它。你的例子可以这样写：

```
x = 2*(i>100) | 1*(i<100) 
```

比较结果为 True 或 False，与数字相乘时为 1 或 0。可以使用 + 而不是 | 在中间。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-06-26T13:04:27.677

嵌套三元运算符是最好的解决方案——

示例案例 -

```
4 = 1

3 = 2

2 = 3

1 = 4 
```

```
a = 4

prio = 4 if a == 1 else (3 if a == 2 else (2 if a == 3 else 1)) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-31T20:31:50.473

您可以使用嵌套的三元 if 语句。

```
# if-else ternary construct
country_code = 'USA'
is_USA = True if country_code == 'USA' else False
print('is_USA:', is_USA)

# if-elif-else ternary construct
# Create function to avoid repeating code.
def get_age_category_name(age):
    age_category_name = 'Young' if age <= 40 else ('Middle Aged' if age > 40 and age <= 65 else 'Senior')
    return age_category_name

print(get_age_category_name(25))
print(get_age_category_name(50))
print(get_age_category_name(75)) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-27T16:03:26.647

```
MESSAGELENGHT = 39
"A normal function call using if elif and else."
if MESSAGELENGHT == 16:
    Datapacket = "word"
elif MESSAGELENGHT == 8:
     Datapacket = 'byte'
else:
     Datapacket = 'bit'

#similarly for a oneliner expresion:

Datapacket = "word" if MESSAGELENGHT == 16 else 'byte' if MESSAGELENGHT == 8 else 'bit'
print(Datapacket) 
```

谢谢

# javascript - 是否可以将一个对象视为一个“整体”？

> ID：14029246
> 
> 赞同：2
> 
> 时间：2012-12-25T09:09:21.640
> 
> 标签：javascript

我可以数一个物体吗？喜欢：

```
 var student1 = new Student();
student1.name("ziv");
student1.age();
student1.where("a");

 var student2 = new Student();
student2.name("dani");
student2.age();
student2.where("b");

 var student3 = new Student();
student3.name("bari");
student3.age();
student3.where("c"); 
```

一些计算它们并返回 3 的函数。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:23:36.913

我想你的意思是计数*实例*。您必须跟踪实例，例如使用数组

```
var students = [];
var student1 = new Student()
   ,student2 = new Student();
students.push(students1,students2);
/* later ... */
var nOfStudents = students.length; //=> 2 
```

另一个想法是在`Student`原型中添加一个计数器：

```
Student.prototype.instanceCnt = 0; 
```

并在每个实例的 Student 构造函数中递增它

```
 //in the Student constructor function
   function Student(){
     this.instanceCnt += 1;
     /* ... */
   }
   // usage example
   var student1 = new Student()
      ,student2 = new Student()
      ,students = student1.instanceCnt; //=> 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:12:37.820

不，您需要手动在`Student`构造函数中添加一个计数器或将每个实例附加到一个数组并获取该数组的长度。

前：

```
var counter;
function Student() {
    counter++; // this will increase every time Student is initialized
    // continue the constructor...
} 
```

或者：

```
var students = [];
function Student() {
    students.push(this); // this will hold the instance in an array
    // continue the constructor...
}
console.log(students.length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:15:10.380

Javascript 中没有静态的概念，但您可以使用闭包来模拟该功能。

```
(function(){

  var numberOfInstances = 0;

  var Student = function(studentName){
    var name = '';

    var _init(){
      name = studentName ? studentName : 'No Name Provided';
      numberOfInstances++;    
    }();

    this.getName = function(){
       return name;
    }; 

    this.getNumberOfInstances = function(){
      return numberOfInstances;
    };

    return this;
  };
})(); 

var student1 = new Student("steve");
var student2 = new Student("sally");
console.log("my name is " + student1.getName());
console.log("my name is " + student2.getName());
console.log("number of students => " + student1.getNumberOfInstances());  
console.log("number of students => " + student2.getNumberOfInstances()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T10:08:41.310

您可以编写一个简单的通用实例化/继承助手，它在数组中跟踪其实例

像这样的事情可能会做到

```
var base = (function baseConstructor() {

  var obj = {
    create:function instantiation() {
        if(this != base) {
        var instance = Object.create(this.pub);
         this.init.apply(instance,arguments);
         this.instances.push(instance);
        return instance;
        } else {
          throw new Error("You can't create instances of base");
        }
    },
    inherit:function inheritation() {
      var sub = Object.create(this);
      sub.pub = Object.create(this.pub);
      sub.sup = this;
      return sub;
    },
    initclosure:function initiation() {},
    instances: [],
    pub: {}

  };

  Object.defineProperty(obj,"init",{
   set:function (fn) {
     if (typeof fn != "function")
       throw new Error("init has to be a function");
     if (!this.hasOwnProperty("initclosure"))      
       this.initclosure = fn;
    },
    get:function () {
        var that = this;
        //console.log(that)
            return function() {
              if(that.pub.isPrototypeOf(this)) //!(obj.isPrototypeOf(this) || that == this))
                that.initclosure.apply(this,arguments);
              else
                throw new Error("init can't be called directly"); 
             };
    }    

  });

  Object.defineProperty(obj,"create",{configurable:false,writable:false});
    Object.defineProperty(obj,"inherit",{configurable:false,writable:false});
  return obj;
})();

var Student = base.inherit()
    Student.init = function (age) {
    this.age = age;    
    }

var student1 = Student.create(21)
var student2 = Student.create(19)
var student3 = Student.create(24)

    console.log(Student.instances.length) // 3 
```

[这是一个关于JSBin](http://jsbin.com/ififuc/1/edit)的例子

# java - 需要在jsp中一次显示来自db的多个图像

> ID：14029247
> 
> 赞同：0
> 
> 时间：2012-12-25T09:09:31.423
> 
> 标签：java

我的代码如下 first.jsp

```
 <%
            List<BpsBiller> bpsBiller = (List<BpsBiller>)session.getAttribute("biller");
        System.out.println("bpsBiller size ----->"+bpsBiller.size());

             for(BpsBiller biller:bpsBiller){
                byte[] imageData =new byte[1024];  
                imageData = (byte[])biller.getIcon();
                session.removeAttribute("blobData");
                session.setAttribute("blobData",imageData);

            %>
            <span style="padding:10px;">    
            <a href="javascript:fetchBillerFields('<%=biller.getBillerId()%>');">       

                <img src="<%=request.getContextPath()%>/transactions/billerImages.jsp"  alt="biller logo" border="1" height="50" width="50">

            </a> 
            </span> 
        <%      

            }

        %> 
```

我的 billerImages.jps 代码就像

```
<%
try{

    byte[] imageData =new byte[1024];
    imageData = (byte[])session.getAttribute("blobData");

    int len = imageData.length;

    if(imageData!=null){

        int len1 = imageData.length;        

        response.setContentType("image/jpeg");      
        response.setHeader("Content-disposition","attachment; filename=" +"test");

        response.getOutputStream().write(imageData,0,len);          
        response.getOutputStream().flush();        
        response.getOutputStream().close();
       System.out.println("5");
    }
    System.out.println("6");
    session.removeAttribute("blobData");

}catch(Exception e) {
    e.printStackTrace();
    System.out.println("--error--"+e.getMessage());
}
%> 
```

在 First.jsp 中，我从会话中获取帐单列表作为 bpsBiller。在这我有 billerId。基于 billerId 我正在显示图像。

我正在使用 billerImages.jsp 显示图像。并且图像来自现有的数据库表。Billers list 是我在会话中放入的。来自此会话的图标（blob 数据类型）。getAttribute("账单");

我正在使用休眠。“billers”是来自 Struts2 Action Class 的 billers 列表。我使用 hibernate 从数据库中检索 billers

但我的问题是我正在获取列表。我在数据库中没有图像。如果列表中有 10 条记录，则显示 10 幅图像。但所有 1-10 条记录仅显示第 10 幅图像。我应该总共获得 10 张不同的图像。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:17:51.330

不要将图像作为 blob 放入会话中。相反，将图像 id 作为参数传递：

```
<img src="<%=request.getContextPath()%>/transactions/billerImages.jsp?id=<%=biller.getBillerId()%>"  alt="biller logo" border="1" height="50" width="50"> 
```

并让您`billerImages.jsp`检索该参数并查询数据库并每次返回属于它的图像。

如果您仍想使用会话作为存储图像的一种方式，请不要对所有图像使用相同的属性：

session.setAttribute("blobData" + biller.getId(),imageData);

# android - 如何在android中找到两个时间值之间的差异？

> ID：14029250
> 
> 赞同：0
> 
> 时间：2012-12-25T09:09:59.923
> 
> 标签：android, datetime, date-difference

```
SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss");

try {
    Date date = (Date) format.parse(a);
    Date date1 = (Date) format.parse(b1);
    Date date2 = (Date) format.parse(c);

    long diff1 = date1.getTime()-date.getTime(); 
    long diff2 = date2.getTime()- date.getTime();

    bundle.putLong("df1", diff1);
    bundle.putLong("df2", diff2);

} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我已经尝试使用上面的代码来查找两个时间值之间的差异，但它不起作用，这个错误来了：

```
12-25 09:00:56.537: W/System.err(1642): java.lang.ClassCastException: java.util.Date cannot be cast to java.sql.Date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:11:57.410

```
java.lang.ClassCastException: java.util.Date cannot be cast to java.sql.Date 
```

=> 检查您的导入，正确的是`java.util.Date`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:17:09.880

你可以尝试得到如下

```
 java.sql.Date date = new java.sql.Date(format.parse(a));
  java.sql.Date date1 = new java.sql.Date(format.parse(b1));
  java.sql.Date date2 = new java.sql.Date(format.parse(c)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T09:22:14.583

我建议你使用优秀的 Joda Time 库而不是有缺陷的 java.util.Date 和朋友。你可以简单地写

```
import java.util.Date;
import org.joda.time.DateTime;
import org.joda.time.Days;

Date past = new Date(110, 5, 20); // June 20th, 2010
Date today = new Date(110, 6, 24); // July 24th 
int days = Days.daysBetween(new DateTime(past), new DateTime(today)).getDays(); 
```

# css - Chrome 的纺车不会停止旋转

> ID：14029252
> 
> 赞同：3
> 
> 时间：2012-12-25T09:10:18.720
> 
> 标签：css, google-chrome, responsive-design, media-queries

我正在使用 CSS 文件来适应移动设备：

```
<link rel="Stylesheet" type="text/css" href="v2-sites-mobile.css" media="only screen and (max-width: 767px)" /> 
```

在移动设备（宽度低于 768 像素）上，这可以完美运行。然而，在桌面设备上，当文件`sites-mobile.css`不应加载时，谷歌浏览器在检查器的“网络”选项卡中将其列为“待处理”：

![在此处输入图像描述](../Images/f16ccf0bc37a4ca5514358f92d0350b8.png)

如您所见，Chrome 将文件视为“尚未加载”。这使纺车无限旋转：

![在此处输入图像描述](../Images/cdc596c340f545a76ff8c801fdf18571.png)

这是 Chrome 中的错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:41:23.690

即使媒体查询当前不匹配，Web 浏览器仍将下载样式表。

我承认在这种情况下我没有看到 Chrome 中的纺车。您是否也在其他桌面浏览器中尝试过？

# delphi - 互联互通的程序

> ID：14029253
> 
> 赞同：2
> 
> 时间：2012-12-25T09:10:23.183
> 
> 标签：delphi, ipc

> **可能重复：**
> [进程间通信](https://stackoverflow.com/questions/4088776/inter-process-communication)

使用 Delphi，我是否有可能构建两个相互通信和交互的简单程序，比如说通过单击第一个中的一个按钮，另一个显示一条消息。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:20:12.677

IPC有很多可能性

*   发送窗口消息
*   使用命名管道
*   使用 TCP-IP / UDP
*   共享内存

等等 ...

最简单的方法是将消息发送到 FindWindow Named Pipes 找到的窗口句柄，并且 TCP-IP 应该优先用于广泛的通信。

微演示：

第一个项目：

```
unit Unit2; 

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TTMiniDemoSender = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  TMiniDemoSender: TTMiniDemoSender;

implementation

{$R *.dfm}
Const
     C_MyMessage=WM_USER + 1234;

procedure TTMiniDemoSender.Button1Click(Sender: TObject);
var
 wnd:HWND;
begin
    wnd := FindWindow('TTMiniDemoReceiver',nil);
  if wnd<>0 then SendMessage(wnd,C_MyMessage,123,456);

end;

end. 
```

第二个项目：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

Const
     C_MyMessage=WM_USER + 1234;
type

  TTMiniDemoReceiver = class(TForm)
  private
    { Private-Deklarationen }
    Procedure MyMessage(var MSG:TMessage); message C_MyMessage;
  public
    { Public-Deklarationen }
  end;

var
  TMiniDemoReceiver: TTMiniDemoReceiver;

implementation

{$R *.dfm}

{ TTMiniDemoReceiver }

procedure TTMiniDemoReceiver.MyMessage(var MSG: TMessage);
begin
   Showmessage(IntToStr(MSG.WParam) + '-' + IntToStr(MSG.LParam) );
   msg.Result := -1;
end;

end. 
```

要传输更多信息，您可以使用[WM_CopyData](http://msdn.microsoft.com/de-de/library/windows/desktop/ms649011%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:27:01.143

对于在不同系统上运行的应用程序和其他高级需求，还有消息解决方案，如[Microsoft 消息队列](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)(MSMQ) 或基于跨平台消息代理的解决方案，如开源系统 Apache [ActiveMQ](http://activemq.apache.org/)、HornetQ 和 RabbitMQ。

使用这些消息传递系统，很容易实现可靠的点对点通信，即使接收者当前没有收听也可以工作。

有可用的 Delphi / Free Pascal 客户端库，商业和开源。

# jquery - 浏览器无法解析 jquery $ 符号

> ID：14029254
> 
> 赞同：0
> 
> 时间：2012-12-25T09:10:26.287
> 
> 标签：jquery, asp.net, master-pages

我试图将 jquery 包含到母版页 - >

这是身体：

```
 <body onload="X()">
    <script type="text/javascript">
    .........
      function X() {
          alert('Trace');
          var s = $(window).width();
          alert(s);
      }
   </script>
 </body> 
```

这是头：

```
 <script type="text/javascript" src="~/Scripts/jquery-1.8.0.min.js"></script> 
```

浏览器无法解析 [$] 符号。我将使用母版 ( [root][clear][My pages] ) 的 .aspx 页面保存为带有图像的 html 并尝试打开 Jquery 文件 -> 我得到了错误：

无法找到该资源。

说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

**请求的 URL：/clear/~/Scripts/jquery-1.8.0.min.js**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:12:10.160

在使用它之前，您需要包含 jquery js 文件。在 head 中添加 jQuery 并在 body 的结束标记或 document.ready 中使用它。

在头部这样放置并删除`~`。

```
<script type="text/javascript" src="/Scripts/jquery-1.4.1.js"></script> 
```

在关闭body标签之前的html中

```
<script type="text/javascript">
         function X() {
             var s = $(window).width();
             alert(s);
         }
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T10:13:22.480

您需要解析路径中的波浪号 (~)，如下所示：`<script type="text/javascript" src="<%= Page.ResolveUrl("~/Scripts/jquery-1.8.0.min.js") %>"></script>`

然后由服务器解析路径。

# c# - 在 C# 中使用 Random 生成 50 个随机数

> ID：14029255
> 
> 赞同：4
> 
> 时间：2012-12-25T09:10:26.960
> 
> 标签：c#, random

我想随机取 50 个数字，这样就不能使用随机方法重复它们。

到目前为止，以下是我的代码：

```
private void settext()
{      
     int i;
     Queue <int> qe= new Queue<int>(50);
     Random rm= new Random();
     for (int g = 0; g < 50; g++)
     {
         i = rm.Next(1, 50);
         if (!qe.Contains(i))
         {
              qe.Enqueue(i);
         }                
     }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T09:18:10.140

我建议不要循环直到找到一个尚未使用的数字，而是创建一个包含 50 个可能数字的列表（或数组），然后对其进行洗牌。然后，您可以随心所欲地选择其中的数量。

Stack Overflow 上有很多洗牌问题，比如[这个](https://stackoverflow.com/questions/1287567/is-using-random-and-orderby-a-good-shuffle-algorithm)。

这样做的好处是性能是完全可预测的和线性的 - 而如果你从 50 个数字中取出所有 50 个数字，最后你将不得不继续生成随机数，直到你*碰巧*得到最后一个。对 50 来说还不错，但想象一下，如果你有数十万个数字......

（另请注意，您现有的代码在任何地方都没有使用数字 20，如果您尝试仅生成 20 个数字，这应该会敲响警钟......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:13:38.693

您的代码唯一的问题是，如果发现重复项，您仍在增加循环并且没有获得队列中的所有值（50）。您可以使用 while 循环，并且仅在找到非重复值时才增加索引。

```
int index=0;
int i;
Queue<int> qe = new Queue<int>(50);
Random rm = new Random();
while(index< 50)
{
    i = rm.Next(1, 51); //to get from 1 to 50
    if (!qe.Contains(i)) //to check for duplicate
    {
        qe.Enqueue(i);
        ++index;
    }

} 
```

以上将生成 50 个唯一的随机数，如果您想从中获取 20 个数字，则：

```
var numbers = qe.Take(20); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:15:55.663

我认为，你强迫它找到 50 个不同的数字，同时只允许它从 49 个可能的数字范围内生成它们。试试`rm.Next(50) + 1`吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T09:17:39.833

使用 Linq 怎么样？

```
private static Random rand = new Random();

var twentyUniqueNumbers = RandomNumberStream().Distinct().Take(20);

IEnumerable<int> RandomNumberStream()
{
  yield return rand.Next(1,50);
} 
```

或者更好的是，创建一个包含 50 个数字的列表，然后随机播放 20 个 ...

```
var twentyUniqueNumbers = Enumerable.Range(0,50)
                                    .OrderBy(s => rand.Next());
                                    .Take(20); 
```

这将提供更可预测的性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T15:51:19.027

按照您的逻辑，编写此代码可能更简单：

```
var results = new HashSet<int>();
var random = new Random();
while (results.Count < 20)
{
    results.Add(random.Next(1, 50));
}; 
```

无需检查数字是否已添加到哈希集中，因为每个数字只会添加一次...

但是...这只是一个快速解决方案，可以帮助您理解您要解决的问题，（基本上是教室示例）但是您应该真正接受 Jon Skeet 提供的建议，因为您不知道需要多长时间它实际上需要执行上面的代码。

需要注意的另一件事是，您正在使用 Queue 类，该类旨在像 FIFO 缓冲区一样使用......这并不真正适用于您的问题。

# php - 阿帕奇旋转日志

> ID：14029256
> 
> 赞同：0
> 
> 时间：2012-12-25T09:10:35.060
> 
> 标签：php, apache, apache2, lamp

我试图弄清楚以下指令有什么问题

LogLevel warn ErrorLog "||/usr/local/apache/bin/rotatelogs log/error.log 86400" CustomLog "||/usr/local/apache/bin/rotatelogs log/access.log 86400" 组合

更改为上述内容后，apache 服务器不会启动，直到我恢复到不使用rotatelogs 的先前版本。

我检查了错误日志文件，但没有记录错误，我知道问题的根源，但希望 apache 会记录特定的错误消息以帮助调试，同时也试图弄清楚为什么没有发生这种情况。

我想要实现的是每天创建新的日志文件并存档旧日志。我通读了 apache 文档，这就是我发现的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:27:19.893

看看**logrotate**实用程序作为替代方法。

# jquery - 如何控制jquery切换？

> ID：14029259
> 
> 赞同：1
> 
> 时间：2012-12-25T09:10:54.047
> 
> 标签：jquery

```
var light = 'off';
$('#switch').toggle(function(){light='on'},function(){light='off'});

//in some case 
$('#something').mouseout(function(){light = 'off'}); 
```

比如我点击了开关，然后灯亮了，当时我mouseout了一些东西，灯灭了，我想再开灯，再次点击开关，但是开关认为灯还亮着执行灯 = 再次关闭。我必须点击它两次才能打开灯，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:16:59.817

在这种情况下，我认为切换是不够的，因为您对切换的状态有外部影响。

所以：

```
var light = 'off';

function toggleLight() {
 if (light == "off")
   light = "on";
 else
   light = "off";
}

$('#switch').click(toggleLight);
$('#something').mouseout(function() { light = "off"; }); 
```

# iphone - 检测部分 UIImageView 的触摸

> ID：14029260
> 
> 赞同：1
> 
> 时间：2012-12-25T09:11:00.847
> 
> 标签：iphone, cocoa-touch, uiimageview

我有一个图像，它看起来像一个三角形，但它的面积是一个矩形。 ![在此处输入图像描述](../Images/22eb9df6d4ef8f7b1b9033ec1159fb58.png)

在这个图像中有两个块（在图像中用 1 和 2 表示），整个矩形是一个图像视图。

我只想检测图像第一部分的触摸。

只在这部分检测触摸怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:39:41.033

A`UIView`总是一个**Rectangular shape**，你不能改变它。但是，您也许可以通过使用`CALayer`遮罩来获得您想要的效果。制作一个`UIView`并对其应用自定义蒙版，其中蒙版中包含适合三角形的数据。然后，您放入的任何实际内容`UIView`将仅在适当**的“三角形”**形状区域中可见。

要制作遮罩层，您可以使用**图像**（例如 png）或使用**Core Graphics**绘制三角形。您可以做一些事情：

*   您可以通过这个 Beautiful [Link](http://www.blackpawn.com/texts/pointinpoly/default.html)获得帮助。

*   这里有[一个例子](http://cocoadev.com/wiki/MaskingACALayer)。

*   另请参阅此 SO 问题： [学习核心图形](https://stackoverflow.com/questions/4028951/learning-core-graphics)

*   您可以查看此 Apple[文档](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007533-SW1)。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T09:57:29.733

正如 H2CO3 所说，您可以继承 UIView（或 UIImageView）并实现 touchesBegan:withEvent: 和 co。然后测试接触点是否在您感兴趣的区域内。对于您的特定要求（图像的三角形一半），测试非常简单。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   CGPoint touchPoint = [[touches anyObject] locationInView:self];
   if (touchPoint.x < touchPoint.y)
   {
      // touch in lower triangular half; handle touch however you like
   }
} 
```

如果你是 UIImageView 的子类，不要忘记将它的 userInteractionEnabled 属性设置为 YES。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:26:53.223

首先`UIImage`在`UIViewController`类中添加这个，然后在这个中添加这个方法......

将标签设置为您`UIImageView`喜欢的下面...

```
 yourImageView.tag = 1; 
```

然后使用下面的方法...

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    [touch locationInView:self.view];
    if([touch.view isKindOfClass:[UIImageView class]])
    {
        UIImageView *tempImage=(UIImageView *) touch.view;
        if (tempImage.tag == 1) 
        {
              ///Image clicked here, Do anything which you want here..your Image detect here...
              NSLog(@"Image clicked here");
        }
    }
} 
```

我希望这对你有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-14T12:10:48.453

您必须从接触点 ( ) 创建一个 90 度三角形`point`，然后必须计算蓝色角度（**首先检查下图**）是否大于或小于红色角度。如果是这样，则点在 2 内，否则在 1 内

**快速解决方案：**

```
func calculateIfPointIsInsideTriangle(point: CGPoint, triangle_h: Float, triangle_w: Float) -> Bool{

    //    print ("intrare w=\(triangle_w), h=\(triangle_h), x=\(point.x), y=\(point.y)")

    let angle_triangle: Float = atan2f(triangle_h,triangle_w)

    let angle_point: Float = atan2f(triangle_h - Float(point.y), triangle_w - Float( point.x))

    if angle_point <= angle_triangle {
        //        print ("2")

        return true
    }
    //    print ("1")
    return false
} 
```

希望我没有弄错，因为在我的情况下，三角形在另一边。对于这种情况，您应该使用

```
let angle_point: Float = atan2f(triangle_h - Float(point.y), Float( point.x)) 
```

**注意**：iOS坐标系是

(0,0) 。. . (1,0)

.

.

.

(0,1) 。. . (1, 1)

这就是为什么要计算`angle_point`你必须使用`triangle_h - Float(point.y)`和`triangle_w - Float( point.x)`

[![在此处输入图像描述](../Images/08e3ba74326a831ec8881943a8bf76fc.png)](https://i.stack.imgur.com/7NPLI.png)

资料来源：

[https://www.raywenderlich.com/35866/trigonometry-for-game-programming-part-1](https://www.raywenderlich.com/35866/trigonometry-for-game-programming-part-1)

[https://gamedev.stackexchange.com/questions/14602/what-are-atan-and-atan2-used-for-in-games](https://gamedev.stackexchange.com/questions/14602/what-are-atan-and-atan2-used-for-in-games)

# javascript - 使用 JavaScript 或 JQuery 从 json 数据创建动态文件夹层次结构

> ID：14029261
> 
> 赞同：4
> 
> 时间：2012-12-25T09:11:00.570
> 
> 标签：javascript

我的json数据结构：

```
 var data = {
            "FolderList": [
                        {
                            "FolderID": 1,
                            "FolderName": "parent1",
                            "ParentFolderID": -1
                        },
                        {
                            "FolderID": 2,
                            "FolderName": "parent1 Child1",
                            "ParentFolderID": 1
                        },
                        {
                            "FolderID": 3,
                            "FolderName": "parent2",
                            "ParentFolderID": -1
                        },
                        {
                            "FolderID": 4,
                            "FolderName": "parent1 Child1 Child1",
                            "ParentFolderID": 2
                        },
                        {
                            "FolderID": 5,
                            "FolderName": "parent1 Child1 Child2",
                            "ParentFolderID": 2
                        },
                        {
                            "FolderID": 6,
                            "FolderName": "parent2 Child1",
                            "ParentFolderID": 3
                        }
                ]
                    }; 
```

现在，我想像这样创建文件夹层次结构 html：

```
 parent1
    parent1 child1
      parent1 child1 child1
      parent1 child1 child2   
 parent2
    parent2 child1 
```

其实我想生成这样的HTML代码

> ```
> <ul>
>     <li>Parent1
>         <ul>
>              <li>parent1 child1
>                  <ul>
>                      <li>parent1 child1 child1</li>
>                      <li>parent1 child1 child2</li>
>                  </ul>
>              </li>
>          </ul>
>     </li>
>     <li>parent2
>         <ul>
>             <li>parent2 child1</li>
>         </ul>
>     </li>
> </ul> 
> ```

如何使用 JavaScript 或 jQuery 做到这一点？提前致谢。我尝试使用递归函数，但被卡在了中间。但是我的代码是这样的：

```
 function populatedata() {
             $.each(data.FolderList, function (i, folder) {
                if (folder.ParentFolderID == -1) {
                    html += '<li>' + folder.FolderName;
                    checkChild(folder.FolderID);
                    html += '</li>';
                }

            });
        }

        function checkChild(parentid) {
            $.each(data.FolderList, function (i, folder) {

                if (folder.ParentFolderID == parentid) {
                    html += '<li><ul>' + folder.FolderName;
                    checkChild(folder.FolderID);
                    html+=</ul></li>
                    return html;
                }
                else {
                    return ;
                }
            });
        } 
```

最后在 FAngel 的帮助下使用下面的代码，我创建了项目中实际需要的所需结构

我修改后的代码是这样的：

> ```
>  function populatedata() {
>         var list = $("<ul>").attr({ class: "collapsibleList", id: "folder" });
>              $.each(data.FolderList, function (i, folder) {
>                  if (folder.ParentFolderID == -1) {
>                    var item = $("<li>").
>                    css("border-top","0").html('<span>'+folder.FolderName
>                    +'</span><a href="Docs.html">
>                    <div class="view-docs pull-right">View</div></a>');
>                     list.append(item);
>                     var children = $('<ul>');
>                     item.append(children);
>                     checkChild(folder.FolderID, children);
>                   }
>               });
>               $('#folderList').append(list);
>            }
>          function checkChild(parentid, parent) {
>               $.each(data.FolderList, function (i, folder) {
>                 if (folder.ParentFolderID == parentid) {
>                     var item = $("<li>").
>                         html('<span>'+folder.FolderName
>                          +'</span><a href="Docs.html">
>                            <div class="view-docs pull-right">View</div></a>');
>                     var children = $('<ul>');
>                     parent.append(item);
>                     item.append(children);
>                     checkChild(folder.FolderID, children);
>                        }
>                  else {
>                     return;
>                 }
>              });
>          } 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T10:37:16.600

这是它的演示：http: [//jsfiddle.net/zn2C7/7/](http://jsfiddle.net/zn2C7/7/)

```
 var list = $("<ul>");
   function populatedata() {
         $.each(data.FolderList, function (i, folder) {                
            if (folder.ParentFolderID == -1) {
                var item = $("<li>").html(folder.FolderName);

                list.append(item);
                var children = $('<ul>');
                item.append(children);
                checkChild(folder.FolderID, children);                    
            }

        });
        $('body').append(list);
    }

    function checkChild(parentid, parent) {
        $.each(data.FolderList, function (i, folder) {
            if (folder.ParentFolderID == parentid) {
                var item = $("<li>").html(folder.FolderName);                    
                var children = $('<ul>');
                parent.append(item);
                item.append(children);
                checkChild(folder.FolderID, children);                    
            }
            else {
                return ;
            }
        });
    } 
```

可以使用 html 变量来构建它，就像您尝试这样做一样，但是使用 jQuery 的 DOM 操作函数要简单得多（`$('<ul>')`和`$('<li>')`- 创建新元素，[`.append()`](http://api.jquery.com/append/)- 将元素附加到其他元素）

```
function checkChild(parentid) {
            $.each(data.FolderList, function (i, folder) {

                if (folder.ParentFolderID == parentid) {
                    html += '<li><ul>' + folder.FolderName;
                    checkChild(folder.FolderID);
                    html+=</ul></li>
                    return html;
                }
                else {
                    return ;
                }
            });
        } 
```

另外，请注意，在上面的代码中，您是`return html;`从`each`函数回调中执行的。不确定你想得到什么，但[`.each`](http://api.jquery.com/each/)它可能像`break`在常规循环中一样工作（如果你将返回 false）：

> 我们可以通过返回 false 从回调函数中停止循环。

那是来自jquery api页面。

此外，对于此类任务，我更喜欢使用调试器。目前有很多强大的工具可以在浏览器中进行 HTML/CSS/JS 调试。只需按下`F12`Chrome、IE 或 FF（对于最后一个可能需要安装 Firebug 扩展程序），您将获得许多有用的功能以及简单的 JS 调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T12:38:58.930

我已经更新了代码并通过以下方式解决。如果没有任何 li 元素，则代码不会创建不必要的 ul 元素。即如果父级没有子级，则没有 ul。

```
 function populateFolder() {
    var list = $("<ul>").attr({ class: "collapsibleList", id: "folder" });
    $.each(data.FolderList, function (i, folder) {
        if (folder.ParentFolderID == -1) {
            var item = $("<li>").html('<span>' + folder.FolderName +
                        '</span><a href="Docs.html">
                        <div class="view-docs pull-right">View</div></a>');
            checkChild(folder.FolderID, item);
            list.append(item);
    });
    $('#anydiv').append(list);

}

function checkChild(parentid, parent) {
    $.each(data.FolderList, function (i, folder) {
       if (folder.ParentFolderID == parentid) {
          var children = $('<ul>');
          var item = $("<li>").html('<span>' + folder.FolderName 
                    + '</span><a href="Docs.html">
                    <div class="view-docs pull-right">View</div></a></li>');
        children.append(item);
        checkChild(folder.FolderID, item);
        parent.append(children);
    }
    else 
        return;
  });
} 
```

# node.js - 如何为 node.js 安装 zeromq

> ID：14029262
> 
> 赞同：5
> 
> 时间：2012-12-25T09:11:05.307
> 
> 标签：node.js, zeromq

我想在 Windows 7 64 位中为 node.js 安装 zeromq。我试过了

```
npm install zmq 
```

它给了`phython.exe`失踪。安装后`python (2.7.3)`。
它再次给出了一些构建错误，如下所示：

`C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe failed with exit code: 1`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T19:33:48.323

**更新 1**

进行了改进，现在`npm install zmq`可以使用，但我认为您仍然需要 Win SDK 7 和 VS C++ 2010。

**原始答案**

不幸的是`npm install zmq`仍然不起作用，但您可以从本地 repo 安装它。

[mscdex](https://github.com/mscdex)分叉了 zeromq.node 存储库，并添加了 windows 支持，所以只需克隆他的[zeromq.node](https://github.com/mscdex/zeromq.node)

但在构建之前，您需要一些先决条件：

*   Microsoft Visual Studio C++ 2010（[Express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)很好）

*   [适用于 Windows 7 的 Microsoft Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

从开始菜单/Microsoft Windows SDK v7.1 运行 Windows SDK 7.1 命令提示符

转到克隆的目录，然后键入

```
node-gyp configure
node-gyp build 
```

这应该适用于 Windows 7 64 位。我将 zeromq.node 克隆到我的节点项目目录中，所以在我的`app.js`我可以`require('./zeromq.node')`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-05T08:57:49.863

我自己遇到了很多麻烦，经过数小时的阅读和尝试不同的事情后最终安装了它：

1.  安装蟒蛇。确保安装了 Python 2.7.x 而不是 3.x（我使用了[https://www.python.org](https://www.python.org)，但 cygwin 的 python 也可能工作）通过运行以下命令进行确认：

    `$ python -V Python 2.7.9`

2.  设置 PYTHON env 变量，无论你在哪里安装它（或者 cygwin 的 bin 目录，如果以这种方式安装 python）：

    PYTHON=C:\dev\python\python.exe

3.  设置添加到 PATH 变量中的文件夹 python.exe：

    路径=C:\dev\python\;

4.  需要手动安装这个 node-gyp：

    `$ npm install -g node-gyp ... Got slightly further...`

5.  所以我放弃尝试让它与我当前的 Visual C++ 2010 一起安装并让 Visual C++ 2012 工作（认为 2013 也可能工作）：所以安装了' [Visual Studio 2012 Express for Windows Desktop](http://www.microsoft.com/en-us/download/details.aspx?id=34673) '
    应该安装' [2012 Visual C++ Redistributables](http://www.microsoft.com/en-us/download/details.aspx?id=30679) '（如果没有，请单独安装）。

    还已经按照 balazs 的说明安装了“ [Windows7 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279) ”，所以可能也需要它。

    现在在 Windows 命令行上尝试并指定要使用的版本：

    `$ npm install --msvs_version=2012 zmq and it worked!`

    注意：想提一下我已经安装的东西。已经安装了“Visual Studio C++ 2010 Express”（它安装了 Visual C++ 2010 Redistributables）和 Windows7 SDK，因为我有点遵循上面的 balazs 说明。

    然后我尝试安装：'Microsoft Visual Studio 2010 Service Pack 1''Visual C++ SP1 Compiler Update for Windows SDK 7.1'

    由于 2010 年都不起作用，我选择了 2012 年。也许有人可以弄清楚是否可以让它与 C++ 2010 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:43:12.413

我没有查看该包中的最新更改，但我为我们自己的项目编写了[https://github.com/matthiasg/zeromq-node-windows](https://github.com/matthiasg/zeromq-node-windows)，这对 zeromq-node 项目添加了微小的更改以使其在 Windows 中工作。 . 正如自述文件中所说，我不提供支持，但也许这会让你开始？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-01T02:02:59.837

该线程非常有用，这是今天在 Win10 上对我有用的内容：

1.  为 Windows 下载/安装 zmq 二进制文件
2.  下载/安装适用于 windows 的 node.js
3.  如果您有 python3，请获取 miniconda2 或类似的（以下构建步骤需要 python 2）
4.  获取 VS 2013（任何版本都应该这样做）VS '15 目前不起作用
5.  从 python2 提示符：`npm install --msvs_version=2013 zmq`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-28T21:53:57.877

**最新更新：**

Windows 8.1、节点 v4.4.5、npm v3.10.5

1.  确保python2环境照常
2.  安装 Windows SDK（我的 8.1）
3.  安装 VS2015 Community 并选择 Common Tools for Visual C++
4.  ===>`npm -g install npm@next`看到[这个](https://github.com/nodejs/node-gyp/issues/972)
5.  `npm install --msvs_version=2015 zmq`

注意：我不能再用 vs2012 构建，上面所有的建议都不能用构建错误`error c2240 cannot convert from 'v8::Value *' to 'v8:object *volatile'`。也许是因为较新的 nodejs v4.4.5（有人可以澄清这一点？）。

但是使用 vs2015 会产生构建错误`win_delay_load_hook.c(34): error C2373: '__pfnDliNotifyHook2'`。`npm@next`我使用如上所述的方法修复此问题。

# gwt - GWT 取消选择事件

> ID：14029266
> 
> 赞同：2
> 
> 时间：2012-12-25T09:12:07.473
> 
> 标签：gwt, tree

好的，我的问题很简单。我可以在课堂上添加类似`EventPreview`的东西吗？`SelectionEvent``Tree`

我需要它，因为在树元素之间切换会初始化屏幕的其他部分，这可能并不总是可能的（例如要求确认）......

```
structTree.addSelectionHandler(new SelectionHandler<TreeItem>() {
    @Override
    public void onSelection(SelectionEvent<TreeItem> event) {
        // Do something, or maybe cancel selection
    }
}); 
```

## 编辑

如果我`EventPreview`为此添加`ClickEvent`可能会成功，但我想知道是否有更清洁的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:55:45.293

`EventPreview`已弃用，使用`NativePreviewHandler`and`NativePreviewEvent`代替。

事件预览的想法是针对用户交互的 DOM 事件——描述用户在与浏览器交互时的物理动作的事件。这就是为什么取消`ClickEvent`.

相反，`SelectionEvent`它是一个逻辑事件——它源于 GWT 代码，并描述了小部件从用户的“物理”事件中看到的意图。

但是，仍然有一种方法可以防止`SelectionEvent`s 发生，但它在 GWT 中的使用不一致 -`Tree`小部件不使用它，所以这次它不会帮助你。其他小部件，例如`TabLayoutPanel`在实际触发之前`StackLayoutPanel`触发 a ，让您有机会在实际发生选择之前使用它。`BeforeSelectionEvent``SelectionEvent``cancel()`

# c# - 在组合框中显示有限的项目

> ID：14029267
> 
> 赞同：2
> 
> 时间：2012-12-25T09:12:09.887
> 
> 标签：c#, .net

在我的项目中，我有一个组合框，里面有 60 个值。当我开始运行应用程序时，我打开组合框来选择一个值，它涵盖了我的所有表单应用程序，因为它有很多值。它在视觉上看起来并不好。当我打开组合框选择一个值时，我只想显示其中的 5 个，用户可以通过向下滚动来选择其他 55 个项目。我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:21:41.720

您应该将`MaxDropDownItems`属性设置`combobox`为 5 和`IntegralHeight = true`

当 IntegralHeight 属性设置为 true 时，控件会自动调整大小以确保项目不会部分显示。如果要根据表单的空间要求保持 ComboBox 的原始大小，请将此属性设置为 false。如果 ComboBox 不包含任何项目，则此属性无效。

**编辑：**另一种可能性是直接设置 dropdownheight

```
comboBox1.DropDownHeight = comboBox1.Font.Height * 5; 
```

# bash - 64 位 Ubuntu 上的脚本问题

> ID：14029270
> 
> 赞同：0
> 
> 时间：2012-12-25T09:12:22.023
> 
> 标签：bash, postgresql, gcc, ubuntu, 64-bit

我`https://github.com/reddit/reddit/blob/master/install-reddit.sh`在多台机器上使用过一个脚本，每次都能完美运行。现在，一台具有 Ubuntu 64 位的服务器，我遇到了脚本的一部分问题。

```
###############################################################################
# Configure PostgreSQL
###############################################################################
SQL="SELECT COUNT(1) FROM pg_catalog.pg_database WHERE datname = 'reddit';"
IS_DATABASE_CREATED=$(sudo -u postgres psql -t -c "$SQL")

if [ $IS_DATABASE_CREATED -ne 1 ]; then
    cat <<PGSCRIPT | sudo -u postgres psql
CREATE DATABASE reddit WITH ENCODING = 'utf8' TEMPLATE template0;
CREATE USER reddit WITH PASSWORD 'password';
PGSCRIPT
fi

sudo -u postgres psql reddit < $REDDIT_HOME/reddit/sql/functions.sql 
```

这基本上破坏了整个安装过程。我已经尝试从脚本手动运行这些行，`sudo -u postgres psql`但我根本没有得到任何输出。似乎数据库创建不完整，因为如果我按照手动设置 POSTGRESQL 的指南进行操作，命令将`sudo -u postgres initdb -D /usr/local/pgsql/data`失败并显示以下输出：

```
sudo: initdb: command not found 
```

我也尝试在路径中添加东西，`export PATH=$PATH:/usr/lib/postgresql/bin`但也没有帮助，initdb 将无法启动。安装了 Postgresql，所以我真的不知道是什么原因造成的。

的输出`/etc/init.d/postgresql status`是`Running clusters: 9.1/main`服务正在运行。

我什至尝试安装 ia32-libs 和 libc6-i386 但这也没有太大区别。

更新：在处理完该问题后，如评论中所述，我遇到了另一个问题。我也将其放在这里，因为我认为它也与此密切相关。然后我收到以下错误：

```
+ sudo -u reddit make pyx
[+] including definitions from Makefile.py
python setup.py build_ext --inplace
/home/reddit/reddit/r2/ez_setup.py:101: UserWarning: Module ez_setup was already imported from /home/reddit/reddit/r2/ez_setup.pyc, but /usr/lib/pymodules/python2.7 is being added to sys.path
  import pkg_resources
running build_ext
skipping './r2/models/_builder.c' Cython extension (up-to-date)
building 'r2.models._builder' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c ./r2/models/_builder.c -o build/temp.linux-x86_64-2.7/./r2/models/_builder.o
unable to execute gcc: Permission denied
error: command 'gcc' failed with exit status 1 
```

所以，这个 gcc 事情现在引起了问题。这行触发了这个： cd $REDDIT_HOME/reddit/r2 sudo -u $REDDIT_OWNER make pyx # generate the .c files from .pyx

$REDDIT_OWNER 是 reddit，因此它以该用户身份运行，并最终导致这些错误。任何人都可以为此提出一个潜在的解决方案吗？make: *** [build/pyx-buildstamp] 错误 1

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:59:22.810

您可能会遇到 PATH 被 sudo 重置的问题。看[这里](https://stackoverflow.com/questions/257616/sudo-changes-path-why)

# qt - 未准备好数据的 Qt TableModel

> ID：14029271
> 
> 赞同：0
> 
> 时间：2012-12-25T09:12:21.703
> 
> 标签：qt, tablemodel, qabstracttablemodel

因此，我的对话框中有 QTableView、子类 QAbstractTableModel，以及要使用`Qt::DecorationRole`. `MyModel::data(const QModelIndex &index, int role) const`通过重新实现的方法调用的数据。我可以使用`QNetworkAccessManager`. 问题是，如何在为特定单元格调用数据方法之前获取图像，或者在图像准备好时调用数据？当访问管理器完成加载后，它只能调用插槽。

# html - CSS背景图像不显示

> ID：14029277
> 
> 赞同：45
> 
> 时间：2012-12-25T09:13:12.670
> 
> 标签：html, css, path, background-image

我有一个 HTML 文件，其中`img`包含一个名为`debut_dark.png`. 在我的 CSS 文件中，我有：

```
body { 
    background: url(/img/debut_dark.png) repeat 0 0;
} 
```

HTML 文件具有 body 标记，并且包含适当的 CSS 文件。我确信 CSS 文件已正确包含，因为其他所有内容均已正确格式化。

背景图像未显示，我只看到白色背景。任何想法如何解决这个问题，甚至如何调试它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-25T09:19:38.510

根据您的 CSS 文件路径，我假设它与您的 HTML 页面位于同一目录，您必须更改`url`如下：

```
body { background: url(img/debut_dark.png) repeat 0 0; } 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-25T09:21:16.570

你应该这样使用：

```
        身体 {
            背景：url（“img/debut_dark.png”）重复0 0；
        }

        身体 {
            背景：url（“../img/debut_dark.png”）重复0 0；
        }

        身体 {
            背景图像： url("../img/debut_dark.png") 重复 0 0;
        }

```

或尝试使用 Firefox Firebug 工具检查 CSS 规则。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-05-11T17:57:15.467

我知道这并不能解决 OP 的确切情况，但是对于来自 Google 的其他人，不要忘记`display: block;`根据元素类型进行尝试。我有图像在一个`<i>`，但它没有出现......

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-25T09:21:03.000

确保你的身体有一个高度，例如：

```
body { 
    background: url(/img/debut_dark.png) repeat;
    min-height: 100%;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-12T05:25:13.533

我有同样的问题。但它适用于我

```
background: url(../img/debut_dark.png) repeat 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-22T11:08:16.027

您必须在 URL 中使用相对路径。我认为您在 index.html 所在的根目录中创建了两个文件夹。一个是“CSS”文件夹，另一个是“img”文件夹。

现在，如果您必须访问 css 文件中的“img”文件夹。因此，您必须使用“../”语法在根目录中返回一次。然后使用“../img”语法移动到“img”文件夹。然后写入图像名称“../img/debut_dark.png”。

```
body { 
    background: url("../img/debut_dark.png") repeat 0 0;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-19T12:15:49.660

```
body { 
        background: url("../img/debut_dark.png") no-repeat center center fixed;
    } 
```

为我工作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-12T15:33:25.060

除了

背景图像：url（'path'）不重复0 0；

1.  为元素设置维度

    > 宽度：x；高度：y；

2.  > 背景大小：100%

    *   此属性有助于使图像适合您为元素定义的上述尺寸。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-05-22T02:40:03.557

我遇到过同样的问题。对我来说，它适用于：

```
 background: url("../img/green.jpg") no-repeat center bottom/cover;
  height: 100vh; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-20T20:57:03.343

我在本地计算机上使用嵌入式 CSS。我将 atom.jpg 文件与我的 html 文件放在同一个文件夹中，然后这段代码就起作用了：

```
background-image:url(atom.jpg); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-13T14:07:17.820

```
background : url (/img.. ) 
```

注意：如果您的 css 在不同的文件夹中，请确保使用正斜杠开始图像路径。

它对我有用。！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-25T13:23:52.397

`<link>`html 文件中的内部标签 内部标签的 href`<link>`在实际路径之前放置一个点 (.)

如果样式表的路径是 /css/style.css 则参考如下

```
<link rel="stylesheet" href="./img/image.jpg"> 
```

然后在 .css 文件中

在图像存储的实际路径之前放一个双点（..）将是这样的

```
body{background-image : url("../img/image.jpg");} 
```

上述方法对我有用

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-02T06:23:53.207

在这个问题中，我们将描述如何使用外部 css 进行图像调用

喜欢：资产/图像/laravelamit.jpg

然后你必须去 assets/css/style.css 并打开并放置

背景：网址（../images/laravelamit.jpg）；

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-19T07:53:54.760

好吧，我发现这个属性会在提供完整位置时显示图像。我只是将该图像上传到我的服务器上，并将该图像的位置链接到 background-image:url("xxxxx.xxx"); 属性，它终于起作用了，但是如果你们没有服务器，那么尝试通过进入该图像的属性来在属性中输入图像的完整位置。虽然我在 HTML 文件的标签中使用了这个属性，但它肯定也适用于 CSS 文件。如果该方法不起作用，请尝试将您的图像上传到互联网上，例如 behance、facebook、instagram 等，并检查图像并将该位置复制到您的属性中。希望这会奏效

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-04-04T13:44:58.727

我遇到了同样的问题，在我删除重复 0 0 部分后，它解决了我的问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-04-24T10:36:01.813

如果您的路径是正确的，那么我认为您的正文部分中没有任何元素。只需定义身体的高度，您的代码就可以工作。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-11-27T22:15:37.730

您可以尝试使用`!important`语法，它应该可以正常工作：

`background: url(/img/debut_dark.png) repeat 0 0 !important;`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-07-07T05:46:44.940

如果你在本地开发检查你是否在 VSCode 中处理 SCSS 到 CSS Live sass 编译器

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2018-01-05T15:52:15.740

基本上问题在于文件路径。url 开头的正斜杠使它在根目录中查找文件。删除它，它将是一个相对于这个 css 文件的路径 - 像这样： `background-image: url(img/debut_dark.png);`

如果您使用的是 Atom，复制图像的项目路径有时会在复制的路径中包含正斜杠，因此请小心。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2021-01-13T11:08:15.967

如果您使用的是 vs 代码，请尝试使用 background:url("img/bimg.jpg") 而不是 background:url('img/bimg.jpg') 我的工作没有什么我用 " 替换了 '

# django - 如何将 django 模板变量呈现为 html？

> ID：14029280
> 
> 赞同：13
> 
> 时间：2012-12-25T09:13:56.017
> 
> 标签：django, string, django-templates, render, html

我想要的是堆栈溢出。用户可以 HTML 格式化他们的文本输入，并且页面应该以完全相同的方式呈现，

我使用`wmd.js`来存储格式化的输入，考虑我有一个`{{variable}}`带有字符串值的上下文变量`"<p>something</p>"`。当我渲染模板时，

```
{{variable}} outputs <p>something</p>

and {{variable|safe}} also output <p>something</p> 
```

它将 html 标记显示为页面中的文本。如何在 中呈现 HTML 标记，`{{variable}}`但不将它们显示为纯文本。

模板

```
 <div id='thread_answer_content' >
        {% for answer in question.answer_set.all %}
            {{answer.answerbody|safe}}
        {% endfor %}
    </div> 
```

风景

```
def detail(request,question_id):
q = get_object_or_404(Question,pk=question_id)
return render_to_response('CODE/detail.html',{'question':q},
        context_instance = RequestContext(request)
    ) 
```

这是问题的 django 管理页面，顺便说一下，我正在使用 sqlite3 ![在此处输入图像描述](../Images/7169df398c1b46427b3989a7105e46e1.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-27T13:38:58.857

use tag : [http://docs.djangoproject.com/en/dev/ref/templates/builtins/#autoescape](http://docs.djangoproject.com/en/dev/ref/templates/builtins/#autoescape)

```
{% autoescape off %}{{ variable }}{% endautoescape %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:04:56.593

对于简单的 HTML 格式，使用`<p>{{something}}</p>`. 而Javascript的方式是，

```
<script type="text/javascript">
    var variable  =  "<p>{{something}}</p>";
    document.write(variable);
</script> 
```

如果它`{{something}}`本身包含 HTML 标签，那么`{{something|safe}}`它本身应该可以工作，除非你有`{% autoescape on %}`. 有关更多过滤和格式化，请参阅[内置模板标签和过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T09:50:02.360

您可能想要使用[`escape`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#escape)来渲染它，而不是`safe`.

```
{{ variable|escape }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T20:29:07.600

我认为另一种方法是使用[`firstof`标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#firstof)：

> 请注意，firstof 标记中包含的变量不会被转义。这是因为模板标签不会转义它们的内容。打印变量中包含的任何 HTML 或 Javascript 代码都将按原样呈现，这可能会导致安全问题。如果您需要转义 firstof 标签中的变量，您必须明确地这样做

```
{% firstof variable %} 
```

# android - android位置提醒项目

> ID：14029285
> 
> 赞同：2
> 
> 时间：2012-12-25T09:14:17.507
> 
> 标签：android, google-maps, location

我是 android 应用程序开发的新手。目前，我正在开发一个名为位置提醒的项目。触摸某个位置时如何在地图上做标记？并且在标记位置之后，它应该是可点击的并且应该指向其他活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:15:29.890

[你想要的例子](http://www.androidhive.info/2012/01/android-working-with-google-maps/)

**只需通过上面的链接它会帮助你.....**

# ios - 设置雇用位图数据在 ipad 上得到延迟

> ID：14029288
> 
> 赞同：1
> 
> 时间：2012-12-25T09:15:12.797
> 
> 标签：ios, ipad, air, bitmapdata

我有两个具有两种分辨率的图像：HD（2500x1500px）和 LD。我在预览中使用 LD，在详细视图中使用 HD。项目加载时，它将加载的 BitmapData 作为 bitmapData 变量存储到系统内存中（lowres 和租用为 BitmapData）。但是当我调用高清模式时，它会在显示高清图像之前有 1-2 秒的延迟。一点代码：

```
var hires:BitmapData;
...
//when Loader complete
hires = e.currentTarget.content.bitmapData;
...
//Setting BD
this.BitmapData = hires;//--> Too Sloooooww 
```

怎样才能摆脱预约高清bitmapData的延迟呢？

# php - 如何删除mogodb中的json元素？

> ID：14029289
> 
> 赞同：1
> 
> 时间：2012-12-25T09:15:13.297
> 
> 标签：php, mongodb, mongodb-php

以下是这样的内容`mongodb`：

```
{
"_id": 74924,
"bangs": {
    "436": {
        "join_time": 1345624851,
        "status": 1,
        "scores": 0
    },
    "446": {
        "join_time": 1355727257,
        "status": 1,
        "scores": 0
    }
},
"_id": 74926,
"bangs": {
    "436": {
        "join_time": 1345624851,
        "status": 1,
        "scores": 0
    },
    "446": {
        "join_time": 1355727257,
        "status": 1,
        "scores": 0
    }
 }
} 
```

我想删除：

```
"436": {
        "join_time": 1345624851,
        "status": 1,
        "scores": 0
    },
 where _id=74924 
```

结果将是：

```
{
"_id": 74924,
"bangs": {
    "446": {
        "join_time": 1355727257,
        "status": 1,
        "scores": 0
    }
},
"_id": 74926,
"bangs": {
    "436": {
        "join_time": 1345624851,
        "status": 1,
        "scores": 0
    },
    "446": {
        "join_time": 1355727257,
        "status": 1,
        "scores": 0
    }
 }
} 
```

我写了这样的代码：

```
$mongo->users->users->update(array('_id'=>74924), array('$pull'=>array('bangs'=>436))); 
```

但是记录没有删除

我该如何编写代码？
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:44:41.837

您可以使用以下方法将其删除：

```
db.test.update( { _id:74924 }, { $unset: {"bangs.436":1} } )

// I think this can be written in php like this:
$mongo->users->users->update(array('_id'=>74924), array('$unset'=>array('bangs.436'=>1))); 
```

# ios - 如何使用 CAGradientLayer 的位置、起点、终点？

> ID：14029290
> 
> 赞同：3
> 
> 时间：2012-12-25T09:15:24.407
> 
> 标签：ios, cagradientlayer

我曾尝试`CAGradientLayer`用作背景颜色，但我无法理解属性的`CAGradientLayer`含义。那我就做不出很酷的效果了。那么我该如何使用它们呢？

# sencha-touch - Ext.carousel.Carousel 的点击事件

> ID：14029292
> 
> 赞同：1
> 
> 时间：2012-12-25T09:15:31.390
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

Ext.carousel.Carousel 似乎没有点击事件。如何让轮播响应点击事件？（点击，itemtap等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T11:04:42.933

点击事件不能直接作用于组件。相反，它们在组件的元素上工作正常。因此，对于您的情况，您可以像这样使用它：

在您的控制器的“控制”中，

```
control : {
     // Your carousel reference
    "carousel" : {
         initialize : function(carousel){
             carousel.element.on('tap', function(e, el){
                 // Here you will get the target element
                 console.log(e.target, el);
             }, this);
         }
     }
} 
```

如果您只想在某些类型的元素上捕获点击事件，则可以通过这种方式使用委托：

```
carousel.element.on('tap', function(e, el){
    // Here you will get the target element
    console.log(e.target, el);
}, this, {
    delegate : 'div.my-element'
}); 
```

希望这有帮助。

# java - 使用 SimpleCursorAdapter 和 FragmentActivity 为 SMS URI 返回空

> ID：14029301
> 
> 赞同：1
> 
> 时间：2012-12-25T09:16:55.510
> 
> 标签：java, android, simplecursoradapter, android-fragmentactivity

我遵循了有效的导航示例。构建一个新的应用程序。基本上我想要的是每条短信都应该出现在我的应用程序中的一个新屏幕（片段）上，并且可以滚动，就像 Gmail 应用程序中的 Gmail 消息一样

这是相同的代码

```
package com.example.android.effectivenavigation;

import java.sql.Date;
import java.text.SimpleDateFormat;
import java.util.Locale;

import android.app.ActionBar;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.app.LoaderManager;
import android.support.v4.app.NavUtils;
import android.support.v4.app.TaskStackBuilder;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.view.ViewPager;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.LayoutInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class CollectionDemoActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor> {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments representing each object in a
     * collection. We use a {@link android.support.v4.app.FragmentStatePagerAdapter} derivative, which will destroy and
     * re-create fragments as needed, saving and restoring their state in the process. This is important to conserve
     * memory and is a best practice when allowing navigation between objects in a potentially large collection.
     */
    DemoCollectionPagerAdapter mDemoCollectionPagerAdapter;

    // This is the Adapter being used to display the list's data.
    SimpleCursorAdapter mAdapter;

    /**
     * The {@link android.support.v4.view.ViewPager} that will display the object collection.
     */
    ViewPager mViewPager;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_collection_demo);

        //-----------------------THIS BLOCK WORK JUST FINE--------------------------
        Cursor cursor = getContentResolver().query(Uri.parse("content://sms/inbox"), null, null, null, null);

        cursor.moveToFirst();
        do {
            String msgData = "a";
            for (int idx = 0; idx < cursor.getColumnCount(); idx++) {
                msgData += " " + cursor.getColumnName(idx) + ":" + cursor.getString(idx);
            }
            Date date = new Date(Long.parseLong(cursor.getString(5)));
            SimpleDateFormat sdf = new SimpleDateFormat("E yyyy.MM.dd 'at' hh:mm:ss a zzz",Locale.ENGLISH);
            System.out.println("Cursor123"+msgData + "\r Dateeeee" + sdf.format(date));
        } while (cursor.moveToNext());
        //-----------------------------END BLOCK ----------------------------------

        // Create an adapter that when requested, will return a fragment representing an object in
        // the collection.
        //
        // ViewPager and its adapters use support library fragments, so we must use
        // getSupportFragmentManager.
        mDemoCollectionPagerAdapter = new DemoCollectionPagerAdapter(getSupportFragmentManager());

        // Set up action bar.
        final ActionBar actionBar = getActionBar();

        // Specify that the Home button should show an "Up" caret, indicating that touching the
        // button will take the user one step up in the application's hierarchy.
        actionBar.setDisplayHomeAsUpEnabled(true);

        // Set up the ViewPager, attaching the adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);

        getSupportLoaderManager().initLoader(0, null, this);
        mAdapter = new SimpleCursorAdapter(this, R.layout.activity_collection_demo, null, null, null, 0);
        Cursor cursor1 = mAdapter.getCursor();
        mDemoCollectionPagerAdapter.setCount(cursor1.getCount());
        mViewPager.setAdapter(mDemoCollectionPagerAdapter);

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:

            Intent upIntent = new Intent(this, MainActivity.class);
            if (NavUtils.shouldUpRecreateTask(this, upIntent)) {
                // This activity is not part of the application's task, so create a new task
                // with a synthesized back stack.
                TaskStackBuilder.from(this)
                // If there are ancestor activities, they should be added here.
                        .addNextIntent(upIntent).startActivities();
                finish();
            } else {
                // This activity is part of the application's task, so simply
                // navigate up to the hierarchical parent activity.
                NavUtils.navigateUpTo(this, upIntent);
            }
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    /**
     * A {@link android.support.v4.app.FragmentStatePagerAdapter} that returns a fragment representing an object in the
     * collection.
     */
    public static class DemoCollectionPagerAdapter extends FragmentStatePagerAdapter {

        public DemoCollectionPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        private int count;
        @Override
        public Fragment getItem(int i) {
            Fragment fragment = new DemoObjectFragment();
            Bundle args = new Bundle();
            args.putInt(DemoObjectFragment.ARG_OBJECT, i + 1); 
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            // temporarily setting count to 5
            return 5;
        }

        public void setCount( int iCount) {
            this.count=iCount;
        }
        @Override
        public CharSequence getPageTitle(int position) {
            return "OBJECT " + (position + 1);
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply displays dummy text.
     */
    public static class DemoObjectFragment extends Fragment {

        public static final String ARG_OBJECT = "object";
        Cursor cursor;

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_collection_object, container, false);
            Bundle args = getArguments();
            ((TextView) rootView.findViewById(android.R.id.text1)).setText(Integer.toString(args.getInt(ARG_OBJECT)));

            // cursor.move(args.getInt(ARG_OBJECT));

            TextView tv1 = (TextView) getActivity().findViewById(R.id.editText1);
            tv1.setText("Test");

            return rootView;
        }

    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {

        Uri baseUri = Uri.parse("content://sms/inbox");

        return new CursorLoader(this, baseUri, null, null, null, null);

    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        mAdapter.swapCursor(data);

    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        mAdapter.swapCursor(null);
    }
} 
```

这是异常的堆栈跟踪：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.effectivenavigation/com.example.android.effectivenavigation.CollectionDemoActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    at android.app.ActivityThread.access$600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at com.example.android.effectivenavigation.CollectionDemoActivity.onCreate(CollectionDemoActivity.java:108)
    at android.app.Activity.performCreate(Activity.java:4465)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    ... 11 more 
```

第 108 行对应于

> “mDemoCollectionPagerAdapter.setCount(cursor1.getCount());”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:40:25.133

那时你的`SimpleCursorAdapter`开始（并且一直到`Loader`它的工作）是一个空值`Cursor`，所以：

```
mDemoCollectionPagerAdapter.setCount(cursor1.getCount()); 
```

将抛出该异常，因为`cursor1`is `null`。相反，您应该在回调中更新`ViewPager`'s`count`变量，`onLoadFinished`因为此时 's`Cursor`应该是有效的，并且您可以获得其中的行数。

# c# - 以编程方式添加应用程序栏时出现异常

> ID：14029308
> 
> 赞同：0
> 
> 时间：2012-12-25T09:17:52.843
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone-8, application-bar

在我的应用程序中，我想在运行时添加应用程序栏。我有一个包含应用程序栏名称和图像 uri 的列表。我必须根据列表添加应用程序栏。但是我得到一个异常“指定参数超出有效值的范围”。谁能给我一个解决方案？下面是我的代码。

```
public void createObjectsForApplicationbar(List<AppBarDetails> appbarList)
    {
        int i = 0;
        foreach (Others menus in appbarList)
        {                                                          
          UpdateAppbarButton(i, menus.menu_image, menus.name, true, ApplicationBarIconButton_Click);
          i++;
        }
        ShowButtons(menuNames1);
    }                                                                                 

private void UpdateAppbarButton(int index, string uriString, string text, bool visibility, EventHandler handler)
    {
        ApplicationBarIconButton button1 = null;
        this.ApplicationBar = new ApplicationBar();
        this.ApplicationBar.IsVisible = true;
        this.ApplicationBar.Opacity = 1;
        this.ApplicationBar.IsMenuEnabled = true;
        if (this.ApplicationBar.Buttons.Count > index)
        {
            button1 = this.ApplicationBar.Buttons[index] as ApplicationBarIconButton;
        }

        if (button1 != null)
        {
            {
                this.ApplicationBar.Buttons.Remove(button1);
            }
        }
        if (visibility == true)
        {
            button1 = new ApplicationBarIconButton(new Uri(uriString, UriKind.RelativeOrAbsolute));
            button1.Text = text;
            button1.Click += handler;
            this.ApplicationBar.Buttons.Insert(index, button1);// here i got the exception "Specified argument was out of the range of valid values when the value of  i=1"
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:28:17.960

您应该重新考虑条件的逻辑。

```
if (this.ApplicationBar.Buttons.Count > index)
            {
                button1 = this.ApplicationBar.Buttons[index] as ApplicationBarIconButton;

                this.ApplicationBar.Buttons.Remove(button1);

                if (visibility == true)
                {
                    button1 = new ApplicationBarIconButton(new Uri(uriString, UriKind.RelativeOrAbsolute));
                    button1.Text = text;
                    button1.Click += handler;
                    this.ApplicationBar.Buttons.Insert(index, button1);
                }
            }

            else
            // insert it anyway?
            {
                if (visibility == true)
                {
                    button1 = new ApplicationBarIconButton(new Uri(uriString, UriKind.RelativeOrAbsolute));
                    button1.Text = text;
                    button1.Click += handler;
                    this.ApplicationBar.Buttons.Add(button1);
                }
            } 
```

不确定，你真正想要什么，但这将毫无例外地工作。

# javascript - 如何使画布可滚动以包含扫描的多页pdf？

> ID：14029310
> 
> 赞同：4
> 
> 时间：2012-12-25T09:17:53.330
> 
> 标签：javascript, asp.net, html, pdf, canvas

我是 HTML5 的初学者。

我用[画布](http://www.codicode.com/art/how_to_draw_on_a_html5_canvas_with_a_mouse.aspx)在上面画画，我想获得以下能力：

* * *

1.  允许画布可扩展，因此如果图像设置为`scanned pdfs`，我可以显示所有图像（pdf 页面）。

2.  我想要通过 canvas 的 (Undo & Redo) 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:51:33.997

我之前通过使用 toDataUrl 方法将画布状态存储到 undo_array 来完成此操作：

```
var undo_array = []; 
```

所以在你做任何改变之前：

```
undo_array.push(myCanvas.toDataURL("image/png")); 
```

现在，当按下撤消按钮时，只需恢复上一张图片：

```
var myImg = new Image();
oImg.onload = function() {
  var ctx = document.getElementById("canvasID").getContext("2d");       
  ctx.drawImage(myImg, 0, 0);
}
myImg.src = undo_array.pop(); 
```

但如果您还更改了画布的抓取，我想您可以使用另一个数组来存储/恢复抓取更改。

# sql - 如何为三个表的插入创建 SQL 触发器

> ID：14029312
> 
> 赞同：3
> 
> 时间：2012-12-25T09:18:06.573
> 
> 标签：sql, triggers, insert, sql-update

我想创建如下 SQL 触发器：

```
CREATE TRIGGER Multi_Insert ON ITEMS, COMPONENT, LINK_INFO
FOR INSERT  
AS  
INSERT INTO Multi_Insert (ACTION, PUBLICATION_ID, ITEM_REFERENCE_ID, ITEM_TYPE, LAST_PUBLISHED_DATE, URL, SCHEMA_ID)  
SELECT 'ADD', PUBLICATION_ID, ITEM_REFERENCE_ID, ITEM_TYPE, LAST_PUBLISHED_DATE, URL, SCHEMA_ID  
FROM inserted 
```

在上面的触发器中，所有细节都来自一个表`ITEMS`，现在一些值已移动到其他表，例如`SCHEMA_ID`now in`COMPONENT`和`URL`in `LINK_INFO`。

实际上在`insert/update/delete`上面的表中，我们将更新，插入和删除`Multi_Insert`表，现在我们可以为每个表的插入事件编写三个触发器 insert `ITEMS`, `COMPONENT`, `LINK_INFO`，但是我想只使用一个触发器来实现这一点

那有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:24:59.060

```
DECLARE @i INT, @d INT;
SELECT @i = COUNT(*) FROM inserted;
SELECT @d = COUNT(*) FROM deleted;
IF @i + @d > 0
BEGIN
    IF @i > 0 AND @d = 0
        -- insert
    IF @i > 0 AND @d > 0
        -- update
    IF @i = 0 AND @d > 0
        -- delete
END 
```

正如我告诉你的，我不太清楚你的问题。而且，无论如何，我从你那里得到了问题。我写了简单的查询，以便您可以参考并相应地使用它。

从上面的查询`@d`和`@i`声明的两个变量以及从第二行和第三行开始，我正在存储`count`来自不同表的（行数）。然后，我正在检查表是否有某些行的值。然后，执行`insert`,`update`并`delete`在检查表是否有某些行之后。现在，那有什么困难的部分？我给了你，你如何在一个休息中完成这三个动作`trigger`取决于你，你如何使用它们。你也可以参考这个[链接](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/4a8241a1-d498-4ddb-834e-bbf0e38b4c0b/)

# php - 使用来自单独数据库的数组过滤数据库查询结果

> ID：14029314
> 
> 赞同：0
> 
> 时间：2012-12-25T09:18:19.397
> 
> 标签：php, database, codeigniter

我有一堆网站都从一个数据库中提取数据。所有这些几乎都是相同的，并且建立在 CodeIgniter 之上。

然后每个人都有一个单独的数据库，其中包含特定于该站点的数据。

通用数据库：TABLE 'courses' = 列：id、course_name、price、external_link、tracking_link

站点特定数据库：TABLE 'courses' = 列：id、active、description

每个站点从通用数据库中提取一个课程和课程数据池，然后每个站点可以确定哪些课程是“活动的”。我可以从站点特定的数据库中获取“活动”= 1 的行的所有 ID，并将它们传递给一个数组。

但后来我想使用该查询中的 id 作为通用数据库上的过滤器，将课程数据拉入网站的各个部分。

这是我的模型：

```
public function getActiveCourses() {

    $local_db = $this->load->database('local', TRUE);
    $universal_db = $this->load->database('universal', TRUE);       

    $activeCourses =    $local_db
                ->where('active', 1)
                ->select('id')
                ->get('courses');
    $activeList = $activeCourses->result_array();

    $allCourses =   $universal_db
            ->where('id', $activeList)
            ->get('courses');

    return $allCourses->result_array();

} 
```

但我收到以下错误

```
 Error Number: 1054

 Unknown column 'Array' in 'where clause'

 SELECT * FROM (`courses`) WHERE `id` = Array

 Filename: /models/courses.php

 Line Number: 39 
```

第 39 行是：

```
$allCourses =       $universal_db
            ->where('id', $activeList)
            ->get('courses');  <== Line 39

return $allCourses->result_array(); 
```

我一直在搜索和玩这个几个小时。任何帮助都非常感谢。

CI 和 php 的新手，因此可以在必要时提供任何进一步的详细信息。不确定，最需要的是什么。

特雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:21:06.240

好吧，$activeList 是一个数组，但您需要提供一个值：

```
$activeList = $activeCourses->result_array(); // see, "result_array"
// here you're returning the row in array format (array ['id'] =>...)
$allCourses =   $universal_db
            ->where('id', $activeList)  // here are you using the whole array!
            ->get('courses'); 
```

**应该是这样的：**

```
$allCourses =   $universal_db
            ->where('id', $activeList['id']) // passing the specific array index
            ->get('courses'); 
```

# sql-server - 实体框架 - 从先前加载的实体中释放内存

> ID：14029317
> 
> 赞同：-1
> 
> 时间：2012-12-25T09:19:25.827
> 
> 标签：sql-server, wpf, entity-framework

我正在寻找一种非常快速的方法来释放（分离）部分或完整的对象集，而不会删除其他类型的对象集实体。

在我们的场景中，我们使用了很多带有主要对象上下文的对象集。有些表将来会有非常大量的数据，我们不想完全加载到内存中。只有最后一年的数据将与起始过滤器一起加载，如果用户愿意，他可以将过滤器更改为其他内容。过滤部分工作起来很简单，但是如果过滤器只加载以前尚未加载的实体，则旧实体将由 objectcontext 保存在内存中。在速度非常快的计算机上，分离 1-2000 个实体可能需要 4-5 秒。这即使对我来说也是不可接受的，尤其是只需更换一次过滤器，这个数字就可以而且将超过 40000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:41:02.240

如果您使用实体框架，这应该不是问题，因为它被设计为使用。

EF 被设计为具有短暂的对象上下文。您为每个操作创建一个上下文，并在操作完成后将其销毁。让对象上下文长时间保持活动状态是一个坏主意，尽管对于桌面应用程序来说并没有 Web 应用程序那么糟糕。

长时间保持上下文几乎没有什么好处。

EF 无法从对象图中删除对象，因为它旨在在您完成操作时破坏上下文。销毁上下文是释放内存的预期方式。

# events - 通过 keydown 识别非拉丁字符

> ID：14029318
> 
> 赞同：0
> 
> 时间：2012-12-25T09:19:37.147
> 
> 标签：events, firefox, keydown, non-latin

某些浏览器存在问题，例如 Firefox。

**代码：**

```
$(document).ready(function(){
     $(this).keydown(function(e){         // Or keyup or keypress
          alert(***look at output***);
     }
} 
```

当键入非拉丁字符为“<”-“б”-“Б”（俄语）时显示：

```
keydown    keyCode=0 which=0 charCode=0
keypress   keyCode=0 which=1073 charCode=1073 char=б
keyup      keyCode=0 which=0 charCode=0 
```

Chrome 中的相同字符显示：

```
keydown    keyCode=188 which=188 charCode=0
keypress   keyCode=1073 which=1073 charCode=1073 char=б
keyup      keyCode=188 which=188 charCode=0 
```

**问题：** 在所有浏览器中识别 keydown 处理程序，而不使用按键（因为不同键盘布局上的不同字符代码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:36:02.340

已解决，但需要按键。通过监听 firefox bug 的特殊按键句柄，当西里尔文键盘布局不起作用时，“<”、“>”。

**解决方案：**在按下键盘按钮时，我们同时听 keydown 和 keypress 处理。如果西里尔字符按下 firefox keyCode 输出为 0 并且 keydown 忽略它。另一方面，keypress 采用 keyCode == 0 并输出“<”或“>”。

# xml - XQuery：检查日期的最快方法

> ID：14029320
> 
> 赞同：1
> 
> 时间：2012-12-25T09:19:43.330
> 
> 标签：xml, date, xquery, exist-db

根据我有这个 XML 文件的事实：

```
<entries>
  <entry date="2012-10-09T12:09:09">...</entry>
  <entry date="2012-10-09T14:19:23">...</entry>
  ...
  <entry date="2012-10-13T00:00:00">...</entry>
</entries> 
```

和`$dateBegin := '2012-10-09T13:00:00'`和`$dateEnd := '2012-10-12T00:00:00'`。我正在寻找一种有效的方法来获取介于 $dateBegin 和 $dateEnd 之间的条目，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:01:13.873

**使用 Rob（OP）确认的事实，即`entry`元素在 XML 文档中出现排序，这可能会更快**：

```
for $dateBegin in xs:dateTime('2012-10-09T13:00:00'),
    $dateEnd in xs:dateTime('2012-10-12T00:00:00')
    return
            /*/*[xs:dateTime(@date) ge $dateBegin
               and
                . << /*/*[xs:dateTime(@date) gt $dateEnd][1]
                ] 
```

**根据提供的 XML 文档评估此 XQuery 时：**

```
<entries>
  <entry date="2012-10-09T12:09:09">...</entry>
  <entry date="2012-10-09T14:19:23">...</entry>
  ...
  <entry date="2012-10-13T00:00:00">...</entry>
</entries> 
```

**产生了想要的正确结果：**

```
<entry date="2012-10-09T14:19:23">...</entry> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T12:53:28.813

您是否在为集合定义的 entry/@date 属性上有一个范围索引？如果不是，我相信这会加快查询速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:26:02.863

好的，所以最后我意识到这是`let $entries := //entry[(xs:dateTime(./@date/string()) ge $dateBegin) and (xs:dateTime(./@date/string()) le $dateEnd)]`可行的。仍然想知道是否存在更好的解决方案。

# javascript - 访问 JSON 文件时出现问题？

> ID：14029322
> 
> 赞同：1
> 
> 时间：2012-12-25T09:19:53.533
> 
> 标签：javascript, ajax, json

这是我的 test.json 文件

```
{
"pageTitle": "Test Page",
"firstName": "Matt"
} 
```

这是我在我的 JS 文件中访问它的方式

```
var jsonObj = {};
var ajaxReq = new XMLHttpRequest();
ajaxReq.overrideMimeType("application/json");
ajaxReq.open('GET', 'path/to/file/test.json', true);
ajaxReq.onreadystatechange = function () 
{
    if (ajaxReq.readyState == 4) 
    {
        jsonObj = ajaxReq.responseText;
        alert(jsonObj.pageTitle);
    }
}
ajaxReq.send(null); 
```

但是当我运行脚本时，警报框会显示“未定义”。谁能告诉我我在这里做错了什么？我已经为此工作了几个小时，似乎无法找到答案。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:23:04.310

该`responseText`属性引用一个包含响应文本的字符串。它不包含 JavaScript 对象，因此没有`pageTitle`属性。

由于该字符串是 JSON 格式，因此可以使用以下[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)方法轻松将其解析为对象：

```
jsonObj = JSON.parse(ajaxReq.responseText); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T09:22:43.537

更新`jsonObj = ajaxReq.responseText;`跟随路线，请尝试！

```
jsonObj = eval('(' + ajaxReq.responseText + ')'); 
```

# mysql - Select * from MyTable where name='%Jack%' in Mysql

> ID：14029331
> 
> 赞同：1
> 
> 时间：2012-12-25T09:21:33.367
> 
> 标签：mysql, database, select

我想在 MySQL 中写一个 SELECT，就像在 MS-SQL 中的这个 SELECT

```
SELECT * FROM MyTable WHERE name='%Jack%' 
```

这个答案：

```
+--------+
| Jack   |
+--------+
| Ajack  | 
+--------+
| jackA  | 
+--------+
| AJackA |
+--------+ 
```

在 MySql 中如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:22:29.947

采用`LIKE`

```
SELECT * FROM MyTable WHERE name LIKE '%Jack%' 
```

如果您对数据使用区分大小写的排序规则，则可以为查询更改它

```
SELECT * FROM MyTable WHERE name LIKE '%Jack%' collate utf8_general_ci 
```

### [SQLFiddle 演示](http://sqlfiddle.com/#!2/89141/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:26:48.367

如果 SQL`LIKE`子句与 % 字符一起使用，那么它将像 Unix 中的元字符 (*) 一样工作，同时在命令提示符下列出所有文件或目录。

没有 % 字符的`LIKE`子句与等号和子句非常相似`WHERE`。

**句法：**

这是 SELECT 命令的通用 SQL 语法以及 LIKE 子句，用于从 MySQL 表中获取数据：

```
SELECT field1, field2,...fieldN table_name1, table_name2...
WHERE field1 LIKE condition1 [AND [OR]] filed2 = 'somevalue' 
```

**在你的情况下使用**

```
SELECT * FROM MyTable WHERE name LIKE '%Jack%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:32:13.243

阅读官方文档[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

您的工作变体是`SELECT * FROM MyTable WHERE name = 'Jack'`;

或者使用你的工作变体是`SELECT * FROM MyTable WHERE name LIKE '%Jack%';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T14:42:36.177

使用**LIKE**运算符和**LOWER**关键字将名称与值匹配。

试试这个：

```
SELECT * FROM MyTable
WHERE LOWER(name)  LIKE '%jack%'; 
```

# regex - 一个快速的正则表达式

> ID：14029336
> 
> 赞同：0
> 
> 时间：2012-12-25T09:22:15.433
> 
> 标签：regex

```
<img src=​"http:​/​/​Some_image.png" alt=​"somethingIdonotneed" 
```

任务：仅对图像位进行分组（`src="this stuff.png"`），忽略其余部分

另外，由于某种原因，在我发现这个的 HTML 中，没有`</img>`. 我以为所有标签都关闭了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:25:27.430

这里的快速修复是

```
/img\s+(src="[^"]+")/ 
```

我强烈建议您不要使用正则表达式来解析 HTML。

* * *

此外，这是一个[自闭合（“void”）标签列表](http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements)。即，它们不需要`</...>`结束标签。

```
<area>
<base>
<basefont>
<br>
<col>
<command>
<embed>
<hr>
<input>
<img>
<keygen>
<link>
<meta>
<param>
<source>
<track>
<wbr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:06:33.163

试试这个，

```
/img[^>]+?(src\s*=\s*\"[^\"]*\")/i 
```

你应该得到第一组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:22:04.673

此正则表达式将捕获（整个，无组）您想要的内容：

```
(?<=<img )src="[^"]+" 
```

# objective-c - 在另一个视图控制器中按下 UIButton 后将字符串存储到 NSMutableArray

> ID：14029337
> 
> 赞同：-1
> 
> 时间：2012-12-25T09:22:24.050
> 
> 标签：objective-c, nsmutablearray

我想知道`NSMutableArray`在用户按下 a 后有可能将数据存储到 a 中`UIButton`。

这里的问题是按钮位于数组之外的另一个视图控制器中。我在`TestViewController`其中添加了一个`buttonPressed:`将产品名称**“Tubolit Schläuche”**发送到`NSMutableArray`in 的地方`FirstViewController`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:25:15.557

创建具有属性的 SingleTone 类是您的`NSMutableArray`. 然后在您的应用中所需的位置使用此类。

# asp.net - 使用 string.format 绑定到文本框

> ID：14029338
> 
> 赞同：4
> 
> 时间：2012-12-25T09:22:29.780
> 
> 标签：asp.net

有没有办法使绑定使用字符串格式？

```
 <asp:TemplateField HeaderText="Price" >
          <EditItemTemplate>

              <asp:TextBox ID="txtPrice" runat="server" Text='<%# String.Foramt("{0:#,###}",Bind("Price")) %>' />

          </EditItemTemplate> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T09:24:36.167

您可以使用以下允许您指定格式的重载：

```
<%# Bind("Price", "{0:#,###}") %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T09:24:06.087

您可以使用 DataBinder.Eval 的重载形式

```
<%# Eval("Price", "{0:#,###}") %> 
```

使用绑定

```
<%= Bind("price", "{0:#,###}") %> 
```

# javascript - 通过 id 查找特定的 json

> ID：14029344
> 
> 赞同：2
> 
> 时间：2012-12-25T09:23:01.143
> 
> 标签：javascript

我有几个名为 的 json var `"jsonObject_" + id`，例如：

```
var jsonObject_123 = ...;

var jsonObject_456 = ...; 
```

等等。所有这些 json 具有相同的格式，相同的键，但不同的值。

我还有一个接收 id 作为参数的方法。

我需要根据id更改正确的jsonObject地址。也就是说，如果参数是`123`，我需要改变`jsonObject_123.address`

如何`jsonObject_123`根据 id 参数获得对的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:26:57.210

首先是关于这里使用的术语的一点评论。您所说的*JSON vars*与 JSON 无关。这些是普通的 javascript 变量。[JSON](http://en.wikipedia.org/wiki/JSON)是一种序列化格式。

现在根据定义这些变量的范围，您可以使用以下内容：

```
var id = '123';
window['jsonObject_' + id].address = 'some address'; 
```

在这个例子中，我假设这些变量是在全局范围内声明的 => 你可以通过`window`对象访问它们。您将不得不根据您的具体情况调整此代码。

但更好的方法是将所有这些变量分组到一个包含对象中：

```
var jsonObject = {};
jsonObject['123'] = { address: 'address 1' };
jsonObject['456'] = { address: 'address 2' };
... 
```

然后当你想访问它时：

```
jsonObject['123'].address = 'some new address'; 
```

# jquery - 处理随着选项卡变化而变化的 DIV 高度

> ID：14029347
> 
> 赞同：0
> 
> 时间：2012-12-25T09:23:05.227
> 
> 标签：jquery, html, height

我有一个带有四个子 div 的顶部 div 的选项卡式设置 - 单击选项卡显示/隐藏使用 jquery 的内容，方法是将新 div 从 display:none 更改为 display:block 并将旧 div 更改为 display:none。我发现这种方法不令人满意，因为有时可见的新 div 的高度比旧的要小，如果向下滚动，页面会“跳转”到页面的新底部。

改变这种行为的最佳方法是什么，以免发生跳跃——例如，尽管切换，仍保持 div 高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:55:38.517

新内容加载后，设置新的滚动条位置。

```
//Permits to reset the scrollbar to the top
$('#content-div').scrollTop(0);

//Permits to reset the scrollbar to the bottom
$('#content-div').scrollTop($('#content-div').height()); 
```

您还可以存储当前位置并在内容加载后应用。

我不知道您如何加载新内容。我假设您正在使用 JQuery`load`函数：

```
$('#content-div').load('new.php',function(){
    $(this).scrollTop(0);
}); 
```

# python - 通过 boost.python 将 char* 的参数转换为 python 以调用 C++ 中的 python 函数

> ID：14029351
> 
> 赞同：1
> 
> 时间：2012-12-25T09:23:15.360
> 
> 标签：python, c++, boost-python

我通过 boost.python 在 c++ 中调用 python 函数。并将 char* 的参数传递给 python 函数。但是出现了错误。TypeError: NO to_python (by-value) converter found for c++ type: char.

以下是代码：C++

```
#include <boost/python.hpp>
#include <boost/module.hpp>
#include <boost/def.hpp>
using namespace boost::python;

void foo(object obj) {
    char *aa="1234abcd";
    obj(aa);
}

BOOST_PYTHON_MODULE(ctopy)
{
    def("foo",foo);
} 
```

Python

```
import ctopy

def test(data)
    print data

t1=ctopy.foo(test) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:11:49.770

使用`const char*`，尤其是在使用字符串文字时：

```
char* bad = "Foo"; // wrong!
bad[0] = 'f'; // undefined behavior! 
```

正确的：

```
const char* s = "Foo"; // correct
obj(s); // automatically converted to python string 
```

或者，您可以使用：

```
std::string s = "Bar"; // ok: std::string
obj(s); // automatically converted to python string

obj("Baz"); // ok: it's actually a const char*

char c = 'X'; // ok, single character
obj(c); // automatically converted to python string

signed char d = 42; // careful!
obj(d); // converted to integer (same for unsigned char) 
```

`boost::python`为Python3和Python3定义了字符串转换`const char*`器。为了选择合适的转换器，boost 会尝试通过专门的模板（为内置类型定义）来匹配类型，如果没有合适的内容，则默认为转换器注册表查找。由于不匹配，因此注册了 no 转换器，转换失败。`std::string``char``std::wstring``char*``const char*``char*`

如果你有一个适当的`char*`，`const char*`在将它传递给 python 之前将其转换为 a ：

```
char* p = new char[4];
memcpy(p,"Foo",4); // include terminating '\0'
obj( const_cast<const char*>(p) );
delete [] p; 
```

# c# - 在单独的窗口中从父页面打开 ASP.NET 页面

> ID：14029353
> 
> 赞同：1
> 
> 时间：2012-12-25T09:23:27.007
> 
> 标签：c#, asp.net

我有两个 asp.net 页面。一个是`parent.aspx`，另一个是`child.aspx`。

`parent.aspx`包含一个按钮 。

每当我单击该按钮时`parent.aspx`，我希望它`child.aspx`出现在父窗口上方我想要大小的另一个窗口中，就像弹出窗口而不是弹出窗口一样。

我已经使用了`window.Open()`脚本功能。但坚持我应该在后端编写什么 c# 代码。

在这种情况下我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:32:42.233

在窗口中传递参数`_blank`，如下所示：-

```
function popWin()
{
  window.open (url, 'mynewwin', '_blank', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=520,modal=yes,alwaysRaised=yes');
} 
```

## 在代码后面

```
void Page_load(object sender, EventArgs e)
{     
 Button1.Attributes.Add( "onclick", "popWin();return false;" ); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T09:39:56.593

请像这样使用：

```
<script>window.open(url, 'nameofurl', 'width=420,height=500 ,scrollbars=yes');return false; </script> 
```

在这里您将设置新窗口的宽度和高度...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T09:55:02.353

也许是这样的

[http://jqueryui.com/dialog/#modal](http://jqueryui.com/dialog/#modal)

或这个

[http://jqueryui.com/tooltip/#video-player](http://jqueryui.com/tooltip/#video-player)

# javascript - Backbone-couchdb 连接器错误：必须指定 url 属性或函数

> ID：14029363
> 
> 赞同：0
> 
> 时间：2012-12-25T09:25:45.220
> 
> 标签：javascript, backbone.js, couchdb, couchapp

我刚开始使用一个简单的“计数器”应用程序来学习主干.js 和 couchdb。可以在此处找到使用本地存储的版本：[demo fiddle](http://jsfiddle.net/jbrichau/xMCzK/)。这是一个简单的应用程序，显示一个可以递增和递减的计数器。计数器的值存储在数据库中。在引用的版本中，我使用的是 localstorage，它似乎工作得很好。

当我将示例转换为使用 couchdb 时，问题就出现了。因此，我创建了一个 couchapp 并修改了代码以与[骨干沙发连接器](https://github.com/janmonschke/backbone-couchdb)一起使用。我还包括了 db 配置属性（如此[处](http://janmonschke.posterous.com/backbone-couchdb-give-your-couchapp-some-back)所述）。代码的相关（改编）部分位于下面（归结为包含 url 属性）。

```
var Counter = Backbone.Model.extend({

  defaults: {
    countervalue: 0
  },

  initialize: function() {
     _.bindAll(this);
  },

  increment: function() {
     this.save({countervalue: this.get('countervalue') + 1});
  },

  decrement: function() {
     this.save({countervalue: this.get('countervalue') - 1});
  }
});

var Counters = Backbone.Collection.extend({

 model: Counter,

 url : "counters",

 initialize: function() {
    this.fetch();
 }
}); 
```

但是，每当我增加或减少计数器时，都会出现以下错误：“必须指定“url”属性或函数”。从文档中，我了解到模型从包含它的集合中获取其 url。好像不是这样的？我究竟做错了什么？

也许应用程序的另一个相关部分是我实例化 Counter 模型的地方（它也可以在演示小提琴中看到）；AppView的初始化方法：

```
 initialize: function() {
        var currentCounter;
        if (theCounters.size() > 0) currentCounter = theCounters.last();
        else {
            currentCounter = new Counter();
            theCounters.push(currentCounter);
        }
        this.counterview = new CounterView({
            model: currentCounter
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:01:21.363

我没有一起使用 CouchDB 和 Backbone.js，但我想解决方法与本说明中的相同。

使用`localStorage`适配器时，您必须在 Collection 上提供一个`localStorage`属性，这是您键入 URL 的唯一位置（实际上是 Collection 的根目录）。但是，当不使用此适配器并尝试同步模型时，此模型需要一个 URL，因为现在 Collection 没有。您在为 Collection 提供 URL 属性时是对的，但在同步整个 Collection 时使用，而不是在同步单个模型时使用。

为了使它工作，你可以为模型提供一个 URL（记住它可以是一个函数而不仅仅是一个字符串）或者你可以使用`urlRoot`属性，这`urlRoot`就是我们所理解的“集合的 URL”（它将附加它的`id`）。例如，如果`urlRoot`是`/counters`并且您有一个带有`id`of的模型`1`，那么最终 URL（它会为您完成）将是`/counters/1`。

**编辑：**

您可以检查这个问题以防万一，即使它与 CouchDB 无关，但它可能会对这个问题有所启发：[如何在 Backbone 中获取单个模型？](https://stackoverflow.com/questions/5097107/how-do-i-fetch-a-single-model-in-backbone)

# javascript - 如何刷新表格和图表

> ID：14029364
> 
> 赞同：2
> 
> 时间：2012-12-25T09:25:47.880
> 
> 标签：javascript, html, kendo-ui

单击 kendo ui 中的刷新按钮时刷新网格和图表

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T11:31:57.090

其中之一应该是您正在寻找的：

```
$('#GridName').data().kendoGrid.dataSource.read();
$('#GridName').data().kendoGrid.refresh();

$('#ChartName').data().kendoChart.dataSource.read();
$('#ChartName').data().kendoChart.refresh(); 
```

# memcached - 休眠 EHCache 与 MemCache

> ID：14029366
> 
> 赞同：14
> 
> 时间：2012-12-25T09:26:14.733
> 
> 标签：memcached, ehcache, spymemcached

我想在我的 Web 应用程序中使用缓存，它也将是可扩展的和分布式的。

我在小型 Web 应用程序中分别使用了 EHCache 和 MemCache。

谷歌搜索并得到了关于两者的混合评论，因此希望获得一些帮助和每个强大的功能，所以我可以决定哪个框架适合我的 Web 应用程序。

让我知道是否需要更多详细信息。

谢谢 ！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T09:37:20.757

EHCache 很容易与 Hibernate 应用程序（使用 Hibernate 作为后端 ORM 的 Web 应用程序）集成。您还可以将其作为单独的工件导入并以编程方式执行操作，例如将数据添加到具有指定过期时间或最大对象数或大小的命名缓存。

Memcached 并不那么容易与休眠应用程序集成，但本质上提供了与 EHCache 几乎相同的编程访问 API。

就性能而言，结果也会因缓存的架构和使用情况而异。

总之，在选择缓存时，如果您以标准方式使用，那么您将选择哪个缓存只是一个偏好问题。我个人会选择 EHCache，因为我有更多的经验。

JBoss 也有一个分布式缓存（如在由机器集群共享的缓存中），其中同步在内部处理，API 与 EHCache 非常相似。它被称为 Infinispan，也相对容易设置和使用。

**编辑：**

作为 EHCache 的一个强大特性，我将无缝集成列为 Hibernate 的二级缓存。此外，以编程方式配置缓存非常简单且具有 Java 风格。

也许将您推荐给此以比较性能也是一个好主意。请记住，它很古老，所以可能不是最新的。 [http://gregluck.com/blog/archives/2007/05/comparing-memcached-and-ehcache-performance/](http://gregluck.com/blog/archives/2007/05/comparing-memcached-and-ehcache-performance/)

# python - 我需要在 Google App Engine 中使用线程同步工具吗？

> ID：14029376
> 
> 赞同：3
> 
> 时间：2012-12-25T09:27:08.220
> 
> 标签：python, google-app-engine, app-engine-ndb

我`threadsafe: true`在我的 app.yaml 中使用 Google App Engine 1.7.4 上的 Python 2.7 运行时。

我有以下代码：

```
@ndb.tasklet
def fn_a(container):
    ''' access datastore and mutate container '''

@ndb.tasklet
def fn_b(container):
    ''' access datastore and mutate container '''

@ndb.toplevel
def parallel_fn():
    shared_container = set()

    yield fn_a(shared_container), fn_b(shared_container) 
```

`fn_a()`并且`fn_b()`access 和 mutate`shared_container`都被调用`parallel_fn()`。`shared_container`是一个标准库`set`，因此不是线程安全的。

我应该将 mutator/accessor 方法包​​装`shared_container`在适当的`threading`标准库锁中吗？

根据我对 App Engine 的了解，每个实例都是单线程的，尽管设置了`threadsafe: true`. 因此`threading`不需要使用锁定对象吗？

初步测试表明锁不是必需的，只会增加额外的开销和死锁。似乎也不应该做以下事情

```
if object not in shared_container:
    yield any tasklet operation
    shared_container.add(object) 
```

`shared_container`可能会在操作期间由另一行执行更新，从而`yield`使`object not in shared_container`语句可能无效。然而

```
if object not in shared_container:
    shared_container.add(object)
    yield any tasklet operation 
```

绝对没问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:31:19.453

您不需要添加锁定代码，因为 tasklet 不在单独的线程中运行。[在tasklet 文档](https://developers.google.com/appengine/docs/python/ndb/async#tasklets)中阅读它。

如果设置 threadsafe: true，GAE 是多线程的。启动不同的线程来处理同一实例上的多个请求。通常这不是问题，因为您应该设计您的请求处理程序以无论如何都能够跨各种服务器实例运行。

这并不真正适用于这个问题，但如果你真的测试过线程问题，请小心。我不确定，但我相信在 dev_appserver 和生产 GAE 服务器上运行的线程行为是不同的，因此请确保在两者上都进行测试。

# objective-c - 如何在目标 c 中发送 Http 发布请求？

> ID：14029380
> 
> 赞同：1
> 
> 时间：2012-12-25T09:27:21.890
> 
> 标签：objective-c, ios, youtube-api, asihttprequest

我正在尝试向 youtube 发送发布请求，以将视频添加到收藏列表。API文档在[这里](https://developers.google.com/youtube/2.0/developers_guide_protocol_favorites#Adding_a_favorite_video)

这是我的源代码：

```
- (void) addVideoToFavoriteWithID:(NSString *)strVideoID{
    NSString* strConnection = [NSString stringWithFormat:@"%@%@",CONNECTION_YOUTUBE, CONNECTION_ADD_VIDEO_TO_FAVORITE];
    AppDelegate* delegate =    (AppDelegate*)[[UIApplication sharedApplication] delegate];
    ASIFormDataRequest *formData = [[ASIFormDataRequest alloc]initWithURL:[NSURL URLWithString:strConnection]];
    [formData setRequestMethod:@"POST"];
    [formData setPostValue:@"2" forKey:@"GData-Version"];
    [formData setPostValue:@"application/atom+xml" forKey:@"Content-Type"];
    [formData setPostValue:YOUTUBE_DEVELOPER_KEY    forKey:@"X-GData-Key"];
    [formData setPostValue:[[delegate userInfo   ]accessTokenYoutube]  forKey:@"Authorization"];

    NSString *body = [NSString stringWithFormat:@"<?xml version='1.0' encoding='UTF-8'?><entry xmlns='http://www.w3.org/2005/Atom'><id>%@</id></entry>",strVideoID];
    [formData setPostValue:body forKey:@"body"  ];

    [formData setDelegate:self];
    [formData setDidFinishSelector:@selector(didAddVideoToFavoriteFinish:)];
    [formData setDidFailSelector:@selector(didAddVideoToFavoriteFail:)];\
    [formData setDidReceiveDataSelector:@selector(didAddVideoToFavoriteSelect:)];
    [formData startAsynchronous];

    [formData release];
} 
```

在方法`didAddVideoToFavoriteFinish`中，我收到消息：

> HTTP/1.1 415 不支持的媒体类型

请告诉我我的错误是什么。我是目标 C 的新手，我对此感到非常困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:02:34.987

您的 POST 请求是一个表单数据请求，通常用于发布 HTML 表单的数据。它对数据使用特殊编码。这不是 YouTube API 所期望的。它需要一个带有 XML 文档的简单 POST 请求。

而不是`ASIFormDataRequest`类，你应该使用`ASIHTTPRequest`类。您的代码或多或少应该是这样的：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:strConnection]];
[request setRequestMethod:@"POST"];
[request setPostValue:@"2" forKey:@"GData-Version"];
[request setPostValue:@"application/atom+xml" forKey:@"Content-Type"];
[request setPostValue:YOUTUBE_DEVELOPER_KEY    forKey:@"X-GData-Key"];
[request setPostValue:[[delegate userInfo   ]accessTokenYoutube]  forKey:@"Authorization"];

NSString *body = [NSString stringWithFormat:@"<?xml version='1.0' encoding='UTF-8'?><entry xmlns='http://www.w3.org/2005/Atom'><id>%@</id></entry>",strVideoID];
[request appendPostData:[body dataUsingEncoding:NSUTF8StringEncoding]];

[request setDelegate:self];
[request setDidFinishSelector:@selector(didAddVideoToFavoriteFinish:)];
[request setDidFailSelector:@selector(didAddVideoToFavoriteFail:)];\
[request setDidReceiveDataSelector:@selector(didAddVideoToFavoriteSelect:)];
[request startAsynchronous];

[request release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:32:59.597

也许您可以查看Google 提供的[这个 Objective-C API 集。](http://code.google.com/p/google-api-objectivec-client/)编写所有 REST 的东西可能会很痛苦。

# zend-framework - Zend 框架，htaccess 无法读取新的控制器

> ID：14029390
> 
> 赞同：0
> 
> 时间：2012-12-25T09:28:39.227
> 
> 标签：zend-framework

我的问题是。

我的应用程序在 zend 框架中有一个图像文件夹和裁剪技术，因此当请求裁剪的图像并且之前找到它时，htaccess 将通过调用裁剪模型来处理图像

```
the file requested   is : http://localhost/cmstest/public/contents/userdata/images/100X100/163.png 
```

但服务器无法读取正确的控制器

htacces 代码在这里

```
 Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>

RewriteEngine On
    RewriteCond  %{REQUEST_FILENAME} !-d 
    RewriteCond  %{REQUEST_FILENAME} !-f

    RewriteRule ^(.*)/(.*)  ../../index/index/app/storage/image/$2/crop/$1 [QSA,L]

</IfModule> 
```

显示的错误是

```
An error occurred
Page not found
Exception information:

Message: Invalid controller specified (contents)
Stack trace:

#0 /Applications/XAMPP/xamppfiles/htdocs/zend/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#1 /Applications/XAMPP/xamppfiles/htdocs/zend/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#2 /Applications/XAMPP/xamppfiles/htdocs/zend/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#3 /Applications/XAMPP/xamppfiles/htdocs/cmstest/public/index.php(36): Zend_Application->run()
#4 {main}  

Request Parameters:

array (
  'controller' => 'contents',
  'action' => 'userdata',
  'images' => '100X100',
  'module' => 'frontend',
) 
```

请帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:53:07.197

如果您的要求是发生某些事情 - 调用特定的控制器/动作 - 仅在找不到 url 时，那么实现该方法的一种方法是执行检查`ErrorController::errorAction()`并转发到执行所需处理的控制器/动作.

具体来说：

1.  在`ErrorController::errorAction()`中，检查导致您出现的错误是否为 404 错误。

2.  如果是这样，请检查（可能在`preg_match()`上`$request->getRequestUri()`）请求的 url 是否属于您希望通过调整大小例程（`IndexController::resizeAction()`或类似方法）处理的类型。

3.  如果是这样，则执行 a`$this->_forward('resize', 'index')`以便您的调整大小例程可以执行调整大小，保存调整大小的图像（以便下次无需调整大小即可提供），并发送现在调整大小的图像（带有正确的图像标题） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:41:45.203

你有一个 module/frontend/Controller/contentsController.php 吗？在这个文件中有一个 userdataAction 方法？

需要更多信息来帮助您更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:48:40.370

您的重写规则永远不会与请求的 url 匹配： localhost/cmstest/public/contents/userdata/images/100X100/163.png 如您所料

使用此规则：^(. *)/(.* )，您正在编写请求的 url 以 ^ 字符开头，后跟斜杠和其他字符。

在这里，您的 URI 是 public/contents/userdata/images/100X100/163.png。所以它永远不会像你期望的那样匹配。

尝试类似：

```
RewriteRule ^public/contents/userdata/images/(.*)/(.*)  ../../index/index/app/storage/image/$2/crop/$1 [QSA,L] 
```

希望对您有所帮助。

# facebook - Facebook Open Graph PHP SDK 活动图片

> ID：14029391
> 
> 赞同：0
> 
> 时间：2012-12-25T09:28:54.307
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我在将图片添加到 FB 事件时遇到问题。要创建事件，我使用 FB PHP SDK。

这是代码：

```
$fb_config = array(
  'appId' => 'xxx',
  'secret' => 'xxx',
  'fileUpload' => true
);

$facebook = new Facebook( $fb_config );
$facebook->setFileUploadSupport(true);
$access_token = get_option( 'facebook_token' );
$facebook->setAccessToken( $access_token );

$eventInfo = array(
  'fields'=>'name,picture,start_time,description',
  'name'          => 'Event name',
  'start_time' => 'Start Date',
  'end_time' => 'End Date',
  'description'   => 'Event Desc',
  'picture' => 'http:// link to the image on the same server as provided on the app conf page.'
);

$result = $facebook->api(
  '/fb_page_id/events',
  'post',
  $eventInfo
);

print_r($result); // {id: fb_event_id } 
```

使用此代码事件可以很好地创建，但缺少事件的图片。当我使用具有相同字段的 Facebook Graph Api 资源管理器工具时，图片也丢失了。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:04:35.323

[将图片上传到 Facebook](https://stackoverflow.com/questions/3019501/uploading-a-picture-to-facebook)

尝试通过 curl 发布，它会工作！

另外，您的应用程序可能没有 publish_stream 权限

[http://developers.facebook.com/docs/reference/api/photo/](http://developers.facebook.com/docs/reference/api/photo/)

在此处阅读可用选项！ [http://developers.facebook.com/docs/reference/api/user/#events](http://developers.facebook.com/docs/reference/api/user/#events)

# java - 写入客户端通道时出现异常 java.nio.channels.ClosedChannelException

> ID：14029393
> 
> 赞同：8
> 
> 时间：2012-12-25T09:28:58.363
> 
> 标签：java, exception, netty

我使用 netty 3.5.8 创建了一个游戏服务器。起初，从服务器向客户端发送数据没有任何问题。但是当服务器运行一段时间后，`java.nio.channels.ClosedChannelException`我向客户端通道写入数据时会出现很多异常[ ]。

任何人以前都遇到过这个例外。有什么提示可以解决这个问题吗？我认为缓存缓冲区导致了这个。

我的代码示例如下：

```
ChannelBuffer bff = ChannelBuffers.buffer(18);
bff.writeByte(Events.S_SERVER_PUSH);  
bff.writeByte((byte)0);
bff.writeInt(idRoom);            
bff.writeInt(playerCnt);
bff.writeInt(gameCnt);
bff.writeInt(freePlayer);
channel.write(bff); 
```

异常：java.nio.channels.ClosedChannelException

```
java.nio.channels.ClosedChannelException
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:784)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:507)
        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:129)
        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)
        at org.jboss.netty.channel.Channels.write(Channels.java:733)
        at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.doEncode(OneToOneEncoder.java:71)
        at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:60)
        at org.jboss.netty.channel.Channels.write(Channels.java:712)
        at org.jboss.netty.channel.Channels.write(Channels.java:679)
        at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:248)
       at myclass.SendPushData(GameRoom.java:231)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)
        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)
        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T04:27:42.413

`ClosedChannelException`只是告诉您连接已关闭，因此您发出的写入请求无法完成。它通常意味着：

（1）您的应用程序在您编写消息之前在其他地方关闭了连接，或者
（2）您的对等方在阅读您的消息之前关闭了连接。

如果您修复 (1) 和 (2)，您应该不会再看到`ClosedChannelException`了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-26T02:58:02.127

ClosedChannelException 表示*您*已关闭频道并继续使用它。这是您的编程错误。

# visual-studio-2008 - 调试断言失败 OpenCV

> ID：14029394
> 
> 赞同：0
> 
> 时间：2012-12-25T09:29:02.623
> 
> 标签：visual-studio-2008, visual-c++, opencv

我正在运行一个 OpenCV 教程，但我遇到了显示消息的问题！程序意图是将图像修改为灰度图像。

这是错误的屏幕截图。

```
     调试断言失败！
     程序：..ments\Visual Studio 2008\Projects\new_demo\Debug\new_demo.exe
     文件：f:\dd\vctools\crt_bld\self_x86\crt\src\xstring
     线路：1094
     表达式：无效的空指针
     中止 重试 忽略

```

这是我的代码 new_demo.cpp

```
 #include "cv.h"
    #include "highgui.h"

    using namespace cv;

    int main( int argc, char** argv )
    {
     char* imageName = argv[1];

     Mat image;
     image = imread( imageName, 1 );

     if( argc != 2 || !image.data )
     {
       printf( " No image data \n " );
       return -1;
     }

     Mat gray_image;
     cvtColor( image, gray_image, CV_RGB2GRAY );

     imwrite( "new.jpg", gray_image );

     namedWindow( imageName, CV_WINDOW_AUTOSIZE );
     namedWindow( "Gray image", CV_WINDOW_AUTOSIZE );

     imshow( imageName, image );
     imshow( "Gray image", gray_image );

     waitKey(0);

     return 0;
    } 
```

帮我解决一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:26:07.920

cv::imread 引用一个常量 std::string 作为它的第一个参数（文件名）。

见：[http ://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#Mat%20imread%28const%20string&%20filename,%20int%20flags%29](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#Mat%20imread%28const%20string&%20filename,%20int%20flags%29)

您使用 char* imageName 调用它，并在检查 argc > 1 之前使用 argv[1] 对其进行初始化。因此，如果您在没有附加命令行参数的情况下运行程序，则尝试从空指针构造字符串。您很幸运，c++ 标准（第 3.6.1 节）规定 argv[argc] 应为 0，否则此时您将通过访问其边界之外的数组来获得未定义的行为。但现在您正试图从标准（第 21.4.2 节）禁止的空指针构造字符串。（“要求：s 不得为空指针。”）另见：“http://en.cppreference.com/w/cpp/string/basic_string/basic_string

我建议将您的代码更改为以下内容：

```
#include "opencv2/opencv.hpp"
#include <iostream>

int main( int argc, char** argv )
{
    using namespace cv;

    if( argc < 2 )
    {
        std::cout << "Please pass image file name as cmd param.\n"
        return -1;
    }

    Mat image;
    std::string imageName( argv[1] );
    image = imread( imageName , 1 );

    if( !image.data )
    {
        printf( " No image data \n " );
        return -1;
    }

    Mat gray_image;
    cvtColor( image, gray_image, CV_RGB2GRAY );

    imwrite( "new.jpg", gray_image );

    namedWindow( imageName, CV_WINDOW_AUTOSIZE );
    namedWindow( "Gray image", CV_WINDOW_AUTOSIZE );

    imshow( imageName, image );
    imshow( "Gray image", gray_image );

    waitKey(0);
} 
```

顺便说一句：您可以在函数调用中省略默认参数。这就是为什么它们有默认值。;) 所以这些电话也可以完成这项工作：

```
image = imread( imageName );
namedWindow( imageName );
namedWindow( "Gray image" );
waitKey(); 
```

# c# - 使用不同文件夹中的 DLL 运行 mono .exe

> ID：14029396
> 
> 赞同：8
> 
> 时间：2012-12-25T09:29:44.223
> 
> 标签：c#, dll, mono, gmcs, dmcs

我使用Mac 的可执行文件和以下命令行程序编译了该`test.cs`文件（它引用了第三方库） ：`dmcs`

```
dmcs /out:program.exe test.cs /target:exe /reference:/Users/kevin/path/to/bin/Debug/project.dll 
```

这编译没有问题（不包括 /reference 参数会导致问题）。这`program.exe`在当前目录中创建了一个可执行文件。当我尝试像这样运行它时：

```
mono program.exe 
```

我收到以下错误：

```
Unhandled Exception:
System.IO.FileNotFoundException: Could not load file or assembly 'project, Version=3.4.1.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. 
```

我能想出解决这个问题的唯一方法是将文件复制`project.dll`到包含该`program.exe`文件的目录中。一旦我复制`project.dll`到同一目录中，程序就可以正确运行。

我可以传递一个额外的参数来`mono`在不同的程序目录中指定 DLL 吗？或者，我可以传递一个标志来`dmcs`让它直接将 DLL 编译成二进制文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:46:13.980

您可以使用 app.config 中的探测元素来实现您想要的

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <probing privatePath="bin;bin2\subbin;bin3"/>
      </assemblyBinding>
   </runtime>
</configuration> 
```

您将 privatePath 设置为您想要的任何目录的位置。 [http://msdn.microsoft.com/en-us/library/823z9h8w(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/823z9h8w(v=vs.80).aspx)

但是，除非您指定子目录，否则我强烈建议您不要这样做。如果您真的不想将程序集放在同一目录中，请考虑按照 Uwe Keim 的建议进行链接或使用 GAC。

链接：[http ://www.mono-project.com/Linker](http://www.mono-project.com/Linker)

GAC：[http ://www.mono-project.com/Assemblies_and_the_GAC](http://www.mono-project.com/Assemblies_and_the_GAC)

# android - FLAG_CANCEL_CURRENT 或 FLAG_UPDATE_CURRENT

> ID：14029400
> 
> 赞同：16
> 
> 时间：2012-12-25T09:30:20.580
> 
> 标签：android, alarmmanager, android-pendingintent

我的应用程序在用户交互时设置了重复警报，它可能会更改使用警报管理器为广播设置的间隔时间。
额外的方式并不多。
在这种情况下更新或取消标志更好吗？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-10-07T22:58:10.310

**切勿**将 FLAG_CANCEL_CURRENT 与设置警报时使用的 PendingIntent 一起使用。如果您想将警报重新安排在不同的时间，则根本不需要任何标志；只需创建一个带有零标志的重复 PendingIntent，然后使用它来设置（）警报：这将隐式取消现有警报，然后将其设置为新指定的时间。但是，如果您在创建新的 PendingIntent 时使用了 FLAG_CANCEL_CURRENT，它会破坏警报管理器识别它与现在已取消的 PendingIntent“相同”的能力，并且您最终会发现旧的挂起、无法交付、占用内存和 CPU。我已经看到有这个错误的应用程序在系统中积累了数百个过时的警报，足以对性能和内存使用造成显着影响。

如果您只想更改附加内容而不实际重新安排现有警报，这就是 FLAG_UPDATE_CURRENT 的用途。如果您想重新安排，请不要使用任何标志。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-26T06:10:00.387

如果您不使用附加功能，则不必指定任何这些标志。他们只改变系统如何处理额外的`PendingIntent`：替换当前匹配中的那些（由系统缓存`PendingIntent`）或取消它并创建一个新的。有关详细信息，请参阅文档：http: [//developer.android.com/reference/android/app/PendingIntent.html#FLAG_CANCEL_CURRENT](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_CANCEL_CURRENT)

# php - facebook getlogin url不起作用

> ID：14029403
> 
> 赞同：2
> 
> 时间：2012-12-25T09:30:56.940
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我想让用户通过 facebook 登录。我正在使用这段代码：

```
 <?php

    require 'include/facebook.php';
    require 'include/fbconfig.php';
    require 'include/user.php';

    $facebook = new Facebook(array(
                'appId' => APP_ID,
                'secret' => APP_SECRET,
                'cookie' => true
            ));

    $session = $facebook->getSession();

    if (!empty($session)) {
        # Active session, let's try getting the user id (getUser()) and user info (api->('/me'))
        try {
            $uid = $facebook->getUser();
            $user = $facebook->api('/me');
        } catch (Exception $e) {

        }

        if (!empty($user)) {
            # User info ok? Let's print it (Here we will be adding the login and registering routines)
            echo '<pre>';
            print_r($user);
            echo '</pre><br/>';
            $username = $user['name'];
            $user = new User();
// check user method insert login information to my database and return the result
            $userdata = $user->checkUser($uid, 'facebook', $username);
            if(!empty($userdata)){
                session_start();
                $_SESSION['id'] = $userdata['id'];
                $_SESSION['oauth_id'] = $uid;
                $_SESSION['username'] = $userdata['username'];
                $_SESSION['oauth_provider'] = $userdata['oauth_provider'];
                header("Location: test.php");
            }
        } else {
            # For testing purposes, if there was an error, let's kill the script
            die("There was an error.");
        }
    } else {
        # There's no active session, let's generate one
        $params = array(
         'scope' => 'email'
      );
        $login_url = $facebook->getLoginUrl($params);
        header("Location: " . $login_url);
    }
    ?> 
```

当我运行此页面时出现问题，它将我重定向到 facebook 主页（到我的帐户）。

请问，有什么想法吗？？
您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T10:43:43.750

您使用的是最新的 PHP SDK 吗？[从这里](https://github.com/facebook/facebook-php-sdk)获取最新的 SDK ，然后重试..

**[编辑]**

将所有引用替换`getSession()`为 `getUser()`

例子：

```
$session = $facebook->getSession(); 
```

它应该说：

```
$session = $facebook->getUser(); 
```

参考：[升级到 PHP SDK v3.0.0](https://developers.facebook.com/blog/post/503)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T13:52:52.847

这肯定会奏效-

```
$user=NULL ;
$user       = $facebook->getUser();
if($user)
{
    $loginUrl   = $facebook->getLoginUrl(
       array(
              'scope'         => 'email',
              'redirect_uri'  => 'https://appurl'
            )
    );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:44:17.847

如果您已登录，则不会进入登录页面。

尝试注销并检查您的代码是否有效。

# android - 在我的自定义 Android 相机应用程序中获取 NullPointerException

> ID：14029404
> 
> 赞同：1
> 
> 时间：2012-12-25T09:31:06.737
> 
> 标签：android, camera, nullpointerexception

我正在尝试在 Android 中构建我的第一个自定义相机应用程序。

在模拟器上我得到：

“不幸的是，[app name] 已停止”

**这是错误日志：（如果您要我粘贴*完整*的日志，请这样说）**

```
11-13 19:14:04.023: E/AndroidRuntime(4474): FATAL EXCEPTION: main
11-13 19:14:04.023: E/AndroidRuntime(4474): java.lang.NullPointerException
11-13 19:14:04.023: E/AndroidRuntime(4474):     at com.kachingcamapp.CameraApplication.surfaceChanged(CameraApplication.java:80)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.SurfaceView.updateWindow(SurfaceView.java:554)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.SurfaceView.access$000(SurfaceView.java:81)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:671)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1818)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.Choreographer.doFrame(Choreographer.java:525)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.os.Handler.handleCallback(Handler.java:615)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.os.Looper.loop(Looper.java:137)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at java.lang.reflect.Method.invokeNative(Native Method)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at java.lang.reflect.Method.invoke(Method.java:511)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-13 19:14:04.023: E/AndroidRuntime(4474):     at dalvik.system.NativeStart.main(Native Method) 
```

**这是我的代码：**

```
public class CameraApplication extends Activity implements OnClickListener,
                            SurfaceHolder.Callback, Camera.PictureCallback { 

    private static final String TAG = "AppDebug";
    SurfaceView cameraView; 
    SurfaceHolder surfaceHolder; 
    Camera camera; 

    @SuppressWarnings("deprecation")
    @Override 
    public void onCreate(Bundle savedInstanceState)  { 
        super.onCreate(savedInstanceState); 

        setContentView(R.layout.cam_view); 

        cameraView = (SurfaceView) this.findViewById(R.id.CameraView); 

        surfaceHolder = cameraView.getHolder(); 
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
        surfaceHolder.addCallback(this); 

        cameraView.setFocusable(true); 
        cameraView.setFocusableInTouchMode(true); 
        cameraView.setClickable(true); 

        cameraView.setOnClickListener(this); 
        Log.d(TAG,"before calling surfaceCreated");
        surfaceCreated(surfaceHolder);
        Log.d(TAG,"end of onCreate");
    } 

    public void onClick(View v) { 
        camera.takePicture(null, null, this); 
    } 

    public void onPictureTaken(byte[] data, Camera camera) { 
       Uri imageFileUri = 
          getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues()); 
        try { 
              OutputStream imageFileOS = 
                       getContentResolver().openOutputStream(imageFileUri); 
            imageFileOS.write(data); 
            imageFileOS.flush(); 
            imageFileOS.close(); 
        } catch (FileNotFoundException e) { 
            Toast t = Toast.makeText(this,e.getMessage(), Toast.LENGTH_SHORT); 
            t.show(); 
        } catch (IOException e) { 
            Toast t = Toast.makeText(this,e.getMessage(), Toast.LENGTH_SHORT); 
            t.show(); 
        } 
        camera.startPreview(); 
    } 

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) { 
        camera.startPreview(); 
    } 

    public void surfaceCreated(SurfaceHolder holder) { 
        camera = Camera.open(); 

        try { 
            if(camera==null){
                throw new Exception("camera is null");
            }
            camera.setPreviewDisplay(holder); 
   } 
        catch (IOException exception) 
        { 
                      camera.release(); 
                      Log.d(TAG,exception.toString());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    } 

    public void surfaceDestroyed(SurfaceHolder holder) { 
           camera.stopPreview(); 
        camera.release(); 
    } 
} // End the Activity 
```

这是 AndroidManifest XML：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.camapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.CAMERA" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".CameraApplication"
            android:label="@string/title_activity_starting" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

现在我从上面知道问题出在`surfaceChanged`方法上，准确地说，`camera.startPreview`这是方法中唯一的一段代码。

但我真的看不出它有任何损坏或错误。肯定是`null`，但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T03:59:33.180

您说您在以下方面遇到错误：

```
public void onClick(View v) { 
  camera.takePicture(null, null, this); 
} 
```

在您的一条评论中。我也遇到了这个问题。那是因为当时相机的值为空。修改您的代码如下：

```
public void onClick(View view) {
  if (camera != null) {
    Log.d("camera state","camera is NOT null");  
  }else{
    Log.d("camera state","camera is null");
    camera = android.hardware.Camera.open();
}
  camera.takePicture(null, null,new PhotoHandler(getApplicationContext()));
} 
```

PS：我的应用程序中有 PhotoHandler 类，请根据您的要求进行修改。希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:35:14.587

因为**camera**是**null**，所以在之前`if(camera != null)` 检查一下`camera.startPreview();``surfaceChanged()`

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) { 
       if(camera == null) 
          camera = Camera.open();
          camera.startPreview(); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T09:38:49.973

该`camera`实例在您的`onSurfaceChanged()`方法中为 null ，您应该验证它是否为 null ，实例化它，然后您可以调用`startPreview()`：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) { 
        if(camera == null)
           camera = Camera.open();
        camera.startPreview(); 
    } 
```

# kendo-ui - 如何在单击网格中的按钮时在 kendo ui 网格中动态更改编辑模式（弹出+内联）？

> ID：14029405
> 
> 赞同：1
> 
> 时间：2012-12-25T09:31:09.923
> 
> 标签：kendo-ui

我正在使用 mvc4 应用程序。在我的一个页面上，我正在使用剑道网格。我想添加两个按钮进行编辑，一个用于在弹出窗口中进行编辑，另一个用于内联编辑。

我想在单击按钮时动态更改网格编辑模式。

谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:29:21.760

您不能同时拥有两种编辑模式。

作为一种解决方法，您可以使用带有按钮的内**联**编辑 + 模板列，在该按钮内单击会打开一个窗口。

您可以将窗口的内容设置为[模板](http://docs.kendoui.com/getting-started/framework/templates/overview)，并在单击按钮时将其与该行的[dataItem](http://docs.kendoui.com/api/web/grid#dataitem)[绑定。](http://demos.kendoui.com/web/mvvm/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T02:34:15.173

如果要动态更改 a 中所有行的编辑模式，`Grid`可以执行以下操作：

`Button`和`Grid`定义：

```
<a href="#" id="popup" class="k-button">Popup</a>
<a href="#" id="inline" class="k-button">Inline</a>
<div id="grid"></div> 
```

`Grid`初始化：

```
var grid = kendoGrid({
    dataSource: dataSource,
    columns: [
        { command: ["edit", "destroy"], title: "&nbsp;" },
        { field: "field1", title: "Field1" },
        { field: "field2", title: "Field2" },
    ],
    editable  : "popup"
}).data("kendoGrid"); 
```

`Buttons`初始化：

```
$("#popup").on("click", function () {
    grid.options.editable = "popup";
});
$("#inline").on("click", function () {
    grid.options.editable = "inline";
}); 
```

当您单击这些按钮中的任何一个时，您将编辑模式选择为`inline`或`popup`。

# php - 将行标记为重要并在每次加载时保存它

> ID：14029408
> 
> 赞同：0
> 
> 时间：2012-12-25T09:31:19.000
> 
> 标签：php, javascript

![表一](../Images/5062f694c8ba018c77314addcc162364.png)

这是 TableA，当我单击“单击此处”按钮时，每次使用此代码加载特定表时

```
<tr>
    <th style="height: 25px">NAME</th>
    <th style="height: 25px">EMAIL</th>
    <th style="height: 25px">CELL NO</th>
    <th style="height: 25px">CITY</th>
    <th style="height: 25px; width:120px">DATE APPLIED</th>
    <th style="height: 25px">POST A MESSAGE TO CANDIDATE</th>
    <th style="height: 25px">DETAILED CV</th>
    <th>Hide Candidate</th>
    <th>MARK AS IMPORTANT</th>
</tr>                                              
<!-- /headings -->
<?php
if(isset($_GET['id'])) {
    echo "<script>window.location = \"#showcand\";</script>";                                            
    if($result) {
        if (mysql_num_rows($result) == 0) {
            echo "<tr>";
            echo "<td colspan=\"4\" ><p align=\"center\" class=\"message\"><blink><span style=\"color:red;\" > NO CANDIDATE APPLIED</span></blink></p></td>";    
            echo "</tr>";
        }

        while($data_set1 = mysql_fetch_array($result)) {                                            
            echo "<tr>";
            echo "<td>{$data_set1['ename']}</td>";
            echo "<td>{$data_set1['eemail']}</td>";
            echo "<td>{$data_set1['ecell']}</td>";
            echo "<td>{$data_set1['ecity']}</td>";
            echo "<td>{$data_set1['date_of_jobapply']}</td>";
            echo "<td><a href=\"reply.php?tid={$_SESSION['vid']}&id=1&name={$data_set1['ename']}&email={$data_set1['eemail']} \"><input class=\"button\" name=\"submit\" type=\"submit\" value=\"POST\" /></a></td>";
            echo "<td><a href=\"detailcv.php?id={$data_set1['eid']}\" target=\"_blank\"><input  style=\" cursor:hand;width:40px\" class=\"button\" name=\"cv\" type=\"button\" value=\"C V\" /></a></td>";
            echo "<td><input type=\"checkbox\" name=\"hide_cand\" id=\"hide_cand\"onclick=\"return hideRow(this)\"/></td>";
            echo "<td><input type=\"checkbox\" name=\"imp_cand\" id=\"hide_cand\"/></td>";
            echo "</tr>";
        }
    } ?> 
```

在最后一列中，我想使用复选框将特定行标记为 imp 而不是 imp，每次加载此表时，我都应该看到 imp 标记的行，它是如何完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:44:00.247

您必须在数据库中为此创建一个字段，并在每次有人将该值的字段从 0 更改为 1 标记为重要时触发 ajax 查询。1 表示重要，0 表示不重要或任何类似的东西。

当您运行查询以获取结果时，还要获取标志并相应地设置复选框。

您可以回`checked="checked"`显（假设`isimportant`）的值得到 1 的位置。

# python - pythons tar 文件是否最终确定添加的文件，还是等到它关闭？

> ID：14029409
> 
> 赞同：2
> 
> 时间：2012-12-25T09:31:40.873
> 
> 标签：python, compression, tar, filehandle

如果问题标题不清楚，我深表歉意。

我正在使用 python创建一个非常大的压缩[TarFile 。](http://docs.python.org/2/library/tarfile.html#module-tarfile)

我需要知道在使用时[`TarFile.Add()`](http://docs.python.org/2/library/tarfile.html#tarfile.TarFile.add)是否会关闭和/或最终确定添加的文件，还是可以修改文件？

例如，如果我要创建一个空文本文件，然后将其添加到 TarFile，然后修改文本文件，然后关闭 TarFile，对文本文件所做的更改会出现在 TarFile 中，还是文本文件按[`TarFile.Add()`](http://docs.python.org/2/library/tarfile.html#tarfile.TarFile.add)?时的状态添加

谢谢你。

注意：如果有任何区别，代码是在 Ubuntu 机器上运行的，并且存档也在同一台机器上创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:33:51.813

调用后文件内容**不会**更新`add()`。

请参阅以下代码：

```
import tarfile

fp1 = open("hello.txt", "w")

tar = tarfile.open("myArchive.tar", "w")
tar.add("hello.txt")

fp1.write("Test String")
fp1.close()

tar.close() 
```

执行此操作后，“hello.txt”将具有“测试字符串”，但“myArchive.tar”中的“hello.txt”将为空。

# mysql - mysql 中 SUBSTRING_INDEX 对 LEFT 的重载

> ID：14029417
> 
> 赞同：1
> 
> 时间：2012-12-25T09:32:58.127
> 
> 标签：mysql, stored-procedures

我有两种代码提供输入，例如'，'分隔符和单独的项目（例如：输入：'1,2,3' 输出：1 和 2 和 3），第一种是：

```
LABLE: LOOP
    SET a = a + 1;
    IF a <= p_count THEN 
        SET remainder = SUBSTRING_INDEX(input ,',',a);
        SET remainder = SUBSTRING_INDEX(remainder,',',-1);
                SELECT remainder;
        ITERATE LABLE;
    END IF;
    LEAVE LABLE;
END LOOP LABLE; 
```

第二个是：

```
 SET remainder = input;
 SET delimiter_length = LENGTH(delimiter);
 WHILE LENGTH(remainder) > 0 AND cur_position > 0 DO
         SET cur_position = INSTR(remainder, delimiter);
         IF cur_position = 0 THEN
            SET cur_string = remainder;
         ELSE
            SET cur_string = LEFT(remainder, cur_position - 1);
         END IF;
         SELECT cur_string;
         SET remainder = SUBSTRING(remainder, cur_position + delimiter_length);
 END WHILE; 
```

现在，我想知道它们中的哪一个在大数据中更好，我的意思是它们中的哪一个具有较低的过载？

# c# - 通过 Lazy 访问非静态成员 或任何 lambda 表达式

> ID：14029425
> 
> 赞同：61
> 
> 时间：2012-12-25T09:34:23.177
> 
> 标签：c#, .net, .net-4.0, lazy-evaluation

我有这个代码：

```
public class MyClass
{
    public int X { get; set; }
    public int Y { get; set; }

    private Lazy<int> lazyGetSum = new Lazy<int>(new Func<int>(() => X + Y));
    public int Sum{ get { return lazyGetSum.Value; } }

} 
```

给我这个错误：

> 字段初始值设定项不能引用非静态字段、方法或属性。

我认为通过lazy访问非静态成员是非常合理的，如何做到这一点？

*** 编辑 ***

接受的答案完美地解决了问题，但要查看问题的详细和深入 - 一如既往 - 您可以阅读[Joh Skeet 的答案](https://stackoverflow.com/a/14029456/283787)。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-25T09:36:59.177

您可以将其移动到构造函数中：

```
private Lazy<int> lazyGetSum;
public MyClass()
{
   lazyGetSum = new Lazy<int>(new Func<int>(() => X + Y));
} 
```

有关问题原因的更多详细信息，请参阅下面的@JohnSkeet 答案。 [通过 Lazy<T> 或任何 lambda 表达式访问非静态成员](https://stackoverflow.com/questions/14029425/accessing-a-non-static-member-via-lazyt#14029456)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-12-25T09:39:27.553

这是您的问题的简化版本：

```
class Foo
{
    int x = 10;
    int y = this.x;
} 
```

还有一个*稍微*不那么简化的：

```
class Foo
{
    int x = 10;
    Func<int> y = () => this.x;
} 
```

（`this`通常是隐含的，但为了清楚起见，我在这里明确表示。）

在第一种情况下，使用`this`非常明显。

在第二种情况下，它*稍微*不那么明显，因为它由于 lambda 表达式而被延迟。但是仍然不允许...因为编译器会尝试构建一个用作`this`目标的委托，如下所示：

```
class Foo
{
    int x = 10;
    Func<int> y = this.GeneratedMethod;

    private int GeneratedMethod()
    {
        return x;
    }
} 
```

C# 5 规范的第 10.5.5.2 节禁止这样做：

> 实例字段的变量初始值设定项不能引用正在创建的实例。

最简单的解决方法是将初始化放在构造函数主体中，您*可以*在其中引用`this`. 所以在你的代码中：

```
public class MyClass
{
    public int X { get; set; }
    public int Y { get; set; }

    private Lazy<int> lazyGetSum;

    public MyClass()
    {
        lazyGetSum = new Lazy<int>(() => X + Y);
    }

    public int Sum{ get { return lazyGetSum.Value; } }
} 
```

请注意，我也简化了 lambda 表达式——它很少值得使用`new Func<int>(...)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T09:36:34.580

该错误准确地告诉您出了什么问题。您无法访问字段初始值设定项中的属性。

假设你的类是这样的：

```
public class MyClass
{
    public int X { get; set; }
    public int Y { get; set; }

    private Lazy<int> lazyGetSum = new Lazy<int>(new Func<int>(() => 2 + 3));
    public int Sum { get { return lazyGetSum.Value; } }

} 
```

然后它将毫无问题地编译。因为在您的代码中，您正在字段初始化中访问属性 X 和 Y。你得到了错误。

如果需要，您还可以在构造函数中初始化它们：

```
public class MyClass
{
    public int X { get; set; }
    public int Y { get; set; }

    private Lazy<int> lazyGetSum; 
    public int Sum { get { return lazyGetSum.Value; } }

    public MyClass()
    {
        lazyGetSum = new Lazy<int>(new Func<int>(() => X + Y));
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T09:36:28.643

我认为您需要定义`static`字段才能像这样使用它；

```
public  class MyClass
    {
        public static int X { get; set; }
        public static int Y { get; set; }

        private Lazy<int> lazyGetSum = new Lazy<int>(new Func<int>(() => X + Y));
        public int Sum { get { return lazyGetSum.Value; } }
    } 
```

当然，您需要初始化字段。你不能用其他方式做到这一点。

**编辑**：或者您可以在**没有**任何定义的情况下使用您的构造函数进行定义`static`。

```
public MyClass()
    {
        lazyGetSum = new Lazy<int>(new Func<int>(() => X + Y));
    } 
```

和

```
private Lazy<int> lazyGetSum; 
public int Sum { get { return lazyGetSum.Value; } } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-22T19:04:40.687

如果要使用非静态方法。您还可[以为 Lazy self 使用构建替代方案，](https://www.siepman.nl/blog/lazyt-property-caching-alternative)该替代方案在 .Value 中获取 Func 参数，而不是在 Lazy 等构造函数中。

您的代码将如下所示：

```
public class MyClass
{
    public int X { get; set; }
    public int Y { get; set; }

    private readonly LazyValue<int> lazyGetSum = new LazyValue<int>();
    public int Sum { get { return lazyGetSum.GetValue(() => X + Y); } }
} 
```

**它在属性中实现属性。**就在你预期的地方，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-19T10:58:17.433

当我遇到类似问题时发现了这个问题，并想找到一个好的模式来使用。

其他答案中建议的“将初始化移动到构造函数”的问题是初始化函数的 lambda 现在出现在构造函数中（实际上，在以前不需要的类中现在需要显式构造函数）。

这个玩具示例很好，但是在一个具有许多属性的更复杂的类中，将与属性相关的所有逻辑放在一个地方很有用。

亚历克斯·西普曼的回答提出了一个很好的选择，但是托管该`LazyValue<>`课程的第三方网站现在似乎是“服务不可用”，无论如何我都不是在寻找第三方解决方案，只是一种与正常情况一起使用的有效模式`Lazy<>`班级。我还担心在某些用例中，每次访问属性时创建委托实例和关联的闭包可能并非易事。

由于其他答案中突出显示的问题，在构造函数中有一行似乎是不可避免的，但我似乎最好避免将属性逻辑放在构造函数本身中，因为它将与任何差异等中的属性分开。

以下两种模式似乎有效，但我不确定是否有更好的选择我错过了。

模式 1：不要费心使用 lambda - 在属性旁边声明一个真实函数，并将其包装在隐式委托中：

```
public class MyClass
{
  public MyClass()
  {
    lazyGetSum = new Lazy<int>(GetSum);
  }

  public int X { get; set; }
  public int Y { get; set; }

  private Lazy<int> lazyGetSum;
  public int Sum { get { return lazyGetSum.Value; } }
  private int GetSum() { return X + Y; }
} 
```

模式 2：声明一个属性 init 函数并从构造函数中调用它。

```
public class MyClass
{
  public MyClass()
  {
    LazyGetSumInit();
  }

  public int X { get; set; }
  public int Y { get; set; }

  private Lazy<int> lazyGetSum;
  public int Sum { get { return lazyGetSum.Value; } }
  private void LazyGetSumInit() { lazyGetSum = new Lazy<int>(new Func<int>(() => X + Y)); }
} 
```

看到两者并排，我想我更喜欢第二个，除了函数的名字看似笨拙。

[在我的实际实现中，我有一个类似于 的名称`InitSum`，因此它是“惰性”属性的实现细节，原则上可以在惰性和非惰性实现之间进行更改，而无需更改构造函数代码]

# android - 通知布局文件

> ID：14029435
> 
> 赞同：0
> 
> 时间：2012-12-25T09:36:03.640
> 
> 标签：android, notifications

我想为动态通知设置布局，我检查了一些参考资料。据说使用了一个Layout文件。我不想引用布局文件。我想要动态布局。在我定义了所有控件之后，我使用下面的句子来引用：

```
RemoteViews contentView = null;
contentView = new RemoteViews(this.getPackageName(),0000); 
```

它总是引用“0000”空间中的布局文件。但是这个“0000”是LinearLayout的一个ID。现在它有这样的错误：

```
couldn't inflate view for notification org.MM.MMShow/0x4308f
android.content.res.Resources$NotFoundException: Resource ID #0x0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:10:59.390

我认为您正在动态创建布局，例如

```
LinearLayout lLayout = new LinearLayout(this);
bla bla 
```

那你为什么不添加那个布局

```
contentView = new RemoteViews(this.getPackageName(), lLayout); 
```

而不是使用布局的ID。

# php - 多语言网站php

> ID：14029437
> 
> 赞同：1
> 
> 时间：2012-12-25T09:36:22.250
> 
> 标签：php, .htaccess, mod-rewrite, multilingual

在过去的几天里，我一直致力于创建一个基于 PHP 的多语言网站。我已经尝试了很多解决方案，但到目前为止没有运气。

这就是我希望我的 URL 的外观：
[http ://www.example.com/en/about](http://www.example.com/en/about)
[http://www.example.com/cs/o-nas](http://www.example.com/cs/o-nas)
等。

在我决定实现多语言支持之前，我一直在使用这个重写规则，它工作得很好：

```
RewriteBase /kittytea/
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9_-]+)$ ?page=$1 [L] 
```

我的链接如下所示：

```
<a href="about"> 
```

有没有人知道如何添加多语言支持？我熟悉使用 GET 方法传递 URL 参数。

我可能会补充一点，我正在使用一个简单的 PHP SWITCH 语句来加载各个网站部分。

PS - 这是一个非常小的网站，我不需要一流的解决方案。我只是想让它工作:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:46:11.327

您可以尝试将 2 个字母的语言代码作为重写的一部分：

```
RewriteBase /kittytea/

# with language
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-z]{2})/([a-zA-Z0-9_-]+)$ ?lang=$1&page=$2 [L]

# original, without language
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9_-]+)$ ?page=$1 [L] 
```

然后，您的 php 脚本需要检查`lang`参数中的 2 个字母语言代码并返回适当的内容。

然后，您需要将链接更改为：

```
<a href="en/about"> 
```

# javascript - 动画 fullCalendar 视图更改

> ID：14029439
> 
> 赞同：3
> 
> 时间：2012-12-25T09:36:30.477
> 
> 标签：javascript, jquery, calendar, fullcalendar

我有一个带有 fullCalendar jQuery 插件的月历。每当用户单击一天时，我想将日历的视图更改为议程日。它工作正常，但是，当我尝试对其进行动画处理时遇到了一些麻烦，这就是我得到的：

```
 var cal = $('#calendar').fullCalendar({
        //Set up my calendar.....
        dayClick: function(date, allDay, jsEvent, view) {
            calendario.animate({width:'toggle'},function() {
                cal.fullCalendar('changeView','agendaDay');
                cal.fullCalendar('gotoDate',date);
                calendario.animate({width:'toggle'});
            });
        }
    }); 
```

当我单击某一天时，日历会以某种效果“消失”，当它重新出现时，它只是带有月视图的同一个日历，但它设置为不显示。

但是，这是出现问题的时候，如果我按 alt 或 F11，就会出现议程视图。这真的很奇怪。

我正在使用 Firefox 17.0.1

# qt4 - 使用 QtCreator 进行选择性静态编译

> ID：14029442
> 
> 赞同：0
> 
> 时间：2012-12-25T09:36:52.957
> 
> 标签：qt4, static-libraries, qt-creator, static-linking

我在 ubuntu 64 位和 Qt4 下使用 QtCreator。

我正在将`boost::filesystem`lib用于一个项目，我想只将这个静态编译到最终的可执行文件中，我仍然没有找到一种方法来采用选择性静态编译或指定给Qtcreator的方法，我`boost::filesystem`只想静态编译，其他一切都可以是动态的。

```
######################################################################
# Automatically generated by qmake (2.01a) mar dic 25 07:27:22 2012
######################################################################

QMAKE_CXXFLAGS += -std=c++11 -O3 -DNDEBUG

TEMPLATE = app
TARGET = 
DEPENDPATH += .
INCLUDEPATH += . \
               ~/libs/boost_1_52/include
LIBS += -static -L~/libs/boost_1_52/lib \
        -lboost_filesystem

# Input
SOURCES += main.cpp 
```

我试图将`static`标志放在任何地方都没有结果，甚至是`Bdynamic`和`Bstatic`标志。

这在 QtCreator 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T17:38:17.810

如何直接链接 *.a 文件而不是使用`static -L~/libs/boost_1_52/lib -lboost_filesystem`...？

# ruby - 网页抓取返回空字符串

> ID：14029444
> 
> 赞同：0
> 
> 时间：2012-12-25T09:37:15.150
> 
> 标签：ruby, web, screen-scraping, mechanize

[我写了一些代码来返回和显示这个网站](http://metarand.com)上最近的五个帖子。然而，当我使用`for`循环运行代码时，会返回一个空字符串。代码如下：

```
require 'rubygems'
require 'mechanize'

agent = Mechanize.new
site  = "http://metarand.com"
page  = agent.get(site)

for i in 1..5
  puts "#{i}) - #{page.search("#boxes :nth-child(i) .clearfix .blog-title")}"
end 
```

代码有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:14:24.837

我相信，你需要这样的东西：

```
(1..5).each {|i| puts %Q~#{i} - #{page.at("#boxes :nth-child(#{i}) .clearfix .blog-title").text}~  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:11:34.723

```
agent = Mechanize.new
site  = "http://metarand.com"
agent.get(site) do |page|
  for i in 1..5
    puts %Q~#{i} - #{page.search("#boxes :nth-child(#{i}) .clearfix .blog-title")}~
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:13:45.960

简单的错误：

```
puts "#{i}) - #{page.search("#boxes :nth-child(i) .clearfix .blog-title")}"
                                              ^^^ 
```

应该：`#{i}`

# c# - System.Drawing 对象非托管资源处理

> ID：14029451
> 
> 赞同：1
> 
> 时间：2012-12-25T09:38:51.330
> 
> 标签：c#, c#-4.0, dispose, unmanaged, system.drawing

我有以下代码：

```
using System.Drawing;
...
Graphics _graphics = Graphics.FromImage(...)
...
public void Draw(Stream stream, Rectangle rect, Color color) {
    _graphics.FillRectangle(new SolidBrush(Color), 0, 0, Width, Height);
    _graphics.DrawImage(new Bitmap(stream), rect);
} 
```

我应该使用 on 包围 drawImage`new Bitmap(...)`吗？同样的问题`new SolidBrush(...)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:43:41.437

是的，您应该将它们包装在 using 语句中。此外，您应该确保在`_graphics`您在此类中使用的实例上调用 Dispose 方法。这可以通过实现包含类来完成，`IDisposable`以便此类的使用者可以将其包装在`using`语句中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:42:59.973

是的，处置这些资源很重要。特别是位图很麻烦，它消耗大量的非托管内存来存储像素数据，但托管的 Bitmap 类包装器非常小。您可以在触发垃圾回收之前创建*大量*Bitmap 对象，从而导致 Bitmap 构造函数开始失败的可能性很高，因为没有更多的非托管内存可用。

所以像这样重写它：

```
public void Draw(Stream stream, Rectangle rect, Color color) {
    using (var bmp = new Bitmap(stream))
    using (var brush = new SolidBrush(Color)) {
        _graphics.FillRectangle(brush, 0, 0, Width, Height);
        _graphics.DrawImage(bmp, rect);
    }
} 
```

# solr - Solr MoreLikeThis：我可以给 Solr 5 个文档 ID 并获得更多像这 5 个这样的文档吗？

> ID：14029457
> 
> 赞同：2
> 
> 时间：2012-12-25T09:39:27.307
> 
> 标签：solr, lucene, morelikethis

从文档中我不清楚这一点。是否可以提供 Solr X 文档 ID 并告诉它我想要类似的文档？

例子：

*   用户正在浏览 5 篇不同的文章
*   我将这 5 篇文章的 ID 发送给 Solr，以便向用户展示其他类似的文章

我不清楚是否发送文档 ID，也不清楚 MoreLikeThis 是否可以像本示例中那样对多个文档进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:24:09.887

您可以尝试使用查询传递多个 ID `q=id:(document_id1 OR document_id2 OR document_id3)`：-

例如

```
http://localhost:8080/solr/select/?qt=mlt&q=id:(document_id1 OR document_id2 OR document_id3)&mlt.fl=[field1],[field2],[field3]&fl=id&rows=10 
```

# php - 如何将许多图像添加到 mysql 数据库？

> ID：14029469
> 
> 赞同：3
> 
> 时间：2012-12-25T09:40:28.097
> 
> 标签：php, mysql

我有一个表格，可以将多个选定的文件上传到文件夹。我只需要找到如何使用 PHP 将它们插入数据库？

HTML 表单

```
<form name="demoFiler" id="demoFiler" enctype="multipart/form-data">
<input type="file" name="multiUpload" id="multiUpload" multiple />
<input type="submit" name="submitHandler" id="submitHandler" value="Upload" class="buttonUpload" />
</form> 
```

PHP 代码

```
if($_SERVER['REQUEST_METHOD'] == "POST"){
    if(move_uploaded_file($_FILES['file']['tmp_name'], "uploads/".$_FILES['file']['name'])){
        echo($_POST['index']);
    }
    exit;
} 
```

* * *

这是我的代码，首先我无法将文件移动到上传文件夹：

```
<?php

$username = "root";
$password = "";
$host = "localhost";
$database = "db_holiday";

// Make the connect to MySQL or die
// and display an error.
$link = mysql_connect($host, $username, $password);
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

// Select your database
mysql_select_db ($database);

if($_SERVER['REQUEST_METHOD']=="POST")
{
    foreach ($_FILES['multiUpload']['name'] as $fileName) { 
        $uploaddir= '/upload/';
    $uploadfile = $uploaddir . basename($fileName);
        if (move_uploaded_file($fileName, $uploadfile)) {
            echo "File is valid, and was successfully uploaded.\n";
        } else {
            echo "Possible file upload attack!\n";
        }
    }
}

?>
<form action="" method="POST" enctype="multipart/form-data">
<input type="file" name="multiUpload[]" id="multiUpload" multiple="multiple" />
<input type="submit" name="button"/>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T09:45:28.440

HTML：

```
<input type="file" name="multiUpload[]" id="multiUpload" multiple /> 
```

php:

```
foreach ($_FILES['multiUpload'] as $fileName) { 
    //write your code here
    //$fileName
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T09:43:21.650

使用 2 个`input type="file"`元素

```
<input type="file" name="img_1" />
<input type="file" name="img_2" /> 
```

使用访问每个文件

```
$_FILES['img_1'][];
$_FILES['img_2'][]; 
```

或者您也可以使用类似的数组

```
<input type="file" name="img[]" />
<input type="file" name="img[]" />
<!--Which is often used in checkboxes--> 
```

并使用访问每个图像

```
$_FILES['img']['tmp_name'][0];
$_FILES['img']['tmp_name'][1]; 
```

# php - jQuery弹出后如何调用当前/正确的值

> ID：14029471
> 
> 赞同：2
> 
> 时间：2012-12-25T09:40:31.880
> 
> 标签：php, jquery

基本上，我有一个由 foreach 循环组成的文件列表，除了名称之外，它们都具有相同的代码，其中包含每个文件的 file_id。我的问题是，当我添加一个点击弹出事件时，我失去了获取当前`$(".flag")`属性名称的能力。有没有一种方法可以让我一路传递它，以便最终使用它？

PHP：（用户看到他们可以点击的链接......请记住，其中有几个是 foreach 循环的结果。例如，我正在展示一个）

```
echo "<td><a href='#' class='flag' name='$files[id]' >Click Here</a>  ( $files[nums] )</td>"; 
```

jQuery：（点击会发生）

```
$(".flag").live('click', function() {
    $(".pop").show("slow"); 
    return false;
}); 
```

HTML：这个 div 会弹出

```
<div class="pop">
      <form method="post" id="new_folder" >
          <p><label for="folder">Reason for Reporting?</label><textarea id="report_reason" name="report_reason" maxlenght="100" style="resize:none" cols="30" rows="5">Please limit your response to 100 characters.</textarea></p>
          <p><input type="submit" value="Submit" id="message_submit"/> or <a class="close" href="/">Cancel</a></p>
      </form>
  </div> 
```

jQuery：在提交时，我需要`$files['id']`通过 ajax 发送当前和 textarea 值。textarea 发送正确的数据，但`$(".flag")`不是所选链接的 id，而是从 foreach 循环中获取的第一个 id 的 id

```
$("#message_submit").on("click", function(e){
      var fileID = $(".flag").attr("name");
      var text = $("#report_reason").val();
      $(".pop").hide("slow"); 

      $.ajax({
              url: '<?php echo base_url().'home/report_file';?>', 
              type: 'POST',
              data: { val: fileID, val2: text },
              dataType: 'json', 
              success: function(output_string){
                  $(".success").text("You have flagged this file!!").show().css({"color" : "green", "margin-top" : "10px"});
                  $(".success").fadeOut(10000);   
              }
      });
      return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:50:27.427

您可以链接`save`并稍后使用它。`.flag``clicked`

```
var flagClicked;

$(".flag").live('click', function() {
    $(".pop").show("slow"); 
    flagClicked = $(this);
    return false;
});

$("#message_submit").on("click", function(e){
      var fileID = flagClicked.attr("name");
       .... 
```

# iphone - 核心数据布尔属性 NSNumber 不记得它是布尔值

> ID：14029473
> 
> 赞同：7
> 
> 时间：2012-12-25T09:40:49.727
> 
> 标签：iphone, objective-c, ios, core-data

我有一个具有如下属性的模型：

![在此处输入图像描述](../Images/4941b72a5f370056fa38a731967814b9.png)

当我设置它的值时，例如：

```
model.isResolved = @YES; 
```

保存在模型中的 NSNumber “忘记”它是一个布尔值：

```
NSLog(@"%@", strcmp([self.isResolved objCType], @encode(BOOL)) == 0 ? @"equal" : @"different"); 
```

打印“不同”。那是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:55:18.217

> 那是怎么回事？

从[文档](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)中：

> 请注意，数字对象不一定保留创建它们的类型。

这是 Cocoa 中另一个优化不一致的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T13:06:35.777

Core Data 为托管对象类的所有属性（和关系）动态生成 getter 和 setter 方法。这些访问器方法不同于由实例变量支持的“常规”@synthesized 访问器方法。

特别是，如果您设置一个属性，然后再次检索该属性值，您可以获得一个***与“原始”对象不同的对象***。以下测试显示了这一点，`foo1`它是具有布尔属性“show”的核心数据实体的实例：

```
NSNumber *yes = @YES;
NSLog(@"yes = %p, type = %s", yes, [yes objCType]);
foo1.show = yes;
NSNumber *val = foo1.show;
NSLog(@"val = %p, type = %s", val, [val objCType]); 
```

*输出：*

```
yes = 0x16e595c, type = c
val = 0x744c150, type = i 
```

因此，即使您将属性设置为*c = char*编码数字，getter 方法也会返回*i = int*编码数字。

此测试是在 iOS 模拟器中完成的。有趣的是，在 OS X 64 位上运行的相同测试返回一个*c = char*编码的数字。

因此，Core Data 对象中布尔和其他标量属性的实际编码可能应该被视为 Core Data 的实现细节。

如果您需要检查模型中定义的核心数据类型，您可以使用对象实体描述而不是`objCType`：

```
NSEntityDescription *entity = [foo1 entity];
NSAttributeDescription *attr = [[entity attributesByName] objectForKey:@"show"];
NSAttributeType type = [attr attributeType];
if (type == NSBooleanAttributeType) {
    NSLog(@"Its a Boolean!");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T14:16:53.403

它存储为 NSNumber - 顺便说一下，@YES 正在创建一个类似 NSNumber

`[NSNumber numberWithBool:YES]`

所以要让布尔值回来，你可以这样做：

`[isResolved boolValue]`

（您可以通过在创建模型时勾选使用标量属性来避免这种情况）

# highcharts - minPadding 不起作用

> ID：14029476
> 
> 赞同：1
> 
> 时间：2012-12-25T09:41:23.003
> 
> 标签：highcharts, highstock

我有[图表](http://jsfiddle.net/elias2012/b5Kkk/)

现在如果数据等于 1 那么这条线很难在下面的图片中看到

![在此处输入图像描述](../Images/c3cd02def51f4895cfa1ab0decfd9917.png)

我写：

```
minPadding: 0.08,
maxPadding: 0.08, 
```

但这不起作用

如何将图形向下移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:15:42.343

问题是，当您设置为时`minPadding`，`0.08`您会得到填充，但使用`tickPositioner`开始`1`时看起来不像，因为您需要更多空间来显示填充。
所以将它的起点从 更改`1`为`0`。

```
tickPositioner: function(min, max) {
    return [0,10,20,30,40];
} 
```

[**演示**](http://jsfiddle.net/dtXSR/)

**更新**- 根据评论：

因此设置`startOnTick`为`false`和`min`，`0`这将强制显示填充，因为最小值为 0。

[**演示1 演示**](http://jsfiddle.net/dtXSR/1/) [**2**](http://jsfiddle.net/b5Kkk/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:20:47.367

它应该是`false`默认的，但似乎如果你明确设置

```
startOnTick: false 
```

然后你得到所需的间距：

![在此处输入图像描述](../Images/e39f7cf57f689539171c5000fe6ff209.png)

[在这里](http://jsfiddle.net/b5Kkk/1/)更新了小提琴。

# smtp - 为什么 google smtp 在发送单个 . 输入数据时换行符后的点

> ID：14029480
> 
> 赞同：3
> 
> 时间：2012-12-25T09:42:26.413
> 
> 标签：smtp

当我尝试在端口号 25 上的 alt1.aspmx.l.google.com 上向 google smtp 服务器发送邮件时，它表现正常，但是当我输入数据并在新行后按一个点时，它仍然不会停止接受数据并保持接受。

====

看下面的对话

**nc alt1.aspmx.l.google.com 25**

*mx.google.com 为您服务*
**HELO ashish**
250 mx.google.com 为您服务
**MAIL FROM:info@server.com**
250 2.1.0 OK hn8si29938637igb.69
**RCPT TO:info2myname @gmail.com**
250 2.1.5 OK hn8si29938637igb.69
**DATA**
354 继续 hn8si29938637igb.69
**标题等等等等**
**，这是ashish。**
**现在你应该停下来**
**。**
**.**

===============

我希望服务器在看到 . 但它没有

我是否犯了任何错误，我希望不是因为相同的命令序列适用于其他 SMTP 服务器。使用 Google smtp 时是否有任何特殊的差异规则来提及数据结束？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-03-04T02:51:32.667

我正在使用`openssl`客户端进行 TLS 会话。我对 Google 的 smtp 中继服务也有同样的问题。而不是单行中的点，我可以执行 ctrl-D，此时客户端以“完成”一词终止……但我从未收到电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T21:33:05.677

我知道这是一篇旧帖子，但您可能想使用 nc -C

# python - Python Tk（Tkinter）在ubuntu unity上不起作用

> ID：14029482
> 
> 赞同：3
> 
> 时间：2012-12-25T09:42:43.273
> 
> 标签：python, tkinter, tk

python 2.7.3 中的此代码在 windows xp 中工作，在 Ubuntu Unity 中不起作用。如何在 ubuntu 中制作窗口透明度。

```
# -*- coding: UTF-8 -*-
from Tkinter import Tk

window = Tk()
window.wm_attributes('-alpha',0.8)
window.geometry('500x500+200+211')
window.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T20:06:11.280

试试这个：

```
from Tkinter import Tk

window = Tk()
window.wait_visibility(window)
window.wm_attributes('-alpha',0.8)
window.geometry('500x500+200+211')
window.mainloop() 
```

# php - 使用 PHP 脚本的 HTML 电子邮件

> ID：14029484
> 
> 赞同：0
> 
> 时间：2012-12-25T09:43:22.090
> 
> 标签：php, html, email, html-email

我希望以 HTML 格式发送一封电子邮件，并且在这封电子邮件中我需要从 php 表单传递数据。电子邮件作为 html 电子邮件成功发送，但不显示从 PHP VARIABLE 传递的数据。

```
$name = "PHP TEXT";
$headers = "From: " ."mail@example.com" . "\r\n";
$headers .= "Reply-To: ". "mail@example.com" . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$message = "<html><body><h1>HTML TEXT <?php echo $name; ?></h1></body></html>";

$email_to = 'example@mail.com'; //the address to which the email will be sent
$subject = "test";
$email    =   "example@mail.com";

if (mail($email_to, $subject, $message, $headers)) {
    echo 'sent'; // success      
} else {
    echo 'failed'; // failure    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T09:47:41.060

这一行：

```
$message = "<html><body><h1>HTML TEXT <?php echo $name; ?></h1></body></html>"; 
```

它应该是这样的：

```
$message = "<html><body><h1>HTML TEXT $name </h1></body></html>"; 
```

或者

```
$message = "<html><body><h1>HTML TEXT " . $name . " </h1></body></html>"; 
```

`<?php`并 `?>`用于指定其中的文本是 PHP 代码，而不是 HTML。[这里](http://php.net/manual/en/language.basic-syntax.phpmode.php)有一些关于它的细节。

但是您已经在 PHP 代码块中，而不是指定另一个 PHP 块，您应该使用字符串连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T09:48:38.220

您没有在脚本中使用任何表单值。你知道 $_POST 或 $_GET 是如何工作的吗？

您将 $name 设置为硬编码值，因此当您使用它时它始终是该值，而且，由于您使用 PHP 创建字符串，因此您不需要在这一行中回显 php。即（因为您使用的是双引号）

```
$message = "<html><body><h1>HTML TEXT $name;</h1></body></html>"; 
```

因此，如果您可以发布您的 HTML 表单，您的 $name 分配可能类似于

```
$name  = $_POST['name'] 
```

但强烈建议您清理和验证所有用户提供的信息。这应该是一个相当简单的谷歌搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:47:03.247

另一种解决方案可以是关闭 " 之前喜欢

```
$message = "<html><body><h1>HTML TEXT ".$name." how are you?</h1></body></html>"; 
```

无需启动和关闭 PHP，因为您已经在 PHP 工作区中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T09:48:16.933

试试这个..

```
$message = "<html><body><h1>HTML TEXT".$name."</h1></body></html>"; 
```

您正在将 分配`html`给 php 变量。所以你不必`echo`在那里变量..只需使用适当的连接

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-25T10:16:38.157

$message 变量本身被错误地使用了。

```
$message = "<html><body><h1>HTML TEXT <?php echo $name; ?></h1></body></html>"; 
```

它应该是

```
$message = "<html><body><h1>HTML TEXT  $name </h1></body></html>"; 
```

或这个：

```
$message = "<html><body><h1>HTML TEXT ".$name." </h1></body></html>"; 
```

# ruby-on-rails - 无法添加 Heroku 调度程序插件

> ID：14029496
> 
> 赞同：0
> 
> 时间：2012-12-25T09:45:04.427
> 
> 标签：ruby-on-rails, heroku, rake-task, paas

在我的 Rails 应用程序中，我有一个想要定期运行的 rake 任务。当我尝试将 Heroku 调度程序插件添加到我的应用程序时，我收到此错误：

“无法与供应商创建资源，请稍后再试”

这通过 Web 界面和控制台都发生。我在控制台中运行的命令是：

```
heroku addons:add scheduler:standard 
```

该插件完全免费，但我的帐户仍然通过我的付款信息进行了验证。知道为什么会这样吗？

# scala - 为什么此代码返回 Unit，而我希望它返回一些其他值？

> ID：14029505
> 
> 赞同：1
> 
> 时间：2012-12-25T09:46:23.630
> 
> 标签：scala

```
class Account {
    val id = Account.newUniqueNumber()
    private var balance = 0.0
    def deposit(amount: Double) { balance += amount }
}

object Account {
    private var lastNumber = 0
    private def newUniqueNumber() {
        lastNumber += 1; lastNumber
    }
}

var a1 = new Account()
var a2 = new Account()
println(a1.id)
println(a2.id)

~/myScala % scala -version
Scala code runner version 2.9.1 -- Copyright 2002-2011, LAMP/EPFL
~/myScala % scala Account.scala
()
()
~/myScala % 
```

我期待 1,2 作为输出...我的推理是...
1\. 构造了一个新的 Account 对象
2\. 在初始化 id 字段时，构造了伴随对象（仅一次）

所以 newUniqueNumber() 调用应该返回 1 和 2...

任何指针？

谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T09:53:54.830

该方法`newUniqueNumber`应该返回一些东西，因此您需要在其签名中添加一个等号：

```
private def newUniqueNumber() = {
  lastNumber += 1
  lastNumber
} 
```

没有它，它返回`Unit`类似于 Java`void`并打印为`()`.

# php - 如何通过 PHP 中不同数量的字段对多维数组进行排序？

> ID：14029506
> 
> 赞同：0
> 
> 时间：2012-12-25T09:46:32.013
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [如何在 php 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

...........

***这不是重复的**。在stackoverflow上确实有很多关于对多维数组进行排序的问题（我相信我昨天在发布我的问题之前阅读了大部分问题......），但我所看到的没有一个涉及我的特定问题：按**可变数字**排序的领域。下面@dev-null-dweller 给出的答案就是这样做的。*

...........

我正在尝试为 PHP 中的多维数组创建一个灵活的排序函数。

我所追求的灵活性在于排序字段的数量（对于 1、2 或 3 级排序可能是 1、2 或 3），以及这些字段的标识。

这是我的数组的一个示例：

```
Array
(
[0] => Array
    (
        [title] => Australia Book
        [price] => 209.00
        [code] => 3571313
        [con] => Australia & Oceania
        [ctry] => Australia
    )

[1] => Array
    (
        [title] => New Zealand Book
        [price] => 169.00
        [code] => 3571346
        [con] => Australia & Oceania
        [ctry] => New Zealand
    )

[2] => Array
    (
        [title] => Austria Book
        [price] => 129.00
        [code] => 3571230
        [con] => Europe
        [ctry] => Austria
    )

[3] => Array
    (
        [title] => Austria Pocket Book
        [price] => 119.00
        [code] => 3571354
        [con] => Europe
        [ctry] => Austria
    )

[4] => Array
    (
        [title] => Amsterdam Book
        [price] => 59.00
        [code] => 3571350
        [con] => Europe
        [ctry] => Netherlands
    )

[5] => Array
    (
        [title] => Britain
        [price] => 59.00
        [code] => 3571315
        [con] => Europe
        [ctry] => Britain
    )
) 
```

我有时只需要按标题排序，有时按 ctry 然后标题，有时按 con，然后 ctry 然后标题，等等。

我已经成功地进行了 2 级排序，如下所示：

```
usort($arrCatalog, array('Catalogs_model', 'multi_compare'));

function multi_compare($a ,$b) {
if ($a['con'] < $b['con']) {
    return -1;
  } elseif  ($a['con'] > $b['con']) {
    return 1;
  } else {
    return strcmp($a['title'], $b['title']);
  }

} 
```

第一个问题是如何`multi_compare`在从内部调用时将参数传递给函数`usort`。

在我们解决这个问题后，我很乐意提供一些关于如何更改`multi_sort`身份和/或字段数量的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:56:25.730

您正在使用静态方法进行自定义排序，因此您可以在此类之前设置一些静态属性`usort`

```
class Catalogs_model{
    public static $usort_criteria = array();

    public static function multi_compare($a,$b){
        foreach(self::$usort_criteria as $what => $order){
            if($a[$what] == $b[$what]){
                continue;
            }
            return (($order == 'desc')?-1:1) * strcmp($a[$what], $b[$what]);
        }
        return 0;
    }
}

Catalogs_model::$usort_criteria = array(
   'con' => 'asc',
   'title' => 'asc'
);
usort($arrCatalog, array('Catalogs_model', 'multi_compare')); 
```

当然它需要一些调整，因为现在它只对字符串进行排序。

# android - 如何一次在所有屏幕上显示单个列表项？

> ID：14029511
> 
> 赞同：1
> 
> 时间：2012-12-25T09:47:01.460
> 
> 标签：android, listview

我在 android 上有列表。每次用户向左或向右滑动屏幕时，我都需要向他们展示带有详细信息的单个项目。在这种情况下我应该使用哪种方法。

示例截图：第一项

[第一项 http://imageshack.us/a/img707/9789/slide1t.png](http://imageshack.us/a/img707/9789/slide1t.png)

当用户向左滑动时出现第二个项目

[第一项 http://imageshack.us/a/img163/7351/slide2nl.png](http://imageshack.us/a/img163/7351/slide2nl.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:31:05.543

您可以使用 ViewPageIndicator [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:39:02.077

TOMKA 提到的 ViewPageIndicator 和 ExpandableListView 的组合应该可以解决问题：http: [//developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T12:37:47.797

哟可以看看下面的教程，

[http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/](http://www.edumobile.org/android/android-beginner-tutorials/view-pager-example-in-android-development/)

![在此处输入图像描述](../Images/fbe7bd3c8276b70814a98ff1acb65f6a.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T14:47:21.837

我为我的问题找到了简单的解决方案。带有 OnGestureListener 的 ViewSwitcher 解决了我的问题。

[http://www.youtube.com/watch?v=mGwG8-chUEM](http://www.youtube.com/watch?v=mGwG8-chUEM)

参考：

ViewFlipper：http: [//developer.android.com/reference/android/widget/ViewFlipper.html](http://developer.android.com/reference/android/widget/ViewFlipper.html)

ViewSwitcher：http: [//developer.android.com/reference/android/widget/ViewSwitcher.html](http://developer.android.com/reference/android/widget/ViewSwitcher.html)

GestureDetector.OnGestureListener：http: [//developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html](http://developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html)

源代码： [http ://www.mediafire.com/?fg32sn1345xn5dl](http://www.mediafire.com/?fg32sn1345xn5dl)

我的活动没有所有代码，所以它可能无法正常工作。但逻辑就在这里。

--------我的解决方案--------

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ViewSwitcher
        android:id="@+id/viewSwitcher"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#65ffffff" >

            <TextView
                android:id="@+id/txtHeader"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:text="0" />

            <TextView
                android:id="@+id/txtDetail"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/txtKurum"
                android:layout_centerHorizontal="true"
                android:text="0" />
        </RelativeLayout>
    </ViewSwitcher>

</LinearLayout> 
```

-活动-

```
public class MyActivity extends Activity implements OnClickListener,
        OnGestureListener {

    ArrayList<String> liste;

    TextView txtHeader;
    TextView txtDetail;

    private ViewSwitcher switcher;

    int bakiyeCounter = 0;
    private GestureDetector gesturedetector = null;

    int SWIPE_MIN_VELOCITY = 100;
    int SWIPE_MIN_DISTANCE = 100;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bakiye);
        switcher = (ViewSwitcher) findViewById(R.id.viewSwitcher);
        txtHeader = (TextView) findViewById(R.id.txtHeader);
        txtDetail = (TextView) findViewById(R.id.txtDetail);
        gesturedetector = new GestureDetector(this, this);
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        // Get Position
        float ev1X = e1.getX();
        float ev2X = e2.getX();

        // Get distance of X (e1) to X (e2)
        final float xdistance = Math.abs(ev1X - ev2X);

        final float xvelocity = Math.abs(velocityX);

        if ((xvelocity > SWIPE_MIN_VELOCITY)
                && (xdistance > SWIPE_MIN_DISTANCE)) {
            if (ev1X > ev2X)// Switch Left
            {
                if (bakiyeCounter < liste.size() - 1) {
                    bakiyeCounter++;
                    previousView();
                }
            } else// Switch Right
            {
                if (bakiyeCounter > 0) {
                    bakiyeCounter--;
                    nextView();
                }
            }
        }

        return false;
    }

    private void previousView() {

        txtHeader.setText(liste.get(bakiyeCounter).getHeader());
        txtDetail.setText(liste.get(bakiyeCounter).getDetail());
        switcher.showPrevious();

    }

    private void nextView() {

        txtDetail.setText(liste.get(bakiyeCounter).getHeader());
        txtHeader.setText(liste.get(bakiyeCounter).getDetail());
        switcher.showNext();

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return gesturedetector.onTouchEvent(event);
    }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

}

# android - Android ImageView 返回getWidth，getHeight 为零

> ID：14029513
> 
> 赞同：5
> 
> 时间：2012-12-25T09:47:07.540
> 
> 标签：android

ImageView 的 getWidth / getheight 函数有问题。我的xml如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/bonus_popup"
    android:visibility="gone"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView
        android:id="@+id/todaybonus"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:adjustViewBounds="true"
        android:src="@drawable/startscreen_todaybonus" />
    <ImageView android:id="@+id/ok_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="acceptBonus"
        android:background="#000000"></ImageView>
</RelativeLayout> 
```

我的代码如下：

```
if (isDisplayBonus){
    set_blur_background();
    bonusPopup.setVisibility(0);
    Log.i(TAG, "Bonus width: " + todayBonus.getWidth());
    Log.i(TAG, "Bonus height: " + todayBonus.getHeight());
} 
```

请帮我解决这个问题，。先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T16:06:25.400

嗯，我找到了原因。当我设置可见性时，实际上并没有绘制视图，所以我不能使用 getHeight 和 getWidth 函数。我找到了解决方案：使用 ViewTreeObserver

```
todayBonus.getViewTreeObserver().addOnPreDrawListener(
    new ViewTreeObserver.OnPreDrawListener() {
        public boolean onPreDraw() {
        int finalHeight = todayBonus.getMeasuredHeight();
        int finalWidth = todayBonus.getMeasuredWidth();
            // Do your work here
            return true;
    }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T09:53:14.617

可能是你打电话`getWidth()`太早`getHeight()`了。UI 尚未在屏幕上调整大小和布局，因此方法正确返回 0。再次检查您的整个代码。或在此处粘贴您的完整代码。

# android - 单击CheckBox时如何在ListView中获取项目

> ID：14029514
> 
> 赞同：2
> 
> 时间：2012-12-25T09:47:12.287
> 
> 标签：android, checkbox, android-listview

我已将 checkBoxView 添加到我的 ListView

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="6dip" >

    <TextView
        android:id="@+id/textViewWord"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/fstRow"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textViewTranslate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textViewWord"
        android:layout_below="@+id/textViewWord"
        android:textColor="#ff1009"
        android:text="@string/scndRow"        
        android:textAppearance="?android:attr/textAppearanceMedium" />   

    <CheckBox
        android:id="@+id/starCheck"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:button="@android:drawable/btn_star"
        android:focusable="false" 
        />

</RelativeLayout> 
```

这是我的代码

```
package com.wts.ui;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends Activity {        
    public final static int REQUEST_CODE = 1; 

    private WordsDBAdapter dbAdapter;
    private SimpleCursorAdapter dataAdapter;    
    private Button button;
    private EditText editWord;
    private EditText editTranslate;
    private ListView listView;  
    private String selectedWord;    
    private Cursor cursor;

    //context menu
    private final static int IDM_EDIT = 101;
    private final static int IDM_DELETE = 102;

    //options menu
    private static final int IDM_ABOUT = 201;
    private static final int IDM_EXIT = 202;    

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {       
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);                         

        dbAdapter = new WordsDBAdapter(this);
        dbAdapter.open();

        button = (Button)findViewById(R.id.buttonAddWord);

        listView = (ListView)findViewById(R.id.listWords);
        displayListView();      
        registerForContextMenu(listView);                       

        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "Add some words, please",
                        Toast.LENGTH_LONG).show();
            }
        });

        //================ListView onLongClick========================  
        listView.setOnItemLongClickListener(new OnItemLongClickListener() {
            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {              
                 cursor = (Cursor)listView.getItemAtPosition(arg2);
                 selectedWord = cursor.getString(0);
                 return false;                                                               
            }
        });         
        //================Button onClick========================                    
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) { 
                editWord = (EditText)findViewById(R.id.editWord);
                editTranslate = (EditText)findViewById(R.id.editTranslate);

                String word = editWord.getText().toString();
                String translate = editTranslate.getText().toString();

                if(word.length() > 0 && translate.length() > 0){
                    dbAdapter.insertWord(word,translate , "noDscrpt");
                    displayListView();

                    editWord.setText("");
                    editTranslate.setText("");
                }
            }
        });                     
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) { 
        if (v.getId() == R.id.listWords) { 
            String[] menuItems = getResources().getStringArray(
                    R.array.contextMenuItems);

            menu.add(Menu.NONE, IDM_EDIT, Menu.NONE, menuItems[0]);
            menu.add(Menu.NONE, IDM_DELETE, Menu.NONE, menuItems[1]);
        }
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case IDM_EDIT:

            Intent intent = new Intent(this, EditActivity.class);
            intent.putExtra(getResources().getString(R.string.fstRow),
                    cursor.getString(1));
            intent.putExtra(getResources().getString(R.string.scndRow),
                    cursor.getString(2));
            intent.putExtra(getResources().getString(R.string.thrdRow),
                    cursor.getString(3));

            startActivityForResult(intent, REQUEST_CODE);
            break;
        case IDM_DELETE:
            dbAdapter.deleteWord(selectedWord);
            displayListView();
            break;
        }
        return true;
    }

    @SuppressWarnings("deprecation")
    private void displayListView() {
        Cursor cursor = dbAdapter.fetchAllWords();
        String[] columns = new String[] { 
                WordsDBAdapter.KEY_WORD,
                WordsDBAdapter.KEY_TRANSLATION,             
                };

        int[] to = new int[] {
                R.id.textViewWord,
                R.id.textViewTranslate,             
                };

        dataAdapter = new SimpleCursorAdapter(this, R.layout.word_info, cursor,
                columns, to);

        listView.setAdapter(dataAdapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);

        String[] menuItems = getResources().getStringArray(R.array.options_menu_items);

        menu.add(Menu.NONE,IDM_ABOUT,Menu.NONE,menuItems[1]);
        menu.add(Menu.NONE,IDM_EXIT,Menu.NONE,menuItems[2]);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected (MenuItem item)
    {
        switch(item.getItemId())
        {   
        case IDM_ABOUT:
        {
            Intent intent = new Intent(MainActivity.this,AboutActivity.class);
            startActivity(intent);
            break;
        }       
        case IDM_EXIT:
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
            break;
        }
        return true;
    }

    @Override
    protected void onActivityResult(int requestCode,int resultCode,Intent intent)
    {
        if(resultCode == RESULT_OK && requestCode == REQUEST_CODE)
        {
            if(intent.hasExtra(getResources().getString(R.string.fstRow)))
            {
                dbAdapter.changeValue(
                        selectedWord,
                        intent.getExtras().getString(getResources().getString(R.string.fstRow)),
                        intent.getExtras().getString(getResources().getString(R.string.scndRow)),
                        intent.getExtras().getString(getResources().getString(R.string.thrdRow))
                        );
                displayListView();
            }
        }
    }

} 
```

如何获取包含我已单击的 CheckBox 的 listViewItem ？我需要在 CheckBox 上设置 OnClickListener 吗？但接下来呢？请帮助thnx！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:59:17.070

您应该创建您的自定义适配器，并且您可以将您的复选框捕获它的 getView 方法

```
public class CustomListAdapter extends ArrayAdapter<String> {  
    private Activity context;  
    private ListItemRow itemRow;  
    private String[] list;  
    private LayoutInflater layoutInflater;  

    public CustomListAdapter(Activity context, String[] list) {  
       super(context, R.layout.main, list);  
       this.context = context;  
       this.list = list;  
    }  

    @Override  
    public View getView(int position, View convertView, ViewGroup parent) {  
       View rowView = convertView;  
       if (rowView == null) {  
          itemRow = new ListItemRow();  
          layoutInflater = context.getLayoutInflater();  
          rowView = layoutInflater.inflate(R.layout.word_info, null, true);  

          itemRow.starCheck= (ChechBox) rowView.findViewById(R.id.starCheck);  
          itemRow.textViewTranslate= (TextView) rowView.findViewById(R.id.textViewTranslate);  

       } else {  
          itemRow = (ListItemRow) rowView.getTag();  
       }  

       itemRow.starCheck.setOnClickListener(new OnClickListener() { 
    @Override
    public void onClick(View v) {
              itemRow.textViewTranslate.setText("starCheck clicked");
      }
    });

       return rowView;  
    }  

    private class ListItemRow {  
       private ChechBox starCheck;  
       private TextView textViewTranslate;  
    }  
 } 
```

# c++ - 需要一个有效的减法算法模数

> ID：14029516
> 
> 赞同：8
> 
> 时间：2012-12-25T09:47:30.597
> 
> 标签：c++, c, math, modulus

对于给定的数字和`x`，我想在 C 中计算。看看这个例子：`y``n``x-y mod n`

```
int substract_modulu(int x, int y, int n)
{
    return (x-y) % n;
} 
```

只要`x>y`，我们都很好。然而，在另一种情况下，模运算是[undefined](https://stackoverflow.com/questions/7594508/modulo-operator-with-negative-values)。

你可以想到`x,y,n>0`。我希望结果是正数，所以如果`(x-y)<0`, then`((x-y)-substract_modulu(x,y,n))/ n`应该是一个整数。

你知道的最快的算法是什么？有没有一个可以避免任何调用`if`and `operator?`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T17:28:37.280

正如许多人指出的那样，在当前的 C 和 C++ 标准中，`x % n`不再为`x`和的任何值定义实现`n`。`x / n`在未定义 [1]的情况下，它是未定义的行为。此外，`x - y`在整数溢出的情况下是未定义的行为，如果 和 的符号可能不同，这是可能`x`的`y`。

因此，通用解决方案的主要问题是避免整数溢出，无论是在除法还是减法中。如果我们知道`x`and`y`是非负的并且`n`是正的，那么溢出和被零除是不可能的，我们可以自信地说这`(x - y) % n`是定义的。不幸的是，`x - y`可能是负数，在这种情况下，`%`运算符的结果也是如此。

`n`如果我们知道结果是肯定的，就很容易纠正结果是否定的；我们所要做的就是无条件地添加`n`并执行另一个`modulo`操作。这不太可能是最好的解决方案，除非你有一台除法比分支快的计算机。

如果有条件加载指令可用（这几天很常见），那么编译器可能会很好地处理以下代码，这些代码是可移植且定义明确的，受以下约束`x,y ≥ 0 ∧ n > 0`：

```
((x - y) % n) + ((x >= y) ? 0 : n) 
```

例如，gcc 为我的核心 I5 生成此代码（尽管它的通用性足以在任何非古生代英特尔芯片上工作）：

```
 idivq   %rcx
    cmpq    %rsi, %rdi
    movl    $0, %eax
    cmovge  %rax, %rcx
    leaq    (%rdx,%rcx), %rax 
```

这是愉快的无分支。（条件移动通常比分支快得多。）

另一种方法是（除了`sign`需要编写函数）：

```
((x - y) % n) + (sign(x - y) & (unsigned long)n) 
```

如果`sign`参数为负数，则全为 1，否则为 0。符号的一种可能实现（改编自[bithacks](http://graphics.stanford.edu/~seander/bithacks.html#CopyIntegerSign)）是

```
unsigned long sign(unsigned long x) {
  return x >> (sizeof(long) * CHAR_BIT - 1);
} 
```

这是可移植的（定义了将负整数值转换为无符号），但在缺乏高速移位的架构上可能会很慢。它不太可能比以前的解决方案更快，但是 YMMV。蒂亚斯。

对于可能整数溢出的一般情况，这些都不会产生正确的结果。处理整数溢出非常困难。（一个特别烦人的情况是`n == -1`，尽管您可以对其进行测试并返回 0 而无需使用`%`。）此外，您需要确定您对负模结果的偏好`n`。我个人更喜欢定义`x%n`为 0 或具有相同符号的定义`n`- 否则你为什么要使用负除数 - 但应用程序不同。

`n`如果不是`-1`并且`n + n`不会溢出，Tom Tanner 提出的三模解决方案将有效。`n == -1`如果是`x`or将失败，如果`y`is ，使用而不是的`INT_MIN`简单修复将失败。绝对值大的情况可以用比较代替，但是有很多极端情况，而且由于标准不需要2的补码算法，所以很难预测什么是极端情况。 [2]。`abs(n)``n``n``INT_MIN``n`

最后一点，一些诱人的解决方案不起作用。你不能只取 的绝对值`(x - y)`：

`(-z) % n == -(z % n) == n - (z % n) ≠ z % n`（除非`z % n`碰巧是`n / 2`）

而且，出于同样的原因，您不能只取模结果的绝对值。

此外，您不能只`(x - y)`转换为无符号：

`(unsigned)z == z + 2^k (for some k) if z < 0`
`(z + 2^k) % n == (z % n) + (2^k % n) ≠ z % n`除非`(2^k % n) == 0`

* * *

[1]`x/n`并且`x%n`如果`n==0`. 但是`x%n`如果是“不可表示”（即整数溢出）也是未定义`x/n`的，这将发生在二进制补码机器（即您关心的所有机器）上，如果`x`是最负的可表示数并且`n == -1`. 很清楚为什么`x/n`在这种情况下应该是 undefined ，但在 的情况下稍微少一些`x%n`，因为该值是（数学上）`0`。

[2] 大多数抱怨预测浮点运算结果困难的人并没有花太多时间尝试编写真正可移植的整数运算代码:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T10:01:08.683

如果您想避免未定义的行为，如果没有 if，以下将起作用

```
return (x % n - y % n + n) % n; 
```

效率取决于模运算的实现，但我怀疑涉及的算法`if`会更快。

或者，您可以将`x`and`y`视为未签名。在这种情况下，不涉及负数，也没有未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T11:05:40.053

在 C++11 中，未定义的行为被移除。根据您想要的确切行为，您可以坚持

```
return (x-y) % n; 
```

有关完整解释，请阅读此答案：

[https://stackoverflow.com/a/13100805/1149664](https://stackoverflow.com/a/13100805/1149664)

对于 n==0 或者如果 xy 不能存储在您正在使用的类型中，您仍然会得到未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T10:08:49.087

分支是否重要在某种程度上取决于 CPU。根据文档`abs`（在[MSDN](http://msdn.microsoft.com/en-us/library/tzkfha43%28v=vs.90%29.aspx)上）具有内在行为，它可能根本不是瓶颈。这个你必须测试。

如果您不想无条件地计算事物，那么可以从**Bit Twiddling Hacks** [网站](http://graphics.stanford.edu/~seander/bithacks.html#IntegerMinOrMax)改编一些不错的方法。

```
int v;           // we want to find the absolute value of v
unsigned int r;  // the result goes here 
int const mask = v >> sizeof(int) * CHAR_BIT - 1;

r = (v + mask) ^ mask; 
```

但是，如果没有有关硬件目标和测试的更多信息，我不知道这是否会对您的情况有所帮助。

只是出于好奇，我不得不自己对此进行测试，当您查看编译器生成的程序集时，我们可以看到使用`abs`.

```
unsigned r = abs(i);
====
00381006  cdq              
00381007  xor         eax,edx 
00381009  sub         eax,edx 
```

以下只是上述示例的另一种形式，根据 Bit Twiddling Site 没有专利（而 Visual C++ 2008 编译器使用的版本是）。

*在我的回答中，我一直在使用 MSDN 和 Visual C++，但我认为任何理智的编译器都有类似的行为。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-25T17:36:39.963

假设`0 <= x < n`和`0 <= y < n`，怎么样`(x + n - y) % n`？那么 x + n 肯定会大于 y，减去 y 总是会得到一个正整数，最后的 mod n 必要时会减少结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T11:02:30.383

我猜这里的情况并非如此，但我想提一下，如果你取模的值是 2 的幂，那么使用“AND”方法会快得多（我m 将忽略 xy，只显示它对单个 x 的工作原理，因为 xy 不是这里等式的一部分）：

```
int modpow2(int x, int n)
{
    return x & (n-1);
} 
```

如果您想确保您的代码不会做任何愚蠢的事情，您可以添加`ASSERT(!(n & n-1));`- 这会检查是否只设置了一个位`n`（因此，`n`是 2 的幂）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-20T07:39:11.067

这是我在竞争性编程中使用的 CPP 代码：

```
#include <iostream>
#include<bits/stdc++.h>
using namespace std;
#define ll          long long
#define  mod         1000000007

ll subtraction_modulo(ll x, ll y ){
        return ( ( (x - y) %  mod ) +  mod ) %  mod;
    } 
```

这里，

ll -> long long int

mod -> 要使用的全局定义的 mod 值。

# android - 在 Android 应用中接收电子邮件

> ID：14029517
> 
> 赞同：1
> 
> 时间：2012-12-25T09:47:30.283
> 
> 标签：android, email

我已经找到了很多符合我的问题的东西，但我无法使用它。我的应用程序通过 LAN 与其他应用程序通信，但现在我希望它们也通过电子邮件进行通信。

我的问题：如何在应用程序中接收电子邮件，例如来自 gmail 或其他人的电子邮件？

我已经找到了这个用于发送的工作代码：http: [//www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

我读到修改此代码很容易，以便它可以接收电子邮件，但我不知道该怎么做。请帮助或给我一些提示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:37:30.110

试试这个....

```
Properties props = new Properties();
//IMAPS protocol
props.setProperty("mail.store.protocol", "imaps");
//Set host address
props.setProperty("mail.imaps.host", "imaps.gmail.com");
//Set specified port
props.setProperty("mail.imaps.port", "993");
//Using SSL
props.setProperty("mail.imaps.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
props.setProperty("mail.imaps.socketFactory.fallback", "false");
Session imapSession = Session.getInstance(props);
Store store = imapSession.getStore("imaps");
store.connect("imap.gmail.com", usr, password);
Folder inbox = store.getFolder("Inbox");
inbox.open(Folder.READ_WRITE);
Message[] msgs =inbox.getMessages() 
```

# php - 使用 simple_dom_html 获取标题页时出错？

> ID：14029520
> 
> 赞同：0
> 
> 时间：2012-12-25T09:47:59.243
> 
> 标签：php

我有一个示例代码：

```
include('simple_html_dom.php');
$url = 'http://api.nrelate.com/mpw_wp/0.51.4/?tag=nrelate_popular&domain=dongcam.vn&url=http%3A%2F%2Fdongcam.vn%2Ft10041&maxageposts=4320&nr_div_number=2&increment=1';
$html = file_get_html($url);
// find all span tags with class=nr_post_title
foreach($html->find('span.nr_post_title') as $e)
    echo $e->innertext . '<br>'; 
```

=> 错误无法获得标题`<span class=\"nr_post_title\">`，如何解决？

# jsp - c:set 里面的 scriplet

> ID：14029523
> 
> 赞同：0
> 
> 时间：2012-12-25T09:48:13.343
> 
> 标签：jsp, jstl, scriptlet

正在阅读`Cookies`并检查是否找到了特定`Cookie`内容。如果`Cookie`找到特定的值，则将值设置为某个变量并使用它进行进一步检查。下面是代码。

```
<%
        String showPacksCookie = "DisabledPackagesTab";
        Cookie[] cookielistTab = request.getCookies();

        if(cookielistTab != null)
          {
            for(int i = 0; i<cookielistTab.length; i++)
              {
                  Cookie cookie = cookielistTab[i];

                if(cookie.getName().contains(showPacksCookie) && cookie.getValue().equals("true"))
                {
                    <c:set var="showPackstab" value="display" scope="request" /> 
                  //Above is line 122
                    break;
                }
              }
        }
%>

<c:if test="${showPackstab eq 'display'}">
 <b>Tab</b><img src="/tabImage.gif" align="left" />
</c:if> 
```

此代码引发以下异常，

`Syntax error, insert "AssignmentOperator Expression" to complete Assignment`在第 122 行

是否因为在 Scriplet 中使用 JSTL 而发生？如何摆脱这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T09:57:14.477

scriptlet 包含 Java 代码。`<c:set>`不是有效的 Java 代码。什么`<c:set>`是

```
request.setAttribute("showPackstab", "display"); 
```

所以这是你的 scriptlet 中应该有的代码。

但更重要的是，您根本不应该使用 scriptlet。坚持使用 EL、JSTL 和其他自定义标签。如果逻辑太复杂而无法使用这些来表达，则表明它不属于视图（JSP），而是属于控制器（用 Java 编写的 servlet 或动作，在 JSP 之前调用，它准备JSP 的数据，并在数据准备好后转发给 JSP）。

这里不是这种情况，因为以上所有内容都可以重写为：

```
<c:if test="${cookie.DisabledPackagesTab == 'true'}">
    <b>Tab</b><img src="/tabImage.gif" align="left" />
</c:if> 
```

# php - 是否有任何标准来验证 php 中的用户输入？

> ID：14029527
> 
> 赞同：-1
> 
> 时间：2012-12-25T09:48:50.210
> 
> 标签：php, validation

我在每一个地方都能找到“从不（永远）相信外国输入”。他们要求验证每个用户输入。但我不确定我应该验证什么。如果用户输入任何恶意代码，是否有任何标准来验证用户输入？其实我想知道这个恶意代码可能是什么以及如何验证？

在做了一些研究之后，我发现了一个用于密码验证、`FILTER_VALIDATE_EMAIL`电子邮件和`FILTER_VALIDATE_URL`url 验证的标准 password.php。但是对于其他输入形式，如姓名、文本区域、电话号码、用户名等，是否有任何标准可以验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:52:39.533

您应该根据您的业务规则**验证**输入（电子邮件验证就是这种情况）。您应该根据输出媒体**转义输出 - 当您将数据发送到浏览器时，您正在转义 HTML，当您发送到数据库时 - 您正在转义 db 特定字符等。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T09:54:55.157

一切都需要根据您的项目和用例需求进行验证。
原生 PHP 中没有标准的完美验证解决方案。
您可以使用优秀的**Zend 验证器**集合（即使没有 Zend）[http://framework.zend.com/manual/1.12/en/zend.validate.set.html](http://framework.zend.com/manual/1.12/en/zend.validate.set.html)
这是一个不错的选择，因为它们非常强大，并且包含您需要的一切现在以及您将来所需要的一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:51:02.560

不，没有验证用户输入的标准。

每个值都必须根据其含义和未来用途单独验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T11:57:15.867

不要将验证与清理混淆。以前的答案都很好，但我只想指出，当您需要用户输入为特定格式时，应该进行验证。电子邮件是电子邮件，因此您可以将电子邮件发送到有效的电子邮件地址（尽管该地址不一定是活动地址）。数字是数字，因此输入可以毫无问题地插入到数据库的`integer`/列中。`float`

一些验证任务还有助于保证您的数据库/应用程序（如验证整数）的安全。但是如何验证自由文本、电话号码、邮政地址等？大多数情况下，您需要对这种输入进行清理。转义特殊字符或确保用户的恶意`DELETE *`输入不会被执行。

对于喜欢验证（而不是清理）电话号码、邮政地址等的人来说，这也是一个词。互联网是全球性的（呃，真的……）。不要急于根据您所在国家/地区的格式规则使用过于严格的验证规则来限制用户输入。作为土生土长的芬兰人，我遇到过很多情况，严格的格式规则非常烦人，有时它们也无法提供正确的信息，因为编码员认为他非常聪明地定义了必须是每个人都正确的地址格式的严格格式，因为这是他地址的正确格式。

# objective-c - 如何在 uitableviewcell 之外添加图像

> ID：14029529
> 
> 赞同：2
> 
> 时间：2012-12-25T09:49:31.763
> 
> 标签：objective-c, cocoa-touch, uitableview, uiimage

人们到处都在问如何在 Uitableview 中添加图像。好吧，我想要相反，如何使单元格更短并在其前面添加图像？就像whatsapp-group-info-screen 一样。（见图）

![在此处输入图像描述](../Images/0edf45638970177f3cbb30f323661f07.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T10:03:09.690

如果标题是此图像将出现的唯一位置，请为此目的使用`tableHeaderView`属性。`UITableView`只需`UIView`使用您需要的布局创建一个并将其设置为 tableView 的 tableHeaderView。

顺便说一句，您将来可能希望过滤您在 stackoverflow 上的问题中发布的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:38:48.483

带有 的建议`tableHeaderView`是有效的。但是，如果您已经创建了一个看起来像图像中的视图，旁边有一个“单元格”（带有分组表视图的圆角），您还可以使用此视图进行子类化`UITableViewCell`，从而在表中的任何位置使用此模式。

# c - 低分辨率 Mandelbrot 分形不是......分辨率足够高？

> ID：14029538
> 
> 赞同：2
> 
> 时间：2012-12-25T09:50:27.863
> 
> 标签：c, fractals, mandelbrot

好的，这是一个我遇到问题的奇怪问题（用 gcc btw 编译）

下面是用于命令提示符的 Mandelbrot 分形生成器的源代码。我以前做过这个，我想自己进行速度测试，看看我能多快生成在命令提示符下实际生成 Mandelbrot 分形所需的代码。每隔一段时间，我都会这样做以测试自己的乐趣

无论如何，我遇到了一个新问题，我无法弄清楚问题是什么。当分形渲染时，无论我设置多少次迭代或什么 escapeValue，它总是会显示为椭圆形！它不应该那样做。

对于所有 mandelbrot/cpp 极客，你能帮我确定为什么我没有得到更多的“mandelbrot”形状吗？

```
#include <stdio.h>
#include <math.h>

#define DOSWidth 80
#define DOSHeight 25

int iterations = 1024;
float escapeValue = 3.0f;

struct ivar {
    ivar(float _x, float _i) {
        x = _x;
        i = _i;
    }
    void log() {printf("(%g%c%gi)", x, (i<0)?'-':'+', fabs(i));}
    float magnitude() {return sqrtf(x*x+i*i);}
    ivar square() {return ivar(x, i)*ivar(x, i);}

    ivar operator + (ivar v) {return ivar(x+v.x, i+v.i);};
    ivar operator - (ivar v) {return ivar(x-v.x, i-v.i);};
    ivar operator * (ivar v) {return ivar(x*v.x-(i*v.i), x*v.i+i*v.x);};

    float x, i;
};

struct rect {
    rect(float _x, float _y, float _width, float _height) {
        x = _x;y = _y;width = _width;height = _height;
    }

    void setCenter(float cx, float cy) {
        x = cx-width/2.0f;
        y = cy-width/2.0f;
    }

    void log() {printf("(%f, %f, %f, %f)", x, y, width, height);}

    float x, y;
    float width, height;
};

int main() {
    rect region = rect(0, 0, 2.5f, 2.0f);
    region.setCenter(0, 0);
    float xSize = region.width / (float)DOSWidth;
    float ySize = region.height / (float)DOSHeight;
    for(int y=0;y<DOSHeight;y++) {
        for(int x=0;x<DOSWidth;x++) {
            ivar pos = ivar(x*xSize+region.x, y*ySize+region.y);
            bool escapes = false;
            for(int i=0;i<iterations;i++) {
                if(pos.magnitude() > escapeValue) {
                    escapes = true;
                    break;
                }
                pos = pos.square();
            }
            if(escapes)printf(" ");
            else printf("X");
        }
    }
} 
```

Thanks if you got this far, appreciate your help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:04:36.417

You're just recursively squaring `pos` until its magnitude exceeds the limit. That won't produce a fractal; it will produce a unit circle.

You need to add the (x,y) coordinates to the squared value after every iteration. See [Wikipedia](http://en.wikipedia.org/wiki/Mandelbrot_set#Formal_definition).

**EDIT**: A couple small changes and [voila](https://ideone.com/mXJez7).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:01:28.033

Your escapedvalue is too low it should be 4.00f.

# c# - 货币文化格式不适用于 DataGridView 列

> ID：14029542
> 
> 赞同：2
> 
> 时间：2012-12-25T09:51:38.927
> 
> 标签：c#, datagridview, string-formatting, cultureinfo, culture

我有 2 个 DataGridViews (DGV)，并且在这两个中我都有要格式化的货币列。我正在编写的代码似乎可以在一个中工作，但不能在另一个中工作。

两个 DGV 都是这样设置的：首先将数据加载到 DataTable 中。然后一个 BindingSource 链接到这个 DataTable。最后，DGV 将这个 BindingSource 对象用于他们的数据。

我在表单的 Load 事件中使用以下代码来自定义两个 DGV 的货币列：

```
dataGridView.Columns[columnIndexHere].DefaultCellStyle.FormatProvider = CultureInfo.GetCultureInfo("de-DE");
dataGridView.Columns[columnIndexHere].DefaultCellStyle.Format = String.Format("c") 
```

似乎格式化了一个 DGV 中的列，而不是另一个。此外，它不工作的 DGV 在其父窗体中甚至没有那么多功能代码。我检查了代码和 DGV 的属性，看看我是否在其他地方更改格式，但我什么都没找到。。

两个 DGV 加载数据的方式之间唯一的细微差别是，对于第一个 DGV 的 DataTable（其中格式有效），数据是通过 SELECT 语句（通过我自己的函数）加载的......在第二个 DGV 的 DataTable 中（对于哪种格式不起作用），我不从 DB 加载任何数据，而是手动定义列（在 DataTable 中），因为在这种情况下，用户需要输入数据..

任何线索为什么格式化在第二个 DGV 上不起作用？

* * *

**编辑：**添加更多信息：

为了演示该问题，我创建了一个新的 C# winforms 项目，在其上仅添加了一个 DataGridView，并将以下代码添加到 Load 事件中。即使对于此代码，货币格式也未完成：

```
DataTable dataTable = new DataTable();
dataTable.Columns.Add("ColA");
dataTable.Columns.Add("ColB");
dataTable.Columns.Add("ColC");

dataTable.Rows.Add("John", 832.293, "London");
dataTable.Rows.Add("Alice", 32972978.20489, "Atlanta");
dataTable.Rows.Add("Mark", 9184793284739, "Tokyo");

BindingSource bindingSource = new BindingSource();
bindingSource.DataSource = dataTable;

dataGridView1.DataSource = bindingSource;

var format = (NumberFormatInfo)NumberFormatInfo.CurrentInfo.Clone();
format.CurrencySymbol = "Mn. ";
dataGridView1.Columns["ColB"].DefaultCellStyle.FormatProvider = CultureInfo.GetCultureInfo("de-DE");
dataGridView1.Columns["ColB"].DefaultCellStyle.Format = String.Format("c"); 
```

希望这有助于更多地诊断问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:45:31.163

您不需要`BindingSource`列出所有行，只需

`dataGridView1.DataSource = dataTable`,

并且由于您使用的是`DataTable`，请删除此部分

*dataGridView1.Columns["ColB"].DefaultCellStyle.Format = String.Format("c");*

并尝试使用该`CellFormatting`事件。

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
        {
            if (e.ColumnIndex == 1) //Column ColB
            {
                if (e.Value != null)
                {
                    e.CellStyle.Format = "c";
                }
            }
        } 
```

我希望它会有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-24T14:57:02.240

*（以前从问题中回答）*

在定义两列后添加了以下行，现在它可以工作了：

```
qBDFrmDTForDisplay.Columns["Combined Price"].DataType = Type.GetType("System.Decimal"); 
```

# actionscript-3 - 停止并继续执行 For 循环

> ID：14029543
> 
> 赞同：0
> 
> 时间：2012-12-25T09:51:53.290
> 
> 标签：actionscript-3, for-loop

我在循环时遇到问题。这是一款打鼹鼠的游戏。首先，有一个 for 循环负责为我的痣生成不同的孔位置。我想要它，以便循环将 (1) 生成一个数字 (2) 停止生成 (3) 基于刚刚生成的数字，为其运行一个函数。一旦完成了函数的运行，然后（4）开始第二轮生成另一个数字......并持续9轮。我有我的代码在这里。

```
var molePosX:Array = [166.90, 494.8, 810.7];
var molePosY:Array = [282.55, 512.45, 730.35];
var moleInUse:Boolean = false;

if (moleInUse == false){
for(var i:uint = 1; i<10; i++){
var randomHole:Number = Math.floor(Math.random()*10)+1; //Generate 10 number
trace(randomHole);
}
}

switch (randomHole){
case 1: trace("1");
moleRun(molePosX[0],molePosY[0]);
break;
case 2: trace("2");
moleRun(molePosX[1],molePosY[0]);
break;
case 3: trace("3");
moleRun(molePosX[2],molePosY[0]);
break;
case 4: trace("4");
moleRun(molePosX[0],molePosY[1]);
break;
case 5: trace("5");
moleRun(molePosX[1],molePosY[1]);
break;
case 6: trace("6");
moleRun(molePosX[2],molePosY[1]);
break;
case 7: trace("7");
moleRun(molePosX[0],molePosY[2]);
break;
case 8: trace("8");
moleRun(molePosX[1],molePosY[2]);
break;
case 9: trace("9");
moleRun(molePosX[2],molePosY[2]);
break;
case 10: trace("10");
break;
}

function moleRun(xPos:Number,yPos:Number){
    moleInUse = true;
    var mole2:Mole = new Mole();
    mole2.x = xPos;
    mole2.y = yPos;
    addChild(mole2);
    moleInUse = false;
} 
```

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T07:07:57.083

抱歉，这不是一个真正的答案，而只是删除那个长 switch 语句的建议。我将此添加为答案，因为注释并不能很好地格式化代码......

看起来你希望它是：

```
Where index/randomHole = xPos, yPos
1 = 0, 0
2 = 1, 0
3 = 2, 0
4 = 0, 1
5 = 1, 1
6 = 2, 1
7 = 0, 2
8 = 1, 2
9 = 2, 2 
```

您可以计算出来，而不是使用较长的 switch 语句：

```
x = (index - 1) % 3;
y = Math.floor((index - 1) / 3.0); 
```

或保留您的变量名称：

```
var xPosIndex:int = (randomHole - 1) % 3;
var yPosIndex:int = Math.floor((randomHole - 1) / 3);
moleRun(molePosX[xPosIndex],molePosY[yPosIndex]); 
```

硬编码的 3 是行长度，因为看起来每一行都有 3 个值（x 从 0 到 2）。index/randomHole 值为 10 将产生 x = 0, y = 3（开始另一个“行”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:08:32.507

您应该使用最后一个中断的迭代号开始循环。为 (1) 生成随机数编写一个单独的函数会很容易。喜欢：

```
 // this is a global or instance variable
 var iter:uint = 1;
 // funcation to generate the random number and updating the value of iteration
 function taskNumber1() {
    for(var i:uint = iter; i<10; i++) {
      var randomHole:Number = Math.floor(Math.random()*10)+1; //Generate 10 number
      iter = i;
      break;
   }
   return randomHole;
} 
```

试试看。

# salesforce - 按名称/类型获取计划作业列表

> ID：14029544
> 
> 赞同：1
> 
> 时间：2012-12-25T09:52:02.180
> 
> 标签：salesforce, apex-code

我同时编写了一批可调度的课程。我是这样安排的：

```
String cronExpression = String.format('0 {0} {1} * * ?', new List<String> { String.valueOf(minute), String.valueOf(hour) });
String jobName = 'roomSyncronizationJob' + Integer.valueOf(hour);
return System.schedule(jobName, cronExpression, batch); 
```

然后我有一个页面来显示调度表格和应该显示计划作业的表格。目前，它显示系统中的所有计划作业。

我的问题：**有没有办法让 jobName 能够过滤掉上面代码没有安排的工作？**除了将所有计划的作业 ID 存储在数据库中之外，有人知道任何其他解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:32:59.883

有一个标准对象“CronTrigger”。可能这个对象会帮助你获得名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-16T00:41:32.063

旧的，但我正在寻找这个。CronTrigger 包含字段 CronJobDetailId。CronJobDetail 具有“名称”字段

# python - 输入时间限制/倒计时

> ID：14029548
> 
> 赞同：4
> 
> 时间：2012-12-25T09:52:34.090
> 
> 标签：python, multithreading, input

我对 Python 很陌生，想为我的学生写一个（不是计算机）语言培训师。就像计时器在后台运行并且学生必须快速输入单词以减慢/恢复倒计时一样 - 否则倒计时达到零并显示一些“游戏结束”消息。（就像特工必须在计时器趋向零时拆除炸弹一样。）

当然，有很多关于线程的解释听起来像是正确的方法，但是到目前为止，我还没有发现任何将计时器与 (time-limited) 结合使用的东西`raw_input`。你们中的任何一个专业人士可以给我一个指向我忽略的教程/讨论的指针吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T10:23:38.670

```
import threading
import time
import os

def ask():
    """
    Simple function where you ask him his name, if he answers
    you print message and exit
    """
    name = raw_input("Tell me your name, you have 5 seconds: ")
    exit_message = "Wohoho you did it..Your name is %s" % name
    exit(exit_message)

def exit(msg):
    """
    Exit function, prints something and then exits using OS
    Please note you cannot use sys.exit when threading..
    You need to use os._exit instead
    """
    print(msg)
    os._exit(1)

def close_if_time_pass(seconds):
    """
    Threading function, after N seconds print something and exit program
    """
    time.sleep(seconds)
    exit("Time passed, I still don't know your name..")

def main():
    # define close_if_time_pass as a threading function, 5 as an argument
    t = threading.Thread(target=close_if_time_pass,args=(5,))
    # start threading
    t.start()
    # ask him his name
    ask()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:13:46.260

您不必通过线程来执行此操作，您可以在单个线程中以特定频率运行您的“逻辑”，并且每次迭代都通过时间增量方法重新计算倒计时。这就是制作了多少视频游戏。

假设您以 60hz 运行此伪代码方法：

```
delta = timenow-timelast;
countdown -= delta;
if(input)
    processInputHere; 
```

您应该能够将伪代码转换为 python 代码以使其工作

# c - 发送到函数的简单字符指针不起作用

> ID：14029549
> 
> 赞同：0
> 
> 时间：2012-12-25T09:52:35.940
> 
> 标签：c, string, pointers, char

**我正在尝试编写 3 个函数：** 第一个：“read_comp”初始化一个 char 指针并为其分配“readAndRemove”返回的函数。readAndRemove 从用户读取的行并删除字符串之前的所有空格，并返回指向字符串的指针，开头没有空格。然后“read_comp”打印“readAndRemove”得到的字符串——没有空格的字符串。

**最后一个函数 - 我有问题的那个......** 函数“findComplex”：我试图这个函数做的只是获取char指针并打印函数得到的字符串。

```
void read_comp(void)
{
    char *str = readAndRemove();
    printf("%s\n",str);
    findComplex(&str);
}

-------------

char * readAndRemove() /**function to read rest of input and remove first space**/
{
    char tempChar[30];
    fgets(tempChar,30,stdin);
    char* ptr = strtok(tempChar, " ");
    return ptr;
}

--------------
void findComplex(char* str)
{
    printf("in findComplex:%s\n",str);

} 
```

（对不起，如果开始无关紧要，但我认为我做所有事情的方式可能有问题......）

**所以我试图修复和改变一些事情：** 改变这个：define char *str; 作为全局参数并更改功能：

```
void read_comp(void)
{
    *str = readAndRemove();
    printf("%s\n",str);
    findComplex(str);
}

char * readAndRemove() /**function to read rest of input and remove first space**/
{
    char tempChar[30];
    fgets(tempChar,30,stdin);
    char* ptr = strtok(tempChar, " ");
    return ptr;
}

void findComplex(char* str)
{
    printf("%s\n",str);
    printf("in findComplex:%s\n",str);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:55:55.300

函数中的变量已经是一个`str`指针。`read_comp`您对地址运算符的使用`&`使其成为指向指针的指针（即 type `char **`）。只需确保在`findComplex`调用函数之前对其进行原型化，并且不要使用 address-of 运算符。

不过，您有一个更大的问题，那就是该`readAndRemove`函数返回一个指向局部变量的指针。请记住，局部变量存储在堆栈中，并且当函数返回时，该堆栈空间被回收以供其他函数调用重用。而是在函数中创建数组`read_comp`，并将其连同其大小一起传递给`readAndRemove`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:03:48.017

如果您在编译器中启用警告（我说的是“请执行此操作！”），您会收到一条警告说“返回指向局部变量的指针”或类似的内容：

```
char * readAndRemove() /**function to read rest of input and remove first space**/
{
    char tempChar[30];
    fgets(tempChar,30,stdin);
    char* ptr = strtok(tempChar, " ");
    return ptr;
} 
```

你不能返回指向局部变量的指针，因为当你从这个函数返回时，tempchar 使用的空间（ptr 将指向的空间）将被下一个函数重用——而且很可能下一个函数会写一些不同于你的东西串到这个内存中。

我建议的解决方案是将 tempchar 移至`read_comp()`[1]，并将字符串传递给`readAndRemove`.

[1] 请尝试确定您是使用“驼峰”还是“_”名称。您的函数应该是`read_and_remove`and`read_comp`或`readAndRemove`and `readComp`。我几乎写错了，因为我希望在两个函数中找到相同的样式 - 当您稍后尝试更改某些内容时，这种事情会让您发疯。

# java - TargetDataLine 和 Xuggler 用屏幕视频录制音频

> ID：14029555
> 
> 赞同：1
> 
> 时间：2012-12-25T09:53:24.017
> 
> 标签：java, audio, video, sequence, xuggler

`TargetDataLine`到目前为止，对我来说，这是在 Java 中捕获麦克风输入的最简单方法。我想用屏幕视频[在屏幕录像机软件中]对我捕获的音频进行编码，以便用户可以创建教程、幻灯片等。
我`Xuggler`用来编码视频。
他们**确实有一个**关于用视频编码音频的教程，但他们从文件中获取音频。就我而言，音频是实时的。

* * *

对我使用的视频进行编码`com.xuggle.mediaTool.IMediaWriter`。IMediaWriter 对象允许我添加一个视频流，并且
`encodeAudio(int streamIndex, short[] samples, long timeStamp, TimeUnit timeUnit)`
如果我可以从目标数据行获取样本作为`short[]`. 它返回`byte[]`

* * *

所以两个问题是：

## 如何使用视频对实时音频进行编码？

## 如何保持音频数据包的正确时序，以便在正确的时间对其进行编码？

**参考**：
1\. TargetDataLine 的DavaDoc：http: [//docs.oracle.com/javase/1.4.2/docs/api/javax/sound/sampled/TargetDataLine.html](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/sampled/TargetDataLine.html)
2\. Xuggler 文档：[http://build.xuggle。 com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/index.html](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/index.html)

* * *

* * *

## 更新

### 我用于捕获视频的代码

```
public void run(){
        final IRational FRAME_RATE = IRational.make(frameRate, 1);
        final IMediaWriter writer = ToolFactory.makeWriter(completeFileName);
        writer.addVideoStream(0, 0,FRAME_RATE, recordingArea.width, recordingArea.height);
        long startTime = System.nanoTime();

        while(keepCapturing==true){
            image = bot.createScreenCapture(recordingArea);
            PointerInfo pointerInfo = MouseInfo.getPointerInfo();
            Point globalPosition = pointerInfo.getLocation();

            int relativeX = globalPosition.x - recordingArea.x;
            int relativeY = globalPosition.y - recordingArea.y;

            BufferedImage bgr = convertToType(image,BufferedImage.TYPE_3BYTE_BGR);
            if(cursor!=null){
                bgr.getGraphics().drawImage(((ImageIcon)cursor).getImage(), relativeX,relativeY,null);
            }
            try{
                writer.encodeVideo(0,bgr,System.nanoTime()-startTime,TimeUnit.NANOSECONDS);
            }catch(Exception e){
                writer.close();
                JOptionPane.showMessageDialog(null, 
                        "Recording will stop abruptly because" +
                        "an error has occured", "Error",JOptionPane.ERROR_MESSAGE,null); 
            }

            try{
                sleep(sleepTime);
            }catch(InterruptedException e){
                e.printStackTrace();
            }
        }
        writer.close();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:40:58.860

我最近在这个问题下回答了大部分问题：[Xuggler encoding and muxing](https://stackoverflow.com/questions/13839850/xuggler-encoding-and-muxing)

代码示例：

```
writer.addVideoStream(videoStreamIndex, 0, videoCodec, width, height);
writer.addAudioStream(audioStreamIndex, 0, audioCodec, channelCount, sampleRate);

while (... have more data ...)
{
    BufferedImage videoFrame = ...;
    long videoFrameTime = ...; // this is the time to display this frame
    writer.encodeVideo(videoStreamIndex, videoFrame, videoFrameTime, DEFAULT_TIME_UNIT);

    short[] audioSamples = ...; // the size of this array should be number of samples * channelCount
    long audioSamplesTime = ...; // this is the time to play back this bit of audio
    writer.encodeAudio(audioStreamIndex, audioSamples, audioSamplesTime, DEFAULT_TIME_UNIT);
} 
```

对于 TargetDataLine，[getMicrosecondPosition()](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/sampled/DataLine.html#getMicrosecondPosition%28%29)将告诉您 audioSamplesTime 所需的时间。这似乎是从`TargetDataLine`打开时开始的。您需要弄清楚如何获取引用同一时钟的视频时间戳，这取决于视频设备和/或捕获视频的方式。只要它们都使用相同的时钟，绝对值就无关紧要。您可以从视频和音频时间中减去初始值（在流开始时），以便时间戳匹配，但这只是一个近似匹配（实际上可能足够接近）。

您需要按照严格递增的时间顺序调用`encodeVideo`；`encodeAudio`您可能需要缓冲一些音频和一些视频以确保您可以做到这一点。更多细节[在这里](https://stackoverflow.com/a/13934751/1828289)。

# ruby-on-rails - API 调用和逻辑应该放在模型还是控制器中？

> ID：14029564
> 
> 赞同：2
> 
> 时间：2012-12-25T09:54:50.853
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个 Rails 应用程序，我在其中使用了许多 API，例如 Google Adwords、Facebook Graph 等。

我应该在哪里调用这些 API？在模型中还是在控制器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:15:54.627

我会为这些类型的东西使用 lib 目录。这是一种干净且可重复使用的方式。

库/facebook_api.rb

```
class FacebookApi
  def initialize(opts={})
    @token = "..."
    @type = opts[:type] || "me"
  end

  def call
    @response = Httparty.get("#{@type} #{@token}") #example not real.
    @response
  end
end 
```

你可以像这样使用它

```
@facebook_api = FacebookApi.new(type: "friends")
@facebook_api.call 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:14:24.403

我的答案是**控制器**..

**我们从Controller**中的 API 获取结果，我们可以将其存储在**model**中。

首先，每个动作都将在控制器内完成。

**我们可以在production.rb**中声明 API 路径。并在应用程序内的任何地方使用它。如果需要更改 API 路径，只需在 production.rb 中更改即可。

# eclipse - 在 Eclipse 中更改热键类别

> ID：14029568
> 
> 赞同：0
> 
> 时间：2012-12-25T09:55:18.237
> 
> 标签：eclipse, keyboard-shortcuts

如何在 Eclipse 中更改热键类别？例如，我需要为“下一个书签”设置一个键，但此命令位于“C/C++ 源”类别下，并且我的热键在 Java 代码中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:14:32.620

您可以点击此链接：

[如何在 Eclipse 中管理键盘快捷键以及为什么要管理](http://eclipse.dzone.com/articles/how-manage-keyboard-shortcuts)

您可以转到“Window\Preferences\General\Keys”，并可以在 WHEN（意味着类别，例如 Debug、In Window、Java 等）处将热键取消绑定或绑定到命令。

对于自定义绑定，您可以点击此链接：

[为 Eclipse 命令定义键绑定 - 教程](http://www.vogella.com/articles/EclipseCommandsKeybindings/article.html)

# html - 溢出-y：滚动不适用于动态内容

> ID：14029571
> 
> 赞同：1
> 
> 时间：2012-12-25T09:55:39.827
> 
> 标签：html, css, internet-explorer, scrollbar

我正在尝试动态填充 div。（***这正在为 IE9 测试。***）我正在尝试使用 overflow-y: 滚动这个 div 并将最大高度固定为 300px。如果页面是静态的，则溢出-y：滚动有效。如果我的页面是动态的，则不会。我知道首先解析静态部分，然后 php 稍后填充数据。但是在这种情况下我怎样才能让滚动条工作呢？这是我的代码。

```
<html>
<head>
<style>
#menu_items
{
width:45%;
display:inline;
float:left;
max-height:300px;
overflow-y:scroll;
}
</style>
</head>
<body>
<div id = "menu_items">
<table border = "1">
<?php
//$q = $_GET["q"];
//include 'config.php';
//$sql=sprintf("SELECT * FROM db WHERE id = '%s'",$q);
//$result = mysql_query($sql);
$number = 35;
for($i=0;$i<$number;$i++)
{
echo "<tr>";
echo "<td>Name-id</td>";
echo "</tr>";
}
?>
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:56:26.173

尝试使用 css`height`属性代替`max-height`并检查结果的差异。

# directx - 使用和不使用索引缓冲区在 D3D11 中绘制多个图元

> ID：14029572
> 
> 赞同：0
> 
> 时间：2012-12-25T09:55:50.407
> 
> 标签：directx, directx-11

例如，如果我想在同一个场景中绘制一个三角形和一个正方形，那么正确的技术是什么？我知道使用索引缓冲区更快，但我想知道不将索引缓冲区用于教育目的的技术。

在您的答案中假设对 directx 有基本的了解。

# url-rewriting - 重写规则可以吗？

> ID：14029574
> 
> 赞同：0
> 
> 时间：2012-12-25T09:56:00.277
> 
> 标签：url-rewriting, rewrite

有谁知道如何重写类似的东西

```
/index.php?option=com_k2&view=item&id=30:name-of-item 
```

至

```
/index.php/name-of-item 
```

或者可能

```
/index.php/blog/name-of-item 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:10:48.407

您可以使用 RewriteCond 和 RewriteRule 的组合来做到这一点：

```
RewriteCond %{QUERY_STRING} ^.*:(.*)$
RewriteRule ^/index.php /index.php/%1 
```

其中 %1 是对 RewriteCond 表达式中捕获的组的反向引用。

资料来源：

*   [http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)
*   [http://wiki.apache.org/httpd/RewriteQueryString](http://wiki.apache.org/httpd/RewriteQueryString)

# postgresql - 使 PostgreSQL 为新表空间创建目录

> ID：14029575
> 
> 赞同：3
> 
> 时间：2012-12-25T09:56:04.553
> 
> 标签：postgresql, postgresql-9.2

我希望能够做类似的事情

```
CREATE TABLESPACE bob location 'C:\a\b\c\d\e\f\bob' 
```

无需事先创建所有目录树。这是因为我有 java 代码可以动态创建表空间，我希望能够在单独的机器上运行它（所以它不能 mkdir() 或任何东西）。

是否有任何类型的 postgres 配置可以让我让 postgres 自己创建适当的目录树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:44:51.130

您可以尝试使用[PL/sh](http://plsh.projects.pgfoundry.org/)或任何您喜欢的可用于 PostgreSQL 的 PL/* 语言`mkdir`直接在 postgres 存储过程中执行

# java - 如何在 Eclipse 插件中定位组件？

> ID：14029579
> 
> 赞同：0
> 
> 时间：2012-12-25T09:56:20.263
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-plugin

给定从 Eclipse 视图给我的默认容器，我希望定位 AWT 框架和 SWT 标签。我希望 SWT 标签位于顶部，而 AWT 框架位于其正下方。出于某种原因，我无法让 SWT 标签在框架所在的位置之外绘制。我希望它们是分开的，但 RowLayout 似乎没有将组件放入独立的行中。

SWT 标签不希望地放置在 AWT 框架内： ![在此处输入图像描述](../Images/2c59f23cb5dd690f7753fb2e24964cfe.png)

插件视图中的代码：

```
public void createPartControl(Composite parent) {

    container = new Composite(parent, SWT.EMBEDDED | SWT.NO_BACKGROUND);
    RowLayout rowLayout = new RowLayout();
    //I have tried toggling many of the RowLayout properties but this has no effect on placing the label outside of the AWT Frame.
    container.setLayout(rowLayout);

    Label topLabel = new Label(container, SWT.NONE);
    topLabel.setText("MY NEW LABEL");

    frame = org.eclipse.swt.awt.SWT_AWT.new_Frame(container);
    frame.setFocusable(true);
    frame.setFocusableWindowState(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:53:04.570

`RowLayout` *从不*将组件放在单独的行中，而是将它们放在*一行*中。您可以使用`SWT.VERTICAL`样式创建它，以便行从上到下而不是从左到右。但是，屏幕截图仍然不正确。将框架作为其自身复合材料的唯一孩子可能会有所帮助：

```
container = new Composite(parent, SWT.NONE);
RowLayout rowLayout = new RowLayout(SWT.VERTICAL);
container.setLayout(rowLayout);

Label topLabel = new Label(container, SWT.NONE);
topLabel.setText("MY NEW LABEL");

Composite frameContainer = new Composite(container, SWT.EMBEDDED | SWT.NO_BACKGROUND);
frame = org.eclipse.swt.awt.SWT_AWT.new_Frame(frameContainer);
frame.setFocusable(true);
frame.setFocusableWindowState(true); 
```

# c# - 我的 ASP .NET MVC 网站上的 URL 重写

> ID：14029583
> 
> 赞同：0
> 
> 时间：2012-12-25T09:56:58.873
> 
> 标签：c#, asp.net, asp.net-mvc-3, routevalues

我正在使用图像查看器，所以我有一个名为的控制器`Viewer`，当我传递它时，`routeValues`它会像这样在 URL 中传递： [http ://www.mywebsite.com/Viewer?category=1&image=2](http://www.mywebsite.com/Viewer?category=1&image=2)

这是用于访问此页面的链接：

```
@Url.Action("Index", new { category = p.Category, image = p.Image }) 
```

但我确实喜欢这个网址： [http ://www.mywebsite.com/Viewer/1/2](http://www.mywebsite.com/Viewer/1/2)

我试图在类的`RegisterRoutes`方法中做一些技巧，`RouteConfig`但我无法得到以前的结果。

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "Viewer",
            url: "{controller}/{action}/{category}-{image}",
            defaults: new { controller = "Viewer", action = "Index", category = 1, image = 1 }
        );
    }
} 
```

有谁知道我在哪里可以做到这一点？

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:23:53.587

您需要将更具体的路由放在默认路由之前，因为路由的评估顺序与您声明它们的顺序相同：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Viewer",
            url: "{controller}/{action}/{category}/{image}",
            defaults: new { controller = "Viewer", action = "Index", category = 1, image = 1 }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

# wcf - 如何在客户端发布的任务关闭后构建运行/处理请求的 Wcf 服务？

> ID：14029588
> 
> 赞同：0
> 
> 时间：2012-12-25T09:57:14.857
> 
> 标签：wcf, iis-7

我正在尝试构建一个托管在 IIS 7.0 上的基于 WCF 的 Web 服务。WCF 服务托管在 IIS 上，旨在接受来自多个 WCF 客户端（控制台应用程序）的请求。每个 WCF 客户端都会向托管在 WCF 上的服务提供/发布任务。发布任务后客户端终止或关闭。

一段时间后，客户端将查询 WCF 服务以获取其发布的任务的状态，服务将返回状态为已完成或已终止等...对于查询请求。

我是 WCF 和 web 服务范式的新手。有人可以帮助我了解可以帮助我实现这一目标的 WCF 概念吗？样品表示赞赏。

谢谢，--普拉萨德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:57:40.773

如果我对您的理解正确，那么您正在寻找在客户端关闭连接后继续运行的 WCF 服务，然后稍后再与同一服务建立新连接。

从服务的角度来看，新连接是一个新的、不同的客户端——因此您正在与多个客户端共享相同的服务。

`InstanceContextMode.Single`您可以通过服务行为来实现这一点：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
public class EvalService : IEvalService { ... 
```

请参阅[WCF 服务实例的生命周期？](https://stackoverflow.com/questions/8911322/the-lifetime-of-an-instance-of-a-wcf-service).

# java - 使用批处理查找java PID

> ID：14029591
> 
> 赞同：2
> 
> 时间：2012-12-25T09:58:17.497
> 
> 标签：java, windows, batch-file, pid

我需要从 Windows 批处理控制台知道 java 进程 PID。

```
@echo off
set p=%CD%
FOR /F "tokens=1" %%A IN ('"%JAVA_HOME%/bin/jps.exe -v"\|find  "%p%"') DO SET str=%%A
echo str = "%str%" 
```

Java 进程唯一标识符是它执行的路径。脚本执行jps，返回所有java进程信息，例如

```
9376 Jps -Denv.class.path=D:\tools\timesten\lib\ttjdbc6.jar; -Dapplication.home=C:\Program Files\Java\jdk1.6.0_24 -Xms8m
3856  -Dexe4j.semaphoreName=c:_program files (x86)_jetbrains_intellij idea community edition 12.0.1_bin_idea.exe -Dexe4j.moduleName=C:\Program Files (x86)\JetBrains\IntelliJ IDEA Community Edition 12....etc 
```

批次说：| 在这个时候是出乎意料的。

你能说一下，如何正确提取PID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:22:49.143

您必须像这样`^|`在`FOR`语句中转义管道，否则它会尝试将`FOR`语句的前半部分通过管道传输到第二部分。

这也是我找到PID的方式。

`for /f "tokens=2" %%a in ('tasklist ^| find "jps.exe") do set javapid=%%a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:06:40.857

您可以使用命令“tasklist”来显示 PID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T14:16:59.857

正确的脚本

```
 "%JAVA_HOME%/bin/jps.exe" -v>temp.txt
   for /f "tokens=1" %%f in ('find "%CD%" "temp.txt"') do set str=%%f
   echo str=%str% 
```

# asp.net - 当我在图像按钮上按住鼠标时，如何在鼠标旁边显示一个与图像相关的小文本按钮？

> ID：14029592
> 
> 赞同：1
> 
> 时间：2012-12-25T09:58:22.030
> 
> 标签：asp.net

我有一个图像按钮，当我在图像按钮上按住鼠标时，想在鼠标旁边显示一个小文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:14:02.187

使用 ToolTip 属性在悬停时显示文本....

你的意思是显示 imagebtn 工具提示？如果您只需要显示工具提示，请在 aspx 页面中尝试这个

```
 <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/css.PNG" ToolTip="my testing" /> 
```

或在cs页面中

```
ImageButton1.Attributes.Add("title", "mytesting"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:59:47.703

如果我们没有误以为**按住**，`Hover`那么`ToolTip`将是最好的选择。

但是如果你的意思是你想在鼠标按钮按下时有文本，你应该处理`mousedown`和`mouseup`事件

```
$('elementSelector').mousedown(function(){
    //...code to show text besides the element..
})

$('elementSelector').mouseup(function(){
    //...code to hide text besides the element..
}) 
```

# github - 将我的项目推送到 github

> ID：14029595
> 
> 赞同：0
> 
> 时间：2012-12-25T09:58:35.390
> 
> 标签：github, push

我按照以下步骤操作：[https ://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

现在，我想在我的 github 帐户中创建一个文件夹，名为：“TODO_LIST”，并将我的项目推送到该文件夹​​中。

我该做什么？我位于要添加的文件夹中。

我是否需要执行以下操作？

```
$ git init
$ git add .
$ git commit -m 'first import'
$ git remote add origin git@github.com:alonshmiel/TODO_LIST.git
$ git push origin master 
```

ps，我的帐户中有两个 SSH 密钥，因为我从两台计算机推送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:07:48.843

这在[Create a Repo](https://help.github.com/articles/create-a-repo)帮助页面中有说明：

> 每次使用 Git 提交时，它都会存储在存储库（又名“repo”）中。要将您的项目放在 GitHub 上，您需要有一个 GitHub 存储库供其使用。
> 
> [...]
> 
> 单击新建存储库。
> 
> 填写此页面上的信息。完成后，单击“创建存储库”。
> 
> [...]
> 
> ```
> git init
> # Sets up the necessary Git files
> 
> git add README
> # Stages your README file, adding it to the list of files to be committed
> git commit -m 'first commit'
> # Commits your files, adding the message "first commit" 
> ```
> 
> [...]
> 
> ```
> git remote add origin https://github.com/username/Hello-World.git
> # Creates a remote named "origin" pointing at your GitHub repo
> git push origin master
> # Sends your commits in the "master" branch to GitHub 
> ```

# c# - 委托 System.Action 不接受 1 个参数

> ID：14029596
> 
> 赞同：5
> 
> 时间：2012-12-25T09:58:35.950
> 
> 标签：c#, lambda, action

那个行动 ：

```
readonly Action _execute;

public RelayCommand(Action execute)
             : this(execute, null)
{
}

public RelayCommand(Action execute, Func<Boolean> canExecute)
{
    if (execute == null)
        throw new ArgumentNullException("execute");
    _execute = execute;
    _canExecute = canExecute;
} 
```

其他类的代码：

```
public void CreateCommand()
{
    RelayCommand command = new RelayCommand((param)=> RemoveReferenceExcecute(param));}
}

private void RemoveReferenceExcecute(object param)
{
    ReferenceViewModel referenceViewModel = (ReferenceViewModel) param;
    ReferenceCollection.Remove(referenceViewModel);
} 
```

为什么会出现以下异常，我该如何解决？

> *委托“System.Action”不接受 1 个参数*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T09:59:16.717

`System.Action`是无参数函数的委托。使用`System.Action<T>`.

要解决此问题，请将您的`RelayAction`课程替换为以下内容

```
class RelayAction<T> {
    readonly Action<T> _execute;
    public RelayCommand(Action<T> execute, Func<Boolean> canExecute){
        //your code here
    }
    // the rest of the class definition
} 
```

注意`RelayAction`类应该成为通用的。另一种方法是直接指定`_execute`将接收的参数的类型，但这样您将在使用`RelayAction`类时受到限制。因此，在灵活性和鲁棒性之间存在一些折衷。

一些 MSDN 链接：

1.  [`System.Action`](http://msdn.microsoft.com/en-en/library/system.action.aspx)
2.  [`System.Action<T>`](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-10T10:41:36.800

您可以在没有任何参数的情况下定义命令“RemoveReferenceExcecute”

```
RelayCommand command = new RelayCommand(RemoveReferenceExcecute);} 
```

或者您可以将一些参数/对象传递给它：

```
RelayCommand<object> command = new RelayCommand<object>((param)=> RemoveReferenceExcecute(param));} 
```

在第二种情况下，不要忘记从您的视图中传递 CommandParameter；

# iphone - 什么是非公共 API？

> ID：14029597
> 
> 赞同：20
> 
> 时间：2012-12-25T09:58:40.873
> 
> 标签：iphone, ios, ipad

在 App Store Review Guidelines 中，它说非公开应用程序将被拒绝。这是什么意思？

private`APIs`和 Non public 和有什么不一样`APIs`？

我正在使用`API`我的客户在我的应用程序中获取我的数据`UIWebview`，这属于非 public`API`吗？

帮我。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-25T10:04:05.557

非公共 API 是指未记录并提供给程序员的 Apple API 方法。

Apple 不保证这部分 API 将在未来的升级中正常工作。他们可以自由地改变这部分。

他们禁止使用，这样您的应用程序就不会在 iOS 更新中中断，从而保护您的应用程序的未来用户/购买者！

网络服务是外部的，因此不属于非公开的。这部分你需要保证，不是苹果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-25T10:01:17.797

没有区别。它们都表示任何未记录的 iOS API。

外部 API 不算数，因为它们与 iOS 本身无关，因此只要您不在 Objective-C 代码中使用未记录的调用，您就很安全。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T10:07:36.823

在 iOS 的发展过程中，Apple 通常从拥有一个私有 API 开始，直到它被完善和记录到足以让开发人员使用它。

iOS 上的方法和类比您拥有的标头或文档要多得多。例如，有一个类将 NSAttributedString 转换为 HTML，名为 NSHTMLWriter。这没有记录也没有公开，但由 UITextView 在内部使用。

私有 API 的其他示例包括直接访问蜂窝网络信息、低级硬件访问或与确切的电池负载百分比一样良性的内容（公共 API 仅返回 5% 的增量）

不公开 API 允许 Apple 进一步完善它，甚至可能更改名称，这会破坏依赖先前命名的软件。苹果可以做到这一点，因为他们控制着所有的系统软件。要更改已发布 API 中的某些内容，他们必须与弃用共舞。

App Store Review 团队有一个扫描器应用程序，它可以查看您提交的应用程序并标记对未记录的方法和类的所有调用。有一些方法可以规避那些使用混淆方法选择器的方法，但通常您希望与 Apple 相处融洽，因为如果您违反规则，他们不喜欢它。

有一些非常罕见的例子，其中私有 API 被追溯公开。即 iOS 5 中已经存在的一种方法，Apple 允许我们使用它，即使没有文档，只有技术说明。

总结：仅使用您在 Apple 官方文档中找到的类和方法。

PS：有一些方法可以通过官方渠道从 UIWebViews 获取数据。此处更详细的技术答案完全取决于您要做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T10:06:34.583

Objective C 允许以不同的方式使用内部（私有）方法。苹果要求的是不要使用他们的框架中的方法，这些方法不是设计用于“客户端”代码的。因此，当您访问私有方法时，属性并不好。

# c# - C# 运行时编译无法以默认值运行方法 -- 参数计数不匹配

> ID：14029599
> 
> 赞同：0
> 
> 时间：2012-12-25T09:58:52.933
> 
> 标签：c#, reflection

嗨，我已经完成了运行时编译。.net 4 的目标提供商

```
var options = new Dictionary<string, string>();
options.Add("CompilerVersion", "v4.0");
var codeProvider = new CSharpCodeProvider(options); 
```

但是当尝试调用具有默认值参数的方法时，不提供这些参数我得到参数不匹配异常的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:10:57.623

[如此处](http://msdn.microsoft.com/library/system.type.missing.aspx)示例中所述，您可以`Type.Missing`作为默认参数的值传递。唯一的限制 - 是参数的顺序。

# sh - 递归压缩目录中的每个文件，其中文件名中有空格

> ID：14029600
> 
> 赞同：1
> 
> 时间：2012-12-25T09:58:53.310
> 
> 标签：sh

我很困惑；我需要压缩一个文件夹的内容，其中有多个文件（扩展名 .dat）。我去了shell脚本。

到目前为止，我告诉自己这并不难：我只需要递归读取目录的内容，获取文件名并使用文件本身的名称压缩它。

这是我写的：

```
for i in *.dat; do zip $i".zip" $i; done 
```

现在，当我尝试它时，我得到了一个奇怪的行为：每个文件都被称为“12/23/2012 data102 test1.dat”；当我运行这一系列命令时；我看到该 zip 而不是识别整个文件名，而是将字符串的每个部分视为单个实体，从而导致整个操作失败。

我告诉自己我做错了什么，而 i 变量是错误的；所以我替换了 echo，而不是 zip 命令（查看哪个是 i 变量的输出）；$i 输出是文件的全名，而不是文件的一部分。

在这一点上，我完全不知道发生了什么......如果变量 i 是通过 zip 读取的，它会读取字符串的每一个片段，而不是整个字符串，而如果我使用 echo 来查看该变量的内容它得到正确的输出。

我是否必须以不同的方式将文件名的值传递给 zip？由于它是作为参数传递的变量的内容，我假设字符串是 1 还是其中有空格都没有关系，并且我在手册页中找不到答案（如果那里有）。

任何人都知道我为什么会出现这种行为以及如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:12:52.557

您需要引用任何带有空格的内容。

```
zip "$i.zip" "$i" 
```

一般来说，任何变量插值都应该有双引号，除非您特别要求 shell 将其拆分为多个标记。内部字段分隔符`$IFS`默认为空格和制表符，但您可以更改它以使外壳在任意分隔符上进行分词。有关 shell 引用机制的详细说明，请参阅任何体面的初学者 shell 教程。

# c# - 带有windows8应用程序的sqlite中的导航属性

> ID：14029606
> 
> 赞同：1
> 
> 时间：2012-12-25T09:59:26.717
> 
> 标签：c#, sqlite, windows-8

这是我第一次在 Windows 8 应用程序中使用 SQLite 数据库，我有两个类如下：

```
class Parent
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Child> Children { get; set; }
}

class Child
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Parent Par { get; set; }
} 
```

有没有办法在这两个类中创建一对多关系，当我查询出一个 Parent 实例时，我可以通过 par.Children 属性获取 Child 的列表？另一个问题，如何让 Id 属性自动递增为标识值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:22:47.717

我现在面临同样的问题，我开始尝试这个“Devart LinqConnect for Metro” [http://www.devart.com/linqconnect/metro-database-access-with-linqconnect.html](http://www.devart.com/linqconnect/metro-database-access-with-linqconnect.html) [http://blogs.devart。 com/dotconnect/linqconnect-for-metro-quick-start-guide.html](http://blogs.devart.com/dotconnect/linqconnect-for-metro-quick-start-guide.html)

希望对你有帮助

# iphone - 为 iPhone 检测日历约会冲突的 SQL 语句

> ID：14029609
> 
> 赞同：1
> 
> 时间：2012-12-25T09:59:47.597
> 
> 标签：iphone, mysql, ios, sql, plsql

我尝试为 iPhone 创建一个应用程序，您可以在其中设置约会。一切都保存到 MySQL 数据库中，我目前通过 JSON 将数据获取到我的应用程序中。这是一个工作流程：

*   User1 定义他工作的时间。例如上午 8 点至下午 4 点。
*   用户 2 想与用户 1 约会，例如上午 8 点到上午 9 点。

该脚本应该能够做到这一点：

*   约会在用户的工作时间内；和
*   它不会与现有任命发生冲突，这可能以三种可能的方式发生：
    *   冲突预约在新预约期间开始；和/或
    *   冲突预约在新预约期间结束；或者
    *   冲突约会在新约会之前开始，在新约会之后结束。

这些是*重要的表格*：

```
// new row should be added here when the conditions above are met
create table ios_appointment (
   appointmentid int not null auto_increment,
   start timestamp,
   end timestamp,
   user_id_fk int
)

// a working hour has a n:1 relationshipt to ios_worker
create table ios_workinghours (
   workinghoursid int not null auto_increment,
   start timestamp,
   end timestamp,
   worker_id_fk int
)

// employee, has a 1:n relationship to ios_workinghours
create table ios_worker (
   workerid int not null auto_increment,
   prename varchar(255),
   lastname varchar(255),
   ...
) 
```

select 子句的输入是两个时间戳，`start`和`end`。这些由用户定义。因此脚本应该检查用户 2 是否在该特定时间工作以及是否已经有约会。

我目前有这样的东西，但它使用 user_id 来链接表：

```
SELECT EXISTS (
  SELECT *
  FROM   ios_appointments a JOIN ios_workhours h USING (user_id)
  WHERE  user_id = 1
     AND h.start <= '08:00:00' AND h.end >= '09:00:00'
     AND (
               a.start BETWEEN '08:00:00'  AND  '09:00:00'
           OR  a.end   BETWEEN '08:00:00'  AND  '09:00:00'
           OR (a.start < '08:00:00' AND a.end > '09:00:00')
         )
  LIMIT  1
) 
```

感谢您的每一次帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:51:46.347

您要么需要让您的应用程序读取数据并确定时间是否可用，要么您需要创建一个具有可用“时间段”（例如每 30 分钟）的视图。

这是我的做法：

```
CREATE TABLE #timeslot
(
timeslot_id INT PRIMARY KEY IDENTITY(1,1),
timeslot_time DATETIME NOT NULL
)

DECLARE @startime DATETIME, @endtime DATETIME
SELECT @starttime = '12/25/2012 08:00:00.000', @endtime = '12/25/2012 15:00:00.000'

WHILE @starttime < @endtime BEGIN
   INSERT INTO #timeslot (timeslot_time)
    VALUES (@starttime)
    SET @starttime = DATEADD(mm,30,@starttime)
END

SELECT
   w.workerid,
   ts.timeslot_time
INTO
   ios_workertimeslot
FROM
   #timeslot ts
FULL OUTER JOIN
   ios_worker w
   ON  (1 = 1)

SELECT
   wts.workerid,
   wts.timeslot_time,
   ap.appointmentid,
   CASE WHEN ap.appointmentid IS NOT NULL THEN 0 ELSE 1 END AS AvailableSlot
FROM
   ios_workertimeslot wts
JOIN
   ios_workinghours wh
   ON  (wts.workerid = wh.workerid)
   AND (wts.timeslot_time >= wh.start)
   AND (wts.timeslot_time < wh.end)
LEFT JOIN
   ios_appointment ap
   ON  (wts.workerid = ap.workerid)
   AND (wts.timeslot_time >= ap.start)
   AND (wts.timeslot_time < ap.end) 
```

这将为您留下一个指示可用和不可用时间段的数据集。

希望这可以帮助！

# javascript - 旋转 DIV 在第二次点击时缓慢旋转

> ID：14029610
> 
> 赞同：4
> 
> 时间：2012-12-25T09:59:53.250
> 
> 标签：javascript, jquery, html, css

我想我忽略了一些东西。这是一个非常简单的旋转瓶游戏。

Javascript/jQuery

```
$('.bottle').on('click', function(e) {
    this.removeAttribute('style');
    var deg = 3000 + Math.round(Math.random() * 500);
    var css = '-webkit-transform: rotate(' + deg + 'deg);';

    this.setAttribute(
        'style', css
    );
}); 
```

CSS：

```
.bottle {
    width: 200px;
    height: 200px;
    background-image: url(img/bottle.png);
    -webkit-transition: -webkit-transform 6s ease-out;
} 
```

HTML：

```
<div class="bottle"></div> 
```

这在瓶子的第一次点击时完美运行。但是从第二次点击开始，旋转非常非常慢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T10:18:15.973

试试这个：http: [//jsfiddle.net/sMcAN/](http://jsfiddle.net/sMcAN/)

```
var i = 1;
$('.bottle').on('click', function(e) {
this.removeAttribute('style');
var deg = 3000 + Math.round(Math.random() * 500);
deg = ((-1) ^ i) * deg;

var css = '-webkit-transform: rotate(' + deg + 'deg);';
this.setAttribute('style', css);
i++;
});​ 
```

另一个更新：http: [//jsfiddle.net/sMcAN/2/](http://jsfiddle.net/sMcAN/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T10:18:03.457

这是因为起初，您从 0 变为超过 3000 的值。但是，该值始终在 3000 以内 - 所以差异不够大，仍然需要您定义的 6 秒。

一种解决方案是确保您抵消该值并使其每次相差几千。

```
var i = 0, offset = [2000, 4000, 6000, 3000, 5000, 1000];

$('.bottle').on('click', function(e) {
  this.removeAttribute('style');

  var deg = offset[i] + Math.round(Math.random() * 500);
  i++;
  if (i > 5) {
    i = 0;
  }

  var css = '-webkit-transform: rotate(' + deg + 'deg);';

  this.setAttribute(
    'style', css
 );
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:05:52.337

```
math.round(math.random() * 1000); 
```

试试看

# javascript - 在 json javascript 中排序合并逻辑

> ID：14029612
> 
> 赞同：1
> 
> 时间：2012-12-25T10:00:27.683
> 
> 标签：javascript, json

```
json1 = {
    "t": {
        "o": [{
            "name": "tor",
            "pair": 1
        }],
        "i": [{
            "name": "tiset",
            "pair": 1
        }]
    }
}
json2 = {
    "t": {
        "a": [{
            "name": "tapch",
            "pair": 1
        }],
        "i": [{
            "name": "tiset",
            "pair": 9
        }]
    }
} 
```

我们有两个类似上面的响应。现在我必须合并`json1`成`json2`一个`json3`像下面这样的：

```
json3 = {
    "t": {
        "a": [{
            "name": "tapch",
            "pair": 1
        }],
        "o": [{
            "name": "tor",
            "pair": 1
        }],
        "i": [{
            "name": "tiset",
            "pair": 9
        }]
    }
} 
```

也就是说，如果名称相同，则将取出最大对。我尝试了很多但没有得到解决方案。谁能帮帮我？我需要它作为一个循环，而不是一个特定的硬编码解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:13:41.157

应该相当容易。

只需获取第一个 JSON 对象

```
var json3 = json1; 
```

[编辑：]如果你真的想保留 json1 的替代方法

```
var json3 = {'t':{}};
for (key in json1['t']) {
    json3['t'][key] = json1['t'][key];
} 
```

将第二个对象合并到其中

```
for (key in json2['t']) {
    json3['t'][key] = json2['t'][key];
} 
```

你完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:53:11.277

你去了，它可能需要对存在的处理值进行一些调整，如果第一个是原始值，第二个是对象（我会让它被对象覆盖），因为你的问题中没有明确说明

原始值仅由您传递的函数处理，但您应该通过阅读代码来理解它，

这应该接近你所需要的。

它将所有传递的对象合并为一个对象，（最后一个参数是函数处理相同的原始属性）如果传递了一个函数，它将不会遍历最后一个，如果没有，所有参数将被视为要合并的对象，您可以并且应该稍微调整一下，因为我现在不太关心代码的清洁度。

也许这可以帮助您进入正确的方向

```
function merge() {
    var srt = typeof arguments[arguments.length - 1] == "function" ? arguments[arguments.length - 1] : function (a, b, prop) {
            return a[prop] > b[prop] ? a[prop] : b[prop];
        };
    var merge = {};

    for (var i = 0; i < arguments.length - (typeof arguments[arguments.length - 1] == "function" ?1:0); i++)
    inner(arguments[i], merge);

    function inner(obj, mrg) {
        var type = ({}).toString.call(obj);
        if (type == "[object Object]") {
            if (!mrg || typeof mrg != "object" ) mrg = {}; //Well it depends if you want primitive values to be overwritten by an Object or not
            for (var prop in obj)
            if (!mrg[prop] && typeof obj[prop] == "object") mrg[prop] = inner(obj[prop]);
            else if (mrg[prop] && typeof obj[prop] == "object") mrg[prop] = inner(obj[prop], mrg[prop]);
            else if (mrg[prop]) mrg[prop] = srt(mrg, obj, prop);
            else mrg[prop] = obj[prop];

        } else if (type == "[object Array]") {
            if (!mrg) mrg = [];
            for (var i = 0; i < obj.length; i++)
            if (!mrg[i] && typeof obj[i] == "object") mrg[i] = inner(obj[i]);
            else if (mrg[i] && typeof obj[i] == "object") mrg[i] = inner(obj[i], mrg[i]);
            else if (mrg[i]) mrg[i] = srt(mrg, obj, i);
            else mrg[i] = obj[i];
        } else {
            // Handle calling of the inner function with a primitive value
        }
        return mrg;
    }
    return merge;
}

var json1 = {
    "t": {
        "o": [{
            "name": "tor",
            "pair": 1
        }],
        "i": [{
            "name": "tiset",
            "pair": 1
        }]
    }
};
var json2 = {
    "t": {
        "a": [{
            "name": "tapch",
            "pair": 1
        }],
        "i": [{
            "name": "tiset",
            "pair": 9
        }]
    }
};

var json3 = merge(json1, json2, {
    a: "test"
}, function (a, b, prop) {
    if (prop == "pair") return a[prop] > b[prop] ? a[prop] : b[prop]; //If the propertie is pair, return the bigger one
    else return b[prop]; //return the to merge Object
});
console.log(json3);
/*{"a": "test", "t": {"a": [{"name": "tapch", "pair": 1}], "i": [{"name": "tiset", "pair": 9}], "o": [{"name": "tor", "pair": 1}]}}*/ 
```

这是一个关于[JSBin的例子](http://jsbin.com/ifuzum/1/edit)

## 评论

要仅合并某些属性，您可以添加一个作为属性映射的参数，然后在存在映射时迭代映射属性并仅复制它们。如果没有，请从对象中复制所有属性以进行合并。

所以从代码上看，这可能看起来像这样：

```
function merge() {
    var srt = typeof arguments[arguments.length - 1] == "function" ? arguments[arguments.length - 1] : function (a, b, prop) {
            return a[prop] > b[prop] ? a[prop] : b[prop];
        };
    var merge = {};
    var map = arguments[arguments.length - 2]._MAP ? arguments[arguments.length - 2] : false;
    delete map._MAP
    for (var i = 0; i < arguments.length - (typeof arguments[arguments.length - 1] == "function" ? 1 : 0) - (map ? 1 : 0); i++) {
        inner(arguments[i], merge, map);
    }

    function inner(obj, mrg, map) {
        var type = ({}).toString.call(obj);
        if (type == "[object Object]") {
            if (!mrg || typeof mrg != "object") mrg = {}; //Well it depends if you want primitive values to be overwritten by an Object or not
            for (var prop in map || obj) {
                if (!mrg[prop] && typeof obj[prop] == "object") mrg[prop] = inner(obj[prop], undefined, map[prop]);
                else if (mrg[prop] && typeof obj[prop] == "object") mrg[prop] = inner(obj[prop], mrg[prop], map[prop]);
                else if (mrg[prop]) mrg[prop] = srt(mrg, obj, prop);
                else if (!obj[prop]) return
                else mrg[prop] = obj[prop];
            }

        } else if (type == "[object Array]") {
            if (!mrg) mrg = [];
            for (var i = 0; i < (map || obj).length; i++)
            if (!mrg[i] && typeof obj[i] == "object") mrg[i] = inner(obj[i], undefined, map[i]);
            else if (mrg[i] && typeof obj[i] == "object") mrg[i] = inner(obj[i], mrg[i], map[i]);
            else if (mrg[i]) mrg[i] = srt(mrg, obj, i);
            else mrg[i] = obj[i];
        } else {
            // Handle calling of the inner function with a primitive value
        }
        return mrg;
    }
    return merge;
}

var json1 = {
    "t": {
        "o": [{
            "name": "tor",
            "pair": 1
        }],
        "i": [{
            "name": "tiset",
            "pair": 1
        }]
    }
};
var json2 = {
    "t": {
        "a": [{
            "name": "tapch",
            "pair": 1
        }, {
            a: "a"
        }],
        "i": [{
            "name": "tiset",
            "pair": 9
        }]
    }
};

var json3 = merge(json1, json2, {
    _MAP: true,
    "t": {
        a: [{
            name: true
        },
        false],
        i: false
    }
}, function (a, b, prop) {
    if (prop == "pair") return a[prop] > b[prop] ? a[prop] : b[prop]; //If the propertie is pair, return the bigger one
    else return b[prop]; //return the to merge Object
});
var json4 = merge(json1, json2, {
    _MAP: true,
    "t": {
        a: [false],
        i: false
    }
}, function (a, b, prop) {
    if (prop == "pair") return a[prop] > b[prop] ? a[prop] : b[prop]; //If the propertie is pair, return the bigger one
    else return b[prop]; //return the to merge Object
});
console.log(json3, json4);

/*{"t": {"a": [{"name": "tapch"}, {"a": "a"}], "i": [{"name": "tiset", "pair": 9}]}}*/
/*{"t": {"a": [{"name": "tapch", "pair": 1}], "i": [{"name": "tiset", "pair": 9}]}}*/ 
```

正如你看到的

*   `json3`已创建，传递了应复制以下内容的地图：
    *   目的`t`
        *   大批`a`
            *   元素`0`_`a`
            *   `name`元素属性`0`
            *   整个元素`1`
        *   整个阵列`i`
*   `json4`已创建，传递了应复制以下内容的地图：
    *   目的`t`
        *   大批`a`
        *   整个`0`元素`a`
        *   整个阵列`i`

如您所见，尚未复制其他属性

这是另一个[JSBin](http://jsbin.com/ugugix/1/edit)，只需看一下并摆弄一下（并阅读代码）

# jakarta-ee - 有没有办法在运行时重新加载 Tomcat 的连接池？

> ID：14029613
> 
> 赞同：6
> 
> 时间：2012-12-25T10:00:33.963
> 
> 标签：jakarta-ee, tomcat, connection-pooling, bonecp

我的情况如下：

*   我必须维护一个服务器，以 Tomcat(6) 作为 Web 服务器，上面有一堆 Web 应用程序。这些 webapps 由其他人维护。我们的服务器连接到另一个部门的数据库服务器，其中包含我们的 webapps 需要显示的信息。如果没有适当的池化策略，我们的服务器很快就变成了灾难。

*   现在我向大家介绍了 Pooling（我选择了 BoneCP - 0.7），我们将创建一个单一的池，它保留在 Tomcat 的全局 JNDI 上下文中，并让每个人都能从中获得连接。这应该可以解决问题，我猜。

我担心的是：我怎样才能完全控制这个 Pooling ？我有一些要求：

*   我想在运行时手动或以编程方式重新加载 DataSource 配置（将在需要时尝试连接到备份服务器）

*   更改可不时更改的连接数（最小、最大、空闲连接）

*   最好让Tomcat保持活力

*   我打算建立一个使用 JMX 连接和检索信息的警报系统，并有一个重新加载池的按钮（我知道所有的池策略都有某种恢复，但是另一个数据库服务器会定期崩溃，所以手动重新启动连接有点可取）。

我想到了一些可能的解决方案：

*   告诉 Tomcat 重新启动其全局 JNDI 上下文
*   告诉 Tomcat 重新启动它的 DataSource 对象
*   告诉 BoneCP 重新启动其池，并在必要时重新创建连接
*   重新启动 Tomcat 本身

我的问题是：

1.  我可以在不影响 Tomcat（和其他 webapps）的情况下安全地执行上述解决方案吗？
2.  我应该费心这样做吗？（我猜只是重新启动Tomcat）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:08:30.467

（为什么有人选择 BoneCP？我听说过的每个问题都涉及到 BoneCP . 只是还没到。）

Tomcat 支持 Apache commons-dbcp 和 Tomcat 自己的内置 tomcat-pool：只需按照 Tomcat 文档配置 JNDI 连接池即可。

不幸的是，Tomcat 目前不支持在运行时重新加载数据源。您可以通过 JMX 更改属性，但更改无效。您也可以关闭游泳池，但您最终会得到一个封闭的游泳池，然后一文不值。

[在Tomcat 的 bugzilla](https://issues.apache.org/bugzilla/enter_bug.cgi?product=Tomcat%207)中记录增强可能是一件好事。

# c++ - main() 首先在这里定义

> ID：14029614
> 
> 赞同：1
> 
> 时间：2012-12-25T10:00:57.657
> 
> 标签：c++, linux, eclipse

我正在尝试在 Eclipse 中编译我的项目。

但是，它说`main()`定义了不止一次。我`grep`找到了我的项目目录，它`main()`在 main.cpp 中只找到了 , 的一个定义。

显然它在其他地方。也许是我链接到的目录。

我链接到的唯一目录是：

```
-ljson_linux-gcc-4.5.2_libmt 
```

编译器输出为：

```
make all 
Building file: ../src/main.cpp
Invoking: GCC C++ Compiler
g++ -Ijson_linux-gcc-4.5.2_libmt -I/usr/include/mysql -I/usr/include/jsoncpp-src-0.5.0/include -O0 -g3 -Wall -c -fmessage-length=0 -Ijson_linux-gcc-4.5.2_libmt -MMD -MP -MF"src/main.d" -MT"src/main.d" -o"src/main.o" "../src/main.cpp"
Finished building: ../src/main.cpp

Building target: Atms
Invoking: GCC C++ Linker
g++ -L-L/usr/include/jsoncpp-src-0.5.0/include/ -o"Atms"  ./src/atmstypes.o ./src/base64.o ./src/hregex.o ./src/libparser.o ./src/log.o ./src/main.o ./src/serv.o ./src/sqlfeeder.o ./src/teleindex.o ./src/telepipe.o ./src/telesharedobject.o ./src/treet.o ./src/ttable.o   -l-ljson_linux-gcc-4.5.2_libmt
./src/serv.o: In function `main':
/usr/include/c++/4.4/new:101: multiple definition of `main'
./src/main.o:/home/idan/workspaceCpp/Atms/Debug/../src/main.cpp:12: first defined here
/usr/bin/ld: cannot find -l-ljson_linux-gcc-4.5.2_libmt
collect2: ld returned 1 exit status
make: *** [Atms] Error 1 
```

主.cpp：

```
#include <stdio.h>
#include <stdlib.h>
#include <regex.h>
#include <iostream>
#include <string.h>
#include <string>
#include "../h/hregex.h"
using namespace std;

string s = "this and7 that";
int main(int argc,char** argv){
    cout << hregex::InitRegex() << endl;
    cout <<  hregex::CheckHostnameField(s)<< "= this and7 that" << endl;
    s = "this and7 that";
    cout <<  hregex::CheckURLField(s)<< "= this and7 that" << endl;
    s = "/lol/idan.html";
    cout <<  hregex::CheckURLField(s)<< "= /lol/idan.html" << endl;
    s = "/lol2#/idan.html";
    cout <<  hregex::CheckURLField(s)<< "= /lol2#/idan.html" << endl;
    return 0;
} 
```

如何防止错误出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:17:15.303

g++ 说 serv.o 有一个 main 函数。

如果实际上没有 main() 它 serv.cpp，请检查包含，也许你做错了 #include 并包含了 .cpp 而不是 .h ？

额外说明：它尝试绑定库“-ljson_linux-gcc-4.5.2_libmt”

所以链接命令行中有“-l-ljson_linux-gcc-4.5.2_libmt”。删除配置中的 -l

# linux - 如果存在，RELP 是否存在于 RSYSLOG 协议之外？

> ID：14029622
> 
> 赞同：0
> 
> 时间：2012-12-25T10:01:54.503
> 
> 标签：linux, logging, tcp, rsyslog

如果存在，RELP 是否存在于 RSYSLOG 协议之外？我想知道 relp 协议是否有更多内容，然后是已写入 rsyslog 的协议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-07T16:13:33.577

RELP 协议由 rsyslog 的作者 Rainer Gerhards 设计。我知道的唯一实现是[librelp](http://www.librelp.com/)，它由 rsyslog 使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T15:57:56.180

除了 Philippe 的回答：[Logstash](http://logstash.net)还有一个[RELP input](http://logstash.net/docs/1.2.2/inputs/relp)。你可以在这里找到实现（对于版本 1.2.2）：

[https://github.com/logstash/logstash/blob/v1.2.2/lib/logstash/util/relp.rb](https://github.com/logstash/logstash/blob/v1.2.2/lib/logstash/util/relp.rb)

# css - div内的CSS定位图像

> ID：14029624
> 
> 赞同：0
> 
> 时间：2012-12-25T10:02:45.323
> 
> 标签：css

我如何在 div 内定位 n 个内联图像，即使 div 太小以使所有图像都适合其中，我希望那些不适合的图像位于 div 边距下方并消失。例如，我有：

```
<div id="container">
<img1>
<img2>
<img3>
<img4>
<img5>
.... n -images
</div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:03:58.627

```
#container {
    width: 600px;
    height: 200px;
    overflow-x: hidden;
} 
```

这将隐藏任何超出容器元素的内容。请注意，某些浏览器仍然允许用户在隐藏部分中滚动，尽管这不应该在桌面浏览器上发生。

# c++ - 在 C++ 中获取特定的窗口名称

> ID：14029626
> 
> 赞同：5
> 
> 时间：2012-12-25T10:03:06.600
> 
> 标签：c++, windows

我使用此代码来获取窗口名称：

```
#include <Windows.h>
#include <stdio.h>

int main() {
    TCHAR title[500];
    int i=0;
    while(i<10) {
        GetWindowText(GetForegroundWindow(), title, 500);
        printf("%s\n",title);
        i++;
        system("pause");
    }
} 
```

但是，它只获得前景窗口。

1.  我需要获取所有窗口名称

2.  或者，实际上，我需要获取一个属于“notepad.exe”进程的特定窗口名称。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T10:34:32.920

我不认为使用原始 winapi 真的有更简单的方法，但这里是：

1.  使用 Toolhelp32 API 获取可执行名称与“notepad.exe”匹配的进程 ID 列表。
2.  枚举窗口以查找任何其 PID 与列表中的一个匹配的窗口。
3.  抓住那个窗口的标题，然后用它做你想做的事。

这是我想出的代码：

```
#include <iostream>
#include <string>
#include <vector>

#include <windows.h>
#include <tlhelp32.h>

bool isNotepad(const PROCESSENTRY32W &entry) {
    return std::wstring(entry.szExeFile) == L"notepad.exe";
}

BOOL CALLBACK enumWindowsProc(HWND hwnd, LPARAM lParam) {
    const auto &pids = *reinterpret_cast<std::vector<DWORD>*>(lParam);

    DWORD winId;
    GetWindowThreadProcessId(hwnd, &winId);

    for (DWORD pid : pids) {
        if (winId == pid) {
            std::wstring title(GetWindowTextLength(hwnd) + 1, L'\0');
            GetWindowTextW(hwnd, &title[0], title.size()); //note: C++11 only

            std::cout << "Found window:\n";
            std::cout << "Process ID: " << pid << '\n';
            std::wcout << "Title: " << title << "\n\n";
        }
    }

    return TRUE;
}

int main() {
    std::vector<DWORD> pids;

    HANDLE snap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
    // Do use a proper RAII type for this so it's robust against exceptions and code changes.
    auto cleanupSnap = [snap] { CloseHandle(snap); };

    PROCESSENTRY32W entry;
    entry.dwSize = sizeof entry;

    if (!Process32FirstW(snap, &entry)) {
        cleanupSnap();
        return 0;
    }

    do {
        if (isNotepad(entry)) {
            pids.emplace_back(entry.th32ProcessID);
        }
    } while (Process32NextW(snap, &entry));
    cleanupSnap();

    EnumWindows(enumWindowsProc, reinterpret_cast<LPARAM>(&pids));
} 
```

依次经过：

首先注意函数和字符串的广泛版本。`TCHAR`不好用，如果其中一个标题恰好包含 UTF-16，那将是一种耻辱。

`isNotepad`只需检查结构的可执行名称成员，`PROCESSENTRY32W`看它是否等于“notepad.exe”。这假设记事本使用此进程名称，并且不是记事本的任何内容都使用该进程名称。为了消除误报，你必须做更多的检查，但你永远不能太确定。

在`enumWindowsProc`中，请注意它`lParam`实际上是一个指向 PID 向量的指针（以免我们不得不使用全局变量）。这构成了函数开头的强制转换。接下来，我们得到我们找到的窗口的PID。然后，我们遍历传入的 PID 列表并检查它是否匹配。如果是这样，我选择抓取标题并输出 PID 和窗口标题。请注意，使用标准字符串作为缓冲区只能保证在 C++11 中工作，并且不能覆盖额外的空字符（不是长度的一部分）。最后，我们返回`TRUE`以便它继续枚举，直到它通过每个顶级窗口。

Onto `main`，您首先看到的是我们最初为空的 PID 列表。我们对流程进行快照并通过它们。我们使用 helper 函数`isNotepad`来检查进程是否为“notepad.exe”，如果是，则存储其 PID。最后，我们调用`EnumWindows`枚举窗口，并传入 PID 列表，伪装成所需的`LPARAM`.

如果你没有做过这种事情，这有点棘手，但我希望它是有道理的。如果你想要子窗口，正确的做法是在我输出有关找到的窗口的信息的地方添加一个`EnumChildWindowsProc`并调用它。`EnumChildWindows`如果我是正确的，您不需要递归调用`EnumChildWindows`来获取孙子等，因为它们将包含在第一个调用中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T11:36:18.317

打电话[`EnumWindows`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633497.aspx)。您提供一个回调函数，该函数为每个顶级窗口调用一次。然后，您可以使用您的特定标准检查每个窗口的属性。您可以调用`GetWindowText`，然后根据您要查找的值进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:43:51.003

## 如何获取记事本窗口的标题。

你问，

> “我需要获取一个属于“notepad.exe”进程的特定窗口名称”

好吧，C++ 是该任务的错误语言。这是一项通过脚本更自然、更简单的任务。例如，这是一个报告所有记事本窗口标题的 Windows 批处理文件：

```
@echo off
for /f "usebackq delims=, tokens=1,9" %%t in (`tasklist /v /fo csv`) do (
    if %%t=="notepad.exe" echo %%u
    ) 
```

示例使用：

```
[d:\dev\misc\so\notepad_window_name]
>*标题*
“无标题 - 记事本”

[d:\dev\misc\so\notepad_window_name]
> _

```

* * *

## 如何编写现代 Unicode C++ Windows 程序。

此外，除了语言选择之外，请考虑您的 C++ 代码通过其使用`TCHAR`类型来宣传，它可以编译为 Unicode 和 ANSI——但由于使用`printf`. 这意味着过于愚蠢的`TCHAR`做法会误导您引入错误。简单地不要使用这些`T`东西，比如`TCHAR`：它只是一种混淆代码和引入错误的方法。

下面的代码举例说明了如何创建一个纯 Unicode 程序。

与批处理文件相比，这仅检索一个记事本窗口的标题：

```
#include <iostream>     // std::wcout, std::endl
#include <stdlib.h>     // EXIT_FAILURE, EXIT_SUCCESS
#include <string>       // std::wstring
using namespace std;

#define UNICODE
#include <windows.h>

int main()
{
    HWND const window = FindWindow( L"Notepad", nullptr );
    if( window == 0 )
    {
        wcerr << "!Didn't find any Notepad window." << endl;
    }
    else
    {
        int const   nAttempts   = 3;
        for( int i = 1;  i <= nAttempts;  ++i )
        {
            int const   bufferSize  = 1 + GetWindowTextLength( window );
            wstring     title( bufferSize, L'\0' );
            int const   nChars  = GetWindowText( window, &title[0], bufferSize );

            if( nChars == 0 || nChars < GetWindowTextLength( window ) )
            {
                Sleep( 20 );  continue;
            }
            title.resize( nChars );
            wcout << "'" << title << "'" << endl;
            return EXIT_SUCCESS;
        }
        wcerr << "!Found a Notepad window but unable to obtain the title." << endl;
    }
    return EXIT_FAILURE;
} 
```

因此，C++ 是错误的语言选择，`TCHAR`也是完全错误的数据类型选择。

* * *

## 当其他要求强制选择语言时如何使用 C++。

如果出于某种原因您*确实*需要 C++ 形式的代码，并且*确实*需要所有记事本窗口标题，那么批处理文件将无法使用，而上述 C++ 代码也无法使用。[在这种情况下，请按照 David Hefferman](https://stackoverflow.com/a/14030271/464581)的建议使用 Windows `EnumWindows`API 函数。并且为了避免混淆、细微的错误和误导阅读代码的其他人，请使用基于字符串，而不是，如上面的代码所示。`wchar_t``TCHAR`

# asp.net - IIS - 无法通过 ip 地址而不是 localhost 访问页面

> ID：14029629
> 
> 赞同：41
> 
> 时间：2012-12-25T10:03:34.230
> 
> 标签：asp.net, iis, ip, localhost, clickonce

我正在尝试发布`ClickOnce`应用程序并在本地进行测试。我想提供安装链接，所以我需要使用 IP 地址更新位置，否则我将无法安装它（因为`localhost`被翻译成计算机名称并且无法访问）。问题是，`IIS`我只能通过`localhost`在地址中使用来访问我的页面。

```
http://localhost:9995/publish/Publish.htm <-- working 
http://192.168.1.104:9995/publish/Publish.htm <-- not working (my IP address)
http://my_pc_name:9995/publish/Publish.htm <-- not working
http://127.0.0.1:9995/publish/Publish.htm <-- even that is not working 
```

我正在使用`Windows 7`and `Visual Studio 2012`with `IIS Express 8.0`，但我尝试了同样的方法，`Visual Studio 2010`但`ASP.NET server`仍然失败。我关闭了防火墙。

你有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-05-14T21:45:59.137

所以我在 WSUS 上遇到了同样的问题，结果发现 IIS 8.5 没有绑定到我的 ipv4 ip 地址，而是绑定到了 ipv6 地址。当我通过 localhost:8580 访问它时，它会将其转换为 ipv6 localhost 地址，因此可以工作。通过 ip 访问它是不行的。我必须使用 netsh 手动绑定地址，然后它立即工作。该死的烦人。

脚步：

1.  以管理员身份打开命令提示符
2.  键入以下内容：

`netsh http add iplisten ipaddress (IPADDRESSOFYOURSERVER)`

就是这样。你应该得到：

`IP address successfully added`

我在这里找到了命令 [https://serverfault.com/questions/123796/get-iis-7-5-to-listen-on-ipv6](https://serverfault.com/questions/123796/get-iis-7-5-to-listen-on-ipv6)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-22T07:39:28.317

也许它也对某人有帮助:)

> 我不允许发布图片，所以这里有额外的链接到我的博客。对不起。

[使用 IP 地址的 IIS 网页](http://www.note.id.lv/2015/09/iis-access-page-by-ip-address.html)

在 IIS 管理中：选择**站点**，然后选择**绑定**。

添加

*   类型：http
*   主机名：空
*   端口：80
*   IP地址：从下拉菜单中选择您需要的IP（通常只有一个IP）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-12-25T10:26:30.750

IIS 是一个多网站服务器。该站点的不同之处在于主机标头名称。因此，您需要在您的网站上进行设置。

以下是您需要遵循的步骤：

[如何配置多个 IIS 网站以使用主机头访问？](https://techontip.wordpress.com/2011/06/06/how-to-configure-multiple-iis-websites-to-access-using-host-headers/)

通常，打开您的网站属性，找到 IP 地址，在其附近有高级的“此网站的多个身份”。在那里，您需要用以太币将所有收入添加到该站点并带有星号：“*”，以太币放置您喜欢使用的名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-23T13:52:36.130

检查浏览器代理的设置。对我来说，它有帮助，交通被引导到外面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-12T13:32:15.380

在我的情况下，这是因为我使用了默认端口 80 以外的端口。我能够使用 localhost 在本地访问该站点，但不能使用 IP 地址在另一台机器上访问该站点。

为了解决这个问题，我必须添加防火墙入站规则以允许该端口。 [![在此处输入图像描述](../Images/79bef52e675e9d43b0f0bd180bacd125.png)](https://i.stack.imgur.com/BCVsj.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-04T02:27:33.940

尝试禁用 Windows 防火墙，它对我有用，但就我而言，我能够通过 127.0.0.1 访问 IIS

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-09T20:41:48.707

我试图在特定端口号上访问我的网页并尝试了很多东西，但我发现该端口已被防火墙过滤。只需添加一条绕过规则，一切就完成了。

也许可以帮助某人！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-08T17:14:32.487

在 IIS 管理器中，我将绑定添加到指定 IP 地址的站点。以前，我所有的绑定都是主机名。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-05-04T04:34:36.677

请按照以下步骤操作 -

1.  在 IIS 中右键单击“默认网站”
2.  单击上下文菜单中的编辑建筑物
3.  选择和编辑
4.  给你的机器IP而不是IP地址中的“*”

# windows-phone-8 - windows phone 8 弹出窗口的宽度和高度

> ID：14029639
> 
> 赞同：3
> 
> 时间：2012-12-25T10:05:22.283
> 
> 标签：windows-phone-8

我在弹出控件中放置了一个网格。我希望网格会根据 windows phone 8 应用程序的 3 种不同布局大小（**480 × 800、768 × 1280、720 × 1280**）自动调整大小。

但似乎我必须**明确**设置网格的**宽度和高度**，因为它会根据子控件大小重新调整自身大小，而我希望弹出框在所有三种分辨率的屏幕顶部都显示为完整.

 **有什么帮助吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-25T22:51:53.897

让全屏弹出窗口在 WP8 上工作的最简单方法是将子宽度和高度设置为手机当前的逻辑分辨率。您可以在此处阅读有关[WP8 多分辨率 zen 的](https://stackoverflow.com/questions/13470605/wp8-emulator-screen-size/13473129#13473129)更多信息，并在此处了解有关[WP8 多分辨率 API 的](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8#Multi_resolution)更多信息。

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    var myPopup = new Popup()
    {
        Child = new Border()
        {
            Child = new TextBlock()
                    {
                        Text = "Hello World!"
                    },
            Height =  Application.Current.Host.Content.ActualHeight,
            Width =  Application.Current.Host.Content.ActualWidth,
            Background = new SolidColorBrush(Colors.Green)
        }
    };

    this.LayoutRoot.Children.Add(myPopup);
    myPopup.IsOpen = true; 
} 
```

这段代码有点过分了，因为 shell 项（例如 SystemTray、AplicaitonBar 等）会占用渲染区域的空间。

这是上面在 WXGA 模拟器中执行的代码片段的打印屏幕：

![WXGA 上的全屏弹出窗口](../Images/9ba6897eae6941e2cfbb33ffff940763.png)

这是上面在 720P 模拟器中执行的代码片段： ![720P 全屏弹出](../Images/4cc7662931b5d0159b9dfdfd132a113b.png)**

# c - 调用指向函数的指针

> ID：14029640
> 
> 赞同：1
> 
> 时间：2012-12-25T10:05:48.640
> 
> 标签：c

我正在尝试`hfun`使用指向结构内保存的函数的指针来调用函数。

这些是类型定义：

```
typedef struct Table* TableP;
typedef struct Object* ObjectP;
typedef int(*HashFcn)(const void *key, size_t tableSize);
typedef struct Object {
    void *key;
    ObjectLink *top;
} Object;

typedef struct Table{
    ObjectLink *linkedObjects;
    size_t size, originalSize;
    HashFcn hfun;
    PrintFcn pfun;
    ComparisonFcn fcomp;
} Table; 
```

在这里，我试图拨打电话，但收到一个错误，我试图访问内存不足的地方：

```
Boolean InsertObject(TableP table, ObjectP object)
{

    int i = (*table->hfun)(object->key, table->size);
    if (table->linkedObjects[i].key == NULL)
    {
        table->linkedObjects[i].key = object;
    } else
    {
        table->linkedObjects[i].next->key = object;
    }

    return TRUE;
} 
```

使用 Eclipse 调试器，我可以看出在调用时变量的值是：

`object->key`类型`void*`值`0x804c018`
`table->size` 类型`size_t`值`1`

我想这不是调用函数指针的方法。这里有什么问题？

编辑：

在调试中我还可以看到： `*table->hfun`type `int(const void *,size_t)` `table->hfun`type `HashFcn`value`0x11`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T10:07:30.947

你没有以正确的方式称呼它。

您可以像访问任何其他函数一样访问函数指针。

```
table->hfun(object->key, table->size) 
```

[编辑] 对，确保你也`hfun`正确分配：

```
int myFunc(const void* key, size_t tableSize) { }

table->hfun = &myFunc; 
```

# java - 客户端渲染 JSON 与 GPB（协议缓冲区）

> ID：14029641
> 
> 赞同：0
> 
> 时间：2012-12-25T10:05:49.940
> 
> 标签：java, json, perl, protocol-buffers

我已经阅读了很多关于协议缓冲区 (GPB) 和 JSON 的优缺点的文章。
我有一项服务将以这两种格式之一提供输出。
那么如果使用服务的客户端主要是将数据渲染到前端（主要是浏览器），那么两者哪个最好用呢？

其他需要考虑的因素是：

*   可维护性
*   需要不断改变
*   学习曲线
*   可扩展性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:24:25.797

“主要是浏览器”就足以得出结论：json.

Protobuf 非常方便，被设计为高性能（处理成本更低，输出更小）和版本容错性很强，**但**浏览器更擅长处理 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:17:59.100

*   可维护性

    什么的？你的协议？你的申请？这与您选择的序列化程序无关。

    序列化器本身？JSON 不需要任何维护。JSON 及其库是稳定的。不知道GPB。

*   需要不断改变

    与您选择的序列化无关，但与您选择的协议无关。

*   学习曲线

    JSON: `my $json = encode_json($data);`，另一边类似。完毕。

    GPB：不知道。看起来有点多，因为您需要定义数据格式。

*   可扩展性

    与您选择的序列化无关，而与您选择的协议和数据结构有关。

# ios - 顶点着色器内变量的日志值

> ID：14029645
> 
> 赞同：5
> 
> 时间：2012-12-25T10:06:21.087
> 
> 标签：ios, opengl-es, opengl-es-2.0, shader

我是 OpenGL ES 编程的新手，我正在尝试调试我的着色器编程，我想知道是否有任何方法可以记录特定变量的值。比如下面的vertex shader程序中，我想测试一下normal返回的值，基本上就是在找类似NSLog的东西……

```
attribute vec4 position;
attribute vec3 normal;
attribute vec2 texture;
varying vec2 v_texCoord;
varying float LightIntensity;

uniform mat4 modelViewProjectionMatrix;
uniform mat3 normalMatrix;

void main()
{
    vec3 eyeNormal = normalize(normalMatrix * normal);
    vec3 lightPosition = vec3(-1.0, 0.0, 3.0);

    float nDotVP = max(0.0, dot(eyeNormal, normalize(lightPosition)));
    LightIntensity = nDotVP;

    v_texCoord = texture;

    gl_Position = modelViewProjectionMatrix * position;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:34:27.933

在回答之前，我将引用我的来源：Imagination Technologies 的开发技术工程师，该公司负责 iOS 设备上的 PowerVR GPU。

基本上，GLSL ES 着色器还不能正确调试，并且没有与 NSLog 或 printf 等效的东西。如果你真的想进入你的 GPU 代码，你需要使用 OpenCL，它很难理解和实现，特别是在 iOS 设备上。调试着色器的常用方法通常出现在片段着色器中，其中已知不正确的值通常以它们突出的方式着色（例如亮红色）。顶点着色器更难调试，但至少它发生在片段着色器之前，并且主要取决于您的属性和制服。

您应该已经知道您在非 GPU 主程序中`normal`的值。`normalMatrix`一个应该是 3 维向量数组，另一个应该是 3x3 矩阵。您可以将它们相乘、标准化，然后在 Objective-C 程序的任何方法内的循环中将结果打印到 NSLog。这将为您提供由着色器计算并存储在`eyeNormal`. 事实上，我没有看到无法在 CPU 上计算的顶点着色器代码的任何部分 - 真正给您带来麻烦的是片段着色器！

# php - InnoDB - 表列值取决于主键值

> ID：14029646
> 
> 赞同：3
> 
> 时间：2012-12-25T10:06:22.743
> 
> 标签：php, mysql

我有一个 InooDB 表：

*   id - 主键，自动递增
*   short_code - varchar(6)，唯一
*   其他一些列

总是在`short_code`php 中基于`id`. 问题是在插入记录之前我无法生成`short_code`，因为我不知道`id`.

我尝试了以下方法：

1.  插入一条带有空 short_code 的记录
2.  `mysqli_insert_id`使用或 pdo获取插入行的 id
3.  根据 id 生成短代码，并使用新的 short_code 更新记录

这行得通，但这真的很慢。我必须进行插入和更新，这很耗时。

一个更好的主意是“猜测”我要插入的记录将具有 `select max(id)+1 from mytable;`（或类似的东西）的 id，生成 short_code，然后插入记录。在这里，我有一个 SELECT 和一个 INSERT，实际上要好得多。

我的问题是：

1.  这个问题有更聪明的解决方案吗？
2.  如果不是，我使用解决方案 2（猜测下一个 id），我如何确保在我执行`select max(id)+1 from mytable;`、生成短代码和插入记录时，没有人会插入另一条记录，所以`max(id)=1`不会更改与此同时？

**笔记！**

*   我无法在 mysql 过程中生成短代码。
*   必须根据 id 生成短代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:08:22.447

使用可以**在**插入时生成代码的数据库触发器。

示例（不知道您生成的规则是什么`short_code`）：

```
delimiter $$
create trigger code_gen after insert on your_table
for each row
begin
   SET NEW.short_code = NEW.id + 1;
end
$$
delimiter ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T10:26:21.323

插入发生时会生成 Auto-inc 值，使用锁定技术（以避免生成两个相同的值）取决于配置并且您无法猜测它。在事务环境中，许多事务可能需要一个新的 id，但它们可能提交也可能不提交，因此在查询时，该值被保留，但仍未使用。

如果要“猜测”正确的值，则必须锁定整个表以进行写入，以避免另一个线程插入记录并打破您的猜测。如果您在表上没有大量写入，例如每秒几十次插入，这将起作用。

如果此表有很多更新并且不能选择写锁，您可以使用另一个表来生成值（它将只有 id 字段），而不是插入/更新，您将使用插入/插入，假设这两个操作将尽可能快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T10:17:36.280

结帐下面提到的 URL（thinkswan 的答案）
[获取表格行数的最有效方法](https://stackoverflow.com/questions/933565/get-auto-increment-value-with-mysql-query)
这样您可以获得自动增量值。在您的情况下，您可以获得 id，因为 id 是自动递增的。这样，您的第一个问题将得到解决。
然后你所要做的就是使用 id 来生成 short_code 并插入一条记录。

# android - 如何在 Manifest 中以编程方式添加数据 android:scheme

> ID：14029651
> 
> 赞同：2
> 
> 时间：2012-12-25T10:06:47.657
> 
> 标签：android, dropbox-api

我开发了一个支持 Dropbox 的应用程序。

有没有办法以`<data android:scheme="db-INSERT-APP-KEY-HERE" />`编程方式添加到我的应用清单中？

我希望最终用户可以`APP-KEY`从我的应用程序中更改。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:14:17.227

如果您想向用户提供一些数据并希望用户稍后更改此数据。您可以使用本地数据库来执行此操作。例如，创建将保存键而不是让用户更新该行的表。

[编辑 1]

Dropbox api 需要 key 其中一个是**APP_KEY**另一个是**SECRET**，当您为客户开发应用程序时，您必须知道**app_key**，您的客户必须将其提供给您。

但你的客户不必把他的秘密告诉你，

```
final static private String APP_KEY = "INSERT_APP_KEY_HERE";
final static private String APP_SECRET = "INSERT_SECRET_HERE"; 
```

INSERT_SECRET_HERE 你可以检查一个本地数据库的这个值，如果有本地数据库有表。您应该要求您的客户提供其 secret_key 并将此秘密保存到数据库。

final static private String APP_SECRET = 使用本地数据库中的值设置它

# jquery - 带有 Sijax 的 JQuery 验证插件

> ID：14029652
> 
> 赞同：1
> 
> 时间：2012-12-25T10:06:53.763
> 
> 标签：jquery, python, jquery-validate, sijax

我正在尝试使用带有 Sijax 的 JQuery Validation 插件检查用户名是否有效。这意味着我使用 Sijax（Ajax，Python）在服务器上验证用户是否已经存在。我将此方法添加到验证插件中：

```
$.validator.addMethod("availableName", function(value, element) {
        var check = true;
        var username = $("#username").val();
        Sijax.request('checkuser', [username]); 
        if (usercheck) {
            check = false;
            usercheck = false;
        } 
        return check },
        "That username is no longer available"); 
```

服务器上的 checkuser 方法检查用户名的可用性并更改 usercheck 变量的值。我检查了萤火虫和方法usercheck（它调用另一个javascript方法来更改usercheck）确实发送了正确的响应，但它可能会跳过其他行？

我现在遇到的问题是**用户名字段的验证仅在我聚焦并模糊它两次时发生。**其他所有领域都工作得很好。这意味着例如，如果用户名“Jon”已经存在，就会发生这种情况：

*   我进入 Jon 并模糊了场地 -> 没有任何反应
*   重新聚焦并模糊该字段->“此用户名已存在”

即使我在重新聚焦后更改了不存在的用户名（例如更改为 Jon1234），它仍然显示“此用户名已经存在”。所以我认为这意味着该领域落后了一步，但我不知道为什么。

提前致谢！

# salesforce - 错误：未知函数 getHello。检查拼写

> ID：14029653
> 
> 赞同：0
> 
> 时间：2012-12-25T10:06:54.473
> 
> 标签：salesforce, apex-code, visualforce

我正在编写一个visualforce页面代码：

```
<apex:page controller="AuthSubController" showHeader="false">
<head><title>Hello World</title>
<meta name="google-site-verification" content="XCzApP9fdbR3auxPHd3-X0g7uCNbrXZDQU_jm5GHXLI" />
</head>
     <apex:outputPanel rendered="{!$CurrentPage.parameters.token != null}"> 

The one time use token is :<b>{!$CurrentPage.parameters.token}</b>
            <br />
Record to update is {!$CurrentPage.parameters.id}
<br />
URL to update is {! getHello($CurrentPage.parameters.url)}

     </apex:outputPanel>

</apex:page> 
```

和顶点控制器段是

```
public class AuthSubController {
    public string getHello(String x) {
        return x.substring(3);
    }
} 
```

我`getHello`在我的 Controller 类中定义。有人可以告诉我为什么会收到此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T02:38:02.923

改变：

`URL to update is {! getHello($CurrentPage.parameters.url)}`

到：

`URL to update is { !Hello($CurrentPage.parameters.url) }`

会没事的。

# c++ - 无法在 z/OS 1.12 C++ 编译器错误中加载 CCNEP？

> ID：14029654
> 
> 赞同：0
> 
> 时间：2012-12-25T10:06:58.483
> 
> 标签：c++, mainframe

我刚开始使用大型机几天。我尝试按照本网站[http://www.ibmpressbooks.com/articles/article.asp?p=1160471&seqNum=4](http://www.ibmpressbooks.com/articles/article.asp?p=1160471&seqNum=4)
的教程编译/链接/运行一个简单的“Hello World”示例， 不幸的是，我遇到了这个错误，我不知道它在告诉我什么。我想知道是否有人有大型机经验，可以分享一些技巧吗？我正在运行 Marist z/OS 1.12。 ![在此处输入图像描述](../Images/87f02ea767b32c7507bcfa0667a26954.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:37:42.197

[IBM C/C++ 编译器](https://www.ibm.com/docs/en/zos/2.4.0?topic=zos-xl-cc)记录在您的特定 z/OS 发行版的IBM 文档中。

[此处](https://www.ibm.com/docs/en/zos/2.4.0?topic=cc-zos-xl-messages)记录了编译器消息，并指出 CCNEP 是编译器所需的无法加载的模块的名称。

> 用户响应：检查编译器是否安装正确。确保该区域中有足够的内存来获取模块。您可能需要指定运行时选项 HEAP(,,,FREE,,) 以防止编译器耗尽内存。

由于您在前台进行编译，并且我看到您正在使用 OMVS，因此“区域中”的内存量是为您的 TSO 会话指定的内存量。

提到的运行时选项是[语言环境](https://www.ibm.com/docs/en/zos/2.4.0?topic=environment-zos-language-concepts-guide)运行时选项。语言环境提供C/C++、COBOL、FORTRAN 和 PL/I 使用的[通用运行时环境。](https://www.ibm.com/docs/en/zos/2.4.0?topic=zlecg-overview)

有多种方法可以[指定运行时选项](https://www.ibm.com/docs/en/zos/2.4.0?topic=options-how-specify-runtime)，我猜您更喜欢使用 _CEE_RUNOPTS 环境变量。

也有可能包含 CCNEP 模块的库未分配给您的会话，和/或在 LPA 或链接列表中不可用。

根据您的背景，使用 PuTTY 可能比使用 OMVS 更舒服。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T00:57:49.830

我希望这不是内存问题，而是 C/C++ 编译器模块不在您的 STEPLIB 中。STEPLIB 是寻找加载模块的（其中之一） - 类似于 Unix 系统上的 LIBPATH。所以 - 你想要做的是在运行 c++ 之前添加一个导出命令。这确实是系统程序员应该为您设置的东西，但通常他们没有。不幸的是，它不是标准化的——但对我来说——CCNEP 程序对象位于 CBC.ACCNCMP 数据集中，所以我会执行以下操作：

```
(export STEPLIB=CBC.ACCNCMP:$STEPLIB; c++ ... ) 
```

这将运行（作为子进程，因此您不会弄乱全局 STEPLIB）C++ 编译器，但首先将数据集 CBC.ACNCMP 添加到您的 STEPLIB，以便 c++ 驱动程序可以加载模块 CCNEP。

如果您认识 Marist 的系统程序员，他们应该能够告诉您他们在哪里安装了 C++ 编译器。

# google-chrome-extension - 在 chrome 扩展中打开标签，将数据发布到该标签

> ID：14029655
> 
> 赞同：4
> 
> 时间：2012-12-25T10:06:58.040
> 
> 标签：google-chrome-extension

我想打开一个新标签，将一些数据发布到该标签。我怎样才能做到这一点 ？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:26:47.553

您可以创建一个表单，并通过 JavaScript 提交它。可以在[此处](https://stackoverflow.com/questions/10377840/making-finding-html5-validator-bookmarklet/10420384#10420384)找到一般示例。这可以在您的扩展程序中的任何地方完成，从背景页面到内容脚本。

如果您需要在没有内容脚本的情况下更好地控制表单的位置，您可以使用具有以下通用格式的数据 URL：

```
data:text/html;charset=utf8,<form></form><script>document.forms[0].submit();</script> 
```

或者，以编程方式：

```
var url = 'data:text/html;charset=utf8,';
function append(key, value) {
    var input = document.createElement('textarea');
    input.setAttribute('name', key);
    input.textContent = value;
    form.appendChild(input);
}
var form = document.createElement('form');
form.method = 'POST';
form.action = 'http://rob.lekensteyn.nl/dump.php';
append('q', 'query');
url += encodeURIComponent(form.outerHTML);
url += encodeURIComponent('<script>document.forms[0].submit();</script>');
// A general method
window.open(url);
// Or, use chrome extension-specific method which offers more control
// chrome.tabs.create({url: url, active: true}); 
```

PS。[http://rob.lekensteyn.nl/dump.php](http://rob.lekensteyn.nl/dump.php)的源代码（用于显示headers和POST数据）：

```
<?php
header('Content-Type: text/plain');
foreach ($_SERVER as $header => $value) {
    if (strpos($header, 'HTTP_') === 0) {
        echo str_pad(substr($header, 5), 20) . " " . $value . "\n";
    }
}
echo "\n\n";
$input = fopen('php://input', 'rb');
while (!feof($input)) {
    echo fread($input, 102400);
}
fclose($input);
?> 
```

# php - 使用 jquery 的 500 内部服务器错误

> ID：14029656
> 
> 赞同：1
> 
> 时间：2012-12-25T10:07:04.857
> 
> 标签：php, jquery, mysql

我在 firebug 中收到 500 个内部服务器错误。此代码在 localhost 上运行良好。请帮助我。这是我的代码。我正在上传文件，这就是为什么我也在标签中使用了 action。

```
<script src="js/jquery.form.js"></script> 
<script src="js/create_input.js"></script>
<script> 
    $(document).ready(function() { 
        $('#UploadForm').on('submit', function(e) { 
            e.preventDefault();
                            var value= $("#valS").val();
                            var host=$('#host').val(); alert(host);
            $(this).ajaxSubmit({
                type: "POST",
                url: host+"views/excel_import.php",
                data: {value: value},
                target: '#Exceloutput',
                success:  afterMsg //call function after success
            });  
        });
    }); 

    function afterMsg(msg)  { 

        $("#Exceloutput").html(msg);

    } 

</script> 

<form action="http://localhost/shop/admin/views/excel_import.php" method="post" enctype="multipart/form-data" id="UploadExcel" class="form has-validation">

  <div class="clearfix">
           <label for="form-upload" class="form-label">Upload File<em>*</em></label>
           <div class="form-input">
               <input type="file" size="50" class="text" id="excelfile" name="excelfile" required="required"/>
               <input type="hidden" size="50" class="text" id="valS" name="valS" value="1" required="required"/>
           </div>
  </div>

 <div class="form-action clearfix">
         <button class="button class-button" type="submit" id="SubmitButton">Upload</button>
         <button class="button class-button" type="submit" id="updatefields" name="updatefields">UpdateExcel</button>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:27:04.160

如果您在服务器上使用此代码，则 url 指向 localhost，这可能是错误的，此外还有跨站点浏览器限制问题。

服务器端 500 错误，我首先要做的是分别检查 webservers 错误日志或 php-cgi 错误日志。

谷[歌搜索](http://www.faqforge.com/linux/fix-http-request-length-134926-so-far-exceeds-maxrequestlen-error-on-debian-linux/)了一下，这[看起来很像你的错误](http://www.howtoforge.com/apache2-mod_fcgid-http-request-length-exceeds-maxrequestlen)信息：

放：

```
FcgidMaxRequestLen 2000000

which equals roughly 2 MB.

The default value is

FcgidMaxRequestLen 131072 
```

所以，改变这个值。您的 POST 大小超出了上传限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:09:38.713

根据提供的错误消息，我猜您正在使用 mod_fcgid，因此您应该编辑该文件：

```
/etc/apache2/mods-available/fcgid.conf 
```

并将 MaxRequestLen 的值添加（或更改）为更大的数字。文件路径是 mode_fcgi 的默认路径，但如果您有任何可能需要编辑 vhost fcgid 的控制面板（cpanel、parallels），它可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:14:04.590

我没有看到很多变量被定义。

主持人？

```
url: host+"views/excel_file_import.php", 
```

价值？

```
data: {value: value}, 
```

除了 500 之外，您的控制台中是否有任何错误？听起来您的脚本可能有问题。*excel_file_import.php* 中的相关代码是什么，特别是处理 POST 参数的部分...

# c# - 如何在 Windows 8 中获取共享结果？

> ID：14029662
> 
> 赞同：0
> 
> 时间：2012-12-25T10:07:38.900
> 
> 标签：c#, windows-8, microsoft-metro, share, windows-store-apps

当我将内容共享到其他 Windows 8 应用程序时，共享尝试可能成功也可能失败。我如何确定结果是什么？

例如，如果我分享了一张图片，但由于格式或图片大小的限制，目标应用程序无法接受它，我想检测问题，调整图片大小然后再次分享图片。

它发生了错误，有时可能共享目标应用程序显示错误消息，它说某些错误并且无法共享，当这种情况发生时，

问题是，我如何得到这个结果？如果共享失败，我的应用程序如何检测失败并获取其发生的原因？

我调用了 "DataRequestedEventArgs" 中的所有方法，但我没有找到它们中的任何一个返回的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:14:10.110

股票合约的设计方式与您描述的不同。

您只能将图像数据提供给目标应用程序。这就是您可以从您的应用程序中做的所有事情。如果图像大小不符合目标应用程序的要求，则必须自行调整大小。

# junit - HSQLDB 和 group by 的奇怪行为

> ID：14029663
> 
> 赞同：3
> 
> 时间：2012-12-25T10:07:40.743
> 
> 标签：junit, aggregate-functions, hsqldb, dbunit

我正在使用 HSQLDB 编写junits，我的查询是这样的：

```
String queryStr = "from ManualUrlBatchModel where status IN(:status) group by batchUser order by creationTime";
        Query query = getSession(requestType).createQuery(queryStr);
        query.setParameterList("status", status); 
```

我在给定状态下为每个用户检索一批（取决于创建时间 FIFO 顺序）。

它在端到端测试中运行良好，但在编写 junit 时失败。

异常说：

```
Caused by: java.sql.SQLException: Not in aggregate function or group by clause: org.hsqldb.Expression@164f8d4 in statement [select manualurlb0_.manual_url_batch_id as manual1_7_, manualurlb0_.creation_time as creation2_7_, manualurlb0_.modification_time as modifica3_7_, manualurlb0_.attribute_list as attribute4_7_, manualurlb0_.batch_name as batch5_7_, manualurlb0_.batch_user as batch6_7_, manualurlb0_.input_s3_key as input7_7_, manualurlb0_.locale as locale7_, manualurlb0_.notify_when_complete as notify9_7_, manualurlb0_.output_s3_key as output10_7_, manualurlb0_.processed_url_count as processed11_7_, manualurlb0_.s3_bucket as s12_7_, manualurlb0_.status as status7_, manualurlb0_.submitted_url_count as submitted14_7_, manualurlb0_.total_url_count as total15_7_ from csi_manual_url_batch manualurlb0_ where manualurlb0_.status in (? , ?) group by manualurlb0_.batch_user order by manualurlb0_.creation_time]
    [junit]     at org.hsqldb.jdbc.Util.throwError(Unknown Source)
    [junit]     at org.hsqldb.jdbc.jdbcPreparedStatement.<init>(Unknown Source)
    [junit]     at org.hsqldb.jdbc.jdbcConnection.prepareStatement(Unknown Source)
    [junit]     at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
    [junit]     at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
    [junit]     at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
    [junit]     at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1573)
    [junit]     at org.hibernate.loader.Loader.doQuery(Loader.java:696)
    [junit]     at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
    [junit]     at org.hibernate.loader.Loader.doList(Loader.java:2228) 
```

我在网上找到了几件事：

1.  如果 group by 不是基于字符串，则 GROUP BY 在 HSQLDB 中不起作用。
2.  GROUP BY 不能按照我使用的方式工作（选择 * .... group by COL1）。

我相信人们会更早遇到这个问题，你们当时做了什么（除了不写 junits :)）？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T10:20:25.583

在标准 SQL 中，group by 子句必须包含每个选定的值，但聚合函数除外。

```
select a, b, c, d, sum(e) from table group by a -- INVALID
select a, b, c, d, sum(e) from table group by a, b  -- INVALID
select a, b, c, d, sum(e) from table group by a, b, c  -- INVALID
select a, b, c, d, sum(e) from table group by a, b, c, d -- VALID 
```

因此，由 Hibernate 生成的查询无效，而 AFAIK，通过 HQL 查询进行分组的唯一可能方法是列出您要明确选择的每个标量列（请参阅[https://hibernate.onjira.com/browse/HHH -1615](https://hibernate.onjira.com/browse/HHH-1615) ):

```
 select m.foo, m.bar, m.creationTime, m.batchUser  
 from ManualUrlBatchModel m 
 where m.status IN(:status) 
 group by m.foo, m.bar, m.creationTime, m.batchUser 
 order by m.creationTime 
```

如果您的原始查询适用于 MySQL，那是因为 MySQL 不遵守 SQL 标准，并且允许`group by`不列出每个选定列的查询。我建议不要依赖这个“特性”，在测试和生产中使用相同的数据库，并使用 PostgreSQL 而不是 MySQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T09:58:26.770

您还可以聚合您不想分组的所有选择值：

例如`select a, sum(b), sum(c), sum(d), sum(e) from table group by a; -- VALID`

# python - Django Models：列出数据库列的总数

> ID：14029667
> 
> 赞同：0
> 
> 时间：2012-12-25T10:08:17.097
> 
> 标签：python, django, django-models

当我列出点时，我想为用户添加所有点。在我的模板中，我只想调用类似“points.total_points”的名称。以下是我到目前为止所拥有的，如果可能的话，我想将这一切都保留在我的模型中。有人可以帮助解释如何实现这一目标吗？

谢谢

**模型.py**

```
class PointsManager(models.Manager):

    def points_list(self,thisUser):
        list = Points.objects.filter(user=thisUser)
        return list

class Points (models.Model):
    user = models.ForeignKey(User)
    points = models.IntegerField(verbose_name=("Points"), default=0)
    created = models.DateTimeField(("Created at"), auto_now_add=True)
    updated = models.DateTimeField(verbose_name=("Updated at"), auto_now=True)

    objects = PointsManager()

    class Meta:
      verbose_name = ('Point')
      verbose_name_plural = ('Points') 
```

**视图.py**

```
@login_required
def history(request):

    thisPoints = Points.objects.points_list(request.user)
    context = {'points':thisPoints}
    return render_to_response('points/history.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:00:20.537

有几件事可以做：

1）使请求在模板中可用：

添加`common.core.middleware.RequestMiddleware`到`MIDDLEWARE_CLASSES`

这样您就可以编写`request.user`访问用户模型

2）在用户模型中添加total_points方法（可以通过多种方式完成，`contribute_to_class`或者列举`UserProfile`其中两种）

这样您就可以`request.user.total_points`在模板中编写

3）缓存`total_points`以避免每次查看页面时数据库命中：

    3a）要么使用标准的django缓存框架，

或者如果您希望显示的值在数据库中更改后立即更改，

`Point`3b）当通过 django 信号创建/修改/删除    新实例时手动更新值

# python - 在 Python 中获取包含特定文本的文件的更快方法？

> ID：14029672
> 
> 赞同：1
> 
> 时间：2012-12-25T10:08:35.763
> 
> 标签：python, file, file-io, python-3.x

我在一个名为 的列表中有很多很多文件`files`，我正在循环并保存`//StackOverflow`第一行中的所有文件。它后面可能有一些额外的文本，但该行应该以这样的文本开头。

目前我正在这样做：

```
matches = []
for file in files:
    with open(file, "r") as inf:
        line = inf.readline()
        if line.strip().startswith("//StackOverflow"):
            matches.append([line] + inf.readlines()) 
```

但是，我想知道是否有更好（更快？）的方法来执行此操作，因为现在我必须一个一个地打开每个文件并始终阅读第一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:19:18.303

如果您需要查看它们的内容，则必须打开所有文件。你所拥有的已经是你在 Python 中可以做到的最好的了。

理论上，您可以只读取文件的前 15 个字节并检查它们是否等于`//StackOverflow`，但我怀疑这会改变很多。

```
with open(file) as inf:
    if inf.read(15) == "//StackOverflow":
        inf.seek(0)
        matches.append(inf.readlines()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:16:16.170

如果您使用的是 Linux，您可能会考虑使用内置工具，`find`例如`head`和`grep`. 它们是用 C/C++ 编写的，而且速度更快。

# c# - jQuery/ajax POST 一个数组/对象到 C# 代码后面

> ID：14029677
> 
> 赞同：4
> 
> 时间：2012-12-25T10:09:33.877
> 
> 标签：c#, javascript, asp.net, ajax, webmethod

当我尝试通过其他问题学习时，我仍然无法让它发挥作用

到目前为止，这是我的代码，尽量做到彻底。

**事件（点击时）**

```
var resluts = []; //its a collections of id's - list items of unsorted list as strings 
$('#next').click(function() {
    var RLength = resluts.length;
    alert(resluts);
});​ 
```

**阿贾克斯邮政**

```
function UbpdateSecondStage(arr) {

    var WebMethod ="GetSecondStageData";
    var page ="Default.aspx/";
    var target = page + WebMethod;
    var SendParameters = Sys.Serialization.JavaScriptSerializer.serialize(arr);
    jQueryAjxUpdt(target, SendParameters);

}

function jQueryAjxUpdt(targetUrl, SentPars) {
    $.ajax({
              type: 'POST',
              url: targetUrl,
              data: {
                     'sentobj':SentPars

              },
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function (data) {
                                  //alert(data);
              }

   });
} 
```

**C＃**

```
 [WebMethod]
  public static string GetSecondStageData(object sentobj)
  {
      var x = sentobj;
    return ?? ...do i have to give a return.. even if i do not require one ?
  } 
```

我的代码有什么问题？这是我第一次尝试这种方法。谢谢。

**我已经更新了几次请再读一遍**

![在此处输入图像描述](../Images/649306af7e86db28a26704d2564019cc.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T10:23:05.707

像这样修改你的`WebMethod`，然后再试一次：

```
[WebMethod]
public static string GetSecondStageData(object sentobj)
{
    var x = sentobj;
    return DateTime.Now.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:33:38.553

首先，您应该指定要传递的内容（发送到服务器）以及从服务器返回的响应（如果幸运的话；））。如果它抛出或引发任何错误，那么也应该指定它。
其次，无需使用以下代码。

```
var WebMethod ="GetSecondStageData";
var page ="Default.aspx/";
var target = page + WebMethod;
var SendParameters = Sys.Serialization.JavaScriptSerializer.serialize(arr); 
```

你也可以这样工作

```
var test=new Object();
test.myArray=arr;
jQueryAjxUpdt("<Relative path to the directory such as '../home/default.aspx' >", JSON.stringify(test)) 
```

再次更改 ajaxFunction 如下

```
function jQueryAjxUpdt(targetUrl, SentPars) {
$.ajax({
          type: 'POST',
          url: targetUrl,
          data: SentPars,
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function (data) {
                              //alert(data);
          }
    });
} 
```

尚未测试，但我想它会起作用，如果没有，请告诉我。;-)
最后我猜你没有在你的 default.aspx 页面中保留任何东西然后`@page`指令，即使你没有指定`[WebMethod]`属性它也可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T10:37:07.567

请尝试以下代码

JavaScript

```
function UbpdateSecondStage(arr) {
    var WebMethod ="GetSecondStageData";
    var page ="Default.aspx/";
    var target = page + WebMethod;
    var SendParameters =arr;
    jQueryAjxUpdt(target, SendParameters);

}

function jQueryAjxUpdt(targetUrl, SentPars) {
          $.ajax({
              type: "POST",
              url: targetUrl,
              data: '{"results": "' + SentPars + '"}',
              contentType: "application/json; charset=utf-8",
              processData: false,
              dataType: "json",
              success: function(msg) {
              //alert(msg);
                 here your code
              },
              error: function(x, e) {
                  if (x.status == 500) {
                      alert("An error has occurred during processing your request.");
                  }
              }
          });
      } 
```

C＃

```
[WebMethod]
public static string GetSecondStageData(object results)
{
    var x = results;
    return DateTime.Now.ToString();
} 
```

让我知道结果。

# javascript - 同时运行多个 Javascript png sprite 动画

> ID：14029678
> 
> 赞同：4
> 
> 时间：2012-12-25T10:09:38.033
> 
> 标签：javascript, animation, png, sprite

我被要求创建一个简单的 png 动画：将鼠标悬停在菜单项上时会出现闪烁，如下所示：[http](http://www.breathoflifeart.com/wordpress/videos/) ://www.breathoflifeart.com/wordpress/videos/ 正如您在发布时看到的那样，动画播放正常，但在另一个实例启动时停止（以中等速度将鼠标扫过菜单条目以查看错误）我正在尝试： A.即使在另一个元素被突出显示 或 B

之后也让动画播放. 将 background-position 重置为 0 onmouseout

这是当前的 javascript，根据另一个问题中的示例修改：

```
var scrollUp = (function () {
var timerId; // stored timer in case you want to use clearInterval later
return function (height, times, element) {
        clearInterval(timerId);
 var i = 0; // a simple counter
 timerId = setInterval(function () {
   if (i > times) // if the last frame is reached, set counter to zero
   {  i = 0;
        clearInterval(timerId);}
        else
      element.style.backgroundPosition = "0px -" + i * height + 'px'; //scroll up
      i++;
    }, 50); // every 50 milliseconds
};
})(); 
```

HTML（每个元素都遵循相同的基本模板）

```
<a href="./for-sale/" onmouseover="scrollUp(42, 9, document.getElementById('sp-58'))">
  For Sale
  <div id="sp-58" class="sparkleparty"></div>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:31:01.003

您真正需要的是为每个动画使用单独的**timerId -s。**这是一个范围和闭包的问题，​​真的。在提供的示例中，**timerId**对所有scrollUp **(...)**函数都是全局的。要解决此问题，您可以尝试以下操作：

```
var scrollUp = function (height, times, element) {
 var i = 0; // a simple counter
 var timerId = setInterval(function () {
  if (i > times) {
   i = 0; clearInterval(timerId);
  } else {
   element.style.backgroundPosition = "0px -" + i * height + 'px'; //scroll up
  }
  i++;
 }, 50); // every 50 milliseconds
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T07:20:08.970

为此，我为此创建了一个简单的库。看看：[https ://github.com/wolthers/SpriteClip.js](https://github.com/wolthers/SpriteClip.js)

# ios - 从数字中删除逗号并存储在 sqlite 中并从 sqlite 中检索数据并用逗号显示

> ID：14029679
> 
> 赞同：2
> 
> 时间：2012-12-25T10:09:48.187
> 
> 标签：ios, sqlite, ios6

我有以下数字必须插入到 sqlite db 中，逗号需要删除，并且在插入 sqlite db 时需要保留小数点。

检索时，我需要在 ios6 中的确切位置用逗号显示值。请指导我，我是 sqlite 和 iOS 的菜鸟。在此先感谢。请将此问题视为初学者将数据输入 sqlite db 的常见问题。再次感谢.

```
Price
377,245.67
5,104,245.00
23,332.98
126,875.21
5,112,225.14 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T10:28:11.427

试试这个来删除逗号并从字符串中获取一个 NSNumber，

```
NSNumber *numberObj = [NSNumber numberWithFloat:[[string stringByReplacingOccurrencesOfString:@"," withString:@""] floatValue]]; 
```

然后获取数字中带逗号的字符串，

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setGroupingSeparator:@","];
[formatter setGroupingSize:3];
NSString *formattedString = [formatter stringFromNumber:[NSNumber numberWithFloat:floatNumber]]; 
```

有关更多详细信息，请查看[NSNumberFormatter 类](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:24:11.807

您是否直接对该字段执行任何特定的数值运算？如果没有，您可以将它们存储并作为字符串检索，然后直接将字符串转换为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:18:48.920

这很简单。您可以使用`stringByReplacingOccurrencesOfString:withString:`在插入之前删除逗号。检索后，只需在从末尾开始的每个第四位插入逗号。

# android - 检测蓝牙设备睡眠状态 Android

> ID：14029684
> 
> 赞同：2
> 
> 时间：2012-12-25T10:10:54.313
> 
> 标签：android, bluetooth, android-bluetooth

我正在开发一个以蓝牙连接为核心部分的应用程序。目前该应用程序正在成功连接到蓝牙设备并与之通信。现在的主要问题是我们用来收集数据的设备在某些空闲状态后进入睡眠模式。

我的问题是，如何检测设备处于睡眠模式，以便我的应用程序可以要求用户唤醒设备？

我通过 SSP 连接。连接代码是 API 演示中蓝牙聊天应用程序的精确副本。

**睡眠模式**——我的应用程序连接到的设备（非移动设备）使用电池运行，因此如果 Android 应用程序在 1 分钟内没有对设备发出任何请求，则优化电池的使用设备进入睡眠模式。（可能已关闭不掉线）。所以我的应用程序需要捕获这种情况并让用户知道设备处于睡眠模式并将其唤醒，以便它可以响应应用程序请求。这是我可以解释睡眠模式的最佳方式。请记住蓝牙设备的睡眠模式，而不是安卓手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:00:30.210

解决方案---我知道它并不完美，但我仍在努力……每当连接断开时，我都会收到套接字错误，因为远程设备处于睡眠模式或无法触及或死机。我还更改了我的代码，以便我不需要 UUID（现在它是低级连接）代码如下。

```
public class HHDBapiBTService {
// Debugging
private static final String TAG = "HHDBapiBTService";
private static final boolean D = true;

private BluetoothSocket mmSocket = null;
private InputStream mmInStream = null;
private OutputStream mmOutStream = null;

// Member fields
private final BluetoothAdapter mAdapter;
private Handler mHandler;
private ConnectThread mConnectThread;
private ConnectedThread mConnectedThread;
private int mState;

// Constants that indicate the current connection state
public static final int STATE_NONE = 0; // we're doing nothing
public static final int STATE_LISTEN = 1; // now listening for incoming
                                            // connections
public static final int STATE_CONNECTING = 2; // now initiating an outgoing
                                                // connection
public static final int STATE_CONNECTED = 3; // now connected to a remote
                                                // device

public static final int STATE_SLEEP = 4; // now connected to a remote
// device

/**
 * Constructor. Prepares a new BluetoothChat session.
 * 
 * @param context
 *            The UI Activity Context
 * @param handler
 *            A Handler to send messages back to the UI Activity
 */
public HHDBapiBTService(Context context, Handler handler) {
    mAdapter = BluetoothAdapter.getDefaultAdapter();
    mState = STATE_NONE;
    mHandler = handler;
}

/**
 * Set the current state of the chat connection
 * 
 * @param state
 *            An integer defining the current connection state
 */
public synchronized void setState(int state) {
    if (D)
        Log.d(TAG, "setState() " + mState + " -> " + state);
    mState = state;

    // Give the new state to the Handler so the UI Activity can update
    mHandler.obtainMessage(GlobalValues.MESSAGE_STATE_CHANGE, state, -1)
            .sendToTarget();
}

/**
 * Return the current connection state.
 */
public synchronized int getState() {
    return mState;
}

public void setHandler(Handler handler) {
    mHandler = handler;
}

/**
 * Start the chat service. Specifically start AcceptThread to begin a
 * session in listening (server) mode. Called by the Activity onResume()
 */
public synchronized void start() {
    if (D)
        Log.d(TAG, "start");

    // Cancel any thread attempting to make a connection
    if (mConnectThread != null) {
        mConnectThread.cancel();
        mConnectThread = null;
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }

    setState(STATE_LISTEN);
}

/**
 * Start the ConnectThread to initiate a connection to a remote device.
 * 
 * @param device
 *            The BluetoothDevice to connect
 */
public synchronized void connect(BluetoothDevice device) {
    if (D)
        Log.d(TAG, "connect to: " + device);

    // Cancel any thread attempting to make a connection
    if (mState == STATE_CONNECTING) {
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }

    // Start the thread to connect with the given device
    mConnectThread = new ConnectThread(device);
    mConnectThread.start();
    setState(STATE_CONNECTING);
}

/**
 * Start the ConnectedThread to begin managing a Bluetooth connection
 * 
 * @param socket
 *            The BluetoothSocket on which the connection was made
 * @param device
 *            The BluetoothDevice that has been connected
 */
public synchronized void connected(BluetoothSocket socket,
        BluetoothDevice device) {
    if (D)
        Log.d(TAG, "connected");

    // Cancel the thread that completed the connection
    if (mConnectThread != null) {
        mConnectThread.cancel();
        mConnectThread = null;
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }

    // Start the thread to manage the connection and perform transmissions
    mConnectedThread = new ConnectedThread(socket);
    mConnectedThread.start();

    setState(STATE_CONNECTED);
}

/**
 * Stop all threads
 */
public synchronized void stop() {
    if (D)
        Log.d(TAG, "stop");
    if (mConnectThread != null) {
        mConnectThread.cancel(true);
        mConnectThread = null;
    }
    if (mConnectedThread != null) {
        mConnectedThread.cancel();
        mConnectedThread = null;
    }

    setState(STATE_NONE);
}

/**
 * Write to the ConnectedThread in an unsynchronized manner
 * 
 * @param out
 *            The bytes to write
 * @see ConnectedThread#write(byte[])
 */
public void write(byte[] out) {
    if(getState() == STATE_SLEEP){
        connectionLost();
        return;
    }
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED)
            return;
        r = mConnectedThread;

    }
    // Perform the write unsynchronized
    r.write(out);
}

public void closeConnection(){
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED)
            return;
        r = mConnectedThread;
    }
    r.cancel();
}

/**
 * Indicate that the connection attempt failed and notify the UI Activity.
 */
private void connectionFailed() {
    if(getState() != STATE_LISTEN){
        setState(STATE_LISTEN);

        // Send a failure message back to the Activity
        Message msg = mHandler.obtainMessage(GlobalValues.MESSAGE_SHOW_TOAST);
        Bundle bundle = new Bundle();
        bundle.putString(GlobalValues.TOAST, "HHD device is in sleep mode or out-of range. Please shake the HHD device to make it active.");
        msg.setData(bundle);
        mHandler.sendMessage(msg);
    }
}

/**
 * Indicate that the connection was lost and notify the UI Activity.
 */
private void connectionLost() {
    //setState(STATE_LISTEN);

    // Send a failure message back to the Activity
    /*Message msg = mHandler.obtainMessage(GlobalValues.MESSAGE_SHOW_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(GlobalValues.TOAST, "Device connection was lost");
    msg.setData(bundle);
    mHandler.sendMessage(msg);*/
    setState(STATE_SLEEP);
    Message msg = mHandler.obtainMessage(
                         GlobalValues.MESSAGE_REMOTE_DEVICE_LOST);
    mHandler.sendMessage(msg);
}

/**
 * This thread runs while attempting to make an outgoing connection with a
 * device. It runs straight through; the connection either succeeds or
 * fails.
 */
private class ConnectThread extends Thread {
    private BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        mmDevice = device;
    }

    @SuppressLint("NewApi")
    protected boolean simpleComm(Integer port) {
        // byte [] inputBytes = null;

        // The documents tell us to cancel the discovery process.
        mAdapter.cancelDiscovery();

        Log.d(this.toString(), "Port = " + port);
        try {
            Method m = mmDevice.getClass().getMethod("createRfcommSocket",
                    new Class[] { int.class });
            mmSocket = (BluetoothSocket) m.invoke(mmDevice, port);

            // debug check to ensure socket was set.
            assert (mmSocket != null) : "Socket is Null";

            mAdapter.cancelDiscovery();
            // attempt to connect to device
            mmSocket.connect();
            try {
                Log.d(this.toString(),
                        "************ CONNECTION SUCCEES! *************");

                // Reset the ConnectThread because we're done
                /*synchronized (HHDBapiBTService.this) {
                    mConnectThread = null;
                }*/

                connected(mmSocket, mmDevice);
                return true;
            } finally {
                // close the socket and we are done.
                // //mmSocket.close();
            }
            // IOExcecption is thrown if connect fails.
        } catch (IOException ex) {
            Log.e(this.toString(), "IOException " + ex.getMessage());
            if (port == 256) {
                connectionFailed();
                try {
                    mmSocket.close();
                    mmSocket = null;
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        } catch (NoSuchMethodException ex) {
            Log.e(this.toString(),
                    "NoSuchMethodException " + ex.getMessage());
        } catch (IllegalAccessException ex) {
            Log.e(this.toString(),
                    "IllegalAccessException " + ex.getMessage());
        } catch (InvocationTargetException ex) {
            Log.e(this.toString(),
                    "InvocationTargetException " + ex.getMessage());
        }catch (NullPointerException ex) {
            Log.e(this.toString(),
                    "NullPointerException " + ex.getMessage());
        }
        return false;
    }

    public void run() {
        for (Integer port = 1; port <= 256; port++) {
            if (simpleComm(Integer.valueOf(port)))
                break;
        }

    }

    public void cancel() {
         /*if (mmSocket != null) { 
             try { 
                 mmSocket.close(); mmSocket = null;
             } catch (IOException e) { 
                 Log.e(TAG, "close() of connect secure socket failed", e); 
             } 
         }*/
    }

    public void cancel(boolean val) {
         if (mmSocket != null) { 
             try { 
                 mmSocket.close(); mmSocket = null;
             } catch (IOException e) { 
                 Log.e(TAG, "close() of connect secure socket failed", e); 
             } 
         }
    }

}

/**
 * This thread runs during a connection with a remote device. It handles all
 * incoming and outgoing transmissions.
 */
private class ConnectedThread extends Thread {

    private Logger logger;

    public ConnectedThread(BluetoothSocket socket) {
        Log.d(TAG, "create ConnectedThread");
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            Log.e(TAG, "temp sockets not created", e);
        }

        logger = Logger.getInstance();

        mmInStream = tmpIn;
        mmOutStream = tmpOut;

    }

    @Override
    public void run() {
        byte[] buffer = new byte[1024];
        int bytes;
        // Keep listening to the InputStream while connected
        //Logic to parse the Inputstream
                } catch (IOException e) {
                    HHDBapiBTService.this.stop();
                    Log.e(TAG, "disconnected", e);
                    //connectionLost();
                    break;
                }
            }
        }
    }

    /**
     * Write to the connected OutStream.
     * 
     * @param buffer
     *            The bytes to write
     */

    public void write(byte[] buffer) {
        try {
            mmOutStream.write(buffer);
        } catch (IOException e) {
            connectionLost();
            Log.e(TAG, "Exception during write", e);
        }
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }

}
} 
```

# actionscript-3 - AS3 使用 removeChild 中的变量来删除 currentLevel

> ID：14029688
> 
> 赞同：0
> 
> 时间：2012-12-25T10:12:09.733
> 
> 标签：actionscript-3, actionscript, removechild

我有一个标识当前级别的字符串变量，当它达到这个级别时，它被放置在时间轴中。

```
var currentLevel:String = "level1"; 
```

我有一个调度事件，在达到关卡结束时调用。

```
dispatchEvent(new Event("levelend", true)); 
```

我已将其放入文档类：

```
function proceedLevel(event:Event):void
    {
        removeEventListener("levelend", proceedLevel);
        SoundMixer.stopAll();
        removeChild(currentLevel);
        gotoAndStop(nextScene);
    } 
```

每个级别的名称如下：

```
var level1:Level1 = new Level1();
level1.x = 0;
level1.y = 0;
addChild(level1); 
```

每个级别都在自己的影片剪辑中，但是当它到达该影片剪辑中时间线的末尾时，它会调度事件“levelEnd”。文档类进行侦听，然后尝试删除调用 removeChild 的实例。我添加了字符串 currentLevel 并将其放入 removeChild 以希望尝试从文档类中删除它。

我收到此错误：

```
implicit coercion of a value of type to an unrelated type flash display    displayobject 
```

我知道将字符串传递给 removeChild 并不高兴！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:26:12.553

您可以在创建关卡显示对象后添加另一个变量`var currentLevelView:DisplayObject`设置它并使用它，`removeChild`或者您可以设置`level1.name = currentLevel`并更改`removeChild`为`removeChild(getChildByName(currentLevel))`

# c# - WP7 - 自定义按钮中的闪烁背景

> ID：14029690
> 
> 赞同：2
> 
> 时间：2012-12-25T10:12:24.960
> 
> 标签：c#, windows-phone-7, animation, storyboard, custom-controls

这是我的自定义按钮：

```
<Style TargetType="local:AnswerButton">
    <Setter Property="Background" Value="{StaticResource BlueGradient}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:AnswerButton">
                <Grid>
                    <Border BorderBrush="Blue" BorderThickness="2" CornerRadius="10">
                        <Border Name="myBorder" Background="{TemplateBinding Background}" CornerRadius="9">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0"
                                       TextAlignment="Center" VerticalAlignment="Center" 
                                       Text="{TemplateBinding Option}" Foreground="Yellow" />
                                <TextBlock Grid.Column="1"
                                       TextAlignment="Left" VerticalAlignment="Center" 
                                       Text="{TemplateBinding Text}" Foreground="Black" />
                            </Grid>
                        </Border>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如何为自定义按钮设置动画？我试过这个：

```
 ColorAnimation myColorAnimation = new ColorAnimation();
    myColorAnimation.From = Colors.Blue;
    myColorAnimation.To = Colors.Green;
    myColorAnimation.AutoReverse = true;
    myColorAnimation.Duration = TimeSpan.FromSeconds(1);

    Storyboard.SetTargetName(myColorAnimation, "myBorder");
    Storyboard.SetTargetProperty(myColorAnimation,
        new PropertyPath(Border.BackgroundProperty));
    Storyboard myStoryboard = new Storyboard();
    myStoryboard.Children.Add(myColorAnimation);

    myStoryboard.Begin(); 
```

但它的目标名称有问题。我知道这是错误的，但是如何将目标设置为自定义控件？我的页面中有 4 个，我想为选择的一个设置此动画：

```
 <Controls:AnswerButton Name="btnAnswerA" Tap="AnswerButton_Tap"/>
    <Controls:AnswerButton Name="btnAnswerB" Tap="AnswerButton_Tap"/>
    <Controls:AnswerButton Name="btnAnswerC" Tap="AnswerButton_Tap"/>
    <Controls:AnswerButton Name="btnAnswerD" Tap="AnswerButton_Tap"/> 
```

我不在乎它是在代码中还是在 xaml 中，但我怎样才能让一些自定义按钮通过 coloranimation 闪烁（闪烁）？谢谢

编辑：我在 Thaven 的回答中尝试了许多使用 visualstatemanager 的选项，但没有帮助。真的没有人知道哪里可能出现问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:59:12.113

我有一个非常简单的想法，我希望它对你有好处。每个按钮都有点击事件，对吧？

```
 private void Button1_Click_1(object sender, RoutedEventArgs e)
    {
        DispatcherTimer dispatcherTimer = new DispatcherTimer();
        dispatcherTimer.Tick += dispatcherTimer_Tick;
        dispatcherTimer.Interval = new TimeSpan(0, 0, 0, 0, 10);
        dispatcherTimer.Start();

    }
    private void dispatcherTimer_Tick(object sender, EventArgs e)
    {

        Random rnd = new Random();            
        Button1.Background = new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromArgb(
                      Convert.ToByte(rnd.Next(255)),
                      Convert.ToByte(rnd.Next(255)),
                      Convert.ToByte(rnd.Next(255)),
                      Convert.ToByte(rnd.Next(255))
                      ));             
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:13:21.453

如果我正确理解您的问题，您不知道如何将动画设置为您选择的按钮实例，并在按下按钮时运行。

有几种方法可以实现这一目标。其中之一是使用视觉状态。

在您的情况下，xaml 代码应如下所示：

```
 <Style TargetType="local:AnswerButton">
<Setter Property="Background" Value="Blue"/>
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="local:AnswerButton">
            <Grid>
                <Grid.Resources>
                    <Storyboard x:Name="AnimateChosen"/>
                </Grid.Resources>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualStateGroup.Transitions>
                            <VisualTransition GeneratedDuration="0:0:0.2" To="Pressed"/>
                            <VisualTransition GeneratedDuration="0:0:0.2" To="Normal"/>
                        </VisualStateGroup.Transitions>
                        <VisualState x:Name="Normal"/>
                        <VisualState x:Name="Pressed">
                            <Storyboard>
                                <ColorAnimation Duration="0" To="Lime" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="myBorder" d:IsOptimized="True"/>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Border BorderBrush="Blue" BorderThickness="2" CornerRadius="10" Background="Black">
                    <Border x:Name="myBorder" CornerRadius="9" Background="Blue">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                TextAlignment="Center" VerticalAlignment="Center" 
                                Text="{TemplateBinding Option}" Foreground="Yellow" />
                            <TextBlock Grid.Column="1"
                                TextAlignment="Left" VerticalAlignment="Center" 
                                Text="{TemplateBinding Text}" Foreground="Black" />
                        </Grid>
                    </Border>
                </Border>
            </Grid>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

有关 windows phone 中动画和视觉样式的更多信息：

[http://windowsphonegeek.com/articles/WP7-Animations-in-depthndash-Overview-and-Getting-Started](http://windowsphonegeek.com/articles/WP7-Animations-in-depthndash-Overview-and-Getting-Started)

[http://www.windowsphonegeek.com/articles/WP7-working-with-VisualStates-How-to-make-a-ToggleSwitch-from-CheckBox](http://www.windowsphonegeek.com/articles/WP7-working-with-VisualStates-How-to-make-a-ToggleSwitch-from-CheckBox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T18:42:13.317

我认为你应该使用 Expression Blend 来制作这个动画。您可以在那里实时查看转换并进行适当的更改，而无需编译。

这是一个很好的指南[http://msdn.microsoft.com/en-us/magazine/cc721608.aspx](http://msdn.microsoft.com/en-us/magazine/cc721608.aspx)

# javascript - 空格键 keyCode(32) 在 Mozilla Firefox 上不起作用

> ID：14029708
> 
> 赞同：6
> 
> 时间：2012-12-25T10:14:51.270
> 
> 标签：javascript, firefox, space, keycode, onkeypress

Enter`keyCode(13)`在所有浏览器上都可以正常工作。

我在 Chrome 上测试的空格键`keyCode(32)`工作正常，但在 Firefox 上没有响应。我使用了以下代码：

```
<script type="text/javascript" >
    function enterPressed(evn) {
        var e_id = $('e_id').value;
        var e_fname = $('e_fname').value;
        var e_role = $('e_role').value;

        if (window.event && window.event.keyCode == 13) {
            Monitor.Order.assign(e_id, e_fname, e_role);
        } else if (evn && evn.keyCode == 13) {
            Monitor.Order.assign(e_id, e_fname, e_role);
        } else if (evn && evn.keyCode == 32) {
            Monitor.Order.updateStatus('COOKED');
        }                       
    }
    document.onkeypress = enterPressed;     
</script> 
```

当它在 Chrome 中运行时，为什么它在 Firefox 中不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T23:21:03.277

空格是可打印的字符，因此 keypress 事件将`charCode`设置为其对应的字符，并且`keyCode`不会在 Firefox 中的 keypress 事件上设置。

通常，您希望在 keypress、 keyup/keydown 中`charCode`用于可打印的内容。`keyCode`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:17:29.257

试试这个代码，它会正常工作....

```
function enterPressed(evn) {
if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){ //test for Firefox/x.x or Firefox x.x 

        var e_id = $('e_id').value;
        var e_fname = $('e_fname').value;
        var e_role = $('e_role').value;

        if (evn.which == 13) {
            Monitor.Order.assign(e_id, e_fname, e_role);
        } else if (evn.which == 13) {
            Monitor.Order.assign(e_id, e_fname, e_role);
        } else if (evn.which == 32) {
            Monitor.Order.updateStatus('COOKED');
        }                
    }

     else{
            var e_id = $('e_id').value;
            var e_fname =$('e_fname').value;
            var e_role = $('e_role').value;

            if (window.event && window.event.keyCode == 13) {
                Monitor.Order.assign(e_id, e_fname, e_role);
            } else if (evn && evn.keyCode == 13) {
               Monitor.Order.assign(e_id, e_fname, e_role);
            } else if (evn && evn.keyCode == 32) {
                Monitor.Order.updateStatus('COOKED');
            }  

        }
    }
    document.onkeypress = enterPressed; 
```

# mysql - 什么会导致连接比划分为两个查询慢？

> ID：14029714
> 
> 赞同：4
> 
> 时间：2012-12-25T10:16:28.860
> 
> 标签：mysql, sql, query-optimization, faceted-search

我正在从多个表执行 JOIN 以执行分面搜索。当避免 JOIN 并将查询分成两个不同的查询时，我注意到性能有了很大的提升，所以我假设我的 JOIN 没有优化。

结构：

```
-- tags
userId  |   tagId
1              3
1              4
2              3
2              9

-- search
userId   |   number  |   countryId   |   stateId ...  
1              13           221             55

-- countries
countryId     |  countryName   
221                 Somewhere

-- users
userId    |   profileImageLink
1         |   <photo link> 
```

我正在尝试提取所有具有标签的用户，根据 search.number 排序并从其他表中获取元数据。查询：

```
SELECT 
    search.*, users.a, users.b, users.c, users.d, users.e, users.f, countries.location_country, states.location_state, cities.location_city 
FROM search 
RIGHT JOIN tags 
   ON search.user_id = tags.user_id 
LEFT JOIN users 
   ON users.user_id=search.user_id 
LEFT JOIN countries 
   ON countries.countryId=search.countryId 
LEFT JOIN states 
   ON states.countryId=search.countryId AND states.stateId=search.stateId 
LEFT JOIN cities 
   ON cities.countryId=search.countryId AND cities.stateId=search.stateId AND cities.cityId=search.cityId 
WHERE 
  tags.skillId =52772 
ORDER BY 
  search.number DESC LIMIT 0,200 
```

我注意到将 JOIN 删除到 users 表（然后再这样做）会使查询更快。如何优化它以在同一个查询中工作？我尝试将 FROM 更改为标签而不是搜索，但这没有用...

这是 EXPLAIN 显示的：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  tags    ref skill_user,skillId  skill_user  4   const   184854  Using index; Using temporary; Using filesort
1   SIMPLE  search  eq_ref  user_id user_id 4   tags.user_id    1   
1   SIMPLE  countries   eq_ref  PRIMARY PRIMARY 2   search.countryId    1   
1   SIMPLE  states  eq_ref  PRIMARY,state   PRIMARY 3   search.stateId  1   
1   SIMPLE  cities  eq_ref  PRIMARY,city    PRIMARY 3   search.cityId   1   
1   SIMPLE  users   eq_ref  user_id user_id 4   search.user_id  1   

EXPLAIN without the LEFT JOIN users:

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  tags    ref skill_user,skillId  skill_user  4   const   155870  Using index
1   SIMPLE  search  eq_ref  user_id user_id 4   tags.user_id    1   
1   SIMPLE  countries   eq_ref  PRIMARY PRIMARY 2   search.countryId    1   
1   SIMPLE  states  eq_ref  PRIMARY,state   PRIMARY 3   search.stateId  1   
1   SIMPLE  cities  eq_ref  PRIMARY,city    PRIMARY 3   search.cityId   1 
```

回答中建议的查询解释：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  tags    index   NULL    userid_skill    8   NULL    22689539    Using where; Using index; Using temporary; Using filesort
1   SIMPLE  search  eq_ref  user_id user_id 4   tags.user_id    1   
1   SIMPLE  users   eq_ref  user_id user_id 4   search.user_id  1   
1   SIMPLE  countries   eq_ref  PRIMARY PRIMARY 2   search.countryId    1   
1   SIMPLE  states  eq_ref  PRIMARY,state   PRIMARY 3   search.stateId  1   
1   SIMPLE  cities  eq_ref  PRIMARY,city    PRIMARY 3   search.cityId   1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:59:42.790

在表上创建索引以运行以下查询：

```
Table    ColumnName
------   ----------
tags     user_id, skillid (Both column in one index) 
```

尝试这个：

```
SELECT s.*, u.a, u.b, u.c, u.d, u.e, u.f, c.location_country, 
       st.location_state, ct.location_city 
FROM tags t 
LEFT JOIN search s ON t.user_id = s.user_id 
LEFT JOIN users u ON t.user_id = u.user_id 
LEFT JOIN countries c ON s.countryId = c.countryId 
LEFT JOIN states st ON s.stateId = st.stateId 
LEFT JOIN cities ci ON s.cityId= ct.cityId 
WHERE t.skillId =52772 
ORDER BY s.number DESC 
LIMIT 0,200 
```

**编辑**

使用适当的索引尝试这两个查询，让我知道以下查询是否适合您。

```
SELECT s.*, u.a, u.b, u.c, u.d, u.e, u.f, c.location_country, 
       st.location_state, ct.location_city 
FROM (SELECT user_id FROM tags WHERE t.skillId = 52772) AS t 
LEFT JOIN search s ON t.user_id = s.user_id 
LEFT JOIN users u ON t.user_id = u.user_id 
LEFT JOIN countries c ON s.countryId = c.countryId 
LEFT JOIN states st ON s.stateId = st.stateId 
LEFT JOIN cities ci ON s.cityId= ct.cityId 
ORDER BY s.number DESC 
LIMIT 0,200; 
```

**或者**

```
SELECT s.*, u.a, u.b, u.c, u.d, u.e, u.f, c.location_country, 
       st.location_state, ct.location_city 
FROM (SELECT t.user_id, s.* FROM tags t 
      LEFT JOIN search s ON t.user_id = s.user_id  
      WHERE t.skillId = 52772 
      ORDER BY s.number DESC 
      LIMIT 0,200) AS t 
LEFT JOIN users u ON t.user_id = u.user_id 
LEFT JOIN countries c ON s.countryId = c.countryId 
LEFT JOIN states st ON s.stateId = st.stateId 
LEFT JOIN cities ci ON s.cityId= ct.cityId 
ORDER BY s.number DESC 
LIMIT 0,200; 
```

# java - 如何使用 jeval 以指数形式评估数字？

> ID：14029717
> 
> 赞同：1
> 
> 时间：2012-12-25T10:17:32.527
> 
> 标签：java, math, evaluation

我在使用[jeval](http://jeval.sourceforge.net/)库评估表达式时遇到问题，该库包含 1.0E-4 之类的值，或在“E”之后带有“-”的任何其他值

```
Evaluator mEvaluator = new Evaluator();
String r1 = mEvaluator.evaluate("1/10000"); // Works, r1 == "1.0E-4"
String r2 = mEvaluator.evaluate("1.0E-4");  // Doesn't work, exception is thrown
String r3 = mEvaluator.evaluate("1.0E4");   // Works, r3 == "1.0E4" 
```

例外是：

```
12-25 12:10:51.495: W/System.err(5225): net.sourceforge.jeval.EvaluationException: Expression is invalid. 
```

如何使用 jeval 评估这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:30:47.943

为什么不使用

```
String r2 = mEvaluator.evaluate("1/1.0E4"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:43:51.177

在我看来， jeval 将`1.0E-4`number 视为具有两个操作数的表达式：`1.0E`减号`4`。您可以使用一些解决方法，就像 cristi_b 建议的那样。另一种选择是使用另一个脚本引擎。

JDK 6[提供了评估 JavaScript 表达式的 API](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)，我认为它们与您尝试评估的内容兼容：

```
ScriptEngineManager factory = new ScriptEngineManager();
ScriptEngine engine = factory.getEngineByName("JavaScript");
engine.eval("1.0E-4"); 
```

# ruby - 如何获取对象的名称？

> ID：14029729
> 
> 赞同：2
> 
> 时间：2012-12-25T10:19:04.067
> 
> 标签：ruby

我有不同的对象，例如 `Article`和`Medium`。当我使用助手时，我想确定对象的名称（例如`Article`or `Medium`）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T10:20:39.867

见[http://ruby-doc.org/core-1.9.3/Object.html#method-i-class](http://ruby-doc.org/core-1.9.3/Object.html#method-i-class)

```
a = Article.new
a.class
# => Article
a.class.to_s
# => "Article" 
```

也看看[is_a？](http://ruby-doc.org/core-1.9.3/Object.html#method-i-is_a-3F)和[响应？](http://ruby-doc.org/core-1.9.3/Object.html#method-i-respond_to-3F). 通常使用[鸭子打字](http://en.wikipedia.org/wiki/Duck_typing)比`respond_to?`使用类名更好（通常）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-25T10:56:11.943

是不可能的。常量和变量引用对象。没有办法得到它的名字。

```
Article = Object.new 
```

看到该值`Article`不包括有关其名称的信息：

```
Article
# => <#Object...> 
```

# css - 在 Django 中加载 CSS/图像

> ID：14029730
> 
> 赞同：2
> 
> 时间：2012-12-25T10:19:05.300
> 
> 标签：css, django, django-models, django-templates, django-views

我已经阅读了官方 Django Docs 和 SO 中的许多其他帖子。我仍然无法弄清楚在 HTML 页面中加载我的 CSS 文件的方法。我在跑步`Django 1.4`。这是我作为应用程序的整个`mysite`项目结构。`auth`

```
mysite/
      manage.py
      settings.py
      __init__.py
      urls.py
      auth/
          __init__.py
          forms.py
          models.py
          views.py
      templates/
               index.html
               home.html
      media/
           common.css 
```

如何加载我的`common.css`文件`index`和`home`模板文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T11:05:16.880

看看`static files`：[https ://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

你需要：

1.  添加`django.contrib.staticfiles`到您已安装的应用程序
2.  把你的文件放在`static`目录中
3.  设置`STATIC_ROOT`并`STATIC_URL`在您的设置中
4.  在模板中使用`STATIC_URL`变量或`static`模板标签

`{% load staticfiles %}`接着`<link href="{% static "common.css" %}" rel="stylesheet" type="text/css"/>`

然后，在您的生产环境中，您需要收集静态文件

# delphi - 如何在 Delphi 上获取活动形式的 ClassName（可能来自另一个应用程序）？

> ID：14029733
> 
> 赞同：4
> 
> 时间：2012-12-25T10:19:32.790
> 
> 标签：delphi, winapi, delphi-xe2

如何在 Delphi 上获取活动形式的 ClassName（可能来自另一个应用程序）？

似乎只`Application.ActiveFormHandle`返回活动形式`Application`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T10:40:37.177

我相信您正在寻找的窗口句柄是由[`GetForegroundWindow`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633505.aspx).

要获取类名，请将该窗口句柄传递给 Windows API 函数[`GetClassName`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633582.aspx)。这是该 API 函数的 Delphi 包装器：

```
function GetWindowClassName(Window: HWND): string;
const
  MaxClassNameLength = 257;//256 plus null terminator
var
  Buffer: array [0..MaxClassNameLength-1] of Char;
  len: Integer;
begin
  len := GetClassName(Window, Buffer, Length(Buffer));
  if len=0 then
    RaiseLastOSError;
  SetString(Result, Buffer, len);
end; 
```

我使用了长度为 256 的缓冲区，因为窗口类名不允许长于该长度。

# javascript - 面板折叠 ExtJS 上的 HTMLEditor 文本区域丢失数据

> ID：14029734
> 
> 赞同：2
> 
> 时间：2012-12-25T10:19:33.780
> 
> 标签：javascript, database, extjs3

我正在使用 Ext 3.4 制作带有某些表单的应用程序。

我在一个 Ext.panel 中有一个表单，它的 collapse 属性设置为 true，因为我希望它是可折叠的。

使用 ExtJS 3.4 提供的加载方法将来自数据库的数据加载到我的表单中。

**问题是，当面板在被用户折叠后“展开”时，属于 HTMLEditor 小部件的文本区域已被清空。**

为了解决这个问题，我可以在面板以某种方式展开时将数据重新加载到表单中，但我知道这不是最好的方法（最好的方法是在折叠面板时不丢失数据）。

如果有人遇到此问题或有人知道解决此问题的方法，请分享此信息。我会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T16:56:06.743

在 Ext JS 中面板折叠是通过样式（显示、可见性或偏移）隐藏它的主体来实现的，默认情况下展开/折叠后它肯定不会清除内部面板数据。你使用普通的 Ext JS 吗？

尝试诊断为什么会发生这种情况 - 最好的方法是附加 Ext 的调试版本，并逐步执行展开/折叠方法。

您还可以检查是否有任何侦听器附加到`beforecollapse`, `collapse`, `beforeexpand`,`expand`事件。您可以通过查看`events`面板的属性来做到这一点。例如：`console.log(panel.events.collapse.listeners)`。

您可以做的另一件事是将处理程序附加到`onreset`事件，以查看是否`reset`调用了表单。附加监听器的代码：`formPanel.getForm().el.on('reset', function() { alert('reset'); });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-24T08:15:38.303

我尝试了很多方法来解决这个问题，但无论如何都不起作用。

最后，我查找了[Ext.panel.Panel](http://docs.sencha.com/extjs/6.2.1/classic/Ext.panel.Panel.html)的所有属性，找到了一个名为 的属性`collapseMode`。所以我添加`collapseMode:'header'`到面板中，其中的数据`htmleditor`不再丢失。

我的代码：

```
 xtype: 'panel',
                region: 'south',
                itemId: 'remarkWrap',
                height: 140,
                //style: 'margin-top:10px;',
                layout: 'fit',
                title: 'title',
                collapsible: true,
                plain: true,
                hideMode: 'offsets',
                resizable:{
                    handles:'n',
                    minHeight: 140,
                    maxHeight:500,
                    pinned:true,
                },
                titleCollapse : true,
                collapseMode:'header',
                items: [{
                    xtype: 'htmleditor',
                    itemId: 'remarkInput',
                    labelAlign: 'top',
                    inputAttrTpl: "spellcheck='false'",
                    readOnly : true
                }] 
```

# android - 创建数据库时出现 NullPointerException

> ID：14029737
> 
> 赞同：0
> 
> 时间：2012-12-25T10:20:33.983
> 
> 标签：android, sqlite

我正在创建一个 GPS 跟踪应用程序，我处于起步阶段，我已经使用 LocationManager 跟踪了纬度和经度，现在我要做的下一件事是将所有数据存储在数据库中，我已经创建了 Adapter 类并正在调用它来自 MainActivity 但在绑定上下文和打开数据库时收到 NullPointerException，请查看我的 Logcat 详细信息并建议我一个解决方案。

我在附近收到错误消息

```
dbAdapter = new LocationDbAdapter(this);
dbAdapter.open(); 
```

**错误日志：**

```
android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:234)
android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
om.example.androidtrackingapplication.LocationDbAdapter.open(LocationDbAdapter.java:78) 
```

我在下面附上了完整的 Logcat 文件，请检查并告诉我哪里出错了。

我将位置发送到适配器类，它将获取值并存储在表中。

当我获得 locationupdate 时，我正在调用数据库实例，当我单击 Locate 按钮时，它将调用 LocationManager 来获取 Location Update（这是我的应用程序崩溃的地方）。

**LocationDbAdapter.java**

```
 import android.content.ContentValues;
            import android.content.Context;
            import android.database.Cursor;
            import android.database.SQLException;
            import android.database.sqlite.SQLiteDatabase;
            import android.database.sqlite.SQLiteOpenHelper;
            import android.location.Location;
            import android.util.Log;

            public class LocationDbAdapter {

                public static final String KEY_NAME = "name";
                public static final String KEY_LATITUDE = "latitude";
                public static final String KEY_LONGITUDE = "longitude";
                public static final String KEY_ACCURACY = "accuracy";
                public static final String KEY_TIME = "time";
                public static final String KEY_ROWID = "_id";

                private static final String TAG = "LocationDbAdapter";
                private DatabaseHelper mDbHelper;
                private SQLiteDatabase mDb;

                private static final String DATABASE_CREATE =
                    "create table locations (_id integer primary key autoincrement, "
                    + "name text not null, latitude real not null, longitude real not null, accuracy integer not null, time integer not null);";

                private static final String DATABASE_NAME = "data";
                private static final String DATABASE_TABLE = "locations";
                private static final int DATABASE_VERSION = 4;

                private final Context mCtx;

                private static class DatabaseHelper extends SQLiteOpenHelper {

                    DatabaseHelper(Context context) {
                        super(context, DATABASE_NAME, null, DATABASE_VERSION);
                    }

                    @Override
                    public void onCreate(SQLiteDatabase db) {

                        db.execSQL(DATABASE_CREATE);
                    }

                    @Override
                    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                        Log.i(TAG, "Upgrading database from version " + oldVersion + " to "
                                + newVersion + ", which will destroy all old data");
                        db.execSQL("DROP TABLE IF EXISTS locations");
                        onCreate(db);
                    }
                }

                /**
                 * Constructor - takes the context to allow the database to be
                 * opened/created
                 * 
                 * @param ctx the Context within which to work
                 */
                public LocationDbAdapter(Context ctx) {
                    this.mCtx = ctx;

                }

                /**
                 * Open the notes database. If it cannot be opened, try to create a new
                 * instance of the database. If it cannot be created, throw an exception to
                 * signal the failure
                 * 
                 * @return this (self reference, allowing this to be chained in an
                 *         initialization call)
                 * @throws SQLException if the database could be neither opened or created
                 */
                public LocationDbAdapter open() throws SQLException {
                    mDbHelper = new DatabaseHelper(mCtx);
                    mDb = mDbHelper.getWritableDatabase();
                    return this;
                }

                public void close() {
                    mDbHelper.close();
                }

                /**
                 * Add new location. If the location is
                 * successfully created return the new rowId, otherwise return
                 * a -1 to indicate failure.
                 * 
                 * @param location
                 * @return rowId or -1 if failed
                 */
                public long addLocation(Location location) {
                    Log.i(TAG, "Writing new location:"+location.toString());
                    ContentValues contentValues = new ContentValues();
                    contentValues.put(KEY_NAME, location.getProvider());
                    contentValues.put(KEY_LATITUDE, location.getLatitude());
                    contentValues.put(KEY_LONGITUDE, location.getLongitude());
                    contentValues.put(KEY_ACCURACY, location.getAccuracy());
                    contentValues.put(KEY_TIME, location.getTime());

                    return mDb.insert(DATABASE_TABLE, null, contentValues);
                }

                public int clearDatabase() {
                    Log.i(TAG, "clearDatabase()");
                    return mDb.delete(DATABASE_TABLE, null, null);
                }

                public Cursor fetchAllLocations() {

                    return mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME, KEY_LATITUDE, KEY_LONGITUDE, KEY_ACCURACY,
                            KEY_TIME}, null, null, null, null, null);
                }
            } 
```

**MainActivity.java**

```
 package com.example.androidtrackingapplication;

        import java.io.BufferedReader;
        import java.io.IOException;
        import java.io.InputStream;
        import java.io.InputStreamReader;
        import java.util.Timer;
        import java.util.TimerTask;

        import org.apache.http.HttpResponse;
        import org.apache.http.client.HttpClient;
        import org.apache.http.client.methods.HttpPost;
        import org.apache.http.impl.client.DefaultHttpClient;

        import android.app.Activity;
        import android.app.Service;
        import android.content.Context;
        import android.content.Intent;
        import android.content.IntentFilter;
        import android.location.GpsStatus;
        import android.location.Location;
        import android.location.LocationListener;
        import android.location.LocationManager;
        import android.location.LocationProvider;
        import android.os.BatteryManager;
        import android.os.Bundle;
        import android.os.CountDownTimer;
        import android.os.IBinder;
        import android.util.Log;
        import android.view.View;
        import android.widget.Button;
        import android.widget.EditText;
        import android.widget.Toast;

        public class MainActivity extends Activity

        {
            LocationManager mlocManager ;
             LocationListener mlocListener ;
              Location loc;
            double lat;
            double  longitude;
             EditText Lat;
             EditText Long,battery,hitTime,intervalTime;
             int level = -1;
             static int i;
            Button Send,Reset,Locate,Close;     

            private LocationDbAdapter dbAdapter;
            Timer t;
            protected CountDownTimer waitTimer;

        /** Called when the activity is first created. */

        @Override

        public void onCreate(Bundle savedInstanceState)

        {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        Lat= (EditText) findViewById(R.id.editText1);
        Long=(EditText) findViewById(R.id.editText2);

        //hitTime= (EditText) findViewById(R.id.editText3);
        //intervalTime=(EditText) findViewById(R.id.editText4);

        Locate=(Button) findViewById(R.id.button1);
        Send= (Button) findViewById(R.id.button2);

        Close=(Button) findViewById(R.id.button3);

        Locate.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

            //    String hit=hitTime.getText().toString();
              //  int hit1= Integer.parseInt(hit);
               // System.out.println("Hit"+hit1);

                 Send.setEnabled(false);
                  Lat.setText(" ");
                   Long.setText(" ");

           /*  Enable the Gps    */

                  Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
               intent.putExtra("enabled", true);
               sendBroadcast(intent);

                     waitTimer = new CountDownTimer(60000,1000) {

                           public void onTick(long millisUntilFinished) {
                              i = i+1;
                                System.out.println("IN:"+i);

                                  mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
                                  mlocListener = new MyLocationListener();
                             loc = mlocManager.getLastKnownLocation( LocationManager.GPS_PROVIDER);

                            //      mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER,300000, 0, mlocListener);
                            //mlocManager.requestSingleUpdate(LocationManager.GPS_PROVIDER,mlocListener, null);

                           mlocManager.requestSingleUpdate(LocationManager.GPS_PROVIDER,mlocListener, null);
                           }

                           public void onFinish() {
                           System.out.println("Location not found");
                         Toast.makeText(getApplicationContext(), "Location Not Found ", Toast.LENGTH_LONG).show();

                         if(mlocManager!=null)
                         { 

                         }
                            Lat.setText(" ");
                       Long.setText(" ");

                      if(loc!=null)
                      {
                          Lat.setText(String.valueOf(loc.getLatitude()));
                          Long.setText(String.valueOf(loc.getLongitude()));
                      }
                      Toast.makeText(getApplicationContext(), "Last Location ",Toast.LENGTH_LONG).show();

                    Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
                       intent.putExtra("enabled", false);
                       sendBroadcast(intent);

                           }
                         }.start();

            }
        });

        Send.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

            // String lat1="15.012345";
            // String longitude1="75.012345";
           HttpClient httpClient = new DefaultHttpClient();

            String postURL = "";

            postURL = "http://bb.trackfleet.biz/android_gps/lat_long.php?lat="+lat+"&long="+longitude;

            HttpPost httpPost = new HttpPost(postURL);

            HttpResponse httpResponse = null;

            try
            {
                Toast.makeText(getApplicationContext(),"send", Toast.LENGTH_SHORT).show();
                httpResponse = httpClient.execute(httpPost); 

                String str = inputStreamToString(httpResponse.getEntity().getContent()).toString();

                Toast.makeText(getApplicationContext(), str, Toast.LENGTH_SHORT).show();
            }
            catch(Exception ex)
            {
                Toast.makeText(getApplicationContext(),"error", Toast.LENGTH_SHORT).show(); 

            }

            }
        });

        Close.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                if(mlocManager!=null)
                {
                    mlocManager.removeUpdates(mlocListener);
                   mlocManager=null;
                }

                Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
                   intent.putExtra("enabled", false);
                   sendBroadcast(intent);

        finish();   

            }
        });

        }

        private StringBuilder inputStreamToString(InputStream is) {
            String line = "";
            StringBuilder total = new StringBuilder();
            // Wrap a BufferedReader around the InputStream
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));
            // Read response until the end
            try {
                while ((line = rd.readLine()) != null) { 
                    total.append(line); 
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
            // Return full string
            return total;
        } 
```

**MyLocationListener 服务**

```
 public class MyLocationListener extends Service implements LocationListener

        {

            @Override
            public void onCreate() {

                dbAdapter = new LocationDbAdapter(this);
                dbAdapter.open();
            }

        @Override

        public void onLocationChanged(Location loc)

        {

        if(loc!=null)
        {
            dbAdapter = new LocationDbAdapter(this);
            dbAdapter.open();
            long id=dbAdapter.addLocation(loc);
            Toast.makeText(getApplicationContext(), "Added Data Sucessfully " +id ,Toast.LENGTH_SHORT).show();
        }   
        lat=loc.getLatitude();

        longitude=loc.getLongitude();

           waitTimer.cancel();
         String Text = "My current location is: " +

        "Latitud = " + loc.getLatitude() +

        "Longitud = " + loc.getLongitude();

        Lat.setText(String.valueOf(lat));
        Long.setText(String.valueOf(longitude));

        if((Lat.getText()!=null) && (Long.getText()!=null))
        {
              Send.setEnabled(true);

              Send.performClick();

        }

        }

        @Override

        public void onProviderDisabled(String provider)

        {

        Toast.makeText( getApplicationContext(),"Gps Disabled Pls Enable It",Toast.LENGTH_SHORT ).show();
        startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));

        }

        @Override

        public void onProviderEnabled(String provider)

        {

        Toast.makeText( getApplicationContext(),"Gps Enabled",Toast.LENGTH_SHORT).show();

        }

        @Override

        public void onStatusChanged(String provider, int status, Bundle extras)

        {

        }

        @Override
        public void onDestroy()
        {

            super.onDestroy();
            dbAdapter.close();
            mlocManager.removeUpdates(this);
        }
        @Override
        public IBinder onBind(Intent intent) {
            // TODO Auto-generated method stub
            return null;
        }
        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:36:08.233

如果您问我您的架构对于 sqlite 不正确，如果 sqlite 的“自动增量”是您需要使用的功能：

```
id INTEGER PRIMARY KEY 
```

你在那里的自动增量不应该在那里。

或者自动增量不起作用。请参阅[创建](http://www.sqlite.org/lang_createtable.html)文档

顺便说一句，如果您使用 INTEGERS 来保存坐标，而不是 float/double 等，则可以大大加快您的应用程序的速度。查看[我的这个答案，](https://stackoverflow.com/questions/1196415/what-datatype-to-use-when-storing-latitude-and-longitude-data-in-sql-databases/12479932#12479932)解释如何轻松使用整数。能够使用整数非常有用。（索引，内存缓存键等）

更新：在 sqlite2/3 上测试。适用于 sqlite3 但不适用于 sqlite2：

```
SQL error: near "autoincrement": syntax error 
```

因此，如果目标是 sqlite3 ，那么您就可以了。

# javascript - Crm 2011 从表单上的 DateTime 字段获取时间

> ID：14029741
> 
> 赞同：3
> 
> 时间：2012-12-25T10:21:19.293
> 
> 标签：javascript, forms, datetime, dynamics-crm-2011, crm

我无法从表单上的日期时间字段中获取小时和分钟部分。

```
var date = Xrm.Page.data.entity.attributes.get("createdon").getValue(); 
```

我可以对返回的对象使用 getDate()、getMonth() 和 GetFullYear() 方法，但我无法获取小时和分钟数据。日期对象显示“Tue Dec 25 11:47:44 UTC+0200 2012”，所以时间就在那里。获得小时/分钟的唯一方法是对该值进行一些丑陋的子字符串操作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T21:36:39.783

您可以在*Date*对象上使用*getHours*和*getMinutes 。*

 *```
var date = new Date();
var time = date.getHours() + ":" + date.getMinutes(); 
```

现在，您只需要将值替换为*日期*，因为在我的示例中它是当前时间点，并且您正在从字段中获取它。

* * *

您可能还需要考虑缩短语法。我现在不在电脑前（不是**那**台电脑，也就是说），但我相信你可以这样去。

```
var date = Xrm.Page.getAttribute("createdon").getValue(); 
```

太神奇了——不管 JavaScript 代码有多少。五分钟后，一切都从脑海中消失了。就像语法旨在抗记忆一样。:)

* * *

你**不**应该玩弄*substring*或*regex*。JavaScript 源代码往往是丑陋的，而且已经令人困惑。没有必要让它变得更糟，更难以理解。

至于正则表达式 - 程序员有一个问题要解决。所以他想——“我知道，我会使用*RegEx* ”。然后他有**两个**问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T12:18:23.703

```
var DateTimeFormatString ="hh:MM:ss";
     // Formats the date to CRM format
        function dateToCRMFormat(date) {
            return dateFormat(date, DateTimeFormatString );
        }

// Formats the date into a certain format
function dateFormat(date, format) {
    var f = "";

    try {
        f = f + format.replace(/dd|mm|yyyy|MM|hh|ss|ms|APM|\s|\/|\-|,|\./ig,
        function match() {
            switch (arguments[0]) {
                case "dd":
                    var dd = date.getDate();
                    return (dd < 10) ? "0" + dd : dd;
                case "mm":
                    var mm = date.getMonth() + 1;
                    return (mm < 10) ? "0" + mm : mm;
                case "yyyy": return date.getFullYear();
                case "hh":
                    var hh = date.getHours();
                    return (hh < 10) ? "0" + hh : hh;
                case "MM":
                    var MM = date.getMinutes();
                    return (MM < 10) ? "0" + MM : MM;
                case "ss":
                    var ss = date.getSeconds();
                    return (ss < 10) ? "0" + ss : ss;
                case "ms": return date.getMilliseconds();
                case "APM":
                    var apm = date.getHours();
                    return (apm < 12) ? "AM" : "PM";
                default: return arguments[0];
            }
        });
    }
    catch (err) {
    }

    return f;
} 
```

供测试用

```
var time= Xrm.Page.getAttribute("createdon").getValue();
 alert("Time: " + dateToCRMFormat(time)); 
```*

# wpf - WPF RichTextBox - 禁用编辑但保留光标

> ID：14029743
> 
> 赞同：4
> 
> 时间：2012-12-25T10:21:30.847
> 
> 标签：wpf, richtextbox

我有一个富文本框。我需要有可能禁用编辑，但我想保留光标：在单词之间移动，使用键盘选择一些单词等。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T10:27:52.750

试试这个`IsReadOnly`属性 - 这应该做你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-17T08:38:16.000

否则尝试richTextBox1.ReadOnly = true;

# javascript - 让 div 元素并排显示

> ID：14029749
> 
> 赞同：2
> 
> 时间：2012-12-25T10:21:59.130
> 
> 标签：javascript, jquery, html, css, draggable

我的设计有两个问题。

1.  `div`超出父元素宽度的元素被换行到下一行。（我希望它们在一条直线上）我尝试显示内联，块，内联块，没有运气

2.  我无法隐藏内容 div 之外的 div。我已经把溢出：隐藏，但还是有问题。

主要问题是，我需要拇指托（#thumb_hs）的总宽度来设置可拖动的限制。所以当我拖动时，它只会拖动到第一行 divs。

编辑：第一个问题解决了。感谢大卫托马斯。通过更改 javascript 参数解决了另一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:51:08.000

要强制不包装，您可以`white-space: nowrap;`在父元素上使用，但这需要将子元素`display`设置为`inline`or `inline-block`（使用[`float`将导致元素 wrap](http://jsfiddle.net/davidThomas/Rt46X/3/)）：

```
#container {
    white-space: nowrap;
    /* other stuff */
}

.contained {
    display: inline-block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Rt46X/1/)。

显然，添加`overflow-x: scroll;`到`#container`元素允许您滚动到其他元素（如果您想要优雅降级）：[JS Fiddle 演示](http://jsfiddle.net/davidThomas/Rt46X/2/)。

# publish-subscribe - 我如何读取键值对并订阅值更改 - 也就是最后值缓存？

> ID：14029752
> 
> 赞同：1
> 
> 时间：2012-12-25T10:23:05.580
> 
> 标签：publish-subscribe, zeromq

这里的用例是这样的：

*   我有一个数据/价值发布者
*   我有多个值消费者（或订阅者），当他们开始时需要读取/获取值，然后订阅后续更新

目标是让发布者和订阅者都只做“一件事”。

示例：发布者发布`outside.temperature=28`并且多个订阅者会对新信息做出反应，例如打开加热器，发送一条短信说“带上长裤”，并在某些显示器上更新一些图形。

我今天（正在工作）的是带有队列的 Apache ActiveMQ，任何订阅者都可以`query outside.temperature`并且让发布者（重新）发送它的最新值。回复被发送给发送查询的消费者（回复队列）。新值将发布到具有相同名称 ( `outside.temperature`) 的主题。每次订阅者（重新）启动时，都会发生这种情况：查询当前状态，订阅更新。

这一切似乎都过于复杂，因为订阅者必须知道如何做两件事：

*   知道如何请求一个值（队列和回复队列），即轮询
*   知道如何订阅未来值（主题），即订阅推送

出版商必须知道如何做两件事：

*   知道如何回复查询（队列），回答投票请求
*   知道如何发布新值（主题），推送新值

这里的目标是拥有一些中间件软件，它们将：

*   保留（并保留）键的最后一个已知值
*   向该密钥的所有订阅者发布更改，即 pubsub
*   将最新的已知值（作为推送）发送给新订阅者

这将降低发布者和订阅者的复杂性。

我一直在寻找 Redis 来解决这个问题，但 PUBSUB 功能只替换了上面示例中的主题，而不是在订阅者启动（和应答）时轮询当前值，即查询/队列部分。

我一直在寻找 ZooKeeper 和手表，虽然它看起来可以满足我的需求，但它过于复杂并且需要大量代码。

我一直在查看 ØMQ (ZeroMQ) 并看到了[Last Value Caching, LVC](http://zguide.zeromq.org/page%3aall#Last-Value-Caching)一词。这里的建议是在发布者和订阅者之间创建一个代理。

RabbitMQ 有 LVC 扩展，例如[https://github.com/simonmacmullen/rabbitmq-lvc-plugin](https://github.com/simonmacmullen/rabbitmq-lvc-plugin)

我的问题是，是否还有其他一些 FLOSS 产品可以使用内置的最后一个值缓存进行 pub-sub，而不需要添加自定义代理或插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:02:06.353

There's a couple of ways to do this over ZeroMQ; read this [http://zguide.zeromq.org/page:all#Last-Value-Caching](http://zguide.zeromq.org/page:all#Last-Value-Caching) for a simple pattern and then [http://zguide.zeromq.org/page:all#Reliable-Publish-Subscribe-Clone-Pattern](http://zguide.zeromq.org/page:all#Reliable-Publish-Subscribe-Clone-Pattern) is a more complex approach.

Note that both approaches use a piece in the middle; however you can quite trivially make the first LVC pattern work just in the publisher.

# css - CSS图像过渡

> ID：14029760
> 
> 赞同：3
> 
> 时间：2012-12-25T10:23:53.040
> 
> 标签：css, css-transitions

是否真的不可能让 CSS 识别图像 src 的变化并应用正确的过渡，而不会导致我在网上找到的 hack，例如将多个图像相互叠加或使用 src 和背景的组合？

这似乎是一种缺陷，因为图像是任何网站的主要元素之一（div、图像、文本）。我的问题是：真的不直接支持吗，如果不支持，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:43:58.957

有可能的。您可以创建 CSS 规则以通过某些属性的某些值来匹配元素。这是 CSS 选择器中很少使用的功能，但自 CSS 2.1 起就支持它，我什至用过一次 - 适用于所有浏览器，包括 IE7。您可以在此处阅读有关此内容的更多信息：http: [//www.w3.org/TR/CSS2/selector.html#attribute-selectors](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)

例子：

```
img[src='one.png'] { ... }
img[src='two.png'] { ... } 
```

现场演示：http: [//jsfiddle.net/dJJqf/](http://jsfiddle.net/dJJqf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:29:46.573

CSS 不能改变 DOM。所以不，你不能编辑 src 属性。

当然，您可以使用 JavaScript，或者使用`background-image`可以从 CSS 更改的 CSS 背景 ( )。

或者，在 HTML 中使用大量`<img>`标签，然后使用 CSS 来移动这些标签。

# java - 有多少对象有资格进行垃圾收集？

> ID：14029762
> 
> 赞同：7
> 
> 时间：2012-12-25T10:23:53.793
> 
> 标签：java, garbage-collection

```
1\.  public class Tahiti {
2\.      Tahiti t;
3\.      public static void main(String[] args) {
4\.          Tahiti t = new Tahiti();
5\.          Tahiti t2 = t.go(t);
6\.          t2 = null;
7\.          // more code here
8\.      }
9\.      Tahiti go(Tahiti t) {
10\.         Tahiti t1 = new Tahiti(); Tahiti t2 = new Tahiti();
11\.         t1.t = t2; t2.t = t1; t.t = t2;
12\.         return t1;
13\.     }
14\. } 
```

到达第 7 行时，有多少对象符合垃圾回收条件？

根据对此问题给出的答案，第 11 行没有符合 GC 条件的对象；但根据我的说法，至少有一个对象 t2 在第 6 行设置为指向 null，应该有资格进行垃圾收集。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T10:32:03.370

第 6 行的变量 t2 不是对该对象的唯一引用。有一个从 t 到对象 t2 的引用，它是在函数 go 中创建的，而对象 t2 又持有对 t1 的引用，它与函数 go 返回的对象相同。所以第 6 行只是减少了引用的数量，但仍然有对对象的实时引用。

编辑：让我们尝试更详细的解释，首先我修改了代码以使解释更容易。每行一个语句，变量名称不那么容易混淆 + 我用字母 A、B 和 C 标识了三个相关对象。

```
1\.  public class Tahiti {
2\.      Tahiti u;
3\.      public static void main(String[] args) {
4\.          Tahiti t = new Tahiti(); // object A
5\.          Tahiti t2 = t.go(t);
6\.          t2 = null;
7\.          // more code here
8\.      }
9\.      Tahiti go(Tahiti s) {
10\.         Tahiti s1 = new Tahiti(); // object B
11\.         Tahiti s2 = new Tahiti(); // object C
12\.         s1.u = s2;
13\.         s2.u = s1;
14\.         s.u = s2;
15\.         return s1;
16\.     }
17\. } 
```

在第 4 行：变量 t 被初始化以引用一个新对象。让我们称该对象本身为 A（它通常在 java 中没有名称，但为了便于解释，如果有名称会更容易）。

在第 5 行：t 被传递给函数 go 所以我们转到第 9 行

第 9 行：参数 s 引用了在第 4 行创建的对象 A

第 10 行：初始化变量 s1 以指向对象 B

第 11 行：初始化变量 s2 以引用对象 C

第 12 行：s1.u 设置为引用 s2，这意味着对象 B 获得对 C 的引用

第 13 行：s2.u 设置为引用 s1，因此对象 C 获取对 B 的引用

第 14 行：su 设置为引用 s2，这意味着对象 A 获取对 C 的引用注意 C 也有对 B 的引用，因此此时存在从 A 到 B 的链

第 15 行返回对象 B 并返回第 5 行

第 5 行：t2 设置为引用对象 B（B 现在被 t2 直接引用两次，一次是因为 t 引用对象 A，而对象 A 引用 C，而 C 引用 B）

第 6 行：引用 t2 设置为 null，因此 B 丢失了一个引用，但 t 仍然存在，指向 A 指 C 指 B

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T11:03:58.350

您可以只绘制一个表格，该表格在行之间映射，并在该行之后立即指向指向每个对象的访问路径列表，如下所示：

```
╔════════════╦═══════════════════════╦════════════════╦═══════════════════╗
║ After Line ║ Pointers to o1        ║ Pointers to o2 ║ Pointers to o3    ║
╠════════════╬═══════════════════════╬════════════════╬═══════════════════╣
║          3 ║ not allocated         ║ not allocated  ║ not allocated     ║
║          4 ║ main:t                ║ not allocated  ║ not allocated     ║
║          9 ║ main:t, go:this, go:t ║ not allocated  ║ not allocated     ║
║         10 ║ main:t, go:this, go:t ║ go:t1          ║ go:t2             ║
║         11 ║ main:t, go:this, go:t ║ go:t1, o3.t    ║ go:t2, o2.t, o1.t ║
║          5 ║ main:t                ║ main:t2, o3.t  ║ o2.t, o1.t        ║
║          6 ║ main:t                ║ o3.t           ║ o2.t, o1.t        ║
╚════════════╩═══════════════════════╩════════════════╩═══════════════════╝ 
```

和`o1`是实际分配的对象`o2`。`o3`可以很容易地计算出每个点可以回收多少对象；在这种情况下，在第 6 行`o1`可以从根访问之后，`o3`可以从 访问`o1`和从`o2`访问`o3`，因此无法回收任何对象。

作为旁注，我注意到您写了“但根据我的说法，至少有一个对象**t2**，...”。如果这是您需要解决的问题，我建议您摒弃通过指向对象的变量来命名对象的习惯；而是给每个对象一个虚构的 id，就像我在上面对 , 所做的那样`o<n>`，并将变量视为指向这些对象的指针而不是它们的名称。这是因为，就像指针和不同的名称一样，一个对象可能有多个或少于一个与之关联的变量，并且关联变量的列表可以随时更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T10:27:53.200

在第 5 行，您正在调用方法`Tahiti.go()`，因此程序从第 5 行跳转到第 10 行，并在 6 处到达 11。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T10:27:08.203

第 11 行在第 6 行之前执行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-06T08:43:53.290

堆堆栈图是确定哪些对象符合垃圾回收条件的最佳方法：

以下是上述代码的堆栈图：

# 堆

`1000x: TahitiObj: t:2000x`

`2000x: TahitiObj: 5000x`

`3000x: TahitiObj: t: 4000x`

`4000x: TahitiObj: 5000x`

`5000x: TahitiObj: t: 6000x`

`6000x: TahitiObj: 3000x`

# 堆

## Main_Stack

`args = null`

`t = 1000x`

`t2 = null`

虽然 Go_Stack 会在执行完成后从内存中移除。为了完整起见，我将其保留在这里。

## Go_Stack

`t = 1000x`

`t1 = 3000x`

`t2 = 5000x`

通过查看 Main_Stack 和 HEAP 可以观察到，我们可以直接或间接地访问所有对象。

因此，当代码执行到 side main 方法中的第 7 行时，没有对象有资格进行垃圾回收。

# jquery - Web 开发入门：cshtml 导致视图中的逻辑

> ID：14029765
> 
> 赞同：0
> 
> 时间：2012-12-25T10:24:04.740
> 
> 标签：jquery, asp.net, html, razor

cshtml 或 aspx 通常是一种不好的做法，因为它打开了在视图页面中编写逻辑的大门吗？如果您通过 Ajax/Jquery 直接向 Web 服务请求服务器端逻辑，那么纯 HTML 解决方案会不会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:27:55.270

在视图中编写视图逻辑没有任何问题。这就是它们的设计目的。使用纯 HTML 解决方案，您将无法构建动态站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:34:29.543

*cshtml 或 aspx 通常是一种不好的做法，因为它打开了在视图页面中编写逻辑的大门吗？*

是的，在 MVC 世界中，模型填充了数据（在应用业务逻辑之后），然后这些模型绑定到视图，在视图内编写逻辑的范围非常小。这也不是好的做法，因为没有分离/可重用范围。

*如果您通过 Ajax/Jquery 请求服务器端逻辑，纯 HTML 解决方案会不会更好？*

是的。这就是今天大多数网站都是混合的（ajax 和服务器）的原因，以提供更好的 UI 体验。

# python - Python imaplib 获取正文电子邮件 gmail

> ID：14029768
> 
> 赞同：14
> 
> 时间：2012-12-25T10:24:20.777
> 
> 标签：python, email, request, imap, imaplib

我[已经阅读了这篇](https://stackoverflow.com/questions/348630/how-can-i-download-all-emails-with-attachments-from-gmail?lq=1)文章并编写了这个脚本来获取某个邮箱中电子邮件的正文，该邮箱的标题以“$”开头并由某个发件人发送。

```
import email, getpass, imaplib, os

detach_dir = "F:\PYTHONPROJECTS" # where you will save attachments
user = raw_input("Enter your GMail username --> ")
pwd = getpass.getpass("Enter your password --> ")

# connect to the gmail imap server
m = imaplib.IMAP4_SSL("imap.gmail.com")
m.login(user, pwd)

m.select("PETROLEUM") # here you a can choose a mail box like INBOX instead
# use m.list() to get all the mailboxes

resp, items = m.search(None, '(FROM "EIA_eLists@eia.gov")')
items = items[0].split() # getting the mails id

my_msg = [] # store relevant msgs here in please
msg_cnt = 0
break_ = False
for emailid in items[::-1]:
    resp, data = m.fetch(emailid, "(RFC822)")
    if ( break_ ):
        break 
    for response_part in data:
      if isinstance(response_part, tuple):
          msg = email.message_from_string(response_part[1])
          varSubject = msg['subject']
          if varSubject[0] == '$':
              msg_cnt += 1
              my_msg.append(msg)
              print msg_cnt
              print email.message_from_string(response_part[1])
              if ( msg_cnt == 5 ):
                  break_ = True 
```

如果我打印`email.message_from_string(response_part[1])`，我可以看到它包含第一个信息（标题、从、到、日期...），即全文正文。但是，我无法取回尸体本身。`email.message_from_string(response_part[0])`打印邮件 IDS，并且`email.message_from_string(response_part[2])`超出范围。`email.message_from_string(response_part[1][0])`也没有这样做。

谢谢并恭祝安康。

更新

现在，我几乎可以拥有正文了。但是，它仍然被首先出现的信息声明所破坏。结果我得到

```
From nobody Tue Dec 25 11:42:58 2012

US=3D$4.030

EastCst=3D$4.036

NewEng=3D$4.205

CenAtl=3D$4.149

LwrAtl=3D$3.921

Midwst=3D$3.984

GulfCst=3D$3.945

RkyMt=3D$4.195

WCst=3D$4.187

CA=3D$4.268 
```

我想摆脱`From nobody Tue Dec 25 11:42:58 2012`哪些是信息。我知道我可以解析文本查找第一个相关行...我知道。

实现这一点的代码（插入我的第一个示例）是

```
 if varSubject[0] == '$':
      r, d = m.fetch(emailid, "(UID BODY[TEXT])")
      msg_cnt += 1
      my_msg.append(msg)
      print email.message_from_string(d[0][1]) 
```

你有更好的方法（没有信息字符串）？？？更多：现在获取日期的命令是什么？我知道我可以`varDate = msg['date']`在上面适合的地方做，但是如何获取 day-month-year ？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-08-03T12:52:14.040

我已经设法使用 Gmail 让它工作，它提取有用的位并将它们输出到文本文件：

```
import datetime
import email
import imaplib
import mailbox

EMAIL_ACCOUNT = "your@gmail.com"
PASSWORD = "your password"

mail = imaplib.IMAP4_SSL('imap.gmail.com')
mail.login(EMAIL_ACCOUNT, PASSWORD)
mail.list()
mail.select('inbox')
result, data = mail.uid('search', None, "UNSEEN") # (ALL/UNSEEN)
i = len(data[0].split())

for x in range(i):
    latest_email_uid = data[0].split()[x]
    result, email_data = mail.uid('fetch', latest_email_uid, '(RFC822)')
    # result, email_data = conn.store(num,'-FLAGS','\\Seen') 
    # this might work to set flag to seen, if it doesn't already
    raw_email = email_data[0][1]
    raw_email_string = raw_email.decode('utf-8')
    email_message = email.message_from_string(raw_email_string)

    # Header Details
    date_tuple = email.utils.parsedate_tz(email_message['Date'])
    if date_tuple:
        local_date = datetime.datetime.fromtimestamp(email.utils.mktime_tz(date_tuple))
        local_message_date = "%s" %(str(local_date.strftime("%a, %d %b %Y %H:%M:%S")))
    email_from = str(email.header.make_header(email.header.decode_header(email_message['From'])))
    email_to = str(email.header.make_header(email.header.decode_header(email_message['To'])))
    subject = str(email.header.make_header(email.header.decode_header(email_message['Subject'])))

    # Body details
    for part in email_message.walk():
        if part.get_content_type() == "text/plain":
            body = part.get_payload(decode=True)
            file_name = "email_" + str(x) + ".txt"
            output_file = open(file_name, 'w')
            output_file.write("From: %s\nTo: %s\nDate: %s\nSubject: %s\n\nBody: \n\n%s" %(email_from, email_to,local_message_date, subject, body.decode('utf-8')))
            output_file.close()
        else:
            continue 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T11:54:44.857

您可以通过执行以下任何操作来获取正文的内容

```
msg.as_string()
str(msg)
repr(msg) 
```

[http://docs.python.org/2.7/library/email.message.html#email.message.Message](http://docs.python.org/2.7/library/email.message.html#email.message.Message)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-29T05:47:37.283

```
from imap_tools import MailBox

# get all attachments from INBOX and save them to files
with MailBox('imap.my.ru').login('acc', 'pwd', 'INBOX') as mailbox:
    for msg in mailbox.fetch():
        print(msg.text)
        print(msg.html) 
```

**这将需要外部 lib**，但要简单得多。

[https://github.com/ikvk/imap_tools](https://github.com/ikvk/imap_tools)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-19T22:09:54.960

```
import datetime
import email
import imaplib
import mailbox
import re

EMAIL_ACCOUNT = "yourmail@yahoo.com"
PASSWORD = "password"
mail = imaplib.IMAP4_SSL('imap.mail.yahoo.com')
mail.login(EMAIL_ACCOUNT, PASSWORD)
mail.select('INBOX')
result, data = mail.search(None, '(FROM "Sender Email")','ALL')
result, data = mail.search(None, '(SUBJECT "Message")','ALL')
i = len(data[0].split())

if i == 1:
   latest_email_uid = data[0].split()[0]
   result, email_data = mail.uid('fetch', latest_email_uid, '(RFC822)')
   raw_email = email_data[0][1]
   raw_email_string = raw_email.decode('utf-8')
   email_message = email.message_from_string(raw_email_string)
   body = email_message.get_payload(decode=True)
   for part in email_message.walk():
        if part.get_content_type() == "text/plain":
           emailBody = part.get_payload(decode=True)
           print(emailBody)            
        else:
           continue
else:
  print('Email NOT ' + EMAIL_ACCOUNT  ) 
```

# ruby-on-rails - 为什么使用“grouped_collection_select”时没有方法错误？

> ID：14029770
> 
> 赞同：0
> 
> 时间：2012-12-25T10:24:43.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

当我为用户加载编辑页面时，它会显示此错误。为什么？

在我的模型中，我有诸如

*   用户（此模型有一个 UserProfile）
*   UserProfile（此模型属于用户，有一个国家和一个地区）
*   国家（这个模型属于UserProfile，有很多州）
*   县（该模型属于 Country 和 UserProfile）

**错误**

> # 未定义的方法“名称”

**_form.html.erb**

```
<%= f.fields_for :user_profile do |profile_form| %>
  <%= profile_form.label :country_id %><br />
  <%= profile_form.collection_select :country_id, Country.order(:name_en), :id, :name_en, include_blank: true %>

  <%= profile_form.label :prefecture_id, "State or Province" %><br />
  <%= profile_form.grouped_collection_select :prefecture_id, Country.order(:name_en), :prefectures, :name, :id, :name, include_blank: true %>
<% end %> 
```

**模型/国家.rb**

> has_many :都道府县

**模型/地区.rb**

> 归属地：国家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:39:42.483

尝试这个，

```
<%= profile_form.grouped_collection_select :prefecture_id,Country.order(:name_en),:prefectures, :name_en, :id, :name,include_blank: true %> 
```

# image - 用C语言提取图像的一部分

> ID：14029771
> 
> 赞同：0
> 
> 时间：2012-12-25T10:24:59.483
> 
> 标签：image, extract, crop

我正在做一个关于图像处理的项目。我需要先对输入图像（这是一个 .bmp 等文件）进行预处理。谁能帮我写一个C语言代码。我必须只提取具有数据而不是背景的图像部分。例如，我需要提取人签名的区域，而不是屏幕的整个白色背景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:27:38.817

我建议你检查[OpenCV](http://opencv.org/)。您将有权访问加载图像和执行许多图像处理操作的功能。

阅读他们的文档以获取有关如何删除白色背景的更多信息。一种方法是遍历所有图像像素，并找到包含所有非白色像素的图像的最小区域。

# javascript - 无法将 Rest JSON 数据绑定到 WinJS 中的 ListView 控件

> ID：14029772
> 
> 赞同：3
> 
> 时间：2012-12-25T10:25:04.693
> 
> 标签：javascript, windows-8, winjs

我面临一个问题。我正在尝试将 ListView WinJS 控件绑定到返回 JSON 对象的 RESTful 服务。

这是我的设计（default.html）

```
<body>
    <button id="btnExample">REST Service</button>

    <div id="divDisplayItems" data-win-control="WinJS.Binding.Template">
        <div>

            <table border="1">
                <tr>
                    <td><b>PersonId</b></td>
                    <td><b>PersonName</b></td>                 
                </tr>
                <tr>
                    <td><h4 data-win-bind="innerText: PersonId"></h4></td>  
                    <td><h4 data-win-bind="innerText: PersonName"></h4></td> 
                </tr>
            </table>            
        </div>
    </div> 
    <div 
        id="basicListView" 
        style="width:250px;height:500px"
        data-win-control="WinJS.UI.ListView" 
        data-win-options="{itemDataSource :SourceData.itemList.dataSource, itemTemplate: select('#divDisplayItems'),layout : {type: WinJS.UI.ListLayout}}"
        >
    </div>
</body> 
```

这是我的 default.js 代码

```
// For an introduction to the Blank template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232509
(function () {
    "use strict";

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;
    WinJS.strictProcessing();

    app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
                // TODO: This application has been newly launched. Initialize
                // your application here.
            } else {
                // TODO: This application has been reactivated from suspension.
                // Restore application state here.
            }
            args.setPromise(WinJS.UI.processAll());            
            document.getElementById("btnExample").addEventListener("click", JSonRecord, false);
        }
    };

    app.oncheckpoint = function (args) {
        // TODO: This application is about to be suspended. Save any state
        // that needs to persist across suspensions here. You might use the
        // WinJS.Application.sessionState object, which is automatically
        // saved and restored across suspension. If you need to complete an
        // asynchronous operation before your application is suspended, call
        // args.setPromise().
    };

    function JSonRecord(event) {

        WinJS
            .xhr(
                    { url: "URL/EmployeeList" }
                 )
            .then
                 (
                    function (response) {

                        var sourceData = JSON.parse(response.responseText);

                        var datalist = new WinJS.Binding.List(sourceData.EmployeeDetailsResult);

                        var dataMembers = { itemList: datalist };

                        WinJS.Namespace.define("SourceData", dataMembers);                       

                    }, function (error)
                    {
                        console.log(error);
                    }
                 );
    } 
    app.start();
})(); 
```

内涵是，每当“btnExample”被cliekd 时，ListView 应该被填充。该服务运行良好，我能够获得正确的数据。但是当我尝试加载页面时，它崩溃了。

如果我评论

```
"data-win-options="{itemDataSource :SourceData.itemList.dataSource, itemTemplate: select('#divDisplayItems'),layout : {type: WinJS.UI.ListLayout}}" 
```

至少页面正在加载。

有什么问题，如何将数据绑定到 ListView 控件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:01:34.343

您将**ListView**绑定到**SourceData**命名空间，该命名空间在单击按钮后才可用。因此，您试图在运行时绑定到未定义的值。您应该在 js 文件的顶部，在**激活**事件之前设置**SourceData**命名空间，并使用空的**Binding List**创建它。就像是...

 ****```
WinJS.Namespace.define("SourceData", {
   itemList: new WinJS.Binding.List([]);
}) 
```

在您的按钮单击句柄中，您可以将项目添加到现有列表或创建一个新列表并从头开始分配。

您可以在[30 Days](http://aka.ms/30Days)找到一些很棒的教程，尤其是在 IIRC 第 2 周。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T16:01:42.323

您正在崩溃，因为当您加载页面并且 ListView 尝试绑定时，您的列表不存在。在您对 Web 服务进行异步调用之前，它不存在。修复它所需要做的就是提前声明您的 WinJS.Binding.List （可能就在应用别名旁边的 app.onactivated 行上方）。然后，当您获取数据时，只需迭代结果并将它们推送到已经存在的列表中。像这样...

```
sourceData.EmployeeDetailsResult.forEach(function(r) {
    yourList.push(r);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T02:43:50.743

Default.js 中的 2 处更改

**第一次改变**

var app = WinJS.Application;

/* 插入行

```
WinJS.Namespace.define("SourceData", 
    {
        itemList: new WinJS.Binding.List([])
    }) 
```

*/

var 激活 = Windows.ApplicationModel.Activation;

**第二次改变**

```
function (response) 
{

  var sourceData = JSON.parse(response.responseText);                      
  var datalist = new WinJS.Binding.List(sourceData.EmployeeDetailsResult);

 <-- basicListView is the Name of the div where you are binding the datasource -->
  basicListView.winControl.itemDataSource = datalist.dataSource;                      

} 
```

观看[此](http://vimeo.com/47884415)视频以更好地理解。

希望这可以帮助****

# java - 使用 Java 从 Textfile 读取数据

> ID：14029776
> 
> 赞同：-2
> 
> 时间：2012-12-25T10:25:57.047
> 
> 标签：java, file-io, readfile

我在创建以特定方式读取文本文件的程序时遇到问题。
具有以下格式数据的文本文件。

```
Id|Name|City  
1|Mack|London 
```

还有另一个包含姓名和年龄的文本文件，

```
Name|Age  
Mack|31 
```

现在我想找出*城市是 London 并且年龄是 31 的*所有数据。

如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:38:24.593

我不明白你为什么不使用数据库。您使用的文件、分隔符等，它们是创建数据库的主要原因。你问的是一个简单的 JOIN 操作。如果你坚持使用文件而不是数据库，你需要一个用 SQL 语言预定义的长算法来执行该操作。

# ant - 是否有任何 Ant 功能可以将类路径依赖项复制到 WEB-INF/lib？

> ID：14029777
> 
> 赞同：0
> 
> 时间：2012-12-25T10:25:58.990
> 
> 标签：ant

我不能影响将类路径依赖项复制到 WEB-INF/lib 类别的过程：没有复制这些 jar 的特殊 ANT 任务（至少，我找不到任何与“WEB-INF/lib”相关的“复制”任务string 作为 PATH 参数），但它们出现在项目构建之后。如何影响此程序？基本上，我需要排除 JAXB jar 以避免依赖冲突。同时我在编译时需要这个 jars，所以我不能删除它们。也许，使用“删除”任务手动擦除这些罐子更容易？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:21:31.100

您所苦苦挣扎的是多类路径管理。在典型的构建中，至少有 4 种类型的类路径：

*   **compile**：您的代码直接调用的类
*   **runtime**：您的代码通过其他类间接调用的类
*   **提供**：您需要编译的类，但其实现将由目标平台提供
*   **test**：测试代码时需要的其他类（如junit），但最终应用程序未附带这些类

正是[Maven](http://maven.apache.org/)构建工具正式识别了这些常见的类路径，并提供了一个依赖管理系统，用于在构建过程中解析和填充类路径。

坏消息是 ANT 早于[Maven](http://maven.apache.org/)，因此将类路径管理完全留给了程序员……通常这是通过将 jar 放入不同的目录或在构建逻辑中使用复杂的文件集来完成的。

好消息是有一个名为[ivy](http://ant.apache.org/ivy/)的 ANT 插件，它执行类似 Maven 的依赖管理。值得学习，尤其是当您使用开源库（现在越来越多地使用 Maven）进行大量编程时。

# 示例（没有常春藤）

构成各个类路径的文件必须在构建的顶部进行管理。显然这些文件必须单独下载到“lib”目录中。随着文件数量的增加，这种方法变得笨拙。

```
<project name="demo" default="build">

    <!-- 
    ================
    File collections 
    ================
    -->
    <fileset dir="lib" id="compile.files">
        <include name="*.jar"/>
        <exclude name="slf4j-log4j12.jar"/>
        <exclude name="log4j.jar"/>
        <exclude name="junit.jar"/>
        <exclude name="hamcrest-core.jar"/>
    </fileset>

    <fileset dir="lib" id="runtime.files">
        <include name="*.jar"/>
        <exclude name="junit.jar"/>
        <exclude name="hamcrest-core.jar"/>
    </fileset>

    <fileset dir="lib" id="test.files">
        <include name="*.jar"/>
    </fileset>

    <!--
    ===============
    Compile targets
    ===============
    -->
    ..
    ..

    <target name="compile" depends="init,resolve, resources" description="Compile code">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" includeantruntime="false" debug="true">
            <classpath>
                <fileset refid="compile.files"/>
            </classpath>
        </javac>
    </target>

    <!--
    ===============
    Distribution targets
    ===============
    -->
    ..
    ..

    <target name="package" depends="test" description="Create the WAR file">
        <copy todir="build/lib">
            <fileset refid="runtime.files"/>
        </copy>

        <war destfile="${war.file}" webxml="${resources.dir}/web.xml">
            <fileset dir="${resources.dir}" excludes="web.xml"/>
            <lib dir="${build.dir}/lib"/>
        </war>
    </target> 
```

# 示例（使用常春藤）

对常春藤及其任务的高级介绍。请参阅下面的“检索”常春藤任务，它提供了您正在寻找的功能。

## 构建.xml

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <!--
    ===========
    Build setup
    ===========
    -->
    <target name="bootstrap" description="Install ivy">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get src="http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.2.0/ivy-2.2.0.jar"
             dest="${user.home}/.ant/lib/ivy.jar"/>
    </target>

    <!--
    ============================
    Resolve project dependencies
    ============================
    -->
    <target name="resolve" description="Use ivy to resolve classpaths">
        <ivy:resolve/>

        <ivy:report todir='${ivy.reports.dir}' graph='false' xml='false'/>

        <ivy:cachepath pathid="compile.path" conf="compile"/>
        <ivy:cachepath pathid="runtime.path" conf="runtime"/>
        <ivy:cachepath pathid="test.path"    conf="test"/>
    </target>

    <!--
    ===============
    Compile targets
    ===============
    -->
    ..
    ..

    <target name="compile" depends="init,resolve, resources" description="Compile code">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" includeantruntime="false" debug="true" classpathref="compile.path"/>
    </target>

    <!--
    ===============
    Distribution targets
    ===============
    -->
    ..
    ..

    <target name="package" depends="test" description="Create the WAR file">
        <ivy:retrieve pattern="${build.dir}/lib/[artifact].[ext]" conf="runtime"/>

        <war destfile="${war.file}" webxml="${resources.dir}/web.xml">
            <fileset dir="${resources.dir}" excludes="web.xml"/>
            <lib dir="${build.dir}/lib"/>
        </war>
    </target> 
```

**笔记**

*   “bootstrap”目标旨在安装 ivy（它没有与 ANT 核心打包）
*   “cachepath”任务用于创建自定义 ANT 路径
*   “检索”任务使用运行时所需的 jars 填充 WAR 文件的 WEB-INF/lib 目录（由 ivy 配置管理）

## 常春藤.xml

该文件列出了您项目的依赖项。它使用配置在逻辑上将 jar 组合在一起，并启用 ivy “cachpath” 任务以在您的构建中创建匹配的类路径。最后，在构建过程中下载并缓存了第 3 方 jar。这非常方便，这意味着您可以减小项目的大小。

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
        <conf name="runtime" description="Additional run-time dependencies" extends="compile"/>
        <conf name="test"    description="Required for test only" extends="runtime"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.7.2" conf="compile->default"/>

        <!-- runtime dependencies -->
        <dependency org="org.slf4j" name="slf4j-log4j12" rev="1.7.2" conf="runtime->default"/>

        <!-- test dependencies -->
        <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>
    </dependencies>

</ivy-module> 
```

# naming - 函数命名：WordCount() 还是 CountWords()？

> ID：14029784
> 
> 赞同：0
> 
> 时间：2012-12-25T10:27:09.457
> 
> 标签：naming

在大多数情况下，我们在命名函数时将动词放在名词之前，这样可以清楚地说明，例如`OpenFile()`or `CloseConnection()`。但是有些动词也是名词，所以我们可以看到`WordCount()`or `SpellCheck()`，等等。

我更喜欢`CountWords()`将谓词放在对象之前，这样可以提供与`GetXXX()`,`SetXXX()`和一致的外观`OpenXXX()`。

你更倾向哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:30:16.590

我更喜欢`countWords()`. 对我来说其他选择是`getWordCount()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:37:30.030

我喜欢 getWordCount() 除了动作之外，我喜欢在函数前面加上与调用者相关的函数的实际动词。setProperty()、getWords() [返回实际的单词列表]、createWordList() 等。

# fpdf - FPDF 打印方向

> ID：14029795
> 
> 赞同：0
> 
> 时间：2012-12-25T10:28:41.830
> 
> 标签：fpdf

我将使用 FPDF 创建一个 PDF 信封/标签文件（大小为 220 x 110 毫米）。我知道如何从纵向定位到横向。

```
$pdf = new FPDF('L','mm',array(110,220));
$pdf->AddPage('L'); 
```

在我的屏幕上，我会看到一个横向的信封，但是当我打印 PDF 时，它应该以纵向打印，因为信封是纵向送入的。

谁能告诉我该怎么做？

如果我只能定位字体也可以。使屏幕显示纵向。我知道这不是一个漂亮的解决方案，但如果它有效，那就没问题了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-25T15:24:09.510

如果要水平打印，请添加行

```
$pdf=new FPDF();
$pdf->AddPage('O'); 
```

如果要垂直打印，请添加行

```
$pdf=new FPDF();
$pdf->AddPage(); 
```

# php - 如何在php中使用父类的数据库对象

> ID：14029810
> 
> 赞同：0
> 
> 时间：2012-12-25T10:30:29.577
> 
> 标签：php, inheritance

我有以下代码

```
class Application
{
    protected $db;
    public function getDBChange(database $db)
        {
            $this->db =& $db;
                $this->update($db);
        }
protected function update($db)
    {
        $this->db=& $db;
        echo "\nServer - update- IN";
        $SQL = "UPDATE `version` SET app_ver='1.0.6'";

        if (!$this->db->query($SQL))
        {
            echo "\nDatabase Error.";
        }
        echo "\nServer - update- OUT";
    }
} 
```

它可以正常工作，但是当我从子类调用此更新函数时，子类会出错，如下所示

```
class DemoApplication extends Application
{
    callParent()
    {
        $this->update($this->db);
    }
} 
```

当我使用这种方式时，它会给出错误`Fatal error: Call to a member function query() on a non-object in`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:37:03.507

为什么要传递`$this->db`给同一`$this`上下文中的方法？为什么不只设置`$this->db`一个子类然后调用`$this->update`？由于它们都是在父类中定义的，因此这样做应该没有问题。至于错误本身：您尝试使用外部变量的地址分配来设置私有成员，因此稍后可以通过您想要私有成员地址的变量访问对象的私有成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:39:02.470

那是因为`$db`没有`query()`方法。实际上是`$this->db`设置和具有`query()`方法的对象吗？

做一些调试：

```
var_dump($this->db); 
```

# jquery - jquery datepicker 上一个和下一个按钮

> ID：14029811
> 
> 赞同：0
> 
> 时间：2012-12-25T10:30:35.020
> 
> 标签：jquery, jquery-ui, datepicker

> **可能重复：**
> [jQuery datepicker next/prev images](https://stackoverflow.com/questions/11436124/jquery-datepicker-next-prev-images)

我正在使用 jquery datepicker ui 插件 1.9.2

我有`prev.png`图片`next.png`，请告诉如何使这个按钮作为上一个和下一个按钮的背景图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:16:32.817

我是这样使用的：

```
    .ui-datepicker .ui-datepicker-prev {
        背景：url（“../images/next-previous.png”）无重复滚动-2px中心透明；
    }

    .ui-datepicker .ui-datepicker-next {
        背景： url("../images/next-previous.png") 无重复滚动 -18px -2px 透明；
        右：2px；
    }

```

# javascript - 从 getElementsByClassName 获取值

> ID：14029813
> 
> 赞同：-3
> 
> 时间：2012-12-25T10:30:47.273
> 
> 标签：javascript, jquery, dom

我正在尝试从数组中获取值：我有这个 div：

```
<div class="wex">
    <p>Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit  amet orci. Aenean dignissim pellentesque felis.</p>
    <p>Vestibulum volutpat, lacus a ultrices sagittis,</p>
    <ul>
      <li>Lacus a ultrices sagittis</li>
      <li>Democratis</li>
    </ul>
</div> 
```

我使用此代码按类名获取 div：

```
var xx = document.getElementsByClassName("wex");
            var $boxes = $(xx);
            $container.prepend($boxes).masonry('reload'); 
```

这行得通，但有一个转折。我只收到来自 arrau 的文本。未渲​​染 Div、ul 和 P 元素。

我需要按原样控制元素。我将有一个隐藏的 div，其中包含许多不同类名的元素，其中一些将具有相同的类名。我将需要根据标准找到它们并在 Masonry 中显示它们，但是我只得到文本。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-25T10:42:31.050

如果你使用*jquery*

```
$('.classname') 
```

[**在此处**](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll "querySelectAll()quot;")阅读有关 querySelectAll的更多信息[](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll "querySelectAll()";")

# python - 无法实现有序模型

> ID：14029816
> 
> 赞同：0
> 
> 时间：2012-12-25T10:31:21.140
> 
> 标签：python, django

我正在尝试从这里实现orderedmodel：[https ://github.com/kirelagin/django-orderedmodel](https://github.com/kirelagin/django-orderedmodel)

但它因 DatabaseError 而失败`Exception Value: no such column: qrgame_place.order`

文档没有说明模型应该包含该字段`order`，所以我想父类应该实现该字段？[编辑：是的，它是。试过...]

以下是 django 文件中的一些重要片段：

```
# models.py

import hashlib
import random
from django.db import models
from orderedmodel import OrderedModel

class Place(OrderedModel):
    name = models.CharField(max_length=100)
    clue = models.CharField(max_length=300)
    code = models.CharField(max_length=7, editable=False)

    def __unicode__(self):
        return self.name

    def save(self):
        # Need a secret identifier for url. Using a hashed name (which
        # is also secret until found. So no need to obscure more)
        if not self.id:
            hashsrc = self.name.encode('utf-8')
            self.code = unicode(hashlib.sha1(hashsrc).hexdigest()[:7])
        super(Place, self).save()

# admin.py

from django.contrib import admin
from qrgame.models import Place
from orderedmodel import OrderedModelAdmin

class PlaceAdmin(OrderedModelAdmin):
    list_display = ['name', 'clue', 'reorder']

admin.site.register(Place, PlaceAdmin)

# settings.py

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'orderedmodel',
    'qrgame',
) 
```

我`python manage.py syncdb`在实现这个之后就跑了。

知道有什么问题吗？（Django 版本为 (1, 4, 1, 'final', 0)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T12:26:46.943

`syncdb`目前无法更改现有表。您可以执行以下操作：

*   手动删除表然后运行`syncdb`
*   运行`manage.py reset qrgame`，但 qrgame 应用程序的所有数据都将丢失
*   使用任何现有的 django db 迁移解决方案，例如[South](http://south.aeracode.org/)
*   手动向表中添加列（提示：`manage.py dbshell`将为您提供 db REPL。您可以从`manage.py sqlall qrgame`
*   [dumpdata](https://docs.djangoproject.com/en/1.4/ref/django-admin/#dumpdata-appname-appname-appname-model)和[loaddata](https://docs.djangoproject.com/en/1.4/ref/django-admin/#loaddata-fixture-fixture)命令有助于在模式更改之间保存和恢复现有数据

# php - Error in SQL syntax

> ID：14029818
> 
> 赞同：1
> 
> 时间：2012-12-25T10:31:43.387
> 
> 标签：php, mysqli

When using the below command

```
$query=$comm->prepare("DELETE FROM ? WHERE id = ?"); 
```

I am receiving the following error

> You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '? WHERE id = ?' at line 1

if i remove ? and replace it with table name the code is working properly. Please Help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:34:22.367

Table names cannot be parametrized. Since you supply the table name, and not the user (*right?*), it should be safe to concatenate/interpolate normally.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T10:34:27.203

`?` is used for parameters, which can change. Why are you using `?` for the table name? It remains constant.

# php - zf2 表单和对象绑定，不清除未传递的值

> ID：14029821
> 
> 赞同：4
> 
> 时间：2012-12-25T10:32:13.183
> 
> 标签：php, zend-form, zend-framework2

我已经阅读了 Zend-Framework 2 中 Form-Component 的教程/参考，也许我以某种方式错过了它，所以我在这里问。

我有一个对象被调用`Node`并将它绑定到一个表单。我正在使用`Zend\Stdlib\Hydrator\ArraySerializable`-Standard-Hydrator。所以我的`Node`-object 有两种方法`exchangeArray()`和`getArrayCopy()`这样的：

```
class Node
{
    public function exchangeArray($data)
    {
        // Standard-Felder
        $this->node_id        = (isset($data['node_id']))   ? $data['node_id']   : null;
        $this->node_name      = (isset($data['node_name'])) ? $data['node_name'] : null;
        $this->node_body      = (isset($data['node_body'])) ? $data['node_body'] : null;
        $this->node_date      = (isset($data['node_date'])) ? $data['node_date'] : null;
        $this->node_image     = (isset($data['node_image'])) ? $data['node_image'] : null;
        $this->node_public    = (isset($data['node_public'])) ? $data['node_public'] : null;
        $this->node_type      = (isset($data['node_type'])) ? $data['node_type']:null;
        $this->node_route      = (isset($data['node_route'])) ? $data['node_route']:null;
    }

    public function getArrayCopy()
    {
        return get_object_vars($this);
    }
} 
```

在我的控制器中，我有一个`editAction()`. 在那里我想修改这个`Node`对象的值。所以我正在使用`bind`我的表单的 - 方法。我的表单只有字段来修改`node_name`和`node_body`- 属性。在验证表单并在提交表单后转储`Node`-object 之后，`node_name`和`node_body`-properties 现在包含来自提交表单的值。然而，所有其他字段现在都是空的，即使它们之前包含初始值。

```
class AdminController extends AbstractActionController
{
    public function editAction()
    {
        // ... more stuff here (getting Node, etc)             

        // Get Form
        $form = $this->_getForm(); // return a \Zend\Form instance
        $form->bind($node); // This is the Node-Object; It contains values for every property

        if(true === $this->request->isPost())
        {
            $data = $this->request->getPost();
            $form->setData($data);

            // Check if form is valid
            if(true === $form->isValid())
            {
                // Dumping here....
                // Here the Node-object only contains values for node_name and node_body all other properties are empty
                echo'<pre>';print_r($node);echo'</pre>';exit;
            }
        }

        // View
        return array(
            'form' => $form,
            'node' => $node,
            'nodetype' => $nodetype
        );
    }
} 
```

我只想覆盖来自表单 (`node_name`和`node_body`) 而不是其他的值。他们应该保持不变。

我认为一个可能的解决方案是将其他属性作为隐藏字段提供给表单，但是我不想这样做。

是否有可能不覆盖表单中不存在的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T22:21:24.387

我重新检查了 \Zend\Form 的代码，老实说，我只是猜到了如何解决我的问题。

我唯一改变的是Hydrator。似乎`Zend\Stdlib\Hydrator\ArraySerializable`不适合我的情况。因为我的`Node`-Object 是一个对象而不是一个数组，所以我检查了其他可用的水合器。我找到了`Zend\Stdlib\Hydrator\ObjectProperty`-hydrator。它完美地工作。只有表单中可用的字段才会填充到绑定对象中。这正是我所需要的。似乎`ArraySerializable`-hydrator 重置了对象属性，因为它调用`exchangeArray`了绑定对象 ( `Node`) 的 - 方法。在这种方法中，我将未给定的字段设置为`null`（请参阅我的问题中的代码）。另一种方法可能是更改`exchangeArray`- 方法，以便它仅在值尚不可用时设置值。

所以代码中的解决方案很简单：

```
$form = $this->_getForm();
$form->setHydrator(new \Zend\Stdlib\Hydrator\ObjectProperty()); // Change default hydrator 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T09:10:20.977

类 form.php 中有一个 bug，在 bindvalues 方法中没有初始化过滤器，只需添加行**$filter->setData($this->data);**

包含该行后应该是这样的

```
public function bindValues(array $values = array())
{
    if (!is_object($this->object)) {
        return;
    }
    if (!$this->hasValidated() && !empty($values)) {
        $this->setData($values);
        if (!$this->isValid()) {
            return;
        }
    } elseif (!$this->isValid) {
        return;
    }

    $filter = $this->getInputFilter();
    $filter->setData($this->data);          //added to fix binding empty data
    switch ($this->bindAs) {
        case FormInterface::VALUES_RAW:
            $data = $filter->getRawValues();
            break;
        case FormInterface::VALUES_NORMALIZED:
        default:
            $data = $filter->getValues();
            break;
    }

    $data = $this->prepareBindData($data, $this->data);

    // If there is a base fieldset, only hydrate beginning from the base fieldset
    if ($this->baseFieldset !== null) {
        $data = $data[$this->baseFieldset->getName()];
        $this->object = $this->baseFieldset->bindValues($data);
    } else {
        $this->object = parent::bindValues($data);
    }
} 
```

珍贵的是我的 zf2.0.6 库中的第 282 行

这将解决您的问题，这只发生在绑定对象的情况下

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-09T15:38:47.043

我遇到了同样的问题，但 Raj 的解决方案不是正确的方法。这不是一个错误，因为在没有 Raj 的“修复”的情况下，代码仍然相似，添加以下行：

```
$filter->setData($this->data); 
```

这里的主要问题是当您将对象绑定到表单时，输入过滤器不会存储在 Form 对象中。但每次都从绑定对象调用。

```
public function getInputFilter()
    ...
    $this->object->getInputFilter();
    ...
} 
```

我的问题是每次调用函数 getInputFilter 时都会创建一个新的 InputFilter 对象。所以我将其更正为如下所示：

```
protected $filter;
...
public function getInputFilter {
    if (!isset($this->filter)) {
        $this->filter = new InputFilter();
        ...
    }
    return $this->filter;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T10:15:21.817

我今天遇到了同样的问题，但 Raj 建议的修复方法不起作用。我正在使用最新版本的 ZF2（在撰写本文时），所以我对它不起作用并不感到惊讶。

由于我的属性保存在数组中，因此无法更改为另一个 Hydrator。ObjectProperty 和 ClassMethods 水合器都依赖于实际声明的属性（ObjectProperty 使用**object_get_vars**和 ClassMethods 使用**property_exists**）。我不想创建自己的 Hydrator（懒惰！）。

相反，我坚持使用 ArraySerializable 水合器并稍微改变了我的 exchangeArray() 方法。

最初我有：

```
public function exchangeArray(array $data)
{
    $newData = [];
    foreach($data as $property=>$value)
    {
        if($this->has($property))
        {
            $newData[$property] = $value;
        }
    }
    $this->data = $newData;
} 
```

这在大多数情况下都可以正常工作，但正如您所见，它会清除 $this->data 中的所有现有数据。

我对其进行了如下调整：

```
public function exchangeArray(array $data)
{
    $newData = [];
    foreach($data as $property=>$value)
    {
        if($this->has($property))
        {
            $newData[$property] = $value;
        }
    }
    //$this->data = $newData; I changed this line...
    //to...
    $this->data = array_merge($this->data, $newData);
} 
```

这将保留 $this->data 中的任何现有键，如果它们从传入的新数据中丢失。这种方法的唯一缺点是我不能再使用 exchangeArray() 来覆盖 $this->data 中保存的所有内容。在我的项目中，这种方法是一次性的，所以它不是一个大问题。此外，在任何情况下都可能首选新的**replaceAllData()**或**overwrite()**方法，如果没有其他原因，只是很明显它的作用。

# php - .html 文件中的 PHP 标签在 WebMatrix 中不起作用

> ID：14029824
> 
> 赞同：1
> 
> 时间：2012-12-25T10:33:35.877
> 
> 标签：php, html, file, tags, webmatrix

我一直在学习 Web 开发，我正在学习的书是在 html 文件中使用 php 标签，但它们对我不起作用，这是我的标题页：

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <title><?php echo $page_title; ?></title>
    <style type="text/css" media="all">@import "./includes/layout.css";</style>
</head>
<body>
    <a href="index.php" class="logo"> <img src="Includes/Images/NameIconSplash.png" /></a>
    <div id="wrapper">
        <div id="content">
            <div id="news">
                <div id="nav">
                    <ul>
                        // Tags don't work here
                        <?php
                            if ( (isset($_COOKIE['user_id'])) && (!strpos($_SERVER['PHP_SELF'], 'logout.php')) ) 
                            {
                                echo '<li><a href="logout.php">                                           Logout</a></li>'
                            } 
                            else 
                            {
                                echo '<li><a href="login.php">                                            Login</a></li>'
                                echo '<li><a href="register.php">                                         Register</a></li>'
                            }
                        ?>

                    </ul>
                </div> 
```

php 代码只是普通的黑色文本，但它可以识别 php 标记中的 html 代码。有人知道为什么它不认识他们吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:39:46.843

请将文件扩展名从 .html 更改为 .php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:41:42.247

Web 服务器配置为通过查看扩展名来检测文件类型。默认情况下，它将通过 PHP 解释器路由 .php 文件，而 .html 文件将直接提供给最终用户。您可以通过服务器的配置文件或单个 Web 目录的本地 .htaccess 文件来配置此行为。

```
RemoveHandler .html .htm
AddType application/x-httpd-php .php .htm .html 
```

如果您真的不想将文件另存为`.php`. 或者用 .php 保存你的文件就可以了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T10:42:38.460

如果要使用 php 代码，则必须使用 .php 扩展名，因此将扩展名更改为 .php。

# javascript - 如何在占位符中动态添加用户控件而不删除占位符中添加的所有控件？

> ID：14029827
> 
> 赞同：1
> 
> 时间：2012-12-25T10:34:08.810
> 
> 标签：javascript, asp.net, c#-4.0

我已经创建了用户控件并在页面上注册了所有用户控件。在运行时，我可以在占位符中添加用户控件并使用它，但是当添加新用户控件时，旧控件的所有更改都将被删除，并且所有用户控件都是从首字母添加的.

有什么方法可以添加用户控件，然后所有旧用户控件都保留在占位符中的更改，并且新控件将添加到其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:35:03.023

您可以使用[**Add**](http://msdn.microsoft.com/en-us/library/system.web.ui.controlcollection.add.aspx)或[**AddAt**](http://msdn.microsoft.com/en-us/library/system.web.ui.controlcollection.addat.aspx)方法在占位符中添加控件。

```
YourPlaceHoderID.Controls.Add(yourcontrolObject); 
```

或者

```
YourPlaceHoderID.Controls.AddAt(index, yourcontrolObject); 
```

# java - 删除已删除源代码文件的问题

> ID：14029828
> 
> 赞同：1
> 
> 时间：2012-12-25T10:34:16.167
> 
> 标签：java, static-analysis, fortify

是否可以从现在删除的文件中删除（而不是标记`removed`）问题？

我尝试在扫描时从项目翻译中排除文件，但没有帮助。现在，当这些文件被删除时，我不想在 Fortify 项目中看到它们的问题。

顺便说一句，我使用的是 HP Fortify 3.70。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:11:09.293

我相信最佳实践会说：

1.  适当的审计标签
2.  添加评论说他们已被删除
3.  抑制漏洞。

您可以通过“分组依据”源文件、多选，然后一次性标记/注释/抑制来快速完成此操作。

实际上删除漏洞会破坏历史审计线索。

# mysql - 从存储为 varchar 的时间戳中获取时间

> ID：14029833
> 
> 赞同：1
> 
> 时间：2012-12-25T10:34:27.440
> 
> 标签：mysql, sql, datetime, phpmyadmin

我有`varchar(20)`时间戳`'01-11-2012 11:36:53.122'`

如果我只得到日期

```
SELECT STR_TO_DATE("01-11-2012 11:36:53.122", '%d-%m-%Y') 
```

它给出了这个输出：`"2012-11-01"`。

但由此

```
SELECT STR_TO_DATE("01-11-2012 11:36:53.122", '%H:%i:%s') 
```

它给出了输出`"null"`而不是`11:36:53`.

什么是只获取时间的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T10:39:54.170

试试这个

```
DATE_FORMAT(STR_TO_DATE(`column`, '%d-%m-%Y %H:%i:%s'), '%H:%i:%s') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/4e800/4)

其他来源，

*   [STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)
*   [日期格式](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T10:40:54.213

```
SELECT date_format(STR_TO_DATE("01-11-2012 11:36:53.122", '%d-%m-%Y %H:%i:%s.%f'), '%H:%i:%s') 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/5226)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T10:58:38.763

将您的字段格式更改为`datetime`.

这是存储日期时间值的唯一正确方法。

# sql - 如何在sql server的标量函数中传递列名

> ID：14029838
> 
> 赞同：-2
> 
> 时间：2012-12-25T10:34:58.117
> 
> 标签：sql, sql-server-2008, user-defined-functions

我正在 sql server 中创建一个标量函数。并在函数中将列名作为参数传递。在这个函数中，我将这些列名与该表一起使用。这里`@FromCurrency`和`@ToCurrency`是`CurrencyConversion`表的列名。
代码如下：

```
alter FUNCTION fnCurrencyConversion  --1200.90,'NGN','CAD' 
      (@MoneyAmount MONEY,
       @FromCurrency nvarchar(20),
       @ToCurrency nvarchar(20))  
RETURNS decimal(18,2)  
AS  
BEGIN 
  declare @BaseToUsd nvarchar(1000), @UsdToTarget nvarchar(1000)
  declare @Rate decimal(18,5) 
  set @BaseToUsd= ('select top 1 '+ @FromCurrency  +' from CurrencyConversion order by id desc')
  set @UsdToTarget = ('select top 1 '+ @ToCurrency  +'  from CurrencyConversion order by id desc') 

  set @Rate = @UsdToTarget/@BaseToUsd
  declare @TotalAmt decimal(18,5)
  set @TotalAmt = (@Rate * @MoneyAmount)  
  return @TotalAmt 

END 
```

如何在sql中的标量值函数中传递列名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:52:06.547

UDF 不支持使用动态 SQL，即使他们这样做了，您也使用了错误的语法。

您可以按照以下方式创建一个执行此操作的存储过程：

```
create procedure procCurrencyConversion  --1200.90,'NGN','CAD' 
      (@MoneyAmount MONEY,
       @FromCurrency nvarchar(20),
       @ToCurrency nvarchar(20))  
AS  
BEGIN 
  declare @BaseToUsd nvarchar(1000), @UsdToTarget nvarchar(1000)
  declare @Rate decimal(18,5) 
  declare @SQL nvarchar(4000)

  set @SQL = 'select top 1 @BaseToUsd ='+ @FromCurrency  +N' from CurrencyConversion order by id desc'
  exec sp_executesql @SQL, N'@BaseToUsd nvarchar(1000) output', @BaseToUsd output

  set @SQL = 'select top 1 @UsdToTarget='+ @ToCurrency  +N' from CurrencyConversion order by id desc'
  exec sp_executesql @SQL, N'@UsdToTarget nvarchar(1000) output', @UsdToTarget output

  set @Rate = @UsdToTarget/@BaseToUsd
  declare @TotalAmt decimal(18,5)
  set @TotalAmt = (@Rate * @MoneyAmount)  
  select @TotalAmt 

END 
```

请注意，[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)有一个非常简洁的语法，并且不是为了装腔作势:)
另外，我建议对`CurrencyConversion`表进行规范化，这样您就可以在没有动态 SQL 的情况下获取数据，类似于`Currency`列的行并插入一行每个货币，而不是为每个货币使用单独的字段。
此外，尽量避免使用 UDF，尤其是在大型数据集上，因为它们以逐行痛苦的方式工作，并且是巨大的性能瓶颈。

# .net - 构建启用 NuGet 的解决方案时出错

> ID：14029842
> 
> 赞同：0
> 
> 时间：2012-12-25T10:35:33.477
> 
> 标签：.net, visual-studio-2010, c#-4.0, nuget, nuget-package

我一直在尝试构建从[这里](https://github.com/ThomasArdal/NuGetPackageVisualizer)下载的代码。
问题是，每当我尝试构建它时，我总是收到以下 3 个错误：
`1\. D:\NuGetPackageVisualizer-master.nuget\nuget.targets(87,9): error : 'C:\Documents' is not recognized as an internal or external command,
2\. D:\NuGetPackageVisualizer-master.nuget\nuget.targets(87,9): error : operable program or batch file.
3\. D:\NuGetPackageVisualizer-master.nuget\nuget.targets(87,9): error MSB3073: The command ""D:\NuGetPackageVisualizer-master.nuget\nuget.exe" install "D:\NuGetPackageVisualizer-master\packages.config" -source "" -RequireConsent -solutionDir "D:\NuGetPackageVisualizer-master\ "" exited with code 1.`

第 87 行`Nuget.targets`是：
`< Exec Command="$(RestoreCommand)" LogStandardErrorAsError="true" Condition="'$(OS)' == 'Windows_NT' And Exists('$(PackagesConfig)')" />`

而且没有`"C:\Documents"`目录。
相反，有一个以 C: 命名的目录`"C:\Documents and Settings/..."`，**其中**包含 2 个与 NuGet 相关的目录。
- 一个是：`C:\Documents and Settings\Muneeb\Application Data\NuGet,`其中包含`NuGet.Config`文件。
- 另一个是：`C:\Documents and Settings\Muneeb\Local Settings\Application Data\NuGet,`其中包含`Cache`目录。

我不仅在这个项目中面临这个问题，而且在我尝试下载和构建的任何其他项目中都面临这个问题。
但是如果我从头开始创建一个项目，就不会出现这样的构建错误！
我已经敲了很多头，但无法解决这个问题。
在这方面的任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T16:04:53.510

`'C:\Documents' is not recognized as an internal or external command`

该过程似乎将违规路径中的空格解释为不同的参数。尝试用双引号将路径括起来。

# python - 在 django 中处理视图语法错误与异常

> ID：14029851
> 
> 赞同：3
> 
> 时间：2012-12-25T10:37:25.750
> 
> 标签：python, django, exception, view

我正在使用 django 1.2.7 和 python 2.6。如果我使用此代码：（**在 porpuse 上出现识别错误**）

```
def myview(request):
    try:
        if x:
        print 'x'
    except:
        return HttpResponseServerError('bazinga') 
```

然后我没有得到我的回应。我得到 django 500 响应。

但如果我将代码更改为：

```
 def myview(request):
    try:
        if x:
            print 'x'
    except:
        return HttpResponseServerError('bazinga') 
```

现在我得到了我自己的 500 和 bazinga 写的。

如何在第一个示例中捕获标识错误？

就像我的 try-except 在第二个示例中捕获异常一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T11:22:52.800

不要试图让 Django 在语法错误的情况下返回一个好的响应。这将很困难，并且将涉及仅针对这种情况使用您自己的代码，并且该代码本身需要无错误等。

相反，将精力投入到自动化测试套件中，这样可以在部署代码之前轻松找到这些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T10:57:26.937

可以很容易地检测到语法错误，因为您不需要运行代码而只需导入它。

没有理由你应该试图抓住它们，只是修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:06:02.370

您可以从代码中捕获语法（和缩进）错误。在这里查看更多信息： [如何捕获 IndentationError](https://stackoverflow.com/questions/8911735/how-to-catch-indentationerror)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T13:13:13.350

语法错误不是运行时错误，它们发生在编译时。据我所知，你不能用 try/except 块来捕捉它们。

# c# - 正则表达式匹配两个字符之一

> ID：14029858
> 
> 赞同：5
> 
> 时间：2012-12-25T10:38:26.493
> 
> 标签：c#, console

我可以使用什么正则表达式来确保输入匹配字符“a”或字符“x”。

我尝试了以下方法，但这并没有像我希望的那样工作。

```
char option;

Console.WriteLine("Please make your option");
for (int i = 0; i < options.Length; i++)
{
    Console.WriteLine(options[i]);

}
option = char.Parse(Console.ReadLine());
while (option != 'a' || option != 'x')
{
    Console.WriteLine("'a' or 'x' please!!");
    option = char.Parse(Console.ReadLine());
} 
```

我想要的是只接受这两个字符之一......作为输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T10:40:40.980

```
 Regex.IsMatch(input, "[ax]", RegexOptions.IgnoreCase); 
```

将匹配 a,x,A,X

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T10:40:37.910

`a + x`用理性语言，`(a | x)`或几乎每个正则表达式系统中的 [ax]。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T10:42:34.870

不需要正则表达式，这里有逻辑错误，您需要在 while 循环中使用`&&`(AND) 逻辑运算符而不是(OR)：`||`

```
while (option != 'a' && option != 'x') 
```

# templates - Magento 的 formatDate 助手打印不正确的日期

> ID：14029862
> 
> 赞同：1
> 
> 时间：2012-12-25T10:38:49.487
> 
> 标签：templates, magento, date, helper

在 Magento 模板中，我选择存储为产品属性的日期。这就是配置（设置资源）：

```
# Attribute default config - every property can be overridden
$defaultAttributeConfig = array(
    'input'                     => 'date',
    'type'                      => 'datetime',
    'backend'                   => 'eav/entity_attribute_backend_datetime',
    'frontend'                  => 'eav/entity_attribute_frontend_datetime',
    'visible'                   => true,
    'visible_on_front'          => false,
    'required'                  => false,
    'user_defined'              => false,
    'used_in_product_listing'   => true,
    'group'                     => $defaultAttributeGroup,
    'global'                    => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
    'apply_to'                  => 'bundle,simple,configurable',
    # Other
    'default'                    => null,
    'source'                     => null,
    'searchable'                 => false,
    'visible_in_advanced_search' => false,
    'filterable'                 => false,
    'filterable_in_search'       => false,
    'comparable'                 => false,
    'is_html_allowed_on_front'   => true,
    'is_configurable'            => false,
    'used_for_sort_by'           => false,
    'position'                   => 0,
    'used_for_promo_rules'       => false,
);

$installer->addAttribute(
    $productEntityTypeId,
    'time_lapse_begin',
    array_merge($defaultAttributeConfig, array(
        'label'     => 'Time-lapse begin',
        'sort'      => 10,
    ))
); 
```

在我的模板文件中，我正在处理日期以进行调试，如下所示：

```
<?php list($timeLapseBegin, $timeLapseEnd) = array($_product->getTimeLapseBegin(), $_product->getTimeLapseEnd()); ?>

<?php if ($this->validateDate($timeLapseBegin)): ?>

<p>
    Origin Date <?php echo $timeLapseBegin ?><br />
    Full Date: <?php echo Mage::helper('core')->formatDate($timeLapseBegin, 'full'); ?><br />
    Long Date: <?php echo Mage::helper('core')->formatDate($timeLapseBegin, 'long'); ?><br />
    Medium Date: <?php echo Mage::helper('core')->formatDate($timeLapseBegin, 'medium'); ?><br />
    Short Date: <?php echo Mage::helper('core')->formatDate($timeLapseBegin, 'short'); ?>
</p>

<?php endif; ?> 
```

不幸的是，输出不如预期：

```
Origin Date 2013-01-01 00:00:00
Full Date: Montag, 31\. Dezember 2012
Long Date: 31\. Dezember 2012
Medium Date: 31.12.2012
Short Date: 31.12.12 
```

如您所见，Origin Date 显示为 2013/01/01，但 Magento 的助手将其格式化为 2012/12/31 - 这是前一天而不是预期的......

任何帮助或提示表示赞赏。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T01:40:01.953

```
Mage::app()->getLocale()->date($data['start_date'], Zend_Date::DATE_SHORT, null, false); 
```

将“useTimezone”设置为 False

请参阅[Magento 自定义模块日期字段将日期保存到所选日期前一天](https://stackoverflow.com/questions/8998797/magento-custom-module-date-field-saving-date-to-one-day-before-the-selected-date/12222444#12222444)

# perl - 如何在Perl中的任何计算中提取小数点后的前三位？

> ID：14029866
> 
> 赞同：0
> 
> 时间：2012-12-25T10:39:11.820
> 
> 标签：perl, integer-division

对于像1/3这样的简单除法，如果我只想从除法结果中提取小数点后的前三位，那该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:04:39.837

你可以用**spritnf**做到这一点：

```
my $rounded = sprintf("%.3f", 1/3); 
```

这不是 this`sprintf`的目的，但它确实起到了作用。

如果您只想要点后的三位数字，您可以使用数学计算来完成：

```
my $num = 1/3;
my $part;
$part = $1 if $num=~/^\d+\.(\d{3})/;
print "3 digits after dot: $part\n" if defined $part; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:53:06.723

使用 sprintf 和一些模式匹配。冗长。

```
my $str;
my $num = 1/3;
my $res = sprintf("%.3f\n",$num);
($str = $res) =~ s/^0\.//;
print "$str\n"; 
```

# perl - 警告：使用未初始化的值替换

> ID：14029872
> 
> 赞同：0
> 
> 时间：2012-12-25T10:40:24.963
> 
> 标签：perl, warnings, substitution, initialization

为什么 Perl 在这种情况下会发出警告

```
Use of uninitialized value `$new` in substitution (s///) at ./perl.pl line 8. 
```

并不是

```
Use of uninitialized value `$string` in substitution (s///) at ./perl.pl line 8.

#!/usr/bin/env perl
use warnings;
use strict;

my $string;
my $new;

( $new = $string ) =~ s/^.//; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T11:19:29.877

`$string`不参与替换。它位于分配的 RHS 上，并且在分配的 RHS 上具有未定义的值不应触发警告。

如果`$new`可以未定义，您可以使用

```
my $new = $string;
$new =~ s/^.// if defined($new); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T11:07:43.737

没有替代品`$string`，所以它不会发出警告。**此代码将undef**值从`$string`into复制`$new`，然后对`$new`.

如果要删除此警告，可以更改为：

```
( $new = ($string // '') ) =~ s/^.//; 
```

# android - 查看刮刮游戏以获得隐藏图像

> ID：14029879
> 
> 赞同：0
> 
> 时间：2012-12-25T10:41:00.530
> 
> 标签：android, android-layout

我想做一个游戏，一个划痕游戏 (mPaint1.setXfermode(new PorterDuffXfermode(Mode.CLEAR)); )，屏幕上有 3 个独立案例。怎么做？

[http://img822.imageshack.us/img822/868/35861879.png](http://img822.imageshack.us/img822/868/35861879.png)

屏幕显示只有一个案例。当这三个案例被清除后，分数显示在显示图像的功能中。谢谢你。

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImageView image = new ImageView(this);
    image.setImageResource(R.drawable.ic_launcher);

    CaseView caseOne=new CaseView(this, R.drawable.ic_launcher, 0);

    //TableLayout table = (TableLayout)findViewById(R.id.matable);
    TableRow tablerow = (TableRow)findViewById(R.id.marow);
    //table.setLayoutParams(tableParams);
    tablerow.addView(caseOne);
}

public class CaseView extends View {

private static final float MINP = 1f;
private static final float MAXP = 1f;

private Bitmap mBitmap1, _scratch = null;
private Canvas mCanvas1;
private Canvas mCanvas2, mCanvas3;
private Path mPath1;
private Paint mBitmapPaint1;

private Paint mPaint1;

private int IdImage;
private int positionTop = 0;
private String colorGold = "#E29F2B";
private boolean firstTime = false;

// private Bitmap image;
// private Paint paint;

boolean isErase;

public CaseView(Context ctx, AttributeSet attrs) {
    super(ctx, attrs);
}

public CaseView(Context c, int resId, int positionTop) {
    super(c);

    this.positionTop = positionTop;
    firstTime = true;

    mPaint1 = new Paint();
    mPaint1.setAntiAlias(true);
    mPaint1.setDither(true);
    mPaint1.setColor(Color.TRANSPARENT);
    mPaint1.setStyle(Paint.Style.STROKE);
    mPaint1.setStrokeWidth(60);

    // create a square
    mBitmap1 = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 100; j++) {
            mBitmap1.setPixel(i, j, Color.parseColor(colorGold));
        }
    }

    mCanvas1 = new Canvas(mBitmap1);

    mPath1 = new Path();

    mBitmapPaint1 = new Paint(Paint.DITHER_FLAG);

    // mBitmapPaint3 = new Paint(Paint.DITHER_FLAG);
    IdImage = resId;
    if (_scratch == null) {
        _scratch = BitmapFactory.decodeResource(getResources(), IdImage);
    }
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    // Log.v("", "onDraw");

    canvas.drawColor(Color.WHITE);
    // logo
    canvas.drawBitmap(_scratch, 0, positionTop, null);

    // canvas.drawBitmap(mBitmap1, null, new Rect(0,0,100,100),
    // mBitmapPaint1);
    canvas.drawBitmap(mBitmap1, 0, positionTop, mBitmapPaint1);

    canvas.drawBitmap(_scratch, 0, 400, null);
    canvas.drawBitmap(mBitmap2, 0, 400, mBitmapPaint2);

    // mBitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);

    if ((mX < 100 && mX >= 0)
            && (mY < positionTop + 100 && mY >= positionTop)) {
        // Log.v("onDraw", "x:" + mX + "/y:" + mY);
        mPaint1.setMaskFilter(null);
        mPath1.reset();
        mPaint1.setXfermode(new PorterDuffXfermode(Mode.CLEAR));

        // mBitmap.setPixel((int) mY,(int) mX, Color.TRANSPARENT);
        // mBitmap1.eraseColor(Color.TRANSPARENT);
        mCanvas1.setBitmap(mBitmap1);

        canvas.drawBitmap(mBitmap1, 0, positionTop, mBitmapPaint1);
        invalidate();

    } else {
        mPaint1.setXfermode(null);  
    }

    super.onDraw(canvas);

    int pixelColor = mBitmap1.getPixel(50, 50);
    int red = Color.red(pixelColor);
    int green = Color.green(pixelColor);
    Log.v("red", "red:" + red + " /green:" + green);

    // invalidate();
}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
    mPath1.reset();
    mPath1.moveTo(x, y);

    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);

    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath1.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mPath2.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath1.lineTo(mX, mY);
    mPath2.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas1.drawPath(mPath1, mPaint1);

    // kill this so we don't double draw
    mPath1.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    Log.v("onTouchEvent", "x:" + x + "/y:" + y);

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        if ((mX < 100 && mX >= 0)
                && (mY < positionTop + 100 && mY >= positionTop)) {
            mPath1.reset();
            mPaint1.setMaskFilter(null);
            mPaint1.setStrokeWidth(90);
            mPaint1.setXfermode(new PorterDuffXfermode(Mode.CLEAR));

            // mCanvas1.draw(x, y, 10, mPaint1);
            isErase = true;
        } else {
            mPaint1.setXfermode(null);
            isErase = false;
        }

        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        if (isErase) {
            mCanvas1.drawCircle(x, y, 20, mPaint1);
        }
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        if (isErase) {
            mCanvas1.drawCircle(x, y, 20, mPaint1);
        }
        touch_up();
        invalidate();
        break;
    }
    return true;
}

  } 
```

# python - 在python中创建字典

> ID：14029883
> 
> 赞同：0
> 
> 时间：2012-12-25T10:41:23.137
> 
> 标签：python, dictionary

我有一个格式如下的文件。

```
>abc
qqqwqwqwewrrefee
eededededededded
dededededededd
>bcd
swswswswswswswws
wswswsddewewewew
wrwwewedsddfrrfe
>fgv
wewewewewewewewew
wewewewewewewxxee
wwewewewe 
```

我试图创建一个以 (>abc,>bcd,>fgv) 作为键并将它们下面的字符串作为值的字典。我可以提取键，但对更新值感到困惑。请帮帮我。

```
file2 = open("ref.txt",'r')
for line in file2.readlines():
    if ">" in line:
    print (line) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:48:10.680

不确定您对“更新”值的含义，但试试这个：

```
mydict=[]
with open("ref.txt", "r") as file2:
    current = None
    for line in file2.readlines():
        if line[0] == ">":
            current = line[1:-1]
            mydict[current] = ""
        elif current:
            mydict[current] += line # use line[:-1] if you don't want the '\n'

In [2]: mydict
Out[2]: {'abc': 'qqqwqwqwewrrefee\neededededededded\ndededededededd\n',
         'bcd': 'swswswswswswswws\nwswswsddewewewew\nwrwewedsddfrrfe\n',
         'fgv': 'wewewewewewewewew\nwewewewewewewxxee\nwwewewewe\n'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T10:46:31.600

当你得到一个包含 的行值时`'>'`，将该行保存在一个变量中。当您读取其中*没有*的行时`'>'`，将其添加到由先前保存的变量键入的字典条目中。

```
key = None
dict = {}
for line in file2.readlines():
    if ">" in line:
        key = line
        dict[key] = ''  # Initialise dictionary entry
    elif key is not None:
        dict[key] += line  # Append to dictionary entry 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T10:49:56.257

```
dictionary = {}
with open("file.txt","r") as r:
    for line in r.readlines():
        if ">" in line:
            key = line[1:].strip()
            dictionary[key] = ""
        else:
            dictionary[key] += line

print(dictionary) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T10:48:55.347

```
d={}
key=''
file2 = open("ref.txt",'r')
for line in file2.readlines():
    if line.startswith('>'):
        key=line.strip()
        d[key]=[]
        continue
    d[key].append(line.strip())
file.close() 
```

我没有测试上面的代码，但它应该可以工作

# regex - 这个正则表达式的含义 /(\+\d{2})/

> ID：14029884
> 
> 赞同：-4
> 
> 时间：2012-12-25T10:41:22.757
> 
> 标签：regex, vb.net

谁能告诉我下面正则表达式的含义或可能的值？

```
/(\+\d{2})/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:43:44.427

加号后跟 2 位数字。

这匹配例如：`+23`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:47:07.807

A + 后跟 2 位数字：`+23 +01`等等。

# c++ - 从资源加载图像不起作用（C++ Dll）

> ID：14029887
> 
> 赞同：0
> 
> 时间：2012-12-25T10:42:00.000
> 
> 标签：c++, dll, resources, icons, logitech

我正在为 MusicBee 写一个罗技插件。我唯一的问题是无法加载艺术品、播放和暂停图像的图像。我已经测试了很多不同的方式来使用 VS2012 资源文件中的图像。但它们都不起作用。我必须在 dll 文件中加载图像，并且图像必须是 HICON 或 HBITMAP。以下是我项目的完整课程。完整的项目可以在[Bitbucket](https://bitbucket.org/jimmyD/musicbee-logitech-applet/src)找到。

```
//This is the code I have used for loading an image.
    playIcon = LoadIcon (GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_ICON1));
playIconHandle = m_lcd.AddIcon(playIcon, 16, 16);
m_lcd.SetOrigin(playIconHandle, 2, 2);

 //-----------------------------------------------------------------
    // Logitech File
    // C++ Source - Logitech.cpp - version 2012 v1.0
    //-----------------------------------------------------------------

    //-----------------------------------------------------------------
    // Include Files
    //-----------------------------------------------------------------
    #include "stdafx.h"
    #include "Logitech.h"

    //-----------------------------------------------------------------
    // Logitech methods
    //-----------------------------------------------------------------

    //This LogitechObject is a instance of the Logitech class for using in the thread
    Logitech * Logitech::LogitechObject;

    Logitech::Logitech():   stopthread(false), firstTime(true), position(0), duration(0)
    {
        LogitechObject = this;
    }

    Logitech::~Logitech()
    {
        stopthread = true;
        this->state = StatePlay::Undefined;
        timerThread.detach();
    }

    bool Logitech::getFirstTime()
    {
        return firstTime;
    }

    //Initialise Logitech LCD
    BOOL Logitech::OnInitDialog()
    {
        HRESULT hRes = m_lcd.Initialize(_T("MusicBee"), LG_DUAL_MODE, FALSE, TRUE);

        if (hRes != S_OK)
        {
            return FALSE;
        }

        m_lcd.SetAsForeground(true);

        //Create home screen Logitech Color LCD
        if(m_lcd.IsDeviceAvailable(LG_COLOR))
        {
            m_lcd.ModifyDisplay(LG_COLOR);
            m_lcd.SetBackground(RGB(245,245,245));
            logo = m_lcd.AddText(LG_STATIC_TEXT, LG_BIG, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
            m_lcd.SetOrigin(logo, 0, 50);
            m_lcd.SetText(logo, _T("MusicBee"));
            m_lcd.SetTextFontColor(logo, RGB(0,0,0));
            m_lcd.Update();
        }

        //Create home screen Logitech Monochrome LCD
        else if(m_lcd.IsDeviceAvailable(LG_MONOCHROME))
        {
            m_lcd.ModifyDisplay(LG_MONOCHROME);
            logo = m_lcd.AddText(LG_STATIC_TEXT, LG_BIG, DT_CENTER, LGLCD_BW_BMP_WIDTH);
            m_lcd.SetOrigin(logo, 0, 5);
            m_lcd.SetText(logo, _T("MusicBee"));
            m_lcd.Update();
        }

        //Start thread
        timerThread = thread(&Logitech::startThread);

        return TRUE;  // return TRUE  unless you set the focus to a control
    }

    //Create playing screen for Logitech Monochrome LCD
    VOID Logitech::createMonochrome()
    {
        m_lcd.RemovePage(0);
        m_lcd.AddNewPage();
        m_lcd.ShowPage(0);

        if (logo != 0)
        {
            delete logo;
            logo = 0;
        }

        artist = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_BW_BMP_WIDTH);
        m_lcd.SetOrigin(artist, 0, 0);

        title = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_BW_BMP_WIDTH);
        m_lcd.SetOrigin(title, 0, 13);

        progressbar = m_lcd.AddProgressBar(LG_FILLED);
        m_lcd.SetProgressBarSize(progressbar, 136, 5);
        m_lcd.SetOrigin(progressbar, 12, 38);

        time = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 80);
        m_lcd.SetOrigin(time, 12, 29);

        time1 = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 80);
        m_lcd.SetOrigin(time1, 125, 29);

        playIcon = static_cast<HICON>(LoadImage(GetModuleHandle(NULL), MAKEINTRESOURCE(IDB_PNG2), IMAGE_BITMAP, 16, 16, LR_MONOCHROME));
        playIconHandle = m_lcd.AddIcon(playIcon, 16, 16);
        m_lcd.SetOrigin(playIconHandle, 2, 29);

        firstTime = false;
        changeArtistTitle(this->artistString, this->albumString, this->titleString, this->duration, this->position);
    }

    //Create playing screen for Logitech Color LCD
    VOID Logitech::createColor()
    {
        m_lcd.RemovePage(0);
        m_lcd.AddNewPage();
        m_lcd.ShowPage(0);

        if (logo != 0)
        {
            delete logo;
            logo = 0;
        }

        //background.LoadFromResource(NULL, AfxGetInstanceHandle(), IDB_G19BACKGROUND, _T("PNG"));
        //HBITMAP bmpBkg_ = background.GetHBITMAP();
        //m_lcd.SetBackground(bmpBkg_);

        m_lcd.SetBackground(RGB(184,220,240));

        artist = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
        m_lcd.SetOrigin(artist, 5, 5);
        m_lcd.SetTextFontColor(artist, RGB(0,0,0));

        album = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
        m_lcd.SetOrigin(album, 5, 30);
        m_lcd.SetTextFontColor(album, RGB(0,0,0));

        title = m_lcd.AddText(LG_SCROLLING_TEXT, LG_MEDIUM, DT_CENTER, LGLCD_QVGA_BMP_WIDTH);
        m_lcd.SetOrigin(title, 5, 55);
        m_lcd.SetTextFontColor(title, RGB(0,0,0));

        time = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 80);
        m_lcd.SetOrigin(time, 5, 80);
        m_lcd.SetTextFontColor(time, RGB(0,0,0));

        time1 = m_lcd.AddText(LG_STATIC_TEXT, LG_SMALL, DT_LEFT, 40);
        m_lcd.SetOrigin(time1, 275, 80);
        m_lcd.SetTextFontColor(time1, RGB(0,0,0));

        progressbar = m_lcd.AddProgressBar(LG_FILLED);//320×240 pixel color screen
        m_lcd.SetProgressBarSize(progressbar, 310, 20);
        m_lcd.SetProgressBarColors(progressbar, RGB(25,71,94),NULL);
        m_lcd.SetOrigin(progressbar, 5, 100);

        /*playIcon = static_cast<HICON>(LoadImage(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDB_PNG1), IMAGE_ICON, 16, 16, LR_COLOR));
        playIconHandle = m_lcd.AddIcon(playIcon, 16, 16);
        m_lcd.SetOrigin(playIconHandle, 5, 29);*/

        firstTime = false;
        changeArtistTitle(this->artistString, this->albumString, this->titleString, this->duration, this->position);
    }

    void Logitech::startThread()
    {
        while(!LogitechObject->stopthread)
        {
            this_thread::sleep_for( chrono::milliseconds(500) );

            if(!LogitechObject->stopthread && LogitechObject->progressbar != NULL)
            {
                //Update progressbar and position time on the screen after 1 second of music.
                if(LogitechObject->state == StatePlay::Playing)
                {
                    this_thread::sleep_for( chrono::milliseconds(500) );
                    LogitechObject->position++;
                    float progresstime = ((float)LogitechObject->position / (float)LogitechObject->duration)*100;
                    LogitechObject->m_lcd.SetProgressBarPosition(LogitechObject->progressbar, static_cast<FLOAT>(progresstime));
                    LogitechObject->m_lcd.SetText(LogitechObject->time, LogitechObject->getTimeString(LogitechObject->position).c_str());
                }

                //If music stopped then the progressbar and time must stop immediately
                else if(LogitechObject->state == StatePlay::Stopped)
                {
                    LogitechObject->position = 0;
                    LogitechObject->m_lcd.SetProgressBarPosition(LogitechObject->progressbar, 0);
                    LogitechObject->m_lcd.SetText(LogitechObject->time, LogitechObject->getTimeString(LogitechObject->position).c_str());
                }

                LogitechObject->m_lcd.Update();
            }
        }
    }

    void Logitech::changeArtistTitle(wstring artistStr, wstring albumStr, wstring titleStr, int duration, int position)
    {
        this->artistString = artistStr;
        this->albumString = albumStr;
        this->titleString = titleStr;
        this->durationString = getTimeString(duration/1000);
        this->position = position;
        this->duration = duration/1000;

        if(!firstTime)
        {
            if(m_lcd.IsDeviceAvailable(LG_COLOR))
            {
                m_lcd.SetText(album, albumStr.c_str());
            }

            m_lcd.SetText(artist, artistStr.c_str());
            m_lcd.SetText(title, titleStr.c_str());
            m_lcd.SetText(time, getTimeString(position).c_str());

            string s( durationString.begin(), durationString.end() );

            if(s.size() < 5)
            {
                s = "0" + s;
            }

            wstring ws( s.begin(), s.end() );

            m_lcd.SetText(time1, ws.c_str());
            ws.clear();

            ///*playIcon = static_cast<HICON>(LoadImage(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDB_PNG1), IMAGE_ICON, 16, 16, LR_COLOR));
            //playIconHandle = m_lcd.AddIcon(playIcon, 16, 16);
            //m_lcd.SetOrigin(playIconHandle, 5, 29);*/

            m_lcd.Update();

            artistStr.clear();
            albumStr.clear();
            titleStr.clear();

        }
    }

    //Set current playing position
    void Logitech::setPosition(int pos)
    {
        this->position = pos/1000;
        m_lcd.SetText(time, getTimeString(this->position).c_str());
        m_lcd.Update();
    }

    void Logitech::setDuration(int duration)
    {
        this->duration = duration/1000;
        m_lcd.SetText(time1, getTimeString(this->duration).c_str());
        m_lcd.Update();
    }

    //Change play state of the current playing song
    void Logitech::changeState(StatePlay state)
    {
        this->state = state;

        if(state == StatePlay::Playing && firstTime)
        {
            if(m_lcd.IsDeviceAvailable(LG_COLOR))
            {
                createColor();
            }

            else if(m_lcd.IsDeviceAvailable(LG_MONOCHROME))
            {
                createMonochrome();
            }
        }
    }

    //Change int of time to string
    wstring Logitech::getTimeString(int time)
    {
        string minutes = to_string((int)time /60);
        string seconds = to_string((int)time%60);

        if(minutes.size() < 2)
        {
            minutes = "0" + minutes;
        }

        if(seconds.size() < 2)
        {
            seconds = "0" + seconds;
        }

        string timeString = minutes + ":" + seconds;

        return wstring( timeString.begin(), timeString.end() );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:34:01.227

```
 LoadImage(GetModuleHandle(NULL), ...) 
```

这在插件中是不正确的。GetModuleHandle(NULL) 返回 EXE 的句柄，而不是您的 DLL。假设您将资源嵌入到插件 DLL 中，您将需要使用 DLL 的模块句柄，即您在 DllMain() 函数中获得的第一个参数。

# git - 添加和删 除子模块后 Git 停止工作

> ID：14029889
> 
> 赞同：0
> 
> 时间：2012-12-25T10:42:24.850
> 
> 标签：git, tortoisegit

好的，我在 stackoverflow 和网络上阅读了很多答案，但没有一个对我有帮助。

问题从 git 版本 Git-1.7.10-preview20120409 和 tortoiseGit TortoiseGit-1.7.10.0-64bit 开始，后来我升级到 Git-1.8.0-preview20121022 和 tortoiseGit 1.7.15，我希望它能解决我的问题

我现在几乎只通过tortoiseGit 使用git 几个月了。到目前为止，我所做的大部分工作都是在 Assembla 上托管很少的存储库，每个存储库都有很少的分支，而我主要做的是常见的事情。

今天我尝试在项目中添加一个开源子模块，结果很好，但后来我决定使用子树方法。直到那时，我没有向本地分支提交任何内容，也没有向远程服务器推送任何内容。由于我没有看到任何简单的方法是删除子模块，我试图将我的分支恢复到最后一个已知的提交，它并没有真正起作用，所以我从配置文件中删除了 .gitmodules 文件和相关部分和子模块文件夹。由于东西仍然不能完全正常工作，我决定从我的本地机器上删除整个存储库并再次克隆它。我想，因为我没有提交任何东西，也没有推动我会没事的。但是在克隆成功完成并按下 OK 按钮后，我收到以下消息*Fail set config remote.origin。*按 OK 后几乎没有任何效果，所以我尝试像这样更改设置：在 reop 文件夹中右键单击-> TortoiseGit->Settings->git->Remote，我收到以下错误致命：*不是 git 存储库: ../.git/modules/thirdPartyName*。当然指定的文件夹甚至不存在，我尝试手动创建它并在该文件夹上运行*git init*命令，但仍然没有帮助我。

我读到的任何内容都没有帮助我解决我的问题，所以我升级了 GIT 并删除了 tortoiseGit 并安装了一个新版本。我仍然有同样的问题，我认为问题与卸载时tortoiseGit没有清理设置有关。

使用新版本的 git 和 tortoiseGit 我得到几乎相同的错误。 *无法初始化 libgit。libgit 报告：不是 git 存储库：../.git/modules/thirdParty*

现在我的情况是我计算机上的所有存储库都不起作用。我几乎可以肯定它与 git 或 tortoiseGit 的设置有关，因为它也不适用于其他不相关的存储库。

我真的很感激帮助，

谢谢

--EDIT-- 看起来 GIT 从命令行运行良好，所以我认为问题出在 tortoiseGit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:56:15.253

要做的第一件事是将问题一次减少为一件事。TortoiseGit 位于 Git for Windows 之上。因此，开始只使用适用于 Windows 的 Git（仅限命令行），直到你能正常工作，你真的不能指望让 TortoiseGit 工作。

如果您删除了本地存储库并重新克隆，那么除了全局 git config 和系统 git config 文件之外，您的机器上什么都没有。因此，您的问题必须出在其中一个文件中。系统 git config 不太可能被修改，因此它可能是全局（您的每个用户）git config。这是在 $HOME/.gitconfig （或 %USERPROFILE%.gitconfig 使用 cmd shell）。使用可以显示行尾的内容打开该文件，并检查它是否一切正常。它可能应该是 unix 行尾，但绝对不应该有混合的 dos 和 unix 行尾——我已经看到一些工具将 dos 行尾添加到一个文件中，该文件的 unix 行尾弄得一团糟。

如果它看起来没问题并且仍然损坏，请尝试删除文件，然后`git config --global -l`查看剩余的内容。这应该只是系统配置文件中的内容，该文件位于 %PROGRAMFILES%\Git\etc\gitconfig （或 msys shell 中的 /etc/gitconfig ）中。检查一下。

如果它看起来仍然正常并且仍然​​全部损坏，请检查虚拟商店。如果您通常使用非管理帐户运行并且尝试编辑系统配置，那么 Windows 有一个令人讨厌的方案，它会在其中创建虚拟副本。这些位于 %LOCALAPPDATA%\VirtualStore 中。如果其中包含“Program Files\Git”文件夹，那么您就遇到了这个错误功能，应该删除那里的文件。

最后，您可以尝试使用 PortableGit——我认为这使得每个配置文件都可以从某个备用位置使用，这应该使您免受错误的本地配置文件的影响。

# event-receiver - 无法在事件接收器中的 ItemAdded 上使用 SPItemEventProperties ListItem

> ID：14029894
> 
> 赞同：0
> 
> 时间：2012-12-25T10:43:15.450
> 
> 标签：event-receiver, sharepoint-2013

我正在使用事件接收器来修改 SharePoint 2013 网站中的一些输入。

它们相当简单，这是一个简单的例子

```
public override void ItemAdded(SPItemEventProperties properties)
{
    base.ItemAdded(properties);

    using (SPSite site = new SPSite(properties.WebUrl))
    {
        using (SPWeb web = site.OpenWeb(properties.RelativeWebUrl))
        {
            //web.AllowUnsafeUpdates = true;
            SPListItem item = properties.ListItem; // Boom!
            var title = item["Title"].ToString();
            item["Title"] = title.Replace(" ", "_");

            //item.Update();
            //item.SystemUpdate(false);
        }
    }
} 
```

这会导致错误

```
Message:
    Method not found: 'Microsoft.BusinessData.Runtime.IEntityInstance Microsoft.BusinessData.Runtime.NotificationParser.GetChangedEntityInstance(Microsoft.BusinessData.MetadataModel.IEntity, Microsoft.BusinessData.MetadataModel.ILobSystemInstance)'.

Source:
    Microsoft.SharePoint

StackTrace:
   at Microsoft.SharePoint.SPItemEventProperties.get_ListItem()
   at eventreceivers.Kundregister.PrivateCustomer.PrivateCustomer.<>c__DisplayClass2.<ItemAdded>b__0()
   at Microsoft.SharePoint.SPSecurity.<>c__DisplayClass5.<RunWithElevatedPrivileges>b__3()
   at Microsoft.SharePoint.Utilities.SecurityContext.RunAsProcess(CodeToRunElevated secureCode) 
```

我已确保这些方法在课堂上可用。

任何建议都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T13:58:52.573

我已经面临同样的问题。

而不是使用

```
SPListItem item = properties.ListItem; 
```

使用以下代码获取项目，

```
SPListItem item = properties.Web.Lists.TryGetList(properties.ListTitle).GetItemById(properties.ListItemId); 
```

一切顺利！

问候， 普拉文·辛格

# java - 关于休眠中的数据检索

> ID：14029895
> 
> 赞同：1
> 
> 时间：2012-12-25T10:43:33.750
> 
> 标签：java, hibernate

我在 MyEclipse IDE 中编写了这个休眠程序。我想从学生表中检索数据并在控制台中显示，我想检索主键值为 2 的行（正如我在数据库中的表中输入的那样）我得到以下异常：线程“主”org.hibernate.MappingException中的异常：未知实体：java.lang.Integer

程序：

```
package info.inetsolv;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;

public class HibJavaPrgm {
public static void main(String[] args) {

 Configuration cfg = new Configuration();
 cfg.configure();
 SessionFactory sf = cfg.buildSessionFactory();
 Session hsession = sf.openSession();
 Transaction ts = hsession.beginTransaction();

 Student stu=new Student();

 hsession.load(2,stu);

 ts.commit();
 hsession.close();
 sf.close();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T10:54:48.107

您可以使用两种[Session.load()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Session.html#load%28java.lang.Class,%20java.io.Serializable%29)方法：

> 加载（类 theClass，可序列化 id）
> 
> 返回具有给定标识符的给定实体类的持久实例，假设该实例存在。

和

> 加载（对象对象，可序列化 id）
> 
> 将与给定标识符关联的持久状态读入给定的瞬态实例。

这些方法都没有将 ID 作为第一个参数。

你要

```
Student student = (Student) session.load(Student.class, 2); 
```

或者

```
Student student = new Student();
session.load(student, 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T10:55:17.443

代替：

```
Student stu=new Student();

hsession.load(2,stu); 
```

它应该是：

```
Student stu = (Student) hsession.load(Student.class, 2); 
```

# unit-testing - phpunit单元测试错误zf2教义

> ID：14029896
> 
> 赞同：8
> 
> 时间：2012-12-25T10:43:38.607
> 
> 标签：unit-testing, doctrine-orm, zend-framework2

我刚开始使用 Zend 框架 2，使用 Doctrine。我想为我的相册模块设置单元测试。

当我`c:\wamp\www\zf2-tutorial\module\Album\test > phpunit`从命令提示符运行时，出现以下错误：

```
PHPUnit 3.7.10 by Sebastian Bergmann.

Configuration read from C:\wamp\www\zf2-tutorial\module\Album\test\phpunit.xml.d
ist

.FFE

Time: 2 seconds, Memory: 8.25Mb

There was 1 error:

1) AlbumTest\Controller\AlbumControllerTest::testIndexActionCanBeAccessed
Zend\ServiceManager\Exception\ServiceNotFoundException: Zend\ServiceManager\Serv
iceManager::get was unable to fetch or create an instance for doctrine.entityman
ager.orm_default

C:\wamp\www\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\Service
Manager\ServiceManager.php:452
C:\wamp\www\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php:2
5
C:\wamp\www\zf2-tutorial\module\Album\src\Album\Controller\AlbumController.php:3
3
C:\wamp\www\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\Mvc\Con
troller\AbstractActionController.php:88
C:\wamp\www\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\EventMa
nager\EventManager.php:464
C:\wamp\www\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\EventMa
nager\EventManager.php:208
C:\wamp\www\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\Mvc\Con
troller\AbstractController.php:107
C:\wamp\www\zf2-tutorial\module\Album\test\AlbumTest\Controller\AlbumControllerT
est.php:71

--

There were 2 failures:

1) AlbumTest\Controller\AlbumControllerTest::testDeleteActionCanBeAccessed
Failed asserting that 302 matches expected 200.

C:\wamp\www\zf2-tutorial\module\Album\test\AlbumTest\Controller\AlbumControllerT
est.php:54

2) AlbumTest\Controller\AlbumControllerTest::testEditActionCanBeAccessed
Failed asserting that 302 matches expected 200.

C:\wamp\www\zf2-tutorial\module\Album\test\AlbumTest\Controller\AlbumControllerT
est.php:64

FAILURES!
Tests: 4, Assertions: 3, Failures: 2, Errors: 1. 
```

问题的根源似乎是： **Zend\ServiceManager\Exception\ServiceNotFoundException: Zend\ServiceManager\ServiceManager::get 无法**从 test..

这个看不懂，求大神帮忙！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-26T08:42:41.810

好的，终于明白了！！我将模块/相册/测试中的 TestConfig.php.dist 更改为

```
<?php
return array(
    'modules' => array(
        'DoctrineModule',
        'DoctrineORMModule',
        'Album',
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            '../../../config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            'module',
            'vendor',
        ),
    ),
); 
```

所以基本上只是添加了两个缺失的模块，DoctrineModule 和 DoctrineORMModule，并且 phpunit 命令显示没有错误！

希望它可以帮助别人。

# c++ - 统一初始化不适用于 ctor 中的初始化父对象

> ID：14029897
> 
> 赞同：1
> 
> 时间：2012-12-25T10:43:39.043
> 
> 标签：c++, c++11

假设我有一个结构：

```
struct A 
{
    int i;
}; 
```

我可以将其初始化为：

```
A a{1}; 
```

现在我有一个派生类：

```
struct B : public A
{
     B(int _i) : A{_i} {};
}; 
```

但是我在 B struct ctor 中有一个编译错误：

```
error: no matching function for call to ‘A(<brace-enclosed initializer list>)’ 
```

编译器是 gcc-4.6 (SUSE Linux) 4.6.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:51:24.867

您的代码没有任何问题；只是您的编译器不支持所有必需的 C++11 功能。

您的构造函数可以使用 gcc 4.7.0 正常编译。

# python - 在 Django 中对紧密耦合模型进行单元测试

> ID：14029946
> 
> 赞同：2
> 
> 时间：2012-12-25T10:50:33.350
> 
> 标签：python, django, unit-testing, model-view-controller, mocking

我对 django 和单元测试都是新手，我正在尝试为我的模型构建单元测试，但遇到了一些困难。

我有几个模型紧密合作：

`Resource`这将维护一个文件资源

`MetadataField`代表一个可以添加到资源中的元数据字段，对应一个满是字段的表

`MetadataValue`将 MetadataField IDs 与 Resource IDs 和相应的值匹配，这是 Resource - MetadataField 多对多关系的中间表

`MetadataSchema`表示由许多`MetadataFields`. 每个都`Resource`被分配了一个`MetadataSchema`控制`MetadataFields`它的代表

关系：

```
Resource - MetadataField       : Many-to-Many through MetadataValue
MetadataValue - MetadataSchema : Many-to-Many
Resource - MetadataSchema      : One-to-Many 
```

我不确定如何编写测试来处理这些模型。[Test Driven Django](http://www.tdd-django-tutorial.com/)教程中的模型测试似乎主要包括初始化对象和验证属性。如果我对这些对象进行任何设置，尽管它需要使用所有其他对象，那么测试将全部依赖于它们不打算测试的代码。例如，如果我想创建一个资源，我还应该为它分配一个元数据模式和该模式中字段的值。

我在 django 中四处寻找单元测试模型的好例子，但找不到任何东西（django 网站似乎没有单元测试，[这些项目](https://code.djangoproject.com/wiki/DjangoResources#Open-SourceDjangoprojects)要么测试不佳/缺少测试，要么在几个案例中有很好的测试，但几乎没有使用模型。

以下是我看到的可能方法：

*   做了很多模拟，以确保我只测试一个类，并保持模型上的单元测试非常简单，只测试它们的方法/属性，而不是关系是否正常运行。然后依靠更高级别的集成测试来找出关系等中的任何问题。
*   设计确实依赖于其他功能的单元测试，并接受一个功能的中断会破坏多个测试，前提是仍然很容易看到故障发生在哪里。所以我可能会有一种方法来测试我是否可以成功地将 a 添加`MetadataValue`到资源中，这需要设置至少一个`MetadataSchema`and `Resource`。然后我可以使用一个`try - except`块来确保如果测试在处理我实际要测试的断言之前失败，它会给出一个特定的错误消息，表明故障存在于其他地方。这样我可以快速扫描多个失败的测试消息以找到真正的罪魁祸首。但是，不可能在每次测试中都可靠地进行这种分离

我很难理解这一点，所以我不知道这一切是否有意义，但如果有针对这种情况的最佳做法，请指出我！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:14:24.127

对我而言，单元测试的目的是分离代码单元以仅测试它们，而不用担心它们的所有依赖关系。如果我正确理解您的想法，您想要创建更多的集成测试（两个或多个模型之间的关系），这也是一个非常有用但仍然是不同的测试层:)

为了测试单独的模块，尤其是当它们使用大量代码时，我更喜欢模拟依赖项。谷歌[将此](http://www.voidspace.org.uk/python/mock/)作为 Python 模拟的第一选择（我想那里有很多）。

另一件事是如果有太多的依赖关系你必须模拟它可能意味着你必须重新考虑你的架构，因为紧密耦合:)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T21:04:17.343

您可以使用 django 固定装置加载数据进行测试，如果您的模型发生很大变化，这可能非常耗时且难以维护。

我建议您使用像[Factory Boy](https://github.com/dnerdy/factory_boy)这样的库，它允许您在需要时为您的测试按需创建对象。您可以根据需要设置任意数量的工厂，您可以在这里看到一些示例[，在这里](https://stackoverflow.com/questions/11543117/what-are-the-best-practices-for-testing-different-layers-in-django/11546195#11546195)您[还](https://stackoverflow.com/questions/11874071/unit-testing-with-django-models-and-a-lot-of-relations-involved/11960345#11960345)可以看到一些使用[mocker 库](http://labix.org/mocker)进行模拟的示例以及许多测试 django 应用程序的技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:02:04.383

使用[fixtures](https://docs.djangoproject.com/en/dev/howto/initial-data/)，它们可以让你在不编写代码的情况下加载模型数据。

# xmpp - Strophe 会话附件 -- 403 禁止

> ID：14029947
> 
> 赞同：-1
> 
> 时间：2012-12-25T10:50:42.963
> 
> 标签：xmpp, openfire, strophe

我正在开发一个需要包含会话附件的 XMPP Web 应用程序。我正在使用 Openfire XMPP 服务器。我已经成功实现了创建会话的服务器端附件，并且我得到了 sid 并摆脱了会话。不幸的是，我被困在下一部分。

据我所知，在获得 sid 和 rid 后，我需要使用 Strophe.Connection.attach() 将 strphe 附加到现有会话。之后，我发出一个 IQ 请求，该请求从服务器获得正确的响应。但是，我的状态没有任何变化，即应用程序既没有连接也没有附加，因此我无法做任何事情。IQ 请求后，服务器按时响应正常消息，然后在下一个请求中，我收到 403 禁止错误并终止连接。

这是代码：

```
var BOSH_SERVICE = 'http://localhost/cosys-rtw/';
var connection = null;
var sid = "";
var rid = 0;
function notifyUser(msg) 
{
    if (msg.getAttribute('from') == "testuser1@ghost/pingstream") {
        var elems = msg.getElementsByTagName('body');
        var body = elems[0];
        $('#notifications').append(Strophe.getText(body));
}
return true;
}

 function onConnect(status)
{
    console.log("Connect")
console.log(status)
if (status == Strophe.Status.ATTACHED) {
    $('#notifications').html('<p class="welcome">Hello! Any new posts will    appear below.</p>');
    connection.addHandler(notifyUser, null, 'message', null, null,  null);
    connection.send($pres().tree());
}       
}

$(document).ready(function () {
 $.ajax({'url':'http://localhost/x',
        'method':'get',
        'success':function(response){
            console.log(response);  
            console.log(jQuery.parseJSON(response));
            resp = jQuery.parseJSON(response);
            window.sid = resp.sid;
            window.rid = resp.rid;
            prepareStrophe();               
        }});
});

 function prepareStrophe(){
console.log(BOSH_SERVICE);
jid = "testuser1@ghost";
connection = new Strophe.Connection(BOSH_SERVICE);
console.log(window.rid);
console.log(window.sid);
connection.attach(  jid,window.sid,window.rid,null);
connection.sendIQ( $iq({to:Strophe.getDomainFromJid(jid),type:"get"})
                    .c('query',{xmlns:'http://jabber.org/protocol/disco#info'}),
                    function(){
                        if (status == Strophe.Status.ATTACHED) {
                    connection.send($pres().tree());}
                    });} 
```

我收到对 IQ 请求的以下响应：

```
<body xmlns="http://jabber.org/protocol/httpbind">
 <iq id="6173:sendIQ" xmlns="jabber:client" type="result" from="ghost"    to="testuser1@ghost/6b8bfe07">
 <query xmlns="http://jabber.org/protocol/disco#info">
 <identity category="server" name="Openfire Server" type="im"></identity>
 <identity category="pubsub" type="pep"></identity>
 <feature var="http://jabber.org/protocol/pubsub#delete-nodes"></feature>
  .
  .
  .
 <feature var="http://jabber.org/protocol/pubsub#purge-nodes"></feature>
 <feature var="http://jabber.org/protocol/disco#info"></feature>
 <feature var="http://jabber.org/protocol/rsm"></feature>
</query>
</iq>
</body> 
```

此响应确实表明会话有效。我对吗？我无法弄清楚这件事，所以现在我将其交给社区。顺便说一句——圣诞快乐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:27:37.217

我想如果有人遇到同样的问题，我想在这里分享一些东西。ignite realtime [http://community.igniterealtime.org/thread/33004](http://community.igniterealtime.org/thread/33004)上的这个线程讨论了这个问题。那里提到的设置对我有用。

# java - 将条带与安卓应用程序集成

> ID：14029948
> 
> 赞同：1
> 
> 时间：2012-12-25T10:50:55.113
> 
> 标签：java, android, stripe-payments

我正在尝试从我的 android 应用程序支持条带支付，但它不会运行。java不兼容吗？我的代码和错误如下：

```
package io.noq.kiosk.android;

import java.util.HashMap;
import java.util.Map;
import com.stripe.Stripe;
import com.stripe.exception.APIConnectionException;
import com.stripe.exception.AuthenticationException;

import com.stripe.exception.CardException;
import com.stripe.exception.InvalidRequestException;
import com.stripe.exception.StripeException;
import com.stripe.model.Charge;

import io.noq.android.R;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class OnSwipeActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Stripe.apiKey = "the secret (intentionally omitting)";
        Map<String, Object> chargeMap = new HashMap<String, Object>();

        chargeMap.put("amount", 100);
        chargeMap.put("currency", "usd");

        Map<String, Object> cardMap = new HashMap<String, Object>();
        cardMap.put("number", "4242424242424242");
        cardMap.put("exp_month", 12);
        cardMap.put("exp_year", 2013);
        chargeMap.put("card", cardMap);

        try {
            Charge charge = Charge.create(chargeMap);
            System.out.println(charge);
            Log.i("Status is: " + "exiting try onCreate-PayActivity", "let's see what goes out....");
            System.out.println("Status is: "+ "exiting try onCreate-PayActivity");
        } catch (CardException e) {
            // Since it's a decline, CardException will be caught
            System.out.println("CardException is: " + e.getCode());
            System.out.println("CardException is: " + e.getParam());
            Log.i(OnSwipeActivity.class.getName(), "e.getCode() ...." + e.getCode());
        } catch (InvalidRequestException e) {
            // Invalid parameters were supplied to Stripe's API
            System.out.println("InvalidRequestException: " + e.getMessage());
            Log.i(OnSwipeActivity.class.getName(),"e.getCode() ...." + e.getCause());
        } catch (AuthenticationException e) {
            // Authentication with Stripe's API failed (maybe you changed API keys recently)
            System.out.println("AuthenticationException: " + e.getMessage());
            Log.i(OnSwipeActivity.class.getName(), "e.getCode() ...." + e.getCause());
        } catch (APIConnectionException e) {
            // Network communication with Stripe failed
            System.out.println("APIConnectionException: " + e.getMessage());
            Log.i(OnSwipeActivity.class.getName(), "e.getCode() ...." + e.getCause());
        } catch (StripeException e) {
            // Display a very generic error to the user, and maybe send yourself an email
            System.out.println("StripeException: " + e.getMessage());
            Log.i(OnSwipeActivity.class.getName(), "e.getCode() ...." + e.getCause());
        } catch (Exception e) {
            // Something else happened, completely unrelated to Stripe
            System.out.println("Exception: " + e.getMessage());
            Log.i(OnSwipeActivity.class.getName(), "e.getCode() ...." + e.getCause());
        }
    }
} 
```

这些是错误：

> 12-25 05:34:22.625: W/dalvikvm(801): threadid=1: 线程以未捕获的异常退出 (group=0x40a70930)
> 
> 12-25 05:34:22.647：E/AndroidRuntime（801）：致命异常：主要
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): java.lang.NoClassDefFoundError com.stripe.Stripe
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 io.noq.kiosk.android.OnSwipeActivity.onCreate(OnSwipeActivity.java:26)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.app.Activity.performCreate(Activity.java:5104)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.app.ActivityThread.access$600(ActivityThread.java:141)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.os.Looper.loop(Looper.java:137)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 android.app.ActivityThread.main(ActivityThread.java:5039)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
> 
> 12-25 05:34:22.647: E/AndroidRuntime(801): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:07:40.003

您可以在 android 项目上使用 Strip java 库。我已经使用[StripTest的 Test 类实现了一个 Poc](https://github.com/stripe/stripe-java/blob/master/src/test/java/com/stripe/StripeTest.java)

您必须将库导入为图片：![导入的库](../Images/7c151dad2a150c2e02db2787c55eaaf0.png)

您可以使用示例代码进行测试：

```
public class MainActivity extends Activity {
    public static final String TAG                 = "TestStrip";
    static Map<String, Object> defaultCardParams   = new HashMap<String, Object>();
    static Map<String, Object> defaultChargeParams = new HashMap<String, Object>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Stripe.apiKey = "tGN0bIwXnHdwOa85VABjPdSn8nWY7G7I";
        init();
        Map<String, Object> chargeMap = new HashMap<String, Object>();
        chargeMap.put("amount", 100);
        chargeMap.put("currency", "usd");
        Map<String, Object> cardMap = new HashMap<String, Object>();
        cardMap.put("number", "4242424242424242");
        cardMap.put("exp_month", 12);
        cardMap.put("exp_year", 2013);
        chargeMap.put("card", cardMap);

        try {
            Charge createdCharge = Charge.create(defaultChargeParams);
            Fee fee = createdCharge.getFeeDetails().get(0);
            Preconditions.checkState("stripe_fee".equals(fee.getType()), "Stripe fee error.");
            Preconditions.checkState(createdCharge.getFee() == fee.getAmount(), "Error ");
        } catch (StripeException e) {
            // Display a very generic error to the user, and maybe send yourself an email
            Log.e(TAG, "e.getCode() ...." + e.getCause());
        }
    }

    private void init() {
        defaultCardParams.put("number", "4242424242424242");
        defaultCardParams.put("exp_month", 12);
        defaultCardParams.put("exp_year", 2015);
        defaultCardParams.put("cvc", "123");
        defaultCardParams.put("name", "Java Bindings Cardholder");
        defaultCardParams.put("address_line1", "140 2nd Street");
        defaultCardParams.put("address_line2", "4th Floor");
        defaultCardParams.put("address_city", "San Francisco");
        defaultCardParams.put("address_zip", "94105");
        defaultCardParams.put("address_state", "CA");
        defaultCardParams.put("address_country", "USA");
        defaultChargeParams.put("amount", 100);
        defaultChargeParams.put("currency", "usd");
        defaultChargeParams.put("card", defaultCardParams);
    }
} 
```

不要忘记添加到 android 清单中。如果您需要示例项目源，请给我发邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T10:52:16.250

```
In Android Studio
add in gradle 
 compile 'com.stripe:stripe-android:+'
==============================================

 Card card = new Card(cardnumber,exp.month,exp.year,cvv);
boolean validation = card.validateCard();
        if (validation) {
            startProgress();
            new Stripe().createToken(
                    card,
                    PUBLISHABLE_STRIPE_KEY,
                    new TokenCallback() {
                        public void onSuccess(Token token) {
                            // you can get transcation token
                        }
                        public void onError(Exception error) {
                            handleError(error.getLocalizedMessage());
                            finishProgress();
                        }
                    });
        } else if (!card.validateNumber()) {
            handleError("The card number that you entered is invalid");
        } else if (!card.validateExpiryDate()) {
            handleError("The expiration date that you entered is invalid");
        } else if (!card.validateCVC()) {
            handleError("The CVC code that you entered is invalid");
        } else {
            handleError("The card details that you entered are invalid");
        } 
```

# css - 裁剪背景 CSS

> ID：14029957
> 
> 赞同：0
> 
> 时间：2012-12-25T10:51:40.993
> 
> 标签：css, background-image

![在此处输入图像描述](../Images/c5551f46ebaa9c9d1ffc89fa7ff42128.png)**HTML：**

```
<div id="large">
  <div id="medium">
    <div></div>
  </div>
</div> 
```

**CSS：**

```
#large {
  width:600px;
  height:400px;
  background:url('image.jpg');
}

#medium {
  width:400px;
  height:200px;
  background:red;
  opacity:.5;
}

#medium div {
  width:300px;
  height:50px;
  background:?;
} 
```

现在`#medium div`我想忽略 的背景`#medium`，实现没有任何红色色调的背景图像。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:11:41.947

我们可以通过对子 div 使用相同的背景 url 来做一些技巧吗？

```
#medium div {
  width:300px;
  height:50px;
   background:url('image.jpg');
  background-position-x:34px;/*adjust yourself*/
  background-position-y:45px;/*adjust yourself*/

} 
```

[查看 jsfiddle](http://jsfiddle.net/vusan/TVK9h/2/)

# ios - ARC - 管理内存 - 视图不会被释放并且分配会增长，直到应用程序崩溃

> ID：14029963
> 
> 赞同：0
> 
> 时间：2012-12-25T10:52:19.047
> 
> 标签：ios, memory-management, view, uiviewcontroller, automatic-ref-counting

我的应用程序一直存在一些内存管理问题和随机崩溃。我已经做了很多工作来尝试清理代码并将项目转换为 ARC。

我现在对这个问题有了清晰的认识——本质上，应用程序不会释放视图，因此当用户在应用程序中移动时，每个视图都会重新加载并保留，直到最终应用程序由于内存问题而崩溃。

我有一个 UINavigationController。我的应用程序仅在横向左方向运行。当我使用

```
[window setRootViewController:viewController]; 
```

在负载上，然后

```
[self.window addSubview:[finalViewController view]]; 
```

新视图以纵向显示-如果我在加载时将其旋转到带有代码的横向左侧，则会出现各种其他随机问题。

如果我使用 addSubview 而不是

```
[self.viewController.view removeFromSuperview]; 
[self.window setRootViewController:finalViewController];
viewController = nil; 
self.viewController = nil; 
window.viewController = nil; 
```

旋转没问题，但视图没有发布，我的应用程序存在内存问题，最终崩溃。任何想法都会很棒-感谢我可能在这里遗漏了一些相当基本的东西。谢谢，节日快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T02:13:01.783

你是如何在你的应用程序中加载新视图的？如果您使用的是 UINavigationController，您的 AppDelegate 应该像这样开始：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    RootViewController* rootController = [[RootViewController alloc] init];
    UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:rootController];
    [self.window setRootViewController:navController];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

要加载另一个视图（比如按下按钮），您将从根视图中执行以下操作：

```
SecondViewController *secondView = [SecondViewController alloc] init];
[self.navigationController pushViewController:secondView animated:YES]; 
```

这将使 UINavigationController 负责视图的内存管理。

至于旋转，这是通过给每个 ViewControllers 这个方法来处理的：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft) return YES;
    return NO;
} 
```

只要您按照预期的方式使用 UINavigationController，您就不应该有任何非发布视图。您应该阅读 UINavigationController：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

另一种可能性是您的视图控制器的子视图对其父视图/控制器有很强的引用。这将阻止父视图控制器解除分配，因为它给子视图控制器的保留计数为 1，而子视图控制器也给父视图控制器的保留计数为 1。这是一篇关于强引用和弱引用信息的 SO 帖子：[Objective-C 声明的 @property 属性（非原子、复制、强、弱）](https://stackoverflow.com/questions/9859719/xcode-property-attributes-nonatomic-copy-strong-weak)

# java - 从 JavaFX 程序为 WebView 执行 Javascript 函数

> ID：14029964
> 
> 赞同：5
> 
> 时间：2012-12-25T10:52:40.247
> 
> 标签：java, javascript, javafx-2, javafx

我正在尝试从 Java 程序执行 Javascript 函数。Javascript 函数获取 HTML 文件的内容并突出显示特定单词的出现。

是否可以从 webview 对象调用 Javascript 函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T22:10:02.870

要在其中运行 javascript，`WebView`您可以使用`WebEngine.executeScript()`方法。

并且有很多方法可以通过 javascript 突出显示文本。例如[，在 HTML 文本中突出显示单词（但不是标记）](https://stackoverflow.com/questions/10729983/highlight-word-in-html-text-but-not-markup)

全部一起：

```
 WebView webView = new WebView();
    final WebEngine engine = webView.getEngine();
    engine.load("https://stackoverflow.com/questions/14029964/execute-a-javascript-function-for-a-webview-from-a-javafx-program");

    engine.getLoadWorker().stateProperty().addListener(
            new ChangeListener<State>() {
                @Override
                public void changed(ObservableValue ov, State oldState, State newState) {
                    if (newState == State.SUCCEEDED) {
                        engine.executeScript(
                                "function highlightWord(root,word){"
                                + "  textNodesUnder(root).forEach(highlightWords);"
                                + ""
                                + "  function textNodesUnder(root){"
                                + "    var n,a=[],w=document.createTreeWalker(root,NodeFilter.SHOW_TEXT,null,false);"
                                + "    while(n=w.nextNode()) a.push(n);"
                                + "    return a;"
                                + "  }"
                                + ""
                                + "  function highlightWords(n){"
                                + "    for (var i; (i=n.nodeValue.indexOf(word,i)) > -1; n=after){"
                                + "      var after = n.splitText(i+word.length);"
                                + "      var highlighted = n.splitText(i);"
                                + "      var span = document.createElement('span');"
                                + "      span.style.backgroundColor='#f00';"
                                + "      span.appendChild(highlighted);"
                                + "      after.parentNode.insertBefore(span,after);"
                                + "    }"
                                + "  }"
                                + "}"
                                + "\n"
                                + "highlightWord(document.body,'function');");
                    }
                }
            });

    Scene scene = new Scene(webView, 500, 500);

    primaryStage.setTitle("Hello World!");
    primaryStage.setScene(scene);
    primaryStage.show(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T11:31:45.723

您可以使用 ScriptEngine 来执行 javascript。初始化 ScriptEngine，然后加载脚本并评估它，如下面提到的代码所示

```
ScriptEngineManager manager = new ScriptEngineManager();  
ScriptEngine engine = manager.getEngineByName("JavaScript");  

// JavaScript code in a String  
String script = "function hello(arg) { print(arg); }";  

// evaluate script  
engine.eval(script); 
```

# linq - 将 system.data.linq.binary 转换为 byte[]

> ID：14029967
> 
> 赞同：17
> 
> 时间：2012-12-25T10:53:08.987
> 
> 标签：linq, linq-to-sql

我将字节存储在数据库表中。当我使用 Linq 2 sql 检索它时，我得到了返回类型`system.data.linq.Binary`。

我无法将其转换`system.data.linq.binary`为字节数组（`byte[]`）。

我该如何转换它？

```
///my datacontext

var db = new db();

//key is an value from user

var img = from i in db.images
          where i.id == key
          select i.data; 
```

我希望它`i.data`在里面。`linq.binary``byte[]`

我试过了，`(byte[])img`但没有用。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-26T13:06:20.810

你试过打电话`ToArray()`吗`i.data`？

```
var img = from i in db.images
      where i.id == key
      select i.data.ToArray(); 
```

`System.Data.Linq.Binary`有一个`ToArray`专门用于此目的的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-08T06:44:00.283

现在可能为时已晚，但可能会帮助其他人:)

```
//testTable PK:ID, binaryData :binary(32)

public void insertDummyData()
{
    DBML.testTable v = new DBML.testTable ();
    v.ID = 1;

    System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
    v.binaryData = new System.Data.Linq.Binary(encoding.GetBytes("11111111000000001111111100000000"));                                                                    

    db.testTable.InsertOnSubmit(v);
    db.SubmitChanges();
} 
```

或者，单击 .dbml 文件中的 Binary 字段，打开属性，然后将字段类型从 Binary 更改`byte[]`为在[此处找到的](http://dotnetdaily.net/common-dotnet-exceptions/implicitly-convert-type-system-data-linq-binary-byte/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-14T12:20:17.233

```
(byte[])linqBinaryField.ToArray() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T11:54:04.700

你可以试试 MemoryStream。我在我的项目中编写了一个函数来将图像转换为字节数组，如下所示：

```
 public static byte[] Image2ByteArr(string filename)
    {            
        Bitmap bm = new Bitmap(getPath(filename));
        MemoryStream ms = new MemoryStream();
        bm.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
        return ms.ToArray();
    } 
```

希望对你有帮助！

# java - 捕获 xsl 结果文档的输出流

> ID：14029968
> 
> 赞同：4
> 
> 时间：2012-12-25T10:53:10.280
> 
> 标签：java, xslt, saxon

我需要一种干预写入 xsl 结果文档的方法，以避免将它们写入文件系统。现在我的模板正在写入一个临时目录，然后我压缩该目录。我想写到文件系统。我正在使用撒克逊处理器。最好使用仅使用标准 java 库的解决方案。任何建议表示赞赏。

**编辑：**我为 .net saxon api [http://www.saxonica.com/documentation/dotnetdoc/Saxon/Api/IResultDocumentHandler.html](http://www.saxonica.com/documentation/dotnetdoc/Saxon/Api/IResultDocumentHandler.html)找到了这个类 我需要与 java 等效的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:24:54.417

您需要实现接口`net.sf.saxon.OutputURIResolver`
[http://www.saxonica.com/documentation/javadoc/net/sf/saxon/lib/OutputURIResolver.html](http://www.saxonica.com/documentation/javadoc/net/sf/saxon/lib/OutputURIResolver.html)
您可以根据需要在解析方法中重定向输出。就我而言，这就是实现类的样子。

```
public class ZipOutputURIReslover implements OutputURIResolver{

    private ZipOutputStream zipOut;

    public ZipOutputURIReslover(ZipOutputStream zipOut) {
        super();
        this.zipOut = zipOut;
    }

    public void close(Result arg0) throws TransformerException {
        try {
            zipOut.closeEntry();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public Result resolve(String href, String base) throws TransformerException {
        try {
            zipOut.putNextEntry(new ZipEntry(href));
        } catch (IOException e) {
            e.printStackTrace();
        }
        return new StreamResult(zipOut);
    }
} 
```

在此之后，您需要注册`net.sf.saxon.OutputURIResolver`到变压器工厂。

```
ZipOutputStream zipOut = new ZipOutputStream(new FileOutputStream("file.zip"));
factory.setAttribute("http://saxon.sf.net/feature/outputURIResolver", new ZipOutputURIReslover(zipOut)); 
```

当您加载模板并运行转换时，所有 xsl:result-documents 将直接写入 zipOutputStream。

在这里找到了答案[http://sourceforge.net/p/saxon/discussion/94027/thread/9ee79dea/#70a9/6fef](http://sourceforge.net/p/saxon/discussion/94027/thread/9ee79dea/#70a9/6fef)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T12:34:43.980

`new StreamResult(ByteArrayOutputStream())`如果您不想写入文件，您可以使用捕获 xslt 输出，然后您可以使用这种方法将内存数据从字节数组保存到 zip 文件[在 Java 中：如何从字节 [] 数组压缩文件？](https://stackoverflow.com/questions/357851/in-java-how-to-zip-file-from-byte-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T20:24:45.870

请注意，最新版本的 Saxon 要求 href (URI) 是唯一的。因此，输出解析器中流的系统 ID 也必须是唯一的。

例如：

1.  在样式表中指定结果文档的 href 值

    ```
    <xsl:result-document href="{$filename}" method="text"> 
    ```

2.  创建输出解析器

    ```
    public class ZipOutputURIReslover implements OutputURIResolver{

        private ZipOutputStream zipOut;

        public ZipOutputURIReslover(ZipOutputStream zipOut) {
            super();
            this.zipOut = zipOut;
        }

        public void close(Result arg0) throws TransformerException {
            try {
                zipOut.closeEntry();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        public Result resolve(String href, String base) throws TransformerException {
            try {
                zipOut.putNextEntry(new ZipEntry(href));
            } catch (IOException e) {
                e.printStackTrace();
            }
            Result result = new StreamResult(zipOut);
            // Must ensure the stream is given a unique ID
            result.setSystemId(UUID.randomUUID().toString());
            return result;
        }
    } 
    ```

3.  将输出旋转变压器连接到变压器

    ```
    ZipOutputURIResolver outputResolver = new ZipOutputURIResolver(outputStream);
    // Controller is the Saxon implementation of the JAXP Transformer
    ((Controller) transformer).setOutputURIResolver(outputResolver); 
    ```

# android - 验证访问令牌时出错：会话无效。这可能是因为在创建会话后卸载了应用程序

> ID：14029971
> 
> 赞同：3
> 
> 时间：2012-12-25T10:53:31.810
> 
> 标签：android, facebook, facebook-android-sdk

我已经发布了一个与 Facebook SDK 3.0 集成的 android 应用程序。但是通过授权方法实现登录到 Facebook，同时处理 SSO。

我从我的用户那里收到以下 Facebook 错误：

“验证访问令牌时出错：会话无效。这可能是因为在创建会话后卸载了应用程序”

不知道我理解为什么会出现这个错误以及它是什么意思？

如何重现此错误？场景是什么，常见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:08:27.697

此错误表示用户授权您的应用程序后，他们转到他们的[facebook 帐户设置](https://www.facebook.com/settings?tab=applications)并删除了您的应用程序。在这种情况下，您的应用需要用户再次授权。

您还应该查看解释如何处理不同错误的[此页面](https://developers.facebook.com/docs/reference/api/errors/)，以及 Scrumptious 示例应用程序，它让您了解如何在代码中处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:01:11.993

@Jon：我认为您必须维护客户端会话并将访问令牌存储在会话中。当客户端尝试与 FB 交互时，请再次使用此 accessToken。

一段时间后，这个 accessToken 将被 FB api 无效，因此您需要获取新的并再次存储它。

# jquery - Jquery Mobile - 在 iframe 中滚动后导航栏未修复

> ID：14029972
> 
> 赞同：1
> 
> 时间：2012-12-25T10:54:13.183
> 
> 标签：jquery, jquery-mobile, iframe, scroll

我已经成功地在我的应用程序的所有页面上实现了一个固定的导航栏，除了其中一个页面。此页面包含一个具有 100% 高度和 100% 宽度的 iframe。

当我加载页面时，一切正常。

![应该永远是什么样的](../Images/f4fc17151e1a0bd2a4cfcc8e7e875969.png)

如果我滚动一切仍然正常。

但接下来，我点击 iframe 内的链接

然后我滚动，导航栏和标题栏在滚动期间不再固定。然后他们回到他们的位置。 ![在此处输入图像描述](../Images/9b2aff06cc4d3846159022d95fb5425c.png)

这里有一些代码可以帮助你

```
<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/jqm-icon-pack-2.1.2-fa.css" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
<div data-role="page" id="boutique">
    <div data-role="header" data-position="fixed" data--tap-toggle="true">
        <h1>Boutique</h1>
    </div>
    <div data-role="content" style="padding:0px">
        <iframe  style="width:100%; height:100%; border:0px; margin:0px" src="http://autotech.gazoline.net/index.php?mobile_theme_ok" rel="external">
        </iframe>
    </div>
    <div data-role="footer" data-id="myfooter" data-transition="pop" data-position="fixed" data-tap-toggle="true">
    <div data-role="navbar" data-grid="b">
    <ul>
        <li><a href="#articles" data-icon="file">Articles</a></li>
        <li><a href="#videos" data-icon="play">Vid&eacute;os</a></li>
        <li><a class="ui-btn-active ui-state-persist" href="#boutique" data-icon="shopping-cart">Boutique2</a></li>
    </ul>
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:51:01.910

我认为标题中的这个属性使这个

```
data--tap-toggle="true" 
```

你应该把它写成页脚

```
data-tap-toggle="true" 
```

此外，您不需要编写此代码，因为默认情况下为“true” 如果您想在单击时禁用切换，则应将其设为“false”

此致

# sql - Postgresql - 日期比较

> ID：14029979
> 
> 赞同：3
> 
> 时间：2012-12-25T10:54:44.477
> 
> 标签：sql, postgresql

我正在对我的 postgresql 数据库运行来自 pgAdmin3 的查询。我想知道为什么它返回值但所有预期值。查询是：

```
SELECT P.SURNAME, 
       TO_CHAR(TO_DATE(SFE.GRANTDATE,'YYYY-MM-DD'),'DD Mon YY') AS GRANTDATE,
       TO_CHAR(TO_DATE(SFE.REVOKEDATE,'YYYY-MM-DD'),'DD Mon YY') AS REVOKEDATE, 
       SFE.feedname  
FROM   SYS_FEED SFE,
       PRINCIPLE P
WHERE  SFE.USERID = P.ID   
AND    to_date(GRANTDATE,'YYYY-MM-DD') <= to_date('Nov-2006','Mon-YYYY') 
```

GRANTDATE 列是日期类型，包含格式为 2006-09-04 的值。我想返回 GRANTDATE 小于或等于提供的月份年份的所有行。我遇到的问题是它返回所有“小于”匹配行但不返回“等于”行。所以 2006 年 1 月到 2006 年 10 月存在，但 2006 年 11 月不存在。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:19:05.047

尝试：

```
SELECT P.SURNAME, 
       TO_CHAR(TO_DATE(SFE.GRANTDATE,'YYYY-MM-DD'),'DD Mon YY') AS GRANTDATE,
       TO_CHAR(TO_DATE(SFE.REVOKEDATE,'YYYY-MM-DD'),'DD Mon YY') AS REVOKEDATE, 
       SFE.feedname  
FROM   SYS_FEED SFE,
       PRINCIPLE P
WHERE  SFE.USERID = P.ID   
AND    to_date(GRANTDATE,'YYYY-MM-DD') < (to_date('Nov-2006','Mon-YYYY') + interval '1 month'); 
```

问题：当你这样做时，`to_date('Nov-2006','Mon-YYYY')`你会得到`2006-11-01`. 因此，唯一等于的日期`to_date('Nov-2006','Mon-YYYY')`是`2006-11-01`，而不是整个月。

编辑。另一种方法：

```
SELECT P.SURNAME, 
       TO_CHAR(TO_DATE(SFE.GRANTDATE,'YYYY-MM-DD'),'DD Mon YY') AS GRANTDATE,
       TO_CHAR(TO_DATE(SFE.REVOKEDATE,'YYYY-MM-DD'),'DD Mon YY') AS REVOKEDATE, 
       SFE.feedname  
FROM   SYS_FEED SFE,
       PRINCIPLE P
WHERE  SFE.USERID = P.ID   
AND    date_trunc('month', to_date(GRANTDATE,'YYYY-MM-DD')) <= to_date('Nov-2006','Mon-YYYY'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T12:40:05.243

正如欧文所说：日期没有格式。另外：没有必要对字符进行过多的日期转换。此外：即使对于最终的查询结果，您也可以做一个`SET datestyle;`（对于最常用的样式），并避免所有过度格式化。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE SYS_FEED
        ( USERID INTEGER NOT NULL PRIMARY KEY
        , GRANTDATE DATE NOT NULL
        , REVOKEDATE DATE NOT NULL
        , feedname varchar
        );
INSERT INTO SYS_FEED(USERID, GRANTDATE, REVOKEDATE, feedname)
SELECT sv
        , date('2005-01-01') + sv
        , date('2006-01-01') + sv
        , 'silent_' || sv::text
FROM generate_series( 1,1000) sv
        ;
CREATE TABLE PRINCIPLE
        ( ID INTEGER NOT NULL PRIMARY KEY
        , SURNAME varchar
        );
INSERT INTO PRINCIPLE(ID,SURNAME)
SELECT val
        , 'SHOUT_' || val::text
FROM generate_series( 1,1000) val
        ;

DELETE FROM SYS_FEED WHERE random() < 0.9;
DELETE FROM PRINCIPLE WHERE random() < 0.9;

-- EXPLAIN ANALYZE
SELECT P.SURNAME
       , to_char(SFE.GRANTDATE, 'DD Mon YY') AS GRANTDATE
       , to_char(SFE.REVOKEDATE, 'DD Mon YY') AS REVOKEDATE
       , SFE.feedname AS DONTSHOUTNAME
FROM    SYS_FEED SFE
JOIN    PRINCIPLE P ON SFE.USERID = P.ID
WHERE   GRANTDATE < '2006-12-01'
        ; 
```

结果：

```
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "sys_feed_pkey" for table "sys_feed"
CREATE TABLE
INSERT 0 1000
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "principle_pkey" for table "principle"
CREATE TABLE
INSERT 0 1000
DELETE 901
DELETE 904
  surname  | grantdate | revokedate | dontshoutname 
-----------+-----------+------------+---------------
 SHOUT_53  | 23 Feb 05 | 23 Feb 06  | silent_53
 SHOUT_173 | 23 Jun 05 | 23 Jun 06  | silent_173
 SHOUT_308 | 05 Nov 05 | 05 Nov 06  | silent_308
 SHOUT_337 | 04 Dec 05 | 04 Dec 06  | silent_337
 SHOUT_531 | 16 Jun 06 | 16 Jun 07  | silent_531
 SHOUT_543 | 28 Jun 06 | 28 Jun 07  | silent_543
 SHOUT_566 | 21 Jul 06 | 21 Jul 07  | silent_566
(7 rows) 
```

# javascript - 在复选框选中更改事件中使用 Javascript 中的母版页时无法调用函数

> ID：14029983
> 
> 赞同：1
> 
> 时间：2012-12-25T10:55:21.020
> 
> 标签：javascript, c#-4.0, asp.net-4.0

当复选框状态发生变化时，我试图调用一个函数，它在没有母版页的情况下调用。我尝试了以下代码：

```
<script type="text/javascript">
  $(function () {
    $('#cbOption1').on('change', PublishToPreferredZerker);
  });
  function PublishToPreferredZerker() {}
</script>
[...]
<asp:CheckBox ID="cbOption1" runat="server" style="text-align: left"
  Text="Publish the job to particular Zerker or a group of the Zerkers." /><br /> 
```

使用 MasterPage 时不调用该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:06:52.847

注意`cbOption1`不是客户端ID，而是服务器端的ID。

您需要执行类似的操作（使用*[Control.ClientID 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)*获取 HTML 元素的 id）：

```
$('#<%=cbOption1.ClientID%>').on('change', PublishToPreferredZerker); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:09:15.453

编码

`$('#cbOption1').on('change', PublishToPreferredZerker`);

找到 id 为 cbOption1 的控件，然后对该控件进行操作

但是在母版页上使用此代码时，控件 id 不会保留 cbOption1。

它以母版页内容 ID 为前缀。

类似于 ct$001cbOption1

要使其在使用母版页时工作，请使用这样的代码来查找控件的 clientId：

```
$(#"<%= cbOption1.ClientID %>").on( .... ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:39:59.190

**当我在页面加载**功能上添加以下代码时，我获得了成功。

```
cbOption1.Attributes.Add("onChange", "javascript:PublishToPreferredZerker()"); 
```

**Javascript函数**

```
function PublishToPreferredZerker() {} 
```

我也试过上面的答案，但没有得到所需的输出。谢谢，

# file - 多个模型和上传文件

> ID：14029988
> 
> 赞同：1
> 
> 时间：2012-12-25T10:55:48.753
> 
> 标签：file, upload, yii, models

起初 - 我是 Yii 框架的新手。我自己做了一些研究，但我找不到解决问题的精确方法。

假设有两个相关模型 - 产品和图像。单个产品可能分配有多个图像。创建能够管理这种方案的创建/更新表单的最佳方法是什么？

Image 模型由各种字段以及图像文件的路径组成，因此它不仅仅是路径本身的“容器”。更重要的是 - 我需要为每个上传的图像生成缩略图，并将其路径存储在同一模型中。

我需要实现的与 Django 中已知的管理内联功能非常相似——产品创建/更新表单中应该有一个部分允许用户添加/修改/删除图像。

我尝试了 multimodelform 扩展，但无法上传文件。完成它而不必手动构建整个文件上传启用多模型表单结构的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:57:47.007

详细的解决方案取决于您使用的是 CActiveForm 还是 CHtml 表单。由于您有 2 个相关模型，我假设您正在使用 CActiveForm，并且会指出您需要记住的一些事情。

对于这个例子，我将假设一些具有字段 id 的定义 Product，名称 Product 与 ProductImage 上的“图像”有 ONE to MANY 关系，具有字段 id、productId、path

我还假设会有 1 次上传/编辑，但会多次删除

这是视图：

```
$form = $this->beginWidget(
    'CActiveForm',
    array(
        'id' => 'upload-form',
        'enableAjaxValidation' => false,
        'htmlOptions' => array('enctype' => 'multipart/form-data'),
    )
);

echo $form->labelEx($product, 'name');
echo $form->fileField($product, 'name');
echo $form->error($product, 'name');

echo $form->checkBoxList($product, 'path', $product->images);

echo $form->labelEx($productImage, 'path');
echo $form->fileField($productImage, 'path');
echo $form->error($productImage, 'path');

$this->endWidget(); 
```

而你的行动

```
public function actionUpdate($productId) {

    $product = Product::model()->findByPk($productId)->with('images');
    $productImage = new ProductImage();

    if(isset($_POST['Item']))
    {
        $product->attributes=$_POST['Product'];

        foreach($product->images as $im) {
            if(in_array($im->path, $_POST['Item']['Image']))
                $im->delete();
        }
        $productImage->image=CUploadedFile::getInstance($productImage,'path');
        if($productImage->save())
        {
            $productImage->image->saveAs('some/new/path');
            // redirect to success page
        }
    }
    $this->render('update', array(
            'product'=>$product,
            'productImage'=>$productImage,
        ));
} 
```

现在请注意，此解决方案未经测试，因此会有错误，但它应该让您了解如何编写自己的表单。

资源： [http ://www.yiiframework.com/wiki/2/how-to-upload-a-file-using-a-model/](http://www.yiiframework.com/wiki/2/how-to-upload-a-file-using-a-model/)

[http://www.yiiframework.com/wiki/384/creating-and-updating-model-and-its-related-models-in-one-form-inc-image](http://www.yiiframework.com/wiki/384/creating-and-updating-model-and-its-related-models-in-one-form-inc-image)

# c++ - 如何将坐标转换为 QString

> ID：14029997
> 
> 赞同：0
> 
> 时间：2012-12-25T10:58:04.293
> 
> 标签：c++, qt

我正在使用 Cascades BB10，我想将纬度和经度从 double 转换为 QString，我使用了这段代码

```
QString lat = QString::number(coordinates.latitude());
QString lon = QString::number(coordinates.longitude()); 
```

现在，当我使用以下值进行调试时

```
coordinates.latitude() = 43.481927999999996
coordinates.longitude() = -80.540750000000003 
```

我得到以下字符串：

```
lat = 43.481927999999996
lon = nan 
```

问题是`lon = nan`虽然我期望值为`-80.540750000000003`

是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:29:40.243

试试`QString::number(coordinates.longitude(), 'f', 15)`。

# dart - 我如何告诉 dartdoc 记录所有内容？

> ID：14029998
> 
> 赞同：1
> 
> 时间：2012-12-25T10:58:05.640
> 
> 标签：dart

我试图将我的类分别放在一个文件中，这些类属于几个不同的库。

基本上，这些文件`library inf.logic;`位于顶部：

*   `web/logic/realm.dart`（进口`region.dart`）
*   `web/logic/region.dart`（进口`../events.dart`）
*   `web/logic/tile.dart`

这有`library inf.gfx;`：

*   `web/gfx/viewport.dart`（进口`../logic/realm.dart`）

这只是`library inf;`：

*   `web/events.dart`

`inf`然后我有了主入口点，默认情况下它似乎最终出现在库中：

*   `web/inf.dart`（进口`gfx/viewport.dart`, `logic/realm.dart`, `logic/region.dart`, `logic/tile.dart`）

当我生成 dartdoc 时，它似乎只捕获了一些类，似乎是随机的。尽管主入口点显式使用了上述所有类，但我只得到为`region.dart`and生成的文档`events.dart`。不包括其他文件，并且文档中引用其他类的链接会导致 404。

感觉就像我做错了什么。我应该求助于为库创建一个包装文件并使用`part`and`part of`吗？我真的不喜欢在文件关系之间添加维护需求的想法，这应该已经从导入中隐含了。

另外，我怎样才能摆脱相对路径？我试过`package:inf/logic/realm.dart`了，还是不行……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:10:42.620

Andrei Mouravski 在邮件列表中回答了这个问题：

这里有几个问题：

1.  如果 Dartdoc 正在生成 404 链接，则使用您可能提供的所有信息提交错误。很可能有什么东西坏了。dartbug.com/new

2.  您可以通过传递多个入口点同时记录多个内容。注意：如果你有多个入口点，你应该使用'pkg'命令行选项来指定你的包文件夹。

3.  您不需要包装文件，但 dartdoc 应该记录在入口点中导入的每个库，因此可能只需要一个简单的文件来导入您想要记录的所有库。我们正在为此做一些更好的事情，我很抱歉它现在有点坏了。

# sql-server - 一次查询可以得到两组数据吗

> ID：14029999
> 
> 赞同：4
> 
> 时间：2012-12-25T10:58:05.843
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

我需要从数据库中获取一些项目，每个项目的前三个评论。

现在我有两个存储过程`GetAllItems`和`GetTopThreeeCommentsByItemId`.

在应用程序中我得到 100 个项目，然后在 foreach 循环中我调用`GetTopThreeeCommentsByItemId`程序来获得前三个评论。

我知道从性能的角度来看这很糟糕。

是否有一些技术可以通过一个查询来获得这个？

我可以`OUTER APPLY`用来获得一个顶级评论（*如果有的话*），但我不知道如何获得三个。

```
Items {ItemId, Title, Description, Price etc.}
Comments {CommentId, ItemId etc.} 
```

我想获取的样本数据

*   项目_1
    -- 评论_1
    --评论_2 -- 评论
    _3

*   项目_2——评论_4——
    评论
    _5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:14:07.477

如果您使用的是 SQL Server 2005 及更高版本（您在这方面不够具体），则一种方法是使用 CTE（通用表表达式）。

使用此 CTE，您可以按某些标准（即您的）对数据进行分区，`ItemId`并让 SQL Server 为每个“分区”从 1 开始为您的所有行编号，并按某些标准排序。

所以尝试这样的事情：

```
;WITH ItemsAndComments AS
(
   SELECT 
       i.ItemId, i.Title, i.Description, i.Price,
       c.CommentId, c.CommentText,
       ROW_NUMBER() OVER(PARTITION BY i.ItemId ORDER BY c.CommentId) AS 'RowNum'
   FROM 
       dbo.Items i
   LEFT OUTER JOIN 
       dbo.Comments c ON c.ItemId = i.ItemId
   WHERE
      ......
)
SELECT 
   ItemId, Title, Description, Price,
   CommentId, CommentText
FROM 
   ItemsAndComments
WHERE
   RowNum <= 3 
```

在这里，我为每个“分区”（即每个项目）选择最多三个条目（即评论） - 由`CommentId`.

这是否接近你正在寻找的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:13:03.557

这得到二哥使用 OUTER APPLY：

```
select m.*, elder.*
from Member m
outer apply
(
 select top 2 ElderBirthDate = x.BirthDate, ElderFirstname = x.Firstname
 from Member x 
 where x.BirthDate < m.BirthDate 
 order by x.BirthDate desc
) as elder
order by m.BirthDate, elder.ElderBirthDate desc 
```

源数据：

```
create table Member
(
 Firstname varchar(20) not null, 
 Lastname varchar(20) not null,
 BirthDate date not null unique
);

insert into Member(Firstname,Lastname,Birthdate) values
('John','Lennon','Oct 9, 1940'),
('Paul','McCartney','June 8, 1942'),
('George','Harrison','February 25, 1943'),
('Ringo','Starr','July 7, 1940'); 
```

输出：

```
Firstname            Lastname             BirthDate  ElderBirthDate ElderFirstname
-------------------- -------------------- ---------- -------------- --------------------
Ringo                Starr                1940-07-07 NULL           NULL
John                 Lennon               1940-10-09 1940-07-07     Ringo
Paul                 McCartney            1942-06-08 1940-10-09     John
Paul                 McCartney            1942-06-08 1940-07-07     Ringo
George               Harrison             1943-02-25 1942-06-08     Paul
George               Harrison             1943-02-25 1940-10-09     John

(6 row(s) affected) 
```

现场测试：[http ://www.sqlfiddle.com/#!3/19a63/2](http://www.sqlfiddle.com/#!3/19a63/2)

[marc 的答案](https://stackoverflow.com/a/14030111/11432)更好，如果您需要向主实体查询“近”实体（例如地理空间、哥哥、最接近到期​​日等），只需使用 OUTER APPLY 即可。

外部应用演练：[http ://www.ienablemuch.com/2012/04/outer-apply-walkthrough.html](http://www.ienablemuch.com/2012/04/outer-apply-walkthrough.html)

不过，您可能需要 DENSE_RANK 而不是 ROW_NUMBER/RANK，因为评论的最高标准可能会产生平局。TOP 1 可以产生超过 1 个，TOP 3 也可以产生超过 3 个。该场景的示例（DENSE_RANK 演练）：[http ://www.anicehumble.com/2012/03/postgresql-denserank.html](http://www.anicehumble.com/2012/03/postgresql-denserank.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T11:15:49.737

您可以编写一个调用GetAllItems 和GetTopThreeeCommentsByItemId 的存储过程，在临时表中获取结果并连接这些表以生成您需要的单个结果集。

如果您没有机会使用存储过程，您仍然可以通过从数据访问层运行单个 SQL 脚本来执行相同操作，该脚本调用 GetAllItems 和 GetTopThreeeCommentsByItemId 并将结果放入临时表并稍后将它们加入以返回单个结果集.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T11:57:30.543

最好使用row_number语句选择语句并单独选择前3个

select a.* from ( Select *,row_number() over(partition by column)[dup] ) as a where dup<=3