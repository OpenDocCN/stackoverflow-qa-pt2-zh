# StackOverflow 问答 13833000-13833999

# sql - 查找条件不在数组中的所有匹配条件

> ID：13833010
> 
> 赞同：0
> 
> 时间：2012-12-12T04:51:01.010
> 
> 标签：sql, ruby-on-rails-3, associations

我正在尝试返回一个包含用户数组值的变量。有几个条件必须满足。用户必须`public_find`设置为`true`，它不能是`current_user`（当前登录用户的会话变量），并且它不能已经是友谊的一部分。第一个和第二个条件完美地工作。但是，我遇到了第三部分的问题，其中`current_users.friendships`需要是`ID`已经存在关联的用户值的数组。有什么想法吗？

```
@users = User.find(:all, :conditions => ['
    public_find=true AND 
    id <> ? AND 
    id NOT IN (?)',
    current_user.id, current_user.friendships]) 
```

编辑：

我发现我错过了列表中的 pluck。现在效果很好。但是，如果某人还没有朋友，那么`current_user.friendships.pluck(:friend_id)`将返回`NULL`。我知道这是不好的做法，并且在使用`NOT IN`and时会返回意想不到的结果`NULL`。但是，如果返回的数组为空，您如何创建一个条件，您可以将值设置为 [0] 或 [1] 之类的实际值？

```
@users = User.find(:all, :conditions => ['
    public_find=true AND 
    id <> ? AND 
    id NOT IN (?)',
    current_user.id, current_user.friendships.pluck(:friend_id) || [0]]) 
```

再次编辑：

我让它工作了。但是，现在我想知道这样的声明是否是最佳实践。它基本上是在检查是否`current_user.friendships.pluck(:friend_id)`为空。如果是则返回[0]。否则返回用户 ID 数组（外键为`friend_id`）。

```
@users = User.find(:all, :conditions => ['
    public_find=true AND 
    id <> ? AND 
    id NOT IN (?)',
    current_user.id, 
    (current_user.friendships.pluck(:friend_id).empty? ? [0] : current_user.friendships.pluck(:friend_id))]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:27:40.327

你可以把这个写得更好一点..

显示 public_find 为 true 的所有用户，同时排除当前登录的用户或他们的任何朋友

```
ids = current_user.friendships.map(&:friend_id).concat([current_user.id])
@users = User.where(:public_find => true).where('id not in ?', ids) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:40:24.150

我会为此使用一个 arel 表（这保证代码可以在任何数据库上运行）：

```
t, f = User.arel_table, current_user.friendships
query = t[:public_find].eq(true).and(t[:id].not_eq(current_user.id))
query = query.and(t[:id].not_in(f.pluck(:friend_id))) unless f.empty?
@users = User.where(query) 
```

为以下用户生成 SQL`current_user = 3`并与用户建立单一友谊`id = 1`：

```
SELECT "users".* FROM "users"
WHERE ("users"."public_find" = 't' AND "users"."id" != 3 AND "users"."id" NOT IN (1)) 
```

如果`current_user.friendships`是`nil`，该`unless f.empty?`子句将完全阻止该条件的应用，因此它不会出现在 SQL 中：

```
SELECT "users".* FROM "users"
WHERE ("users"."public_find" = 't' AND "users"."id" != 3) 
```

另外，请注意，由于此代码使用`where`而不是`find`，因此最终结果是`ActiveRecord::Relation`结果数组，而不是结果数组。这意味着您可以进一步将条件链接到它，例如，将结果按 排序`updated_at`，将最后一行更改为：

```
@users = User.where(query).order(:created_at) 
```

# android - 用户完全卸载应用程序后的android推送通知

> ID：13833013
> 
> 赞同：1
> 
> 时间：2012-12-12T04:51:14.630
> 
> 标签：android, notifications, uninstallation

我想知道当用户完全卸载我的应用程序时有什么方法，几天后推送通知要求用户安装新应用程序。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:56:30.180

没有办法，除非客户端安装了您的两个应用程序。但是，不要那样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:18:59.990

您的应用被删除后，您将无法执行操作。不幸的是，Android 包目前无法在删除时执行代码。但是，您可以*在另一个包*[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)中注册一个for ，当包从手机中删除时将调用该包。[`ACTION_PACKAGE_REMOVED`](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REMOVED)

 *另请参阅[此问题](https://stackoverflow.com/questions/3013823/perform-a-task-on-uninstall-in-android)。*

# javascript - 将 node.js 中的文件解压缩到 url 路径

> ID：13833015
> 
> 赞同：0
> 
> 时间：2012-12-12T04:51:31.790
> 
> 标签：javascript, node.js, express, zip, unzip

我在 express 框架中制作一个应用程序，用户上传一个 zip 文件并在网站上查看它。我已经上传了一个 html 文件并查看了它；但是，我似乎无法弄清楚在线提取 zip 文件。我目前可以将 zip 文件存储在数据库中，但是当它从数据库中提取时，似乎不可能将其解压缩到 url 而不是我的磁盘上。你认为我应该从哪里开始尝试解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:21:19.303

我建议使用这个模块：[https](https://github.com/cthackers/adm-zip) ://github.com/cthackers/adm-zip - 当用户上传必须在服务器端解压缩的文件时，我已经成功使用它。我认为本机 zlib API 的文档丢失或尚未提供。让我知道这是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:40:58.577

不确定您使用的是哪种 zip 格式，但它如何工作的一个示例是使用 zlib api： [http ://nodejs.org/api/zlib.html](http://nodejs.org/api/zlib.html)

如果您使用该库创建一个流，您可以在概念上将该流写入响应。在我看来，更大的问题是“解压缩到 url”是什么意思？如果 zip 是包含多个文件的存档，您希望用户在该 URL 上看到什么？

# haskell - Haskell - 最常见的值

> ID：13833017
> 
> 赞同：5
> 
> 时间：2012-12-12T04:51:37.267
> 
> 标签：haskell, recursion, functional-programming

如何在列表示例中获得最常见的值：

```
[1,3,4,5,6,6] -> output 6
[1,3,1,5] -> output 1 
```

我试图通过我自己的功能来获得它，但我无法实现它你们可以帮助我吗？

我的代码：

```
del x [] = []
del x (y:ys) = if x /= y 
            then y:del x y 
            else del x ys

obj  x []= []
obj  x (y:ys) = if x== y then y:obj x y else(obj  x ys)

tam [] = 0
tam (x:y) = 1+tam  y

fun (n1:[]) (n:[]) [] =n1
fun (n1:[]) (n:[]) (x:s) =if (tam(obj x (x:s)))>n then fun (x:[]) ((tam(obj x (x:s))):[]) (del x (x:s)) else(fun (n1:[]) (n:[]) (del x (x:s))) 

rep (x:s) = fun  (x:[]) ((tam(obj x (x:s))):[]) (del x (x:s)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T11:44:25.073

扩展 Satvik 的最后一个建议，您可以使用`(&&&) :: (b -> c) -> (b -> c') -> (b -> (c, c'))`from `Control.Arrow`（请注意，`a = (->)`为简单起见，我在该类型签名中进行了替换）干净地执行[decorate-sort-undecorate transform](https://en.wikipedia.org/wiki/Schwartzian_transform)。

```
mostCommon list = fst . maximumBy (compare `on` snd) $ elemCount
      where elemCount = map (head &&& length) . group . sort $ list 
```

该`head &&& length`函数具有类型`[b] -> (b, Int)`。它将列表转换为其第一个元素及其长度的元组，因此当它与您组合时，`group . sort`您将获得列表中每个不同值的列表以及它出现的次数。

* * *

此外，您应该考虑调用`mostCommon []`. 显然没有合理的价值，因为根本没有元素。就目前而言，所有提出的解决方案（包括我的）都只是在一个空列表上失败，这不是好的 Haskell。正常的做法是返回 a `Maybe a`，其中`Nothing`指示错误（在本例中为空列表）并`Just a`表示“真实”返回值。例如

```
mostCommon :: Ord a => [a] -> Maybe a
mostCommon [] = Nothing
mostCommon list = Just ... -- your implementation here 
```

这要好得多，因为从代码安全的角度来看，部分函数（对于某些输入值未定义的函数）是可怕的。您可以`Maybe`使用模式匹配（在`Nothing`and上匹配）和(preferable and而不是)`Just x`中的函数来操作值。[`Data.Maybe`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html)`fromMaybe``maybe``fromJust`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T06:11:26.467

如果您想从代码中获得一些想法来实现您希望实现的目标，这里有一个示例：

```
import Data.List (nub, maximumBy)
import Data.Function (on)

mostCommonElem list = fst $ maximumBy (compare `on` snd) elemCounts where
    elemCounts = nub [(element, count) | element <- list, let count = length (filter (==element) list)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T06:07:08.537

这里有几个建议

`del`可以使用过滤器来实现，而不是编写自己的递归。在您的定义中有一个错误，您需要在删除时给予`ys`而不是给予。`y`

```
del x = filter (/=x) 
```

`obj``del`与不同的过滤功能相似。同样，在您的定义中，您需要给出`ys`而不是`y`.`obj`

```
obj  x = filter (==x) 
```

`tam`只是`length`功能

```
-- tam = length 
```

您不需要为`n1`和保留一个列表`n`。尽管我没有对您的算法进行任何更改，但我还使您的代码更具可读性。

```
fun n1 n [] =n1
fun n1 n xs@(x:s) | length (obj x xs) > n = fun x (length $ obj x xs) (del x xs)
                  | otherwise             = fun n1 n $ del x xs

rep xs@(x:s) = fun  x (length $ obj x xs) (del x xs) 
```

另一种方式，不是非常理想但更具可读性是

```
import Data.List
import Data.Ord

rep :: Ord a => [a] -> a
rep = head . head . sortBy (flip $ comparing length) . group . sort 
```

我将尝试简短地解释这段代码在做什么。您需要找到列表中最频繁出现的元素，因此首先想到的想法是找到所有元素的频率。Now`group`是一个组合相邻相似元素的函数。

```
> group [1,2,2,3,3,3,1,2,4]
[[1],[2,2],[3,3,3],[1],[2],[4]] 
```

所以我使用排序来将相同的元素彼此相邻

```
> sort [1,2,2,3,3,3,1,2,4]
[1,1,2,2,2,3,3,3,4]

> group . sort $ [1,2,2,3,3,3,1,2,4]
[[1,1],[2,2,2],[3,3,3],[4]] 
```

查找具有最大频率的元素只是减少到查找具有最多元素的子列表。这里有一个函数`sortBy`，您可以使用它根据给定的比较函数进行排序。所以基本上我已经`length`对子列表进行了排序（翻转只是为了使排序降序而不是升序）。

```
> sortBy (flip $ comparing length) . group . sort $ [1,2,2,3,3,3,1,2,4]
[[2,2,2],[3,3,3],[1,1],[4]] 
```

现在您只需花`head`两次时间即可获得频率最高的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T19:43:25.650

假设您已经拥有`argmax`功能。你可以自己写，甚至更好，你可以重用`list-extras`包。无论如何，我强烈建议您看一下包装。

然后，这很容易：

```
import Data.List.Extras.Argmax ( argmax )

-- >> mostFrequent [3,1,2,3,2,3]
-- 3
mostFrequent xs = argmax f xs
  where f x = length $ filter (==x) xs 
```

# php - 存储、更新、删除、预览图像

> ID：13833029
> 
> 赞同：1
> 
> 时间：2012-12-12T04:52:39.573
> 
> 标签：php, javascript, mysql, codeigniter

即使单击刷新，我也试图从数据库中检索图像。

**Javascript函数：**

```
function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result)
                        .width(50)
                        .height(50);
                };
                reader.readAsDataURL(input.files[0]);
            }
        } 
```

现在当我选择文件时，我会得到一个小缩略图，但是当我刷新时，将没有图像。我试图实现的功能，

*   上传文件，显示预览小。- 完成了。
*   当我刷新它时，它必须在那里，因为我现在只专注于一个 ID。

此应用程序用于存储、更新、删除图像[同时始终以小缩略图预览]。我在`Normal PHP`这里使用，应用程序在哪里`CodeIgniter`。

编辑：**所有需要的是 ECHO 最后上传的图像 src。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:54:11.930

您没有将文件保存到服务器，因此当您刷新时，您只是将保存数据的所有 JavaScript 变量吹走。

# c# - 在 C# 中嵌入 Boo 的评估结果

> ID：13833035
> 
> 赞同：1
> 
> 时间：2012-12-12T04:53:29.107
> 
> 标签：c#, boo

我尝试将 Boo 语言嵌入到 C# 项目中。简单代码如下：

```
var interpreter = new InteractiveInterpreter();

interpreter.Declare("Message", typeof(string));
interpreter.SetValue("Message", "A");
interpreter.Eval(@"
    print Message
    Message = 'B'
    print Message
");

Console.WriteLine(interpreter.GetValue("Message")); 
```

两个“打印”命令不输出任何内容，而“Console.WriteLine”子句输出“A”。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:20:25.920

问题在于评估代码的缩进。删除缩进，它应该按预期工作。

# php - 无法显示 MySQL 表中的数据

> ID：13833036
> 
> 赞同：0
> 
> 时间：2012-12-12T04:53:38.303
> 
> 标签：php, mysql, mysqli

我对 MySQL 数据库进行了非常标准的调用，但由于某种原因，我无法使代码正常工作。这是我所拥有的：

```
$mysqli = mysqli_connect("localhost","username","password");
if (!$mysqli)
  {
  die('Could not connect: ' . mysqli_error($mysqli));
  }
session_start();
$sql = "SELECT * FROM jobs ORDER BY id DESC";
$result = $mysqli->query($sql);
$num_rows = mysqli_num_rows($result); 
```

现在，首先，我知道它连接正确，因为我没有得到 die 方法，而且我之前在其中添加了一个 else 条件并且它已检查。然后页面显示，但我收到错误：

```
Warning: mysqli_num_rows() expects parameter 1 to be mysqli_result, boolean given in blablabla/index.php on line 11

Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in blablabla/index.php on line 12 
```

我已经仔细检查了我的数据库，并且有一个名为作业的表，其中有一行“id”（它是主行）。让我感到困惑的是，这是我从我建立的另一个站点复制和粘贴的代码，由于某种原因，该代码在这个站点上不起作用（我显然复制并粘贴了它，然后只是相应地更改了表名和行）。

我看到了错误并尝试了：

```
$num_rows = $mysqli_result->num_rows;
$row_array = $mysqli_result->fetch_array; 
```

并且修复了错误但没有传递任何数据（因为显然 $mysqli_result 没有价值）。我不知道为什么会出现错误（它与其他站点的 MySQL 或 PHP 版本不同）？

有人可以帮我找出问题所在吗？非常感谢。抱歉，如果我忽略了一些超级简单的事情，我已经做了一段时间了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T05:00:50.273

你没有选择数据库

```
$mysqli = mysqli_connect("localhost","username","password","database"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T04:59:29.320

问题是你没有选择数据库。

将此代码用于选择数据库。

```
$mysqli = mysqli_connect("localhost","username","password");
mysqli_select_db("db_name",$mysqli); 
```

您必须选择数据库才能触发 mysql 查询，否则会出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:02:34.570

我相信 schtever 是正确的，我不认为你在选择数据库。它不在代码片段中，如果您在线搜索，您会看到其他人有类似的错误，这是因为未选择数据库。如果您在检查其他任何内容之前选择了数据库，请告知我们。谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T05:07:13.123

试试这个：

```
 session_start();
 $mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);
      if ($mysqli->connect_errno)
       {
           echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
           $mysqli->close();
       }
           $query ="SELECT * FROM jobs ORDER BY id DESC";
            $values = $mysqli->query($query);
                if($values->num_rows != 0)
                    {
                        while($row = $values->fetch_assoc())
                        { 
                            //your results echo here
                        } 
                    }
                    else
                        {
                            //if no results say so here
                        } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-12T05:02:33.703

[有关mysqli_connect](http://php.net/manual/en/mysqli.construct.php)的信息，请参阅本手册，您可以在此功能中选择数据库。

# javascript - 如何使用 XUL 打开网络文件夹

> ID：13833045
> 
> 赞同：2
> 
> 时间：2012-12-12T04:54:50.957
> 
> 标签：javascript, xul, toolbar

如何打开 XUL 的网络文件夹？对于我的 Firefox 工具栏，它可以访问像这样的驱动器，而不是像... 使用代码的`C:`网络路径：`//Development``file.initWithPath("\\DEVELOPMENT2");`

完整代码：

```
var file = Components.classes["@mozilla.org/file/local;1"]
         .createInstance(Components.interfaces.nsILocalFile);

file.initWithPath("\\\DEVELOPMENT2"); //---> this is not working

//file.initWithPath("Y:");  ---> this is working

file.reveal();

var process = Components.classes["@mozilla.org/process/util;1"].createInstance(Components.interfaces.nsIProcess);
    process.init(file);

var args = [];
process.run(false, args, args.length);

//end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:43:13.887

我可以看到两个问题：

*   缺少 bachslash - 你需要两个反斜杠，每个都被转义，这总共有四个反斜杠。意思`"\\\\DEVELOPMENT2"`而不是`"\\\DEVELOPMENT2"`。
*   Firefox 无法打开服务器列表 - 它是虚拟位置，而不是实际文件夹。它可以打开服务器上的任何共享文件夹，但是：

```
var file = Components.classes["@mozilla.org/file/local;1"]
         .createInstance(Components.interfaces.nsILocalFile);

file.initWithPath("\\\\DEVELOPMENT2\\folder");
file.reveal(); 
```

# python - Python商店客户端地址？

> ID：13833047
> 
> 赞同：-1
> 
> 时间：2012-12-12T04:55:23.937
> 
> 标签：python

下面是我的简单服务器代码。

我想存储/打印任何客户端发送数据的地址。

例如输出应该是：

```
Connection from ('127.0.0.1', 61334)

foo from ('127.0.0.1', 61334)

Connection from ('127.0.0.1', 61335)

bar from ('127.0.0.1', 61335)

baz from ('127.0.0.1', 61334)

qux from ('127.0.0.1', 61335) 
```

有人告诉我使用 dict 但我不知道如何使用？

```
import select
import socket

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
server_socket.bind(('', 8888))
server_socket.listen(5)
print "Listening on port 8888"

read_list = [server_socket]
while True:
    readable, writable, errored = select.select(read_list, [], [])
    for s in readable:
        if s is server_socket:
            client_socket, address = server_socket.accept()
            read_list.append(client_socket)
            print "Connection from", address
        else:
            data = s.recv(1024)
            if data:
                s.send(data)
            else:
                s.close()
                read_list.remove(s) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T05:15:41.653

不好意思打扰各位了。

这里的解决方案：

```
import select
import socket

#Global Variables
clientInfo={}

def storeClient(client_socket,address):
    clientInfo[client_socket]=address

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
server_socket.bind(('', 8888))
server_socket.listen(5)
print "Listening on port 8888"

read_list = [server_socket]
while True:
    readable, writable, errored = select.select(read_list, [], [])
    for s in readable:
        if s is server_socket:
            client_socket, address = server_socket.accept()
            read_list.append(client_socket)
            print "Connection from", address
            storeClient(client_socket,address)
        else:
            data = s.recv(1024)
            if data:
                print data, "from: ", clientInfo[s]
                s.send(data)
            else:
                s.close()
                read_list.remove(s) 
```

# python - python - 硒脚本语法错误

> ID：13833051
> 
> 赞同：0
> 
> 时间：2012-12-12T04:55:58.237
> 
> 标签：python, selenium, syntax

好的，我用 selenium 测试了一些自动化，我开始工作了。我为python做了一个脚本的导出。当我尝试运行它生成的 python 脚本时，它给了我一个“SyntaxError：无效语法”错误消息。这是有问题的python脚本：

```
from selenium import selenium
import unittest, time, re

class WakeupCall(unittest.TestCase):
    def setUp(self):
        self.verificationErrors = []
        self.selenium = selenium("localhost", 4444, "*chrome", "http://the.web.site")
        self.selenium.start()

    def test_wakeup_call(self):
        sel = self.selenium
        sel.open("/index.php#deposit")
        sel.wait_for_page_to_load("30000")
        sel.click("link=History")
        sel.wait_for_page_to_load("30000")
        try: self.failUnless(sel.is_text_present("key phrase number 1."))
        except AssertionError, e: self.verificationErrors.append(str(e)) 
```

最后一行是生成“SyntaxError：无效语法”错误消息的原因。逗号下面有个“^”。脚本的其余部分如下：

```
 def tearDown(self):
        self.selenium.stop()
        self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
    unittest.main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:29:45.850

较新版本的 Python 更改了异常处理程序语法。

```
except AssertionError as e: 
```

# oauth - 在 MVC 4 中允许外部登录 OAuth/OpenID 的安全隐患

> ID：13833053
> 
> 赞同：1
> 
> 时间：2012-12-12T04:56:04.237
> 
> 标签：oauth, asp.net-mvc-4, openid, security

我正在考虑在我的 MVC 4 应用程序中允许用户通过 OAuth/OpenID 提供程序等使用外部登录是否有意义。

允许外部登录是否会使您的应用程序比使用标准 FormsAuthentication 或其他方式更安全或更不安全？安全性是最重要的，因为某些账户会有现金价值（用户可以将钱存入他们的账户）。

我特别担心**安全隐患**，但也想知道我需要考虑的任何其他注意事项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:27:07.850

从我的专业经验来看，安全因素不仅仅与所使用的编程语言/技术有关。在您的情况下（MVC 4 和 Microsoft“世界”）已经为您提供了一些选择。但最终“防弹效应”是由“应用程序架构”和开发人员/程序员完成的。

诸如您所指的身份验证提供程序具有许多优点，但同时提供了“知识灰色地带”和“控制权”。“一条链的强度取决于它最薄弱的环节”，这意味着无论您的代码有多好，最终如果您将代码的一个非常重要的部分委托给某个“其他实体”（甚至您不知道他们的代码/数据库/易于破解等有多好，您对此无能为力）。

我不是在这里说 OAuth/OpenID/其他方面的好坏，我只是简单地告诉你最后你应该提出的问题是：“你在你的网站中存储的信息有多安全？”

如果它是一个银行网站，请查看需要信用和验证的安全协议和实体在该领域“工作”的难度和安全性。Visa/万事达卡/其他网络提供商不仅仅是一个简单的“2 个人地下室公司”。背后也有保险公司和大合同试图为双方提供安全保障。

因此，在您的情况下，只有您可以决定在您的网站中存储什么，但您应该提出的另一个问题是：您将所有这些信息存储在哪里？共享主机/您实际无法触及的某些主机公司？备份怎么样？ETC...

如果您谈论的是真钱，则需要考虑很多方面，只有您可以衡量您可以做/负担得起的事情，并希望做出最好的决定，并且永远不会发生坏事:)

祝你好运:)

# java - 是否可以在不会损坏它的图像文件中包含额外信息？

> ID：13833059
> 
> 赞同：2
> 
> 时间：2012-12-12T04:56:37.327
> 
> 标签：java, image

我正在制作一个 Java 程序，我希望能够向图像文件添加额外的信息（只是纯文本，以后可以由同一个程序读取）。我正在考虑将其添加为第一行。

有没有办法在不破坏图像文件的情况下添加这样的信息。我能否以某种方式“评论”该文本，使其不会作为图像二进制文件的一部分被读取（例如，当您在记事本中打开图像时，它会显示在那里）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:58:35.187

这被标记为 Java，但通常，您可以修改图像文件的[EXIF 数据](http://en.wikipedia.org/wiki/Exchangeable_image_file_format)。

另见： http: [//frickelblog.wordpress.com/2009/08/21/java-library-for-reading-writing-exif-xmp-and-iptc-in-jpegs/](http://frickelblog.wordpress.com/2009/08/21/java-library-for-reading-writing-exif-xmp-and-iptc-in-jpegs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T05:18:41.900

大多数图像文件格式允许任意元数据。PNG 图像在“块”中包含像素数据、颜色配置文件、版权等等 - 有关说明，请参见[http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html](http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html)。您可能想要一个 iTXt 或 tEXT 块。

JPEG 还允许元数据。阅读 JFIF 和 EXIF。看到这个答案：[https ://stackoverflow.com/a/10699613/10468](https://stackoverflow.com/a/10699613/10468)

有关Java 特定的答案，请参阅[用 Java 编写图像元数据，最好是 PNG问题。](https://stackoverflow.com/q/6495518/10468)

[Find JPEG resolution with PHP](https://stackoverflow.com/q/262090/10468)中可能也有对您有用的信息，尽管该问题询问的是 PHP 而不是 Java。

如今，TIFF 的出现并不多，但该格式允许为您想要存储的任何数据提供各种额外数据和用户定义的标签。

据我所知，没有图像文件格式可以在文本编辑器中打开或在命令行打印，这将显示为文本元数据，而不是像素乱码。但是，可以定义这样的文件格式 - 如果文件以文本开始，具有 EOT (ascii 03) (iirc)，然后以二进制形式继续，大多数文本命令行工具和可能的文本编辑器将很好地处理文本并停在 EOT。我不确定这是否适用于所有平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:05:16.380

您可以使用 Image Stagenography 隐藏文本。以下是一些可以帮助您执行此操作的链接：[Images' Steganography](http://www.codeproject.com/Articles/18791/Images-Steganography)

[隐写术 - 在图片的噪音中隐藏信息](http://www.codeproject.com/Articles/4877/Steganography-Hiding-messages-in-the-Noise-of-a-Pi)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-24T09:00:47.323

对的，这是可能的。我解释一下算法：

1.  您需要制作一个掩码以使图像的最低有效位的最后一位为零。先做一点，看看对你的形象的影响。然后将最后两位更改为零，看看您的图像是如何受到影响的。继续这个来计算你可以在不影响图像质量的情况下将多少位归零。
2.  获取短信的二进制内容。
3.  计算文本消息的二进制内容的长度。您需要这个来将此值保存在图像的前几个字节中。稍后您将使用它来了解需要读取多少像素才能检索您的消息。

这是主要部分：

4.  假设您只将图像的最后一位设为零，并且保留前 16 位作为消息长度，那么您将需要保留前 16 个像素来保存消息的长度。将消息长度的二进制值（例如 bin(114)）保存在前 16 个像素的最后一位中。您可能需要向右填充零以使其匹配。
5.  从像素 17 开始，在每个像素的最后一位中一点一点地保存您的消息。
6.  要检索嵌入的消息，请读取前 16 个像素，构造长度以了解您需要读取多少像素来重构您的消息。

您甚至可以在图像中保存另一个图像或语音信号。我知道这篇文章被标记为 Java，但为了让您了解一下，您可以在文件“stagenography_embed_text_in_image.py”中查看我在[this_github_link](https://github.com/ErfanEbrahimiBazaz/FAD_HW_Ses4)中实现相同内容的 python 代码。我还解释了在此[stackoverflow_post](https://stackoverflow.com/questions/64978571/image-steganography-with-python-opencv-reconstructing-the-embedded-image-is-ver)中保存其他类型信息的算法。

希望它说清楚。

# objective-c - 修改目标c中xml标签的属性

> ID：13833061
> 
> 赞同：1
> 
> 时间：2012-12-12T04:56:59.287
> 
> 标签：objective-c, xml

我想在某些操作上使用目标 c 修改 xml 属性，例如，我在屏幕上有按钮，我的 xml 标签是

我的节点属性1=""属性2=""属性3=""/mynode

如果attribute3的初始值为NO，在点击按钮时我想将其更改为YES并将其写入项目目录中的xml文件。如果有人知道这件事，请帮助我。我曾尝试使用 GDataXML addattribute 方法，但无法修改标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:37:05.163

无法在 Objective-c 中编辑 XML 文件。如果要执行此操作，则需要创建自己的 xml 文件，或者可以将标签附加到现有 xml。请参考以下代码，我在其中创建了自己的 xml，以附加图像的字节数组并将其添加到原始 xml。

```
//Encode all the data and get the XML string 
            NSString *theXML = [[NSString alloc] 
                                initWithBytes: [clipSvgData bytes] 
                                length:[clipSvgData length] 
                                encoding:NSUTF8StringEncoding];

            //Returns the substring of an main xml file by excluding the extra xml tags
            NSString *startTag = @"<svg";
            NSString *endTag = @"</svg>";
            NSString *responseString;

            NSScanner *scanner = [[NSScanner alloc] initWithString:theXML];
            [scanner scanUpToString:startTag intoString:nil];
            scanner.scanLocation += [startTag length];
            [scanner scanUpToString:endTag intoString:&responseString];
            [scanner release];

            //Remove the SVG tag from main xml
            NSString *startTag1 = @">";
            NSString *endTag1 = @"</svg>";
            NSString *responseString1;

            NSScanner *scanner1 = [[NSScanner alloc] initWithString:[NSString stringWithFormat:@"<svg %@ </svg>",responseString]];
            [scanner1 scanUpToString:startTag1 intoString:nil];
            scanner1.scanLocation += [startTag1 length];
            [scanner1 scanUpToString:endTag1 intoString:&responseString1];
            [scanner1 release];

    NSString *strSVGNode = [NSString stringWithFormat:@"<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"%fpx\" y=\"%fpx\" width=\"%fpx\" height=\"%fpx\" viewBox=\"0 0 141.73 141.73\" enable-background=\"new 0 0 141.73 141.73\"  xml:space=\"preserve\" preserveAspectRatio=\"none\">", imgXPos, imgYPos, imgWidth, imgHeight];

    NSString *strClipXml = [NSString stringWithFormat:@"%@ %@ </svg></g>",strSVGNode ,responseString1];

    //Add the created SVG as new node in main SVG file.
    GDataXMLNode *clipNode = [GDataXMLNode textWithStringValue:[NSString stringWithFormat:@"%@",strClipXml]];
    [xmlDocument.rootElement addChild:clipNode]; 
```

您可以根据您的要求对其进行修改。

# vb.net - 隐藏和显示标签页 vb.net（这里有什么问题？）

> ID：13833062
> 
> 赞同：0
> 
> 时间：2012-12-12T04:56:59.853
> 
> 标签：vb.net, tabcontrol, show-hide, tabpage

表格结构：

a) 在 form1 上有 4 个复选框，而 form2 有一个带有 4 个标签页的 tabcontrol1。

b) form1 上的每个复选框都与 form2 上的标签页链接。

c) 每个标签页都有固定的控件。

我正在尝试使用上述结构实现以下目标，

a) 使用 form1 上的“确定”按钮，我只想向用户显示选中复选框的那些标签页。

b）使用form2上的“取消”按钮，我想恢复所有带有控件的标签页。

* * *

我尝试了以下操作，但它没有按预期工作并添加了空白标签页。

form1上“确定”按钮下的代码：

```
If CheckBox1.Checked Then
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(1))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(2))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(3))
End If
If CheckBox2.Checked Then
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(0))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(2))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(3))
End If
If CheckBox3.Checked Then
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(0))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(1))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(3))
End If
If CheckBox4.Checked Then
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(0))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(1))
   Form2.TabControl1.TabPages.Remove(Form2.TabControl1.TabPages(2))
End If
Me.Hide()
Form2.Show() 
```

Form2上“取消”按钮下的代码：

```
Me.Refresh()
TabControl1.TabPages.Insert(1, TabPage2)
TabControl1.TabPages.Insert(2, TabPage3)
Me.Hide()
Form1.Show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:06:30.317

不要删除标签页，而是使用 TabPage 的 Hide() 和 Show() 函数。

# iphone - 核心数据编辑功能

> ID：13833063
> 
> 赞同：1
> 
> 时间：2012-12-12T04:57:06.687
> 
> 标签：iphone, core-data

我已经有一个包含数据的 tableView。如果您点击一个单元格/行，它会推送到一种`edit`视图。除了以下内容之外，是否还有编辑核心数据的数据：通过编辑，我的意思是我已经将数据插入到我的上下文中。我已将数据加载到视图中，用户可以更改现有数据并重新保存。

。H

//下面是实体/实体的类名'Amm'

```
Amm *amm; 
```

.m

```
 -(IBAction)save
{
[self.amm setValue:self.nameField.text forKey:@"name"];

[self.amm setValue:self.nicknameField.text forKey:@"nickname"];

[self.navigationController popViewControllerAnimated:YES];

NSError *error;

if (![self.managedObjectContext save:&error]) {

        //Handle Error
    }
} 
```

我希望此代码能够正常工作，但是我的应用程序的设计模式不允许此代码像在我的应用程序的其他部分中那样为我工作。非常感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:31:15.267

我假设从你所说的你有：

*   列出您的托管对象的表格视图
*   您可以在其中编辑托管对象的值的视图
*   绑定到保存方法的保存按钮

实际问题是什么？我假设当您点击保存时：

*   self.nameField.text 中的值未设置 self.amm.name
*   self.nicknameField.text 中的值未设置 self.amm.nickname

是对的吗？如果是这样，请尝试以下代码来设置托管对象值：

```
self.amm.name = self.nameField.text
self.amm.nickname = self.nicknameField.text 
```

如果这不是问题并且您实际上正在正确设置托管对象值，那么您是否只需要刷新表格视图？也许使用一些 NSLog 命令来记录应用程序进度的每一步。

# javascript - 如何将一对标签中的文本，如“我的头”中的“

> ID：13833067
> 
> 赞同：0
> 
> 时间：2012-12-12T04:57:57.990
> 
> 标签：javascript, html, dom

例如

```
<h1>my head</h1> 
```

据我所知，下面的代码可以打印`h1`，

```
var el = document.getElementsByTagName('h1')[0];
alert("tag : "+el.tagName); 
```

但是，我怎样才能得到一对标签之间的文本，即`my head`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T04:59:46.750

利用[`element.innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

```
var el = document.getElementsByTagName('h1')[0];
alert("tag : "+el.innerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:00:50.680

试一试`regx`

```
var str = "<h1>my head</h1> ";

var result = str.match(/<h1>(.*?)<\/h1>/g).map(function(val){
   return val.replace(/<\/?h1>/g,'');
}); 
```

经过[`element.innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

```
function getValue(){
var x=document.getElementsByTagName("h1");
alert(x.innerHTML);
} 
```

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/6q5mD/)]]]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:01:43.213

```
alert(el.firstChild.data); 
```

这是 Dom 的正常方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:18:51.773

使用 el.firstChild.nodeValue

```
var el = document.getElementsByTagName('h1')[0]; 
alert("tag : "+el.firstChild.nodeValue); 
```

在这种情况下，使用 innerHtml 也将返回文本值，因为没有子元素，但是如果有任何子元素，它们也会作为字符串（例如，我的头）返回，这听起来不像您想要的。

# java - Java泛型：没有继承的边界

> ID：13833069
> 
> 赞同：0
> 
> 时间：2012-12-12T04:58:03.063
> 
> 标签：java, generics, inheritance

在 java 泛型中，有没有办法告诉某个类型不是另一个类的子类或超类？我的意思是我们可以在某些关系层次结构上使用上限和下限。但是我们怎么能以其他方式做到这一点`<? isNotASubTypeOf A>`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:11:48.593

所以你要

```
<T !extends Foo> 
```

不……不能那样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:56:30.250

虽然这不能回答你的问题，但在这种情况下，我认为 Scala 中的模式匹配非常有用。你可以给他这样的东西。

```
typeVariable match {
case A => //do whatever
case B => //do whatever
case _ => //do whatever 
```

# hadoop - mapreduce 作业的 StreamInputFormat

> ID：13833077
> 
> 赞同：0
> 
> 时间：2012-12-12T04:59:02.097
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我有一个连接到远程系统并使用 sftp 协议从中传输数据的应用程序。我想使用 mapreduce 作业来做同样的事情。我需要一种从输入流中读取的输入格式。我一直在浏览 HStreamInputFormat 和 StreamInputFormat 的文档，但我的 hadoop-2.0 似乎不支持这些类。我该如何进行？任何指向使用输入格式从输入流中读取的教程或示例的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:34:11.647

如果这些 SteamInputFormats 不支持您的需求，那么您最好根据您的自定义需求编写自己的 InputFormat。请阅读[本](http://developer.yahoo.com/hadoop/tutorial/module5.html#inputformat)教程以了解如何编写自己的自定义 InputFormat 和 RecordReader。

# linux - 使用 SNMP 协议通过 SNMP 命令运行脚本会在脚本单独执行时提供不同的输出

> ID：13833078
> 
> 赞同：3
> 
> 时间：2012-12-12T04:59:16.917
> 
> 标签：linux, shell, snmp

我想通过命令执行一个脚本。`SNMP`所以对于我在文件夹下配置`OID`的那个脚本。`snmpd.conf``/etc/snmp`

我的脚本看起来工作只是重定向`"text"`到`output.txt`文件，然后打印在控制台上执行的脚本。

```
#!/usr/bin/ksh 

Input_path="$HOME/input.txt"     
Out_Path="$HOME/output.txt"     

#I have to take the line_num from output.txt which is actually number of line present in output.txt 
line_num=`wc -l <$out` 

#after that i need to take that line from INPUT file
line=`head -$a $Input_path | tail -1 ` 

#i need to uppend data to 1 kb for that i am using typset command
typeset -L1024 line 

#I am increasing value of a
a=`expr $a + 1` 

#same i am echo in file so at this point number of line in file will increase by 1
echo $a >> $Out_Path

#this is the final output which i want .
echo -e "$line\n" 
```

* * *

## **输出**

如果我从节点使用 snmpwalkcommand ...1

snmpwalk 命令的输出是

一个

更新后的 output.txt 文件为 1 2

snmpwalk 命令的输出是

C

更新后的 output.txt 文件为 1 2 3 4

snmpwalk 命令的输出是

C

更新后的 output.txt 文件为 1 2 3 4 5

## 这意味着我得到 a,c,e ...但我需要 a,b,c,d,e

我正在执行这种类型的处理，因为 output.txt 中的数据超过 1 kb，并且我无法在 snmpget 命令中获取超过 1 kb 的记录，这就是我执行此过程以获取整个数据的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:30:39.990

a) 尝试将“shebang”行 ( `#!/bin/sh`) 作为脚本的第一行

b）尝试为您的文件设置完整路径，例如`echo "text" > /tmp/output.txt`

c）确保您写入的路径可由 snmpd 的 UID 写入（`/tmp/`通常是）

# php - 从不同的端口删除 cookie

> ID：13833080
> 
> 赞同：0
> 
> 时间：2012-12-12T04:59:28.087
> 
> 标签：php, cookies, port

> **可能重复：**
> [HTTP cookie 端口是否特定？](https://stackoverflow.com/questions/1612177/are-http-cookies-port-specific)

我有两个具有不同端口的服务器。比方说：

1.  `http://example.com`
2.  `http://example.com:8080`

我在其中**创建**了一个 cookie，`http://example.com:8080`但**无法**从中删除该 cookie `http://example.com/signout.php`

还有一件事：

我之前在使用 http 和 https 时也遇到过同样的问题。在同一个 url ( `http://example.com/signout.php`) 中，cookie 被成功删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:31:41.430

cookie 是否绑定到特定端口似乎有点不确定。看看以下相关问题：

[HTTP cookie 端口是特定的吗？](https://stackoverflow.com/questions/1612177/are-http-cookies-port-specific)

因此，听起来它可能会有所不同，并且依靠您能够跨端口删除 cookie 的假设是不安全的。

# c - 没有#include的C程序 在 Visual Studio 中

> ID：13833085
> 
> 赞同：2
> 
> 时间：2012-12-12T04:59:48.823
> 
> 标签：c, visual-studio-2010

当我在 Visual Studio 2010 中创建一个简单的 C 程序时， [http://debugmode.net/2012/02/06/how-to-write-and-run-ac-program-in-visual-studio-2010/](http://debugmode.net/2012/02/06/how-to-write-and-run-a-c-program-in-visual-studio-2010/)

我删除了“#include < stdio.h >”，

我的程序仍然成功运行，我不明白这怎么可能？

任何帮助表示赞赏。问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:02:55.023

除非您使用在其中声明的函数，否则 stdio.h 标头不是严格要求的，例如：

[http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.12.html](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.12.html)

进一步查看代码，我相信当您没有原型时的默认行为是假设 int 返回类型并从在这种特殊情况下有效的参数类型派生参数类型。但这通常是一种不好的做法，应该避免。

如果它通过编译器/链接器而没有任何警告，您可能需要检查您的环境设置。很容易忘记包含标题，如果您没有注意到它可能会导致很多意外且难以追踪的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:10:20.720

包含标准头文件的主要目的是将标准函数的声明包含到源文件中。

然而，最初的标准 C 语言 (C89/90) 不要求在调用函数之前声明函数（除了可变参数函数，它必须使用原型预先声明以避免未定义的行为）。出于这个原因，只要我们谈论的是非可变函数调用，完全可以在不预先声明标准函数的情况下编写正确的程序，即不包括标准头文件。

例如，`strcmp`使用两个`char *`参数调用函数在 C89/90 中是完全合法的，无需预先声明`strcmp`. 同时，`printf`如果您希望您的程序保持为具有已定义行为的有效 C 程序，则必须使用原型预先声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:03:07.657

该头文件提供了许多常用函数和宏的原型。

如果您不调用任何这些函数或宏，那么您就不需要它。如果您确实调用它们，只要您链接到正确的库，它仍然可以工作。但是，如果编译器没有这些定义，您可能会收到一些编译器错误或警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T05:14:34.107

```
#include < stdio.h > 
```

它是一个称为**标准输入输出文件的头文件**。输入、输出函数都写在这个文件中。诸如此类的功能`printf,scanf`。请参阅此[http://computer.howstuffworks.com/c2.htm](http://computer.howstuffworks.com/c2.htm)

# perl - 为什么本地不适用于 STDERR 和 STDOUT？

> ID：13833088
> 
> 赞同：7
> 
> 时间：2012-12-12T05:00:23.873
> 
> 标签：perl, redirect, stdout, stderr

对于我即将推出的 PulseAudio 库，我想重定向`STDERR`并`STDOUT`在`/dev/null`逻辑上这样做，

```
sub _exec {
    open (*STDERR, '>', '/dev/null');    
    open (*STDOUT, '>', '/dev/null');    
    CORE::system('pacmd', @_ ) or die $?; 
```

但是，这仍然输出到术语....

```
sub _exec {
    local ( *STDERR, *STDOUT );
    open (*STDERR, '>', '/dev/null');    
    open (*STDOUT, '>', '/dev/null');    
    CORE::system('pacmd', @_ ) or die $?; 
```

这给我留下了两个问题

1.  首先，为什么我会遇到我所看到的行为？
2.  其次，是否有更有效的方法不涉及存储旧值并替换它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T05:43:16.617

孩子写入 fd 1 和 2，但您没有更改 fd 1 和 2。您只是用 fd 3 和 4（孩子不关心的东西）创建了新的 Perl 变量（孩子一无所知）。

这是实现您想要的一种方法：

```
use IPC::Open3 qw( open3 );

sub _exec {
    open(local *CHILD_STDIN,  '<', '/dev/null') or die $!;
    open(local *CHILD_STDOUT, '>', '/dev/null') or die $!;
    my $pid = open3(
        '<&CHILD_STDIN',
        '>&CHILD_STDOUT',
        undef,  # 2>&1
        'pacmd', @_,
    );
    waitpid($pid, 0);
    die $! if $? == -1;
    die &? if $?;
} 
```

`open3`水平很低，但比自己做的水平要高得多*。[IPC::Run](http://search.cpan.org/perldoc?IPC%3a%3aRun)和[IPC::Run3](http://search.cpan.org/perldoc?IPC%3a%3aRun3)甚至更高级别。

* * *

* — 它负责将句柄分叉并分配给正确的文件描述符。它处理错误检查，包括使子进程中的预`exec`错误看起来像是启动失败，而不是来自已执行程序的错误。

# java - 如何在java netbeans中显示从ms访问jpanel的图像

> ID：13833089
> 
> 赞同：0
> 
> 时间：2012-12-12T05:00:41.663
> 
> 标签：java, jdbc

我使用的代码：

```
private void okActionPerformed(java.awt.event.ActionEvent evt)        
{                                   
    try {
        String Update = name.getText();

        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        Connection connection = DriverManager.getConnection("jdbc:odbc:NewPData");
        PreparedStatement psmnt = connection.prepareStatement("SELECT Image FROM Table1 where Name='" + Update + "'");
        ResultSet rs = psmnt.executeQuery();
        Blob blob = rs.getBlob("Image");
        int b;
        InputStream bis = rs.getBinaryStream("Image");

        FileOutputStream f = new FileOutputStream("Image.jpg");
        while ((b = bis.read()) >= 0) {
            f.write(b);
        }
        f.close();
        bis.close();

        icon = new ImageIcon(blob.getBytes(1L, (int) blob.length()));

        lblImage.setIcon(icon);

    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

异常显示：

```
 java.lang.UnsupportedOperationException 
```

我首先将图像存储在 ms 访问中，现在我想在标签上显示它。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:14:11.513

这部分代码没有意义。

```
Blob blob = rs.getBlob("Image");
int b;
InputStream bis = rs.getBinaryStream("Image");

FileOutputStream f = new FileOutputStream("Image.jpg");
while ((b = bis.read()) >= 0) {
    f.write(b);
}
f.close();
bis.close();

icon = new ImageIcon(blob.getBytes(1L, (int) blob.length())); 
```

您基本上将 BLOB 从结果集中读取到文件中，然后尝试再次读取它以构建您的图像。您可能已经用尽了流。

为什么不只是阅读图像？

```
icon = new ImageIcon("Image.jpg"); 
```

更好的是，为什么不利用`ImageIO`API 直接读取流，而不需要写出一个临时文件呢？

```
BufferedImage image = ImageIO.read(bis); 
icon = image == null ? null : new ImageIcon(image); 
```

# javascript - require.js - 如何将所需模块的版本设置为 URL 的一部分？

> ID：13833094
> 
> 赞同：4
> 
> 时间：2012-12-12T05:01:11.913
> 
> 标签：javascript, requirejs, browser-cache

我正在使用 require.js 在我的应用程序中要求 JS 模块。

我需要一种通过不同请求的 URL 来破坏新 JS 模块上的客户端缓存的方法。

即，如果文件`hello/there.js`已经缓存在客户端，我可以更改文件名以强制浏览器获取新文件。

换句话说，对于 module `hello/there`，我希望 require.js`hello/there___v1234___.js`根据客户端上可访问的版本字符串来请求 url（文件名可能看起来不同，这只是一个示例）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T04:16:55.943

我对 urlArgs 解决方案感到非常沮丧，最后放弃并直接在 require.js 中[实现了我自己的修复。](https://github.com/jbcpollak/requirejs/commit/589ee0cdfe6f719cd761eee631ce68eee09a5a67)如果您愿意修改您的库版本，此修复将实现您的理想解决方案。

你可以在这里看到补丁：

[https://github.com/jbcpollak/requirejs/commit/589ee0cdfe6f719cd761eee631ce68eee09a5a67](https://github.com/jbcpollak/requirejs/commit/589ee0cdfe6f719cd761eee631ce68eee09a5a67)

添加后，您可以在需要配置中执行以下操作：

```
var require = {
    baseUrl: "/scripts/",
    cacheSuffix: ".buildNumber"
} 
```

使用您的构建系统或服务器环境替换`buildNumber`为修订 ID 或软件版本。

像这样使用要求：

```
require(["myModule"], function() {
    // no-op;
}); 
```

将导致要求请求此文件：

```
http://yourserver.com/scripts/myModule.buildNumber.js 
```

该补丁将忽略任何指定协议的脚本，并且不会影响任何非 JS 文件。

在我们的服务器环境中，我们使用 url 重写规则来去除 buildNumber，并提供正确的 JS 文件。这样我们实际上不必担心重命名我们所有的 JS 文件。

这适用于我的环境，但我意识到有些用户更喜欢前缀而不是后缀，应该很容易修改我的提交以满足您的需要。

以下是一些可能重复的问题：

[RequireJS 和代理缓存](https://stackoverflow.com/questions/18242756/requirejs-and-proxy-caching/21619297#21619297)

[防止 RequireJS 缓存所需的脚本](https://stackoverflow.com/questions/8315088/prevent-requirejs-from-caching-required-scripts)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T05:24:46.777

好的，我为您搜索了“requirejs cache bust”并找到[了这个现有的SO答案](https://stackoverflow.com/a/8479953/266795)，它说您可以使用参数配置requireJS `urlArgs`，这只是部分解决方案，但它可能足以满足您的即时需求。

也就是说，cachebusting 问题充满挑战，许多“解决方案”实际上并不能完全解决问题。唯一可维护的方法（恕我直言，截至目前）是使用完整的资产管理系统，如 Ruby on Rails 资产管道或连接资产或您选择的服务器端框架的等价物。这些可以正确计算每个文件内容的校验和（通常是 MD5 或 SHA1），并为您提供需要作为 URL 放入 HTML`script`标记中的文件名。因此，不要费心根据版本号手动更改文件名，只需使用校验和，因为它们很容易自动化且万无一失。

据我所知，开箱即用的 requirejs 无法为您完成缓存清除方面。您可能想阅读[这个 google groups thread](https://groups.google.com/forum/?fromgroups=#!topic/requirejs/gyg9f7cyDB0)。否则，您可能需要将 requirejs 与其他工具/脚本配对，以获得良好的 cachebuster 校验和。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-25T08:30:20.560

就像 requirejs 的创建者建议的那样做：

```
var load = requirejs.load;
requirejs.load = function (context, moduleId, url) {
  // modify url here
  url = url.substring(0, url.lastIndexOf('.')) + '.' + VERSION + url.substring(url.lastIndexOf('.'));
  return load(context, moduleId, url);
}; 
```

[https://github.com/jrburke/requirejs/wiki/Fine-grained-URL-control](https://github.com/jrburke/requirejs/wiki/Fine-grained-URL-control)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T05:21:39.500

HTML5 Boilerplate 有[ant-build-script](https://github.com/h5bp/ant-build-script)可以重命名您的文件以及出于这个确切原因对它们的任何引用，并且[可以做更多](https://github.com/h5bp/ant-build-script#what-it-does)的事情。如果您还没有，值得一试。

# java - 如何使用 DKIM 签署 Javamail

> ID：13833098
> 
> 赞同：11
> 
> 时间：2012-12-12T05:01:23.580
> 
> 标签：java, email, jakarta-mail, dkim, james

有没有一个库或没有外部库的方法来做到这一点？我使用 apache james 作为我的邮件服务器，目前发送这样的电子邮件：

```
public void sendMessage(String to, String subject, String content) {
    MimeMessage message = new MimeMessage(session);
    try {
        message.addRecipients(Message.RecipientType.TO, to);
        message.setFrom(new InternetAddress(from));
        message.setSubject(subject);
        message.setContent(content, "text/html; charset=utf-8");
        Transport.send(message);
    } catch (MessagingException e) {
        e.printStackTrace();
    }       
} 
```

但我想事先用 DKIM 签署电子邮件。我知道我需要在 james 服务器中实现 DKIM 签名并计划使用 jDKIM 来执行此操作，我也知道我需要使用 www.port25.com 之类的东西创建密钥，但是我之前如何在 java 中实际签署电子邮件我发出来？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-05-11T11:24:46.927

[Simple Java Mail](http://www.simplejavamail.org/#/features)最近添加了对 DKIM 签名的支持。这是您的代码，但现在使用 Simple Java Mail：

```
public void sendMessage(String to, String subject, String content) {
    final Email email = new Email.Builder()
            .from(null, from)
            .to(null, to)
            .subject(subject)
            .textHTML(content)
            .build();

    email.signWithDomainKey(new File(properties.getProperty("mail.smtp.dkim.privatekey")),
                            properties.getProperty("mail.smtp.dkim.signingdomain"),
                            properties.getProperty("mail.smtp.dkim.selector"));

    new Mailer(...).sendMail(email);
} 
```

私钥参数可以是 a`File`或`InputStream`a `byte[]`。

有趣的是，Simple Java Mail 在幕后使用[java-utils-mail-dkim](https://github.com/markenwerk/java-utils-mail-dkim) (GitHub)，它是休眠的[DKIM-for-JavaMail](https://github.com/usrflo/DKIM-for-JavaMail) (GitHub) 的一个活动分支，它是您现在使用的库[DKIM的延续对于 Javamail](https://sourceforge.net/projects/dkim-javamail/) (SourceForge)。所以，你使用的那个很旧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T06:58:34.647

我最终使用了 DKIM for Javamail，可以在以下位置下载： [DKIM For Javamail](http://sourceforge.net/projects/dkim-javamail/ "用于 Java 邮件的 DKIM")

这是一个示例（在下载的示例中有很好的记录）：

```
public void sendMessage(String to, String subject, String content) {
    //Create DKIM Signer
    DKIMSigner dkimSigner = null;
    try {
        dkimSigner = new DKIMSigner(properties.getProperty("mail.smtp.dkim.signingdomain"), properties.getProperty("mail.smtp.dkim.selector"), properties.getProperty("mail.smtp.dkim.privatekey"));
        dkimSigner.setIdentity(properties.getProperty("mail.user") + "@" + properties.getProperty("mail.smtp.dkim.signingdomain"));
        dkimSigner.setHeaderCanonicalization(Canonicalization.SIMPLE);
        dkimSigner.setBodyCanonicalization(Canonicalization.RELAXED);
        dkimSigner.setLengthParam(true);
        dkimSigner.setSigningAlgorithm(SigningAlgorithm.SHA1withRSA);
        dkimSigner.setZParam(true);
    } catch (Exception e) {
    e.printStackTrace();
        }
    if(dkimSigner != null) {
        //Create message
        Message message = new SMTPDKIMMessage(session, dkimSigner);
        try {
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(to, false));
            message.setFrom(new InternetAddress(from));
            message.setSubject(subject);
            message.setContent(content, "text/html; charset=utf-8");
            Transport.send(message);
        } catch (MessagingException e) {
            e.printStackTrace();
        }   
    }           
} 
```

# qt - 2 QMainWindow 粘合 - 布局大小

> ID：13833099
> 
> 赞同：0
> 
> 时间：2012-12-12T05:01:32.910
> 
> 标签：qt, qwidget, qmainwindow

我有一个主窗口，我以这种方式在 main.cpp 中居中：

```
int main(int argc, char *argv[])
{    
     QApplication app(argc, argv);
     QMainWindow *qmain = new QMainWindow;
     Ui_MainWindow ui;
     ui.setupUi(qmain);
     QRect r = qmain->geometry();
     r.moveCenter(QApplication::desktop()->availableGeometry().center());
     qmain->setGeometry(r); 
     qmain->show();
     return app.exec();
} 
```

在这个“qmain”主窗口中，我可以创建另一个 QMainWindow 并尝试将两个窗口粘贴（或粘合，我不知道怎么说）。实际上，我希望第一个的右上角位于第二个的左上角。为此，我使用以下 Ui_MainWindow 的成员函数：

```
void Ui_MainWindow::generate_IC()
{
qmenu = new QMainWindow;
DiskMenu = new Ui_DiskGalMenu;
DiskMenu->setupUi(qmenu);
setInitialDiskMenuPosition(qmenu, this);
qmenu->show();
} 
```

和 setInitialDiskMenuPosition ：

```
void Ui_MainWindow::setInitialDiskMenuPosition(QMainWindow *MainWindow, Ui_MainWindow *parent)
{
        QSize size = parent->widget->size();
        QDesktopWidget* desktop = QApplication::desktop();
        int width = desktop->width();
        int height = desktop->height();
        int mw = size.width();
        int mh = size.height();
        int right = (width/2) + (mw/2);
        int top = (height/2) - (mh/2);
       MainWindow->move(right, top);
} 
```

但问题是我没有得到我想要的，因为中央小部件大小“parent-> widget->size()”只返回小部件的大小，而不是整个“qmain”父窗口。所以我有一个轻微的转变，因为“qmain”窗口的边界没有被考虑在内，如下所示：

![enter image description here](../Images/1f2aeb94040fa14b2b8bf948d08830d6.png)

If I could have access to the size of the whole parent window...

If anyone could help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:12:36.693

According to documentation you need to use parent->widget->frameGeometry().size() instead of parent->widget->size()

# wordpress - 有没有办法过滤页面上的所有内容？

> ID：13833102
> 
> 赞同：0
> 
> 时间：2012-12-12T05:01:43.647
> 
> 标签：wordpress

我需要对页面上的所有内容运行“preg_replace”，包括内部小部件内容、页眉页脚和所有其他显示的位置。如何运行页面上的所有输出？

我想替换页面上可能出现的所有坏词。我只是不知道如何搜索页面上的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:37:03.063

在您的整个内容上运行 preg_replace 在性能方面非常昂贵，我不确定该怎么想，但有一种方法可以做到。

最好的方法是使用输出缓冲区将所有内容放入一个变量中，然后随心所欲地摆弄它，然后输出最终结果。

它看起来像这样：

```
// starts the output buffer
ob_start(); 

// In your case this is where all the content output is going to go. This echo is just a sample
echo "badword\n"; 

// get all the buffered content output
$OB = ob_get_contents(); 

// clean the buffered content, and also end the output buffer 
ob_end_clean(); 

// run a replace on all the buffered content, and echo it out
echo preg_replace("/badword/", "BEEP", $OB); 
```

# javascript - 我们可以将 mql 查询输出导出到 Google Docs

> ID：13833115
> 
> 赞同：1
> 
> 时间：2012-12-12T05:02:57.330
> 
> 标签：javascript, google-drive-api, freebase-acre

我正在尝试创建一个 freebase acre 应用程序，它可以跟踪某些用户记录并将 mql 查询输出导出到 Google Docs。

是否可以以英亩为单位将 mql 查询输出导出到 Google Docs？

编辑#1

我发现了这个[文档](https://developers.google.com/drive/quickstart-js)，通过它我可以使用 javascript 将数据导出到 Google Docs。

编辑#2

我可以将文件上传到驱动器，但我需要用它创建一个电子表格。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:08:52.887

这可以使用 Google Drive SDK。我成功导出查询输出，但无法在此处共享代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:24:44.570

如果您可以将结果导出为 CSV，则可以使用它们创建 Google 电子表格。重要的一点是要记住设置：

```
convert=true 
```

插入时的查询参数将确保您的文件正确转换为 GOogle 电子表格。

# php - 从客户端的 IP 地址检测时区

> ID：13833131
> 
> 赞同：0
> 
> 时间：2012-12-12T05:04:19.397
> 
> 标签：php, api, datetime, timezone

有没有办法检测到我的客户的 IP 地址，然后用它来跟踪他的时区。我目前正在使用这个代码块和一个 API：

```
 function getIpAddress() {
    return (empty($_SERVER['HTTP_CLIENT_IP'])?(empty($_SERVER['HTTP_X_FORWARDED_FOR'])?$_SERVER['REMOTE_ADDR']:$_SERVER['HTTP_X_FORWARDED_FOR']):$_SERVER['HTTP_CLIENT_IP']);
}

    ini_set("allow_url_fopen",1);
    $getfunc= 'getIpAddress';
    $getfunc= 'getIpAddress'; 
    $json   = file_get_contents('http://smart-ip.net/geoip-json/'.$ip);
    $ipData = json_decode( $json, true);
    $ipadd   = $ipData['host'];
    $geotz  = $ipData['timezone'];
    $geotzd = 'Passed';
    $cntry  = $ipData['countryName']; 
```

$ip 返回 122.54.230.162。但仍然说我的问题是

```
 Message: Undefined index: timezone 
```

在服务器上测试它会显示这个错误，而在本地没问题..我需要帮助

最好的祝福..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:22:56.443

有多种猜测时区的方法。使用您的问题中的服务就是其中之一，尽管该代码在我看来就像获取本地计算机的时区，但我可能是错的。无论如何，这似乎并不可靠。

另一种方法是[jstimezonedetect](https://bitbucket.org/pellepim/jstimezonedetect) javascript 库。

# c++ - 在循环中复制构造函数调用

> ID：13833134
> 
> 赞同：-1
> 
> 时间：2012-12-12T05:04:43.070
> 
> 标签：c++

我使用以下类：

```
#include <list>

class A {
public:
    A();
    A(const A&);
    ~A();
    list<A> createCopies();

private:
    int *cells;
};

A::A() {
    this->cells = new int[5];
    for(unsigned int i = 0; i < 5; i++) {
        this->cells[i] = 0;
    }
}

A::(const A &oldA) {
    this->cells = new int[5];
    for(unsigned int i = 0; i < 5; i++) {
        this->cells[i] = oldA.cases[i];
    }
}

A::~A() {
    delete[] this->cells;
}

list<A> A::createCopies() {
    list<A> listA;

    for(unsigned int i = 0; i < 3; i++) {
        A newA = A(*this); // or A newA(*this)?
        A.cells[i] = 1;
        listA.push_back(newA);
    }

    return listA;
} 
```

但是，编译器似乎总是在列表中推送相同的对象。我认为对复制构造函数的调用会阻止...

我错了吗 ？我是否需要使用`new A`创建对象的方式（从而在某处管理它们的破坏）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:07:23.810

你遇到了未定义的行为，因为你忘记了

```
return listA; 
```

你最好还是用一个`std::array`。如果您选择保留这种方法，您还需要一个赋值运算符。

我假设您的实际成员是`int* cells;`.

# iphone - 是否有任何服务器以 JSON/XML 格式提供穆斯林祈祷时间？

> ID：13833136
> 
> 赞同：15
> 
> 时间：2012-12-12T05:05:01.040
> 
> 标签：iphone, ios, json

我需要在我的 iOS 应用程序上进行穆斯林祈祷（Umm Al-qura Makkah 时间）。是否有任何服务器以 JSON 或 XML 格式提供这些信息？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T05:18:48.403

像这样？[http://xhanch.com/xhanch-api-islamic-get-prayer-time/](http://xhanch.com/xhanch-api-islamic-get-prayer-time/)

根据该站点，以下 URL 将以 JSON 格式返回所需数据：

```
http://api.xhanch.com/islamic-get-prayer-time.php?lng=55&lat=25&yy=2012&mm=12&gmt=4&m=json 
```

**更新**

根据一些评论者的说法，一些额外的资源（保留在这里，以免他们迷路）

*   [http://aladhan.com/rest-api](http://aladhan.com/rest-api)
*   [https://prayertimes.date/api](https://prayertimes.date/api)
*   @obaid 说“你可以浏览[https://praytimes.org](https://praytimes.org)，你会得到很多关于 Namaz 时间的资源。”

# python - 在scrapy python中获取错误

> ID：13833143
> 
> 赞同：4
> 
> 时间：2012-12-12T05:05:18.847
> 
> 标签：python, scrapy

我有这个代码。当我使用 yyield 请求更多链接时，我得到了这个错误

```
Spider must return Request, BaseItem or None, got 'dict' 
```

我已经尝试了很多，但我无法摆脱错误

代码在这里

```
def parse_items(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select("//li[contains(concat(' ', @class, ' '), ' mod-searchresult-entry ')]")
    items = []

    for site in sites[:2]:

        item = SeekItem()
        item['title'] = myfilter(site.select('dl/dd/h2/a').select("string()").extract())
        item['link_url'] = myfilter(site.select('dl/dd/h2/em').select("string()").extract())
        item['description'] = myfilter(site.select('dl/dd/p').select("string()").extract())
        if  item['link_url']:
                      yield Request(urljoin('http://www.seek.com.au/', item['link_url']),
                      meta = item,
                      callback = self.parseItemDescription)

        yield item

def parseItemDescription(self, response):

    item = response.meta
    hxs = HtmlXPathSelector(response)
    sites = hxs.select("//li[contains(concat(' ', @class, ' '), ' mod-searchresult-entry ')]")
    item['description'] = "mytest"

    return item 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:33:14.803

你用的是哪个版本的scrapy。0.16.2 的文档有这种[将项目传递给另一个回调](https://scrapy.readthedocs.org/en/0.16/topics/request-response.html#passing-additional-data-to-callback-functions)的方法。

```
def parse_items(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select("//li[contains(concat(' ', @class, ' '), ' mod-searchresult-entry ')]")
    items = []

    for site in sites[:2]:
        item = SeekItem()
        item['title'] = myfilter(site.select('dl/dd/h2/a').select("string()").extract())
        item['link_url'] = myfilter(site.select('dl/dd/h2/em').select("string()").extract())
        item['description'] = myfilter(site.select('dl/dd/p').select("string()").extract())
        if item['link_url']:
            request = Request("http://www.example.com/some_page.html", callback=self.parseItemDescription)
            request.meta['item'] = item
            return request

def parseItemDescription(self, response):

    item = response.meta['item']
    hxs = HtmlXPathSelector(response)
    sites = hxs.select("//li[contains(concat(' ', @class, ' '), ' mod-searchresult-entry ')]")
    item['description'] = "mytest"

    return item 
```

注意：这是未经测试的，因为您的其余代码（蜘蛛、items.py 等）丢失了，我不确定它是如何运行的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T05:09:32.863

# 两次产量

你让步了两次——第一次是**Request**；第二个是**dic**。( *yield Request(...)*和*yield item* )

我猜第二次是不必要的，应该删除。试试这个并在下面评论。（删除说*yield item*的行）

# iphone - 使过渡动画在 IOS 中持续更长时间

> ID：13833145
> 
> 赞同：2
> 
> 时间：2012-12-12T05:05:24.887
> 
> 标签：iphone, ios, animation, transitions

我有一个从 UIViewController 到 UITabBarViewController 的过渡，过渡效果很好，但是欣赏效果所花费的时间太快了。所以我想知道是否有办法让这个过渡动画持续更长时间？

这是我的 AppDelegate.m

```
@implementation AppDelegate

@synthesize window = _window;
@synthesize tabBarController = _tabBarController;
@synthesize LoadingViewController = _LoadingViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

     self.window.rootViewController = self.LoadingViewController;
    [self.window addSubview:tabBarController.view];
    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(changeView) userInfo:nil repeats:NO];

    [self.window makeKeyAndVisible];
    return YES;
}

-(void)changeView{

    self.tabBarController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; 

    [self.window.rootViewController presentModalViewController:self.tabBarController animated:YES];
} 
```

这段代码在我的两个控制器之间进行了转换。首先是我的 ViewController，2 秒后是我的 TabBarViewController。但正如我所说，这个动画太快了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:10:33.967

使用此代码...

```
-(void)changeView{

  //  self.tabBarController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; 
       CATransition *animation = [CATransition animation];
        [animation setDelegate:self];   
        [animation setType:kCATransitionFade];
        [animation setDuration:0.5];// increase time duration with your requirement
        [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                      kCAMediaTimingFunctionEaseInEaseOut]];
        [[self.window layer] addAnimation:animation forKey:@"transitionViewAnimation"];

   self.window.rootViewController = self.tabBarController;
   [self.window makeKeyAndVisible];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:07:46.993

你的目标是什么iOS？如果你对 iOS5+ 满意，你可以使用 Storyboards 和 Custom Segues。

# php - 在php中下载pdf的文件代码

> ID：13833146
> 
> 赞同：2
> 
> 时间：2012-12-12T05:05:28.123
> 
> 标签：php, pdf

```
$path = BASE_URL."/pdf/"; 
$filename= $path.basename($_GET['download_file']);

header("Cache-Control: public");
header("Content-Description: File Transfer");
header('Content-disposition: attachment; 
filename='.basename($filename));
header("Content-Type: application/pdf");
header("Content-Transfer-Encoding: binary");
header('Content-Length: '. filesize($filename));
readfile($filename);
exit; 
```

此代码有效，但我`Error in reading pdf file`在打开下载的 pdf 时得到了。在上面的代码中，我从该位置获取文件`http://localhost//eec//pdf/CV_Prabin Mishra.pdf`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:08:20.880

`BASE_URL`最后可能有一个斜线，所以你不需要额外的：

```
$path = BASE_URL."pdf/"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:37:22.400

我看不到您在哪里设置了 $filename 的值，您在 $fullPath 中设置了 PDF 的位置，然后使用 $filename 将其读出。我认为代码应该是

```
$path = BASE_URL."/pdf/"; 
$fullPath = $path.basename($_GET['download_file']);

header("Cache-Control: public");
header("Content-Description: File Transfer");
header('Content-disposition: attachment; 
filename='.basename($fullPath));
header("Content-Type: application/pdf");
header("Content-Transfer-Encoding: binary");
header('Content-Length: '. filesize($fullPath));
readfile($fullPath);
exit; 
```

# javascript - Javascript/Ajax/Json：发送对象和数组

> ID：13833147
> 
> 赞同：0
> 
> 时间：2012-12-12T05:05:28.670
> 
> 标签：javascript, jquery, ajax, json

我有一个表格，人们可以在其中输入他们的客户。

此表单允许用户根据需要添加任意数量的电话号码、电子邮件和地址。

电话和电子邮件对于添加的每一行都有类型和数据字段，`(phone_type, phone_data)`而地址对于每一行都有类型、街道、城市、州和邮政编码字段`(address_type, address_street, address_city, address_state, address_zip)`。

例如，当用户添加电话字段时，它会添加：

```
<input type="text" name="phone_type[]" />
<input type="text" name="phone_data[]" /> 
```

我需要通过 Ajax 将表单数据发送到 PHP 以处理并存储在数据库中。

我曾想过将它存储在一个对象中的数组中。

```
phone = new Object();
var phone.data = new Array(), 
phone.type = new Array();
$("input[name='phone_data[]']").each(function() {
  if($(this).val() != '') {
  phone.data.push($(this).val());
  phone.type.push($('select[name="phone_type[]"]').val());
}) 
```

这似乎不起作用。我什至正确地接近这个？

此外，一旦我将它放入通过 Ajax 发送到 PHP 页面的对象中，我如何获取这些值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:10:08.833

序列化您的表单...使用`data`ajax 将序列化数据发送到服务器...

```
 data:$('#YourFORMID').serialize(); 
```

这是查看示例的文档...

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

并在您的 PHP 中获取数据（如果您使用 ajax 类型作为帖子）

```
 $data=$_POST['phone_data'];
 $type=$_POST['phone_type']; 
```

如果`ajax type : GET`

```
 $data=$_GET['phone_data'];
 $type=$_GET['phone_type']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:07:48.130

您是否正在尝试重新发明 jQuery 的[serialize()](http://api.jquery.com/serialize/)

```
var frm = $("#myForm");
var values = frm.serialize();

//make Ajax call
$.post("someUrl", values, function(){} ); 
```

[http://jsfiddle.net/BZcja/](http://jsfiddle.net/BZcja/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:22:22.543

你绝对可以使用 jQuery `serialize()`。在触发处理的事件中，您可以执行以下操作：

```
$.ajax({  
    type: "POST",  
    url: "your_php_processing_page.php",  
    data: $("#FormID").serialize(),  
    dataType: "json",  
    success: function(data){
        // do stuff here
    },  
    error: function() {  
        // do stuff here             
    }  
}); 
```

在`your_php_processing_page.php`您可以获取如下值：

```
$phone_types = $_POST["phone_type"];
$phone_data = $_POST["phone_data"]; 
```

# cocos2d-iphone - 如何使用cocos2d在iphone（纵向模式）的左侧和右侧随机显示精灵？

> ID：13833149
> 
> 赞同：1
> 
> 时间：2012-12-12T05:06:03.503
> 
> 标签：cocos2d-iphone

我是这个 cocos2d 的新手。我正在使用 cocos2d 在 iPhone 中开发一款游戏，因为我必须在 iPhone 的左侧和右侧显示精灵（纵向模式）。我试过这样。array_obstacle 是一个包含障碍物的 ccarray。在第一部分中，我原样使用了 array_obstacles。在第二部分中，我使用相同的障碍物缩放了该精灵。在这里，我使用了两个精灵来在 iphone 的左侧和右侧显示精灵（纵向模式）。现在，我只想使用一个精灵在 iphone 的左侧和右侧显示精灵（纵向模式）。有人可以建议我吗？

```
int ran = arc4random() % [array_obstacles  count];

randomSprite = [CCSprite spriteWithSpriteFrameName:[array_obstacles  objectAtIndex:ran]];
int minX = 250;//(winSize.width/2)-120;
int maxX =300; //(winSize.width/2)+120;
int rangeX = maxX - minX;
int actualX = (arc4random() % rangeX) + minX;

randomSprite.position = ccp( actualX,winSize.height+randomSprite.contentSize.width);

[spriteSheetBatch addChild:randomSprite];

id actionMove2 = [CCMoveTo actionWithDuration:1.5 position:ccp(actualX,-randomSprite.contentSize.width)];

[randomSprite runAction:actionMove2];

     int r = arc4random() % [array_obstacles   count];
myRandomSprite = [CCSprite spriteWithSpriteFrameName:[array_obstacles   objectAtIndex:r]];int min_X = -50;//(winSize.width/2)-120;
int max_X =160; //(winSize.width/2)+120;
int range_X = max_X +min_X;
int actual_X = (arc4random() % range_X) + min_X;
myRandomSprite.position = ccp( actual_X,winSize.height+myRandomSprite.contentSize.width);
 id actionMove1 = [CCMoveTo actionWithDuration:1.5 position:ccp(actual_X,-myRandomSprite.contentSize.width)];                                                         
myRandomSprite.scaleX = -1.0f;
 [myRandomSprite runAction:actionMove1]; 
```

# cakephp-2.1 - 如何保存蛋糕 php 控制器的更改？

> ID：13833155
> 
> 赞同：0
> 
> 时间：2012-12-12T05:06:50.800
> 
> 标签：cakephp-2.1

我在 cakephp 中烘焙了一个项目。我已经在控制器中进行了自定义修改，当我再次烘焙代码时，这些更改会丢失。有什么办法可以保留这些更改？我是cakephp的新手，请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:44:00.783

不，如果您将文件保留在 app 目录中，您将丢失这些更改，因为 Bake Console 将覆盖它们。

那你能做什么？那么你可以：

1.  在新应用程序中烘焙（只需连接到同一个数据库），然后将更改与现有控制器合并。对于合并，您可以使用[Diffuse](http://diffuse.sourceforge.net/download.html) - 一个非常漂亮且占用空间小的合并编辑器，适用于几乎所有操作系统（Linux、Mac OS、BSD 和 Windows）。

2.  备份您现有的应用程序并对其进行烘焙。然后将您所做的更改合并回应用程序。

最好使用方法 1。如果您的更改比您希望烘焙的部分更多的代码。这可能是现有控制台功能的一个很好的附加组件。也许通过原始烘焙版本和当前更改版本的差异。但是我不确定这是否需要，因为这个想法是最初烘烤然后发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:20:49.547

如果您只是尝试烘焙新控制器并且不想覆盖现有控制器，而不是使用“全部烘焙”，您可以使用“烘焙控制器”。然后它会提示您使用哪个模型进行烘焙。

# javascript - 游戏倒计时音乐

> ID：13833157
> 
> 赞同：0
> 
> 时间：2012-12-12T05:06:56.917
> 
> 标签：javascript, html

这是一个小的 html 文件，它创建一个计时器图像并在我单击它时播放计时器音乐。

```
<html>
    <head>
        <script language="javascript" type="text/javascript">
            function playSound(soundfile) {
                document.getElementById("dummy").innerHTML = "<embed src=\"" + soundfile + "\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
            }
        </script>
    </head>
    <body>
        <table width="100%" height="100%">
            <tr>
                <td align="center" valign="middle">
                    <a href="#" onclick="playSound('timer.mp3');">
                        <img src="timer.png"/>
                    </a>
                </td>
            </tr>
        </table>
        <span id="dummy"></span>
    </body>
</html> 
```

我是 JavaScript 新手，但这是我想要的：

> 当用户单击图像时，应不间断地播放音乐，直到用户再次单击图像。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:25:10.167

```
<audio id="player" controls="controls"></audio>     Remove "control" if you don't
<button onClick="playFile('timer.mp3')">Play/Stop</button>            need it.

var playing = false;                                    //pre set plaing to false
function playFile(n){
    var player = document.getElementById("player");     //get the <audio>
    player.src = n;                                     //set the url
    playing = !playing;                                 //flip the status
    playing ? player.play(): player.stop();             //play/stop
    player.addEventListener("ended", function(){        //When ended,
        player.play();                                  //play again
        //do other stuff
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:27:31.670

```
 <audio id="myAudio" controls preload loop>
  <source src="http://media.w3.org/2010/07/bunny/04-Death_Becomes_Fur.mp4" type='audio/mp4'>
   <source src="http://media.w3.org/2010/07/bunny/04-Death_Becomes_Fur.oga" type='audio/ogg; codecs=vorbis'>
    Your user agent does not support the HTML5 Audio element.
   </audio>
     <img src="img/ex1.png" onclick="aud_play_pause()"/>
       <script>
        function aud_play_pause() {
      var myAudio = document.getElementById("myAudio");
      if (myAudio.paused) {
    myAudio.play();
       } else {
      myAudio.pause();
       }
  }
   </script> 
```

使用此代码在图像按钮上不间断地播放音频。在源 src 中设置您的音频。

# php - php如何获取目录中最后修改的文件

> ID：13833160
> 
> 赞同：1
> 
> 时间：2012-12-12T05:07:07.947
> 
> 标签：php, directory

> **可能重复：**
> [在目录中获取最后修改的文件？](https://stackoverflow.com/questions/5448374/get-last-modified-file-in-a-dir)

我有一个文件夹，其中包含超过 30000 个子文件夹。如何获取上次修改日期 >= 一小时前的子文件夹列表？是否可以在不获取数组中所有文件的列表并对其进行排序的情况下做到这一点？我不能使用`readdir`函数，因为它按照文件系统存储文件的顺序返回文件，并且对文件列表的详尽搜索将花费很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:20:26.910

使用 GNU Find - 它更简单、更快捷！

```
find [path] -type d -mmin +60 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:23:23.527

linux“查找”命令非常强大。

```
$cmd = "find ".$path." type -d -mmin +60";
$out=`$cmd`;
$files=explode("\n",$out); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T05:28:10.037

```
Give this a try:

<?php
$path = 'path/to/dir';

if (is_dir($path)) {
  $contents = scandir($path);

  foreach ($contents as $file) {
    $full_path = $path . DIRECTORY_SEPARATOR . $file;

    if ($file != '.' && $file != '..') {
      if (is_dir($full_path)) {
        $dirs[filemtime($full_path)] = $file;
      }
    }
  }

  // Sort in reverse order to put newest modification at the top
  krsort($dirs);

  $iteration = 0;

  foreach ($dirs as $mtime => $name) {
    if ($iteration != 5) {
      echo $name . '<br />';
    }

    $iteration++;
  }
}
?> 
```

# java - 通过消化器解析大 XML

> ID：13833161
> 
> 赞同：0
> 
> 时间：2012-12-12T05:07:11.073
> 
> 标签：java, xml, apache-commons-digester

我们正在使用 Apache 的 Digester API 来解析 xml 文件。它适用于小文件，但解析 1.8GB 文件确实很慢。XML 结构非常简单。在配置文件标签下，它包含配置文件标签列表。

已经20多个小时了，创建对象的过程还在进行中。

有没有办法改善这一点？或者任何用于处理单体 XML 的专门库？

谢谢，哈沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:24:17.103

我希望 STAX 对您解析大型 xml 文件有所帮助。

[http://stax.codehaus.org/Home](http://stax.codehaus.org/Home)

# ontology - Protégé 4 上的 SWRL 选项卡和 Jess 选项卡支持

> ID：13833166
> 
> 赞同：1
> 
> 时间：2012-12-12T05:07:21.743
> 
> 标签：ontology, owl, protege, pellet, protege4

我需要在 Protégé 4 上将 SWRL 选项卡和 Jess 选项卡添加到我的本体中，但我找不到对 Jess 的任何支持。Protégé 4 是否对 Jess 有任何支持或插件，或者有其他替代品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T14:23:07.827

Protege 4.x 中有一个支持 SWRL 推理的 Pellet 插件：

[http://clarkparsia.com/pellet/protege/](http://clarkparsia.com/pellet/protege/) （推理可以在Reasoner/选择Pellet后启动reasoner开始）

这是一个关于 Protege 4.x 和 SWRL 集成的非常完整的教程：

[http://dior.ics.muni.cz/~makub/owl/](http://dior.ics.muni.cz/~makub/owl/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:48:06.600

Protege 3.x 之后没有 SWRL 标签插件支持；可以使用不带 SWRL 选项卡的 Protege 4 启用规则编辑器。请参考附图。

![Protege 4.2 测试版屏幕截图](../Images/fbfbb21c47158bc855d5d95d9c3dce8a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T10:52:28.017

版本 4 似乎不支持它，但您仍然可以编辑 swrl 规则。

请参见此处：[Protege 4 中的 SWRL 选项卡](https://stackoverflow.com/questions/12366438/swrl-tab-in-protege-4)

# caching - 关于缓存算法的一些事情

> ID：13833168
> 
> 赞同：0
> 
> 时间：2012-12-12T05:07:39.727
> 
> 标签：caching, optimization, cpu

假设我们有一些位于某个固定内存地址的数组经常被访问和更新（与访问频率相比更新频率要低得多），如果数组的大小很小，现代 CPU 通常可以缓存整个数组? 数组的更新/访问可以完全在缓存而不是主内存存储中完成吗？

根据我过去的经验，我测试的几个 Intel CPU 可能就是这种情况，但我需要更多关于缓存算法的详细信息（对于任何最近的 CPU 模型来说都很难找到）以优化我的算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:12:11.030

写入可以是回写式或直写式，具体取决于所讨论的特定 CPU。大多数现代 CPU 都支持回写。

*可以*从缓存中进行多次读取，这取决于几个因素，包括

*   计算机上正在发生什么其他处理（其他事情可能会从缓存中驱逐您的阵列）。
*   多个核心是否正在访问阵列。每个核心通常都有自己的缓存。

有关 Intel 缓存架构的信息，请参阅

*   [http://en.wikipedia.org/wiki/MESI_protocol](http://en.wikipedia.org/wiki/MESI_protocol) （英特尔 CPU）
*   [http://en.wikipedia.org/wiki/MOESI_protocol（AMD64](http://en.wikipedia.org/wiki/MOESI_protocol) CPU）
*   [http://en.wikipedia.org/wiki/MERSI_protocol（PowerPC](http://en.wikipedia.org/wiki/MERSI_protocol) CPU）

# mysql - 如何在 mysql 中计算或查看我的数据库的性能？

> ID：13833169
> 
> 赞同：5
> 
> 时间：2012-12-12T05:07:43.200
> 
> 标签：mysql, database, performance, database-design

我想在 mysql 中检查我的数据库的性能。我用谷歌搜索并开始了解 show full processlist 等命令，但不是很清楚。我只想知道和计算数据库在占用多少堆内存等方面的性能。

有什么方法可以了解和评估数据库的性能。这样我就可以优化和提高性能。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:21:39.613

基本工具是[MySQL Workbench](http://dev.mysql.com/downloads/workbench/)，它可以与任何最新版本的 MySQL 一起使用。它不像企业版那么强大，但它是一个很好的起点。

配置可以通过 暴露，`SHOW VARIABLES`系统的当前状态通过 暴露`SHOW STATUS`。这些状态数字最终在大多数工具中被绘制出来。

不要忘记您可以在应用程序端进行大量监控，例如打开数据库日志。除非您可以在 MySQL 中启用“慢查询”日志以检查哪些查询影响最大。然后可以诊断出这些`EXPLAIN`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:09:44.440

下载[mysql企业工具](http://www.mysql.com/products/enterprise/monitor.html)。它们将允许您监控服务器上的负载以及单个查询的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T08:53:07.130

您可以使用 Percona 的开源工具（称为 Percona Toolkit）并开始使用一些有用的工具，这些工具可以帮助您高效地归档行、查找重复索引、汇总 MySQL 服务器、分析来自日志和 tcpdump 的查询以及在出现问题时收集重要的系统信息。

您可以尝试使用`Performance_Schema`MySQL v5.6 及更高版本中可用的表进行试验，这些表可以提供查询、数据库统计信息的详细信息。 [http://www.markleith.co.uk/2012/07/04/mysql-performance-schema-statement-digests/](http://www.markleith.co.uk/2012/07/04/mysql-performance-schema-statement-digests/)

# silverlight - 无法远程调试 Silverlight 应用程序（Mac <-> PC）

> ID：13833173
> 
> 赞同：0
> 
> 时间：2012-12-12T05:08:07.307
> 
> 标签：silverlight, remote-debugging

[按照这些说明](http://msdn.microsoft.com/en-us/library/cc903948%28v=vs.95%29.aspx)设置了我的 Mac 和 PC 后，我仍然无法附加到在 OS X 中运行的进程。

“无法附加到进程。未安装调试组件。”

有人见过这个吗？我用谷歌搜索了它，什么都没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:21:34.930

在我让 windows update 在 windows 上安装 Silverlight 的安全更新后，我在我的机器上收到了完全相同的错误消息。我认为根本原因是 Silverlight 运行时的不同版本。我建议执行以下操作：

确保 windows 和 mac 都安装了开发人员运行时，并且版本相同。最新的在这里：

[http://www.microsoft.com/en-us/download/details.aspx?id=36946](http://www.microsoft.com/en-us/download/details.aspx?id=36946)

之后，在 OSX 上重新启动配置生成程序，生成新配置（顶部按钮），然后生成新 PC 配置（底部按钮）。

关闭visual studio，在windows上运行配置exe，然后打开visual studio。

我遵循了这些步骤，并且能够再次进行远程调试。

# google-maps-api-3 - 如何更改制造商图标

> ID：13833174
> 
> 赞同：2
> 
> 时间：2012-12-12T05:08:13.543
> 
> 标签：google-maps-api-3

我想在时钟到达晚上 10 点时更改标记图标，并在早上 6 点时返回相同的图标.. 我如何从某个地方选择正确的时钟时间？以及如何将图标更改为这样的时间谢谢！

我的代码

```
 function initialize() {

    var mapDiv = document.getElementById('map-canvas');
    var map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(-22.968015,-43.183161),
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP       });

  var green = 'images/VERDE.png';
  var yellow = 'images/AMARELO.png';
  var red = 'images/VERMELHA.png';

  var marker = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(-22.967311,-43.186073),      
      icon:  green}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:01:38.123

以下代码根据时间更改标记。

```
var now=new Date().getUTCHours();
now -= 2;//Set for Rio Adjust to your time zone 
var startTime = 22;//10 PM
var finishTime = 6;//6 AM
var icon;

function initialize() {

var mapDiv = document.getElementById('map');
var map = new google.maps.Map(mapDiv, {
    center: new google.maps.LatLng(-22.968015,-43.183161),
    zoom: 16,
    mapTypeId: google.maps.MapTypeId.ROADMAP       });
var green = 'images/green.png';
var yellow = 'images/yellow.png';
var red = 'images/red.png';
//Choosing icon by time
if(now >= finishTime&&now < startTime){
    icon = green;
}else {
    icon = red;
}

var marker = new google.maps.Marker({
  map: map,
  position: new google.maps.LatLng(-22.967311,-43.186073),      
  icon:  icon}); 
```

}

需要注意的地方。

1.  仅适用于一个时区。
2.  如果需要，您将需要更改`now -= 2`以适应冬季节省的当地时间。
3.  边界值可能需要调整。

# html - 以谷歌地图为背景的居中内容区域？

> ID：13833182
> 
> 赞同：1
> 
> 时间：2012-12-12T05:09:30.707
> 
> 标签：html, css, google-maps

好的，我尝试使用谷歌地图作为背景等，但由于 V3 更新，所有这些都失败了。谁能帮我解决我的问题？

无论如何，我想要一个 900 像素宽的居中网页，并且在网页中居中，当您滚动时，只会出现更多地图。

索引.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0                                                              Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 

<head>

    <title>test</title> 

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
    <meta property="og:description" content="test." />
    <meta property="og:image" content="http://wadehammes.com/dewey-beach/map-thumb.JPG" />

    <link href="main.css" rel="stylesheet" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css' />
    <link href='http://fonts.googleapis.com/css?family=Share:700' rel='stylesheet' type='text/css'> 

    <script src="http://maps.google.com/maps?file=api&v=2&key=abcdefg&sensor=false" type="text/javascript"></script>
    <script language="Javascript" type="text/javascript" src="map.js"></script>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

    <style type="text/css" media="screen">
        iframe { vertical-align: top; }
    </style>
</head>

<body onload="initialize()" onunload="GUnload()">
    <!-- Using the Little Web Things jQuery Countdown -     http://www.littlewebthings.com/2010/02/jquery-countdown-script/ -->

    <div class="content">
        <h1>Test</h1>   
        <p>Welcome</p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam         molestie, purus eu euismod semper, tellus dolor placerat erat, eu egestas tortor justo eget elit. Sed dolor orci, gravida nec lacinia eu, bibendum vitae lectus. Phasellus luctus interdum malesuada. Sed in nibh a felis mattis euismod fermentum eu lectus. Donec non risus diam, in ullamcorper orci. Fusce pulvinar sapien nec turpis aliquet pellentesque. Nunc id nisl vel est ultrices sollicitudin. Cras tempor posuere condimentum. Aenean viverra, mauris a volutpat congue, sem urna placerat mi, eu ultricies sem nunc sed metus. In vel nibh enim. Suspendisse lacinia dui ac nisl placerat at pulvinar ipsum aliquet.
        <br />
        <br />
        Aenean vitae purus elit, at mattis elit. Suspendisse odio massa, tempus ac dignissim eu, pretium in lectus. Nullam sed diam ipsum, nec mollis urna. Cras vestibulum ante et tortor hendrerit eget consequat mi sollicitudin. Duis porttitor tempus mi, eget pharetra nunc facilisis at. In ipsum risus, ullamcorper in accumsan non, porttitor quis sem. Donec nibh libero, porta vel tincidunt ut, congue semper eros. Nulla facilisi. Praesent vitae urna ut diam laoreet tincidunt. Quisque vestibulum pulvinar ipsum, quis consequat metus porta sit amet. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc dignissim sem nec nulla tempus imperdiet.
        <br />
        <br />
        Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque non nisl purus, nec adipiscing sem. Etiam commodo augue et tortor egestas tempus. Sed a felis sapien. Ut et orci vel elit rutrum consectetur sed sed elit. Etiam vel turpis velit, non luctus nisl. Donec in purus sed sem suscipit posuere. Praesent laoreet scelerisque fringilla. Etiam blandit vehicula sem, quis consequat dui auctor sodales. Phasellus varius, elit sed tincidunt egestas, leo velit ultrices diam, quis ullamcorper enim nisi sed arcu. Duis magna nulla, tempor id faucibus nec, volutpat vitae leo. Donec mattis velit in tortor laoreet ornare. Nullam facilisis tortor sit amet dui scelerisque fermentum. Nam augue sem, suscipit vitae tincidunt in, auctor aliquam tortor. Vestibulum vel est et mi porta sollicitudin.
        <br />
        <br />
        Proin lectus magna, viverra eu scelerisque non, accumsan adipiscing purus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus ut nulla turpis. Etiam convallis mi et nibh faucibus ullamcorper. Nunc eu metus consequat nunc laoreet convallis. Praesent purus augue, sodales sed rutrum quis, facilisis vel sapien. Curabitur sed risus sapien. Suspendisse sagittis, nulla at semper lacinia, metus augue lacinia ipsum, ut fermentum tellus est in magna. Morbi consectetur dolor mi.
        <br />
        <br />
        Vestibulum vitae lacus non nisi viverra ultricies non in magna. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In non quam id libero porttitor semper rhoncus quis justo. Phasellus tincidunt aliquet quam vel faucibus. Aliquam blandit sapien dapibus enim tempus viverra. Nunc eget risus id neque venenatis suscipit. Donec interdum augue fringilla nibh vulputate dignissim. Cras sollicitudin massa ullamcorper sem accumsan eu auctor dolor scelerisque. Sed iaculis dictum risus ut rutrum. Aliquam erat volutpat. Sed interdum dictum sapien at pulvinar.
        <br />
    </div>

    <!--Map Background-->
    <div id="map_canvas" style="position: absolute; top: 0; bottom: 0; left: 0;     right: 0; z-index: 100;"></div> 

</body>

</html> 
```

地图.js：

```
/*Google Maps API V3  */
function initialize() {
var centerLng = new google.maps.LatLng(38.693482,-75.057564);
var myOptions = {
  zoom: 8,
  center: centerLng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

var markerLng = new google.maps.LatLng(38.693281,-75.075159);
var marker = new google.maps.Marker({
  position: markerLng, 
  map: map, 
  title:"Hello World!"
} 
```

主.css：

```
/* CSS FOR DEWEY BEACH SITE */
body:before {
      content: "";
      position: fixed;
      top: -10px;
      left: 0;
      width: 100%;
      height: 10px;

      -webkit-box-shadow: 0px 0px 10px rgba(0,0,0,.8);
          -moz-box-shadow: 0px 0px 10px rgba(0,0,0,.8);
                     box-shadow: 0px 0px 10px rgba(0,0,0,.8);

      z-index: 102;
}

div#map_canvas {  
position: absolute;
position: fixed; 
height:1300px;
top: 0; 
bottom: 0; 
left: 0; 
right: 0; 
z-index: 0;
}

iframe { vertical-align: top; }

.content{

font-family: 'Helvetica Neue' Helvetica, arial, sans-serif; 
z-index: 101;
    background-color: black;
color: white;
padding: 25px;
position: absolute; left: 50%;
    width: 900px;
    height: 1200px;
    margin: auto;
margin-left: -475px; /* half the value of the width */

};
}

.little {
font-size: 11pt;
font-family: 'Helvetica Neue' Helvetica, arial, sans-serif;
text-shadow: none;
color: #2e4352;
text-shadow: 0px 1px 1px #77a0bc;
line-height: 1.4em;
}

.little a {
text-decoration: none;
color: #2e4352;
text-shadow: 0px 1px 1px #77a0bc;
}

.little a:hover {
color: #212121;
}

#wh-app {
position: absolute;
left: 0;
top: 0;
z-index: 4000;
}

#top_right{
background-color: white;
} 
```

看到这些都不起作用：/ 对不起，草率的代码，我无法让它正确显示。

我已经尝试并使用了这个：[http](http://blog.wadehammes.com/post/3837158298) ://blog.wadehammes.com/post/3837158298 ，但它仍然无法正常工作。

# highcharts - HighChart - 未链接到图表的自定义路径

> ID：13833191
> 
> 赞同：2
> 
> 时间：2012-12-12T05:10:03.700
> 
> 标签：highcharts, highstock

我有一个 HighStock 图表，它正在提取一些 OHLC 数据并创建一个包含 3 个系列的图表 - 1 个烛台、1 个交易量和 1 个标志集。这一切都很好。

我想在图表中添加一些自定义趋势线。我将根据自定义逻辑确定点并执行路径。

问题是当我使用`Renderer`图表绘制路径时，路径未连接到底层图表。随着图表日期范围的修改和/或新点被添加到主要`series`的，我的自定义路径的位置和大小保持不变。它是恒定的。

我需要将自定义路径的位置/端点绑定到图表的数据点，而不是 svg 绘图的坐标。有没有办法做到这一点？

这是添加从`pointa`to的简单路径的代码部分`pointb`。路径按预期呈现，但随后是静态的：

```
 buildPath: function(pointa, pointb){
        this.myChart.renderer.path(this.buildPathArray(pointa,pointb))
            .attr({
                'stroke-width': 2,
                stroke: 'red'
            }).add();
    },
    buildPathArray: function(pointa, pointb){
        var pathArray = [];
        pathArray.push('M');
        pathArray.push(pointa.plotX);
        pathArray.push(pointa.plotClose);
        pathArray.push('L');
        pathArray.push(pointb.plotX);
        pathArray.push(pointb.plotClose);
        pathArray.push('Z');
        return pathArray;
    } 
```

根据请求，我创建[了一个演示一般问题的 JS Fiddle。](http://jsfiddle.net/M8yd7/72/)

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:25:55.323

**解决了**

Highcharts 似乎并不是免费提供的。或者如果是这样，我没有找到技术。

我必须同时`load`使用`redraw`我`chart`的`StockChart`.

在 上`load`，我绘制初始路径，与`Point`趋势线中涉及的对象对齐。当我构建这些`path`对象（`SVGElement`包含真正的 SVG`path`元素的对象）时，我会在一个数组中跟踪它们。

在 上`redraw`，我既要破坏旧的趋势线，又要创造新的趋势线。所以我循环遍历我的旧元素数组并将每个元素从它们自己的`parentNode`. 然后我根据每个相关`Point`对象的新绘制位置绘制新版本的趋势线。

最终结果是，在每个`redraw`事件中，线条似乎会随着图表移动，而实际上它们正在被销毁和重新创建。

# c# - 在按钮单击中调用 SSRS 报告，需要以 PDF 文件格式输出

> ID：13833194
> 
> 赞同：2
> 
> 时间：2012-12-12T05:10:16.893
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

我有一个网格视图，我在其中放置了一个链接按钮来打印报告。在此按钮单击事件中，我需要调用 SSRS 报告并需要将输出作为 PDF 文件。

我使用了下面的代码，代码运行良好，但我看不到打开/保存 pdf 文件的提示。

```
 protected void btnAuthenticateAndPrint_Click(object sender, EventArgs args)
     {
       try
        {

        //Getting Values from grid
        LinkButton lb = (LinkButton)sender;
        GridViewRow row = (GridViewRow)lb.NamingContainer;
        Label lbOrderID = row.FindControl("lbOrderID") as Label;
        int OrderId = Convert.ToInt32(lbOrderID.Text);
        da = new SqlDataAdapter("Get_PODetails", con);
        da.SelectCommand.CommandType = CommandType.StoredProcedure;
        da.SelectCommand.Parameters.AddWithValue("@MPDI_ID", OrderId);
        ds = new DataSet();
        da.Fill(ds, "PO");
        if (ds.Tables["PO"].Rows.Count > 0)
        {
            lblPOId.Text=ds.Tables["PO"].Rows[0]["MPDI_ID"].ToString();
            lblVendid.Text = ds.Tables["PO"].Rows[0]["MVDI_ID"].ToString();
            lblBranch.Text = ds.Tables["PO"].Rows[0]["MBRI_ID"].ToString();
            lblDate.Text = Convert.ToDateTime(ds.Tables["PO"].Rows[0]["MPDI_Date"]).ToString("dd-MM-yyyy");
        }

        //SSRS Report Print
        rs = new RSWebService.ReportingService2005();
        rsExec = new REWebService.ReportExecutionService();
        rs.Credentials = System.Net.CredentialCache.DefaultCredentials;
        rsExec.Credentials = System.Net.CredentialCache.DefaultCredentials;
        rs.Url = "http://localhost/ReportServer/ReportService2005.asmx";
        rsExec.Url = "http://localhost/ReportServer/ReportExecution2005.asmx";
        byte[] Sendresults = null;
        byte[] bytes = null;
        string historyID = null;
        string deviceInfo = @"<DeviceInfo><Toolbar>False</Toolbar></DeviceInfo>";
        string format = "PDF";
        string encoding = null;
        string mimeType = null;
        string extension = null;
        REWebService.Warning[] warnings = null;
        string[] streamIDs = null;
        string _reportName = @"/FIMO GOF Assets Reports/PURCHASE ORDER";
        REWebService.ExecutionInfo ei = rsExec.LoadReport(_reportName, historyID);
        REWebService.ParameterValue[] parameters = new REWebService.ParameterValue[4];
        parameters[0] = new REWebService.ParameterValue();
        parameters[0].Name = "MVDI_ID";
        parameters[0].Value = lblVendid.Text;
        parameters[1] = new REWebService.ParameterValue();
        parameters[1].Name = "MBRI_ID";
        parameters[1].Value = lblBranch.Text;
        parameters[2] = new REWebService.ParameterValue();
        parameters[2].Name = "MPDI_Date";
        parameters[2].Value = lblDate.Text;
        parameters[3] = new REWebService.ParameterValue();
        parameters[3].Name = "ReportParameter1";
        parameters[3].Value = lblPOId.Text;
        rsExec.SetExecutionParameters(parameters, "en-us");
        Sendresults = rsExec.Render(format, deviceInfo, out extension, out encoding, out mimeType, out warnings, out streamIDs);
        MemoryStream ms = new MemoryStream(Sendresults);

        //To create a PDF
        if (format == "PDF")
        {
            Response.ContentType = "application/pdf";
            Response.AddHeader("Content-disposition", "inline;filename=output.pdf");
            Response.AddHeader("Content-Length", Sendresults.Length.ToString());
        }
        Response.OutputStream.Write(Sendresults, 0, Sendresults.Length);
        Response.OutputStream.Flush();
        Response.OutputStream.Close();

      }
       catch(Exception Ex)
       {
        throw Ex;
        }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:23:10.867

您可以使用 URL 访问，如下所述：http: [//msdn.microsoft.com/en-us/library/ms154040 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms154040(v=sql.105).aspx)

```
http://<Server Name>/reportserver?/Sales/YearlySalesSummary&rs:Format=PDF&rs:Command=Render 
```

# javascript - Gruntjs 监视不同的文件夹并执行任务

> ID：13833196
> 
> 赞同：17
> 
> 时间：2012-12-12T05:10:28.640
> 
> 标签：javascript, node.js, watch, gruntjs

我想知道是否可以配置一个监视任务来监视两个不同的文件夹并在每个文件夹上执行不同的任务。例如，每当 /folder1 发生变化时，应执行 task1，每当 /folder2 发生变化时，应执行 task2。

文件夹结构如下：root |-folder1 |-folder2

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-12T06:06:58.540

**Watch**的行为就像一个多任务，所以是的，您可以将其配置为观看不同的文件集并执行不同的任务

```
watch:{
  set1: {
    files: [ 'folder1/**/*' ],  //<- this watch all files (even sub-folders)
    tasks: ['task1']
  },
  set2: {
    files: ['folder2/**/*'],
    tasks: ['task2']
  }
}, 
```

然后你可以运行一个监视任务或两者

```
grunt.registerTask('watchSet1', ['watch:set1']);
grunt.registerTask('watchSet1And2', ['watch:set1', 'watch:set2']); 
```

尚未测试，但它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-16T09:04:39.747

如果您希望监视任务同时运行。[RobW](https://stackoverflow.com/a/19323371/2108366)在这里有一个很好的解决方案[How to run two grunt watch tasks 同时](https://stackoverflow.com/questions/17585385/how-to-run-two-grunt-watch-tasks-simultaneously)

我花了一些时间找到解决方案，所以这是该解决方案的片段。

在自定义任务中动态编写配置对象是可行的。

```
grunt.registerTask('watch:test', function() {
  // Configuration for watch:test tasks.
  var config = {
    options: {
      interrupt: true
    },
    unit: {
      files: [
        'test/unit/**/*.spec.coffee'
      ],
      tasks: ['karma:unit']
    },
    integration: {
      files: [
        'test/integration/**/*.rb',
        '.tmp/scripts/**/*.js'
      ],
      tasks: ['exec:rspec']
    }
  };

  grunt.config('watch', config);
  grunt.task.run('watch');
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-09T08:33:26.117

最好且唯一可行的解​​决方案是：[https](https://npmjs.org/package/grunt-focus) ://npmjs.org/package/grunt-focus添加此插件，然后：

```
focus: {
            sources: {
                include: ['js', 'html', 'css', 'grunt']
            },
            testu: {
                include: ['js', 'html', 'css', 'testu', 'grunt']
            },
            testi: {
                include: ['js', 'html', 'css', 'testu', 'testi', 'grunt']
            }
        },
        watch: {
            js: {
                files: paths.js,
                tasks: ['jshint'],
                options: {
                    livereload: true
                }
            },
            html: {
                files: paths.html,
                options: {
                    livereload: true
                }
            },
            css: {
                files: paths.css,
                tasks: ['csslint'],
                options: {
                    livereload: true
                }
            },
            testu: {
                files: ['test/**/*.js', 'test/**/*.css'],
                tasks: ['mochaTest'],
                options: {}
            },
            testi: {
                files: ['test/**/*.js', 'test/**/*.css'],
                tasks: ['exec:cleanTestDB', 'protractor_webdriver', 'protractor'],
                options: {}
            },
            grunt: {
                files: ['Gruntfile.js', 'server/config/env/*.js'],
                options: {
                    reload: true
                }
            }
        } 
```

然后你可以使用 focus:sources 或 focus:testu 作为你的方便。

JM。

# javascript-events - 样板 4.0 - 未定义 javascript 函数

> ID：13833198
> 
> 赞同：1
> 
> 时间：2012-12-12T05:10:35.667
> 
> 标签：javascript-events

我正在使用 Boilerplate 4.0，main.js 加载在 body 标记的底部。我正在尝试将页脚编写为脚本，以便更轻松地更新版权年份，即在 main.js 与每个 html 文件中。html 中的函数引用在加载 main.js 之前出现，所以我不断收到“Uncaught ReferenceError: (function) is not defined”错误。我可以在页脚部分之前加载 main.js 并且一切正常，但这不会破坏目的吗？

html代码：

```
 <footer id="page-footer">
        <script src="js/footer.js"></script>
            <h5>
            <script>footera();</script>
            <strong><a href="main.html"><script>footerb();</script></a></strong>
            <script>footerc();</script>
            </h5>
    </footer> 
```

main.js 代码：

```
 function footera() {
        document.write("Copyright&copy; 2012, "); 
    }
   function footerb() {
    document.write("<name>, "); 
    }
    function footerc() {
        document.write("all rights reserved"); 
    } 
```

# python - Python 中有没有类似于 Ruby 的 Rufus-Scheduler 的内存中作业调度程序

> ID：13833199
> 
> 赞同：1
> 
> 时间：2012-12-12T05:10:38.427
> 
> 标签：python, asynchronous, scheduler

只是想知道 Python 是否有类似的东西：[https ://github.com/jmettraux/rufus-scheduler](https://github.com/jmettraux/rufus-scheduler)

我不希望将任何数据库（postgres、redis 等）附加到它。

我检查了 RQ 和 Celery，但找不到他们是否能够在没有数据库的情况下执行此操作。

理想情况下，我不必启动任何工人。我希望它在主 python 进程中运行。我相信 Ruby 通过 EventMachine 做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:16:43.507

对于一次性计划任务，请查看[APScheduler](http://pypi.python.org/pypi/APScheduler/1.01)，这里是介绍页面[http://packages.python.org/APScheduler/#introduction](http://packages.python.org/APScheduler/#introduction)

对于定期任务，请查看这个 SO 问题 -[在 Python 中执行定期操作](https://stackoverflow.com/questions/8600161/how-to-execute-periodic-actions-in-python)

# regex - AttributeError：基于 re.compile 模式

> ID：13833200
> 
> 赞同：1
> 
> 时间：2012-12-12T05:10:43.333
> 
> 标签：regex, python-3.x

我是 Python 的新手，我很确定这只是一个金发碧眼的时刻，但过去几天它一直在逼我。

我在第 106 行不断收到“elif conName.search(line): AttributeError: 'list' object has no attribute 'search'”

如果我将第 54 行中的模式替换为第 50 行中的模式，则第 106-113 行运行良好，但在第 114 行出现相同的错误。

当我注释掉第 105-123 行时，代码的其余部分工作得最好。

当我注释掉第 106-109 行时，第 110-113 行运行良好，但在第 114 行出现同样的错误。

```
##  This should be line 19
html_doc = """
        <title>Flickr: username</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta property="og:title" content="username" />
        <meta property="og:type" content="flickr_photos:profile" />
        <meta property="og:url" content="http://www.flickr.com/people/Something/" />
        <meta property="og:site_name" content="Flickr" />
        <meta property="og:image" content="http://farm79.staticflickr.com/1111/buddyicons/99999999@N99.jpg?1234567890#99999999@N99" />

                <li>
                <a href="/groups/theportraitgroup/">The Portrait Group</a>
                <span class="text-list-item">
        1,939,830 photos,&nbsp;125,874 members    
                </span>
        </li>
                <li>
                <a href="/groups/412762@N20/">Seagulls Gone Wild</a>
                        <span class="text-list-item">
                2,266 photos,&nbsp;464 members
                </span>
                                                        </li> """

from urllib.request import urlopen
from bs4 import BeautifulSoup
import fileinput
import re
                                ##  This should be line 46
## Strips for basic group data
Tab      = re.compile("(\t){1,}")                                                    # strip tabs
ID       = re.compile("^.*/\">")                                    # Group ID, could be ID or Href
Href     = re.compile("(\s)*<a href=\"/groups/") # Strips to beginning of ID
GName    = re.compile("/\">(<b>)*")                                    # Strips from end of Href to GName

## Persons contact info
conName  = re.compile("(\s)*<meta property=\"og\:title\" content=\"")        # Contact Name 
##conName = re.compile("(\s)*<a href=\"/groups/")
conID    = re.compile("(\s)*<meta property=\"og\:image.*\#")                    # Gets conName's @N ID
conRef   = re.compile("(\s)*<meta property=\"og\:url.*com/people/")

Amp   = re.compile("&amp;")
Qt    = re.compile("&quot;")                                                
Gt    = re.compile("&gt;")
Lt    = re.compile("&lt;")

exfile = 1        ## 0 = use internal data, 1 = use external file

InFile = html_doc

if exfile:
        InFile = open('\Python\test\Group\group 50 min.ttxt', 'r', encoding = "utf-8", errors = "backslashreplace")
        closein = 1        ## Only close input file if it was opened
else:
        closein = 0

OutFile = open('C:\Python\test\Group\Output.ttxt', 'w', encoding = "utf-8", errors = "backslashreplace")
cOutFile = open('C:\Python\test\Group\ContactOutput.ttxt', 'w', encoding = "utf-8", errors = "backslashreplace")

i = 1    ## counter for debugging

                                ##  This should be line 80
for line in InFile:
##    print('{}'.format(i), end = ', ') ## this is just a debugging line, to see where the program errors out
##    i += 1
        if Href.search(line):
                ln = line
                ln = re.sub(Href, "", ln)
                gID, Name = ln.split("/\">")
                Name = Name[:-5]    ## this removes the "\n" at EOL as well
                if "@N" in gID:
                        rH = ""
                else:        
                        rH = gID
                        gID = ""

##        sLn = '{3}\t{0}\t{1}\t{2}\n'.format(Name, gID, rH, conName)
                sLn = '{0}\t{1}\t{2}\n'.format(Name, gID, rH, conName)
                        ##  Replace HTML codes
                sLn = re.sub(Gt, ">", sLn)
                sLn = re.sub(Lt, "<", sLn)
                sLn = re.sub(Qt, "\"", sLn)
                sLn = re.sub(Amp, "&", sLn)

                OutFile.write(sLn)
                        ##  This should be line 104
                #################################################    
        elif conName.search(line):
                ln = line
                ln = re.sub(conName, "", ln)
                conName = ln.split("\" />")
        elif conID.search(line) is not None:
                ln = line
                ln = re.sub(conID, "", ln)
                conID = ln.split("\" />")
        elif conRef.search(line) is not None:
                ln = line
                ln = re.sub(conRef, "", ln)
                conRef = ln.split("\" />")
        else:
                pass

        sLn = '{0}\t{1}\t{2}\n'.format(conID, conRef, conName)
        cOutFile.write(sLn)        ## I know, this will make a massive file with duplicated data, but deal w/ it later
                #################################################

if closein:
        InFile.close()
OutFile.close()
cOutFile.close() 
```

有没有人有任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:23:04.027

> 我在第 106 行不断收到“elif conName.search(line): AttributeError: 'list' object has no attribute 'search'”

这意味着`conName`此时是一个列表。实际上，您将下面的 2 行分配`conName`给一个列表：

```
conName = ln.split("\" />") 
```

在第一次`conName.search()`返回成功匹配后，您将其更改为列表，因此对于文件中的以下行（下一个循环迭代）`conName.search`会产生错误。

# javascript - 如何从变量中设置 JS 对象属性名称

> ID：13833204
> 
> 赞同：210
> 
> 时间：2012-12-12T05:11:08.827
> 
> 标签：javascript

我需要动态设置一个 JS 对象属性名。

```
for(i=1; i<3; i++) {
    var key  = i+'name';

    data = {
        key : 'name1',
    }
} 
```

结果应该是：

```
data = {
    1name: 'name1'
    2name: 'name1'
} 
```

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-12-12T05:14:33.937

```
var jsonVariable = {};
for(var i=1; i < 3; i++) {
  jsonVariable[i + 'name'] = 'name' + i;        
} 
```

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2012-12-12T05:14:34.700

您必须使用`[]`符号来动态设置键。

```
var jsonVariable = {};
for(i=1; i<3; i++) {        
 var jsonKey  = i+'name';
 jsonVariable[jsonKey] = 'name1';

} 
```

现在在 ES6 中，您可以使用对象字面量语法来动态创建对象键，只需将变量包装在`[]`

```
var key  = i + 'name';
data = {
    [key] : 'name1',
} 
```

* * *

## 回答 #3

> 赞同：146
> 
> 时间：2015-06-18T23:29:27.370

使用 ECMAScript 6，您可以将变量属性名称与对象文字语法一起使用，如下所示：

```
var keyName = 'myKey';
var obj = {
              [keyName]: 1
          };
obj.myKey;//1 
```

此语法在以下较新的浏览器中可用：

> Edge 12+（不支持 IE）、FF34+、Chrome 44+、Opera 31+、Safari 7.1+

( [https://kangax.github.io/compat-table/es6/](https://kangax.github.io/compat-table/es6/) )

您可以通过使用诸如[babel之类的](https://babeljs.io/)[编译](https://scotch.io/tutorials/javascript-transpilers-what-they-are-why-we-need-them)器来添加对旧浏览器的支持。如果您使用诸如[rollup](http://rollupjs.org/guide/)或[webpack 之](https://webpack.github.io/)类的模块捆绑器，则很容易转译整个项目。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2019-05-02T14:18:35.213

**使用变量作为对象键**

```
let key = 'myKey';

let data = {[key] : 'name1'; } 
```

在此处查看[如何迭代您的对象](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2012-12-12T05:14:26.910

这是动态设置值的方法

```
var jsonVariable = {};
for (var i = 1; i < 3; i++) {
    var jsonKey = i + 'name';
    jsonVariable[jsonKey] = 'name' + i;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-10-01T07:56:24.427

变量来自哪里并不重要。我们有一个主要的东西......在方括号“[..]”之间设置变量名。

```
var optionName = 'nameA';
var JsonVar = {
[optionName] : 'some value'
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-12T05:18:27.347

```
jsonVariable = {}
for(i=1; i<3; i++) {        
   var jsonKey  = i+'name';
   jsonVariable[jsonKey] = 'name1'
} 
```

这将类似于

```
 jsonVariable = {
    1name : 'name1'
    2name : 'name1'
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-14T12:33:02.067

根据上面 Sainath SR 的评论，我可以通过定义对象然后在对象之外定义另一个键/值来从 Google Apps 脚本（尚不支持 ES6）中的变量设置 js 对象属性名称：

```
var salesperson = ...

var mailchimpInterests = { 
        "aGroupId": true,
    };

mailchimpInterests[salesperson] = true; 
```

# css - 谷歌浏览器中没有谷歌字体

> ID：13833210
> 
> 赞同：7
> 
> 时间：2012-12-12T05:12:01.123
> 
> 标签：css, google-chrome, fonts

这是[链接](https://branard.com/index.php?option=com_brands&view=detail&id=16&Itemid=102)

如果您单击黑色部分中的方块，它们会将单词的字体更改为左侧。所有字体都是谷歌字体，但没有一个在谷歌浏览器中工作。我搜索了互联网没有解决方案。所有其他浏览器都可以正常工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T05:29:47.213

您收到一条错误消息，其中解释了更多信息。尝试按`F12`，然后单击`Console`选项卡。您将看到错误消息

> [阻止] [https://branard.com/index.php?option=com_brands&view=detail&id=16&Itemid=102的页面运行来自](https://branard.com/index.php?option=com_brands&view=detail&id=16&Itemid=102)[http://fonts.googleapis.com/css?family=Erica+One|Monda](http://fonts.googleapis.com/css?family=Erica+One|Monda|Sacramento|Oleo+Script+Swash+Caps|Text+Me+One|Seymour+One|Cagliostro|Qwigley)的不安全内容[|萨克拉门托|Oleo+Script+Swash+Caps|Text+Me+One|Seymour+One|Cagliostro|Qwigley](http://fonts.googleapis.com/css?family=Erica+One|Monda|Sacramento|Oleo+Script+Swash+Caps|Text+Me+One|Seymour+One|Cagliostro|Qwigley) .

现在，当您在主页面运行 HTTPS 时通过 HTTP 获取不安全的内容时，Chrome 会显示此消息。

只需将字体 url 从 更改`http://fonts.googleapis.com/css`为`https://fonts.googleapis.com/css`以保护此链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:33:08.250

这是浏览器的一项安全功能，可阻止`http`通过`https`. 修复很简单：只需从所有资源 URL（脚本、样式表等）中删除协议。在您的情况下，字体 CSS 的 URL 变为

```
//fonts.googleapis.com/css… 
```

请注意，该 URL 没有`http`或`https`。

# asp.net - 无法在 aspx 页面中访问资源

> ID：13833215
> 
> 赞同：0
> 
> 时间：2012-12-12T05:12:14.057
> 
> 标签：asp.net, resx

我有一个解决方案，其中我有一个 Web 项目和几个其他项目。我添加了另一个只有 resx 文件的项目。我已将此资源项目 dll 引用到 Web 项目中。有什么可能的方法我可以将 dll 中的资源访问到 aspx 页面中。例如： `<asp:Button ID="Button1" runat="server" Text="<%$ Resources:Resource,ButtonName %>">` 必须从 resourcedll 访问 ButtonName。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:18:18.837

使用 @Import 页面指令将命名空间导入到 aspx 页面中。

```
<%@ Import Namespace = "MyProject.Resources" %> 
```

现在要使用资源来设置服务器控件的属性，您需要在 Page_Load() 事件的页面级别调用 DataBind() 方法。（也可以为特定控件调用）。

```
 Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DataBind();
        }
    }
    in your aspx page:
    <asp:Button ID="Button1" runat="server" Text = '<%# ProjectResources.CmdBtn %>' /> 
```

确保将资源类和资源键属性设为公开，默认为内部。

# java - 这不应该工作吗？显示来自 servlet 的错误消息

> ID：13833218
> 
> 赞同：0
> 
> 时间：2012-12-12T05:12:15.863
> 
> 标签：java, jsp, servlets, error-handling, try-catch

所以，我有一个 servlet 作为 RSS 提要项目的一部分，它接受一个 URL，然后它继续做一些超出这个特定问题的其他事情。如果用户（通过表单）提交空白或其他无效的 URL，我有以下代码：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {

    URL feedURL = null;

    try {
        feedURL = new URL(request.getParameter("url"));
    } catch (MalformedURLException e) {
        PrintWriter out = response.getWriter();
        out.println("Please go back and submit a valid URL.");
    } 
```

现在`MalformedURLException`，我得到的不是 ，而是`NullPointerException`。我会以正确的方式解决这个问题吗？我是否必须将错误消息指向更具体的地方才能到达用户？`response.sendError()`在客户端使用 JavaScript 或其他方法会更好吗？

如果重要的话，请求来自 JSP。

与往常一样，StackOverflow 社区，提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:15:36.793

```
try {
    feedURL = new URL(request.getParameter("url"));
} catch (MalformedURLException e) {
    PrintWriter out = response.getWriter();
    out.println("Please go back and submit a valid URL.");
    return;
} 
```

您应该在 catch 块中返回。Nullpointer 可能会从下一行抛出，因为 feedURL 将为空。如果这不是原因，请分享您获得的 Nullpointer 跟踪。

在我看来，您应该从 catch 块转发到错误页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:09:26.327

当你创建一个`java.net.URL`类的实例时，它的构造函数可以抛出一个`MalformedURLException`. 当 URL 无效时会发生这种情况。

当它被抛出时，不是因为主机停机（它的**503**），或者 URL 路径指向一个丢失的文件（它的**404**）。

常见错误包括：- 1\. 遗漏协议 2\. 指定无效协议 例如 www://stackoverlfow.com 3\. 遗漏 ':' 字符

`MalformedURLException`如果出现以下情况，则不会被抛出：-

1.  主机名无效。例如 www.stack-overlfow.com
2.  路径无效。例如[http://www.microsoft.com/company_secrets.html](http://www.microsoft.com/company_secrets.html)

`MalformedURLException`如果 URL 字符串不可解析或包含不受支持的协议，它也会抛出 a 。

您得到`NullPointerException`的意思是请求中缺少名为“url”的参数。仔细检查您的请求是否始终将“url”作为参数。

有很多方法可以通知客户出现问题。

您可以使用 `response.sendError() 之类的

```
response.setContentType("text/html");
PrintWriter out = response.getWriter();

if (request.getParameter("important_parameter") == null) {
  response.sendError(response.SC_BAD_REQUEST, "Missing URL parameter");
} 
```

我不知道您如何使用`Javascript`. 但是，您也可以转发到同一页面或错误页面，并将消息作为提及错误的参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:41:19.873

看起来您在 URL 构造函数中获取了 NPE，它尝试解析作为参数发送的字符串。您可能希望在调用 URL 构造函数之前添加空检查。此外，您还可以在请求提交时验证，它的 ant 参数被添加到名为“url”的请求 url 中。由于您使用的是 doGet，因此您必须通过单击某个 url 来发送请求。

# objective-c - Objective-C 文件写入过程随着要生成的文件越来越多而变得越来越慢

> ID：13833222
> 
> 赞同：0
> 
> 时间：2012-12-12T05:12:37.817
> 
> 标签：objective-c, encryption, file-io, zipfile

这是我的 ObjC epub 文件加密器代码的主要部分

```
@autoreleasepool {
    for(NSMutableString* epub in self.epubs){
        bookKey = [[NSMutableString alloc] initWithString:[self genRandStringLength:16]];
        [self performSelectorOnMainThread:@selector(encrypt:) withObject:[NSArray arrayWithObjects:epub,bookKey,nil] waitUntilDone:YES];
    }
} 
```

选择器“加密”包括这些方法调用

*   为 epub 提取创建文件夹
*   解压 epub 文件并将内容文件放入解压文件夹
*   为加密的 epub 创建 ZipFile
*   读取提取文件夹中的每个文件，创建 ZipWriteStream 并加密文件数据
*   将每个加密数据流写入 ZipFile
*   关闭 ZipFile 并将 zip 扩展名更改为 .epub

刚开始时，该过程非常安静。但是随着更多文件的写入，这个过程变得越来越慢。很抱歉，由于我的公司保密政策，我无法公开选择器的定义。但我很确定问题不在于它。下面是控制台日志示例。实际上这些文件只是具有不同名称的同一文件的克隆

*   Epub 名称：A.epub
    *   书号：4151FDD721564E40
    *   花费时间：0.440156
*   Epub 名称：B.epub
    *   图书密钥：BC23C09C4625429E
    *   花费时间：0.675541
*   Epub 名称：C.epub
    *   书号：AF872798FAEA4EDE
    *   花费时间：0.974213
*   Epub 名称：D.epub
    *   书号：250C319928E54D2C
    *   花费时间：1.332154
*   Epub 名称：E.epub
    *   图书密钥：EC4EC65605D246EB
    *   花费时间：1.705329
*   Epub 名称：F.epub
    *   书号：E10588A8CB584ACD
    *   花费时间：2.209807
*   Epub 名称：G.epub
    *   书号：9B572BF9428E4DFB
    *   花费时间：2.797980
*   Epub 名称：H.epub
    *   书号：BC05B2A629C44A85
    *   花费时间：3.389614
*   电子版名称：I.epub
    *   书号：79DB7AAFC8CA4655
    *   花费时间：4.936718
*   Epub 名称：J.epub
    *   书号：B0413DF2356048A7
    *   花费时间：5.441939

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:06:59.457

您应该使用 Instruments 中的 Time Profile 工具来分析您的程序，并查看花费了哪些时间。此外，如果内存增长成为问题，则该循环的内部自动释放池可能会有所帮助。

（为了将来参考，“我很确定这不是 X”几乎总是最终意味着“它是 X”；））

# c# - 如何在 Asp.Net 图表 C# 中创建图表系列数组对象

> ID：13833224
> 
> 赞同：0
> 
> 时间：2012-12-12T05:12:41.403
> 
> 标签：c#, asp.net, asp.net-mvc

我想为此动态创建系列，我创建了这样的系列数组对象

```
 Series[] series = new Series[10];

        series[0].Name = "Result Chart"; 
```

但是在执行程序时它显示对象引用空错误如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:17:53.837

```
Series[] series = new Series[10];
series[0] = new Series();// this line is the one you missed
series[0].Name = "Result Chart"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:31:48.557

```
Series[] series = new Series[10]; 
```

此行创建一个数组。新的只是用于创建系列数组。

此行将值放在第 0 个索引处

```
series[0].Name = "Result Chart"; 
```

问题是您没有在第 0 个索引处实例化对象。所以你需要实例化你想要使用的每个索引。
就像如果你想使用第 0 个索引，那么你将不得不使用

```
series[0] = new Series(); 
```

或者只是创建一个循环来实例化每个索引，如下所示

```
for(int i=0;i<series.Count;i++)
{
   series[i] = new Series();
} 
```

# internet-explorer - IE中的CSS渐变按钮与链接不同

> ID：13833226
> 
> 赞同：2
> 
> 时间：2012-12-12T05:12:53.527
> 
> 标签：internet-explorer, css

我有这个使用渐变样式的 CSS 类：

```
.zui-btn
{
padding:5px 15px; margin:0; border:1px solid #ccc;text-shadow: 0px 1px #fff; text-align:center;
background: #ffffff;
background: -moz-linear-gradient(top,  #ffffff 0%, #dddddd 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#dddddd));
background: -webkit-linear-gradient(top,  #ffffff 0%,#dddddd 100%);
background: -o-linear-gradient(top,  #ffffff 0%,#dddddd 100%);
background: -ms-linear-gradient(top,  #ffffff 0%,#dddddd 100%);
background: linear-gradient(to bottom,  #ffffff 0%,#dddddd 100%);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#dddddd');  
} 
```

我已将其应用于链接和按钮。但是在IE8、IE9的链接中没有通过结果。见[http://jsfiddle.net/88mSc/14/](http://jsfiddle.net/88mSc/14/)

```
<a href="#" class="zui-btn">Modify</a>    
<button type="button" class="zui-btn">Hello World</button> 
```

![在此处输入图像描述](../Images/fc37546aec5f745fe3791cb6ffe93e33.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:32:51.507

这是一个错误，您可以通过将显示设置为`inline-block`.

不要问我为什么。

# jquery - CSS3在动画元素上旋转导致点击事件不调用

> ID：13833227
> 
> 赞同：8
> 
> 时间：2012-12-12T05:12:57.503
> 
> 标签：jquery, html, css, jquery-animate, transform

好吧，这给我带来了很多问题。

当使用`-webkit-transform`带有任何类型的 3d 旋转（例如`rotateY(30deg)`）的 css3 样式时，将点击事件绑定到这个旋转的对象是极其不可靠的。

请参阅下面的示例代码或查看[此小提琴](http://jsfiddle.net/RyvtZ/1/)（要查看小提琴中的不可靠性，请单击元素右侧）。此示例没有动画，但仍然受到影响。

html:

```
<div id='box1'>Click this box.</div> 
```

CSS：

```
#box1{
    -webkit-transform: rotateY(30deg);
} 
```

jQuery：

```
$('#box1').click(function(){
    alert('clicked box 1');
}); 
```

我所说的“不可靠”是指点击事件并不总是被抛出（取决于你点击它的位置），有时事件根本不会被抛出（无论你在哪里点击它）。

有没有办法解决或避免这种情况，以便在旋转和动画时与 CSS3 元素一起使用？

**更新：**

在元素上使用 CSS 属性 'float:left' 似乎可以让它正确地检测点击事件***而不是运动**。有谁知道为什么浮动属性解决了这个问题？

我的最终目标是让对象在运动时接收点击事件，但是，当我应用新的 CSS3 rotate3d 属性（实时，在另一个 jquery 事件上）给对象动画时，点击事件再次开始失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:39:35.163

我似乎无法复制该问题，添加`float:left;`.

有时浏览器在渲染 HTML 元素的实际宽度时会表现得很有趣。`float:left`似乎使浏览器计算得更好。

这是 JavaScript：

```
$(document).ready(function (){
  $('#box1').bind({
    'click' : function () {
      alert('clicked box 1');
    },
    'hover' : function () {
      console.log('Over Box 1');
    }
  });
  $('#box2').click(function(){
    alert('clicked box 2');
  });

  window.angle = 0;
  setInterval(function () {
    if (window.angle >= 360) {
      window.angle = 0;
    } else {
      window.angle += 5;
    }
    $('#box1').css('-webkit-transform', 'rotateY(' + window.angle + 'deg)');
    }, 100);
}); 
```

这是动画的更新小提琴，它似乎工作正常：http: [//jsfiddle.net/RyvtZ/9/](http://jsfiddle.net/RyvtZ/9/)

（我添加`console.log`了`hover`让生活更简单;））

# codeigniter - 从 PHP 应用程序运行 PHP CLI 脚本

> ID：13833230
> 
> 赞同：1
> 
> 时间：2012-12-12T05:13:48.520
> 
> 标签：codeigniter, php

我有一个 php 文件，需要从运行在 CodeIgniter 框架上的 PHP 应用程序在 CLI 中执行。我尝试了 exec 和 shell_exec 命令，它似乎没有启动该过程。请在下面找到我尝试执行的代码。

```
$phpPath = exec('which php');
$cmd = $phpPath.' '.dirname(__DIR__).'/API/notification/NotificationServer.php';
echo "<pre>".shell_exec($cmd)."</pre>"; 
```

当我尝试在终端中运行上述内容时，它执行得很好。一旦用户设置了会话，我需要自动触发它。

path/$cmd 变量打印

当我打印变量 $cmd 时，我得到以下输出，并且在终端中给出以下输出正常。

```
/usr/bin/php /Users/lalithb/Desktop/Android/AndroidWS/API/notification/NotificationServer.php 
```

上述命令在终端中运行良好。当我尝试 exec/shell_exec 它时，它不起作用。

APACHE_ERROR 日志是：

```
sh: line 1:  2437 Trace/BPT trap: 5       /usr/bin/php
sh: line 1: /Users/lalithb/Desktop/Android/AndroidWS/API/notification/NotificationServer.php: Permission denied 
```

有人可以帮我在 CLI 中运行上面的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:09:05.263

我解决了这个问题，猜猜会有像我这样的人试图访问受限制的文件夹。我在这里找到了解决方案

[http://ubuntuforums.org/showthread.php?t=1302259](http://ubuntuforums.org/showthread.php?t=1302259)

```
exec('chmod +x'.dirname(__DIR__).'/API/notification/NotificationServer.php); 
```

上面的工作很神奇。

# flot - 未捕获的异常 绘图浮点的无效尺寸

> ID：13833232
> 
> 赞同：5
> 
> 时间：2012-12-12T05:14:06.600
> 
> 标签：flot

我在 studentchart div 中使用 flot 绘制了一个折线图：

```
$.plot(jQuery("#studentavgchart"), DATA, options); 
```

Graph 将在类 oneTwo 的 div 之外绘制。如果我可以删除 div studentchart 的样式，它会显示 javascript 错误。我需要在父 div 中绘制图形，即；在一个两个

```
<div class="oneTwo">
    <div class="widget" >
        <div class="header">
            <span>
                <span class="ico gray info2"></span>Total Class No
            </span>
        </div>
        <div class="content">
            <div id="studentchart" style="width:100%;height:300px;"></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T17:09:58.593

我看到您的绘图函数调用正在使用“studentavgchart”，而您的 div 的 id 为“studentchart”

我也遇到了这个问题，发现我的 Plot div 需要一个样式或一个指定高度的类。以像素或百分比为单位。

希望有帮助。

# clearcase - 如何从交付中排除二进制文件？

> ID：13833236
> 
> 赞同：1
> 
> 时间：2012-12-12T05:14:15.290
> 
> 标签：clearcase, clearcase-ucm

最近我被要求提供项目间交付。

在提供大量合并请求时，甚至会弹出二进制文件。

我跳过了它们，并一一绘制了合并箭头。这是一项伤脑筋的工作。

有什么方法可以排除二进制文件的合并或某些命令行选项来为所有二进制文件绘制合并？

（我正在使用clearcase UCM）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:44:45.873

是的，您可以将他们的类型管理器更改为带有“合并时复制”选项的类型（或者从不合并，如果您真的不希望它们合并）。

该类型管理器继承自compressed_file，但会通过将源版本复制到签出的目标版本来解决任何合并问题。

请参阅[Clearcase UCM 正在尝试合并 pdf 文件](https://stackoverflow.com/questions/8789258/clearcase-ucm-is-trying-to-merge-pdf-files/8789593#8789593http)作为示例。
您还拥有 IBM 技术说明：“[在 ClearCase 中处理二进制文件](https://www-304.ibm.com/support/docview.wss?uid=swg21123371)”。

因此，您可以选择：

![从不合并](../Images/8879c7fad9742183305954d7999634c1.png)

或者：

![合并时复制](../Images/2565206c4903bc42588ad6798c020db0.png)

# .htaccess - htaccess 预定义规则 hostagator

> ID：13833243
> 
> 赞同：0
> 
> 时间：2012-12-12T05:14:37.147
> 
> 标签：.htaccess, mod-rewrite

在 hostagator 中，我必须使用一些预定义的 htaccess 规则，如下所示为域设置我的主目录。

```
#Change example.com to be your main domain.
RewriteCond %{HTTP_HOST} ^(www.)?example.com$*

#Change 'subdirectory' to be the directory you will use for your main domain.
RewriteCond %{REQUEST_URI} !^/subdir/*

#Don't change these line.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d*

#Change 'subdirectory' to be the directory you will use for your main domain.
RewriteRule ^(.*)$ /subdir/$1* 
```

* * *

现在的问题是，当我在浏览器中输入时：example.com/some_dir（不带斜杠）它会显示像 example.com/subdir/some_dir/ 这样的网址，我喜欢 example.com/some_dir/*

但我不能更改任何上述预定义规则，否则它会破坏我的网站，因为它必须具有我的目录结构。所以添加斜杠规则也不起作用。

我的目录结构是这样的：

/

/subdir/.htaccess

/subdir/index.php

/subdir/some_dir

/subdir/some_other_dir

ETC

* * *

或任何其他方式将 example.com/some_dir 完全重定向到 example.com/some_dir/ 以获取新请求，以便在新请求之后遵循上述规则。？

* * *

**部分解决：**

我在 stackoverflow 的某个地方找到了添加尾随反斜杠的地方： RewriteRule ^(([a-z0-9-]+/)*[a-z0-9-]+)$ $1/

所以只是通过使用它，我尝试制定这样的规则，并放在我上面的预定义规则之前：

```
RewriteCond %{HTTP_HOST} ^(www.)?example.com$
RewriteCond %{REQUEST_URI} !^/subdir/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^(.*)/$
RewriteRule ^(([a-z0-9\-]+/)*[a-z0-9\-]+)$ $1/ 
```

现在它可以在没有斜杠的情况下工作 例如 example.com/some_dir ，不会重定向到 example.com/subdir/some_dir/ 而是只停留在 example.com/some_dir （没有斜杠）..

谁能解释这个正则表达式 (([a-z0-9-]+/)*[a-z0-9-]+) 是什么意思？它是如何工作的？

现在 example.com/some_dir/dir1 与我的主要问题有同样的问题，我该如何修改上述规则？

# php - 从 bit.ly 获取引荐来源网址

> ID：13833245
> 
> 赞同：0
> 
> 时间：2012-12-12T05:14:52.200
> 
> 标签：php, bit.ly

> **可能重复：**
> [如何从 bit.ly 获取使用 php 的重定向 url 链接](https://stackoverflow.com/questions/2747664/how-to-get-redirecting-url-link-with-php-from-bit-ly)

我通过 bit.ly 链接发送流量到我的网页。

我想跟踪用户访问我网站的 bit.ly 链接（他们将 URL 直接粘贴到浏览器中）。

无论如何，我可以获得粘贴到浏览器中的 URL（bit.ly 链接）吗？

我试过了：

```
echo $_SERVER['HTTP_REFERER']; 
```

但那是空白..

Bit.ly 链接是 301 重定向，所以应该有可能以某种方式抓住它？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:20:41.297

您可以使用 GET 变量来解决问题。

创建一个指向 www.yourdomain.com/?ref=bitly 的 bit.ly 链接

然后在 PHP 中使用 $_GET['ref'] 来确定用户来自哪里。

可能不完全是您所追求的，但它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:28:11.557

遗憾的是，http_referrer 标头不是必需的，并且在某些浏览器（特别是 IE）中，它只是不随请求一起发送。不幸的是，这使您无法找到可靠的方法来跟踪引荐网址。

[你可以在这里](http://php.net/manual/en/reserved.variables.server.php#refsect1-reserved.variables.server-indices)找到更多信息

# command-line - 证书导入问题

> ID：13833250
> 
> 赞同：0
> 
> 时间：2012-12-12T05:15:34.063
> 
> 标签：command-line, import, certificate

在我们的代码中，我们尝试将证书从源代码导入到试图安装我们应用程序的用户系统。我们的应用程序是 Windows 应用程序。

要导入证书，他们使用了路径错误的密钥工具命令。

```
<Command name="User">
   <![CDATA[keytool -keystore "%USERPROFILE%\Application Data\Sun\Java\Deployment\security\trusted.certs" 
           -import -v -noprompt 
           -file "C:\Program Files\American Express\DesktopPhone\AppletWeb\cert\NIVRApplet.cert" 
           -alias nap  -storepass ""]]>
</Command> 
```

即使路径`C:\Program Files\American Express\DesktopPhone\AppletWeb\cert\NIVRApplet.cert`不可用，证书仍会在用户`%USERPROFILE%\Application Data\Sun\Java\Deployment\security\trusted.certs`安装我们的应用程序时导入到该位置的用户系统中。

当我尝试直接在命令提示符下执行上述命令时，它说导入不成功，但它通过应用程序运行良好，没有任何错误与导入证书。

我不确定它是如何发生的？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:12:47.687

> 当我尝试直接在命令提示符下执行上述命令时，它说导入不成功，但它通过应用程序运行良好，没有任何错误与导入证书。

您登录的帐户可能对您尝试导入的密钥库没有必要的权限。你得到什么错误？

# java - 为 Android 应用程序开发设置服务器

> ID：13833259
> 
> 赞同：3
> 
> 时间：2012-12-12T05:17:00.750
> 
> 标签：java, android, sqlite, notifications

我正在构建一个 android 应用程序，该应用程序能够根据存储在数据库中的用户输入发送通知（不一定是特别推送通知）。java中的逻辑根据新的用户输入或根据移动设备实时触发通知发送给用户。数据库内置在 SQLite 中；前端和逻辑是由 Java 编写的。

我已经探索了在没有服务器的情况下构建它的选项，但想知道设置服务器需要做多少工作。我对应用程序开发非常陌生（以前从未做过），也不是经验丰富的程序员。寻找最简单的解决方案。我可以就设置一个适合应用程序运行所需的服务器通常需要哪些主要步骤和技术（编程语言、硬件等）获得一些指导吗？

非常感谢，

塞西莉亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:37:59.403

gcm 正是为此目的而设计的

理论; 你需要，

1) 应用程序向 gcm 注册。

2) 一个网站，有一个 url 可以接受来自您手机的 json post 请求。

3) 网站上的触发器向您要发送的任何收件人发送 gcm 推送通知。

4) 应用程序从 gcm 接收推送通知并采取适当的措施。

Web 服务器有大量可供您选择的选项，我会编写一个 Rails 网站 (http://rubyonrails.org/) 并将其免费托管在 heroku (http://rubyonrails.org/) 上，其他可能会根据文档 (http://developer.android.com/google/gcm/index.html) 使用 google 提供的 gcm 服务器，并且总是有无数不同的推送服务，例如[http://urbanairship.com/products /推送消息](http://urbanairship.com/products/push-messaging)

我为什么要使用导轨？

1）我非常了解这门语言——这很重要，选择你喜欢的语言，所以可能不是你的最佳选择，但你可能会在学习它时获得很多乐趣 :)

2) 它为我提供 json 和 xml 处理，无需任何额外工作，因为它具有自动内置的完整 REST api

# php - 如何使用 setExtendedAccessToken()

> ID：13833264
> 
> 赞同：0
> 
> 时间：2012-12-12T05:17:44.823
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 Graph api 使用 PHP 创建一个 facebook 应用程序。

```
require_once("facebook.php");
  $config = array();
  $config[‘appId’] = 'xxxxxxxxxxx';
  $config[‘secret’] = 'xxxxxxxxxxxxxxxxxxxxx'; // NEVER USED THIS , JUST INCLUDED IT !
  $config[‘fileUpload’] = true; // optional
  $facebook = new Facebook($config);

$app_id = "xxxxxxxxx";
    $app_secret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
    $my_url = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";

 $token_url = "https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
       . "&client_secret=" . $app_secret . "&code=" . $code;

     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token']; // The acess call :)

       $at = $params['access_token']; // I USE THIS ACCESS TOKEN 
```

我现在使用该访问令牌 ($at) 来发出请求。但我需要将 access_token 存储更长时间（60 天）。

所以 1) 我如何使用 setExtendedAccessToken() 方法 & 2) 我应该把它放在我的代码中 & 3) 我在哪里可以获得输出

***我也包括 PHP SDK，即使我没有使用它。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:19:39.073

您可以将临时令牌交换为扩展令牌。检查下面的代码。

```
try {
        $graph_url   =  "https://graph.facebook.com/oauth/access_token?";
        $graph_url  .=  "client_id=".$FB_APP_ID;
        $graph_url  .=  "&client_secret=".$FB_APP_SECRET;
        $graph_url  .=  "&grant_type=fb_exchange_token";
        $graph_url  .=  "&fb_exchange_token=".$fb_temp_access_token;

        $response   = @file_get_contents($graph_url);            
        $params     = null;
        parse_str($response, $params);

        $new_token  =$params['access_token'];

    } catch (Exception $e) {
       //DO NOTHING
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:54:40.810

你可以扩展一个`access_token`，在这里阅读它：[https ://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

把它放在最后，在你已经从登录中获得了一个 acces_token 之后。

您以与其他 API 调用相同的方式获得输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T13:00:50.087

我用来获取访问令牌的代码是：

`$access_token=$facebook->getAccessToken();`

我只是把这段代码像这样。

```
if($userid){

       try{

         $access_token = $facebook->getAccessToken();
         echo $access_token;
    }
    catch(FacebookApiException $e){
       //catch error here
}
else{

$loginUrl=$facebook->getLoginUrl(array('redirect_uri'=>'your_url','scope'=>'publish_stream,read_stream,manage_pages');
exit("<script>window.top.location.replace('$loginUrl');</script>");
} 
```

它确实存储了大约 2 个月到期的访问令牌（我使用[这个工具](https://developers.facebook.com/tools/debug)来检查）。

# c# - 调用运行时编译的代码时，如何访问当前应用程序中的对象？

> ID：13833268
> 
> 赞同：1
> 
> 时间：2012-12-12T05:18:16.360
> 
> 标签：c#, .net, csharpcodeprovider

我当前的项目是一个应用程序，它允许您使用 C# 编写代码，然后使用 CSharpCodeProvider 执行它。只要代码本身是一个完整的应用程序，此时它就可以正常工作，例如：

```
using System;

namespace RuntimeCode {
    public static class Program {
        public static void Main() {
            Console.WriteLine("Hello, world!");
        }
    }
} 
```

然后应用程序使用`CompileAssemblyFromSource`with编译给定的代码`GenerateInMemory = true`，然后在编译的程序集中调用该`Main`方法。

我的问题是，如何让编译后的代码访问主应用程序中的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:32:06.140

~~请注意，运行时生成的代码作为单独的进程执行。因此，您需要执行跨进程通信：在您的主应用程序、主机应用程序和新创建的应用程序之间。~~

实现跨进程或跨域交换的一个好方法是在您的主应用程序或默认应用程序域中托管一个特殊服务。生成的程序集将成为客户端。

我建议使用 WCF 和[NetNamedPipeBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)。您只需要配置合约和端​​点。

* * *

另请注意，唯一的`GenerateInMemory=true`控制是将生成的程序集是否从磁盘加载到内存。就是这样。

* * *

如果您将脚本加载到默认的 AppDomain 中，那就更简单了。只需创建一个静态成员：

```
namespace MyNamespace
{
    public class Core
    {
        public static Core Instance { get; set; }
    }
} 
```

并通过完整类型名称访问它：

```
MyNamespace.Core.Instance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:27:03.840

> 然后应用程序编译给定的代码 […]，然后在编译的程序集中调用 Main 方法。

我认为这几乎回答了你的问题。您正在编译的代码没有理由必须具有无参数`Main()`方法。例如，如果您需要访问的方法在`IHost`接口中，那么您可以要求您的脚本有一个`Main`带有 type 参数的方法`IHost`。然后，您将调用它，传入`IHost`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T15:09:07.883

您注入的代码无法访问主应用程序中定义的类和对象。（要访问主应用程序中定义的类，您可以再次在注入代码中使用反射，但对象不可访问。）

但是您可以简单地将数据作为参数发送到注入的代码：

```
using System;

namespace RuntimeCode {
    public static class Program {
        public static void StartPoint(object obj) {
            Console.WriteLine("Hello, world!");
        }
    }
} 
```

`StartPoint`然后通过发送`obj`包含所需数据的对象来调用方法。

您可以使用所需的任何类型的对象。但它应该被注入的代码识别。

# c# - 代码优先迁移

> ID：13833272
> 
> 赞同：1
> 
> 时间：2012-12-12T05:18:26.080
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个类，我想添加一些列，如下所示：

```
public partial class News : DbMigration
{
    public override void Up()
    {

        AddColumn("dbo.News", "IsSchool", c => c.Boolean());
        AddColumn("dbo.News", "City", c => c.String(maxLength: 200));
        AddColumn("dbo.News", "County", c => c.String(maxLength: 200));
        AddColumn("dbo.News", "SchoolName", c => c.String(maxLength: 200));
        AddColumn("dbo.News", "VisitDatetime", c => c.DateTime());

        Sql("UPDATE dbo.News SET IsSchool='false'");
    }

    public override void Down()
    { 
        DropColumn("dbo.News", "VisitDatetime");
        DropColumn("dbo.News", "County");
        DropColumn("dbo.News", "City");
        DropColumn("dbo.News", "IsSchool");
        DropColumn("dbo.News", "SchoolName"); 
    }
} 
```

这是配置：

```
 public sealed class Configuration : DbMigrationsConfiguration<DataContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    }

    protected override void Seed(DataContext context)
    {
        //  This method will be called after migrating to the latest version.

        //  You can use the DbSet<T>.AddOrUpdate() helper extension method 
        //  to avoid creating duplicate seed data. E.g.
        //
        //    context.People.AddOrUpdate(
        //      p => p.FullName,
        //      new Person { FullName = "Andrew Peters" },
        //      new Person { FullName = "Brice Lambson" },
        //      new Person { FullName = "Rowan Miller" }
        //    );
        //
    }
} 
```

我只想再运行一次，看看数据库是否会更新？我如何确保此迁移确实运行？

我无权访问数据库，我的应用程序一直抱怨`IsSchool`字段是`Nullable`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:28:16.090

尝试修改添加“IsSchool”的行

```
AddColumn("dbo.News", "IsSchool", c => c.Boolean(nullable: false, defaultValue: false)); 
```

# css - JQuery Mobile 简单对话框的填充

> ID：13833274
> 
> 赞同：0
> 
> 时间：2012-12-12T05:18:28.340
> 
> 标签：css, jquery-mobile

我正在使用[简单对话框 2](http://dev.jtsage.com/jQM-SimpleDialog/demos2/)：

我有下面的对话框：

```
$('<div>').simpledialog2({
    mode: 'button',
    themeHeader: 'b',
    headerText: 'Confirm',
    headerClose: true,
    buttonPrompt: message,
    buttons : {
        'OK': {
            click: function () { 
                $.mobile.changePage(url, {changeHash: false});
            }
        },
        'Cancel': {
            click: function () { 

            },
            icon: "delete",
            theme: "c"
        }
    }
}) 
```

截屏：

![在此处输入图像描述](../Images/238801ccefce8b3c513c2e87c52d15c2.png)

我想`text-align`向左发送消息，并在按钮的左侧和右侧留出一些空间。我怎样才能实现它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:49:03.153

您可以使用 Firebug 或其他开发人员工具来检查要操作的 CSS... [参见文档](http://jquerymobile.com/demos/1.2.0/docs/api/themes.html)

> **压倒一切的主题**
> 
> 主题旨在作为一个坚实的起点，但旨在定制。由于一切都由 CSS 控制，因此可以很容易地使用 Web 检查器工具来识别您要修改的样式属性。添加到元素中的一组主题类（全局）和语义结构类（特定于小部件）提供了一组丰富的可能选择器，用于定位样式覆盖。我们建议将外部样式表添加到头部，放置在结构和主题样式表引用之后，其中包含所有样式覆盖。这使您可以轻松地更新到较新版本的库，因为覆盖与库代码分开。

# iphone - Google 自定义搜索 API 问题：最多 100 个查询

> ID：13833275
> 
> 赞同：2
> 
> 时间：2012-12-12T05:18:31.600
> 
> 标签：iphone, google-search, google-search-api, google-custom-search

我想使用 Google 自定义搜索 API [https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)按关键字搜索图像。

他们在[主页上](https://developers.google.com/custom-search/v1/overview)说： **所有用户免费使用，每天最多 100 个查询。**如果您未注册计费，超出免费使用配额的任何使用都将失败。启用计费后，您将继续每天收到 100 次免费查询。但是，对于所有额外的请求，您将按每 1000 次查询 5 美元的费率付费，每天最多 10,000 次查询。

**它们是什么意思：**这是我的应用程序的所有用户的限制吗？或者我的每个用户最多可以进行 100 个查询？如果您不知道答案，可能您知道这些问题的 google 帮助的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T17:26:16.523

由于您应该获得此服务的 API 密钥，因此 Google 很可能会根据您的 API 密钥计算查询次数，因此每个 API 密钥每天总共可以获得 100 个免费查询（这对您的所有用户来说都是相同的） ，而不是每个用户 100 个查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-17T23:26:15.663

谷歌需要澄清这一点。

我启用了计费，但我没有蹲下。

首先，在启用计费、付费订阅的情况下，无法执行 Google 自定义搜索 (api) 并处理来自该搜索的 100 多个结果。如果您可以访问 100 多个结果（返回 1K++ 或一百万个结果），请证明这一点，将代码发送给我。

* * *

还有那100个结果？对，这样会消耗 10 次搜索。您进行初始搜索（即消耗了 1 个搜索），在 JSON 响应中返回 10 个结果，您想要接下来的 10 个结果吗？太好了，您必须使用 &start=11 对配额执行/使用另一次搜索才能获得下一个 10 次，依此类推，最多 100 次（消耗 10 次搜索），然后您会得到`404`when `&start=101`。

这又是一个**GOOGLE 大失败！**.

# wpf - 如何将命令绑定到 TreeView 的 SelectedItemChanged 事件

> ID：13833279
> 
> 赞同：1
> 
> 时间：2012-12-12T05:18:48.630
> 
> 标签：wpf, treeview, command, selecteditemchanged

有一个 Treeview 控件。

```
 <TreeView Name="ProductsHierarchy" FontFamily="Arial"  
                          Background="White" Margin="2" 
                          FontSize="12" SelectedItemChanged ="ProductsHierarchy_SelectedItemChanged"> 
```

有没有办法为树视图的 SelectedItemChanged 事件绑定命令，避免事件处理程序后面的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:06:25.043

试试[MVVM Toolkit 的 EventToCommand](http://adammills.wordpress.com/2011/02/14/eventtocommand-action-mvvm-glue/)。

“内置”（来自 Blend）的方法是使用交互性

```
<TreeView Name="ProductsHierarchy" FontFamily="Arial"  
                          Background="White" Margin="2" 
                          FontSize="12" SelectedItemChanged ="ProductsHierarchy_SelectedItemChanged">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectedItemChanged">
            <i:InvokeCommandAction Command="{Binding SelectedItemChangedCommand}" CommandParameter="argument"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</TreeView> 
```

您必须包含命名空间：

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

这里的缺点是您无法访问`EventArgs`. 这是[解决方案](http://www.pzielinski.com/?p=943)（它是波兰语，但代码示例几乎不言自明）。

# javascript - javascript Chrome 扩展的 Google Drive API 授权的服务器端流程

> ID：13833286
> 
> 赞同：1
> 
> 时间：2012-12-12T05:19:26.050
> 
> 标签：javascript, oauth-2.0, google-drive-api

我正在阅读@Nivco 对[使用 JavaScript 授权 Google Drive 的](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript)回答，并看到：

“...您所要做的就是使用服务器端代码来处理驱动器服务器端流程后返回的授权代码（您需要将其交换为访问令牌和刷新令牌）。这样，仅在第一个流程会提示用户授权，第一次交换授权码后会自动绕过授权页面。

我们的文档中提供了执行此操作的服务器端示例。”

阅读了文档后，我仍然对如何处理授权代码并最终将访问和刷新令牌传递给我的 Chrome 扩展程序感到非常困惑，这样它就可以在没有服务器的情况下继续处理未来的请求。有人可以提供执行此操作的服务器端代码示例吗？

作为背景，我有一个基于 Google DocList API 构建的拥有数千名用户的 Chrome 扩展程序，但我正在尝试过渡到 Drive API，因为另一个已被弃用。理想情况下，我的代码将完全独立作为扩展，但我愿意通过我的服务器接受 Nivco 的答案所需的单一授权请求。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:24:29.820

我们刚刚将我们的 JavaScript 应用程序从使用服务器流移植到客户端流。我们已经完全删除了服务器部分，不再需要它。

你可以看到[我们在网上使用的源代码](http://www.draw.io/js/diagramly/DriveClient.js)，它是未压缩的。

# java - 这个程序的输出应该是什么？

> ID：13833292
> 
> 赞同：-1
> 
> 时间：2012-12-12T05:20:24.430
> 
> 标签：java

如果你调用第一个方法，'CreateLotsOfAlphas'，它应该打印什么？我只是在遵循程序流程时遇到了麻烦。我以为它会打印 aabbc，但由于某种原因，它实际上会打印 bacbc。

我的理由是 newA1.y 最初只是输入 a，因为它是空值。a 保存到 this.y 中，所以 newA2.y 是 (a + b)，b 保存到 this.y 中，然后 newA3.y 是 (b + c) 得到 aabbc。

我看错了吗？

```
public void CreateLotsOfAlphas() {
    Alpha newA1 = new Alpha(1.0, "a", null); 
    Alpha newA2 = new Alpha(2.0, "b", newA1); 
    Alpha newA3 = new Alpha(3.0, "c", newA2);
    System.out.println(newA1.y + newA2.y + newA3.y);
} 
```

顺便说一下，这两种方法属于两个不同的类。

```
public Alpha(double x, String y, Alpha oldAlpha) { 
    this.x = x;
    this.y = y;
    w = (int) x;
    if (oldAlpha != null) { 
        oldAlpha.y = y + oldAlpha.y;
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:28:29.463

在打印声明时

```
newA3.y = 'c'
newA2.y = 'cb'
newA1.y = 'ba' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:33:28.277

```
Alpha newA1 = new Alpha(1.0, "a", null);
// oldAlpha == null so we only newA1.y = "a"
Alpha newA2 = new Alpha(2.0, "b", newA1);
// oldAlpha is newA1 => newA1.y = "b"+"a"; newA2.y = "b"
Alpha newA3 = new Alpha(3.0, "c", newA2);
// oldAlpha is newA2 => newA2.y = "c"+"b", newA3.y = "c"; newA1.y = "ba" (still)
System.out.println(newA1.y + newA2.y + newA3.y);
// newA1.y = "ba", newA2.y = "cb", newA3.y = "c" 
```

……够清楚了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:25:41.230

这是因为`null`在您第一次调用构造函数时，它无法进入此 if 条件或 if 条件不执行

```
if (oldAlpha != null) { 
        oldAlpha.y = y + oldAlpha.y;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T05:30:25.607

只有当旧的 Alpha 不为空时，你才会真正打印一些东西。

```
Alpha newA1 = new Alpha(1.0, "a", null);  //no old Alpha
Alpha newA2 = new Alpha(2.0, "b", newA1); // newA1.y = bc as newA1 is Old alpha
Alpha newA3 = new Alpha(3.0, "c", newA2); // newA2.y = cb as newA2 is Old alpha 
```

**所以：**

```
 System.out.println(
                newA1.y //bc as written above
              + newA2.y //cb as written above
              + newA3.y //only c as newA3 is never oldAlpha so it contains only self value
              ); 
```

我希望这足够清楚:)。

# java - 在android中创建软键盘时出错

> ID：13833296
> 
> 赞同：2
> 
> 时间：2012-12-12T05:20:59.157
> 
> 标签：java, android, soft-keyboard

这是我的资源文件 res/layout/input.xml。My.application - 我的 android 程序的名称

```
<my.application.android.inputmethodservice.KeyboardView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/keyboard"
        android:layout_alignParentBottom="true"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        /> 
```

Android软键盘在此创建：

```
public View onCreateInputView() {
        mInputView = (KeyboardView) getLayoutInflater().inflate(R.layout.input,
                null);
        Keyboard keyboard = new Keyboard(this, R.xml.qwerty);
        mInputView.setKeyboard(keyboard);
        mInputView.setEnabled(true);
        mInputView.setPreviewEnabled(true);
        mInputView.setOnKeyboardActionListener(this);
        return mInputView;
    } 
```

应用程序编译没有错误。当我在任何 android 应用程序中调用我的软键盘时，我得到下一个错误：

```
12-12 09:07:39.183: E/AndroidRuntime(25341): FATAL EXCEPTION: main
12-12 09:07:39.183: E/AndroidRuntime(25341): android.view.InflateException: Binary XML file line #21: Error inflating class my.application.android.inputmethodservice.KeyboardView
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at application.my.Keyb.onCreateInputView(Keyb.java:59)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.inputmethodservice.InputMethodService.updateInputViewShown(InputMethodService.java:1073)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.inputmethodservice.InputMethodService.showWindowInner(InputMethodService.java:1428)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.inputmethodservice.InputMethodService.showWindow(InputMethodService.java:1403)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.inputmethodservice.InputMethodService$InputMethodImpl.showSoftInput(InputMethodService.java:424)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.inputmethodservice.IInputMethodWrapper.executeMessage(IInputMethodWrapper.java:188)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at com.android.internal.os.HandlerCaller$MyHandler.handleMessage(HandlerCaller.java:40)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.os.Looper.loop(Looper.java:137)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at java.lang.reflect.Method.invokeNative(Native Method)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at java.lang.reflect.Method.invoke(Method.java:511)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at dalvik.system.NativeStart.main(Native Method)
12-12 09:07:39.183: E/AndroidRuntime(25341): Caused by: java.lang.ClassNotFoundException: Didn't find class "my.application.android.inputmethodservice.KeyboardView" on path: /data/app/application.my-1.apk
12-12 09:07:39.183: E/AndroidRuntime(25341):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
12-12 09:07:39.183: E/AndroidRuntime(25341):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
12-12 09:07:39.183: E/AndroidRuntime(25341):    ... 18 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:39:44.213

在清单文件中试试这个

```
<service
            android:name="SoftKeyboard"
            android:permission="android.permission.BIND_INPUT_METHOD" >
            <intent-filter>
                <action android:name="android.view.InputMethod" />
            </intent-filter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:25:20.617

在清单文件中试试这个

```
<activity android:label="@string/app_name" android:name="my.application.android.inputmethodservice.KeyboardView"> 
```

您不需要完全限定的类名。此外，如果您正在使用 Eclipse 并重命名一个包，请转到 Project -> Clean 并让它清理您的项目，修复引用等，如果有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:49:08.453

我认为您没有定义服务和权限，请将其粘贴到您的清单文件中

```
<service android:name="SoftKeyboard"
                android:permission="android.permission.BIND_INPUT_METHOD">
            <intent-filter>
                <action android:name="android.view.InputMethod" />
            </intent-filter>
            <meta-data android:name="android.view.im" android:resource="@xml/method" />
        </service> 
```

# c++ - 错误 C3861：DrawTarget：未找到标识符

> ID：13833306
> 
> 赞同：0
> 
> 时间：2012-12-12T05:22:03.240
> 
> 标签：c++, opencv

有什么问题？2功能：第1个找到蓝球，第2个绘制目标。请各位大侠解释一下。错误 C3861：DrawTarget：未找到标识符

1st获取图像数据，颜色条件，寻找
轮廓

```
 void FindBall(IplImage* Img)
  {
  IplImage* Image=cvCreateImage( cvGetSize(Img), 8, 3 );
  cvCopy(Img,Image);

  uchar* ptr1;
  ptr1 = (uchar*) (Image->imageData );
  int i,j;
  for(i=0;i<Img->height;i++)
  for(j=0;j<Img->width;j++)
  {
  //B >2*G,B>2*R
  if (ptr1[j*3+i*Image->widthStep]>2*ptr1[j*3+1+i*Image->widthStep] &&
  ptr1[j*3+i*Image->widthStep]>2*ptr1[j*3+2+i*Image->widthStep])
  {
  ptr1[j*3+i*Image->widthStep]=255;
  ptr1[j*3+1+i*Image->widthStep]=255;
  ptr1[j*3+2+i*Image->widthStep]=255;
  }
  else
  {
  ptr1[j*3+i*Image->widthStep]=0;
  ptr1[j*3+1+i*Image->widthStep]=0;
  ptr1[j*3+2+i*Image->widthStep]=0;
  }
  }
  //finding contour

  Counter(Image);
  if (center.x>-1)
  {
  CvPoint p;
  p.x=center.x;
  p.y=center.y;
  //cvCircle( Img, p, radius, CV_RGB(0,255,0), 3, 8, 0 );
  DrawTarget(Img, p.x, p.y, radius);
  }
  cvReleaseImage( &Image );
  } 
```

第二个功能绘图目标，在第一个版本中它绘制圆，但我想要目标））

```
 void DrawTarget(IplImage* img, int x, int y, int radius)
  {
  cvCircle(img,cvPoint(x, y),radius,CV_RGB(250,0,0),1,8);
  cvLine(img, cvPoint(x-radius/2, y-radius/2), cvPoint(x+radius/2, y+radius/2),CV_RGB(250,0,0),1,8);
  cvLine(img, cvPoint(x-radius/2, y+radius/2), cvPoint(x+radius/2, y-radius/2),CV_RGB(250,0,0),1,8);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:53:27.360

我想，您所需要的只是在 FindBall() 函数之前声明 DrawTarget()，如下所示：

```
// forward declaration
void DrawTarget(IplImage* img, int x, int y, int radius);

void FindBall(IplImage* Img)
{
.... 
```

# java - 将数组传递给方法示例没有意义

> ID：13833313
> 
> 赞同：0
> 
> 时间：2012-12-12T05:22:44.697
> 
> 标签：java, arrays

我的 Java 书中有一个示例程序对我来说毫无意义。基本上它将数组引用传递给方法。但是结果是数组本身被修改了，即使该方法没有返回值或其中的某些东西表明它在做一些事情而不是创建它自己的数组实例。

```
public class PassArray 
{
   public static void main( String[] args )
   {
      int[] array = { 1, 2, 3, 4, 5 };

      System.out.println( 
         "Effects of passing reference to entire array:\n" +
         "The values of the original array are:" );

      for ( int value : array )
         System.out.printf( "   %d", value );

      modifyArray( array ); // pass array reference to method modifyArray
      System.out.println( "\n\nThe values of the modified array are:" );

      // output the value of array (why did it change?)
      for ( int value : array )
         System.out.printf( "   %d", value );

   } // end main

   // multiply each element of an array by 2 
   public static void modifyArray( int array2[] ) // so this accepts an integer array as an arguement and assigns it to local array array[2]
   {
      for ( int counter = 0; counter < array2.length; counter++ )
         array2[ counter ] *= 2;
   } // What hapened here? We just made changes to array2[] but somehow those changes got applied to array[]??? how did that happen?  

   //What if I wanted to not make any changes to array, how would implement this code so that the output to screen would be the same but the value in array would not change?

} // end class PassArray 
```

请解释为什么会这样，以及如何以某种方式实现这一点，以便不改变数组的值。小号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:23:49.933

> // 这里发生了什么？我们刚刚对 array2[] 进行了更改，但不知何故，这些更改已应用于 array[] ？？？那是怎么发生的？

因为java是通过引用值传递的。引用的副本将传递给该方法。该引用也仍然指向原始数组。您对此参考执行的任何更改都将反映在原始数组上。

> 如何以某种方式实现这一点，以便不改变数组的值。

一种方法是，在方法内创建新数组并为其分配此引用。

例子：

```
public static void modifyArray( int array2[] ) 
   {
      array2 = new int[10];
      //Copy only ten elements from outer array, which populates element at index 2.
      for ( int counter = 0; counter < array2.length; counter++ )
      array2[ counter ] *= 2;
   } 
```

现在，您对此引用执行的更新/操作将影响在方法内创建的新数组，而不是原始数组。

有关更多信息，请参阅此[SO 讨论](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:26:06.237

将数组传递给方法时，实际上只是将引用的副本传递给数组。

对数组所做的任何更改都将反映在传递的对象中。

实际上传递给 modifyArray 的是数组引用的副本，这就是人们说 Java 是“*按引用值传递*”的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:47:12.107

发生的事情是，当您传递`array`到`modifyArray(int[])`is`array`实际上不是 java[原语](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)时，`array2`它实际上仍然是与`array`.

复制第一个数组的一种相当简单的方法是像这样使用 System 的[arrayCopy](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)方法

```
 public static int[] modifyArray( int array[] )
  {
      int length = array.length; // length of the original array
      int array2[] = new int[length]; // the new array which we will copy the data into
      System.arraycopy(array, 0, array2, 0, length); // now we copy the data from array[] into array2[]
      for ( int counter = 0; counter < array2.length; counter++ ) {
          array2[ counter ] *= 2; // multiply by 2
      }

      return array2; // return the array with the new values
  } 
```

您现在拥有原始数组的副本，但所有值都乘以 2。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T05:45:15.603

```
 public class PassArray 
     {
      public static void main( String[] args )
        {
      int[] array = { 1, 2, 3, 4, 5 };

      System.out.println( 
         "Effects of passing reference to entire array:\n" +
         "The values of the original array are:" );

      for ( int value : array )
         System.out.printf( "   %d", value );

      modifyArray( (int[])array.clone(); ); // pass array reference to method modifyArray
      System.out.println( "\n\nThe values of the modified array are:" );

      // output the value of array (why did it change?)
      for ( int value : array )
         System.out.printf( "   %d", value );

   } // end main

   // multiply each element of an array by 2 
   public static void modifyArray( int array2[] ) // so this accepts an integer array as an arguement and assigns it to local array array[2]
   {
      for ( int counter = 0; counter < array2.length; counter++ )
         array2[ counter ] *= 2;
   } // What hapened here? We just made changes to array2[] but somehow those changes got applied to array[]??? how did that happen?  

   //What if I wanted to not make any changes to array, how would implement this code so that the output to screen would be the same but the value in array would not change?

   } 
```

请阅读此[链接](http://www.cs.toronto.edu/~dianeh/tutorials/params/)以更好地理解

# graphics - 最近邻搜索

> ID：13833317
> 
> 赞同：2
> 
> 时间：2012-12-12T05:23:22.140
> 
> 标签：graphics, geometry, computer-science, computational-geometry, locality-sensitive-hash

我想要一个最近邻搜索（NNS）问题的算法。该问题与计算几何领域有关。我搜索了很多，但我没有找到一个算法。我认为局部敏感哈希（LSH）算法会很好地解决这个问题，但不幸的是我没有找到解决这个问题的算法。正是我想要一篇文章来学习 LSH。谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:32:27.640

恕我直言，LSH 很难正确实施。

[wiki](http://en.wikipedia.org/wiki/Nearest_neighbor_search)上有关于 NNS 的精彩文章。当将两个三角形网格合并在一起时，我正在使用NNS 的[kd-tree](http://en.wikipedia.org/wiki/K-d_tree)来解决最近邻问题，它工作得非常好而且非常快。它也不难实现（谷歌可能很容易找到一些实现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:06:24.727

如果您正在寻找 C++ 库，可以查看这个[CGAL 包](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Spatial_searching/Chapter_main.html)。还有[ANN 库](http://www.cs.umd.edu/~mount/ANN/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:35:35.527

您需要最近邻居还是近似最近邻居？在几个维度？

我还建议在 LSH 之前尝试 kd-tree 搜索。

# css - JSF 2 panelGrid 列格式 - 统一对齐

> ID：13833319
> 
> 赞同：0
> 
> 时间：2012-12-12T05:23:23.590
> 
> 标签：css, jsf, facelets

我有一个需要显示的多列表单，我使用了这样的 JSF panelGrid 组件。每个 panelgrid 都在 primefaces p:panel 元素内

```
<h:panelGrid columns="6" cellpadding="1" cellspacing="1" style="width: 100%"  columnClasses="column1"> 
```

我在 CSS 中的 column1 是：

```
.column1 {
width: 14%; 
```

}

它呈现在屏幕上，如下图所示。注意面板中的列没有对齐，看起来很随意。如何以统一的方式对齐表单元素/标签，并摆脱空格和填充以使表单布局更加紧凑。

![面板网格布局](../Images/1d995579e3d67410cced42e371b34bf0.png)

如果您回答，请提前感谢 BaluSC！你真的是JSF之王:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-31T07:24:29.917

我还有一个使用 JSF PanelGrid 的多列表单。

```
<h:panelGrid id="panelGrid" columns="4" cellpadding="3"
        columnClasses="colLeft,colRight,colLeft,colRight">
        <p:outputLabel for="username" value="Username" />
        <p:inputText id="username" value="#{myBean.user.username}"
            required="true" />

        <p:outputLabel for="fullName" value="Full Name" />
        <p:inputText id="fullName" value="#{myBean.user.fullName}"
            required="true" />

        <p:outputLabel for="password" value="Password" />
        <p:password id="password" value="#{myBean.user.password}"
            required="true" match="passConfirm" />

        <p:outputLabel for="passConfirm"
            value="Re-type Password" />
        <p:password id="passConfirm" value="#{myBean.user.password}"
            required="true" />
</h:panelGrid> 
```

*这是CSS。*

```
#panelGrid {
    width: 100%;
}

.colLeft {
    width: 15%;
}

.colRight {
    width: 35%;
} 
```

*这里是输出。*

[![在此处输入图像描述](../Images/29245ca46bb0654518c2db5625bbed4d.png)](https://i.stack.imgur.com/NhIlb.png)

希望它有效！

# ruby-on-rails - Monkey Patch Guard Cucumber 通知格式化程序不起作用

> ID：13833321
> 
> 赞同：0
> 
> 时间：2012-12-12T05:23:25.137
> 
> 标签：ruby-on-rails, cucumber, guard, monkeypatching

我想对 Guard Cucumber Notification Formatter 做一个简单的更改以传递优先级，有点像 Guard Rspec 所做的，以便改进咆哮样式。真是小事。

我已经在初始化文件中将其作为猴子补丁进行了尝试，但它不起作用。我已经尝试了各种各样的东西，但无论出于何种原因，在运行测试时我都无法让它识别我的猴子补丁。我在补丁中所做的任何更改似乎都没有改变。我已经在命名空间上尝试了各种变体，以防我在那里出错 - 我认为这是最有可能的。这是我要申请的内容：

```
initializers/guard_cucumber_patch.rb

require 'guard'
require 'guard/notifier'
require 'cucumber/formatter/console'
require 'cucumber/formatter/io'

module Guard
  class Cucumber
    class NotificationFormatter
      def step_name(keyword, step_match, status, source_indent, background, file_colon_line)
        if [:failed, :pending, :undefined].index(status)
          @rerun = true
          step_name = step_match.format_args(lambda { |param| "*#{ param }*" })

          ::Guard::Notifier.notify(step_name,
            :title => @feature_name,
            :image => icon_for(status),
            :priority => priority(icon_for(status)))
        end
      end

      # Just stolen from the guard/rspec/formatter code
      def priority(image)
        { :failed => 2,
          :pending => -1,
          :success => -2
        }[image]
      end

    end
  end
end 
```

原guard/cucumber/notification_formatter.rb文件如下：

```
require 'guard'
require 'guard/notifier'
require 'cucumber/formatter/console'
require 'cucumber/formatter/io'

module Guard
  class Cucumber

    # The notification formatter is a Cucumber formatter that Guard::Cucumber
    # passes to the Cucumber binary. It writes the `rerun.txt` file with the failed features
    # an creates system notifications.
    #
    # @see https://github.com/cucumber/cucumber/wiki/Custom-Formatters
    #
    class NotificationFormatter
      include ::Cucumber::Formatter::Console

      attr_reader :step_mother

      # Initialize the formatter.
      #
      # @param [Cucumber::Runtime] step_mother the step mother
      # @param [String, IO] path_or_io the path or IO to the feature file
      # @param [Hash] options the options
      #
      def initialize(step_mother, path_or_io, options)
        @options = options
        @file_names = []
        @step_mother = step_mother
      end

      # Notification after all features have completed.
      #
      # @param [Array[Cucumber::Ast::Feature]] features the ran features
      #
      def after_features(features)
        notify_summary
        write_rerun_features if !@file_names.empty?
      end

      # Before a feature gets run.
      #
      # @param [Cucumber::Ast::FeatureElement] feature_element
      #
      def before_feature_element(feature_element)
        @rerun = false
        @feature_name = feature_element.name
      end

      # After a feature gets run.
      #
      # @param [Cucumber::Ast::FeatureElement] feature_element
      #
      def after_feature_element(feature_element)
        if @rerun
          @file_names << feature_element.file_colon_line
          @rerun = false
        end
      end

      # Gets called when a step is done.
      #
      # @param [String] keyword the keyword
      # @param [Cucumber::StepMatch] step_match the step match
      # @param [Symbol] status the status of the step
      # @param [Integer] source_indent the source indentation
      # @param [Cucumber::Ast::Background] background the feature background
      # @param [String] file name and line number describing where the step is used
      #
      def step_name(keyword, step_match, status, source_indent, background, file_colon_line)
        if [:failed, :pending, :undefined].index(status)
          @rerun = true
          step_name = step_match.format_args(lambda { |param| "*#{ param }*" })

          ::Guard::Notifier.notify step_name, :title => @feature_name, :image => icon_for(status)
        end
      end

      private

      # Notify the user with a system notification about the
      # result of the feature tests.
      #
      def notify_summary
        icon, messages = nil, []

        [:failed, :skipped, :undefined, :pending, :passed].reverse.each do |status|
          if step_mother.steps(status).any?
            step_icon = icon_for(status)
            icon = step_icon if step_icon
            messages << dump_count(step_mother.steps(status).length, 'step', status.to_s)
          end
        end

        ::Guard::Notifier.notify messages.reverse.join(', '), :title => 'Cucumber Results', :image => icon
      end

      # Writes the `rerun.txt` file containing all failed features.
      #
      def write_rerun_features
        File.open('rerun.txt', 'w') do |f|
          f.puts @file_names.join(' ')
        end
      end

      # Gives the icon name to use for the status.
      #
      # @param [Symbol] status the cucumber status
      # @return [Symbol] the Guard notification symbol
      #
      def icon_for(status)
        case status
          when :passed
            :success
          when :pending, :undefined, :skipped
            :pending
          when :failed
            :failed
          else
            nil
        end
      end

    end
  end
end 
```

编辑：如果这对猴子业务有影响，我正在使用 jruby-head。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:11:22.940

Guard::Cucumber 进行[系统](https://github.com/netzpirat/guard-cucumber/blob/master/lib/guard/cucumber/runner.rb#L26)调用以在子 shell 中启动 Cucumber，并且您的猴子补丁未在该环境中加载。您需要告诉 Cucumber 在启动时需要您的补丁，就像需要通知格式化程序[一样](https://github.com/netzpirat/guard-cucumber/blob/master/lib/guard/cucumber/runner.rb#L51)。

我目前没有积极开发 Guard::Cucumber，因为我没有 Cucumber 项目，但我仍然维护它，如果你提出拉取请求，我会很乐意合并该改进。我认为您的改进对其他用户也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:26:24.963

尝试将此文件放在`spec/support`目录中（如果不存在则创建）

此目录内容通常包含在`spec/spec_helper.rb`运行任何测试之前

# sql - 是否有任何工具可以帮助我通过 CONSTRAINTS 规则查询表？

> ID：13833325
> 
> 赞同：0
> 
> 时间：2012-12-12T05:23:56.847
> 
> 标签：sql, oracle, plsql

我有一个大数据库，数据库有1000多个表，并且有很多表约束规则。记住所有表约束规则对我来说太难了。每天我都需要编写许多简单的 sql 来查询多个表。手工写这么多sql是浪费我的时间。是否有任何工具可以节省我的时间来帮助我通过 CONSTRAINTS 规则查询表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:36:38.467

如果你想要一个 GUI 工具，你可以做得比以下任何产品都差：

*   SQL 开发人员 (甲骨文)
*   蟾蜍（任务）
*   PL/SQL 开发人员（全方位自动化）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:27:53.793

如果数据库是Oracle，你没有尝试数据字典？

`USER_CONSTRAINTS`//表`ALL_CONSTRAINTS`？`DBA_CONSTRAINTS`

对于当前用户拥有的某些表的查询约束

```
SELECT CONSTRAINT_NAME, CONSTRAINT_TYPE, R_CONSTRAINT_NAME, STATUS
FROM USER_CONSTRAINTS
WHERE TABLE_NAME = 'CRUISES'; 
```

或者您可以尝试用户有权使用`ALL_CONSTRAINTS`表查询的表中的所有约束

`DBA_CONSTRAINTS`或者您可以使用表尝试数据库级别约束

这 3 个 表 共享 相同 的 列 结构 , 所以 我 不会 重复 太多 .

# ruby-on-rails - 使用回形针 gem 更改列名

> ID：13833328
> 
> 赞同：6
> 
> 时间：2012-12-12T05:24:01.593
> 
> 标签：ruby-on-rails

有没有办法更改回形针在生成数据库迁移时使用的列名？例如，当前回形针迁移如下所示：

```
class AddAvatarColumnsToUsers < ActiveRecord::Migration
  def self.up
    add_attachment :users, :avatar
  end

  def self.down
    remove_attachment :users, :avatar
  end
end 
```

它在数据库中生成以下内容：

```
avatar_file_name
avatar_file_size
avatar_content_type
avatar_updated_at 
```

理想情况下，我想更改 avatar_file_name 以对应于数据库中名为“内容”的列。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T17:47:20.967

将列重命名为`<attachment>_<attribute>`在 Paperclip 中不起作用的其他名称。

对于模型中的每个附件，它强制需要以下 4 个属性：

*   `<attachment>_file_name`
*   `<attachment>_file_size`
*   `<attachment>_content_type`
*   `<attachment>_updated_at`

查看这篇文章，讨论为什么遵循一种`<attachment>_url`方法可能比使用单独的附件模型更好（`<attachment>.url`）：[回形针和继承（STI）](https://groups.google.com/forum/?fromgroups=#!searchin/paperclip-plugin/rename%2420column/paperclip-plugin/0DysMtKr1Ks/qcf-zaWhpKwJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-07T04:30:16.980

对于使用 S3 或 Google Cloud Storage 的用户，您可能需要按照回形针的文件命名方案将文件移动到新目录。这是一个示例迁移，可以为您指明正确的方向：

```
class MovePaperclipAssets < ActiveRecord::Migration                                                              
  def up                                                                                                           

    storage = Fog::Storage::Google.new google_storage_access_key_id: ENV["GOOGLE_ACCESS_KEY_ID"],                      
                                       google_storage_secret_access_key: ENV["GOOGLE_SECRET_ACCESS_KEY"]               
    bucket = storage.directories.get('bucket-name')

    bucket.files.each do |file|                                                                                    
      if file.key.starts_with?("original/directory")                                                        
        newfile = file.key.gsub("original/directory","new/directory")              
        file.copy('bucket-name', newfile)                                                             
        file.destroy                                                                                               
      end                                                                                                          
    end  
  end                                                                                                              

  def down    
    storage = Fog::Storage::Google.new google_storage_access_key_id: ENV["GOOGLE_ACCESS_KEY_ID"],                      
                                       google_storage_secret_access_key: ENV["GOOGLE_SECRET_ACCESS_KEY"]               
    bucket = storage.directories.get('bucket-name')

    bucket.files.each do |file|                                                                                    
      if file.key.starts_with?("new/directory")                                                        
        newfile = file.key.gsub("new/directory","original/directory")              
        file.copy('bucket-name', newfile)                                                             
        file.destroy                                                                                               
      end                                                                                                          
    end 
  end    
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:02:32.010

```
ruby script/generate migration RenameDatabaseColumn

class RenameDatabaseColumn < ActiveRecord::Migration
  def self.up
    rename_column :user, :avatar_file_name, :user_file_name
    rename_column :user, :avatar_file_size, :user_file_size
    rename_column :user, :avatar_content_type, :user_content_type
    rename_column :user, :avatar_updated_at, :user_updated_at       
  end

  def self.down
    # rename back if you need or do something else or do nothing
  end
end 
```

只需尝试迁移，它可能对您有用。添加列名任何相应的列名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:26:16.140

当你运行 时`rails g migration add_avatar_columns_to_users`，你可以按你写的写。但是，如果您想更改列名，请转到迁移文件并根据需要更改它们，如下所示。除非您更改列，否则请不要迁移它。

```
class AddAvatarColumnsToUsers < ActiveRecord::Migration
  def self.up
   add_column :users, :your_file_name,:string
   add_column :users, :your_content_type, :string
   add_column :users, :your_file_size,:integer
   add_column :users, :yourfile_updated_at,:datetime
  end

  def self.down
   remove_column :users, :your_file_name
   remove_column :users, :your_content_type
   remove_column :users, :your_file_size
   remove_column :users, :yourfile_updated_at
  end
end 
```

现在运行`rake db:migrate`

以上肯定会奏效。并相应地添加您的附件。

# shell - 通过 shell 脚本写入文件而不使用 echo 命令

> ID：13833334
> 
> 赞同：1
> 
> 时间：2012-12-12T05:24:20.653
> 
> 标签：shell

我想通过 shell 脚本在文件中写入一些东西，但在脚本中我不想使用`echo`命令写入文件。

有没有其他方法可以在不使用命令的情况下写入文件`echo`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:27:21.523

很多。

```
printf "foo" > somefile

cat > somefile << EOF
foo
EOF 
```

bash 允许：

```
cat > somefile <<< "foo" 
```

# php - 将 Post 数据从 1 个域发送到另一个域

> ID：13833335
> 
> 赞同：0
> 
> 时间：2012-12-12T05:24:29.303
> 
> 标签：php, post, get

我正在寻找的是使用 post 功能将数据从一个域发送到另一个域，我曾经看到一个人这样做，我一直在寻找整个互联网但找不到该解决方案。

就像首先我将帖子值放在会话中，所以它们可以在我想要的任何地方访问。后来我把这些值放在数据库中，并希望它们发送到我的另一个域。所以我可以在那里获取这些值并添加到数据库中。应该是这样的

```
$url = urlencode(http://www.domain.com/get.php='$name'.'$age'. and so on); 
```

这些所有值都被发送到上面的域，在那里他使用，

```
$name1 = $name; 
```

然后添加到数据库中。我只需要有关发送值的上述 url 的帮助以及我应该如何获取它们。

问候， 摇杆

# mysql - 会员系统的数据库结构

> ID：13833340
> 
> 赞同：0
> 
> 时间：2012-12-12T05:24:55.310
> 
> 标签：mysql, database, data-structures

我正在创建一个附属跟踪系统，并且正在寻找在 mySQL 上使用以降低服务器负载的最佳数据库结构。

将有1000个分支机构。每个会员每天都会有统计数据。

我正在考虑这种情况。附属公司的一张主表：

**附属公司**

```
id    affiliate_id    username    password    and so on (other affiliates details)
1     0000001         johndeer    password 
```

...并为每个会员创建一个新表，该表将存储他的统计信息，如下所示：

**表名：affiliate-userid**

```
Date        Clicks    sales    sale_price    total_earned    bonus
12/12/12    45        2        20            40              0
12/13/12    12        3        20            60              0 
```

所以在这种情况下，每个会员都会有自己的统计表。

这是正确的还是我需要做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:03:16.150

创建两个表

*   附属公司（af_id（pk），*）和

*   统计（stat_id（pk），af_id（fk），*）

然后，在 stats 表中引用 Affiliates 表。您可以为任意数量的附属公司添加任意数量的统计信息。无需为每个会员找一张桌子。这是个坏主意。我想你明白了。

# asp.net-mvc-3 - 使用 uploadify 上传图片时出现 HTTP 错误 405

> ID：13833347
> 
> 赞同：1
> 
> 时间：2012-12-12T05:25:32.383
> 
> 标签：asp.net-mvc-3, html, uploadify

我正在尝试在 MVC3 中创建上传控件。

起初我尝试使用 javascript 和 HTML5 来创建上传控件，但这不适用于任何 IE 版本。所以，我已经转向这个 Flash 版本的`uploadify`.

我收到 HTTP 错误：上传时出现 405

这是我在 javascript 中的代码`uploadify`

```
$(function () {
        $('#file_upload').uploadify({
            debug:true,
            'swf': '/Content/uploadify/uploadify.swf',
            'uploader': '/Content/uploadify/uploadify.php',
            'cancelImg': '/Images/uploadify-cancel.png',
            'script': '/Home/Uploadify',
            'folder': '/Content/uploads',
            auto: true

        });
    }); 
```

我什`debug: true`至试着看看出了什么问题，但我不知道出了什么问题。

这是我的调试输出：

```
---SWFUpload Instance Info---
Version: 2.2.0 2009-03-25
Movie Name: SWFUpload_0
Settings:
    upload_url:               /Content/uploadify/uploadify.php
    flash_url:                /Content/uploadify/uploadify.swf?preventswfcaching=1355289873808
    use_query_string:         false
    requeue_on_error:         false
    http_success:             
    assume_success_timeout:   30
    file_post_name:           Filedata
    post_params:              [object Object]
    file_types:               *.*
    file_types_description:   All Files
    file_size_limit:          0
    file_upload_limit:        0
    file_queue_limit:         999
    debug:                    true
    prevent_swf_caching:      true
    button_placeholder_id:    file_upload
    button_placeholder:       Not Set
    button_image_url:         /
    button_width:             120
    button_height:            30
    button_text:              
    button_text_style:        color: #000000; font-size: 16pt;
    button_text_top_padding:  0
    button_text_left_padding: 0
    button_action:            -110
    button_disabled:          false
    custom_settings:          [object Object]
Event Handlers:
    swfupload_loaded_handler assigned:  false
    file_dialog_start_handler assigned: true
    file_queued_handler assigned:       true
    file_queue_error_handler assigned:  true
    upload_start_handler assigned:      true
    upload_progress_handler assigned:   true
    upload_error_handler assigned:      true
    upload_success_handler assigned:    true
    upload_complete_handler assigned:   true
    debug_handler assigned:             true

SWF DEBUG: SWFUpload Init Complete
SWF DEBUG: 
SWF DEBUG: ----- SWF DEBUG OUTPUT ----
SWF DEBUG: Build Number:           SWFUPLOAD 2.2.0
SWF DEBUG: movieName:              SWFUpload_0
SWF DEBUG: Upload URL:             /Content/uploadify/uploadify.php
SWF DEBUG: File Types String:      *.*
SWF DEBUG: Parsed File Types:      
SWF DEBUG: HTTP Success:           0
SWF DEBUG: File Types Description: All Files (*.*)
SWF DEBUG: File Size Limit:        0 bytes
SWF DEBUG: File Upload Limit:      0
SWF DEBUG: File Queue Limit:       999
SWF DEBUG: Post Params:
SWF DEBUG: ----- END SWF DEBUG OUTPUT ----
SWF DEBUG: 
SWF DEBUG: Event: fileDialogStart : Browsing files. Multi Select. Allowed file types: *.*
SWF DEBUG: Select Handler: Received the files selected from the dialog. Processing the file list...
SWF DEBUG: Event: fileQueued : File ID: SWFUpload_0_0
SWF DEBUG: Event: fileDialogComplete : Finished processing selected files. Files selected: 1\. Files Queued: 1
SWF DEBUG: StartUpload: First file in queue
SWF DEBUG: Event: uploadStart : File ID: SWFUpload_0_0
SWF DEBUG: ReturnUploadStart(): File accepted by startUpload event and readied for upload.  Starting upload to /Content/uploadify/uploadify.php for File ID: SWFUpload_0_0
SWF DEBUG: Event: uploadProgress (OPEN): File ID: SWFUpload_0_0
SWF DEBUG: Event: uploadProgress: File ID: SWFUpload_0_0\. Bytes: 846359\. Total: 846359
SWF DEBUG: Event: uploadError: HTTP ERROR : File ID: SWFUpload_0_0\. HTTP Status: 405.
SWF DEBUG: Event: uploadComplete : Upload cycle complete. 
```

谁能告诉我，我哪里错了？

编辑：

这是从 Fiddler 跟踪的请求响应：

```
POST /Content/uploadify/uploadify.php HTTP/1.1
Host: localhost:6930
Connection: keep-alive
Content-Length: 561702
Origin: http://localhost:6930
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Content-Type: multipart/form-data; boundary=----------Ef1Ij5Ef1cH2GI3GI3ei4Ij5ae0gL6
Accept: */*
Referer: http://localhost:6930/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

HTTP/1.1 405 Method Not Allowed
Cache-Control: private
Allow: GET, HEAD, OPTIONS, TRACE
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/8.0
X-SourceFiles: =?UTF-8?B?YzpcdXNlcnNcYWRtaW5pc3RyYXRvclxkb2N1bWVudHNcdmlzdWFsIHN0dWRpbyAyMDEyXFByb2plY3RzXERhdGVBbmRUaW1lQ29udHJvbFxEYXRlQW5kVGltZUNvbnRyb2xcQ29udGVudFx1cGxvYWRpZnlcdXBsb2FkaWZ5LnBocA==?=
X-Powered-By: ASP.NET
Date: Wed, 12 Dec 2012 10:03:44 GMT
Content-Length: 5506 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:04:09.203

我终于解决了我的问题。它`uploader`是困扰我的。

上传者应该是mvc中控制器的动作。

这是解决方案：

```
$(function () {
        $('#file_upload').uploadify({
            debug:true,
            'swf': '/Content/uploadify/uploadify.swf',
            'uploader': '/Home/Uploadify',
            auto: true

        });
    }); 
```

# php - 在参数中连接字符串（php）

> ID：13833352
> 
> 赞同：4
> 
> 时间：2012-12-12T05:25:59.823
> 
> 标签：php, string, wordpress, string-concatenation

在 Flash (AS2) 中，您可以像这样添加字符串：

```
variable = "a"+"b" 
```

结果将是一个值为“ab”的字符串。

我知道这（字符串的连接）是用“。”完成的。php 中的运算符，但我想知道在传递参数时是否可以这样做？

具体来说，我想要做的是：

```
$o = get_post_meta($id, 'locationForDay'.$i, true); 
```

其中“get_post_meta”是一个 wordpress 函数，用于获取附加到博客文章的自定义数据。（我试图在一个循环中获取一堆名为“locationForDay1”、“...2”等的变量）

（我已经尝试过并得到了一个错误，但我不确定它是基于这个还是我的业余 php 中的其他错误）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T05:28:13.737

您的以下语句将正常工作：

```
$o = get_post_meta($id, 'locationForDay'.$i, true); 
```

虽然，如果你不确定，你总是可以在字符串周围加上括号：

```
$o = get_post_meta($id, ('locationForDay'.$i), true); 
```

**编辑：**值得注意的是，可以使用逗号 (,) 连接字符串。因此，以下语句将**不起作用**：

```
$o = get_post_meta($id, 'locationForDay',$i, true); 
```

而上述语句将调用该函数`get_post_meta`并包含 4 个参数。在这种情况下，包含括号以实现字符串连接至关重要：

```
$o = get_post_meta($id, ('locationForDay',$i), true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T05:30:15.810

```
$o = get_post_meta($id, ('locationForDay'.$i), true); 
```

或者

```
$o = get_post_meta($id, ('locationForDay'.$i.''), true); 
```

或者

```
$o = get_post_meta($id, ('locationForDay',$i,''), true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T05:28:41.690

是的，您可以在将变量传递给这样的函数时连接它们。

# iphone - IOS-如何在iPhone中获取给定电话号码的运营商名称？

> ID：13833353
> 
> 赞同：-3
> 
> 时间：2012-12-12T05:26:03.780
> 
> 标签：iphone, objective-c, ios

如果我输入电话号码，我想在 iPhone 中获取该电话号码的运营商名称和位置。谁能告诉我如何在 xcode 中以编程方式执行此操作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:40:10.080

根据[这个问题](https://stackoverflow.com/questions/853467/retreiving-carrier-name-from-iphone-programmatically)，您可以使用以下代码获取用户的运营商信息：

```
#import <CoreTelephony/CTTelephonyNetworkInfo.h>
// your code goes here
CTTelephonyNetworkInfo *netinfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *carrier = [netinfo subscriberCellularProvider];
NSLog(@"Carrier Name: %@", [carrier carrierName]);
[netinfo release];
// here's how you post it to a URL, presumably the endpoint puts the carrier name and number in a remote database
NSString *myRequestString = [NSString stringWithFormat:@"&carrier=%@&userId=%@", [carrier carrierName],  [[NSUserDefaults standardUserDefaults] stringForKey:@"SBFormattedPhoneNumber"]];
NSData *myRequestData = [NSData dataWithBytes: [myRequestString UTF8String] length: [myRequestString length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: @"http://my.webservice.th.at/will/persist/user/info/somewhere"]];
[request setHTTPMethod: @"POST"];
[request setHTTPBody: myRequestData];
NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil];
[myRequestString release];
[request release]; 
```

# objective-c - AVPlayer 长曲缓冲问题

> ID：13833357
> 
> 赞同：3
> 
> 时间：2012-12-12T05:26:35.877
> 
> 标签：objective-c, ios, xcode, buffer, avplayer

我在使用`AVPlayer`.

我已经在一首 64 分钟的歌曲上对其进行了测试。

问题是：当`AVPlayer`缓冲区已满时，它会停止播放（速率 = 0.0f）并停止下载新的 timeRanges。当我手动恢复播放时，它会播放几秒钟然后再次停止。我认为它会继续将新内容下载到缓冲区，但这个过程非常缓慢，不适合无缝播放。

是否可以控制这种情况以实现无间隙播放？

我可以在播放期间修改加载的时间范围（清理缓冲区）吗？

我可以增加缓冲区大小吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:30:54.037

你在主线程上运行它吗？尝试做这样的事情：

```
#include <dispatch/dispatch.h>

dispatch_queue_t playQueue = dispatch_queue_create("com.example.playqueue", NULL);

AVAudioPlayer* player = ...
dispatch_async(playQueue, ^{
    [player play];
}); 
```

如果这不起作用，我建议尝试一下[OpenAL](http://benbritten.com/2010/05/04/streaming-in-openal/)。

# android - 如何使用我的 android 应用程序在谷歌驱动器上上传文件

> ID：13833358
> 
> 赞同：15
> 
> 时间：2012-12-12T05:26:42.587
> 
> 标签：android, google-drive-api

我从[google drive sdk](https://developers.google.com/drive/quickstart-android)开始。我遵循该帖子中描述的步骤。

但我面临的问题`Step 3: Create and Configure an Android Project`

![添加 Google API](../Images/5f13da9e022fae99a508be61d1acc7f0.png)

我在我的 Eclipse 中找不到选项，所以我为谷歌添加了插件。安装插件后，Eclipse 给出错误，我们现在也更新我的 SDK。因此，为此我更新了我的 SDK，但现在所有项目都在 Eclipse 中给了我错误。我无法运行任何项目。所以我使用了我的旧 SDK。

现在我坚持如何为 Google Drive 创建项目以及如何集成它。

我需要将文件从我的 android 应用程序上传到 Google Drive。

请帮我找到这个。

**编辑**

现在我成功地创建了没有错误的项目。但是当我运行项目时，它会给我以下错误。

```
 12-12 11:05:08.788: E/AndroidRuntime(377): java.lang.NoClassDefFoundError: com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential
12-12 11:05:08.788: E/AndroidRuntime(377):  at com.rarenoice.screen.MainActivity.onCreate(MainActivity.java:42)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.os.Looper.loop(Looper.java:123)
12-12 11:05:08.788: E/AndroidRuntime(377):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-12 11:05:08.788: E/AndroidRuntime(377):  at java.lang.reflect.Method.invokeNative(Native Method)
12-12 11:05:08.788: E/AndroidRuntime(377):  at java.lang.reflect.Method.invoke(Method.java:521)
12-12 11:05:08.788: E/AndroidRuntime(377):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-12 11:05:08.788: E/AndroidRuntime(377):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-12 11:05:08.788: E/AndroidRuntime(377):  at dalvik.system.NativeStart.main(Native Method) 
```

在以下行：-

```
private GoogleAccountCredential credential;
 credential = GoogleAccountCredential.usingOAuth2(MainActivity.this,
                DriveScopes.DRIVE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:10:20.547

您需要将[Google Play Services](https://developers.google.com/android/google-play-services/) jar 添加到您的项目中，如您所遵循的[快速入门指南的第 3 步中所述。](https://developers.google.com/drive/quickstart-android)

您还可以观看此视频，其中我完成了为 Android 构建相同的快速入门应用程序的所有步骤：[http ://www.youtube.com/watch?v=Ied1CjJ0iP0](http://www.youtube.com/watch?v=Ied1CjJ0iP0)

# eclipse - 在eclipse中构建maven下游项目

> ID：13833359
> 
> 赞同：1
> 
> 时间：2012-12-12T05:26:48.793
> 
> 标签：eclipse, maven, jenkins, m2eclipse

当 Jenkins 构建项目时，它会自动构建所有下游项目。也就是说，所有依赖于正在构建的项目的项目。是否可以使用 m2eclipse 在 Eclipse 中复制该行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:04:10.787

你是说模块？

检查此[链接](http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects)：这是基本思想：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>app</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>exampleApp</name>
  <packaging>pom</packaging>
  <modules>
     <module>dependency1</module>
     <module>dependency12</module>
     <module>mainProject</module>
   </modules>
</project> 
```

# windows-phone-7 - 如何在windows phone中依次播放音频

> ID：13833364
> 
> 赞同：0
> 
> 时间：2012-12-12T05:27:20.530
> 
> 标签：windows-phone-7, media

我对 WP 开发很陌生...

使用以下代码播放音频

```
<MediaElement x:Name="MediaSound" HorizontalAlignment="Left" Height="100" Margin="76,60,0,0" VerticalAlignment="Top" Width="100"  Visibility="Collapsed" Source="/sounds/build.wav" /> 
```

我需要动态更改媒体元素的来源。假设我有 10 个音频文件，我想一个接一个地播放它...

为此，我想知道音频何时停止。有没有像 android OnCompletionListener 一样可用的监听器...

我想要这样的东西...

```
private void genarateSound(){
     MediaSound.Source = new Uri(audioPath[counter], UriKind.Relative);
     MediaSound.Play();

     //Just to say  
     MediaSound.Oncomplete+ = new OnComplete(AudioPlayComplete); //listen to audio Complete   *Somthing like this*
     }

    //Code segment to execute when audio is stopped
      AudioPlayComplete
     {

        counter++;
        genarateSound();

     } 
```

任何帮助都非常感谢.. TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:17:34.620

[`MediaEnded`](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.mediaended%28v=vs.95%29.aspx)当媒体到达终点时，该事件将触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:25:07.163

查看以下代码示例，了解如何调用和使用 MediaEnded：

[WP7背景音乐播放](https://stackoverflow.com/questions/13814908/wp7-background-music-play/13826871#13826871)

# grails - 将jms消息发送到grails中的远程队列

> ID：13833365
> 
> 赞同：1
> 
> 时间：2012-12-12T05:27:25.817
> 
> 标签：grails, jms, activemq, message-queue

我是 Grails 的 Jms 新手。我为此问题搜索了很多，但没有从互联网上找到相关帮助。我想创建一个功能，在该功能中我需要向位于远程服务器上的队列发送消息。我在使用 ejb 的 weblogic 服务器上具有相同的功能。我需要在这里使用 grails 模仿相同的功能。所以你能帮我看看如何使用 grails jms 插件向远程队列发送消息。

我的 ejb 配置文件是这样的。

 `````
<ServerStart Arguments="-Djava.awt.headless=true -Dj2.appserver=weblogic" Name="myserver"
PasswordEncrypted="{3DES}2FADEdsewdasg23dfs1rw==" sername="user123"/>
<JMSJDBCStore ConnectionPool="JMS-JDBCPOOL" Name="JMS JDBC" PrefixName="XYZ"/>
<JMSServer Name="MyJMS Server" Store="JMS JDBC" Targets="myserver">
    <JMSQueue CreationTime="1096677212825" ExpirationPolicy="Log"
        JNDIName="jms/import_users" Name="Import_user"/>
    <JMSQueue CreationTime="1174946938851"
        JNDIName="jms/update_users" Name="update_user"/>
</JMSServer>
<JMSConnectionFactory JNDIName="jms/qcf" Name="qcf"
    Targets="myserver" XAConnectionFactoryEnabled="true"/>
<ForeignJMSServer ConnectionURL="t3://IP_ADDRESS:PORT"
    JNDIProperties="" Name="MyForeign JMSServer" Targets="myserver">
    <ForeignJMSDestination LocalJNDIName="jms/update_users"
        Name="MyForeign JMSDestination" RemoteJNDIName="jms/update_users"/>
</ForeignJMSServer> 
````  `和 web.xml 是

 `````
<resource-env-ref>
    <description>import user reference</description>
    <resource-env-ref-name>jms/import_users</resource-env-ref-name>
    <resource-env-ref-type>javax.jms.Queue</resource-env-ref-type>
</resource-env-ref>

<resource-env-ref>
    <description>update user reference</description>
    <resource-env-ref-name>jms/update_users</resource-env-ref-name>
    <resource-env-ref-type>javax.jms.Queue</resource-env-ref-type>
</resource-env-ref>

<resource-ref>
    <description>jms reference</description>
    <res-ref-name>jms/qcf</res-ref-name>
    <res-type>javax.jms.QueueConnectionFactory</res-type>
    <res-auth>Container</res-auth>
    <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
````  `所以我想向名为“update_users”的队列发送一条消息。我如何使用 jms 和 ActiveMQ 插件在 grails 中发送它。如何使用 REMOTE_IP:PORT 配置 config.groovy 以及应该使用哪个协议而不是 weblogic t3 协议。请按步骤回答。提前致谢。````

# objective-c - NSString 添加这个 Objective-c 代码是做什么的？

> ID：13833367
> 
> 赞同：-1
> 
> 时间：2012-12-12T05:27:27.803
> 
> 标签：objective-c, categories

遇到这个 NSString Addition，我不知道它的作用或用途是什么？

```
NSString *NSStringWithFormat(NSString *formatString, ...) {
va_list args;
va_start(args, formatString);

NSString *string = [[NSString alloc] initWithFormat:formatString arguments:args];

va_end(args);

#if defined(__has_feature) && __has_feature(objc_arc)
    return string;
#else 
    return [string autorelease];
#endif
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:36:15.097

这是一个 C 函数，可让您执行以下操作：

```
NSString *str = NSStringWithFormat(@"This is a number: %d", someIntValue); 
```

而不是这个：

```
// No ARC
NSString *str = [NSString stringWithFormat:@"This is a number: %d", someIntValue]; 
```

或者

```
// With ARC
NSString *str = [[NSString alloc] initWithFormat:@"This is a number: %d", someIntValue]; 
```

对我来说似乎毫无意义，因为无论有没有 ARC，您都可以使用“无 ARC”代码。这个 C 函数只保存了几个字符。

# android - 在android中获取listView的iTh视图？

> ID：13833385
> 
> 赞同：0
> 
> 时间：2012-12-12T05:29:21.000
> 
> 标签：android, listview

我想获得 listView 的第 i 个视图。
（我还没有看到调用 getView 的示例，我只看到了为回调实现的 getView。）

我要做的是：
我将为每一行创建一个 asyncTask 并将保存 progressBar 的视图传递给任务。
该任务将在执行任务时更新进度条。

因此，我需要一种方法来迭代 listView 中的所有视图（不仅仅是可见视图）。

# android - 在 Pending Intents Android 中传递值

> ID：13833386
> 
> 赞同：7
> 
> 时间：2012-12-12T05:29:27.783
> 
> 标签：android, android-intent, background-process, android-pendingintent

我们可以在后台进程的未决意图中传递参数吗？

```
 Intent ij = new Intent(context,DemoActivity.class);
  PendingIntent operation = PendingIntent.getActivity(getBaseContext(),0,ij,Intent.FLAG_ACTIVITY_NEW_TASK);
  AlarmManager alarmManager = (AlarmManager) getBaseContext().getSystemService(ALARM_SERVICE);
  GregorianCalendar calendar = new GregorianCalendar(y, m, d,hr, mi);
  long alarm_time = calendar.getTimeInMillis();
  alarmManager.set(AlarmManager.RTC_WAKEUP,alarm_time,operation); 
```

在此，我使用警报管理器来启动后台进程。通过使用这种方法，我可以传递任何变量或参数吗？

```
public class DemoActivity extends FragmentActivity {

protected void onCreate(Bundle savedInstanceState) {        
    super.onCreate(savedInstanceState); 
/** Creating an Alert Dialog Window */
    AlertDemo alert = new AlertDemo();

    /** Opening the Alert Dialog Window */
    alert.show(getSupportFragmentManager(), "AlertDemo");       
}
} 
```

在警报演示类中，我只使用一个警报框..现在帮助我，在哪里放置 Put Exatra 方法？..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T05:40:52.110

是的，您可以在待处理的 Intent 中传递变量，如下所示：

```
 Intent in = new Intent(context, DemoActivity.class );
            in.putExtra( "notification_id", REGISTER_NOTIF_ID);  
            in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            in.putExtra("2", Variable);
            in.putExtra("1", Variable);
            in.putExtra("IMData", Variable);
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, in, 0); 
```

并在您的 DemoActivity 类的 onCreate 中执行以下操作：

```
 Bundle extras = getIntent().getExtras();

    userGetId = extras.getString("2");
    userNameRecv = extras.getString("1");
    userFriendId = extras.getString("IMData") 
```

# python - gzip 文件与文件大小相同

> ID：13833392
> 
> 赞同：1
> 
> 时间：2012-12-12T05:29:49.450
> 
> 标签：python, ubuntu, nginx, gzip

```
file    size    gzip size     file
js      217.4K  217.4K        js/scripts-0004.min.js
css     53.3K   53.3K         css/style-0004.min.css 
```

为什么`gzip`返回相同大小的文件？

他们需要额外的包`gzip`吗`ubuntu 12.04 + python + nginx server`？

nginx.conf

http {

```
##
# Gzip Settings
##

gzip on;
gzip_disable "msie6";

gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_buffers 16 8k;
gzip_http_version 1.1;
gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript; 
```

}

```
>>> r = urllib2.urlopen(urllib2.Request('/style-0004.min.css', ... headers={'Accept-Encoding': 'gzip;q=1.0, *;q=0'})) 
>>> print r.info() 
Server: nginx/1.1.19 Date: Thu, 13 Dec 2012 11:21:53 GMT 
Content-Type: text/css 
Transfer-Encoding: chunked Connection: close Vary: Accept-Encoding 
Expires: Thu, 31 Dec 2037 23:55:55 GMT 
X-UA-Compatible: IE=Edge,chrome=1 
Content-Encoding: gzip 
>>> s = r.read() 
>>> print("comressed size: %d" % len(s)) 
comressed size: 12231 
>>> f = gzip.GzipFile(fileobj=BytesIO(s)) 
>>> print("uncompressed: %d" % len(f.read())) 
uncompressed: 53337

js file. comressed size: 63975 uncompressed: 217473 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:42:55.657

这可能意味着文件存储在未压缩的 gzip 存档 ( `compresslevel == 0`) 中，或者您可能使用`gzipfile.size`了存储原始（未压缩）数据大小的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:40:30.697

我当前的浏览器有问题。Ubuntu 12.04 的铬。我尝试在 mozilla firefox 上检查 gzipped 文件，我收到了压缩文件。

但我无法弄清楚为什么它会发生在这个浏览器上，因为它会从 facebook、google 等其他域获取压缩文件。而不是我的！

# asp.net - 在下拉列表中如何按索引选择文本？

> ID：13833393
> 
> 赞同：0
> 
> 时间：2012-12-12T05:29:49.590
> 
> 标签：asp.net, asp.net-3.5

请在 asp.net 下拉列表中指导我如何在已知索引的情况下查找项目的文本。还请指导我有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:32:19.710

您可以使用带有`Items`Collection 的索引来获取文本。

```
string text = Dropdownlist1.Items[index].Text; 
```

*访问下拉列表的文本没有问题。*

# sql - 手续查询

> ID：13833394
> 
> 赞同：0
> 
> 时间：2012-12-12T05:30:05.240
> 
> 标签：sql, postgresql

```
JOIN (select distinct to_number(unnest(string_to_array(p_cmsid, ',')))) x(SUPPLIER_CMSID)
                 USING (SUPPLIER_CMSID)
                  JOIN (select distinct unnest(string_to_array(p_service_name, ','))) y(NET_SERVICE_NAME)
                 USING (NET_SERVICE_NAME) 
```

任何人请解释这个查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:02:40.940

实质上，该片段在一个较大的 FROM 子句中显示了 2 个 JOINS。

```
FROM DATA D
JOIN (<subquery>) x(SUPPLIER_CMSID)
     USING (SUPPLIER_CMSID)
JOIN (<subquery>) y(NET_SERVICE_NAME)
     USING (NET_SERVICE_NAME) 
```

这里需要注意的事项：

1.  USING 是一种 JOIN 语法，通过两侧的同名列隐式连接，例如第一个转换为
    `ON D.SUPPLIER_CMSID = x.SUPPLIER_CMSID`

2.  PostgreSQL 和 SQL Server 允许您在命名派生表中的列的同时为其命名。`x(SUPPLIER_CMSID)`将派生表别名为 ，`x`同时将其中的单个列别名为`SUPPLIER_CMSID`.

其他部分：

1.  [unnest/string_to_array](http://www.postgresql.org/docs/8.4/static/functions-array.html)是字符串到数组和数组到行的运算符。结合起来，它可以将分隔字符串转换为多行结果集
2.  to_number - 将字符串转换为数字。当与 unnest 一起使用时，它将每行的奇异列从字符串转换为数字。但是，您的代码片段缺少格式（第二个参数）

如果整个代码部分有效（不确定是否`to_number()`在该上下文中），那么 JOIN 将通过接收两个字符串作为过滤器，`p_cmsid`并且`p_servicename`大致相当于

```
FROM DATA D
WHERE SUPPLIER_CMSID = {list in p_cms_id}
  AND NET_SERVICE_NAME = {list in p_servicename} 
```

## 例子

这是一个显示`to_number(text,text)`和`unnest(array)`一起`string_to_array(string, delimiter)`工作的示例：[SQL Fiddle](http://sqlfiddle.com/#!1/d41d8/620/0)

```
select *
  from (select to_number(
               unnest(
               string_to_array('123,433,434',',')),'999')) tbl(col); 
```

# c# - photoChooserTask 导致 SocketException

> ID：13833399
> 
> 赞同：1
> 
> 时间：2012-12-12T05:30:30.150
> 
> 标签：c#, windows-phone-7

我想像这样使用 PhotoChooserTask 返回一张照片：

```
 private void getimage_Click(object sender, EventArgs e)
     {
         photoChooserTask = new PhotoChooserTask();
         photoChooserTask.Completed += new EventHandler<PhotoResult>(photoChooserTask_Completed);

         try
         {
             photoChooserTask.Show();
         }
         catch (System.InvalidOperationException ex)
         {
             MessageBox.Show("An error occurred.");
         }

     }
     void photoChooserTask_Completed(object sender, PhotoResult ee)
     {
         if (ee.TaskResult == TaskResult.OK)
         {

             BitmapImage bmp = new BitmapImage();
             bmp.SetSource(ee.ChosenPhoto);

             if (ee.TaskResult == TaskResult.OK && ee.Error == null)
             {

                     WriteableBitmap wb = new WriteableBitmap(bmp);

                     notes.Add(new chatinfo() { sendimage = bmp });
                     noteListBox.ItemsSource = null;
                     noteListBox.ItemsSource = notes;
             }
           }

       } 
```

但每次程序到达这里：“bmp.SetSource(ee.ChosenPhoto);” 将调用 SocketException。

```
private void OnRecieveFrom()
     {
         var receiveArgs = new SocketAsyncEventArgs();
         receiveArgs.RemoteEndPoint = this.IPEndPoint;
         receiveArgs.SetBuffer(new Byte[MAX_BUFFER_SIZE], 0, MAX_BUFFER_SIZE);
         var strBdr = new StringBuilder();
         receiveArgs.Completed += (__, result) =>
         {

             string message = CreateMessage(result);

                Deployment.Current.Dispatcher.BeginInvoke(() =>
                 {
                     this.RaiseReceived(message);

                 });
                 socket.ReceiveFromAsync(receiveArgs);    

         };

             socket.ReceiveFromAsync(receiveArgs);

     } 
```

SocketException 由“socket.ReceiveFromAsync(receiveArgs);”调用 我只是想从手机中获取照片，没有发送或接收操作。我不知道为什么调用接收函数。

应用跳转到相册时会不会丢失socket通信（socket的“RemoteEndPoint”值变为null）？ps “socket”是“Socket”类的一个对象。如果是这样，我应该在每次应用程序跳出时重新创建“套接字”吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:47:56.600

一旦调用 PhotoChooserTask，您的应用程序将被快速应用程序切换（甚至可能被墓碑化）。

无论哪种方式，您的套接字都将关闭。当您的应用再次激活时，您必须重新打开您的套接字。

# java - 爪哇。如何删除数组上的空白

> ID：13833402
> 
> 赞同：5
> 
> 时间：2012-12-12T05:30:52.997
> 
> 标签：java

例如，我用 + 分割字符串“+name”。我在数组中有一个空格“”和“名称”（如果我的字符串是“名称+”，则不会发生这种情况）。

```
t="+name";
String[] temp=t.split("\\+"); 
```

上面的代码产生

```
temp[0]=" "
temp[1]=name 
```

我只想得到没有空格的“名字”..

此外，如果 t="name+" 则 temp[0]=name。我想知道name+和+name有什么区别。为什么我得到不同的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:34:31.570

只需像下面那样循环遍历数组中的项目并删除空格

```
for (int i = 0; i < temp.length; i++){
    temp[i] = if(!temp[i].trim().equals("") || temp[i]!=null)temp[i].trim();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:27:30.997

第一个数组项的值*不是空格 ( `" "`)，而是空字符串 ( `""`)*。以下片段演示了该行为并提供了一种解决方法：我只是从输入中去除前导分隔符。请注意，这不应该用于处理 csv 文件，因为前导分隔符会创建一个通常需要的空列值。

```
 for (String s : "+name".split("\\+")) {
        System.out.printf("'%s'%n", s);
    }

    System.out.println();

    for (String s : "name+".split("\\+")) {
        System.out.printf("'%s'%n", s);
    }

    System.out.println();

    for (String s : "+name".replaceAll("^\\+", "").split("\\+")) {
        System.out.printf("'%s'%n", s);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:57:41.330

您得到`"+name"`'s case 的额外元素是因为分隔符后的非空值“name”。

该`split()`函数仅“修剪”导致数组末尾空元素的尾随分隔符。请参阅[JavaSE 手册](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)。

输出示例`.split("\\+")`：

```
"+++++"     = { }                // zero length array because all are trailing delimiters
"+name+"    = { "", "name" }     // trailing delimiter removed
"name+++++" = { "name" }         // trailing delimiter removed
"name+"     = { "name" }         // trailing delimiter removed
"++name+"   = { "", "", "name" } // trailing delimiter removed 
```

* * *

我建议防止在两端使用这些额外的分隔符，而不是事后*清理。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T05:34:46.140

删除空白

```
str.replaceAll("\\W",""). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T05:35:45.433

 `````
String yourString = "name +";
yourString = yourString.replaceAll("\\W", "");
yourArray = yourString.split("\\+"); 
````  `* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T07:55:33.310

对于一个班轮：

```
String temp[] = t.replaceAll("(^\\++)?(\\+)?(\\+*)?", "$2").split("\\+"); 
```

这会将所有多个加号替换为一个，或者将开头的加号替换为空字符串，然后拆分为加号。这将基本上消除结果中的空字符串。

`split(String regex)`等效于`split(String regex, int limit)`limit = 0。后者的文档指出：

> 如果 n 为零，则该模式将被应用尽可能多的次数，数组可以有任意长度，并且尾随的空字符串将被丢弃。

这就是为什么`'+'`开头的 a`'+'`与结尾的 a 不同的原因

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T12:34:51.043

你可能想试试番石榴[分离器。](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)它有一个很好的流利的 api 来处理 emptyStrings、trim() 等。

```
@Test
public void test() {
    final String t1 = "+name";
    final String t2 = "name+";

    assertThat(split(t1), hasSize(1));
    assertThat(split(t1).get(0), is("name"));

    assertThat(split(t2), hasSize(1));
    assertThat(split(t2).get(0), is("name"));
}

private List<String> split(final String sequence) {
    final Splitter splitter = Splitter.on("+").omitEmptyStrings().trimResults();
    return Lists.newArrayList(splitter.split(sequence));
} 
`````

# django - 错误的 urlpatterns

> ID：13833404
> 
> 赞同：1
> 
> 时间：2012-12-12T05:31:06.700
> 
> 标签：django

当我尝试加载在 urlpatterns 的不同部分中描述的 url 时，它会加载相同的视图。显然，我使用的 urlpatterns 有错误，但我找不到。

这是第一个 urls.py 文件：

```
urlpatterns = patterns('',
url(r'^admin/', include(admin.site.urls)),
url(r'^$', home),
url(r'^comments/', include('django.contrib.comments.urls')),
(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
    'document_root': settings.MEDIA_ROOT}),
url(r'^episodes/', include('episodes.urls')),
url(r'^news/', news),
url(r'', include('zinnia.urls')),)) 
```

这是 episodes.urls 中的 urlpatterns：

```
urlpatterns = patterns('',
    (r'$', seasons_list),
    (r'(?P<season>\d{1})/$', episodes_by_season),
    (r'(\d{1})/(\d{1})/$', episode),
) 
```

每次我尝试加载像“/episodes/1”或“/episodes/1/2”这样的网址时，django 只使用 seasons_list 视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:35:39.793

这是因为所有 URL 都有一个字符串结尾，因此它们总是匹配第一个模式。为所有这些添加开始锚点，因为包含的 URLconfs[只获取 match 之后的部分](https://docs.djangoproject.com/en/dev/topics/http/urls/#including-other-urlconfs)。

> 每当 Django 遇到`include()`( `django.conf.urls.include()`) 时，它会切断与该点匹配的 URL 的任何部分，并将剩余的字符串发送到包含的 URLconf 以进行进一步处理。

```
urlpatterns = patterns('',
    (r'^$', seasons_list),
    (r'^(?P<season>\d{1})/$', episodes_by_season),
    (r'^(\d{1})/(\d{1})/$', episode),
) 
```

# php - PHP/MySQL：检查数据之前是否输出过，如果是，则输出不同的数据

> ID：13833411
> 
> 赞同：1
> 
> 时间：2012-12-12T05:31:49.023
> 
> 标签：php, mysql, random

我正在研究一些随机输出从数据库中选择的数据的 PHP/MySQL 代码。

例如，我的数据库表包含 Months、Days 和 Events 的值。

我运行这个查询：

```
SELECT event_id, month, day_num, event FROM mytable WHERE month = DATE_FORMAT(CURDATE(), '%M') AND day_num = DAY(CURDATE()); 
```

查询返回几个结果：

event_id：1388 月份：“十二月”日：12 事件：“没有发生重大事件。”

event_id：1389 月份：“十二月”日：12 事件：“这是平淡无奇的一天。”

event_id：1390 月份：“十二月”日：12 事件：“和平与安静”

event_id：1391 月份：“十二月”日：12 事件：“同样旧。”

我想将其中一个结果输出到浏览器中，然后单击一个按钮并输出另一个结果。我想确保每次单击按钮时，浏览器中的输出都与之前不同。

例如，如果当前输出的 event_id 是 1388，我想确保当我单击按钮时，不会加载 event_id 1388。

将不胜感激一些专业的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:37:59.937

如果您按顺序需要它，您可以使用`limit`as

```
SELECT 
event_id, 
`month`, 
day_num, 
event 
FROM mytable 
WHERE month = DATE_FORMAT(CURDATE(), '%M') AND day_num = DAY(CURDATE()) 

limit from,1; 
```

这里 from 是 1 表示点击，2 表示第二次，3 表示第三次，依此类推。

**您将在将接收`from`作为参数的方法中执行此查询。
在您的前端，当页面加载时，将变量初始化为`0`.
根据您的问题，当用户单击按钮时，在按钮上
设置一个 onclick 事件，该事件将使变量增加`1`，
将此变量传递给您查询数据库的方法。
因此，每点击一次，您都会获得一条新记录。**

from, 1 表示我们需要来自行号的单行。

# php - 为什么 Wordpress 会破坏我的泰米尔语标题？

> ID：13833415
> 
> 赞同：0
> 
> 时间：2012-12-12T05:32:33.643
> 
> 标签：php, unicode, character-encoding

我使用 wordpress 3.0.1 写博客。如果我以其他语言（如泰米尔语）发布文章，则帖子的标题将显示为垃圾字符。相同的字符出现在帖子的链接中。

例如，如果我的标题是“அம்மா அம்மா அம்மா அம்மா”，则链接显示为

```
e0%ae%85%e0%ae%ae%e0%af%8d%e0%ae%ae%e0%ae%be-%e0%ae%85%e0%ae%ae%e0%af%8d%e0%ae%ae%e0%ae%be-%e0%ae%85%e0%ae%ae%e0%af%8d%e0%ae%ae%e0%ae%be-%e0%ae%85%e0%ae%ae%e0%af%8d%e0%ae%ae%e0%ae%be/ 
```

发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:44:05.247

试试这个，希望它适用[于 8 种印度语言写作的 WordPress 插件](http://www.monusoft.com/Products/WordPressPlugin.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:37:42.133

# iphone - 将键盘中返回的标签/文本/字体更改为提交按钮？

> ID：13833417
> 
> 赞同：1
> 
> 时间：2012-12-12T05:32:51.647
> 
> 标签：iphone, objective-c, ios, keyboard, uibutton

有人可以建议我如何将键盘中“返回”的标签/文本/字体更改为“提交”吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:47:31.223

**您可以使用returnKeyType**属性将“Return”更改为这些预定义标签之一：

*   返回（默认）*   去*   谷歌*   加入*   下一个*   路线*   搜索*   发送*   雅虎*   完毕*   紧急电话

**但是没有办法改变文本的字体**

我从[https://stackoverflow.com/a/977012/64976](https://stackoverflow.com/a/977012/64976)得到了这个答案，作者[macbirdie](https://stackoverflow.com/users/5049/macbirdie)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T05:37:02.023

如果您在 xib 中使用 textfied 或 textview，您将在 xib 的属性检查器中找到返回键属性，您可以在其中设置“提交”代替“返回”。

# ruby-on-rails-3 - Rails 验证模型方法

> ID：13833420
> 
> 赞同：0
> 
> 时间：2012-12-12T05:33:06.060
> 
> 标签：ruby-on-rails-3

如何在 rails 3.2 中验证全名的唯一性？

```
class User < ActiveRecord::Base
    attr_accessible :first_name, :last_name

    validates :name, :uniqueness => true

    def name
        [first_name, last_name].join(' ')
    end
end 
```

当我运行 rspec 时，测试失败并出现此错误。

```
 1) User has a first name
     Failure/Error: before { @user = FactoryGirl.create(:user) }
     NoMethodError:
       undefined method `text?' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:42:51.047

### 解决方案1：

```
validates :first_name, :uniqueness => { :scope => :last_name, :message => "name is uniq" } 
```

### 解决方案2：

```
class Person < ActiveRecord::Base
  validates_with GoodnessValidator, :fields => [:first_name, :last_name]
end

class GoodnessValidator < ActiveModel::Validator
  def validate(record)
    if options[:fields].any?{|field| record.send(field) == "Evil" }
      record.errors[:base] << "This person is evil"
    end
  end
end 
```

# blackberry - 在后台监听 Key_events

> ID：13833421
> 
> 赞同：0
> 
> 时间：2012-12-12T05:33:09.587
> 
> 标签：blackberry

我希望我的应用程序在后台运行时收听 Key_events。我的应用程序在前台运行时这样做，但在后台运行时无法这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:42:28.233

按钮按下和按键事件受到限制，但限制因操作系统版本而异。使用最新版本，后台进程可以接收音量和呼叫控制事件。正如 Nate 所希望的那样，后台进程不会收到可能泄露受保护信息的按键事件。

# java - 更改接口中返回类型为 Object 的覆盖方法的返回类型 - java

> ID：13833422
> 
> 赞同：1
> 
> 时间：2012-12-12T05:33:18.760
> 
> 标签：java, interface

> **可能重复：**
> [在扩展接口中覆盖返回类型 - 坏主意？](https://stackoverflow.com/questions/864557/overriding-return-type-in-extended-interface-bad-idea)

让我们考虑以下界面，

```
public interface Cat{
    public Object getCat();//returns any type of object
}

public interface DomesticCatInterface{
    public String somethinOnlyRelatedToDomesticCat();
}

public interface WildCatInterface{
    public String somethinOnlyRelatedToWildCat();
}

public class DomesticCat implements Cat, DomesticCatInterface{
    @Override
    public DomesticCat getCat(){
        return this;
    }

    @Override
    public String somethinOnlyRelatedToDomesticCat(){
        return "something";
    }

}

public class WildCat implements Cat, WildCatInterface{
    @Override
    public WildCat getCat(){
        return this;
    }

    @Override
    public String somethinOnlyRelatedToWildCat(){
        return "something";
    }
} 
```

当我需要从课堂上获得参考时，这是一个很好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:01:52.717

正如每个人都写的那样，可以缩小返回类型。

但是对于您的最后一行问题，如果这是获得参考的好方法，答案是否定的。您不会获得对该对象的*新*引用，但对调用对象（坦率地说，您已经有一个实例），它只会指向同一事物。

使用`new`关键字获取新实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T05:38:10.923

与其让 getCat() 返回一个 Object，不如让它返回一个 Cat。这你应该能够返回任何实现 Cat 的类。在 java 5 中，这称为[协变返回类型](http://www.java-tips.org/java-se-tips/java.lang/covariant-return-types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:36:51.963

是的，当您覆盖它时，可以（从 Java 5 开始，我相信）缩小（*而不是*扩大）方法的返回类型。

当它有助于使您的代码更清洁时，我会说去吧。

请注意，仍然不可能缩小（或扩大）方法参数的类型。

您可能也有兴趣[使用自引用泛型](https://stackoverflow.com/questions/7604030/how-can-an-interface-include-a-method-that-references-the-concrete-implementatio?rq=1)来强制实现您的接口。

# c# - c#中如何区分列表中的项目

> ID：13833423
> 
> 赞同：2
> 
> 时间：2012-12-12T05:33:21.180
> 
> 标签：c#, asp.net

我有一个列表项，我将这个列表项多次添加到列表中，但有一个属性差异……即列表项具有 DateOfService 属性……k……然后我将第一项添加到列表中……很好，我正在改变DateOfService 属性并再次添加...但之前添加的项目 DateOfService 也在改变....我该如何克服这个问题...

**示例代码**

```
 if (bills[index].FrequencyId == Convert.ToInt32(Frequency.Daily))
   {
    for (int day = 0; day < remainedDays; day++)
     {

       bills[index].DateOfService = DateTime.Now.Date.AddDays(day).Date;
        remainedBills.Add(bills[index]);
     }
   } 
```

嗨，我也这样做了，但没有用...

```
if (bills[index].FrequencyId == Convert.ToInt32(Frequency.Daily))
                    {
                        AdmissionEntryVo objAdmissionEntryVo = null;
                        for (int day = 0; day < remainedDays; day++)
                        {
                            objAdmissionEntryVo = new AdmissionEntryVo();
                            objAdmissionEntryVo = bills[index];
                            objAdmissionEntryVo.DateOfService = DateTime.Now.Date.AddDays(day).Date;
                            remainedBills.Add(objAdmissionEntryVo);
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:36:32.343

它们都是同一个对象，您不会添加多个对象。解决您所说的问题的唯一方法是在每次添加时创建新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:37:12.047

> 我正在更改 DateOfService 属性并再次添加...但之前添加的项目 DateOfService 也在更改

那是因为您正在向列表添加对象引用，并且列表中的对象指向相同的引用，因此当您更改项目时，您会看到其他项目的效果。您需要创建对象的新实例，然后修改其属性并将其添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:44:41.350

似乎它与“首选项和原始数据类型”有关。由于所有这些对象都是同一个对象，因此您不断将同一个对象添加到您的列表中。我的建议是在继续之前学习和区分“偏好和原始数据类型”。;) 干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:06:08.497

大家好，我已经通过编写扩展方法将所有属性复制到另一个列表项并添加......它工作正常......

**这是扩展方法**

```
public static void CopyPropertiesTo<T>(this T source, T dest)
        {
            var plist = from prop in typeof(T).GetProperties() where prop.CanRead && prop.CanWrite select prop;

            foreach (PropertyInfo prop in plist)
            {
                prop.SetValue(dest, prop.GetValue(source, null), null);
            }
        } 
```

# php - 我的页面显示加载 javascript

> ID：13833425
> 
> 赞同：0
> 
> 时间：2012-12-12T05:33:33.580
> 
> 标签：php, javascript, codeigniter

我在我的 php 文件中添加了一些 javascript 代码，如下所示：

这是动作部分：

```
<script type="text/javascript">
function show_product(){
<?php foreach($products as $p){ ?>
if("<?php echo $p->category ?>" == "Smartphone")
document.write('<?php echo ($p->name); ?>');
<?php } ?>
}
</script> 
```

这是按钮部分：

```
<?php
$js = 'onClick="show_product()"';
echo form_button('change', 'Search', $js); 
?> 
```

但是，该函数是在放置在同一位置的按钮调用之后调用的，并且所有数据首先都可用，单击按钮后我的页面仍然显示加载，尽管它显示了我想要的完美结果。谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:58:52.813

您可以通过将 $products 数组编码为 JSON 并在 javascript 中用作数组来从 php 传递 $products 数组吗？在 for 或 foreach 循环中使用该数组来获取数据..这样你就不需要在里面使用更多的 php 标签了..它会工作的......

使用 json_encode 将其转换为 php 中的 json，然后发送到您拥有 javascript 的查看模板

```
$message = "Hello";

$json = array(   
      'message' => $message,
);
echo $json_encoded = json_encode($json);

it wll output as
{"message":"Hello"}

and in javascript u just try the below,

var output = <?php echo $json_encoded; ?>
alert(output);
alert(output.toSource()); 
```

# google-apps-script - 将电子邮件存档到 google 文档帐户。

> ID：13833428
> 
> 赞同：0
> 
> 时间：2012-12-12T05:33:48.667
> 
> 标签：google-apps-script

我想将一个谷歌应用程序帐户的所有电子邮件存档到另一个谷歌应用程序帐户。user1@example.com 的电子邮件归档到 user2@example.com 文档帐户

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:37:38.497

您可以使用 TrueSwitch 之类的实用程序将消息从一个帐户转移到另一个帐户，而不是使用 Google Apps 脚本。

# jquery - 如何在 Asp.net Mvc asp x 引擎中上传文件而不刷新页面

> ID：13833433
> 
> 赞同：-2
> 
> 时间：2012-12-12T05:34:12.877
> 
> 标签：jquery, asp.net-mvc, file-upload

我想在 jquery 弹出窗口中上传一个 XML 文件而不刷新页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:17:55.517

实际上对客户端来说很容易，一个简单的 ajax 调用就可以完成标题的工作

```
<form enctype="multipart/form-data" method="post" name="fileinfo">
    <input type="file" name="file" required />
</form>

var data = new FormData();
data.append('element',$(this)[0].files[0])
$.ajax(
{ 
    url : 'Your controller action',
    data: data,
    cache: false,
    contentType: false,
    processData: false,
}) 
```

服务器端这是一个动作，你可以收到这个值

```
public ActionResult UploadXml(HttpPostedFileBase dataXml)
{
    dataXml.SaveAs("string with the path");
    return View();
} 
```

IE 不支持这仅适用于 webkit ff 和 IE 从 10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:41:32.253

试试这些：支持您需要的同步/异步上传：

[MVC 的 Kendo UI 文件上传](http://demos.kendoui.com/web/upload/index.html)

[Telerik File Upload for MVC](http://demos.telerik.com/aspnet-mvc/razor/upload) *包含额外的示例，如果您想了解实现*

但是，如果您是 MVC/jQuery 的新手，`Kendo UI`可能会有很大的帮助和乐趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:42:16.873

您可以尝试 Telerik Extension 进行 MVC 上传。它是开源的。查找@http : [//telerikaspnetmvc.codeplex.com/](http://telerikaspnetmvc.codeplex.com/)和演示@http [://demos.telerik.com/aspnet-mvc/razor/upload](http://demos.telerik.com/aspnet-mvc/razor/upload)

# sql - PostgreSQL 查询返回多行而不是一行

> ID：13833434
> 
> 赞同：0
> 
> 时间：2012-12-12T05:34:19.650
> 
> 标签：sql, postgresql, greatest-n-per-group, operator-precedence, rails-postgresql

我有两个表：`user`和`projects`，两者之间存在一对多的关系。
`projects`表具有`status`包含用户项目状态的字段。

`status`可以是以下之一：

```
launched, confirm, staffed, overdue, complete, failed, ended 
```

我想将用户分为两类：

1.  项目处于`launched`阶段的用户
2.  拥有非`launched`状态项目的用户。

我正在使用以下查询：

```
SELECT DISTINCT(u.*), CASE 
    WHEN p.status = 'LAUNCHED' THEN 1
    ELSE 2
    END as user_category
FROM users u
LEFT JOIN projects p ON p.user_id = u.id
WHERE (LOWER(u.username) like '%%%'
    OR LOWER(u.personal_intro) like '%%%'
    OR LOWER(u.location) like '%%%'
    OR u.account_status != 'DELETED'
AND system_role=10 AND u.account_status ='ACTIVE')
ORDER BY set_order, u.page_hits DESC
LIMIT 10
OFFSET 0 
```

我面临以下情况的**重复记录：**

如果用户的项目状态`launched`为`overdue`，`complete`或`failed`，则该用户被记录两次，因为该用户的两个条件`CASE`都满足。

请提出一个查询，其中有任何项目处于`launched`状态的用户将其`user_category`设置为`1`. 同一用户不应重复使用`user_category 2`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:24:39.483

由于多种原因，查询可能没有按照您的想法执行

*   有`DISTINCT`，有。与 没有什么不同。括号只是噪音。`DISTINCT`**`ON`**`(col1, col2)`
    `DISTINCT (u.*)``DISTINCT u.*`

*   `AND``OR`根据[**运算符优先级**](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-PRECEDENCE)绑定之前。我怀疑您想在`OR`“一起”的条件周围使用括号？还是您需要它原来的样子？`WHERE`但是在任何情况下，整个子句都不需要括号。

*   你的表达`LOWER(u.username) LIKE '%%%'`没有任何意义。每个非空字符串都符合条件。可以替换为`u.username IS NOT NULL`。我怀疑你想要一些不同的东西？

*   Postgres在字符串处理中**区分大小写。**您写的`status`是“启动”等，但在查询中使用“启动”。它是哪一个？

*   问题中缺少几个表格限定条件，使读者感到模棱两可。我按照我认为合适的方式填写。

所有东西放在一起，它*可能会*像这样工作：

```
SELECT DISTINCT ON (u.set_order, u.page_hits, u.id)
       u.*
     , CASE WHEN p.status = 'LAUNCHED' THEN 1 ELSE 2 END AS user_category
FROM   users         u
LEFT   JOIN projects p ON p.user_id = u.id
WHERE  LOWER(u.username)       LIKE '%%%' -- ???
    OR LOWER(u.personal_intro) LIKE '%%%'
    OR LOWER(u.location)       LIKE '%%%'

    OR u.account_status != 'DELETED'      -- with original logic
   AND u.system_role = 10
   AND u.account_status = 'ACTIVE'
ORDER  BY u.set_order, u.page_hits DESC, u.id, user_category
LIMIT  10 
```

这个相关问题的详细解释：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

两个[`EXISTS`半连接](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)而不是`DISTINCT ON`and`CASE`可能更快：

```
SELECT u.*
     , CASE WHEN EXISTS (
          SELECT FROM projects p
          WHERE p.user_id = u.id AND p.status = 'LAUNCHED')
       THEN 1 ELSE 2 END AS user_category
FROM   users u
WHERE
    (  LOWER(u.username)       LIKE '%%%' -- ???
    OR LOWER(u.personal_intro) LIKE '%%%'
    OR LOWER(u.location)       LIKE '%%%'
    OR u.account_status != 'DELETED'      -- with alternative logic?
    )
AND    u.system_role = 10  -- assuming it comes from users ???
AND    u.account_status = 'ACTIVE'
AND    EXISTS (SELECT 1 FROM projects p WHERE p.user_id = u.id)
ORDER  BY u.set_order, u.page_hits DESC
LIMIT  10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:24:07.600

您可以`MIN()`在`CASE`结果上使用，似乎放弃 DISTINCT 将是一个明智的选择：

```
SELECT u.*, MIN(CASE 
WHEN p.status = 'LAUNCHED' THEN 1
ELSE 2
END) as user_category
...
GROUP BY <list all columns in the users table>
... 
```

由于 "launched" 给出了 1，使用 MIN() 不仅会强制一个结果，而且还会优先于“launched”而不是其他状态。

# python - BeautifulSoup 快速参考指南

> ID：13833435
> 
> 赞同：3
> 
> 时间：2012-12-12T05:34:22.677
> 
> 标签：python, beautifulsoup

我喜欢 BeautifulSoup，但我很少使用它，以至于我总是忘记命令/语法。该[教程](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)很棒，但我真的很想找到一个单页的、可打印的快速参考指南或备忘单（就像[这里](http://devcheatsheet.com/)和[这里](http://www.cheat-sheets.org/)的那些）。你们中有人找到或制作过吗？

更新：我已经开始尝试自己创建一个，但我无法想象我是第一个制作一个的人，而且我不想复制轮子。另外，我不是专家，所以我很想获得更可靠的来源。

# oop - 用于只读实体的 Scala 数据模型

> ID：13833437
> 
> 赞同：1
> 
> 时间：2012-12-12T05:34:27.963
> 
> 标签：oop, scala

我正在对将保留在数据库中的实体进行建模。以用户实体为例，我想以这种方式使用它们：

```
val userBeforePersisting = new User("Joe", "joe@gmail.com")

// DB access code (where rs is a ResultSet)
val foundUser = new User(rs.getLong("id"), rs.getString("name"), rs.getString("email")) 
```

我想使用相同的用户代码（即最小化代码重复），同时拥有两种类型的用户：

1.  预持久化用户没有 ID
2.  从数据库中检索到的持久用户有一个 ID

我想在编译时尽可能严格地执行这一点。

我希望能够对所有用户一视同仁，除非我尝试从非持久用户那里获取 ID，否则将引发错误或无法编译。

我想避免像这样制作单独的课程

```
class NewUser(val name: String, val email: String)
class PersistedUser(val id: Long, val name: String, val email: String) 
```

由于代码重复（姓名和电子邮件字段），我不喜欢这个解决方案。

这是我的想法：

```
class User(val id: Long, val name: String, val email: String) {
  this(name: String, email: String) = this(0l, name, email)
  this(id: Long, name: String, email: String) = this(id, name, email)
} 
```

但是后来我的非持久用户有一个`id`.`0l`

这是另一种方法：

```
trait User {
  val name: String
  val email: String
}

class NewUser(val name: String, val email: String) extends User

class PersistedUser(val id: Long, val name: String, val email: String) extends User 
```

这给了我想要的编译时检查。我不确定这是否有任何缺点。

也许我可以尝试这样的事情：

```
class User(val name: String, val email: String)
trait Persisted { val id: Long }
class PersistedUser(val id: Long, val name: String, val email: String)
  extends User(name, email)
  with Persisted 
```

对这些方法有什么想法吗？我从来没有这样做过，所以我不确定我是否理解所有后果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:45:03.760

听起来像是一个可能的用途`Option`。

```
class User(val id: Option[Long], val name: String, val email: String) 
```

所以持久化用户有一个`id`，`Some(id)`而非持久化用户有`None`。

为方便起见，您可以授予`id`默认值`None`：

```
class User(val id: Option[Long] = None, val name: String, val email: String)

// When you have an id...
val foundUser = new User(Some(rs.getLong("id")), 
    name = rs.getString("name"), email = rs.getString("email"))

// When you don't
val userBeforePersisting = new User(name = "Joe", email = "joe@gmail.com")

// However this will throw a runtime error:
val idThatDoesntExist: Long = userBeforePersisting.id.get 
```

这也应该适用于您的多构造函数示例：

```
class User(val id: Option[Long], val name: String, val email: String) {
  def this(name: String, email: String) = this(None, name, email)
  def this(id: Long, name: String, email: String) = this(Some(id), name, email)
} 
```

我认为`Option`可能是有道理的，因为您想*在同一个类*中表达某个字段可以有值或没有值。唯一的另一种方法似乎是有*两个*类（可能一个从另一个继承），只有一个有一个`id`字段。

# t4 - 从单个 .tt 文件运行多个文件并将生成的文件添加到单个 .tt 文件下

> ID：13833441
> 
> 赞同：1
> 
> 时间：2012-12-12T05:34:51.913
> 
> 标签：t4

我有一个场景，我需要从一个 .tt 文件运行给定目录下的所有模板文件，并在运行的这个 .tt 文件下添加生成的文件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-18T16:08:31.650

从一个 .tt 文件生成多个输出文件并非易事。我猜想实现这个功能会非常耗时。这是一篇关于如何使用有形 T4 编辑器创建多个输出文件的博客文章，即使在不同的解决方案项目中也是如此：

[T4：如何从单个 T4 模板生成多个输出文件](http://t4-editor.tangible-engineering.com/blog/how-to-generate-multiple-output-files-from-a-single-t4-template.html "创建多个输出文件")

# monkeyrunner - 在monkeyrunne中从键盘输入“向上”和“向下”键

> ID：13833443
> 
> 赞同：2
> 
> 时间：2012-12-12T05:35:03.910
> 
> 标签：monkeyrunner

我目前正在使用 Monkeyrunner 和 python 脚本在 Android 平台上测试应用程序。我想知道是否有任何方法可以使用命令 从键盘输入`up`&键。`down``device.press`

我查看了中给出的关键事件的完整列表

[http://developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html)

但找不到`up-down`按键的选项。有什么建议么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:11:27.777

您可以使用 KEYCODE_DPAD_UP 和 KEYCODE_DPAD_DOWN。这与按键盘上的向上和向下箭头键相同。我在一些测试中使用了它们。

# oracle - 从一个非常大的表中检索一个大数据集

> ID：13833445
> 
> 赞同：1
> 
> 时间：2012-12-12T05:35:09.493
> 
> 标签：oracle, plsql, oracle10g

我在 oracle 中有一个非常大的表，其中包含 140+ 百万行。目前，我们每晚对该表进行三次全表扫描，并使用一些结果来填充一个 tmp 表。然后将该 tmp 表变成一个非常大的报告（通常 140K + 行）。

大表称为tasklog，具有以下结构：tasklog_id (number) - PK document_id (number) date_time_in (date) + 一些不相关的行

有数百万个不同的文档 ID，每个 ID 都重复了 1 到几百次，date_time_in 是这个条目被放入数据库的时间。

所有的全表扫描看起来像这样

```
DECLARE
n_prevdocid     number;

cursor tasks is
   select * 
   from tasklog
   order by document_id, date_time_in DESC;

BEGIN

for tk in tasks
loop
    if n_prevdocid <> tk.document_id then
         -- *code snipped*

    end if;
    n_prevdocid = tk.document_id;
end loop;

END;
/ 
```

所以我的问题是：是否有一种快速（ish）的方法来获取具有最新 date_time_in 的行的不同 document_id 列表。这可以大大加快整个过程。或者有人能想出更好的方法来每天检索这些数据吗？

可能相关的事情，这个表只插入了当前日期时间的行。它不是范围分区的，但我看不出这对我有什么帮助。不会更新或删除任何行。每天插入大约 70k - 80k 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:25:56.857

我不认为你会避免至少进行一次全表扫描，因为唯一有效的方法是不同 document_id 与总记录的比率非常小。由于数据的生成和插入方式，document_id 上的聚类将非常差。

怎么样：

```
create table tmp nologging compress -- or pctfree 0
as
select ...
from   (
  select t.*,
         max(date_time_in) over (partition by document_id) max_date_time_in
  from   tasklog t)
where   date_time_in = max_date_time_in 
```

可能，在创建一次后，您可以通过仅将较新的记录合并到该集合中来优化进一步的刷新。就像是 ...

```
merge into tmp
using (
  select ...
  from   (
    select t.*,
           max(date_time_in) over (partition by document_id) max_date_time_in
    from   tasklog t
    where  date_time_in > (select max(date_time_in) from tmp))
  where   date_time_in = max_date_time_in)
on ... blah blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:39:22.203

你有没有尝试过：

```
select document_id
from tasklog t1
where date_time_in = (select max(date_time_in)
                      from tasklog t2
                      where t1.document_id=t2.document_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:08:39.370

你可以这样做：

`select document_id , date_time from tasklog group by date_time,document_id order by date_time desc;`

通过这个，您可以检索`distinct document_id`最新的`date_time`列。

# java - 对于使用 2-textniews 和按钮获取网站文本内容的 android 失败

> ID：13833446
> 
> 赞同：1
> 
> 时间：2012-12-12T05:35:10.070
> 
> 标签：java, android, network-programming

我使用 2-textview 和一个按钮编写程序来获取您在第一个文本视图中编写的特定网站的文本内容，并将文本内容放在第二个文本视图中，，，

但它不起作用，故障可能出在这部分代码中 - 我检查了每一件事，它单独运行良好 -

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     final EditText Enter  = (EditText) findViewById(R.id.Enter);

       CharSequence web = Enter.getText();
    // CharSequence web = "http://www.google.com" ;
       final  String link = web.toString()  ;

            Button Press = (Button)findViewById(R.id.Press);
     Press.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v ) {

            Toast.makeText(MainActivity.this, link ,Toast.LENGTH_LONG ).show(); 

          new DownloadTextTask().execute(
                link);

        }
                });
} 
```

# javascript - 在元素列表中，将编号索引放入 id 中还是使用索引选择器？

> ID：13833447
> 
> 赞同：3
> 
> 时间：2012-12-12T05:35:31.447
> 
> 标签：javascript, jquery, html, jquery-selectors, css-selectors

在创建元素的有序列表时，我可以想到三种通过索引访问元素的合理方法：

给它一个唯一的 id，最后有一个数字并使用字符串操作：

```
<ol>
 <li id="item-0"></li>
 <li id="item-1"></li>
 <li id="item-2"></li>
</ol>

...

for(var i = 0; i < 3; i++) {
   $('#item-' + i).doWhatever();
} 
```

给他们相同的类并使用`eq`选择器：

```
<ol>
 <li class="item"></li>
 <li class="item"></li>
 <li class="item"></li>
</ol>

...

for(var i = 0; i < 3; i++) {
   $('.item').eq(i).doWhatever();
} 
```

或者给他们相同的类并使用`nth-child`选择器：

```
<ol>
 <li class="item"></li>
 <li class="item"></li>
 <li class="item"></li>
</ol>

...

for(var i = 1; i <= 3; i++) {
   $('.item:nth-child(' + i + ')').doWhatever();
} 
```

各自的优点和缺点是什么？还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T05:35:31.447

我想到了一些差异：

*   **速度：（**至少在 Chrome 上）第一个速度大约是其他速度的两倍，根据这些测试用例：http: [//jsperf.com/item1-vs-item-eq-1](http://jsperf.com/item1-vs-item-eq-1)
*   **字符串操作：**第二个是唯一不需要的
*   **从 0 或 1 开始索引：**第三个是从 1 而不是 0 索引，这可能会导致问题，具体取决于您如何构建/访问 HTML
*   **样式：**如果你想对所有元素进行类似的样式设置，第二个和第三个不需要任何额外的类
*   **可移植性：**如果您必须更改框架，第一个和第三个可能更便携，因为它们使用标准 CSS 选择器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:49:23.007

我在您的性能测试中添加了第四个测试用例：http: [//jsperf.com/item1-vs-item-eq-1/2](http://jsperf.com/item1-vs-item-eq-1/2)

按顺序考虑您的观点：

*   **速度**这很容易成为所介绍的方法中最快的方法
*   **字符串操作**无
*   **索引**从 0 开始
*   **样式**您可以根据父项设置样式，或者您可以选择将其他类添加到列表项本身
*   **可移植性**这本可以很容易地`getElementById`实现`childNodes`

我认为要考虑的主要事情是，您的所有方法都涉及在迭代列表时重复查询 DOM。如果您只访问一个元素，那没什么大不了的，但是如果您要处理整个列表，那么只进行一次查询将在性能方面产生很大的不同。

**编辑**出于好奇，我[再次更新了我的案例，](http://jsperf.com/item1-vs-item-eq-1/4)根本不使用 jQuery 来定位列表，而是使用上面提到的准系统 DOM API。
即使 Sandor 在指出我的愚蠢错误后做出了更改，也会对性能产生明显影响。考虑到这一点，我想说这主要取决于您的特定用例以及您在定位列表项时如何权衡速度与多功能性。

# c - 具有不同内部循环的嵌套循环的复杂性

> ID：13833448
> 
> 赞同：1
> 
> 时间：2012-12-12T05:35:31.753
> 
> 标签：c, algorithm, complexity-theory, big-o

非常相似的复杂性示例。我试图了解这些问题是如何变化的。明天就要考试了：（在这里找到复杂性的任何捷径。

情况1：

```
void doit(int N) { 
   while (N) {
      for (int j = 0; j < N; j += 1) {}
   N = N / 2;   
   }
} 
```

案例二：

```
void doit(int N) { 
   while (N) {
      for (int j = 0; j < N; j *= 4) {}
   N = N / 2;   
   }
} 
```

案例 3：

```
void doit(int N) { 
   while (N) {
      for (int j = 0; j < N; j *= 2) {}
   N = N / 2;   
   }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:08:55.800

```
void doit(int N) { 
   while (N) {
     for (int j = 0; j < N; j += 1) {}
   N = N / 2;   
   }
} 
```

要找到它的 O()，请注意我们每次迭代都将 N 除以 2。因此，（不是侮辱您的智力，而是为了完整性）循环中的最终非零迭代我们将有 N = 1。在此之前的时间我们将有 N=a(2)，然后在此之前 N=a(4)... 其中 0< a < N（请注意，这些是非包含范围）。所以，这个循环总共会执行 log(N) 次，这意味着我们看到的第一次迭代 N=a2^(floor(log(N)))。

我们为什么要关心这个？嗯，这是一个几何级数，有一个很好的封闭形式：

```
Sum = \sum_{k=0}^{\log(N)} a2^k = a*\frac{1-2^{\log N +1}}{1-2} = 2aN-a = O(N). 
```

如果有人能弄清楚如何让乳胶符号为我正确显示，我将不胜感激。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T06:41:37.653

正如@NickO 给出的那样，您已经有了**数字 1** -的答案`O(n)`，这是另一种解释。

用 T(N) 表示内循环的外循环次数，并设外循环数为`h`。注意`h = log_2(N)`

```
T(N) = N + N/2 + ... + N / (2^i) + ... + 2 + 1
     < 2N (sum of geometric series)
     in O(N) 
```

**3号：**是`O((logN)^2)`

用 T(N) 表示内循环的外循环次数，并设外循环数为`h`。注意`h = log_2(N)`

```
T(N) = log(N) + log(N/2) + log(N/4) + ... + log(1)   (because log(a*b) = log(a) + log(b)
     = log(N * (N/2) * (N/4) * ... * 1)
     = log(N^h * (1 * 1/2 * 1/4 * .... * 1/N))
     = log(N^h) + log(1 * 1/2 * 1/4 * .... * 1/N)    (because log(a*b) = log(a) + log(b))
     < log(N^h) + log(1)
     = log(N^h)                                      (log(1) = 0)
     = h * log(N)                                    (log(a^b) = b*log(a))
     = (log(N))^2                                    (because h=log_2(N)) 
```

**2**号与 3 号几乎相同。

* * *

（在 2,3 中：假设`j`从 1 开始，而不是从 0 开始，如果不是这种情况，@WhozCraig 给出了它永不中断的原因）

# android - 如何使用 facebook graph api 在我所有的朋友墙上发帖？

> ID：13833450
> 
> 赞同：-3
> 
> 时间：2012-12-12T05:35:33.100
> 
> 标签：android, facebook-graph-api

在我的应用程序中，我需要发布到我所有的朋友墙上。我使用以下代码来执行此操作：

```
 final int postCount = friends_facebookids.size();

            new Timer().schedule(new TimerTask() {

            @Override
            public void run() {
                if(postCount==0){
                    Toast.makeText(getApplicationContext(), "Add friends to post", Toast.LENGTH_SHORT).show();
                }
                for(int m=0;m<friends_facebookids.size();m++){
                String res=  UrltoValue.getValuefromUrl("https://graph.facebook.com/"+friends_facebookids.get(m)+"/feed?access_token="+accesstoken+"&method="+"post"+"&message="+strFullMessage.replaceAll(" ", "%20")+"&source="+imageUrl);
                Log.e("post response",res);
                   counter +=1;

                }

                if(counter>=postCount){

                    cancel();//stops the timer
                    counter=0;
                }

            }
        }, 1000,3000); 
```

在这里，我在每个请求之间设置了 3 秒的延迟，这样我就可以在不受 Facebook 限制的情况下向多个朋友墙发帖。

它对我最多 25 个朋友有用，之后我得到了（错误的请求作为响应）。我需要更改代码中的任何内容吗？为什么在 Facebook 上发布 25 篇帖子后会有学徒限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:51:04.923

这是高度垃圾邮件的原因有两个，其中包括：

**1）**您在每个人的墙上发布相同的消息，而不管它实际上与谁相关。= 垃圾邮件

**2）**您将其作为“要求”。在开发人员 TOS 中严格禁止。

忠告：现在停止。如果您的应用程序尚未关闭，我希望它很快就会发生。

# android - 如何在 Playstore 帐户中注册唯一的应用名称？

> ID：13833453
> 
> 赞同：-1
> 
> 时间：2012-12-12T05:35:42.490
> 
> 标签：android, google-play

我正在尝试在 playstore 中注册唯一的 android 应用程序名称。我将在 2 个月后放置 apk，所以可以在 playstore 中使用唯一名称吗？所以另一个不能使用该特定名称。请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T05:41:10.440

这不可能。在`Android`市场上的唯一性是基于您的应用程序在发布时的包名称，而`Google Play`不是基于应用程序名称。您的应用程序包名称必须是唯一的。

# java - 我应该在 Struts2 视图层中检索数据库记录吗？

> ID：13833456
> 
> 赞同：3
> 
> 时间：2012-12-12T05:36:02.273
> 
> 标签：java, jsp, model-view-controller, struts2, struts-action

我有一个编辑页面，我想在其中从数据库中检索**科目**和**级别**，并显示为用户编辑**课程**的选择选项。

当表单提交时，它会发出一个新的请求，用户输入被**courseBean**捕获并进行 XML 验证。当 XML 验证失败时，它会将刚刚捕获用户输入的**courseBean转发到****edit.jsp**。

![在此处输入图像描述](../Images/9c7f0fe6631b3306ce6020c652c004de.png)

所以每次我去**edit.jsp**时，我都会检索数据库记录。我应该那样做吗？

此外，我尝试检索**主题 lit**和**level lit**并将它们作为请求属性存储在第一次显示**edit.jsp**的操作类中。但是当从用户输入发出新请求时，从数据库中检索到的**主题列表**和**级别列表**将不再可用。

代码（edit.jsp）：

```
<%
    Session session2 = HibernateUtil.getSessionFactory().getCurrentSession();
    Transaction tx = session2.beginTransaction();
    Query q = session2.createQuery("from Subject");
    List subjectList = q.list();
    List levelList = session2.createQuery("from Level").list();
%>

<div class="control-group">
    <label class="control-label" for="inputPassword">Subject</label>
    <div class="controls">
        <select name="subject_id">
            <%
                for (Object subjectObject : subjectList) {
                    Subject subject = (Subject) subjectObject;
            %>
            <option value="<%=subject.getId()%>"><%=subject.getName()%></option>
            <%  } //end for %>
        </select>
    </div>
</div>

<div class="control-group">
    <label class="control-label" for="inputPassword">Level</label>
    <div class="controls">
        <select name="level_id">
            <%
                for (Object levelObject : levelList) {
                    Level level = (Level) levelObject;
            %>
            <option value="<%=level.getId()%>"><%=level.getName()%></option>
            <%  } //end for %>
        </select>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T10:40:42.000

使用 Struts2，您将不再需要使用`Scriptlet`s ( `<% stuff %>`)。它们很旧，很糟糕，它们是在视图页面中注入的业务逻辑，不要使用它们。您也不需要 JSTL，只需使用 Struts2 标签即可获得任何结果。

为了更好地解耦和分离代码和概念，您应该：

1.  `DAO Layer`：它只做简单的查询；
2.  `BUSINESS Layer`：它通过 (s) 暴露 DAO 层结果`Service`，聚合多个 DAO 调用并在需要时执行多个业务操作；
3.  `PRESENTATION Layer`：动作，在 Struts2 中充当模型；这里你从业务层调用Service，来检索JSP需要的对象；
4.  `JSP (VIEW Layer)`：JSP 包含纯 HTML，并通过操作的访问器（Getter）访问所需的数据，并最终从值堆栈（、、等）中访问任何其他所需的`#session`元素`#request`。

    在您的示例中，所有这些

> ```
> <% 
>    Session session2 = HibernateUtil.getSessionFactory().getCurrentSession();
>    Transaction tx = session2.beginTransaction();
>    Query q = session2.createQuery("from Subject");
>    List subjectList = q.list();
>    List levelList = session2.createQuery("from Level").list(); 
> %> 
> ```

应该在 DAO/Business Layers 中，由 和 等两个函数`getSubjectList();`公开`getLevelList();`。然后在你的 Action 你应该有类似的东西：

```
public class YourAction {

    private List<Object> levelList; // private
    private List<Object> subjectList; // private

    public String execute() throws Exception {      
        // Call the service, load data
        levelList = getMyService().getLevelList();
        subjectList = getMyService().getSubjectList();

        // Forwarding to the JSP
        return SUCCESS;
    }

    public List<Object> getLevelList() {
        return levelList;
    }
    public List<Object> getSubjectList() {
        return subjectList;
    }

} 
```

在您的 JSP 中，而不是：

> ```
> <select name="subject_id">
> <%
>   for (Object subjectObject : subjectList) {
>       subject subject = (Subject) subjectObject;
> %>
>       <option value="<%=subject.getId()%>"><%=subject.getName()%></option>
> <%
>   } //end for
> %>
> </select> 
> ```

您可以像访问列表一样（丑陋的混合 HTML/Struts2 方式）：

```
<select name="subject_id">
    <s:iterator value="subjectList">
        <option value="<s:property value="id"/>">
            <s:property value="name"/>
        </option>   
    </s:iterator>
</select> 
```

或者，对于 Select，使用正确的 Struts2 UI Select Tag：

```
<s:select name = "subject_id" 
          list = "subjectList" 
       listKey = "id" 
     listValue = "name" /> 
```

如果一开始分离所有层太难，把Actions中的前三个层次展平，只是为了了解如何分离Java（Action）和Struts2 UI Tags（JSP）。理解后，您可以将 DAO 逻辑移至业务层，最好移至 EJB。实现这一点后，以更细的粒度再次拆分...

动作将是这样的：

```
public class YourAction {

    private List<Object> levelList; // private
    private List<Object> subjectList; // private

    public String execute() throws Exception {      
            Session session2 = HibernateUtil.getSessionFactory().getCurrentSession();
            Transaction tx = session2.beginTransaction();
            Query q = session2.createQuery("from Subject");
            subjectList = q.list();
            levelList = session2.createQuery("from Level").list();

        // Forwarding to the JSP
            return SUCCESS;
    }

    public List<Object> getLevelList() {
        return levelList;
    }
    public List<Object> getSubjectList() {
        return subjectList;
    }    
} 
```

关于您关于多次加载列表的问题，如果列表是固定的（例如，它每月更改一个），您可以使用缓存（如果使用计时器更好），或者每次都加载它，这样做没有问题那。请注意，如果验证失败，ValidationInterceptor 会将请求转发到 INPUT 类型结果中映射的 JSP，而不会到达 execute() 方法，因此您应该从 Action 实现 Preparable 接口并将加载的东西放入`prepare()`方法中，每次执行通过 PrepareInterceptor

```
public class YourAction implements Preparable {

    private List<Object> levelList; // private
    private List<Object> subjectList; // private

    public void prepare() throws Exception {
        // Call the service, load data, 
        // every time even if validation fails
        levelList = getMyService().getLevelList();
        subjectList = getMyService().getSubjectList();
    }

    public String execute() throws Exception {      

        // Forwarding to the JSP
        return SUCCESS;
    }

    public List<Object> getLevelList() {
        return levelList;
    }
    public List<Object> getSubjectList() {
        return subjectList;
    }
} 
```

循序渐进，框架简单而强大，网络上有大量示例，StackOverflow 提供了一些很好的支持...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T05:44:06.760

你需要的是一个缓存。但是，如果数据库记录必然会频繁更改，则不可取。

但是，如果有问题的查询很小（我认为是），那么查询数据库应该不是一个大的性能问题。

另一方面，查看您的 JSP，我看到的只是 JSP 脚本已被弃用和滥用。

由于您添加了标签 struts 2，我将假设这是一个 struts 2 Web 项目。考虑（强烈）使用内置的 struts ui 标签来完成在您的 scriplets 中完成的工作。

你的方法只能被描述为当你有一个核反应堆可供你使用时，使用一堆发电机为一个城市供电。

我建议你从这里开始：[http ://struts.apache.org/2.x/docs/home.html](http://struts.apache.org/2.x/docs/home.html)

这将使您对框架及其全部功能有一个正确的认识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T05:45:39.790

一个建议是，如果你想坚持 MVC 架构，那么永远不要在视图中看到业务逻辑。根据 MVC 架构，使用 View 的 UI 工程师根本不需要了解业务逻辑。

在您的 JSP 页面中混合 HTML 和 Java 代码会使视图复杂化，并会导致维护代码出现问题。

利用[本](http://www.dzone.com/tutorials/java/struts-2/struts-2-example/struts-2-crud-example-1.html)教程了解如何在 Struts 2 中实现 CRUD 操作。

# javascript - 如何在javascript中生成较浅颜色的随机十六进制代码？

> ID：13833463
> 
> 赞同：4
> 
> 时间：2012-12-12T05:36:43.770
> 
> 标签：javascript, hex

我使用随机颜色作为背景，但由于文本是黑色的，所以当生成真正的深色时，无法看到文本。生成十六进制代码时如何排除这些深色？

我只能弄清楚如何得到这个：

`Math.floor(Math.random()*16777215).toString(16)`

但这并不排除深色。有人可以帮我吗？

先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T05:54:32.963

值越高，颜色越浅，您可以尝试将随机值添加到高数（`200`在这种情况下）：

```
var randValue = Math.floor(Math.random()*56)+200; //200 to 255 
```

**注意：**最大 HEX 值`FF`等于十进制`255`

然后，您可以选择使用 将这些 RBG 值转换为 HEX `.toString(16)`，但据我所知，您可以使用 RBG 值设置颜色。

这是一个**[jsFiddle 演示](http://jsfiddle.net/tWyq6/4/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T05:41:26.663

我要做的是为每个（RGB）（即`000000`到`FFFFFF`）生成一个从 00 到 FF 的数字。我还要确保 G 值大约高于 33。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-31T17:36:39.310

random RGB without the numbers 1 & 2, so you get nice colors, done with less code:

```
var randomColor = (function lol(m, s, c) {
                    return s[m.floor(m.random() * s.length)] +
                        (c && lol(m, s, c - 1));
                })(Math, '3456789ABCDEF', 4); 
```

[JSFiddle](http://jsfiddle.net/tWyq6/27/) Demo

# java - 编写代码以匹配单元测试要求

> ID：13833470
> 
> 赞同：0
> 
> 时间：2012-12-12T05:37:36.970
> 
> 标签：java, junit, junit4

我的老师为我们提供了该课程的 JUnit 测试用例`OrderManager`，我完成了我的`OrderManager`课程，但我的代码未能通过她提供的 4 次测试中的 3 次。我将粘贴我课堂上的代码、提供的 JUnit 测试以及 JUnit 测试显示的错误。

这是我的订单管理器类：

```
import java.text.DecimalFormat;
import java.util.ArrayList;

public class OrderManager implements OrderManagerInterface
{

    private double order;
    private int numberOfOrders;
    DecimalFormat format = new DecimalFormat("##.00");

    Sorting sortingClass = new Sorting();
    //create an array list of type employee
    ArrayList<Comparable> orderList = new ArrayList<Comparable>();

    /**
     * Initialize the numWorkers, numManager, numHourlyWorker, numThrowers to 0.
     * @param 
     */
    public OrderManager()
    {

    }
     public double addOrder(String toLn, String toFn, String toStr, String toC, String toSt, int toZ,
              String fromLn, String fromFn, String fromStr, String fromC, String fromSt, int fromZ,
              boolean beforeN, String d, int ship, int bSize, String msg)
      {
        Order newOrder =  new Order(toLn,  toFn,  toStr,  toC,  toSt,  toZ,  fromLn,  fromFn,  fromStr,  fromC,  fromSt, fromZ,
               beforeN,  d,  ship, bSize,  msg);

        orderList.add(newOrder);

return order;

     }

    @Override
    public String printMessageCards() {
        String message = "";
        for (Comparable element:orderList)
        {
            message += ((Order) element).getMsg()+"\n"+"\n"; 
        }
        return message;
    }
    @Override
    public String deliverySchedule() {
        // TODO Auto-generated method stub
        System.out.println(orderList.toString());
        orderList = sortingClass.selectionSort(orderList);
        System.out.println(orderList.toString());

        String message = "Delivery Schedule"+"\n"+"\n";

        for (Comparable element:orderList)
        {
            String deliveryTime = "";
            if(((Order) element).getBeforeN()==true)
            {
                deliveryTime = "(a before noon delivery, preceeded by *)";
            }
            else if (((Order) element).getBeforeN()==false)
            {
                deliveryTime = "(an after noon delivery)";
            }
            message += ((Order) element).getDelivery()+"\n"+((Order) element).getToSt()+", "+((Order) element).getToC()+" - "+((Order) element).getToLn()+", "+((Order) element).getToFn()+" "+deliveryTime+"\n"; 
        }

        return message;
    }
    /**
     * getNumOrders which is responsible for the size of the list
     * @return numberOfOrders 
     */
    @Override
    public int getNumOrders() {
        // TODO Auto-generated method stub
        numberOfOrders = orderList.size();   
        return numberOfOrders;

    }
    /**
     * Method toString
     * @return the String representation
     */
    public String toString()
    {

        return orderList.toString();
    }
} 
```

这是我们老师提供的JUnit测试

```
import static org.junit.Assert.*;

import java.util.Scanner;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class OrderManagerTest {
    OrderManager orders1, order2;

    @Before
    public void setUp() throws Exception {
        orders1 = new OrderManager();
        orders1.addOrder("Brown", "Angela", "55321 Sycamore St.", "Gaithersburg", 
                "MD", 20879, "Smith", "Agnus", "344 Oak St.", "Pocatello", 
                "ID", 83205, true, "May 9", 1, 2, "Happy Mother's Day");
        orders1.addOrder("Miller", "Karen", "3399 Campus St.", "Rockville", 
                "MD", 20850, "Jones", "Peggy", "5633 Meadow Way", "Bloomington", 
                "IN", 47404, false, "May 8", 1, 1, "Love ya");
        orders1.addOrder("Hanson", "Beverly", "3356 Cypress Ln.", "North Potomac", 
                "MD", 20878, "Hanson", "Ken", "2985 Pointer Dr.", "Fountain Valley", 
                "CA", 83205, false, "May 11", 2, 3, "You're the greatest");
        orders1.addOrder("White", "Carolyn", "4488 Pinewood Ave.", "Olney", 
                "MD", 20859, "Green", "George", "492 Apple Way", "St. Louis", 
                "MO", 35587, false, "May 9", 1, 2, "All the Best!");
    }

    @After
    public void tearDown() throws Exception {
        orders1 = null;
    }

    @Test
    public void testPrintMessageCards() {
        String result = orders1.printMessageCards();
        Scanner scan = new Scanner(result);
        assertEquals("Dear Mom", scan.nextLine());
        assertEquals("Love ya", scan.nextLine());
        assertEquals("Love Peggy", scan.nextLine());
        scan.nextLine(); // blank line
        scan.nextLine(); // blank line
        assertEquals("Dear Mom", scan.nextLine());
        assertEquals("Happy Mother's Day", scan.nextLine());
        assertEquals("Love Agnus", scan.nextLine());
        scan.nextLine(); // blank line
        scan.nextLine(); // blank line
        assertEquals("Dear Mom", scan.nextLine());
        assertEquals("All the Best!", scan.nextLine());
        assertEquals("Love George", scan.nextLine());
    }

    @Test
    public void testAddOrder() {
        assertEquals(4,orders1.getNumOrders());
        orders1.addOrder("Myers", "Stephanie", "8355 Grove Ave.", "Darnestown", 
                "MD", 20874, "Simco", "Rebecca", "34 Charleston St.", "Orlando",
                "FL", 11334, true, "May 8", 1, 1, "I miss you");
        assertEquals(5,orders1.getNumOrders());

    }

    @Test
    public void testDeliverySchedule() {
        String result = orders1.deliverySchedule();
        Scanner scan = new Scanner(result);
        assertEquals("Delivery Schedule", scan.nextLine());
        scan.nextLine(); // blank line
        scan.nextLine(); // blank line
        assertEquals("May 8", scan.nextLine());
        assertEquals("3399", scan.next());
        scan.nextLine(); // get rest of line
        scan.nextLine(); // blank line
        scan.nextLine(); // blank line
        assertEquals("May 9", scan.nextLine());
        assertEquals("*55321", scan.next());
        scan.nextLine(); // get rest of line
        assertEquals("4488", scan.next());

    }

    @Test
    public void testSortClass() {
        String result = orders1.printMessageCards();
        Scanner scan = new Scanner(result);
        assertEquals("Dear Mom", scan.nextLine());
        assertEquals("Love ya", scan.nextLine());
        assertEquals("Love Peggy", scan.nextLine());

        // add a May 8 before noon order which should be
        // sorted to be first before Peggy

        orders1.addOrder("Myers", "Stephanie", "8355 Grove Ave.", "Darnestown", 
                "MD", 20874, "Simco", "Rebecca", "34 Charleston St.", "Orlando",
                "FL", 11334, true, "May 8", 1, 1, "I miss you");

        result = orders1.printMessageCards();
        scan = new Scanner(result);
        assertEquals("Dear Mom", scan.nextLine());
        assertEquals("I miss you", scan.nextLine());
        assertEquals("Love Rebecca", scan.nextLine());
        scan.nextLine(); // blank line
        scan.nextLine(); // blank line
        assertEquals("Dear Mom", scan.nextLine());
        assertEquals("Love ya", scan.nextLine());
        assertEquals("Love Peggy", scan.nextLine());
    }

} 
```

*   测试`testPrintMessageCards`失败：

    `expected: <[Dear Mom]> but was:<Happy Mother's Day]>`

*   测试`testDeliverySchedule`失败

    `expected: <M[ay 8]> but was: M[D, North Potomac - Hanson, Beverly(an after noon delivery)]>`

*   测试`testSortClass`失败：

    `expected: <[Dear Mom]> but was:<Happy Mother's Day]>`

谁能提供我需要在`OrderManager`课堂上修复的正确代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:14:14.787

testPrintMessageCards 测试失败并显示： `expected: <[Dear Mom]> but was: <Happy Mother's Day]>`

在我看来，测试表明您的贺卡中需要以下几行：

```
Dear Mom,
<Text>
Love <Name> 
```

此外，printMessageCards 需要根据交货日期对卡片进行排序，这就是为什么应该首先打印第二张卡片（来自 Peggy）的原因。

实际上，您只需要查看测试并重新编写代码，直到所有测试都通过。

自己尝试，如果遇到任何问题，请针对该问题提出特定的问题。如果有人为你做作业，从长远来看，这对你没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:15:13.693

如果您在字符串之后插入 \n，如下所示：

```
message += ((Order) element).getMsg()+"\n"+"\n"; 
```

在这附近的其他地方，你有一个 \n 作为行尾，另一个作为空行。所以，你有**一个**空行，而不是两个。

# javascript - 如何在 PDF 文档中插入功能？

> ID：13833478
> 
> 赞同：1
> 
> 时间：2012-12-12T05:38:06.823
> 
> 标签：javascript, pdf, acrobat

是否有人熟悉将函数插入 PDF 文档（特别是 Adob​​e Acrobat Pro 中的“插入自定义代码”功能）？我知道可以在一个事件上启动一个函数......但我不确定哪个事件最能处理这个问题。我假设按下按钮。另外，有谁知道哪种语言与 PDF 兼容？Javascript是唯一的吗？我不认为服务器端代码（如 PHP 或 Ruby）会起作用。或者使用 JQuery 之类的框架。也许它只是 ActionScript 或像 C# 这样的严格语言。我不知道：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:35:41.490

在 Adob​​e Acrobat 开发人员网站上查看此页面：

[http://www.adobe.com/devnet/acrobat/overview.html#JavaScript](http://www.adobe.com/devnet/acrobat/overview.html#JavaScript)

这说明您所指的语言是 JavaScript，其中包含许多与 Acrobat 本身相关的附加对象。

因此，如果您想在 PDF 文件中添加功能（通常是按下按钮的结果，但您也可以进行字段验证、文档打开等操作），它必须是 JavaScript。阅读此页面以获取有关 JavaScript 的所有详细信息（包括参考）：

[http://www.adobe.com/devnet/acrobat/javascript.html](http://www.adobe.com/devnet/acrobat/javascript.html)

# hadoop - Pig MR 作业在由启动集群的同一用户运行时失败

> ID：13833479
> 
> 赞同：0
> 
> 时间：2012-12-12T05:38:08.580
> 
> 标签：hadoop, permissions, mapreduce, apache-pig

对于我的 Pig map reduce 作业中的某些映射器和 reducer，我间歇性地看到此异常。大多数情况下，它会在其他节点上重试并且任务成功。但有时所有 4 个任务都失败了，map reduce 作业失败了。

然而有趣的是文件夹jobcache确实有700权限。我不明白为什么它不能在里面创建文件夹。

```
Error initializing attempt_201212101828_0396_m_000028_0:
java.io.IOException: Failed to set permissions of path: /apollo/env/TrafficAnalyticsHadoop/var/hadoop/mapred/local_data/taskTracker/trafanly/jobcache/job_201212101828_0396 to 0700
    at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:682)
    at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:671)
    at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
    at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
    at org.apache.hadoop.mapred.JobLocalizer.createJobDirs(JobLocalizer.java:221)
    at org.apache.hadoop.mapred.DefaultTaskController.initializeJob(DefaultTaskController.java:184)
    at org.apache.hadoop.mapred.TaskTracker$4.run(TaskTracker.java:1226)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1201)
    at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1116)
    at org.apache.hadoop.mapred.TaskTracker$5.run(TaskTracker.java:2404)
    at java.lang.Thread.run(Thread.java:662) 
```

如果有帮助，我正在使用 Hadoop 1.0.1。我在网上搜索时发现的另一件事是：[https](https://issues.apache.org/jira/browse/MAPREDUCE-890) ://issues.apache.org/jira/browse/MAPREDUCE-890 。**在我的情况下，启动 mapred 集群的用户确实正在运行该作业，这就是它失败的时候。对于任何其他用户，该作业运行良好。**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:08:11.847

将您在 .xml 配置文件中用作属性值的目录的权限更改为 755

# android - 如何在android中处理首选项的点击事件

> ID：13833481
> 
> 赞同：1
> 
> 时间：2012-12-12T05:38:23.403
> 
> 标签：android, android-preferences

```
 public class SettingsActivity extends PreferenceActivity implements OnPreferenceClickListener{

private Preference mLoginPreference;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings_layout);

    mLoginPreference = getPreferenceManager().findPreference(
            getString(R.string.login_pref));
}

@Override
public boolean onPreferenceClick(Preference preference) {

    if(preference.getKey().equals(getString(R.string.login_pref))) {
        Intent intent = new Intent(SettingsActivity.this, FacebookLoginActivity.class);
        startActivity(intent);
        return true;
    }
    return false;
}
} 
```

在 settings_layout.xml

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@android:color/white" >

<Preference
    android:key="@string/login_pref"
    android:title="@string/login_title" />
</PreferenceScreen> 
```

我有一个作为设置屏幕的应用程序，在此`Login to your Account`选项中将登录用户的 FB 帐户并更新摘要。这是我编写的代码，但它不起作用，而且我想更新`Login to your Account`用户是否使用 Facebook 帐户登录或未登录的摘要。任何帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:52:14.173

在内部完成登录后，`FacebookLoginActivity`您可以 `setResult`在完成活动之前使用（结果代码）设置结果代码，并在内部`SettingsActivity`覆盖`onActivityResult`（结果代码）并更改用户登录的标签。

# php - 我的 JavaScript 代码在 Firefox 中运行良好，但在 chrome 和 IE 中运行良好

> ID：13833485
> 
> 赞同：1
> 
> 时间：2012-12-12T05:38:56.943
> 
> 标签：php, javascript, jquery

**JavaScript 代码**： `common.js`

```
function setFocus(evt,data)
{
  var keycode=evt.keyCode;  
  $("[tabindex="+data[keycode]+"]").focus();
  return false; 
} 
```

**PHP代码**：

```
<table class="tblmenu">
   <tr>
      <td><div class="redbut"><a href="#" id="formstng"    tabindex="1" onKeyPress="setFocus(event,{'38':'5','40':'2'})">foT Aosa.Aona.Aof. laokTao saoTIMga </a></div></li></td>
   </tr>
   <tr>
      <td><div class="redbut"><a href="#" id="setting" tabindex="2" onKeyPress="setFocus(event,{'38':'1','40':'3'})">roT saoTIMga</a></div></td>
   </tr>
   <tr>
      <td><div class="redbut"><a href="#" tabindex="3" onKeyPress="setFocus(event,{'38':'2','40':'4'})">slaIpa saoTIMga</a></div></td>
   </tr>
   <tr>
      <td><div class="redbut"><a href="#" tabindex="4" onKeyPress="setFocus(event,{'38':'3','40':'5'})">isasTma saoTIMga</a></div></td>
   </tr>
   <tr>
      <td><div class="redbut"><a href="#"  tabindex="5" onKeyPress="setFocus(event,{'38':'4','40':'1'})">yauzr AonT/I</a></div></td>
   </tr>
</table> 
```

我试图专注于与箭头键的链接。这在 Firefox 中运行良好，但在 chrome 和 IE 中却不行。提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T05:43:19.337

请使用 evt.charCode 代替 evt.keyCode 用于 IE，（即）你可以使用如下，

```
 var keycode =  evt.keyCode? evt.keyCode : evt.charCode 
```

# javascript - 使用 jquery 基于点击显示/隐藏与类相关的文本

> ID：13833493
> 
> 赞同：1
> 
> 时间：2012-12-12T05:39:47.910
> 
> 标签：javascript, jquery

我正在显示产品列表。单击显示更多后，需要显示额外类中的文本，显示更多需要隐藏，显示更少需要可见。当点击显示更少时，需要发生相反的情况。

我使用了下面的 jQuery 代码，它可以工作，但问题是它显示/隐藏在每个块中添加额外的文本。我希望它只显示相关的块。

**Javascript**

```
$(document).ready(function() {

    $('.extras').css("display", "none");

    $('.showmore').click(function() {
        $(".extras").toggle();
        $('.showmore').hide();
        $('.less').show();
    });

    $('.less').click(function() {
        $(".extras").toggle();
        $('.extras').hide();
        $('.showmore').show()
    });

}); 
```

**HTML**

```
<div class="blocks">
    <div class="right">
        <ul class="options">
            <li class="x"><a href="#">Service 1</a></li>
            <li class="y"><a href="#">Service 2</a></li>
            <li class="z"><a href="#">Service 3</a></li>
            <li class="r"><a href="#">Service 4</a></li>
            <li class="k"><a href="#">Service 5</a></li>
        </ul>
        <div class="showmore"><a>+ show more</a></div>
    </div>
    <div class="extras">
        <p>test text</p>
        <div class="less"><a>- hide</a></div>
    </div>
</div>

<div class="blocks">
    <div class="right">
        <ul class="options">
            <li class="x"><a href="#">Service 1</a></li>
            <li class="y"><a href="#">Service 2</a></li>
            <li class="z"><a href="#">Service 3</a></li>
            <li class="r"><a href="#">Service 4</a></li>
            <li class="k"><a href="#">Service 5</a></li>
        </ul>
        <div class="showmore"><a>+ show more</a></div>
    </div>
    <div class="extras">
        <p>test text</p>
        <div class="less"><a>- hide</a></div>
    </div>
</div>

<div class="blocks">
    <div class="right">
        <ul class="options">
            <li class="x"><a href="#">Service 1</a></li>
            <li class="y"><a href="#">Service 2</a></li>
            <li class="z"><a href="#">Service 3</a></li>
            <li class="r"><a href="#">Service 4</a></li>
            <li class="k"><a href="#">Service 5</a></li>
        </ul>
        <div class="showmore"><a>+ show more</a></div>
    </div>
    <div class="extras">
        <p>test text</p>
        <div class="less"><a>- hide</a></div>
    </div>
</div> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:47:56.557

确保您在相关部分执行您的逻辑。**[在这里演示](http://jsbin.com/umocex/1/)**

尝试：

```
 $(document).ready(function () {

            $('.extras').css("display","none");

            $('.showmore').click(function () {
                var parent = $(this).closest('.blocks');
                $(parent).find(".extras").toggle();
                $(parent).find('.less').show();
                $(this).hide();
            });

            $('.less').click(function () {
                var parent = $(this).closest('.blocks');
                $(parent).find(".extras").toggle();                 
                $(parent).find('.showmore').show();
                $(this).hide();
            });

        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:43:16.507

利用`.closest()`

```
$(document).ready(function() {

    $('.extras').css("display", "none");

    $('.showmore').click(function() {
        var $div = $(this).closest('.blocks');
        $div.find(".extras").toggle();
        $div.find('.showmore').hide();
        $div.find('.less').show();
    });

    $('.less').click(function() {
        var $div = $(this).closest('.blocks');
        $div.find(".extras").toggle();
        $div.find(".extras").hide();
        $div.find('.showmore').show();
    });

});​ 
```

**[检查小提琴](http://jsfiddle.net/grxhx/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:43:22.397

尝试`$(this).toggle()`在事件处理程序中使用。

或者我猜更完整， $('.extras').hide(); $(this).show();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T05:57:06.783

你可以结合`closest`,`find`和`toggle`工作。
因此，您的所有 javascript 都可以更改为以下内容。

```
$('.showmore, .less').click(function() {
    var $elements = $(this).closest('.blocks').find('.extras, .showmore');
    $elements.toggle();
}); 
```

[**演示**](http://jsfiddle.net/5Uy9G/)

*参考*

*   [最近的](http://api.jquery.com/closest/)
*   [寻找](http://api.jquery.com/find/)
*   [切换](http://api.jquery.com/toggle/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T05:45:01.360

使用`$(this)`获取相关内容，

所以在里面`$(".showmore").click()`，

```
$(this).parents(".blocks").children(".extras").toggle();
$(this).parents(".blocks").children('.showmore').hide();
$(this).parents(".blocks").children('.less').show(); 
```

[测试链接](http://jsfiddle.net/zFc6X/)

# ruby-on-rails - 保存没有外键的连接表项

> ID：13833494
> 
> 赞同：1
> 
> 时间：2012-12-12T05:39:56.760
> 
> 标签：ruby-on-rails, many-to-many, jointable

我有两个模型，用户和俱乐部。用户可以创建俱乐部，然后将成员添加到俱乐部。为此，我有一个名为 Membership 的连接表，如下所示：

```
class Membership < ActiveRecord::Base

  attr_accessible :member_id, :club_id, :name, :email

  belongs_to :club
  belongs_to :member, class_name: "User"

  validates :club_id, presence: true

end 
```

为了创建会员，我有一个表格，要求提供俱乐部成员的姓名和电子邮件，并通过隐藏字段传递 :club_id。

```
<%= form_for(@club.memberships.create(:club_id => @club.id)) do |f| %>
  <%= f.hidden_field :club_id %>
  <div class="field">
    <%= f.text_field :name, placeholder: "Name" %>
  </div>
  <div class="field">
    <%= f.text_field :email, placeholder: "Email" %>
  </div>
  <div class="action">
    <%= f.submit "Add", class: "btn" %>
  </div>
<% end %> 
```

:email 被发送到控制器以查找该用户的 ID，并使用 :club_id 和 :member_id 创建会员资格，并将链接到其个人资料的用户名放置在俱乐部的页面上。如果电子邮件地址已与用户关联，则一切正常。

控制器：

```
def create
  @club = Club.find(params[:membership][:club_id])
  unless User.find_by_email(params[:membership][:email]).id.nil?
    params[:membership][:member_id] = User.find_by_email(params[:membership][:email]).id
    @club.memberships.create(params[:membership])
    flash[:success] = "Club member successfully added"
    redirect_to :back
  else
    @club.memberships.create(params[:membership])     ##<-- This is where I need help
    redirect_to :back
  end
end 
```

但是，如果没有与该电子邮件关联的用户，则查找返回 nil，如预期的那样。我想知道如何仅使用名称而不使用 :member_id 来保存此会员资格。我希望它仍然能够在俱乐部页面上显示该俱乐部成员的姓名，但显然没有指向他们个人资料的链接。然后可以使用电子邮件向他们发送一条消息，表明有人表示他们是我网站上某个俱乐部的成员，但主要是我只想让他们的名字仍然显示在该俱乐部的页面上。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:12:16.970

为什么不为新电子邮件创建一个用户？然后可以解决所有 nil 和显示的东西。保持当前结构的最简单方法。

# php - 如果在 PDO 准备语句中插入成功，则 if/else 语句的语法

> ID：13833499
> 
> 赞同：2
> 
> 时间：2012-12-12T05:40:28.453
> 
> 标签：php, if-statement, pdo, insert, prepared-statement

我正在尝试从 mySql 语句切换到 PDO 准备语句，但是如果插入成功（以前是`if($result) {...}`），我无法确定我必须使用的 if/else 语句的正确语法。

我知道 $stmt->execute(); 成功时返回 true，失败时返回 false，但我无法确定如何设置语句以对此采取行动。

**新代码（PDO 准备好的语句）**

```
$gender = $_POST['gender'];  
if ($gender==="female" ) {
try {      
   $stmt = $conn->prepare('INSERT INTO customer_info (fname...) VALUES(:fname...)');
   $stmt->bindParam(':fname', $_POST['fname'], PDO::PARAM_STR);
   $stmt->execute();   
    } catch(PDOException $e) {
  echo $e->getMessage();
} 
```

**这是原始`if ($gender==="female")`功能的其余部分**

```
$result = @mysql_query($qry);    
    if($result) {          
      $qry="SELECT * FROM customer_info WHERE user_name='$_POST['user_name']' AND password='$_POST['password']'";
      $result=mysql_query($qry);          
if($result) {
    if(mysql_num_rows($result) == 1) {
        //user_name Successful
        session_regenerate_id();
        $member = mysql_fetch_assoc($result);
        $_SESSION['SESS_USER_ID'] = $member['user_id'];
        session_write_close();
        header("location: flatter_iframe.html");
        exit();
    }else {        
        header("location: login_failed.html");
        exit();
    } 
```

*为了简化事情，我删除了大部分变量（因为代码是相同的）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:39:05.397

有多种方法可以检查 INSERT 是否正常工作。

## 1\. $stmt->execute() 的返回值

如您所说，`$stmt->execute();`成功时返回 true，失败时返回 false。所以你可以使用：

```
$result = $stmt->execute();
if ($result) {...} 
```

[PDO 在此处执行文档](http://php.net/manual/en/pdostatement.execute.php)

## 2\. 行数

rowCount 将返回受查询影响的行数。成功插入后，这应该是 1。

```
$stmt->execute();
$affected_rows = $stmt->rowCount();
if ($affected_rows == 1) {...} 
```

[PDO rowCount 文档在这里](http://php.net/manual/en/pdostatement.rowcount.php)

## 3\. 最后插入的 ID

如果您的表有一个 ID 列，您可以使用返回最后插入行的 ID `lastInsertId()`。

```
$stmt->execute();
$newCustomerInfoId = $pdo->lastInsertId();
if ($newCustomerInfoId) {...} 
```

注意：您必须调用`lastInsertId`PDO 对象，而不是`$stmt`.

[PDO lastInsertId 文档在这里](http://php.net/manual/en/pdo.lastinsertid.php)

# android - GCMBaseIntentService 方法中的 OnMessage 多次调用？

> ID：13833504
> 
> 赞同：1
> 
> 时间：2012-12-12T05:40:55.273
> 
> 标签：android, google-cloud-messaging

我正在使用 GCM 做示例 PoC。我从我的设备向 gcm 服务器发送注册请求并获得注册 ID 以成功注册。我将所有注册 ID 存储在我的应用服务器数据库中。我只将数据从我的应用服务器发送到 GCM 一次到我的所有注册 ID。但是，GcmBaseIntentService 的 OnMessage() 方法调用了多次。

这是我发送数据时对我的应用服务器的 GCM 响应

```
{
    "multicast_id": 5986417894970376000,
    "success": 7,
    "failure": 0,
    "canonical_ids": 0,
    "results": [
        {
            "message_id": "0:1355230384617663%9fa953f8f9fd7ecd"
        },
        {
            "message_id": "0:1355230384617914%9fa953f8f9fd7ecd"
        },
        {
            "message_id": "0:1355230384617911%9fa953f8f9fd7ecd"
        },
        {
            "message_id": "0:1355230384617987%9fa953f8f9fd7ecd"
        },
        {
            "message_id": "0:1355230384617909%9fa953f8f9fd7ecd"
        },
        {
            "message_id": "0:1355230384617985%9fa953f8f9fd7ecd"
        },
        {
            "message_id": "0:1355230384618032%9fa953f8f9fd7ecd"
        }
    ]
} 
```

我正在使用 AsynTask 在我的 onMessage() 方法中做一些任务，由于这个多次调用创建了多个线程。

请就这个问题给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:28:48.943

我的服务器端代码的问题。在我的有效负载数据的设备列表中多次添加单个注册 ID。

# c# - C# 可以在 Java (Meta-inf/service) 中执行类似 SPI 的操作吗？

> ID：13833505
> 
> 赞同：2
> 
> 时间：2012-12-12T05:40:55.817
> 
> 标签：c#, java, ikvm

我目前正在将`.JPEG`文件转换为`.WSQ`文件，我已经使用来自[http://sourceforge.net/projects/jmrtd/](http://sourceforge.net/projects/jmrtd/)的库在 Java 中成功完成了它。

现在我想在 C# 中做同样的事情，我使用 IKVM 将`.jar`文件转换为`.dll`文件，我可以在我的 C# 应用程序中调用 Java 库。但是有一个问题，在 Java 中，我发现将 JPEG 转换为 WSQ 的功能在外部库中可用，该库作为外部 SPI 从 META-INF/service 文件夹中添加。类似[http://docs.oracle.com/javase/tutorial/sound/SPI-intro.html](http://docs.oracle.com/javase/tutorial/sound/SPI-intro.html)的东西。

据我了解，外部库在 Java 中被称为“间接”，我如何在 C# 中做到这一点？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:40:04.387

如果“外部库”是第二个 jar 文件，则使用括号语法一步编译这两个 jar 文件。然后它应该工作。

有关详细信息，请参阅 IKVM wiki：

*   [将 jar 文件转换为 dll 并将其用作库](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Convert_a_jar_file_to_a_dll_and_use_it_as_library)
*   [类加载器](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=ClassLoader)

# c++ - C++ 传递 std::vector< boost::shared_ptr< foo >>

> ID：13833508
> 
> 赞同：0
> 
> 时间：2012-12-12T05:41:15.543
> 
> 标签：c++, class, stl, vector, shared-ptr

我目前正在学习 STL 和 boost 库的基础知识，需要一些帮助。让我首先描述一下我在哪里，我想构造一个 shared_ptrs 的向量，比如某个类 foo。以前我有一个数组或指针，需要使用`new`和`delete`处理内存，我认为过渡到向量和智能指针是个好主意。我目前有类似的东西：

```
class foo{
 ....
}

int main(){
 std::vector< boost::shared_ptr< foo > > vec_ptr;
 vec_ptr.push_back(boost::make_shared<foo>);
 ....
} 
```

现在我想知道如何在两种情况下最好地传递这个向量： - 进入一个函数。- 进入类对象的构造函数（通过初始化列表初始化对象。

进入一个函数，我猜它最好通过引用传递，如：

```
void func(std::vector< boost::shared_ptr < foo > >& vec_ptr_in_func){
  ....
} 
```

进入类构造函数我不确定我最初的猜测是

```
class vec_class{
 vec_class(std::vector< boost::shared_ptr < foo > >& vec_ptr_in_class_)
  : vec_ptr_in_class(vec_ptr_in_class_){...}
} 
```

但这似乎给出了以下错误：

```
no matching function for call to vec_class::vec_class(std::vector< boost::shared_ptr < foo >, std::allocator<boost::shared_ptr< foo > > >) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:51:21.407

1.  对于一个函数，像这样传递它

    ```
    // If you intend to modify the vec_ptr_in_func   
    void func(std::vector< boost::shared_ptr < foo > >& vec_ptr_in_func){

    }

    // If you intend to not modify the vec_ptr_in_func   
    void func(const std::vector< boost::shared_ptr < foo > >& vec_ptr_in_func){

    } 
    ```

2.  通过构造函数的 const-reference 传递它。

# android - 使用不同密度设备android自动调整textView的大小

> ID：13833514
> 
> 赞同：2
> 
> 时间：2012-12-12T05:41:34.700
> 
> 标签：android, textview, autoresize, autoscaling

在我的应用程序的顶部，我有一个应该显示在中间的标题，右边是一个按钮。由于 textViews 的长度在我的控制范围之内，有时我的标题会因为内容的长度过长而穿过按钮。

遵循[此](https://stackoverflow.com/questions/2596452/how-to-scale-resize-text-to-fit-a-textview)之后，我以某种方式倾向于解决问题。我的设备是 HTC 的愿望。不幸的是，如果我使用 Galaxy SIII 进行检查，它并不能解决问题。

我想知道如何根据不同密度的不同设备来管理它。

我在相对布局中的控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:51:14.890

您还可以通过以下方式检查设备屏幕密度 -

```
 WindowManager wm = (WindowManager) _context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    int screenWidth = display.getWidth();
    int screenHeight = display.getHeight(); 
```

并且可以相应地管理您的应用程序需要什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:47:54.760

只需在您的 xml 中使用 weightsum 并将所有视图的宽度设置为填充父级.....这会使您的 textview 自动调整大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:50:22.950

您可以根据他们的 DPI 维护布局，在 XHDPI 中复制相同的 XML 数据（因为 S3 属于 XHDPI）并测试它类似地在 HDPI 中复制 XML 数据，但请记住 layoutOut 的以下 Thing Pixel Ratio 如下

> 在 LDPI 中为 1:0.75 在 MDPI 中为 1:1 在 HDPI 中为 1:1.5 在 XHDPI 中为 1:2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:14:05.447

```
Display display = ((WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
DisplayMetrics dm = new DisplayMetrics();
display.getMetrics(dm);
float density = dm.density; 
int screenWidth = display.getWidth(); 
```

使用上面的代码，您的屏幕密度将为浮动。因此您可以使用它来计算 textView 的宽度，例如：

```
int newWidth = (int) (density * 100); 
```

其中 100 是基于大小的。或者你可以根据你的 screenWdith 设置一个比例。

```
int newWidth = screenWidth / 2; 
```

# java - 生产者消费者变体 java BlockingQueues

> ID：13833515
> 
> 赞同：0
> 
> 时间：2012-12-12T05:41:36.260
> 
> 标签：java, multithreading, concurrency, queue

我正在研究 Java 中生产者消费者问题的变体。我有一个生产者线程创建对象，这些对象被放入优先阻塞队列，然后传递到主容器控制器，它是一个有界缓冲区。

队列的原因是当主容器有一定百分比的对象 A 时，它只会接受类型 B 的对象，以及我们被要求查看的其他一些场景。我无法弄清楚代码出了什么问题，调试器只是从 InQueue 中的 in.offer 和 Producer 中的 in.push 跳转。任何方向或建议将不胜感激。

```
 import java.util.concurrent.PriorityBlockingQueue;

        public class InQueue implements Runnable {

        Controller c;
        private PriorityBlockingQueue in;

        public InQueue(Controller c) {
            this.c = c;
            in = new PriorityBlockingQueue();
        }

        public void push(C c) {

            in.offer(c);
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        public void run() {
            while (true) {
                try {
                    C temp = (C) in.take(); //will block if empty
                    c.arrive(temp);
                } catch (InterruptedException e) {} // TODO
            }
        }
    }

public class Controller {

    private BoundedBuffer buffer;
    private int used;

    Controller(int capacity) {
        this.buffer = new BoundedBuffer(capacity);
        used = 0;
    }

    public void arrive(C c) {
        try {
            buffer.put(c);
            used++;
        } catch (InterruptedException e) { } //TODO
    }

    public C depart() {
        C temp = null; //BAD IDEA?
        try {
            temp = (C)buffer.take();
            used--;
        } catch (InterruptedException e) { } //TODO
        return temp; //could be null
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:36:07.943

由于使用泛型的方式错误，您的代码无法编译。另一件事是BoundedBuffer没有默认实现。下面我为生产者-消费者问题做了一个工作实现，下面有阻塞队列。看看并纠正你的错误。

```
package concurrency;

import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

public class Producer<T> {
    private final BlockingQueue<T> queue;
    private final Consumer consumer;
    private static volatile boolean isShutdown;
    private final static Object lock = new Object();

    public Producer() {
        this.queue = new LinkedBlockingQueue<T>();
        this.consumer = new Consumer();
    }

    public void start() {
        consumer.start();
    }

    public void stop() {
        synchronized (lock) {
            isShutdown = true;
        }
        consumer.interrupt();
    }

    public void put(T obj) throws InterruptedException {
        synchronized (lock) {
            if (isShutdown)
                throw new IllegalStateException("Consumer Thread is not active");
        }
        queue.put(obj);
    }

    private class Consumer extends Thread {

        public void run() {
            while (true) {
                synchronized (lock) {
                    if (isShutdown)
                        break;
                }

                T t = takeItem();
                // do something with 't'
                if(t!=null)
                printItem(t);
            }
        }

        private void printItem(T t) {
            System.out.println(t);
        }

        private T takeItem() {
            try {
                return queue.take();
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
            return null;
        }
    }

    public static void main(String[] args) throws InterruptedException {

        Producer<Integer> producer = new Producer<Integer>();
        producer.start();
        for (int i = 0; i <20; i++) {
            producer.put(i);
            if (i >= 7)
                Thread.sleep(500);
        }
        producer.stop();
    }
} 
```

# c - libxml2如何处理碎片

> ID：13833518
> 
> 赞同：0
> 
> 时间：2012-12-12T05:41:50.873
> 
> 标签：c, memory, libxml2

我在一个项目中为 libxml2 添加了我的自定义分配器，我看到了一个 alloc 和 free 调用的列表。我要检查的是 libxml2 如何处理碎片，如果有的话。程序可执行文件开始增加内存并且不会将其返回给操作系统。有一个 libxml2 文档指出，如果操作系统决定返回的内存太小并且重用它的开销太大，则可能会发生这种情况。我的程序使用了很多小分配，使用和释放它们。应用程序的其余部分使用基于线程的内存池，因此不会有泄漏的机会，这些池在处理程序调用的每次迭代中都会重置。我使用以下函数来覆盖默认分配器只是为了检查分配。任何帮助理解这一点可能会有所帮助。

```
/* the function override the libxml2 default ones **/
void cfreeFunc(void* ptr);
void * cmallocFunc(size_t size);
void * cmallocAtomicFunc(size_t size);
void * creallocFunc(void *ptr, size_t size);
char * cstrdupFunc(const char *str);

xmlGcMemSetup(cfreeFunc, cmallocFunc, cmallocAtomicFunc, creallocFunc,
        cstrdupFunc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:41:42.827

libxml2 为您提供了覆盖它的内存管理功能的方法——如果不是这样，可以做些什么来解决您的问题？这取决于您的功能 - 如果您使用 sbrk（或使用 sbrk 的 malloc） - 您永远不会返回内存。您可以尝试对每个单独的分配使用单独的 mmap，但是在大量非常小的分配的情况下，它会显着增加内存占用。更好的方法是使用 mmap 分配缓冲区并将它们用作将来分配的内存垫。

# objective-c - 使用 iOS/Obj-c 按类型搜索 Apple App Store

> ID：13833521
> 
> 赞同：3
> 
> 时间：2012-12-12T05:42:06.070
> 
> 标签：objective-c, ios, app-store, itunes-store

您将如何使用 Obj-c 搜索 Apple App Store 来执行以下操作...

1.  返回游戏整体类别或特定游戏类别前 100 名的详细信息
2.  返回游戏类别中特定游戏的详细信息

任何人？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T10:53:48.503

好吧，据我所知，您有两种搜索 App Store 的方法：

1.  [搜索 API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)；
2.  [RSS 提要生成器](http://itunes.apple.com/rss/generator/)。

它们之间有很多差异，但与您的示例最相关的是，使用[Search API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)您无法对结果进行排序，因为它们是按相关性排序的，并且它始终需要一个搜索词。[RSS 提要生成器](http://itunes.apple.com/rss/generator/)已经为您提供了热门免费、热门付费和热门收入类别。

鉴于此，我将开始回答您关于[RSS 提要生成器](http://itunes.apple.com/rss/generator/)的问题。

1.  您使用[RSS 提要生成器](http://itunes.apple.com/rss/generator/)为美国商店中排名前 100 的免费游戏生成如下提要：[https](https://itunes.apple.com/us/rss/topfreeapplications/limit=100/genre=6014/xml) ://itunes.apple.com/us/rss/topfreeapplications/limit=100/genre=6014/xml ；
    *   [在此链接](http://www.apple.com/itunes/affiliates/resources/documentation/genre-mapping.html)中掠夺以获得游戏子类型；
2.  您使用[NSXMLParser](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)库来解析已经包含应用程序详细信息的 RSS。
    *   你可以使用`initWithContentsOfUrl:`NSXMLParser 的方法；
    *   可以在[此处](http://blog.merrycode.com/how-to-parse-rss-feeds-using-nsxmlparser-in-objective-c/)找到此部分的快速操作方法。

您还可以使用[StoreKit](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/StoreKit_Collection/_index.html)通过 ID 获取应用程序的详细信息，或者显示具有特定应用程序的模式视图控制器，但这需要额外的网络请求。

* * *

为了完整起见，我还将介绍如何使用[Search API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)。

1.  使用[Search API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)创建一个描述您的搜索的 URL：
    *   像这样的 URL 允许您搜索与“愤怒的小鸟”匹配的应用程序 - [https://itunes.apple.com/search?term=angry+birds&media=software](https://itunes.apple.com/search?term=angry%20birds&media=software)。
2.  使用[NSJSONSerialization 库](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)处理结果。这已经包括应用程序的详细信息。
    *   [阅读本教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)，了解如何使用NSJSONSerialization[库](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

最后，正如@Numan 所说，这两种方法完成了不同的事情。您说您希望获得特定类别的前 100 款游戏，还说您需要搜索特定游戏。

您可以使用我的描述创建一个类，以这两种方式与 App Store 交互，并返回您定义的描述应用程序（或对象数组）的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:31:58.267

您可以通过 RSS 访问此信息，请看这里[http://www.apple.com/rss/](http://www.apple.com/rss/)

您也可以生成 RSS 提要[http://itunes.apple.com/rss/generator/](http://itunes.apple.com/rss/generator/)

# iphone - 核心数据：获取是否必须访问持久存储？

> ID：13833529
> 
> 赞同：2
> 
> 时间：2012-12-12T05:42:42.737
> 
> 标签：iphone, objective-c, ios, core-data

说我这样做：

```
NSManagedObjectContext *context = #a managed object context";
NSString *entityName = #an entity name#;
NSFetchRequest *requestForAll = [NSFetchRequest requestWithEntityName:entityName];
NSArray *allObj = [context executeFetchRequest:requestForAll];

for (NSString *name in allNamesArray){
    NSFetchRequest *requestForOne = [NSFetchRequest requestWithEntityName:entityName];
    requestForOne.predicate = [NSPredicate predicateWithFormat:@"name == %@",name];
    NSArray *ObjsWithName = [context executeFetchRequest:requestForOne];
    #do some work with the obj#
} 
```

循环中的 fetch 是否每次都会导致访问持久存储？或者那些提取只会在 coredata 的行缓存中执行？

**编辑** 我写了一段测试代码：你需要创建一个名为“Person”的核心数据实体，它应该有一个名为“name”的属性，它是字符串类型的。

使用此代码填充一些数据：

```
self.array = @[@"alkjsdfkllaksjdf",@"asldjflkajdklsfjlk;aj",@"aflakjsdl;kfjalksdjfklajkldhkl;aj",@"aljdfkljalksdjfl;j" ,@"flajdl;kfjaklsdjflk;j",@"akldsjfklajdslkf",@"alkdjfkljaklsdjflkaj",@"alsdjflkajsdflj",@"adlkfjlkajsdfkljkla",@"alkdjfklajslkdfj"];

NSString *firstRunKey = @"oh its first run!";
NSString *firstRun = [[NSUserDefaults standardUserDefaults] objectForKey:firstRunKey];
if (!firstRun) {
    for (NSString *name in self.array) {
        Person *p = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
        p.name = name;
    }
}
[self.managedObjectContext save];
[[NSUserDefaults standardUserDefaults] setObject:firstRunKey forKey:firstRunKey];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

分析这两种方法，您会发现 usingCoreData 比 usingFilterArray 花费更多时间！

```
static int caseCount = 1000;
-(void)usingCoreData
{
    NSLog(@"core data");
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Person"];
    NSArray *allPersons = [self.managedObjectContext executeFetchRequest:request error:nil];

    for (int i = 0; i < caseCount; i++){
        for (NSString *name in self.array) {
            request.predicate = [NSPredicate predicateWithFormat:@"name == %@",name];
            NSArray *result = [self.managedObjectContext executeFetchRequest:request error:nil];
        }
    }
}

-(void)usingFilterArray
{
    NSLog(@"filter array");
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Person"];
    NSArray *allPersons = [self.managedObjectContext executeFetchRequest:request error:nil];

    for (int i = 0; i < caseCount; i++){
        for (NSString *name in self.array) {
            NSArray *array = [allPersons filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"name == %@",name]];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:18:15.550

我想我需要自己回答我的问题。

我测试了它，发现每次执行 fetch 时，核心数据都会将你的 NSFetchRequest 转换为 SQL 命令并调用数据库查询，查询结果首先是 NSManagedObjectIDs，应用缓存从 NSManagedObjectID 中获取 NSManagedObject。

总之，它缓存对象，但不缓存查询结果。

这意味着您执行相同的 NSFetchRequest 10 次，它将查询您的持久存储 10 次，尽管您将获得 10 次相同的结果。因此在这种情况下，内存中的过滤数组将比获取更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:45:47.880

获取将来自指定的缓存（如果可用）。

编辑：这是一个很棒的教程的链接，它展示了如何设置一个`NSFetchedResultsController`使用缓存的。

[http://www.raywenderlich.com/?p=999](http://www.raywenderlich.com/?p=999)

# c#-4.0 - 接口如何知道调用了哪个类方法？

> ID：13833533
> 
> 赞同：0
> 
> 时间：2012-12-12T05:43:02.770
> 
> 标签：c#-4.0

我有一个疑问，如果我们有两个具有相同方法的类，类的对象不知道我们使用接口调用哪种方法来调用这种情况？但是接口如何知道要调用哪个类方法，如何应用接口，我有一些代码请检查并告诉我？

```
namespace IntExample
{
    interface Iinterface
    {
     public   void add();
     public     void sub();
    }
    public partial class Form1 : Form,Iinterface
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void add()
        {

            int a, b, c;
            a = Convert.ToInt32(txtnum1.Text);
            b = Convert.ToInt32(txtnum2.Text);
            c = a + b;
            txtresult.Text = c.ToString();

        }
        public void sub()
        {

            int a, b, c;
            a = Convert.ToInt32(txtnum1.Text);
            b = Convert.ToInt32(txtnum2.Text);
            c = a - b;
            txtresult.Text = c.ToString();
        }

        private void btnadd_Click(object sender, EventArgs e)
        {
            add();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            sub();
        }

        class cl2 : Form1,Iinterface
        {
            public void add()
            {

                int a, b, c;
                a = Convert.ToInt32(txtnum1.Text);
                b = Convert.ToInt32(txtnum2.Text);
                c = a + b;
                txtresult.Text = c.ToString();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:57:19.300

接口是一种**抽象**，它允许您在不需要继承的情况下执行多态。因此，“接口变量”保存具体类的实例，只要变量包含该实例，则当前实例的类*始终用于接口的方法查找。*

# c++ - c++栈迷宫求解程序

> ID：13833534
> 
> 赞同：0
> 
> 时间：2012-12-12T05:43:08.693
> 
> 标签：c++, stack, maze

我写了一个程序来生成一个迷宫并解决它，但是它在解决部分有一些错误。

它形成一个像5 * 5或16 * 16的方形迷宫。

迷宫从 2D 数组中的 (0,0) 开始，到 (size()-1, size()-1) 结束。

我用“1”来表示结束的路径。您可以从下图中看到，尽管程序可以找到出口，但仍有一些不需要的“1”。

对不起大家，我真的无法调试这个。任何人都可以帮助我或指导我吗？非常感激！

屏幕截图在这里。我不允许直接发布图像 [https://photos-1.dropbox.com/t/0/AADjdwSgmLdVKCZrI1C-gDvwZ9ORj0rGbv3UJ7AYqXWeuA/10/7014161/png/2048x1536/2/1355295600/0/2/bug.png/5sQR3E_jyMPe0lMUC_sdm2cf2](https://photos-1.dropbox.com/t/0/AADjdwSgmLdVKCZrI1C-gDvwZ9ORj0rGbv3UJ7AYqXWeuA/10/7014161/png/2048x1536/2/1355295600/0/2/bug.png/5sQR3E_jcow4lWIy9cFf2FYbmwl0C_sd2cfCyMPe0MU)

我的代码在这里 [https://www.dropbox.com/s/vldkcv4fy6bp1ff/Source.cpp](https://www.dropbox.com/s/vldkcv4fy6bp1ff/Source.cpp)

问题已解决 谢谢大家

我解决迷宫的原始代码是

`否则如果（随机数==1）{

```
 if (y+1<myMaze.size() && !myMaze[x][y+1].left && !myMaze[x][y+1].visited)
        {
            y++;
            myMaze[x][y].truePath=true;
            myMaze[x][y].visited=true;
            s1.push(myMaze[x][y]);
            randomNum=rand()%4;
        }
        else
        {
            rightBusted=true;
            randomNum=rand()%4;
        }` 
```

然后我只是在if语句中添加这些代码来将bool变量重置为false，然后问题就解决了

```
 downBusted=false;
            rightBusted=false;
            topBusted=false;
            leftBusted=false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:34:06.593

你可以调试这个，伙计。就是这样。您已经拥有了执行此操作所需的工具；他们所需要的只是一点点调整。

你最好的调试工具是你的 displayMaze() 例程。您只需为其添加两个可选参数即可将其变成强大的调试工具：

```
void displayMaze(const vector < vector<Cell> >& arr, int curX=-1, int curY=-1)
{
    .
    .
    . 
```

现在，如果调用者省略了 curX 和 curY，编译器将填充默认值 -1。现在稍后在该函数中，打印一个不同的字符以指示“当前迷宫位置”。这是我的做法，“似乎有效”，但我不能保证，因为我没有费心去真正理解你的逻辑：

```
 if (curX>=0 && curY>=0 && curX==i/2 && curY==j) // ++++++++++++
                cout << " * "; // * means "current position" // ++++++++++++
            else if (!arr[i/2][j].truePath)
                cout << "   ";
            else
                cout << " 1 "; 
```

现在，您的程序中内置了强大的调试工具。当 main() 在没有两个额外参数的情况下调用它时，不会打印星号。但是当你从solveMaze()调用它时，你可以指定“当前位置”，这样它就会用'*'标记那个位置。在solveMaze() 中，添加几个变量来跟踪“当前位置”...

```
int x=0, y=0;
int curX=x, curY=y; // ++++++++++++++++ 
```

...然后，在循环的顶部，只需调用强大的调试工具，以便逐步了解整体解决方案的当前状态：

```
int i=0;
while (!exitFound)
{
    displayMaze(myMaze, curX, curY); // +++++++++++++++++
    .
    .
    . 
```

现在，无论您更改您认为是“当前位置”的位置，只需相应地更新 curX 和 curY，您的调试工具就会让您保持更新，这样您就可以看到解决方案以图形方式展开（嗯，伪图形方式）。您甚至可以在关键逻辑决策点添加调试 cout 消息，这样您就可以将这些决策点与您看到的解决方案相关联，这样您就可以查看是否/何时出现问题。如果您发现问题，您可以在输出中向上滚动以查看哪里出了问题。

祝你好运！

# java - 多节点环境（集群），如何确保一个动作在启动时只执行一次？

> ID：13833541
> 
> 赞同：4
> 
> 时间：2012-12-12T05:43:28.310
> 
> 标签：java, jakarta-ee, websphere, cluster-computing

我的应用程序在 4 个节点的集群上运行。在启动时 (ServletContextListener)，它必须执行一个 SQL 脚本。如何确保 SQL 只执行一次而不是 4 次，因为每个节点都会尝试执行相同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:42:35.367

如果你想只执行一次（比如更新数据库结构的脚本），你应该在数据库中使用某种版本字段（在最简单的情况下只是一个单列/单行表）。如果您不想自己做， http: [//flywaydb.org/可能是您的解决方案。](http://flywaydb.org/)如果您只是想确保没有实例同时运行相同的脚本，您可以使用基本相同的想法，但不要使用总是增加的版本字段，而是使用您在脚本完成后重置的相同类型的布尔锁。如果你想自己实现ist，一定要正确处理并发访问。例如，代替`select entry from lock /if entry = 0 update lock set entry = 1`which is non atomic 做类似的事情`update lock set entry = 1 where entry = 0/check if number affected rows = 1`

# jpa - 使用 CASE 条件和连接语句从本地 SQL 查询形成多个视图的 JPQL 查询

> ID：13833542
> 
> 赞同：1
> 
> 时间：2012-12-12T05:43:35.000
> 
> 标签：jpa, jpql

请帮助使用 CASE 条件和连接语句将本机查询转换为 JPQL 查询以获取多个视图。表 c1 和 c3 是视图。我正在尝试从 c1 获取当前和待处理的信息。请找到下面提到的查询

```
 SELECT c3.eqip_id  AS EQIP_ID, 
           CASE  WHEN c1.inst_ts IS NULL OR c1.sent_ts > c1.inst_ts THEN c1.ver_nm  END  AS PEND, 
           CASE  WHEN c1.sent_ts IS NULL OR c1.sent_ts > c1.inst_ts THEN c1.ver_nm  END  AS CURRENT, 
           c1.trm_ver_hist_id AS TRM_VER_HIST_ID 
    FROM   trm_ver_hist_vw c1 
           JOIN(SELECT Max(trm_ver_hist_id) AS TRM_VER_HIST_ID, dvc_id, status 
                FROM   trm_ver_hist_vw 
                WHERE  ver_typ_id = 1  AND status IN( 'C', 'P' ) 
                GROUP  BY dvc_id, status) c2 
             ON c1.trm_ver_hist_id = c2.trm_ver_hist_id 
           JOIN trm_dtl_vw c3  ON c1.dvc_id = c3.trm_id 
    WHERE  c3.co_actv_ind = 'Y'  AND c3.mach_hdwr_asscn_ind = 'Y' AND pin = 'ABC' 
```

谁能帮我在 JPA/JPQL 中进行此查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:57:55.330

它似乎非常复杂且数据特定。我建议使用本机 SQL 查询。

JPA 规范不允许在 FROM 子句中进行选择，尽管 EclipseLink 确实对此提供了一些支持。

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause)

# c# - 系统锁定后运行 Windows 应用程序

> ID：13833543
> 
> 赞同：1
> 
> 时间：2012-12-12T05:43:36.000
> 
> 标签：c#, windows

我在 C# 中创建了一个 Windows 应用程序，它使用 - 捕获 Windows 锁定/解锁状态

```
 SystemEvents_SessionSwitch() 
```

我使用无限的while循环使这个应用程序保持在继续运行模式。

我面临的问题是当用户锁定系统时，该应用程序也停止工作并且在解锁时不返回确切状态它执行两次锁定和解锁。

任何人都可以建议一些方法，即使在系统锁定后我也可以使这个应用程序运行

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:53:29.920

您可以将您的应用程序创建为 Windows 服务，这样如果您将其设置为自动启动并且您不需要登录，即使在系统重新启动后它也将始终运行。

# git - Git rebase 没有在基础分支上应用更改

> ID：13833544
> 
> 赞同：-1
> 
> 时间：2012-12-12T05:43:40.507
> 
> 标签：git, git-rebase

我有分支说“实验”，它被推了几天。现在，master 已经更新，我需要在 rebase 到 master 后再次推送实验。但是当我将它变基为 master 时，我看不到 master 之上的实验补丁。我的实验分支指向 master。

有什么问题？会不会是这个实验分支已经和master合并了还是别的什么？

Git状态

> $ git status
> 在分支实验
> 上 未跟踪的文件：（
> 使用“git add ...”来包含将提交的内容）
> a.txt
> 没有添加到提交但存在未跟踪的文件（使用“git add”进行跟踪）

Git 日志

> $ git log
> Experiment commit bc6c71d5ec6d8798aa283c9feaec844cd03edc60
> 作者：ssrivastava
> 日期：Tue Nov 27 12:15:37 2012 +0530
> [experiment] 为玩家状态添加索引

在 rebase 到 master

> 首先，倒带头在上面重播你的工作......
> 快进实验掌握。

通常在应用 rebase 时，它​​会在基础分支之上应用当前分支的最新更改，但我在这里看不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:29:03.947

一般来说，在变基时，Git 足够聪明，可以检测到哪些提交什么都不做并将它们排除在外。因此，当您在 master 中进行与实验分支中的提交执行相同操作的更改时，该提交将被跳过，因为它不会改变任何内容。虽然在审查 rebase 时这种行为可能会令人困惑，但在您的情况下并非如此。

变基通过找到两个分支的共同祖先来工作；然后将其用作旧基地。在您的情况下，由于您已将实验分支的更改合并*到*主分支中，因此共同的祖先是合并提交。现在提交与 master 此刻指向的相同，它实际上是实验分支的子节点（在合并之前指向实验分支中的父节点）：

```
B --- * --- O --- M       B ~ old base, O ~ old master
 \               /        M ~ current master (the merge commit)
  * --- * ----- E         E ~ experiment branch 
```

所以 master 已经包含了完整的实验分支，而 M 实际上领先于实验分支一个提交。如果 Git 现在在 master 之上重放实验分支中的提交，它会跳过这些提交，因为它们是空的——所有的更改都已经在 master 中了。所以基本上它会以快进结束。现在，由于 Git 很聪明，它不需要尝试在 master 之上应用所有这些提交来查看它们都会被跳过。由于 master 领先于实验分支，因此总是如此。所以它可以直接将实验分支快进到master。

# asp.net - C#.NET 中邮件的自动回复

> ID：13833548
> 
> 赞同：1
> 
> 时间：2012-12-12T05:43:51.617
> 
> 标签：asp.net

我需要知道如何为我们从用户那里收到的邮件创建自动回复电子邮件。例如，如果用户向我们发送邮件，他应该收到一封来自我们的确认邮件。

请就如何使用 c# codebehind 执行此任务提出一些想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:50:24.250

通过简单的 POP3 实现，您可以接收和过滤电子邮件。网络上有许多 POP3 实现。[请检查一下](http://www.codeproject.com/Articles/14304/POP3-Email-Client-NET-2-0)。有了这样的东西，你可以简单地随时收听传入的消息，并在收到来自特定用户的电子邮件时进行过滤。[在此线程](https://stackoverflow.com/questions/656881/pop3-to-smtp-message-custom-forwarder-in-c-sharp)中，您还可以了解如何使用 POP3 或 SMTP 发送电子邮件以自动回复您的电子邮件。

祝你好运！

# javascript - 即使找不到请求的元素，jQuery load() 是否也会发送任何数据？

> ID：13833549
> 
> 赞同：5
> 
> 时间：2012-12-12T05:44:00.627
> 
> 标签：javascript, jquery

当我有这样的代码时：

```
 $('#intro-posts-container').load('/ajax/load.php', function() {
      bindVoting();
   }); 
```

`#intro-posts-container`如果元素不存在，负载是否将请求发送到 load.php ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T05:46:36.010

此页面上的 firebug 快速测试表明，如果元素不存在，它*不会发送请求。*

我已经从[源代码](http://code.jquery.com/jquery-1.8.3.js)（v1.8.3）验证了这一点，其中包含以下内容：

```
jQuery.fn.load = function( url, params, callback ) {
    // [snip]

    // Don't do a request if no elements are being requested
    if ( !this.length ) {
        return this;
    }

    // [snip]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:49:03.400

它不发送任何请求，因为元素本身永远不会被加载事件永远不会被触发

# php - 管理员确认的 CodeIgniter 身份验证库

> ID：13833553
> 
> 赞同：0
> 
> 时间：2012-12-12T05:44:15.993
> 
> 标签：php, codeigniter, authentication, confirm

我正在寻找 CodeIgniter 身份验证库，以便我可以通过管理员角色确认用户注册（而不是通过发送确认电子邮件）。谁能给我一个建议？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:07:01.237

无论您选择哪一个，您都应该期望对其进行一些修改以适应您的特定要求。CI 框架和您在网上找到的 CI 类并不是完整的解决方案……它们只是起点。我自己真的更喜欢[Ion Auth](http://benedmunds.com/ion_auth/)，但我需要再次对我的应用程序进行一些修改。

# c# - 我可以自动初始化字典值吗？

> ID：13833554
> 
> 赞同：2
> 
> 时间：2012-12-12T05:44:19.783
> 
> 标签：c#, dictionary, initialization

假设我想将我的数据存储为一堆命名列表。

我真的很喜欢 with `Dictionary`，你可以这样做：

```
myDictionary["SomeKey"] = new List<string>{ "SomeString" }; 
```

但不幸的是，我不能安全地做到：

```
myDictionary["SomeKey"].Add("SomeString"); 
```

因为如果`List`at`SomeKey`还没有被初始化，我会得到一个空引用异常。

因此，每次我更改字典中的值时，我都必须这样做：

```
if (!myDictionary.ContainsKey("SomeKey")) myDictionary["SomeKey"] = new List<string>(); 
```

在我可以安全地添加到每个列表之前。它看起来很难看，并且会分散非样板代码的注意力。我还在几个地方重复了代码（`SomeKey`当我只想说“将此元素添加到列表中`SomeKey`，无论它是否为空”时，多次访问）。

基本上没有理由在我的`Dictionary`. 如果它是一个数组`List`，我会事先遍历每个元素并初始化每个成员；我不能这样做，`Dictionary`因为我事先不知道密钥是什么。

是否有更简洁的语法来表示“访问此键处的值，如果它为空，则对其进行初始化”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:51:01.560

我认为没有，但如果您愿意，可以将其作为扩展方法。就像是

```
public static class DictionaryExtensions
{
    public static SafeAdd(this Dictionary<string,List<string>> obj, string key, string val)
    {
        // your example code
    }
} 
```

那么你可以做`myDictionary.SafeAdd("somekey","somestring");`

# image - gwt 应用程序从其他服务器下载多个图像

> ID：13833556
> 
> 赞同：0
> 
> 时间：2012-12-12T05:44:29.553
> 
> 标签：image, gwt

我有一个 gwt 应用程序需要显示由其他服务器托管的图像，我使用 Image(url) 创建这些图标，但是速度慢得令人无法忍受，（需要在一页上显示多达 50 个图像），有什么办法吗我可以加快速度吗？我看了一些图像包，但似乎它只适用于我自己服务器上托管的图像。

这是我的代码：

```
for (int i = 0 ; i < 50; i++) {
  item = items.get(i);
  icon = new Image(ROOT_URL + item.getIconURI());

  ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:31:21.630

1）如果没有安全问题（只是图像正确），请确保您没有通过**https**请求。

2) 使用 Chrome Dev Tools - Network Profiler 监控页面加载和 http 请求。使用分析器建议调整您的应用程序。

3）尝试预先缓存图像（即）在用户导航到后台页面之前获取它们。

4）您也可以尝试请求图像主机发送压缩图像，如果它们尚未压缩。

上述建议与 GWT 关系不大。

# c# - 何时在 C# 类声明中使用 get 和 set

> ID：13833558
> 
> 赞同：3
> 
> 时间：2012-12-12T05:44:34.677
> 
> 标签：c#

> **可能重复：**
> [C# .NET 3.5+ 中属性和字段之间的区别](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp-net-3-5)

使用和使用有什么区别

```
public string Username { get; set; } 
```

并使用

```
public string Username; 
```

我一直在使用第一个，但想了解两者之间是否有任何区别，以及一个应该优先于另一个的场景。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T05:49:10.580

```
public string Username { get; set; } 
```

*   是一个属性。

尽管

```
public string Username; 
```

*   是一个公共变量。

如需更多对比，

*   反射在变量和属性上的工作方式不同，所以如果你依赖反射，使用所有属性会更容易。
*   您不能对变量进行数据绑定。
*   将变量更改为属性是一项重大更改。

其他链接

*   [属性与公共变量](http://www.codinghorror.com/blog/2006/08/properties-vs-public-variables.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T05:49:58.197

对字段不能做的属性可以做的一件事是限制 setter 或 getter 的可见性：

```
public string MyProperty { get; private set; } 
```

我经常使用的东西。

而你不能用字段做的事情（更强大的）是在接口中定义它们。假设您想要一个需要实现类具有特定属性的接口：

```
public interface MyInterface
{
    string MyProperty { get; }
} 
```

请注意，这里不需要设置器。完全取决于实现类来确定它们应该如何设置 MyProperty。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:12:54.790

这是一个非常小的示例，说明您可以使用字符串属性而不是简单地使用字符串。

假设您有一个名为的私有变量：

```
private string _name; 
```

现在假设您想让该字符串只读？换句话说，您无法更改该值。您可以使用以下内容：

```
public string Name 
{
    get { return _name; }
} 
```

它可以让您控制对该值的访问。或者，您可以拥有它，以便该变量只能写入执行以下操作：

```
public string Name
{
    set { _name = value; }
} 
```

现在，如果您将其放在一起，它将允许您设置值或简单地获取值。请参阅以下内容：

```
public string Name
{
    get { return _name; }
    set { _name = value; }
} 
```

您可能想知道这样做有什么意义，因为看起来您可以使用常规字符串做同样的事情，当然，但这控制了从不是从所述类派生的外部类对 _name 变量的直接访问。

现在，如果您想控制该值的设置方式怎么办？如果您想进行一些计算，或者您想为该值添加前缀或后缀怎么办？您执行以下操作：

```
public string Name
{
    get
    {
        return _name;
    }
    set
    {
        if (value.ToLower() == "bilbo")
            _name = "Bilbo Baggins";
    }
} 
```

现在，如果将类的 Name 属性设置为 bilbo，_name 的值将设置为 Bilbo Baggins，而如果将属性设置为 Amy，_name 变量将仅包含 amy。

您可以这样做以保证属性设置的任何值都自动为大写或小写，或者您可以对值或类似的东西进行一些验证。

我希望这能解释属性的用途以及它们如何有用而又不会使其过于复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:04:05.187

属性为您提供了更大的灵活性，尤其是在 .NET 中。C# 显示出对属性的偏见，因此请记住这一点。但是，作为一般规则，在获取或设置需要“处理”或伴随操作时使用访问器/修改器。使用字段来保存值。例如，

```
public class Name
{
  public string First;

  public string Last;

  public string Full{ get { return this.First + " " + this.Last; } }
} 
```

# python - 来自无限集合的 Python argparse 选择

> ID：13833566
> 
> 赞同：5
> 
> 时间：2012-12-12T05:45:09.347
> 
> 标签：python, math, iteration, containers, argparse

我有以下代码来创建一个容器，该容器假装其行为类似于所有素数的集合（实际上隐藏了一个记忆的蛮力素数测试）

```
import math

def is_prime(n):
    if n == 2 or n == 3:
        return True
    if n == 1 or n % 2 == 0:
        return False
    else:
        return all(n % i for i in xrange(3, int(1 + math.sqrt(n)), 2))

class Primes(object):

    def __init__(self):
        self.memo = {}

    def __contains__(self, n):
        if n not in self.memo:
            self.memo[n] = is_prime(n)
        return self.memo[n] 
```

到目前为止，这似乎有效：

```
>>> primes = Primes()
>>> 7 in primes
True
>>> 104729 in primes
True
>>> 100 in primes
False
>>> 100 not in primes
True 
```

但它不能很好地与`argparse`：

```
>>> import argparse as ap
>>> parser = ap.ArgumentParser()
>>> parser.add_argument('prime', type=int, choices=primes, metavar='p')
_StoreAction(option_strings=[], dest='prime', nargs=None, const=None, default=None, type=<type 'int'>, choices=<__main__.Primes object at 0x7f4e21783f10>, help=None, metavar='p')
>>> parser.parse_args(['7'])
Namespace(prime=7)
>>> parser.parse_args(['11'])
Namespace(prime=11)
>>> parser.parse_args(['12'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/argparse.py", line 1688, in parse_args
    args, argv = self.parse_known_args(args, namespace)
  File "/usr/lib/python2.7/argparse.py", line 1720, in parse_known_args
    namespace, args = self._parse_known_args(args, namespace)
  File "/usr/lib/python2.7/argparse.py", line 1929, in _parse_known_args
    stop_index = consume_positionals(start_index)
  File "/usr/lib/python2.7/argparse.py", line 1885, in consume_positionals
    take_action(action, args)
  File "/usr/lib/python2.7/argparse.py", line 1778, in take_action
    argument_values = self._get_values(action, argument_strings)
  File "/usr/lib/python2.7/argparse.py", line 2219, in _get_values
    self._check_value(action, value)
  File "/usr/lib/python2.7/argparse.py", line 2267, in _check_value
    tup = value, ', '.join(map(repr, action.choices))
TypeError: argument 2 to map() must support iteration 
```

文档只是[这么](http://docs.python.org/dev/library/argparse.html#choices)说

> 任何支持 in 运算符的对象都可以作为选择值传递，因此 dict 对象、set 对象、自定义容器等都被支持。

显然我不想迭代无限的素数“集合”。那么为什么要`argparse`尝试`map`我的素数呢？它不只需要`in`and`not in`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T05:56:15.223

您获得异常的来源非常清楚，请查看：

```
if action.choices is not None and value not in action.choices:
    tup = value, ', '.join(map(repr, action.choices))
    msg = _('invalid choice: %r (choose from %s)') % tup
    raise ArgumentError(action, msg) 
```

支票本身没问题。它试图打印出有用的错误消息，试图为您提供所有可能的选择。我想如果您将迭代器定义为仅返回具有`repr`字符串的`primes`内容，您可能会破解它来做正确的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T06:00:32.727

这是一个文档错误。这是[issue16468 ，由](https://bugs.python.org/issue16468)[PR 15566](https://github.com/python/cpython/pull/15566/files)于 2019 年 8 月修复。

编写的库要求`choices`参数不仅是容器，而且是可迭代的，它试图列出可用的选项，这对您的情况不起作用。你可以尝试通过给它一个`__iter__`只返回一些信息字符串的假来破解它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:15:07.603

`choices`用于可以枚举所有允许值（有限（小）集）的参数。文档应该更清楚。

`primes`是一个无限集。您可以设置`type`参数以提高非素数的 ValueError 。

# mysql - 将 XML 文件转换为 SQL 数据库的自动化方法？

> ID：13833568
> 
> 赞同：19
> 
> 时间：2012-12-12T05:45:22.340
> 
> 标签：mysql, xml, postgresql, schema

我们有一堆 XML 文件，遵循一个本质上是序列化数据库形式的模式：

```
<table1>
   <column1>value</column1>
   <column2>value</column2>
</table1>
<table1>
   <column1>another value</column1>
   <column2>another value</column2>
</table1>
... 
```

有没有一种非常简单的方法可以将其转换为 SQL 数据库？显然，我可以手动构建架构，识别所有表、字段等，然后编写脚本来导入它。我只是想知道是否有任何工具可以自动化部分或全部过程？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T10:06:57.853

对于 Mysql，请参阅[`LOAD XML`语法^(*文档*)](https://dev.mysql.com/doc/refman/5.5/en/load-xml.html)。

它应该无需对您提供的 XML 进行任何额外的 XML 转换即可工作，只需指定格式并在数据库中直接使用匹配的列名定义表：

```
LOAD XML LOCAL INFILE 'table1.xml'
    INTO TABLE table1
    ROWS IDENTIFIED BY '<table1>'; 
```

还有一个相关的问题：

*   [如何使用 XML_LOAD() 将 XML 文件导入 MySQL 数据库表；功能](https://stackoverflow.com/q/5491056/367456)

对于 Postgresql 我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:48:55.870

CodeProject 上有一个[项目](http://www.codeproject.com/Articles/61765/Using-XSLT-to-Generate-SQL-Script)，可以轻松地将 XML 文件转换为 SQL 脚本。它使用 XSLT。您也可以修改它以生成 DDL。

也请参阅这个问题：[Generating SQL using XML and XSLT](https://stackoverflow.com/questions/319159/generating-sql-using-xml-and-xslt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T09:00:53.310

如果有包含 2 个不同表的 XML 文件，则将：

```
LOAD XML LOCAL INFILE 'table1.xml' INTO TABLE table1 
LOAD XML LOCAL INFILE 'table1.xml' INTO TABLE table2 
```

工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T05:49:51.727

尝试这个

[http://www.ehow.com/how_6613143_convert-xml-code-sql.html](http://www.ehow.com/how_6613143_convert-xml-code-sql.html)

用于下载工具 [http://www.xml-converter.com/](http://www.xml-converter.com/)

# eclipse - 为什么将 project.apk 上传到设备模拟器需要这么长时间？

> ID：13833573
> 
> 赞同：0
> 
> 时间：2012-12-12T05:45:48.407
> 
> 标签：eclipse, performance, testing, android-emulator, launch

每次我从 ADT 运行项目以在虚拟 Android 设备上进行测试时，上传需要 90 多秒，而在设备上“安装”它需要 15 多秒。

为什么需要这么长时间？

我应该注意什么超时？（eclipse 控制台保持沉默。）

注意：project.apk 大小约为 5MB，开发机器上的计算资源充足（即 CPU 使用率约为 5-10%，磁盘队列长度约为 0.05，以及在“上传”和“安装”期间可用的几吉格空闲 RAM ）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:48:00.560

不是真正的解决方案，但在类似的问题中找到了解决方法：

[缓慢上传到正在运行的 Android 模拟器](https://stackoverflow.com/questions/7597309/slow-uploads-to-running-android-emulator)

看来，当 Android 模拟器空闲时，其网络连接的上限为**2 Mbps** ，当您通过单击和滑动唤醒它时，带宽神奇地增加到**10 Mbps**左右！（至少在我相当现代的系统上是这样。）

这显然对将大型应用程序上传到模拟器产生了影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T15:07:36.487

## 解决方案：

转到运行 -> 运行配置... -> 目标选项卡 -> 附加仿真器命令行选项。在那里添加：

```
-netspeed full -netdelay none 
```

完成此操作后，上传时间从 2 分钟缩短到 8 秒。

* * *

**编辑：** 我还发现退出 Skype 使我的模拟器上传速度更快。

# android - 使用评分栏时，如何使用自定义 ListView 将评分最高的项目显示到另一个活动中？

> ID：13833575
> 
> 赞同：3
> 
> 时间：2012-12-12T05:46:12.673
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我制作了一个 Android Rating Bar 程序来接受用户评分，计算总评分并将其显示在指标评分栏中。

现在我想在我的 Rating Bar 程序中添加另外两个功能：

1.  我想在 ListView 中使用我现有的评分栏
2.  其次，希望在 MyRatings 等其他活动中显示高到低评分项目

我的 Java 代码：-

```
public class InteractiveRatingBarActivity extends Activity implements
OnRatingBarChangeListener {
RatingBar getRatingBar;
RatingBar setRatingBar;
TextView countText;
int count;
float curRate;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    findViewsById();

    setRatingBar.setRating(curRate);
    getRatingBar.setOnRatingBarChangeListener(this);
}  

private void findViewsById() {
    getRatingBar = (RatingBar) findViewById(R.id.getRating);
    setRatingBar = (RatingBar) findViewById(R.id.setRating);
    countText = (TextView) findViewById(R.id.countText);
}

public void onRatingChanged(RatingBar rateBar, float rating,
        boolean fromUser) {
    DecimalFormat decimalFormat = new DecimalFormat("#.#");
    curRate = Float.valueOf(decimalFormat.format((curRate * count + rating)
            / ++count));
    Toast.makeText(InteractiveRatingBarActivity.this,
            "New Rating: " + curRate, Toast.LENGTH_SHORT).show();
    setRatingBar.setRating(curRate);
    countText.setText(count + " Ratings");
}
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RatingBar
    android:id="@+id/getRating"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:numStars="5"
    android:stepSize="1.0" />

<RatingBar
    android:id="@+id/setRating"
    style="?android:attr/ratingBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/getRating"
    android:isIndicator="true"
    android:numStars="5"
    android:stepSize="0.1" />

<TextView
    android:id="@+id/countText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/getRating"
    android:layout_toRightOf="@+id/setRating"
    android:paddingLeft="10dp" />
</RelativeLayout> 
```

# android - 用android中光标的值填充listview

> ID：13833577
> 
> 赞同：1
> 
> 时间：2012-12-12T05:46:30.400
> 
> 标签：android, sqlite, listview, cursor

我写了这段代码来填充`listview`游标中存在的东西。但是它不起作用并且应用程序关闭，我不知道该怎么办。请帮我。

```
public class current_cart extends Activity 
{
DBAdapter db=new DBAdapter(this);
protected void onCreate(Bundle savedInstanceState) {
    _Date=new Date();
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.current_cart);
    Lbl_Show=(TextView)this.findViewById(R.id.Lbl_Show_Date);
    this.btn_Remove=(Button)this.findViewById(R.id.Btn_Remove);

    try {

         db.createDataBase();

         } 
     catch (IOException ioe)
         {

         throw new Error("Unable to create database");

         }

         try 
         {

             db.open();

         }catch(SQLException sqle){

         throw sqle;

         }

    Cursor answers = db.f2();
    startManagingCursor(answers);

    ListView list=(ListView)findViewById(R.id.list);    

    String[] from = new String[] {"Cart_ID"};
    int[] to = new int[] {android.R.id.text1};
    @SuppressWarnings("deprecation")
    SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, answers, from, to);
    list.setAdapter(cursorAdapter);

    list.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
        {
          // When clicked, show a toast with the TextView text
         // setToast("Answer: " + ((TextView) view).getText());
        }
    });
}

} 
```

在 DBAdapter.java 中存在这个函数：

```
 public Cursor f2 ()
        {

             Cursor c=null;

c=db.rawQuery("SELECT Cart_ID",null);

             return c;

                  } 
```

这是我的日志猫

```
12-14 09:56:10.608: E/PhonePolicy(32): Could not preload class for phone policy: com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback
12-14 09:56:38.747: E/BatteryService(74): usbOnlinePath not found
12-14 09:56:38.747: E/BatteryService(74): batteryVoltagePath not found
12-14 09:56:38.747: E/BatteryService(74): batteryTemperaturePath not found
12-14 09:56:38.837: E/SurfaceFlinger(74): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
12-14 09:56:49.757: E/EventHub(74): could not get driver version for /dev/input/mouse0, Not a typewriter
12-14 09:56:49.757: E/EventHub(74): could not get driver version for /dev/input/mice, Not a typewriter
12-14 09:56:50.246: E/WifiService(74): Invoking mWifiStateMachine.setWifiEnabled
12-14 09:56:53.279: E/ThrottleService(74): Could not open GPS configuration file /etc/gps.conf
12-14 09:56:53.356: E/NetworkTimeUpdateService(74): Could not open GPS configuration file /etc/gps.conf
12-14 09:56:53.377: E/NetworkTimeUpdateService(74): NTP server address not found, not syncing to NTP time
12-14 09:56:53.987: E/logwrapper(145): executing /system/bin/tc failed: No such file or directory
12-14 09:56:54.096: E/logwrapper(146): executing /system/bin/tc failed: No such file or directory
12-14 09:56:54.237: E/logwrapper(147): executing /system/bin/tc failed: No such file or directory
12-14 09:57:07.460: E/SoundPool(74): error loading /system/media/audio/ui/Effect_Tick.ogg
12-14 09:57:07.467: E/SoundPool(74): error loading /system/media/audio/ui/Effect_Tick.ogg
12-14 09:57:07.467: E/SoundPool(74): error loading /system/media/audio/ui/Effect_Tick.ogg
12-14 09:57:07.606: E/SoundPool(74): error loading /system/media/audio/ui/Effect_Tick.ogg
12-14 09:57:07.646: E/SoundPool(74): error loading /system/media/audio/ui/Effect_Tick.ogg
12-14 09:57:07.707: E/SoundPool(74): error loading /system/media/audio/ui/KeypressStandard.ogg
12-14 09:57:07.707: E/SoundPool(74): error loading /system/media/audio/ui/KeypressSpacebar.ogg
12-14 09:57:07.737: E/SoundPool(74): error loading /system/media/audio/ui/KeypressDelete.ogg
12-14 09:57:07.737: E/SoundPool(74): error loading /system/media/audio/ui/KeypressReturn.ogg
12-14 09:57:28.825: E/ActivityManager(74): Load: 6.15 / 1.57 / 0.53
12-14 09:57:28.825: E/ActivityManager(74): CPU usage from 467ms to -11573ms ago:
12-14 09:57:28.825: E/ActivityManager(74):   47% 74/system_server: 31% user + 16% kernel / faults: 5283 minor 2 major
12-14 09:57:28.825: E/ActivityManager(74):   10% 85/bootanimation: 8.8% user + 1.8% kernel
12-14 09:57:28.825: E/ActivityManager(74):   8.5% 200/zygote: 7.3% user + 1.1% kernel / faults: 891 minor
12-14 09:57:28.825: E/ActivityManager(74):   6.7% 124/com.android.systemui: 6.1% user + 0.5% kernel / faults: 519 minor 3 major
12-14 09:57:28.825: E/ActivityManager(74):   5.6% 151/com.android.launcher: 4.8% user + 0.8% kernel / faults: 995 minor 5 major
12-14 09:57:28.825: E/ActivityManager(74):   4.7% 139/zygote: 2.8% user + 1.9% kernel / faults: 425 minor
12-14 09:57:28.825: E/ActivityManager(74):   2.3% 218/app_process: 1.9% user + 0.3% kernel / faults: 269 minor 1 major
12-14 09:57:28.825: E/ActivityManager(74):   1.5% 26/mmcqd: 0% user + 1.5% kernel
12-14 09:57:28.825: E/ActivityManager(74):   1.2% 41/adbd: 0% user + 1.1% kernel
12-14 09:57:28.825: E/ActivityManager(74):   0.2% 32/zygote: 0% user + 0.2% kernel / faults: 32 minor
12-14 09:57:28.825: E/ActivityManager(74):   0.4% 162/android.process.media: 0.3% user + 0% kernel / faults: 30 minor
12-14 09:57:28.825: E/ActivityManager(74):   0.2% 39/rild: 0.1% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   0.2% 211/fsck_msdos: 0% user + 0.2% kernel / faults: 320 minor
12-14 09:57:28.825: E/ActivityManager(74):   0% 28/servicemanager: 0% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   0.1% 133/jp.co.omronsoft.openwnn: 0.1% user + 0% kernel / faults: 4 minor
12-14 09:57:28.825: E/ActivityManager(74):   0% 1//init: 0% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   0% 69/logcat: 0% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):  +0% 228/com.android.defcontainer: 0% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):  +0% 234/com.android.mms: 0% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74): 100% TOTAL: 68% user + 30% kernel + 0.7% irq + 0.1% softirq
12-14 09:57:28.825: E/ActivityManager(74): CPU usage from 7931ms to 10113ms later:
12-14 09:57:28.825: E/ActivityManager(74):   39% 74/system_server: 20% user + 18% kernel / faults: 965 minor
12-14 09:57:28.825: E/ActivityManager(74):     8.3% 88/ActivityManager: 3.2% user + 5.1% kernel
12-14 09:57:28.825: E/ActivityManager(74):     6% 250/Binder Thread #: 0.9% user + 5.1% kernel
12-14 09:57:28.825: E/ActivityManager(74):     5.1% 82/SurfaceFlinger: 3.7% user + 1.3% kernel
12-14 09:57:28.825: E/ActivityManager(74):     4.1% 103/WindowManagerPo: 4.1% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     1.3% 191/Binder Thread #: 1.3% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     1.3% 219/Binder Thread #: 0.9% user + 0.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.9% 80/Binder Thread #: 0.4% user + 0.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.9% 173/Binder Thread #: 0% user + 0.9% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.9% 249/Binder Thread #: 0.9% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 74/system_server: 0% user + 0.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 79/Compiler: 0.4% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 81/Binder Thread #: 0% user + 0.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 87/er.ServerThread: 0% user + 0.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 93/PackageManager: 0.4% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 225/Binder Thread #: 0% user + 0.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 251/Binder Thread #: 0.4% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   11% 85/bootanimation: 8.5% user + 2.6% kernel
12-14 09:57:28.825: E/ActivityManager(74):     9.6% 91/BootAnimation: 7.4% user + 2.1% kernel
12-14 09:57:28.825: E/ActivityManager(74):   12% 200/android.process.acore: 11% user + 0.6% kernel / faults: 40 minor
12-14 09:57:28.825: E/ActivityManager(74):     9.1% 215/Binder Thread #: 7.9% user + 1.2% kernel
12-14 09:57:28.825: E/ActivityManager(74):     1.2% 200/d.process.acore: 1.2% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.6% 206/Compiler: 0.6% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   10% 124/com.android.systemui: 10% user + 0% kernel / faults: 72 minor
12-14 09:57:28.825: E/ActivityManager(74):     8.8% 124/ndroid.systemui: 8.8% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.5% 130/Compiler: 0% user + 0.5% kernel
12-14 09:57:28.825: E/ActivityManager(74):   10% 151/com.android.launcher: 10% user + 0% kernel / faults: 107 minor 1 major
12-14 09:57:28.825: E/ActivityManager(74):     9.4% 151/ndroid.launcher: 9.4% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     1.1% 154/HeapWorker: 1.1% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   9.3% 139/com.android.phone: 7.5% user + 1.7% kernel / faults: 51 minor
12-14 09:57:28.825: E/ActivityManager(74):     8.7% 139/m.android.phone: 6.9% user + 1.7% kernel
12-14 09:57:28.825: E/ActivityManager(74):     4% 184/RILReceiver: 4% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):     1.1% 183/RILSender: 0.5% user + 0.5% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.5% 150/Compiler: 0% user + 0.5% kernel
12-14 09:57:28.825: E/ActivityManager(74):   7% 234/com.android.mms: 3.2% user + 3.8% kernel / faults: 430 minor 6 major
12-14 09:57:28.825: E/ActivityManager(74):     8.9% 234/com.android.mms: 4.4% user + 4.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.6% 243/Compiler: 0% user + 0.6% kernel
12-14 09:57:28.825: E/ActivityManager(74):   0.5% 39/rild: 0.3% user + 0.1% kernel
12-14 09:57:28.825: E/ActivityManager(74):     1% 58/rild: 0.7% user + 0.3% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.3% 60/rild: 0.3% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   0.9% 41/adbd: 0.4% user + 0.4% kernel
12-14 09:57:28.825: E/ActivityManager(74):     0.4% 41/adbd: 0.4% user + 0% kernel
12-14 09:57:28.825: E/ActivityManager(74):   0.6% 228/com.android.defcontainer: 0% user + 0.6% kernel / faults: 30 minor
12-14 09:57:28.825: E/ActivityManager(74):     0.6% 245/Binder Thread #: 0% user + 0.6% kernel
12-14 09:57:28.825: E/ActivityManager(74): 100% TOTAL: 72% user + 27% kernel
12-14 09:57:29.859: E/InputDispatcher(74): channel '409e7970 NotificationPanel (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
12-14 09:57:29.865: E/InputDispatcher(74): channel '409e7970 NotificationPanel (server)' ~ Channel is unrecoverably broken and will be disposed!
12-14 09:57:30.035: E/InputDispatcher(74): Received spurious receive callback for unknown input channel.  fd=170, events=0x8
12-14 09:57:30.035: E/InputDispatcher(74): Received spurious receive callback for unknown input channel.  fd=174, events=0x8
12-14 09:57:30.035: E/InputDispatcher(74): Received spurious receive callback for unknown input channel.  fd=188, events=0x8
12-14 09:57:38.786: E/TelephonyManager(74): Hidden constructor called more than once per process!
12-14 09:57:38.786: E/TelephonyManager(74): Original: android, new: android
12-14 09:57:39.474: E/ActivityManager(74): Start proc com.android.email for broadcast com.android.email/.service.EmailBroadcastReceiver: pid=302 uid=10013 gids={3003, 1015}Load: 8.44 / 2.21 / 0.75
12-14 09:57:39.474: E/ActivityManager(74): CPU usage from 2651ms to -8566ms ago:
12-14 09:57:39.474: E/ActivityManager(74):   41% 74/system_server: 28% user + 13% kernel / faults: 2614 minor
12-14 09:57:39.474: E/ActivityManager(74):   13% 151/com.android.launcher: 12% user + 1.6% kernel / faults: 772 minor 4 major
12-14 09:57:39.474: E/ActivityManager(74):   10% 139/zygote: 9.2% user + 1.5% kernel / faults: 542 minor
12-14 09:57:39.474: E/ActivityManager(74):   10% 85/bootanimation: 9.1% user + 1.2% kernel
12-14 09:57:39.474: E/ActivityManager(74):   4.6% 32/zygote: 3.5% user + 1% kernel / faults: 258 minor
12-14 09:57:39.474: E/ActivityManager(74):   2.5% 234/com.android.mms: 1.6% user + 0.9% kernel / faults: 561 minor 2 major
12-14 09:57:39.474: E/ActivityManager(74):   1.7% 200/zygote: 1.4% user + 0.3% kernel / faults: 94 minor
12-14 09:57:39.474: E/ActivityManager(74):   1.6% 41/adbd: 0.1% user + 1.4% kernel / faults: 1 minor
12-14 09:57:39.474: E/ActivityManager(74):   0.3% 69/logcat: 0% user + 0.2% kernel
12-14 09:57:39.474: E/ActivityManager(74):   0.1% 211/fsck_msdos: 0.1% user + 0% kernel / faults: 106 minor
12-14 09:57:39.474: E/ActivityManager(74):   0% 1//init: 0% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):   0% 4/events/0: 0% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):  +0% 272/com.android.systemui: 0% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):  +0% 287/com.android.deskclock: 0% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):  +0% 302/zygote: 0% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74): 100% TOTAL: 73% user + 26% kernel + 0.5% irq + 0.2% softirq
12-14 09:57:39.474: E/ActivityManager(74): CPU usage from 7161ms to 8260ms later:
12-14 09:57:39.474: E/ActivityManager(74):   62% 74/system_server: 49% user + 13% kernel / faults: 94 minor
12-14 09:57:39.474: E/ActivityManager(74):     17% 102/WindowManager: 17% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     16% 88/ActivityManager: 8.4% user + 7.5% kernel
12-14 09:57:39.474: E/ActivityManager(74):     5.6% 82/SurfaceFlinger: 4.7% user + 0.9% kernel
12-14 09:57:39.474: E/ActivityManager(74):     4.7% 107/ConnectivitySer: 1.8% user + 2.8% kernel
12-14 09:57:39.474: E/ActivityManager(74):     3.7% 75/HeapWorker: 1.8% user + 1.8% kernel
12-14 09:57:39.474: E/ActivityManager(74):     3.7% 103/WindowManagerPo: 3.7% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     1.8% 79/Compiler: 0.9% user + 0.9% kernel
12-14 09:57:39.474: E/ActivityManager(74):     1.8% 251/Binder Thread #: 1.8% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     0.9% 80/Binder Thread #: 0.9% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     0.9% 173/Binder Thread #: 0.9% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     0.9% 191/Binder Thread #: 0.9% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     0.9% 250/Binder Thread #: 0% user + 0.9% kernel
12-14 09:57:39.474: E/ActivityManager(74):   12% 287/com.android.deskclock: 7.8% user + 4.4% kernel / faults: 213 minor
12-14 09:57:39.474: E/ActivityManager(74):     11% 299/AsyncHandler: 7.8% user + 3.3% kernel
12-14 09:57:39.474: E/ActivityManager(74):   8.3% 85/bootanimation: 8.3% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     13% 91/BootAnimation: 13% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):   4.1% 139/com.android.phone: 3.1% user + 1% kernel / faults: 6 minor
12-14 09:57:39.474: E/ActivityManager(74):     3.1% 139/m.android.phone: 3.1% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     1% 264/Binder Thread #: 1% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):   2.8% 41/adbd: 0.9% user + 1.8% kernel
12-14 09:57:39.474: E/ActivityManager(74):     0.9% 41/adbd: 0.9% user + 0% kernel
12-14 09:57:39.474: E/ActivityManager(74):     0.9% 65/adbd: 0% user + 0.9% kernel
12-14 09:57:39.474: E/ActivityManager(74):   1.9% 32/zygote: 0% user + 1.9% kernel / faults: 7 minor
12-14 09:57:39.474: E/ActivityManager(74): 100% TOTAL: 80% user + 19% kernel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:54:34.613

你应该总是发布你的 LogCat 错误，但我马上就发现了一个问题：

```
public class CurrentCart extends Activity 
{
    DBAdapter db;
    protected void onCreate(Bundle savedInstanceState) {
        db=new DBAdapter(this);
        ... 
```

之前不能`this`在 Activity（或 Context 的其他子类）中引用`onCreate()`。

* * *

**另外**
LogCat 不直接引用您的应用程序...将捕获异常的方式更改为：

```
try {
    db.createDataBase();
    db.open();
} 
catch (Exception e) {
    e.printStackTrace();
} 
```

并查看您的 LogCat 中是否出现了更具体的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:31:28.447

`SELECT CartID where CartID`语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:04:32.410

是否设置了正确的 ID `ListView`？您可以检查布局文件。`android:id="@+id/list`控制中会有一个`ListView`。如果不是，则`ListView`您的代码中的 为空，并且应用程序将强制关闭。

# php - 从字符串中获取缩写

> ID：13833579
> 
> 赞同：0
> 
> 时间：2012-12-12T05:46:41.030
> 
> 标签：php, phpmyadmin

我将如何获得字符串的accroyn字母

例如我有一个字符串

“Location1 Location2 Wall21”或可能有“loc loc wal2012”；

我需要输出看起来像

loc1loc2wal21 和 loclocwal2012

表示一个单词的前 3 个字母和该字符串的所有数字单词

我用这个

```
echo preg_replace('~\b(\w{3})|.~', '$1', $s); 
```

但它只给出 3 个单词，而不是所有数字字符。

AnyBody 知道如何解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:48:37.263

然后只包括字母，并取出`|.`：

```
echo preg_replace('~\b(\p{L}{3})\p{L}*|\s~', '$1', $s); 
```

[这是一个演示。](http://codepad.viper-7.com/URFTry)

# jasper-reports - 为什么我的碧玉报告值只在第一页？

> ID：13833580
> 
> 赞同：0
> 
> 时间：2012-12-12T05:46:41.610
> 
> 标签：jasper-reports

我是碧玉报告的新手。我对 jasper 报告有疑问。查询的值结果必须在第二页，而不是在第一页过于拥挤，但我不能让它们进入下一页。我的意思是它们在第一页就相互溢出。没有人想要另一个页面。：（ 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:21:51.800

您必须将所有文本字段保留在“摘要带”中才能从查询中获取所有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:45:42.780

您没有提供代码。我的猜测是位置类型未设置为浮动。转到溢出的元素的属性然后设置

```
Position Type : Float 
```

# android - 获取 ActionBar 的高度

> ID：13833582
> 
> 赞同：13
> 
> 时间：2012-12-12T05:46:56.507
> 
> 标签：android

我在我的应用程序中使用 Actionbar。
我希望以编程方式设置 ActionBar 的高度，因此我正在使用：

```
ActionBar.getHeight(); 
```

但我得到的高度值为 0。那么如何获取 ActionBar 的高度呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T09:54:31.970

我发现`ActionBar.getHeight()`
如果有人面临同样的问题，那么[这个](https://stackoverflow.com/a/13216807/1186689)链接很有用。

> 如果您想明确控制 ActionBar 的大小，@birdy 的答案是一个选项，但有一种方法可以在不锁定我在支持文档中找到的大小的情况下将其拉起。这有点尴尬，但它对我有用。您将需要一个上下文，此示例在 Activity 中有效。〜[安东尼](https://stackoverflow.com/users/650322/anthony)

```
// Calculate ActionBar's height 
TypedValue tv = new TypedValue(); 
if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true)) {
    actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics()); 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-25T10:39:20.823

下面的代码也会有所帮助。您可能需要将 getContext() 更改为此

```
final TypedArray styledAttributes = getContext().getTheme().obtainStyledAttributes(
                    new int[] { android.R.attr.actionBarSize });
mActionBarSize = (int) styledAttributes.getDimension(0, 0);
styledAttributes.recycle(); 
```

答案是从这个问题复制[的 ActionBar 的大小（以像素为单位）是多少？](https://stackoverflow.com/questions/7165830/what-is-the-size-of-actionbar-in-pixels)

对于较新版本的 Android，您只需执行以下操作：

```
getActionBar().getHeight() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-26T11:55:20.793

查找操作栏高度的一种简单方法是使用 Activity 的 onPrepareOptionMenu 方法。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
           ....
           int actionBarHeight = getActionBar().getHeight());
           .....
    } 
```

# android - Android 定时器和 UI 线程

> ID：13833586
> 
> 赞同：1
> 
> 时间：2012-12-12T05:47:15.980
> 
> 标签：android, timer, inflate

我像这样给 TableRow 充气：

```
final TableRow tr1 = (TableRow)LayoutInflater.from(this).inflate(R.layout.attrib_row_survey, null);
tr1.setOnTouchListener(this);
tl1.addView(tr1); 
```

这就是我做计数器的方式：

```
new CountDownTimer(30000, 1000) {

                 public void onTick(long millisUntilFinished) {
                     ((TextView)tr1.findViewById(R.id.textView2)).setText("Seconds Remaining: " + millisUntilFinished / 1000);
                 }

                 public void onFinish() {
                     ((TextView)tr1.findViewById(R.id.textView2)).setText("DONE");
                 }
              }.start(); 
```

问题是，当我运行这个计时器并在行中显示它时，用户界面非常慢并且计时器滞后。当我在 onTouchListener() 中执行 view.setBackGroundColor(Color.BLACK) 并单击它时，它会滞后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:56:08.487

```
protected static void startTimer() {
    isTimerRunning = true; 
    timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {
            elapsedTime += 1; //increase every sec
            mHandler.obtainMessage(1).sendToTarget();

        }
    }, 0, 1000);
}

   public Handler mHandler = new Handler() {

     public void handleMessage(Message msg) {
           StopWatch.time.setText(formatIntoHHMMSS(elapsedTime)); //this is the textview
     }
    } 
```

# android - 安卓：adapter.notifydatasetchanged()

> ID：13833587
> 
> 赞同：0
> 
> 时间：2012-12-12T05:47:17.113
> 
> 标签：android, adapter, notify

我想创建一个动态 GridView，当我单击我的选项时，我刷新我的 asyncTask，然后我从 postExecute 获取所有结果，并通知我的适配器刷新！但我不工作请帮帮我！

```
GridView grid;
ImageAdapter adapter;

ArrayList<String> arrayThumbs = new ArrayList<String>();
ArrayList<String> arrayBig_image = new ArrayList<String>();
ArrayList<String> arrayAuthor = new ArrayList<String>();
ArrayList<String> arrayDescription = new ArrayList<String>();
ArrayList<String> arrayDate = new ArrayList<String>();

String[] arraymThumbs;
String[] arrayBimages;
String[] arrayauthor;
String[] arraydescription;
String[] arraydate;

final static String TAG_ITEM = "img_list";
final static String TAG_THUMBNAILS = "thumbnail";
final static String TAG_BIG_IMAGE = "big_image";
final static String TAG_AUTHOR = "author";
final static String TAG_DESCRIPTION = "description";
final static String TAG_DATE = "event_date";

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

        backTask();

        grid = (GridView) findViewById(R.id.grid);
        grid.setAdapter(adapter);
        grid.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapterview, View view,  int position, long id) {
                Intent intent = new Intent(MainActivity.this, ImageGallery.class);
                intent.putExtra("position", position);
                intent.putExtra("big_images", arrayBimages);
                intent.putExtra("author", arrayauthor);
                intent.putExtra("description", arraydescription);
                intent.putExtra("date", arraydate);
                startActivity(intent);
            }
        }); 

}

public boolean onCreateOptionsMenu(Menu menu){
    getMenuInflater().inflate(R.menu.main, menu);
    return super.onCreateOptionsMenu(menu);

}

public boolean onOptionsItemSelected(MenuItem item){        
    switch (item.getItemId()) {
    case R.id.refresh:
        backTask();
        break;
    }
    return super.onOptionsItemSelected(item);
}

public void backTask(){

    BackTask task = new BackTask();
    task.execute();

    try {
        JSONObject result = task.get();
        if(result != null){
        JSONArray jarray = result.getJSONArray(TAG_ITEM);
        for(int i = 0; i < jarray.length(); i++){
            JSONObject jrss = jarray.getJSONObject(i);
            arrayThumbs.add(jrss.getString(TAG_THUMBNAILS));
            arrayBig_image.add(jrss.getString(TAG_BIG_IMAGE));
            arrayAuthor.add(jrss.getString(TAG_AUTHOR));
            arrayDescription.add(jrss.getString(TAG_DESCRIPTION));
            arrayDate.add(jrss.getString(TAG_DATE));

            Log.d("LLLLLOOOOGGGG", jrss.getString("author")+"\n");
        }}
        else{
            AlertDialog.Builder alertNetworkError = new AlertDialog.Builder(this);
            alertNetworkError.setMessage("нет подключения к интернету");
            alertNetworkError.setNegativeButton("Выйти", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    finish();                           
                }                       
            });
            alertNetworkError.create();
            alertNetworkError.show();
        }
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    arraymThumbs = new String[arrayThumbs.size()];
    arraymThumbs = arrayThumbs.toArray(arraymThumbs);

    arrayBimages = new String[arrayBig_image.size()];
    arrayBimages = arrayBig_image.toArray(arrayBimages);

    arrayauthor = new String[arrayAuthor.size()];
    arrayauthor = arrayAuthor.toArray(arrayauthor);

    arraydescription = new String[arrayDescription.size()];
    arraydescription = arrayDescription.toArray(arraydescription);

    arraydate = new String[arrayDate.size()];
    arraydate = arrayDate.toArray(arraydate);
    adapter = new ImageAdapter(MainActivity.this, arraymThumbs);
    adapter.notifyDataSetChanged();

} 
```

**我的图像适配器**在这里我从 asyncTask 获取所有结果并将拇指图像打印到我的 GridView

```
public class ImageAdapter extends BaseAdapter {

    public Context mContext;
    String[] mThumbs;
    public LayoutInflater inflater;
    public DisplayImageOptions options;
    public ImageLoader imageLoader;

    public ImageAdapter (Context c, String[] arrayhumbss){
        mContext = c;
        inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mThumbs = arrayhumbss;
        options  = new DisplayImageOptions.Builder()
                .showStubImage(R.drawable.ic_contact_picture_2)
                .showImageForEmptyUri(R.drawable.ic_launcher)
                .cacheInMemory()
                .cacheOnDisc()
                .bitmapConfig(Bitmap.Config.RGB_565)
                .build();
        imageLoader = ImageLoader.getInstance();
        imageLoader.init(ImageLoaderConfiguration.createDefault(c));
    }

    @Override
    public int getCount() {
        return mThumbs.length;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {     
        final ImageView imageView;
        if (convertView == null) {
            imageView = (ImageView) inflater.inflate(R.layout.grid_item, parent, false);
        } else {
            imageView = (ImageView) convertView;
        }

        imageLoader.displayImage(mThumbs[position], imageView, options);

        return imageView;
    }

} 
```

**这是我的任务**

```
public class BackTask extends AsyncTask<String, Void, JSONObject>{  

@Override
protected JSONObject doInBackground(String... params) {
    InputStream ips = null; 
    JSONObject jsonObj = null;
    String json = "";       
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(new HttpPost("http://192.168.1.179/lenta/image.js"));                
        ips = response.getEntity().getContent();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader bufff = new BufferedReader(new InputStreamReader(ips, "UTF-8"));
        StringBuilder sb = new StringBuilder();
        String line = null;

        while ((line = bufff.readLine()) != null){
            sb.append(line + "\n");                 
        }
        ips.close();
        json = sb.toString();       
    } catch (Exception e) {
        e.printStackTrace();
    }

    try {
        jsonObj = new JSONObject(json);
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return jsonObj;     

    }

    @Override
    protected void onPostExecute(JSONObject result){
        super.onPostExecute(result);

        } 
```

}

在这里我从 url 处理我的 json，在 MainActivity 我得到这个表单 task.get()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:17:29.820

`grid.setAdapter(adapter)`在此行之后添加

```
 adapter = new ImageAdapter(MainActivity.this, arraymThumbs); 
```

希望这能解决你的问题。

编辑： PS 看来您需要阅读一些内容，因为我认为您并不完全了解适配器是什么以及如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:49:50.393

用这个 ：

```
adapter = new ImageAdapter(YourActivity.this, arraymThumbs); 
myGridView.setAdapter(adapter); 
```

希望这对您有所帮助。

谢谢。

# java - 乔达时间 DateTimeZone

> ID：13833588
> 
> 赞同：1
> 
> 时间：2012-12-12T05:47:27.340
> 
> 标签：java, timezone, jodatime

我正在浏览[joda 网站上的 TimeZone 页面，](http://joda-time.sourceforge.net/timezones.html)我遇到了这个

```
-05:00  EST   
-05:00  EST5EDT   
-05:00  Etc/GMT+5 
```

我只是想知道这是什么`EST5EDT`意思，我通常使用`EST`所以只是想知道它。

在发布问题之前，我已经对其进行了搜索，但一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-21T20:52:18.873

EST 是“东部标准时间”，在美国东部和其他经度相近的地方观察到的时间，不考虑“夏令时”或“夏令时”。EST 始终是 UTC-5 小时。

EST5EDT 是在美国东部地区使用 1966 年统一时间法案制定的“夏令时”规则观察到的时间，并从那时起由美国政府进行了调整。对于 1966 年统一时间法案之前的任何日期，不遵守 DST。

此外，在 1966 年统一时间法案之后的所有日期，时区 America/New_York 与 EST5EDT 相同。在此之前，America/New_York 使用在纽约市遵守的夏令时规则。如果您回溯到足够远，America/New_York 时区将为您提供在建立常规时区之前纽约市的民用时间，从历史记录中可以确定尽可能近的时间。

时区 America/New_York 是指定现代美国东部时区的首选方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T06:24:59.653

EST - 东部标准时间，没有日光。EDT - 东部标准时间和夏令时

这是使用的 TimeZone 的短 id。

EST5EDT 表示 EST 或 EDT ；以小时为单位的偏移值将相同，即 -5 小时。

# sql-server - SQL查询：从两个表中获取产品数据

> ID：13833611
> 
> 赞同：1
> 
> 时间：2012-12-12T05:49:16.027
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 中有两个表。第一个是`product`，另一个是`Productimage`。

在`ProductImage`中，我可以为单个产品提供多个图像。

现在我想要**所有**产品，每个产品**只有一个**图像。所以请帮我写这样的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:51:54.410

```
select p.prodid,max(i.image) from product p inner join Productimage i
on p.prodid=i.prodid
group by p.prodid 
```

或者

```
select prodid,image from (
select p.prodid,i.image,row_number() over (order by p.prodid partition by p.prodid) as rn 
from product p inner join Productimage i
on p.prodid=i.prodid) a where a.rn=1 
```

# c# - 在服务器上均匀上传文件

> ID：13833614
> 
> 赞同：1
> 
> 时间：2012-12-12T05:49:48.493
> 
> 标签：c#, asp.net, mysql, file-upload, distributed

用户会将文件上传到我的网站，我需要将它们均匀地分布在多台服务器上，而且我需要在 DB 中有一个列，说明特定文件上传到哪个服务器。

所以这是我的设计。

1.  有服务器名称的枚举，即 server1、server2、server3。
2.  从数据库中获取最后上传的服务器名称
3.  如果上次上传的服务器是 server1，那么当前文件应该上传到 server2 并更新 DB，如果上次上传的服务器是 server3\，那么当前文件应该上传到 server1 并更新 DB

应用程序和数据库目前托管在单个服务器上，但将来我们将转向负载平衡。

让我知道除此之外是否有任何最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:59:07.977

您的解决方案应该取决于您的客户如何使用它。我将简要介绍一下我以前是如何做到这一点的。

*   轮询 DNS（将多个 IP 地址分配给同一个域）
*   基于 DNS 循环获取流量的多个 Web 服务器
*   然后，每个 Web 服务器都有自己的专用 SQL 服务器。
*   SQL 服务器使用复制来保持数据同步。
*   用于文件上传的单一存储服务器。（除非文件上传是我怀疑你需要>1的主要功能）

优点：非常容易扩展，直到您遇到大量流量，此时您需要重新考虑 SQL 部分。

购买硬件时，您可以将钱花在某些领域，专注于成为文件服务器/SQL 或 Web 服务器

缺点：这并没有提供任何真正的冗余。由于分层方法，可以说使情况变得更糟。这可以通过一些托管 DNS 解决，但这仍然不是一个完美的方法，我知道一些系统管理员对托管 DNS 的想法感到畏缩。

# mysql - 数据应根据查找表进行替换

> ID：13833622
> 
> 赞同：0
> 
> 时间：2012-12-12T05:50:16.490
> 
> 标签：mysql, sql

以下是我用于测试和构建查询的 sqlfiddle：

[http://sqlfiddle.com/#!2/975c6/1](http://sqlfiddle.com/#!2/975c6/1)

我一直在尝试做的是检测 Table1 列 ADRES `house# 240 st. #76 坎特。road Chicago 包含查找表中错误列中存在的任何值，应将其替换为正确的列值。

表格1：

```
用户名 | 地址
约翰 | 房子# 240 st。#76 坎特。芝加哥路

```

查找表：

```
错误 | 对
房子#HNO

```

例如：`house# 240 st. # 76 Cantt. road Chicago`（house# 是错误的，所以它应该被 HNO 替换）并更新`Table 1`并将地址设置为

```
约翰 | 硝酸 240 st。#76 坎特。芝加哥路

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:03:10.793

如果要更新字段，

```
 UPDATE table1 a CROSS JOIN lookup b
 SET    a.ADRES = REPLACE(a.ADRES, b.`WRONG`, b.`RIGHT`)
 WHERE  a.ADRES LIKE CONCAT('%', b.`WRONG`, '%') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/2fb2a/2)

但如果你只想投影替换的值，

```
 SELECT  a.Username, REPLACE(a.ADRES, b.`WRONG`, b.`RIGHT`)
 FROM    table1 a CROSS JOIN lookup b
 WHERE   a.ADRES LIKE CONCAT('%', b.`WRONG`, '%') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/39ff2/1)

# html - IE 8 - 此操作的源 HTML 无效

> ID：13833623
> 
> 赞同：1
> 
> 时间：2012-12-12T05:50:20.527
> 
> 标签：html, internet-explorer, extjs

出什么问题了

```
el.insertAdjacentHTML(hashVal[0], html); 
```

其中 html 是`"<a title=\"\">1</a>"`并且`hashVal[0]`是“afterBegin”。

这与评级功能有关。我认为由于这个错误，在 ie 8 中没有显示评级星。其他浏览器都可以。我在下面给出了完整的代码流程。我正在使用 extjs。

```
 var starLink = star.createChild({
                tag: 'a',
                html: this.values[i],
                title: this.showTitles ? this.titles[i] : ''
            }); 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////

```
createChild : function(config, insertBefore, returnDom) {
         config = config || {tag:'div'};
         if (insertBefore) {
            return Ext.DomHelper.insertBefore(insertBefore, config, returnDom !== true);
         }
         else {
            return Ext.DomHelper[!this.dom.firstChild ? 'insertFirst' : 'append'](this.dom, config, returnDom !== true);
         }
    }, 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////

```
insertFirst : function(el, o, returnElement){
      return doInsert(el, o, returnElement, afterbegin, 'firstChild');
}, 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////

```
function doInsert(el, o, returnElement, pos, sibling, append){
        el = Ext.getDom(el);
        var newNode;
        if (pub.useDom) {
            newNode = createDom(o, null);
            if (append) {
                el.appendChild(newNode);
            } else {
                (sibling == 'firstChild' ? el : el.parentNode).insertBefore(newNode, el[sibling] || el);
            }
        } else {
            newNode = Ext.DomHelper.insertHtml(pos, el, Ext.DomHelper.createHtml(o));
        }
        return returnElement ? Ext.get(newNode, true) : newNode;
    } 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////

```
function createHtml(o){
        var b = '',
            attr,
            val,
            key,
            cn,
            i;

        if(typeof o == "string"){
            b = o;
        } else if (Ext.isArray(o)) {
            for (i=0; i < o.length; i++) {
                if(o[i]) {
                    b += createHtml(o[i]);
                }
            }
        } else {
            b += '<' + (o.tag = o.tag || 'div');
            for (attr in o) {
                val = o[attr];
                if(!confRe.test(attr)){
                    if (typeof val == "object") {
                        b += ' ' + attr + '="';
                        for (key in val) {
                            b += key + ':' + val[key] + ';';
                        }
                        b += '"';
                    }else{
                        b += ' ' + ({cls : 'class', htmlFor : 'for'}[attr] || attr) + '="' + val + '"';
                    }
                }
            }

            if (emptyTags.test(o.tag)) {
                b += '/>';
            } else {
                b += '>';
                if ((cn = o.children || o.cn)) {
                    b += createHtml(cn);
                } else if(o.html){
                    b += o.html;
                }
                b += '</' + o.tag + '>';
            }
        }
        return b;
    } 
```

///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// //////////////

```
 insertHtml : function(where, el, html){
            var hash = {},
                hashVal,
                range,
                rangeEl,
                setStart,
                frag,
                rs;

            where = where.toLowerCase();

            hash[beforebegin] = ['beforeBegin', 'previousSibling'];
            hash[afterend] = ['afterEnd', 'nextSibling'];

            if (el.insertAdjacentHTML) {
                if(tableRe.test(el.tagName) && (rs = insertIntoTable(el.tagName.toLowerCase(), where, el, html))){
                    return rs;
                }

                hash[afterbegin] = ['afterBegin', 'firstChild'];
                hash[beforeend] = ['beforeEnd', 'lastChild'];
                if ((hashVal = hash[where])) {
                    el.insertAdjacentHTML(hashVal[0], html);
                    return el[hashVal[1]];
                }

            } else { 
```

# ios - 如何在目标c iphone中的另一个字符串中附加一个字符串

> ID：13833626
> 
> 赞同：3
> 
> 时间：2012-12-12T05:50:26.347
> 
> 标签：ios, objective-c, cocoa-touch

我正在处理包含带有 jpg、png 和 gif 扩展名的图像的图像数组。我需要在扩展之前将字符串 @"-Add" 附加到数组中的每个图像。我怎样才能实现这一点。例如：我有一个图像 DSC004.jpg，我想附加字符串“-Add”，这样我的图像名称就变成了 DSC004-Add.jpg.?????

我想删除扩展名，附加所需的字符串，然后再次附加扩展名。但是我的图像数组的每个图像名称都有不同的扩展名。PLs帮助我

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T06:01:26.837

最完整和通用的方法，但不是最简单的，是这样的：

```
NSString *filename = @"DSC004.jpg";
NSString *ext = [filename pathExtension];
NSString *basename = [filename stringByDeletingPathExtension];
NSString *updated = [basename stringByAppendingString:@"-Add"];
NSString *finalName = [updated stringByAppendingPathExtension:ext]; 
```

此方法适用于完整路径名或文件名以及名称中包含多个句点的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:09:49.340

```
NSString *str = @"ajdgl.jpg";
NSArray *arr = [str componentsSeparatedByString:@"."];
NSString *newStr  = [NSString stringWithFormat:@"%@-add%@",[arr objectAtIndex:0],[arr objectAtIndex:1]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T06:19:36.393

```
 NSString *str = @"ajdgl.jpg";
        NSArray *array = [str componentsSeparatedByString:@"."];
        NSString *newStr;
        for (int i=0; i<[array count]-1; i++) {
            newStr = [NSString stringWithFormat:@"%@.%@",newStr,[array objectAtIndex:i]];
        }
        NSString *UpdatedName  = [NSString stringWithFormat:@"%@-add.%@",newStr,[array objectAtIndex:[array count]-1]]; 
```

首先，它将连接所有先前的字符串和点（。）也..这将与任意数量的点。在您的图像名称之间..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T05:54:23.727

```
NSString *newString = [@"DSC004.jpg" stringByReplacingOccurrencesOfString:@"." withString:@"-Add."]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T05:54:51.040

```
NSString *original=@"DSC004.jpg";

NSString *target=[original stringByReplacingOccurrencesOfString:@"'.'" withString:@"-Add."]; 
```

试试这个，让我认识我的朋友..

快乐编码！！1

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T06:09:30.370

如果您的文件名如下，您可以使用以下代码**`some.jpg`**：

```
NSString *newString = [@"DSC004.jpg" stringByReplacingOccurrencesOfString:@"." withString:@"-Add."]; 
```

如果是这样**`some.some.jpg`**使用：

```
NSArray *arrayString = [fileName componentsSeparatedByString:@"."];
NSMutableArray *mutableArray = [NSMutableArray arrayWithArray: arrayString];
int arrayCount = [arrayString count];
NSString *newStr = nil;
if(arrayCount>=2)
{
  NSString *tempStr = [arrayString objectAtIndex:arrayCount-2];
  tempStr = [tempStr stringByAppendingString:@"-Add"];  
  [mutableArray replaceObjectAtIndex:arrayCount-2 withObject:tempStr];
  newStr = [mutableArray componentsJoinedByString:@"."];
  NSLog(@"%@",newStr);

}
else
{
  newStr = [fileName stringByAppendingString:@"-Add"];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T11:15:30.563

你也可以选择这个：

```
NSError *error= NULL;  
NSString *myString = @"DSC004.jpg";
NSMutableString *tempStr =[[NSMutableString alloc] initWithString:myString];
NSRegularExpression *regex =[NSRegularExpression regularExpressionWithPattern:@"(\\..{3})$" options:NSMatchingReportCompletion error:&error];
[regex replaceMatchesInString:tempStr options:NSMatchingReportCompletion range:NSMakeRange(0,[myString length]) withTemplate:@"-Add$0"];

NSLog(@"%@",tempStr); 
```

在这里，正则表达式引擎查找模式`<dot> followed by three characters`并将其保存，`$0`然后将其替换为`-Add followed by saved value(match) in $0`

希望它也有帮助！

# linux - 如何增加 STDIN BUFFERSIZE

> ID：13833628
> 
> 赞同：4
> 
> 时间：2012-12-12T05:50:55.803
> 
> 标签：linux, debian, buffer

我正在使用 Linux Debian 6.0.6，我在 STDIN 缓冲区中遇到问题。要从 STDIN 获取输入，我无法在 STDIN 中输入超过 4095 个字符，有没有办法增加 STDIN 缓冲区大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:35:42.973

缓冲区大小就像内核的页面大小。如果您想使用 C 来完成您的工作，请查看 man setbuf(3)。另外，这里已经回答了问题。[将 setvbuf() 与 STDIN 流一起使用](https://stackoverflow.com/questions/5876373/using-setvbuf-with-stdin-stream)

如果你想用 shell 来做，试试 stdbuf(1)。

# objective-c - iOS：将内存中的音频数据上传到 RTSP 服务器

> ID：13833633
> 
> 赞同：0
> 
> 时间：2012-12-12T05:51:30.560
> 
> 标签：objective-c, ios, avfoundation, rtsp

在我的应用程序中，我必须从设备的默认麦克风录制声音并将其发送到 RTSP 服务器以进一步流式传输。

**我的记录器状态结构是：**

```
typedef struct AQRecorderState {
    AudioStreamBasicDescription  mDataFormat;                   // 2
    AudioQueueRef                mQueue;                        // 3
    AudioQueueBufferRef          mBuffers[kNumberRecordBuffers];// 4
    AudioFileID                  mAudioFile;                    // 5
    UInt32                       bufferByteSize;                // 6
    SInt64                       mCurrentPacket;                // 7
    bool                         mIsRunning;                    // 8
}AQRecorderState; 
```

**我的录音设置参数是：**

```
 ars.mDataFormat.mSampleRate     = 44100;
    ars.mDataFormat.mChannelsPerFrame   = 1;
    ars.mDataFormat.mFramesPerPacket    = 1;
    ars.mDataFormat.mBitsPerChannel     = 16;
    ars.mDataFormat.mBytesPerFrame      = ars.mDataFormat.mChannelsPerFrame * sizeof (SInt16); // BYTES_PER_FRAME;
    ars.mDataFormat.mBytesPerPacket     = ars.mDataFormat.mChannelsPerFrame * sizeof (SInt16); // BYTES_PER_PACKET;

    /*----------------- FORMAT -------------------*/
    ars.mDataFormat.mFormatID = kAudioFormatLinearPCM;
    ars.mDataFormat.mFormatFlags = kLinearPCMFormatFlagIsBigEndian | kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;

    // derive the buffer size
    DeriveBufferSize(ars.mQueue, ars.mDataFormat, kBufferSeconds, &ars.bufferByteSize);

    // create the queue
    AudioQueueNewInput(&ars.mDataFormat,
                       AQInputCallback,
                       (__bridge void *)(self),
                       NULL,
                       kCFRunLoopCommonModes,
                       0,
                       &ars.mQueue);

// set the magic cookie for the queue
    setMagicCookieForFile(ars.mQueue, ars.mAudioFile);

    // allocate and enque the recording buffers
    for (int i=0; i<kNumberRecordBuffers; i++){
        AudioQueueAllocateBuffer(ars.mQueue, ars.bufferByteSize, &ars.mBuffers[i]);
        AudioQueueEnqueueBuffer(ars.mQueue, ars.mBuffers[i], 0, NULL);
    }

    // set current packet index and run state
    ars.mCurrentPacket = 0;
    ars.mIsRunning = true;

    // start the recording
    AudioQueueStart(ars.mQueue, NULL); 
```

**我的输入回调看起来像：**

```
static void AQInputCallback(void *aqRecorderState,
            AudioQueueRef                        inQ,
            AudioQueueBufferRef                  inBuffer,
            const AudioTimeStamp                 *timestamp,
            unsigned long                        inNumPackets,
            const AudioStreamPacketDescription   *mDataFormat)
{

    NSLog(@"........Callback called");
    AppDelegate *THIS=(__bridge AppDelegate *)aqRecorderState;
    AQRecorderState *pArs = &(THIS->ars);

    if (inNumPackets > 0) {
        write_audio_frame(THIS->oc, THIS->audio_st);
        // Stream audio frame
        uint8_t *data;

        AVCodecContext *codec;
        AVPacket packet;
        uint32_t size = inBuffer->mAudioDataByteSize;

        long sample_time_ms = (long)(timestamp->mSampleTime * 1000 / SAMPLE_RATE);

        codec = THIS->audio_st->codec;

        data = av_malloc(size*100);
        if (!data) {
            fprintf(stderr, "Couldn't allocate data for audio_frame\n");
            exit(1);
        }

        NSLog(@"Size 1 : %d",size);

        av_init_packet(&packet);
        packet.size = avcodec_encode_audio(codec, data, size, inBuffer->mAudioData);

        NSLog(@"Size 2: %d",packet.size);

        packet.data = data;
        packet.pts = sample_time_ms;
        packet.dts = sample_time_ms;
        packet.flags |= AV_PKT_FLAG_KEY;
        packet.duration = (size * 8 * 1024 * 1000000)/BITS_PER_CHANNEL;
        packet.stream_index = THIS->audio_st->index; //audio_st->index

        pArs->mCurrentPacket += inNumPackets;  // advance packet index pointer

        if (av_interleaved_write_frame(THIS->oc, &packet) != 0) {
            exit(1);
        }

        pArs->mCurrentPacket += inNumPackets;  // advance packet index pointer

        av_free(data);
    }

} 
```

我在输入回调中获取数据，如果将其写入文件然后播放，那么它工作正常，但我的工作是不保存在文件中，而是直接将数据发送到 RTSP 服务器。

**注意：**我`av_interleaved_write_frame()`用于将帧写入服务器，我认为问题在于`AVPacket`在我的输入回调中进行转换，这就是为什么我在服务器端收到“无序”数据包的原因。

我在互联网上到处搜索，但找不到任何工作。如果有人对此有所了解，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:14:50.860

您使用的是 tcp 还是 udp，我认为乱序数据包和丢弃的数据包将是 udp 的问题，ffmpeg 可以在必要时进行数据包重新排序。

# git - 如何在本地系统和服务器上使用 github？

> ID：13833634
> 
> 赞同：0
> 
> 时间：2012-12-12T05:51:32.240
> 
> 标签：git, github

我仍在尝试找到将 github 与本地系统和服务器一起使用的最佳方式。我假设它是 -

在您的本地系统上编写代码，将其推送到 github 上，然后从那里下载到您的实时服务器上

听起来不太主观，这是在本地系统和服务器上使用 git 的标准方法吗？

编辑 - 我发现了这个[GitHub 上的 origin 和 upstream 有什么区别？](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github)它有非常好的克隆/分叉和本地存储库的图片，所以理想情况下它看起来是 your_server <--> github <--> local_server/repo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:42:28.597

没有使用 git 的“标准”方式。你可以做任何一种方式，从你机器上的仓库中提取，或者从服务器上构建或测试服务器。或者，从 github 拉取。这很可能取决于您的拓扑结构以及防火墙是否会妨碍您。

# jquery - 保存模型集合backbone.js时超出了最大调用堆栈大小？

> ID：13833635
> 
> 赞同：0
> 
> 时间：2012-12-12T05:51:41.683
> 
> 标签：jquery, asp.net-mvc, backbone.js

如何将模型数组发送到主干中的 Post API 方法？

我在我的 mvc 应用程序中使用了主干.js，我有一个场景，我必须将一个数组传递给我在 Rest API 中的 Post 方法。我正在尝试发送一组模型，然后调用 this.collection.create(model)。我试图将 Post 方法称为

```
 var ModelArray = Backbone.Model.extend({
                            urlRoot: av.api.patientInsuranceAddress,
                            toJSON: function () {
                                return this.collection.toJSON();
                            }
                        });

                        var modelCollection = new ModelArray(
                            {
                                collection: this.collection.models
                            });

                        modelCollection.save(); 
```

这里 e.models 是一个模型数组，我将其转换为 json 并调用 Post 方法，我想像这样在 Post 方法上接收模型数组

```
public HttpResponseMessage Post(InsuranceAddressViewModel[] model)
{
return null;
} 
```

但是我在 Post 方法中得到了空数组。我将模型数组转换为 json 的方法是好的还是必须做其他事情。我已经尝试了几个解决方案，但无法理解。请指导

我正在尝试这个 [解决方案](https://stackoverflow.com/questions/6879138/how-to-save-an-entire-collection-in-backbone-js-backbone-sync-or-jquery-ajax)

当控件涉及模型中的 toJSON 时。它给出了 Uncaught RangeError: Maximum call stack size exceeded。请指导

* * *

```
 I am posting my code here 

       var PayerAddress = Backbone.Model.extend({
       urlRoot: av.api.patientInsuranceAddress,
       defaults: {
        Address: '',
        City: '',
        State: '',
        Zip: ''
     },
      toJSON: function () {
         return this.collection.toJSON();
      }

                     });

        var Payers = Backbone.Collection.extend({
       //url: av.api.patientInsuranceAddress,
     model: PayerAddress,

 });

       "Done": {
                    class: 'btn',
                    text: "Done",
                    click: function () {
                        payerName = self.$el.find('#Payer').val();

                        var ModelArray = Backbone.Model.extend({
                            urlRoot: av.api.patientInsuranceAddress,
                            toJSON: function () {
                                return this.collection.toJSON();
                            }
                        });

                        var modelCollection = new ModelArray(
                            {
                                collection: self.collection.models
                            });

                        modelCollection.save();
                        //self.closedialog();
                        $(this).dialog("close");
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:23:30.077

您是在尝试将模型添加到现有集合中，还是尝试用一堆模型替换您的集合？如果后者使用：

```
this.collection.reset(e.models); 
```

以下`this.collection.create(myArrayofModels );`'用于在集合中创建模型的新实例。在上面的示例中，您正在粘贴一个字符串。Backbone 然后尝试将该字符串作为模型添加到您的集合中。

# java - 使用 ANT 我想复制修改和未修改的文件

> ID：13833638
> 
> 赞同：0
> 
> 时间：2012-12-12T05:52:01.053
> 
> 标签：java, ant, copy

我想使用 ant 将修改和未修改的文件与父目录一起复制到多个目录中的目录中。当我使用修改后的任务时，它只复制修改后的文件以及父目录。未复制未修改的文件。请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:20:27.623

您可以使用启用了选项的`copy`任务。即使目标文件较新，`overwrite`选项也会覆盖现有文件。`overwrite`例如：

```
<copy todir="dest" overwrite="true">
    <fileset dir="src" />
</copy> 
```

参考：[http ://ant.apache.org/manual/Tasks/copy.html](http://ant.apache.org/manual/Tasks/copy.html)

# java - 如何从 MySql 表列中检索特定字段的总和到变量中

> ID：13833643
> 
> 赞同：0
> 
> 时间：2012-12-12T05:52:32.367
> 
> 标签：java, mysql

嗨，伙计们！！！，我在 MySql 中编写了一个查询，它给出了表列中特定字段的总和，查询是

```
PreparedStatement st = con.prepareStatement("SELECT COUNT(toc) AS std FROM processeddata_table where date(calldate) between '2009-01-01' and '2012-09-01' and toc='std' GROUP BY toc "); 
```

现在根据我的需要，我必须将所有“std”值的总和存储到一个变量中，我为此编写了类似的代码

```
ResultSet res = st.executeQuery();      
while (res.next())
{
    int std='';
} 
```

如何获取名为“std”的变量中字段的总和。

伙计们请帮助我。提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:54:08.107

`int std=res.getInt("std");`应该得到价值。

根据[ResultSet javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getInt%28java.lang.String%29)

> 检索此 ResultSet 对象的当前行中指定列的值，作为 Java 编程语言中的 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:54:42.027

```
ResultSet res = st.executeQuery();
while (res.next()) 
{
    int std = res.getInt("std");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:57:36.010

这是一篇很好的文章，可以帮助你学习使用`ResultSet`数据类型。

[http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html)

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:01:44.760

您可以尝试以下任一方法::

```
PreparedStatement st = con.prepareStatement("SELECT COUNT(toc) AS std FROM processeddata_table where date(calldate) between '2009-01-01' and '2012-09-01' and toc='std' GROUP BY toc "); 
```

方法 1：正如 Kuya John 所指出的：

```
ResultSet res = st.executeQuery();
while (res.next()) 
{
    int std = res.getInt("std");
} 
```

方法 2::

```
ResultSet res = st.executeQuery();
while (res.next()) 
{
    int std = res.getInt(1);
} 
```

# java - Android/Java 对象没有被垃圾收集

> ID：13833644
> 
> 赞同：1
> 
> 时间：2012-12-12T05:52:58.360
> 
> 标签：java, android, memory-leaks, out-of-memory

我正在开发一个简单的 pdf 阅读器，重写一个现有的例子。我的应用程序有一个自定义视图，其中包含下一个和上一个按钮。单击下一个按钮时，它会从 Internet 下载 pdf 并将其显示在视图中。每次单击下一个或上一个按钮时，都会调用以下 showPdf() 方法。

```
public void showPdf(){

    RelativeLayout lout = (RelativeLayout)LayoutInflater.from(this).inflate(R.layout.main, null);
setContentView( lout );
m_vPDF = null;
m_vPDF = (PDFReader)lout.findViewById(R.id.PDFView);

m_vPDF.open( m_doc);

m_vPDF.setViewListener(m_vPDF);

LinearLayout bar_find = (LinearLayout)lout.findViewById(R.id.bar_find);
     //
btn_prev = (Button)bar_find.findViewById(R.id.btn_prev);
btn_next = (Button)bar_find.findViewById(R.id.btn_next);
//        
btn_prev.setOnClickListener(this);
btn_next.setOnClickListener(this);
} 
```

PDFReader 是具有查看器来显示 PDF 的对象。以下是 PDFReader 代码的一部分。

```
public class PDFReader extends View implements PDFView.PDFViewListener,  

    ThumbView.ThumbListener
{

private PDFView m_viewer = null;

public PDFReader(Context context)
{
    super(context);
}
public PDFReader(Context context, AttributeSet attrs)
{
    super(context, attrs);
}
public void set_viewer( int view_style )
{

    switch( view_style )
    {
    case 1:
        m_viewer = new PDFViewHorz();
        break;
    case 2:
        m_viewer = new PDFViewScroll();
        break;
    case 3:
        m_viewer = new PDFViewSingle();
        break;
    case 4:
        m_viewer = new PDFViewSingleEx();
        break;
    case 5:
        m_viewer = new PDFViewReflow();
        break;
    default:
        m_viewer = new PDFViewVert();
        break;
    }
    if( m_viewer != null )
    {
        if( doc != null ) m_viewer.viewOpen(getContext(), doc, 0xFFCC0000, 4);
        m_viewer.viewSetAnnotListener( annot_listener );
        m_viewer.viewSetViewListener( view_listener );
        m_viewer.viewResize(getWidth(), getHeight());
        if( pos != null ) m_viewer.viewGoto(pos);
    }
} 
```

在我的 showPdf 中，每次单击按钮时我都会初始化 PDFReader，在 PDFReader 中，PDFView 的实例会使用 PDFViewVert 对象进行初始化，即使将 PDFReader 设置为 null 并将 PDFView 设置为 null，也不会进行垃圾收集。结果，它导致内存不足错误。

这是转储的内存分析，它显示了 14 个 PDFViewVert 实例已创建且从未释放。

```
14 instances of "com.radaee.pdfex.PDFViewVert$1", loaded by "dalvik.system.PathClassLoader @ 0x412a0b08" occupy 19,602,792 (64.39%) bytes.

Biggest instances:

com.radaee.pdfex.PDFViewVert$1 @ 0x412a1ae8 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x412c7c30 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x418bdf78 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x41a382f8 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x41a4df50 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x41eaf1c0 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x4202a8e0 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x421aaa10 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x4233dbf8 - 1,543,040 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x412a0bf0 - 1,543,024 (5.07%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x412bbf58 - 1,390,792 (4.57%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x412f0790 - 1,390,792 (4.57%) bytes.
com.radaee.pdfex.PDFViewVert$1 @ 0x424c4b50 - 1,390,792 (4.57%) bytes.

Keywords
com.radaee.pdfex.PDFViewVert$1
dalvik.system.PathClassLoader @ 0x412a0b08 
```

任何帮助表示赞赏..谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:01:23.650

Java GC 不一定会清理不再引用的对象。如果到目前为止有足够的内存，它可以决定对它们不做任何事情。

只能使用内存分析器来真正检查潜在的内存泄漏。

但是您可以尝试更轻松的检查。尝试减小应用程序的堆大小并调用`System.gc()`. 这并不能保证触发 GC，但是如果它开始删除您的对象，则表明您可能没有内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:39:32.283

试试这个：

```
Runtime.getRuntime().gc(); 
```

改变这个

```
m_vPDF = null; 
```

到，

```
if (m_vPDF != null){
  m_vPDF.recycle();
  m_vPDF = null;
} 
```

这将帮助您清理未使用的对象。

希望它可以帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:40:13.500

就个人而言，我认为您最好的选择是使用自定义适配器，这样它将重用视图，并且您不会获得 23 个 pdfview 实例。它只会保存一个，它会让你能够滑动而不是点击下一个或上一个。不幸的是，这些设备没有你所拥有的大量内存

# matlab - 在matlab中用n个节点绘制图形

> ID：13833650
> 
> 赞同：2
> 
> 时间：2012-12-12T05:53:59.917
> 
> 标签：matlab, math

我有一个带有 x 和 y 位置的向量。如果`n=3`我有长度为 6 的数组。每个单元格值都是空间上的一个位置

```
A= [x1 y1 ,x2 y2 ,x3 y3]
// As example A = [2 3.122 , 1.3 6, 2.1 5.6] 
```

我怎样才能得到这个职位的完整图表？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:04:37.993

`gplot(A,Coordinates)`根据 n×n 邻接矩阵 A 绘制 Coordinates 中定义的节点图，其中 n 是节点数. Coordinates 是一个 n×2 矩阵，其中 n 是节点数，每个坐标对代表一个节点

对于二维数据，Coordinates(i,:) = [x(i) y(i)] 表示节点 i，Coordinates(j,:) = [x(j)y(j)] 表示节点 j。如果节点 i 和节点 j 相连，则 A(i,j) 或 A(j,i) 非零；否则，A(i,j) 和 A(j,i) 为零。

```
doc gplot 
```

了解更多信息。

对于您的示例，使用微不足道的所有邻接矩阵，您将得到：

```
A = [2 3.122 , 1.3 6, 2.1 5.6]; % #  where A= [x1 y1 ,x2 y2 ,x3 y3]
gplot(ones(3),[A(1:2:end)',A(2:2:end)'],'-*') 
```

![在此处输入图像描述](../Images/1e952eb296b63cfafca360d8248f61dd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:21:07.227

您可以像这样创建一个`X`向量和一个`Y`向量：

```
X = A(:,1);
Y = A(:,2); 
```

然后简单地使用情节：

```
plot(X, Y); 
```

# ios - MFMessageComposeViewController 用于通过短信进行慈善捐赠

> ID：13833651
> 
> 赞同：1
> 
> 时间：2012-12-12T05:54:03.223
> 
> 标签：ios, sms, donations

根据以下审查指南，我最近面临 App Store 拒绝-“捐款的收集必须通过网站`Safari`或网站完成`SMS`”。

我在 Web 浏览器控件中打开 PayPal 链接，而不是`Safari`我现在更正的本机应用程序。但是我的应用程序还可以选择通过`SMS`我使用过的地方进行捐赠`MFMessageComposeViewController.`

当我使用`MFMessageComposeViewController`而不是将用户重定向到本机`SMS`应用程序时，它会被 App Store 批准吗？

据我了解`MFMessageComposeViewController`，这也是一种安全的方式，一旦呈现就无法修改。请让我知道您对这个问题的看法并分享您的经验。我不想再次面对拒绝。

# c# - 我可以优化这个替换内容的代码吗？

> ID：13833652
> 
> 赞同：0
> 
> 时间：2012-12-12T05:54:06.487
> 
> 标签：c#

我可以在不使用 foreach 循环的情况下优化代码吗？目标是找到具有 .config 扩展名的文件并在将其部署到生产之前替换指定的文本。

```
DirectoryInfo di= new DirectoryInfo(@"C:\Inetpub\Wwwroot\workframew\Presentation\Website");
        FileInfo[] fl= di.GetFiles("*.config");
        foreach (FileInfo fi in fl)
        {
            //File.Replace(fi.FullName,fi.FullName,.ReadAllText(fi.FullName) = File.ReadAllText(fi.FullName).Replace(@"F:\LogFiles\ApplicationLogs\Compass\",@"C:\Compass_350\Compass\");
            string filePath = fi.FullName;
            StreamReader reader = new StreamReader(filePath);
            string content = reader.ReadToEnd();
            reader.Close();

            content = Regex.Replace(content, @"F:\LogFiles\ApplicationLogs\Compass\", @"C:\Compass_350\Compass\");

            StreamWriter writer = new StreamWriter(filePath);
            writer.Write(content);
            writer.Close();

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:58:07.380

从 .NET 4 开始，[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd383571.aspx)有一个重载，允许您搜索模式和可选的所有子目录。在早期版本（v2 或更高版本）中（或者如果您更喜欢返回字符串数组的方法），您可以使用[`Directory.GetFiles`](http://msdn.microsoft.com/en-us/library/ms143316%28v=vs.85%29.aspx)类似的方法。区别在于前者返回`IEnumerable<string>`，而后者返回一个字符串数组。

但是，您仍然必须自己转换文件，因此所有这些方法都可以节省您必须构建递归结构，这仍然是值得的。此外，您需要转义正则表达式特殊字符，以便按字面意思找到您正在搜索的字符串（目录路径），除非表达式是有意的（在这种情况下，很明显您希望按字面意思找到路径，所以反斜杠必须被转义）。

```
foreach(var file in Directory.EnumerateFiles(@"C:\Inetpub\Wwwroot\workframew\Presentation\Website", "*.config", SearchOptions.AllDirectories))
{
    string content = null;

    using(var reader = new StreamReader(file))
    {
       content = reader.ReadToEnd();
    }

    using(var writer = new StreamWriter(file))
    {
        writer.write(Regex.Replace(content, @"F:\\LogFiles\\ApplicationLogs\\Compass\\", @"C:\Compass_350\Compass\"));
    }
} 
```

# http - 没有 Cache-Control 标头的 Squid 的默认缓存策略是什么？

> ID：13833655
> 
> 赞同：1
> 
> 时间：2012-12-12T05:54:09.107
> 
> 标签：http, caching, cache-control, squid

当 HTTP 响应中没有使用 Cache-Control 标头时，RFC2616 对缓存代理的“默认”行为有些模糊。例如，Squid（或任何其他代理缓存）是否可以无限期地缓存响应？或者是否有必要对每个请求重新验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:16:59.200

在没有显式信息（例如，Cache-Control: max-age 或 Expires 标头）的情况下，缓存可以并且确实使用“启发式新鲜度”——即，他们猜测。

但是，当他们这样做时，大多数（但不是全部）缓存将寻找对缓存有用的提示，例如 Last-Modified 标头。

更多信息：

*   [https://svn.tools.ietf.org/svn/wg/httpbis/draft-ietf-httpbis/latest/p6-cache.html#heuristic.freshness](https://svn.tools.ietf.org/svn/wg/httpbis/draft-ietf-httpbis/latest/p6-cache.html#heuristic.freshness)
*   [http://www.squid-cache.org/Versions/v3/3.HEAD/cfgman/refresh_pattern.html](http://www.squid-cache.org/Versions/v3/3.HEAD/cfgman/refresh_pattern.html)
*   [http://www.mnot.net/blog/2009/02/24/unintended_caching](http://www.mnot.net/blog/2009/02/24/unintended_caching)

# codeigniter - Codeigniter 索引文件问题

> ID：13833656
> 
> 赞同：0
> 
> 时间：2012-12-12T05:54:16.050
> 
> 标签：codeigniter, mod-rewrite

我已经在 CI 工作过。但是这次当我删除索引文件时。我收到 404 错误。但我做的一切都是正确的。这是我所做的设置。

```
.htaccess
   RewriteEngine on
   RewriteCond $1 !^(index\.php|robots\.txt|files\/images|files\/javascripts|files\/stylesheets|files\/swf|files\/upload)
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ /qrout/index.php/$1 [L]

   Config File
   $config['base_url']  = 'http://webscarlets.in/projects/';
   $config['index_page']   = ''; 
```

我希望以上设置都是正确的。我已经尝试在基本 url 中添加这个 'qrout' 文件夹，但它仍然无法正常工作

这是网站链接 [http://webscarlets.in/projects/qrout/welcome](http://webscarlets.in/projects/qrout/welcome)

请指导我解决这个问题。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:56:30.787

尝试使用这种条件.....它为我工作

```
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:33:14.613

看起来您的重写条件是针对 js 文件之类的。这些文件在其路径中不需要 index.php。只有您的 Codeigniter 文件会。

我会修改那个条件语句。

# c++ - Boost 线程析构函数未定义符号

> ID：13833657
> 
> 赞同：3
> 
> 时间：2012-12-12T05:54:18.120
> 
> 标签：c++, boost-asio, undefined-symbol

我正在使用 OSX Mountain Lion。我刚刚使用 boost 网站提供的说明下载、解压缩并构建了 boost 1.52.0：http: [//www.boost.org/doc/libs/1_52_0/more/getting_started/unix-variants.html](http://www.boost.org/doc/libs/1_52_0/more/getting_started/unix-variants.html)。我将默认的安装前缀保留在`/usr/local`，这意味着库安装在`/usr/local/lib`，头文件在`/usr/local/include`. 我已经验证了库和头文件在那里并且最近被修改过。

我正在尝试编译此处找到的 boost 异步 I/O 示例：http: [//www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tuttimer5/src.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tuttimer5/src.html)（来源）。

这是我的编译命令：

```
g++ -Wall -c -g -I/usr/local/include src/test1.cpp -o src/test1.o 
```

其中 src/test1.cpp 是示例源文件。这是我的链接命令（和错误）：

```
g++ -Wall -L/usr/local/lib -lboost_thread -lboost_system  src/test1.o -o bin/test1
Undefined symbols for architecture x86_64:
  "boost::thread::~thread()", referenced from:
      _main in test1.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我尝试过使用 Apple 的 clang++ 4.0 和 g++ 4.6.0。我从两个程序中得到相同的未定义符号错误。

其他人似乎也无法编译此代码示例。我知道这个问题：[C++ / Boost: Undefined Symbols in example？](https://stackoverflow.com/questions/5820269/c-boost-undefined-symbols-in-example)还有这个：[编译 boost.asio 示例时出现链接器错误](https://stackoverflow.com/questions/2568243/linker-error-when-compiling-boost-asio-example)。但是，这些问题中的每一个似乎都已通过在命令行中添加适当的开关（-lboost_thread 和 -lboost_system）得到解决。我已经有了这些。我也试过添加 -lpthread 没有运气。

感谢您花时间看我的问题！任何帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:01:01.807

将您*最后*链接的库放在命令行上。

GNU 链接器使用一种反向查找依赖项，因此如果文件 A 依赖于库 B，则 B 应该在命令行上位于 A*之后。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:17:06.443

刚遇到同样的问题，我发现恢复到 Boost 1.49 可以解决问题。Boost 1.49 的下载链接在这里：

[http://www.boost.org/users/history/version_1_49_0.html](http://www.boost.org/users/history/version_1_49_0.html)

在安装 1.49 之前，我通过删除 1.52`/usr/local/include/boost`和`/usr/local/lib/*boost*`. 不确定 1.49 和 1.52 之间发生了什么变化导致了这个问题，或者 Boost 1.50 或 1.51 是否可以工作。

# c - 变量的多个定义

> ID：13833667
> 
> 赞同：-1
> 
> 时间：2012-12-12T05:55:00.137
> 
> 标签：c

为什么以下代码没有给出错误，因为 i 被多次定义为 int i=10？此外，为什么迭代变量 i 不受影响？为什么没有冲突？输出为 1010101010。如何？

```
#include<stdio.h>
int main()
{
    int i;
    for(i=0;i<5;i++)
    {
        int i=10;
        printf("%d",i);
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:59:59.783

在代码块中定义的变量范围仅限于该代码块。IE。，

```
int i=1;//outer i
{
int i=2;//inner i
printf("%d"&i);// this ll print 2
}
printf("%d"&i);// this ll print 1 
```

也一样。，即

```
int i=1;
for (int i=0;i<4;i++){
printf("%d",&i); // print 0 1 2 3 
}
printf("%d",&i); // print 1 
```

在您的情况下，每次将内部 i 初始化为 10 并打印它时，您都会增加内部 i，因此它每次都会打印您声明并初始化为 10 的内部 i 的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:58:59.187

`int i=10;`in`for loop`仅在循环内可用，它不知道它是否先前在循环外定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:56:03.137

自动变量仅在它们所在的范围`{`内有效。 您的程序中有两个变量：`}`
`i`

*   `i`声明的 in`main`具有整个`main`函数的范围。
*   而循环`i`内部`for`仅在循环内部具有范围。

请注意，当您`i`在 for 循环中引用时，内部`i` **阴影**会`i`在`main`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:29:31.373

这是因为变量的范围

变量范围在 { to }

你的第一个 int i 将在 main() 中存活，而 int i inside for 将仅在 for 循环中存活。

现在为什么输出是 1010101010？？？

简单的解释是，当您输入查找时，您的新 i 将等于 10，您打印它，然后 i++ 将其设为 11。下次 i = 10 时再次打印它，i++ 将其设为 11，这对于 main() int i < 5 所以五次你会得到 1010101010。

希望能帮助到你.....

# c# - 以编程方式更新注册表设置有什么风险？

> ID：13833669
> 
> 赞同：1
> 
> 时间：2012-12-12T05:55:05.773
> 
> 标签：c#, windows, internet-explorer, winapi, registry

我正在尝试使用 C# 以编程方式将 Internet Explorer 的代理设置更改为启用/禁用。这可以在需要代理或不需要代理的网站之间切换。

我的代码：

```
string key = "Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings";

RegistryKey RegKey = Registry.CurrentUser.OpenSubKey(key, true);
RegKey.SetValue("ProxyEnable", 1); 
```

我提到的用于更新注册表的大多数文章都表明这样做存在风险。

我想知道

1.  执行上述代码有哪些风险

2.  我可以采取任何缓解措施来应对风险。例如，为特定键进行注册表备份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:37:02.420

注册表是一个由操作系统控制的环境，可能会受到意外更新的影响。我认为主要的风险是无法知道你的数据到底发生了什么（例如：如果 Windows 认为重置或覆盖你的值是个好主意，你就会失去一切）。

此外，就像有人在对另一个答案的评论中所说的那样，无效条目可能会导致数据丢失，尤其是当您的数据超过注册表允许的最大长度时。

如果您需要修改注册表，您可以测试该键是否存在并在覆盖之前跟踪原始值。当然，您需要确保更改密钥不会产生意想不到的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:50:30.080

更改注册表的风险仅仅是您可能会损坏系统。如果您真的想在客户机器上运行它：

*   阅读您可以找到的有关您更改的注册表项的所有文档
*   考虑到不同的windows版本和不同的产品版本可能会有不同的注册表项
*   询问曾经改变过这些价值观的人
*   确保您的应用程序将具有执行此操作的权限（例如：以管理员身份运行，这不应该用于常规使用。仅在安装程序中）。
*   确保您可以卸载更改

# c++ - C++循环遍历数组，找到最小的

> ID：13833670
> 
> 赞同：0
> 
> 时间：2012-12-12T05:55:19.523
> 
> 标签：c++

我试图在 3 个不同的数组中找到最小值，但结果并不正确，我不认为。即使它是最小的，它似乎也永远不会返回中间数组。它总是 0 或 2。我的逻辑错误似乎是什么？

```
int smallest;
for(int i = 1; i < 3; i++)
{
    if(queue[i].getCount() < queue[0].getCount())
      smallest = i;
    else
      smallest = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:58:15.430

鉴于您的代码中的错误，很难看出您正在尝试做什么。

我想你想要更像这样的东西：

```
int smallest = queue[0].getCount();
for(int i = 1; i < 3; i++)
{
    if(queue[i].getCount() < smallest)
        smallest = queue[i].getCount();
} 
```

如果您想要结果索引，请尝试以下操作：

```
int smallest = 0;
for(int i = 1; i < 3; i++)
{
    if(queue[i].getCount() < queue[smallest].getCount())
        smallest = i;
} 
```

# android - 当我们将其放入flex中的自定义函数时，preventdefault()方法是什么？

> ID：13833672
> 
> 赞同：4
> 
> 时间：2012-12-12T05:55:46.880
> 
> 标签：android, actionscript-3, apache-flex, air, flash-builder

`preventDefault()`flex 或 flash builder的功能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:27:53.770

这告诉事件监听器他们不应该做“他们通常会做的事情”。

来自 Adob​​e 文档：

“某些事件具有关联的默认行为。例如，doubleClick 事件具有关联的默认行为，即在事件发生时突出显示鼠标指针下的单词。您的事件侦听器可以通过调用 preventDefault() 方法来取消此行为。您还可以通过调用 stopPropagation() 或 stopImmediatePropagation() 方法使当前事件侦听器成为最后一个处理事件的侦听器。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:10:18.587

任何事件的 preventDefault 方法都会取消事件的默认行为。正如您所看到的，文本字段可以获取输入事件，并且会在每个输入的字母上显示一个字母。在这种情况下，它将取消默认行为并且不会显示正在键入的字母。

# facebook - Facebook 打开图 GraphMethodException 不支持的发布请求

> ID：13833673
> 
> 赞同：1
> 
> 时间：2012-12-12T05:55:47.043
> 
> 标签：facebook, api, facebook-opengraph

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# music: http://ogp.me/ns/fb/music#">
<meta property="fb:app_id"        content="###########" /> 
<meta property="og:type"           content="music.song" /> 
 <meta property="og:url"            content="http://mymediaupload.com/fbindex1.php" />
 <meta property="og:locale"        content="en_US" />
 <meta property="og:title"           content="MyMediaUpload" />
 <meta property="og:description" content="MMU" /> 
 <meta property="og:image"        content="http://www.mymediaupload.com/v4/img/ErrorBG.png" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1" scope="publish_actions"></div>

<input type="button" value="Read" class="openGraphButton" action="song" page="http://mymediaupload.com/fbindex1.php" />
<script type="text/javascript">

$(document).ready(function()
{
    $('.openGraphButton').click(function(){
            var action = $(this).attr('action');
            var page = $(this).attr('page');
            postAction( action, 'article', page);
        });
});

function postAction( action, object_type, object_url ){
    FB.api('/me/music.' + action + '?' + object_type + '=' + object_url, 'post', function(response){
         var msg = 'Error occured';
         if (!response || response.error)
        {
            if (response.error) {
                msg += "\n\nType: "+response.error.type+"\n\nMessage: "+response.error.message;
            }
            alert(msg);
        } 
        else
        {
            alert('Post was successful! Action ID: ' + response.id);
        }
    });
}
</script>

<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '###########', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
</script>
</body>
</html> 
```

我已经使用了 facebook 自己的操作.. 我已经搜索和搜索了！我修复了除了最后一个错误之外的所有错误，我得到了错误：

发生了错误

类型：GraphMethodException

消息：不支持的发布请求。

请帮忙！我找不到答案！

# iphone - 如何将 SVN 修订号添加到 iPhone 应用程序构建？

> ID：13833674
> 
> 赞同：5
> 
> 时间：2012-12-12T05:55:48.697
> 
> 标签：iphone, ios, xcode, svn

我在 xCode 中尝试了很多脚本，例如：

[在 Xcode 中插入 Subversion 修订号](https://stackoverflow.com/questions/372218/insert-subversion-revision-number-in-xcode)

[http://getsetgames.com/2009/10/21/automatically-insert-your-svn-revision-number-into-your-xcode-project/](http://getsetgames.com/2009/10/21/automatically-insert-your-svn-revision-number-into-your-xcode-project/)

[http://www.red-sweater.com/blog/23/automatic-build-sub-versioning-in-xcode](http://www.red-sweater.com/blog/23/automatic-build-sub-versioning-in-xcode)

[http://www.noxeos.com/2011/09/13/xcode-build-number-svn/](http://www.noxeos.com/2011/09/13/xcode-build-number-svn/)

[http://bafford.com/2010/11/17/automatic-build-versioning-in-xcode-with-subversion/](http://bafford.com/2010/11/17/automatic-build-versioning-in-xcode-with-subversion/)

但它没有工作。

我需要知道如何将 SVN 修订号添加到 iPhone 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T06:01:15.037

您可以尝试以下步骤，这可能会对您有所帮助：

1.  手动将 info.plist 中的 CFBundleShortVersionString（又名“捆绑版本字符串，短”）值设置为 major.minor 内部版本号（例如 1.0）

2.  使用以下脚本将“运行脚本”构建阶段添加到您的项目中

> ```
> REV=`svnversion -nc | /usr/bin/sed -e 's/^[^:]*://;s/[A-Za-z]//'`
> BASEVERNUM=`/usr/libexec/PlistBuddy -c "Print :CFBundleShortVersionString" "${INFOPLIST_FILE}"`
> /usr/libexec/PlistBuddy -c "Set :CFBundleVersion $BASEVERNUM.$REV" "${INFOPLIST_FILE}" 
> ```

3.清理和构建（清理步骤强制 Xcode 重新处理 info.plist）。

![在此处输入图像描述](../Images/98156359f8e3e24fb1cddb14f3d81e74.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T15:24:07.943

请注意 Xcode 5 对 svn 目录格式的更改。因此，如果您同时安装了 Xcode 4 和 5，并且已经将 svn 项目目录转换为新的 1.7 格式，那么您将失去 Xcode 4 中的 svn 功能（缺少状态、[svnversion 不起作用](https://stackoverflow.com/a/13833742/870464)等等）。幸运的是，Tommy Domain 为仍在同一台 Mac 上使用 Xcode 4 和 Xcode 5 的用户发布了一个解决方法。[你可以在这里](http://tgoode.com/2012/03/31/use-svn-1-7-in-xcode-4-3/)找到它。很快，解决方案可能是：

*   关闭 Xcode 4。
*   下载并安装 svn 1.7 客户端（[下载链接在这里](http://www.wandisco.com/subversion/download#osx)）
*   转到 XCode4.app 包内部，SVN 二进制文件所在的位置：

> cd /Applications/Xcode.app/Contents/Developer/usr/bin/

*   通过将 svn* 文件移动到任何其他目录来备份它们：

> mv svn* 备份

*   建立一个到 svn 1.7 客户端安装包的符号链接：

> ln -s /opt/subversion/bin/svn* ./

之后重新打开 Xcode 4 并再次享受来自 Shekhar 的 svn 工具和[解决方案](https://stackoverflow.com/a/13833742/870464)，感谢 Tommy 的 Domain[博客](http://tgoode.com/2012/03/31/use-svn-1-7-in-xcode-4-3/)。

# gcc - gcc 支持 arm7ej-s 内核吗？

> ID：13833683
> 
> 赞同：1
> 
> 时间：2012-12-12T05:56:27.290
> 
> 标签：gcc, arm

我正在使用 arm-none-eabi-gcc 构建基于 ARM7EJ-S 的应用程序。我以两种方式做到这一点。方法一。Eclipse + CodeSourcery 方法二。使用 CodeSourcery + makefile 在命令行下工作

在 Method-1 中，我必须选择一个目标处理器，但可选项目中没有 ARM7EJ-S。在方法 2 中，我可以使用 -march= 而不是核心名称来指定目标处理器。但是，由于 ARM7EJ-S 的核心架构是 v5TEJ，因此不在候选列表中。但是 v5TE 是可用的。

所以我很困惑......GCC不支持ARM7EJ-S内核吗？哪位知道这个或者有这方面经验的，请帮帮我！我会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:27:39.260

核心和架构名称中的“J”字母指的是*Jazelle*，这是 Java 字节码的硬件加速功能。由于这根本不会影响您的 C 或 C++ 代码，因此您可以使用 v5TE 并不必担心。

# c# - 没有动作和控制器的 Html.BeginForm css 属性

> ID：13833686
> 
> 赞同：0
> 
> 时间：2012-12-12T05:56:41.073
> 
> 标签：c#, css, asp.net-mvc, html-helper

我的控制器中有 2 个操作，创建和编辑，它们基本上使用相同的视图，因为添加和编辑记录的功能是相同的。

所以在我看来，我有这个：

```
@using (Html.BeginForm("Create", "Customers", FormMethod.Post, new { @class = "form-horizontal" })) 
```

我可以用`@using (Html.BeginForm()) { }`

但是那样，我看不到任何重载方法可以添加到我的 css 类文件中

如何在创建和编辑操作中使用相同的 BeginForm 帮助器，而无需对其进行硬编码？

或者，如果我想为我的表单标签设置样式，应该采用哪些其他方式或最佳实践，这将用于 2 个不同的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:04:45.953

最好的选择是创建一个 css 文件并将其包含在视图布局中。

```
<link href="**.css" rel="stylesheet" type="text/css" /> 
```

内部CSS：

```
form {
        background-color: #fff;
        margin: 0;
        padding: 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:37:39.110

尽管为两者重用相同的视图似乎是个好主意，但我可以告诉您，最终您将不得不将它们拆分，通常是由于请求的某些新功能仅适用于其中之一。练习为“编辑”和“创建”提供专用视图是一个好主意。在这和保持它们 DRY 之间的一个很好的折衷是让视图包含开始表单标记，如果需要，可能是一些 JavaScript 或任何其他引用，但是对于字段本身，使用 @Html.EditorFor() 并为该数据类型创建一个 EditorTemplate。这样它仍然尽可能地保持 DRY 原则，但仍然让你坚持单一责任原则。当然，如果它们确实变得更加复杂，那么共享的 EditorTemplate 也可能需要更改，`@Html.EditorFor(x=>x, "CustomerEdit")`

通常，让控制器决定视图的关注点（生成表单 URL）是一种不好的做法。

视图/客户/Create.cshtml

```
@using (Html.BeginForm("Create", "Customers", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.EditorFor(x=>x)
} 
```

视图/客户/Edit.cshtml

```
@using (Html.BeginForm("Edit", "Customers", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.EditorFor(x=>x)
} 
```

视图/客户/EditorTemplates/Customer.cshtml

```
<div class="control-group">
    <label class="control-label">@Html.DisplayNameFor(model => model.Name)</label>
    <div class="controls">
        <span class="text">
            @Html.EditorFor(model => model.Name)
        </span>
    </div>
</div>
<div class="control-group">
    <label class="control-label">@Html.DisplayNameFor(model => model.PhoneNumber)</label>
    <div class="controls">
        <span class="text">
            @Html.EditorFor(model => model.PhoneNumber)
        </span>
    </div>
</div>
...etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:52:50.983

我和你做了同样的事情，两个动作都有一个视图。在控制器中，我只传递了一个 ViewBag 属性，称为 Action，它是根据上下文设置的。在视图中，只需调用@Html.BeginForm(ViewBag.Action, ...)。

# java - 将 Jbutton 添加到 JTable

> ID：13833688
> 
> 赞同：7
> 
> 时间：2012-12-12T05:56:54.553
> 
> 标签：java, swing, jtable, jbutton

需要一个简单的 Swing 代码来演示如何使用 tablecellrenderer 和 tablecelleditor 在 Jtable 的列中添加按钮。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-12T07:50:10.790

这是一个非常好的示例，它将 a 添加`JButton`到单元格中`JTable`：

![在此处输入图像描述](../Images/ca48dce8a271c3b6311ec52cd0da251e.png)

```
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.DefaultCellEditor;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

public class JButtonTableExample {

    public JButtonTableExample() {
        JFrame frame = new JFrame("JButtonTable Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DefaultTableModel dm = new DefaultTableModel();
        dm.setDataVector(new Object[][]{{"button 1", "foo"},
                    {"button 2", "bar"}}, new Object[]{"Button", "String"});

        JTable table = new JTable(dm);
        table.getColumn("Button").setCellRenderer(new ButtonRenderer());
        table.getColumn("Button").setCellEditor(new ButtonEditor(new JCheckBox()));

        JScrollPane scroll = new JScrollPane(table);

        table.setPreferredScrollableViewportSize(table.getPreferredSize());//thanks mKorbel +1 http://stackoverflow.com/questions/10551995/how-to-set-jscrollpane-layout-to-be-the-same-as-jtable

        table.getColumnModel().getColumn(0).setPreferredWidth(100);//so buttons will fit and not be shown butto..

        frame.add(scroll);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JButtonTableExample();
            }
        });

    }
}

class ButtonRenderer extends JButton implements TableCellRenderer {

    public ButtonRenderer() {
        setOpaque(true);
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        if (isSelected) {
            setForeground(table.getSelectionForeground());
            setBackground(table.getSelectionBackground());
        } else {
            setForeground(table.getForeground());
            setBackground(UIManager.getColor("Button.background"));
        }
        setText((value == null) ? "" : value.toString());
        return this;
    }
}

class ButtonEditor extends DefaultCellEditor {

    protected JButton button;
    private String label;
    private boolean isPushed;

    public ButtonEditor(JCheckBox checkBox) {
        super(checkBox);
        button = new JButton();
        button.setOpaque(true);
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                fireEditingStopped();
            }
        });
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value,
            boolean isSelected, int row, int column) {
        if (isSelected) {
            button.setForeground(table.getSelectionForeground());
            button.setBackground(table.getSelectionBackground());
        } else {
            button.setForeground(table.getForeground());
            button.setBackground(table.getBackground());
        }
        label = (value == null) ? "" : value.toString();
        button.setText(label);
        isPushed = true;
        return button;
    }

    @Override
    public Object getCellEditorValue() {
        if (isPushed) {
            JOptionPane.showMessageDialog(button, label + ": Ouch!");
        }
        isPushed = false;
        return label;
    }

    @Override
    public boolean stopCellEditing() {
        isPushed = false;
        return super.stopCellEditing();
    }
} 
```

**参考：**

*   [http://www.java2s.com/Code/Java/Swing-Components/ButtonTableExample.htm](http://www.java2s.com/Code/Java/Swing-Components/ButtonTableExample.htm)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-12T06:34:10.850

### 添加按钮到`JTable`

```
JTable table = new JTable(new JTableModel()); 
        JScrollPane scrollPane = new JScrollPane(table);
        table.setFillsViewportHeight(true); 

        TableCellRenderer buttonRenderer = new JTableButtonRenderer();
        table.getColumn("Button1").setCellRenderer(buttonRenderer);
        table.getColumn("Button2").setCellRenderer(buttonRenderer); 
```

### 示例`JTableModel`，这是管理列和行，设置组件

```
public static class JTableModel extends AbstractTableModel {
        private static final long serialVersionUID = 1L;
        private static final String[] COLUMN_NAMES = new String[] {"Id", "Stuff", "Button1", "Button2"};
        private static final Class<?>[] COLUMN_TYPES = new Class<?>[] {Integer.class, String.class, JButton.class,  JButton.class};

        @Override public int getColumnCount() {
            return COLUMN_NAMES.length;
        }

        @Override public int getRowCount() {
            return 4;
        }

        @Override public String getColumnName(int columnIndex) {
            return COLUMN_NAMES[columnIndex];
        }

        @Override public Class<?> getColumnClass(int columnIndex) {
            return COLUMN_TYPES[columnIndex];
        }

        @Override public Object getValueAt(final int rowIndex, final int columnIndex) {
                /*Adding components*/
            switch (columnIndex) {
                case 0: return rowIndex;
                case 1: return "Text for "+rowIndex;
                case 2: // fall through
               /*Adding button and creating click listener*/
                case 3: final JButton button = new JButton(COLUMN_NAMES[columnIndex]);
                        button.addActionListener(new ActionListener() {
                            public void actionPerformed(ActionEvent arg0) {
                                JOptionPane.showMessageDialog(JOptionPane.getFrameForComponent(button), 
                                        "Button clicked for row "+rowIndex);
                            }
                        });
                        return button;
                default: return "Error";
            }
        }   
    } 
```

### Sample `Button click listener`，这管理鼠标在组件上单击时的情况

```
private static class JTableButtonMouseListener extends MouseAdapter {
        private final JTable table;

        public JTableButtonMouseListener(JTable table) {
            this.table = table;
        }

        public void mouseClicked(MouseEvent e) {
            int column = table.getColumnModel().getColumnIndexAtX(e.getX()); // get the coloum of the button
            int row    = e.getY()/table.getRowHeight(); //get the row of the button

                    /*Checking the row or column is valid or not*/
            if (row < table.getRowCount() && row >= 0 && column < table.getColumnCount() && column >= 0) {
                Object value = table.getValueAt(row, column);
                if (value instanceof JButton) {
                    /*perform a click event*/
                    ((JButton)value).doClick();
                }
            }
        }
    } 
```

### 示例 JTable Cell Renderer，管理单元格组件

```
private static class JTableButtonRenderer implements TableCellRenderer {        
        @Override public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            JButton button = (JButton)value;
            return button;  
        }
    } 
```

# javascript - 定制跨域iFrame

> ID：13833694
> 
> 赞同：1
> 
> 时间：2012-12-12T05:57:21.877
> 
> 标签：javascript, iframe

我需要在 iFrame 中访问 c​​ss。我阅读了一些关于 SO 的文章和问题。所有人都说这是不可能的。因为这是另一个世界。我找到了以下示例：[演示](http://shouldersofgiants.co.uk/Examples/CrossDomain/ParentPage.html)

有人可以解释它是如何工作的并且它真的是跨域的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:34:42.383

本页由三页组成。

*   容器（[http://shouldersofgiants.co.uk/Examples/CrossDomain/ParentPage.html](http://shouldersofgiants.co.uk/Examples/CrossDomain/ParentPage.html)）
*   顶级 iframe ( [http://www.pierslawson.webspace.virginmedia.com/Examples/CrossDomain/InnerFrame.html](http://www.pierslawson.webspace.virginmedia.com/Examples/CrossDomain/InnerFrame.html) )
*   底部 iframe ( [http://www.pierslawson.webspace.virginmedia.com/Examples/CrossDomain/InnerFrameProxy.html](http://www.pierslawson.webspace.virginmedia.com/Examples/CrossDomain/InnerFrameProxy.html) )

为了让所有这些工作，包含页面需要推送“消息”，并且 iframe 需要收听它们。

在容器页面上，更改通过

```
 var elem = document.getElementById('innerFrameProxy');
 elem.contentWindow.location = 'http://www.pie ... meProxy.html#' + message; 
```

iframe 页面有

```
 function ForwardMessage() {
     var message = document.location.hash; 
```

随时准备接受更改。

iframe 改变了外观和感觉，因为它们被设置为这样做，而不是因为它们被迫

# css - Css文本段落对齐

> ID：13833695
> 
> 赞同：0
> 
> 时间：2012-12-12T05:57:21.557
> 
> 标签：css

我想在第二行的第一行开始显示文本，但它在数字下方的左侧请帮助

1 文本行段落 and and
and and and and and and and and and and and
2 文本行段落 and and
and and and and and and and and and and and
3 文本行段落 and and
and and and and and and and and and and and and and

注意：不使用列表类我想要这种类型的显示文本与 css 请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:39:50.677

我假设您的意思是，对于由编号项目组成的文本，其中数字是内容的一部分，每个项目都应该从新行开始，并且项目的第二行和后续行应该左对齐到文本正确的同一点（在数字、句号和空格之后）第一行开始。我还假设“不使用列表类”意味着由于`ol`某种原因不能使用编号列表的元素。

最简单（也是最强大）的解决方案是使用表格。例子：

```
<style>
table.list { border-collapse: collapse; }
table.list td { padding: 0; vertical-align: top; }
table.list td:first-child { text-align: right; padding-right: 0.25em; }
</style>
<table class=list>
<tr><td>1.</td><td>Text line paragraph and and and and and and and and and and and and</td></tr>
<tr><td>2.</td><td>Text line paragraph and and and and and and and and and and and and</td></tr>
<tr><td>3.</td><td>Text line paragraph and and and and and and and and and and and and</td></tr>
</table> 
```

如果您需要避免使用`table`标记，那么您需要以某种方式模拟它，例如使用标记`div`和`span`CSS 表格格式（`display: table`等）——在现代浏览器中有效，但在旧版本的 IE 中无效。

[现场演示](http://jsfiddle.net/bQWau/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:32:09.267

如果它只是你之后的缩进，你可以这样做：

```
p {
  padding-left: 1em;
  text-indent: -0.75em;
} 
```

根据字体，您可能需要`text-indent`稍微调整该值。

[http://jsfiddle.net/h7KvC/](http://jsfiddle.net/h7KvC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:00:45.900

在 css 中使用 text-indent 和 clear ，希望它能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:28:41.070

用它做一个ol..

```
<ol>
<li>Text</li>
<li>Text</li>
<li>Text</li>
</ol> 
```

**结果 ：**

1.  文本行段落 and and
    and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and
2.  文本行段落 and and
    and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and
3.  文本行段落 and and
    and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and and

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-12T06:33:24.813

您可以通过这种方式将段落添加到列表项中：

**HTML**

```
<div class="list">
  <p>Paragraph one</p>
  <p>Paragraph two</p>
  <p>Paragraph three</p>
</div> 
```

**CSS**

```
.list {
  counter-reset: pcount;
}
.list p:before {
  counter-increment: pcount;
  content: counter(pcount, decimal) ' ';
} 
```

**结果**

> ```
> 1 Paragraph one
> 2 Paragraph two
> 3 Paragraph three 
> ```

[http://jsfiddle.net/bQWau/1/](http://jsfiddle.net/bQWau/1/)

# sqlite - Couchbase 是否使用 SQLite 作为其持久层？

> ID：13833699
> 
> 赞同：5
> 
> 时间：2012-12-12T05:57:43.430
> 
> 标签：sqlite, couchbase

最近，我将 Couchbase 作为 NoSQL 文档数据库进行了评测。它处理故障转移的方式以及如何轻松添加新的数据库服务器看起来令人惊叹。我发现定义视图的方式就像 CouchDB。所以我认为 Couchbase 的持久层使用与 CouchDB 相同的机制。

几天前，当我在功能部分查看他们的网站时，他们提到了以下声明：

> Couchbase 使用经过验证、可靠且广泛部署的 SQLite 作为其持久层。

只要我知道 SQLite 是用于电话或小型数据库的出色数据库，但它不是为数亿条记录而设计的，而且它不可扩展。今天，当我再次查看他们的网站时，我发现他们的功能页面中已经没有 SQLite 的迹象了。

所以我的问题是，Couchbase 究竟使用什么作为它的持久层。是 SQLite 吗？如果不是，它是使用与 CouchDB 相同的机制还是完全不同的方法？

[这是功能页面的缓存版本的链接，](http://webcache.googleusercontent.com/search?q=cache%3au73Y03WcmuoJ%3awww.couchbase.com/couchbase-server/features+&cd=1&hl=en&ct=clnk&gl=us)其中声明 Couchbase 使用 SQLite 作为其持久层，[这里是新功能页面](http://www.couchbase.com/couchbase-server/features)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T06:01:56.800

Couchbase < 2.0 使用 SQLite。当公司合并时，他们只是将 Membase 更名为 Membase。

新的 CouchBase 2.0 使用 CouchDB 而不是 SQLite。

好吧，有点： http: [//www.couchbase.com/couchbase-vs-couchdb](http://www.couchbase.com/couchbase-vs-couchdb)

> 该团队利用 Apache CouchDB 代码的某些方面来替换 Membase 存储后端并添加索引和查询。然而，为了提供团队认为需要的性能和资源利用率，重写了大部分内容。结果是，虽然 Couchbase 深受 Apache CouchDB 的影响，但它却有着明显的不同。

# android - robotsium中从设置到拆卸的流程

> ID：13833703
> 
> 赞同：5
> 
> 时间：2012-12-12T05:58:10.317
> 
> 标签：android, robotium

Robotium中程序的流程是什么。我的意思是分别为每个测试用例调用setup（）和teardown（）？

选项 1
setup() TC01 teardown()

setup() TC02 拆解()

或选项2

setup() TC01 TC02 TC03 拆解()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T10:18:41.840

Setup 在每个测试方法之前调用，而 teardown 在每个测试方法之后调用。所以答案是选项1。

# visual-studio-2012 - 未找到带有 html 5 项目模板的 Visual C++

> ID：13833707
> 
> 赞同：0
> 
> 时间：2012-12-12T05:58:21.847
> 
> 标签：visual-studio-2012, windows-phone, windows-phone-8

我下载了适用于 Windows Phone 的 Microsoft Visual Studio Express 2012。
但是当我去新项目时，我找不到用于 Visual c++ 项目模板的 HTML5 应用程序。
但是找到了用于 Visual c# 和 Visual Basic 的 HTML5 应用程序。

微软似乎是故意这样做的（不知道为什么）。
有谁知道使用 Visual C++ 项目模板创建新的 HTML5 应用程序的指南？
任何链接都会很有用。

编辑：我做了更多搜索，发现了这个 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206940(v=vs.105).aspx)

> Windows Phone 8 中不支持基于 HTML 的手机应用程序模型。但是，开发人员可以使用 XAML 前端创建托管应用程序，该前端使用嵌入式浏览器控件来显示本地 HTML 内容，

然而，这只适用于 windows phone 8 而不是 windows 8
，这对我来说是混乱的根源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:42:07.183

这是因为 HTML 应用程序模板`WebBrowserControl`托管在小型 XAML/.NET 应用程序层中，目前无法在 WP8 上编写 XAML/C++ 应用程序。

如果您需要添加 C++，您应该能够将 Windows 运行时组件添加到您的应用程序并调用它：尽管这意味着从 JS->.NET->WinRT 调用。

# android - 以编程方式设置谷歌地图片段可见性（API2）

> ID：13833709
> 
> 赞同：27
> 
> 时间：2012-12-12T05:58:35.297
> 
> 标签：android, google-maps, android-fragments, visibility

xml:

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/mapFragment"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment"/> 
```

在常规片段中，它是这样的：

```
 mFragment = (mFragment) (getSupportFragmentManager().findFragmentById(R.id.mFragment));
  mFragment.getView().setVisibility(View.INVISIBLE); 
```

在谷歌地图片段中：

```
 mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.mapFragment)).getMap(); 
```

但是如何逐步设置地图片段可见性？

不能像其他碎片那样做。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-12T20:18:19.890

就这么简单：

```
private GoogleMap mMap;
private SupportMapFragment mMapFragment;

mMapFragment = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.mapFragment));
mMap = mMapFragment.getMap();

mMapFragment.getView().setVisibility(View.INVISIBLE); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-20T13:40:42.213

你可以做：

```
getSupportFragmentManager().beginTransaction().hide(mFragment).commit(); 
```

展示它：

```
getSupportFragmentManager().beginTransaction().show(mFragment).commit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-17T07:37:24.497

`@David`By和的答案`@ferdy182`都是正确的，但他们没有说明上下文。

如果您以编程方式隐藏/显示片段`@ferdy182`，则使用并且如果您想隐藏/显示 xml 中的片段。你应该遵循`@David`

让我解释

如果您在 xml 中有一个 frameLayout，并且您想要一个接一个地替换该特定片段中的另一个片段。使用此代码添加所有片段。它们将相互放置。

```
for(int i=0;i<4;i++)
        {
            getFragmentManager().beginTransaction().add(R.id.container, frag[i])
            //.addToBackStack(null)
            .commit();
        }// add all these fragment and put them on each other then 
```

隐藏除您要显示的所有其他片段。

```
for(int j=0;j<4;j++)
        {
        getFragmentManager().beginTransaction().hide(frag[j]).commit();
        }
        getFragmentManager().beginTransaction().show(frag[0]).commit(); 
```

**好处** 这些片段的工作方式类似于 c# 中的表单。Forum.show 和 forum.hide(); . 当前状态仍然存在的地方。这些片段不会一次又一次地调用。这里有一个[**问题，**](https://stackoverflow.com/questions/24779275/how-to-show-hide-a-fragment/24779555?noredirect=1#comment38460886_24779555)我使用这种技术解决了它。第二种方法

当您在 xml 中有多个 frameLayout 或片段时。你可以通过获取它的 id 来隐藏它。

```
private GoogleMap mMap;
private SupportMapFragment mMapFragment;

mMapFragment = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.mapFragment));
mMap = mMapFragment.getMap();

mMapFragment.getView().setVisibility(View.INVISIBLE); 
```

**代码**

// 隐藏时显示片段

```
FragmentManager fm = getSupportFragmentManager();
fm.beginTransaction()
          .show(fragment1)
          .commit(); 
```

//隐藏片段

```
FragmentManager fm = getSupportFragmentManager();
fm.beginTransaction()
          .hide(fragment1)
          .commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T17:46:40.077

只有那对我有用：

```
View fragmentMap = layout.findViewById(R.id.map_fragment_container_id);
fragmentMap.setVisibility(View.GONE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-08T18:53:54.793

除了在 xml 中创建`SupportMapFragment`之外，还有另一种方法，我们可以`SupportMapFragment`在 xml 中定义容器，然后从类中加载映射。

在 XML 中，假设容器是`FrameLayout`-

```
 <FrameLayout
        android:id="@+id/mapContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone" /> 
```

在我的 java 类中`Fragment`，我创建了两种方法来显示和隐藏地图。我使用了分离，这取决于需要。我们也可以使用隐藏而不是分离。

```
 private void showMap() {
   mMapContainer.setVisibility(View.VISIBLE);
   mSupportMapFragment = SupportMapFragment.newInstance();
   getChildFragmentManager().beginTransaction()
                         .replace(R.id.mapContainer, mSupportMapFragment).commit();
   }

    private void hideMap() {
        mMapContainer.setVisibility(View.VISIBLE);
        if (mSupportMapFragment != null) {
            getChildFragmentManager().beginTransaction()
                                 .detach(mSupportMapFragment).commit();
        }
    } 
```

# c++ - C++中的二叉树中序遍历

> ID：13833712
> 
> 赞同：0
> 
> 时间：2012-12-12T05:58:52.463
> 
> 标签：c++, binary-tree, binary-search-tree

我正在尝试打印出我使用中序遍历构建的二叉树，但是在定义如何将值传递给递归函数时遇到了麻烦。这是我得到的错误：

> 1>methods.obj : 错误 LNK2001: 无法解析的外部符号 "public: void __thiscall morsecode::in_order(struct letter *)" (?in_order@morsecode@@QAEXPAUletter@@@Z)

这是我的头文件中的树：

```
struct letter
{
    string let;
    string morse;
    letter *left;
    letter *right;
}; 
```

源文件中的方法：

```
void in_order(struct letter *P)
    {
        if(P==NULL) return;
        in_order(P->left);
        cout<<"letter: "<<P->let<<endl;
        in_order(P->right);
    } 
```

我在这里错过了一些重要的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:05:26.263

也许你需要：

```
void morsecode::in_order(struct letter *P) {
     if(P==NULL) return;
     in_order(P->left);
     cout<<"letter: "<<P->let<<endl;
     in_order(P->right);
} 
```

成为`morsecode`班级的一员。

# gwt - 如何重新发送 GWT RequestFactory 请求

> ID：13833714
> 
> 赞同：7
> 
> 时间：2012-12-12T05:59:03.683
> 
> 标签：gwt, gwt-rpc, requestfactory

是否可以重新发送 RequestFactory 传输？我想做与此等效的操作：使用 RequestFactory 时[如何重新发送 GWT RPC 请求。](https://stackoverflow.com/questions/11056324/how-to-resend-a-gwt-rpc-request-if-it-fails-or-how-to-create-persistent-rpc-req)从先前的请求重新发送相同的有效负载相当简单，但我还需要调用相同的方法。这是我的 RequestTransport 类，我希望在处理好（在这种情况下）对用户的登录凭据请求之后，“重新触发”原始请求：

```
package org.greatlogic.rfexample2.client;

import com.google.gwt.http.client.Request;
import com.google.gwt.http.client.RequestBuilder;
import com.google.gwt.http.client.RequestCallback;
import com.google.gwt.http.client.Response;
import com.google.web.bindery.requestfactory.gwt.client.DefaultRequestTransport;
/**
 * Every request factory transmission will pass through the single instance of this class. This can
 * be used to ensure that when a response is received any global conditions (e.g., the user is no
 * longer logged in) can be handled in a consistent manner.
 */
public class RFERequestTransport extends DefaultRequestTransport {
//--------------------------------------------------------------------------------------------------
private IClientFactory _clientFactory;
//==================================================================================================
private final class RFERequestCallback implements RequestCallback {
private RequestCallback _requestCallback;
private RFERequestCallback(final RequestCallback requestCallback) {
  _requestCallback = requestCallback;
} // RFERequestCallback()
@Override
public void onError(final Request request, final Throwable exception) {
  _requestCallback.onError(request, exception);
} // onError()
@Override
public void onResponseReceived(final Request request, final Response response) {
  if (response.getStatusCode() == Response.SC_UNAUTHORIZED) {
    _clientFactory.login();
  }
  else {
    _clientFactory.setLastPayload(null);
    _clientFactory.setLastReceiver(null);
    _requestCallback.onResponseReceived(request, response);
  }
} // onResponseReceived()
} // class RFERequestCallback
//==================================================================================================
@Override
protected void configureRequestBuilder(final RequestBuilder builder) {
  super.configureRequestBuilder(builder);
} // configureRequestBuilder()
//--------------------------------------------------------------------------------------------------
@Override
protected RequestCallback createRequestCallback(final TransportReceiver receiver) {
  return new RFERequestCallback(super.createRequestCallback(receiver));
} // createRequestCallback()
//--------------------------------------------------------------------------------------------------
void initialize(final IClientFactory clientFactory) {
  _clientFactory = clientFactory;
} // initialize()
//--------------------------------------------------------------------------------------------------
@Override
public void send(final String payload, final TransportReceiver receiver) {
  String actualPayload = _clientFactory.getLastPayload();
  TransportReceiver actualReceiver;
  if (actualPayload == null) {
    actualPayload = payload;
    actualReceiver = receiver;
    _clientFactory.setLastPayload(payload);
    _clientFactory.setLastReceiver(receiver);
  }
  else {
    actualReceiver = _clientFactory.getLastReceiver();
  }
  super.send(actualPayload, actualReceiver);
} // send()
//--------------------------------------------------------------------------------------------------
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:29:36.003

Based upon Thomas' suggestion I tried sending another request, and just replaced the payload and receiver in the `RequestTransport.send()` method, and this worked; I guess there is no further context retained by request factory, and that the response from the server is sufficient for RF to determine what needs to be done to unpack the response beyond the `request` and `response` that are returned to the `RequestCallback.onResponseReceived()` method. If anyone is interested in seeing my code then just let me know and I'll post it here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:56:45.840

这是可能的，但你有很多事情要做。

我也有同样的想法。我正在寻找一个好的解决方案大约 2 天。我试图拦截 RequestContext.java 和其他类的服务器调用。但是如果你这样做，你必须为几乎每一类 gwt requestfactories 进行自己的实现。所以我决定采用一种更简单的方法。

在我发出请求的任何地方，我都会处理响应并再次触发它。当然，你必须小心，不要陷入循环。

# qt4 - QProcess 不会启动请求的

> ID：13833715
> 
> 赞同：0
> 
> 时间：2012-12-12T05:59:05.030
> 
> 标签：qt4, qprocess

我一直在尝试`QProcess`启动一个应用程序。但我在这样做时面临一些问题。这是我的代码：

```
void QOpenApp::open_now()
{
    QString program = "/usr/lib/qt4/examples/widgets/analogclock";
    QStringList arguments;
    arguments << "-style" << "motif";

    process->start(program, arguments);
} 
```

我在 Ubuntu 12.04 上。我得到的只是一条输出消息“Starting blah blah”，没有其他任何事情发生。该程序没有退出并且仍在运行，但模拟时钟（我试图打开的应用程序`QProcess`）没有启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:27:06.847

您提供的路径不正确 - 我刚刚在我的计算机上检查过，并且`/usr/lib/qt4/examples/widgets/analogclock`是一个**目录**，实际的可执行文件是`/usr/lib/qt4/examples/widgets/analogclock/analogclock`.

请记住，当您使用 QProcess 时，您总是需要为其提供正确的路径 - 否则它将无法正常工作。

# c# - 多个 Silverlight 动画粉碎

> ID：13833720
> 
> 赞同：0
> 
> 时间：2012-12-12T05:59:28.573
> 
> 标签：c#, silverlight, task, multithreading

我的 silverlight 应用程序中有 2 个自定义控件，每个控件都有自己的动画。我想按顺序播放所有动画，但是当它们同时播放时，动画无法正常播放。我怎样才能在他们之间设置一些延迟？

```
 private void button1_Click(object sender, RoutedEventArgs e)
        {
            Dispatcher.BeginInvoke(() => { 
myCustomControl1.Play();
Thread.Sleep(200);
            Dispatcher.BeginInvoke(() => { myCustomControl2.Play(); });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:29:20.100

我假设您的控件正在使用 StoryBoard 来播放动画。StoryBoard 有一个“已完成”事件，该事件在完成运行后触发。因此，您可以执行以下操作：

```
public class CustomControl:Control
{
public override void ApplyTemplate()
{
   _storyBoard=GetTemplateChild("AnimationStoryBoard") as Storyboard;
   _storyBoard.Completed+=OnCompleted;
}
public event eventhandler AnimationCompleted;

public void Play()
{
   _storyBoard.Begin();
}

private void OnCompleted(object sender, EventArgs args)
{
    if(AnimationCompleted!=null)
        AnimationCompleted(this,EventArg.Empty);
}
} 
```

然后你可以做的是将你的动画链接在一起：

```
myCustomControl1.AnimationCompleted+=RunSecondAnimation;
myCustomControl1.Play();

private void RunSecondAnimation(object sender, EventArgs args)
{
    myCustomControl2.Play();
} 
```

现在我们可以保证动画 2 总是在动画 1 之后发生。

# javascript - 如何使用 jQuery 获取自定义标签的值

> ID：13833724
> 
> 赞同：0
> 
> 时间：2012-12-12T05:59:52.890
> 
> 标签：javascript, jquery, custom-tag

我有一个带有格式的自定义标签

```
<ie:menuitems id="ieMenu">Hello World</ie:menuitems> 
```

现在我的任务是更改“Hello World”文本，但我无法使用 jQuery/JavaScript 检索值，我可以肯定地获取元素，因为 $('#ieMenu").size() 给了我 1 作为输出，但是要获得我尝试过的值

提前致谢

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - -

我想我应该在这里提一下，上面的代码示例是从页面源代码中复制的，我不确定这是否对您有所帮助，我想说这是转换后的 html，我正在运行我的代码在按钮中单击不在页面加载中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:08:26.417

太棒了，我不知道它是否正确，但我通过使用检查并找到了“Hello World”

```
$("#ieMenu")[0].nextSibling.nodeValue 
```

您可以将值分配为

```
$("#ieMenu")[0].nextSibling.nodeValue = "Test" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:11:23.803

这是一个 JSFiddle，它可以满足您的需求，并在最新的 Chrome、Firefox 和 Opera 中为我工作：http: [//jsfiddle.net/hTJFk/](http://jsfiddle.net/hTJFk/)。代码复制如下：

**HTML**

```
<html>
    <ie:menuitems id="ieMenu">Hello World</ie:menuitems>
</html> 
```

**​JavaScript**

 **```
$(function() {
    $('#ieMenu').text("Goodbye World");
});​ 
```

对我来说，结果是标签包含“再见世界”，正如预期的那样。

你测试的是什么浏览器？我怀疑这可能是浏览器问题，在这种情况下，我们可以尝试破解它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:08:24.750

这对我有用：

```
​$(function(){
    var element = document.getElementsByTagName('ie:menuitems')[0];
    console.log(element.innerHTML) 
    element.innerHTML = 'another'    
})​ 
```

小提琴：http: [//jsfiddle.net/WR8MH/](http://jsfiddle.net/WR8MH/)**

# c++ - 解释“位串”的最佳方式是什么

> ID：13833727
> 
> 赞同：1
> 
> 时间：2012-12-12T06:00:00.687
> 
> 标签：c++

我想知道解释“位串”的最佳方法是什么？

例如：

像“1010010”这样的位串被提供给以下函数

```
void foo (string s1) {
  // some code to do bit manipulation of the bit string
} 
```

最好的方法是什么？非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:02:39.997

如果您只想将字符串转换为其整数值，那么[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)家庭可以提供帮助：

```
int value = std::stoi("10100"); //value will be 10100, not 20 
```

如果您想操作由字符串表示的位模式，那么[`std::bitset`](http://en.cppreference.com/w/cpp/utility/bitset)可能会以某种方式帮助您：

```
std::bitset<32>  bitpattern("10100"); 

//you can manupulates bitpattern as you wish
//see the member functions of std::bitset

//you can also convert into unsigned long
unsigned long ul = bitpattern.to_ulong();  //ul will be 20, not 10100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:04:15.783

我会使用[strtol](http://www.codecogs.com/reference/computing/c/stdlib.h/strtol.php)

例子：

```
 char *endptr;
  long i = strtol (mystring, &endptr, 2); 
```

# android - 如何从动态添加编辑文本框计算值？

> ID：13833729
> 
> 赞同：0
> 
> 时间：2012-12-12T06:00:17.803
> 
> 标签：android, formulas

我正在研究电气公式计算应用程序。我是新手。在我的应用程序中，我计算串联和并联电阻。

我动态添加 EditText 框。每当我单击添加按钮时，都会添加editTextboxes。

在这里我想如何计算这个编辑文本框的值？

任何人请帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:08:02.970

您可以使用 YOUR_EDIT_TEXT_OBJECT.getText().toString() 从 EditText 获取每个值。

假设你有两个电阻 R1 和 R2，那么

**字符串 R1 = edit_text1.getText().toString();**

**浮点 r1= Float.parseFloat(R1);**

**字符串 R2 = edit_text2.getText().toString();**

**浮点 r2= Float.parseFloat(R1);**

所以现在您可以在串行和并行计算中使用这两个值。

希望它会帮助你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:08:40.067

```
int i = Integer.parseInt(edit.getText().toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:15:34.527

你也应该像这样尝试 Textview

> 最终整数 N = 10；// 要添加的 Edittext 总数
> 
> ```
>  final EditText[] myTextViews = new EditText[N]; // create an empty array;
> 
>   for (int i = 0; i < N; i++) {
>       // create a new textview
>       final EditText etTextView = new EditText(this);
> 
>       // set some properties of rowTextView or something
>       etTextView.setText("This is row #" + i);
> 
>       // add the textview to the linearlayout
>       myLinearLayout.addView(etTextView);
> 
>       // save a reference to the textview for later
>       myTextViews[i] = etTextView;
>   } 
> ```

# ios - 如何在 iOS 应用中播放 m3u 音频流

> ID：13833731
> 
> 赞同：3
> 
> 时间：2012-12-12T06:00:19.717
> 
> 标签：ios, xcode, audio, avfoundation, mpmovieplayer

我正在尝试使用 Xcode 4.5.2 创建一个 iOS/iPhone 收音机应用程序。

我想通过播放、暂停、音量控制流式传输@“http://xx.xxxxxxx.com/8111/radio.m3u”，并且能够在后台功能/多任务下播放。

到目前为止，我已经添加了`AVFoundation`,`Mediaplayer`和框架。`AudioToolBox`我已将播放、暂停和滑块对象添加到 xib。

```
ViewController.h

@interface ViewController : UIViewController

@property (strong,nonatomic) MPMoviePlayerController *myPlayer;

@property (weak, nonatomic) IBOutlet UISlider *myslider;

- (IBAction)playButtonPressed;

- (IBAction)myslider:(id)sender;

@end

ViewController.m
#import "ViewController.h"
#import <MediaPlayer/MediaPlayer.h>

@interface ViewController ()
{
    UISlider *volumeSlider;
}

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
    newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL];
}

- (IBAction)playButtonPressed;
{
    NSString *urlAddress = @"http://xxxxxxx.com/8111/listen.m3u";
    NSURL *url = [NSURL URLWithString:urlAddress];
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc]initWithContentURL:url];
    player.movieSourceType = MPMovieSourceTypeStreaming;
    [player prepareToPlay];
    self.myPlayer = player;
    [self.view addSubview:self.myPlayer.view];
    [self.myPlayer play];
}

- (IBAction)stopButtonPressed;
{
    [self.myPlayer stop];
}
- (IBAction)myslider:(id)sender
{
    MPVolumeView *volumeView = [[MPVolumeView alloc] initWithFrame: CGRectMake(10, 10, 200, 40)];
    [volumeSlider addSubview:volumeView];
    [volumeView sizeToFit];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:40:47.223

有两种方法可以实现这一点。

1.  您可以直接在 UIWebView 中加载您的 URL，它会正确加载。
2.  您也可以使用 MPMoviePlayerController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T22:28:41.190

在 ViewController 中创建一个“MPMoviePlayerController *player”作为强对象。

因此，您的代码如下所示：

```
@interface ViewController ()
{
    UISlider *volumeSlider;
    MPMoviePlayerController *player;
}

@end

- (IBAction)playButtonPressed;
{
    NSString *urlAddress = @"http://xxxxxxx.com/8111/listen.m3u";
    NSURL *url = [NSURL URLWithString:urlAddress];

    if(nil != player)
    {
      player = nil; // Alternatively you can stop and restart with the different stream.
    }

    player = [[MPMoviePlayerController alloc]initWithContentURL:url];
    player.movieSourceType = MPMovieSourceTypeStreaming;
    [player prepareToPlay];
    self.myPlayer = player;
    [self.view addSubview:self.myPlayer.view];
    [self.myPlayer play];
} 
```

# delphi - 从 TListbox 移动到 TStringGrid 的错误数据

> ID：13833739
> 
> 赞同：3
> 
> 时间：2012-12-12T06:00:47.673
> 
> 标签：delphi, delphi-7

我正在研究 Delphi 7。我有一个 TListBox 和一个 TStringGrid 有两列（没有固定的行或列）。我在 TListBox 中有如下数据：

可用元素 - a123 (a123) 可用元素 - a1234 (a1234) 可用元素 - a12345 (a12345)

TStringGrid 具有以下数据：

列 1 列 2

a1 可用元素 - a1 a2 可用元素 - a12

如果我选择 TListbox 中的第一项，即 a123 并执行以下按钮单击事件过程，那么最后一项数据，即 a12345 将被移动到网格中。

任何人都可以把重点放在我在下面的代码中做错了什么。以下代码将 TListbox 中的已选择项移动到 TStringgird 的两列：

```
procedure TForm1.btnMoveLeftClick(Sender: TObject);
var
  sString : String;
  i : Integer;
begin
  for i := 0 to ListBox1.Items.Count - 1 do
  begin
      {-- Is this status selected? --}
      if ListBox1.Selected[i] then
      begin
        sString := Trim(ListBox1.Items[i]);

        {-- Delete selected status. --}
          ListBox1.Items.Delete (i);

        if ((grdVFormDetails.RowCount >= 1) And (Trim(grdVFormDetails.Cells[0, 0]) <> EmptyStr)) then
          grdVFormDetails.RowCount := grdVFormDetails.RowCount+1;

        grdVFormDetails.Cols[1].Add(Copy(sString, 1, Pos('(', sString) - 1));

        sString := Copy(sString, Pos('(', sString) + 1, Length(sString));
        sString := Copy(sString, Pos('(', sString) + 1, Length(sString) - 1);

        grdVFormDetails.Cols[0].Add(sString);

        break;
      end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:38:03.080

**永远不要在 FOR 循环中删除 TList 的项目。**

这一行的问题：

```
 ListBox1.Items.Delete (i); 
```

循环从 i:=0 变为 2。Item - 0 被选中并删除它。下一次重复我们得到了什么？i=1 但这里只剩下 2 个项目而不是 3 个（所有后续项目都移动了），并且 i 指向最后一个项目而不是第二个项目。在 i=3 的下一次重复中，我们将得到“索引超出范围”错误。您应该仅在 FOR 循环之后删除 Item 以避免此问题。

```
procedure TForm1.btnMoveLeftClick(Sender: TObject);
var
  sString : String;
  i : Integer;
  k: integer;
begin
  k:=-1; 
  for i := 0 to ListBox1.Items.Count - 1 do
  begin
      {-- Is this status selected? --}
      if ListBox1.Selected[i] then
      begin
        sString := Trim(ListBox1.Items[i]);

        {-- Delete selected status. --}
          k:=i;         

        if ((grdVFormDetails.RowCount >= 1) And (Trim(grdVFormDetails.Cells[0, 0]) <> EmptyStr)) then
          grdVFormDetails.RowCount := grdVFormDetails.RowCount+1;

        grdVFormDetails.Cols[1].Add(Copy(sString, 1, Pos('(', sString) - 1));

        sString := Copy(sString, Pos('(', sString) + 1, Length(sString));
        sString := Copy(sString, Pos('(', sString) + 1, Length(sString) - 1);

        grdVFormDetails.Cols[0].Add(sString);

        break;
      end;
  end;
  if k>=0 then  ListBox1.Items.Delete (k);

end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:15:21.747

假设，您想像这样解析输入字符串：

```
'Some text (comment) etc. (12345)' 
```

进入从输入字符串的开头到第一个左括号（从结尾开始）修剪字符串的部分，以获得如下值：

```
'Some text (comment) etc.' 
```

以及输入字符串最后一个括号内的字符串：

```
'12345' 
```

如果是这样，您可以使用下面的代码。请注意，预计列表框项目会以右括号终止。如果需要，您可以检查[`commented version`](https://stackoverflow.com/revisions/13846963/2)此代码或下载[`sample project`](http://projects-stackoverflow-tlama.googlecode.com/files/13833739.ZIP)。

这是将焦点项从列表框移动到字符串网格的*部分*：

```
procedure TForm1.MoveLeftButtonClick(Sender: TObject);
var
  S: string;
  I: Integer;
  ItemID: string;
  ItemText: string;
begin
  if ListBox1.ItemIndex = -1 then
    Exit;

  S := ListBox1.Items[ListBox1.ItemIndex];
  for I := Length(S) - 1 downto 1 do
  begin
    if S[I] = '(' then
    begin
      ItemID := Trim(Copy(S, I + 1, Length(S) - I - 1));
      ItemText := Trim(Copy(S, 1, I - 1));
      with StringGrid1 do
      begin
        if (Cells[0, RowCount - 1] <> '') and
          (Cells[1, RowCount - 1] <> '')
        then
          RowCount := RowCount + 1;
        Cells[0, RowCount - 1] := ItemID;
        Cells[1, RowCount - 1] := ItemText;
      end;
      ListBox1.Items.Delete(ListBox1.ItemIndex);
      Break;
    end;
  end;
end; 
```

这是将*所选*行从字符串网格移动到列表框的部分：

```
procedure TForm1.MoveRightButtonClick(Sender: TObject);
var
  I: Integer;
  RowIndex: Integer;
begin
  RowIndex := StringGrid1.Selection.Top;
  if (StringGrid1.Cells[0, RowIndex] <> '') and
    (StringGrid1.Cells[1, RowIndex] <> '') then
  begin
    ListBox1.Items.Add(
      Trim(StringGrid1.Cells[1, RowIndex]) + ' (' +
      Trim(StringGrid1.Cells[0, RowIndex]) + ')'
    );
    for I := RowIndex to StringGrid1.RowCount - 2 do
      StringGrid1.Rows[I].Assign(StringGrid1.Rows[I + 1]);
    if StringGrid1.RowCount > 1 then
      StringGrid1.RowCount := StringGrid1.RowCount - 1
    else
    begin
      StringGrid1.Cells[0, 0] := '';
      StringGrid1.Cells[1, 0] := '';
    end;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:08:15.863

我目前没有安装 Delphi，但据我所知，如果 ListBox1.Selected[i] 那么不会给你正确的结果。您需要首先获取该项目，他们检查该项目是否被选中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:33:35.113

如果您在 ListBox 中没有多选，最好使用 ItemIndex 属性，它为您提供所选项目的索引，因此您不必循环检查列表中的所有项目。

像这样：

```
procedure TForm1.btnMoveLeftClick(Sender: TObject);
var
  sString : String;
  i : Integer;
begin
  if ListBox1.ItemIndex <> -1 then
  begin
    sString := Trim(ListBox1.Items[ListBox1.ItemIndex]);
    //do all your processing here
    //and at the end:
    ListBox1.Items.Delete(ListBox1.ItemIndex);
  end
end; 
```

# datagrid - 以编程方式创建 dojo 数据网格“抱歉发生错误”

> ID：13833740
> 
> 赞同：2
> 
> 时间：2012-12-12T06:01:04.787
> 
> 标签：datagrid, dojo

我正在尝试以`dojox.grid.DataGrid`编程方式创建 Dojo。它正在创建但不显示输出，而是显示错误消息：“抱歉，发生错误”

这是代码：

```
 var info=[
        {
            "Propery":"key1","Value":"value1"},
        {
            "Property":"key2", "Value":"value2"},
        {
            "Property":"key3","Value":"value3"}
    ];

    var layout = [
        {
            name: "Property",
            field: 'Property',
            width: "180px"},
        {
            name: "Value", 
            field: 'Value',
            width: "180px"}
    ];    

    var myStore = new dojo.data.ItemFileReadStore({data:{items:info}}); 

    var grid = new dojox.grid.DataGrid({
            store: myStore,
            structure: layout
        },"myDiv");       

    grid.startup(); 
```

我不知道哪里出了问题，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:41:08.680

伙计，这就像我第三次回答你的问题。它强烈地让我想起了之前的两个，但无论如何我都会尝试一下。

您的示例无法正常工作，因为在您的 -`layout`变量中，您引用了( )`field`中不存在的命名“属性” 。`data.items``info`

你也没有得到`json`-`array`正确的概念。它应该代表一堆具有非常相似结构的对象。假设您要存储一些人，那么您将有一些`keys`像名字、姓氏、年龄、性别等。每个人对此会有不同的值。-看起来像这样`json`：`array`

```
 var people = [
        {
            firstname: 'maja',
            lastname: 'van hinten'
            age: 23
            gender: 'w'},
        {
            firstname: 'willy',
            lastname: 'wantstoknowit'
            age: 11
            gender: 'm'},
        {
            firstname: 'helmut',
            lastname: 'kohl'
            age: 101
            gender: 'm'},
        ]; 
```

请注意，它们的名称`properties`相似，只是值不同。

您尝试做的显然是，将一个单曲存储`object`为`array`，并将每个属性设为`object`。想一想：在 JavaScript 中的`[]`意思`array`、`{}`意思。`object`

实际上，您的`info`-variable 应该如下所示：

```
 var info = [
        {
            "key1": "value1",       
            "key2": "value2",       
            "key3": "value3"}
    ]; 
```

如果您想存储更多对象，它看起来像这样：

```
 var info = [
        {
            "key1": "value1",       
            "key2": "value2",       
            "key3": "value3"},
        {
            "key1": "value4",       
            "key2": "value5",       
            "key3": "value6"},
        {
            "key1": "value7",       
            "key2": "value8",       
            "key3": "value9"}
    ]; 
```

...`object`存储在`array`. 就那么简单。

现在到你的`layout var`：

它应该描述`structure`您`DataGrid`与其提供的数据相关的`store`。因此，它将列描述为一个整体，而不是单个单元格。因此，您只能引用属性名称（key1、key2、key3 或 firstname、lastname、age、gender），但不能引用值，因为有时可能会有所不同。您只知道对象的结构，而不知道其实际内容。

因此，它应该如下所示：

```
 var layout = [
        {
            name: "Key1's content", // you can name this whatever you want
            field: 'key1',          // but not this, it refers to the property name of your objects
            width: "180px"},
        {
            name: "Key2's content", // this could be named randomly too of course
            field: "key2",
            width: "180px"},
       {
            name: "Key3's content", // and that one as well
            field: "key3",
            width: "180px"}
    ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:28:36.187

不确定这是否会有所帮助，但在您发布的示例代码中，您在其中一个项目中拼错了“Property”一词，而另外两个项目的“Property”一词拼写正确。请参阅具有属性 key1 的项目。您必须确保所有字段名称的拼写一致。

# c++ - 分段错误 - 改变结构（在另一个结构的）变量

> ID：13833752
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:02:01.053
> 
> 标签：c++, pointers, struct, segmentation-fault, nested

我有这个，在我的标题中：

```
 struct Surface {
        char *objectName;
        int xPos;
        int yPos;
        SDL_Surface *surface;
    };

    struct WorldSurface {
        Surface *surface = new Surface[MAX_SURFACES];
        int counter = 0;
        int current = 0;
    };

    WorldSurface *worldSurface; 
```

然后我在 .cpp 中初始化 worldSurface：

```
 WorldSurface *worldSurface = new WorldSurface[MAX_LEVELS]; 
```

而这个函数，无论如何我都无法开始工作，尝试过使用= NULL，指针，->而不是.'s ...（请记住，我对指针主题不太了解)

```
 void drawClass::addSurface(char* objectName, char* surfaceFile, int xPos, int yPos, int drawLevel) {
        int cnt = worldSurface[drawLevel].counter;
        worldSurface[drawLevel].surface[cnt].objectName = objectName;
        worldSurface[drawLevel].surface[cnt].surface = load_image(surfaceFile);
        worldSurface[drawLevel].surface[cnt].xPos = xPos;
        worldSurface[drawLevel].surface[cnt].yPos = yPos;
        worldSurface[drawLevel].counter++;
    } 
```

它有 10 个 worldSurface，每个包含 50 个表面结构，我想访问位于 worldSurface[drawLevel] 内部的结构，并且我想访问的表面结构在 worldSurface 中的 .counter 变量中是已知的。但是所有对底层表面结构的访问都因分段错误而失败，我不知道为什么......

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:20:23.253

您`WorldSurface`的未正确定义或初始化：

```
struct WorldSurface {
    Surface *surface = new Surface[MAX_SURFACES];
    int counter = 0;
    int current = 0;
}; 
```

您不能将数据与类的声明一起初始化。您需要在构造函数中执行此操作，例如：

```
struct WorldSurface {
    Surface *surface;
    int counter;
    int current;
};
...
WorldSurface::WorldSurface():
    counter(0),current(0),surface(new Surface[MAX_SURFACES]){} 
```

# java - 将大量数字存储在变量中的正确方法

> ID：13833753
> 
> 赞同：1
> 
> 时间：2012-12-12T06:02:03.290
> 
> 标签：java, math, types

我想玩弄数字，无论多么初级，我一直在为斐波那契数列编写算法，并为寻找素数编写蛮力路径！

我不是程序员，只是一个数学人。

但是，我经常遇到的一个问题是 long long、double 和 floats 经常用完空间。

如果我想继续在 JAVA 中工作，我可以通过什么方式创建自己的数据类型，以免空间不足。

从概念上讲，我想像这样把 3 个双打放在一起，

```
public class run {

    static double a = 0;
    static double b = 0;
    //static double c = 0;

    static void bignumber(boolean x) {

        if (x == true && a < 999999999) {
            ++a;

        } else if (x == true && a == 999999999) {
            ++b;
            a = 0;
        }
        System.out.print(b + "." + a + " \n");
    }

    public static void main(String[] args) {
        while(true) {
        bignumber(true);

        }
    }

} 
```

有一个更好的方法吗，

我想有一天能够说

mydataType X = 18476997032117414743068356202001644030185493386634 10171471785774910651696711161249859337684305435744 58561606154457179405222971773252466096064694607124 96237204420222697567566873784275623895087646784409 33285157496578843415088475528298186726451339863364 93190808467199043187438128336350279547028265329780 29349161558118810498449083195450098483937752272570 52578591944993870073695755688436933812779613089230 39256969525326162082367649031603655137144791393234 7169566988069

[或在本网站](http://www.rsa.com/rsalabs/node.asp?id=2093)上找到的任何其他号码

我也试过

```
package main;

import java.math.BigInteger;

public class run {
    BigDecimal a = 184769970321174147430683562020019566988069;
    public static void main(String[] args) {

    }

} 
```

但它似乎仍然超出范围

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:04:18.913

为此目的使用`BigDecimal`(而不是`double`) 和`BigInteger`(而不是`int`, `long`)，但您只能通过他们的方法使用它们。没有运算符，可以使用。

像这样使用：

```
BigInteger big = new BigInteger("4019832895734985478385764387592") // Strings...
big.add(new BigInteger("452872468924972568924762458767527"); 
```

与`BigDecimal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:09:17.700

BigDecimal 是 java 中使用的类，您需要在其中表示非常大或非常小的数字，并保持精度。缺点是它不是原始的，所以你不能使用普通的数学运算符（+/-/*/etc），而且它可能会占用一点处理器/内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:10:35.463

您可以像这样存储大量数字：

*   长度
*   数字[]

并为他们实现你的数学。这不是很复杂。作为提示，为了使一切更简单，您可以以相反的顺序存储数字。这将使您的数学更易于实现 - 您始终将 nr[k] 与 nr[k] 相加，并为任何长度的数字提供传输空间，只需记住将较短的数字填充为 0。

在 Knuth Seminumeric Algorithms 一书中，您可以找到所有操作的非常好的实现。

# hibernate - 在每个派生类中更改 @CollectionTable 的名称

> ID：13833755
> 
> 赞同：1
> 
> 时间：2012-12-12T06:02:05.533
> 
> 标签：hibernate

我有`Base class`两个`Derived classes`。我想更改每个基本类型属性表名称的新生成名称。
它抛出一个异常，

> 引起：org.hibernate.MappingException：无法确定类型：java.util.Map for ....列：[org.hibernate.mapping.Column(properties)]

# installation - 寻找一种工具来创建一个复杂的 Windows 安装程序包

> ID：13833756
> 
> 赞同：0
> 
> 时间：2012-12-12T06:02:10.017
> 
> 标签：installation, windows-installer

我们的部分业务包括提供带有一堆数据采集卡和相关软件的（Windows）台式机，所有这些都是为我们的客户设置和工作的。

现在，我们将所有的软件、依赖项、驱动程序等和一堆 bat 脚本打包在一起，这就是我们的“安装工具”。我们的生产人员（按顺序）运行脚本，根据需要选择选项，最终配置和测试机器。

这个过程不是很好 - 它有点错误，真的应该更容易。

我突然想到，必须有一种安装技术可以用来替换我们的 bat 脚本。有谁知道我们可以使用的东西？

它应该：

*   能够安装多个软件（即在所有默认选项打开的情况下运行*它们的*安装程序）。
*   能够拥有一些脚本/自定义能力，因为我们希望能够重新创建我们的 .bat 脚本所做的一些事情。
*   最好提供一些用户界面 - 即点击带有选项的安装屏幕。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:10:18.990

最后我们选择了 Wix——Installshield 看起来很棒——但是……最后它只是调用了一大堆自定义构建脚本。

Wix 有很高的学习曲线，但更像我们需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:04:14.350

安装工具有很多，不同的人喜欢不同的工具。你不会找到最好的，因为有些工具比其他工具更适合一项任务，有些很昂贵，有些非常糟糕和昂贵，等等。
但在您的情况下，根据我的经验，我可以推荐使用 Windows Installer 技术和 InstallShield 工具。它有很多可能性来创建伟大而强大的安装程序。借助 Windows Installer 和自己的 InstallShield 功能。
此外，您的所有要求都可以通过 InstallShield 完成。

# ios - 上次修改文件的 iphone 数据格式化程序

> ID：13833760
> 
> 赞同：1
> 
> 时间：2012-12-12T06:02:22.750
> 
> 标签：ios, ios4

```
NSString * last_modified = [NSString stringWithFormat:@"%@",[[(NSHTTPURLResponse *)response allHeaderFields] objectForKey:@"Last-Modified"]];

NSLog(@"Last-Modified: %@ ", last_modified );
NSString *dateString = @"Tue, 11 Dec 2012 13:22:57 GMT";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss zzz"];

NSDate *date = [dateFormatter dateFromString:dateString];
NSLog(@"date:%@",date); 
```

此处显示的日期时间与当前印度时间不相等。请给我一个建议

谢谢， 维贾扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:32:41.723

时间是格林威治标准时间

将其转换为本地时`setTimeZone`区`NSDateFormatter`

# c++ - 方法参数中的 const* const

> ID：13833766
> 
> 赞同：0
> 
> 时间：2012-12-12T06:02:50.263
> 
> 标签：c++, syntax, constants

以下函数定义的参数中的 2 个 const 意味着什么？

```
void myFunction (MyClass* const* const myObj); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:10:24.993

从右到左阅读：

```
MyClass* const* const
   ^   ^   ^  ^ ^
   |   |   |  | 1
   |   |   |  |
   |   |   |  2
   |   |   3
   |   4
   5 
```

一个*(1)* **const** *(2)* **指针指向**一个( *3)* **const** *(4)* **指针**`MyClass`。换句话说，您不能更改指针，但`MyClass`实例仍然是可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:10:34.210

参数是指向对象指针的指针。

第一个`const`意味着间接指针（访问为 的指针`*myObj`）不能更改。

第二个`const`没有任何用处，因为`myObj`它是按值传递的，并且将函数的参数的本地副本设为 be 毫无意义`const`。

# javascript - 用于验证算术表达式的javascript正则表达式

> ID：13833770
> 
> 赞同：2
> 
> 时间：2012-12-12T06:03:02.800
> 
> 标签：javascript

我有一个算术表达式 ((20+30)-25)/5 我想使用正则表达式进行验证。表达式只能有整数、浮点数、操作数和括号。

如何生成正则表达式来验证请帮助或建议任何其他方式来使用 javascript 验证该字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:12:40.920

正如我在评论中所说，使用一个 JavaScript 正则表达式是不可能的。但是，您可以使用循环来做到这一点：用原子替换子表达式，重复直到得到一个原子。如果你不能再减少，并且剩下的不是原子，它就不会验证。这实际上与评估它的过程几乎相同（只是跳过了抽象语法树）。您可以搜索`\(\d+\)|\d+[-+/*]\d+`并替换为`0`：

例子：

*   `((20+30)-25)/5`
*   `((0)-25)/5`
*   `(0-25)/5`
*   `(0)/5`
*   `0/5`
*   `0`
*   完毕

如果你没有匹配并且没有 just `0`，那就失败了。

（要评估而不是验证，您只需要用实际值替换而不是虚拟替代，其他一切都是一样的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-05T13:27:04.207

JavaScript "eval" 函数是最好的验证器。尝试这样做：

```
eval("((20+30)-25)5"); 
```

你会得到足够详细的错误描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:14:12.587

如果您对括号嵌套施加最大深度，您将只能使用正则表达式执行此操作。否则，这组算术表达式会形成上下文无关语言，而不是常规语言。

如果我必须使用正则表达式，我会使用的方法是为您的算术表达式集编写正则语法，然后将其转换为正则表达式。

另一种方法是编写递归下降解析器，这是一个相当简单的项目，并且非常适用于算术表达式。

# c++ - c 问题错误在此函数中使用未初始化

> ID：13833771
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:03:05.833
> 
> 标签：c++, c, compilation

我无法解决问题你是怎么做到的？

我想从你那里得到一些想法来解决这个错误......

向我显示的错误是：“警告：'inicioLista' 已在此功能中初始化......

```
#include <stdio.h>
#include <stdlib.h>

struct registro
{
    int valor;
    struct registro *sig;
};

typedef struct registro _nodo;

_nodo *crearLista(_nodo *apuntador)
{
        return (apuntador = NULL);
}

_nodo *insertarEnLista( int numero , _nodo *apuntador )
{
    _nodo *registroNuevo, *apuntadorAuxiliar;

    registroNuevo = (_nodo *) malloc(sizeof(_nodo));

    if( registroNuevo != NULL )
    {
        registroNuevo -> valor = numero;
        registroNuevo -> sig = NULL;

        if(apuntador != NULL)
                apuntador = registroNuevo;
        else
            apuntadorAuxiliar =  apuntador;

            while( apuntadorAuxiliar -> sig != NULL)
                    apuntadorAuxiliar = apuntadorAuxiliar -> sig;
    }
return 0;
}

void imprimirLista(_nodo *apuntador){
    _nodo *apuntadorAuxiliar;

    apuntadorAuxiliar = apuntador;

    printf("Contenido de la lista: inicioLista -> ");

    while(apuntadorAuxiliar != NULL)
    {
            printf("%d -> ", apuntadorAuxiliar -> valor);
            apuntadorAuxiliar = apuntadorAuxiliar -> sig;
    }

    printf("NULL \n");

    return;
}

int main()
{
    _nodo *inicioLista;

    inicioLista = crearLista(inicioLista);

    inicioLista = insertarEnLista(5, inicioLista);
    imprimirLista(inicioLista);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:09:23.833

```
_nodo *inicioLista = NULL; 
```

将定义更改为此，它将起作用

# jquery - 在应用程序级别更改光标

> ID：13833776
> 
> 赞同：1
> 
> 时间：2012-12-12T06:03:42.163
> 
> 标签：jquery, asp.net, css

无论如何，在 ASP.NET 应用程序中，当我单击应用程序中任何位置的按钮时，如果服务器响应需要超过 2 秒才能将光标更改为沙漏？

我真的不想在每一页都写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:22:38.850

编辑：

对不起，我想我误读了你的问题。在这里，这应该更改页面中的所有按钮（输入类型提交和按钮）以执行所需的行为。

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $("input:submit, input:button").click(function () {
            setTimeout(function () {
                document.body.style.cursor = 'wait';
            }, 2000);
        });
    });
</script> 
```

# ruby-on-rails-3 - 用于序列化数组字段的 Rails simple_form 复选框

> ID：13833786
> 
> 赞同：15
> 
> 时间：2012-12-12T06:04:28.257
> 
> 标签：ruby-on-rails-3, simple-form, form-helpers

我正在使用 SimpleForm 来构建我的表单。

我说过以下模型：

```
class ScheduledContent < ActiveRecord::Base
    belongs_to :parent
    attr_accessible :lots, :of, :other, :fields
    serialize :schedule, Array
end 
```

我想构建一个表单，其中在许多其他字段和关联中（该模型实际上已经是 has_many 关联的一部分 - 所以是一个非常复杂的表单），向用户呈现可变天数（例如第 1 天，第 2 天，第 3 天等）- 每天都可以选中或取消选中。因此，如果用户检查第 1 天，并且第 5 天说 - 我想将 [1, 5] 存储在日程表字段中。在表格之前 - 我可以构建一个简单的可能日期数组以供选择，显然包括已经选择的日期。

使用 SimpleForm 的表单助手来表示此表单的最佳方式是什么？如果不可能这样做 - 我也可以使用 Rails 的表单助手来使其工作，但我更喜欢 SimpleForm，因为表单的其余部分已经使用 SimpleForm 构建。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-12T18:36:27.950

是的，您可以使用 SimpleForm 来完成。这是一个例子：

```
<%= simple_form_for(@user) do |f| %>
  <%= f.input :schedule, as: :check_boxes, collection: [['Day 1', 1], ['Day 2', 2]] %>
  <%= f.button :submit %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-18T00:45:45.720

回答一个老问题，但我最近不得不做类似的事情。为了标记已选择的复选框选项，我使用`:checked`了类似的方法：

```
<%=
  form.input :schedule, {
    as:         :check_boxes,
    collection: Days.my_scope.map { |day| [day.name, day.id] },
    wrapper:    :vertical_radio_and_checkboxes,
    checked:    form.object.schedule
  }
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-21T15:06:35.177

也在为此苦苦挣扎。最后把它做成下面的haml代码。它利用 SimpleForm [collection_check_boxes](https://www.rubydoc.info/github/plataformatec/simple_form/SimpleForm%2FFormBuilder:collection_check_boxes)方法，将垂直输出带有标签的复选框。列表不会在整个复选框列表的顶部显示一般标签。

```
= f.collection_check_boxes :schedule, Day.all, :id, :label_name do |day|
  = day.check_box
  = day.label
  %br 
```

# cocos2d-iphone - CoCos2D 非矩形精灵的交集

> ID：13833792
> 
> 赞同：0
> 
> 时间：2012-12-12T06:04:59.290
> 
> 标签：cocos2d-iphone

我有一个三角形的精灵，我想知道这个三角形何时与另一个对象（CCSPrite）相交。我一直在使用`CGRectIntersectsRect`，但它不准确，因为它采用两个精灵的边界框而不是实际形状。

- 编辑

我认为一种方法是在实际三角形周围定义几个点并检查这些点与另一个精灵之间的交点。我只是想知道是否有更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:57:46.917

您可以使用 box2d 准确检测碰撞。如果您有许多不同的复杂形状，它会很有用。或者你可以只检查形状边缘的交叉点。

如果有很多物体需要检测碰撞，我建议使用 box2d。它具有良好的内部优化，能够处理大量对象。在这种情况下，您只需在将对象添加到游戏层之前创建与您的精灵形状相同的物理身体。

# generics - Hamcrest 的任何东西（）都无法编译

> ID：13833794
> 
> 赞同：1
> 
> 时间：2012-12-12T06:05:06.033
> 
> 标签：generics, compiler-errors, hamcrest

我在这里错过了什么吗？

```
@Test
public void testAnything(){
    Random random = new Random();
    assertThat(random.nextInt(), is(equalTo(anything())));
} 
```

这不编译。Eclipse 抱怨“MatcherAssert 类型中的方法 assertThat(T, Matcher) 不适用于参数 (int, Matcher>)”

使用任何东西（）我错过了什么吗？我过去使用过其他 Hamcrest 方法……那么这有什么不同呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:35:05.877

这不是如何`equalTo`工作的。它在内部调用`Object#equals(Object)`并且必须通过`anything()`. 那没有意义。只需省略它，它就可以工作：

```
Random random = new Random();
assertThat(random.nextInt(), is(anything())); 
```

# java - VirtualBox：使用 SDK API 在来宾中启动程序？

> ID：13833796
> 
> 赞同：11
> 
> 时间：2012-12-12T06:05:16.330
> 
> 标签：java, virtualbox

我想编写一个在 VirtualBox 客户机中启动程序（例如：Firefox）的 Java 程序。主机是 Windows，来宾是 Ubuntu。根据 SDK 文档，应该可以做到这一点。这是我根据我在文档中看到的在 Java 中的尝试（假设 VM 已启动并正在运行）：

```
String machineName = "MyMachine";
String url = "http://localhost:18083";
String user = "";
String passwd = "";

VirtualBoxManager mgr = VirtualBoxManager.createInstance(null);
mgr.connect(url, user, passwd);
IVirtualBox vbox = mgr.getVBox();
System.out.println("Running VirtualBox version " + vbox.getVersion());

IMachine machine = vbox.findMachine(machineName);
ISession session = mgr.getSessionObject();
machine.lockMachine(session,  LockType.Shared);
IConsole console = session.getConsole();
IGuest guest = console.getGuest();

IGuestSession guestSession = guest.createSession("bob","password", "", "");
guestSession.processCreate("/usr/bin/firefox", null, null, null, 0L);

session.unlockMachine(); 
```

当我运行它时，我得到：

```
Exception in thread "main" org.virtualbox_4_2.VBoxException: VirtualBox error: The   session is not locked (session state: Unlocked) (0x8000FFFF)
at org.virtualbox_4_2.ISession.getConsole(ISession.java:145)
at Test1.main(Test1.java:27) 
```

我已经尝试过使用锁和会话的不同选项，但总是会出现某种类型的错误。如果我将 LockType 设置为 Write，我会收到“无法将机器分配给会话”错误。

有人做过吗？在线有可靠的 Java VirtualBox 教程吗？我用谷歌找不到任何东西。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T22:00:52.310

您是否尝试过等到访客会话开始。在你的情况下，这应该是这样的

> 来宾会话 = 来宾.CreateSession(....
> 
> guestSession.waitFor(1L, 0L)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T10:06:19.700

我也不知道如何使用 SDK。但是您是否尝试过**通过 SSH 将推荐发送**到虚拟机？苏，您需要设置网络和所有这些，但这将是一个不错的选择，因为缺少 VirtualBox SDK 文档使得归档变得复杂。

# php - 显示两个表中数据的最佳实践

> ID：13833799
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:05:36.460
> 
> 标签：php, sql

我有两张桌子，并不断得到相同的结果。结果不断给我列 meetingDepts 中的 deptID 结果“1、2、3”，而不是“Admin、Marketing、Accounting”。这些是表格：

**会议**

会议 ID、会议日期、会议部门

**部门**

部门 ID、部门名称

我创建了一个 sql 语句：

```
 SELECT * FROM Meeting INNER JOIN Departments 
  ON Meeting.meetingDepts =  Departments.deptID 
```

我经历了如此多的代码迭代，我没有任何值得放在这里的东西。我已经搜索了数百个帖子，但没有找到我要查找的内容，或者至少没有想到要搜索的正确关键字。

我想我正在寻找“你会做什么？” 因为我对此没有想法。非常感谢您的帮助。

* * *

今天我用下面的代码更接近了一点，但它给了我数组的整数。我需要能够输出部门名称：

$meetings = explode(", ", $row_rsCurMeet['meetDepts']); $tmp = 数组（）；foreach ($meetings as $meeting) $tmp[] = $meeting['deptName']; //不回显名称 echo implode(' ',$tmp); // 只回显 meetDepts 号码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:09:42.353

你应该得到`deptName`。

```
SELECT deptName
    FROM Departments
INNER JOIN Meeting ON Meeting.meetingDepts = Departments.deptID 
```

问题是`meetingDepts`只有id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:09:56.757

用这个：

```
SELECT deptName FROM Meeting INNER JOIN Departments ON Meeting.meetingDepts = Departments.deptID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:09:58.067

试试这个查询

```
SELECT * FROM Meeting INNER JOIN Departments ON Meeting.meetingDepts = Departments.deptName 
```

那应该给你部门名称。

# java - Java - 在输入 jTextArea 时，将焦点设置到相应的 jButton

> ID：13833801
> 
> 赞同：1
> 
> 时间：2012-12-12T06:05:51.643
> 
> 标签：java, swing, awt, jbutton, jtextarea

所以我必须为分配创建一个 jTextbox 和一个键盘。当我输入时，我需要相应的 jButton 来改变颜色。

所以目前，当我运行时，焦点在jTextbox上，我可以输入，但我不能将焦点设置到按钮上。

一些帮助将不胜感激。谢谢

```
private void aButtonKeyPressed(java.awt.event.KeyEvent evt) {
    if (evt.getKeyCode() == KeyEvent.VK_A)
    {
       aButton.setBackground(Color.red);           
    } 
}

private void aButtonKeyReleased(java.awt.event.KeyEvent evt) {
    if (evt.getKeyCode() == KeyEvent.VK_A)
    {
        aButton.setBackground(Color.LIGHT_GRAY);
    }
}

private void sButtonKeyPressed(java.awt.event.KeyEvent evt) {
    if (evt.getKeyCode() == KeyEvent.VK_S)
    {
       sButton.setBackground(Color.red);           
    }
}

private void sButtonKeyReleased(java.awt.event.KeyEvent evt) {
    if (evt.getKeyCode() == KeyEvent.VK_S)
    {
       sButton.setBackground(Color.LIGHT_GRAY);           
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:23:22.090

有一个实现 KeyListener 的公共类并将该类提供给 JButtons。

有一个 Map 来存储 Key Code 和 JButton

```
Map<Integer, JButton> keyCodeButtonMap = new HashMap<Integer, JButton>();
keyCodeButtonMap.put(KeyEvent.VK_A, aButton); // Example 
```

将所有 KeyEvent 虚拟键与正确的按钮一起添加到地图中。

```
private void buttonKeyPressed(java.awt.event.KeyEvent evt) {
    keyCodeButtonMap.get(evt.getKeyCode()).setBackground(Color.RED);
    keyCodeButtonMap.get(evt.getKeyCode()).setForeground(Color.RED);
}

private void buttonKeyReleased(java.awt.event.KeyEvent evt) {
    keyCodeButtonMap.get(evt.getKeyCode()).setBackground(Color.LIGHT_GRAY);
    keyCodeButtonMap.get(evt.getKeyCode()).setForeground(Color.LIGHT_GRAY);
} 
```

理想情况下，这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:25:13.103

我认为您不想将焦点设置为`JButton`（否则您将无法输入`JTextArea`/`JTextField`等），也许您希望它更改颜色并在输入某个字符时使其单击？

*   使用 Swing 组件时，请按照其他人的建议使用[KeyBindings 。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

这是我做的一个例子：

![在此处输入图像描述](../Images/42425bf7ae92798ef5e87b4a8d98e15b.png)

当`.`被按下时，按钮背景将变为蓝色（并且按钮方法将调用`SPACE`在“。”之后自动插入）：

![在此处输入图像描述](../Images/e3e9008adf56d2f737e9b8b846d57a84.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class Test {

    final JFrame frame = new JFrame();
    final JTextField jtf = new JTextField(15);
    final JButton button = new JButton("SPACE");

    public Test() {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() {

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                insertSpace();
            }
        });

        final Color defaultColor = button.getBackground();

        jtf.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_PERIOD, 0, true), "period rel");
        jtf.getActionMap().put("period rel", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                //button.doClick(); //I dont like this as it makes JBUtton look like its being clicked where as we want a color change
                insertSpace();
                button.setBackground(defaultColor);
            }
        });

        jtf.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_PERIOD, 0), "period pressed");
        jtf.getActionMap().put("period pressed", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                button.setBackground(Color.CYAN);
            }
        });

        frame.add(jtf, BorderLayout.NORTH);
        frame.add(button, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }

    private void insertSpace() {
        String s = jtf.getText();
        jtf.setText(s + " ");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:22:49.933

您可能想查看[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。
但如果你真的想要 KeyListener，试试这个。

 `````
 yourJtextField.addKeyListener(new KeyAdapter() {

       @Override
       public void keyPressed(KeyEvent e){
          if( e.getKeyCode() == KeyEvent.VK_A ){
             aButton.setBackground(yourColor);
          }
       }

       @Override
       public void keyReleased(KeyEvent e){
          aButton.setBackground(yourDefaultColor);
       }

    }); 
`````

# php - 500 - 蛋糕 php 网站配置中的内部服务器错误

> ID：13833802
> 
> 赞同：-3
> 
> 时间：2012-12-12T06:06:01.363
> 
> 标签：php, cakephp

在此处的蛋糕 php 网站源中，我的本地 PC 配置正确，但在实时服务器问题中显示为错误 **500 - 内部服务器错误。您要查找的资源有问题，无法显示。**

如何解决 cakephp 站点配置中的此错误？

这里我的网站详细信息链接[http://www.florentserieye.com/](http://www.florentserieye.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:16:49.430

这意味着您的代码存在内部错误。尝试定位 php 错误日志文件或 apache 错误日志，它们将有信息告诉您错误发生的确切位置。确保在 .php 中启用了 php 错误日志记录`php.ini`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:19:16.157

您必须在 appache 配置文件（httpd.conf）中启用**LoadModule rewrite_module modules/mod_rewrite.so**

# iphone - 如何使用目标 c 中的代码保存视频？

> ID：13833803
> 
> 赞同：2
> 
> 时间：2012-12-12T06:06:03.643
> 
> 标签：iphone, objective-c, ios

我使用objective c捕获了一个视频，但是我无法将其保存在iphone照片库中。我不想使用AlAssets库，我只想使用图像选择器。我在堆栈上看到了很多方法溢出和其他站点，但它们要么使用存储位置路径（未提及它是什么），要么它们不起作用。这是我的一段代码。

```
-(IBAction)Onclick:(id)sender
{
    UIImagePickerController *imagePicker = [[UIImagePickerController

                                             alloc] init];
    imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;
    imagePicker.mediaTypes =  [NSArray arrayWithObject:(NSString *)

                               kUTTypeMovie];
    imagePicker.delegate = self;
    //UISaveVideoAtPath
    imagePicker.allowsImageEditing = NO;
    [self.view addSubview:imagePicker.view];
    [imagePicker viewWillAppear:YES];

    CGRect overlayFrame = CGRectMake(0, 380, 320, 44);
    //UILabel *lbl=[[UILabel alloc]init];
    UIView *baseView = [[[UIView alloc] init] autorelease];
    baseView.backgroundColor =[UIColor greenColor];
    //lbl.text=@"dfgfdgfd";
    baseView.frame=overlayFrame;
    //view.delegate = self;
    //view.picker = picker;
    //[view customize];
    imagePicker.cameraOverlayView = baseView;

    [self presentModalViewController:imagePicker animated:YES]; 

}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

    if ([mediaType isEqualToString:@"public.image"]){
        UIImage *picture = [info objectForKey:UIImagePickerControllerOriginalImage];
        UIImageWriteToSavedPhotosAlbum(picture, nil, nil, nil);
    }
    else if ([mediaType isEqualToString:@"public.movie"]){

        NSURL *url = [[[info objectForKey:UIImagePickerControllerMediaURL] copy] autorelease];

//        ALAssetsLibrary* library = [[[ALAssetsLibrary alloc] init] autorelease];
//        [library writeVideoAtPathToSavedPhotosAlbum:url
//                                    completionBlock:^(NSURL *assetURL, NSError *error){/*notify of completion*/}];
UISaveVideoAtPathToSavedPhotosAlbum(url, nil, nil, nil);
    }

    [self dismissModalViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T06:12:51.967

尝试这个：

```
- (void) imagePickerController: (UIImagePickerController *) picker
 didFinishPickingMediaWithInfo: (NSDictionary *) info
{
        NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

         [self dismissViewControllerAnimated:YES completion:nil];

        // Handle a movie capture
        if (CFStringCompare (( CFStringRef) mediaType, kUTTypeMovie, 0)
            == kCFCompareEqualTo)
        {

            NSString *moviePath = [[info objectForKey:
                                    UIImagePickerControllerMediaURL] path];
            if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath))
            {
                UISaveVideoAtPathToSavedPhotosAlbum (moviePath,self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
            }

        }
    }
}
- (void)video:(NSString*)videoPath didFinishSavingWithError:(NSError*)error contextInfo:(void*)contextInfo
{
    if (error)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Photo/Video Saving Failed"  delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles: nil, nil];
        [alert show];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Photo/Video Saved" message:@"Saved To Photo Album"  delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
} 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:30:05.377

尝试这个：

```
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library writeVideoAtPathToSavedPhotosAlbum:videoURL completionBlock:^(NSURL *assetURL, NSError *error){
       /*notify of completion*/
       NSLog(@"AssetURL: %@",assetURL);
       NSLog(@"Error: %@",error);
       if (!error) {
            //video saved

       }else{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:error.domain delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
                [alert show];
                [alert release];
       }

}]; 
```

# mysql - Mysql - 存储过程 OUT 变量返回 null

> ID：13833804
> 
> 赞同：1
> 
> 时间：2012-12-12T06:06:06.983
> 
> 标签：mysql, variables, stored-procedures, null, out

我的表结构是：

```
DROP TABLE IF EXISTS `child`;

CREATE TABLE `child` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `map_parent_child`;

CREATE TABLE `map_parent_child` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) NOT NULL,
  `child_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_parent_child` (`parent_id`,`child_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `parent`;

CREATE TABLE `parent` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我创建了一个存储过程，例如

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `test`.`sp_parent`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_parent`(
    IN parent_name VARCHAR(255),
    IN child_name VARCHAR(255),
    OUT parent_id INT(11))
BEGIN   
    DECLARE parent_id INT DEFAULT 0;
    DECLARE child_id INT DEFAULT 0;

    START TRANSACTION;

        INSERT INTO `parent` (`name`) VALUES(parent_name);      

        SET parent_id = LAST_INSERT_ID();

        INSERT INTO `child` (`name`) VALUES(child_name);

        SET child_id = LAST_INSERT_ID();

        INSERT INTO `map_parent_child` (`parent_id`,`child_id`) VALUES(parent_id,child_id); 
    commit;
END$$
DELIMITER ;

CALL sp_parent("test", "test", @parentid); 
```

但是当我尝试使用 select 获取输出变量时，我得到 NULL 但是所有 INSERT 语句都可以正常工作并将记录添加到数据库表中。

```
SELECT @parentid; 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T01:03:41.137

您现在可能已经解决了这个问题，但是我注意到您的存储过程的第一件事是您有一个与输出变量 ( ) 同名的局部变量`parent_id`。在我看来，您正在设置局部变量的值而不是返回变量，因此调用者永远不会看到正确的值。

也许删除局部`parent_id`变量声明会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:12:56.770

设置变量的语法不正确，使用`:`like，

```
SET parent_id := LAST_INSERT_ID();
 SET child_id := LAST_INSERT_ID(); 
```

或者您可以将设置设置为

```
select LAST_INSERT_ID() into parent_id; 
```

# sitecore - 如何以编程方式将项目发送到工作流？

> ID：13833805
> 
> 赞同：2
> 
> 时间：2012-12-12T06:06:13.067
> 
> 标签：sitecore, sitecore6, sitecore-workflow

我有一个“项目”模板，该模板上的工作流“项目工作流”以及从项目模板创建的许多项目。

作为非管理员用户，当我编辑项目项目时，它会被发送到工作流。如果我以管理员身份登录，则不会发生这种情况，因为管理员用户会忽略工作流程。

我有一个批量导入过程，我通过 Sitecore API 编辑项目：

```
updateItem.Editing.BeginEdit();
updateItem.Versions.AddVersion();
updateItem.Fields["x"] = someVal;
updateItem.Fields["y"] = someOtherVal;
updateItem.Fields["z"] = yetAnotherVal;
updateItem.Editing.EndEdit(); 
```

当我以管理员身份运行此批量导入代码时，我希望我的项目通过工作流程，以便人工参与批准或拒绝导入的项目 - 但这不会发生，因为管理员用户忽略了工作流程。

有没有办法以编程方式将我修改的项目发送到工作流？有一个 Item.State.GetWorkflowState()，但似乎没有对应的 SetWorkflowState()。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:23:26.963

未经内容批准者批准发布内容不是一个好方法。

我对此不是 100% 确定，因为我还没有尝试过。

这是我找到的代码：

```
//add to workflow if requried and place it in start state and then execute the final stage
Sitecore.Workflows.IWorkflow workflow = master.WorkflowProvider.GetWorkflow(newItem);
workflow.Start(newItem);
workflow.Execute(Config.AutoPublishCommandID, newItem, "auto approved", false); 
```

对于发布：

```
//publish to pre-defined targets and langugaes
Database[] targetDBs = new Database[] {        Sitecore.Configuration.Factory.GetDatabase("web") };
Language[] languages = new Language[] { LanguageManager.GetLanguage("en") };
Sitecore.Publishing.PublishManager.PublishIncremental(master, targetDBs, languages); 
```

# datagridview - 如何在datagridview c#.net win应用程序中将一列格式化为货币列

> ID：13833806
> 
> 赞同：1
> 
> 时间：2012-12-12T06:06:17.633
> 
> 标签：datagridview, currency-formatting

在我的 datagridview 中，一列使用格式属性，在另一列中它不起作用，为什么？我试过这个

```
 private void dgvItemDtls_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
          dgvItemDtls.Columns["SlNO"].DefaultCellStyle.Format = "C2";

          dgvItemDtls.Columns["Price"].DefaultCellStyle.Format = "C2";
    } 
```

从上面的代码中，Formate 在**Columns["SlNO"]**中工作，但不适用于**Columns["Price"]**为什么我不明白，但我希望**Columns["Price"]**将是货币列 plzz 任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:25:37.800

您可以在设计时格式化列。

# iphone - 减少安全 UITextField 中圆圈出现的延迟

> ID：13833808
> 
> 赞同：1
> 
> 时间：2012-12-12T06:06:29.430
> 
> 标签：iphone, xcode, ipad, security, uitextfield

我有一个 UITextField，我想在其中输入密码，而且我在 IB 中设置了 UITextField 安全属性。现在，我的问题是，当我输入密码时，它会显示一段时间的字符，然后显示黑圈，我怎样才能减少这种延迟？

# java - 如果我尝试读取的文件与我正在使用的 java 文件位于同一个包中，为什么我仍然收到“FileNotFoundException”？

> ID：13833814
> 
> 赞同：0
> 
> 时间：2012-12-12T06:07:07.450
> 
> 标签：java, eclipse, exception, filenotfoundexception

我试图在我的 java 程序中读取一个文件，`HelloJavaTest.java` 但我不断收到`FileNotFoundException`错误。

我要导入的文件 ( ) 与(package: java_files)`hello.txt`在同一个包中。`HelloJavaTest.java`

这是我尝试编译代码时弹出的消息：

```
Exception in thread "main" java.io.FileNotFoundException: \java_files\hello.txt (No such file or directory)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:120)
at java.util.Scanner.<init>(Scanner.java:636)
at java_files.HelloJavaTest.main(HelloJavaTest.java:42) 
```

这是我的代码顶部的内容：

```
import java.io.*;  // for File
import java.util.Scanner; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:38:59.620

正如评论正确指出的那样，文件读取和导入包是不相关的。

这里`\java_files\hello.txt`看起来程序正在尝试`java_files`在根目录中查找目录`\`，但无法找到它。

如果文件位于项目中，则不应摆弄路径。

尝试使用

```
URL url = Main.class.getClassLoader().getResource("test.txt");
System.out.println(url.getPath());
File f = new File(url.getPath()); 
```

使用**类加载器**查找资源。

# ios - 从 iOS 应用程序截屏 - 模拟显示记录器（内部查询）

> ID：13833816
> 
> 赞同：4
> 
> 时间：2012-12-12T06:07:12.380
> 
> 标签：ios, jailbreak, iphone-privateapi, ios6

作为实验的一部分，我需要创建一个 iOS 应用程序，它可以截取其他应用程序、视频等的屏幕截图。我愿意使用私有 API，因为我不会将应用程序发布到应用程序商店。我可以成功地使用 GetUIScreenImage() 方法拍摄当前屏幕（应用程序屏幕）的快照。

但是，由于沙盒限制，我无法在后台截取屏幕截图。我收到错误消息 - “应用程序处于后台时无法调用 CreateUIScreenImage()”。

我参考了这篇文章[——iOS 应用 Display Recorder 如何在不使用私有 API 的情况下录制屏幕？](https://stackoverflow.com/questions/11090184/how-does-the-ios-app-display-recorder-record-the-screen-without-using-private-ap)建议使用 IOMobileFramebuffer 和 IOSurface 绕过沙箱限制，还有这个链接 - [http://www.iphonesheep.com/2009/11/25/iphone%E2%80%99s-framebuffer-secrets-revealed/](http://www.iphonesheep.com/2009/11/25/iphone%E2%80%99s-framebuffer-secrets-revealed/)。但我无法获得创建和转移表面的流程。非常感谢有关此主题的任何帮助。

另外，有没有办法在越狱设备的后台调用 UIGetScreenImage() ？

**更新：**
我能够掌握主屏幕表面并将其放在应用程序层上，但我的用例是能够打开其他应用程序并能够通过我创建的应用程序记录它们。然而，我粘贴在我的应用层上的表面是静态的。

**编辑**
这里是我的理解- 附加到主显示层的主屏幕表面需要放在当前层上。这样做之后，我应该能够浏览其他应用程序，从刚刚粘贴的表面打开它们。

这是代码（它将主屏幕表面放在应用程序层的顶部，但我无法使用该表面，即打开应用程序等）：

```
IOMobileFramebufferConnection connect;
kern_return_t result;
CoreSurfacebufferRef screenSurface = NULL;
io_service_t framebufferService = IOServiceGetMatchingService (kIOMasterPortDefault, IOServiceMatching ("AppleH1CLCD"));
if(!framebufferService)
        io_service_t framebufferService = IOServiceGetMatchingService (kIOMasterPortDefault, IOServiceMatching ("AppleM2CLCD"));
if(!framebufferService)
        io_service_t framebufferService = IOServiceGetMatchingService (kIOMasterPortDefault, IOServiceMatching ("AppleCLCD"));
result = IOMobileFramebufferOpen( framebufferService, mach_task_self(), 0 , &connect);
result = IOMobileFramebufferGetLayerDefaultSurface(connect, 0, &screenSurface);

CALayer *Layer;
Layer = [CALayer layer];
[Layer setFrame: CGRectMake(0, 0, 768, 1024)];
[Layer setOpaque:YES];
IOSurfaceLock(screenSurface, 0, NULL);
[Layer setContents: (_bridge id)(screenSurface)];
IOSurfaceUnlock(screenSurface, 0, NULL);
[self.view.layer addSublayer:Layer]; 
```

我知道我错过了一些东西并且做错了什么。如果您能指出这一点，那将是很大的帮助。

**更新**
我认为我的基本假设可能是错误的。
1\. 我的假设 -> 应用程序交换表面（或层），以便用户现在可以在主屏幕上浏览。该应用程序永远不会移动到后台。
2\. 什么听起来更正确 -> 应用程序移至后台。获取屏幕上最顶部的表面，从中创建图像并保存。请说清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T19:12:26.650

“获得创建和转移表面的流程”究竟是什么问题？您能否发布正在使用的代码并指出哪一行不起作用。

对于越狱设备：

转到 /Application/XCode/Content/Developer/Platforms 并将它的 grep 用于句子“Cannot call CreateUIScreenImage() while the app is in background”。你会在一些框架中找到它（我假设是 UIKit）。接下来，您可以对其进行反汇编，您会发现一些在后台进行屏幕截图所需的权利。

您可以在这里查看如何将权利与 ldid 一起用于越狱设备： [iOS 如何使用 Entitlement.plist 指定我的应用程序的属性](https://stackoverflow.com/questions/11069330/ios-how-to-use-entitlement-plist-to-specify-property-of-my-app)

# html - HTML contenteditable 红色下划线花体

> ID：13833819
> 
> 赞同：1
> 
> 时间：2012-12-12T06:07:32.397
> 
> 标签：html, contenteditable

这可能不是一个主要问题，但我在单击后得到这个红色波浪线下划线，表示拼写错误的单词。我可以让它以某种方式消失吗？当我输入我的名字（Haideri）时，它看起来有点烦人，这显然不存在于英语词典中。

我试过`text-decoration: none`了，但它不起作用。

[这](http://jsfiddle.net/alihaideri/xeFZ6/)是小提琴。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T06:11:31.357

您可以将以下标记添加到 contenteditable div，尽管我相信它只会在支持 HTML5 的浏览器中起作用：

```
spellcheck="false" 
```

# android - 为 Eclipse 安装 libGDX 时出错

> ID：13833821
> 
> 赞同：2
> 
> 时间：2012-12-12T06:07:36.217
> 
> 标签：android, eclipse, libgdx

我目前正在尝试为 Eclipse IDE 安装 libGDX。在设置 libGDX 并安装它后，我收到了一些错误。一开始我以为是我没有安装GWT SDK，确实如此，所以我安装了它。它纠正了其中一个错误，但这两个仍然存在。[我正在关注GetStarted](http://libgdx.badlogicgames.com/getstarted.html)的入门视频。我收到了这两个似乎是一起出现的错误：

```
(1)
Description: The project cannot be built until build path errors are resolved
Resource: my-gdx-game-html
Path: n/a       
Location: Unknown
Type: Java Problem

(2)
D: Unbound classpath container: 'GWT SDK [missing]' in project 'my-gdx-game-html'   
R: my-gdx-game-html
P: n/a
L: Build path
T: Build Path Problem 
```

我尝试过快速修复选项（通过右键单击问题中的错误本身），但是当我进入一个新窗口时，它在“选择修复”下为我提供了几个选项，“配置构建路径”或“替换为其他库。选中我的资源“my-gdx-game-html”后，我选择“完成”，这会立即将我带到 Java 构建路径。它会自动将我带到“订购和导出”选项卡，我尝试使用 8 个选项（7 个可点击）来选择各种选项并希望得到修复。但是，在选择“确定”后，每次都会产生相同的结果，并且什么也没有发生。我现在很不确定该怎么做，还没有在网上找到其他答案。有什么建议么？有人知道吗？有人有链接可以引导我到别处吗？我已经搜索了几个小时了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T01:45:17.053

安装 Google Web Toolkit（使用正确的 Eclipse 版本）：

[https://developers.google.com/web-toolkit/usingeclipse](https://developers.google.com/web-toolkit/usingeclipse)

# shell - 如何在 find exec 中运行子命令

> ID：13833824
> 
> 赞同：9
> 
> 时间：2012-12-12T06:07:59.633
> 
> 标签：shell

如何在 find 的 exec 中运行子命令？例如，如果我只想从完整路径中获取文件名并打印它，我会开火，

```
find ./ -name "*.csv" -exec echo $(basename {}) \; 
```

其中 echo 是子​​命令 basename 的父命令。

但结果是一样的，

```
find ./ -name "*.csv" -exec echo {} \; 
```

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T07:27:31.393

这就是您要查找的内容：

```
find . -name "*.csv" -exec sh -c 'echo $(basename "$1")' sh {}  \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:10:30.900

与往常一样，调用一个 shell 来运行它。

```
find ... -exec bash -c "... $1 ..." subshell {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:35:16.330

@Ignacio's 是严格正确的，虽然偏向于特定的外壳，而不是建议使用 POSIX 标准外壳......

但是，您尝试做的事情是使用过滤器更有效地完成。即，您正试图找到一种方法来`find`转换它将要打印的每个路径名，但这会导致 find 为它匹配的每个文件名派生一个 shell 进程！

为了提高效率，您应该尝试找到一种方法，将`find`可能产生的路径名列表转换为您希望在其中看到它们的形式，并且只需要一个额外的过程即可。

例如，如果您只想看到每个路径名的基本名称（即最终文件名组件），那么您可以使用（相对）简单的`sed`命令轻松完成此操作，您可以`find`通过管道输出以生成所需的文件名列表：

```
sed '/^[^/]*$/p;s/.*\/\([^/]*\)$/\1/p' 
```

# java - 用于独立服务器的 JProfiler

> ID：13833826
> 
> 赞同：1
> 
> 时间：2012-12-12T06:08:07.827
> 
> 标签：java, jprofiler

我正在为我的 tomcat 应用程序使用 jprofiler 一段时间。现在我使用 java HttpServer 制作了一个 HttpServer 应用程序（不使用 anu 容器）。是否可以为该独立应用程序配置 jprofiler。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:19:45.010

`-agentpath...`可以通过向其添加VM 参数来分析任何 JVM 。`-agentpath...`要获得有关VM 参数的确切形式的帮助，请调用

会话->集成向导->新建远程集成

在 JProfiler 的主菜单中。

# c++ - 伽罗瓦域算法的实现

> ID：13833829
> 
> 赞同：9
> 
> 时间：2012-12-12T06:08:18.493
> 
> 标签：c++, finite-field, galois-field

你知道C++中[伽罗瓦域算术的实现吗？](http://en.wikipedia.org/wiki/Galois_field)至少应该涵盖像 GF(2 ^(16) ) 和 GF(2 ^(32 ) 这样的情况。)性能是一个问题，因此实施应该考虑优化其操作。

我更喜欢一个通用的计算库或一个专门用于此任务的小型库。缺少这些，我也欢迎一些可读的源代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T08:00:57.377

我在关于[有限域算术](http://en.wikipedia.org/wiki/Finite_field_arithmetic)的维基百科文章中找到了 Arash Partow的[伽罗瓦域算术库](http://www.partow.net/projects/galois/index.html)的链接。

乍一看，代码看起来几乎完全没有注释，但以结构化的方式编写，因此可以理解。不过，性能似乎并不是一个重要的设计标准：内联函数的使用相当有限，而且一般来说，理论数学的直接符号似乎被认为比使用计算捷径更重要。为了完整起见，我在此处列出此内容，以便您可以查看，形成自己的意见，并可以相应地投票或发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:27:14.667

也许您可以使用在[crypto++](http://www.cryptopp.com/)中实现[GCM 模式](http://www.cryptopp.com/wiki/GCM)的代码（特别是[gcm.cpp](http://www.cryptopp.com/docs/ref/gcm_8cpp_source.html)）。Crypto++ 是一个免费的 C++ 库，实现了许多加密方案。其中包括使用伽罗瓦域算法的 GCM。

根据[许可](http://www.cryptopp.com/License.txt)，图书馆本身是受版权保护的，而单个源文件是公共领域的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:05:51.713

有一个名为 NTL 的库： http: [//www.shoup.net/ntl/](http://www.shoup.net/ntl/)。虽然它的源代码不是很“可读”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T10:12:55.527

寻找代数数时，我偶然发现了[这个](https://stackoverflow.com/a/7519107/1468366)建议[Givaro](http://ljk.imag.fr/CASYS/LOGICIELS/givaro/)的答案。看着它，我发现它也做 GF( *^(pk)* *)*算术。[文档](http://givaro.forge.imag.fr/givaro-html/givgfq_8h.html)很薄，但[来源显示](https://forge.imag.fr/scm/viewvc.php/trunk/src/kernel/zpz/givgfq.inl?view=markup&root=givaro)[了](https://forge.imag.fr/scm/viewvc.php/trunk/src/kernel/zpz/givgfq.h?view=markup&root=givaro) 相当多的代码和努力。还没有深入研究细节，但我想我会把它包括在我的列表中。

# ms-access - MS Access - 如何根据 ID 和日期在同一行显示来自不同记录的两个字段？

> ID：13833836
> 
> 赞同：3
> 
> 时间：2012-12-12T06:08:39.150
> 
> 标签：ms-access, concatenation, rows

我不知道这是否可能，或者我的数据库设计不佳，我本可以做得更好？

无论如何，我有两个表的数据库，如下“ `General Data`”和“ `Assessment Data`”-它们的设置是为了让患者可以将一些基本细节输入到“通用数据”中，然后每次他们进行评估时都有数据与进入“评估数据”表的评估相关

抱歉，格式不正确！没有足够的声誉点来上传图片:(

***一般数据***

```
**ID --     Age (Years) --  Gender --   Town    ------ Referral Source --   Referral Doctor's Name**

1----   12----------------  Male--------    Batlow----- GP Referral----------   Smith

2----   13----------------  Male    --------Coolamon-   GP Referral ---------Bobby 
```

***评估数据***

```
**ID -- Date of Assessment -----    Height (cm) ----- Weight (kg)**

1----   6/12/2012--------------------   100-------------------- 80

1----   13/12/2012------------------    100-------------------- 85

2----   25/12/2012  ------------------200--------------------   90

2----   28/12/2012------------------    200 ------------------- 90 
```

我想做的是创建一个查询，该查询将创建如下内容

***询问？***

```
**ID - - Height 1 - - Weight 1 - - Height 2 -- Weight 2 - - Height 3 - - Weight 3 etc...**

1 - - 100  - - - - - - - 80 - - - - - - - 100 - - - - - 85 - - - - - -  - - - - - - - - - - - - - - - - - 

2 - - 200 - - - - - - - 90 - - - - - - - 200 - - - -  - 90 - - - - - - - - - - - - - - - - - - - - - - - 
```

我对在另一个论坛上找到的连接函数和查询进行了一些尝试，但它不适合我想做的事情

任何帮助甚至为我指明正确的方向都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T07:30:25.170

您将需要使用几个交叉表查询来实现这一点。

首先，您需要使用以下查询对“评估数据”表进行排序，并将结果放入名为“Temp_AssessmentData”的临时表中。

```
 SELECT AssData.Id, AssData.[Date of Assessment], 
        (SELECT Count(*) 
             FROM [Assessment Data] 
             WHERE [Date of Assessment] < [AssData].[Date of Assessment] 
                 AND Id = [AssData].Id
        )+1 AS Sequence 
    INTO Temp_AssessmentData FROM [Assessment Data] AS AssData GROUP BY AssData.Id,
       AssData.[Date of Assessment]; 
```

然后你可以在两个子查询中使用这个临时表，一个获取重量值，另一个获取高度。

**qAssessmentData_Weight**

```
 TRANSFORM First([Assessment Data].[Weight (cm)]) AS [FirstOfWeight (cm)]
   SELECT Temp.Id
   FROM [Assessment Data] 
       INNER JOIN Temp_AssessmentData AS Temp ON (
          [Assessment Data].[Date of Assessment] = Temp.[Date of Assessment]) 
          AND ([Assessment Data].Id = Temp.Id)
   GROUP BY Temp.Id
   PIVOT "Weight " & [Sequence]; 
```

**qAssessmentData_Height**

```
 TRANSFORM First([Assessment Data].[Height (kg)]) AS [FirstOfHeight (kg)]
   SELECT Temp.Id
   FROM [Assessment Data] 
       INNER JOIN Temp_AssessmentData AS Temp ON (
          [Assessment Data].[Date of Assessment] = Temp.[Date of Assessment]) 
          AND ([Assessment Data].Id = Temp.Id)
   GROUP BY Temp.Id
   PIVOT "Height" & [Sequence]; 
```

然后，您可以将这两个子查询连接在一起，然后获取所需的查询

```
SELECT Sub_Height.Id, Sub_Weight.[Weight 1], Sub_Height.[Height 1], 
    Sub_Weight.[Weight 2], Sub_Height.[Height 2]
FROM qAssessmentData_Height AS Sub_Height, qAssessmentData_Weight AS Sub_Weight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:26:43.510

尝试这个：

> ```
> select * from general_data 
> INNER JOIN assessment_data ON general_data.id = assessment.id 
> ```

# c# - Convert.ToDouble 在法语系统中引发错误

> ID：13833840
> 
> 赞同：2
> 
> 时间：2012-12-12T06:08:57.860
> 
> 标签：c#, winforms

将字符串值转换为双精度值时遇到问题。例如：

```
string val="2.0";
double dval=Convert.ToDouble(val); 
```

在法语系统上执行此代码时会引发错误，因为在法语中他们使用 ,(comma) 而不是 .(dot)。

有什么解决办法？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T06:12:06.100

```
Convert.ToDouble(val, System.Globalization.CultureInfo.InvariantCulture); 
```

或者

```
Double.Parse(val, System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:15:46.043

使用正确的文化来解析数据。

如果“2.0”来自某些标准源（即 XML），请使用`CultureInfo.InvariantCulture`（如 abatishcev 建议的那样）。

如果“2.0”来自已知文化的用户输入 - 使用该文化（en-US 示例）：

```
double dval = Double.Parse("2.0", new CultureInfo("en-US")); 
```

如果它来自本地用户的输入，它应该在正确的用户文化设置中 - 对于“fr-FR”应该是“2,0”。

如果您不知道输入“2.0”值时使用了什么文化，最好停下来想想应该使用什么文化。

# ios - 为什么我的自动布局约束不起作用？

> ID：13833841
> 
> 赞同：0
> 
> 时间：2012-12-12T06:09:01.677
> 
> 标签：ios, xcode, ios6

我有以下表视图控制器（它实际上是 UITableViewController 的自定义子类）：

![在此处输入图像描述](../Images/d83844f422132f3d1ad59bf0c3ea1fa6.png)

我想要的是`Make:`'s 标签`Model:`从前面与 's 对齐，我认为这是领先的。（基本上我希望单词从同一个 x pos 开始）

我有以下代码来完成此操作：

```
 NSLayoutConstraint *constraint = [NSLayoutConstraint
        constraintWithItem:self.carMakeLabel
        attribute:NSLayoutAttributeLeading
        relatedBy:NSLayoutRelationEqual
        toItem:self.carModelLabel
        attribute:NSLayoutAttributeLeading
        multiplier:1.0
        constant:0];

    [self.view addConstraint:constraint]; 
```

但是当我运行它时，它们会保持在下面的屏幕截图中。此外，应用程序会在一段时间后崩溃。（按照线程 1 的内容说：EXC_BREAKPOINT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:08:45.697

您不需要在代码中添加约束，您应该能够在 IB 中完成所有操作。有时可能很难做到，但如果将单元格中的标签垂直居中，并在左右两侧给它们与超级视图相同的固定距离，那么它们将被对齐。

我不确定您是否可以在两个单元格中执行您尝试执行的那种约束。

# android - 在android中使用倒数计时器显示天时分秒时的倒计时问题

> ID：13833850
> 
> 赞同：3
> 
> 时间：2012-12-12T06:09:45.023
> 
> 标签：android

我在我的应用程序中使用倒数计时器，我需要以天数小时分钟和秒数显示即将到来的日期。我得到了天、小时、分钟和秒，但是当我将其设置为文本视图时，倒计时不会开始。下面是我的代码。

```
Date date = new Date(2013,Integer.parseInt(datess.get(k).split("-")[1])-1,Integer.parseInt(datess.get(k).split("-")[0]),hours,mins,secs);  
     long dtMili = System.currentTimeMillis();  
     Date dateNow = new Date(dtMili);  
      remain = date.getTime() - dateNow.getTime();

MyCount counter = new MyCount(remain,1000);
            counter.start();

public class MyCount extends CountDownTimer{
    public MyCount(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
        }

    @Override
    public void onFinish() {
        // TODO Auto-generated method stub

        tv3.setText("done");
    }

    @Override
    public void onTick(long millisUntilFinished) {
        // TODO Auto-generated method stub

        tv3.setText(timeCalculate(millisUntilFinished/1000) + " Countdown");

    }
}

 public String timeCalculate(long ttime)   
   {  
     long  daysuuu,hoursuuu, minutesuuu, secondsuuu;  
     String daysT = "", restT = "";  

     daysuuu = (Math.round(ttime) / 86400);  
     hoursuuu = (Math.round(ttime) / 3600) - (daysuuu * 24);  
     minutesuuu = (Math.round(ttime) / 60) - (daysuuu * 1440) - (hoursuuu * 60);  
     secondsuuu = Math.round(ttime) % 60;  

     if(daysuuu==1) daysT = String.format("%d day ", daysuuu);  
     if(daysuuu>1) daysT = String.format("%d days ", daysuuu);  

     restT = String.format("%02d:%02d:%02d", hoursuuu, minutesuuu, secondsuuu);  

     return daysT + restT;  
   } 
```

这是输出

![在此处输入图像描述](../Images/fb649c14905cd6fe5f11c1974e02addd.png)

为什么倒计时没有开始？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T06:39:44.233

您没有使用该`millisUntilFinished`参数来更新您的时间`timeCalculate()`。从...开始：

```
@Override
public void onTick(long millisUntilFinished) {
    tv3.setText(millisUntilFinished + " Countdown");
} 
```

一旦您确认计时器正在工作，您将需要一种方法来转换`millisUntilFinished`为人类可读的字符串。

Java 中与日期和时间相关的类不必要地难以使用，并且有一些难以理解的错误。（例如，大部分 Date 类已被弃用，但推荐的 Calendar 类仍然严重依赖 Date...） 3rd 方库[Joda Time](http://joda-time.sourceforge.net/)是一个流行的替代品。

* * *

**添加**

> 输出不是我所期望的

未来 25,000 到 700 天也不是我所期望的，`date`似乎是错误的。[正如加布里埃尔在这个问题的另一个答案](https://stackoverflow.com/a/13893520/1267661)中指出的那样，年份值是从 1900 年开始计算的。虽然还有其他问题，因为 25,000 天是未来不到 70 年......
但是这个构造函数已被*弃用*，不应使用，日历是推荐的课程。我为你写了一个使用日历 的[快速演示。](http://pastebin.com/bhtSN2FU)

但是要明白 CountDownTimer 本身有几个基本缺陷：

*   每次`onTick()`调用 CDT 都会给总时间增加几毫秒，我注意到它每天可以轻松增加 7 分半钟。
*   由于第一个错误，最后一个错误`onTick()`可能不会被调用。从 5 开始倒数时，我通常会看到`"5, 4, 3, 2, <long pause>"`然后`onFinished()`显示`"0"`...

我在上一个问题中重写了 CDT：[android CountDownTimer - additional milliseconds delay between ticks](https://stackoverflow.com/a/12762416/1267661)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T15:32:39.970

您的问题是您没有正确使用 Date() 。

java.util.Date.Date(int year, int month, int day, int hour, int minute, int second)的参数，在第一个参数中使用0表示1900年。

您编写的代码计算未来近 2000 年的日期，然后减去当前时间，这使得倒计时很长 ;-)。

如果您将一行更改为，该应用程序应该可以工作

```
Date date = new Date(2013-1900,Integer.parseInt(datess.get(k).split("-")[1])-1,Integer.parseInt(datess.get(k).split("-")[0]),hours,mins,secs); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T13:46:33.583

亲爱的使用`Chronometer`。

```
int seconds;

    chronometer.setOnChronometerTickListener(new OnChronometerTickListener() 
                    {   
                        public void onChronometerTick(Chronometer chronometer) 
                        {
                            seconds = (int) ((SystemClock.elapsedRealtime() - chronometer.getBase()) / 1000);
                            String strTime = (seconds / 60) + ":" + (seconds % 60);
                            lblTime.setText(strTime);
                        }
                    });
                    chronometer.setBase(SystemClock.elapsedRealtime());
                    chronometer.start 
```

之后尝试工作。并根据需要获取日期和时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:26:16.640

试试这个代码

```
CountDownTimer countDown = new CountDownTimer(3000,1000) {

        @Override
        public void onTick(long millisUntilFinished) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub

        }
    };
    countDown.start(); 
```

# java - 如何用整数对 CIMValue 进行类型转换？

> ID：13833855
> 
> 赞同：-3
> 
> 时间：2012-12-12T06:10:06.517
> 
> 标签：java, authorize.net-cim

在我的代码中，我需要将 CIMValue 与整数进行比较。在这里我无法对它进行类型转换。

```
 CIMValue op ;
 if(op ! = 0 || 4096) // here i need to validate whether CIMValue is 0 or 4096 
```

**// 错误：不兼容的操作数类型 CIMValue 和 int**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:16:15.153

我认为你应该试试这个

```
 int iValue = (Integer)op.getValue();
        if(iValue ! = 0 || iValue ! = 4096) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:15:42.950

如果`CIMValue`覆盖`equals(...)`，请使用：

```
if(!op.equals(0) || !op.equals(4096)) 
```

或者可能：

```
int i = op.getValue() //????
if(i != 0 || i != 4096) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:17:13.457

我相信您指的是[SBLIM](http://sourceforge.net/apps/mediawiki/sblim/index.php?title=Main_Page)，所以：

```
Object value = op.getValue();
if (value instanceof Number) {
    if (value.equals(0) || value.equals(4096)) {
        // do your stuff
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T06:13:36.803

试试看

```
int value = (Integer)op.getValue();

if(value  ! = 0 || value  != 4096){
} 
```

# c - 将指向结构的指针传递给函数

> ID：13833863
> 
> 赞同：0
> 
> 时间：2012-12-12T06:10:42.120
> 
> 标签：c, arrays, structure

我在理解指针方面遇到了很多麻烦，而且我已经到了需要一点指导的地步。这是我到目前为止编写的代码：

```
#include <iostream>
#include <string>
#include <cstdlib>
#include <iomanip>

using namespace std;

//Declare structure
struct Airports{
    string name;
    string airID;
    double elevation;
    double runway;};

void dispdata(Airports *);
void getdata(Airports *);

int main()
{
    Airports *airptr; 
    airptr = new Airports [3];

    getdata(airptr);
    dispdata(airptr);

    system ("PAUSE");
    return 0;

}

void getdata(Airports *p)
{
    for (int i = 0; i < 3; i++)
    {
        cout << "Enter the name of airport " << i+1 << ": ";
        getline(cin, p->name);
        cout << "Enter the airport " << i+1 << " identifier: ";
        getline(cin, p->airID);
        cout << "Enter the elevation for airport " << i+1 << ": ";
        cin >> p->elevation;
        cout << "Enter the runway length for airport " << i+1 << ": ";
        cin >> p->runway;
        cout << endl;

        p++;
    }

    cout << "Thanks for entering your values!";
}

void dispdata(Airports *p)
{
    cout << "\nHere are the data values you entered:" << endl;
    cout << "\n\t\tAirport info" << endl;
    cout << "Airport\tAirID\tElevation\tRunway Length" << endl;
    cout << "----------------------------------------------------------------" << endl;

    cout << fixed << setprecision(2);

    for (int i = 0; i<3; i++)
    {
        cout << p[i].name << "\t" << p[i].airID << "\t" << p[i].elevation << "\t"     << p[i].runway << endl;
        p++;
    }

} 
```

这个想法是创建一个动态分配的结构数组，并将一个可以指向数组每个元素的指针传递给两个函数。这可以成功编译，但是因为我不太了解它的语法，所以它不会很好地结束。

我敢肯定，主要问题在于 getdata 函数。每次我尝试将其更正为我认为应该的方式时，我都会遇到语法错误。如何正确更改数组每个元素中指针指向的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:38:56.303

在您的`displaydata()`函数中，您将不得不删除`p++`，因为您也在增加 index `i`，因此每次迭代，您实际上是从数组中读取第二个下一个元素（在第 0 个元素之后，您将读取第 2 个，然后是第 4 个），并且因此，您将越过数组绑定。

此外，在您的`getdata()`方法中，由于 a`getline()`跟随 a `cin`（来自上一次迭代），未读的换行符`cin`将被视为 的下一个输入`getline()`。为避免此问题，请将其放在`cin.get()`循环的末尾。

因此，您需要进行 2 处更改：

```
void getdata(Airports *p)
{
    for (int i = 0; i < 3; i++)
    {
        cout << "Enter the name of airport " << i+1 << ": ";
        // ... skipping ...
        cin >> p->runway;
        cout << endl;
        cin.get();    // put this line to "absorb" the unwanted newline

        p++;
    }

void dispdata(Airports *p)
{
    // ... skipping ...
    for (int i = 0; i<3; i++)
    {
        cout << p[i].name << "\t" << p[i].airID << "\t" << p[i].elevation << "\t"     << p[i].runway << endl;
//        p++;    // remove this line, for reason described in the answer
    }

} 
```

此外，请避免使用`system("PAUSE");`此处讨论的原因：[system("pause"); - 为什么错了？](https://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong) 而是使用`cin.get()`或`getchar()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:35:00.307

我喜欢你构建程序的方式，这是理解使用指针和结构的概念的最简单方式。

我在您的代码中看到的唯一错误是，尽管您在主函数中创建了一个结构数组并将其传递给填充，但是您在 getdata( ) 和 dispdata() 函数。

因此，如果您必须使此代码片段有效，则需要访问基于索引的结构数组。例如`Airports *p[1] where 3<i>0`。

所以有两种方法可以修复你的代码

1.  要么传递一个结构而不是发送结构数组。
2.  将整个结构数组传递给 getdata 和 dispdata 函数并围绕结构集循环以分配值或显示每个结构的值（Airports *p）。

# requirejs - 自动在 Typescript AMD 模块中包含 AMD 部门？

> ID：13833875
> 
> 赞同：8
> 
> 时间：2012-12-12T06:12:40.110
> 
> 标签：requirejs, typescript

有没有办法导入或注释 Typescript 模块，以便在生成 AMD 兼容模块时将外部 AMD 模块自动包含为依赖项？：

```
tsc --module AMD example.ts 
```

我试图同时包含引用 *.d.ts 文件和导出声明语句：

```
///<reference path='./lib/knockout-2.2.d.ts' />

export declare var $;
export declare var _;

export module example {
    export class Example {
        // whatever
    }
} 
```

但是生成的模块不包括这些：

```
define(["require", "exports"], function(require, exports) {
    (function (example) {
        var Example = (function () {
            function Example() { }
            return Example;
        })();
        example.Example = Example;        
    })(exports.example || (exports.example = {}));
    var example = exports.example;
}) 
```

真的很想避免在这里创建“假”模块。

这似乎是一个不错的解决方案，并且允许直接导入 AMD 模块：

```
var $ = import('jquery'); // This is a requirejs/AMD module, not a typescript file. 
```

但我不知道这有多可行。

编辑：

而且我也尝试过这里提到的这种方法：[Import TypeScript module using only environment definition for use in amd](https://stackoverflow.com/questions/13013366/import-typescript-module-using-only-ambient-definition-for-use-in-amd)

```
import knockout = module("./lib/knockout-2.2.d.ts");
... 
```

但得到这些编译器错误：

```
example.ts(1,32): The name '"./lib/knockout-2.2.d.ts"' does not exist in the current scope
example.ts(1,32): A module cannot be aliased to a non-module type 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:52:20.157

这：

```
declare module 'jquery' { export var n; };

import $ = module('jquery');

export module foo {
    var n = $.n;
} 
```

将导致正确的`define`调用：

```
define(["require", "exports", 'jquery'], ... 
```

请注意，如果您不在*值*位置（而不是仅在类型位置）使用导入的值（`$`在此示例中），编译器将优化该依赖关系。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-06T15:16:46.730

在最新版本的 TypeScript 中，正确的方法是......

# 示例（恰好是 jQuery）

第一步：从 NuGet 下载定义文件（即 jquery.typescript）

第 2 步：这是代码（Visual Studio 中不需要参考注释）：

```
/// <reference path="scripts/typings/jquery/jquery.d.ts" />

import $ = require('jquery');

export module foo {
    var elem = $('#myid');
} 
```

生成的 JavaScript：

```
define(["require", "exports", 'jquery'], function(require, exports, $) {
    (function (foo) {
        var elem = $('#myid');
    })(exports.foo || (exports.foo = {}));
    var foo = exports.foo;
}); 
```

# 昏死

有些人在使用 Knockout 时遇到问题......同样的技术适用于 Knockout......

```
/// <reference path="scripts/typings/knockout/knockout.d.ts" />

import ko = require('knockout');

export module foo {
    var obs = ko.observable('example');
} 
```

生成的 JavaScript：

```
define(["require", "exports", 'knockout'], function(require, exports, ko) {
    (function (foo) {
        var n = ko.observable('example');
    })(exports.foo || (exports.foo = {}));
    var foo = exports.foo;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T10:45:58.903

Ryan 的回答有效，只是新声明隐藏了三重注释“.d.ts”文件中引用的类型。

为了克服这个问题，您可能想尝试像这样更改声明：

```
declare module 'knockout' { export = knockout; } 
```

我没有用淘汰赛进行测试，但解决方案也应该适用。*

# verilog - 我如何说服iverilog vpi 是系统功能而不是任务

> ID：13833880
> 
> 赞同：0
> 
> 时间：2012-12-12T06:12:57.833
> 
> 标签：verilog, icarus

我正在尝试在iverilog 中使用一个vpi 函数，该函数将在调用它后将一个值返回给verilog 测试台。它编译正常，但在我运行时返回以下内容

```
Error: $flash_dat() is a system task, it cannot be called as a function. 
```

我已将代码的相关部分放在下面。如果我能获得一个示例，包括使用在 iverilog 中返回一个值的 vpi 函数的编译和运行过程（我确实在 google 中搜索但没有得到任何 iverilog 的示例），或者获得指向我在这段代码中犯的错误。在此先感谢您的时间。

谢谢， 维奈

代码：verilog

```
always @(flash_adr) #110 flash_do <= $flash_dat(flash_adr); 
```

.sft 文件

```
$flash_dat vpiSysFuncInt 
```

flash_dat.c

```
 void flash_dat_register()
 {
  s_vpi_systf_data tf_data;
  tf_data.type      = vpiSysTask;
  tf_data.tfname    = "$flash_dat";
  tf_data.calltf    = flash_dat_calltf;
  tf_data.compiletf = flash_dat_compiletf;
  tf_data.sizetf    = 0;
  tf_data.user_data = 0;
  vpi_register_systf(&tf_data);
}

void (*vlog_startup_routines[])() = {
flash_dat_register,
0
};

static unsigned int flash_dat_calltf()
{
unsigned int addr= tf_getp(1);
tf_putp (0,((flash_array[addr+1]<<16)|flash_array[addr]));
return ((flash_array[addr+1]<<16)|flash_array[addr]);
} 
```

编译：

```
SOURCES=tb_norflash16.v flash_dat.sft $(wildcard ../rtl/*.v)

all: tb_norflash16 flash_dat.vpi

isim: 
vvp -M. -mflash_dat tb_norflash16

tb_norflash16: $(SOURCES)
iverilog -o tb_norflash16 $(SOURCES)

flash_dat.vpi: flash_dat.c flash_dat.sft
iverilog-vpi $^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:26:24.313

我认为 Icarus Verilog 不支持这一点。如果您查看[vpi 的 ivltest 套件，](https://github.com/steveicarus/ivtest/tree/master/vpi)测试是系统任务而不是功能。

您应该能够通过重写为任务调用来实现您想要的，并从 VPI 驱动输入/输出网络。查看[pokereg.cc](https://github.com/steveicarus/ivtest/blob/master/vpi/pokereg.cc)和[pokereg.v](https://github.com/steveicarus/ivtest/blob/master/vpi/pokereg.v)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:48:22.347

答案就在我眼前我需要改变

```
tf_data.type      = vpiSysTask; 
```

到

```
tf_data.type      = vpiSysFunc; 
```

谢谢您的帮助

# html - 如何在 IE6-8 中使用 HTML5 标签和 css3？

> ID：13833881
> 
> 赞同：0
> 
> 时间：2012-12-12T06:13:07.553
> 
> 标签：html, internet-explorer, css

我在我的页面中使用 HTML5 标签和 CSS。所以它在 IE6-8 中不起作用。所以我使用 html5.js 但也无法正常工作。并且还使用 ie7-squish.js。所以我的代码有什么问题。或任何其他方法或js可用。请帮我。提前致谢。我的 HTML 代码。

```
<!DOCTYPE html>
  <html>
    <head>
      <style type="text/css">
        body {
            padding-top: 40px;
            padding-bottom: 40px;
            background-color: #f5f5f5;
          }
          .form-signin {
            max-width: 300px;
            padding: 19px 29px 29px;
            margin: 0 auto 20px;
            background-color: #fff;
            border: 1px solid #e5e5e5;
            -webkit-border-radius: 5px;
               -moz-border-radius: 5px;
                    border-radius: 5px;
            -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
               -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
                    box-shadow: 0 1px 2px rgba(0,0,0,.05);
          }
          .form-signin .form-signin-heading,
          .form-signin .checkbox {
            margin-bottom: 10px;
          }
          .form-signin input[type="text"],
          .form-signin input[type="password"] {
            font-size: 16px;
            height: auto;
            margin-bottom: 15px;
            padding: 7px 9px;
          }
        </style>
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
      </head>
      <body>
        <div class="container">
          <form class="form-signin">
            <h2 class="form-signin-heading">Please sign in</h2>
            <input type="text" class="input-block-level" placeholder="Email address">
            <input type="password" class="input-block-level" placeholder="Password">
            <label class="checkbox">
              <input type="checkbox" value="remember-me"> Remember me
            </label>
            <button class="btn btn-large btn-primary" type="submit">Sign in</button>
          </form>
        </div>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:14:54.037

请参阅以下链接，这可能很有用，尽管可能无法完美呈现。 [http://net.tutsplus.com/tutorials/html-css-techniques/how-to-make-all-browsers-render-html5-mark-up-correctly-even-ie6/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-make-all-browsers-render-html5-mark-up-correctly-even-ie6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:17:37.483

试试 chrome frame，它是 Internet Explorer 的一个插件：[http ://www.google.com/chromeframe?quickenable=true](http://www.google.com/chromeframe?quickenable=true)

# c# - Windows Phone 8（仅限 C++）- 可以访问设备制造商吗？

> ID：13833882
> 
> 赞同：12
> 
> 时间：2012-12-12T06:13:08.240
> 
> 标签：c#, c++, interop, windows-runtime, windows-phone-8

目前正在用纯 C++/Direct3D 开发 Windows Phone 8 应用程序。我们现在需要访问设备制造商名称，但它似乎只能在 C# 下使用，根据我的研究，这种类型的应用程序无法访问它。

此页面列出了我想使用的一些调用：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.devicestatus](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.devicestatus(v=vs.105).aspx) (v=vs.105).aspx 。

```
// If only I could call this line from C++
DeviceStatus.DeviceManufacturer; 
```

无论如何，无需将应用程序重构为允许基本应用程序为 C# 的 XAML/C++ 混合应用程序即可获取此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:06:07.563

不在纯 C++/Direct3D 中，但如果您将 Direct3D 与 Xaml 项目模板一起使用，您将能够做到。

# javascript - 为什么此幻灯片没有以我的页面为中心？

> ID：13833887
> 
> 赞同：2
> 
> 时间：2012-12-12T06:13:47.193
> 
> 标签：javascript, html, css, center

这是我正在处理的网站的链接： http: [//students.bcitwebdev.com/jlandon/geordieirving/index.php](http://students.bcitwebdev.com/jlandon/geordieirving/index.php)。

我有一个问题......边距自动居中......但它有点偏离。其他人可以看到这个吗？真的很困扰我。

这是我的html：

```
<!DOCTYPE html>
<html lang="en">

<head>
<link rel="stylesheet" type="text/css" href="geordie.css" />
<script type="text/javascript" src="geordie.js"></script>

<title>Home</title>
<meta charset="UTF-8"/>

<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="./galleria/galleria-1.2.8.min.js"></script>
<script type="text/javascript" src="./galleria/plugins/flickr/galleria.flickr.min.js">    </script>

<script type="text/javascript">
$(document).ready(function(){

Galleria.loadTheme('./galleria/themes/classic/galleria.classic.min.js');
$("#galleria").galleria({
    autoplay: 5000,
    responsive: true,
    height: .57,
    imageCrop: false,
    thumbCrop: 'height',
    carousel: true,
    showInfo: true,
    swipe: true,
    easing: 'galleriaOut',
    transition: 'pulse',
    flickr: 'search:Vancouver Whitecaps FC vs. San Jose Earthquakes',
    flickrOptions: {
        max: 30
    }
});

});
</script>

</head>

<body>
<?php
//header
include("header.php");
?>

<div id="content">

<div id="galleria"></div>

</div>

<div id="footer"></div>

</body>

</html> 
```

这是我的CSS：

```
@font-face          {   font-family:"sketchscala";
                    src:url('sketchscalasans-webfont.ttf');
                }

@font-face          {   font-family:"gudearegular";
                    src:url('gudea_regular.ttf');
                }

*                   {   margin:0;
                    padding:0;
                }

html, body          {   background-color:#1A1A1A;
                    height:100%;
                }

h1                  {   font-size:300%;
                }

h2                  {   color:#6EB89F;
                }

h3                  {   color:#7DB4B6;
                }

h4                  {   color:#76BCAE;
                }

p                   {   font-size:50%;
                }

hr                  {   height:22px;
                    background-image:url('hrimage2.png');
                    background-repeat:repeat-x;
                    border:none;
                }

ul                  {   list-style-type:none;
                }

li                  {   display:inline;
                }

#galleria           {   width:900px;
                    margin-left: auto;
                    margin-right:auto;
                    height:auto;
                    background:#000000;
                }                   

#container          {   min-height:100%;
                }

#header             {   background-image:url('debut_dark.png');
                    background-color:#333333;
                    height:100px;
                    width:100%;
                }

#title              {   color:#FFFFFF;
                    font-family:"sketchscala";
                    width:723px;
                    position:relative;
                    margin-left:auto;
                    margin-right:auto;
                    top:10px;       
                }

#nav                {   font-family:"sketchscala";
                    color:#FFFFFF;
                    width:480px;
                    position:relative;
                    margin-left:auto;
                    margin-right:auto;
                    top:10px;
                }

#nav a:link         {   color:#FFFFFF;
                    text-decoration:none;
                }

#nav a:hover            {   color:#999999;
                    text-decoration:underline;
                }

#nav a:visited      {   color:#FFFFFF;
                    text-decoration:none;
                }   

#content            {   font-family:"gudearegular";
                    color:#333333;
                    overflow:auto;
                    padding-bottom:271px;
                    padding-left:100px;
                    padding-top:10px;
                }

#content a:link     {   color:#333333;
                    text-decoration:underline;
                }

#content a:hover        {   color:#000000;
                    text-decoration:none;
                }

#content a:visited  {   color:#333333;
                    text-decoration:underline;
                }

#footer             {   position:relative;
                    margin-top:-271px;
                    height:271px;
                    width:100%;
                    clear:both;
                    background-image:url('bottom_border.png');
                } 
```

哈尔普

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:15:35.197

有一个`padding-left: 100px;`，`#content`删除它，一切看起来都很好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:16:45.967

删除`padding-left`你的`#content` **身份证**

```
#content {
    color: #333333;
    font-family: "gudearegular";
    overflow: auto;
    padding-bottom: 271px;
    padding-left: 100px; //remove this line 
    padding-top: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:18:25.907

转到 geordie.css 中的#content 样式并禁用“padding-left: 100px;”。之后它应该看起来很好。

# c++ - 在运行时从 OpenGL 上下文切换到 D3D/DX 上下文（或另一个上下文）

> ID：13833891
> 
> 赞同：1
> 
> 时间：2012-12-12T06:14:21.050
> 
> 标签：c++, opengl, directx, sdl, openglcontext

**编辑：** 是否有任何预先构建的库可以为我执行此操作，使用 SDL 或在 Window、Linux、Mac、iOS 和 Android 上运行？

目前，我不确定我改变上下文的方式是否是一个很好的设计，我还没有完全完成它。我真的很担心浪费我的时间。我正在使用 SDL 进行窗口管理和事件处理。

我目前在类中包装 SDL（特别是 SDL 2）来管理它。这些是我的课程以及他们的工作：

*   **Window** - 描述一个窗口
*   **WindowContext** - 描述 Window 的上下文（抽象类）
*   **WindowDelegate** - 用于确定上下文何时更改、窗口何时打开/关闭等。
*   **WindowEventListener** - 监听来自 Window 的事件（不确定我是否应该坚持轮询而不是回调函数）

无论如何，这是它如何工作的示例：

```
OglWindowContext* context = new OglWindowContext;
// change context's settings
Window window(ipoint2(), idimension2(640, 480), "Test Window", 
              Window::Resizeable, context, &windowListener, 
              NULL /* window delegate */);

while(window.isOpen())
{
    window.processEvents(); // calls back events to the WindowEventListener
    window.draw(); // calls the context's draw method
} 
```

注意：ipoint2 是一个二维点

我可以通过调用中途更改上下文：

```
window.setContext(new Dx9Context); // or whatever context you would like 
```

有没有更简单的方法，或者我应该说更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:25:25.367

目前，在 Windows 的任何其他平台上，在渲染器之间切换没有多大意义，因此您对 windows、linux、mac、ios 和 android 支持的请求听起来很奇怪。也许您正在寻找一个总体上可以帮助您实现可移植性的库？

要实现一个渲染器或另一个渲染器（opengl/d3d）的运行，或者实现一般的可移植性，您需要实现某种可移植性层。

基本上，您可以从编写两个程序开始：一个在 OpenGL 中绘制旋转立方体，另一个完全独立的使用 D3D 执行相同的操作。接下来，编写结合这些的第三个程序，方法是：

*   在一个通用接口后面抽象出与两个应用程序不同的东西
    *   例如但不限于，一旦你进入各种平台：
        *   应用控制回路
        *   渲染器（即图形输出）
        *   文件输入/输出
        *   用户输入
        *   声音的
        *   系统服务（线程等）
*   在所有目标平台上实现通用接口
*   仅通过抽象接口实现应用程序功能

Windows 上的 D3D 和 OpenGL 实际上可以被认为是独立的平台，但您可以在应用程序启动期间选择一个或另一个 - 选择可能会影响渲染器以及应用程序控制循环。

在运行时切换也是完全可能的，但可能太麻烦了，不值得。

您可能会注意到 SDL 实际上做了很多上述工作。

# c# - 返回 Json，但它包括我不想要的反斜杠“\”

> ID：13833900
> 
> 赞同：45
> 
> 时间：2012-12-12T06:15:31.707
> 
> 标签：c#, json, asp.net-mvc-4, asp.net-web-api

我使用 MVC4 web-api、c#，并希望使用 Json.net 返回 Json **。**

问题是它带有“反斜杠”。

我还将这段代码添加到 Global.asax。GlobalConfiguration.Configuration.Formatters.XmlFormatter.SupportedMediaTypes.Clear();

这是它返回的内容：

```
"{\"cid\":1,\"model\":\"WT50JB\",\"detail\":\"sdf??\",\"unit\":2,\"time_in\":\"2012-12-11T19:00:00\",\"time_out\":\"2012-12-12T13:00:06.2774691+07:00\",\"time_used_dd\":0.0,\"time_used_hh\":0.0}" 
```

所以我想看到的是：{"cid":1,"model":"WT50JB","detail":"sdf??","unit":2,"time_in":"2012-12-11T19 :00:00","time_out":"2012-12-12T13:08:50.5444555+07:00","time_used_dd":0.0,"time_used_hh":0.0}

这是 JsonConvertor

```
string json = JsonConvert.SerializeObject(myObj); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-08-02T22:36:15.073

我有同样的问题，直到几分钟前。原来我是在“双重序列化”JSON 字符串。我对控制器操作使用 jQuery `$.getJson(`AJAX 调用。`JsonResult`由于该操作构建了一个 C# Generic `List<t>`，我认为我必须使用 JSON.net/NewtonSoft 将 C# Generic 转换`List<t>`为 JSON 对象，然后再使用以下命令返回 JSON：

```
return Json(fake, JsonRequestBehavior.AllowGet); 
```

毕竟我没有用这个`JsonConvert.SerializeObject(`方法，显然这`return`将为我们转换序列化。

希望它对您或其他人也有帮助。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-13T18:28:02.767

我在这里找到了解决方案

```
return new HttpResponseMessage() 
{
    Content = new StringContent(json, System.Text.Encoding.UTF8, "application/json")
}; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-11-26T08:18:05.350

```
using Newtonsoft.Json.Linq;
string str = "Your String with Back Slashes";
str = JToken.Parse(str).ToString(); `// Now You will get the Normal String with "NO SLASHES"` 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-12T06:49:01.207

最有可能的是，斜杠是一个工件，因为您将它们从 VisualStudio 调试器中复制出来。调试器以可以粘贴到 C/C# 代码中的方式显示所有字符串。它们实际上并不在传输的数据中。

顺便说一句：这些斜杠是*反斜杠*。正斜杠看起来像这样：/.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-08T11:36:14.843

为了看到“完整”的代码片段，这是我用来实现解决方案的方法：

```
 [AllowAnonymous]
    [HttpGet]
    public HttpResponseMessage GetAllMessages()
    {

        try
        {
            //Load Data Into List
            var mm = new MessageManager();
            List<Message> msgs = mm.GetAllMessages();

            //Convert List Into JSON
            var jsonmsgs = JsonConvert.SerializeObject(msgs);

            //Create a HTTP response - Set to OK
            var res = Request.CreateResponse(HttpStatusCode.OK);

            //Set the content of the response to be JSON Format
            res.Content = new StringContent(jsonmsgs, System.Text.Encoding.UTF8, "application/json");

            //Return the Response
            return res;
        }
        catch (Exception exc)
        {
            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, exc);
        }
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-06-13T13:07:46.920

主要是由于双重序列化而发生的。不久前我遇到了同样的问题，我不得不将一个集合序列化为 Json 字符串，即使在尝试了各种解决方法之后，我也无法解决它。因此，最后删除了所有的序列化代码并简单地返回了集合对象，并且默认情况下会处理序列化。所以尝试删除序列化代码并简单地返回返回类型。希望它可以帮助有类似问题的人。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-10-24T14:03:19.627

经过数小时试图弄清楚这一点，对这个问题的一个流行回答似乎对我来说是准确的。但是，不是我想象的那样。

我的代码非常非常简单：

```
this.Request.CreateResponse(HttpStatusCode.Accepted, new JavaScriptSerializer().Serialize(obj)); 
```

我确信“双重序列化”的流行反应不适用于我。毕竟，我只将我的对象显式序列化为 JSON 一次。

我试过这个片段：

```
new StringContent(json, System.Text.Encoding.UTF8, "application/json") 
```

这似乎甚至没有包含我的数据！相反，这是我收到的：

```
{
  "Headers": [
    {
      "Key": "Content-Type",
      "Value": [
        "application/json; charset=utf-8"
      ]
    }
  ]
} 
```

嗯...但是你瞧！仔细查看我在 Swagger UI 中的原始响应，并在将其复制并粘贴到 JSON 美化器中之后 - 我实际上以某种方式“双重序列化”。**使用以下代码会产生正确的 JSON 响应**：

```
 this.Request.CreateResponse(HttpStatusCode.Accepted, obj); 
```

这是正确的！直接发送可序列化对象即可，无需序列化为JSON！似乎响应自动将对象序列化为 JSON。希望这可以帮助！

**编辑**：如果您以 JSON 字符串开头，比如从数据库中说，您可以将字符串反序列化为一个对象并返回该对象 - 如下所示：

```
object obj = new JavaScriptSerializer().DeserializeObject(json);
this.Request.CreateResponse(HttpStatusCode.Accepted, obj); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-10-29T11:31:01.137

我有同样的问题，响应包含 \" 当我使用

```
 JObject res = processRequst(req);
        String szResponse = res.ToString(Formatting.None);
        return Request.CreateResponse<string>(HttpStatusCode.OK, szResponse); 
```

如果我将上面的代码替换为

```
 JObject res = processRequst(req);
        return Request.CreateResponse<JObject>(HttpStatusCode.OK, res); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-29T15:41:18.347

我发现答案的组合对我有用。正如上面提到的那样，我正在双重序列化。为了让序列化识别您的 JsonProperty 属性，您必须使用 JsonConvert 序列化程序。例如，我有一个名为 ActualtTarget 的属性，但需要将其序列化为 Actual-Target。序列化时Json结果将无法识别JsonProperty，所​​以我用JsonConvert序列化并返回如下字符串：

```
return Content(JsonConvert.SerializeObject(myData)); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-21T10:30:51.690

我找到了解决方案，它对我有用：

```
var json = JsonConvert.SerializeObject(sb.ToString(), Formatting.Indented);
response.Content = new StringContent(json, Encoding.UTF8 , "application/json"); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-06T06:12:12.383

这对我有用。上面由riseres用户回答。

```
return new HttpResponseMessage() 
{
Content = new StringContent(json, System.Text.Encoding.UTF8, "application/json")
}; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-10-21T08:05:54.313

在我的情况下，来自服务器的字符串包括反溅，如：

```
{\"cid\":1,\"model\":\"WT50JB\",\"detail\":\"sdf??\",\"unit\":2,\"time_in\":\"2012-12-11T19:00:00\",\"time_out\":\"2012-12-12T13:00:06.2774691+07:00\",\"time_used_dd\":0.0,\"time_used_hh\":0.0}" 
```

当 API 使用 POSTMAN 获取响应值时，仍会出现反溅。事实证明，您需要在服务器中格式化字符串，然后再推送回客户端（POSTMAN）。MS网站指出了这样做的方法： return Ok(JSON_string);

按照微软的指导，问题就解决了

```
public ActionResult Get (int id, int id1)
{
     JSON_string = "your backsplash string"
     return Ok(JSON_string); //it will automatically format in JSON (like eliminate backsplash)

} 
```

[https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/formatting?view=aspnetcore-3.1](https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/formatting?view=aspnetcore-3.1)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-16T07:19:37.060

在这里我找到了解决方案：

```
 response = response.replace("\"", "\\").replace("\\\\", "\"").replace("\\", "");
                JSONArray PackageData = new JSONArray(response);
                SelectSymbolList.clear();
                for (int i = 0; i < PackageData.length(); i++) {
                    JSONObject jsonData = PackageData.getJSONObject(i);
                    // get your array here
                } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-13T00:38:38.723

就我而言，我在调试器中查看 JSON 字符串，我发现它正在添加转义。当我将 JSON 打印到控制台时，它没有转义字符。

```
var jsonContent = JsonConvert.SerializeObject(obj); 
Console.WriteLine("HERE NO SLASHES"+ jsonContent); 
```

原文：[https ://stackoverflow.com/a/46836331/4654957](https://stackoverflow.com/a/46836331/4654957)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-12-04T06:24:35.030

在将数据表转换为 json 时，它为我使用以下 .netcore 项目代码

```
var lst = dt.AsEnumerable()
.Select(r => r.Table.Columns.Cast<DataColumn>()
        .Select(c => new KeyValuePair<string, object>(c.ColumnName, r[c.Ordinal])
       ).ToDictionary(z => z.Key, z => z.Value)
).ToList(); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-21T07:38:14.657

在我的通用处理程序中，这有帮助。如果给定的字符串是 json 将在 try 中返回，否则将在 catch 中返回

```
private static dynamic TryParseJSON(string message)
    {
        try
        {
            var serializer = new JavaScriptSerializer();
            return serializer.Deserialize<dynamic>(message);
        }
        catch
        {
            return message;
        }
    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-02T18:21:26.743

> **Andrew Birks**建议的答案对我有用

```
//Convert List Into JSON
var jsonString = JsonConvert.SerializeObject(dataTable);

//Create a HTTP response - Set to OK
var response = Request.CreateResponse(HttpStatusCode.OK);

//Set the content of the response to be JSON Format
response.Content = new StringContent(jsonString, System.Text.Encoding.UTF8, "application/json");

//Return the Response
return response; 
```

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2016-08-18T09:24:45.827

我找到了解决方案并为我工作（Y）

```
var yourString = yourString.Replace("\\",""); 
```

我从[这里得到的](http://forums.asp.net/t/1977873.aspx?How+Remove+backslash+from+JSON+Result+DataSet)

# c# - 如何在 C# 中使用 Linq 对 OrderedDictionary 进行排序（使用 .NET 3.5）？

> ID：13833905
> 
> 赞同：9
> 
> 时间：2012-12-12T06:15:47.263
> 
> 标签：c#, .net, linq

我需要排序 OrderedDictionary (System.Collections.Specialized) 我有这个代码：

```
var od = new System.Collections.Specialized.OrderedDictionary();
od.Add("a1", 3);
od.Add("a2", 5);
od.Add("a3", 2);
od.Add("a4", 4); 
```

我希望使用值对其进行排序。我可以使用Linq吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T06:24:26.380

以下将为您提供基于 OrderedDictionary 的排序字典。

```
var normalOrderedDictionary= od.Cast<DictionaryEntry>()
                       .OrderBy(r=> r.Value)
                       .ToDictionary(c=> c.Key, d=> d.Value); 
```

但是有一件事，`ToDictionary`返回了一个常规字典，但是在字典中维护了查找的顺序，只要在字典中插入任何新项目，就无法保证顺序。为避免这种情况，请使用`SortedDictionary<TKey,TValue>`which 具有将常规字典作为参数的构造函数

```
var sortedDictionary = new SortedDictionary<string, string>(normalOrderedDictionary); 
```

*（确保`string`在上面的行中替换为正确的 Key 和 value 类型）*。

输出：

```
foreach (var entry in sortedDictionary)
    Console.WriteLine("Key: {0} Value: {1}", entry.Key, entry.Value);

Key: a3 Value: 2
Key: a1 Value: 3
Key: a4 Value: 4
Key: a2 Value: 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T06:20:58.387

您可以轻松地按值枚举值/条目。您只需转换为适当的类型即可激活 linq 功能。

```
var sortedOrder = od.Values
    .Cast<int>()        // this is an enumeration of ints
    .OrderBy(i => i);;  // enumerate through ordered by the value

foreach (var item in sortedOrder)
{
    // do stuff
} 
```

# iphone - 在方向锁定打开的情况下强制横向查看相机视图

> ID：13833908
> 
> 赞同：4
> 
> 时间：2012-12-12T06:16:32.207
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在开发一个增强现实游戏，当设备的方向锁定打开时，我遇到了相机视图方向的问题。

我正在使用此代码在视图中加载相机视图：

```
AVCaptureSession *session = [[AVCaptureSession alloc] init];
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = self.sessionView.bounds;
[self.sessionView.layer addSublayer:captureVideoPreviewLayer];
CGRect bounds=sessionView.layer.bounds;
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
captureVideoPreviewLayer.bounds=bounds;
captureVideoPreviewLayer.orientation = [[UIDevice currentDevice] orientation];
captureVideoPreviewLayer.position=CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds));

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
// device.position ;
NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if ([device hasTorch]) {
    ([device supportsAVCaptureSessionPreset:AVCaptureSessionPreset1280x720]);
}
else {
    ([device supportsAVCaptureSessionPreset:AVCaptureSessionPreset640x480]);
}
[session addInput:input];
[session startRunning]; 
```

为了使应用程序的方向保持正确，我只选择了 Xcode 应用程序摘要中的那个框，其中包含：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return ((interfaceOrientation == UIInterfaceOrientationLandscapeRight));
} 
```

当设备开启方向锁定（双击主页按钮，向右滑动，点击方向图标）时，相机视图是纵向的，而游戏的其余部分是横向的。有没有什么办法解决这一问题？从我读过的内容来看，用户打开游戏时无法关闭方向锁定。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T07:19:58.823

预览层不定向的原因是因为您使用的是已弃用的 API，而且您没有在设备方向更改时更新视频方向。

1.  删除已弃用的 API，即在您的代码中，而不是

    ```
    captureVideoPreviewLayer.orientation 
    ```

    使用 videoOrientation 属性，即

    ```
    captureVideoPreviewLayer.connection.videoOrientation 
    ```

2.  更新 shouldAutorotate 中的视频方向，如下所示：

    ```
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {

        if(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
        {
           captureVideoPreviewLayer.connection.videoOrientation = AVCaptureVideoOrientationLandscapeRight
        }

          // and so on for other orientations

        return ((interfaceOrientation == UIInterfaceOrientationLandscapeRight));
    } 
    ```

# python - 用 Python 匹配括号

> ID：13833914
> 
> 赞同：1
> 
> 时间：2012-12-12T06:16:56.107
> 
> 标签：python, regex

我一直在尝试匹配这样的东西

```
mystring = "kdjf4kf., kfg. (KFJG)"
regex = r'.+\(\w+\)' 
```

但它不工作，它没有找到任何东西。我想推断 KFJG。我该怎么做？

例子：

```
>>> a = "Amazon (AMZN)"
>>> regex = '.?(\w+)'
>>> match = re.match(regex, a)
>>> match.group(0)  
'Amazon'  
>>> match.group(1)  
'mazon' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:21:45.020

因为您忘记将匹配项包含在[捕获组中](http://www.regular-expressions.info/brackets.html)

```
>>> re.findall(r'.+\((\w+)\)', mystring)
['KFJG'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:02:56.613

```
>>> regex = '.?(\w+)' 
```

.? -> 这意味着可能有一个字符/数字 (\w+) -> 这意味着捕获一个字符直到出现空格

`match.group(0)`将返回您想要匹配的字符串，这就是您看到“Amazon”的原因

`match.group(1)`将返回字符串中匹配的第一个括号分组的内容，

`'.?(\w+)'`意味着匹配一个字符串（mazon），它之前可能有一个字符（A）。

你代码中的括号在正则表达式中有另一个含义，这意味着将内容分组以供以后使用，而不是作为模式匹配在这里。

你真正想要的是捕获括号内的内容，括号需要通过放置“\”来定期转义

```
>>> regex = '.*\((\w+)\)'
>>> match = re.match(regex, a)
>>> match.group(0)
'Amazon (AMZN)'
>>> match.group(1)
'AMZN' 
```

`'.*\((\w+)\)'`让我们把它分解成细节

... `\(_____\)`-> 这意味着匹配括号

..... `(___)` -> 这意味着 match.group(1) 的内容内部分组

.......\w+ -> 这意味着匹配一个或多个字符

# asp.net-mvc-3 - 一个实体对象不能被多个 IEntityChangeTracker 实例引用

> ID：13833919
> 
> 赞同：0
> 
> 时间：2012-12-12T06:17:25.127
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

这个错误抛出了很多，但我找不到解决方案。我是实体框架的新手，在我的第一种方法中我遇到了这个错误。

错误：

> 一个实体对象不能被多个 IEntityChangeTracker 实例引用。

我的代码：-

```
foreach (interest _interest in inList)
{
   _interest.schemeId = _scheme.id;
   _interest.schemeSubId = _schemeLoan.id;
    db.interests.AddObject(_interest);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:36:36.970

在您的代码中的某个地方，您没有摆脱您拥有的另一个上下文，并且这个特定对象已经作为属于您的上下文的另一个实例存在，即 db。*确保在每次请求后*处理上下文对象，并且不会在代码中错误地使用两个上下文。

# php - 此商家已禁用 DPRP

> ID：13833921
> 
> 赞同：4
> 
> 时间：2012-12-12T06:17:26.500
> 
> 标签：php, cakephp, cakephp-2.0, paypal

`DPRP is disabled for this merchant`出错怎么办？

我用我的错误生成了这个数组

```
Array
(
    [TIMESTAMP] => 2012-12-12T06:15:28Z
    [CORRELATIONID] => 20039fe211e60
    [ACK] => Failure
    [VERSION] => 75.0
    [BUILD] => 4181146
    [L_ERRORCODE0] => 11586
    [L_SHORTMESSAGE0] => DPRP is disabled.
    [L_LONGMESSAGE0] => DPRP is disabled for this merchant.
    [L_SEVERITYCODE0] => Error
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:24:49.143

我假设您正在尝试将 CreateRecurringPaymentsProfile 与信用卡信息一起使用，这就是您得到的......？？

DPRP = DirectPayment 定期付款。这是您必须在您的 PayPal 帐户上启用的附加功能。不幸的是，他们会在最初的 Payments Pro 费用之外再向您收取 30 美元/月的费用，因此您将总共支付 60 美元/月才能使用它。

如果没问题，您只需致电 PayPal 并请求他们为您启用此功能。如果您不想支付该月费，您可以使用 Payments Advanced 进行设置，并改用定期计费。它便宜得多。

# java - 将函数拆分为包含“+”字符的字符串

> ID：13833927
> 
> 赞同：-1
> 
> 时间：2012-12-12T06:17:40.750
> 
> 标签：java, string

在拆分方法中，如果我只传递这样的“+”字符：

```
public class StringSplit {

    public static void main(String[] str) {
        String s1 = "test+plus";
        String[] stArr = s1.split("+");
        System.out.println(stArr.length);
        for (int i = 0; i < stArr.length; i++) {
            System.out.println(stArr[i]);
        }
    }
} 
```

出现以下错误：

```
Exception in thread "main" java.util.regex.PatternSyntaxException: Dangling meta character '+' near index 0
+
^
    at java.util.regex.Pattern.error(Pattern.java:1713)
    at java.util.regex.Pattern.sequence(Pattern.java:1878)
    at java.util.regex.Pattern.expr(Pattern.java:1752)
    at java.util.regex.Pattern.compile(Pattern.java:1460)
    at java.util.regex.Pattern.<init>(Pattern.java:1133)
    at java.util.regex.Pattern.compile(Pattern.java:823)
    at java.lang.String.split(String.java:2292)
    at java.lang.String.split(String.java:2334)
    at StringSplit.main(StringSplit.java:5) 
```

但是，如果我将拆分呼叫替换为：

```
String[] stArr = s1.split("\\+"); 
```

它工作正常。

这种行为有什么原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T06:20:17.160

split 方法将“+”视为正则表达式，因此 + 基本上是正则表达式中的运算符。如果您使用“\\+”，那么它将它作为字符。

如需参考，请[在此处查看](http://www.tutorialspoint.com/java/java_string_split.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:23:27.690

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split(java.lang.String) )

Java 中的 String.split 方法将正则表达式作为输入。正如您的错误消息所述，“+”字符是元字符。特别是，它表示“+”之前的模式将重复 1 次或多次。当然，当您真正指的是“+”字符而不是重复模式的元字符时，您可以使用反斜杠转义“+”，这就是 s1.split("\+") 起作用的原因。

# roslyn - Roslyn：如何获得未解析的类型

> ID：13833928
> 
> 赞同：5
> 
> 时间：2012-12-12T06:17:40.927
> 
> 标签：roslyn

我正在使用 Roslyn 2012 年 9 月的 CTP。

在 ac# 代码文档中获取未解析类型的最优雅方法是什么？例如。类型 Guid 需要 System 命名空间。目前我有这样的事情：

```
 var semanticModel = (SemanticModel)document.GetSemanticModel();
            var tree = (SyntaxTree)document.GetSyntaxTree();

            //get unresolved types
            var unresolvedTypes = tree.GetRoot().DescendantNodes().OfType<IdentifierNameSyntax>()
                .Where(x => semanticModel.GetSymbolInfo(x).Symbol == null); 
```

使用 IdentifierNameSyntax 和 GetSymbolInfo 是否正确？

**另外GetSymbolInfo**和**GetTypeInfo**之间有什么区别，它们看起来都与我非常相似。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T16:33:19.830

这里有几个问题。

问：使用正确`IdentifierNameSyntax`吗？
A：你可能想用它`SimpleNameSyntax`来处理解析泛型类型。此外，您可能不想查看所有`SimpleNameSyntax`元素。对于实际上不在类型上下文中的事物，您将得到误报（例如，想象一些代码，例如`var x = Console();`

`GetSymbolInfo`Q：使用和检查null是否正确？
A: 是的，在这里检查是正确的。

问：`GetSymbolInfo`和 和有什么不一样`GetTypeInfo`？
答：对于表示类型名称的语法，没有区别。但是，对于任意表达式，`GetSymbolInfo`表示表达式的特定符号（例如，方法调用、索引器访问、数组访问、重载运算符等），并`GetTypeInfo`表示结果类型（以便您知道在添加时要生成什么类型表达式的声明）。以for `InvocationExpressionSyntax`“ `myString.GetHashCode()`”为例。 `GetSymbolInfo`将返回 的方法符号`GetHashCode()`，而`GetTypeInfo`将返回`System.Int32`。

# ios6 - IOS6中的地图视图放大

> ID：13833930
> 
> 赞同：1
> 
> 时间：2012-12-12T06:17:49.210
> 
> 标签：ios6, mkmapview, zooming, iphone-5

我正在做一个地图视图应用程序。我有一组带有地址的联系人，我使用它们将其转换为坐标

```
-(CLLocationCoordinate2D) getLocationFromAddressString:(NSString*) addressStr {

NSString *urlStr = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv",
                    [addressStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSString *locationStr = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlStr] encoding:NSStringEncodingConversionAllowLossy error:nil];
NSArray *items = [locationStr componentsSeparatedByString:@","];
double latitude = 0.0;
double longitude = 0.0;

if([items count] >= 4 && [[items objectAtIndex:0] isEqualToString:@"200"]) {
    latitude = [[items objectAtIndex:2] doubleValue];
    longitude = [[items objectAtIndex:3] doubleValue];
}
CLLocationCoordinate2D location;
location.latitude = latitude;
location.longitude = longitude;

return location;
} 
```

地图视图应以最佳缩放格式加载，其中地图上的所有图钉应立即对用户可见，并且用户应该能够放大和缩小。我在以前的 IOS 版本中找到了解决此问题的方法。我在IOS6中遇到问题。需要帮忙。

编辑：这是我用来缩放的代码

```
for(MKPointAnnotation* annotation in annotationArray)
{
    topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
    topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

    bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
    bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
}

MKCoordinateRegion region;
region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;
region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;

region = [mapViews regionThatFits:region];
[mapView setRegion:region animated:NO]; 
```

我面临的问题是，地图缩放到该区域的方式存在一些不一致，该区域是要缩放的。

编辑：问题是，如果我有一个英国地址的联系人和另一个日本地址的联系人，则地图视图无法同时显示两个图钉。它将放大到一个区域，该区域将是包括英格兰和日本在内的整个区域的确切中心，这意味着地图视图上不会显示任何图钉。我需要滑动到任一侧才能查看 2 个引脚。这与地图视图的最大缩放级别有关。

# php - 如何将 PHP preg_match 用于包含句点的电子邮件？

> ID：13833932
> 
> 赞同：0
> 
> 时间：2012-12-12T06:17:52.427
> 
> 标签：php, preg-match, email-validation

我正在尝试创建一个用户验证表单来检查电子邮件并针对我的数据库运行它。但是，如果有电子邮件，例如“my.name@domain.com”，它无论如何都会将其放入数据库，即使它是重复条目。

```
if (preg_match("/^([a-zA-Z0-9z])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/", $_POST['e-mail'])) {
       //regular expression for email validation
        $Email = $_POST['e-mail'];
    } else {
         $error[] = 'Your EMail Address is invalid  ';
    } 
```

我将如何更改 preg_match 以在其中查找期间？顺便说一句，所有注册该站点的用户在他们的电子邮件中都会有一个句点（它只适用于具有相同电子邮件格式的选定人群）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:22:26.400

我建议你使用`FILTER_VALIDATE_EMAIL`php 过滤器而不是`reqex`

```
if (filter_var($_POST['e-mail'], FILTER_VALIDATE_EMAIL)) {
    //Valid Email
} else {
    //Invalid Email
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:24:44.147

您的最低目标是确保电子邮件地址的本地部分至少有一个句点，因为*您的特定用例*需要这样做。我们可能有点天真并使用

```
/.*\..*@/ 
```

作为主要检查。这将搜索零个或多个任何东西，一个句点，然后是零个或多个任何东西，然后是一个 at 符号。这将成功确保其中至少有一个点，这是重要的。除非您希望字符串通过此检查，否则请考虑将`*`s更改为 s。我不确定您期望句点在哪里，并且不记得是否允许句点作为本地部分的第一个或最后一个字符。`+``.@`

将此与调用相结合`filter_var($_POST['e-mail'], FILTER_VALIDATE_EMAIL)`以*实际*检查地址的完整格式。

# jquery - Jquery - 使用 IE 进行 CSS 翻译

> ID：13833934
> 
> 赞同：2
> 
> 时间：2012-12-12T06:18:13.037
> 
> 标签：jquery, css

我想使用 JQuery 将其父 div“register_tile”中名为“register_bottom_bar”的 div 向上翻译 174 像素。我让它在 Chrome 和 Firefox 中完美运行。

我怎样才能在 IE 中做同样的事情？我在 IE 8 上测试它。

“register_tile”是一个更大的 div 内的浮动 div，“register_bottom_bar”位于“register_tile”的底部，位置：相对。

```
$('.register_tile').click(function () {
    $(this).css('opacity', '1');
    $(this).css('background-image', 'none');
    $('.register_bottom_bar').css('-webkit-transform', 'translate(0,-174px)');
    $('.register_bottom_bar').css('-moz-transform', 'translate(0,-174px)');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:25:49.203

旧版 IE 没有任何过渡效果。（**IE8 不支持 CSS3 变换**）

我所知道的接近它的唯一方法是使用 JQuery`fadeIn()`和`fadeOut()`方法

你需要`-ms-transform`用于ie9

```
css(' -ms-transform', 'translate(0,-174px)'); 
```

[**来自 MSDN**](http://msdn.microsoft.com/en-in/ie/hh393506.aspx)

* * *

```
-ms-transform: translate(50px,100px); /* IE 9 */
-webkit-transform: translate(50px,100px); /* Safari and Chrome */
-o-transform: translate(50px,100px); /* Opera */
-moz-transform: translate(50px,100px); /* Firefox */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:41:21.957

如果您需要支持旧版本的 IE（6、7、8），则需要使用属性 margin / position 来代替。

```
$('.register_tile').click(function () {
    $(this).css('opacity', '1');
    $(this).css('background-image', 'none');
    $('.register_bottom_bar').css('left', '-174px); // With absolute / relative positioning
    // OR
    $('.register_bottom_bar').css('margin-left', '-174px);
}); 
```

# tinymce - Tiny MCE Editor 移除非 HTML 部分

> ID：13833938
> 
> 赞同：2
> 
> 时间：2012-12-12T06:18:47.780
> 
> 标签：tinymce

此问题与 Tiny MCE 编辑器有关，当我取消选中“使用原始 HTML 编辑器”选项时，它会截断我的非 HTML 部分。以下是步骤：

1.  到达编辑器并以“原始 HTML”模式粘贴我的 HTML（和非 HTML）内容。该内容基本上是调用 Viddler 视频并为 IE 和非 IE 浏览器设置条件，如下所示：`<!--[if IE]>`和`<!--[if !IE]> <!-->`
2.  取消选中“使用原始 HTML 编辑器”选项，您会看到视频以“预览”模式显示。
3.  现在通过选中“使用原始 HTML 编辑器”再次切换回原始 HTML 选项，您会看到我们为非 IE 浏览器拥有的任何 HTML 都`<!--[if !IE]> <!-->`被截断，我猜是因为 Tiny 编辑器无法识别这些`<!--[if IE]> and <!--[if !IE]> <!-->`并截断任何出现的内容在此之下。

这是我的 HTML 代码，供您参考：

```
<!--[if IE]>
<object width="545" height="349" id="viddlerOuter-ba473db1" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
<param name="movie" value="//www.viddler.com/player/ba473db1/">
<param name="wmode" value="transparent" />
<param name="allowScriptAccess" value="always">
<param name="allowNetworking" value="all">
<param name="allowFullScreen" value="true">
<param name="flashVars" value="f=1&openURL=106922991&autoplay=f&loop=0&nologo=0&hd=0">
<object id="viddlerInner-ba473db1">
<video id="viddlerVideo-ba473db1" src="//www.viddler.com/file/ba473db1/html5mobile?openURL=106922991" type="video/mp4" width="545" height="307" poster="//www.viddler.com/thumbnail/ba473db1/" controls="controls" x-webkit-airplay="allow"></video>
</object>
</object>
<![endif]--> <!--[if !IE]> <!-->
<p>
<object id="viddlerOuter-ba473db1" width="545" height="349" type="application/x-shockwave-flash" data="//www.viddler.com/player/ba473db1/">
<param name="movie" value="//www.viddler.com/player/ba473db1/" />
<param name="wmode" value="transparent" />
<param name="allowScriptAccess" value="always" />
<param name="allowNetworking" value="all" />
<param name="allowFullScreen" value="true" />
<param name="flashVars" value="f=1&amp;openURL=106922991&amp;autoplay=f&amp;loop=0&amp;nologo=0&amp;hd=0" />
<object id="viddlerInner-ba473db1">
</object>
</object>
</p>
<!--<![endif]--> 
```

我已经尝试过的解决方法是： 1\. Verify_HTML : false 2\. Cleanup : false

但没有运气:(

希望有人能在这里帮助我。

在此先感谢阿米特·阿罗拉

# c - 将静态变量作为参数传递给函数

> ID：13833940
> 
> 赞同：0
> 
> 时间：2012-12-12T06:19:03.360
> 
> 标签：c, static

将静态变量作为参数传递给函数有什么问题吗？程序打印了 1 0。那么，静态变量是否也像往常一样按值传递？

```
#include<stdio.h>
int main()
{
    static main;
    int x;
    x=call(main);
    printf("%d %d",x,main);
}
int call(int address)
{
    address++;
    return address;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:21:36.447

是的，静态变量就像任何其他变量一样被传递。

但是，当您使用与函数相同的名称命名变量时，我希望您会遇到一些编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:23:20.510

使用静态变量传递变量没有区别。

请注意，您需要在代码中包含类型：`static int main;`

而且我不会将变量命名为，`main`因为它可能是保留关键字。

# javascript - 比较 JavaScript 中字符串的一部分

> ID：13833944
> 
> 赞同：23
> 
> 时间：2012-12-12T06:19:18.167
> 
> 标签：javascript, string

如何比较字符串的一部分 - 例如，如果我想比较字符串 A 是否是字符串 B 的一部分。我想知道这一点：何时`string A = "abcd"`它`string B = "abcdef"`需要返回 true。我如何在 JavaScript 中做到这一点？如果我使用`substring(start, end)`我不知道将什么值传递给`start`and`end`参数。有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-12T06:21:11.273

您可以使用`indexOf`：

```
if ( stringB.indexOf( stringA ) > -1 ) {
  // String B contains String A
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-12T06:28:24.163

像这样：

```
var str = "abcdef";
if (str.indexOf("abcd") >= 0) 
```

请注意，这是区分大小写的。如果你想要一个不区分大小写的搜索，你可以写

```
if (str.toLowerCase().indexOf("abcd") >= 0) 
```

或者，

```
if (/abcd/i.test(str)) 
```

以及不区分大小写搜索的通用版本，您可以设置任何大小写的字符串

```
if (stringA.toLowerCase().indexOf(stringB.toLowerCase()) >= 0) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-11-06T13:35:52.033

Javascript ES6/ES2015 有`String.includes()`，几乎兼容所有浏览器，[除了 IE](https://caniuse.com/#feat=es6-string-includes)。（但还有什么新东西？）

```
let string = "abcdef";
string.includes("abcd"); //true
string.includes("aBc"); //false - .includes() is case sensitive 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-07T22:28:07.063

如果您正在处理大字符串并且您只需要验证字符串的开头，则使用 indexOf 或 match 会不必要地缓慢。更好的解决方案是使用 startsWith() 或其等效函数——来自[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith)：

```
if (!String.prototype.startsWith) {
    String.prototype.startsWith = function(searchString, position){
      position = position || 0;
      return this.substr(position, searchString.length) === searchString;
  };
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-12T06:21:07.670

`"abcdef".indexOf("abcd") !== -1`应该没问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T06:25:16.267

你也可以试试javascript搜索

```
if( stringA.search(stringB) > -1){
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-12T06:27:18.797

使用正则表达式可能会对您有所帮助。

```
var patt = new RegExp(stringA, 'i');
if(stringB.match(patt)){                            
   return true;
} 
```

# objective-c - 检查设备的当前位置（位置）是否在某个特定位置

> ID：13833947
> 
> 赞同：1
> 
> 时间：2012-12-12T06:19:31.533
> 
> 标签：objective-c, ios, gps, maps, arcgis

我想要做的是检查哪个区域是用户。

我有设备和区域（只是角落）的 gps 坐标。现在，当我拥有所有坐标时，我应该检查哪个区域是用户。我添加了图片以进行说明：

![在此处输入图像描述](../Images/b0db2065fbba9080ff017ab54f88af4c.png)

这是红色和黄色的 2 个区域。设备为黑色。在这张图片中，我应该知道该用户位于黄色区域。我发现 ArcGis sdk 适用于 iOS，所以也许我应该从它开始？或者也许有一些不那么复杂的东西，因为我只需要这个功能而不是真正的视觉。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:41:20.967

对于矩形，它更简单：只需创建一个矩形 ( `CGRect`) 并使用经度作为 x，使用纬度作为 y，然后使用`CGRectContainsPoint`(rect, point)。这适用于斧头平行矩形，就像你画的那样。

# android - 如何从 android 的首选项屏幕进行另一个活动

> ID：13833951
> 
> 赞同：0
> 
> 时间：2012-12-12T06:19:53.443
> 
> 标签：android

这是我的偏好类：

```
customPref
                .setOnPreferenceClickListener(new OnPreferenceClickListener() {

                    public boolean onPreferenceClick(Preference preference) {

                        Toast.makeText(getBaseContext(),
                                "The custom preference has been clicked",
                                Toast.LENGTH_LONG).show();
                        SharedPreferences customSharedPreference = getSharedPreferences(
                                "myCustomSharedPrefs", Activity.MODE_PRIVATE);
                        SharedPreferences.Editor editor = customSharedPreference
                                .edit();
                        editor.putString("myCustomPref",
                                "The preference has been clicked");
                        editor.commit();
                        return true;
                    }

                }); 
```

这能够在 Toast 上显示数据。

但是当我应用此代码时

```
customPref
            .setOnPreferenceClickListener(new OnPreferenceClickListener() {

                public boolean onPreferenceClick(Preference preference) {

                    Intent int1 = new Intent(getBaseContext(),
                            termandcondition.class);
                    getBaseContext().startActivity(int1);

                    return true;
                }

            }); 
```

在首选项中，它变成了错误，现在显示数据请帮助我如何申请去另一个活动

这是 prefnces.xml 文件

```
<Preference
        android:key="customPref"
        android:summary="END-USER LICENCE AGREEMENT FOR USING WWW.TAXMANN.COM"
        android:title="Term and Condition"

         /> 
```

我尝试了很多次现在能够做到请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:44:49.450

问题是您使用`getBaseContext().startActivity()`的是`startActivity()`. 因此，您尝试从活动上下文之外开始一个新活动。就像错误说的那样：`Calling startActivity() from outside of an Activity context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?` 所以这可能不是你真正想要的。Android 要求您从其他活动中启动活动以维护后台堆栈。

# android - 如何在不使用 eclipse 的情况下在我朋友的手机上安装我的 android 应用程序

> ID：13833952
> 
> 赞同：1
> 
> 时间：2012-12-12T06:19:54.033
> 
> 标签：android

我在 Android 2.3.3 中开发了一个应用程序。我想把它安装在我朋友的安卓手机上并测试它。

一种方法是拿起我的电脑并插入他的设备并运行应用程序，它将自动安装。

如果我向他发送 .apk 文件，并且如果他启动 .apk 文件，它将自动开始工作还是有任何程序可遵循。

我搜索了很多有关此的网站，但找不到太多帮助...

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:23:10.717

您应该能够将 .apk 文件发送给他（即使作为电子邮件附件或我个人最喜欢的 Google Drive 文件），但您必须在“设置”>“安全”中启用非市场应用程序的安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:20:23.473

通过让它在 Eclipse 的模拟器中运行一次来​​编译它。

然后，导航到您的项目文件夹，您可以在 bin 文件夹中找到该 apk。您可以将该 apk 发送给任何人。只要他检查了设置中的不受信任的来源应用程序框，它就会在启动时提示安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:23:05.783

只需将 apk 发送给他，这是要安装的命令，它将自动开始工作：

在窗户里

```
adb install path_to_your_app.apk 
```

在 linux/ubuntu 中

```
./adb install path_to_your_app.apk 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T06:27:24.450

通过邮件将您的 apk 文件发送给您的朋友或通过蓝牙发送，然后按照以下步骤操作。

*   将 APK 文件复制到手机中 Android 的 SD 卡中。
*   从 Android Market 下载并安装 Apps Installer 应用程序
*   安装后，Apps Installer 将显示存储卡上的 APK 文件。
*   单击并安装您的 APK 文件。

**注意：**您可以在项目的 bin 文件夹中找到您的 apk 文件。但在此之前，您必须启用 unknow Source 。转到设置 -> 应用程序 -> 并启用未知来源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T06:40:14.183

最简单的方法是，将 apk 邮寄到您朋友的 google 帐户并从邮件中下载，然后按照 ExistentialEnso 的建议进行安装

# facebook - FB Like Box 不显示流

> ID：13833953
> 
> 赞同：2
> 
> 时间：2012-12-12T06:20:07.687
> 
> 标签：facebook, stream, facebook-likebox

我不认为这是我正在使用的代码的问题，但无法让我的 FB Like Box 显示流。

例如，我可以转到：[https](https://developers.facebook.com/docs/reference/plugins/like-box/) ://developers.facebook.com/docs/reference/plugins/like-box/并放置在一个 Facebook 页面中，它可以很好地显示流。然而，当我输入[https://www.facebook.com/HHSE.hannoverhouse/](https://www.facebook.com/HHSE.hannoverhouse/)时，它不起作用。

因此，它必须与页面类型或某些设置有关，但我已经完成了我能想象到的所有事情，例如管理权限等，以确保所有人都可以查看该页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T18:39:32.777

**确保您在上个月内发布了一些内容。**

我的页面出现了完全相同的问题，我的流没有出现，但有些页面出现了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:22:22.447

使用 HTML5、XFBML、IFRAME，URL 编码是无关紧要的......这可能是由于 Facebook 再次改变它的政策！

我的 facebook 页面链接也有同样的问题：

[http://www.facebook.com/pages/Brunito-Salsa-Salsa-Federation/185732888166103](http://www.facebook.com/pages/Brunito-Salsa-Salsa-Federation/185732888166103)

但我的朋友页面工作得很好，页面链接是：

[https://www.facebook.com/rubixsound](https://www.facebook.com/rubixsound)

甚至在完成插件过程之前，他们都在 facebook 页面 URL 部分直接使用 facebook like box 插件页面进行了测试。

..您粘贴 facebook 页面 URL，您会得到一个空的提要示例，但使用另一个 URL，您会得到一个完整的提要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:35:53.210

类似框用于 Facebook 之外的 Canvas 应用程序和 Web 应用程序。您不需要 Facebook 页面上的 Like 框，因为已经有一个 Like 按钮，并且此页面的目的是显示流。

**更新**：现在我明白你的问题了。您使用的是哪个版本（HTML5、XFBML、IFRAME、URL）？你有没有用 HHSE.hannoverhouse 的 ID 替换 appId 参数？您在 Firebug 中是否显示任何错误（“*它不起作用*”不够精确）？您能否还包括（如果可能）我可以看到错误的公共 URL？

# oracle10g - 如何在 oracle 10g 中安排程序？

> ID：13833955
> 
> 赞同：3
> 
> 时间：2012-12-12T06:20:08.373
> 
> 标签：oracle10g

我必须在 oracle 10g 中安排一个存储过程？

认为

```
create table t1(name varchar2(10));
insert into t1 values('hi');

create or replace procedure insertname
as
begin
insert into t1 values('hi');
end; 
```

现在我的要求是每天上午 11 点我的程序必须自动执行。

我该如何实现它。

实际上我研究了 dbms_scheduler.create_job。但我无法实现它可以任何机构解释我如何安排我的存储过程。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:43:19.527

看看这里： [http ://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sched.htm)

或者有更好的例子： http: [//www.apex-at-work.com/2009/06/dbmsscheduler-examples.html](http://www.apex-at-work.com/2009/06/dbmsscheduler-examples.html)

对您来说有趣的部分（只需更改 job_action）

```
dbms_scheduler.create_job (  
 job_name            => 'TEST_JOB',  
 job_type            => 'PLSQL_BLOCK',  
 job_action          => 'begin /* some process code */ commit; end;',  
 number_of_arguments => 0,  
 start_date          => sysdate +1/24/59, -- sysdate + 1 minute  
 job_class           => 'ADMIN',  -- Priority Group  
 enabled             => TRUE,  
 auto_drop           => TRUE,  
 comments            => 'Testrun'); 
```

# ios - 我们可以在没有地图目的的情况下使用 Google Maps JavaScript API v3 吗？

> ID：13833959
> 
> 赞同：3
> 
> 时间：2012-12-12T06:20:38.357
> 
> 标签：ios, google-maps, google-maps-api-3

我想开发一个 IOS 应用程序，它将使用**Google Maps JavaScript API v3**，但我不想将任何信息显示为**Map**。

如果我只是调用一个 URL，例如 -

***http://maps.googleapis.com/maps/api/directions/json?origin=40.81649,73.907807&destination=40.819585,-73.90177&sensor=false***

**苹果和谷歌会允许/限制它吗？**

我只想显示车站/车站的出发时间、到达时间、公交信息等。

我不想在**Map**上显示任何信息，那么我可以在我的应用程序中使用上述 URL 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:22:51.027

这是不允许的！如果您展示的是可公开访问的地图，您只能使用 Google 地图数据。请参阅[**TOS 的第 9.1 节**](https://developers.google.com/maps/terms#section_9_1)和第**10.1.1 (g)节[“没有 Google 地图，不得使用内容。](https://developers.google.com/maps/terms#section_10_1)** ”：

# asp.net - 用于创建 excel 文件的 LINQ TO XML

> ID：13833966
> 
> 赞同：0
> 
> 时间：2012-12-12T06:21:38.123
> 
> 标签：asp.net, linq

我喜欢从北风项目的客户表中创建 excel 文件。我已经使用了下面的代码，我想知道我必须如何保存 excel 文件以及它将保存在哪里。

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            XNamespace ns = "urn:schemas-microsoft-com:office:spreadsheet";
            XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";
            XNamespace x = "urn:schemas-microsoft-com:office:excel";
            XNamespace x2 = "http://schemas.microsoft.com/office/excel/2003/xml";
            XNamespace ss = "urn:schemas-microsoft-com:office:spreadsheet";
            XNamespace o = "urn:schemas-microsoft-com:office:office";
            XNamespace html = "http://www.w3.org/TR/REC-html40";
            XNamespace c = "urn:schemas-microsoft-com:office:component:spreadsheet";
             DataClasses1DataContext _DataContext;
            _DataContext = new DataClasses1DataContext();

            // Linq to XML - Document
            XDocument doc = new XDocument(
                new XDeclaration("1.0", "UTF-8", string.Empty),
                new XProcessingInstruction("mso-application", "progid=\"Excel.Sheet\""),
                new XElement(ns + "Workbook",
                    new XAttribute("xmlns", ns.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "xsi", xsi.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "x", x.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "x2", x2.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "ss", ss.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "o", o.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "html", html.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "c", c.NamespaceName),
                    new XElement(o + "OfficeDocumentSettings",
                        new XAttribute("xmlns", o.NamespaceName)),
                    new XElement(x + "ExcelWorkbook",
                        new XAttribute("xmlns", x.NamespaceName)),
                    new XElement("Worksheet",
                        new XAttribute(ss + "Name", "Sheet1"),
                        new XElement("Table", // 1st Table
                            new XElement("Row", // First Row
                                new XElement("Cell", // First Cell on First Row
                                    new XElement("Data", new XAttribute(ss + "Type", "String"), "CompanyName") // Data in Cell A1
                                ),
                                new XElement("Cell",
                                    new XElement("Data", new XAttribute(ss + "Type", "String"), "ContactTitle") // Data in Cell B1
                               ),
                                new XElement("Cell",
                                    new XElement("Data", new XAttribute(ss + "Type", "String"), "Country") // Data in Cell C1
                                )

                            )
                        )
                    )
                )
            );

            // Loop through a collection. Each iteration is a new row
            foreach (Customer customer in _DataContext.Customers)
            {
                // Linq to XML - Data
                doc.Descendants("Row").First().AddAfterSelf(
                    new XElement("Row",
                        new XElement("Cell", // First Cell on First Row
                                    new XElement("Data", new XAttribute(ss + "Type", "String"), customer.CompanyName) // Data in Cell A1
                                ),
                                new XElement("Cell",
                                    new XElement("Data", new XAttribute(ss + "Type", "String"), customer.ContactTitle) // Data in Cell B1
                               ),
                                new XElement("Cell",
                                    new XElement("Data", new XAttribute(ss + "Type", "String"), customer.Country) // Data in Cell C1
                                )
                    )
                );
            }
            // Namespace fix. Deletes any empty xmlns="" text in every node.
            foreach (XElement e in doc.Root.DescendantsAndSelf())
            {
                if (e.Name.Namespace == string.Empty)
                {
                    e.Name = ns + e.Name.LocalName;
                }
            }
            doc.Save("e:\ahmed.xml");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:21:39.437

因此，您希望将 XML 数据保存在 Excel 工作表中。请参阅以下代码。您必须首先引用 Excel Libaray。

```
 object misValue = System.Reflection.Missing.Value;            
 Excel.Application myApp=new Excel.Application() ;
 Excel.Workbook myWbk = myApp.Workbooks.Add(misValue);
 Excel.Worksheet myWst = (Excel.Worksheet)myWbk.Worksheets.get_Item(1);

 //Load your XML
 DataSet ds = new DataSet();
 XmlReader xmlFile ;
 xmlFile = XmlReader.Create("e:\ahmed.xml", new XmlReaderSettings());
 ds.ReadXml(xmlFile);

 //Write your XML to Excel
 int i = 0;
 int j = 0;
 for (i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
    {
       for (j = 0; j <= ds.Tables[0].Columns.Count - 1; j++)
           {
              myWst.Cells[i + 1, j + 1] = ds.Tables[0].Rows[i].ItemArray[j].ToString();
           }
       } 
```

链接： http: [//www.codeproject.com/Tips/371595/Generate-Excel-from-XML-and-Generate-XML-from-Exce](http://www.codeproject.com/Tips/371595/Generate-Excel-from-XML-and-Generate-XML-from-Exce)

# javascript - 使复选框过滤器正常工作

> ID：13833967
> 
> 赞同：2
> 
> 时间：2012-12-12T06:21:39.573
> 
> 标签：javascript, jquery, filter

设计师在这里学习编码，在我的 js 中或使用 jquery 并不太远。试图让一个复选框过滤器与这个人几乎相同：http: [//jsfiddle.net/BCbeU/](http://jsfiddle.net/BCbeU/)但似乎无法让它像我正在构建的网站上的 jsfiddle 一样运行。

这是我的复选框的html：

```
 <div class="tags">
    <label><input type="checkbox" rel="all"/> Show All </label>
    <label><input type="checkbox" rel="one"/> 1 Bedroom </label>
    <label><input type="checkbox" rel="two"/> 2 Bedroom </label>
    <label><input type="checkbox" rel="below"/> Below $1500 </label>
    <label><input type="checkbox" rel="above"/> Above $1500 </label>
</div> 
```

这是我要过滤的项目的 html：

```
<div id="shelf1-housing">
<ul class="results">
    <li class="all one">
        <a href="html/sessionone.html">
            <div class="box">
                <img src="../images/apartment2.jpg">
                    <h4>3 Bedroom Apartment</h4>
                    <h5>$1500 a month</h5>
            </div>
        </a>
    </li>

    <li class="all below">
        <a href="html/sessionone.html">
            <div class="box">
                <img src="../images/apartment1.jpg">
                    <h4>3 Bedroom Apartment</h4>
                    <h5>$1500 a month</h5>
            </div>
        </a>
    </li>

    <li class="below all">
        <a href="html/sessionone.html">
            <div class="box">
                <img src="../images/apartment2.jpg">
                    <h4>3 Bedroom Apartment</h4>
                    <h5>$1500 a month</h5>
            </div>
        </a>
    </li>

    <li class="all above">
        <a href="html/sessionone.html">
            <div class="box">
                <img src="../images/apartment1.jpg">
                    <h4>3 Bedroom Apartment</h4>
                    <h5>$1500 a month</h5>
            </div>
        </a>
    </li>

    <li class="all">
        <a href="html/sessionone.html">
            <div class="box">
                <img src="../images/apartment2.jpg">
                    <h4>3 Bedroom Apartment</h4>
                    <h5>$1500 a month</h5>
            </div>
        </a>
    </li>

</ul><!--End of Results-->
</div><!--End of Shelf1-Housing--> 
```

这是javascript：

```
$('div.tags').delegate('input:checkbox', 'change', function(){
     var $lis = $('.results > li').hide();
     //For each one checked
     $('input:checked').each(function(){
          $lis.filter('.' + $(this).attr('rel')).show();
     });      
}); 
```

提前感谢您的帮助。仍在学习基础知识，他们还没有让我走这么远，很快，但还没有:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:36:51.667

我通过从您的网站复制代码来创建小提琴。请查看[http://jsfiddle.net/LXymq/](http://jsfiddle.net/LXymq/)

进行了以下更改：
1) 将 Li 添加回一个名为 results 的类的 div。这就是你的样子。
`<div class="results"> ... All LIs ... </div>`

2) 将所有代码添加到 $(document).ready 函数中，因为代码在 dom 准备好之前执行。

`$(document).ready(function() { ... all your code inside this .... });`

4) 硬编码图像路径以获得美感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:27:25.307

这个小例子可能会有所帮助。

[使用 jQuery 选中和取消选中复选框](http://www.fix4query.in/check-and-uncheck-a-checkbox-with-jquery#more-98)

# java - javaFX 中的 observablelist 更新问题

> ID：13833968
> 
> 赞同：2
> 
> 时间：2012-12-12T06:21:40.890
> 
> 标签：java, listview, javafx

我正在使用 JavaFX 创建一个通用聊天应用程序。我使用 SceneBuilder 创建了一个 listView 并使用如下建模`ObservableList`：

```
public static ObservableList<String>  members = FXCollections.observableArrayList();

@FXML public static Button send;
@FXML static  ListView names;
@FXML static HTMLEditor outmsg;
@FXML static HTMLEditor showBox;

static void updateRemove(String newuser) {

 //   showBox.setHtmlText(showBox.getHtmlText()+newuser+"<br>  has left room");
    System.out.println(newuser+"has left room");
    members.remove(newuser);
    System.out.println("helloji update remove");

}
@FXML public void sendAction(ActionEvent event)
{

 LoginController.instance.c.sendMessage(outmsg.getHtmlText());

}
public  static void updateList(String name)
{
   // showBox.setHtmlText(showBox.getHtmlText()+"<br> new user entered in room");
    System.out.println("new user enterd"+name);
    System.out.println("beginning update list");
    members.add(name);
    System.out.println(members);
    System.out.println("add user request fullfilled");

}
 public  static void initList(Vector<String> name)
{
    System.out.println("list initializing");
    members.setAll(name);
      System.out.println(members);
    System.out.println("list initialized");

    System.out.println("public room created");

}
public static void showMessage(String msg)
{

   // showBox.setHtmlText(showBox.getHtmlText()+""+msg);
        System.out.println("showing msg   "+msg);
}

@Override
public void initialize(URL url, ResourceBundle rb) {
    // TODO

     names.setItems(members);
    // showBox.setHtmlText(showBox.getHtmlText()+"<br> welcome "+Client.username);
         System.out.println("welcome  "+Client.username);

     System.out.println(names.getItems());

} 
```

}

但是当它的`updateRemove()`方法被调用时，会抛出异常：

```
java.lang.IllegalStateException: Not on FX application thread; currentThread = Thread-4
    at com.sun.javafx.tk.Toolkit.checkFxUserThread(Unknown Source)
    at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(Unknown Source)
    at javafx.scene.Parent$1.onProposedChange(Unknown Source)
    at com.sun.javafx.collections.VetoableObservableList.setAll(Unknown Source)
    at com.sun.javafx.collections.ObservableListWrapper.setAll(Unknown Source)
    at com.sun.javafx.scene.control.skin.LabeledSkinBase.updateChildren(Unknown Source)
    at com.sun.javafx.scene.control.skin.LabeledSkinBase.handleControlPropertyChanged(Unknown Source)
    at com.sun.javafx.scene.control.skin.SkinBase$4.changed(Unknown Source)
    at javafx.beans.value.WeakChangeListener.changed(Unknown Source)
    at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
    at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
    at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source)
    at javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
    at javafx.beans.property.StringPropertyBase.set(Unknown Source)
    at javafx.beans.property.StringPropertyBase.set(Unknown Source)
    at javafx.beans.property.StringProperty.setValue(Unknown Source)
    at javafx.scene.control.Labeled.setText(Unknown Source)
    at com.sun.javafx.scene.control.skin.ListViewSkin$12.updateItem(Unknown Source)
    at javafx.scene.control.ListCell.updateItem(Unknown Source)
    at javafx.scene.control.ListCell.access$000(Unknown Source)
    at javafx.scene.control.ListCell$5.onChanged(Unknown Source)
    at com.sun.javafx.scene.control.WeakListChangeListener.onChanged(Unknown Source)
    at com.sun.javafx.collections.ObservableListWrapper.callObservers(Unknown Source)
    at com.sun.javafx.collections.ObservableListWrapper.remove(Unknown Source)
    at com.sun.javafx.collections.ObservableListWrapper.remove(Unknown Source)
    at truechatter.RoomController.updateRemove(RoomController.java:45)
    at truechatter.Client.run(Client.java:78) 
```

而`initList()`方法正常工作。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:14:15.933

UI 只能由 gui 线程更新。

采用：

```
// create JavaFX scene
Platform.runLater(new Runnable() {
    public void run() {
        members.add(name);
    }
}); 
```

为什么 initialize() 方法起作用可能是因为它已经从 FX 应用程序线程调用

来自 javadoc[链接](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)：

```
public static void runLater(java.lang.Runnable runnable) 
```

> 在未来某个未指定的时间在 JavaFX 应用程序线程上运行指定的 Runnable。此方法可以从任何线程调用，它将 Runnable 发布到事件队列，然后立即返回给调用者。Runnables 按照它们发布的顺序执行。传递给 runLater 方法的 runnable 将在传递给后续调用 runLater 的任何 Runnable 之前执行。

# android - 如何在手机内存中创建文件夹并保存图像。

> ID：13833969
> 
> 赞同：1
> 
> 时间：2012-12-12T06:21:43.163
> 
> 标签：android

如何在手机内存中创建新文件夹“MyFolder”并将所有捕获的图像保存在该文件夹中？请帮我。以下代码将所有图像保存到手机的默认图像库。我想创建新文件夹并将所有捕获的图像保存在该文件夹中。我该怎么办？

```
 public class PhotoCaptureExample extends Activity 
  {
protected Button _button;
protected ImageView _image;
protected TextView _field;
protected String _path;
protected boolean _taken;

protected static final String PHOTO_TAKEN   = "photo_taken";

 @Override
  public void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    _image = ( ImageView ) findViewById( R.id.image );
    _field = ( TextView ) findViewById( R.id.field );
    _button = ( Button ) findViewById( R.id.button );
    _button.setOnClickListener( new ButtonClickHandler() );
   ;
  _path = Environment.getExternalStorageDirectory() + "/myfolder   
 /"+System.currentTimeMillis()+".jpg";

    File dir = new File(_path );
    try{
      if(dir.mkdir()) {
         System.out.println("Directory created");
      } 
      else {
         System.out.println("Directory is not created");
      }}
      catch(Exception e){

    }  

}

public class ButtonClickHandler implements View.OnClickListener 
{
    public void onClick( View view ){
        Log.i("MakeMachine", "ButtonClickHandler.onClick()" );
        startCameraActivity();
    }
}

protected void startCameraActivity()
{
    Log.i("MakeMachine", "startCameraActivity()" );
    File file = new File( _path );
    Uri outputFileUri = Uri.fromFile( file );

    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
    intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

    startActivityForResult( intent, 0 );
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{   
    Log.i( "MakeMachine", "resultCode: " + resultCode );
    switch( resultCode )
    {
        case 0:
            Log.i( "MakeMachine", "User cancelled" );
            break;

        case -1:
            onPhotoTaken();
            break;
    }
}

protected void onPhotoTaken()
{
    Log.i( "MakeMachine", "onPhotoTaken" );

    _taken = true;

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 4;

    Bitmap bitmap = BitmapFactory.decodeFile( _path, options );

    _image.setImageBitmap(bitmap);

    _field.setVisibility( View.GONE );
}

@Override 
protected void onRestoreInstanceState( Bundle savedInstanceState){
    Log.i( "MakeMachine", "onRestoreInstanceState()");
    if( savedInstanceState.getBoolean( PhotoCaptureExample.PHOTO_TAKEN ) ) {
        onPhotoTaken();
    }
}

@Override
protected void onSaveInstanceState( Bundle outState ) {
    outState.putBoolean( PhotoCaptureExample.PHOTO_TAKEN, _taken );
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:31:12.393

检查这是否有帮助，

```
File mydir = context.getDir("mydir", Context.MODE_PRIVATE); //Creating an internal dir;
File fileWithinMyDir = new File(mydir, "myfile"); //Getting a file within the dir.
FileOutputStream out = new FileOutputStream(fileWithinMyDir); //Use the stream as usual to write into the file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:13:50.613

您需要在清单文件中具有以下权限才能创建文件夹。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

更新 ：

```
package com.test;

import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class CameraTest extends Activity 
{
    protected Button _button;
    protected ImageView _image;
    protected TextView _field;
    protected String _path;
    protected boolean _taken;

protected static final String PHOTO_TAKEN   = "photo_taken";

 @Override
  public void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.camtest);

    _image = ( ImageView ) findViewById( R.id.image );
    _field = ( TextView ) findViewById( R.id.field );
    _button = ( Button ) findViewById( R.id.button );
    _button.setOnClickListener( new ButtonClickHandler() );
   // _path = Environment.getExternalStorageDirectory() + "/NewFolder/"+System.currentTimeMillis()+".jpg";

    _path = "/sdcard/NewFolder/test1.jpg";

    String dir = "/sdcard/NewFolder/";
    File imageDirectory = new File(dir);
    imageDirectory.mkdirs();

   /* File dir = new File(_path );
    try{
      if(dir.mkdir()) {
         System.out.println("Directory created");
      } 
      else {
         System.out.println("Directory is not created");
      }}
      catch(Exception e){

    }  */
}

public class ButtonClickHandler implements View.OnClickListener 
{
    public void onClick( View view ){
        Log.i("MakeMachine", "ButtonClickHandler.onClick()" );
        startCameraActivity();
    }
}

protected void startCameraActivity()
{
    Log.i("MakeMachine", "startCameraActivity()" );
    File file = new File( _path );
    Uri outputFileUri = Uri.fromFile( file );

    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
    intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

    startActivityForResult( intent, 0 );
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{   
    Log.i( "MakeMachine", "resultCode: " + resultCode );
    switch( resultCode )
    {
        case 0:
            Log.i( "MakeMachine", "User cancelled" );
            break;

        case -1:
            onPhotoTaken();
            break;
    }
}

protected void onPhotoTaken()
{
    Log.i( "MakeMachine", "onPhotoTaken" );

    _taken = true;

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 4;

    Bitmap bitmap = BitmapFactory.decodeFile( _path, options );

    _image.setImageBitmap(bitmap);

    _field.setVisibility( View.GONE );
}

} 
```

这对我来说非常有效。

使用此代码查看。

希望这对您有所帮助。

谢谢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T09:37:32.827

代码应该可以使用，但是要注意先创建这个目录。

# iphone - 我们如何从 iphone 应用程序中找到我们的 instaram 用户 ID 和关注者列表以及其他用户 ID

> ID：13833972
> 
> 赞同：1
> 
> 时间：2012-12-12T06:21:46.930
> 
> 标签：iphone, objective-c, ios, instagram

我有一个 i 手机应用程序，单击按钮如何获取我们的 Instagram 用户 ID？

目前我正在使用 instagram SDK 并且我正在获取我的追随者的 ID，但不知道如何找到我的 USER ID

[这](https://github.com/crino/instagram-ios-sdk)是我现在用来查找关注者用户 ID 的代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T05:44:30.987

它正在修复中，按照上面的链接您将获得带有您的用户 id 和 clint id 的访问令牌，格式如下

userid.client_ID.accesstoken

如果您的 CLIENT ID 是 fe35465454654654654654 并且您的 USER ID 是 458987，您将获得访问令牌为 458987.fe35465.65465sg54654sfa48

# postsharp - LocationInterceptionAspect：args.Location 返回 null

> ID：13833973
> 
> 赞同：0
> 
> 时间：2012-12-12T06:22:05.440
> 
> 标签：postsharp

我正在尝试获取有关它正在拦截的属性的信息，但 args.Location 为空，我不知道为什么。

它是从类到属性的多播，但我认为这无关紧要。有没有其他人遇到过这个问题？

# linux - 合并两个文件（使用行号而不是公共字段）

> ID：13833977
> 
> 赞同：2
> 
> 时间：2012-12-12T06:22:30.750
> 
> 标签：linux, shell, sed, awk

输入文件1：

```
1
5
6 
```

输入文件2：

```
4.5
6.7
9.9 
```

输出：

```
1  4.5
5  6.7
6  9.9 
```

我试过`join`了，但它在这里不起作用，因为没有共同的领域。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T06:25:36.987

根据以下记录，我认为您正在寻找`paste`命令而不是`join`：

```
pax> cat file1
1
5
6

pax> cat file2
4.5
6.7
9.9

pax> paste file1 file2
1   4.5
5   6.7
6   9.9 
```

有关更多详细信息，请参阅您的友好社区`man`页面（或`info`页面），例如`-d`用于选择除 之外的分隔符`TAB`，或`-s`按顺序而不是并行处理文件。

```
pax> paste -d= file1 file2
1=4.5
5=6.7
6=9.9

pax> paste -d, -s file1 file2
1,5,6
4.5,6.7,9.9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:33:29.663

```
awk 'FNR==NR{a[NR]=$1;next}{print a[FNR],$0}' file2 file1 
```

测试如下：

```
> cat file2
a 
b
c
> cat file1
1 
100
90
> awk 'FNR==NR{a[NR]=$1;next}{print a[FNR],$0}' file2 file1
a 1 
b 100
c 90 
```

# perforce - 可以撤销分支已删除文件的 Perforce 集成吗？

> ID：13833979
> 
> 赞同：1
> 
> 时间：2012-12-12T06:22:44.553
> 
> 标签：perforce, perforce-integrate

我发现 Perforce 中的一些旧分支集成重新创建了一些以前删除的文件。因为没有及时发现，后来的集成也修改了分支文件。

例如：

```
 MAIN         BRANCH
cl 1: X rev#1  ==  X rev#1
cl 2:              X removed in branch
cl 3: X rev#2
cl 4:              main -> branch integration, X#2 reappears
cl 5: X rev#3
cl 6:              main -> branch integration, X rev#3 
```

取消这些更改的“Perforce”方式是什么。显然，我可以进入并删除`X`BRANCH 中的文件并提交。但是，如果是 100 多个文件，这将是一项艰巨的任务。

更正确的路径，似乎是退出集成文件。但是，我尝试了这个，Perforce 实际上并没有标记要删除的文件。

不清楚您应该退出更改列表 6，还是更改列表 4？

这是 perforce 还是用户错误？也许有一些标志可以强制在“退出”操作期间删除文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:05:30.840

我会退出更改列表#4。没有完全自动化的方法来解决这个问题。您可能可以编写一个脚本来处理大部分繁重的工作。将来您应该使用分支规范来告诉 Perforce 在所有未来的合并中忽略文件“X”。

# jquery - 如何从 jquery 访问动作控制器值

> ID：13833980
> 
> 赞同：0
> 
> 时间：2012-12-12T06:22:46.133
> 
> 标签：jquery, ruby-on-rails

我是新的 ti jquery。有人告诉我如何从 jquery 访问动作控制器的值

我有以下代码...

```
<% @user_rep.each do |result| %>
<%= link_to result.time,{:action =>'download_log'}, :id => 'l123'%></td>
<% end %> 
```

我在 jquery 中编写了以下代码...

```
jQuery(document).ready(function(){
   jQuery("#l123").click(function() {
    jQuery("#file").show("slow");     // Showing some div 
    ####What to write here
   });
}); 
```

我在 download_log 操作中编码

```
def download_log
IO.foreach "#{RAILS_ROOT}/public/#{filename}" do |line|
                    @file_content << line
                    @file_content << '<br/>'
            end
end 
```

任何人告诉我.. 当我点击“l123”时，会显示一个 div，控制器操作“download_log”会自动调用吗？如果可能，那么我如何在 jquery 中访问 download_log 的值“@file_content”。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:32:28.210

你可以用这样的东西：

```
$(document).ready(function(){
    $("#l123").click(function() {
        $.ajax({
            url: urlOfControllerAndAction,
            type: "get",
            success: function (response, textStatus, jqXHR) {
                $("#file").html(response);
                $("#file").show("slow")
            },
            error: function (jqXHR, textStatus, errorThrown) {
            },
            // callback handler that will be called on completion
            // which means, either on success or error
            complete: function () {
            }
        });
   });
}); 
```

Ajax jQuery 文档在这里：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# windows - 在哪些情况下我们需要指定 QMAKE_CXXFLAGS？

> ID：13833985
> 
> 赞同：1
> 
> 时间：2012-12-12T06:23:04.963
> 
> 标签：windows, qt, qmake, compiler-flags

我的 .pro 文件*如下*所示：

```
TEMPLATE    = 
TARGET      = 
DEPENDPATH  += 

HEADERS     += 
FORMS       += 
SOURCES     += 

QT          += 
QT          += 
QT          += 

INCLUDEPATH +=  
INCLUDEPATH += 
INCLUDEPATH += 
INCLUDEPATH += 

LIBS        += 
LIBS        += 
LIBS        += 

CONFIG      += 
```

我还需要使用[qmake-cxxflags](http://pepper.troll.no/s60prereleases/doc/qmake-variable-reference.html#qmake-cxxflags)吗？
***在哪种情况下应该使用该标志？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:39:33.143

qmake-cxxflags 用于将标志/选项传递给编译器，这完全取决于您作为开发人员。例如，您可以使用它来传递优化设置。

假设您正在使用 GCC 编译器并且您想要启用优化级别 O3，那么您可以这样做：

QMAKE-CXXFLAGS = -O3

或者假设您的 GCC 版本的编译器仅支持 c++11，如果某些标志传递给它，并且您想使用 c++11 的新语言功能，那么您可以这样做：

QMAKE-CXXFLAGS = -std=c++11

当然，您可以只使用一个 QMAKE-CXXFLAGS 来传递所有选项。

QMAKE-CXXFLAGS = -std=c++11 -O3

# java - JSP cif 不工作

> ID：13833988
> 
> 赞同：1
> 
> 时间：2012-12-12T06:23:12.197
> 
> 标签：java, jsp, servlets

我的jsp文件中有这段代码：

```
<body>
    <c:if test="${!isActivityVP && isBuy && isOwner}">
        Hello
    </c:if>
</body> 
```

`isActivityVP`和`isBuy`都是`isOwner`布尔值

但是，当我访问该页面时，我在 html 中得到了这个：

```
<body>
    <c:if test="false">
        Hello
    </c:if>
</body> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:37:33.003

您需要在 JSP 页面中包含`jstlxxx.jar`和`WEB-INF/lib`添加 `<%@ taglib %>`指令。

```
<%@taglib  uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<body>
    <c:if test="${!isActivityVP && isBuy && isOwner}">
        Hello
    </c:if>
</body> 
```

# php - 检查二十一点的赢家

> ID：13833995
> 
> 赞同：1
> 
> 时间：2012-12-12T06:23:37.710
> 
> 标签：php, javascript, ajax

在用户单击“站立”后，我的程序正在检查我的二十一点游戏中的获胜者。当我尝试使用 AJAX 调用获胜者时，我想看看是否有获胜者。如果是，则提醒获胜者。否则，允许庄家采取行动。任何帮助将不胜感激。

支架后的样品结果/输出：用户手=dQ，hJ；val = 20 - 警报“wins! in stand”

这手牌后的预期结果： - 转到 ajaxDealer(user);

php 代码：（$checkPlayerHandValue 工作正常，即如果用户有 C5，HQ，将返回 15）

```
function checkWinner($u, $d, $uValue) {
    if($uValue > 21)
        return $d;
}

if($checkPlayerHandValue > 0) {
    $checkPlayerHandValue = checkPlayerHandValue($user);
    $winner = checkWinner($user, $dealer , $checkPlayerHandValue);
}

 $row = mysql_fetch_array($checkNextTurn);
 $playerTurn = $row['user'];
 echo($playerTurn."|");
 echo($winner); 
```

js代码：

```
xmlhttpB.onreadystatechange=function() {
            if (xmlhttpB.readyState==4 && xmlhttpB.status==200) {
                elements = xmlhttpB.responseText.split("|");
                user = elements[0];
                winner = elements[1];
                //alert(winner);
                if(winner != "")
                    ajaxDealer(user);
                else 
                    alert(winner + " wins! in stand");              

            }
            clickButton = true;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:26:51.447

帮自己一个忙，开始使用带有 AJAX 模块的 jQuery 库。

就您的问题而言，您能否告诉我们您的代码当前存在什么问题（没有发生的事情应该发生，反之亦然）。

另外，我认为这个逻辑是不正确的：

```
if(winner != "")
   ajaxDealer(user);
else 
  alert(winner + " wins! in stand"); 
```

And should be flipped:

```
if(winner == "")
   ajaxDealer(user);
else 
  alert(winner + " wins! in stand"); 
```

# android - 在android中自定义选项菜单

> ID：13833997
> 
> 赞同：2
> 
> 时间：2012-12-12T06:23:51.790
> 
> 标签：android, menu, customization, options-menu

我想在我的应用程序中自定义选项菜单。经过一些谷歌搜索并付出了很多努力，我仍然无法做到。这是我想要的：

![在此处输入图像描述](../Images/e99f9f6b71a81d9ef4eda3dd75c75b91.png)

menu.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
 <item
    android:id="@+id/menu_first"
    android:icon="@drawable/phone_selector"
    android:title="@string/first"/>

 <item
    android:id="@+id/menu_second"
    android:icon="@drawable/butterfly_selector"
    android:title="@string/second"/>

 <item
    android:id="@+id/menu_third"
    android:icon="@drawable/umbrella_selector"
    android:title="@string/third"/>
</menu> 
```

OptionsMenuActivity.java：

```
public class OptionsMenuActivity extends Activity {

private Menu currentMenu;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu, menu);
    this.currentMenu = menu;

    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    setMenuItemIconState(menu, MyApplication.getSelectedMenuItemDrawIcon(), false);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_phone:
        setMenuItemIconState(currentMenu, MyApplication.getSelectedMenuItemDrawIcon(), true);
        MyApplication.setSelectedMenuItemDrawIcon(R.drawable.phone_active);
        Intent intent = new Intent(OptionsMenuActivity.this, FirstActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;

    case R.id.menu_butterfly:
        setMenuItemIconState(currentMenu, MyApplication.getSelectedMenuItemDrawIcon(), true);
        MyApplication.setSelectedMenuItemDrawIcon(R.drawable.butterfly_active);
        intent = new Intent(OptionsMenuActivity.this, SecondActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;

    case R.id.menu_umbrella:
        setMenuItemIconState(currentMenu, MyApplication.getSelectedMenuItemDrawIcon(), true);
        MyApplication.setSelectedMenuItemDrawIcon(R.drawable.umbrella_active);
        intent = new Intent(OptionsMenuActivity.this, ThirdActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
}

private void setMenuItemIconState(Menu menu, int menuItemIconRes, boolean switchLastActiveMenuItemIcon) {
    int menuItemId = 0;
    int lastDeActiveDrawIcon = 0;
    switch (menuItemIconRes) {
        case R.drawable.phone_active:
            menuItemId = R.id.menu_first;
            lastDeActiveDrawIcon = R.drawable.phone;
            break;
        case R.drawable.butterfly_active:
            menuItemId = R.id.menu_second;
            lastDeActiveDrawIcon = R.drawable.butterfly;
            break;
        case R.drawable.umbrella_active:
            menuItemId = R.id.menu_third;
            lastDeActiveDrawIcon = R.drawable.umbrella;
            break;
    }
    if (switchLastActiveMenuItemIcon) {
        MenuItem menuItem = menu.findItem(menuItemId);
        menuItem.setIcon(lastDeActiveDrawIcon);
        return;
    }
    MenuItem menuItem = menu.findItem(menuItemId);
    menuItem.setIcon(MyApplication.getSelectedMenuItemDrawIcon());
 }
} 
```

在 MyApplication.java 中，我只有一个 getter 和一个*selectedMenuItemDrawIcon*设置器。我设法正确设置了图标，但其他图标失败了。

是否可以像这样自定义选项菜单？如果没有，是否有任何其他方法可以创建 xml 文件并使其像 android 的基本菜单一样平滑地出现和消失。

任何帮助，将不胜感激。在此先感谢，（请提供代码示例）。

# django - Django：用户 Javascript 对象作为上下文变量

> ID：13833998
> 
> 赞同：1
> 
> 时间：2012-12-12T06:24:03.600
> 
> 标签：django, django-templates, django-views, django-urls

我一直有这个问题。但我无法弄清楚如何做到这一点。有没有办法，我们可以使用带有模板语言的 javascript 对象。例如，我有在选择小部件上呈现的类别查询集。

```
Category: <select name="category" id="id_category">
{% for category in categories %}
<option value="{{category.id}}">{{category.name}}</option>
{% endfor %}
</select> 
```

现在，对于选定的类别，我异步调用服务器以返回相关的产品类型。

```
$('#id_category').change(function(){
    getProductTypes($(this).val());

}); 
```

在 ajax 函数中，我无法在 url 模板标签中使用 category_id js 对象。因此，我必须对目标 url 进行硬编码。任何人都可以建议一种方法来处理这个问题。谢谢

```
function getProductTypes(category_id){
         //Would like to do this
           var url = {% url lookup_product_types category_id %}
         //But end up doing this
           var url = '/'+category_id+'/product_types/find/'
              $.ajax({
                url:url,
                data:{category:category_id},
                dataType:'json',
                success: function(data, status, xhr){
                    html = '<select>';
                    $.each(data, function(index, value){
                        html += '<option value='+this.pk+'>'+this.fields.name+'</option>';
                    });
                    html += '</select>';
                    $('#productType').html(html);
                }  
              }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:34:27.873

在选项标签上使用[数据属性怎么样？](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

您可以将模板更新为 -

```
{% for category in categories %}
    <option data-url="{% url lookup_product_types category.id %}" value="{{category.id}}">{{category.name}}</option>
{% endfor %} 
```

然后按照以下方式更改ajax -

```
$('#id_category').change(function(){
    var url = $(this).find('option:selected').attr('data-url');
    getProductTypes($(this).val(), url);
});

function getProductTypes(category_id, url){
    $.ajax({
        url: url,
        data:{ category:category_id},
        // .. 
```