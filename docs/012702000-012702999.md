# StackOverflow 问答 12702000-12702999

# android - 我想在我的 android 应用程序中阅读 android play store 应用程序评级

> ID：12702001
> 
> 赞同：1
> 
> 时间：2012-10-03T04:39:42.230
> 
> 标签：android, google-play

我想从我的应用程序的 android play 商店读取应用程序评级。为此，谷歌是否提供了任何api？

有没有其他方法可以读取特定应用程序的评级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:44:56.793

你可以试试[Android Market API](http://code.google.com/p/android-market-api/)，因为这是非官方的 API，我不确定它是否能完全工作。

要获取特定应用的评级，请尝试使用同一 API 的[HowToSearchApps](http://code.google.com/p/android-market-api/wiki/HowToSearchApps)。

# php - 试图让 MySQL 通过 php 连接到 JSON，但返回从 php 脚本连接到 MySQL 的错误

> ID：12702002
> 
> 赞同：0
> 
> 时间：2012-10-03T04:39:44.453
> 
> 标签：php, mysql, json, connection

本质上，我正在尝试以 JSON 格式打印信息，以便可以与我的应用程序进行通信，但由于某些奇怪的原因，我无法从 php 脚本连接到 MySQL 数据库。可能是什么导致了错误：警告：mysql_connect() [function.mysql-connect]: Lost connection to MySQL server during query in /srv/disk11/1158855/www/(myphpwebsite)/lib.php on line 13未连接：查询期间与 MySQL 服务器的连接丢失。

此外，第 13 行表示 lib.php 中的行：

`mysql_connect ( $dbhost, $dbuser, $dbpass) or die("Could not connect: ".mysql_error());`

还应该注意的是，这是对上一个问题的后续处理，以防有人想追查源头：[MySQL issue connected to site with php](https://stackoverflow.com/questions/12701358/mysql-issue-connecting-to-site-with-php)。

最后，我从本地主机和使用 mysql 的远程服务器都收到相同的错误

库文件

```
<?

//Database Information

$dbhost = "31.170.160.76";
$dbname = "testdatabase";
$dbuser = "(personalinformation)";
$dbpass = "tested123";

//Connect to database

mysql_connect ( $dbhost, $dbuser, $dbpass) or die("Could not connect: ".mysql_error());
mysql_select_db($dbname) or die(mysql_error());

//executes a given sql query with the params and returns an array as result
function query() {
    global $link;
    $debug = false;

    //get the sql query
    $args = func_get_args();
    $sql = array_shift($args);

    //secure the input
    for ($i=0;$i<count($args);$i++) {
        $args[$i] = urldecode($args[$i]);
        $args[$i] = mysqli_real_escape_string($link, $args[$i]);
    }

    //build the final query
    $sql = vsprintf($sql, $args);

    if ($debug) print $sql;

    //execute and fetch the results
    $result = mysqli_query($link, $sql);
    if (mysqli_errno($link)==0 && $result) {

        $rows = array();

        if ($result!==true)
        while ($d = mysqli_fetch_assoc($result)) {
            array_push($rows,$d);
        }

        //return json
        return array('result'=>$rows);

    } else {

        //error
        return array('error'=>'Database error');
    }
}

//loads up the source image, resizes it and saves with -thumb in the file name
function thumb($srcFile, $sideInPx) {

  $image = imagecreatefromjpeg($srcFile);
  $width = imagesx($image);
  $height = imagesy($image);

  $thumb = imagecreatetruecolor($sideInPx, $sideInPx);

  imagecopyresized($thumb,$image,0,0,0,0,$sideInPx,$sideInPx,$width,$height);

  imagejpeg($thumb, str_replace(".jpg","-thumb.jpg",$srcFile), 85);

  imagedestroy($thumb);
  imagedestroy($image);
}

?> 
```

索引.php

```
<?
session_start();
require("lib.php");
require("api.php");

header("Content-Type: application/json");

switch ($_POST['command']) {
    case "login": 
        login($_POST['username'], $_POST['password']); break;

    case "register":
        register($_POST['username'], $_POST['password']); break;

}

exit();
?> 
```

api.php

```
<?php

function errorJson($msg){
    print json_encode(array('error'=>$msg));
    exit();
}

function register($user, $pass) {
    //check if username exists
    $login = query("SELECT username FROM login WHERE username='%s' limit 1", $user);
    if (count($login['result'])>0) {
        errorJson('Username already exists');

//try to register the user
$result = query("INSERT INTO login(username, pass) VALUES('%s','%s')", $user, $pass);
if (!$result['error']) {
    //success
    login($user, $pass);
} else {
    //error
    errorJson('Registration failed');
}
}
}
function login($user, $pass) {
    $result = query("SELECT IdUser, username FROM login WHERE username='%s' AND pass='%s' limit 1", $user, $pass);

    if (count($result['result'])>0) {
        //authorized
        $_SESSION['IdUser'] = $result['result'][0]['IdUser'];
        print json_encode($result);
    } else {
        //not authorized
        errorJson('Authorization failed');
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:14:56.950

由于这是在“连接”行上，因此已找到服务器（否则您会收到不同的消息），但您尚未协商您的登录。

直接从[手册](http://dev.mysql.com/doc/refman/4.1/en/error-lost-connection.html)：

> 更罕见的是，当客户端尝试与服务器建立初始连接时，可能会发生这种情况。在这种情况下，如果您的 connect_timeout 值仅设置为几秒钟，您可以通过将其增加到 10 秒来解决问题，如果您的距离很长或连接速度较慢，可能会更长。

如果不是这样，则可能是网络问题，或者您的连接已在身份验证中终止。检查您的 mysql 主机是否有一些奇怪的验证表明您来自特定的 IP（我说很​​奇怪，因为管理它的标准方法比终止身份验证中间流更多），或者尝试您的 PHP 脚本一个更接近 MySQL 服务器的服务器（在网络速度方面更接近）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:37:19.350

我弄清楚是怎么回事。事实证明，我的 php 代码进一步向下与登录冲突。这就是为什么它不会在多个远程 MySQL 和我自己的 Localhost 上进行身份验证的原因

# unix - 输入数据的特征

> ID：12702011
> 
> 赞同：-1
> 
> 时间：2012-10-03T04:41:21.203
> 
> 标签：unix, sed, grep

```
 * Each line consists of two fields, separated by a pipe '|', where
    * the first field is a comma-separated list of items, and
    * the second field is a tag. 
```

这是我的输入：

```
 100,210,354,462|acct
        331,746,50|mis
        90,263,47,14|sales 
```

和所需的输出：

```
 100acct
        210acct
        354acct
        462acct
        331mis
        746mis
        50mis
        90sales
        263sales
        47sales
        14sales 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:54:25.793

```
sed '{s/^\([^a-z].*\),\([^a-z].*\),\([^a-z].*\),\([^a-z].*\)|\([^0-9].*\)$/\1\5\n\2\5\n\3\5\n\4\5/;s/^\([^a-z].*\),\([^a-z].*\),\([^a-z].*\)|\([^0-9].*\)$/\1\4\n\2\4\n\3\4/}' filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:04:00.790

一种使用方式`GNU awk`：

```
awk -F "[,|]" '{ for (i=1; i<NF; i++) print $i$NF }' file.txt 
```

结果：

```
100acct
210acct
354acct
462acct
331mis
746mis
50mis
90sales
263sales
47sales
14sales 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T05:01:34.203

使用以下

```
sed 's/^\([^a-z].*\),\([^a-z].*\),\([^a-z].*\),\([^a-z].*\)|\([^0-9].*\)$/\1\5\n\2\5\n\3\5\n\4\5/g;s/^\([^a-z].*\),\([^a-z].*\),\([^a-z].*\)|\([^0-9].*\)$/\1\4\n\2\4\n\3\4/g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T04:51:19.193

```
sed 's/\([0-9]\),\([0-9]*\),\([0-9]*\),*\([0-9]*\)\([,|]\)\(.*\)/\1\6\n\2\6\n\3\6\n\4\6/' input | sed '/^[a-z]*$/d' 
```

此表达式为您提供正确的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T05:03:53.083

这可能对您有用（GNU sed）：

```
sed 's/\s*//;:a;s/,\(.*|\(.*\)\)/\2\n\1/;ta;s/|//' file 
```

解释：

1.  `s/\s*//`删除记录前面的空格。
2.  `:a;s/,\(.*|\(.*\)\)/\2\n\1/;ta``,`用最后一个字段和换行符替换每个
3.  `s/|//`去除那个`|`

要保留空格，请使用：

```
sed -r 's/(\s*)(.*\|)/\2\1/;:a;s/,(.*\|(.*))/\2\n\1/;ta;s/\|//;s/(\S+)(\s+)(\S+)/\2\1\3/g' file 
```

# ruby-on-rails - 我对 OOP 持久性分离的想法对吗？

> ID：12702012
> 
> 赞同：0
> 
> 时间：2012-10-03T04:41:27.730
> 
> 标签：ruby-on-rails, oop

我正在阅读有关 OOP 并尝试将其应用于 Rails（受 Bob 叔叔的 Ruby conf 谈话的启发），我想知道，以我在下面的方式从“逻辑”模型访问存储库是否正确：

```
class Product
  ...
  def pick_a_random_product
    repository.pick_a_random_product
  end
  ...
end 
```

这是否符合“逻辑与持久性分离”的条件？`repository`在“域”/“逻辑”模型中尽可能广泛地使用它是否可以？

`repository`意味着是一个真正的从数据库中获取东西的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:32:46.193

它有效，但如果 pick_a_random_product 用于不同的类意味着

假设你有类 xyz

```
Class Xyz
  ...
  def pick_a_random_product
    Product.pick_a_random_product
    # Xyz.pick_a_random_product you can't use this.
  end
  ...
end 
```

你有类产品

```
class Product
  ...
  def pick_a_random_product
    Xyz.pick_a_random_product
  end
  ...
end 
```

# javascript - 如何在 javascript 中将 xml 存储为字符串变量？

> ID：12702016
> 
> 赞同：0
> 
> 时间：2012-10-03T04:42:03.423
> 
> 标签：javascript, xml, string

我试图将一段 xml 存储到 javascript 中的字符串变量中，而在 IE8 中它不断抛出错误。FireFox 不会显示错误，但在 IE8 中它当然会显示。切换浏览器不是一种选择，所以我必须尝试解决这个问题。

该函数的目的是检查列表中的项目是否存在于 xml 对象中。因此，如果有更好的方法来进行检查，我也对此持开放态度。我们从中提取的系统具有将 xml 转换为字符串的功能。底部是检索内容的输出。这是功能。

```
function commodityExists(newCommodityCode){
        var comExists = new Boolean(0);
        newCommodityCode =  ">" + newCommodityCode + "<"
        var strXML = 'tw.local.aribaHeader.commodities.toXMLString()';  //ERROR HERE
        strXML = strXML.toString();
        if(strXML.indexOf(newCommodityCode,0)>0){            
            comExists=true;            
        }
        return comExists;
    }; 
```

这是 strXML.toString() 的输出；但正如您所看到的，它本质上是 xml。

```
 var strXML = ‘&lt;variable type="NameValuePair[]">
                      <item type="NameValuePair">
                      <name type="String"><![CDATA[No Data Found]]></name>
                      <value type="String"><![CDATA[95990070]]></value>
                      </item>
                      </variable>’; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:53:12.943

我不知道你认为代码在做什么，这里解释一下它的作用：

```
> function commodityExists(newCommodityCode){
>     var comExists = new Boolean(0); 
```

你真的想要一个布尔对象吗？此函数可能会返回一个布尔对象或原语，具体取决于稍后发生的情况。考虑：

```
 var comExists = false; 
```

.

```
>     newCommodityCode =  ">" + newCommodityCode + "<" 
```

这会覆盖调用中传递给*newCommodityCode*的任何值。

```
>     var strXML = 'tw.local.aribaHeader.commodities.toXMLString()';  //ERROR HERE 
```

我看不出这是如何引发错误的，这是一个简单的字符串分配。

```
>     strXML = strXML.toString(); 
```

这实际上什么也没做——它调用字符串的*toString*方法，它只会返回相同的字符串。

```
>     if(strXML.indexOf(newCommodityCode,0)>0){ 
```

该测试将始终为假，因为*nweCommodityCode*的值在函数中是硬编码的，并且不存在于*strXML*的（硬编码）值中。

```
>         comExists = true;            
>     }
>     return comExists; }; 
```

该函数将始终返回 false（尽管原始函数将返回值为 false 的布尔对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:44:37.200

您正在创建一个字符串：

```
var strXML = 'tw.local.aribaHeader.commodities.toXMLString()';  //ERROR HERE
             ^---                                           ^--- 
```

然后将该字符串转换为...字符串？

```
strXML = strXML.toString(); 
```

`tw`您似乎试图使用的这个对象将在哪里定义？因为现在编写代码时，您没有在此`tw`对象中调用 .toXMLString() 方法。您只是将对象调用的文字文本分配为字符串本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:22:21.343

我尝试采用的方法不起作用，因为我正在动态填充 xml，因此我无法逃避字符（可能有某种方式，但显然不值得）。 [在 javascript 变量中存储 HTML 或 XML 代码](https://stackoverflow.com/questions/5125506/storing-html-or-xml-code-in-javascript-variables)

相反，我将比较移动到服务器端，而不是检索 xml 并在客户端进行比较并通过 ajax 发回结果，除非有人有更好的推荐。

# ios - 在 cocos2d 2 中给定不同尺寸的 iPhone 有条件地定位和显示精灵

> ID：12702019
> 
> 赞同：0
> 
> 时间：2012-10-03T04:42:36.733
> 
> 标签：ios, ios5, cocos2d-iphone, ios6

我创建了一个兼容 iOS 5 和 iPhone 5 之前的应用程序。意思是，它的背景和精灵定位是它们应该用于 iPhone 3.5 Retina 的方式。当我尝试在 iPhone 4" Retina 上运行我的应用程序时，我在应用程序的顶部和底部看到黑色填充。我试图找到一种智能方法来根据屏幕大小有条件地显示不同的背景和精灵位置。我尝试了这两种方法，但它们没有返回我期望的值....

```
NSLog(@"Win Height: %f", winSize.height);
NSLog(@"Win Width: %f", winSize.width);
NSLog(@"Main Screen Height: %f", [UIScreen mainScreen].bounds.size.height);
NSLog(@"Main Screen Width: %f", [UIScreen mainScreen].bounds.size.width);

2012-10-02 21:36:47.317 Win Height: 480.000000
2012-10-02 21:36:47.318 Win Width: 320.000000
2012-10-02 21:36:47.319 Main Screen Height: 480.000000
2012-10-02 21:36:47.319 Main Screen Width: 320.000000 
```

有谁知道根据设备的大小有条件地定位精灵的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:54:07.653

您是否包含 Default-568h@2x.png 初始图像以禁用信箱？

一旦完成，你可以做这样的事情，

```
#define DEVICE_IS_IPHONE5 ([[UIScreen mainScreen] bounds].size.height == 568)

if(DEVICE_IS_IPHONE5)
{
     //Do something different
}
else
{
} 
```

编辑：忘记@2x

# asp.net - 3 个小数点的正则表达式

> ID：12702030
> 
> 赞同：4
> 
> 时间：2012-10-03T04:43:53.530
> 
> 标签：asp.net, regex

我需要一个满足这些规则的正则表达式：

1.  小数点的最大位数为 3，但也应接受没有小数点的数字（例如 12）
2.  该值必须至少为 0
3.  该值必须小于或等于 99999999999.999
4.  小数点是 DOT（例如 2.5，而不是 2,5）

**有效数字示例：**

```
0
2
0.4
78784764.23
45.232 
```

**无效号码示例：**

```
-2
123456789522144
84.2564 
```

我在这里找到了一个示例（http://forums.asp.net/t/1642501.aspx）并设法对其进行了一些修改，使最小值为 0，最大值为 99999999999.999，并且只接受 DOT 作为小数点。这是我修改后的正则表达式：

```
^\-?(([0-9]\d?|0\d{1,2})((\.)\d{0,2})?|99999999999.999((\.)0{1,2})?)$ 
```

但是，我仍然对小数点后 3 位有疑问，而且它相当不稳定。任何人都可以帮助我，因为我在正则表达式方面基本上是文盲？

谢谢。

**已编辑：** 我正在使用 ASP 正则表达式验证器

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T05:15:26.677

这并不难：

```
^[0-9]{1,11}(?:\.[0-9]{1,3})?$ 
```

**解释：**

```
^            # Start of string
[0-9]{1,11}  # Match 1-11 digits (i. e. 0-99999999999)
(?:          # Try to match...
 \.          # a decimal point
 [0-9]{1,3}  # followed by one to three digits (i. e. 0-999)
)?           # ...optionally
$            # End of string 
```

# php - 如何从外部服务器播放来自 BLOB 的音频流？

> ID：12702031
> 
> 赞同：0
> 
> 时间：2012-10-03T04:43:57.040
> 
> 标签：php, android, mysql, blob, android-mediaplayer

在我的应用程序中，我向服务器发送了一个音频 3gp 文件，然后使用 PHP 将它作为 BLOB 存储在 MySQL 数据库中。有没有办法在 android 中使用 MediaPlayer 播放直接从 BLOB 读取的音频流？我知道我可以读取 BLOB 并将其保存在文件系统中，然后在不下载的情况下在 android 中播放它，但如果可能的话，我不想在服务器中保存任何文件。感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:56:05.090

尝试以下示例代码：尝试根据您的要求进行更改，此代码仅从 BLOB 读取文件：

```
 SQLiteDatabase myDb;       
               String MySQL;
               byte[] byteImage1 = null; 
               byte[] byteImage2 = null;
               MySQL="create table emp1(_id INTEGER primary key autoincrement, sample TEXT not null, picture BLOB);";
               myDb = openOrCreateDatabase("Blob List", Context.MODE_PRIVATE, null);
               myDb.execSQL(MySQL);
               String s=myDb.getPath();
               textView.append("\r\n" + s+"\r\n");       
               myDb.execSQL("delete from emp1");
               ContentValues newValues = new ContentValues();
               newValues.put("sample", "HI Hello");

            try
            {
            FileInputStream instream = new FileInputStream("/sdcard/AudioRecorder/AudioRecorder.wav"); 
            BufferedInputStream bif = new BufferedInputStream(instream); 
            byteImage1 = new byte[bif.available()]; 
            bif.read(byteImage1); 
            textView.append("\r\n" + byteImage1.length+"\r\n"); 
            newValues.put("picture", byteImage1); 

            long ret = myDb.insert("emp1", null, newValues); 
            if(ret<0) textView.append("\r\n!!! Error add blob filed!!!\r\n");
            } catch (IOException e) 
            {
                textView.append("\r\n!!! Error: " + e+"!!!\r\n");   
            }

            Cursor cur = myDb.query("emp1",null, null, null, null, null, null);
            cur.moveToFirst();
            while (cur.isAfterLast() == false)
            {
                textView.append("\r\n" + cur.getString(1)+"\r\n");
                cur.moveToNext();
            }
        ///////Read data from blob field////////////////////
            cur.moveToFirst();
            byteImage2=cur.getBlob(cur.getColumnIndex("picture")); 
            bmImage.setImageBitmap(BitmapFactory.decodeByteArray(byteImage2, 0, byteImage2.length));
            textView.append("\r\n" + byteImage2.length+"\r\n"); 

            cur.close();

            myDb.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:56:18.523

假设 MediaPlayer 将允许您向其提供 URL，您可以通过 PHP 脚本对其进行流式传输，该脚本获取 BLOB 并将其回显到输出，而无需将其保存到文件系统或 Android 设备。如果你的 PHP 脚本支持 HTTP`Range`响应，你甚至可以支持搜索。

脚本**smartReadFile.php**是一个 PHP 脚本，用于根据`Range`请求流式传输文件。
[https://groups.google.com/forum/#!msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ](https://groups.google.com/forum/#!msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ)

# python - Django 找不到已安装的应用程序

> ID：12702032
> 
> 赞同：0
> 
> 时间：2012-10-03T04:43:58.910
> 
> 标签：python, django

我已经从这里复制了 djnago 应用程序

[https://github.com/sigurdga/django-jquery-file-upload](https://github.com/sigurdga/django-jquery-file-upload)

我已将该文件夹作为文件上传放在我的根目录中。

但是然后转到 .new/upload

我收到错误 no module named fileupload

但是如果去python shell那么我可以`import fileupload`没有任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:52:37.693

根据您正在安装的应用程序，也许您应该尝试将其放入 URL

```
upload/new 
```

代替

```
new/upload 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-27T04:34:12.450

在项目的 INSTALLED_APP 的 settungs.py 文件中添加已安装的应用程序，然后尝试导入它。

# android - 在 Windows 上运行 android 应用程序（但像原生应用程序）

> ID：12702040
> 
> 赞同：0
> 
> 时间：2012-10-03T04:44:47.507
> 
> 标签：android, windows

我开发了一个可以在大多数设备上正常运行的安卓应用程序。突然，我的客户在两天内请求了一个类似的 Windows 应用程序！而且我不知道如何在两天内将整个应用程序实现为 java 应用程序（例如）

我想知道是否有办法在 Windows 中运行我的 android 应用程序？BlueStack 模拟器在应用程序中显示了一个建议的应用程序栏，并且有一个我的客户无法接受的主屏幕。

有没有办法像原生 Windows 应用程序一样运行 android 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:53:02.953

据我所知，您必须使用 PhoneGap 技术，您可以在所有移动操作系统（如 symbian、android、iphone、windows、blackberry 等）中使用您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:12:34.053

你检查过Bluestacks吗？我同意这些评论。2天是一个糟糕的要求。

[http://bluestacks.com/](http://bluestacks.com/)

# awk - 通过 awk 或 grep 计算特定字符的出现次数

> ID：12702044
> 
> 赞同：0
> 
> 时间：2012-10-03T04:45:21.463
> 
> 标签：awk, grep

我有这样的数据，每行固定数量的字符（8）

```
RYRYRYRR
YRRRRYRR
YYRRRRRY
RYYRRRRR
RRRRRRRY
RYRRRRRY 
```

我需要分别输出计数“Y”和“R”的数量，如下所示..

```
RYRYRYRR 3 5
YRRRRYRR 2 6
YYRRRRRY 3 5 
```

我已经尝试了使用 grep 的脚本，如下所示..

grep -c 'Y'test.dat 打印一些数字，如 13

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T04:53:29.880

试试这个：

```
awk '{print $0, gsub("Y", "Y"), gsub("R", "R")}' 
```

在 awk 中，gsub 返回成功替换的次数。

# android - 检查后禁用复选框，android

> ID：12702045
> 
> 赞同：18
> 
> 时间：2012-10-03T04:45:21.613
> 
> 标签：android, android-checkbox

我想实现这一点：用户选中未选中的复选框，显示吐司，然后复选框变为禁用..

```
male.setOnCheckedChangeListener(new OnCheckedChangeListener(){

    @Override
    public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
   // TODO Auto-generated method stub
   if (isChecked){
    Toast.makeText(CheckBoxTuts.this, "male" , Toast.LENGTH_SHORT).show();
    male.setChecked(false);

   }
    }

       }); 
```

输出失败，因为它们同时执行，即使我把 male.setChecked(false) 放在外面.. 我不记得有什么东西要运行 1st，然后是其他东西.. 是线程吗？真的想不起来

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-03T04:49:41.150

如果您想实现：“用户选中未选中的复选框，显示吐司，然后复选框变为禁用..”，您应该尝试以下代码：

```
male.setOnCheckedChangeListener(new OnCheckedChangeListener(){

    @Override
    public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {                   
      if (isChecked){
          Toast.makeText(CheckBoxTuts.this, "male" , Toast.LENGTH_SHORT).show();
          male.setEnabled(false); // disable checkbox 
      }
    }    
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T04:52:31.727

试试这个....

**-**使用`setEnabled(false)`_`CheckBox`

```
male.setOnCheckedChangeListener(new OnCheckedChangeListener(){

    @Override
    public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {                   
      if (isChecked){

          Toast.makeText(CheckBoxTuts.this, "male" , Toast.LENGTH_SHORT).show();

          male.setEnabled(false);   // Will Disable checkbox 
      }
    }    
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T04:49:11.017

尝试使用已`.onClickListener(View.OnClickListener)`实现`View.OnClickListener`的 . 在实现方法的主体中，您将检查 CheckBox 是否被选中并设置它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T04:51:00.780

```
male.setOnCheckedChangeListener(new OnCheckedChangeListener(){

@Override
public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
  // TODO Auto-generated method stub
   if (isChecked){
   Toast.makeText(CheckBoxTuts.this, "male" , Toast.LENGTH_SHORT).show();
    //male.setVisibility(View.GONE);//disappear your check box
    male.setEnabled(false);//disable your check box
}
}

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-20T08:49:16.840

首先，将您的 CheckBox 注册到 OnCheckedChangeListener。

```
chk.setOnCheckedChangeListener(this); 
```

然后，覆盖它的方法

```
 @Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean b)
    {
        if (chk.isChecked())
        {
           chk.setEnabled(false);
        }
    } 
```

# ios - 为具有不同含义的一个实体设计核心数据模型

> ID：12702048
> 
> 赞同：0
> 
> 时间：2012-10-03T04:45:47.890
> 
> 标签：ios, core-data

我有一个服务器 API，它在 3 个不同的端点下返回相同的 Item 对象：

*   /新的/
*   /受到推崇的/
*   /图书馆/

相同的项目可能出现在新列表和推荐列表中。

我需要以某种方式跟踪哪些项目来自哪些端点，将它们显示为 3 个不同的屏幕，同时在数据库中维护一大堆项目。什么是一个好的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:06:06.883

您可以进行一些超规范化，但如果您认为这是仅有的三个分类，您可以将它们添加为实体的布尔字段，并根据每个字段来自哪个端点将其标记为已检查。以下是一些步骤：

1.  从每个端点下载项目
2.  通过实体的服务器 ID 在 Core Data 中查找每个项目。如果实体在 Core Data 中尚不存在，则创建它
3.  使用您从服务器记录中获得的内容设置实体字段
4.  如果它来自“新”端点，请将“新”布尔字段设置为“是”。如果来自“推荐”，则将“推荐”布尔字段设置为 YES，等等。
5.  保存实体
6.  当您在每个视图中执行 fetch 时，只需将谓词设置为以下内容之一：

    [NSPredicate predicateWithFormat:@"new = 1"];

    [NSPredicate predicateWithFormat:@"recommended = 1"];

# c - Makefile 不工作 - 添加新文件

> ID：12702051
> 
> 赞同：0
> 
> 时间：2012-10-03T04:46:06.727
> 
> 标签：c, makefile

我正在使用这个预制的makefile。我尝试为我添加到应用程序的这两个文件添加heavyhitter.o 和heavyhitter.h，但我无法让它工作。我已经毫无问题地添加了 metadata_record.h 和 metadata_record.o，并且由于我正在添加到同一个区域，我不确定为什么它以前有效但现在不行。

```
CC = $(shell if test -f /opt/local/bin/gcc-mp-4.7; 然后\
        回声 gcc-mp-4.7；否则回声 gcc；菲）
CFLAGS = -std=gnu99 -g -W -Wall -O0 -gstabs -Iglib-2.0 -lglib-2.0

TESTS = $(patsubst %.c,%,$(sort $(wildcard test[0-9][0-9][0-9].c)))

%.o: %.c m61.h memory.h metadata_record.h heavyhitters.h
    $(CC) $(CFLAGS) -o $@ -c $

全部：$(TESTS) hhtest
    @echo "*** 运行 'make check' 或 'make check-all' 来检查你的工作。"

test%: test%.o m61.o memory.o metadata_record.o heavyhitters.o
    $(CC) $(CFLAGS) -o $@ $^

test017：test017-help.o

hhtest: hhtest.o m61.o memory.o metadata_record.o heavyhitters.o
    $(CC) $(CFLAGS) -o $@ $^ -lm

检查： $(TESTS) $(patsubst %,check-%,$(TESTS))
    @echo "*** 所有测试都成功了！"

检查所有：$（测试）
    @x=真；对于我在 $(TESTS); 做 $(MAKE) 检查-$$i || x=假；完毕; \
    如果 $$x; 然后 echo "*** 所有测试成功！"; 菲; $$x

检查测试％：测试％
    @test -d 输出 || mkdir 输出
    @rm -f out/test$*.fail
    @-sh -c "./$^ > out/test$*.output 2>&1" >/dev/null 2>&1; 真的
    @perl compare.pl out/test$*.output test$*.c test$*

干净的：
    rm -f $(TESTS) hhtest *.o
    rm -rf 输出

MALLOC_CHECK_=0
导出 MALLOC_CHECK_

.珍贵：%.o
.PHONY：所有干净检查检查-％准备检查

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:27:28.297

它实际上应该是重击手而不是重击手

# android - android上的Minitemplator，如何访问资产目录中的模板文件？

> ID：12702052
> 
> 赞同：0
> 
> 时间：2012-10-03T04:46:13.803
> 
> 标签：android, android-resources, android-assets

我正在尝试将 Minitemplator (http://www.source-code.biz/MiniTemplator/) 集成到 android 的应用程序中，但我有点迷失。

我可以访问模板文件，模板文件在资产目录中，我尝试以这种方式获取文件：

```
Uri path = Uri.parse("file:///android_asset/index.html"); 
```

并以这种方式实例化对象：

```
MiniTemplator t = new MiniTemplator(path.getPath()); 
```

但它向我发送了一个文件或文件夹不存在的 io 异常。

发送文件以实例化我的 minitemplator 对象的正确方法是什么？

这是完整的代码：

```
package com.kentverger.minitemplator;

import java.io.File;
import java.io.IOException;

import biz.source_code.miniTemplator.MiniTemplator;
import biz.source_code.miniTemplator.MiniTemplator.TemplateSyntaxException;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.webkit.WebView;

public class Template extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_template);

        WebView index = (WebView) findViewById(R.id.indexWebView);

        Uri path = Uri.parse("file:///android_asset/index.html");
        try {
            MiniTemplator t = new MiniTemplator(path.getPath());

            t.setVariable("titulo", "Hola mundo generado desde java");

            String html_code = t.generateOutput();

            index.loadData(html_code, "text/html", null);

        } catch (TemplateSyntaxException e) {
            Log.d("ERROR 1", e.getMessage());
        } catch (IOException e) {
            Log.d("ERROR 2", e.getMessage());
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_template, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:38:07.970

我解决了从字符串而不是 html 文件加载模板的问题。

首先，我必须创建一个包含模板字符串的规范对象

```
MiniTemplator.TemplateSpecification templateSpec = new MiniTemplator.TemplateSpecification(); 
```

然后将模板字符串添加到 templateString 属性

```
templateSpec.templateText = "<html><body><h1>${hello}</h1></body></html>"; 
```

接下来我们必须用 speciciations 对象实例化 Minitemplator 对象

```
t = new MiniTemplator(templateSpec); 
```

我们已经像这样更改模板中变量的值：

```
t.setVariable("hello", "Hola Mundo!"); 
```

非常感谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-05T06:01:49.063

```
 MiniTemplator miniTemplator = openHtmlFileFromAssert(activity, "test.html"); 
```

> 试试这个方法是有效的，有助于从断言文件夹中读取 html 文件

```
 public MiniTemplator openHtmlFileFromAssert(Activity activity, String fileName) {

    try {
        AssetManager assetManager = activity.getAssets();
        InputStream inputStream = assetManager.open(fileName);
        MiniTemplator.Builder templateBuilder = new MiniTemplator.Builder();
        return templateBuilder.build(inputStream, Charset.defaultCharset());
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

# python - 如何在 matplotlib 的图例上绘制一个矩形？

> ID：12702055
> 
> 赞同：5
> 
> 时间：2012-10-03T04:46:44.467
> 
> 标签：python, matplotlib, legend

我正在尝试在 matplotlib 的图例上绘制一个矩形。

为了说明我已经走了多远，我展示了我的最佳尝试，但这是行不通的：

```
import matplotlib.pyplot as plt  
from matplotlib.patches import Rectangle
import numpy as np

Fig = plt.figure()
ax = plt.subplot(111)

t = np.arange(0.01, 10.0, 0.01)
s1 = np.exp(t)
ax.plot(t, s1, 'b-', label = 'dots')

leg = ax.legend()

rectangle = Rectangle((leg.get_frame().get_x(),
                  leg.get_frame().get_y()),
                  leg.get_frame().get_width(),
                  leg.get_frame().get_height(), 
                  fc = 'red'
                 )

ax.add_patch(rectangle)

plt.show() 
```

矩形只是没有在图中的任何地方绘制。如果我查看 leg.get_frame().get_x()、leg.get_frame().get_y())、leg.get_frame().get_width() 和 leg.get_frame().get_height() 的值，我看到了它们分别是 0.0、0.0、1.0 和 1.0。

因此，我的问题似乎是找到图例框架的坐标。

如果你能帮助我，那就太好了。

感谢您阅读本文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:43:17.480

麻烦的是，传说的位置是事先不知道的。只有在您渲染图形（调用`plot()`）时，才能确定位置。

我遇到的一个解决方案[是](http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg09687.html)绘制两次图形。此外，我使用了轴坐标（默认为数据坐标）并缩放了矩形，因此您仍然可以看到它背后的一些图例。请注意，我还必须设置图例和矩形`zorder`；图例绘制得晚于矩形，因此矩形在图例后面消失。

```
import numpy as np
import matplotlib.pyplot as plt  
from matplotlib.patches import Rectangle

Fig = plt.figure()
ax = plt.subplot(111)

t = np.arange(0.01, 10.0, 0.01)
s1 = np.exp(t)
ax.plot(t, s1, 'b-', label = 'dots')

leg = ax.legend()
leg.set_zorder(1)
plt.draw()  # legend position is now known
bbox = leg.legendPatch.get_bbox().inverse_transformed(ax.transAxes)
rectangle = Rectangle((bbox.x0, bbox.y0), 
                      bbox.width*0.8, bbox.height*0.8, 
                      fc='red', transform=ax.transAxes, zorder=2)
ax.add_patch(rectangle)
plt.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-25T05:14:39.567

此链接可能包含您正在寻找的确切内容。 [http://matplotlib.org/users/legend_guide.html#creating-artists-specifically-for-adding-to-the-legend-aka-proxy-artists](http://matplotlib.org/users/legend_guide.html#creating-artists-specifically-for-adding-to-the-legend-aka-proxy-artists)

```
import matplotlib.patches as mpatches
import matplotlib.pyplot as plt

red_patch = mpatches.Patch(color='red', label='The red data')
plt.legend(handles=[red_patch])

plt.show() 
```

# html - 第二个导航栏位于顶部的第一个导航栏下方

> ID：12702056
> 
> 赞同：3
> 
> 时间：2012-10-03T04:46:51.220
> 
> 标签：html, css, twitter-bootstrap, position

嗨，我正在使用 twitter bootstrap，我有两个导航栏，但第二个导航栏隐藏在第一个导航栏下方

```
<div class="navbar navbar-fixed-top"> 
 <a class="brand" href="../"></a>
 <div class="navbar">
              <div class="navbar-inner">
                <div class="container">
                  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"> 
```

第二个导航菜单是

```
<div class="tabbable">
    <ul id="myTab" class="nav nav-tabs">
      <li><a href="#home" data-toggle="tab">Home</a></li>
      <li><a href="#profile" data-toggle="tab">Profile</a></li>
      <li><a href="#messages" data-toggle="tab">Messages</a></li>
      <li><a href="#settings" data-toggle="tab">Settings</a></li>
    </ul> 
```

这是整个代码[http://jsfiddle.net/YZJ5M/](http://jsfiddle.net/YZJ5M/)

您将看不到我的第二个导航，因为它位于第一个导航的下方，我希望第二个导航栏位于它的下方。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:51:32.540

只需取消 和的`position: fixed`规则。或者，如果您不想更改它，请将规则添加到您的班级。`navbar-fixed-bottom``navbar-fixed-top``margin-top: 43px``tabbable`

# ios - 如何在 iPhone 的视频上添加文字

> ID：12702062
> 
> 赞同：0
> 
> 时间：2012-10-03T04:47:24.660
> 
> 标签：ios, mpmovieplayercontroller, watermark, video-editing

我想在 MPMoviePlayerViewController 正在播放的视频上添加一个文本或字符串，使其成为正在播放的视频的一部分。因此，当我在 Facebook 或 Twitter 上发布该视频时，文本必须显示在视频上方。

为此，我尝试获取视频的所有帧，然后在每个帧上写入文本，然后再次制作所有这些帧的视频。但是这样，我遇到了内存问题，它在设备上崩溃了。

```
 - (NSArray*)getVideoFramesFromMovieController:(MPMoviePlayerViewController*)mpMoviePlayerVC
{       NSLog(@"Getting frames from a video asset.");

    //  videoFrames = [NSMutableArray array];
    NSMutableArray *videoFrames = [NSMutableArray array];

    for(float i= 0; i <= mpMoviePlayerVC.moviePlayer.duration; )
    {
        UIImage *singleFrameImage = [mpMoviePlayerVC.moviePlayer thumbnailImageAtTime:i timeOption:MPMovieTimeOptionExact];

        [videoFrames addObject:singleFrameImage];

        NSLog(@"Got frame number : %d",[videoFrames count]);

        i = i + (1/self.frameRate) ;    //frame capturing duration i.e. 15fps  //self.frameRate

    }
    NSLog(@"Total frames: %d",[videoFrames count]);
    return [NSArray arrayWithArray:videoFrames];
} 
```

上面的方法给了我所有的帧，我在所有这些文本上写了一个文本，说“你好”，然后制作所有这些帧的视频。

```
 -(void)writeImageAsMovie:(NSArray *)array toPath:(NSString*)path size:(CGSize)size
{
    NSLog(@"Inside writeImageAsMovie method.");

    NSError *error              = nil;

    AVAssetWriter *videoWriter  = [[AVAssetWriter alloc] initWithURL:
                                  [NSURL fileURLWithPath:path] fileType:AVFileTypeMPEG4
                                                              error:&error];

    NSParameterAssert(videoWriter);

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:size.width], AVVideoWidthKey,   
                                   [NSNumber numberWithInt:size.height], AVVideoHeightKey,   
                                   nil];
    AVAssetWriterInput* writerInput = [[AVAssetWriterInput
                                        assetWriterInputWithMediaType:AVMediaTypeVideo
                                        outputSettings:videoSettings] retain];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                     assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput
                                                     sourcePixelBufferAttributes:nil];

    NSParameterAssert(writerInput);
    NSParameterAssert([videoWriter canAddInput:writerInput]);
    [videoWriter addInput:writerInput];

    //Start a session:
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:kCMTimeZero];

    dispatch_queue_t    dispatchQueue = dispatch_queue_create("mediaInputQueue", NULL);
    int __block         frame = 0;

    [writerInput requestMediaDataWhenReadyOnQueue:dispatchQueue usingBlock:^{
        while ([writerInput isReadyForMoreMediaData])
        {
            NSLog(@"Total frames to be written: %d",[array count]);
            if(++frame >= [array count])   //total frames
            {
                [writerInput markAsFinished];
                [videoWriter finishWriting];
                [videoWriter release];
                break;
            }

            CVPixelBufferRef buffer = (CVPixelBufferRef)[self pixelBufferFromCGImage:[[array objectAtIndex:frame]CGImage] andSize:size];
            if (buffer)
            {
                if(![adaptor appendPixelBuffer:buffer withPresentationTime:CMTimeMake(frame, self.frameRate)])
                    NSLog(@"FAIL");
                else
                    NSLog(@"Success:%d", frame);
                CFRelease(buffer);
            }
        }
    }];

    NSLog(@"outside for loop");

    [self performSelector:@selector(waitTillVideoFinishes) withObject:nil afterDelay:20.0];
} 
```

它在 mac 上运行良好，但由于内存问题而在设备上崩溃。

我还尝试了各种方法来为视频上的文字添加水印，但无法通过。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-25T14:12:55.250

此代码在视频上添加文本或字符串，保存视频后，您将在任何播放器上播放。此代码的最大优点是提供带声音的视频。

```
#import <AVFoundation/AVFoundation.h>

-(void)MixVideoWithText
{
    AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:url options:nil];
    AVMutableComposition* mixComposition = [AVMutableComposition composition];

    AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    AVAssetTrack *clipVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVMutableCompositionTrack *compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    AVAssetTrack *clipAudioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    //If you need audio as well add the Asset Track for audio here

    [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:clipVideoTrack atTime:kCMTimeZero error:nil];
    [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) ofTrack:clipAudioTrack atTime:kCMTimeZero error:nil];

    [compositionVideoTrack setPreferredTransform:[[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] preferredTransform]];

    CGSize sizeOfVideo=[videoAsset naturalSize];
    //NSLog(@"sizeOfVideo.width is %f",sizeOfVideo.width);
    //NSLog(@"sizeOfVideo.height is %f",sizeOfVideo.height);
    //TextLayer defines the text they want to add in Video

    CATextLayer *textOfvideo=[[CATextLayer alloc] init];
    textOfvideo.string=[NSString stringWithFormat:@"%@",text];//text is shows the text that you want add in video.
    [textOfvideo setFont:(__bridge CFTypeRef)([UIFont fontWithName:[NSString stringWithFormat:@"%@",fontUsed] size:13])];//fontUsed is the name of font
    [textOfvideo setFrame:CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height/6)];
    [textOfvideo setAlignmentMode:kCAAlignmentCenter];
    [textOfvideo setForegroundColor:[selectedColour CGColor]];

    CALayer *optionalLayer=[CALayer layer];
    [optionalL addSublayer:textOfvideo];
    optionalL.frame=CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height);
    [optionalL setMasksToBounds:YES];

    CALayer *parentLayer=[CALayer layer];
    CALayer *videoLayer=[CALayer layer];
    parentLayer.frame=CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height);
    videoLayer.frame=CGRectMake(0, 0, sizeOfVideo.width, sizeOfVideo.height);
    [parentLayer addSublayer:videoLayer];
    [parentLayer addSublayer:optionalLayer];

    AVMutableVideoComposition *videoComposition=[AVMutableVideoComposition videoComposition] ;
    videoComposition.frameDuration=CMTimeMake(1, 10);
    videoComposition.renderSize=sizeOfVideo;
    videoComposition.animationTool=[AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer];

    AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [mixComposition duration]);
    AVAssetTrack *videoTrack = [[mixComposition tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    AVMutableVideoCompositionLayerInstruction* layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
    instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
    videoComposition.instructions = [NSArray arrayWithObject: instruction];

    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd_HH-mm-ss"];
    NSString *destinationPath = [documentsDirectory stringByAppendingFormat:@"/utput_%@.mov", [dateFormatter stringFromDate:[NSDate date]]];

    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetMediumQuality];
    exportSession.videoComposition=videoComposition;

    exportSession.outputURL = [NSURL fileURLWithPath:destinationPath];
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    [exportSession exportAsynchronouslyWithCompletionHandler:^{
    switch (exportSession.status)
    {
        case AVAssetExportSessionStatusCompleted:
            NSLog(@"Export OK");
            if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(destinationPath)) {
                UISaveVideoAtPathToSavedPhotosAlbum(destinationPath, self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
            }
            break;
        case AVAssetExportSessionStatusFailed:
            NSLog (@"AVAssetExportSessionStatusFailed: %@", exportSession.error);
            break;
        case AVAssetExportSessionStatusCancelled:
            NSLog(@"Export Cancelled");
            break;
    }
  }];
} 
```

显示保存视频后会出现的错误。

```
-(void) video: (NSString *) videoPath didFinishSavingWithError: (NSError *) error contextInfo: (void *) contextInfo 
{
    if(error)
        NSLog(@"Finished saving video with error: %@", error); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T16:21:39.860

我知道这是一个老问题，但我只是有同样的要求，我找不到任何真正简单快捷的解决方案（为了快速测试我能做到），直到我发现这个[GPUImage 问题：#110](https://github.com/BradLarson/GPUImage/issues/110)。

Brad Larson 建议，使用[GPUImage 框架](https://github.com/BradLarson/GPUImage)可以使用现有的过滤器或/和视频上的 UIKit 元素录制视频。

因此，根据问题 #110 中的信息，我将 GPUImage FilterShowcase 项目与 SimpleVideoFilter 项目结合起来，以快速测试是否可行。

**当然，它有效。**

所以我写这个答案是为了提供快速示例如何做到这一点：

打开 FilterShowcase 项目，

打开 ShowcaseFilterViewController.m 文件，找到`else if (filterType == GPUIMAGE_UIELEMENT)`

在代码之后您会在那里找到 - 添加以下代码：

```
NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie.m4v"];
unlink([pathToMovie UTF8String]); // If a file already exists, AVAssetWriter won't let you record new frames, so delete the old movie
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];
GPUImageMovieWriter *movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(480.0, 640.0)];

[blendFilter addTarget:movieWriter];

[videoCamera startCameraCapture];

double delayToStartRecording = 0.5;
dispatch_time_t startTime2 = dispatch_time(DISPATCH_TIME_NOW, delayToStartRecording * NSEC_PER_SEC);
dispatch_after(startTime2, dispatch_get_main_queue(), ^(void){
    NSLog(@"Start recording");

    videoCamera.audioEncodingTarget = movieWriter;
    [movieWriter startRecording];

    double delayInSeconds = 5.0;
    dispatch_time_t stopTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(stopTime, dispatch_get_main_queue(), ^(void){

        [blendFilter removeTarget:movieWriter];
        videoCamera.audioEncodingTarget = nil;
        [movieWriter finishRecording];
        NSLog(@"Movie completed");

         UISaveVideoAtPathToSavedPhotosAlbum(pathToMovie, nil, NULL, NULL);
    });
});

[videoCamera startCameraCapture];

return; 
```

之后，在 iPhone 上编译 FilterShowCase 项目，然后`UI element`从列表中选择。然后大约 7-10 秒后，您的照片库中将保存一个视频。

# c++ - 将数组传递给函数

> ID：12702063
> 
> 赞同：1
> 
> 时间：2012-10-03T04:47:25.977
> 
> 标签：c++, function, struct, structure

我目前正在上一个介绍性的 c++ 课程，并且正在进行对数据进行排序的工作。我们最近介绍了结构，我决定使用结构来解决问题，而不是创建 3 个数组来保存数据文件中的信息。

我遇到的麻烦是当我试图将我的结构传递给我的函数时。这是我的错误：

```
analyze_data.cpp: In function ‘int main()’:
analyze_data.cpp:76: error: conversion from ‘weather*’ to non-scalar type ‘weather’ requested
analyze_data.cpp: In function ‘int find_pos_of_smallest(weather, int, int)’:
analyze_data.cpp:110: error: no match for ‘operator[]’ in ‘data[pos]’
analyze_data.cpp:110: error: no match for ‘operator[]’ in ‘data[pos_of_smallest]’ 
```

我不明白第 76 行的错误。我对将结构传递给函数进行了一些研究，我发现在类型声明中添加了“&”。但是，我不知道它的作用或为什么我需要这样做，因为我们没有在课堂上介绍它。我也试过了，但我得到了一组不同的错误。所以我想我不会发布这些，而是​​从我所知道的开始。

这是我的代码

```
 /*
    Program name: Analyze data
    Program discription:  This program will read a data file named data.txt.
      This data file is expected to be formated in a specific way and contain
      specific weather information.  The program will analyize this data and
      return max, min temperatures, 'perfect days', how many cold fronts per
      year, 10 coldest  and hottest days in a year and finally find the 5
      median days of the year.

    Date:  10/1/2012
  */

  #include <iostream>
  #include <fstream>

  using namespace std;

  /*
  * Declare struct's here
  *
  */ 
  struct weather
  {
    string date;
    int high;
    int low;
  };

  /* 
  *  Forward declaration of a function.  This declares the function,
  *  but does not define it.  (Notice that there is no code, just
  *  a function header with a semicolon after it.
  *
  */
  int find_pos_of_smallest (weather data, int start_pos, int end_pos);

  /* Our main function.
  *
  * Parameters:
  *    none
  *
  * Return value:
  *    0 if we complete successfully, 1 if there was an error.
  */
  int main()
  {
    //read the data file
    ifstream weather_data("data.txt");
    //declare array size, and then create array using struct
    int days = 365;
    weather data[days];

    //store the data.txt in the array and then close the file
    for (int i=0; i<days; i++)
    {
      weather_data >> data[i].date;
      weather_data >> data[i].high;
      weather_data >> data[i].low;
    }
    weather_data.close();

    ofstream data_results ("results.txt");
    // create the first 3 lines of the output reults in the following formated
    data_results << "Assignment #5\n"
                << "CS 1410/2000\n"
                << "Jonathan Larsen\n";
    /*
    for(int i=0; i<3; i++)
    {
      cout<<data[i].date << " "<<data[i].high << " " << data[i].low<<endl;
    }
    cout<<endl;
    */  
    cout<<find_pos_of_smallest(data, 0, days)<<endl;

    return 0;  //no error so return a zero  
  }//end of program

  /**** FUNCTIONS ****/

  /* Write down exactly what the function will do (a postcondition).
  * Write down what is required to use the function (any preconditions).
  * Write down any other behavior or comments that will help a programmer.
  *
  * Parameters:   (list parameters by type and name, and explain them)
  *   int example -- an example parameter
  *
  * Returns:
  *   double -- an example return value
  */

  /* Returns the position of the smallest value found in the specified
  * subarray.  (Only the elements in the subarray
  * between start_pos and end_pos inclusive are checked.)
  *
  * Parameters:
  *    d - a data array
  *    start_pos - the first position to check
  *    end_pos - the last position to check
  */
  int find_pos_of_smallest (weather data, int start_pos, int end_pos)
  {
    int pos_of_smallest = start_pos;

    for (int pos = start_pos+1; pos <= end_pos; pos++)
      if (data[pos].low < data[pos_of_smallest].low)
        pos_of_smallest = pos;

    return pos_of_smallest;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:50:58.903

您正在将一个数组传递给您的函数。您的函数需要采用 type`weather[]`或`weather*`. 例如：

```
int find_pos_of_smallest (weather* data, int start_pos, int end_pos) 
```

您应该注意，即使您传递的不是数组而是常规结构，您仍然应该通过引用传递。传递一个指针 (weather*) 并使用解引用成员运算符 (->) 或通过引用传递 (weather&) 并使用普通成员运算符 (.)。这是因为按值传递（没有 */&）会导致结构被复制到堆栈上的新值中，这对于大值（例如，如果字符串变大）可能需要相当长的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:51:07.097

您需要将数组作为指针传递：

```
int find_pos_of_smallest (weather *data, int start_pos, int end_pos) 
```

将参数声明为`weather data`仅表示结构的单个实例。使其成为指针意味着您可以传递一个数组（指针将获取数组中第一个元素的地址，当您使用它进行索引时，`data[pos]`您将获得该数组中的相关元素）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:23:45.500

每当你声明一个数组，比如你的`data`数组，在后续代码中单独写数组的名称（在本例`data`中为 ），令人困惑的是，实际上等同于写

```
&(data[0]) 
```

这意味着“`data`数组的第一个元素的地址”。这就是数组通常“传递”到 C 和 C++ 中的函数的方式——通过传递它们的第一个元素的地址。这样做是因为在大型数组的情况下，传递其他类型参数的常用方法（即复制它们）会非常浪费。它还具有允许函数对数组所做的任何更改对调用代码可见的副作用（有时需要，有时不需要）。

您如何在函数内使用该地址？您使用指向 - 的指针`weather`：

```
int find_pos_of_smallest(weather* data, int start_pos, int end_pos) 
```

指针是一个包含其他东西地址的变量。您可以使用`*`间接运算符、`->`运算符（如果指向的对象是 a`struct`或`class`）以及方便的数组下标运算符来访问指向的对象`[]`：例如 inside `find_pos_of_smallest()`，

```
data[5] 
```

`weather`指从指针内部存储的地址开始的元素数组中的第六个元素`data`。

# mysql - OpenCart - XML 到 MySQL

> ID：12702066
> 
> 赞同：1
> 
> 时间：2012-10-03T04:48:26.923
> 
> 标签：mysql, xml, opencart

我有一个 XML 文档和一个全新的 OpenCart 安装。XML 文档的内容是： http: [//pastebin.com/59WeK4Qk](http://pastebin.com/59WeK4Qk)我能够使用以下方法获取每个标签及其值`simplexml()`：

```
$sxml = simplexml_load_file("products-sample.xml");

foreach($sxml->products->children() as $products)
{
    foreach($products->children() as $product)
    {
        echo 'Tag: '. $product->getName(). ' Value:' . $product.'<br />';
    }
    echo '<hr />';
} 
```

但是我没有opencart的编码经验，所以我想知道是否有任何关于使用opencart数据库的指南或教程。

我的主要问题是将我从 XML 解析的信息放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:07:07.880

OpenCart 数据库表的名称大多不言自明，但您可能会忽略一些重要的连接，例如`oc_product_to_store`. 根据您的确切需求，可以忽略一些，如`product_attribute`or 。`product_discount`

OpenCart 允许产品属于多个类别和多个商店，并且某些数据可能是多种语言的。这些一对多连接需要单独的表。也有简单的一对一连接，例如制造商，其中相同的信息对多个产品是通用的，因此通过 _id 链接。

我不会坐在这里免费为您的数据编写导入脚本，但这里有一些我从最近自己完成的导入项目中学到的东西，希望对某人有所帮助。

您的问题是“在哪里”而不是“如何”，所以我假设您已经有了在脚本中执行 MySQL 查询的首选方法。

这些是我需要在 INSERT 中使用的表格和字段，以便将产品放入 OpenCart，以便将其添加到购物车中。

*   **oc_product** : `model`, `sku`, `upc`, `ean`, `jan`, `isbn`, `mpn`, `location`, `quantity`, `stock_status_id`, `manufacturer_id`, `shipping`, `price`, `tax_class_id`, `date_available`, `status`, `date_added`, `date_modified`,`image`
*   **oc_product_description** : `product_id`, `language_id`, `name`, `description`, `meta_description`, `meta_keyword`,`tag`
*   **oc_product_to_store** `product_id` ,`store_id`
*   **oc_product_to_category** `product_id` ,`category_id`

您需要首先处理您的类别和制造商并添加它们，以便您可以查找他们的 ID 并使用它。

如果您以后可能需要使用更新的 XML 文件更新产品，您应该使用`sku`、`upc`、`ean`、`jan`、`isbn`之一`mpn`来存储标识引用（可能是您的`code`）。

要识别正确的字段以及有效值是什么，这里有四个简单的步骤：

1.  导出数据库的备份（例如使用 phpMyAdmin）并将其提取到文本文件中
2.  使用 OpenCart 的管理工具从您的 XML 中手动添加一种产品（完全正确，包括设置正确的税级）
3.  再次导出并提取，然后比较两个文件（例如使用 Beyond Compare）
4.  仔细查看每个更改字段的字段类型（包括字符串长度），并找出任何 _id 与什么相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T11:24:12.990

您可以将 XML 保存为 CSV，然后使用众多 CSV 导入扩展之一，例如[https://www.opencart.com/index.php?route=marketplace/extension/info&extension_id=17](https://www.opencart.com/index.php?route=marketplace/extension/info&extension_id=17)

# java - 带有 InputMismatchException 的 try/catch 创建无限循环

> ID：12702076
> 
> 赞同：27
> 
> 时间：2012-10-03T04:50:29.370
> 
> 标签：java, exception

所以我正在构建一个从用户输入中获取整数的程序。我有一个看起来非常简单的 try/catch 块，如果用户没有输入 int，应该重复该块直到他们输入。这是代码的相关部分：

```
import java.util.InputMismatchException;
import java.util.Scanner;

public class Except {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        boolean bError = true;
        int n1 = 0, n2 = 0, nQuotient = 0;

        do {
            try {
                System.out.println("Enter first num: ");
                n1 = input.nextInt();
                System.out.println("Enter second num: ");
                n2 = input.nextInt();
                nQuotient = n1/n2;
                bError = false;
            } 
            catch (Exception e) {
                System.out.println("Error!");
            }
        } while (bError);

        System.out.printf("%d/%d = %d",n1,n2, nQuotient);
    }
} 
```

如果我为第二个整数输入 0，那么 try/catch 会完全按照它应该做的那样做，并让我再次将其放入。但是，如果我有一个 InputMismatchException，比如为其中一个数字输入 5.5，它只会在无限循环中显示我的错误消息。为什么会发生这种情况，我该怎么办？（顺便说一句，我已经尝试显式输入 InputMismatchException 作为要捕获的参数，但它并没有解决问题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-03T04:52:58.353

`next();`当您收到错误时，您需要致电。另外建议使用`hasNextInt()`

```
 catch (Exception e) {
            System.out.println("Error!");
           input.next();// Move to next other wise exception
        } 
```

在读取整数值之前，您需要确保扫描仪有一个。而且您不需要那样的异常处理。

```
 Scanner scanner = new Scanner(System.in);
    int n1 = 0, n2 = 0;
    boolean bError = true;
    while (bError) {
        if (scanner.hasNextInt())
            n1 = scanner.nextInt();
        else {
            scanner.next();
            continue;
        }
        if (scanner.hasNextInt())
            n2 = scanner.nextInt();
        else {
            scanner.next();
            continue;
        }
        bError = false;
    }
    System.out.println(n1);
    System.out.println(n2); 
```

[扫描仪](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)的 Javadoc

> 当扫描器抛出 InputMismatchException 时，扫描器不会传递导致异常的令牌，以便可以通过其他方法检索或跳过它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T05:09:18.260

你也可以试试下面的

```
 do {
        try {
            System.out.println("Enter first num: ");
            n1 = Integer.parseInt(input.next());

            System.out.println("Enter second num: ");
            n2 = Integer.parseInt(input.next());

            nQuotient = n1/n2;

            bError = false;
        } 
        catch (Exception e) {
            System.out.println("Error!");
            input.reset();
        }
    } while (bError); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-29T11:47:09.737

另一种选择是定义 Scanner input = new Scanner(System.in); 在 try 块内，每次您需要重新输入值时都会创建一个新对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-19T19:53:54.747

要遵循 debobroto das 的答案，您也可以放在后面

```
input.reset();
input.next(); 
```

我有同样的问题，当我尝试这个时。它完全修复了它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T05:02:08.760

由于在`bError = false`中**永远不会到达**该`try block`语句，并且该语句被**输入所采用的输入，因此它会****在无限循环中**不断打印错误。

尝试以这种方式使用它`hasNextInt()`

```
catch (Exception e) {
            System.out.println("Error!");
           input.hasNextInt();         
        } 
```

或者尝试使用`nextLine()`耦合`Integer.parseInt()`来获取输入....

```
Scanner scan = new Scanner(System.in);

int num1 = Integer.parseInt(scan.nextLine());
int num2 = Integer.parseInt(scan.nextLine()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T05:03:37.783

为了补充 AmitD 的答案：

只需复制/粘贴您的程序并获得以下输出：

```
Error!
Enter first num: 
.... infinite times .... 
```

如您所见，指令：

```
n1 = input.nextInt(); 
```

输入双数时不断抛出异常，那是因为您的流未清除。要修复它，请遵循 AmitD 的答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T05:04:28.777

@Limp，您的答案是正确的，只需在读取输入时使用 .nextLine() 即可。示例代码：

```
 do {
        try {
            System.out.println("Enter first num: ");
            n1 = Integer.parseInt(input.nextLine());
            System.out.println("Enter second num: ");
            n2 = Integer.parseInt(input.nextLine());
            nQuotient = n1 / n2;
            bError = false;
        } catch (Exception e) {
            System.out.println("Error!");
        }
    } while (bError);

    System.out.printf("%d/%d = %d", n1, n2, nQuotient); 
```

在下面的链接中阅读有关导致此问题的原因的说明。查找我在此线程中发布的详细信息的答案。 [Java Homework用户输入问题](https://stackoverflow.com/questions/12700897/java-homework-user-input-issue/12701018#12701018)

好的，我将简要描述一下。当您使用 nextInt() 读取输入时，您只读取了数字部分，但 ENDLINE 字符仍在流中。这是主要原因。现在看看上面的代码，我所做的只是阅读整行并解析它，它仍然会抛出异常并按照您期望的方式工作。您的其余代码工作正常。

# lua - 切换两个精灵之间的问题

> ID：12702077
> 
> 赞同：1
> 
> 时间：2012-10-03T04:50:31.783
> 
> 标签：lua, sprite, sequence, coronasdk, prepare

我是 corona sdk 的新手，我正在开发一个游戏。我的游戏也有大角色和大精灵表。在测试游戏时，我发现并非每次都如此，但有时当我在两个精灵之间切换时，它会卡住角色以及与角色相关的一些其他条件。

以下是代码...

```
 if(isSwapping == false and canSwipeBln == true) then
        isSwapping = true;

        canDuckBln = false;
        canJumpBln = false;
        canSwipeBln = false;

        tempSwapBln = touchBln;
        touchBln = false;

        print("current frame     == " .. hero.currentFrame);
        print("current sequence  == " .. hero.sequence); 

        if(hero.sequence ~= "goodNinjaSwipe") then
            hero:prepare("goodNinjaSwipe");
        end
        hero:play();

        print("current frame     == " .. hero.currentFrame);
        print("current sequence  == " .. hero.sequence); 
   end 
```

当我尝试调试它时，它显示切换的（goodNinjaSwipe）精灵的名称，但旧精灵的帧数（goodNinjaWalk）。这是技术问题吗？我不明白

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:23:44.690

您很可能正在将他的两个精灵 API 混合在一起......

旧 API 中使用了“准备”，现在已弃用此 API...

新 API 使用“setSequence”。

# ruby-on-rails - 如何删除回形针中现有的样式尺寸

> ID：12702078
> 
> 赞同：4
> 
> 时间：2012-10-03T04:50:38.610
> 
> 标签：ruby-on-rails, heroku, amazon-s3, resize, paperclip

我知道你可以为回形针添加新样式，然后使用过程！强制回形针填充缺失样式的方法。但是，如果您想放弃不再使用的旧样式怎么办。

例如，我有 iphone 和 ipad 的样式，但我改变了主意，而是想要尺寸略有不同的 :large 和 :medium ，而不是 :iphone 和 :ipad。

特别是我在 s3 上托管我的图像，因为我的应用程序在 heroku 上。我想删除 s3 上与 :iphone 和 :ipad 样式有关的所有文件夹。是否有删除选择样式的 rake 任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:40:10.307

在您的终端中运行

```
rake -T paperclip 
```

你可以看到这样

```
...
rake paperclip:clean                    # Cleans out invalid attachments.
rake paperclip:refresh                  # Refreshes both metadata and thumbnails.
rake paperclip:refresh:metadata         # Regenerates content_type/size metadata for a given CLASS (and optional ATTACHMENT).
rake paperclip:refresh:missing_styles   # Regenerates missing thumbnail styles for all classes using Paperclip.
rake paperclip:refresh:thumbnails       # Regenerates thumbnails for a given CLASS (and optional ATTACHMENT and STYLES splitted by comma).
... 
```

刷新缩略图试试这个

```
rake paperclip:refresh:thumbnails class= Xyz # xyz replace with your class name 
```

用于去除

```
rake paperclip:clean                    # Cleans out invalid attachments. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T07:22:05.843

如果您指的是删除无效文件，请尝试：

```
rake paperclip:clean  # Cleans out invalid attachments. 
```

您可以通过键入以下命令在控制台中查看所有回形针任务：

```
rake -T paperclip 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-02T23:23:33.217

您可以使用该`Attachment#clear`方法。

如果你想删除`thumb`and`display`样式，你可以运行类似：

```
YourModel.find_each do |ym|
  ym.attachment.clear(:display, :thumb)
  ym.save!
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T23:58:02.690

您将不得不编写一个脚本来完成此操作，但回形针确实有一个`s3_object`方便的方法可以让这变得简单：

```
obj = User.first.avatar.s3_object(:unwanted_style)
obj.delete if obj.exists? 
```

您可以将这样的东西放在一个循环中，用于您想要操作的任何对象。

资料来源：

*   [`Paperclip::Storage::S3`文件](http://www.rubydoc.info/gems/paperclip/Paperclip/Storage/S3#s3_object-instance_method)
*   [aws-sdk 对象文档](https://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Object.html)

# javascript - UnderscoreJS 插值正则表达式同时支持小胡子和原始？

> ID：12702079
> 
> 赞同：2
> 
> 时间：2012-10-03T04:50:41.527
> 
> 标签：javascript, regex, underscore.js

我很遗憾使用小胡子式下划线模板插值，因为它与我的 django 模板冲突。

*我想在*不破坏现有代码的情况下开始使用默认插值设置。

我可以`_`尊重两个插值正则表达式而不在它们之间显式切换吗？

小胡子正则表达式：`/\{\{(.+?)\}\}/g`

我试过匹配原来的 + 小胡子，但没有成功。

```
/(?:\{\{(.+?)\}\})|(?:\<\%\=(.+?)\%\>)/g 
```

我劣质的正则表达式技能使我无法弄清楚这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:15:24.847

如果您查看[`_.template`implementation](https://github.com/jashkenas/underscore/blob/master/underscore.js#L1135)，您将看到问题的根源：

```
_.template = function(text, data, settings) {
  //...
  // Combine delimiters into one regular expression via alternation.
  var matcher = new RegExp([
    (settings.escape || noMatch).source,
    (settings.interpolate || noMatch).source,
    (settings.evaluate || noMatch).source
  ].join('|') + '|$', 'g');
  //...
  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) { 
```

所以`_.template`期望三个模板分隔符表达式中的每一个都包含一个捕获组；占位符`noMatch`只是`/(.)^/`这样它不会匹配任何东西，但它仍然包含必要的捕获组。您的尝试包含两个捕获组，如下所示：

```
/(?:\{\{(.+?)\}\})|(?:\<\%\=(.+?)\%\>)/g
//       ^^^                 ^^^ 
```

第二`<%=...%>`组是你的麻烦背后。

你可能可以摆脱这个：

```
/(?:\{\{|<%=)(.+?)(?:%>|\}\})/g 
```

但这会将诸如`<%= pancakes}}`和之类的东西`{{pancakes %>`视为模板表达式。不过，我认为您不必担心类似的事情。

也就是说，您应该能够通过一些非常简单的正则表达式工作将您的模板自动更新为您喜欢的样式，只需通过您最喜欢的工具版本发送所有模板：

```
s/\{\{(.+?)\}\}/<%= $1 %>/g 
```

在 JavaScript 中，您将拥有：

```
// read your template into old_school
new_school = old_school.replace(/\{\{(.+?)\}\}/g, '<%= $1 %>');
// replace your template with the content of new_school 
```

这样您就不必担心上面的时髦正则表达式或有两组分隔符。

# mongodb - Mongodb解释聚合框架

> ID：12702080
> 
> 赞同：134
> 
> 时间：2012-10-03T04:50:51.310
> 
> 标签：mongodb, aggregation-framework

MongoDB中的聚合框架有解释功能吗？我在文档中看不到它。

如果没有，是否有其他方法可以检查，查询如何在聚合框架中执行？

我知道找到你就行

```
db.collection.find().explain() 
```

但是使用聚合框架我得到一个错误

```
db.collection.aggregate(
    { $project : { "Tags._id" : 1 }},
    { $unwind : "$Tags" },
    { $match: {$or: [{"Tags._id":"tag1"},{"Tags._id":"tag2"}]}},
    { 
        $group: 
        { 
            _id : { id: "$_id"},
            "count": { $sum:1 } 
        }
    },
    { $sort: {"count":-1}}
).explain() 
```

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-10-03T05:58:13.653

从 MongoDB 3.0 版开始，只需将顺序从

```
collection.aggregate(...).explain() 
```

到

```
collection.explain().aggregate(...) 
```

将为您提供所需的结果（[此处](https://docs.mongodb.com/manual/reference/method/db.collection.explain/)的文档）。

对于 >= 2.6 的旧版本，您将需要使用[`explain`聚合管道操作的选项](https://docs.mongodb.com/manual/reference/method/db.collection.aggregate/#example-aggregate-method-explain-option)

### `explain:true`

```
db.collection.aggregate([
    { $project : { "Tags._id" : 1 }},
    { $unwind : "$Tags" },
    { $match: {$or: [{"Tags._id":"tag1"},{"Tags._id":"tag2"}]}},
    { $group: { 
        _id : "$_id",
        count: { $sum:1 } 
    }},
    {$sort: {"count":-1}}
  ],
  {
    explain:true
  }
) 
```

聚合框架的一个重要考虑因素是索引只能用于获取管道的初始数据（例如，在管道的开头使用 `$match`, `$sort`, `$geonear`）以及后续 `$lookup`和`$graphLookup`阶段。一旦数据被提取到聚合管道中进行处理（例如通过阶段，如`$project`，`$unwind`和`$group`），进一步的操作将在内存中（如果`allowDiskUse`设置了选项，可能使用临时文件）。

### 优化管道

通常，您可以通过以下方式优化聚合管道：

*   启动一个带有`$match`阶段的管道，以限制对相关文档的处理。
*   确保初始`$match`/`$sort`阶段得到[有效索引](https://docs.mongodb.com/manual/tutorial/optimize-query-performance-with-indexes-and-projections/)的支持。
*   `$match`使用、`$limit`和及早过滤数据`$skip`。
*   最小化不必要的阶段和文档操作（如果需要复杂的聚合体操，可能会重新考虑您的架构）。
*   如果您升级了 MongoDB 服务器，则可以利用更新的聚合运算符。例如，MongoDB 3.4 添加了许多[新的聚合阶段和表达式，](https://docs.mongodb.com/manual/release-notes/3.4/#aggregation)包括对使用数组、字符串和方面的支持。

还有一些[聚合管道优化](https://docs.mongodb.com/manual/core/aggregation-pipeline-optimization/)会根据您的 MongoDB 服务器版本自动发生。例如，可以合并和/或重新排序相邻阶段以改进执行而不影响输出结果。

### 限制

在 MongoDB 3.4 中，Aggregation Framework`explain`选项提供有关如何处理管道的信息，但不支持与查询`executionStats`模式相同级别的详细信息`find()`。如果您专注于优化初始查询执行，您可能会发现使用[或](https://docs.mongodb.com/manual/reference/method/cursor.explain/#verbosity-modes)[verbosity](https://docs.mongodb.com/manual/reference/method/cursor.explain/#verbosity-modes)`find().explain()`查看等效查询是有益的。[`executionStats``allPlansExecution`](https://docs.mongodb.com/manual/reference/method/cursor.explain/#verbosity-modes)

在 MongoDB 问题跟踪器中有一些相关的功能请求需要关注/支持，以帮助优化/配置聚合管道：

*   [SERVER-19758：将“executionStats”和“allPlansExecution”解释模式添加到聚合解释](https://jira.mongodb.org/browse/SERVER-19758)
*   [SERVER-21784：跟踪每个聚合管道阶段的执行统计信息并通过解释公开](https://jira.mongodb.org/browse/SERVER-21784)
*   [SERVER-22622：改进 $lookup 解释以指示 "from" 集合上的查询计划](https://jira.mongodb.org/browse/SERVER-22622)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-10-26T01:16:21.407

从**2.6.x**版本开始， mongodb 允许用户[使用聚合框架进行解释](http://docs.mongodb.org/master/release-notes/2.6/#explain-option-for-the-aggregation-pipeline)。

您需要做的就是添加说明：true

```
db.records.aggregate(
  [ ...your pipeline...],
  { explain: true }
) 
```

感谢 Rafa，我知道即使在 2.4 中也可以这样做，但只能通过`runCommand()`. 但是现在您也可以使用聚合。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-09-15T19:29:46.517

[![聚合框架](../Images/2e70d8a31bbdd3d9c8edb4f3cb37d546.png)](https://i.stack.imgur.com/S555v.png)

聚合框架是一组分析工具`MongoDB`，允许我们对一个或多个集合中的文档运行各种类型的报告或分析。基于管道的想法。我们从`MongoDB`集合中获取输入，并通过一个或多个阶段传递来自该集合的文档，每个阶段对其输入执行不同的操作。每个阶段都将其作为输出之前的任何阶段作为输入。所有阶段的输入和输出都是文档流。每个阶段都有它所做的特定工作。它期待一种特定形式的文档并产生一个特定的输出，它本身就是一个文档流。在管道结束时，我们可以访问输出。

[![聚合框架阶段](../Images/679ba0ac5b52e2712751ab66bc6516cc.png)](https://i.stack.imgur.com/WzGYM.png)

一个单独的阶段是一个数据处理单元。每个阶段一次将一个文档流作为输入，一次处理一个文档并生成文档的输出流。再次，一次一个。每个阶段都提供了一组旋钮或可调参数，我们可以控制这些旋钮或可调参数来参数化阶段以执行我们感兴趣的任何任务。因此，一个阶段执行一项通用任务——某种通用任务，并为我们正在处理的特定文档集参数化该阶段。以及我们希望那个阶段对这些文件做什么。这些可调参数通常采用我们可以提供的运算符的形式，它们将修改字段、执行算术运算、重塑文档或执行某种累积任务以及许多其他事情。很多时候，我们的情况是

[![在单个管道中多次使用相同类型的阶段](../Images/ca54d25d2036182b5be0ab2287ead457.png)](https://i.stack.imgur.com/1grmH.png)

例如，我们可能希望执行一个初始过滤器，这样我们就不必将整个集合传递到我们的管道中。但是，稍后，经过一些额外的处理，想要再次使用一组不同的标准进行过滤。因此，回顾一下，管道与`MongoDB`集合一起工作。它们由阶段组成，每个阶段对其输入执行不同的数据处理任务，并生成文档作为输出以传递到下一个阶段。最后在管道输出的最后产生我们可以在我们的应用程序中做一些事情。在许多情况下，有必要在单个管道中多次包含相同类型的阶段。

# java - 如何在android中禁用系统对话框窗口或弹出窗口？

> ID：12702087
> 
> 赞同：2
> 
> 时间：2012-10-03T04:51:19.387
> 
> 标签：java, android

我正在寻找一种自动关闭平板电脑的方法。

现在，当我们长按电源按钮时，我会收到关机确认（取消或确定）。有没有办法在没有确认的情况下以编程方式关闭设备？

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:59:04.800

不可以。有适当根目录的手机/平板电脑通常可以访问 su/reboot 命令，但对于现成的商用设备，不可以：无法以编程方式将其关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:42:04.997

这是一个冒险的！作为一个应用程序，你不能做很多事情，但有一种方法可以让你尝试。获取已植根并授予您的应用程序超级用户权限的手机。然后你可以尝试从你的 APK 运行这段代码。

```
Process mProcess = null;
DataOutputStream osStream;

try {
        mProcess = Runtime.getRuntime().exec("su");
    } catch (IOException e) {
        Log.e("Error","Unable to get SU permissions, quitting");
    }
    osStream = new DataOutputStream(mProcess.getOutputStream());
try {
        osStream.writeBytes("reboot");
        Thread.sleep(1000);
    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

不是一段经过测试的代码，但希望能给你一些想法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T22:51:18.743

尽管您不能真正在非 root 设备中以编程方式调用关机，但有一种方法可以禁用长按电源按钮时出现的确认对话框。有一个密码

`*#*#7594#*#*` 或者 `*#7594#`

这会改变电源按钮的行为 - 一旦启用代码，就可以直接关闭电源。您需要通过默认拨号盘选择此代码。适用于大多数安卓手机。

[这是其他一些密码的列表。](http://www.reddit.com/r/Android/comments/1sl0ep/list_of_android_secret_codes_tips_and_tricks/)

# c++ - 类中的 C++ 对象构造

> ID：12702092
> 
> 赞同：1
> 
> 时间：2012-10-03T04:51:44.350
> 
> 标签：c++, class, object

我有三门课；它们的函数定义在一个单独的文件中。我正在尝试在另一个类中构造一个具有各种参数的对象，而不使用内联实现。

```
class A{     
     public:
       A(){}  
};

class B{         
     public:
         //takes in two ints, one reference to object, and a string 
         B(int x, int y, A &a, std::string s );
};

class C{        
    public:            
        //in the constructor, construct b_obj with its parameters 
        C();

    private:
        B b_obj;
 }; 
```

如何使用 int 的参数、对 的实例的引用和字符串来`C`构造构造函数？我尝试了一些方法，但我收到一个错误，抱怨没有对构造函数的匹配调用。`b_obj``A``b_obj`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:52:52.803

使用初始化器：

```
C() : b_obj(5, 6, A(), ""){} 
```

不过，这条线在技术上是行不通的，因为 B 的构造函数需要一个`A&`，所以你不能将临时绑定到它。`const A &`如果它没有被改变，或者`A`如果它被改变了，如果你没有一个非临时`A`的通过会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:54:40.353

您需要将相关项传递给对象 C 的构造函数，然后使用初始化程序。

```
class C {
    public:
        C(int x, int y, A& a, std::string s) : b_obj(x, y, a, s) {} 
```

# c++ - 定义了“has_trivial_destructor”而不是“is_trivially_destructible”

> ID：12702103
> 
> 赞同：6
> 
> 时间：2012-10-03T04:53:00.090
> 
> 标签：c++, c++11, g++, conditional-compilation, typetraits

在 C++11 标准的细化过程中，似乎[is_trivially_destructible被认为是比](http://www.cplusplus.com/reference/std/type_traits/is_trivially_destructible/)[has_trivial_destructor](http://msdn.microsoft.com/en-us/LIBRARY/bb982043%28v=vs.110%29)更好/更一致的名称。

这是一个相对较新的发展，因为我的 g++ 4.7.1 仍然使用旧名称，并且已修复它以符合 4.8 的标准：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52702](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52702)

我一直在懒惰地使用一个`#if`有利于我正在使用的编译器的：

```
#if TRIVIAL_DESTRUCTOR_TYPE_TRAIT_MATCHES_STANDARD
template<class T>
using is_trivially_destructible = std::is_trivially_destructible<T>;
#else
template<class T>
using is_trivially_destructible = std::has_trivial_destructor<T>;
#endif 
```

...但现在我正试图与 4.8 用户和其他追逐标准的编译器共享源代码。有没有更好的技巧可以使情况检测更加“自动”并且不需要#define？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T20:56:42.690

这适用于 GCC 4.7 和 4.8，正确地告诉我是否提供了旧特性或新特性：

```
#include <type_traits>

namespace std
{
  template<typename> struct has_trivial_destructor;
  template<typename> struct is_trivially_destructible;
}

template<typename T>
  class have_cxx11_trait_helper
  {
    template<typename T2, bool = std::is_trivially_destructible<T2>::type::value>
      static std::true_type test(int);

    template<typename T2, bool = std::has_trivial_destructor<T2>::type::value>
      static std::false_type test(...);

  public:
    typedef decltype(test<T>(0)) type;
  };

template<typename T>
  struct have_cxx11_trait : have_cxx11_trait_helper<T>::type
  { };

int main()
{
  static_assert( have_cxx11_trait<int>::value, "new trait" );
} 
```

注意我声明（但不定义）这两个特征，因为标准库（可能）不会声明两者，如果甚至没有声明名称，那么你就不能引用`std::is_trivially_destructible`. 所以我将它们都声明了，但只有库定义的一个可以使用。向命名空间添加声明在`std`技术上是未定义的行为，因此使用它需要您自担风险（尽管在这种情况下不太可能擦除您的硬盘。）

不幸的是，不提供新特性的旧编译器也可能无法处理代码——我没有检查它是否适用于 GCC 4.6

现在您可以定义自己的可移植特征：

```
template<typename T>
  using is_trivially_destructible
    = typename std::conditional<have_cxx11_trait<T>::value,
                                std::is_trivially_destructible<T>,
                                std::has_trivial_destructor<T>>::type; 
```

的语义`has_trivial_destructor`与新特性不同，但对于不支持新特性的旧编译器来说，这是一个合理的近似值。

或者，您可以使用静态多态性根据可用的类型特征来获取不同的代码，例如通过专门化模板或通过重载和标签调度，如下所示：

```
template<typename T>
  void foo_helper(const T&, std::true_type)
  {
    // code that uses std::is_trivially_destructible
  }

template<typename T>
  void foo_helper(const T&, std::false_type)
  {
    // different code using std::has_trivial_destructor
  }

template<typename T>
  void foo(const T& t)
  {
    // do common stuff

    // stuff that depends on trait
    foo_helper(t, has_cxx11_trait<T>{});

    // more common stuff
  } 
```

在制作这个答案时没有损害宏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T20:59:15.330

这是一个*非常*hackish 且正式的 UB 片段，它可以测试`std`名称空间是否包含`has_trivial_destructor`名称，并且是否有一个`trivially_destructible`特征别名来选择正确的特征来检查（`is_trivially_destructible`在这种情况下`has_trivial_destructor`不可用）。

```
#include <type_traits>

template<class>
struct has_trivial_destructor{ using test_fail = int; };

template<class>
struct is_trivially_destructible{ using test_fail = int; };

// very hackish and officially UB
namespace std{
  template<class T>
  struct inherit_htd : has_trivial_destructor<T>{};
  template<class T>
  struct inherit_itd : is_trivially_destructible<T>{};
}

namespace check_htd{
  template<class T>
  struct sfinae_false : ::std::false_type{};

  template<class T>
  auto test(int) -> sfinae_false<typename ::std::inherit_htd<T>::test_fail>;
  template<class>
  auto test(...) -> ::std::true_type;

  struct htd_available : decltype(test<int>(0)){};
}

template<class T>
using Apply = typename T::type;

template<class C, class T, class F>
using If = Apply<std::conditional<C::value,T,F>>;

template<class T>
using trivially_destructible = If<check_htd::htd_available, std::inherit_htd<T>, std::inherit_itd<T>>; 
```

[活生生的例子。](http://liveworkspace.org/code/0fb4669a690867baf5634ef84a0df1d4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-14T11:59:27.203

我有类似的问题，并且之前检查了 GCC 版本宏（不幸的是，没有办法检查正确的 libstd++ 版本，只有一个日期代码可用）。[Jonathan Wakely](https://stackoverflow.com/a/12716778/5401214)的上一个答案是一个很好的解决方案，但是对于 libc++ 和可能在版本化的内联命名空间中定义模板或通过 using 将该命名空间映射到 std 的其他库可能会失败。这样原型就不适合了。

要使来自 Jonathan Wakely 的代码适合，您需要检查 libc++ 并定义正确的命名空间。

```
#include <type_traits>

#ifdef _LIBCPP_BEGIN_NAMESPACE_STD
_LIBCPP_BEGIN_NAMESPACE_STD
#else
namespace std {
#endif
  template<typename> struct has_trivial_destructor;
  template<typename> struct is_trivially_destructible;
// All unimplemented in gcc 4.9
  template<typename, typename...> struct is_trivially_constructible;
  template<typename> struct is_trivially_default_constructible;
  template<typename> struct is_trivially_copy_constructible;
  template<typename> struct is_trivially_move_constructible;
  template<typename> struct is_trivially_assignable;
  template<typename> struct is_trivially_copy_assignable;
  template<typename> struct is_trivially_move_assignable;
  template<typename> struct is_trivially_copyable;
#ifdef _LIBCPP_BEGIN_NAMESPACE_STD
_LIBCPP_END_NAMESPACE_STD
#else
} // namespace std
#endif

template<typename T>
  class have_cxx11_trait_helper
  {
    template<typename T2, bool =  std::is_trivially_destructible<T2>::type::value>
      static std::true_type test(int);

    template<typename T2, bool =  std::has_trivial_destructor<T2>::type::value>
      static std::false_type test(...);

  public:
    typedef decltype(test<T>(0)) type;
  };

template<typename T>
  struct have_cxx11_trait : have_cxx11_trait_helper<T>::type
  { };

int main()
{
 static_assert( have_cxx11_trait<int>::value, "new trait" );
} 
```

# jquery - Jqgrid不显示单行

> ID：12702106
> 
> 赞同：0
> 
> 时间：2012-10-03T04:53:22.820
> 
> 标签：jquery, jqgrid

下面给定的字符串没有显示在我的 jqgrid 上

```
 {"assignfix":{"sno":"1","fix":"Se2","templateName":"Restroom","profile":{"id":"11","name":"Restroom"}}} 
```

但是当我插入这个

```
 {"assignfix":[{"sno":"1","fix":"Sef2","templateName":"Restroom","profile":{"id":"11","name":"Restroom"}}]} 
```

它显示正确，仅是单行的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:13:07.547

您没有发布您使用的 jqGrid 的定义，`jsonReader`或者`xmlReader`重要的是要知道。总的来说，我认为您在问题上间接回答了自己。如果`assignfix`属性的值应该是**数组**，则如果数组有一个元素或没有元素，则应该将数据作为数组事件发布。它应该仍然是数组。

# ios - ios 6：iphone 5.1 模拟器中的 NSLayoutConstraint 问题

> ID：12702107
> 
> 赞同：2
> 
> 时间：2012-10-03T04:53:23.033
> 
> 标签：ios

我收到一个错误

由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 NSLayoutConstraint 的类”

当我试图在 iPhone 5.1 模拟器中运行我的应用程序时。我正在设置 NSLayoutConstraint 以在 3.5 英寸和 4 英寸显示屏上运行项目。如果 NSLayoutConstraint 不支持 iPhone 5.1 模拟器，如何调整 3.5 英寸和 4 英寸显示器的框架？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T05:05:00.277

如果您在设计 xibs 文件时检查了 xcode4.5 中的 autoLayout 功能，那么您将无法支持 iOS 5，您需要做的是取消选中每个 xib 文件的自动布局并使用自动调整大小功能来支持 4.0inch屏幕。
你也可以试试这个教程[http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T05:05:42.737

您不能在 iOS 5.1 中使用 AutoLayout（即 NSLayoutConstraint），因为它是 iOS 6 的新功能。对于所有 IB 文件，请确保未选中“使用自动布局”。

# excel-2010 - 如果在工作表复制行之间重复

> ID：12702111
> 
> 赞同：0
> 
> 时间：2012-10-03T04:53:33.957
> 
> 标签：excel-2010

我在 Sheet1 中有一个数据集，其中 A 是标识符，B 是额外信息。如果我在 Sheet2 中的任何地方都有重复的 A，我想将 B 从 Sheet1 复制到 Sheet2，而不管在 Sheet1 A 中的何处发生重复。

我目前正在尝试：`=IF(Sheet2!A1=Sheet1!$A:$A,Sheet2!$B, 99)`，但是这只能逐行工作，我希望它在所有 Sheet1 中搜索重复项并插入属于重复项的 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:12:18.893

我认为不可能通过使用公式来解决。可能，您需要创建一个 VBA 宏。[http://support.microsoft.com/kb/213798/en-us?fr=1](http://support.microsoft.com/kb/213798/en-us?fr=1)

# php - 使用 preg_replace 附加一个值

> ID：12702112
> 
> 赞同：0
> 
> 时间：2012-10-03T04:53:39.997
> 
> 标签：php, regex, preg-replace

假设我有以下href：

> .... href="http://localhost/centboox/usedtextbooks/desc/30" ....

我想通过所有这些并在关闭 href 的双引号之前添加** * ：*

```
... href="http://localhost/webname/pagename/desc/30*******" ... 
```

星号代表一些输入，例如 ?q=all&a=search_text

我如何通过 PHP 中的 preg_replace 做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T04:55:28.510

```
$result = preg_replace('/href="[^"]*/', '\0********', $subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:56:43.640

如果您要始终将其连接到字符串的末尾，有什么理由不能仅仅连接？

```
// Assuming you're array is already filled out...
$somethingToAppend = "?q=all&a=search_text"

foreach($hrefs as $key => $value) {
    $hrefs[$key] = $value + $somethingToAppend;
} 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T04:58:08.087

这是一个简单的例子：

```
$href = <<<EOHTML
<a href="test.html?value=one">LINK</a>
EOHTML;

$href = preg_replace("/href=\"([^\"]*)\"/",
   "href=\"$1**\"", $href);

echo $href; 
```

在我正在寻找的正则表达式模式中`href="(something)"`，我将其替换为`href="(something)**"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T04:59:51.127

这是 preg_replace 的示例，它可能对您有用。检查下面的链接

[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

# java - Postgres 函数在字符 15 处不存在

> ID：12702120
> 
> 赞同：1
> 
> 时间：2012-10-03T04:54:27.500
> 
> 标签：java, hibernate, postgresql

我们有一个 postgres 函数，定义如下：

```
Schema              | public
Name                | getallocationmap_global
Result data type    | refcursor
Argument data types | OUT v_set refcursor, integer, integer, bigint, integer, 
                      smallint, character varying, bigint, bigint, bigint, bigint, 
                      bigint, bigint, bigint, integer, bigint, double precision,  
                      double precision, bigint, double precision, smallint, double 
                      precision, integer, integer, integer, character varying, integer
Type                | normal 
```

我们目前通过 hibernate 的命名查询在我们的 web 应用程序中使用这个函数。命名查询以下列方式定义：

```
<sql-query name="selectAllocationMapByNw_SP" callable="true">
        <return alias="alloc" class="com.zedo.data.dto.AllocationMap">
            <return-property name="id" column="id" />
            <return-property name="channelCode" column="channel_code" />
            <return-property name="creativeId" column="creative_id" />
            <return-property name="priority" column="priority" />
            <return-property name="status" column="status" />
            <return-property name="impressionsAllocated" 
            column="impressions_allocated" />
            <return-property name="impressionsDelivered" 
            column="impressions_delivered" />
            <return-property name="clicksAllocated" column="clicks_allocated" />
            <return-property name="clicksDelivered" column="clicks_delivered" />
            <return-property name="actionsAllocated" column="actions_allocated" />
            <return-property name="actionsDelivered" column="actions_delivered" />
            <return-property name="piactionsDelivered" column="piactions_delivered" />
            <return-property name="timezoneId" column="timezone_id" />
            <return-property name="allocateByDay" column="allocate_by_day" />
            <return-property name="ecpm" column="ecpm" />
            <return-property name="earnedTotal" column="earned_total" />
            <return-property name="vactionsDelivered" column="vactions_delivered" />
            <return-property name="vearnedTotal" column="vearned_total" />
            <return-property name="level" column="level" />
            <return-property name="weight" column="weight" />
            <return-property name="cap" column="cap" />
            <return-property name="durationType" column="duration_type" />
            <return-property name="duration" column="duration" />
            <return-property name="capStatus" column="cap_status" />
            <return-property name="code" column="code" />
        </return>
        { ?=call getallocationmap_global(:nwId, :id, :channelCode, :creativeId, 
         :priority, :status, :impressionsAllocated, :impressionsDelivered, 
         :clicksAllocated, :clicksDelivered, :actionsAllocated, :actionsDelivered, 
         :piactionsDelivered, :timezoneId, :allocateByDay, :ecpm, :earnedTotal, 
         :vactionsDelivered, :vearnedTotal, :level, :weight, :cap, :durationType, 
         :duration, :capStatus, :code) }  
    </sql-query> 
```

我们访问这个命名查询的方式是：

```
Query query = getSession().getNamedQuery("selectAllocationMapByNw_SP"); 
```

其中 getSession() 将返回当前的休眠会话。

然后在我们为这个查询设置可用参数并以这种方式执行它之后：

```
List retList = query.list(); 
```

这种方法在大多数情况下都有效，但突然在正在运行的应用程序中的给定时间点，它开始抛出以下异常：

```
[org.hibernate.util.JDBCExceptionReporter 280912:063129 WARN ] - SQL Error: 0, SQLState: 25P02
[org.hibernate.util.JDBCExceptionReporter 280912:063129 ERROR] - ERROR: current transaction is aborted, commands ignored until end of transaction block
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  : org.hibernate.exception.GenericJDBCException: could not execute query
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - SQLStateConverter.java::handledNonSpecificException() - 126
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - SQLStateConverter.java::convert() - 114
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - JDBCExceptionHelper.java::convert() - 66
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - Loader.java::doList() - 2231
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - Loader.java::listIgnoreQueryCache() - 2125
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - Loader.java::list() - 2120
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - CustomLoader.java::list() - 312
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - SessionImpl.java::listCustomQuery() - 1722
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - AbstractSessionImpl.java::list() - 165
[AllocationMapSQL 280912:063129 ERROR] - AllocationMapSQL::updateWithStatus() -  - SQLQueryImpl.java::list() - 175
[AllocationMapSQL 280912:063129 ERROR] - ConcreteAllocationMapHibernateDAO::executeSearch() - 111 
```

此外，在 db 日志中，我们看到以下错误：

```
ERROR:  function getallocationmap_global(unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown, unknown) does not exist at character 15
HINT:  No function matches the given name and argument types. You might need to add explicit type casts. 
```

我们检查了传递给这个函数的所有参数和参数类型，它们确实匹配。

PS - 在我们的应用程序中，休眠操作是通过包含在类路径中的 jar 文件执行的。

以下是配置：

操作系统 - openSUSE 10.3 (X86-64) - 内核 \r (\l) 休眠版本 - 3.3.1-GA Postgres - 9.1.4 JDK - 1.6.0-22。Tomcat - apache-tomcat-7.0.8。JDBC Jar - postgresql-9.1-901.jdbc3.jar

请让我知道可能的原因。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:02:07.417

我建议查看交易块。

`ERROR: current transaction is aborted, commands ignored until end of transaction block`与发生错误的打开事务相关联，并且在该客户端尝试打开另一个事务之后（例如）：

```
BEGIN;
SELECTT 1;  -- ERROR:  syntax error at or near "SELECTT"
BEGIN;      -- ERROR: current transaction is aborted, commands ignored until end of transaction block 
```

# facebook - Facebook 应用程序上的空白页面

> ID：12702121
> 
> 赞同：0
> 
> 时间：2012-10-03T04:54:29.247
> 
> 标签：facebook

我们制作我们的 Facebook 应用程序。一切都很正常。重命名一个文件后，所有链接都不再起作用。在我们的应用程序的早期，这不是问题。我不知道为什么会这样。

有什么想法吗？如果需要更多信息，请告诉我。

[这是我的申请](https://www.facebook.com/sensitif/app_499841173364800)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:46:06.550

您在此处的应用程序：
[http ://www.hamilgakhamil.com/sensifstory/like](http://www.hamilgakhamil.com/sensitifstory/like)

上缺少图像（[链接](http://www.hamilgakhamil.com/sensitifstory/images/banner-fb.jpg)）`images/banner-fb.jpg`，以及 css 文件。
要解决此问题，请移动应用程序根目录中的`css`和`images`目录`sensitifstory`。

# c# - 如何减少控制台应用程序的用户对象和句柄

> ID：12702122
> 
> 赞同：0
> 
> 时间：2012-10-03T04:54:33.377
> 
> 标签：c#, windows-console

我有为一组记录创建 PDF 的控制台应用程序。如果计数为 9000 以上，则会发生“创建窗口句柄时出错”的错误。在应用程序级别我使用 6 个线程。

正如我在任务管理器中观察到的，句柄在增加，用户对象也在增加。

我已经在创建对象的地方编写了 obj.Dispose 方法。所以现在我的问题是如何减少用户对象和句柄。

我在 C# 中使用带有 3.5 框架的控制台应用程序。

更新：

下面是我用过的代码

```
Thread FirstTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess()); 
```

FirstTreadPDFs.Start();

//Thread2 线程 SecondTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess()); SecondTreadPDFs.Start();

//Thread3 线程 ThirdTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess2()); ThirdTreadPDFs.Start();

//Thread4 线程FourthTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess()); FourthTreadPDFs.Start();

//Thread5 线程 FifthTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess1()); FifthTreadPDFs.Start();

FirstTreadPDFs.Join(); SecondTreadPDFs.Join(); ThirdTreadPDFs.Join(); FourthTreadPDFs.Join(); FifthTreadPDFs.Join();

```
 DataSet dsHeader1 = new DataSet();
                        //Pending Cusotmers need to get to generate PDFs
                        dsHeader1 = objCustStatementDAL.GetCustStatementdetailsForPDF(IsEDelivery, 1);

                        if (dsHeader1 != null && dsHeader1.Tables.Count > 0)
                        {
                            if (dsHeader1.Tables[0].Rows.Count > 0)
                            {
                                writerLog.WriteLine(DateTime.Now + " Trying to get Pending Records");
                                objPDFsProcess.DoGeneratePDFsProcess2();
                                writerLog.WriteLine(DateTime.Now + " Exit Trying to get Pending Records block");
                            }
                        }
                        dsHeader1.Dispose(); 
```

在执行 9000+ 条记录后，Exit Trying 行正在执行并停止应用程序。

我在哪里使用我放置的对象 Dispose 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:14:50.700

从您的问题来看，您并不清楚您在做什么，但如果我猜对了，您保留了太多打开的文件处理程序。

所以它来了。例如，如果您打开一个 StreamReader，您打开一个文件处理程序，这恰好是一个非托管和有限的资源。非托管意味着 .NET 运行时无法密切关注其使用情况，即使您失去对 StreamReader 对象的引用，处理程序也不会关闭。因此，您需要调用 Dispose 函数（如果您正在创建一个使用本机资源的类，请实现 IDisposable 接口，该接口正确包含 Dispose 函数）。您可以显式进行调用，但对每个人来说最好的方法是使用[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块。这样，您的处理程序将在您每次离开块范围时正确关闭，无论以何种方式。

当然，如果您试图保持开放并使用这么多处理程序，您需要以某种方式绕过它，这仍然涉及关闭当前未使用的处理程序。

# android - 如何从具有共享意图的 Android 浏览器获取 URL 和选择文本

> ID：12702123
> 
> 赞同：4
> 
> 时间：2012-10-03T04:54:35.890
> 
> 标签：android, android-intent

在新版本的 Android 手机中（肯定是从 ICS 开始，可能早在 2.3.5，至少在 HTC EVO 上），当您在浏览器中进行选择时，它会显示一个包含 3 个点的弹出窗口，单击它会打开一个提供复制、共享等选项的菜单。如果选择共享，则可以选择共享到应用程序。

对于我正在处理的应用程序，当用户共享到我的应用程序时，我需要选定的文本和它来自的页面的 URL。

在运行 2.3.5 的 HTC EVO 上，这提供了页面的 URL 以及选定的文本。然而，在其他手机上，我们只获得选定的文本。所以我怀疑在 HTC EVO 上同时安装两者是对运营商/制造商的增强。对于这款手机，所选文本以 Intent.EXTRA_TEXT 形式出现，而 url 以 Intent.EXTRA_TITLE 形式出现。

任何人都知道获取选择文本和 URL 的方法。如果这是运营商/制造商的增强功能，那么它的普及程度如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T19:19:37.273

据我了解，没有可靠的方法可以从“文本/计划”mime 类型的共享意图中获取 URL。浏览器将 URL 放在 EXTRA_TEXT 中，但其他应用程序不会（例如 FlipBoard）。

# php - ios+php中的json解析

> ID：12702128
> 
> 赞同：1
> 
> 时间：2012-10-03T04:54:58.150
> 
> 标签：php, ios, json, web-services, function

我在 PHP 中创建了 Web 服务，它有 1 个函数和 1 个参数。我使用 phpMyadmin 作为后端。它使用 json 格式来获取数据。Web 服务运行良好。我想在我的 iPhone 应用程序中使用这个网络服务。我想传递 1 个参数。我也将 rayWenderlich 教程作为参考。但找不到解决办法。请帮帮我。

这是我的网络服务代码：

```
<?php

echo getdata($_REQUEST['lastupdate']);

function getdata($lastupdatedate){

    $json = '{"foo-bar": 12345}';       
    $obj = json_decode($json);
    //print $obj->{'foo-bar'}; // 12345    

    $con = mysql_connect("localhost","un","Password");          

    if (!$con){
       die('Could not connect: ' . mysql_error());
    }

    //print_r($con);            
    mysql_select_db("roster", $con);

    $query = "select * from rates where LastUpdated = '".$lastupdatedate."' order by LastUpdated limit 1";    
    $rs = mysql_query($query) or die($query);

    //print_r($rs);

    while($row=mysql_fetch_assoc($rs)){    
        $record[] = $row;    
    }
    $data = json_encode($record);

    header('Cache-Control: no-cache, must-revalidate');    
    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');    
    header('Content-type: application/json');

    return $data;    
} 
```

Iphone App 端，我尝试过以下代码：

```
-(void)GETJSONDATA
{
    SBJSON *json = [SBJSON new];
    json.humanReadable = YES;
    responseData = [NSMutableData data];

    NSString *service = @"";
    NSString *str;
    str = @"LastUpdated";

    NSString *requestString = [NSString stringWithFormat:@"{\"LastUpdated\":\"%@\"}",str];

    // [[NSUserDefaults standardUserDefaults] setValue:nil forKey:@"WRONGANSWER"];

    NSLog(@"request string:%@",requestString);
    NSData *requestData = [NSData dataWithBytes: [requestString UTF8String] length: [requestString length]];

    NSString *fileLoc = [[NSBundle mainBundle] pathForResource:@"URLName" ofType:@"plist"];
    NSDictionary *fileContents = [[NSDictionary alloc] initWithContentsOfFile:fileLoc];
    NSString *urlLoc = [fileContents objectForKey:@"URL"];
    urlLoc = [urlLoc stringByAppendingString:@"?lastupdate=2012-09-01 01:00:00"];
    NSLog(@"URL : %@",urlLoc);

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: 
                                    [NSURL URLWithString: urlLoc]];  
    NSString *postLength = [NSString stringWithFormat:@"%d", [requestData length]];
    [request setHTTPMethod: @"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody: requestData];

    NSError *respError = nil;
    NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: &respError ];

    if (respError) 
    {
        //        NSString *msg = [NSString stringWithFormat:@"Connection failed! Error - %@ %@",
        //                         [respError localizedDescription],
        //                         [[respError userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]]; 
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"ACTEC" 
                                                            message:@"check your network connection" delegate:self cancelButtonTitle:@"OK" 
                                                  otherButtonTitles:nil];
        [alertView show];

    } 
    else
    {
        NSUserDefaults *dd = [NSUserDefaults standardUserDefaults];
        NSString *responseString = [[NSString alloc] initWithData:returnData encoding: NSUTF8StringEncoding];
        NSLog(@"Resp : %@",responseString);

        NSDictionary *results = [responseString JSONValue];
        NSLog(@"results=%@",results);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:25:52.660

您可能想研究使用库。[AFNetworking](https://github.com/AFNetworking/AFNetworking)提供了一个名为 AFHTTPClient 的类，它允许您连接到一个静止的 Web 服务并对其进行简单的调用。假设一个终点，你可以做这样的事情：

```
NSDictionary *body = [NSDictionary dictionaryWitObject:@"LastUpdated" forKey:@"LastUpdated"];

NSString *fileLoc = [[NSBundle mainBundle] pathForResource:@"URLName" ofType:@"plist"];
NSDictionary *fileContents = [[NSDictionary alloc] initWithContentsOfFile:fileLoc];
NSString *urlLoc = [fileContents objectForKey:@"URL"];
urlLoc = [urlLoc stringByAppendingString:@"?lastupdate=2012-09-01 01:00:00"];    

AFHTTPClient *client = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:urlLoc]];

[client postPath:@"endpoint" parameters:body success:^(AFHTTPRequestOperation *operation, id responseObject) {
    // Do something with the responseObject

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // Log the error and proceed

}]; 
```

您可以在此处找到文档：http: [//engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html](http://engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html)

# android - 广播接收器中的android http获取请求

> ID：12702132
> 
> 赞同：1
> 
> 时间：2012-10-03T04:55:28.043
> 
> 标签：android, broadcastreceiver, http-get

我是 android 新手，需要帮助，因为问题表明我想要一个后台服务来监听传入的短信（使用广播接收器？），然后尽快为每个短信发出带有短信正文和电话号码的 http 获取请求当它到达时（上传到网络服务器），尝试从头开始，想法和代码示例有人吗？:)

```
public class ReceiverContainer extends Service{

public SMSreceiver mSMSreceiver;
public IntentFilter mIntentFilter;

@Override
public void onCreate()
{
super.onCreate();

//SMS event receiver
mSMSreceiver = new SMSreceiver();
mIntentFilter = new IntentFilter();
mIntentFilter.addAction("android.provider.Telephony.SMS_RECEIVED");
registerReceiver(mSMSreceiver, mIntentFilter);
}

@Override
public void onDestroy()
{
super.onDestroy();

// Unregister the SMS receiver
unregisterReceiver(mSMSreceiver);
mSMSreceiver = null;
}

@Override
public IBinder onBind(Intent intent) {
// TODO Auto-generated method stub
return null;
}

public class SMSreceiver extends BroadcastReceiver
{
 public void Action(Context context,Intent intent) throws ClientProtocolException, URISyntaxException, IOException
    {
     Bundle myBundle = intent.getExtras();
     SmsMessage [] messages = null;
     String strMessage = "";
     String msgFrom = "";
     String msgText = "";

     if (myBundle != null)
     {
         Object [] pdus = (Object[]) myBundle.get("pdus");
         messages = new SmsMessage[pdus.length];

         for (int i = 0; i < messages.length; i++)
         {
             messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
             strMessage += "SMS From: " + messages[i].getOriginatingAddress();
             msgFrom += messages[i].getOriginatingAddress();
             strMessage += " : ";
             strMessage += messages[i].getMessageBody();
             msgText += messages[i].getMessageBody();
             strMessage += "\n";
         }

         Toast.makeText(context, strMessage, Toast.LENGTH_SHORT).show();

         uploadMessage(context,msgFrom,msgText);

     }
    }

@Override
public void onReceive(Context context, Intent intent)
{
        try {
            Action(context,intent);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
}

}

public void uploadMessage(Context context,String number,String msg) throws URISyntaxException,   ClientProtocolException, IOException
{

HttpResponse response = null;
HttpClient client = new DefaultHttpClient();

Uri.Builder path = new Uri.Builder();
path.scheme("http");
path.authority("technonectar11.com");
path.path("sms");
path.appendQueryParameter("fromno" , number);
path.appendQueryParameter("text" , msg);
path.appendQueryParameter("uname" , "vijay");

HttpGet request = new HttpGet(path.build().toString());     
//request.setURI(new URI("http://www.technonectar11.com/sms/insertsms?fromno="+number+"&text="+msg+"&uname=vijay"));
response = client.execute(request);

String result = convertStreamToString(response.getEntity().getContent());

Toast.makeText(context, result, Toast.LENGTH_SHORT).show();

}

public static String convertStreamToString(InputStream inputStream) throws IOException
{
if (inputStream != null)
{
    Writer writer = new StringWriter();

    char[] buffer = new char[1024];
    try
    {
        Reader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"),1024);
        int n;
        while ((n = reader.read(buffer)) != -1)
        {
            writer.write(buffer, 0, n);
        }
    }
    finally
    {
        inputStream.close();
    }
    return writer.toString();
}
else
{
    return "";
} 
```

} }

这是我的全部代码，但是上传消息功能不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:59:02.567

原来我不允许在主线程上执行网络操作。它给了我一个 NetworkOnMainThreadException。我必须为此使用 IntentService/AsyncTasks/Handler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:23:48.013

这是与 WCF Restful 服务通信的示例代码，客户端代码必须是这样的

```
String uri = "http://youraddress:youport/" + serviceUri + "/"  + methodName;        
HttpPost request = new HttpPost(uri);
request.setHeader("Accept", "application/json");
request.setHeader("Content-type", "application/json");  
JSONStringer requestMsg = new JSONStringer(); //you must fill data to this object

StringEntity msg = new StringEntity(requestMsg.toString());
msg.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
msg.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));

request.setEntity(msg);
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpResponse response = httpClient.execute(request); 
```

如果您使用 wcf 服务作为您的应用程序服务器，这是一个示例代码

```
 [ServiceContract(Namespace = "http://schema.abc.com/2012/01/MyServices")]
public interface IMyServices{
    [OperationContract]
     [WebInvoke(Method = "POST",
               UriTemplate = "SubmitData",
                BodyStyle = WebMessageBodyStyle.WrappedRequest,
                ResponseFormat = WebMessageFormat.Json,
                RequestFormat = WebMessageFormat.Json)]
            IList<CustomeClass> SubmitData(CustomeClass message);
} 
```

您必须实现自定义类以及服务方法主体，
这是配置文件 this ，尽管您必须满足细节，但主要模式是 this

```
 <service name="MyServices">
            <endpoint address="" behaviorConfiguration="httpBehavior" binding="webHttpBinding"
              contract="IMyServices" />
          </service>

    <endpointBehaviors>
            <behavior name="httpBehavior">
              <webHttp/>
            </behavior>
          </endpointBehaviors> 
```

# javascript - javascript流程说明

> ID：12702137
> 
> 赞同：1
> 
> 时间：2012-10-03T04:56:22.527
> 
> 标签：javascript, jquery

我在一些页面源中找到了这个 js。实际上这个 java 脚本是做什么的？

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20823326-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T04:58:34.207

它是 Google Analytics 跟踪器脚本。[您可以在此处](http://www.google.com/analytics/)了解更多信息。

# heroku - Heroku 在每次部署时自动将 RAILS_ENV 和 RACK_ENV 变量更改为“生产”

> ID：12702140
> 
> 赞同：7
> 
> 时间：2012-10-03T04:56:45.390
> 
> 标签：heroku

每次我将新版本推送到我的 staging heroku 应用程序时，RACK_ENV 和 RAILS_ENV 变量都会更改为“production”，而不是“staging”，这是我手动分配的值。这开始发生在几个小时前。每次部署时，heroku 站点上的活动页面上都会记录这样的一行：v741 app_owner@gmail.com：添加 RAILS_ENV、RACK_ENV、PATH、LANG、GEM_PATH 配置 6 分钟前

我应该和heroku支持谈谈，但似乎现在唯一可以提问的地方就是这里，他们删除了网站支持......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T11:06:12.920

同样在这里。幸运的是，回滚后不会发生这种情况。

幸运的是，生产部署不会将变量设置为 staging ！

编辑：

Heroku 在一张票上回答：嗨，看起来像我们这边的一个错误。我正在通知我们的 ruby​​ 团队

编辑2：

他们说这个错误昨天已经修复了，是的，是的。但是……这个bug现在又发生了……</p>

# hibernate - Hibernate 注释中“inverse”的等效关键字是什么？

> ID：12702141
> 
> 赞同：0
> 
> 时间：2012-10-03T04:56:56.277
> 
> 标签：hibernate

> **可能重复：**
> [JPA 注释中的 inverse=true](https://stackoverflow.com/questions/4865285/inverse-true-in-jpa-annotations)

谁能告诉我 Hibernate 注释中“inverse”的等效关键字是什么。

# java - Java servlet 表单和数据库

> ID：12702142
> 
> 赞同：0
> 
> 时间：2012-10-03T04:56:57.783
> 
> 标签：java, sql, database, servlets

大家好，当我运行包含表单的 servlet 并单击提交时，我收到以下错误，我在代码中找不到错误，但显然有一个错误，否则当我单击提交时，不应出现以下错误。

sql应该是当user_id存在时你可以创建一个'lab'

```
The server encountered an internal error () that prevented it from fulfilling this request.

exception 

java.lang.NumberFormatException: null
    java.lang.Integer.parseInt(Unknown Source)
    java.lang.Integer.parseInt(Unknown Source)
    CreateLab.doPost(CreateLab.java:72)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

import java.io.IOException;

import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class CreateLab
 */
@WebServlet("/CreateLab")
public class CreateLab extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public CreateLab() {
        super();
        // TODO Auto-generated constructor stub
    }
     int id;
     int capacity; 
     String day = ""; 
     String time = ""; 
     String room = ""; 
     int subject_id;
     int user_id;

    public void init() {
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con =
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("JDBC driver loaded"); 
      } 
      catch (ClassNotFoundException e) {
        System.out.println(e.toString()); 
      } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    } 

    /**Process the HTTP Get request*/ 
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws 
  ServletException,IOException {  
      sendPageHeader(response); 
      sendRegistrationForm(request, response, false); 
      sendPageFooter(response); 
    } 

    /**Process the HTTP Post request*/ 
    public void doPost(HttpServletRequest request, 
      HttpServletResponse response) 
      throws ServletException, IOException {
      sendPageHeader(response); 

      capacity = Integer.parseInt(request.getParameter("capacity"));
      id = Integer.parseInt(request.getParameter("id")); 
      day = request.getParameter("day"); 
      time = request.getParameter("time"); 
      room = request.getParameter("room"); 
      user_id = Integer.parseInt(request.getParameter("user_id")); 
      subject_id = Integer.parseInt(request.getParameter("subject_id")); 

      boolean error = false; 
      String message = null; 
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con = 
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("got connection"); 
        System.out.println(id);
        Statement s = con.createStatement(); 

        String sql = "SELECT id FROM user" + 
                " WHERE id='" + user_id + "'";  
        ResultSet rs = s.executeQuery(sql); 
        if (rs.next()) {
          rs.close(); 
           sql = "INSERT INTO lab" + 
                  " (capacity, day, time, room, subject_id, user_id)" + 
                  " VALUES" + 
                  " (" +  capacity + "','" + 
                     " '"  +  day + "'," + 
                     " '"  +  time + "'," + 
                     " '"  + room + "','" + subject_id + "','" + user_id + "')"; 

          System.out.println(sql);
          int i = s.executeUpdate(sql); 
          if (i==1) {
            message = "Successfully a new lab class."; 
          } 
        } 
          s.close(); 
          con.close(); 
        } 
        catch (SQLException e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        catch (Exception e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        if (message!=null) {
          PrintWriter out = response.getWriter(); 
          out.println("<B>" + message + "</B><BR>"); 
          out.println("<HR><BR>"); 
        } 
        if (error==true) 
          sendRegistrationForm(request, response, true); 
        else 
          sendRegistrationForm(request, response, false); 
        sendPageFooter(response); 
      } 

      /** 
       * Send the HTML page header, including the title 
       * and the <BODY> tag 
       */ 
      private void sendPageHeader(HttpServletResponse response) 
        throws ServletException, IOException {
        response.setContentType("text/html"); 
        PrintWriter out = response.getWriter(); 
        out.println("<HTML>"); 
        out.println("<HEAD>"); 
        out.println("<TITLE>Create Lab Page</TITLE>"); 
        out.println("</HEAD>"); 
        out.println("<BODY>"); 
        out.println("<CENTER>"); 
      } 

      /** 
       * Send the HTML page footer, i.e. the </BODY> 
       * and the </HTML> 
       */ 
      private void sendPageFooter(HttpServletResponse response) 
        throws ServletException, IOException {
        PrintWriter out = response.getWriter(); 
        out.println("</CENTER>"); 
        out.println("</BODY>"); 
        out.println("</HTML>"); 
      }   
      /**Send the form where the user can type in 
       * the details for a new user 
       */ 
      private void sendRegistrationForm(HttpServletRequest request, 
        HttpServletResponse response, boolean displayPreviousValues) 
        throws ServletException, IOException {

        PrintWriter out = response.getWriter(); 
        out.println("<BR><H2>Create A Lab</H2>"); 
        out.println("<BR>Please enter the lab details."); 
        out.println("<BR>"); 
        out.println("<BR><FORM METHOD=POST>"); 
        out.println("<TABLE>"); 
        out.println("<TR>"); 
        out.println("<TD>Class Capacity</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=capacity"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + capacity + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Day</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=day"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + day + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Time</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=time"); 

        if (displayPreviousValues) 
          out.print(" VALUE=\"" + time + "\""); 

        out.println("></TD>"); 
        out.println("</TR>"); 
        out.println("<TR>"); 
        out.println("<TD>Room</TD>"); 
        out.print("<TD><INPUT TYPE=TEXT Name=room");
        if (displayPreviousValues) 
            out.print(" VALUE=\"" + room + "\"");
        out.println("></TD>");
        out.println("</TR>");
        out.println("<TR>");
        out.println("<TD>subject_id</TD>");
        out.print("<TD><INPUT TYPE=TEXT Name=subject_id");
        if (displayPreviousValues) 
            out.print(" VALUE=\"" + subject_id + "\"");
        out.println("></TD>");
        out.println("</TR>");
        out.println("<TR>");
        out.println("<TD>user_id</TD>");
        out.print("<TD><INPUT TYPE=TEXT Name=user_id");
        out.println("></TD>");
        out.println("</TR>");

        if (displayPreviousValues) 
        out.print(" VALUE=\"" + user_id + "\""); 
        out.println("</TD>"); 
        out.println("</TR>");

        out.println("<TR>"); 
        out.println("<TD><INPUT TYPE=RESET></TD>"); 
        out.println("<TD><INPUT TYPE=SUBMIT></TD>"); 
        out.println("</TR>"); 
        out.println("</TABLE>"); 
        out.println("</FORM>"); 
        out.println("<BR>"); 
        out.println("<BR>"); 
      }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:05:22.040

`NumberFormatException`当您将 NULL 或空字符串传递给`Integer.parseInt()`

检查您是否`capacity`在表单数据中传递参数。

改变

```
capacity = Integer.parseInt(request.getParameter("capacity"));

id = Integer.parseInt(request.getParameter("id")); 
```

到

```
String str = request.getParameter("capacity");
if(str!=null && str.length > 0){
   capacity = Integer.parseInt(str);
}
str = request.getParameter("id");
if(str!=null && str.length > 0){
   id = Integer.parseInt(str);
}
str = request.getParameter("user_id");
if(str!=null && str.length > 0){
   user_id = Integer.parseInt(str);
}
str = request.getParameter("subject_id");
if(str!=null && str.length > 0){
   subject_id = Integer.parseInt(str);
} 
```

如果你想避免每次都检查。您可以创建一个在没有数据时返回 -1 或 0 的方法。

```
public int getIntParameter(String strParamval){
    int nRetVal=0;
    try{
            nRetVal=Integer.parseInt(strParamVal);
        }catch(NumberFormatException nfe){
            return 0;
        }
        return nRetVal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:06:00.877

您传递给的参数之一`parseInt()`不是有效数字。因此例外。我认为您没有初始化`id`，`capacity`或者没有`userid`使用有效的 int。`String.isEmpty()`在尝试解析它之前进行检查。

```
 String id =request.getParameter("id");
       try {
    if(!id.isEmpty()) {
      Integer.parseInt(id);
     }
         }
       catch(NFE ex) {
         ex.printStrackTrace();
      } 
```

另外，请记住`request.getParameter("")`返回 String 对象，当它找不到给定参数时，它返回 null ，这是字符串的默认值。

```
 String id= request.getParameter("id")
    try {
    if(!id.isEmpty() && id!=null) {
      Integer.parseInt();
     }
         }
       catch(NFE ex) {
         ex.printStrackTrace();
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:07:37.107

这是因为当您使用`Integer.parseInt`. 它期望其中有一个`String`值，但不是`null`.

但是当你尝试它时

```
user_id = Integer.parseInt(request.getParameter("user_id")); 
```

确保

```
request.getParameter("user_id") 
```

不回来了 `null`。如果它正在返回`null`，则`user_id`必须在对象中不可用，`request`因为它是从网页上的表单中发送的空白。`user_id`提交表单时检查它不为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T05:34:29.303

每次将字符串解析为 int 时都使用此函数。getIntParameter 当参数包含字母或 null 时返回 0，否则返回 int 值。

```
public int getIntParameter(String strParamval){

        int nRetVal=0;
        if((strParamval != null) && (!strParamval.matches("\\d*")))
            return nRetVal;
        try{
            nRetVal = Integer.parseInt(strParamval);
        }catch(NumberFormatException nfe){
        }
        return nRetVal;
    } 
```

在 doPost 函数中，

```
capacity = getIntParameter(request.getParameter("capacity"));
id = getIntParameter(request.getParameter("id")); 
user_id = getIntParameter(request.getParameter("user_id")); 
subject_id = getIntParameter(request.getParameter("subject_id")); 
```

代替

```
capacity = Integer.parseInt(request.getParameter("capacity"));
id = Integer.parseInt(request.getParameter("id")); 
user_id = Integer.parseInt(request.getParameter("user_id")); 
subject_id = Integer.parseInt(request.getParameter("subject_id")); 
```

# python - mysql for python 2\. 7 说没有找到 Python v2.7

> ID：12702146
> 
> 赞同：12
> 
> 时间：2012-10-03T04:57:43.180
> 
> 标签：python, mysql, python-2.7, mysql-connector-python

我已经从 MySQL 站点下载了 mysql-connector-python-1.0.7-py2.7.msi 并尝试安装，但它给出了错误

**未找到 Python v2.7。我们仅支持来自 python.org 的 Microsoft Windows Installer(MSI)。**

我在带有 MySQL essential5.1.66 的 Windows XP SP3 上使用 Official Python v 2.7.3

需要帮忙 ？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T07:41:06.750

我在 Windows 7 下安装`mysql-connector-python-1.0.7-py2.7.msi`和`mysql-connector-python-1.0.7-py3.2.msi`.

安装Python for windows时从`"Install only for yourself"`改为到后，问题消失，安装成功。`"Install for all users"``"python 3.2 not found"``mysql-connector-python-1.0.7-py3.2.msi`

我想问题是mysql连接器安装程序只寻找`HKEY_LOCAL_MACHINE`条目，它寻找的东西可能在`HKEY_CURRENT_USER`等之下。所以直接更改reg表的解决方案也有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-06T06:33:23.423

我为这个问题得到的解决方案是

我发现将 Python 添加到注册表，适用于 python v 2.0 及更高版本的脚本如下：注册 Python 解释器

```
#
# script to register Python 2.0 or later for use with win32all 
# and other extensions that require Python registry settings
#
# written by Joakim Low for Secret Labs AB / PythonWare
#
# source:
# http://www.pythonware.com/products/works/articles/regpy20.htm

import sys
from _winreg import *

# tweak as necessary

version = sys.version[:3]
installpath = sys.prefix
regpath = "SOFTWARE\\Python\\Pythoncore\\%s\\" % (version)
installkey = "InstallPath"
pythonkey = "PythonPath"
pythonpath = "%s;%s\\Lib\\;%s\\DLLs\\" % (
    installpath, installpath, installpath)

def RegisterPy():
    try:
        reg = OpenKey(HKEY_LOCAL_MACHINE, regpath)
    except EnvironmentError:
        try:
            reg = CreateKey(HKEY_LOCAL_MACHINE, regpath)
            SetValue(reg, installkey, REG_SZ, installpath)
            SetValue(reg, pythonkey, REG_SZ, pythonpath)
            CloseKey(reg)
        except:
            print "*** Unable to register!"
            return
        print "--- Python", version, "is now registered!"
        return

    if (QueryValue(reg, installkey) == installpath and
            QueryValue(reg, pythonkey) == pythonpath):
        CloseKey(reg)
        print "=== Python", version, "is already registered!"
        return

    CloseKey(reg)
    print "*** Unable to register!"
    print "*** You probably have another Python installation!"

if __name__ == "__main__":
    RegisterPy() 
```

以任何名称保存它。从 python 解释器运行它，就是这样！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-30T19:07:15.453

这个问题主要来自 64 位窗口。在此链接[http://www.codegood.com/archives/129](http://www.codegood.com/archives/129)下载 MySQL for python 64并下载 **MySQL-python-1.2.3.win-amd64-py2.7.exe (1.0 MiB)** 这将安装 MySQL Python。

**Windows 10（64 位）：**
确实，我遇到了类似的问题，无法为 MySQL 安装 python 2.7 连接器。

在此之前，我已经安装`Python 2.7.15`了[`Windows x86-64 MSI installer`](https://www.python.org/ftp/python/2.7.15/python-2.7.15.amd64.msi)，
这是在我`Python 3`安装在我的机器上时。

[`Windows x86 MSI installer`](https://www.python.org/ftp/python/2.7.15/python-2.7.15.msi)成功了，我安装了它来*覆盖*以前版本的 Python 2.7.15，然后安装了连接器（这次它没有给出错误消息） 。

然后重新检查 MySQL 安装程序中的状态，瞧：
[![已识别 Python27 连接器](../Images/d1a5157e4b5054a4130c9ba7845020ac.png)](https://i.stack.imgur.com/HKpQH.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-24T22:28:30.870

如果您仍然在使用`x64`其他 python 模块或其他 python 模块时遇到此问题，我建议您使用此网站[Python Extensions for x64/x32](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-09T08:12:22.670

我遇到了这个问题，因为我只在[SPSS](http://www.spss-tutorials.com/spss-what-is-it/)中使用 Python 。我通过手动添加两个注册表项解决了这个问题：

`HKEY_LOCAL_MACHINE\SOFTWARE\Python\PythonCore\2.7\InstallPath`

设置

`C:\Program Files\IBM\SPSS\Statistics\24\Python`

和

`HKEY_LOCAL_MACHINE\SOFTWARE\Python\PythonCore\2.7\PythonPath`

设置

`C:\Program Files\IBM\SPSS\Statistics\24\Python\Lib`

这很容易解决了我以前和现在的笔记本电脑上的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-21T15:03:45.303

您需要确保下载的版本具有正确的“位数”（32/64 位），与您的 Python 安装的“位数”相匹配！

我遇到了同样的问题（不过使用 Python 3.7.2）。

我已经安装了 Python 3.7.2 **32 位**，但意外下载了**64 位**版本的 MySQL Connector for Python 3.7。

当我尝试安装连接器时，我收到了相同的错误消息：

[![错误信息](../Images/4fbd82783e42b63e0b011e52c392cfcc.png)](https://i.stack.imgur.com/EjnmC.png)

解决方案：我只是下载了 32 位版本，一切正常（安装连接器并实际连接到数据库）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-16T13:47:44.023

就我而言，我仅为我的用户安装了 python 2.7.14 x64。我必须在我的注册表中查找这个：

```
HKEY_CURRENT_USER\Software\Python 
```

，导出它们，`.reg`使用文本编辑器打开导出的文件，将所有出现的地方`HKEY_CURRENT_USER`替换为`HKEY_LOCAL_MACHINE`，然后导入。

结果是：（记得把安装目录改成你的）

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\Software\Python]

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore]

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore\2.7]

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore\2.7\Help]

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore\2.7\Help\Main Python Documentation]
@="D:\\Desarrollo\\entornos\\python27_x64\\Doc\\python2714.chm"

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore\2.7\InstallPath]
@="D:\\Desarrollo\\entornos\\python27_x64\\"

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore\2.7\InstallPath\InstallGroup]
@="Python 2.7"

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore\2.7\Modules]

[HKEY_LOCAL_MACHINE\Software\Python\PythonCore\2.7\PythonPath]
@="D:\\Desarrollo\\entornos\\python27_x64\\Lib;D:\\Desarrollo\\entornos\\python27_x64\\DLLs;D:\\Desarrollo\\entornos\\python27_x64\\Lib\\lib-tk" 
```

之后的安装也很顺利。中提琴！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-27T12:45:04.160

我通过使用 32bit python 解决了这个问题

# iphone - ASIHTTPRequest - 我应该使用多个委托来确定异步请求的来源吗？

> ID：12702155
> 
> 赞同：1
> 
> 时间：2012-10-03T04:59:46.840
> 
> 标签：iphone, objective-c, ios, cocoa-touch, asihttprequest

这更像是一个设计问题。我有一个管理 UITableView 的 ViewController。用户可以在这个 tableview 中添加/编辑/删除项目。对此表视图的更改通过 Web 服务调用保存在我的后端数据库中。我正在使用 ASIHTTPRequest 来包装这些 Web 服务调用。ASIHTTPRequest 请求被赋予一个委托对象，该对象应该实现 -(void)requestFinished:request 和 -(void)requestFailed:request。

显然，我对 -(void)requestFinished:request 的实现会有所不同，具体取决于用户是删除记录还是刷新 tableview。这通常是如何处理的？我应该为不同类型的请求实现一个唯一的委托，在视图控制器中设置“状态”标志以指示哪个请求正在进行中或其他什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:09:17.653

您应该遵循 ASIHTTPRequest 的文档

在委托方法中处理多个请求的成功和失败

[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:13:51.363

**你应该给予你提出`tag`的每一个要求。**

```
- (void)requestFinished:(ASIHTTPRequest *)request
{

    //Here you can differentiate each request using request.tag for individual request success

}

- (void)requestFailed:(ASIHTTPRequest *)request
{
    //Here you can differentiate each request using request.tag for individual request error
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:31:03.080

试试下面的代码...

```
- (void)requestFinished:(ASIHTTPRequest *)request
{

     if (request.tag == 1) { // 1 just an example
         /// do something here
     }
     else if (request.tag == 2) {
         /// do something here
     }
}

 - (void)requestFailed:(ASIHTTPRequest *)request
{

     if (request.tag == 1) { // 1 just an example
         /// do something here
     }
     else if (request.tag == 2) {
         /// do something here
     }
} 
```

我希望这可以帮助你...

:)

# jquery - 发送到 TouchDB 时，iOS 6 UIWebView 中的 jquery 丢失 POST 请求正文

> ID：12702157
> 
> 赞同：1
> 
> 时间：2012-10-03T05:00:05.560
> 
> 标签：jquery, ajax, ios6, touchdb

我有一个使用 TouchDB 升级的旧版应用程序。该应用程序使用一个 UIWebView，其中包含一个 javascript 页面，该页面通过 touchdb:// 读取和写入应用程序的 TouchDB 数据库，并通过查询 $.ajax(...) 调用发布请求。

获取请求返回正常并加载带有数据的网页。但是 Post 请求不起作用。当 TouchDB 收到请求时，它似乎没有收到任何 HTTP 请求正文。尽管在 ajax 调用中指定了一个。这是我来自 javescript 的 ajax 调用：

```
$.ajax({url:"touchdb:///rfsavedproposals/proposalSession", data: '{"_id":"proposal"}', type:'POST',success: function(){alert("success :-)");},error: function(){alert("fail :-(");}}); 
```

touchdb 肯定是通过它获取请求和调试的，请求 HTTPBody (NSData*) 和请求 HTTPBodyStream (NSInputStream*) 都是 nil。

我已经在这方面工作了两天，并请来了我的 jquery 和 javascript 专家，他们和我一样困惑。希望这里有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T03:06:24.413

一段时间后，我发现这是由于 UIWebView 不发布正文内容造成的，除非使用 HTTP 或 HTTPS 方案。

# image - 将图像添加到地图并在地图上正确缩放

> ID：12702159
> 
> 赞同：-1
> 
> 时间：2012-10-03T05:00:50.837
> 
> 标签：image, blackberry, gps, blackberry-os5

我想要做什么...如果用户未
指定位置，则访问黑莓地图并在用户指定的位置添加图像，然后找到客户的当前位置并将图像添加到这些坐标...

如果您查看以下链接，我希望地图视图完全相同... [如何在 BlackBerry Map 中显示我们自己的图标？](https://stackoverflow.com/questions/1524428/how-to-show-our-own-icon-in-blackberry-map)

现在我不担心获取用户提供的地址的坐标并将图像添加到这些坐标中，目前如果我可以让“找到我的位置”功能在正确的坐标添加图像时正常工作我会很高兴。

我的代码目前正在做的是添加两张地图......一张地图看起来像以下链接中的一张： [如何在 BlackBerry Map 中显示我们自己的图标？](https://stackoverflow.com/questions/1524428/how-to-show-our-own-icon-in-blackberry-map)

但是没有图像，然后当您单击返回时，会出现另一张地图，该地图已缩小到一个正在查看国家的地图，并弹出图标。

我的代码（主屏幕）

```
lat = qualifiedCoordinates.getLatitude();
lng = qualifiedCoordinates.getLongitude();
latString = Double.toString(lat);
lngstring = Double.toString(lng);
String Test2=".";
String Test3="";
FinalSringLatetude =replace(latString,Test2,Test3);
FinalSringLongdetude =replace(lngstring,Test2,Test3);
intLat = Integer.valueOf(FinalSringLatetude).intValue();
iintLng = Integer.valueOf(FinalSringLongdetude).intValue();
mCoordinates = new Coordinates(doublelat, doublelon, 0);
mMapField = new CustomMapField();
mMapField.mIcon = Bitmap.getBitmapResource("coin_silver.png");
mMapField.moveTo(mCoordinates);
MapView mapView = new MapView();
mapView.setLatitude(intLat);
mapView.setLongitude(iintLng);
mapView.setZoom(10);
Invoke.invokeApplication(Invoke.APP_TYPE_MAPS, new MapsArguments(mapView));
add(mMapField); 
```

（自定义 MapField 类）

```
Bitmap mIcon;
XYRect mDest;

public void moveTo(Coordinates coordinates) {
    super.moveTo(coordinates);
    mDest = null;
}

protected void paint(Graphics graphics) {
    super.paint(graphics);
    if (null != mIcon) {
        if (null == mDest) {
            XYPoint fieldOut = new XYPoint();
            convertWorldToField(getCoordinates(), fieldOut);
            int imgW = mIcon.getWidth();
            int imgH = mIcon.getHeight();
            mDest = new XYRect(fieldOut.x - imgW / 2,
            fieldOut.y - imgH, imgW, imgH);
        }
        graphics.drawBitmap(mDest, mIcon, 0, 0);
    }
} 
```

谢谢你们！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:21:03.860

以下代码将执行缩放功能。

```
mMapField.setZoom(3); 
```

# eclipse-rcp - 如何创建在 Eclipse 中使用的 RCP 插件？

> ID：12702164
> 
> 赞同：0
> 
> 时间：2012-10-03T05:01:27.307
> 
> 标签：eclipse-rcp, rcp

这个问题似乎是一个不成熟的问题，但长期以来我没有找到任何令人满意的解决方案。

我想提供我的 RCP 应用程序的插件。[我可以在这里](http://cyberpen.wordpress.com/2008/06/16/convertion-of-a-plugin-to-a-standalone-rcp-application/)创建一个作为独立应用程序工作的插件， 但仍然很难找到如何创建一个 RCP 插件，其他开发人员可以在其中添加自己的 Eclipse 并开始使用它。

任何参考表示赞赏。

问候，曼达尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:53:27.613

[http://www.vogella.com/articles/EclipsePlugIn/article.html](http://www.vogella.com/articles/EclipsePlugIn/article.html) 希望这会有所帮助。

# django - 如何在管理员中验证通用内联

> ID：12702165
> 
> 赞同：1
> 
> 时间：2012-10-03T05:01:31.187
> 
> 标签：django, django-admin

我尝试在这个答案之后验证 generic.GenericTabularInline：

[在保存模型之前验证内联](https://stackoverflow.com/questions/9215747/validate-inlines-before-saving-model)：

我哪里错了？

```
class DesignedPhotoInlineForm(forms.models.ModelForm):
    class Meta:
         model = DesignedPhoto
         fields = ( 'imagefile', )
         widgets = { 'imagefile': DesignedPhotoImageFieldWidget
                     }

class ArtistAdminDesignedPhotoInlineFormSet(generic.BaseGenericInlineFormSet):
    def clean(self):
        print "heh!" #should print into devserver but does not!
        pass
class DesignedPhotoInline(generic.GenericTabularInline):
    model = DesignedPhoto
    ct_field = 'illustrated_content_type'
    ct_fk_field = 'illustrated_object_id'
    form = DesignedPhotoInlineForm
    formset = ArtistAdminDesignedPhotoInlineFormSet

class ArtistAdmin(admin.ModelAdmin):

    fieldsets = ( 
        (
            _('Main info'), {
                'fields': ( ('name', 'full_name', ), ('on_top', 'show_in_menu', ), 'music_style_text', )
                },
            ),
        (
            _('Profile and history texts'), {
                'fields': ( 'profile_text', 'history_text',),
                },
            )
        )

    formfield_overrides = {
        TextField: { 'widget': tinymce_widgets.AdminTinyMCE(attrs={'cols': 120, 'rows': 25}) },
    }

    inlines = [ DesignedPhotoInline, ArtistPublicationsInline, ArtistAudioInline, ArtistVideosInline ]

    actions = ['create_cms_page']

    def create_cms_page(self, request, queryset):
        #omitted
        pass

    create_cms_page.short_description = _("Create pages for the selected artists") 
```

我已经以与验证内联的第一个答案相同的方式使用它们。我只是将formset的基类更改为generic.BaseGenericInlineFormSet。

# c# - 页面打印时的文本/字体缩放

> ID：12702167
> 
> 赞同：0
> 
> 时间：2012-10-03T05:01:37.797
> 
> 标签：c#, scale

我想在打印时缩放标签/文本。

以下是我正在使用的示例代码：

```
Graphics g = new Graphics();

g.ScaleTransform(1,2); //scale 200% at Y direction

g.DrawString(myText, myFont, myBrush, pointX, pointY); // pointX = 10; pointY = 5 
```

文本在 Y 方向缩放到 200%，但文本的位置/点/坐标也在缩放。

我希望在不更改 pointX 和 PointY 的情况下缩放文本。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:13:58.843

请试试：

```
g.TranslateTransform(pointX, pointY);
g.ScaleTransform(1, 2);
g.TranslateTransform(-pointX, -pointY);

g.DrawString(myText, myFont, myBrush, pointX, pointY); 
```

# twitter-bootstrap - 将href添加到btn-toolbar中的一个按钮并保持对齐

> ID：12702168
> 
> 赞同：15
> 
> 时间：2012-10-03T05:01:42.343
> 
> 标签：twitter-bootstrap

我想在下面的代码中为“联系销售”按钮添加一个 href。如果我将按钮包装在锚标记中，则按钮向下移动，与另一个按钮不对齐（它向下滑动 8px）。我一直在查看 Firebug 控制台，但不知道如何解决这个问题。

```
 <div id="headerbtn" class="span6">
            <div class="btn-toolbar pull-right">
                <div class="btn-group">
                    <button class="btn btn-primary dropdown-toggle">
                        Contact Sales
                    </button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                    <i class="icon-user icon-white"></i>
                    Sign In
                    <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#">Profile</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">Sign Out</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div> 
```

我是 Bootstrap 的新手，不胜感激。谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-03T15:56:08.420

在 Bootstrap 中，具有“btn”类的锚点的样式与按钮的样式相同。因此，您实际上可以将“联系销售”按钮更改为锚点，同时保留按钮样式。

未经测试（因为 jsFiddles 似乎没有引发您遇到的问题）：

```
 <div id="headerbtn" class="span6">
        <div class="btn-toolbar pull-right">
            <div class="btn-group">
                <a href="#" class="btn btn-primary">
                    Contact Sales
                </a>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                <i class="icon-user icon-white"></i>
                Sign In
                <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a href="#">Profile</a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">Sign Out</a>
                    </li>
                </ul>
            </div>
        </div>
    </div> 
```

我还`dropdown-toggle`从锚点中删除了该类，因为我猜您不希望它既是链接又是下拉切换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:38:42.287

你可以[检查这个小提琴](http://jsfiddle.net/rishikalia/779h3/1/)

它只是在锚标签中包装按钮..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T18:44:26.780

保留您的代码，并使用`<p>`而不是包装`<div>`：

```
<p class="text-center">
    <a href="office/" class="btn btn-success">Get Started...</a>
</p> 
```

# jquery - 如何防止 DIV 在鼠标悬停时跳转？

> ID：12702172
> 
> 赞同：2
> 
> 时间：2012-10-03T05:02:18.367
> 
> 标签：jquery, onmouseover, slidedown, slideup, onmouseout

这个小片段的目标是（默认情况下）显示图像数据，然后通过“slideDown”onMouseOver 将其删除。它主要工作，但是当你将鼠标悬停在文本上显示信息时，div会像疯狂一样上下跳跃。感谢您提供任何解决此问题的帮助！

演示：http: [//jsfiddle.net/voudini/SggsV/](http://jsfiddle.net/voudini/SggsV/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T05:08:47.520

尝试使用`onmouseenter`和`onmouseleave`

尝试这个

```
$('.hoverbox')
    .mouseenter(function(){
        $(".hoverinfo", this).stop(true, true).slideUp(400);
    })
    .mouseleave(function(e){

        $(".hoverinfo", this).stop(true, true).slideDown(400);
    }); 
```

[更新小提琴](http://jsfiddle.net/SggsV/3/)

检查其文档

[鼠标进入](http://api.jquery.com/mouseenter/)和 [鼠标离开](http://api.jquery.com/mouseleave/)

> mouseenter 事件在处理事件冒泡的方式上与 mouseover 不同。如果在这个例子中使用了 mouseover，那么当鼠标指针移动到 Inner 元素上时，将触发处理程序。这通常是不受欢迎的行为。另一方面，mouseenter 事件仅在鼠标进入它所绑定的元素而不是后代元素时触发其处理程序。所以在这个例子中，当鼠标进入 Outer 元素而不是 Inner 元素时，会触发处理程序。

# regex - 可被 4 整除的位串的正则表达式

> ID：12702175
> 
> 赞同：-3
> 
> 时间：2012-10-03T05:02:56.860
> 
> 标签：regex, math, binary, bitstring

我是正则表达式的新手。

在我的一个作业问题中，我被要求编写以下正则表达式。

```
The set of all bit strings (i.e. strings over alphabet {0,1}) that are divisible by 4. 
```

现在，我不知道我应该如何开始实现解决方案。如何找到可被4整除的位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T05:19:36.580

```
/^(1[01]*00|0)$/ 
```

一个 1 后跟任意数量的 1 和/或 0，以两个零结尾，或者只是一个零。

**编辑：**如果您不介意前导零，这也可以：

```
/^(?:[01]*0)?0$/ 
```

# jquery - 如何向上移动找到元素？

> ID：12702177
> 
> 赞同：1
> 
> 时间：2012-10-03T05:03:20.783
> 
> 标签：jquery

```
<form method='post'>
<input type='text' name='A'>
<input type='text' name='B' readonly>
<input type='text' name='C' class='CCC'>
<select name='D'><option value=''>Select</option></select>
<input type='text' name='E' class='first'>
<input type='text' name='F' class='first'>
<button type='submit' name='BTN'>click</button>
</form> 
```

如何使用 jquery 查找上面的不同元素？到目前为止，我只知道 .prev() 但有时当我使用很多 .prev() 爬上去时，它会返回给我 NULL/object。

有什么好的学习方法吗？！

对不起，让我更详细地说明我想在这里学习的内容。

1）。我从 A 获得价值的方式，当点击按钮 $(this).prev().prev().prev().prev().prev().prev().val() 应该有更好的方式正确！

2）。如何找到前一个只读元素？

3）。如何从具有“CCC”类的先前元素中查找或获取值？

4）。如何找到或获得具有相同“第一”类的不同值？我知道有类似 :first 或 second 但我不断收到错误代码，当我写类似 $("input[class='first']:first").val() / $("input[class='第一个']:第二个").val()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:45:20.853

有很多方法可以找到一个元素 ( `.siblings()`, `.find()`, `.children()`, `.prev()`, `.next()`, ...)

例如下面的代码返回元素的 CCC 类与 $('input.A') 处于同一级别

```
$('input.A').siblings('CCC'); 
```

看看这个链接可能会有所帮助： [http ://api.jquery.com/category/traversing/tree-traversal/](http://api.jquery.com/category/traversing/tree-traversal/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:12:53.680

您可以转到`form`元素，并在其中找到任何字段，例如：

```
$(function(){

  $('button').click(function(){

    var c = $(this).closest('form').find('[name=C]');
    alert(c.val());

  });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T05:21:31.693

如果您的目标是查找表单元素，请试试这个

```
$(document).ready(function(){
    $("#someform").find(':input').each(function() {
       alert($(this).attr('name'));

     });
 }); 
```

工作**[演示](http://jsfiddle.net/NPNRh/)**

# c++ - xterm：无法执行vp：没有文件或目录

> ID：12702182
> 
> 赞同：0
> 
> 时间：2012-10-03T05:03:52.763
> 
> 标签：c++, c, linux, unix, xterm

我正在linux中编写一个C程序。

我创建了一个进程并将其分叉以创建一个孩子。我想在这个孩子身上运行另一个程序，所以我正在使用`execlp`. 但是，这个程序必须在一个独立的窗口中运行。

```
if ( (execlp("xterm","xterm","-e","./Child1", "127.0.0.1", (char *) 0)) < 0)  {
  printf("Failed to Start the Echo Client. Exiting application.");
  return 1;
} 
```

`Child1.c`是一个简单的程序，它与我当前的文件位于同一目录中。

执行时，代码运行良好，xterm 窗口出现，但出现错误 `"xterm: Can't execvp: No file or directory"`

你能建议我一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:25:05.410

您的系统可能没有`xterm`安装（或用户有错误`PATH`）。您可以测试`/usr/bin/xterm`（例如`access`系统调用）的存在，或使用其他东西。例如，许多 Debian 或 Ubuntu 发行版都有一个`x-terminal-emulator`（通常是指向某些精确程序的符号链接），您可以使用它来代替`xterm`.

如果`xterm`启动，那么你的程序`./Child1`不存在，你应该`access`在之前测试它的存在（用 ）。如果你只有一个源代码`./Child1.c`，你应该在之前编译过它（也许通过运行一个`system("gcc -Wall Child1.c -o Child1")`before 并测试它是否已成功编译，即`system`返回 0 并且`Child1`文件存在且可执行的测试）。

您应该花时间阅读[xterm(1)](http://linux.die.net/man/1/xterm)手册页。

# bash - bash shell脚本中的浮点数

> ID：12702185
> 
> 赞同：1
> 
> 时间：2012-10-03T05:04:35.687
> 
> 标签：bash, floating-point

> **可能重复：**
> [脚本和浮点中的除法](https://stackoverflow.com/questions/12147040/division-in-script-and-floating-point)

```
Mismatch  Percentage: $((( 100 * $TEST2 ) / $TEST1)) 
```

我正在尝试从上面的代码中获取浮点数。我正在使用 bash shell 脚本。但是上面的代码没有给我浮点数。我猜bash不支持浮点数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:45:28.777

从 VaughnCato 处无耻地偷窃：

```
echo "Mismatch Percentage: $(echo "100*$TEST2/$TEST1" | bc -l)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:21:34.457

我已经定义了一个函数`~./bashrc`

```
function bashCalc ()
{
    bc <<< "scale=6;$1";
} 
```

现在您可以随时在您的（子）shell 中使用：

```
Mismatch Percentage: $(bashCalc (100*$TEST2)/$TEST1 ) 
```

另请参阅：[https ://unix.stackexchange.com/questions/40786/how-can-i-do-command-line-integer-float-calculations-in-bash-or-any-language](https://unix.stackexchange.com/questions/40786/how-can-i-do-command-line-integer-float-calculations-in-bash-or-any-language)

# c - 未定义的引用

> ID：12702187
> 
> 赞同：20
> 
> 时间：2012-10-03T05:04:44.127
> 
> 标签：c, gcc, header-files

我有这个简单的测试文件：

```
#include "stack.h"

int main()
{
  Stack* stck = init_stack();

  return 0;
} 
```

并`stack.h`定义如下：

```
#ifndef STACK_H
#define STACK_H

#define EMPTY_STACK -1
typedef struct stack
{
  char ch;
  struct stack* prev;
} Stack;

extern Stack* init_stack();

extern char pop(Stack*);

extern void push(Stack*, char);

#endif 
```

这两个文件在同一个目录中。但是当我`gcc ..`构建它时，我不断收到以下错误：

```
$ ls
stack.c  stack.h  teststack.c
$ gcc -o testit teststack.c 
/tmp/ccdUD3B7.o: In function `main':
teststack.c:(.text+0xe): undefined reference to `init_stack'
collect2: ld returned 1 exit status 
```

谁能告诉我我在这里做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-03T05:06:28.893

```
 gcc -o testit teststack.c stack.c 
```

您需要编译两个 C 源文件并链接目标文件；这一切都在一个命令中完成。

# jquery - 为什么 jquery 在某些情况下在 visualforce 中不起作用

> ID：12702188
> 
> 赞同：-1
> 
> 时间：2012-10-03T05:04:57.537
> 
> 标签：jquery, visualforce

大家好，我有一个 jquery 简单警报，它在我的机器上的浏览器中运行良好，但奇怪的是，当我在其他机器上时它很简单，甚至没有给我警报（''）；所以你能帮忙吗？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
'<script>
var previousOnload = window.onload;
window.onload = function (){
    if(previousOnLoad) previousOnload();
}
$.ajax();       
$j = jQuery.noConflict();
$j(document).ready(function() { 
alert(''); 
```

}); '

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:08:09.223

嗨，所有使用 Http 的 Insted，你可以使用 Https，它会工作..

# vba - 使用VBA在Excel中图表数据源的变量

> ID：12702191
> 
> 赞同：1
> 
> 时间：2012-10-03T05:05:03.317
> 
> 标签：vba, excel

我正在使用 Excel 2007 VBA 在同一数据表中创建 ScatterSmoothNoMarkers 类型图表。我的源数据取决于打开的许多文本文件。Xvalue 在位置 A2: A200 是固定的。Series 值的列 ID 将被更改。

如果我打开 2个文件，我的源数据将是： `Range(A2:A200, F2:G200)`. 要打开 3 个文件，我的源数据将是： `Range(A2:A200, H2:J200)` 等等……所以我需要用变量替换那些列 ID。但是在设置数据源时出现错误。这是我的代码：

```
Sub addChart()
Dim n as integer ‘files count and also the number of columns for chart1 
Dim intColStart, intColStop as integer  ‘number of columns for chart 1
intColStart = n*2+2  ‘this is a formula to find the ID of the start column of chart1
intColStop = n*3+1  ‘this is a formula to find the ID of the stop column of chart1
…..
With ActiveSheet.ChartObjects.Add _
         (Left:=100, Width:=375, Top:=75, Height:=225)
        .Chart.SetSourceData Source:=Sheets("Sheet1").Range("A2:A200, intColStart:intColStop ")  ‘’’’’PROBLEM RIGHT HERE‘’’’’’’
        .Chart.ChartType = xlXYScatterSmoothNoMarkers
……..
End With
End Sub 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:39:54.400

您不能引用`"`标记内的变量。VBA 不知道要转换它们，因此它认为您正在设置一个`Range`包含文本，您实际上是在尝试使用该文本

```
A2:A200, intColStart:intColStop 
```

这对 VBA 没有任何意义。

为什么不换线

```
 .Chart.SetSourceData Source:=Sheets("Sheet1").Range("A2:A200, intColStart:intColStop ") 
```

至

```
 .Chart.SetSourceData Source:=Sheets("Sheet1").Range(Cells(2,2), Cells(200,intColStop)) 
```

* * *

如果我误解了您的兴趣，我会建议您手动创建`Range` `String`输入 - 使用类似以下内容：

```
dim rngStr as String
dim firstColStr as String
dim secondColStr as String
firstColStr = ColumnLetter(intColStart)
secondColStr = ColumnLetter(intColStop)
rngStr = "A2:A200," & firstColStr & ":2:" & secondColStr & "200"
...

.Chart.SetSourceData Source:=Sheets("Sheet1").Range(rngStr) 
```

[这个答案](https://stackoverflow.com/a/4695873/1048539)定义了`ColumnLetter`我在上面引用的函数（它从索引中获取字母）。

# sql - 调整我的 SQL 查询

> ID：12702195
> 
> 赞同：1
> 
> 时间：2012-10-03T05:05:22.600
> 
> 标签：sql, oracle, performance

嗨，我正在尝试即兴发挥我的查询以获得更好的性能。是否有任何其他方式来编写我的 SQL。问题如下。

```
SELECT DISTINCT A.name as name,
                A.gender as gender
FROM 
(
SELECT *  
 FROM Students S,
      Enrollment E,
      Group1 G,
      Ingroup I   
 WHERE S.sid = E.sid 
   AND S.sid = I.sid
   AND I.gid = G.gid 

)A,
(SELECT *
 FROM Students S,
      Enrollment E,
      Group1 G,
      Ingroup I   
 WHERE S.sid = E.sid 
   AND S.sid = I.sid
   AND I.gid = G.gid 
   AND S.name="Andrew Peers"
) B
WHERE A.dept = B.dept
  AND A.cid  = B.cid
  AND A.gid  = B.gid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:07:16.860

这两个子查询返回的行太多。我不知道你的表之间的结构和关系，所以我能做的就是减少第二次查询的行数。还使用 ANSI 连接语法：

```
SELECT S.name as name,
       S.gender as gender
FROM Students S
      JOIN Enrollment E ON S.sid = E.sid 
      JOIN Ingroup I on  S.sid = I.sid
      JOIN Group1 G on I.gid = G.gid
      JOIN 
         (SELECT dept, cid, gid
          FROM Students S
            JOIN Enrollment E ON S.sid = E.sid 
            JOIN Ingroup I on  S.sid = I.sid
            JOIN Group1 G on I.gid = G.gid
          WHERE S.name="Andrew Peers"
         GROUP BY dept, cid, gid
        ) B 
        ON S.dept = B.dept AND G.cid  = B.cid AND G.gid  = B.gid; 
```

子查询将返回 department、class_id 和 Andrew 的组，然后查询将获取具有相同规格的所有学生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:11:20.143

首先在 from 中构建子查询很糟糕，因为您丢失了索引，从而降低了性能。我不确定，但我认为不需要使用所有 4 个表，请检查我留下的这个查询是否符合您的目的：

```
 Select distinct S.name AS name, 
           S.gender AS gender
      from Students S,
           Group1 G,
           Ingroup I
     where 1=1
       AND S.sid   = I.sid
       AND I.gid   = G.gid
       and exists (select 'X'
                     from Students S1
                        , Ingroup I1
                    where 1=1
                      and S1.sid   = I1.sid
                      and I1.gid = I.gid
                      and S1.sid = S.sid) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:40:14.010

只是想法...

```
WITH (SELECT *
 FROM Students S,
      Enrollment E,
      Group1 G,
      Ingroup I   
 WHERE S.sid = E.sid 
   AND S.sid = I.sid
   AND I.gid = G.gid 
   AND S.name="Andrew Peers"
) Andrew
SELECT A.name as name,
                A.gender as gender

 FROM Students S,
      Enrollment E,
      Group1 G,
      Ingroup I   
 WHERE S.sid = E.sid 
   AND S.sid = I.sid
   AND I.gid = G.gid 

   AND g.gid = Andrew.gid
   AND e.cid = Andrew.cid
   AND s.dept = Andrew.dept; 
```

# list - DNN 通知 API

> ID：12702197
> 
> 赞同：0
> 
> 时间：2012-10-03T05:05:35.457
> 
> 标签：list, notifications, dotnetnuke-6

我正在使用 DNN 6.2 并尝试创建通知，但由于我是新手，所以不太了解 API。

文档建议如下

```
 NotificationsController.Instance.SendNotification(
  notification, 
  PortalSettings.PortalId,
  new List<RoleInfo>(), // Pass here the list of roles or null if the notification is going to be sent to individual users only.
  new List<UserInfo>(), // Pass here the list of users or null if the notification is going to be sent to roles only.
); // There is an overload that doesn't receive this parameter and uses Admin as sender. 
```

我有一个已经定义并填充了 userIds 的列表

```
private List<string> listOfFriends = new List<string>(); 
```

所以我虽然下面的工作

```
NotificationsController.Instance.SendNotification(notification, PortalSettings.PortalId,"", listOfFriends); 
```

但我收到一个错误'有一些无效的论点。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:20:15.497

你得到这个工作了吗？

我认为这

```
NotificationsController.Instance.SendNotification(notification, PortalSettings.PortalId,"", listOfFriends); 
```

应该

```
NotificationsController.Instance.SendNotification(notification, PortalSettings.PortalId, **null**, listOfFriends); 
```

# ios - 获取 Xcode 控制台输出以登录文件

> ID：12702211
> 
> 赞同：3
> 
> 时间：2012-10-03T05:07:17.280
> 
> 标签：ios, xcode, cocoa

我正在运行一些 iOS 应用程序测试，并希望让 xcode 的控制台将其输出记录到文件中。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:10:49.587

有一个很棒的框架可以为您执行此操作（和其他日志记录方法）。它叫[可可伐木工](https://github.com/robbiehanson/CocoaLumberjack/wiki/GettingStarted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:23:25.180

看看[Redirecting debug output from XCode 4 console to a log file。](http://pastebin.com/aymnb9ce)

```
defaults write com.apple.Xcode PBXGDBDebuggerLogToFile YES
defaults write com.apple.Xcode PBXGDBDebuggerLogFileName <filepath>

/Developer/Platforms/iPhoneOS.platform/Developer/usr/libexec/gdb/gdb-arm-apple-darwin

#!/bin/sh

/Developer/Platforms/iPhoneOS.platform/Developer/usr/libexec/gdb/gdb-arm-apple-darwin- $* | tee -a $HOME/tmp/xcode-gdb.log 2>&1 
```

# asp.net - 在存储过程中基于 asp.net 中的选定复选框创建选择查询

> ID：12702217
> 
> 赞同：1
> 
> 时间：2012-10-03T05:08:23.050
> 
> 标签：asp.net, sql, sql-server-2008

我在数据库中有两个名为 Customer 和 orders 的表。在我的 ASP.NET 页面中，我有代表这两个表中的字段的复选框。![在此处输入图像描述](../Images/c5b6e24460b4a78376109f1fc6ea103c.png)

用户可以从复选框中进行选择（Firstname,OrderitemName 是强制性的）。根据选中的复选框，我需要生成一个 sql 查询。当用户按下提交按钮时，查询将返回从 CustomerType 下拉列表应用过滤器的结果。

为此，我检查了是否在我的代码中选中了该复选框，并将其作为位类型传递到我的存储过程中。我的存储过程是，

```
CREATE PROCEDURE [dbo].[GetCustomerDetails]     
@LastName BIT,
@Phone BIT,
@Email BIT,
@Quantity BIT,
@OrderedDate BIT,
@ReturnPolicy BIT,
@CustomerType nvarchar(40) 
```

AS BEGIN SET NOCOUNT ON DELCARE @Sql NVARCHAR(4000)

```
SET @Sql='SELECT c.FirstName,o.OrderItemName'
IF @LastName =1
    BEGIN
        SET @Sql=@sql+'c.LastName,'
    END 
IF @Phone =1
    BEGIN
         SET @Sql=@sql+'c.Phone,'
    END 
IF @Email =1
    BEGIN
        SET @Sql=@sql+'c.Email,'
    END
IF @Quantity =1
    BEGIN
        SET @Sql=@sql+'o.Quantity,'
    END 
IF @OrderDate =1
    BEGIN
        SET @Sql=@sql+'o.OrderDate,'
    END 
IF @ReturnPolicy =1
    BEGIN
        SET @Sql=@sql+'o.ReturnPolicy'
    END

SET @sql=@sql +' ' +'from Customer c inner join Order o on c.CustomerId=o.CustomerID where c.CustomerType =' + '@CustomerType'

EXEC(@sql) 
```

结尾

现在，在 asp.net 页面的复选框中添加了许多额外的表格列（30 列）。这只是添加了太多位类型变量和 if 条件来检查这些位类型变量并根据存储过程中的那些位类型变量将其连接到 @sql。有没有更好的方法来实现这一点？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:46:47.800

首先创建一个表，我们称之为具有 3 列的过滤器，如下所示：

```
1\. filter varchar(100)
2\. inputBit bit
3\. condition (this can be any condition, may be date time or any incremental int) 
```

现在插入您的过滤条件以及所有列的输入位：这将如下所示：

```
c.LastName  1 11
c.Phone 1 11
c.Email 1 11
o.Quantity  1 11
o.OrderDate 1 11
o.ReturnPolicy  1 11 
```

在上面的例子中，我认为条件是 int，它对于特定实例的值是 11，对于下一个实例，它可以是别的东西。

现在使用以下查询：

```
DECLARE @Sql NVARCHAR(4000)
declare @var1 varchar(100)
declare @var2 bit
SET @Sql='SELECT c.FirstName,o.OrderItemName'
declare cur_filtered_view cursor for
select filter,inputBit from filters where condition = 11
open cur_filtered_view
fetch next from cur_filtered_view into @var1,@var2
while @@fetch_status = 0
begin
if(@var2 = 1)
begin
    set @Sql = @Sql+','+@var1
end
fetch next from cur_filtered_view into @var1,@var2
end
close cur_filtered_view
deallocate cur_filtered_view
set @Sql = @Sql + ' from Customer c inner join Order o on c.CustomerId=o.CustomerID where c.CustomerType =' + '@CustomerType' 
exec (@Sql) 
```

现在，如果要添加任何新过滤器，则无论如何您都必须将其作为位从前端传递给 Proc。此后唯一需要的更新是在过滤器表中为这些新过滤器添加一行，并在每个 proc 调用中在过滤器表中插入相关值。

# c - MPI_Gather 似乎不起作用

> ID：12702224
> 
> 赞同：1
> 
> 时间：2012-10-03T05:08:52.193
> 
> 标签：c, mpi

我需要在我的矩阵乘法程序中使用 MPI_Gather 函数，但最近几天遇到了麻烦。

因此，我单独使用gather函数编写了一个简单的MPI程序，并一直试图让它运行......为此，我参考了“Peter Pacheco的并行编程简介”一书。

程序直接退出，绝对没有结果或错误……我到现在还没有弄清楚错误。

```
 /******************NOTE**********************

      The program simply uses the MPI_Gather() function. 
      The program is exiting directly.
      I have written it for only TWO processes.
      (-np 2)

   ******************************************/

    #include<stdio.h>
    #include"mpi.h"

    int main()
    {
     int i,j,proc,rank;
     double d[4];
     double local_a[2];

     MPI_Init(NULL,NULL);
     MPI_Comm_size(MPI_COMM_WORLD, &proc);
     MPI_Comm_rank(MPI_COMM_WORLD, &rank);

     if(rank==0)
     { 

       local_a[0]=1.0;
       local_a[1]=2.0;
     }

     else
     {
       local_a[0]=3.0;
       local_a[1]=4.0;
     }

     int local=2;

     if(rank==0)
     {   

       MPI_Gather(local_a,local,MPI_DOUBLE,d,local,MPI_DOUBLE,0,MPI_COMM_WORLD);
     //MPI_Gather(&local_a,local,MPI_DOUBLE,&d,local,MPI_DOUBLE,0,MPI_COMM_WORLD);
     //also tried the above line just to be certain.

       printf("\n");
       for(j=0;j<4;j++)
         printf("\t%f",d[j]);
     }
     else
     {
       MPI_Gather(local_a,local,MPI_DOUBLE,d,local,MPI_DOUBLE,0,MPI_COMM_WORLD);
     //MPI_Gather(&local_a,local,MPI_DOUBLE,&d,local,MPI_DOUBLE,0,MPI_COMM_WORLD); 
     }

     MPI_Finalize();

     return 0;

    } 
```

谁能帮帮我。

谢谢你。

阿纳迦马杜苏达南

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:17:28.790

您的程序对我来说很好，作为输出：

```
 1.000000    2.000000    3.000000    4.000000 
```

您能否分享有关如何运行和编译可执行文件的更多信息，以便我尝试重现错误并以防万一编辑答案？

仅供参考，您可以在下面找到稍微修改过的程序版本，这表明接收缓冲区只能在根目录下分配：

```
#include <stdio.h>
#include <stdlib.h>
#include "mpi.h"

int main() {

  int rank     = -1;
  int commsize = -1;
  double sendbuffer[2];

  MPI_Init(NULL,NULL);
  MPI_Comm_size(MPI_COMM_WORLD, &commsize);
  MPI_Comm_rank(MPI_COMM_WORLD, &rank);

  sendbuffer[0]=2.0*rank;
  sendbuffer[1]=2.0*rank + 1;

  int count=2;

  if(rank==0) {   

    // Recvbuffer is significant only at root
    double * recvbuffer = malloc(2*commsize*sizeof(double));
    // Gather values at root
    MPI_Gather(sendbuffer,count,MPI_DOUBLE,recvbuffer,count,MPI_DOUBLE,0,MPI_COMM_WORLD);
    // Print to screen
    printf("\n");
    for(int jj=0; jj<2*commsize ;jj++)
      printf("%f\n",recvbuffer[jj]);
    // Free recvbuffer
    free(recvbuffer);

  } else {
    MPI_Gather(sendbuffer,count,MPI_DOUBLE,NULL,0,MPI_DOUBLE,0,MPI_COMM_WORLD);
  }

  MPI_Finalize();

  return 0;

} 
```

# apache-flex - Mylyn 3.x (可选) (3.0.0) 的 Subclipse 集成需要插件“org.eclipse.mylyn.tasks.core (3.0.0)”，或兼容

> ID：12702228
> 
> 赞同：2
> 
> 时间：2012-10-03T05:09:38.743
> 
> 标签：apache-flex, subclipse

Mylyn 3.x（可选）（3.0.0）的 Subclipse 集成需要插件“org.eclipse.mylyn.tasks.core (3.0.0)”，或兼容。

当我尝试在 Flex 中更新站点时发生错误。谁能说是什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:29:44.563

您可能想取消选择该插件。它被标记为可选，因为它所做的只是在 Subclipse 和 Mylyn 之间提供一些集成。根据错误，听起来您没有安装 Mylyn，因此无需安装此集成插件。

# ios - 在加载任何广告之前设备旋转时 Admob 中介崩溃

> ID：12702229
> 
> 赞同：1
> 
> 时间：2012-10-03T05:09:44.673
> 
> 标签：ios, admob, ads

在我的项目中，我有一个拆分视图，并且之前使用 Apple iAdSuite 中的拆分视图示例实现了 iAd。现在我还想实现 Admob 广告，由于 Adwhirl 在 xcode 4.5 中出现了很多错误，我尝试使用 Admob 中介（iOS SDK 6.2.0）。

我加载了广告，并在必要时在 iAd 和 Admob 之间进行了适当的调解。然而，一个大问题仍然存在。在加载任何广告之前旋转设备（或模拟器）时，出现以下崩溃：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayI objectAtIndex:]：索引 0 超出空数组的范围”
> 
> ***第一掷调用堆栈：（0x1b4e012 0x1701e7e 0x1b03b44 0x1c7ff 0x1c97b 0x1ba5b 0x1bff2 0x4581 0x699a0c 0x17156b0 0x701dfc0 0x701233c 0x701deaf 0x7386b4 0x6811a6 0x67fcbf 0x67fbd9 0x67ee34 0x67ec6e 0x67f435 0x67ef11 0x67eb2a 0x11c2dc9 0x1ba80c5 0x1b02efa 0x10f7482 0x8259be 0x6594d4 0x65a24b 0x64bcf8 0x1998df9 0x1998ad0 0x1ac3bf5 0x1ac3962 0x1af4bb6 0x1af3f44 0x1af3e1b 0x19977e3 0x1997668 0x64965c 0x203d 0x1f65）
> 
> libc++abi.dylib：终止调用抛出异常

作为一项测试，我还在 iAdSuite splitview 示例中实施了 Admob 中介（ [可以在此处找到](https://docs.google.com/uc?export=download&id=0B0jzPjytXD0ZZFdtaGRYLXF4bkE)）并看到相同的崩溃。加载广告后，您可以随意旋转而不会崩溃。当我仅使用 Admob（无中介）时，我无法让这种崩溃发生。

似乎它在 Admob 代码中崩溃了，但可能还有其他一些我没有做对的事情导致这种情况。但在这一点上，我被困住了。有人知道如何让这次崩溃消失吗？

**编辑：我得到了 Admob 在**[http://code.google.com/p/google-mobile-dev/downloads/list](http://code.google.com/p/google-mobile-dev/downloads/list) 提供的“智能横幅示例 1.2” 。我唯一“改变”的是添加实际的 Admob SDK 6.2.0 文件 iAdAdapter，添加 iAd 框架并使用中介 ID。当还没有加载广告时，这也会在轮换时崩溃。

我试图在 Google AdMob 广告开发者论坛上发布此问题，但短暂地闪现出类似帖子需要批准的内容。两天后，似乎还没有人查看批准队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:37:23.743

Looks like this might be an issue with the AdMob SDK. I would probably workaround it by setting a boolean (i.e `firstAdReceived`) when you get an ad the first time, and then checking that before you change the `adSize` and other banner characteristics on orientation change.

# php - 如何使用 kohana 3.2 使用 PHPExcel 创建新工作表

> ID：12702230
> 
> 赞同：4
> 
> 时间：2012-10-03T05:09:45.110
> 
> 标签：php, phpexcel, worksheet, kohana-3.2

```
$excel2 = PHPExcel_IOFactory::createReader('Excel2007');
$excel2 = $excel2->load('ExampleSpreadsheettest.xlsx'); 
$excel2->setActiveSheetIndex(0);
$excel2->getActiveSheet()->setCellValue('A4', 'first page')
        ->setCellValue('A1', '5')
        ->setCellValue('A2', '6')       
        ->setCellValue('A3', '7');
$objWriter = PHPExcel_IOFactory::createWriter($excel2, 'Excel2007');
$objWriter->save('ExampleNew.xlsx'); 
```

上面的代码正在运行，但我想添加更多工作表而不是单个工作表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T06:28:05.087

阅读 PHPExcel 文档可能会有所帮助： addSheet() 方法用于添加新工作表。

```
$excel2->addSheet();
$excel2->setActiveSheetIndex(1);  
$excel2->getActiveSheet()->setCellValue('A4', 'second page') ; 
```

# php - 大量记录（大约 40,000 条）通过 php、mysql 脚本插入 mysql

> ID：12702231
> 
> 赞同：0
> 
> 时间：2012-10-03T05:09:48.683
> 
> 标签：php, mysql, sql

我在 csv 文件中有大量记录（大约 40,000 条）要更新到数据库表中。

我知道如何编写代码 (PHP) 来更新记录，但我担心大量数据。

我应该如何处理一次更新大量记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:15:36.200

你可以使用这个。可能对你有帮助

```
LOAD DATA INFILE 'data.csv' INTO TABLE my_table;

LOAD DATA INFILE 'data.txt' INTO TABLE table2
FIELDS TERMINATED BY '\t'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:13:15.220

循环遍历 csv 文件中的所有行。将每一行解析为不同的变量以更新数据库。使用正常的 SQL 调用。

唯一不同的是，您可能需要`set_time_limit(0);`在文件的最顶部添加。这将防止 PHP 超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:13:51.750

遵循某种分布式处理流程。有一个分发线程和一些工作线程。分发线程可以从 csv 文件中读取数据，将工作分配给工作池中的空闲工作线程。您可以限制线程池大小，平衡性能和资源使用。而且您已经说过，您知道如何进行更新，因此可以理解工作线程代码。:) 希望这会有所帮助

# c - 解释为什么输出 10 会出现在 c 程序中

> ID：12702232
> 
> 赞同：-1
> 
> 时间：2012-10-03T05:10:15.593
> 
> 标签：c

解释为什么输出 10 会来？

```
main()
{

   for(printf("1");!printf("0");printf("2"))
    {
    printf("hello");
    }   
} 
```

输出：

```
10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T05:15:42.053

根据其[printf(3)](http://linux.die.net/man/3/printf)手册页，该`printf`函数返回

> 打印的字符数（不包括用于结束输出到字符串的空字节）

所以，初始化部分`for`运行一次`printf("1")`：它将`1`字符放入`stdout`. 然后评估条件，`!printf("0");`因为`printf("0")`评估后，它将`0`字符放入缓冲区`stdout`并返回输出字符的数量，即`1`条件为假，`for`循环存在。

最后，`main`正在退出程序，当时只有`stdout`缓冲区被刷新。

`stdout`为了迂腐，当由于不太可能的原因无法成功编写时，您的程序将具有不同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:22:04.980

因为在 printf("1") 它按原样执行语句。然后 printf("0") 在屏幕上打印 0 并返回一个值 1。当你否定它时，它在 C 中给出一个等于 false 的值。所以 for 循环满足其结束条件并退出。

# c++ - 使用 Xalan 转换文档时出现分段错误

> ID：12702233
> 
> 赞同：0
> 
> 时间：2012-10-03T05:10:17.083
> 
> 标签：c++, xalan

我正在使用 Xalan-C++ 进行 XSLT 转换，我在这段代码中遇到了分段错误：

```
XalanTransformer evalTransformer;
evalTransformer.setUseValidation(false);
evalTransformer.transform(*(xmlDoc.getDocumentBuilder()), rule_, resultStream); 
```

以前，我使用此代码初始化 XalanDocumentBuilder：

```
// Create a XalanTransformer.
XalanTransformer        theXalanTransformer;

// Get a document builder from the transformer...
docBuilder_ = theXalanTransformer.createDocumentBuilder(); 
```

然后用 , 创建一个 XML 文档`docBuilder_`，所以`xmlDoc.getDocumentBuilder()`（它只返回`docBuilder_`）应该返回一个有效的指针。

如果我将 gdb 附加到正在运行的进程，这是堆栈跟踪的前几行：

```
#0  0x0a2de894 in ?? ()
#1  0x0514f8d9 in amxalanc_1_6::XalanTransformer::doTransform () from /usr/lib/libamxalanc1_6.so 
```

该`transform()`方法使用简单的输出流，但是当我更改第一个参数时，它现在失败了。我已经使用文档构建器对象成功地创建了一个 XML 文档。任何想法为什么我会在 Xalan 代码中出现分段错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:15:39.107

我正在为 Xalan-C 1.11 的正式发布做准备。

您能否将您的问题发布到 XALANC 的 Apache Jira 以便可以跟踪此问题？

[https://issues.apache.org/jira/browse/XALANC](https://issues.apache.org/jira/browse/XALANC)

我还有一个 Apache 提交者的网站

[http://www.apache.org/~shathaway](http://www.apache.org/~shathaway)

感谢您发布到邮件列表

c-users@xalan.apache.org

此致 Steven J. Hathaway Xalan 文档项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:53:12.830

Xalan-C 的 1.6 版本已经过时了。最新的稳定版本是 1.10。升级解决了许多段故障指针修复。正在准备发布的新版本 1.11 解决了更多段错误指针修复。

如果这是新代码，您应该确保在进行任何有用的工作之前初始化您的 Xerces 和 Xalan 库。

[http://xalan.apache.org/xalan-c/usagepatterns.html#xalan](http://xalan.apache.org/xalan-c/usagepatterns.html#xalan)

此致
Steven J. Hathaway
Xalan 文档项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T00:02:45.287

问题是`theXalanTransformer`在另一个函数中初始化。构造它的唯一原因是使用`docBuilder_`. `theXalanTransformer`的析构函数将在该函数的末尾调用，并且`*docBuilder_`此时它也隐式销毁，因为`*docBuilder_`它是使用`theXalanTransformer`. 后来`evalTransformer`用来做改造，但`*docBuilder_`已经被销毁了。

我没有意识到`*docBuilder_`被摧毁时会`theXalanTransformer`被摧毁。当我在内存中保留`theXalanTransformer`足够长的时间以进行转换时，结果是成功的。我想使用一个`XalanTransformer`来创建 XML 文档并进行转换会更好。

# php - codeigniter 图片上传水印和缩略图

> ID：12702234
> 
> 赞同：1
> 
> 时间：2012-10-03T05:10:28.033
> 
> 标签：php, codeigniter

我正在使用 CI 上传库上传图像工作正常，水印和图像缩略图问题，如果 id 先水印然后缩略图，它对原始图像进行水印，但也重新调整缩略图大小但不保持原始大小的图像带水印同样，如果我先做缩略图然后给它加水印它工作正常，但我希望缩略图也加水印这是我的代码

```
$this->do_thumb('file_name');
$this->watermark('file_name');

function watermark($filename){
        $image_cfg = array();
        $image_cfg['image_library'] = 'GD2';
        $image_cfg['source_image'] = 'upload/' . $filename;
        $image_cfg['wm_overlay_path'] = 'upload/watermark.png';
        $image_cfg['new_image'] = 'upload/mark_'.$filename;
        $image_cfg['wm_type'] = 'overlay';
        $image_cfg['wm_opacity'] = '10';
        $image_cfg['wm_vrt_alignment'] = 'bottom';
        $image_cfg['wm_hor_alignment'] = 'right';
        $image_cfg['create_thumb'] = FALSE;

        $this->image_lib->initialize($image_cfg);
        $this->image_lib->watermark();
        $this->image_lib->clear();

//        echo $this->image_lib->display_errors();
//        die();

    }

    function do_thumb($filename) {
        $image_cfg['image_library'] = 'GD2';
        $image_cfg['source_image'] = 'upload/' . $filename;
        $image_cfg['create_thumb'] = TRUE;
        $image_cfg['maintain_ratio'] = TRUE;
        $image_cfg['width'] = '200';
        $image_cfg['height'] = '175';
        $this->load->library('image_lib');
        $this->image_lib->initialize($image_cfg);
        $this->image_lib->resize();
        $this->image_lib->clear();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:47:26.647

先执行`watermark()`，然后`do_thumb()`，删除`$image_cfg['new_image']`水印功能，或者如果你想使用它，将`$image_cfg['new_image']`值传递给`do_thumb()`.

也不要忘记设置`$image_cfg['new_image']`，`do_thumb()`所以它会创建新的拇指文件而不是重写它

您的拇指不包含水印的问题是因为您使用原始图像而不是水印图像作为拇指的图像源。希望你明白我的意思，因为英语不是我的母语，php 是..

# typescript - TypeScript 中的循环

> ID：12702235
> 
> 赞同：2
> 
> 时间：2012-10-03T05:10:36.107
> 
> 标签：typescript

我正在尝试将我的 CoffeeScript 库之一转换为 TypeScript。到目前为止，体验还可以，除了我找不到对应的

```
locations = (new Location p.lat, p.lng for p in points) 
```

我必须`for(i = 0; i < len; i++)`为 TypeScript 编写老式的循环吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T06:25:20.437

TypeScript 增加了 JavaScript 的声明语法。它使表达式语法在很大程度上保持不变，因此正如他们所说，您可以使用您最喜欢的方法。就个人而言，我会使用`map()`它看起来像，

```
var location = points.map(p => new Location(p.lat, p.lng)); 
```

但这仅适用于 ES5 或如果您使用`map()`polyfill。

# ios - UIWebview didReceiveAuthenticationChallenge

> ID：12702240
> 
> 赞同：4
> 
> 时间：2012-10-03T05:11:19.840
> 
> 标签：ios, xcode, nsurlconnection, nsurlrequest

我正在使用 webview 加载网站。我设法运行了这些应用程序。但我的问题是，如果我输入了错误的密码，我无法加载网站，它只显示一个白屏。

如果我传递了正确的用户名/密码，它将加载网站。有没有办法处理我的身份验证用户名/密码是正确还是错误？

我正在使用这段代码。

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodNTLM])
{
    NSURLCredential *credentail = [NSURLCredential
                                   credentialWithUser:@"username" 
                                   password:@"Password"
                                   persistence:NSURLCredentialPersistenceForSession];
    [[challenge sender] useCredential:credentail forAuthenticationChallenge:challenge];
}} 
```

正确的用户名和密码包含在上面的代码中。如果我将用户名更改为“user”或将密码更改为“pass”，则无法加载该网站。如何捕获身份验证错误？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T05:16:20.153

我刚找到它。只需要再添加 1 个验证。[[challenge previousFailureCount] == 0\. 这是代码。

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
//receive a authenticate and challenge with the user credential
if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodNTLM] &&
    [challenge previousFailureCount] == 0)
{
    NSURLCredential *credentail = [NSURLCredential 
                                   credentialWithUser:@"username" 
                                   password:@"password"
                                   persistence:NSURLCredentialPersistenceForSession];

    [[challenge sender] useCredential:credentail forAuthenticationChallenge:challenge];
}
else 
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error Message" message:@"Invalid credentails" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
}
} 
```

谢谢。:)

# python - 四舍五入Python 3.2时的“量化”

> ID：12702242
> 
> 赞同：1
> 
> 时间：2012-10-03T05:11:40.680
> 
> 标签：python, math, python-3.x, rounding

我试图找到一种在数学运算后将数字捕捉或量化为特定值的方法，但并不真正知道解决问题的最佳方法。

一个具体的例子：

我有一个我想成为我的主号码的号码列表 - 5, 10, 30, 60, 120, 180

我有一个当前输入的数字列表 - 10、20、60、120

现在我想将所有输入的数字乘以 2，并让它们捕捉（或量化/四舍五入）最接近我的主数字。

所以像 10 这样的数字，一旦乘以 2，我想让它变成 30。我不认为这对顶部或底部来说是个大问题，因为我认为我可以使用 math.ceil 和 math.floor 来包含结束。同样，我也希望将 20 舍入为 30（20*2=40，向下舍入，因为 30 比 60 更接近）。

我看到了一个关于四舍五入到 10、100 等的类似问题，但我真的不知道如何在那里应用答案，因为我还是比较新的！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:47:39.227

使用`bisect`模块快速确定所需数量：

```
import bisect

def quantize(num, quant):
    mids = [(quant[i] + quant[i + 1]) / 2.0
            for i in xrange(len(quant) - 1)]
    ind = bisect.bisect_right(mids, num)
    return quant[ind]

quantnum = [5, 10, 30, 60, 120, 180]

inputnum = [10, 20, 60, 120]

for n in inputnum:
    print quantize(2 * n, quantnum)

# Output:
#30
#30
#120
#180 
```

中点四舍五入到较大的数量；改为四舍五入到较小的那个`bisect_right`。`bisect_left`

为简单起见，此实现在`mids`每次调用时重新创建列表。一个有效的实现将重用中点，并以`O(log n)`最坏情况的复杂性运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:35:14.813

对于元素找到与 的每个元素`x`的`input`绝对差，然后该新列表的最小值将是四舍五入的数字。`x*2``master``x*2`

例如。对于输入列表中的 20，绝对差异列表将是：

`[abs(5-40),abs(10-40),abs(30-40),abs(60-40),abs(120-40),abs(180-40)]`

这导致了元素的`[35,30,10,20,80,140]`最小差异`3rd`，即列表`30``master`

```
In [14]: inp=[10, 20, 60, 120,17,27,50]

In [15]: master=[5, 10, 30, 60, 120, 180]

In [16]: [min(master,key=lambda y:abs(y-x*2)) for x in inp]
Out[16]: [10, 30, 120, 180, 30, 60, 120] 
```

# c# - 从客户端检测到潜在危险的 Request.Path 值？

> ID：12702243
> 
> 赞同：0
> 
> 时间：2012-10-03T05:11:58.423
> 
> 标签：c#, asp.net-mvc

我正在写sitemap.config。

```
 <siteMapNode title="Shipping rate" nopResource="Admin.Configuration.Shipping.Rate" controller="Shipping" action="ConfigureProvider?systemName=Shipping.ByWeight"   />           

      </siteMapNode> 
```

这是我要调用的运输控制器功能。

```
public ActionResult ConfigureProvider(string systemName)
        {
            if (!_permissionService.Authorize(StandardPermissionProvider.ManageShippingSettings))
                return AccessDeniedView();

            var srcm = _shippingService.LoadShippingRateComputationMethodBySystemName(systemName);
            if (srcm == null)
                //No shipping rate computation method found with the specified id
                return RedirectToAction("Providers");

            var model = srcm.ToModel();
            string actionName, controllerName;
            RouteValueDictionary routeValues;
            srcm.GetConfigurationRoute(out actionName, out controllerName, out routeValues);
            model.ConfigurationActionName = actionName;
            model.ConfigurationControllerName = controllerName;
            model.ConfigurationRouteValues = routeValues;
            return View(model);
        } 
```

但有一个错误`" A potentially dangerous Request.Path value was detected from the client (?) "`

我怎么能爱它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:42:31.957

您不能通过 NOPCommerce 中的 siteMap.cofig 将任何参数传递给操作，因为如果您在 siteMapNode 的 Action 属性中使用参数编写操作名称， **则**认为这是操作名称。所以如果想用参数调用任何动作，然后为它创建一个新动作并从中重定向。

```
//In Site Map 

    <siteMapNode title="Shipping rate" nopResource="Admin.Configuration.Shipping.Rate" controller="Shipping" action="SomeAction"/> 

//In Shipping Controller 

    public ActionResult SomeAction()
    {
         return RedirectToAction("ConfigureProvider", new { systemName = "Shipping.ByWeight" });
    }

    public ActionResult ConfigureProvider(string systemName)
    {

    } 
```

通过这种方式，您可以调用您的操作。

# jquery - node.js - 如何使用 jsdom / node-jquery 更新我的页面外观？

> ID：12702247
> 
> 赞同：1
> 
> 时间：2012-10-03T05:12:33.737
> 
> 标签：jquery, node.js, socket.io, multiplayer, jsdom

似乎我能找到的所有文档`jsdom`都是关于[“抓取其他人的页面”](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-scrape-web-pages-with-node-js-and-jquery/)以获取信息。我想使用`jsdom`或`node-jquery`更新用户所在的页面。我知道当我编写代码时，我可以有一个`<script>`链接到公共目录中的 JavaScript 文件的常规标记，但如果可能的话，我想学习如何从服务器上执行此操作。我真正想要的是允许多个用户连接到一个页面并在一个用户执行操作时为所有用户更新页面。例如，按钮 1 将背景变为黑色。按钮 2 将其变为红色，按钮 3 将其变为白色。如果我错了，请纠正我，但我认为通过`<script>`标签链接到 JavaScript 文件是不可能的。所以看着`jsdom`：

```
jsdom.env({html: ???, src: jquery, done: callback }); 
```

好的，这是**第 1 个问题**。我不知道在这段代码中为 html 放什么来获取我的 DOM 对象，或者我能做什么。我的文件是用玉写的，所以我不能只从文件中加载它们。然后我开始想，也许我可以把这段代码放在我代码的路由部分，并从`req`变量中获取 html。所以我开始在我的路由代码中玩耍：

```
exports.index = function(){
  res.render('index', {title: 'MyTitle'});
}; 
```

我只想说，整个路由的事情已经让我大吃一惊了。我已经尝试`res.render`了第二次，但这不起作用。所以这导致了**问题 2**。即使我可以获取 DOM 对象并对其进行操作，我也不知道如何将它们推回客户端，因为再做一秒钟`res.render`是行不通的。更不用说这会破坏目的，因为如果我让它们重新渲染，我不妨将它们重定向到另一个页面。

我打算用它`socket.io`来处理用户连接，所以也许关键就在那里。也许我可以设置 a`socket.on('button_click', function(){ ... });`但我不知道在该函数中放置什么来处理 DOM 操作和更新 DOM，或者在客户端如何让按钮发出`'button_click'`，因为客户端无法访问套接字。 io 变量。

因此，如果有人可以帮助我使用示例向我解释这些事情，那就太好了。我真的很想弄清楚这一切，我花了几天时间研究和阅读 node.js、express.js、socket.io、jsdom 和 node-jquery 的 API 文档。似乎我发现的所有示例对于他们自己的领域来说都是非常基础的，并且没有任何示例可以真正将它们联系在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:33:06.423

你正朝着一个有点尴尬的方向前进。

首先，如果你用过jade，它会使用jade编译器编译成html。

其次，一旦你编译了它，你可以将它推入 jsdom，因为它使用了一个 html5 解析器，然后你可以通过普通的 DOM api 来操作它。

第三，您无法直接访问客户端浏览器中的 DOM。通常，人们实现共享同步视图之类的方法是使用 socket.io 并将数据事件向下传输到每个客户端，在那里您编写客户端 JavaScript 来解释这些事件并在 UI 中进行必要的更改。您正在发送一组引导每个客户端的 html 和 javascript - 人们很少将完整的 DOM 保存在服务器的内存中，然后尝试更新它并将更改广播到客户端。你*可以*这样做，我只是不推荐它。通常不是事物的结构。

第四，在第一次通过时执行此操作非常复杂。我建议查看客户端 mvc 框架比较应用程序，例如 todomvc - [http://addyosmani.github.com/todomvc/](http://addyosmani.github.com/todomvc/)。查看每个的来源，包括普通的旧 javascript 版本。这将教你足够的理解客户端部分。然后，您可以想象使用诸如 socket.io 之类的东西来更新您的模型并构建依赖于这些模型的更改事件的视图。您可以在没有 mvc 的情况下完成所有这些工作，但它会教您很好地分离关注点，从而了解人们通常如何构建这些类型的应用程序。

# r - 绘制隐函数

> ID：12702248
> 
> 赞同：14
> 
> 时间：2012-10-03T05:12:40.723
> 
> 标签：r, graph

我试图在 R 中绘制以下隐式公式：

1 = x^2 + 4*(y^2) + x*y

这应该是一个椭圆。我想随机采样 x 值，然后根据这些值生成图表。

[这是](https://stackoverflow.com/questions/5285178/r-plot-implicit-function-outer-command)一个相关的线程，但那里的解决方案似乎特定于 3D 案例。这个问题对谷歌搜索的抵抗力比我预期的要高，所以也许 R 语言将隐式公式称为其他东西。

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T05:32:05.960

有两件事你可能不明白。使用该技术绘制隐式函数时，您需要将所有项移至函数的 RHS，以便您的隐式函数变为：

```
0 = -1+ x^2 + 4*(y^2) + x*y 
```

然后使用零轮廓值将是有意义的：

```
x<-seq(-1.1,1.1,length=1000)
y<-seq(-1,1,length=1000)
z<-outer(x,y,function(x,y) 4*y^2+x^2+x*y -1 )
contour(x,y,z,levels=0) 
```

我在第一个版本上弄错了一个标志。@mnels' 是正确的。

![在此处输入图像描述](../Images/19d7e0d7038833395c7c9316e3ee2d33.png)

# java - Json 将字符串中的 & 转换为 \u0026

> ID：12702249
> 
> 赞同：25
> 
> 时间：2012-10-03T05:12:43.847
> 
> 标签：java, json, string, unicode, gson

我正在尝试从 pdf 中提取文本并将其写入 json 文件。在提取 unicode 字符时，Json 将所有 & 转换为 \u0026。例如我的实际字符串是`&#1588`. （代表Ô）。它可以正确打印到 .txt 文件、控制台等。但是当我尝试将此字符串打印到 Json 文件时，它会显示`\u0026#1588;`.

我正在使用Java，代码是

```
Gson gson = new Gson();
String json = gson.toJson(pdfDoc); 
```

注意：`pdfDoc`是一个对象，包含输入 PDF 文档中字符的所有详细信息（位置、颜色、字体等）。我正在使用`gson-2.2.1.jar`.

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-03T05:29:46.037

这实际上是一种有效的（但不是必需的）编码。*任何*字符*都*可以使用 JSON 中的 unicode 转义进行编码，并且任何有效的 JSON 解析库*必须*能够解释这些转义。

`&`不是*需要*编码的字符的一部分（参见`string` [json.org](http://json.org/)上的定义），但是有一些 JSON 库的编码非常“激进”。这通常不是问题，除非您没有真正使用符合标准的 JSON 解析器来处理生成的 JSON。

[如果您绝对需要， GsonBuilder.disableHtmlEscaping()](https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html)将帮助您关闭该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-04T22:26:04.600

使用以下代码从 Swift 中的 unsplash.com JSON 文件中解码 \u0026：

```
extension String {
    func utf8DecodedString()-> String {
        let data = self.data(using: .utf8)
        let message = String(data: data!, encoding: .nonLossyASCII) ?? ""
        return message
    }

    func utf8EncodedString()-> String {
        let messageData = self.data(using: .nonLossyASCII)
        let text = String(data: messageData!, encoding: .utf8) ?? ""
        return text
    }
}

let jsonOriginal = #"Let\u2019s not be na\357ve \u0026 dumb!"#

print(jsonOriginal)
print("----")

let jsonDecoded = jsonOriginal.utf8DecodedString()
print(jsonDecoded)

let jsonEncoded = jsonDecoded.utf8EncodedString()
print(jsonEncoded) 
```

奇怪的是，编码离开 & 并且不会重新编码为 \u0026??

# r - RInside 安装错误

> ID：12702251
> 
> 赞同：0
> 
> 时间：2012-10-03T05:13:01.493
> 
> 标签：r, rcpp, rinside

我正在尝试在我的计算机上创建一个 R 开发环境。在最后一个小时，我可以成功安装 RTools 和 RCpp。但是当我尝试最后一个元素 RInside 包时，出现以下错误。我可以看到原因是因为 g++ 或 make 无法识别包含空格的路径（程序文件 -> 文件）但是如何更改 make 文件或连击问题是......生成以下编译的 make 文件在哪里？

```
> install.packages(c("RInside"),type="source")
trying URL 'http://cran.revolutionanalytics.com/src/contrib/RInside_0.2.8.tar.gz'
Content type 'application/x-gzip' length 61012 bytes (59 Kb)
opened URL
downloaded 59 Kb

* installing *source* package 'RInside' ...
** package 'RInside' successfully unpacked and MD5 sums checked
** libs
cygwin warning:
  MS-DOS style path detected: C:/PROGRA~1/R/R-215~1.1/etc/i386/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/PROGRA~1/R/R-215~1.1/etc/i386/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
C:/PROGRA~1/R/R-215~1.1/bin/i386/Rscript.exe tools/RInsideAutoloads.r > RInsideAutoloads.h
C:/PROGRA~1/R/R-215~1.1/bin/i386/Rscript.exe tools/RInsideEnvVars.r   > RInsideEnvVars.h
g++  -I"C:/PROGRA~1/R/R-215~1.1/include" -DNDEBUG -I../inst/include/   -I"C:/Program Files/R/R-2.15.1/library/Rcpp/include"      -O2 -Wall  -mtune=core2 -c MemBuf.cpp -o MemBuf.o
g++  -I"C:/PROGRA~1/R/R-215~1.1/include" -DNDEBUG -I../inst/include/   -I"C:/Program Files/R/R-2.15.1/library/Rcpp/include"      -O2 -Wall  -mtune=core2 -c RInside.cpp -o RInside.o
g++ -shared -s -static-libgcc -o RInside.dll tmp.def MemBuf.o RInside.o C:/Program Files/R/R-2.15.1/library/Rcpp/lib/i386/libRcpp.a -LC:/PROGRA~1/R/R-215~1.1/bin/i386 -lR
g++.exe: error: Files/R/R-2.15.1/library/Rcpp/lib/i386/libRcpp.a: No such file or directory
ar qc libRInside.a MemBuf.o RInside.o
cp libRInside.a ../inst/lib/i386
g++  -Wl,--export-all-symbols -shared -o libRInside.dll MemBuf.o RInside.o C:/Program Files/R/R-2.15.1/library/Rcpp/lib/i386/libRcpp.a   -L"C:/PROGRA~1/R/R-215~1.1/bin/i386" -lR  -lws2_32
g++.exe: error: Files/R/R-2.15.1/library/Rcpp/lib/i386/libRcpp.a: No such file or directory
make: *** [libRInside.dll] Error 1
ERROR: compilation failed for package 'RInside'
* removing 'C:/Program Files/R/R-2.15.1/library/RInside'

The downloaded source packages are in
        ‘C:\Users\Administrator\AppData\Local\Temp\Rtmp6lSKly\downloaded_packages’
Warning messages:
1: running command 'C:/PROGRA~1/R/R-215~1.1/bin/i386/R CMD INSTALL -l "C:/Program Files/R/R-2.15.1/library"   C:\Users\ADMINI~1\AppData\Local\Temp\Rtmp6lSKly/downloaded_packages/RInside_0.2.8.tar.gz' had status 1 
2: In install.packages(c("RInside"), type = "source") :
  installation of package ‘RInside’ had non-zero exit status
> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:08:27.167

安装在不包含空格的路径中——我喜欢`C:/opt/R/R-library/`我的 R 包。

最后的链接命令因空间而失败。

这个问题在此之前和 rcpp-devel 列表中已被多次询问和回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:59:07.927

看起来这个页面有一个链接到 RInside for Windows 的二进制版本。我下载了它，它似乎还包括源代码。

[http://cran.r-project.org/web/packages/RInside/index.html](http://cran.r-project.org/web/packages/RInside/index.html)

Windows 二进制文件：RInside_0.2.8.zip

[http://cran.r-project.org/bin/windows/contrib/r-release/RInside_0.2.8.zip](http://cran.r-project.org/bin/windows/contrib/r-release/RInside_0.2.8.zip)

# android - IllegalStateException：数据库已关闭（使用 ViewPager）

> ID：12702254
> 
> 赞同：5
> 
> 时间：2012-10-03T05:13:28.430
> 
> 标签：android, android-viewpager, android-cursoradapter, android-sqlite, android-cursor

我对导致此错误的原因感到困惑，因为我已确保我正确关闭了我的数据库适配器（至少我认为是这样）。以下是 LogCat 所说的（它们的标签都是 AndroidRuntime）：

> 致命异常：主要 java.lang.IllegalStateException：数据库 /data/data/com.acedit.assignamo/databases/data.db (conn# 0) 已在 android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082 ) 在 android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java: android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:400) 79) 在 android.database.sqlite.sqliteCursor.fillWindow(SQLiteCursor.java:164) 在 android.database.sqlite.SQLiteCursor.onMove(SQLiteCursor.java:147) 在 android.database.AbstractCursor.moveToPosition(AbstractCursor.java:178) ) 在 android.support.v4.widget.CursorAdapter.getItemId(CursorAdapter.java:225) 在 android.widget.AbsListView.onSaveInstanceState(AbsListView.java:1569) 在 android.widget.AdapterView.dispatchSaveInstanceState(AdapterView.java:770) 在 android.view.ViewGroup.dispatchFreezeSelfOnly(ViewGroup.java:2310) 在 android.view.View.dispatchSaveInstanceState(View.java:9868)。在 android.support.v4.app.FragmentManagerImpl.saveFragmentViewState(FragmentManager.java:1561) 在 android.support.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:2296) 在 android.view.View.saveHierarchyState(View.java:9851) 在 android.support .v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:962) 在 android.support.v4.app.FragmentManagerImpl.detachFragment(FragmentManager.java:1233) 在 android.support.v4.app.BackStackRecord.run(BackStackRecord.java :620) 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431) 在 android。support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431) 在 android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141) 在 android.support.v4.view.ViewPager.populate(ViewPager. java:895) 在 android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1539) 在 android.support.v4.view 的 android.support.v4.view.ViewPager.populate(ViewPager.java:772) .ViewPager.computeScroll(ViewPager.java:1422) 在 android.view.View.getDisplayList(View.java:10406) 在 android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597) 在 android.view.View.getDisplayList( View.java:10380) 在 android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597) 在 android.view.View.getDisplayList(View.java:10380) 在 android.view.ViewGroup。dispatchGetDisplayList(ViewGroup.java:2597) at android.view.View.getDisplayList(View.java:10380) at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597) at android.view.View.getDisplayList(View.java :10380) 在 android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:875) 在 android.view.ViewRootImpl.draw(ViewRootImpl.java:1910) 在 android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)在 android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:137) 在 android.app。 ActivityThread.main(ActivityThread.java:4575) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:511) 在 com.android。internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) at dalvik.system.NativeStart.main(Native Method)

我的代码：

```
public Cursor fetchIncompleteAssignments(Short course) {
    DbAdapter adapter = new DbAdapter(context, null, Values.ASSIGNMENT_TABLE);
    adapter.open();

    Cursor r;
    if (course == null) // Fetching from all courses
        r = adapter.fetchAllWhere(Values.ASSIGNMENT_LIST_FETCH, Values.ASSIGNMENT_KEY_STATUS + "=" + 0, Values.ASSIGNMENT_KEY_DUE_DATE);
    else
        r = adapter.fetchAllWhere(Values.ASSIGNMENT_LIST_FETCH, Values.ASSIGNMENT_KEY_COURSE + "=" + course
            + " AND " + Values.ASSIGNMENT_KEY_STATUS + "=" + 0, Values.ASSIGNMENT_KEY_DUE_DATE);
    adapter.close();
    return r;
}

// Part of DbAdapter:
public DbAdapter open() throws SQLException {
    dbHelper = new DatabaseHelper(context);
    db = dbHelper.getWritableDatabase();
    return this;
}

public void close() {
    if (db != null) {
        try {
            db.close();
            dbHelper.close();
        } catch (NullPointerException e) {
            Log.e("Close", "Error: " + e + " " + e.getMessage());
        }
    } else
        Log.e("Close", "Error! db \"" + DATABASE_TABLE + "\" is null.");
} 
```

`Cursor`返回的 from用于`fetchAllAssignments()`通过`ListView`custom填充 a `CursorAdapter`。这`ListView`是 a 的内容`ListFragment`，并且在 ViewPager 的每个页面中显示此 ListFragment 的多个实例（一个用于显示所有课程的作业，然后是每个单独课程的页面）。

关于什么是错的任何想法？据我所知，我正在正确关闭我的数据库。如果您需要更多代码，请告诉我。提前致谢！

**编辑：**数据是从数据库中提取的，它也填充了 ListView。我可以在各个页面之间滑动，但每当片段停止时，它似乎就会崩溃。当我启动另一个 Activity 时，它经常会崩溃，但并非总是如此。当我浏览页面时，它偶尔也会崩溃，尽管很少见。这是我的 Fragment 的 onPause() 方法（我没有 onStop() 或 onDestroy()）：

```
public void onPause() {
    super.onPause();
    if (!assignmentsCursor.isClosed()) {
        assignmentsCursor.close();
        assignmentsCursor = null;
    }
} 
```

在我`onResume()`的中，我只是从数据库中重新加载列表并通过`getActivity()`. 也许某些东西正在被清除（出于记忆目的）并且我没有重新加载它？我没有收到任何类型的 NullPointerException，所以这对我来说似乎不太可能......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:05:40.560

这个异常实际上是因为您双重关闭数据库而引发的，而不是因为您没有关闭它。

所以..

在您`close()`的方法中，替换代码中的以下行：

```
if (db != null) { 
```

和：

```
if (db != null && db.isOpen()) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:33:32.740

`DbHelper`如[**本文**](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)所述，让您成为单身人士。

# android - 在片段之间切换

> ID：12702255
> 
> 赞同：0
> 
> 时间：2012-10-03T05:13:29.753
> 
> 标签：android, android-layout, android-fragments

在我的应用程序中，我使用双面板布局，其中左侧的每个按钮替换右侧的片段（框架布局）。

FragmentTransaction.replace() 方法实际上删除了当前的片段并添加了另一个片段，因此每次在片段之间切换时我都需要创建新实例。

如何保存片段实例并替换？或者无论如何可以在片段之间切换而不替换它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:17:10.287

您是否尝试过使用`FragmentTransaction#show()`and`FragmentTransaction#hide()`方法？

# javascript - JSON 在 IE 中不起作用

> ID：12702256
> 
> 赞同：1
> 
> 时间：2012-10-03T05:13:37.370
> 
> 标签：javascript, jquery, json

这是我用来从 PHP 获取 JSON 响应的代码：

```
(function() {

var bar = $('.bar');
var percent = $('.percent');
var status = $('#status');

$('#image-upload-form').ajaxForm({
    dataType: null,
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
        //console.log(percentVal, position, total);
    },
    complete: function(xhr) {
        status.html(xhr.responseText);
        var responseJSON = $.parseJSON(xhr.responseText);
        //var responseJSON = eval('('+xhr.responseText+')');

        /*var DOMElement = $(".progress-block-template").clone();
        var pagename = typeof($("#pagename").attr('value')=='undefined')?'':$("#pagename").attr('value');
        processingData(responseJSON,DOMElement,pagename);*/
    }
}); 

})(); 
```

这是使用打印时得到的响应`.html()`。

```
{
    "data": {
        "thumb_location": "http://XXXX.com/private/U/367/catalog/3/16285/thumbs/220x220.jpg?Expires=1349242125&Key-Pair-Id=APKAIGM4K33RYJKUHOXA&Signature=ptphhyF2GL6xe7xeosrzfKkpsXm7fWQAapcF3rjsZMuTwSCMhj2SZDIKtKGZ35-OJjTJ1LXu7wGEQlQvdKrBqT2oiOcPtL7etgTzRLe4~ub3KF64HhkglKv4DgzAWfvG5v8rNfmFvSja3HQ4K8m2o3h0Tl1uv7Lbwpqq0p71L5M_",
        "user_id": "367",
        "category_id": "3",
        "category_type": "worksample",
        "asset_id": 16285,
        "project_id": null,
        "file_name": "Chrysanthemum_37726.jpg",
        "size": 879394
    },
    "success": "true"
} 
```

但是，如果我这样做`$.parseJSON`或`eval`解析 JSON 响应，它会自行终止执行。这仅在 IE 中发生，并且在 FF 和 Chrome 中正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:18:46.737

数据类型应该是`json`

```
 dataType: "json", 
```

`IE`当您未指定数据类型时，会导致此问题。

并尝试更改`application/json; charset=utf8`为 plain `application/json`。

# java - 在 Java 中维护单独的应用程序时间？

> ID：12702264
> 
> 赞同：1
> 
> 时间：2012-10-03T05:14:15.683
> 
> 标签：java, javascript, date, datetime

我正在从 Eclipse 运行一个 Web 应用程序。在这个 Web 应用程序上，我想将当前日期和时间设置为 1992 年 11 月 24 日。格林威治标准时间 00:00。在此之后，我希望应用程序自动增加时间并跟踪日期、月份和年份。有什么办法可以在 Java/JSP 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:32:15.637

您应该存储“实际当前时间”和“过去当前时间”之间的差异，并在每次要检查过去时间时进行减法：

```
final class Past {
  private final long differenceMs;
  public Past(final Date pastDate) {
    this.differenceMs = (System.currentTimeMillis() - pastDate.getTime());
  }
  public Date getUpdatedPastDate() {
    return new Date(System.currentTimeMillis() - differenceMs);
  }
}

class Test {
  public static void main(String[] args) throws Throwable {
    final Calendar cal = Calendar.getInstance();
    cal.set(1992, 10, 24, 0, 0, 0); // this is 24/11/1992
    final Past past = new Past(cal.getTime());
    System.out.println(past.getUpdatedPastDate());
    Thread.sleep(2000);
    System.out.println(past.getUpdatedPastDate());
  }
} 
```

两者`println`应打印类似`Tue Nov 24 00:00:00 BRST 1992`和`Tue Nov 24 00:00:02 BRST 1992`（取决于您的语言环境）。

没有必要“自动递增”，没有多线程，类是不可变的（因此本质上是线程安全的）并且非常非常干净。

# iphone - 无法从 iOS 中的 SQLite 数据库中删除行？

> ID：12702266
> 
> 赞同：0
> 
> 时间：2012-10-03T05:14:35.810
> 
> 标签：iphone, xcode, ipad, sqlite

我正在使用此代码从 Sqlite3 数据库中删除行，但它不起作用，插入、更新、选择查询工作正常，但删除语句在我的代码中不起作用

```
 -(void)delete{

        str=title.text;
        sqlite3_stmt *selectstmt;
        if (sqlite3_open([path UTF8String], &database) == SQLITE_OK) {
            NSString *deleteSQL = [NSString stringWithFormat: @"delete from ToDo where title=\"%@\"",str];
            NSLog(@"%@",deleteSQL);
            const char *sql = [deleteSQL UTF8String];
            sqlite3_prepare_v2(database,sql, -1, &selectstmt, NULL); 
            if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) 
               NSLog(@"success");
            else
              NSAssert1(0, @"Error while creating delete statement. '%s'", sqlite3_errmsg(database));            
            }
            sqlite3_finalize(selectstmt);
            sqlite3_close(database);
        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:24:17.477

嗨看看它。

我认为您在传递参数时做错了。

**编辑：**

```
 str=title.text;
    [self openDatabase];//Logic to open database goes here
    sqlite3_stmt *stmt=nil;
    BOOL status=FALSE;

    NSString *deleteSQL = [NSString stringWithFormat: @"delete from ToDo where title='%@'",str];
    NSLog(@"%@",deleteSQL);
    const char *sql = [deleteSQL UTF8String];

   //const char *sql ="delete from ToDo where title='%@'";

   if(sqlite3_prepare_v2(db, sql, -1, &stmt, NULL) == SQLITE_OK)
   {
         sqlite3_bind_text(stmt, 1, [_testId UTF8String], -1, SQLITE_STATIC);

         if(SQLITE_DONE != sqlite3_step(stmt))
               { 
                 NSLog(@"Error while Deleting");
               }

    }
    sqlite3_finalize(stmt);
  [self closeDatabase];//Logic to close database goes here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T05:43:09.677

您可以使用以下代码从 sqlite 数据库中删除特定记录：-

```
NSDictionary *d =(NSDictionary *) [YourMutableArray objectAtIndex:0];
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [path objectAtIndex:0];
NSString *dbPath =[documentsDir stringByAppendingPathComponent:@"db.sqlite"];
sqlite3_open([dbPath UTF8String], &database);

if(deleteStmt == nil) 
{

    NSString *deleteStatementNS = [NSString stringWithFormat:
                                   @"delete from tbl_postoffice where type = '%@'",
                                   urusniqIDentifire];
    const char *sql = [deleteStatementNS UTF8String];

    //const char *sql ="delete from tbl_todo where type = yourDbfildeRecored";
    if(sqlite3_prepare_v2(database, sql, -1, &deleteStmt, NULL) != SQLITE_OK)
        NSAssert1(0, @"Error while creating delete statement. '%s'", sqlite3_errmsg(database));
}

//When binding parameters, index starts from 1 and not zero.
sqlite3_bind_text(deleteStmt, 1, [[d valueForKey:@"type"] UTF8String], -1, SQLITE_TRANSIENT);
if (SQLITE_DONE != sqlite3_step(deleteStmt)) 
    NSAssert1(0, @"Error while deleting. '%s'", sqlite3_errmsg(database));

sqlite3_reset(deleteStmt); 
```

希望它对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:22:35.763

是的@jason Coco 是正确的，您已经准备了两次声明，并且在准备声明之后也没有调用 step ..尝试在准备之后调用它：

```
if (sqlite3_step(selectstmt) == SQLITE_DONE)
{
    NSLog(@"success");
} 
```

# ruby-on-rails - 如何在 Rails 3 中显示验证错误？

> ID：12702270
> 
> 赞同：2
> 
> 时间：2012-10-03T05:14:56.433
> 
> 标签：ruby-on-rails, validation, activerecord

我有以下代码：

```
validates :username,:password, :presence => {:message => 'fields must not be blank'} 
```

但是当该字段为空白时，我无法收到错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T06:49:05.920

通过错误数组访问它们：

```
<model_instance>.errors 
```

然后，您可以通过执行以下操作单独访问消息：

```
model.errors.full_messages.each do |message|
  puts message
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:18:07.777

例如

```
def create
  @user = User.new(params[:user])
  if @user.valid? 
    logger.warn("====valid==========#{@user.error.full_messages.inspect}============")        
  else
    logger.warn("====error==========#{@user.error.full_messages.inspect}============")        
  end
end 
```

检查您的终端打印的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T08:26:35.767

虽然不确定，但这样的事情对我有用（只是一个示例场景）：

```
def create
  model_instance = Model.new
  begin
    if model_instance.save_model # custom save for model (if required)
      # code
    else
      # code
    end
  rescue
    p model_instance.errors # here you will be able to access them.
  end
end 
```

所以它没什么，只是引入了异常处理。

还有一个建议，问题中的代码行，如果**用户**名为空，则错误消息将是**“用户名字段不能为空”**，因此建议使用单数错误消息:)

希望它会有所帮助！

# .htaccess - 如何编写一个 htaccess 规则，在 url 中添加一个尾部正斜杠？

> ID：12702272
> 
> 赞同：1
> 
> 时间：2012-10-03T05:15:02.010
> 
> 标签：.htaccess

比如对于`www.example.com/foo/dosomething/`，我有这样一个htaccess文件：

```
RewriteEngine On

RewriteRule ^dosomething/$ myfile.php [L] 
```

这个 htaccess 文件在我的 foo 目录中，它实际上是存在的。但后来我意识到，输入 url 的用户可能会忘记结尾的正斜杠，所以他们可能会输入这个：`www.example.com/foo/dosomething`，然后他/她会得到一个 404。我不希望这样，所以我写了这个：

```
RewriteRule ^dosomething/$ myfile.php [L] 
```

但后来我想起这对 SEO 不友好，因为两个“网页”具有完全相同的内容。所以我现在想要的是，如果 url 在末尾没有尾部正斜杠，那么 htaccess 可以重定向，例如：`www.example.com/foo/dosomething`to `www.example.com/foo/dosomething/`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:22:59.467

尝试：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+[^/])$ /foo/$1/ [L,R=301] 
```

在你的`myfile.php`统治之前。301 重定向将确保搜索引擎索引将等同于 2 个 URL。

# mongodb - 加快 MongoDB 查询

> ID：12702273
> 
> 赞同：0
> 
> 时间：2012-10-03T05:15:07.997
> 
> 标签：mongodb

我正在对我的 MongoDB 服务器进行一些分析和优化，发现我 99% 的慢查询（根据[Database Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)超过 100 毫秒）是由于我的 node.js 代码中的单个查询造成的。

首先，这是我对缓存进行建模的方式（通过猫鼬）：

```
{
                    '_id':                      { type: String, unique: true},
                    'group':                    { type: String, index: true },
                    'post_time_msec':           { type: Number, index: true },
                    'stream_type':              { type: String },
                    'stream_name':              { type: String },
                    'stream_id':                { type: String },
                    'stream_key':               { type: String },
                    'last_updated':             { type: Date },
                    'data':                     {},
                    'bookmarks':                { type: Number },
                } 
```

现在，对于我的查询很慢。我寻找属于某个“组”字段的对象。也就是说，我想找到一个组中所有对象的“post_time_msec”，这样我就可以判断是否需要更新这些对象。

node.js 和 mongo 中的查询如下所示：

```
var thegroup = ... // this is set earlier
model.find({'group': thegroup}, {'_id': true, 'post_time_msec': true}, {'limit': 300, 'sort': {'post_time_msec': -1}}); 
```

我也经常清理集合，当集合中有超过 300 个属于某个组时删除额外的对象（这样，查询不应该查看数千条记录......）

当我查看 mongo profiler 时，这里有一个查询运行缓慢的示例：

```
{ "ts" : ISODate("2012-10-03T05:00:29.802Z"), "op" : "query", "ns" : "streamified.postcaches", "query" : { "query" : { "group" : "network/group/2934jq98239oeu1" }, "orderby" : { "post_time_msec" : -1 } }, "ntoreturn" : 300, "nscanned" : 305, "scanAndOrder" : true, "nreturned" : 300, "responseLength" : 31520, "millis" : 985, "client" : "10.179.35.87", "user" : "" } 
```

如您所见，此查询花费了将近 1 秒的时间来完成。它只扫描了 305 行，只返回了 2 个字段，并且所有的查询字段都被索引了。

我错过了什么吗？

# linux - 在 Hp-Unix 中获取可用 shell 以及版本号的命令是什么？

> ID：12702278
> 
> 赞同：0
> 
> 时间：2012-10-03T05:15:26.530
> 
> 标签：linux, shell, unix

我是 unix 新手。我正在寻找可以显示 shell 版本的命令。我可以使用该命令找到可用的 shell，`ls /bin/*sh*`但我找不到可以显示版本的命令...

请帮忙。另外让我知道是否可以在 AIX/Solaris Unix 上运行相同的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:24:44.113

可能有一些环境变量用于显示版本：对于 bash 我使用以下来获取版本：

`[mandy@mandy mpix]$ echo $BASH_VERSION`

`3.2.25(1)-release`

或只需运行`shell_name --version`命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:46:32.273

没有标准方法可以查询 Unix 可执行文件的版本。每个命令都有自己的方法。有些人使用该`--version`选项，有些人使用`-v`. 使用 shell，其中一些在不启动 shell 的情况下无法查询版本。当您在 shell 中时，您可以尝试使用命令查找版本

```
set | grep -i version 
```

**[编辑]**作为最后的手段，您可以查看操作系统的系统手册。许多 Unix 系统使用某种包管理软件。找出安装了可执行文件的软件包。然后包管理器应该能够告诉你包的版本。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-03T07:15:28.533

当你做错事时，这些口译员肯定会大声喊叫。

所以这样做，

> 美国广播公司

zsh：找不到命令：abc

# svn - 两个分支之间的 SVN 合并 - “找不到路径”

> ID：12702284
> 
> 赞同：19
> 
> 时间：2012-10-03T05:15:48.530
> 
> 标签：svn, version-control, merge

我有两个分支（主干的子级）需要合并到一个分支中进行测试，但它们不能进入主干。两个分支都是最新的trunk@HEAD。所以我想从这个开始：

```
__________________trunk
  \___duck   \
              \___beaver 
```

对此：

```
__________________________trunk
  \
   \______________platypus 
```

我从最新版本的树干创建了分支鸭嘴兽，并试图将鸭子和海狸合并到这个新的树干副本中：

```
svn copy ^/trunk ^/branches/platypus;
svn switch ^/branches/platypus;
svn merge --reintegrate ^/branches/duck;
svn merge --reintegrate ^/branches/beaver; 
```

但合并操作失败

```
svn: '/blah/!svn/bc/12047/repo/branches/duck' path not found 
```

如果我尝试将鸭子（或海狸）重新整合到树干中，它可以正常工作。我在这里想念什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-09-03T08:24:12.450

我遇到了同样的错误，并且能够通过**手动指定**我想要合并的所有修订号来解决它，而不是让 SVN 决定。正如预期的那样，这允许合并继续并提示我合并冲突。

我使用 TortoiseSVN 手动选择修订版，但我认为使用 SVN 命令行会是这样的：

```
svn log --stop-on-copy https://svn.blah/svn/proj1/branches/xyz 
```

然后记下所有修订号并一次性合并它们，例如：

```
svn merge -c123,124,156,159 https://svn.blah/svn/proj1/branches/xyz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T03:47:59.220

我在重新集成从另一个分支合并的分支时遇到了类似的问题（本身现在已重新集成）。像这样：

```
-----------------------------r7------------------
  \                         /             /ERROR !svn/bc/4/repo/branches/duck' path not found
   r1----dinosaur--r5-------             /
                    \---duck------------r9 
```

似乎无法重新集成鸭子，找不到路径错误抱怨 r4 - 但我可以将特定修订版（r5-r9）从鸭子合并回主干。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-20T14:39:32.123

发生这种情况是因为 SVN 不知道要合并哪些修订，可能是因为合并信息丢失或损坏。

通过比较日志找到两个分支之间的共同祖先（最高版本 X 的共同提交）：

```
svn log duck > dlog.txt
svn log beaver > blog.txt 
```

合并从版本 X 到当前头的所有更改：

```
svn switch duck    # if you are not already on it
svn merge -r X:HEAD beaver
# Merge conflicts
svn commit 
```

注意：接受的答案建议使用`--stop-on-copy`来查找共同祖先。虽然有时这可能会找到正确的修订版（例如，分支`duck`和`beaver`分支的来源，但如果在创建分支后在任何分支中`trunk`进行过任何操作，它不会为您提供共同的祖先`svn copy`。如果您知道这从未发生过, 然后你可以使用`--stop-on-copy`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-10T13:52:07.307

我解决了这个问题：

1.  将有问题的分支合并到主干

2.  从主干创建新的“合并”分支

3.  将主干恢复到步骤 1 之前的状态并提交恢复

4.  仅将步骤 3 中的记录合并到分支中

5.  通过将新的合并分支合并回主干进行测试，但当然没有提交

最终结果是一个新分支，其中包含未更改的功能分支和主干的更改（但遗憾的是日志中有一些新条目）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-03T05:24:23.230

在进行合并时尝试使用[--ignore-ancestry选项。](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.advanced.html#svn.branchmerge.advanced.ancestrythe)可能是合并历史不完整（可能是由于乌龟或任何客户对此事实），并且当您进行“正常”合并时，在分支上所做的某些事情正试图应用于工作副本。

# .net - wpf缩小窗口

> ID：12702287
> 
> 赞同：1
> 
> 时间：2012-10-03T05:16:46.230
> 
> 标签：.net, wpf, xaml

我如何简单地缩小窗口 wpf。我不想要任何滑块控件，我想要的只是在程序执行时慢慢缩小窗口。我会很感激 XAML 中的一段代码。

我正在使用带有 .NET 3.5 的 VS 2010。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:28:41.423

```
<Window
   x:Name="window"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   AllowsTransparency="True"
   SizeToContent="WidthAndHeight"
   WindowStyle="None">
   <Canvas x:Name="grid">
      <Canvas.RenderTransform>
         <ScaleTransform x:Name="zoom" ScaleX="1" ScaleY="1" />
      </Canvas.RenderTransform>
      <Canvas.Triggers>
         <EventTrigger RoutedEvent="Loaded">
            <EventTrigger.Actions>
               <BeginStoryboard>
                  <Storyboard>
                     <DoubleAnimation
                        Duration="00:00:03"
                        From="400"
                        Storyboard.TargetName="grid"
                        Storyboard.TargetProperty="Height"
                        To="200"/>
                     <DoubleAnimation
                        Duration="00:00:03"
                        From="400"
                        Storyboard.TargetName="grid"
                        Storyboard.TargetProperty="Width"
                        To="200"/>
                     <DoubleAnimation
                        Duration="00:00:03"
                        From="1"
                        Storyboard.TargetName="zoom"
                        Storyboard.TargetProperty="ScaleX"
                        To="0.5"/>
                     <DoubleAnimation
                        Duration="00:00:03"
                        From="1"
                        Storyboard.TargetName="zoom"
                        Storyboard.TargetProperty="ScaleY"
                        To="0.5"/>
                  </Storyboard>
               </BeginStoryboard>
            </EventTrigger.Actions>
         </EventTrigger>
      </Canvas.Triggers>
      <StackPanel Width="200" Height="200">
         <Button>Hello world!</Button>
         <ListBox>
            <ListBoxItem>One</ListBoxItem>
            <ListBoxItem>Two</ListBoxItem>
            <ListBoxItem>Three</ListBoxItem>
         </ListBox>
      </StackPanel>
   </Canvas>
</Window> 
```

# php - 在文本框/文本区域上输入时如何获取网站图像 url

> ID：12702288
> 
> 赞同：0
> 
> 时间：2012-10-03T05:16:45.457
> 
> 标签：php, image

我正在尝试在输入时从网站获取图像，`textbox/textarea`但我很难使用它。

基本上，就像`facebook`您尝试共享网址一样。**Facebook 从该URL**中提取图像并将其粘贴到下面的某个位置。我想做类似的事情，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:09:03.850

按照这个。可能这就是你需要[从 url 中提取的图像](http://www.99points.info/2010/07/facebook-like-extracting-url-data-with-jquery-ajax-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:21:00.053

可能这对你有帮助

```
$contents= file_get_contents('http://mydomain.com/folder/image.jpg'); 
```

这里[http://mydomain.com/folder/image.jpg](http://mydomain.com/folder/image.jpg)来自文本框或文本区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:23:49.627

假设您将 URL 输入到 input/textarea 中，您将不得不做几件事。站点的 file_get_contents，然后是图像的 src 的 preg_match_all。然后，您需要用户允许他们想要选择哪个图像（google+ 在这方面做得很好）。这最好由 ajax 提供。

# eclipse - eclipse 4 应用程序部分未出现

> ID：12702290
> 
> 赞同：0
> 
> 时间：2012-10-03T05:16:50.950
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在尝试学习eclipse 4应用程序开发，我通过应用程序模型添加了我的应用程序的一部分，但该部分没有显示出来。 ![在此处输入图像描述](../Images/679acc00964f112266da43e4cedf0c47.png)
零件类：

```
import javax.inject.Inject;
import org.eclipse.e4.ui.di.Focus;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Label;
@SuppressWarnings("all")
public class ObjectEditor {
    @Inject
    public ObjectEditor(Composite parent) {
        parent.setLayout(new FillLayout());
        new Label(parent, SWT.NONE).setText("hello e4");
    }

    @Focus
    public void onFocus() {
        //TODO Your code here
    }

} 
```

怎么了 ？
**编辑 - - - - - - - - - - - - - - - - - - - - - - - - - --------------------**

我发现，我更改应用程序模型（Application.e4xmi 文件）后，我的项目运行时文件夹中的 workbench.xmi 没有更新，我错过了哪一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:35:17.743

也许您忘记添加以添加`-clearPersistedState`到启动配置的程序参数中？

# iphone - 在循环中删除所有带有其他实例视图的 viewController

> ID：12702292
> 
> 赞同：0
> 
> 时间：2012-10-03T05:17:05.123
> 
> 标签：iphone, objective-c, view, uiviewcontroller

我有显示的`webViews`选项卡和一个显示`viewController`元素的选项卡。当我按下后退按钮时，我删除了所有`viewController`+other`views`并`tags`创建了它们，如下所示：

```
 imageGame *appDelegate = (imageGame *)[UIApplication sharedApplication].delegate;
    UIActivityIndicatorView *bgImage = (UIActivityIndicatorView*) [appDelegate.viewController.view viewWithTag:7];

[bgImage removeFromSuperview];
 [appDelegate.viewController dismissModalViewControllerAnimated:YES]; 
```

并且它工作正常，但是如果我每次使用相同的标签创建新实例时一次又一次地触摸它，但是当我使用我的代码删除它们时，它并没有删除所有这些，可能只有其中一个......

我怎样才能用类似的逻辑删除所有这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:26:00.553

这样做从 viewController 中删除所有 webViews 添加以下代码：

```
 for (id subview in self.view.subviews) {
  if([subview isKindOfClass:[UIWebView class]]) //remove only buttons
  {
     [subview removeFromSuperview];
    // or use below to remove specific tag UIWebView
    if(subview.tag == 999){ 
    [subview removeFromSuperview];
    }
  }
 } 
```

# node.js - node.js 的 config.yaml 中 Heroku 环境变量的语法？

> ID：12702293
> 
> 赞同：4
> 
> 时间：2012-10-03T05:17:09.023
> 
> 标签：node.js, heroku, yaml, mlab

我试过使用：

```
db:
  uri: process.env.MONGOLAB_URI 
```

但这似乎不起作用。（编辑：事实上，这只是返回“process.env.MONGOLAB_URI”的字符串）我也试过：

```
<%= ENV['MONGOLAB_URI'] %> 
```

但我在一篇关于 ruby​​ 应用程序中的 yaml 的文章中看到了这一点（现在找不到链接）。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-18T14:06:02.920

`db: uri: #{process.env.MONGOLAB_URI}`

学分：[https ://github.com/vngrs/konfig](https://github.com/vngrs/konfig)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T17:39:09.730

我相信 config.yaml 示例适用于特定的 Ruby 驱动程序。`process.env.MONGOLAB_URI`对于 Node.js，您希望使用您认为最方便的任何配置方法将 URI（位于）提供给您选择的 Node 驱动程序。

例如，如果您想使用[Node MongoDB Native 驱动程序](https://github.com/mongodb/node-mongodb-native)，您可以执行以下操作：

```
var mongodb = require('mongodb');
mongodb.Db.connect(process.env.MONGOLAB_URI, function (err, db) {
    // Do something cool with the db
}); 
```

# iphone - WCF Json 解析

> ID：12702296
> 
> 赞同：0
> 
> 时间：2012-10-03T05:17:10.663
> 
> 标签：iphone, ios, ios5, ios4

是否有在目标 C 中解析 WCF Json 的直接方法。如果可以，请提供合适的链接或代码。对不起，我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:20:00.570

这是演示目标 C 中 JSON 服务消耗的链接。[http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c](http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c)

基本上调用 WCF json 服务需要您首先构建 JSON wcf 服务，然后在 Objective C 代码中使用 URL 使用它。

对于从 iPhone 调用 JSON 网络服务，有一个 iPhone JSON 库，我认为这正是您所需要的。它被称为 JSON-Framework ，一个用于 Objective-C 的严格的 JSON 生成器和解析器。

你可以从谷歌代码下载它： [http ://code.google.com/p/json-framework/](http://code.google.com/p/json-framework/)

在这里，我为您找到了有关如何在 iPhone 上通过 HTTP 使用 JSON 的详细教程：

教程：iPhone 上基于 HTTP 的 JSON [http://www.mobileorchard.com/tutorial-json-over-http-on-the-iphone/](http://www.mobileorchard.com/tutorial-json-over-http-on-the-iphone/)

还请检查[iPhone 消费 RESTful WCF 服务](https://stackoverflow.com/questions/1004553/iphone-consuming-restful-wcf-service?rq=1)答案以在 Objective C 中消费 WCF 休息服务以进行 Iphone 应用程序开发。

# visual-studio-2010 - Visual Studio 中创建属性函数的快捷方式

> ID：12702297
> 
> 赞同：2
> 
> 时间：2012-10-03T05:17:12.503
> 
> 标签：visual-studio-2010

谁能告诉我 Visual Studio 上下文菜单的 Create - Property 功能的快捷方式。我知道 Create - Method 的快捷方式是 CTRL + K + M，但我找不到类似的快捷方式来创建属性。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:54:00.027

经过一番探索，我发现这个命令没有设置默认的快捷方式。它可以在 Visual Studio 选项对话框中设置（工具 -> 选项 -> 环境\键盘）命令称为“Edit.GenerateProperty”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:29:30.217

键入`prop`，您可以`prop`在智能中看到并输入`prop`一个....然后，您可以根据您的选择更改属性名称及其类型（默认类型为`Type`，默认属性 naem 为`type`），如下所示：

```
public TYPE Type { get; set; } 
```

添加属性的另一种方法是`Ctrl + R, Ctrl+E`在光标位于字段周围时按...。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:21:40.597

请检查以下链接

[http://www.itscodingtime.com/post/Visual-Studio-2010-Keyboard-Mouse-Shortcuts.aspx](http://www.itscodingtime.com/post/Visual-Studio-2010-Keyboard-Mouse-Shortcuts.aspx)

希望，它可能对你有所帮助。

**编辑：** 这里已经讨论了这个主题 [在 Visual Studio 中创建属性的快捷方式？](https://stackoverflow.com/questions/3871270/short-cut-to-create-properties-in-visual-studio)

# android - android 手机通过 USB 端口安装桌面分区（在磁盘级别反向 USB 共享？）

> ID：12702299
> 
> 赞同：1
> 
> 时间：2012-10-03T05:17:43.063
> 
> 标签：android, linux-kernel, usb, mount

我想知道是否可以告诉android手机的Linux内核将桌面分区挂载为手机文件系统的一部分，而这款手机通过USB连接到桌面。

我是否必须修改内核才能做到这一点，如果是这样，它有多难？我知道从桌面安装 USB 驱动器是每个 Linux 的标准功能。但是我不太确定 USB 通信是否足够对称，以便反过来（为手机安装桌面磁盘可以轻松实现。

在某种意义上，这类似于反向 USB 网络共享 ( [http://blog.mycila.com/2010/06/reverse-usb-tethering-with-android-22.html](http://blog.mycila.com/2010/06/reverse-usb-tethering-with-android-22.html) )。但是我不想让手机使用主机的网络连接，而是让手机使用主机的磁盘。

有人对此有一些想法吗？

编辑：

我想这样做是因为为了试验一些东西，我需要假装我的手机有一个超快的 sdcard（比市场上可用的快），所以我想通过桌面 ramdisk（基本上是内存中的磁盘）来模拟它

更新：

经过一番搜索，我发现使用这两种产品：主机到主机 USB 电缆： [http](https://rads.stackoverflow.com/amzn/click/com/B005OTPVMY) ://www.amazon.com/Plugable-USB-Easy-Transfer-Cable/dp/B005OTPVMY/ref=pd_sim_sbs_pc_1 和USB OTG 电缆： [http ://www.amazon.com/T-Flash-Adapter-Samsung-GT-i9100-GT-N7000/dp/B005FUNYSA](https://rads.stackoverflow.com/amzn/click/com/B005FUNYSA)

我可以将支持 USB-OTG 的手机变成 USB 主机，并使用在计算机上运行的任何 USB 驱动程序。我不确定在这两个转换之后我会得到什么速度？任何人都可以对此发表评论吗？或者我可以以某种方式将这两个适配器组合成一根“A 到 OTG 电缆”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:52:24.787

我在 linux-usb 邮件列表上与 linux-usb 开发人员进行了讨论，得到了满意的答复。基本上我需要一个 PLX net2282 卡来把我的桌面变成一个 USB 从设备，然后在上面运行 USB gadget 驱动程序。

详细信息可以在这里找到： [http ://www.spinics.net/lists/linux-usb/msg72012.html](http://www.spinics.net/lists/linux-usb/msg72012.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:21:03.850

Android 设备的外部文件系统只能是 SD 卡。据我所知，这是不可能的。Android 期望其文件系统仅在 SD 卡上。

# java - 在java中使用带有服务器的html5客户端

> ID：12702305
> 
> 赞同：8
> 
> 时间：2012-10-03T05:18:31.237
> 
> 标签：java, html, webserver, client, websocket

HTML5 客户端通过在 html5 websocket 客户端中提供客户端来减少程序员的工作量。学习如何在 java 中将这个 html5 websocket 客户端与服务器一起使用对许多程序员来说都是有益的。

我想创建一个与 java 服务器通信的**HTML5 客户端**示例，但我无法找到如何做到这一点的方法。任何人都可以点亮它吗？

参考：[使用 c++ 演示 html5 客户端/服务器](http://www.codeproject.com/Articles/443660/Building-a-basic-HTML5-client-server-application)

我在[http://java.dzone.com/articles/creating-websocket-chat](http://java.dzone.com/articles/creating-websocket-chat)上找到了一个演示，但它对我不起作用..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-20T00:42:06.270

我已经实现了一个*简单*的java 服务器端示例，我们可以看看。我首先创建一个 ServerSocket，它侦听端口 2005 上的连接

```
public class WebsocketServer {

public static final int MASK_SIZE = 4;
public static final int SINGLE_FRAME_UNMASKED = 0x81;
private ServerSocket serverSocket;
private Socket socket;

public WebsocketServer() throws IOException {
    serverSocket = new ServerSocket(2005);
    connect();
}

private void connect() throws IOException {
    System.out.println("Listening");
    socket = serverSocket.accept();
    System.out.println("Got connection");
    if(handshake()) {
         listenerThread();
    }
} 
```

正如[RFC 标准中定义的 websocket 协议](https://www.rfc-editor.org/rfc/rfc6455)，当客户端通过 websocket 连接时，必须进行*握手。*因此，让我们看一下 handshake() 方法，它非常丑陋，因此将逐步完成：第一部分读取客户端握手。

```
private boolean handshake() throws IOException {
    PrintWriter out = new PrintWriter(socket.getOutputStream());
    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    //This hashmap will be used to store the information given to the server in the handshake
    HashMap<String, String> keys = new HashMap<>();
    String str;
    //Reading client handshake, handshake ends with CRLF which is again specified in the RFC, so we keep on reading until we hit ""...
    while (!(str = in.readLine()).equals("")) {
        //Split the string and store it in our hashmap
        String[] s = str.split(": ");
        System.out.println(str);
        if (s.length == 2) {
            keys.put(s[0], s[1]);
        }
    } 
```

根据 RFC - 第 1.2 节，客户端握手看起来像这样（这是 chrome 给我的，版本 22.0.1229.94 m）！

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: localhost:2005
Origin: null
Sec-WebSocket-Key: PyvrecP0EoFwVnHwC72ecA==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

现在我们可以使用键映射在握手过程中创建相应的响应。引用 RFC：

> 为了证明握手被接收，服务器必须获取两条信息并将它们组合起来形成响应。第一条信息来自|Sec-WebSocket-Key| 客户端握手中的标头字段。对于此标头字段，服务器必须获取该值并将其与全局唯一标识符“258EAFA5-E914-47DA-95CA-C5AB0DC85B11”以字符串形式连接起来，不理解WebSocket 协议。然后在服务器的握手中返回此连接的 SHA-1 哈希（160 位），base64 编码。

所以这就是我们必须做的！将 Sec-WebSocket-Key 与魔术字符串连接，使用 SHA-1 哈希函数对其进行哈希处理，然后对其进行 Base64 编码。这就是下一个丑陋的单线所做的。

```
String hash;
try {
    hash = new BASE64Encoder().encode(MessageDigest.getInstance("SHA-1").digest((keys.get("Sec-WebSocket-Key") + "258EAFA5-E914-47DA-95CA-C5AB0DC85B11").getBytes()));
} catch (NoSuchAlgorithmException ex) {
    ex.printStackTrace();
    return false;
} 
```

然后，我们只需在“Sec-WebSocket-Accept”字段中创建新的哈希返回预期的响应。

```
 //Write handshake response
    out.write("HTTP/1.1 101 Switching Protocols\r\n"
            + "Upgrade: websocket\r\n"
            + "Connection: Upgrade\r\n"
            + "Sec-WebSocket-Accept: " + hash + "\r\n"
            + "\r\n");
    out.flush();

    return true; 
```

}

我们现在已经成功地在客户端和服务器之间建立了 websocket 连接。所以现在怎么办？我们如何让他们互相交谈？我们可以从服务器向客户端发送消息开始。注意！从这一点开始，我们不再使用 HTTP 与客户端对话。现在我们必须通信发送纯字节，并解释传入的字节。那么我们该怎么做呢？

来自服务器的消息必须采用称为“帧”的特定格式，如 RFC - 5.6 节中所述。当从服务器发送消息时，RFC 声明第一个字节必须指定它是什么类型的帧。一个值为 0x81 的字节告诉客户端我们正在发送一条“单帧无屏蔽文本消息”，它基本上是 - 一条文本消息。后续字节必须表示消息的长度。紧随其后的是数据或有效负载。好吧，好吧......让我们实现它！

```
public void sendMessage(byte[] msg) throws IOException {
        System.out.println("Sending to client");
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        BufferedOutputStream os = new BufferedOutputStream(socket.getOutputStream());
        //first byte is kind of frame
        baos.write(SINGLE_FRAME_UNMASKED);

        //Next byte is length of payload
        baos.write(msg.length);

        //Then goes the message
        baos.write(msg);
        baos.flush();
        baos.close();
        //This function only prints the byte representation of the frame in hex to console
        convertAndPrint(baos.toByteArray());

        //Send the frame to the client
        os.write(baos.toByteArray(), 0, baos.size());
        os.flush();
} 
```

因此，要向客户端发送消息，我们只需调用 sendMessage("Hello, client!".getBytes())。

那不是太难了吗？接收来自客户端的消息怎么样？好吧，它有点复杂，但坚持下去！

来自客户端的帧 sendt 的结构*几乎*与来自服务器的帧 sendt 的结构相同。第一个字节是消息类型，第二个字节是有效载荷长度。然后有一个区别：接下来的四个字节代表一个*掩码*。什么是掩码，为什么来自客户端的消息被屏蔽，而服务器消息却没有？从 RFC - 第 5.1 节，我们可以看到：

> ...客户端必须屏蔽它发送给服务器的所有帧...服务器不能屏蔽它发送给客户端的任何帧。

所以简单的答案是：我们必须这样做。那么为什么我们必须这样做，你可能会问？[我不是告诉过你阅读 RFC 吗？](https://www.rfc-editor.org/rfc/rfc6455#section-5.3)

继续前进，在帧中的四字节掩码之后，被*掩码*的有效载荷紧随其后。还有一件事，客户端必须将帧中最左边的第 9 位设置为 1，以告诉服务器消息已被屏蔽（查看 RFC 中整洁的 ASCII-art 帧 - 第 5.2 节）。最左边的第 9 位对应于我们第二个字节中的最左边的位，但是嘿，那是我们的有效载荷长度字节！这意味着来自我们客户端的所有消息的有效负载长度字节等于 0b10000000 = 0x80 + 实际有效负载长度。因此，要找出真正的有效载荷长度，我们必须从有效载荷长度字节（帧中的第二个字节）中减去 0x80、128 或 0b10000000（或您可能喜欢的任何其他数字系统）。

哇，好吧..听起来很复杂...对于“TLDR”-伙计们，摘要：从第二个字节中减去 0x80 以获得有效负载长度...

```
public String reiceveMessage() throws IOException {
    //Read the first two bytes of the message, the frame type byte - and the payload length byte
    byte[] buf = readBytes(2);
    System.out.println("Headers:");
    //Print them in nice hex to console
    convertAndPrint(buf);
    //And it with 00001111 to get four lower bits only, which is the opcode
    int opcode = buf[0] & 0x0F;

    //Opcode 8 is close connection
    if (opcode == 8) {
        //Client want to close connection!
        System.out.println("Client closed!");
        socket.close();
        System.exit(0);
        return null;
    } 
    //Else I just assume it's a single framed text message (opcode 1)
    else {
        final int payloadSize = getSizeOfPayload(buf[1]);
        System.out.println("Payloadsize: " + payloadSize);

        //Read the mask, which is 4 bytes, and than the payload
        buf = readBytes(MASK_SIZE + payloadSize);
        System.out.println("Payload:");
        convertAndPrint(buf);
        //method continues below! 
```

现在我们已经阅读了整个消息，是时候揭开它的面具了，这样我们就可以对有效负载有所了解了。为了取消屏蔽它，我创建了一个方法，该方法将屏蔽和有效负载作为参数，并返回解码后的有效负载。所以调用是通过以下方式完成的：

```
 buf = unMask(Arrays.copyOfRange(buf, 0, 4), Arrays.copyOfRange(buf, 4, buf.length));
    String message = new String(buf);
    return message;
    }
} 
```

现在的 unMask 方法相当甜蜜和微小

```
private byte[] unMask(byte[] mask, byte[] data) {
        for (int i = 0; i < data.length; i++) {
              data[i] = (byte) (data[i] ^ mask[i % mask.length]);
        }
        return data;
} 
```

getSizeOfPayload 也是如此：

```
private int getSizeOfPayload(byte b) {
    //Must subtract 0x80 from (unsigned) masked frames
    return ((b & 0xFF) - 0x80);
} 
```

就这样！您现在应该能够使用纯套接字进行双向通信。为了完整起见，我将添加完整的 Java 类。它能够使用 websockets 与客户端接收和发送消息。

```
package javaapplication5;

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Arrays;
import java.util.HashMap;
import sun.misc.BASE64Encoder;

/**
 *
 * @author
 * Anders
 */
public class WebsocketServer {

    public static final int MASK_SIZE = 4;
    public static final int SINGLE_FRAME_UNMASKED = 0x81;
    private ServerSocket serverSocket;
    private Socket socket;

    public WebsocketServer() throws IOException {
    serverSocket = new ServerSocket(2005);
    connect();
    }

    private void connect() throws IOException {
    System.out.println("Listening");
    socket = serverSocket.accept();
    System.out.println("Got connection");
    if(handshake()) {
        listenerThread();
    }
    }

    private boolean handshake() throws IOException {
    PrintWriter out = new PrintWriter(socket.getOutputStream());
    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    HashMap<String, String> keys = new HashMap<>();
    String str;
    //Reading client handshake
    while (!(str = in.readLine()).equals("")) {
        String[] s = str.split(": ");
        System.out.println();
        System.out.println(str);
        if (s.length == 2) {
        keys.put(s[0], s[1]);
        }
    }
    //Do what you want with the keys here, we will just use "Sec-WebSocket-Key"

    String hash;
    try {
        hash = new BASE64Encoder().encode(MessageDigest.getInstance("SHA-1").digest((keys.get("Sec-WebSocket-Key") + "258EAFA5-E914-47DA-95CA-C5AB0DC85B11").getBytes()));
    } catch (NoSuchAlgorithmException ex) {
        ex.printStackTrace();
        return false;
    }

    //Write handshake response
    out.write("HTTP/1.1 101 Switching Protocols\r\n"
        + "Upgrade: websocket\r\n"
        + "Connection: Upgrade\r\n"
        + "Sec-WebSocket-Accept: " + hash + "\r\n"
        + "\r\n");
    out.flush();

    return true;
    }

    private byte[] readBytes(int numOfBytes) throws IOException {
    byte[] b = new byte[numOfBytes];
    socket.getInputStream().read(b);
    return b;
    }

    public void sendMessage(byte[] msg) throws IOException {
    System.out.println("Sending to client");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    BufferedOutputStream os = new BufferedOutputStream(socket.getOutputStream());
    baos.write(SINGLE_FRAME_UNMASKED);
    baos.write(msg.length);
    baos.write(msg);
    baos.flush();
    baos.close();
    convertAndPrint(baos.toByteArray());
    os.write(baos.toByteArray(), 0, baos.size());
    os.flush();
    }

    public void listenerThread() {
    Thread t = new Thread(new Runnable() {
        @Override
        public void run() {
        try {
            while (true) {
            System.out.println("Recieved from client: " + reiceveMessage());
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
        }
    });
    t.start();
    }

    public String reiceveMessage() throws IOException {
    byte[] buf = readBytes(2);
    System.out.println("Headers:");
    convertAndPrint(buf);
    int opcode = buf[0] & 0x0F;
    if (opcode == 8) {
        //Client want to close connection!
        System.out.println("Client closed!");
        socket.close();
        System.exit(0);
        return null;
    } else {
        final int payloadSize = getSizeOfPayload(buf[1]);
        System.out.println("Payloadsize: " + payloadSize);
        buf = readBytes(MASK_SIZE + payloadSize);
        System.out.println("Payload:");
        convertAndPrint(buf);
        buf = unMask(Arrays.copyOfRange(buf, 0, 4), Arrays.copyOfRange(buf, 4, buf.length));
        String message = new String(buf);
        return message;
    }
    }

    private int getSizeOfPayload(byte b) {
    //Must subtract 0x80 from masked frames
    return ((b & 0xFF) - 0x80);
    }

    private byte[] unMask(byte[] mask, byte[] data) {
    for (int i = 0; i < data.length; i++) {
        data[i] = (byte) (data[i] ^ mask[i % mask.length]);
    }
    return data;
    }

    private void convertAndPrint(byte[] bytes) {
    StringBuilder sb = new StringBuilder();
    for (byte b : bytes) {
        sb.append(String.format("%02X ", b));
    }
    System.out.println(sb.toString());
    }

    public static void main(String[] args) throws IOException, InterruptedException, NoSuchAlgorithmException {
    WebsocketServer j = new WebsocketServer();
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    while (true) {
        System.out.println("Write something to the client!");
        j.sendMessage(br.readLine().getBytes());
    }
    }
} 
```

以及一个简单的 html 客户端：

```
<!DOCTYPE HTML>
<html>
<body>

<button type="button" onclick="connect();">Connect</button>
<button type="button" onclick="connection.close()">Close</button>

<form>
<input type="text" id="msg" />

<button type="button" onclick="sayHello();">Say Hello!</button>

<script>
var connection;

function connect() {
    console.log("connection");
    connection = new WebSocket("ws://localhost:2005/");
    // Log errors
connection.onerror = function (error) {
  console.log('WebSocket Error ');
  console.log(error);

};

// Log messages from the server
connection.onmessage = function (e) {
  console.log('Server: ' + e.data); 
  alert("Server said: " + e.data);
};

connection.onopen = function (e) {
console.log("Connection open...");
}

connection.onclose = function (e) {
console.log("Connection closed...");
}
}

function sayHello() {
    connection.send(document.getElementById("msg").value);
}

function close() {
    console.log("Closing...");
    connection.close();
}
</script>
</body>

</html> 
```

希望这会澄清一些事情，并且我对此有所了解:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T08:21:48.877

使用来自客户端的 jQuery ajax 请求，并在服务器端使用休息服务。
这里关于使用 Rest Service 创建战争模块

[第一条（休息服务）](http://www.vogella.com/articles/REST/article.html)

这里是关于 jQuery ajax

[第 2 条（jQuery Ajax）](http://api.jquery.com/jQuery.ajax/)

要编写 Java 套接字服务器，您只需要创建主程序

```
 try
  {
     final ServerSocket ss = new ServerSocket(8001);

     while (true)
     {
        final Socket s = ss.accept();
        // @todo s.getInputStream();
     }
  }
  catch (final IOException ex)
  {
     //
  } 
```

它是服务器部分的主要级联

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T20:36:45.293

尝试阅读此博客。它涵盖了如何使用 spring 框架来完成你的工作。如果尚未添加，应尽快添加全面支持。

[http://keaplogik.blogspot.com.au/2012/05/atmosphere-websockets-comet-with-spring.html?m=1](http://keaplogik.blogspot.com.au/2012/05/atmosphere-websockets-comet-with-spring.html?m=1)

我还建议检查春季发行说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T20:20:41.103

You are running GlassFish. Web sockets are not enabled by default in it. To enable them you must execute the following single-line command on your domain:

```
asadmin set configs.config.server-config.network-config.protocols.protocol.http-listener-1.http.websockets-support-enabled=true 
```

* * *

`HttpServlet.init(...)` method is called by the servlet container to indicate to a servlet that the servlet is being placed into service.[*](http://docs.oracle.com/javaee/1.3/api/javax/servlet/GenericServlet.html#init%28javax.servlet.ServletConfig%29) So, your log message there doesn't represent the truth.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-16T11:02:44.933

这与上面的代码相同，只是它允许您从客户端接收超过 126 个字节的消息。很多web socket源代码都没有搞清楚分片。

```
 // Modified code from Anders, - Christopher Price
package GoodExample;

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.Arrays;
import java.util.HashMap;
import sun.misc.BASE64Encoder;

public class JfragWS {

public static final int MASK_SIZE = 4;
public static final int SINGLE_FRAME_UNMASKED = 0x81;
private ServerSocket serverSocket;
private Socket socket;

public JfragWS() throws IOException {
serverSocket = new ServerSocket(1337);
connect();
}

private void connect() throws IOException {
System.out.println("Listening");
socket = serverSocket.accept();
System.out.println("Got connection");
if(handshake()) {
    listenerThread();
}
}

private boolean handshake() throws IOException {
PrintWriter out = new PrintWriter(socket.getOutputStream());
BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

HashMap<String, String> keys = new HashMap<>();
String str;
//Reading client handshake
while (!(str = in.readLine()).equals("")) {
    String[] s = str.split(": ");
    System.out.println();
    System.out.println(str);
    if (s.length == 2) {
    keys.put(s[0], s[1]);
    }
}
//Do what you want with the keys here, we will just use "Sec-WebSocket-Key"

String hash;
try {
    hash = new BASE64Encoder().encode(MessageDigest.getInstance("SHA-1").digest((keys.get("Sec-WebSocket-Key") + "258EAFA5-E914-47DA-95CA-C5AB0DC85B11").getBytes()));
} catch (NoSuchAlgorithmException ex) {
    ex.printStackTrace();
    return false;
}

//Write handshake response
out.write("HTTP/1.1 101 Switching Protocols\r\n"
    + "Upgrade: websocket\r\n"
    + "Connection: Upgrade\r\n"
    + "Sec-WebSocket-Accept: " + hash + "\r\n"
     + "Origin: http://face2fame.com\r\n"
    + "\r\n");

out.flush();

return true;
}

private byte[] readBytes(int numOfBytes) throws IOException {
byte[] b = new byte[numOfBytes];
socket.getInputStream().read(b);
return b;
}

public void sendMessage(byte[] msg) throws IOException {
System.out.println("Sending to client");
ByteArrayOutputStream baos = new ByteArrayOutputStream();
BufferedOutputStream os = new BufferedOutputStream(socket.getOutputStream());
baos.write(SINGLE_FRAME_UNMASKED);
baos.write(msg.length);
baos.write(msg);
baos.flush();
baos.close();
convertAndPrint(baos.toByteArray());
os.write(baos.toByteArray(), 0, baos.size());
os.flush();
}

public void listenerThread() {
Thread t = new Thread(new Runnable() {
    @Override
    public void run() {
    try {
        while (true) {
        System.out.println("Recieved from client: " + reiceveMessage());
        System.out.println("Enter data to send");
        }
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    }
});
t.start();
}

public String reiceveMessage() throws IOException {
String EasyBytes = null;
byte[] buf = readBytes(2); // our initial header

convertAndPrint(buf);
//System.exit(0);
EasyBytes = (String.format("%02X ", buf[1]));
int payloadadder = 0;
if (EasyBytes.contains("FE")){ // Indicates extended message
    byte[] buf2 = readBytes(1);
    int a = (buf2[0] & 0xff) + 1; // if byte is zero there is one extra fragment so add 1!
    System.out.println("Number of extra bytes" + a);
    payloadadder = 2; // account for original header size
    byte[] adder = null;
    //String MagnificentString = "";
    for (int x = 0; x < a; x++){
        if(x==0){
        adder = readBytes(1);
        //MagnificentString += String.format("%02X ", adder[0]);
        payloadadder += ((adder[0] & 0xFF) - 0x80);}
        if(x==1){
        payloadadder =  (buf[1] & 0xFF) + (adder[0] & 0xFF);

        }
        if(x>1){
            payloadadder = (Integer.parseInt((String.format("%02X", buf2[0]) + String.format("%02X", adder[0])), 16));
            //System.out.println(String.format("%02X", buf2[0]) + String.format("%02X", adder[0]));
            }

    }
    System.out.println("Overflow in byte/s " + payloadadder);
    //System.out.println("Our Hex String " + MagnificentString);
    //System.exit(0);
}
//convertAndPrint(buf);
//dont use this byte[] buf2 = readBytes(4);

System.out.println("Headers:");

//convertAndPrint(buf2);// Check out the byte sizes
int opcode = buf[0] & 0x0F;
if (opcode == 8) {
    //Client want to close connection!
    System.out.println("Client closed!");
    socket.close();
    System.exit(0);
    return null;
} else {
    int payloadSize = 0;
    if (payloadadder <= 0){
 payloadSize = getSizeOfPayload(buf[1]);}
    else {
        payloadSize = getSizeOfPayload(buf[1]) + payloadadder;
    }
//  if (extendedsize>=126){   
    //payloadSize = extendedsize;}
    System.out.println("Payloadsize: " + payloadSize);
    buf = readBytes(MASK_SIZE + payloadSize);
    System.out.println("Payload:");
    convertAndPrint(buf);
    buf = unMask(Arrays.copyOfRange(buf, 0, 4), Arrays.copyOfRange(buf, 4, buf.length));

    String message = new String(buf);

    return message;
}
}

private int getSizeOfPayload(byte b) {
//Must subtract 0x80 from masked frames

int a = b & 0xff;
//System.out.println("PAYLOAD SIZE INT" + a);
return ((b & 0xFF) - 0x80);
}

private byte[] unMask(byte[] mask, byte[] data) {
for (int i = 0; i < data.length; i++) {
    data[i] = (byte) (data[i] ^ mask[i % mask.length]);
}
return data;
}
private boolean convertAndPrintHeader(byte[] bytes) {
   StringBuilder sb = new StringBuilder();
   String CaryOverDetection = new String();
   // We must test byte 2 specifically for this. In the next step we add length bytes perhaps?
   //for(int i = 0; i < bytes.length; i++) {
       //}
    for (byte b : bytes) {
        CaryOverDetection = (String.format("%02X ", b));
        if (CaryOverDetection.contains("FE")){

            return false;
        }
        sb.append(String.format("%02X ", b));
    }
    System.out.println(sb.toString());
    return true;

    }

private void convertAndPrint(byte[] bytes) {
StringBuilder sb = new StringBuilder();
for (byte b : bytes) {
    sb.append(String.format("%02X ", b));
}
System.out.println(sb.toString());
}

public static void main(String[] args) throws IOException, InterruptedException, NoSuchAlgorithmException {
JfragWS j = new JfragWS();
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
while (true) {
   System.out.println("Write something to the client!");
   j.sendMessage(br.readLine().getBytes());
}
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-30T00:51:19.863

您还可以使用现有的框架来实现这一点，例如：[jWebsocket](http://jwebsocket.org/)

# android - QA 系统词库

> ID：12702311
> 
> 赞同：1
> 
> 时间：2012-10-03T05:19:25.010
> 
> 标签：android, algorithm, nlp, qa, information-retrieval

我想知道是否建议将词库添加到问答系统？因为如果用户提出问题并且其中一个词不存在于问答的来源中，但该词有另一个词。

QA 表示问答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:35:58.240

我可以建议你 - >两种不同的方法：

1 限制用户仅使用您在系统中定义的字词提问的可能性。例如：

您的系统中有 3 个词，名称、年龄和通知。当用户尝试写a时，你会建议他年龄，当他尝试写n时，你会建议他姓名和注意事项。ETC...

2 当用户试图寻找答案时，如果用户输入的单词在你的系统中不存在，告诉他你没有他的问题的答案，他应该再试一次。

当然，您的系统会更复杂，但您可以采用这两种方法之一。

个人觉得第二个更好。您可以按照您的建议使用例如同义词库，然后尝试使用许多单词尽可能更好地创建您的 QA 系统。

# objective-c - 如何使用 OSAtomicxxx 方法实现循环效果

> ID：12702313
> 
> 赞同：0
> 
> 时间：2012-10-03T05:19:31.517
> 
> 标签：objective-c, ios, math, atomic, operation

我们想使用任何一种 OSAtomic* 方法来实现循环效果，例如，从 MAX_INT 开始计数，每次递减 1，一旦达到 0 再返回 MAX_INT。有没有办法做到这一点？

# algorithm - 活动选择贪心法（修改）

> ID：12702316
> 
> 赞同：2
> 
> 时间：2012-10-03T05:19:53.140
> 
> 标签：algorithm, greedy

> **可能重复：**
> [在一系列重叠间隔中找到最大和的算法](https://stackoverflow.com/questions/3243234/algorithm-to-find-the-maximum-sum-in-a-sequence-of-overlapping-intervals)

我正在解决以下修改后的活动调度（贪婪方法）问题：

给定一组 S 的 n 个活动，开始时间为**Si**和**fi**，完成**第 i 个**活动的时间。还给定权重**wi**，*Foo 进行 ith 活动所赚取的成本*。

问题是选择**使 foo 收益最大化**的活动。我们必须返回 foo 可以赚取的最大成本。*假设 Foo 一次只能处理一个活动*。

笔记：：

这类似于经典的[活动选择问题](http://en.wikipedia.org/wiki/Activity_selection_problem) ，这里唯一的区别是，对于每个活动，我们都被赋予了一个成本 wi。而且这里的目标太不同了——*而不是找到最大大小的相互兼容的活动集*，在这个问题中，我们必须找到最大化 foo 总收益的那些活动集。

例子

```
Total activities N=4
Si fi wi
0 1 4000
2 5 100
1 4 3000
4 5 2500

Max earning=9500 (Answer) 
```

我如何修改经典的贪婪活动选择算法来解决这个问题。我应该使用什么逻辑来解决上述问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T05:28:54.173

我不知道如何贪婪地解决这个问题。我可以看到的解决方案是动态编程，您必须在其中解决子问题

F(n) = Foo 仅在第 n 天后工作所能获得的最大利润是多少？

然后递归公式很清楚：我们有 F(n) 要么等于 F(n+1)（在 Foo 在第 n 天不工作的情况下），要么等于 F(fi ) + wi，对于在时间 si=n 开始的每个活动。

编辑：假设活动的结束时间是 f0 <= f1 <= f2 <= ... <= fN。那么答案是 F[f0]（从时间 f0 开始工作的最佳利润是多少），它可以计算为：

```
for n = N to 0:
    F[fn] = F[fn+1]
    for each activity (si, fi, wi):
         if si == fn: 
             F[fn] = max(F[fn], F[fi] + wi) 
```

如果活动根据其开始时间以非递增顺序排序，则此方法的复杂性与活动数量成线性关系（因为您可以在 si < N 时停止内部循环）。

# iphone - IOS中App开发的外部影响

> ID：12702319
> 
> 赞同：-1
> 
> 时间：2012-10-03T05:20:10.973
> 
> 标签：iphone, objective-c, ios, xcode, cordova

我在IOS中开发了一个应用程序。它独立工作正常。但我想知道它如何受到设备中其他进程的影响。例如；应用在前台时是否收到短信或来电。然后我们可能不得不暂停应用程序等等。我想知道可能影响应用程序的所有其他因素以及我需要如何处理这些因素以保留应用程序数据。如果我能得到这些外部因素的清单和处理它们的程序，那么我的问题就会得到解决。顺便说一句，我正在使用在 IOS 中启用了 ARC 的 phonegap(cordova) 2.1.0 版。任何帮助表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:06:18.007

All of the things that can interrupt your app are passed through the UIApplicationDelegate. Here is the Apple documentation about it.

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIApplicationDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIApplicationDelegate)

# eclipse - 在 Eclipse 中处理多个 JDK

> ID：12702320
> 
> 赞同：0
> 
> 时间：2012-10-03T05:20:17.577
> 
> 标签：eclipse, configuration, jvm

我需要将我的项目编译为 Java 1.5 Runtime。但是我希望我的 Eclipse 使用 1.6/1.7 JDK 来利用一些优势来顺利运行 Eclipse。

如果可能的话，我希望我的 tomcat 使用 JDK6 或 JDK7，但是它不应该影响编译为 1.5 的项目（我认为它将由 JVM 处理而没有问题）

但我只需要一些帮助来将 Eclipse 配置为 JDK6/7，但它应该将项目编译为 1.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:36:43.460

要定义在运行 eclipse 时使用哪个 JDK/JRE，请打开 eclipse.ini 并输入`-vm /path/to/jdk-jre/bin`例如：

```
...
--launcher.XXMaxPermSize
384M
-vm
C:/Program Files/Java/jdk1.7.0/jre/bin
-vmargs
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:30:34.460

您应该能够使用以下命令指定要进行项目的 JRE：

`Project -> Properties ->Java Build Path -> Libraries -> Add Library -> JRE System Library -> Alternate JRE`（选择项目的 JRE）

# tridion - 如何为日期或数字类型的元数据字段赋值？

> ID：12702329
> 
> 赞同：1
> 
> 时间：2012-10-03T05:21:33.217
> 
> 标签：tridion, tridion-2011, core-services

我正在使用以下链接的代码来处理元数据字段：-

[https://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata](https://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)

但是当我尝试为日期类型的元数据字段分配值时，我收到以下 xml 验证错误：-

" System.ServiceModel.FaultException`1 [myPorject.serviceReference.CoreServiceFault]：XML 验证错误。原因：'uuid:myUUID:dateField' 元素无效 - 值 '10/4/2012 03:04:00 AM' 是根据其数据类型“http://www.w3.org/2001/XMLSchema:dateTime”无效 - 字符串“10/4/2012 03:04:00 AM”不是有效的 DateTime 值。（故障详情为等于 myPorject.serviceReference.CoreServiceFault)"

无论我将值分配为字符串还是 DateTime 数据类型，我都会遇到相同的错误，我还尝试使用 Datetime 数据类型重载 AddValue 方法，但到目前为止没有任何效果。

AddValue 方法的代码片段：-

```
 public void AddValue(string value1)
    {
        string value = string.IsNullOrEmpty(value1) ? null : value1; ;
        XmlElement newElement = fields.AddFieldElement(definition);
        if (value != null) newElement.InnerText = value;
    } 
```

请为日期和数字数据类型提出解决方案。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T11:13:25.903

错误消息非常明确地表明您的日期格式错误：`The string '10/4/2012 03:04:00 AM' is not a valid DateTime value`.

Tridion 期望的格式是`YYYY-MM-DDThh:mm:ss`，所以没有空格、没有时区和没有 AM/PM 标记。

在官方的 Tridion API 中，您通常不必自己进行转换，因为它们接受`DateTime`对象并将其转换为适合您的正确格式。但是由于您使用的辅助类不是官方 API，它需要一些快捷方式，并且让您将值设置为`string`.

我通常用来**`datetime.ToString("u").Replace(" ", "T").Replace("Z", "")`**以正确的格式获取日期。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T08:03:15.963

日期字符串应具有如下格式：

*   **YYYY-MM-DDThh:mm:ss**

例子：

*   “2012-10-03T09:39:43”

除此之外，您设置日期的方式对我来说似乎有点复杂，因为您正在使用内容和元数据包装器，为什么不这样：

```
string myStringDate = "2012-10-03T09:39:43";
fields["DateFieldName"].Value = myStringDate;
component.Metadata = fields.ToString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T05:44:58.993

根据我的 C# 经验，此类错误是由于日期时间格式问题引起的。你可以试试下面的代码

```
DateTime.Now.ToUniversalTime().ToString("yyyy-MM-dd"); 
```

我尚未使用您的代码对其进行测试，但希望它适用于您的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T11:09:21.810

您在格式中缺少日期和时间之间的“T”分隔符。您确实提到输出的日期采用您尝试重新插入的格式，但是无论如何输出都可以格式化，不一定是您必须指定日期的方式。

在此处仔细阅读 XMLSchema dateTime 规范：http: [//www.w3.org/TR/xmlschema-2/#dateTime](http://www.w3.org/TR/xmlschema-2/#dateTime)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T08:24:56.157

经过一些故障排除后，我终于解决了问题以及日期格式。为此，我需要将本地机器的时区与服务器的时区匹配。

以下是重载方法的代码：-

```
 public void AddValue(DateTime value1)
    {
        DateTime value = value1 == null ? DateTime.MinValue : value1;

        XmlElement newElement = fields.AddFieldElement(definition);
        if (value != null) newElement.InnerText = value.ToString("yyyy-MM-ddThh:mm:ss");
    } 
```

# android - android 应用程序在 2.3 设备上运行，在 4.1 上崩溃（重新发布）

> ID：12702330
> 
> 赞同：1
> 
> 时间：2012-10-03T05:21:38.670
> 
> 标签：android

我有一个在 2.3 版设备和一个特定的 4.1 模拟器上完美运行的 Android 应用程序。它在其他 4.1 模拟器以及 4.1 Google Nexus 设备上崩溃。

有任何想法吗？

这与尺寸，分辨率等有关吗？

这是我在 4.1 模拟器上运行它时的 logcat 输出。实际上代码很大，所以不能把它放在这里。任何提示都会很棒。然后我可以提出所需的代码片段。

```
10-01 11:42:30.404: E/Trace(623): error opening trace file: No such file or directory (2) 
10-01 11:42:30.754: D/dalvikvm(623): GC_FOR_ALLOC freed 126K, 3% free 8126K/8327K, paused 42ms, total 44ms
10-01 11:42:30.794: D/AndroidRuntime(623): Shutting down VM 
10-01 11:42:30.794: W/dalvikvm(623): threadid=1: thread exiting with uncaught exception (group=0x40a13300) 
10-01 11:42:30.804: E/AndroidRuntime(623): FATAL EXCEPTION: main 
10-01 11:42:30.804: E/AndroidRuntime(623): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.example.android_compliance/com.example.android_compliance.MainActivity}: java.lang.NullPointerException 
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.ActivityThread.access$600(ActivityThread.java:130) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.os.Handler.dispatchMessage(Handler.java:99) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.os.Looper.loop(Looper.java:137) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.ActivityThread.main(ActivityThread.java:4745) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at java.lang.reflect.Method.invokeNative(Native Method) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at java.lang.reflect.Method.invoke(Method.java:511) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-01 11:42:30.804: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at dalvik.system.NativeStart.main(Native Method) 
10-01 11:42:30.804: E/AndroidRuntime(623): Caused by: java.lang.NullPointerException     
10-01 11:42:30.804: E/AndroidRuntime(623):  at com.example.android_compliance.MainActivity.onCreate(MainActivity.java:261)
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.Activity.performCreate(Activity.java:5008) 
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-01 11:42:30.804: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-01 11:42:30.804: E/AndroidRuntime(623):  ... 11 more 
10-01 11:43:33.693: I/Process(623): Sending signal. PID: 623 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:38:28.857

您是否尝试在清单文件中应用应用的 SDK 版本范围？

例如，看起来像这样的行：

```
<uses-sdk android:minSdkVersion="7" android:maxSdkVersion="15"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:01:14.507

我认为您可能需要对 AndroidManifest 文件进行一些更改。他们更改了一些权限等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:01:25.077

所以这里是在 4.1 上返回 null 的方法

```
public String visiblepassword() {
        String inputm = android.provider.Settings.System.getString(getContentResolver(), android.provider.Settings.System.TEXT_SHOW_PASSWORD);
        return inputm;

        } 
```

非常非常奇怪，它仅在一种情况下返回 null ......当我第一次在设备上安装应用程序并启用可见密码设置时。所以如果我先安装并禁用设置，它工作正常。安装后，即使我更改设置并重新运行应用程序，它也能正常工作。初始安装后，它返回适当的 1 或 0。

有任何想法吗？

# validation - Aviarc - 验证电子邮件？

> ID：12702331
> 
> 赞同：3
> 
> 时间：2012-10-03T05:21:39.693
> 
> 标签：validation, email, aviarc

我研究了文档（多伦多和古巴），它根本没有帮助我理解数据规则，是否有人必须进行电子邮件验证。你可以给我一个例子吗？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:31:02.930

我相信您正在运行 Aviarc 3.5.0。如果是这种情况，则有一个为此版本的引擎编写的数据规则[示例。](http://dev.aviarc.com/docs/aviarc/cookbook/data_rules/user_registration_example)这些规则之一是电子邮件验证器。

这些规则附加到 databroker，并在定义.xml 文件中添加了属性**规则**，该文件指定了规则文件的位置，因此您最终会得到类似的东西：

```
<databroker factory-class="com.aviarc.framework.databroker.workflowsql.AviarcWorkflowSQLDataBrokerFactoryImpl"
            rules="data-rules.xml" >
    <operation name="get-all" pre-workflow="workflows/new-customer-get-all">

    </operation>
    <store-dataset-changes>
        <create pre-workflow="workflows/NeW-CuStOmer-Create"/>
        <update pre-workflow="workflows/new-customer-update"/>
        <delete pre-workflow="workflows/new-customer-delete"/>
    </store-dataset-changes>
</databroker> 
```

然后，文件“data-rules.xml”将驻留在与定义.xml 相同级别的数据代理目录中。这是您指定实际规则的地方。

干杯，弗拉德

# c#-4.0 - 如何在 MVC 中使用路由来实现 SEO 友好 URL

> ID：12702333
> 
> 赞同：2
> 
> 时间：2012-10-03T05:21:44.113
> 
> 标签：c#-4.0, asp.net-mvc-2, maproute

通常，我们的 global.asax 文件中有以下示例代码。所以，我的问题是我们如何拥有多个 MapRoute 以及如何使用它们？？？

我想要这样的网址：

```
http://domain/Home.aspx/Index/Cricket-Ball/12

```

```
        公共静态无效注册路由（RouteCollection 路由）
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            路线.MapRoute(
                “默认”，
                "{controller}/{action}/{id}",
                新的{控制器=“家”，动作=“索引”，id=UrlParameter.Optional}
            );
        }

```

我想要这样的东西，但我不明白如何使用这个路由，以便我可以获得 SEO 友好的 URL：

```
        公共静态无效注册路由（RouteCollection 路由）
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            路线.MapRoute(
                "默认1",
                "{controller}/{action}/{productname}/{id}",
                新的{控制器=“主页”，操作=“索引”，产品名称= UrlParameter.Optional，id = UrlParameter.Optional}
            );

            路线.MapRoute(
                “默认”，
                "{controller}/{action}/{id}",
                新的{控制器=“家”，动作=“索引”，id=UrlParameter.Optional}
            );
        }

```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:18:52.047

由于这不是通用 url，而是具体的（指向产品），您可以使用：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Products",
            "home/index/{productname}/{id}",
            new { controller = "Home", action = "Index" }
        );

        routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

因此，与“产品”路线不匹配的所有内容都将转到“默认”。请注意，我没有将“.aspx”添加到溃败中，因为我认为这是一个错误。如果你真的想要它，只需将它添加到路由中：

```
routes.MapRoute(
            "Products",
            "home/index.aspx/{productname}/{id}",
            new { controller = "Home", action = "Index" }
        ); 
```

另外，我建议使用更好的网址：

```
routes.MapRoute(
            "Products",
            "products/{productname}/{id}",
            new { controller = "Home", action = "Index" }
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:03:01.487

您使用的路由示例适用于 ASP.NET MVC，而不是 WebForms。您需要使用此博客文章中描述的不同变体：

[http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series。 aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

例子：

```
routes.MapPageRoute(
    "route-name",
    "products/{id}",
    "~/Products.aspx"); 
```

然后在您的 Page_Load 中，您需要像这样提取 id 的路由值：

```
int id = Page.RouteData.Values["id"] as int; 
```

# coffeescript - AngularJS 和咖啡脚本

> ID：12702337
> 
> 赞同：1
> 
> 时间：2012-10-03T05:22:24.630
> 
> 标签：coffeescript, angularjs

我已经创建了一个小型计算器，现在在帮助下让它在 Javascript 中以我想要的方式工作。当我尝试将此AngularJS转换为coffeescript时，出现此错误：

错误：参数“CalcCtrl”不是函数，未定义

该代码实际上正在运行，但错误出现在 java 控制台中，有没有办法解决这个问题？

这是我的 JSFiddle：http: [//jsfiddle.net/YUza7/13/](http://jsfiddle.net/YUza7/13/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:22:06.967

由于您使用手动引导程序，因此必须删除 ng-app 属性：

[http://jsfiddle.net/g/YUza7/18/](http://jsfiddle.net/g/YUza7/18/)

无论如何，您必须在 JsFiddle 上使用带有咖啡脚本的手动引导程序（自动抛出错误，因为此时咖啡脚本尚未执行）

编辑：修复了 html：http: [//jsfiddle.net/g/YUza7/19/](http://jsfiddle.net/g/YUza7/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:25:25.667

你可以写：

```
TodoCtrl = ($scope) ->
    $scope.$watch 'one * two', (value) ->
        $scope.total = value 
```

不幸的是 jsFiddle 不正确地使用 CoffeScript + AngularJS

# regex - 如何在记事本++中删除换行符并用逗号替换它们

> ID：12702340
> 
> 赞同：17
> 
> 时间：2012-10-03T05:22:47.010
> 
> 标签：regex, notepad++

我需要 Notepad++ 和正则表达式方面的帮助。

示例它目前的外观：

```
aaaaa
bbbb
cccccc 
```

我想要它（删除断点并用逗号和空格替换它们）：

```
aaaaa, bbbb, cccccc 
```

有人告诉我，我可以通过检查“正则表达式”和“匹配换行符”来做到这一点；

```
Find what: "[\r\n]+"

Replace with:","

-> Replace All 
```

但是我在替换窗口中找不到“匹配换行符”。我需要任何插件吗？我的 Notepad++ 版本是 5.7 (UNICODE)。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-03T05:30:11.097

使用`Extended`搜索模式，替换`\r\n` 为 `,`

![截屏](../Images/2868b493c640c6f7efb5c04117b9fa02.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T05:31:38.187

使用删除换行符不需要太多复杂性`notepad++`

只需从中选择`end of line to the start of next line`并按CTRL + H，您将获得要替换的文本，然后将其替换为`,`或您想要的字符

# emacs - org-mode 内联可折叠部分

> ID：12702342
> 
> 赞同：4
> 
> 时间：2012-10-03T05:22:54.453
> 
> 标签：emacs, org-mode

我希望在流程中间获得一个可折叠部分，有没有办法通过 org-mode 获得类似的东西？IE，能够折叠身体的一部分叫做“sidetrack”？

```
* 安装 xyz
制作包1
制作包2
  ** Sidetrack，获取 package3
     卷曲包3
     tar -xvf 包 3
制作包3

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T05:56:29.247

您的问题看起来很像[FAQ 中的问题](http://orgmode.org/worg/org-faq.html#closing-outline-sections)。

您可能正在寻找[inlinetasks](http://orgmode.org/w/?p=org-mode.git;a=blob;f=lisp/org-inlinetask.el;h=01f861e611aee4c24fcf7184ea191962be83be70;hb=HEAD)，或者只是列出项目（也可以折叠`TAB`）：

```
* Installing xyz
make package1
make package2
- Sidetrack, get package3
  curl package3
  tar -xvf package3
make package3 
```

如果您停止缩进并让您的文本位于第 0 列，则不需要为项目结束添加另一个项目符号（在本例中为破折号）。如果您想全部缩进，则缩进项目符号，然后entry 将包含比项目符号缩进更多的所有内容。[组织手册](http://orgmode.org/org.html#fnd-18)中的详细信息。

# iphone - 如何自定义键盘

> ID：12702346
> 
> 赞同：0
> 
> 时间：2012-10-03T05:23:24.080
> 
> 标签：iphone, ios, uikeyboard

我们如何在具有如下图界面的默认键盘中添加自定义按钮。

![在此处输入图像描述](../Images/a43e7891329c01a4b2a72e1c3a462634.png)

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:29:01.513

查看本教程[http://www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key](http://www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:29:57.550

它非常简单，只需使用 .xib 创建一个 viewController 并获取上图的屏幕截图。修复 UIImageView 上的屏幕截图然后你需要放置自定义 UIButtons 并设置标签属性，就像按钮想要喜欢的一样 1,2,3 然后创建一个分配给所有 UIButtons 的方法并使用它们的标签属性进行操作。

如果你想在 UITextField 中输入一些文本，那么你需要实现 UITextFiled textShouldBeginEditing 的委托方法 return no。你有什么想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:25:05.620

我认为您可以提供一个`UIView`替换键盘...但是我从未使用过此功能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T05:33:10.030

您可以`UIKeyBoard`通过自定义添加简单的按钮。

```
- (void)keyboardDidShow:(NSNotification *)note {

// create custom button
UIButton *doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
doneButton.frame = CGRectMake(215, 163, 106, 53);
doneButton.adjustsImageWhenHighlighted = NO;
[doneButton setImage:[UIImage imageNamed:@"DoneUp.png"] forState:UIControlStateNormal];
[doneButton setImage:[UIImage imageNamed:@"DoneDown.png"] forState:UIControlStateHighlighted];
[doneButton addTarget:self action:@selector(doneButton:) forControlEvents:UIControlEventTouchUpInside];

UIWindow* tempWindow;

UIView* keyboard;

for(int c = 0; c < [[[UIApplication sharedApplication] windows] count]; c ++)
{
    tempWindow = [[[UIApplication sharedApplication] windows] objectAtIndex:c];

    for(int i = 0; i < [tempWindow.subviews count]; i++)
    {
        keyboard = [tempWindow.subviews objectAtIndex:i];

        if([[keyboard description] hasPrefix:@"<UIPeripheralHostView"] == YES)
        {
            [keyboard addSubview:doneButton];
        }
    }
}
} 
```

或查看此链接以获取自定义键盘布局

[BSKeyboardControls](https://github.com/SimonBS/BSKeyboardControls)

# android - Android JPEG缩放库？

> ID：12702347
> 
> 赞同：1
> 
> 时间：2012-10-03T05:23:41.920
> 
> 标签：android, jpeg

我非常熟悉 android 中的位图及其在高分辨率内存利用率方面的局限性。图片。

我正在寻找的是一个替代库（基于 java/c，移植到 android），它可以进行 jpeg 到 jpeg 的转换，以便我可以缩放高分辨率图像，例如 12MP 到 8MP。[使用Bitmaps](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:20:03.367

[libvips](http://www.vips.ecs.soton.ac.uk/index.php?title=Libvips)可能是一个很好的候选者，因为它被认为是*测试过的最快的图像处理库，并且使用的内存量最少，*而且它[以一种智能的方式打开文件](http://libvips.blogspot.fr/2012/06/how-libvips-opens-file.html)。话虽如此：

*   它不提供开箱即用的 JNI 包装器 - 您应该确保可以将 lib 移植到 Android 并编写自己的包装器，
*   您将必须包括对 JPEG 压缩/解压缩的支持 - 我会说[libjpeg-turbo](http://libjpeg-turbo.virtualgl.org/)可能是一个很好的候选者，因为它显然支持 ARM 架构并**已[移植到 Android](http://lists.linaro.org/pipermail/linaro-dev/2011-September/007219.html)**

您还可以检查仅 libjpeg-turbo 是否足够，因为它包括在解压缩期间缩小图像的能力。

# android - 如何从和 Android 应用程序“喜欢”Facebook 上的页面？

> ID：12702355
> 
> 赞同：0
> 
> 时间：2012-10-03T05:24:07.490
> 
> 标签：android, facebook, facebook-graph-api, facebook-like

嗨朋友们我有一个问题，如何从我的应用程序中喜欢 Facebook 中的页面？我可以使用页面 id 检索 Facebook 页面的所有信息，也可以对页面墙发表评论，我的要求是能够在 Facebook 中喜欢我无法做到的页面..??。我已经通过图形 API 但无法找到解决方案..??

我试过这段代码

```
dialog = ProgressDialog.show(MyApp.this, "",
                    "please wait..", true, true);
            Bundle params = new Bundle();
    mAsyncRunner.request("PAGE_ID/likes",params,"POST",new UploadListener(), null);

public class UploadListener implements RequestListener {

        @Override
        public void onComplete(String response, Object state) {
            System.out.println("THE RES IS : "+response);
            dialog.dismiss();
        } 
```

一旦我运行此代码，它就会给出错误 THE RES IS：

```
{
  "error": 
  {
    "message": "(#3) Application does not have the capability to make this API call.", 
    "type": "OAuthException", 
    "code": 3
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T05:35:21.843

Pages 的 Facebook 文档已更新并且是最新的（请参阅[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)）。即使您可以阅读点赞计数信息，您也无法通过 Graph API 点赞页面。它没有API，你可以试试这个。 [就像来自应用程序本身的 facebook 中的 android 应用程序页面](https://stackoverflow.com/questions/7766616/like-android-application-page-in-facebook-from-application-itself)

# jsf-2 - Tomcat7 上的 SeamFaces

> ID：12702358
> 
> 赞同：0
> 
> 时间：2012-10-03T05:24:22.013
> 
> 标签：jsf-2, tomcat7, cdi, seam3

我正在尝试让 SeamFaces 在 Tomcat 7 上工作。这可能吗？我将以下条目添加到从[http://www.seamframework.org/Seam3/FacesModule](http://www.seamframework.org/Seam3/FacesModule)获取的 (Maven) POM 中。

它似乎需要但找不到 org.jboss.seam.transaction.SeamT​​ransaction 类。任何帮助，将不胜感激。有谁知道如何让 SeamFaces 在 Tomcat 7 上正常工作？

非常感谢！聚甲醛：

```
<dependency>
        <groupId>org.jboss.seam.faces</groupId>
        <artifactId>seam-faces-api</artifactId>
        <version>3.1.0.Final</version>
    </dependency>
    <dependency>
       <groupId>org.jboss.seam.faces</groupId>
       <artifactId>seam-faces</artifactId>
       <version>3.1.0.Final</version>
       <scope>runtime</scope>
    </dependency> 
```

堆栈跟踪：

```
org.jboss.weld.resources.spi.ResourceLoadingException: Error loading class org.jboss.seam.faces.transaction.TransactionPhaseListener
    at org.jboss.weld.resources.ClassTransformer.loadClass(ClassTransformer.java:167)
    at org.jboss.weld.bootstrap.BeanDeployer.loadWeldClass(BeanDeployer.java:108)
    at org.jboss.weld.bootstrap.BeanDeployer.addClass(BeanDeployer.java:79)
    at org.jboss.weld.bootstrap.BeanDeployer.addClasses(BeanDeployer.java:123)
    at org.jboss.weld.bootstrap.BeanDeployment.createBeans(BeanDeployment.java:184)
    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:350)
    at org.jboss.weld.environment.servlet.Listener.contextInitialized(Listener.java:182)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:530)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1471)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:791)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:856)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:353)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: Lorg/jboss/seam/transaction/SeamTransaction;
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredFields(Class.java:1760)
    at org.jboss.weld.util.reflection.SecureReflections$4.work(SecureReflections.java:105)
    at org.jboss.weld.util.reflection.SecureReflections$4.work(SecureReflections.java:102)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAndWrap(SecureReflectionAccess.java:63)
    at org.jboss.weld.util.reflection.SecureReflections.getDeclaredFields(SecureReflections.java:102)
    at org.jboss.weld.introspector.jlr.WeldClassImpl.<init>(WeldClassImpl.java:154)
    at org.jboss.weld.introspector.jlr.WeldClassImpl.of(WeldClassImpl.java:119)
    at org.jboss.weld.resources.ClassTransformer$TransformTypeToWeldClass.apply(ClassTransformer.java:59)
    at org.jboss.weld.resources.ClassTransformer$TransformTypeToWeldClass.apply(ClassTransformer.java:50)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingValueReference.compute(ComputingConcurrentHashMap.java:355)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.compute(ComputingConcurrentHashMap.java:184)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingSegment.getOrCompute(ComputingConcurrentHashMap.java:153)
    at com.google.common.collect.ComputingConcurrentHashMap.getOrCompute(ComputingConcurrentHashMap.java:69)
    at com.google.common.collect.ComputingConcurrentHashMap$ComputingMapAdapter.get(ComputingConcurrentHashMap.java:393)
    at org.jboss.weld.resources.ClassTransformer.loadClass(ClassTransformer.java:163)
    ... 49 more
Caused by: java.lang.ClassNotFoundException: org.jboss.seam.transaction.SeamTransaction
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 67 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:40:24.520

那（以及任何其他未发现异常的类，例如漂亮面孔）是可选的 deps。我知道日志记录很烦人，但在这种情况下它们是无害的。

# c# - 从 MS Live 日历获取数据

> ID：12702360
> 
> 赞同：1
> 
> 时间：2012-10-03T05:24:39.457
> 
> 标签：c#, liveconnect, live-connect-sdk

目前我正在从事一个门户项目，用于从多个网站（google、yahoo、live/hotmail）获取日历数据。问题是我们的应用程序需要从这些网站获取日历数据的服务。我的团队已经摆脱了谷歌和雅虎日历，但现在我们遇到了实时日历的问题。

到目前为止，这是我们已经尝试过但失败的方法：

1.  使用 HTTP 请求获取数据似乎是不可能的，因为[http://login.live.com](http://login.live.com)使用 javascript 完全保护。我们花了 3 天时间来了解登录的 JS，但微软似乎比我们好得多 :)
2.  通过网络搜索 LIVE CONNECT API，但现在可以动态登录（通过提供用户名/密码）到 MS Live。我们不能使用实时登录按钮，因为我们的流程完成了一个服务层。（或者也许我错过了什么？）

我有机会完成这个任务吗？

任何帮助，线索，技巧将不胜感激，谢谢

注意：我们的应用程序客户位于一个小型网络中，如果我们管理他们的 LIVE/YAHOO/GOOGLE 帐户，他们会同意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:43:42.287

答案是否定的！您无法通过提供电子邮件/密码从 MS LIVE 获取日历/事件，因为 MS LIVE 使用 OAUTH。

您可以做的最好的方法是，从您的客户端应用程序中显示实时 OAUTH 登录，然后从那里获取身份验证令牌。然后将身份验证令牌传递给服务器端。获取您需要的日历或活动。

这是步骤：

**获取您的应用程序客户端 ID**

转到：[https ://manage.dev.live.com/Applications/Index](https://manage.dev.live.com/Applications/Index)

**创建登录表单**

在您的客户端应用程序中，您通过显示浏览器控件来创建登录表单，网址为：

`https://oauth.live.com/authorize?response_type=token&client_id=YOUR_APP_CLIENTID&scope=SCOPE&locale=en&redirect_uri=https://oauth.live.com/desktop&auth_redirect=true&wa=wsignin1.0`

*   YOUR_APP_CLIENTID：您在第一步注册时获得的客户端 ID。
*   范围：应该`wl.calendars+wl.basic` [在文档中看到更多](http://msdn.microsoft.com/en-us/library/live/hh243646.aspx)

然后在用户允许身份验证后，浏览器将重定向到：

```
https://oauth.live.com/desktop#access_token=ACCESS_TOKEN
   &token_type=TOKEN_TYPE&expire=EXPIRE 
```

在那里你可以从那里提取 ACCESS_TOKEN 。

**抓住日历/事件**

所以现在您的客户端应用程序已经有 ACCESS_TOKEN 然后将其传递给您的服务以获取日历（请记住 ACCESS_TOKEN 有一个超时）。然后，您的服务应该执行 REST 调用：

```
https://apis.live.net/v5.0/me/calendars?access_token=ACCESS_TOKEN 
```

或者

```
https://apis.live.net/v5.0/me/events?start_time=2012-10-01T00:00:00Z
     &end_time=2012-10-03T00:00:00Z&access_token=ACCESS_TOKEN 
```

有关更多信息，请参阅：http: [//msdn.microsoft.com/en-us/library/live/hh826523.aspx](http://msdn.microsoft.com/en-us/library/live/hh826523.aspx)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:42:03.727

从微软网站....

> 您的应用程序可以使用 Live Connect API 创建、读取、更新和删除 Hotmail 用户的日历。您的应用程序还可以订阅公共日历，例如假期列表。

所以我认为这是你去看看的地方。[日历（Live Connect API）](http://msdn.microsoft.com/en-us/library/live/hh826523.aspx)；是的，C# 中也有示例。

概念说明...基本上您需要使用`public class LiveConnectClient`Windows 8 中提供的功能来完成此操作。

```
using Microsoft.Live;  
using Microsoft.Live.Controls; 
```

是包含实时连接客户端和相关操作的核心逻辑的名称空间。

# html - html使用样式标签设置宽度和高度不起作用

> ID：12702364
> 
> 赞同：1
> 
> 时间：2012-10-03T05:25:11.950
> 
> 标签：html, css

我正在尝试使用 html 创建一个日历，并尝试将每个单元格的宽度和高度设置为 100。为此，我尝试使用如下样式标记。但是由于某种原因，每个单元格的高度和宽度并没有改变。但是，如果我尝试使用宽度/高度属性修改单个单元格，而不是在样式标记中指定属性，它会起作用。请帮忙。

```
<html>
<head>
    <style type="text/css">
    td {color:green; width:100; height:100}
    th {width:100}
    </style>
</head>
<body>
<table border="2">
 <caption> October 2012 Calendar</caption>
  <tr>
    <th> Sunday </th>
    <th> Monday </th>
    <th> Tuesday </th>
    <th> Wednesday </th>
    <th> Thursday </th>
    <th> Friday </th>
    <th> Saturday </th>
  </tr>
  <tr>
   <td bgcolor="grey"> &nbsp; </td>
   <td>1</td>
   <td>2</td>
   <td>3</td>
   <td background="../worldanimalday.jpg">4</td>
   <td>5</td>
   <td>6</td>
  </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:26:48.090

..................................................... …………

你的css**问题**像这样写**正确的css**

**替换这个 CSS**

```
td {color:green; width:100; height:100;}
    th {width:100;} 
```

**进入这个**

```
td {color:green; width:100px; height:100px;}
    th {width:100px;} 
```

# ruby-on-rails - Rails - 主要和次要电话号码

> ID：12702367
> 
> 赞同：0
> 
> 时间：2012-10-03T05:25:23.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

关于如何在 Rails 中处理一个相当简单的问题，我有点悬而未决。我需要为用户记录电话号码，并且我想添加用户选择一个电话号码作为主要联系人号码的功能。我已经有一个 PhoneNumber 类（多态，因为企业也有电话号码），所以这一切都设置好了。

我认为我可以通过以下两种方式之一来做到这一点：

1.  设置用户拥有多个电话号码的关联，并添加一个字段以指示该电话号码是否是该用户的主要号码。
2.  为主要电话号码设置一个单独的属性（因为用户只有一个），然后将辅助电话号码作为 has_many 关联。

在任何一种情况下，当用户指定一个新号码作为主要号码时，我都必须添加一些代码来更改所有关联电话号码的属性。我只是好奇更有经验的用户是否觉得这里显然有最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:08:26.990

因为用户可能有很多电话号码，所以我会使用 has_many :phone_numbers 关联。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:57:49.063

我宁愿制作两个模型`PrimaryNumber`和`SecondaryNumber`. 关系将是 `User`has_one `PrimaryNumber`，`User`has_many （has_one 取决于您允许的数量）`SecondaryNumber`。这样你就可以得到

```
 user = User.find(key)
 user.primary_number
 user.secondary_number(s) 
```

为简单起见，因为只有一个`Primary Number`，您可以在`User`表本身中有列`primary_number`。然后，您将不需要`PrimaryNumber`表/模型

# xml - Blogger 小部件仅适用于当月

> ID：12702368
> 
> 赞同：3
> 
> 时间：2012-10-03T05:25:43.460
> 
> 标签：xml, ajax, markup, blogger

我正在尝试制作我的自定义 Blogger 主题，所以我必须处理它们的数据语法（所有这些“b”命名空间等）

一切都很顺利，直到我来到存档小部件。我有下一个建设：

```
<b:section id='BlogArchive'>
    <b:widget id='BlogArchive1' locked='true' title='Blog Archive' type='BlogArchive'>
        <b:includable id='main'>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" style="display: block; position: static; margin-bottom: 5px; *width: 180px;">
                <b:include data='data' name='interval'/>
            </ul>
        </b:includable>
        <b:includable id='interval' var='intervalData'>
            <b:loop values='data:intervalData' var='i'>
                <li class="dropdown-submenu">   
                    <a tabindex="-1" expr:href='data:i.url'><data:i.name/> (<data:i.post-count/>)</a>
                    <b:if cond='data:i.data'>
                        <ul class="dropdown-menu">
                            <b:include data='i.data' name='interval'/>
                        </ul>
                    </b:if>
                    <b:if cond='data:i.posts'>
                        <b:include data='i.posts' name='posts'/>
                    </b:if>
                </li>
            </b:loop>
        </b:includable>
        <b:includable id='posts' var='posts'>
            <ul class="dropdown-menu">
                <b:loop values='data:posts' var='i'>
                    <li><a tabindex="-1" expr:href='data:i.url'><data:i.title/></a></li>
                </b:loop>
            </ul>
        </b:includable>
    </b:widget>
</b:section> 
```

问题是这个片段只适用于当月：之前的所有月份似乎都是空的（下拉列表中没有列出任何帖子）。

我检查了原始小部件并认识到默认情况下服务器仅返回当前月份的帖子，然后它使用 AJAX 加载较早月份的帖子（扩展列表时）。

所以问题是：如何编辑我的片段以使其加载博客中所有按时间顺序存在的标题？也许我应该使用一些 JavaScript 或 AJAX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:25:21.803

不建议您删除以下代码

```
<b:widget id='BlogArchive1' locked='true' title='Blog Archive' type='BlogArchive'>
        <b:includable id='main'>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" style="display: block; position: static; margin-bottom: 5px; *width: 180px;">
                <b:include data='data' name='interval'/>
            </ul>
        </b:includable>
        <b:includable id='interval' var='intervalData'>
            <b:loop values='data:intervalData' var='i'>
                <li class="dropdown-submenu">   
                    <a tabindex="-1" expr:href='data:i.url'><data:i.name/> (<data:i.post-count/>)</a>
                    <b:if cond='data:i.data'>
                        <ul class="dropdown-menu">
                            <b:include data='i.data' name='interval'/>
                        </ul>
                    </b:if>
                    <b:if cond='data:i.posts'>
                        <b:include data='i.posts' name='posts'/>
                    </b:if>
                </li>
            </b:loop>
        </b:includable>
        <b:includable id='posts' var='posts'>
            <ul class="dropdown-menu">
                <b:loop values='data:posts' var='i'>
                    <li><a tabindex="-1" expr:href='data:i.url'><data:i.title/></a></li>
                </b:loop>
            </ul>
        </b:includable>
    </b:widget> 
```

然后保存您的模板。保存时，它会询问您是否删除小部件。单击删除小部件，然后再次转到您的布局选项卡并添加新的小部件以进行存档。这必须有效

包括您的博客网址，以便我可以查看您的博客

问候，Gireesh - [www.CoreBlogging.in](http://www.CoreBlogging.in)

# c - 二进制 ^ 的无效操作数（有 'double' 和 'double'）

> ID：12702371
> 
> 赞同：2
> 
> 时间：2012-10-03T05:26:17.310
> 
> 标签：c, operand

我对编码很陌生，并且一直在构建一个插入三次样条的代码，但我被困在最后一个等式上执行以下错误：_“二进制^的无效操​​作数（有'double'和'double'）| "

问题在于代码的最后一点，前两行带有“population =”。如果有人能指出我正确的方向，我将不胜感激。

```
#include <stdio.h>

main () {

    int x;
    int y;
    double stats[10][2];
    double gpp[8][9] = {0};
    double gppr[10] = {0};
    double year;
    double population;
    int xi = 0;
    year=1950;
    population=0;
    x=0;

    stats[0][0] = 1930; stats[1][0] = 1940; stats[2][0] = 1949;
    stats[3][0] = 1955; stats[4][0] = 1960; stats[5][0] = 1970;
    stats[6][0] = 1980; stats[7][0] = 1990; stats[8][0] = 2000;
    stats[9][0] = 2005;

    stats[0][1] = 21.058; stats[1][1] = 23.547; stats[2][1] = 20.167;
    stats[3][1] = 21.502; stats[4][1] = 24.989; stats[5][1] = 30.852; 
    stats[6][1] = 37.407; stats[7][1] = 43.390; stats[8][1] = 45.985;
    stats[9][1] = 47.041;

    //Initiate  g'' system of equation
    for (x=0;x<8;x++) {
        gpp[x][x] = ((stats[x+1][0]-stats[x][0])+(stats[x+2][0]-stats[x+1][0]))/3;
        if (x<7) {
            gpp[x][x+1] = (stats[x+2][0]-stats[x+1][0])/6;
        }
        if (x>0) {
            gpp[x][x-1] = (stats[x+2][0]-stats[x+1][0])/6;
        }
        gpp[x][8] = ((stats[x+2][1]-stats[x+1][1])/(stats[x+2][0]-stats[x+1][0]))-((stats[x+1][1]-stats[x][1])/(stats[x+1][0]-stats[x][0]));
    }

    //Forward sweep
    for (x=0;x<7;x++) {
        gpp[x+1][x] = 0;
        gpp[x+1][x+1] = gpp[x+1][x+1] - (gpp[x][x+1]/gpp[x][x])*gpp[x+1][x];
        gpp[x+1][8] = gpp[x+1][8] - (gpp[x][x+1]/gpp[x][x])*gpp[x][8];
    }
    //Backward sweep
    gppr[9] = 0;gppr[0] = 0;
    gppr[8] = gpp[7][8]/gpp[7][7];
    for (x=7;x > 0;x=x-1) {
        gppr[x] = (gpp[x][8]-(gppr[x+1]*gpp[x][x+1]))/gpp[x][x];
    }

    //check where is xi
    for (x=0;x<10;x++) {
        if (stats[x][0] > year) {
            xi = x;
            break;
        }
    }

//Calculate population at x
population = (gppr[xi]/6)*((((stats[xi+1][0]-year)^3.0)/(stats[xi+1][0]-stats[xi][0]))-(stats[xi+1][0]-stats[xi][0])*((stats[xi+1][0]-year)))
       + (gppr[xi+1]/6)*((((year-stats[xi][0])^3.0)/(stats[xi+1][0]-stats[xi][0]))-(stats[xi+1][0]-stats[xi][0])*((year-stats[xi+1][0])))
       + (stats[xi][1])*((stats[xi+1][0]-year)/(stats[xi+1][0]-stats[xi][0]))
       + (stats[xi+1][1])*((year-stats[xi][0])/(stats[xi+1][0]-stats[xi][0]));

} 
```

我期待更多地了解C！

雨果

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T05:28:20.287

`^`是 C 中的异或运算符，不适合双精度数。[它是一个位运算符，您可以在此处](https://stackoverflow.com/questions/1746613/bitwise-operation-and-usage/1746642#1746642)找到有关它（以及其他位运算符）的更多详细信息。

如果你想将一个数字提升到另一个数字的幂，你需要这个`pow()`函数。

所以像：

```
((stats[xi+1][0]-year)^3.0) 
```

实际上应该写成：

```
pow (stats[xi+1][0] - year, 3.0) 
```

最新 (C11) 标准的部分`7.12.7.4 The pow functions`规定：

> **概要：**
> `#include <math.h>`
> `double pow(double x, double y);`
> `float powf(float x, float y);`
> `long double powl(long double x, long double y);`
> 
> **说明：**
> pow 函数计算 x 的 y 次幂。如果 x 为有限且为负，并且 y 为有限且不是整数值，则会发生域错误。可能会发生范围错误。如果 x 为零且 y 为零，则可能发生域错误。如果 x 为零且 y 小于零，则可能出现域错误或极点错误。
> 
> pow 函数返回 x ^y。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T05:27:59.017

C 没有指数运算符。`^`是 XOR 运算符，它不适用于非整数，因此出现错误。请改用该`pow`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:32:36.940

我认为在最后一个等式中，您试图找到数学的幂函数。但在 c "^" 中，此运算符表示异或。最好尝试#include>math.h>

# php - PHP加载页面的部分而不是带有链接的整个页面

> ID：12702375
> 
> 赞同：0
> 
> 时间：2012-10-03T05:27:04.853
> 
> 标签：php, html

我有一个网站，我每天都会添加多个联系页面。该网站是用 PHP 编码的，链接也是如此。`www.domain.com/home/1`, `www.domain.com/home/2`,`www.domain.com/home/3`取决于页面。

我怎样才能做到这一点，以便当我单击将您带到下一页的下一步按钮时，它不会加载整个网页，而只会加载`<div>`具有此内容的站点或部分。但仍会保持相同的链接格式，例如`www.domain.com/home/#`

我不想使用 iframe，因为我认为我不能拥有这些链接，而重点是使加载无缝。

我很迷茫，我发现的唯一东西是 iframe，但我不想使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:35:21.113

您可以使用[Twitter Bootstrap 选项卡](http://www.mightywebdeveloper.com/coding/bootstrap-2-tabs-jquery-load-content/)或[jQuery UI 选项卡](http://jqueryui.com/demos/tabs/ajax.html)。

或者查看 jQuery Ajax 和 DOM 操作：[Best way of loading external page with AJAX](https://stackoverflow.com/questions/5046933/best-way-of-loading-external-page-with-ajax)

# android - 如何在android中滚动自定义editext

> ID：12702378
> 
> 赞同：1
> 
> 时间：2012-10-03T05:27:40.513
> 
> 标签：android, android-edittext

我有一个自定义的 EditText，它在其触摸事件中编写了显示键盘视图的代码。现在我无法滚动它，并且单击它无法将光标定位在触摸位置。我找到了在触摸位置定位光标的代码，它可以工作仅当 edittext 不滚动时才正确。

代码是：

```
Layout layout = ((EditText) text).getLayout();
if (layout != null)
{
    int line = layout.getLineForVertical((int) event.getY());
    int offset = layout.getOffsetForHorizontal(line, event.getX());
    ((EditText)text).setSelection(offset);
} 
```

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:52:16.387

您需要将 EditText 包含在 ScrollView 中以启用滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:13:54.510

您需要在 1 个布局中添加 2 个滚动视图（如 Royston 所说）（结果是在某些手机上它看起来很滞后）这是一些代码片段：首先在 xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/myparentScrollview"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<ScrollView
    android:id="@+id/mychildScrollView"

        <TextView
        / >

</ScrollView> 
```

并将其添加到后面的代码中

```
 parentScrollView= (ScrollView) findViewById(R.id.myparentScrollview);
parentScrollView.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
         //Log.v(TAG,"PARENT TOUCH");
         findViewById(R.id.childScrollView).getParent().requestDisallowInterceptTouchEvent(false);
        return false;
        }
    });
childScrollView= (ScrollView) findViewById(R.id.childScrollView);
childScrollView.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
         //Log.v(TAG,"PARENT TOUCH");
         findViewById(R.id.mychildScrollView).getParent().requestDisallowInterceptTouchEvent(true);
        return false;
    }
}); 
```

# debugging - IIS Express Azure Web 角色 URL 停留在 127.255.0.0:82

> ID：12702379
> 
> 赞同：1
> 
> 时间：2012-10-03T05:27:43.393
> 
> 标签：debugging, azure, iis-express, azure-web-roles

我有一个运行良好的 webrole + azure 云解决方案，然后突然间我在打开并运行另一个解决方案的同时进行了调试，该解决方案引发了 500 错误。

现在，当我点击调试尝试在本地调试时，我的浏览器将我指向 127.0.0.1:82，我得到了 500。

当我查看 IIS Express 托盘时，它显示该站点在 127.255.0.0:82 上运行——尽管我在那里什么也看不到。

如何让我的网站再次在 127.0.0.1:81 上运行？我只是希望它像以前一样工作，就像我的其他网站一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:20:56.073

我必须重新启动计算机，然后在 Azure/Cloud 项目中进入我的 WebRole 设置，转到端点配置屏幕并编辑端点，然后将其更改回来。之后，我的网站再次在 127.0.0.1 上运行。

# r - 为回溯窗口长度创建一个变量返回大于 x%

> ID：12702381
> 
> 赞同：1
> 
> 时间：2012-10-03T05:28:06.700
> 
> 标签：r, time-series, xts

我目前正在使用 R 进行一些研究，我想知道是否有人对如何创建以下变量有任何聪明的想法或任何预打包的函数：

我有一个单变量价格序列，比如金融资产的每日收盘价，可以追溯到 10 年。（它是一个 xts 对象）

我选择我的 x 为 2%

对于我每天的价格数据。我想知道您需要返回的最少天数才能创造大于 x% 的（可能是绝对的）回报（假设您当时有远见进行交易）。该变量将返回产生 x% 回报所需的天数/月数/年数。如果需要在数据开始之后返回以产生大于 x% 的回报，则在早期阶段返回 NA。

我可以想到一些手动和笨重的方法来做到这一点，但它使用大量循环来检查大量日期/价格，以便返回每天的正确值，然后该过程在第二天重复。 .它在 10 年的数据或日内数据上相当成问题，因此将对更快的解决方案给予支持......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:18:14.347

如果没有 for 循环，我看不到任何方法可以做到这一点，但下面的解决方案相当快（在我的 2.2Ghz 笔记本电脑上每 10,000 行约 1 秒）。

请注意，我正在`coredata`使用 xts 对象并删除`dim`属性 (via `drop`)，该属性返回一个向量。我这样做是因为 xts/zoo 中的数学运算按索引对齐，因此您需要先从分子中删除索引，然后才能计算回报。

但是，这会导致除法调度调用`NextMethod`，因为分子是`numeric`类而分母是`xts`类。我通过对数字向量执行除法来避免这种开销。

```
library(quantmod)
getSymbols("^GSPC",from="1900-01-01")

x <- Ad(GSPC)

lookback <- function(x, p) {
  # lookback() assumes x is xts
  # select first column, take coredata, drop dims
  dcx <- drop(coredata(x[,1]))
  # initialize result object
  f <- dcx*NA
  # loop over all rows in 'x'
  for(i in 1:nrow(x)) {
    # Calculate cumulative return through today
    r <- dcx[i]/dcx-1 # or log(dcx[i]/dcx)
    # This really slows things down:
    # r <- dcx[i]/x-1
    #
    # Find which returns are greater than 'p'
    w <- which(abs(r[1:i]) > p)
    # If any returns are greater than 'p', then
    # record the closest location to 'p'
    if(length(w)!=0)
      f[i] <- max(w)-i
  }
  # return an xts object
  xts(f, index(x))
}
nrow(x)
# [1] 15791
system.time(lookback(x,0.02))
#    user  system elapsed 
#  15.761   0.152  16.040 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T05:50:17.773

首先，您应该反转时间序列，以便具有最小正值的 x 值在时间上是最近的，而较远的过去点在右侧。然后你可以取当前值并说：

```
set.seed(123)
yval=cumsum(0.01*rnorm(100))
plot(1:100, yval, type="b")
which(rev(yval) < 0.95*yval[100])
which(rev(yval) < (1- 0.05)*yval[100])[1]
[1] 5 
```

如果您提供了包含日期时间或日期分类变量的示例数据集，我们可以帮助进行任何需要的转换。

# html - 在博主博客中实现 CSS 按钮

> ID：12702383
> 
> 赞同：1
> 
> 时间：2012-10-03T05:28:29.883
> 
> 标签：html, css, button, blogs, blogger

我对 css 和 html 几乎是新手，我通常在谷歌搜索我需要的代码并进行一些修改以适合我。

目前我想在我的博客中实现一个按钮，这是它在示例中的工作原理原始按钮示例 [http://designshack.net/tutorialexamples/animatedDownload/index.html](http://designshack.net/tutorialexamples/animatedDownload/index.html)

其css代码如下。

```
.button a {
  display: block;
  height: 50px;
  width: 200px;

  /*TYPE*/
  color: white;
  font: 17px/50px Helvetica, Verdana, sans-serif;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase;

  /*GRADIENT*/  
  background: #00b7ea; /* Old browsers */
  background: -moz-linear-gradient(top, #00b7ea 0%, #009ec3 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#00b7ea), color-stop(100%,#009ec3)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* IE10+ */
  background: linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b7ea', endColorstr='#009ec3',GradientType=0 ); /* IE6-9 */
}

.button a, p {
    -webkit-border-radius: 10px;
     -moz-border-radius: 10px;
          border-radius: 10px;

  -webkit-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
     -moz-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
          box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
}

p {
  background: #222;
  display: block;
  height: 40px;
  width: 180px; 
  margin: -50px 0 0 10px;

  /*TYPE*/
  text-align: center;
  font: 12px/45px Helvetica, Verdana, sans-serif;
  color: #fff;

  /*POSITION*/
  position: absolute;
  z-index: -1;

  /*TRANSITION*/  
  -webkit-transition: margin 0.5s ease;
     -moz-transition: margin 0.5s ease;
       -o-transition: margin 0.5s ease;
      -ms-transition: margin 0.5s ease;
          transition: margin 0.5s ease;
}

/*HOVER*/
.button:hover .bottom {
  margin: -10px 0 0 10px;
}

.button:hover .top {
  margin: -80px 0 0 10px;
  line-height: 35px;
}

/*ACTIVE*/
.button a:active {
background: #00b7ea; /* Old browsers */
background: -moz-linear-gradient(top,  #00b7ea 36%, #009ec3 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(36%,#00b7ea), color-stop(100%,#009ec3)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* IE10+ */
background: linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b7ea', endColorstr='#009ec3',GradientType=0 ); /* IE6-9 */

}

.button:active .bottom {
  margin: -20px 0 0 10px;
}

.button:active .top {
  margin: -70px 0 0 10px;
} 
```

这是使用此 css 代码的 html。

```
<div class="button">
      <a href="#">Download</a>
      <p class="top">click to begin</p>
      <p class="bottom">1.2MB .zip</p>
    </div> 
```

现在的问题是它不能完全按照它应该的方式工作，我认为这是因为 p 标签，它可能已经在我的模板中定义了，那么我如何才能使用这个类特定的 p 标签样式？我希望你明白我的意思。期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:33:47.493

......***[演示](http://tinkerbin.com/BOi9zJeZ)***

嗨，现在习惯了这个 css

```
.button {
  width: 200px;
  margin: 150px auto;
}

.button a {
  display: block;
  height: 50px;
  width: 200px;

  /*TYPE*/
  color: white;
  font: 17px/50px Helvetica, Verdana, sans-serif;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase;

  /*GRADIENT*/  
  background: #00b7ea; /* Old browsers */
  background: -moz-linear-gradient(top, #00b7ea 0%, #009ec3 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#00b7ea), color-stop(100%,#009ec3)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* IE10+ */
  background: linear-gradient(top, #00b7ea 0%,#009ec3 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b7ea', endColorstr='#009ec3',GradientType=0 ); /* IE6-9 */
}

.button a, p {
    -webkit-border-radius: 10px;
     -moz-border-radius: 10px;
          border-radius: 10px;

  -webkit-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
     -moz-box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
          box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
}

p {
  background: #222;
  display: block;
  height: 40px;
  width: 180px; 
  margin: -50px 0 0 10px;

  /*TYPE*/
  text-align: center;
  font: 12px/45px Helvetica, Verdana, sans-serif;
  color: #fff;

  /*POSITION*/
  position: absolute;
  z-index: -1;

  /*TRANSITION*/  
  -webkit-transition: margin 0.5s ease;
     -moz-transition: margin 0.5s ease;
       -o-transition: margin 0.5s ease;
      -ms-transition: margin 0.5s ease;
          transition: margin 0.5s ease;
}

/*HOVER*/
.button:hover .bottom {
  margin: -10px 0 0 10px;
}

.button:hover .top {
  margin: -80px 0 0 10px;
  line-height: 35px;
}

/*ACTIVE*/
.button a:active {
background: #00b7ea; /* Old browsers */
background: -moz-linear-gradient(top,  #00b7ea 36%, #009ec3 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(36%,#00b7ea), color-stop(100%,#009ec3)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* IE10+ */
background: linear-gradient(top,  #00b7ea 36%,#009ec3 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00b7ea', endColorstr='#009ec3',GradientType=0 ); /* IE6-9 */

}

.button:active .bottom {
  margin: -20px 0 0 10px;
}

.button:active .top {
  margin: -70px 0 0 10px;
} 
```

***[现场演示](http://tinkerbin.com/BOi9zJeZ)***

# ruby-on-rails - 如何将 CarrierWaveDirect 与嵌入式 Mongo 文档和旧版 Carrierwave 文件一起使用

> ID：12702384
> 
> 赞同：3
> 
> 时间：2012-10-03T05:28:38.623
> 
> 标签：ruby-on-rails, heroku, amazon-s3, carrierwave

我正在寻找在 Heroku 上的 Rails 应用程序中上传文件的最佳方法。设置：Rails 3、Carrierwave、Heroku、Mongoid

问题：偶尔，当用户上传不同大小的文件时，图像会保存到数据库中，但在 Amazon S3 上无法以任何形式使用。这会导致图像在前端显示为丢失的图像占位符。

可能原因：图片已上传，但处理时间过长，由于Heroku的30秒硬请求时间限制导致请求超时，或者图像太大，尝试上传时，请求超时并出现H12错误。

解决方案：实施carrierwave-direct并将处理移至后台

拦截器：CarrierWaveDirect 不是 CarrierWave 的替代品。事实上，它在上传图片的过程中引入了一些重大的变化，特别是在db记录持久化的同时，不上传图片。此外，它不适用于我现有的目录结构，因此将现有文件移动到新结构似乎过于艰巨。CarrierWaveBackgrounder 不适合嵌入文档。

问题：我该怎么做？示例代码（如果需要），但尝试思考这个不仅仅是编码它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T08:13:09.887

如果您需要处理单个文件，请查看涵盖 CarrierWaveDirect 并深入上传到 S3 的[Railscast 。](http://railscasts.com/episodes/383-uploading-to-amazon-s3)结合[carrierwave-mongoid](https://github.com/jnicklas/carrierwave-mongoid) gem，如果你想走这条路，你应该能够运行单个文件上传。

不过老实说，我只是去上传多个文件并完成它。[在第二部分中，他展示了使用标准 Carrierwave 和jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)而不是 CarrierWaveDirect的多文件上传设置。我倾向于同意这个决定。我只是无法让它正常工作，很可能是因为直接发布到 S3 所需的所有黑魔法。

Ryan 的设置一开始看起来很吓人，但它非常简单，在这一集的[源代码](https://github.com/railscasts/383-uploading-to-amazon-s3)中，他包含一个帮助类，该类负责处理 S3 所需的所有表单数据。

基本的工作流程是这样的：

**1）文件通过jQuery插件直接**从浏览器上传到S3上的临时存储桶或文件夹。

2) 带有临时上传 URL 的 AJAX POST 请求发送到应用程序，告诉它持久保存在数据库中并启动一个工作进程。

3) 工作进程下载临时文件，通过您的 CarrierWave 设置运行它并将完成的版本存储在正确的位置。

我认为他将[sidekiq用于后台工作，但我用](https://github.com/mperham/sidekiq)[IronWorker](http://www.iron.io/products/worker)设置了类似的东西，并且效果很好。一旦你有 jQuery 的东西和 CarrierWave 设置，你可以使用任何你想要的工作。

此外，在评论中，我解释了我如何从临时存储桶中删除原始上传文件，作为工作的一部分以保持整洁。有关如何直接发布到 S3 的所有肮脏细节，请参见[此处](http://aws.amazon.com/articles/1434)。即使你有助手类，理解这一点仍然是一个好主意。

# c# - 对象，来自javascript的对象消息试图根据第一个下拉列表填充下拉列表

> ID：12702385
> 
> 赞同：0
> 
> 时间：2012-10-03T05:28:40.403
> 
> 标签：c#, javascript, asp.net-mvc

我有一个下拉列表，其中包含一个访问列表，其显示如下： *`5/3/2012 At School`*此下拉列表下方是日期字段和访问类型下拉列表。我想根据第一个下拉列表填充这些字段。所以对于这个例子，日期字段将被填充，`5/3/2012`访问类型将是：`At School`

我正在使用 javascript 来使用它，但我有一个错误窗口显示 [object Object]。

这是我的代码：

JavaScript：

```
<script type="text/javascript">

var durationRowVisibilityCheck = function () {
    var disableDuration = $.trim($("select#UnableToVisitReasonId option:selected").text()).length != 0;
    var $durationRow = $("#visitDuration");
    if (disableDuration) $durationRow.hide(); else $durationRow.show();
};

$(function () {
    durationRowVisibilityCheck();
    $("select#UnableToVisitReasonId").change(function () {
        durationRowVisibilityCheck();
    });
    $("#VisitEntryId").change(function(e) {
        var visitEntryId = $("#VisitEntryId.option:selected").val();
        if (visitEntryId != '<%=Guid.Empty %>')
            GetVisitDetails(visitEntryId);
    });
});
function GetVisitDetails(visitEntryId) 
{
    $.ajax({
            url: '<%=Url.Action("GetVisitDetails", "VisitActivity") %>' + '?visitEntryId=' + visitEntryId,
            contenttype: "application/json; charset=utf-8",
            success: function(json) {
                populate(json);
            },
            error: function (xhr, status, error) {
                alert(xhr);
            },
            type: "POST",
            datatype: "json"
        });
    }
function populate(data) {
    $("#ActivityDate").val(data.VisitDate);
    $("#VisitTypeId").val(data.VisitTypeId);
} 
```

获取详细信息方法：

```
public JsonResult GetVisitDetails(Guid visitEntryId)
    {
        var model = new VisitDetailModel();
        VisitEntry visitEntry = _visitEntryService.Get(visitEntryId);
        if(visitEntry == null)
        {
            model.Message = string.Format(Message.NotFoundMessage, Resources.Entities.Visit.EntityName);
            return Json(model);
        }
        model.VisitEntryId = visitEntryId;
        model.VisitTypeId = visitEntry.VisitTypeId;
        if (visitEntry.VisitType != null)
            model.VisitType = visitEntry.VisitType.Description;
        model.VisitDate = visitEntry.VisitDate.ToShortDateString();
        return Json(model);
    }

    #region Nested Type:VisitDetailModel

    public class VisitDetailModel
    {
        public Guid VisitEntryId { get; set; }
        public short VisitTypeId { get; set; }
        public string VisitType { get; set; }
        public string VisitDate { get; set; }
        public string Message { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:59:28.637

尝试更换

```
datatype: "json" 
```

和：

```
dataType: "json" 
```

或者完全摆脱它，因为 jQuery 足够聪明，可以使用`Content-Type`来自服务器的响应标头并自动为您解析响应。

同时删除：

```
contenttype: "application/json; charset=utf-8", 
```

您没有向服务器发送任何 JSON。您正在发送一个正常的请求。

所以，这里是如何调整你的`$.ajax`电话：

```
$.ajax({
    url: '<%= Url.Action("GetVisitDetails", "VisitActivity") %>',
    type: 'GET',
    cache: false,
    data: { visitEntryId: visitEntryId },
    success: function(json) {
        populate(json);
    },
    error: function (xhr, status, error) {
        alert(xhr);
    }
}); 
```

因为我已经为 AJAX 请求指定了 GET 动词（这是用于从服务器检索数据的正确动词），所以您需要调整您的`GetVisitDetails`控制器操作，以便它通过 GET 发送 JSON，这在默认情况下是不允许的：

```
return Json(model, JsonRequestBehavior.AllowGet); 
```

以下选择器对我来说似乎也是错误的：

```
var visitEntryId = $("#VisitEntryId.option:selected").val(); 
```

`.change()`尝试直接在事件处理程序中检索下拉列表的选择值：

```
$('#VisitEntryId').change(function(e) {
    var visitEntryId = $(this).val();
    if (visitEntryId != '<%=Guid.Empty %>')
        GetVisitDetails(visitEntryId);
}); 
```

# ios - iCloud NSPersistentStoreDidImportUbiquitousContentChangesNotification 仅在应用启动后立即调用

> ID：12702386
> 
> 赞同：2
> 
> 时间：2012-10-03T05:28:42.433
> 
> 标签：ios, core-data, icloud, nsnotificationcenter, uimanageddocument

我的应用程序使用包含在 UIManagedDocument 中的核心数据数据库。当我尝试通过 iCloud 同步时，数据很少被刷新。我通过将以下 app 参数添加到我的方案中来打开普遍存在的日志。

```
-com.apple.coredata.ubiquity.logLevel 3 
```

参数日志输出显示目标设备在源设备上进行更改后很快就会识别出更改，但`NSPersistentStoreDidImportUbiquitousContentChangesNotification`不会触发通知。有时，通知会在看到更新后的很长一段时间内触发，但通常不会。

但是，当我重新启动应用程序时（在日志打印一些有关更改的文本后的任何时间）， `NSPersistentStoreDidImportUbiquitousContentChangesNotification`通知会立即触发，导致数据刷新。

注意：我已订阅通知。

```
[[NSNotificationCenter defaultCenter]addObserver:self
                                        selector:@selector(updatedFromCloud:)
                                            name: NSPersistentStoreDidImportUbiquitousContentChangesNotification
                                          object:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T16:17:50.590

You need to set the object to the NSPersistentStoreCoordinator that you're using so that the notification knows which object to listen to. You've set it to nil in your code.

Example:

```
[[NSNotificationCenter defaultCenter]addObserver:self
                                    selector:@selector(updatedFromCloud:)
                                        name: NSPersistentStoreDidImportUbiquitousContentChangesNotification
                                      object:self.persistentStoreCoordinator]; 
```

If you're posting the observer in a class that has access to the NSManagedObjectContext (but not the coordinator), you can simply extract the coordinator via self.managedObjectContext.persistendStoreCoordinator.

Hope this helps!

# android - Android 如何从 Json 字符串中获取 Json 解析？

> ID：12702387
> 
> 赞同：0
> 
> 时间：2012-10-03T05:28:42.773
> 
> 标签：android, json

在我的应用程序中，我在使用 URL 调用时收到 Json String 响应。Json 字符串响应是这样的：

```
jsonFlickrApi({
    "user": {
        "id": "87074969@N08",
        "nsid": "87074969@N08",
        "username": {
            "_content": "polamreddy_subbareddy"
        }
    },
    "stat": "ok"
}) 
```

由此，我想`id`通过解析获得价值。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:58:46.217

如果您的 JSON 字符串是 ..

```
 {
         "user":{
         "id":"87074969@N08",
         "nsid":"87074969@N08",
         "username":{
           "_content":"polamreddy_subbareddy"
                   }
      },
         "stat":"ok"
    } 
```

然后解析数据是这样的..

```
 JSONObject returnResult = jList.getJSONFromUrl();

     JSONObject status = returnResult .getJSONObject(stat);
     JSONObject user = returnResult .getJSONObject(user);

     String id = user.getString(id);
     String nsid = user.getString(nsid);
 JSONObject username = user.getJSONObject(username);
    String contenr = username .getString(content); 
```

试试这个..随时询问任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:43:13.503

试试这个我得到了解决方案：

```
thedata = new MyData().GetRequest(url, null, timeout);
Log.i(TAG, "" +thedata);

jObject = new JSONObject(thedata); 

JSONObject menuObject = jObject.getJSONObject("user");
attributeId = menuObject.getString("id");
Log.i(TAG, "" +attributeId); 
```

并初始化变量：

```
private final int[] timeout={3,10};
private String thedata; 
```

# java - Java 程序员能告诉我这段代码在做什么吗？

> ID：12702399
> 
> 赞同：-1
> 
> 时间：2012-10-03T05:30:14.140
> 
> 标签：java, encryption

这应该解密文件。我正在尝试找出算法，但在理解正在发生的事情时遇到了一些问题。有什么提示吗？谢谢！

```
 localStringBuilder1 = new StringBuilder("");
      localStringBuilder2 = new StringBuilder("");
      Matcher localMatcher = Pattern.compile("[a-zA-z_\\-]+\\.html").matcher(paramString); //paramString is the encrypted file
      localMatcher.find();
      String str2 = localMatcher.group();
for (Integer localInteger1 = Integer.valueOf(0); localInteger1
            .intValue() < str2.length(); localInteger1 = Integer
            .valueOf(1 + localInteger1.intValue())) {
        localStringBuilder2.append(1 + Math.round(str2
                .codePointAt(localInteger1.intValue()) % 3));
        if (localInteger1.intValue() < "fdjkhireuhsdthuirdfg".length())
            localStringBuilder2.append(1 + Math
                    .round("fdjkhireuhsdthuirdfg".codePointAt(localInteger1
                            .intValue()) % 3));
    } 
```

**更新：简化循环**

```
for (int i = 0; i < str2.length(); i++) {
        localStringBuilder2.append(1 + Math.round(str2
                .codePointAt(i) % 3));
        if (i < "fdjkhireuhsdthuirdfg".length())
            localStringBuilder2.append(1 + Math
                    .round("fdjkhireuhsdthuirdfg".codePointAt(i) % 3));
    } 
```

你可以在[这里找到完整的源代码](https://compilr.com/lochie/decrypt/DataLoader.java)

***编辑*** 非常感谢 Vandey 解决了产生的字符串：“21321223331121”

然而，这并没有得到完整的答案。下一部分是（让我大吃一惊）：

```
label249: if (localInteger2.intValue() < i);
    try
    {
      localStringBuilder1.append((char)(Integer.parseInt(str1.substring(0 + localInteger2.intValue(), 2 + localInteger2.intValue()), 16) - Integer.parseInt(localStringBuilder2.substring(localInteger2.intValue() / 2 % localStringBuilder2.length(), 1 + localInteger2.intValue() / 2 % localStringBuilder2.length()))));
      label327: localInteger2 = Integer.valueOf(2 + localInteger2.intValue());
      break label249;
      str3 = localStringBuilder1.toString();
    }
    catch (StringIndexOutOfBoundsException localStringIndexOutOfBoundsException)
    {
      break label327;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:40:44.827

我建议设置一个断点并在执行代码时逐步执行代码。观察不同的表达方式，并根据代码的作用使用这些信息。这应该比仅仅查看代码并尝试理解要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:48:36.370

据我所知，对于 str2 的每个字符，stringBuilder 将为每个循环附加一个两位数，该数字由数字 1,2 和 3 组成，这意味着总共有 9 个这样的数字是可能的。你最终会得到一系列 1,2,3...（不按顺序），每对连续的字符，都会暗示一组字符，但是每个解密字符的令牌会随着这对字符的位置而变化字符串生成器中的数字。

此外，对于 stringBuilder 中的每对连续数字，只有三个 2digit 数字是可能的，因为数字的第二位由您的“fdjk ...”字符串固定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:56:05.433

str2 在这里是硬编码的，为它工作，否则它应该非常接近它。任何人，请随时将其编辑到正确的方向。添加最后一个打印行只是为了查看它打印的内容。很抱歉误导变量名。

```
 String str2 = "abcdefg";
    String toCompare = "fdjkhireuhsdthuirdf(g"; //looks like this changed when  you updated your question
    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < str2.length(); i++) {
        char ch = str2.charAt(i);
        int charInt1 = ch % 3;

        sb.append(1 + Math.round(charInt1));

        if (i < toCompare.length()) {
            char ch2 = toCompare.charAt(i);
            int charInt2 = ch2 % 3;
            sb.append(1 + Math.round(charInt2));
        }
    }
    System.out.println(sb.toString()); // printed 21321223331121 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T05:56:26.953

爱洛克，

看看你的班级和功能。这个函数只访问局部变量，它什么也不返回（虽然它应该返回一个字符串）。

你会从中得到什么？

# sql - 重写没有子查询的 sp

> ID：12702405
> 
> 赞同：0
> 
> 时间：2012-10-03T05:30:54.100
> 
> 标签：sql, join

有没有办法在没有子查询的情况下重写这个 SP。基本上 I.RemarkId 有时可以为空，我试图使用左连接或左外连接。我想始终从 flightinfo 返回行，并在 I.RemarkId 不为空时返回备注，并且在 I.remarkId 为空时在备注列中返回备注。

```
ALTER PROCEDURE [dbo].[Peach_GetFlightInfoForRoute]
    @FlightDate datetime,   
    @Origin nvarchar(3),
    @dest nvarchar(3),
    @Lang nvarchar(2)
AS
SELECT 
     I.FlightNumber
    ,FlightDate
    ,STD
    ,(select [Message] FROM FlightRemarkDetail WHERE RemarkId = I.RemarkId WHERE LangCode = @Lang) As [Remark]
FROM 
     [FlightInfo] as [I]
JOIN
     [FlightNumbers] as [N]
ON  
    I.FlightNumber = N.FlightNumber 
WHERE 
    FlightDate = @FlightDate AND (@Origin='' OR @Origin = N.Origin) AND (@dest = '' OR @dest = N.Destination)

FlightInfo
===========
FlightNumber    nvarchar(16)
FlightDate  datetime    
STD nvarchar(4) 
RemarkId int NULL

FlightRemarkDetail
==================
RemarkDetailId  int 
RemarkId    int NOT NULL
LangCode    nvarchar(2) 
Message nvarchar(512) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:35:45.403

这`LEFT OUTER JOIN`本质上是一样的。 `LEFT OUTER JOIN`使它不需要子表具有匹配的记录。因此，如果 FlightRemarkDetail 中没有记录，它将简单地显示为空（类似于您从子查询中获得的结果）。这是假设 FlightInfo 和 FlightRemarkDetail 之间存在 1 对 1（或 1 对 0）匹配。如果每个 FlightInfo 存在多个 FlightRemarkDetail 记录，则会导致重复行。

```
SELECT 
     I.FlightNumber
    ,FlightDate
    ,STD
    ,D.Message As [Remark]
FROM 
     [FlightInfo] as [I]
JOIN [FlightNumbers] as [N] ON I.FlightNumber = N.FlightNumber 
LEFT OUTER JOIN [FlightRemarkDetail] as [D] ON I.RemarkId = D.RemarkId
WHERE 
    FlightDate = @FlightDate AND (@Origin='' OR @Origin = N.Origin) AND (@dest = '' OR @dest = N.Destination) 
```

# python - DateOffset：每月的第几周

> ID：12702423
> 
> 赞同：4
> 
> 时间：2012-10-03T05:33:24.810
> 
> 标签：python, datetime, pandas

在尝试生成每个季度开始的第二个星期四的日期范围时遇到了一个奇怪的问题，从 3 月开始。

```
import pandas as pd
import numpy as np
from datetime import *

start = datetime(2010, 1, 1)
end = datetime(2012, 12, 31)

startrng = pd.bdate_range(start,end,freq='BQS-MAR')
startrng = startrng + pd.datetools.WeekOfMonth(week=1,weekday=3)

ts = pd.Series(np.random.randn(len(startrng)),index=startrng) 
```

我得到以下结果：

```
2010-03-11   -0.585671
2010-06-10   -1.201917
2010-09-09   -0.063487
2010-12-09    0.221270
2011-03-10   -0.239836
2011-06-09    0.256052
2011-09-08    1.074758
2011-12-08    0.962388
2012-03-08   -1.601438
2012-06-14    0.854736
2012-09-13    1.532970
2012-12-13   -0.084027 
```

虽然大多数日期偏移都有效，但 2012-06-14 实际上是本月的第三个星期四，而 2012-06-01 从星期五开始。我必须生成一个可以追溯到几年前的日期范围，手动检查所有生成的日期是没有效率的。

是否有另一种方法可以产生正确的结果集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:40:31.237

回答：

```
startrng = startrng + pd.datetools.WeekOfMonth(week=1,weekday=4) - pd.datetools.BDay() 
```

# c++ - C++ 中的泛型函数实现

> ID：12702426
> 
> 赞同：1
> 
> 时间：2012-10-03T05:33:37.957
> 
> 标签：c++

我正在开发一个新平台，我的代码是：

## 第一层：

```
Call_To_Layer2 (param1, param2); 
```

## 第 2 层：

```
Call_To_Layer2(param1, param2)
{
    Dispatch_Work_To_Thread(param1, param2);
}

Dispatch_Work_To_Thread(param1, param2)
{
    // create a new thread and execute the task
} 
```

来自 Layer1 的函数调用可以有任意数量的参数。那么如何在 Layer2 中设计这样的方法呢？layer2 中的 Dispatch_Work_To_Thread 方法需要函数名作为参数之一。既然参数的个数不是固定的，那怎么设计呢？

我一直在思考这个问题的设计，但直到现在才想出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:55:55.110

一种选择是使用,`Call_To_Layer2`并使用任何函数名称和参数创建函数对象。`Dispatch_Work_To_Thread`[`std::function<void(void)>`](http://en.cppreference.com/w/cpp/utility/functional/function)

第 1 层功能：

```
void foo_layer1(param1, param2);
void bar_layer1(param1, param2); 
```

第 2 层：

```
#include <functional>

Call_To_Layer2 (std::function<void(void)> f); // or reference_wrapper to std::function

f00 = std::bind(foo_layer1, param1, param2);
Call_To_Layer2(foo);  // passes it on to `Dispatch_Work_To_Thread` 
```

如果您没有所需的 C++11 支持，则可以改用[boost.function](http://www.boost.org/doc/libs/1_51_0/doc/html/function.html)和[boost.bind](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:38:12.903

1.  也许将所有参数放在一个结构或一个类中，然后将一个对象传递给`Call_To_Layer2`？如果类可以封装变量因子，这将起作用。

2.  另一种选择是使用可变参数函数语法`Call_To_Layer2(param1, param2, ...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:50:38.693

如果没有更具体的示例，很难知道最佳解决方案是什么。

[可变参数函数](http://en.wikipedia.org/wiki/Variadic_function#C.2C_Objective-C.2C_C.2B.2B.2C_and_D)可能是一种选择，尽管如今它们大多被认为是过时的。

最简单的可能是将参数简单地包装在 a`std::vector`或类似文件中，然后让第 2 层代码根据需要将它们解包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:00:08.173

这不是 C++ 可以移植的事情。但是，您可以稍微改变一下，让您的函数接受一个参数，该参数是一个包含所有相关参数的映射：

```
typedef std::map<std::string, Anything> Parms;

Anything function1(const Parms& parms)
{
    double x = parms("x");
    std::string title = parms("title");
    ...
}

void init_module()
{
    register_function("function1", function1,
                      "void return, double x, string title");
} 
```

在上面的示例`Anything`中是一个类，它可以包含您想要支持的任何类型作为参数或返回值。我习惯于自己编写代码，但可能`boost::any`还可以。每个发布的函数只接受一个参数字典，并且该函数还发布返回类型和参数。此信息存储在用于调度和参数检查的映射中，因此您无需对所有功能进行代码检查，并且还允许发布目录服务。

您还可以使用实现“调用”方法的类的实例，而不是发布服务的函数（这是我习惯做的）。

不幸的是，C++ 设计与这个用例不太兼容，需要大量编码。在运行时提供函数名称和参数的情况下，没有像“使用此名称调用函数并传递这些参数”这样的事情。

请注意，另一方面，这种用法并不少见，因此您可以找到许多试图将这种动态性添加到 C++ 的库......它们如何适合您的确切问题，它们具有哪些依赖关系以及它们的复杂程度是必须考虑的事情。

# c - 程序在运行时崩溃，同时给出输入

> ID：12702431
> 
> 赞同：2
> 
> 时间：2012-10-03T05:34:45.907
> 
> 标签：c, segmentation-fault, dynamic-memory-allocation

```
#include<stdio.h>

int main() {

  int cases,no,**event,i,j;
  scanf("%d",&cases);

  for(;cases>0;cases--) {
     scanf("%d",&no);
     event=(int **)malloc(no*sizeof(int *));
     for(i=0;i<no;i++) {
        event[i]=(int *) malloc(3*sizeof(int));
        for(j=0;j<3;j++) {
              scanf("%d",event[i][j]);
        }             
     }             
  }    

} 
```

我尝试用 gdb 调试它。它在为第二行提供输入时声明分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:37:42.720

将地址传递`event[i][j]`给scanf

```
scanf("%d", &event[i][j]); 
```

# compilation - 如何使用自定义 glibc 编译 VLC 1.1.12

> ID：12702432
> 
> 赞同：-1
> 
> 时间：2012-10-03T05:34:57.133
> 
> 标签：compilation, vlc, glibc

> **可能重复：**
> [单个主机上的多个 glibc 库](https://stackoverflow.com/questions/847179/multiple-glibc-libraries-on-a-single-host)

我的问题如下：

我需要在 Red Hat Enterprise Linux 5.5 上编译 VLC 1.1.12（开发/生产环境也是如此）。

使用当前版本的 glibc，VLC 在“配置”中抛出以下错误：

```
checking for buggy GNU/libc versions... found
configure: error: Buggy GNU/libc (version 2.5 - 2.7) present. VLC would crash; there is no viable
work-around for this. Check with your distribution vendor on how to update the glibc run-time. Alternatively, build with --disable-nls --disable-mozilla and be sure to not use LibVLC from other applications/wrappers. 
```

所以我尝试在服务器上单独编译 glibc 2.9 并将其安装在自定义位置 /opt/glibc-2.9

现在我不知道当我尝试编译 VLC 时是否可以使用这个自定义 glibc。

如果可能的话，有人可以建议吗？如果可以，该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:18:50.703

> 如果可能的话，有人可以建议吗？如果可以，该怎么做？

看到[这个](https://stackoverflow.com/a/851229/50617)答案。

# exception - iOS 6 访问 NSDate 时抛出异常

> ID：12702440
> 
> 赞同：0
> 
> 时间：2012-10-03T05:35:25.510
> 
> 标签：exception, nsdate, ios6

首先，我的应用程序适用于 iOS 5 版本。尽管当从日期选择器中获取日期并尝试通过核心数据时它会抛出异常。该错误偶尔会发生。程序启动时，我在控制台中收到以下警告。

```
2012-10-03 10:58:20.251 MyApp[1115:c07] Application windows are expected to have a root view controller at the end of application launch
2012-10-03 10:58:20.278 MyApp[1115:c07] *** -[__NSCFCalendar components:fromDate:]: date cannot be nil
I mean really, what do you think that operation is supposed to mean with a nil date?
An exception has been avoided for now.
A few of these errors are going to be reported with this complaint, then further violations will simply silently do whatever random thing results from the nil.
Here is the backtrace where this occurred this time (some frames may be missing due to compiler optimizations):
(
    0   CoreFoundation                      0x01d90a75 -[__NSCFCalendar components:fromDate:] + 85
    1   MyApp                               0x000034f8 -[MyApp tableView:cellForRowAtIndexPath:] + 2600
    2   UIKit                               0x00c9df4b -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 412
    3   UIKit                               0x00c9e01f -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:] + 69
    4   UIKit                               0x00c8680b -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1863
    5   UIKit                               0x00c9719b -[UITableView layoutSubviews] + 241
    6   UIKit                               0x00c3392d -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 279
    7   libobjc.A.dylib                     0x01bbc6b0 -[NSObject performSelector:withObject:] + 70
    8   QuartzCore                          0x01ac8fc0 -[CALayer layoutSublayers] + 240
    9   QuartzCore                          0x01abd33c _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 468
    10  QuartzCore                          0x01abd150 _ZN2CA5Layer28layout_and_display_if_neededEPNS_11TransactionE + 26
    11  QuartzCore                          0x01a3b0bc _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 324
    12  QuartzCore                          0x01a3c227 _ZN2CA11Transaction6commitEv + 395
    13  QuartzCore                          0x01adeb50 +[CATransaction flush] + 52
    14  UIKit                               0x00be19ff -[UIApplication _reportAppLaunchFinished] + 39
    15  UIKit                               0x00be24e1 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 2139
    16  UIKit                               0x00bf3315 -[UIApplication handleEvent:withNewEvent:] + 1022
    17  UIKit                               0x00bf424b -[UIApplication sendEvent:] + 85
    18  UIKit                               0x00be5cf8 _UIApplicationHandleEvent + 9874
    19  GraphicsServices                    0x02bd0df9 _PurpleEventCallback + 339
    20  GraphicsServices                    0x02bd0ad0 PurpleEventCallback + 46
    21  CoreFoundation                      0x01cf8bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    22  CoreFoundation                      0x01cf8962 __CFRunLoopDoSource1 + 146
    23  CoreFoundation                      0x01d29bb6 __CFRunLoopRun + 2118
    24  CoreFoundation                      0x01d28f44 CFRunLoopRunSpecific + 276
    25  CoreFoundation                      0x01d28e1b CFRunLoopRunInMode + 123
    26  UIKit                               0x00be17da -[UIApplication _run] + 774
    27  UIKit                               0x00be365c UIApplicationMain + 1211
    28  MyApp                               0x0000257d main + 125
    29  MyApp                                0x000024b5 start + 53
) 
```

这是我的代码，我在分配给核心数据之前检查 NSDate 对象是否为空。但仍然弹出相同的错误。

```
StudentDBManager *studentDBManager = [[studentDBManager alloc] init];
    NSManagedObjectContext *context = [studentDBManager getManagedObjectContext];

    Student *student = (Student*)[NSEntityDescription insertNewObjectForEntityForName:@"Student" inManagedObjectContext:context];   
    student.firstName = firstName;
    student.LastName = lastName;
    if(dateOfBirth != NULL)
    {
        NSLog(@"NOT NULLLLLLLLLLLLLLLLLLLlllllLllll");
        NSLog(@"DOB IS :%@", dateOfBirth);
        student.dOB =  dateOfBirth;

    }
    else
    {
        NSLog(@"dateOfBirth IS NULLLLLLLLLLLL");
    }

    student.createdDate = [NSDate date];
    student.title = @"Student"; 
```

# javascript - HTML5 Canvas 用 drawImage() 堆叠图像不能收敛到正确的颜色？

> ID：12702441
> 
> 赞同：1
> 
> 时间：2012-10-03T05:35:44.077
> 
> 标签：javascript, html, canvas

我正在使用 HTML5 画布制作绘图应用程序。要在主画布上绘画，我调用 drawImage() 并将包含画笔图像的单独画布的内容粘贴到鼠标位置。

我可以设置画笔画布的不透明度，当您绘制时，您可以清楚地看到实例堆叠并混合在一起，就像它们应该的那样。当不透明度设置为较低的值（例如 0.01）时，就会出现问题。你可以在一个地方涂鸦一段时间，但它永远不会完全收敛到画笔颜色。笔刷颜色为#000000 时，它将在#2a2a2a 处停止堆叠。

对此我能做些什么吗？这是一个示例应用程序。

```
<head>
    <style type="text/css">
        #canvas1 {
            border: 1px solid #000;
        }

        #canvas2 {
            border: 1px solid #000;
        }
    </style>
</head>

<body>

    <canvas id="canvas1" width="300" height="300">
    </canvas>

    <canvas id="canvas2" width="20" height="20">
    </canvas>

    <script type="text/javascript">

        var elem1 = document.getElementById("canvas1");
        var elem2 = document.getElementById("canvas2");
        var context1 = elem1.getContext("2d");
        var context2 = elem2.getContext("2d");

        var drawing = false;

        init();

        function init() {
            //draw brush
            var alpha = 0.01;    //opacity of the brush
            context2.fillStyle = "rgba(0, 0, 0, " + alpha + ")";
            context2.beginPath();
            context2.arc(10, 10, 10, 0, Math.PI*2, true); 
            context2.closePath();
            context2.fill();

            elem1.addEventListener("mousedown", function(){startdraw()});
            elem1.addEventListener("mouseup", function(){enddraw()});
            elem1.onmousemove = draw;
        }

        function startdraw() {
            drawing = true;
        }

        function enddraw() {
            drawing = false;
        }

        function draw(ev) {
            if(drawing) {
                context1.drawImage(elem2, ev.pageX - this.offsetLeft - 10, ev.pageY - this.offsetTop - 10);
            }
        }

    </script>
</body> 
```

# tfs - 将变更集和工作项与特定质量的先前基线构建相关联

> ID：12702444
> 
> 赞同：0
> 
> 时间：2012-10-03T05:35:48.873
> 
> 标签：tfs

在 TFS 2010 的默认工作流中，与当前构建关联的变更集和工作项是先前成功构建的增量，并包含在构建摘要中。

我的客户的要求有点不同。他们需要基线是其构建质量已设置为特定值的最新构建，例如“已发布”。因此，当前迭代中的每个构建都将包含一个完整的、不断增长的先前版本的更改列表。

可以在构建后使用脚本提取此信息，类似于[此 SO question](https://stackoverflow.com/questions/3821734/show-all-changesets-between-two-labels)，但我们需要将其包含在构建摘要中。

有没有人遇到过类似的需求？

我认为工作流程需要修改以检测以前的“已发布”版本，但我对如何包含它有点迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:00:16.693

如果手动工具没问题，那么这可能对您有用。它不会将工作项与构建相关联，但它会在构建中搜索所有关联的工作项，直到质量 X 的最后一个构建。

[http://gertgregers.wordpress.com/2012/05/22/build-release-notes/](http://gertgregers.wordpress.com/2012/05/22/build-release-notes/) - 无来源或下载

**编辑**

这是一个编辑构建定义的演练，但是它仍然让你有很多实现

[http://geekswithblogs.net/jakob/archive/2010/04/15/implementing-release-notes-in-tfs-team-build-2010.aspx](http://geekswithblogs.net/jakob/archive/2010/04/15/implementing-release-notes-in-tfs-team-build-2010.aspx)

# php - 如何使用 phpunit 测试多个查询结果

> ID：12702445
> 
> 赞同：0
> 
> 时间：2012-10-03T05:36:22.303
> 
> 标签：php, mysql, nested, phpunit

我对phpunit有点陌生，经过数小时的研究，我还没有找到办法。如何使用 phpunit 测试函数 getResults。

函数 getResults 和 getResultsDetails 属于 Result 类。函数 searchUser 属于 User 类。要通过登录，我可以使用用户名和密码在登录对象中调用 doLogin，它将保留在 $_SESSION

```
class Result {      
   public function __construct()
   {
       if(!isset($_SESSION)){
           session_start();
       }
       $this->loginObject = new Login();
   }

   public function getResults($fName, $lName)
   {
       $result = searchUser($fName, $lName);
       while ($row = mysql_fetch_assoc($results)) {
          $userIDs = $result['id'] . ',';
       }
       return 
         array(
        'userIDs' => $userIDs,
        'count'   => getResultDetails($userIDs),
        'results' => getResultDetails($userIDs, 0, 500),
        )
   } 
```

如果传入限制和偏移量，则返回结果，否则返回所有内容的计数

```
 public function getResultDetails($userIDs, $limit = null, $offset =null)
   {
       if(!$this->beforeFilter()) return "logout";
       //open db connection
       $sql = '';
       if(!$limit && !$offset)
       {
          $sql .= 'SELECT count(*) ';
       } else {
         $sql .= 'SELECT a.info, b.info, d.info ';
       }

       $sql .= 'FROM a ';
       $sql .= 'inner join b on blah blah';
       $sql .= 'inner join d blah blah';
       $sql .= "where d.userID in ($userIDs)";    
       if($limit && $offset)
         $sql .= "LIMIT $limit, $offset";

       return mysql_query($sql);
     }
  } 
```

这是根据 firName 和 lastName 搜索用户。searchUser 属于 User 类 class Patient{ public function __construct() { if(!isset($_SESSION)){ session_start(); } $this->loginObject = new Login(); }

```
 public function searchUser($fName, $lName)
   {
        if(!$this->beforeFilter()) return "logout";
        // logic to do search user and return user result mysq_query($sql)
        return userIDs;
   } 

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:08:53.150

您需要为此使用存根/模拟。基本上，您不希望在 getResult 方法单元测试中测试 searchUser 或 getResultDetails 方法。因此，您必须模拟它们并检查它们是否已使用适当的参数进行调用。

您将为此使用 phpunit mock。

第一步是设置任何预期值并构建模拟：

```
$someExpectedUser = 123;
$expectedCount = 234;
$expectedResult = array('blablabla');

$object = $this->getMock('YourTestedClass', array('searchUser', 'getResultDetails')); 
```

您现在已经创建了模拟对象。第一个参数是你的类的名称，第二个是你想要模拟的方法名称的数组（注意你没有在第二个参数中指定“getResult”方法 - 这意味着当你在 $object 上调用这个方法时 - 真正的将被调用）。

下一步是指定 searchUser 的行为：

```
$object->expects($this->once())
    ->method('searchUser')
    ->with($fName, $lName)
    ->will($this->returnValue($someExpectedUser)); 
```

getResultDetails 方法也一样：

```
$object->expects($this->at(1))
    ->method('getResultDetails')
    ->with($someExpectedUser)
    ->will($this->returnValue($expecedCount));

$object->expects($this->at(2))
    ->method('getResultDetails')
    ->with($someExpectedUser, 0, 500)
    ->will($this->returnValue($expecedResults)); 
```

然后你只需要调用测试方法并检查它是否返回预期值：

```
$expectedResult = array(
    'userIDs' => $someExpectedUser,
    'count'   => $expectedCount,
    'results' => $expectedResult
);
$result = $object->getResult($fName, $lName);
$this->assertEquals($expectedResult, $result); 
```

如果您有不清楚的地方，请告诉我。

问候！

# delphi - 如何使用 DLL 中包含的标志？

> ID：12702446
> 
> 赞同：1
> 
> 时间：2012-10-03T05:36:22.860
> 
> 标签：delphi, delphi-xe

我正在使用的函数包含三个参数，其中一个参数需要一个标志 (fCreationDisposition)：

> `function MpqOpenArchiveForUpdate(lpFileName: LPCSTR; fCreationDisposition, dwHashTableSize: DWord): THandle; stdcall; external 'lmpqapi.dll';`

该[文档](http://sfsrealm.hopto.org/inside_mopaq/chapter4.htm)指出有五个可用的标志。但是，当我使用任何标志时，Delphi 告诉我它是“未声明的标识符”。

为了能够在没有 Delphi 告诉我它是“未声明的标识符”的情况下访问标志，我必须添加什么额外的东西吗？

注意：在`uses`我调用该功能的部分下：

> `function MpqOpenArchiveForUpdate(lpFileName: LPCSTR; fCreationDisposition, dwHashTableSize: DWord): THandle; stdcall; external 'lmpqapi.dll';`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T06:16:13.040

您必须在代码中定义标志。在 Delphi 中，您必须从头开始定义所有内容，不能像在 C/C++ 中那样使用任何属于 DLL 的预制 API 头文件。所以你必须追踪标志数值（因为文档没有提供它们）并在你的代码中声明它们，例如：

```
// these values are just a guess, you will have
// to download the API and look them up...
const
  MOAU_CREATE_NEW = $1;
  MOAU_CREATE_ALWAYS = $2;
  MOAU_OPEN_EXISTING = $4;
  MOAU_OPEN_ALWAYS = $8;
  MOAU_MAINTAIN_LISTFILE = $10; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T06:18:40.200

您需要在 C++ 头文件中找到标志值的声明。然后将这些声明翻译成您的 Delphi 代码。它看起来像这样：

```
const
  MOAU_CREATE_NEW = ...;
  MOAU_CREATE_ALWAYS = ....;
  etc. 
```

我没有头文件，所以我无法填写值。

# ios - Core Audio - 多样本播放/录音

> ID：12702447
> 
> 赞同：1
> 
> 时间：2012-10-03T05:36:30.330
> 
> 标签：ios, audio, core-audio, openal, audiounit

我正在为 iOS 的 Core Audio 构建一个极低延迟的乐器。

考虑一下，我的仪器有 4 个触发器，每个触发器都会播放一个 .wav 文件。当我播放不同的 .wav 文件时，前一个 .wav 文件的声音不应被切断。

我还需要支持录制。

我已经成功地使用 OpenAL 实现了这一点，但我发现我需要使用 RemoteIO/AudioUnits，因为 OpenAL 不允许录制通过 OpenAL 播放的内容。

如果我使用 RemoteIO/AudioUnits，我是否需要使用具有 4 个通道的多通道混音器并将每个 .wav 文件的音频路由到每个通道。这样做会不会切断之前通过同一频道播放的.wav 文件的声音？

如果混合器不是这样做的正确方法，那么还有什么可能的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:13:05.903

音频混音器是执行此操作的正确方法，可以是音频单元多通道混音器，也可以是您自己的 DSP 代码。

如果您继续向混音器音频单元提供来自先前启动的声音的 PCM 数据，则即使在通过另一个通道启动后续声音之后，它也应该继续播放。

# algorithm - 《破解编码面试（第五版）》：9.10 装箱

> ID：12702448
> 
> 赞同：2
> 
> 时间：2012-10-03T05:36:33.233
> 
> 标签：algorithm, recursion, dynamic-programming

> 你有一堆 n 个盒子，宽度为 wi，高度为 hi，深度为 di。如果堆叠中的每个盒子的宽度、高度和深度都大于或等于其上方的盒子，则盒子不能旋转，只能堆叠在一起。实现一种方法来构建可能的最高堆栈，其中堆栈的高度是每个框的高度之和。

我知道有几篇文章可以讨论使用动态编程来解决它。由于我想练习编写递归代码，所以我编写了以下代码：

```
const int not_possible = 999999;

class box{
public:
    int width;
    int depth;
    int height;
    box(int h=not_possible, int d=not_possible, int w=not_possible):
        width(w), depth(d), height(h) {}
};

bool check_legal(box lower, box upper){
    return (upper.depth<lower.depth) && 
           (upper.height<lower.height) &&
           (upper.width<lower.width);
}

void highest_stack(const vector<box>& boxes, bool* used, box cur_level, int num_boxes, int height, int& max_height)
{
    if(boxes.empty())
        return;

    bool no_suitable = true;
    for(int i = 0; i < num_boxes; ++i){
        box cur;
        if(!(*(used+i)) && check_legal(cur_level, boxes[i])){
            no_suitable = false;
            cur = boxes[i];
            *(used+i) = true;
            highest_stack(boxes, used, cur, num_boxes, height+cur.height, max_height);
            *(used+i) = false;

                    no_suitable = true;
        }
    }

    if(no_suitable){
        cout << height << endl; //for debug
        if(height > max_height)
            max_height = height;
            return;
    }
} 
```

我已经使用很多示例对其进行了测试。例如：

```
boxes.push_back(box(4,12,32));
boxes.push_back(box(1,2,3));
boxes.push_back(box(2,5,6));
highest_stack(boxes, used, cur, boxes.size(), 0, max_height); 
```

在函数`highest_stack`中，有一行`cout << height << endl;`用于输出。如果我评论`no_suitable = true;`

> 输出为：1 2 4；1 2; 1, 1 4;

如果我不评论`no_suitable = true;`

> 输出为：1 2 4；2 4; 4；1 2; 2；1个；1 4; 0

他们都可以给出正确的结果，即 7。

> ```
> My question is:
> (1) Can anyone help me verify my solution?
> (2) Is there any more elegant recursive code for this problem? 
> ```
> 
> 我不认为我的代码很优雅。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T23:30:57.570

我会制作一个有向图，其中节点是盒子，边从盒子到可以放在上面的盒子。然后我会使用[最长路径算法](http://en.wikipedia.org/wiki/Longest_path_problem#Weighted_directed_acyclic_graphs)来找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T21:30:59.443

将关系设计为一组盒子数组。(Set[]) 即每个位置都有一个盒子数组。

用索引初始化每个框。

对于可以放置在当前框（box[i]）上方的每个框复选框，将其添加到集合数组中的集合中，即 set[i].add(box)

用可以放在上面的盒子运行DFS（相邻的作用）

维护一个marked[]、count[] 和boxTo[] 盒子数组。

遍历计数数组并找到最大值。

使用 boxTo[] 数组遍历底部框。

# asp.net - 如何知道共享主机 (GoDaddy) 是否支持 ASP.NET Web API

> ID：12702452
> 
> 赞同：5
> 
> 时间：2012-10-03T05:36:49.347
> 
> 标签：asp.net, asp.net-web-api, shared-hosting

我试图弄清楚是否可以在 GoDaddy 上部署 Web API 应用程序，但找不到好的答案。我最接近的是这个链接：

[http://support.godaddy.com/groups/web-hosting/forum/topic/go-daddy-compatible-with-asp-net-mvc-4-razor-syntaxe/](http://support.godaddy.com/groups/web-hosting/forum/topic/go-daddy-compatible-with-asp-net-mvc-4-razor-syntaxe/)

有没有办法判断共享主机是否支持 ASP.NET Web API？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T08:10:18.917

实际上，在托管方面没有作为 ASP.NET Web API 支持的概念。您真正应该做的是将[ASP.NET Web API NuGet 包](http://nuget.org/packages/Microsoft.AspNet.WebApi)安装到您的项目中，并且您通过此包获得的程序集是可部署的。

在托管方面，您需要在托管选项上寻找的是对 IIS 7 或更高版本的支持（我认为不支持 IIS 6，但我不确定）、.NET 4.0 或更高版本（更高版本是.NET 4.5 现在）和集成应用程序池可用性。如果你有这些，ASP.NET Web API 应用程序应该在 IIS 下运行没有任何问题。

如果您向托管服务提供商询问对 ASP.NET Web API 的支持，他们很可能不知道答案。相反，您可以要求我上面列出的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:40:13.750

如果它支持 MVC4，我认为我们不太可能 WebAPI 不起作用。

# c# - wp7手机应用页面中如何保存CustomObject状态的状态

> ID：12702456
> 
> 赞同：2
> 
> 时间：2012-10-03T05:37:37.453
> 
> 标签：c#, windows-phone-7

我有一个自定义类，我想在停用应用程序时保存对象，字符串、int 等普通类型能够保存状态并使用电话应用程序页面状态恢复它。我认为，我应该制作 myclass作为可序列化的，这样我在保存对象（MyCustomObject）和恢复对象状态时将无法面对这个问题。

我尝试使用 System.xml.serialization，并尝试按照 JesseLiberty 博客中的建议使用 [DataContract]，当我再次尝试使用它时，我遇到了问题我的网络框架是 2.0，为此它需要 3.0，我不知道是否合适与否。

任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:17:00.443

我正在使用这个 Helper 方法，我能够在 IsolatedStorage 中保存不同类型的数据（也包括自定义对象），并且可以轻松地检索它们。

```
//Helper method to save a key value pair in ISO store
    internal static void SaveKeyValue<T>(string key, T value)
    {
        if (IsolatedStorageSettings.ApplicationSettings.Contains(key))
            IsolatedStorageSettings.ApplicationSettings[key] = value;
        else
            IsolatedStorageSettings.ApplicationSettings.Add(key, value);
        IsolatedStorageSettings.ApplicationSettings.Save();
    }

//Helper method to load a value of type T associated with the key from ISO store
    internal static T LoadKeyValue<T>(string key)
    {
        if (IsolatedStorageSettings.ApplicationSettings.Contains(key))
            return (T)IsolatedStorageSettings.ApplicationSettings[key];
        else
            return default(T);
    } 
```

这是这些辅助方法的示例用法。

```
//Save your custom objects whenever you want
SaveKeyValue<MyCustomClass>("customObjectKey", customObject);

//Load your custom objects after the re activation of app..or whenever you need
MyCustomClass customObject = LoadKeyValue<MyCustomClass>("customObjectKey"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:00:45.663

该`PageState`对象只是一个`dictionary<string, object>`，它被序列化为 XML。

如果要在其中存储对象，则需要能够序列化和反序列化它们。

# python - 作用于一串数字的python map函数

> ID：12702470
> 
> 赞同：2
> 
> 时间：2012-10-03T05:38:58.850
> 
> 标签：python, string, map

我一直在使用 Python 中的 map 函数，我正在寻找一些帮助来理解以下行为：

```
foo="12345"
print map(int,foo) 
```

给你`[1, 2, 3, 4, 5]`。显然`int(foo)`是吐了出来`12345`。那么究竟发生了什么？由于字符串可以按字符迭代，因此上述两行是否与

```
print [int(x) for x in foo] 
```

我知道他们会输出相同的结果，但幕后有什么不同吗？一个比另一个更有效还是更好？还有一个“pythonic”吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T05:51:57.823

`map()`在某些情况下可能比使用列表推导要快一些，在某些情况下 map 比列表推导慢。

使用内置函数时：

```
python -mtimeit -s'xs=xrange(1000)' 'map(int,"1234567890")'
10000 loops, best of 3: 18.3 usec per loop

python -mtimeit -s'xs=xrange(1000)' '[int(x) for x in "1234567890"]'
100000 loops, best of 3: 20 usec per loop 
```

随着`lambda`,`map()`变慢：

```
python -mtimeit -s'xs=xrange(1000)' '[x*10 for x in "1234567890"]'
100000 loops, best of 3: 6.11 usec per loop

python -mtimeit -s'xs=xrange(1000)' 'map(lambda x:x*10,"1234567890")'
100000 loops, best of 3: 11.2 usec per loop 
```

但是，在 python 3x 中`map()`返回一个映射对象，即一个迭代器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T05:42:46.740

> 将函数应用于可迭代的每个项目并返回结果列表。

从[文档中`map`](http://docs.python.org/library/functions.html#map)

`int()` *尝试*将传递的内容转换为整数，`ValueError`如果您尝试一些愚蠢的事情，则会引发 a ，如下所示：

```
>>> int('Hello')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: 'Hello' 
```

`map()`将返回一个列表，该列表具有您要求它调用任何可迭代的函数的返回值。如果您的函数没有返回任何内容，那么您将获得一个`None`s 列表，如下所示：

```
>>> def silly(x):
...   pass
...
>>> map(silly,'Hello')
[None, None, None, None, None] 
```

这是执行以下操作的简短***有效***的方法：

```
 def verbose_map(some_function,something):
       results = []
       for i in something:
          results.append(some_function(i))
       return results 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:41:20.720

`map`可以认为是这样工作的：

```
def map(func, iterable):
    answer = []
    for elem in iterable:
        answer.append(func(elem))
    return answer 
```

基本上，它返回一个列表`L`，其中第 i 个元素是对可迭代的第 i 个元素`L`进行计算的结果。`func`

因此，在 for 循环的每次迭代中，带有s`int`的字符串`int`，该元素是一个特定的字符，当给定它时，它`int`会作为一个实际的`int`. 调用`map`此类字符串的结果是一个列表，其元素对应`int`于字符串中相应字符的 ed 值。

所以是的，如果`L = "12345"`, then`map(int, L)`是同义词`[int(x) for x in L]`

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T05:41:39.440

是的，幕后有很大的不同。如果你`print(map)`会看到它是内置的。内置函数的执行速度比用 python 编写的或大多数基于语言解析方式的函数快，map 使用快速 iter 方法，而列表推导则没有。其他没有区别。

```
map(int, '1'*1000000) 
```

对比

```
[int(i) for i in '1'*1000000] 
```

使用 CPython 和 unix time 程序，map 在 ~3 秒内完成，列表理解在 ~5 秒内完成。

哦，需要注意的一件事，这只适用于传递给 map 的函数是用 C 语言编写的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T05:53:03.687

```
foo="12345"

In [507]: dis.dis('map(int,foo)')
          0 <109>           28769
          3 STORE_SLICE+0  
          4 LOAD_ATTR       29806 (29806)
          7 <44>           
          8 BUILD_TUPLE     28527
         11 STORE_SLICE+1  

def map(func, iterable):
    answer = []
    for elem in iterable:
        answer.append(func(elem))
    return answer

dis.dis('map(int,foo)')
          0 <109>           28769
          3 STORE_SLICE+0  
          4 LOAD_ATTR       29806 (29806)
          7 <44>           
          8 BUILD_TUPLE     28527
         11 STORE_SLICE+1  
dis.dis('[int(x) for x in foo]')
          0 DELETE_NAME     28265 (28265)
          3 LOAD_GLOBAL     30760 (30760)
          6 STORE_SLICE+1  
          7 SLICE+2        
          8 BUILD_TUPLE     29295
         11 SLICE+2        
         12 SETUP_LOOP      26912 (to 26927)
         15 JUMP_FORWARD    26144 (to 26162)
         18 JUMP_IF_FALSE   23919 (to 23940) 
```

和时间：

```
In [512]: timeit map(int,foo)
100000 loops, best of 3: 6.89 us per loop

In [513]: def mymap(func, iterable):
     ...:     answer = []
     ...:     for elem in iterable:
     ...:         answer.append(func(elem))
     ...:     return answer

In [514]: timeit mymap(int,foo)
100000 loops, best of 3: 8.29 us per loop

In [515]: timeit [int(x) for x in foo]
100000 loops, best of 3: 7.5 us per loop 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T06:20:28.533

“更高效”是一罐蠕虫。在这台计算机上，将 map 与**CPython一起使用会更快，但****pypy**的列表理解更快

 **```
$ python -mtimeit 'map(int,"1234567890")'
100000 loops, best of 3: 8.05 usec per loop
$ python -mtimeit '[int(x) for x in "1234567890"]'
100000 loops, best of 3: 9.33 usec per loop
$ pypy -mtimeit 'map(int,"1234567890")'
1000000 loops, best of 3: 1.18 usec per loop
$ pypy -mtimeit '[int(x) for x in "1234567890"]'
1000000 loops, best of 3: 0.938 usec per loop 
```

即使需要额外的调用，Python3 也显示`map()`得更快`list()`

```
$ python3 -mtimeit 'list(map(int,"1234567890"))'
100000 loops, best of 3: 11.8 usec per loop
$ python3 -mtimeit  '[int(x) for x in "1234567890"]'
100000 loops, best of 3: 13.6 usec per loop 
```**

# bash - Bash 脚本 - while 循环中的变量范围

> ID：12702471
> 
> 赞同：1
> 
> 时间：2012-10-03T05:39:07.273
> 
> 标签：bash

> **可能重复：**
> [Bash 脚本 - Do-While 循环中的变量范围](https://stackoverflow.com/questions/7719548/bash-script-variable-scope-in-do-while-loop)

在下面的代码中，它打印了正确的`i`in 内部 while 循环值，但它在退出内部 while 循环后打印 0：

```
string="Medicine"
for file in *
do
    i=0
    cat $file | while read line
    do
        echo $line
        if [ "$line" == "$string" ];
        then
            i=`expr $i + 1`
            echo $i
        fi
    done
    echo $i
done 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T05:45:30.600

默认情况下，变量在 shell 脚本中具有全局作用域，这使“i”成为全局变量。如果您想将变量设为本地，请使用关键字“local”，例如：`local i=0`

有关更多详细信息，请查看链接[http://www.bashguru.com/2008/06/bash-variables-scope.html](http://www.bashguru.com/2008/06/bash-variables-scope.html)

# iphone - 从设备中删除应用程序后，本地通知仍然存在

> ID：12702476
> 
> 赞同：2
> 
> 时间：2012-10-03T05:39:51.093
> 
> 标签：iphone, ios, notifications, ios6, uilocalnotification

我们如何通过从设备中删除应用程序来删除本地通知。一旦我们使用应用程序设置本地通知并从设备中删除应用程序并重新安装显示本地通知的应用程序以及以前的版本数据，我就已经看到了。目前我正在使用IOS 6。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:52:22.963

一天后，通知应该会消失。如果您卸载应用程序并将时钟向前移动一天，它应该具有相同的效果。

# c++ - 深度优先搜索 - 场景图 - 我当前的深度是多少？

> ID：12702478
> 
> 赞同：0
> 
> 时间：2012-10-03T05:40:28.797
> 
> 标签：c++, graph, depth-first-search

- 大家好，我正在尝试为场景图实现“深度优先搜索”。这就是我到目前为止所拥有的——但我一直在思考如何跟踪当前元素在图表中的深度。假设我可以将 order.size() 计为第一个分支的深度 - 但是当代码再次跳转并进入下一个分支时，我如何弹出元素？任何提示将不胜感激。提前非常感谢。

```
//======================================================================
//depth first search
//======================================================================
// clean start - init visited flags in joints
for (int i = 0 ; i < m_joints.size(); i++){m_joints[i]->visited = false;}

// joint indices 
vector<int> stack;
vector<int> order;

for(int i = 0; i < m_joints.size(); i++)
{
    if(!m_joints[i]->visited)
    {
        stack.push_back(i);
        while(!stack.empty())
        {
            int top = stack.back();
            stack.pop_back();
            if(m_joints[top]->visited)
            {
                continue;
            }

            m_joints[top]->visited = true;
            order.push_back(top);
            // need to know how deep I am inside of the scene graph here
            // update transformation matrix here 
            // draw joint here

            for(int j = 0 ; j < m_joints[top]->children.size();j++)//all neighbours of top
            {
                if(!m_joints[top]->children[j]->visited)
                {
                    stack.push_back(m_joints[top]->children[j]->listPosition); 
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:18:59.540

如果我很好地理解了您的问题，您可以为每个元素添加一个整数变量“深度”，并在每次元素的深度发生变化时更新它。此外，您始终可以询问您的元素当前处于哪个深度

# android - Android Intent 向链接发送请求

> ID：12702482
> 
> 赞同：0
> 
> 时间：2012-10-03T05:40:37.397
> 
> 标签：android

如何从我的应用程序向链接发送请求而不在浏览器中打开它？我试过`Intent`但它在浏览器中打开；“安卓”

```
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:49:42.500

如果要在浏览器中显示，请使用以下代码

```
if (!url.startsWith("http://")
                    && !url.startsWith("https://"))
                url = "http://" + url;
            browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
startActivity(browserIntent); 
```

但是，如果您不想打开浏览器并将其显示在您的应用程序本身中，请使用 WebView。[这个链接](http://www.mkyong.com/android/android-webview-example/)有一个很好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:50:57.570

您可以使用普通的 Java 方法来完成此操作。

使用`HttpURLConnection`，设置标题和内容并发送请求。

```
URL url = new URL(urlString);
HttpURLConnection con = (HttpURLConnection) url.openConnection();
// Set properties for con

// Set headers on this connection if required

// add url form parameters
DataOutputStream ostream = null;
try {
    ostream = new DataOutputStream(con.getOutputStream());
    String requestContents;
    // Set the contents of the request

    if (requestContents != null) {
                    // write the contents to the stream
        ostream.writeBytes(requestContents);
    }

} catch (Exception e) {
    e.printStackTrace();
} finally {
    if (ostream != null) {
        ostream.flush();
        ostream.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:54:52.253

尝试一下

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  
String link ="url";  
DefaultHttpClient hc=new DefaultHttpClient();  
ResponseHandler <String> res=new BasicResponseHandler();  
HttpPost postMethod=new HttpPost(link);  
List nameValuePairs = new ArrayList();  
nameValuePairs.add(new BasicNameValuePair("action","XYZ" ));  
nameValuePairs.add(new BasicNameValuePair("udid","XYZ" ));    
nameValuePairs.add(new BasicNameValuePair("user", "XYZ"));  

try {
    postMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs));
      String response=hc.execute(postMethod,res);  
      System.out.println("response is== "+response);
      Toast.makeText(this,response, Toast.LENGTH_SHORT);
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T13:50:32.547

```
class RequestTask extends AsyncTask<String, String, String>{

    @Override
    protected String doInBackground(String... uri) {
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response;
        String responseString = null;
        try {
            response = httpclient.execute(new HttpGet(uri[0]));
            StatusLine statusLine = response.getStatusLine();
            if(statusLine.getStatusCode() == HttpStatus.SC_OK){
                ByteArrayOutputStream out = new ByteArrayOutputStream();
                response.getEntity().writeTo(out);
                out.close();
                responseString = out.toString();
            } else{
                //Closes the connection.
                response.getEntity().getContent().close();
                throw new IOException(statusLine.getReasonPhrase());
            }
        } catch (ClientProtocolException e) {
            //TODO Handle problems..
        } catch (IOException e) {
            //TODO Handle problems..
        }
        return responseString;
    } 
```

要执行这个类：

```
new RequestTask().execute(insert your Http link ); 
```

# facebook - 无法使用访问令牌获取页面墙帖子

> ID：12702483
> 
> 赞同：1
> 
> 时间：2012-10-03T05:40:40.767
> 
> 标签：facebook, facebook-page, facebook-access-token

我是我的朋友和我发布音乐的组的管理员。这是一个私人团体。

我想获得自己的 USER 访问令牌，以将帖子的 JSON 放到这面墙上。我不需要发帖，我只想检索内容，以便将其粘贴在 tumblr 上。

正如我几年前所记得的那样，Facebook API 是一堆完全臃肿、令人费解的废话，几乎没有简单的文档，所以我不知道为什么我对获得如此简单的困难感到惊讶一点信息。

我使用了我不久前创建的现有旧应用程序来请求我的访问令牌（当我输入 appid 和 secretid 时，我只是使用了 with_js_sdk.php 输出的对象）并且我收到的内容给了我一个空的数据 json - 这意味着访问令牌不起作用。我使用 grant_type=client_credentials 检索了应用程序访问令牌，但这也不起作用。是否有某个版本的 Grant_type 可以为我自己提供一个最新的访问令牌？或者我是否需要授予某些权限才能查看此页面上的帖子（即使我以自己的身份访问它），所以我不知道我会授予什么权限。

有人可以告诉我如何获取我自己的访问令牌以查看该组中的帖子吗？它快把我逼疯了。一个网站告诉我，我必须获得 SSL 证书，这太疯狂了。

这是我当前的请求：https://graph.facebook.com/171089229612510/feed?format=json&limit=25&since=1334425968&__previous=1&access_token=[ACCESS_TOKEN]

或者只是这个 https://graph.facebook.com/171089229612510/feed?access_token=[ACCESS_TOKEN]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:34:31.000

*也许您会*很高兴得知文档和 API与几年前相比有了很大改进。

要阅读组的提要，您需要[按照组对象的图形 api 文档中](http://developers.facebook.com/docs/reference/api/group/)`user_groups`所述请求权限。

在编写任何代码之前使用[图形资源管理](http://developers.facebook.com/tools/explorer)器进行尝试。

然后，由于您使用的是旧应用程序，因此最好确保您使用的是最新版本的 SDK。

# javascript - 用于确认弹出的 AngularJS 指令无法访问父范围

> ID：12702486
> 
> 赞同：2
> 
> 时间：2012-10-03T05:41:12.117
> 
> 标签：javascript, angularjs

我正在尝试创建一个弹出框来确认删除操作。我使用 clickover bootstrap 插件（第 3 方）创建了弹出框并创建了一个指令。

问题是我无法从已编译的 html 中访问弹出框按钮的父/兄弟范围。

实际上，这段代码没有做的是从弹出框的删除按钮中调用具有迭代变量 (v) 的作用域中的销毁函数。

JSF中：

[http://jsfiddle.net/maralc/PCB2D/](http://jsfiddle.net/maralc/PCB2D/)

波纹管是指令的代码：

```
function TestCtrl($scope) {
    $scope.list = {
         id: [{
             value: 1},
         {
             value: 2},
         {
             value: 3}]
     };
     $scope.destroy = function(id) {
         console.log("destroy called (" + id + ")");
     }
 }

 angular.module('TestApp', []).directive('buttonDelete', function($compile, $rootScope)      {
     return {
         restrict: 'E',
         replace: true,
         template: '<a class="button-delete"><i style="margin-top: 4px;" class="icon-     remove"></i></a>',
    link: function(scope, element, attrs) {
        //            debugger;
        //element.bind('click', function(e) {
        //                var popover = $();
        //                element.clickover({content: 'test'});
        element.clickover({
            global: true,
            title: 'Are you sure?',
            content: function() {
                //debugger;
                var element = $compile("<div class='btn-toolbar'><button id='button-confirm-delete-cancel' data-dismiss='clickover' class='btn'>Cancel</button><button id='button-confirm-delete-ok' class='btn btn-danger' ng-click='destroy(v)'>Delete</button></div>")(scope.$parent);
                return element.html();
            }
            //});
        });
    }
}
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:46:34.997

看起来它对我有用......`v`是一个对象而不是索引，例如：

```
{value: 2} 
```

因此，从您的销毁函数中只需执行 id.value 即可获取 id。或者我建议将您的重复表达式更新为：

```
v.id in list.id 
```

或者从ID重命名，很混乱。

# wordpress - 如何使用 WP eCommerce 插件在 wordpress 中添加父类别

> ID：12702488
> 
> 赞同：1
> 
> 时间：2012-10-03T05:41:27.467
> 
> 标签：wordpress, wordpress-theming

我正在使用[wp 电子商务插件](http://wordpress.org/extend/plugins/wp-e-commerce/)制作`eCommerce site`. 我`after install`在`added products`下面`Products >> Add new products`。所有这些工作都很好。但我想展示这一切`products under their parent category`。意味着下`electronics category`所有的`electronics products`都会在那里。那么怎么`add a parent category`去呢？任何帮助将是最明显的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:51:22.513

首先创建您能想到的所有父类别。然后，当您创建子类别时，您会注意到主体左侧（在 slug 下方）的第三个选项是“父”下拉菜单。

回答您的问题：根据我的经验，如果为产品分配了一个类别，则该产品将在查看立即关联的产品的父类别时显示。只要您的类别设置了正确的父/子关系，默认情况下它应该像这样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:46:50.540

首先在 Products->categories 下创建一个电子类别，然后创建一个子类别，如 Ironbox，remote 等。在 Add New Product Category 下，您可以找到 parent 选择父类别为电子。然后创建一个新页面，您可以找到插入产品的图标插入要显示的父类别。

# javascript - 现代浏览器是否始终如一地内联函数？如何预测内联的性能？

> ID：12702491
> 
> 赞同：5
> 
> 时间：2012-10-03T05:41:59.330
> 
> 标签：javascript, performance, inline

我的问题涉及通过函数内联进行现代浏览器优化。我认为我真的需要熟悉 V8、JavaScriptCore 和/或 SpiderMonkey 代码库的人来回答这个问题；或者至少是熟悉现代浏览器优化方法的人。

基本上我想知道是否有任何方法可以预测何时使用函数内联，以及如何利用它来优化性能并减少代码重复。

让我们以[joi](http://joijs.com/) tempo 中的以下简单函数为例：

```
function limit(f, max) {
    var count = 0, isFunction = typeof max == 'function';
    if(!isFunction) max = max >>> 0 || 1;
    return function limitedFunction() {
        if(isFunction ? !max(count) : (count >= max)) return;
        count++;
        return f.apply(this, arguments);
    };
} 
```

此函数接受一个函数`f`并返回一个包装函数，该函数限制可以通过包装调用原始函数的次数。例子：

```
var foo = limit(function() { console.log('foo'); }, 3);
foo(); // logs 'foo'
foo(); // logs 'foo'
foo(); // logs 'foo'
foo(); // doesn't log anything
foo(); // doesn't log anything 
```

它还接受一个返回`true`或`false`作为其第二个参数（而不是数字）的函数：

```
var bar = limit(
    function() { console.log('bar'); },
    function() { return Math.random() > 0.5 ? true : false }
);
bar(); // randomly logs 'bar' or doesn't log anything
bar(); // randomly logs 'bar' or doesn't log anything
bar(); // randomly logs 'bar' or doesn't log anything 
```

这是一个过于简单化、微不足道的例子，所以请耐心等待。我认为在不平凡的情况下有真正的应用程序，但我想使用一个简单的案例来了解浏览器如何进行或可以进行内联的根源。

重写此函数的一种方法（可能）（可能）会（非常轻微地）提高性能（我想）是将返回的结果`function`分为两种情况，一种`max`是函数，另`max`一种是数字：

```
function limit(f, max) {
    var count = 0, isFunction = typeof max == 'function';
    if(!isFunction) max = max >>> 0 || 1;
    return isFunction
        ? function limitedFunctionA() {
            if(!max(count)) return;
            count++;
            return f.apply(this, arguments);
        }
        : function limitedFunctionB() {
            if(count >= max) return;
            count++;
            return f.apply(this, arguments);
        };
} 
```

这样，*每次都会*`isFunction`调用检查是否必须发生，但在确定是否返回 or 时仅调用`true`一次。但是，这并不理想，因为存在一些冗余代码。`false` *`limitedFunction``limitedFunctionA``limitedFunctionB`*

 *我的问题涉及以下重写：

```
function limit(f, max) {
    var count = 0, isFunction = typeof max == 'function',
        check = isFunction
            ? function() { return !max(count); }
            : function() { return count >= max; };
    if(!isFunction) max = max >>> 0 || 1;
    return function limitedFunction() {
        if(check()) return;
        count++;
        return f.apply(this, arguments);
    };
} 
```

所以这是我的问题......**现代浏览器会足够聪明吗？**

```
if(check()) return; 
```

**进入**

```
if(!max(count)) return; 
```

**何时`isFunction`为真，并且**

```
if(count >= max) return; 
```

**什么时候`isFunction`是假的？**...防止调用额外`check()`函数的需要，每次都不必要地将额外函数扔到堆栈上。*

# java - 使用java在单个系统上生成100个虚拟IP

> ID：12702497
> 
> 赞同：0
> 
> 时间：2012-10-03T05:42:31.660
> 
> 标签：java, ip, virtualhost

我有一种情况，例如我必须在一个系统上虚拟创建 100 个 ip，其中每个 ip 将执行自己的请求响应任务。我已经在java中为单个真实IP编写了请求响应的应用程序。如何在系统上生成 100 个虚拟 ip 并为 java 中的每个 ip 绑定请求-响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:33:39.480

The maintenance of IP numbers is a task for the underlying operating system and there is no support for it in the standard java runtime. Hence if you want to do this you must invoke commands directly in the same way as you would if you were to do this personably by hand, and you must be authorized to do so by the operating system.

This strongly hints that you may be using the wrong tool for the job. Perhaps you should consider opening a new question describing what problem you really need to solve and ask for suggestions on how to design it?

# ios - 保留浮点值的IOS Json解析器

> ID：12702500
> 
> 赞同：0
> 
> 时间：2012-10-03T05:42:53.717
> 
> 标签：ios, json, api, yelp

我正在使用 Yelps 本地搜索 API，并尝试了原生 NSJsonserialization 类和 JSONKit。问题是我需要返回每个业务的纬度和经度的完整值，这两个解析器将纬度和经度四舍五入到小数点右侧的 7 位。当我将它们注释到地图时，这会导致位置不准确。

有谁知道我可以使用的一个好的 IOS Json 解析器来解析坐标浮动的全部值？我能想到的唯一其他解决方案是从 json 数据中解析地址，然后向 googles geolocation api 发送另一个调用以获取正确的纬度和经度，但这似乎不是很有效。谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:28:43.800

对不起，我很困惑显然右边的七位数就足够了。问题是我从 Yelp 得到的结果是不正确的。我在访问 yelp.com 并实际查看地图以查看我的注释后发现了这一点，事实上，这是正确的。

史蒂夫

# ruby-on-rails - 如何在 Ruby On Rails 中使用内部连接

> ID：12702506
> 
> 赞同：7
> 
> 时间：2012-10-03T05:43:39.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在铁轨上工作。

我的需要是，

```
@accountUrl = Account.find_by_id(current_account_id)

@details = Detail.find_by_acc_id(@accountUrl.id) 
```

如何从上面的示例编写内部连接查询

任何一个都可以。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-03T06:34:09.363

在这个简单的例子中，Rails 不使用连接，而是“在代码中”连接：

```
Account.includes(:details).where(:id => current_account_id).first 
```

它将进行两个单独的查询。

如果您需要选择条件，则必须“手动”（或通过范围）加入

```
Account.joins(:details).where("details.name" => selected_detail).first 
```

这将进行 INNER JOIN 并仅返回满足条件的帐户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T05:49:12.377

```
model A
  has_many :bs

model B
  has_many :cs 
```

在模型 A 中，你可以写

```
has_many :cs, :through => :bs #uses inner join to fetch the records. 
```

查看[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)和[http://asciicasts.com/episodes/215-advanced-queries-in-rails-3](http://asciicasts.com/episodes/215-advanced-queries-in-rails-3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T09:02:54.663

[在Rails 文档](https://apidock.com/rails/ActiveRecord/QueryMethods/joins)中的 Rails 示例中，默认情况下 INNER JOIN

```
User.joins(:posts)
=> SELECT "users".* FROM "users" INNER JOIN "posts" ON "posts"."user_id" = "users"."id" 
```

在您的情况下，它将是这样的：

```
Account.joins(:details)
       .where(id: current_account_id) 
```

# c# - 图像未显示在 Visual Studio 2005 的 Crystal 报表中

> ID：12702509
> 
> 赞同：2
> 
> 时间：2012-10-03T05:44:17.457
> 
> 标签：c#, winforms, crystal-reports

我创建了一个报告，然后在 xsd 中创建了一个使用 System.Byte 作为数据类型的字段。然后将值从 C# 传递到水晶报表。但图像未显示在 CR 中。当我打开 rpt 文件时，字节字段显示为数字（*将鼠标悬停在字节字段上时*）。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:17:17.830

通常在水晶报表中，我们不能通过图表动态加载图像。

如果您使用 MS-Sql 服务器，则使用 Image DataType 将图像存储到数据库中，然后在 XSD 中加载表。我过去面临同样的问题。根据我的想法，这是将图像加载到 CR 的唯一方法。在 CR 中，使用 Image 对象从数据库中加载值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T09:34:21.777

在数据集 XSD 中，我将数据类型从**System.Byte**更改为**System.Byte[]** 并且它起作用了。

# javascript - 使用jquery获取页面中的所有链接

> ID：12702511
> 
> 赞同：-6
> 
> 时间：2012-10-03T05:44:51.063
> 
> 标签：javascript, jquery, html

我需要使用`.each(function(){});`JQuery获取页面中的所有链接

```
<div id="mm">
    <ul class="mg">
        <li id="nav_sports">
            <a href="http://www.google.com" class="atest">Sports</a>
            <div id="sports">
                <ul>
                    <li>
                        <a href="http://www.dictionay.com">cricket</a>
                    </li>
                </ul>
                <ul id="cont1">
                    <li style="color:#444444">
                        <b>Popular</b>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T05:47:44.093

```
$("a").each(function() {
    //Do your work   
}) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T05:46:59.803

使用锚标记作为选择器

```
$("a").each(....) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-03T05:47:11.940

```
var links = [];
$('#mm a').each(function() {
   links.push( this.href ); 
   // output of links: ['http://www.google.com', 'http://www.dictionay.com']
   // According to comment
   // if you need each link separately then
   // may try like

   var href = this.href;
   // now process with the href as you wish      
}); 
```

对于所有`a`s，将选择器更改`#mm a`为 just `a`；

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T15:34:40.193

这就是我所期望的伙计们...感谢您的回复

```
$("a").attr("clink","");
    $(window).load(function(){
        $("#mm a").attr("clink","");
        $('#mm a').each(function(){
            var hrefl=$(this).attr('href');
            var clink=hrefl;
            $(this).attr('clink',clink);
            $(this).attr('href',"#");
        }); 
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-05T15:47:57.973

如果您想要页面上的所有唯一链接，请借用此页面上的其他答案和[数组中的唯一值](https://stackoverflow.com/questions/1960473/unique-values-in-an-array)

```
function onlyUnique(value, index, self)
{
    return self.indexOf(value) === index;
} 

function getAllLinks()
{
   var links = [];
   $("a").each(function ()
   {
      links.push(this.href);
   });

   return links.filter(onlyUnique);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-03T05:47:43.123

您可以这样做`$('a')`将返回页面上所有 A 元素的集合。

然后你可以迭代它`$('a').each(function(index, value){})`

# c# - 如何为数据集中存在的数据设置checkedlistbox检查ture C#

> ID：12702515
> 
> 赞同：0
> 
> 时间：2012-10-03T05:45:10.740
> 
> 标签：c#, winforms, visual-studio, visual-studio-2008

与 2008 年相比 - C#

我的checklistbox有问题，谁能帮助我，或者给我一些想法我应该怎么做才能解决这个问题..

我有一个 Checkedlistbox 里面有工作。我想检查从数据集中分配给员工的工作，并只检查那些工作是否为真。问题是当它检查第一个工作为真时，它从 foreach 循环中出来并引发异常。“此枚举器绑定的列表已被修改。只有列表没有更改时，才能使用枚举器。” 这是我写的代码，

```
string sSQL="select JOBNO from RentalVehicle";
dataset ds = munshi.executeDS(sSQL,"Jobs").Tables["Jobs"];

foreach(DataRow Erow in ds.Rows)    
{
    int CLB_RowNo = 0;

    //Jobdetail(2010-0191, HWS-01, ISB-6,KAD2-2, MAINT-01, PMO-2011-0052)
    string[] JNos = Erow["JOBNO"].ToString().Split(', ');   

    string SelectedJob = "", AJob = "";

    // Looping CLB_JobNo(CheckedListBox)
    foreach (Object obj in CLB_JobNo.Items) 
    {
        int i = 0;
        SelectedJob = obj.ToString();
        foreach (string part in JNos)
        {
            AJob = JNos[i].ToString();
            if (SelectedJob == AJob)
            {
                CLB_JobNo.SetItemChecked(CLB_RowNo, true);
            }
            i++;
        }
        CLB_RowNo++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:43:18.690

您可以先创建一个项目数组，然后对其进行迭代。

```
 Object[] jobs = CLB_JobNo.Items.Cast<Object>().ToArray();
 foreach (Object obj in jobs)
 {
     SelectedJob = obj.ToString();
     if (JNos.Contains(SelectedJob))
     {
         CLB_JobNo.SetItemChecked(CLB_RowNo, true);
     }
     CLB_RowNo++;
 } 
```

# multithreading - 如何将互斥锁的所有权授予特定线程？

> ID：12702521
> 
> 赞同：2
> 
> 时间：2012-10-03T05:45:52.573
> 
> 标签：multithreading, mutex, critical-section

想象一下我有一个互斥锁。有无限数量的其他线程等待锁定互斥锁。当我解锁互斥锁时，将选择其中一个线程进入临界区。但是我无法控制哪一个。如果我想让特定线程进入临界区怎么办？

我很确定这不能使用 POSIX 互斥锁来完成，但是，我可以使用不同的同步对象来模拟行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:01:08.380

您可以使用互斥锁、条件变量和线程 ID 来实现。

在解锁互斥锁之前，线程设置目标线程ID，广播条件变量并释放互斥锁。等待线程唤醒，锁定互斥体并检查目标线程 id 是否等于该线程 id。如果不是，则线程返回等待。

为了避免唤醒所有等待线程只是为了检查目标线程 id 然后返回等待，对此方法的优化是为每个等待线程使用单独的条件变量。这样，信号线程将通知特定目标线程的条件变量。

* * *

另一种选择是使用发送到特定线程的信号。假设我们`SIGRTMIN`用于此目的。首先，所有线程在开始时都会阻塞这个信号，这样信号就会处于未决状态并且不会在线程不等待它时丢失。当一个线程想要锁定互斥锁时，它首先调用`sigwait()`它以原子方式解除阻塞`SIGRTMIN`并等待它或交付一个已经挂起的互斥锁。一旦线程收到信号，它就可以继续并锁定互斥锁。信令线程用于`pthread_kill(target_thread_id, SIGRTMIN)`唤醒特定线程。

# multithreading - 线程和进程

> ID：12702523
> 
> 赞同：0
> 
> 时间：2012-10-03T05:46:03.250
> 
> 标签：multithreading, process, operating-system

我正在尝试修改我的操作系统概念，但我有些困惑。我知道一个进程是一个拥有自己地址空间的线程。

1）死锁是否仅由线程或进程引起？（线程共享进程的堆栈，不同的进程有不同的堆栈）。

2）单个进程会导致死锁吗？还是发生死锁需要多个进程？

我不确定这是否是问这个问题的正确地方。如果没有，请告诉我，我将删除该问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:53:09.457

线程和进程都可能陷入死锁，具体取决于它们试图锁定的内容。如果他们想要锁定的资源是进程内共享的资源（例如临界区），线程可能会陷入死锁。另一方面，如果它是全局共享的资源（例如，名为互斥体），进程可能会陷入死锁。对于 2)，必须涉及多个进程，因为多个进程必须尝试锁定（全局）共享资源才能发生死锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:54:54.707

答案在于您的问题本身。每个进程都有一个堆栈，该进程创建的所有线程共享堆栈。每当同一进程的两个线程请求其他线程具有锁定的资源（数据，通信，...）并依次等待其他资源的释放时，就会发生死锁。

答案：
对于**1)**：
线程导致进程内死锁，进程导致父进程内死锁（在大多数情况下操作系统）
对于**2)**：
是的，单个进程可能导致死锁。

# sql - 无法在 sql server 中删除和创建数据库

> ID：12702524
> 
> 赞同：53
> 
> 时间：2012-10-03T05:46:04.290
> 
> 标签：sql, sql-server-2008, tsql

我正在使用 SQL Server 2008，我似乎无法删除并创建数据库。

我尝试了几种不同的方法，但我总是在它似乎被创建之前无法放弃或尝试“使用”。

我目前的尝试看起来像这样。

```
use master;
GO
IF EXISTS (SELECT name FROM master.dbo.sysdatabases WHERE name = N'test')
BEGIN
DROP DATABASE [test];
END
GO
CREATE DATABASE [test];
GO
use [test];
GO 
```

MS论坛上建议使用这些`GO`方法来阻止选择数据库时出现的一些问题。

有了这个，我目前得到的输出（具有同名的矿石现有数据库）：

> 消息 3702，级别 16，状态 4，第 3 行
> 无法删除数据库“test”，因为它当前正在使用中。
> 消息 1801，级别 16，状态 3，第 1 行
> 数据库“测试”已经存在。选择不同的数据库名称。
> 消息 2714，级别 16，状态 6，第 2 行
> 数据库中已经有一个名为“staff_type”的对象。

为我的数据库中的每个表重复最后两行。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-03T05:56:29.777

如果您打开了任何连接到该数据库的查询窗口，我们通常会收到此错误，因此请确保关闭所有打开的连接到您要删除的 db 的查询窗口。

不要使用您要删除的数据库。使用 master 删除任何用户数据库，这是一种很好的做法。

确保没有其他进程附加到您要删除的数据库。

```
EXEC sp_who2
--Run kill spid for each process that is using the database to be dropped.
kill <<processid>> -- Kill 57 
```

使用`EXEC sp_who2`并检查 DBName 列，您的数据库名称不应出现在列表中，如果出现杀死使用的进程`kill <<processid>>`然后尝试删除。

试试这个代码。

```
use master
GO

IF EXISTS (SELECT name FROM master.dbo.sysdatabases WHERE name = N'test')
DROP DATABASE [test]
GO

CREATE DATABASE [test]
GO

use [test]
GO 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-04-01T09:10:23.943

1.  右键单击数据库并选择**“删除”**（或左键单击它并按“删除”键）。
2.  当“删除对象”对话框出现时，确保选中**“关闭现有连接”**（见下文，默认情况下未选中）。
3.  按**“确定”**。

![在此处输入图像描述](../Images/1bbdb952a38143de98af07c172f4eb12.png)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-10-03T05:51:59.837

试试这个：

```
use master;
GO

ALTER DATABASE test SET SINGLE_USER WITH ROLLBACK IMMEDIATE;

GO
..... 
```

这将回滚在该数据库上运行的任何事务，并使 SQL Server 数据库处于单用户模式。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-12T07:23:06.320

```
ALTER DATABASE test1 SET SINGLE_USER WITH ROLLBACK IMMEDIATE

ALTER DATABASE test1 SET OFFLINE;

DROP DATABASE test1 
```

在存储过程中试试这个

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-12T14:02:29.777

这将为您提供所有当前连接：

```
select spid, hostname, [program_name], open_tran, hostprocess, cmd
from master.dbo.sysprocesses 
where dbid = db_id('your_database_name') 
```

然后您可以使用 t-sql 游标执行 kill @spid，其中 @spid 的值来自上一个查询。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T05:50:39.043

如果您在使用 Master 时遇到上述错误。那么您需要`SQL Server Management Studio`完全关闭并再次打开它并连接到它并运行您的上述查询.....

希望，它会工作......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-04T17:57:56.907

如果您在通过 ADO.NET 和 以编程方式与数据库交互后遇到此问题`SqlConnection`，并且您确定您在使用后关闭了每个连接，并且那里真的没有其他人，您可能会被绊倒连接池。尝试使用此 C# 代码在连接到`master`或另一个数据库之前清除池以在您的数据库上发出`DROP DATABASE`命令：

```
SqlConnection.ClearPool(yourSqlConnectionObject); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-11T06:22:20.647

您需要关闭所有使用此数据库的查询窗口，还可能需要完全重新启动 SQL Server。这可能会解决您的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-05T19:13:32.673

除了上面 mr_eclair 的回答，我想补充一下：

*   在选择当前数据库的位置必须关闭所有查询窗口。
*   另一种选择是使数据库处于单用户模式。>>它将杀死所有其他用户进程
*   立即回滚设置离线。它将使数据库处于离线模式并将其恢复
*   使用 sp_who2 了解使用当前数据库的用户。并杀死所需的 spid

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-10T14:37:43.923

如果您打开了之前查询过您尝试删除的数据库的 SQL 文件，这些文件将阻止删除。如上所述。为我关闭这些已解决的问题

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-11T09:24:17.423

我在使用 Sql Server Management Studio 时遇到了这类问题。经过多天的谷歌搜索和实验，我终于发现了一个问题。

注意：你应该首先为这个表创建一个 drop 和 create table 脚本，否则你将没有你的表

1-首先只用它们对应的外键创建你的表。

2-用这些表创建一个可视化图表（Sql express-Databases-Databasename-DataBase Diagram-右键单击它并选择新的数据库图）

3-在图表上添加所需的数据表，并在这些数据表之间创建关系，并在创建表的过程中添加相应的外键

4-然后保存您的数据库

如果您忘记在数据表中添加给定字段，您可以轻松删除并创建数据表，为此，请执行以下步骤：

1-打开对应数据库的Database图

2-删除要添加某些字段的旧表与其他表之间存在的所有关系

3-然后从图表中删除相应的表（右键单击表，然后从数据表中选择删除表）

4-保存图表（Ctrl + S）

5-转到要删除并创建的表

6-右键单击表格并选择（将表格编写为然后选择删除并创建然后转到新的查询编辑器窗口），这将在新表格中编写表格脚本，此时您可以根据需要对其进行修改，例如和新旧同桌

旧表

```
 USE [DatabaseName]
      GO

         /****** Object:  Table [dbo].[Administrateur]    Script Date:  10/11/2016 2:06:04 PM ******/
      DROP TABLE [dbo].[Administrateur]
     GO

      /****** Object:  Table [dbo].[Administrateur]    Script Date: 10/11/2016 2:06:04 PM ******/
    SET ANSI_NULLS ON
    GO

    SET QUOTED_IDENTIFIER ON
    GO

   CREATE TABLE [dbo].[Administrateur](
[AdministrateurID] [int] IDENTITY(1,1) NOT NULL,
[Name] [nvarchar](max) NOT NULL,
[Surname] [nvarchar](max) NULL,
[Phone] [nvarchar](max) NOT NULL,
[Username] [nvarchar](max) NOT NULL,
[Password] [nvarchar](max) NOT NULL,
[Sexe] [nvarchar](max) NOT NULL,

 CONSTRAINT [PK_Administrateur] PRIMARY KEY CLUSTERED 
 (
[AdministrateurID] ASC
 )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY =    OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
 ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

 GO 
```

现在是带有 3 个新字段（电子邮件、图像和盐）的新同一张表

```
 USE [DatabaseName]
   GO

    /****** Object:  Table [dbo].[Administrateur]    Script Date: 10/11/2016 2:06:04 PM ******/
  DROP TABLE [dbo].[Administrateur]
  GO

   /****** Object:  Table [dbo].[Administrateur]    Script Date:    10/11/2016 2:06:04 PM ******/
  SET ANSI_NULLS ON
  GO

  SET QUOTED_IDENTIFIER ON
  GO

   CREATE TABLE [dbo].[Administrateur](
[AdministrateurID] [int] IDENTITY(1,1) NOT NULL,
[Name] [nvarchar](max) NOT NULL,
[Surname] [nvarchar](max) NULL,
[Phone] [nvarchar](max) NOT NULL,
[Email] [nvarchar](max) NOT NULL,
[Username] [nvarchar](max) NOT NULL,
[Password] [nvarchar](max) NOT NULL,
[Image] [nvarchar](max) NOT NULL,
[Sexe] [nvarchar](max) NOT NULL,
[Salt] [nvarchar](max) NOT NULL,
 CONSTRAINT [PK_Administrateur] PRIMARY KEY CLUSTERED 
  (
   [AdministrateurID] ASC
 )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY =    OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
 ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO 
```

然后在修改后的Datatable页面，按Execute。它不会第一次执行，会写一些遇到的错误，但不要在意，第二次按执行即可。这时它会执行并在文档底部写入成功信息。然后选择数据库并单击刷新（或按F5），他将更新您的数据库在某台计算机上的表，否则您将需要重新启动程序在其他电脑上看到更新之前（我不知道为什么，所以不要让我解释）。

现在返回图表并 dd 更新的表，然后将这些（此）表连接到与其有任何关系的表。

希望这会节省一些人的时间。

我不

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-26T11:39:19.313

我知道我比赛迟到了。但这是我**一步一步**做到这一点的方法。这种情况经常发生，我不想在很多步骤中执行此操作，所以我将其合并为一个步骤。

```
DECLARE @databaseName VARCHAR(30); 
DECLARE @resource_type_to_kill VARCHAR(30); 
DECLARE @processIdToKill INT;

SET @databaseName = 'yourDatabaseName' 
SET @resource_type_to_kill = 'DATABASE'

DECLARE @TempSession TABLE
(
    ProcessIdToKill INT,
    DatabaseName VARCHAR(100),
    Request_Mode VARCHAR(100),
    HostName VARCHAR(100),
    LoginTime VARCHAR(100),
    LoginName VARCHAR(100),
    Status VARCHAR(100),
    Reads VARCHAR(100),
    Writes VARCHAR(100)
);
INSERT @TempSession
SELECT DISTINCT
    session_id,
    name,
    request_mode, 
    host_name,
    login_time,
    login_name,
    status,
    reads,
    writes
FROM    sys.dm_exec_sessions
    LEFT OUTER JOIN sys.dm_tran_locks ON sys.dm_exec_sessions.session_id =  sys.dm_tran_locks.request_session_id
    INNER JOIN sys.databases ON sys.dm_tran_locks.resource_database_id = sys.databases.database_id
WHERE   resource_type = @resource_type_to_kill
AND name = @databaseName
ORDER BY name

--SELECT * FROM @TempSession --Debugging

SELECT @processIdToKill = ProcessIdToKill FROM @TempSession

--SELECT @processIdToKill --Debugging

--Run kill for the process that is using the database to be dropped.
DECLARE @SQL nvarchar(1000)
SET @SQL = 'KILL ' + CAST(@processIdToKill as varchar(4))
PRINT 'Killing the process'
EXEC (@SQL)

--And then drop the database
DECLARE @DropSQL nvarchar(1000)
SET @DropSQL = 'DROP DATABASE ' + @databaseName
PRINT 'Dropping the database'
EXEC (@DropSQL) 
```

如果有许多进程正在使用数据库，则只需多次运行即可。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-03T17:05:11.160

这里完全是随机的想法。但是，如果您在 Visual Studio 中打开了一个 SQL DB 项目，即使您没有采取任何操作或在 SSMS 中打开查询窗口，它的开放性也会占用进程。

这就是我的问题。完全关闭 Visual Studio，让我可以毫无问题地删除数据库。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-03T13:35:55.253

对于 linux 尝试重新启动 mssql.server

```
sudo systctl mssql-server.service 
```

然后 `DROP Databse "DatabseName"`

# php - 如何在 php 代码中调用 __autoload()

> ID：12702527
> 
> 赞同：13
> 
> 时间：2012-10-03T05:46:19.670
> 
> 标签：php, autoload, autoloader

我是 php 新手，我想在我的代码中使用 php5 的 __autoload 功能。我在 index.php 中编写了以下代码，但我不明白应该如何以及何时调用 __autoload 函数。

```
function __autoload($class) {
    if (file_exists($class . '.php')) {
        include($class . '.php');
    } else {
        throw new Exception('Unable to load class named $class');
    }
} 
```

我也看过[这个线程](https://stackoverflow.com/questions/7753269/how-will-this-autoload-function)，但我的应用程序中没有这样的自动加载器类。每个应用程序都需要一个单独的类来使用自动加载吗？如果没有，我可以拥有像上面这样的单一功能并完成它的任务吗？谁能解释如何在我的 php 代码中调用上述 __autoload 函数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T05:48:02.000

您不会调用`__autoload()`自己，PHP 在尝试查找类的实现时会调用。

例如...

```
function __autoload($className) {
     include $className . '.php';
}

$customClass = new CustomClass; 
```

...这将调用，作为参数`__autoload()`传递。`CustomClass`然后，此（例如愚蠢的）`__autoload()`实现将尝试通过`php`在末尾添加扩展名来包含文件。

顺便说一句，您应该`spl_autoload_register()`改用。然后，您可以拥有多个实现，这在将多个库与自动加载器一起使用时很有用。

> ...`__autoload()`不鼓励使用，将来可能会被弃用或删除。

[来源](http://php.net/manual/en/language.oop5.autoload.php)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T13:39:15.883

在 PHP 中 __autoload() 是一个魔术方法，这意味着当您尝试创建类的对象时它会自动调用，如果 PHP 引擎在脚本中找不到该类，它将尝试调用 __autoload() 魔术方法。

您可以按照以下示例实现它：

```
function __autoload($ClassName)
{
    include($ClassName.".php");
}

$CustomClassObj = new CustomClass();
$CustomClassObj1 = new CustomClass1();
$CustomClassObj2 = new CustomClass2(); 
```

创建新对象时，它将自动包含所有类文件。

PS为此，您必须提供与类名相同的类文件名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-14T17:51:46.473

你们需要使用`require_once`而不是`include`哪个会吃掉你的记忆最好的方法是：

```
function __autoload($class) {
   $class_name = strtolower($class);
   $path       = "{$class}.php";
   if (file_exists($path)) {
       require_once($path);
   } else {
       die("The file {$class}.php could not be found!");
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-08T09:33:10.037

您也可以`spl_autoload_register()`用于加载 php 文件，这比例 `__autoload`如：

```
<?php 
spl_autoload_register('myautoloadClass::myautoloadMethod');

class myautoloadClass{

   public static function myautoloadMethod(){
   require_once 'yourPath/'.'yourphpFile'.'.php';
   }

}

$obj = new xp; 

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-14T04:58:34.847

不要使用 __autoload() 而是使用 spl_autoload_register。[请参阅 php 手册](http://php.net/manual/en/language.oop5.autoload.php)，其中说

spl_autoload_register() 为自动加载类提供了更灵活的替代方案。出于这个原因，不鼓励使用 __autoload() 并且将来可能会弃用或删除。

```
 <?php

    // function __autoload($class) {
    //     include 'classes/' . $class . '.class.php';
    // }

    function my_autoloader($class) {
        include 'classes/' . $class . '.class.php';
    }

    spl_autoload_register('my_autoloader');

    // Or, using an anonymous function as of PHP 5.3.0
    spl_autoload_register(function ($class) {
        include 'classes/' . $class . '.class.php';
    });

    ?> 
```

# ruby - 用于 Salesforce Soap Api 的 Ruby gem

> ID：12702529
> 
> 赞同：1
> 
> 时间：2012-10-03T05:46:46.107
> 
> 标签：ruby, soap, rubygems, salesforce

Salesforce Rest Api 和 Bulk Api 有几个宝石。Salesforce SOAP Api 有什么宝石吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:12:49.413

[https://rubygems.org/gems/databasedotcom](https://rubygems.org/gems/databasedotcom)

此 Gem 提供对 Salesforce 对象的类似 ActiveRecord 的访问。我很幸运。它抽象了 SOAP/REST 协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:39:37.687

经过几次尝试后，我选择了`Savon Gem`.

# scheme - 将列表解压缩到球拍中的两个单独列表中

> ID：12702535
> 
> 赞同：0
> 
> 时间：2012-10-03T05:47:14.903
> 
> 标签：scheme, racket

我正在尝试编写一个名为 unzip 的函数，该函数接受一个列表并评估两个列表的列表，其中两个列表具有原始列表的交替元素。

到目前为止，这就是我所拥有的：

```
(define (unzip lst)
    (if (null? lst)
        '()
        (... 
```

这是它应该如何工作的：

(unzip '(1 a 2 b 3 c)) 应该评估为 ((1 2 3) (abc))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:00:33.777

你所拥有的是错误的轨道，对不起。（想想如果给定一个空输入，结果应该是什么。）类似于我对你上一个问题的回答，这是一个框架解决方案：

```
(define (unzip l)
  (if (null? l) ???
      (let ([next (unzip ???)])
        (list (cons ??? ???) ???)))) 
```

适当填写`???`s。（是的，我的解决方案经过测试，适用于奇数和偶数输入。）

# javascript - javascript 对象的参数元素中有什么反斜杠？

> ID：12702536
> 
> 赞同：1
> 
> 时间：2012-10-03T05:47:23.007
> 
> 标签：javascript, jquery

我正在用萤火虫检查[这个网站](http://ipsos.com.au/)。在页面部分的第三个`<script/>`标签内`head`，我发现了一个以下列方式声明的对象变量（但在这里被我截断了）：

```
var EM={
"ajaxurl":"http:\/\/ipsos.com.au\/wp-admin\/admin-ajax.php",

"bookingajaxurl":"http:\/\/ipsos.com.au\/wp-admin\/admin-ajax.php",

"locationajaxurl":"http:\/\/ipsos.com.au\/wp-admin\/admin-ajax.php?action=locations_search",

"firstDay":"1","locale":"en"}; 
```

我不知道该变量的效用。让我印象深刻的是那里提供的 3 个网址。为什么那里存在反斜杠？难道不能是这样的：

“ajaxurl”：**“ [http://ipsos.com.au/wp-admin/admin-ajax.php](http://ipsos.com.au/wp-admin/admin-ajax.php) ”**

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T05:51:48.727

在脚本元素中，有各种字符序列（取决于 HTML 的版本）将终止该元素。`</script>`将永远这样做。

`<\/script>`将不会。

转义`/`字符不会改变 JS 的含义，但会阻止任何此类 HTML 结束脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T06:47:23.213

这`\/\/`是为了避免以下情况：

当 url 看起来类似于`"ajaxurl" : "http://google.com/search?q=</script>"`

尝试在浏览器地址栏中复制粘贴 url。这是正确处理的。否则，您最终可能会遇到脚本错误，并且页面可能无法按预期工作。

想象一下 DOM 操纵器替换脚本标记的 src 属性中的值，然后 javascript 引擎报告多个错误，因为引用的特定脚本可能由于不正确定义的 src 值而无法加载
希望这会有所帮助。
没有这些小东西，生活会很忙碌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T05:50:51.427

它用于转义字符..

反斜杠 () 可用于在字符串中插入撇号、换行符、引号和其他特殊字符。

```
var str = " Hello "World" !! ";
alert(str) 
```

这行不通。。

你必须先逃离他们

```
var str = " Hello \"World\" !! ";
alert(str) ; \\ This works 
```

就Javascript而言，`/ and <\/`字符串内部是相同的。就 HTML 而言，`</`开始一个结束标记，但`<\/`没有。

# java - 嵌套视图的 Presenter 未初始化且无法处理其视图的事件

> ID：12702538
> 
> 赞同：1
> 
> 时间：2012-10-03T05:47:30.083
> 
> 标签：java, gwt, guice, gwt-gin, mvp4g

当我使用@inject 将嵌套视图注入基本视图的构造函数时，我遇到了一个问题。我无法在它自己的演示者中处理嵌套视图的事件。因此，我需要在基本视图的演示者中处理它们。我有 2 个视图及其各自的演示者： AppBaseView - AppBasePresenter；LoginView - 登录演示者。我@inject LoginView 到 AppBaseView 中。现在我必须处理 Login Button 事件，我无法在 LoginPresenter 中这样做，但需要在 AppBasePresenter 中处理它。不知道为什么会这样。我错过了什么吗？任何关于这个问题的观点将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:36:13.717

如果您尝试将相同的视图注入到多个类中，请记住您必须将其标记为`@Singleton`，否则请确保两个类都接收相同的实例。默认情况下，每次注入类时，Guice 和 Gin 都会创建一个全新的实例。从您的描述中很难看出，但您可能正在向演示者拥有的实例添加事件侦听器，然后在您的应用程序中显示*不同*的实例。

# xib - iPhone4 和 iPhone5 可以使用相同的 xib 吗？

> ID：12702546
> 
> 赞同：16
> 
> 时间：2012-10-03T05:48:03.320
> 
> 标签：xib, iphone-5

有什么方法可以使用相同的 xib 为 iPhone4 和 iPhone5 设计我的课程？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-05T11:11:44.653

是的，您可以使用相同的 XIB 通过 Auto-Layout 为 iPhone 4 和 iPhone 5 进行设计。

使用 iOS 6 作为基础 SDK 构建一个应用程序，并使用自动布局功能制作可以针对所有类型的屏幕进行缩放的屏幕。您需要 Xcode 4.5 来执行此操作。

在此处开始使用自动布局：http:
[//www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)
[http://www.raywenderlich.com/20897/beginning-auto-layout-第 2 部分，共 2 部分](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T18:30:20.337

添加一个名为 Default-568h@2x.png 的图像。这会将您的应用程序识别为支持 iPhone 5 指标的应用程序。而且您还需要正确地自动调整视图大小。

![在此处输入图像描述](../Images/12285e977991feccd361fc3318ddc1f4.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-03T06:12:24.250

对您的问题的简短回答是肯定的；

Long 是：- 如果您使用 XCode 4.5 并构建通用的应用程序，NIB 文件和类将完美地适用于 Iphone 4 和 Iphone 5；了解您了解这些手机的 SDK 版本而不是他们自己的手机版本很重要。

另一件事是 iphone 5 尺寸比 iphone 4 大一点，所以你需要相应地设计.. 请阅读我在[Iphone 5 屏幕分辨率问题上](https://stackoverflow.com/questions/12525200/iphone-5-screen-resolution-issue/12597403#12597403)的回答以便更好地理解。

另请参阅[如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)回答有关通用应用程序设计的更多说明。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-17T10:21:57.510

是的，有可能，![在此处输入图像描述](../Images/7a3439f49fe64fed5bb4218cfa10bd3a.png)

只需删除侧角并通过启用内箭头使对象自由。所以它会根据屏幕自动调整大小。

*   但请记住一件事，这仅在您提供所有默认或任何其他启动屏幕时才有效。

![在此处输入图像描述](../Images/561606d29ba0225cfdbadea26a32e410.png) ![在此处输入图像描述](../Images/0951c6133c39b663501944bba4a1ae68.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T07:08:18.053

使用`AutoAutoresizing`这样您就可以使应用程序与 iOS 5 和 iOS 6 兼容。如果您的布局具有最小的依赖关系，这很容易。这对于解决诸如`UIToolBar`. iPhone 5 中的按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T08:09:28.993

如果您想进行一些小的更改（例如图像位置和大小、滚动视图内容插入......），您可以使用代码来区分 iPhone 5 和 iPhone 4/4s，并在 if/else 语句中实现您的代码。

用这个：

[https://stackoverflow.com/a/12447113/1371949](https://stackoverflow.com/a/12447113/1371949)

检测 iPhone 类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-20T09:39:53.260

请根据设备定义以下行并检查条件。

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON )

if (IS_IPHONE_5) {

        btnBookmark.frame=CGRectMake(0, 460, 100, 70);
        btnBookmark.frame=CGRectMake(150, 460, 100, 70);

    }else{
        btnBookmark.frame=CGRectMake(0, 360, 100, 70);
        btnBookmark.frame=CGRectMake(150, 360, 100, 70);

    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-03T09:47:12.327

您可以使用苹果提供的自动布局功能。请参阅苹果文档：- [https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/Introduction/Introduction.html](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/Introduction/Introduction.html)

# ios - 我的应用内购买如何满足批量购买计划？

> ID：12702547
> 
> 赞同：0
> 
> 时间：2012-10-03T05:48:02.133
> 
> 标签：ios, in-app-purchase

我的客户想在她学区拥有的 16 台 ipad 上的一个应用程序中购买我的 2 个应用程序内购买产品。但是，由于他们的批量购买计划，他们不能将它们作为应用内购买购买。他们希望我们为这些比赛创建一个付费应用程序，以便他们购买。除了为他们单独创建付费应用程序之外，我们还有其他方法可以采用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:42:01.180

我是批量购买者，我自己也遇到了这个问题。据我从研究中得知，解决此问题的唯一方法是让开发人员创建一个付费的“完整版”，其中包含应用内购买的所有功能。

如果有人想出更好的方法，请分享！

# typescript - TypeScript 中的构造函数重载

> ID：12702548
> 
> 赞同：523
> 
> 时间：2012-10-03T05:48:08.210
> 
> 标签：typescript, constructor, overloading

有没有人在 TypeScript 中完成构造函数重载。在语言规范（v 0.8）的第 64 页，有描述构造函数重载的语句，但没有给出任何示例代码。

我现在正在尝试一个非常基本的类声明；它看起来像这样，

```
interface IBox {    
    x : number;
    y : number;
    height : number;
    width : number;
}

class Box {
    public x: number;
    public y: number;
    public height: number;
    public width: number;

    constructor(obj: IBox) {    
        this.x = obj.x;
        this.y = obj.y;
        this.height = obj.height;
        this.width = obj.width;
    }   

    constructor() {
        this.x = 0;
        this.y = 0;
        this.width = 0;
        this.height = 0;
    }
} 
```

当使用 tsc BoxSample.ts 运行时，它会抛出一个重复的构造函数定义——这很明显。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：388
> 
> 时间：2012-10-03T06:14:22.700

TypeScript 允许您声明重载，但您只能有一个实现，并且该实现必须具有与所有重载兼容的签名。在您的示例中，这可以使用可选参数轻松完成，如下所示，

```
interface IBox {    
    x : number;
    y : number;
    height : number;
    width : number;
}

class Box {
    public x: number;
    public y: number;
    public height: number;
    public width: number;

    constructor(obj?: IBox) {    
        this.x = obj?.x ?? 0
        this.y = obj?.y ?? 0
        this.height = obj?.height ?? 0
        this.width = obj?.width ?? 0;
    }   
} 
```

或具有更通用构造函数的两个重载，如

```
interface IBox {    
    x : number;
    y : number;
    height : number;
        width : number;
}

class Box {
    public x: number;
    public y: number;
    public height: number;
    public width: number;

    constructor();
    constructor(obj: IBox); 
    constructor(obj?: IBox) {    
        this.x = obj?.x ?? 0
        this.y = obj?.y ?? 0
        this.height = obj?.height ?? 0
        this.width = obj?.width ?? 0;
    }   
} 
```

在[操场上看](https://www.typescriptlang.org/play?#code/JYOwLgpgTgZghgYwgAgJICED2APZBvZQ5AKCLOVwC5kQBXAWwCNoBuU8wgT2WrqdfYcAFhGABzIWB40GzKGw6EA7sAAmYIdL5yFRAL7FiCADZwAzmeRZceQcgAOtRseAIKvWQLKPnr5Jw9%20eTsfFzcRcUlAnRCnMOQVdSFogTsETBAzMChaBDBMKAAKTEYAKwB%20agwcAEp8MjsyDWAzADpcAF5kEor25HLy5AAGRqJmtu4unvLW7gHh0cJx1oiJKSmymdXJfsGRxWRlxI1kDd7jzXmh3UI9ImIDYgBII1MLKxwAJnxY3zdsFLBbxxPwBGRBG4OEHhURrQGQ0J%20C7wwxkdKZbK5fJFGqQ9FZHJ5ArFMpVay4l5ojIErHE6Zk2r1e4HZadbqbPpXRaHIQtWandm9OZ7bnLbbrQVbWE7Lks3ltC4C6atRVXSF3QgPYhAA)

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2016-07-31T21:08:19.627

关于**构造函数重载**，一个不错的选择是将附加重载实现为**静态工厂方法**。我认为它比在构造函数中检查所有可能的参数组合更具可读性和更容易。

在下面的示例中，我们能够使用来自保险提供商的数据创建一个患者对象，该数据以不同的方式存储值。为了支持另一种用于患者实例化的数据结构，可以简单地添加另一种静态方法，以便在对提供的数据进行规范化后尽可能地调用默认构造函数。

```
class Patient {
    static fromInsurance({
        first, middle = '', last,
        birthday, gender
    }: InsuranceCustomer): Patient {
        return new this(
            `${last}, ${first} ${middle}`.trim(),
            utils.age(birthday),
            gender
        );
    }

    constructor(
        public name: string,
        public age: number,
        public gender?: string
    ) {}
}

interface InsuranceCustomer {
    first: string,
    middle?: string,
    last: string,
    birthday: string,
    gender: 'M' | 'F'
}

const utils = { /* included in the playground link below */};

{// Two ways of creating a Patient instance
    const
        jane = new Patient('Doe, Jane', 21),
        alsoJane = Patient.fromInsurance({ 
            first: 'Jane', last: 'Doe',
            birthday: 'Jan 1, 2000', gender: 'F'
        })

    console.clear()
    console.log(jane)
    console.log(alsoJane)
} 
```

[您可以在TS Playground](https://www.typescriptlang.org/play?ts=4.2.2#code/MYGwhgzhAEAKYBcCWBTAdg6BvAUNf0ECiSw0AZgE4D2AtgJJoQCulYawKAFLgXxUkpEANNFpIAJhJApoAXmgByRaPAi8-fACNBCABYSwAT1EBzdBJSUN+AL4AuaIxZsOKAMLMidKwEpH8MjomLya0JQoCKxo0GgoAO7Q+kgQXDZh+AAGACRYagi2ornkgkS20LniUjK2mQB0CJRItFy+wukZzMggEHVg5lw6lPqGRm0dYeZoltYZvgDc6bY46cDUTI3MwAjUlGkZAA7MWiCksWC0KI5ETWim7YfHp2T9V7HMtFpWD2FHJ2dTGYAfmujSQd3Svmwy2WOHBCCs5DAnCcTFY7E4nm8l0o2HSJSECFBt3u6Sq0hQIMIYLuP3w+WJ4NJfCGI2MjNp6UBVkcigAsopoAAfJQAMUUOFhaw20C6SB68jxfFejkGugMiDeNyZULkAD4lWFpURsBQaLRRGhqIlygo5T06oYERN8MbMABtLQmaBaC0+iQAXUVVDoauGGoRvhd0Dd0HdaG9aD90yDCit8Va0ejSHI0C4CfkCi9UIiUUoMQADCsMjJMK9FQWALQ+ozVsIAenbTlzyRgRhQYEoihgrI1RmgEkkaEUmGAF1k-YQ2dz+do0AAPD610KRVxV4Wt1CAGRHvPTDf+3xX6CvRuNrMZUvRG-mJZ0ieaxyhTTp1W6g32r0TooA01AAIKUGwRj5gk0AACKaq04wZCGtCqjcHKmP+srdEBmqgRBUEwYkCEIlwNxXu+fA7IR7J5hIjikSg2HuhIdTmAgorMCAIAAJoDnsbQTuxkR8us+itKIbEcUxrQBkskqLDgWCdtAAAq8TUNA8TGDA1C5sAEQkHcN5wCQwTQOCRAYigqzrEQ0YAFbsLIaawYEqAYFwihwdQKCiAAUi5KjQAATAAjMhYRgD01BBXEioecEdSoc46JuDw0DRnwBJELy8UoCFDJKL5hVUWEo6jPl7DQOFoihRWjUhdylC8uK0a2FGdlMNQMh1KAAmZnwxq9SBIDUKYXDOXEUbDfZo11ONk0xRAcUuVGthAA)查看输出

* * *

比如说， TypeScript*中的方法重载并不是真正*的，因为它需要太多编译器生成的代码，而 TS 旨在不惜一切代价避免这种情况。方法重载的主要用例可能是为 API 中具有魔术参数的库编写声明。由于处理不同的可能参数集的所有繁重工作都是由您完成的，因此我认为在每种情况下使用重载而不是临时方法没有多大优势。

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2016-12-05T14:30:22.310

听起来您希望对象参数是可选的，并且对象中的每个属性也是可选的。在示例中，如提供的那样，不需要重载语法。我想在这里的一些答案中指出一些不好的做法。诚然，这不是本质上写的最小可能的表达`box = { x: 0, y: 87, width: 4, height: 0 }`，但这提供了您可能希望从所描述的类中获得的所有代码提示细节。此示例允许您使用一个、一些、全部*或*没有参数调用函数，并且仍然获得默认值。

```
 /** @class */
 class Box {
     public x?: number;
     public y?: number;
     public height?: number;
     public width?: number;     

     constructor(params: Box = {} as Box) {

         // Define the properties of the incoming `params` object here. 
         // Setting a default value with the `= 0` syntax is optional for each parameter
         let {
             x = 0,
             y = 0,
             height = 1,
             width = 1
         } = params;

         //  If needed, make the parameters publicly accessible
         //  on the class ex.: 'this.var = var'.
         /**  Use jsdoc comments here for inline ide auto-documentation */
         this.x = x;
         this.y = y;
         this.height = height;
         this.width = width;
     }
 } 
```

**需要添加方法吗？** *一个冗长但更可扩展的替代方案：*上面 的`Box`类可以作为接口工作，因为它们是相同的。如果您选择修改上述类，您将需要为传入参数对象定义和引用一个新接口，因为`Box`该类不再看起来与传入参数完全相同。`?:`注意在这种情况下，表示可选属性的问号 ( ) 移动的位置。由于我们在类中设置默认值，因此它们保证存在，但它们在传入参数对象中是可选的：

```
 interface BoxParams {
        x?: number;
         // Add Parameters ...
    }

    class Box {
         public x: number;
         // Copy Parameters ...
         constructor(params: BoxParams = {} as BoxParams) {
         let { x = 0 } = params;
         this.x = x;
    }
    doSomething = () => {
        return this.x + this.x;
        }
    } 
```

无论您选择哪种方式来定义您的类，这种技术都提供了类型安全的护栏，但可以灵活地编写以下任何一种：

```
const box1 = new Box();
const box2 = new Box({});
const box3 = new Box({x:0});
const box4 = new Box({x:0, height:10});
const box5 = new Box({x:0, y:87,width:4,height:0});

 // Correctly reports error in TypeScript, and in js, box6.z is undefined
const box6 = new Box({z:0}); 
```

编译后，您会看到仅在未定义可选值时如何使用默认设置；`var = isOptional || default;`它通过检查来避免广泛使用（但容易出错）的回退语法的缺陷`void 0`，它是 的简写`undefined`：

## 编译输出

```
var Box = (function () {
    function Box(params) {
        if (params === void 0) { params = {}; }
        var _a = params.x, x = _a === void 0 ? 0 : _a, _b = params.y, y = _b === void 0 ? 0 : _b, _c = params.height, height = _c === void 0 ? 1 : _c, _d = params.width, width = _d === void 0 ? 1 : _d;
        this.x = x;
        this.y = y;
        this.height = height;
        this.width = width;
    }
    return Box;
}()); 
```

## 附录：设置默认值：错误的方式

### （`||`或）运算符

在设置默认后备值时考虑 /or 运算符的危险，`||`如其他一些答案所示。下面的代码说明了设置默认值的错误方法。在针对0、''、null、undefined、false、NaN 等虚假值*进行*评估时，您可能会得到意想不到的结果：

```
var myDesiredValue = 0;
var result = myDesiredValue || 2;

// This test will correctly report a problem with this setup.
console.assert(myDesiredValue === result && result === 0, 'Result should equal myDesiredValue. ' + myDesiredValue + ' does not equal ' + result); 
```

### Object.assign(this,params)

在我的测试中，使用 es6/typescript 解构对象[可以比 Object.assign 快 15-90%](https://jsbench.me/1pkl4hrr55/2)。使用解构参数仅允许您分配给对象的方法和属性。例如，考虑这种方法：

```
class BoxTest {
    public x?: number = 1;

    constructor(params: BoxTest = {} as BoxTest) {
        Object.assign(this, params);
    }
} 
```

如果另一个用户没有使用 TypeScript 并试图放置一个不属于的参数，比如说，他们可能会尝试放置一个`z`属性

```
var box = new BoxTest({x: 0, y: 87, width: 4, height: 0, z: 7});

// This test will correctly report an error with this setup. `z` was defined even though `z` is not an allowed property of params.
console.assert(typeof box.z === 'undefined') 
```

* * *

## 回答 #4

> 赞同：82
> 
> 时间：2012-10-09T06:29:27.643

Note that you can also work around the lack of overloading at the implementation level through default parameters in TypeScript, e.g.:

```
interface IBox {    
    x : number;
    y : number;
    height : number;
    width : number;
}

class Box {
    public x: number;
    public y: number;
    public height: number;
    public width: number;

    constructor(obj : IBox = {x:0,y:0, height:0, width:0}) {    
        this.x = obj.x;
        this.y = obj.y;
        this.height = obj.height;
        this.width = obj.width;
    }   
} 
```

*Edit:* As of Dec 5 '16, see [Benson's answer](https://stackoverflow.com/a/40976608/399990) for a more elaborate solution that allows more flexibility.

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2014-01-27T16:02:44.593

**更新 2（2020 年 9 月 28 日）：**这种语言在不断发展，因此如果您可以使用`Partial`（在 v2.1 中引入），那么现在这是我实现这一目标的首选方式。

```
class Box {
   x: number;
   y: number;
   height: number;
   width: number;

   public constructor(b: Partial<Box> = {}) {
      Object.assign(this, b);
   }
}

// Example use
const a = new Box();
const b = new Box({x: 10, height: 99});
const c = new Box({foo: 10});          // Will fail to compile 
```

**更新（2017 年 6 月 8 日）：** guyarad 和 snolflake 在下面对我的回答的评论中提出了有效的观点。我建议读者看看[Benson](https://stackoverflow.com/a/40976608/1389219)、[Joe](https://stackoverflow.com/a/28328719/1389219)和[snolflake](https://stackoverflow.com/a/38688403/1389219)的答案，他们的答案比我的要好。*

**原始答案（2014 年 1 月 27 日）**

另一个如何实现构造函数重载的例子：

```
class DateHour {

  private date: Date;
  private relativeHour: number;

  constructor(year: number, month: number, day: number, relativeHour: number);
  constructor(date: Date, relativeHour: number);
  constructor(dateOrYear: any, monthOrRelativeHour: number, day?: number, relativeHour?: number) {
    if (typeof dateOrYear === "number") {
      this.date = new Date(dateOrYear, monthOrRelativeHour, day);
      this.relativeHour = relativeHour;
    } else {
      var date = <Date> dateOrYear;
      this.date = new Date(date.getFullYear(), date.getMonth(), date.getDate());
      this.relativeHour = monthOrRelativeHour;
    }
  }
} 
```

来源： http: [//mimosite.com/blog/post/2013/04/08/Overloading-in-TypeScript](http://mimosite.com/blog/post/2013/04/08/Overloading-in-TypeScript)

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2015-02-04T18:28:59.987

我知道这是一个老问题，但 1.4 中的新问题是联合类型；将这些用于所有函数重载（包括构造函数）。例子：

```
class foo {
    private _name: any;
    constructor(name: string | number) {
        this._name = name;
    }
}
var f1 = new foo("bar");
var f2 = new foo(1); 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2019-05-26T20:31:04.153

实际上，这个答案可能为时已晚，但您现在可以这样做：

```
class Box {
    public x: number;
    public y: number;
    public height: number;
    public width: number;

    constructor();
    constructor(obj: IBox);
    constructor(obj?: IBox) {    
        this.x = !obj ? 0 : obj.x;
        this.y = !obj ? 0 : obj.y;
        this.height = !obj ? 0 : obj.height;
        this.width = !obj ? 0 : obj.width;
    }
} 
```

因此，您可以执行上述操作，而不是静态方法。希望对你有帮助！！！

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-09-11T09:36:27.423

您可以通过以下方式处理：

```
class Box {
  x: number;
  y: number;
  height: number;
  width: number;
  constructor(obj?: Partial<Box>) {    
     assign(this, obj);
  }
} 
```

部分将使您的字段（x，y，高度，宽度）可选，允许多个构造函数

例如：你可以`new Box({x,y})`不用高度和宽度。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-01-11T04:28:39.300

您的`Box`类正试图定义多个*构造函数实现*。

只有最后一个构造函数*重载签名*被用作类*构造函数实现*。

在下面的示例中，请注意*构造函数实现*的定义使其不*与*前面的任何一个*重载签名*相矛盾。

```
interface IBox = {
    x: number;
    y: number;
    width: number;
    height: number;
}

class Box {
    public x: number;
    public y: number;
    public width: number;
    public height: number;

    constructor() /* Overload Signature */
    constructor(obj: IBox) /* Overload Signature */
    constructor(obj?: IBox) /* Implementation Constructor */ {
        if (obj) {
            this.x = obj.x;
            this.y = obj.y;
            this.width = obj.width;
            this.height = obj.height;
        } else {
            this.x = 0;
            this.y = 0;
            this.width = 0;
            this.height = 0
        }
    }

    get frame(): string {
        console.log(this.x, this.y, this.width, this.height);
    }
}

new Box().frame; // 0 0 0 0
new Box({ x:10, y:10, width: 70, height: 120 }).frame; // 10 10 70 120

// You could also write the Box class like so;
class Box {
    public x: number = 0;
    public y: number = 0;
    public width: number = 0;
    public height: number = 0;

    constructor() /* Overload Signature */
    constructor(obj: IBox) /* Overload Signature */
    constructor(obj?: IBox) /* Implementation Constructor */ {
        if (obj) {
            this.x = obj.x;
            this.y = obj.y;
            this.width = obj.width;
            this.height = obj.height;
        }
    }

    get frame(): string { ... }
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-11-30T05:11:40.190

```
interface IBox {
    x: number;
    y: number;
    height: number;
    width: number;
}

class Box {
    public x: number;
    public y: number;
    public height: number;
    public width: number;

    constructor(obj: IBox) {
        const { x, y, height, width } = { x: 0, y: 0, height: 0, width: 0, ...obj }
        this.x = x;
        this.y = y;
        this.height = height;
        this.width = width;
    }
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-11-06T00:22:21.230

如果可选的类型化参数足够好，请考虑以下代码，它可以在不重复属性或定义接口的情况下完成相同的操作：

```
export class Track {
   public title: string;
   public artist: string;
   public lyrics: string;

   constructor(track?: Track) {
     Object.assign(this, track);
   }
} 
```

请记住，这将分配所有传入的属性`track`，即使它们未定义在`Track`.

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-03-27T00:18:23.343

我们可以使用[警卫模拟构造函数重载](https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards)

```
interface IUser {
  name: string;
  lastName: string;
}

interface IUserRaw {
  UserName: string;
  UserLastName: string;
}

function isUserRaw(user): user is IUserRaw {
  return !!(user.UserName && user.UserLastName);
}

class User {
  name: string;
  lastName: string;

  constructor(data: IUser | IUserRaw) {
    if (isUserRaw(data)) {
      this.name = data.UserName;
      this.lastName = data.UserLastName;
    } else {
      this.name = data.name;
      this.lastName = data.lastName;
    }
  }
}

const user  = new User({ name: "Jhon", lastName: "Doe" })
const user2 = new User({ UserName: "Jhon", UserLastName: "Doe" }) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-09-20T11:28:12.817

我使用以下替代方法来获取默认/可选参数和具有可变参数数量的“重载类型”构造函数：

```
private x?: number;
private y?: number;

constructor({x = 10, y}: {x?: number, y?: number}) {
 this.x = x;
 this.y = y;
} 
```

我知道这不是有史以来最漂亮的代码，但人们已经习惯了。不需要额外的接口，它允许私有成员，这在使用接口时是不可能的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-10-20T19:37:00.267

正如@Benson 回答中所评论的，我在我的代码中使用了这个示例，我发现它非常有用。但是，当我尝试使用我的类变量类型进行计算时，我发现了`Object is possibly 'undefined'.ts(2532)`错误，因为问号导致它们是 type `AssignedType | undefined`。即使在以后的执行中处理未定义的情况或使用编译器类型强制执行，`<AssignedType>`我也无法摆脱错误，因此无法使 args 成为可选。我解决了为带有问号参数和类变量的参数创建一个单独的类型没有问号。冗长，但有效。

这是原始代码，在类方法（）中给出错误，见下文：

```
/** @class */

class Box {
  public x?: number;
  public y?: number;
  public height?: number;
  public width?: number;

  // The Box class can work double-duty as the interface here since they are identical
  // If you choose to add methods or modify this class, you will need to
  // define and reference a new interface for the incoming parameters object 
  // e.g.:  `constructor(params: BoxObjI = {} as BoxObjI)` 
  constructor(params: Box = {} as Box) {
    // Define the properties of the incoming `params` object here. 
    // Setting a default value with the `= 0` syntax is optional for each parameter
    const {
      x = 0,
      y = 0,
      height = 1,
      width = 1,
    } = params;

    //  If needed, make the parameters publicly accessible
    //  on the class ex.: 'this.var = var'.
    /**  Use jsdoc comments here for inline ide auto-documentation */
    this.x = x;
    this.y = y;
    this.height = height;
    this.width = width;
  }

  method(): void {
    const total = this.x + 1; // ERROR. Object is possibly 'undefined'.ts(2532)
  }
}

const box1 = new Box();
const box2 = new Box({});
const box3 = new Box({ x: 0 });
const box4 = new Box({ x: 0, height: 10 });
const box5 = new Box({ x: 0, y: 87, width: 4, height: 0 }); 
```

所以变量不能在类方法中使用。如果像这样更正，例如：

```
method(): void {
    const total = <number> this.x + 1;
} 
```

现在出现这个错误：

```
Argument of type '{ x: number; y: number; width: number; height: number; }' is not 
assignable to parameter of type 'Box'.
Property 'method' is missing in type '{ x: number; y: number; width: number; height: 
number; }' but required in type 'Box'.ts(2345) 
```

好像整个参数包不再是可选的了。

因此，如果创建了具有可选参数的类型，并且从可选中删除了类变量，我实现了我想要的，参数是可选的，并且能够在类方法中使用它们。在解决方案代码下方：

```
type BoxParams = {
  x?: number;
  y?: number;
  height?: number;
  width?: number;
}

/** @class */
class Box {
  public x: number;
  public y: number;
  public height: number;
  public width: number;

  // The Box class can work double-duty as the interface here since they are identical
  // If you choose to add methods or modify this class, you will need to
  // define and reference a new interface for the incoming parameters object 
  // e.g.:  `constructor(params: BoxObjI = {} as BoxObjI)` 
  constructor(params: BoxParams = {} as BoxParams) {
    // Define the properties of the incoming `params` object here. 
    // Setting a default value with the `= 0` syntax is optional for each parameter
    const {
      x = 0,
      y = 0,
      height = 1,
      width = 1,
    } = params;

    //  If needed, make the parameters publicly accessible
    //  on the class ex.: 'this.var = var'.
    /**  Use jsdoc comments here for inline ide auto-documentation */
    this.x = x;
    this.y = y;
    this.height = height;
    this.width = width;
  }

  method(): void {
    const total = this.x + 1;
  }
}

const box1 = new Box();
const box2 = new Box({});
const box3 = new Box({ x: 0 });
const box4 = new Box({ x: 0, height: 10 });
const box5 = new Box({ x: 0, y: 87, width: 4, height: 0 }); 
```

任何花时间阅读并尝试理解我要​​表达的观点的人都可以发表评论。

提前致谢。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-03-04T08:41:45.517

这是一个工作示例，您必须考虑每个具有更多字段的构造函数都应将额外字段标记为`optional`.

```
class LocalError {
  message?: string;
  status?: string;
  details?: Map<string, string>;

  constructor(message: string);
  constructor(message?: string, status?: string);
  constructor(message?: string, status?: string, details?: Map<string, string>) {
    this.message = message;
    this.status = status;
    this.details = details;
  }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-07-19T17:19:56.483

一般来说，对于 N 个重载，最好使用：

```
constructor(obj?: {fromType1: IType1} | {fromType2: IType2}) {    
    if(obj){
      if(obj.fromType1){
        //must be of form IType1
      } else if(obj.fromType2){
        //must have used a IType2
      } else {
        throw "Invalid argument 1"
      }
    } else {
      //obj not given
    }
} 
```

至少现在我们可以检查走哪条路线并采取相应的行动

* * *

## 回答 #17

> 赞同：-6
> 
> 时间：2018-06-02T14:15:35.877

你应该记住...

```
contructor()

constructor(a:any, b:any, c:any) 
```

它与`new()`或相同`new("a","b","c")`

因此

```
constructor(a?:any, b?:any, c?:any) 
```

和上面一样，更灵活...

`new()`或`new("a")`或`new("a","b")`或`new("a","b","c")`

# google-maps - Google API - 映射 500 个坐标

> ID：12702552
> 
> 赞同：0
> 
> 时间：2012-10-03T05:49:13.157
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在做一个项目，我需要在上面绘制一个超过 500 点的地图。我的代码可以很好地达到 250 分。但是，当我在它解析的 XML 文件中拥有所有 500 个坐标时，地图上最终不会显示任何点。

我想有某种节流导致它失败，但我不知道如何将它包含在代码中。

有任何想法吗？

**位置.xml（缩写）**

```
<markers>
  <marker name="" address="800 Occidental Ave S  Seattle, WA 98134" lat="47.595091" lng="-122.333229" type="location" />
  <marker name="" address="Bridge Street, City of Westminster, SW1A 0AA, United Kingdom" lat="51.499100" lng="-0.121955" type="location" />
</markers> 
```

**地图.html**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>

<script src="http://maps.google.com/maps/api/js?sensor=false"
        type="text/javascript"></script>
<script type="text/javascript">

var customIcons = {
  location: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(27.2500, 2.5200), 
            // world (27.2500, 2.5200), zoom 2
            // usa (39.6791686, -95.5335914), zoom 4
    zoom: 2,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("locations.xml", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      //bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    //infoWindow.setContent(html);
    //infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

</script>
</head>

<body onLoad="load()">
  <div id="map" style="width: 1050px; height: 550px"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:48:57.190

我的猜测是您的数据在第 250 个条目附近存在问题。

# c++ - 使用“for”循环遍历 C++ 向量

> ID：12702561
> 
> 赞同：227
> 
> 时间：2012-10-03T05:50:18.170
> 
> 标签：c++, coding-style, for-loop, iterator

我是 C++ 语言的新手。我已经开始使用向量，并且注意到在我看到的所有通过索引迭代向量的代码中，循环的第一个参数`for`总是基于向量的。在 Java 中，我可能会用 ArrayList 做这样的事情：

```
for(int i=0; i < vector.size(); i++){
   vector[i].doSomething();
} 
```

我在 C++ 中看不到这个是有原因的吗？这是不好的做法吗？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-10-03T06:10:36.610

您没有看到这种做法的原因是非常主观的，无法给出明确的答案，因为我已经看到了许多使用您提到的方式而不是`iterator`样式代码的代码。

以下可能是人们不考虑`vector.size()`循环方式的原因：

1.  `size()`在循环条件下每次调用都偏执。但是，要么它不是问题，要么可以轻松修复
2.  `std::for_each()`更喜欢`for`循环本身
3.  稍后将容器从`std::vector`另一个容器（例如 `map`, `list`）更改为循环机制也需要更改，因为并非每个容器都支持`size()`循环样式

C++11 提供了一个很好的工具来移动容器。这称为“基于范围的 for 循环”（或 Java 中的“增强型 for 循环”）。

只需很少的代码，您就可以遍历完整的（强制性！）`std::vector`：

```
vector<int> vi;
...
for(int i : vi) 
  cout << "i = " << i << endl; 
```

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-10-03T05:54:59.810

遍历向量的最简洁方法是通过迭代器：

```
for (auto it = begin (vector); it != end (vector); ++it) {
    it->doSomething ();
} 
```

或（相当于上述）

```
for (auto & element : vector) {
    element.doSomething ();
} 
```

在 C++0x 之前，您必须将 auto 替换为迭代器类型并使用成员函数而不是全局函数 begin 和 end。

这可能是你所看到的。与您提到的方法相比，优点是您不会严重依赖`vector`. 如果您更改`vector`为不同的“集合类型”类，您的代码可能仍然可以工作。但是，您也可以在 Java 中执行类似的操作。概念上没有太大区别；然而，C++ 使用模板来实现这一点（与 Java 中的泛型相比）；因此，该方法适用于定义了函数`begin`和`end`函数的所有类型，甚至适用于静态数组等非类类型。请参阅此处：[基于范围的 for 如何适用于普通数组？](https://stackoverflow.com/questions/7939399/how-does-the-range-based-for-work-for-plain-arrays)

* * *

## 回答 #3

> 赞同：129
> 
> 时间：2012-10-03T05:59:27.583

> **有什么理由我在 C++ 中看不到这个吗？这是不好的做法吗？**

不，这不是一个坏习惯，但以下方法使您的代码具有一定的**灵活性**。

通常，在 C++11 之前，用于迭代容器元素的代码使用迭代器，例如：

```
std::vector<int>::iterator it = vector.begin(); 
```

这是因为它使代码更加灵活。

所有标准库容器都支持并提供迭代器。如果在以后的开发阶段您需要切换到另一个容器，则无需更改此代码。

**注意：**编写适用于所有可能的标准库容器的代码并不像看起来那么容易。

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2012-10-03T05:57:14.373

正确的做法是：

```
for(std::vector<T>::iterator it = v.begin(); it != v.end(); ++it) {
    it->doSomething();
 } 
```

其中 T 是向量内的类的类型。例如，如果类是 CActivity，只需写 CActivity 而不是 T。

这种类型的方法适用于每个 STL（不仅是向量，这更好一点）。

如果还想使用索引，方法是：

```
for(std::vector<T>::size_type i = 0; i != v.size(); i++) {
    v[i].doSomething();
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-11-22T17:09:30.090

使用自动运算符真的很容易使用，因为不必担心数据类型和向量或任何其他数据结构的大小

使用 auto 和 for 循环迭代向量

```
vector<int> vec = {1,2,3,4,5}

for(auto itr : vec)
    cout << itr << " "; 
```

输出：

```
1 2 3 4 5 
```

您还可以使用此方法来迭代集合和列表。使用*auto*会自动检测模板中使用的数据类型并让您使用它。因此，即使我们有`vector`of`string`或`char`相同的语法也可以正常工作

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-06-23T16:13:21.387

使用迭代器有两个强有力的理由，这里提到了其中的一些：

# 稍后切换容器不会使您的代码无效。

即，如果您从 std::vector 转到 std::list 或 std::set，则不能使用数字索引来获取包含的值。使用迭代器仍然有效。

# 无效迭代的运行时捕获

如果在循环中间修改容器，下次使用迭代器时，它会抛出一个无效的迭代器异常。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-12-04T12:54:02.297

迭代向量并打印其值的正确方法如下：

```
#include<vector>

// declare the vector of type int
vector<int> v;

// insert elements in the vector
for (unsigned int i = 0; i < 5; ++i){
    v.push_back(i);
}

// print those elements
for (auto it = v.begin(); it != v.end(); ++it){
    std::cout << *it << std::endl;
} 
```

但至少在目前的情况下，使用基于范围的 for 循环会更好：（
`for (auto x: v) std::cout << x << "\n";`
您也可以添加`&`after`auto`以`x`引用元素而不是它们的副本。它与上述基于迭代器的非常相似方法，但更易于阅读和编写。）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-04-08T08:00:04.470

这是在向量中迭代和打印值的更简单方法。

```
for(int x: A) // for integer x in vector A
    cout<< x <<" "; 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-04-19T20:51:21.690

令我惊讶的是，没有人提到遍历具有整数索引的数组使您可以通过为具有错误索引的数组下标来轻松编写错误代码。例如，如果您有使用`i`and作为索引的嵌套循环，您可能会错误地使用而不是`j`数组下标，从而在程序中引入错误。`j``i`

相比之下，这里列出的其他形式，即基于范围的`for`循环和迭代器，更不容易出错。该语言的语义和编译器的类型检查机制将防止您使用错误的索引意外访问数组。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-10-03T05:59:43.987

使用 STL，程序员`iterators`用于遍历容器，因为迭代器是一个抽象概念，在所有标准容器中实现。例如，`std::list`根本没有`operator []`。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-07-08T04:36:00.963

```
 //different declaration type
    vector<int>v;  
    vector<int>v2(5,30); //size is 5 and fill up with 30
    vector<int>v3={10,20,30};

    //From C++11 and onwards
    for(auto itr:v2)
        cout<<"\n"<<itr;

     //(pre c++11)   
    for(auto itr=v3.begin(); itr !=v3.end(); itr++)
        cout<<"\n"<<*itr; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-08-08T15:41:28.617

```
int main()
{
    int n;
    int input;
    vector<int> p1;
    vector<int> ::iterator it;

    cout << "Enter the number of elements you want to insert" << endl;
    cin >> n;

    for (int i = 0;i < n;i++)
    {
        cin >> input;
        p1.push_back(input);
    }
    for(it=p1.begin();it!=p1.end();it++)
    {
        cout << *it << endl;
    }
      //Iterating in vector through iterator it

    return 0;
} 
```

传统形式的迭代器

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2020-08-10T17:10:22.770

如果你使用

```
std::vector<std::reference_wrapper<std::string>> names{ }; 
```

不要忘记，当你在 for 循环中使用 auto 时，也要使用 get，如下所示：

```
for (auto element in : names)
{
    element.get()//do something
} 
```

# iphone - iPhone 应用程序中的捐赠功能

> ID：12702564
> 
> 赞同：3
> 
> 时间：2012-10-03T05:50:34.333
> 
> 标签：iphone, objective-c, ios, in-app-purchase, donations

我打算开发一个免费的应用程序。这可能对许多人有用。所以，我打算在我的应用程序中放置一个捐赠按钮。因此，如果有人觉得它有用，他们就会为发展捐款。

如果我们在应用程序购买中实现这个功能是不是很好。

我不确定这是否可能。如果这个问题是错误的，请纠正我，我会删除它。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:43:51.173

尝试搜索。关于如何处理捐款存在多个问题。

您必须查找 App Store 审查指南 [https://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html)

请参阅 11.2 - 11.4 并判断是否允许向非慈善机构（12 中涵盖的慈善机构）捐赠：

我会说不。这是不在 App 内消费的虚拟商品。

为了解决这个问题，让人们为不同的背景颜色或一些次要功能付费，这样您就可以保持合规性。或者制作两个版本，告诉他们通过购买另一个版本来支持开发（你可以链接到它）。这两个版本可能相同或几乎相同。

# php - 优化文件导航器

> ID：12702569
> 
> 赞同：0
> 
> 时间：2012-10-03T05:50:53.187
> 
> 标签：php

我想出了一个基本的文件导航器，它接受用户输入以跳转到不同的目录。我遇到的唯一问题是我基本上循环了数据三遍：

1.  获取所有目录的有效列表，以便与用户输入进行比较
2.  构建目录和文件的“排序”列表
3.  输出最终列表

有关优化或改进此代码的任何提示？

```
define('ROOT', '/path/to/somewhere');

// get a list of valid paths
$valid = array();
$dir = new RecursiveDirectoryIterator(ROOT);
$dir->setFlags(RecursiveDirectoryIterator::SKIP_DOTS);
$iter = new ParentIterator($dir);
foreach(new RecursiveIteratorIterator($iter, RecursiveIteratorIterator::SELF_FIRST) as $file) {
    $path = str_replace(ROOT, '', $file->getPathname());
    $valid[] = $path;
}

// user input
$subpath = isset($_GET['path']) && in_array($_GET['path'], $valid) ? $_GET['path'] : NULL;

$cwd = isset($subpath) ? ROOT.$subpath : ROOT;

// build and sort directory tree
$files = array();
foreach(new DirectoryIterator($cwd) as $file) {
    if($file->isDot()) {
        continue;
    }

    if($file->isDir()) {
        $path = str_replace(ROOT, '', $file->getPathname());
        $count = iterator_count(new RecursiveDirectoryIterator($file->getRealPath(), FilesystemIterator::SKIP_DOTS));
        $files[$path]['name'] = $file->getFilename();
        $files[$path]['count'] = $count;
    } else {
        $files[] = $file->getFilename();
    }
    asort($files);
}

// output directory tree
if(!empty($files)) {
    foreach($files as $key=>$value) {
        if(is_array($value)) {
            echo "<a href=\"?path=$key\">{$value['name']} ({$value['count']})</a><br />";
        } else {
            echo "$value<br />";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:14:19.143

目录结构多久更改一次？是否可以将其缓存并仅在有更改而不是每个请求时才重新生成白名单？这将是我的方法，具体取决于需求和负载因素。除此之外，可能还有微优化的领域。

# c - 关于位对齐

> ID：12702573
> 
> 赞同：1
> 
> 时间：2012-10-03T05:51:30.270
> 
> 标签：c, binary, bit-manipulation

假设我有两个变量 x 和 y，并且我想对齐最重要的 1，我将如何用 C 编写这个？例如，我有 x=11 和 y = 1011，我想将 x 与 y 对齐，使其为 1100。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:22:29.033

运行[BitScanReverse](http://msdn.microsoft.com/en-us/library/fbxyd7zd%28v=vs.80%29.aspx)（或适合您的编译器的内在函数，例如`__builtin_clz`GCC），从较大的值中减去较小的值，然后将较小的值向左移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:29:51.607

正如 paulsm4 建议的那样，您可以确定数字的最高有效“SET”位并将其移位。由此得出，一个相当简化的版本可能是：-

```
int Num1_bit_count = 0,Num2_bit_count = 0;
int Num1 = 0b1100, Num2 = 0b0011, temp = 0;

    temp = Num1;  //Let's copy it in other variable to save the value of Num1
     //Count Number of bits in Num1
     while(temp > 0)
     {
         temp = temp >> 1;
         Num1_bit_count++;

     }
    //Same for Num2
    temp = Num2;  //Let's copy it in other variable to save the value of Num2
     //Count Number of bits in Num1
     while(temp > 0)
     {
         temp = temp >> 1;
         Num2_bit_count++;

     }

  if(Num1_bit_count > Num2_bit_count)
   {
       Num2 = Num2 << (Num1_bit_count - Num2_bit_count);

   }
  else if(Num2_bit_count > Num1_bit_count)
   {
       Num1 = Num1 << (Num2_bit_count - Num1_bit_count);

   } 
```

# asp.net - 无法单击 ASP.NET 中的母版页按钮

> ID：12702580
> 
> 赞同：0
> 
> 时间：2012-10-03T05:52:02.547
> 
> 标签：asp.net

我在母版页中放置了退出按钮。我有一个使用该母版页的页面，并且在此页面中也有更新面板。当我单击退出按钮时，它不起作用。当我使用锚标签时，它可以工作，但我想使用 Button。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:57:48.620

如果您对某些输入字段使用必填字段验证，则可能会发生这种情况。尝试

> 原因验证 =“假”

用于按钮控制和检查。希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-30T19:10:10.660

我有同样的问题，我解决了删除嵌套在 asp Content 占位符中的主 div。对我来说，插入母版页的所有控件、按钮、下拉框等都被冻结了。

# spring-webflow - 如何将javascript中的动作与spring web flow和jsf链接起来？

> ID：12702581
> 
> 赞同：0
> 
> 时间：2012-10-03T05:52:04.270
> 
> 标签：spring-webflow

我有一个要求，在使用 onclick 事件的 h:commandlink 或 a4j:commandlink 中，我需要调用普通的 javacript 函数（不使用任何 javascript 框架），该函数又需要调用 spring 的 web 流 flow.xml 中定义的所需操作。

在其他作品中，

这对我来说很好：

过程：1：

* * *

演示.xhtml：

`<h:commandLink value="link next page" action="next"/>`

spring-web-flow.xml

`<view-state id="demo"> <transition from="next" to="nextPage"/> </view-state>`

* * *

要求：我需要在javascript中使用一些链接：

* * *

演示.xhtml：

`<h:commandLink value="link next page" onClick="navigatePage();"/>`

`<script type="text/javascript">` `function navigatePage(){`

// 以某种方式调用将调用 spring-web-flow 转换的 action="next"（如上所述）。

`}`

如果有人遇到过这种解决方案，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:33:16.217

您应该可以访问`flowExecutionUrl`页面中的变量。只需将其与参数一起使用，`_eventId`它应该可以工作。

所以这应该工作：

```
<h:commandLink value="link next page" onClick="navigatePage('${flowExecutionUrl}&_eventId=next');"/>

<script type="text/javascript">
function navigatePage(url){
    window.location = url;
}
</script> 
```

# python - python中的ttk和quitter模块

> ID：12702582
> 
> 赞同：0
> 
> 时间：2012-10-03T05:52:09.520
> 
> 标签：python

我正在使用在线教程（如[http://zetcode.com/gui/tkinter/layout/](http://zetcode.com/gui/tkinter/layout/)）和其他人学习 Tkinter。我在 Slackware 13.37 上有 python 2.6.6。

当我尝试导入 ttk 或退出时，我收到错误消息，告诉我没有这样的模块。这是我所做的：

from Tkinter import Tk, W, E from ttk import Frame, Button, Label, Style from ttk import Entry

或者

从退出者导入退出者

谁能告诉我发生了什么事？我查看了本网站上有关此问题的其他问题，但没有一个对我有帮助。

我在网上找不到 ttk 或 quitter 模块，也找不到任何有任何信息可以解决我的问题的网站。

Programming Python 2nd edition 提供了不起作用的退出示例。我想要做的是有一个弹出窗口，允许用户输入一些信息并在输入信息时让框消失。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:15:53.040

要使用 Python 中的 ttk，您需要单独安装，您可以从[此处](http://code.google.com/p/python-ttk/)获取。标准库中也没有退出模块~~（不确定在哪里可以得到它）~~。

编辑： Quitter 模块似乎来自一本书“Programming Python, 3rd Edition”。[这是](http://www.gidforums.com/t-12698.html)退出者的源代码。

# java - 更新单元格值 (JTable)

> ID：12702587
> 
> 赞同：0
> 
> 时间：2012-10-03T05:52:42.580
> 
> 标签：java, swing, jtable, actionlistener

我在更新 JTable 的单元格值时遇到问题。我想要做的是在从 JTable 中选择特定单元格后，我应该能够进行编辑，并且该操作必须反映后端的数据库。我正在使用 HSQL。我的表有 4 列，一个 PK。请给我一个替代方案和/或通过替换 * 为我提供一些代码。我是新手，只是一个初学者。

```
d_view.addActionListener(new ActionListener() { //----action listener of a button
    public void actionPerformed(ActionEvent po) {
        try {
            Connection connec;
            Class.forName("org.hsqldb.jdbcDriver");
            connec = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/","SA", "");
            java.sql.Statement stt=connec.createStatement();
            ResultSet rs=stt.executeQuery("select * from DepReg");//----------TO VIEW DATA IN TABULAR FORMAT
            ResultSetMetaData rt=rs.getMetaData();
            int cols=rt.getColumnCount();
            String c[] =new String[cols];
            for(int i=0;i<cols;i++){
                c[i]=rt.getColumnName(i+1);
                dm.addColumn(c[i]);
            }
              Object row[]=new Object[cols];
                while(rs.next()){
                     for(int i=0;i<cols;i++){
                            row[i]=rs.getString(i+1);
                        }
                    dm.addRow(row);
                }
                table.setModel(dm);
                connec.close();
            }
        catch (Exception ty) {}
    }
});//--------HERE THE PROBLEM STARTS
table.getModel().addTableModelListener(new TableModelListener() {
    public void tableChanged(TableModelEvent tme) {
        int rows=tme.getFirstRow();
        int colms=tme.getColumn();
        TableModel model=(TableModel)tme.getSource();
        String colname=model.getColumnName(colms);
        Object data=model.getValueAt(rows, colms);
//*********EDIT/REPLACE THE CODE ***************//
        try {
            Connection connec;
            Class.forName("org.hsqldb.jdbcDriver");
            connec = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/","SA", "");
            java.sql.Statement stt=connec.createStatement();
//-----------I WILL INCLUDE AN UPDATE STATEMENT OVER HERE BASED ON THE VALUE SELECTED
        }
        catch (Exception ae) {}
        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:07:09.473

*   数据库连接不应发生在事件调度线程上。他们太慢了。将其移至后台线程。有关更多信息，请参阅[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   我不完全清楚你是否已经能够编辑你的表格，但如果没有，这是通过确保`TableModel`方法`isCellEditable`返回`true`你想要可编辑的单元格，并且你已经`TableCellEditor`在你的`JTable`
*   我不会添加一个`TableModelListener`来更新您的数据库，而是将该逻辑移动到一个自定义的`TableModel`. 每次`setValueAt`调用该方法时，您都知道已经进行了更改。然后您可以更新数据库（同样，不是在事件调度线程上）。
*   如果数据库也可以从其他地方更新，您可能希望在某些时刻轮询数据库以更新您`TableModel`的数据库以反映数据库的最新状态。确保在工作线程上进行轮询。`TableModel`然后您可以在工作线程上创建一个全新的，并替换`TableModel`事件调度线程上的表。或者您可以更新 EDT 上的现有模型（不要忘记触发事件，或者如果您的模型扩展自`DefaultTableModel`/`AbstractTableModel`您可以使用可用的 API）。

我还建议阅读[Swing table 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)以获取更多信息。

# php - 用于 PHP、JS 和 HTML 的 IDE

> ID：12702595
> 
> 赞同：-1
> 
> 时间：2012-10-03T05:54:02.953
> 
> 标签：php, javascript, ide, editor

这些天我正在使用 gedit 在 PHP JS 和 HTML 中键入我的代码，现在我需要一个更好的编辑器或 IDE 或整个开发环境，请告诉我（我使用的是 linux OS），我更喜欢免费的 IDE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:03:48.497

我认为 Aptana Studio 或 Sublime Text 是目前最好的编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T05:56:43.403

可以使用[eclipse](http://www.eclipse.org/downloads/)它会很方便你在所有这些中工作。祝你好运

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T05:57:29.307

您可以查看[Eclipse](http://www.eclipse.org/downloads/)和[Aptana Studio](http://www.aptana.com/)，它们都是免费的并提供完整的 IDE 体验，并且都配备了智能感知。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T05:57:10.650

我认为最好的 IDE 是[Netbeans](http://netbeans.org)

# ruby-on-rails - Ruby on Rails 教程 - 第 9 章：缺少模板更新

> ID：12702596
> 
> 赞同：2
> 
> 时间：2012-10-03T05:54:06.690
> 
> 标签：ruby-on-rails, rspec

我刚刚完成了 Michael Hartl 的书 Ruby on Rails 教程的[第 9.3 节 - 不成功的编辑](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users.html#sec-unsuccessful_edits)。我已经尝试了好几个小时来弄清楚为什么我不能让测试通过检查不成功的编辑。

这是我为本章添加的代码：

**规范/请求/authentication_pages_spec.rb**

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_error_message('Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_error_message }
      end
    end

    describe "with valid information" do
     let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile',  href: user_path(user)) }
      it { should have_link('Settings', href: edit_user_path(user)) }
      it { should have_link('Sign out', href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) } 

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end
end 
```

**规范/请求/user_pages_spec.rb：**

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign up') }
    it { should have_selector('title', text: 'Sign up') }
  end

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }
    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end

      describe "after submission" do
        before { click_button submit }

        it { should have_selector('title', text: 'Sign up') }
        it { should have_content("Name can't be blank") }
        it { should have_content("Email can't be blank") }
        it { should have_content("Email is invalid") }
        it { should have_content("Password can't be blank") }
        it { should have_content("Password is too short") }
        it { should have_content("Password confirmation can't be blank") }
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }
        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }

        it { should have_link('Sign out') }
      end
    end
  end

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit edit_user_path(user) }

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end
  end
end 
```

**规范/支持/实用程序.rb：**

```
include ApplicationHelper

def full_title(page_title)
  base_title = "Ruby on Rails Tutorial Sample App"
  if page_title.empty?
    base_title
  else
    "#{base_title} | #{page_title}"
  end
end

def valid_signin(user)
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
end

def sign_in(user)
  visit signin_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
  # Sign in when not using Capybara as well.
  cookies[:remember_token] = user.remember_token
end

RSpec::Matchers.define :have_error_message do |message|
  match do |page|
    page.should have_selector('div.alert.alert-error', text: message)
  end
end 
```

**应用程序/控制器/users_controllers.rb：**

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      # Handle a successful update.
    else
      render 'edit'
    end
  end  
end 
```

**应用程序/模型/users.rb**

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  before_save { self.email.downcase! }
  before_save :create_remember_token

  # Validate that a name is not blank and is no longer than50 characters
  validates :name, presence: true, length: { maximum: 50 }

  # Validate that an email address is not blank, contains a valid pattern, and 
  # is not already in the database
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, 
                    format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false } 

  #Validate the password is there and is at least 6 characters
  validates :password, length: { minimum: 6 }, on: :create
  validates :password_confirmation, presence: true, on: :create

  # Everything below this private is only visibile to this user model
  private

    # Creates a remember token for the user (not a local variable)
    # Used to keep a user login active indefinitely after sign in
    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

**应用程序/视图/布局/_header.html.erb**

```
<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home", root_path %></li>
          <li><%= link_to "Help", help_path %></li>
          <% if signed_in? %>
            <li><%= link_to "Users", '#' %></li>
            <li id="fat-menu" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Account <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", edit_user_path(current_user) %></li>
                <li class="divider"></li>
                <li>
                  <%= link_to "Sign out", signout_path, method: "delete" %>
                </li>
              </ul>
            </li>
          <% else %>
            <li><%= link_to "Sign in", signin_path %></li>
          <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

**应用程序/视图/用户/edit.html.erb：**

```
<% provide(:title, "Edit user") %>
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
  <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirm Password" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>

    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change</a>
  </div>
</div> 
```

我收到以下错误：

```
Failures:

  1) User pages edit with invalid information 
     Failure/Error: before { click_button "Save changes" }
     ActionView::MissingTemplate:
       Missing template users/update, application/update with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "/home/cbachich/Development/rails_projects/sample_app/app/views"
     # (eval):2:in `click_button'
     # ./spec/requests/user_pages_spec.rb:79:in `block (4 levels) in <top (required)>'

Finished in 2.65 seconds
67 examples, 1 failure

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:81 # User pages edit with invalid information 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T17:18:03.807

如果用户更新成功，您的控制器不会做任何事情，这意味着 Rails 将呈现用户/更新视图。由于您没有此视图，这就是您看到的错误。Saverio 的注释很好 - 您应该添加 a`redirect_to`才能进入表演动作。这将摆脱这个错误。

但还有一个更大的问题。当您期望控制器采用失败路径并呈现编辑视图时，为什么您的控制器采用成功的更新路径？

根据我的经验，编辑页面填写电子邮件和电子邮件，但将密码留空。您预计更新会失败，因为没有密码，但更新成功。为什么？如果您查看模型，您的密码验证只有`on: :create`. 这意味着不会对更新执行这些验证。您期望在更新时执行密码验证，但事实并非如此，这就是编辑成功而不是失败的原因。

如果您更新模型以对创建和更新操作执行这些验证（可能类似于`on: { :create, :update }`），您应该重新开始工作。您使用无效数据的更新将会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:00:44.580

您有用于 UsersController 更新操作的模板吗？

它应该在`app/view/users/update.html.erb`.

`redirect_to`附带说明一下，通常会在成功更新时重定向，因此如果您在更新操作中添加适当的模板，您可能不需要该模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T14:03:17.323

下面的块

```
 describe "edit" do
      let(:user) { FactoryGirl.create(:user) }
      before { visit edit_user_path(user) }

      describe "page" do
        it { should have_selector('h1',    text: "Update your profile") }
        it { should have_selector('title', text: "Edit user") }
        it { should have_link('change', href: 'http://gravatar.com/emails') }
      end

      describe "with invalid information" do
        before { click_button "Save changes" }

        it { should have_content('error') }
      end
    end 
```

创建一个@user，并且不更改表单中的任何内容，单击保存按钮，因此它会发送所有必需的字段内容，并在相应的控制器中作为成功更新处理。

如果你改变最后一个块

```
describe "with invalid information" do
    before do
      fill_in "Name", with: " "
      click_button "Save changes"
    end

    it { should have_content('error') }
  end 
```

那么 name 字段将为空，操作将作为不成功的更新处理并落入 else 块以呈现“编辑”。

# regex - 删除 HTML 标签之间的内容，包括 Perl 中的标签本身

> ID：12702597
> 
> 赞同：0
> 
> 时间：2012-10-03T05:54:35.057
> 
> 标签：regex, perl, html-parsing

大约有 100 个文件，我需要遍历每个文件并删除它们之间的所有数据，`<style>`并且`</style>`+ 删除这些标签。

例如

```
<html>
<head> <title> Example </title> </head>
<style>
p{color: red;
background-color: #FFFF;
}
div {......
...
}
</style>
<body>
<p> hi I'm a paragraph. </p>
</body>
</html> 
```

应该成为

```
<html>
<head> <title> Example </title> </head>
<body>
<p> hi I'm a paragraph. </p>
</body>
</html> 
```

此外，在某些文件中，样式模式就像

```
<style type="text/css"> blah </style> 
```

或者

```
<link rel="stylesheet" type="text/css" href="$url_path/gridsorting.css"> 
```

我需要删除所有 3 种模式。我如何在 Perl 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T06:03:31.847

```
use strict;
use warnings;

use XML::LibXML qw( );

my $qfn = 'a.html';

my $doc  = XML::LibXML->load_html( location => $qfn );
my $root = $doc->documentElement();

for my $style_node ($root->findnodes('//style')) {
   $style_node->parentNode()->removeChild($style_node);
}

{
   open(my $fh, '>', $qfn)
      or die;
   print($fh $doc->toStringHTML());
} 
```

它正确处理：

*   标记中带有属性或空格的样式元素，
*   跨越多行的样式元素，
*   跨越多行的样式标签，
*   包含样式元素的一部分和其他内容的行，
*   具有多个样式元素的文档，
*   在属性值中看起来像样式标签的东西，
*   看起来像 CDATA 块中的样式标签的东西，以及
*   看起来像评论中的样式标签的东西。

截至本次更新，其他解决方案仅处理其中的 2 或 3 个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T21:18:11.160

Ikegami 是对的，你真的应该至少使用一个 HTML/XML 解析器来完成这项任务。我个人喜欢使用[`Mojo::DOM`](http://p3rl.org/Mojo%3a%3aDOM)解析器。这是您的 HTML 的文档对象模型接口，它支持[CSS3 选择器](http://www.w3schools.com/cssref/css_selectors.asp)，使其在您需要时非常灵活。然而，这对它来说非常简单：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::DOM;

my $content = <<'END';
<html>
<head> <title> Example </title> </head>
<style>
p{color: red;
background-color: #FFFF;
}
div {......
...
}
</style>
<body>
<p> hi I'm a paragraph. </p>
</body>
</html>
END

my $dom = Mojo::DOM->new( $content );
$dom->find('style')->pluck('remove');

print $dom; 
```

该`pluck`方法有点令人困惑，但它实际上只是对每个结果对象执行方法的简写。类似的线可以是

```
$dom->find('style')->each(sub{ $_->remove }); 
```

这更容易理解但不那么可爱。

* * *

在阅读您的编辑后，您必须处理的不仅仅是您的基本表单，我必须进一步强调这就是为什么您使用解析器来修改 HTML 而不是让您的正则表达式增长到荒谬的比例。

现在让我们说`$content`变量也包含这些行

```
<link rel="stylesheet" type="text/css" href="$url_path/gridsorting.css">
<link rel="icon" href="somefile.jpg"> 
```

您要删除第一个而不是第二个的位置。您可以通过以下两种方式之一执行此操作。

```
$dom->find('link')->each( sub{ $_->remove if $_->{rel} eq 'stylesheet' } ); 
```

此机制使用对象方法（并且 Mojo::DOM 将属性公开为哈希键）来仅删除`link`具有`rel=stylesheet`. 但是，您可以仅对`find`这些元素使用 CSS3 选择器，并且由于 Mojo::DOM 具有完整的 CSS3 选择器支持，您可以这样做

```
$dom->find('link[rel=stylesheet]')->pluck('remove'); 
```

CSS3 选择器语句可以用逗号连接以查找与任一选择器匹配的所有标签，因此我们可以简单地包含该行

```
$dom->find('style, link[rel=stylesheet]')->pluck('remove'); 
```

并一举摆脱所有令人反感的样式表！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T04:41:19.513

另一种可能的解决方案是使用`HTML::TreeBuilder`.

```
#!/usr/bin/perl

use strict;
use warnings;
use HTML::TreeBuilder 5; # Ensure weak references in use

foreach my $file_name (@ARGV) {
  my $tree = HTML::TreeBuilder->new; # empty tree
  $tree->parse_file($file_name);
  # print "Hey, here's a dump of the parse tree of $file_name:\n";
  # $tree->dump; # a method we inherit from HTML::Element
  foreach my $e ($tree->look_down(_tag => "style")) {
      $e->delete();
  }
  foreach my $e ($tree->look_down(_tag => "link", rel => "stylesheet")) {
      $e->delete();
  }
  print "And here it is, bizarrely rerendered as HTML:\n",
    $tree->as_HTML, "\n";

  # Now that we're done with it, we must destroy it.
  $tree = $tree->delete; # Not required with weak references
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T06:07:12.920

一种使用方式`sed`：

```
sed '/<style>/,/<\/style>/d' file.txt 
```

结果：

```
<html>
<head> <title> Example </title> </head>
<body>
<p> hi I'm a paragraph. </p>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T09:53:35.723

```
perl -lne 'print unless(/<style>/.../<\/style>/)' your_file 
```

测试如下：

```
> cat temp
<html>
<head> <title> Example </title> </head>
<style>
p{color: red;
background-color: #FFFF;
}
div {......
...
}
</style>
<body>
<p> hi I'm a paragraph. </p>
</body>
</html>

> perl -lne 'print unless(/<style>/.../<\/style>/)' temp
<html>
<head> <title> Example </title> </head>
<body>
<p> hi I'm a paragraph. </p>
</body>
</html>
> 
```

如果你想就地做，那么：

```
perl -i -lne 'print unless(/<style>/.../<\/style>/)' your_file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T01:34:37.367

我想出了一种方法，你可以尝试以下方法：

```
#! /usr/bin/perl -w
use strict;
my $line = << 'END';
<html>
<head> <title> Example </title> </head>
<style>
p{color: red;
background-color: #FFFF;
}
div {......
...
}
</style>
<body>
<p> hi I'm a paragraph. </p>
</body>
</html>
END

$line =~ s{<style[^>]*.*?</style>.}{}gs;
print $line; 
```

# android - 调试：如何使用自定义选项卡启动活动

> ID：12702599
> 
> 赞同：0
> 
> 时间：2012-10-03T05:54:41.260
> 
> 标签：android, android-activity, tabs, android-tabhost

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        icon = (ImageView) findViewById(R.id.header);

        Resources res = getResources();

        // construct the tabhost
        setContentView(R.layout.tab_layout);

        setupTabHost();
        // mTabHost.getTabWidget().setDividerDrawable(R.drawable.hotels);

        setupTab(new TextView(this), "Hotels");
        res.getDrawable(R.drawable.hote);

        setupTab(new TextView(this), "MyAccount");
        res.getDrawable(R.drawable.ma);

        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
                R.layout.tab_layout);
        View title = getWindow().findViewById(R.id.tabsLayout);

    }

    @TargetApi(4)
    private void setupTab(final View view, final String tag) {
        View tabview = createTabView(mTabHost.getContext(), tag);

        TabSpec set_Content = mTabHost.newTabSpec(tag).setIndicator(tabview)
                .setContent(new TabContentFactory() {
                    public View createTabContent(String tag) {
                        return view;
                    }
                });

        switch (tag) {
        case ("Hotels"): {

            Intent setClass = new Intent(this, ListSample.class);
            set_Content.setContent(setClass);
            break;
        }
        case ("MyAccount"): {

            /*
             * Intent setClass = new Intent(this, AccountActivity.class);
             * set_Content.setContent(setClass);
             */break;
        }
        }

        mTabHost.addTab(set_Content);

    }

    private static View createTabView(final Context context, final String text) {
        View view = LayoutInflater.from(context)
                .inflate(R.layout.tabs_bg, null);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(text);
        return view;
    }
} 
```

我正在自定义选项卡并尝试为每个选项卡启动一个活动。我找不到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:05:56.750

试试下面的代码：

```
 final TabHost tabHost = getTabHost();
    TabHost.TabSpec ts = tabHost.newTabSpec("ID_1");
    ts.setIndicator("1"); 
    ts.setContent(Intent1);// Intent to start activity
    tabHost.addTab(ts);

    ts = tabHost.newTabSpec("ID_2");
    ts.setIndicator("2"); 
    ts.setContent(Intent2);
    tabHost.addTab(ts);

    ts = tabHost.newTabSpec("ID_3");
    ts.setIndicator("3"); 
    ts.setContent(Intent3);

    tabHost.addTab(ts); 
```

# android - 尝试连接到模拟器时处理卡在“等待设备”

> ID：12702608
> 
> 赞同：1
> 
> 时间：2012-10-03T05:55:09.040
> 
> 标签：android, android-emulator, processing

我正在使用 Processing 来编写适用于 Android 的应用程序。尝试在通过 AVD 管理器启动的模拟器上运行示例时，处理窗口挂在“尝试连接到设备...”并最终放弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:59:45.500

解决方案是遵循以下建议：

[http://forum.processing.org/one/topic/processing-cant-get-connected-to-phone-emulator-need-help.html](http://forum.processing.org/one/topic/processing-cant-get-connected-to-phone-emulator-need-help.html)

转述：

打开“preferences.txt”并更改端口号

android.emulator.port=xxxx

到模拟器窗口顶部显示的那个。

如果preferences.txt 中没有此行，只需添加它。对我来说，preferences.txt 位于 ~/.processing/preferences.txt。您可以通过单击文件-> 首选项找到您的。它在窗口底部提到。

# gstreamer - 在 gstreamer 中播放编码流

> ID：12702609
> 
> 赞同：0
> 
> 时间：2012-10-03T05:55:40.413
> 
> 标签：gstreamer

我使用以下 GStreamer 管道将我的编码流存储在二进制文件中：

```
gst-launch v4l2src ! videorate ! video/x-raw-yuv, framerate=\(fraction\)10/1 \
  ! videoscale ! video/x-raw-yuv, format=\(fourcc\)I420,  width=640, height=480\
  ! ffmpegcolorspace ! x264enc ! fdsink > vid.bin 
```

现在我想使用以下管道在 GStreamer 中播放以前录制的文件：

```
cat vid.bin | gst-launch fdsrc ! ffdec_h264 ! autovideosink 
```

但随后它给出了以下错误：

```
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
ERROR: from element /GstPipeline:pipeline0/ffdec_h264:ffdec_h2640: Internal GStreamer error: negotiation problem.  Please file a bug at http://bugzilla.gnome.org/enter_bug.cgi?product=GStreamer.
Additional debug info:
gstffmpegdec.c(2804): gst_ffmpegdec_chain (): /GstPipeline:pipeline0/ffdec_h264:ffdec_h2640:
ffdec_h264: input format was not set before data start
ERROR: pipeline doesn't want to preroll.
Setting pipeline to NULL ...
Freeing pipeline ... 
```

我知道捕获视频的最佳方法是使用 Muxers，但有什么方法可以播放我以前的文件吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T17:11:42.163

不确定您的管道是否正确。

如果您想写入文件，为什么不简单地使用 filesink 和 filesrc。

fdsink > vid.bin 将无法正常工作，因为如果您看到 gstreamer 的打印，gst-launch 也会进入文件。[只需在文本编辑器中打开 vid.bin，您就会明白我的意思]。

此外，要在没有复用器的情况下存储 x264 流，您需要在 x264enc 中使用 byte-stream=1 以附件b 格式存储它，以便可解码。

要播放原始 x264 流，您需要在视频接收器之前有一个色彩空间转换器

```
gst-launch filesrc location=inputfile ! legacyh264parse ! ffdec_h264 ! queue ! ffmpegcolorspace ! autovideosink 
```

在我这里玩得很好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-09T08:08:12.703

或者，使用 gstreamer 1.0 播放原始 h264 文件：

```
gst-launch-1.0 filesrc location=/tmp/video.h264 ! h264parse ! avdec_h264 ! autovideosink 
```

# iphone - iPhone中的本地化在按钮单击时不起作用

> ID：12702612
> 
> 赞同：0
> 
> 时间：2012-10-03T05:56:04.957
> 
> 标签：iphone

我为 iPhone 制作了一个应用程序。在此用户可以在按钮单击时更改语言。但 NSLoalizedString 没有转换值。

代码是

```
-(IBAction)btn1pressed:(id)sender {
    SecViewController *sec = [[SecViewController alloc] initWithNibName:@"SecViewController" bundle:nil];
    NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];

    // NSLog(@"%@", [userDefaults objectForKey:@"AppleLanguages"]);

    languages =@"en";

    [[NSUserDefaults standardUserDefaults] setObject:languages forKey:@"AppleLanguages"];
    [[NSUserDefaults standardUserDefaults] synchronize];     
    NSLog(@"%@", [userDefaults objectForKey:@"AppleLanguages"]);

    // NSLog(@"%@", NSLocalizedString(@"Subhash", nil));
    [self.navigationController pushViewController:sec animated:YES];
}

-(IBAction)btn2pressed:(id)sender {
    SecViewController *sec = [[SecViewController alloc] initWithNibName:@"SecViewController" bundle:nil];
    NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];

    // NSLog(@"%@", [userDefaults objectForKey:@"AppleLanguages"]);

    languages = @"es";

    [[NSUserDefaults standardUserDefaults] setObject:languages forKey:@"AppleLanguages"];
    [[NSUserDefaults standardUserDefaults] synchronize];     
    NSLog(@"%@", [userDefaults objectForKey:@"AppleLanguages"]);

    //  NSLog(@"%@", NSLocalizedString(@"Subhash", nil));

    [self.navigationController pushViewController:sec animated:YES];
}

-(IBAction)btn3pressed:(id)sender {
    SecViewController *sec = [[SecViewController alloc] initWithNibName:@"SecViewController" bundle:nil];
    NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];

    // NSLog(@"%@", [userDefaults objectForKey:@"AppleLanguages"]);

    languages =@"ja";

    [[NSUserDefaults standardUserDefaults] setObject:languages forKey:@"AppleLanguages"];
    [[NSUserDefaults standardUserDefaults] synchronize];     
    NSLog(@"%@", [userDefaults objectForKey:@"AppleLanguages"]);

    // NSLog(@"%@", NSLocalizedString(@"Subhash", nil));

    [self.navigationController pushViewController:sec animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:02:33.837

尝试

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:languages,nil] forKey:@"AppleLanguages"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:13:54.610

> 使用 NSLocalizedString() 进行本地化。
> 
> 同时给出相应的本地化字符串。

# ajax - 如何将用于循环数据的php发送到jquery

> ID：12702614
> 
> 赞同：0
> 
> 时间：2012-10-03T05:56:04.837
> 
> 标签：ajax, jquery

我创建了一张发票。我放了 3 个字段：数量、费率和总金额。总金额按照此格式计算（数量*费率）。所有总金额总和显示在 Sub_total div 上。这是我的代码：

```
 <html>
    <head>
        <title>Invoice</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">

    $(document).ready(function(){

        $(".qty").each(function() {

            $(this).keyup(function(){
                calculateSum();
            });
        });

      $(".rate").each(function() {

            $(this).keyup(function(){
                calculateSum();
            });
        });

    });

    function calculateSum() {

    var qty = 1;
        $(".qty").each(function() {

            if(!isNaN(this.value) && this.value.length!=0) {
                qty = parseFloat(this.value);
            }

        });

                var rate = 0;
        $(".rate").each(function() {
           if(!isNaN(this.value) && this.value.length!=0) {
                rate = parseFloat(this.value);
            }

        });

        $('input[name=total_amount]').val(qty.toFixed(2)*rate.toFixed(2));
    }
</script>
        <style type="text/css">
table
{
    border: 1px solid black;
    border-bottom: none;
    width: 600px;
}

td
{
    border-left: 1px solid black;
    border-bottom: 1px solid black;
    padding:5px 5px 5px 5px;
}
#first
{
    border-left: none;
    border-bottom: 1px solid black;
}
        </style>
    </head>
    <body>
        <table cellpadding="0" cellspacing="0">
            <tr>
                <td id="first">Quantity</td>
                <td>Rate</td>
                <td>Total Amount</td>
            </tr>
            <?php
            $num=4;
            for ($i=0; $i<$num; $i++)
            {
                echo "
             <tr>
                 <td id='first'><input class='qty' type='text' name='qty[]'/></td>
                <td><input class='rate' type='text' name='rate[]'/></td>
               <td><input class='total_amount' type='text' name='total_amount[]'/></td>
            </tr>";
            }
            ?>
                        <tr>
                            <td id="first" colspan="2" align="right">Sub Total:</td>
            <td><span id="sub_total">0</span></td>
            </tr>
                 </table>

    </body>
</html> 
```

我想以这种方式显示每个总金额

```
total_amount[1]=(qty[1]*rate[1])
total_amount[2]=(qty[1]*rate[1])
total_amount[3]=(qty[1]*rate[1])
total_amount[4]=(qty[1]*rate[1]) 
```

我很努力，但我的代码不能正常工作。所以请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:02:09.930

您不需要首先使用 $.each 分配事件..

```
$('.qty , .rate').keyup(function() {
    calculateSum($(this).closest('tr'));
});

function calculateSum($tr) {
   var $qty =  $tr.find('.qty').val();
   var $rate = $tr.find('.rate').val();
   $tr.find('.total_amount').val(  parseFloat($qty).toFixed(2)* parseFloat($rate).toFixed(2) )
} 
```

这应该足够了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:14:07.757

```
$(document).ready(function(){
    $(".qty, .rate").keyup(function(){
        calculateSum();            
    });
});

function calculateSum() {
    var qty = [];
    $(".qty").each(function() {
            var num = parseFloat(this.value) || 1;
            qty.push(num);
    });

    var rate = [];
    $(".rate").each(function() {
            var num = parseFloat(this.value) || 0;
            rate.push(num);
    });
    var sub_total = 0;
    $('input[name=total_amount]').each(function(i){
        var amount = qty[i].toFixed(2)*rate[i].toFixed(2);
        total += amount;
        $(this).val(amount);
    }
    $("#sub_total").text(total);
} 
```

# asp.net - azure myWebRole 和 nonazure 服务器之间的 azure connect 不工作

> ID：12702620
> 
> 赞同：0
> 
> 时间：2012-10-03T05:56:38.210
> 
> 标签：asp.net, azure, azure-connect

我的 web 应用程序托管在 windows azure 上，需要与 TFS 服务器通信。当任何人使用 live id 登录我的 Web 应用程序时，我希望登录用户使用我的 Team Foundation 服务器 (TFS) 凭据 - 用户名、密码和域以编程方式进行身份验证并连接到我们的 TFS 服务器并创建一些工作项。

我将我的 azure connect 配置为在 azure WebRole 和 TFS 服务器之间进行通信（我们的 TFS 不是 azure ）。我将 WebRole 和 TFS 服务器都添加到单个连接组中

在我的 azureportal 中，我可以看到 mywebrole 和我的 TFSServer 已连接，机器端点处于活动状态，并且自上次连接更新以来它会刷新

.但是当我尝试从 azure 运行我的 Web 应用程序并尝试与我们的 TFS 服务器通信时，它会抛出错误消息说错误消息：服务器不提供 Team Foundation 服务，例如，http://xyz-abcxyx- 01:8080/tfs/eas/。技术信息（针对管理员）：无法解析远程名称：'xyz-abcxyx-01'

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:29:13.027

您应该在 WebRole 上启用远程桌面并连接到您的实例之一。然后，尝试 ping 您的 TFS 服务器的 IP（不是主机名 xyz-abcxyx-01）。也许这只是一个 DNS 问题（即使使用主机名适用于 Windows Azure Connect）。

如果 ping IP 有效，但 ping 主机名无效，您还有几个选择：

*   使用 IP 而不是主机名。如果您将 TFS 配置为使用主机标头，这将不起作用。
*   创建提升的启动任务以修改主机文件并将 IP 映射到主机名。在您的代码中，您可以继续使用主机名。
*   尝试修改您的 WebRole 中配置的 DNS 服务器以使用默认 DNS 服务器 + 您的内部 DNS 服务器。但对我来说，这看起来不是一个干净的解决方案。

无论如何，在每个解决方案中，您都希望将 IP/主机名存储在 ServiceConfiguration 中，并确保您的代码支持对 ServiceConfiguration 的更改。这将允许您更改 IP/主机名，而无需重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:22:15.783

您应该检查 TFS 服务器是否正在侦听所有网络接口，包括由 Azure Connect 创建的接口（从 2a01 开始）。接下来尝试从本地 LAN 上的计算机连接到 TFS，以确保其配置正确。您不需要使用 IP 来引用 TFS，DNS 名称肯定是开箱即用的。

# javascript - History.js 和重新加载 Javascript

> ID：12702626
> 
> 赞同：1
> 
> 时间：2012-10-03T05:57:17.537
> 
> 标签：javascript, jquery, html, history.js

所以我使用[History.js](https://github.com/balupton/History.js/)插件通过 AJAX 在我的 Wordpress 主题中加载页面。我已经成功地这样做了，并且整个加载功能都可以正常工作。但是，我有许多脚本在同一个文件中工作，它们当然不会在状态更改时加载。

这是我的文件的（非常简短的）版本`functions.js`来解释：

```
(function($){})(window.jQuery);

$(document).ready(function() {
    /* THIS IS CODE RELATIVE TO MY HOME PAGE ONLY */
    $projects = $("#projects");
    $projects.append($(".contact"));

    $projects.isotope({
        itemSelector : '.item',
        layoutMode : 'masonry'
    });
    /* END PREVIOUS BLOCK */

    /* BEGIN HISTORY.JS IMPLEMENTATION */

    var History = window.History,
        State = History.getState();

    $('.nav a, .leftHold a').on('click', function(event) {
        event.preventDefault();
        var path = $(this).attr('href');
        var title = $(this).text();
        History.pushState('ajax', title, path);
    });

    History.Adapter.bind(window, 'statechange', function() {
        load_site_ajax();
    });

    function load_site_ajax() {
        State = History.getState();
        $('body, html').animate({ scrollTop : 0 }, 250, function() {
            $("#article").animate({ left : -1*$(window).width() }, 250, function() {
                $(this).load(State.url + ' #article', function() {
                    $(".nav li").each(function() {
                        $(this).removeClass("current_page_item").removeClass("current_page_parent").removeClass("current_page_ancestor");
                    }).promise().done(function() {
                        $(".nav a").each(function() {
                            if(State.title.indexOf($(this).text()) != -1) {
                                $(this).parent().addClass('current_page_item');
                                return false;
                            }
                        });
                    });
                }).promise().done(function() { $(this).css("left", $(window).width()).animate({ left : 0 }, 250); });
            });
        });
    }

    /* END HISTORY.JS */
}); 
```

**我在我的文档末尾**加载这个`functions.js`文件，就在结束标记之前。我可以看出，每当我更改浏览器状态时，其中的代码都不会再次运行，因此 Isotope 和我的其他 Javascript 都不会再次加载。**`body``$(document).ready();`**

 ****问题：**

`functions.js`每次由 History.js 启动 pushstate 时，我应该如何确保代码运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:32:46.393

听起来您需要`ready`再次执行代码。将初始化代码包装在一个函数中：

```
$(document).ready(initializePage);

function initializePage() {
    /* THIS IS CODE RELATIVE TO MY HOME PAGE ONLY */
    ... 
} 
```

然后，当`"statechange"`发生火灾时，您可以`initializePage()`再次调用。

您还需要确保 History 代码只运行一次，因此将该代码放在单独的函数中：

```
$(document).ready(setupHistory);

function setupHistory() {
    /* BEGIN HISTORY.JS IMPLEMENTATION */

    var History = window.History,
        State = History.getState();
    });
    ....
} 
```**

# tsql - 在 T-SQL 中按字母数字排序

> ID：12702627
> 
> 赞同：2
> 
> 时间：2012-10-03T05:57:20.237
> 
> 标签：tsql, sorting

我有一个 SQL 2008 数据库，其中的表具有 nvarchar 类型的字段“类别”，其值如下：

```
A1
A10
A2
B1/1
B1/2
B1/3
D1(1)
D1(2) 
```

等等

我知道这对数据来说不是一个好的结构，但我们现在需要以某种方式缩小对该表的搜索范围，以便用户输入开始和结束类别（即 A1 到 A15，或 B1/1 到 B/3）和我们只想返回具有这些类别值的记录。

有没有办法做到这一点？另一件事是我们还希望对结果进行正确排序（即 A10 在 A2 之后）。

C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:35:00.210

您可以使用 WHERE 子句缩小返回结果的范围。例如：

```
SELECT  Col1
       ,Col2
       ...
       ,Coln
FROM SourceTable
WHERE Col1>'A1' AND Col1<'A15' 
```

您可以将此值（“A1”和“A15”）用作用户定义函数的输入参数。然后很容易通过'B1'和'B15'或其他所有东西而不是它们。

此外，如果您想在“A2”之后显示“A10”

有关用户定义函数的更多信息 -[用户定义函数](http://msdn.microsoft.com/en-us/library/ms186755.aspx)

检查此[信息](http://msdn.microsoft.com/en-us/library/ms189863%28v=sql.105%29.aspx)以了解 T-SQL 中的字符串压缩。此外，您应该花一些时间处理冲突——您是比较字符串区分大小写还是不区分大小写。

至于“另一件事是我们还希望对结果进行正确排序（即 A2 之后的 A10）”，您可以在函数中添加一些逻辑，如下所示：

```
DECLARE @ParamOne NVARCHAR(2)='A2'
DECLARE @ParamTwo NVARCHAR(3)='A10'

SELECT  CASE WHEN LEN(@ParamOne)=2
             THEN CASE WHEN @ParamTwo<STUFF(@ParamOne,2,0,'0')
                    THEN 1
             ELSE 2
             END
        ELSE
             CASE WHEN @ParamTwo<@ParamOne
                    THEN 1
             ELSE 2
             END
        END 
```

# google-apps-script - 从 WebApp 创建基于时间的触发器

> ID：12702628
> 
> 赞同：0
> 
> 时间：2012-10-03T05:57:21.227
> 
> 标签：google-apps-script

我正在尝试从作为 WebApp 发布的 Google Apps 脚本创建基于时间的触发器。

**更新**：此 WebApp 应作为访问它的用户运行，而不是作为 Apps 脚本所有者运行。

每当我尝试访问 ScriptApp 服务时，我都会在前端收到错误消息：

> 执行该操作需要授权。

重现这一点的示例代码是：

```
function doGet(request) {
  ScriptApp.newTrigger('test');
  return ContentService.createTextOutput("OK");
};

function test() {
  // noop
} 
```

这是不可能的事情吗？是否有可能以某种方式自动添加一个触发器，该触发器根据用户授予授权的时间运行方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:05:54.817

您的网络应用程序在什么凭据下运行？作为运行应用程序的用户或您自己。从错误来看，它看起来像是在作者的凭据下运行的。在这种情况下，您应该在分发 URL 之前明确授权应用程序。为此，请打开脚本编辑器并选择任何函数，然后尝试使用脚本编辑器中的小“播放”按钮运行该函数。系统会要求您提供权限，之后您才能使用 Ui 应用程序

# google-api - Google Book orderby 错误？

> ID：12702631
> 
> 赞同：3
> 
> 时间：2012-10-03T05:57:39.773
> 
> 标签：google-api, google-books

我真的对 Google Books API 感到困惑，我坚信“orderBy”有问题，这是官方 API 文档：

[https://developers.google.com/books/docs/v1/using#st_params](https://developers.google.com/books/docs/v1/using#st_params)

这是使用 orderBy 过滤器的查询示例：

[https://www.googleapis.com/books/v1/volumes?q=flowers&orderBy=newest](https://www.googleapis.com/books/v1/volumes?q=flowers&orderBy=newest)

在文档中提到它应该根据**发布日期**从最新到最旧，而显然 API 返回错误的订单。

有什么线索吗？

# asp.net - 下拉列表动态排序值

> ID：12702634
> 
> 赞同：0
> 
> 时间：2012-10-03T05:57:49.727
> 
> 标签：asp.net, vb.net, gridview, html.dropdownlistfor

我在gridview中有一个下拉列表，我在其中从数据库中选择下拉列表中的数据，如下所示

```
Adeel
Akram
Ali
Asif
Zeeshan 
```

问题是，当gridview加载例如5行数据插入数据时，下拉显示的数据以这样的方式排序，每一行的第一个元素是adeel，但我想根据行对名称进行排序例如在第一行元素应该显示为 adeel，第二行中的值应该显示为 Akram 等等。下面是我用来加载 griview 以进行数据插入的代码

```
For Each gvRow As GridViewRow In GridView1.Rows
    Dim ddlEmpCode As DropDownList = CType(gvRow.FindControl("DropDownlist1"), DropDownList)
    Dim con As SqlConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("DatabaseConnectionString2").ConnectionString)
    Dim cmd As SqlCommand = New SqlCommand("insert into Status(m_date,emp_code) values (@m_Date,@EMp_Code)", con)
    cmd.Parameters.Clear()
    cmd.Parameters.AddWithValue("m_Date", txtdate.Text)
    cmd.Parameters.AddWithValue("Animal_Code", ddlAnimalCode.SelectedValue)
    con.Open()
    cmd.ExecuteNonQuery()
    con.Close()
    Label1.Text = "All Records are Saved Successfully"
    btnInsert.Enabled = False
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:46:14.587

尝试以下代码..尝试在 rowdatabound 事件中设置下拉列表的选定索引，如下所示...

```
protected void GridView1_RowDatabound(object sender, GridViewRowEventArgs e)
        {

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                DropDownList drpdwnList = ((DropDownList)e.Row.FindControl("DropDownlist1"));                   
                drpdwnList.SelectedIndex=e.Row.RowIndex;
            }
        } 
```

**我用C#写过这个，你需要用Vb写同样的

# highcharts - 如何解决高图中的重叠散点

> ID：12702642
> 
> 赞同：4
> 
> 时间：2012-10-03T05:59:16.493
> 
> 标签：highcharts, data-visualization, highstock, scatter-plot

我有一个使用 Highstock API 绘制的时间序列数据作为散点图。当我将其绘制 5 天或更长时间时……我非常接近生成的散点完全重叠。我必须在我的时间范围内关闭才能看到附近实际上有两个点（它们是重叠的）。

所以请帮助我如何改善这个问题的显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-16T16:58:20.583

根据我的阅读和观察，这是使用散点图的原因之一：查看数据集在哪里重叠、组合在一起并显示可能的相关性（参见维基百科上的正式定义：[https://en .wikipedia.org/wiki/Scatter_plot](https://en.wikipedia.org/wiki/Scatter_plot)）。

您可能希望在图表中添加一条注释，以鼓励您的用户放大以查看更多详细信息。缩放功能是 Highcharts/Highstock 的原生部分，但对许多用户来说并不是很明显。

值得注意的是，您可以将缩放限制在一个轴 ( `zoomType: 'x'`) 或两个轴 ( `zoomType: 'xy'`)；请参阅[http://api.highcharts.com/highcharts#chart.zoomType](http://api.highcharts.com/highcharts#chart.zoomType)。这可以让您更好地控制您希望用户如何查看具有大量重叠点的图表部分。

# scala - Scala：基准方法的时间速度：方法的总运行时间

> ID：12702645
> 
> 赞同：0
> 
> 时间：2012-10-03T05:59:29.307
> 
> 标签：scala

我有两种使用 Scala 查找阶乘的方法。我想知道与尾递归方式相比，非尾递归方式慢了多少。

```
// factorial non-tail recursive
def fact1(n: Int): Int =
  if (n==0) 1
  else n*fact(n-1)       

// factorial tail recursive
def fact(n: Int): Int = {
  def loop(acc: Int, n:Int): Int =
    if (n==0) acc
    else loop(acc*n, n-1)
  loop(1, n)
}

// a1 = Time.now
fact1(100)
// a2 = Time.now
// a2-a1

// b1 = Time.now
fact(100)
// b2 = Time.now
// b2-b1 
```

我刚刚为 Time.now 编写了 Ruby 代码。基本上，您将如何`Time.now`在 Scala 中编写类似的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:18:16.273

您可以使用`java.lang.System`提供计算当前时间的方法的类：

*   `currentTimeMillis`当前时间（以毫秒为单位）
*   `nanoTime`以纳秒为单位的当前时间（现在推荐）。

但是，编写好的微基准非常困难，建议依靠框架来实现。Caliper 非常好，并且[在 scala 中有一个很好的项目模板](https://github.com/sirthias/scala-benchmarking-template)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:12:36.597

您可以使用 Scala 包装器方法`scala.compat.Platform.currentTime`将调用转发到`System.currentTimeMillis`.

# web-config - SimpleMembershipProvider MinRequiredPasswordLength 始终返回 0，尽管它在 Web.config 成员资格提供程序部分定义为 6

> ID：12702649
> 
> 赞同：1
> 
> 时间：2012-10-03T05:59:45.590
> 
> 标签：web-config, asp.net-membership, asp.net-mvc-4, settings, simplemembership

我切换到[`SimpleMembershipProvider`](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)ASP.NET MVC 4 应用程序。其他一切都很好，但是有这个问题......

当我尝试这段代码时：

```
var password = Membership.GeneratePassword(Membership.MinRequiredPasswordLength, 0); 
```

`MinRequiredPasswordLength`始终为 0。`Web.config`未读取成员资格提供程序部分中定义的设置。

这是成员资格默认提供程序`Web.config`部分：

```
<membership defaultProvider="AspNetSqlMembershipProvider">
    <providers>
         <clear />
             <add name="AspNetSqlMembershipProvider"
                  type="System.Web.Security.SqlMembershipProvider"
                  connectionStringName="DefaultConnection"
                  enablePasswordRetrieval="false"
                  enablePasswordReset="true"
                  requiresQuestionAndAnswer="false"
                  requiresUniqueEmail="false"
                  maxInvalidPasswordAttempts="5"
                  minRequiredPasswordLength="6"
                  minRequiredNonalphanumericCharacters="0"
                  passwordAttemptWindow="10"
                  applicationName="/Acad" />
    </providers>
</membership> 
```

这是我得到的调试信息：

![在此处输入图像描述](../Images/c8102becdd078dec5957357117db4de2.png)

有什么提示吗？

是否`SimpleMembershipProvider`如此简单以至于它甚至不使用 Web.config 部分？

**暂时解决**

为了克服`SimpleMembershipProvider`当前的限制，我使用[这段代码](https://stackoverflow.com/a/3302228/114029)来获取定义的值`Web.config`：

```
MembershipSection membershipSection = (MembershipSection)WebConfigurationManager.GetSection("system.web/membership");
var defaultProvider = membershipSection.DefaultProvider;
ProviderSettings providerSettings = membershipSection.Providers[defaultProvider];
var minRequiredPasswordLength = int.Parse(providerSettings.Parameters["minRequiredPasswordLength"]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:44:56.947

> 我在 ASP.NET MVC 4 应用程序中切换到 SimpleMembershipProvider。

呃，从您在 web.config 中显示的相关部分来看，这似乎根本不是这种情况。您正在使用`AspNetSqlMembershipProvider`.

如果您想切换到[SimpleMembershipProvider](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29.aspx)，请确保您已正确配置它：

```
<membership defaultProvider="SimpleMembershipProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider"
         type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"
    />
  </providers>
</membership> 
```

这就是说 SimpleMembershipProvider 不支持通过 web.config 设置这些属性。它甚至不使用它。如果你想要这样的功能，你将不得不自己实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T10:12:59.487

您可以继承`SimpleMembershipProvider`和覆盖`MinRequiredPasswordLength`：

```
public class YoursSimpleMembershipProvider : SimpleMembershipProvider
{
    private const int MIN_REQUIRED_PASSWORD_LENGTH = 6;

    private const int MIN_REQUIRED_NON_ALPHANUMERIC_CHARACTERS = 0;

    public override int MinRequiredPasswordLength
    {
        get
        {
            return MIN_REQUIRED_PASSWORD_LENGTH;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T01:22:21.770

我发现如果我把 minRequiredPasswordLength="3" 放在 web.config 中，像这样：

```
<membership defaultProvider="SimpleMembershipProvider" >
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" 
         type="WebMatrix.WebData.SimpleMembershipProvider,WebMatrix.WebData"
         minRequiredPasswordLength="3"
    />
  </providers>     
</membership> 
```

那没有效果。我在 MODEL 中找到了秘密。如果你创建一个 Internet 应用程序模板，在 AccountModels.cs 中有一个“RegisterModel”，就像这样：

```
 public class RegisterModel
    {
        [Required]
        [Display(Name = "用户名")]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "{0} 必须至少包含 {2} 个字符。", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "密码")]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "确认密码")]
        [Compare("Password", ErrorMessage = "密码和确认密码不匹配。")]
        public string ConfirmPassword { get; set; }
    } 
```

在 Password 属性中有一个 StringLength->MinimumLength 。我认为是！

SimpleMembershipProvider 中删除的一些功能，请参见此处：[http ://sharifhkhan.com/programming/features-removed-in-simplemembershipprovider/](http://sharifhkhan.com/programming/features-removed-in-simplemembershipprovider/)

希望这对您有所帮助。

# iphone - 如何在不关闭键盘的情况下清除可编辑 UIWebview 的内容

> ID：12702650
> 
> 赞同：1
> 
> 时间：2012-10-03T06:00:02.237
> 
> 标签：iphone, objective-c

我有一个`UIWebView`内容可编辑设置为true。现在如果点击`UIWebView`光标出现在`UIWebView`键盘上。现在我可以在这个可编辑的`UIWebView`.

我的问题是，当我尝试清除此可编辑`UIWebView`的内容时，内容会被清除，但键盘也会被关闭。我想在`UIWebView`不关闭键盘的情况下清除可编辑的内容。

我正在使用以下代码来清除可编辑的 UIWebView。

`[self.webView loadHTMLString:@"" baseURL:nil];`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:56:40.210

您可以尝试通过 javascript 清除 webview：

```
[webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML = '';"]; 
```

重新加载 Web 视图会将其设置为当前未编辑且键盘处于隐藏状态的默认状态。使用上面的代码片段，您将直接更改 Web 视图的内容而不影响其状态。

# php - 使用用于 PHP 的亚马逊 Web 服务时带有 curl(php) 的 SSL 证书

> ID：12702653
> 
> 赞同：0
> 
> 时间：2012-10-03T06:00:11.110
> 
> 标签：php, curl, amazon-web-services, ssl-certificate

我已经下载了适用于 PHP 的 AWS(Amazon) SDK 并放置了亚马逊网络服务所需的凭证。然后我运行示例文件夹中的示例代码文件名（cli-ec2_sorting_and_filtering.php），我收到以下错误。

`Fatal error: Uncaught exception 'cURL_Exception' with message 'cURL resource: Resource id #13; cURL error: SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed (cURL error code 60). See http://curl.haxx.se/libcurl/c/libcurl-errors.html for an explanation of error codes.' in C:\xampp\htdocs\amazon\lib\requestcore\requestcore.class.php:843 Stack trace: #0 C:\xampp\htdocs\amazon\sdk.class.php(1037): RequestCore->send_request() #1 C:\xampp\htdocs\amazon\services\ec2.class.php(2270): CFRuntime->authenticate('DescribeImages', Array) #2 C:\xampp\htdocs\amazon\_samples\cli-ec2_sorting_and_filtering.php(62): AmazonEC2->describe_images() #3 {main} thrown in C:\xampp\htdocs\amazon\lib\requestcore\requestcore.class.php on line 843`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-02T16:36:56.067

你必须包括这个：

```
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); 
```

如果它已经存在，则需要将其更改为 false。希望这可以帮助。

# javascript - 如何用已经设置的javascript替换样式？

> ID：12702655
> 
> 赞同：3
> 
> 时间：2012-10-03T06:00:18.803
> 
> 标签：javascript, css

我正在实现通过 javascript 选择的菜单。在[jsfiddle](http://jsfiddle.net/vusan/u66PY/1/)中。通过更改此处 div 的 innerHTML 中的样式来选择块。

**但是如何替换已经设置好的样式呢？**

我的问题是我无法选择**block 1**。

完整的html代码：

```
<style>
div {width:10px;height:10px;margin:10px;
    background:#ccc;cursor:pointer;padding:10px;
}
</style>
<div id="makeThatEnable" style="display:none"></div>

<div id="one" onclick="makeThisEnable(this.id)" style="border:1px solid #00f">1</div>
<div id="two" onclick="makeThisEnable(this.id)">2</div>
<div id="three" onclick="makeThisEnable(this.id)">3</div>
<div id="four" onclick="makeThisEnable(this.id)">4</div>
<div id="five" onclick="makeThisEnable(this.id)">5</div>
<br>
Click on box to select it.

<script>
function makeThisEnable(id) {
    document.getElementById('makeThatEnable').innerHTML="<style> #"+id+" {border:1px solid #f00}</style>";   
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:24:41.797

*我有更好的方法。* 唯一标识这样的样式元素

```
<style id="innerStyle">
</style> 
```

然后像这样更新你的函数

```
function makeThisEnable(id) {
    document.getElementById('innerStyle').innerHTML="div#"+id+" {border:1px solid #f00}";   
} 
```

与其使用**`!important`**强制样式，不如像我一样简单地增加声明的**特异性。**

[**演示**](http://jsfiddle.net/aryEz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:06:10.857

add `!important` at the end of CSS like -->

`document.getElementById('makeThatEnable').innerHTML="<style> #"+id+" {border:1px solid #f00 !important;}</style>";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:04:42.190

使用 setAttribute 方法

```
document.getElementById('makeThatEnable').setAttribute('css', 'your prefered style'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:15:59.097

创建两个类（装箱、未装箱）。单击时，首先将所有项目设置为未装箱，然后将单击的项目设置为装箱。

```
<style>
.boxed 
    {border:1px solid #f00}
.unboxed
    {border:0px solid #f00}
</style>

<script>
function makeThisEnable(id) {
    var ids = new Array("one", "two", "three", "four", "five");
    for (var i=0; i<ids.length; i++) {
        document.getElementById(ids[i]).setAttribute("class", "unboxed");       
    }
    document.getElementById(id).setAttribute("class", "boxed");     
}
</script> 
```

# symfony - 如何在 Doctrine 2 中配置命名策略

> ID：12702657
> 
> 赞同：29
> 
> 时间：2012-10-03T06:00:38.097
> 
> 标签：symfony, doctrine-orm

我阅读了手册中关于 Doctrine 命名策略的[章节。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/namingstrategy.html)不幸的是，我不明白我必须把配置代码放在哪里。

为了获得下划线命名策略，我应该使用以下代码：

```
$namingStrategy = new \Doctrine\ORM\Mapping\UnderscoreNamingStrategy(CASE_UPPER);
$configuration()->setNamingStrategy($namingStrategy); 
```

我应该把这个放在哪里？

我在 Symfony 2 上——我想这在配置方面很重要。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-03T06:26:46.740

配置它`config.yml`：

```
doctrine:
    # ...

    orm:
        # ...
        naming_strategy: doctrine.orm.naming_strategy.underscore_number_aware 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-11T09:19:03.100

对于多个实体管理器：

```
doctrine:
    # ...
    orm:
        # ...
        entity_managers:
            default:
                naming_strategy: doctrine.orm.naming_strategy.underscore
                # ... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-10T01:38:23.427

如果您使用 console.php 文件来运行 CLI，您可以将它放在那里。

```
<?php

//something...

$config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode);

$namingStrategy = new UpperCamelCaseNamingStrategy();
$config->setNamingStrategy($namingStrategy);

$em = EntityManager::create($dbParams, $config);

//something else... 
```

# elasticsearch - 在匹配文本之前或/之后突出显示多少个单词

> ID：12702659
> 
> 赞同：0
> 
> 时间：2012-10-03T06:00:51.683
> 
> 标签：elasticsearch

是否可以使用 elasticsearch 配置匹配文本前后的字数？例如，我正在搜索关键字“报告”并设置 wordaround=5 那么它应该只返回包含匹配关键字的 5 个单词

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:25:46.863

尝试定义你的 fragment_size

见：[http ://www.elasticsearch.org/guide/reference/api/search/highlighting.html](http://www.elasticsearch.org/guide/reference/api/search/highlighting.html)

# php - PHP 数组性能 - 内存方面

> ID：12702662
> 
> 赞同：9
> 
> 时间：2012-10-03T06:01:06.910
> 
> 标签：php

我有一个大小为 5 MB 的数组，我将它传递给函数到函数（我不是通过**引用**传递它）

```
foo( $arr );

function foo( $arr ) {
    ....
    bar( $arr );
    ....
}

function bar( $arr ) {
    ....
    test( $arr );
    ....
}

function test( $arr ) {
    ....
    test2( $arr );
    ....
} 
```

默认情况下， PHP**按值**（值的副本）将数组值传递给函数。

我的问题是，如果这个数组值被传递给 100 个函数调用，PHP 会消耗**100 x 5 MB = 500 MB**的内存吗？

PHP 如何在函数调用中处理大数组（在内存方面）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T06:05:54.397

Here is a code to test:

```
<?php

    function testnochanges($arr1){
        foreach($arr1 as $val){
            //
        }
        return $arr1;
    }

    function testwithchanges($arr1){
        $arr1[] = 1;
        return $arr1;
    }

    echo "Stage 0: Mem usage is: " . memory_get_usage() . "<br />";

      for ($i = 0; $i < 100000; ++$i) {
        $arr[] = rand();
      }

     echo "Stage 1 (Array Created): Mem usage is: " . memory_get_usage() . "<br />";

     $arrtest1 = testnochanges($arr);
     echo "Stage 2 (Function did NO changes to array): Mem usage is: " . memory_get_usage() . "<br />";

     $arrtest2 = testwithchanges($arr);
     echo "Stage 3 (Function DID changes to array): Mem usage is: " . memory_get_usage() . "<br />";

    ?> 
```

and here is a output after i run it:

```
Stage 0: Mem usage is: 330656
Stage 1 (Array Created): Mem usage is: 8855296
Stage 2 (Function did NO changes to array): Mem usage is: 8855352
Stage 3 (Function DID changes to array): Mem usage is: 14179864 
```

On **stage 0** we can see that before array is created PHP is already using some space in memory. After creating first array (**Stage 1**) we can see a big change in memory usage as expected. But after calling function `testnochanges` function and creating `$arrtest1` on **Stage 2**, we see that memory usage did not change a lot. It's because we did no changes to `$arr`, so `$arrtest1` and `$arr` still are pointing to the same array. But on **Stage 3**, where we call `testwithchanges` function, and add an element to `$arr` PHP performs `copy-on-write` and returned array which is assigned to `$arrtest2` now uses different part of memory and again we see a big grow of memory usage.

*Dry conclusion*: If you copy array to another array and do not change it, memory usage stays the same as both arrays are pointed to the same one. If you change the array PHP performs `copy-on-write` and, of course memory usage grows.

Good thing to read: [Be wary of garbage collection, part 2](http://www.tuxradar.com/practicalphp/18/1/11).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T06:06:00.733

The only way to really find out how your particular use case performs is to complete a benchmark (quick and dirty is fine). If you are having trouble with performance, you may want to look into SPL. For example, `SplFixedArray` can save memory when dealing larger arrays, granted you know the size beforehand. Also, newer versions of PHP handle garbage collection much better than previous versions, so upgrading may also help.

If you decide to run benchmarks, this will get you started (compares SPL with raw arrays): [https://github.com/elazar/spl-benchmarks](https://github.com/elazar/spl-benchmarks)

# android - 将值从 Web 服务传递到 android 中的条形图

> ID：12702663
> 
> 赞同：0
> 
> 时间：2012-10-03T06:01:11.677
> 
> 标签：android, bar-chart

我正在尝试将两个值（即 a 和 b 值）传递给 x 轴和 y 轴以在 android 中创建条形图。但我通过使用它从 Web 服务获取 a 和 b 值。这里我使用 SOAP 方法来使用 Web 服务。

在尝试了一些代码之后。我在我的日志猫上得到了这些东西。谁能告诉我如何解决这些问题？请提出建议..

**LOGCAT**

```
10-03 11:35:25.285: W/KeyCharacterMap(404): No keyboard for id 0
10-03 11:35:25.295: W/KeyCharacterMap(404): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-03 11:35:38.195: D/AndroidRuntime(404): Shutting down VM
10-03 11:35:38.195: W/dalvikvm(404): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-03 11:35:38.205: E/AndroidRuntime(404): FATAL EXCEPTION: main
10-03 11:35:38.205: E/AndroidRuntime(404): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.test_wb/com.example.test_wb.ResultActivity}: java.lang.NullPointerException
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.os.Looper.loop(Looper.java:123)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-03 11:35:38.205: E/AndroidRuntime(404):  at java.lang.reflect.Method.invokeNative(Native Method)
10-03 11:35:38.205: E/AndroidRuntime(404):  at java.lang.reflect.Method.invoke(Method.java:521)
10-03 11:35:38.205: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-03 11:35:38.205: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-03 11:35:38.205: E/AndroidRuntime(404):  at dalvik.system.NativeStart.main(Native Method)
10-03 11:35:38.205: E/AndroidRuntime(404): Caused by: java.lang.NullPointerException
10-03 11:35:38.205: E/AndroidRuntime(404):  at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:263)
10-03 11:35:38.205: E/AndroidRuntime(404):  at java.lang.Double.parseDouble(Double.java:287)
10-03 11:35:38.205: E/AndroidRuntime(404):  at com.example.test_wb.ResultActivity.<init>(ResultActivity.java:25)
10-03 11:35:38.205: E/AndroidRuntime(404):  at java.lang.Class.newInstanceImpl(Native Method)
10-03 11:35:38.205: E/AndroidRuntime(404):  at java.lang.Class.newInstance(Class.java:1429)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-03 11:35:38.205: E/AndroidRuntime(404):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
10-03 11:35:38.205: E/AndroidRuntime(404):  ... 11 more 
```

**Main_WB.java**

```
public class Main_WB extends Activity
{
EditText edt1, edt2;
// TextView txt_1;

Button btn;
ArrayList<String> result;

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

edt1 = (EditText) findViewById(R.id.editText1);
edt2 = (EditText) findViewById(R.id.editText2);
btn = (Button) findViewById(R.id.button1);

result = new ArrayList<String>();

btn.setOnClickListener(new View.OnClickListener() 
{
    public void onClick(View v) 
    {
        result.addAll(getTMSChart(edt1.getText().toString(), edt2.getText().toString()));

        Intent in = new Intent(getApplicationContext(), ResultActivity.class);

        in.putExtra("gotonextpageX", result.get(0));
        in.putExtra("gotonextpageY", result.get(1));

        startActivity(in);
    }
});
}
private ArrayList<String> getTMSChart(String FromDate, String ToDate) 
{
// txt_1 = (TextView)findViewById(R.id.textView1);

System.setProperty("http.keepAlive", "false");
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

envelope.dotNet = true;

String NAMESPACE = "http://tempuri.org/";
String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";
String METHOD = "GetTMSChart";

SoapObject request = new SoapObject(NAMESPACE, METHOD);
request.addProperty("FromDate", FromDate);
request.addProperty("ToDate", ToDate);

envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

String x = "", y = "";

ArrayList<String> stringResult = new ArrayList<String>();

try 
{
    androidHttpTransport.call(NAMESPACE + METHOD, envelope);
    SoapObject result = (SoapObject) envelope.bodyIn;
    SoapObject root = (SoapObject) ((SoapObject) (result).getProperty(0)).getProperty("NewDataSet");
    int tablesCount = root.getPropertyCount();

    for (int i = 0; i < tablesCount; i++) 
    {
        SoapObject table = (SoapObject) root.getProperty(i);
        int propertyCount = table.getPropertyCount();

        for (int j = 0; j < propertyCount; j++) 
        {

            stringResult.add(table.getPropertyAsString("Order_No").toString());
            stringResult.add(table.getPropertyAsString("Freight_Rate").toString());
        }
    }
}
catch (Exception e) 
{
}

return stringResult; 
} 
} 
```

**结果活动.java**

```
public class ResultActivity extends Activity 
{   
TextView txt1,txt2;

String a,b;

double x_axis = Double.parseDouble(a); // Type casting
double y_axis = Double.parseDouble(b); // Type casting

@Override
public void onCreate(Bundle savedInstanceState)
{   
super.onCreate(savedInstanceState);
setContentView(R.layout.main1);

Bundle extras = getIntent().getExtras();

if(extras != null)
{   
    a = extras.getString("gotonextpageX");
    b = extras.getString("gotonextpageY");
  }
else
{
}
draw();

//txt1 = (TextView)findViewById(R.id.txtVw);
//txt2 = (TextView)findViewById(R.id.txtVw2);
//txt1.setText(x);
//txt2.setText(y);

}

public void draw()
{   

String[] titles = new String[] { "Order's profit of the year", " " };

List<double[]> values = new ArrayList<double[]>();

values.add(new double[] { y_axis });

int[] colors = new int[] { Color.BLACK, Color.WHITE};

XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
renderer.setOrientation(Orientation.HORIZONTAL);

 setChartSettings(renderer, "Profit for the year 2012", " ", " ",0,x_axis, 0,y_axis, Color.GRAY, Color.LTGRAY);

renderer.setXLabels(1);
renderer.addXTextLabel(100, "x");

//renderer.addXTextLabel(200, "ord2");
//renderer.addXTextLabel(300, "ord3");
//renderer.addXTextLabel(400, "ord4");
//renderer.setPanEnabled(true, false);

int length = renderer.getSeriesRendererCount();

for (int i = 0; i < length; i++) 
{
    SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
    seriesRenderer.setDisplayChartValues(true);
    }

ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
}

protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{   

  // creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(15);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);

    int length = colors.length;

    for (int i = 0; i < length; i++) 
    {
        SimpleSeriesRenderer r = new SimpleSeriesRenderer();
        r.setColor(colors[i]);
        renderer.addSeriesRenderer(r);
        }
    return renderer;
    }

 protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
String yTitle, double xMin, double x_axis2, double yMin, double yMax, int axesColor,int labelsColor) 
{   

// sets lots of default values for this renderer

renderer.setChartTitle(title);
renderer.setXTitle(xTitle);
renderer.setYTitle(yTitle);

renderer.setXAxisMin(xMin);

//renderer.setXAxisMax(x2);

renderer.setYAxisMin(yMin);
renderer.setYAxisMax(yMax);

renderer.setAxesColor(axesColor);
renderer.setLabelsColor(labelsColor);

renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.GRAY);
}

protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
{   
// adds the axis titles and values into the data-set

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
int length = titles.length;

for (int i = 0; i < length; i++) 
{
    CategorySeries series = new CategorySeries(titles[i]);

    double[] v = values.get(i);
    int seriesLength = v.length;

    for (int k = 0; k < seriesLength; k++) 
    {
        series.add(v[k]);
    }

    dataset.addSeries(series.toXYSeries());
}
return dataset;
 }    } 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:04:32.473

`String a,b;`包含什么？

它肯定会抛出`NPE`，因为你是

```
double x_axis = Double.parseDouble(a); // Type casting
double y_axis = Double.parseDouble(b); // Type casting 
```

给 a,b 一些值然后解析它。

在你的情况下：写

```
double x_axis = Double.parseDouble(a); // Type casting
double y_axis = Double.parseDouble(b); // Type casting 
```

在里面`if(extras!=null){}`

**编辑：**

```
if(extras != null)
{   
    a = extras.getString("gotonextpageX");
    b = extras.getString("gotonextpageY");
    double x_axis = Double.parseDouble(a); // Type casting
    double y_axis = Double.parseDouble(b); // Type casting
  } 
```

# ios - 在 Visual Studio 和 Xcode 中使用颠覆

> ID：12702666
> 
> 赞同：2
> 
> 时间：2012-10-03T06:01:29.150
> 
> 标签：ios, xcode, visual-studio, svn

> **可能重复：**
> [在 Xcode 中使用 Subversion](https://stackoverflow.com/questions/1551886/using-subversion-in-xcode)

我正在 Visual Studio (Win32/Win8/Direct3D) 和 Xcode (iOS/OpenGL) 中构建一个跨平台应用程序。我在 Visual Studio 中有一个通过 Ankhsvn 工作的存储库，但现在我需要将 Xcode 项目连接到它。我已经创建了一个默认的 Xcode OpenGL-ES 项目，并将从原始项目中零碎地导入功能，但我有时间让 Xcode 与现有存储库一起工作。有没有人做过这样的事情？如果是这样，您对如何执行此操作有任何指示吗？

谢谢！查理。

# c# - 在 C# 中绘制到新的“层”

> ID：12702672
> 
> 赞同：3
> 
> 时间：2012-10-03T06:02:11.957
> 
> 标签：c#, image, bitmap, layer

构建一个小绘图程序，并尝试合并图层的概念。

我正在使用 PictureBox 控件来显示图像，并从 PictureBox 显示的图像中获取 Graphics 对象并绘制到该对象。

我的问题是我试图弄清楚如何绘制到覆盖在图片框顶部的新 Graphics 对象，并且能够在*不*将原始图像吸收到图形中的情况下获得新绘制的图像。

如果我这样做：

```
Graphics gr = Graphics.FromImage(myPictureBox.image);
gr.DrawRectangle(blah blah) 
```

...我正在编辑图片框中的原始图像。我想要一种方法来仅捕获正在绘制的新内容作为单独的图像，但仍将其显示为覆盖在已经存在的内容之上。

谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:07:47.750

我估计会使用透明控件并进行一些修改，以便它可以用作图像层：

[http://www.codeproject.com/Articles/26878/Making-Transparent-Controls-No-Flickering](http://www.codeproject.com/Articles/26878/Making-Transparent-Controls-No-Flickering)

可能是这样的（根据需要进行任何修改）。

```
class LayerControl : UserControl
{
    private Image image;
    private Graphics graphics;

    public LayerControl(int width, int height)
    {
        this.Width = width;
        this.Height = height;

        image = new Bitmap(width, height);

        graphics = Graphics.FromImage(image);

        // Set style for control
        SetStyle(ControlStyles.OptimizedDoubleBuffer |
                ControlStyles.AllPaintingInWmPaint |
                ControlStyles.UserPaint, true);
    }

    // this function will draw your image
    protected override void OnPaint(PaintEventArgs e)
    {
        var bitMap = new Bitmap(image);
        // by default the background color for bitmap is white
        // you can modify this to follow your image background 
        // or create a new Property so it can dynamically assigned
        bitMap.MakeTransparent(Color.White);

        image = bitMap;

        Graphics g = e.Graphics;
        g.SmoothingMode = SmoothingMode.AntiAlias;
        g.PixelOffsetMode = PixelOffsetMode.HighQuality;
        g.CompositingQuality = CompositingQuality.GammaCorrected;

        float[][] mtxItens = {
            new float[] {1,0,0,0,0},
            new float[] {0,1,0,0,0},
            new float[] {0,0,1,0,0},
            new float[] {0,0,0,1,0},
            new float[] {0,0,0,0,1}};

        ColorMatrix colorMatrix = new ColorMatrix(mtxItens);

        ImageAttributes imgAtb = new ImageAttributes();
        imgAtb.SetColorMatrix(
            colorMatrix,
            ColorMatrixFlag.Default,
            ColorAdjustType.Bitmap);

        g.DrawImage(image,
                    ClientRectangle,
                    0.0f,
                    0.0f,
                    image.Width,
                    image.Height,
                    GraphicsUnit.Pixel,
                    imgAtb);
    }

    // this function will grab the background image to the control it self
    protected override void OnPaintBackground(PaintEventArgs e)
    {
        base.OnPaintBackground(e);
        Graphics g = e.Graphics;

        if (Parent != null)
        {
            BackColor = Color.Transparent;
            int index = Parent.Controls.GetChildIndex(this);

            for (int i = Parent.Controls.Count - 1; i > index; i--)
            {
                Control c = Parent.Controls[i];
                if (c.Bounds.IntersectsWith(Bounds) && c.Visible)
                {
                    Bitmap bmp = new Bitmap(c.Width, c.Height, g);
                    c.DrawToBitmap(bmp, c.ClientRectangle);

                    g.TranslateTransform(c.Left - Left, c.Top - Top);
                    g.DrawImageUnscaled(bmp, Point.Empty);
                    g.TranslateTransform(Left - c.Left, Top - c.Top);
                    bmp.Dispose();
                }
            }
        }
        else
        {
            g.Clear(Parent.BackColor);
            g.FillRectangle(new SolidBrush(Color.FromArgb(255, Color.Transparent)), this.ClientRectangle);
        }
    }

    // simple drawing circle function
    public void DrawCircles()
    {
        using (Brush b = new SolidBrush(Color.Red))
        {
            using (Pen p = new Pen(Color.Green, 3))
            {
                this.graphics.DrawEllipse(p, 25, 25, 20, 20);
            }
        }
    }

    // simple drawing rectable function
    public void DrawRectangle()
    {
        using (Brush b = new SolidBrush(Color.Red))
        {
            using (Pen p = new Pen(Color.Red, 3))
            {
                this.graphics.DrawRectangle(p, 50, 50, 40, 40);
            }
        }
    }

    // Layer control image property
    public Image Image
    {
        get
        {
            return image;
        }
        set
        {
            image = value;
            // this will make the control to be redrawn
            this.Invalidate();
        }
    }
} 
```

示例如何使用它：

```
LayerControl lc = new LayerControl(100, 100);
lc.Location = new Point(0, 0);
lc.DrawRectangle();

LayerControl lc2 = new LayerControl(100, 100);
lc2.Location = new Point(0, 0);
lc2.DrawCircles();

LayerControl lc3 = new LayerControl(100, 100);
lc3.Location = new Point(0, 0);
lc3.Image = new Bitmap(@"<Image Path>");

// adding control
this.Controls.Add(dc);
this.Controls.Add(dc2);
this.Controls.Add(dc3); 
```

使用这种方法，您可以拥有多个可以相互重叠的图层（由于它具有透明度功能）。

如果要将其添加到 PictureBox 顶部，请确保重新排序控件。图层控件应添加在您的 PictureBox 控件之前。

```
// adding control
this.Controls.Clear();
this.Controls.Add(dc);
this.Controls.Add(dc2);
this.Controls.Add(dc3);
this.Controls.Add(PictureBox1); 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-24T08:43:31.703

工作正常的示例代码 - 获取虚拟图像并将原始图像与自定义文本分层

```
public void LayerImage(System.Drawing.Image Current, int LayerOpacity)
{
    Bitmap bitmap = new Bitmap(Current);        
    int h = bitmap.Height;
    int w = bitmap.Width;
    Bitmap backg = new Bitmap(w, h + 20);
    Graphics g = null;
    try
    {
        g = Graphics.FromImage(backg);
        g.Clear(Color.White);
        Font font = new Font("Arial", 12, FontStyle.Bold, GraphicsUnit.Pixel);
        RectangleF rectf = new RectangleF(70, 90, 90, 50);
        Color color = Color.FromArgb(255, 128, 128, 128);
        Point atpoint = new Point(backg.Width / 2, backg.Height - 10);
        SolidBrush brush = new SolidBrush(color);
        StringFormat sf = new StringFormat();
        sf.Alignment = StringAlignment.Center;
        sf.LineAlignment = StringAlignment.Center;
        g.DrawString("BRAND AMBASSADOR", font, brush, atpoint, sf);
        g.Dispose();
        MemoryStream m = new MemoryStream();
        backg.Save(m, System.Drawing.Imaging.ImageFormat.Jpeg);
    }
    catch { }

    Color pixel = new Color();

    for (int x = 0; x < bitmap.Width; x++)
    {
        for (int y = 0; y < bitmap.Height; y++)
        {
            pixel = bitmap.GetPixel(x, y);
            backg.SetPixel(x, y, Color.FromArgb(LayerOpacity, pixel));
        }
    }
    MemoryStream m1 = new MemoryStream();
    backg.Save(m1, System.Drawing.Imaging.ImageFormat.Jpeg);
    m1.WriteTo(Response.OutputStream);
    m1.Dispose();
    base.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:25:06.597

得到它的工作，也许我在最初的问题中不够清楚。

基本上我最终所做的是将每个图层存储为一个单独的 Image 对象，然后只需连接到我的控件的 OnPaint 方法并手动按顺序绘制图形，而不是仅仅绘制到 PictureBox.Image。奇迹般有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:24:42.530

.NET 绘图库的图形功能很简单。它们的主要目的是直接绘制 GUI。如果您想要分层、alpha 透明度或高级过滤器，那么您应该使用 3rd 方库或滚动您自己的绘图代码。

# instruments - 检查 iOS 应用程序的活动网络连接数

> ID：12702682
> 
> 赞同：1
> 
> 时间：2012-10-03T06:03:35.090
> 
> 标签：instruments

如果我们在下拉菜单中使用“连接摘要”，“网络连接”工具会显示应用程序正在建立的网络连接。

a）它显示的连接是否是应用程序迄今为止建立的总连接数。或 b) 它是否显示当前活动的当前连接总数。

如果是案例#b，我认为我们的应用程序正在建立连接数并且没有清理它。如果是 #a 或 #b ，谁能回答？

# javascript - javascript中的日期格式问题

> ID：12702684
> 
> 赞同：0
> 
> 时间：2012-10-03T06:03:52.847
> 
> 标签：javascript, date-format

我正在尝试从 javascript 格式化日期，如下所示。

```
var startDate = new Date('Fri Oct 12 2012 10:15:00 GMT+0530 (India Standard Time)');       

   var dateString = startDate.format("ddd MMM dd yyyy"));

    var timeString = startDate.format("h:mm tt")); 
```

从我的机器上运行它时，我得到了预期的日期和时间字符串。喜欢 **`dateString as Fri Oct 12 2012`**和**`timeString as 10:15 AM`**。

但是在实时服务器中，我得到了**`dateString as Fri 1515 12 2012`**和**`timeString as 10:1010 AM`**. 我认为问题在于月份和分钟的格式。

本地服务器在印度，实时服务器在美国。所以我不确定，它是否与不同文化中的日期格式有关？

从javascript格式化日期字符串的最佳方法是什么。我是否在做正确的事情来格式化日期字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:03:35.000

通过使用`startDate.getDate() & startDate.getDay() & startDate.getFullYear()`
查看此[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)它可以帮助您。通过使用此日期对象属性，您可以获得适当的结果

# asp.net - 如何禁用 .aspx 页面的 ViewState？

> ID：12702686
> 
> 赞同：16
> 
> 时间：2012-10-03T06:04:08.110
> 
> 标签：asp.net, viewstate

我需要在我的 Web 应用程序中完全禁用 .aspx 页面的 ViewState。我浏览了不同的博客，我的理解是我们必须设置`<%@ Page EnableViewState="false" ...%>`，但这不起作用。

这足以禁用页面内所有控件的 ViewState 吗？或者我应该做任何额外的修改？如果是这样，请指定它们。我不希望为 .aspx 页面中的单个控件启用 ViewState

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-09-23T11:09:31.743

**禁用视图状态**

1.  **机器级别**- 在[machine.config](https://stackoverflow.com/questions/2325473/where-is-machine-config)中禁用机器级别的视图状态，将禁用 Web 服务器上所有应用程序的 ViewState。

> ```
> <Machine.config>
>    <system.web>
>       <pages enableViewState="false" />
>    </system.web>
> </Machine.config> 
> ```

2.  **应用程序级别**- 您可以禁用文件中所有页面的 ViewState `/web.config`。

> ```
> <configuration>
>    <system.web>
>       <pages enableViewState="false" />
>    </system.web>
> </configuration> 
> ```

3.  **页面级别**- 禁用顶部特定 aspx 文件的视图状态。

> `<%@ Page Language="C#" .. EnableViewState="false" .. %>`

4.  **控制级别**- 您可以禁用特定控件的 ViewState。

> `<asp:TextBox EnableViewState="false" ID="Name" runat="server"></asp:TextBox>`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-03T06:09:59.807

我认为引号应该是：

```
EnableViewState="false" 
```

除此之外，如果您仍然看到隐藏字段，那么它们将被 ASP.Net 使用。你可能会看到：

[Page.EnableViewState 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableviewstate.aspx)

> 即使 EnableViewState 为 false，页面也可能包含一个隐藏的视图状态字段，ASP.NET 使用该字段来检测回发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T07:17:58.007

如果您真的不需要回发，您可以从页面中删除表单元素，这将完全删除视图状态。

# android - Android如何以编程方式校准触摸屏

> ID：12702687
> 
> 赞同：0
> 
> 时间：2012-10-03T06:04:25.317
> 
> 标签：android

有没有办法以编程方式校准触摸屏？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:52:19.337

在我的设备上有一个特殊的校准活动。您可以使用以下代码调用它：

```
Intent i = new Intent();
i.setClassName("org.zeroxlab.util.tscal", "org.zeroxlab.util.tscal.TSCalibration");
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
mActivity.startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:56:58.490

我对此进行了研究，然后我了解到没有用于屏幕校准的API。如果我将来发现任何 API，我一定会更新它。

# java - JOptionPane 在 Java 中显示 HTML 问题

> ID：12702689
> 
> 赞同：1
> 
> 时间：2012-10-03T06:04:40.480
> 
> 标签：java, html, swing, calendar, joptionpane

好的，所以我有这段代码，它会提示用户一个月和一年，并打印该月的日历。不过我遇到了一些问题。

1.  HTML 字体编辑只影响月份。
2.  星期几在列中未正确对齐。

谢谢！

```
package calendar_program;

import javax.swing.JOptionPane;

public class Calendar {

public static void main(String[] args) {
    StringBuilder result=new StringBuilder();

    // read input from user
    int year=getYear();
    int month=getMonth();

    String[] allMonths={
            "", "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
    };

    int[] numOfDays= {0,31,28,31,30,31,30,31,31,30,31,30,31};

    if (month == 2 && isLeapYear(year)) numOfDays[month]=29;

    result.append("    "+allMonths[month]+ "  "+ year+"\n"+" S  M  Tu  W Th  F  S"+"\n");

    int d= getstartday(month, 1, year);

    for (int i=0; i<d; i++){
        result.append("    ");
                // prints spaces until the start day
    }
    for (int i=1; i<=numOfDays[month];i++){
        String daysSpace=String.format("%4d", i);
        result.append(daysSpace);
        if (((i+d) % 7==0) || (i==numOfDays[month])) result.append("\n");
    }
    //format the final result string
    String finalresult= "<html><font face='Arial'>"+result; 
    JOptionPane.showMessageDialog(null, finalresult);
}

//prompts the user for a year
public static int getYear(){
    int year=0;
    int option=0;
    while(option==JOptionPane.YES_OPTION){
        //Read the next data String data
        String aString = JOptionPane.showInputDialog("Enter the year (YYYY) :");
        year=Integer.parseInt(aString);
        option=JOptionPane.NO_OPTION;
    }
    return year;
}

//prompts the user for a month
public static int getMonth(){
    int month=0;
    int option=0;
    while(option==JOptionPane.YES_OPTION){
        //Read the next data String data
        String aString = JOptionPane.showInputDialog("Enter the month (MM) :");
        month=Integer.parseInt(aString);
        option=JOptionPane.NO_OPTION;
    }
    return month;
}

//This is an equation I found that gives you the start day of each month
public static int getstartday(int m, int d, int y){
    int year = y - (14 - m) / 12;
    int x = year + year/4 - year/100 + year/400;
    int month = m + 12 * ( (14 - m) / 12 ) - 2;
    int num = ( d + x + (31*month)/12) % 7;
    return num;
}

//sees if the year entered is a leap year, false if not, true if yes
public static boolean isLeapYear (int year){
    if ((year % 4 == 0) && (year % 100 != 0)) return true;
    if (year % 400 == 0) return true;
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T06:19:48.407

这是一个相当愚蠢的想法。

而不是使用空格来格式化您的结果，这可能会受到可变宽度字体的各个字体宽度变化的影响......请改用 HTML 表格，或 a `JTable`，或`JXMonthView`来自 SwingX 项目

**HTML 表格**

![在此处输入图像描述](../Images/83916cb41505c713d33071db6fab260b.png)

```
String dayNames[] = {"S", "M", "Tu", "W", "Th", "F", "S"};
result.append("<html><font face='Arial'>");
result.append("<table>");
result.append("<tr>");
for (String dayName : dayNames) {
    result.append("<td align='right'>").append(dayName).append("</td>");
}
result.append("</tr>");
result.append("<tr>");
for (int i = 0; i < d; i++) {
    result.append("<td></td>");
}
for (int i = 0; i < numOfDays[month]; i++) {
    if (((i + d) % 7 == 0)) {
        result.append("</tr><tr>");
    }
    result.append("<td align='right'>").append(i + 1).append("</td>");
}
result.append("</tr>");
result.append("</table>");

result.append("</html>"); 
```

**JTable 示例**

![在此处输入图像描述](../Images/049c4bbff72b8227e30a386513196caf.png)

```
MyModel model = new MyModel();

List<String> lstRow = new ArrayList<String>(7);
for (int i = 0; i < d; i++) {
    lstRow.add("");
}
for (int i = 0; i < numOfDays[month]; i++) {
    if (((i + d) % 7 == 0)) {
        model.addRow(lstRow);
        lstRow = new ArrayList<String>(7);
    }
    lstRow.add(Integer.toString(i + 1));
}

if (lstRow.size() > 0) {
    while (lstRow.size() < 7) {
        lstRow.add("");
    }
    model.addRow(lstRow);
}

JTable table = new JTable(model);
// Kleopatra is so going to kill me for this :(
Dimension size = table.getPreferredScrollableViewportSize();
size.height = table.getRowCount() * table.getRowHeight();
table.setPreferredScrollableViewportSize(size);

JOptionPane.showMessageDialog(null, new JScrollPane(table));

public static class MyModel extends AbstractTableModel {

    public static final String[] DAY_NAMES = {"S", "M", "Tu", "W", "Th", "F", "S"};
    private List<List<String>> lstRowValues;

    public MyModel() {
        lstRowValues = new ArrayList<List<String>>(25);
    }

    @Override
    public int getRowCount() {
        return lstRowValues.size();
    }

    @Override
    public String getColumnName(int column) {
        return DAY_NAMES[column];
    }

    @Override
    public int getColumnCount() {
        return 7;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        List<String> rowData = lstRowValues.get(rowIndex);
        return rowData.get(columnIndex);
    }

    public void addRow(List<String> lstValues) {
        lstRowValues.add(lstValues);

        fireTableRowsInserted(getRowCount(), getRowCount());
    }
} 
```

或者你可以去看看[JXMonthView](http://www.javalobby.org/java/forums/t45447.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T06:24:13.030

我注意到了几个问题。一方面，您可以使用 java.util.Calendar 类，而不是获取您自己的月份或闰年信息，它会为您做到这一点。

此外，\n 换行符在穿插 HTML 格式时表现不佳，因此请尝试改用 <br/>。这导致字体选择无法正常工作。

看起来额外的空格也被剥离了，所以用 < pre> 标签包围所有东西可以解决这个问题。

# android - 如何使用 android 应用程序在 facebook 墙上上传字节数组（图像）？

> ID：12702692
> 
> 赞同：0
> 
> 时间：2012-10-03T06:04:44.853
> 
> 标签：android, facebook, bytearray

我正在尝试从我的 android 项目的可绘制文件夹中将一张图片上传到 Facebook 墙上。但我失败了......消息显示在墙上，但图像不在墙上......我的示例代码如下......

```
 Drawable drawable =  ClassName.this.getResources().getDrawable(R.drawable.ic_launcher);
        Bitmap bitmap = (Bitmap)((BitmapDrawable) drawable).getBitmap();
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
        byte[] bitMapData = stream.toByteArray();

        Bundle params = new Bundle();

        params.putString("message", "Tarun Kumar");
        params.putString("name", "MY Image");
        params.putByteArray("picture", bitMapData);
        mAsyncFbRunner.request("me/feed", params, "POST", new WallPostListener()); 
```

它在日志上显示一些错误..比如

```
10-03 12:55:55.664: W/Bundle(529): Key message expected byte[] but value was a   java.lang.String.  The default value <null> was returned.
10-03 12:55:55.914: D/dalvikvm(529): GC_FOR_MALLOC freed 6599 objects / 465168 bytes in   225ms
10-03 12:55:55.924: W/Bundle(529): Attempt to cast generated internal exception:
10-03 12:55:55.924: W/Bundle(529): java.lang.ClassCastException: java.lang.String
10-03 12:55:55.924: W/Bundle(529):  at android.os.Bundle.getByteArray(Bundle.java:1305)
10-03 12:55:55.924: W/Bundle(529):  at com.facebook.android.Util.openUrl(Util.java:155)
10-03 12:55:55.924: W/Bundle(529):  at   com.facebook.android.Facebook.request(Facebook.java:559)
10-03 12:55:55.924: W/Bundle(529):  at  com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:208)
10-03 12:55:55.924: W/Bundle(529): Key format expected byte[] but value was a  java.lang.String.  The default value <null> was returned.
10-03 12:55:55.924: W/Bundle(529): Attempt to cast generated internal exception:
10-03 12:55:55.924: W/Bundle(529): java.lang.ClassCastException: java.lang.String
10-03 12:55:55.924: W/Bundle(529):  at android.os.Bundle.getByteArray(Bundle.java:1305)
10-03 12:55:55.924: W/Bundle(529):  at com.facebook.android.Util.openUrl(Util.java:155)
10-03 12:55:55.924: W/Bundle(529):  at com.facebook.android.Facebook.request(Facebook.java:559)
10-03 12:55:55.924: W/Bundle(529):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:208)
10-03 12:55:55.984: W/Bundle(529): Key access_token expected byte[] but value was a  java.lang.String.  The default value <null> was returned.
10-03 12:55:55.984: W/Bundle(529): Attempt to cast generated internal exception:  
10-03 12:55:55.984: W/Bundle(529): java.lang.ClassCastException: java.lang.String
10-03 12:55:55.984: W/Bundle(529):  at android.os.Bundle.getByteArray(Bundle.java:1305)
10-03 12:55:55.984: W/Bundle(529):  at com.facebook.android.Util.openUrl(Util.java:155)
10-03 12:55:55.984: W/Bundle(529):  at com.facebook.android.Facebook.request(Facebook.java:559)
10-03 12:55:55.984: W/Bundle(529):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:208)
10-03 12:55:55.984: D/webviewglue(529): nativeDestroy view: 0x27a548
10-03 12:55:56.014: W/Bundle(529): Key name expected byte[] but value was a java.lang.String.  The default value <null> was returned.
10-03 12:55:56.014: W/Bundle(529): Attempt to cast generated internal exception:
10-03 12:55:56.014: W/Bundle(529): java.lang.ClassCastException: java.lang.String
10-03 12:55:56.014: W/Bundle(529):  at android.os.Bundle.getByteArray(Bundle.java:1305)
10-03 12:55:56.014: W/Bundle(529):  at com.facebook.android.Util.openUrl(Util.java:155)
10-03 12:55:56.014: W/Bundle(529):  at com.facebook.android.Facebook.request(Facebook.java:559)
10-03 12:55:56.014: W/Bundle(529):  at  com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:208) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:48:29.423

如果将图像从应用程序发布到 fb，您不能使用**me/feed**参数，您必须使用**照片**并且请求将是

```
mAsyncFbRunner.request("photos", parameters, 
                                    "POST", new WallPostListener()); 
```

# asp.net - 为 ASP.NET 项目执行代码移动的最佳实践和工具

> ID：12702697
> 
> 赞同：3
> 
> 时间：2012-10-03T06:05:44.263
> 
> 标签：asp.net, svn, version-control

我有一个带有我自己的开发、登台和生产服务器的 ASP.NET 项目。

在所有环境中，我都手动移动代码。因此，每次我必须推动变更时，我都会执行以下步骤：

1.  从 SVN 获取我的最新代码。
2.  使用 Beyond Compare 等工具在较低和要提升的环境之间合并代码。
3.  然后我将各自的 ASPX 和 DLL 文件以及任何存储过程或表数据手动移动到生产环境。

这是一个非常耗时的过程，我想获得一些用于代码移动的自动化方法。

有没有一种方法可以使用一些自动化工具或在自动化包中将代码从 SVN 移动到我的服务器。

我将 ASP.NET 2.0 与 IIS 7 和 SQL Server 2008 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:14:38.557

1.  msbuild 可以帮助您从 svn 获取代码并构建它。您将需要创建简单的批处理文件来运行它，或者您可以使用 Cruisecontrol。

2.  应避免手动合并。如果您使用的是 VS2010，您可以使用 xsd 将您的配置文件转换为生产版本

3.  我不是存储过程的忠实粉丝。如果你可以用代码封装你存储的过程，那么错误和回滚更改等的空间就会更小，并且使部署更容易。数据库模式更新应在批处理文件中完成并自动应用。

4.  有多种部署方式：webdeploy 或 msi 文件。这取决于部署过程中需要多少工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:02:26.433

我会研究[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)。[我最喜欢的是TeamCity](http://www.jetbrains.com/teamcity/)，因为它使用起来最简单。

您仍然需要使用 MSBuild 做一些工作。

您可以将构建设置为从站点按下按钮。签入 svn 时推送代码。几乎任何你能想到的方式。

我强烈敦促您使用它来始终构建您的代码并在每个 SVN 检查它上运行单元测试。它不必部署，但 TeamCity 会向您提供有关解决方案状态的持续反馈。

# javascript - “this”不是指使用原型的this-reference

> ID：12702698
> 
> 赞同：1
> 
> 时间：2012-10-03T06:05:44.087
> 
> 标签：javascript, dom-events, prototype

`prototype`今天我在使用 Javascript和`this`参考时遇到了一个非常奇怪的问题。

基本上，我有两个对象。一个对象使用了一个`div`元素，并且可以`onclick`在`div`. 另一个对象利用此功能并`onclick`使用第一个对象注册事件。

这是代码：

我的第一个对象，它负责`div`：

```
DivObject = function() {};
DivObject.prototype.setClickListener = function(clickListener){
    document.getElementById("myDiv").onclick = function(e){
        clickListener(e);
    };
}; 
```

我的第二个对象使用此功能：

```
MainObject = function(){
    this.myString = "Teststring";
    this.divObj = new DivObject();
    this.divObj.setClickListener(this.handleClick);
};

MainObject.prototype.handleClick = function(e){
    // do something with e
}; 
```

问题是，在内部`MainObject.prototype.handleClick`，`this`引用指的是`window`对象，而不是`MainObject`. 所以，`console.log(this)`在这个函数里面 logs `[Object window]`。

[您可以在 jsfiddle 上看到这种行为。](http://jsfiddle.net/gT4Eu/3/)

作为一种解决方法，我使用`setClickListener`如下函数：

```
var thisRef = this;
this.divObj.setClickListener(function(e){
    thisRef.handleClick(e);
}); 
```

现在，`this`我的`handleClick`函数中的引用指的是我的`MainObject`（如我所愿）。

[请参阅 jsfiddle 上的此解决方法。](http://jsfiddle.net/gT4Eu/1/)

我的问题是：

为什么`this`引用一次引用`window`对象，一次`this`引用我的对象？它是否在某处被覆盖？我一直认为`this`在我的对象中使用我可以确定它真的是`this`我的对象的引用？我现在使用的解决方法是应该如何解决这个问题，还是有其他更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:12:38.613

您可以使用***[.bind()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)***解决此问题：

```
this.divObj.setClickListener(this.handleClick.bind(this)); 
```

***[请参阅演示。](http://jsfiddle.net/gT4Eu/4/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:41:38.457

你的问题：

> 为什么 this 引用一次引用窗口对象，一次引用我的对象的 this 引用？

除了使用*bind*之外，函数的值`this`由函数的调用方式设置。当你这样做时：

```
this.divObj.setClickListener(this.handleClick); 
```

您正在分配一个函数引用，因此该函数稍后会在没有任何限制的情况下被调用（即它被称为*handleClick*而不是*this.handleClick*）。在进入函数时，因为它`this`不是由调用设置的，所以它将默认为全局（窗口）对象，或者在严格模式下保持未定义。

> 它是否在某处被覆盖？

不， 的值`this`是在进入执行上下文时设置的。您不能覆盖它或直接分配给它，您只能在调用中设置它（例如，作为对象的方法，使用*new*，*apply*，*call*）或使用*bind*（此外，箭头函数采用其封闭的*this*词法执行上下文）。

> 我一直认为在我的对象中使用 this 可以确定它真的是我的对象的 this 引用？

在您进行分配时，`this`这就是您所期望的。但是您正在分配对funciotn的引用，而不是调用该函数，因此`this`当时没有设置它，而是稍后调用它。

> 我现在使用的解决方法是应该如何解决这个问题，还是有其他更好的方法来处理这种情况？

您的解决方法很好（并且是一个常见的修复方法），它会创建一个闭包，因此可能会产生轻微的内存后果，但没有什么严重的。对于非常旧的 IE 版本，由于涉及 DOM 对象的循环引用，它会造成内存泄漏，但这是固定的。

从清晰度和维护的角度来看，*绑定*解决方案可能更好。请记住为没有内置支持的浏览器添加一个“猴子补丁” *bind*。

请在 SO 上发布代码，不能保证其他地方发布的代码将继续可访问。解决代码：

```
MainObject = function(){
    this.myString = "Teststring";
    this.divObj = new DivObject();
    var thisRef = this;
    this.divObj.setClickListener(function(e){
        thisRef.handleClick(e);
    });
}; 
```

# c - Initializing a Struct of a Struct

> ID：12702703
> 
> 赞同：4
> 
> 时间：2012-10-03T06:05:55.627
> 
> 标签：c

If I have a struct in C that has an integer and an array, how do I initialize the integer to 0 and the first element of the array to 0, if the struct is a member another struct so that for every instance of the other struct the integer and the array has those initialized values?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T06:45:34.900

可以为嵌套结构嵌套初始化器，例如

```
typedef struct {
    int j;
} Foo;

typedef struct {
    int i;
    Foo f;
} Bar;

Bar b = { 0, { 0 } }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T07:10:51.650

我希望这个示例程序有帮助....

```
#include <stdio.h>

typedef struct
{
        int a;
        int b[10];
}xx;

typedef struct
{
        xx x1;
        char b;
}yy;

int main()
{

yy zz = {{0, {1,2,3}}, 'A'};

printf("\n %d  %d  %d %c\n", zz.x1.a, zz.x1.b[0], zz.x1.b[1], zz.b);

return 0;
} 
```

`yy zz = {{0, {0}}, 'A'};`将初始化数组 b[10] 的所有元素，并将其设置为 0。

像@unwind 建议一样，在 C 中创建的所有实例都应该手动初始化。这里没有构造函数类型的机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:59:24.877

C没有构造函数，所以除非你在每种情况下都使用初始化表达式，即编写类似的东西

```
my_big_struct = { { 0, 0 } }; 
```

要初始化内部结构，您将必须添加一个函数并确保在结构“实例化”的所有情况下都调用它：

```
my_big_struct a;

init_inner_struct(&a.inner_struct); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T08:26:14.360

这是一个替代示例，您将如何使用面向对象的设计来做这样的事情。请注意，此示例使用运行时初始化。

mystruct.h

```
#ifndef MYSTRUCT_H
#define MYSTRUCT_H

typedef struct mystruct_t mystruct_t;  // "opaque" type

const mystruct_t* mystruct_construct (void);

void mystruct_print (const mystruct_t* my);

void mystruct_destruct (const mystruct_t* my);

#endif 
```

结构体.c

```
#include "mystruct.h"
#include <stdlib.h>
#include <stdio.h>

struct mystruct_t   // implementation of opaque type
{
  int x; // private variable
  int y; // private variable
};

const mystruct_t* mystruct_construct (void)
{
  mystruct_t* my = malloc(sizeof(mystruct_t));

  if(my == NULL)
  {
    ; // error handling needs to be implemented
  }

  my->x = 1;
  my->y = 2;

  return my;
}

void mystruct_print (const mystruct_t* my)
{
  printf("%d %d\n", my->x, my->y);
}

void mystruct_destruct (const mystruct_t* my)
{
  free( (void*)my );
} 
```

主程序

```
 int main (void)
   {
      const mystruct_t* x = mystruct_construct();

      mystruct_print(x);

      mystruct_destruct(x);

      return 0;
   } 
```

您不一定需要使用 malloc，您也可以使用私有的、静态分配的内存池。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T06:12:11.537

您可以使用 {0} 对整个结构进行 0 初始化。

例如：

```
typedef struct {
  char myStr[5];
} Foo;

typedef struct {
    Foo f;
} Bar;

Bar b = {0}; // this line initializes all members of b to 0, including all characters in myStr. 
```

# function - awk function to keep last occurrence of records containing two same fields

> ID：12702709
> 
> 赞同：-1
> 
> 时间：2012-10-03T06:06:27.740
> 
> 标签：function, awk

I am trying to make an inventory of different kinds of vehicles. At this step my data look like

```
land; road; car (blue); 1956
land; road; car (blue); 1956 ; car (yellow); 1995
land; road; car (blue); 1956 ; car (yellow); 1995; car (red); 1979
air; -; plane (black); 1984
air; -; plane (black); 1984; helicopter (red); 1998 
```

I first need to keep the last occurrence of lines with the same first and second fields,

```
land; road; car (blue); 1956 ; car (yellow); 1995; car (red); 1979
air; -; plane (black); 1984; helicopter (red); 1998 
```

and then sort the third, fifth fields if they exist with their associated adjacent fields (fourth, sixth, or eighth respectively) by descending order In order to get:

```
land; road; car (yellow); 1995; car (red); 1979; car (blue); 1956
air; -; helicopter (red); 1998; plane (black); 1984 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:57:46.567

单程。您将需要`GNU awk`，因为我使用该`delete`指令来清空数组。如果出现错误，将需要使用`for`循环来单独删除每个键。

假设`infile`有数据：

```
land; road; car (blue); 1956
land; road; car (blue); 1956 ; car (yellow); 1995
land; road; car (blue); 1956 ; car (yellow); 1995; car (red); 1979
air; -; plane (black); 1984
air; -; plane (black); 1984; helicopter (red); 1998 
```

和中的`awk`程序`script.awk`：

```
BEGIN {
        ## Split line in ";" with spaces between it.
        FS = "[[:space:]]*;[[:space:]]*";

        ## In output separate fields with a ";" followed by a space.
        OFS = "; ";
}

## First line is special, save the line with its first two fields as a key of
## a hash to check repeated ones.
FNR == 1 {
        keys[ $1 OFS $2 ] = $0;
        next;
}

## For every line...
{
        ## Extract the key (first two fields).
        key = $1 OFS $2;

        ## I want to get last line of each key. If it exists in the hash may be the last one, but
        ## can't be sure until I read the next one, so save its content, read next line and wait...
        if ( key in keys ) {
                keys[ key ] = $0;
                next;
        }

    ## Order and print vehicles by date :-)
        order_and_print_vehicles_by_date(keys);

        ## Empty the hash.
        delete keys;

        ## Save new kind of vehicles.
        keys[ key ] = $0;
}

END {
        order_and_print_vehicles_by_date(keys);
}

function order_and_print_vehicles_by_date(keys,                 ordered_line, dates, vehicles) {

        ## "keys" has only one key, get it.
        for ( k in keys ) {
                line = keys[ k ];
        }

        ## Remove the key (first two fields) of the line.
        sub( /^([^;]*;){2}[[:space:]]*/, "", line );

        ## Get vehicles and dates from the line.
        split( line, data, /;[[:space:]]*/ );

        ## Even positions of the array are vehicles, odd positions are for dates. Extract them.
        for ( i = length( data ); i >= 1; i-- ) {
                if ( i % 2 == 0 ) {
                        dates[ ++d ] = data[ i ];
                }
                else {
                        vehicles[ dates[d] ] = data[ i ];
                }
        }

        ## Sort dates in descendant order.
        asort( dates, ordered_dates, "@val_num_desc" );

        ## Get the line to print.
        printf "%s%s", k, OFS;
        for ( i = 1; i <= length( ordered_dates ); i++ ) {
                ordered_line = ordered_line sprintf( "%s%s%s%s", vehicles[ ordered_dates[i] ], OFS, ordered_dates[i], OFS );
        }

        ## Remove last ";" from the line and print.
        sub( /[[:space:]]*;[[:space:]]*$/, "", ordered_line );
        printf "%s\n", ordered_line;
} 
```

像这样运行它：

```
awk -f script.awk infile 
```

这会产生：

```
land; road; car (yellow); 1995; car (red); 1979; car (blue); 1956
air; -; helicopter (red); 1998; plane (black); 1984 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:27:00.040

我猜这就是你要找的东西：

```
awk -F";" '{a[$1$2]=$0}END{for(i in a)print a[i]}' your_file | sort -k 2.2r -t"(" 
```

测试如下：

```
> cat temp
land; road; car (blue); 1956
land; road; car (blue); 1956 ; car (yellow); 1995
land; road; car (blue); 1956 ; car (yellow); 1995; car (red); 1979
air; -; plane (black); 1984
air; -; plane (black); 1984; helicopter (red); 1998
air2; -; plane (black); 1984
air2; -; plane (black); 1984; helicopter (green); 1998
land2; road; car (blue); 1956 ; car (yellow); 1995
land2; road; car (blue); 1956 ; car (zcar); 1995; car (red); 1979
> nawk -F";" '{a[$1$2]=$0}END{for(i in a)print a[i]}' temp | sort -k 2.2r -t"("
land2; road; car (blue); 1956 ; car (zcar); 1995; car (red); 1979
land; road; car (blue); 1956 ; car (yellow); 1995; car (red); 1979
air; -; plane (black); 1984; helicopter (red); 1998
air2; -; plane (black); 1984; helicopter (green); 1998 
```

# c# - 匹配所有后跟星号的字符串

> ID：12702710
> 
> 赞同：1
> 
> 时间：2012-10-03T06:06:33.740
> 
> 标签：c#, .net, regex

基本上我正在为我们的编译器课程创建一个简单的解释器。当然，这不是一个家庭作业类型的问题。

后面有星号的任何内容都被视为注释，前提是它不是字符串的一部分。我的解释器中有一个转义字符，它是括号。

这些是我的解释器的示例语法

```
* hello world
OUTPUT: "This is asterisk [*]" * outputs string
OUTPUT: "This is asterisk *"  * outputs string produces syntax error
x = "[*]" & "hello" & "[*]*]" this is already comment which produces syntax error 
```

当我尝试运行它时`Regex`

```
[^\[]\*.* 
```

它与以下内容相匹配：

```
* hello world
 * outputs string
 *"  * outputs string produces syntax error
]*]" this is already comment which produces syntax error 
```

我的问题是，为什么`regex`“*吃*”之前有一个字符？我已经需要的地方

```
* hello world
* outputs string
*"  * outputs string produces syntax error
*]" this is already comment which produces syntax error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:17:59.600

您需要使用零宽度断言来停止捕获您只想匹配的条件，而不是“吃”：

`(?<=[^\[])\*.*`

`(?<=REGEX_CONDITION)`确保匹配完成，但匹配的部分（在您的情况下为 NOT A "[" ）不包含在匹配的结果中。

演示：[http ://regexr.com?32b99](http://regexr.com?32b99)

编辑：为了使其完全正常工作，我只是添加或条件它

```
(?<=[^\[])\*.*|^\*.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:29:34.290

尝试使用组并使用组值，如`[^\[](\*.*)`

# android - source code for android native Video player API Lever 16

> ID：12702711
> 
> 赞同：0
> 
> 时间：2012-10-03T06:06:40.050
> 
> 标签：android, media-player

I need native media player for android for api level 16\. What is the url for that ? Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:10:48.200

使用[http://grepcode.com/](http://grepcode.com/)。在这里，您将获得不同版本的 android 的整个源代码树。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:21:51.667

老实说，一个简单的谷歌搜索就足够了......

也就是说，下载这个[Chrome 扩展程序](https://chrome.google.com/webstore/detail/android-sdk-reference-sea/hgcbffeicehlpmgmnhnkjbjoldkfhoin)......它将为您节省大量未来搜索源代码的时间。

# java - Even if $JRE_HOME is not set java -version is displaying properly

> ID：12702713
> 
> 赞同：1
> 
> 时间：2012-10-03T06:06:51.523
> 
> 标签：java, ubuntu, path

I used `sudo apt-get open-jdk7` to install Java on my Ubuntu OS.

When I open a terminal and type `echo $JRE_HOME` it displays nothing. But then I do `java -version` it shows me correct version of OpenJDK. Also when I simply type `java` it works.

Not sure how Ubuntu set the path of java.

Similarly `javac` works but I don't see anything when I say `echo $JAVA_HOME`.

My path does not show java directory path in it.

Where is Ubuntu setting the java path? Why does Ubuntu not set `JAVA_HOME` and `JRE_HOME` during installation of OpenJDK?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T06:13:44.330

一个常见的误解是 Java 需要设置 或类似`JAVA_HOME`的`JRE_HOME`环境变量才能工作。

实际上`java`and `javac`（和相关的）可执行文件并不真正关心这些变量。它们只需要在`PATH`（或者如果不在，则可以通过完整路径执行`PATH`）并且将通过查看“靠近自身”来找到它们的相关安装（即可执行文件通常安装在相对于 JVM 文件的已知位置）。

有一些*第三方脚本*使用`JAVA_HOME`和/或`JRE_HOME`查找 Java 安装（Apache Tomcat 是一个众所周知的例子），但 Java 可执行文件本身不需要这些变量。

至于 Ubuntu 如何找到可执行文件很容易回答：使用`which java`并`which javac`找出在您键入这些命令时执行哪些可执行文件。在基于 Debian 的系统上，它们通常是一系列符号链接，通过[替代系统](http://wiki.debian.org/DebianAlternatives)指向实际的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:12:01.710

“ubuntu在哪里设置java路径？”，ubuntu不会自动设置open-jdk-java-path。尝试

```
find / -name "java" 
```

找到javac。和写

```
export JRE_HOME="xxx" 
```

（其中 xxx 是 open-jdk-jre 的基础。）

顺便说一句：你在使用 open-jdk 时遇到了麻烦。你最好使用 sun-jdk。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:13:35.010

与许多 Linux 发行版一样，Ubuntu 的路径中有 /etc/alternatives。如果您键入：

```
which java 
```

然后你会得到

```
/etc/alternatives/java 
```

如果您键入：

```
ls -l /etc/alternatives/java 
```

然后你会得到

```
/etc/alternatives/java -> /usr/lib/jvm/<your java version> 
```

一些 mor ls -l -s 可以帮助您全面了解情况。

# eclipse - 无法使用 IBM SCM Adapter 插件对 Eclipse CDT 中的包含文件执行 ClearCase 操作

> ID：12702716
> 
> 赞同：1
> 
> 时间：2012-10-03T06:07:09.443
> 
> 标签：eclipse, clearcase, eclipse-cdt

当我们在 Eclipse CDT 中使用 clearcase 源代码创建项目时，SCM 适配器插件不会显示任何控件来对包含文件（项目布局中“Includes”标记下的文件）执行 clearcase 操作。

我可以对源文件进行所有操作。我观察到任何包含文件都**没有**附加到 Eclipse*属性*页（执行 Alt+Enter，它显示“未找到属性页...”）。这可能是原因吗？

我想知道为什么包含文件首先没有像源文件这样的*属性页！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:23:16.870

SCM 适配器的工作方式是它会考虑您所在目录下的源文件`.project`（`.classpath`有关该原理的详细信息，请参阅“[用于 eclipse 的 Clearcase 插件](https://stackoverflow.com/questions/3393758/clearcase-plugin-for-eclipse-usage/3393857#3393857)”：至少`.project`必须在 ClearCase 视图中）。

如果这些包含文件不是“源文件”或存储在该项目目录之外，那么 ClearCase 适配器将忽略它们。
更准确地说，如果这些文件（“资源”）没有在 中直接引用`.project`，ClearCase SCM 适配器将忽略它们。

OP评论：

> 我们有一个带有链接资源的项目结构，其中所有文件都位于 Eclipse 项目目录之外（即`.project`文件所在目录之外）。
> 然而，该插件允许我们检出源文件，但不能包含文件。
> 
> 可能是 SCM 插件`.project`单独扫描文件以识别资源，而不是检查目录结构。

他确认这些包含文件[实际上是“发现的”](http://publib.boulder.ibm.com/infocenter/rsahelp/v7r0m0/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm)（而不是文件直接引用的资源`.project`）

![CDT 项目中发现的路径](../Images/b80ef2bd9a1f57c6f019d0b3f88d8c21.png)

ClearCase SCM 适配器可能会忽略那些类型的资源（“发现的”）。

# google-app-engine - 为什么我的 GAE 仪表板中有 favicon.ico 错误？

> ID：12702718
> 
> 赞同：2
> 
> 时间：2012-10-03T06:07:14.397
> 
> 标签：google-app-engine, yaml, favicon

我的 app.yaml 中有以下内容（使用了 python）：

```
handlers:
- url: /ico/
  static_dir: templates/ico 
```

因此，*favicon.ico*位于*templates\ico\favicon.ico*。HTML 文件（也位于*模板*文件夹，但用作主应用程序的模板）将此文件称为

```
<link rel="shortcut icon" href="ico/favicon.ico"> 
```

或者

```
<link rel="shortcut icon" href="/ico/favicon.ico"> 
```

（取决于最终网址）

并显示图标。我是否应该将其[另外](https://developers.google.com/appengine/kb/general#erroruris)定义为

```
handlers:
- url: /favicon\.ico
  static_files: templates/ico/favicon.ico
  upload: templates/ico/favicon\.ico 
```

是什么原因，如果是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:23:21.513

是的，您应该像您提到的那样另外定义它（作为根级别的处理程序）。我的理解是，通常从网站的根目录（甚至在 App Engine 之外）提供网站图标，因此`/favicon.ico`在加载网站时浏览器将调用该路径（我不是专家，所以采取这与一粒盐）。因此，为了防止该错误，您必须为服务于您的网站图标的特定路径提供处理程序。

# javascript - JavaScript is not working on Windows Mobile and Windows Phone

> ID：12702722
> 
> 赞同：2
> 
> 时间：2012-10-03T06:07:38.263
> 
> 标签：javascript, windows-phone-7, jquery-mobile, windows-mobile

I wrote one hybrid application by using jQuery mobile. It is working on Android and iPhone, but on Windows Phone the UI is coming up, but the JavaScript functions are not working.

This is my code:

```
<html >
    <head>
           <script type="text/javascript">
            function  checkUser(){

                //here is my logic to to next screen
                         }
       </script>
   </head>
   <body>
     <div data-role="page" data-theme="b" id="page1">
          <p>
     <a data-role="button" data-transition="none" data-theme="e" onclick="checkUser(); "  rel="external"> Login </a>
          </p>
     </div>
   </body>
</html> 
```

When I click the login button the `checkUser` function is not being called. What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:54:55.120

我使用 VS Express 2012 for Windows Phone 的 html 模板创建了一个新项目。

根据“nkchandra”的建议，我需要`IsScriptEnabled`在文件 MainPage.xaml 中启用 Javascript（请参阅 ）：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <phone:WebBrowser x:Name="Browser"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      Loaded="Browser_Loaded"
                      IsScriptEnabled = "True"
                      NavigationFailed="Browser_NavigationFailed" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:28:59.020

不幸的是，Windows Mobile 6 和可能的 Windows phone 浏览器不支持完整的 javascript 标准。例如，在 Windows Mobile 6.1.4（AKU 版本级别）之前，没有 onKey... javascript 支持。要查看是否存在 WinodwsMobile Internet Explorer Mobile (IEM) 不支持的内容，请启用 ShowScriptErrors：

```
// If you want Pocket IE to display script errors set this registry key:
// [HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main] "ShowScriptErrors"=dword:00000001
// MSDN Knowledge Base Q306520
// Recommended !! 
```

另请参阅[http://forum.gpsgate.com/pop_printer_friendly.asp?TOPIC_ID=1499](http://forum.gpsgate.com/pop_printer_friendly.asp?TOPIC_ID=1499)

我不知道，JQuery 在 WM 上的支持程度如何，但以下是调用 javascript 函数以进行按钮单击的工作代码片段：

```
<input type="button" style="width:90" name="pushbutton_0" value=" F2-Zrks" onfocus="javascript:doOnFocus(0);" onclick="javascript:doSubmit(0);"> 
```

~约瑟夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:08:34.793

You should have an `href` in there. For example: `<a href="#" onclick="someFunction()">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:19:12.637

你有一个很好的机会来使用不显眼的 JS——因为你使用了 jQuery，所以更是如此：

```
<html >
  <head>
    <script... jquery...></script>
       <script type="text/javascript">
          $(function() {
            $("#page1 a").on("click",function() {
              //here is my logic to to next screen
              return false; // or e.preventDefault()
            });
          });
   </script>
 </head>
 <body>
 <div data-role="page" data-theme="b" id="page1">
      <p>
 <a href="#" data-role="button" data-transition="none" data-theme="e" rel="external"> Login </a>
      </p>
 </div>
 </body>
 </html> 
```

# php - how to pass android data from ajax through php and then to mysql

> ID：12702723
> 
> 赞同：1
> 
> 时间：2012-10-03T06:07:43.180
> 
> 标签：php, android, ajax

need to pass data to android app through ajax by using php. the data is pulled from mysql database through a select query

please provide me code example how to perform the task i had search the internet and i find the below code for reference [http://www.grobmeier.de/android-does-not-fire-ajax-reqests-because-they-are-caches-ajax-requests-at-least-on-jquery-mobile-10072011.html#.UGvLbU3A-RI](http://www.grobmeier.de/android-does-not-fire-ajax-reqests-because-they-are-caches-ajax-requests-at-least-on-jquery-mobile-10072011.html#.UGvLbU3A-RI)

how to perform the select query to fetch the data array. please correct me if the example is not proper.

```
$.ajax({
       url: "yoururl.html",
       context: document.body,
       cache : false,
       data: { 
            username :  $('#username').val(), 
            password :  $('#password').val(), 
       },
       success: function ( data ) {
           // do something
      }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:54:34.537

您需要的是一个常规的 HTTP 请求（当然是由 AJAX 发出的）：您通过您选择的方法将变量发送到服务器。类似的东西：`http://www.example.com/script.php?var1=foo&var2=bar`这些变量可以在 script.php 中以这种方式访问​​：

```
<?php

echo $_GET['var1'], PHP_EOL; // shows foo
echo $_GET['var2'], PHP_EOL; // shows bar

?> 
```

如果您使用 POST 方法而不是 GET 方法，则必须使用它`$_POST[<whatever>]`来访问您的变量。

一旦你在 PHP 中获得了值，你就可以执行你需要持久化该数据的查询。

有很多这样的互联网，如果你做一个最小的搜索，你会找到你想要的。

# xcode - .XIB / .NIB 文件无法正确加载

> ID：12702725
> 
> 赞同：1
> 
> 时间：2012-10-03T06:08:18.053
> 
> 标签：xcode, exception, ios4, xcode4.3

我的应用程序收到 SIGABRT 抛出错误消息：

> “由于未捕获的异常'NSInternalInconsistencyException'而终止应用程序，原因：'无法在包中加载NIB：......”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:16:28.207

选择导致 SIGBART 错误的 NIB 文件，注意文件检查器并转到“Target Membership”部分。在那里，您将看到您的项目名称，左侧有一个复选框。选中该框（标记为选中）并构建并运行您的应用程序。它应该可以正常工作。

# javascript - Is it possible invoke telerik radgrid.databind() from javascript function?

> ID：12702730
> 
> 赞同：3
> 
> 时间：2012-10-03T06:09:00.293
> 
> 标签：javascript, ajax, data-binding, telerik-grid, rad-controls

Im working in asp .net and I have a aspx page with a telerik radgrid. Is it possible invoke radgrid.databind() from a javascript function?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:12:45.207

首先，看一下[RadControls for ASP.NET AJAX Documentation](http://www.telerik.com/help/aspnet-ajax/grid-client-side-binding.html)。我想你会在那里找到你需要的一切。

其次，您的问题描述是有限的，并且没有包含太多代码，但也许以下示例会为您指明正确的方向。

[**dataBind** - RadControls for ASP.NET AJAX 文档](http://www.telerik.com/help/aspnet-ajax/grid-gridtableview-databind.html)

> 该方法将强制客户端重新绑定网格并在使用 set_dataSource() 方法分配新数据源时刷新其状态。仅在这种情况下有意义。
> 
> ```
> function assignDataSourceAndRefresh()
> {
>     var masterTable = $find("<%= RadGrid1.ClientID %>").get_masterTableView();
>     masterTable.set_dataSource(<some_data_source_of_the_specified_type_above>);
>     masterTable.dataBind();
> } 
> ```

[**rebind** - RadControls for ASP.NET AJAX 文档](http://www.telerik.com/help/aspnet-ajax/grid-gridtableview-rebind.html)

```
function RefreshGrid() {
    var masterTable = $find("<%= RadGrid1.ClientID %>").get_masterTableView();
    masterTable.rebind();
} 
```

最后，[这里有一个替代建议：](http://www.telerik.com/community/forums/aspnet-ajax/grid/invoke-a-radgrid-rebind-from-javascript.aspx#1279186)

> 如果您想使用该`.fireCommand(action, params)`方法，请尝试以下操作：
> 
> ```
> var masterTable = $find("<%= rg.ClientID %>").get_masterTableView();
> masterTable.fireCommand("RebindGrid"); 
> ```

# php - PHP, MongoDB and power monitoring with MapReduce or Aggregation Framework

> ID：12702732
> 
> 赞同：3
> 
> 时间：2012-10-03T06:09:31.523
> 
> 标签：php, mongodb, arduino

I'm currently logging power measurements (watts) at varying intervals (between 1 and 5 seconds) to my MongoDB 2.2 (db -> monitoring -> kWh). The data within my collection is packaged as below.

```
{
   "_id":ObjectId("5060c134f05e888e03000001"),
   "reading":"power",
   "watts":"549.",
   "datetime":1348518196
} 
```

I need to ***aggregate*** the information to an ***hourly basis***, therefore sum all the watts from the start of an hour to the end and divide by the number of readings during the hour. I need to be able to push this result to a new collection within MongoDB by means of PHP. This could of course be run as a [cron](http://en.wikipedia.org/wiki/Cron) job, but is there is a mechanism to perform this as part of an insert?

The datetime field is a Unix timestamp.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:01:51.693

您可以使用 MR 轻松地做到这一点，其具有如下发射功能：

```
function(){
    emit(hour, {count: this.watts});
} 
```

变量将`hour`是处理行的时间的标准化小时（如下面的 PHP 片段所示），使用如下所示的方法：[在 javascript 中将日期转换为时间戳？](https://stackoverflow.com/questions/9873197/convert-date-to-timestamp-in-javascript)或者您可以只从`mktime()`.

做一个非常简单的 reduce 来总结它们，并对从调用 MR 的 PHP cronjob 运行的主要每小时聚合集合执行 a of `out`。`merge`

然而，这对于这类事情来说似乎有点矫枉过正，我个人会直接在 PHP 中这样做：

```
$cursor = $db->collection->find(array('datetime' => array('$gte' => time()-3600)));
$sumWatts = 0;
foreach($cursor as $_id => $row){
   $sumWatts += $row['watts'];
}
$db->otherCollection->insert(array('sum' => $sumWatts, 'hour' => mktime(date('H'), 0, 0)))); 
```

这会将所有行的小时标准化为处理它的整小时。

尽管您也可以使用聚合框架使用`$sum`运算符来完成此操作，将其读入 PHP，然后将其写出。

但是，我认为对于这种特殊类型的聚合，直接 PHP 在这段时间跨度内对于这个单一字段可能更简单、更容易，甚至可能更快。

如果您要汇总大量数据和许多字段，那么我会说在可以超时运行的 MR 中执行此操作等。

# php - Writing a compiler in PHP

> ID：12702733
> 
> 赞同：2
> 
> 时间：2012-10-03T06:09:35.183
> 
> 标签：php, compiler-construction

A few years ago I started working on a few ideas about a programming language and as I was so excited about them I just wanted to see how they would works, so I decide to write a very simple compiler for that. As I'm more comfortable and more experienced in PHP, I just took a look at to see if it's possible to write a compiler in PHP and very soon after that I found that yes, it's possible. So I start making that and fortunately everything was okay and now it's working fine.

Those days I just wanted a place to start working on my ideas, and as PHP was fast in development (no need to compile), I had MySQL on my hands also, and debugging was really easy, etc.

Now I want to extend this simple compiler, and that's where I need your advise. My main question is "Is PHP a right tool for a compiler project?". Just suppose that I'm not gonna release it publicly, so just think about the PHP abilities to handle the task, not further problems like distribution.

I believe that it has some advantages. It's fast in development, I just edit the code and press the F5 on browser and I had my binary output right after that. I also made a text box there where I could write my simple codes, press the submit and then I had my binary output again. It was also fast to keeping and working on the parsed data in MySQL. But now I'm more worried about the script timeout for example. If it's gonna compile 10,000 lines of source code, it would timeout I guess. I know I can increase the timeout, but still worried about that. Also I know that PHP as a scripting language is (as I heard) 10 times slower rather a compiled-application.

So, do you think I have to switch-off to the C? (which I'm also okay with that also) ... or do you have any ideas if I could continue with my PHP back-end, but to handle more serious things and without facing critical mistakes?

**Update:**

Yes! the project is personal and for fun. You may consider that also!

Regarding application for a PHP-based compiler, yes, it's not a real-world compiler, but imagine if you want to share your ideas with others, it would be great if you gave them a web form to write their code, press the button and download the binary code. It's not my goal, however, I just wondering about that.

Regarding Lex/Yacc, my ideas was more about optimizing the final binary code, so I needed something more than just generating a binary code via Lex/Yacc.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T06:12:52.940

PHP 不是编写编译器的理想环境。可行吗？当然。你应该这样做吗？我强烈反对用 PHP 这样的高级语言编写编译器。我也反对不必要地重新发明轮子。

如果是为了好玩，我会说去吧，但我目前还没有看到 PHP 驱动的编译器有任何实际用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T07:40:51.253

可以用任何语言编写编译器（甚至可以使用一些非图灵完备的语言）。但是为了让生活更轻松，您需要 PHP 中缺少的某些语言功能，并且由于它是一种非常低级的语言，因此不太可能将这些功能添加到该语言中。

用于实现编译器的体面语言必须包含：

*   某种形式的[代数数据类型](http://en.wikipedia.org/wiki/Algebraic_data_type)，甚至与完全动态的语言（如 Lisp）相关
*   [模式匹配](http://en.wikipedia.org/wiki/Pattern_matching)，越强大和表现力越好 - 越好。在没有模式匹配的情况下编写 AST 转换是一种痛苦。

这是最低限度的。对图形有一些不错的原生支持是一个优势。具有对解析的嵌入式支持非常有用（但解析通常并不那么重要）。在运行时访问 Prolog 或 Datalog 非常有用（但在 PHP 中实现您自己的 Prolog 应该很容易）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T07:27:22.797

Webjawns 说：但目前我没有看到 PHP 驱动的编译器有任何实际用途。所以？？？？Smarty - 是一个编译器！！！

如果您的编译器只是为了好玩或特定的 php 相关用途 - 将 php 作为环境是个好主意。

但是，如果您的编译器有性能要求或内存限制 - 使用 PHP 是非常糟糕的主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:31:21.077

有一个计算机程序员的噱头听起来像：

> *菜鸟：*为什么C被认为比Java“运行得更快”/“使用更少的内存”/“在此处插入其他优化比较”？
> *导师：*因为 Java 编译器是用 C 编写的，而 C 编译器是用 C 编写的（带有用于优化的汇编痕迹）。

几乎所有的编译器都是用 C 编写的。同样的事情也适用于几乎都是用 C 编写的操作系统。几乎所有高级语言使用的主要预打包库都是用 C 编写的。几乎所有的高负载服务器（Apache & MySQL 包括）是用 C 编写的。基本上几乎每个关键任务软件都是用 C 编写的。

考虑到这一点，id 说：

为了好玩，我会在 PHP 中编写一个 Tokenizer -> Parser -> Transcoder 链——甚至可能是一个带有数据库存储的链；但我会输出文本（另一种语言的源代码）。

我不会用 PHP 编写编译器，因为我不想从 PHP 输出二进制文件——不是因为它不能，而是因为我不喜欢使用字符串进行二进制算术。

我用 C 编写的编译器。

# spring-mvc - Database reverse Engineer exception javax/management/InstanceAlreadyExistsException Spring Roo

> ID：12702734
> 
> 赞同：0
> 
> 时间：2012-10-03T06:09:36.593
> 
> 标签：spring-mvc, oracle10g, spring-roo

I have Oracle 10g configured as a database in my roo. This works properly with entity commands, but when i am trying to use database reverse engineer, i am getting below exceptions. Can anyone please guide me with this.

```
roo> database reverse engineer --schema Exception in thread "Spring Roo JLine Sh
     ell" java.lang.NoClassDefFoundError: javax/management/InstanceAlreadyExistsExcep
     tion
     at java.lang.Class.getDeclaredConstructors0(Native Method)
     at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
     at java.lang.Class.getConstructor0(Class.java:2699)
     at java.lang.Class.newInstance0(Class.java:326)
     at java.lang.Class.newInstance(Class.java:308)
     at org.springframework.roo.addon.jdbc.polling.internal.CommonJdbcDriverP
     rovider.loadDriver(CommonJdbcDriverProvider.java:55)
     at org.springframework.roo.addon.jdbc.polling.internal.PollingJdbcDriver
     Manager.loadDriver(PollingJdbcDriverManager.java:54)
     at org.springframework.roo.addon.dbre.jdbc.ConnectionProviderImpl.getCon
     nection(ConnectionProviderImpl.java:65)
     at org.springframework.roo.addon.dbre.jdbc.ConnectionProviderImpl.getCon
     nection(ConnectionProviderImpl.java:46)
     at org.springframework.roo.addon.dbre.model.DbreModelServiceImpl.getConn
     ection(DbreModelServiceImpl.java:74)
     at org.springframework.roo.addon.dbre.model.DbreModelServiceImpl.support
     sSchema(DbreModelServiceImpl.java:240)
     at org.springframework.roo.addon.dbre.converter.SchemaConverter.getAllPo
     ssibleValues(SchemaConverter.java:42)
     at org.springframework.roo.shell.SimpleParser.completeAdvanced(SimplePar
     ser.java:537)
     at org.springframework.roo.shell.jline.JLineCompletorAdapter.complete(JL
     ineCompletorAdapter.java:35)
     at jline.ConsoleReader.complete(ConsoleReader.java:936)
     at jline.ConsoleReader.readLine(ConsoleReader.java:603)
     at jline.ConsoleReader.readLine(ConsoleReader.java:457)
     at jline.ConsoleReader.readLine(ConsoleReader.java:283)
     at org.springframework.roo.shell.jline.JLineShell.promptLoop(JLineShell.
     java:413)
     at org.springframework.roo.shell.jline.JLineShell.run(JLineShell.java:53
     9)
     at java.lang.Thread.run(Thread.java:619)
     Caused by: java.lang.ClassNotFoundException: javax.management.InstanceAlreadyExi
     stsException not found by [76]
     at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation
     (ModuleImpl.java:812)
     at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:72)
     at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(Mod
     uleImpl.java:1807)
     at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
     at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
      ... 21 more 
```

I have all required OSGI modules active

```
[  77] [Active     ] [    1] Java Resource API (1.5.0)
[  78] [Active     ] [    1] Java Transaction API (1.1.0)
[  79] [Active     ] [    1] Oracle JDBC Driver (10.2.0.2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:45:33.590

好的，发现问题，原来我安装了两个单独的 OSGI 驱动程序实例，它们导致了一些冲突。

删除其中一个驱动程序后，它的工作完美无缺。

# objective-c - 对于语句每次都缺少最后一个对象

> ID：12702738
> 
> 赞同：0
> 
> 时间：2012-10-03T06:09:54.793
> 
> 标签：objective-c, ios, for-loop

我正在使用以下代码尝试将对象放入数组中。我需要该数组中特定数量的对象 - 另一个数组的计数（即 36）。

```
NSArray *sortedKeys = [[self.titlearray objectForKey:@"Title"] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
[self.titlearray setObject:sortedKeys forKey:@"Title"];

NSLog(@"SORTED KEYS COUNT: %i", sortedKeys.count);

for (NSObject *string in sortedKeys) {

    NSLog(@"Adding object number %i", [sortedKeys indexOfObject:string]);

    NSString *object = [[self.titlearray objectForKey:@"Title"] objectAtIndex:[sortedKeys indexOfObject:string]];

    NSArray *latlong = [[self.locationarray objectAtIndex:[[self.titlearray objectForKey:@"Title"] indexOfObject:object]] componentsSeparatedByString:@", "];
    CLLocation *firstLocation = [[CLLocation alloc] initWithLatitude:[[latlong objectAtIndex:0] doubleValue] longitude:[[latlong objectAtIndex:1] doubleValue]];
    CLLocation *secondLocation = [[CLLocation alloc] initWithLatitude:self.map.userLocation.coordinate.latitude longitude:self.map.userLocation.coordinate.longitude];
    CLLocationDistance distance = [secondLocation distanceFromLocation:firstLocation];
    float value = distance / 1000;
    NSString *distancevalue = [NSString stringWithFormat:@"%.2f", value];

    if(self.distances.count < [sortedKeys indexOfObject:object])
    [self.distances addObject:distancevalue];

    else if([sortedKeys indexOfObject:object] < self.distances.count && [self.distances objectAtIndex:[sortedKeys indexOfObject:object]])
    [self.distances replaceObjectAtIndex:[sortedKeys indexOfObject:object] withObject:distancevalue];

} 
```

第一个`NSLog`按应有的方式显示“36”，但是当`for`调用该语句时，没有出现“添加对象编号 36”的日志。它只上升到 35。这很奇怪，我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:12:17.790

由于在数组中，对象索引计数**从 0 开始，**并且您的最后一个对象索引是**35**，总共将是**36 个**对象。

例如，如果一个数组由**X 个对象**组成，它的索引**从 0 开始，到 X-1 结束**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:12:59.580

**数组**的起始索引从**0 到 n 记录**。

所以它**完美地显示了记录数，**但是**在迭代时它从 0**到 n 记录开始。

你有 36 条记录，但迭代时它从 0 到 35 开始。

# spring - Unexpected Token: REGEXP from Hibernate

> ID：12702739
> 
> 赞同：1
> 
> 时间：2012-10-03T06:09:58.070
> 
> 标签：spring, hibernate

I am getting this error while trying the REGEXP in HQL (Hibernate 3 + spring),

```
org.springframework.orm.hibernate3.HibernateQueryException: unexpected token: REGEXP 
```

Is there any workaround to do this? (I should use REGEXP in my queries) and I am using HibernateTemplate of Spring.

Thanks

# c++ - 调整 Boyer-Moore 实施

> ID：12702741
> 
> 赞同：0
> 
> 时间：2012-10-03T06:10:06.820
> 
> 标签：c++, c, algorithm, implementation, boyer-moore

我正在尝试调整 Boyer-Moore c(++) [Wikipedia 实现](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm#NavFrame2)以获取字符串中模式的所有匹配项。实际上，Wikipedia 实现返回第一个匹配项。主要代码如下所示：

```
char* boyer_moore (uint8_t *string, uint32_t stringlen, uint8_t *pat, uint32_t patlen) {
    int i;
    int delta1[ALPHABET_LEN];
    int *delta2 = malloc(patlen * sizeof(int));
    make_delta1(delta1, pat, patlen);
    make_delta2(delta2, pat, patlen);

    i = patlen-1;
    while (i < stringlen) {
        int j = patlen-1;
        while (j >= 0 && (string[i] == pat[j])) {
            --i;
            --j;
        }
        if (j < 0) {
            free(delta2);
            return (string + i+1);
        }

        i += max(delta1[string[i]], delta2[j]);
    }
    free(delta2);
    return NULL;
} 
```

我试图在`if (j < 0)`将索引添加到数组/向量并让外循环继续之后修改块，但它似乎没有工作。在测试修改后的代码时，我仍然只得到一个匹配项。也许这个实现并不是为了返回所有匹配项而设计的，并且它需要不止一些快速更改才能做到这一点？我不太了解算法本身，所以我不确定如何使这项工作。如果有人能指出我正确的方向，我将不胜感激。

注意：函数 make_delta1 和 make_delta2 在源代码中定义较早（查看维基百科页面），而 max() 函数调用实际上也是在源代码中较早定义的宏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:51:03.457

Boyer-Moore 的算法利用了这样一个事实，即在较长的字符串中搜索“HELLO WORLD”时，如果要找到匹配项，您在给定位置找到的字母会限制在该位置周围可以找到的内容，排序一个海战游戏：如果你在离边界的四个单元格发现公海，你不需要测试剩下的四个单元格，以防有一个 5 单元格的航母躲在那里；不可能。

例如，如果您在第十一个位置找到一个“D”，它可能是 HELLO WORLD 的最后一个字母；但是如果你发现一个'Q'，'Q'不在HELLO WORLD中的任何地方，这意味着搜索的字符串不能在前11个字符中的任何地方，你可以完全避免在那里搜索。另一方面，“L”可能意味着 HELLO WORLD 存在，从位置 11-3（HELLO WORLD 的第三个字母是 L）、11-4 或 11-10 开始。

搜索时，您可以使用两个增量数组跟踪这些可能性。

所以当你找到一种模式时，你应该这样做，

```
if (j < 0)
{
    // Found a pattern from position i+1 to i+1+patlen
    // Add vector or whatever is needed; check we don't overflow it.
    if (index_size+1 >= index_counter)
    {
        index[index_counter] = 0;
        return index_size;
    }
    index[index_counter++] = i+1;

    // Reinitialize j to restart search
    j = patlen-1;

    // Reinitialize i to start at i+1+patlen
    i += patlen +1; // (not completely sure of that +1)

    // Do not free delta2
    // free(delta2);

    // Continue loop without altering i again
    continue;
}
i += max(delta1[string[i]], delta2[j]);
}
free(delta2);
index[index_counter] = 0;
return index_counter; 
```

这应该返回一个以零结尾的索引列表，前提是您将 a 之类的东西传递`size_t *indexes`给函数。

然后该函数将返回 0（未找到）、index_size（匹配太多）或 1 和 index_size-1 之间的匹配数。

例如，这允许添加额外的匹配项，而不必重复对已找到的 (index_size-1) 子字符串的整个搜索；你增加`num_indexes`new_num，`realloc`数组`indexes`，然后将新数组在offset处传递给函数`old_index_size-1`，new_num作为新大小，干草堆字符串从索引处匹配的偏移量`old_index_size-1`加*一*开始（**不是**，正如我在之前的修订版中所写，*加上针线的长度*；见评论）。

这种方法也会报告重叠匹配，例如在*香蕉中搜索**ana*会找到 b* *ana* *na 和 ban* *ana* *。

 *****更新**

我测试了上面的，它似乎工作。我通过添加这两个包含来修改 Wikipedia 代码，以防止 gcc 抱怨

```
#include <stdio.h>
#include <string.h> 
```

然后我修改了`if (j < 0)`它以简单地输出它找到的内容

```
 if (j < 0) {
            printf("Found %s at offset %d: %s\n", pat, i+1, string+i+1);
            //free(delta2);
            // return (string + i+1);
            i += patlen + 1;
            j = patlen - 1;
            continue;
    } 
```

最后我用这个测试了

```
int main(void)
{
    char *s = "This is a string in which I am going to look for a string I will string along";
    char *p = "string";
    boyer_moore(s, strlen(s), p, strlen(p));
    return 0;
} 
```

并得到了，正如预期的那样：

```
Found string at offset 10: string in which I am going to look for a string I will string along
Found string at offset 51: string I will string along
Found string at offset 65: string along 
```

如果字符串包含两个重叠序列，则找到 BOTH：

```
char *s = "This is an andean andeandean andean trouble";
char *p = "andean";

Found andean at offset 11: andean andeandean andean trouble
Found andean at offset 18: andeandean andean trouble
Found andean at offset 22: andean andean trouble
Found andean at offset 29: andean trouble 
```

为了避免重叠匹配，最快的方法是不存储重叠。它可以在函数中完成，但这意味着重新初始化第一个增量向量并更新字符串指针；我们还需要存储第二个`i`索引，`i2`以防止保存的索引变得非单调。这不值得。更好的：

```
 if (j < 0) {
        // We have found a patlen match at i+1
        // Is it an overlap?
        if (index && (indexes[index] + patlen < i+1))
        {
            // Yes, it is. So we don't store it.

            // We could store the last of several overlaps
            // It's not exactly trivial, though:
            // searching 'anana' in 'Bananananana'
            // finds FOUR matches, and the fourth is NOT overlapped
            // with the first. So in case of overlap, if we want to keep
            // the LAST of the bunch, we must save info somewhere else,
            // say last_conflicting_overlap, and check twice.
            // Then again, the third match (which is the last to overlap
            // with the first) would overlap with the fourth.

            // So the "return as many non overlapping matches as possible"
            // is actually accomplished by doing NOTHING in this branch of the IF.
        }
        else
        {
            // Not an overlap, so store it.
            indexes[++index] = i+1;
            if (index == max_indexes) // Too many matches already found?
                break; // Stop searching and return found so far
        }
        // Adapt i and j to keep searching
        i += patlen + 1;
        j = patlen - 1;
        continue;
    } 
```***

# ios - sqlite3_prepare_v2 不会返回花费太长时间（慢）和使用内存

> ID：12702747
> 
> 赞同：0
> 
> 时间：2012-10-03T06:11:07.417
> 
> 标签：ios, ipad, sqlite, fmdb

我有一个 iOS 应用程序，有一个包含 1500 条记录的表。

我正在使用 FMDB，调用以下表单：

```
FMDatabase *db = ...
[db executeQuery:@"select num from a where b = ?", 6]; 
```

表“a”在“b”上有一个索引。

这在模拟器中运行良好，但在 iPad1 上需要很长时间。它会消耗内存，直到应用程序被杀死。Instruments 说它卡在“sqlite3_prepare_v2”中。

原始查询也有一个“order by”子句。我已将其删除以进行测试。我什至可以完全删除 where 子句，它仍然以这种方式运行。

有什么想法可能是错的吗？

在此之前，其他查询正在运行。我之前曾从不同的线程访问过数据库，但没有任何其他线程正在进行访问。我曾以为我可能有一个悬空交易，但事实也并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:17:40.213

那么，您是否尝试将结果提取到`FMResultSet`?

而且，如果您使用的是**FMResultSet**，您是否通过键入来关闭结果集`[rs close]`？

这些都是需要考虑的重要事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:33:14.567

我想我找到了问题所在。我有两个线程，每个线程都有一个 FMDatabase 对象。我相信发生的事情是我在事务中使用第一个数据库对象插入了许多行。我有一个逻辑错误，我从未提交过交易。

虽然第一个数据库实例有这个大的待处理事务，但我试图从第二个数据库实例的同一个表中选择所有。

显然，这是造成这种情况的原因。显然在模拟器中，它并不明显慢。但它在 iPad1 上消耗了足够的内存和时间，导致该应用程序被杀死。

# java - 使用 xstream 填充列表值

> ID：12702753
> 
> 赞同：0
> 
> 时间：2012-10-03T06:11:52.123
> 
> 标签：java, xml, xml-parsing, xml-serialization, xstream

我正在使用`Xstream`以下格式读取一些 xml

```
 <Objects>  
  <Object Type="System.Management.Automation.Internal.Host.InternalHost">   
    <Property Name="Name" Type="System.String">ConsoleHost</Property>   
    <Property Name="Version" Type="System.Version">2.0</Property>   
    <Property Name="InstanceId" Type="System.Guid">7e2156</Property>
  </Object> 
</Objects> 
```

基本上在对象标签下可以有 n 个对象类型，每个对象类型可以有 n 个属性标签。所以我用**Java**类和代码来建模如下

```
 @XStreamAlias("Objects")
class ParentResponseObject {
    @XStreamImplicit
    List <ResponseObject>responseObjects = new ArrayList<ResponseObject>(); 
    public String toString () {
        return responseObjects.get(0).toString();       
    }   
}
@XStreamAlias("Object")
@XStreamConverter(value = ToAttributedValueConverter.class, strings = { "value" })
class ResponseObject {
    @XStreamAsAttribute
       String Type;
       String value;
       @XStreamImplicit
       List <Properties> properties = new ArrayList<Properties>();  
      public String toString () {
        return Type+" value is "+"List is "+properties+ value;      
    }   
}
@XStreamAlias("Property")
@XStreamConverter(value = ToAttributedValueConverter.class, strings = { "value" })
class Properties {
    @XStreamAsAttribute
    String Name;
    @XStreamAsAttribute
    String Type;
    String value;
    Properties (String name, String type,String value) {
            this.Name = name;
            this.Type = type;
            this.value =  value;
        }   
} 
```

使用此代码，我可以`responseObjects`在类中填充列表`ParentResponseObject`。但是，即使我在这两种情况下都使用相同的技术，列表中的属性`ResponseObject`总是并且不会被填充。`null`我调试了很多，但找不到任何东西。征求您的帮助和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:27:00.490

添加对隐式的引用它将起作用

```
 @XStreamImplicit(itemFieldName="Object")
  List<ResponseObject> responseObjects = new ArrayList<ResponseObject>();

  @XStreamImplicit(itemFieldName="Property")
  List<Properties> properties = new ArrayList<Properties>(); 
```

# java - 从 bean/类中提取注解参数

> ID：12702756
> 
> 赞同：0
> 
> 时间：2012-10-03T06:12:02.403
> 
> 标签：java, rest, annotations, jersey, jackson

`@JsonProperty(name = "property_name")`只要 json 中的属性名称与我的对象中的属性名称不同，我就会使用(Jackson) 注释。有没有办法可以在代码的其他地方以编程方式访问这些信息？

例子：

```
public class Entity {

    protected long entityName;

    @JsonProperty("entity_name")
    public long getEntityName() {
        return entityName;
    }

    public void setEntityName(String entityName) {
        this.entityName = entityName;
    }
} 
```

我需要的是一种将 entity_name 映射到 entityName 的方法。例如，`getActualFieldName("entity_name")`应该返回`"entityName"`。我可以为所有这些映射保留一个单独的文件，但我不想这样做，因为这些信息已经以`@JsonProperty`注释的形式存在。如果我能以某种方式从那里提取它，它会简化一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:19:06.530

检查[此](http://www.java2s.com/Code/Java/Reflection/GetAnnotationParameter.htm)Helper 实用程序。获取注解参数

# canvas - WebGl 动画仅在鼠标进入屏幕时出现

> ID：12702760
> 
> 赞同：1
> 
> 时间：2012-10-03T06:12:27.837
> 
> 标签：canvas, webgl, three.js

我正在用 WebGL 和 three.js 制作我的第一个动画。一切都很顺利，除了我的动画只在鼠标进入窗口时出现。

[我的动画](http://wabeo.fr?theme=auriga-7)

我的代码：

```
var container = document.getElementById('container');
var wi       = window.innerWidth;
var he       = window.innerHeight;
var renderer  = new THREE.WebGLRenderer({
    antialias: true
});
var scene    = new THREE.Scene();
var camera   = new THREE.PerspectiveCamera(75,wi/he,1,10000);
var distance = 500;
var geometry2 = new THREE.Geometry();

renderer.setSize(wi ,he);
container.appendChild(renderer.domElement);
scene.add(camera);

var texture = THREE.ImageUtils.loadTexture( '/wp-content/themes/auriga-7/i/cloud.png' );
texture.minFilter = THREE.LinearFilter;
texture.magFilter = THREE.LinearFilter;

var material = new THREE.MeshBasicMaterial( { map: texture,transparent: true} );
var plane = new THREE.PlaneGeometry( 400,400,4,8 );

for ( ix = 0; ix <100; ix++ ) {
item = new THREE.Mesh( plane, material );
item.position.x = ((Math.random()-0.5)*(Math.random() * wi/2) /4)*Math.random()*10;
item.position.y = ((Math.random()-0.5)*(Math.random() * he/2) /4)*Math.random()*10;
item.position.z = ix*10-50;
item.rotation.z = Math.random() *250;
item.scale.x = item.scale.y = Math.random() * Math.random() * 2 + 0.5;

THREE.GeometryUtils.merge(geometry2,item);
}

mesh = new THREE.Mesh( geometry2, material );
scene.add(mesh);

camera.position.z = distance;
camera.lookAt(scene.position);
renderer.sortObjects = false;

// create a point light
var pointLight =
  new THREE.PointLight(0xFFFFFF);

// set its position
pointLight.position.x = 10;
pointLight.position.y = 50;
pointLight.position.z = 130;

// add to the scene
scene.add(pointLight);
renderer.render(scene, camera);

document.addEventListener('mousemove',onMouseMove, false);
window.addEventListener('resize',onResizeMyFuckinBrowser,false);
function onMouseMove(event){

var mouseX = event.clientX - wi/2;
var mouseY = event.clientY - he/2;

camera.position.x = (mouseX - camera.position.x) * 0.02;
camera.position.y = (-mouseY - camera.position.y) * 0.02;
camera.position.z = distance;
camera.lookAt(scene.position);
renderer.render(scene, camera);
}
function onResizeMyFuckinBrowser(){
var wi       = window.innerWidth;
var he       = window.innerHeight;
renderer.setSize(wi ,he);
renderer.render(scene, camera);
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:40:14.883

纹理加载是一个异步事件。最有可能的是，您`render()`在主程序中的调用发生在纹理加载之前。您的其他`render()`调用仅发生在鼠标移动事件和调整大小事件上。这就是为什么在移动鼠标之前什么都看不到的原因。

如果您不想使用`requestAnimationFrame()`，可以查看 的参数`ImageUtils.loadTexture()`，您将在其中看到回调函数的选项。您可以在回调中放置一个渲染调用。

# java - 如何包装来自雅虎天气 api 的数据？

> ID：12702762
> 
> 赞同：2
> 
> 时间：2012-10-03T06:12:34.143
> 
> 标签：java, yahoo-weather-api

如何包装来自**Yahoo Weather API**的数据。我有这样的代码，其中城市可能返回一个`null`值，而温度可能返回**0**。请帮我。

```
public class Handalinxml extends DefaultHandler{

    Xmldatacollected info=new Xmldatacollected();
    public String getInformation()
    {
        return info.dataToString();
    }
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

            if(localName.equals("yweather:location"))
            {

                String city=attributes.getValue("city");
                info.setCity(city);

            }
            if(localName.equals("yweather:forecast"))
            {
                String t=attributes.getValue("high");
                int temp=Integer.parseInt(t);
                info.setTemp(temp);

            }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T20:15:47.033

在我的库中，我使用 JAXB 来处理 yahoo 天气响应。这里的代码：[https ://github.com/fedy2/yahoo-weather-java-api](https://github.com/fedy2/yahoo-weather-java-api)

# android - 获取 CursorIndexOutOfBoundsException

> ID：12702768
> 
> 赞同：0
> 
> 时间：2012-10-03T06:13:01.530
> 
> 标签：android, sqlite, indexoutofboundsexception

我有一个从db读取数据的功能。但这总是返回错误..我对android了解不多..寻求帮助

```
10-03 11:33:05.870: E/AndroidRuntime(1321): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.projects.myworldsafe/com.projects.myworldsafe.DeailedView}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

.

```
String getItemDetailsWp(String id){
System.out.print(id);
SQLiteDatabase db = this.getReadableDatabase();
String[] params=new String[]{id};
String selectQuery = "SELECT Content  FROM " + TABLE_ITEMS +" WHERE "+ITEM_ID+"=?";
Cursor c=db.rawQuery(selectQuery,params);   
 c.moveToFirst();
 int index= c.getCount();
 int indexd= c.getColumnIndex(ITEM_CONTENT); 
 System.out.print("Count query"+indexd);
 return c.getString(index);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:17:55.913

用这个：

```
return c.getString(indexd); 
```

这是您真正想要获得的价值。您在`index`那里使用过，它返回光标中的记录数。

更好的做法是：

```
String getItemDetailsWp(String id){
System.out.print(id);
SQLiteDatabase db = this.getReadableDatabase();
String[] params=new String[]{id};
String selectQuery = "SELECT Content  FROM " + TABLE_ITEMS +" WHERE "+ITEM_ID+"=?";
Cursor c=db.rawQuery(selectQuery,params);   
if(c.getCount()>0){
    c.moveToFirst();
    int index= c.getCount();
    int indexd= c.getColumnIndex(ITEM_CONTENT); 
    System.out.print("Count query"+index);// use index instead of indexd to print total records in query
    return c.getString(index);// return value of column number specified in indexd
}
else
    return "";// when no records found
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:18:24.930

这是正确的代码

```
int index= c.getCount(); // this will return total rows found
int indexd= c.getColumnIndex(ITEM_CONTENT);  // this is the column index by giving the column name.
System.out.print("Count query"+indexd);
return c.getString(indexd); // here you need to pass the column index but you passing the index which was total number of rows 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:18:44.780

```
Cursor c=db.rawQuery(selectQuery,params); 
```

正在返回大小为 0 的光标，更改代码以检查光标是否有项目，然后通过以下方式移动到第一个位置：

```
Cursor c=db.rawQuery(selectQuery,params);   
if(c.getCount()>0)
{
 c.moveToFirst();
int index= c.getCount();
 int indexd= c.getColumnIndex(ITEM_CONTENT); 
 System.out.print("Count query"+indexd);
 return c.getString(index);
}
return ""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:19:18.750

听起来你正试图从一个空的结果集中读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T06:20:42.950

检查您的数据库，查询返回大小为 0 的游标，因此您试图访问索引 0 处的游标，因此出现错误。重新考虑查询并检查数据库中的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T06:23:34.397

您可能正在访问 0 行游标。改成 ：

```
// moveToFirst itself will return false if there is no entry on Cursor
if(c.moveToFirst()){
    int cursorCount = c.getCount();
    int indexd = c.getColumnIndex(ITEM_CONTENT); 
    System.out.print("Count query"+index);
    // You should getString(ColumnIndex) not CursorCount
    return c.getString(indexd);
} else
    return ""; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T06:25:04.020

当您传递记录数而不是列号时，您将获得索引越界异常。作为最佳编码实践，检查游标是否有记录，即它是空的或包含记录。用这个

```
String getItemDetailsWp(String id){
System.out.print(id);
SQLiteDatabase db = this.getReadableDatabase();
String[] params=new String[]{id};
String selectQuery = "SELECT Content  FROM " + TABLE_ITEMS +" WHERE "+ITEM_ID+"=?";
Cursor c=db.rawQuery(selectQuery,params);   
if(c.getCount()>0){
c.moveToFirst();
int index= c.getCount();
int indexd= c.getColumnIndex(ITEM_CONTENT); 
System.out.print("Count query"+index);
return c.getString(indexd);
}
else
return "";// when no records found
} 
```

# mysql - 检索MySql中的最后一级类别

> ID：12702769
> 
> 赞同：1
> 
> 时间：2012-10-03T06:13:05.223
> 
> 标签：mysql

我在 MySql 数据库中有一个包含以下数据的类别表。

```
id  name                      parent
-------------------------------------
1   Web development           0
2   Application development   0
3   Linux                     0
4   Misc                      0
5   Php                       1
6   Mysql                     1
7   Javascript                1
8   CSS                       1
9   C plus plus               2
10  wxWidgets                 2
11  Tutorials                 3
12  My thoughts               4
13  Java                      1
14  JSP                       13
15  Spring                    14
16  Spring 3.0                15
17  Spring 3.1                15
18  JSF                       13
19  Oracle                    0
20  Oracle 8i                 19
21  Oracle 91                 19
22  JSF 2.0                   18
23  JSF 2.2                   18 
```

我需要以下输出。

```
5   Php                       1
9   C plus plus               2
11  Tutorials                 3
12  My thoughts               4
6   Mysql                     1
7   Javascript                1
8   CSS                       1
10  wxWidgets                 2
22  JSF 2.0                   18
23  JSF 2.2                   18
16  Spring 3.0                15
17  Spring 3.1                15
20  Oracle 8i                 19
21  Oracle 91                 19 
```

结果集应仅包含每个类别的最后一级。这可以使用 MySql 中的函数来完成。但是有没有办法只使用 SQL 查询来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:50:46.300

请检查它..它会工作

```
SELECT id, name, parent
FROM category 
WHERE id NOT 
IN ( SELECT parent FROM category ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:25:13.137

```
SELECT 
    c.id,
    dr.ID,
    dr.name,
    dr.Parent
FROM category as c
inner JOIN (SELECT MAX(id) as ID, name , Parent FROM category WHERE parent != '0' GROUP BY parent) as dr ON dr.id = c.id
group by c.id
order by dr.Parent 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:15:25.913

这个怎么样？它将查询`category`并获取`id`a`parent`为 0 的行，然后找到引用该父记录的每一行。

```
select * from category as t1 where t1.parent in (select t2.id from category as t2 where t2.parent=0) 
```

# java - 聊天应用程序 - 哪种技术更适合在 Android 中实现聊天应用程序

> ID：12702772
> 
> 赞同：7
> 
> 时间：2012-10-03T06:13:14.373
> 
> 标签：java, android, web-services, sockets, websocket

**我必须制作一个基本上是聊天应用程序的安卓应用程序。**在此聊天应用程序中，用户也可以在群组中与单个用户进行交互，这意味着群组聊天也存在。我使用 php 作为数据库的后端。我以前从未做过这类工作，所以需要一些建议或指导。

```
The options i have seen is as follow :

1\. Web-services 

2\. Socket Programming 

3\. XMPP using the smack api 
```

现在我对他们感到困惑的是，在 android 中实现聊天功能哪个更好。我也没有得到任何示例代码。我的一个团队成员要求我使用套接字编程，但我没有得到任何示例应用程序或任何用于 android 套接字编程的东西。这次我不懂socket编程。我们如何将手机连接到服务器，然后连接到其他设备。希望你能得到我想要的康威你。

因此，任何人都可以指导我并告诉我继续前进的正确方向。另外，如果您可以提供任何示例代码，那将非常有帮助。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T06:39:36.927

对于基本的 Socket 编程教程，您可以查看[HERE](http://ramenboy.blogspot.in/2012/05/android-sockets.html)和[HERE](http://www.edumobile.org/android/android-development/socket-programming/)。

但是，我建议使用 XMPP，正如我在[此处](https://stackoverflow.com/questions/12667918/android-chat-server/12668572#12668572)提到的那样，因为它是从头开始设计用于消息传递的协议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T09:48:04.250

另一种选择（除了 XMPP，它肯定是一种有效的聊天方法，因为它就是为此而设计的）是使用 WebSocket。使用 WebSocket 也将打开拥有纯浏览器客户端的可能性。

对于 Android 上的 WebSocket，有 AutobahnAndroid，它是[Autobahn](http://autobahn.ws/)系列 WebSocket 和 WAMP 实现的一部分。

[WAMP](http://wamp.ws)是基于 WebSocket 的 RPC 和 PubSub 协议，具有多种实现。还有一个 WebSocket/WAMP 的 PHP 实现：[Ratchet](http://socketo.me/)。

免责声明：我是 Autobahn/WAMP 的作者，为 Tavendo 工作。

# html - iOS6 上的 HTML5 媒体查询

> ID：12702773
> 
> 赞同：1
> 
> 时间：2012-10-03T06:13:21.433
> 
> 标签：html, cordova, ios6, media

我在 PhoneGap 中开发了一个 iOS 应用程序。它工作得很好，但是当我将我的 iOS SDK 升级到 6.0 版时，我正在使用的媒体查询现在不再有效了。iOS 6 是否有关于媒体查询的任何问题？

# iphone - UIAlertView 消息

> ID：12702781
> 
> 赞同：0
> 
> 时间：2012-10-03T06:13:58.253
> 
> 标签：iphone, objective-c, ios

我的 有问题`UIAlertView`，这是我的显示方式，

```
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"エラー"
                                     message:@"Oneスロットに何も画像が設定されていません"
                                    delegate:nil
                           cancelButtonTitle:@"OK"
                           otherButtonTitles:nil];            
[message show]; 
```

但是预览看起来像这样：

![在此处输入图像描述](../Images/ded87534d0da384f7441d4a9ca87c65d.png)

我想要的是让它只有 1 行，但我在一些线程/问题中读到它不应该这样做，在不让我的应用程序被拒绝的情况下，最好的方法是什么？我已经阅读过有关更改其宽度的信息，但这是否允许？

# c# - 如何检查用户角色是否对特定视图具有读/写权限

> ID：12702783
> 
> 赞同：1
> 
> 时间：2012-10-03T06:14:08.560
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个`ASP.NET MVC 4`应用程序。我正在尝试实施一个解决方案，我检查用户是否可以访问视图，如果不能，则显示错误。如果用户可以访问视图，那么我需要检查该用户是否拥有`read access`或`read and edit access`访问该视图。如果用户具有读取权限，则仅显示正常的详细信息视图，如果具有读取和编辑权限，则用户可以查看详细信息视图或可以编辑数据。

这样的事情可能吗？我尝试浏览了我在 Codeplex 上找到的几个入门工具包，但找不到我想要的东西。这将如何实施？如果可能的话，如果有人知道我可以下载的任何示例项目，那么我将不胜感激。我喜欢通过代码工作，我通过这种方式学习更多。

我希望这一切都是数据库驱动的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:59:21.477

您应该更多地研究 AuthorizeAttribute 以及如何使用角色。基本上你给你的用户角色（可以从数据库中获取）并且对于你希望在应用程序中限制访问的每个视图，你将 Authorize 属性与角色一起添加。默认情况下，我认为您只能限制访问或禁止访问，但您可以覆盖并编写自定义属性以提供您感兴趣的行为。

或者，您可以管理控制器中的用户权限。由于您知道经过身份验证的用户角色并且可以访问它们，因此您可以在控制器中执行检查并从中创建视图（禁用输入等）

**有关的**

*   [ASP.Net MVC：可以覆盖 AuthorizeAttribute 吗？](https://stackoverflow.com/questions/532773/asp-net-mvc-can-the-authorizeattribute-be-overriden)
*   [对 MVC 站点具有特定要求的精细权限](https://stackoverflow.com/questions/4359661/granular-permissions-with-certain-requirements-for-an-mvc-site)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T09:18:52.020

正如@Marcus 所说，您应该使用属性。操作开始时，您可以检查用户的角色，他是否有权访问：

```
public class AttributeForTestAttribute : ActionFilterAttribute
{
    public int RoleCanAccess { get; set; }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
          base.OnActionExecuting(filterContext);

          //your validation here..
          //for example:

          if(_currentUser.Role < RoleHasAccess )
          {
            //user has not access to this action, redirect him to home page. 

            filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary { { "controller", "Home" }, { "action", "Index" }, { "returnUri", filterContext.HttpContext.Request.RawUrl } });
          }
          else
          {
            // user has access to this action
          }
    }
} 
```

在控制器中使用您的属性：

```
 [AttributeForTest(RoleHasAccess = 2)]
    public ActionResult SaveProduct(Product product)
    {

    } 
```

# python - 重新编写此代码的有效方法？

> ID：12702784
> 
> 赞同：0
> 
> 时间：2012-10-03T06:14:13.383
> 
> 标签：python, performance

我必须测量不同 L 值所花费的时间，所以我想优化我的代码。我必须做的是用直径为 d 的周期点 (x,y,z) 填充一个立方体 (LxLxL)，这些点是相同的。到目前为止，这就是我所拥有的：

```
L=10
d=2

x,y,z = 0,0,0
counter=0

with open("question1.xyz","w") as f:
    while x<=L-d:
        while y<=L-d:
            while z<=L-d:
                f.write('H ')
                f.write('%f ' %x )
                f.write('%f ' %y )
                f.write('%f\n' %z )
                counter=counter+1
                z=z+d
            z=0
            y=y+d
        z,y=0,0
        x=x+d 
```

然后我必须输出这种格式的文件（.xyz 文件）：

```
H 0.000000 0.000000 0.000000
H 0.000000 0.000000 1.000000
H 0.000000 0.000000 2.000000
H 0.000000 0.000000 3.000000
H 0.000000 0.000000 4.000000 
```

有什么想法或建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:29:18.200

可以做几件事：首先，将数据格式化与数据生成分开，其次，使用[更清晰的迭代方法](http://docs.python.org/library/itertools.html#itertools.product)。在第一个近似值中，这将是这样的：

```
from itertools import product

def iterate_3d(size, step=1):
    """ Generate the data using the standard lib """
    # an iterable range between 0 and `size` with `step`, not including size
    vals = xrange(0, size, step)  

    return product(vals, repeat=3)  # replaces your nested loops

def save(filename, data):    
    """ Format and save the data, which is a sequence of (x, y, z) tuples """
    with open(filename, "w") as f:
        for x, y, z in data:
            f.write("H %f %f %f\n" % (x, y, z))

def main():
    data = iterate_3d(10, 2)
    save("question1.xyz", data)

if __name__=='__main__':
    main() 
```

# jsp - 在 jsp 和 servlet 中为文件共享 Web 应用程序设计 Web 应用程序设置？

> ID：12702788
> 
> 赞同：0
> 
> 时间：2012-10-03T06:14:33.603
> 
> 标签：jsp, servlets, file-upload, file-sharing, web-application-design

**我正在开发一个文件共享网络应用程序。**该应用程序正在使用 jsp 和 servlet、MySql、Apache tomcat 6.0 网络服务器和 Eclipse Juno IDE 开发。我的专家级别是这些给定技术的初学者。

这个应用程序有一个文件上传实用程序。在此实用程序下，用户以 HTML 形式输入有关文件的一些基本信息，并使用浏览按钮提供本地计算机上文件的路径。当用户单击提交按钮时，表单中的数据会保存在数据库中，并且**文件会上传到服务器上由应用程序指定的固定公共位置。在将文件上传到服务器时，此实用程序将在给定的修复公共位置创建一个目录，并将文件上传到此创建的目录中。**

我有以下问题和疑问，我希望得到专家的指导和解决方案。

1.  目前我的网络服务器和数据库服务器在同一台机器上，上传的文件也在应用程序目录中的同一网络服务器上。**我想让上传的文件非常安全。请问专家这种设置是否正确，或者是否有其他针对相同情况的安全完善的设置设计？**

2.  登录到应用程序的用户数量尚未确定，但可能从几个数字到数千个。上传文件的数量没有限制。 **所以最后，修复公共位置的所有用户上传的文件的总大小可能是 GB 或几个 tb**目前没有关于所需磁盘空间的问题，但仍然欢迎有关此的建议和指导

3.  正如上面提到的过程，我需要在给定的修复公共位置创建一个目录。**服务器或服务器上的其他安全应用程序是否将允许我动态创建**修复公共位置的目录？

4.  **将上传的文件放在自己的 Web 应用程序文件夹中是一种好习惯吗？**

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:56:18.127

1）我建议将上传的文件保存在您的数据库中。通过这种方式，您将拥有一个额外的层（数据库安全），增加了安全性和可靠的存储，而无需对目录中的文件进行排序。

2) 为了能够决定您的磁盘存储，提前知道要上传的平均文件大小和使用该应用程序的用户数量是至关重要的。如果您考虑到我上面的观点并使用数据库，那么有一些方法可以扩展您的数据库大小以获得额外的可伸缩性，以备不时之需。

3) 是的，只要您有足够的操作系统权限，就可以创建目录。

4）不！不要这样做。考虑您要重新部署应用程序的情况。

# user-interface - 嵌入式 GUI - 类似于 GWEN？

> ID：12702790
> 
> 赞同：2
> 
> 时间：2012-10-03T06:14:39.033
> 
> 标签：user-interface, embedded, stm32

我编写了一个库来使用不同的 LCD，例如带有触摸屏的 TFT LCD 和现有的 RTOS。该库确实包含所有高级例程，如绘制线条、圆圈、渲染字体等。

现在，我想让这个库更有用，并给它一个小的 GUI 工具包，这样用户就可以创建按钮、滑块、单选按钮和所有其他经典的 GUI 元素。有[GWEN](http://code.google.com/p/gwen/)效果很好。

我的问题：是否有像 GWEN 这样易于使用的免费开源库来满足我的目的？我不能接受像 Qt 这样的东西，因为我需要实现整个内部结构，比如事件处理和东西。此外，RTOS 需要支持 POSIX。我真的只想要 GUI 元素，仅此而已。它必须非常轻量级，并且只实现所有高级类。它应该尽可能轻巧，因为它应该在 STM32F1（ARM Cortex-M3，RAM 小于 100kB）等小型微控制器上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-19T18:28:55.780

好吧，最后我决定自己写： http: [//ugfx.io](http://ugfx.io)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-13T18:37:09.560

[Gwork](https://github.com/billyquith/GWork)是 GWEN 的一个分支。你可以试试。

# text - 重复标记模式之间的匹配文本

> ID：12702791
> 
> 赞同：0
> 
> 时间：2012-10-03T06:14:50.897
> 
> 标签：text, matching

如果我有这个文本“/text1/text2/text3/endtag”并且想要提取结束标签之前的最后一个文本（text3），我需要使用什么正则表达式模式？

我试过这个：

```
 /\/(.*)\// & 
```

这给了我结束标签之前的一切。

以下只给了我“text1”

```
/\/(.*?)\// 
```

我是正则表达式的新手，所以提前感谢您的帮助和耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:20:07.803

```
var matches = /([^\/]*)\/endtag$/.exec("/text1/text2/text3/endtag");
console.log(matches[1]); 
```

您想要匹配不包含“/”后跟“/endtag”加上行尾的字符串。

# javascript - 从javascript中的当前页面url中删除查询字符串

> ID：12702793
> 
> 赞同：1
> 
> 时间：2012-10-03T06:14:56.897
> 
> 标签：javascript, .net

我想在按钮单击的 javascript 中从我当前的页面 url 中删除查询字符串，你能帮我处理上面的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:44:02.953

您不能在不重定向或重新加载页面的情况下简单地删除查询字符串。因此，您将使用 windows.location 更改位置或重定向。getPathFromUrl() 函数从给定的 URL 中删除查询字符串。

这是您如何做到的示例：

```
function getPathFromUrl(url) {
  return url.split("?")[0];
}

var testurl='http://localhost:2314/RewardPointsSystem/Admin/PointCalculations.aspx?date=20-Sep-2012%22'

window.location=getPathFromUrl(testurl); // loads http://localhost:2314/RewardPointsSystem/Admin/PointCalculations.aspx 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T06:27:03.370

尝试

```
var query = window.location.href.match(/^(.*)\?/);
if (query){
    history.pushState(null, "", query[1]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:16:33.730

在这里，试试这个：

```
window.location = String(window.location).match(/(.*?)\?/)[1]; 
```

或使用评论中的示例 URL

```
window.location = "http://localhost:2314/RewardPointsSystem/Admin/PointCalculations.aspx?date=20-Sep-2012%22".match(/(.*?)\?/)[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:32:37.567

You can just trim the whole string succeeding the "?" sign

# asp.net-mvc - 如何检测用户何时将 HTML 代码发送到服务器，以便在 ASP.NET MVC 4 中显示错误消息

> ID：12702794
> 
> 赞同：0
> 
> 时间：2012-10-03T06:15:03.023
> 
> 标签：asp.net-mvc

有没有办法检测用户何时将 HTML 代码放入控制器操作参数中，以便我可以在 ASP.NET MVC 4 中显示适当的错误消息？默认情况下，没有属性和方法参数接受 HTML。

我还想在客户端强制执行此验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:52:37.720

```
public class MyViewModel
{
    [AllowHtml]
    [RegularExpression(@"^((?!<\w+>).)*$", ErrorMessage = "Please do not use HTML tags")]
    public string SomeValue { get; set; }
} 
```

# iphone - 为循环内的自定义 UIView 设置 UITapGestureRecognizer

> ID：12702801
> 
> 赞同：0
> 
> 时间：2012-10-03T06:15:36.710
> 
> 标签：iphone, objective-c, uiview, uitapgesturerecognizer

我有一个包含嵌套的视图控制器`UIView`。我想为我添加的每个子视图添加一个点击监听器。但是`SIGABRT`当我点击子视图时我发现了一个错误。

这是我的代码：

```
- (void) viewDidLoad {
    [super viewDidLoad];

    //set container
    UIView *container = [[UIView alloc] initWithFrame:CGRectMake(5, 5, 320, 420)];
    container.backgroundColor = [UIColor blueColor];

    //create new subview within container. I call it "card"
    for (int i=0; i<5; i++)
    {
        //create card
        UIView *card = [[UIView alloc] initWithFrame:CGRectMake(10, 35 + (65 * i), 300, 45)];
        card.backgroundColor = [UIColor greenColor];

        //set tap event with action selector = cardRowTapped
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(cardRowTapped)];
        [card addGestureRecognizer:tap];

        //add subview
        [container addSubview:card];
    }

    //add subview to self
    [self.view addSubview:container];

} 
```

这是我的点击处理程序代码

```
- (void) cardRowTapped:(UITapGestureRecognizer *)gr {
    NSLog( @"hello");
} 
```

控制台输出：

> 2012-10-03 13:23:37.173 MyProject[5167:707]-[MyViewController cardRowTapped]：无法识别的选择器发送到实例 0x2cd810
> 
> 2012-10-03 13:23:37.179 MyProject [5167:707] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[MyViewController cardRowTapped]：无法识别的选择器发送到实例 0x2cd810”
> 
> ***第一掷调用堆栈：（0x314b888f 0x377f6259 0x314bba9b 0x314ba915 0x31415650 0x30c45637 0x30bd5d65 0x30e06479 0x30b51f55 0x30b50aa3 0x30b5d7e9 0x30b5d627 0x30b5d1f5 0x30b43695 0x30b42f3b 0x3348922b 0x3148c523 0x3148c4c5 0x3148b313 0x3140e4a5 0x3140e36d 0x33488439 0x30b71cd5 0x76e8d 0x76e28）终止叫做抛出异常（LLDB）

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:22:09.110

您的方法需要一个由手势传递的成员变量，因此请更改点击手势方法，如下所示，

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(cardRowTapped:)]; 
```

并检查它应该可以工作，如果您不使用ARC，还有一件事，然后在使用后释放对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:23:14.350

当您添加手势时尝试此代码给委托，如下所示..

```
UIView *card = [[UIView alloc] initWithFrame:CGRectMake(10, 35 + (65 * i), 300, 45)];
        card.backgroundColor = [UIColor greenColor];

        //set tap event with action selector = cardRowTapped
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(cardRowTapped:)];
        [tap setNumberOfTapsRequired:1];
        [tap setDelegate:self];
        [card addGestureRecognizer:tap];
        [tap release];
        //add subview
        [container addSubview:card]; 
```

并在 .h 文件中给出代表，如下所示。

```
@interface ViewController : UIViewController<
UIGestureRecognizerDelegate>{
//.....
} 
```

我希望这可以帮助你...

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:31:37.057

只需更改此代码：

```
//set tap event with action selector = cardRowTapped
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(cardRowTapped:)];
        [card addGestureRecognizer:tap]; 
```

唯一的区别是：

```
@selector(cardRowTapped:)
if you have the method with parameter then ":" should be there. 
```

# php - 使用 eloquent ORM 在 Laravel 中进行批量插入

> ID：12702812
> 
> 赞同：201
> 
> 时间：2012-10-03T06:16:16.933
> 
> 标签：php, laravel, eloquent

我们如何使用 Eloquent ORM 在 Laravel 中执行批量数据库插入？

我正在处理一个 XML 文档，循环遍历它的元素。我想在 Laravel 中完成这样的事情：

```
$sXML = download_page('http://remotepage.php&function=getItems&count=100&page=1');
$oXML = new SimpleXMLElement($sXML);
$query = "INSERT INTO tbl_item (first_name, last_name, date_added) VALUES";
foreach($oXML->results->item->item as $oEntry){
    $query .=  "('" . $oEntry->firstname . "', '" . $oEntry->lastname . "', '" . date("Y-m-d H:i:s") . "'),";
}
mysql_query($query); 
```

但我收到以下错误。

> SQLSTATE[HY093]：无效参数号：混合命名参数和位置参数。

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2012-11-27T23:54:16.433

你可以只使用`Eloquent::insert()`.

例如：

```
$data = [
    ['name'=>'Coder 1', 'rep'=>'4096'],
    ['name'=>'Coder 2', 'rep'=>'2048'],
    //...
];

Coder::insert($data); 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2014-10-26T05:01:21.577

我们可以更新 GTF 答案以轻松更新时间戳

```
$data = array(
    array(
        'name'=>'Coder 1', 'rep'=>'4096',
        'created_at'=>date('Y-m-d H:i:s'),
        'modified_at'=> date('Y-m-d H:i:s')
       ),
    array(
         'name'=>'Coder 2', 'rep'=>'2048',
         'created_at'=>date('Y-m-d H:i:s'),
         'modified_at'=> date('Y-m-d H:i:s')
       ),
    //...
);

Coder::insert($data); 
```

更新：为了简化日期，我们可以按照@Pedro Moreira 的建议使用碳

```
$now = Carbon::now('utc')->toDateTimeString();
$data = array(
    array(
        'name'=>'Coder 1', 'rep'=>'4096',
        'created_at'=> $now,
        'modified_at'=> $now
       ),
    array(
         'name'=>'Coder 2', 'rep'=>'2048',
         'created_at'=> $now,
         'modified_at'=> $now
       ),
    //...
);

Coder::insert($data); 
```

UPDATE2：对于 laravel 5 ，使用`updated_at`代替`modified_at`

```
$now = Carbon::now('utc')->toDateTimeString();
$data = array(
    array(
        'name'=>'Coder 1', 'rep'=>'4096',
        'created_at'=> $now,
        'updated_at'=> $now
       ),
    array(
         'name'=>'Coder 2', 'rep'=>'2048',
         'created_at'=> $now,
         'updated_at'=> $now
       ),
    //...
);

Coder::insert($data); 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2017-06-04T12:12:59.637

这就是你如何以更雄辩的方式做到这一点，

```
 $allinterests = [];
    foreach($interests as $item){ // $interests array contains input data
        $interestcat = new User_Category();
        $interestcat->memberid = $item->memberid;
        $interestcat->catid = $item->catid;
        $allinterests[] = $interestcat->attributesToArray();
    }
    User_Category::insert($allinterests); 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2017-01-25T19:18:26.960

对于正在阅读本文的人，请查看[`createMany()`方法](https://github.com/laravel/framework/blob/5.4/src/Illuminate/Database/Eloquent/Relations/HasOneOrMany.php#L294)。

```
/**
 * Create a Collection of new instances of the related model.
 *
 * @param  array  $records
 * @return \Illuminate\Database\Eloquent\Collection
 */
public function createMany(array $records)
{
    $instances = $this->related->newCollection();

    foreach ($records as $record) {
        $instances->push($this->create($record));
    }

    return $instances;
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-12-23T19:28:18.140

我搜索了很多次，最后使用自定义`timestamps`如下：

```
$now = Carbon::now()->toDateTimeString();
Model::insert([
    ['name'=>'Foo', 'created_at'=>$now, 'updated_at'=>$now],
    ['name'=>'Bar', 'created_at'=>$now, 'updated_at'=>$now],
    ['name'=>'Baz', 'created_at'=>$now, 'updated_at'=>$now],
    ..................................
]); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-02-16T03:16:14.860

`Eloquent::insert`是正确的解决方案，但它不会更新时间戳，因此您可以执行以下操作

```
 $json_array=array_map(function ($a) { 
                        return array_merge($a,['created_at'=> 
                                            Carbon::now(),'updated_at'=> Carbon::now()]
                                           ); 
                                     }, $json_array); 
 Model::insert($json_array); 
```

这个想法是在插入之前在整个数组上添加 created_at 和 updated_at

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-27T09:32:42.377

```
$start_date = date('Y-m-d h:m:s');        
        $end_date = date('Y-m-d h:m:s', strtotime($start_date . "+".$userSubscription['duration']." months") );
        $user_subscription_array = array(
          array(
            'user_id' => $request->input('user_id'),
            'user_subscription_plan_id' => $request->input('subscription_plan_id'),
            'name' => $userSubscription['name'],
            'description' => $userSubscription['description'],
            'duration' => $userSubscription['duration'],
            'start_datetime' => $start_date,
            'end_datetime' => $end_date,
            'amount' => $userSubscription['amount'],
            'invoice_id' => '',
            'transection_datetime' => '',
            'created_by' => '1',
            'status_id' => '1', ),
array(
            'user_id' => $request->input('user_id'),
            'user_subscription_plan_id' => $request->input('subscription_plan_id'),
            'name' => $userSubscription['name'],
            'description' => $userSubscription['description'],
            'duration' => $userSubscription['duration'],
            'start_datetime' => $start_date,
            'end_datetime' => $end_date,
            'amount' => $userSubscription['amount'],
            'invoice_id' => '',
            'transection_datetime' => '',
            'created_by' => '1',
            'status_id' => '1', )
        );
        dd(UserSubscription::insert($user_subscription_array)); 
```

`UserSubscription`是我的型号名称。如果插入成功，则返回“true”，否则返回“false”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-21T23:28:23.533

也许解决这个问题的更 Laravel 方法是使用一个集合并将其循环插入模型中，利用时间戳。

```
<?php

use App\Continent;
use Illuminate\Database\Seeder;

class InitialSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        collect([
            ['name' => 'América'],
            ['name' => 'África'],
            ['name' => 'Europa'],
            ['name' => 'Asia'],
            ['name' => 'Oceanía'],
        ])->each(function ($item, $key) {
            Continent::forceCreate($item);
        });
    }
} 
```

编辑：

对不起，我的误解。对于批量插入，这可能会有所帮助，也许您可​​以制作好的播种机并对其进行一些优化。

```
<?php

use App\Continent;
use Carbon\Carbon;
use Illuminate\Database\Seeder;

class InitialSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        $timestamp = Carbon::now();
        $password = bcrypt('secret');

        $continents = [
            [
                'name' => 'América'
                'password' => $password,
                'created_at' => $timestamp,
                'updated_at' => $timestamp,
            ],
            [
                'name' => 'África'
                'password' => $password,
                'created_at' => $timestamp,
                'updated_at' => $timestamp,
            ],
            [
                'name' => 'Europa'
                'password' => $password,
                'created_at' => $timestamp,
                'updated_at' => $timestamp,
            ],
            [
                'name' => 'Asia'
                'password' => $password,
                'created_at' => $timestamp,
                'updated_at' => $timestamp,
            ],
            [
                'name' => 'Oceanía'
                'password' => $password,
                'created_at' => $timestamp,
                'updated_at' => $timestamp,
            ],
        ];

        Continent::insert($continents);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-05T00:02:12.323

从 Laravel 5.7 开始，`Illuminate\Database\Query\Builder`您可以使用 insertUsing 方法。

```
$query = [];
foreach($oXML->results->item->item as $oEntry){
    $date = date("Y-m-d H:i:s")
    $query[] = "('{$oEntry->firstname}', '{$oEntry->lastname}', '{$date}')";
}

Builder::insertUsing(['first_name', 'last_name', 'date_added'], implode(', ', $query)); 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2019-06-16T09:00:48.227

对于类别关系插入，我遇到了同样的问题并且不知道，除了在我雄辩的模型中，我使用 Self() 在 foreach 中有一个相同类的实例来记录多个保存和抓取 id。

```
foreach($arCategories as $v)
{                
    if($v>0){
        $obj = new Self(); // this is to have new instance of own
        $obj->page_id = $page_id;
        $obj->category_id = $v;
        $obj->save();
    }
} 
```

没有 "$obj = new Self()" 它只保存一条记录（当 $obj 是 $this 时）

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2019-06-14T17:43:52.937

问题已解决... 更改表以进行迁移

```
$table->timestamp('created_at')->nullable()->useCurrent(); 
```

解决方案：

```
Schema::create('spider_news', function (Blueprint $table) {
    $table->bigIncrements('id');
    $table->string('source')->nullable();
    $table->string('title')->nullable();
    $table->string('description')->nullable();
    $table->string('daterss')->nullable();

    $table->timestamp('created_at')->useCurrent();
    $table->timestamp('updated_at')->useCurrent();
}); 
```

# css - 浮动：正确弄乱了我的居中文本

> ID：12702819
> 
> 赞同：0
> 
> 时间：2012-10-03T06:17:01.950
> 
> 标签：css

当我居中的文本遇到浮动时，它使用浮动的边缘作为其新边框，而不是页面的边缘。

例如，

```
<div style="float:right; width:60px; height:60px; background-color:blue"></div>
    <h2 style="text-align:center">Section 1</h2>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.
        </p>
    <h2 style="text-align:center">Section 2</h2>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.
        </p>
</div> 
```

我怎样才能让两个h2的阵容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:20:56.747

```
<h2 style="text-align:center;margin-left:60px">Section 1</h2> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:22:55.287

现在定义`h2 margin:0;`

像这样

```
h2{
margin:0;
} 
```

***[演示](http://tinkerbin.com/z9jhkitY)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:25:33.577

添加一个`margin-right`and`margin-left`到`h2`足够大的 s 为浮动腾出空间，请参阅[http://jsfiddle.net/3QRcn/1/](http://jsfiddle.net/3QRcn/1/)。

# android - 一个接一个地动画图像

> ID：12702820
> 
> 赞同：1
> 
> 时间：2012-10-03T06:17:08.300
> 
> 标签：android, animation, viewflipper

我试图动态地将 imageViews 添加到表格布局中，我的要求是 imageView 中的图像必须一个接一个地进行动画处理，并且所有图像都应该保留在视图本身上。

但问题是图像没有一个接一个地动画化，而是整个图像集立即淡入。但我希望图像一个接一个地淡入，而这并没有发生。

请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:27:23.120

通过使用 AsyncTask 将图像一张一张地添加到视图中。

```
@Override
protected Void doInBackground(Void... params) {

    runOnUiThread(new Runnable() {
        public void run() {             
            int a =0;
            for (Integer row = 0; row < rows; row++) {

                tableRow = new TableRow(getApplicationContext());
                for (Integer col = 0; col < img; col++) {

                    image = new ImageView(getApplicationContext());
                    android.view.animation.Animation anim = animate(a);
                    /*android.view.animation.Animation anim = AnimationUtils
                                .loadAnimation(getApplicationContext(), R.anim.fadein);*/
                    image.startAnimation(anim);
                    image.setPadding(20, 20, 20, 20);

                        image.setImageResource(R.drawable.images);
                    tableRow.addView(image);
                    a++;
                }
                tableLayout.addView(tableRow);
            }
            VSC.addView(tableLayout);
            HSC.addView(VSC);
            setContentView(HSC);
        }
    });

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:25:00.230

这是我对您的建议，您可以从 android 开始`ViewFlipper`制作类似图像的动画淡入和淡出。在 ViewFlipper 示例上搜索将帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:37:40.973

是的，肯定有解决方案，您可以根据您的动画要求创建多个图像帧，然后您可以将这些图像放在可绘制文件夹中。然后使用这样的动画。 `<animation-list
xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/imvControl" android:oneshot="false"> <item android:drawable="@drawable/image1" android:duration="100" /> <item android:drawable="@drawable/image1" android:duration="100" /> <item android:drawable="@drawable/image1" android:duration="100" /> </animation-list>`

有关更多信息，请访问[此链接](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)。
祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:41:17.120

定义一个扩展动画的类，并提到您可以使用 ViewFlipper 交换图像，正如 Herry 所说

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T06:46:09.167

```
 t1.schedule(new TimerTask() {
                int i =4;
                @Override
                public void run() {
                    // TODO Auto-generated method stub

                    if(i<0){
                        i=4;
                    }
                    else
                    {
                    Message m=new Message();
                    m.arg1=i;
                    imgHandler.sendMessage(m);
                    i--;
                    }
                }
            }, 0,1000);
 Handler imgHandler=new Handler(){

        public void handleMessage(Message msg) {

            imgLogo.setImageDrawable(images[msg.arg1]);             

        }; 
```

我使用此代码一个接一个地依次显示图像

# html - CSS, (X)HTML Strict or transitional for cross-browser兼容性？

> ID：12702822
> 
> 赞同：2
> 
> 时间：2012-10-03T06:17:14.733
> 
> 标签：html, css, cross-browser

我正在从头开始制作一个网页，它需要支持尽可能广泛的浏览器市场份额。该网页将相对简单，有一些 ajax 调用将填充一些`div`s.

我应该支持哪个 (X)HTML 和 CSS 版本，我应该在严格模式还是过渡模式下编码？我应该支持的最早的IE浏览器应该是哪个？我追求最大的跨浏览器兼容性和一致性。

编辑：该网页将面向商务人士。最初的问题假设他们中的大多数人仍然使用 IE 6，但似乎我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:36:56.407

我强烈建议您使用 HTML5，即使您不会使用任何新的语义元素。

引用[Google Maps API](https://developers.google.com/maps/documentation/javascript/tutorial#HTML5)：

> ```
> <!DOCTYPE html> 
> ```
> 
> 大多数当前的浏览器会以“标准模式”呈现使用此 DOCTYPE 声明的内容，这意味着您的应用程序应该**更符合跨浏览器的兼容性**。DOCTYPE 也被设计为优雅地降级；不理解它的浏览器会忽略它，并使用“怪癖模式”来显示其内容。

而且，如果您想使用几乎所有的 web 2.0 API，那么您将在使用 XHTML Strict / Transitional 时遇到麻烦。

声明`<!DOCTYPE html>`，你会感觉很舒服。

* * *

CSS 版本并不重要，因为***现代***浏览器还不支持某些 CSS2 属性。您必须依靠此类网站来检查您认为对显示内容*至关重要的每个属性的兼容性：*

1.  [怪癖模式](http://www.quirksmode.org/compatibility.html)
2.  [我可以用吗](http://caniuse.com/)
3.  [石蕊](http://www.findmebyip.com/litmus/)

一般来说，你可以简单地谷歌“apropertyname browser support”来获得非常有用的信息。

请记住，[网站**不必**在每个浏览器中看起来都完全相同](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)，您的主要目标是使内容在“任何”条件下都可读和可用。

* * *

说到 IE，请检查自己的使用统计^(更新到 2012 年 8 月/9 月)：

*   **[StatCounter](http://gs.statcounter.com/#browser_version-ww-monthly-201209-201209-bar)** IE6: notevenlisted, IE7: 1.12%, IE8: 13.08%
*   **[W3Counter](http://www.w3counter.com/globalstats.php?year=2012&month=8)** IE6: notevenlisted, IE7: 4.60%, IE8: 10.19%
*   **[维基媒体](http://stats.wikimedia.org/archive/squid_reports/2012-08/SquidReportClients.htm)**IE6：0.99%，IE7：3.44%，IE8：8.46%

所以最多你可能会担心IE7。

您还可以为使用 IE7 及以下版本的用户创建一个“向后兼容”版本（基本上禁用 css 和 javascript），并带有[条件注释](http://www.quirksmode.org/css/condcom.html)。因此，您肯定会提供可读性，然后添加一个链接以切换回正常版本（风险自负）。

甚至大多数 API（例如 Vimeo、Facebook、Google Maps）以及库和插件等都不再适用于 IE7。或者至少它们会导致 JavaScript 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:32:49.567

支持IE8+，使用

```
<!DOCTYPE html>
<head>
 <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

并得到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:35:33.717

> 我应该支持哪个 (X)HTML 和 CSS 版本

除非您已经在使用 XML 工具链，否则 XHTML 会比较麻烦。

HTML 4 是对 HTML 的最新推荐。

HTML 5，虽然是草稿，但有一些你可以使用的特性

> 我应该在严格模式还是过渡模式下编码？

如果您正在使用带有 Strict 和 Transitional 变体的 HTML 版本，请使用 Strict，除非您需要来自 Transitional 的特定功能（这不太可能，浏览器很久以前就完成了向 1996 年推荐的过渡）。

> 我应该支持的最早的IE浏览器应该是哪个？

取决于您的目标受众对浏览器的选择（随着时间的推移会发生变化，因此任何具体的答案都会过于本地化）和预算。

> 和 CSS

不要关注 CSS 版本号。担心对特定功能的支持。

> 我追求最大的跨浏览器兼容性和一致性。

它是网络。以“好”而不是“相同”为目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T06:48:04.257

```
<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
<![endif]-->
<script type="text/javascript" src="js/html5shiv.js" ></script>
<script type="text/javascript" src="js/html5.js" ></script> 
```

过渡最好。[你可以从这个浏览器](https://github.com/aFarkas/html5shiv/zipball/master)中下载 shiv.js

也请参考这个链接[<meta http-equiv="X-UA-Compatible" content="IE=edge"> 做什么？](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge)

# c# - C# - 如何从 Sybase SQL Anywhere 11 中检索数据？

> ID：12702824
> 
> 赞同：0
> 
> 时间：2012-10-03T06:17:23.527
> 
> 标签：c#, sqlanywhere

```
Platform: visual Studio 2010
Language: C#
Framework: .NET 4.0
Project: Windows Form 
```

因此，我无法检索数据，但我已经连接。我也尝试使用**'Server Explorer'**进行连接，它可以毫无问题地正确连接和检索数据。

**“服务器资源管理器”上的设置**

```
Connection String: Driver={SQL Anywhere 11};userid=*****;servername=*****;autostop=YES;integrated=NO;filedsn=C:\*****\*****.db.dsn;commlinks='SharedMemory,TCPIP{host=}';compress=NO

Provider: `.NET Framework Data Provider for ODBC` 
```

现在，在我的源代码中，我使用的是 System.Data.Odbc；

```
Code:

String connString = @"Driver={SQL Anywhere 11};userid=*****;servername=gamca;autostop=YES;integrated=NO;filedsn=C:\*****\*****.db.dsn;debug=NO;disablemultirowfetch=NO;commlinks='SharedMemory,TCPIP{host=}';compress=NO;password=*****";
OdbcConnection myConnection = new OdbcConnection(connString);
commandString = "DELETE from AGENCY";
try {
   using (OdbcCommand cmd = new OdbcCommand(commandString, myConnection)) {
   myConnection.Open();
   cmd.ExecuteNonQuery();
   myConnection.Close();
} 
```

错误：`Error [42S02] [Sybase][ODBC Driver][SQL Anywhere]Table 'AGENCY' not found`

我也尝试过使用 OleDb 和 iAnywhere.Data.SQLAnywhere (V2)，但没有运气，我无法通过这个错误。

有人遇到过同样的问题吗？

任何意见表示赞赏，谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:33:53.730

This Query runs on Default database (e.g. Master) Add database name to your ConnString or CommandString as follow:

```
commandString = "USE MyDatabase DELETE from AGENCY"; 
```

Dont forget to replace MyDatabase with your Database name.

# php - 如何像android通知栏一样创建一个简单的栏

> ID：12702826
> 
> 赞同：0
> 
> 时间：2012-10-03T06:17:26.887
> 
> 标签：php, javascript, jquery, css

> **可能重复：**
> [Android 之类的状态栏？](https://stackoverflow.com/questions/8196327/android-like-status-bar)

我需要一些帮助：

我想创建一个“ **android 风格的通知栏**”，我们将它放在我们的**智能手机**中，可以向下拖动，然后随时向上发送。但这与**android**无关。 在拖动时，我希望加载特定页面说“x.php”。我认为 jquery 会解决这个问题，但如何解决！

任何帮助将不胜感激 。提前致谢 。

# ruby-on-rails - ROR3 : hidden_ field 安全性

> ID：12702828
> 
> 赞同：0
> 
> 时间：2012-10-03T06:17:33.293
> 
> 标签：ruby-on-rails, security, hidden-field

**我在 _form.html.erb 中有这个：**

```
 <%if current_user.role_id == 1 %>

            <div class="combo_box">
                <%= f.label :subscriber %>
                <%= f.collection_select(:user_id, User.all,:id,:name,{:include_blank=>false}, :class => 'styled')  %>
            </div>

            <div class="combo_box">
                <%= f.label :group %>
                <%= f.grouped_collection_select(:group_id, User.all,:support_agent_groups,:name,:id,:name, {:prompt => "-- Select a group --"}, :class => 'styled')  %>
            </div>

            <div class="combo_box">
                <%= f.label :role %>
                <%= f.collection_select(:role_id, Role.all,:id,:name,{:include_blank=>false}, {:class => 'styled'})  %>
            </div>

            <div class="combo_box">
                <%= f.label :subscription %>
                <%= f.collection_select(:subscription_id, Subscription.all,:id,:name, {:prompt => "-- Select a subscription --"}, {:class=>'styled'})    %>
            </div>              

        <% elsif  current_user.role_id == 6  && @user.role_id != 6 %>

            <%= f.hidden_field :user_id, :value => current_user.id %>

            <%= f.hidden_field :subscription_id, :value => current_user.subscription_id %>

            <div class="combo_box">
                <%= f.label :group %>
                <%= f.collection_select(:group_id, SupportAgentGroup.where(:user_id => current_user.id),:id,:name, {:prompt => "-- Select a group --"}, :class => 'styled')  %>
            </div>
            <div class="combo_box">
                <%= f.label :role %>
                <%= f.collection_select(:role_id, Role.where('id <> ?', 1).where('id <> ?', 6),:id,:name,{:include_blank=>false}, {:class => 'styled'})  %>
            </div>

        <% elsif  current_user.role_id == 6 %>

            <%= f.hidden_field :user_id, :value => current_user.id %>
            <%= f.hidden_field :role_id, :value => current_user.role_id %>
            <%= f.hidden_field :subscription_id, :value => current_user.subscription_id %>

            <div class="combo_box">
                <%= f.label :group %>
                <%= f.collection_select(:group_id, SupportAgentGroup.where(:user_id => current_user.id),:id,:name, {:prompt => "-- Select a group --"}, :class => 'styled')  %>
            </div>

        <% else %>

            <%= f.hidden_field :user_id, :value => current_user.user.id %>
            <%= f.hidden_field :group_id, :value => current_user.group_id %>
            <%= f.hidden_field :subscription_id, :value => current_user.user.subscription_id %>
            <%= f.hidden_field :role_id, :value => current_user.role_id %>

        <% end %> 
```

我可以在浏览器中使用 firebug 选项在检查元素上查看每个隐藏文件的值

```
<input id="user_user_id" type="hidden" value="2" name="user[user_id]" /> 
```

我可以将值更改`2`为`100/200/....`

并在提交时发布新值`100/200/...`以保存到数据库并保存在数据库中。

我是否需要检查视图中的所有条件以及控制器中的所有条件以找到合适的默认值..或使用 hidden_​​filed 解决此安全问题的任何选项。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:19:59.097

不不需要传递user_id，你可以从控制器获取current_user

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:22:57.003

正如 Amar 所说，您不需要将用户 ID 从控制器传递到控制器，因为您可以使用`current_user`会话变量中的方法获取它。

请记住，您不能相信从用户那里收到的数据，一切都可以伪造。

# rsa - Sage编程中的ZZ函数

> ID：12702837
> 
> 赞同：0
> 
> 时间：2012-10-03T06:18:20.217
> 
> 标签：rsa, sage

所以我决定学习 Sage 编程，因为它可以处理非常大的数字，这对于 RSA 加密/解密很有用。

(1) 我在关注一个例子，但我不太确定他们是如何在 ZZ() 函数中得到 100 的。

(2) 还有一个问题是有没有办法使用 sage 函数从整数到纯文本？

```
sage: m = "HELLOWORLD"
sage: m = map(ord, m); m
[72, 69, 76, 76, 79, 87, 79, 82, 76, 68]
sage: m = ZZ(list(reversed(m)), 100) ; m           <------ this line
72697676798779827668

sage: m = 72697676798779827668
sage: c = 630913632577520058415521090
sage: d = 4460824882019967172592779313
sage: n = 4951760154835678088235319297
sage: power_mod(c, d, n)
72697676798779827668                <--- how do i convert this number back to plain text
sage: power_mod(c, d, n) == m
True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:46:21.227

100 告诉您将列表中的每个元素乘以多少，以幂为单位。将其视为“基数 100”。

```
sage: ZZ([1,2,3],100)
30201
sage: ZZ([1,2,3],2)
17
sage: ZZ([1,2,3],10) # 1*10^0+2*10^1+3*10^2
321 
```

[这个问题](https://stackoverflow.com/questions/9475241/split-python-string-every-nth-character)有无数种方法可以从`ord`. 然后我们使用`chr`.

```
sage: a = 72697676798779827668
sage: ''.join([chr(int(str(a)[i:i+2])) for i in range(0, len(str(a)), 2)])
'HELLOWORLD' 
```

我同意这在可读性方面并不理想。[实际上，Sage 在其加密模块](http://www.sagemath.org/doc/reference/sage/crypto/classical.html)中还有一些其他内置方法可以在教学基础上进行加密。这也有一些内置的字母表。（我认为这不是您当前正在创建的工业级 RSA 版本。）

# python - 以下python代码中的错误是什么

> ID：12702839
> 
> 赞同：1
> 
> 时间：2012-10-03T06:18:25.863
> 
> 标签：python, nltk, stop-words

我想删除停用词。这是我的代码

```
import nltk
from nltk.corpus import stopwords
import string

u="The apple is the pomaceous fruit of the apple tree, species Malus domestica in the rose family (Rosaceae). It is one of the most widely cultivated tree fruits, and the most widely known of the many members of genus Malus that are used by humans."

v="An orange is a fruit of the orangle tree. it is the most cultivated tree fruits"

u=u.lower()
v=v.lower()

u_list=nltk.word_tokenize(u)
v_list=nltk.word_tokenize(v)

for word in u_list:
    if word in stopwords.words('english'):
        u_list.remove(word)
for word in v_list:
    if word in stopwords.words('english'):
        v_list.remove(word)

print u_list
print "\n\n\n\n"
print v_list 
```

但只删除了一些停用词。请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:18:01.420

您正在做的问题是 list.remove(x) 仅删除第**一次**出现的`x`，而不是每个 x。要删除每个实例，您可以使用`filter`，但我会选择这样的：

```
u_list = [word for word in u_list if word not in stopwords.words('english')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:33:50.140

我将通过将拆分单词列表和停用词列表转换为 a 来删除单词[`set`](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset)并计算[`difference`](http://docs.python.org/library/stdtypes.html#set.difference)：

```
u_list = list(set(u_list).difference(set(stopwords.words('english')))) 
```

这应该正确地删除停用词的出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T12:05:30.283

我使用 remove(x) 函数在一段类似的代码上苦苦挣扎。我注意到只有大约 50% 的停用词被删除了。我知道这不是来自案例（我降低了我的话），也不是来自单词周围添加的标点或其他字符（strip（））。我的理论（我是初学者）是，当您删除标记时，列表会缩小，索引和列表项会滑动，但循环会从同一个索引继续。因此，它不会在每个单词上循环。解决方案是使用不是停用词并且您想要保留的单词来增加一个新列表。

# bash - 使用 bash shell 脚本的 HTML 格式电子邮件

> ID：12702840
> 
> 赞同：1
> 
> 时间：2012-10-03T06:18:26.117
> 
> 标签：bash, shell, mailx

这是我下面的脚本，它工作正常，因为它只发送纯文本电子邮件。

所以我的问题是 - 如何修改我的以下脚本以将其作为 HTML 格式的电子邮件发送？我想在电子邮件中显示此表达式的文本颜色，`(echo "100*$TEST2/$TEST1" | bc -l)`并且`RED`只能在 HTML 格式的电子邮件中完成。这就是我想以 HTML 格式发送电子邮件的原因。任何建议都会有很大帮助。

```
#!/bin/bash

TEN_DAYS="3793274 230667"

TEST1=`echo $TEN_DAYS | awk '{print $1}'`
echo $TEST1

TEST2=`echo $TEN_DAYS | awk '{print $2}'`
echo $TEST2

mailx -s "Report" -r uname@host.com uname@host.com <<EOF

Error  Percentage: `(echo "100*$TEST2/$TEST1" | bc -l)`

EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:57:10.263

以下是使用 mailx 发送 html 类型电子邮件的一些方法

[http://www.unix.com/unix-advanced-expert-users/37480-display-html-text-body-using-unix-mailx.html](http://www.unix.com/unix-advanced-expert-users/37480-display-html-text-body-using-unix-mailx.html)

# c# - MouseUp 不会在 Grid.Children.Clear() 上被调用

> ID：12702842
> 
> 赞同：0
> 
> 时间：2012-10-03T06:18:39.020
> 
> 标签：c#, wpf, grid, mouse

我在派生自的类中有此代码`UserControl`（从Window派生时的行为相同）。该代码是一个项目中的一个非常简单的示例（隔离问题），我只想在鼠标按下和鼠标向上之间用鼠标移动一些行（我不能直接引用这些行），唯一的方法是删除它们并再次将它们添加到正确的位置。

```
protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
{
    m_Grid.Children.Clear( );
    m_Grid.Children.Add(new Button());
    base.OnMouseLeftButtonDown(e);
}

protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
{
    m_Grid.Children.Clear();
    base.OnMouseLeftButtonUp(e);
} 
```

`m_Grid`像这样声明的地方：

```
private readonly Grid m_Grid; 
```

这种形式`OnMouseLeftButtonUp`永远不会被调用。如果我删除：

```
m_Grid.Children.Clear( );
m_Grid.Children.Add(new Button()); 
```

`OnMouseLeftButtonUp`被调用。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:31:50.157

在这里，您已经设置了`Window`'s 或`UserControl`mouseUp 事件：当您执行 MouseUp 时，光标必须位于`Window`or`UserControl`的表面上，而不是在`Button`网格上的 or 上，因此它可以触发 MouseUp 事件。

要解决此问题，请添加：

```
protected override void OnPreviewMouseLeftButtonUp(MouseButtonEventArgs e)
        {
            m_Grid.Children.Clear();
            base.OnPreviewMouseLeftButtonUp(e);
        } 
```

# iphone - 在多节 UITableView 中添加行时崩溃

> ID：12702845
> 
> 赞同：0
> 
> 时间：2012-10-03T06:18:42.637
> 
> 标签：iphone, objective-c, ios, uitableview

最初我需要在 tableview 中列出 3 个项目。
单击其中任何一个时，它会显示另外 3 个项目作为所选主项目的子项目。

我正在使用的数组是

```
aryTemp = [[NSMutableArray alloc] initWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"YES", @"isExpand", [NSArray arrayWithObjects:@"One",@"Two",@"Three", nil], @"data", nil], nil];
aryTemp1 = [[NSMutableArray alloc] initWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"NO", @"isExpand", [NSArray arrayWithObjects:@"Doc", @"XML", @"PDF", nil], @"data", nil], nil];

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 3;
}
    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        int count = 0;    
        if(!boolIsExpanded)
            count = 1;
        else {
            count = [[[aryTemp objectAtIndex:0] objectForKey:@"data"] count] + [[[aryTemp1 objectAtIndex:0] objectForKey:@"data"] count];
        }
        return count;
    }

    -(void)addOrDeleteRows:(NSIndexPath *)indexPath add:(BOOL)aBool
    {
    NSMutableArray *paths = [[NSMutableArray alloc] init];

    if(boolIsExpanded)
    {
        boolIsExpanded=NO;
        for (int i=1; i<=[[[aryTemp1 objectAtIndex:0] objectForKey:@"data"] count]; i++) {
            NSIndexPath *indxPath;
            indxPath = [NSIndexPath indexPathForRow:(indexPath.row)+i inSection:indexPath.section];
            [paths addObject:indxPath];
            NSLog(@"paths : %@",paths);
        }
        intPrevIndex = indexPath.row;
        [tblView beginUpdates];
        [tblView insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationLeft];
        [tblView endUpdates];
    }
    else 
    {
         boolIsExpanded = YES;
        for (int i = 1; i <= [[[aryTemp1 objectAtIndex:0] objectForKey:@"data"] count]; i++) {
            NSIndexPath *indxPath = [NSIndexPath indexPathForRow:(indexPath.row)+i inSection:indexPath.section];
            [paths addObject:indxPath];
        }
        intPrevIndex = indexPath.row;
        [tblView beginUpdates];
        [tblView deleteRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationLeft];
        [tblView endUpdates];
    }    
    } 
```

**这个计算究竟应该如何进行？使用部分时。**

插入行后，它调用并**在 -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:1037 2012-10-03 11:37:43.955 ExpandRowsSample[1657:f803] 中**`NumberOfRow`出现错误断言失败并崩溃 **由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (6) 必须等于该节中包含的行数更新前的节 (1)，加上或减去从该节插入或删除的行数（0 插入，0 删除），加上或减去移入或移出该节的行数（0 移入，0 移动出去）。'* **

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:02:48.547

在更新表格视图期间，您还必须相应地修改其数据源，据我所知，这`- tableView:numberOfRowsInSection:`是`aryTemp`.

因此，在添加期间，您应该在行`[aryTemp addObject:...];`前进行一些调用`[tblView endUpdates];`，例如：

```
for (int i=1; i<=[[[aryTemp1 objectAtIndex:0] objectForKey:@"data"] count]; i++) {
{
    // your current code
    [aryTemp addObject:...];
}

intPrevIndex = indexPath.row;
[tblView beginUpdates];
[tblView insertRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationLeft];
[tblView endUpdates]; 
```

至于删除行，应该应用相同的概念。*

# matlab - 'cell' 类型的输入参数的未定义函数 'real'

> ID：12702850
> 
> 赞同：1
> 
> 时间：2012-10-03T06:19:08.627
> 
> 标签：matlab

我正在尝试处理数据集，计算小于给定错误率的条目的出现次数，为每个数据集（X）绘制一个条形图和出现（Y）。看来count的输出是存储在cell类型中的，bar无法识别。如何将其存储在数组中，而不是单元格类型中？

* * *

```
DATASET_SIZE = 100;
PRUN_MAX_ERROR = 2;
PRUN_MISSING_DATA = -1.000;
ERROR_RATE = 0.2;

for i=1:DATASET_SIZE
   fid = fopen(strcat('log',int2str(i),'.txt'),'r');
   C(i) = textscan(fid, '%.3f');            
   fclose(fid);
end

%% convert cell type to matrix & process data
for i=1:DATASET_SIZE   
   D = cell2mat(C(i));
   %     removing unwanted entries
   D(D == PRUN_MISSING_DATA) = [];      
   D(D > PRUN_MAX_ERROR) = [];       

   %     count number of occurence below certain error rate
   % E = [E sum(D <= ERROR_RATE)];
   E{i} = sum(D <= ERROR_RATE);
end 

figure;
bar(E); 
```

但我得到这个错误：

```
Undefined function 'real' for input arguments
of type 'cell'.

Error in xychk (line 42)
    x = real(y); y = imag(y);

Error in bar (line 54)
        [msg,x,y] =
        xychk(args{1:nargs},'plot');

Error in checkSeqEffects (line 53)
bar(E); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:05:52.013

你这里有很多问题。在解决真正的问题之前，我将首先讨论它们中的每一个。

一、线

```
D = cell2mat(C(i)); 
```

可以替换为

```
D = C{i}; 
```

圆括号 ( `()`) 指的是*元胞数组索引*，而花括号 ( `{}`) 指的是给定元胞数组索引处的元胞数组的*内容。*重要的是你要学会区别。

然后，您正在`E`循环内增长单元阵列。这意味着循环将运行得比它需要的慢。只是在循环之前声明它

```
E = cell(DATASET_SIZE,1);
for i=1:DATASET_SIZE
    ...
    E{i} = ...
end 
```

会加快速度。

然后，`i`应该避免变量的名称，因为它也表示复杂的单元。同样适用于`j`。调用循环索引`ii`or`jj`将避免 Matlab 必须查找您的意思是复杂单元（正确编写为Matlab`1i`或`1j`在 Matlab 中编写）或循环索引，这将节省一些时间，最重要的是，避免任何混淆。

现在，实际问题：`bar(E)`. 在 Matlab 命令提示符下键入`help bar`会显示：

> BAR 条形图。
> 
> ```
> BAR(X,Y) draws the columns of the M-by-N matrix Y as M groups of N
> vertical bars.  The vector X must not have duplicate values. 
> ```

这告诉您`bar()`需要一个 m×n *matrix*，并且您正在向它传递一个*cell-array*。最快的解决方法是

```
bar([E{:}].') 
```

但这将花费太长时间来解释:) 更好的方法是根本不制作`E`单元阵列（不需要）：

```
% convert cell type to matrix & process data
E = zeros(DATASET_SIZE,1);
for ii = 1:DATASET_SIZE   

   D = C{ii};

   % remove unwanted entries
   D(D == PRUN_MISSING_DATA) = [];      
   D(D > PRUN_MAX_ERROR) = [];       

   % count number of occurrences below certain error rate       
   E(ii) = sum(D <= ERROR_RATE);
end 

figure, clf, hold on
bar(E) 
```

现在`E`是一个普通的数组，所以`bar(E)`可以正常工作。

我建议您阅读元胞数组，了解何时使用它们，更重要的是，何时不使用。Stack Overflow（在“matlab”标签中）有大量问题涉及或涉及元胞数组，其中许多还讨论了它们的正确（和不正确）用法和正确（和不正确）用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:38:35.643

您是否尝试过切换这两条线？

```
 E = [E sum(D <= ERROR_RATE)];
   % E{i} = sum(D <= ERROR_RATE); 
```

第一个将制作一个普通数组，第二个将制作一个单元矩阵。可能更好走

```
E(i) = sum(D <= ERROR_RATE) 
```

即使用圆括号代替大括号。购买这假设 sum(D <= ERROR_RATE) 每次迭代都具有相同的维度。可以？你期待一个标量吗？如果您是，您可能想尝试`sum(sum(D <= ERROR_RATE))`（即您正在制作普通的 2D 条形图，而不是 3D 条形图）

# postgresql - 迁移到 UTF8 后，编码 UTF-8 的字符 0xe2809a 在“LATIN9”中不等价

> ID：12702854
> 
> 赞同：0
> 
> 时间：2012-10-03T06:19:24.710
> 
> 标签：postgresql, utf-8, character-encoding, psql

最近我们将数据库从 SQL_ASCII 迁移到 UTF8 编码。运行应用程序后，我们开始收到错误消息，例如

> 编码 UTF-8 的字符 0xc296 在“WIN1252”中没有等价物

所以我们遇到了 iconv 并且转换是在以下步骤中完成的

### 1-将现有数据库转储为

```
"C:\Program Files\PostgreSQL\9.0\bin/pg_dump.exe" --host localhost --port  5433 --username "myadmin" --format plain --encoding UTF8 --verbose --file "C:\UTF8Dump.sql" mydb 
```

### 使用 [b]iconv[/b] 进行 2 转换

```
 "C:\Program Files\GnuWin32\bin\iconv.exe"  -c  -f windows-1252 -t UTF-8 C:\UTF8Dump.sql>C:\ConvertedUTF8Dump.sql 
```

### 3 创建一个nerw UTF-encoded DB

### 4 从第 2 步导入 sql

我们摆脱了错误，但是

在我们得到的其他一些系统上

> 迁移到 UTF8 后，编码 UTF-8 的字符 0xe2809a 在“LATIN9”问题中不等价

所以我们尝试了相同的上述步骤，但不同的转换是这样的

```
"C:\Program Files\GnuWin32\bin\iconv.exe"  -c  -f ISO-8859-15 -t UTF-8  C:\UTF8Dump.sql>C:\ConvertedUTF8Dump.sql 
```

但错误仍然是

> 编码 UTF-8 的字符 0xe2809a 在迁移到 UTF8 后在“LATIN9”问题中没有等价物

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:29:55.413

你*确定*源数据库是`SQL_ASCII`？

数据库中的文本实际上是什么编码？有没有可能你混合了几种不同的编码？这对于没有强制执行任何合理编码规则的数据库并不少见。

`0xc296`in`utf-8`是[unicode U+96 START OF GUARDED AREA](http://www.fileformat.info/info/unicode/char/96/index.htm)。来自 windows-1252 源的转换似乎是一个非常荒谬的角色。

`0xe2809a`在 utf-8 中是[unicode U+201a SINGLE LOW-9 QUOTATION MARK](http://www.fileformat.info/info/unicode/char/201a/index.htm)。它在 ISO-8859-15 中无效，因此 PostgreSQL 在这里正确地产生了错误。

我想说您的数据库中可能有多个相互不兼容的编码字符串，因此没有一种转换适用于整个数据库。欢迎享受从混杂的混合编码迁移到严格的 utf-8 环境的乐趣。

或者，如果您确定您的数据库是什么编码并且知道它是一致的，您可以尝试不`pg_dump`使用数据库，然后编辑转储并添加/更改语句以反映新编码。如果您在 之后没有更改转储中的，那可能很好地解释了问题，因为您会告诉 Pg 将您转换为的数据解释为好像它是或其他的一样。`--encoding``iconv``SET client_encoding``SET client_encoding``iconv``utf-8``latin-9`

# perl - 数据库 - SQL 表到 Perl 脚本

> ID：12702857
> 
> 赞同：-1
> 
> 时间：2012-10-03T06:19:31.823
> 
> 标签：perl

我在 SQL 中创建了一个“事务”表，如下所示：

```
TransactionID    Date           AccountNumber   Type    Amount  
657520           02-07-1999     016901581432    Debit   16000  
657524           02-07-1999     016901581432    Debit   13000  
657538           09-07-1999     016901581432    Credit  11000  
657548           18-07-1999     016901581432    Credit  15500  
657519           02-07-1999     016901581433    Debit   12000  
657523           02-07-1999     016901581433    Credit  11000  
657529           03-07-1999     016901581433    Debit   15000  
657539           10-07-1999     016901581433    Credit  10000  
657541           11-07-1999     016901581434    Debit   12000  
657525           03-07-1999     016901581434    Debit   15000  
657533           05-07-1999     016901581434    Credit  12500 
```

我必须使用数据库找到每个帐户的总借方金额和总贷方金额。我的代码是这样的：

```
#!/usr/bin/perl
use DBI;
use strict;
use warnings;
print "content-type:text/html\n\n";
$dbh = DBI->connect('dbi:___','prithvi','*password*') or die "Couldn't connect";
my %trans;
my $tran = $dbh->prepare("SELECT * FROM `transaction` LIMIT 0 , 11");
$tran->execute;
while(my @row = $tran->fetchrow_hash) 
{
    my $tran = join ',', @row;
    $trans{$tran[2]}{$tran[3]} += $tran[4];
}
foreach my $acno(sort keys %trans) 
{
print "Total Amount deposited and total amount credited for Account Number $acno is Rs.$trans{$acno}{'Debit'} and Rs.$trans{$acno}{'Credit'}\n";
}
$tran->finish;
$dbh->disconnect; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:53:41.653

如果你添加`use strict`，`use warnings`你可能会得到一些关于需要在下面的代码中声明 @tran 的反馈：

```
while(my @row = $tran->fetchrow_hash) 
{
    my $tran = join ',', @row;
    $trans{$tran[2]}{$tran[3]} += $tran[4];
} 
```

$tran 是`657520,02-07-1999,016901581432,Debit,16000`当您尝试将其用作数组时。

最后使用 Data::Dumper 显示您放入 %trans 的内容：

```
use Data::Dumper;
print Dumper(\%trans); 
```

你的意思是：

```
while(my @row = $tran->fetchrow_array) 
{
    $trans{$row[2]}{$row[3]} += $row[4];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:12:32.373

使用 SQL 得到这个答案而不是代码。

```
SELECT AccountNumber, Type, SUM(Amount) FROM transaction GROUP BY AccountNumber, Type; 
```

# iphone - StringWithFormat 返回非 NSString

> ID：12702863
> 
> 赞同：2
> 
> 时间：2012-10-03T06:20:04.663
> 
> 标签：iphone, objective-c, nsstring, stringwithformat

我有`StringWithFormat`不工作的问题。调试器说返回的字符串不是一个`NSString`（并且它不是空的），因此我的调用应该`NSString`与方法选择器不匹配，我的应用程序崩溃了。

我正在测试 XCode 4.5 iOS 6 设置（旧项目，没有子项目）。

此代码将返回不是`NSString`：

```
[NSString stringWithFormat:@"\nTest to %@ (%@)\n", target, ipString] 
```

如果我在格式字符串中插入一个空格作为第一个字符，则结果为`NSString`，即以下工作：

```
[NSString stringWithFormat:@"\nTest to %@ (%@)\n", target, ipString] 
```

此代码块也不起作用。它返回的东西不是`NSString`. 我在这里做错了什么？

```
int TTL = 1;
NSString *ttl = [NSString stringWithFormat:@" \n# %d", TTL] ;
TTL++;
[self textToParent:  ttl];     // Program crashes here. Debugger show ttl not NSString.
TTL--; 
```

错误信息是`ttl = (__NSCFString *) 0xwhatever @<variable is not NSString>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:31:53.340

尝试将前两行更改为..

```
 int TTL = 1;
        NSString *ttl = [NSString stringWithFormat:@" \n# %@",[NSNumber numberWithInt:TTL] ] ;

   TTL++;
   [self textToParent: (NSString *) ttl];     //  Change here.
   TTL--; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:37:24.873

试试下面的代码...

```
int TTL = 1;
NSString *ttl = [NSString stringWithFormat:@" \n# %@",[NSNumber numberWithInt:TTL]] ;
[ttl retain];
TTL++;
[self textToParent:  ttl];
TTL--; 
```

希望这可以帮助你...

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T09:33:41.620

考虑到您的调试器可能并不完美。单击调试器中的变量，右键单击“打印描述”。

# git - 当 Jenkins Slave 作为 Windows 服务运行时，Git 不起作用

> ID：12702865
> 
> 赞同：0
> 
> 时间：2012-10-03T06:20:10.233
> 
> 标签：git, jenkins

如果我们将 Jenkins Slave 作为 Windows 服务运行，则 git 无法获取并出现错误

```
The server's host key is not cached in the registry 
```

该服务作为我们使用 putty 设置的特定域用户运行。如果我们使用该用户登录机器，Git Bash 无需密码即可工作，因此 SSH 密钥设置正确。

我们发现，如果您使用命令行在 User 下启动 Jenkins Slave，我们会在构建工作时设置 ssh 密钥。我们使用的命令是

```
javaws http://brick:8083/computer/nsw-buildbox1/slave-agent.jnlp 
```

这工作得很好。我怀疑尽管该服务仍然以相同的域用户身份运行，但在找不到 .ssh 文件夹的地方存在一些不同的地方。有没有人遇到过这个问题并知道解决方法。Windows 服务在哪里寻找已知主机？

即使知道我们有一个解决方法，这意味着如果您重新启动机器，构建将无法工作，直到您登录并运行启动命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-04T02:46:15.273

我知道回答这个问题可能为时已晚，但这是您问题的根本原因。

*   当您通过 **javaws [http://brick:8083/computer/nsw-buildbox1/slave-agent.jnlp](http://brick:8083/computer/nsw-buildbox1/slave-agent.jnlp)**运行从属设备时 ，您实际上是以当前登录用户身份运行从属设备，系统已经为当前用户正确缓存了您的 ssh 会话。

*   但是，当您选择将其安装为服务时，您的 Windows 服务实际上并未以当前用户身份运行。这就是为什么您总是收到此错误“服务器的主机密钥未缓存在注册表中”。是的，您从未以服务用户的身份连接到服务器。要修复它，您必须手动使服务以当前用户身份运行。Do

    1.  运行“服务.msc”
    2.  找到“Jenkins Slave”服务
    3.  属性-> 登录-> 选择您当前的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:32:31.193

This is not the `.ssh` folder, but the registry.

[Mount the registry hive of that user](http://www.osattack.com/walk-through/tutorial-how-to-mount-a-registry-hive/), and search under `HKEY_CURRENT_USER\Software\SimonTatham\Putty\SshHostKeys`. Copy your host key there, it should contain the host key.

# android - 如何使用纯 C++ 代码强制使用 NDK 的横向模式

> ID：12702868
> 
> 赞同：4
> 
> 时间：2012-10-03T06:20:17.910
> 
> 标签：android, opengl-es, android-ndk, opengl-es-2.0

一般来说，它工作正常。但如果我锁定屏幕，并等待 APP_CMD_LOST_FOCUS 发生，然后我解锁屏幕。它变成肖像！但我发现 egl buff 仍然是横向设置，并且所有坐标都更大。

我的 AndroidManifest.xml 设置：

```
<activity android:name="android.app.NativeActivity"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="landscape"
        android:clearTaskOnLaunch="true">
    <meta-data android:name="android.app.lib_name"
            android:value="sunred" />

    <intent-filter>
          <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

</activity> 
```

我的 egl 初始化 C++ 代码

```
int engine_init_display(OSCONTEXTENGINE* pEngine, const DISPLAY_CONFIG* pConfig)
{
    // initialize OpenGL ES and EGL
    /*
     * Here specify the attributes of the desired configuration.
     * Below, we select an EGLConfig with at least 8 bits per color
     * component compatible with on-screen windows
     */
    const EGLint attribs[] =
    { EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
            EGL_BLUE_SIZE, 8, EGL_GREEN_SIZE, 8, EGL_RED_SIZE, 8,
            EGL_DEPTH_SIZE, 8, EGL_NONE };
    EGLint w, h, dummy, format;
    EGLint numConfigs;
    EGLConfig config;
    EGLSurface surface;
    EGLContext context;

    EGLDisplay display = eglGetDisplay(EGL_DEFAULT_DISPLAY);

    eglInitialize(display, 0, 0);

    //eglBindAPI(EGL_OPENGL_ES_API);
    /* Here, the application chooses the configuration it desires. In this
     * sample, we have a very simplified selection process, where we pick
     * the first EGLConfig that matches our criteria */
    EGLBoolean bres = eglChooseConfig(display, attribs, &config, 1,
            &numConfigs);

    if (!bres)
    {
        __android_log_print(LOGINFO_ERROR, "engine_init_display",
                "numConfigs = %d", numConfigs);
    }

    /* EGL_NATIVE_VISUAL_ID is an attribute of the EGLConfig that is
     * guaranteed to be accepted by ANativeWindow_setBuffersGeometry().
     * As soon as we picked a EGLConfig, we can safely reconfigure the
     * ANativeWindow buffers to match, using EGL_NATIVE_VISUAL_ID. */
    eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &format);

    ANativeWindow_setBuffersGeometry(pEngine->m_app->window, 0, 0, format);

    surface = eglCreateWindowSurface(display, config, pEngine->m_app->window,
            NULL);
    const EGLint ai32ContextAttribs[] =
    { EGL_CONTEXT_CLIENT_VERSION, 2, EGL_NONE };

    context = eglCreateContext(display, config, NULL,
            ai32ContextAttribs);

    if (eglMakeCurrent(display, surface, surface, context) == EGL_FALSE)
    {
        LOGW("Unable to eglMakeCurrent");
        return P_ERR;
    }

    eglQuerySurface(display, surface, EGL_WIDTH, &w);
    eglQuerySurface(display, surface, EGL_HEIGHT, &h);

    pEngine->m_EglDisplay = display;
    pEngine->m_EglContext = context;
    pEngine->m_EglSurface = surface;
    pEngine->m_iWidth = w;
    pEngine->m_iHeight = h;

    return 0;
} 
```

当 APP_CMD_INIT_WINDOW 发生时，我调用 engine_init_display。

有什么方法可以使用 C++ 强制将其设置为横向模式吗？

渲染帧：

工作正常：

```
pEngine->m_iWidth = 960;
pEngine->m_iHeight = 540; 
```

锁屏 -> APP_CMD_LOST_FOCUS -> 解锁屏幕

```
pEngine->m_iWidth = 540;
pEngine->m_iHeight = 960; 
```

窗户变成纵向！但是egl buff仍然是横向设置，并且所有坐标都更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:18:00.450

当你得到 APP_CMD_CONFIG_CHANGED 时，尝试做另一个初始化：

```
 case APP_CMD_CONFIG_CHANGED:
        if (engine->app->window != NULL && ((engine->width != ANativeWindow_getWidth(app->window)) || (engine->height != ANativeWindow_getHeight(app->window)))) {
            engine_handle_cmd(app, APP_CMD_TERM_WINDOW);
            engine_handle_cmd(app, APP_CMD_INIT_WINDOW);
        }
        break; 
```

（NativeActivity 示例代码中的变量名称等。）您最终会在唤醒时经历多次 init；如果这是一个问题，你也可以做惰性初始化，只是使 APP_CMD_CONFIG_CHANGED 和 APP_CMD_INIT_WINDOW 中的配置无效。

这是来自实时代码；在我们的测试中，它在 2.3 及更高版本中大约 99% 的时间都有效（之前未经测试），但在极少数情况下从锁定屏幕启动程序然后解锁会导致不调用 CONFIG_CHANGED 的竞争条件我们醒来时被困在风景中。对于我们的游戏，这不是用户代码路径（从锁定屏幕启动），所以我没有进一步调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T16:11:21.910

如果有人仍然对设置请求的屏幕/活动方向的纯原生解决方案感兴趣，请使用下面的代码。

有关相关 JAVA 方法的更多信息：

[https://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int)](https://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation(int))

```
void set_requested_screen_orientation(struct android_app * app, int an_orientation){

    JNIEnv * jni;
    app->activity->vm->AttachCurrentThread(&jni, NULL);
    jclass clazz = jni->GetObjectClass(app->activity->clazz);
    jmethodID methodID = jni->GetMethodID(clazz, "setRequestedOrientation", "(I)V");
    jni->CallVoidMethod(app->activity->clazz, methodID, an_orientation);
    app->activity->vm->DetachCurrentThread();

} 
```

# perl - 如果我们在 Perl 中不关闭文件会有多严重？

> ID：12702869
> 
> 赞同：6
> 
> 时间：2012-10-03T06:20:18.507
> 
> 标签：perl, file-io, file-handling

如果我们在 Perl 中不关闭文件会有多严重？如果我在同一个程序中再次访问它会影响程序或文件吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T08:57:10.523

全局文件句柄将一直存在，直到您的程序退出。这可能很糟糕，但是由于您可能无论如何都不应该使用全局文件句柄，因此这不是问题。

当它们的范围离开/它们的引用计数下降到零时，带有 d 的`my`词法文件句柄。`close`

如果重新使用文件句柄的名称，则前一个文件句柄是`close`d 隐含的。以下脚本重用相同的文件句柄来打印任意数量文件的前五行：

```
my $fh;
foreach my $filename (@ARGV) {
  open $fh, "<", $filename or die "Can't open $filename";  # $fh is re-used
  print scalar <$fh> // next for 1 .. 5;                   # // is the defined-or
} 
```

处理文件时，明确关闭 FH 并不重要。但是，在进行 IPC 时，这一点至关重要。关闭管道的写入端表示读取端的 EOF。

ing时`fork`，应关闭所有未使用的文件句柄，因为它们在分叉时会重复。这意味着在一个进程中关闭管道可能不会发送所需的 EOF，因为同一管道在相关进程中仍处于打开状态。

这是一个演示`close`IPC 重要性的程序：

```
pipe my $out, my $in or die $!;

if (fork()) {  # PARENT
  close $out;                            # close unused handle    (important!)
  select $in;
  $| = 1;                                # set $in to autoflushed (important!)
  $SIG{PIPE} = sub {die "Parent"};       # die, when the pipe is closed
  print ++$i, "\n" and sleep 1 while 1;  # print one number per second
} else {       # CHILD
  close $in;                             # close unused handle
  print scalar <$out> for 1 .. 5;        # read numbers 1 to 5 from the pipe
  close $out;                            # close the pipe (and trigger SIGPIPE)
  sleep 5;                               # wait, then exit
  die "Child";
} 
```

该程序的输出是数字 1 到 5。然后子进程关闭管道，`SIGPIPE`在父进程中触发。当父母死亡时，孩子会在周围徘徊 5 秒钟，直到它也死去。

这是有效的，因为父级关闭了管道的读取端。如果`close $out`从父级中删除，则`SIGPIPE`不会被触发，并且程序会*无限*打印数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T06:23:18.230

如果您不关闭文件，您的程序可能会用完可用的文件描述符。

人perlfunc：

```
close
           Closes the file or pipe associated with the filehandle, flushes the IO 
           buffers, and closes the system file descriptor. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:48:58.493

一些输出错误可能会延迟到文件关闭。因此，关闭文件*并*检查返回值通常是一个好习惯。如在

```
# open (my $fd, ">", $fname) somewhere upstream
close $fd 
    or die "Couldn't finish writing to $fname: $!"; 
```

除此之外，程序将在退出时愉快地关闭全局文件句柄，并在它们离开范围时关闭词法文件句柄。

# c# - 如何从文件夹中的视频中捕获缩略图

> ID：12702873
> 
> 赞同：0
> 
> 时间：2012-10-03T06:20:28.687
> 
> 标签：c#, asp.net

我正在创建一个类似于 youtube 的网站，因此在将视频（将采用 .flv 格式）上传到项目的文件夹中后，必须从相应的视频中捕获缩略图。这里我正在使用 asp 设计我的页面。网络 & c#...

我从网上得到了一些代码，但它只能工作 2-3Mb 大小的视频......

任何人都可以帮助我处理大型文件的代码..

这是我的代码..

```
using System;
using System.Data;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Text;
using All4DotNet;

namespace LiveStreaming
{
public class Class1
{
    public static void GrabSingle_Thumb()
    {
        //Declare object of class MediaManagerPro
        MediaManagerPro oMediaManagerPro = new MediaManagerPro();

        //Get the rooth path
        string strRootPath = HttpContext.Current.Server.MapPath(HttpContext.Current.Request.ApplicationPath);

        //set the directory path info for ffmpeg file
        oMediaManagerPro.FFMPEG_Path = HttpContext.Current.Server.MapPath("~\\ffmpeg\\ffmpeg.exe");

        //Set source file info
        oMediaManagerPro.SourceFile_Path = strRootPath + "Videos";
        oMediaManagerPro.SourceFile_Name = "HelloWorld.flv";

        //set output file info
        oMediaManagerPro.OutputFile_Path = strRootPath + "Images";

        //Single Thumb - Properties available in free version
        oMediaManagerPro.Frame_Time = "5";
        oMediaManagerPro.Image_Format = "jpg";
        oMediaManagerPro.Image_Name = "Image_" + DateTime.Now.Ticks;

        ////Single Thumb - Properties available in full version
        //oMediaManagerPro.Width = 320;
        //oMediaManagerPro.Height = 240;

        //grab thumbnails
        MediaInfo oMediaInfo = oMediaManagerPro.Grab_Thumb();

        #region Print Output Information
        StringBuilder strOutputInfo = new StringBuilder();
        strOutputInfo.Append("Image Created = " + oMediaInfo.File_Name + "<br />");
        HttpContext.Current.Response.Write(strOutputInfo);
        #endregion
    }
  }
} 
```

我从[http://www.helpprogrammers.com/csharpsample.aspx得到这段代码](http://www.helpprogrammers.com/csharpsample.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:27:08.587

好吧，这似乎是一个选项，它一直有效，FFMPEG 是我们可以信赖的解决方案。您还可以尝试 FFMPEG 的托管版本，也就是[codeplex](http://winffmpeg.codeplex.com/)上的 Win-FFMPEG。这可能会有所帮助。

# ruby-on-rails - Sprockets、SASS 和 IE 的 MS-filter（一个新的蓝屏死机）

> ID：12702874
> 
> 赞同：0
> 
> 时间：2012-10-03T06:20:34.937
> 
> 标签：ruby-on-rails, sass, sprockets

希望我设法诱使您使用 BSOD 标题 =)

我使用了一个线性梯度混合，它的语法是这样的：

```
+linear-gradient(top, #ffffff, #f7f7f7) 
```

**预编译后**在 IE 中生成

 **```
progid:DXImageTransform.Microsoft.gradient(startColorstr="#fff", endColorstr="#f7f7f7",GradientType=0 ) 
```

这会在 IE 8/9 中生成一个丑陋的蓝黑条，因为 IE 拒绝采用 3-char 十六进制代码

（嘿伙计，白色和#ffffff 很好，不要问我为什么。蓝色/黑色条来自 IE 的默认设置，如果它无法识别语法，则使用蓝色/黑色作为颜色）。

我的问题是，如何`rake assets:precompile`不压缩字符颜色代码？我希望在编译时尽可能地缩小，但不插入我的颜色代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:03:37.340

SASS 有一个内置函数，称为`ie-hex-str`.

以我的例子为例：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="#{ie-hex-str(nth($full, 1))}", endColorstr="#{ie-hex-str(nth($full, 2))}",GradientType=0 ); 
```

我认为一般问题是 IE 8/9 不接受任何需要 alpha 通道的短十六进制，任何与不透明度有关的东西。相反，您可以为其指定一个 8 字符的十六进制代码。**

# php - “死”和“退出”的区别

> ID：12702875
> 
> 赞同：15
> 
> 时间：2012-10-03T06:20:37.783
> 
> 标签：php, exit, die

> **可能重复：**
> [PHP 中 die() 和 exit() 的区别是什么？](https://stackoverflow.com/questions/1795025/what-are-the-differences-in-die-and-exit-in-php)

我对`die`和的区别感到非常困惑`exit`。

大多数程序员`die`都是这样使用的。

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');  //don't see mysql_* problem it is just example
if (!$link) {
    die('Could not connect: ' . mysql_error());
} 
```

并`exit`像这样使用

```
$filename = '/path/to/data-file';
$file = fopen($filename, 'r')
   or exit("unable to open file ($filename)"); 
```

根据那里的功能，我认为没有任何区别，因为两者都终止了脚本的执行。

我的问题是

> 1）在这些示例中，我可以将 die 与 exit 互换，反之亦然？
> 
> 2）以及这些之间的区别。

干杯...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T06:21:45.603

根据[Die](http://php.net/die)它*相当于 exit*。所以是的，你可以互换它们。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-03T06:38:16.770

使用命令行时，

```
die("Error"); 
```

将打印到“错误”`STDOUT`并以错误代码退出`0`。

如果您想以错误代码退出`1`，您必须：

```
fwrite(STDERR, "Error");
exit(1); 
```

从命令行或 shell 脚本执行 php 脚本时它可能很有用，并且您想查看脚本是否以非零退出代码终止。

这是我能想到的区别之一。

PS 以上信息来自 php.net/exit

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-03T06:35:22.253

die() 和 exit() 函数之间没有区别。它们都相同并且工作相同。

另一个问题是，如果它们相同，为什么 php 会保留这两个函数。这两个函数都是彼此函数的别名。

由于 API 和保持向后兼容性，这两个函数都被保留了。

这里还有一个例子：

is_int() 和 is_integer() 也是一样的。

PHP 中有很多函数可以用多个名称调用。在某些情况下，多个名称中没有首选名称，例如 is_int() 和 is_integer() 一样好。但是，有些函数由于 API 清理或其他原因而更改了名称，并且旧名称仅保留为别名以实现向后兼容性。使用这些别名通常不是一个好主意，因为它们可能会被淘汰或重命名，这将导致脚本不可移植。提供此列表是为了帮助那些想要将旧脚本升级到新语法的人。

您可以在以下 URL 上找到别名功能的完整列表：

[http://php.net/manual/en/aliases.php](http://php.net/manual/en/aliases.php)

愿这对你有帮助:)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-03T06:31:54.500

`die`是`exit`函数的别名。

php 中有许多函数别名，这是由于语言如何演变、演变和克服它的 - [http://www.php.net/manual/en/aliases.php](http://www.php.net/manual/en/aliases.php)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-03T07:15:36.207

die 将参数打印到 STDOUT，而不是 STDERR（grep 或 2>/dev/null 将帮助您测试它​​） die 返回 shell 退出代码为 0，但 exit 可以返回其他代码让我们在 PHP 中定义 die 完全模拟：

```
function mydie($str){
  echo $str.PHP_EOL;
  exit(0);
} 
```

# python - MacPorts 安装后，OpenCV 模块在 Python 中失败（退出代码 139）

> ID：12702879
> 
> 赞同：2
> 
> 时间：2012-10-03T06:21:24.833
> 
> 标签：python, macos, opencv, module

我使用 macports 安装了 opencv，但是当我尝试使用它时 Python 崩溃了：

进程以退出代码 139 结束

我的 PyCharm IDE 表明 cv2 是一个失败的模块。

失败的模块 Python 2.7.1 (/System/Library/Frameworks/Python.framework/Versions/2.7/bin/python) cv2 更新模块或生成器的新版本时，将再次尝试为上述模块生成骨架可用的

我的 MacPorts 安装带有 python 2.7 绑定的 opencv 很顺利，所以我不确定是什么导致了这个错误。我假设 Python 能够导入该库，但不知何故该库或其依赖项失败了。

在安装时，我确保首先安装了 numpy（请参阅：[如何使用 MacPorts 为 OpenCV 安装 Python 2.7 绑定](https://stackoverflow.com/questions/8410443/how-to-install-python-2-7-bindings-for-opencv-using-macports/8547012)）：

*sudo 端口安装 opencv +python27*

我还在 /usr/local 中为 dylib 建立了软链接，因为 MacPorts 将它们安装在 /opt/local 中。（请参阅：[如何使用 MacPorts 为 OpenCV 安装 Python 2.7 绑定](https://stackoverflow.com/questions/8410443/how-to-install-python-2-7-bindings-for-opencv-using-macports/8547012)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T08:01:02.633

我能够通过在本地构建源而不是使用 MacPorts 来解决问题。

[从http://sourceforge.net/projects/opencvlibrary/](http://sourceforge.net/projects/opencvlibrary/)下载 OpenCV 源代码

然后按照 CMake 构建的说明进行操作：http: [//opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)

如果您没有安装 CMake，请使用 MacPorts 安装它：*sudo port install cmake*

您需要在 MacOSX 上安装 C++ 编译器，例如 Xcode 3.2 或更高版本

在 OpenCV 文件夹中，

*cmake -G "Unix Makefiles"*

然后，

*使-j8*

*须藤使安装*

请务必将 /usr/local/lib/python2.7/site-packages 添加到您的 PYTHONPATH。

现在运行以下程序：

```
def main():

 try:
     import cv2
 except ImportError:
     print "cv2 is not installed"
     exit();
 print "looks like its installed " 
```

# c# - 如何知道富文本框中的文本 ix 是否被替换

> ID：12702883
> 
> 赞同：0
> 
> 时间：2012-10-03T06:21:49.450
> 
> 标签：c#, richtextbox

这是我使用的代码：

```
Richtextbox.Text = Richtextbox.Text.Replace(ReplaceOldWord, ReplaceNewWord); 
```

我怎么知道旧词是否被新词替换......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:33:57.660

第一种方法是检查文本是否更改：

```
 String text = Richtextbox.Text.Replace(ReplaceOldWord, ReplaceNewWord);
    if(RichTextBox.Text != text)
    {
        Richtextbox.Text = text;
        DoSomething();
    } 
```

第二种是使用[TextChanged Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)。仅当富文本框文本更改时才会触发此事件。

```
public Form()
{
    InitializeComponent();
    RichTextBox.TextChanged += Richtextbox_TextChanged;
}

private void Richtextbox_TextChanged(object sender, EventArgs e)
{
    DoSomething();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:29:16.647

我不确定这一点，但如果你有一个文本框，我认为你有 GUI，只需尝试在那里打印单词或使用 a`streamwriter`将单词保存在文本文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:29:28.877

如果会[`String.Contains`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)在您的替换之前调用 - 如果它返回 true 旧单词，如您的 RichTextBox 中的：

```
var replaced = Richtextbox.Text.Contains(ReplaceOldWord); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T06:50:47.993

你可以这样写代码：

```
richTextBox1.Text = richTextBox1.Text.Replace("old", "new");
if (richTextBox1.Text.Contains("old"))
{
  MessageBox.Show("Not replaced");
  //further actions
} 
```

# networking - 代理服务器和普通服务器有什么区别？

> ID：12702885
> 
> 赞同：7
> 
> 时间：2012-10-03T06:21:59.230
> 
> 标签：networking

服务器的职责是获取请求并对请求做出适当的响应。那么，代理服务器的职责是什么？服务器和代理服务器之间是否有任何关系（即，如果服务器过载，则代理服务器将伪装成服务器）？如果不是这样，那么服务器过载时的解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T06:34:48.230

代理服务器的职责是代表您联系服务器，请求操作并将响应返回给您。

这适用于，例如，当不可能与服务器建立直接连接时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T07:07:51.060

总的来说，Serge 的回答是正确而简洁的，我相应地对其投了赞成票。

稍微扩展一下 Serge 的定义……因为您的问题涉及服务器之间的关系，听起来您可能正在考虑一种称为**反向代理**的代理服务器类别。

首先让我们快速定义[正向和反向代理](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#forwardreverse)。一般来说，当使用“转发”代理时，客户端知道目标服务器，并要求代理服务器将请求转发到该已知服务器。相反，当使用“反向”代理时，客户端不知道目标服务器是什么。反向代理被设置为无形地将请求转发到执行实际工作的幕后服务器，然后反向代理传递响应。

反向代理非常常用，原因有很多：

1.  隐藏实际服务器以防止直接访问 Internet 可提高您的安全性。
2.  您可以在代理处“终止” SSL，这意味着在该点解密请求，因此 Web 服务器不必执行计算成本高昂的任务。
3.  代理可以充当“负载平衡器”，在执行工作的服务器池之间分配请求，因此您的服务可以更好地扩展。
4.  您可以在代理缓存内容，大大加快对重复请求的响应。
5.  您可以非常快速地提供静态内容，但仍然可以混合由应用程序服务器生成的动态生成的内容。

希望这能澄清“服务器”和“代理服务器”之间的关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T07:05:54.820

由于代理服务器和普通服务器只是计算机，它们之间没有区别，但区别在于它们提供的功能。基本上，代理服务器充当客户端和请求服务器之间的中介，而普通服务器非常直接。当您从普通服务器查看站点时，您的 IP 地址会被识别，并且您的位置很容易被识别。另一方面，当您通过代理服务器时，您的 IP 地址会被伪装或更改，从而使您变得神秘而短暂，这在大多数情况下是非法的。

# html - 带图片链接的 Onclick

> ID：12702888
> 
> 赞同：4
> 
> 时间：2012-10-03T06:22:03.297
> 
> 标签：html, css, image, hyperlink, href

我想创建一个菜单，当鼠标悬停和点击时会改变。

但是，我的 onclick 只会在单击时变为空白。

我发现如果我删除 a href，onclick 功能就会起作用。

有谁知道如何解决这个问题？

```
<a href="{storeurl}?act=aboutus">
  <img src="skins/sunlift/styleImages/navbar_pic/aboutus_n.jpg"
       onclick="this.src='skins/sunlift/styleImages/navbar_pic/aboutus_h.jpg'"
       onmouseover="this.src='skins/sunlift/styleImages/navbar_pic/aboutus_h.jpg'"
       onmouseout="this.src='skins/sunlift/styleImages/navbar_pic/aboutus_n.jpg'"/>
</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T06:25:51.763

`return false;`在回调函数末尾添加：

```
<a href="{storeurl}?act=aboutus"><img src="skins/sunlift/styleImages/navbar_pic/aboutus_n.jpg"
                                                               onclick="this.src='skins/sunlift/styleImages/navbar_pic/aboutus_h.jpg'; return false;"
                                                               onmouseover="this.src='skins/sunlift/styleImages/navbar_pic/aboutus_h.jpg'"
                                                               onmouseout="this.src='skins/sunlift/styleImages/navbar_pic/aboutus_n.jpg'"
                                                              /></a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T06:25:47.093

您可以为此使用 CSS。示例`html`：

```
<ul>
    <li><a href="#n">Whisky</a></li>
</ul> 
```

示例`css`：

```
ul a {
  display: block;
  background: url('skins/sunlift/styleImages/navbar_pic/aboutus_n.jpg') no-repeat;
}

ul a:active,
ul a:focus {
  background: url(skins/sunlift/styleImages/navbar_pic/aboutus_h.jpg) no-repeat;
}

ul a:hover {
  background: url('skins/sunlift/styleImages/navbar_pic/aboutus_h.jpg') no-repeat;
} 
```

演示：http: [//jsfiddle.net/FakeHeal/VtZVz/3/](http://jsfiddle.net/FakeHeal/VtZVz/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-31T13:52:11.507

你可以在没有 jquery 库的情况下做到这一点

只需简单的 javascript

```
 <html>
  <head>
  <script>
  function myFunction()
  {
   alert("Hello World!");
  }
  </script>
 </head>

  <body>
  <img src="test.png" onclick="myFunction()">
  </body>
  </html> 
```

# algorithm - 活动安排

> ID：12702891
> 
> 赞同：-1
> 
> 时间：2012-10-03T06:22:10.813
> 
> 标签：algorithm

给你一组*n*个工作。每个工作都与开始时间和结束时间相关联，两者都表示为整数，以及您将从中获得的利润。您必须确定要从事哪些工作才能使利润最大化，请记住，任何时候只能完成一项工作。有没有比**O(n ² )**效率更好的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:00:26.380

您描述的问题称为加权间隔调度，可以在 O(nlogn) 步骤中解决 - 如果作业已经排序，甚至可以在 O(n) 中解决。

快速 Google 搜索将为您提供所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:10:34.677

算法：

给定集合 S = {I1,I2,...,In}：

*   根据开始时间从低到高对S中的区间进行排序。

现在我们已经订购了集合 {J1,J2,...,Jn}。（以 W1,W2,...,Wn 作为利润）

我们将 a(i) 定义为最小索引 k，这样 Jk 的开始时间高于 Ji 的结束时间。如果不存在则返回 -1。

将 D[i] 表示为集合 {Ji,Ji+1,...,Jn} 上的最大利润（如您所述）。

所以我们得到：

```
D[-1] = 0;
D[i] = maximum{D[i+1],Wi + D[a(i)]}. 
```

*   返回 D[0]。

运行：

对 n 个区间进行排序 - O(nlogn)。

构造 D - O(n)。

总运行时间 = O(nlogn)。

# mysql - 更新值在 Mysql 表中不起作用

> ID：12702899
> 
> 赞同：0
> 
> 时间：2012-10-03T06:22:56.203
> 
> 标签：mysql, updates

我有一个名为 MAXT 的表列，其中包含负浮点值和正浮点值。该列类型是`float`. 我的问题是当我在更新查询中使用此列时它没有效果。例如，

```
UPDATE TABLE1 SET MAXTCLASS='A9' WHERE MAXT = 2.5; is running successfully. But

UPDATE TABLE1 SET MAXTCLASS='A9' WHERE MAXT = -2.5; 
```

也没有更新值，也没有显示任何错误。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:44:57.877

对于测试我已经创建了示例表并测试工作正常。它在 Mysql Server 版本中得到更新：5.1.60

```
desc X11;

| Field | Type    | Null | Key | Default | Extra |
| d1    | float   | YES  |     | NULL    |       |
| id    | int(11) | YES  |     | NULL    |       |
2 rows in set (0.00 sec)

update X11 set id = 4 where d1 =-2.5;

Query OK, 1 row affected (0.06 sec)

Rows matched: 1  Changed: 1  Warnings: 0

 mysql> select * from X11;

+------+------+
| d1   | id   |
+------+------+
|  2.5 |    1 |
| -2.5 |    4 |
+------+------+

 2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:19:12.217

它也适用于我正在使用的版本（适用于 2.5 和 -2.5）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:32:21.733

感谢大家的回复。我不知道为什么其他数据库支持查询。但是现在通过将字段类型float改为十进制解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T12:21:52.317

如果您尝试更改的数据字段未标有“无符号”，请检查表结构。

如果是这样，请更改数据类型，在结构中删除此选项。

# stored-procedures - 从数据库表中检索行（查询错误）

> ID：12702908
> 
> 赞同：2
> 
> 时间：2012-10-03T06:23:27.783
> 
> 标签：stored-procedures, sql-server-2008-r2

我有一个带有表的数据库`book`（`id, name, display, priority`）

例如：

```
 ________________________________________________________
|    id    |    name    |    display    |    priority    |
 --------------------------------------------------------
|    1     |    test1   |     True      |       5        |
|    2     |    test2   |     True      |       3        |
|    3     |    test3   |     False     |       4        |
|    4     |    test4   |     True      |       1        |
|    5     |    test5   |     True      |       2        |
|    6     |    test6   |     False     |       1        |
|    7     |    test7   |     True      |       1        |
|    8     |    test8   |     True      |       4        |
|    9     |    test9   |     True      |       3        |
|    10    |    test10  |     False     |       2        |
|    11    |    test11  |     True      |       3        |
|    12    |    test12  |     True      |       5        |
 -------------------------------------------------------- 
```

我需要编写一个查询以仅获取 3 行优先级为 1 和 2 和 3 并且显示为真

我使用这个存储过程来显示优先级为 1 和 2 和 3 的书籍（最具体的书籍）

**问题**：

1.  当我尝试`select top 3 order by priority`查询获取优先级 = 1 的前 3 行时，我需要优先级 = 1 的 1 条记录和优先级 = 2 的 1 条记录和优先级 = 3 的 1 条记录。

2.  当我尝试获取时`distinct book`，不同的作品对所有记录都不是优先级的

**结果：**

我需要结果如下：

```
 ________________________________________________________
|    id    |    name    |    display    |    priority    |
 --------------------------------------------------------
|    4     |    test4   |     True      |       1        |
|    2     |    test2   |     True      |       3        |
|    5     |    test5   |     True      |       2        |
 -------------------------------------------------------- 
```

我怎样才能做到这一点？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:30:28.133

试试这个：

```
with cte as (
     select *,row_number() over(partition by priority  order by id) as row_num
     from book
     where  display='true'
     and priority in (1,2,3)
     )
select id,name,display,priority
from   cte 
where  row_num=1 
```

# ios - 应用内购买 iOS 6

> ID：12702909
> 
> 赞同：1
> 
> 时间：2012-10-03T06:23:28.327
> 
> 标签：ios, objective-c, xcode, in-app-purchase

我正在尝试为 iOS 6 实施应用内购买，并且我正在关注[Ray Wenderlich iOS 6 应用内教程](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial) 作为我的参考点。我对 Ray 的代码所做的一项重大更改是，我有一个按钮（应用程序购买中只有 1 个），用户可以点击该按钮进行购买，而不是为其制作自定义表格视图。我似乎无法让它工作，我一直在

```
-[__NSMallocBlock__ allObjects]: unrecognized selector sent to instance 0x1d5846d0
2012-10-03 00:03:25.715 myapp[752:907] *** Terminating app due to uncaught exception   'NSInvalidArgumentException', reason: '-[__NSMallocBlock__ allObjects]: unrecognized selector sent to instance 0x1d5846d0' 
```

我相信问题发生在内部

```
- (void)requestProductsWithCompletionHandler:(RequestProductsCompletionHandler)completionHandler 
```

ray 已经实现并且我已经实现了 2 个辅助类。我为这些更改的只是应用程序 ID 号。这些类称为 IAPHelper.h/m 和 RageIAPHelper.h/m

我已经发布了我认为发生错误的代码（时间不长）。如果有人可以帮助我，我已经为此工作了大约 4 个小时。先感谢您

**内部购买视图控制器**

```
 -(void) viewDidLoad
 {
 [super viewDidLoad];
 [self reload]; //Customized for my own needs compared to what Ray had
  }

-(void)reload {
_products = nil;
[[RageIAPHelper sharedInstance] requestProductsWithCompletionHandler:^(BOOL success, NSArray *products) {
    if (success) {
        _products = products;
        //[self.tableView reloadData];
    }
    //[self.refreshControl endRefreshing];
 }];
} 
```

**称为 IAPHelper.m 的内部辅助方法**

```
- (void)requestProductsWithCompletionHandler:(RequestProductsCompletionHandler)completionHandler {

// 1
 _completionHandler = [completionHandler copy];
// 2
_productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:_productIdentifiers]; // This is where I think the crash is
_productsRequest.delegate = self;
[_productsRequest start];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:48:14.843

The problem arises if

```
-(void)requestProdcutsWithCompletionHandler:(RequestProductsCompletionHandler)
    completionHandler{
    ....
{ 
```

is called twice before the first call completes. The reason is because the SKProductsRequestDelegate is used and calls the following function when it receives a response:

```
-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:
    (SKProductsResponse *)response{
    ...
    _completionHandler(YES, availableProducts)
    _completionHandler = nil;
} 
```

Notice how _completionHandler is set to nil after the response is processed. Well, when the next response comes through from the duplicate call to "requestProductsWithCompletionHandler", _completionHandler is nil and throws the exception. You can fix this two ways, either make sure you do not call that function multiple times (bad way) or put some logic to make sure the completionHandler is not in use:

```
-(void)requestProductsWithCompletionHandler:(RequestProductsCompletionHandler)completionHandler{

NSLog(@"Request Products");
if (!_completionHandler) {
    NSLog(@"CompletionHandler called, new one was made");
    _completionHandler = [completionHandler copy];

    NSMutableSet * productIdentifiers = [NSMutableSet setWithCapacity:_products.count];
        for (IAPProduct * product in _products.allValues) {
            product.availableForPurchase = NO;
            [productIdentifiers addObject:product.productIdentifier];
        }

    _productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
    _productsRequest.delegate=self;
    [_productsRequest start];
}else{
    NSLog(@"Duplicate call!");
}
} 
```

productRequest first checks to make sure _completionHanlder is nil, and if not then it ignores the request since the handler is in use.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T14:35:52.473

我决定为未来的读者发布答案而不是评论。我也在关注[Ray Wenderlich](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial "雷·温德利希")教程，但在实现中发现了一个问题，这导致了我的崩溃。

他声明了几个有问题的实例变量（至少对我而言）：

`_productIdentifiers`并且`_purchasedProductIdentifiers` 因为在单例的初始化中，他为它们分配了一个将被释放的对象。也许这是因为我的项目没有使用 ARC，但我认为没有。无论如何，如果您从他的教程中更改此代码：

```
// Store product identifiers
  /*_productIdentifiers = productIdentifiers; ----> This is the original code */
    _productIdentifiers = [[NSSet alloc]initWithSet:productIdentifiers];  // Replace with this

// Check for previously purchased products
  /*_purchasedProductIdentifiers = [NSMutableSet set]; ----> This is the original code*/
    _purchasedProductsIdentifiers = [[NSMutableSet alloc]init]; //Replace with this 
```

因为其他方法释放对象。或者您可以在声明中声明属性，然后使用对象的自动发布版本。

我希望这对某人有所帮助，我花了一段时间才弄清楚（可能是因为我只是按照教程进行操作）。

# java - 使用 RS232 电缆将可执行程序发送到硬件（微处理器）

> ID：12702913
> 
> 赞同：-1
> 
> 时间：2012-10-03T06:24:03.623
> 
> 标签：java, c++, serial-port, hardware, microprocessors

我有一个可以使用 RS232 电缆连接的硬件设备。现在根据我的需要，我必须将 java 或 c++ 程序传输到硬件的微处理器中才能执行。我有以下问题：

1.  如何将 C++/java 程序执行到硬件中？
2.  如何知道程序正在运行？
3.  如何获取接口？

任何建议将不胜感激..谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T01:46:18.897

根据我的经验，可执行文件被转换为绝对定位二进制文​​件，然后通过 RS232、USB 或 SDCard 下载到 RAM 中。可以在嵌入式设备上编写一个简单的程序，将来自 RS232 (UART) 的数据存储到内存中。

在我的工作中，我们使用 XModem 协议将可执行文件加载到内存中。我们已经将“引导加载程序”编程到闪存中。Bootloader 用于下载到 RAM，然后将 RAM 编程到 Flash。上电时，如果 Flash 内容经过验证，Bootloader 会将执行转移到 Flash。

另一种方法是使用 JTAG 连接器。这将允许您将程序下载到 RAM 中，该 RAM 可以读取 UART 并对 Flash 进行编程。

# xml - 处理 XSLT 中的特殊字符以获得格式良好的输出 XML

> ID：12702917
> 
> 赞同：1
> 
> 时间：2012-10-03T06:24:13.610
> 
> 标签：xml, xslt, special-characters

我需要将以下输入 XML 转换为所需的输出 XML 格式。在这个论坛的帮助下，我得到了如下解决方案：

**输入 XML**

```
<?xml version="1.0"?>
<dataset  xmlns="http://developer.cognos.com/schemas/xmldata/1/"  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
<metadata>
    <item name="Employee Id" />
    <item name="Employee Name" />
    <item name="Department Name" />
</metadata>
<data>
    <row>
      <value>1</value>
      <value Salutation="Dr." >John</value>
      <value>Finance</value>
    </row>
    <row>
      <value>2</value>
      <value Salutation="Mr." >Peter</value>
      <value>Admin</value>
    </row>
</data>
</dataset> 
```

**XSLT 转换**

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:c="http://developer.cognos.com/schemas/xmldata/1/" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:variable name="vNames" select="/*/c:metadata/*/@name" />
<xsl:template match="/*/c:data">
    <dataset>
        <xsl:apply-templates/>
    </dataset>
</xsl:template>
<xsl:template match="c:row">
    <row>
        <xsl:apply-templates/>
    </row>
</xsl:template>
<xsl:template match="c:row/*">
    <xsl:variable name="vPos" select="position()"/>
    <xsl:element name="{translate($vNames[$vPos], ' ', '_')}">
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:template>
<xsl:template match="@*">
    <xsl:attribute name="{name()}">
        <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template>
</xsl:stylesheet> 
```

**所需的输出 XML**

```
<?xml version="1.0" encoding="UTF-16"?>
<dataset xmlns:c="http://developer.cognos.com/schemas/xmldata/1/">
<row>
    <Employee_Id>1</Employee_Id>
    <Employee_Name Salutation="Dr.">John</Employee_Name>
    <Department_Name>Finance</Department_Name>
</row>
<row>
    <Employee_Id>2</Employee_Id>
    <Employee_Name Salutation="Mr.">Peter</Employee_Name>
    <Department_Name>Admin</Department_Name>
</row> 
```

但是，我遇到了一个打破这个解决方案的特殊情况。输入 XML 中的属性值可以以数字、特殊字符或空格开头。

**新输入 XML**

```
<?xml version="1.0"?>
<dataset  xmlns="http://developer.cognos.com/schemas/xmldata/1/"  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
<metadata>
    <item name="1Employee Id" />
    <item name=" Employee Name" />
    <item name="$Department Name" />
</metadata>
<data>
<row>
    <value>1</value>
    <value Salutation="Dr." >John</value>
    <value>Finance</value>
</row>
<row>
    <value>2</value>
    <value Salutation="Mr." >Peter</value>
    <value>Admin</value>
</row>
</data>
</dataset> 
```

由于**名称**属性值被转换为元素名称，因此上述转换失败，因为元素名称不能以数字或空格开头。在这种情况下，我想用元素名称的一些有效字符替换这些字符，`_`或者`C_`获得相同的所需输出 XML。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:08:13.793

这很容易。只需扩展您的 translate() 调用范围以涵盖问题字符*（您在属性中使用的字符，但 XML 禁止元素名称）*。

例如，改变...

```
<xsl:element name="{translate($vNames[$vPos], ' ', '_')}"> 
```

...到...

```
<xsl:element name="{translate($vNames[$vPos], ' 1$', '___')}"> 
```

* * *

## 更新

为了回应OP的澄清，这里是如何只翻译第一个字符。假设我们的第一个不安全字符的暂定元素名称是 $vName。为了说明，假设我们只是`$`将其视为唯一可能的不安全的第一个字符。我们所做的是去掉第一个字符，翻译它，然后重新添加它，就像这样......

```
<xsl:element name="{concat( translate( substring( $vName, 1, 1), '$', '_'),
                            substring( $vName, 2))}" /> 
```

...或者...

```
<xsl:element name="{translate( substring( $vName, 1, 1), '$', '_')}{substring( $vName, 2)}" /> 
```

## 笔记

如果您能够升级到 XSLT 2.0，那么使用正则表达式会变得更容易......

```
<xsl:element name="{replace( $vName, '^[$]', '_')}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:42:43.827

**这是一个不使用任何硬编码特殊字符的完整解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:c="http://developer.cognos.com/schemas/xmldata/1/"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:strip-space elements="*"/>

    <xsl:variable name="vNames" select="/*/c:metadata/*/@name" />

    <xsl:variable name="vAlpha" select=
    "concat('ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            'abcdefghijklmnopqrstuvwxyz')"/>

    <xsl:template match="/*/c:data">
        <dataset>
            <xsl:apply-templates/>
        </dataset>
    </xsl:template>
    <xsl:template match="c:row">
        <row>
            <xsl:apply-templates/>
        </row>
    </xsl:template>

    <xsl:template match="c:row/*">
        <xsl:variable name="vPos" select="position()"/>
        <xsl:variable name="vChar1" select=
         "translate(substring($vNames[$vPos],1,1),
                    translate(substring($vNames[$vPos],1,1), $vAlpha, ''),
                    '_')"/>
        <xsl:element name=
               "{$vChar1}{translate(substring($vNames[$vPos],2), ' ', '_')}">
            <xsl:apply-templates select="@*"/>
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="@*">
        <xsl:attribute name="{name()}">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<dataset  xmlns="http://developer.cognos.com/schemas/xmldata/1/"  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
    <metadata>
        <item name="1Employee Id" />
        <item name=" Employee Name" />
        <item name="$Department Name" />
    </metadata>
    <data>
        <row>
            <value>1</value>
            <value Salutation="Dr." >John</value>
            <value>Finance</value>
        </row>
        <row>
            <value>2</value>
            <value Salutation="Mr." >Peter</value>
            <value>Admin</value>
        </row>
    </data>
</dataset> 
```

**产生了想要的正确结果**：

```
<dataset xmlns:c="http://developer.cognos.com/schemas/xmldata/1/">
   <row>
      <_Employee_Id>1</_Employee_Id>
      <_Employee_Name Salutation="Dr.">John</_Employee_Name>
      <_Department_Name>Finance</_Department_Name>
   </row>
   <row>
      <_Employee_Id>2</_Employee_Id>
      <_Employee_Name Salutation="Mr.">Peter</_Employee_Name>
      <_Department_Name>Admin</_Department_Name>
   </row>
</dataset> 
```

**说明**：

1.  *我们可以通过使用双重翻译*方法来识别不属于给定字符集的所有字符，该方法首先由 Michael Kay 提出。

2.  如果名称*中*除了空格之外还有其他非法字符，则可以使用相同的双重翻译技术将任何此类（预先未知的）字符替换为所需的合法字符。

# mysql - MySQL Where Column = Distinct

> ID：12702918
> 
> 赞同：2
> 
> 时间：2012-10-03T06:24:20.627
> 
> 标签：mysql

我有以下列：

```
ID    DATE                   NAME
1     2012-10-03 12:00:00    John
2     2012-10-03 13:00:00    Adam
3     2012-10-10 10:00:00    Pete 
```

我想返回特定日期之间的所有列，但每月和每天只返回 1 列。我尝试过使用不同的语句，但我似乎无法返回所有列，只能按月和日返回（这也需要考虑时间）。

我想要的结果是：

```
ID    DATE                   NAME
1     2012-10-03 12:00:00    John
3     2012-10-10 10:00:00    Pete 
```

由于这两个列不共享相同的月份和/或日期。我知道这是一个简单的陈述。现在我正在使用：

```
SELECT id, DISTINCT date, name FROM table WHERE date BETWEEN ? AND ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:28:44.203

您可以尝试按日期对它们进行分组

```
SELECT id, date, name 
FROM table 
WHERE date BETWEEN ? AND ?
Group By date_format(date, '%Y-%m-%d') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:28:56.787

```
SELECT  a.*
FROM    tableName a 
        INNER JOIN
        (
            SELECT DATE(`DATE`) dateOnly, MIN(ID) minID
            FROM tableName
            GROUP BY DATE(`DATE`)
        ) b ON a.ID = b.MinID AND
                DATE(a.`DATE`) = b.dateOnly
WHERE a.`DATE` BETWEEN ? AND ? 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/bdbe1/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T06:29:33.870

您可以使用此查询 -

```
SELECT ID, DATE, NAME FROM table
GROUP BY DATE(DATE) 
```

...添加 WHERE 条件。

# c# - 如何通过数据服务中的查询拦截器创建模型？数据

> ID：12702921
> 
> 赞同：0
> 
> 时间：2012-10-03T06:24:25.410
> 
> 标签：c#, .net, sql, ado.net, wcf-data-services

这几天我一直在寻找答案以找出答案，但我无法得到任何答案，这就是我决定在这里写的原因。

问题如下：我有一个数据服务，其中模型由数据服务提供者创建，在本例中是反射提供者。很简单。但是我们希望使用查询拦截器创建数据模型，而不是使用查询拦截器来过滤数据。

我想要实现什么：/service.svc/search?fromDate=x&toDate=y

我有一个名为 search 的模型，它是搜索数据和搜索结果的模型，然后反射提供程序将取两个参数 fromDate 和 toDate，将它们保存为变量，然后将它们作为参数放入存储的 sql 过程中。然后搜索结果将保存在模型中。

我觉得很难解释这一点，因为我猜这不是您使用查询拦截器和反射提供程序所做的常见事情。

通常使用查询拦截器并将其应用于已完成的数据模型以过滤掉模型的某些部分。

有谁知道如何实现这一目标？

我知道如何参数化查询拦截器 - [http://ashwini47-tts.blogspot.in/2012/03/how-to-parametrized-queryinterceptor-in.html](http://ashwini47-tts.blogspot.in/2012/03/how-to-parametrized-queryinterceptor-in.html) - 但不知道如何将参数发送到 dbcontext /对象上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:34:05.043

查询拦截器并不是要为您解决这个问题。你有两个选择：

1) 接受两个参数并返回一组结果的服务操作。非常容易实现，但您还需要公开“所有”结果集。不确定这是否适合您。有可能的解决方法，但它们有些复杂，并且比下面的#2 更复杂。

2) 将查询描述为 OData 查询。所以类似于 ~/searchResults?$filter=date gt 和 date lt 。然后从您的 searchResults IQueryable 属性返回一个自定义 IQueryable 实现，该实现处理包含过滤器的表达式树，提取 from 和 to 值并通过运行存储过程评估查询。这肯定是更多的工作，但它是 OData 查询方式，#1 中的服务操作不适合您的空间。

# sql - SQL 查询 - ID 不存在于另一个表中或存在但所有记录都在历史记录中？

> ID：12702923
> 
> 赞同：4
> 
> 时间：2012-10-03T06:24:32.967
> 
> 标签：sql, select, db2

我有桌子 T1

```
ID
1
2
3 
```

和表 T2

```
ID    HISTORY
1       1
1       1
2       1
2       0 
```

我必须从 T1 中选择 T2 中不存在或存在但所有记录都在历史中的所有记录（历史标志 =1）

所以为此我的结果将是

```
1
3 
```

什么是正确的 SQL 查询？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T06:38:37.643

尝试这个：

```
select * from T1
where ID not in(select ID from T2 where HISTORY_FLG!=1) 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/1169b/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T06:39:30.067

尝试使用`not exists`

```
select * 
from t1 t
where not exists
     (
       select 1
       from t2 a
       where a.id = t.id
       and a.HISTORY <> 1
     ) 
```

## [SQL 小提琴](http://sqlfiddle.com/#!6/6b79e/1/0)演示

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T06:49:23.110

尝试这个：

```
SELECT * from T1 
WHERE id not 
IN ( SELECT tb1.id FROM( SELECT id FROM T2 WHERE history=0 ) as tb1 ) 
```

# google-translate - 谷歌翻译 API 不工作

> ID：12702929
> 
> 赞同：1
> 
> 时间：2012-10-03T06:24:57.877
> 
> 标签：google-translate, google-translation-api

嗨，我对[Google 翻译 API有疑问](https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&q=hello%20world&source=en&target=de)

使用生成的 API 密钥（对于 API 密钥，我启用了计费，IP 的引用者也设置为任何 IP 和任何引用者。）进行翻译时出现以下错误。

我使用了谷歌提供的以下代码片段

[https://developers.google.com/translate/v2/getting_started#auth](https://developers.google.com/translate/v2/getting_started#auth)

我总是收到错误 403, Access not configured 。

```
translateText({
      "error": {
      "errors": [
      {
         "domain": "usageLimits",
         "reason": "accessNotConfigured",
         "message": "Access Not Configured"
      }
      ],
   "code": 403,
   "message": "Access Not Configured"
   }}
); 
```

# xml - 更改 XML 列上的强制约束时出错

> ID：12702933
> 
> 赞同：0
> 
> 时间：2012-10-03T06:25:05.810
> 
> 标签：xml, sql-server-2008-r2

在我们的数据库中，有一个包含`XML`数据类型列的表。该栏是强制性的 ( `not null`)，我需要将其设为非强制性 ( `null`)。我写了一个类似的脚本：

```
alter table [SomeSchema].[SomeTable] alter column [SomeColumn] XML null 
```

我需要编写/测试一个回滚脚本，所以我写了一个类似于：

```
alter table [SomeSchema].[SomeTable] alter column [SomeColumn] XML not null 
```

初始语句正确执行。当我尝试测试/执行回滚时，出现以下错误：

> *消息 511，级别 16，状态 1，行 1
> 无法创建大小为 8082 的行，该行大于允许的最大行大小 8060。语句已终止。*

这个问题似乎与[row overflow](http://msdn.microsoft.com/en-us/library/ms186981%28v=sql.105%29.aspx)相关，据说它不应该适用于 XML 类型（但似乎在这种情况下）。此问题仅在某些记录在表中时才会出现（即受数据影响），但它似乎与数据的大小没有直接关系。例如，一条记录的 XML 长度为 10,473 个字符并触发了此问题；另一条记录的 XML 长度为 159,072 个字符，并未触发该问题。

设置：

*   视窗 XP SP3
*   SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:25:05.810

我们的常驻数据库专家设法找到了一些代码来解决这个问题（见下文），但仍然无法解释为什么会发生这种情况/这是必要的。我们怀疑小于 8060 字节的 XML 将存储在行中，而较大的 XML 将存储在 LOB 存储中，并且以某种方式应用 [非] 强制约束会导致行大小增加到超出此限制，但是 SQL Server 并没有优雅地处理这个问题。我们仍然不知所措：

*   实际发生了什么
*   为什么我们会收到此错误（SQL Server 错误？我们的做法不好？）
*   为什么对于一些已经大于 8k 的记录会发生这种情况

欢迎任何解释！

```
exec sp_tableoption '[SomeSchema].[SomeTable]', '行外的大值类型', 1;
去

更改表 [SomeSchema].[SomeTable] 删除约束 [ThePKConstraint]
去

alter table [SomeSchema].[SomeTable] 添加约束 [ThePKConstraint] 主键聚集
(
      [SomeIDColumn] asc,
      [SomeOtherIDColumn] asc
)
去

```

# c++ - 正则表达式 - 单词边界失败

> ID：12702938
> 
> 赞同：1
> 
> 时间：2012-10-03T06:25:24.817
> 
> 标签：c++, regex, boost, match, word-boundary

总结一下：如何防止我的正则表达式模式将字符串段误认为是全字变量名？即使我使用单词边界，它也正在替换作为更大单词一部分的字母`\b`。

**我正在尝试做的事情：**我正在使用计算器。它有一个变量列表，在将表达式传递给解析器之前，我调用我的函数`ParseVars()`来`regex_search`使用模式进行变量匹配。一旦它具有与我的变量模式匹配的所有标记，我检查该字符串是否确实在变量名称列表中，如果是，我将字符串替换为变量值。此外，每次在解析器中进行计算时，我都会定义一个名称为`ans1`、`ans2`等的常量。

**问题是：**假设我定义了一个名为 的变量`a`，其值为`6`。（顺便说一句，`map<string,double> Vars;`当我执行`ParseVars("ans1")`结果字符串时，我会在其中跟踪这些内容`"ans1"`。此外，使用`ParseVar()`时，字符串`ans1+ans2+9`保持不变。字符串`9+a`变为`9+6`。所以，到目前为止，我的正则表达式按预期工作。

*但是*，如果我这样做`ParseVars("ans1+a")`，结果字符串是`"6ns1+6"`. 我很困惑为什么我的正则表达式上的单词边界只有在我使用变量时才会失败，“a”总是可以在“ans1”中找到，但只有在“a”在字符串中的其他地方单独出现时它才会被替换.

**我所拥有的：**这是我的正则表达式模式：`\b([a-z][a-z0-9_]*)\b`这不应该只匹配整个单词吗？单词边界工作正常，直到 'a' 在字符串的其他地方单独存在。也许这是我的`ParseVars()`功能，这里是代码：

```
map<string,double> Vars;

// Variables must be a whole word, start with a letter, and
// optionally have other letters, numbers, and underscores.
sregex VarPattern = sregex::compile("\\b([a-z][a-z0-9_]*)\\b");

string Calculator::ParseVars(string expr) {
    if (Vars.empty()) return expr;

    string newExpr = StrToLower(expr);
    const sregex_iterator End;

    // Loop through all possible variable matches
    for (sregex_iterator i(expr.begin(), expr.end(), VarPattern); i != End; ++i) {
        string name = (*i)[0];

        // If it is a variable
        if (Vars.find(name) != Vars.end()) {
            int rPos = 0;

            // Replace all occurrences of it
            while ((rPos = newExpr.find(name, rPos)) != string::npos) {
                newExpr.replace(
                    rPos, name.length(),
                    lexical_cast<string,double>(Vars[name])
                );
            }
        }
    }

    return newExpr;
} 
```

有了`a`等于`6`，我怎样才能防止`ans1+a`变成`6ns1+6`不想要的`ans1+6`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:18:23.913

好吧，我找到了解决方案。我在这里为遇到类似问题的任何人提供答案。

问题是我在正则表达式匹配之后使用了基本的字符串替换，所以单词边界有效，只是字符串替换函数正在替换字符串的每次出现，而不管单词边界如何。我必须使用`regex_replace()`，这是我最终得到的：

```
map<string,double> Vars;

// Variables must be a whole word, start with a letter, and
// optionally have other letters, numbers, and underscores.
sregex VarPattern = sregex::compile("\\b([a-z][a-z0-9_]*)\\b");

string Calculator::ParseVars(string expr) {
    if (Vars.empty()) return expr;
    string newExpr = StrToLower(expr);
    const sregex_iterator End;

    // Loop through all possible variable matches
    for (sregex_iterator i(expr.begin(), expr.end(), VarPattern); i != End; ++i) {
        string name = (*i)[0];

        // If it is a variable
        if (Vars.find(name) != Vars.end()) {
            sregex rgxName = sregex::compile("\\b" + name + "\\b");

            // Replace all occurrences of it
            newExpr = xpressive::regex_replace(
                newExpr, rgxName,
                lexical_cast<string,double>(Vars[name])
            );
        }
    }

    return newExpr;
} 
```

# python - Python：获取嵌套的 while 循环以使用布尔语句（初学者）

> ID：12702946
> 
> 赞同：0
> 
> 时间：2012-10-03T06:26:32.477
> 
> 标签：python, loops, if-statement, while-loop, boolean

嗨，我是 python 的初学者，我正在尝试创建一个程序，在其中输入日期并在程序中显示

当用户输入超出限制的数字时，我尝试实现循环。为了确定月份，while 循环运行良好：

```
month = int(input("Which numeric month of the year were you born in?\n"))
while((month <=0) or (month >12)):
    print("The Month must be within the range 12>= Month >0\. Please enter the value again.")
    print("\n")
    month = int(input("Which numeric month of the year were you born in?\n")) 
```

但是，对于第二部分（如下），确定日期时，当用户输入限制为 28 天的 2 月份的值时，它显示的循环消息是针对不同的条件（第三个 if 语句在`day`设置）代替。

如果您输入： 2 代表`month`， 30 代表`day`。它循环的消息是：

> ...30< 月 =<0

而不是显示：

> 28< 月 =<0

有人可以帮我弄清楚如何正确使用while语句吗？

**我的代码如下：**

```
day = int(input("Which numeric day of the month were you born in?\n"))
while(month == 1,3,5,7,8,10,12):
    if(day <=0) or (day >31):
        print("For your selected month, the value for day must be within the range 31>= Day >0\. Please enter the value again.")
        print("\n")
        day= int(input("Which numeric day of the month were you born in?\n"))
while(month ==2):
    if(day <=0) or (day >28):
        print("For your selected month, the value for day must be within the range 28>= Day >0\. Please enter the value again.")
        print("\n")
        day= int(input("Which numeric day of the month were you born in?\n"))
while(month ==4,6,9,11):
    if(day <=0) or (day >30):
        print("For your selected month, the value for day must be within the range 30>=Day>0\. Please enter the value again.")
        print("\n")
        day= int(input("Which numeric day of the month were you born in?\n")) 
```

请注意，在使用它时，我仅限于初学者级别的 python 代码。除此之外，我能做的最多的是使用`for`循环而不是`while`循环，但没有比这更高级的了。

程序应在程序结束时显示个人的出生日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T06:45:03.207

你有太多的while循环。其中一些你永远无法逃脱。

在你知道你有哪个月之后，你应该决定这个月有多少天：

所以你有了

```
month = int(input("Which numeric month of the year were you born in?\n"))
while((month <=0) or (month >12)):
    print("The Month must be within the range 12>= Month >0\. Please enter the value again."):
    print("\n")
    month = int(input("Which numeric month of the year were you born in?\n"))
if month in (4, 6, 9, 11): # short
    maxdays = 30
elif month != 2: # not February -> long
    maxdays = 31
else:
    # Here we could ask for the year, determine if the year is divisible by 4, by 100 and by 400 and with this information determie if we have a leap year, but...
    # we are tolerant for now and accept the 29 as well.
    maxdays = 29 
```

现在，您可以使用现有的东西而不会经常重复自己：

```
day = int(input("Which numeric day of the month were you born in?\n"))
if(day <= 0) or (day > maxdays):
    print("For your selected month, the value for day must be within the range {0} >= Day > 0\. Please enter the value again.".format(maxdays))
    print("\n")
    day = int(input("Which numeric day of the month were you born in?\n")) 
```

如果你还没有学过`format()`，你可以做

```
 print("For your selected month, the value for day must be within the range " + str(maxdays) + " >= Day > 0\. Please enter the value again.") 
```

甚至

```
 print("For your selected month, the value for day is wrong. Please enter the value again.") 
```

# xml - JSF 1.2 Mojarra 视图状态加密 - GZip 错误 - java.io.IOException：不是 GZIP 格式

> ID：12702948
> 
> 赞同：2
> 
> 时间：2012-10-03T06:26:37.780
> 
> 标签：xml, jsf, jsf-1.2

我们在 JSF 1.2（Sun 的 RI）中开发的 Web 应用程序部署在带有 JRockit 1.6 64 位的 Weblogic 11g 中。我们有我们的视图状态保存模式作为客户端。该应用程序通过 HTTPS 访问。

作为第 3 方渗透测试建议的一部分，我们被建议加密视图状态，这是使用 web.xml 中的 JNDI ENV 设置实现的。

```
    <环境入口>
    <env-entry-name>com.sun.faces.ClientStateSavingPassword</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
    <env-entry-value>2rEb7Tuf</env-entry-value>
    </env-entry>

```

当应用程序部署到我们的生产箱（与会话亲和性集群）时，有时在处理客户端请求时（当然不是当应用程序页面加载到客户端浏览器中时，默认视图状态将作为隐藏字段的一部分发送） ，我们得到 GZIP 错误“ *java.io.IOException: Not in GZIP format* ”。仅当启用加密时才会发生这种情况。

```
    Servlet 因 IOException 而失败
    java.io.IOException：不是 GZIP 格式
    在 java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:143)
    在 java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:58)
    在 java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:67)
    在 com.sun.faces.renderkit.ResponseStateManagerImpl.getTreeStructureToRestore(ResponseStateManagerImpl.java:166)
    在 javax.faces.render.ResponseStateManager.getState(ResponseStateManager.java:215)
    截断。查看日志文件以获取完整的堆栈跟踪

```

任何有价值的见解将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:43:29.967

默认情况下`com.sun.faces.compressViewState`，`true`当我们在客户端设置视图状态时，JSF 框架会尝试使用 GZIP 格式对其进行压缩。如果将`com.sun.faces.compressViewState`init 参数设置`web.xml`为`false`，则不会发生压缩，您可以避免此异常。试一下。

# .net - 客户端缓存 C#

> ID：12702950
> 
> 赞同：3
> 
> 时间：2012-10-03T06:26:59.120
> 
> 标签：.net, wpf, caching, object-persistence, clientside-caching

我的 wpf 客户端在启动时从服务器加载了很多常备数据。所以，我想在客户端实现一个缓存策略。

我知道 .NET 框架 4 中的新 System.Runtime.Caching 命名空间。不幸的是，只有一个内存缓存。我不想在客户端每次启动时加载大量数据。所以我正在寻找一个持久的客户端缓存。

你怎么看待这件事？

另一个想法是我使用 OODB（如 db4o 或 VelocityDB）进行客户端缓存。这是一个坏主意吗？我在客户端缓存方面没有任何经验。

感谢您的回答和建议。

亲切的问候，亲

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:36:17.567

如何在客户端存储数据并不重要。不过，出于您的目的，我会研究 IsolatedStorage。可能更困难的是判断缓存何时变得陈旧。这实际上是 System.Runtime.Caching 擅长的。服务器数据是否会发生变化，还是仅在应用程序发布新版本后发生变化？如果数据仅在新版本后更改，您可能希望将其作为资源包含到应用程序设置中。如果没有，您必须有一些超时或信号告诉客户端是时候检查服务器上更改的数据了。您是否已经考虑过延迟加载数据？这样，延迟可能不会全部发生在应用程序启动时，并且不太明显，并且可能您甚至不必将完整的数据加载到客户端中。

关于超时：在我们的应用程序中，我们有一个固定的超时，它在第一次加载时设置给每个引用列表，并且每次从缓存中请求它时，都会检查该超时。如果已过期，则在返回列表之前会透明地刷新缓存。这是一个权衡，因为客户端的数据可能会过时一段时间。我们接受这一点，因为它在我们的案例中并不重要，这样每个列表都对自己负责，我们不需要中央注册表来跟踪每个列表的状态以从外部设置超时。

# android - 如何在 Android 中将 TextView 的文本转换为位图？

> ID：12702952
> 
> 赞同：5
> 
> 时间：2012-10-03T06:27:11.497
> 
> 标签：android, string, button, bitmap, textview

我是Android开发的初学者，正在尝试开发一个程序，用户可以在按下后将*TextView中显示的文本（TextView显示我从资产导入的代码39条码字体文本）*转换为位图“转换为位图！” 按钮。我试过在谷歌周围搜索，但我只设法得到像将字符串转换为位图这样的答案，而没有关于在哪里键入代码的指南，所以我对此很困惑。我尝试使用谷歌搜索后尝试输入的代码运行程序，但每次按下转换按钮时它都会崩溃。

真心希望能帮到你！先感谢您！:D

到目前为止，以下是我的代码：-

**根据 Simon 的代码进行了编辑*

**在爪哇：**

```
public class MainActivity extends Activity 
implements OnClickListener {
    //Called when activity is first created

    TextView tv1;
    ImageView iv;
    Button b;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView tv1 = (TextView) findViewById(R.id.txtV);  
        tv1.setDrawingCacheEnabled(true); 

        //To change to code 39 barCode font
        Typeface barcodefont = Typeface.createFromAsset(getAssets(),                 
                "fonts/IDAutomationHC39M_FREE.otf");         
        TextView tv = (TextView) findViewById(R.id.txtV);         
        tv.setTypeface(barcodefont);
    }

    public void onClick(View v) {

        tv1.buildDrawingCache(); 
        iv.setImageBitmap(tv1.getDrawingCache()); 
    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**日志错误：**

```
10-04 06:33:25.076: E/AndroidRuntime(1423): FATAL EXCEPTION: main
10-04 06:33:25.076: E/AndroidRuntime(1423): java.lang.IllegalStateException: Could not find a method ConvertText(View) in the activity class com.example.txtvbitmapconverter.MainActivity for onClick handler on view class android.widget.Button with id 'btnConvert'
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.view.View$1.onClick(View.java:3578)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.view.View.performClick(View.java:4084)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.view.View$PerformClick.run(View.java:16966)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.os.Handler.handleCallback(Handler.java:615)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.os.Looper.loop(Looper.java:137)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at java.lang.reflect.Method.invokeNative(Native Method)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at java.lang.reflect.Method.invoke(Method.java:511)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at dalvik.system.NativeStart.main(Native Method)
10-04 06:33:25.076: E/AndroidRuntime(1423): Caused by: java.lang.NoSuchMethodException: ConvertText [class android.view.View]
10-04 06:33:25.076: E/AndroidRuntime(1423):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at java.lang.Class.getMethod(Class.java:915)
10-04 06:33:25.076: E/AndroidRuntime(1423):     at android.view.View$1.onClick(View.java:3571)
10-04 06:33:25.076: E/AndroidRuntime(1423):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T06:36:14.700

尝试这个

添加到您的 onCreate()

```
tv1.setDrawingCacheEnabled(true); 
```

然后在你的 onClick()

```
tv1.buildDrawingCache();
iv.setImageBitmap(tv1.getDrawingCache()); 
```

[http://developer.android.com/reference/android/view/View.html#buildDrawingCache(boolean)](http://developer.android.com/reference/android/view/View.html#buildDrawingCache%28boolean%29)

[http://developer.android.com/reference/android/view/View.html#getDrawingCache(boolean)](http://developer.android.com/reference/android/view/View.html#getDrawingCache%28boolean%29)

[编辑]

您现在遇到的问题是您试图在 tv1 存在之前启用绘图缓存。

你应该做这个：

```
TextView tv1 = (TextView) findViewById(R.id.txtV); 
tv1.setDrawingCacheEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-14T18:01:01.630

onCreate() 中的行：

```
TextView tv1 = (TextView) findViewById(R.id.txtV); 
```

应该

```
tv1 = (TextView) findViewById(R.id.txtV); 
```

# objective-c - 如何使用 Objective C 在 iOS 中实现 GPS 功能？

> ID：12702954
> 
> 赞同：0
> 
> 时间：2012-10-03T06:27:29.143
> 
> 标签：objective-c, ios, xcode, gps

我是一名 iPhone 开发人员。

我想使用 Objective C 开发一个 GPS 应用程序。我找不到任何示例应用程序。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:35:03.847

我在这里发布了一些链接，其中包括有关使用 MapKit 使用 Google Places API 的详细说明，还包括示例代码。

看看这个：

[链接 1：**在 MapKit 中使用 Google Places API**](http://www.raywenderlich.com/13160/using-the-google-places-api-with-mapkit)

[链接二：**iOS 教程 MapKit 简介**](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)

希望这会帮助你。

# svg - SVG 扩张/侵蚀过滤器与 Illustrator 偏移路径

> ID：12702955
> 
> 赞同：3
> 
> 时间：2012-10-03T06:27:32.420
> 
> 标签：svg, adobe-illustrator, svg-filters

下面是在 Chrome 22.0.1229.79 Mac 上呈现的 SVG 图像的屏幕截图。原始 svg 在 jsfiddle 上：http: [//jsfiddle.net/LGBk5/](http://jsfiddle.net/LGBk5/)

左图是使用 SVG:s dilate 和 erode 过滤器制作的。右侧是使用 Illustrator 的偏移路径效果制作的。

左边有问题：底部的边框扭曲，曲线不平滑。同时，两者的粗黑边框是相同的。

**我的 SVG 是否有一些参数错误，或者扩张和侵蚀过滤器看起来有问题？**

编辑：目的是使 SVG 中的路径更细或更粗，但根据这个例子，腐蚀/扩张不够稳定，无法依赖。

![Illustrator 偏移路径与 SVG 侵蚀和扩张过滤器](../Images/1e11bc1178f9de8a624d9a638c92fae8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T09:02:44.063

过滤器效果是在像素数据（光栅化路径）上完成的，而 Illustrator 中的路径偏移操作（在 Inkscape 中类似）是使用原始路径数据（如果您愿意，也可以是矢量数据）完成的。

前者就像使用 Photoshop 滤镜，后者是使用现有路径创建新路径。它们都很稳定，但它们的操作不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T00:00:57.630

Illustrator 的路径偏移和 SVG 滤镜侵蚀/扩张是不同的操作。

这个侵蚀过滤器按设计工作 - 这里没有错误。对于输入图像中的每个像素，过滤器会查看其周围矩形（半径）中的最大 RGBA 值。在正常图像中，由于缺少更好的术语，这往往会产生“矩形高光”。当应用于弯曲的绘制路径时会导致奇怪的伪影。从规范：

> 膨胀（或腐蚀）内核是一个矩形，宽度为 2*x 半径，高度为 2*y 半径。在膨胀中，输出像素是输入图像的内核矩形中相应 R、G、B、A 值的单个分量最大值。在腐蚀中，输出像素是输入图像的内核矩形中相应 R、G、B、A 值的单个分量最小值。

所以，想象一下你的形状尖端的那个单个像素。在您的过滤器中使用 10 像素的“半径”（请记住，半径是一个令人难以置信的误导性术语，因为它使用的是矩形而不是圆形！）。为了争论，假设它是 100,100。当过滤器处理 90,110 到 110,110 范围内的像素值时，其膨胀半径将检测 100,100 处的像素并将该范围内的所有像素涂成黑色。就这样，你漂亮的尖头已经扩张成一条直线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T12:04:27.037

请注意，您可以使用嵌套笔触（其中一些具有用于修剪路径内部或外部的蒙版）来实现大多数偏移路径效果。

例如，这是以这种方式重新实现的 OP 路径：

```
<!-- Left drawing is made using erode and dilate -->
<!-- Right one is made by Illustrator's Offset Path -->

<svg width="612" height="792" viewBox="0 0 612 792" xmlns="http://www.w3.org/2000/svg">

  <defs>
    <path id="curve" d="M21.552,74.438c2.531-28.879,73.668-52.734,102.629-53.971
        c32.164-1.373,74.764,23.746,61.766,53.197c-32,72.5-84.236-59.594-109.5-29.5c-23.367,27.833,55.4,142.969,55.4,142.969
        S18.109,113.708,21.552,74.438z"/>

    <mask id="inner">
      <use xlink:href="#curve" fill="white"/>
    </mask>
  </defs>

  <!-- this black outermost line -->
  <use x="10" y="10" xlink:href="#curve" style="stroke:black;stroke-width:26;stroke-linejoin:miter;stroke-miterlimit:10"></use>
  <!-- thick red outer line -->
  <use x="10" y="10" xlink:href="#curve" style="stroke:#f00;stroke-width:24;stroke-linejoin:miter;stroke-miterlimit:10"></use>    
  <!-- innermost black thin line, with green fill -->
  <use x="10" y="10"  xlink:href="#curve" style="fill:#1CFF00;stroke:black;stroke-width:32;stroke-linejoin:miter;stroke-miterlimit:10" mask="url(#inner)"></use>
  <!-- blue inner stroke -->
  <use x="10" y="10"  xlink:href="#curve" style="fill:none;stroke:#5555FF;stroke-width:30;stroke-linejoin:miter;stroke-miterlimit:10" mask="url(#inner)"></use>
  <!-- lastly, the black line -->
  <use x="10" y="10"  xlink:href="#curve" style="fill:none;stroke:black;stroke-width:10;stroke-linejoin:miter;stroke-miterlimit:10"></use>

<g transform="translate(210,10)">
    <path fill="#FF0000" stroke="#231F20" d="M126.273,201.917c-1.188-0.766-29.407-19.044-57.679-42.532c-41.739-34.676-60.31-60.754-58.441-82.068
        c1.575-17.974,18.042-34.105,48.943-47.945c21.673-9.707,48.782-16.997,65.925-17.729c1.023-0.043,2.057-0.065,3.096-0.065
        c26.722,0,55.103,13.789,67.484,32.787c7.866,12.07,9.101,25.736,3.476,38.482c-8.697,19.704-20.608,29.697-35.403,29.702
        c-0.002,0-0.007,0-0.01,0C144.382,112.551,127.62,95,111.407,78.028c-7.054-7.385-18.575-19.446-23.912-21.338
        c-1.086,2.002-6.186,15.821,20.666,67.477c16.226,31.214,35.475,59.438,35.668,59.72l35.977,52.589L126.273,201.917z"/>
<path fill="#5555FF" stroke="#231F20" stroke-width="10" stroke-miterlimit="10" d="M22.939,78.438
    c2.531-28.879,73.668-52.734,102.629-53.971c32.164-1.373,74.764,23.746,61.766,53.197c-32,72.5-84.237-59.594-109.5-29.5
    c-23.366,27.833,55.401,142.969,55.401,142.969S19.497,117.709,22.939,78.438z"/>

    <path fill="#00FF00" stroke="#231F20" d="M79.986,131.678C38.498,95.796,38.41,81.397,38.549,79.807c0.289-3.29,5.843-10.151,19.371-17.933
        C57.676,78.899,64.972,101.816,79.986,131.678L79.986,131.678z M163.665,84.044c-7.09,0-22.461-16.091-31.646-25.706
        c-5.867-6.143-11.433-11.969-16.966-16.846c4.324-0.776,8.128-1.238,11.184-1.368c0.621-0.027,1.249-0.04,1.88-0.04
        c16.911,0,36.471,8.903,43.603,19.846c3.317,5.089,2.508,8.623,1.278,11.408C168.884,80.659,165.163,84.043,163.665,84.044
        L163.665,84.044z"/>
    </g>

</svg>
```

# sql-server - 如何在 SQL Server 中使用 TSQL 脚本文件查找自身的当前目录

> ID：12702960
> 
> 赞同：2
> 
> 时间：2012-10-03T06:28:17.100
> 
> 标签：sql-server, tsql, working-directory

我认为我的问题很简单。我怎样才能发现我的查询是从哪里运行的（脚本文件本身的位置在哪里）？

编辑 ：

谢谢您的回答。我需要使用我的 TSQL 脚本文件导入 XML 文件并且我想将它们放在一起，所以无论有人尝试运行 TSQL 脚本文件，它必须知道自己的当前目录才能知道 XML 文件在哪里然后导入它. 再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:11:40.423

您需要一个众所周知的位置，您可以在其中放置 XML 文件以供服务器加载。这可以是 SQL Server 计算机上的共享，也可以是 SQL Server 服务帐户有权读取的文件服务器上的共享。

然后，您需要在脚本顶部添加这样的注释：

```
--Make sure you've placed the accompanying XML file on \\RemoteMachine\UploadShare
--Otherwise, expect this script to produce errors 
```

更改`\\RemoteMachine\UploadShare`以匹配您选择的众所周知的位置。可选地，在注释后面加上 30-40 个空白行（或更多注释），这样运行它的任何人都可以清楚地看到他们可能需要阅读那里的内容。

然后，根据该假设编写脚本的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:06:23.493

我找到了一个更简单的问题的解决方案！你知道我只是将我的 XML 文件导入临时表一次。然后我为包含我导入的数据的那个临时表编写一个选择查询，如下所示：

“从 MyImportedTable 中选择'插入 MyTable 值（'+ Col1 + '、'+ Col2 + '）'”

现在，我为每条导入的记录设置了许多插入命令。我将所有插入命令保存在我的脚本中。因此，无论走到哪里，我都只需要我的脚本文件。

# php - PHP icontact API 集成

> ID：12702965
> 
> 赞同：2
> 
> 时间：2012-10-03T06:28:54.713
> 
> 标签：php, icontact

我正在使用 icontact api 2.0 将 icontact 列表集成到我的站点中。我在创建新列表和添加新消息时遇到问题，它没有使用 API 创建任何列表。但我可以创建联系人和订阅等等。使用的代码是

```
require_once('lib/iContactApi.php');

// Give the API your information
iContactApi::getInstance()->setConfig(array(
    'appId'       => 'my_APIID', 
    'apiPassword' => 'my_password', 
    'apiUsername' => 'my_username'
));

// Store the singleton
$oiContact = iContactApi::getInstance();

$oiContact->addList('test', 4424, true, false, false, 'Just an example list',"test");

$oiContact->addMessage('An Example Message', 585, '<h1>An Example Message</h1>', 'An Example Message', 'ExampleMessage', 33765, 'normal');
// Schedule send
$oiContact->sendMessage(array(33765), 179962, null, null, null, mktime(0, 0, 0, 10, 03, 2012)); 
```

还检查了一些帮助，但没有找到任何解决方案 [http://www.softwareprojects.com/resources/programming/t-icontact-20-api-integration-php-example-1925.html](http://www.softwareprojects.com/resources/programming/t-icontact-20-api-integration-php-example-1925.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:03:54.353

问题可能出在 addList 的第二个参数上

```
$oiContact->addList('test', 4424, true, false, false, 'Just an example list',"test"); 
```

4424 - 必须是您的列表之一已经存在的有效消息 ID，如果您转到 icontact 仪表板并为您的列表之一创建欢迎消息然后编辑它，您将在 url 上看到“iMessageId”范围。您可以将其用作第二个参数，它应该可以工作。

[https://app.sandbox.icontact.com/icp/core/code/message/edit/?token=ff1a8748b08088d41e69215c75295c98&iMessageId=1979804&sHubId=41254750ca180a4e7b3](https://app.sandbox.icontact.com/icp/core/code/message/edit/?token=ff1a8748b08088d41e69215c75295c98&iMessageId=1979804&sHubId=41254750ca180a4e7b3)

参考：http: [//developer.icontact.com/documentation/lists/](http://developer.icontact.com/documentation/lists/)

# android - Android多图像移动调整大小问题

> ID：12702971
> 
> 赞同：0
> 
> 时间：2012-10-03T06:29:04.463
> 
> 标签：android, android-layout, android-imageview

我想在我的 android 应用程序中移动旋转和调整图像大小，我从 stackoverflow 中找到了这段代码，它可以完美地满足我的要求....但是现在我需要移动两个图像，所以这个代码会在我复制第一个图像移动切换到第二个图像.. **1）我该怎么做... 2）我尝试为这两个图像添加单独的触摸监听器，但没有一个图像根本没有移动**

```
 iv_choose_hats = (ImageView)findViewById(R.id.iv_chooseHats);
        iv_choose_hats.setScaleType(ScaleType.MATRIX); // set the image scale type for compatible for onTouch movements
        iv_choose_hats.setOnTouchListener(this);

            selected_hatImage = (ImageView)findViewById(R.id.iv_selectedHat);
            selected_hatImage.setOnTouchListener(this);
            selected_hatImage.setScaleType(ScaleType.MATRIX);

@Override
public boolean onTouch(View v, MotionEvent event) {

    ImageView view = (ImageView) v;

    // Dump touch event to log
    dumpEvent(event);

    // Handle touch events here...
    switch (event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN:
             savedMatrix.set(matrix);
             start.set(event.getX(), event.getY());
             mode = DRAG;
             lastEvent = null;

             break;

        case MotionEvent.ACTION_POINTER_DOWN:
            oldDist = spacing(event);         
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;

            lastEvent = new float[4];
            lastEvent[0] = event.getX(0);
            lastEvent[1] = event.getX(1);
            lastEvent[2] = event.getY(0);
            lastEvent[3] = event.getY(1);
            d = rotation(event);

            break;

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            lastEvent = null;

            break;

        case MotionEvent.ACTION_MOVE:
         if (mode == DRAG) {
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
         }
         else if (mode == ZOOM && event.getPointerCount()==2) {
            float newDist = spacing(event);

            matrix.set(savedMatrix);
            if (newDist > 10f) {              
               float scale = newDist / oldDist;
               matrix.postScale(scale, scale, mid.x, mid.y);
            } 
            if (lastEvent!=null){
                newRot = rotation(event); 

                float r = newRot-d;
                matrix.postRotate(r, view.getMeasuredWidth()/2, view.getMeasuredHeight()/2);  
            }
         }
         break;
  }

      view.setImageMatrix(matrix);
      return true; // indicate event was handled
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:10:49.747

需要为其中一个图像视图使用带有 onTouch 事件的自定义类

```
iv_choose_hats = (ImageView)findViewById(R.id.iv_chooseHats);
iv_choose_hats.setScaleType(ScaleType.MATRIX);
iv_choose_hats.setOnTouchListener(new Image_OnTouch());

public class Image_OnTouch implements OnTouchListener { 
   @Override
   public boolean onTouch(View v, MotionEvent event) {

   }
} 
```

# java - 哪个工具可以为javac的输出着色？

> ID：12702984
> 
> 赞同：6
> 
> 时间：2012-10-03T06:29:46.913
> 
> 标签：java, colors, terminal, javac

我们有一个高度并行化的构建过程，所以我经常不得不浏览 javac 的大量输出来查找构建错误。

为了使这更容易，如果有一些工具可以将 javac 的输出着色到我的终端，并突出显示代码中的错误，那就太好了。

**我可以使用什么工具来着色 javac 的输出？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:33:41.800

将**grep**与“--color”选项一起使用？

```
~$ javac Test.java 2>&1 | egrep --color "^|error" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:18:59.040

我最终使用了一个名为[Generic Colorizer Tool](http://kassiopeia.juls.savba.sk/~garabik/software/grc.html)的工具，并编写了自己的配置来为最重要的输出着色。工作得很好。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-12T05:29:59.570

## 通过使用任何正则表达式匹配器来匹配您的文本并用终端颜色转义码将其包围以应用颜色，从而滚动您自己的 javac 错误着色器：

使用`readfile`和`substitute`意识形态：

```
#1\.  Do your javac and pipe the result to a file:
javac whatever.java 2>/tmp/javac_errors.out;

#define the escape start and stop codes that your terminal 
#uses to apply foreground and background color:
let redbackground        = '\\e[48;5;196m'
let normalbackground     = '\\e[0;0m'

#iterate the lines in the saved file:
for line in readfile("/tmp/javac_errors.out")

    #Use sed, match, substitute or whatever to regex substitute 
    #the text with the text surrounded by the color escape codes
    #find and replace the text 'error:' with the same surrounded by escape codes
    let line = substitute(line, 
                          'error:',
                           redbackground . 
                           'error:' . 
                           normalbackground, 'g')

    #use echo -e flag to tell the terminal to interpret the escape codes:
    echo -e line
endfor 
```

## 为我工作：

[![javac着色示例](../Images/1e965f58eaf493e84c1d9fab6b507195.png)](https://i.stack.imgur.com/IzRzB.png)

此代码与上面相同，但它使用终端行迭代器和`sed`替换思想：

```
#run javac pipe to file
javac whatever.java 2>/tmp/errors.out

#Define terminal color codes
redbackground='\\e[48;5;196m'
normalbackground='\\e[0;0m'

#read the file and print out each line 
filename="/tmp/errors.out" 
while read -r line; do  
    #replace error surround with escape codes 
    line=`sed "s/error:/${redbackground}error:${normalbackground}/g" <<<"$line"` 
    echo -e "$line" 
done < "$filename" 
```

# css - 嵌入式视频为位置创建错误：固定顶部标题

> ID：12702993
> 
> 赞同：6
> 
> 时间：2012-10-03T06:30:37.660
> 
> 标签：css, youtube-api, frame, css-position

我在页面顶部有一个菜单元素

```
position:fixed;
z-index:1000; 
```

它通常停留在页面顶部，没有任何抱怨。但是，每当我在页面中有嵌入的 youtube 视频（当时也必须正在播放）时，固定菜单似乎都会出现各种故障和跳动。这是一个常见问题，嵌入式视频会干扰位置：固定元素吗？问题出在 Chrome、Safari 中，但奇怪的是，不在 Firefox 中。

这个控制台错误与它有什么关系吗？不安全的 JavaScript 尝试从具有 URL ww.youtube... 的框架访问具有 URL ww.youtube... 的框架 域、协议和端口必须匹配。

我知道这个描述不是很详细，所以这里是网址：[Chronicle Video Section](http://www.hwchronicle.com/video/)。我正在制作我高中的校报网站，但我被这一问题难住了——以前从未见过。尝试在视频播放时上下滚动。谢谢你的帮助。

iframe 所在的 div 是：

```
<div class="entry-content">
    <p>
        <iframe... />
    </p>
</div> 
```

如果有帮助，我的设置方式是它当前提取 wordpress 帖子内容的条目内容，这只是 youtube url，Wordpress 将 url 转换为嵌入到该 div 中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-04T23:27:00.387

我发现添加样式规则

```
-webkit-backface-visibility: hidden;
-webkit-transform: translateZ(0); 
```

到固定元素为我整理了疯狂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T01:48:13.513

我遇到了完全相同的问题，我找到了一个非常简单的解决方案。添加以下参数：

```
?wmode=transparent 
```

到 youtube 视频网址。例如：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/brg1H4BuII8?wmode=transparent&rel=0" frameborder="0" allowfullscreen></iframe> 
```

更多细节[在这里](http://www.jenkaufman.com/youtube-iframe-embed-video-problem-hides-menus-other-layers-546/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T22:11:05.893

这不是 YouTube 错误。这是一个与重绘固定位置项目相关的 webkit 错误。我建议使用 webkit 提交错误。 [http://www.webkit.org/quality/reporting.html](http://www.webkit.org/quality/reporting.html)

如果您现在想要解决方法，我建议您监听窗口滚动事件并更改菜单的样式（宽度、高度或位置）以强制重绘。