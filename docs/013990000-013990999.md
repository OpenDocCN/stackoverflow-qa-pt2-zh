# StackOverflow 问答 13990000-13990999

# sql-server - 将 SQL-Server 特定的 INSERT 查询转换为 PostgreSQL

> ID：13990000
> 
> 赞同：0
> 
> 时间：2012-12-21T12:13:58.193
> 
> 标签：sql-server, postgresql, postgresql-9.1, sql-insert

我有一个 SQL Server 2008 特定查询，如何在 PostgreSQL 中执行相同的查询。

```
INSERT INTO profile_answers_new (pro_ans_frn_pro_id, pro_ans_name)
SELECT pro_ans_frn_pro_id = @new_pro_id , pro_ans_name
FROM profile_answers_old WHERE profile_id = 1 
```

如何将此查询转换为特定于 PostgreSQL 的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T07:06:49.930

PostgreSQL 中的普通 SQL 中没有变量。您可以将文字常量*按原样*写入`SELECT`语句中。

```
INSERT INTO profile_answers_new (pro_ans_frn_pro_id, pro_ans_name)
SELECT 1234, pro_ans_name     -- 1234 being @new_pro_id (integer)
FROM   profile_answers_old
WHERE  profile_id = 1 
```

像您在原始语句 () 中的表达式将`pro_ans_frn_pro_id = @new_pro_id`被评估为`TRUE`// `FALSE`。`NULL`你当然不希望那样。

如果你想提交一个参数，你必须创建一个函数，如：

```
CREATE OR REPLACE FUNCTION foo(int)
  RETURNS void LANGUAGE sql AS
$func$
INSERT INTO profile_answers_new (pro_ans_frn_pro_id, pro_ans_name)
SELECT $1, pro_ans_name
FROM   profile_answers_old
WHERE  profile_id = 1;
$func$; 
```

称呼：

```
SELECT foo(1234); 
```

但我怀疑，这就是你想要的。

# macos - 无法从 Mac OS 连接到亚马逊 ec2

> ID：13990001
> 
> 赞同：1
> 
> 时间：2012-12-21T12:14:03.870
> 
> 标签：macos, amazon-web-services, amazon-ec2, amazon

我遇到了一个奇怪的问题。我无法从我的 Mac OS 10.8 连接到 amazon ec2。但我可以轻松地从 Linux/Windows 机器连接。我什至无法浏览托管在 amazone ec2 上的网页。我已经尝试过另一台 Mac 机器和我的 iPhone。结果是一样的。无法连接。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:36:04.800

Flushing all firewall rules from amazon portal fixed the issue. But my server is wide open to public now!

# java - JPA 的持久调用是否区分具有单个 PK 列的实体和具有复合 PK 的实体？

> ID：13990006
> 
> 赞同：3
> 
> 时间：2012-12-21T12:14:30.417
> 
> 标签：java, jpa, persist

我们的系统中有两个实体，如下所示：

*   Invoice：[InvoiceID, OrgID] 是表示为 bean 的主键，并使用`@IdClass`注解与 Invoice 关联

*   WorkflowStates：是使用注解`WorkflowStateId`定义的主键列。`@Id`

在这两个实体中，ID 字段（InvoiceID、WorkflowStateId）是使用 DB 序列自动生成的。

在对新创建的 Invoice 实例调用 persist 时，当我们将 InvoiceID 设置为 时`-1`，实例会被持久化并且 ID 会正确生成。

但是，当在 WorkflowStateID 设置为的新创建的 WorkflowStates 实例上调用 persist 时`-1`，`persist()`调用会引发异常：

```
 org.hibernate.PersistentObjectException: detached entity passed to persist: <Entity Class> 
```

我在搜索中找不到太多，如果`persist()`方法对具有单列作为 PK 的实体和具有复合 PK 的实体的工作方式有任何差异。有人知道更多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:36:31.317

我认为你得到了这个例外，因为你为你的持久性分配了一个 id，同时你在你的映射中指定了 id 是自动生成的。

当您执行persist（）时，休眠假设该对象已经存在于您的数据库中（基于您的对象已经具有Id的事实）......但事实并非如此。这就是你得到例外的原因。

所以，我建议你删除所有的 setId(-1)。（在持久化对象之前保持 id 为空）

**编辑**

每当实体具有 Single Id 列或 Compound Id 时，hibernate 检测实体是否持久的方式存在一些差异。（我知道是因为我查看了代码，但在文档中没有找到任何内容）。

我建议你设置一个断点`DefaultPersistEventListener.onPersist`，看看发生了什么。或者启用休眠调试日志并对其进行分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:46:18.683

我的猜测是这`@IdClass`会有所不同，因为实际上发票没有“id 列”。它具有复合键，因此不会生成 InvoiceId。您作为 invoiceId 提供的值将在持久操作期间使用（在本例中为 -1）。因此，发票的“Id”将是您提供的 2 个值（invoiceId 和 orgId）的组合，hibernate 不会用生成的值覆盖它们，它只会使用给定的值。

我不知道代码，所以我很难说更多。如果您可以提供代码示例，那将有很大帮助。

# php - 使用 NuSOAP 返回两种类型

> ID：13990007
> 
> 赞同：0
> 
> 时间：2012-12-21T12:14:33.730
> 
> 标签：php, nusoap

我有一个使用 NuSOAP 的工作 webService。现在，我必须在返回请求的数据之前进行验证。如果一切正常，我会正常返回，否则我想返回一条字符串消息，解释为什么我没有提供所要求的信息。问题是我无法将两种不同类型的返回添加到 NuSOAP 的 RegisterFunction。如果我添加一个 ComplexType 作为返回，我不能返回一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:49:06.627

该函数不能有两个返回值。您应该将错误消息字符串添加到您的复杂类型中。如果您不想触及复杂类型，那么您应该创建另一个包含您的数据类型和字符串的复杂类型。

示例 - 您现在拥有的复杂类型：

```
$server->wsdl->addComplexType('myData','complexType','struct','all','',
    array(  'important'  => array('name' => 'important','type' => 'xsd:string'),
            'stuff'      => array('name' => 'stuff','type' => 'xsd:string')
    )
); 
```

额外的复杂类型：

```
$server->wsdl->addComplexType('package','complexType','struct','all','',
    array(  'data'      => array('name' => 'data','type' => 'tns:myData'),
            'errormsg'  => array('name' => 'errormsg','type' => 'xsd:string')
    )
); 
```

函数注册：

```
$server->register(
                'getData',     
                array('validation'=>'xsd:string'), 
                array('return'=>'tns:package'),
                $namespace,
                false,
                'rpc',
                'encoded',
                'description'
); 
```

功能：

```
function GetData($validation)
{
    if($validation == "thegoodguy") {
        $result['data'] = array(
            "important"    => "a top secret information",
            "stuff"        => "another one"
        );
        $result['errormsg'] = null;
    } else {
        $result['data'] = null;
        $result['errormsg'] = "permission denied!";
    }
    return $result;
} 
```

这样，客户端可以尝试分析接收到的数据，如果它为空，那么他会显示错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T05:40:16.940

您首先需要定义一个描述字符串数组的新类型，如下所示：

```
$server->wsdl->addComplexType(
  'ArrayOfString',
  'complexType',
  'array',
  'sequence',
  '',
  array(
    'itemName' => array(
      'name' => 'itemName', 
      'type' => 'xsd:string',
      'minOccurs' => '0', 
      'maxOccurs' => 'unbounded'
    )
  )
); 
```

然后你可以使用 tns:ArrayOfString 作为返回类型。

# pascal - 常量表达式违反子范围界限

> ID：13990008
> 
> 赞同：1
> 
> 时间：2012-12-21T12:14:36.903
> 
> 标签：pascal

我有一个项目要重写为另一种语言，为了做到这一点 - 我想构建它。但是当我尝试构建它时，我收到“E1012：常量表达式违反子范围界限”。

我有这样的代码：

```
var ForTolkResult : array[0..2000] of char;

    ForTolkResult[sizeof(ForTolkResult)-1] := chr(0); // Occurs here 
```

从我的角度来看，这里的一切都是正确的`sizeof(ForTolkResult) = 2000 * 1`，所以`sizeof(ForTolkResult) - 1 = 1999`，这是在数组的范围内。（但我是 Pascal 的新手）那么这里有什么问题？

我正在尝试通过 Embarcadero C++ Builder 构建它。如果此错误是编译器中的错误，我该如何关闭此检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:36:53.060

char 真的会占用一个字节的内存吗？我的意思是，检查它是否是“Ansi”单字节字符而不是 WideChar。

无论如何，当您需要访问数组的最后一个索引时，您最好使用

```
ForTolkResult[High(ForTolkResult)] := chr(0); 
```

# javascript - 从子窗口为父窗口提供 href url 位置

> ID：13990010
> 
> 赞同：1
> 
> 时间：2012-12-21T12:14:51.223
> 
> 标签：javascript

当我在我的页面中单击注销时，它会调用 logout.php 进行 Twitter 注销。下面的代码在子窗口中打开 twitter 注销窗口，并刷新同一个父窗口以进行注销。

此外，用户单击子窗口中的注销按钮，他们将从 Twitter 中注销。我在这里要做的是，刷新时必须为父窗口提供一个 URL。

当父窗口刷新时，它保持 URL **"www.example.com/sitename/index.php"**。

我想将 URL 更改为 **"http://example.com/sitename/index.php"**。由于我的网站中以 WWW 开头的 URL 有问题

任何人都可以帮助我解决这个问题。提前致谢

**注销.php**

```
<?php
include("header.php");
    header("Location:https://twitter.com/#!/logout");
?>

<script>

function refreshParent()
{

  window.opener.location.href = window.opener.location.href;

  if (window.opener.progressWindow)

  {
    window.opener.progressWindow.close()
  }
    window.close();
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:36:55.257

您可以将这些行放在您的根 .htaccess 文件中，以向 www 请求发出非 www 请求。

```
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^example.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]

RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^example.com [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:01:45.923

该问题的解决方案是在我们单击主页中的注销时提供 URL。我们在为 session destroy 编写代码时必须给出下面的代码

```
<meta http-equiv="refresh" content="2;url=<?php echo URLPATH;?>"> 
```

此 URLPATH 是我们提到的 URL，因此在注销后父窗口会使用此 URL 刷新，无需单独编写函数

# ruby-on-rails - Rails 资产：部署期间预编译失败

> ID：13990011
> 
> 赞同：1
> 
> 时间：2012-12-21T12:14:53.483
> 
> 标签：ruby-on-rails, deployment, capistrano, asset-pipeline

当我突然意识到它有一个小错误时，我的小rails-app（基于refinerycms）运行良好。修复它，测试正常，提交，推送，部署，常规程序。然而这一次我的部署（之前已经工作了无数次）在我身上崩溃`assets:precompile`了

```
 * 2012-12-21 11:44:59 executing `deploy:assets:precompile'
    * executing "cd /home/somename/releases/20121221104442 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
      servers: ["ssh.alwaysdata.com"]
      [ssh.alwaysdata.com] executing command
  *** [err :: ssh.alwaysdata.com] rake aborted!
  *** [err :: ssh.alwaysdata.com] Invalid argument - /nfs/http9/somename/app/ttvz/releases/20121221104442/tmp/cache/assets/D17/790/sprockets%2F159b50b9f479a8cb2519ea6a40f09f92
  *** [err :: ssh.alwaysdata.com] /home/somename/app/ttvz/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/active_support/core_ext/file/atomic.rb:38:in `chown'
  ... 
```

当然还有一大堆 Stacktrace。我试图在网上找到一些东西，但失败了。当我尝试预编译`current`应用程序版本的资产时，同样的事情也发生了（这在开发中就像一个魅力）。

这似乎与`precompile`StackOverflow 上的其他问题不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:53:45.843

与公众的看法相反，这*不是*我的错误。我开始查找 of 的来源，`atomic.rb`并认为调用 to`chown`实际上最终什么*都不*做。因此，我在 alwaysdata 用户论坛上留下了一条消息，将其修补了。我的（丑陋的）小补丁部署再次像以前一样工作。

几个小时后，一位友好的工作人员告诉我，这让他怀疑最近的内核升级出了问题。他在同一天晚上修复了它，一切都恢复了（没有我的补丁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:33:55.310

它写在您的主机教程 (http://wiki.alwaysdata.com/wiki/Deploying_a_Rails_3_application) 中，您必须在开发环境中部署您的应用程序。在这种环境中，资产没有预编译，因此您不会遇到同样的问题。

我建议为 heroku 或 amazon 切换主机，您可以在生产环境中运行您的应用程序！

# symfony - 从编译器通道中访问服务

> ID：13990013
> 
> 赞同：0
> 
> 时间：2012-12-21T12:14:55.920
> 
> 标签：symfony

我的包中有这段代码

```
class MyPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $container->get("plugin")->loadServices($container);
    }
} 
```

当我通过网络浏览器正常运行应用程序时，一切似乎都很好。但是，如果我运行作曲家

```
"post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ] 
```

似乎试图从编译器类中获取服务将返回错误 ReflectionException: Class does not exist。有没有办法解决这个问题？

（该服务用于注册自定义插件的服务列表，它必须在编译器传递中的某处运行以允许 SF2 缓存它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:52:18.267

我所做的是重写我的代码，使其不依赖于从编译器传递中获取服务。

# java - 调用 Object 类的 wait() 方法时出现异常

> ID：13990016
> 
> 赞同：3
> 
> 时间：2012-12-21T12:15:03.500
> 
> 标签：java, oop

即使在通知当前线程（使用此）之后，以下代码也不会执行。

```
public synchronized void test() {
    String str = new String();
    try {
        System.out.println("Test1");
        this.wait();
        this.notifyAll();
        System.out.println("Test2");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        System.out.println("Inside exception");
        e.printStackTrace();
    }
 } 
```

我只`Test1`在控制台上得到输出。

在第二种情况下，如果我在字符串对象上调用 wait 方法，则会出现异常。原因是字符串类对象`str`没有锁定当前对象。但我想知道`str.wait()`实际上是什么意思？

```
public synchronized void test() {
    String str = "ABC";
    try {
        System.out.println("Test1");
        str.wait();
        str.notifyAll();
        System.out.println("Test2");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        System.out.println("Ins");
        e.printStackTrace();
    }
 } 
```

**控制台输出：**

```
> Test1  
java.lang.IllegalMonitorStateException 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:19:00.173

不确定您对该代码的期望：

1.  在您的第一个示例中，`wait`执行它所说的：它等待，因此`notifyAll`永远不会被调用
2.  在第二个示例中，您不能`wait`在不先持有该对象的监视器的情况下调用该对象。所以你需要在一个`synchronized(str)`块中以避免异常。但是您仍然会遇到与 1 中相同的问题。

`wait`and的主要用例`notify`是线程间通信，即一个线程等待，另一个线程通知等待的线程可以唤醒。在您的情况下，相同的线程位于通信通道的两端，这不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T12:30:07.350

`wait()`您应该学习如何`notify()`正确使用：来自 Effective Java (Josh Bloch)：

```
// The standard idiom for using the wait method
synchronized (obj) {
    while (<condition does not hold>)
    obj.wait(); // (Releases lock, and reacquires on wakeup)
    ... // Perform action appropriate to condition
} 
```

这使得当前线程正确地等待条件变为真。其他线程应该调用`notify()`或者`notifyAll()`当这个条件变为真时。

然而，来自 Josh 的更重要的建议是：Prefer concurrency utility to waitand notify

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T12:18:58.973

你不应该在同一个线程中一个接一个地`wait`调用。`notify`它们应该从不同的线程执行。如果您等待某些东西，则该控件不会在该线程中继续进行，直到某个其他线程将通知它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:21:05.733

关于您的第一种情况： wait 导致您当前的线程等待，直到另一个线程调用 notify() 方法或 notifyAll() 方法。因此，除非您在另一个线程中执行此操作，否则永远不会调用 notify all。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T12:23:43.317

在您的第一个片段中，当您调用`wait`. `notifyAll`没有执行，因为tread已经在等待。

通知需要在另一个线程上执行。

# ruby-on-rails - 尽管 API 有效，但 Swagger-ui 仅发送 OPTIONS 而不是 POST http 方法

> ID：13990021
> 
> 赞同：7
> 
> 时间：2012-12-21T12:15:31.287
> 
> 标签：ruby-on-rails, api, post, swagger, grape-api

我正在使用 Swagger-UI 来浏览我自己的 API，它是用葡萄构建的，并用葡萄招摇自动记录。

我已经用谷歌搜索并尝试了我能找到的每一个建议，但我无法让 POST 工作。这是我的标题：

```
 header "Access-Control-Allow-Origin", "*"
  header "Access-Control-Allow-Methods", "POST, GET, OPTIONS, PUT, PATCH, DELETE"
  header "Access-Control-Request-Method", "*"
  header "Access-Control-Max-Age", "1728000"
  header "Access-Control-Allow-Headers", "api_key, Content-Type" 
```

我只是提出了所有建议。我已经在supportedSubmitMethods 中启用了所有HTTP 方法，并且我已经使用POSTMAN Chrome 扩展测试了API，它运行良好。正确创建用户并返回正确的数据。

然而，我通过招摇的帖子得到的只是服务器报告：

```
Started OPTIONS "/v1/users.json" for 127.0.0.1 at 2012-12-21 04:07:13 -0800 
```

和招摇的反应看起来像这样：

请求网址

```
http://api.lvh.me:3000/v1/users.json 
```

响应体

响应代码

```
0 
```

响应标头

我还用 POSTMAN 测试了 OPTIONS 响应，如下所示：

```
Allow →OPTIONS, GET, POST
Cache-Control →no-cache
Date →Fri, 21 Dec 2012 12:14:27 GMT
Server →Apache-Coyote/1.1
X-Request-Id →9215cba8da86824b97c6900fb6d97aec
X-Runtime →0.170000
X-UA-Compatible →IE=Edge 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T21:22:19.583

我遇到了同样的问题，刚刚解决了，希望这对某人有所帮助。

Swagger-UI 通过 POST 接受多个参数，仅通过“表单”参数类型，而不是“正文”参数类型，在本期[https://github.com/wordnik/swagger-ui/issues/72](https://github.com/wordnik/swagger-ui/issues/72)中引用。

我使用了分支：git => 'git://github.com/Digication/grape-swagger.git' 将 'post' 请求 paramType 更改为 'form'。为 swagger_doc 生成的 xml 输出（可能位于 path/swagger_doc/api 或类似位置）应如下所示：

```
<api>
  <path>/api/v2/...</path>
    <operations type="array">
      ...
      <httpMethod>POST</httpMethod>
        <parameters type="array">
          <parameter>
            <paramType>form</paramType>
            ...More 
```

不是

```
<paramType>body</paramType>
...More 
```

我使用grape-swagger-rails gem 在localhost 上自动安装swagger-ui（文件也可以从swagger-ui 站点下载），一切正常！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T12:02:40.520

有同样的问题。通过添加 CORS 修复

添加到 Gemfile：

```
gem 'rack-cors', :require => 'rack/cors' 
```

添加到 application.rb

```
config.middleware.use Rack::Cors do
    allow do
      origins '*'
      # location of your API
      resource '/*', :headers => :any, :methods => [:get, :post, :options, :put]
    end
end 
```

确保您在此处更改了 API 的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T05:43:32.570

我不知道解决方案，`ruby-on-rails`因为我将 Swagger 与`play framework 2.0.2`. 我为它提供了一个域名，并将 basePath 更改为 application.conf 文件中的域名，`swagger.api.basepath="domain-name"`并且它工作正常。您可以将`basePath`in更改`api-docs`为`domain-name`. 我阅读了`api-docs`关于 [api-docs](https://github.com/wordnik/swagger-core/blob/master/samples/ruby-source2swagger/public/api-docs)的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T05:36:40.427

您的网络服务器是否劫持了标头？例如，如果您使用 NGinx，在某些情况下，您的“OPTIONS”请求可能不会发送适当的值作为响应。

您的 OPTIONS 请求响应是什么？你能把它扔在这里吗？我会告诉你是否可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T22:46:15.087

很高兴听到你在使用葡萄招摇：我认为这很棒:)

我不完全确定你有同样的问题，但是当从浏览器进行本地测试时，它会尝试检查来源是否与请求的相同，所以为了确保我没有收到那个错误，我创建了一个小的中间件将告诉浏览器我们允许所有来源。

我正在使用 rails 进程（使用出色的 rails-api gem 创建），因此我创建了一个`lib/middleware/access_control_allow_all_origin.rb`包含以下内容的新文件：

```
module Middleware
  class AccessControlAllowAllOrigin

    def initialize(app)
      @app = app
    end

    def call(env)
      status, headers, body = @app.call(env)
      allow_all_origin!(headers)
      [status, headers, body]
    end

    private

    def allow_all_origin!(headers)
      headers['Access-Control-Allow-Origin'] = '*'
      headers['Access-Control-Request-Method'] = '*'
    end

  end
end 
```

在我的底部，我`application.rb`只是添加了中间件，如下所示：

```
require 'middleware/access_control_allow_all_origin'
config.middleware.insert_after Rack::ETag, Middleware::AccessControlAllowAllOrigin 
```

希望这可以帮助。

# css - Firefox 中的背景位置在我的 Mac 和其他 Mac 上有所不同

> ID：13990028
> 
> 赞同：-3
> 
> 时间：2012-12-21T12:15:58.737
> 
> 标签：css, firefox, background, position

我发生了一件非常奇怪的事情。

在我目前正在开发的[网站](http://www.mikolajgrzyb.com)上，社交和电子邮件按钮的背景定位在我的 Mac 与其他计算机之间存在很大差异。

这就是它在我的屏幕上以 1600 x 1000 分辨率显示的样子（我还检查了其他的，所以可能不是这样）

[![我的问题的屏幕](../Images/f935ccecfb4e22d189c9642b427b01f7.png)](https://i.stack.imgur.com/jk7x2.png)
[（来源：[mikolajgrzyb.com](http://www.mikolajgrzyb.com/images/ekrna.png)）]

问题是：为什么会发生，我该如何解决这个问题（在每台计算机上正确显示）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:11:34.430

当您在 CSS 中定位背景时，您将 em 与 px 混合在一起，这可能是它看起来不同的原因。

```
.bluebtn {
    background: url("../images/icons.svg") no-repeat scroll 0 -2.7em transparent;
} 
```

您应该只使用 em 来调整字体大小。

检查其中一些链接，了解何时使用什么：

*   [em, px, pt, cm, in…</a>](http://www.w3.org/Style/Examples/007/units)
[](http://www.w3.org/Style/Examples/007/units)
*   [为什么是 em 而不是 px？](https://stackoverflow.com/questions/609517/why-em-instead-of-px)

> **当您想要定义与当前字体中字符大小相关的内容时，应该使用**em 。**除非您已覆盖字体样式（例如使用 px 单位），否则这将受到用户浏览器或操作系统中字体选择的影响（如果他们已经制作了字体），因此将 em 用作一般长度单位是没有意义的除非您特别希望它随着字体大小的缩放而缩放。**

 **## 有用的建议

预加载图像。第一次将鼠标悬停在您的按钮上会使它滞后。

你右边的列表很烦人。考虑一种更用户友好的方法，在鼠标移出后它不会向上滚动，请使用该`click-to-open click-to-close`方法。您现在使用的方法使得在列表项之间导航变得困难。
它似乎有时也会卡住。

考虑为非链接的文本使用不同于蓝色的颜色。对于习惯于蓝色链接文本的普通用户来说，这可能会让人感到困惑。

你拼错了处理、响应、切割、准备和布局。
`I`应始终大写。**

# qt4 - How to save values from serial port in Qt,into the computer and print the graph of it when required?

> ID：13990032
> 
> 赞同：0
> 
> 时间：2012-12-21T12:16:14.763
> 
> 标签：qt4

Now I have plotted the graph of the values received from serial port in Qt. Now i want to save these values in computer and replot the graph when required and print it. how to do it?

# objective-c - shouldChangeCharactersInRange : 不能正常工作

> ID：13990033
> 
> 赞同：1
> 
> 时间：2012-12-21T12:16:15.717
> 
> 标签：objective-c, delegates, uitextfield

我正在尝试检查输入到文本字段中的每个字符，然后尝试根据输入的最后一个字符打印一些内容。
这是我的代码：

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string   
{
        if ([textField.text hasSuffix:@"1"]) {
            NSLog(@"Number : %@",textField.text);
        }
        else
        {
            NSLog(@"NOT ONE : %@",textField.text);
        }
return YES;
} 
```

这意味着，只有在输入 1 时，必须在日志中打印“NUMBER : 1”，否则必须打印“NOT ONE : a”或其他内容。

但我得到以下输出：

> 输入是：123456123

```
2012-12-21 17:41:14.365 vmsipPhone[1866:c07] NOT ONE : 
2012-12-21 17:41:16.125 vmsipPhone[1866:c07] Number : 1
2012-12-21 17:41:17.549 vmsipPhone[1866:c07] NOT ONE : 12
2012-12-21 17:41:19.037 vmsipPhone[1866:c07] NOT ONE : 123
2012-12-21 17:41:20.100 vmsipPhone[1866:c07] NOT ONE : 1234
2012-12-21 17:41:21.694 vmsipPhone[1866:c07] NOT ONE : 12345
2012-12-21 17:41:24.844 vmsipPhone[1866:c07] NOT ONE : 123456
2012-12-21 17:41:25.725 vmsipPhone[1866:c07] Number : 1234561
2012-12-21 17:41:26.836 vmsipPhone[1866:c07] NOT ONE : 12345612 
```

问题是，当我输入 1 时出现第一个 NOT ONE
然后当我输入 2 时： Number : 1 出现
它就像一个字符的滞后。

有人可以解释为什么会这样。我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:20:10.400

在更改内容**之前**调用此方法。`textField.text`当您`YES`从该方法返回时，将应用更改。您应该创建一个临时字符串，使用范围和替换字符串对其进行修改，然后对其进行测试。

例如：

```
NSMutableString *testString = [NSMutableString stringWithString:textField.text];
[testString replaceCharactersInRange:range withString:string];
if ([testString hasSuffix:@"1"]) {
  // ... 
```

# 3d - Overlap a heatmap in a 3d Matplotlib plot

> ID：13990037
> 
> 赞同：1
> 
> 时间：2012-12-21T12:16:38.823
> 
> 标签：3d, matplotlib, plot, heatmap

I am a newbie in matplotlib and I don't know where to look for that...

I want to plot data, where X and Y are parameters of a problem, then Z shows the resolution time for that problem with that parameters. But in the plot surface I want to show the hardness or the satisfiablility of the problem with a heatmap.

Is there any way for doing that?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:20:02.233

取自[matplotlib 示例](http://matplotlib.org/1.2.0/examples/mplot3d/surface3d_demo3.html)：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
from matplotlib.ticker import LinearLocator
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.arange(-5, 5, 0.25)
xlen = len(X)
Y = np.arange(-5, 5, 0.25)
ylen = len(Y)
X, Y = np.meshgrid(X, Y)
R = np.sqrt(X**2 + Y**2)
Z = np.sin(R)

colortuple = ('y', 'b')
colors = np.empty(X.shape, dtype=str)
for y in range(ylen):
    for x in range(xlen):
        colors[x, y] = colortuple[(x + y) % len(colortuple)]

surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, facecolors=colors,
        linewidth=0, antialiased=False)

ax.set_zlim3d(-1, 1)

ax.w_zaxis.set_major_locator(LinearLocator(6))

plt.show() 
```

您可以将颜色传递给 3d 曲面图。

# playframework-2.0 - 未解决的本地依赖与 SBT、Maven、Windows 上的 Play 2.0

> ID：13990050
> 
> 赞同：0
> 
> 时间：2012-12-21T12:17:28.300
> 
> 标签：playframework-2.0, sbt

我有一个名为 Carpooling 的第一个项目，它是域项目。第二个项目是名为“proto-search”的 Play 2.0 项目

`C:\Users\Java\.m2\repository`我已经为 Carpooling 运行了 mvn install，并且 jar 目标与所有其他库一起位于其位置。

但是当我`play run`在“proto-search”目录中启动时，除了拼车依赖项之外，所有依赖项都已解决。我有 ：

```
[warn]  module not found: com.s20#biim-model;1.3-SNAPSHOT
[warn] ==== local: tried
[warn]   D:\code\play-2.0.4\framework\..\repository/local/com.s20/biim-model/1.3
-SNAPSHOT/ivys/ivy.xml
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/s20/biim-model/1.3-SNAPS
HOT/biim-model-1.3-SNAPSHOT.pom
[warn] ==== Typesafe Snapshots Repository: tried
[warn]   http://repo.typesafe.com/typesafe/snapshots/com/s20/biim-model/1.3-SNAP
SHOT/biim-model-1.3-SNAPSHOT.pom
[warn] ==== OSS Sonatype: tried
[warn]   http://oss.sonatype.org/content/repositories/releases/com/s20/biim-mode
l/1.3-SNAPSHOT/biim-model-1.3-SNAPSHOT.pom
[warn] ==== Local Maven Repository: tried
[warn]   file://C:/Users/Java/.m2/repository/com/s20/biim-model/1.3-SNAPSHOT/bii
m-model-1.3-SNAPSHOT.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/s20/biim-model/1.3-SNAPSHOT/biim-mode
l-1.3-SNAPSHOT.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.s20#biim-model;1.3-SNAPSHOT: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/D:/code/biiim/proto-search/}searchengine/*:update: sbt.ResolveExc
eption: unresolved dependency: com.s20#biim-model;1.3-SNAPSHOT: not found 
```

我确实有文件`C:/Users/Java/.m2/repository/com/s20/biim-model/1.3-SNAPSHOT/biim-model-1.3-SNAPSHOT.pom`

我的平台目前是 Windows。我的队友都使用linux，没有问题。也许是*file://*不起作用，但我尝试了一些解决方法但没有成功。

任何的想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T16:03:15.593

在你的 Build.scala 中试试这个：

```
object ApplicationBuild extends Build {

val appName         = "airplane"
val appVersion      = "1.0-SNAPSHOT"

val appDependencies = Seq(
    "org.scalatest" % "scalatest_2.9.2" % "2.0.M4" % "test",
    "postgresql" % "postgresql" % "9.1-901-1.jdbc4"
)

// tip from http://www.scala-sbt.org/release/docs/Getting-Started/Library-Dependencies.html
resolvers += "Local Maven Repository" at "file://"+Path.userHome.absolutePath+"/.m2/repository"

val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  testOptions in Test := Nil  // hack to allow us to use scalatest for "play test" rather than specs2    
) 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:35:34.997

向解析器值添加第三个正斜杠：

resolvers += "Local Maven Repository" at "file:///"+Path.userHome.absolutePath+"/.m2/repository"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T02:31:45.867

based on what Todd Flanders answered, It worked for me using only one forward slash in the resolvers part:

resolvers += "Local Maven Repository" at "file:/"+Path.userHome.absolutePath+"/.m2/repository"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T07:59:14.533

On Windows, I used an unmanaged dependency in the Play Framework. And I quickly moved to Linux and macOS where there was no problem.

# php - 检查下载链接是否在php中失效？

> ID：13990059
> 
> 赞同：0
> 
> 时间：2012-12-21T12:18:07.387
> 
> 标签：php

如果我得到页面的标题，我可以判断下载链接是活动的还是失效的。

例如：“**免费在线存储**”是死链接的标题，“ **[文件名]** ”是活动链接的标题**（mediafire）**。但是我的页面响应时间太长，那么有没有其他方法可以检查下载链接是活动的还是失效的？

这就是我所做的：

```
<?php

function getTitle($Url){
$str = file_get_contents($Url);
if(strlen($str)>0){
    preg_match("/\<title\>(.*)\<\/title\>/",$str,$title);
    return $title[1];
}
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:22:38.077

不执行 GET 请求，下载整个页面/文件，而是执行 HEAD 请求，仅获取 HTTP 标头，并检查状态是否为 200，并且内容类型不是 text/html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:26:37.317

像这样的东西...

```
function url_validate($link)
{
    #[url]http://www.example.com/determining-if-a-url-exists-with-curl/[/url]
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $link);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 10); //follow up to 10 redirections - avoids loops
    $data = curl_exec($ch);
    curl_close($ch);
    preg_match_all("/HTTP\/1\.[1|0]\s(\d{3})/",$data,$matches);

    $code = end($matches[1]);

    if(!$data) 
    {
        return(false);
    } 
    else 
    {
        if($code==200) 
        {
            return(true);
        } 
        elseif($code==404) 
        {
            return(false);
        }
    }
} 
```

您可以安全地使用任何 cURL 库函数。这是合法的，因此不会被视为黑客攻击。唯一的要求是您的网络托管公司安装了 cURL 扩展，这很有可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:23:46.070

`cURL`应该做的工作。如果需要，您也可以检查返回的标题和文本内容。

# php - 如何在 Joomla 文章中插入 XML 示例代码？

> ID：13990060
> 
> 赞同：0
> 
> 时间：2012-12-21T12:18:07.793
> 
> 标签：php, joomla, content-management-system, joomla2.5, joomla-extensions

我正在 Joomla 2.5 中构建一个站点，其中涵盖与编程相关的主题。

我尝试了各种插件，在我的文章中插入 java、javascript 和 php 代码没有问题（带有缩进行号的经典视图）

当我尝试插入 XML 时出现问题。

目前我正在使用插件 Code HighLight （但我发现其他插件也一样）。

要在我的文章中插入 XML 代码，我必须在我的文章中这样做：

```
{code class="brush: xml;"}CODE HERE{/code} 
```

问题是，如果我插入 Java 或 Js 或 php 代码我没有问题，但如果我尝试在我的文章中以这种方式插入 XML 代码，它看起来很糟糕（部分缺失）

我也尝试将它直接插入 HTML（通过按下按钮 HTML 编辑器 TinyMCE），但是一旦插入，当我回到 WYSIWING 编辑器时，再次出现此问题。

在插件说明中，我可以阅读：

**当心你的可视化编辑器（例如 JCE 或 JCK），它可以在你的代码中放置标签，在这段代码变得无效之后！**

我使用 TinyMCE 作为编辑器（它始终是 WYSIWYG 编辑器），如果我禁用图形编辑器（在 Joomla 全局配置中将编辑器设置为 void）或者如果我选择 CodeMirror 编辑器（它是一个简单的 HTML 编辑器，而不是 WYSIWING 编辑器）如果我以以前的方式插入 XML 代码......工作得很好！

问题是我需要一个图形编辑器（设置我的文章文本的样式），同时我需要在我的文章中插入 XML 代码片段......

我观察到使用许多代码片段插件的行为......问题不是插件问题，但我认为它与 WYSIWING 编辑器有关，该编辑器似乎将其标签插入 XML 代码或至少使其变脏（消除部分和插入一些标签，如

)

如何在我的文章中包含 XML 代码片段并同时拥有 WYSIWING 编辑器？（如果问题是 TinyMCE，我也可以尝试其他一些 WYSIWING 编辑器......）

谢谢安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T19:54:59.127

你可以做一个或另一个......你不能同时做。我的建议是：执行页面的 WYSIWYG 部分...关闭 WYSIWYG 编辑器...然后插入您的 xml...并且永远不要再次打开 WYSIWYG 编辑器返回该页面。

我在我的网站中插入 xml 时遇到了同样的问题。

如果您已退出 joomla 并重新登录...默认为 WYSIWYG 编辑器。

因此，如果您打开文章/模块/插件并以所见即所得的方式打开，它会清除您插入页面的 xml。只需切换 WYSIWYG 编辑器，使其关闭……然后关闭文章（不要保存并关闭）……关闭即可。然后再次打开文章/模块/插件...它应该只是 html 编辑器...和代码。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:57:56.640

您可以尝试扩展[代码显示。](http://extensions.joomla.org/extensions/edition/code-display)

我读到的另一个解决方案是 1) 激活 Content - Code Highlighter (GeSHi) 2)[在此处](http://qbnz.com/highlighter/demo.php)生成您的代码 3) 在 WYSIWYG 编辑器中 C&P 生成的代码

# c++ - 如果我不关心返回值，我是否需要 pthread_exit

> ID：13990067
> 
> 赞同：5
> 
> 时间：2012-12-21T12:18:32.303
> 
> 标签：c++, c, pthreads

如果我不关心我的线程的返回状态，我需要一个 pthread_exit 吗？

我想知道是否可能存在一些与在我的数据化 pthread 中不调用 pthread_exit 相关的微妙资源问题。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:27:02.400

目的是在任何其他线程*加入*`pthread_exit()`时返回退出代码。

 *从[手册](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_exit.3.html)：

```
 Performing a return from the start function of any thread other than the main
   thread results in an implicit call to pthread_exit(), using the function's
   return value as the thread's exit status. 
```

因此，如果您不使用它，则没有任何区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T12:25:40.170

你不必打电话`pthread_exit()`。从线程函数返回同样可以正常工作，并且不会泄漏任何资源（当然，您仍然必须确保*您的*代码没有任何泄漏）。*

# objective-c - 未运行 textFieldShouldReturn 方法

> ID：13990070
> 
> 赞同：-1
> 
> 时间：2012-12-21T12:18:35.827
> 
> 标签：objective-c, ios, xcode

我昨天刚开始阅读Objective-C，我不太明白为什么我的

```
textFieldShouldReturn 
```

方法没有运行。

这是实际的方法：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    self.itemTxt.text = @"Return pressed";
    return YES;
} 
```

这是我的头文件中的接口行：

```
@interface ArrViewController : UIViewController <UITextFieldDelegate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:20:38.913

您需要主动设置委托`UITextField`：

例如，`viewDidLoad`你可以写：

```
myTextField.delegate = self; 
```

如果需要，您也可以在 Interface Builder 中连接它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:21:37.083

使用你的文本字段的 setDelegate 方法来自我

# macos - 没有 NCLC 原子的 QuickTime 文件使用什么颜色传输函数？

> ID：13990073
> 
> 赞同：0
> 
> 时间：2012-12-21T12:19:01.040
> 
> 标签：macos, quicktime, color-space

我有各种 1080P QuickTimes 文件，这些文件使用通过 QuickTime 和 Handbrake 创建的 H.264 和 MPEG-4 编解码器。他们似乎没有 NCLC 原子。我想知道使用哪个传递函数来生成 RGB 视频。

在 Finder 检查器下，一些文件是 HD(1-1-1)，其他文件没有任何信息。在[TN2227](http://developer.apple.com/library/mac/#technotes/tn2227/_index.html)表 1 中显示，高清视频应使用 ITU-R709，标清视频应使用 ITU-R601。如何确定 QuickTime 是否决定它是 1-1-1 或考虑文件 HD ？

是否有功能可以找出或我必须使用类似的东西`if((number_of_rows > 576) and (aspect > 3:2)) then HD = true`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T21:20:24.817

根据[TN2227](https://developer.apple.com/library/mac/technotes/tn2227/_index.html)，

> 重要提示：没有“nclc”标签的媒体将由 QuickTime X 进行色彩管理，就好像它是在 SMPTE-C 色彩空间中创建的一样。

# wpf - VS2012 的表达式混合

> ID：13990080
> 
> 赞同：0
> 
> 时间：2012-12-21T12:19:39.003
> 
> 标签：wpf, visual-studio-2012, blend

我已经使用 VS2010 在 WPF 中开发了几个月，并且刚刚升级到 VS2012 Professional，并注意到它带有 Blend for VS。

这是否有望取代 VS 中的 GUI 设计，还是用于执行 VS 中无法完成的“额外”位？

我想知道我是否需要花时间学习这个新工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:26:22.400

Blend 主要用于简化应用程序的设计。它可以用来代替 Visual Studio 设计器，但最好使用 VS 来创建后端代码。假设您在 VS 和 Blend 中打开了相同的项目，当您在其中一个项目中进行更改时，另一个将要求重新加载这些新更改。

Blend 使编写 XAML 变得更加容易（因为它是一个所见即所得的编辑器），而且还提供了对一些更复杂的方面（例如数据绑定）的轻松访问。您可以在 VS 中手动完成所有这些操作，但 Blend 只会让它更有效率。从设计师的角度来看，它还具有更好的工作流程功能，例如能够放大和缩小。

您不必学习使用它，但我更喜欢将 Blend 用于 GUI 设计，将 VS 用于代码隐藏。

# android - 如何在 android 上更新本机联系人照片？

> ID：13990084
> 
> 赞同：4
> 
> 时间：2012-12-21T12:19:54.330
> 
> 标签：android, android-contacts, android-contentresolver

我正在开发一个示例应用程序，只是为了插入、更新和删除本机 android 联系人。我能够成功插入、更新和删除联系人。但是更新联系人照片的问题。下图是同一联系人有两个不同问题的观察结果。 ![图1](../Images/9c419e27e81d53a4c5385355aeef677a.png) ![图2](../Images/e23f894e0952b30ded61453211f3e53e.png)

更新联系人后，第一个图像仍然显示旧图像。但是，当我查看完整详细信息时，我可以查看新更新的联系人图像，如第二张图像所示。下面是更新联系人图像的代码。

```
 mBitmap =getAllowedPhotoBitmap(photo);
 mBitmap = ThumbnailUtils.extractThumbnail(mBitmap, THUMBNAIL_SIZE, THUMBNAIL_SIZE);
 ByteArrayOutputStream stream = new ByteArrayOutputStream();
    if(mBitmap!=null){    // If an image is selected successfully
        mBitmap.compress(Bitmap.CompressFormat.PNG ,100, stream);
      op = ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI);
      op.withSelection(ContactsContract.Data.CONTACT_ID + "=?" + " AND " +               ContactsContract.Data.MIMETYPE + "=?", new String[{String.valueOf(native_contactid), ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE});
     op.withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, stream.toByteArray());
     ops.add(op.build());
} 
```

有什么问题，我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:07:57.177

这是一个开源应用程序：[https ://github.com/heinrisch/Contact-Picture-Sync/blob/master/src/heinrisch/contact/picture/sync/ContactHandler.java](https://github.com/heinrisch/Contact-Picture-Sync/blob/master/src/heinrisch/contact/picture/sync/ContactHandler.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T08:50:23.327

此文件将帮助您设置带有联系人 ID 的联系人的图片

[https://github.com/heinrisch/Contact-Picture-Sync/blob/master/src/heinrisch/contact/picture/sync/ContactHandler.java](https://github.com/heinrisch/Contact-Picture-Sync/blob/master/src/heinrisch/contact/picture/sync/ContactHandler.java)

```
void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        // Check for the request code, we might be usign multiple
        if (requestCode == PICK_CONTACT_REQUEST) {
            Uri contactUri = data.getData();                
            String[] projection = {Phone.CONTACT_ID,Phone.NUMBER,ContactsContract.Data.RAW_CONTACT_ID,ContactsContract.Data._ID };
            Cursor cursor = getContentResolver().query(contactUri, projection, null, null, null);
            cursor.moveToFirst();

            int columcontactID = cursor.getColumnIndex(Phone.CONTACT_ID);
            String contactID = cursor.getString(columcontactID);

            Bitmap item = (imgBg.getVisibleRectangleBitmap());

            setContactPicture(AtWallpaperDetails.this, contactID, item);
        }
    }
} 
```

# python - python：使用错误消息改进功能的最佳方法

> ID：13990085
> 
> 赞同：0
> 
> 时间：2012-12-21T12:19:56.640
> 
> 标签：python, performance, error-handling, coding-style

我希望改进以下功能。[给定GDAL](http://www.gdal.org/gdal_8h.html)中的像素数据类型（例如：“Int16”）返回代码编号。

```
def GDAL_data_type(dataType):
    dtypes = {
        "Unknown": 0,
        "Byte": 1,
        "UInt16": 2,
        "Int16": 3,
        "UInt32": 4,
        "Int32": 5,
        "Float32": 6,
        "Float64": 7,
        "CInt16": 8,
        "CInt32": 9,
        "CFloat32": 10,
        "CFloat64": 11
        }
    return dtypes[dataType]

GDAL_data_type("Int16")
3 
```

我希望在函数中插入一条错误消息，如果您键入不同的数据类型，错误消息会说：

```
raise SystemExit('Pixel data type no recognized %s' % dataType) 
```

我想问在我的函数中插入此错误消息的最佳方法。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:24:19.543

将字典查找包装在 try 块中，捕获 keyerror 异常，并从 catch 块中引发您自己的异常：

```
try:
  return dtypes[dataType]
except KeyError:
  raise ... 
```

**编辑**

或者更全面：

```
def GDAL_data_type(dataType):
    dtypes = {
        "Unknown": 0,
        "Byte": 1,
        "UInt16": 2,
        "Int16": 3,
        "UInt32": 4,
        "Int32": 5,
        "Float32": 6,
        "Float64": 7,
        "CInt16": 8,
        "CInt32": 9,
        "CFloat32": 10,
        "CFloat64": 11
        }
    try:
        return dtypes[dataType]
    except KeyError:
        raise ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:43:39.940

您可以将 return 语句放在 try 块中并捕获任何异常，或者您可以创建 a`default dictionary`并将所有值放在`default dictionary`.The中，`default dictionary`如果元素不存在则返回零。

您可以像这样初始化默认字典

```
from collections import defaultdict
dtypes=defaultdict(int)
dtypes.update({
        "Unknown": 0,
        "Byte": 1,
        "UInt16": 2,
        "Int16": 3,
        "UInt32": 4,
        "Int32": 5,
        "Float32": 6,
        "Float64": 7,
        "CInt16": 8,
        "CInt32": 9,
        "CFloat32": 10,
        "CFloat64": 11
        }) 
```

您可以使用该`get()`方法检索该值。如果您尝试检查字典中没有的值，它将返回**0**，您可以检查它是否返回零并打印错误消息

例子：

`dtypes.get("Int16",0)`将返回 3

`dtypes.get("xyz",0)`将返回 0，因为 0 被设置为默认值，当找不到键时返回

您可以使用`if`条件来检查值并打印错误消息（如果是`0`）。这将帮助您设置自己的自定义错误消息或执行您可能需要执行的任何其他处理

# python - 弹性搜索和日期范围过滤器

> ID：13990088
> 
> 赞同：2
> 
> 时间：2012-12-21T12:20:08.467
> 
> 标签：python, elasticsearch

[我正在尝试使用rawes](https://github.com/humangeo/rawes) python 绑定按日期过滤弹性搜索查询。如果我删除数据库，指定该`datetime`字段是[date_optional_time](http://www.elasticsearch.org/guide/reference/mapping/date-format.html)，在弹性搜索数据库中插入几行，然后使用字段上的[范围过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/range-query.html)`datetime`查询它，我没有得到任何结果（见下文）。知道我做错了什么吗？

```
>>> result = es.delete(root_url)
>>> result = es.put(root_url+"_mapping", data={
    "tweet": {
        "properties": {
            "datetime": {
                "type": "date", 
                "format": "date_optional_time"
            },
        }
    },
})
>>> result = es.post(root_url, data={
    "datetime": "2012-12-20 12:00:00",
    "name": "freddy",
    "text": "hello world",
})
>>> result = es.post(root_url, data={
    "datetime": "2012-11-20 12:00:00",
    "name": "julie",
    "text": "welcome to the wonderful world of cooking",
})
>>> result = es.get(root_url+"_search", data={
    "query": {
        "range": {  # expect this to return the one result on 2012-12-20
            "datetime": {
                "gte":"2012-12-01", # do not append "T00:00:00"; too slow!
                "lte":"2012-12-31", # do not append "T23:59:59"; too slow! 
            }
        }
    }
})
>>> pprint.pprint(result)
{u'_shards': {u'failed': 0, u'successful': 5, u'total': 5},
 u'hits': {u'hits': [], u'max_score': None, u'total': 0},
 u'timed_out': False,
 u'took': 4} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T16:50:24.813

问题显然在于我如何将日期编码为字符串（注意字符串`T`中的“”）。这有效：

```
>>> result = es.post(root_url, data={
    "datetime": "2012-12-20T12:00:00",
    "name": "freddy",
    "text": "hello world",
})
>>> result = es.post(root_url, data={
    "datetime": "2012-11-20T12:00:00",
    "name": "julie",
    "text": "welcome to the wonderful world of cooking",
})
>>> result = es.get(root_url+"_search", data={
    "query": {
        "range": {  # expect this to return the one result on 2012-12-20
            "datetime": {
                "gte":"2012-12-01", 
                "lte":"2012-12-31",
            }
        }
    }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:02:02.833

您可以尝试使用 post 而不是 get 来启动您的请求吗？我不知道 pyes 是如何工作的，但在其他一些客户端中，使用 GET 而不是 POST 时不会发送有效负载。

```
>>> result = es.post(root_url+"_search", data={
    "query": {
        "range": {  # expect this to return the one result on 2012-12-20
            "datetime": {
                "gte":"2012-12-01", 
                "lte":"2012-12-31",
            }
        }
    }
}) 
```

它有效吗？

# jsf - 如何使用 将 103.99 转换为 .99

> ID：13990089
> 
> 赞同：1
> 
> 时间：2012-12-21T12:20:08.507
> 
> 标签：jsf, number-formatting

我正在尝试仅使用`<f:convertNumber>`. 例如`103.99`必须导致`.99`.

```
<h:outputText value="#{myBean.totalFare}">
    <f:convertNumber pattern="#,##0.00" />
</h:outputText> 
```

这不起作用。我也尝试使用模式`,##.00`and `,##`，但失败了。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:51:30.043

这是不可能的`<f:convertNumber>`。它的目的不是操纵数字（阅读：对其进行任何数学运算），但它的目的是格式化/转换它。

您应该首先用 1 的模数修剪整数部分。

```
<h:outputText value="#{myBean.totalFare % 1}"> 
```

然后你可以使用模式`.##`来只显示两个分数：

```
<h:outputText value="#{myBean.totalFare % 1}">
    <f:convertNumber pattern=".##" />
</h:outputText> 
```

# wpf - wpf 工具提示在应用程序中添加额外的字符串

> ID：13990097
> 
> 赞同：1
> 
> 时间：2012-12-21T12:20:24.653
> 
> 标签：wpf, tooltip

与[此](https://stackoverflow.com/questions/8080342/wpf-tooltips-set-duration-across-application)类似，但更复杂。

我需要使用有关此控件的其他信息来覆盖所有工具提示（以及所有可以拥有但现在没有的控件）。我想放一些类似的东西

```
sender.ToolTip =+ "\n\r" + sender.Name + "(" + sender.Tag + ")"; 
```

但谷歌了一下，没有成功。

* * *

更新

```
 protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        EventManager.RegisterClassHandler(typeof(FrameworkElement), FrameworkElement.ToolTipOpeningEvent, new RoutedEventHandler((s, e2) =>
        {
            var fe = s as FrameworkElement;
            fe.ToolTip = fe.ToolTip + "\n\r(" + fe.Name + ")";
            //fe.Name + " " + fe.Tag;
        }));

        new MainWindow();
    } 
```

几乎可以工作，但是：

*   对于没有定义工具提示的组件，没有可见的工具提示
*   对于定义了工具提示的组件，它会在每个显示工具提示事件上增加价值
*   我不得不将 (s, e) 重命名为 (s, e2) 因为 e 已经定义

* * *

更新消除了空异常并防止重复条目

```
 EventManager.RegisterClassHandler(typeof(FrameworkElement), FrameworkElement.ToolTipOpeningEvent, new RoutedEventHandler((s, e2) =>
        {
            var fe = (FrameworkElement)s;

            //skip already updated tooltips
            if (fe.ToolTip.ToString().Contains(fe.Name)) return;

            //update tooltip value
            fe.ToolTip = (fe.ToolTip + Environment.NewLine + "(" + ( fe.Tag != null 
                ? string.Join(": ", fe.Name, fe.Tag) 
                : fe.Name
            ) +  ")").Trim();
        })); 
```

仍然不知道如何在没有工具提示的情况下覆盖组件-也许我可以将“”工具提示分配给所有按钮和其他类型的控件，而不是更新已配置的控件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:47:08.137

切斯克！

您可以使用 WPF 中可用的路由事件基础结构来执行此操作。

像这样调用[EventManager.RegisterClassHandler](http://msdn.microsoft.com/en-us/library/ms597875.aspx)方法：

```
EventManager.RegisterClassHandler(typeof(FrameworkElement), FrameworkElement.ToolTipOpeningEvent, new RoutedEventHandler((s, e) =>
            {
                var fe = s as FrameworkElement;
                fe.ToolTip = fe.Name + " " + fe.Tag;                
            })); 
```

您可以将此代码添加到构造函数下的 App.xaml.cs 中：

```
protected override void OnStartup(StartupEventArgs e) 
{ 
    base.OnStartup(e); 
    <code goes here> 
} 
```

# database - “com.microsoft.sqlserver.jdbc.SQLServerException：无效的对象名称”的所有可能原因是什么

> ID：13990098
> 
> 赞同：4
> 
> 时间：2012-12-21T12:20:32.140
> 
> 标签：database, sql-server-2008, jboss

自上次 2-3 小时以来，我一直在使用我的应用程序。突然开始关注异常。

```
Caused by: org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.loader.Loader.doList(Loader.java:2216)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    at org.hibernate.loader.Loader.list(Loader.java:2099)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
    at com.k2.util.HibernateQuery.execute(HibernateQuery.java:32)
    ... 107 more
 Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'EMP_INFO_TBL'.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:156)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1373)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:371)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:322)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4003)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1550)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:160)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:133)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:265)
    at org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.executeQuery(WrappedPreparedStatement.java:342)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
    at org.hibernate.loader.Loader.doQuery(Loader.java:674)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.doList(Loader.java:2213) 
```

该表以正确的模式存在于我的数据库中（仅使用默认值，即 dbo）。所有权限都已到位。用连接池检查也正常。通过 JMX 控制台，我尝试测试也可以工作的数据库连接。

即使在重新启动 JBoss 服务器后也会出现此异常。使用 JBoss6、JDK 6、MSSQL 服务器。谁能告诉我“com.microsoft.sqlserver.jdbc.SQLServerException：无效的对象名称”的所有可能原因......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T08:08:32.690

你的环境有什么变化吗？您现在可能需要在 xml 配置中指定架构（请参阅[使用 Hibernate 和 SQL Server 2008 的问题](https://stackoverflow.com/questions/3159662/problem-using-hibernate-and-sql-server-2008)）

如果您在 sql 中的 Hibernate 中创建 sql 查询，您还需要添加您的目录（数据库名称）和模式：

例如：
executeQuery("select * from products;")

会成为

executeQuery("select * from yourDatabase.dbo.products;")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:32:52.700

我有类似的问题。完全相同的查询“...executeQuery("select * from products;");”在 RazorSQL 上运行正常，另一个对 MySQL 的查询在相同的代码中运行正常。所以这不应该是错误查询的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-22T13:08:02.467

我遇到了同样的错误。我正在**连接到另一个数据库**，该数据库没有我在代码中引用的表和架构。

设置`databaseName`in`spring.datasource.url`和`spring.datasource.username`to correct 值修复了错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T11:03:15.437

您可以像这样检查您的数据库元数据：

```
DatabaseMetaData meta = connection.getMetaData();
ResultSet res = meta.getTables(null, null, "YourTableName", new String[] {"TABLE"});
    while (res.next()) {
        System.out.println(
               "   "+res.getString("TABLE_CAT") 
               + ", "+res.getString("TABLE_SCHEM")
               + ", "+res.getString("TABLE_NAME")
               + ", "+res.getString("TABLE_TYPE")
               + ", "+res.getString("REMARKS")); 
    } 
```

这应该有助于指出任何明显的错误。仔细检查您的架构和其他变量是否确实正确。

# cassandra - 如果仅在插入很重要时禁用压缩怎么办？

> ID：13990099
> 
> 赞同：3
> 
> 时间：2012-12-21T12:20:36.737
> 
> 标签：cassandra

     在 cassandra 中，当如此多版本的列分散在不同的 SSTable 中时，为了更快的查询检索，非常需要压缩。当同一列上的更新序列或删除完成时，压缩是最好的策略。但是 Compaction 是一个重资源利用过程。但在我的应用程序中，我只使用 Cassandra 插入记录并查看它们。但是密钥空间的大小可能会以 GB 为单位增长。它会保存超过数百万条记录。对我来说，插入很重要。我不会更新列或删除列。我的简单删除将在整个密钥空间上进行。现在我的疑问是我**可以禁用压缩**吗？禁用压缩会降低查询性能吗？..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:39:45.940

1）这取决于您的数据模型。

2) Cassandra 的复杂部分是读取性能，而压缩提高了它。

3）即使您不打算删除或更新同一列，但如果您打算将新列插入同一行，那么禁用压缩肯定会影响您的读取性能，因为它会增加磁盘查找次数。

4）除了压缩之外，还有墓碑收集的工作，但您的删除是整个键空间删除，所以这不是问题。

5）压缩将行片段合并在一起，删除过期的墓碑并重建索引，在您的情况下，这些都不需要。所以理论上你可以关闭压缩。但是，如果布隆过滤器误报会影响您的读取性能，那么没有更多的 sstable 和大数据。在此处查看布隆过滤器：[Cassandra 架构概述](http://wiki.apache.org/cassandra/ArchitectureOverview)

# macos - NSView 的预览 Mac 应用程序等缩放功能

> ID：13990102
> 
> 赞同：3
> 
> 时间：2012-12-21T12:20:49.320
> 
> 标签：macos, zooming, nsview

我有一个 NSView。该视图中有一个表。现在，我想在 Preview Mac 应用中实现放大/缩小功能。

当用户放大滚动时，上下滚动应该可见。

我已经尝试过

```
scaleUnitSquareToSize
```

但到目前为止还没有运气。

![在此处输入图像描述](../Images/19c54b667d293679e54a6e175775ac00.png)

# ruby - 跟踪哪个用户编辑了 CouchDB 文档

> ID：13990105
> 
> 赞同：1
> 
> 时间：2012-12-21T12:21:03.537
> 
> 标签：ruby, couchdb, couchrest

我正在使用 couchrest_model 从 ruby​​ 与 CouchDB 进行交互。我在数据库中有一堆文档，每个文档都添加了一个键“updated_by”，我想保留有关进行更改并生成该修订的用户的信息。

这是做事的正确方法吗？

如果这是正确的方法，我应该如何使用 couchrest_model 以便我可以请求用户数据以及我的主数据库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:06:30.387

`updated_by`唯一的方法是通过相等的值强制字段`userCtx.name`认为[validate_doc_update 函数](http://wiki.apache.org/couchdb/Document_Update_Validation)：

```
function(newdoc, olddoc, userctx, secobj){
   if (newdoc.updated_by != userctx.name)
       throw({"forbidden": "`updated_by` field should match real updater user name"})
} 
```

此功能将控制所有文档（设计文档除外）的内容，要求它们以您期望的方式拥有数据。

您可能会在这一点上停下来，但他有一个缺陷：您的所有客户都必须手动设置此字段。这很尴尬，不能让他们“放松”。为了解决这个问题，CouchDB 提供了[更新功能](http://wiki.apache.org/couchdb/Document_Update_Handlers)，允许在服务器端设置部分业务逻辑，从客户端实现中删除这些知识。因此，您的更新功能可能如下所示：

```
function(doc, req){
   if (!doc){ // new doc
     doc = JSON.parse(req.body);
   }
   doc.updated_by = req.userCtx.name;
   return [doc, {"json": {"status": "ok"}}
} 
```

他让你`updated_by`以正确的方式设置字段。此外，您可以通过添加越来越多的元字段（例如`userCtx.peer`保存客户端 IP 地址）来扩展此功能，如果您的客户将使用它，他们将不需要对您的元数据更改进行任何更新。

但请注意，您需要为服务用户提供一些例外，否则您将在 CouchDB 节点之间获得损坏的复制，因为 validate 函数将拒绝所有与用户名`updated_by`值不同的文档。

# php - 无权访问此服务器上的 /*******.php

> ID：13990108
> 
> 赞同：0
> 
> 时间：2012-12-21T12:21:13.287
> 
> 标签：php, file-permissions

我从高到低搜索了类似的问题，是的，有很多，尽管没有任何帮助。

所有文件都上传到实时网站，使用 XAMMP 测试服务器没有错误，为*访客和组*`744 r/w/x`的用户设置了文件权限，但是当我去访问文件时没有访问权限`r/r`*`/*******.php`*

 *有什么我错过的吗，因为我一直试图弄清楚这一点。

提前致谢！

**编辑 ：**

实时服务器上的 htaccess 文件 - 看起来完全不同！

```
Options +Indexes  
RemoveHandler .html  
RemoveType .html  
AddType text/html .html  
Satisfy any  
Order Deny,Allow  
Allow from **********  
Deny from all
AuthType Basic  
AuthName "Access to /logs" 
```

--------------------------------------- 新编辑---------- ------------ 正确发现了我的问题，无法获得访问 htaccess 文件的权限，此链接说明[http://tips.webdesign10.com/web-hosting/why-you-should- never-use-1and1-com-hosting](http://tips.webdesign10.com/web-hosting/why-you-should-never-use-1and1-com-hosting)从不使用 1and1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:29:15.930

检查您的虚拟主机配置并检查您是否与此类似：

```
<Directory "your/path/to/document/root">
  Options Indexes FollowSymLinks
  AllowOverride all
  Order Allow,Deny
  Allow from all
</Directory> 
```*

# ajax - Zend 框架：并发 ajax 调用导致用户被注销

> ID：13990114
> 
> 赞同：0
> 
> 时间：2012-12-21T12:21:53.347
> 
> 标签：ajax, zend-framework, authentication, concurrency

在我的 Zend 应用程序中，我有几个 Ajax 操作来拉入表单或 json 数据数组。

当两个 Ajax 操作同时发生（来自同一个登录会话）时，其中之一会返回登录屏幕。此外，有时（但不是每次都发生）这也会导致用户在从应用程序请求另一个页面时被注销。在调试时，我发现在以下代码中（在我们的 LoginRequired 帮助器中）运行了 if 子句。除非用户实际注销，否则此子句不会在站点的正常操作下运行。

```
$auth = Zend_Auth::getInstance();
if(!$auth->hasIdentity()){
   ...
} 
```

我的问题是：**“为什么并发 Ajax 调用会导致这种行为，我该怎么办？”**

我想要一个不涉及牺牲 ajax 请求的异步性质或系统安全性的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:27:25.870

听起来像是经典的比赛条件。请参阅这篇精彩的文章： http: [//www.chipmunkninja.com/Troubles-with-Asynchronous-Ajax-Requests-g@](http://www.chipmunkninja.com/Troubles-with-Asynchronous-Ajax-Requests-g@)

想到的解决方案包括尽快关闭会话或重写[session_set_save_handler()](http://www.sitepoint.com/race-conditions-ajax-and-sessions/)

# postgresql - 如果不存在则插入行会导致竞争条件？

> ID：13990116
> 
> 赞同：12
> 
> 时间：2012-12-21T12:22:15.850
> 
> 标签：postgresql, database-design, insert, primary-key, race-condition

我正在使用 python（不是很相关）和 Postgresql（如果相关，则为 9.2）实现一个简单的基于 Web 的 RSS 阅读器。数据库架构如下（基于RSS格式）：

```
CREATE TABLE feed_channel
(
    id SERIAL PRIMARY KEY,
    name TEXT,
    link TEXT NOT NULL,
    title TEXT
);
CREATE TABLE feed_content
(
    id SERIAL PRIMARY KEY,
    channel INTEGER REFERENCES feed_channel(id) ON DELETE CASCADE ON UPDATE CASCADE,
    guid TEXT UNIQUE NOT NULL,
    title TEXT,
    link TEXT,
    description TEXT,
    pubdate TIMESTAMP
); 
```

当我创建一个新频道（并查询更新的提要信息）时，我请求提要，将其数据插入 feed_channel 表，选择新插入的 ID - 或现有 ID 以避免重复 - 然后将提要数据添加到 feed_content 表. 一个典型的场景是：

1.  查询提要 url，抓取提要标题和所有当前内容
2.  如果不存在，则将提要标题插入 feed_channel ... 如果已存在，则获取现有 ID
3.  对于每个提要项目，插入 feed_content 表并引用存储的频道 ID

这是一个标准的“如果不存在则插入，但返回相关 ID”问题。为了解决这个问题，我实现了以下存储过程：

```
CREATE OR REPLACE FUNCTION channel_insert(
  p_link feed_channel.link%TYPE,
  p_title feed_channel.title%TYPE
) RETURNS feed_channel.id%TYPE AS $$
  DECLARE
    v_id feed_channel.id%TYPE;
  BEGIN
    SELECT id
    INTO v_id
    FROM feed_channel
    WHERE link=p_link AND title=p_title
    LIMIT 1;

    IF v_id IS NULL THEN
      INSERT INTO feed_channel(name,link,title)
      VALUES (DEFAULT,p_link,p_title)
      RETURNING id INTO v_id;
    END IF;

    RETURN v_id;

  END;
$$ LANGUAGE plpgsql; 
```

然后将其称为“选择通道插入（链接，标题）；” 如果不存在，则从我的应用程序中插入，然后返回相关行的 ID，无论它是插入还是刚刚找到（上面列表中的步骤 2）。

这很好用！

然而，我最近开始想知道如果这个过程使用相同的参数同时执行两次会发生什么。让我们假设以下内容：

1.  用户 1 尝试添加一个新频道，从而执行 channel_insert
2.  几毫秒后，用户 2 尝试添加相同的频道并执行 channel_insert
3.  用户 1 对现有行的检查完成，但在插入完成之前，用户 2 的检查完成并说没有现有行。

这会是 PostgreSQL 中潜在的竞争条件吗？解决此问题以避免此类情况的最佳方法是什么？是否可以使整个存储过程原子化，即它只能同时执行一次？

我尝试的一个选项是使字段唯一，然后尝试首先插入，如果出现异常，请选择现有的...这有效，但是，SERIAL 字段会随着每次尝试而增加，从而在序列中留下很多空白. 我不知道从长远来看这是否会成为问题（可能不是），但有点烦人。也许这是首选的解决方案？

感谢您的任何反馈。这个级别的 PostgreSQL 魔法超出了我的能力范围，所以任何反馈都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T14:23:47.967

> 这会是 PostgreSQL 中潜在的竞争条件吗？

是的，事实上它可以在任何数据库引擎中。

> 解决此问题以避免此类情况的最佳方法是什么？

这是一个加载的问题，需要深入了解多个用户对数据库的使用情况。不过，我会给你一些选择。简而言之，您唯一的选择是`LOCK`在此过程中对表进行锁定，但***如何***锁定该表将取决于数据库在一天中的使用情况***。***

让我们从基本的开始`LOCK`：

```
LOCK TABLE feed_channel 
```

这将使用`ACCESS EXCLUSIVE`lock 选项锁定表。

> 与所有模式的锁冲突（ACCESS SHARE、ROW SHARE、ROW EXCLUSIVE、SHARE UPDATE EXCLUSIVE、SHARE、SHARE ROW EXCLUSIVE、EXCLUSIVE 和 ACCESS EXCLUSIVE）。**这种模式保证持有者是唯一以任何方式访问表的事务。**

现在，这是可用的最严格的锁，并且肯定会解决竞争条件，但可能不是您想要的。这是你必须决定的事情。所以，虽然很***明显***你将不得不`LOCK`上桌，但***不清楚***如何。

你还有什么要决定的？

1.  **你想***怎么***[`LOCK`上桌](http://www.postgresql.org/docs/8.1/static/explicit-locking.html)？研究该链接上的锁定选项以做出决定。**
***   **你想***在哪里***`LOCK`吃饭？或者换句话说，你想`LOCK`在函数的***顶部***（我认为你是根据可能的竞争条件做的），还是你只是想`LOCK`在`INSERT`?****

 ****> 是否可以使整个存储过程原子化，即它只能同时执行一次？

不，任何连接到数据库的人都可以执行代码。

* * *

我希望这对指导您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T15:59:09.513

这里有一个不可避免的“竞赛”，因为两个会话不能“看到”彼此未提交的行。在发生冲突时，会话只能回滚（可能到保存点）并重试。这通常意味着：引用对方新插入的行，而不是创建私有副本。

这里有一个数据建模问题：feed_channel 似乎有很多候选键，并且来自 feed_content 的级联规则可能会孤立很多 feed_content 的行（我假设 content-> channel 是 1::M 关系；多个内容-row 可以指同一个频道）

最后，feed_channel 表至少**需要**自然键 {link,title}。这就是插入/不存在的全部意义所在。（以及此功能的全部目的）

我清理了一些功能。不需要 IF 构造，**首先执行***INSERT WHERE NOT EXISTS* 也同样有效，甚至可能更好。

 **```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE feed_channel
    ( id SERIAL PRIMARY KEY
    , name TEXT
    , link TEXT NOT NULL
    , title TEXT NOT NULL -- part of PK :: must be not nullable
    , CONSTRAINT feed_channel_nat UNIQUE (link,title) -- the natural key
);

CREATE TABLE feed_content
    ( id SERIAL PRIMARY KEY
    , channel INTEGER REFERENCES feed_channel(id) ON DELETE CASCADE ON UPDATE CASCADE
    , guid TEXT UNIQUE NOT NULL -- yet another primary key
    , title TEXT --
    , link TEXT  -- title && link appear to be yet another candidate key
    , description TEXT
    , pubdate TIMESTAMP
    );

-- NOTE: omitted original function channel_insert() for brevity
CREATE OR REPLACE FUNCTION channel_insert_wp(
  p_link feed_channel.link%TYPE,
  p_title feed_channel.title%TYPE
) RETURNS feed_channel.id%TYPE AS $body$
   DECLARE
    v_id feed_channel.id%TYPE;
  BEGIN
      INSERT INTO feed_channel(link,title)
      SELECT p_link,p_title
      WHERE NOT EXISTS ( SELECT *
        FROM feed_channel nx
        WHERE nx.link= p_link
        AND nx.title= p_title
        )
        ;
    SELECT id INTO v_id
    FROM feed_channel ex
    WHERE ex.link= p_link
    AND ex.title= p_title
        ;

    RETURN v_id;

  END;
$body$ LANGUAGE plpgsql;

SELECT channel_insert('Bogus_link', 'Bogus_title');
SELECT channel_insert_wp('Bogus_link2', 'Bogus_title2');

SELECT * FROM feed_channel; 
```

结果：

```
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE will create implicit sequence "feed_channel_id_seq" for serial column "feed_channel.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "feed_channel_pkey" for table "feed_channel"
NOTICE:  CREATE TABLE / UNIQUE will create implicit index "feed_channel_nat" for table "feed_channel"
CREATE TABLE
NOTICE:  CREATE TABLE will create implicit sequence "feed_content_id_seq" for serial column "feed_content.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "feed_content_pkey" for table "feed_content"
NOTICE:  CREATE TABLE / UNIQUE will create implicit index "feed_content_guid_key" for table "feed_content"
CREATE TABLE
NOTICE:  type reference feed_channel.link%TYPE converted to text
NOTICE:  type reference feed_channel.title%TYPE converted to text
NOTICE:  type reference feed_channel.id%TYPE converted to integer
CREATE FUNCTION
NOTICE:  type reference feed_channel.link%TYPE converted to text
NOTICE:  type reference feed_channel.title%TYPE converted to text
NOTICE:  type reference feed_channel.id%TYPE converted to integer
CREATE FUNCTION
 channel_insert 
----------------
              1
(1 row)

 channel_insert_wp 
-------------------
                 2
(1 row)

 id | name |    link     |    title     
----+------+-------------+--------------
  1 |      | Bogus_link  | Bogus_title
  2 |      | Bogus_link2 | Bogus_title2
(2 rows) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T13:17:45.270

您最重要的问题是 a`serial`不能为`feed_channel`表创建一个好的主键。主键应该是`(link, title)`或者只是`(link)`如果`title`可以是`null`。然后，任何插入现有提要的尝试都会引发主键错误。

顺便说一句`v_id`，`null`只要`title`是`null`：

```
WHERE link=p_link AND title=p_title 
```******

# asp.net-web-api - ASP.NET WEB API - 如果属性级别验证失败，则永远不会调用类级别的验证属性

> ID：13990118
> 
> 赞同：0
> 
> 时间：2012-12-21T12:22:16.767
> 
> 标签：asp.net-web-api

在 MVC 中，如果属性级别验证失败，则永远不会调用类级别属性的验证。

如何解决这个问题呢？我想要属性和验证级别的错误列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:31:52.307

我不相信它可以用现有的 Web API 或 MVC 框架架构来完成。

类验证器只会在所有属性验证器都通过后运行，并且此行为被锁定在私有`CompositeModelValidator`类中。

请参见此处（对于 Web API，但对于 MVC，该类几乎相同）：

```
private class CompositeModelValidator : ModelValidator
        {
            public CompositeModelValidator(IEnumerable<ModelValidatorProvider> validatorProviders)
                : base(validatorProviders)
            {
            }

            public override IEnumerable<ModelValidationResult> Validate(ModelMetadata metadata, object container)
            {
                bool propertiesValid = true;

                foreach (ModelMetadata propertyMetadata in metadata.Properties)
                {
                    foreach (ModelValidator propertyValidator in propertyMetadata.GetValidators(ValidatorProviders))
                    {
                        foreach (ModelValidationResult propertyResult in propertyValidator.Validate(metadata, container))
                        {
                            propertiesValid = false;
                            yield return new ModelValidationResult
                            {
                                MemberName = ModelBindingHelper.CreatePropertyModelName(propertyMetadata.PropertyName, propertyResult.MemberName),
                                Message = propertyResult.Message
                            };
                        }
                    }
                }

                if (propertiesValid) //<---- HERE
                {
                    foreach (ModelValidator typeValidator in metadata.GetValidators(ValidatorProviders))
                    {
                        foreach (ModelValidationResult typeResult in typeValidator.Validate(metadata, container))
                        {
                            yield return typeResult;
                        }
                    }
                }
            }
        } 
```

[https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Http/Validation/ModelValidator.cs](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Http/Validation/ModelValidator.cs)

# css - 在设置背景颜色以延长页面长度时需要帮助

> ID：13990119
> 
> 赞同：0
> 
> 时间：2012-12-21T12:22:33.567
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter 引导程序，并使用它的 CSS 类进行网格布局。（我是 CSS 菜鸟）

我想要一个左列和右列的经典布局。但是我不希望两列之间有任何边距。此外，左栏应从页面左侧开始，并且也没有任何边距。

Bootstrap 有一个基本的流体布局 -

但是，我想要对上述内容进行的更改如下 -

1) 从 div.span2 中删除任何左边距。

2) 删除 div.span2 和 div.span10 之间的任何边距

3) 为 div.span1 提供一个背景颜色，它一直延伸到页面底部。目前，如果我给它一个背景颜色，它只显示有内容的部分。但是我希望它一直到页面的长度。我该怎么做？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:42:45.797

那么 8px 边距来自用户代理..

```
body {
display: block;
margin: 8px;
} 
```

如果你想让你的列粘在边缘，

从 bootstrap.css 替换它

```
body {
  margin: 0;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 20px;
  color: #333333;
  background-color: #f5f5f5; 
} 
```

和

```
body {
  margin: -8px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 20px;
  color: #333333;
  background-color: #f5f5f5;
} 
```

要消除两个跨度之间的间隙，只需从 bootstrap.css 替换它

```
[class*="span"] {
  float: left;
  min-height: 1px;
  margin-left: 20px;
} 
```

和

```
[class*="span"] {
  float: left;
  min-height: 1px;
  margin-left: 0px;
} 
```

我希望能解决这个问题

# android - 从列表中删除项目

> ID：13990120
> 
> 赞同：0
> 
> 时间：2012-12-21T12:22:34.433
> 
> 标签：android, sqlite

我有带有复选框的列表项，当用户选择任何复选框时，它应该启用菜单，如图像页脚处的图标。现在我的问题是，如果我想从列表中删除任何项目，如何通过单击屏幕底部的删除图标来删除该特定项目？

![在此处输入图像描述](../Images/b0bba0ae8a0da3542cd1897bd4b796ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:24:45.893

您可以使用 listview.getCheckedItemPositions() 并删除选中的位置。下面是一个示例，我在我的一个应用程序中使用了它。

```
SparseBooleanArray selected = lvcontacts.getCheckedItemPositions();
            SQLiteDatabase db = dbh.getWritableDatabase();
            if (selected != null) {
                for (int i = 0; i < contacts.size(); i++) {
                    if (selected.get(i)) {
                        String s[] = { contacts.get(i).getName(),
                                contacts.get(i).getEmail(),
                                contacts.get(i).getNumber() };
                        db.delete("Contacts", "name=? and email=? and phone=?",
                                s);
                        Utils.printLog("Contacts while Delete", s[0] + "$"
                                + s[1] + "$" + s[2]);
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:30:34.807

您可以使用它来删除列表中的已检查项目..

```
final int itemCount = getListView().getCount();
for (int i = 0; i < itemCount; i++) {
   if (checkedItemPositions.get(i)) {
       list.remove(i);
   } 
} 
```

# javascript - 如何使 $(":text[placeholder]" 在 IE 中工作

> ID：13990121
> 
> 赞同：0
> 
> 时间：2012-12-21T12:22:34.707
> 
> 标签：javascript, jquery, css, internet-explorer, internet-explorer-8

我的代码包含以下几行：

```
 $(":text[placeholder], :password[placeholder]").each(function(){
    //some code
  }); 
```

它在 chrome 和 ff 上运行良好，但在 IE8 中出现以下错误。

```
 Object doesn't support this property or method 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:43:46.880

或者你可以试试这个：

```
$("input[type='text'], input[type='password']").filter(function(){
    var attr = $(this).attr('placeholder');
    return typeof attr !== 'undefined' && attr !== false;
}).each(function(){
    //some code
}); 
```

[[从这里](https://stackoverflow.com/a/1318091/1113426)借来的属性检查代码]

# jquery - jQuery.validate 插件在字段上没有错误时显示消息

> ID：13990122
> 
> 赞同：0
> 
> 时间：2012-12-21T12:22:35.580
> 
> 标签：jquery, jquery-validate

我正在使用 jquery.validate 插件来验证表单。我知道可以通过简单的方式自定义错误消息，但是只要特定输入没有错误，我想写和“OK”消息。

例如，我有一个“必填”输入文本，我想在右侧写一条消息说“该字段已正确填写”，前提是用户已经写了任何内容。

如果输入字段的数据正常，是否有在每个输入字段旁边写“OK 消息”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:07:19.907

这里有一个演示页面：

[http://alittlecode.com/files/jQuery-Validate-Demo/](http://alittlecode.com/files/jQuery-Validate-Demo/)

当字段有效时显示一个勾号。后备文本没问题。

有问题的代码：

```
$(document).ready(function(){

 $('#contact-form').validate(
 {
  rules: {
    name: {
      minlength: 2,
      required: true
    },
    email: {
      required: true,
      email: true
    },
    subject: {
      minlength: 2,
      required: true
    },
    message: {
      minlength: 2,
      required: true
    }
  },
  highlight: function(label) {
    $(label).closest('.control-group').addClass('error');
  },
  success: function(label) {
    label
      .text('OK!').addClass('valid')
      .closest('.control-group').addClass('success');
  }
 });
}); // end document.ready 
```

这会选择输入周围的“控制组”类标签，然后根据输入将“有效”或“错误”作为一个类应用于它。

“成功”回调应用“确定”文本，但 CSS 似乎用图像覆盖它。

# r - 来自不同长度向量的样本（包括 1 个）

> ID：13990125
> 
> 赞同：20
> 
> 时间：2012-12-21T12:22:44.353
> 
> 标签：r

我有一个长度不同的向量，有时长度为 1。

我想从这个向量中采样，如果它的长度为 1，它总是对 1 个数字进行采样。

`sample()`不会这样做，因为当样本大小为 1 时，它会从 1 采样到数字。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-21T12:23:39.767

这是一个记录在案的功能：

> 如果`x`有长度`1`, 是`numeric`(在 的意义上`is.numeric`) 并且`x >= 1`, 通过 sample 的采样发生在`1:x`. 请注意，当`x`在诸如`sample(x)`.

另一种方法是编写自己的函数来避免该功能：

```
sample.vec <- function(x, ...) x[sample(length(x), ...)]
sample.vec(10)
# [1] 10
sample.vec(10, 3, replace = TRUE)
# [1] 10 10 10 
```

[在seq vs seq_along](https://stackoverflow.com/questions/13732062/seq-vs-seq-along-when-will-using-seq-cause-unintended-results/13732373#comment18871091_13732373)下列出了一些具有类似行为的函数。[什么时候使用 seq 会导致意想不到的结果？](https://stackoverflow.com/questions/13732062/seq-vs-seq-along-when-will-using-seq-cause-unintended-results/13732373#comment18871091_13732373)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-21T12:25:20.620

当只输入一个数字时，`sample`工作方式类似于`sample.int`（参见`?sample`）。如果你想确保它只从你给它的向量中采样，你可以使用索引并使用这个构造：

```
x[sample(length(x))] 
```

无论 的长度如何，这都会为您提供正确的结果`x`，并且无需添加`if`-condition 检查长度。

例子：

```
mylist <- list(
  a = 5,
  b = c(2,4),
  d = integer(0)
)

mysample <- lapply(mylist,function(x) x[sample(length(x))])

> mysample
$a
[1] 5

$b
[1] 2 4

$d
integer(0) 
```

注意：您可以替换`sample`以`sample.int`获得一点速度增益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-17T04:09:54.743

您可以使用此函数的“无错误”重新定义：

```
sample = function(x, size, replace = F, prob = NULL) {
  if (length(x) == 1) return(x)
  base::sample(x, size = size, replace = replace, prob = prob)
} 
```

测试它：

```
> sapply(1:7, base::sample, size = 1)
[1] 1 2 2 4 4 4 4
> sapply(1:7, sample)
[1] 1 2 3 4 5 6 7 
```

# google-chrome-extension - 在 Google Chrome 扩展程序中获取当前页面的 PDF

> ID：13990127
> 
> 赞同：4
> 
> 时间：2012-12-21T12:22:58.433
> 
> 标签：google-chrome-extension

[Chromium 中有用于生成当前页面的 PDF 版本的代码](http://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/browser/resources/print_preview/)，然后在打印预览中显示它。

Chrome 扩展程序是否可以访问此 API，以获取当前页面的 PDF 版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T21:12:41.423

Chrome 不为扩展提供任何此类 API。

如果您的目标是使用 Chrome 生成 PDF 文件，您可以通过`Print > Destination > Save as PDF`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T08:00:51.327

您可以使用 page [Capture API](https://developer.chrome.com/extensions/pageCapture.html)将页面数据作为[M HTML blob](https://developer.chrome.com/extensions/pageCapture.html#method-saveAsMHTML)返回，然后将[MTHML blob 转换为 PDF](https://www.google.co.in/search?q=mhtml+to+pdf)。

## 参考：

*   [页面捕获 API](https://developer.chrome.com/extensions/pageCapture.html)
*   [MHTML 转 PDF](https://www.google.co.in/search?q=mhtml%20to%20pdf)

如果您需要更多信息，请与我们联系。

# javascript - 如何在html5中单击画布上的网格时填充单元格

> ID：13990128
> 
> 赞同：1
> 
> 时间：2012-12-21T12:22:57.550
> 
> 标签：javascript, html, canvas

我想在单击特定单元格时填充网格单元格。这是我的代码：

```
 function drawBox()
    {   
        for (var row = 0; row < 14; row ++)
        {
            for (var column = 0; column < 13; column ++)
            {
                var x = column * 40;
                var y = row * 40;
                context.beginPath();
                context.rect(x, y, 40, 40);
                context.fillStyle = "white";
                context.fill();
                context.lineWidth = 3;
                context.strokeStyle = 'black';
                context.stroke();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T12:42:06.753

[我这里有一个工作样本。](http://jsbin.com/aralik/2) [代码](http://jsbin.com/aralik/2/edit)：

```
var canvas = document.getElementById("canvas"),
    c = canvas.getContext("2d"),
    boxSize = 40,
    boxes = Math.floor(600 / boxSize);
canvas.addEventListener('click', handleClick);
canvas.addEventListener('mousemove', handleClick);

function drawBox() {
  c.beginPath();
  c.fillStyle = "white";
  c.lineWidth = 3;
  c.strokeStyle = 'black';
  for (var row = 0; row < boxes; row++) {
    for (var column = 0; column < boxes; column++) {
      var x = column * boxSize;
      var y = row * boxSize;
      c.rect(x, y, boxSize, boxSize);
      c.fill();
      c.stroke();
    }
  }
  c.closePath();
}

function handleClick(e) {
  c.fillStyle = "black";

  c.fillRect(Math.floor(e.offsetX / boxSize) * boxSize,
    Math.floor(e.offsetY / boxSize) * boxSize,
    boxSize, boxSize);
}

drawBox();
```

```
<canvas id="canvas" width="600px" height="600px"></canvas>
```

我`drawBox()`也对函数进行了一些编辑以提高效率。

`e.offsetX`是鼠标坐标，除以`40`，然后`Math.floor()`this 得到单元格编号，然后乘以`40`得到单元格的起始坐标。

# java - 如何在 Eclipse 中的 Java 程序中以非侵入方式添加跟踪

> ID：13990130
> 
> 赞同：1
> 
> 时间：2012-12-21T12:23:00.417
> 
> 标签：java, eclipse, debugging, trace

注意：实际上，我会发布一个答案，但欢迎任何其他建议！

这个问题需要一些背景信息，以防止评论质疑我的目标...... :-)

在我工作的地方，我们使用了大量的调试，主要是用 Eclipse 完成的。我知道有些人质疑调试的做法，声称良好的设计和分析以及适当的单元测试可以很容易地剖析错误。

好吧，我在 Java 1.2（甚至 1.1）是最新版本时设计的遗留应用程序的大型代码库（Java / Swing）上工作，并且代码有很多麻烦，即使经过多年的工作，我不能假装知道超过10%！我们拥有的 JUnit 测试最多只能覆盖 1% 的代码（这是最近的实践……）。

因此，使用好的调试器对于检查类、其中的数据、软件的行为以及我们提供的数据类型等非常重要。

然而，逐步有其局限性：它可能很慢，我们可能会遗漏一些东西，并且在某些情况下是不切实际的，例如查看 paint() 方法或使用多线程部分。

所以我习惯了，在这些困难的情况下，`System.out.println()`到处散布一些语句，看看调用了什么方法，使用什么参数，以什么顺序等。我可以使用日志，但这种方式更简单，并且问题解决后，我删除了这些行。

这种做法的一个问题是我们必须在提交之前仔细检查差异以消除这些行。另一个问题是我们使用 Perforce 作为 VCS，这很好，但需要显式检出文件（将其状态从只读更改为可写）以添加此类跟踪。它很慢（使用 Eclipse P4 插件）并且很麻烦。

所以，我的问题是：是否可以在不更改源代码本身的情况下将上下文跟踪添加到某些代码点？每次运行一行时都可以记录“我在这里，我看到了”的东西。

我最初搜索了一个 Eclipse 插件，只找到了一个 C 调试器的建议，并找到了（我认为在 SO 中的评论中，但我失去了参考，唉）我将在下面发布一个解决方案，希望它可以对其他人有用。如上所述，任何替代方案都可以采用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:23:00.417

在 Eclipse 中不需要插件：在要跟踪的行中添加断点，使其有条件（例如 Ctrl+双击边距中的断点图标；或者右键单击 BP 中的 BP 行列表并选择`Breakpoint Properties`)，方法是`Conditional`选中复选框并保留该`Suspend when 'true'`选项。

然后粘贴类似：

```
System.out.println("ClassName.methodName: " + parameter);
return false; 
```

上下文自动完成工作（提醒：`sysout`后跟 Ctrl+空格扩展为`System.out.println()`），您可以打印出当前线程名称，以及其他有用的信息。

该`return false;`行告诉 Eclipse 实际上不要在此断点处停止。所以运行“条件”代码，Eclipse 继续运行代码。

我担心它会减慢代码的速度，但是对于现代计算机，它在人类水平上是无法察觉的。

注意：由于某种原因，当我在 之后键入分号`false`时，Perforce 插件想要签出当前文件。当然，您可以取消此操作。如果你粘贴这条线，它不会反应......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:26:42.380

看看[BTrace](http://kenai.com/projects/btrace)。您可以编写条件调试/跟踪代码，并在开发期间将其附加到正在运行的 JVM。在生产中，此代码将根本不存在。

# javascript - Magento：如何调试 varienForm？

> ID：13990133
> 
> 赞同：0
> 
> 时间：2012-12-21T12:23:07.187
> 
> 标签：javascript, magento, prototypejs

我正在尝试基于 importexport 扩展创建自己的扩展。该结构与 importexport 模块非常相似。

文件 /app/design/adminhtml/default/default/template/importexport/import/form/before.phtml 具有**postToFrame**方法。**formElem.action** url 在“检查数据”按下时是正确的。但是在按下“检查数据”后，只显示了*加载掩码*，没有任何反应。

我尝试使用firebug对其进行调试。没有任何js答案。然后我在 this._submit(); 之前和之后设置警报。他们都表现出来了。

那怎么调试呢？如何从服务器获得任何答案？

**PS1：** 例如

`varienForm.prototype.ifrElemName = 'someID';`

而且我没有在主题模板文件中设置或出错：

```
<h4 id="some_ID"><?php echo $this->__('Validation Results'); ?></h4> 
```

如果是 jQuery，那么将使用以下检查：

> 警报($('someID').length);

或获取结果帖子：

```
$.post('/post.php', postdata, function(data){
     console.log(data);
}); 
```

我怎么会知道我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:12:36.893

你可以在 PrototypeJS 中做同样的事情

```
alert($('someID')) 
```

仍会提醒您。这将告诉您在 javascript 触发时页面上是否存在具有该 ID 的元素。如果警报返回`undefined`or`null`则该元素尚不存在。

对于 AJAX 帖子

```
new Ajax.Request('/post.php',{'method':'post','parameters':postdata,'onSuccess':function(data){
    console.log(data);
}); 
```

`data`是一个 ajax 响应对象，您可以在其中获取响应的文本，`data.responseText`或者如果您的响应具有`Content-Type: application/json`集合，它将自动被评估为 JSON 并以`data.responseJSON`.

# grails - Grails 1.3.5 框架是否支持数据源插件？

> ID：13990135
> 
> 赞同：-1
> 
> 时间：2012-12-21T12:23:11.573
> 
> 标签：grails, grails-plugin

在我们的应用程序中使用 Datasources.groovy 需要做什么？我正在尝试安装数据源插件（命令提示符中的 grails install-plugin 数据源）。但它不起作用。

请帮助。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:07:42.240

正如您在 Grails 插件存储库中看到的那样

[http://grails.org/plugin/datasources](http://grails.org/plugin/datasources)

> **SpringSource 支持的数据源插件**标签：持久性
> 最新：0.5 最后更新：13 marzo 2010 **Grails 版本：1.1.1 > ***

所以你应该能够将它安装在你当前的应用程序上。可能是控制台安装有问题，尝试下载并手动安装。

祝你好运！

# vim - 显示有序的 VIM 键盘映射

> ID：13990136
> 
> 赞同：6
> 
> 时间：2012-12-21T12:23:14.240
> 
> 标签：vim

有没有可以显示我当前 vim 环境的**所有键盘映射的有序列表，如下所示：**

```
a: append
b: back one word
c: ...
.
.
.

---- Ctrl mappings ----
<C-a> (I dont know...)
.
.
.
<C-p> Default mode for CrtlP
...

---- Alt mappings ----
... 
```

这对我来说非常有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T12:47:25.617

`:map`并向`:verbose map`您显示会话中定义的映射列表，但它们的顺序不是这样。AFAIK，Vim 没有提供这么好的格式：恐怕你必须为此编写一个自定义函数。

***编辑***

另外，请注意`a`,`b`和朋友不是“映射”，因为 CtrlP`<C-p>`是一个映射。`:map`根本不会显示它们。

因此，您的想法虽然很有趣，但可能不是一个班轮可以完成的事情。您可以从中提取信息`:h index`，添加结果`:map`并尝试按照对您有意义的顺序排列所有这些，但这似乎不是一项微不足道的任务。这听起来非常适合 python/ruby/php 脚本，不是吗？

***结束编辑***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-03T06:02:57.143

如果您想要一个排序的、可搜索的当前映射列表来查找未使用的键，您可以执行以下操作：

```
function! s:ShowMaps()
  let old_reg = getreg("a")          " save the current content of register a
  let old_reg_type = getregtype("a") " save the type of the register as well
try
  redir @a                           " redirect output to register a
  " Get the list of all key mappings silently, satisfy "Press ENTER to continue"
  silent map | call feedkeys("\<CR>")    
  redir END                          " end output redirection
  vnew                               " new buffer in vertical window
  put a                              " put content of register
  " Sort on 4th character column which is the key(s)
  %!sort -k1.4,1.4
finally                              " Execute even if exception is raised
  call setreg("a", old_reg, old_reg_type) " restore register a
endtry
endfunction
com! ShowMaps call s:ShowMaps()      " Enable :ShowMaps to call the function

nnoremap \m :ShowMaps<CR>            " Map keys to call the function 
```

这是一个强大的函数，可以使用 的排序输出创建垂直拆分`:maps`。我把它放在我的`vimrc`.

最后一行映射两个键`\``m`来调用该函数，根据需要进行更改。

注意：正如@romainl 提到的，这将不包括`i`插入文本之类的命令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-28T16:01:23.507

您还可以使用[FZF 插件](https://github.com/junegunn/fzf.vim)，它为您提供的命令与在可模糊搜索的弹出窗口中显示`:Maps`相同的信息。`:verbose map`它与 Tom Hales 的回答基本相同，但是是 fzf 版本。我已将其映射到`<leader>F1`.

# jquery-ui - jQuery Accordion - 与其他 jQuery 项目冲突

> ID：13990139
> 
> 赞同：1
> 
> 时间：2012-12-21T12:23:20.120
> 
> 标签：jquery-ui, jquery-ui-accordion, hoverintent, jquery

好吧，我在同一页面上使用了多个 jQuery 滑块，不知何故我设法使它工作，但现在还有另一个问题：

[http://www.tradeglobus.com/index2.php](http://www.tradeglobus.com/index2.php)

手风琴菜单：http: [//jqueryui.com/accordion/#hoverintent](http://jqueryui.com/accordion/#hoverintent)

在“Premium Memberships”中的 div 实际上适用于鼠标悬停意图，当我添加“jquery noConflict”时，其他一切都开始工作，但手风琴菜单现在只在 CLICK 事件上工作，而不是在悬停时工作。

这是代码：

```
 <script>
  var $accui = jQuery.noConflict(true);
  $(function() {
$accui( "#accordion" ).accordion({
    event: "click hoverintent"
});
  });

  var cfg = ($.hoverintent = {
sensitivity: 7,
interval: 50
  });

  $.event.special.hoverintent = {
setup: function() {
    $( this ).bind( "mouseover", jQuery.event.special.hoverintent.handler );
},
teardown: function() {
    $( this ).unbind( "mouseover", jQuery.event.special.hoverintent.handler );
},
handler: function( event ) {
    var that = this,
        args = arguments,
        target = $( event.target ),
        cX, cY, pX, pY;

    function track( event ) {
        cX = event.pageX;
        cY = event.pageY;
    };
    pX = event.pageX;
    pY = event.pageY;
    function clear() {
        target
            .unbind( "mousemove", track )
            .unbind( "mouseout", arguments.callee );
        clearTimeout( timeout );
    }
    function handler() {
        if ( ( Math.abs( pX - cX ) + Math.abs( pY - cY ) ) < cfg.sensitivity ) {
            clear();
            event.type = "hoverintent";
            event.originalEvent = {};
            jQuery.event.handle.apply( that, args );
        } else {
            pX = cX;
            pY = cY;
            timeout = setTimeout( handler, cfg.interval );
        }
    }
    var timeout = setTimeout( handler, cfg.interval );
    target.mousemove( track ).mouseout( clear );
    return true;
}
};
</script> 
```

你们中的任何人都可以突出显示此代码中的任何错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:36:50.783

代码似乎是正确的。我看到你的网站使用 jquery 版本：v1.6.2，在这个论坛我发现有些版本有同样的问题：

[手风琴上的jquery特殊事件hoverintent在jquery 1.7中不起作用](http://forum.jquery.com/topic/jquery-special-event-hoverintent-on-accordion-not-working-in-jquery-1-7)

尝试升级您的 jQuery ......也许它会工作。

# matlab - MATLAB：数据点不够平滑，使用 Excel？

> ID：13990141
> 
> 赞同：2
> 
> 时间：2012-12-21T12:23:27.443
> 
> 标签：matlab, netlogo

我目前正在撰写关于通过 Netlogo 进行交通模拟的本科论文。我的模拟涉及一段时间后车辆的行驶周期。我导出数据（以关于车辆速度、时间、档位和加速度的 .txt 文件的形式）并使用 MATLAB+Simulink 的准静态工具箱来分析行驶周期数据。但是，每当我将数据输入准静态工具箱时，它都不会给出有关燃料消耗的图表。我的导师告诉我，我的数据对于 QSS 工具箱来说不够“干净”，需要“平滑”才能让 MATLAB 给出图表。我在下面插入了图片：

这是我的驾驶循环数据：

![在此处输入图像描述](../Images/6eb55771f90568c381feadf74ad631fe.png)

每当我运行它时，这些图都不会给出任何内容，如下所示：

![在此处输入图像描述](../Images/3f7b58ef2eaffff7187a7359495fab96.png)

现在这是论文的先前支持者之一的样本数据。请注意，他的驾驶循环很平稳，几乎像盒子一样：

![在此处输入图像描述](../Images/6fb7f3c3776815354613337ff142df99.png)

我的导师告诉我，MATLAB 不会给出绘图，因为：

a.) 缺少驾驶循环输入的数量 b.) 数据不够平滑

我有 108000 分的速度、时间、齿轮和加速度数据，所以我认为 b.) 是这里的更多问题。如果是这样，我怎样才能平滑我的数据？我使用 Excel 吗？如何？

编辑：看来我一直在取负数的 sqrt： ![在此处输入图像描述](../Images/2da4e2eb35ae5c71f5153a89ed2092a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:27:08.340

请清楚问题现在是否已解决，或者您究竟想解决什么。

假设您的问题是：我怎样才能使上方绿色框中的数据看起来更像下方绿色框中的数据

这是一个方法：

平滑数据，假设您的数据在`x`您可以平滑它的向量中

```
x_smooth = smooth(x) 
```

使其成为块状，确定您希望边界的位置，例如：

```
lower = min(x);
upper = max(x);
treshold = mean(x); 
```

现在强制它到边缘

```
idx = x_smooth > treshold
x_smooth(idx) = upper;
x_smooth(~idx) = lower; 
```

# objective-c - 如何使用 Objective-C 中的扩展坞连接器将信号通过应用程序传递到连接的设备？

> ID：13990145
> 
> 赞同：1
> 
> 时间：2012-12-21T12:23:40.073
> 
> 标签：objective-c

我正在开发一个应用程序，当设备通过 iPhone 坞站连接器连接时将获得信号，并且还可以将信号发送到连接的设备。

请从一开始就指导我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:30:15.260

我自己没有直接使用它，但您需要阅读[External Accessory Framework](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/ExternalAccessoryFrameworkReference/_index.html#//apple_ref/doc/uid/TP40008235)。还讨论了一些[编程主题](http://developer.apple.com/library/ios/#featuredarticles/ExternalAccessoryPT/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009502)。

谷歌搜索为您提供了一些可能有用的其他参考资料。例如[http://www.objectpartners.com/2010/09/14/communicating-with-external-devices-from-the-iphone-and-ipad/](http://www.objectpartners.com/2010/09/14/communicating-with-external-devices-from-the-iphone-and-ipad/)

# wpf - Blend / XAML：如何修改路径的中心，这是路径列表框的一项

> ID：13990148
> 
> 赞同：0
> 
> 时间：2012-12-21T12:23:43.850
> 
> 标签：wpf, xaml, path, center

所以我有一个路径列表框，即要遵循的路径，它包含一个本身就是路径的项目，即项目。pathlistbox 上的项目正确地站在路径的一个点上。

但是，该项目以该点为中心（应该如此），我想以某种方式将该中心更改为项目/路径的底部。

示例：路径列表框将是一条像道路一样的直线，而项目是一个人，绘制为路径。现在，这个人会显得太低，即她的脚低于道路。我希望双脚在路上。尝试拖动路径的中心点没有影响。

如果有人可以提供帮助，那就太好了。

谢谢

# oop - 在 matlab 中有效地创建对象数组

> ID：13990150
> 
> 赞同：0
> 
> 时间：2012-12-21T12:23:46.083
> 
> 标签：oop, matlab

> **可能重复：**
> [如何在 MATLAB 中预分配一个类数组？](https://stackoverflow.com/questions/2510427/how-to-preallocate-an-array-of-class-in-matlab)

我有一个创建 X 类对象数组的 matlab 代码。X 接收一个参数：一个整数。

Xs 数组是从索引数组创建的。今天我正在做这样的事情：

```
for i=1:length(integer_array)
    integer = integer_array(i);
    cur_x = X(integer)
    x_arr = [x_arr cur_x];
end 
```

在 Matlab 中有更有效的方法吗？

谢谢

# java - 将文件从java套接字发送到c ++ linux Socket

> ID：13990155
> 
> 赞同：-1
> 
> 时间：2012-12-21T12:24:15.260
> 
> 标签：java, c++, linux, file, sockets

我已经搜索了如何使用套接字在 linux 中接收和发送文件的简洁解释，但我找不到一个甚至可以工作的解决方案。我在 linux 上有一个 c++ 服务器，还有一个在 java 中运行的客户端。

我需要它来执行以下操作：

*   客户端需要能够向服务器发送文本命令。
*   客户端需要能够向服务器发送/接收文件。
*   服务器在接收文件时获取以下命令：PUT < saveLocation > < filecontents >
*   一切都被“\ n”关闭。

我已经编写了很多代码，并且能够在客户端和服务器之间来回发送命令。但现在我被困在客户端和服务器上发送/接收文件。

我应该采取哪些步骤，才能从客户端接收“PUT /map1/test.pdf somefile”命令并接收实际文件？

如果需要代码，请询问，我会发布它，但我不知道哪些代码块会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:41:22.903

为什么不使用 FTP 服务器呢？毕竟，FTP 就是为此而设计的。您可以在您的服务器上设置一个 FTP 守护程序并使用 Apache [commons-net 的](http://commons.apache.org/net/)FTPClient 。

如果您一心想重新发明轮子，那么 MIME 多部分方法（通过 HTTP 发布文件或在电子邮件中作为附件发送时使用）是定义一个边界，然后对二进制文件内容进行 BASE64 编码以便能够将其作为 ASCII 文本发送。

边界应该是一串足够复杂的文本，以便唯一。你的“交易”看起来像

```
PUT <filename> boundary=A_COMPLEX_BOUNDARY_STRING<newline>
<BASE64 encoded binary file content>A_COMPLEX_BOUNDARY_STRING 
```

在服务器上接收时，您解析文件名、边界值，然后您知道边界字符串的第一个换行符之后的所有内容都是 BASE64 编码的二进制文件数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:59:01.083

套接字仅传输信息字节——它不“知道”这些字节是来自文件、消息还是随机生成的。完全由发送和接收软件来组织字节，以便接收者可以解释发送的字节。

通常对于简单的消息，发件人只需以 ASCII（或某种编码）行尾结束每条消息。但这不适用于可能包含行尾字节作为有效数据的数据。

在我看来，最简单的事情是发送每条消息中发送的字节数。除非有外部原因，否则我不会尝试在一条消息中发送整个文件；我会将文件分成“块”；我会定义一条消息，将特定块中的字节数作为第一个字节，然后发送块的其余部分，然后重复直到发送所有块。

接收器显然必须知道字节数是第一个发送的，它是多少字节，哪个字节（高位或低位）是第一个等等。然后接收器有足够的信息来读取所有块并将它们重新组合在一起。

我还将包括一个“握手”，即接收者在每个块之后返回一条消息，表明它收到了那个；否则，您可能会花费大量时间发送字节，却发现您的接收器由于某种原因已关闭。

# tomcat - 为什么 Apache Tomcat Maven 插件两次上传 WAR 文件？

> ID：13990167
> 
> 赞同：5
> 
> 时间：2012-12-21T12:24:46.923
> 
> 标签：tomcat, maven, plugins, deployment, war

当我使用 maven 部署我的 WAR 时，目标战争（完全相同）被上传到服务器两次。有人可以解释一下吗？

我在我的模块上使用它：

```
clean install org.apache.tomcat.maven:tomcat6-maven-plugin:2.0:redeploy 
```

从日志文件

```
[INFO] --- maven-war-plugin:2.1.1:war (default-war) @ mobile-server ---
[INFO] Packaging webapp
[INFO] Assembling webapp [mobile-server] in [C:\develope\mobile\mobile-server\target\mobile-server]
[INFO] Processing war project
[INFO] Copying webapp resources [C:\develope\mobile\mobile-server\src\main\webapp]
[INFO] Webapp assembled in [241 msecs]
[INFO] Building war: C:\develope\mobile\mobile-server\target\mobile-server.war
[INFO] 
[INFO] <<< tomcat6-maven-plugin:2.0:redeploy (default-cli) @ mobile-server <<<
[INFO] 
[INFO] --- tomcat6-maven-plugin:2.0:redeploy (default-cli) @ mobile-server ---    
[INFO] Deploying war to http://myserver.eu/pra-mobile-server  
Uploading: http://myserver.eu/manager-test/deploy?path=%2Fmobile-server&update=true
Uploaded: http://myserver.eu/manager-test/deploy?path=%2Fmobile-server&update=true (12678 KB at 49.3 KB/sec)

Uploading: http://myserver.eu/manager-test/deploy?path=%2Fmobile-server&update=true
Uploaded: http://myserver.eu/manager-test/deploy?path=%2Fmobile-server&update=true (12678 KB at 50.9 KB/sec) 
```

我的主要 pom.xml 如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>eu.company.prj.pramobile</groupId>
    <artifactId>mobile-parent</artifactId>
    <relativePath>../mobile-parent/pom.xml</relativePath>
    <version>1.0-SNAPSHOT</version>
</parent>

<artifactId>mobile-server</artifactId>
<packaging>war</packaging>
<name>mobile server</name>

<properties>
    <version.standard.taglibs>1.1.2</version.standard.taglibs>
</properties>

<repositories>
        <repository>
            <id>com.springsource.repository.libs-milestone</id>
            <name>SpringSource Enterprise Bundle Repository - libs</name>
            <url>http://repo.springsource.org/libs-milestone/</url>
        </repository>
 </repositories>

<dependencies>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>mobile-test</artifactId>
        <version>${project.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>mobile-common</artifactId>
        <version>${project.version}</version>
    </dependency>

    <!-- Import Spring dependencies, these are either from community or versions
        certified in WFK2 -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>${version.spring}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${version.spring}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${version.spring}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${version.spring}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${version.spring}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${version.spring}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${version.spring}</version>
    </dependency>

    <dependency>
        <groupId>commons-codec</groupId>
        <artifactId>commons-codec</artifactId>
        <version>1.7</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.4</version>
    </dependency>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.2</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.1.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache</artifactId>
        <version>1.6.1</version>
    </dependency>
    <dependency>
        <groupId>org.springmodules</groupId>
        <artifactId>spring-modules-cache</artifactId>
        <version>0.8a</version>
        <!-- Unfortunately design of spring cache module is not the best - we
            need to exclude not necessary dependencies -->
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
            </exclusion>
            <exclusion>
                <groupId>gigaspaces</groupId>
                <artifactId>gigaspaces-ce</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>jsk-lib</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>jsk-platform</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>mahalo</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>reggie</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>start</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>boot</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>webster</artifactId>
            </exclusion>
            <exclusion>
                <groupId>commons-attributes</groupId>
                <artifactId>commons-attributes-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>commons-attributes</groupId>
                <artifactId>commons-attributes-compiler</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>javassist</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-cache</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-common</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-jmx</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-minimal</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-system</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jcs</groupId>
                <artifactId>jcs</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jgroups</groupId>
                <artifactId>jgroups-all</artifactId>
            </exclusion>
            <exclusion>
                <groupId>geronimo-spec</groupId>
                <artifactId>geronimo-spec-jta</artifactId>
            </exclusion>
            <exclusion>
                <groupId>xpp3</groupId>
                <artifactId>xpp3_min</artifactId>
            </exclusion>
            <exclusion>
                <groupId>xjavadoc</groupId>
                <artifactId>xjavadoc</artifactId>
            </exclusion>
            <exclusion>
                <groupId>opensymphony</groupId>
                <artifactId>oscache</artifactId>
            </exclusion>
            <exclusion>
                <groupId>ehcache</groupId>
                <artifactId>ehcache</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.quartz-scheduler</groupId>
        <artifactId>quartz</artifactId>
        <version>${version.quartz}</version>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.5</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.1</version>
    </dependency>

    <!--mockito for test-->
    <dependency>
         <groupId>org.mockito</groupId>
         <artifactId>mockito-all</artifactId>
         <version>1.9.5</version>
         <scope>test</scope>
     </dependency>

    <dependency>
      <groupId>org.kubek2k</groupId>
      <artifactId>springockito</artifactId>
      <version>1.0.4</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.kubek2k</groupId>
      <artifactId>springockito-annotations</artifactId>
      <version>1.0.5</version>
      <scope>test</scope>
    </dependency>

    <!--testing MVC controllers-->
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-test-mvc</artifactId>
      <version>1.0.0.M2</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.0.RELEASE</version>
    </dependency>

</dependencies>

<build>

    <finalName>mobile-server</finalName>

    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.10</version>
            <configuration>
                <jettyEnvXml>${basedir}/src/test/resources/jetty-env.xml</jettyEnvXml>
                <!-- Solves locked problem for JSP while jetty is running -->
                <webDefaultXml>src/test/resources/webdefault.xml</webDefaultXml>
                <stopKey>0</stopKey>
                <stopPort>8001</stopPort>
                <scanIntervalSeconds>5</scanIntervalSeconds>
                <systemProperties>
                    <systemProperty>
                        <name>org.apache.commons.logging.Log</name>
                        <value>org.apache.commons.logging.impl.SimpleLog</value>
                    </systemProperty>

                    <systemProperty>
                        <name>log4j.configurationFile</name>
                        <value>file:${project.basedir}/src/main/resources/log4j.xml</value>
                    </systemProperty>

                </systemProperties>

            </configuration>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.9</version>
                </dependency>
            </dependencies>
        </plugin>
        <!-- Surefire plugin before 2.9 version is buggy -->
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.10</version>
            <configuration>
                <parallel>true</parallel>
                <threadCount>10</threadCount>
                <systemPropertyVariables>
                    <java.awt.headless>true</java.awt.headless>
                </systemPropertyVariables>
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <!--to avoid maven error message-->
            <configuration>
                <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
            </configuration>
        </plugin>

        <!--import objects from schema generation-->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>1.5</version>
            <executions>
                <execution>
                    <goals>
                        <goal>xjc</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <encoding>UTF-8</encoding>
                <extension>true</extension>
                <packageName>eu.company.prj.pra.mobile.server.generated.place1</packageName>
                <schemaDirectory>src/main/resources/META-INF/schema</schemaDirectory>
                <outputDirectory>${basedir}/src/main/java/</outputDirectory>
                <failOnNoSchemas>true</failOnNoSchemas>
                <clearOutputDir>false</clearOutputDir>
            </configuration>
        </plugin>

        <!-- mvn tomcat plugin alternative - run -->
        <plugin>
          <groupId>org.apache.tomcat.maven</groupId>
          <artifactId>tomcat6-maven-plugin</artifactId>
          <version>2.0</version>
            <configuration>             
                <systemProperties>-Dmaven.tomcat.uriEncoding=UTF-8</systemProperties>
                <url>${tomcat-maven-plugin.url}</url>
                <username>${tomcat-maven-plugin.username}</username>
                <password>${tomcat-maven-plugin.password}</password>
            </configuration>
        </plugin>

        <!-- mvn tomcat plugin alternative - run -->
        <!--<plugin>-->
            <!--<groupId>org.codehaus.mojo</groupId>-->
            <!--<artifactId>tomcat-maven-plugin</artifactId>-->
            <!--<configuration>-->
                <!--<contextFile>${basedir}/src/test/resources/tomcat-context.xml</contextFile>-->
                <!--<url>${tomcat-maven-plugin.url}</url>-->
                <!--<username>${tomcat-maven-plugin.username}</username>-->
                <!--<password>${tomcat-maven-plugin.password}</password>-->
            <!--</configuration>-->
            <!--<dependencies>-->
                <!--<dependency>-->
                    <!--<groupId>mysql</groupId>-->
                    <!--<artifactId>mysql-connector-java</artifactId>-->
                    <!--<version>5.1.9</version>-->
                <!--</dependency>-->
            <!--</dependencies>-->
        <!--</plugin>-->

    </plugins>
</build> 
```

**更新** 父pom：

http://maven.apache.org/xsd/maven-4.0.0.xsd">4.0.0

```
<groupId>eu.company.prj.mobile</groupId>
<artifactId>mobile-parent</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>
<name>mobile project parent</name>

<properties>
    <version.spring>3.1.1.RELEASE</version.spring>
    <version.jackson>1.9.11</version.jackson>
    <version.commons.logging>1.1.1</version.commons.logging>
    <version.quartz>2.1.6</version.quartz>
    <slf4j.version>1.5.8</slf4j.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<build>
    <plugins>
        <!-- Force Java 6 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.1</version>
            <configuration>
                <encoding>${project.build.sourceEncoding}</encoding>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>
<profiles>
        just properties with u/p ...
</profiles> 
```

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:06:20.463

试一试，在没有安装目标的情况下运行 mvn cmd 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T12:42:10.640

最近，我在将战争上传到测试服务器时遇到了同样的问题。我多次尝试在互联网上找到这个问题的答案，但没有成功。偶然地，我在我的案例中发现了我们的问题，我在这里分享它，因为也许这对某人有帮助（但是，我不确定这是否是你的情况）。

所以在我的情况下，战争的双重上传是由我转发端口的原因引起的。Tomcat 通常在 8080 端口上工作。为了强制它在 80 端口上工作，我配置了我的服务器（使用 iptables），它只是将请求从 80 端口转发到 8080 端口。对于 tomcat maven 插件配置，我只是使用通过 ip 上传，没有指定 8080 端口。这会导致 maven 插件两次上传 war（第一个请求是重定向，而第二个是实际上传）。

只需将插件配置中的端口更改为 8080 即可解决我的问题。

# javascript - ajax加载页面后执行javascript脚本不起作用

> ID：13990169
> 
> 赞同：0
> 
> 时间：2012-12-21T12:25:02.790
> 
> 标签：javascript, ajax, pageload

我有一个执行 AJAX 调用并加载整个页面的页面。被加载的页面有一些 Javascript。javascript 在加载时会自行在页面上运行，但是当它被 AJAX 加载时，Javascript 不起作用。我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:38:52.320

这听起来像是与 AJAX 的异步属性有关。当您的页面加载时，Javascript 会立即在当时可用的内容上执行。因为 AJAX 调用发生在页面加载之后（它不是加载页面的一部分，它是异步发生的），所以 Javascript 不会应用于从 AJAX 调用返回的结果。这仅仅是因为在执行原始 Javascript 时，由 AJAX 调用创建或更新的对象还不存在。

这就是 AJAX 的设​​计和意图。您可以通过在 AJAX 调用的结果中添加一些 Javascript 来解决它，以确保在处理 AJAX 调用的结果后再次执行必要的过程。

在没有显示任何代码或更详细的描述的情况下，关于这个问题没有什么可说的了。

# mysql - 优化 MySQL 查询

> ID：13990171
> 
> 赞同：1
> 
> 时间：2012-12-21T12:25:15.447
> 
> 标签：mysql, sql

我有一个 mysql 查询需要 13 秒来执行有没有办法减少执行时间这里是解释

```
EXPLAIN
SELECT SQL_CALC_FOUND_ROWS st.store_id as st_id, `st`.`store_id`
FROM `store` AS `st`
LEFT JOIN `coupon` AS `cp` ON st.store_id = cp.store_id
LEFT JOIN `deal` AS `dl` ON st.store_id = dl.store_id
LEFT JOIN `store_category_relations` AS `scr` ON st.store_id = scr.store_id
GROUP BY `st`.`store_id`;

+----+-------------+-------+-------+-----------------------+-----------------------+---------+---------------------+------+-------------+
| id | select_type | table | type  | possible_keys         | key                   | key_len | ref                 | rows | Extra       |
+----+-------------+-------+-------+-----------------------+-----------------------+---------+---------------------+------+-------------+
|  1 | SIMPLE      | st    | index | NULL                  | PRIMARY               | 4       | NULL                |    1 | Using index |
|  1 | SIMPLE      | cp    | ref   | store_id              | store_id              | 4       | sonicqa.st.store_id |    5 | Using index |
|  1 | SIMPLE      | dl    | ref   | idx_deal_fid_store_id | idx_deal_fid_store_id | 4       | sonicqa.st.store_id |  287 | Using index |
|  1 | SIMPLE      | scr   | ref   | store_id              | store_id              | 4       | sonicqa.st.store_id |    2 | Using index |
+----+-------------+-------+-------+-----------------------+-----------------------+---------+---------------------+------+-------------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:29:32.953

`Using index`在查询的每个原子部分......没有临时文件，没有遍历所有行......

您可能已经有了最快的解决方案。

不过有一个问题：您使用的是 InnoDB 还是其他数据库引擎？

# jquery - 让 nth-child 在 IE8 及更低版本中工作

> ID：13990173
> 
> 赞同：0
> 
> 时间：2012-12-21T12:25:28.827
> 
> 标签：jquery, css, internet-explorer-8, css-selectors

我正在使用以下代码：

```
.c-1:first-child, .c-2:first-child, .c-1:nth-child(4n+1) { margin-left: 0; } 
```

这很好用，但我需要为不支持 nth-child 的浏览器（如 IE8）模仿这一点。

我已经尝试使用这个 jQuery 代码来添加一个类，但没有任何反应，这个代码对吗？

```
// Support nth child in IE8
$('.c-1:first-child').addClass('remove');
$('.c-2:first-child').addClass('remove');
$('.c-1:nth-child(4n+1)').addClass('remove'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:27:33.853

`.eq(<index>)`您可以为此使用 jQuery 。

例如：

```
$('.c-1').eq(0).addClass('remove'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:31:48.080

也许看看下面的文章：

[http://abouthalf.com/2011/07/06/poor-mans-nth-child-selector-for-ie-7-and-8/](http://abouthalf.com/2011/07/06/poor-mans-nth-child-selector-for-ie-7-and-8/)

但所描述的解决方案仅适用于 ie7 和 8，不幸的是，在 ie6 中它不会

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:53:17.330

有一个库可以填充 IE 中缺少的 CSS 功能：

[http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)

使用IE9版本会`:nth-child()`根据功能列表访问：http: [//ie7-js.googlecode.com/svn/test/index.html](http://ie7-js.googlecode.com/svn/test/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T10:41:29.167

我建议使用[http://selectivizr.com/](http://selectivizr.com/)

对于伪元素 IE8。我知道它的旧帖子，但也许 some1 会发现它很有用:)

# asp.net-mvc-3 - 全新 SignalR 安装失败

> ID：13990174
> 
> 赞同：1
> 
> 时间：2012-12-21T12:25:39.183
> 
> 标签：asp.net-mvc-3, signalr

我正在开发一个 ASP.NET MVC 3 站点，并且刚刚将 SignalR 添加到组合中（关闭 nuget）。

我添加了一个 Hubs 文件夹，并在该文件夹中添加了一个类（继承自 Hub 类）。

我在 VS2010 中工作并在 localhost 上的 IIS Express 上运行。按 F5 给我这个：

> 尝试通过方法“Microsoft.AspNet.SignalR.RouteExtensions.MapHubs(System.Web.Routing.RouteCollection, System.String, Microsoft.AspNet.SignalR.IDependencyResolver)”访问方法“Microsoft.AspNet.SignalR.DependencyResolverExtensions.InitializePerformanceCounters(Microsoft .AspNet.SignalR.IDependencyResolver, System.String, System.Threading.CancellationToken)' 失败。

在 RegisterHubs 类的 Start 方法中。有任何想法吗？我已经进行了谷歌搜索，它提出的只是一个指向这个问题[MethodAccessException](https://stackoverflow.com/questions/13973425/signalr-methodaccessexception)的链接（看起来有点相似）。

附加信息：用旧的 Alpha 2 替换 RC1 可以解决问题，但是..

# android - 绑定服务调用给出 NullPointerException

> ID：13990179
> 
> 赞同：2
> 
> 时间：2012-12-21T12:25:49.970
> 
> 标签：android, service

您好，感谢您的帮助。

我有以下活动（见下面的代码）。活动绑定（或尝试绑定）到服务。

该服务公开（或应该公开）一个公共方法 getNumber() 来检索一个数字。

当执行到达

```
 mService.getNumber() 
```

应用程序停止返回 NullPointerException。

我进行了调试，我所能理解的是，由于某种原因， mService.getNumber() 导致了问题。

编辑：显然服务没有绑定，我在之后测试了 mBound 布尔值

```
Intent intent = new Intent(this, LocalService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE); 
```

它返回false，因此服务没有绑定......问题就在那里！

感谢您的任何建议

```
 public class Quotes extends Activity {
    public LocalService mService;
    boolean mBound = false;
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
             // Bind to LocalService
        Intent intent = new Intent(this, LocalService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
        Log.e("", "arrivo a prima di loop");
        for(int a=0;;a++){
            SystemClock.sleep(500); 
            Log.e("", "sono nel loop");
            int num =mService.getNumber();
            Toast.makeText(this,Integer.toString(num),     Toast.LENGTH_SHORT).show();
                }
    }
       private ServiceConnection mConnection = new ServiceConnection() {
            //@Override
            public void onServiceConnected(ComponentName className,
                    IBinder service) {
                Log.e("", "sono in ServiceConnection");
    // We've bound to LocalService, cast the IBinder and get    LocalService instance
                LocalBinder binder = (LocalBinder) service;
                mService = binder.getService();
                mBound = true;
            }
            //@Override
            public void onServiceDisconnected(ComponentName arg0) {
                mBound = false;
            }
        }; 
```

这是服务的代码：

```
package com.example.quotes;

@TargetApi(3)
public class LocalService extends Service {
    public int i;
    // Binder given to clients
    private final IBinder mBinder = new LocalBinder();
              * Class used for the client Binder.  Because we know this service always
      * runs in the same process as its clients, we don't need to deal with IPC.
      */
    public class LocalBinder extends Binder {
        LocalService getService() {
            // Return this instance of LocalService so clients can call public methods
            return LocalService.this;
        }
    }
    @Override
    public IBinder onBind(Intent intent) {
        Log.e("", "sono nel service");
         new Task().execute();
        return mBinder;
    } 
         class Task extends AsyncTask<Void, String, Void> {
         @Override
        protected Void doInBackground(Void... unused) {
        for (i=0;;i++) {
        Log.e("Sono nel AsyncTask del Service", Integer.toBinaryString(i));
        SystemClock.sleep(500);
        }
        //return(null);
        }
     }

    public int getNumber() {
        return i;
    }       
 } 
```

日志猫：

```
12-21 12:05:18.837: D/AndroidRuntime(889): Shutting down VM
12-21 12:05:18.837: W/dalvikvm(889): threadid=1: thread exiting with uncaught exception     (group=0x40a13300)
12-21 12:05:18.887: E/AndroidRuntime(889): FATAL EXCEPTION: main
12-21 12:05:18.887: E/AndroidRuntime(889): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.quotes/com.example.quotes.Quotes}:     java.lang.NullPointerException
12-21 12:05:18.887: E/AndroidRuntime(889):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-21 12:05:18.887: E/AndroidRuntime(889):  at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-21 12:05:18.887: E/AndroidRuntime(889):  at     android.app.ActivityThread.access$600(ActivityThread.java:130)
12-21 12:05:18.887: E/AndroidRuntime(889):  at     android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-21 12:05:18.887: E/AndroidRuntime(889):  at     android.os.Handler.dispatchMessage(Handler.java:99)
12-21 12:05:18.887: E/AndroidRuntime(889):  at android.os.Looper.loop(Looper.java:137)
12-21 12:05:18.887: E/AndroidRuntime(889):  at    android.app.ActivityThread.main(ActivityThread.java:4745)
12-21 12:05:18.887: E/AndroidRuntime(889):  at     java.lang.reflect.Method.invokeNative(Native Method)
12-21 12:05:18.887: E/AndroidRuntime(889):  at java.lang.reflect.Method.invoke(Method.java:511)
12-21 12:05:18.887: E/AndroidRuntime(889):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-21 12:05:18.887: E/AndroidRuntime(889):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-21 12:05:18.887: E/AndroidRuntime(889):  at dalvik.system.NativeStart.main(Native Method)
12-21 12:05:18.887: E/AndroidRuntime(889): Caused by: java.lang.NullPointerException
12-21 12:05:18.887: E/AndroidRuntime(889):  at com.example.quotes.Quotes.onCreate(Quotes.java:91)
12-21 12:05:18.887: E/AndroidRuntime(889):  at android.app.Activity.performCreate(Activity.java:5008)
12-21 12:05:18.887: E/AndroidRuntime(889):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-21 12:05:18.887: E/AndroidRuntime(889):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-21 12:05:18.887: E/AndroidRuntime(889):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:06:30.777

好的，找到了谜语的解决方案。

绑定到服务是异步的。

只有当 onServiceConnected 被调用时，服务才会被绑定；因此，在 onServiceConnected 中，我添加了一个方法来启动需要在服务上执行的活动。

再见

# java - RSA 2048 加密解密 - 例外

> ID：13990181
> 
> 赞同：3
> 
> 时间：2012-12-21T12:26:10.653
> 
> 标签：java, encryption, rsa, public-key-encryption, private-key

我正在尝试使用 RSA 2048 加密和解密数据。

我们有一个公钥和一个私钥，并且将始终使用相同的。但问题是，当我解密时，我得到 javax.crypto.BadPaddingException: Data must start with zero

```
File file = new File("C:\\temp-ldi\\pubkey.txt");
FileWriter writer = new FileWriter(file);
file.createNewFile();
encryptedText = RSACrypto.encrypt("PLAIN TEXT"); //no argument of pub-key, generate key pair
writer.write(new BASE64Encoder().encode(RSACrypto.pubKeyToBytes(RSACrypto.publicKey)));
writer.close();
file = new File("C:\\temp-ldi\\privkey.txt");
writer = new FileWriter(file);
file.createNewFile();
writer.write(new BASE64Encoder().encode(RSACrypto.privKeyToBytes(RSACrypto.privateKey)));
writer.close(); 
```

然后我使用下面的代码来解密数据

```
File privfile = new File("C:\\temp-ldi\\privkey.txt");
File pubfile = new File("C:\\temp-ldi\\pubkey.txt");
FileReader reader = new FileReader(pubfile);
// file.createNewFile();
BufferedReader br = new BufferedReader(reader);
StringBuilder sb = new StringBuilder();
String s;
while ((s = br.readLine()) != null) {
    sb.append(s);
}
br.close();
reader.close();
this.encryptedText = RSACrypto.encrypt("PLAIN TEXT", sb.toString());
reader = new FileReader(privfile);
br = new BufferedReader(reader);
sb = new StringBuilder();
while ((s = br.readLine()) != null) {
    sb.append(s);
}
br.close();
reader.close();
System.out.println(RSACrypto.decrypt(this.encryptedText, sb.toString())); 
```

所有加密/解密字符串将以 Base64Encoder/Base64Decoder 格式返回。

如何从文件/简单字符串传递私钥，以便不修改密钥。

**更新** RSACrypto 类：[http ://sebsauvage.net/paste/?83517f2b3db94d24#Sdu12/vXPuxa5AxO95FPgKSF6N40R2DzD6lwQkvroyE=](http://sebsauvage.net/paste/?83517f2b3db94d24#Sdu12/vXPuxa5AxO95FPgKSF6N40R2DzD6lwQkvroyE=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:01:08.830

好的，RSACrypto 中的问题。当您加密文件时，它每次都会创建新的密钥对（in `encrypt`）。`newKeyPair`只需在需要时从加密中删除新的密钥对生成，直接调用即可。而且静态变量对多线程环境没有好处。

我建议抛出 RSACrypto 类，或者至少重写它。我不知道你为什么这么害怕使用 byte[] 类型以及为什么你需要所有的东西都是 BASE64 编码的。无需额外的编码/解码，代码将变得非常简单。

这是工作示例（没有 RSACrypto），您可以将其用作模板：

```
 File file = new File("C:\\temp-ldi\\pubkey.txt");
    FileWriter writer = new FileWriter(file);
    file.createNewFile();
    KeyPairGenerator generator = KeyPairGenerator.getInstance("RSA");
    generator.initialize(2048, new SecureRandom());
    KeyPair keyPayr = generator.generateKeyPair();
    writer.write(new BASE64Encoder().encode(keyPayr.getPublic().getEncoded()));
    writer.flush();
    writer.close();
    file = new File("C:\\temp-ldi\\privkey.txt");
    writer = new FileWriter(file);
    file.createNewFile();
    writer.write(new BASE64Encoder().encode(keyPayr.getPrivate().getEncoded()));
    writer.flush();
    writer.close();

    File privfile = new File("C:\\temp-ldi\\privkey.txt");
    File pubfile = new File("C:\\temp-ldi\\pubkey.txt");
    FileReader reader = new FileReader(pubfile);

    BufferedReader br = new BufferedReader(reader);
    StringBuilder sb = new StringBuilder();
    String s;
    while ((s = br.readLine()) != null) {
        sb.append(s);
    }
    br.close();
    reader.close();
    PublicKey publicKey = KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(new BASE64Decoder().decodeBuffer(sb.toString())));
    Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
    cipher.init(Cipher.ENCRYPT_MODE, publicKey);
    String encryptedText = new BASE64Encoder().encode(cipher.doFinal("PLAIN TEXT".getBytes("UTF-8")));
    System.out.println("encrypted: " + encryptedText);
    reader = new FileReader(privfile);
    br = new BufferedReader(reader);
    sb = new StringBuilder();
    while ((s = br.readLine()) != null) {
        sb.append(s);
    }
    br.close();
    reader.close();
    PrivateKey privateKey =  KeyFactory.getInstance("RSA").generatePrivate(new PKCS8EncodedKeySpec(new BASE64Decoder().decodeBuffer(sb.toString())));
    cipher.init(Cipher.DECRYPT_MODE, privateKey);
    System.out.println( new String(cipher.doFinal (new BASE64Decoder().decodeBuffer(encryptedText)))); 
```

# visual-studio - DevExpress 多渠道平台

> ID：13990184
> 
> 赞同：1
> 
> 时间：2012-12-21T12:26:16.123
> 
> 标签：visual-studio, mobile, devexpress

我刚刚开始使用本月早些时候发布的 devExpress 多渠道平台，适用于所有移动平台上的应用程序。问题是我从未使用过 DevExpress 组件，或 html5 或 javascript。你能指出有助于我获得的文章吗开始了吗？感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T06:35:31.363

使用[DXTREME](http://www.devexpress.com/Subscriptions/DXperience/dxtreme.xml)，您可以从这里开始 (HTML5/JS)：[DXTREME 学习中心](http://help.devexpress.com/HTML/#!Overview)

PS 我建议您使用[DevExpress 支持中心](http://www.devexpress.com/Support/Center)获得有关使用 DevExpress 产品的官方和有保证的帮助。请注意，在评估期间（30 天），完全支持是免费的。

# javascript - 修改 Array.prototype 后创建 javascript Array 原型的重置？

> ID：13990187
> 
> 赞同：15
> 
> 时间：2012-12-21T12:26:33.880
> 
> 标签：javascript, arrays, object, prototype

**一般问题：**当像 Array 这样的默认 Javascript 原型被修改、黑客攻击、更改和扭曲到无法使用的程度时，有没有办法创建（或重新实现）原始的、未修改的原型的实例？

* * *

**我的情况：**我有一些代码在（可怕的、专有的、封闭源代码的......）内容管理系统的“编辑”模式下失败，因为内容的“编辑”模式界面的 javascript管理系统从`Array`原型中破解了绝对的人间地狱。

我的代码将在 CMS 的非编辑模式下工作，但要到达那里，它已经在“编辑”模式下进行了测试。[可以测试原型是否已被修改](https://stackoverflow.com/questions/574584/)。是否可以重新实现默认的 Array 原型，以便我可以执行以下操作：

```
var hasArrayBeenTrashed = // boolean based on https://stackoverflow.com/questions/574584/
var normalArray.prototype = // based on answer to this question 
var myArray = !hasArrayBeenTrashed ? [] : new normalArray; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-28T23:55:38.370

OP 现在可能已经想通了，但是对于从 Google 搜索或其他任何地方进入的任何其他人，这里有一个函数，它返回**传递给它的*****任何*****默认构造函数的未修改版本：**

 *```
// Note: the double name assignment below is intentional.
// Only change this part if you want to use a different variable name.
//  │││││ The other one here needs to stay the same for internal reference.
//  ↓↓↓↓↓            ↓↓↓↓↓
var reset = function reset(constructor) {
    if (!(constructor.name in reset)) {
        var iframe = document.createElement('iframe');
        iframe.src = 'about:blank';
        document.body.appendChild(iframe);
        reset[constructor.name] = iframe.contentWindow[constructor.name];
        document.body.removeChild(iframe);
    } return reset[constructor.name];
} 
```

* * *

## 用法是这样的：

**问题**

*有人对默认原型做了一些愚蠢的事情......*

```
Array.prototype.push = function () {
    var that = this;
    [].forEach.call(arguments, function (argument) {
        that.splice(Math.round(Math.random()*that.length), 0, argument)
    }); return 'Trolololo';
} 
```

*...您的代码变得一团糟。*

```
var myArray = new Array(0, 1, 2, 3);
//-> undefined
    // Ok, I made an array.
myArray;
//-> [0, 1, 2, 3]
    // So far so good...
myArray.push(4, 5);
//-> "Trolololo"
    // What?
myArray;
//-> [5, 0, 1, 2, 4, 3]
    // WHAT!? 
```

**解决方案**

*所以你把这个功能混在一起......*

```
var reset = function reset(constructor) {
    if (!(constructor.name in reset)) {
        var iframe = document.createElement('iframe');
        iframe.src = 'about:blank';
        document.body.appendChild(iframe);
        reset[constructor.name] = iframe.contentWindow[constructor.name];
        document.body.removeChild(iframe);
    } return reset[constructor.name];
} 
```

*...并像这样使用它。*

```
var myArray = new reset(Array)(0, 1, 2, 3);
//-> undefined
    // Looks the same
myArray;
//-> [0, 1, 2, 3]
    // Still looks the same
myArray.push(4, 5);
//-> 6
    // Hey, it returned what it's supposed to...
myArray;
//-> [0, 1, 2, 3, 4, 5]
    // ...and all's right with the world again! 
```

*此外，由于每个重置构造函数在第一次返回时都会被缓存，如果您愿意，可以通过直接引用缓存 ( ) 来保存字符，而不是之后每次都`reset.Array`通过函数 ( ) 来保存。`reset(Array)`*

* * *

祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T12:48:03.187

您可以从 iframe 中复制 Array 方法：

```
Array.prototype.slice = function() {
    return "trololol";
};
var a = document.createElement("iframe");
a.src = "about:blank";
document.body.appendChild(a);
var prototype = a.contentWindow.Array.prototype;
var fn = ["toString", "toLocaleString", "join", "pop", "push", "concat", "reverse", "shift", "unshift", "slice", "splice", "sort", "filter", "forEach", "some", "every", "map", "indexOf", "lastIndexOf", "reduce", "reduceRight"];
for (var i = 0; i < fn.length; ++i) {
    var methodName = fn[i];
    var method = prototype[methodName];
    if (method) {
        Array.prototype[methodName] = method;
    }
}
document.body.removeChild(a); 
```

​这里是在chrome和IE9下工作的jsfiddle，没时间搞清楚IE7-8。[http://jsfiddle.net/jMUur/1/](http://jsfiddle.net/jMUur/1/)

在不依赖引用的情况下检查对象是否为数组：

```
function isArray( obj ) {
     return {}.toString.call( obj ) === "[object Array]";
} 
```*

# php - 重复多对多关系

> ID：13990188
> 
> 赞同：0
> 
> 时间：2012-12-21T12:26:35.727
> 
> 标签：php, mysql, symfony, doctrine, doctrine-orm

我有一个实体**Order**和一个实体**Product**。

应该可以将一种产品多次添加到订单中，但是使用 Doctrine 默认*的多对多关系，**连接表*中只能*有一个*关系。有没有办法在*没有额外实体*和*两个一对多关系的*情况下解决这个问题？

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:28:48.990

为什么要多次将产品添加到订单中？使用添加到它的 Quantity 列使其成为多对多关系。一个数量为 N 的产品应该满足您的愿望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:30:06.620

不，您需要一个 OrderLine 表。多对多在概念上可以存在，但在关系数据库中则不能。您必须将其分解为两个多对一关系***

# css - 与用户代理样式表 css 战斗

> ID：13990193
> 
> 赞同：-1
> 
> 时间：2012-12-21T12:26:41.420
> 
> 标签：css, google-chrome, stylesheet, user-agent

我对图像之间的间距有疑问。我已经尝试了一切，但在 Firefox/Opera 中工作完美，但 chrome 和 IE 在图片之间添加了空间。

所以我什至删除了所有的CSS，那是行不通的。

我试图为我在谷歌上找到的 chrome 添加删除 css，这也无济于事

我已经添加了图片，所以你可以看到那里发生了什么。有任何想法吗 ？

![在此处输入图像描述](../Images/e6755279da57f6fb2d5161d533e4d097.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:21:40.440

图像之间不需要的间距通常是由空格（换行符、制表符、空格等）引起的。有很多方法可以解决这个问题，我个人最喜欢的是注释掉空格，以便我的格式保持完整：

```
<img /><!--
--><img /> 
```

在此处查看更多技术：http: [//css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

从表继承的`border-spacing`属性`div`根本不应该应用于图像元素，因为它只适用于表现为表的元素。

[https://developer.mozilla.org/en-US/docs/CSS/border-spacing](https://developer.mozilla.org/en-US/docs/CSS/border-spacing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:10:24.343

这可能与内联对象的渲染方式有关。尝试将所有图像放在标记中的同一行。

# apache - Apache mod_rewrite、.htaccess 和虚拟主机冲突

> ID：13990200
> 
> 赞同：0
> 
> 时间：2012-12-21T12:27:06.630
> 
> 标签：apache, .htaccess, mod-rewrite

我有 2 个这样的虚拟主机：

```
<VirtualHost *:80>
DocumentRoot /var/www/html/watermelon/hhgt/webroot
ServerName booking
#ErrorLog logs/booking-error_log
#CustomLog logs/booking-access_log common
<Directory />
    Options FollowSymLinks
    AllowOverride All
</Directory>
</VirtualHost>

<VirtualHost *:5321>
    DocumentRoot /var/www/html/watermelon/ik/webroot
    ServerName hotspot.local
    ErrorLog logs/hotsppot.local-error_log
    CustomLog logs/hotsppot.local-access_log common
    <Directory />
        Options FollowSymLinks
        AllowOverride All
    </Directory>
</VirtualHost> 
```

他们有相同的.htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

有时第一个虚拟主机会加载第二个虚拟主机的 index.php！

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:55:24.827

这可能是因为您在 /etc/apache2/sites-available/ 中使用了默认值

检查您是否正确设置了可用站点，进一步检查 /var/logs/apache2 中的 Apache 日志

# perl - Perl TK BrowseEntry ComboBox 默认选项

> ID：13990201
> 
> 赞同：2
> 
> 时间：2012-12-21T12:27:07.513
> 
> 标签：perl, combobox, perltk

我在内部接手了一个 Perl TK 项目。我想知道您如何为使用该`BrowseEntry`库的组合框设置默认值。

这是组合框的构造方式。

```
$tm->ComboBox(
                  -variable    => \$invoice_per_country,
                  -font        => $main::UserPref->{'ListFont'},
                  -background  => 'white',
                  -relief      => 'groove',
                  -width       => 40,
                  -takefocus   => 1,
                  -listwidth   => 60,
                  -listheight  => scalar @invoice_countries,
                  -forcematch  => '',
                  -options     => [ @invoice_countries ],
                  -buttontakefocus => 0,
                  -disabledforeground => 'black',
                  -disabledbackground => 'white'

                 )
                 ->pack(-side => 'left',
                        -anchor => 'nw'); 
```

`invoice_countries`包含两个值 ：`('Canada', 'United States')`. 我想知道如何在不切换值顺序的情况下将美国设为默认值（我们将添加更多国家/地区）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:35:38.287

您可以使用以下`variable`选项[`BrowseEntry`](http://search.cpan.org/dist/Tk/pod/BrowseEntry.pod)：

```
#!/usr/bin/env perl

use strict;
use warnings;
use Tk;

my @items = ('Canada', 'United States');
my $mw = MainWindow->new;
$mw->geometry('300x300');
my $default = $items[1];

my $be = $mw->BrowseEntry(-label=> 'country', -variable=> \$default,)->place(-y=> 100);
my $lb = $be->Subwidget('slistbox');
$lb->insert('end', @items);

MainLoop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T09:56:39.253

您可以使用浏览器入口的配置方法 $sel->configure(-variable => );

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:44:33.177

它应该反映 中的任何值`$invoice_per_country`，只需在打包之前将其设置为 'United States' （甚至之后，PerlTk 将跟随变量）。

# c# - 子对象的 AddModelError？

> ID：13990213
> 
> 赞同：0
> 
> 时间：2012-12-21T12:28:14.087
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我的网站上有一个使用这些模型类的设置页面：

```
public class NameVm
{
    public string GivenName { get; set; }
    public string FamilyName { get; set; }
}

public class PasswordVm
{
    public string OldPassword { get; set; }
    public string NewPassword { get; set; }
    public string ConfirmPassword { get; set; }
}

public class AccountVm
{
    public NameVm Name { get; set; }
    public PasswordVm Password { get; set; }
} 
```

这是控制器：

```
public class AccountController : Controller
{
    [HttpGet]
    public override ActionResult Index()
    {
        var accountVm = AccountVmFromActiveUser();
        return View(accountVm);
    }

    [HttpPost]
    public ActionResult EditName(NameVm vm)
    {
        ...
    }

    [HttpPost]
    public ActionResult EditPassword(PasswordVm vm)
    {
        if (ModelState.IsValid)
        {
            if (!ValidateUser(this.ActiveUser, vm.OldPassword))
            {
                ModelState.AddModelError("????",
                    "Existing password is incorrect.");
            }
            else
                UpdateUserPassword(vm);
        }

        var accountVm = AccountVmFromActiveUser();
        accountVm.Password = vm;
        return View(accountVm);
    }
} 
```

在我的`Account.cshtml`文件中，我定义了两种形式——一种提交给`EditName`，一种提交给`EditPassword`。这是一个大文件，所以这里是一个小摘录：

```
@Html.EditorFor(model => model.Password.OldPassword)
@Html.ValidationFor(model => model.Password.OldPassword) 
```

我的问题是：如何`ValidationFor`显示我在方法中添加的错误消息`EditPassword`？我尝试使用 的键`"Password.OldPassword"`，但这不起作用。

或者，我在这里采取了错误的方法吗？我应该如何处理在同一页面上有两个表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:12:46.827

您可以使用局部视图。

1）`Account.cshtml`单独提交密码并将其放在部分视图`_EditPassword.cshml`中（通常我将部分视图放在`Views\Shared`文件夹中）

采用

```
@Html.Partial("_EditPassword", @Model.Password) 
```

渲染部分视图`Account.cshtml`

2）在局部视图中`_EditPassword.cshtml`，您可以使用

```
@Html.EditorFor(model => model.OldPassword)
@Html.ValidationFor(model => model.OldPassword) 
```

你应该会看到验证错误

# clojure - 请向我解释以下 Clojure 代码

> ID：13990214
> 
> 赞同：6
> 
> 时间：2012-12-21T12:28:19.453
> 
> 标签：clojure

我找到了以下代码（在解决[**Coin Changer Kata的**](http://craftsmanship.sv.cmu.edu/exercises/coin-change-kata)[**这篇博**](http://blog.8thlight.com/micah-martin/2012/11/17/transformation-priority-premise-applied.html)文中）：[](http://craftsmanship.sv.cmu.edu/exercises/coin-change-kata)

 **```
(defn change-for [amount]
  (let [denominations [25 10 5 1]
        amounts (reductions #(rem %1 %2) amount denominations)
        coins (map #(int (/ %1 %2)) amounts denominations)]
    (mapcat #(take %1 (repeat %2)) coins denominations))) 
```

**我觉得困难的部分是**：`(reductions #(rem %1 %2) amount denominations)`。

正如我发现的那样，[**reductions**](http://clojuredocs.org/clojure_core/clojure.core/reductions)只是根据给定的函数增量地计算结果集合。示例：`(reductions + [1 2 3])`给出`[1 3 6]`.

```
1         ; first  element
1 + 2     ; second element
1 + 2 + 3 ; third  element 
```

下一个计算余数的函数[**rem**](http://clojuredocs.org/clojure_core/clojure.core/rem)仍然非常容易理解。

为了理解其余的代码，我尝试了以下方法：

```
; first try, to see if this call works
; outside the original code (the change-for function)
(reductions #(rem %1 %2) 17 [10 5 1]) ; --> [17 7 2 0]

; tried to use the reductions which takes only one argument
; notice that 17 is now inside the array
(reductions #(rem %1 %2) [17 10 5 1]) ; --> [17 7 2 0]

; further simplified the expression
(reductions rem [17 10 5 1]) ; --> [17 7 2 0] 
```

[最后一步是删除此博客文章](http://blackstag.com/blog.posting?id=11)中描述的匿名函数。

在这里，事情变得令人困惑（至少对我而言）：`rem`需要 2 个参数，但我不明白它们在使用 array 时是如何应用的`[17 10 5 1]`。我尝试了以下调用：

```
(rem [17 10 5 1]) ; --> gives error
(rem [17 10 5 1] [17 10 5 1]) ; --> also gives error
(rem 17 10) ; --> works, but how do you use it with collections? 
```

**有人可以解释一下，这个`rem`函数是如何与函数一起工作的`reductions`吗？**

**我不太明白的另一件事是**：这些百分比参数是如何应用的（in `#(rem %1 %2)`）？我的意思是他们来自哪里？我尝试通过以下方式调用`rem`，但出现错误：`(#(rem %1 %2) 17 [10 5 1])`. 该`reductions`功能必须在幕后进行某些操作才能使这项工作正常进行，对吗？

一开始我以为那`#(rem %1 %2)`​​是一套。它们以与集合类似的方式声明，并且很容易被滥用（被刚开始使用 Clojure 的人）：

```
(type #{1 2 3})   ; --> clojure.lang.PersistentHashSet
(type #(1 2 3))   ; --> user$eval12687$fn__12688 
```

**有人可以将我指向一个站点/书籍/任何解释 Clojure 技巧**的东西，例如“匿名函数的特殊形式”吗？大多数资源只给出了最简单的结构（类似于所有其他 lisp 衍生产品的结构），而没有涉及 Clojure 的复杂性。我找到了一个看起来不错[**的网站（并且还解释了我上面提到的匿名函数）。**](http://blackstag.com/blog.posting?id=5#chapters)**还有其他这样的资源吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T12:41:23.923

这：

```
(reductions #(rem %1 %2) amount denominations) 
```

相当于：

```
(reductions rem amount denominations) 
```

正如你注意到的

```
(reductions function start collection) 
```

`collection`返回一个归约的中间结果序列`function`（`start`作为归约第一步的第一个参数）。`function`必须带两个参数。

所以结果：

```
(reductions function start [1 2 3 4 5]) 
```

是

```
((function start 1) (function (function start 1) 2) ...) 
```

该`#(rem %1 %2)`语法只是定义匿名函数的简写，该函数接受两个参数 (`%1`和`%2`)，调用`rem`它们并返回结果。

它相当于：

```
(fn [a b] (rem a b)) 
```**

# c++ - 奇怪的复制构造函数

> ID：13990215
> 
> 赞同：0
> 
> 时间：2012-12-21T12:28:30.037
> 
> 标签：c++, copy-constructor, copy-assignment

使用以下 C++ 程序：

```
#include <memory>
#include <iostream>

using namespace std;

struct my_class{
    int value;

    my_class(int id): value(id){
        cout<<"constructing "<<id<<endl;
        cout<<"address is "<<static_cast<const void *>(this)<<endl;
    }

    my_class(const my_class & a){
        cout<<"construct copying "<<a.value<<endl;
        cout<<static_cast<const void *>(this)<<"<-"<<static_cast<const void *>(&a)<<endl;
    }

    my_class operator=(const my_class & a){
        cout<<"assignment copying "<<a.value<<endl;
        this->value = a.value;
        cout<<static_cast<const void *>(this)<<"<-"<<static_cast<const void *>(&a)<<endl;
        return *this;
    }

    ~my_class(){
        cout<<"deleting "<<this->value<<endl;
        cout<<"address is "<<static_cast<const void *>(this)<<endl;
    }
};

my_class f(){
    cout<<"==in f=="<<endl;
    my_class temp(2);
    cout<<"==out f=="<<endl;
    return temp;
}

int main(){
    cout<<"==in main=="<<endl;
    my_class a(1);

    a = f();

    a.value++;
    cout<<"==out main=="<<endl;
    return 0;
} 
```

我得到以下结果：

```
====

==in main==

constructing 1

address is 0x28ff04

==in f==

constructing 2

address is 0x28ff0c

==out f==

assignment copying 2

0x28ff04<-0x28ff0c

construct copying 2

0x28ff08<-0x28ff04

deleting 2686868

address is 0x28ff08

deleting 2

address is 0x28ff0c

==out main==

deleting 3

address is 0x28ff04

=== 
```

谁能向我解释地址“0x28ff08”处的对象以及从地址“0x28ff04”处的对象构造的相关副本会发生什么？我真的不明白为什么在这里调用复制构造函数。

* * *

我不知道我是否正确，因此我想进一步详细解释它。谁发现我的错误请指出。

首先，一张图片说明了执行流程的细节： ![执行流程](../Images/16bcf9e5214a8b78a39b24e476878489.png)

(1)。创建一个`a`值为 1 的对象；

(2)。调用函数`f()`。创建一个对象`temp`，编译器发现该对象会被返回，所以直接在调用者的栈中创建；

(3)。通过调用;将`f()`(ie, )`temp`的返回对象赋值给 object`a``operator=()``a`

(4)。对象使用相同的变量名作为参数（右值）`a`传入。`operator=()``a`

(5)。该方法`operator=()`在`main::a`（左值，滥用符号）上调用，因此`this`在函数中指向`main::a`，[!!这是让我感到困惑的部分];

(6)。`operator=()`改变`main::a`to`a`的值（即从 1 到 2）；

(7)。编译器发现返回类型不是引用，并且`*this`已经存在于 中`main()`，所以只好`*this`调用拷贝构造函数进行拷贝。但是，复制构造函数不会初始化对象，因此会创建一个未初始化的对象。

(8)。[!!不太确定这部分]左值和结果对象是同一个对象，因此由于优化，没有真正返回对象。

(9)。复制的对象被销毁，根据@Mike Seymour 的说法，创建这个对象是因为编译器不能省略它，因为构造函数和析构函数实际上都做了一些事情（例如输出值和地址）。

(10)。退出时`operator=()`，对象`a`被销毁。

(11)。退出时`main()`，对象`main::a`最终被销毁。

以上解释了输出，但是，我目前的理解可能不正确。如果我错了，请帮助我理解这一点。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:34:30.980

这是因为您的赋值运算符返回对象的副本。这里：

```
 my_class operator=(const my_class & a) 
```

改用参考：

```
 my_class& operator=(const my_class & a) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:18:06.923

调用复制构造函数是因为您的赋值运算符返回`*this`. 正如其他人所指出的，赋值运算符应该返回一个引用而不是一个副本；既是为了避免不必要的复制，又是为了让操作者被链接起来。

也许您要问的问题是，为什么从赋值运算符返回值涉及副本，而从不返回`f()`？

`f()`正在返回本地对象的副本，从函数返回后不需要保留。这允许编译器执行*返回值优化*，其中要返回的变量存储在调用者可访问的某个地方，并且无需复制或移动即可成为返回值。

`operator=()`正在返回持久对象的副本。由于原始对象仍然存在，并且必须与返回值分开，因此此处需要复制。

或者您可能想问，为什么编译器不消除复制，因为复制的对象从未使用过？那是因为你给了构造函数和析构函数的副作用，编译器不允许消除这些副作用。

# c# - 泛型类型传递和使用，我可以做以下吗？

> ID：13990217
> 
> 赞同：7
> 
> 时间：2012-12-21T12:28:43.000
> 
> 标签：c#, generics, reflection, interface

我试图弄清楚如何访问`CallMe<T>()`class中的静态方法`DoSomething`。反射是这里唯一的解决方案吗？我不想实例化类型的对象`MyAction`。另外，如果通过反射进行，是否有一种方法可以通过方法内的反射创建方法`CallMe<T>()`一次，然后多次调用它以对同一个“反射”方法执行多个操作？或者有什么比通过反射更好的方法吗？我基本上想创建模板实现样式类，例如`MyAction`定义如何`byte[] DoThis(string text)`执行其职责的类。然后，`AskForSomething()`遗嘱指定正在使用哪个模板，并根据该模板进行`CallMe<T>()`工作。

```
 public class AskSomething
    {
        public void AskForSomething()
        {
            DoSomething doSomething = new DoSomething();
            doSomething.CallMe<MyAction>();
        }
    }

    public class DoSomething
    {
        public void CallMe<T>()
        {
            Type type = typeof(T);

            //Question: How can I access 'DoThis(string text)' here?
            //Most likely by reflection? 
        }
    }

    public class MyAction
    {
        public static byte[] DoThis(string text)
        {
            byte[] ret = new byte[0]; //mock just to denote something is done and out comes a byte array

            return ret;
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T12:30:45.413

用 定义一个接口`DoThis`，`MyAction`实现它，并将`T`类型参数约束为它的一个实例`where T : IMyInterface`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:35:57.373

如果您的`DoThis`方法需要是静态的，您还可以将`CallMe`方法更改为以下内容：

```
public void CallMe(Func<string, byte[]> action)
{
    byte[] result = action("input");
} 
```

现在您可以将函数的引用传递给`CallMe`方法，如下所示：

```
 doSomething.CallMe(MyAction.DoThis); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:11:29.137

基于“DoThis”不一定是静态的事实，您可以通过以下方式实现这一点：-

```
using System;

namespace ConsoleApplication3
{
class Program
{
    static void Main(string[] args)
    {
        DoSomething doSomething = new DoSomething();
        doSomething.CallMe<MyAction>();

    }
}
public class DoSomething
{
    public void CallMe<T>() where T : IMyAction
    {
       IMyAction action =  (IMyAction)Activator.CreateInstance(typeof(T));

       var result = action.DoThis("value");            
    }
}

public interface IMyAction
{
    byte[] DoThis(string text);
}

public class MyAction : IMyAction
{
    public byte[] DoThis(string text)
    {
        byte[] ret = new byte[0]; //mock just to denote something is done and out comes a byte array

        return ret;
    }
}
} 
```

不确定我会推荐这种方法，但它有效！（例如，如果没有默认构造函数，这将失败）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:07:38.083

```
 public class DoSomething
  {
    class Cache<T>
    {
      public readonly static Func<string, byte[]> action = (Func<string, byte[]>)Delegate.CreateDelegate(typeof(Func<string, byte[]>), typeof(T).GetMethod("DoThis"));
    }
    public void CallMe<T>()
    {
      Cache<T>.action("text");
    }
  } 
```

# php - 如何从 Facebook 获取 access_token

> ID：13990220
> 
> 赞同：0
> 
> 时间：2012-12-21T12:28:51.437
> 
> 标签：php, facebook

我正在尝试编写一个可以读取 Facebook 页面的公共事件的小型应用程序。所以我不需要特定的用户 access_token，这将是太多的工作。我写了一个小脚本，它应该得到 access_token，但它没有:(

```
<?php
$url= "https://graph.facebook.com/oauth/access_token?type=client_cred&    client_id=my_client_id&client_secret=my_client secret";
$access_token = file_get_contents($url);
$access_token = substr($access_token,strpos($access_token,"=")+1);
print access_token;

}
?> 
```

如果我在浏览器中打开 url，我会得到一个 access_token，但这不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:44:51.590

看一下这个：

[Facebook 图形 API](http://benbiddington.wordpress.com/2010/04/23/facebook-graph-api-getting-access-tokens/)

希望有帮助。

资源[在这里](https://developers.facebook.com/docs/reference/php/facebook-getAccessToken/)

[操作方法：在此处](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)使用应用令牌发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:37:38.120

Facebook 需要一个能够识别用户的浏览器。您无法使用 file_get_contents 来执行此操作。

您应该重定向 url 并在登录页面上获取 access_token。

我的博客上有一个关于如何做到这一点的小例子。看[这里](http://subirkumarsao.blogspot.dk/2011/11/facebook-as-oauth.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:06:09.207

您可以通过以下方式获取 app_access_token：

```
$app_access_token = file_get_contents('https://graph.facebook.com/oauth/access_token?type=client_cred&client_id='.$app_id.'&client_secret='.$secret); 
```

更多信息：[https ://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)

# php - 如何将包含 php 脚本的文件夹变成私有文件夹？

> ID：13990226
> 
> 赞同：0
> 
> 时间：2012-12-21T12:29:16.367
> 
> 标签：php, webserver, client, vps

不知道如何更好地表达标题。

我们有一个 iOS 游戏，它通过 PHP 与我们 VPS 上的 MySQL 数据库连接。现在我们对服务器端的事情知之甚少，所以我们一切正常，游戏发布了，人们可以更新他们的分数等等。

问题是我们能够让它全部工作的唯一方法是将我们的游戏目录放入我们的 public_html 目录。这意味着，如果有人在浏览器中键入 www.ourwebsitename/gamefoldername，他们将获得该文件夹的索引。如果您单击其中的一个文件夹，它实际上会返回一个包含我们数据库中所有数据的表，这显然是不安全的。

有没有办法使这个目录成为私有目录，如果是这样，当它尝试连接到服务器时，这将如何影响我们的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:43:10.747

有很多方法可以防止这种情况：

有些在下面。

1) 在这个和每个文件夹 www.ourwebsitename/gamefoldername 中放置一个 index.php，这个文件应该将提供这个 url 的用户重定向到主/登录页面。这很简单，但不是一个好方法。

2）使用。ht 访问文件[http://www.htaccess-guide.com/redirects/](http://www.htaccess-guide.com/redirects/)。请从这里获取详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:41:14.460

如果您的应用程序通过正常的 http 请求访问服务器，这意味着任何人都可以通过浏览器执行相同的操作。

您需要确保所有页面都位于登录系统之后，以便只有经过身份验证的用户有权执行他们也可以从应用程序本身执行的操作。

如果您对服务器端不太了解，这似乎是最简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:45:14.223

将文件夹设为私有需要您的应用提供身份验证才能访问这些页面。许多 Web 服务器为文件夹提供内置的隐私选项（使用`.htaccess`文件隐藏文件夹内容是一个开始）。您想为保护这些数据付出多少努力仅受时间和您作为开发人员的技能的限制。

如果您持有的数据没有*那么*有价值，那么没有什么能阻止您在为数据库提供服务的 PHP 文件顶部放置一个简单的条件`if( $_POST["auth"] != XXXXX )`（或者您可以使用），然后在您的应用程序上修改您的 HTTP 请求以提供`GET`提出请求时说的关键。

# jquery - 取消选择未知可选

> ID：13990227
> 
> 赞同：2
> 
> 时间：2012-12-21T12:29:17.943
> 
> 标签：jquery, css, jquery-ui, selectable

我有一张在逻辑上分为两半的桌子。如图所示，我将不得不选择一行的一半。 ![在此处输入图像描述](../Images/3c3cb6225f4a005e1828665abcdb0d91.png)

现在，如果我选择不同的“半”行，我需要取消选择前一个。我该怎么做？我的代码在这里：

```
<tr class="line1">
    <td width="10" class="td3523" onclick="selectme('3523');">
        <input type="radio" name="selattendance" id="tr3523" onClick="setEditDelete(3523)"/>
    </td>
    <td width="100" class="td3523" onclick="selectme('3523');">2012-11-19</td>
    <td width="125" class="td3523" onclick="selectme('3523');">
        <table width="100%" cellpadding="0" cellspacing="0" style="border: 0;padding: 0;border-collapse: collapse">
            <tr> 
                <td style="width: 50%;padding-right: 10px;border: 0" align="right" valign="middle">22:54</td>
                <td style="width: 20%;border: 0">     <a href="#" onclick="loadPic('attendanceimages/39286a0a6b45cae9f116b11882f36046.jpg','2012-11-19','2012-11-19','add','','In','22:54:04','22:54:04');"><img src="images/punchimg.png"></a>
                </td>
                <td style="width: 20%;border: 0">&nbsp;</td>
            </tr>
        </table>
    </td>
</tr> 
```

当我单击 any`td`时，所有`td`具有相同 ID 的 s 都会使用以下代码被选中：

```
function selectme(id) {
    $('.td' + id).toggleClass("ui-selected");
} 
```

我想我需要再写一行从以前选择`td`的 s 中删除这个类。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:33:19.003

给你的`<td>`-s 另一个类说`tdclss`，然后在你的函数中使用它来删除`ui-selected`类。

```
function selectme(id) {
  $('.tdclss').removeClass("ui-selected");
  $('.td' + id).toggleClass("ui-selected");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:37:25.967

一种方法：

```
$('input:radio').change(
    function(){
        // caching the jQuery $(this) object
        var that = $(this);
            that
                // moves up to the closest ancestor table element
                .closest('table')
                // finds the '.selected' elements within that table
                .find('.selected')
                // removes the 'selected' class from those elements.
                .removeClass('selected');
            that
                // moves to the parent td element
                .parent()
                // selects subsequent siblings *until* it finds
                // an element that matches the selector
                .nextUntil($('td:has("input:radio")'))
                // adds back the current td element to the collection
                .andSelf()
                // adds the 'selected' class
                .addClass('selected');
    });​ 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/f6Pe4/1/)。​</p>

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`andSelf()`](http://api.jquery.com/andSelf/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).
*   [`:has()`选择器](http://api.jquery.com/has-selector/)。
*   [`nextUntil()`](http://api.jquery.com/nextUntil/).
*   [`parents()`](http://api.jquery.com/parents/).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-21T12:35:05.500

使用具有相同 ID 的多个字段迟早会自找麻烦。您可以使用类属性对单元格进行分组，或者您可以（可能）使用 a`<span>`对它们进行分组（尽管我必须承认，我从未尝试过 a`<span>`内的 a `<tr>`）。

# spring-data-jpa - jpa:repositories 停止生成存储库代理

> ID：13990233
> 
> 赞同：2
> 
> 时间：2012-12-21T12:29:37.490
> 
> 标签：spring-data-jpa

这个问题已经发布在：

[http://forum.springsource.org/showthread.php?133389-spring-data-jpa-1-2-0-and-jpa-repositories](http://forum.springsource.org/showthread.php?133389-spring-data-jpa-1-2-0-and-jpa-repositories)

对于使用 Spring 3.1.3 和 Spring DM 1.2.1 的项目，当我将 Spring Data JPA 从版本 1.1.2 更新到 1.2.0（以及 Spring Data Commons Core 从 1.3.2 到 1.4.0）时，元素 jpa :repositories 停止为所选接口生成存储库代理。任何使用此类代理的尝试都会产生异常，例如：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.osgi.service.exporter.support.OsgiServiceFactoryBean#0': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Cannot locate bean named 'userDao' inside the running bean factory. 
```

有什么想法可以解决这个问题吗？

问候皮埃尔

PS：使用了 EclipseLink 2.4.1 和 Derby 10.9.1。

项目的上下文和清单以及异常的完整跟踪都可以在上面的链接中找到，以及 Eclipse 下最小测试项目的 zip 文件。

# knockout.js - 调试 KnockoutJs 可观察数组匹配的步骤

> ID：13990242
> 
> 赞同：0
> 
> 时间：2012-12-21T12:30:27.957
> 
> 标签：knockout.js

我完全被困住了。

给定一个静态可观察数组：

```
obj.allRoles = ko.observableArray([
    new Role(1, "Adminx"),
    new Role(2, "Temp2x"),
    new Role(3, "Temp3x")
    ]); 
```

绑定到一个选择

```
<select data-bind="options: allRoles, 
                optionsText: 'RoleName',
                optionsValue: 'RoleId',                    
                optionsCaption: 'Add a new role...', 
                value: selectedRole">
</select> 
```

以及通过点击绑定运行的函数：

```
function addRole() {

        alert('got id:' + obj.selectedRole());

        var selectedId = obj.selectedRole();
        var match = ko.utils.arrayFirst(obj.allRoles(), function (item) {
            return item.RoleId == selectedId;
        });

        alert('got :' + match.RoleName);
        return;
} 
```

一切都很好。第一个警报显示 obj.SelectedRole() 返回选择选项的值，第二个警报显示找到匹配项并显示 RoleName。到目前为止还可以。

如果我将静态可观察数组替换为从服务填充的数组，例如：

```
obj.allRoles = ko.observableArray([]); 
```

和

```
//data
    function loadAllRolesFromSvc() {
        var url = '/api/UserSvc/GetAllRoles';
        $.getJSON(url,
            function (data) {
                obj.allRoles.removeAll();

                var results = ko.observableArray();
                ko.mapping.fromJS(data, {}, results);

                for (var i = 0; i < results().length; i++) {                        
                    var role = new Role();
                    role.RoleId = results()[i].RoleId;
                    role.RoleName = results()[i].RoleName;
                    obj.allRoles.push(role);                        
                };
            }
        );
    }; 
```

然后我看到 select 填充 OK，但是当 addRole() 函数运行时，第一个警报显示 selectedRole 提供了一个值，但是通过 RoleId（在 addRole() 中）定位匹配 Role 对象的代码失败 - 匹配始终为空。

我怎样才能解决这个问题？欢迎大家指点。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:39:52.737

我猜想`RoleId`和类中的`RoleName`属性`Role`是不可观察的，但在`loadAllRolesFromSvc`函数中你将它们设置为可观察的。

该代码`ko.mapping.fromJS(data, {}, results);`将结果中的所有属性转换为 observableArrays 和 observables。真的，我不明白你为什么要将结果转换为可观察的。因此，要解决问题，您可以删除映射：

```
 function loadAllRolesFromSvc() {
        var url = '/api/UserSvc/GetAllRoles';
        $.getJSON(url,
            function (data) {
                obj.allRoles.removeAll();

                for (var i = 0; i < data.length; i++) {                        
                    var role = new Role();
                    role.RoleId = data[i].RoleId;
                    role.RoleName = data[i].RoleName;
                    obj.allRoles.push(role);                        
                };
            }
        );
    }; 
```

或者您可以打开包装`RoleId`并设置`RoleName`值：

```
function loadAllRolesFromSvc() {
    var url = '/api/UserSvc/GetAllRoles';
    $.getJSON(url,
        function (data) {
            obj.allRoles.removeAll();

            var results = ko.observableArray();
            ko.mapping.fromJS(data, {}, results);

            for (var i = 0; i < results().length; i++) {                        
                var role = new Role();
                role.RoleId = results()[i].RoleId();
                role.RoleName = results()[i].RoleName();
                obj.allRoles.push(role);                        
            };
        }
    );
}; 
```

# iphone - 开发目标为 5 的 iOS 6 应用程序可以在 iPhone 3GS 上运行吗？

> ID：13990243
> 
> 赞同：0
> 
> 时间：2012-12-21T12:30:30.967
> 
> 标签：iphone, ios5, ios6

我有一个使用 iOS 6 SDK 构建的 iPhone 应用程序和 iOS 5 的部署目标。我们可以在 iPhone 3GS 上运行这个应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:32:18.363

可以，只要您的 iPhone 3GS 运行 iOS 5 或 iOS 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:21:45.083

是的，你可以运行，但你的 iPhone 3GS 应该有 iOS5 或更高版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:24:03.740

是的，有一些 3gs 没有 IIRC 的功能，但它工作正常

# html - 手动渲染 Twig 字符串时禁用 HTML 转义

> ID：13990249
> 
> 赞同：12
> 
> 时间：2012-12-21T12:30:52.637
> 
> 标签：html, symfony, twig

我有以下代码将字符串呈现为 HTML 输出。如何阻止它转义 HTML 文本？

```
$template = '{{ who }} bar';
$params = array('who' => "Foo's");

$twig = new \Twig_Environment(new \Twig_Loader_String);
var_dump($twig->render($template, $params)); 
```

输出：

```
string(14) "Foo&#039;s bar" 
```

我怎样才能让它输出这个呢？

```
string(14) "Foo's bar" 
```

我知道更改`'{{ who }} bar'`为`'{{ who|raw }} bar'`将解决问题，但我想在渲染阶段解决这个问题。我不想更改所有模板。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-21T12:38:23.510

我挖掘了 Twig 代码，发现这很好用：

```
$twig = new \Twig_Environment(new \Twig_Loader_String, array(
    'autoescape' => false
)); 
```

# php - 使用公用表表达式查询

> ID：13990253
> 
> 赞同：0
> 
> 时间：2012-12-21T12:31:09.923
> 
> 标签：php, sql-server, odbc, common-table-expression

我有一个在 mssql 编辑器上运行良好的公用表表达式。但是，当我在 PHP 中使用相同的填充字符串变量并使用`odbc_exec($dbhandle,$query )`它时，不会返回任何行。没有错误被抛出。这是对 PHP 的限制吗？其他各种表上的其他选择查询运行良好。问题仅与 CTE 语句有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T09:57:38.230

我知道这是一个老问题，但它没有得到回答，而且它是一个高排名的谷歌结果，所以我想我会参与进来。

查询 MS SQL 服务器的原生 PHP 方法都不能支持公用表表达式（“WITH”子句）。其中包括 mssql_* 库和 odbc_* 库。

这是由于 MS SQL 处理 CTE 的方式（通过创建宏执行）。好消息是 Microsoft 的库 (sqlsrv_*) 本身就支持 CTE。

sqlsrv_* 库在创建和使用连接、简单查询、准备好的语句等方面的操作与 mssql_* 相同。它们几乎是在 MS SQL 服务器上使用 mssql_* 或 odbc_* 的“直接”替代品，并且速度明显更快启动。

[您可以从此链接](http://www.microsoft.com/en-au/download/details.aspx?id=20098)获取 sqlsrv 库。在撰写本文时，SQL 2008 可以使用 2.x，但 SQL 2012 需要 3.x。

# php - 删除重复的尾部斜杠

> ID：13990256
> 
> 赞同：3
> 
> 时间：2012-12-21T12:31:22.860
> 
> 标签：php, regex, string, url

我想检测`php`一个字符串是否`$string`包含重复的斜杠。

例如：

```
$string = "http://somepage.com/something/some.html/////"; 
```

到

```
$string = "http://somepage.com/something/some.html"; 
```

我想做一个`if`，如果它有重复，像：

```
If ($string = "http://somepage.com/something/some.html/////";) {
    remove extra trailing slashes
} 
//else do nothing... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T12:33:40.433

[`rtrim`](http://php.net/manual/en/function.rtrim.php)像这样申请

```
$string = rtrim($string, '/'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T12:40:06.157

您可以使用`rtrim()`：

```
$string = rtrim($string, '/'); 
```

如果您出于某种原因想首先检查它是否有斜杠，那么您可以检查最后一个字符，如下所示：

```
if ($string[ strlen($string)-1 ] === '/') {
    $string = rtrim($string, '/');
} 
```

将字符串穿过`rtrim()`并不昂贵，因此您实际上不必首先检查尾部斜杠。

使用正则表达式修剪尾部斜杠有点过头了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T12:34:08.330

```
$string = rtrim($string, '/'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T12:34:53.293

`rtrim`是最好的解决方案，但由于您标记`regex`了完整性：

```
$string = "http://somepage.com/something/some.html/////";
echo preg_replace('#/+$#','',$string);

>>> http://somepage.com/something/some.html 
```

* * *

```
#   - Is the delimiter character 
/+  - Matches one or more forward slash
$   - Matches the end of the string
#   - Delimiter 
Replace with 
''  - Nothing (empty string) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-21T12:47:56.530

有些地方`/`可以重复，例如，您可以通过所有这些链接访问您的问题：

*   [删除重复的尾部斜杠](https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes/)
*   [删除重复的尾部斜杠](https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes////)
*   [https://stackoverflow.com///questions///13990256///remove-duplicate-trailing-slashes////](https://stackoverflow.com///questions///13990256///remove-duplicate-trailing-slashes////)
*   [https://stackoverflow.com/questions//13990256/remove-duplicate-trailing-slashes//](https://stackoverflow.com/questions//13990256/remove-duplicate-trailing-slashes//)

唯一不同的双倍`/`是`http://`，所以让我们考虑一下。`rtrim`在我提供的大多数情况下，单独使用是行不通的，所以让我们使用正则表达式。

## 解决方案

```
$parts = explode('//', $full_url, 2);
$parts[1] = rtrim(preg_replace('@/+@', '/', $parts[1]), '/');
$full_url = implode('//', $parts);
unset($parts); 
```

现场测试：http: [//ideone.com/1qHR9o](http://ideone.com/1qHR9o)

```
Before: https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes/
After:  https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes
---------------------
Before: https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes////
After:  https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes
---------------------
Before: https://stackoverflow.com///questions///13990256///remove-duplicate-trailing-slashes////
After:  https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes
---------------------
Before: https://stackoverflow.com/questions//13990256/remove-duplicate-trailing-slashes//
After:  https://stackoverflow.com/questions/13990256/remove-duplicate-trailing-slashes
--------------------- 
```

## 解释

根据您的问题，我了解到您始终会获得完整的 URL，因此，我们可以将其分为两部分：

```
$parts = explode('//', $full_url, 2); 
```

现在我们删除重复`/`的：

```
preg_replace('@/+@', '/', $parts[1]) 
```

`/`然后我们从字符串末尾删除多余的部分：

```
$parts[1] = rtrim( /*previous line*/ , '/'); 
```

并将其内爆：

```
$full_url = implode('//', $parts);
unset($parts); 
```

# c# - 将数组参数从 C# 传递到表的 Oracle 集合类型

> ID：13990262
> 
> 赞同：2
> 
> 时间：2012-12-21T12:31:47.147
> 
> 标签：c#, asp.net, plsql, wcf-data-services, plsqldeveloper

我在 PLSQL 规范中声明了一个集合表和记录。

> ```
>  type loan_recov_rec is  record(v_prncpl_ed_cd number(3),v_prncpl_recov number   (7),v_int_ed_cd number(3),
>      v_int_recov,number(5));
> 
>   type loan_recov_tbl is table of loan_recov_rec index by binary_integer; 
> ```
> 
> 程序 pr_final_settlement（loan_recov_tbl 中的 v_loan_recov_tbl）；

所以，我从 C# 页面传递 Array 参数

```
 cmd.ArrayBindCount = v_loan_recov_tbl.Length;
                Oracle.DataAccess.Client.OracleParameter P_loan_recov = new Oracle.DataAccess.Client.OracleParameter("v_loan_recov_tbl", Oracle.DataAccess.Client.OracleDbType.Int32);
P_loan_recov.Direction = ParameterDirection.Input;

P_loan_recov.CollectionType = Oracle.DataAccess.Client.OracleCollectionType.PLSQLAssociativeArray;
P_loan_recov.Value = v_loan_recov_tbl;
cmd.Parameters.Add(P_loan_recov); 
```

使用上面的代码它不起作用它得到错误`Unable to cast object of type 'System.Int32' to type 'System.Array'. v_loan_recov_tbl is an Array Parameter.` 听，我正在使用数据类型`OracleDbType.Int32`是正确的，或者我必须删除其他数据类型。我在过程中将输入参数声明为表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:37:02.363

我看到两个问题。首先，您使用的是 PL/SQL 定义的记录类型，而不是 SQL 定义的对象类型。ODAC 需要 SQL 定义的对象类型。其次，假设您已经定义了所有正确的 SQL 定义的对象类型和 C# 自定义类型，那么在您的机器上的 ODP.NET 软件堆栈中有一个很好的 c# 代码示例来处理数组绑定：%ODAC_HOME%\odp.net\样本\4\AssocArray。

# c++-cli - 使用 pin_ptr 时访问冲突？

> ID：13990264
> 
> 赞同：3
> 
> 时间：2012-12-21T12:31:48.080
> 
> 标签：c++-cli, access-violation, pin-ptr

当我使用 pin_ptr 在本机 c 代码中传递数组时，我遇到访问冲突。代码如下：

```
array<float>^ LogLikelihoodScore(array<array<unsigned char>^>^ modelsBuffer , array<float>^ featuresArray, int numberOfFrames)
{
    int i, j, modelsNum = modelsBuffer->Length, len;
    float **models = (float**) malloc(modelsNum * sizeof(void*));
    for(i = 0; i < modelsNum; i++)
    {
        pin_ptr<unsigned char> ptr = &modelsBuffer[i][0];
        models[i] = (float*) ptr;
    }
    array<float>^ scores = gcnew array<float>(modelsNum);
    pin_ptr<float> scoresPtr = &scores[0];
    pin_ptr<float> featuresPtr = &featuresArray[0];
    char* message = CalculateLikelihoodUsingBufferedModels(models, modelsNum, featuresPtr, numberOfFrames, scoresPtr);
    return scores;
} 
```

当我更改此代码以分配新空间并将原始数组复制到该代码时，我没有遇到访问冲突。新代码：

```
array<float>^ LogLikelihoodScore(array<array<unsigned char>^>^ modelsBuffer , array<float>^ featuresArray, int numberOfFrames)
{
    int i, j, modelsNum = modelsBuffer->Length, len;
    float **models = (float**) malloc(modelsNum * sizeof(void*));
    for(i = 0; i < modelsNum; i++)
    {
        len = modelsBuffer[i]->Length;
        char* ptr = (char*) malloc(len);
        pin_ptr<unsigned char> ptr2 = &modelsBuffer[i][0];
        memcpy(ptr, ptr2, len);
        models[i] = (float*) ptr;
    }
    array<float>^ scores = gcnew array<float>(modelsNum);
    pin_ptr<float> scoresPtr = &scores[0];
    pin_ptr<float> featuresPtr = &featuresArray[0];
    char* message = CalculateLikelihoodUsingBufferedModels(models, modelsNum, featuresPtr, numberOfFrames, scoresPtr);
    return scores;
} 
```

问题：我使用 from pin_ptr 有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:47:38.003

> 当固定指针超出范围时，该对象不再被视为固定，除非有其他固定指针指向或进入该对象。您不必显式取消固定指针。

正如[文档](http://msdn.microsoft.com/en-us/library/1dz8byfh.aspx)所说，`pin_ptr`仅在目标*位于范围内时将其固定*。这意味着在以下循环的每次迭代之后，对象都会被取消固定，从而使存储的指针变得无用。

```
for(i = 0; i < modelsNum; i++)
{
    pin_ptr<unsigned char> ptr = &modelsBuffer[i][0];
    models[i] = (float*) ptr;
} 
```

# objective-c - 来自不同类的 NSMutableArray 得到 Null

> ID：13990265
> 
> 赞同：0
> 
> 时间：2012-12-21T12:31:48.737
> 
> 标签：objective-c, ios, cocoa, null, nsmutablearray

我有这门课：

```
@interface PersonModel : NSObject

@property (nonatomic, weak) NSString *string;
@property (nonatomic, weak) NSMutableArray *array;

@end 
```

在另一个类中，我使用该字符串和数组。字符串正常，但数组为空。我像往常一样启动它，如下所示：

```
person.array = [[NSMutableArray alloc] init];
[person.array addObject:[object copy]];
NSLog(@"Array: %@", person.array); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T12:37:49.243

如果其他东西对同一属性有强引用，则弱属性引用很有用。在您的情况下，情况似乎并非如此。把你`Array`变成一个`strong`财产。

（为了便于阅读，不要以大写字母开头命名变量；`array`略好于`Array`。有意义的东西会更好。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:43:45.883

这段代码看起来没问题。通过使 NSMutableArray 成为强属性而不是弱属性，我能够使其工作。我仍在测试以找出为什么代码中的这种更改会产生影响。

编辑：我还注意到，如果您首先将新的 NSMutableArray 实例设置为变量，则它适用于弱属性类型：

```
PersonModel *personModel = [[PersonModel alloc] init];
NSMutableArray *tempMutableArray = [[NSMutableArray alloc] init];
[personModel setArray:tempMutableArray];
[personModel.array addObject:[someString copy]];
NSLog(@"Array: %@", personModel.array); 
```

编辑 2：这是有效的，因为您的弱参考至少需要一个强参考（请参阅 Phillip Mills 的回复）。很高兴知道为什么将 NSMutableArray 的新实例设置为临时变量有效。

# c - 宏中的字符串数组

> ID：13990267
> 
> 赞同：1
> 
> 时间：2012-12-21T12:32:05.653
> 
> 标签：c, macros, c-strings

我想在宏中获取一个字符串数组。首先：这可能吗？

如果是的话，我可以在使用它们时根据索引一一调用它们吗？

像这样的东西：

```
#define VAR    "abc", "def", "xyz" 
```

然后当我想在某处使用“def”时，

```
FUNC(VAR[1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:05:13.010

可能是我的代码对你有帮助：

```
#include<stdio.h>
#include<stdlib.h>
#define STRING_ARRAY  "ONE", "TWO", "THREE", "NULL"

int main(){

    char* STRING[] = {STRING_ARRAY};

    int i=0;
    scanf("%d",&i);
    printf("%s\n",STRING[i]);
    return EXIT_SUCCESS;
} 
```

这也有效：

```
:~$ gcc x.c  -o  x
:~$ ./x
1
TWO
e:~$ ./x
2
THREE 
```

您必须在重新编译时更改 MACRO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:45:04.353

```
#define VAR(...) const char *FOO[] = { __VA_ARGS__ }
...
VAR("abc", "xyz");
printf("%s\n", FOO[0]); 
```

但请注意：

1.  宏是邪恶的。
2.  在宏中声明一个变量是有史以来最糟糕的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:07:08.857

从 C99 开始，您可以使用复合文字

```
#define VAR ((char const*[]){ "abc", "def", "xyz" }) 
```

然后使用它`VAR[2]`左右。

复合文字类似于初始化器的强制转换，这里这是一个基类型的数组`char const*`。这`const`很重要，这样您就不会无意中尝试修改字符串文字。

任何现代编译器都应该能够将该数组和字符串文字的所有不同出现折叠到一个实例中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:40:21.090

宏将扩展到右侧的文本，因此请尝试自己回答您的问题。

这是一种尝试理解宏的方法：

```
FUNC(VAR[1]); <=> FUNC("abc", "def", "xyz"[1]); 
```

右边的会做你期望的吗？不？所以你不能像这样使用它。但是，您可以将其用于静态数组初始化，然后通过索引访问数组。

编辑：这是我建议您使用 MACRO 的方式：

```
char* a[] = {VAR};
FUNC(a[0]); 
```

# javascript - 使用正则表达式验证文件

> ID：13990273
> 
> 赞同：0
> 
> 时间：2012-12-21T12:33:01.297
> 
> 标签：javascript, jquery, regex

我正在尝试在使用 javascript/jquery 上传图像文件之前对其进行验证。

这是我到目前为止所拥有的：

```
$('#cropimages').click(function(){
    i = 1 ;
    var valid = new RegExp('/^.*\.(jpg|jpeg|png|gif)$/') ;
    $('input').each(function(){

        if($(this).attr('name') == 'file'+i)
        {
            val = $(this).val() ;

            r = valid.exec(val) ;
            alert(r) ;
            i++ ;
        }
    })
    //$('#topperform').submit()
}) 
```

`null`但无论我选择哪种文件，它都会不断出现。

我需要做什么才能完成`RegExp`这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T12:34:53.540

使用正则表达式文字：

```
var valid = /^.*\.(jpg|jpeg|png|gif)$/; 
```

如果您*真的*想使用 RegExp 构造函数，请省略分隔符。

```
var valid = new RegExp('^.*\.(jpg|jpeg|png|gif)$'); 
```

**有关的**

*   [正则表达式 - Javascript (MDN)](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

# visual-studio - 防止 ReSharper 在文档注释中干扰 ViEmu 的 Enter 处理？

> ID：13990290
> 
> 赞同：1
> 
> 时间：2012-12-21T12:34:19.500
> 
> 标签：visual-studio, resharper, viemu

我正在使用带有 ViEmu 2.5 的 Visual Studio 2010，最近添加了 ReSharper 7.1，这导致了一个问题：当我处于正常模式并按 Enter 时，它现在在评论中创建一个新行（而在 vi 正常模式下，Enter应该只是*移动*到下一行的第一个非空白，而不是插入一个）。这让我有点发疯。

*（更新：哦，如果我在文档注释中并键入`:`以开始键入 ex 命令，它也会干扰；我可以键入命令但我不能按 Enter 来执行它！）*

肯定是 ReSharper 导致了这种情况发生（直接，或者通过某种方式使击键绕过 ViEmu 并转到 VS 的默认处理），因为它仅在我安装 ReSharper 时才开始，暂停 ReSharper 使其停止，恢复 ReSharper 使其重新启动.

有趣的是，这不会发生*在*文档注释之外。在 vi 正常模式下输入外部文档注释正常工作。

我已经在这里解决了设置和几个问题（比如[这个](https://stackoverflow.com/questions/87381/resharper-and-viemu-keybindings-and-visual-assist)），但还没有找到将这些击键返回到 ViEmu 的方法。我已经告诉 ReSharper 根本不要设置它的任何键盘快捷键（**ReSharper Keyboard Scheme: None**），并且在它的选项中我已经关闭了我能找到的所有 XML Doc Comments 东西（甚至是我实际上要去的东西想要，比如自动换行）。但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:11:15.687

答案是升级到 ViEmu 3，除了其他几个新功能外，它还提供了与 ReSharper 更好的互操作性。无需更改设置，只需卸载 2.5 并安装 3.0 即可。（然后我做了一个明显的实验来排除安装顺序：我卸载了 3.0 并重新安装了 2.5。这使得问题再次出现。）

# iphone - 核心数据删除对象：不工作？

> ID：13990294
> 
> 赞同：5
> 
> 时间：2012-12-21T12:34:32.723
> 
> 标签：iphone, ios, core-data

我正在使用以下代码：

```
+(void)deleteObject:(NSManagedObjectID*)oId {
NSError *error;
DFAppDelegate *temp = [DFAppDelegate new];
NSManagedObjectContext *context = [temp managedObjectContext];
NSManagedObject *obj = [context existingObjectWithID:oId error:&error];
[context deleteObject:obj];
} 
```

但它似乎没有相应地工作。当我在 iOS 模拟器上重新启动我的应用程序时，我可以在列表中再次看到该对象。我尝试使用给定的对象 ID 打印对象，它返回了正确的对象，但该对象仍然没有从我的核心数据模型中永久删除。我的实体没有一个与另一个实体有关系。

谁能解释我出了什么问题？

谢谢。

编辑：我检查了错误，但没有显示错误。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-21T12:38:48.383

`NSManagedObjectContext`在保存之前，您对 a 所做的任何更改都是暂时的。尝试将其添加到方法的末尾：

```
if (![context save:&error]) {
     NSLog(@"Couldn't save: %@", error);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T12:41:05.997

`NSManagedObjectContext`提供了一个便签本：你可以对你的对象做任何你喜欢的事情，但最后需要保存它。如果您使用的是默认的 Core Data 项目，请在您的`AppDelegate`:

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
             // Replace this implementation with code to handle the error appropriately.
             // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
} 
```

# java - 压缩图像，使用 imageScalr

> ID：13990298
> 
> 赞同：0
> 
> 时间：2012-12-21T12:34:37.120
> 
> 标签：java, image, compression, image-scaling, imgscalr

我正在使用 imagescalr 来调整图像大小，但我也想压缩图像以使大小保持在 32kb 以下（因为 8 支持高达 32kb 的 base64 字符串）。我正在像这样调整图像的大小

```
Map resizeImage(BufferedImage imageData, int width, int height, String imageFormat){

    BufferedImage thumbnail =  Scalr.resize(imageData, Scalr.Method.SPEED, Scalr.Mode.FIT_EXACT ,
    width, height, Scalr.OP_ANTIALIAS);

    ByteArrayOutputStream baos = new ByteArrayOutputStream()
    ImageIO.write(thumbnail, imageFormat, baos)
    baos.flush()
    byte[] imageBytes = baos.toByteArray()
    baos.close()

    return [imageBytes:imageBytes, imageFormat:imageFormat]
} 
```

我想要一种方法，以便我可以以最少的代码更改进行压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:42:02.347

你可以试试

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
OutputStream gzip = new GZIPOutputStream(baos);
ImageIO.write(thumbnail, imageFormat, baos)
gzip.close();
byte[] zippedImageBytes = baos.toByteArray(); 
```

解压

```
InputStream in = new GZIPInputStream(new ByteArrayInputStream(zippedImageBytes));
.... 
```

# jquery - jQuery范围滑块 - 奇怪的行为（错误的值）

> ID：13990304
> 
> 赞同：0
> 
> 时间：2012-12-21T12:34:49.383
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我正在尝试使用 uiSlider 来定义小时范围。 [http://marcneuwirth.com/wp-content/uploads/2010/06/timeslider3.html](http://marcneuwirth.com/wp-content/uploads/2010/06/timeslider3.html)

滑块手柄的行为很奇怪 - 当移动右滑块时，它会正确更改值（或不完全），但是当离开并移动左手柄时 - 右手柄的值会发生变化。同样的事情发生在另一个方向。左右移动一个手柄也会显示值的奇怪变化。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:12:45.837

我用你的 jsfiddle 玩了一下，并修改了你的 slideTime 函数

[http://jsfiddle.net/a5hRe/6/](http://jsfiddle.net/a5hRe/6/)

```
val0 = ui != undefined ? ui.values[0] : 480,
val1 = ui != undefined ? ui.values[1] : 1080 
```

您可能想要重构此代码，但现在看起来它工作正常。

# .htaccess - 如何使 .htaccess 将所有链接重定向到 .html 后缀

> ID：13990307
> 
> 赞同：0
> 
> 时间：2012-12-21T12:34:53.610
> 
> 标签：.htaccess

```
http://advokat-malov.ru/index.php
http://advokat-malov.ru/ 
http://advokat-malov.ru/index.html 
```

如何使 htaccess 将 .php 或 seo 链接（不带扩展名）重定向到 .html

如何使用 rewriteCond 和 rewriteRule 或 redirectmatch

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:44:31.313

这将起作用

```
# This will change all .php to .html
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)\.html$ $1.php [L]

# This will add .html to all urls that are not in the white list
# White list extensions php, html, css, js, less, jpg, png, gif
RewriteEngine On
RewriteCond %{REQUEST_URI} !\.(php|html|css|js|less|jpg|png|gif)$
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(.*)$ $1.html 
```

# internet-explorer - CSS3 PIE 在 IE7 和 IE8 中不起作用

> ID：13990309
> 
> 赞同：1
> 
> 时间：2012-12-21T12:35:03.053
> 
> 标签：internet-explorer, css, behavior, pie-chart

我一直在做一些测试，但我还没有让它工作。

在我从这个页面[http://css3pie.com/documentation/getting-started/](http://css3pie.com/documentation/getting-started/)获取示例代码后，但无法获得圆润的外观

CSS是这个

```
#prueba {
    border: 1px solid #999;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    behavior: url(PIE.htc);
} 
```

行为属性已尝试将两个相对路径作为[http://www.midomain.com/PIE.htc类型的绝对路径](http://www.midomain.com/PIE.htc)

你知道为什么它不起作用吗

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:40:06.930

可能是个`.htaccess`问题，您需要为 .htc 文件定义内容类型：

```
AddType text/x-component .htc 
```

这样，内容类型作为标头发送到 IE。没有它，IE 只会忽略 .htc 文件

查看[已知问题](http://css3pie.com/documentation/known-issues/#content-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:19:37.067

以我的经验，PIE.htc 可能很难实现；但是一旦你解决了一些问题并习惯了它的行为，它就会变得非常有用。我的许多大客户仍在使用 IE7 或 IE8。

首先，PIE.htc 不喜欢简写 CSS。以下是我将如何声明您的属性。

```
#prueba {
    border: 1px solid #999;
    -webkit-border-radius: 10px 10px 10px 10px;
    -moz-border-radius: 10px 10px 10px 10px;
    border-radius: 10px 10px 10px 10px;
} 
```

其次，您需要在应用它的页面部分中声明该行为；像这样：

```
<style type="text/css">
    #prueba {
       behavior: url("PIE.htc");
       } 
</style>
</head> 
```

这应该适合你。有几件事要记住...

1.  PIE.htc 需要位于您网站的根目录中，如果您必须在文件夹中访问它，您将遇到问题。
2.  如果选择器具有父属性，有时调用该行为将不起作用。例如，如果`#prueba`位于另一个`<div>`类似的范围内`#content`，您将使用：

    #content #prueba { 行为：url("PIE.htc"); }

    1.  我总是在结束标记之前调用我的 PIE.htc `</head>`。不一定是这样，但我发现它总是这样工作。

希望这会有所帮助。大多数这些问题都可以在[css3pie](http://css3pie.com/)的文档中找到。

# plone - 如何知道 ZEO 是否正在包装？

> ID：13990313
> 
> 赞同：2
> 
> 时间：2012-12-21T12:35:20.723
> 
> 标签：plone

如果ZEO当前正在打包Data.fs并且运行成功（到目前为止），有哪些指标需要观察？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T16:05:47.520

var/filestorage 中存在 Data.fs.pack 文件表示打包。如果它的大小不是静态的，则操作将继续。打包完成后，这个文件将成为主Data.fs文件，旧文件将成为Data.fs.old。

您还可以检查 zeoserver.log 文件（通常位于 var/zeoserver/zeoserver.log），您会在其中找到如下通知：

```
2012-12-23T13:50:03 (127.0.0.1:39920) pack(time=1356213003.545583) started...
2012-12-23T13:50:34 (127.0.0.1:39920) pack(time=1356213003.545583) complete 
```

# objective-c - 调整键盘大小时的 UIWebView 问题

> ID：13990314
> 
> 赞同：0
> 
> 时间：2012-12-21T12:35:28.283
> 
> 标签：objective-c, ios, uiwebview

我们正在构建一个 iPhone 应用程序，它基本上是我们网站移动版本的包装器。在聊天页面中选择 textarea 后，应调整 webview 的大小以适应键盘上方的区域。

但是，当在keyboardwillshow 中更改uiwebview 的框架时，文本区域的焦点会被取消。当键盘显示时再次点击 textarea 时，它会获得焦点。

我也尝试过更改边界而不是框架。当时 textarea 确实获得了焦点，但不知何故它锚定在原始边界的底部而不是顶部。有没有人有这个问题的经验？

编辑：我现在通过更改keyboardDidShow 而不是keyboardWillShow 上的webview 大小来解决第一个问题。但是，似乎该站点在调整大小时没有正确更新，并且该站点的标题没有出现在视图中。我将下面的代码编辑为当前的状态。

```
- (void)updateBounds {
    CGRect appFrame = [UIScreen mainScreen].applicationFrame, newFrame;

    if (!kbFrame.size.width) {
        // no keyboard
        newFrame = appFrame;

    } else if (kbFrame.size.width == appFrame.size.width) {
        // horizontal keyboard (relative to straight oriented device)
        newFrame = CGRectMake(0, 0, appFrame.size.width, appFrame.size.height - kbFrame.size.height);
    }
    else {
        newFrame = CGRectMake(0, 0, appFrame.size.width - kbFrame.size.width, appFrame.size.height);
    }

    webview.frame = newFrame;

}

- (void)keyboardDidShow:(NSNotification *)note {
    NSLog(@"keyboardShow");

    [[note.userInfo valueForKey:UIKeyboardFrameEndUserInfoKey] getValue: &kbFrame];

    [self updateBounds];
}

- (void)keyboardWillHide:(NSNotification *)note {
    NSLog(@"keyboardHide");

    kbFrame.size.width = 0;
    [self updateBounds];

    webview.frame = [UIScreen mainScreen].applicationFrame;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:25:44.513

最终，我们最终为网站添加了一些逻辑，而只保留了 UIWebView。我们试图实现的目标现在是使用 javascript 在网页上移动一些元素。这是次优的，但它可以在不破坏一切的情况下完成工作。

# c++ - 生成python绑定，使用什么方法/程序

> ID：13990317
> 
> 赞同：18
> 
> 时间：2012-12-21T12:35:39.827
> 
> 标签：c++, python, python-bindings

我正在考虑在我的程序中使用 python (CPython) 来允许在我的环境中编写用户脚本，并允许我使用 pyside，c++ 的 qt 绑定来为我的应用程序创建 GUI。这些可以有效地与 GUI python 代码稍后可以编译掉以提高速度（如果可能的话）的想法分开。

我对 python 非常陌生，我真的在寻找最有效的方法来生成可靠的绑定，并且需要维护的附加代码绝对最少，因为绑定可能会随着项目的发展而经常变化。我需要它以便 python 类扩展具有虚拟的 c++ 类。

我已经研究过 PyBindGen，它经常卡在我的库中的东西上，以至于它实际上没有用。

您在这方面推荐的任何帮助/建议/链接/工作流程都会非常有帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-05T07:54:01.507

我知道只有两个项目有 C++ 的自动绑定生成器。第一个是 SWIG。正如其他一些答案已经说过的那样，它有点过时，但它确实有效。第二个是 Boost.Python - 它本身不会自动生成绑定，但您可以使用[Boost.Pyste](http://www.boost.org/doc/libs/1_54_0/libs/python/pyste/doc/introduction.html)为您完成。它需要 GCC-XML 来解析您的原始源代码并编写 Boost.Python 绑定。这两个选项都支持可以从 Python 重载的 C++ 中的虚拟方法。

也就是说，我必须补充一点，通常，当您绑定时，您不会盲目地将 C++ 中的所有内容绑定到 Python 中——如果您这样做，您不会从 Python 方面获得非常 Python 的感觉。相反，您以最 Pythonic 的方式设计您希望如何在 Python 中使用您的库，然后您回过头来看看如何使用可能的绑定库之一将其修补到您的 C++ 代码中。例如`std::vector`，您希望您的库调用处理 Python 列表或可迭代对象，而不是处理 's。如果您的 C++ 库收到一个`std::map`，您希望使用 Python 字典来处理它。如果它是一个数组，也许 a`numpy.ndarray`会更方便。等等...

也就是说，您仍然可以设计绑定，以便最大限度地减少维护。

以下是其他 Python/C++ 包装的列表，以防您决定进一步查看：

1.  [SWIG](http://www.swig.org/) - 如您所知
2.  [Boost.Python](http://www.boost.org/doc/libs/release/libs/python/) - 这是我们通常在这里使用的 - 结构很好
3.  [Cython](http://cython.org) - 非常接近 Python 的简洁语法 - 他们声称比 Boost.Python 快得多
4.  [SIP](http://www.riverbankcomputing.com/software/sip/intro) - 不是很传播，但它就在那里
5.  [pybind11](https://github.com/wjakob/pybind11) - 类似于 Boost.Python 的语法，得益于 C++11 的紧凑实现。

这些现在处于非活动状态：

1.  [PyBindGen](https://code.google.com/p/pybindgen/) - 声称是最快的，但自 2017 年 5 月 21 日起**处于非活动状态**，2014 年的上一个版本 - 目前在 github 上维护（[https://github.com/gjcarneiro/pybindgen/releases](https://github.com/gjcarneiro/pybindgen/releases)）
2.  [ECS:Python](http://sourceforge.net/projects/ecspython/) -自 2014 年 12 月 6 日 (v2.8) 起**处于非活动状态**，已移至 github ( [https://github.com/MarcusTomlinson/ECS-Python](https://github.com/MarcusTomlinson/ECS-Python) )
3.  [PyCXX](http://cxx.sourceforge.net) - 使编写 Python 扩展更容易的 C++ 工具 -*不活动？*最后一个版本是 2017 年 4 月 23 日的 v7.0.2
4.  [CLIF](https://github.com/google/clif) - CLIF 为为各种语言创建 C++ 包装器生成器提供了一个通用基础 -*不活动？*回购活动不多（只有 14 次提交）

为了完整起见，也可以将编译后的 C 代码直接加载到 Python 中，而无需创建正式的绑定。您可以将[FFI](http://en.wikipedia.org/wiki/Foreign_function_interface) 与以下两个 Python 模块中的任何一个一起使用：

1.  [ctypes](https://docs.python.org/2/library/ctypes.html) - 这是 Python 原生的，不需要安装外部模块。
2.  [cffi](https://pypi.python.org/pypi/cffi) - 这是一个新包，灵感来自 Lua JIT 上的等效设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T04:19:15.123

如果您正在寻找速度，我也肯定会投票给 Cython。据我所知，C++ 与 Python 的其他接口方式，与其他绑定工具相比，Cython 的维护/更新并没有那么繁重，就“工作流的流畅性”增益而言。（Cythonized 代码认为它和纯 C 一样快，或者离那不远，这也使它非常有趣）。

无论如何，有几个很好的 API 用于将 python 代码与 C++ 连接（Boost.Python，...），但我认为所有这些都将导致需要直接在 C++ 源代码中公开方法（你们告诉我，如果我'错了，或不精确）。

另一方面，Cython 将使您可以将您的 C++ API（GUI 或其他...）与暴露源（所谓的 .pyx 扩展名）严格分开。最终的工作流程是：

C++ API => 编译为共享对象 => Cython 扩展（导入和公开 C++ 功能）=> 扩展编译 => 使用扩展（要添加到 python 路径的扩展）。

好消息是，您只需要维护与不断发展的 C++ 特性相关的 .pyx 文件池中的变化部分（其中包括需要公开的特性）。一开始这是一种投资，但根据我的经验，一旦设置了这个工作流程，让整个东西变得复杂起来就很简单了。

现在关于您需要扩展具有虚拟的类并从 Python 覆盖它们（如果我理解正确的话）。这是可行的。再一次，不是那么直接，但你应该看看这个[线程](https://stackoverflow.com/questions/10126668/can-i-override-a-c-virtual-function-within-python-with-cython/12700121#12700121)。

坏消息：在这种特殊情况下，您必须创建一些额外的 C++ 适配器/接口，以便在扩展的 python 没有覆盖给定父方法的情况下启用父方法的调用。（请注意，从 python 重新定义 C++ 公开的方法，无论是否是虚拟的，都是对函数的替换，但绝对不等同于覆盖）。

Hummf，现在我正在回读自己，看起来有点混乱。希望这仍然有帮助。

如果您选择 Cython 选项，我可以更具体地说明您必须处理的工作流程，如果您要求我这样做，但我认为上面链接的线程是一个很好的起点......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-04T04:04:31.253

对于现代 C++，请使用 CLIF ( [https://github.com/google/clif](https://github.com/google/clif) )。它不会发现你的 API，你需要用 Python 术语来描述它。

CLIF 将使用最新的 LLVM/Clang 编译器重新编译您的头文件，并为 Python 扩展模块生成 C++ 源代码。

它可以理解复杂的数据结构：`def f() -> dict<str, set<int>>`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-06T18:30:34.723

对于现代 C++，使用 cppyy：[http ://cppyy.readthedocs.io/en/latest/](http://cppyy.readthedocs.io/en/latest/)

它基于 Cling，Clang/LLVM 的 C++ 解释器。绑定是在运行时进行的，不需要额外的中间语言。感谢 Clang，它支持 C++17。

具体到使用 Qt 的原始问题：最近的几个更新明确地支持所有 KDE 的绑定生成。

为了速度：PyPy 原生支持 cppyy。

注意：我是cppyy的主要作者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T12:40:53.267

AFAICT，C++ 没有那么多选择。较早的项目之一是[SWIG](http://www.swig.org/)；据报道它有点神秘和笨重，但由于它已经存在了很长时间，它也应该涵盖很多其他项目没有处理的东西。您可能还想看看[Cython](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-05T08:10:48.427

SWIG 是一个很棒的工具，可以做你想做的事

[http://sourceforge.net/projects/swig/](http://sourceforge.net/projects/swig/)

# workflow - 在 Dynamics CRM 2011 中禁用工作流激活功能

> ID：13990321
> 
> 赞同：2
> 
> 时间：2012-12-21T12:35:56.117
> 
> 标签：workflow, dynamics-crm-2011

在 Dynamics CRM 2011 中，我想为某些用户禁用工作流激活。这些用户仍然可以创建、更新和停用工作流，但只有特定用户“工作流发布者”才能激活工作流。我怎样才能做到这一点？当用户尝试激活工作流时，我正在考虑创建安全角色并使用插件检查此角色，但我无法在工作流（流程）实体上注册插件。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T20:33:15.197

如果您只是将所有工作流分配给自己，并取消这些用户重新分配工作流的能力，那么您实际上已经取消了激活权限。激活流程没有安全角色，但分配工作流有安全性，因此一旦您拥有这些工作流，就不允许用户重新分配它们。如果您要成为流程看门人，我也不建议您提供创建功能，因为他们将能够创建自己的然后激活它们。

# android - 将单个字符串值从 sqlite 数据库类传递到 android 中的另一个类？

> ID：13990322
> 
> 赞同：0
> 
> 时间：2012-12-21T12:35:55.553
> 
> 标签：android, sqlite

我正在为android制作一个hangman应用程序我的问题是我需要将一个单词从我的数据库类传递到我的游戏类中，我知道游戏类就像我最初使用数组列表创建它一样工作，然后我做了一个我也知道的数据库类可以工作，因为我可以向其中添加单词并查看它们。

问题是我似乎无法将一个单词从我的数据库类传递到我的游戏类，我现在已经花了 3 天时间并尝试了许多不同的东西，但没有运气，任何可以提供的帮助都会很棒因为我觉得我可能需要尽快把我的补偿扔出窗外。

这是我的数据库类

```
package com.example.hangpract;

import java.util.ArrayList;
import java.util.Random;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.widget.ArrayAdapter;

public class mysteryWordDB {

    public static final String KEY_WORD="mystery_word";

    public static ArrayList<String> results = new ArrayList<String>();  
    private static final String DATABASE_NAME="HangManWords";
    private static final String DATABASE_TABLE="wordsTable";
    private static final int DATABASE_VERSION= 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private static SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                    KEY_WORD + " TEXT NOT NULL);"
                    );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(db);

        }

    }

public mysteryWordDB(Context c){
    ourContext = c;
}

public mysteryWordDB open()throws SQLException{
    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close(){
    ourHelper.close();
}
//method to add user words from the edit word class

public long createEntry(String word) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_WORD, word);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);

}
//method to display all words in the view class

public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{KEY_WORD};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iWord = c.getColumnIndex(KEY_WORD);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result +  c.getString(iWord) + "\n";
    }
    return result;
}

//method that should set up an array of the words in the data base, can't get this bit right

public void getMysteryWord() {
    Cursor c = ourDatabase.rawQuery("SELECT KEY_WORD FROM " +
            DATABASE_TABLE, null);

    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String mystWord = c.getString(c.getColumnIndex(KEY_WORD));

                results.add(mystWord.toString());
            }while (c.moveToNext());
        }}
    }

//method that is called from the game class to get a random string from the array to use in the game

    public static String  word(){
        Random rand = new Random();
    int i=rand.nextInt(results.size());
    if(i >-1)return results.get(i);

    return results.get(i);

}
} 
```

我尝试过的最新方法的问题是：

```
//method that should set up an array of the words in the data base, can't get this bit right

public void getMysteryWord() {
    Cursor c = ourDatabase.rawQuery("SELECT KEY_WORD FROM " +
            DATABASE_TABLE, null);

    if (c != null ) {
        if  (c.moveToFirst()) {
            do {
                String mystWord = c.getString(c.getColumnIndex(KEY_WORD));

                results.add(mystWord.toString());
            }while (c.moveToNext());
        }}
    }

//method that is called from the game class to get a random string from the array to use in the game

    public static String  word(){
        Random rand = new Random();
    int i=rand.nextInt(results.size());
    if(i >-1)return results.get(i);

    return results.get(i);

}
} 
```

然后这是游戏类，它需要传入 KEY_WORD 的随机实例：

```
package com.example.hangpract;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

    public class game extends Activity implements OnClickListener {

        private ImageView hangimg;
        private TextView word;
        private String mysteryWord = mysteryWordDB.word();
        private int numWrongGuesses;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.game);

            bindviews();
            inistMystword();
            initWrongGuesses();

            //set button views for letters
            Button aButton = (Button)
                    this.findViewById(R.id.buttonA);

                    aButton.setOnClickListener(this);

            Button bButton = (Button)
                    this.findViewById(R.id.buttonB);

                    bButton.setOnClickListener(this);

            Button cButton = (Button)
                    this.findViewById(R.id.buttonC);

                    cButton.setOnClickListener(this);

            Button dButton = (Button)
                    this.findViewById(R.id.buttonD);

                    dButton.setOnClickListener(this);

            Button eButton = (Button)
                    this.findViewById(R.id.buttonE);

                    eButton.setOnClickListener(this);

            Button fButton = (Button)
                    this.findViewById(R.id.buttonF);

                    fButton.setOnClickListener(this);

            Button gButton = (Button)
                    this.findViewById(R.id.buttonG);

                    gButton.setOnClickListener(this);

            Button hButton = (Button)
                    this.findViewById(R.id.buttonH);

                    hButton.setOnClickListener(this);

            Button iButton = (Button)
                    this.findViewById(R.id.buttonI);

                    iButton.setOnClickListener(this);

            Button jButton = (Button)
                    this.findViewById(R.id.buttonJ);

                    jButton.setOnClickListener(this);

            Button kButton = (Button)
                    this.findViewById(R.id.buttonK);

                    kButton.setOnClickListener(this);

            Button lButton = (Button)
                    this.findViewById(R.id.buttonL);

                    lButton.setOnClickListener(this);

            Button mButton = (Button)
                    this.findViewById(R.id.buttonM);

                    mButton.setOnClickListener(this);

            Button nButton = (Button)
                    this.findViewById(R.id.buttonN);

                    nButton.setOnClickListener(this);

            Button oButton = (Button)
                    this.findViewById(R.id.buttonO);

                    oButton.setOnClickListener(this);

            Button pButton = (Button)
                    this.findViewById(R.id.buttonP);

                    pButton.setOnClickListener(this);

            Button qButton = (Button)
                    this.findViewById(R.id.buttonQ);

                    qButton.setOnClickListener(this);

            Button rButton = (Button)
                    this.findViewById(R.id.buttonR);

                    rButton.setOnClickListener(this);

            Button sButton = (Button)
                    this.findViewById(R.id.buttonS);

                    sButton.setOnClickListener(this);

            Button tButton = (Button)
                    this.findViewById(R.id.buttonT);

                    tButton.setOnClickListener(this);

            Button uButton = (Button)
                    this.findViewById(R.id.buttonU);

                    uButton.setOnClickListener(this);

            Button vButton = (Button)
                    this.findViewById(R.id.buttonV);

                    vButton.setOnClickListener(this);

            Button wButton = (Button)
                    this.findViewById(R.id.buttonW);

                    wButton.setOnClickListener(this);

            Button xButton = (Button)
                    this.findViewById(R.id.buttonX);

                    xButton.setOnClickListener(this);

            Button yButton = (Button)
                    this.findViewById(R.id.buttonY);

                    yButton.setOnClickListener(this);

            Button zButton = (Button)
                    this.findViewById(R.id.buttonZ);

                    zButton.setOnClickListener(this);

            //sets button view for new game
            Button newbutton = (Button)
                    this.findViewById(R.id.buttNew);
                    newbutton.setOnClickListener(this);
            //sets button view for menu
            Button menuButton = (Button)
                    this.findViewById(R.id.buttMenu);
                    menuButton.setOnClickListener(this);
        }

        //set actions on buttons
        public void onClick(View v) {
            switch (v.getId()) {
            case R.id.buttonA:

                validate('a');
                    break;
                case R.id.buttonB:

                validate('b');
                break;
                case R.id.buttonC:

                    validate('c');
                    break;
                case R.id.buttonD:

                    validate('d');
                    break;

                case R.id.buttonE:

                    validate('e');
                    break;

                case R.id.buttonF:

                    validate('f');
                    break;

                case R.id.buttonG:

                    validate('g');
                    break;

                case R.id.buttonH:

                    validate('h');
                    break;

                case R.id.buttonI:

                    validate('i');
                    break;

                case R.id.buttonJ:

                    validate('j');
                    break;

                case R.id.buttonK:

                    validate('k');
                    break;

                case R.id.buttonL:

                    validate('l');
                    break;

                case R.id.buttonM:

                    validate('m');
                    break;

                case R.id.buttonN:

                    validate('n');
                    break;

                case R.id.buttonO:

                    validate('o');
                    break;

                case R.id.buttonP:

                    validate('p');
                    break;

                case R.id.buttonQ:

                    validate('q');
                    break;

                case R.id.buttonR:

                    validate('r');
                    break;

                case R.id.buttonS:

                    validate('s');
                    break;

                case R.id.buttonT:

                    validate('t');
                    break;

                case R.id.buttonU:

                    validate('u');
                    break;

                case R.id.buttonV:

                    validate('v');
                    break;

                case R.id.buttonW:

                    validate('w');
                    break;

                case R.id.buttonX:

                    validate('x');
                    break;

                case R.id.buttonY:

                    validate('y');
                    break;

                case R.id.buttonZ:

                    validate('z');
                    break;

            case R.id.buttNew:

                Intent newGame = new Intent(v.getContext(), game.class);
                startActivityForResult(newGame,0);

            break;

            case R.id.buttMenu:
                Intent menu = new Intent(v.getContext(), MainActivity.class);
                startActivityForResult(menu,0);

            }

        }
        //get mystery word
        public void inistMystword(){
            word = (TextView) findViewById(R.id.mysteryword);
            word.setText(mysteryWord);

            word.setText(underscore());
        }

        //method to display the mystery word as underscores
        public String underscore() {
            StringBuffer result = new StringBuffer();
            for (int i = 0; i < mysteryWord.length(); i++) {
            result.append("_ ");
            }
            return result.toString();
            }

        //method to validate guess

        private void validate(char ch) {
            if (mysteryWord.indexOf(ch)== -1){

                if (numWrongGuesses < 6){
                    numWrongGuesses++;
                }
                checkLose();
                }
            else {
            if (numWrongGuesses <6){
                updateMystWord(ch);
                checkWin();
            } else {
                checkLose();
            }

        }}

            //method to reveal letter

            private void updateMystWord(char ch) {
                char[] updatedWord =
                word.getText().toString().toCharArray();
                for (int i = 0; i < mysteryWord.length(); i++) {

                if (ch == mysteryWord.charAt(i)) 
                updatedWord[i * 2] = mysteryWord.charAt(i);
                word.setText(new String(updatedWord));

                }

            }
            //sets number of wrong guesses to zero at game start
        private void initWrongGuesses() {
            numWrongGuesses = 0;
        }

        //checks when game is lost and displays lose screen

        private void checkLose() {
             if (numWrongGuesses == 6)
                hangimg.setImageResource(R.drawable.lose);

            }
        //checks when game is won and displays win screen
        private void checkWin() {
            if (word.getText().toString().indexOf("_") == -1) {
            hangimg.setImageResource(R.drawable.win);
            }
            }
        //binds the views
        private void bindviews(){
            hangimg = (ImageView)
                    this.findViewById(R.id.imageView1);
        }

      } 
```

游戏类肯定可以工作，数据库也可以工作，我只是不知道在尝试将单个值传递给游戏类时我哪里出错了，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:51:35.027

在您的数据库文件中创建一个方法为。

```
static String str = "data";   // ASSUME TO PASS THIS STRING

public static String passData()
{
    return str;
} 
```

在你的活动课上这样做。

```
 String str = dbClassName.passData(); 
```

而已。

# curl - 使用 CURL 扩展时的 XML 解析错误

> ID：13990324
> 
> 赞同：1
> 
> 时间：2012-12-21T12:35:58.860
> 
> 标签：curl, xml-parsing, yii-extensions

我在 yii 框架中工作。我正在使用 curl 扩展。我在 main.php 中包含了代码作为-

```
'curl'=>array(
    'class' => 'application.extensions.curl.Curl',
    ), 
```

并在受保护/扩展名下包含 curl.php 文件。在控制器中，我将代码包含为=

```
public function actionGetWeather()
{
    $place='pune';
    $data = Yii::app()->curl->run('http://www.google.com/ig/api?weather='.$place.'&hl=en');

$xml = new SimplexmlElement($data);
foreach($xml->weather as $item) {

    foreach($item->current_conditions as $new) {

        //For temperature in fahrenheit replace temp_c by temp_f
        $current_temperature=$new->temp_c['data'];
        $current_humidity=$new->humidity['data'];
    }

    $current_condition=$item->forecast_conditions[0]->condition['data'];
    $next_temperature=$item->forecast_conditions[1]->high['data'];

    //to convert Fahrenheit into Celcius
    $next_temperature=round(($next_temperature-32)*(5/9));

    $next_condition=$item->forecast_conditions[1]->condition['data'];
}

echo " Current temperature :".$current_temperature."<br />";
echo "Current condition : ".$current_condition."<br />";
echo $current_humidity;
echo "Tomorrows temperature :".$next_temperature."<br />";
echo "Tomorrows condition : ".$next_condition."<br />";
} 
```

但它给出了一个错误，因为 String 无法在“$xml = new SimplexmlElement($data);”行解析为 XML 那么我需要做些什么改变呢？请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:59:11.423

可能 Google Weather Api 已关闭。试试[http://worldweatheronline.com/weather](http://worldweatheronline.com/) api，几乎一样。

# objective-c - 属性访问结果未使用

> ID：13990328
> 
> 赞同：0
> 
> 时间：2012-12-21T12:36:21.297
> 
> 标签：objective-c, ios, xcode

我昨天刚开始学习Objective-C，我不太明白这个警告：

```
Property access result unused - getters should not be used for side effects 
```

使用此代码（第 3 行给出警告，self.addItem()）：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    if (textField == self.itemTxt) {
        self.addItem;
        self.itemTxt.text = @"";
    }
    return YES;
}

- (IBAction)addItem {
    [self.model addItemToArray: _itemTxt.text];
    _itemTxt.text = @"";
} 
```

为什么我会收到此警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:42:50.967

什么是添加项。根据您的代码，您似乎正在尝试调用该函数，因此请使用以下命令：

```
[self addItem]; 
```

基本上还有一件事，如果您深入了解 IBAction，您会发现它是无效的。通常，当我们想使用 IB 进行事件触发时，我们会使用 IBAction。

所以，你可以使用（如果你需要手动调用）

```
- (void)addItem {
    [self.model addItemToArray: _itemTxt.text];
    _itemTxt.text = @"";
} 
```

希望，它将增强您的知识，并有助于您的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:41:08.990

调用函数使用

```
[self addItem]; 
```

当您使用 self.addItem 时，您正在访问一个名为 addItem 的变量。

# reporting-services - SSRS 2005 中的“Lookupset”功能有什么替代品吗？

> ID：13990333
> 
> 赞同：2
> 
> 时间：2012-12-21T12:36:29.547
> 
> 标签：reporting-services, reportingservices-2005, ssrs-tablix

我需要在 SSRS 2005 中实现以下类型的表达式，但我在 SSRS 2005 中找不到“Lookupset”函数。

=Join(LookupSet(Fields!State_ID.Value, Fields!State_ID.Value,Fields!city.Value, "DataSet2"),",")
实现此目的的任何解决方法。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T21:29:02.327

我知道这样做的唯一方法是使用您想要的数据创建一个子报告，这似乎是城市/城市。在您的示例中，您将创建一个采用 State_ID 参数的报告，以过滤到仅具有该 State_ID 的城市。在表中带有子报告的主报告中，您将传递 Fields!State_ID.Value 作为参数。

# javascript - 用javascript清除间隔

> ID：13990335
> 
> 赞同：0
> 
> 时间：2012-12-21T12:36:32.497
> 
> 标签：javascript, jquery, setinterval, intervals

我制作了一个有间隔的动画。这是我的脚本：

```
var count = 0;
var countSecond = -40;
function arrowAnimation() {
    if (count > 40) {
        clearInterval();
    }
    $('.list-what-we-do .arrow').css({
        top: (count++) + 'px'
    });
}
function arrowAnimationSecond() {
    if (countSecond > 0) {
        clearInterval();
    }
    $('.list-what-we-do .arrow').css({
        right: (countSecond++) + 'px'
    });
}

setInterval(arrowAnimation, 5);
setInterval(arrowAnimationSecond, 5); 
```

现在我的问题。我怎样才能停止间隔。我使用了clearInterval。但这行不通。我怎样才能解决这个问题？感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T12:38:54.673

当你使用`setInterval`或者`setTimeout`返回值是一个引用时；您将此引用传递`clearInterval`给取消。

```
var foo = setTimeout(...);
clearTimeout(foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:40:43.603

您必须将`setInterval`方法的返回值分配给变量

然后你可以稍后使用`clearInterval`

```
var count = 0;
var countSecond = -40;

var interval = setInterval(arrowAnimation, 5);
var secondInterval = setInterval(arrowAnimationSecond, 5);

function arrowAnimation() {
    if (count > 40) {
        clearInterval(interval);
    }
    $('.list-what-we-do .arrow').css({
        top: (count++) + 'px'
    });
}
function arrowAnimationSecond() {
    if (countSecond > 0) {
        clearInterval(secondInterval);
    }
    $('.list-what-we-do .arrow').css({
        right: (countSecond++) + 'px'
    });
} 
```

# java - 记住登录信息

> ID：13990337
> 
> 赞同：-4
> 
> 时间：2012-12-21T12:36:44.953
> 
> 标签：java, android

我想让用户注册一次，从那一刻起，他每次打开应用程序时都不需要登录。我该怎么做？我应该在设备上保存登录信息并在他每次尝试时加载它吗？安全吗？也许只保存他的 ID，然后从 mysql db 加载他的信息？

**编辑** 你介意至少告诉我为什么我会得到这么多反对票吗？这样我下次就可以学习了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:39:29.357

这通常使用令牌完成。因此，在第一次登录后，您使用您的令牌对 Web 服务进行身份验证。我个人不建议将登录凭据存储在本地设备上。由于生根或简单的编程错误，登录日期应该被简单地窃取。

因此，如果客户端想要登录，他/她可以简单地删除其令牌，并且在服务器端该令牌也应该被删除。

一个常见的例子是 cookie 的使用，它只不过是一个令牌。结合到期日期，这是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:43:40.623

如果您正在开发 Web 应用程序。

1.  身份验证生成唯一令牌后，创建一个 cookie 将令牌添加到 cookie 并将其保存到用户的浏览器
2.  当用户访问您的网站时，只需在令牌的帮助下检查 cookie 是否处于活动状态即可获取

# amazon-web-services - Logstash 输出到 AWS EC2 上的 Elasticsearch

> ID：13990344
> 
> 赞同：7
> 
> 时间：2012-12-21T12:37:00.453
> 
> 标签：amazon-web-services, amazon-ec2, elasticsearch, logstash

我在配置 logstash 以输出到 AWS EC2 上的 Elasticsearch 集群时遇到问题。

我正在使用 Logstash 版本 1.1.5 和 Elasticsearch 1.19.8。

这是我在 logstash 中的输出配置：

```
output {
  stdout { debug => true debug_format => "json"}
  elasticsearch {
    cluster => "logstash-searcher"
    node_name => "logstash-indexer"
  }
} 
```

这是elasticsearch.yml中的对应配置

```
cluster.name: logstash-searcher
path.data: /usr/local/elasticsearch/data
path.work: /usr/local/elasticsearch/tmp
path.logs: /usr/local/elasticsearch/logs
path.plugins: /usr/local/elasticsearch/plugins
bootstrap.mlockall: true
cloud.aws.region: eu-west-1
cloud.aws.access_key: --
cloud.aws.secret_key: --
discovery.type: ec2
discovery.ec2.host_type: public_ip
discovery.ec2.groups: elasticsearch
gateway.type: s3
gateway.s3.bucket: es-logstash

transport.tcp.port: 9300-9400 
```

我使用以下方式启动logstash：

```
java -jar logstash-1.1.5-monolithic.jar agent -f shipper.conf 
```

在启动一段时间后，我遇到了这些失败：

```
Failed to index an event, will retry {:exception=>org.elasticsearch.discovery.MasterNotDiscoveredException: waited for [1m], 
```

我的怀疑是，logstash 需要使用 cloud-aws 之类的东西，以便其弹性搜索客户端能够找到集群。有没有人有适用于aws的示例配置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T13:55:43.307

问题是 logstash 的嵌入式 elasticsearch 实例正在使用其默认发现模式。由于 elasticsearch 集群配置了[cloud-aws](https://github.com/elasticsearch/elasticsearch-cloud-aws)，logstash 的嵌入式 elasticsearch 也需要。

为此，您必须将 elasticsearch.yml 配置文件添加到 logstash 的工作目录。您还需要通过将 cloud-aws 插件添加到类路径来提供它。

```
java -cp logstash-1.1.7-monolithic.jar:cloud-aws/* logstash.runner agent -f shipper.conf 
```

使用此配置，我设法让 logstash 输出到我的 elasticsearch 集群。

# c++ - 在 VS 2012 中自动向量化不可向量化进程的数组

> ID：13990345
> 
> 赞同：0
> 
> 时间：2012-12-21T12:37:02.847
> 
> 标签：c++, visual-studio-2012, vectorization

假设您有以下代码：

```
class Unit
{
private:
    float _outDel = 0;

public:

    float Process()
    {
        float rnd = rand();
        float out = rnd + _outDel;
        _outDel = out;
        return out;
    }

    void Process(int frames, float *out)
    {
        for (int i = 0; i < frames; i++)
            out[i] += Process();
    }
}

class UnitBank
{
private:
    Unit _unit[128];

public:

    float Process(int frames, float *out)
    {
        for (int i = 0; i < 128; i++)
            _unit[i].Process(frames, out);
    }
} 
```

这样做的目的是总结一个由 128 个进程组成的数组，每个进程都会产生一些数字。

本质上，由于向后数据依赖（_outDel 变量），Unit 模块无法向量化。

但是，VS 2012“设置了一些标志”是否有可能产生一个单元模块（UnitSSE）的*向量*，然后使用它们组成一个具有 32 个 sse 单元的 UnitBank 类？像这样的东西：

```
class UnitSSE
{
private:
    float128 _outDel = 0;

public:

    float128 Process()
    {
        float128 rnd = rand();
        float128 out = rnd + _outDel;
        _outDel = out;
        return out;
    }

    void Process(int frames, float128 *out)
    {
        for (int i = 0; i < frames; i++)
            out[i] += Process();
    }
}

class UnitBankSSE
{
private:
    UnitSSE _unit[32];

public:

    void Process(int frames, float128 *out)
    {
        for (int i = 0; i < 32; i++)
            _unit[i].Process(frames, out);
    }
} 
```

那么，VS 2012 可以自动生成这样的优化吗？

# ruby-on-rails - Rails 应用程序的 HA 服务器设置

> ID：13990348
> 
> 赞同：1
> 
> 时间：2012-12-21T12:37:24.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nginx, passenger

我们在 Nginx 和 Apache 上使用 Rails 3.2 和 Ruby 193。

我可以知道提供 HA（高可用性）设置的最佳选择吗？

例子：

2 台服务器用于 MySQL DB，2 台服务器用于 Nginx-Passenger 和 NodeBalanver。是否有意义？

谢谢你。

普拉布

# asp.net-mvc - 如何在自定义主题时将 HTML 块添加到商人部落

> ID：13990354
> 
> 赞同：0
> 
> 时间：2012-12-21T12:37:56.400
> 
> 标签：asp.net-mvc

我想在自定义主题时将“Html Block”添加到主页，我正在尝试为 HOME PAGE2 部分添加，但我找不到任何添加 HTML 块的方法。

# java - 如何从 ear/war/jar 读取文件？

> ID：13990356
> 
> 赞同：3
> 
> 时间：2012-12-21T12:38:04.393
> 
> 标签：java, file, jax-rs, war, ear

我有包含另一个 WAR 的 EAR。项目结构如下图：

```
project.ear
 |-- lib
 |-- META-INF
 |-- project-web.war
 |    |-- META-INF
 |    |-- WEB-INF
 |    |    |-- classes
 |    |    |    `-- com
 |    |    |         `-- example
 |    |    |              `-- services
 |    |    |                   `-- ListPageService.class
 |    |    |-- lib
 |    |    |-- web.xml
 |    |    `-- weblogic.xml
 |    `-- content.html
 `-- project-services.jar 
```

在 WAR 中，有一个`ListPageService`需要读取`content.html`文件的 JAX-RS 类。如何访问该文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T15:03:41.180

获取 WAR 文件中资源的常用方法是通过`ServletContext.getResource`或`getResourceAsStream`. 您应该能够`ServletContext`通过声明一个带有注释的字段来访问 JAX-RS 类中的`javax.ws.rs.core.Context`

```
@Context ServletContext servletContext; 
```

然后在请求处理方法中你可以说

```
URL content = servletContext.getResource("/content.html");
// alternatively
// InputStream content = servletContext.getResourceAsStream("/content.html"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:42:00.637

编辑：这个答案不再适用于现在制定的问题。建议的方法仅适用于从类路径获取资源。

看看`Class.getResourceAsStream`方法。它允许您访问在类路径中找到的文件。

# mysql - 第 1 行的“列名”列的数据被截断

> ID：13990383
> 
> 赞同：0
> 
> 时间：2012-12-21T12:39:58.740
> 
> 标签：mysql, hibernate, jpa

这是我的模型类属性

```
@Column(name = "createdate")  
@Type(type="long_timestamp")  
private Date creationDate; 
```

这是我的类型定义

```
@TypeDef(  
name="long_timestamp",  
typeClass = com.x.LongTimestampType.class  
), 
```

请参考我的 LongTimestampType.java

```
public class LongTimestampType extends TimestampType {

    @Override
    public String objectToSQLString(Date value, Dialect dialect)
            throws Exception {
        return "" + ((Date) value).getTime();
    }

    @Override
    public Object get(ResultSet rs, String index) throws HibernateException, SQLException {
        return new Date(rs.getLong(index));
    }

    @Override
    public void set(PreparedStatement ps, Date value, int index, SessionImplementor sessionImplementor)  throws HibernateException, SQLException {
        System.out.println("set Date as BIGINT into Prepared Statement :: " + ((Date)value).getTime());
        ps.setLong(index, ((Date)value).getTime());
    }

    @Override
    public String getName() {
        return "long_timestamp";
    }

    public int[] sqlTypes() {
        return new int[] { Types.BIGINT };
    }

   /* public int sqlTypes() {
        return Types.BIGINT;
    }*/
} 
```

这是我的 mySql 表列

```
createdate  bigint(20) NULL 
```

我保存这个对象的java代码是

```
entityManager.persist(object); 
```

我的问题是，当我尝试将对象保存到表中时，它会抛出：`java.sql.BatchUpdateException: Data truncated for column 'createdate' at row 1`
即使我也将**null**设置为 createDate。请给出解决此问题的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:12:47.500

也许

`public String objectToSQLString(Date value, Dialect dialect)`

应该

`public String objectToSQLString(Object value, Dialect dialect)`

否则该方法没有被正确覆盖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:33:43.913

你可以改变你的专栏

```
createdate as varchar(20) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:53:47.010

问题在于

```
createdate  bigint(20) NULL 
```

您应该将其声明为`datetime`

尝试

```
alter table table1 modify createdate datetime 
```

# codeigniter - youtube：合并一系列视频文件并作为单个视频上传

> ID：13990384
> 
> 赞同：2
> 
> 时间：2012-12-21T12:40:00.503
> 
> 标签：codeigniter, upload, merge, youtube

我有一组视频文件，必须合并并上传到 youtube。对于上传，我按照 url 的说明进行操作[https://developers.google.com/youtube/articles/codeigniter_library的说明进行操作](https://developers.google.com/youtube/articles/codeigniter_library)

但是合并过程需要相当长的时间。

是否可以将一系列视频文件传递到 youtube，然后必须在其中自行合并，然后作为单个视频上传到 youtube 帐户？所有这些都必须在 php 中以编程方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T09:59:18.063

我认为使用 CodeIgniter 来完成这项任务是无稽之谈。

没有 web 框架（它只是显示页面并与数据库一起玩一点）被认为可以完成长时间的处理任务。

有很多方法可以做。

我，我会在数据库中添加一个任务，一个工作人员会每隔 X 分钟或几个小时检查一次这个数据库并完成这项工作。任务完成后，如果您愿意，它会向您发送电子邮件或在 YouTube 上发布视频。

您可以查看此[链接](http://ellislab.com/codeigniter/user-guide/general/cli.html)以了解 CodeIgniter 在 CLI 中的工作方式以及此库如何处理视频： http: [//ffmpeg-php.sourceforge.net/](http://ffmpeg-php.sourceforge.net/)

# c# - 标记 ListBox 中的最后一项

> ID：13990390
> 
> 赞同：0
> 
> 时间：2012-12-21T12:40:23.240
> 
> 标签：c#, winforms

在这段代码中，我正在检查文件夹根目录中的所有文件，并且只将相关文件添加到我的列表框中。我想要一个选项，它在每次迭代时标记我的列表框中的最后一项。

我认为应该使用此命令：`listBoxFiles.SetSelected(listBoxFiles.Items.Count, true);`但是如果我每次将项目添加到收到的列表框**ArgumentOutOfRange**错误之后都将其放入。

```
private void btnAddDir_Click_1(object sender, EventArgs e)
{
    int totalCount = 0;
    int count = 0;
    string fileToAdd = string.Empty;
    List<string> filesList = new List<string>();
    BackgroundWorker backgroundWorker = null;
    DialogResult dialog = folderBrowserDialog1.ShowDialog();
    if (dialog == DialogResult.OK)
    {
        btnAddfiles.Enabled = false;
        btnAddDir.Enabled = false;
        btnPlay.Enabled = false;
        Editcap editcap = new Editcap();

        foreach (string file in SafeFileEnumerator.EnumerateFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories))
        {
            if (editcap.isWiresharkFormat(file))
            {
                filesList.Add(file);
                totalCount++;
            }
        }

        backgroundWorker = new BackgroundWorker();
        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.DoWork +=
            (s1, e1) =>
            {
                foreach (string fileName in filesList)
                {
                    if (editcap.isWiresharkFormat(fileName))
                    {
                        if (editcap.isLibpcapFormat(fileName))
                        {
                            backgroundWorker.ReportProgress(0, fileName);
                            count++;
                        }
                        else if (!editcap.isLibpcapFormat(fileName))
                        {
                            fileToAdd = editcap.getNewFileName(fileName);
                            backgroundWorker.ReportProgress(0, fileToAdd);                                    
                            count++;
                        }

                        this.Invoke((MethodInvoker)delegate
                        {
                            labelStatus.Text = string.Format("Please wait..({0}/{1} files added)", count, totalCount);
                        });
                    }
                }
            };

        backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s1, e1) =>
        {

        });

        backgroundWorker.ProgressChanged +=
         (s1, arguments) =>
         {
             listBoxFiles.Items.Add(arguments.UserState);
         };

        backgroundWorker.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:41:46.373

```
listBoxFiles.SetSelected(listBoxFiles.Items.Count - 1, true); 
```

# android - 在开发时禁用 Google Analytics

> ID：13990391
> 
> 赞同：9
> 
> 时间：2012-12-21T12:40:24.373
> 
> 标签：android, google-analytics

我的问题很简单：当应用程序使用调试证书签名时，有什么方法可以自动禁用 Google Analytics？意味着它应该仅在发布版本中处于活动状态。先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T12:47:28.410

如果您使用的是 ADT 17 及更高版本，则可以使用 BuildConfig 类：

```
if(BuildConfig.DEBUG) {
    GoogleAnalytics googleAnalytics = GoogleAnalytics.getInstance(getApplicationContext());
    googleAnalytics.setAppOptOut(true);
} 
```

该类`BuildConfig`是自动生成`R.java`的。它仅包含`DEBUG`布尔值，`true`默认情况下设置为，`false`导出 apk 时设置为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:45:16.783

好吧，您可以将其设置为不太容易激活：

```
if (...) {
  GoogleAnalytics ga= GoogleAnalytics.getInstance(getApplicationContext());
  ga.setAppOptOut(true);
} 
```

我通常只是检查一些用于测试的已知设备的硬件序列号：

```
if (Arrays.asList("x", "y").contains(getHardwareSerial())) 
```

在哪里`getHardwareSerial()`：

```
public static String getHardwareSerial() {
        try {
            Field serialField = Build.class.getDeclaredField("SERIAL");
            return (String) serialField.get(null);
        } catch (NoSuchFieldException nsf) {
        } catch (IllegalAccessException ia) {
        }
        return Build.UNKNOWN;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-25T13:18:55.137

使用最新版本的 Google Analytics，您应该使用以下代码：

```
if(BuildConfig.DEBUG){
    GoogleAnalytics.getInstance(this).setDryRun(true);
} 
```

# iphone - 启动画面后Phonegap显示白屏 - IOS

> ID：13990396
> 
> 赞同：1
> 
> 时间：2012-12-21T12:40:44.433
> 
> 标签：iphone, ios, xcode, ipad, cordova

我试图杀死白屏，它会在登录页面之前的启动屏幕之后启动我的phonegap应用程序后自动加载两秒钟。

我已经尝试过`AutoHideSplashScreen to NO`并添加`navigator.splashscreen.hide();`到 login.html 中，如下面的参考中所引用。但它杀死了启动画面而不是白屏。现在在启动应用程序时，它会直接进入 login.html，而不会出现启动画面。请帮助我消除启动画面和 login.html 之间的默认白屏。

[如何在phonegap iOS应用程序开始时杀死白色闪烁的闪屏？](https://stackoverflow.com/questions/6992939/how-to-to-kill-the-white-flickering-splashscreen-at-the-start-of-phonegap-ios-ap)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:32:30.940

在您的`ViewController's ViewDidload,`隐藏`Webview`和之后它将加载显示它在 webViewDidFinishLoad 方法中。

首先，您必须在 View DidLoad 中隐藏 WebView。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
thewebview.Hidden=YES;
} 
```

然后在加载完成后显示 Webview

```
 -(void)webViewDidFinishLoad:(UIWebView *)webView {
        NSLog(@"finish");   
      thewebview.Hidden=NO;
    } 
```

# java - MSML 的 XSD 架构中的 XML 失败 (RFC 5707)

> ID：13990399
> 
> 赞同：2
> 
> 时间：2012-12-21T12:40:52.650
> 
> 标签：java, xml, parsing, xsd, jaxb

我正在尝试为[媒体服务器标记语言 (MSML) - RFC 5707](https://www.rfc-editor.org/rfc/rfc5707)找到有效的 xml 模式。我需要编写一个解析器，但我只找到这些规范文档。我将它们复制并粘贴到 .xsd 文件中。但似乎他们是一个错误。我使用 JAXB 从这些模式类创建，但出现此错误：（我将错误消息翻译成英文）

> [错误] Elementtyp "xs:complexType" 需要适当的 Endtag "</xs:com plexType>"。第 332 行 von 文件：/E:/Downloads/jaxb-ri-2.2.6/bin/msml-dialog-base-datatypes.xsd

我用eclipse检查了文件，问题出在这个元素定义中：

```
<xs:element name="dtmfgen" substitutionGroup="primitive">
  <xs:complexType>
    <xs:extension base="primitiveType">
     <xs:choice minOccurs="0">
      <xs:element name="dtmfgenexit">
       <xs:complexType>
        <xs:group ref="sendType"/>
       </xs:complexType>
      </xs:element>
     </xs:choice>
     <xs:attribute name="level" use="optional" default="-6">
      <xs:simpleType>
       <xs:restriction base="xs:nonPositiveInteger">
        <xs:maxInclusive value="0"/>
        <xs:minInclusive value="-96"/>
       </xs:restriction>
      </xs:simpleType>
     </xs:attribute>
     <xs:attribute name="digits" type="dtmfDigits.datatype"
                   use="required"/>
     <xs:attribute name="dur" type="posDuration.datatype" use="optional"
                   default="100ms"/>
     <xs:attribute name="interval" type="posDuration.datatype"
                   use="optional" default="100ms"/>
    </xs:extension>
   </xs:complexContent>
  </xs:complexType>
 </xs:element> 
```

我找不到解决方案来解决它，所以也许你们中的某个人可以帮助我。或者给我一个 MSML 的有效 xsd 包的链接。或者更好的是有人为我提供解析器。？

谢谢G。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:03:45.223

发布的错误消息很可能与剪切和粘贴对您的工作方式有关。

尽管如此，即使你解决了这个问题，你仍然会遇到两个问题（知道......至少对于那些以前尝试过的人来说......）：

*   使用无效模式（未转义 -）
*   **msml**元素的重复定义（一次在 msml-core 中，一次在 msml.xsd 中）。

[该档案](http://www.paschidev.com/schemas/MSML.zip)包含您需要的所有文件；它们是有效的，这意味着已经应用了所有必要的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:56:43.287

您是复制/粘贴错误的受害者，该错误导致您的声明副本格式错误：在此过程中，`xs:complexContent`（作为 的子项`xs:complexType`和父项出现`xs:extension`）的开始标记被删除。

我推断这是一个复制/粘贴错误，因为 RFC 2707 中的 XSD 模式文档没有这个问题。

# grails - DataSource.groovy 的动态模式值

> ID：13990402
> 
> 赞同：1
> 
> 时间：2012-12-21T12:41:02.713
> 
> 标签：grails, grails-domain-class, grails-controller

是否可以将动态值从 Controller/Domain 类发送到 DataSource.groovy？前任：`default_schema = ${someConfig.default_schema}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:48:07.503

不可能。DataSource 在应用程序启动时加载。无法在运行时更改此配置。

如果您的目标是外部化数据源配置，您可以使用[JNDI](http://grails.org/doc/2.1.0/guide/single.html#JNDIDataSources) ，例如：

```
dataSource {
    jndiName = "java:comp/env/myDataSource"
} 
```

并在 web-app/META-INF/context.xml 中定义数据源。

# database - cassandra 备份恢复到另一个 cassandra 实例

> ID：13990418
> 
> 赞同：3
> 
> 时间：2012-12-21T12:42:13.740
> 
> 标签：database, backup, cassandra, restore

我在一个 cassandra 实例中创建了一个名为 XYZ 的键空间。我制作了所有数据库文件的副本并粘贴到另一个系统中运行的另一个 cassandra 实例中。当我访问该系统中的 XYZ 键空间时，它会抛出异常，例如***找不到 XYZ 键空间***。我***粘贴了所有***提交***日志，***在该系统中也保存了缓存文件。我还应该做些什么来访问该系统中的 XYZ 键空间。我不知道如何解决这个问题。我期待尽快得到最好的建议......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T18:24:56.693

键空间和列族不会因数据文件的存在而神奇地出现，您也需要在目标集群中创建它们。如果源代码控制中没有该 cli，则可以在源集群上使用“显示架构”。

# tfs - TFS 11 2012 API 问题：查询容量和休息日

> ID：13990421
> 
> 赞同：5
> 
> 时间：2012-12-21T12:42:19.563
> 
> 标签：tfs, tfs-sdk

我需要使用 TFS API 完成几件事。其中，我必须阅读要在 WPF UI 中显示的每个项目的 sprint 的资源规划信息。

[沿着本指南](http://blogs.microsoft.co.il/blogs/shair/archive/2012/05/28/tfs-api-part-47-vs11-manage-iterations-dates.aspx)标记，我现在有以下方法：

```
 private TfsTeamService _teamService;
    private ICommonStructureService4 _structureService;
    TeamSettingsConfigurationService _teamSettingsConfigurationService;

    public void GetUserIterationAssignments(IList<ProjectInfo> projects)
    {
        foreach (ProjectInfo project in projects)
        {
            Console.WriteLine(project.Name);

            TeamFoundationTeam team = _teamService.QueryTeams(project.Uri).First();
            IList<Guid> teamGuids = new List<Guid>() { team.Identity.TeamFoundationId };
            TeamConfiguration config = _teamSettingsConfigurationService.GetTeamConfigurations(teamGuids).FirstOrDefault();
            if (config != null)
            {
                foreach (string nodePath in config.TeamSettings.IterationPaths)
                {
                    var projectNameIndex = nodePath.IndexOf("\\", 2);
                    var fullPath = nodePath.Insert(projectNameIndex, "\\Iteration");
                    var nodeInfo = _structureService.GetNodeFromPath(fullPath);
                    if (nodeInfo.StartDate != null &&
                       nodeInfo.FinishDate != null)
                    {
                        foreach (TeamFoundationIdentity member in team.GetMembers(_collection, MembershipQuery.Direct))
                        {
                            Console.WriteLine("{0} is in assigned to {1} from {2}", 
                                                    member.DisplayName, 
                                                    nodeInfo.Name,
                                                    nodeInfo.StartDate,
                                                    nodeInfo.FinishDate);
                        }
                    }
                }
            }
        }
    } 
```

我需要打印到控制台（当然只是为了这个例子）是容量视图中显示的大部分信息：

![在此处输入图像描述](../Images/913d9040d5ef66abb0c4805241a1e139.png)

更准确地说，我需要访问

*   日容量
*   休息日（会员）
*   休息日（团队）

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-31T16:52:10.867

这不是一种受支持的方法，如果您升级到更新版本的 TFS，将来可能会中断，但如果您只想**读取**数据，您可以直接转到 TFS 服务器的 SQL 数据库。

您需要的具体值在（假设您使用的是 DefaultCollection）

*   `[Tfs_DefaultCollection].[dbo].[tbl_TeamConfigurationCapacity]`
*   `[Tfs_DefaultCollection].[dbo].[tbl_TeamConfigurationCapacityDaysOffRange]`

这些通过 GUID 引用迭代和用户。

*   迭代 GUID 可以在`[Tfs_Warehouse].[dbo].[DimIteration]`
*   可以通过搜索用户名/SSID 找到用户 GUID`[Tfs_Configuration].[dbo].[tbl_Identity]`

下面是一个快速示例，它查询我在 1 月迭代中每天的小时数：

```
select Capacity from [Tfs_DefaultCollection].[dbo].[tbl_TeamConfigurationCapacity] as _cap
inner join [Tfs_Configuration].[dbo].[tbl_Identity] as _user
    on _user.[Id] = _cap.[TeamMemberId]
inner join [Tfs_Warehouse].[dbo].[DimIteration] as _iter
    on _iter.[IterationGUID] = _cap.[IterationId]
        where _iter.[IterationPath]='\Code\Current\401-Jan'
        and _user.[DisplayName]='Williams, Jason' 
```

您可以使用类似的方法从 tbl_TeamConfigurationCapacityDaysOffRange 读取每个假期的开始/结束日期范围。但是，它有点复杂，因为有团队休息日和个人休息日。

这是我用来实现此目的的查询。（它似乎有效，虽然在为我们所有用户工作了 6 个月后，我们的一个用户突然从查询中消失了，我发现没有明显的原因我现在需要在 IdentityMap 表中查找他的 ID。乐趣来自未记录来源的逆向工程内容:-(

```
select [StartTime],[EndTime] from [Tfs_DefaultCollection].[dbo].[tbl_TeamConfigurationCapacityDaysOffRange] as _cap1
    inner join [Tfs_Warehouse].[dbo].[DimIteration] as _iter1
      on _iter1.[IterationGUID] = _cap1.[IterationId]
          where _iter1.[IterationPath]='\Code\Current\401-Jan'
              and _cap1.[TeamMemberId]='00000000-0000-0000-0000-000000000000'
union
    select [StartTime],[EndTime] from [Tfs_DefaultCollection].[dbo].[tbl_TeamConfigurationCapacityDaysOffRange] as _cap2
        inner join [Tfs_DefaultCollection].[dbo].[tbl_IdentityMap] as _map
            on _map.[localId] = _cap2.[TeamMemberId]
        inner join [Tfs_Configuration].[dbo].[tbl_Identity] as _user2
            on _user2.[Id] = _map.[masterId]
        inner join [Tfs_Warehouse].[dbo].[DimIteration] as _iter2
            on _iter2.[IterationGUID] = _cap2.[IterationId]
                where _iter2.[IterationPath]='\Code\Current\401-Jan'
                    and (_user2.[DisplayName]='Williams, Jason') 
```

您只需为提到迭代路径和要查询的用户名的两个地方替换适当的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-01T13:11:14.493

还有另一种不受支持的可能性。查看网站 http://{tfs-server}:8080/tfs/DefaultCollection/{project}/_backlogs/Capacity/{iterationpath}。后面的数据包含JSON格式的容量信息（team-capacity-data）。

[https://onedrive.live.com/redir?resid=88F0C013A4398D9B%21129](https://onedrive.live.com/redir?resid=88F0C013A4398D9B%21129)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T12:56:00.183

这些值只能从服务器对象模型中获得（目前没有等效的客户端对象模型）。接口和对象都是制作`Internal`的，因此即使在服务器上您也无法访问这些值。

> `internal TeamCapacity GetTeamIterationCapacity(Guid teamId, Guid iterationId);`
> 
> 声明类型：`Microsoft.TeamFoundation.Server.WebAccess.WorkItemTracking.Common.DataAccess.TeamConfigurationComponent`
> 
> 集会：`Microsoft.TeamFoundation.Server.WebAccess.WorkItemTracking.Common, Version=12.0.0.0`

目前，获取数据的唯一方法是通过`/tfs/{ProjectCollection}/{Team Project}/_api/_teamcapacity/updateteamcapacity/{Team}/{Iteration/Path}?__v=4`团队容量页面使用的 json 服务 ()，或者直接从 James Tupper 提到的表中的 ProjectCollection 数据库中获取数据。

看起来 json 服务正在使用请求验证，这使得它很难从任何外部系统中使用。

> ## **必需的免责声明**：
> 
> TFS 的服务器数据库不具有可扩展性，不支持对它们的任何直接查询，并且模型可以在不通知的情况下更改，即使在服务包之间也是如此。不支持直接查询 TFS 数据库。通过官方 API 以外的任何其他方式更改 TFS 数据库中的值实际上会使您的 TFS 服务器处于不受支持的状态，并且在以后升级到较新版本时可能会导致重大问题。

# android - android 4.0.x 上的字体不起作用

> ID：13990423
> 
> 赞同：11
> 
> 时间：2012-12-21T12:42:24.223
> 
> 标签：android, css, font-face

我正在用 JQM 构建一个移动应用程序，我需要用 font-face 声明自己的字体。

我将字体**css**文件`fonts.css`作为第一个加载的 css 文件包含在我的 index.html 中，并声明`font-faces`如下：

```
@font-face {
    font-family:"MyFont";
    font-weight:normal;
    font-style:normal;
    src:url("fonts/MyFont.woff");
    src:url("fonts/MyFont.eot?") format("eot"),
        url("fonts/MyFont.woff") format("woff"),
        url("fonts/MyFont.ttf") format("truetype"),
        url("fonts/MyFont.svg#MyFont") format("svg");
} 
```

我的两个测试设备是`Google Nexus 7`Android **4.2.1**和**Android 4.0.4**。`Motorola Razr`

 **在 Google Nexus 上，它既适用于移动版 Chrome，也适用于 PhoneGap。但在摩托罗拉 Razr 上，它仅适用于移动 Chrome。现有的 Android 浏览器和 Phonegap 都不使用`MyFont`.

是否有任何解决方法可以让我的字体在 Android 4.0.x 上工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T09:11:57.607

有趣的。我有相反的经历。

我有一个运行 4.2.1 (CM 10.1) 的 Galaxy Nexus，在升级之前加载字体绝对正常，但自更新以来 CSS 开始变得非常奇怪（仅在本机 WebKit 中，而不是 Chrome，它仍然有效） .

我意识到这不是字体问题，而是 CSS 的特殊性被搞砸了（使用引导程序作为基础，然后用我自己的 CSS 替换）。如果包含引导程序，即使内联样式也不会显示，如果删除引导程序，一切都会正常工作。很奇怪。

至于你对我的问题的反面，有几个想法：

*   为什么第一个 src 带有 .woff？我已经看到它带有 .eot 用于 IE 向后兼容模式，但是使用 .woff 的浏览器应该能够从第二个 src 使用它。也许尝试删除第一个 src？（这应该不是问题，因为 WebKit 应该用第二个 src 覆盖）

*   你是如何加载字体文件的？从本地存储？从网络服务器？我知道 Firefox 如果带有字体文件的服务器与带有类型的文件不同，它不会在没有 Allow Origin 标头的情况下加载。

*   您是否需要在其他非 webkit 浏览器中加载相同的字体定义？如果没有，请考虑删除除 .woff 之外的所有文件。

*   你确定问题是字体吗？尝试将字体声明设置为非默认系统字体（例如“衬线”）。查看是否正在应用字体声明，或者是否您的字体很好，但 css 不知何故没有将字体应用于类型？（就像我上周的情况一样）

如果没有其他信息，这有点难以知道。您的@font-face 声明，除了第一个 src 是 .woff 的怪异之外，似乎它应该可以正常工作。我的猜测是问题出在其他地方，而不是那个代码片段。

**编辑：**

我找到了我的问题 --- 在 Android 4.2.1 上，CSS 选项`text-rendering:`的行为与 Chrome 和以前的 Android 版本完全不同。如果您正在使用此选项，请查看更改或删除它是否可以为您解决问题。这是我唯一能想到的，我认为 Android 4.0 与 Android 4.2 webkit 渲染字体的方式有所不同。**

# android - 我如何在android中打开/关闭闪烁的闪光灯相机灯？

> ID：13990424
> 
> 赞同：2
> 
> 时间：2012-12-21T12:42:23.870
> 
> 标签：android, flash, camera

我如何打开/关闭闪烁闪光灯相机灯？我尝试使用 for 循环但没有工作...冻结...为什么？需要警报管理器？线程可运行帖子延迟？

```
 for(int i=0;i<5;i++){
    flashon();
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    flashoff();
    }       
 }

   public void flashon(){
   camera = Camera.open();
   Parameters p = camera.getParameters();
   p.setFlashMode(Parameters.FLASH_MODE_TORCH);
   camera.setParameters(p);
   camera.startPreview();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:10:36.607

你需要使用`Handler`

```
Handler handler;
boolean isFlashon=false;
handler = new Handler();
    handler.removeCallbacks(toggleFlash);
    handler.postDelayed(toggleFlash, 1000 * 60); 
```

和

```
private Runnable toggleFlash = new Runnable() {
    public void run() {
        if(isFlashon)
        {
            //do Flash off
            isFlashon=false;
        }
        else
        {
            //do Flash on
            isFlashon=true;
        }
        handler.postDelayed(this, 1000 * 60);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-28T07:47:01.953

尝试下面的代码。它会工作，因为我也面临类似的情况，下面的代码对我有用。

```
 private boolean isFlashOn;
 private Camera camera;
 Parameters params;

 private void turnOnFlash() {
    if (!isFlashOn) {
        if (camera == null || params == null) {
            return;
        }

        params = camera.getParameters();
        params.setFlashMode(Parameters.FLASH_MODE_TORCH);
        camera.setParameters(params);
        camera.startPreview();
        isFlashOn = true;

    }

}

private void turnOffFlash() {
    if (isFlashOn) {
        if (camera == null || params == null) {
            return;
        }

        params = camera.getParameters();
        params.setFlashMode(Parameters.FLASH_MODE_OFF);
        camera.setParameters(params);
        camera.stopPreview();
        isFlashOn = false;

    }
}

 public void flash_effect() throws InterruptedException
{

    Thread a = new Thread()
    {
        public void run()
        {
          for(int i =0; i < 50; i++)
            {

                turnOnFlash();
                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                turnOffFlash();
                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {

                    e.printStackTrace();
                }

            }
        }
    };

    a.start();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:48:11.283

1.开机

```
camera = Camera.open();
Parameters p = camera.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_TORCH);
camera.setParameters(p);
camera.startPreview(); 
```

2.关闭

```
camera = Camera.open();
Parameters p = camera.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_OFF);
camera.setParameters(p);
camera.stopPreview(); 
```

并且，在 AndroidManifest.xml 上添加以下权限。

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

看到这个[http://www.mkyong.com/android/how-to-turn-onoff-camera-ledflashlight-in-android/](http://www.mkyong.com/android/how-to-turn-onoff-camera-ledflashlight-in-android/)

# iphone - 当函数被延迟调用时，我得到了错误的访问异常

> ID：13990427
> 
> 赞同：0
> 
> 时间：2012-12-21T12:42:32.857
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想搜索数组中的数据并刷新表视图，但是当我调用延迟函数时，我得到了 BAD ACCESS 异常并且无法工作。但经过一段时间的延迟后我想要这个功能这是我的代码这是我的完整课程

```
 #import "ViewController.h"
    #import "DBHandler.h"
    #import "placeDC.h"

    @interface ViewController ()

    @end

    @implementation ViewController

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        DBHandler *db = [[DBHandler alloc]init];
        dataArray=[db autoComplete];
        isSearching=0;

        myTableView.hidden=YES;
        // Do any additional setup after loading the view, typically from a nib.

        dispalyPlaces=[[NSMutableArray alloc] initWithArray:dataArray];
    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    #pragma mark - Table view data source

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return 1;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        if(isSearching)
        {
            return  [dispalyPlaces count];
        }
        else
            return [dataArray count];
    }

    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        return 44;
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        /* FOR SIMPLE CELL */
        static NSString *MyIdentifier = @"MyCell";

        UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];
        placeDC *palcedc;

      //  NSLog(@"%d",isSearching);
        if(isSearching)
        {
            palcedc = [dispalyPlaces objectAtIndex:[indexPath row]];
        }
        else
        {
            palcedc  = [dataArray objectAtIndex:[indexPath row]];
        }
        cell.textLabel.text = palcedc.placeNmae;

            return cell;
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

    }

    -(void)delayCall{
        for (placeDC *placedc in dataArray) {
            NSRange  r ;

            r = [placedc.placeNmae rangeOfString:searchText options:NSCaseInsensitiveSearch];
                    if (r.location!=NSNotFound) {
                [dispalyPlaces addObject:placedc];
            }
        }
      }

    - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
        [self.view endEditing:YES];
    }

    - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
        if ([string length]==0) {

            [dispalyPlaces removeAllObjects];
            [dispalyPlaces addObjectsFromArray:dataArray];
            isSearching = 0;

            myTableView.hidden=YES;
        }
        else{
            isSearching=1;
            searchText=textField.text;
        [dispalyPlaces removeAllObjects];
            myTableView.hidden=NO;

            [self performSelector:@selector(delayCall) withObject:nil afterDelay:0.1];

           // [self delayCall];

    //        for (placeDC *placedc in dataArray) {
    //            NSRange  r ;
    //            NSLog(@"%@",placedc.placeNmae);
    //            
    //            
    //       r = [placedc.placeNmae rangeOfString:textField.text options:NSCaseInsensitiveSearch];
    //    
    //            
    //            if (r.location!=NSNotFound) {
    //                [dispalyPlaces addObject:placedc];
    //            }
    //        }
           [myTableView reloadData];

        }
        NSLog(@"%d",[dispalyPlaces count]);
        return YES;

    }

    //- (void)searchBar:(UITextField *)searchBar textDidChange:(NSString *)searchText{
    //
    //    if ([txtSearch.text length]==0) {
    //        myTableView.hidden=YES;
    //    }
    //
    //    else{
    //        myTableView.hidden=NO;
    //        [dispalyPlaces removeAllObjects];
    //        for (placeDC *palce in dataArray) {
    //            NSRange  r ;
    //            
    //            r = [palce.placeNmae rangeOfString:searchText options:NSCaseInsensitiveSearch];
    //        }
    //
    //    }
    //    
    //}
    //
    //- (void)dealloc {
    //    [myTableView release];
    //    [txtSearch release];
    //    [super dealloc];
    //}
    @end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:57:48.180

请转到产品>编辑方案>对角器>启用僵尸对象

运行项目并尝试立即崩溃。它将为您提供有关哪个对象导致崩溃的信息。查看该对象，您的错误将得到解决

# c# - 在 Windows 商店应用程序的 Assets 文件夹中上传图片

> ID：13990431
> 
> 赞同：1
> 
> 时间：2012-12-21T12:42:47.263
> 
> 标签：c#, windows-phone-7, windows-store-apps

我正在开发一个 Windows 商店应用程序，我需要在其中上传图像并将其保存在 Assets 文件夹中。我是 C# 新手。这是我的代码。

```
var picker = new FileOpenPicker();
            picker.SuggestedStartLocation = PickerLocationId.Desktop;
            picker.ViewMode = PickerViewMode.Thumbnail;
            picker.FileTypeFilter.Add(".jpg");
            picker.FileTypeFilter.Add(".jpeg");
            StorageFile file = await picker.PickSingleFileAsync();

            if (file == null) return;
            var stream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
            BitmapImage image = new BitmapImage();
            image.SetSource(stream);
            imageTargetControl.Source = image;
            StorageFolder storageFolder = KnownFolders.DocumentsLibrary; 
            StorageFile copyFile = await file.CopyAsync(storageFolder); 
```

请帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:46:48.940

您无法将其保存到您的资产文件夹中，因为您在那里没有写入权限。

您必须将其存储到应用程序数据文件夹之一（LocalFolder、RoamingFolder 或 TemporaryFolder）。

如果您想将文件存储在其他任何地方，您可以请求应用程序的其他权限（例如在照片库中写入的权限），但如果您想保存在不是库的地方，您必须通过文件夹选择器对话框询问用户的位置，这是用户的选择。

# objective-c - 目标c访问公共方法

> ID：13990432
> 
> 赞同：9
> 
> 时间：2012-12-21T12:42:49.190
> 
> 标签：objective-c, cocoa, nstextfield, public-method

我尝试从另一个类访问公共方法。我已经尝试了很多我在网上找到的例子，但它们并没有按照我想要的方式工作。

Class1.h

```
@interface anything : NSObject {

    IBOutlet NSTextField *label;

}

+ (void) setLabel:(NSString *)string;
- (void) changeLabel:(NSString *)string2; 
```

Class1.m

```
+ (void) setLabel:(NSString *)string {

    Class1 *myClass1 = [[Class1 alloc] init];

    [myClass1 changeLabel:string];
    NSLog(@"setLabel called with string: %@", string);

}

- (void) changeLabel:(NSString *)string2 {

    [label setStringValue:string2];
    NSLog(@"changeLabel called with string: %@", string2);
} 
```

Class2.m

```
- (IBAction)buttonPressed {

    [Class1 setLabel:@"Test"];

} 
```

很奇怪的是，在 NSLogs 中，一切都很好，在两个 NSLogs 中，字符串都是“Test”，但是 textField 的 stringValue 没有改变！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T12:52:26.417

`-`并不`+`意味着公共或私人

`-`代表您可以在类的对象上调用的方法，并且

`+`代表可以在类本身上调用的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T12:54:17.290

这是您可以执行的操作的简短示例：

* * *

# 自定义类

```
@interface ITYourCustomClass : NSObject
@property (strong) NSString *title;

- (void)doSomethingWithTheTitle;
@end

@implementation ITYourCustomClass
- (void)doSomethingWithTheTitle {
    NSLog(@"Here's my title: %@", self.title);
}
@end 
```

* * *

# 使用它

```
@implementation ITAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    ITYourCustomClass *objectOfYourCustomClass = [[ITYourCustomClass alloc] init];
    [objectOfYourCustomClass doSomethingWithTheTitle];
}

@end 
```

* * *

# 类和对象方法

**用+**声明方法意味着您可以直接在类上调用该方法。就像你用`[myClass1 setLabel:@"something"];`. 这没有意义。你想要的是创建一个属性。属性保存在对象中，因此您可以创建对象`ITYourCustomClass *objectOfYourCustomClass = [[ITYourCustomClass alloc] init];`并设置属性`objectOfYourCustomClass.title = @"something"`。然后你可以调用`[objectOfYourCustomClass doSomethingWithTheTitle];`，这是一个公共对象方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:50:11.193

您正在尝试使用类方法访问实例变量。您应该将`+setLabel:`方法转换为`-setLabel:`，并像这样调用它：

```
[_myClass1Variable setLabel:@"Test"]; 
```

另外，什么是`-setStringValue`？如果你只是想改变`UILabel`你需要调用的文本`-setText:`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T12:52:27.870

我想`label`这将是一个 NSTextField，并且您正在尝试在不加载该 XIB 的情况下设置其值，从而导致您的 awakeFromNib 没有被调用。并且插座不会被那个束缚`label`。

# linux - 每次grep找到东西时如何增加变量的值

> ID：13990435
> 
> 赞同：0
> 
> 时间：2012-12-21T12:43:10.947
> 
> 标签：linux, shell, grep

假设您将一个文件传递给`grep word`并想知道该文件中有多少次出现`word`。如何**在**grep 工作时增加变量的值？

因此，例如，如果出现 3 次`word`，我希望有一个输出，例如

```
1
2
3 
```

打印在`stout`（或保存到变量中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:48:26.053

这个怎么样：

```
$ cat file
word
bird
is
this
word
word word word

$ fgrep -o word file | awk '{print NR}'
1
2
3
4
5 
```

如果您只想计算匹配的行而不是每个匹配的行，请删除该`-o`选项：

```
$ fgrep word file | awk '{print NR}'
1
2
3 
```

如果您只想将总数保存到变量中：

```
$ count=$(fgrep -o word file | wc -l)

$ echo $count
5

$ count=$(grep -c word file)

$ echo $count
3 
```

增量变量：

```
#/bin/bash

while read line; do 
    fgrep -q word <<< "$line" && ((count++)) 
done < file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:17:54.773

考虑到评论的回应：

```
grep word file|awk '{print NR}' 
```

# c - C 代码未按预期运行

> ID：13990439
> 
> 赞同：0
> 
> 时间：2012-12-21T12:43:43.120
> 
> 标签：c

我编写了一个简单的 c 程序来使用 newton-raphson 迭代技术找到 2、3、4、5 的平方根。此代码仅用于查找和显示 2 的平方根。之后它挂起。我无法弄清楚这段代码的问题：

```
# include<stdio.h>

    float square(float x);
    float absolutevalue(float x);

int main(void)
{
    printf("square root of 2 is %f\n", square(2));
    printf("square root of 3 is %f\n", square(3));
    printf("square root of 4 is %f\n", square(4));
    printf("square root of 5 is %f\n", square(5));

    return 0;
}

float square(float x)
{
    float epsilon = 0.0000001;
    float guess = 1;

    while (absolutevalue(guess*guess - x) >= epsilon)
        guess = ((x/guess) + guess) / 2;

    return guess;
}

float absolutevalue(float x)
{
    if (x < 0)
        x = -x;

    return x;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:23:34.853

如果你`float`用`double`任何地方替换一切都会正常工作。

# asp.net - 母版页的当前上下文中不存在控件

> ID：13990443
> 
> 赞同：3
> 
> 时间：2012-12-21T12:43:56.053
> 
> 标签：asp.net, master-pages

我在 asp.net 中有一个 Web 项目我有一个母版页，其中包含一个名为 的链接按钮`lkBtnUserFullName`，但是当我手动访问此控件时，我无法在其中`Page_Load`访问`Masterpage.master.cs` 此控件，我会遇到错误：

> 当前上下文中不存在名称 lkBtnUserFullName

我该如何解决这个问题？

**更新：**

我的代码：

```
<asp:LinkButton ToolTip="Please Click Here!" 
 ID="lkBtnUserFullName" PostBackUrl="~/admins/profile.aspx" 
  runat="server">Majid Basirati</asp:LinkButton></span> 
```

在：`Page_Load`_`MasterPage.master.cs`

```
lkBtnUserFullName.Text = Session["fullname"].ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:51:07.383

在解决方案资源管理器中右键单击您的母版页文件并选择**转换为 Web 应用程序**，它将为您重新生成 .designer 文件，您将再次能够从后面的代码访问所有母版页服务器控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T09:50:34.673

在当前母版页中自己创建一个新的 Default.Desiginer.cs 文件，并像这样创建一个部分类。

```
public partial class Site_Master {

    /// <summary>
    /// form1 control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    protected global::System.Web.UI.HtmlControls.HtmlForm form1;

    /// <summary>
    /// ContentPlaceHolder1 control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    /// 
    protected global::System.Web.UI.WebControls.Label lblName;

    /// <summary>
    /// btnSearchEmp control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    /// 

    protected global::System.Web.UI.WebControls.Label lblBranch;

    /// <summary>
    /// btnSearchEmp control.
    /// </summary>
    /// <remarks>
    /// Auto-generated field.
    /// To modify move field declaration from designer file to code-behind file.
    /// </remarks>
    protected global::System.Web.UI.WebControls.ContentPlaceHolder ContentPlaceHolder1;
} 
```

并在您的主 aspx 文件中添加此行 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="Site_Master" %> Inherits="Site_Master" 是您拥有的类名创建 . 然后您将能够访问 .cs 文件中的控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:39:22.023

这看起来像 Visual Studio 与设计器问题同步。我有过几次。通常我尝试以下操作：

从您的 aspx 中删除 Designer.cs 文件中不存在的所有服务器控件（不同步的控件）。然后删除后面的代码以成功构建，保存所有内容并重新启动 Visual Studio。

再试一次，它应该工作。

# ios - iOS6 日期格式差异

> ID：13990444
> 
> 赞同：1
> 
> 时间：2012-12-21T12:43:57.797
> 
> 标签：ios

我遇到了奇怪的问题

我得到了一个字符串日期：2012-12-09T20:15:00+1:00

![在此处输入图像描述](../Images/3d2fe64f66f53d53e27ed3f675f66d39.png)

我使用这个简单的日期格式化程序：

```
[dateFormat setDateFormat:@"yyyy-MM-dd'T'kk:mm:sszzz"];
visitDate = [dateFormat dateFromString:stringDate]; 
```

我在 iOS6 上得到日期，但在 iOS5 上没有。在两个系统上都可以工作的模式是什么。或者至少在 iOS5 上可以使用什么模式？

# javascript - 如何使用 jQuery 突出显示 RegEx 匹配项？

> ID：13990446
> 
> 赞同：6
> 
> 时间：2012-12-21T12:44:00.110
> 
> 标签：javascript, jquery, regex, match, highlight

以代码为基础，是否可以在不使用额外插件的情况下突出显示任何匹配的项目？

我想添加`style="backgorund: green;"`到找到项目的 div 中，以便我可以立即看到它们。

到目前为止我尝试过的事情都没有奏效，所以我希望来自我大脑之外的一些新想法会起到作用。

```
function finder(items){
    var needed = [
         /* items */
    ];
    var re = new RegExp(needed.join("|"), "i");
    return(items.match(re) != null);
}

var found = finder(document.body.innerHTML);
var output = found ? "found" : "not found";

if(output == 'found') {
    //highlight found array item
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:51:34.367

为什么要重新发明轮子？有现成的解决方案。例如，试试[这个插件](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)。这是插件的[源代码](http://johannburkard.de/resources/Johann/jquery.highlight-4.js)。它实际上是几行代码，所以如果您真的想编写自己的高亮引擎，您可以分析它以查看高亮是如何执行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:53:11.380

您可以尝试使用 replace()

```
for (var i = 0; i < needed.length; i++) {
    var word = needed[i];
    document.body.innerHTML = document.body.innerHTML.replace(word, '<span style="background: #00ff00">' + word + '</span>');
} 
```

在这里试试：http: [//jsfiddle.net/4kjuw/](http://jsfiddle.net/4kjuw/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-21T14:18:28.700

使用`innerHTML`是邪恶的，因为它会一次又一次地替换事件并触发 DOM 的生成。我建议使用现有的插件，因为你会遇到更多的陷阱。查看[mark.js](https://markjs.io/)以突出显示自定义正则表达式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T23:44:16.850

我稍微改变了我的代码并像这样解决了它：

```
function finder(items){
    var needed = [
         /* items */
    ];
    var reg = new RegExp(needed.join("|"), "i");
    var found = (textToCheck.match(reg) != null);
    var foundItem = textToCheck.match(reg);
    return [found,foundItem];
}

var found = finder(document.body.innerHTML)[0];
var foundItem = finder(document.body.innerHTML)[1];

if(found === true) {
    $('div:contains('+foundItem+')').css("background", "greenyellow");
} 
```

# jquery - jQuery Toggle Divs 使用 display:inline-block 彼此相邻

> ID：13990457
> 
> 赞同：1
> 
> 时间：2012-12-21T12:44:31.433
> 
> 标签：jquery, html

我有一个切换容器，默认情况下隐藏其内容。单击容器时，内容会使用 jQuery 中的 .toggle 滑入。

内容由三个相邻的 div 组成，并带有 display:inline-block 属性，以便它们显示在一行中。我遇到的问题是，在切换内容时，div 显示在彼此下方。当动画完成（接近完成）时，它们会连续出现。他们跳到最后的位置。是否可以从一开始就连续显示它们？

此致

编辑：这是 Jsfiddle 链接：http: [//jsfiddle.net/7Ly5b/](http://jsfiddle.net/7Ly5b/)

```
<div class="contentline">
<div class ="bege">
    <div class="parent">
         click
    </div>
    <div class="toggle">
        <div class="content">Höchster Sieg:</div>
        <div class="content">Höchster Sieg:</div>
        <div class="content">Höchster Sieg:</div>
        <div class="clear"></div>
    </div>

</div>
</div> 
```

我现在用 float 而不是 display:inline-block 尝试了它，但没有成功。好像宽度有问题。因为当我使用类容器删除 div 时，它就可以工作了。但我无法删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:51:20.413

也许最好提供您的 html 和 css 内容的示例。使用[http://jsfiddle.net/](http://jsfiddle.net/)

可能 jQuery 告诉他们在取消隐藏时显示块。我建议使用`float`而不是，`display-inline:block;`但是您可能需要清除它，因为在某些情况下它可能会以不好的方式影响您的布局。

如果我看到它，我可以给你更合适的建议

# c# - 常规 win8 应用程序失败 Direct3D Cert Kit

> ID：13990459
> 
> 赞同：0
> 
> 时间：2012-12-21T12:44:41.107
> 
> 标签：c#, xaml, windows-8, direct3d

我目前正在使用 SQLite 和 Telerik 的图表控件开发 C# & XAML 应用程序。当我尝试使用 WACK 套件运行认证时，我收到下面捕获的错误。但是，我不知道为什么会出现此错误，因为据我所知，我没有使用 Direct3D，而且我只在 Visual Studio 中创建了一个完全正常的 Store 应用程序，与游戏无关。帮助？:)

我想还值得一提的是，该应用程序将仅在 X86 上运行，而不是 ARM。

我还尝试在 Visual Studio 中创建一个新的基本项目，即使项目是“空的”，它也会出现相同的错误：
![在此处输入图像描述](../Images/16487c65dc47d229bbb6872194c94ec7.png)

有谁知道为什么？我还拔掉了我的第二台显示器，因为我看到有人说它会有所帮助 - 遗憾的是它没有。

# .net - 使用 RegEx 倒退

> ID：13990460
> 
> 赞同：1
> 
> 时间：2012-12-21T12:44:45.447
> 
> 标签：.net, regex, parsing, comments, key-value

我需要解析 iOS 的 *.strings 文件以获取带有注释的键/值对。例如：

```
/* comment */
"key" = "value"; 
```

一旦我找到了这条线并检查了它的有效性（我已经设法做到了），我需要捕获它和它之前的评论。

困难在于：

*   并非每一行之前都有注释，因此我无法捕获以 /* 开头并以分号结尾的整个块；
*   可能有下面一行的注释，但该行的格式可能无效，因此它应该连同它的注释一起被跳过。

所以我必须检测键/值行，然后如果存在就上去评论。

正则表达式可以倒退吗？

PS我正在使用.NET Framework来解析：

```
string[] lines = File.ReadAllLines(fileName);
foreach (string line in lines)
{
    string[] kvp = Regex.Split(line, "\"\\s+?=\\s+?\"");
    if (kvp.Length == 2 && kvp[0].StartsWith("\"") && kvp[1].EndsWith("\";"))
    {
        DataRow row = table.NewRow();
        row["name"] = kvp[0].TrimStart('"');
        row["text"] = kvp[1].Substring(0, kvp[1].Length - 2);
        row["fileId"] = fileId;
        table.Rows.Add(row);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:55:55.107

您可以在一个正则表达式中完成所有这些操作：

```
Match match = null;
match = Regex.Match(subject, 
    @"(?<=           # Look behind to make sure that there is a comment before:
    (?:              # Try to match...
     /\*             # /*
     (?<comment>     # Capture the comment in the group 'comment'
      (?:            # Match...
       (?!\*/)       # (as long as it's not '*/')
       .             # any character.
      )*             # Repeat as needed.
     )               # End of group 'comment'
     \*/             # Match */
    )?               # Make the whlo comment optional
     \s*             # Match whitespace, including newlines
    )                # End of lookbehind assertion
    ^                # Match the start of the line
    ""               # Match a quote
    (?<name>[^""]*)  # Capture any number of non-quote characters into group 'name'
    ""\s*=\s*""      # Match quote - equals - quote, with optional whitespace
    (?<value>[^""]*) # Capture any number of non-quote characters into group 'text'
    "";              # Match the closing quote and semicolon", 
    RegexOptions.Singleline | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace);
row["name"] = match.Groups["name"];
row["text"] = match.Groups["text"];
row["comment"] = match.Groups["comment"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:59:00.603

正则表达式永远不会倒退，即使您要执行类似`.+$`. 但是你可以让它看起来好像它们是向后工作的。但是，这对于此任务并不是真正必要的。

您可以使用以下正则表达式：

```
/^(?<comment>(?:\/\*(?:(?!\*\/).)*\*\/)?\s*)(?<key>"(?:\\.|[^"])+")\s*=\s*(?<value>"(?:\\.|[^"])+")\s*;/gms 
```

（不确定您是否需要.net 中的分隔符和全局标志）

所以基本上，第一个反向引用将保留评论。第二个将保存密钥，第三个将保存值。如果您对键/值完全不感兴趣，则可以通过将最后两个反向引用合并为一个来进一步简化正则表达式。

您现在拥有所需的所有数据。只需相应地更换。如果第一个反向引用包含一个`null`值，您就知道该行上方没有注释。

演示+说明：[http ://regex101.com/r/xN1uQ4](http://regex101.com/r/xN1uQ4)

询问是否有任何不清楚的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-07T14:15:15.733

您甚至可以将搜索的起点设置为向后看：RegexOptions.RightToLeft

# java - 只接受部分类的通用方法

> ID：13990462
> 
> 赞同：20
> 
> 时间：2012-12-21T12:44:49.097
> 
> 标签：java, generics, inheritance

假设我有以下类结构：

```
class Base {}
class A extends Base {}
class B extends Base {}
class C extends Base {} 
```

我想编写方法，它接受*A*和*B*的实例，但不接受*C*的实例。
我可以用Java实现吗？

我知道这不是很好的继承情况（*A*和*B应该有与**C*不同的共同父级），但我只是好奇用 Java 方式来处理这种情况。

**编辑：**
！！！
我知道更好的继承会解决问题。我只是好奇，如果 Java 有一些标准机制来解决这样的问题。
！！！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-21T12:47:22.310

使用一个[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)`A`并且只有`B`实现它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-21T12:48:47.883

可以用接口吗？例如

```
class Base {}
interface MyGenericInterface {}
class A extends Base implements MyGenericInterface {}
class B extends Base implements MyGenericInterface {}
class C extends Base {} 
```

这样，该方法可以接受 MyGenericInterface 的实现，并且由于 A 和 B 实现了接口但 C 没有实现，因此它将根据需要接受 A 和 B 的实例，但不接受 C。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-21T12:49:07.557

如果某些东西应该接受`A`，`B`但不是，`C`那么您应该重新考虑为什么`C`要从一开始继承`Base`。您可以添加额外的继承层：

```
 ---Base---
   |        |
--Sub--     C
|     |
A     B 
```

然后你可以让你的方法只接受 type 的对象`Sub`。`Sub`甚至不需要做任何事情，从技术上讲，它们都是`Base`。

一个更快的解决方案将是一个肮脏的`if( arg.instanceof(C) )`...

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-21T12:49:16.653

您可以在运行时使用异常处理它：

```
void genericMethod(Base arg_in)
{
    if(arg_in instanceof C)
    {
        throw IllegalArgumentException("C class not accepted."); 
    }

    ...
    ...
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-21T13:11:13.483

不应该仅仅因为你想要这样的方法而改变类型层次结构。但是，如果您希望使用这种方法，则可能表明您应该考虑您的类型层次结构。

但是，如果您确定您的类型设计得很好，那么这种方法怎么样：

```
 public class T {

        public void doSomething(final A a) {
            doSomthing(a);
        }

        public void doSomething(final B b) {
            doSomthing(b);
        }

        private void doSomthing(final Base b) {

            // Here is the implementation

        }

    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-21T13:16:54.993

我想您的问题的答案是“不，java 没有处理此类问题的标准方法”。如果你有这个问题，那么你可以在这里查看其他答案，比如修复继承或使用[MrSmith42 给出](https://stackoverflow.com/a/13990845/866022)的聪明技术。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-21T12:47:02.747

您可以使用它`instanceof`来检查对象是否属于某种类型。

当然，更好的想法是更好的继承结构。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-21T19:48:00.377

泛型是为了类型安全。时期。不要“允许”或“禁止”任意事情。没有类型安全的理由来允许 A 和 B 而不是 C。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-18T06:39:54.437

**试试下面的片段**

```
public <T extends Base> void setAuditorDetails(T model) 
{
         if(!(T instanceof C)){

              // Your Business logic

         }
} 
```

# python - 3d Numpy 数组到 2d

> ID：13990465
> 
> 赞同：29
> 
> 时间：2012-12-21T12:44:53.413
> 
> 标签：python, numpy, multidimensional-array

我有一个像这样的 3d 矩阵

```
arange(16).reshape((4,2,2))
array([[[ 0,  1],
        [ 2,  3]],

        [[ 4,  5],
        [ 6,  7]],

        [[ 8,  9],
        [10, 11]],

        [[12, 13],
        [14, 15]]]) 
```

并希望以网格格式堆叠它们，最终得到

```
array([[ 0,  1,  4,  5],
       [ 2,  3,  6,  7],
       [ 8,  9, 12, 13],
       [10, 11, 14, 15]]) 
```

有没有一种方法可以不显式地对它们进行 hstacking（和/或 vstacking）或添加额外的维度和重塑（不确定这是否可行）？

谢谢，

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-21T12:56:55.233

```
In [27]: x = np.arange(16).reshape((4,2,2))

In [28]: x.reshape(2,2,2,2).swapaxes(1,2).reshape(4,-1)
Out[28]: 
array([[ 0,  1,  4,  5],
       [ 2,  3,  6,  7],
       [ 8,  9, 12, 13],
       [10, 11, 14, 15]]) 
```

* * *

我已经发布了更通用的函数，用于[将数组重新整形/取消整形为块，here](https://stackoverflow.com/a/16873755/190597)。

# c# - 如何通过 XAML 将 WPF 中的小写字母转换为大写字母？

> ID：13990468
> 
> 赞同：3
> 
> 时间：2012-12-21T12:44:59.563
> 
> 标签：c#, wpf, xaml, textbox, lowercase

我尝试在 WPF 中通过 XAML 将大写字母转换为小写字母，如下所示：

```
<TextBox Height="86" CharacterCasing="Upper"/> 
```

我想用`TextBlock`,`Label`和实现相同的场景`Button`。

我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-08T10:53:34.373

您应该使用值转换器：

```
public class ToUpperValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var str = value as string;
        return string.IsNullOrEmpty(str) ? string.Empty : str.ToUpper();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T15:23:42.357

一种方法是使用`NotifyOnTargetUpdated`和处理`TextChanged`事件。

XAML

```
<TextBlock Name="TB" Text="{Binding Path=YourProperty, NotifyOnTargetUpdated=True}"
               TargetUpdated="TB_TargetUpdated" /> 
```

背后的代码

```
private void TB_TargetUpdated(object sender, DataTransferEventArgs e)
{
   TB.Text = TB.Text.ToUpper();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:08:44.590

看看那个：[如何使所有文本大写/大写？](https://stackoverflow.com/questions/1762485/wpf-xaml-how-to-make-all-text-upper-case-capital).

更一般地说，每次您想将一个值转换为控件时，请考虑一个转换器并自己编写它（或者如果它已经存在，则使用它）。

您可以在此处找到有关转换器的其他文档：[http](http://wpftutorial.net/ValueConverters.html) ://wpftutorial.net/ValueConverters.html 。

# google-apps-script - 将文档从一个文档帐户移动到另一个文档帐户

> ID：13990473
> 
> 赞同：1
> 
> 时间：2012-12-21T12:45:13.277
> 
> 标签：google-apps-script

是否可以使用同一域中的 Google 应用脚本将某些文档从一个 Google 帐户移动到另一个 Google 帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T06:15:15.707

我确信本教程和示例代码将帮助您使用 Google Apps 脚本实现这一目标。

[https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth/share-docs-between-domain-users](https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth/share-docs-between-domain-users)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:52:57.927

使用 Apps 脚本[文件服务](https://developers.google.com/apps-script/class_file)，您可以[将文档共享](https://developers.google.com/apps-script/class_file#addEditor)给个人或将文档复制[到共享文件夹](https://developers.google.com/apps-script/class_file#addToFolder)中，但要更改所有者，您必须通过 REST/OAuth使用 Drive [Permissions API 。](https://developers.google.com/drive/v2/reference/permissions)您可以使用[UrlFetch](https://developers.google.com/apps-script/service_urlfetch)通过 Apps 脚本执行此操作，但这需要更多繁重的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T04:10:22.303

似乎有一个图书馆。我在 Google+ 上找到了以下内容

Drive Romain Vialard，2012 年 12 月

此服务提供对 Drive Service (DocsList) 新方法的访问。目前，用户可以获取和添加文档评论者+转让所有权。

[https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/driveservice](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/driveservice)

类文件

会员类型说明

addComenter String 向给定文件添加评论者。getCommenters String 返回给定文件的所有评论者。getEditors String 返回给定文件的所有编辑器。getLastModifiedByMe Date 返回当前用户上次修改此文档的日期。getLastViewed Date 返回任何用户上次在 Web 浏览器中查看此文档的日期。getOwner String 返回给定文件的所有者。getViewers String 返回给定文件的所有查看器。 **transferOwnership String 将所有权转让给同一域中的另一个用户**

# vb6 - 使用 64 位操作系统的 VB6 应用程序开发

> ID：13990474
> 
> 赞同：0
> 
> 时间：2012-12-21T12:45:14.617
> 
> 标签：vb6, 32bit-64bit, visual-studio-6

我公司期待安装 64 位开发 PC。许多当前的项目/应用程序都是用 VB6 编写的，并且没有任何将它们升级到 .NET 的计划。

当前的 VB6 应用程序是在 32 位架构上编写的，当将这些应用程序安装到 64 位 PC 上时，它们都运行良好，经过一些调整以确保应用程序写入/读取正确的注册表位置（例如 SysWOW64）和“程序文件的目录（ee Program Files (x86)）。

我的理解是 Visual Studio 6 是 32 位软件并在 64 位操作系统上运行（使用 Windows 上的 32 位层 - WOW）。Visual Studio 6 将始终作为 32 位软件运行。

我可以编译 VB6 应用程序以作为/目标 32 位和 64 位架构运行吗？

此链接的有效性如何：[http ://www.javaxt.com/Tutorials/Visual_Studio/Compiling_64_bit_apps_using_Visual_Studio_6_and_Windows_Platform_SDK](http://www.javaxt.com/Tutorials/Visual_Studio/Compiling_64_bit_apps_using_Visual_Studio_6_and_Windows_Platform_SDK)

请有人提供几个有用的链接，我可以从我的问题中获得参考。提前致谢。

JFB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:29:57.940

您提供的链接仅指 Visual C++ 6.0。

您不能使用 VB6 创建 64 位程序。

Windows 7 64 位不支持 VB6 IDE，但您可以让它工作。[请参阅此问题](https://stackoverflow.com/questions/2501061/does-the-vb6-ide-run-on-windows-7-64-bit)的答案中的有趣提示以及有关如何在[此博客](http://geekswithblogs.net/bosuch/archive/2010/11/16/installing-visual-basic-6.0-on-windows-7.aspx)中安装它的详细信息。

我有支持在 Windows 7 上运行的 VB6 程序的个人经验，正如您自己所说，它工作得很好。然而，就我个人而言，我使用旧的 XP 机器作为 VB6 开发机器，主要是因为我有一个安装了所有工具的机器 :-)。

# sql-server-2012 - 恢复到不在域上的新机器后的孤立用户；了解KB918992

> ID：13990477
> 
> 赞同：0
> 
> 时间：2012-12-21T12:45:25.740
> 
> 标签：sql-server-2012, database-restore, sid, orphaned-objects

寻求澄清/确认：如果我理解正确，以下关于“孤立用户”的注意事项仅适用于与 Windows 网络安全主体相关联的用户；当数据库恢复到不在原始网络上的另一台计算机并且运行 sp_help_rev_login 脚本时，与“纯”SQL Server 登录关联的用户不会成为孤立用户。是对的吗？

来自[http://support.microsoft.com/kb/918992](http://support.microsoft.com/kb/918992)：

> 如果服务器 A 和服务器 B 在不同的域中，则必须更改输出脚本。然后，您必须在 CREATE LOGIN 语句中使用新域名来替换原始域名。在新域中被授予访问权限的集成登录名与原始域中的登录名不具有相同的 SID。因此，用户与这些登录无关。有关如何解决这些孤立用户的详细信息，请单击以下文章编号以查看 Microsoft 知识库中的文章： 240872 在运行 SQL Server 的服务器之间移动数据库时如何解决权限问题 如果服务器 A 和服务器 B在同一个域中，使用相同的 SID。因此，用户不太可能成为孤儿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:27:25.740

不，您在使用 SQL 登录时也会遇到同样的问题。当您将数据库恢复到新服务器时，只会恢复该数据库中的用户，如果新服务器上不存在具有匹配 SID 的登录名，则数据库中的这些用户，无论是 Windows 用户还是 SQL 用户都将被孤立。

# asp.net - 使用asp.net网页将静态文本/图像文件上传到ms access数据库

> ID：13990478
> 
> 赞同：0
> 
> 时间：2012-12-21T12:45:35.273
> 
> 标签：asp.net, ms-access, file-upload

我想将带有 ms 访问数据库的文件上传功能上传到 asp.net Web 应用程序中。有什么方法可以同时满足要求吗？我尝试了一些外部资源，但未能获得我想要实现的确切功能。场景是：一个 asp.net 网页具有文件上传功能和 ms 访问数据库连接，以便我可以将文件直接存储到 . mdb 数据库文件，并且必须早于 ms access 2007 即在 .mdb 文件中，或者我们可以说使用 JET 4.0 引擎。任何形式的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T16:59:13.537

访问[http://www.stardeveloper.com/articles/display.html?article=2003031201&page=1](http://www.stardeveloper.com/articles/display.html?article=2003031201&page=1)

那是答案的最终解决方案...谢谢大家

# visual-c++ - 0xC0000005 - 访问冲突（每次来自不同的 dll）

> ID：13990479
> 
> 赞同：4
> 
> 时间：2012-12-21T12:45:42.273
> 
> 标签：visual-c++, dll, access-violation

我被赋予了调试 C++ 项目的任务。我在这个项目中没有写过一行代码！！

这个项目执行大约 5 分钟没有问题。然后它以异常“EITos.exe 中（某些 .dll 名称）处的未处理异常：0xC0000005：访问冲突读取位置”结束

现在每次我执行程序。该错误来自不同的dll。有时是其他程序员创建的dll，有时与QT有关。所以我认为这不是代码问题。是否有任何项目设置会影响这一点？

我正在询问有关如何调试此问题的一些一般提示和提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:40:30.600

使用 DLL 时的一个常见问题是在 DLL 中分配内存并在其他地方（在另一个 DLL 或主可执行文件中）取消分配。我认为你的问题可能来自类似的东西。

一种快速的解决方案是对`/MD`您正在使用的所有项目使用编译器标志。此选项指定运行时库应动态链接到可执行文件，以便在 dll 之间使用相同的分配器/解除分配器。[你可以在这里](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.71%29.aspx)阅读更多关于它的信息。

另外，请注意这一点：

> 不要混合运行时库的静态和动态版本。在一个进程中拥有多个运行时库副本可能会导致问题，因为一个副本中的静态数据不与另一个副本共享。链接器会阻止您在一个 .exe 文件中同时链接静态和动态版本，但您仍然可以得到两个（或更多）运行时库副本。例如，与运行时库的静态（非 DLL）版本链接的动态链接库在与运行时库的动态 (DLL) 版本链接的 .exe 文件一起使用时可能会导致问题. （您还应该避免在一个进程中混合库的调试和非调试版本。）

另一种方法是不在一个 dll 中分配内存并在另一个中取消分配。所以你可以检查代码，最终重新编写它。但这更耗时。

# spring - Spring web 的 Jboss7 和 Log4j 配置问题

> ID：13990480
> 
> 赞同：2
> 
> 时间：2012-12-21T12:45:45.540
> 
> 标签：spring, log4j, jboss7.x

*1。我创建了 IMPLogger 接口 -> 必须由 Logger 实现类继承。2.创建MPLoggerImpl

```
 public class MPLoggerImpl implements IMPLogger
    `{
    private Logger logger;

     private static String MDC_CLASS = "Class";
     private static String MDC_METHOD = "Method";
     private static String MDC_USER = "User";

     private String loggerName = null;
     private LogConfigLocator logConfigLocator = null;

     public MPLoggerImpl(String loggerName, LogConfigLocator logConfigLocator)
     {
     this.loggerName = loggerName;
     this.logConfigLocator = logConfigLocator;
     loadLogInstance();
     }

    public MPLoggerImpl(String loggerName)
    {
    this.loggerName = loggerName;
    loadLogInstance();
    }

   public MPLoggerImpl(Logger logger)
   {
    this.logger = logger;
   }

   private void loadLogInstance()
   {
   //PropertyConfigurator.configure(loggerConfigFilePath);

  if (!AppRepositorySelector.isAppRepositoryInitialized())
   {
     AppRepositorySelector.init(logConfigLocator.getLog4jXMLPath());
   }

   logger = Logger.getLogger(loggerName);
   }

    public void log( int level, String msg )
   {
    log(level, msg, null);
   }

   public void log( int level, String curClass, String method, String msg, Throwable   throwable )
   {
  addFieldValueToLogMessage(MDC_CLASS, curClass);
  addFieldValueToLogMessage(MDC_METHOD, method);

    log(level, msg, throwable);

    resetMDC();
   }

 public void log( int level, String curClass, String method, String msg )
 {
  addFieldValueToLogMessage(MDC_CLASS, curClass);
  addFieldValueToLogMessage(MDC_METHOD, method);

  log(level, msg);

  /**
   * To remove all the key/values set so as to not affect the next log message. 
   */
  resetMDC();
}

  public void log(int level, String user, String curClass, String method, String msg)
  {
  addFieldValueToLogMessage(MDC_CLASS, curClass);
  addFieldValueToLogMessage(MDC_METHOD, method);
  addFieldValueToLogMessage(MDC_USER, user);

  log(level, msg);
  /**
   * To remove all the key/values set so as to not affect the next log message. 
   */
  resetMDC();
  }

   public void log(int level, String user, String curClass, String method, String msg, 
  {
  addFieldValueToLogMessage(MDC_CLASS, curClass);
  addFieldValueToLogMessage(MDC_METHOD, method);
  addFieldValueToLogMessage(MDC_USER, user);

  log(level, msg, excep);   

  /**
   * To remove all the key/values set so as to not affect the next log message. 
   */
  resetMDC();
 }

  public void log( int level, String msg, Throwable throwable )
 {
  switch (level)
  {
     case IMPLogger.TRACE:
        logger.trace(msg);
        break;
     case IMPLogger.DEBUG:
        if (throwable != null)
        {
           logger.debug(msg, throwable);
        }
        else
        {
           logger.debug(msg);
        }
        break;
     case IMPLogger.INFO:
        if (throwable != null)
        {
           logger.info(msg, throwable);
        }
        else
        {
           logger.info(msg);
        }
        break;
     case IMPLogger.WARN:
        if (throwable != null)
        {
           logger.warn(msg, throwable);
        }
        else
        {
           logger.warn(msg);
        }
        break;
     case IMPLogger.ERROR:
        if (throwable != null)
        {
           logger.error(msg, throwable);
        }
        else
        {
           logger.error(msg);
        }
        break;
     case IMPLogger.FATAL:
        if (throwable != null)
        {
           logger.fatal(msg, throwable);
        }
        else
        {
           logger.fatal(msg);
        }
        break;
     default:
        //System.out.println("Invalid Level, Please specify the level from the       CDMLogger interface.");
        break;
  } 
```

}

```
 public void addFieldValueListToLogMessage( Map<String, Object> mdcMap )
 {
  if (mdcMap != null && mdcMap.size() > 0)
  {
     Iterator<String> itr = mdcMap.keySet().iterator();
     while (itr.hasNext())
     {
        String key = itr.next();
        Object value = mdcMap.get(key);
        MDC.put(key, value);
     }
   }
 }

  public void removeFieldValueForLogMessage( String key )
 {
  MDC.remove(key);
 }
   /**
   * Removes all the Keys values which will be reflected in the next log message call.
  * 
   */
   public void resetMDC()
  {
   Enumeration<String> keyItr = MDC.getContext().keys();

    while (keyItr.hasMoreElements())
  {
     MDC.remove(keyItr.nextElement());
  }
  }

    public void reloadLogger()
   {
   loadLogInstance();
   }`

    3.created LogConfigLocator
   public class LogConfigLocator
   {

   private String log4jXMLPath = null;
    public LogConfigLocator(String log4jXMLPath )
  {
   this.log4jXMLPath = log4jXMLPath;
  }

public String getLog4jXMLPath()
{
   return log4jXMLPath;
}

public void setLog4jXMLPath(String log4jXMLPath)
{
   this.log4jXMLPath = log4jXMLPath;
  }
  } ` 
```

4.最后我创建的 Apprepositry 选择器

```
 public class AppRepositorySelector implements RepositorySelector
'{
private static boolean initialized = false;
private static Object guard = LogManager.getRootLogger();

 public static synchronized void init(String log4jXMLPath) //throws ServletException
 {
   try
  {
     if (!initialized) // set the global RepositorySelector
     {
        defaultRepository = LogManager.getLoggerRepository();
        RepositorySelector theSelector = new AppRepositorySelector();
        LogManager.setRepositorySelector(theSelector, guard);
        initialized = true;
     }
     Hierarchy hierarchy = new Hierarchy(new RootLogger(Level.DEBUG));
     //loadLog4JConfig(servletContext, hierarchy);
     loadLog4JConfig(hierarchy, log4jXMLPath);
     ClassLoader loader = Thread.currentThread().getContextClassLoader();
     repositories.put(loader, hierarchy);
  }
  catch (Exception e)
  {
     System.out.println("Exception while initializing AppRepositorySelector.");
     e.printStackTrace();
  }
 }

 public static synchronized void removeFromRepository()
{
  repositories.remove(Thread.currentThread().getContextClassLoader());
 }
     private static void loadLog4JConfig (Hierarchy hierarchy, String log4jXMLPath) throws Exception
   {
  try
  {
     InputStream log4JConfig = new FileInputStream(log4jXMLPath);
     Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(log4JConfig);
     DOMConfigurator conf = new DOMConfigurator();
     conf.doConfigure(doc.getDocumentElement(), hierarchy);
   }
  catch (Exception e)
   {
     throw new Exception(e);
  } 
```

}

```
 public static boolean isAppRepositoryInitialized()
   {
  return initialized;
  }
   private AppRepositorySelector()
 {
   }
   public LoggerRepository getLoggerRepository()
   {
    ClassLoader loader = Thread.currentThread().getContextClassLoader();
  LoggerRepository repository = (LoggerRepository) repositories.get(loader);
  if (repository == null)
  {
     return defaultRepository;
  }
  else
  {
     return repository;
  }
  }
   }`
enter code here 
```

但是在 My AppRepositorySelector 下面的行中抛出异常 LogManager.setRepositorySelector(theSelector, guard); 堆栈跟踪是

```
 18:17:11,189 ERROR [stderr] (MSC service thread 1-2)   java.lang.IllegalArgumentException: Attempted to reset the LoggerFactory without possessing the guard.
   18:17:11,190 ERROR [stderr] (MSC service thread 1-2)   at org.apache.log4j.LogManager.setRepositorySelector(LogManager.java:164)
  18:17:11,191 ERROR [stderr] (MSC service thread 1-2)   at com.mportal.logger.api.AppRepositorySelector.init(AppRepositorySelector.java:73)
  18:17:11,192 ERROR [stderr] (MSC service thread 1-2)   at com.mportal.logger.api.MPLoggerImpl.loadLogInstance(MPLoggerImpl.java:64)
  18:17:11,192 ERROR [stderr] (MSC service thread 1-2)   at com.mportal.logger.api.MPLoggerImpl.<init>(MPLoggerImpl.java:38)
  18:17:11,192 ERROR [stderr] (MSC service thread 1-2)   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 18:17:11,193 ERROR [stderr] (MSC service thread 1-2)   at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
  18:17:11,194 ERROR [stderr] (MSC service thread 1-2)   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
 18:17:11,194 ERROR [stderr] (MSC service thread 1-2)   at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
 18:17:11,195 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:84)
  18:17:11,197 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
  18:17:11,198 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
   18:17:11,198 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:893)
    18:17:11,199 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:803)
    18:17:11,200 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:437)
     18:17:11,200 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:404)
      18:17:11,201 ERROR [stderr] (MSC service thread 1-2)   at java.security.AccessController.doPrivileged(Native Method)
      18:17:11,201 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:375)
      18:17:11,202 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:263)
     18:17:11,204 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:170)
    18:17:11,205 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:260)
    18:17:11,205 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:184)
    18:17:11,206 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:163)
   18:17:11,206 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
   18:17:11,207 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
  18:17:11,207 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1210)
    18:17:11,208 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:978)
     18:17:11,209 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:462)
   18:17:11,209 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:404)
   18:17:11,210 ERROR [stderr] (MSC service thread 1-2)   at java.security.AccessController.doPrivileged(Native Method)
    18:17:11,210 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:375)
    18:17:11,211 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:263)
    18:17:11,211 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:170)
    18:17:11,212 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:260)
    18:17:11,212 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:184)
   18:17:11,215 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:163)
   18:17:11,215 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:430)
 18:17:11,216 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729)
 18:17:11,218 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381)
  18:17:11,220 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:254)
  18:17:11,221 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:198)
  18:17:11,224 ERROR [stderr] (MSC service thread 1-2)   at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
 18:17:11,225 ERROR [stderr] (MSC service thread 1-2)   at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392)
18:17:11,225 ERROR [stderr] (MSC service thread 1-2)   at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850)
18:17:11,226 ERROR [stderr] (MSC service thread 1-2)   at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90)
18:17:11,227 ERROR [stderr] (MSC service thread 1-2)   at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
 18:17:11,227 ERROR [stderr] (MSC service thread 1-2)   at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
18:17:11,228 ERROR [stderr] (MSC service thread 1-2)   at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
18:17:11,228 ERROR [stderr] (MSC service thread 1-2)   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
18:17:11,229 ERROR [stderr] (MSC service thread 1-2)   at java.lang.Thread.run(Thread.java:662) 
```

Spring xml 是 Log4J xml 是 </logger -->

请任何人帮我解决这个问题*

# android - 在android的谷歌地图中查找从一个地方到另一个地方的路线？

> ID：13990482
> 
> 赞同：0
> 
> 时间：2012-12-21T12:46:03.967
> 
> 标签：android, google-maps, routes

当我运行此代码时，它显示错误。请帮帮我。我试图在安卓操作系统的谷歌地图中找到从一个地方到另一个地方的路线。

我已经提交了我所有的代码。我想我不需要提交我的 xml 布局代码。比方说，它只是地图视图。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screenfive);
    coder = new Geocoder(this);
    EditText startedit =(EditText) findViewById(R.id.startedit);
    EditText finishedit =(EditText) findViewById(R.id.finishedit);
    Button go=(Button) findViewById(R.id.go);
    Spinner spinnercategory = (Spinner) findViewById (R.id.spinnercategory);
    Category =(TextView) findViewById(R.id.category);

    mapView = (MapView) findViewById(R.id.mymapview2);
    mapView.setBuiltInZoomControls(true);
    mMapController = mapView.getController();
    //          mMapController.setZoom(18);
    // Two points in Mexico about 1km apart

            //Take any two points

    GeoPoint point1 = new GeoPoint(19240000,-99120000);
    GeoPoint point2 = new GeoPoint(19241000,-99121000);

    mMapController.setCenter(point2);
    // Pass the geopoints to the overlay class
    mapOvlay = new MapOverlay(point1, point2);
    mapView.getOverlays().add(mapOvlay);
    spinnercategory.setOnItemSelectedListener(this);

    ArrayAdapter aa=new ArrayAdapter(this, android.R.layout.simple_spinner_item,category);
    aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnercategory.setAdapter(aa);
    go.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            new GetLatLong().execute();

        }
    });

}

public void onItemSelected(AdapterView<?> parent, View v, int position,
        long id) {
    //          Category.setText(category[position]);

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
public class MapOverlay extends com.google.android.maps.Overlay {

    private GeoPoint mGpt1;
    private GeoPoint mGpt2;

    protected MapOverlay(GeoPoint gp1, GeoPoint gp2 ) {
        mGpt1 = gp1;
        mGpt2 = gp2;
    }
    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        super.draw(canvas, mapView, shadow);
        Paint paint;
        paint = new Paint();
        paint.setColor(Color.BLUE);
        paint.setAntiAlias(true);
        paint.setStyle(Style.STROKE);
        paint.setStrokeWidth(2);
        Point pt1 = new Point();
        Point pt2 = new Point();
        Projection projection = mapView.getProjection();
        projection.toPixels(mGpt1, pt1);
        projection.toPixels(mGpt2, pt2);
        canvas.drawLine(pt1.x, pt1.y, pt2.x, pt2.y, paint);
        return true;
    }

    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
}

class GetLatLong extends AsyncTask<String, Void, String>
{

protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    ProgressDialog=new ProgressDialog(MapActivityForScreen5.this);
    ProgressDialog.setTitle("Loading");
    ProgressDialog.show();
}

    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub

        try{
            addressgone = coder.getFromLocationName(startedit.getText().toString(),5);
            if (addressgone == null) {

            }
            Address locationgone = addressgone.get(0);
            locationgone.getLatitude();
            locationgone.getLongitude();

            pone = new GeoPoint((int) (locationgone.getLatitude() * 1E6),
                    (int) (locationgone.getLongitude() * 1E6));
        }
        catch(Exception e)
        {

        }

        try{
            addressgtwo = coder.getFromLocationName(startedit.getText().toString(),5);
            if (addressgtwo == null) {

            }
            Address locationgtwo = addressgtwo.get(0);
            locationgtwo.getLatitude();
            locationgtwo.getLongitude();

            ptwo = new GeoPoint((int) (locationgtwo.getLatitude() * 1E6),
                    (int) (locationgtwo.getLongitude() * 1E6));
        }
        catch(Exception e)
        {

        }

        return null;
    }
    @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            ProgressDialog.cancel();

            mMapController.setCenter(ptwo);
            // Pass the geopoints to the overlay class
            mapOvlay = new MapOverlay(pone, ptwo);
            mapView.getOverlays().add(mapOvlay);
        }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:09:33.703

从工作线程访问 UI 组件是一种糟糕的编程实践。`AsyncTask`工作线程独立于 UI 线程运行，它们可能无法访问 textView 并因此`startedit.getText().toString()`返回 null。

好的风格是你在`execute()`方法中传递这些值，所以试试

```
`new GetLatLong().execute(startedit.getText().toString());` 
```

在 中`doInBackground(String... params)`，正确的实现将是

```
 String value=params[0];
try{
        addressgone = coder.getFromLocationName(value,5);
        if (addressgone == null) {

 }`... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:11:59.623

**最后我做到了。**我发布这个答案是为了对你有用。我通过使用 JSON（在 EditText 中获取纬度和经度）来做到这一点，并使用谷歌地图服务绘制了 2 个地方之间的路线。

**这是代码：**

```
 JSONObject jsonObjectto = getLocationInfo(ToEditTextt.getText().toString());
                JSONObject jsonObjectfrom = getLocationInfo(FromEditTextt.getText().toString());
                Log.v("P1 Value",jsonObjectto+"");
                getLatLongto(jsonObjectto);
                getLatLongfrom(jsonObjectfrom);
                try{
                    gp1 = new GeoPoint((int) (latittudefrom * 1E6),
                            (int) (longittutefrom * 1E6));

                    gp2 = new GeoPoint((int) (latittudeto * 1E6),
                            (int) (longittuteto * 1E6));

                    Log.v("To Value",gp2+"");

                    Log.v("From Value",gp1+"");
                    try{
                        mode=Modes.drivingmode;
                        if(routeoverlayy!=null){
                            mapView.getOverlays().remove(routeoverlayy);
                        }

                        if(gp1!=null && gp2!=null){
                            Route route = directions(gp1, gp2,mode);

                            routeoverlayy = new RouteOverlay(route, Color.BLUE);
                            mapView.postInvalidate();
                            //                                      routeOverlay.redrawPath(mMapView);
                            mapView.postInvalidate();
                            mapcontrol.setCenter(gp1);
                            mapcontrol.setZoom(10);

                            mapcontrol.animateTo(gp1);
                            mapView.getOverlays().add(routeoverlayy);
                            pw.dismiss();
                        }
                    }
                    catch(Exception e){

                    }
                }
                catch(Exception e)
                {

                }

                // search pressed and perform your functionality.  
                return true;
            } 
            /*InputMethodManager
              imm=(InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);

              imm.hideSoftInputFromWindow(.getWindowToken(), 0); */
            return false; 
        }

    });
}

public static JSONObject getLocationInfo(String address) {
    StringBuilder stringBuilder = new StringBuilder();
    try {

        address = address.replaceAll(" ","%20");    

        HttpPost httppost = new HttpPost("http://maps.google.com/maps/api/geocode/json?address=" + address + "&sensor=false");
        HttpClient client = new DefaultHttpClient();
        HttpResponse response;
        stringBuilder = new StringBuilder();

        response = client.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return jsonObject;
}
public static boolean getLatLongto(JSONObject jsonObject) {

    try {

        longittuteto = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                .getJSONObject("geometry").getJSONObject("location")
                .getDouble("lng");

        Log.v("Longitude", longittuteto+"");

        latittudeto = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                .getJSONObject("geometry").getJSONObject("location")
                .getDouble("lat");

        Log.v("Latitude", latittudeto+"");

    } catch (JSONException e) {
        return false;

    }

    return true;
}

public static boolean getLatLongfrom(JSONObject jsonObject) {

    try {

        longittutefrom = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                .getJSONObject("geometry").getJSONObject("location")
                .getDouble("lng");

        Log.v("Longitude", longittutefrom+"");

        latittudefrom = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
                .getJSONObject("geometry").getJSONObject("location")
                .getDouble("lat");

        Log.v("Latitude", latittudefrom+"");

    } catch (JSONException e) {
        return false;

    }

    return true;
}

public class RouteOverlay extends Overlay{

    /** GeoPoints representing this routePoints. **/
    private final List<GeoPoint> routePoints;
    /** Colour to paint routePoints. **/
    private int colour;
    /** Alpha setting for route overlay. **/
    private static final int ALPHA = 120;
    /** Stroke width. **/
    private static final float STROKE = 4.5f;
    /** Route path. **/
    private final Path path;
    /** Point to draw with. **/
    private final Point p;
    /** Paint for path. **/
    private final Paint paint;

    /**
     * Public constructor.
     * 
     * @param route Route object representing the route.
     * @param defaultColour default colour to draw route in.
     */

    public RouteOverlay(final Route route, final int defaultColour) {
        super();
        routePoints = route.getPoints();
        colour = defaultColour;
        path = new Path();
        p = new Point();
        paint = new Paint();
    }

    @Override
    public final void draw(final Canvas c, final MapView mv,
            final boolean shadow) {
        super.draw(c, mv, shadow);

        paint.setColor(colour);
        paint.setAlpha(ALPHA);
        paint.setAntiAlias(true);
        paint.setStrokeWidth(STROKE);
        paint.setStyle(Paint.Style.STROKE);

        redrawPath(mv);
        c.drawPath(path, paint);
    }

    /**
     * Set the colour to draw this route's overlay with.
     * 
     * @param c  Int representing colour.
     */
    public final void setColour(final int c) {
        colour = c;
    }

    /**
     * Clear the route overlay.
     */
    public final void clear() {
        routePoints.clear();
    }

    /**
     * Recalculate the path accounting for changes to
     * the projection and routePoints.
     * @param mv MapView the path is drawn to.
     */

    private void redrawPath(final MapView mv) {
        final Projection prj = mv.getProjection();
        path.rewind();
        final Iterator<GeoPoint> it = routePoints.iterator();
        prj.toPixels(it.next(), p);
        path.moveTo(p.x, p.y);
        while (it.hasNext()) {
            prj.toPixels(it.next(), p);
            path.lineTo(p.x, p.y);
        }
        path.setLastPoint(p.x, p.y);
    }

}
private  Route directions(final GeoPoint start, final GeoPoint dest,int mode) {

    Parser parser;
    String jsonURL = "http://maps.googleapis.com/maps/api/directions/json?";
    final StringBuffer sBuf = new StringBuffer(jsonURL);
    sBuf.append("origin=");
    sBuf.append(start.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(start.getLongitudeE6()/1E6);
    sBuf.append("&destination=");
    sBuf.append(dest.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(dest.getLongitudeE6()/1E6);
    if(mode==1){
        sBuf.append("&sensor=true&mode=driving");
    }
    if(mode==3){
        System.currentTimeMillis();

        try{
            sBuf.append("&sensor=true&departure_time=1343605500&mode=google.maps.TravelMode.TRANSIT&vehicle.type=VehicleType.BUS");
        }catch(Exception e){
            Toast.makeText(ScreenOfOnMyWay.this, "Route not available", Toast.LENGTH_SHORT).show();
        }
    }
    if(mode==2){
        sBuf.append("&sensor=true&mode=walking");
    }
    parser = new GoogleParser(sBuf.toString());
    Route r =  parser.parse();
    return r;
} 
```

# android - 关闭异步任务中的进度对话框时Android应用程序强制关闭

> ID：13990483
> 
> 赞同：0
> 
> 时间：2012-12-21T12:46:08.470
> 
> 标签：android, android-asynctask, progressdialog

我在主要活动中使用子类来执行异步任务。我计划之后将它移动到一个单独的文件中，我只是更喜欢这样做以确认它正在工作。`HTTPRequest`由于等待时间可能很长，我正在尝试使用进度对话框。我什么也没做，`doInBackground()`因为我读过你不能从那里访问 UI 层。最终发生的事情是我显示我的进度对话框`onPreExecute()`并在`onPostExecute()`. 我在上面分别调用每个任务，这可能是我问题的 99%，但我需要能够将我的活动传递给任务，以便它们正常运行。

我已经把很多步骤分解成小块。我得到一个空指针异常，这让我相信我的问题来自不使用 execute() 但我似乎无法弄清楚它是如何工作的。

```
new CodeRetrievalItem().onPreExecute(MyActivity.this);

new CodeRetrievalItem().onPostExecute(MyActivity.this);

class CodeRetrievalItem extends AsyncTask<Void, Void, Void>{

ProgressDialog dialog;
protected void onPreExecute(Activity actpass){
        dialog = new  ProgressDialog(actpass);
    dialog.setMessage("Loading");
    dialog.setIndeterminate(false); 
    dialog.setCancelable(false);
    dialog.show();

}

@Override
protected Void doInBackground(Void... arg0) {
    // TODO Auto-generated method stub
    return null;
}

protected void onPostExecute(Activity actpass){

            // Execute HTTP Request
    try{
        dialog.dismiss();
    }
    catch(Exception e){
        Toast.makeText(actpass, "IOE response " + e.toString(), Toast.LENGTH_LONG).show();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:20:13.950

你使用`AsyncTask`完全错误。您的代码中有几个主要错误。

**AsyncTask 受保护的方法**

不要自己打电话给他们。在[AsyncTask 的文档中](https://developer.android.com/reference/android/os/AsyncTask.html)，您可以找到：

> 不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。

`AsyncTask`你必须通过调用`execute(Params...)`方法开始你的。这将导致：

1.  `onPreExecute()`在后台执行开始之前调用并在主线程上调用
2.  `doInBackground(Params...)`在后台调用
3.  后台执行完成后`onPostExecute(Result)`在主线程上调用。

除非你打电话给`execute(Params...)`这一切都不会发生。

**通用参数**

此外，您的通用参数存在问题。`AsyncTask`具有三个通用参数`AsyncTask<Params, Progress, Result>`（在您的情况下`AsyncTask<Void, Void, Void>`，您必须在方法的参数中匹配这些参数。

因此创建：

1.  `onPreExecute()`代替`onPreExecute(Activity actpass)`
2.  `onPostExecute(Void)`代替`onPostExecute(Activity actpass)`

您定义的那些方法不会以任何方式绑定到异步执行，它们只是类中的一些额外方法。

如果您需要以`AsyncTask`不同的方式（例如在构造函数中）访问传递中的活动。请注意，将 an 传递`Activity`给 an`AsyncTask`可能会导致可能的内存泄漏（在此处使用很好），如果处理不当`WeakReference<T>`，访问其中的对话框可能会导致崩溃。`onPostExecute(Result)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:54:55.617

像这样更改您的代码

```
new CodeRetrievalItem(MyActivity.this).execute();

class CodeRetrievalItem extends AsyncTask<Void, Void, Void>{
Activity context;
public CodeRetrievalItem(Activity actpass)
{
context=actpass;
}
ProgressDialog dialog;
protected void onPreExecute(Activity actpass){
        dialog = new  ProgressDialog(context);
    dialog.setMessage("Loading");
    dialog.setIndeterminate(false); 
    dialog.setCancelable(false);
    dialog.show();

}

@Override
protected Void doInBackground(Void... arg0) {
    // TODO Auto-generated method stub
    return null;
}

protected void onPostExecute(Activity actpass){

            // Execute HTTP Request
    try{
        dialog.dismiss();
    }
    catch(Exception e){
        Toast.makeText(context, "IOE response " + e.toString(), Toast.LENGTH_LONG).show();
    } 
```

# c# - 限制c#应用程序中的用户数

> ID：13990484
> 
> 赞同：7
> 
> 时间：2012-12-21T12:46:17.643
> 
> 标签：c#, winforms, client-server

我正在使用 C# 开发客户端-服务器应用程序。基本上，服务器是 SQL 服务器，客户端是用 C# 开发的。我想知道的是在任何时候限制使用该应用程序的用户数量的最佳方法（如果有的话） - 比如说我希望限制为两个用户。我会限制他们对 SQLserver 的访问吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:59:35.030

您可能需要“会话”的概念来识别并发用户数。

如果希望以故障安全的方式完成此操作，则必须在数据库服务器和客户端之间引入一个应用层。然后，您可以为用户提供登录和注销的方法。

每次登录时，您都需要增加“并发用户”的计数，每次注销时，您都需要减少。

您可能需要引入会话超时的概念，因为某些客户端可能会在不调用 logff 方法的情况下关闭。

允许的并发用户数可以与许可证相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:56:58.977

使用“currentUser”表存储当前同时登录系统的用户。

当用户登录时，检查最大行数。行数已达到。

当用户离开系统时删除相应的行。这样，您也可以限制使用相同的用户 ID 从不同的计算机登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:59:03.873

您可以简单地出售个人许可证。

以在受信任的服务器（可能是 SQL Server）上检查其许可证的方式创建应用程序。

向每台计算机/用户出售许可证。

这样，如果需要，您可以轻松扩展到 2 个以上的用户。

也可以实施浮动许可：每次用户尝试获得许可时，它只会在可用时给出。当然，在断开连接或超时后必须“释放”许可证。在这种情况下，您需要一个包含许多许可证的服务器和一个分发它们的可信服务。

在 Winforms 应用程序中，您只需在启动时检查许可证，并且您可以在每次用户执行重要操作（例如查询数据库或单击菜单项）时延长超时

# iphone - 有没有办法以编程方式（通过应用程序）添加 AppStore 评论？

> ID：13990486
> 
> 赞同：0
> 
> 时间：2012-12-21T12:46:37.143
> 
> 标签：iphone, ios, ipad, app-store, rating

我想像普通文本一样写评论，然后从我的应用程序中将其发送到 AppStore。
我想将此评论的副本发送到我的电子邮件。
由于评论是由 Apple 预先审核的，因此我会在评论发布到 AppStore 之前知道该评论。

无论如何要在iOS中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T12:49:02.173

不，这是不可能的，因为这将允许您创建虚假评论。

# mongodb - Centos 6 下 Mongo 的读取性能缓慢

> ID：13990487
> 
> 赞同：6
> 
> 时间：2012-12-21T12:46:47.910
> 
> 标签：mongodb, networking

我成功地基本配置了我的副本集，但我注意到读取性能很慢。我的副本集中有 2 个 mongo 服务器和 1 个仲裁器。所有都在 Centos 6.3 最小设置（只是数据库）上运行。

我在另一个 Windows 服务器 2012 上也有单个 mongo 实例。

在我构建我的副本集之前，我的 Web 服务器与 Mongo（那个 Windows 实例）在同一个操作系统上。性能很好，结果就像

C# .NET 4.5（同一 VM 上的 IIS 和 Mongo）读取 2000 行：AvgObj 2600 字节时约 250 毫秒

现在使用我的副本集，我的读取性能非常慢。当我的网络服务器访问副本集时，我得到的结果如下

C# .NET 4.5（分离，Centos 副本上的 IIS 和 Mongo）读取 2000 行：AvgObj 2600 字节时约 2500 毫秒

我试图从远程 IIS 中读取我的单个 Mongo 瞬间，结果就像

C# .NET 4.5（Windows 上的分离、IIS 和单个 Mongo）读取 2000 行：AvgObj 2600 字节时约 600 毫秒

所有服务器都在具有 Hyper-V 核心服务器的单个物理机中运行。

我使用最新的 C# MongoDB 驱动程序 1.7 版本。从我在命令 shell 中测试的结果来看，在所有 mongo 服务器上，我的查询在 10 毫秒内执行。

谁能给我建议，为什么我在分离的 Centos 服务器上的副本集读取性能很慢？是网络，驱动程序还是其他什么？

我的 C# 配置是

```
 var server1 = new MongoServerAddress("1.0.0.1"); //primary
            var server2 = new MongoServerAddress("1.0.0.2"); /secundary
            var servers = new List<MongoServerAddress> {server1, server2};

            var safe = new MongoClientSettings
                {

                    Servers = servers,
                    ReplicaSetName = "rs0",
                    ConnectionMode = ConnectionMode.ReplicaSet,
                    WriteConcern = new WriteConcern
                        {
                            Journal = false,
                            W = 1
                        },
                    ReadPreference = new ReadPreference
                        {
                            ReadPreferenceMode = ReadPreferenceMode.PrimaryPreferred
                        }
                }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T16:33:33.387

为了在 Hyper V 上获得最佳性能，请确保您使用的是常规网络适配器（非旧版），并且您在来宾操作系统中安装了集成服务。

对于 CentOS 6.x，您可以从此处安装集成服务：http: [//www.microsoft.com/en-us/download/details.aspx?id=34603](http://www.microsoft.com/en-us/download/details.aspx?id=34603)

如果您发现您的 VM 使用的是旧版网络适配器，请注意，当您添加新适配器时，您必须重新配置来宾 (CentOS) 操作系统内部的网络。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:08:18.920

在 Mongo shell 中，您通常会取回前 10 条记录 - 在 .NET 中，您将取回前 101 条记录或 1 MB（以先到者为准）。如果您打开一个游标然后对迭代进行计时，您会发现与从 shell 中检索 10 条记录相比，这可能非常慢。

尝试运行一个 JS 循环来检索 shell 中的所有记录，看看需要多长时间。请注意，如果您已经启动并运行了一个，您应该通过您的 mongos 连接同时运行 shell 和 C# 连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T19:18:34.037

这可能不是一个决定性的答案，但我现在要做的只是调试 mongo 连接，中间没有 c# 应用程序：使用 mongo shell 查询并连接到远程服务器（centos 和 windows，都配置为具有相同数据的副本）。
如果这里有显着差异，那么我会查看 VM/OS 配置（网络适配器、网络配置等）。

如果没有区别，我会使用 mongo 配置（读取首选项、从属等）来找出究竟是什么阻碍了性能。

# c# - SQLDataSource 在从数据库中检索日期数据类型时返回“mm/dd/yyyy hh:mm:ss”

> ID：13990491
> 
> 赞同：1
> 
> 时间：2012-12-21T12:46:58.067
> 
> 标签：c#, asp.net, sql-server, datetime, gridview

我有一个包含属性、日期、数据类型的表。我用来`SqlDataSource`从数据库中获取数据并填充`GridView`它以“mm/dd/yyyy hh:mm:ss”格式显示。

但在数据库中，它以“mm/dd/yyyy”格式存储。应该改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:49:54.103

试试这个

```
<asp:BoundField HeaderText="Date" DataField="DBDate" 
     DataFormatString="{0:MM/dd/yy}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:52:57.870

显然你的默认值是. 将其更改为[`Boundfield`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.aspx) [`DataFormatString`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)`mm/dd/yyyy hh:mm:ss``MM/dd/yy`

```
<asp:BoundField  DataFormatString = "{0:MM/dd/yy}"  /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:53:13.110

`HtmlEncode="False"`如下使用它

```
<asp:BoundField HeaderText="Date" DataField="DBDate"   HtmlEncode="False"
 DataFormatString="{0:MM/dd/yy}"> 
```

# ruby-on-rails - 两个模型之间的 Rails ActiveRecord 关联

> ID：13990493
> 
> 赞同：0
> 
> 时间：2012-12-21T12:47:07.083
> 
> 标签：ruby-on-rails

我有两个模型，`user`并且`card`我想建立一个关联，`user has_many :cards`但所有人都可以查看卡片。因此`card belongs_to :user`，但其他任何人都可以查看它们。

如何在 Rails 中设置此关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:49:00.270

无需在两个模型之间设置关联。只需确保您的查看操作（可以命名为`index`）将查看所有卡片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:57:35.930

好吧，这并不是很复杂，只需执行您描述的关联即可：

```
class User < ActiveRecord::Base
  has_many :cards, :dependent => :destroy #so when you delete a user, his cards will be deleted
end

class Card < ActiveRecord::Base
  belongs_to :user
  # The cards table must have the column "user_id", just do a migration to add it
end

# The migration would be something like:
def change
  add_column :cards, :user_id, :integer, :default => 0, :null => false

  add_index :cards, :user_id #it's better to add an index cause you'll surely often get cards from user_id
end 
```

**编辑：关于“null => false”约束和“:default => 0”的一些解释**

“非空”约束将防止卡片不属于用户。所以一张卡必须有一个关联的用户！如果它不应该总是这样，那么只需删除 ":null => false" 约束。

默认 => 0 用于为已创建的卡片设置默认值 user_id。否则，如果您让 ":null => false" 约束，它将引发错误。当然，您必须删除这些卡片或正确设置它们的“user_id”属性。

* * *

然后，不要忘记创建一张属于某个用户的卡片，您必须这样做：`new_card = current_user.cards.build`，此代码将自动使用“current_user.id”值填充“user_id”属性。

然后要获取用户的卡片，只需执行以下操作：（`current_user.cards`其中 current_user 是查看其个人资料的用户）。无论用户如何，要获得所有卡片，只需执行以下操作：`Card.all`

如果要过滤对某些卡片的访问，则必须在控制器中进行，这与关联无关；）在卡片和用户之间建立关联不会对从卡片模型访问对象产生任何影响.

# syntax-error - OCaml - 获取有关_语法错误_的提示

> ID：13990499
> 
> 赞同：2
> 
> 时间：2012-12-21T12:47:22.483
> 
> 标签：syntax-error, ocaml

我开始写一些 OCaml，但我发现很难找到语法错​​误。我来自 JavaScript，它会告诉我`Unexpected token ***`。但在这里，我得到的只是`Syntax error`......

有什么方法可以得到更明确的信息吗？

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:59:39.480

尝试一下`camlp4o source.ml`，它将使用不同的解析器解析代码，该解析器能够告诉它在每个输入点的期望。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T14:50:03.920

我在您对 ygrek 的有用答案的回复中看到您的代码是[http://pastebin.com/6c0sKFeh](http://pastebin.com/6c0sKFeh)。

此代码使用语法扩展来支持流解析器，这是几年前从核心语言中删除的一种语法糖。要按原样编译它，您应该在编译行中添加一个预处理器调用命令。代替：

```
ocamlc -o foo ... foo.ml 
```

采用

```
ocamlc -pp camlp4o -o foo ... foo.ml 
```

“只返回源代码”的原因`camlp4o`是它解析正确，现在打印出后处理的源代码。您也可以将此源存储在文件`camlp4o foo.ml -o foo2.ml`中，然后直接编译：`ocamlc ... foo2.ml`.

如果您的教材没有告诉您应该使用处理器，那么它已经过时了。例如，这是“使用 Objective Caml 开发应用程序”一书的少数问题之一——否则，这是我推荐阅读的一个很好的资源。

PS：下一次，请立即发布您的源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:40:18.023

你能复制粘贴整个错误信息吗？它很可能包含一个非常精确的位置：文件名、行号、列号。并且需要在那里进行更正。

有时这个位置是块的末端，需要在块内部进行修正。

此外，如果您可以将代码简化为一个最小的示例，那么它会更容易提供帮助。

# jquery - 如何创建水平 JQuery 1.9 菜单？

> ID：13990503
> 
> 赞同：1
> 
> 时间：2012-12-21T12:47:33.457
> 
> 标签：jquery

[JQuery UI 1.9](http://jqueryui.com/menu/)有一个非常方便的功能来创建菜单。但是，此菜单是垂直菜单。有没有人使用 JQuery 1.9 创建水平菜单？

**更新**

我添加了页面

```
<ul id="nav">
    <li><a href="#">Item #1</a></li>
    <li><a href="#">Profile</a>
    <ul>
        <li><a href="#">Ada</a></li>
        <li><a href="#">Saarland</a></li>
        <li><a href="#">Salzburg</a></li>
    </ul>
    </li> 

</ul> 
```

我在css中添加了以下代码：

.ui-menu:after { content: "."; 显示：块；明确：两者；可见性：隐藏；行高：0；高度：0；}

.ui-menu .ui-menu-item { 显示：内联块；向左飘浮; 边距：0；填充：0；宽度：自动；}

CSS 为 Item#1 和 Profile 创建了一个水平菜单。但是 CSS 无法将 Ada、Saarland 和 Salzburg 作为 Profile 的下拉菜单。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:18:37.750

您可以使用相同的 HTML 语法（li 等）来创建菜单，然后通过 CSS 组织显示。我就是这样做的。您可以将 UI 处理添加到菜单元素以提供效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:25:32.217

根据 jquery ui 文档，没有 api 可以使其水平。但是您可以使用一些 css 轻松使其水平：

[http://coderevision.com/how-to-have-a-jquery-ui-menu-displayed-horizo​​ntally/](http://coderevision.com/how-to-have-a-jquery-ui-menu-displayed-horizontally/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:42:12.130

[How to make jQuery UI nav menu Horizo​​ntal](https://stackoverflow.com/questions/12944364/how-to-make-jquery-ui-nav-menu-horizontal)可能重复？

但你绝对可以做到：这不是 jQuery 的问题，你只需要使用 CSS 设置受影响的元素的样式，它们是`.ui-menu`和`.ui-menu-item`类。

# c# - 上电 asp 树事件不起作用

> ID：13990505
> 
> 赞同：1
> 
> 时间：2012-12-21T12:47:42.107
> 
> 标签：c#, asp.net, treeview, asp.net-3.5

我正在使用 powerup asp 树（与我的 asp.net 2.0 Web 应用程序）来显示位置和部门数据。这个树视图也有复选按钮。在我的代码中，我处理 checkchanged、nodetoggle 和 nodeselect 事件。它在 IE 浏览器上运行良好，但是当我尝试在 firefox 中检查它时，即使没有维护检查，它也会停止工作。

请任何人建议我，为什么会发生这种情况以及我将如何在不同的浏览器中处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T21:52:44.937

我知道这是一个老问题，但它可能有助于其他人维护旧软件。

控件可能无法理解代理用户字符串，并且错误地将 UplevelBrowser 设置为 false。

我能够使用反射来设置标志

```
 if (!treeviewExplorer.UplevelBrowser)
        {
            // fix internal UplevelBrowser setting
            PropertyInfo p = treeviewExplorer.GetType().GetProperty("x754cb9503fcb8508", BindingFlags.NonPublic|BindingFlags.Instance);
            object x754cb9503fcb8508 = p.GetValue(treeviewExplorer, null);

            FieldInfo f = x754cb9503fcb8508.GetType().GetField("_b1ea521a985d430f", BindingFlags.NonPublic | BindingFlags.Instance);
            f.SetValue(x754cb9503fcb8508, true);
        } 
```

# jquery - 基于按键修改链接行为

> ID：13990507
> 
> 赞同：1
> 
> 时间：2012-12-21T12:47:48.927
> 
> 标签：jquery, pdf

我在每个表格行中都有一个链接，可以更详细地查看记录。我想添加方法来查看`pdf`我们为每条记录生成的不同 's，而不会过多地增加表格。我为不同的点击条件绑定了不同的事件，但我遇到了一些问题。首先，它不会`pdf`像通常从硬链接那样进行，它会打开保存对话框。其次，一旦我告诉它不要保存，页面就不会跟随任何`pdf`链接。我究竟做错了什么？我认为阻止默认设置可能会`chrome`在看到按键+单击时停止执行特殊活动，我什至不确定这是开始的问题。奇怪的是，在我之后，例如，`ctrl-click`页面不会做任何事情，而是`mouseover`显示“href”是`ctrl-click`修改后的位置，然后定期点击会做我想要它首先做的事情。

查看代码，我可以明白为什么它正在做它正在做的事情。阻止默认值会阻止 chrome 保存，就像我想要的那样。就像我告诉它的那样，href 已更改。现在我必须点击链接。如果我在收到任何回复之前偶然发现答案，我会回答。

```
$(".doThings").click(function(e){ 
    var ID = $(this).text();
    if(e.ctrlKey){
        event.preventDefault();
        $(this).attr("href", "http://foo.com/report.php?id="+ID);
    } 
    else if(e.altKey) {
        event.preventDefault();
        $(this).attr("href", "http://foo.com/r30.php?id="+ID); 
    } 
    else if(e.shiftKey) { 
        event.preventDefault();
        $(this).attr("href", "http://foo.com/r45.php?id="+ID); 
    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:07:23.450

改为使用`window.location.href`。

```
$(".doThings").click(function(e){ 
    var ID = $(this).text();
    if(e.ctrlKey){
        event.preventDefault();
        window.location.href = "http://foo.com/report.php?id="+ID;
    } 
    else if(e.altKey) {
        event.preventDefault();
        window.location.href = "http://foo.com/r30.php?id="+ID; 
    } 
    else if(e.shiftKey) { 
        event.preventDefault();
        window.location.href = "http://foo.com/r45.php?id="+ID; 
    } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:12:02.287

更改href 不是要走的路。我刚刚做了一个javascript重定向。

```
if(e.ctrlKey){
        e.preventDefault();
        window.location = ("http://foo.com/report.php?id="+ID);
    } 
```

# java - 本地 Google Appengine 上的 JUnit 测试中的电子邮件正文为空

> ID：13990510
> 
> 赞同：4
> 
> 时间：2012-12-21T12:48:02.000
> 
> 标签：java, google-app-engine, email, testing, junit

我在带有 JDK 7_10 和 GAE Maven 插件的 Mac OS X 上使用 GAE API 1.7.3。

我的测试或多或少是从[文档中](https://developers.google.com/appengine/docs/java/mail/usingjavamail#Sending_Email_Messages)复制的：

```
 Properties props = new Properties();
    Session session = Session.getDefaultInstance(props, null);
    Message msg = new MimeMessage(session);
    msg.setFrom(new InternetAddress("admin@example.com", "Example.com Admin"));
    msg.addRecipient(Message.RecipientType.TO, new InternetAddress("user@example.com", "Mr. User"));
    msg.setSubject("Your Example.com account has been activated");
    msg.setText(".....");
    Transport.send(msg); 
```

输出是：

```
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO: MailService.send
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   From: "Example.com Admin" <admin@example.com>
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   To: "Mr. User" <user@example.com>
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Reply-to: "Example.com Admin" <admin@example.com>
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Subject: Your Example.com account has been activated
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Body:
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO:     Content-type: text/plain
Dez 21, 2012 12:24:24 PM com.google.appengine.api.mail.dev.LocalMailService log
INFO:     Data length: 5 
```

单元测试使用以下方式初始化：

```
protected LocalServiceTestHelper helper = new LocalServiceTestHelper(new LocalMailServiceTestConfig()); 
```

真正奇怪的是，“Body”是空的，但“Data length”是5（对应于“.....”）。

这是正常的还是我在这里做错了什么？

**[更新]**如果我使用低级 API，也是一样的：

```
 MailService service = MailServiceFactory.getMailService();
    service.send(new MailService.Message(from, to, subject, text)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:56:29.733

你打过电话`setLogMailBody(true)`吗`LocalMailServiceTestConfig`？

# javascript - Ajax 请求将冻结我的 Javascript 代码

> ID：13990517
> 
> 赞同：2
> 
> 时间：2012-12-21T12:48:17.987
> 
> 标签：javascript, jquery, html, ruby-on-rails-3

我有一个 Ajax 请求：

```
$.ajax({
    url: '/test/start_images_stream',
    type: "GET",
    data : { image_id: tst },
    dataType: "json",
    complete: function (data_response) {
        status = data_response.responseText; 
        console.log("The response was: "+status);
        stream_images();
    }
}); 
```

这似乎冻结了我的javascript。它停留在 ajax 请求上，不会继续到 stream_images()。

在我的服务器上，我得到了这个：

```
 def start_images_stream

  #ajax request parameters
  tst=params[:image_id]

  start_method

  respond_to do |format|
    format.json  { render :json => "OK"}
  end 

  end 
```

'start_method' 有一个循环..do，它永远不会结束！我明白这可能是问题所在。所以我将我的 ajax 请求更改为 POST 请求：

```
$.ajax({
    url: '/test/start_images_stream',
    type: "POST",
    data : { image_id: tst },
    dataType: "json",
    complete: function () {
        stream_images();
    }
}); 
```

并调整了我的服务器代码。现在，ajax 请求似乎再次冻结了我的主线程。我只想对服务器说，启动“功能 a”，生成无限数量的图像，仅此而已。然后 Javascript 读取文件并在 HTML 页面上列出它们。

它似乎不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:05:50.857

我认为你的完整功能：

```
complete: function () {
        stream_images();
    } 
```

应该在success属性中才能工作，就像这样：

```
success: function () {
        stream_images();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:51:12.130

```
status = data_response; 
```

回调将结果作为参数传递（如果指定了 json，则为字符串或对象），它没有`responseText`属性。

jQuery 抽象了这些东西，所以你不必担心知道`responseText`属性，你只需要得到结果。

# ruby-on-rails - 如何在 Ruby 中将 JSON 对象附加在一起

> ID：13990523
> 
> 赞同：10
> 
> 时间：2012-12-21T12:48:54.233
> 
> 标签：ruby-on-rails, ruby, gmaps4rails

我正在尝试`to_gmaps4rails`使用`each`块中的结果创建一组地图标记。在具有有效地理坐标的数组上，该`to_gmaps4rails`方法生成有效的 JSON。

我正在使用 Mongoid，我的地理坐标位于一个子集合中，如下所示：

```
Account.locations.coordinates 
```

这是我的控制器代码。`nearby_sales`是一个集合`Accounts`：

```
@json = String.new
nearby_sales.each do |sale|
  @json << sale.locations.to_gmaps4rails
end 
```

浏览器抱怨我`@json`的格式不正确。有没有一种 Ruby 方法可以将有效的 JSON 附加在一起？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T13:41:02.740

您不能连接返回的 JSON 格式的字符串，`to_gmaps4rails`因为一旦解码它们就不会产生有效的对象。

如果我有一些我想发送的对象：

```
loc1 = {"longitude" => "2.13012", "latitude" => "48.8014"}
loc2 = {"longitude" => "-90.556", "latitude" => "41.0634"} 
```

并像这样将它们转换为 JSON `to_gmaps4rails`：

```
loc1_json = loc1.to_json
=> "{\"longitude\":\"2.13012\",\"latitude\":\"48.8014\"}"
loc2_json = loc2.to_json
=> "{\"longitude\":\"-90.556\",\"latitude\":\"41.0634\"}" 
```

它们是两个 JSON 编码的字符串对象。

连接结果字符串：

```
loc1_json + loc2_json
=> "{\"longitude\":\"2.13012\",\"latitude\":\"48.8014\"}{\"longitude\":\"-90.556\",\"latitude\":\"41.0634\"}" 
```

并将它们发送到另一个带有 JSON 解码器的应用程序，我会得到：

```
JSON[loc1_json + loc2_json]
JSON::ParserError: 743: unexpected token at '{"longitude":"-90.556","latitude":"41.0634"}' 
```

解析器仅在找到结束分隔符并知道存在错误之前才通过字符串中途。

我可以将它们包装在数组或散列中，然后再次编码为 JSON，但这无济于事，因为各个 JSON 字符串将被编码两次，并且需要再次解码两次才能取回原始数据：

```
JSON[([loc1_json, loc2_json]).to_json]
=> ["{\"longitude\":\"2.13012\",\"latitude\":\"48.8014\"}",
    "{\"longitude\":\"-90.556\",\"latitude\":\"41.0634\"}"]

JSON[([loc1_json, loc2_json]).to_json].map{ |s| JSON[s] }
=> [{"longitude"=>"2.13012", "latitude"=>"48.8014"},
    {"longitude"=>"-90.556", "latitude"=>"41.0634"}] 
```

这不是 JSON 解码器所期望的情况，因此需要在客户端使用一些时髦的 JavaScript 才能两次使用魔术 JSON 解码器环。

真正的解决方案是首先将它们解码回它们的原生 Ruby 对象，然后将它们重新编码为数组或散列，然后发送它们：

```
array_of_json = [loc1_json, loc2_json].map{ |s| JSON[s] }.to_json
=> "[{\"longitude\":\"2.13012\",\"latitude\":\"48.8014\"},{\"longitude\":\"-90.556\",\"latitude\":\"41.0634\"}]" 
```

这些值现在被正确编码，可以发送到目标浏览器或应用程序，然后可以理解结果数据，而不是像上面那样作为字符串数组，而是作为数据哈希数组：

```
JSON[array_of_json]
=> [{"longitude"=>"2.13012", "latitude"=>"48.8014"},
    {"longitude"=>"-90.556", "latitude"=>"41.0634"}]

loc1 == JSON[array_of_json][0]
=> true
loc2 == JSON[array_of_json][1]
=> true 
```

将其应用于您的代码，这是需要做的事情：

```
@json = []
nearby_sales.each do |sale|
  @json << JSON[sale.locations.to_gmaps4rails]
end
@json.to_json 
```

这会将位置解码回它们的“pre-JSON”状态，将它们附加到数组中，然后以 JSON 格式返回数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:58:34.413

```
require 'json'

@json = Array.new
nearby_sales.each do |sale|
  @json << sale.locations.to_gmaps4rails
end
@json.to_json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-02T19:58:28.080

你总是可以试试这个

```
array_of_json.reduce({}){|z,x| z.merge(x)}
```

# javascript - 如何在 jasmine 测试框架中处理谷歌地图事件

> ID：13990524
> 
> 赞同：6
> 
> 时间：2012-12-21T12:48:54.560
> 
> 标签：javascript, backbone.js, jasmine, backbone-events

我正在尝试使用 jasmine 框架为 Google Maps 编写 Javascript 测试。我要做的是启动地图并更改边界（缩小）并测试地图是否正确缩小。

我遇到的问题是 jasmine 似乎没有任何方法来处理事件。Jasmine 具有`spyOn()`查找方法（而不是事件）用法的方法。茉莉花中还有`waits()`等待特定时间的方法。这些方法都不适用于处理事件。有人对茉莉花事件有任何经验吗？

我正在使用的代码：

```
describe('Map view', function () {
    beforeEach(function () {
        $('body').append("<div data-role='page' id='page-map'><div id='map_canvas'></div></div>");

        this.view = new MapView({el: $('#map_canvas')});
    });

    afterEach(function () {
        $('body div#page-map').remove();
    });

    describe('zoom to a new bound in the map', function () {
        it('should set map bounds correctly', function () {
            this.view.zoomToBounds(this.fixtures.Locations.valid.bounds);

            google.maps.event.addListener(this.view.map, 'bounds_changed', function() {
                // expect() doesn't work in this context.. (ex: expect(5).toEqual(1) will pass)
                expect(this.getBounds().getSouthWest().lat()).toBeGreaterThan(self.fixtures.Locations.valid.bounds.minLat);
                expect(this.getBounds().getSouthWest().lng()).toBeGreaterThan(self.fixtures.Locations.valid.bounds.minLng);
                expect(this.getBounds().getNorthEast().lat()).toBeLessThan(self.fixtures.Locations.valid.bounds.maxLat);
                expect(this.getBounds().getNorthEast().lng()).toBeLessThan(self.fixtures.Locations.valid.bounds.maxLng);
            });
        });
    });
}); 
```

主干视图将启动，Google 地图将呈现。该`zoomToBounds`方法工作正常，但是当我想检查结果时遇到了一些问题。在`google.maps.event.addListener()`子句中， (jasmine)`expect()`调用似乎不起作用。

做到这一点的最好方法当然是使用 jasmine 方法直接捕获事件，但我还没有想出一个方法来做到这一点。

这里有人知道如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:38:43.343

> 最好的方法当然是使用 jasmine 方法直接捕捉事件

您是否尝试过使用 jasmine 间谍来监视绑定了事件的对象的原型？我认为您的事件可能会在设置间谍之前绑定：

这是一个简单的例子（在coffeescript中）

```
 it 'calls render when a model is added to the collection', ->
    spyOn(MyView.prototype, 'render')
    view = new MyView({
      collection : new Backbone.Collection([])
    })
    view.collection.add({})
    expect(view.render).toHaveBeenCalled() 
```

# c - Calloc 导致段错误但不是 malloc

> ID：13990532
> 
> 赞同：1
> 
> 时间：2012-12-21T12:49:37.320
> 
> 标签：c, unix, malloc, calloc

我正在实现一个环形缓冲区，在一种方法中，我`CHUNKSIZE`从一个循环中的文件中读取字节并将指针插入到环形缓冲区中。

我在一个while循环中这样做。该代码可以正常工作，`malloc`但`calloc`会在循环结束时导致段错误。这真的很神秘。

这是代码：

```
fpos_t position = 0;
fpos_t file_size = 0;
fseek(file, 0L, SEEK_END);
fgetpos(file,&file_size);
fseek(file, 0L, SEEK_SET);
char* b = calloc(CHUNKSIZE,sizeof(char));
// char* b = malloc(sizeof(char)*CHUNKSIZE);
while(fread(b,1,CHUNKSIZE,file)){
    deposit(reader_buf,b);
    // This always changes the cursor position by -150 to create overlapping chunks
    fseek(file,-150,SEEK_CUR);
    b = calloc(CHUNKSIZE,sizeof(char));
    // b = malloc(sizeof(char)*CHUNKSIZE);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:17:56.893

`malloc`和之间的唯一区别`calloc`是`calloc`将内存初始化为 0，而`malloc`不是初始化它。

因此，错误可能是您正在某处访问一些被 0 覆盖的数据`calloc`。我建议您检查`b`缓冲区的生命周期或其他一些动态分配的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:55:33.813

这可能不是`malloc`段错误，`calloc`也不是。为了证明这一点，`puts( "allocated memory" );`在 malloc-or-calloc 行之后放置一个诊断，然后再试一次。在循环之后立即抛出另一个。这应该向您证明，导致问题的不是功能本身的选择。

尝试使用像[valgrind](http://valgrind.org/)这样的运行时内存调试器。如果它在您第一次使用它运行程序时发现您的问题，我不会感到惊讶。如果事实证明您像 Alexandru C. 建议的那样依赖归零内存，我也不会感到惊讶。

# xml - XQuery - 在文本中使用计算元素构造函数

> ID：13990539
> 
> 赞同：1
> 
> 时间：2012-12-21T12:49:53.513
> 
> 标签：xml, xquery

在 XQuery 中，如何将 xml 与[计算元素构造函数](http://www.w3.org/TR/xquery/#id-computedElements)混合以从变量中设置节点的标记。

我试过这样做，但没有运气：

```
 if ($x eq "something") then
    <cp:value>
      {element {fn:string-join( ("if:GICS", $cp/@id), "" )} {""}}
    </cp:value> 
```

预期的输出是：

```
<cp:value>
  <if:GICS1234 />
</cp:value> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:21:39.073

元素构造函数的元素名称部分需要一个`xs:QName`来生成元素名称。如果它提供了一个字符串，它会将它强制转换为一个 QName，就好像你调用了 `xs:QName('my-element-name') 一样。

因此，您必须遵守您将遵守的所有规则，就好像您`xs:QName()`在其中有一个显式构造函数一样。这意味着如果您使用命名空间前缀（例如`if:`），则必须可以在静态上下文中解析此命名空间。

你可以做的最简单的事情就是`if:`在你的序言中声明你的命名空间（就像你声明你的`cp:`命名空间一样）：

```
declare namespace if = "http://example.org/if";
element {fn:concat('if:GICS','1234') } {}

(: usually produces <if:GICS1234 xmlns:if="http://example.org/if"/> :) 
```

如果您不想这样做，您可以使用`fn:QName()`函数和完整的命名空间显式构造一个 QName `if:`。（注意`*fn:*QName`不同于`*xs:*QName`！）

```
element {fn:QName('http://example.org/if', fn:concat('GICS', '1234'))} {}

(: usually produces <GICS1234 xmlns="http://www.example.org/if"/> :) 
```

如果要控制使用的前缀，可以在第二个参数中包含 'if:'：

```
element {fn:QName('http://example.org/if', fn:concat('if:GICS','1234'))} {}

(: produces <if:GICS1234 xmlns:if="http://example.org/if"/> :) 
```

请注意，您在 xml 输出中获得的确切*前缀*可能会因 xquery 处理器和您正在生成的 xml 的结构而异，但您将始终获得等效的 XML Infoset。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:01:38.980

您不能直接在字符串中包含名称空间前缀。您需要从命名空间 url 创建一个包含命名空间的 QName。

使用类似的东西

```
if ($x eq "something") then
  <cp:value>
    {element {fn:QName("if namespace url", fn:string-join( ("if:GICS", $cp/@id), "" ))} {""}}
  </cp:value> 
```

你也可以使用 concat 而不是 string-join

```
if ($x eq "something") then
  <cp:value>
    {element {fn:QName("if namespace url", fn:concat( ("if:GICS", $cp/@id) ))} {""}}
  </cp:value> 
```

# vb.net - 禁用网页上的按钮

> ID：13990540
> 
> 赞同：0
> 
> 时间：2012-12-21T12:49:57.553
> 
> 标签：vb.net

我有一个用 MS Studio VB 2008 编写的网站。在处理按钮的 Click 事件的子例程开始时，我禁用了该按钮，但它不起作用。它仅在子例程运行后禁用。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:53:02.310

这可能是因为表单需要回发。将 autopostback 属性设置为 true，或者这可以使用 javascript 动态处理。

```
Button1.Enabled = false; 
```

# javascript - 限制编号的脚本。文本框中的字符数不起作用。有任何想法吗？

> ID：13990543
> 
> 赞同：0
> 
> 时间：2012-12-21T12:50:10.513
> 
> 标签：javascript, jquery

我有一个脚本应该限制没有。在文本框或文本区域中输入的字符数。我知道我可以使用 maxlength 属性来做到这一点。但我想使用JS实现。

下面是小提琴：

[http://jsfiddle.net/xTrKD/](http://jsfiddle.net/xTrKD/)

代码：

```
$(function() {
function limitText(limitField, limitNum) 
    { 
        if (limitField.value.length > limitNum)
            { 
                limitField.value = limitField.value.substring(0, limitNum);
                }
        }

})​ 
```

HTML：

```
<input type="text" id="sessionNo" name="sessionNum" onKeyUp="limitText(this,5);" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T12:55:12.730

首先，工作小提琴：http: [//jsfiddle.net/Ralt/xTrKD/2/](http://jsfiddle.net/Ralt/xTrKD/2/)

您有 2 个错误：

*   该`limitText`函数是在函数中定义的`$(function(){})`，因此在函数之外不可用。（例如，在 HTML 中。）
*   小提琴配置错误。请参阅左侧的选项。

顺便说一句，将 javascript 放在 HTML 中是个坏主意。您将内容与行为混合在一起。您最好使用这种解决方案将您的关注点分开：

```
$(function() {
    $('input').on('keyup', function() {
        limitText(this, 5);
    });

    function limitText(limitField, limitNum) {
        if (limitField.value.length > limitNum) {
            limitField.value = limitField.value.substring(0, limitNum);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:58:03.190

[工作小提琴示例](http://jsfiddle.net/xTrKD/10/)。

你真的不需要很多代码：

```
function limitText(limitField, limitNum) {
    if([8, 37,38,39,40, 46].indexOf(event.which) == -1) // If the currently pressed key is not the backspace(8), arrow keys(37-40), or delete(46);
    return limitField.value.length < limitNum;          // Check the input field's length.
} 
```

请记住，我在您的 html 中添加了 a语句`return`，`input`并将.`onKeyUp``onKeyDown`

返回`false`到 a`onKeyDown`可防止输入字符。这样做的好处是，在被删除之前，您不会让输入的字符闪烁片刻。

是一个例外，`if`以确保`backspace``(8)`、`arrow keys``(37-40)`和`delete``(46)`键仍然有效。

带有数字的数组是键的键码。如果当前按下的键 ( `event.which`) 不是其中之一，则`indexOf()`返回 -1，因此该函数可以检查长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:54:40.427

进一步从我上面的评论

[http://jsfiddle.net/xTrKD/1/](http://jsfiddle.net/xTrKD/1/)

```
$(function () {
    $('input').on('keyup', function (e) {
        limitText(this, 5);
    });

    function limitText(limitField, limitNum) {
        if (limitField.value.length > limitNum) {
            limitField.value = limitField.value.substring(0, limitNum);
        }
    }
})​; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T12:56:24.063

您没有暴露`limitText`于全局命名空间。尝试将其分配给`window.limitText`，以便您的事件处理程序可以找到它。或者，使用 jQuery 从闭包中将其绑定到 keyup。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T13:21:46.447

另一个解决方案：

```
<input type="text" id="sessionNo" name="sessionNum" myMaxLength="5" />​​​​​​​​​​​​​​​​​​​​​​​​​​​

$('#sessionNo').on('keypress', function(e) {
    if ($(this).val().length >= $(this).attr('myMaxLength'))
        return false;
});
​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T12:58:54.937

工作小提琴（没有 jQuery 和头部代码）[http://jsfiddle.net/xTrKD/7/](http://jsfiddle.net/xTrKD/7/)

输入：

```
<input type="text" id="sessionNo" name="sessionNum" onKeyDown="limitText(this,5);" />​ 
```

Javascript：

```
function limitText(limitField, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    } 
}​ 
```

# .net - 从值类型数组中复制是否比从引用类型数组中复制更快？为什么？

> ID：13990545
> 
> 赞同：3
> 
> 时间：2012-12-21T12:50:13.797
> 
> 标签：.net, arrays, memory-management, value-type, reference-type

我做了**一些测试，使用 Array.Copy**将数组的一部分复制到另一个。

第一个测试在值类型数组上使用 Array.Copy

```
struct ValueApple {
    public int Redness;
}

ValueApple[] a1 = ...
ValueApple[] a2 = ...

Array.Copy(a1, a2, a1.Length); 
```

然后第二个测试在引用类型数组上使用 Array.Copy

```
class ReferenceApple {
    public int Redness;
}

ReferenceApple[] a1 = ...
ReferenceApple[] a2 = ...

Array.Copy(a1, a2, a1.Length); 
```

我得到**的结果表明，值类型数组之间的复制比引用类型数组之间的复制要快。**

所以我的问题是：

**真的吗 ？从值类型数组复制是否比从引用类型数组复制更快，为什么？**

* * *

那么我的第二个问题是：

**如果从值类型数组复制更快。如果我为引用类型创建一个值类型包装器，那不会帮助我提高性能吗？**

例如

```
struct ValueWrapper<T> {
    public T Value;
}

class ReferenceApple { }

ValueWrapper<ReferenceApple>[] a1 = new ValueWrapper<ReferenceApple>[20];
ValueWrapper<ReferenceApple>[] a2 = new ValueWrapper<ReferenceApple>[40];

Array.Copy(a1, a2, 20); 
```

这也应该比使用普通的**ReferenceApple[]**数组更快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:55:18.603

对于`ValueApple[]`vs `ReferenceApple[]`; 具体差异很大程度上取决于目标平台；在 x86 上，它在引用类型数组中似乎确实有一些开销，但在 x64 上却不太明显（尽管该版本现在复制*了两倍的数据，但它比**任何一个*x86 版本都快）：`ReferenceApple[]`

 *x86

```
ValueApple: 3295ms
ValueApple CopyTo: 3283ms
ReferenceApple: 4345ms
ReferenceApple CopyTo: 4234ms 
```

x64

```
ValueApple: 1819ms
ValueApple CopyTo: 1864ms
ReferenceApple: 2251ms
ReferenceApple CopyTo: 2335ms 
```

我不会说这值得弯曲代码。您还需要问：“数组复制是我真正的瓶颈吗？”。如果不是，这个测试完全没有帮助。所以首先：找到你的瓶颈***是***什么。

在*某些*情况下，结构数组技巧可能会有所帮助，但通常这与涉及长期大量数据的**非常极端的高内存/垃圾收集场景更相关。**不是具有 20/40 项数组的常规代码。

以上数字基于：

```
using System;
using System.Diagnostics;
struct ValueApple
{
    public int Redness;
}
class ReferenceApple
{
    public int Redness;
}

static class Program {
    static void Main()
    {
        const int LOOP = 50000000;

        ValueApple[] a1 = new ValueApple[20];
        ValueApple[] a2 = new ValueApple[40];
        var watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            Array.Copy(a1, a2, 20);
        }
        watch.Stop();
        Console.WriteLine("ValueApple: {0}ms", watch.ElapsedMilliseconds);

        watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            a1.CopyTo(a2, 0);
        }
        watch.Stop();
        Console.WriteLine("ValueApple CopyTo: {0}ms", watch.ElapsedMilliseconds);

        ReferenceApple[] a3 = new ReferenceApple[20];
        ReferenceApple[] a4 = new ReferenceApple[40];
        watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            Array.Copy(a3, a4, 20);
        }
        watch.Stop();
        Console.WriteLine("ReferenceApple: {0}ms", watch.ElapsedMilliseconds);

        watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            a3.CopyTo(a4, 0);
        }
        watch.Stop();
        Console.WriteLine("ReferenceApple CopyTo: {0}ms", watch.ElapsedMilliseconds);

        Console.WriteLine("(done)");
        Console.ReadKey();
    }
} 
```

* * *

对于包装与不包装：

我质疑你的结果；我的号码：

```
Wrapper<T>: 2175ms
Direct: 2231ms
Wrapper: 2165ms 
```

（最后一个是相同的非通用版本）

这基本上是“大致相同，给予或接受随机 CPU 活动”。几毫秒超过 50M 的迭代当然不值得让代码变形...

重要的是，确保任何此类测试都处于发布模式，并在调试器之外执行。

我的测试代码：

```
using System;
using System.Diagnostics;
struct ValueWrapper<T> {
    public T Value;
}
struct ValueWrapper
{
    public Apple Value;
}
class Apple { }

static class Program {
    static void Main()
    {
        const int LOOP = 50000000;

        ValueWrapper<Apple>[] a1 = new ValueWrapper<Apple>[20];
        ValueWrapper<Apple>[] a2 = new ValueWrapper<Apple>[40];
        var watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            Array.Copy(a1, a2, 20);
        }
        watch.Stop();
        Console.WriteLine("Wrapper<T>: {0}ms", watch.ElapsedMilliseconds);

        Apple[] a3 = new Apple[20];
        Apple[] a4 = new Apple[40];
        watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            Array.Copy(a3, a4, 20);
        }
        watch.Stop();
        Console.WriteLine("Direct: {0}ms", watch.ElapsedMilliseconds);

        ValueWrapper[] a5 = new ValueWrapper[20];
        ValueWrapper[] a6 = new ValueWrapper[40];
        watch = Stopwatch.StartNew();
        for (int i = 0; i < LOOP; i++)
        {
            Array.Copy(a5, a6, 20);
        }
        watch.Stop();
        Console.WriteLine("Wrapper: {0}ms", watch.ElapsedMilliseconds);

        Console.WriteLine("(done)");
        Console.ReadKey();
    }
} 
```*

# c# - 使用性能计数器的 % Processor Time 值不一致

> ID：13990549
> 
> 赞同：0
> 
> 时间：2012-12-21T12:50:26.020
> 
> 标签：c#, cpu-usage, performancecounter

我有以下类监视系统以查看我的程序使用的总 cpu 和系统的总 cpu 使用率。问题是有时，当我调用 GetHealthInformation 方法时，我的程序 % CPU 大于系统的 % CPU。这是我的代码：

```
 public class MonitoringManager : AbstractComponent, IMonitoringManager, IStaticComponent {
    private static PerformanceCounter totalCpuCounter = new PerformanceCounter("Processor", "% Processor Time", "_Total"); 
    private static PerformanceCounter cpuCounterMyProgram = new PerformanceCounter("Process", "% Processor Time", Process.GetCurrentProcess().ProcessName);
    private static DateTime lastUpdate = DateTime.UtcNow;

    public void Load() {
        cpuCounterMyProgram.NextValue();
        totalCpuCounter.NextValue();
    }

    public  HealthInfo GetHealthInformation(){
        var now = DateTime.UtcNow;
        if((now - lastUpdate).TotalMilliseconds <1000){
            Thread.Sleep(1000);
        }
        lastUpdate = now;
        return new HealthInfo(totalCpuCounter.NextValue(), cpuCounterMyProgram.NextValue() / Environment.ProcessorCount);

    }

}

    public class HealthInfo{

    [DataMember]
    public float CpuTotal { get; set; }

    [DataMember]
    public float CpuMyProgram { get; set; }

    public HealthInfo(float cpuTotal, float cpuMyProgram){
        CpuTotal = cpuTotal;
        CpuMyProgram = cpuMyProgram;           
    }

    #endregion IConstructors
} 
```

}

怎么了？为什么有时系统的总 % CPU 是 0% 而我的程序是 2% ??

# java - 尝试将数据从 JSON 数组插入数据库

> ID：13990550
> 
> 赞同：0
> 
> 时间：2012-12-21T12:50:28.023
> 
> 标签：java, android, json, sqlite, logging

所以这就是我的代码应该如何工作！

1.  使用 php 向 mysql 数据库发出 http 帖子（在 AyncTask 类中）以获取 json 编码数据。
2.  从 dbCodeHelper 类中的每一行 1 到 1 获取 json 编码数据（它完成了在 android 设备上处理数据库所需的一切。（插入新行和所有）

第一步完全按照我的缩进工作。问题是，第二步不起作用。我认为 json_data 对象没有被传递给插入数据的 dbCodeHelper 类！

以下是相应的代码部分：

```
//dbConnection class
JSONObject json_data;
dbCodeHelper db = new dbCodeHelper();
try{
    JSONArray jArray = new JSONArray(result);
    for(int i=0;i<jArray.length();i++){
            json_data = jArray.getJSONObject(i);
            Log.i("log_tag","id: "+json_data.getString("facts"));
            db.addAllFacts(json_data);
    }
    Log.i("log_tag","facts: "+json_data.getString("facts"));
}
catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());
}

...
//from dbCodeHelper Class
public void addAllFacts(JSONObject json_data)
{
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    try {
        values.put(KEY_SL_NUMBER, json_data.getInt("sl_number"));
        values.put(KEY_NAME, json_data.getString("facts"));

        db.insert(TABLE_NAME, null, values);
        db.close();

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.i("log_tag","id: "+ "something messed up in the dbcodehlper class(inserting all the data)!!!");
    }

}

//from mainactivity
protected void onResume() {
    super.onResume();
    if (prefs.getBoolean("firstrun", true)) {

        //getDbData(prefs);
        // Do first run stuff here then set 'firstrun' as false
        // using the following line to edit/commit prefs
        prefs.edit().putBoolean("firstrun", false).commit();
    }
    connectionDb cdb = new connectionDb();
    cdb.execute("http://coolfacts.in/app/dbconnectservice.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:48:12.327

为了在您的 DBHelper 类中传递您的上下文，您可以遵循以下站点上列出的答案：[到处使用应用程序上下文？](https://stackoverflow.com/questions/987072/using-application-context-everywhere)

# php - 来自带有 PORT 的 URL 的 PHP file_get_contents

> ID：13990557
> 
> 赞同：0
> 
> 时间：2012-12-21T12:51:10.363
> 
> 标签：php

我正在尝试使用[PHP 函数](http://php.net/manual/en/function.file-get-contents.php) `file_get_contents()`。但是我试图打开的 URL 使用了一个端口，例如：

```
file_get_contents("http://212.21.323.32:8010") 
```

我无法打开这个 URL，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:56:42.410

就我个人而言，我会使用[`cURL`](http://php.net/manual/en/book.curl.php)和使用`CURLOPT_PORT`来设置您要连接的端口。

```
<?php
$cURL = curl_init('http://www.google.co.uk'); //Initialise cURL with the URL to connect to
curl_setopt($cURL, CURLOPT_PORT, 80); //Set the port to connect to
curl_setopt($cURL, CURLOPT_RETURNTRANSFER, true); //Get cURL to return the HTML from the curl_exec function

$HTML = curl_exec($cURL); //Execute the request and store the result in $HTML

echo $HTML; //Output the HTML
?> 
```

# c++ - std::find 编译失败

> ID：13990561
> 
> 赞同：0
> 
> 时间：2012-12-21T12:51:20.413
> 
> 标签：c++, stl, stdstring

如果我在代码中使用**std::find ，我的项目将无法构建。**我得到的错误如下

***usr/include/c++/4.6/bits/stl_algo.h:162:4：错误：'_ first*中的'operator=='不匹配。_gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* with _Iterator = char*, _Container = std::basic_string, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = char& == __val' /usr/include/c++ /4.6/bits/stl_algo.h:162:4：注意：候选人是：**

下面是我的代码..

```
 std::string lValueCmd = "";
        std::string lModeType = "";
        std::string lAPModeCmd = "sudo iwconfig /sbin/wlan0 | grep -i 'Mode:' | awk '{print $1}'";
      // function to retrive values from linux command and store it in lValueCmd
      lResult =    RequestCmdOutput( lAPModeCmd, lValueCmd )      ; // function to retrive values from linux command and store it in lValue Cmdd

     // std::cout << " the string is " << lValueCmd << std::endl;// debug
      std::string delimiter= ":";

      std::string::iterator pos;
      pos= std::find( lValueCmd.begin(), lValueCmd.end(), delimiter); // no error if I comment this line. 
```

我使用的头文件是 iostream 、 algorithm 和 string 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:52:29.837

您需要搜索单个字符，因为 `"'"`它是一个以空字符结尾的字符串，因此由字符`'`和组成`\0`，并且您当前的分隔符是`std::string`. `std::find`将比较字符串的元素，这些元素本身就是单个字符：

```
char delimiter= ':'; 
```

# c# - 由于无法打开连接，ASP.Net Web 应用程序被挂起

> ID：13990563
> 
> 赞同：0
> 
> 时间：2012-12-21T12:51:23.047
> 
> 标签：c#, asp.net, sql

我开发了一个使用 SQL Server 2005 作为后端的 ASP.Net Web 应用程序，并在 IIS 5.1 上配置了应用程序。

应用程序适用于少数事务（插入、更新），突然无法连接到 SQL Server（无法打开连接），因此超时。

每次数据库调用插入、更新后，我都会关闭连接、事务。

我也在连接字符串中明确指定了池，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:56:07.407

我认为最被接受的方法是通过 SqlCommand 对象的 CommandTimeout 属性。将其设置为 0 表示无限超时。

```
The default timeout is 30 seconds. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:29:10.140

您可以在 webconfig 中设置连接超时属性，还可以检查数据库支持的连接数，然后检查连接池大小。此外，您在 webconfig 中设置的超时属性与建立与 db 的连接所用的时间有关，代码中的命令超时属性与查询在超时之前可以运行的时间有关。

# objective-c - UITableView deleteRowsAtIndex & 数据源问题

> ID：13990564
> 
> 赞同：0
> 
> 时间：2012-12-21T12:51:25.230
> 
> 标签：objective-c, ios, uitableview, nsmutablearray

祝大家第 14 届 Baktun 快乐！

这件事一直困扰着我一段时间，我在谷歌上来回搜索，还检查了 SO 的答案，但我似乎无法掌握答案并将其应用于我的应用程序。如果你们中的一些人愿意提供帮助，那将不胜感激！

我得到了以下函数，当步进器达到 0 时，它会从 UITableView 中删除一个单元格。我希望单元格向左移动，所以当你按下 - 符号时，你会看到单元格滑出视图。我将 设置`sender.tag`为`[[cell stepper]setTag:indexPath.row];`in `CellForRowAtIndexPath`。

```
 - (void)stepperChanged:(UIStepper *)sender
{

    WinkelWagen *ww = [WinkelWagen sharedWinkelWagen];
    BWBand *band = [ww.winkelWagenArray objectAtIndex: sender.tag];
    NSDecimalNumber *nummer = [[NSDecimalNumber alloc]initWithFloat:sender.value];
    band.winkelmandjeAantal = nummer;
    [sender setValue:[band.winkelmandjeAantal doubleValue]];

    // Remove the cell and object from WinkelWagen if stepper.value turns 0
    if (sender.value == 0)
    {
        NSArray *deleteIndexPaths = [NSArray arrayWithObjects:
                                     [NSIndexPath indexPathForRow:sender.tag inSection:0],
                                     nil];
        [ww.winkelWagenArray removeObject:band];
        [self.tableView beginUpdates];
        [self.tableView reloadData];
        [self.tableView deleteRowsAtIndexPaths:deleteIndexPaths withRowAnimation:UITableViewRowAnimationNone];

        if ([winkelmandjeData count] == 0)
        {
            NSArray *addIndexPaths = [NSArray arrayWithObjects:
                                      [NSIndexPath indexPathForRow:0 inSection:0],
                                      nil];
            [self.tableView insertRowsAtIndexPaths:addIndexPaths withRowAnimation:UITableViewRowAnimationFade];
        }
        [self.tableView endUpdates];
    }
} 
```

更新：我已经解决了，`[[self.tableview]reloaddata]`但是动画没有播放。有人能告诉我应该如何正确处理数据和动画吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:00:32.493

我看到你可能有问题，但不知道它是否是你问题的答案。在您`if ([shoppingCartData count] == 0)`的表格中添加一行，但数据源保持不变。这可能会导致崩溃。

此外，在 之前`if`，您的数据源似乎是`ww.shoppingCartArray`，但在`if`您正在检查 的计数`shoppingCartData`。

希望这可以帮助！

# apache - 如何避免在 htaccess 中使用 Skip Flag？

> ID：13990565
> 
> 赞同：0
> 
> 时间：2012-12-21T12:51:27.450
> 
> 标签：apache, .htaccess

我正在尝试为 htaccess 文件中的重写条件创建一组要遵循的规则，并且跟踪要遵循的重写规则的计数变得越来越困难。

有没有其他方法可以在重写条件之后放置一组重写规则：

```
 RewriteCond %{HTTP_HOST} !^.*website-name\.com
        #S = Num. of rewrite rules in the if block + 1
        RewriteRule .? - [S=13]
        #If the host is website-name.COM
        RewriteRule ^dir/page.php(.*)   /dir-subdir.php [R,L,NC,QSA]
RewriteRule ^dir/page.php(.*)   /dir-subdir.php [R,L,NC,QSA] 
```

截至目前，遵循重写条件的规则数量超过 10 个，我们预计它会增加很多，这将使跟踪要遵循的规则数量变得困难。如果可用，“结束”或“中断”类型的语句可以使该过程更容易编写和维护。如果需要，将很高兴添加任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:09:11.647

你能改变指令的顺序吗？而不是说“跳过下一个 X 指令”将跳过的指令移到下面：

```
RewriteCond %{HTTP_HOST} !^.*website-name\.com
RewriteRule .? - [L] 
```

并且所有其他规则都在上面吗？

# selenium - 如何从 Selenium 中的文本框中获取输入的文本

> ID：13990566
> 
> 赞同：30
> 
> 时间：2012-12-21T12:51:29.380
> 
> 标签：selenium, junit, grid, webdriver, testng

我在 TextBox 或 Combobox 中输入了一个值，并想检索我刚刚输入的值。我看到 Selenium Weblement 方法`getText()`没有检索到值，似乎输入的文本没有被推送到 DOM 中。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-21T13:05:08.923

该`getText()`方法用于检索元素标签之间的文本节点，例如：

```
<p>Something</p> 
```

`getText()`将返回“某事”

在文本框中键入的文本进入 value 属性，因此您可以尝试以下操作：

```
findElement(By.id("someid")).getAttribute("value"); 
```

`ComboBox`有点不同。但是，如果您使用的是`Select`对象，则可以使用以下方法：

```
Select selectItem = new Select(findElement(By.id("someid")));
selectItem.getFirstSelectedOption().getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:38:17.057

试试`getValue`它是文本字段还是下拉框

```
String lastname=selenium.getValue("//*[@id='lastName']");
System.out.println(lastname); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-19T07:56:56.023

**这就是我们如何使用 Selenium + Python 获取写入文本框中的文本的方法：**

```
text = driver.find_element_by_xpath("Type_Xpath_Here").get_attribute('value')
print(text) 
```

# objective-c - Plist 中的 NSDictionary 和 NSArray

> ID：13990573
> 
> 赞同：-1
> 
> 时间：2012-12-21T12:51:59.117
> 
> 标签：objective-c

我想做以下事情：

带有 az 和 # 用于数字或未知字符的 plist 文件.. 所以 27 个数组。我想将这 27 个数组存储在字典中，即 plist 文件中。

它也可能发生，字典数组中没有表示一个字母......

我需要制作 27 个数组并检查它们是否存在还是有更简单的方法？

我想在表格视图中显示它们......表格视图的“a”部分中键“a”的所有值等等......

有什么想法可以节省时间和代码吗？

感谢我可以尝试的任何可能性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:19:07.967

试试这个代码

在 pList 文件中写入数据

```
 NSString *filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSMutableArray *arr = [NSMutableArray new];

    for (char value = 'a'; value<='z'; value++) {
        [arr addObject:[NSString stringWithFormat:@"%c",value]];
    }

    NSDictionary *dict = [NSDictionary dictionaryWithObject:arr forKey:@"alphabet"];

    [dict writeToFile:filePath atomically:YES] 
```

设置 numberOfSectionsInTableView

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

return [[dict objectForKey:@"alphabet"]count];
} 
```

设置 numberOfRowsInSection

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

return 1;

} 
```

在 cellForRowAtIndexPath 中设置单元格文本

```
 [[cell textLabel] setText:[[dict objectForKey:@"alphabet"]objectAtIndex:indexPath.section]]; 
```

# jquery - 元素超出窗口添加类

> ID：13990574
> 
> 赞同：0
> 
> 时间：2012-12-21T12:52:03.103
> 
> 标签：jquery, css

我有一个由无序列表组成的菜单，其中嵌套列表设置为可见性：隐藏，然后在悬停时显示。

菜单是动态的，所以我无法预测哪个可能靠近窗口的边缘，当在边缘附近调用下拉菜单时，会出现滚动条，因为它会溢出窗口的边界。如果发生这种情况，我需要的是能够添加一个类。

任何帮助将不胜感激。

编辑：刚刚做了这个问题jsfiddle.net/TP8v9的简短提琴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T12:58:34.860

利用：

```
if ($(document).width() > $(window).width()) {
    // Overflowing
} 
```

[示例 JS 小提琴](http://jsfiddle.net/8PJTG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:19:05.593

当鼠标悬停事件被触发时，您可以检查即将出现的下拉菜单的宽度和位置，并检查它是否大于窗口的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:19:58.857

尝试这样的事情。

```
$(document).ready(function() {
    if($(document).width() > $(window).width(){
        $('#some_element').addClass('some_class')
        /* Assuming you want to add some_class to some_element
           if the width document width is more than window's
           width
        */
    }
}); 
```

# url - 如何获取使用 Java Play 中的 Upload 对象上传的文件的完整 URL？

> ID：13990576
> 
> 赞同：0
> 
> 时间：2012-12-21T12:52:12.267
> 
> 标签：url, upload, playframework-1.x

我正在 Java Play 中编写图像上传器！以风格

[https://gist.github.com/1256286#file-picture-java-L3](https://gist.github.com/1256286#file-picture-java-L3)

这很棒。图像是在对象中使用此函数呈现的`Controller`（这里`Picture`是一个`Model`包含有关图像文件的元数据的实现：

```
public static void show(Long id) {
    Logger.info("loading id=%s", id);
    Picture picture = Picture.findByKey(id);
    response.setContentTypeIfNotSet(picture.contentType);
    renderBinary(new ByteArrayInputStream(picture.file), picture.file.length);
} 
```

我想添加一个`url`成员，`Picture`其中包含给定图片的此函数的绝对 URL。无论 Java Play 在哪里，我如何才能以一种有效的方式填充此成员！应用程序托管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:33:32.470

虽然我没有在 1.x 版本中尝试过，但我建议检查[Router API](http://www.playframework.org/documentation/api/1.2.5/play/mvc/Router.html)，但有一些方法表明它们可以选择创建绝对路由（我是 Play 2 用户，没有使用它们的经验）。

还有像ie这样的方法。`getBaseUrl()`或者`getFullUrl(String action, Map<String,Object> args)`所以我只是猜测他们可能会帮助您解决问题。

# c# - 使用 c# 调用 clearcase 与以前的版本窗口进行比较

> ID：13990577
> 
> 赞同：-1
> 
> 时间：2012-12-21T12:52:18.930
> 
> 标签：c#, clearcase, clearcase-automation

我想在 C# 中以编程方式将 clearcase 文件与其以前的版本进行比较。

有没有办法使用 C# CAL 库为文件调用 clearcase 比较窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:12:08.177

首先，如“[如何在 C# 应用程序中调用 VBScript 文件？](https://stackoverflow.com/questions/200422/how-to-call-a-vbscript-file-in-a-c-sharp-application) ”中所述，最好将 cleartool diff 调用包装在 VB 脚本中，然后从 C# 程序中调用该脚本。

这将允许您的 VB 脚本调用 cleartool 命令，其中包含该命令`diff --graphical`（这将打开差异窗口）

```
ClearCase.ClearTool CT = new ClearCase.ClearTool();
string result;
result = CT.CmdExec("diff --graphical ..."); 
```

* * *

OP Ramesh [K](https://stackoverflow.com/users/1294722/ramesh-k) [评论](https://stackoverflow.com/questions/13990577/invoking-clearcase-compare-with-previous-version-window-using-c-sharp#comment19392468_13990859)：

> 以上`CmdExec`对我有用。我用了：

```
 ct.CmdExec("diff -graphical -pre "+filePath); 
```

> 直接在 C# 应用程序中调用 ClearCase diff 工具的图形界面。

# algorithm - 如何防止一系列整数经常具有相同的值

> ID：13990583
> 
> 赞同：1
> 
> 时间：2012-12-21T12:52:38.833
> 
> 标签：algorithm, hft

我有“在线”系列整数，所以每隔几毫秒我就有一个新数字。没有指定频率 - 有时我有很多数字，有时我没有数字。

实际上，这个数字就是所谓的股票“真实价格”。我在我的交易应用程序中使用它。

现在我只使用最后一个数字作为“真实价格”，所以我根本不跟踪系列。但是这种方法存在一些问题。让我们看看这个系列：

1.  98; 最后 = 98
2.  100; 最后 = 100
3.  101; 最后 = 101
4.  100; 最后 = 100
5.  101; 最后 = 101
6.  100; 最后 = 100
7.  101; 最后 = 101
8.  100; 最后 = 100
9.  101; 最后 = 101
10.  100; 最后 = 100
11.  99; 最后 = 99
12.  98; 最后 = 98

问题是在很短的时间内我的“真实价格”从 100 变为 101 并返回太多次。真实价格的每一次变化都意味着大量的工作（重新计算、下订单等），所以我不需要像那样改变真实价格。这种变化（100-101-100-101）是由于“测量问题”，我需要过滤它。我无法修复“测量”，所以我必须在这里修复它。

一种方法是使用“3LastAverage”算法：

1.  98; 3lastAverage = 98
2.  100; 3lastAverage = 99
3.  101; 3lastAverage = 99.67 => 100
4.  100; 3lastAverage = 100.33 => 100
5.  101; 3lastAverage = 101
6.  100; 3lastAverage = 100
7.  101; 3lastAverage = 101
8.  100; 3lastAverage = 100
9.  101; 3lastAverage = 101
10.  100; 3lastAverage = 100
11.  99; 3lastAverage = 100
12.  98; 3lastAverage = 99

如您所见，这种方法并不总是有效，我仍然有 100-101-100 问题。可能我可以使用更多的数字来计算“平均值”......但由于这样的例子，这种方法对我不起作用：

1.  99; 3lastAverage = 99（我想要 99）
2.  100; 3lastAverage = 100（我想要 100）
3.  101; 3lastAverage = 100（我想要 101）
4.  102; 3lastAverage = 101（我想要 102）
5.  103; 3lastAverage = 103（我想要 103）

一般来说，当事情进展顺利时，我需要 truePrice 只是最后一个数字！

所以，有“在线”系列的整数，我需要计算这个系列的所谓“真值”，它是这样定义的：

*   如果一切正常，那么这只是最后一个数字
*   如果系列中有太多相同的数字（因为测量问题），那么“真实值”不应该经常改变。应使用最合适的值

我的建议是：

*   只是禁止“真实价值”每秒有超过一次相同的价格。

例如：

1.  0.000：98；真值 = 98
2.  0.100：100；真值 = 100
3.  0.200：101；真值 = 101
4.  0.300：100；真值 = 101（100 已在 0.2 秒前的步骤 2 中使用）
5.  0.400：98；真值 = 101（98 已在 0.4 秒前的步骤 1 中使用）
6.  0.500：99；真值 = 99
7.  0.600：100；真值 = 99（0.5 秒前在步骤 2 中使用了 100）
8.  1.500：101；真值 = 101（自使用 101 以来已过去超过一秒）。

然而，这种方法也有这样的“错误”：

1.  99 吨 = 99
2.  100 吨 = 100
3.  101 吨 = 101
4.  102 吨 = 102
5.  103 吨 = 103
6.  102 吨 = 103
7.  101 吨 = 103
8.  100 吨 = 103
9.  99 吨 = 103
10.  98 吨 = 98
11.  97 吨 = 97

这里的问题是“tp”在 103 级“冻结”了太长时间。

对于这么大的问题，我真的很抱歉。但可能有人正在解决密切的问题并可以分享经验。我的主要问题是我确实需要同时解决两个相反的问题：

*   “真实价格”必须只是一般条件下的“最后”值
*   “真实价格”不应该经常改变（所以我需要以一种或另一种方式使用以前的值）
*   也很难说我们什么时候有“一般”条件，什么时候有“测量问题”

所以我的问题真的很模糊，我只是希望有人试图解决这样的问题。一如既往，应该使用“常识”来解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T14:52:15.857

您希望对价格的长期（低频）变化做出反应，但忽略短期（高频）的小幅波动。所以你需要的是一个[**低通滤波器**](http://en.wikipedia.org/wiki/Low-pass_filter)。

有许多不同种类的具有不同特性的低通滤波器。移动平均线是一种低通滤波器，但它有一个问题（您观察到），它用平滑换取滞后（为了平滑高频波动，您需要在相当长的序列上进行平均，但随后低频变化需要很长时间才能显现出来）。

因此，您可以尝试其他低通滤波器，例如[指数加权移动平均线](http://en.wikipedia.org/wiki/Exponential_smoothing)，看看它们是否满足您的要求。

关于这个任务要说的另一件事是，当你决定何时重新计算最接近移动平均线的整数是一件坏事，因为当移动平均线接近两个整数之间的中间时，它会放大小的波动. （如果移动平均线从 99.49 到 99.51，舍入操作会将这个小波动放大到从 99 到 100 的大波动。）

你应该做的是使用[**滞后**](http://en.wikipedia.org/wiki/Hysteresis#Hysteresis_in_engineering)来避免这种响应。重新计算时，记录移动平均 a 的当前值 a 0 ，*直到*移动*平均*[a]至少*移动*了 ε，即 | *一个* - <em>一个[0] | ≥ε。

# cakephp - 如何在 CakePHP 中使用一个表单保存多个数据实例

> ID：13990595
> 
> 赞同：0
> 
> 时间：2012-12-21T12:53:19.917
> 
> 标签：cakephp, cakephp-2.0, forms

我建立了一个屏幕，管理员可以在其中添加和编辑用户。我可以毫无问题地添加用户，但是当我测试如何编辑用户时，我注意到如果我有多个用户，我只能编辑列出的最后一个用户。我无法编辑任何其他用户。

这是我的代码：

```
<?php foreach ($personel as $person) { ?>
<div id="edituser<?php echo $person['Personel']['id']; ?>" class="modal" style="display:none;">
    <?php
        $edituserformname = "editUser" + $person['Personel']['id'];
    ?>
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>Edit User - <?php echo $person['Personel']['firstname']; ?> <?php echo $person['Personel']['surname']; ?></h3>
    </div>
    <div class="modal-body iframed">
        <?php echo $
        <?php 
            echo $this->Form->create('Personel', array(
                'class' => 'form-horizontal',
                'id' => $edituserformname
            ));
            echo $this->Form->input('id', array(
                'type' => 'hidden',
                'value' => $person['Personel']['id']
            ));
            echo $this->Form->input('firstname', array(
                'type' => 'text',
                'label' => 'First Name',
                'class' => 'span5',
                'value' => $person['Personel']['firstname']
            ));
            echo $this->Form->input('surname', array(
                'type' => 'text',
                'label' => 'Surname',
                'class' => 'span5',
                'value' => $person['Personel']['surname']
            ));
            echo $this->Form->input('email', array(
                'type' => 'text',
                'label' => 'E-Mail',
                'class' => 'span5',
                'value' => $person['Personel']['email']
            ));
            echo $this->Form->input('companyid', array(
                'type' => 'hidden',
                'value' => $company['Company']['id']
            ));
            echo $this->Form->input('accesslevel', array(
                'label' => 'Access Level',
                'options' => $roles,
                'empty' => 'Select Access Level',
                'class' => 'span5',
                'value' => $person['Personel']['accesslevel']
            ));
            $pocval = array('1' => 'Yes', '0' => 'No');
            echo $this->Form->input('poc', array(
                'label' => 'Point of Contact?',
                'options' => $pocval, 
                'value' => $person['Personel']['poc']
            ));
            echo $this->Form->input('password', array(
                'type' => 'text',
                'label' => 'Password',
                'class' => 'span5',
                'value' => $company['Personel']['password']
            ));
            echo $this->Form->input('telephone', array(
                'type' => 'text',
                'label' => 'Telephone',
                'class' => 'span5',
                'value' => $company['Personel']['telephone']
            ));
            echo $this->Form->input('type', array(
                'type' => 'hidden',
                'value' => '0'
            ));
         ?>
     </div>
    <div class="modal-footer">
        <?php
        echo $this->Form->submit('Save & Close', array(
                'type' => 'submit',
                'class' => 'btn btn-primary',
                'id' => 'editusermodal'
            ));
        echo $this->Form->end();
         ?>
    </div>
</div>
<?php } ?> 
```

我该如何解决这个问题？我对使用 iFrame 有一个想法，但我不愿意使用这种方法。我宁愿能够通过 CakePHP 做到这一点。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:06:15.397

您不需要使用 iFrame。它不起作用，因为您的表单没有正确关闭。

`$this->Form->create()`and`$this->Form->end()`应该在 div 之外。

尝试以下操作：

```
<?php
    echo $this->Form->create('Personel', array(
        'class' => 'form-horizontal',
        'id' => $edituserformname
    ));
?>
    <div class="modal-body iframed">
        <?php 
            echo $this->Form->input('id', array(
                'type' => 'hidden',
                'value' => $person['Personel']['id']
            ));
            echo $this->Form->input('firstname', array(
                'type' => 'text',
                'label' => 'First Name',
                'class' => 'span5',
                'value' => $person['Personel']['firstname']
            ));
            echo $this->Form->input('surname', array(
                'type' => 'text',
                'label' => 'Surname',
                'class' => 'span5',
                'value' => $person['Personel']['surname']
            ));
            echo $this->Form->input('email', array(
                'type' => 'text',
                'label' => 'E-Mail',
                'class' => 'span5',
                'value' => $person['Personel']['email']
            ));
            echo $this->Form->input('companyid', array(
                'type' => 'hidden',
                'value' => $company['Company']['id']
            ));
            echo $this->Form->input('accesslevel', array(
                'label' => 'Access Level',
                'options' => $roles,
                'empty' => 'Select Access Level',
                'class' => 'span5',
                'value' => $person['Personel']['accesslevel']
            ));
            $pocval = array('1' => 'Yes', '0' => 'No');
            echo $this->Form->input('poc', array(
                'label' => 'Point of Contact?',
                'options' => $pocval, 
                'value' => $person['Personel']['poc']
            ));
            echo $this->Form->input('password', array(
                'type' => 'text',
                'label' => 'Password',
                'class' => 'span5',
                'value' => $company['Personel']['password']
            ));
            echo $this->Form->input('telephone', array(
                'type' => 'text',
                'label' => 'Telephone',
                'class' => 'span5',
                'value' => $company['Personel']['telephone']
            ));
            echo $this->Form->input('type', array(
                'type' => 'hidden',
                'value' => '0'
            ));
         ?>
     </div>
    <div class="modal-footer">
        <?php
            echo $this->Form->submit('Save & Close', array(
                    'type' => 'submit',
                    'class' => 'btn btn-primary',
                    'id' => 'editusermodal'
                ));
             ?>
    </div>
<?php 
    echo $this->Form->end(); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T14:51:55.557

如果您想一次编辑多个记录，您可以使用以下

```
$this->Form->input('ModelName.n.field_name', $options); 
```

因此，要让所有这些都在循环中运行：

```
echo $this->Form->create(); // only one start
foreach($users as $k => $user) {
    echo $this->Form->id(sprintf('Personel.%s.id', $k), array(
         'value' => $user['Personel']['id']
    ));
    echo $this->Form->input(sprintf('Personel.%s.field', $k), array(
         'value' => $user['Personel']['field']
    ));

    // etc
}
echo $this->Form->end(); // only one end 
```

为了保存它们，你可以使用`saveAll()`

```
$this->Personel->saveAll($this->data['Personel']); 
```

# mysql - 如何在mysql中获取行ID

> ID：13990596
> 
> 赞同：2
> 
> 时间：2012-12-21T12:53:23.067
> 
> 标签：mysql, sql

我想获取不同idfeedback的行id

```
SELECT  l.idfeedback_store,
    @curRow := @curRow + 1 AS row_number
FROM    feedback_store l
JOIN    (SELECT @curRow := 0) r; 
```

结果

```
idfeedback_store        row_number
1                           1
1                           2
1                           3
2                           4
2                           5
2                           6
2                           7
3                           8
3                           9
3                          10
4                          11 
```

要求的结果

```
idfeedback_store        row_number
1                           1
1                           2
1                           3
2                           1
2                           2
2                           3
2                           4
3                           1
3                           2
3                           3
4                           1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:59:08.057

您可以使用类似的东西：

```
select idfeedback_store, group_row_number
from 
(
  select idfeedback_store,
    @num := if(@idfeedback_store = `idfeedback_store`, @num + 1, 1) as group_row_number,
    @idfeedback_store := `idfeedback_store` as dummy
  from feedback_store
) src 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d39e8/5)

结果：

```
| IDFEEDBACK_STORE | GROUP_ROW_NUMBER |
---------------------------------------
|                1 |                1 |
|                1 |                2 |
|                1 |                3 |
|                2 |                1 |
|                2 |                2 |
|                2 |                3 |
|                2 |                4 |
|                3 |                1 |
|                3 |                2 |
|                3 |                3 |
|                4 |                1 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:03:45.190

试试这个：

```
SELECT  l.idfeedback_store, IF(@last=(@last:=idfeedback_store), @curRow := @curRow + 1, @curRow:=1) AS row_number
FROM feedback_store l, (SELECT @curRow := 0, @last:=0) r; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:58:46.340

```
SELECT  
  idfeedback_store,
  @curRow := CASE WHEN @curStore = idfeedback_store THEN @curRow + 1 ELSE 1 END AS row_number,
  @curStore := idfeedback_store
FROM
  feedback_store; 
```

# silverlight - 如何从 DataGrid 的 SelectedItem 中获取值？

> ID：13990597
> 
> 赞同：0
> 
> 时间：2012-12-21T12:53:26.857
> 
> 标签：silverlight, entity-framework, mvvm, prism

在我的项目中，我有一个 Datagrid，我绑定了下面列出的以下字段。

```
CustomerID, Name, Email. 
```

我有一个名为`WS_Customer`. 我已经为datagrid中的所有行放置了一个按钮控件。如果我单击按钮意味着我需要获取`CustomerID`值。如何得到它。

如果我这样说的话，

```
WS_Customer  getid=(WS_Customer)DG.SelectedItem; 
```

getidshows null.. 我是如何得到这个值的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:04:16.497

假设您正在使用 MVVM ...并且您的 DataGrid 绑定到 WS_Customer 对象的集合，您可以在视图模型中放置一个属性，您可以将其绑定到 DataGrid 的 SelectedItem 属性。请记住，必须为 SelectedItem 属性选择行才能具有值。

在xml中：

```
<DataGrid SelectedItem="{Binding SelectedWS_Customer}" /> 
```

在视图模型中：

```
public WS_Customer SelectedWS_Customer
{          

  get
  {
      return _selectedWS_Customer; //private variable
  }
  set
  {
       _selectedWS_Customer = value;
  }
} 
```

# hibernate - 父实体的休眠 @Version

> ID：13990598
> 
> 赞同：1
> 
> 时间：2012-12-21T12:53:31.593
> 
> 标签：hibernate

我想实现父母的标准功能，就像它的孩子的拥有实体一样，就像对`Order`- `OrderLine`。我想在一个视图中修改订单和订单行，并仅提供基于版本字段的乐观锁定`Order`。我还想将索引列表用作索引存储在数据库中的集合。

我尝试了不同的设置，但都没有奏效。我的设置是：

数据库脚本：

```
CREATE TABLE Site_Order (
    order_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    order_number INT NOT NULL,
    version BIGINT NOT NULL
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO Site_Order (order_number, version) VALUES (1, 1);

CREATE TABLE Order_Line (
    order_line_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
    order_id INT NOT NULL,
    product_name VARCHAR(100),
    idx INT NOT NULL,
    FOREIGN KEY (order_id) REFERENCES Site_Order(order_id) ON UPDATE CASCADE ON DELETE CASCADE
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO Order_Line (order_id, product_name, idx) VALUES (1, "Coffee", 0); 
```

实体：

```
@Entity @Table(name = "site_order")
public class SiteOrder implements java.io.Serializable {

    private Integer orderId;
    private int orderNumber;
    private long version;
    private List<OrderLine> orderLines = new ArrayList<OrderLine>(0);

    //constructors, fileds getters and setters

    @OneToMany(fetch = FetchType.LAZY, orphanRemoval=true)
    @Cascade({CascadeType.SAVE_UPDATE, CascadeType.DELETE, CascadeType.MERGE})
    @OrderColumn(name="idx", nullable=false)
    @JoinColumn(name="order_id", nullable=false)
    public List<OrderLine> getOrderLines() {
        return this.orderLines;
    }

    protected void setOrderLines(List<OrderLine> orderLines) {
        this.orderLines = orderLines;
    }

    public void addOrderLine(OrderLine ol) {
        orderLines.add(ol);
        if (!orderLine.getSiteOrder().equals(this)) {
            orderLine.getSiteOrder().getOrderLines().remove(orderLine);
            orderLine.setSiteOrder(this);
        }
    }

    public void removeOrderLine(OrderLine ol) {
        orderLines.remove(ol);
        if (orderLine.getSiteOrder().equals(this)) {
            orderLine.setSiteOrder(null);
        }
    }

}

@Entity @Table(name = "order_line")
public class OrderLine implements java.io.Serializable {

    private Integer orderLineId;
    private SiteOrder siteOrder;
    private String productName;

    //constructors, fileds getters and setters

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "order_id", nullable = false, insertable=false, updatable=false)
    public SiteOrder getSiteOrder() {
        return this.siteOrder;
    }

    public void setSiteOrder(SiteOrder siteOrder) {
        this.siteOrder = siteOrder;
        if ((siteOrder != null) && (!siteOrder.getOrderLines().contains(this))) {
            siteOrder.addOrderLine(this);
        }
    }

} 
```

典型用法是 (1) 向现有订单添加新订单行，其中订单版本得到更新； (2) 修改订单行的属性，如数量、产品、价格等，不影响订单版本。

(1):

```
Session session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();
SiteOrder s = (SiteOrder)session.get(SiteOrder.class, Integer.valueOf(1));
OrderLine o = new OrderLine();
o.setProductName("Cup");
s.addOrderLine(o);
session.getTransaction().commit();
session.close(); 
```

(2):

```
Session session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();
SiteOrder s = (SiteOrder)session.get(SiteOrder.class, Integer.valueOf(1));
s.getOrderLines().get(0).setProductName("Tea");
session.getTransaction().commit();
session.close(); 
```

有没有办法在 Hibernate 中实现上述版本控制问题的通用解决方案？

# c++ - 如何检测箭头键

> ID：13990600
> 
> 赞同：0
> 
> 时间：2012-12-21T12:53:36.057
> 
> 标签：c++, console-application, visual-c++-2010, conio

我创建了一个应用程序来检测键盘上的向上和向下键，但按下这些键后不会打印任何内容。

我正在使用 Visual C++ 2010

```
 #include <iostream>
    #include <conio.h>
    using namespace std;

void main()
    {
        char x;

        while(1)
        {

            x = getch();
            if(x==0 || x==224)
            {
                x=getch();
                if(x==80)
                {
                    cout << "down"<<endl;
                }

                else if(x==72)
                {
                    cout << "up"<<endl;
                }
            }//if x==0 || x=224
        }//while1
    }//main 
```

可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T02:28:26.093

只是为了回答它为什么不起作用：您正在尝试将用户的输入用作未签名的。您的字符变量已签名，因此该值与您的预期不同。无符号的 224 是有符号的 -32。

就您的循环而言，我建议将其更改为此。

```
void main()
    {
        char x;

        while(true)
        {
            while(!kbhit()){}
            x = getch();

            if(x==0 || x==-32)
            {
                x=getch();
                if(x==80)
                {
                    cout << "down"<<endl;
                }

                else if(x==72)
                {
                    cout << "up"<<endl;
                }
            }//if x==0 || x=224
        }//while1
    }//main 
```

该程序仍将永远循环。然后我添加的下一个循环将在没有按键被按下（缓冲）时继续循环。然后 getch() 从缓冲区中获取下一个字符。现在您遇到的问题是您有 224 (0xE0)，这在技术上是正确的。然而在二进制中，显然 -32 和 224 看起来是一样的。

起初我遇到了一些相同的问题，我无法弄清楚为什么我的代码没有命中正确的代码块，这是因为第一个字符实际上是 -32 (0xE0)

希望这会有所帮助，尽管这是一个非常古老的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T10:36:20.540

You can use the [curses.h](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/) library. Read their guide and it should be very easy from there. After you take input using `getch()` (store the input into an int, not a char), you can verify if it's one of the arrow keys using the defined [keycodes](https://www.gnu.org/software/guile-ncurses/manual/html_node/Getting-characters-from-the-keyboard.html). Just make sure you used `keypad(stdscr, TRUE)` before for the program to be able to recognize the arrow keys.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:58:06.560

我们 kbhit() 获取键盘方向键

# javascript - localstorage 或 sessionStorage 无法在跨浏览器上持久保存数据

> ID：13990608
> 
> 赞同：2
> 
> 时间：2012-12-21T12:54:22.917
> 
> 标签：javascript, html, jquery

我正在开发一个小型应用程序，但我遇到了一个问题。我希望在一个浏览器（例如 Firefox）上填写时在 HTML 页面上存储表单元素值，并在另一个浏览器（例如 Chrome）中加载同一页面时自动填充数据。如果有人有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:06:25.230

除非客户端可以登录并且您愿意通过您的服务器共享此数据，否则您无法更改与当前浏览器不同的浏览器的行为，因此在您的示例中，Firefox 无法更改 cookie、localstorage 或 Chrome 的任何内容。浏览器往往只在首次运行时共享 cookie 等信息；例如与您一起从 Firefox 导入向导。

我可以想到两种替代方案来实现这一目标：

*   数据存储在服务器端的身份验证系统。
*   通过自定义浏览器扩展。您可以创建一个自定义浏览器扩展，直接写入其他浏览器的数据。不过，这确实需要用户安装该扩展程序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-21T12:58:45.687

这个链接解释了如何实现[http://www.nczonline.net/blog/2010/09/07/learning-from-xauth-cross-domain-localstorage/](http://www.nczonline.net/blog/2010/09/07/learning-from-xauth-cross-domain-localstorage/)

这并不简单，但这是我知道目前可以在不使用 cookie 的情况下完成的方式。

# unit-testing - 安排法案断言替代方案

> ID：13990615
> 
> 赞同：13
> 
> 时间：2012-12-21T12:54:48.320
> 
> 标签：unit-testing, tdd, bdd, arrange-act-assert

一般的问题是**AAA 是否有用于单元测试的替代模式**？如果是的话，看看一些例子并了解它们的优缺点会非常有趣。

并且作为 AAA 测试的最简单示例（在 c# 中，为简单起见使用 var）：

```
// Arranging
var annualSalary = 120000M;
var period = 3; // for a quarter profit
var calc = new SalaryCalculator();

// Acting
var result = calc.CalculateProfit(annualSalary, period); 

// Assertion
Assert.IsEqual(40000, result); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T15:13:40.060

我喜欢的东西与其说是 AAA 的替代品，不如说是一种变体。我认为它是*Arrange-Assert(not)-Act-Assert*，但其他人称之为*Guard Assertion*。这个想法是要有一个断言，以确保该法案的预期结果在该法案之前尚未出现。[这里](https://stackoverflow.com/questions/1021007/should-it-be-arrange-assert-act-assert)有一个很好的讨论。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T13:24:45.397

*行为驱动开发*还有另一种表示法：**Given** - **When** - **Then**。c# 的示例是[SpecFlow](http://www.specflow.org/specflownew/)，而[Jasmin](http://pivotal.github.com/jasmine/)的示例是 JavaScript。这两个资源都充满了使用这种表示法的例子。**GWT**方法通常用于行为驱动开发和面向方面的编程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T14:03:11.780

一些最早的 mocking 框架（至少在 .Net 世界中）迫使您使用[Record/Replay](http://ayende.com/blog/3072/the-record-replay-verify-model)模式。我说强制是因为我觉得它不是很自然或可读，而且当时没有其他选择。

这催生了一场新的隔离框架竞赛，促进了 AAA 形式，我认为这是最能揭示意图的方法。更多关于[这里](http://blogs.clariusconsulting.net/kzu/whats-wrong-with-the-recordreplyverify-model-for-mocking-frameworks/)的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T17:17:17.580

当您使用参数化测试时，通常您可以将“排列”或“给定”部分移动到参数中。但是，原则仍然存在

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-15T15:53:02.213

单元测试中使用的另一种常见模式是**四阶段测试模式**：

1.  设置
2.  执行
3.  查看
4.  拆除

第一步与 AAA 模式基本相同。但是，我发现四阶段模式更适合您必须自己清理的语言，例如 C 或 C++。第 4 步（拆解）是释放任何分配的内存或销毁为测试创建的对象的地方。

在您不分配任何内存或垃圾收集器负责解除分配的情况下，第四步大部分时间都未使用，因此使用 AAA 模式更有意义。

例如，在 C++ 中，上述测试可能是：

```
// Setup
int annualSalary = 120000;
int period = 3; // for a quarter profit
int result;
SalaryCalculator calc = new SalaryCalculator();

// Execute
result = calc.CalculateProfit(annualSalary, period); 

// Check
CHECK_EQUAL(40000, result);

// Teardown
delete calc; 
```

# asp.net-mvc - asp.net mvc 从包中排除 css 文件

> ID：13990622
> 
> 赞同：26
> 
> 时间：2012-12-21T12:55:19.657
> 
> 标签：asp.net-mvc, bundling-and-minification

我有这样的捆绑

```
bundles.Add(new StyleBundle("~/Content/themes/default/css")
       .IncludeDirectory("~/Content/themes/Default", "*.css")); 
```

但我想从中排除一个 CSS 文件。

是否可以在不指定捆绑包中的每个 CSS 文件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-21T14:36:31.240

尝试使用[IgnoreList.Ignore](https://msdn.microsoft.com/en-us/library/system.web.optimization.ignorelist.ignore(v=vs.110).aspx)；`bundles.IgnoreList.Ignore(...)`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-21T14:41:49.620

扩展方法可能是您需要的：

```
public static class BundleExtentions
{
    public static Bundle IncludeDirectoryWithExclusion(this StyleBundle bundle, string directoryVirtualPath, string searchPattern, params string[] toExclude)
    {
        var folderPath = HttpContext.Current.Server.MapPath(directoryVirtualPath);

        foreach (var file in Directory.GetFiles(folderPath, searchPattern))
        {
            if (!String.IsNullOrEmpty(Array.Find(toExclude, s => s.ToLower() == file.ToLower())))
            {
                continue;
            }     

            bundle.IncludeFile(directoryVirtualPath + "/" + file);
        }

        return bundle;
} 
```

然后用法应该是：

```
bundles.Add(new StyleBundle("~/Content/themes/default/css")
   .IncludeDirectoryWithExclusion("~/Content/themes/Default", "*.css", "file-you-dont-want.css")); 
```

我目前不在 PC 上，因此上述内容未经测试，但应该为您提供解决方案的模板。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-18T09:26:46.120

我已经改进了 Jon Malcolm 的好建议（以及 Satpal 的一些更新[）](https://stackoverflow.com/a/18739040/1671558)，以解决它所具有的一些缺点：

1) 它使用“.min”打破了捆绑包的默认行为。文件

2）它不允许搜索模式，但只能排除文件

```
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.Optimization;

public static class BundleExtentions
{
    public static Bundle IncludeDirectoryWithExclusion(this Bundle bundle, string directoryVirtualPath, string searchPattern, bool includeSubDirectories, params string[] excludePatterns)
    {
        string folderPath = HttpContext.Current.Server.MapPath(directoryVirtualPath);

        SearchOption searchOption = includeSubDirectories
                                        ? SearchOption.AllDirectories
                                        : SearchOption.TopDirectoryOnly;

        HashSet<string> excludedFiles = GetFilesToExclude(folderPath, searchOption, excludePatterns);
        IEnumerable<string> resultFiles = Directory.GetFiles(folderPath, searchPattern, searchOption)
                                                    .Where(file => !excludedFiles.Contains(file) && !file.Contains(".min."));

        foreach (string resultFile in resultFiles)
        {
            bundle.Include(directoryVirtualPath + resultFile.Replace(folderPath, "")
                    .Replace("\\", "/"));
        }

        return bundle;
    }

    private static HashSet<string> GetFilesToExclude(string path, SearchOption searchOptions, params string[] excludePatterns)
    {
        var result = new HashSet<string>();

        foreach (string pattern in excludePatterns)
        {
            result.UnionWith(Directory.GetFiles(path, pattern, searchOptions));
        }

        return result;
    }
} 
```

我的一个示例用法是包含 lib 文件夹中以 angular 开头的所有库，但不包括所有语言环境脚本（因为稍后将根据语言在单独的包中添加一个）：

```
bundles.Add(new Bundle("~/bundles/scripts")
                .Include("~/wwwroot/lib/angular/angular.js") // Has to be first
                .IncludeDirectoryWithExclusion("~/wwwroot/lib", "*.js", true, "*.locale.*.js")); 
```

如果您同时拥有 angular.min.js 和 angular.js 并在调试中添加未缩小的版本并在发行版中使用现有的 .min.js，这将正常运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T18:00:18.297

这是另一个重载现有`IncludeDirectory`方法并支持搜索子目录的扩展方法。

```
public static class BundleExtensions
{
    public static Bundle IncludeDirectory(
        this Bundle bundle,
        string directoryVirtualPath,
        string searchPattern,
        params string[] filesToExclude)
    {
        return IncludeDirectory(bundle, directoryVirtualPath, searchPattern, false, filesToExclude);
    }
    public static Bundle IncludeDirectory(
        this Bundle bundle,
        string directoryVirtualPath,
        string searchPattern,
        bool searchSubdirectories,
        params string[] filesToExclude)
    {
        var physicalPath = HttpContext.Current.Server.MapPath(directoryVirtualPath);
        return bundle.Include(Directory
            .EnumerateFiles(physicalPath, searchPattern, searchSubdirectories ? SearchOption.AllDirectories : SearchOption.TopDirectoryOnly)
            .Select(physicalFileName => physicalFileName.Replace(physicalPath, directoryVirtualPath).Replace(Path.DirectorySeparatorChar, Path.AltDirectorySeparatorChar))
            .Where(virtualFileName => !filesToExclude.Contains(virtualFileName))
            .ToArray());
    }
} 
```

# asp.net-mvc - HttpCache vs Singleton - MVC 应用程序的最佳实践

> ID：13990623
> 
> 赞同：8
> 
> 时间：2012-12-21T12:55:21.543
> 
> 标签：asp.net-mvc, singleton, http-caching

我对 HttpCache 和 Singleton 方法的理解有点困惑。

我的应用程序使用 Asp.net MVC，场景是，我有一些永远不会改变的数据列表和一些可能很少改变的数据。

我已经为此类数据使用 Singleton 存储库开发和部署了应用程序。它表现出色。唯一的问题是，当发生罕见的情况时，我必须重新启动 IIS 才能生效。

什么是最好的解决方案。？

单例实现

```
public class SingletonRepository : ISingletonRepository
    {
        private static SingletonRepository singleInstance;

        private readonly IStateRepository stateRepo;
        private readonly ICountryRepository countryRepo;
        private readonly ITDPaymentModeRepository paymentModeRepo;
        private readonly ITDPlanRepository planRepo;
        private readonly ITDOrderTypeRepository orderTypeRepo;
        private readonly IKeywordRepository keywordRepo;
        private readonly IAgencyRepository agencyRepo;

        private readonly IList<AT_STATE> lstState;
        private readonly IList<AT_COUNTRY> lstCountry;
        private readonly IList<TDPaymentMode> lstPaymentMode;
        private readonly IList<TDPlan> lstPlan;
        private readonly IList<TDOrderType> lstOrderType;
        private readonly IList<Keyword> lstKeyword;
        private readonly IList<Agency_MST> lstAgency;

        private SingletonRepository()
        {
            stateRepo = new StateRepository();
            countryRepo = new CountryRepository();
            paymentModeRepo = new TDPaymentModeRepository();
            planRepo = new TDPlanRepository();
            orderTypeRepo = new TDOrderTypeRepository();
            keywordRepo = new KeywordRepository();
            agencyRepo = new AgencyRepository();

            lstState = stateRepo.GetAll().Where(x => x.CountryId == 101).ToList();
            lstCountry = countryRepo.GetAll().ToList();
            lstPaymentMode = paymentModeRepo.GetAll().ToList();
            lstPlan = planRepo.GetAll().ToList();
            lstOrderType = orderTypeRepo.GetAll().ToList();
            lstKeyword = keywordRepo.GetAll().ToList();
            lstAgency = agencyRepo.GetAll().ToList();

            //lstState = stateRepo.GetAll().Take(20).ToList();
            //lstCountry = countryRepo.GetAll().Take(20).ToList();
            //lstPaymentMode = paymentModeRepo.GetAll().Take(20).ToList();
            //lstPlan = planRepo.GetAll().Take(20).ToList();
            //lstOrderType = orderTypeRepo.GetAll().Take(20).ToList();
            //lstKeyword = keywordRepo.GetAll().Take(20).ToList();
            //lstAgency = agencyRepo.GetAll().Take(20).ToList();
        }

        public static SingletonRepository Instance()
        {
            return singleInstance ?? (singleInstance = new SingletonRepository());
        }

        public IList<AT_STATE> GetState()
        {
            return this.lstState;
        }
        public IList<AT_COUNTRY> GetCountry()
        {
            return this.lstCountry;
        }

        public IList<TDPaymentMode> GetPaymentMode()
        {
            return this.lstPaymentMode;
        }

        public IList<TDPlan> GetPlan()
        {
            return this.lstPlan;
        }

        public IList<TDOrderType> GetOrderType()
        {
            return this.lstOrderType;
        }

        public IList<Keyword> GetKeyword()
        {
            return this.lstKeyword;
        }

        public IList<Agency_MST> GetAgency()
        {
            return this.lstAgency;
        }      

    } 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T13:16:12.633

使用单例模式的目的通常不是用于静态数据存储。当您只希望一个对象实例能够执行某些操作时，您应该使用单例。它可能很快，但是正如您所看到的，当数据更改时，您需要重置堆以获取新数据（如您所说，通过重新启动 IIS）。

HttpCache（更具体地说，Http缓存默认使用的ObjectCache），将数据存储在与堆相同的位置：在随机存取内存中。因此，它与存储在堆上的类或实例中的静态数据一样快。不同之处在于您可以将缓存设置为定期过时，以便在数据更改时获取新数据。您甚至可以设置 SqlCacheDependencies 以便在数据库状态更改时使缓存失效。

缓存的另一个优点是它更有效地利用了服务器的 RAM 资源。对于你的单例，无论如何，这些数据总是会占用内存，即使数据没有被使用。使用缓存，服务器仅在使用时将数据存储在内存中。缓存的缺点是，有时用户在缓存过期后请求数据时会得到较慢的响应。但是，在他们这样做之后，其他用户将受益于缓存一段时间的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T22:13:52.823

实际上，您可以通过创建这样的重新加载方法来重新加载单例：

```
public static void ReloadSingletonRepositoryInstance()
{
    singleInstance = null;
    SingletonRepository sr = SingletonRepository.Instance;
} 
```

希望有帮助。

# colors - 计算两个 HSI 颜色值之间的颜色表观差异

> ID：13990626
> 
> 赞同：6
> 
> 时间：2012-12-21T12:55:26.457
> 
> 标签：colors, rgb, hsv, hsl

我在 HSI（色相饱和度和强度）中有两个颜色值，我想要一个代表两种颜色之间视觉差异的数字。色调是介于 0 和 360 之间的数字。饱和度为 0 到 1，强度为 0 到 1。

例如，让我们考虑饱和度为 100% 且强度为 100% 时的红色和蓝色。 [在这个网站上是一种通过输入以下文本来显示颜色的方法。](http://bgrins.github.com/TinyColor/)

红色是：hsv 0、100%、100%

蓝色是：hsv 240、100%、100%

![在此处输入图像描述](../Images/e963b14d7524c5745a5832856bf7cb92.png)

显然这是两种非常不同的颜色，所以我可以尝试计算颜色之间差异的一种简单方法是使用色调分量并计算色调的绝对差异，这将是 120 (360-240)，因为 360 也等于0 色调。

问题出现在饱和度或强度非常暗或非常亮的情况下，考虑非常深的红色和蓝色。

深红色是：hsv 0、100%、20%

深蓝色是：hsv 240, 100% 20%

![在此处输入图像描述](../Images/0376607f1005edada95701320d73a419.png)

显然，这两种颜色之间的视觉差异小于明亮的红色和蓝色，如果被要求比较差异，人类会这样说。我的意思是，问朋友“哪一对颜色最不同？” 他们可能会说顶部是鲜红色的蓝色。

我正在尝试计算人类会注意到的两种颜色之间的差异。如果一个人看两种颜色 a 和 b，然后看两种颜色 c 和 d，他会注意到哪些颜色最不同。首先，如果颜色很亮（但不是太亮），那么差异是基于色调的。如果颜色太亮（例如白色）或太暗（例如黑色或太灰），则差异较小。

应该有一个函数 diff ，其中 x=diff(a,b) 和 y=diff(c,d) 产生 x 和 y，我可以使用 x 和 y 比较差异以找到最不同的颜色或最少不同的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-25T00:07:19.687

WCAG2.0 和 1.0 指南都参考了关于色差感知的不同方程：

1.  对比度（http://www.w3.org/TR/2008/REC-WCAG20-20081211/Overview.html#contrast-ratiodef）

2.  亮度差异和**3\. 色差**（[http://www.w3.org/TR/AERT#color-contrast](http://www.w3.org/TR/AERT#color-contrast)）。

我尝试了 Delta-e 方法（http://colormine.org/delta-e-calculator/），但它是准度量的，因此差异测量可能会根据您传递两种颜色的顺序而改变。如果在您的示例中您希望 diff(a,b) 始终等于 diff(b,a) 那么这不是您想要的（此名称下可能有不同的算法不是准度量的，但我没有调查过过去那个网站）。

我认为色差度量最接近我对色差测量的期望。对于您的示例，它将产生 diff(a,b) > diff(c,d)

您可以使用此网站上的工具自行测试：[http ://www.dasplankton.de/ContrastA/](http://www.dasplankton.de/ContrastA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:46:15.053

一般的答案似乎是 David van Driessche 所说的，使用 Delta E。我在这里找到了一些 Java 代码：[https ://github.com/kennyliou/GAI](https://github.com/kennyliou/GAI)

这是问题的答案，可能不是最好的答案。

# r - 选择矩阵第二行中不在R中第一行的元素

> ID：13990628
> 
> 赞同：0
> 
> 时间：2012-12-21T12:55:39.437
> 
> 标签：r

我有一个包含两列的矩阵，其中一些数字在两列中都相同，但第 2 列还包含一些不在第 1 列中的数字。

我想在 column2 中选择那些不在 column1 中的值，然后按递增顺序将它们插入 column1 中。

作为开始，我正在考虑使用一些矩阵运算，例如 matrix[matrix[,1]%in%matrix[,2]

只是代替 %in% 使用“不在”中的东西。

这是数据文件：

```
https://dl.dropbox.com/u/22681355/example.csv

example<-read.csv("example.csv") 
```

example[,2] 包含一些 example[,1] 没有的数字。

我想：

1.  使用相当于 %not in % 的内容搜索这些数字

按照下面的答案，我可以执行以下操作：

```
values<-setdiff(example[,2],example[,1]

order<-sort(values) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:07:11.953

像这样？

```
Rgames> foo
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    5    9   13   17
[2,]    2    6   10   14   18
[3,]    3    7    1   15   19
[4,]    4    8    3   16   20
Rgames> foo[,1]%in%foo[,3]
[1]  TRUE FALSE  TRUE FALSE
Rgames> foo[,1]*!foo[,1]%in%foo[,3]
[1] 0 2 0 4 
```

我敢肯定有更清洁的方法。哎呀，只需这样做：

```
Rgames> setdiff(foo[,1],foo[,3])
[1] 2 4 
```

# html - HTML CSS 不可见按钮

> ID：13990629
> 
> 赞同：21
> 
> 时间：2012-12-21T12:55:41.823
> 
> 标签：html, css, button, invisible

您好我正在尝试制作一个不可见的按钮（仍然有效且可点击），因为我的按钮样式嵌入在背景中，我不想切片它们，并从头开始。

所以我只想制作一个按钮，将它放在按钮应该在的背景部分并使其不可见，以便可以看到和单击背景按钮图像。

有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-21T13:14:48.500

您必须为元素使用以下属性`button`以使其透明。

# 没有文字的透明按钮

```
button {

    background: transparent;
    border: none !important;
    font-size:0;
} 
```

# 带有可见文本的透明按钮

```
button {

    background: transparent;
    border: none !important;
}​ 
```

并使用绝对`position`定位元素。

# 例如

你有一个 div 下的按钮元素。在 div 上使用`position`: relative 并`position`在按钮上使用 : absolute 将其定位在 div 内。

这是一个有效的[JSFiddle](http://jsfiddle.net/5k68J/1/)

这是一个更新的[JSFiddle](http://jsfiddle.net/VXBVK/)，它只显示按钮中的文本。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-21T13:05:21.653

您可以使用 CSS 来隐藏按钮。

```
button {
  visibility: hidden;
} 
```

如果你`<button>`只是图像上的一个可点击区域，为什么还要让它成为一个按钮？您可以改用[`<map>`](https://developer.mozilla.org/en-US/docs/HTML/Element/map)元素。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-21T13:10:47.900

```
button {
    background:transparent;
    border:none;
    outline:none;
    display:block;
    height:200px;
    width:200px;
    cursor:pointer;
} 
```

给出相对于背景中图像的高度和宽度。这将删除按钮的边框和颜色。您可能还需要将其绝对定位，以便您可以正确地将其放置在您需要的位置。如果不发布您，我无法进一步帮助您代码

要使其真正不可见，您必须设置***outline:none;*** 否则在某些浏览器中会出现蓝色轮廓，如果需要单击它并为其设置尺寸，则必须设置***display:block***

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T13:12:31.870

**HTML**

```
<input type="button"> 
```

**CSS**

```
input[type=button]{
 background:transparent;
 border:0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T13:09:37.793

`background:transparent;`对您的按钮/div使用 CSS 。

[JSFiddle](http://jsfiddle.net/S8fZC/1/)

# r - 配置 fix() 和 edit() 以从 R/RStudio 在 Notepad++ 中打开

> ID：13990631
> 
> 赞同：6
> 
> 时间：2012-12-21T12:55:50.350
> 
> 标签：r, rstudio, rgui

当我在 RStudio 或 RGUI 中执行此操作时：

```
fix(SomeFunction) 
```

（或使用`edit()`）我可以在记事本中看到函数的代码。有什么办法可以改变它，以便在 Notepad++ 中打开代码预览而不是普通的旧记事本？同样，我是否可以强制`View(SomeDataFrame)`在 Excel 中打开？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T13:16:15.640

`fix`和`edit`函数调用`"editor"`参数中定义的编辑器。
默认情况下，该参数设置为`getOption('editor')`如[编辑函数文档](http://stat.ethz.ch/R-manual/R-patched/library/utils/html/edit.html)中所示。

因此，您可以将 notepad++ 路径作为函数参数传递，即：

```
path <- "C:\\Program Files (x86)\\Notepad++\\Notepad++.exe"
fix(somefunction,editor=path) 
```

或通过更改当前会话的 R 选项将记事本++ 设置为默认编辑器，即：

```
path <- "C:\\Program Files (x86)\\Notepad++\\Notepad++.exe"

options(editor=path)

# from now on, all calls to fix and edit will open notepad++ as default editor...
fix(somefunction) 
```

**注意**

如果要将新选项设置为所有后续会话的默认选项，则应按照[此处](http://www.statmethods.net/interface/customizing.html)的说明编辑路径中的`Rprofile.site`脚本。`RHome\etc`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T13:50:22.270

您可以尝试[这样](http://r-trek.blogspot.com/2012/10/viewing-large-dataframes-in-rstudio.html)的方法来创建一个临时 .csv 并在 Excel 中打开。

# php - 从页面获取数据并显示在同一页面上而不刷新

> ID：13990635
> 
> 赞同：0
> 
> 时间：2012-12-21T12:56:02.973
> 
> 标签：php, jquery

我有一个条件，我必须将复选框的不同值发布到*page2.php*并在同一页面上显示该值。我该怎么办？

**第 1 页：**

```
<form method="post" action="">
<input name="date1" type="checkbox" value="" id="1" />
<input name="date2" type="checkbox" value=""  id="2"/>
</form>

$.ajax({
        type: 'POST',
        url: 'page2.php',
        data: data,   
        success:function(html){

        }
    }); 
```

**第2页：**

```
<?php
    $date1 = POST_['date1'];
    $date2 = POST_['date2'];

    echo  $date1;
    echo  $date2;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:04:24.287

我猜第二个“Page1”实际上是 Page2

你有一个错误，它应该是 $_POST['date1']。正如评论的那样，您可以先检查它是否设置为：

```
if (isset($_POST['date1'])) 
```

在您的 Page1 中，让我们添加一个容器，例如

```
<div id="result"></div> 
```

然后在里面`<script></script>`：

```
$(function(){
    $('input').click(function() {
        $.ajax({
            type: 'POST',
            url: 'PAGE.php',
            data: $('form').serialize(),   
            success:function(html){
               $('#result').html(html);
            }
        });
    });
});​ 
```

这会在 id 为“result”的元素内设置 page2.php 的返回结果

编辑：这是一个 JsFiddle：http: [//jsfiddle.net/rF4qg/](http://jsfiddle.net/rF4qg/)

在您评论的那个中，右括号存在一些错误。看到我已经为复选框添加了一个名称，并且发送的数据是通过序列化表单形成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:07:12.017

页面.php

```
<?php
    $date['date1'] = $_post['date1'];
    $date['date2'] = $_post['date2'];

    echo  $date
?> 
```

另一个页面

```
<form method="post" action="">
<input name="date1" type="checkbox" value="" id="1" />
<input name="date2" type="checkbox" value=""  id="2"/>
</form>

$.ajax({
        type: 'POST',
        url: 'page2.php',
        data: data,   
        success:function(html){
                alert(html[0]);
                alert(html[1]);
        }
    }); 
```

**注意：** 警报(html[0]);

警报（html [1]）；

你可以把这个值放在任何地方

# ruby-on-rails - Rails 使用嵌套资源呈现错误的 URL

> ID：13990637
> 
> 赞同：3
> 
> 时间：2012-12-21T12:56:14.163
> 
> 标签：ruby-on-rails

我不太确定这里发生了什么。像这样嵌套资源后

```
resources :users do
    resources :bookmarks
end 
```

我预计 url 应该是`/users/[user-id]/bookmarks/[bookmark-id]/edit`，但 rails 呈现反向路径`/users/[bookmark-id]/bookmarks/[user-id]/edit`

这是视图

```
<%= link_to 'edit', edit_user_bookmark_path(@bookmark) %> 
```

知道如何解决吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T13:03:07.937

你所期望的是[规则](http://guides.rubyonrails.org/routing.html#nested-resources)。

用。。。来代替：

```
<%= link_to 'edit', edit_user_bookmark_path(current_user, @bookmark) %> 
```

# android - 如何使用 Android NDK 获取库信息？

> ID：13990643
> 
> 赞同：2
> 
> 时间：2012-12-21T12:56:38.837
> 
> 标签：android, android-ndk, shared-libraries

使用 Android NDK 是否可以（从本机 C 代码）获取已加载的 .so 库列表？我正在寻找 iOS 函数 _dyld_image_count()/_dyld_get_image_name() 的 Android 版本。

也可以获得包含特定函数的 .so 的库名称（在 iOS 上，此函数是 dladdr()）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:19:30.480

您可以读取和解析`/proc/self/maps`文件。它包含为您的应用程序加载的每个共享对象的地址。`self`将帮助您的应用程序读取自己的信息。

在 Android NDK 中也可用的[nm命令行实用程序可以向您显示某些共享对象文件中可用的符号。](http://www.gnu.org/software/binutils/)您可以查看它是如何实现的并尝试使用相同的库，但这并非易事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:03:22.823

是的，你可以得到这个这里是样本

```
try {

 Set<String> libs = new HashSet<String>();

 String mapsFile = "/proc/" + android.os.Process.myPid() + "/maps";

  BufferedReader reader = new BufferedReader(new 

FileReader(mapsFile));

        String line;

        while ((line = reader.readLine()) != null) {

            if (line.endsWith(".so")) {

                int n = line.lastIndexOf(" ");

                libs.add(line.substring(n + 1));

            }

        }

        Log.d("Ldd", libs.size() + " libraries:");

        for (String lib : libs) {

            Log.d("Ldd", lib);

        }

    } catch (FileNotFoundException e) {

        // Do some error handling...

    } catch (IOException e) {

        // Do some error handling...

    } 
```

试试这个这可能对你有帮助

# javascript - 特定分割后不能插入内容。骨干网.js

> ID：13990651
> 
> 赞同：2
> 
> 时间：2012-12-21T12:57:01.130
> 
> 标签：javascript, jquery, dom, backbone.js

这是我所拥有的：

**ProductListView.js**

```
define(['jquery', 'underscore', 'backbone', 'views/ProductView', 'views/PaginatorView'], function($, _, Backbone, ProductView, PaginatorView) {
    var ProductListView = Backbone.View.extend({
        className: 'productsList',
        initialize: function() {
            this.render();
        },
        render: function() {
            // some initialization
            // that's for zurb grid                
            this.$el.addClass('twelve columns');

            for(var i = startPos; i < endPos; i++) {
                this.$el.append(new ProductView({ model: products[i] }).render().el);
            }

            this.$el.append(new PaginatorView({ model: this.model, page: this.options.page }).render().el);
            // this.$el.after(new PaginatorView({ model: this.model, page: this.options.page }).render().el);
            return this;
        }
    });
    return ProductListView;
}); 
```

似乎我不能在`this.$el`. 线

```
this.$el.after(new PaginatorView({ model: this.model, page: this.options.page }).render().el); 
```

虽然可以`PaginatorView`在 ( `ProductListView`) 视图内部附加，但似乎不可能在其外部插入一些东西。

你遇到过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:10:15.837

`this.$el.after`将失败，因为当`render()`被调用时，`this.$el`尚未插入 DOM（它只是一个悬空的 div）。

Backbone 鼓励您等到视图的 HTML 内容准备好后再插入。这样，浏览器只重绘一次窗口，性能要好得多。

根据经验，您应该只操作位于`this.$el`Backbone 视图中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:17:48.950

如果视图元素尚未添加到 DOM（“断开连接”），则调用[`after()`](http://api.jquery.com/after/)它不会更改元素或 DOM。但是，它确实返回了一个包含两个元素的集合，您可以将它们分配给`this.$el`以后附加它们。但是我很确定这不是一个好习惯，因为 a[`View`](http://backbonejs.org/#View)只与一个元素纠缠在一起。

# javascript - 图像错误后将文本添加到 Span

> ID：13990652
> 
> 赞同：0
> 
> 时间：2012-12-21T12:57:10.833
> 
> 标签：javascript, html

注意：我对 Javascript 很陌生。

这是我实现这一目标的尝试：

```
$("#img").onerror = function(evt) {
    $(".card-error").next("#img-error").html("Error with image url");
}); 
```

这没有用。

当发生“onerror”时 - 如何在“img-error”范围内添加文本错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:00:31.383

试试这个：

```
$('#img').error(function () {
  $(".card-error").html("图片地址错误");
});

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:01:42.097

您需要使用[jQuery 事件处理程序方法](http://api.jquery.com/on/)：

```
$('#img').on("error", function() {
    $("#img-error").text("Error with image url");
}); 
```

您正在为 jQuery 包装器对象分配一个属性“onerror”，它除了收集垃圾之外什么都不做。分配给 DOM 元素会起作用，例如

```
$("#img").get(0).onerror = … // or with plain DOM:
document.getElementById("img").onerror = … 
```

# animation - 如何制作带有动画“特写”的 VBox？

> ID：13990664
> 
> 赞同：2
> 
> 时间：2012-12-21T12:58:12.837
> 
> 标签：animation, javafx-2

我已经建立了一个表格，`VBox`里面有一个`VBox`. 我想让内部`VBox`“关闭”从底部到顶部过渡。

之后，外部的下一个元素`VBox`应该向上移动以填充空白空间，例如从`VBox`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:19:45.160

`VBox`您可以尝试下一种方法：在动画期间使用剪辑来隐藏“消失”的内容并控制内部的高度：

```
public class ShrinkingVBox extends Application {

    private static class SmartVBox extends Region {

        private Rectangle clipRect = new Rectangle();
        private VBox content = new VBox();

        public SmartVBox() {
            setClip(clipRect);
            getChildren().add(content);
        }

        // we need next methods to adjust our clipping to inner vbox content
        @Override
        protected void setWidth(double value) {
            super.setWidth(value);
            clipRect.setWidth(value);
        }

        @Override
        protected void setHeight(double value) {
            super.setHeight(value);
            clipRect.setHeight(value);
        }

        // here we will do all animation
        public void closeup() {
            setMaxHeight(getHeight());
            // animation hides content by moving it out of clipped area
            // and reduces control height simultaneously
            Timeline animation = TimelineBuilder.create().cycleCount(1).keyFrames(
                new KeyFrame(Duration.seconds(1),
                    new KeyValue(content.translateYProperty(), -getHeight()),
                    new KeyValue(maxHeightProperty(), 0))).build();
            animation.play();

        }

        protected ObservableList<Node> getContent() {
            return content.getChildren();
        }
    }

    @Override
    public void start(Stage primaryStage) {
        VBox outer = new VBox();
        final SmartVBox inner = new SmartVBox();

        //some random content for inner vbox
        inner.getContent().addAll(
                CircleBuilder.create().radius(25).fill(Color.YELLOW).build(),
                CircleBuilder.create().radius(25).fill(Color.PINK).build());

        // content for outer vbox, including inner vbox and button to run animation
        outer.getChildren().addAll(
                RectangleBuilder.create().width(50).height(50).fill(Color.GRAY).build(),
                inner,
                RectangleBuilder.create().width(50).height(50).fill(Color.RED).build(),
                RectangleBuilder.create().width(50).height(50).fill(Color.BLUE).build(),
                ButtonBuilder.create().text("go").onAction(new EventHandler<ActionEvent>() {
                    @Override
                    public void handle(ActionEvent t) {
                        inner.closeup();
                    }
                }).build());

        primaryStage.setScene(new Scene(new Group(outer)));
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch();
    }
} 
```

# c# - 在 Web 服务器上隐藏代码隐藏文件（隐藏编程逻辑）

> ID：13990665
> 
> 赞同：2
> 
> 时间：2012-12-21T12:58:14.907
> 
> 标签：c#, asp.net, publishing

我们正在使用 VS10 发布我们的网站

1）在发布网站 Localy 时，只有 aspx 文件在发布的文件夹中组合在一起，并且该网站在本地工作正常 `IIS server`。

2）虽然 .cs 文件不在已发布的文件夹中，但所有事件在本地 iis 服务器中运行良好

3）我在做什么.....我正在处理已发布的 Web 文件夹并将其上传到 Web 服务器。

4）但现在我调用的每个事件都显示错误？？？？

5）我该如何解决这个问题？

6）出于安全原因，我不想将文件后面的代码上传到网络服务器？我想隐藏我的编程逻辑我该怎么做？？？？

7) 当我使用 .cs 和 aspx 文件上传我的网站时，它运行良好，但我不想这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T12:59:43.913

您需要发布您的网站，它将生成 dll 放置而不是放置 .cs 文件。这篇 codeproject[**文章**](http://www.codeproject.com/Articles/53075/How-to-deploy-ASP-NET-Web-Application-on-server)解释了如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:00:45.970

您不需要复制所有文件。您只需上传**.ASPX**文件和**Bin**文件夹，该文件夹将包含名为 YourProject.DLL 的 DLL 中的已编译逻辑以及所需的任何其他引用。服务器上不需要包含实际代码的**.CS文件，因为它们已编译到 DLL 中。**

使用 JavaScript，您无法向用户隐藏它，因为客户端需要它。但是，您应该将所有 JavaScript 保存到**.JS**文件中并包含在页面中。至少对于查看您的页面来源的人来说，它变得不那么明显了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:01:13.773

发布您的网站将完成这项工作。

请阅读[如何：发布网站 (Visual Studio)](http://msdn.microsoft.com/en-us/library/20yh9f1b%28v=vs.80%29.aspx)

和

[ASP.NET 网站项目部署概述](http://msdn.microsoft.com/en-us/library/377y0s6t%28v=vs.100%29.aspx)

# javascript - 将画布数据上传到 s3

> ID：13990673
> 
> 赞同：19
> 
> 时间：2012-12-21T12:58:47.633
> 
> 标签：javascript, amazon-s3

现在自从亚马逊启用以来，`CORS`我想知道这是否可能。

html`canvas`数据（在客户端浏览器上）可以转换为a`something`并直接上传到s3吗？

我确信我可以`PUT`向亚马逊提出请求，但这需要一个`File`.

我可以获得`base64`编码的图像数据，甚至是一个`Blob`但是有没有办法将它保存为`S3`来自客户端浏览器的图像？

有没有办法转换`canvas`为`File`以便我可以提出`PUT`请求或亚马逊理解`Blob`并将其保存为图像的方式？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-03-29T23:38:02.980

这是一个工作示例，您从画布中获取数据 URL 并将其上传到 S3：

```
var dataUrl = canvas.toDataURL("image/jpeg");
var blobData = dataURItoBlob(dataUrl);
var params = {Key: "file_name", ContentType: "image/jpeg", Body: blobData};
bucket.upload(params, function (err, data) {}); 
```

`dataURItoBlob`：

```
function dataURItoBlob(dataURI) {
    var binary = atob(dataURI.split(',')[1]);
    var array = [];
    for(var i = 0; i < binary.length; i++) {
        array.push(binary.charCodeAt(i));
    }
    return new Blob([new Uint8Array(array)], {type: 'image/jpeg'});
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T06:45:16.337

有一种旧的发布方法可以将数据从浏览器上传到 s3

[http://s3.amazonaws.com/doc/s3-example-code/post/post_sample.html](http://s3.amazonaws.com/doc/s3-example-code/post/post_sample.html)

然后我使用了这个想法 [Convert Data URI to File 然后 append to FormData](https://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata)

而不是正常的`POST`，可以有一个带有表单数据的xhr请求到亚马逊，你就完成了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-11T00:51:12.980

使用[`toBlob`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob)：

```
canvas.toBlob((blob) => {
  if (blob === null) return;
  bucket.upload({
    Key: "where/the/file/goes.jpg"
    ContentType: "image/jpeg",
    Body: blob,
  }, (err, data) => {});
}, "image/jpeg"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-08T05:25:09.450

在我找到这篇文章之前，我一直在研究这个并没有太多运气：[https ://github.com/aws/aws-sdk-js/issues/1712#issuecomment-329542614](https://github.com/aws/aws-sdk-js/issues/1712#issuecomment-329542614)

AWS 有一个实用程序可以在他们的 aws-sdk 中解码 base64：AWS.util.base64.decode(image)

简单的解决方案，对我有用。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-21T13:21:29.613

保存画布最简单的方法是将其转换为 base64：

```
canvas.toDataURL(); 
```

或者您可以通过参数设置图像类型：

```
canvas.toDataURL("image/png");
canvas.toDataURL("image/jpeg");
// etc 
```

还要看这个库：[http ://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

# php - PHP Parse 错误：语法错误，CodeIgniter 视图中的文件意外结束

> ID：13990681
> 
> 赞同：11
> 
> 时间：2012-12-21T12:59:12.880
> 
> 标签：php, codeigniter

我的`unexpected end of file`CodeIgniter 视图出现错误。

我已将 PHP 代码粘贴到[http://codepad.org/S12oXE4t](http://codepad.org/S12oXE4t)。

此代码通过了各种在线 PHP 语法测试，但我不知道为什么当我尝试在 WAMP Server 中运行时它仍然显示以下错误。

```
Parse error: syntax error, unexpected end of file in
 E:\wampserver\www\CodeIgniter\application\views\layouts\default.php on line 676 
```

作为参考，`line 676`是代码中的最后一行。我做错什么了？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-21T13:22:57.367

检查您的[short_open_tag](http://fr.php.net/manual/en/ini.core.php#ini.short-open-tag)设置（用于`<?php phpinfo() ?>`查看其当前设置）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-21T13:00:34.407

`Unexpected end of file`表示在 PHP 解析器到达脚本末尾之前预期会发生其他事情。

从您的**HUGE**文件来看，您可能在语句中缺少右括号 ( `}`) 。`if`

请至少尝试以下事情：

1.  将代码与视图逻辑分开。
2.  保持一致，您`;`在某些嵌入式 PHP 语句中使用 end，而不是在其他语句中，即。`<?php echo base_url(); ?>`与`<?php echo $this->layouts->print_includes() ?>`。它不是必需的，所以不要使用它（或者做，只是做一个或另一个）。
3.  重复，因为它很重要，分开你的关注点。不需要所有这些代码。
4.  使用 IDE，它将帮助您解决诸如此类的错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T13:01:20.730

通常问题不是右括号 (}) 或缺少分号 (;)

# c++ - C++14/17 的模块提案是否可以（容易）使用其他本地语言生成模块？

> ID：13990683
> 
> 赞同：1
> 
> 时间：2012-12-21T12:59:15.407
> 
> 标签：c++

这听起来可能很奇怪，但我正在考虑模块提案，并想知道是否有可能例如将来 Haskell 代码可以以 C++ 可以使用的方式公开（作为模块）（让我们说 Haskell 映射中的 T 列表到`vector<T>`）。那么与当前状态（C++11）相比，模块是否使这变得容易、可能，或者没有改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:38:34.903

这是*可能*的，但我怀疑它会让事情变得更容易。我的理解是，从模块导出的信息的二进制格式将是特定于编译器的，因此它不会提供平台上所有编译器共享的通用 ABI。使用 C 作为语言之间的粘合剂的原因是大多数平台上的 C ABI 非常简单并且是固定的，因此它不是一个移动的目标。C++ 实现需要更丰富的 ABI（名称修饰格式、异常层次结构、对象布局、vtable 布局、RTTI 表示等），模块不会改变这一点。

# windows - 停止应用程序窃取输入

> ID：13990684
> 
> 赞同：0
> 
> 时间：2012-12-21T12:59:19.383
> 
> 标签：windows, winapi, input, hook

我有一个第三方应用程序（为简洁起见，我将其称为 GreedyApp），它在其窗口获得焦点时将鼠标和键盘输入作为人质，即它隐藏标准鼠标光标并用它自己的光标替换它，并将光标限制在它的窗口。获取其他窗口输入的唯一方法是 ALT+TAB 远离 GreedyApp。

我需要允许用户自由使用系统的所有组件（交付的系统将是纯触摸屏），因此一旦 GreedyApp 获得焦点，系统的其余部分就会变得不可用。

到目前为止，我已经为 GreedyApp 劫持了 user32.dll，钩住了`SetCursor`,`ShowCursor`和`ClipCursor`, 并禁用了它们。结果是 GreedyApp 不再隐藏光标，光标可以自由地在用户移动的任何地方漫游，但是......

我留下的问题是，无论在屏幕上的哪个位置按下光标，或者按下键盘上的哪些键（ALT+TAB 除外），输入仍然被定向到 GreedyApp，而其他窗口不会接收任何输入。

我不确定 GreedyApp 是如何实现这一点的，因此我还不知道哪些 API 调用可以钩住它来阻止它。我虽然它可能一直在使用 hooks 本身，但我已经 hooked 和 disabled `SetWindowsHookEx`，但问题仍然存在。

**所以我的问题是：**

任何一个：

A) 是否有一种（相对直接的）方法来找出应用程序在运行时进行的 API 调用？

或者

B) GreedyApp 可能使用什么方法来阻止其他窗口接收输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:29:07.137

该应用程序使用[RegisterRawInputDevices](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645600%28v=vs.85%29.aspx)来获取原始鼠标和键盘输入，并使用该标志`RIDEV_CAPTUREMOUSE`来阻止其他应用程序获得焦点。

在将参数传递给 Windows API 进行处理之前，我已经挂钩了 API 调用并删除了标志。用户现在可以控制系统:)

# android - 用于恢复一堆活动的顺序是什么？

> ID：13990685
> 
> 赞同：0
> 
> 时间：2012-12-21T12:59:25.817
> 
> 标签：android, back-stack

Android 文档提供了对[Tasks 和 Back Stack](http://developer.android.com/guide/components/tasks-and-back-stack.html)的看似详尽的描述，但我找不到以下问题的答案：当他们的任务（之前被系统杀死）大约时，活动以什么顺序恢复（重新创建）再次成为前台。

例如，如果一个任务有活动 A -> B -> C 并且在后台被杀死，那么当用户切换回它时，连续所有活动的顺序`onCreate`和`onRestoreInstanceState`事件调用是什么？我们是否可以理所当然地认为 A 总是在 B 之前完全恢复，而 B 在 C 之前完全恢复？

问题来自 Google Play 的错误日志，这让我怀疑在调用子活动期间主要活动尚未恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T21:30:12.223

作为基于一些测试的简短（自我）答案，我报告活动恢复的顺序是从堆栈的顶部到底部，即与创建活动的初始顺序相反。在问题示例的延续中，它将是 C -> B -> A。

最重要的是一次只恢复一个顶级活动，而不是整个堆栈（这会更直观和一致，恕我直言）。只有在用户关闭 top Activity，并且下一个 Activity 即将成为新的 Top Activity 后，该单个 Activity 才会恢复，依此类推。

对于每个活动，按照文档执行一系列`onCreate`、`onStart`、 。`onRestoreInstanceState`

# sql - SQL 事务复制 - 无法删除我无法复制的索引视图引用的表

> ID：13990687
> 
> 赞同：0
> 
> 时间：2012-12-21T12:59:31.397
> 
> 标签：sql, replication, dynamics-nav

我正在尝试获取在几个 SQL 2008 R2 服务器上工作的 MS NAV 数据库的事务复制。

我能够使复制工作，但是在 inexed 视图上运行任何类型的 CREATE 或 ALTER 操作会导致 NAV 应用程序失败（以下错误）。主要版本之间的索引视图将是静态的，因此不需要复制。

我再次设置复制，这次不包括索引视图，但是我现在遇到以下错误：

“复制-复制分发子系统：代理 [SQLSRV01\NAV SQLSRV02\NAV] 失败。无法删除表‘[表]’，因为它被对象‘[索引视图引用表]’引用。”

所以，有点痛。我有点困惑为什么复制系统无论如何都试图删除表，除非它在订阅服务器上重建整个数据库。任何建议从这里去哪里都是非常受欢迎的——我显然希望复制我的所有表，但是这些索引字段的引用导致了很多问题（但需要保留）。

出于兴趣，如果我在索引视图上运行“ALTER VIEW”，但不更改任何内容，这是我尝试通过 Dynamics NAV 客户端访问该表时遇到的错误：

![错误](../Images/2d8215d66ea0477598c770f495b4ba3c.png)

# graph - 所有对最大流量

> ID：13990689
> 
> 赞同：8
> 
> 时间：2012-12-21T12:59:36.747
> 
> 标签：graph, max-flow, network-flow

给定一个有向加权图，如何找到所有顶点对之间的*最大流量*（或*最小边切）。*
天真的方法是简单地调用像 Dinic 的*Max Flow*`O((V^2)*E)`算法，其复杂性是，对于每一对。
因此对于所有对它都是`O((V^4)*E)`。

是否有可能通过一些优化`O((V^3)*E)`来降低复杂性？`O(V^3)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T08:00:40.147

Gomory-Hu Tree**不适用于有向图**，除此之外，Gomory-Hu Tree 将通过应用最小割来形成 Graph 最大流。

时间复杂度为：

```
O(|V|-1 * T(minimum-cut)) = O(|V|-1 * O(2|V|-2)) ~ O(|V|^2) 
```

* 使用最优[最小切割](http://en.wikipedia.org/wiki/Minimum_cut)算法（[Max-Flow Min-Cut Reduction](http://en.wikipedia.org/wiki/Max-flow_min-cut_theorem)）

这个[例子](http://en.wikipedia.org/wiki/Gomory%E2%80%93Hu_tree#Example)说明了如何从给定的图构造 Gomory-Hu 树

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-21T01:13:25.457

Gomory-Hu 树不适用于有向加权图。

是否存在比在有向图上运行 n^2 个最大流更快地解决所有对最大流的算法是一个悬而未决的问题。

# php - 开箱即用的 Laravel 4 语法错误

> ID：13990693
> 
> 赞同：6
> 
> 时间：2012-12-21T12:59:47.980
> 
> 标签：php, syntax, yield, laravel

我刚刚安装了 Laravel 4 (Illuminate)，当我在浏览器中打开 index.php 文件时，遇到了这个错误：

> 解析错误：语法错误，意外的“产量”（T_YIELD），在第 339 行的 /www/Laravel4/vendor/illuminate/view/src/Illuminate/View/Environment.php 中需要标识符（T_STRING）

我已经修复了 meta 文件夹的权限，并通过 Composer 安装了所有依赖项。我在 OSX 10.8.2 上运行 PHP 版本 5.5.0alpha2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T13:01:53.943

那是因为`yield`成为 PHP 5.5 中的一种语言结构（用于[生成器](http://nikic.github.com/2012/07/10/What-PHP-5-5-might-look-like.html#generators)） - 但有人认为使用这个简短的词来命名函数是个好主意：

```
public function yield($section)
{
  return isset($this->sections[$section]) ? $this->sections[$section] : '';
} 
```

降级到 PHP 5.4（毕竟它是当前的主流版本，5.5 甚至还不是测试版），它应该可以正常工作。

# forms - Symfony2 多个表单在一个模板中

> ID：13990694
> 
> 赞同：4
> 
> 时间：2012-12-21T13:00:05.733
> 
> 标签：forms, symfony, twig

我的应用程序由可以拥有许多设备的区域组成。

查看 Zone 时，需要为 Zone 中的每个 Device 显示一个控件。

每个设备都是完全独立的，因此将设备表单嵌入区域表单似乎没有必要——我只想一次处理对一个设备的更改。

目前我正在为每个设备创建一个表单并将它们传递给区域视图模板：

```
public function viewAction($zone_id)
{
    $zone = $this->getZoneById($zone_id);
    $forms = array();

    foreach ($zone->getDevices() as $device) {
        $forms[] = $this->createForm(new DeviceType(), $device)->createView();
    }

    return $this->render('AcmeBundle:Zones:view.html.twig', array('zone' => $zone, 'deviceForms' => $forms));
} 
```

然后在视图模板中，我遍历表单：

```
{% for form in deviceForms %}
    {% include 'AcmeBundle:Devices:control.html.twig'
        with {'zone':zone, 'form':form}
    %}
{% endfor %} 
```

这似乎工作正常，但我真的需要根据设备的“类型”更改呈现的模板。最干净的方法是什么？我可以做类似的事情：

```
{% if form.vars.data.type == 'foo' %}
    {% include 'AcmeBundle:Devices:control-foo.html.twig'
        with {'zone':zone, 'form':form}
    %}
{% elseif form.vars.data.type == 'bar' %}
    {% include 'AcmeBundle:Devices:control-bar.html.twig'
        with {'zone':zone, 'form':form}
    %}
{% endif %} 
```

但这似乎在模板中加入了太多逻辑？以某种方式将模板分配给表单对象会更好，但我不知道这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T22:00:23.187

您必须通过控制器在 FormType 中添加选项“模板”或其他任何内容，在 FormType 中，您必须声明默认选项“模板”并将其传递给表单视图。

```
public function viewAction($zone_id)
{
    $zone = $this->getZoneById($zone_id);
    $forms = array();
    //You define a config for each type of device (you should use parameters)
    $templates = array(
        'foo' => 'AcmeBundle:Devices:control-foo.html.twig',
        'bar' => 'AcmeBundle:Devices:control-bar.html.twig',
    );
    foreach ($zone->getDevices() as $device) {
            //define your template here.
            $type = $device->getType();
            //add a template option in the form.
            $options['template'] == $templates[$type];
            $forms[] = $this->createForm(new DeviceType(), $device, $options)->createView();
    }

    return $this->render('AcmeBundle:Zones:view.html.twig', array('zone' => $zone, 'deviceForms' => $forms));
} 
```

现在在 DeviceType 中，您应该在表单中设置默认选项，它们将与我们在控制器中创建的选项合并。

```
public function getDefaultOptions(array $options) {

    return array(
        //...other options...

        //this is the default template of this form
        'template' => 'AcmeBundle:Devices:control.html.twig'
    );
} 
```

然后在 Builder 中设置表单上的属性

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->setAttribute('template', $options['template']);
    //...your fields here...
} 
```

最后，在视图中设置 var 模板。

```
public function buildView(FormView $view, FormInterface $form)
{   
    $view->set('template', $form->getAttribute('template'));
} 
```

现在您可以阅读twig中的“模板”选项，并包含相应的模板

```
{% for form in deviceForms %}
    {% include form.get('template') with {'zone':zone, 'form':form} %}
{% endfor %} 
```

不要忘记在 FormType 的开头添加行

```
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormBuilder; 
```

# wpf - 更改子控件时如何预测 WPF 控件的高度

> ID：13990695
> 
> 赞同：1
> 
> 时间：2012-12-21T13:00:13.630
> 
> 标签：wpf, animation

我正在用户控件上编写 WPF 动画。控件的高度没有明确设置；它取决于哪些子控件可见。当某些子控件被隐藏时，我正在执行动画以平滑地降低用户控件的高度。

但是，我不知道动画的结束高度。我需要测量高度是多少，是否隐藏了子控件，但在执行动画之前我无法更改控件的外观。理想情况下，我想要一个可以像这样使用的“FreezeDisplay”方法：

```
public void HideSomeControls()
{        
    double targetHeight;
    using (this.FreezeDisplay())
    {
        Control1.Visibility = Visibility.Hidden;
        Control2.Visibility = Visibility.Hidden;
        Control3.Visibility = Visibility.Visible;

        targetHeight = this.ActualHeight;
    }

    this.BeginAnimation(HeightProperty, new DoubleAnimation(ActualHeight, targetHeight, ...));
} 
```

但这种方法似乎不存在。我怎样才能完成我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:17:16.043

你的问题在细节上有点轻。例如。动画孩子应该如何对动画做出反应？剪裁？缩放？你打算如何还原动画？又一部动画？

假设子控件被包装在一个容器中并且您想要一个剪辑效果，我将动画如下：

1.  立即为容器`Height`设置动画`ActualHeight`。
2.  `Height`随着时间*t*将容器的动画设置为零。
3.  立即为容器`Visibility`设置动画`Collapsed`。

# c++ - 模板和类型名

> ID：13990696
> 
> 赞同：-3
> 
> 时间：2012-12-21T13:00:21.690
> 
> 标签：c++, templates

以下代码编译时带有错误消息：

```
 @> g++ test.cpp
    test.cpp: In member function 'void testit<E>::print()':
    test.cpp:79: error: 'COL' is not a class or namespace
    test.cpp:83: error: expected `;' before 'b2' 
```

如果我使用 COL::columns; 访问静态成员，它不会编译成功。相反，通过 SelectColumn::SELECT_COLS::columns 访问静态成员；会好的！

```
struct AllColumns
{
    static const char columns[];
};
const char AllColumns::columns[] = "*";

struct MemoryColumns
{
    static const char columns[];
};
const char MemoryColumns::columns[] = "data,data_expire_time";

template<typename E>
struct SelectColumn
{
public:
    typedef unsigned BIGT;
    typedef AllColumns SELECT_COLS;
};

template<>
struct SelectColumn<int>
{
public:
    typedef int BIGT;
    typedef MemoryColumns SELECT_COLS;
};

template<typename E>
class testit
{
public:
    typename SelectColumn<E>::SELECT_COLS COL;
    typename SelectColumn<E>::BIGT BIG;

    void print()
    {
      string str_a = COL::columns; //compile error here!
      string str_b = SelectColumn<E>::SELECT_COLS::columns; // OK

      BIG b2 = 10; //compile error here!
              typename SelectColumn<E>::BIGT b = 12; // OK
    }
}; 
```

如果我想使用 COL::columns 如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:02:35.110

```
typename SelectColumn<E>::SELECT_COLS COL; 
```

是变量声明，而不是类型。（变量名是`COL`，类型是`typename SelectColumn<E>::SELECT_COLS`）

也许你想说

```
typedef typename SelectColumn<E>::SELECT_COLS COL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:29:57.357

```
typename SelectColumn<E>::SELECT_COLS COL; 
```

`typename`此处使用的不是为 的别名创建`COL`别名的语法`SelectColumn<E>::SELECT_COLS`，而是告诉解析器标识符`SELECT_COLS`是类型而不是变量。

```
 str_a = COL::columns; 
```

您在此行出现错误的原因是您尝试`COL`使用错误的语法访问对象的成员数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:02:55.940

`COL`是一个对象，而不是一个类型，因此你必须`COL.columns`告诉它的成员。

# wordpress - 如何在 Wordpress 主题 Classica 中向动态帖子显示标签/技能类型

> ID：13990698
> 
> 赞同：0
> 
> 时间：2012-12-21T13:00:22.523
> 
> 标签：wordpress, tags, wordpress-theming

我使用这个主题： [http ://demo.themezilla.com/?theme=classica](http://demo.themezilla.com/?theme=classica)

在“最近的项目”下，我希望每个发布的投资组合帖子都显示它所连接的标签/技能类型。当您创建新的投资组合帖子时，可以在 wp-admin 页面中检查这一点。我不知道我需要在 php 中编写什么函数才能完成这项工作。当您显示帖子摘录时，有什么简单的方法可以解决这个问题吗？

```
<?php the_excerpt(); ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:10:13.273

我想你可以这样使用。

```
<?php the_tags( '<p>Tags: ', ', ', '</p>'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:38:03.747

如果它存储为自定义变量（在管理面板中编辑时显示在帖子内容下方），您通常可以像这样访问它：

```
get_post_meta($post->ID, 'key_name_here', true); 
```

查看[get_post_meta() 代码页](http://codex.wordpress.org/Function_Reference/get_post_meta)以获取有关该函数的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T10:39:48.130

使用 get_the_term_list() 获取技能类型并使用 strip_tags() 删除链接

```
$terms = get_the_term_list( $post->ID,'skill-type', '', ', ','' );
$terms = strip_tags( $terms ); 
```

# symfony - Symfony2 在实体中建立多对一关系

> ID：13990700
> 
> 赞同：2
> 
> 时间：2012-12-21T13:00:31.393
> 
> 标签：symfony, oracle11g, entity

我在 OneToMany 关系中有两个实体，Perfil 和 IPerfil。Perfil 可以关联多个 IPerfil：

`>`

 ````
 class Perfil  
    {  
    /**  
     * @var integer $id  
     *  
     * @ORM\Column(name="id_perfiles", type="integer")  
     * @ORM\Id  
     * @ORM\GeneratedValue(strategy="SEQUENCE")  
     * @ORM\SequenceGenerator(sequenceName="P360.perfiles_seq")  
     * @ORM\OneToMany(targetEntity="IPerfil", mappedBy="id")  
*/  
    private $id; 
````  `还有一个：

`>`

 ````
class IPerfil  
{  
    /**  
     * @var integer $id
     * @ORM\ManyToOne(targetEntity="Perfil")  
     * @ORM\JoinColumn(name="id_perfiles", referencedColumnName="id_perfiles", onDelete="CASCADE")  
*/  
    protected $id; 
````  `我能够从 IPerfil 延迟加载到 Perfil，但不能在另一个方向（从 Perfil 到 IPerfil），但是如果我不能通过 IPerfil 或 createQueryBuilder()->setPameter 执行任何 DQL... Symfony 将始终返回一个像这样的错误：

> [语义错误] 'id_perfiles FROM' 附近的第 0 行，第 9 列：错误：无效的 PathExpression。必须是 StateFieldPathExpression。

如果我用

> `@ORM\Column(name="id_perfiles", type="integer")` 然后我可以使用实体构建 DQL，但这种关系将不再有效。

我在这里迷路了......似乎我在关系定义中遗漏了一些东西，但不知道。

提前感谢任何提示。

## 编辑

## 如果我使用：

```
$entities=$em->getRepository('usuariosBundle:IPerfil')->findAll(array()); 
```

它不会给出错误，但我需要过滤和排序结果。

* * *

```
$entities=$em->getRepository('usuariosBundle:IPerfil')->findBy(array(),array('id' => 'asc', 'descripcion' => 'asc')); 
```

**无法识别的字段：id**

* * *

```
$query=$em->getRepository('usuariosBundle:IPerfil')->createQueryBuilder('p')
        ->orderBy('id', 'ASC')
        ->getQuery();       
        $entities = $query->getResult(); 
```

* *[语义错误] 第 0 行，'id ASC' 附近的第 60 列：错误：'id' 未定义。**

* * *

```
$entities = $this->get('doctrine')->getEntityManager()->createQuery('SELECT p.id FROM usuariosBundle:IPerfil p ')->getResult(); 
```

*[语义错误] 第 0 行，第 9 列靠近 'id FROM usuariosBundle:IPerfil'：错误：无效的 PathExpression。必须是 StateFieldPathExpression。*

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:08:35.490

使用类的属性名，dql => 'id' 上没有列名

`->orderBy('p.id', 'ASC')`并且`->createQuery('SELECT p FROM usuariosBundle:IPerfil p ')->getResult()`，bundle 的名称是 usuarios os Usuarios 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:14:29.180

如果它对任何人有用，我最后在 Perfil 实体中创建了一个非持久属性来附加关系和 IPerfil 的集合：

```
/** 
* @ORM\OneToMany(targetEntity="IPerfil", mappedBy="id") 
*/ 
private $desc; 
```

需要将其声明为 ArrayCollection：

```
public function __construct()
{
    $this->desc = new \Doctrine\Common\Collections\ArrayCollection();
} 
```

现在我能够在正确的方向上延迟加载并执行任何必要的操作。我认为 Doctrine 无法将集合加载到 id 中，因为它没有被声明为集合并且它是 ID 字段。``

# c++ - 接受容器类型作为输出参数的方法的协议/约定

> ID：13990713
> 
> 赞同：0
> 
> 时间：2012-12-21T13:01:41.507
> 
> 标签：c++, stl

当您有接受容器作为输出参数的方法时，谁负责清除列表？（如果有的话）例如，

```
bool GetResults(int nID, list<string>& results)
{
    .....
} 
```

在这种情况下，GetResults 方法是否应该清除列表？还是应该假设调用者知道他在做什么？如果 GetResults 清除了输出列表，那么它可能会否定调用者在多个调用中收集结果的努力，例如，

```
list<string> results.

GetResults(1,results)

GetResults(17,results) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:32:07.343

我的建议是编写这样的方法，以便它们采用输出迭代器：

```
template <typename OutputIterator>
OutputIterator GetResults(int nID, OutputIterator out) 
```

这会将清除结果的决定推回给调用者。

它还将决定使用哪个容器将结果保存回调用者 -`std::list`界面中不再有硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:05:40.563

答案实际上是取决于您喜欢什么，然后说出接口规范中发生的事情并坚持下去。

只要你不混合并且保持一致，我认为谁清空列表并不重要。

# php - 如何设置逻辑以正确的方式使用 post 变量

> ID：13990722
> 
> 赞同：-3
> 
> 时间：2012-12-21T13:02:34.193
> 
> 标签：php, html, forms, logic

您好，我对每页开头的以下代码有疑问：

```
session_start();

if (!isset($_SESSION['a'])){
    ...create the session from some variables...
$_SESSION['a'] = $var;
$var = $_SESSION['a'];
}else{
    $var = $_SESSION['a'];
    $what = "some text";

    if (isset($_POST['one']) ){
        $var = "new input";
            $_SESSION['a'] = $var;
        echo "one was posted";
    }
    if (isset($_POST['two']) ){
            $var = "new input";
            $_SESSION['a'] = $var;
        echo "two was posted";
    }   
} 
```

要发布的表格放在页脚中：

```
<form action="'.$_SERVER['PHP_SELF'].'" method="post">      
    <input type="submit" id="one" name="one"/><div>set one</div>
</form>
<form action="'.$_SERVER['PHP_SELF'].'" method="post">  
    <input type="submit" id="two" name="two"/><div>set two</div>
</form> 
```

上面代码背后的逻辑似乎有问题。调用页面并发送帖子问题时，它不会回显并且不会将会话更改为新值。

所以如果有人可以帮助我，我真的很感激。

多谢。

更新：

好的，代码完全可以工作到“其他”部分：

```
else{
    $var = $_SESSION['a'];

    if (isset($_POST["one"]) ){
        echo "post one was send";
    }
    if (isset($_POST["two"]) ){
        echo "post en was send";
    }

echo "session already exists.";
} 
```

这部分只显示回声：会话已存在。整个后置短语不起作用。根据某些变量，页脚将被嵌入。因此 html 中的全部内容将被回显：

```
echo '...
      <ul class="drop_down">
    <form action="'.$_SERVER['PHP_SELF'].'" method="post">      
        <input type="submit" id="one" name="one value="one"/><div>set one</div>
    </form>
    <form action="'.$_SERVER['PHP_SELF'].'" method="post">  
        <input type="submit" id="two" name="two" value="two"><div>set two</div>
    </form>
      </ul>
     ...'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:05:27.737

改变你的形式

```
 <form action="<?=$_SERVER['PHP_SELF']?>" method="post">      
   <input type="submit" id="one" name="one" value="one"/><div>set one</div>
   </form>
<form action="<?=$_SERVER['PHP_SELF']?>" method="post">  
   <input type="submit" id="two" name="two" value="two"/><div>set two</div>
</form> 
```

值需要发送..

* * *

**编辑#1：**

* * *

在我的系统中，这工作正常..

```
 <?php
        session_start();

        if (!isset($_SESSION['a'])){
           $var='hi';
        $_SESSION['a'] = $var;
        $var = $_SESSION['a'];
        }else{
            $var = $_SESSION['a'];
            $what = "some text";

            if (isset($_POST['one']) ){
                $var = "new input";
                    $_SESSION['a'] = $var;
                echo "one was posted";
            }
            if (isset($_POST['two']) ){
                    $var = "new input";
                    $_SESSION['a'] = $var;
                echo "two was posted";
            }   
        }
        ?>
        <form action="<?=$_SERVER['PHP_SELF']?>" method="post">      
            <input type="submit" id="one" name="one"/><div>set one</div>
        </form>
        <form action="<?=$_SERVER['PHP_SELF']?>" method="post">  
            <input type="submit" id="two" name="two"/><div>set two</div>
        </form> 
```

* * *

**编辑#2**

* * *

再试一次...

```
 if (!isset($_SESSION['a'])){
           $var='hi';
        $_SESSION['a'] = $var;
        $var = $_SESSION['a'];
        }else{
            $var = $_SESSION['a'];
            $what = "some text";

            if (isset($_POST['one']) ){
                $var = "new input1";
                    $_SESSION['a'] = $var;
                echo "one was posted";
                print_r($_SESSION);
            }
            if (isset($_POST['two']) ){
                    $var = "new input2";
                    $_SESSION['a'] = $var;
                echo "two was posted";
                print_r($_SESSION);
            }   
        }
        ?>
        <form action="<?=$_SERVER['PHP_SELF']?>" method="post">      
            <input type="submit" id="one" name="one"/><div>set one</div>
        </form>
        <form action="<?=$_SERVER['PHP_SELF']?>" method="post">  
            <input type="submit" id="two" name="two"/><div>set two</div>
        </form> 
```

这`session`是正确打印

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:20:21.127

这部分需要澄清。你到底想做什么？

```
if (!isset($_SESSION['a'])){
...create the session from some variables...
$_SESSION['a'] = $var;
$var = $_SESSION['a'];
}else{
$var = $_SESSION['a'];
$what = "some text"; 
```

试试这个：

```
 <?PHP
session_start();
if (isset($_POST['one']) )
    {
      $_SESSION['a'] = "langauage one";
      echo "one was posted";
    }
    elseif (isset($_POST['two']) )
        {
            $_SESSION['a'] = "langauge two";
            echo "two was posted";
        }   
        else
            {
                if (!isset($_SESSION['a']))
                    {
                        $_SESSION['a'] = "default langauge";
                    }

            } 
```

**这是 SELECT 的示例**

```
 <?PHP
    session_start();
    if (isset($_POST['language']) )
    {
      $_SESSION['a'] = $_POST['language'];
      echo "Language has ben set to ".$_POST['language'];
    }
    else
        {
            if (!isset($_SESSION['a']))
                {
                    $_SESSION['a'] = "default langauge";
                }

        }
?>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<select title="Please choose your Language" name="language">    
     <option value="langauage one">langauage one</option>
     <option value="langauge two">langauge two</option>
</select>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:34:42.500

形式：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">      
    <input type="submit" id="one" name="one" value='one'/><div>set one</div>
</form>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">  
    <input type="submit" id="two" name="two"value='two' /><div>set two</div>
</form> 
```

php：

```
<?php

    session_start();

    if (!isset($_SESSION['a'])){
        $var = 1;
        $_SESSION['a'] = $var;
        //$var = $_SESSION['a']; this is unnecessary 
    }else{
        $var = $_SESSION['a'];
        $what = "some text";

        if (isset($_POST['one']) ){
            $var = "one";
            $_SESSION['a'] = $var;
            echo "one was posted";
        }
        if (isset($_POST['two']) ){
            $var = "two";
            $_SESSION['a'] = $var;
            echo "two was posted";
        }   
    }

?> 
```

# ant - 如何使用 Ant 重命名文件和文件夹

> ID：13990723
> 
> 赞同：2
> 
> 时间：2012-12-21T13:02:34.300
> 
> 标签：ant

如何用 Ant 重命名多个文件和文件夹？对于我知道我可以这样做的文件；[问题](https://stackoverflow.com/questions/4224995/how-to-rename-n-files-with-ant-batch-job)

如何对文件夹做同样的事情？

例如文件夹集（输入）

```
com.google.appengine.eclipse.sdkbundle_1.5.2.r37v201107211953
com.google.gdt.eclipse.designer.doc.user_2.3.2.r37x201107161328
com.google.gdt.eclipse.designer.hosted.2_0.webkit_win32_2.3.2.r37x201107161253
org.eclipse.acceleo.common_3.1.0.v20110607-0602.jar 
```

输出：

```
com.google.appengine.eclipse.sdkbundle_1.5.2
com.google.gdt.eclipse.designer.doc.user_2.3.2
com.google.gdt.eclipse.designer.hosted.2_0.webkit_win32_2.3.2
org.eclipse.acceleo.common_3.1.0.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T22:50:27.160

对于复杂的操作，我使用[groovy ANT task](http://groovy.codehaus.org/The+groovy+Ant+Task)。

以下示例将使用正则表达式重命名您的文件和目录：

```
<project name="demo" default="rename">

    <target name="bootstrap">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get dest="${user.home}/.ant/lib/groovy-all.jar" src="http://search.maven.org/remotecontent?filepath=org/codehaus/groovy/groovy-all/2.0.6/groovy-all-2.0.6.jar"/>
    </target>

    <target name="rename">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy"/>

        <fileset id="filesToBeRenamed" dir="build"/>
        <dirset  id="dirsToBeRenamed" dir="build"/>

        <groovy>
            project.references.filesToBeRenamed.each { 
                String origName = it
                String newName = origName.replaceAll(/_[0-9\.]+[a-z0-9\-]+/, "")

                if (origName != newName) {
                    ant.move(file:origName, tofile:newName, verbose:"true")
                }
            }

            project.references.dirsToBeRenamed.each { 
                String origName = it
                String newName = origName.replaceAll(/_[0-9\.]+[a-z0-9\-]+/, "")

                if (origName != newName) {
                    ant.move(file:origName, tofile:newName, verbose:"true")
                }
            }
        </groovy>
    </target>
</project> 
```

笔记：

*   “引导”目标只需要运行一次。它将从 Maven 中心下载 groovy jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:01:18.053

看看[Ant-Contrib 任务](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)。一是`<for>`任务。这将允许您指定多个目录、目录模式等。这样，您可以遍历目录和文件。

您可以将文件和目录复制到另一个位置并使用[Mapper](http://ant.apache.org/manual/Types/mapper.html)映射文件名。（`<move>`任务也适用于映射器。）

我建议您将[Ant-Contrib Jar 文件](http://sourceforge.net/projects/ant-contrib/files/ant-contrib/1.0b3/ant-contrib-1.0b3-bin.zip/download)`${basedir}/antlib/ac`下载到您项目的目录中。然后在构建文件的开头执行此操作：

```
 <taskdef resource="net/sf/antcontrib/antlib.xml">
    <classpath>
        <fileset dir="${basedir}/antilb/ac"/>
    </classdef>
  <taskdef> 
```

这将定义 ant-contrib 任务并允许您使用它们。如果您使用版本控制系统并签入所有内容，那么有人可以签出您的项目并进行构建，而无需先安装 Ant-Contrib。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:42:33.737

这将移动目录及其所有子目录和文件。

```
 <move todir="${toDir}">
     <fileset dir="${fromDir}"/>
  </move> 
```

# asp.net - IIS url 重写、损坏的 href（css、js 等）

> ID：13990724
> 
> 赞同：3
> 
> 时间：2012-12-21T13:02:49.410
> 
> 标签：asp.net, .net, url-rewriting, iis-7.5

我在 asp.net 应用程序中使用 IIS url 重写模块，我的问题是任何内部相对引用，如 js、css、图像在此 url 重写后现在指向错误的 url，下面是我的重写规则

```
<rewrite>
      <rules>
         <rule name="pk" patternSyntax="ECMAScript">
          <match url="pk/([a-z]+).aspx" />
          <action type="Rewrite" url="{R:1}.aspx?mid=1" />
          <conditions logicalGrouping="MatchAny">
            <add input="{REQUEST_FILENAME}" pattern="(\.css|\.js)$" negate="true" />
          </conditions>
        </rule>
      </rules>
</rewrite> 
```

在上面用“pk/page_name.aspx”重写任何 url 被转换为 page_name.aspx?mid=1，这工作正常，但是母版页中对 js、css 和图像的引用现在也指向“pk/files /js/jquery.js”，而在我的应用程序中它应该是“files/js/jquery.js”，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:47:28.523

我能够自己解决这个问题，之前我做的完全错误，我只是在做一个导致问题的重写，我通过首先将页面“重定向”到所需的 URL 然后“重写”该 URL 来解决这个问题到我的应用程序理解的那个。以下是我的配置

```
<rewrite>
      <rules>
        <rule name="Redriect for Markets" stopProcessing="true">
          <match url="([a-z]+)\.aspx" />
          <action type="Redirect" url="/{id:{C:1}}/{R:1}.aspx" appendQueryString="false" />
          <conditions>
            <add input="{REQUEST_FILENAME}" pattern="(\.css|\.js|\.jpg|\.png|\.woff|\.tiff|\.gif|\.dev|\.swf)$" negate="true" />
            <add input="{QUERY_STRING}" pattern="mid=(.+)" />
          </conditions>
        </rule>
        <rule name="Rewrite for Markets" stopProcessing="true">
          <match url="([a-z][a-z])/(.*)" />
          <action type="Rewrite" url="{R:2}?mid={marketId:{R:1}}" />
          <conditions logicalGrouping="MatchAny">
              <add input="{REQUEST_FILENAME}" pattern="(\.css|\.js|\.jpg|\.png|\.woff|\.tiff|\.gif|\.dev|\.swf)$" negate="true" />
          </conditions>
        </rule>
      </rules>
      <rewriteMaps>
        <rewriteMap name="id">
          <add key="1" value="pk" />
        </rewriteMap>
        <rewriteMap name="marketId">
          <add key="pk" value="1" />

        </rewriteMap>
      </rewriteMaps>

    </rewrite> 
```

完成此操作后，我的 URL（例如[https://www.mydomain.com/index.aspx?mid=1](https://www.mydomain.com/index.aspx?mid=1)）首先“重定向”到[https://www.mydomain.com/pk/index.aspx](https://www.mydomain.com/pk/index.aspx)，然后“重写” " 到[https://www.mydomain.com/index.aspx?mid=1](https://www.mydomain.com/index.aspx?mid=1)内部。所以我的浏览器窗口显示 URL 为[https://www.mydomain.com/pk/index.aspx](https://www.mydomain.com/pk/index.aspx)并且我在 Request.QueryString["mid"] 中得到的值是 1，这正是我想要的。

内部 URL 工作的另一件事我必须在母版页中获取基本 URL，目前它设置为“/”

# android - Android 上的崩溃报告在开发者控制台中的位置

> ID：13990730
> 
> 赞同：2
> 
> 时间：2012-12-21T13:03:25.067
> 
> 标签：android, crash-reports

我一直在研究一个 android 项目并将其发布到市场上。然后，我通过 Play 商店在我的设备上安装了该应用程序，并在做某事后发现了一种可能使该应用程序崩溃的方法。

当应用程序强制关闭时，它询问我是否要发送我所做的报告，以便我可以在开发人员控制台中看到它的样子。

我添加了一些关于我做了什么导致应用程序强制关闭的文本，然后可以查看崩溃报告的样子，它包含各种信息，如设备制造商和型号等。我提交并登录到我的开发者帐户但不能查看崩溃报告中的任何信息，除了我在里面解释我做了什么的消息。

除非有人在消息中实际说出他们正在运行的手机或 Android 版本，否则其余信息会去哪里，我不需要复制该问题。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:06:27.753

AFAIK，您无法在开发者控制台中查看设备等。您只能查看用户消息（如果提供）或堆栈跟踪。除此之外，据我所知，没有更多信息。

[但是，您可以通过将ACRA](http://code.google.com/p/acra)集成到您的应用程序中来获得更多信息。这将为您提供有关崩溃的大量信息，包括内存统计信息、设备、正在运行的 android 版本等。

**编辑**

看起来该设备至少显示在新的开发者控制台中，但信息仍然与 ACRA 提供的信息相差甚远。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:11:24.890

包含标准报告后，它在某种程度上取决于 android(?) 或 Play Store 应用程序版本，您在报告中获得的详细信息似乎是什么。在发布者/开发者控制台中（来自新开发者控制台版本的示例）：

![来自开发者控制台的崩溃报告](../Images/607aedf7227a4feed6daf7eae9ff54b6.png)

# c# - 无法自动进入服务器

> ID：13990731
> 
> 赞同：0
> 
> 时间：2012-12-21T13:03:32.820
> 
> 标签：c#, visual-studio-2010, web-services

在我的项目中，我正在尝试使用以下代码将我的项目与我创建的 Web 服务连接起来：

```
 web reference -->  my web service 
```

* * *

```
 myWebSeviceClass connection = new myWebSeviceClass();
 public SingleStack retrieveSingleStackOrder(string TableName, string[] ColumnName)
 {
  /*ERROR*/   return connection.getSingleStackOrder(TableName, ColumnName);
 } 
```

我在上面的代码中收到以下错误。

![在此处输入图像描述](../Images/c80aebc313b7347adf043af7fa5a4823.png)

我的网络服务文件有如下内容：

```
 public GetOrder.SingleStack getSingleStackOrder(string tableName, List<string> columnNames)
 {
       //my function
 } 
```

`GetOrder`带有内部类的类在哪里`SingleStack`。

在问之前我搜索了很多，但找不到任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:07:24.217

您可能需要附加到服务。在 VS 菜单上单击**Debug -> Attach To Process...**然后浏览进程列表并双击您的 Web 服务。然后调试器将能够跟踪并进入该服务。

当您附加到正确的进程时，您应该注意到左侧的红色圆圈（您的断点）应该从红色轮廓变为实心红色圆圈。如果它仍然是红色轮廓，则表示未附加调试器。

请在[此处](http://weblogs.asp.net/hajan/archive/2010/06/30/debugging-asp-net-web-services.aspx)阅读有关附加到进程的更多信息（您希望将标题向下约三分之一的部分称为**第二种情况：调试已部署的 WS**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:05:11.217

应用程序是否已在调试模式下构建？释放模式可以防止这种情况发生。

# android - Android 水平滚动视图

> ID：13990732
> 
> 赞同：1
> 
> 时间：2012-12-21T13:03:45.223
> 
> 标签：android, android-layout

我有一个包含许多字段的布局，我希望为水平和垂直布局添加滚动条。但是垂直滚动正在工作，水平滚动不起作用。我已经在程序中动态加载了文本字段并添加了带有 Web 服务的字段。

我的活动

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LayoutScroll"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="horizontal|vertical" >

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="10dp"
    android:layout_marginTop="30dp"
    android:gravity="fill|fill_horizontal"
    android:orientation="vertical" >

      <TableRow
          android:id="@+id/Row_User_Deletion"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:background="#DF0101"
          android:gravity="center" >

         <TextView
             android:id="@+id/user_creation_id"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/txt_delete_user_userDeletion"
             android:textColor="@color/white"
             android:textSize="15dp" />
     </TableRow>

      <TableRow
          android:id="@+id/RowUserType"
          android:layout_width="match_parent"
          android:layout_height="45dp"
          android:layout_marginTop="10dp" >

          <TextView
              android:id="@+id/txt_delete_user_selectuserType"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginTop="5dp"
              android:text="@string/txt_delete_user_selectuserType"
              android:textColor="#424242" />

          <Spinner
              android:id="@+id/spin_delete_userType"
              android:layout_width="120dp"
              android:layout_height="50dp"
              android:layout_marginBottom="5dp"
              android:entries="@array/utype" />

          <Button
              android:id="@+id/btn_spinner_user_search_select"
              style="?android:attr/buttonStyleSmall"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginLeft="25dp"
              android:layout_marginTop="5dp"
              android:background="@drawable/redbtn"
              android:text="@string/btn_delete_user_search_user" />

      </TableRow>

    <TableRow
        android:id="@+id/deleteUserRow"
        android:layout_width="match_parent"
        android:layout_height="34dp"
        android:layout_marginTop="10dp"
        android:gravity="fill" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/txt_user_creation_userId"
            android:textColor="#424242" />

        <EditText
            android:id="@+id/txt_user_delete"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="5dp"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="55dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="5dp"
            android:background="@drawable/redbtn"
            android:text="@string/btn_delete_user_search_user" />

        </TableRow>

         <TableLayout
             android:id="@+id/delete_userDetails_Table"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:layout_marginTop="5dp"
             android:orientation="vertical"
             android:stretchColumns="*" >

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_marginTop="5dp"
                android:background="@color/red" >

                <TextView
                    android:id="@+id/textView2"
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent"
                    android:text="@string/txt_delete_user_select"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/textView3"
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent"
                    android:text="@string/txt_user_creation_userId"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/textView4"
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent"
                    android:text="@string/txt_user_creation_userName"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/textView5"
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent"
                    android:text="@string/txt_delete_user_UserRole"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/textView5"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/txt_componentmaster_createdDate"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/textView5"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/txt_componentmaster_createdBy"
                    android:textColor="@color/white" />
            </TableRow>
        </TableLayout>

    </LinearLayout>
</ScrollView> 
```

图像视图

![在此处输入图像描述](../Images/0937121a59b1b54ddcacacb35f651ba2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T03:39:25.667

请记住，您要水平滚动的视图必须以 LinearLayout 作为父级，然后只有您可以在该布局之间设置 Horizo​​ntalScrollView。

并将一个 Horizo​​ntalScrollView 作为这两个 LinearLayout 的父级。

希望这会帮助你。

简单：

```
<HORIZONTAL_VIEW ... >

 <!-- Your First Layout -->
 <LinearLayout ... >

 </LinearLayout>

 <!-- Your Second Layout -->
 <LinearLayout ... >

 </LinearLayout>

 </HORIZONTAL_VIEW ... > 
```

希望你明白我的意思。

随时查询。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:11:34.627

试试没有滚动视图的滚动条..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:id="@+id/linearLayout2"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true"
android:layout_marginBottom="10dp"
android:layout_marginTop="30dp"
android:gravity="fill|fill_horizontal"
android:scrollbars="horizontal|vertical"
android:orientation="vertical" >

  <TableRow
      android:id="@+id/Row_User_Deletion"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:background="#DF0101"
      android:gravity="center" >

     <TextView
         android:id="@+id/user_creation_id"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="@string/txt_delete_user_userDeletion"
         android:textColor="@color/white"
         android:textSize="15dp" />
 </TableRow>

  <TableRow
      android:id="@+id/RowUserType"
      android:layout_width="match_parent"
      android:layout_height="45dp"
      android:layout_marginTop="10dp" >

      <TextView
          android:id="@+id/txt_delete_user_selectuserType"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="5dp"
          android:text="@string/txt_delete_user_selectuserType"
          android:textColor="#424242" />

      <Spinner
          android:id="@+id/spin_delete_userType"
          android:layout_width="120dp"
          android:layout_height="50dp"
          android:layout_marginBottom="5dp"
          android:entries="@array/utype" />

      <Button
          android:id="@+id/btn_spinner_user_search_select"
          style="?android:attr/buttonStyleSmall"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginLeft="25dp"
          android:layout_marginTop="5dp"
          android:background="@drawable/redbtn"
          android:text="@string/btn_delete_user_search_user" />

  </TableRow>

<TableRow
    android:id="@+id/deleteUserRow"
    android:layout_width="match_parent"
    android:layout_height="34dp"
    android:layout_marginTop="10dp"
    android:gravity="fill" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/txt_user_creation_userId"
        android:textColor="#424242" />

    <EditText
        android:id="@+id/txt_user_delete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dp"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="55dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dp"
        android:background="@drawable/redbtn"
        android:text="@string/btn_delete_user_search_user" />

    </TableRow>

     <TableLayout
         android:id="@+id/delete_userDetails_Table"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="5dp"
         android:orientation="vertical"
         android:stretchColumns="*" >

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_marginTop="5dp"
            android:background="@color/red" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:text="@string/txt_delete_user_select"
                android:textColor="@color/white" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:text="@string/txt_user_creation_userId"
                android:textColor="@color/white" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:text="@string/txt_user_creation_userName"
                android:textColor="@color/white" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:text="@string/txt_delete_user_UserRole"
                android:textColor="@color/white" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/txt_componentmaster_createdDate"
                android:textColor="@color/white" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/txt_componentmaster_createdBy"
                android:textColor="@color/white" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

# php - php删除后如何初始化数组元素的顺序

> ID：13990734
> 
> 赞同：0
> 
> 时间：2012-12-21T13:03:56.443
> 
> 标签：php, arrays

请我有以下数组：

```
array(3) {
  [0]=>
  array(3) {
    ["id_coach"]=>
    int(1)
    ["nom_coach"]=>
    string(4) "kaka"       
  }
  [1]=>
  array(3) {
    ["id_coach"]=>
    int(2)
    ["nom_coach"]=>
    string(7) "kiki"

  }
  [2]=>
  array(3) {
    ["id_coach"]=>
    int(3)
    ["nom_coach"]=>
    string(7) "koko"

  }

} 
```

删除数组 [1] 后，我得到了这个数组：

```
array(2) {
      [0]=>
      array(3) {
        ["id_coach"]=>
        int(1)
        ["nom_coach"]=>
        string(4) "kaka"       
      }      
      [2]=>
      array(3) {
        ["id_coach"]=>
        int(3)
        ["nom_coach"]=>
        string(7) "koko"

      }

    } 
```

我认为这是正常的，但是请大师们在删除后如何初始化它并改为获取：

```
array(2) {
      [0]=>
      array(3) {
        ["id_coach"]=>
        int(1)
        ["nom_coach"]=>
        string(4) "kaka"       
      }      
      [1]=>
      array(3) {
        ["id_coach"]=>
        int(3)
        ["nom_coach"]=>
        string(7) "koko"

      }

    } 
```

先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:10:57.103

使用 array_values()

```
print_r( array_values( $array ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:07:23.060

```
$a2=array()
foreach($array as $v){
   $a2[]=$v;
} 
```

应该管用。

但我感觉还有一个“规范化”键值的功能。

重读您的问题，我认为 php 中没有任何方法可以强制数组始终具有连续元素（就像许多其他编程语言中的数组自动执行的那样）-在这方面，php 数组更类似于其他中的哈希语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:10:19.600

[array_values()](http://php.net/manual/en/function.array-values.php)会做到这一点。

它将返回值的索引数组。

或者您可以使用[array_splice](http://php.net/manual/en/function.array-splice.php)删除元素。

```
array_splice($arr, 1, 1);
var_dump($arr); 
```

# c# - 允许处理无响应消息的请求-响应逻辑

> ID：13990736
> 
> 赞同：1
> 
> 时间：2012-12-21T13:04:05.443
> 
> 标签：c#, .net, sockets, logic, communication

我有一个允许数千个客户端连接的套接字应用程序。它将它们存储在 a 中`ConcurrentDictionary<int, Socket>`并且仅针对请求-响应情况运行：

*   当我需要数据时，我会找到相关的套接字并发送一个请求，请求我需要的数据。
*   发送请求后，我会收到字节，直到它发送响应。然后我停止接收。

像这样：

```
public Task<Message> Request(int clientId, Message message)
{
    Socket client;
    return Clients.TryGetValue(clientId, out client)
        ? RequestInternal(client, message);
        : _EmptyTask;
}

public async Task<Message> RequestInternal(Socket client, Message message)
{
    await SendAsync(client, message).ConfigureAwait(false);
    return await ReceiveOneAsync(client).ConfigureAwait(false);
} 
```

现在我需要更改此应用程序以允许客户随时向我发送任何内容；即使没有我提出要求。这 - 我认为 - 将需要不断地从套接字接收和完全不同的方法。

# 问题：

1.  这种应用程序的已知方法（最佳实践）是什么？
2.  您可以告诉我任何问题或您可以指出我的任何指南吗？

* * *

**我的想法：**
*免责声明：这部分有点长，完全是假设性的。如果您对上述问题有答案，则可以跳过。*

我的想法是：

*   不断接收字节并将组装好的 PDU 添加到`BlockingCollection<Message>`.
*   `BlockingCollection`创建一个线程，专用于使用'方法处理接收到的消息`GetConsumingEnumerable`。

处理线程将执行此操作：

```
foreach (var message in Messages.GetConsumingEnumerable())
    ProcessMessage(message); 
```

有了这个，我可以接收和处理客户端发送的所有内容，但将发送来回复我的请求的消息与发送的消息区分开来，因为客户端需要这将是一个问题。

我想我可以随请求发送一个唯一标识符字节（该特定客户端唯一）。然后客户端可以在响应中将该标识符发回给我，我可以使用它来区分响应。

```
ProcessMessage(Message msg)
{
    // msg is a message from msg.Sender.

    if (msg.Id == 0)
    {
        // msg is not a response, do processing.
    }
    else
    {
        // msg is a response to the message that's sent with msg.Id.
        // Find the request that:
        // * ...is made to msg.Sender
        // * ...and has the msg.Id as identifier.
        // And process the response according to that.
    }
} 
```

这意味着我还必须存储请求。这是一个假设的版本`RequestInternal`： **编辑：** *在 Stephen Cleary 的回答之后用 s**替换`Wait`了调用。`await`*

```
private async Task RequestInternal(Socket client, Message message)
{
    var request = new Request(client, message);
    Requests.Add(request);

    await SendAsync(client, message).ConfigureAwait(false);
    return await request.Source.Task.ConfigureAwait(false);
} 
```

和`Request`班级：

```
private sealed class Request
{
    public readonly byte Id;
    public readonly Socket Client;
    public readonly Message Message;
    public readonly TaskCompletionSource<Message> Source;

    public Request(Socket client, Message message)
    {
        Client = client;
        Message = message;
        Source = new TaskCompletionSource<Message>();

        // Obtain a byte unique to that socket...
        Id = GetId(client);
    }
} 
```

并`ProcessMessage`变成这样：

```
ProcessMessage(Message msg)
{
    if (msg.Id == 0)
        OnReceived(msg); // To raise an event.
    else
    {
        // Method to find a request using msg.Sender and msg.Id
        var request = Requests.Find(msg);

        if (request != null)
            request.Source.SetResult(msg);
    }
} 
```

虽然我不知道是什么样的集合类型`Requests`。

**编辑：**我使用了`ConcurrentDictionary<Key, Request>`where`Key`是一个私有结构，带有一个`Int32`（套接字的 ID）和一个`Byte`（消息的 ID）字段。它还实现了`IEquatable<T>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:49:06.703

几年前，我写了一篇[TCP/IP .NET Sockets FAQ来解决一些常见问题（例如](http://nitoprograms.blogspot.com/2009/04/tcpip-net-sockets-faq.html)[消息帧](http://nitoprograms.blogspot.com/2009/04/message-framing.html)、[连续阅读](http://nitoprograms.blogspot.com/2009/06/using-socket-as-connected-socket.html)和[常见错误的解释](http://nitoprograms.blogspot.com/2009/05/error-handling.html)）。代码示例都使用`Socket`该类，但相同的概念适用于所有 TCP/IP 套接字。

关于您的协议设计和请求/响应匹配，整体方法听起来不错。您需要确保您是线程安全的（例如，`Requests`可能是 a `ConcurrentDictionary`）。此外，您应该`await` `SendAsync`而不是调用`Wait`.

我已经尝试过但尚未投入生产的另一种方法是基于[TPL Dataflow](http://msdn.microsoft.com/en-us/library/hh228603.aspx)。您可以为每个客户端创建一个表示“输出”的块，为“输入”创建另一个块。然后，您可以在其上分层您的消息框架，并在其上分层您的请求/响应匹配，然后将任何剩余的（未经请求的）消息发送到单个 shared `BufferBlock`。

因此，您的“最终用户”API 最终将如下所示：

```
// Send a request and asynchronously receive a matching response.
Task<Message> RequestAsync(int clientId, Message message);

// Endpoint for unsolicited messages.
IReceivableSourceBlock<Tuple<int, Message>> UnsolicitedMessages { get; } 
```

然后，您可以连接一个`ActionBlock`to`UnsolicitedMessages`来执行一个委托，只要有人进来。

# sql - 我有一个错误，我在 Access 上找不到我的特定颜色

> ID：13990737
> 
> 赞同：0
> 
> 时间：2012-12-21T13:04:10.097
> 
> 标签：sql, ms-access, colors, find

我正在开发使用 Access 的项目，遇到问题。

该项目包括 3 个表，因此它们是 PARCA、KATALOG 和 TEDARIKCI。

还有他们的专栏PARCA；PID,Padi,Renk KATALOG 有 3 列：TID,PID,maliyet 和最后一个 TEDARIKCI 有 3 列 TID,tadi,adres

我只想找到红色 parca ，所以我使用代码：

```
SELECT T.TID
FROM PARCA AS P, TEDARIKCI AS T, KATALOG AS K
WHERE P.PID=K.PID AND K.TID=T.TID AND P.Renk NOT IN('RED'); 
```

如果我使用 "IN('RED')" ，则会出现错误，但如果我使用它，则没有任何错误，并且还有其他 TEDARIKCI 使用的其他颜色。

那么我该如何解决这个问题。谢谢

真挚地。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:19:48.347

如果您稍微更改一下 SQL 语句以使连接显式并使用`WHERE P.Renk = 'RED'`而不是`P.Renk IN ('RED')`

```
SELECT T.TID
FROM PARCA AS P
INNER JOIN KATALOG AS K
ON P.PID=K.PID
INNER JOIN TEDARIKCI AS T
ON K.TID=T.TID 
WHERE P.Renk ='RED'; 
```

# c# - 更改项目的默认命名空间和程序集名称。它是否影响引用它的项目

> ID：13990744
> 
> 赞同：1
> 
> 时间：2012-12-21T13:04:34.573
> 
> 标签：c#, c#-2.0, .net-assembly

我有一个包含许多项目的解决方案。我想更改其中一个项目的默认命名空间和程序集名称，因为它们与项目名称不同，并且在查找 dll 时存在混淆。我通过在相关项目的属性中更改它来做到这一点。

现在我有一个问题，我只想为项目应用热修复。如果我只在发布中更改 1 个项目（其 dll 的名称已更改）的 dll，那么引用它的项目是否能够识别它。还是我需要找到所有引用它的项目并为所有这些项目应用修补程序。

引用是项目引用而不是 dll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:49:42.320

修补程序确实没有工作，并且其他项目 dll 没有考虑默认命名空间名称的更改以及它们所依赖的 dll 的程序集名称。因此，对于更改默认命名空间或程序集名称的任何人，应用依赖于正在更改的 dll 的整套 dls

# iphone - ios为拇指调整图像大小-虽然高插值但模糊

> ID：13990745
> 
> 赞同：1
> 
> 时间：2012-12-21T13:04:35.537
> 
> 标签：iphone, ios, ipad, uiimage, image-resizing

我已经写了一个类别`UIImage`来调整图像大小，比如 iphone 照片应用程序。

尽管插值设置为高，但图像看起来并不像照片应用程序中的那样。相反，它看起来`unsharp`或`blurry`。

这是我所做的：

```
 - (UIImage *)resizeImageProportionallyIntoNewSize:(CGSize)newSize;
    {
    CGFloat scaleWidth = 1.0f;
    CGFloat scaleHeight = 1.0f;

    NSLog(@"Origin Size = %@", NSStringFromCGSize(self.size));

    if (CGSizeEqualToSize(self.size, newSize) == NO) {

        //calculate "the longer side"
        if(self.size.width > self.size.height) {
            scaleWidth = self.size.width / self.size.height;
        } else {
            scaleHeight = self.size.height / self.size.width;
        }
    }    

    // now draw the new image in a context with scaling proportionally
    UIImage *sourceImage = self;
    UIImage *newImage = nil;

    //now we create a context in newSize and draw the image out of the bounds of the context to get
    //an proportionally scaled image by cutting of the image overlay
    if([[UIScreen mainScreen] scale] == 2.00) {
         UIGraphicsBeginImageContextWithOptions(newSize, YES, 2.0);
    }
    UIGraphicsBeginImageContext(newSize);
    // Set the quality level to use when rescaling
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh);

    //Center image point so that on each egde is a little cutoff
    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.size.width  = (int) newSize.width * scaleWidth;
    thumbnailRect.size.height = (int) newSize.height * scaleHeight;
    thumbnailRect.origin.x = (int) (newSize.width - thumbnailRect.size.width) * 0.5;
    thumbnailRect.origin.y = (int) (newSize.height - thumbnailRect.size.height) * 0.5;

    [sourceImage drawInRect:thumbnailRect];

    newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    if(newImage == nil) NSLog(@"could not scale image");

    return newImage ;
} 
```

BTW：是否使用高插值没有区别。也许我做错了什么。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:29:45.853

制作缩略图的最佳方式是让系统使用 Image I/O Framework 为您制作。唯一的技巧是，由于您使用的是 CGImage，因此您必须考虑屏幕分辨率：

```
CGImageSourceRef src = CGImageSourceCreateWith... // whatever
CGFloat scale = [UIScreen mainScreen].scale;
CGFloat w = // maximum size, multiplied by the scale
NSDictionary* d = 
    [NSDictionary dictionaryWithObjectsAndKeys:
     (id)kCFBooleanTrue, kCGImageSourceShouldAllowFloat,
     (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailWithTransform,
     (id)kCFBooleanTrue, kCGImageSourceCreateThumbnailFromImageAlways,
     [NSNumber numberWithInt:(int)w], kCGImageSourceThumbnailMaxPixelSize,
     nil];
CGImageRef imref = 
    CGImageSourceCreateThumbnailAtIndex(src, 0, (__bridge CFDictionaryRef)d);
UIImage* im = 
    [UIImage imageWithCGImage:imref scale:scale orientation:UIImageOrientationUp];
CFRelease(imref); CFRelease(src); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:14:54.967

如果它不清晰/模糊，您应该尝试通过以下方式关闭抗锯齿：

```
CGContextSetShouldAntialias(context, NO); 
```

希望这可以帮助。

# visual-c++ - 在视频中计算帧运动的更好方法是什么？

> ID：13990746
> 
> 赞同：1
> 
> 时间：2012-12-21T13:04:37.720
> 
> 标签：visual-c++, opencv, opticalflow

为了找到连续的帧运动差异，我使用了帧的绝对差，然后将所有像素相加来量化运动量。我已经在 OpenCV 中做到了。

但我最近了解了 Horn 和 Schunk 的光流算法和基于宏块的运动补偿。OpenCV 库已经内置了可以计算它们的函数。但我不知道如何量化它们。它们比第一种方法更好吗？

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:34:13.707

在opencv中实现光流的方式是...

1.  最初在要跟踪的目标出现的帧（比如 FrameA）中检测一些点作为跟踪（兴趣点）的良好特征......有些点可能位于目标上，有些可能位于背景上......
2.  检测到的点存储在向量数组中，并与 FrameA 和 FrameB 一起传递给光流函数……后面的 (FrameB) 是我们打算找到感兴趣点位置的下一帧……
3.  当我们得到 FrameB 中兴趣点的位置时，我们可以估计 FrameA 和 FrameB 之间的兴趣点的位移......

对于你的情况......因为你正在做帧运动计算......使用背景减法（帧微分......）作为启动帧的技术，你可以从那里开始寻找兴趣点......当变化超过一个阈值开始获取兴趣点...在接下来的连续帧中跟踪它们，您可以制作一个直方图，显示有多少兴趣点在下一帧中发生了多少位移...这就是我现在能想到的用于量化帧运动...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:27:18.540

虽然我对特定的 opencv 实现几乎没有经验，但我可以告诉你，光流通常不会尝试量化运动量。您可以根据光流向量的长度（例如，对块速度求和）在输出上定义一个度量，但这与您使用的度量非常不同。这是否对您有用取决于应用程序。为了比较，考虑一个灰色物体在白色背景上移动，一个黑色物体在白色背景上移动。您的帧差度量会将黑色对象视为更多运动，而块速度之和度量会将其视为大致相同的运动量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:17:42.133

最后，您还应该考虑方法的运行时。差分图像的计算复杂度非常低，可以在几毫秒内估计。但是你无法量化你的物体的速度。例如，摇晃相机可能会造成问题。较慢的是基于光流的方法，例如金字塔形 Lucas Kanade 或 Horn Schunk 方法，但您可以针对每个像素（密集方法，例如 Horn Schunk）或一组预定义像素（稀疏方法，例如金字塔形 Lucas Kanade）获得运动矢量。因此，您现在可以区分不同的运动对象，或者您只需使用计算出的运动矢量的长度。但是运行时间大约是 200 毫秒到 2 秒，并且取决于参数、帧的大小和要计算的向量数量等。

# javascript - javascript在android中字符串

> ID：13990749
> 
> 赞同：-1
> 
> 时间：2012-12-21T13:04:53.230
> 
> 标签：javascript, android, string

我现在有一个代码片段，我想将其转换为字符串。无法找到任何解决方案。我该怎么做？

这是我的 JavaScript：

```
<html>
    <head>
    </head>
    <body style="background-color:#FFFFFF;color:#000000;">
        <p>
            <a href="tel:133300">
                <img src="http://www.biznessapps.com/imghost/0/52/104345/NewcastleTaxis.jpg" alt="" width="257" height="108" />
            </a>
        </p>
        <p>
            <strong>
                <span style="font-size: small; font-family: arial,helvetica,sans-serif;">Taxi Services</span>
            </strong><br />
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;">Ring for a taxi and share the fare with a friend</span>
        </p>
        <p>
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;"><a href="tel:133300">Call 133 300</a></span>
        </p>
        <p>
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;">Taxis only pick up from the following secure ranks between 12am to 5am.</span><br />
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;">&bull; Kent Hotel and Exchange Hotel (Beaumont St), Hamilton</span><br />
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;">&bull; King St Hotel (corner of King and Steel St), Newcastle</span><br />
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;">&bull; Fanny&rsquo;s (Centenary Rd), Newcastle</span><br />
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;">&bull; The Brewery (Wharf Rd), Newcastle</span>
        </p>
        <p>
            <span style="font-family: arial,helvetica,sans-serif; font-size: small;">For more information visit <a href="http://www.newcastletaxis.com.au" target="_blank">www.newcastletaxis.com.au</a></span>
        </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:26:20.047

首先，您发布的代码不是 Javascript；它是 HTML（并且它不包含任何 Javascript）。

其次，您没有为您的问题提供任何背景，也没有坦率地提出问题。请提供一些有用的信息以获得答案：

*   你想做什么？
*   您要解决什么具体问题？
*   你使用什么编程语言？
*   到目前为止，您尝试过什么，您期望会发生什么，以及发生了什么？
*   HTML 来自哪里（文件、数据库、Web 服务器）？它需要去哪里？

# android - ListView 的 Android 替代颜色是随机的

> ID：13990751
> 
> 赞同：3
> 
> 时间：2012-12-21T13:04:59.720
> 
> 标签：android, android-listview, android-arrayadapter

我正在尝试为列表视图设置替代背景颜色，并在每次启动该活动时随机设置背景颜色。

![在此处输入图像描述](../Images/25a869004da715111e987f07fa930914.png) ![在此处输入图像描述](../Images/e68e3a03df23410cc1a3239ede7cbfc4.png)

阵列适配器

```
public class PlacesListAdapter extends ArrayAdapter<Place> implements
        Filterable {
    public Context context;
    private List<Place> orig, itemDetailsrrayList;
    private PlaceFilter filter;

    public PlacesListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public PlacesListAdapter(Context context, int resource, List<Place> places) {
        super(context, resource, places);
        this.context = context;
        // this.places = places;

        itemDetailsrrayList = places;
        orig = new ArrayList<Place>(itemDetailsrrayList);

        filter = new PlaceFilter();
        // imageLoader = new ImageLoader(context.getApplicationContext());

    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Place getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        // View view = convertView;
        // Place p = places.get(position);

        if (convertView == null) {
            LayoutInflater viewInflater;
            viewInflater = LayoutInflater.from(getContext());
            convertView = viewInflater.inflate(R.layout.list_item_place, null);

            holder = new ViewHolder();
            holder.placeTitle = (TextView) convertView
                    .findViewById(R.id.place_title);
            holder.placeDistance = (TextView) convertView
                    .findViewById(R.id.place_distance);
            holder.placeCategoryIcon = (ImageView) convertView
                    .findViewById(R.id.place_category_icon);

            // Setting Alternative Row Colors
            if (position % 2 == 0) {
                convertView
                        .setBackgroundResource(R.drawable.list_view_place_row_1);
            } else {
                convertView
                        .setBackgroundResource(R.drawable.list_view_place_row_2);
            }

            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.placeTitle.setText(itemDetailsrrayList.get(position)
                .getPlaceTitle());
        holder.placeDistance.setText("200");
        holder.placeCategoryIcon.setImageResource(R.drawable.icon_category);

        return convertView;
    }

    static class ViewHolder {
        TextView placeId;
        TextView placeTitle;
        TextView placeDistance;
        ImageView placeCategoryIcon;
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return filter;
    }

    private class PlaceFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults oReturn = new FilterResults();
            ArrayList<Place> results = new ArrayList<Place>();
            if (orig == null)
                orig = itemDetailsrrayList;
            if (constraint != null) {
                if (orig != null && orig.size() > 0) {
                    for (Place g : orig) {
                        if (g.getPlaceTitle()
                                .toLowerCase()
                                .startsWith(constraint.toString().toLowerCase()))
                            results.add(g);
                    }
                }
                oReturn.values = results;
            }
            return oReturn;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            itemDetailsrrayList = (ArrayList<Place>) results.values;
            notifyDataSetChanged();
        }

    }
} 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/list_view_place_row_1" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@color/list_view_place_selected" android:state_pressed="true" android:state_selected="false"/>
    <item android:drawable="@color/list_view_place_selected" android:state_pressed="false" android:state_selected="true"/>
    <item android:drawable="@android:color/transparent"/>

</selector> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:16:36.177

代码似乎是正确的。可以尝试以下：

声明颜色的整数数组：

```
private int[] colors = new int[] { R.drawable.list_view_place_row_1, R.drawable.drawable.list_view_place_row_2}; 
```

而在 getView()....

```
int colorPos = position % colors.length;
convertView.setBackgroundResource(colors[colorPos]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:19:54.933

在getview方法中，可以实现一个逻辑，即如果位置是偶数则设置背景色1，如果位置是奇数则设置背景色2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T05:38:51.133

在返回 convertView 之前，根据需要设置背景。在返回 convertView 之前使用此行

```
 if (position % 2 == 0) 
{
 convertView .setBackgroundResource(R.drawable.list_view_place_row_1); 
} 
else
 {
 convertView .setBackgroundResource(R.drawable.list_view_place_row_2); 
} 
return convertView; 
```

***我不确定伙计，***但我认为它会**`(convertView == null)`**第一次进入内部。之后，当您调用时，**`holder = (ViewHolder) convertView.getTag();`**它会请求具有先前位置背景颜色的视图。这就是为什么你得到那个输出

# php - 记住国家用户输入

> ID：13990757
> 
> 赞同：1
> 
> 时间：2012-12-21T13:05:21.997
> 
> 标签：php, forms, country

我一直坚持如何让表单记住用户输入的国家。最后它将用于数据库，但我还想验证是否已输入国家/地区。在测试时，我只是收到我的错误消息。

```
<?php
session_start();

function print_form(){
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>" id="uploadform"  
style="margin-top:5% auto" enctype="multipart/form-data">

<p style="color:#F00;">Todos campos obligatorios</p><br />

<p><label for="name">Nombre</label></p>
<p style="width:240px"><input name="name" id="name" type="text" class="field" value="
<?= $_SESSION['myForm']['name']; ?>" tabindex="1"/></p>

<p>
<label for="email">Correo Electr&oacute;nico</label></p>
<p style="width:240px"><input name="email" id="email" type="text" class="field" 
value="<?= $_SESSION['myForm']['email']; ?>" tabindex="2"/></p>

<label for="country_code">Pais</label></p>
<p><select name="country" style="width: 140px; cursor:pointer;cursor:hand;" 
class="field" id="country"value="<?= $_SESSION['country'] = $country;?>" tabindex="3"/>
<option value="Country">...</option>
<option value="Afganistan">Afghanistan</option>
<option value="Albania">Albania</option>
<option value="Algeria">Algeria</option>

</select></p>            

<p><input type="submit" name="submit" id="submit" class="submit" 
value="ENVIAR"  tabindex="8"/></p>
<p><input type="hidden" name="submitted"  value="true" /></p>
</form>

<?php
}

 function process_form() {
$name = trim($_POST['name']);
$email = trim($_POST['email']);
$country = trim($_POST['country_code']);

$thanksmessage='<div id="thanks">Gracias! Tu mensaje ha sido enviado 
con &eacute;xito!   </div>';

$errors = array(); 

if (empty($_POST['name']) ) {
    $errors[]=' tu nombre';
    }

if (empty($_POST['email']) ) {
    $errors[]=' tu correo electr&oacute;nico';
    } else {

    if(!preg_match("/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]
{2,6}$/i", stripslashes(trim($_POST['email'])))) {
        $errors[]='El formato del correo electr&oacute;nico no está bien';
    } 
} 

if (empty($_POST['country_code']) ) {
    $errors[]=' tu pa&iacutes';
    }

if (empty($errors)) {

    $message .= "$env $_SERVER[$env]\n";

    if(!mail($to,$subject,$message,$headers)) {
        exit("Disculpa se ha producido un error. Int&eacute;ntalo de nuevo. 
Gracias<");
    } else {
        echo '<div id="subscriptfeedback">'. $thanksmessage .'</div>';
        unset($_SESSION['myForm']);
        print_form();

    } 

} else { 
    echo '<div id="subscriptfeedback">Olvidaste';
    foreach ($errors as $msg) {
            echo " $msg,\n";
        } 
    echo 'por favor intenta de nuevo.</div>';
    print_form();
} 
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:07:46.770

您可以将其存储在会话中，例如：

```
$_SESSION['country'] = $country; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:16:07.113

使用 Sessions 记住帖子值或设置 Cookie 让浏览器记住所选城市。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:30:00.370

如果您只是想在用户提交表单并显示错误后在相应的国家/地区表单字段中记住国家/地区名称，则可以在国家/地区表单字段中输出相应的 $_POST 数组元素。例如，`echo (empty($_POST['country'])) : "" ? $_POST['country']`。

顺便说一句，请确保将`name`属性添加到`select`标签中。

# x++ - AX2012 通过 AX 类创建销售订单

> ID：13990758
> 
> 赞同：1
> 
> 时间：2012-12-21T13:05:25.337
> 
> 标签：x++, dynamics-ax-2012

我想通过 x++ 代码在 ax 2012 中创建销售订单，我对其进行了搜索，仅通过创建和插入表缓冲区找到了直接的标题和行创建，我想通过标准 AX 类创建销售订单，所以我不必担心商业规则。就像我们可以使用 AxInventTransferTable 和 AxinventTransferLine 类创建转移订单一样。

一个简单的代码示例将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:23:18.470

你可以看看我同事的一篇博文。他写了一篇关于 SalesAutoCreate 框架的文章。

[使用 SalesAutoCreate 创建销售订单](http://www.kevinroos.be/2010/07/salesautocreate-class/)

它很好地解释了如何扩展此框架以添加自定义类型的销售订单导入。此外，SalesAutoCreate 已经包含一般 SalesTable 和 SalesLine 字段的一些业务逻辑。

PS：另一种选择是使用 SalesSalesOrderService 类和 AxSalesTable / AxSalesLine 类。（相当于您用于转移订单的 AxBc 类）

# ruby-on-rails - 无法让 ActiveRecord::Store 以形式工作

> ID：13990761
> 
> 赞同：1
> 
> 时间：2012-12-21T13:05:27.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

ActiveRecord::Store 在 3.2 的更高版本中是否发生了变化？我在搜索中找不到很多关于它的信息。有些人认为这很好，有些人有意见。有一些早期的 3.2 发布博客条目，大多数只是使用控制台更新 ActiveRecord::Store 中的属性。有一些 *示例/教程*将其与表单一起使用。大多数人像列一样使用商店属性，但我无法让它工作。也无法使某些控制台示例正常工作。

```
class Stage < ActiveRecord::Base
  AD_ATTR = [:job_area, :end_date, :ad_url, :instructions, :other]
  store :ad, :assessors => AD_ATTR
  attr_accessible *AD_ATTR, :date, :enterable, :est_candidates, :name, :status, :program_id, :sequence
end

# I've also tried it without the * and defining each accessor 
```

一些教程显示使用对象点表示法从控制台使用存储。我的不工作。将其用作哈希可以正常工作。

```
1.9.2-p136 :752 > s = Stage.find(1)
 => #<Stage id: 1, ... , ad: {}, sequence: 1> 
1.9.2-p136 :753 > s.ad
 => {} 
1.9.2-p136 :754 > s.other
NoMethodError: undefined method `other' for #<Stage:0x00000103de4528>

1.9.2-p136 :755 > s.ad[:other]
 => nil 

1.9.2-p136 :756 > s.other = "stuff"
NoMethodError: undefined method `other=' for #<Stage:0x00000103de4528>

1.9.2-p136 :757 > s.ad[:other] = "stuff"
 => "stuff" 
1.9.2-p136 :758 > a.other
NoMethodError: undefined method `other' for #<Take::Assessment:0x000001038ba778> 
```

然后以一种形式，如果我尝试：

```
<tr class="field">
  <th><%= f.label :other %></th>
  <td><%= f.text_field :other %></td>
</tr> 
```

我去拿：

```
undefined method 'other' for #<Stage:0x0000010396a650> 
```

我确信我可以破解它，或者像我在其他几个地方一样使用 JSON。这似乎很合适，因为只有少数 Stage 记录需要广告属性。

编辑

无法帮助自己进行黑客攻击。我让它工作了，但是，根据我能找到的东西，它应该只是一个模型属性。

在表单中，我使用了 fields_form：

```
<%= fields_for :ad_fields do |a| %>
  <tr class="field">
    <th><%= a.label :other %></th>
    <td><%= a.text_field :other, :value => @stage.ad[:other] %></td>
  </tr>

  <tr class="field">
    <th><%= a.label :job_area %></th>
    <td><%= a.text_field :job_area, :value => @stage.ad[:job_area] %></td>
  </tr>

<% end %> 
```

在更新控制器中，我填充了商店。

```
def update
  @stage = Stage.find(params[:id])
  respond_to do |format|
    if params[:ad_fields]
      params[:ad_fields].each do |key,value|
        @stage.ad[key.to_sym] = value
      end
    end
    if @stage.update_attributes(params[:stage])
    ...
  end 
```

使用此方法，您还可以将其他对象放入值中，其中有人已经拥有 gem store_field。我的 hack 至少可以让我使用 ActiveRecord::Store 进行评估

史蒂夫

# excel - 通过 ADODB.Connection 运行 .vbs 文件时出错

> ID：13990772
> 
> 赞同：0
> 
> 时间：2012-12-21T13:06:17.363
> 
> 标签：excel, vbscript, ado, adodb, vba

下面的脚本形成了找出那些没有按递增顺序排列的日期值的行。但是当我运行代码时得到一个`ERROR`说法`No value given one or more required parameters`

**代码**

```
Option Explicit

Dim conn, cmd, rs
Dim clauses(36), i
Dim xlApp, xlBook

Set conn = CreateObject("ADODB.Connection")
With conn
.Provider = "Microsoft.ACE.OLEDB.12.0"
.ConnectionString = "Data Source=""D:\WIPData\AravoMacro\Finalscripts\GE_Wing_To_Wing_Report.xlsx"";" & _
    "Extended Properties=""Excel 12.0;HDR=Yes"""
.Open
End With

For i = 0 To 36
clauses(i) = "[Task" & i + 1 & " Start Date] < [Task" & i + 2 & " Start Date]"
Next

Set cmd = CreateObject("ADODB.Command")
cmd.CommandText = "SELECT * FROM [GEWingToWingMay25$] WHERE " & Join(clauses, " OR ")
cmd.ActiveConnection = conn
Set rs = cmd.Execute

Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = True
Set xlBook = xlApp.Workbooks.Add
xlBook.Sheets(1).Range("A1").CopyFromRecordset cmd.Execute 
```

有谁可以帮我离开这里吗？

**编辑**

![SQL 文本的屏幕截图](../Images/0781456d9af5ae6ea951318c5f54ca10.png)

谢谢，

**编辑1**

现在我尝试了这个

```
 Set cmd = CreateObject("ADODB.Command")
 'cmd.CommandText = "SELECT * FROM [GEWingToWingMay25$] WHERE " & Join(clauses, " OR ") 
  cmd.CommandText = "SELECT * FROM [GEWingToWingMay25$] WHERE " & "#2012/10/01# > #2012/10/015#"
  MsgBox(cmd.CommandText)
  cmd.ActiveConnection = conn
  Set rs = cmd.Execute 
```

收到错误`class doesn't support Automation`

**快照2**

![Excel 表格捕捉](../Images/4b6f585a326214c1b2c25741f26ccea6.png)

**编辑3**

我更新如下：

```
 cmd.CommandText = "SELECT * FROM [GEWingToWingMay25$] WHERE #" &     CDate([Task1StartDate]) & "# > #" & CDate([Task2StartDate]) _
 "# > #" & CDate([Task3 Start Date]) & "# > #" & CDate([Task4 Start Date]) _
 "# > #" & CDate([Task5 Start Date]) & "# > #" & CDate([Task6 Start Date]) _
 "# > #" & CDate([Task7 Start Date]) & "# > #" & CDate([Task8 Start Date]) _
 "# > #" & CDate([Task9 Start Date]) & "# > #" & CDate([Task10 Start Date]) _
 "# > #" & CDate([Task11 Start Date]) & "# > #" & CDate([Task12 Start Date]) _
 "# > #" & CDate([Task13 Start Date]) & "# > #" & CDate([Task14 Start Date]) _
 "# > #" & CDate([Task15 Start Date]) & "# > #" & CDate([Task16 Start Date]) _
 "# > #" & CDate([Task17 Start Date]) & "# > #" & CDate([Task18 Start Date]) _
 "# > #" & CDate([Task19 Start Date]) & "# > #" & CDate([Task20 Start Date]) _
 "# > #" & CDate([Task21 Start Date]) & "# > #" & CDate([Task22 Start Date]) _
 "# > #" & CDate([Task23 Start Date]) & "# > #" & CDate([Task24 Start Date]) _
 "# > #" & CDate([Task25 Start Date]) & "# > #" & CDate([Task26 Start Date]) _
 "# > #" & CDate([Task27 Start Date]) & "# > #" & CDate([Task28 Start Date]) _
 "# > #" & CDate([Task29 Start Date]) & "# > #" & CDate([Task30 Start Date]) _
 "# > #" & CDate([Task31 Start Date]) & "# > #" & CDate([Task32 Start Date]) _
 "# > #" & CDate([Task33 Start Date]) & "# > #" & CDate([Task34 Start Date]) _
 "# > #" & CDate([Task35 Start Date]) & "# > #" & CDate([Task36 Start Date]) & "#;" 
```

**EDIT4**正如[谷歌链接](http://support.microsoft.com/kb/257819#Connect)所暗示的那样，如果`HDR`设置为是，那么 excel 表应该有第一行作为字段级标签，我的 excel 有。但是为什么会出现错误呢？

*更新代码*

```
 Option Explicit

    Dim conn, cmd, rs
    Dim clauses(34), i
    Dim xlApp, xlBook
    Dim tempDate,LenDate

    Set conn = CreateObject("ADODB.Connection")
    With conn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .ConnectionString = "Data Source=""D:\AravoVB\GE_Wing_To_Wing_Report.xlsx"";" & _
        "Extended Properties=""Excel 12.0;HDR=Yes"""
    .Open
    End With

    For i = 0 To 34
    clauses(i) = "[Task" & i + 1 & " Start Date] > [Task" & i + 2 & " Start Date]"
    tempDate=tempDate & "[Task" & i + 1 & " Start Date],"
    Next

    Set cmd = CreateObject("ADODB.Command")
    cmd.CommandText = "SELECT " & tempDate &" FROM [GEWingToWingMay25$] WHERE [Business Process ID] NOT IN (" & "SELECT [Business Process ID] FROM [GEWingToWingMay25$] WHERE " & Join(clauses, " AND ") & ")"
    MsgBox(cmd.CommandText)
    cmd.ActiveConnection = conn 
    Set rs = cmd.Execute

    Set xlApp = CreateObject("Excel.Application")
    xlApp.Visible = True
    Set xlBook = xlApp.Workbooks.Add
    xlBook.Sheets(1).Range("A1").CopyFromRecordset cmd.Execute 
```

现在所有的`start date`每一行都没有值，因此`IN`运算符内部的 SQL Query 没有返回任何值，因此外部 SQL 查询提供了所有数据。所以知道如何`Null values`在 SQL 查询`where`子句评估中忽略这些。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:46:33.197

调试问题的步骤：

1.  检查`Watch Window`由 生成的数据类型`[Task" & i + 1 & " Start Date]`。它应该是您表中的列。但是，它似乎没有返回正确的日期。一切就绪后，您就可以进行下一步了。

2.  尝试发送一个普通的 SQL 查询字符串并测试它是否被执行。例如根据我的评论。

* * *

**编辑：**

您构建表格字段的方式看起来不太好......

`"SELECT * FROM [GEWingToWingMay25$] WHERE [Task12 Start Date] > [Task13StartDate];"`

不要忘记以分号结束查询字符串。

我希望我能把这一切都放在评论中。无论如何试一试，让我们知道。上面的行只是一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:21:31.010

我认为你应该采取不同的方法，我已经编写了这个函数，在 excel 中创建一个新模块并添加这个：

```
Public Function InSequence()

Dim dtOld   As Date
Dim dtNew   As Date
Dim i       As Long
Dim flg     As Boolean

    flg = True
    i = 2

    Do Until Cells(ActiveCell.Row, i) & "" = ""
        If InStr(Cells(1, i), "Start Date") > 0 Then
            dtOld = IIf(dtNew = 0, Cells(ActiveCell.Row, i), dtNew)
            dtNew = Cells(ActiveCell.Row, i)
            If dtNew < dtOld Then flg = False
        End If
        i = i + 1
    Loop

    InSequence = flg

End Function 
```

然后在您的数据表上，在 A 列之前插入一列并调用该函数：

```
=InSequence() 
```

如果该行上的日期是按顺序排列的，则返回 true，否则返回 false

# sql - SQL Server：在单个查询中组合最大结果和第二大结果

> ID：13990775
> 
> 赞同：3
> 
> 时间：2012-12-21T13:06:25.943
> 
> 标签：sql, sql-server

我认为这应该很容易，但我无法弄清楚。

以下是一些背景信息：

我有两张表，分别称为 Leases 和 UtilityBills。它们通过 UtilityBills 表中称为 LeaseID 的外键连接，该外键引用 Leases 表中的主键（也称为 LeaseID）。

所以这很简单——我正在为许多租约中的每一个记录每月的电表读数。

在 UtilityBills 表中，我有一个名为 MeterReadingDate 的字段，用于存储每次抄表的日期。

这是我的问题：

我如何创建一个查询，为每个租约提供最近一次抄表的日期和上次抄表的日期？

使用以下 sql 语句，我可以很容易地获得每个租约的最新仪表读数：

```
SELECT LeaseID, MAX(MeterReadingDate) AS MostRecentMeterReadingDate
FROM   dbo.UtilityBills
GROUP BY LeaseID 
```

我还可以使用此 sql 语句获取任何给定租约的先前抄表（例如，这为我提供了 LeaseID=228 的租约的先前抄表）：

```
SELECT TOP 1 MeterReadingDate, LeaseID
FROM   (SELECT TOP 2 MeterReadingDate, LeaseID
                FROM    dbo.UtilityBills
                WHERE (LeaseID = 228)
                ORDER BY MeterReadingDate DESC) DERIVEDTBL
ORDER BY MeterReadingDate 
```

我想不通的是，如何结合这两个语句来生成一个查询，列出所有租约的第二最近和最近的抄表日期。据我所知，在这种情况下我需要使用 CROSS APPLY，但无法让它工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:35:36.413

如果您希望两个日期在同一行，您可以使用 ROW_NUMBER() 函数。您不需要将表连接到自身，只需像这样使用 group by：

```
IF OBJECT_ID('dbo.UtilityBills') IS NOT NULL DROP TABLE dbo.UtilityBills;

CREATE TABLE dbo.UtilityBills(
Id INT IDENTITY(1,1) PRIMARY KEY CLUSTERED,
LeaseId INT,
MeterReadingDate DATE
);

INSERT INTO dbo.UtilityBills(LeaseId,MeterReadingDate)VALUES 
  (1,'2012-01-01'),
  (1,'2012-02-01'),
  (1,'2012-03-01'),
  (1,'2012-04-01'),
  (2,'2012-01-02'),
  (2,'2012-03-02'),
  (2,'2012-05-02'),
  (3,'2012-08-03'),
  (3,'2012-10-03'),
  (4,'2012-05-04');

SELECT LeaseId,
MAX(CASE WHEN rn = 1 THEN MeterReadingDate END) MostRecentReadingDate,
MAX(CASE WHEN rn = 2 THEN MeterReadingDate END) PreviousReadingDate
FROM(
SELECT  LeaseID,
        MeterReadingDate,
        ROW_NUMBER() OVER ( PARTITION BY LeaseId ORDER BY MeterReadingDate DESC ) rn
FROM    dbo.UtilityBills
)AS U
WHERE rn <=2
GROUP BY LeaseId; 
```

这里还有一些其他答案建议使用 RANK() 函数而不是 ROW_NUMBER()。但是，如果最后两个读数发生在同一天，RANK() 将产生意想不到的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:13:49.180

尝试这个

```
;WITh CTE AS
(
   SELECT LEASEID, MeterReadingDate, ROW_NUMBER() OVER 
                       (PARTITION BY LEASEID 
                        ORDER BY MeterReadingDate DESC) RN
   FROM   dbo.UtilityBills
)
SELECT x1.LEASEID, x1.MeterReadingDate CurrentDate, 
x2.MeterReadingDate PreviousDate
FROM CTE x1
LEFT OUTER JOIN CTE X2 ON x1.leaseid = x2.leaseid AND x1.rn + 1 = x2.rn
WHERE X1.rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:31:47.810

尝试这个：

```
SELECT       
   ls.Id  as 'leaseId',
   ub.MeterReadingDate as 'MeterDate'
FROM Leases ls
    left outer join UtilityBills ub  on   ls.Id = ub.LeaseID
    left outer join UtilityBills ub2 on   ub2.LeaseID=ls.Id 
                                     and  ub2.MeterReadingDate > ub.MeterReadingDate
    left outer join UtilityBills ub3 on   ub3.LeaseID=ls.Id 
                                     and  ub3.MeterReadingDate > ub.MeterReadingDate 
                                     and  ub3.MeterReadingDate < ub2.MeterReadingDate
    left outer join UtilityBills ub4 on   ub4.LeaseID=ls.Id 
                                     and  ub3.Id is null 
                                     and  ub4.MeterReadingDate > ub2.MeterReadingDate 
WHERE ub2.Id is null
   or (ub3.Id is null and ub4.Id is null) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:10:49.763

如果我理解正确，我认为您需要获取每个 LeaseID 的最新 2 个读数。为此；

```
SELECT LeaseID, MeterReadingDate
FROM (
    SELECT LeaseID, MeterReadingDate, 
           Rank() Over (Partition by LeaseID Order by MeterReadingDate desc) rk
    FROM   dbo.UtilityBills
) A
WHERE rk <3
ORDER BY MeterReadingDate desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T14:30:52.863

对于您的特定问题，您可以通过包含`group by`. 这是一个例子：

```
SELECT LeaseID, MIN(MeterReadingDate) as PriorReading, MAX(MeterReadingDate) as LatestReading
FROM   (SELECT TOP 2 MeterReadingDate, LeaseID
        FROM    dbo.UtilityBills
        WHERE (LeaseID = 228)
        ORDER BY MeterReadingDate DESC
       ) DERIVEDTBL
group by leaseid
ORDER BY MeterReadingDate 
```

这适用于先验。要返回更长的时间，您需要更复杂的解决方案。. . 但这不是你的问题。

# iphone - 使用类别扩展 UIImageView 会在 self.dispatchQueue 上引发错误

> ID：13990783
> 
> 赞同：4
> 
> 时间：2012-12-21T13:07:16.913
> 
> 标签：iphone, categories

我尝试`UIImageView`使用新的 'loadImageNamed:' 方法来扩展。在此方法中，我使用了一个`dispatchQueue`但`XCode`会引发错误，即在“UIImageView”类型的对象上找不到属性“dispatchQueue”。

有人可以给我一个提示吗？！谢谢！

```
#import "UIImageView+LazyPicLoad.h"

@implementation UIImageView (LazyPicLoad)

-(void)loadImageNamed:(NSString *)name {
dispatch_async(self.dispatchQueue, ^{
    NSData *imageData;
    if (name) {
        if ([UIScreen mainScreen].scale == 2.0)
            imageData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[name stringByAppendingString:@"@2x"] ofType:@"png"]];
        else
            imageData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:name ofType:@"png"]];
    }

    CGImageRef decompressedImage = NULL;
    if (imageData) {
        CGDataProviderRef imageDataProvider = CGDataProviderCreateWithCFData((__bridge CFDataRef)imageData);
        CGImageRef image = CGImageCreateWithPNGDataProvider(imageDataProvider, NULL, NO, kCGRenderingIntentDefault);
        CGContextRef bitmapContext = CGBitmapContextCreate(NULL, CGImageGetWidth(image), CGImageGetHeight(image), CGImageGetBitsPerComponent(image), CGImageGetWidth(image) * 4, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);
        CGContextDrawImage(bitmapContext, CGRectMake(0, 0, CGImageGetWidth(image), CGImageGetHeight(image)), image);
        decompressedImage = CGBitmapContextCreateImage(bitmapContext);

        CGDataProviderRelease(imageDataProvider);
        CGImageRelease(image);
        CGContextRelease(bitmapContext);
    }

    dispatch_sync(dispatch_get_main_queue(), ^{
        if (decompressedImage)
            self.image = [UIImage imageWithCGImage:decompressedImage];
    });

    if (decompressedImage)
        CGImageRelease(decompressedImage);
});
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:14:19.213

这正是问题所在，UIImageView 上没有 dispatchQueue 属性。如果你想将该块发送到后台，你应该使用它来代替：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // background code
}); 
```

# qt - 如何在 OpenGL 中将顶点缓冲区对象与顶点数组一起使用？

> ID：13990788
> 
> 赞同：3
> 
> 时间：2012-12-21T13:07:26.570
> 
> 标签：qt, opengl

我使用顶点数组非常快地绘制了很多三角形：

```
void initializeGL() { 
   ...
   glEnableClientState(GL_VERTEX_ARRAY);
   glEnableClientState(GL_COLOR_ARRAY);
   glVertexPointer(3, GL_FLOAT, 0, vertices);
   glColorPointer(3,  GL_FLOAT, 0,   colors);
}

void paintGL() {
   ...  
   glDrawElements(GL_TRIANGLES, 3*numTriangles, GL_UNSIGNED_INT, indices);
 } 
```

但是，我希望通过使用顶点缓冲区对象 (VBO) 来更快地进行渲染。

我的理解是否正确，glVertexPointer() 告诉 GPU 它可以在 CPU 中的哪个位置获取顶点数据，然后 GPU 从 CPU 中的这个位置为每个paintGL() 复制它？

并且使用 VBO 会通过将顶点数据仅写入 GPU 一次来改善这一点吗？

因为我使用的是 Qt，所以我尝试使用 QGLBuffer 类：

```
void GLWidget::initializeGL() {
   ... 
   vertexBuffer = new QGLBuffer(QGLBuffer::VertexBuffer);
   vertexBuffer->create();
   vertexBuffer->bind();
   vertexBuffer->setUsagePattern(QGLBuffer::StaticDraw);
   vertexBuffer->allocate(vertices, 3*numVertices*sizeof(float)); // copies vertices to GPU? 
   vertexBuffer->release();

   #define BUFFER_OFFSET(bytes) ((GLubyte*) NULL + (bytes)) 
   glEnableClientState(GL_VERTEX_ARRAY);
   glEnableClientState(GL_COLOR_ARRAY);
   glVertexPointer(3, GL_FLOAT, 0, BUFFER_OFFSET(0));
   glColorPointer(3, GL_FLOAT, 0,  colors);
} 
```

当我运行它时，它会在崩溃之前挂起很长时间:-(。如果我注释掉 vertexBuffer->release(); 行，它什么也不显示，但不会崩溃。

我在这里做错了什么？

另外：我怎样才能只将颜色发送到 GPU 一次？没有 QGLBuffer::ColorBuffer 类型！？

编辑：我在我的项目中包含了 GLee.[h/c] 并将 QGLBuffer 调用替换为：

```
unsigned int vbufferid;
glGenBuffers(1, &vbufferid);  
glBindBuffer(GL_ARRAY_BUFFER, vbufferid); 
int size = 3*numVertices*sizeof(float);
glBufferData(GL_ARRAY_BUFFER, size, vertices, GL_STATIC_DRAW); 
```

但代码仍然没有绘制任何东西！？

vbufferid 被 glGenBuffers 调用赋值为 1，所以我不认为问题出在我的显卡上。

编辑2：我发现如果我注释掉 glEnableClientState(GL_COLOR_ARRAY); 用VBO（但没有颜色）显示三角形！

那么在使用 VBO 作为顶点时如何将颜色传输到 GPU 上呢？

没有 GL_COLOR_BUFFER 类型！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:33:46.930

> 我的理解是否正确，glVertexPointer() 告诉 GPU 它可以在 CPU 中的哪个位置获取顶点数据，然后 GPU 从 CPU 中的这个位置为每个paintGL() 复制它？
> 
> 并且使用 VBO 会通过将顶点数据仅写入 GPU 一次来改善这一点吗？

这就是一般的想法，虽然实际的执行（你不必关心）有点棘手。

一个常见的误解是：OpenGL 没有“初始化”。当然，您可以在初始阶段将某些资源上传到 OpenGL，但作为状态机，OpenGL 需要在您需要它之前立即进入所需的状态。

然后是您真正的问题：您的顶点位置在缓冲区对象中。然而，你的颜色不是。但是你给 OpenGL 一个指针，它误解为到顶点缓冲区的偏移量。

因此，我建议您在`glDrawElements`通话前移动以下几行：

```
#define BUFFER_OFFSET(bytes) ((GLubyte*) NULL + (bytes)) 
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_COLOR_ARRAY);

glBindBuffer(GL_ARRAY_BUFFER, vbufferid);
glVertexPointer(3, GL_FLOAT, 0, BUFFER_OFFSET(0));

glBindBuffer(GL_ARRAY_BUFFER, 0); // or put the colors into a VBO as well
glColorPointer(3, GL_FLOAT, 0,  colors);

glDrawElements(… 
```

请注意，缓冲区在调用 glVertexPointer 之前是显式绑定的，而在颜色指针之前是未绑定的。

但是，在 VBO 中具有某些属性，而有些则没有达到目的。因此，我建议您将所有顶点属性移动到 VBO 中，最好是单个 VBO，一个接一个的数组（步幅 0 并且它们之间有偏移）或交错的（步幅 = 整个属性向量的大小，偏移量是到第一个属性向量）。

### 更新代码示例：

上传到 VBO

```
unsigned int vbufferid;
glGenBuffers(1, &vbufferid);  
glBindBuffer(GL_ARRAY_BUFFER, vbufferid); 

int vertexbufsize = (3)*numVertices*sizeof(float);
int colorbufsize = (3)*numVertices*sizeof(float);
glBufferData(GL_ARRAY_BUFFER, vertexbufsize + colorbufsize, NULL, GL_STATIC_DRAW); // data=NULL : initialize, but don't copy

glBufferSubData(GL_ARRAY_BUFFER, 0, vertexbufsize, vertices);
glBufferSubData(GL_ARRAY_BUFFER, vertexbufsize, colorbufsize, vertices); 
```

使用组合 VBO 绘图

```
#define BUFFER_OFFSET(bytes) ((GLubyte*) NULL + (bytes)) 
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_COLOR_ARRAY);

glBindBuffer(GL_ARRAY_BUFFER, vbufferid);
glVertexPointer(3, GL_FLOAT, 0, BUFFER_OFFSET(0));
glColorPointer(3, GL_FLOAT, 0,  BUFFER_OFFSET(vertexbufsize));

glDrawElements(… 
```

# php - 如何保存变量不明确的PHP字符串？

> ID：13990792
> 
> 赞同：2
> 
> 时间：2012-12-21T13:07:48.297
> 
> 标签：php, string, variables, date, internationalization

我有一个这样的数组：

```
$list = array (
  "Today is ".$aaaa."/".$mm."/".$gg,
  "Oggi è il ".$gg."/".$mm."/".$aaaa,
  "Aujourd'hui, c'est ".$gg."/".$mm."/".$aaaa
); 
```

我想将它们保存在数据库中（变量不明确），然后以 php 格式重新使用它们。是否可以将 php 格式的字符串另存为字符串？

例子：

```
$gg = 1;
$myString = "Today is ".$gg;
echo $myString;

$gg = 17;
echo $myString; 
```

当然，这个例子总是显示“今天是 1”。我希望它显示“今天是 1”、“今天是 17”。我可以用不明确的变量保存 myString 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:10:01.363

使用[sprintf()](http://php.net/manual/function.sprintf.php)并保存格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T13:17:01.843

使用[printf](http://php.net/manual/en/function.printf.php)

```
$myString = "Today is %s";

$today = '21/12/2012';
printf($myString,$today); // Today is 21/12/2012

$today = 21;
printf($myString,$today); // Today is 21 
```

`printf`将直接输出字符串。 `sprintf`会退还的

编辑：在您的具体情况下，您应该指定订单

```
$list = array (
  'Today is %1$s/%2$s/%3$s',
  'Oggi è il %3$s/%2$s/%1$s',
  'Aujourd\'hui, c\'est %3$s/%2$s/%1$s'
);

foreach($list as $string) {
    printf($string,"2012","12","21");
    echo  " <br />";
} 
```

但是对于本地化，我会使用[setlocale](http://php.net/manual/en/function.setlocale.php)函数来处理简单的字符串，而[strftime](http://php.net/manual/en/function.strftime.php)（带有 setlocale）来处理本地化日期

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T13:26:34.790

> 我可以用不明确的变量保存 myString 吗？

有点，是的。您可以实现：

```
class MyStringVariable
{
    private $mask;
    private $variables;

    public function __construct($mask, array $variables) {
        $this->mask = $mask;
        $this->variables = $variables;
    }

    public function __toString() {
        return vsprintf($this->mask, $this->variables);
    }
} 
```

用法（[演示](http://eval.in/5101)）：

```
$gg = 1;
$myString = new MyStringVariable("Today is %s\n", [&$gg]);
echo $myString;

$gg = 17;
echo $myString; 
```

输出：

```
Today is 1
Today is 17 
```

`vsprintf`这基本上是通过将（请参阅）包装[`sprintf`](http://php.net/sprintf)到它自己的对象中来工作的，该对象还存储您要使用的变量引用。[魔术`__toString`方法](http://php.net/language.oop5.magic)负责在需要时解析输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:20:46.197

```
$sql = 'My var is %s';

$a = 100;
$foo = sprintf($sql, $a); 
```

**编辑1；**

```
$list = array(
    "Today is %s/%s/%s",
    "Oggi è il %s/%s/%s",
    "Aujourd'hui, c'est %s/%s/%s"
);

foreach ($list as $str)
{
    $a   = 2012;
    $m   = 12;
    $g   = 17;

    if (strstr($str, 'Today '))
        $foo = sprintf($str, $a, $m, $g);
    else
        $foo = sprintf($str, $g, $m, $a);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T13:39:59.807

我不知道这是否是最好的方法，但它有效，您将行保存为字符串，然后使用 eval() 转换为变量

```
$list = array (
    'Today is ".$aaaa."/".$mm."/".$gg'
);
$aaaa = 2012;
$mm = 11;
$gg = 00;
eval("\$mylist = \"$list[0];");
echo $mylist; 
```

快乐编码！

# vim - VIM：打开当前行周围的所有折叠

> ID：13990794
> 
> 赞同：4
> 
> 时间：2012-12-21T13:07:59.543
> 
> 标签：vim

我正在尝试编写一个 vim 函数，它将折叠除当前行/块/方法之外的所有内容。

这是我已经写的：

```
set foldemethod=indent
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" FOCUS ON BLOCK OF CODE (fold everything else)
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! FocusOnBock()
  :normal! zM                 " close all folds
  :normal! zozozozozozozozozo " I hope enough to open all nested folds :)
  :normal! zz                 " center the current line
endfunction
:command! FocusOnBock :call FocusOnBock()
:map <leader>F :FocusOnBock<CR> 
```

在这里，我关闭所有折叠，然后打开许多折叠（通常存在于好的代码中），然后将当前行居中。顺便说一句，你可以看到它在行动 - [http://ascii.io/a/1771](http://ascii.io/a/1771)
我不喜欢`:norm! zozozozozozozozozo`线。是否有命令在不移动光标的情况下打开当前行周围的所有折叠？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T13:25:49.013

是的，有`zv`：

> zv 查看光标线：打开刚好足够的折叠，使光标所在的行不折叠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-17T14:04:39.210

如果要打开整个缓冲区中的所有折叠，可以使用`zR`

[http://vim.wikia.com/wiki/Folding](http://vim.wikia.com/wiki/Folding) - 打开和关闭折叠

> 命令 zr 通过在整个缓冲区中再打开一层折叠来减少折叠（光标位置不相关）。使用 zR 打开所有折叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-10T05:27:00.753

如果您想在当前行内递归地打开所有折叠，zO 有效

来自[https://vim.fandom.com/wiki/Folding](https://vim.fandom.com/wiki/Folding) 命令 zc（关闭）、zo（打开）和 za（切换）在光标处的一级折叠上操作。命令 zC、zO 和 zA 相似，但在所有折叠级别上操作（例如，光标线可能在一个打开的折叠中，它在另一个打开的折叠内；键入 zC 将关闭光标处的所有折叠）。

# sql - 返回表 1 中的所有列，以及表 2 中的一列

> ID：13990797
> 
> 赞同：0
> 
> 时间：2012-12-21T13:08:21.187
> 
> 标签：sql

我正在尝试执行一个 SQL 查询，如果它在表 2 中具有相应的值，它将返回表 1 中的所有值。我还想在表 2 中返回相应的值，但如果它们是多个值，则仅将其限制为一个.

以下是数据示例：

```
TABLE 1: album
-------------
ALBUM_ID
1      
4         
5
13

TABLE 2: photo
-------------
PHOTO_ID       ALBUM_ID          IMAGE
1              4                 img1
4              4                 img2
6              1                 img17
15             4                 img15
24             3                 img3 
```

因此，使用上述数据，我希望返回以下内容：

ALBUM_ID: 1 IMAGE17 // 因为相册 1 有关联的图像 ALBUM_ID: 4 IMAGE1 // 因为相册 4 有关联的图像，但我只想要一张图像

我目前的查询是：

```
SELECT * 
FROM album
INNER JOIN photo ON album.album_id=photo.album_id 
GROUP BY album.album_id 
```

但是，这是返回照片中的所有列，我只希望它返回图像，而不是 photo_id 或 album_id

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:10:26.887

试试这个：

```
SELECT al.*, ph.column_name
FROM album AS al
INNER JOIN photo AS ph ON album.album_id=photo.album_id 
GROUP BY album.album_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:24:51.900

抱歉，我不知道您使用的是什么 sql server ...

pls/sql 和 t-sql 对此重复结果具有特殊功能

mysql有没有我想...

但尝试使用带限制的子查询

对于 mysql 尝试下一个查询// 未测试 .. 从我破碎的头脑中写出来

```
SELECT 
   alb.*, -- or all columns with prefix alb
   pho.IMAGE
FROM album alb
INNER JOIN (
              SELECT ALBUM_ID, IMAGE FROM photo LIMIT = 1
) pho ON pho.ALBUM_ID = alb.ALBUM_ID 
```

在职的 ？

# java - Java 中的事件监听器

> ID：13990798
> 
> 赞同：9
> 
> 时间：2012-12-21T13:08:25.753
> 
> 标签：java, listener

我一直在使用 AS3 中的事件侦听器，但在 java 中似乎没有（图形组件除外）。令人惊讶。

问题是，我如何在 java 中实现自己的事件监听器？也许以前有人做过这样的工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T13:11:58.110

您可以定义一个监听器接口：

```
public interface EventListener {
    void fireEvent (Event e);
} 
```

然后在您的代码中：

```
EventListener lst = new EventListener() {
    @Override
    public void fireEvent (Event e) {
        //do what you want with e
    }
}

someObject.setListener(lst);
someObject.somethingHappened(); 
```

然后在 someObject 中（实际上你可能会持有一个听众列表）：

```
public class SomeObject {
    private EventListener lst;

    public void setListener (EventListener lst) {
        this.lst = lst;
    }

    public void somethingHappened () {
        lst.fireEvent(new Event("Something Happened"));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T13:17:25.957

您可以将[PropertyChangeSupport](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeSupport.html)与[PropertyChangeListener](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeListener.html)一起使用或使用观察者模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T13:13:07.747

首先，您需要一些事件源，因此您可以将侦听器附加到它。如果您需要自定义侦听器，那么您还需要实现自定义源。

在 Java 中，您可以找到现有的源代码和`listener`接口。正如您提到的，GUI 通常基于事件。如果您喜欢 3D，那么渲染引擎会提供适当的 API（例如`collision detection`）、文件系统挂钩、属性更改侦听器（`Android`）。

这取决于您的需求。对于大多数用途，应该已经有一个库可以为您提供适当的 API。

在实现您自己的解决方案时，对于应用程序范围的事件处理，事件总线可能是一个不错的选择。我首选的实现是在 Guava 库中：[http ://code.google.com/p/guava-libraries/wiki/EventBusExplained](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T13:13:47.083

您可以在 Java中为您想要观察的对象扩展[Observable](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observable.html)类实现一种侦听器，并在侦听器上实现[Observer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observer.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T13:15:37.870

您不需要框架或 Observer 类。自 1995 年版本 1.0 以来，它全部内置于 Java Beans 规范中。它应该是 Java 对 VB 属性的回答。

这是一个教程：

[http://docs.oracle.com/javase/tutorial/uiswing/events/propertychangelistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/propertychangelistener.html)

# vb.net - 触发事件对 SelectedIndexChanged 不起作用

> ID：13990800
> 
> 赞同：2
> 
> 时间：2012-12-21T13:08:31.560
> 
> 标签：vb.net, events, radcombobox, addhandler

我的网页是在 VB.Net (aspx) 中动态构建的。

我有一个复选框，选中后将打开一个新窗口。在打开窗口时，会传递一些参数以使用窗口中的正确数据，但是在选中复选框时，有一个参数 (FM) 具有未知值。

此参数取决于另一个名为 ddlFM (radcombobox) 的动态构建控件中的值。为了传递最后一个参数，我将使用会话参数。当其中一个 radcomboboxes 更改其值时，应在轮到他时填充此参数。

在构建函数中，我创建了以下内容：（已编辑）

```
Dim ddlFM As New RadComboBox
Dim sdsFM As New SqlDataSource()

ddlFM.DataTextField = "Value"
ddlFM.DataValueField = "Value"

cell.Controls.Add(ddlFM)
AddHandler ddlFM.SelectedIndexChanged, AddressOf Me.ddlFM_SelectionChanged
cell.Controls.Add(sdsFM)

sdsFM.SelectCommand = 'select values from table'
sdsFM.SelectCommand = 'Connectionstring'
sdsFM.DataBind() 
```

Me.ddlFM_SelectionChanged 将如下所示：

```
Public Sub ddlFM_SelectionChanged(ByVal sender As Object, ByVal e As EventArgs)
    getAllCycleNumbers()
End Sub 
```

此处 getAllCycleNumbers 确保填写正确的会话 ID。

我的问题是该事件似乎没有被解雇......

编辑：

在 Murray 的帖子（然后消失）之后，我添加了以下行

```
Friend WithEvents ddlFM As RadComboBox 
```

然而这并没有做任何事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:15:29.933

如果你这样做有帮助吗？

```
AddHandler ddlFM.SelectedIndexChanged, New EventHandler(AddressOf ddlFM_SelectionChanged) 
```

你是否也需要

```
ddlFM.AutoPostBack = True 
```

# java - DialogFragment.show 挂起应用程序

> ID：13990802
> 
> 赞同：4
> 
> 时间：2012-12-21T13:08:36.140
> 
> 标签：java, android, android-fragments

我有一个带有按钮的片段。单击按钮后，将执行以下代码：

```
@Override
    public void onClick(View clickedView) {
        switch(clickedView.getId()) {
            case R.id.btnTest:
                FragmentManager fm = getSherlockActivity().getSupportFragmentManager();
                MyDialog dialog = new MyDialog();
                dialog.show(fm, "TaskDeadlineDialog");
                break;
        }
    } 
```

我的对话框片段如下：

```
public class MyDialog extends DialogFragment 
{
    public MyDialog() {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedBundleInstance) {
        View currentView = inflater.inflate(R.layout.my_dialog_layout, parent);
        System.out.println("Inflated!");
        return currentView;
    }

} 
```

发生的情况是，对话框不显示并且应用程序停止响应。我正在使用 CM9 ICS 在三星 SII 上进行测试。

编辑：Logcat 也没有显示任何内容。

```
12-21 16:05:16.970: I/System.out(15753): debugger has settled (1304)
12-21 16:05:18.250: D/dalvikvm(15753): VFY: replacing opcode 0x6f at 0x0006
12-21 16:05:18.445: I/System.out(15753): Got ID: 1
12-21 16:05:20.430: I/System.out(15753): List position: 0
12-21 16:05:23.225: I/System.out(15753): Inflated!
12-21 16:05:38.510: D/dalvikvm(15753): GC_CONCURRENT freed 2265K, 41% free 4867K/8131K, paused 3ms+6ms
12-21 16:05:51.895: D/dalvikvm(15753): GC_CONCURRENT freed 1797K, 42% free 4787K/8131K, paused 2ms+2ms

..etc 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:38:34.563

我能想到的只是你可能出于某种原因阻塞了 ui 线程。如果您使用同步操作或线程，我想这是一个很常见的错误。

再看一下您的代码，然后逐步按照该过程进行操作。您等待应用程序再次开始响应的时间越长，Logcat 也应该输出超时调度。

编辑; 这个答案可能会对您有所帮助：[https ://stackoverflow.com/a/5047865/559157](https://stackoverflow.com/a/5047865/559157)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:08:05.303

似乎我在对话框中充气的以下小部件导致了问题： [https ://github.com/SimonVT/android-calendarview](https://github.com/SimonVT/android-calendarview)

我会确保我在项目的问题页面上将此报告给开发人员。

# guice - 我可以用 GUICE 做到这一点吗

> ID：13990804
> 
> 赞同：2
> 
> 时间：2012-12-21T13:08:46.760
> 
> 标签：guice, guice-servlet

假设我定义了以下类：

```
public interface A {}

public class A1 implements A {}

public class A2 implements A {}

public class XServlet<T extends A> extends HttpServlet {
    public XServlet(T delegate){}
} 
```

此外，在我的一个 Guice 模块中，我有一些愚蠢的绑定：

```
bind(A.class).annotatedWith(Names.named("a1")).to(A1.class);
bind(A.class).annotatedWith(Names.named("a2")).to(A2.class); 
```

现在我需要创建一个 ServletModule，它定义了两个具有不同参数的“XServlet”实例。对于“/x”模式，我希望它使用绑定到 A.class 并使用“a1”注释的任何内容，对于“/y”模式，我希望它使用绑定到 A.class 并使用“a2”注释的任何内容。就像是：

```
serve("/x").with(???);
serve("/y").with(???); 
```

应该有什么而不​​是'???'？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:29:12.897

这里有两个问题：一个是用`serve`方法改变XServlet的绑定注解，另一个是根据XServlet的注解改变A的绑定。

serve 方法的一半很容易解决：手动创建一个`Key`. 这将“/x”绑定到`@Named("a1") XServlet`.

```
serve("/x").with(Key.get(XServlet.class, Names.named("a1"))); 
```

后半部分被称为“机器人腿问题”，可以使用私有模块修复：

```
install(new PrivateModule() {
  @Override void configure() {
    // These are only bound within this module, and are not visible outside.
    bind(A.class).to(A1.class);
    bind(XServlet.class).annotatedWith(Names.named("a1"));
    // But you can expose bindings as you'd like.
    expose(XServlet.class).annotatedWith(Names.named("a1"));
  }
}); 
```

**更新：**如果您之前提到的命名绑定无法移动到私有模块，您始终可以将私有模块中的非注释绑定绑定到另一个模块中的注释绑定。私有模块中的绑定应如下所示：

```
// Fulfill requests for an unannotated A by looking up @Named("a1") A,
// though @Named("a1") A is bound elsewhere.
bind(A.class).to(Key.get(A.class, Names.named("a1"))); 
```

如果您尝试绑定其中的十几个，您可能会发现创建一个私有静态函数更容易，如下所示：

```
private static Module moduleForServlet(
    final Class<? extends A> aClass, final String namedAnnotationString) {
  return new PrivateModule() { /* see above */ };
} 
```

文件：

*   [小服务程序模块](http://google-guice.googlecode.com/git/javadoc/com/google/inject/servlet/ServletModule.html)
*   [ServletModule.serve](http://google-guice.googlecode.com/git/javadoc/com/google/inject/servlet/ServletModule.html#serve%28java.lang.String,java.lang.String...%29)
*   [ServletModule.ServletKeyBindingBuilder](http://google-guice.googlecode.com/git/javadoc/com/google/inject/servlet/ServletModule.ServletKeyBindingBuilder.html)
*   [钥匙](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Key.html)
*   [密钥获取](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Key.html#get%28java.lang.Class%3CT%3E,%20java.lang.annotation.Annotation%29)
*   [私有模块](http://google-guice.googlecode.com/git/javadoc/com/google/inject/PrivateModule.html)

# android - jar中的apklib有什么优势？

> ID：13990806
> 
> 赞同：7
> 
> 时间：2012-12-21T13:08:59.637
> 
> 标签：android, jar, dependencies, dependency-management, apklib

我一直在关注[这个问题](https://stackoverflow.com/questions/6059502/whats-the-difference-between-apklib-and-jar-files)，但它并没有完全回答我的问题。

jar中的apklib的真正优势是什么？

可能的答案：

1.  它包含资源

但我也可以轻松地将资源放入 jar 文件中

2.  它包含已经准备好的android类

但是如果我打开`apklib`我看不到`dex`或其他与 android 相关的东西。甚至更多的是我在里面看到了简单的来源。

那么以`apklib`格式保存/分发库的真正目的是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T15:32:10.783

> 但我也可以轻松地将资源放入 jar 文件中

不，您不能，至少在 Android 资源系统方面不能。能够创建包含 Android 资源的 JAR（或类似包）是 Google 目前正在开发的新构建系统的目标之一。

# javascript - jquery将多个下拉列表转换为滑块

> ID：13990807
> 
> 赞同：0
> 
> 时间：2012-12-21T13:09:00.110
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-slider

我正在尝试用滑块替换一系列下拉菜单。一切似乎都运行良好，但是滑块的行为非常奇怪，不确定是不是因为我使用了泛型类而不是全部给它们`ID`？

基本上，当我滚动一个滑块而不是预期的：0,1,2,3 时，它更倾向于首先是 1，然后是 0，然后是 3，然后是 2...

这是一个简单的设置不正确的情况，还是不能以这种方式使用它们？

非常感谢，安东尼。

[http://jsfiddle.net/Anth12/BnL93/1/](http://jsfiddle.net/Anth12/BnL93/1/)

```
$(document).ready(function () {
    $('.DropDownToSlider').each(function () {
        var NewSlider = $(this).next(".DropDownSlider");

        var value = parseInt(NewSlider.text());
        $(this).val(value);
        NewSlider.text("");

        NewSlider.slider({
            value: value,
            min: 0,
            max: 3,
            slide: function (event, ui) {
                $(this).prev(".DropDownToSlider").val($(this).slider("value"));
                $(".SliderVal").text($(this).slider("value"));
            }
        });
    });
}); 
```

```
<select id="dd1" class="DropDownToSlider" style="">
    <option value="3">Admin</option>
    <option value="2">Basic</option>
    <option value="1">NoAuth</option>
    <option value="0">Delete</option>
</select>
<div id="ddslider1" class="DropDownSlider">1</div>
    <select id="dd2" class="DropDownToSlider" style="">
        <option value="3">Admin</option>
        <option value="2">Basic</option>
        <option value="1">NoAuth</option>
        <option value="0">Delete</option>
    </select>
<div id="ddslider2" class="DropDownSlider">2</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:35:46.413

那是你想要达到的吗？ [http://jsfiddle.net/7f53c/17/](http://jsfiddle.net/7f53c/17/)

```
 $('.DropDownToSlider').each(function () {
        var NewSlider = $(this).next(".DropDownSlider");

        var value = parseInt(NewSlider.text());
        $(this).val(value);
        NewSlider .text("");

        NewSlider.slider({
            value: value,
            min: 0,
            max: 3,
            slide: function (event, ui) {                
                //$(this).prev(".DropDownToSlider").val($(this).slider("value"));
                //$(".SliderVal").text($(this).slider("value"));
                $(".SliderVal").text(ui.value);
            }
        });
    }); 
```

# php - PHP SOAP-ERROR 编码：对象没有 X 属性

> ID：13990812
> 
> 赞同：2
> 
> 时间：2012-12-21T13:09:09.280
> 
> 标签：php, soap-client

使用有效的 wsdl 创建 SoapClient 的实例，然后使用一些损坏的模式调用服务会导致无法捕获的致命错误。我本来预计会引发 SoapFault。有什么方法可以防止这个致命错误（除了总是传递有效的请求）？

```
Fatal error: SOAP-ERROR: Encoding: object has no 'X' property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:18:02.367

请先用soapUI测试它，让我知道错误。

问题在于代码，更具体地说，在于传递给 WSDL 的参数的顺序和语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:10:41.837

至少可以说这很有趣......

在服务调用之前添加`xdebug_disable();`会导致错误被引发为可捕获的 SoapFault！

# cordova - Phonegap Filetransfer.download Ripple/Chrome

> ID：13990816
> 
> 赞同：7
> 
> 时间：2012-12-21T13:09:22.937
> 
> 标签：cordova

我正在使用 jquerymobile/phonegap/cordova(2.0) 开发移动应用程序。我尝试从流（xml）中下载一些文件并将它们存储在本地。此行为仅出现在我用于调试（带有波纹）的 chrome 浏览器中。

如何启动 chrome ？开始了 ：

> /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --disable-web-security --allow-file-access-from-files --allow-file-access

我在 Mac 上开发我的 plist 文件也有一个访问权限 * 我添加`<feature name="http://api.phonegap.com/1.0/file"/>`到我的 config.xml

我尝试使用以下代码下载一些图片：

```
function downloadImage(url,filename,use){
if(use==="thumb") {
    filename = filename + ".png";
    download(url, filename);
}return filename; }

function download(url, filename) {

//writeLog(window.appRootDir.fullPath);
ft = new FileTransfer();
ft.download(
    url,
    window.appRootDir.fullPath + "/" + filename,
    {},
    {});
} 
```

在模拟器上工作正常，但在 chrome 中它失败并出现以下错误：

```
TypeError
ripple.js:477
TypeError: Cannot call method 'download' of undefined
at n.exports.exec (chrome-extension://geelfhphabnejjhdalkjhgipohgpdnoc/ripple.js:477:26724)
at FileTransfer.download (http://localhost/~binderf/www/a4/cordova-2.2.0.js:2753:5)
at download (http://localhost/~binderf/www/a4/js/index.js:194:5)
at downloadImage (http://localhost/~binderf/www/a4/js/index.js:182:9)
at Element.<anonymous> (http://localhost/~binderf/www/a4/js/index.js:153:51)
at Function.p.extend.each (http://localhost/~binderf/www/a4/js/jquery-1.8.2.min.js:2:14477)
at p.fn.p.each (http://localhost/~binderf/www/a4/js/jquery-1.8.2.min.js:2:11151)
at Element.<anonymous> (http://localhost/~binderf/www/a4/js/index.js:145:57)
at Function.p.extend.each (http://localhost/~binderf/www/a4/js/jquery-1.8.2.min.js:2:14477)
at p.fn.p.each (http://localhost/~binderf/www/a4/js/jquery-1.8.2.min.js:2:11151) ripple.js:477
FileTransfer 

FileTransfer ripple.js:483
download ripple.js:483
missing exec:FileTransfer.download 
```

弹出一个对话框，其中包含以下消息：

> 文件传输.download

我们似乎遗漏了一些东西:(

虽然您可以填写 textarea 以将 json 对象传递给您要执行的回调，但这有点酷。

我看到它未定义，但我无法弄清楚我真正的问题是什么。如果有人有猜测或类似问题，请提出任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T14:25:23.147

这是因为 Chrome 的 Ripple 插件没有实现这个功能。它将在真实环境中工作（例如电话）。

# php - 使用 mysqlslap 与实际 sql 查询的数据库性能

> ID：13990818
> 
> 赞同：2
> 
> 时间：2012-12-21T13:09:35.423
> 
> 标签：php, mysql, performance, benchmarking

我们正在对许多服务器进行基准测试，以迁移我们当前的站点。

我们已经针对当前设置测试了 2 个配置，使用 mysqlslap 测试并在具有相同数据的表上运行 sql 查询并使用 php microtime 进行测量。mysqlslap 测试如下：

*   电流：4.977 秒
*   配置 1：2.988 秒
*   配置 2：1.786 秒

但是，我是否对微时间结果的结果感到困惑，因为当前服务器在除一项测试之外的所有测试中都是最快的。当前服务器在运行较小的查询时似乎更快，而在运行大型查询时则较慢。这是基准案例之一的示例（以防我做一些愚蠢的事情！）：

```
$t1 = microtime(TRUE);
for($i=1; $i<10; $i++)
{
    $sql = 'SELECT a.ref, a.code, a.expiry
                FROM payment a
                WHERE a.Amount >0
                    AND a.type = "card"
                    AND a.user_id = '.$i.'
                    AND a.result = "success"
                    AND a.amount > 0
                    AND a.code = (SELECT b.code
                                        FROM payment b
                                        WHERE b.user_id = a.user_id
                                        AND b.type="Card"
                                        AND b.amount > 0
                                        ORDER BY date DESC LIMIT 1
                                        )
                ORDER BY a.date DESC LIMIT 1';
    mysql_query($sql);
}
$t2 = microtime(TRUE);
$t = $t2-$t1;
echo $t.'s'; 
```

所以我有两个问题：

1.  这些是预期的结果吗？当前服务器在微时间测试中名列前茅（较小的查询更快，较大的查询更慢）但在 mysqlslap 测试中垫底。
2.  除了我们无法在当前服务器上安装的 (sysbench) - 您能否建议任何其他方法来对服务器进行基准测试？

**更新**：我已经通过 mysqlslap 运行了与微时间测试中使用的自定义查询相同的 sql 查询，现在新配置的速度要快得多。在运行微时间测试时，我们使用实时数据库来检查常见请求——结果可能已经在内存中了吗？

# sql-server - SQL Server GROUP BY WITH ROLLUP 的 PostgreSQL 等效项

> ID：13990821
> 
> 赞同：9
> 
> 时间：2012-12-21T13:09:45.810
> 
> 标签：sql-server, postgresql, group-by, migration, aggregate-functions

我有一个 Sql Server 查询，它`ROLLUP`在分组时使用该子句。我想要 Postgres 中的等效查询。SQL Server 中的查询是：

```
SELECT (CASE WHEN acnt_dba_name Is Null THEN 'Total' ELSE acnt_dba_name END) as account,
       (CASE WHEN evt_name Is Null THEN '' ELSE evt_name END) as event, 
       COUNT(CASE reg_is_complete WHEN true THEN 1 ELSE Null END) as regsComplete,
       COUNT(CASE WHEN reg_frn_pro_id > 0 AND reg_is_complete = false THEN 1 ELSE Null END) as regsInComplete,
       COUNT(CASE WHEN reg_frn_pro_id > 0 THEN Null ELSE 1 END) as regsClicks
FROM      registrations_view 
LEFT JOIN events ON (evt_id = reg_frn_evt_id)
LEFT JOIN accounts ON (acnt_id = evt_frn_acnt_id)
WHERE reg_date_created < #CreateODBCDate(url.endDate)#
AND   reg_date_created > #CreateODBCDate(url.startDate)#
AND   reg_is_active = true      -- only active regs
AND   reg_is_test = false       -- only live registrations
-- AND  reg_is_denied = false         -- exclude denied reg statuses (include these for now RWB 8/7/2)
GROUP BY rollup(acnt_dba_name, evt_name)
-- Sort with Nulls at the bottom
ORDER BY acnt_dba_name, evt_name 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T13:52:23.620

```
with detail as (
    select
        acnt_dba_name as account,
        evt_name as event, 
        count(case reg_is_complete when true then 1 else null end) as regscomplete,
        count(case when reg_frn_pro_id > 0 and reg_is_complete = false then 1 else null end) as regsincomplete,
        count(case when reg_frn_pro_id > 0 then null else 1 end) as regsclicks
    from
        registrations_view 
        left join
        events on evt_id = reg_frn_evt_id
        left join
        accounts on acnt_id = evt_frn_acnt_id
    where
        reg_date_created < #CreateODBCDate(url.endDate)#
        AND reg_date_created > #CreateODBCDate(url.startDate)#
        and reg_is_active = true        -- only active regs
        and reg_is_test = false     -- only live registrations
    group by acnt_dba_name, evt_name
), account as (
    select
        account,
        '' as event, 
        sum(regscomplete) as regscomplete,
        sum(regsimcomplete) as regsincomplete,
        sum(regsclicks) as regsclicks
    from detail
    group by account
), total as (
    select
        'Total' as account,
        '' as event, 
        sum(regsComplete) as regsComplete,
        sum(regsImComplete) as regsInComplete,
        sum(regsClicks) as regsClicks
    from account
)
select * from detail
union
select * from account
union
select * from total
order by account, event 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T14:52:37.840

这是对等价于 Postgresql 中的汇总的通用答案。

给定一个表 t：

```
create table t (l1 char(1), l2 char(1), i integer);
insert into t (l1, l2, i) values
('A', 'X', 1),
('A', 'Y', 2),
('B', 'X', 3),
('B', 'Y', 4); 
```

而这个 SQL Server 查询：[SQL Fiddle](http://www.sqlfiddle.com/#!3/e48975/1)

```
select l1, l2, sum(i) total
from t
group by rollup(l1, l2) 
```

这是在 Postgresql 中的操作方法：[SQL Fiddle](http://www.sqlfiddle.com/#!12/e4897/1)

从细节到顶层创建聚合 CTE：

```
with detail as (
    select l1, l2, sum(i) total
    from t
    group by l1, l2
), l2 as (
    select l1, sum(total) total
    from detail
    group by l1
), l1 as (
    select sum(total) total
    from l2
) 
```

请注意，对于性能而言，下一个上一级是从上一个下一级聚合而成的。

完成后，只需联合 CTE 创建适当的标签：

```
select l1, l2, total
from detail
union
select l1, 'Total', total
from l2
union
select 'Total', '', total
from l1
order by l1, l2 
```

# .net - Try/Catch 不处理来自 Selenium2 FindElement 的异常

> ID：13990825
> 
> 赞同：2
> 
> 时间：2012-12-21T13:10:03.027
> 
> 标签：.net, try-catch, selenium-webdriver

我正在尝试在一些辅助方法中包装一些 Selenium2 API 调用，但是即使我正在捕获它们，也没有处理预期的异常。这是代码：

```
public static bool IsElementPresent(this IWebDriver driver, By by)
{
    var wait = new WebDriverWait(driver, new TimeSpan(0, 0, 5));
    wait.IgnoreExceptionTypes(new Type[] { typeof(WebDriverException) });
    try
    {
        wait.Until(drvr => drvr.FindElement(by));
        return true;
    }
    catch (NoSuchElementException)
    {
        return false;
    }
    catch (System.TimeoutException)
    {
        return false;
    }
} 
```

在某些情况下，我正在测试一个我希望*不*存在的元素，所以我捕获了 NoSuchElementException 并返回 false；调用代码看起来像：

```
bool areYouThere = IsElementPresent(driver, By.CssSelector("li[name=elementThatsNotInTheDom"); 
```

调用在调试器中`wait.Until(drvr => drvr.FindElement(by));`停止，并显示“用户代码消息未处理 NoSuchElementException”，但我显然正在处理该异常。

这不是一个关键问题，因为我不会在我的最终解决方案中使用这种模式 - 我主要只是在玩不同的想法，并且有更好的方法来做到这一点，但我很好奇为什么当我清楚地处理它时，这个异常是未处理的。

**编辑**

有趣的是，即使我添加了一个泛型

```
catch (Exception) {
    return false;
} 
```

对于它仍然没有被抓住的方法。

**编辑 2**

实际上我在上面说错了 - 通用异常最终被捕获，但是当它到达那里时，它是一个 WebDriverTimeoutException。

这是啊哈！片刻：

WebDriverWait.Until() 只抛出 WebDriverTimeoutException；[.Net 文档](http://selenium.googlecode.com/svn/trunk/docs/api/dotnet/html/M_OpenQA_Selenium_Support_UI_DefaultWait_1_Until__1.htm)不完整，但[Ruby 文档](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Wait.html#until-instance_method)的指导性稍强一些。所以我认为正在发生的是 lambda 抛出了我期望的异常类，并且在适当的等待期之后，WebDrierWait.Until() 抛出了 WebDriverTimeoutException。我可以通过将我的 try/catch 块移动到 lambda 中来确认这一点，因此：

```
wait.Until(drvr => {
    try {
        drvr.FindElement(by);
        return true;
    } catch (OpenQA.Selenium.NotFoundException) {
        return false;
    } catch (System.TimeoutException) {
        return false;
    } catch (Exception) {
        return false;
    }
}); 
```

在这种情况下，将捕获适当的异常。谜团已揭开！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:55:44.917

这可能是一个长镜头，但我唯一的想法是两个`NoSuchElementException`类之间可能存在名称冲突，并且您正在处理从您的命名空间访问的一个，而代码正在抛出另一个。

# android - Android：如何搜索 sd 卡上的文件？

> ID：13990826
> 
> 赞同：1
> 
> 时间：2012-12-21T13:10:05.170
> 
> 标签：android, list, search, sd-card

给定输入的字符串，如何在我的 sd 卡上搜索文件？

我想搜索“test”并希望得到一个列表，其中包含名称中包含字符串“test”的所有文件：

```
testfile.txt

filetest.jpg

thisisatestfile.xml 
```

等等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T13:18:02.980

您可以使用[`ListFiles()`](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29)Apache [Commons IO](http://commons.apache.org/io/)，传递[`RegexFileFilter`](http://commons.apache.org/io/apidocs/org/apache/commons/io/filefilter/RegexFileFilter.html)FileFilter。

在您的 Android 项目中使用 Commons IO jar 库的示例：

```
Collection<File> files = FileUtils.listFiles(
                            Environment.getExternalStorageDirectory(),
                            new RegexFileFilter(".*test.*"),
                            TrueFileFilter.TRUE);

for(File f : files){
  //---do something---
} 
```

此外，在单独的线程中运行此代码，考虑使用`AsyncTask`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T13:14:26.663

1.  您将需要获取要搜索的最顶层目录。因为，如果从 /（root）开始搜索，会浪费太多资源。最好从 /sdcard 开始（或任何顶级用户数据目录）
2.  您将遍历它下面的所有目录，最好是递归的。
3.  存储与您的搜索条件匹配的每个文件名
4.  完成后，对结果做任何你想做的事情。

# php - Python 中 PHP 的 sha1 原始输出的模拟

> ID：13990828
> 
> 赞同：3
> 
> 时间：2012-12-21T13:10:08.817
> 
> 标签：php, python, django

我正在使用 Django 制作电子商店。我正在尝试使用[http://liqpay.com/](http://liqpay.com/)添加在线支付。他们在 PHP 中有示例：[https](https://liqpay.com/?do=pages&p=cnb12) ://liqpay.com/?do=pages&p=cnb12 。

在示例中，他们使用 PHP 的`shal($data, 1)`标志 1（然后 sha1 摘要以长度为 20 的原始二进制格式返回）。

但是 Python 函数`hashlib.sha1()`，没有这个标志。

Python中有一些类比吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T13:22:12.553

Python hashlib 对象可以为您提供原始字节或十六进制摘要，具体取决于使用的方法。调用[`.digest()`](http://docs.python.org/2/library/hashlib.html#hashlib.hash.digest)为您提供原始字节：

```
>>> import hashlib
>>> data = 'foobar'
>>> hashlib.sha1(data).digest()
'\x88C\xd7\xf9$\x16!\x1d\xe9\xeb\xb9c\xffL\xe2\x81%\x93(x'
>>> len(hashlib.sha1(data).digest())
20 
```

如果要获取十六进制摘要，请改用以下[`.hexdigest()`方法](http://docs.python.org/2/library/hashlib.html#hashlib.hash.hexdigest)：

```
>>> hashlib.sha1(data).hexdigest()
'8843d7f92416211de9ebb963ff4ce28125932878' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T22:17:39.910

在**php中**

> `$hash = hash("sha1", "something", true)`
> `echo base64_encode($hash)`
> 'GvF+c3IdvgxAARuC7Uuxp9vjzik='

在**蟒蛇**

> `from [hashlib](https://docs.python.org/2/library/hashlib.html) import sha1`
> `sha1("something").digest().encode("base64")`
> 'GvF+c3IdvgxAARuC7Uuxp9vjzik=\n'

**解释**
在 php 中，散列函数第三个参数意味着输出将以二进制模式在 python 中制作相同的东西，您必须使用方法摘要来获得相同的东西。

# ruby-on-rails - 用于测验应用程序的 Rails 关联和数据库设计

> ID：13990835
> 
> 赞同：2
> 
> 时间：2012-12-21T13:10:28.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design

我正在构建这个测验应用程序。我希望它有点复杂。

我想出了这个数据库模式。但我真的很困惑..对我需要什么关联和东西感到困惑。

嗯.. 需要注意的一件事是，在创建测试时，没有关于将要参加该测试的候选人数量的信息。所以，我创建了`test_questions`and`candidate_answers`作为单独的表。

请帮助我与协会。

![在此处输入图像描述](../Images/9df79bb63530bd509283647062582557.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:49:12.453

让我们看看，那将是：

```
# For Questions: 
:has_many => :answers
:belongs_to => :test_question
  # questions table should have the "test_question_id" column

# Answers:
:has_many => :candidate_answers
:belongs_to => :question 
  # Answers table should have the "question_id" column

#Test Questions:
:has_many => :questions
:has_many => :candidate_answers
:belongs_to => :test
  # test questions table should have the "test_id" column but not the "question_id"

#Tests: 
:has_many => :results
:has_many => :test_questions
:has_many => :candidates, :through => :results, :foreign_key => "candidate_id" #why not? ^^

#Results
:belongs_to => :test
:belongs_to => :candidate
  # Results table should have the "test_id" and "candidate_id" columns

#candidate_answers 
:belongs_to => :candidate
:belongs_to => :test_question
:belongs_to => :answer
  # candidate_answers table should have the "test_question_id", "candidate_id" and "answer_id" columns

#Candidates
:has_many => :candidate_answers
:has_many => :results
:has_many => :answered_tests, :class_name => "test", :through => :results, :foreign_key => "test_id" # again, why not? 
```

根据您提供的信息，这应该可以满足您的需求。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:51:15.053

这应该这样做：

*   降低`candidate_answers.test_question`
*   放下`candidate_answers`桌子
*   放下`test_questions`桌子

    类测试 < ActiveRecord::Base has_many :results has_many :questions end

    类结果 < ActiveRecord::Base belongs_to :test belongs_to :candidate end

    类候选人 < ActiveRecord::Base has_many :results has_many :answers end

    类答案 < ActiveRecord::Base belongs_to :question belongs_to :candidate end

    类问题 < ActiveRecord::Base belongs_to :test has_many :answers end

看起来您打算将答案重复用于一个以上的问题，这通常是一个坏主意。在这种情况下，最好克隆一个答案。

# android - 移动：移动应用发出一个对两个并行请求？

> ID：13990839
> 
> 赞同：3
> 
> 时间：2012-12-21T13:10:43.960
> 
> 标签：android, iphone, mobile, request, latency

我们在我们的移动 Android / iPhone 应用程序中使用 GooglePlaces 来下载附近的商店。此外，我们的数据库中有我们想要向用户显示的存储。

现在，只要我们的移动应用程序有一个位置，它就会触发两个 http 请求，一个到 GooglePlaces，一个到我们的服务器。一旦两个请求都完成，应用程序就会构建一个组合列表并将其显示给用户。我们在两个请求中都在谈论总共 50 Kb。

我们正在考虑只向我们的服务器发出一个请求。然后，我们自己的服务器会向 GooglePlaces 发出请求，合并这两个列表，然后将两者发送回移动客户端。优点是我们的移动应用只需要触发一个请求，但是当我们的服务器连接到 googleplaces 时可能会增加延迟。

测试第二个选项对我们来说可能需要一整天的时间。有没有其他人遇到过类似的问题？你会推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:24:42.473

这是一种权衡，但我们也遇到了类似的问题——我们的应用程序发出了独立的请求（不是向 googleplaces，而是其他 API），我们最终转换为单一请求模型。对我们来说，优势不仅仅是减少了应用请求的数量。

1.  导致我们进行更改的最大因素是我们使用的 API 在相对较短的时间内部署了更改。这要求我们对代码进行更改并重新部署应用程序。尽管如此，仍有一些没有更新并发送支持请求的人想知道为什么该应用程序停止按预期工作。在单一请求模型中，我们能够避免这些更新（以及相关的支持问题）。当 API 中的上游数据提供者发生变化时，我们会在服务器上处理转换为我们的内部格式。
2.  与 1) 相关，我们能够在不更新应用程序的情况下合并其他数据源。当我们找到适合我们现有模型的新数据源时，我们可以在不更新应用程序的情况下部署它们。
3.  我们能够在服务器上缓存我们的一些请求。您的请求可能过于本地化，您需要检查 TOS 是否允许缓存，但对我们而言，我们已经能够通过缓存结果来减轻一些延迟。它还允许我们在 API 中断期间优雅地降级。

4.  我们能够在将数据发送到设备之前对其进行优化。我们过滤掉任何我们知道服务器上的应用程序不使用的数据元素，并优化 xml，使下载大小减少 20%-30%。

# django - 禁用 Django 中布尔字段的开/关图标

> ID：13990846
> 
> 赞同：7
> 
> 时间：2012-12-21T13:11:22.457
> 
> 标签：django, user-interface, django-admin, boolean

有时不希望为布尔字段显示“开/关”图标。

例子：

*   `error`当出现错误*或*
*   `blocked=True`显示为绿色的“ok”，同时显示为`blocked=False`“禁止进入”标志。

在这种情况下，最好保留原始`True`/`False`行为。

有没有比创建一个返回例如`self.error`并添加`short_description`,`ordering`等的特殊方法更优雅的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T18:50:12.880

使用此代码没有脏话`admin.py`：

```
from mysite.models import Test
from django.contrib import admin

class TestAdmin(admin.ModelAdmin):
    list_display = ('is_blocked_col',)

    def is_blocked_col(self, obj):
        return not obj.is_blocked # invert the boolean value
    is_blocked_col.boolean = True
    is_blocked_col.admin_order_field = 'is_blocked'
    is_blocked_col.short_description  = 'Is Blocked'

admin.site.register(Test, TestAdmin) 
```

如果您使用此方法，它仍会显示开/关图标。如果`is_blocked=True`then`return not obj.is_blocked`将根据您的需要返回`False`显示为红色图标的内容。

**编辑**

如果您想使用文字`True/False`而不是红色/绿色图标，您可以设置

`is_blocked_col.boolean = False`

在上面的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:06:03.423

我检查了相应的 django 代码，不幸的是这种行为是硬编码的，所以唯一的解决方案是问题中提到的那个：

```
is_blocked = BooleanField(default=False)

def is_blocked_col(self):
    return self.is_blocked
is_blocked_col.short_description = \
is_blocked_col.admin_order_field = 'is_blocked' 
```

这比类似的可读性差得多

```
is_blocked = BooleanField(default=False)
is_blocked.boolean = False 
```

（这不起作用）

或强制管理小部件`force_unicode`或其他东西（我不知道如何实现）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T12:16:17.893

我认为你可以通过 javascript 和 css 来设计你的模板。

你可以看到这些链接： [开/关按钮](https://stackoverflow.com/questions/1957466/how-to-create-an-on-off-switch-with-javascript-css)， [IOS按钮](http://ios-checkboxes.awardwinningfjords.com/)， [开关按钮](http://proto.io/freebies/onoff/)， [CSS3按钮](http://jsfiddle.net/)

我认为使用它们中的任何一个都太容易了

祝你好运

穆罕默德

# javascript - 用于地图的简单 div 容器在 FF 或 chrome 中无法正确显示

> ID：13990860
> 
> 赞同：1
> 
> 时间：2012-12-21T13:12:19.243
> 
> 标签：javascript, dojo, cross-browser, arcmap

我正在尝试使用 ARCGis javascript API 和 dojo 在 dot net nuke 模块中显示地图。在 IE9 中这工作正常，但是在 Firefox 和 chrome 中地图中心在屏幕外，只有一半可以在 div 中看到。div 的另一半有正确放置的放大和缩小部分，但它只是那一半的白色背景。我可以拖动地图来填充该区域，但是一旦我放开它，它就会滑回靠近中间的随机点。在附加层中添加的对象也不能正确渲染。

在 chrome 中使用调试器我得到以下错误：

```
XMLHttpRequest cannot load . Origin http://localhost:63579 is not allowed by Access-Control-Allow-Origin.
XMLHttpRequest cannot load http://server.arcgisonline.com/ArcGIS/rest/info?f=json. Origin http://localhost:63579 is not allowed by Access-Control-Allow-Origin.
Resource interpreted as Script but transferred with MIME type text/pl 
```

我在 ascx 文件中的主要代码如下。

```
<link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/dojo/dijit/themes/claro/claro.css" />
<link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/esri/css/esri.css" />
<link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/dojo/dojox/grid/resources/Grid.css" />

<telerik:RadCodeBlock runat="server" ID="RadScriptBlock1">

<script type="text/javascript">
    djConfig = {
        parseOnLoad: true
    }
</script>

<script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.2"></script>

<script type="text/javascript">
    dojo.require("esri.map");
    dojo.require("dojox.grid.DataGrid");
    dojo.require("dojo.data.ItemFileReadStore");
    dojo.require("esri.tasks.find");

    var findTask, findParams;
    var map, startExtent;
    var grid, store;

    function init() {
        //dojo.connect(grid, "onRowClick", onRowClickHandler);

        //Create map and add the ArcGIS Online imagery layer
        startExtent = new esri.geometry.Extent({ "xmin": -10981000, "ymin": 4215000, "xmax": -10608000, "ymax": 4361000, "spatialReference": { "wkid": 102100 } });
        map = new esri.Map("mapDiv", { extent: startExtent });

        var streetMapLayer = new esri.layers.ArcGISTiledMapServiceLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer");
        map.addLayer(streetMapLayer); 
        var oilGasLayer = new esri.layers.ArcGISDynamicMapServiceLayer("Layer2"); //
        map.addLayer(oilGasLayer);
 }

        dojo.addOnLoad(init);
</script>
</telerik:RadCodeBlock> 
```

这是容器

```
<div id="mapDiv" style=" border: 1px solid #000; padding: 0; margin: 0"></div> 
```

到目前为止，我的研究表明我需要在页面加载中处理 httpcontext，但这没有做任何事情，这意味着 Web 服务是问题所在。但由于这些服务在所有浏览器的其他页面中的 iframe 中都显示良好，我对此表示怀疑。加倍如此，因为那将是 esri 的底图，我怀疑他们的产品可以正常工作。

需要注意的另一件事是，当我使用 API 版本 1.6 时，这不是问题。

关于为什么这是行为不端的任何想法？

# excel - 将产品从 Excel 迁移到 Magento

> ID：13990867
> 
> 赞同：-1
> 
> 时间：2012-12-21T13:12:37.613
> 
> 标签：excel, magento, migrate

我有一个 Excel 文件，其中包含需要迁移到我的 Magento 商店的简单产品。那里也有图像。产品数量接近20000。这是一个巨大的数据，所以我担心它可能会在移动过程中崩溃。

你知道任何脚本或插件来解决这个问题吗？

谢谢你。

PS 我找到了这个[Stack question](https://stackoverflow.com/questions/13161432/importing-configurable-products-in-magento-from-csv)，但不确定它是否适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:01:02.897

只要您可以获取 Magento 使用的 csv 格式的数据，您就可以在 Magento 中导入这些产品。

从 Magento 1.5 开始，除了**Dataflow之外，还有一个新的****Import/Export**功能，它更快并且可以更好地处理数千种产品的导入。

 **要获取示例文件，只需在 Magento 中创建产品并使用导出功能（您可以在其中按特定 sku 过滤）来获取 csv 文件。

然后，基于该文件，以该格式获取 Excel 中的数据。您可能希望一次将其分成 3-5.000 批产品。**

# android - webview中的图像在触摸时变得模糊

> ID：13990877
> 
> 赞同：3
> 
> 时间：2012-12-21T13:13:26.787
> 
> 标签：android, android-fragments, android-webview

我在片段内使用 webview 并从资产文件夹加载 html 页面。我的问题是当我滚动页面时所有图像都变得模糊？

放置一些日志后，这发生在 webview 的触摸上。我不知道如何阻止它。

我在 4.0 和 2.3 中检查了它，它只在 ICS 中发生。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T16:29:04.050

我不确定我的代码是哪一行，但它现在可以工作了

```
 mWebView.clearFocus();
         mWebView.setFocusable(false);
         mWebView.setSelected(false);
         mWebView.callOnClick();
         mWebView.getSettings().setLightTouchEnabled(false);
         mWebView.setOnTouchListener(null);
         mWebView.getSettings().setSupportZoom(false); 
```

我已将此代码放入`onCreateView`我的片段中。`mWebView`在我看来是w​​ebview。

# android - 如何从标记列表中提取标记信息

> ID：13990879
> 
> 赞同：1
> 
> 时间：2012-12-21T13:13:39.793
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在使用以下代码在 mapfragment 中使用三个数组创建标记列表，这些数组发送一个记录列表的纬度、经度和名称信息。我的目标是在单击信息窗口时向新意图发送记录的名称。现在为所有标记发送数组最后一项的记录名称，但我需要将特定信息发送到每个标记。任何的想法？

```
 String[] arraylatitud = arrlat.toArray(new String[arrlat.size()]);
            String[] arraylongitud = arrlon.toArray(new String[arrlon.size()]);
            String[] arrayrecordname = arrrecname.toArray(new String[arrrecname.size()]);

            for(int i=0; i<arrlon.size();i++){

                     mapa.addMarker(new MarkerOptions()
                    .position(new LatLng(Float.valueOf (arraylatitud[i]),Float.valueOf (arraylongitud[i])))
                    .title("Grabación:" + arrayrecordname[i])
                    .snippet("Latitud:" + arraylatitud[i] + "Longitud:" + arraylongitud[i]));

                    filename = arrayrecordname[i];

            } 

            mapa.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {

                    public void onInfoWindowClick(Marker marker) {

                           Intent intent = new Intent(MapArea.this, StreamingArea.class);
                           intent.putExtra("variable_selection", filename.toString());
                           startActivity(intent);

                    }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:37:09.480

我刚刚就此发表了一篇博文。您可以在以下网址找到它： [http ://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html](http://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html)

每个标记都有一个 ID。

```
Marker m = mapa.addMarker(new MarkerOptions()
                .position(new LatLng(Float.valueOf (arraylatitud[i]),Float.valueOf (arraylongitud[i])))
                .title("Grabación:" + arrayrecordname[i])
                .snippet("Latitud:" + arraylatitud[i] + "Longitud:" + arraylongitud[i]));

m.getId(); 
```

如果您存储该 ID，以及您需要的信息，您可以获得正确的信息

```
getMap().setOnInfoWindowClickListener(new OnInfoWindowClickListener() {

        public void onInfoWindowClick(Marker marker) {
            int id = marker.getId();
            Intent i = new Intent(MapArea.this.getActivity(), StreamingArea.class);
            //your code goes here
            i.putExtra(....);

            startActivity(i);

        }
    }); 
```

# breeze - 保存时的验证错误

> ID：13990886
> 
> 赞同：2
> 
> 时间：2012-12-21T13:14:11.810
> 
> 标签：breeze

使用 Breeze保存`SaveChanges()`时，如果我有必填字段，则在执行简单更新时会出错。

例如

我有一个用户表，其中包含`Name`, 和`Email`不需要该字段的`Email`字段。

我可以显示用户名列表（但不想显示电子邮件）。

显示有效，但从未调用 save - 我在 JavaScript 中收到验证错误：

> 由于验证错误未保存：需要“电子邮件”

但可以肯定的是，这应该只是在我更改的字段上生成一个简单的更新，而不应该对电子邮件做任何事情。

奇怪的是，如果我只更改列表中的第一项，我不会收到错误消息。

有任何想法吗？

HTML 如下所示：

```
<a href="#" data-bind="click: save">Save</a>
<ul data-bind="foreach: modules">
<li >
    <form>
        <input type="checkbox" data-bind="checked: IsRunning" />
        <input type="text" data-bind="value: ModuleName, css: { done: IsRunning }" />
    </form>
  </li>
 </ul> 
```

并且视图模型保存部分如下：

```
function saveChanges() {
    if (manager.hasChanges()) {
        manager.saveChanges()
            .then(saveSucceeded)
            .fail(saveFailed);
    } else {
        logger.info("Nothing to save");
    };
}
function saveSucceeded(saveResult) {
    logger.success("# of Modules saved = " + saveResult.entities.length);
    logger.log(saveResult);
}

function saveFailed(error) {
    var reason = error.message;
    var detail = error.detail;

    if (reason === "Validation error") {
        handleSaveValidationError(error);
        return;
    }
    if (detail && detail.ExceptionType.indexOf('OptimisticConcurrencyException') !== -1) {
        // Concurrency error 
        reason =
            "Another user, perhaps the server, may have deleted one or all of the todos.";
        manager.rejectChanges(); // DEMO ONLY: discard all pending changes
    }

    logger.error(error,
        "Failed to save changes. " + reason +
        " You may have to restart the app.");
};
function handleSaveValidationError(error) {
    var message = "Not saved due to validation error";
    try { // fish out the first error
        var firstErr = error.entitiesWithErrors[0].entityAspect.getValidationErrors()[0];
        message += ": " + firstErr.errorMessage;
    } catch (e) { /* eat it for now */ } 
    logger.error(message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:18:46.547

嗯...你说电子邮件不是必需的，但元数据认为它是必需的。您能否通过查看此属性的元数据来确认这一点？代码看起来像这样。

```
var userType = myEntityManager.metadataStore.getEntityType("User");
var emailProp = userType.getProperty("email");
var isRequired = !emailProp.isNullable; 
```

如果元数据认为该字段是必需的，那么它可能在服务器上设置为这个。因此，请查看您的 EF 模型并检查 [Required] 属性是否未添加到此属性中。此外，检查该字段是否不可为空是数据库。

需要注意的另一项，默认情况下，微风将尝试在任何保存之前验证服务器上的***整个***实体，**即使是那些未触及的字段**，即使实际上只有修改过的字段会得到更新。这是设计使然。

但是，您可以通过设置 entityManager 的 'validationOptions' 来抑制这种行为，如下所示：

```
var vo = new breeze.ValidationOptions({ 
    validateOnSave: false,
    validateOnQuery: false, // not needed here but shown for completeness
    validateOnAttach: true  // not needed here but shown for completeness
});
myEntityManager.setProperties({ validationOptions: vo }); 
```

# linux - 获取引号之间的单词

> ID：13990889
> 
> 赞同：4
> 
> 时间：2012-12-21T13:14:20.683
> 
> 标签：linux, unix, sed, awk, grep

我有这样的x行：

```
Unable to find latest released revision of 'CONTRIB_046578'. 
```

我需要在这个例子中提取单词`revision of '`和之间的单词，如果可能的话，使用或任何其他命令 计算该单词的出现次数？`'``CONTRIB_046578``grep``sed`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T13:37:31.570

最干净的解决方案是`grep -Po "(?<=')[^']+(?=')"`

```
$ cat file
Unable to find latest released revision of 'CONTRIB_046578'
Unable to find latest released revision of 'foo'
Unable to find latest released revision of 'bar'
Unable to find latest released revision of 'CONTRIB_046578'

# Print occurences 
$ grep -Po "(?<=')[^']+(?=')" file
CONTRIB_046578
foo
bar
CONTRIB_046578

# Count occurences
$ grep -Pc "(?<=')[^']+(?=')" file
4

# Count unique occurrences 
$ grep -Po "(?<=')[^']+(?=')" file | sort | uniq -c 
2 CONTRIB_046578
1 bar
1 foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:26:40.647

这是一个 awk 脚本，可用于提取和计算单引号中每个单词的频率：

```
awk '{for (i=1; i<=NF; i++) {if ($i ~ /^'"'.*?'"'/ ) cnt[$i]++;}} 
      END {for (a in cnt) {b=a; gsub(/'"'"'/, "", b); print b, cnt[a]}}' infile 
```

### 测试

```
cat infile
Unable to find latest released revision of 'CONTRIB_046572'
Unable to find latest released revision of 'CONTRIB_046578'
Unable to find latest released revision of 'CONTRIB_046579'
Unable to find latest released revision of 'CONTRIB_046570'
Unable to find latest released revision of 'CONTRIB_046579'
Unable to find latest released revision of 'CONTRIB_046572'
Unable to find latest released revision of 'CONTRIB_046579' 
```

**输出：**

```
 awk '{for (i=1; i<=NF; i++) {if ($i ~ /^'"'.*?'"'/ ) cnt[$i]++;}} 
      END {for (a in cnt) {b=a; gsub(/'"'"'/, "", b); print b, cnt[a]}}' infile

CONTRIB_046579 3
CONTRIB_046578 1
CONTRIB_046570 1
CONTRIB_046572 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:20:58.780

您只需要一个非常简单的 awk 脚本来计算引号之间的出现次数：

```
awk -F\' '{c[$2]++} END{for (w in c) print w,c[w]}' file 
```

使用@anubhava 的测试输入文件：

```
$ cat file
Unable to find latest released revision of 'CONTRIB_046572'
Unable to find latest released revision of 'CONTRIB_046578'
Unable to find latest released revision of 'CONTRIB_046579'
Unable to find latest released revision of 'CONTRIB_046570'
Unable to find latest released revision of 'CONTRIB_046579'
Unable to find latest released revision of 'CONTRIB_046572'
Unable to find latest released revision of 'CONTRIB_046579'
$
$ awk -F\' '{c[$2]++} END{for (w in c) print w,c[w]}' file
CONTRIB_046578 1
CONTRIB_046579 3
CONTRIB_046570 1
CONTRIB_046572 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:20:55.453

假设：

*   每个单词可以出现多次，OP 想要计算每个单词的出现次数。
*   文件中没有其他行

**输入文件：**

```
$ cat test.txt 
Unable to find latest released revision of 'CONTRIB_046578'.
Unable to find latest released revision of 'CONTRIB_046572'.
Unable to find latest released revision of 'CONTRIB_046579'.
Unable to find latest released revision of 'CONTRIB_046570'.
Unable to find latest released revision of 'CONTRIB_046572'.
Unable to find latest released revision of 'CONTRIB_046578'. 
```

**用于过滤和计算单词的 Shell 脚本：**

```
$ sed "s/.*'\(.*\)'.*/\1/" test.txt | sort | uniq -c
  1 CONTRIB_046570
  2 CONTRIB_046572
  2 CONTRIB_046578
  1 CONTRIB_046579 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T13:22:55.213

```
sed 's/.*\'(.*?)\'.*/$1/' myfile.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-12T10:52:47.133

如果下面的测试文件代表了实际问题中的文件，那么下面的文件可能会有用。

*基于测试文件中的每一行都是同质的*- 即格式良好并包含 8 列（或字段） - 使用该`cut`命令的方便解决方案如下：

**文件：**

```
Unable to find latest released revision of 'CONTRIB_046572'
Unable to find latest released revision of 'CONTRIB_046578'
Unable to find latest released revision of 'CONTRIB_046579'
Unable to find latest released revision of 'CONTRIB_046570'
Unable to find latest released revision of 'CONTRIB_046579'
Unable to find latest released revision of 'CONTRIB_046572'
Unable to find latest released revision of 'CONTRIB_046579' 
```

**代码：**

```
cut -d ' ' -f 8 file | tr -d "'" | sort | uniq -c 
```

**输出：**

```
1 CONTRIB_046570
2 CONTRIB_046572
1 CONTRIB_046578
3 CONTRIB_046579 
```

`cut`注意代码：用于分隔每个字段的默认分隔符是`tab`，但由于我们要求分隔符是单个空格来分隔每个字段，因此我们指定选项`-d ' '`。其余代码与其他答案类似，所以我不会重复已经说过的内容。

一般注意事项：如果文件格式不正确，如我上面已经提到的，此代码可能无法达到所需的输出。

# c++ - 在静态库之外抛出 C++ 异常？

> ID：13990892
> 
> 赞同：12
> 
> 时间：2012-12-21T13:14:30.937
> 
> 标签：c++, exception, static-libraries

通常，异常不得传播模块边界，例如 Herb Sutters C++ 编码标准（第 62 项）中所述。当使用不同的编译器或仅使用编译器设置编译时，这可能会崩溃。

如果是动态链接库，我可以理解这个问题。但我想知道它是否也适用于静态库。就上述规则而言，静态库是模块吗？如果库是用其他编译器设置（例如对齐）编译的，如果从静态库中抛出异常并在应用程序中捕获，程序可能会崩溃？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T13:22:59.443

通常，静态库必须由相同的编译器和相同的编译器设置（大部分）编译才能与交付物（动态库或可执行文件）兼容。

然后，您可以在静态库的边界之外抛出异常，因为它与您的编译器生成的一组 .obj 文件没有太大区别。而且您显然**可以**在不同的 .obj 模块之间引发异常。

编辑：

总结评论：

1.  如果您使用用于编译库的相同编译器和编译器设置，则只能使用静态库。
2.  您可以在使用相同编译器和编译器设置编译的模块之间引发异常。
3.  从 1) 和 2) 可以看出，您可以从静态库中抛出异常，因为如果您使用它，这意味着您使用的是相同的编译器和编译器设置，因此您可以抛出异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T13:24:56.030

Herb Sutters 的描述也适用于静态库：

> C++ 异常处理没有普遍的二进制标准。除非您控制用于构建双方的编译器和编译器选项，否则不允许异常在两段代码之间传播；否则，模块可能不支持异常传播的兼容实现。通常，这归结为： 不要让异常跨模块/子系统边界传播。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:05:47.157

这取决于 Herb 所说的“模块”是什么意思。这些问题不仅涉及异常；他们可以使用 C++ 接口处理任何事情。

当异常跨越作为同一组件的一部分编译的源的翻译单元边界时，当然没有问题。在组件之间，如果它们都是同一个应用程序的一部分，并且您确保它们都使用相同的编译器进行编译，具有相同的编译器选项，那么它可能是安全的，尽管在动态库之间交叉时可能会出现问题，具体取决于库是如何加载的。（一般来说，这只是 Unix 系统上的问题，其中动态加载的组件中符号的可见性由传递给动态加载器的选项控制。）作为一般规则：安排让所有应用程序都使用相同的编译器编译器和相同的编译器选项，并且您在应用程序中应该没有真正的问题（尽管您可能必须确保所有动态组件都被显式加载，至少在 Unix 下）。在您正在加载或被“外国”软件加载的“应用程序”之间，Herb 的限制还远远不够。在实践中，您在应用程序之间交叉的接口必须在 C 中定义。并且可能仍然存在限制，这取决于您的代码的加载方式以及正在使用哪些其他动态加载的组件。

静态链接将消除有关如何加载库的问题，但不会改变其他任何内容。

# oracle - 查看 Oracle 日志文件

> ID：13990896
> 
> 赞同：2
> 
> 时间：2012-12-21T13:15:21.997
> 
> 标签：oracle, toad, logfiles, sql-navigator

我在 Oracle 9i 中有一个管理帐户。我需要在 SQL Navigator 中的数据库上运行一些 SELECT 脚本。脚本在 SQL Navigator 的“SQL 编辑器”窗口中即时编写，运行后不保存。问题是：

1) 这种脚本（使用 SELECT 子句）的日志文件包含什么？例如，帐户名称、时间戳或其他什么？它是否保留脚本的文本？

2) 我可以从 SQL Navigator 或 TOAD 查看这些日志文件的内容吗？我的意思是使用另一个允许我查看日志文件的查询（例如'SELECT * FROM gv$log'）？或者为此目的使用特殊工具？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:09:49.740

1）什么都没有。DML 被记录，而不是选择，（除非您启用了审核）。话虽如此，在有限的时间内，所有运行的 sql 都可以在 v$sql 中找到。

2）我认为它们不是很容易阅读，我无法想象你为什么要这样做。存在（重做）日志，以便数据库能够在崩溃后重建事务。它们不是供人类阅读的。

# asp.net - 从另一台机器访问 Appfabric 缓存

> ID：13990898
> 
> 赞同：0
> 
> 时间：2012-12-21T13:15:23.273
> 
> 标签：asp.net

我有一台计算机（X1），其中运行 VS 2010 中构建的 Web 应用程序，并在此应用程序中安装和使用 Appfabric。我有另一台计算机（X2）也安装了 Appfabric。两台计算机都连接在一个工作组中。

例如，目前我在 X1 中创建了一个缓存“NamedCache1”，并使用它来存储值并从 X1 中的应用程序中引用它。我在 X2 中创建了一个缓存“NamedCache2”，我想在我的应用程序中使用这个缓存“NamedCache2”。我怎样才能实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:38:48.807

关于您在哪里配置 AppFabric，这个问题有点模糊。我假设您已经完成了配置 AppFabric 缓存的众多 Google 结果之一中的步骤，例如[Scott Hanselman](http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx)的步骤。如果您在该链接中查看他的 CacheUtil 类，您可以修改它以访问两个缓存。

```
using Microsoft.ApplicationServer.Caching;
using System.Collections.Generic;

public class CacheUtil
{
    private static DataCacheFactory _factory = null;
    private static DataCache _NamedCache1 = null;
    private static DataCache _NamedCache2 = null;

    public static DataCache GetNamedCache1()
    {
        if (_NamedCache1 != null)
            return _NamedCache1;

        //Define Array for 2 Cache Hosts
        List<DataCacheServerEndpoint> servers = new List<DataCacheServerEndpoint>(2);

        //Specify Cache Host Details 
        //  Parameter 1 = host name
        //  Parameter 2 = cache port number
        servers.Add(new DataCacheServerEndpoint("X1", 22233));
        servers.Add(new DataCacheServerEndpoint("X2", 22233));

        //Create cache configuration
        DataCacheFactoryConfiguration configuration = new DataCacheFactoryConfiguration();

        //Set the cache host(s)
        configuration.Servers = servers;

        //Set default properties for local cache (local cache disabled)
        configuration.LocalCacheProperties = new DataCacheLocalCacheProperties();

        //Disable tracing to avoid informational/verbose messages on the web page
        DataCacheClientLogManager.ChangeLogLevel(System.Diagnostics.TraceLevel.Off);

        //Pass configuration settings to cacheFactory constructor
        _factory = new DataCacheFactory(configuration);

        //Get reference to named cache called "default"
        _NamedCache1 = _factory.GetCache("NamedCache1");

        return _NamedCache1;
    }

    public static DataCache GetNamedCache2()
    {
        if (_NamedCache2 != null)
            return _NamedCache2;

        //Define Array for 2 Cache Hosts
        List<DataCacheServerEndpoint> servers = new List<DataCacheServerEndpoint>(2);

        //Specify Cache Host Details 
        //  Parameter 1 = host name
        //  Parameter 2 = cache port number
        servers.Add(new DataCacheServerEndpoint("X1", 22233));
        servers.Add(new DataCacheServerEndpoint("X2", 22233));

        //Create cache configuration
        DataCacheFactoryConfiguration configuration = new DataCacheFactoryConfiguration();

        //Set the cache host(s)
        configuration.Servers = servers;

        //Set default properties for local cache (local cache disabled)
        configuration.LocalCacheProperties = new DataCacheLocalCacheProperties();

        //Disable tracing to avoid informational/verbose messages on the web page
        DataCacheClientLogManager.ChangeLogLevel(System.Diagnostics.TraceLevel.Off);

        //Pass configuration settings to cacheFactory constructor
        _factory = new DataCacheFactory(configuration);

        //Get reference to named cache called "default"
        _NamedCache2 = _factory.GetCache("NamedCache2");

        return _NamedCache2;
    }
} 
```

# objective-c - 自毁可可应用

> ID：13990899
> 
> 赞同：3
> 
> 时间：2012-12-21T13:15:28.310
> 
> 标签：objective-c, macos, cocoa

我正在寻找设计自毁 Cocoa 应用程序的方法。这个想法是在启动时检测应用程序是否正在进行逆向工程（这总是在多次尝试中完成）并删除/损坏它以防万一。当然，热心的黑客可以重新下载并重新设计破坏过程，但这会让它变得非常烦人和痛苦！

为了检查代码完整性，可执行文件上的哈希和应该可以解决问题。

关于损坏过程，我很确定应用程序在运行时无法编辑其包。我有一个想法：

- 产生一个专门用于破坏的“中间应用程序”，在退出第一个时启动它。它会起作用吗？

- 会在退出之前生成一个 Shell 脚本（它将等待应用程序终止）吗？

欢迎任何想法！

编辑：关于 Cocoaster 链接：

1.剥离调试符号：很容易跟踪“验证”方法，即使没有明确的方法名称，主要是通过查找 NSString 调用（@“validated”，@“license”）

2.PT_DENY_ATTACH ：无论如何都有附加方法，但是打破 ptrace() 并修改返回值（如果我能在我的基本逆向工程培训中找到这一点，任何人都可以）。

3.检查校验和，否则退出：这正是我要避免的事情：使用 gdb 很容易跟踪对 [NSApplication shouldTerminate:] 的调用）并修改测试（或有效的 MD5 字符串）以通过它。重点是，黑客不仅需要重新加载 gdb，还需要再次下载/安装它（从而使该过程非常耗时）。

想象一下：

1.在启动时，mainApplication 创建一个 shell/bash 脚本，类似于：

```
 wait(decent time)
 rm /*Dynamic Application Path*/Contents/MacOS/exe 
```

或更好 ：

```
 sed -i 's/a/b/g' /*Dynamic Application Path*/Contents/MacOS/exe
//Will completly screw the code 
```

2.如果校验和失败，启动脚本并安静地终止应用程序。我的问题是： NSTask 依赖于应用程序（我可以启动 NSTask 并退出启动它的应用程序）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:21:47.030

这可能是你要找的吗？

[http://www.seoxys.com/3-easy-tips-to-prevent-a-binary-crack/](http://www.seoxys.com/3-easy-tips-to-prevent-a-binary-crack/)

[http://www.cocoabuilder.com/archive/cocoa/283683-detecting-if-you-re-being-debugged.html](http://www.cocoabuilder.com/archive/cocoa/283683-detecting-if-you-re-being-debugged.html)

[http://www.cocoabuilder.com/archive/cocoa/109505-detect-debugger.html](http://www.cocoabuilder.com/archive/cocoa/109505-detect-debugger.html)

# java - 会话回滚、回退和死信处理程序

> ID：13990904
> 
> 赞同：0
> 
> 时间：2012-12-21T13:15:50.793
> 
> 标签：java, ibm-mq

我正在使用 MQQueueSession.rollback() 回滚工作单元。消息被移动到 BACKOUT 队列，这没问题。

但问题是如何处理回退队列中的这些消息？我读到我可以使用 runmqdlq 工具，但它只适用于以 MQDLH 为前缀的消息。简单的 MQQueueSession.rollback() 似乎没有这样做。我究竟做错了什么？

代码示例：

```
MQQueueConnection connection;
// ...
MQQueueSession session = (MQQueueSession) connection.createQueueSession(true, Session.SESSION_TRANSACTED);
MQQueue queue = (MQQueue) session.createQueue("queue:///TEST");
MQQueueReceiver receiver = (MQQueueReceiver) session.createReceiver(queue);
JMSTextMessage message = null;

try {
    message = (JMSTextMessage) receiver.receive();
    // ...
    session.commit();
} catch (JMSException e) {
    session.rollback();
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:49:31.457

出于几个原因，MQ JMS 提供程序可以将消息回退到回退队列或死信队列。他们之中有一些是

1) 格式错误的消息
2) 客户端应用程序未通过`Commit`在事务处理会话中或`Message.Acknowledge()`在客户端确认会话中确认消息。在这种情况下，将重新传递消息。如果一次又一次地传递相同的消息，MQ JMS 提供程序会根据队列上的`BOTHRESH`设置将该消息移至退出队列。

以上称为“毒消息”处理。

很多时候，队列可能没有`BOQUEUE`定义退出队列 ()。`DLQ`在这种情况下，MQ JMS 提供程序将有害消息移动到以DLQ 标头为前缀的死信队列 ( )。您可以`runmqdlq`使用`DLQ`.

回退队列中的消息没有任何像`DLQ`. 您需要调查为什么消息会在那里结束。修复原因并将消息移回原始队列，以便可以将消息传递给应用程序。

# android - 完成数据下载后，Android listview 不加载一项是完全加载？

> ID：13990906
> 
> 赞同：0
> 
> 时间：2012-12-21T13:15:58.857
> 
> 标签：android, android-listview

我有一个航班列表，我正在使用 JSON PARSING 获取数据，我已经完成了这个，但我的问题是这个数据显示当所有 textview 项目被加载但我想要一个行项目被获取而不是在第一个项目加载后加载一项一项加载第二项不直接显示所有项

我想要这个在这里你可以看到想用 listview 做什么的图像
![在此处输入图像描述](../Images/39d3209b5cc641508d0cad11bccbc2a3.png)

![在此处输入图像描述](../Images/0b25d51a8993fb36d30e0bfda829991a.png)

![在此处输入图像描述](../Images/d481c89a4a2fbfe72f5864c02a41dc84.png)

![在此处输入图像描述](../Images/e926d0b89fc8aa9775853131401e7817.png)

但这是行不通的，这向我展示了直接喜欢这张图片 ![在此处输入图像描述](../Images/c5c28b6da43dcc0f52db2a7ef5607b8d.png) 的结果，我把我的代码用于

> HomeActivity.java

```
public class HomeActivity extends Activity {
    @Override
        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.home);

            new FlightListBack().execute("");
        }
public class FlightListBack extends AsyncTask<String,ArrayList< HashMap<String,String>> , ArrayList<HashMap<String,String>>>
{

    ArrayList<String> airportList = new ArrayList<String>();
    JsonParser jparser= new JsonParser();
    List<String> spinnercityList= new ArrayList<String>();
    final List<String> spinnerAirportNameList= new ArrayList<String>();
    JSONArray  sjairport;

    @Override
    protected ArrayList<HashMap<String,String>> doInBackground(
            String... params) {

                 ArrayList<HashMap<String, String>> flightList = new ArrayList<HashMap<String, String>>();

            String flighturl = "http://api.flightstats.com/flex/flightstatus/rest/v2/json/airport/status/JFK/dep/2012/12/21/5?appId=4dde11f5&appKey=6b80a6ed5d82c8f0b&utc=false&numHours=6";
                String jsonstringfunction=jparser.getJSONFromUrl(flighturl);

                    try
                    {

                            JSONObject jobject= new JSONObject(jsonstringfunction); 
                            JSONObject appendix = jobject.getJSONObject(TAG_APPENDIX);              Log.e("JOBJECT ","APPENDIX-->"+appendix.length());

                            // Airlines Array For Getting Airlines Name
                            JSONArray  jairlines=appendix.getJSONArray(TAG_AIRLINES);               Log.e("JSONARRAY","AIRLINES"+jairlines.length());

                            // Airport Array For Getting Airport Name
                            JSONArray  jairport=appendix.getJSONArray(TAG_AIRPORT);                 Log.e("JSONARRAY","AIRPORT"+jairport.length());

                            // Flightstatuses Array For Getting INFO
                            JSONArray jflightstatuses=jobject.getJSONArray(TAG_FLIGHTSTATUSES);     Log.e("JSONARRAY","FLIGHTSTATUSES"+jflightstatuses.length());

                            int i;
                            int j;
                            int k;
                            int m;
                            int n;

                            //****************************** Flightstatuses Array *****************************
                            for(i=0;i<jflightstatuses.length();i++)
                            {

                                // creating new HashMap
                                HashMap<String, String> map = new HashMap<String, String>();

                                arrivalairportfscode=jflightstatuses.getJSONObject(i).get(TAG_ARRIVALAIRPORTFSCODE).toString();     //  Log.e("ArrivalAirportFsCode","AirportFSCode"+arrivalairportfscode);
                                carrierfscode=jflightstatuses.getJSONObject(i).get(TAG_CARRIERFSCODE).toString(); 
                                flightnumber=jflightstatuses.getJSONObject(i).get(TAG_FLIGHTNUMBER).toString();

                                //****************************** Airport Array *****************************
                                // Comparing ArrivalAirportFsCode For Finding The City Name
                                for(j=0;j<jairport.length();j++)
                                {
                                    // Airport Fs Code from AirportArray
                                    airportfs=jairport.getJSONObject(j).get(TAG_AIRPORTFS).toString(); //   Log.e("AIRPORT","FS"+airportfs);

                                    // Compare ArrivalAirport FsCode and Airport Fs Code For Finding City Name
                                    if(arrivalairportfscode.equalsIgnoreCase(airportfs))
                                    {   
                                        // City Name From Airport Array
                                        city=jairport.getJSONObject(j).get(TAG_AIRPORTCITY).toString();     //Log.e("Airport City","City-->"+city);
                                        destination="( "+arrivalairportfscode+" ) "+city;       //Log.e("Destination City","city"+destination);
                                        flight=carrierfscode+" "+flightnumber;

                                    }
                                }   // airport for loop complete

                                map.put(TAG_MDESTINATION, destination);
                                map.put(TAG_MFLIGHT,flight);
                                //*******************************************************************************

                                //****************************** Airlines Array *****************************

                                // Comparing CarriersFsCode To AirlinesArrayfs for Finding The Airlines Names 
                                for(k=0;k<jairlines.length();k++)
                                {

                                    // Airport Fs Code from AirportArray
                                    airlinesfs=jairlines.getJSONObject(k).get(TAG_AIRLINESFS).toString();   //Log.e("AIRLINES","FS"+airlinesfs);

                                    // Compare ArrivalAirport FsCode and Airport Fs Code For Finding City Name
                                    if(carrierfscode.equalsIgnoreCase(airlinesfs))
                                    {   
                                        // Airlines Name From Airlines Array
                                        airlinesname=jairlines.getJSONObject(k).get(TAG_AIRLINENAME).toString();        //Log.e("AIRLINES NAME","NAME"+airlinesname);
                                        Log.e("--"+flight,"--"+airlinesname);

                                    }

                                } // airlines for loop complete
                                map.put(TAG_MAIRLINE,airlinesname);

                                JSONObject joperationaltimes=jflightstatuses.getJSONObject(i).getJSONObject(TAG_OPERATIONALTIMES);
                                Log.e("Operational times","-->"+joperationaltimes);

                                // Schedule Time 

                                JSONObject jschedulegatedeparture =new JSONObject();
                                JSONObject jestimateddeparture =new JSONObject();

                                for(m=0;m<joperationaltimes.length();m++)
                                {   
                                    if(joperationaltimes.has(TAG_SCHEDULEDGATEDEPARTURE))
                                    {   

                                           jschedulegatedeparture=joperationaltimes.getJSONObject(TAG_SCHEDULEDGATEDEPARTURE);
                                           schedule=jschedulegatedeparture.getString(TAG_SCHEDULEDATELOCAL).toString();
                                           schedule=schedule.substring(11);

                                           Log.e("Before convert","Time"+schedule);

                                           DateFormat f1 = new SimpleDateFormat("hh:mm:ss");
                                           Date d = f1.parse(schedule);
                                           DateFormat f2 = new SimpleDateFormat("h:mm a");
                                           schedule=f2.format(d).toLowerCase(); // "12:18am"

                                           Log.e("After convert","Time"+schedule);
                                         //  jestimateddeparture=joperationaltimes.getJSONObject(TAG_ACTUALGATEDEPARTURE);
                                         //  actual=jestimateddeparture.getString(TAG_ACTUALDATELOCAL).toString();
                                         //  actual=actual.substring(11);
                                    }
                                    else
                                    {
                                         schedule="Not Available";
                                    }

                                }
                                map.put(TAG_MSCHEDULE, schedule);

                                //Log.e("ScheduleGatedtime",""+jschedulegatedeparture);
                                //Log.e("Schedule Time","Work"+schedule);
                                //Log.e("ActualGatedtime",""+jestimateddeparture);
                                //Log.e("Actual Time","Work"+actual);

                                //------------------------------------------------------------------------------------

                                // AIRPORT RESOURCES OBJECT fOR getting departure terminal and departure gate

                                if(jflightstatuses.getJSONObject(i).has(TAG_AIRPORTRESOURCES))
                                {   

                                JSONObject airportresources=jflightstatuses.getJSONObject(i).getJSONObject(TAG_AIRPORTRESOURCES);
                                Log.e("airportresources","--->"+airportresources);

                                    if(airportresources.has(TAG_DEPARTURETERMINAL))
                                    {
                                        departureterminal=airportresources.get(TAG_DEPARTURETERMINAL).toString();
                                    }
                                    else
                                    {
                                        departureterminal=""; 

                                    }

                                    if(airportresources.has(TAG_DEPARTUREGATE))
                                    {
                                        departuregate=airportresources.get(TAG_DEPARTUREGATE).toString();

                                    }
                                    else
                                    {
                                        departuregate="";
                                    }
                                    terminal="T-"+departureterminal+" ";
                                    gate=departuregate;
                                    terminalgate=terminal+gate;
                                    Log.e("Terminal Gate","-->"+terminal+gate);

                                    map.put(TAG_MTERMINALGATE,terminalgate);
                                }
                                else
                                {
                                    terminalgate="Not Available";
                                    map.put(TAG_MTERMINALGATE,terminalgate);
                                }

                                    status=jflightstatuses.getJSONObject(i).getString(TAG_STATUS).toString();
                                    if(status.equalsIgnoreCase("S"))
                                    {
                                        status="Scheduled";
                                    }
                                    if(status.equalsIgnoreCase("L"))
                                    {
                                        status="Landed";
                                    }
                                    map.put(TAG_MFSTATUS, status);

                            flightList.add(map);

                            Log.e("FlightList","work"+flightList);

                            }   

                    }           
                    catch (Exception e)
                    {
                        e.printStackTrace();
                    }

                    return flightList;

            }

protected void onPostExecute(ArrayList<HashMap<String, String>> flightList )
{ 
```

}

```
 } 
```

> CustomListAdapter.java

```
public class CustomListAdapter extends BaseAdapter{
private LayoutInflater inflater;

private ArrayList<YourListRowObject> listItems;

public CustomListAdapter (Context context) {
    inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    listItems = new ArrayList<YourListRowObject>();
}

public void addItem(YourListRowObject row) {
    listItems.add(row);
    notifyDataSetChanged();
}

public View getView(int position, View convertView, ViewGroup parent){
    ViewHolder holder;
    if (convertView == null) {
        convertView = inflater.inflate(R.layout.list, null);
        holder = new ViewHolder();
        holder.textdestination = (TextView)convertView.findViewById(R.id.textdestination);
        holder.textflight=(TextView)convertView.findViewById(R.id.textflight);
        holder.textairline=(TextView)convertView.findViewById(R.id.textairline);
        holder.textschedule=(TextView)convertView.findViewById(R.id.textschedule);
        holder.texttermgate=(TextView)convertView.findViewById(R.id.texttermgate);
        holder.textstatus=(TextView)convertView.findViewById(R.id.textstatus);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder)convertView.getTag();
    }

    holder.textdestination.setText((listItems.get(position)).getMdestination());
    holder.textflight.setText((listItems.get(position)).getMflight());
    holder.textairline.setText((listItems.get(position)).getMairline());
    holder.textschedule.setText((listItems.get(position)).getMschedule());
    holder.texttermgate.setText((listItems.get(position)).getMtermgate());
    holder.textstatus.setText((listItems.get(position)).getMstatus());
    return convertView;
}

public int getCount() {
    return listItems.size();
}

public Object getItem(int position) {
    return listItems.get(position);
}

public long getItemId(int position) {
    return position;
}   

private class ViewHolder{
// add here views, which are defined in `list_row Layout`
    TextView textdestination;
    TextView textairline;
    TextView textschedule;
    TextView texttermgate;
    TextView textstatus; 
    TextView textflight;

}

//contains data, which u get from server in json format. add here your fields
public class YourListRowObject{

public String mdestination;
public String mflight;
public String mairline;
public String mschedule;
public String mtermgate;
public String mstatus;
public String getMdestination() {
    return mdestination;
}
public void setMdestination(String mdestination) {
    this.mdestination = mdestination;
}
public String getMflight() {
    return mflight;
}
public void setMflight(String mflight) {
    this.mflight = mflight;
}
public String getMairline() {
    return mairline;
}
public void setMairline(String mairline) {
    this.mairline = mairline;
}
public String getMschedule() {
    return mschedule;
}
public void setMschedule(String mschedule) {
    this.mschedule = mschedule;
}
public String getMtermgate() {
    return mtermgate;
}
public void setMtermgate(String mtermgate) {
    this.mtermgate = mtermgate;
}
public String getMstatus() {
    return mstatus;
}
public void setMstatus(String mstatus) {
    this.mstatus = mstatus;
}

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:37:32.940

```
 // initialize adapter in `onCreate()`
    CustomListAdapter adapter = new CustomListAdapter(context);
    setListAdapter(adapter); 
```

创造**`CustomListAdapter`**

```
public class CustomListAdapter extends BaseAdapter{
private LayoutInflater inflater;

private ArrayList<YourListRowObject> listItems;

public CustomListAdapter (Context context) {
    inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    listItems = new ArrayList<YourListRowObject>();
}

public void addItem(YourListRowObject row) {
    listItems.add(row);
    notifyDataSetChanged();
}

@Override
public View getView(int position, View convertView, ViewGroup parent){
    ViewHolder holder;
    if (convertView == null) {
        convertView = inflater.inflate(R.layout.list_row, null);
        holder = new ViewHolder();
        holder.text = (TextView)convertView.findViewById(R.id.text);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder)convertView.getTag();
    }

    holder.text.setText((listItems.get(position)).stringValue);

    return convertView;
}

@Override
public int getCount() {
    return listItems.size();
}

@Override
public Object getItem(int position) {
    return listItems.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}   

private class ViewHolder{
// add here views, which are defined in `list_row Layout`
    public TextView text;
}
}

// contains data, which u get from server in json format. add here your fields
public class YourListRowObject{

   public String stringValue;
} 
```

`list_row`布局 - 定义这个布局，代表`ListView`行

在`doInBackground()`

```
// get json object from server
// parse json object into YourListRowObject

adapter.addItem(yourListRowObject); // add this object to adapter 
```

# java - 非 Activity 扩展类的 SharedPreferences

> ID：13990907
> 
> 赞同：0
> 
> 时间：2012-12-21T13:16:01.777
> 
> 标签：java, android

我有一个向 mysql db 发送一些信息的类。我想从这个类中使用 Shared Preferences 方法，但它们属于活动类。我的类扩展了 AsyncTask，所以我不能扩展另一个。我试图创建一个活动实例并使用它，但我的程序已经停止。像这样的东西：

```
Activity a1 = new Activity();
SharedPreferenecs loginInfo = a1.getSharedPreferences("MyKid", 0); 
```

ETC ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:44:41.173

`Activity`在非 Activity 类的构造函数中传递您的上下文。

然后使用

```
mContext.getSharedPreferences("MyKid", 0); 
```

# x86 - 为什么要两条按位或 AVX 指令？

> ID：13990912
> 
> 赞同：7
> 
> 时间：2012-12-21T13:16:15.193
> 
> 标签：x86, bit-manipulation, avx, instructions, bitwise-or

在 AVX 中有两条指令来执行按位或 VORPD 和 VORPS。文档说：

```
VORPD (VEX.256 encoded version)
DEST[63:0] <- SRC1[63:0] BITWISE OR SRC2[63:0]
DEST[127:64] <- SRC1[127:64] BITWISE OR SRC2[127:64]
DEST[191:128] <- SRC1[191:128] BITWISE OR SRC2[191:128]
DEST[255:192] <- SRC1[255:192] BITWISE OR SRC2[255:192] 
```

和

```
VORPS (VEX.256 encoded version)
DEST[31:0] <- SRC1[31:0] BITWISE OR SRC2[31:0]
DEST[63:32] <- SRC1[63:32] BITWISE OR SRC2[63:32]
DEST[95:64] <- SRC1[95:64] BITWISE OR SRC2[95:64]
DEST[127:96] <- SRC1[127:96] BITWISE OR SRC2[127:96]
DEST[159:128] <- SRC1[159:128] BITWISE OR SRC2[159:128]
DEST[191:160] <- SRC1[191:160] BITWISE OR SRC2[191:160]
DEST[223:192] <- SRC1[223:192] BITWISE OR SRC2[223:192]
DEST[255:224] <- SRC1[255:224] BITWISE OR SRC2[255:224] 
```

这两个处理器操作之间有什么实际区别吗？如果不是：为什么有两条指令？如果不是：使用它们进行整数按位或是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-10T13:56:03.990

所有（或几乎所有）SEE/AVX 指令的 PS 和 PD 变体的存在有一个历史背景：曾几何时，当英特尔最初设计第一个 SSE 指令集时，他们认为未来的芯片架构将具有三个*域：* **整数**,**单精度浮点**(32 位),**双精度浮点**(64 位)

**注意：** *域*是 CPU 中的独立逻辑单元，它们很重要，因为在它们之间传输 SSE/AVX 寄存器内容时会有一点延迟。因此，如果将整数域指令的结果用作浮点域指令的输入，则可能会出现 1 或 2 个周期的延迟。

出于这个原因，英特尔将大多数逻辑按位和混洗指令镜像了 3 次：1 次用于整数，1 次用于 SP-FP，1 次用于 DP-FP。这些镜像指令执行的操作是相同的——包括整数和浮点种类之间的操作。

目前大多数 x86 架构都有两个域： **整数**和**浮点。** FP 域处理单精度和双精度（32/64 位）。一些架构只有一个域用于所有 SSE/AVX 指令。可以将双精度的第三个域添加到某些未来的体系结构中是合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T12:25:21.767

操作的结果没有区别。逻辑一致性有两种类型，因为有两种数据类型单压缩 (float32) 和双压缩 (float64)。

在整数的情况下，您使用什么操作并不重要，只要与数据类型保持一致即可。如果您使用最大 32 位宽度包装 int，则使用单包装，如果更大，则使用双包装。试想一下，这是一个转换，您可以将 32 位 int 提升到 64 位 int 而不会丢失，但如果是通往灾难的路线，则反之亦然。

# ios - 自定义 XIB 未加载问题

> ID：13990915
> 
> 赞同：0
> 
> 时间：2012-12-21T13:16:19.513
> 
> 标签：ios, uiviewcontroller, subview

在我的通用应用程序中，我为 iphone 添加了一个空的 xib（ipad 应用程序转换为通用），然后我添加了 1 个视图并添加了一个按钮，但它在模拟器中无法正确显示。

xib设计 ![在此处输入图像描述](../Images/1c9036919e921896140916c53a6c1847.png)

模拟器

![在此处输入图像描述](../Images/bb32d84d80fb9eff27b7c3246f0bcaee.png)

请指导我解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:20:39.540

选择您的 xib 并将状态栏值从无更改为灰色 ![在此处输入图像描述](../Images/47512ca8f1cca8e98c9226a760375184.png)

# javascript - jQuery 查找文本并从子元素中提取 id

> ID：13990917
> 
> 赞同：0
> 
> 时间：2012-12-21T13:16:31.857
> 
> 标签：javascript, jquery

我正在尝试在所有 div 中搜索某个文本“www.url.com”

如果找到 www.url.com，我想从子表中提取表 ID。

我的html是这样的：

```
<div class="box" id="results">
   <div class="box-header">
      <h1>www.url.com</h1>
   </div>
   <table cellpadding="0" cellspacing="0" border="0" class="display" id="24">
      <thead>
         <tr>
            <th>col</th>
         </tr>
         <tr id="161">
            <td class="kw" style="border-left: 1px solid white;border-right: 1px solid #F4F4F4;padding: 12px 14px;position: relative;text-align: left;">111111</td>

         </tr>
      </thead>
      <tbody></tbody>
   </table> 
```

在这种情况下，我想找到 id="24"。

这是我到目前为止所拥有的：

```
var foundin = $('*:contains("www.url.com")'); 
```

不知道如何获得 id :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:20:08.893

采用：

```
foundin.find('table').attr('id'); 
```

如果要收集所有实例，请使用以下内容：

```
foundin.each(function(){
    $(this).find('table').attr('id'); // Gets the ID
    // Store it into something like an array
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:20:10.190

试试这个，如果所有表看起来都一样，这应该可以。

```
 $('*:contains("www.url.com")').find('table:first').attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T13:20:17.920

```
var tableId = $('*:contains("www.url.com")').closest('.box').find('table').attr('id'); 
```

# java - 如何使用 ASM 来欺骗 HelloWorld.scala？加载到 JVM 但找不到？

> ID：13990918
> 
> 赞同：1
> 
> 时间：2012-12-21T13:16:31.547
> 
> 标签：java, scala, classloader, java-bytecode-asm

我使用自定义类加载器将 ASM 与 java 一起使用，但在 scala 中做同样的事情时遇到了麻烦。首选方法是什么？

A`HelloScala.scala`编译成*两个*类（`HelloScala.class` *和* `HelloScala$.class`）。我需要欺骗两者的字节码吗？

我的代码似乎只填充了一个 , `HelloScala$.class`，但没有公共构造函数或方法。我可以使用 Reflection API 并使用 Constructor 来获取访问权限，但有两个问题：

1.  通过忽略`HelloScala.class`，我是否错过了任何有价值的东西？
2.  这是危险的还是臭的？

“正确”的方法可能是调用 public, static `main`in `HelloScala`，但我得到这个错误：

```
[Loaded HelloScala from __JVM_DefineClass__]
[Loaded scala.ScalaObject from file:/home/julianpeeters/asm-scala-example/lib/scala-library-2.9.1.jar]
[Loaded HelloScala$ from __JVM_DefineClass__]
[Loaded sun.reflect.NativeMethodAccessorImpl from /usr/lib/jvm/java-6-openjdk/jre/lib/rt.jar]
[Loaded sun.reflect.DelegatingMethodAccessorImpl from /usr/lib/jvm/java-6-openjdk/jre/lib/rt.jar]
[Loaded java.lang.reflect.InvocationTargetException from /usr/lib/jvm/java-6-openjdk/jre/lib/rt.jar]
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at HelloScalaDump.main(HelloScalaDump.java:41)
Caused by: java.lang.NoClassDefFoundError: HelloScala$
    at HelloScala.main(Unknown Source)
    ... 5 more
Caused by: java.lang.ClassNotFoundException: HelloScala$
    at java.lang.ClassLoader.findClass(ClassLoader.java:373)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 6 more 
```

似乎`HelloScala$`正在加载，为什么找不到呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:20:34.377

Scala 使用了很多技巧来将其语义映射到 JVM。因此，您会在字节码级别看到很多意想不到的事情。我认为您必须接受它并深入了解 scala 编译器如何使用 Java 结构。

一个类由它的名称和加载该类的类加载器（调用定义方法的类）来标识。你确定加载 HelloScala 的加载器实际上也加载了 HelloScala$ 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:38:23.053

这对我有用，调用`dump()`每个类的“转储”文件中的方法来使用上下文的 ClassLoader 而不是自定义类加载器加载类（因此被欺骗的类可以访问与项目其余部分相同的类路径）：

```
import java.lang.reflect.*;

public class DumpLoader {

  public static void main(String[] args) throws Exception {
     Class<?> c$ = loadClass("HelloScala$", HelloScala$Dump.dump()); //First load the "anonymous" class
     Class<?> c = loadClass("HelloScala", HelloScalaDump.dump());   //Then load the "real" class
     try {
       Method mainMethod = c.getMethod("main", String[].class);  //Get the main method of the "real" class
       mainMethod.invoke(null, (Object) new String[]{});        //and invoke it to run the spoofed program
     } catch (Exception e) {
      e.printStackTrace();
      System.exit(1);
     }
  }

  private static Class loadClass(String className, byte[] b) {
    //override classDefine (as it is protected) and define the class.
    Class<?> clazz = null;
    try {
     // ClassLoader loader = ClassLoader.getSystemClassLoader();
      ClassLoader loader = Thread.currentThread().getContextClassLoader();
      Class<?> cls = Class.forName("java.lang.ClassLoader");
      Method method = cls.getDeclaredMethod("defineClass", new Class[] { String.class, byte[].class, int.class, int.class });

      // protected method invocaton
      method.setAccessible(true);
      try {
        Object[] args = new Object[] { className, b, new Integer(0), new Integer(b.length)};
        clazz = (Class) method.invoke(loader, args);
      } finally {
        method.setAccessible(false);
      }
    } catch (Exception e) {
      e.printStackTrace();
      System.exit(1);
    }
    return clazz;
  }

} 
```

# c# - #if 预处理器指令，用于除 DEBUG 之外的指令

> ID：13990919
> 
> 赞同：42
> 
> 时间：2012-12-21T13:16:33.663
> 
> 标签：c#, .net, preprocessor-directive

我知道我可以通过执行以下操作使用预处理器指令来检查 Debug/Release：

```
#if DEBUG
    //debug mode
#elif
    //release mode
#endif 
```

但是如何检查其他配置，例如测试。在 VB 中，您可以这样做：

```
#If CONFIG = "Release" Then
    'Release mode
#ElseIf CONFIG = "Test" Then
    'Test mode
#ElseIf CONFIG = "Debug" Then
    'Debug mode
#End If 
```

所以，我的问题是在 C# 中，如何检查测试模式？如果我在调试和测试中，但不是在发布模式下，我有一些想要执行的代码，所以具体来说，我需要一种方法来检查是否不在发布模式下。在VB中我会这样做：

```
#If Not CONFIG = "Release" Then
    'Do something here for every configuration that is not Release
#End If 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-21T13:23:45.280

它与 DEBUG 相同，***假设您已经定义了`TEST`***在“条件编译符号”文本框中列出的构建配置（在项目属性 > 构建选项卡下；这是一个以空格分隔的列表）。

对于您只想在 TEST 构建配置中运行的代码：

```
#if TEST
// ...
#endif 
```

对于您不想在 TEST 构建配置中运行的代码，您可以`#else`执行上述操作，也可以执行以下操作：

```
#if !TEST
// ...
#endif 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-25T01:37:12.500

右键单击要使用自定义预编译器指令的项目 [项目名称] 名称。

转到属性项，然后转到构建选项卡。

那么您需要在文本框中添加您的自定义指令。例如，我添加了“本地”作为我的自定义指令，见下图

![在此处输入图像描述](../Images/a5492656dea33bc11137976eec4d0c08.png)

现在您可以使用新的编译器指令，如下所示（在 C# 中）

```
 #if **Local**
    //TODO:Add your c# code here
  #endif 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T13:45:07.077

有几种方法可以处理您的保理。在我的世界里，我们使用了四种主要技术：

1.  编译器标志 ( `#if`)
2.  部分类
3.  单独的实现
4.  运行时决策

例如，我们为具有非托管代码的 C#、具有所有托管代码的 C#、针对 silverlight 的 C# 构建配置。在 C# 非托管项目中，我们有一个编译时符号`UNMANAGED`，对于 C#，我们有`MANAGED`，对于 silverlight，我们有`SILVERLIGHT`。这让我可以将小任务注入代码并在所有项目中共享相同的文件。没什么大不了。

对于部分类，我们为每个具有边缘代码实现的项目提供单独的 .cs 文件。这被用于我们无法通过将抽象类作为父类来完成这项工作的情况，该类具有大部分实现，然后是每个目标的具体类中的边缘代码。这工作得很好。

对于单独的实现，我们承认代码库之间几乎没有什么可以共享的，我们最好使用单独的代码。这并不理想，但就这样吧。

对于运行时检查，就是这样。不是`DEBUG`在 a中检查`#if`，而是使用运行时检查设置来做出选择。除非你有非常巨大的调试脚手架，否则这不是一个糟糕的选择，因为它还可以让你进行现场调试（但你可能有阻止它的交付限制）。

就个人而言，我尽量避免编译器标志。它们使代码更难阅读。不过，老实说，有时它们是有意义的。我们有一些类，因为类声明（我认为 ObservableCollection 不可用）而无法在 silverlight 中编译，我们必须从其他东西继承。其他一切都很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-30T09:13:26.507

简单的答案是

*   转到项目-> [项目名称] 属性-> 构建
*   设置选中 [] 定义 DEBUG

现在您可以使用 DEBUG 前置指令，例如

```
#if DEBUG
...
#else
...
#endif 
```

# php - 将 Android 平板电脑连接到 Web 服务

> ID：13990923
> 
> 赞同：0
> 
> 时间：2012-12-21T13:16:54.990
> 
> 标签：php, android, web-services, wamp

我正在尝试将我的平板电脑连接到我的 WAMP 服务器中的 Web 服务。我试过做我读过的所有东西，但没有运气连接它。Web 服务从 SQL Server 读取数据并将其显示在应用程序中。目前，这就是它需要做的所有事情。我有一个从教程中遵循的代码，以便我可以执行异步任务，但它仍然没有帮助。这是代码：

```
package com.example.secondtestsqlserver;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {
    private ProgressDialog pDialog;
    JSONParser jsonParser = new JSONParser();
    String pid;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
        .detectAll()
        .penaltyLog()
        .penaltyDialog()
        .build());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void clickSend(View view) {
        new TestWS().execute();
    }
    class TestWS extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Loading product details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        protected String doInBackground(String... params) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("pid", pid));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                "http://170.54.162.239:80/webservice.php", "GET", params);

                        // check your log for json response
                        Log.d("Single Record Details", json.toString());

                        // json success tag
                        success = json.getInt("success");
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json.getJSONArray("master"); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);

                            // product with this pid found
                            // Edit Text
                            EditText txtName = (EditText) findViewById(R.id.txtName);
                            EditText txtPrice = (EditText) findViewById(R.id.txtTest);

                            // display product data in EditText
                            txtName.setText(product.getString("test"));
                            txtPrice.setText(product.getString("name"));
//                            Log.e("Checking", product.getString("test"));
//                            Log.e("Checking", product.getString("name"));
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    }
} 
```

这是 JSONParser 类

```
package com.example.secondtestsqlserver;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            Log.e("Unsupported Encoding", Log.getStackTraceString(e));
        } catch (ClientProtocolException e) {
            Log.e("Client Protocol", Log.getStackTraceString(e));
        } catch (IOException e) {
            Log.e("IO Exception", Log.getStackTraceString(e));
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
            System.out.println(e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
            Log.e("JSON Parser", json);
        }

        // return JSON String
        return jObj;

    }
} 
```

这就是 PHP Web 服务

```
<?php
    $serverName = "localhost\SQLExpress";
    $connectionOptions = array("Database"=>"Android");
    $conn = sqlsrv_connect($serverName, $connectionOptions);

/*  if ($conn)
    {
        echo "Connection established.<br />";
    }
    else
    {
        echo "Connection could not be established.<br />";
        die(print_r(sqlsrv_errors(), true));
    }*/

    $query = "SELECT * FROM AndroidTest;";

    $result = sqlsrv_query($conn, $query, array(), array("Scrollable" => SQLSRV_CURSOR_KEYSET));
    $master = array();
    if (sqlsrv_num_rows($result)) {
        $master["record"] = array();
        while ($posts = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {
            $record = array();
            $record["test"] = $posts["test"];
            $record["name"] = $posts["name"];

            array_push($master["record"], $record);
        }
        $master["success"] = 1;
    }
    else {
        $master["success"] = 0;
        $master["message"] = "No products found";
    }
    header('Content-trype: application/json');
    echo json_encode($master);
    sqlsrv_close($conn);
?> 
```

我确实知道 PHP 是正确的，因为它为我提供了我想要的数据，但是该应用程序在我的平板电脑中不起作用，在模拟器中也不起作用。另外，请注意，在 MainActivity 类中，我使用了 StrictMode.setThreadPolicy()。这是因为我读到当我得到 onNetworkMainThreadException 时，即使它不安全，这通常也能解决问题。当然，在我找出无法连接的原因之后，我打算更改它。错误是这个：

```
12-21 09:03:45.049: E/IO Exception(25431): org.apache.http.conn.HttpHostConnectException: Connection to http://170.54.162.239:80 refused
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:183)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-21 09:03:45.049: E/IO Exception(25431):  at com.example.secondtestsqlserver.JSONParser.makeHttpRequest(JSONParser.java:62)
12-21 09:03:45.049: E/IO Exception(25431):  at com.example.secondtestsqlserver.MainActivity$TestWS$1.run(MainActivity.java:75)
12-21 09:03:45.049: E/IO Exception(25431):  at android.os.Handler.handleCallback(Handler.java:615)
12-21 09:03:45.049: E/IO Exception(25431):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-21 09:03:45.049: E/IO Exception(25431):  at android.os.Looper.loop(Looper.java:137)
12-21 09:03:45.049: E/IO Exception(25431):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-21 09:03:45.049: E/IO Exception(25431):  at java.lang.reflect.Method.invokeNative(Native Method)
12-21 09:03:45.049: E/IO Exception(25431):  at java.lang.reflect.Method.invoke(Method.java:511)
12-21 09:03:45.049: E/IO Exception(25431):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-21 09:03:45.049: E/IO Exception(25431):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-21 09:03:45.049: E/IO Exception(25431):  at dalvik.system.NativeStart.main(Native Method)
12-21 09:03:45.049: E/IO Exception(25431): Caused by: java.net.ConnectException: failed to connect to /170.54.162.239 (port 80): connect failed: ENETUNREACH (Network is unreachable)
12-21 09:03:45.049: E/IO Exception(25431):  at libcore.io.IoBridge.connect(IoBridge.java:114)
12-21 09:03:45.049: E/IO Exception(25431):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
12-21 09:03:45.049: E/IO Exception(25431):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
12-21 09:03:45.049: E/IO Exception(25431):  at java.net.Socket.connect(Socket.java:842)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
12-21 09:03:45.049: E/IO Exception(25431):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
12-21 09:03:45.049: E/IO Exception(25431):  ... 17 more
12-21 09:03:45.049: E/IO Exception(25431): Caused by: libcore.io.ErrnoException: connect failed: ENETUNREACH (Network is unreachable)
12-21 09:03:45.049: E/IO Exception(25431):  at libcore.io.Posix.connect(Native Method)
12-21 09:03:45.049: E/IO Exception(25431):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
12-21 09:03:45.049: E/IO Exception(25431):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
12-21 09:03:45.049: E/IO Exception(25431):  at libcore.io.IoBridge.connect(IoBridge.java:112)
12-21 09:03:45.049: E/IO Exception(25431):  ... 22 more
12-21 09:03:45.049: E/Buffer Error(25431): Error converting result java.lang.NullPointerException
12-21 09:03:45.049: E/JSON Parser(25431): Error parsing data org.json.JSONException: End of input at character 0 of 
12-21 09:03:45.049: E/AndroidRuntime(25431): FATAL EXCEPTION: main
12-21 09:03:45.049: E/AndroidRuntime(25431): java.lang.NullPointerException
12-21 09:03:45.049: E/AndroidRuntime(25431):    at com.example.secondtestsqlserver.MainActivity$TestWS$1.run(MainActivity.java:79)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at android.os.Handler.handleCallback(Handler.java:615)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at android.os.Looper.loop(Looper.java:137)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at android.app.ActivityThread.main(ActivityThread.java:4745)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at java.lang.reflect.Method.invokeNative(Native Method)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at java.lang.reflect.Method.invoke(Method.java:511)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-21 09:03:45.049: E/AndroidRuntime(25431):    at dalvik.system.NativeStart.main(Native Method) 
```

我不会问我是否还没有尝试过我在这里找到的所有东西以及我在互联网上找到的所有东西。我需要尽快完成这项工作，所以请您给我任何帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:39:42.143

这似乎是根本原因：

```
failed to connect to /170.54.162.239 (port 80): connect failed: ENETUNREACH (Network is unreachable) 
```

因此，请确保您的服务正在那里运行，并且可以从您的平板电脑访问。（也许尝试从服务器获取 HTML 页面以确保您有连接）

# c# - 在动态列表框中如何获得多项选择项？

> ID：13990924
> 
> 赞同：0
> 
> 时间：2012-12-21T13:16:57.813
> 
> 标签：c#, winforms

```
private void Form1_Load(object sender, EventArgs e)
{
    int x = 0, y = 0;
    var list = GetFilterItems().Select(g => g.GroupID).Distinct();
    ListBox lst;
    foreach (var item in list)
    {
        lst  = new ListBox();
        lst.Size = new Size(161, 82);
        lst.Name = item.ToString();
        lst.SelectionMode = SelectionMode.MultiExtended;

        lst.Location = new Point(x,y+25);

        pnlFilters.Controls.Add(lst);
        lst.Click += new EventHandler(lst_Click);
        x += lst.Width+5;
    }             
}

void lst_Click(object sender, EventArgs e)
{           
    ItemChanged(sender);
}

private void ItemChanged(object sender)
{
    // Get the selected ListBox
    ListBox selectedListViewControl = (ListBox)sender;

    // Get the ListBox's items
    List<FilterItem> currentFilterItems = selectedListViewControl.Items.Cast<FilterItem>().ToList();

    // Get the ListBox's selected items
    List<FilterItem> selectedFilterItems = selectedListViewControl.SelectedItems.Cast<FilterItem>().ToList();
} 
```

在上面的代码中，即使我从列表框中选择多个项目，我也只有 1 个选定项目 如何获取多个项目表单列表框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:05:01.473

只需创建一个列表框，然后将所有项目添加到这个列表框

然后多选工作

# php - 如何在constants.php中的codeigniter中定义全局常量

> ID：13990926
> 
> 赞同：8
> 
> 时间：2012-12-21T13:17:02.180
> 
> 标签：php, codeigniter, constants

我已将全局常量存储在 config->constants.php 中，但它会产生问题并抛出错误我已经这样定义它，如何在控制器中调用它， **代码**

```
define('SuperAdmin','1');
define('Admin','2');
define('CityAdmin' '3');
define('SupportAdmin','4');
define('RestaurantUser','5');
define('FrontUser','6');
define('Other','7'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T13:45:34.037

您不需要在任何地方加载常量，它们会由 CI 本身自动加载，这就是它们的重点。要使用它们，请记住它们是常量，而不是您习惯使用 $ 的变量。因此，在您定义它们之后，您可以在应用程序中的任何位置使用：

```
if($user->userType == SuperAdmin)
{
   do something here;
} 
```

请注意，SuperAdmin 前面没有 $ 并且不在引号内。同样，在常量文件中定义它们之后，您无需执行任何其他操作即可开始在应用程序中使用它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-09T09:51:20.210

首先使用必须以大写字母定义常量的约定。喜欢

```
define('SUPERADMIN','1');
define('ADMIN','2');
define('CITYADMIN' '3'); 
```

您可以使用控制器中的常量，例如

```
if($user->userType == SUPERADMIN)
{
   //Your code ...
} 
```

如果你想在 codeigniter 中使用 html 文件/视图文件，你可以在 html 文件中使用常量，比如

```
<?php echo SUPERADMIN; ?> 
```

您可以通过这种方式访问​​常量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-24T12:38:45.663

始终遵循仅大写字母的常量命名约定。如果您在 application/config/constants.php 文件中声明了常量，那么它将在您的应用程序中可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T13:22:57.510

这是在 中定义全局常量的正确方法`config->constants.php`。您能否提供有关您面临的错误的详细信息以及您尝试使用这些变量的代码。请记住，这些变量不需要`$`使用符号。喜欢它可以用作`$a = SuperAdmin`不作为`$a = $SuperAdmin`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T10:22:00.577

```
You may utilise config file (system/application/config/config.php) to set configuration related variables.

Or use constant file (system/application/config/constants.php) to store site preference constants. 
```

# .net - 使用 Reflection.Emit 从另一个对象获取属性值

> ID：13990940
> 
> 赞同：5
> 
> 时间：2012-12-21T13:18:14.367
> 
> 标签：.net, reflection.emit

这是我第一次尝试使用 Reflection.Emit。我正在为提供的对象动态构建代理。代理将任何**公共**属性访问传递给提供的对象。我收到的错误是：

> 对象“ProxyObject”上的属性访问器“AccessorName”引发以下异常：尝试通过方法“ProxyObject.get_AccessorName()”访问方法“NS.CoreObject.get_AccessorName() 失败。

根据我的假设和收集，这将是由于自动生成的属性 getter 方法是私有的和隐藏的。但是我如何使用 a 来解决这个问题`MethodBuilder`？

根据[Create DynamicMethod 的帖子为属性赋值？](https://stackoverflow.com/questions/4588175/create-dynamicmethod-to-assign-value-to-a-property)，您可以通过将方法声明为与目标模块“关联”来使用 DynamicMethod 来做到这一点，但我需要构建一个完整的类。是否存在可以通过 Reflection.Emit 实现的等效“关联”？

这是我正在尝试执行的一项基本操作，所以我确信这是我不知道的简单直接的操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T13:29:19.577

与`MethodBuilder`: 你不能。您必须遵守通常的可访问性规则。但是，您可以通过 作弊`DynamicMethod`，这允许您假装（如果您有足够的访问权限）您正在创建的方法实际上是*给定类型*（或给定模块等）的静态方法。这意味着您*可以*自由访问私有状态，例如：

```
using System;
using System.Reflection;
using System.Reflection.Emit;

public class Foo
{
    public Foo(int bar)
    {
        Bar = bar;
    }
    private int Bar { get; set; }
}
static class Program {
    static void Main()
    {
        var method = new DynamicMethod("cheat", typeof(int),
            new[] { typeof(object) }, typeof(Foo), true);
        var il = method.GetILGenerator();
        il.Emit(OpCodes.Ldarg_0);
        il.Emit(OpCodes.Castclass, typeof(Foo));
        il.Emit(OpCodes.Callvirt, typeof(Foo).GetProperty("Bar",
            BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic
            ).GetGetMethod(true));
        il.Emit(OpCodes.Ret);
        var func = (Func<object, int>)method.CreateDelegate(
            typeof(Func<object, int>));

        var obj = new Foo(123);
        Console.WriteLine(func(obj));
    }
} 
```

如果您*只是*获取属性的值，还应注意`Delegate.CreateDelegate`可以通过 getter 方法自动执行相同的操作：

```
var method = typeof(Foo).GetProperty("Bar",
    BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic)
    .GetGetMethod(true);
var func = (Func<Foo, int>)
    Delegate.CreateDelegate(typeof(Func<Foo, int>), method); 
```

# java - 如何将十六进制字符串转换为 Java 字符串？

> ID：13990941
> 
> 赞同：51
> 
> 时间：2012-12-21T13:18:23.380
> 
> 标签：java, string, hex

出于记录目的，我们将日志转换为字节数组，然后转换为十六进制字符串。我想用 Java 字符串取回它，但我做不到。

日志文件中的十六进制字符串看起来像

```
fd00000aa8660b5b010006acdc0100000101000100010000 
```

我该如何解码？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-21T13:30:13.307

[`Hex`](http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Hex.html)在 Apache Commons 中使用：

```
String hexString = "fd00000aa8660b5b010006acdc0100000101000100010000";    
byte[] bytes = Hex.decodeHex(hexString.toCharArray());
System.out.println(new String(bytes, "UTF-8")); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-02-19T15:53:44.083

```
byte[] bytes = javax.xml.bind.DatatypeConverter.parseHexBinary(hexString);
String result= new String(bytes, encoding); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-04-05T04:35:06.567

您可以从`String (hex)`到`byte array`到`String as UTF-8(?)`。*确保您的十六进制字符串没有前导空格和内容*。

```
public static byte[] hexStringToByteArray(String hex) {
    int l = hex.length();
    byte[] data = new byte[l / 2];
    for (int i = 0; i < l; i += 2) {
        data[i / 2] = (byte) ((Character.digit(hex.charAt(i), 16) << 4)
                + Character.digit(hex.charAt(i + 1), 16));
    }
    return data;
} 
```

用法：

```
String b = "0xfd00000aa8660b5b010006acdc0100000101000100010000";
byte[] bytes = hexStringToByteArray(b);
String st = new String(bytes, StandardCharsets.UTF_8);
System.out.println(st); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-21T13:21:14.027

首先读取数据，然后将其转换为字节数组：

```
 byte b = Byte.parseByte(str, 16); 
```

然后使用`String`构造函数：

```
new String(byte[] bytes) 
```

或者如果字符集不是系统默认值，那么：

```
new String(byte[] bytes, String charsetName) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-02T06:16:20.153

试试下面的代码：

```
public static byte[] decode(String hex){

        String[] list=hex.split("(?<=\\G.{2})");
        ByteBuffer buffer= ByteBuffer.allocate(list.length);
        System.out.println(list.length);
        for(String str: list)
            buffer.put(Byte.parseByte(str,16));

        return buffer.array();

} 
```

要转换为字符串，只需使用解码方法返回的 byte[] 创建一个新字符串。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-04-01T13:35:01.253

将十六进制字符串转换为 java 字符串的另一种方法：

```
public static String unHex(String arg) {        

    String str = "";
    for(int i=0;i<arg.length();i+=2)
    {
        String s = arg.substring(i, (i + 2));
        int decimal = Integer.parseInt(s, 16);
        str = str + (char) decimal;
    }       
    return str;
} 
```

# c# - 使用可恢复上传将视频添加到播放列表

> ID：13990945
> 
> 赞同：0
> 
> 时间：2012-12-21T13:18:39.267
> 
> 标签：c#, youtube-api

有谁知道使用可恢复上传时如何将视频添加到播放列表？

让我说清楚。下面是我的代码。

```
Video newVideo = new Video();
newVideo.Title = fileName.Split(".".ToCharArray())[0];
newVideo.Tags.Add(new MediaCategory("Nonprofit", YouTubeNameTable.CategorySchema));
newVideo.Description = DateTime.Now.ToShortDateString();
newVideo.YouTubeEntry.Private = false;
ResumableUploader m_ResumableUploader = null;
Authenticator YouTubeAuthenticator;

m_ResumableUploader = new ResumableUploader(100); //chunksize 1 MB
m_ResumableUploader.AsyncOperationCompleted += new AsyncOperationCompletedEventHandler(m_ResumableUploader_AsyncOperationCompleted);
m_ResumableUploader.AsyncOperationProgress += new AsyncOperationProgressEventHandler(m_ResumableUploader_AsyncOperationProgress);

YouTubeAuthenticator = new ClientLoginAuthenticator("YouTubeUploader", ServiceNames.YouTube, ConfigurationManager.AppSettings["USERNAME"].ToString(), ConfigurationManager.AppSettings["PASSWORD"].ToString());

YouTubeAuthenticator.DeveloperKey = ConfigurationManager.AppSettings["DEVELOPER_KEY"].ToString();
string contentType = MediaFileSource.GetContentTypeForFileName(fileName);
newVideo.MediaSource = new MediaFileSource(filePath, contentType);

AtomLink link = new AtomLink("http://uploads.gdata.youtube.com/resumable/feeds/api/users/<username>/uploads");
link.Rel = ResumableUploader.CreateMediaRelation;
newVideo.YouTubeEntry.Links.Add(link);

System.IO.FileStream stream = new System.IO.FileStream(filePath, System.IO.FileMode.Open, System.IO.FileAccess.Read);

m_ResumableUploader.InsertAsync(YouTubeAuthenticator, newVideo.YouTubeEntry, new object()); 
```

我正在尝试将视频直接上传到播放列表。

我正在查看这段代码，我很难将两者联系起来。需要帮忙。

[https://developers.google.com/youtube/2.0/developers_guide_dotnet](https://developers.google.com/youtube/2.0/developers_guide_dotnet)

将视频添加到播放列表

您可以使用 PlayListMember 对象将视频添加到播放列表。以下代码创建一个具有已知 ID 值的 PlayListMember 对象，然后将其添加到 Playlist 对象 (p)。由于请求未指定视频将出现在播放列表中的位置，因此新视频将添加到播放列表的末尾。

```
 // For Playlist object p
 PlayListMember pm = new PlayListMember();
 // Insert <id> or <videoid> for video here
 pm.Id = VIDEOID;
 request.AddToPlaylist(p, pm); 
```

**更新 1 - 添加到播放列表时出现“不支持的 URI 格式”错误。**

```
YouTubeRequestSettings ys = new YouTubeRequestSettings("YouTubeUploader",
ConfigurationManager.AppSettings["DEVELOPER_KEY"].ToString());
YouTubeRequest ytr = new YouTubeRequest(ys);
Video v = ytr.ParseVideo(e.ResponseStream);                  
PlayListMember pm = new PlayListMember();
Feed<Playlist> userPlaylists = ytr.GetPlaylistsFeed(ytr.Credentials.Username);
foreach (Playlist p in userPlaylists.Entries)
{
     fs.WriteLine(p.Title);
     if (p.Title == "Test 2")
     {
          pm.Id = v.VideoId;
          ytr.AddToPlaylist(p, pm);

          fs.WriteLine("Added To Playlist ");
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:56:25.840

我想到了。YouTube 上的代码有错误。它告诉您将 PlayListMember id 设置为 VIDEOID。

```
 // For Playlist object p
 PlayListMember pm = new PlayListMember();
 // Insert <id> or <videoid> for video here
 pm.Id = VIDEOID;
 request.AddToPlaylist(p, pm); 
```

这是不正确的。您需要将 VIDEOID 设置为 PlayListMember VideoID

```
 // For Playlist object p
 PlayListMember pm = new PlayListMember();
 // Insert <id> or <videoid> for video here
 pm.VideoId = VIDEOID;
 request.AddToPlaylist(p, pm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:33:00.073

链接这两个操作的是视频 ID。您需要从第一部分（上传）获取视频 ID，并将其提供给第二部分（播放列表插入）。所以问题归结为在使用 .NET 客户端库执行可恢复上传时如何获取新视频的视频 ID。

我认为这个示例代码专门处理这个问题：[http ://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/YouTubeUploader/YouTubeUploader/insertandretry.cs#169](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/YouTubeUploader/YouTubeUploader/insertandretry.cs#169)

# android - 是否有任何有效的类可以从互联网加载大量图像

> ID：13990953
> 
> 赞同：0
> 
> 时间：2012-12-21T13:19:34.787
> 
> 标签：android

嗨，任何人都可以向我推荐一个有助于加载大量图像的类，这些图像还可以处理缓存和磁盘缓存

我使用了 ImageLoder 类，但加载所有图像效率不高，我收到**VMEXCEED 错误**

我的课在下面

```
 public class ImageLoader1 {

String Url1;
// the simplest in-memory cache implementation. This should be replaced with
// something like SoftReference or BitmapOptions.inPurgeable(since 1.6)
public HashMap<String, Bitmap> cache = new HashMap<String, Bitmap>();

private File cacheDir;

public ImageLoader1(Context context, String Url) {
    // Make the background thead low priority. This way it will not affect
    // the UI performance
    photoLoaderThread.setPriority(Thread.NORM_PRIORITY - 1);
    Url1 = Url;
    // Find the dir to save cached images
    if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
        cacheDir = new File(android.os.Environment.getExternalStorageDirectory(), "LazyList");
    else
        cacheDir = context.getCacheDir();
    if (!cacheDir.exists())
        cacheDir.mkdirs();
}

final int stub_id = R.drawable.placeholder;

// ----Method for Displaying image
public void DisplayImage(String url, Activity activity, ImageView imageView) {
    if (cache.containsKey(url)) {
        // ---Sets a Bitmap as the content of this ImageView.
        imageView.setImageBitmap(cache.get(url));
    } else {
        queuePhoto(url, activity, imageView);
        // imageView.setImageResource(stub_id);
    }
}

public void DisplayImage1(String url, ImageView imageView) {
    if (cache.containsKey(url))
        // ---Sets a Bitmap as the content of this ImageView.
        imageView.setImageBitmap(cache.get(url));
    else {
        queuePhoto1(url, imageView);
        // imageView.setImageResource(stub_id);
    }
}

private void queuePhoto(String url, Activity activity, ImageView imageView) {
    // This ImageView may be used for other images before. So there may be
    // some old tasks in the queue. We need to discard them.
    photosQueue.Clean(imageView);
    PhotoToLoad p = new PhotoToLoad(url, imageView);
    synchronized (photosQueue.photosToLoad) {
        photosQueue.photosToLoad.push(p);
        photosQueue.photosToLoad.notifyAll();
    }

    // start thread if it's not started yet
    if (photoLoaderThread.getState() == Thread.State.NEW)
        photoLoaderThread.start();
}

private void queuePhoto1(String url, ImageView imageView) {
    // This ImageView may be used for other images before. So there may be
    // some old tasks in the queue. We need to discard them.
    photosQueue.Clean(imageView);
    PhotoToLoad p = new PhotoToLoad(url, imageView);
    synchronized (photosQueue.photosToLoad) {
        photosQueue.photosToLoad.push(p);
        photosQueue.photosToLoad.notifyAll();
    }

    // start thread if it's not started yet
    if (photoLoaderThread.getState() == Thread.State.NEW)
        photoLoaderThread.start();
}

private Bitmap getBitmap(String url) {
    // I identify images by hashcode. Not a perfect solution, good for the
    // demo.
    String filename = String.valueOf(url.hashCode());
    File f = new File(cacheDir, filename);

    // from SD cache
    Bitmap b = decodeFile(f);
    if (b != null)
        return b;

    // from web
    try {
        Bitmap bitmap = null;
        InputStream is = new URL(url).openStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex) {
        ex.printStackTrace();
        return null;
    }
}

// decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f) {
    try {
        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 50;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale++;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }
    return null;
}

// Task for the queue
private class PhotoToLoad {
    public String url;
    public ImageView imageView;

    public PhotoToLoad(String u, ImageView i) {
        url = u;
        imageView = i;
    }
}

PhotosQueue photosQueue = new PhotosQueue();

// ---Method for stopping thread
public void stopThread() {
    photoLoaderThread.interrupt();
}

// stores list of photos to download
class PhotosQueue {
    private Stack<PhotoToLoad> photosToLoad = new Stack<PhotoToLoad>();

    // removes all instances of this ImageView
    public void Clean(ImageView image) {
        for (int j = 0; j < photosToLoad.size();) {
            if (photosToLoad.get(j).imageView == image)
                photosToLoad.remove(j);
            else
                ++j;
        }
    }
}

// ----class for photoLoading
class PhotosLoader extends Thread {
    public void run() {
        try {
            while (true) {
                // thread waits until there are any images to load in the
                // queue
                if (photosQueue.photosToLoad.size() == 0)
                    synchronized (photosQueue.photosToLoad) {
                        photosQueue.photosToLoad.wait();
                    }
                if (photosQueue.photosToLoad.size() != 0) {
                    PhotoToLoad photoToLoad;
                    synchronized (photosQueue.photosToLoad) {
                        photoToLoad = photosQueue.photosToLoad.pop();
                    }
                    Bitmap bmp = getBitmap(photoToLoad.url);
                    cache.put(photoToLoad.url, bmp);
                    if (((String) photoToLoad.imageView.getTag()).equals(photoToLoad.url)) {
                        BitmapDisplayer bd = new BitmapDisplayer(bmp, photoToLoad.imageView);
                        Activity a = (Activity) photoToLoad.imageView.getContext();
                        a.runOnUiThread(bd);
                    }
                }
                if (Thread.interrupted())
                    break;
            }
        } catch (InterruptedException e) {
            // allow thread to exit
        }
    }
}

PhotosLoader photoLoaderThread = new PhotosLoader();

// Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable {
    Bitmap bitmap;
    ImageView imageView;

    public BitmapDisplayer(Bitmap b, ImageView i) {
        bitmap = b;
        imageView = i;
    }

    public void run() {
        if (bitmap != null)
            imageView.setImageBitmap(bitmap);
        // else
        // imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    // clear memory cache
    cache.clear();

    // clear SD cache
    File[] files = cacheDir.listFiles();
    for (File f : files)
        f.delete();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T13:36:44.957

您可以使用[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)加载大量图像。

[补充1]

看下面的示例项目，它获取联系人的图像并加载到列表视图。它将让您了解通用图像加载器的用法。

[https://dl.dropbox.com/u/68130108/UniversalImageLoaderExample.rar](https://dl.dropbox.com/u/68130108/UniversalImageLoaderExample.rar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:54:49.130

正如 talhakosen 所说，使用[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

只需下载它的**JAR**文件添加到您的**libs**文件夹中创建实例`ImageLoader`

例如：

```
ImageLoader imgLoader = ImageLoader.getInstance();
imgLoader.displayImage(url,imageView); 
```

# mysql - 取消分组时 SUM 中的错误

> ID：13990959
> 
> 赞同：1
> 
> 时间：2012-12-21T13:20:01.537
> 
> 标签：mysql, sql, group-by

我有一个查询，它返回来自客户的发货的 SUM 值及其分组`shipment_id`。值是正确的。

```
SELECT SUM(DISTINCT((article.unit_price * article.tax)*shipment.amount)) as subtotal 
  FROM shipment 
 INNER JOIN customer ON customer.customer_id = shipment.customer_id 
 INNER JOIN article ON shipment.article_id = article.article_id 
 WHERE shipment.type_id = 2 
   AND shipment.customer_id = 947 
 GROUP BY shipment.shipment_id 
```

当我删除 GROUP BY 以从客户那里获取总值时，返回的值不正确。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:03:53.890

您的联接有问题。我想不出`sum(distinct )`在查询中有意义的情况。您使用不正确。发生的情况是，您的货件中有重复的物品，并且货件中的值正常（可能只有一件货件）。但是，不同的货件具有完全相同的物品和相同的数量。distinct 会删除此类重复项。

解决方案很简单，只需删除`distinct`：

```
SELECT SUM((article.unit_price * article.tax)*shipment.amount) as subtotal 
FROM shipment INNER JOIN
     customer
     ON customer.customer_id = shipment.customer_id INNER JOIN
     article
     ON shipment.article_id = article.article_id 
WHERE shipment.type_id = 2 AND shipment.customer_id = 947 
```

# java - JSF ui：包括未正确呈现

> ID：13990965
> 
> 赞同：1
> 
> 时间：2012-12-21T13:20:14.667
> 
> 标签：java, jsf-2, facelets

我正在使用**JSF 2.1.8**实现一个 Web 应用程序，但我的**ui:include**标记有问题。我有这个代码

```
<h:panelGroup id="panelContenido">

        <ui:fragment rendered="#{!empty navigationManagerSystem._Navegable}">
            <ui:include src="#{navigationManagerSystem._Navegable._IncludePath}" />

        </ui:fragment>
        <ui:fragment rendered="#{empty navigationManagerSystem._Navegable}">
            <ui:include src="/system/navigation/error.xhtml" />
        </ui:fragment>
    </h:panelGroup> 
```

*navigationManagerSystem* bean 是 JSF 会话管理的，当这段代码第一次渲染时，它应该显示包含路径内容。如果我在这样的常量中执行此包含，`<ui:include /system/home/index.xhtml" />`但如果我将其放入变量中则不起作用，即使我已经看到该变量在屏幕打印之前保持该值。我不知道它是否与持有 /system/home/index.xhtml 页面的 bean 相关，即**View Scoped**。

无论如何，如果我在页面渲染后进行页面刷新，则 xthml 已正确包含。顺便说一句，我已经简化了要包含的页面，以便没有任何 jstl 标记，因为我知道它们会导致 View Scope 出现问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T14:54:02.267

至于问题的原因，`<ui:include>`在视图构建时间（恢复视图阶段）而不是在视图渲染时间（渲染响应阶段）运行，正如您所期望的那样。因此，如果包含路径在例如调用操作阶段甚至呈现响应阶段发生变化，那么除非完全重建，否则它不会反映在视图中。

目前，最好的办法是使用多个静态`<ui:include>`标签，每个标签在视图渲染期间都有条件地渲染。没错，这最终会导致不必要的大组件树。这个问题仍然没有“圣杯”解决方案。问题很清楚，但鉴于 JSF/Facelets 生命周期，解决方案很难。我也为 OmniFaces 做了一些实验，但是最简单的尝试在 MyFaces 中失败了，而它在 Mojarra 中（在一定程度上）有效。

### 也可以看看：

*   [如何通过导航菜单 ajax-refresh 动态包含内容？(JSF SPA)](https://stackoverflow.com/questions/7108668/how-to-ajax-refresh-the-main-content-part-by-navigation-menu)
*   [使用 <ui:include> 的动态 ajax 导航](https://stackoverflow.com/questions/13680192/dynamic-ajax-navigation-with-uiinclude)

# c# - 将新构造的控件传递给函数

> ID：13990969
> 
> 赞同：0
> 
> 时间：2012-12-21T13:20:31.740
> 
> 标签：c#, .net

我以这种方式向主控件添加新控件：

```
Controls.Add(new ComboBox()
{
    Text = "dsnfsdbfsdbfjsdbfsdjbfsmdfbsdbfsbf",
    Anchor = AnchorStyles.Left | AnchorStyles.Right,
    Width = DropDownWidth(/*Here should be smth. similar to "this" but for currently created combobox*/)
});

public int DropDownWidth(ComboBox myCombo)
{
    int maxWidth = 0, temp = 0;
    foreach (var obj in myCombo.Items)
    {
        temp = TextRenderer.MeasureText(obj.ToString(), myCombo.Font).Width;
        if (temp > maxWidth)
        {
            maxWidth = temp;
        }
    }
    return maxWidth;
} 
```

我想将新的组合框传递给函数并获得所需的宽度。

是否有一些类似于 的关键字`this`，但是对于我可以传递给函数的新创建的 ComboBox ？

**请**不要解决方法！我知道我可以先创建 Combobox，用属性填充它，然后在下一步中添加到控件。现在只有简短的形式很有趣。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:40:30.557

不可以。在实际创建对象之前，您不能使用对象的引用，从技术上讲，它不在对象初始化程序中，因为它是创建语句的一部分。在这种情况下*需要*“解决方法” 。

就像是...

```
var myTextArray = new[] { "Hi", "ho", "Christmas" }

Controls.Add(new ComboBox()
{
    Text = "dsnfsdbfsdbfjsdbfsdjbfsmdfbsdbfsbf",
    Anchor = AnchorStyles.Left | AnchorStyles.Right,
    Width = DropDownWidth(myTextArray, this.Font)
}); 
```

...`this`当然是您`Form`或其他父母在哪里`Control`。

修改后的`DropDownWidth`方法将类似于...

```
public int DropDownWidth(object[] objects, Font font)
{
    int maxWidth = 0, temp = 0;
    foreach (var obj in objects)
    {
        temp = TextRenderer.MeasureText(obj.ToString(), font).Width;
        if (temp > maxWidth)
        {
            maxWidth = temp;
        }
    }
    return maxWidth;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:36:36.740

你不能将它传递给函数，因为它还不存在

例如@J.Steen：

```
 public class CustomCombo : System.Windows.Forms.ComboBox
{
    private int _width;

    public int Width
    {
        get { return _width; }
        set { _width = value; }
    }

    public CustomCombo()
    {
        _width = getWidth(this);
    }
    public int getWidth(System.Windows.Forms.ComboBox combo)
    {
        //do stuff
        return 0;
    }
} 
```

# java - Apache CXF 2.x 选项未出现在 Eclipse Indigo 中的 Web 服务下

> ID：13990970
> 
> 赞同：3
> 
> 时间：2012-12-21T13:20:32.437
> 
> 标签：java, web-services, apache, cxf, eclipse-indigo

在 Eclipse 中的 Window > Preferences > Web Services 下，我看到的所有教程都显示了 Apache CXF 2.x 的选项。从那里，他们添加运行时等，并开始处理 Web 服务。我的问题是 Apache CXF 2.x 选项没有出现在 Web 服务下，我不知道如何让它出现。[这](https://stackoverflow.com/questions/4545030/installing-cxf-with-eclipse-3-5)是一个类似的SO问题。但是，在那个问题中，Eclipse 的版本不同，接受的答案是获取 Java EE Developers 包。

我有 Eclipse for Java 和 Report Developers 1.4.1.20110909。根据[比较 Eclipse 包页面](http://www.eclipse.org/downloads/compare.php)，报告包应该包含与 EE 开发者包相同的所有特性（加上更多特性）。如果我错了，请纠正我。但是，如果我是对的，那么为什么 Apache CXF 2.x 选项没有出现在 Web 服务下？我如何在那里获得该选项？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:09:53.797

您可能需要将 CXF Web 服务插件安装到 WTP。转到eclipse中的“安装新软件”并搜索CXF。

# cocos2d-iphone - cocos2d ccparticlesystem ....速度低

> ID：13990978
> 
> 赞同：0
> 
> 时间：2012-12-21T13:20:55.187
> 
> 标签：cocos2d-iphone, ccparticlesystem

我有这个气泡，我想显示从底部出现，但速度太快我想将速度减慢到最小代码是..

```
 emitter2.texture = [[CCTextureCache sharedTextureCache] addImage:@"Bubbles-1.png"];
    emitter2.position = ccp(size.width/2,-200);
    // gravity
    emitter2.gravity = CGPointMake(-10, 1000);

    // angle
    emitter2.angle = 95;
    emitter2.angleVar = 360;

    // speed of particles
    emitter2.speed = 1 ;//80;
    emitter2.speedVar = 1;

    // radial
    emitter2.radialAccel = -120;
    emitter2.radialAccelVar = 0;

    // tagential
    emitter2.tangentialAccel = 30;
    emitter2.tangentialAccelVar = 0;

    // life of particles
    emitter2.life = 2;
    emitter2.lifeVar = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:03:59.703

降低你的重力！！！！

```
emitter2.gravity = CGPointMake(-10, 1); //1000 is a bit to much for bubbles ;o) 
```

# c# - 获取 Gridview 行索引

> ID：13990987
> 
> 赞同：2
> 
> 时间：2012-12-21T13:21:38.327
> 
> 标签：c#, asp.net, gridview

我正在使用下面的代码来获取行索引

```
protected void gvESAPending_RowCommand(object sender, GridViewCommandEventArgs e)

    {
        try
        {
            lblMsg.Text = "";
            int index = Convert.ToInt32(e.CommandArgument);
            GridViewRow row = gvESAPending.Rows[index]; // Here incorrect format error is coming
        }
     } 
```

但是索引值是0。这里有什么问题？

Aspx 代码

'>'>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:24:00.233

您可以添加 OnRowCreteEvent

ASPX：

```
<asp:gridview id="gvESAPending" onrowcreated="gvESAPending_RowCreated" ... 
```

CS ：

```
protected void gvESAPending_RowCreated(Object sender, GridViewRowEventArgs e)
  {
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      LinkButton addButton = (LinkButton)e.Row.Cells[0].Controls[0];

      addButton.CommandArgument = e.Row.RowIndex.ToString();
    }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:24:50.860

```
GridViewRow row = gvESAPending.Rows[index]; 
```

通过这样做，您实际上可以访问索引处的行。因此，如果 index = 2 您实际上返回了 gridviewrow 中的第三行。

# android - 在查询构建器中使用选择列时的 Ormlite 对象缓存行为

> ID：13990995
> 
> 赞同：2
> 
> 时间：2012-12-21T13:22:13.283
> 
> 标签：android, ormlite, query-builder

我正在为我的 Daos 使用 OrmLite 中的对象缓存，以确保每个对象在我的应用程序中只有一个实例。

现在，当我将查询限制为仅选择列的子集时，我发现了一个问题。例如，当我想要当前存储在数据库中的所有 ID 时。我使用以下代码来做到这一点。

```
Dao<Data, String> dao = getDao(Data.class, String.class);
List<Data> dataList = dao.queryBuilder().selectColumns("id").query(); 
```

出于性能原因，我使用了这个解决方案，因为它比查询整个对象要快得多。

现在发生的事情是查询返回的那些 Data 对象也存储在 objectcache 中。因此，当我对 Data 对象执行普通查询（不带 selectColumns）时，我会从缓存中获取所有其他条目为空的对象。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T13:19:23.733

`selectColumns()`我们今天遇到了同样的问题并得出结论，与对象缓存结合使用是不安全的。

我将由您来决定它是错误、概念问题还是设计决定。