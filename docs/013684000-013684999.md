# StackOverflow 问答 13684000-13684999

# ruby-on-rails-3 - 在 rails 操作中处理传入的已发布（非 UTF-8 编码）数据

> ID：13684004
> 
> 赞同：1
> 
> 时间：2012-12-03T13:13:17.393
> 
> 标签：ruby-on-rails-3, character-encoding

给定一个在 Ruby 1.9 上运行的 rails 3.2 应用程序：

我收到了传入的数据（从我无法控制的外部服务发布），这些数据来自一个帖子，其中的参数用 ISO-8859-1 编码，内容类型中没有指定编码（application/x-www-form -urlencoded）。

[根据HTTP1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7.1)，这可以解释为有效，但我无法控制（如果他们在内容类型中指定编码，它肯定是 100% 有效的）

但是，rails 3 似乎[自动假定为 UTF-8](https://github.com/rails/rails/commit/25215d7285db10e2c04d903f251b791342e4dd6a)。所以任何非ASCII字符都会给我错误。有什么好的方法可以解决这个问题吗？（不仅仅是在检查中进行黑客攻击并在操作中重新转换？）

PS：如果有帮助，这是一个调用错误的测试片段：

```
 post "incoming", {'content'=>"some content with a pound-sterling sign encoded like this: \xA3 "} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:39:08.187

这是我的专业答案（鉴于在我的情况下，我总是知道源将 8859-1 对文本进行编码，并且我只有一个重要参数）：

```
params['content'].force_encoding('iso-8859-1').encode! 
```

然而，这可以为所有参数完成（深一层）

```
def params_to_iso_8859_1 
  params.each_value{|v| v.force_encoding('iso-8859-1').encode! if v.respond_to(:force_encoding)}
end 
```

这可能是一个过滤器。

如果您有嵌套参数，或者如果您想查看帖子请求参数中给出的编码，则涉及更多。

# emacs - 多个“交互式”选项

> ID：13684007
> 
> 赞同：4
> 
> 时间：2012-12-03T13:13:37.180
> 
> 标签：emacs, elisp

我编写了一个小函数来使用逗号作为项目分隔符来反转标记区域中的项目。功能代码为：

```
(defun reverse-list (beg end)
  "Reverses a list in-place, where comma ',' is the list item separator."
  (interactive "r")
  (if (region-active-p)
    (let ((region-list (reverse (split-string (region-as-string) ","))))
      (kill-region beg end)
      (loop for s in region-list do (progn
                                      (insert (chomp s))
                                      (insert ", ")))
      (delete-char -2))
    (message "Error: No region selected!"))) 
```

其中`chomp`从字符串中去除前导/尾随空格`region-as-string`并将区域生成为字符串。

该功能非常有用，但是能够即时选择分隔符会很棒。我正在寻找的行为是：

*   如果在没有通用参数的情况下调用，则使用逗号作为项目分隔符
*   如果使用通用参数 ( `C-u`) 调用，则要求用户输入一个（可能是多字符）分隔符字符串

我试图实现这一目标，但没有成功。如果您能提供帮助，那就太好了！

提前致谢，
elemakil

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:54:47.610

您可以使用[交互式代码](http://www.gnu.org/software/emacs/manual/html_node/elisp/Interactive-Codes.html) `P`来读取[“原始”前缀参数](http://www.gnu.org/software/emacs/manual/html_node/elisp/Prefix-Command-Arguments.html#Prefix-Command-Arguments)。这是`nil`如果没有前缀参数，非 -`nil`如果有前缀参数，因此您可以对此进行测试并决定是否将分隔符设置为`","`或用于`read-string`提示用户输入。

另外，我将对您的代码发表以下评论：

1.  您的函数仅在交互调用时才有效，因此`beg`并且`end`实际上是该区域的开始和结束。如果以非交互方式调用，这些可能不匹配（或者甚至可能没有区域），在这种情况下，您的函数将出错（因为它删除了之间的缓冲区`beg`，`end`但插入了区域的反转）。所以你需要打电话`(buffer-substring beg end)`，而不是`(region-as-string)`。

2.  [已编辑，见评论] 在区域不活动的情况下引发错误不是一个好主意。在 Emacs 中，即使该区域*处于非活动状态*（即不再突出显示），该区域也会继续*存在。*或者用户可能已经关闭，因此根本没有活动区域。在这两种情况下，用户可能仍想运行您的命令。*`transient-mark-mode`*

     *最多，您可以在区域处于活动状态时*更改*命令的行为（例如，参见[`comment-dwim`](http://www.gnu.org/software/emacs/manual/html_node/emacs/Comment-Commands.html)）。* 
**   您可以通过调用 删除该区域`kill-region`，这会将删除的文本复制到 kill-ring。这真的是你想做的吗？它可能会让用户感到惊讶。`delete-region`除非您真的要保存已删除的文本，否则最好打电话。

    *   在开始调用之前，您无法确保该点位于正确的位置`insert`。在交互式使用中，你会侥幸逃脱，但对于非交互式使用点可能在任何地方，所以你应该明确地移动它。当然也可以使用`save-excursion`。

    *   `", "`插入一个额外的然后必须在之后删除它似乎非常不雅。最好不要一开始就插入它。* 

 *这是一些修改后的代码，可以修复上述所有问题：

```
(defun reverse-list (beg end read-separator)
  "Reverse the region in-place, treating it as a list of items
separated by commas. With a prefix argument, prompt for the
separator."
  (interactive "r\nP")
  (save-excursion
    (let* ((separator (if read-separator (read-string "Separator: ") ","))
           (region-list (nreverse (split-string (buffer-substring beg end) separator)))
           (separator (concat separator " ")))
      (goto-char beg)
      (delete-region beg end)
      (loop for s in region-list
            for sep = "" then separator
            do (insert sep) (insert (chomp s)))))) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T13:47:11.107

```
r -- Region: point and mark as 2 numeric args, smallest first.  Does no I/O. 
```

因为`r`总是前两个参数。如果你`C-u`用来传递参数。然后您可能需要将参数作为分隔符传递给第三个参数。但是如果没有第一个和第二个参数，你就不能传递第三个参数。（我不确定。我也是初学者）

我的目的是让您使用 a`r`和 a`s`选项来实现它。尽管您总是需要提供分隔符参数。

例子：

```
(defun reverse-list (beg end &optional sepeartor )
  (interactive "r
ssepeartor:")
  (princ beg)
  (princ "*")
  (princ end)
  (princ sepeartor)) 
```*

# java - Blender 3D 渲染 Java servlet 接口

> ID：13684011
> 
> 赞同：2
> 
> 时间：2012-12-03T13:13:50.977
> 
> 标签：java, servlets, render, blender

我需要在服务器中进行 3D 渲染静止图像。我被告知 Java servlet 会这样做。我正在研究它以获得快速原型并且被卡住了。

我应该如何在 Java 中调用 Blender？

```
import java.io.*;
import javax.servlet.http.*;

@WebServlet("/HelloworldInServlet")
public class HelloworldInServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //Run Blender on server (localhost for now)
        // I need something here??
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:23:54.467

我能想到的最简单的解决方案如下所示：

```
public class RenderSceneServlet extends HttpServlet {
    protected void doGet(HttServletRequest request, HttpServletResponse response) {
        String outputFile = "/path/to/output-file";

        // execute command to render a frame from scene.blend
        Runtime runtime = Runtime.getRuntime();
        Process exec = runtime.exec("blender -b scene.blend -o " + outputFile + " -F JPEG -x 1 -f 1");

        // wait for blender to finish
        exec.waitFor();

        // serve the rendered file
        File file = new File(outputFile);
        byte[] bytes = FileUtils.readFileToByteArray(file);
        response.setContentLength(bytes.length);
        response.setContentType("image/jpeg");
        response.getOutputStream().write(bytes);
    }
} 
```

你应该记住几件事：

*   使用替代名称，`outputFile`否则并发请求将每次都覆盖文件。
*   [FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)是 apache commons-io 的一个类
*   我对搅拌机不是很熟悉，所以命令行“blender -b scene.blend -o [...]”可能需要额外注意。

# binding - BizTalk：导出应用程序绑定时从自定义适配器的发送端口清除密码

> ID：13684023
> 
> 赞同：4
> 
> 时间：2012-12-03T13:14:24.143
> 
> 标签：binding, passwords, adapter, biztalk, baseadapter

在使用我为 BizTalk Server 2010 制作的适配器导出包含发送端口的应用程序时，我在清除密码时遇到问题。

发送端口使用我制作的适配器，基于 Microsoft.Samples.BizTalk.Adapter.Common BaseAdapter (v.1.0.2)。

TransmitLocation.xsd 和 TransmitHandler.xsd 模式都使用 AdapterFramework 密码特定字段，并且都定义为：

```
 <xs:element minOccurs="1" default="" name="passwordField">
      <xs:simpleType>
        <xs:annotation>
          <xs:appinfo>
            <baf:designer xmlns:baf="BiztalkAdapterFramework.xsd">
              <baf:category _locID="mailAuthIndstillingerKategori">Password related category</baf:category>
              <baf:displayname _locID="passwordName">Password:</baf:displayname>
              <baf:description _locID="passwordDescription">Password description.</baf:description>
              <baf:editor assembly="%BTSROOT%\\Developer Tools\\Microsoft.BizTalk.Adapter.Framework.dll">Microsoft.BizTalk.Adapter.Framework.ComponentModel.PasswordUITypeEditor</baf:editor>
              <baf:converter assembly="%BTSROOT%\\Developer Tools\\Microsoft.BizTalk.Adapter.Framework.dll">Microsoft.BizTalk.Adapter.Framework.ComponentModel.PasswordTypeConverter</baf:converter>
            </baf:designer>
          </xs:appinfo>
        </xs:annotation>
        <xs:restriction base="xs:string">
          <xs:maxLength value="50" />
        </xs:restriction>
      </xs:simpleType>
    </xs:element> 
```

一些 google-hits 提到在应该被清除的元素上设置 ' **vt="1" ' 属性应该可以解决问题。**我尝试在调用**ValidateConfiguration()**时设置/添加此属性。但是配置 XML 作为字符串返回，然后在插入**<CustomProps>** xml 之前进行转义，并在绑定文件中导出。

我尝试在注册表项中指定**SendHandlerPropertiesXML**和**SendLocationPropertiesXML**的**AdapterConfig应该使用以下****<CustomProps>**，并带有**vt="1"**属性，希望它可以清除端口的整个绑定属性（不是最佳的，但比让某人导出密码更好的解决方案）：

```
SendHandlerPropertiesXML : <CustomProps><AdapterConfig vt="1"/></CustomProps>
SendLocationPropertiesXML : <CustomProps><AdapterConfig vt="1"/></CustomProps> 
```

导出配置了发送端口的应用程序时，具体的 XML 如下所示：

```
<TransportTypeData>&lt;CustomProps&gt;&lt;AdapterConfig vt="1"&gt;&amp;lt;Config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&amp;gt;&amp;lt;passwordField vt="1"&amp;gt;CLEARTEXTPASSWORD;lt;/passwordField&amp;gt;&amp;lt;uri&amp;gt;SMTP://NOT-USED&amp;lt;/uri&amp;gt;&amp;lt;/Config&amp;gt;&lt;/AdapterConfig&gt;&lt;/CustomProps&gt;</TransportTypeData> 
```

每次导出绑定时，都会调用适配器的重载方法：**ValidateConfiguration()**，但无法判断这是何时配置适配器，还是何时导出绑定，这意味着：您无法修改密码在返回的 xml 字符串中，因为它在配置时也会破坏密码。

还有其他内置适配器可以执行此操作（例如：SMTP 适配器），我确信这是我误解的基本内容。但是任何帮助或指示都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T02:22:47.487

我注意到 CodePlex 上的[Blogical Sftp 适配器](http://sftpadapter.codeplex.com/)完成了这项工作，并且我已经能够复制它。

您所要做的就是添加`type="baf:Password"`密码元素。

[您可以在此处](http://sftpadapter.codeplex.com/SourceControl/latest#Blogical.Adapters.Sftp/Blogical.Shared.Adapters.Sftp.Management/TransmitLocation.xsd)参考他们的架构。

# actionscript-3 - Flash AS3 静止图像后跟动画内容

> ID：13684024
> 
> 赞同：1
> 
> 时间：2012-12-03T13:14:30.060
> 
> 标签：actionscript-3

我被困在如何让我的静止图像与动画内容一起出现。当我单击按钮 1 时，图像 1 从右侧出现，我想让我的静止图像跟动画熊一起给出关于图像的简短说明。然后当我点击按钮 2 时，所有的图像和动画都消失了，然后出现图像 2，然后是另一个动画。我希望有人能在这方面帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:11:11.520

放入单独的movieclips，movieclips有自己的时间线，你可以把它当作另一个图像文件，因为它们具有相似的属性。

# c# - 为什么我的更新 sql 命令不起作用？

> ID：13684025
> 
> 赞同：-1
> 
> 时间：2012-12-03T13:14:31.977
> 
> 标签：c#, asp.net, mysql, sql, database

我在 mysql 中的 sql 命令有问题。我有一个 asp.net 应用程序并使用 mysql 数据库作为数据库。我想构建一个可以插入、更新、删除和选择数据库中记录的类。我有更新命令的问题。在 phpmyadmin 中它可以工作，但在我的课堂上不是：/

这是我的代码

```
public void UpdateRecord(string title, string firstname, string lastname, string company,
                               string timefrom, string timeto)
        {
            connection = new MySqlConnection();

            try
            {
                MySqlCommand command = connection.CreateCommand();

                //for testing
                string sql = "UPDATE 'tb_gast' SET FIRSTNAME='test' WHERE ID=270";

                command.CommandText = sql;

                connection.Open();

                command.ExecuteNonQuery();

            }
            catch (Exception)
            {

            }
            finally
            {
                connection.Close();
            }
        } 
```

此命令在 phpmyadmin 中工作

```
UPDATE `tb_gast` 
SET 
FIRSTNAME='uu',
LASTNAME='uu',
COMPANY='uu'
WHERE ID=270 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:16:12.453

删除表名中的引号`'tb_gast'`。代替 ：

```
UPDATE 'tb_gast' SET FIRSTNAME='test' WHERE ID=270 
```

试试这个：

```
UPDATE tb_gast SET FIRSTNAME = 'test' WHERE ID=270 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:19:33.920

您在表名周围使用单引号，而不是反引号。
可以使用组合键键入反引号`ALT+096`

```
UPDATE `tb_gast` SET FIRSTNAME = 'test' WHERE ID=270 
```

编辑：更深入地研究您的问题。
请注意，您声明了一个 MySqlConnection 并在没有任何连接字符串的情况下对其进行了初始化。
如果这是您的真实代码，难怪它不起作用

这就是你的代码应该是这样的

```
 using(connection = new MySqlConnection(GetConnectionString())
        {
            connection.Open();
            using(MySqlCommand command = connection.CreateCommand();
            {
                //for testing
                string sql = "UPDATE `tb_gast` SET FIRSTNAME='test' WHERE ID=270";
                command.CommandText = sql;
                command.ExecuteNonQuery();
            }
        } 
```

其中 GetConnectionString() 应该是某种方法，可以从配置文件等永久存储中返回连接字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:46:51.977

试试这个...

void UpdateRecord（字符串标题，字符串名字，字符串姓氏，字符串公司，字符串 timefrom，字符串 timeto）{ connection = new MySqlConnection();

```
 try
        {
           string sql = "UPDATE tb_gast SET FIRSTNAME='test' WHERE ID=270";
           MySqlCommand command = new MySqlCommand(sql, connection);
           connection.Open();

            command.ExecuteNonQuery();

        }
        catch (Exception)
        {

        }
        finally
        {
            connection.Close();
        }
    } 
```

# asp.net - 如何在加载过程中更改标签文本？

> ID：13684026
> 
> 赞同：0
> 
> 时间：2012-12-03T13:14:38.500
> 
> 标签：asp.net

我正在使用 ASP.NET 4.0。

我有这个问题，我无法从页面外部访问我的网络表单中的方法。

事情就是这样。

我的网络表单实例化了 parseEngine 类，后者又实例化了不同的类。事情是当我找到我正在寻找的文本时，我只进行了一半。之后，我将所有内容都放入数据库中，最后将其返回。

所以我在我的网络表单中添加了方法，

```
 Public void Showresult(int myResult)
 {
     Labelt.text = myResult.ToString();
 } 
```

但显然这行不通。

这就是 ddep 进入我的应用程序的方式

```
Webfrom1 --> ParseEngine --> Parser (HERE), 
```

如何从解析器访问控件？

我还尝试在 Webform1 中创建一个部分类，并尝试在那里继承 webform1 以访问标签，但它不起作用。

那么对此的解决方案是什么，我需要它来工作，以便用户可以很快地看到结果，然后如果他/她想等待，它将在所有数据库调用完成后呈现其余部分。

# javascript - 使用 Phonegap 的 Android 设备视频

> ID：13684028
> 
> 赞同：0
> 
> 时间：2012-12-03T13:14:44.357
> 
> 标签：javascript, android, cordova, phonegap-plugins

我在 Android 设备上使用 Phonegap，我需要显示设备的视频。

有谁知道我应该怎么做？

这是我的代码：

```
function getPhoto(source) { 
// Retrieve image file location from specified source 
   navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
   destinationType: destinationType.FILE_URI, sourceType: source });
} 
```

但它只适用于图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:42:27.387

PhoneGap offers a MediaType in Camera.options

```
Camera.MediaType = { 
  PICTURE: 0,             // allow selection of still pictures only. DEFAULT. Will return format specified via DestinationType
  VIDEO: 1,               // allow selection of video only, WILL ALWAYS RETURN FILE_URI
  ALLMEDIA : 2            // allow selection from all media types
} 
```

*"MediaType: Set the type of media to select from. Only works when PictureSourceType is PHOTOLIBRARY or SAVEDPHOTOALBUM. Defined in nagivator.camera.MediaType (Number)"*

# python - 为 kmeans 自动计算 clustersize

> ID：13684041
> 
> 赞同：0
> 
> 时间：2012-12-03T13:15:20.690
> 
> 标签：python, c, machine-learning, k-means, scikit-learn

我正在使用 scikit-learn 并试验 Kmeans。它的速度很快，但需要集群数量作为参数。我想尝试的是根据文档的数量自动计算集群的数量。

我之前使用的基于散列的近邻算法（ssdeep）可以根据距离获得相似性集群，如何自动获得 k 均值的集群大小。

```
KMeans(init='k-means++', n_clusters=cluster_count, n_init=10),
          name="k-means++", data=data) 
```

我想自动计算cluster_count，这可能吗？我的测试数据集是来自 20_newsgroup 的随机文件的集合，没有预先分类到 folder ， single folder ，所以没有标签。

# mysql - MYSQL AND 运算符比较在同一列

> ID：13684046
> 
> 赞同：0
> 
> 时间：2012-12-03T13:15:33.047
> 
> 标签：mysql, sql

我正在尝试执行此查询，任何人都可以帮助它为什么不起作用。

```
SELECT DISTINCT (p.fld_tag_id) 
FROM tbl_tag_properties as p 
WHERE 3 = (SELECT count(c.fld_tag_id) 
FROM tbl_tag_properties as c 
WHERE c.fld_tag_category_value_id in (67, 20, 48) 
and c.fld_tag_id = p.fld_tag_id) 
AND p.fld_tag_category_value_id IN (55, 56) 
AND p.fld_tag_category_value_id IN (74, 75) 
```

尽管 ....

这个查询最终使用单个 AND 运算符正确执行，但我需要多个 AND 运算符。

```
SELECT DISTINCT (p.fld_tag_id) 
FROM tbl_tag_properties as p 
WHERE 3 = (SELECT count(c.fld_tag_id) 
FROM tbl_tag_properties as c 
WHERE c.fld_tag_category_value_id in (67, 20, 48) 
and c.fld_tag_id = p.fld_tag_id) 
AND p.fld_tag_category_value_id IN (55, 56) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:18:34.753

如何将 ID 限制在一个范围内，然后再尝试将它们限制在另一个范围内？;) 就像我想把颜色变成黑色一样`and`。除非您希望颜色为`in`（黑色，白色），否则这是不可能的。另一种方式 color = BLACK `or`color = WHITE.... 我只是以颜色为例，以方便解释。

试试这个第一个查询：

```
AND p.fld_tag_category_value_id IN (55, 56, 74, 75) 
```

你在这里做一个自我加入，但这有什么`WHERE 3 =`用呢？如果您可以简单地告诉您在给定表模式的情况下您期望的输出，那会好得多。

如果要限制为 3 返回的记录，请使用`LIMIT`. 请查看以下示例，让我们知道真正需要什么。:) 很高兴理解并帮助您。

[* SQLFIDDLE](http://www.sqlfiddle.com/#!2/9cd0c/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:19:14.000

你的两`AND`行是互斥的：

```
AND p.fld_tag_category_value_id IN (55, 56) 
AND p.fld_tag_category_value_id IN (74, 75) 
```

你的价值不能`55, 56`同时`74, 75`存在。

尝试 ：

```
SELECT DISTINCT (p.fld_tag_id) 
FROM tbl_tag_properties as p 
WHERE 3 = (SELECT count(c.fld_tag_id) 
FROM tbl_tag_properties as c 
WHERE c.fld_tag_category_value_id in (67, 20, 48) 
AND c.fld_tag_id = p.fld_tag_id) 
AND p.fld_tag_category_value_id IN (55, 56, 74, 75) 
```

使用 OR 运算符：

```
SELECT DISTINCT (p.fld_tag_id) 
FROM tbl_tag_properties as p 
WHERE 3 = (SELECT count(c.fld_tag_id) 
FROM tbl_tag_properties as c 
WHERE c.fld_tag_category_value_id in (67, 20, 48) 
AND c.fld_tag_id = p.fld_tag_id) 
AND (p.fld_tag_category_value_id IN (55, 56)
    OR p.fld_tag_category_value_id IN (74, 75)) 
```

这样您就可以按照自己的方式构建查询。不过不要忘记括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:19:44.730

您的最后一个 AND 应该包含所有可能的值。为了解释它失败的原因，假设`p.fld_tag_category_value_id = 55`. 然后在您的查询中首先 AND 即

```
AND p.fld_tag_category_value_id IN (55, 56) // Will evaluate to TRUE 
```

将为真，但第二个 AND 条件将为 FALSE，因为单个值无法同时满足您拥有的两个 AND 条件。

```
AND p.fld_tag_category_value_id IN (74, 75) // Will evaluate to FALSE 
```

如果您尝试遵循它将起作用。

```
....
AND p.fld_tag_category_value_id IN (55, 56, 74, 75) 
```

# salesforce - 主详细信息关系详细信息值未显示

> ID：13684047
> 
> 赞同：0
> 
> 时间：2012-12-03T13:15:34.553
> 
> 标签：salesforce, apex-code, visualforce

嗨，我正在写一个视觉力量，其代码是

```
 <apex:page id="pageId" controller="FieldSetDemonstration">  
<apex:form id="formId">  
    <apex:pageblock id="pbId">  
        <apex:pageblocksection columns="1" id="pbsIs">  
            <apex:repeat value="{!Fields}" var="f">  
                <apex:outputLabel value="{!merch[f]}">  
            </apex:outputLabel></apex:repeat>  
        </apex:pageblocksection>  
    </apex:pageblock>  
</apex:form>  
</apex:page> 
```

控制器代码是 public class FieldSetDemonstration {

```
public Resource__c merch { get; set; }

public FieldSetDemonstration() {
    this.merch = getMerchandise();
}

public List<Schema.FieldSetMember> getFields() {
    return SObjectType.Resource__c.FieldSets.Hello2.getFields();
}

private Resource__c getMerchandise() {
    String query = 'SELECT ';
    for(Schema.FieldSetMember f : this.getFields()) {
        query += f.getFieldPath() + ', ';
    }
    query += 'Id  FROM Resource__c LIMIT 1';
    System.debug('Hello world debug log');
   Resource__c res= Database.query(query);
   Object re=res.Resource_Position__r.Name; 
```

System.debug('Hello World 调试日志'+''+res); System.debug('Hello World1'+query); 返回资源；} }

和系统日志值是

12:28:55.052 (52125000)|USER_DEBUG|[22]|DEBUG|Hello World 调试日志Resource__c:{Name=Hello Bro, OwnerId=00590000001V6loAAC, Id=a04900000023JI7AAM}

12:28:55.052 (52157000)|USER_DEBUG|[23]|DEBUG|Hello World1 SELECT Resource_Position__r.CreatedById, Resource_Position__c, Name, Owner.Email, Resource_Position_r.Name *, Id FROM Resource_c* LIMIT 1

代码中的 Resource__c 和 Resource_Position__c Hello2 是一个包含以下字段的字段集

资源职位 > 资源职位名称

资源位置

资源名称

我面临的问题不是显示所有三个字段的值 1.Resource Position>Resource Position Name 2.Resource Position 3.Resource Name 它的显示值只有 Resource Name 没有值

资源位置>资源位置名称

资源位置

但是我将 Resource_Position_c*对象与 Resource_c*对象相关联，为什么它没有显示这两个字段的值，任何人都可以帮助解决这个问题。你的帮助非常值得

如果我在字段集 hello2 Owner ID>E-mail 中再添加一个字段，那么它在 visualforce 页面中显示所有者的正确电子邮件地址唯一的问题是来自此自定义对象的字段名称，谁能告诉我为什么它没有为 Resource_Position__c.name 字段赋值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:46:46.700

更改`<apex:outputLabel value="{!merch[f]}">`为`<apex:outputLabel value="{!merch[f.fieldPath]}">`

# android - ListView在android中滚动图像

> ID：13684049
> 
> 赞同：0
> 
> 时间：2012-12-03T13:15:40.097
> 
> 标签：android, image, listview, scroll

在我的应用程序中，图像是从服务器加载的。我已经使用图像加载器进行图像加载。但问题是，在加载图像时，如果我滚动 listview ，图像会被打乱，图像的顺序是错误的。但是加载完成后，所有图像都在正确的位置。如果我现在滚动图像不会打乱，它们就在正确的位置。我在 listview中使用过`setTag()`and 。请帮助我解决在列表视图中加载图像时图像洗牌的问题。这是我的代码`getTag()``getView()``getView()`

```
public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View rowView = convertView;
        ProgressBar progress;
        ImageView image;
        ViewHolder view_holder = null;
        String m_AllImages=m_BaseImageAll.get(position);

        try {

            if (rowView == null) {
                rowView = inflater.inflate(R.layout.photo_show_sub,
                        null);

                view_holder = new ViewHolder();
                view_holder.progress = (ProgressBar) rowView.findViewById(R.id.photoGalProgress);
                view_holder.image = (ImageView) rowView.findViewById(R.id.image);

            }
            else
            {   

                view_holder = (ViewHolder) rowView.getTag();

            }
            imageLoader.displayImage(m_AllImages,
                    activity, view_holder.image, view_holder.progress);

        } catch (Exception ex) {
            ex.printStackTrace();
        }

        return rowView;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:19:13.127

在您的代码中添加这一行::

```
 holder.image.setTag(m_AllImages.get(position));
 imageLoader.displayImage(m_AllImages, activity, view_holder.image, view_holder.progress); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:33:30.587

其实并不是图片被打乱了，有些图片下载的比之前的快，没有图片的ImageView被包裹掉，加载的先显示图片。所以它最初似乎被洗牌，除非所有图像都被下载并且它实际上没有被洗牌。

用虚拟图像检查它，比如说

image.setImageBitmap(R.Drawable.ic_launcher);

# jquery - 复制到剪贴板解决方案（IOS 兼容）

> ID：13684051
> 
> 赞同：1
> 
> 时间：2012-12-03T13:15:51.143
> 
> 标签：jquery

有人对创建适用于 IOS 的剪贴板功能的副本有任何建议吗？我发现的唯一解决方案是闪存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:25:08.217

抱歉，无法使用 JavaScript 复制到操作系统剪贴板。这意味着实际上没有办法从网络浏览器复制到 iDevices 上的剪贴板。

# struts2 - 属性值未显示

> ID：13684056
> 
> 赞同：0
> 
> 时间：2012-12-03T13:16:03.130
> 
> 标签：struts2

包含出生日期（日期值），但未显示出生日期值是否有任何错误

```
 <s:if> 
```

标签

```
<s:if test="blist[0].dob!=null && blist[0].dob!=''">
   <div class="info">
              <div class="title">
                   Birthday
              </div>
      <div class="value">
         <s:property value="blist[0].dob" />
      </div>
   </div>
</s:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:47:17.633

其实你不需要那个`blist[0].dob != ''`检查，检查`null`就足够了。但是，如果您真的想这样做，请使用`toString`方法将其与空白进行比较。

```
<s:if test="blist[0].dob != null && blist[0].dob.toString() != ''">
  <div class="info">
    <div class="title">
      Birthday
    </div>
    <div class="value">
      <s:property value="blist[0].dob" />
    </div>
  </div>
</s:if> 
```

# php - socket_read 使响应名称服务器可读

> ID：13684059
> 
> 赞同：0
> 
> 时间：2012-12-03T13:16:14.350
> 
> 标签：php, hex, ascii

如何使名称服务器的响应可读？

如果我的回答是：
`0x01, 0x01, 0x85, 0x00, 0x00, 0x01, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x06, 0x67, 0x6f, 0x6f, 0x67, 0x6c, 0x65, 0x02, 0x6e, 0x6c, 0x00, 0x00, 0xff, 0x00, 0x01, 0xc0, 0x0c, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x01, 0x2c, 0x00, 0x04, 0xad, 0xc2, 0x20, 0x77, 0xc0, 0x0c, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x01, 0x2c, 0x00, 0x04, 0xad, 0xc2, 0x20, 0x7f, 0xc0, 0x0c, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x01, 0x2c, 0x00, 0x04, 0xad, 0xc2, 0x20, 0x78, 0xc0, 0x0c, 0x00, 0x02, 0x00, 0x01, 0x00, 0x05, 0x46, 0x00, 0x00, 0x10, 0x03, 0x6e, 0x73, 0x33, 0x06, 0x67, 0x6f, 0x6f, 0x67, 0x6c, 0x65, 0x03, 0x63, 0x6f, 0x6d, 0x00, 0xc0, 0x0c, 0x00, 0x10, 0x00, 0x01, 0x00, 0x00, 0x01, 0x2c, 0x00, 0x0c, 0x0b, 0x76, 0x3d, 0x73, 0x70, 0x66, 0x31, 0x20, 0x2d, 0x61, 0x6c, 0x6c, 0xc0, 0x0c, 0x00, 0x0f, 0x00, 0x01, 0x00, 0x00, 0x02, 0x58, 0x00, 0x0c, 0x00, 0x0a, 0x05, 0x61, 0x73, 0x70, 0x6d, 0x78, 0x01, 0x6c, 0xc0, 0x5b, 0xc0, 0x0c, 0x00, 0x0f, 0x00, 0x01, 0x00, 0x00, 0x02, 0x58, 0x00, 0x09, 0x00, 0x1e, 0x04, 0x61, 0x6c, 0x74, 0x32, 0xc0, 0x8d, 0xc0, 0x0c, 0x00, 0x06, 0x00, 0x01, 0x00, 0x00, 0x00, 0x3c, 0x00, 0x22, 0xc0, 0x57, 0x09, 0x64, 0x6e, 0x73, 0x2d, 0x61, 0x64, 0x6d, 0x69, 0x6e, 0xc0, 0x5b, 0x00, 0x16, 0xf7, 0x0a, 0x00, 0x00, 0x03, 0x84, 0x00, 0x00, 0x03, 0x84, 0x00, 0x00, 0x07, 0x08, 0x00, 0x00, 0x00, 0x3c, 0xc0, 0x0c, 0x00, 0x0f, 0x00, 0x01, 0x00, 0x00, 0x02, 0x58, 0x00, 0x09, 0x00, 0x32, 0x04, 0x61, 0x6c, 0x74, 0x34, 0xc0, 0x8d, 0xc0, 0x0c, 0x00, 0x02, 0x00, 0x01, 0x00, 0x05, 0x46, 0x00, 0x00, 0x06, 0x03, 0x6e, 0x73, 0x32, 0xc0, 0x5b, 0xc0, 0x0c, 0x00, 0x02, 0x00, 0x01, 0x00, 0x05, 0x46, 0x00, 0x00, 0x06, 0x03, 0x6e, 0x73, 0x34, 0xc0, 0x5b, 0xc0, 0x0c, 0x00, 0x0f, 0x00, 0x01, 0x00, 0x00, 0x02, 0x58, 0x00, 0x09, 0x00, 0x28, 0x04, 0x61, 0x6c, 0x74, 0x33, 0xc0, 0x8d, 0xc0, 0x0c, 0x00, 0x02, 0x00, 0x01, 0x00, 0x05, 0x46, 0x00, 0x00, 0x06, 0x03, 0x6e, 0x73, 0x31, 0xc0, 0x5b, 0xc0, 0x0c, 0x00, 0x0f, 0x00, 0x01, 0x00, 0x00, 0x02, 0x58, 0x00, 0x09, 0x00, 0x14, 0x04, 0x61, 0x6c, 0x74, 0x31, 0xc0, 0x8d`

那么这是我的ASCII输出
`.............google.nl..............,.... w.........,.... ..........,.... x........F....ns3.google.com..........,...v=spf1 -all.........X... .aspmx.l.[.........X.....alt2...........<.".W.dns-admin.[... ...............<.........X...2.alt4..........F....ns2.[........F....ns4.[.........X...(.alt3..........F....ns1.[.........X.....alt1..`

这是我从其中一个 google 名称服务器获得的信息。如何使用 php 使其可读？

# android - 通过 IP 测试移动设备

> ID：13684064
> 
> 赞同：0
> 
> 时间：2012-12-03T13:16:41.570
> 
> 标签：android, iphone, testing

我已经为我们的 android 客户端编写了一些带有 Android 测试框架的测试，也为 iPhone 及其框架编写了一些测试。我想在没有 USB 连接的多个设备上运行这些测试...

iPhone 和 Android 的测试框架都要求设备通过 USB 电缆连接到带有 SDK 的机器，对吗？

有没有办法在不受 USB 电缆限制的情况下使用仪器？如果有这种方式，是否可以同时在多个设备上使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:43:15.733

对于 iOS 部分，您可以使用 Ad Hoc Distribution Profile（您必须拥有 Apple 开发人员帐户才能创建它）。您必须在构建应用程序之前插入每个设备的 UDID。
创建应用程序存档后，您可以使用 iOS Beta Builder，它允许您将应用程序放在服务器中，以便允许的设备可以直接下载/安装它。

[介绍 iOS Beta Builder](http://www.hanchorllc.com/2010/08/24/introducing-ios-beta-builder/)
[iOS Beta Builder GitHub 页面](https://github.com/HunterHillegas/iOS-BetaBuilder)
[iOS Beta Builder Mac AppStore](http://www.google.it/url?sa=t&rct=j&q=ios%20beta%20builder%20app%20store&source=web&cd=9&ved=0CGwQFjAI&url=https://itunes.apple.com/us/app/betabuilder-for-ios-apps/id415348946?mt=12&ei=rcWfUKGpMMSF4ATEuIGYDA&usg=AFQjCNEpd_M2akqJWTH2mEq55TNfDf9AlQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:32:40.190

对于 Android，没有比这更简单的了，构建 .apk。将它通过电子邮件发送到手机并安装它;-)

您只需要禁用未知来源（设置 > 应用程序 > 未知来源）

# java - 在 liferay 中部署时事通讯 portlet 时出错

> ID：13684069
> 
> 赞同：0
> 
> 时间：2012-12-03T13:17:11.523
> 
> 标签：java, liferay, liferay-6

我在主题中部署时事通讯 Portlet 时遇到问题，发生的错误是**java.net.UnknownHostException: mime**。将感谢您的任何帮助:)

mime的问题解决了。我必须为 gmail 进行 smtp 和 pop3 设置。

但现在我面临另一个问题，它无法获取 liferay 的数据库，因此无法创建它的表。

**这是 liferay-persistence.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:p="http://www.springframework.org/schema/p"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
          http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- liferay database connection -->
    <bean id="liferayDataSource" class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
        <property name="targetDataSource">
            <bean class="com.liferay.portal.kernel.util.InfrastructureUtil" factory-method="getDataSource" />
        </property>
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="liferayDataSource" />
        <property name="schemaUpdate" value="true" />
        <property name="packagesToScan" value="com.rcs.newsletter.core.model" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>                <prop key="hibernate.show_sql">false</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="hibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate" p:sessionFactory-ref="sessionFactory" /> 

    <tx:annotation-driven /> 
</beans> 
```

终于解决了这个问题，在`portal-ext.properties`文件中对数据库集成进行了更改，以更改 Liferay 使用的默认数据库，仅此而已。它解决了这个问题。

`portal-ext.propertie`当我使用 MySQL 数据库时，我在s 文件中添加了以下代码行：

> jdbc.default.driverClassName=com.mysql.jdbc.Driver
> 
> jdbc.default.url=jdbc:mysql://localhost/liferay?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false
> 
> jdbc.default.username=root
> 
> jdbc.default.password=root

# java - 向网络服务发送 POST 请求时出现 NetworkOnMainThreadException

> ID：13684077
> 
> 赞同：2
> 
> 时间：2012-12-03T13:17:29.957
> 
> 标签：java, android, exception, post

我正在使用 AsyncTask 向 web 服务发送 POST 请求，但我不断收到`NetworkOnMainThreadException`异常。我正在使用来自这个问题的答案的解决方案： [如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception) 但我不能让它工作。我的课程：

```
public class MainActivity extends Activity {

    public JSONObject result;
    public String retSrc;
    public HttpEntity resEntity;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try {
            resEntity = new UpdateData().execute().get();     
            retSrc = EntityUtils.toString(resEntity);         // Here I get an exception
            result = new JSONObject(retSrc);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ExecutionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class UpdateData extends AsyncTask<String, Void, HttpEntity>{

        private HttpEntity entit;
            @Override
            protected HttpEntity doInBackground(String... params) {
                try {
                    HttpClient client = new DefaultHttpClient();  
                    String postURL = "http://www.test.com";
                    HttpPost post = new HttpPost(postURL);
                        List<NameValuePair> crc = new ArrayList<NameValuePair>();
                        crc.add(new BasicNameValuePair("crc", "test"));
                        UrlEncodedFormEntity ent = new UrlEncodedFormEntity(crc,HTTP.UTF_8);
                        post.setEntity(ent);
                        HttpResponse responsePOST = client.execute(post);  
                        entit = responsePOST.getEntity();
                } catch (Exception e) {
                    e.printStackTrace();
                }
                return entit;
            }
    }
} 
```

这是错误日志：

```
12-03 14:46:36.929: E/AndroidRuntime(3044): FATAL EXCEPTION: main
12-03 14:46:36.929: E/AndroidRuntime(3044): java.lang.RuntimeException: Unable to start activity ComponentInfo{app/app.MainActivity}: android.os.NetworkOnMainThreadException
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.os.Looper.loop(Looper.java:137)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at java.lang.reflect.Method.invokeNative(Native Method)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at java.lang.reflect.Method.invoke(Method.java:511)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at dalvik.system.NativeStart.main(Native Method)
12-03 14:46:36.929: E/AndroidRuntime(3044): Caused by: android.os.NetworkOnMainThreadException
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:163)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at libcore.io.IoBridge.recvfrom(IoBridge.java:503)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:161)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:175)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.impl.io.ChunkedInputStream.exhaustInputStream(ChunkedInputStream.java:289)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.impl.io.ChunkedInputStream.close(ChunkedInputStream.java:262)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.conn.BasicManagedEntity.streamClosed(BasicManagedEntity.java:179)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.conn.EofSensorInputStream.checkClose(EofSensorInputStream.java:266)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.conn.EofSensorInputStream.close(EofSensorInputStream.java:213)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at java.io.InputStreamReader.close(InputStreamReader.java:145)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:139)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:146)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at pl.lodz.uni.uniinformator.MainActivity.onCreate(MainActivity.java:43)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.Activity.performCreate(Activity.java:4465)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-03 14:46:36.929: E/AndroidRuntime(3044):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-03 14:46:36.929: E/AndroidRuntime(3044):     ... 11 more 
```

如果我理解正确，方法`doInBackground`应该做所有里面的事情，就像它在另一个线程中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:21:16.043

正如您所说，您在这一行中遇到了错误：

```
retSrc = EntityUtils.toString(resEntity); 
```

这是因为`EntityUtils.toString()`也应该位于`doInBackground()`方法中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:28:40.817

**-**`UI work on UI-Thread`拥有and总是更好的做法`Non-UI work on Non-UI Thread`，但从Android 的**HoneyComb**版本开始，它变成了法律。

**-**在你的情况下`get()`是一个**阻塞调用**，你是**从 UI 线程调用的，它应该在非 UI 线程上。**

**-** `EntityUtils.toString(resEntity)`应该在**Non-UI thread**中，所以应该在`doInBackground()`方法中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:22:21.677

这`get()`是一个阻塞调用，你不能在UI线程上执行阻塞调用

来自[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)文档

> 如有必要，等待计算完成，然后检索其结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T13:22:58.887

从 ICS 及以上版本 Android 将不允许在 UI 线程中进行任何网络操作。它应该在单独的线程中完成，这样它就不会挂起 UI。在单独的线程中尝试您的网络通信代码。

# c# - 如何以编程方式确定从主功能区创建的 Outlook 新项目 --> 新项目

> ID：13684079
> 
> 赞同：4
> 
> 时间：2012-12-03T13:17:39.393
> 
> 标签：c#, outlook, vsto, outlook-addin

我有一个 Outlook 加载项，它是一个新的功能区选项卡，它连接到我的服务器数据库，以便将一些自定义数据与 Outlook 对象关联。

到目前为止，此功能区选项卡显示在邮件项目中。

我正在扩展它以显示在任务和日历项目（*约会、会议等*）中。

目前我确定创建的新项目的方式如下-->

```
Microsoft.Office.Interop.Outlook.Application interopApplication = ThisAddIn.Application.Application
if (interopApplication.ActiveExplorer().CurrentFolder.DefaultItemType.ToString() != "olTaskItem")
{
  ....
} 
```

这样我就可以确定文件夹及其相关的新项目（*比如在收件箱中，我创建新邮件项目，在日历中我创建新约会等*）

现在，当我在收件箱中时，我单击新建约会，它会将创建的新项目标识为`olMailItem`而不是创建为`olAppointmentItem`。当我在日历视图中并单击新邮件项目时也是如此。

我的问题是如何确定无论我在哪个文件夹中创建的新项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:51:03.797

您应该检查[`MessageClass`](http://msdn.microsoft.com/en-us/library/office/ff861573.aspx)方法[`ActiveInspector`](http://msdn.microsoft.com/en-us/library/office/ff863939.aspx)以确定`OlItemType`.

```
string itemClass = Globals.ThisAddIn.Application.ActiveInspector().CurrentItem.MessageClass;
if (itemClass == "IPM.Appointment")
  // you have a calendar item
else if (itemClass == "IPM.Task")
  // you have a task item
else if (itemClass == "IPM.Note")
  // you have a message item 
```

# php - 图片大小 Android 上传 PHP

> ID：13684083
> 
> 赞同：0
> 
> 时间：2012-12-03T13:18:03.257
> 
> 标签：php, android, image, upload, resize

在我的应用程序中，用户可以使用 php 将 Android 中的一些图像上传到 Web 服务器。你喜欢什么尺寸的图片？我想在上传之前调整图像大小，但我不知道哪种尺寸最好……您更喜欢哪种质量？对于小文件大小和可接受的图像质量，哪个质量最好？

最后一个问题。用户可以在 ListView 中下载图像。然后单击它后，他们可以在大图像视图中看到图像。您会在 php 中即时创建拇指，还是在上传时保存拇指？如果您想在上传时保存，请告诉我一个适合拇指的大小和质量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:43:33.657

这里面的问题太多了。：） 让我试试。

一个。上传图片时要记住的是网络速度和手机容量。您可以在 2.5G 网络连接上上传 1024px 的 max_width/max_height。但是，如果您想一次上传许多图像，最好进一步减小尺寸。

湾。下载时，您应该下载整个图像并将其保存在文件系统中。对于列表视图，您应该在阅读时将图像缩放为缩略图大小，并使用 scale=1 显示完整的图像。

C。可以在上传图像时将图像转换为 base64，然后在服务器端将其转换回 png/jpg。

d。质量为 75% 且 max_width/max_height 为 1024 的 JPEG 对我来说效果很好。

# powershell - 从没有 Job-Information 的 Powershell 作业返回数据

> ID：13684093
> 
> 赞同：7
> 
> 时间：2012-12-03T13:18:45.337
> 
> 标签：powershell, powershell-3.0

我正在做一份看起来像这样的工作

```
$myjob =
{
  # regerate some $data
  return $data
} 
```

我开始并接受我的工作是这样的：

```
Start-Job -ScriptBlock $myjob -Name "job1"
Wait-Job -Name "job1"
$result = Receive-Job -Job "job1" 
```

现在我希望我`$result`只包含`$data`返回的内容。但是，在检查`$result`$data 之外，我会看到更多我不想包含在我的`$data`数组中的信息。混乱的数据开始是这样的：

（**返回数据**：）

```
State         : Running
HasMoreData   : True
StatusMessage : 
Location      : localhost
Command       :  # regerate some $data
                 return $data
JobStateInfo  : Running
Finished      : System.Threading.ManualResetEvent
InstanceId    : f7c63b33-d270-4fa8-8042-111edf9d86a6
Id            : 270
Name          : job1
ChildJobs     : {Job271}
PSBeginTime   : 03.12.2012 14:06:26
PSEndTime     : 
PSJobTypeName : BackgroundJob
Output        : {}
Error         : {}
Progress      : {}
Verbose       : {}
Debug         : {}
Warning       : {} 
```

这样一遍又一遍地重复 20 次。之后我的真实`$data`被列出。但是：这样迭代`$result`数组是不可能的。我能做些什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T14:30:45.773

您正在陷入对 powershell 的一个常见误解：脚本中所有未捕获的输出都返回给调用者，而不仅仅是“返回”的参数。例子：

```
ps> $s = {
    1..3 # write 1,2,3 to output stream
    return 4 # write 4 to output stream, then exit scriptblock!
    5 # won't be output
    return 6 # won't be output either
}

ps> & $s
1
2
3
4 
```

return 语句用于提前退出函数，并可选择将一个或多个对象写入输出流（除了已经发出的其他输出）。

如果您不想获得输出，请使用以下语法之一：

```
$null = mycommand 
mycommand > $null
[void] (mycommand) 
```

您在输出中看到两个额外的“作业”对象的原因是两者都分别返回创建`start-job`和`wait-job`等待的作业对象。这样做的原因是允许流水线：

```
$results = start-job { ... } | wait-job | receive-job 
```

这里发生了什么事？好吧，`start-job`创建一个作业并将其传递给`wait-job`它，等待作业完成，然后将作业传递给`receive-job`，它返回结果并最终分配给`$results`。

下列的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:59:42.490

我也有同样的问题。我通过不使用`return`关键字来解决它；而不是退出`return $data`尝试只是使用`$data`作为远程作业中的最后一条语句：

```
$myjob =
{
  # regerate some $data
  $data
} 
```

我不知道为什么这似乎有效。

我也在像这样调用我的远程工作：

```
$job = Invoke-Command -ComputerName $servers -FilePath $myRemoteScript -ArgumentList $myArgs -AsJob -JobName $jobName | Get-Job | Wait-Job
$data = Receive-Job -Job $job 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-21T11:24:46.730

我也遇到了同样的问题，我想排除评论。因此，最简单的解决方案是使用以下方法编写您的评论：

`Write-Host("Your comments ") -Fore Red`

# robolectric - 我们如何在 Robolectric 中访问应用程序的上下文？

> ID：13684094
> 
> 赞同：121
> 
> 时间：2012-12-03T13:18:47.107
> 
> 标签：robolectric

实际上，我需要得到 API 调用的响应，因为我需要`Context`.

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-12-03T18:10:23.107

**更新。**

仅用于版本 1.x 和 2.x：

```
Robolectric.application; 
```

对于 3.x 版：

```
RuntimeEnvironment.application; 
```

对于 4.x 版：

*   添加到您的`build.gradle`文件中：

    ```
    testImplementation 'androidx.test:core:1.0.0' 
    ```

*   检索上下文：

    ```
    ApplicationProvider.getApplicationContext() 
    ```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-03-31T11:28:26.740

您可以使用

```
RuntimeEnvironment.application 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-12-24T08:08:48.650

添加

```
testImplementation "androidx.test:core-ktx:${deps.testrunner}" 
```

并使用：

```
private val app = ApplicationProvider.getApplicationContext() 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-01-31T04:27:41.080

用这个：

```
Robolectric.application 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-07-02T14:52:34.773

对于 2019 年最新的 Robolectric 4.3 `

> ShadowApplication.getInstance()

` 和

> 机器人应用

都被贬低了。所以我正在使用

```
Context context = RuntimeEnvironment.systemContext; 
```

获取上下文。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-12T03:03:01.810

要获取应用程序上下文，您必须执行以下操作：

1.  注释@RunWith(RobolectricTestRunner.class)
2.  RuntimeEnvironment.application.getApplicationContext()

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-10-07T17:19:19.363

在某些情况下，您可能需要应用程序的上下文而不是 Robolectris 默认上下文。例如，如果你想获取你的包名。默认情况下，Robolectric 会返回你`org.robolectric.default`的包名。要获取您的真实包名，请执行以下操作：

构建.gradle

`testImplementation 'org.robolectric:robolectric:4.2.1'`

你的测试类：

```
@RunWith(RobolectricTestRunner.class)
@Config( manifest="AndroidManifest.xml")
public class FooTest {

@Test
public void fooTestWithPackageName(){
    Context context = ApplicationProvider.getApplicationContext();
    System.out.println("My Real Package Name: " + context.getPackageName());
}

} 
```

确保在您的运行/调试配置工作目录中设置为：$MODULE_DIR$ [![在此处输入图像描述](../Images/5777a8da3ae7c4c7ca64e1191325ffdc.png)](https://i.stack.imgur.com/siN05.png) [![在此处输入图像描述](../Images/cdf37b77361db0d7b1cdbe7892981d6a.png)](https://i.stack.imgur.com/gSB0h.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-10T22:00:33.257

首先将以下内容添加到您的`build.gradle`：

`testImplementation 'androidx.test:core:1.2.0'`

然后使用：

`ApplicationProvider.getApplicationContext() as Application`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-30T10:42:56.733

同意@EugenMartynov 和@rds 的回答......

可以在 Volley-Marshmallow-Release 找到一个简单的示例

在 NetworkImageViewTest.java

`// mNIV = new NetworkImageView(Robolectric.application); mNIV = new NetworkImageView(RuntimeEnvironment.application);`

排球链接可用 [https://android.googlesource.com/platform/frameworks/volley/+/marshmallow-release](https://android.googlesource.com/platform/frameworks/volley/+/marshmallow-release)

您必须在 android studio 的 volley 模块中添加依赖项：

`dependencies { testCompile 'junit:junit:4.12' testCompile 'org.mockito:mockito-core:1.10.19' testCompile 'org.robolectric:robolectric:3.1.2' }`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-01-10T23:20:08.293

这适用于 Robolectric 3.5.1：`ShadowApplication.getInstance().applicationContext`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-08-14T07:55:40.103

从 7 月 21 日的[4.0-alpha-3 版本](https://github.com/robolectric/robolectric/commits/robolectric-4.0-alpha-3)开始，他们[删除了](https://github.com/robolectric/robolectric/commits/robolectric-4.0-alpha-3/shadows/framework/src/main/java/org/robolectric/shadows/ShadowApplication.java) `ShadowApplication.getApplicationContext()`. 坚持[`RuntimeEnvironment.application.getApplicationContext()`](https://github.com/robolectric/robolectric/blob/master/shadows/framework/src/main/java/org/robolectric/RuntimeEnvironment.java)使用`@RunWith(RobolectricTestRunner::class)`.

顺便说一句，他们[当前的指南](http://robolectric.org/using-qualifiers/)有一个使用以下方法获取字符串资源的示例：

```
final Context context = RuntimeEnvironment.application; 
```

（请注意，javadocs[`RuntimeEnvironment`](http://robolectric.org/javadoc/latest/org/robolectric/RuntimeEnvironment.html)和[`ShadowApplication`](http://robolectric.org/javadoc/latest/org/robolectric/shadows/ShadowApplication.html)当前反映的是非 alpha 3.x 版本。）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-10T05:55:55.913

`Robolectric.getShadowApplication()`使用比直接使用更安全`Robolectric.application`。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-07-13T17:51:08.103

好的，所以我知道很多其他人以前说过这个答案，可能已经过时了

```
 when(mockApplication.getApplicationContext()).thenReturn(RuntimeEnvironment.application);
    when(mockApplication.getFilesDir()).thenReturn(RuntimeEnvironment.application.getFilesDir());

    sharedPref = RuntimeEnvironment.application.getSharedPreferences(KEY_MY_PREF, Context.MODE_PRIVATE);
    sut = new BundleManagerImpl(mockApplication,
            processHtmlBundle, resultListener, sharedPref); 
```

我得到了 null，因为 when() 部分是在 sut 初始化之后。它可能对你们中的一些人有所帮助。

我也有

```
@RunWith(CustomRobolectricTestRunner.class)
@Config(constants = BuildConfig.class) 
```

在课程开始时

还

```
 when(mockApplication.getApplicationContext()).thenReturn(RuntimeEnvironment.application.getApplicationContext()); works 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-13T22:05:22.787

在你的情况下，我认为你应该注意你实际测试的是什么。有时遇到无法测试的代码或看似无法测试的代码的问题*表明*您的代码可能需要重构。

对于 API 调用响应，您可能不想测试 API 调用本身。可能不需要测试是否可以从任意 Web 服务发送/接收信息，而是您的代码*以预期的方式处理和处理您的响应。*

在这种情况下，重构您尝试测试的代码可能会更好。将响应解析/处理分解到另一个接受简单的类，并通过注入示例字符串响应*对该类*`String`进行测试。

 *这或多或少遵循*单一职责*和*依赖倒置*的思想（[SOLID](https://en.wikipedia.org/wiki/SOLID_(object-oriented_design))中的**S**和**D**）*

# android - 下载图像有时仅显示为空白图像

> ID：13684098
> 
> 赞同：0
> 
> 时间：2012-12-03T13:18:59.547
> 
> 标签：android, android-image

我从 asyncTask 中的 url 下载图像。

我下载了 100 张图片，其中大约 3-4 张只是一张黑色图片，看起来下载被中断或类似的东西。所以图片就像损坏的文件或其他东西......

我真的不明白，因为我有快速稳定的互联网，它只有 100 张和其他人中的 3-4 张图像，而不是相同的图像。

这是我的下载方法：

```
private void downloadPicture(String strURL, String id) {

    id = id.trim();

    InputStream input;
    try {

        URL url = new URL(strURL);
        input = url.openStream();
        byte[] buffer = new byte[1500];

        File DownloadFolder = new File(Environment
                .getExternalStorageDirectory().getPath() + "/myTest/");
        DownloadFolder.mkdirs();

        OutputStream output = new FileOutputStream(
                DownloadFolder.toString() + "/" + id + "samplePicture.png");
        try {
            int bytesRead = 0;
            while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                output.write(buffer, 0, bytesRead);
            }
        } finally {
            output.close();
            buffer = null;
        }
    } catch (Exception e) {
        Log.e("Exception while grabbing image from URL", e.toString());

    }
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:38:30.677

首先，如果您`downloadPicture(String strURL, String id)` 在线程中使用此函数并行下载图像，则使用`thread pool`并保持池的大小小于 5。这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:18:47.403

试试这个代码剪断。

```
import java.io.BufferedInputStream;
    import java.io.File;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.net.URL;
    import java.net.URLConnection;

    import org.apache.http.util.ByteArrayBuffer;

    import android.util.Log;

    public class ImageManager {

            private final String PATH = "/data/data/com.helloandroid.imagedownloader/";  //put the downloaded file here

            public void DownloadFromUrl(String imageURL, String fileName) {  //this is the downloader method
                    try {
                            URL url = new URL("http://yoursite.com/&quot;" + imageURL); //you can write here any link
                            File file = new File(fileName);

                            long startTime = System.currentTimeMillis();
                            Log.d("ImageManager", "download begining");
                            Log.d("ImageManager", "download url:" + url);
                            Log.d("ImageManager", "downloaded file name:" + fileName);
                            /* Open a connection to that URL. */
                            URLConnection ucon = url.openConnection();

                            /*
                             * Define InputStreams to read from the URLConnection.
                             */
                            InputStream is = ucon.getInputStream();
                            BufferedInputStream bis = new BufferedInputStream(is);

                            /*
                             * Read bytes to the Buffer until there is nothing more to read(-1).
                             */
                            ByteArrayBuffer baf = new ByteArrayBuffer(50);
                            int current = 0;
                            while ((current = bis.read()) != -1) {
                                    baf.append((byte) current);
                            }

                            /* Convert the Bytes read to a String. */
                            FileOutputStream fos = new FileOutputStream(file);
                            fos.write(baf.toByteArray());
                            fos.close();
                            Log.d("ImageManager", "download ready in"
                                            + ((System.currentTimeMillis() - startTime) / 1000)
                                            + " sec");

                    } catch (IOException e) {
                            Log.d("ImageManager", "Error: " + e);
                    }

            }
    } 
```

# java - jboss as 7 在 webapp 初始化期间以编程方式查询管理端口

> ID：13684100
> 
> 赞同：3
> 
> 时间：2012-12-03T13:19:08.107
> 
> 标签：java, jboss

我已按照[获取有关 jboss](https://stackoverflow.com/questions/6153661/obtain-information-about-jboss)问题的信息中的建议，在我的 webapp 启动期间从 JBoss 检索管理端口设置`ServletContextListener.contextInitialized`。

这在 JBoss 启动后部署我的 webapp 时工作正常，但是当 JBoss 在已经部署的 webapp 的情况下启动时它不起作用，因为相应的 JBoss MBean`"jboss.as:socket-binding-group=standard-sockets,socket-binding=management-native"`尚未注册，我被`InstanceNotFoundException`抛出。

是否可以将 webapp 初始化推迟到 JBoss 完全启动并运行（例如，通过对某个模块的显式依赖或其他机制）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:26:25.123

我通过在启动后简单地产生一个线程来做我想做的事情来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T12:24:53.260

看起来像一个错误：

[https://issues.jboss.org/browse/WFLY-3557](https://issues.jboss.org/browse/WFLY-3557)

[https://bugzilla.redhat.com/show_bug.cgi?id=1114479](https://bugzilla.redhat.com/show_bug.cgi?id=1114479)

目前没有解决方法。

# sql - 函数返回没有任何值

> ID：13684101
> 
> 赞同：0
> 
> 时间：2012-12-03T13:19:08.353
> 
> 标签：sql, function, oracle10g

我在函数中有一个 sql 查询

```
SELECT  DISTINCT (product_id)
      INTO  prod
      FROM  products
     WHERE       mfg_no = 'TEL'             
                AND status = p_status 
```

有时 product_id 为 null 或 p_status 没有数据。因为这个函数不返回任何值。

我尝试了 nvl、decode 和 case 语句来检查 product_id，但没有一个不起作用。即使 product_id 为 null 或为空，如何确保我的函数正常执行？

我试图在 EXCEPTION 块中返回一个值，如下所示，这也无济于事。

```
EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        prod := 'NA'; 
```

*编辑 1*

```
CREATE OR REPLACE FUNCTION my_function (p_status VARCHAR2)
    RETURN VARCHAR2
AS
    prod     VARCHAR2 (2000);
BEGIN
    prod := NULL;  

    SELECT  DISTINCT (product_id)
      INTO  prod
      FROM  products
     WHERE  mfg_no = 'TEL' AND status = p_status;

    RETURN prod;
EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        prod := 'N/A';
        DBMS_OUTPUT.put_line ('no data found ' || SQLERRM);
    WHEN OTHERS
    THEN
        DBMS_OUTPUT.put_line ('error ' || SQLERRM);
        prod := 'N/A';
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:29:40.340

试试这样：

```
CREATE OR REPLACE FUNCTION my_function (p_status VARCHAR2)
    RETURN VARCHAR2
AS
    prod     VARCHAR2 (2000);
BEGIN
    prod := NULL;

  BEGIN
    SELECT  DISTINCT (product_id)
      INTO  prod
      FROM  products
     WHERE  mfg_no = 'TEL' AND status = p_status;

  EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        prod := 'N/A';
        DBMS_OUTPUT.put_line ('no data found ' || SQLERRM);
    WHEN OTHERS
    THEN
        DBMS_OUTPUT.put_line ('error ' || SQLERRM);
        prod := 'N/A';
  END;

  RETURN prod;

END; 
```

* * *

*要查看无记录*和*空值*之间的区别，请参阅[此 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/09e8c/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:50:13.983

另一种解决方案，使用 NVL / MAX 而不是 DISTINCT / 异常处理：

```
CREATE OR REPLACE FUNCTION my_function (p_status VARCHAR2)
    RETURN VARCHAR2
AS
    prod     VARCHAR2 (2000);
BEGIN
    SELECT  NVL(MAX(product_id), 'N/A')
      INTO  prod
      FROM  products
     WHERE  mfg_no = 'TEL' AND status = p_status;
  RETURN prod;

END; 
```

# asp.net-mvc - 显示 ID 字段 MVC

> ID：13684109
> 
> 赞同：0
> 
> 时间：2012-12-03T13:19:21.330
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

在 MVC4 中，如何显示数据库中的 ID 字段。我不想像您一样编辑该字段，而只是将其与其他字段一起显示？

```
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Title)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Genre)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
        @Html.ActionLink("Details", "Details", new { id=item.ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.ID })
    </td>
</tr> 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:42:22.573

就像你对标题和流派所做的一样

```
 @Html.DisplayFor(modelItem => item.ID) 
```

阅读本教程以帮助您了解 MVC

[MVC 4 音乐教程](http://www.asp.net/mvc/tutorials/mvc-music-store)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:10:32.013

也许是这样的（尽管有多种方法可以做到这一点）：

```
@Html.LabelFor(model => model.ID) 
```

# networking - ipv6 环回接口 ( ::1/128 )

> ID：13684110
> 
> 赞同：-1
> 
> 时间：2012-12-03T13:19:23.890
> 
> 标签：networking, linux-kernel, ipv6, ipsec

环回接口（ ::1/128 ）未添加到路由表中的原因可能是什么？我正在使用命令检查：“route -n inet6 -A”

有时，环回接口没有条目。请注意：ipv6 已启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:36:07.540

它在另一张桌子上。尝试

```
ip -6 route show table local 
```

在 Linux 中，默认情况下存在三种不同的路由表。在正常使用中，几乎所有内容都可以在`main`表中找到（附加表通常只对策略路由等有用），但 Linux 本身确实将`local`表用于内部/内置路由。

# hibernate - 在同一事务中插入多个数据库

> ID：13684116
> 
> 赞同：1
> 
> 时间：2012-12-03T13:19:38.790
> 
> 标签：hibernate, sessionfactory

大家好，

我有一个要求，比如我必须在同一个事务中在不同的数据库（比如 SQL 和 ORACLE）中执行 CRUD 操作。有没有办法做到这一点？

(1) 是否可以使用一个 SessionFactory 来实现这一点，如果可以，那么如何实现？

(2) 是否可以使用两个不同的 Sessionfactory 来做到这一点，如果那么如何？

我唯一的条件是当我触发一个查询以插入时，它应该同时插入到两个数据库中。

我希望我对我的问题很清楚。等待你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:44:43.977

您可以使用全局事务。这是在 Java 事务 API 中指定的。许多应用程序服务器确实支持使用专有事务管理器，而该事务管理器又可以在您的会话工厂中使用。基本思想是使用数据库必须支持的两阶段提交协议（他们需要了解准备命令）。通常发现这些驱动程序是为了寻找 XA 兼容性。例如，Oracle 的 Weblogic 应用服务器已经附带了一个 XA 兼容的 Oracle 驱动程序。无论如何，这对于其他应用服务器可能会有所不同。

JTA 基于[XOpen XA](http://en.wikipedia.org/wiki/X/Open_XA)，您应该通读它以了解全局。

G-Man 为 Atomikos 的配置提供了一个很好的链接，以防您的应用服务器没有提供合适的 TA 管理器或者您不想使用应用服务器。

# c# - 获取客户日期格式

> ID：13684117
> 
> 赞同：1
> 
> 时间：2012-12-03T13:19:42.637
> 
> 标签：c#, javascript

我从 ActiveX 组件（在 .NET 中开发。日期格式未知，例如给出***DateTime.Now.toString()***）。所以我得到的日期是**2012 年 6 月 8 日，**而不是2012 年**8 月 18 日**。使用时如何获得 2012 年 8 月 18 日`new Date()`？

这是代码：

```
signerDetails = signerLib.FetchCertDetails();
var certDetails = signerDetails.split('$$$$$$');
var cardDate = new Date(certDetails[1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:25:55.923

我建议您更新您的 ActiveX 组件以返回 RFC2822 或 ISO 8601 格式的日期，这样您就可以创建一个新的日期实例，而无需任何类型的手动解析。在 C# 中非常简单，.NET 有一个内置的[格式说明符](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#Roundtrip)，例如

```
var iso8601Date = DateTime.UtcNow.ToString("o"); 
```

[Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)类有一个重载，它将日期作为字符串接收，这在内部调用[Date.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)，它需要该特定格式的日期。

或者，您可以以[纪元格式](http://en.wikipedia.org/wiki/Unix_time)返回您的日期，但这需要一些额外的工作。

# ruby-on-rails - rails helper recursive block 奇怪的行为

> ID：13684126
> 
> 赞同：0
> 
> 时间：2012-12-03T13:20:28.957
> 
> 标签：ruby-on-rails, view-helpers

以下代码应接受嵌套代码并在“li”标签中产生

```
def sidebar_link(text,link, color = nil)
  recognized = Rails.application.routes.recognize_path(link)
  output = ""
  content_tag(:li, :class => ( "sticker sticker-color-#{color}" if color) ) do
  if recognized[:controller] == params[:controller] && recognized[:action] == params[:action]
    output << link_to( text, link, :class => 'lead')
  else
    output << link_to( text, link) 
  end
  output << yield if block_given?
  raw output
 end
end 
```

在 HAML 视图中：

```
 %ul
        = sidebar_link 'Tickets', tickets_path, :orange do
          %ul.sub-menu
            = sidebar_link "Service Requests #{ServiceRequest.all.count}", service_requests_path
        = sidebar_link 'Problems', problems_path, :green
        %li.divider
        = sidebar_link 'Clients', clients_path, :blueDark
        = sidebar_link  'Services', services_path, :red do
          %ul.sub-menu
            = sidebar_link 'Categories', categories_path 
```

这会生成正确的 HTML，但第一个链接除外。输出不包含“Tickets”字样，但其他一切似乎都很好。

那么为什么会出现这种奇怪的行为呢？辅助递归混淆“输出”变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:43:46.207

我找到了明确使用 &block 的解决方案，如下所示

```
def sidebar_link(text,link, color = nil, &block)
 recognized = Rails.application.routes.recognize_path(link)
 output = ""
 content_tag(:li, :class => ( "sticker sticker-color-#{color}" if color) ) do
  output << link_to( text, link, :class => ( 'lead' if recognized[:controller] == params[:controller] && recognized[:action] == params[:action]) )
  output << capture(&block) if block_given?
  raw output
 end
end 
```

# javascript - 以横向格式打印

> ID：13684128
> 
> 赞同：62
> 
> 时间：2012-12-03T13:20:47.550
> 
> 标签：javascript, printing

> **可能重复：**
> [从 HTML 横向打印](https://stackoverflow.com/questions/138422/landscape-printing-from-html)

我正在使用下面的代码在按钮单击时显示打印窗口：

```
function print_onclick() {
    window.print();
    return false;
} 
```

我希望页面以横向格式打印。我可以在上面的代码中添加任何属性以使其工作吗？

附加信息：由于我的页面宽度为 1280 像素，当我在 A4 纸上纵向打印时，字体变得太小。我只想打印 2 行。如果不是横向的，有没有办法在打印时修复这些表格单元格/div 的字体大小？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-12-03T13:24:30.480

你不能在 javascript 中设置这个，你必须用 html/css 来做：

```
<style type="text/css" media="print">
  @page { size: landscape; }
</style> 
```

编辑：有关浏览器支持的更多信息，请参阅此问题和接受的答案：[@Page { size:landscape} 是否已过时？](https://stackoverflow.com/questions/4249532/is-page-sizelandscape-obsolete)

# android - 使用耳机按钮录制声音

> ID：13684133
> 
> 赞同：4
> 
> 时间：2012-12-03T13:21:05.020
> 
> 标签：android, audio-recording, headset

我的耳机中心按钮有问题。我想做的是在按下耳机按钮时录制声音。松开按钮后，录音停止。这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    text = (TextView) findViewById(R.id.text);

}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK && shouldContinue == true) {
        shouldContinue = false;
        text.setText("KEY DOWN");

                    audioRecorder = new MediaRecorder();
                    audioRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    audioRecorder
                            .setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                    audioRecorder
                            .setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                    audioRecorder.setOutputFile(Environment
                            .getExternalStorageDirectory().getAbsolutePath()
                            + "/test.3gp");

                    try {
                        audioRecorder.prepare();

                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                    audioRecorder.start();
                }
    return false;
}

public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK) {
        text.setText("KEY UP");
        audioRecorder.stop();
        audioRecorder.release();
        shouldContinue=true;

    }
    return false;
} 
```

问题是，当我按住耳机按钮时，麦克风会以某种方式禁用并导致声音文件为空，但是如果不按住该按钮（例如，如果我在 onCreate 中移动 audioRecorder 代码）一切正常（声音被录制）。

我只想知道是否可以在按下中间耳机按钮的情况下录制声音，或者这是硬件问题，我对此无能为力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T20:51:01.557

抱歉，但我认为由于硬件原因无法完成。

Android 耳机插孔有 4 个连接：Tip=LeftAudio、Ring=RightAudio、Ring2=Ground、Sleeve=Mic。（我可能将 Ring2 和 Ground 颠倒了）。HeadsetHook 按钮通过短接 Ring2 和 Sleeve 来发送信号。因此，按下它会使麦克风短路，这就解释了为什么要录制静音。糟透了。无法进行 PushToTalk。

您的一种选择是在 onKeyDown 上开始录制并在再次单击时停止录制。即使这也不是简单的，因为如果按钮被按下足够长的时间，您将获得多个 onKeyDowns。所以跳过 onKeyDown 并使用 onKeyUp。它避免了“Google Now”媒体按钮的麻烦。就像是...

```
boolean recording = false;

// don't need to override onKeyDown()
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK) {
        if (recording)
            stopAndSaveRecording();
        else
            startRecording();
        recording = ! recording;
    }
    return true;
} 
```

请注意，您将在结束点击期间录制静音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:33:20.953

将此代码包含在您的 if 条件中

现在应该是这样的。

```
 if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK && shouldContinue == true && event.getAction() == KeyEvent.ACTION_DOWN) 
```

**更新**

你在`onKeyUp(int keyCode, KeyEvent event)`事件中自己停止它:)

# testing - 将 TDD 应用于功能测试

> ID：13684134
> 
> 赞同：0
> 
> 时间：2012-12-03T13:21:07.533
> 
> 标签：testing, tdd, automated-tests

我们已经开发了 2 个月的产品，它的单元测试覆盖率很高。我们中的大多数人也在先编写测试，然后再编写代码。这意味着我们可以信任我们的测试，因为我们使用先红后绿的方法。

迄今为止，我们已经手动向客户演示了我们的功能。然而，随着我们开始涵盖越来越多的需求，我们有必要使用功能测试来涵盖这些需求。

目前我们没有功能测试。

我们有一个处理需求的团队成员，我相信他会是编写功能测试的好人。不过我担心的是功能的开发和功能测试的编写会不同步。也就是说，测试不一定要在功能完全实现之前编写。

以后我们是否应该制定一个规则，即在功能之前编写功能测试？换句话说，先红，后绿。还是有其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:50:07.807

您所描述的您想要使用的方法称为行为驱动开发 (BDD)。本质上，它类似于功能测试的测试驱动开发。以功能测试的形式描述需求或行为（或用例或场景，但您在自己的商店中指定需求取决于您），并附有进入和退出条件，然后重复使用 TDD 来实现它系统中的行为。

一种支持 BDD 的简单（和轻量级）开源框架称为[FitNesse](http://fitnesse.org/)。它是一个用于捕获需求的 wiki 风格的编辑器。在每个需求中，您都包含一个示例请求和结果表，Fitnesse 然后会自动调用服务并为您测试它们。它不是最好的工具，而且我认为它的扩展性不好，但它是你可以快速开始使用的东西。另一个工具（比 FitNesse 更好，或者我听说过）是[soapUI](http://www.soapui.org/About-SoapUI/what-is-soapui.html) ，它更完整，可以做一些事情，比如代替缺失的服务、做负载测试、组织测试等等。

TDD 和 BDD 之间的一个区别在于，在 BDD 中，您的功能测试可能会或可能不会完全自动化，具体取决于行为的性质。自动化程度越高越好，但有时让人类更容易运行脚本或观察一些结果。BDD 所需的测试环境也可能更复杂，包含实际的数据库和服务。虽然这意味着您可以以现实的方式对行为进行全面测试，但这也意味着您必须拥有一个充满应用程序所依赖资源的测试环境。这不是一件坏事，这只是你的测试变得真实的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:34:23.987

如果它们不适合您，您不应该将自己锁定在模式中（例如先红色，后绿色）。在您的情况下，我认为在您进行功能测试之前拥有功能没有问题，因为您已经拥有良好的单元测试覆盖率。

但这只是我，我相信铁杆 TDD：ers 会不同意。

# jquery - 无法使用 jquery 更改链接的文本

> ID：13684135
> 
> 赞同：0
> 
> 时间：2012-12-03T13:21:08.163
> 
> 标签：jquery

我有这个代码一些链接，但我不能用 jquery 更改文本。

我试过了

```
 if($("a").text() == 'some link') {
   $("a").text('success');
  } 
```

但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:25:42.673

做这个

```
$('a').each(function(){
  if($(this).text()=="some link"){
      $(this).text("success");
  }
}); 
```

这将一一查看所有标签并检查它们是否具有“某些链接”。使用您的代码，您正在查看所有标签，文本可能是“link1link2link3link4”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:33:20.920

如果您在谈论**links**，那么您应该使用 attr 属性获取“href”属性

```
$('a').each(function(){
  if($(this).attr('href')=="some link"){
      $(this).text("success");
  }
}); 
```

我希望这有帮助。

# ios - 获取节标题视图的索引路径

> ID：13684136
> 
> 赞同：3
> 
> 时间：2012-12-03T13:21:08.290
> 
> 标签：ios, uitableview

我的 ViewController 上有两个表。我通过拖放将一个表中的单元格添加到另一个表中。现在我的目标表是一个分组表，我在其中实现了展开 - 折叠逻辑。部分标题视图是一个自定义 UIView。我的问题是，当我将单元格拖动到目标表部分时，我希望该部分打开或展开。但我无法获得这样做的索引路径。

如何获取目标表部分的索引路径？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:24:19.917

为此，您可以实现触摸开始动画，如果手指触摸目标表视图，则获取触摸坐标并计算目标表中的部分。Lil 很棘手，但希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:12:35.173

我得到了解决方案。我使用手势识别器的 locationInView: 方法来获取当前点。我使用表格框架、行高和部分标题自定义视图的高度等参数来计算在拖动的单元格下触摸了哪个部分，从而获得了该部分的索引路径。谢谢。

# ruby - 错误：执行 gem 时 ... (Zlib::GzipFile::Error) 不是 gzip 格式

> ID：13684137
> 
> 赞同：8
> 
> 时间：2012-12-03T13:21:10.067
> 
> 标签：ruby, gem, sencha-touch, sass, compass-sass

我正在开发 Sencha touch 2 应用程序。我一直在关注关于 secha 触摸应用程序主题的“ [Sencha Touch 应用程序的用户界面样式”教程。](http://www.netmagazine.com/tutorials/styling-user-interface-sencha-touch-application)

它需要我安装 Ruby、Compass 和 SASS。我使用来自 ruby​​installer.org 的安装程序安装了 Ruby。

在执行以下命令时，我得到了确认正确安装的预期结果：

```
C:\>ruby -v

ruby 1.9.3p327 (2012-11-10) [i386-mingw32] 
```

当前来源是最新的：

```
C:\>gem sources

** CURRENT SOURCES **

http://rubygems.org/ 
```

接下来，由于我在代理后面，我使用以下命令安装 HAML/Compass：

```
C:\>gem install -p [proxy:port] compass

ERROR:  While executing gem ... (Zlib::GzipFile::Error)
not in gzip format** 
```

有人能帮我吗？我找到了系统更新、gem 源更新等解决方案，但我的系统上的所有内容都是最新的。

* * *

编辑：

```
C:\>gem install compass 
```

在我的私人系统上运行良好。当我在工作场所尝试相同的命令时，我需要使用上面提到的代理，这会导致错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T06:07:42.123

我假设发生错误是因为我工作场所的网络感知阻止了这些下载。

**解决方案**：我直接从[http://rubygems.org/gems](http://rubygems.org/gems)下载了所需的 gem：**chunky_png、fssm、compass、sass、haml**等，并将这些 gem 放在我的本地目录中。

在这之后我尝试了`gem install compass`。这首先搜索您的本地目录。找到所需的 gem 后，就会进行安装。不需要连接到 ruby​​ 网站。

注意：从 gems 所在的路径运行命令

例如：我已将宝石放在 C:\Ruby193\lib\ruby\gems\1.9.1\gems

所以我运行以下命令：

`C:\Ruby193\lib\ruby\gems\1.9.1\gems>gem install compass`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:57:09.853

我遇到了类似的问题，它可以在我自己的私人笔记本电脑上运行，但在工作中使用使用代理的虚拟服务器（运行 Ubuntu 12.10）时失败。

按照我在[这里](http://www.ruby-forum.com/topic/2973966)找到的建议，从我定义的命令行：

```
export HTTPS_PROXY=proxy-address:proxy-port-number

export HTTP_PROXY=proxy-address:proxy-port-number 
```

然后我的*gem 安装包*工作正常。

# concurrency - 为什么 ReadOnlyDictionary 不是线程安全的？

> ID：13684143
> 
> 赞同：12
> 
> 时间：2012-12-03T13:21:33.307
> 
> 标签：concurrency, dictionary, thread-safety, immutability, .net-4.5

我正在寻找一个可以从多个线程访问的只读字典。虽然 ConcurrentDictionary 公开了这些功能，但我不想有开销和奇怪的 API。

.Net 4.5 在提供这样一个类的同时，文档指出只有静态调用是安全的。

我想知道为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T13:25:58.097

[`ReadOnlyDictionary`](http://msdn.microsoft.com/en-us/library/gg712875.aspx)只是任何其他字典的包装。因此，它仅与底层字典一样是线程安全的。

特别是，如果有一个线程在修改底层字典，而另一个线程从包装器中读取，则无法保证安全。

如果你想要一个`ReadOnlyDictionary`从*所有*角度都有效地不可变的，你可以创建一个原始字典的克隆，`ReadOnlyDictionary`围绕它创建一个包装器，然后不要在任何地方保留对克隆的引用。*只*进行读取操作，它应该是线程安全的。当然，如果键或值类型是可变的，则需要担心第二级“线程不安全”。

# forms - 如何将数据从数据库加载到我自己的自定义字段类型（表单）

> ID：13684144
> 
> 赞同：0
> 
> 时间：2012-12-03T13:21:32.310
> 
> 标签：forms, symfony

我想创建一个自定义表单字段。例如，选择世界城市的字段。我读了这篇文章。在本文中，使用参数文件 config.ynl 加载数据。但是，我想从我的数据库中上传这些数据。

[http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)

有人可以告诉我如何执行此操作或将链接发送到示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:48:20.993

在这种情况下，最好使用[实体字段](http://symfony.com/doc/2.0/reference/forms/types/entity.html)而不是选择字段。它允许您请求您的数据库以如下方式加载您的实体，

```
$builder->add('MyField', 'entity', array(
    'class' => 'MyBundle:MyEntity',
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('e');
    },
    'property' => 'something',
)); 
```

该[`property`](http://symfony.com/doc/2.0/reference/forms/types/entity.html#property)选项定义您要使用的实体属性。

然后，您可以使用“多个”和“扩展”选项自定义您的字段，以[按照您想要的方式行事](http://symfony.com/doc/2.0/reference/forms/types/entity.html#select-tag-checkboxes-or-radio-buttons)。阅读[文档](http://symfony.com/doc/2.0/reference/forms/types/entity.html)

# android - 如何通过设置蓝牙连接发送信息

> ID：13684149
> 
> 赞同：0
> 
> 时间：2012-12-03T13:21:46.370
> 
> 标签：android, sockets, bluetooth

所以我正在使用蓝牙并试图弄清楚如何通过蓝牙连接发送两个字符串。从一个 android 设备到另一个。

我找到了本指南[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html) 但它谈到了很多关于设置连接的内容。所以我直接进入了关于管理连接的章节。我这样做的原因是，在我创建的应用程序中，我计划在打开应用程序之前设置蓝牙连接（通过手机通常的蓝牙设置），然后打开应用程序并在必要时发送。

所以我的问题是如何找到应该设置的蓝牙插座？既然这应该是我寻找创建发送和接收线程的内容？

希望这是足够的信息，否则请告诉您还需要什么，并尽我所能尝试回答。

最好的问候 Drakthal

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:37:14.800

通常的蓝牙设置仅在设备之间配对，它不会在它们之间创建数据连接（即使会，您也无法访问此`Socket`对象，因为它不是在您的过程中创建的）。

开启蓝牙后，您可以拨打电话`BluetoothAdapter.getBondedDevices()`获取一组已配对的设备。然后，您可以遍历它们，并启动与您想要的连接的连接。您*无法*避免创建连接:(如果您想要一个简化的示例，您可以查看[此处](https://stackoverflow.com/questions/7273084/how-to-programatically-connect-2-android-devices-with-bluetooth/7934426#7934426)（我不久前发布的一个答案，关于蓝牙的整个配对/连接/发送/接收主题）。

一旦你获得了一个开放的连接，发送 2 字符串就很容易了。

```
String s1 = "A", s2 = "B";
byte[] buf1 = s1.getBytes(), buf2 = s2.getBytes();
OutputStream os = connection.getOutputStream();
os.write(buf1);
os.write(buf2);
os.flush();
connection.close(); 
```

# jsf-2 - JSF PanelGrid 与表格

> ID：13684152
> 
> 赞同：0
> 
> 时间：2012-12-03T13:21:54.103
> 
> 标签：jsf-2

JSF 2 Panel 网格与 HTML 表格的优势是什么？

例如

```
<h:panelGrid columns="1">
 <h:outputText value="Hello"/>
</h:panelGrid> 
```

对比

```
<table>
<tr>
<td>
 <h:outputText value="Hello"/>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:48:18.273

`"h:panelGrid"`JSF 中的标签用于生成 HTML 表格标签。它将 JSF 组件放置在行和列布局中。使用它的好处是您不必键入所有这些 html 标记。

例如，在这里你必须在你的编码中输入所有这些 html 标签，

```
<table>
<tbody>
<tr>
    <td>
        Enter a Phone number : 
    </td>       
    <td>
        <h:inputText id="input1" value="#{bean.input1}" 
            size="20" required="true"
            label="Number" >
            <f:convertNumber />
        </h:inputText>
    </td>
    <td>
        <h:message for="input1" style="color:red" />
    </td>
</tr>
</tbody>
</table> 
```

但同样的事情可以通过键入以下内容使用“h:panelGrid”来完成，

```
<h:panelGrid columns="3">
    Enter a Phone number : 
    <h:inputText id="input1" value="#{bean.input1}" 
        size="20" required="true"
        label="Number" >
        <f:convertNumber />
    </h:inputText>
    <h:message for="input1" style="color:red" />
</h:panelGrid> 
```

[JSF doc](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/panelGrid.html)提供了更多细节，panelGrid 也有一些限制。对齐各种面板非常容易，并且您可以在面板中拥有 JSF 表单控件（），而无需 UI 开发人员的太多帮助。

PanelGrid 的限制之一是：应用 CSS 样式并不容易。您需要寻找替代解决方案。但是使用标准的 html 标签可以很容易地应用 CSS 样式。JSF2 Primefaces 提供了主题，但在实时应用程序开发中我无法避免 CSS 样式。但是使用 PanelGrid，您几乎可以使用任何适合 PanelGrid 呈现的 html 的 JSF 控件。

# python - 如何在 django 中创建模型字段的动态选择

> ID：13684153
> 
> 赞同：0
> 
> 时间：2012-12-03T13:21:53.417
> 
> 标签：python, django

```
class Task(models.Model):

    owner_set=set()
    for each in User.objects.all():
         owner_set.add((each.username,each.username))

    Owner = models.CharField(max_length=100,choices=owner_set) 
```

在代码中，我通过用户的选择创建了一个字段，但这会导致一个问题：当我创建一个新用户时，新用户名不会出现在“所有者”的字段中；我需要重新启动服务器。所以我希望所有者提交的文件应该是动态的，有没有办法做到这一点？

我不想使用，`Owner= models.ForeignKey(User,...)`因为可能我不仅会使用来自 auth_user 的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:26:05.253

为什么要将 Owner 存储为 CharField？如果它是对 User 对象的引用，它应该是 ForeignKey。

**评论后编辑**您的数据模型似乎已损坏。不过，如果您真的想将其保留为 CharField，则根本不应该尝试在模型中设置选项。定义一个自定义表单并使用 ModelChoiceField 或在表单的`__init__`方法中设置选项。

# android - 如何在没有 java 的情况下在 Android 中播放 C 中的声音或音乐？

> ID：13684155
> 
> 赞同：0
> 
> 时间：2012-12-03T13:21:59.920
> 
> 标签：android, mobile, game-engine

可以在没有 Java 代码的情况下从缓冲区播放声音或音乐吗？仅使用 Android NDK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:23:31.727

使用 OpenSL。看：

*   [适用于 Android 的 OpenSL ES 教程](https://stackoverflow.com/questions/6763149/tutorials-for-opensl-es-for-android)
*   [http://audioprograming.wordpress.com/2012/03/03/android-audio-streaming-with-opensl-es-and-the-ndk/](http://audioprograming.wordpress.com/2012/03/03/android-audio-streaming-with-opensl-es-and-the-ndk/)
*   [http://www.crickettechnology.com/blog/?p=201](http://www.crickettechnology.com/blog/?p=201)

和其他资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:23:11.810

有一种叫做 OpenSL ES 的东西，你可以从 C 中使用它来做音乐。

# objective-c - 用 canShowCallout 切换 viewController 的注解

> ID：13684157
> 
> 赞同：2
> 
> 时间：2012-12-03T13:22:04.743
> 
> 标签：objective-c, ios, annotations, google-api, nsdictionary

我有个问题。我用 google apis 搜索地点，让我在地图上创建一个注释图钉。数据存储在字典中。我尝试将这些位置与包含数据的标注一起传输到另一个 ViewController。

以下是我的部分代码： .h 文件：

```
#import <MapKit/MapKit.h>
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import "MapPoint.h"

#define kGOOGLE_API_KEY @"MyGoogleAPIsKey"
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)

@interface FirstViewController : UIViewController <MKMapViewDelegate, CLLocationManagerDelegate>
{
    CLLocationManager *locationManager;
    CLLocationCoordinate2D currentCentre;
    BOOL firstLaunch;
    int currenDist;
}

- (IBAction)myButton:(UIBarButtonItem *)sender;
- (IBAction)myPosition:(UIBarButtonItem *)sender;

@property (strong, nonatomic) IBOutlet MKMapView *mapView;

@end 
```

.m 文件：

```
@implementation FirstViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //Make this controller the delegate for the map view.
    self.mapView.delegate = self;

    // Ensure that you can view your own location in the map view.
    [self.mapView setShowsUserLocation:YES];

    //Instantiate a location object.
    locationManager = [[CLLocationManager alloc] init];

    //Make this controller the delegate for the location manager.
    [locationManager setDelegate:self];

    //Set some parameters for the location object.
    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    firstLaunch=YES;

    [_mapView setCenterCoordinate:_mapView.userLocation.coordinate];

}
-(void)plotPositions:(NSArray *)data {
    // 1 - Remove any existing custom annotations but not the user location blue dot.
    for (id<MKAnnotation> annotation in _mapView.annotations)
    {
        if ([annotation isKindOfClass:[MapPoint class]])
        {
            [_mapView removeAnnotation:annotation];
        }
    }    
    // 2 - Loop through the array of places returned from the Google API.
    for (int i=0; i<[data count]; i++)
    {
        //Retrieve the NSDictionary object in each index of the array.
        NSDictionary* place = [data objectAtIndex:i];
        // 3 - There is a specific NSDictionary object that gives us the location info.
        NSDictionary *geo = [place objectForKey:@"geometry"];
        // Get the lat and long for the location.
        NSDictionary *loc = [geo objectForKey:@"location"];
        // 4 - Get your name and address info for adding to a pin.
        NSString *name = [place objectForKey:@"name"];
        NSString *vicinity = [place objectForKey:@"vicinity"];
        // 4.5 - Get id for detailed view.
        NSString *myId = [place objectForKey:@"id"];
        // Create a special variable to hold this coordinate info.
        CLLocationCoordinate2D placeCoord;
        // Set the lat and long.
        placeCoord.latitude=[[loc objectForKey:@"lat"] doubleValue];
        placeCoord.longitude=[[loc objectForKey:@"lng"] doubleValue];

        // 5 - Create a new annotation.
        MapPoint *placeObject = [[MapPoint alloc] initWithName:name address:vicinity coordinate:placeCoord];
        [_mapView addAnnotation:placeObject];

        NSLog(@"%@", myId);
    }

}

-(void)button:(id)sender
{
    //here is my main problem ...
} 
```

如果我犯了错误或其他事情，请告诉我。我很感激任何答案！

好吧忘了说我对 Obj-C 真的很陌生，所以每个提示对我都很有用！

问候柯蒂斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:35:06.220

正如@Anna Karenina 所说，您可以实现附件视图委托，但您必须记住放置一个 UIControl**否则不会调用此方法**。否则，该视图需要处理自己的触摸事件。
从文档中：

> 如果您指定的视图也是 UIControl 类的后代，您可以使用地图视图的委托在您的控件被点击时接收通知。如果它不是从 UIControl 派生的，则您的视图负责处理其范围内的任何触摸事件。

[参考](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/occ/cl/MKAnnotationView)

# iphone - 如何在 iphone App 中实现 PSCollectionView？

> ID：13684158
> 
> 赞同：2
> 
> 时间：2012-12-03T13:22:04.977
> 
> 标签：iphone, objective-c, ios, ios5, xcode4

在我的应用程序中，我有六个按钮需要放在 pcollectionview 上。我已经在应用程序中放置了pscollectionview，但我不能使用数据源和委托方法？任何人都可以提出这个例子会有帮助吗？以下是我的代码：

```
- (void)viewDidLoad
{

    self.collectionView = [[PSCollectionView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    self.collectionView.delegate = self;
    self.collectionView.collectionViewDelegate = self;
    self.collectionView.collectionViewDataSource = self;
    self.collectionView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:self.collectionView];

    UIButton *btn1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn1.frame = CGRectMake(10, 30, 140, 130);
    [self.collectionView addSubview:btn1];

    UIButton *btn2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn2.frame = CGRectMake(170, 30, 140, 130);
    [self.collectionView addSubview:btn2];

    UIButton *btn3 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn3.frame = CGRectMake(10, 180, 140, 130);
    [self.collectionView addSubview:btn3];

    UIButton *btn4 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn4.frame = CGRectMake(170, 180, 140, 130);
    [self.collectionView addSubview:btn4];

    UILabel *loadingLabel = [[UILabel alloc]initWithFrame:CGRectMake(20, 100, 50, 20)];
    loadingLabel.text = @"Loading...";
    loadingLabel.textAlignment = UITextAlignmentCenter;
    [self.collectionView addSubview:loadingLabel];
    //self.collectionView.loadingView = loadingLabel;

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (NSInteger)numberOfViewsInCollectionView:(PSCollectionView *)collectionView {
    return 1;
}

- (PSCollectionViewCell *)collectionView:(PSCollectionView *)collectionView viewAtIndex:(NSInteger)index {
}

- (CGFloat)heightForViewAtIndex:(NSInteger)index {
    NSDictionary *item = [self.items objectAtIndex:index];

    return [NDACCustomView heightForViewWithObject:item inColumnWidth:self.collectionView.colWidth];
}

- (void)collectionView:(PSCollectionView *)collectionView didSelectView:(PSCollectionViewCell *)view atIndex:(NSInteger)index {
    //    NSDictionary *item = [self.items objectAtIndex:index];

    // You can do something when the user taps on a collectionViewCell here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T07:10:40.280

发布此问题后，PSCollectionView 的委托方法已更新。访问[https://github.com/ptshih/PSCollectionView](https://github.com/ptshih/PSCollectionView)。在这里分享我的代码。

```
- (void)viewDidLoad
{
self.collectionView = [[PSCollectionView alloc] initWithFrame:self.view.frame];
self.collectionView.delegate = self; // This is for UIScrollViewDelegate
self.collectionView.collectionViewDelegate = self;
self.collectionView.collectionViewDataSource = self;
self.collectionView.backgroundColor = [UIColor clearColor];
self.collectionView.autoresizingMask = ~UIViewAutoresizingNone;

// Specify number of columns for both iPhone and iPad
self.collectionView.numColsPortrait = 3;
self.collectionView.numColsLandscape = 4;

self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg.png"]];
[self.view addSubview:_collectionView];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (Class)collectionView:(PSCollectionView *)collectionView cellClassForRowAtIndex:(NSInteger)index {
    return [MCCollectionViewCell class];
}

- (NSInteger)numberOfRowsInCollectionView:(PSCollectionView *)collectionView {
    return 30;
}

- (UIView *)collectionView:(PSCollectionView *)collectionView cellForRowAtIndex:(NSInteger)index {
    MCCollectionViewCell *cell = (MCCollectionViewCell *)[_collectionView dequeueReusableViewForClass:[MCCollectionViewCell class]];
    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MCCollectionViewCell" owner:self options:nil];
        cell = (MCCollectionViewCell *)[nib objectAtIndex:0];
    }

    NSOperationQueue *imageQueue = [[NSOperationQueue alloc] init];
    [imageQueue addOperation:[NSBlockOperation blockOperationWithBlock:^{
        int r = arc4random() % 3;
        NSString *imageName = [NSString stringWithFormat:@"image%d", r];
        UIImage *image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:imageName ofType:@"jpg"]];

        [[NSOperationQueue mainQueue] addOperation:[NSBlockOperation blockOperationWithBlock:^{
            cell.previewImageView.image = image;
            cell.titleLabel.text = imageName;
        }]];
    }]];

    return cell;
}

- (CGFloat)collectionView:(PSCollectionView *)collectionView heightForRowAtIndex:(NSInteger)index {
    return 290.0;
} 
```

# multithreading - 了解 TCriticalSection 和同步

> ID：13684159
> 
> 赞同：8
> 
> 时间：2012-12-03T13:22:13.617
> 
> 标签：multithreading, delphi, c++builder, critical-section, synchronize

`TCriticalSection`如果我正确理解如何和`Synchronize`操作，我想在这里确认。

据我所知，现在`Synchronize`使用`SendMessage`（更新：或至少在较旧的 VCL 版本中使用它，如下面的几条评论中提到的）它暂停当前正在执行的线程（以及任何其他线程），这与`PostMessage`它不需要然后执行所需的不同函数（来自主线程）。在执行时以某种方式`SendMessage`“停止”多线程。

但我不确定`TCriticalSection`。例如，假设我创建了这样的东西：

```
// Global variables somewhere in my code any thread can access
boost::scoped_ptr<TCriticalSection> ProtectMyVarAndCallFnction(new TCriticalSection);
int MyVariable1;
void CallMyFunctionThatAlsoModifiesMoreStuff() { /* do even more here */ };

// Thread code within one of the threads
try {
    ProtectMyVarAndCallFnction->Acquire();
    MyVariable1++;
    CallMyFunctionThatAlsoModifiesMoreStuff();
    }
__finally {
    ProtectMyVarAndCallFnction->Release();
    } 
```

现在，我的问题是 - 在这种情况下，关键部分如何“知道”我正在保护 MyVariable1 以及被调用函数可能修改的任何内容？

如果我理解正确 - 它没有 - 我有责任在任何想要更改 MyVariable1 或调用此函数（或执行两者中的**任何一个）的线程中正确调用 Acquire() 。**换句话说，我认为`TCriticalSection`是用户定义的块，它定义了我在逻辑上分配给它的任何内容。它可能是一组变量或任何特定函数，只要我在**所有**可能写入此块或使用此函数的线程中调用 Acquire()。例如，“DiskOp”可能是我`TCriticalSection`在磁盘上写入的名称，“Internet”可能是`TCriticalSection`调用从 Internet 检索某些数据的函数的名称。我得到正确了吗？

此外，在这种情况下，TCriticalSection 是否总是需要成为一种全局变量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T13:27:29.950

> SendMessage 暂停当前正在执行的线程（以及任何其他线程）。

不，这是不正确的。`SendMessage`不会暂停任何东西。SendMessage 只是同步发送消息。在消息传递之前，该函数不会返回。即目标窗口的window proc已经执行完毕。并且因为窗口进程总是在拥有窗口的线程上被调用，这意味着调用线程可能需要被阻塞以等待窗口拥有的线程准备好执行窗口进程。它绝对不会挂起进程中的所有线程。

> 临界区如何*知道*我正在保护`MyVariable1`？

它没有。确保所有`MyVariable1`需要保护的用途都得到保护，这完全取决于您。临界区是互斥体的一种形式。互斥锁确保只有一个执行线程可以在任何时刻保持互斥锁。

> 正如我`Acquire()`在所有可能写入此块或使用此函数的线程中调用的那样。

这也不是真的。“在所有**线程**中”是一个错误的想法。您需要考虑“在所有使用该变量的**代码部分”。**

> 因此，关键部分是否总是需要是一种全局变量？

不，关键部分可以是全局变量。但不一定。

# ios - iOS - 连接混音器、remoteio 和动态处理器的 AudioFormat 问题

> ID：13684162
> 
> 赞同：1
> 
> 时间：2012-12-03T13:22:28.517
> 
> 标签：ios, audio, core-audio

我正在尝试连接我的混音器 -> remoteio -> 动态处理器

这是我的 AudioFormat // 描述格式

```
memset( &audioFormat, 0, sizeof(AudioStreamBasicDescription) );
audioFormat.mSampleRate         = 44100.00;
audioFormat.mFormatID           = kAudioFormatLinearPCM;
audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
audioFormat.mFramesPerPacket    = 1;
audioFormat.mChannelsPerFrame   = 1;
audioFormat.mBitsPerChannel     = 16;
audioFormat.mBytesPerPacket     = 2;
audioFormat.mBytesPerFrame      = 2; 
```

当我使用 CAShow 时，它给了我以下信息。

```
AudioUnitGraph 0x4725000:
  Member Nodes:
node 1: 'auou' 'rioc' 'appl', instance 0x1c5ab3a0 O I
node 2: 'aumx' 'mcmx' 'appl', instance 0x1d07a6d0 O I
node 3: 'aufx' 'dcmp' 'appl', instance 0x1d085330 O I
 Connections:
    node   2 bus   0 => node   1 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved]
node   1 bus   0 => node   3 bus   0  [ 2 ch,      0 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved] 
```

尝试结果 = AudioUnitSetProperty ( _dynamicsUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &audioFormat, sizeof (audioFormat) );

将audioFormat设置为所需的格式会给我一个错误代码-10868。

我还意识到从 audynamicsprocessor 获取 ASBD 会产生这种情况。

```
effectASBD  AudioStreamBasicDescription 
mSampleRate Float64 44100
mFormatID   UInt32  1819304813
mFormatFlags    UInt32  41
mBytesPerPacket UInt32  4
mFramesPerPacket    UInt32  1
mBytesPerFrame  UInt32  4
mChannelsPerFrame   UInt32  2
mBitsPerChannel UInt32  32
mReserved           UInt32  0 
```

我尝试了各种方法，比如让音频格式 ABSD 符合 AUdynamicsprocessor，但我得到了同样的错误。

出于延迟考虑，我想尽可能使用我原来的音频格式 ASBD。此外，我的回调算法已经为该音频格式编写。这可能吗？

提前致谢。

码头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:23:15.783

因为没有答案，为了完整起见，我会自己回答这个问题。最终，在来自 Core Audio 邮件列表的 Chris Adamson 的一些建议之后，我做到了。

我发现 dynamicsProcessor 需要 8.24 格式。所以我在 dynamicsProcessor 之前和之后放置了一个转换器，将我想要的格式转换为 8.24（dynamicsProcessor 想要的），反之亦然。

混合器->转换器->动态处理器->转换器->远程IO

# c# - ZeroMQ 订阅者无法使用 1000 多个发布者进行初始化

> ID：13684164
> 
> 赞同：4
> 
> 时间：2012-12-03T13:22:29.733
> 
> 标签：c#, .net, zeromq

我正在尝试评估 ZeroMQ 以获得更大的监控和数据收集系统。在较小的规模上，一切都很好，但增加负载和规模似乎有点棘手。

现在我正在使用 C# 包装器（clrzmq，3.0.0-rc1）来创建发布者和订阅者应用程序。我将发布者套接字（1 个套接字，1 个上下文）绑定到 1000 个端点（本地主机 + 一系列端口），并让订阅者应用程序套接字（同样是 1 个套接字，1 个上下文）绑定到发布者端点。

这有时有效，有时无效（我想这与进程以某种方式处理的最大套接字数有关）。这似乎取决于我启动应用程序的顺序，但我无法确定。我唯一看到的是讨厌的 SEHExceptions，根本不包含任何细节。如果我创建简单的控制台应用程序，我有时会看到低级 C++ 断言，例如：

*   断言失败：fds.size () <= FD_SETSIZE (......\src\select.cpp:70)
*   断言失败：权限被拒绝 (......\src\signaler.cpp:281)
*   断言失败：对等方重置连接 (......\src\signaler.cpp:124)

对我不是很有帮助。在 C# 包装器中，上下文创建失败。它甚至没有机会开始连接甚至创建套接字。我希望通过抛出异常来处理低级别的 ZeroMQ 错误，也许我只是还不明白如何处理错误。

**我现在的问题是：**

*   如何创建（有点）真实的测试设置来模拟单台机器上的 1000 个单独的发布者（在现实世界中 1 个发布者 = 1 台机器）和另一台机器上的几个订阅者，所有这些都使用 C#。这甚至可能吗？
*   更重要的是，我如何在 C# 代码中捕获 ZeroMQ 错误以了解问题所在？

由于 ZeroMQ 看起来相当稳定和成熟，我很难相信 1000 个发布者应该是一个问题。但是，为了在 C# 上使用 ZeroMQ，我需要比目前可用的更好的错误支持（除非我在这里完全错过了一些东西）。

**更新：**

在深入研究源代码后，我最终得到`zmq_assert(...)`了`RaiseException (0x40000015, EXCEPTION_NONCONTINUABLE, 1, extra_info);`. 这将在将原始断言语句转储到控制台后突然终止应用程序。这似乎有点苛刻，但考虑到它确实无法恢复，这可能是最好的选择。但是，更好的错误消息不会受到伤害。不是每个人都知道是什么`fds.size () <= FD_SETSIZE`意思。源代码中的评论提供了一些线索，如果在错误消息中包含该评论会很好。无论如何，鉴于我的应用程序不是控制台应用程序，这只会给我留下一个未处理的 SEHException，它似乎甚至不包含断言语句或行/文件信息。我想知道我将创建多少其他错误会导致其他类似的神秘错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:11:29.137

在进一步研究之后，似乎默认的套接字数设置为 1024。C# 包装器在`Context`对象上有一个属性，应该能够更改此设置，但它不起作用，至少不像预期的那样。此外，本机`zmqlib`在上下文对象上没有此设置。

运行描述中的设置似乎是不可能的，至少不使用`clrzmq`C# ZeroMQ 包装器。我通过在一台单独的机器上运行 500 个发布者并在另一台机器上运行另外 500 个加 1000 个订阅者来解决它。这很好用，没有任何错误。

另一个话题也有点令人失望。当达到最大套接字数时，ZeroMQ 会简单地抛出一个无法捕获的异常，导致应用程序突然崩溃。这是一种快速失败的方法，可以避免任何进一步的数据/状态损坏，但不幸的是，对于导致应用程序死机的原因也几乎没有留下任何线索。从其他帖子来看，当这种情况发生时，似乎很难为事后收集数据。在 C# 代码中捕获异常似乎是不可能或非常困难的，并且挂钩到标准输出以捕获打印的断言似乎也很难实现（如果我们不是从命令提示符运行，在这种情况下，断言消息会在之前打印应用程序死亡）。

总而言之，当 ZeroMQ 通过 zmq_assert(...) 调用终止时，这使得在非控制台 C# 设置中进行低级故障排除和事后分析非常困难。希望这是一个极端的例子。并非所有故障模式似乎都会以这种突然的方式导致终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:56:58.007

默认的 FD_SETSIZE 是 1024（在 MSVC libzmq 项目中定义），因此您将在测试用例的中途遇到这个问题。另一个断言由此而来。

在您的 libzmq 项目中将其增加到 4K 或 8K，事情应该会更好。

至于 assert() 调用，肯定在 Windows 上太残酷了。在 Linux 上，这提供了一个不错的堆栈转储和足够的信息来跟踪问题。随意改进 assert 宏，让它做一些更智能的事情，例如启动调试器。无论如何，如果您遇到断言，您将无法合理地继续。

当 FD 集已满时断言，可以更好地处理。如果您对 C/C++ 有所了解，请随时查看代码。我们确实依赖于人们的补丁。

另外，如果您觉得 1024 太小，请随时在项目中提出此问题并将补丁发送给我们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T18:36:01.390

快速而肮脏地查看此问题表明您为计算机创建了太多套接字连接。查看此链接，了解MSDN[的最大套接字数。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms739169%28v=vs.85%29.aspx)你得到的错误看起来非常相关，这可能是你的错误的来源。

老实说，拥有 1000 个独立的发布者似乎您在使用 zmq 时处理的问题有点不正确。为什么不拥有 1 个发布者并使用“命名空间”并让订阅者订阅它需要拆分订阅者获得的消息的内容。

# ios - 彩色 UITextview 的自动更正问题

> ID：13684167
> 
> 赞同：6
> 
> 时间：2012-12-03T13:22:32.860
> 
> 标签：ios, uitextview, autocorrect

我在我的应用程序中使用蓝色背景的文本视图。

启用自动更正后，只要它更正一个单词，就会在该单词周围形成一个白框，并且文本的颜色也会发生变化。

关于如何阻止这种影响的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T14:51:55.353

不，我认为您无法更改覆盖层的颜色或开箱即用的文本颜色..

这很难，如果您在`- (void) layoutSubviews {..}`视图中放置断点，您会看到 UIKit 在文本上方绘制了一个“UITextSelectionView”...

我尝试子类化 UITextView 以查看它的 layoutSubviews 是否被触发，并且似乎确实如此！

所以我试图删除覆盖：

```
- (void) layoutSubviews {
    [super layoutSubviews];

    for (UIView *subview in self.subviews) {
        if ([NSStringFromClass([subview class]) isEqualToString:@"UITextSelectionView"]) {
            DLog(@"Subview %@", [subview debugDescription]);
            [subview removeFromSuperview];
            break;
        }
    }
} 
```

它有效..但这会导致光标丢失，并禁用任何选择:(

我认为您必须禁用自动更正..

**如果有人找到真正的答案，我将重新开始赏金！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T17:22:29.003

这可能有其他副作用我目前正在调查其他所谓的，但覆盖 UITextView 中的 firstRect(for range) 并返回 CGrect.Zero 会删除突出显示。

```
override public func firstRect(for range: UITextRange) -> CGRect {
     return CGRect.zero;
} 
```

# css - bootstrap - 我可以用 bootstrap 完全替换我的旧 css 文件吗？

> ID：13684171
> 
> 赞同：-1
> 
> 时间：2012-12-03T13:22:39.813
> 
> 标签：css, twitter-bootstrap

是否可以完全删除我所有的旧样式并仅添加引导 css 类？或者我必须添加位置、宽度等内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:27:06.807

您将不得不添加您的 CSS 代码，但不会没有引导程序，因为它提供了许多 HTML 控件、样式、用户体验等原型。

# javascript - 在 jQuery 中从 document.ready 调用 onload 事件

> ID：13684172
> 
> 赞同：1
> 
> 时间：2012-12-03T13:22:44.303
> 
> 标签：javascript, jquery

我可以从 jQuery 的 document.ready 中调用 onload 事件吗，如下所示：

```
$(function() {
onloadfunc(param);
}); 
```

**对比：**

```
<body onload = "onloadfunc(param);"> 
```

以上两个是一样的吗？

如何调用 onloadfunc(param); 在 JQuery 中加载而不是在 DOM 上准备好了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:25:04.067

不，这个：

```
$(function() {
}); 
```

相当于

```
$(document).ready(function(){
}); 
```

在 onload 事件之前触发。

您可以`onload`像这样使用 jQuery 调用：

```
$(window).load(function(){
}); 
```

--

要回答您的问题，您可以执行以下操作：

```
$(document).ready(function(){
    $(window).load(function(){
        onloadfunc(param);
    });
}); 
```

这不是我写过的最好的代码......：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:29:10.917

$(document).ready() jQuery 事件比 onload 更早触发。load 事件等待所有资产完全加载：

> 虽然 JavaScript 在页面呈现时提供了用于执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。在大多数情况下，只要完全构建了 DOM 层次结构，就可以运行脚本。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。当使用依赖 CSS 样式属性值的脚本时，在引用脚本之前引用外部样式表或嵌入样式元素很重要。

# mysql - 连接问题

> ID：13684176
> 
> 赞同：0
> 
> 时间：2012-12-03T13:23:06.507
> 
> 标签：mysql, sql, join

我有以下查询，其中我使用了`JOIN`s. 它说：

> 未知列 m.bv ..

你能看看并告诉我我做错了什么吗？

```
$query4 =  'SELECT u.*, SUM(c.ts) AS total_sum1, SUM(m.bv) AS total_sum 
FROM users u 
LEFT JOIN 
 (SELECT user_id ,SUM(points) AS ts FROM coupon GROUP BY user_id) c 
 ON u.user_id=c.user_id 
LEFT JOIN 
 (SELECT user_id ,SUM(points) AS bv FROM matching GROUP BY user_id) r 
ON u.user_id=m.user_id 
where u.user_id="'.$_SESSION['user_name'].'"
GROUP BY u.user_id'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:25:09.623

您正在`SUM(points) AS bv`从具有别名的表中选择`r`，没有具有别名的表`m`。所以它必须是`r.bv`这样的：

```
SELECT 
  u.*, 
  SUM(c.ts) AS total_sum1, 
  SUM(r.bv) AS total_sum 
FROM users u 
LEFT JOIN 
(
    SELECT 
      user_id,
      SUM(points) AS ts 
    FROM coupon 
    GROUP BY user_id
) c ON u.user_id=c.user_id 
LEFT JOIN 
(
    SELECT 
      user_id,
      SUM(points) AS bv 
     FROM matching 
     GROUP BY user_id
) r ON u.user_id = m.user_id 
where u.user_id="'.$_SESSION['user_name'].'"
GROUP BY u.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:26:07.590

将 m. 替换为 r。看第二个加入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:31:37.540

您已使用 为派生表起别名，`r`并使用 引用该表（两次）`m`。纠正一个或另一个。

由于您`user_id`在两个子查询中分组并且`user_id`（我假设）是 table 的主键`user`，因此您实际上并不需要 final `GROUP BY`。

如果它适用于所有（许多）用户，我会这样写：

```
SELECT u.*, COALESCE(c.ts, 0) AS total_sum1, COALESCE(m.bv, 0) AS total_sum 
FROM users u 
LEFT JOIN 
 (SELECT user_id, SUM(points) AS ts FROM coupon GROUP BY user_id) c 
   ON u.user_id = c.user_id 
LEFT JOIN 
 (SELECT user_id, SUM(points) AS bv FROM matching GROUP BY user_id) m  
   ON u.user_id = m.user_id 
```

在您的（一个用户）案例中就像这样：

```
SELECT u.*, COALESCE(c.ts, 0) AS total_sum1, COALESCE(m.bv, 0) AS total_sum 
FROM users u 
  LEFT JOIN 
     (SELECT SUM(points) AS ts FROM coupon
      WHERE user_id = "'.$_SESSION['user_name'].'") c 
    ON TRUE 
  LEFT JOIN 
     (SELECT SUM(points) AS bv FROM matching
      WHERE user_id = "'.$_SESSION['user_name'].'") m
   ON TRUE 
WHERE u.user_id = "'.$_SESSION['user_name'].'" 
```

最后一个查询也可以简化为：

```
SELECT u.*, 
     COALESCE( (SELECT SUM(points) FROM coupon 
                WHERE user_id = u.user_id)
             , 0) AS total_sum1,
     COALESCE( (SELECT SUM(points) FROM matching 
                WHERE user_id = u.user_id)
             , 0) AS total_sum 
FROM users u 
WHERE u.user_id = "'.$_SESSION['user_name'].'" 
```

# c# - 使用具有一对多关系的表/实体创建 Lucene.net 文档索引

> ID：13684179
> 
> 赞同：2
> 
> 时间：2012-12-03T13:23:17.247
> 
> 标签：c#, lucene, full-text-search, lucene.net

我正在尝试使用 Lucene.net 来应用全文搜索，并且能够在此链接 [http://www.codeproject.com/Articles/320219/Lucene-Net-ultra-fast-search-for-MVC-or的帮助下使用它-WebForms](http://www.codeproject.com/Articles/320219/Lucene-Net-ultra-fast-search-for-MVC-or-WebForms)

但它有一个仅用于一些简单数据的示例

而我有一个场景，其中两个实体以一对多关系链接。

```
class Product
{
  public int Id{get;set;}
  public int Name{get;set;}
}

class Shop
{
  public int Id{get;set;}
  public int Name{get;set;}
  public List<Product> Products{get;set;}
} 
```

现在实现/（将其作为单个表或文档存储在索引中）这有点棘手。

我应该为索引创建两个文档吗？

但是，如果进行了搜索，那么链接将是一个问题，`Product`它将返回只有`Product`商店而不是商店的结果。

出路是什么？或其他方式？

**- 编辑 - -**

需要将这些 1:N 相关数据存储在单个文档中，因为我将在两个实体的任何字段上进行搜索。

因此，即使在 lucene 返回结果之后，它的 id 也可用于两个实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:36:18.330

一种选择是在索引中为每个产品文档创建一个字段，该字段包含所有商店 ID。

文件（产品）

```
Name             | Shop
------------------------
Super Product XY | 1 5 7 
```

现在，如果您只想在一家商店中搜索，您可以这样做。

```
+Name:"Super Product" +Shop:5 
```

一般来说，这完全取决于您的要求。您是否需要搜索所有商店并找出哪个商店提供产品，或者您是否希望将搜索限制在单个或多个商店。

**=== 更新 ===**

如果您想接收 Product-ID 和 Shop-ID，您可以将字段 ProductID 和 ShopID 定义为“Field::STORE_YES”（C++ 变体，我不知道 .NET 定义）。

```
(STORE_YES)|(INDEXED_TOKENIZED)| (STORE_YES)
ProductID  | Name              | ShopID
--------------------------------------
1          | Super Product XY  | 1 5 7
2          | Not good Product  | 2 5 6
-------------------------------------- 
```

从找到的 Document 对象中，您可以读取*ProductID*和*ShopID*字段，这将为您提供所需的一切。*ShopID*将作为字符串返回，您可以用空格 (" ") 将其拆分，并且您有一个 ShopID 数组。

# iphone - 在后台模式下启动 wifi 扫描

> ID：13684186
> 
> 赞同：1
> 
> 时间：2012-12-03T13:24:04.840
> 
> 标签：iphone, objective-c, ios, sdk, wifi

我正在开发一个需要主动 wifi 访问的导航应用程序（由于它连接到使用 wifi 的硬件设备），我的问题是当应用程序在后台时，wifi 扫描间隔显着下降，并且在某些时候应用程序会扫描wifi 连接仅每 5 分钟一次。

关于如何更频繁地触发 wifi 扫描的任何想法？

任何铅表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:25:08.773

去`Reachability.h`类和使用类`kReachabilityChangedNotification`中定义的。

# java - Struts2：在jsp中看不到来自action的值，但在jsp的javascript代码中可以看到它们

> ID：13684187
> 
> 赞同：0
> 
> 时间：2012-12-03T13:24:06.003
> 
> 标签：java, html, jsp, struts2, action

在行动中，我有一个变量，上面有吸气剂。

```
private String myActionVariable = "predefined....";
public String getMyActionVariable () {
    return myActionVariable;
} 
```

在 jsp 中，我尝试以这种方式使用我的变量：

```
<input type="button" class="styledButton" 
       onclick="javascript: doAjax('myActionName',false);" 
       value="${myActionVariable}" 
```

但它没有显示。但是，如果我从同一 jsp 文件中包含的 javascript 代码中输出此变量：

```
alert (${myActionVariable}) 
```

我会得到它的价值......

请问有什么想法吗？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:24:59.647

您可以使用`<input/>`带有 Struts2 标记的标准 HTML 标记`<s:property />`作为值，如下所示：

```
<input type="button" class="styledButton" 
       onclick="javascript:doAjax('myActionName',false);" 
       value="<s:property value="%{myActionVariable}"/>"/> 
```

或者直接像这样的 Struts2 标签：

```
<s:submit type="button" cssClass="styledButton" 
          onclick="javascript: doAjax('myActionName',false);" 
          value="%{myActionVariable}" /> 
```

请注意，使用 Struts2 Tag，`class`属性变为`cssClass`（并`style`变为`cssStyle`），这`%{}`是正确的 OGNL 语法，而不是`${}`（即`JSTL`语法）

* * *

编辑：使用 Struts2 时，忘记 JSTL，您将不再需要它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:37:52.247

您应该使用 struts2 标签。

```
<input type="button" class="styledButton" onclick="javascript: doAjax('myActionName',false);" value="${myActionVariable}"> 
```

而不是这个，使用

```
<s:submit type="button" cssClass="styledButton" onClick="javascript: doAjax('myActionName',false);" value= "myActionVariable" /> 
```

# c++ - 使用对私有变量的公共引用具有良好的实践和性能优势

> ID：13684188
> 
> 赞同：1
> 
> 时间：2012-12-03T13:24:08.780
> 
> 标签：c++, class, reference, public, member

是否允许公开引用私有类成员？我知道，以下代码将编译，并且在我使用它时，它在 99% 的情况下都有效。问题是，我确实遇到了一些配置，其中对私有变量的 const 引用返回了错误的数据，即使与 POD 一起使用也是如此。那么，它是否存在一些一般性问题 - 语法错误或其他一些可能失败的情况？使用 const 引用相对于使用 Get() 方法是否有任何性能优势？请参阅以下代码中的注释...从“良好的编码风格”的角度来看，这是如何看待的？“好的实践”怎么样？

自己的研究：嗯，在使用简单数据类型时，更喜欢 const 引用而不是 Get() 方法可能没有性能优势。在使用大型结构时，仅返回一个引用可能很有用。Const ref 可能会破坏良好的 OOP 规则（封装和生命周期）。

但同样，基本问题是：即使在有效（现有）实例上使用，“const int &Width”是否有任何理由失败？从 dll 中导出类 CTest 怎么样？谢谢

```
class CTest
{
public:
  // public reference to a private variable - is this allowed? What about standards, what about 'good coding'?
  const int & Width; // read only property

  // Is there some performance penalty for GetWidth1() compared to previous reference Width?
  /*(inline)*/ int GetWidth1() const { return _width; } 

  // some performance benefit or disadvantage writting GetWidth2 rather than GetWidth1()?
  const int & GetWidth2() const { return _width; } 

  CTest(int width):
    Width(_width), // initialize public reference to a private variable - is this correct?
    _width(width)  // initialize member variable
  {}
private:
  int _width;
};

int main()
{
  CTest cTest(10);
  CTest * pTest = new CTest(10);

  int width1 = cTest.Width; // is this possible? Is there some reason (not) to use such a construction?
  int width2 = pTest->Width;
  int width3 = pTest->GetWidth1(); // of course, correct. But is there some performance penalty compared to pTest->Width?

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:49:13.970

> 是否允许公开引用私有类成员？

是的，这本身并没有错。如果您已经看到它“返回错误数据”的情况，这意味着其他地方出了问题 - 可能是内存损坏，或者在数据成员初始化之前访问引用，或者在其目标被破坏后使用悬空引用.

最大的问题是引用是不可分配的，因此任何包含引用的类也不是。

> 使用 const 引用相对于使用 Get() 方法是否有任何性能优势？

我希望使用内联函数而不是引用会带来好处。类实例中没有任何东西要存储，也不需要任何运行时间接 - 它应该与直接访问数据成员一样有效。因此，我建议您不要使用参考成员。

> 从“良好的编码风格”的角度来看，这是如何看待的？“好的实践”怎么样？

通常，对数据成员的访问可能表明该类没有很好地封装。好的（面向对象的）实践通常根据接口的作用来指定接口，而不是根据它使用的数据来指定接口。但这是非常笼统的建议。有时最好的设计确实需要访问数据；但是为了提高效率，您应该通过公共数据成员或内联访问器函数来允许它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:43:10.383

当然允许公开对私有数据的引用。正确使用时也可以正常工作。但是请注意，它可能会比提供对变量的访问的内联函数更慢，因为在大多数情况下，编译器实际上存储了一个指针或引用来表示引用。使用存储间接的成本增加了对象大小和额外的取消引用。当您说它失败时，我怀疑您没有正确初始化引用，例如，在使用复制构造函数时。

顺便说一句，`main()`总是返回`int`（尽管返回语句可以省略）。

# iphone - coreplot中奇怪的条形行为

> ID：13684190
> 
> 赞同：1
> 
> 时间：2012-12-03T13:24:27.123
> 
> 标签：iphone, ios, indexing, core-plot, cptbarplot

我对 barPlot 有一个非常奇怪的情况。首先，即使数据为空，它也会在索引 1 和 2 处为我提供两个大条形图，我无法弄清楚它们来自哪里？

![在此处输入图像描述](../Images/fc51c5842e1d66afa657c8fddfd11b29.png)

其次，当我随后调用 reloadDataIfNeeded/reloadData 方法时，它似乎将条形放在中间（每次都相同）

![在此处输入图像描述](../Images/4c8c1288eed20da38eeae2c11052d0f6.png)

生病发布下面的代码，但奇怪的是，当我不调用重新加载数据时，它已经在条形图上给了我条形图。- 它从不调用：

```
 -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index { 
```

它只是在条形图上放置条形图。当我重新加载它调用该方法的数据时，尽管索引是正确的，它仍然放错了条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:03:54.897

为了解决这个问题，我使用了：

```
 switch ( fieldEnum ) {            
case CPTBarPlotFieldBarLocation: return [NSNumber numberWithUnsignedInteger:index]; break; 
case CPTBarPlotFieldBarTip: 
if ([plot.identifier isEqual:_nameComingThrough]) { 
return [_averageDataValuesMultiple objectAtIndex:index]; } 
else if ([plot.identifier isEqual:PAR]) { 

return [_averageOfPar objectAtIndex:index]; } 
} 
```

# python - python引用是否使用内存？

> ID：13684192
> 
> 赞同：0
> 
> 时间：2012-12-03T13:24:32.197
> 
> 标签：python, memory, dictionary, reference

我正在用 Python 构建一个灵活、轻量级的内存数据库，并发现我查找值和使用索引的方式存在性能问题。为了改善这一点，我尝试了一些选项，试图在速度和内存使用之间取得平衡。我当前的实现使用 dicts 的 dict 按记录（对象引用）和字段（也是对象引用）存储数据。因此，例如，如果我有三个包含三个字段的记录，其中一些数据丢失（即 NULL 值）::

```
{<Record1>: {<Field1>: 4, <Field2>: 'value', <Field3>: <Other Record>},
{<Record2>: {<Field1>: 4, <Field2>: 'value'},
{<Record3>: {<Field1>: 5}} 
```

我考虑过一个 numpy 数组，但我仍然需要两个字典来将对象实例映射到数组索引，所以我看不出它的性能会更好。

索引是使用一对二等分列表实现的，本质上充当从值到记录实例的映射。例如，上面的索引`Field1>`：

```
[[4, 4, 5], [<Record1>, <Record2>, <Record3>]] 
```

我之前使用的是一个简单的 bin 字典，但这不允许范围查找（例如所有值 > 5）（请参阅[Python hash table for blur matching](https://stackoverflow.com/questions/13605017/python-hash-table-for-fuzzy-matching)）。

我的问题是这个。我担心我有多个对象引用，以及索引中相同值的多个副本。所有这些重复的引用实际上是否使用了更多的内存，或者在 python 中引用很便宜？我的替代方法是尝试为每个对象关联一个数字键，这可能会将事情至少提高到 256，但我对 python 如何处理引用的了解不够，无法知道这是否真的会更好。

有没有人有更好的管理方法的建议？

在 C 中重新实现关键部分是我想保留的最后选择。

对于任何感兴趣的人，我的代码在[这里](http://bitbucket.org/aquavitae/norman/src)。

**编辑1：**

简单来说，问题是以下哪一项在内存使用方面更有效，其中`a`是对象实例并且`i`是整数：

```
[a] * 1000 
```

或者

```
[i] * 1000, {a: i} 
```

**编辑2：**

由于大量评论建议我使用现有系统，以下是我的要求。如果有人可以提出一个可以满足所有这些要求的系统，那就太好了，但到目前为止，我还没有找到任何可以满足的系统。否则，我最初的问题仍然与python中引用的内存使用有关。：

*   必须是轻量级和内存中的。绝对不是客户端/服务器模型。
*   需要能够在运行中轻松更改表、更改字段、更改规则等。
*   需要轻松应用非常复杂的验证规则。SQL 不满足此要求。尽管有时可以建立非常复杂的语句，但这绝非易事。
*   需要支持表之间的连接和关联。许多 NoSQL 数据库根本不支持连接，或者最多只支持简单连接。
*   需要支持一种将数据加载和存储为任何文件格式的方法。我目前正在通过提供一个框架来实现这一点，该框架可以根据需要轻松添加新格式。
*   它不需要持久性（除了像前一点那样存储数据），也不需要处理大量数据，即不超过几百万条记录。通常，我要处理几千个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:25:36.860

每个引用实际上都是一个指针，每个指针都需要少量内存。

您可以使用[内存分析器](http://pypi.python.org/pypi/memory_profiler) 逐行查看内存使用情况。通过这种方式，您可以看到当您参考时会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:54:35.393

FWIW，我在 100x100 结构上运行了一些测试，测试了一个稀疏填充的字典结构、一个完全填充的字典结构、一个列表和一个 numpy 数组。后两者有一个将对象引用映射到索引的字典。我定时按索引获取结构中的每个项目（返回稀疏字典中缺失数据的哨兵），并报告总大小。我的结果有点令人惊讶：

```
Structure     Time     Size
============= ======== =====
full dict     0.0236s  6284
list          0.0426s  13028
sparse dict   0.1079s  1676
array         0.2262s  12608 
```

所以最快和第二小的是一个完整的字典，可以推测是因为不需要对其进行`key in dict`检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:22:38.367

Python 没有为动态内存管理指定特定的实现，但从语言的语义可以假设引用使用类似于 C 指针的内存。

# java - 项目单击中的 Android 文件选择器

> ID：13684193
> 
> 赞同：-1
> 
> 时间：2012-12-03T13:24:36.057
> 
> 标签：java, android

我已经编写了一个文件选择器并将文件夹和文件添加到`ListView`. 但是 On Item Click 它让我`ArrayIndexOutOfBoundsException`在我的观点上处于位置。有人可以告诉我问题是什么吗？

**文件上传.Java**

```
public class FileUpload extends ListActivity {
    private static final String ITEM_KEY = "key";
    Boolean contains=false;
    private static final String ITEM_IMAGE = "image";
    private static String ROOT = "/";
    public static final String START_PATH = "START_PATH";
    public static final String RESULT_PATH = "RESULT_PATH";
    private List<String> item = null;
    private List<String> path = null;
    public static final String FORMAT_FILTER = "FORMAT_FILTER";
    private TextView myPath;

    private EditText mFileName;

    private static String currentpath;
    private LinkedHashMap<String, Integer> lastPositions = new LinkedHashMap<String, Integer>();
    private ArrayList<HashMap<String, Object>> mList;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_file_upload);
        myPath = (TextView) findViewById(R.id.path);
        mFileName = (EditText) findViewById (R.id.fdEditTextFile);
        String startPath = getIntent().getStringExtra(START_PATH);
        startPath = startPath != null ? startPath : ROOT;
        getDir(startPath);
    }
    public void getDir(String DirPath){
        /*Integer position = lastPositions.get(parentPath);*/
        if(DirPath!=null){
        getDirImpl(DirPath);
        }
        }
    public void getDirImpl(final String dirpath){
        currentpath = dirpath;
        myPath.setText("Location is:"+currentpath);
        item = new ArrayList<String>();
         path = new ArrayList<String>();
         mList=new ArrayList<HashMap<String,Object>>();
        File f=new File(currentpath);
        File[] files=f.listFiles();

        if (!currentpath.equals(ROOT)) {

            item.add(ROOT);
            addItem(ROOT, R.drawable.folder);
            item.add("../");
            addItem("../", R.drawable.folder);
            path.add(f.getParent());
            }
        TreeMap<String, String> dirsMap = new TreeMap<String, String>();
        TreeMap<String, String> dirsPathMap = new TreeMap<String, String>();
        TreeMap<String, String> filesMap = new TreeMap<String, String>();
        TreeMap<String, String> filesPathMap = new TreeMap<String, String>();
        for(int i=0;i<files.length;i++){
            File file = files[i];

            if(file.isDirectory()){
                path.add(file.getPath());
                String dirName=file.getName()+"/";
                dirsMap.put(dirName, dirName);
                dirsPathMap.put(dirName, file.getPath());

            }
            else{

                final  String fileName=file.getName();
                filesMap.put(fileName, fileName);
                filesPathMap.put(fileName, file.getPath());
                }
        }
        item.addAll(dirsMap.tailMap("").values());
        item.addAll(filesMap.tailMap("").values());
        item.addAll(dirsPathMap.tailMap("").values());

        SimpleAdapter fileList = new SimpleAdapter(this, mList, R.layout.file_dialog_row, new String[] {
                ITEM_KEY, ITEM_IMAGE }, new int[] { R.id.fdrowtext, R.id.fdrowimage });
        for(String dir:dirsMap.tailMap("").values()){
            addItem(dir, R.drawable.folder);
        }
        for(String file:filesMap.tailMap("").values()){
            addItem(file,R.drawable.file);
        }
    fileList.notifyDataSetChanged();
    setListAdapter(fileList);
    }
    public void addItem(String FileName,int imageid){
        HashMap<String,Object>item=new HashMap<String, Object>();
        item.put(ITEM_KEY, FileName);
         item.put(ITEM_IMAGE, imageid);
         mList.add(item);
    }

    protected void onListItemClick(ListView l, View v, int position, long id) {
        File file = new File(path.get(position));

        if (file.isDirectory()) {

            if (file.canRead()) {
                lastPositions.put(currentpath, position);
                getDir(path.get(position));

            }
        } else {
                String filename=file.getName();
                mFileName.setText(filename);
            }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_file_upload, menu);
        return true;
    }

} 
```

**堆栈竞赛**

```
12-03 18:08:31.458: E/AndroidRuntime(1784): FATAL EXCEPTION: main
12-03 18:08:31.458: E/AndroidRuntime(1784): java.lang.IndexOutOfBoundsException: Invalid index 10, size is 0
12-03 18:08:31.458: E/AndroidRuntime(1784):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at java.util.ArrayList.get(ArrayList.java:311)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at com.example.projectupload.FileUpload.onListItemClick(FileUpload.java:112)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.app.ListActivity$2.onItemClick(ListActivity.java:321)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.widget.ListView.performItemClick(ListView.java:3382)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.os.Handler.handleCallback(Handler.java:587)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.os.Looper.loop(Looper.java:123)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at java.lang.reflect.Method.invokeNative(Native Method)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at java.lang.reflect.Method.invoke(Method.java:521)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-03 18:08:31.458: E/AndroidRuntime(1784):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:44:06.317

您需要在 onListItemClick 方法中从数据结构 mList 中检索文件名。

# mysql - 两个触发器，更新表时出现错误

> ID：13684202
> 
> 赞同：1
> 
> 时间：2012-12-03T13:25:06.953
> 
> 标签：mysql, sql, triggers

我得到了以下两个触发器，每个触发器都单独工作，但它们一起不工作。

我怎样才能让他们一起工作？他们更新表中的不同字段。

触发器1：

```
create trigger wys_sk_u after update on `things`
for each row
begin
UPDATE `current` s 
INNER JOIN things u ON s.id_thing = u.id_thing
INNER JOIN dude_base b ON b.id= s.id
SET s.`curr_cash` = u.cash1 * b.cash2/ 100;
end;
$$ 
```

触发器2：

```
create trigger suma_u after update on `current`
for each row
begin
UPDATE `current`
SET `mysum` = `curr_cash` + `mysum`;
end;
$$ 
```

第一个应该更新何时`cash1`或`cash2`更新，并更改`curr_cash`. 其次应该更新时`curr_cash`更新，并更改`mysum`。

编辑表格内容时出现以下错误：

```
#1442 - Can't update table 'current' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

@edit 为问题添加了新的答案。

* * *

如果我想做这样的事情怎么办：

```
CREATE TRIGGER total BEFORE UPDATE ON `current` FOR EACH ROW
BEGIN
if new.`new_pay_date` <> old.`new_pay_date`
  SET new.`total_cash` = new.`curr_cash` + new.`total_cash`;
end if;
END;
$$ 
```

错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SET new.`total_cash` = new.`curr_cash` + new.`total_cash`; end if;' at line 4 
```

这在没有

```
if new.`new_pay_date` <> old.`new_pay_date`
end if; 
```

但我需要检查这一点，并且只更新日期更改。

当前表：

```
curr_cash
new_pay_date
id_person
id_thing
total_cash 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:30:07.817

问题出在第二个触发器中。尝试使用 BEFORE UPDATE 触发器使用 SET 语句更改字段值 -

```
CREATE TRIGGER suma_u BEFORE UPDATE ON `current` FOR EACH ROW
BEGIN
  SET new.`mysum` = new.`curr_cash` + new.`mysum`;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:45:54.830

无法更新在触发器中为其创建触发器的表。MySQL 有锁定机制，因此您无法更新触发触发器的同一张表的行，它可能导致对触发器的递归调用和无限循环。

# jquery - 如果删除其中一行，如何相应地更改表的 ID 和表的 ID

> ID：13684205
> 
> 赞同：0
> 
> 时间：2012-12-03T13:25:13.927
> 
> 标签：jquery, html

我有一张有 5 行的桌子。它应该具有动态添加和删除行的功能。每行有 3 列，`partNO`和`quantity`a`button`用于删除该特定行。每一行都有一个`id`以及`td`行内。

我的问题是如果第二行被删除，`id`连续行的 s 应该减 1 到表的末尾。

```
<tr id='1'>
    <td><input type="button" id="b1" width="10" value="D"/></td>    
    <td align="center" id='l1'><input type="text" id="t1"></td>
    <td align="center" id='r1'><input type="text" id="q1"></td>
</tr>
<tr id='2'>
    <td><input type="button" id="b2" width="10" value="D"/></td>    
    <td align="center" id='l2'><input type="text" id="t2"></td>
    <td align="center" id='r2'><input type="text" id="q2"></td>
</tr>
<tr id='3'>
    <td><input type="button" id="b3" width="10" value="D"/></td>    
    <td align="center" id='l3'><input type="text" id="t3"></td>
    <td align="center" id='r3'><input type="text" id="q3"></td>
</tr>
<tr id='4'>
    <td><input type="button" id="b4" width="10" value="D"/></td>    
    <td align="center" id='l4'> <input type="text" id="t4"></td>
    <td align="center" id='r4'><input type="text" id="q4"></td>
</tr>
<tr id='5'>
    <td><input type="button" id="b5" width="10" value="D"/></td>    
    <td align="center" id='l5'><input type="text" id="t5"></td>
    <td align="center" id='r5'><input type="text" id="q5"></td>
</tr> 
```

So `onclick`of`b2` `tr id=2`应该被完全删除，并且下一行 ID 应该相应地递减。`tr td`应更改按钮的 ID 。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:32:43.933

这有点烦人，特别是如果您有绑定到特定元素的事件。像这样的东西是你想要的：

```
$("button").on('click', function () {
   var $toRemove = $(this).closest('tr');
   var id = $toRemove.attr('id');
   $toRemove.removeAttr('id');

   $toRemove.nextAll().each(function () {
      this.id = id++;
      //also update td IDs
   });
}); 
```

# java - JSlider changelistener 不工作

> ID：13684207
> 
> 赞同：1
> 
> 时间：2012-12-03T13:25:22.603
> 
> 标签：java, swing, jslider

我正在尝试在 JSlider 上实现 changelistener。我尝试了两种不同的方法，但都没有奏效。注释掉的部分是第一次尝试。现在实施的可能更适合我的目的。谁能指出这出了什么问题：

```
public class MixWindow extends JFrame implements ChangeListener{

    private JPanel contentPane;
    public static int uniA [] = new int [512];
    ChangeListener sizeAction;
    int level = 0;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MixWindow frame = new MixWindow();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
        initUni();
    }

    public MixWindow() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 800, 600);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        JSlider slider = new JSlider(0,255);
        slider.setOrientation(SwingConstants.VERTICAL);
        slider.setBounds(66, 275, 72, 140);
        slider.setPaintTicks(true);
        slider.setMajorTickSpacing(20);
        slider.setValue(uniA[0]);
        //slider.addChangeListener(sizeAction);
        contentPane.add(slider);

        final JLabel label = new JLabel("");
        label.setBounds(66, 262, 61, 16);
        contentPane.add(label);

        /*sizeAction=new ChangeListener()
        {
            public void stateChanged (ChangeEvent event)
            {
                System.out.println("This is getting silly");
                JSlider slider=(JSlider)event.getSource();

                level=slider.getValue();
                uniA[0] = level;
                String temp = String.valueOf(level); 
                label.setText(temp);

            }
        };*/
    }

    public static void initUni(){
        for(int i = 0; i < uniA.length; i++){
            uniA[i] = 0;
          }
    }

    @Override
    public void stateChanged(ChangeEvent arg0) {
        // TODO Auto-generated method stub
        System.out.println("Stuff has changed"); 
        Object source = arg0.getSource();
        System.out.println(arg0 + " has Changed");

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:29:35.990

`ChangeListener`在您的第一种方法中不起作用的原因是您的听众参考`sizeAction`是`null`在您注册听众时。

```
slider.addChangeListener(sizeAction); 
```

虽然这不会引发异常，但它不会在实例化时注册侦听器。只需在定义监听器*后*允许此行出现，它将开始工作。如果您希望使用其他`ChangeListener`实现，则可以使用：

```
slider.addChangeListener(this); 
```

# jdbc - 在 hashmap 中使用 JDBC 模板从数据库中检索值

> ID：13684208
> 
> 赞同：0
> 
> 时间：2012-12-03T13:25:25.233
> 
> 标签：jdbc, hashmap, jdbctemplate

我正在使用 JDBC 模板从 Spring MVC 中的数据库中获取数据。我的查询是：

```
SELECT count(A.MEETING_ID),ITEM_TBL.REG_EMAIL FROM ITEM_TBL,MEETINGS_TBL WHERE ITEM_TBL.MEETING_ID=MEETINGS_TBL.MEETING_ID 
GROUP BY ITEM_TBL.REG_EMAIL 
```

这将返回如下行：

```
11 nishant@gmail.com
12 abhilasha@yahoo.com
13 shiwani@in.com 
```

我想将这些值存储到哈希映射中。你能帮助我如何使用 JDBC TEMPLATE 做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:39:47.443

你需要[ResultExtractor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/ResultSetExtractor.html)。

您可以使用下面的代码来实现。

```
String sql = "SELECT count(A.MEETING_ID),ITEM_TBL.REG_EMAIL FROM ITEM_TBL,MEETINGS_TBL WHERE        ITEM_TBL.MEETING_ID=MEETINGS_TBL.MEETING_ID 
        GROUP BY ITEM_TBL.REG_EMAIL";

ResultExtractor mapExtractor = new ResultSetExtractor() {
   public Object extractData(ResultSet rs) throws SQLException {
      Map<String, String> mapOfKeys = new HashMap<String, String>();
      while (rs.next()) {
        String key = rs.getString("MEETING_ID");
        String obj = rs.getString("REG_EMAIL");
        /* set the business object from the resultset */
        mapOfKeys.put(key, obj);
      }
      return mapOfKeys;
   }
};

Map map = (HashMap) jdbcTemplate.query(sql.toString(), mapExtractor); 
```

# windows - 如何将 vbs 脚本的输出返回到 R 控制台？

> ID：13684212
> 
> 赞同：3
> 
> 时间：2012-12-03T13:25:40.073
> 
> 标签：windows, r, cygwin

[我在仅基于标签的引用/选择驱动器](https://stackoverflow.com/questions/47849/refer-to-select-a-drive-based-only-on-its-label-i-e-not-the-drive-letter)中找到了一个有用的脚本 ？[（即，不是驱动器号）](https://stackoverflow.com/questions/47849/refer-to-select-a-drive-based-only-on-its-label-i-e-not-the-drive-letter)，并且可以在`cmd.exe`窗口中或在 cygwin 下运行它以在我的计算机上查找驱动器号。

我想不通的是如何让返回的字符串（例如`E:`）显示在我的 R 控制台中。如果我跑步，`system('cscript /nologo DriveFromLabel.vbs label',intern=TRUE)`我会得到`character(0)`结果。

是否有一些开关可以使`cmd.exe`调用中的此注释的结果对 R 可见，或者是否有某种方法可以创建一个脚本来调用`cygwin`并将`cscript`结果返回给 R？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:36:39.543

可能是`cscript`写入`stderr`而不是`stdout`. 使用以下 Bash 脚本 ( `test.sh`) 的小示例：

```
echo spam 1>&2 
```

也不会产生捕获的结果：

```
> spam = system("./test.sh", intern = TRUE)
spam
> spam
character(0) 
```

Linux下的解决方案现在是重定向`stderr`到`stdout`：

```
> spam = system("./test.sh 2>&1", intern = TRUE)
> spam
[1] "spam" 
```

您可以查看[此链接](http://programing-fun.blogspot.nl/2008/04/redirecting-standard-error-output-in.html)`stderr`以在 Windows 下进行重定向。还归功于 Brian Ripley[对此 R-help 帖子](http://tolstoy.newcastle.edu.au/R/help/06/08/32382.html)的回答。的文档`system`证实了我的故事：

> ```
> For command-line R, error messages written to ‘stderr’ will be
> sent to the terminal unless ‘ignore.stderr = TRUE’.  They can be
> captured (in the most likely shells) by
> 
>    system("some command 2>&1", intern=TRUE) 
> ```

在`Stdout and stderr:`标题下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:41:57.667

我想我找到了一种方法： `system("C:/cygwin/bin/bash.exe ./doletter.sh",intern=TRUE)` , where `doletter`contains `cscript /nologo DriveFromLabel.vbs label'`成功返回驱动器号。
现在我只需要做一些技巧来将所需的“标签”字符串加载到 shell 脚本中，这可以`doletter.sh`通过 R 函数从头开始创建文件来“轻松”完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:49:42.870

这对我有用

```
 system('Cscript  /nologo your_path/DriveFromLabel.vbs DRIVE_LABEL',intern=TRUE)[1] 
```

# javascript - 如何引用 eq() jquery 的子项

> ID：13684218
> 
> 赞同：1
> 
> 时间：2012-12-03T13:25:55.207
> 
> 标签：javascript, jquery

我有一个表，我正在尝试使用以下代码派生 JSON 对象

```
var tbl = $('#myTable tr:has(td)').map(function(i,v){
    var $td = $('td', this);
    return{
        id:$td.eq(0).text(),
        column1:$td.eq(1).text(),
        column2:$td.eq(2).text()

    }
    }).get(); 
```

这很完美，除了一件事，我有时在 td 中有一个文本框或复选框，我需要检索其值。我用谷歌搜索过 StackOverflow，但我找不到在这种情况下有用的东西

我也试过以下没有运气

```
id:$td.eq(0).val()
id:$td.eq(0).childern().val() 
```

任何建议或意见，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:30:38.520

[`find`](http://api.jquery.com/find/)如果输入类似于文本框，您可能会想要输入：

```
$td.eq(0).find('input').val() 
```

对于复选框，使用[伪选择器`:checkbox`](http://api.jquery.com/checkbox-selector/)并确定其`checked`属性

```
$td.eq(0).find(':checkbox').prop('checked') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:32:10.703

如果您需要值和文本，请使用以下内容：

```
id:$td.eq(0).find(':checkbox').attr('value') + $td.eq(0).text(); 
```

如果您只需要价值，那么：

```
id:$td.eq(0).find(':checkbox').attr('value'); 
```

顺便说一句，jQuery 团队建议（查看下面的评论）使用 .find() 而不是 $(target, context); 在您的示例中：

```
var $td = $('td', this); 
```

应该看起来像：

```
var $td = $(this).find('td'); 
```

# php - 在最后一个 / 之后从 URL 获取值

> ID：13684224
> 
> 赞同：0
> 
> 时间：2012-12-03T13:26:08.523
> 
> 标签：php, url

我环顾四周，但只能在锚标签之后找到链接和对此的引用，但我需要在最后一个 / 符号之后获取 URL 的值。

我见过这样使用：

www.somesite.com/archive/some-post-or-article/53272

最后一位`53272`是对附属 ID 的引用。

先谢谢各位了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:29:25.383

你可以这样做 ：

```
$url = 'www.somesite.com/archive/some-post-or-article/53272';
$id = substr(url, strrpos(url, '/') + 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:29:34.827

您可以使用 explode() 和 array_pop() 在一行中完成：

```
$url = 'www.somesite.com/archive/some-post-or-article/53272';
echo array_pop(explode('/',$url)); //echoes 53272 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:30:01.290

PHP parse_url（从 URL 中提取路径）结合 basename（返回最后一部分）将解决这个问题：

```
var_dump(basename(parse_url('http://www.somesite.com/archive/some-post-or-article/53272',  PHP_URL_PATH)));
string(5) "53272" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T14:03:05.100

```
<?php
$url = "www.somesite.com/archive/some-post-or-article/53272";

$last = end(explode("/",$url));

echo $last;

?> 
```

用这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T13:28:56.830

我不是 PHP 专家，但我会使用 split 函数： http: [//php.net/manual/en/function.split.php](http://php.net/manual/en/function.split.php)

使用它用“/”模式分割你的 URL 的字符串表示，它会返回一个字符串数组。您将寻找数组中的最后一个元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T13:32:31.077

这会奏效！

> ```
> $url = 'www.somesite.com/archive/some-post-or-article/53272';
> 
> $pieces = explode("/", $url);
> 
> $id = $pieces[count($pieces)]; //or $id = $pieces[count($pieces) - 1]; 
> ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-03T13:35:58.043

如果您总是将 id 放在同一个地方，并且实际链接看起来像

[http://www.somesite.com/archive/article-post-id/74355](http://www.somesite.com/archive/article-post-id/74355)

```
$link = "http://www.somesite.com/archive/article-post-id/74355";
$string = explode('article-post-id/', $link);

$string[1]; // This is your id of the article :) 
```

希望它有所帮助:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-03T13:50:23.543

```
$info = parse_url($yourUrl);
$result = '';

if( !empty($info['path']) )
{
  $result = end(explode('/', $info['path']));
}

return $result; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-03T14:24:20.583

```
$url = 'www.somesite.com/archive/some-post-or-article/53272';
$parse = explode('/',$url);
$count = count($parse);
$yourValue = $parse[$count-1]; 
```

就这样。

# xcode4.5 - 不能使用带有多个 -arch 选项的“预编译头”输出

> ID：13684225
> 
> 赞同：5
> 
> 时间：2012-12-03T13:26:10.153
> 
> 标签：xcode4.5

我有一个现有项目，我尝试使用最新的 Xcode 版本 4.5.2 编译它。当我在模拟器上运行它时它工作正常，但是当我尝试在 iPhone 或 iPad 上运行它时，我收到以下错误：

> clang：错误：不能使用带有多个 -arch 选项的“预编译头”输出命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

有谁知道是什么问题？

# ios - 在 ios 应用程序中集成 googleDrive

> ID：13684226
> 
> 赞同：3
> 
> 时间：2012-12-03T13:26:15.220
> 
> 标签：ios, google-drive-api

我在我的应用程序中使用 DropBox 和 SkyDrive，它们的工作原理非常好，文档非常好，但是 GoogleDrive 真的很难集成（礼貌:)）。

我不是在谈论编码，而是在 xcode 中集成。我按照本[教程](https://developers.google.com/drive/quickstart-ios)进行操作。在[第 3 步](https://developers.google.com/drive/quickstart-ios#step_3_create_and_configure_an_xcode_project)中，我有 8 点要做，问题在第 7 点，没有`Sources`路径，我在下载的 svn 文件夹中搜索，但它不存在。当然没有链接头我有这个问题“GTMOAuth2ViewControllerTouch.h没有这样的文件或目录”（我认为编译器停在那里但还有更多错误）。

我能做些什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T17:37:58.623

我知道这真的很旧，但我遇到了这个问题并找到了解决方案。

当您将“用户标题搜索路径”添加到源目录时，您需要确保将其设置为递归，以便它获取该目录的所有内容。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:14:07.057

[源](http://google-api-objectivec-client.googlecode.com/svn/trunk/Source)目录就在您签出的[主干下。](http://google-api-objectivec-client.googlecode.com/svn/trunk/)

有一个[Google 开发者视频](http://www.youtube.com/watch?feature=player_embedded&v=owlifMbV47k)（嵌入在教程底部）显示了教程中列出的所有步骤。不幸的是，演示者确实跳过了一些故障排除，并且他遵循的步骤与本教程的当前版本略有不同，但它仍然很有帮助。

# c++ - 如何解决库中的“const”定义

> ID：13684227
> 
> 赞同：0
> 
> 时间：2012-12-03T13:26:18.587
> 
> 标签：c++, constants

我正在使用一个定义一些数据类型类的库，这些类通常实现为围绕 std::vector<> 的紧密包装器。类型层次结构有好几层深，大多只添加了详细的构造函数。

我的问题：基类将其 std::vector 定义为私有（这很好），但只添加了一个访问器方法作为 const。派生类甚至无法访问它。库看起来像这样（为了清楚起见，简称）：

```
template <class T> class BaseList
{
public:
    BaseList (const T data0) : data_ (1) { 
       data_[0] = data0; }

    const T & operator[] (const size_t nr) const { 
       // does out off bounds check here       
       return data_[nr]; }

private:
    std::vector<T> data_;
}

class FancyClass : public BaseList<SomeEnumType>
{
public:
    FancyClass (const SomeOtherEnumType data0) 
        : BaseList<SomeEnumType> ( static_cast<SomeEnumType> (data)) 
        {}
} 
```

现在我看到了， const 定义完全是假的。没有内部方法依赖于真正恒定的向量，我在外部代码中也没有。

我喜欢做的就是这样：

```
strukt MyType {
    FancyClass myData;
    bool otherData;
}

int main() {
    MyType storage = {FancyClass(0), false};

    storage.myData[0] = 5;
} 
```

由于 const-ness，这当然不起作用。（“分配只读位置”）

责任完全在我这边：我可以做一些 const_cast 魔法来使这个结构可写吗？我知道的唯一另一种可能性是在我的代码中完全复制类型层次结构，但这仍然会给我留下很多强制转换或 toFancyClass() 函数，以便在我接口库代码时调用。

有任何想法吗？谢谢！

（请不要评论库的代码质量。如果我可以改变它，我不会问这个问题......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:47:37.847

> 现在我看到了， const 定义完全是假的。没有内部方法依赖于真正恒定的向量，我在外部代码中也没有。

方法上的 const 限定符并不意味着它依赖于恒定的向量。这意味着该方法不会修改对象的状态。添加它是为了编译以下代码。

```
void f(const FancyClass a)
{
    cout<<a[0];
} 
```

如果没有方法上的 const 限定符，上面的代码将无法编译`[]`。

无论如何，以下应该工作

```
SomeEnumType & r = const_cast<SomeEnumType &>(storage.myData[0]);

r = b; 
```

类型`b`在哪里`enum``SomeEnumType`

但是，如果您的`storage`对象实际上是一个 const 对象，那么它将导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:30:49.303

最简单的方法是添加 operator[] 的非常量版本。否则，您可能会通过使用 using 抛弃常量来导致 UB `const_cast`。

您可以像这样丢弃 constness：

```
int main() {
    MyType storage = {FancyClass(0), false};

    const_cast< SomeEnumType& >( storage.myData[0] ) = 5;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:33:47.827

通常 operator[] 成对出现一个可变版本和一个 const 版本..（参见：[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)）

当然有一个基于 const_cast 的解决方案，但它涉及未定义的行为（你不能在抛弃 const 之后更改值！）

# asp.net - REGEXR 验证空字段并匹配模式

> ID：13684228
> 
> 赞同：1
> 
> 时间：2012-12-03T13:26:20.257
> 
> 标签：asp.net, regex, validation

我有以下正则表达式应该足以验证该字段是否为空并匹配我需要的模式此正则表达式在正则表达式验证器中以验证文本框但如果我将文本框留空并点击提交按钮，它正在保存空文本框。

这是我的正则表达式：

```
^(((?!00961)[0][0]|(?!00961)[+])([0-9]+))|((00)|(\+))961(\d|(7[0168])\d{6})|((7[1680]|03)\d{6})|(0[1-9]\d{6})$ 
```

即使是这样一个简单的也不会验证空文本：

```
^(\d{1,6}){1}$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:36:00.540

在您的点击事件中，您是调用 Page.Validate 还是检查 Page 对象的 IsValid 属性？

```
protected void myButton_Click(object sender, EventArgs e) {
    if (Page.IsValid) {
        ....
    }
} 
```

# c# - 在哪里加载数据以填充具有多个 poco 类的视图模型

> ID：13684230
> 
> 赞同：4
> 
> 时间：2012-12-03T13:26:41.623
> 
> 标签：c#, asp.net-mvc

我必须在表单中显示一个对象（一个 POCO 类）。

在我的控制器中，我从对象存储库中获取对象数据。

但是在表格中，我还必须显示一些关于对象的额外数据，比如国家名称而不是 countryid、分配的人数（从 1:N 关系中获取）、编辑历史（获取来自另一个表）和位“CanBeCancelled”。

**问题是：我应该把这个逻辑放在哪里？**

我想出了这些替代方案：

*   存储库本身：创建一个额外的函数来返回这个确切的视图模型
*   转换服务，将类转换为视图模型（它知道从哪里获取数据）
*   控制器：它知道要在视图（模型）中显示哪些数据，因此它应该从不同的存储库中获取所有数据

什么是放置此逻辑的好方法（对于“此逻辑”，我的意思是知道在存储库 A 中获取人数的逻辑，由存储库 B 获取历史记录，由 CountryRepository 和布尔值获取国家名称'CanBeCancelled' 由 StateEngine 服务获取）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:36:47.110

如果没有其他限制，我会遵循[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)所述的简单规则——每一层都应该做自己的工作，并假设其他层正确地完成他们的工作。在这种情况下，存储库返回业务对象，服务处理业务对象，控制器只知道如何正确显示对象。详细说明：

1.  人数，历史和国名已经在存储中，应该来自那里。所以存储库应该返回一个完整的对象——只要操作是关于同一个实体的。

2.  当流程中涉及多个实体时，服务负责调用相应的存储库并构造一个对象。

3.  根据业务规则计算出来的东西也是服务对象的工作。

4.  控制器通过调用服务的单个方法接收完整的对象并显示它

一旦您决定*更改*某些内容，例如关于如何允许取消对象的业务规则，这种方法的好处就会很明显。这与访问数据库无关，也不涉及应用程序UI，因此在这种情况下您唯一要更改的地方是服务实现。这种方法允许您做到这一点，而无需更改存储库和控制器的代码。

# java - 在同一对象中测试方法时如何模拟对象中的方法

> ID：13684231
> 
> 赞同：5
> 
> 时间：2012-12-03T13:26:45.687
> 
> 标签：java, unit-testing, easymock

我有这样的java代码：

```
public class A {
    public int get() {
        // many codes
        String s = new String();
        //...
        int n = 5;
        return isEmpty(s) ? n : -1;
    }
    public boolean isEmpty(String s) {
        return s.isEmpty();
    }
} 
```

现在我只想测试get()，我不想同时测试isEmpty()，所以我想mock isEmpty()，只测试一个方法，如果它调用了该类的另一个方法，可以easymock mock方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:34:04.977

一种可行的方法是*不要*模拟`A`并做类似的事情

```
public class TestableA extends A
{
    @Override
    public boolean isEmpty( String s )
    {
         // "mock" impl goes here, eg.:
         return s;
    }
} 
```

`TestableA`并改为编写您的单元测试。你甚至可以在一个`@Before`方法中创建它：

```
public class UnitTest
{
    private A a; // note: A, not TestableA!

    @Before
    public void setUp()
    {
        this.a = new A() 
        {
            @Override
            public boolean isEmpty( String s )
            ...
        }
    }

    @Test
    ...
} 
```

# java - 释放 JNI 数组

> ID：13684232
> 
> 赞同：1
> 
> 时间：2012-12-03T13:26:47.843
> 
> 标签：java, android, c++, callback, java-native-interface

我正在用 C++ 实现一个回调函数，但我面临一些泄漏问题。

数组创建的实现：

```
jshortArray convertShortArrayToJNI(JNIEnv* env, short* arr, size_t count) {
  jshortArray retval = env->NewShortArray(count);
  env->SetShortArrayRegion(retval,0,count,arr);
  return retval;
} 
```

这里回调调用：

```
short* audio_frame;
int size;
jobject* callbackObject;
jshortArray array = convertShortArrayToJNI(jenv, audio_frame, size);
LOGI("array %d", array);
jenv->CallVoidMethod(*callbackObject, callbackMI, array);
LOGI("callback called!");
jenv->ReleaseShortArrayElements(array, audio_frame, 0); 
```

一些电话后，它显示了以下错误：

```
12-03 11:12:38.425: W/dalvikvm(894): ReferenceTable overflow (max=512)
12-03 11:12:38.425: W/dalvikvm(894): Last 10 entries in JNI local reference table:
12-03 11:12:38.425: W/dalvikvm(894):   502: 0x44f879b0 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   503: 0x44f87a98 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   504: 0x44f87b80 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   505: 0x44f87c68 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   506: 0x44f87d50 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   507: 0x44f87e38 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   508: 0x44f87f20 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   509: 0x44f88008 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   510: 0x44f880f0 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894):   511: 0x44f881d8 cls=[S (100 bytes)
12-03 11:12:38.435: W/dalvikvm(894): JNI local reference table summary (512 entries):
12-03 11:12:38.435: W/dalvikvm(894):     1 of Ljava/lang/Class; 164B
12-03 11:12:38.435: W/dalvikvm(894):   511 of [S 100B (511 unique)
12-03 11:12:38.435: W/dalvikvm(894): Memory held directly by tracked refs is 51264 bytes 
```

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:12:37.033

这就是答案：[ReferenceTable overflow (max=512) JNI](https://stackoverflow.com/questions/9372373/referencetable-overflow-max-512-jni)

打电话`jenv->DeleteLocalRef(array);`解决我的问题！

# java - 从 jar 中加载类

> ID：13684237
> 
> 赞同：0
> 
> 时间：2012-12-03T13:27:06.357
> 
> 标签：java

这是动态加载类的常用方法：

```
try {
        File file = new File(JAR_FILE);
        String classToLoad = "com.mycompany.MyClass";
        URL jarUrl = new URL("jar", "","file:" + file.getAbsolutePath()+"!/");
        URLClassLoader loader = new URLClassLoader(new URL[] {jarUrl}, Thread.currentThread().getContextClassLoader());
        Class c = loader.loadClass(classToLoad); 
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但是，我需要一种方法：

*   我们不需要创建一个文件（因为我试图处理的 jar 在获取时是一个字节数组 []）
*   或者我们不需要从 byte[] 数组创建临时文件（作为 AppEngine，我使用的平台不允许创建临时文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:55:21.767

您将必须创建自己的类加载器。

像这样，伪代码中的基本思想：

```
 class MyClassLoader extends ClassLoader {
     public Class findClass(String name) {
         byte[] b = loadClassData(name);
         return defineClass(name, b, 0, b.length);
     }

     private byte[] loadClassData(String name) {
         JarInputStream jis = new JarInputStream(new ByteArrayInputStream(bytearrayJarData));
         JarEntry entry = jis.getNextJarEntry();
         while (entry != null) {
                //compare entry to requested class
                // if match, return Byte data
                // else entry = jis.getNextJarEntry();
         }
         return null; // nothing found
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:51:38.570

编写您自己的`ClassLoader`并覆盖`findClass()`. 在那里你可以`defineClass()`用来加载你的`byte[]`.

# emacs - SWI-Prolog Emacs

> ID：13684238
> 
> 赞同：1
> 
> 时间：2012-12-03T13:27:07.357
> 
> 标签：emacs, prolog, swi-prolog

我在 Windows 7 64 位和 OpenSuse 下使用 SWI-Prolog，我对 Pce_Emacs 没有任何问题（prolog 代码或 XPCE）。使用 Gnu Emacs 我无法编译任何 XPCE 代码，其他代码，使用模块（chr，clpfd ...）工作。是否可以编译这些 XPCE 代码，如果可以，我需要做什么？谢谢你。

乔尔

# java - 从 Java 访问 Javadoc 的库

> ID：13684241
> 
> 赞同：1
> 
> 时间：2012-12-03T13:27:17.620
> 
> 标签：java, javadoc

我想找到一个可以从我的 Java 应用程序中使用的库，它允许我访问我的项目范围内的特定 Javadoc（我指定 Javadocs 的位置）。就像在 Netbeans 中一样，我想潜在地从本地和远程的 html 文件以及从源代码访问 Javadoc。

我希望我可以使用来自 Netbeans 的代码来实现这一点，但我不知道如何，而且我不能轻易地消化他们的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T07:03:08.013

今天我开始考虑同样的事情。从 CI 的角度来看，我可以使用 @author 注释向某人发送电子邮件，该人编写了一个因错误而不是失败而失败的测试。

谷歌没有帮助我（或者我的谷歌不够深入），所以我开始想知道如何自己做。

我想到的第一件事是编写一个小工具，它将检查目录中指定的所有 *.java 文件，将文件名绑定到注释并允许用户对它们执行一些操作。

这合理吗？

# html - 触控设备中的原生 HTML5 拖放

> ID：13684246
> 
> 赞同：3
> 
> 时间：2012-12-03T13:27:29.390
> 
> 标签：html, ipad, drag-and-drop, touch, draggable

[我根据html5rocks](http://www.html5rocks.com/en/tutorials/dnd/basics/)的教程开发了一个 HTML5 拖放

它在桌面浏览器上工作正常，但在触摸设备上不起作用（我正在 iPad 上测试）。

有人知道如何处理触摸设备上的拖动事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:00:32.337

一些 HTML5 原生事件在 WebKit 中工作，例如 touchstart、touchmove、touchend、touchcancel，但不是全部。

通常，拖放和触摸并不能很好地结合在一起。

最好查看各种触摸框架并使用内置手势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T03:51:04.817

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/OEBPS" xmlns:ibooks="http://apple.com/ibooks/html-extensions">
<head>
    <title>Demo 2: Drag and drop</title>
    <meta charset="utf-8"/>
    <style type="text/css">
    /* CSS for the demo. CSS needed for the scripts are loaded dynamically by the scripts */
    #mainContainer{
        width:600px;
        margin:0 auto;
        margin-top:10px;
        border:1px solid #000;
        padding:2px;
    }

    #capitals{
        width:200px;
        float:left;
        border:1px solid #000;
        background-color:#E2EBED;
        padding:3px;
        height:400px;
    }
    #countries{
        width:300px;
        float:right;
            margin: 4px 61px 3px -8px;
        height:400px;
    }   
    #labels{
        width: 120px;
        float:right;
              margin: -403px 116px 3px -8px;
        height:400px;
        /*border: 1px solid red;*/
    }   
    .dragableBox,.dragableBoxRight{
        width:80px;
            height: 10px;
        border:1px solid #000;
        background-color:#FFF;      
        margin-bottom:5px;
        padding:10px;
        font-weight:bold;
        text-align:center;
    }
    .dragableBox,.labelBoxRight{
        width:80px;
            height: 10px;
        border:1px solid #000;
        background-color:#FFF;      
        margin-bottom:5px;
        padding:10px;
        font-weight:bold;
        text-align:center;
    }
    div.dragableBoxRight{
    height: 31px;
        width:110px;
        /*float:left;*/
        margin-right:5px;
        padding:5px;
        background-color:#D3D3D3;
        border: 1px dashed;
    }
    div.labelBoxRight{
               height: 31px;
        width:110px;
        /*float:left;*/
        margin-right:5px;
        padding:5px;
        background-color:#E2EBED;
    }
    .dropBox{
        width:190px;
        border:1px solid #000;
        background-color:#E2EBED;
        height:400px;
        margin-bottom:10px;
        padding:3px;
        overflow:auto;
    }       
    a{
        color:#F00;
    }

    .clear{
        clear:both;
    }
    img{
        border:0px;
    }   
    </style>    

</head>
<body>  

    <div id="mainContainer">

        <div id="capitals">

            <div id="dropContent">
                <div class="dragableBox" id="box1">Br<sup>&#x002B;</sup></div>
                <div class="dragableBox" id="box2">Br<sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box3">CN<sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box4">NO<sub>2</sub><sup>&#x002B;</sup></div>
                <div class="dragableBox" id="box5">NO<sub>2</sub><sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box6">NH<sub>2</sub><sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box7">RC=C<sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box8">MeCO<sup>&#x002B;</sup></div>
            </div>
        </div>
        <div id="countries">
            <div id="box106" class="dragableBoxRight"></div>
            <div id="box107" class="dragableBoxRight"></div>
            <div id="box101" class="dragableBoxRight"></div>
            <div id="box104" class="dragableBoxRight"></div>
            <div id="box105" class="dragableBoxRight"></div>
            <div id="box102" class="dragableBoxRight"></div>
            <div id="box103" class="dragableBoxRight"></div>
            <div id="box108" class="dragableBoxRight"></div>

        </div>
        <div id="labels">
            <div id="boxl106" class="labelBoxRight">nucleophiles</div>
            <div id="boxl107" class="labelBoxRight">Electrophiles</div>
            <div id="boxl101" class="labelBoxRight">nucleophiles</div>
            <div id="boxl104" class="labelBoxRight">Electrophiles</div>
            <div id="boxl105" class="labelBoxRight">nucleophiles</div>
            <div id="boxl102" class="labelBoxRight">Electrophiles</div>
            <div id="boxl103" class="labelBoxRight">nucleophiles</div>
            <div id="boxl104" class="labelBoxRight">nucleophiles</div>

        </div>
        <div class="clear"></div>
        <div class="konaBody"></div>
    </div>

<div id="debug"></div>
<input type="button" value="reset" name="reset" onclick="r1();"/>
      <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js" type="text/javascript"></script>
<script src="js/jquery-1.9.1.js"></script>
     <script src="js/jquery-ui.js"></script>
     <script type="text/javascript" src="js/drag-drop-custom.js"></script>
<script src="js/jquery.ui.touch-punch.js"></script>
<script src="js/jquery.ui.touch-punch.min.js"></script>
   <!-- <link href="css/jquery-ui.css" rel="stylesheet"
        type="text/css" />-->

<script type="text/javascript">
     <![CDATA[

// Custom drop action for the country boxes
function dropItems(idOfDraggedItem,targetId,x,y)
{
    var targetObj = document.getElementById(targetId);  // Creating reference to target obj
    var subDivs = targetObj.getElementsByTagName('div');    // Number of subdivs
    if(subDivs.length>0 && targetId!='capitals')return; // Sub divs exists on target, i.e. element already dragged on it. => return from function without doing anything
    var sourceObj = document.getElementById(idOfDraggedItem);   // Creating reference to source, i.e. dragged object
    var numericIdTarget = targetId.replace(/[^0-9]/gi,'')/1;    // Find numeric id of target
    var numericIdSource = idOfDraggedItem.replace(/[^0-9]/gi,'')/1; // Find numeric id of source

    if(numericIdTarget-numericIdSource==100){   // In the html above, there's a difference in 100 between the id of the country and it's capital(example:
                                                // Oslo have id "box1" and Norway have id "box101", i.e. 1 + 100.
        sourceObj.style.backgroundColor='#0F0'; // Set green background color for dragged object
    }else{
        sourceObj.style.backgroundColor=''; // Reset back to default white background color
    }
    if(targetId=='capitals'){
    // Target is the capital box - append the dragged item as child of first sub div, i.e. as child of <div id="dropContent">
        targetObj = targetObj.getElementsByTagName('div')[0];   

    }
    targetObj.appendChild(sourceObj);   // Append   
}

function r1()
{

}

var dragDropObj = new DHTMLgoodies_dragDrop();  // Creating drag and drop object

// Assigning drag events to the capitals
dragDropObj.addSource('box1',true); // Make <div id="box1"> dragable. slide item back into original position after drop
dragDropObj.addSource('box2',true); // Make <div id="box2"> dragable. slide item back into original position after drop
dragDropObj.addSource('box3',true); // Make <div id="box3"> dragable. slide item back into original position after drop
dragDropObj.addSource('box4',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box5',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box6',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box7',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box8',true); 

// Assigning drop events on the countries
dragDropObj.addTarget('box101','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box102','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box103','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box104','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box105','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box106','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box107','dropItems');
dragDropObj.addTarget('box108','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('capitals','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop

dragDropObj.init(); // Initizlizing drag and drop object
    ]]>
</script>
</body>
</html> 
```

# sql - SQL Server 中的任务和多个辅助角色实例

> ID：13684248
> 
> 赞同：0
> 
> 时间：2012-12-03T13:27:33.520
> 
> 标签：sql, sql-server, azure, azure-worker-roles

请考虑 SQL Server 中的下表：*Tasks (Payload nvarchar, DateToExecute datetime, DateExecuted datetime null)*。

现在我们有两个工作进程（在我们的例子中是 2 个 Azure 工作角色实例）。他们俩都定期尝试获取*DateExecuted IS NULL AND DateToExecute <= GETDATE()*的记录。然后他们处理该记录并将（SQL 更新）*DateExecuted*设置为当前日期。

问题是单个任务只能由单个工作实例处理一次。

为实现这种场景提供**同步或锁定**的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:39:57.377

在 Windows Azure 中锁定多个角色/实例的最简单方法是使用 blob 租约。Steve Marx 为此创建了一个很棒的类，称为 AutoRenewLease（[来源](https://github.com/smarx/WazStorageExtensions/blob/master/AutoRenewLease.cs)、[NuGet](http://nuget.org/packages/smarx.wazstorageextensions)、[博客文章](http://blog.smarx.com/posts/managing-concurrency-in-windows-azure-with-leases)）。如果您已经有一个计时器或 while 循环，您可以编写如下代码：

```
using (var arl = new AutoRenewLease(leaseBlob))
{
    if (arl.HasLease)
    {
        // Query Tasks table and do work....
    }
    else 
    {
        // Other worker is busy....
    }
} 
```

或者您可以使用 DoEvery 方法，它允许您每 X 分钟安排一次代码：

```
AutoRenewLease.DoEvery(leaseBlob, TimeSpan.FromMinutes(15), () => {
    // Query Tasks table and do work....
}); 
```

# java - 当以下代码包含在事务中时，为什么应用引擎会减少我的费用？

> ID：13684250
> 
> 赞同：1
> 
> 时间：2012-12-03T13:27:40.697
> 
> 标签：java, google-app-engine, jdo, datanucleus, appstats

我已经使用 appstats 多次验证了这一点。当以下代码未包装在事务中时，JDO 执行两次数据存储读取和一次写入，3 次 RPC，成本为 240。不仅仅是第一次，每次，即使它每次都访问相同的记录，因此应该将其从缓存中拉出。但是，当我将代码包装在上面的事务中时，代码会生成 4 个 RPC：开始事务、获取、放置和提交——其中，只有获取被计费为数据存储读取，因此总成本为 70。

如果它从缓存中提取它，为什么它只会为读取计费？似乎它会为写入而不是读取计费。应用引擎对非事务性缓存读取的收费是否与对数据存储读取的收费相同？为什么？

这是带有事务的代码：

```
PersistenceManager pm = PMF.getManager();
Transaction tx = pm.currentTransaction();
String responsetext = "";
try {
  tx.begin();
  Key userkey = obtainUserKeyFromCookie();
  User u = pm.getObjectById(User.class, userkey);
  Key mapkey = obtainMapKeyFromQueryString();
  // this is NOT a java.util.Map, just FYI
  Map currentmap = pm.getObjectById(Map.class, mapkey);
  Text mapData = currentmap.getMapData(); // mapData is JSON stored in the entity
  Text newMapData = parseModifyAndReturn(mapData); // transform the map
  currentmap.setMapData(newMapData); // mutate the Map object
  tx.commit();
  responsetext = "OK";
} catch (JDOCanRetryException jdoe) {
  // log jdoe
  responsetext = "RETRY";
} catch (Exception e) {
  // log e
  responsetext = "ERROR";
} finally {
  if (tx.isActive()) {
    tx.rollback();
  }
  pm.close();
}
resp.getWriter().println(responsetext); 
```

这是没有交易的代码：

```
PersistenceManager pm = PMF.getManager();
String responsetext = "";
try {
  Key userkey = obtainUserKeyFromCookie();
  User u = pm.getObjectById(User.class, userkey);
  Key mapkey = obtainMapKeyFromQueryString();
  // this is NOT a java.util.Map, just FYI
  Map currentmap = pm.getObjectById(Map.class, mapkey);
  Text mapData = currentmap.getMapData(); // mapData is JSON stored in the entity
  Text newMapData = parseModifyAndReturn(mapData); // transform the map
  currentmap.setMapData(newMapData); // mutate the Map object
  responsetext = "OK";
} catch (Exception e) {
  // log e
  responsetext = "ERROR";
} finally {
  pm.close();
}
resp.getWriter().println(responsetext); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:17:43.347

通过事务，`PersistenceManager`可以知道缓存在该代码的整个处理过程中是有效的。没有事务，它就不能（它不知道是否有其他动作在背后发生并改变了事情），因此必须根据数据库表验证缓存的内容。每次检查时，它都需要创建一个事务来执行此操作；这是 DB 接口本身的一个功能，其中任何不在事务中的操作（有一些特定于 DB 的例外）都会自动添加一个事务。

在您的情况下，无论如何您都应该有一个事务，因为您希望在处理时拥有一致的数据库视图。没有它，`mapData`当您正在处理它时，可能会被另一个操作修改，而这些修改将被默默地丢失。那会很糟糕。（嗯，可能。）交易是良药。

^(（您还应该考虑使用 AOP 来管理事务包装；这比每次都自己编写所有事务管理代码要容易得多。OTOH，在您把事情做好之前，它会给部署增加很多复杂性，所以我不能理解遵循这条建议……）)

# javascript - 带有 target="_blank" 的表单 - 新窗口和加载页面

> ID：13684251
> 
> 赞同：1
> 
> 时间：2012-12-03T13:27:52.280
> 
> 标签：javascript, html, forms

提交表单后，应打开一个新页面以打印为 pdf。但是通过这样做，`<form action="page.php" method="POST" target="_blank">`包含所有信息的表格仍然存在，这是非常非常糟糕的。我现在想在此窗口/选项卡中加载另一个页面并打开打印窗口，而不是仍然显示带有表单的页面。使用 php 和 headers 是不可能的，但是使用 javascript 应该是对的吗？但是怎么做？我不习惯 javascript，所以我不知道如何处理这个问题，但你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:46:39.170

您可以将 onsubmit 事件附加到表单 f.ex：

```
document.getElementById('form').onsubmit = function() {
    window.location = '/anotherpage.html';
} 
```

这假定表单的 ID 为“form”。

# objective-c - iOS中的UITab冻结

> ID：13684252
> 
> 赞同：2
> 
> 时间：2012-12-03T13:27:58.637
> 
> 标签：objective-c, ios, uialertview, freeze, uitabcontroller

我正在 Xcode 4.2 上开发 iOS 5.1 应用程序。我有一个带有不同选项卡的 uitablcontroller。我的问题是，当单击一个选项卡时，应用程序“冻结”几秒钟并执行它应该执行的所有代码，但它没有按应有的方式首先加载 UIAlertView。

我在 viewDidLoad 中声明了 UIAlertView。这是一个代码片段：

```
- (void)viewDidLoad
{

NSLog(@"##### VIEW DID LOAD 1 #####");

// Display Alert: Loading

alertView = [[UIAlertView alloc] initWithTitle:@"Loading"
                                       message:@"\n"
                                      delegate:self
                             cancelButtonTitle:nil
                             otherButtonTitles:nil];

UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
spinner.center = CGPointMake(139.5, 75.5); // .5 so it doesn't blur
[alertView addSubview:spinner];
[spinner startAnimating];
[alertView show];

[super viewDidLoad];

NSLog(@"##### VIEW DID LOAD 2 #####");

self.tableView.dataSource = self;
self.tableView.delegate = self;

[self callMainMethod];

} 
```

当点击选项卡时，我可以看到第一个 NSLog 显示在 Log 中，然后调用 main 方法，但没有显示 UIAlertview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:34:28.180

在`viewDidLoad`运行时，可能是`frame`关联的 UIView 的大小为零。我不知道，但它`UIAlertView`可能正试图在这个零尺寸的框架中展示自己。`UIAlertView`如果您提出in是否有意义`viewDidAppear`？

如果`[self callMainMethod]`需要大量计算能力，则显示可能在完成之前不会更新。您可以尝试将其移至`viewDidAppear`. 您也可以尝试延迟它，以便 UI 线程的主运行循环、显示更新的线程和执行的线程`viewDidLoad`以及所有其他`view...`方法，有时间完成所有事情并在开始繁重之前变得空闲加工。只有当运行循环完成了它所能做的所有处理时，它才真正开始更新显示。像这样：

```
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 200000000), dispatch_get_main_queue(), ^{
   [self callMainMethod];
} 
```

相关文档位于[http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

如果这种怀疑是正确的，那么您应该`UIAlertView`直接弹出，只是让一切都死了一段时间，而`callMainMethod`执行。

我希望我知道怎么写，“只有在你设法完成更新显示到这里的所有内容之后才发送这个块”，但我不知道该怎么做。所以上面的调度调用应该将调用延迟`callMainMethod`200 毫秒，这通常是足够的。

如果可行，您可能应该开始另一个问题，例如“如何在执行此方法时停止显示冻结”。

# jquery - 创建时在 Internet Explorer 中出现错误 使用 jQuery

> ID：13684256
> 
> 赞同：0
> 
> 时间：2012-12-03T13:28:00.447
> 
> 标签：jquery, internet-explorer, html

我在用：

```
$("<div/>", {
id: "overlay",
class: "web_dialog_overlay"
}).appendTo("body");
$("<div/>", {
id: "dialog",
class: "web_dialog",
html: "<div class='d_title'>Server error! Try again later</div><div class='button ok' id='ok'>Ok</div>"
}).appendTo("body");
$('#overlay').show();
$('#dialog').fadeIn(300); 
```

这段代码在 google chrome、firefox 和 opera 中运行良好。但不能在 Internet Explorer 中工作。

我正进入（状态

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; InfoPath.3; Tablet PC 2.0)
Timestamp: Mon, 3 Dec 2012 13:26:49 UTC

Message: Expected identifier, string or number
Line: 335
Char: 1
Code: 0
URI: http://localhost/signup 
```

335线是`id: "overlay",`

该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:35:42.640

确保用引号将对象中的类属性名称括起来，因为它是为将来使用而保留的。[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)

```
$("<div/>", {
    id: "overlay",
    "class": "web_dialog_overlay"
}).appendTo("body");

$("<div/>", {
    id: "dialog",
    "class": "web_dialog",
    html: "<div class='d_title'>Server error! Try again later</div><div class='button ok' id='ok'>Ok</div>"
}).appendTo("body");

$('#overlay').show();
$('#dialog').fadeIn(300); 
```

# batch-file - 如果任何命令行参数等于 / 则显示帮助消息？

> ID：13684259
> 
> 赞同：4
> 
> 时间：2012-12-03T13:28:26.697
> 
> 标签：batch-file, cmd

我希望编写一个 Windows 批处理脚本，首先测试是否有任何命令行参数等于`/?`. 如果是这样，它会显示帮助消息并终止，否则它会执行其余的脚本代码。我尝试了以下方法：

```
@echo off
FOR %%A IN (%*) DO (
  IF "%%A" == "/?" (
    ECHO This is the help message
    GOTO:EOF
  )
)

ECHO This is the rest of the script 
```

这似乎不起作用。如果我将脚本更改为：

```
@echo off
FOR %%A IN (%*) DO (
  ECHO %%A
)

ECHO This is the rest of the script 
```

并在`testif.bat arg1 /? arg2`我得到以下输出时调用它：

```
arg1
arg2
This is the rest of the script 
```

`FOR`循环似乎忽略了参数`/?`。任何人都可以提出解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T13:49:48.500

这样的事情应该可以解决问题：

```
@echo off

IF [%1]==[/?] GOTO :help

echo %* |find "/?" > nul
IF errorlevel 1 GOTO :main

:help
ECHO You need help my friend
GOTO :end

:main
ECHO Lets do some work

:end 
```

感谢@jeb 指出错误，如果只有 /? 提供的 arg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:44:22.310

不要使用 FOR 循环，而是使用以下内容：

```
@ECHO OFF
:Loop
IF "%1"=="" GOTO Continue
IF "%1" == "/?" (
    ECHO This is the help message
    GOTO:EOF
)
SHIFT
GOTO Loop

:Continue
ECHO This is the rest of the script

:EOF 
```

# c++ - 如何消除仅因返回类型不同而不同的函数模板？

> ID：13684264
> 
> 赞同：7
> 
> 时间：2012-12-03T13:28:55.393
> 
> 标签：c++, templates

我注意到用于区分唯一模板函数的签名与用于区分唯一函数的签名（包括从模板函数实例化的那些）之间存在不对称性。

特别是，仅返回类型不同的模板函数被认为是唯一的，而仅返回类型不同的函数被认为是冗余的。

因此，我有一个相应的问题，关于如何在实例化时消除仅因返回类型不同的函数模板之间的歧义：

```
#include <iostream>

template<typename T>
long foo(T)
{
    std::cout << "long" << std::endl;
    return 0;
}

template<typename T>
char foo(T)
{
    std::cout << "char" << std::endl;
    return '\0';
}

int main()
{
    double d = 0.0;
    long n = foo(d); // <- Ambiguous: How to specify the template function to use?
} 
```

在上面的代码中，模板函数的实例化`foo`是模棱两可的，正是因为我刚才提到的不对称性。两个模板函数定义的存在是合法的，但实例化是非法的，即使在同一行代码中指定了返回类型。

我问这个问题纯粹是为了理论学习的目的。也许这个代码结构，在现实生活中，将是糟糕设计的标志。也许它永远不会在现实生活中出现。此外，我可以设想通过更改模板定义（或进行其他更改）来克服此问题的不同方法。

但是，我仍然想知道，在保持模板定义不变的情况下，是否可以在实例化时消除这两个模板函数之间的歧义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T13:36:31.130

使用模板时，您实际上可以消除两种不同的重载的歧义。它不漂亮但有效：

```
long n = static_cast<long(*)(double)>(&foo)(d); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:59:31.277

如果您确实需要两个具有相同名称、相同参数列表但返回类型不同的函数模板，您别无选择，只能通过将返回类型作为模板参数来区分两者：

```
template <typename R, typename T>
R foo(T); 
```

IIRC 在 C++11 中有部分函数模板专业化，尽管我在标准中找不到任何关于它的内容。如果有，这应该工作：

```
//partial function template specializations: C++11 only!
template <typename T>
long foo<long, T>(T)
{
    std::cout << "long" << std::endl;
    return 0;
}

template<typename T>
char foo<char, T>(T)
{
    std::cout << "char" << std::endl;
    return '\0';
} 
```

或者，在 C++03 中：

```
template <typename R, typename T>
struct FooImpl;

template <typename T>
struct FooImpl<long, T>
{
  static long doIt(T) 
  {
    std::cout << "long" << std::endl;
    return 0;
  }
};

template <typename T>
struct FooImpl<char, T>
{
  static char doIt(T) 
  {
    std::cout << "char" << std::endl;
    return '\0';
  }
};

template <typename R, typename T>
R foo(T t)
{
  return FooImpl<R, T>::doIt(t);
} 
```

在这两种情况下，您的 main 将如下所示：

```
int main()
{
    double d = 0.0;
    long n = foo<long>(d); // specify the return type only
    auto c = foo<char>(n);
} 
```

# git - 如何减少错误的提交 [git]

> ID：13684265
> 
> 赞同：1
> 
> 时间：2012-12-03T13:29:05.467
> 
> 标签：git, git-flow

我正在尝试在我们的开发过程中应用 gitflow 方法，理论上我喜欢它。但是有一点是任何地方都没有涵盖的...

每个人都将他们的结果推向`develop`分支。在计划中，我们有 10 个问题应该完成并发布到测试版，然后发布到生产环境。10 个问题中的 2 个没有最终修复，但部分已经在开发分支中，因为开发人员认为他做得很好，但经过测试，错误又来了。现在决定我们不需要等待 2 个问题将得到修复，我们需要进行上传，这意味着创建`release`分支并在 beta 上进行测试。

在原始的 gitflow 文章中说：

> 从develop分支出一个新的release分支的关键时刻是develop（几乎）反映了新版本的期望状态。至少所有针对要构建的版本的功能都必须在此时合并到开发中

但是如果在`develop`分支历史中我们可以看到一对不需要的合并怎么办？我需要以某种方式切割它们吗？还是做其他事情？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:18:54.057

在这种情况下，最安全的做法是使用[git revert](http://www.kernel.org/pub/software/scm/git/docs/git-revert.html)来撤销提交。这将创建一个完全反转相关提交的提交。因此，`git revert 1234567`将在您的分支上创建一个新的提交，使用 SHA id 反转提交`1234567`。

关于这样做的几点：

*   在您执行 git revert 再次合并分支后，不会将已还原提交的更改带回，您必须还原还原提交。因此，在我们的示例中，`git revert 1234567`假设这创建了 revert commit `09876`。现在您的开发人员已经正确实现了他的功能并且您希望将其合并。要通过还原删除更改，您必须现在`git revert 09876`然后合并他更新的分支。
*   为了让您自己更轻松，将提交按从最近到最近的顺序还原。所以如果你有提交，在`1, 2, 3`哪里做。然后，如果这些还原创建提交以重新引入更改，则按最近到最近的顺序还原它们。`1``HEAD``git revert 1, git revert 2, git revert 3``8, 9, 10`
*   也可以恢复合并提交，但这有点复杂，在手册页中有描述，`git help revert`
*   如果你需要这样做，你应该阅读Linus 的[这篇文章](http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)，他描述了许多你需要考虑的事情。

# php - 在 PHP 中解析自定义模板的最有效方法

> ID：13684268
> 
> 赞同：0
> 
> 时间：2012-12-03T13:29:13.870
> 
> 标签：php

假设我们正在编写一个自定义模板系统，我们希望在模板包含的地方显示一个链接`{{link:http://example.com/something}}click here{{link}}`。

解析这个的最佳方法是什么？

我能想到的一些方法： 使用`substr`. `preg_replace`与反向替换等一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:16:53.143

对于我自己的解析器，我混合使用“strpos / substr”和 preg_replace。为什么？好吧，这一切都在数字中。

如果要解析的字符串几乎只包含一个 {{link}} 标记，没有 Start- 和 Endnoice，preg_replace 会更快，例如

```
STARTNOICE{{link:http://example.com/something}}click here{{link}}ENDNOICE 
```

但是，与 substr / strpos 相比，Endnoice 中的字符越多，preg_replace 就越慢 :) Endnoice 中只有 100 个字符，将使 substr / strpos 比 preg_match 更快！

证明这一点的最好方法是使用原因代码。所以这是一个测试脚本。它将 substr 的时间总和与 preg_match 进行比较

尽管 substr 需要更多代码，但它更有效:)

格雷茨，JB

ps一些结果：

```
Startnoice = Endnoice = 100, /w 100 loops
$substrTime:
0.004448 Seconds
$pregTime:
0.004752 Seconds 
```

.

```
Startnoice = Endnoice = 1000, /w 100 loops
$substrTime:
0.005598 Seconds
$pregTime:
0.023844 Seconds  << waaaay slower 
```

.

```
Startnoice = Endnoice = 10000, /w 100 loops
$substrTime:
0.009028 Seconds
$pregTime:
0.278836 Seconds  << Dont use preg_replace 
```

.

```
<?PHP
$startNoice = 1;
$endNoice   = 100;

for( $jb = 0; $jb < 100; $jb++ )
{
    $string = randomgenerator( $startNoice ) . '{{link:http://example.com/something}}click here{{link}}.' . randomgenerator( $endNoice );

/**************/
// Strpos / substr
/**************/

/* Start the timer */
    $Start = '{{link:';
    $StartEnd = '}}';
    $Stop = '{{link}}';

    $StartLen = strlen( $Start );
    $StartEndLen = strlen( $StartEnd );
    $StopLen = strlen( $Stop );

    $time_start = microtime_float();
    $strpos['Start']    = strpos( $string, $Start );

    $start = substr( $string, 0, $strpos['Start']);
    $end = substr( $string, $strpos['Start'] );

    $strpos['StartEnd'] = strpos( $end, $StartEnd, $StartLen );
    $strpos['Stop']     = strpos( $end, $Stop, $StartLen );

    $url  = substr( $end, $strpos['Start'] + $StartLen, ($strpos['StartEnd'] - $strpos['Start'] - $StartLen)  );
    $text = substr( $end, $strpos['StartEnd'] + $StartEndLen, ($strpos['Stop'] - $strpos['StartEnd'] - $StartEndLen) );

// Replace the link
    $NewString1 = $start . '<a href="' . $url . '">' . $text . '</a>' . substr( $end, $strpos['Stop'] + $StopLen );
/* Stop the tumer */
    $time_end = microtime_float();
    $substrTime[] = $time_end - $time_start;

/**************/
// Preg_match
/**************/
    $time_start = microtime_float();
    $NewString2 = preg_replace('/{{link:(.*)}}(.*){{link}}/', '<a href="$1">$2</a>', $string);
    $time_end = microtime_float();
    $pregTime[] = $time_end - $time_start;
}

echo '$substrTime: . <br />';
echo round( array_sum( $substrTime ), 6) . ' Seconds';
echo '<br />';
echo '$pregTime: . <br />';
echo round( array_sum( $pregTime ), 6) . ' Seconds';

function randomgenerator( $length )
{
    $string = 'abcdefghijklmnopqrstuvwxyz01234567890!@#$%^&*()_+=-{}][|\::",./';
    $r = '';
    for( $i = 0; $i < $length; $i ++ )
    {
        $r .= $string[ rand(0, strlen( $string ) -1 ) ];
    }
    return $r;
}

function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}
?> 
```

# javascript - Jquery固定标题和表格的固定列，单元格的宽度可能会有所不同

> ID：13684269
> 
> 赞同：0
> 
> 时间：2012-12-03T13:29:21.920
> 
> 标签：javascript, jquery, jquery-plugins, scrollbar

这个问题已经被问了很多时间，我已经尝试了很多来自 stack-overflow 的解决方案，包括下面提到的几个 [question-1](https://stackoverflow.com/questions/673153/html-table-with-fixed-headers)，[question-2](https://stackoverflow.com/questions/983031/jquery-how-to-freeze-table-header-and-allow-scrolling-of-the-rest-of-the-rows) 但是当表格宽度是动态时它们似乎都不起作用等等是元素行。

我的表结构使用另一个 jquery 插件 jqueryTreeTable 插件。而且结构有点复杂。它看起来像[这样](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/performance.html)，我需要在这里将它的标题固定在水平滚动上，并固定一列用于水平滚动，因为内容可能有水平滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:39:25.830

**用于处理表格的有用 jQuery 插件**（*包括可调整大小的列和固定标题*）

*   [弹性网格](http://flexigrid.info/)
*   [英格丽德](http://reconstrukt.com/ingrid/src/example1.html)
*   [表格固定表头](http://www.tablefixedheader.com/fullpagedemo/)
*   [jQuery 网格](http://makoomba.altervista.org/grid/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:25:31.913

我在互联网上找到了这个解决方案，但我找不到我找到的参考资料，我不得不进行很多更改。请参阅下面代码中的注释以了解我添加的更改。这适用于浮动标题部分。

```
 $("table.tableWith-FloatingHeader").each(function() {
                $(this).wrap("<div class=\"divTableWithFloatingHeader\" style=\"position:relative\"></div>");

                var originalHeaderRow = $("thead", this);
                originalHeaderRow.before(originalHeaderRow.clone());
                var clonedHeaderRow = $("thead", this);

                clonedHeaderRow.addClass("tableFloatingHeader");

                originalHeaderRow.addClass("tableFloatingHeaderOriginal");
                if(originalHeaderRow.hasClass("tableFloatingHeader")){
                    originalHeaderRow.removeClass("tableFloatingHeader");
                }

                clonedHeaderRow = $('.tableFloatingHeader');
                clonedHeaderRow.css("position", "absolute");
                clonedHeaderRow.css("top", "0px");
                clonedHeaderRow.css("left", $(this).css("margin-left"));
                // originally visibility hidden only was used but it didn't work for me so I had to use display:none
                clonedHeaderRow.css("visibility", "hidden");
                clonedHeaderRow.css("display", "none");

                var tableBody = $('tbody', this);
                tableBody.css('display', 'table');

            });

            UpdateTableHeaders();
            $(window).scroll(UpdateTableHeaders);
            $(window).resize(UpdateTableHeaders);

            // since my table's width could be changing on click to the td (expand/collapse of td leads to change in width so to fix the width for the head and body UpdateTableHeader function is called.
            $("table.tableWith-FloatingHeader").undelegate("td", "click");
            $("table.tableWith-FloatingHeader").delegate("td", "click", function() {
                UpdateTableHeaders();
            });

// functions **

// function to fix the table head's width and it's visibility
    function UpdateTableHeaders() {
        $("div.divTableWithFloatingHeader").each(function() {
            var originalHeaderRow = $(".tableFloatingHeaderOriginal", this);
            var floatingHeaderRow = $(".tableFloatingHeader", this);
            var offset = $(this).offset();
            var scrollTop = $(window).scrollTop();
            if ((scrollTop > offset.top) && (scrollTop < offset.top + $(this).height())) {
                floatingHeaderRow.css("visibility", "visible");
                floatingHeaderRow.css("display", "block");
                floatingHeaderRow.css("top", Math.min(scrollTop - offset.top, $(this).height() - floatingHeaderRow.height()) + "px");
                if(!floatingHeaderRow.hasClass('visible'))
                    floatingHeaderRow.addClass('visible');
                originalHeaderRow.css("visibility", "hidden");
                originalHeaderRow.css("display", "none");

                // Copy cell widths from original header
                $("th", floatingHeaderRow).each(function(index) {
                    var cellWidth = $("th", originalHeaderRow).eq(index).css('width');
                    $(this).css('width', cellWidth);
                });

                // Copy row width from whole table
                floatingHeaderRow.css("width", $(this).css("width"));
            }
            else {
                originalHeaderRow.css("visibility", "visible");
                originalHeaderRow.css("display", "block");
                floatingHeaderRow.css("visibility", "hidden");
                floatingHeaderRow.css("display", "none");
                floatingHeaderRow.removeClass('visible');
                floatingHeaderRow.css("top", "0px");
            }
// since my problem was when I cloned the original head and hide it, it  wasn't able to sync with the change in width of the table body. I had to sync the width of the each of the tbodys tds with theads tds. 
            updateHeaderWidth();
        });
    }

// function to sync width for the table head with table body. 
    function updateHeaderWidth() {

        $("div.divTableWithFloatingHeader").each(function() {

            var table = $(this);
            var widths = [];
            var i = 0;

           // iterate through each of the tbodys first trs tds to get their width
            table.find('tbody .first-row td div.width-set').each(function(){

                widths[i] = $(this).width();
                i ++;
            });

           // iterate through theads ths add an element with the same width to both first tds and ths
           // note: step to add element to both the element is required else it would go a little out of sync
            table.find('thead.tableFloatingHeaderOriginal th.width-get, thead.tableFloatingHeader th.width-get').each(function(){

                i = $(this).attr('data-col-number');
                var width = widths[i];
                var widthKeeperTag = '<div style="width: ' + width + 'px; height: 1px;"></div>';
                if($(this).find('div').length){
                    $(this).find('div').replaceWith($(widthKeeperTag));
                }else{
                    $(this).html($(this).html() + widthKeeperTag);
                }
            });
        });
    } 
```

# drupal - Drupal 7 多字段集

> ID：13684270
> 
> 赞同：1
> 
> 时间：2012-12-03T13:29:22.537
> 
> 标签：drupal, drupal-7, drupal-modules, cck

我想做一个自定义类型的节点。在这一个中，一些信息和链接多个文档（0-> n 个文档）的能力。直到这里没问题，我放了一个“无限”数量的值。

现在，我必须在文档中附加一个文本字段。他们都必须是“无限的”。我怎样才能做到这一点？

谢谢阅读 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:43:44.753

[http://drupal.org/project/field_collection](http://drupal.org/project/field_collection)是更简单的解决方案，但我必须承认，当你用它进行艰难的开发时，这个模块很糟糕。

# r - searchTwitter 无法连接到主机

> ID：13684272
> 
> 赞同：1
> 
> 时间：2012-12-03T13:29:28.913
> 
> 标签：r, twitter, rstudio

我在 R 中使用 twitteR 包，当我尝试使用 searchTwitter 函数时，我收到以下消息：

```
Error in function (type, msg, asError = TRUE)  : couldn't connect to host 
```

奇怪的是，我只在 RStudio 中收到此消息。如果我直接在 R 中做同样的事情，它工作正常。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:25:54.007

完毕！代理配置缺少文件 (.Renviron)。

# javascript - javascript 正则表达式中的可选部分（带有捕获组）

> ID：13684278
> 
> 赞同：4
> 
> 时间：2012-12-03T13:29:43.853
> 
> 标签：javascript, regex, expression

我有一个关于如何为正则表达式实现可选部分的问题。我以解析古老的文本冒险输入为例。这很好地突出了我的任务。这是一个显示我所追求的示例：

```
var exp = /^([a-z]+)(?:\s([a-z0-9\s]+)\s(on|with)\s([a-z\s]+))?$/i;

var strings = [
    "look",
    "take key",
    "take the key",
    "put key on table",
    "put the key on the table",
    "open the wooden door with the small rusty key"
];

for (var i=0; i < strings.length;i++) {
    var match = exp.exec(strings[i]);

    if (match) {
        var verb = match[1];
        var directObject = match[2];
        var preposition = match[3];
        var indirectObject = match[4];

        console.log("String: " + strings[i]);
        console.log("  Verb: " + verb);
        console.log("  Direct object: " + directObject);
        console.log("  Preposition: " + preposition);
        console.log("  Indirect object: " + indirectObject);    
    } else {
        console.log("String is not a match: " + strings[i]);
    }
    console.log(match);
} 
```

我的正则表达式适用于第一个和最后三个字符串。

我知道如何使用其他方法（如 .split()）获得正确的结果。这是学习正则表达式的尝试，所以我不是在寻找另一种方法来做到这一点:-)

我尝试添加更多可选的非捕获组，但我无法让它工作：

```
var exp = /^([a-z]+)(?:\s([a-z0-9\s]+)(?:\s(on|with)\s([a-z\s]+))?)?$/i; 
```

这适用于前三个字符串，但不适用于最后三个。

所以我想要的是：第一个单词，一些字符直到指定的单词（比如“on”），一些字符直到字符串结尾

棘手的部分是不同的变体。

可以做到吗？

工作解决方案：

```
exp = /^([a-z]+)(?:\s((?:(?!\s(?:on|with)).)*)(?:\s(on|with)\s(.*))?)?$/i; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:31:20.477

也许像这样的一些正则表达式：

```
var exp = /^([a-z]+)(?:(?:(?!\s(?:on|with))(\s[a-z0-9]+))+(?:\s(?:on|with)(\s[a-z0-9]+)+)?)?$/i; 
```

该组`\s[a-z0-9]+`捕获前面有空格的单词。

`(?!\s(?:on|with))`避免这个词是“on”或“with”。

因此`(?:(?!\s(?:on|with))(\s[a-z0-9]+))+`是“on”或“with”之前的单词列表。

你可以[在这里](http://regexr.com?33149)测试。

# git - 当我将我的回购重置为最后一次提交时，为什么我必须“推送”？

> ID：13684281
> 
> 赞同：0
> 
> 时间：2012-12-03T13:29:47.893
> 
> 标签：git

我一直在跟上 Git 的速度（到目前为止对它非常满意），但我仍然对一些事情感到有些困惑。我在 Mac 上使用 SourceTree。

特别是，我和我的团队一直在进行更改，提交它们，然后推送到我的 linux 服务器上的远程裸仓库。另外，我一直在我的笔记本电脑上做一些实验，最终得到了一些不同的局部变化。

我没有尝试合并它们，而是决定我真的只想将我的笔记本电脑恢复到远程仓库的状态。我曾尝试从远程仓库中拉下更改，在被警告我需要合并之后，我决定恢复（我猜是 GIT 语言中的“重置”）到最后一次正式提交。我对所有东西都这样做了，然后就可以下载文件了。

然而，SourceTree 告诉我，有 24 处更改必须推送回远程服务器，但我看不到这些更改是什么（特别是因为我的目标是不保存任何我所做的事情）。这让我非常紧张。

最终，我只是炸毁了整个文件夹（包括 .git），然后再次克隆了远程存储库。

最后一个的缺点是，如果您有任何未跟踪的新文件，如果您不记得暂时将它们复制到其他地方，它们就会被删除。

我的问题是是否有任何方法可以将我的本地工作副本（和 .git 内容）恢复到远程仓库的最新状态，而使工作副本中的任何未跟踪文件保持不变？

我确实找到了[为什么我必须在 Git 中推送我刚刚从原点提取的更改？](https://stackoverflow.com/questions/5283829/why-do-i-have-to-push-the-changes-i-just-pulled-from-origin-in-git)但它并没有真正回答我在这里描述的任何一个问题。

提前感谢您的任何见解。

D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:41:59.693

我相信您正在寻找的是 `git reset --hard origin/master`，假设那`origin`是您的遥控器并且`master`是您的分支。

**警告**：这将清除您拥有的任何修改过的文件，但它不应该**影响**未跟踪的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:55:16.787

您可以使用`git checkout`将单个工作树文件重置为它们在索引中的外观（在 HEAD 或任何特定修订或分支上）。

请注意，git 中*checkout*的含义与其他 SCM 系统中的含义大不相同。它的意思是“看看它”，而不是“在我再次签入之前为其他人锁定它”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T20:19:43.180

我对您执行的 git pull 和 git reset 的细节了解得不够多，无法理解为什么 git 说您必须推迟 24 项更改。重新创建发生的确切命令和错误可能为时已晚，但我们可能可以利用该信息解码发生的事情。

如果将来，您的本地更改与远程存储库发生分歧的情况相同，我建议您使用稍微不同的 git 工作流程。首先从

`git fetch`

这将检索任何新提交并更新 origin/master 远程分支以及任何其他远程分支，但与它不同`git pull`的是它不会更改您的任何本地分支，甚至是 master。

现在，如果您想保存不同的本地更改以供将来使用，请签出一个新的主题分支，

`git checkout -b my_feature`

现在您在不同的本地工作上有一个分支指针，您可以重置您的主分支指针，而不必担心丢失您的工作。首先，更改到您的主分支（应该与 my_feature 相同的提交）

`git checkout master`

现在将其重置为原点/主控，

`git reset --hard origin/master`

现在您的旧工作已保存在 中`my_feature`，而您的`master`分支再次与远程存储库匹配。

为了在将来避免这个麻烦，我强烈建议始终在主题分支上工作。这样你就可以`git pull`掌握大师而不用担心你的本地工作。当需要与世界分享您的工作时，您可以`rebase`在推送之前先掌握您的分支，而其他人甚至不必知道您的本地分支。

我是 Pro Git 书的忠实粉丝，该书可在线获得。这是他们关于变基的[章节](http://git-scm.com/book/ch3-6.html)。

# c# - 如何在 asp.net webservice 中添加监听器？

> ID：13684284
> 
> 赞同：0
> 
> 时间：2012-12-03T13:29:54.200
> 
> 标签：c#, asp.net, winforms, listener

我想从 C# Windows 窗体应用程序的客户端应用程序对 ASP.NET Web 服务进行异步调用。我成功地做到了，但我的问题是当我调用 Web 服务时，它会侦听其他客户端以获得将结果返回给调用者客户端的权限。有没有办法做到这一点？

# php - 用php多维数组填充html表

> ID：13684285
> 
> 赞同：0
> 
> 时间：2012-12-03T13:29:55.887
> 
> 标签：php, html, mysql, arrays, html-table

我想将`MySQL`表格中的数据放在适当的位置`(HTML Table)`。一切都是动态的。产品名称**并不总是相同的**（列）。记录的数量**并不总是相同的**（行）。

**MySQL 表（填充 ROWS 数据）**

```
 iduser       idprod      quantity         date
  1234          65          60      2012-11-30 09:13:41.628
  1234          66          50      2012-11-30 09:13:41.628
  1234          64          80      2012-11-30 09:13:41.628 
```

**MySQL 表（填充 COLUMNS 数据）**

```
idprod  name                     date
66      Panettone de Truffas     2012-11-29 15:19:41
65      Panettone de Maracujá    2012-11-29 15:16:56
64      Panettone de Brigadeiro  2012-11-29 15:16:44 
```

**代码**

```
 $panettones = array();
    $querySel = "SELECT * FROM registro_panettone";
    $resultSel = mysql_query($querySel);
    $rows = mysql_num_rows($resultSel);
    $panettones = array();
    for($i=0;$i<$rows;$i++) {
        /*$panettones["id_user"] = mysql_result($resultSel,$i,0);
        $panettones["id_pan"] = mysql_result($resultSel,$i,1);
        $panettones["qtd"] = mysql_result($resultSel,$i,2);
        $panettones["data"] = mysql_result($resultSel,$i,3);*/
        $retorno = mysql_fetch_array($resultSel);
        $texto = "<tr>";
        $texto .= "<td>".$retorno[0]."</td>";
        $texto .= "<td>".$retorno[1]."</td>";
        $texto .= "<td>".$retorno[2]."</td></tr>";
        echo $texto;
} 
```

目前看起来像：

[http://www.cacaushow.net.br/panettone_2012/rel.php](http://www.cacaushow.net.br/panettone_2012/rel.php)

我的愿望是它看起来像：

[http://www.cacaushow.net.br/panettone_2012/wish.php](http://www.cacaushow.net.br/panettone_2012/wish.php)

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:36:52.740

如果您使用的是 html 表（就像您在示例中所做的那样），您应该始终首先检查 mysql 字段是否为空。如果是用 & nbsp 替换它；价值。空表格单元格（在某些浏览器中）倾向于显示与您的第一个示例类似的结果。

希望这有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:51:52.423

```
<td>&nbsp;</td>; 
```

无论您有空值而不是在那里不做任何事情。和 <tr> 在每个外部 for 循环之后

```
<table border="1" cellspacing="0" cellpadding="5" width="100%">
    <tr>
        <td><b>Código</b></td>
        <td id='66'><b>Panettone de Truffas</b></td>
        <td id='65'><b>Panettone de Maracujá</b></td>
        <td id='64'><b>Panettone de Brigadeiro</b></td>
        <td><b>Data</b></td>
    </tr>
    <tr>
        <td>1234</td>
        <td>60</td>
        <td>2012-11-30 09:13:41.628</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>1234</td>
        <td>50</td>
        <td>2012-11-30 09:13:41.628</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

# java - 在Java中获取CWD的父目录

> ID：13684286
> 
> 赞同：0
> 
> 时间：2012-12-03T13:29:58.877
> 
> 标签：java, file

我`System.getProperty("user.dir")` 用来获取我的 CWD。然后我修剪最后一个 \token 给我父目录。

我的问题是，有没有更简单的方法呢？我想要当前的工作目录， `cd`向上一级，然后钻入另一个项目中的子文件夹。

我在其中运行单元测试，`\\projectA\test` 但我想获取同一级别项目中包含的另一个文件夹的路径。即文件夹`\\projectB\otherTestData`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:33:28.597

[File](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)类中的检查`getparent`和`getParentFile`方法。

有关更多详细信息，请参见[此处](http://docs.oracle.com/javase/tutorial/essential/io/pathOps.html)

# eclipse - 我可以让 Ubuntu 上的 Eclipse 看起来更紧凑吗？

> ID：13684289
> 
> 赞同：28
> 
> 时间：2012-12-03T13:30:04.133
> 
> 标签：eclipse, user-interface, ubuntu, size, gtk3

> **可能重复：**
> [Ubuntu 上 Eclipse 中的巨大选项卡](https://stackoverflow.com/questions/2743647/gigantic-tabs-in-eclipse-on-ubuntu)

当我在 Ubuntu 10.04 LTS 上使用 Eclipse 时，我发现选项卡和栏使用了太多的垂直间距，这使得界面对我的口味来说有点过于宽敞。

但是，我没有找到一个好的方法来解决这个问题，我学会了使用它。

但是现在，在安装了 Ubuntu 12.10（或者实际上是 Linux Mint 14 Cinnamon）之后，它变得更大了，垂直间距。

如果您在正常的垂直工作区中有三个带有两个工具栏的选项卡式窗口，这很容易隐藏 6 行代码和无用的 UI 间距，我个人觉得这很烦人。

屏幕截图之前（有点太空间了）| 截图后（令人讨厌的空间）：

![在此处输入图像描述](../Images/f33caff6f6dc2fc2b64123840e0b9746.png)

我个人不喜欢这个，我宁愿摆脱它​​。我尝试了一些 GTK3 主题，它们留下的东西几乎同样空间，添加或删除可能额外的像素。

我深入了解了 Eclipse 本身的偏好，并且看到了很多东西。我不确定我是否分心了，或者没有办法从 Eclipse 本身中改变它，但我没有找到任何方法。

如何将这个为 4K 屏幕的人设计的超大触摸界面重新变成一个紧凑的界面，供想要查看大量代码的程序员使用？

**或者**

我自己如何残酷地做到这一点`/usr/share/themes/*/gtk-3.0/*css`？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-03T16:19:25.917

我一直在到处寻找 GTK3 解决方案，因为我确信切换到 GTK3 系统会导致这种情况。然而，在浪费了两个小时之后，我发现“旧的 GTK2 技巧”可以正常工作。

原始论坛帖子在这里：[http ://ubuntuforums.org/showthread.php?t=1465712](http://ubuntuforums.org/showthread.php?t=1465712)

添加一个名为`.gtkrc-2.0`您的主目录的新文件，其内容如下：

```
style "gtkcompact" {
  GtkButton::default_border={0,0,0,0}
  GtkButton::default_outside_border={0,0,0,0}
  GtkButtonBox::child_min_width=0
  GtkButtonBox::child_min_heigth=0
  GtkButtonBox::child_internal_pad_x=0
  GtkButtonBox::child_internal_pad_y=0
  GtkMenu::vertical-padding=1
  GtkMenuBar::internal_padding=0
  GtkMenuItem::horizontal_padding=4
  GtkToolbar::internal-padding=0
  GtkToolbar::space-size=0
  GtkOptionMenu::indicator_size=0
  GtkOptionMenu::indicator_spacing=0
  GtkPaned::handle_size=4
  GtkRange::trough_border=0
  GtkRange::stepper_spacing=0
  GtkScale::value_spacing=0
  GtkScrolledWindow::scrollbar_spacing=0
  GtkTreeView::vertical-separator=0
  GtkTreeView::horizontal-separator=0
  GtkTreeView::fixed-height-mode=TRUE
  GtkWidget::focus_padding=0
}
class "GtkWidget" style "gtkcompact" 
```

重新启动 Eclipse。

浪费空间回到高效利用！

![在此处输入图像描述](../Images/d5fe6aa2710e1b390137beea6d8ee5f1.png) ![在此处输入图像描述](../Images/e4d24c5e1aa8a8f96ae3bde5a4240b6f.png)

## 2014-06 更新

现在我自己（终于）搬到了 Kepler，我发现最小化-最大化小部件不再低于 28 像素。这些`.gtkrc-2.0`似乎对开普勒有更好的结果。

```
style "gtkcompact" { 
  GtkButton::defaultborder={0,0,0,0} 
  GtkButton::defaultoutsideborder={0,0,0,0} 
  GtkButtonBox::childminwidth=0 
  GtkButtonBox::childminheigth=0 
  GtkButtonBox::childinternalpadx=0 
  GtkButtonBox::childinternalpady=0 
  GtkMenu::vertical-padding=1 
  GtkMenuBar::internalpadding=0 
  GtkMenuItem::horizontalpadding=4
  GtkToolbar::internal-padding=0 
  GtkToolbar::space-size=0 
  GtkOptionMenu::indicatorsize=0 
  GtkOptionMenu::indicatorspacing=2 
  GtkPaned::handlesize=4 
  GtkRange::troughborder=0 
  GtkRange::stepperspacing=0 
  GtkScale::valuespacing=0 
  GtkScrolledWindow::scrollbarspacing=0 
  GtkExpander::expandersize=10 
  GtkExpander::expanderspacing=0 
  GtkTreeView::vertical-separator=0 
  GtkTreeView::horizontal-separator=0 
  GtkTreeView::expander-size=8 
  GtkTreeView::fixed-height-mode=TRUE 
  GtkWidget::focuspadding=1 
} 
class "GtkWidget" style "gtkcompact"

style "gtkcompactextra" { 
  xthickness=2 ythickness=2 
} 
class "GtkButton" style "gtkcompactextra"
class "GtkToolbar" style "gtkcompactextra"
class "GtkPaned" style "gtkcompactextra" 
```

如果您将`xthickness`and添加`ythickness`到整个`GtkWidget`班级，您的菜单栏将全部紧缩在一起。在我看来，这太过分了，但你知道的。

您可以编辑文件并保存它，打开一些简单的东西，例如`Geany`，调整保存，重新打开`Geany`等以快速调整它。有关详细信息，您可以每次打开 Eclipse，但加载时间较长，具体取决于您必须加载多少插件。

## 2015-10-02 更新

**关于月球和火星**

@eocanha 在 1 月 15 日说：

> 如果您安装了 Gtk3，Eclipse Luna 将使用基于 Gtk3 CSS 的样式系统并忽略 .gtkrc-2.0。但是，您可以通过 shell 环境变量强制 Eclipse 再次使用 Gtk2（如果您安装了它）：“export SWT_GTK3=0”在您的 .bashrc 或一些调用 Eclipse 的包装脚本中。

原文来源：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=420180](https://bugs.eclipse.org/bugs/show_bug.cgi?id=420180)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:36:47.077

如果您想查看更多代码并减少混乱，请查看[eclipse 全屏插件](http://code.google.com/p/eclipse-fullscreen/)。`Ctrl+Alt+z`使用（或定义您自己的绑定）切换全屏模式。

“通用命令”快捷方式无需使用菜单，而是`Ctrl+3`可以将您带到任何菜单并更快地执行任何任务。

# uml - uml-包含或扩展

> ID：13684291
> 
> 赞同：0
> 
> 时间：2012-12-03T13:30:14.250
> 
> 标签：uml, use-case, ooad

我正在尝试为图书馆管理系统制作用例图。我有两个演员管理员和用户。

现在，管理员具有三个功能 manageCategories（历史、地理等书籍）、manageUser 和 manageBooks..

我正在做的是在一个函数中考虑这三个函数，`manage`即`manage`一个用例。

我应该如何考虑图中的三个功能 managerUser、manageBooks、manageCategories？

我应该在一个用例中使用包含或扩展这三个功能`manage`，还是使用其他任何东西？

![在此处输入图像描述](../Images/1c54fc99e3663caad48b0c8a427feb17.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:29:40.250

我不同意@TonyRad。

在另一个用例中包含一个用例就像说“这个用例需要另一个用例来执行”。这并不意味着实际上会调用另一个用例。例如，当用户执行时，`manageBooks`他并不总是执行`editUser`，但另一方面，`manageBooks`如果没有实现用例，则用例是不完整的`editUser`。

当扩展用例不需要扩展用例存在时，应该使用扩展用例。例如，浏览器展示了可以添加插件的扩展点。如果没有插件，浏览器将工作，但如果有，浏览器将在扩展点到来时执行它们。

在您的情况下，问题是如何向用户显示这些用例。如果用户首先必须进入“管理”屏幕，并且可以从中访问“添加用户”、“删除用户”和“编辑用户”，那么将它们建模为包含项是合乎逻辑的。另一方面，如果管理员可以直接操作这三个用例，我会从“管理”到“添加用户”、“删除用户”和“编辑用户”进行继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:19:34.677

**在@vainolo 对我的回答中包含的用例混淆的更正评论后进行编辑**：

如果`manage`用例需要可调用的用例（managerUser、manageBooks、manageCategories）以便对主要参与者有意义（产生价值），那么您应该使用[包含](http://publib.boulder.ibm.com/infocenter/rsdvhelp/v6r0m1/index.jsp?topic=/com.ibm.xtools.modeler.doc/topics/cextend.html)关系。

如果参与者可以完成`manage`执行零个或所有三个可调用用例（managerUser、manageBooks、manageCategories）的用例，那么您应该使用[扩展](http://publib.boulder.ibm.com/infocenter/rsdvhelp/v6r0m1/index.jsp?topic=/com.ibm.xtools.modeler.doc/topics/cextend.html)关系，您可以为它们指定扩展点条件语句。

如果`manage`用例是一个*容器*，用于组织三个可以独立执行的可调用用例，那么我将建模`manage`为一个 包含三个用例的[用例包](http://www.agilemodeling.com/style/packageDiagram.htm#UseCasePackageDiagrams)，而不是一个用例本身。

* * *

[请从该帖子](http://www.batimes.com/articles/putting-the-inclusion-use-case-in-focus.html)中找到以下关于非强制执行包含用例的摘录（正如@vainolo 正确指出的那样）：

> **第 5 点：包含用例可能是可选的**
> 
> [2](http://www.batimes.com/articles/putting-the-inclusion-use-case-in-focus.html#lo2)个状态的 UML 上层结构第 16.3.5 节：
> 
> “请注意，[包含] 用例不是可选的，并且始终是 [基本] 用例正确执行所必需的。”</p>
> 
> **混乱的原因**
> 
> 有些人似乎将此解释为在基本用例的每次执行期间都必须执行包含用例。
> 
> 没有什么比真相更远了，真相很简单。
> 
> **简单的真相**
> 
> 包含用例对于基本用例是强制性的还是可选的，取决于在基本用例中定义片段的位置，该片段现在被包含用例的包含语句替换。
> 
> 如果该片段是基本用例的无条件流程（始终执行的步骤）的一部分，则包含用例是强制性的。如果该片段是条件流（可选执行的步骤）的一部分，则包含用例是可选的。
> 
> **那么 UML 语句是什么意思呢？**
> 
> UML 语句的目的似乎是将包含关系与扩展关系进行对比，如下所示。
> 
> 在扩展点（不是针对整个基本用例），扩展用例的执行是可选的。
> 
> 当基本用例的执行到达扩展点时，可能会插入扩展用例，也可能不会插入扩展用例，因为扩展关系可能附加条件。但是，在“包含点”（不是针对整个基本用例），包含用例的执行是强制性的。
> 
> 当基本用例的执行到达包含点（即基本用例中的包含语句）时，将始终执行包含用例，因为没有为包含关系附加条件的规定。

# java - 使用 Google OAuth2 API 对 Google App 用户进行身份验证

> ID：13684292
> 
> 赞同：4
> 
> 时间：2012-12-03T13:30:15.207
> 
> 标签：java, rest, google-api, oauth-2.0, google-apps

我想知道是否可以使用谷歌客户端 api (java) 向我的应用程序验证谷歌应用程序域的用户。目标应用程序是使用 REST 后端（球衣）的 Web 应用程序。

[文档](http://code.google.com/p/google-api-java-client/wiki/OAuth2)不是很清楚（或者我误解了） ，文档中的示例指的是已弃用的类......有人知道它是否可能以及最好的方法。

代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:04:43.980

Google Apps 帐户应该可以正常使用 API。

唯一的例外是域管理员禁用了该服务。例如，如果域管理员禁用了 Google+ 功能，您将无法访问该用户的 Google+ 数据。

无需更改代码，因此您应该能够使用来自[客户端库存储库中任何示例的代码，或者像](http://code.google.com/p/google-api-java-client/source/browse/?repo=samples)[Google+](https://code.google.com/p/google-plus-java-starter/source/browse/)这样的产品特定示例。

`AbstractAuthorizationCodeServlet`Google+ 入门项目首先通过扩展来实现 OAuth 流程`com.google.api.sample.OAuth2AuthorizationCodeServlet`

```
public class OAuth2AuthorizationCodeServlet 
    extends AbstractAuthorizationCodeServlet {
    /**
     * If the user already has a valid credential held in the 
     * AuthorizationCodeFlow they are simply returned to the home page.
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
        response.sendRedirect("/");
    }

    /**
     * Returns the URI to redirect to with the authentication result.
     */
    @Override
    protected String getRedirectUri(HttpServletRequest request)
                    throws ServletException, IOException {
        return ConfigHelper.REDIRECT_URI;
    }

    /**
     * Returns the HTTP session id as the identifier for the current user.  
     * The users credentials are stored against this ID.
     */
    @Override
    protected String getUserId(HttpServletRequest request)
                    throws ServletException, IOException {
        return request.getSession(true).getId();
    }

    @Override
    protected AuthorizationCodeFlow initializeFlow() throws ServletException,
                    IOException {
        return Util.getFlow();
    }
} 
```

`com.google.api.sample.Oauth2CallbackServlet`然后通过扩展完成流程`AbstractAuthorizationCodeCallbackServlet`：

```
public class OAuth2CallbackServlet 
    extends AbstractAuthorizationCodeCallbackServlet {    
    @Override
    protected void onSuccess(HttpServletRequest request, 
            HttpServletResponse response, Credential credential)
            throws ServletException, IOException {
        response.sendRedirect("/");
    }

    @Override
    protected void onError(HttpServletRequest req, HttpServletResponse resp, 
            AuthorizationCodeResponseUrl errorResponse)
            throws ServletException, IOException {
        resp.sendError(SC_INTERNAL_SERVER_ERROR, "Something went wrong :(");
    }

    @Override
    protected String getRedirectUri(HttpServletRequest request) 
            throws ServletException, IOException {
        return ConfigHelper.REDIRECT_URI;
    }

    @Override
    protected AuthorizationCodeFlow initializeFlow() 
            throws IOException {
        return Util.getFlow();
    }

    @Override
    protected String getUserId(HttpServletRequest request) throws ServletException, IOException {
        return  request.getSession(true).getId(); 
    }

} 
```

# c# - 适用于 Windows 8 的图像编辑库

> ID：13684293
> 
> 赞同：4
> 
> 时间：2012-12-03T13:30:16.380
> 
> 标签：c#, image-processing, windows-8, windows-runtime, windows-store-apps

我们有可以在 windows 8 平台上运行的图像编辑库吗？我尝试使用 Aforge.net，但 VS2012 在导入库时出错，提示它与 Metro UI 应用程序不兼容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:40:30.493

您可以使用 SharpDx ；一个构建良好的 C# 库，支持大量编辑功能，或者您可以使用 Aviary sdk 进行图像编辑。SharpDx 是免费的，您需要花一些美元购买 Aviary sdk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:59:11.840

其实 MS 提供了强大的图像处理 API 并支持 Shade 语言，下面是一个很好的示例。

[http://code.msdn.microsoft.com/windowsdesktop/Metro-Style-lightweight-24589f50](http://code.msdn.microsoft.com/windowsdesktop/Metro-Style-lightweight-24589f50)

# javascript - 表单元素上的 id 属性导致全局变量

> ID：13684295
> 
> 赞同：0
> 
> 时间：2012-12-03T13:30:27.440
> 
> 标签：javascript, html

> **可能重复：**
> [IE/Chrome：这里是 DOM 树元素全局变量吗？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)

**描述：**

您好，我刚刚注意到，当我在表单上使用 id 时，它可以作为全局变量使用。我在 Mac 上的 Firefox 17.0 和 Google Chrome 23.0 上对此进行了测试。当我看到这个时，我有点惊讶！

**HTML代码：**

```
<form class="input-form" id="test">
      <label for="key">Key</label>
      <input type="text" name="key">
</form> 
```

**问题：**

这是否意味着在 from 上使用 id 实际上是一个非常糟糕的主意，还是我完全错了？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:34:42.553

如果您的意思是它在浏览器控制台中可用，那就没问题了。这只是浏览器试图减轻书写痛苦的一种方式`document.getElementById('test')`。至少 Chrome 是这样。如果您打开 Chrome 控制台（例如在此页面上）并输入“sidebar”并按 Enter，您会看到它返回 id 为“sidebar”的 div。

直接回答您的问题：在表单（或任何其他节点）上使用 id 是完全正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:38:12.213

如果您的表格是身体的直接孩子，那是正常的。例如：

```
<body>
<form id="myForm" >
    <input type="file"/>
    <div>
        <form id="myForm2" >
            <input type="text" />
        </form>
    </div>
</form>
</body> 
```

myForm 将作为全局变量提供。但 myForm2 将不可用。

# android - 多个单元的单个 Android 应用程序

> ID：13684308
> 
> 赞同：0
> 
> 时间：2012-12-03T13:31:16.920
> 
> 标签：android

我可以动态创建一个 apk 文件并为特定公司/团体打造一个通用的 android 应用程序吗？

我想创建一个网站，用户可以在其中放置他们的公司徽标和其他一些详细信息并获取专门为他们打上品牌的 android 应用程序（直接链接到 Play 商店或 apk 文件？？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:35:06.970

afaik，最简单的方法是几个 eclipse 项目，有自己的 manifest/res 文件夹，但指向同一个 src 文件夹

# android - Android视图从上到下滑入

> ID：13684309
> 
> 赞同：3
> 
> 时间：2012-12-03T13:31:18.067
> 
> 标签：android, animation, android-animation, android-xml, viewanimator

我希望我的视图能够在顶部滑出 - 从底部滑出。

到目前为止我所拥有的是

**slide_in_top.xml**

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
               android:fromYDelta="0%p" android:toYDelta="-100%p"
               android:duration="@android:integer/config_longAnimTime"/>
</set> 
```

**slide_out_bottom.xml**

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
               android:fromYDelta="0%p" android:toYDelta="100%p"
               android:duration="@android:integer/config_longAnimTime"/>
</set> 
```

我的新视图应该来自顶部，以前的视图应该从底部隐藏。但这并没有按预期工作。即使如何使用`<translate>`标签，我也找不到合适的文档。我`ViewAnimator`用来动画我的观点。帮助会很棒。谢谢。而且我还需要一个很好的解释它是如何工作的，就像`<translate android:fromYDelta android:fromXDelta>`这些如何与“动画内”和“动画外”一起工作

# android - timer.scheduleAtFixedRate 在一秒钟内执行，而不是在延迟时间之后

> ID：13684312
> 
> 赞同：0
> 
> 时间：2012-12-03T13:31:30.050
> 
> 标签：android

我正在使用像这样的计时器：

```
Timer timer = new Timer();
timer.scheduleAtFixedRate(new CheckWifi(), 0, 50000); // 5 seconds

class Wifi extends BroadcastReceiver {

 protected class CheckWifi extends TimerTask {

        @Override
        public void run() {
        }
 } 
```

但是`CheckWifi`类是在一秒钟内执行的，而不是在 50 秒之后，就像在`scheduleAtFixedRate`. 为什么？

`Runnable`使用而不是更好`Timer`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:34:21.070

你必须使用：

```
timer.scheduleAtFixedRate(new CheckWifi(), 50000, 50000); 
```

第二个参数指定第一次执行之前的延迟。第三个参数指定后续执行之间的延迟。

# javascript - html5画布添加拖放到画布上的图像

> ID：13684314
> 
> 赞同：0
> 
> 时间：2012-12-03T13:31:50.250
> 
> 标签：javascript, drag-and-drop, html5-canvas

我有一个带有 HTML5 画布的网页，我用它来显示许多图像以及画布上的四个“描述框”。

目的是用户将能够将图像拖放到他们匹配的描述框中，但是，我在拖放工作时遇到了一些麻烦。

我为添加拖放功能而编写的函数基于我在此页面上找到的教程：http: [//simonsarris.com/blog/510-making-html5-canvas-useful](http://simonsarris.com/blog/510-making-html5-canvas-useful)

显然，我稍微修改了代码，因为我不想做教程中建议的所有事情，而且因为我正在画布上绘制图像（而不是形状）。但是，当在浏览器中查看我的页面时，尽管所有图像都显示在画布上，但拖放功能并未与我根据该教程编写的新 JavaScript 文件一起添加。

我在 Firebug 控制台中没有收到任何错误，并且页面显示的内容与添加新 JS 函数之前的状态完全相同。

谁能发现我错过了什么？

我的 HTML 是：

```
<!DOCTYPE html>
<html>
<head>
<script src = "kinetic.js" type = "text/javascript"></script>
<title>Home</title>

<script src = "drawLevelOneElements.js" type = "text/javascript"></script>
<script src = "layers&analytics.js" type = "text/javascript"></script>
<script src = "startGameDrawGameElementsDrawStartButton.js" type = "text/javascript"></script>
<script src = "interaction.js" type = "text/javascript"></script>
<script src = "dragAndDrop.js" type = "text/javascript"></script>

</head>

<body onLoad="startGame()">

<section hidden>
<img id="StartButton" src="StartButton.png" alt="Start Button" width="179" height="180" href="javascript:drawLevelOneElements();"/>
</section>

    <h1>Home</h1>
    <p>The purpose of this website is to teach users the basic principles of running a business by playing the game below. <br /><br /></p>

    <canvas id="gameCanvas" width="1000" height="500" style="border:1px solid">
    Your browser does not support the canvas element.
    </canvas>

    <br /><br />
    <p>Use this paragraph to enter text that provides the user with instructions for how to play the game. <br />
        Update the instructions so that they're appropriate to whatever level the user is currently playing.</p>

<script src = "layers&analytics.js" type = "text/javascript"></script>
<script src = "startGameDrawGameElementsDrawStartButton.js" type = "text/javascript"></script>
<script src = "variables&preloadingImages.js" type = "text/javascript"></script>
<script src = "drawLevelOneElements.js" type = "text/javascript"></script>
<script src = "interaction.js" type = "text/javascript"></script>-->
    <script src = "variables&preloadingImages.js" type = "text/javascript"></script>
</body> 
```

页面底部的所有脚本标签（除了最后一个）实际上在我的文件中都被注释掉了，我只需要删除注释才能让它显示在此处的代码块中。

我为拖放功能添加的 javaScript 是：

```
function canvasState(myGameCanvas){

var bounding_box = myGameCanvas.getBoundingClientRect();
var mouseX = (mouse_event.clientX-bounding_box.left) * (myGameCanvas.width/bouding_box.width);
var mouseY = (mouse_event.clientY-bounding_box.top) * (myGameCanvas.height/bounding_box.height);
var pixels = context.getImageData(mouseX, mouseY, 1, 1);

this.valid = false; /*When set to true, the canvas will redraw everything */
this.allImagesArray; /*This is the array holding all of the images to be drawn */
this.dragging = false; /*Keep track of when the current selected object is being dragged */
this.selection = null;
this.dragOffX = 0; /*See mousedown and mousemove events for explanation */
this.dragOffY = 0;

this.interval = 30; /*This variable will be used to determine how often the draw method is called. */

/*Save a reference to the canvasState so that I'm still using this particular canvasState. */
var myState = this;

/*This stops double clicking on the canvas selecting text on the canvas */
myGameCanvas.addEventListener('selectstart', function(e) {e.preventDefault(); return false; }, false);
/*Up, down and move are for dragging */
myGameCanvas.addEventListener('mousedown', function(e){
    var mouse = myState.getMouse(e);
    var mX = mouse.x;
    var mY = mouse.y;
    var allImages = myState.allImagesArray;
    var NoOfImages = allImages.length;
    for (var i = 1-1; i >= 0; i--){
        if(allImages[i].contains(mX, mY)){
            var mySelection = allImages[i];
            /*Keep track of where in the object was clicked, so that it can be 
                moved smoothly (see mousemove) */
            myState.dragOffX = mX - mySelection.x;
            myState.dragOffY = mY - mySelection.y;
            myState.dragging = true;
            myState.selection = mySelection;
            myState.valid = false;
            return;
        }
    }
    /*If the code hasn't returned, it means that nothing has been selected.
    If there was an object selected, then deselect it. */
    if (myState.selection){
        myState.selection = null;
        myState.valid = false; /*Need to clear the old selection border */

    }
}, true);

/*This event checks to see if the dragging flag has been set to true. If it has, it gets the
current mouse position and moves the selected object to that position, remembering the offset
where it was selected. If the dragging flag is false, the event does nothing. */
myGameCanvas.addEventListener('mousemove', function(e){
    if(myState.dragging){
        var mouse = myState.getMouse(e);
        /*I don't want to drag the object by its top left corner, I want to drag from where the
        object was clicked. That's why I saved the offset and use it here. */
        myState.selection.x = mouse.x - myState.dragOffX;
        myState.selection.y = mouse.y - myState.dragOffY;
        myState.valid = false; /*Something's dragging, so I must redraw */
    }
}, true);

/*All the mouseup event has to do is update the canvas state so that it is no longer dragging.
So, once the mouse button is lifted, the mousemove event should be back to doing nothing. */
myGameCanvas.addEventListener('mouseup', function(e){
    myState.dragging = false;
}, true);

setInterval(function(){ myState.draw(); }, myState.interval);

canvasState.prototype.draw = function(){
    /*If the state is invalid,redraw and validate. */
    if (!this.valid){
        var context = this.context;
        var images = this.images;
        this.clear();

        /*Redraw the game elements here */
        drawLevelOneElements();
    }
}

} 
```

dragAndDrop.js 的代码：

```
function canvasState(myGameCanvas){

var bounding_box = myGameCanvas.getBoundingClientRect();
var mouseX = (mouse_event.clientX-bounding_box.left) * (myGameCanvas.width/bouding_box.width);
var mouseY = (mouse_event.clientY-bounding_box.top) * (myGameCanvas.height/bounding_box.height);
var pixels = context.getImageData(mouseX, mouseY, 1, 1);

this.valid = false; /*When set to true, the canvas will redraw everything */
this.allImagesArray; /*This is the array holding all of the images to be drawn */
this.dragging = false; /*Keep track of when the current selected object is being dragged */
this.selection = null;
this.dragOffX = 0; /*See mousedown and mousemove events for explanation */
this.dragOffY = 0;

this.interval = 30; /*This variable will be used to determine how often the draw method is called. */

/*Save a reference to the canvasState so that I'm still using this particular canvasState. */
var myState = this;

/*This stops double clicking on the canvas selecting text on the canvas */
myGameCanvas.addEventListener('selectstart', function(e) {e.preventDefault(); return false; }, false);
console.log("Event Listener 'selectstart' added to canvas.");
/*Up, down and move are for dragging */
myGameCanvas.addEventListener('mousedown', function(e){
    console.log("Event Listener 'mousedown' added to canvas");
    var mouse = myState.getMouse(e);
    var mX = mouse.x;
    var mY = mouse.y;
    var allImages = myState.allImagesArray;
    var NoOfImages = allImages.length;
    for (var i = 1-1; i >= 0; i--){
        if(allImages[i].contains(mX, mY)){
            var mySelection = allImages[i];
            /*Keep track of where in the object was clicked, so that it can be 
                moved smoothly (see mousemove) */
            myState.dragOffX = mX - mySelection.x;
            myState.dragOffY = mY - mySelection.y;
            myState.dragging = true;
            myState.selection = mySelection;
            myState.valid = false;
            return;
        }
    }
    /*If the code hasn't returned, it means that nothing has been selected.
    If there was an object selected, then deselect it. */
    if (myState.selection){
        myState.selection = null;
        myState.valid = false; /*Need to clear the old selection border */

    }
}, true);

/*This event checks to see if the dragging flag has been set to true. If it has, it gets the
current mouse position and moves the selected object to that position, remembering the offset
where it was selected. If the dragging flag is false, the event does nothing. */
myGameCanvas.addEventListener('mousemove', function(e){
    console.log("Event listener 'mousemove' added to canvas.");
    if(myState.dragging){
        var mouse = myState.getMouse(e);
        /*I don't want to drag the object by its top left corner, I want to drag from where the
        object was clicked. That's why I saved the offset and use it here. */
        myState.selection.x = mouse.x - myState.dragOffX;
        myState.selection.y = mouse.y - myState.dragOffY;
        myState.valid = false; /*Something's dragging, so I must redraw */
    }
}, true);

/*All the mouseup event has to do is update the canvas state so that it is no longer dragging.
So, once the mouse button is lifted, the mousemove event should be back to doing nothing. */
myGameCanvas.addEventListener('mouseup', function(e){
    console.log("Event listener 'mouseup' added to canvas.");
    myState.dragging = false;
}, true);

setInterval(function(){ myState.draw(); }, myState.interval);

canvasState.prototype.draw = function(){
    /*If the state is invalid,redraw and validate. */
    if (!this.valid){
        var context = this.context;
        var images = this.images;
        this.clear();

        /*Redraw the game elements here */
        drawLevelOneElements();
    }
}

} 
```

drawLevelOneElements.js 的代码：（现在包括对 canvasState(); 的调用）

```
function drawLevelOneElements(){
            /*First, clear the canvas */ 
            context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
            /*This line clears all of the elements that were previously drawn on the canvas. */
            /*Then redraw the game elements */
            drawGameElements(); 
            /*Call the function to enable drag and drop */
            canvasState(document.getElementById('gameCanvas'));

            /*Create the four description areas, and place them near the bottom of the canvas */
            /*Create boxes with rounded corners for the description areas */
            CanvasRenderingContext2D.prototype.drawDescriptionArea = function(x, y, width, height, radius, stroke){
                if(typeof stroke == "undefined" ){
                    stroke = true;
                }
                if(typeof radius === "undefined"){
                    radius = 5;
                }
                this.beginPath();
                this.moveTo(x + radius, y);
                this.lineTo(x + width - radius, y);
                this.quadraticCurveTo(x + width, y, x + width, y + radius);
                this.lineTo(x + width, y + height - radius);
                this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
                this.lineTo(x + radius, y + height);
                this.quadraticCurveTo(x, y + height, x, y + height - radius);
                this.lineTo(x, y + radius);
                this.quadraticCurveTo(x, y, x + radius, y);
                this.closePath();
                if(stroke){
                    context.stroke();
                }
            }

            context.drawDescriptionArea(70, 400, 120, 70);
            context.font = '25pt Calibri';
            context.strokeText('Asset', 90, 440);

            context.drawDescriptionArea(300, 400, 120, 70);
            context.strokeText('Liability', 310, 440);

            context.drawDescriptionArea(540, 400, 120, 70);
            context.strokeText('Income', 550, 440);

            context.drawDescriptionArea(750, 400, 180, 70);
            context.strokeText('Expenditure', 760, 440);

            /*Now draw the images to the canvas */
            /*First, create variables for the x & y coordinates of the image that will be drawn.
                the x & y coordinates should hold random numbers, so that the images will be 
                drawn in random locations on the canvas.*/
                var imageX = Math.floor(Math.random()*100);
                var imageY = Math.floor(Math.random()*100);

                /*Create a 'table' of positions that the images will be drawn to */
                var imagePositionsX = [20, 80, 140, 200, 260, 320, 380, 440, 500, 560];
                var imagePositionsY = [20, 60, 100, 140, 180, 220, 260, 300, 340, 380];

            /*Draw all images from assetsImageArray */
            /*Use a while loop to loop through the array, get each item and draw it. */
            var arrayIteration = 0;
            console.log('All Images Array length: ' + allImagesArray.length); /*Display the length of the array in the console, to check it's holding the correct number of images. */
            while(arrayIteration < allImagesArray.length){
                var randomPositionX = Math.floor(Math.random()*10);
                var randomPositionY = Math.floor(Math.random()*10);
                context.drawImage(allImagesArray[arrayIteration], imageX, imageY, 50, 50);
                console.log(arrayIteration); /*Display the current array position that's being drawn */
                arrayIteration = arrayIteration+1;
                /*Now try changing the values of imageX & imageY so that the next image is drawn to a 
                    different location*/
                imageX = imagePositionsX[randomPositionX];  /* imageX+(Math.floor(Math.random()*100)); */
                imageY = imagePositionsY[randomPositionY];  /* imageY+(Math.floor(Math.random()*100));  */

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:05:21.367

作为评论的总结，我可以回答你：在你的代码中的某个地方，你必须调用 canvasState() 函数，仅仅定义它是不够的。您必须在哪里调用它很大程度上取决于您何时需要它的功能。例如，如果你想在页面加载时设置拖放功能，你有一个用于 body 的 load 事件的事件处理程序：

```
<body onLoad="startGame()"> 
```

在 startGame() 函数的代码中，您可以调用 canvasState()。如果您在按下 StartButton 时需要它，您应该从 drawLevelOneElements() 函数中调用它。由于您正在学习教程，因此事情发生的顺序可能很重要，因此您可能需要在特定位置调用您的函数。

还有一个建议。因为您似乎正在学习，所以从基础开始，然后深入了解您所学的内容，不要只是遵循随机教程。

# jquery - Google Maps Iframe Embed 在引导程序/基础上不起作用

> ID：13684318
> 
> 赞同：0
> 
> 时间：2012-12-03T13:32:06.577
> 
> 标签：jquery, html, css, twitter-bootstrap, zurb-foundation

当 img 设置为 max-width 时，Google 地图无法将位置居中。有一个解决办法，就是放

```
#map_canvas img {
max-width: none;
} 
```

不过，这似乎对我不起作用，因为我没有使用 Javascript API，所以似乎没有 map_canvas。我只是使用 iFrame 嵌入。

当我尝试在 iframe 周围添加一个 div 并设置参数时，我仍然得到相同的结果。

我不确定要编写/附加什么来使谷歌地图 iframe 播放得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:10:26.323

您使用的是 iframe 的交互式地图还是 iframe 的静态谷歌地图图像？

如果您使用 iframe 使用交互式谷歌地图，则需要确保在地图变量中声明“中心”属性。不幸的是，地图只会在页面初始加载时居中，这意味着如果您以较大的分辨率加载页面然后按比例缩小地图将偏离中心，因为在创建地图时，中心被定义为不同的位置（以较小的分辨率刷新可以解决此问题。）

## 对于交互式谷歌地图

```
// Google Maps
var map;
function initialize() {
    var mapOptions = {
        zoom: 17,
        draggable: true,
        center: new google.maps.LatLng(38.913914,-94.637427), // this one
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }; 
```

## 对于静态谷歌地图图像

在声明图像 src 时，它应该看起来像这样：

```
<img src="maps.googleapis.com/maps/api/staticmap?center=46168&zoom=11
&size=300×300&maptype=roadmap&sensor=false" alt="google map" /> 
```

您所做的只是更改一些值，然后您可以将此地图放置在您想要的任何位置。

**居中选项**

*   城市/州：印第安纳州普莱恩菲尔德
*   邮编：46168
*   地址：1917 Hawthorn Drive，Plainfield，IN
*   经纬度：39.77,-86.16

# java - 从移动设备登录 Spring Security、Rest api 和 Facebook

> ID：13684325
> 
> 赞同：5
> 
> 时间：2012-12-03T13:32:28.730
> 
> 标签：java, facebook, spring-security, spring-social

我正在开发一个具有 REST api 的 Web 应用程序。目前，Api 通过表单登录身份验证在服务器端通过 spring 安全性受到保护。最近我还添加了 spring social 以允许通过 facebook 和 twitter 访问，所有这些都有效。因此，必须注册用户才能访问某个端点。

现在我必须构建一个必须访问 REST api 的移动应用程序，我想知道我应该使用什么策略。

我看到 facebook 有一个 android/ios sdk 允许在移动端进行身份验证。因此，一旦用户在移动设备上通过身份验证，我应该向我的服务器发出请求，那么我应该如何在服务器端对用户进行身份验证以访问资源？

如果您认为这不是一个好的解决方案，您能否给我一个建议，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:27:16.663

两种选择：

1.  您的移动应用程序可以通过 form-login 或 spring social 以与您的其他客户端代码相同的方式登录到您的 API。只需在登录后通过 API 调用发送相同的会话 ID cookie。
2.  您可以允许您的应用通过[HTTP-Basic](https://stackoverflow.com/questions/2691160/spring-security-http-basic-authentication)接受用户名和密码作为 HTTP 标头，以节省初始登录步骤。如果您不需要在每个会话中进行大量 API 调用，这可能会更有用。

# java - NoSaveStateFramelayout 的问题

> ID：13684330
> 
> 赞同：1
> 
> 时间：2012-12-03T13:32:40.203
> 
> 标签：java, android

我正在开发一个应用程序，我将 Sherlock Actionbar 与 Fragment 整合在一起。有两个选项卡，第一个是地图，第二个是列表。对于第一个地图选项卡，我想将 MapsForge 开源库基础地图放在第一个选项卡中。我[从 Here 获得了带有来自 GIt](https://github.com/JakeWharton/Android-MapForgeFragment)的片段的 MapsForge 示例，我试图实现它。但它让我出错`NoSaveStateFramelayout`

**错误 ：：**

```
12-03 18:48:49.210: E/AndroidRuntime(2779): FATAL EXCEPTION: main
12-03 18:48:49.210: E/AndroidRuntime(2779): java.lang.ClassCastException: android.support.v4.app.NoSaveStateFrameLayout cannot be cast to com.jakewharton.android.mapsforge_fragment.MapView
12-03 18:48:49.210: E/AndroidRuntime(2779):     at in.wptrafficanalyzer.actionbarsherlocknavtab.MapFragment.getView(MapFragment.java:32)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at in.wptrafficanalyzer.actionbarsherlocknavtab.MapFragment.getView(MapFragment.java:1)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.support.v4.app.FragmentPagerAdapter.isViewFromObject(FragmentPagerAdapter.java:147)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.support.v4.view.ViewPager.infoForChild(ViewPager.java:1258)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1031)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.View.measure(View.java:12775)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.View.measure(View.java:12775)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.View.measure(View.java:12775)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:822)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.View.measure(View.java:12775)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2240)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.View.measure(View.java:12775)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1117)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2505)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.os.Looper.loop(Looper.java:137)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at android.app.ActivityThread.main(ActivityThread.java:4514)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at java.lang.reflect.Method.invokeNative(Native Method)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at java.lang.reflect.Method.invoke(Method.java:511)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-03 18:48:49.210: E/AndroidRuntime(2779):     at dalvik.system.NativeStart.main(Native Method) 
```

**代码：**

**地图片段：**

```
package in.wptrafficanalyzer.actionbarsherlocknavtab;
import android.os.Bundle;
import android.os.Environment;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.ViewGroup;

import com.jakewharton.android.mapsforge_fragment.GeoPoint;
import com.jakewharton.android.mapsforge_fragment.MapView;
import com.jakewharton.android.mapsforge_fragment.MapViewMode;

public class MapFragment extends Fragment {
    private static final String KEY_LATITUDE_E6 = "MapFragment:LatitudeE6";
    private static final String KEY_LONGITUDE_E6 = "MapFragment:LongitudeE6";
    private static final String KEY_ZOOM_LEVEL = "MapFragment:ZoomLevel";
    private static final String KEY_MAP_FILE = Environment.getExternalStorageDirectory()+ "/great_britain.map";

    private final MapViewMode mMapViewMode;

    public MapFragment() {
        this(MapView.DEFAULT_MAP_VIEW_MODE);
    }

    public MapFragment(MapViewMode mapViewMode) {
        mMapViewMode = mapViewMode;
    }

    @Override
    public MapView getView() {
        return (MapView)super.getView();
    }

    @Override
    public MapView onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        MapView mapView = new MapView(getActivity(), mMapViewMode);
        if (savedInstanceState != null) 
        {
            final int latitude = savedInstanceState.getInt(KEY_LATITUDE_E6, Integer.MIN_VALUE);
            final int longitude = savedInstanceState.getInt(KEY_LONGITUDE_E6, Integer.MIN_VALUE);
            final byte zoom = savedInstanceState.getByte(KEY_ZOOM_LEVEL, Byte.MIN_VALUE);
            final String mapFile = savedInstanceState.getString(KEY_MAP_FILE);

            if ((mapFile != null) && !mapView.getMapViewMode().requiresInternetConnection()) {
                mapView.setMapFileFromParcel(mapFile);
            }

            if ((latitude != Integer.MIN_VALUE) && (longitude != Integer.MIN_VALUE) && (zoom != Byte.MIN_VALUE)) {
                mapView.setCenterAndZoom(new GeoPoint(latitude, longitude), zoom);
            }
        }

        return mapView;
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        MapView mapView = getView();
        if (mapView != null) {
            mapView.destroy();
            mapView = null;
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        MapView mapView = getView();
        if (mapView.hasValidCenter()) {
            if (!mapView.getMapViewMode().requiresInternetConnection() && (mapView.getMapFile() != null)) {
                outState.putString(KEY_MAP_FILE, mapView.getMapFile());
            }

            GeoPoint center = mapView.getMapCenter();
            outState.putInt(KEY_LATITUDE_E6, center.getLatitudeE6());
            outState.putInt(KEY_LONGITUDE_E6, center.getLongitudeE6());
            outState.putByte(KEY_ZOOM_LEVEL, mapView.getZoomLevel());
        }
    }

} 
```

**更新 ：：**

```
package in.wptrafficanalyzer.actionbarsherlocknavtab;
import android.os.Bundle;
import android.os.Environment;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.ViewGroup;

import com.jakewharton.android.mapsforge_fragment.GeoPoint;
import com.jakewharton.android.mapsforge_fragment.MapView;
import com.jakewharton.android.mapsforge_fragment.MapViewMode;

public class MapFragment extends Fragment {
    private static final String KEY_LATITUDE_E6 = "MapFragment:LatitudeE6";
    private static final String KEY_LONGITUDE_E6 = "MapFragment:LongitudeE6";
    private static final String KEY_ZOOM_LEVEL = "MapFragment:ZoomLevel";
    private static final String KEY_MAP_FILE = Environment.getExternalStorageDirectory()+ "/great_britain.map";

    private final MapViewMode mMapViewMode;

    public MapFragment() {
        this(MapView.DEFAULT_MAP_VIEW_MODE);
    }

    public MapFragment(MapViewMode mapViewMode) {
        mMapViewMode = mapViewMode;
    }

    @Override
    public MapView getView() {
        NoSaveStateFrameLayout wrapper = (NoSaveStateFrameLayout)super.getView();
        return (MapView)((wrapper != null) ? wrapper.getChildAt(0) : null);
    }

    @Override
    public MapView onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        MapView mapView = new MapView(getActivity(), mMapViewMode);
        if (savedInstanceState != null) {
            final int latitude = savedInstanceState.getInt(KEY_LATITUDE_E6, Integer.MIN_VALUE);
            final int longitude = savedInstanceState.getInt(KEY_LONGITUDE_E6, Integer.MIN_VALUE);
            final byte zoom = savedInstanceState.getByte(KEY_ZOOM_LEVEL, Byte.MIN_VALUE);
            final String mapFile = savedInstanceState.getString(KEY_MAP_FILE);

            if ((mapFile != null) && !mapView.getMapViewMode().requiresInternetConnection()) {
                mapView.setMapFileFromParcel(mapFile);
            }

            if ((latitude != Integer.MIN_VALUE) && (longitude != Integer.MIN_VALUE) && (zoom != Byte.MIN_VALUE)) {
                mapView.setCenterAndZoom(new GeoPoint(latitude, longitude), zoom);
            }
        }

        return mapView;
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        MapView mapView = getView();
        if (mapView != null) {
            mapView.destroy();
            mapView = null;
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        MapView mapView = getView();
        if (mapView.hasValidCenter()) {
            if (!mapView.getMapViewMode().requiresInternetConnection() && (mapView.getMapFile() != null)) {
                outState.putString(KEY_MAP_FILE, mapView.getMapFile());
            }

            GeoPoint center = mapView.getMapCenter();
            outState.putInt(KEY_LATITUDE_E6, center.getLatitudeE6());
            outState.putInt(KEY_LONGITUDE_E6, center.getLongitudeE6());
            outState.putByte(KEY_ZOOM_LEVEL, mapView.getZoomLevel());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:41:52.977

根据您提供的链接，您是否有理由放弃他们的`getView()`方法？

```
@Override
public MapView getView() {
    NoSaveStateFrameLayout wrapper = (NoSaveStateFrameLayout)super.getView();
    return (MapView)((wrapper != null) ? wrapper.getChildAt(0) : null);
} 
```

# asp.net - 记录来自ninject3的所有活动

> ID：13684335
> 
> 赞同：1
> 
> 时间：2012-12-03T13:33:01.723
> 
> 标签：asp.net, ninject

在尝试解决每个依赖项时，是否可以记录所有 ninject 所做的活动？我遇到了一个异常“无法创建抽象类的实例”。我找不到问题出在哪里。在堆栈跟踪中，没有关于引发此异常的依赖项的信息。在 VS 中，我已启用此应用程序的调试，但我无法拦截此异常。VS 没有发现异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:19:01.993

您可以尝试 ninject.extensions.logging 并使用 log4net 或 nlog [https://github.com/ninject/ninject.extensions.logging](https://github.com/ninject/ninject.extensions.logging)和 [http://www.ninject.org/extensions.html](http://www.ninject.org/extensions.html)

# php - 从动态发布表单 php 中获取数据

> ID：13684337
> 
> 赞同：1
> 
> 时间：2012-12-03T13:33:10.913
> 
> 标签：php, mysql, forms

我在 php 网站中有一个表单来编辑动态表中的表数据，它显示正确，但我不确定我是否正确传递数据或如何访问它。

编辑菜单（）

```
$query = "SELECT * FROM attendance";
$result = mysql_query($query);

print("<b>Edit the details</b><br>");

print("<form method=\"POST\" action=\"editAttendance.php\" >");
print("<table>");
print("<tr>");
for($i = 0; $i < mysql_num_fields($result); $i++) {
    $field_info = mysql_fetch_field($result, $i);
    print("<th>" . $field_info->name . "</th>");
}

while($row = mysql_fetch_row($result)) {
    print("<tr>");
    foreach($row as $_column) {
    print("<td>");
    print("<input type='text' name='{$_column}' size=15 value='{$_column}'>");
    print("</td>");            
    }
print("</tr>");
}  

print("</table>");

print("<input type='submit' value='Edit'>");
print("<input type='button' value='Cancel' onclick=\"location.href='raidAttendance.php'\">");

print("</form>");

mysql_free_result($result); 
```

editAttendance.php 看起来像这样：

```
<?php

@mysql_connect("localhost", "root", "vertrigo");
@mysql_select_db("test");

    $b = 0;
    $query = array();
    $result = mysql_query("SELECT * FROM attendance");

    //get all the column names, works
    for ($i = 0; $i < mysql_num_fields($result); $i++) {
        $vars[$i] = mysql_field_name($result,$b);
        $b++;
    }

    //get all the data, stuck here 
```

?>

我知道如何在设置大小时获取表单的数据，但这是我第一次处理动态数据，我无法确定它的正面或反面。

我想要得到的是整个表的 mysql 更新语句，例如：

```
$query = ""; //all the data from the table
$result = mysql_query("UPDATE attendance SET $query"); 
```

考勤表如下所示，大约有 15-18 行：

```
id | name | strikes | date1 |date2 | date..

----------------------------------------------
1 | name1 | number | 21/10/2012 | 27/10/2012 | ..

2 | .. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:22:32.457

当您发布数据时，后端的格式为 $_POST['field_name'] = 'value'。执行循环以进行查询。

```
$query = '';

// Generate the query string
foreach ($_POST as $field => $value) {
    $query .= $field .' = ' .$value .', ';
}

$query = substr($query, 0, -2); // Remove the last comma and space

$query .= ' where someField = someValue'; // add condition to the update statment 
```

然后你可以执行：

```
$result = mysql_query("UPDATE attendance SET $query"); 
```

对不起我的英语不好。

我希望对您有所帮助。

# ubuntu - Xming 在 Windows 7 上无法连接

> ID：13684341
> 
> 赞同：3
> 
> 时间：2012-12-03T13:33:18.963
> 
> 标签：ubuntu, windows-7, windows-firewall, xming

我刚刚在 Windows 7 Ultimate 系统上安装了 Xming。我在 LAN 上有另一台运行 Ubuntu 的机器，并试图让它的 X11 应用程序出现在 Windows 系统上。

这在过去是有效的，但我现在重新格式化了 Windows 系统并且 Linux 机器无法连接到它，尽管 Windows 防火墙具有允许连接的必要规则。

1.  在 Windows 上，我启动 Xming - 托盘图标按预期出现
2.  在 Linux 机器上，我从终端运行它：（`DISPLAY=192.168.0.10:0 lxmusic &`其中 192.168.0.10 是 Windows 机器的 IP）
3.  我希望 lxmusic 会“出现”在我的 Windows 桌面上，但我会`(lxmusic:5645): Gtk-WARNING **: cannot open display: 172.20.52.5:0`在终端上看到，然后 lxmusic 退出

我已经尝试过的事情： - 我已验证所述 IP 是 Windows 机器的正确 IP - 我已尝试将 Windows 防火墙的 Xming 规则添加到不同的网络配置文件（公共、家庭等），尽管 Windows 看到 LAN作为其“家庭”网络

在我想不出还有什么可以尝试之前忘记了我是如何工作的。

（我完全清楚通过网络发送 X11 流量会带来安全风险，但我忽略了这种风险。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:33:18.963

找到了答案。

我发现我可以从Linux机器telnet到Windows机器没有问题（`telnet 192.168.0.10 6000`），所以我找错地方了，问题不在于防火墙。

[正如这里](http://www.straightrunning.com/XmingNotes/trouble.php)提到的（在*Access Control*下）Xming 有自己的访问控制来防止未经授权的连接。默认情况下，Xming 将只允许来自 localhost 的连接。

为了纠正这个问题，我简单地添加了我的 Linux 机器的 IP 地址，`C:\Program Files (x86)\Xming\X0.hosts`现在一切正常。:-)

# java - jdk7：sun.font.fontManager 替换/如何从 fontname 获取文件名信息

> ID：13684342
> 
> 赞同：6
> 
> 时间：2012-12-03T13:33:19.510
> 
> 标签：java, fonts, java-7, jdk-internal-api

**使用 Oracle(Sun) JDK6 并尝试迁移到 Oracle JDK7**

我正在使用`sun.awt.GraphicsEnvironment`查找所有系统字体，以便使用它们来更改我的 pdf 文件中使用的 pdf 字体。这是我正在使用的确切代码：

```
GraphicsEnvironment gEnv = GraphicsEnvironment.getLocalGraphicsEnvironment();

// get all system fonts
final Font[] fonts = gEnv.getAllFonts(); 
```

之后，我需要在系统上获取确切的字体文件路径，所以我使用：

```
FontManager.getFontPath(true) + "/" +
               FontManager.getFileNameForFontName(font_name); 
```

现在的问题是，`sun.font.FontManager`它不再是一个类，并且已经被转换为一个接口。我在网上搜索并提出了一些我不满意的解决方案，我正在寻找其他想法来帮助解决我的问题。

**我找到的解决方案：**

1.  在 Java 6 而不是 Java 7 上部署我的项目（不推荐，因为我在 Java 7 中使用了一些新功能）。
2.  我在网上找到了 FontManager 类的代码，但是使用它需要包含很多其他类/接口，而且这个过程看起来很笨拙且耗时。如果我被允许使用该代码，我也不是，因为它是 Sun 公司的专有。

**我需要的是：** **一种在系统上找到确切字体文件路径的方法**. 欢迎所有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:20:39.463

您不是在说您使用哪个 JDK（Oracle、OpenJDK、..）。可能你有

```
FontManagerFactory.getInstance() 
```

可用的。或者接口实现`Win32FontManager`（如果你在 Windows 上）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-27T11:01:15.913

此代码适用于 Windows 10 和 IBM Java 8

```
sun.font.SunFontManager.getInstance().getPlatformFontPath(true) 
```

但是在 macOS 11 和 AdoptOpenJDK 8/11 上会返回一个空字符串。

# c++ - ADsOpenObject 密码加密？

> ID：13684346
> 
> 赞同：2
> 
> 时间：2012-12-03T13:33:24.557
> 
> 标签：c++, windows, ldap

对于msdn 库中的这个 ADsOpenObject，我通过 LDAP url 从 Active Directory 获取了一些详细信息：

```
hRes = ADsOpenObject(pwszBindingString, pwszUSER, pwszPASS, ADS_SECURE_AUTHENTICATION,IID_IADs, (void**)&iads ); 
```

我怀疑在连接域控制器时给定的密码是否会被加密

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:06:28.570

[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772323%28v=vs.85%29.aspx)说

> 注意 如果指定用户名和密码而没有指定认证标志，则用户名和密码在网络上以明文形式传输，存在安全风险。不要在未指定身份验证标志的情况下指定用户名和密码。

您正在使用 中的`ADS_SECURE_AUTHENTICATION`标志[`ADS_AUTHENTICATION_ENUM`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772247%28v=vs.85%29.aspx)，这意味着：

> 请求安全身份验证。设置此标志时，WinNT 提供程序使用 NT LAN 管理器 (NTLM) 对客户端进行身份验证。Active Directory 将使用 Kerberos，可能还有 NTLM，对客户端进行身份验证。当用户名和密码为 NULL 时，ADSI 使用调用线程的安全上下文绑定到对象，该安全上下文可以是运行应用程序的用户帐户的安全上下文，也可以是调用线程所代表的客户端用户帐户的安全上下文.

NTLM 和 Kerberos 都是“加密”密码的协议。如果您还想加密用户名，那么您需要 SSL（这需要为域设置证书服务器）。

您始终可以使用数据包嗅探器来验证信息是否已加密。

# android - 音量通道

> ID：13684352
> 
> 赞同：2
> 
> 时间：2012-12-03T13:33:32.537
> 
> 标签：android, google-tv

这样的问题：我有两个声道录制的视频文件。我试图通过以下代码关闭左声道：

```
MediaPlayer mp; 

....

mp.setVolume(0.f, 1f); 
```

...并且在平板电脑上这项工作很好（右音量通道听起来不错）。但后来我在连接到三星 UE46ES6307U 的 googleTv 上尝试了它，但此代码不起作用，声音关闭。也许它是杜比数字+/杜比脉冲音频的界限？我可以以某种方式以编程方式发现声音通道设备的功能，以及每个通道设置的音量吗？

更新：在这个论坛上[http://www.googletvforum.org/forum/logitech-revue/375-audio-problems-logitech-revue.html](http://www.googletvforum.org/forum/logitech-revue/375-audio-problems-logitech-revue.html)回复这样的消息之一：“罗技尚未弄清楚如何管道多通道音频通过 hdmi。你必须使用光学输出。没关系。

**“你是如何构建 MediaPlayer 的？”**

```
Videoview vv;
...............

        vv.setOnPreparedListener(new OnPreparedListener() {
            @Override
            public void onPrepared(MediaPlayer mp) {
                mp.setVolume(0.f, 1f);
            }
        }); 
```

**更新：**

```
public class MainActivity extends Activity {
    MediaPlayer mp = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if (mp != null) {
            mp.reset();
            mp.release();
        }

        mp = MediaPlayer.create(this, R.raw.test);
        mp.start();

    }

    public void onTurnOffLeft(View v){
        mp.setVolume(0.f, 1.f);
    }

    public void onTurnOffRight(View v){
        mp.setVolume(1.f, 0.f);
    }
} 
```

onTurnOffLeft 方法关闭所有声音，onTurnOffRight 方法无效。

**更新2**

我尝试播放使用 Vorbis 编解码器编码的 .ogg 音频文件 - 通道关闭良好。但我尝试播放用 mp3、ac3、pcm、aac 编码的视频文件 - 关闭频道的问题仍然存在......我需要关闭视频中的音频频道，但如何解决这个问题，我不知道然而。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:52:19.380

MediaPlayer 对象由跨设备的不同库支持（平板电脑和 Google TV 之间不一样）。你是如何构建 MediaPlayer 的？

您可能想尝试的一件事是在 MediaPlayer 构建后立即调用它的 #reset()。默认情况下，当您使用“新”运算符构造 MediaPlayer 实例时，它处于空闲状态（至少在 Google TV 上）。通过调用 reset 您允许调用您自己的 OnErrorListener.onError() 处理程序。这将让您查看是否存在其他不可见的潜在错误。

您可能还想查看 AudioManager#setStreamVolume(int, int, int) 设置特定类型的所有流的音量。

编辑 1：由于您只是在设置监听器后从布局中获取 VideoView（我猜是因为省略了该代码），因此您应该在视频视图上调用重置。

# c# - RavenDb 分层数据索引

> ID：13684353
> 
> 赞同：0
> 
> 时间：2012-12-03T13:33:33.640
> 
> 标签：c#, .net, indexing, ravendb

我的数据模型是：

```
public class Category
{
    public Guid Id { get; set; }
    public List<Category> children { get; set; }
} 
```

我想要的只是从任何级别的嵌套中获取数据。

我为此创建了一个索引：

```
public class CategoriesIndex : 
    AbstractIndexCreationTask<Category, CategoriesIndex.ReduceResult>
{
    public class ReduceResult
    {
        public Guid Id { get; set; }
        public Category Category { get; set; }
    }

    public CategoriesIndex()
    {
        Map = categories => 
            from category in categories
            from subcategory in category.Hierarchy(x=>x.children)
            select new {
                Id = subcategory.Id,
                Category = subcategory
            };

        Store(x => x.Id, FieldStorage.Yes);
        Store(x => x.Category, FieldStorage.Yes);
    }
} 
```

运行该代码后，我遇到了异常

> 网址：“/indexes/CategoriesIndex”
> 
> System.InvalidOperationException：源代码。

怎么了？如果是我如何索引分层数据？

PS 由于某些限制，我无法更改数据模型

**更新**

我收到了异常的消息：

```
public class Index_CategoriesIndex : AbstractViewGenerator
{
public Index_CategoriesIndex()
{
    this.ViewText = @"docs.Categories.SelectMany(category => category.Hierarchy(x => x.children), (category, subcategory) => new() {
Id = subcategory.Id,
Category = subcategory
})";

    this.ForEntityNames.Add("Categories");
    this.AddMapDefinition(docs => docs.Where(__document => __document["@metadata"]["Raven-Entity-Name"] == "Categories").SelectMany((Func<dynamic, IEnumerable<dynamic>>)(category => (IEnumerable<dynamic>)(category.Hierarchy(x => x.children))), (Func<dynamic, dynamic, dynamic>)((category, subcategory) => new { Id = subcategory.Id, Category = subcategory, __document_id = category.__document_id })));
    this.AddField("Id");
    this.AddField("Category");
    this.AddField("__document_id");
}
} e:\RavenDB\Web\Tenants\RavenPortalAuth\IndexDefinitions\TemporaryIndexDefinitionsAsSource\4jy1udpm.0.cs(21,223) :
error CS1977: Cannot use a lambda expression as an argument to a dynamically dispatched operation without first casting it to a delegate or expression tree type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T03:55:09.947

您应该使用 AbstractIndexCreationTask 的 Recurse 方法。

[http://ravendb.net/docs/2.0/client-api/querying/static-indexes/indexing-hierarchies](http://ravendb.net/docs/2.0/client-api/querying/static-indexes/indexing-hierarchies)

# asp.net-mvc-3 - 在自定义模型绑定后验证视图模型

> ID：13684354
> 
> 赞同：2
> 
> 时间：2012-12-03T13:33:34.963
> 
> 标签：asp.net-mvc-3, validation, custom-model-binder

我有一个实现的视图模型，`IValidatableObject`它包含一个字符串和另一个视图模型的集合，如下所示：

```
public sealed class MainViewModel
{
    public string Name { get; set; }
    public ICollection<OtherViewModel> Others { get; set; }
} 
```

`Others`我的验证使用以下提供的合同根据不同的规则检查每个对象`IValidatableObject`：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
    foreach (var other in this.Others)
    {
        // validate or yield return new ValidationResult
    }
} 
```

由于真实的复杂结构，`MainViewModel`我不得不创建一个自定义模型绑定器，它重新构建模型并将 POST 数据分配给相关组件。我遇到的问题是没有得到验证，导致上下文级别的验证错误，因为它违反了某些数据库约束，我不确定我做错了什么 - 我认为这会在我的视图中`ModelState.IsValid`调用该方法`Validate`模型，但它似乎并没有这样下去。

我的模型活页夹看起来像这样：

```
public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    int modelId = (int)controllerContext.RouteData.Values["id"];

    // query the database and re-build the components of the view model

    // iterate the POST data and assign to the model where necessary

    // should I be calling something here to validate the model before it's passed to the controller?

    return model;
} 
```

任何帮助表示赞赏！

**Validator.TryValidateObject**

好吧，看来我离得更近了一点。我现在可以`IValidatableObject`通过将以下内容添加到我的自定义模型绑定器来运行我的方法：

```
var validationResults = new HashSet<ValidationResult>();
var isValid = Validator.TryValidateObject(model, new ValidationContext(model, null, null), validationResults, true); 
```

似乎`Validator.TryValidateObject`调用验证方法并将最后一个参数设置为`true`使其验证所有属性。但是，我现在坚持使用`validationResults`控制器，以便可以以有意义的方式使用它们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T13:51:27.490

我应该已经意识到我可以`ModelState.AddModelError`通过自定义活页夹来使用它，我现在通过在将模型返回到控制器之前将以下内容添加到我的自定义模型活页夹中来设法使其正常工作：

```
var validationResults = new HashSet<ValidationResult>();
var isValid = Validator.TryValidateObject(model, new ValidationContext(model, null, null), validationResults, true);
if (!isValid)
{
    foreach (var result in validationResults)
    {
        bindingContext.ModelState.AddModelError("", result.ErrorMessage);
    }
}

return model; 
```

现在这会将所有错误的列表返回到我的页面，并且`ModelState.IsValid`对我的控制器操作的检查现在正在返回`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T05:26:33.373

Paul 的出色答案可以重构为通用的验证并转换为`ModelState`方法，如下所示（例如在帮助程序或`CustomModelBinder`基础中）。此外，还保留了与已验证属性的绑定。

```
public static void DoValidation(ModelBindingContext bindingContext, 
                                IValidatableObject model)
{
    var validationResults = new HashSet<ValidationResult>();
    var isValid = Validator.TryValidateObject(model, 
        new ValidationContext(model, null, null), validationResults, true);
    if (!isValid)
    {
        var resultsGroupedByMembers = validationResults
            .SelectMany(_ => _.MemberNames.Select(
                 x => new {MemberName = x ?? "", 
                           Error = _.ErrorMessage}))
            .GroupBy(_ => _.MemberName);

        foreach (var member in resultsGroupedByMembers)
        {
            bindingContext.ModelState.AddModelError(
                member.Key,
                string.Join(". ", member.Select(_ => _.Error)));
        }
    }
} 
```

# c# - WPF 复选框样式更改

> ID：13684355
> 
> 赞同：12
> 
> 时间：2012-12-03T13:33:35.390
> 
> 标签：c#, wpf, checkbox, wpf-controls

我刚开始使用 WPF，需要一个复选框的特定功能：

1.  我想将形状从盒子更改为椭圆。
2.  此外，应该有颜色变化（绿色=真，红色=假）而不是交叉。

背景：我有不同的传感器，想通过这些复选框启用/禁用它们。我也想过用按钮代替复选框，但我认为功能更多的是由复选框给出的。

我希望我的描述是可以理解的。是否可以定义这样的样式模板？

亲切的问候

亚历克斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T18:28:31.847

好吧，我终于做到了！在附件中，您可以看到我的解决方案，我对结果感到满意。如果有人有任何意见，请不要犹豫写评论。非常感谢您的帮助

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style TargetType="CheckBox" x:Key="CircleCheckbox">
        <Setter Property="Cursor" Value="Hand"></Setter>   
        <Setter Property="Content" Value=""></Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type CheckBox}">                   
                    <Grid>                     
                        <Ellipse x:Name="outerEllipse">
                            <Ellipse.Fill>
                                <RadialGradientBrush>
                                    <GradientStop Offset="0" Color="Red"/>
                                    <GradientStop Offset="0.88" Color="LightCoral"/>
                                    <GradientStop Offset="1" Color="DarkRed"/>
                                </RadialGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>
                        <Ellipse Margin="10" x:Name="highlightCircle" >
                            <Ellipse.Fill >
                                <LinearGradientBrush >
                                    <GradientStop Offset="0" Color="Green"/>
                                    <GradientStop Offset="0.5" Color="LightGreen"/>
                                    <GradientStop Offset="1" Color="DarkGreen"/>
                                </LinearGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>
                        <ContentPresenter x:Name="content" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="highlightCircle" Property="Fill">
                                <Setter.Value>
                                    <LinearGradientBrush StartPoint="0.3,0" EndPoint="0.7,1">
                                        <GradientStop Offset="0" Color="Green"/>
                                        <GradientStop Offset="0.5" Color="LightGreen"/>
                                        <GradientStop Offset="1" Color="DarkGreen"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="outerEllipse" Property="Fill">
                                <Setter.Value>
                                    <RadialGradientBrush>
                                        <GradientStop Offset="0" Color="Green"/>
                                        <GradientStop Offset="0.88" Color="LightGreen"/>
                                        <GradientStop Offset="1" Color="DarkGreen"/>
                                    </RadialGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsChecked" Value="False">
                            <Setter TargetName="highlightCircle" Property="Fill">
                                <Setter.Value>
                                    <LinearGradientBrush StartPoint="0.3,0" EndPoint="0.7,1">
                                        <GradientStop Offset="0" Color="Red"/>
                                        <GradientStop Offset="0.5" Color="LightCoral"/>
                                        <GradientStop Offset="1" Color="DarkRed"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>    
</ResourceDictionary> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-03T13:39:20.193

您将需要自定义 Checkbox 并创建一个***Custom Template***。
为此，您需要更改**[默认 Checkbox Template](http://msdn.microsoft.com/en-us/library/ms752319%28v=vs.85%29.aspx)**。

您想要做的是稍微使用触发器和背景来设置您想要的样式。注意该`CheckMark`属性，您可能会想要保留它`Hidden`

# html - IE 中的 __src__ 是什么意思？

> ID：13684356
> 
> 赞同：1
> 
> 时间：2012-12-03T13:33:40.430
> 
> 标签：html

我碰巧遇到了 IE 的谷歌代码。

```
<IMG style="POSITION: absolute; WIDTH: 616px; HEIGHT: 616px; TOP: 0px; LEFT: -154px" src="https://cbks0.googleapis.com/cbk?output=tile&amp;cb_client=apiv3&amp;v=4&amp;zoom=2&amp;x=2&amp;y=0&amp;panoid=AmKl8CauDW9s1OBl6hpC3Q&amp;fover=2&amp;onerr=3" __src__="https://cbks0.googleapis.com/cbk?output=tile&amp;cb_client=apiv3&amp;v=4&amp;zoom=2&amp;x=2&amp;y=0&amp;panoid=AmKl8CauDW9s1OBl6hpC3Q&amp;fover=2&amp;onerr=3" __gm_ticket__="1" gm_id="null" mb="false"> 
```

它包含我不知道的标签，例如，，`__src__`..有人知道它们是什么吗？`gm_id``__gm_ticket__`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T01:48:10.353

The double underscore is a naming convention which means the values of `src` or `gm_ticket` should not be edited by the user. This is more efficient than wrapping each global function in a closure. Closures can be `very memory hungry since every instance needs its own function to encapsulate the local vars`.

**References**

*   [Trying to be Private in JavaScript](http://ajaxian.com/archives/trying-to-be-private-in-javascript)
*   [Google Maps API](https://developers.google.com/maps/documentation/javascript/v2/basics)

# json - 如何在 Sencha Touch 列表中显示嵌套项目

> ID：13684358
> 
> 赞同：0
> 
> 时间：2012-12-03T13:33:42.747
> 
> 标签：json, list, sencha-touch

我有以下 json 数据。

```
{
"pendingTasksVOs" : [{
        "groupName" : "LAST_MONTH",
        "documents" : [{
                "description" : "kvk1",
                "uploadDate" : "1-12-2012"
            }
        ]
    }, {
        "groupName" : "OLDER",
        "documents" : [{
                "description" : "kvk2",
                "uploadDate" : "1-11-2012"
            }, {
                "description" : "kvk3",
                "uploadDate" : "1-10-2012"
            }, {
                "description" : "kvk4",
                "uploadDate" : "1-01-2012"
            }
        ]
    }
]
} 
```

我想在按 GroupName 分组的 Sencha Touch 列表中显示它。

我希望列表采用以下格式：

```
组名：Group1
-----------------------------------------
Description11 , UploadDate11 这应该是单独的可点击列表行
-----------------------------------------
Description12 , UploadDate12 这应该是单独的可点击列表行
-----------------------------------------
Description13 , UploadDate13 这应该是单独的可点击列表行
-----------------------------------------
******************************
组名：Group2
-----------------------------------------
Description21 , UploadDate21 这应该是单独的可点击列表行
-----------------------------------------
Description22 , UploadDate22 这应该是单独的可点击列表行
-----------------------------------------
******************************

```

我正在尝试使用 Sencha Touch List 组件。但我不会按照上述要求获得清单

```
//This is my store 
var store = Ext.create('Ext.data.Store', {
        model: 'Demo.model.DocumentList',
        rootProperty: 'pendingTasksVOs',                                          
        autoLoad: true,                                                                             
        grouper: {
        groupFn: function(record) {
            if (record && record.data.title) {
                    return record.get('groupName');
                } else {
                return '';
                }
            }
        }           
    });

//template for list item
var listTemplate = new Ext.XTemplate(                                           
        '<tpl for=".">',
        '{groupName}</br>',
        '<ul>',
        '<tpl for="documents">',
        '{description}  {uploadDate} </br>',
        '</tpl>',
        '</ul>',
        '</tpl>'                                            
        );

// Initialize the main view
Ext.getCmp("pendingTasksListId").add(Ext.create('Ext.List', {
  fullscreen: true,
  itemTpl:  listTemplate,     
  store: store,
  groupField:'description',
  grouped: true
}));

//DocumentListModel is defined under /app/model/ 
Ext.define('Demo.model.DocumentList', {
extend: 'Ext.data.Model',
requires : ['Demo.model.Doc'],
config: {
     fields: ['groupName', 'documents'],
     hasMany : {

        model : "Demo.model.Doc", 
        associationKey: 'documents'
    },
    proxy: {
        type: 'rest',
        url : "/getPendingTasks",
        reader: {
            type: 'json',           
            rootProperty : 'pendingTasksVOs'
        }
    }       
}
}

//Document Model is defined under /app/model/ 
Ext.define('Demo.model.Doc', {
extend: 'Ext.data.Model',    
config: {
     fields: ['description', 'uploadDate'],
     belongsTo: "Demo.model.DocumentList"
}   
}); 
}); 
```

我能够得到如下列表项：

```
组的名字，
说明11，上传日期11
说明12，上传日期12

```

但以上全部内容是可点击的。我希望每个 Description 和 UploadDate 对都是可点击的。

谁能指导我如何实现上述要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:14:18.637

我得到了我的问题的解决方案。

在 /app/reader/ 文件夹下创建以下自定义 json 阅读器作为 CustomReader.js

```
Ext.define('Demo.reader.CustomReader', {
extend: 'Ext.data.reader.Json',
alias: 'reader.customReader',
getData: function(data) {       // overriding
    data = this.callParent(arguments);
    var responseString = Ext.encode(data);
    var json = JSON.parse(responseString);
    var result = [];
    Ext.each(json.pendingTasksVOs, function(entry) {

        var groupName = entry.groupName;
        Ext.each(entry.documents || [], function(document) {          
            result.push({
                description : document.description,
                uploadDate: document.uploadDate,
                groupName: groupName
            });
        });
    });
    return result;
}
}); 
```

Doc 模型应在 /app/model 中创建，如下所示为 Doc.js

```
Ext.define('Demo.model.Doc', {
extend: 'Ext.data.Model',    
config: {
     fields: ['description','uploadDate','groupName']       
}
}); 
```

Store 可以在 /app/store 文件夹中创建 Store 应该使用这个自定义阅读器，如下所示：

```
Ext.define("Demo.store.DocumentStore", {
extend:'Ext.data.Store',
requires:['Demo.model.Doc' , 'Ext.data.proxy.Rest', 'Demo.reader.CustomReader'],
id:'DocumentStore1',
config:{
    model:'Demo.model.Doc',
    autoLoad:true,
    grouper:{
        groupFn:function (record) {
            if (record && record.data.groupName) {
                return record.get('groupName');
            } else {
                return '';
            }
        }
    },
    proxy:{
        type:'rest',
        url:"/getPendingTasks",
        reader:{
            type:'customReader'     //This is our custom reader         
        }
    }
}
}); 
```

//最后可以如下创建列表

```
Ext.create('Demo.store.DocumentStore');
// Initialize the main view
Ext.getCmp("pendingTasksListId").add(Ext.create('Ext.List', {
fullscreen:true,
itemTpl:'<div class="contact">{description} {uploadDate} {groupName}  </div>',
store: 'DocumentStore1',
grouped:true
})); 
```

上面给了我一个列表，我从接收到的有问题的 json 中为每个 {description} {uploadDate} 对获取单独的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:31:44.350

试试这个，

```
itemTpl: [
'<div>GroupName : {groupName}</div>',
'<div>',
'<ul>',
'<tpl for="documents">',
'<li>{description} , {uploadDate}</li>',
'</tpl>',
'</ul>',
'</div>',
].join('') 
```

或这个，

```
itemTpl: [
'<div>GroupName : {groupName}</div>',
'<div>',
'<ul>',
'<tpl for="documents">',
'<li><div onclick="whateverYouWantToDo()">{description} , {uploadDate}</div></li>',
'</tpl>',
'</ul>',
'</div>',
].join('') 
```

# sql - 某些干扰词的奇怪全文搜索行为

> ID：13684360
> 
> 赞同：1
> 
> 时间：2012-12-03T13:33:49.063
> 
> 标签：sql, sql-server, full-text-search, sql-server-2012

当我运行 FTS 时，我认识到“之后”这个词的行为非常奇怪。起初“之后”是干扰词，因此 sql 应该将其从选择中排除，因为选项“转换干扰词”在我的环境中为 1（SQL 2012）；

如果我跑

```
 SELECT p.name,  tbl.* FROM CONTAINSTABLE(dbo.PaperPdfs, *, 'FORMSOF(INFLECTIONAL ,   after) AND FORMSOF(INFLECTIONAL , plasma) ') tbl 
```

我没有收到任何行。为什么？？？

如果我跑

```
 SELECT p.name,  tbl.* FROM CONTAINSTABLE(dbo.PaperPdfs, *, 'FORMSOF(INFLECTIONAL ,   the) AND FORMSOF(INFLECTIONAL , plasma) ') tbl 
```

（“the”也是噪音词）

甚至

```
 SELECT p.name,  tbl.* FROM CONTAINSTABLE(dbo.PaperPdfs, *, 'FORMSOF(THESAURUS,   after) AND FORMSOF(INFLECTIONAL , plasma) ') tbl 
```

我收到了一些结果。我只发现了一个这样的“奇怪”词，那就是“之后”，但我很担心。

# c# - 为什么我得到一个 OpenXmlUnknownElement？

> ID：13684361
> 
> 赞同：4
> 
> 时间：2012-12-03T13:33:58.123
> 
> 标签：c#, bytearray, openxml

这不是一个真正的问题，因为我已经找到了这个问题的原因![从 OpenXml 正文中检索后代](../Images/154f19e7df933fff003619028c8d4db9.png)

使用此代码检索后代。

```
using System.IO;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Wordprocessing;
namespace Testolini
{
    class Program
    {
        static void Main(string[] args)
        {
            var filename = Path.GetTempFileName();
            var word = WordprocessingDocument.Create(filename, DocumentFormat.OpenXml.WordprocessingDocumentType.Document);
            word.AddMainDocumentPart();
            word.MainDocumentPart.Document = new Document(
                                                new Body(
                                                    new Paragraph(
                                                        new Run(
                                                            new Paragraph(
                                                                new Run(
                                                                    new Text("test1"))),
                                                            new Paragraph(
                                                                new Run(
                                                                    new Text("test2"))),
                                                            new Paragraph(
                                                                new Run(
                                                                    new Text("test3")))))));
            word.Close();

            using (var memorystream = new MemoryStream(File.ReadAllBytes(filename)))
            {
                var word2 = WordprocessingDocument.Open(memorystream, true);

                var descendants = word2.MainDocumentPart.Document.Body.Descendants();

                word.Close();

            }
        }
    }
} 
```

如果你遇到同样的问题。这可能是因为 XML 文件未通过 ECMA 标准进行验证。就我而言，问题是我有嵌套的段落。

当我使用 bytearray 和 memorystream 打开文档时，问题就出现了。看起来元素已经过验证，如果验证失败，它就会变成 OpenXmlUnknownElement。

如果有人对这个问题有更好的解释，也许还有更准确的原因，我很想了解更多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:54:21.640

A`Run`不能包含另一个`Paragraph`。

以下是 a 的有效子元素列表`Run`：

> annotationRef（评论信息块）
> br（中断）
> commentReference（评论内容参考标记）
> contentPart（内容部分）
> continuationSeparator（继续分隔符标记）
> cr（回车）
> dayLong（日期块-长日格式）
> dayShort（日期块-短日格式） )
> delInstrText（已删除字段代码）
> delText（已删除文本）
> 绘图（DrawingML 对象）
> endnoteRef（尾注参考标记）
> endnoteReference（尾注参考）
> fldChar（复杂字段字符）
> footnoteRef（脚注参考标记）
> footnoteReference（脚注参考）
> instrText（字段代码）
> lastRenderedPageBreak（上次计算的分页符的位置）
> monthLong（日期块 - 长月格式）
> monthShort（日期块 - 短月格式）
> noBreakHyphen（非中断连字符）
> object（嵌入对象）
> pgNum（页码块）
> ptab（绝对位置选项卡）字符）
> rPr（运行属性）
> ruby​​（拼音指南）
> separator（脚注/尾注分隔符）
> softHyphen（可选连字符）
> sym（符号字符）
> t（文本）
> tab（制表符）
> yearLong（日期块 - 长年格式）
> yearShort （日期块 - 短年格式）

取自[MSDN](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.run.aspx)。

为什么需要“嵌套”段落？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T13:55:43.123

文件似乎处于无效状态。我认为当您更改文档以使其包含不应该以这种方式相关的父母之下的孩子时，会发生这种情况。

这可能会有所帮助：http: [//msdn.microsoft.com/en-us/library/office/bb497334.aspx](http://msdn.microsoft.com/en-us/library/office/bb497334.aspx)

# qt - Qt Resources 系统是否支持仅用于测试的文件？

> ID：13684364
> 
> 赞同：1
> 
> 时间：2012-12-03T13:34:19.073
> 
> 标签：qt, testing

我已经使用 Qt 的资源在菜单中添加了几个图标并且效果很好，但现在我想知道是否可以添加一个我需要用作测试参考的文件。

因此，我希望这个文件**仅**在我运行测试时可以访问，而不是它被添加到应用程序的二进制文件中。有没有办法设置这种差异化？

[我在 Qt 的文档](http://doc.qt.digia.com/qt/resources.html)中没有找到类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:57:53.327

您可以使用 QResource 以编程方式执行此操作。

或者也许写在 .pro 文件上（我没试过！！）：

```
 Debug:RESOURCES += resources_only_debug_mode.qrc 
```

更多信息在这里：[Qt .pro Docs](http://doc.qt.digia.com/qt/qmake-project-files.html)

# android - Android GPS 电池使用情况

> ID：13684365
> 
> 赞同：3
> 
> 时间：2012-12-03T13:34:20.167
> 
> 标签：android, geolocation, gps, battery

我正在编写一个使用 GPS 的 Android 程序。如果没有打开它会提示用户打开位置服务（我猜这相当于打开 gps ？）。我的问题是：gps 是否会在定位服务打开后立即开始消耗额外的电池电量，还是在查询/用于新位置时使用电池电量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T13:46:30.313

GPS 仅在位置管理器请求更新时才开始工作。在设备中打开 GPS 仅*允许*程序在需要时请求位置，但这并不意味着 GPS 正在启动。

您可以自己测试：通知栏中的 GPS 图标告诉 GPS 状态。您可以打开 GPS，但图标不会出现。为什么？现在没有应用程序请求更新。一旦应用程序请求更新，图标就会开始闪烁（GPS 正在自行初始化），当它停止时，这意味着 GPS 已初始化并且当前正在接收更新。**仅**当此图标出现时GPS 才会消耗电池电量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T03:00:41.867

我的公司不久前写了一篇关于这个主题的博客文章。检查它是否有用。

[http://www.littleeye.co/blog/2013/03/29/understanding-gps-resource-usage/](http://www.littleeye.co/blog/2013/03/29/understanding-gps-resource-usage/)

但是我们错过了讨论当没有应用程序实际请求位置更新时会发生什么。是的，如前所述，除非应用程序实际上要求更新位置，否则它们不会导致耗电。但请注意，即使是对位置更新的单个请求（取决于粗粒度或细粒度请求）也可能会产生意想不到的影响，因为设备必须经过各种状态才能恢复其稳定状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:42:18.087

打开位置服务只是用户授予应用程序使用位置服务的权限。只要任何应用程序不要求位置，功耗与打开位置服务时相同。另一方面 - 有许多应用程序试图获取位置。Facebook、Camera、Android、许多广告库，所以是的——当 GPS 解锁时，用户可能会遇到电池寿命问题。

# ms-access - Access 中的条件查询

> ID：13684375
> 
> 赞同：1
> 
> 时间：2012-12-03T13:34:49.477
> 
> 标签：ms-access

我想用用户名填充表单上有一个组合框。

如果登录的人具有管理员角色，他们可以选择公司中的任何名称。如果用户不是管理员，它只会显示他们自己的名字。

我正在寻找的是这样的：

```
If @Role='Admin' then
  SELECT UserName FROM tblUsers
ELSE
  SELECT UserName FROM tblUsers where UserID=@CurrentUser 
```

我知道如何传入参数 for`@Role`和`@CurrentUser`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:45:35.550

您可以在 if 语句中使用 DLOOKUP。您必须拥有一个带有用户名属性的控件或表单属性才能使以下代码正常工作。

```
If DLookUp("role","tblUsers","UserID = '" & Me.strUserID & "'")='Admin' then
  Me.cboUsers.RowSource = "SELECT UserName FROM tblUsers"
ELSE
  Me.cboUsers.RowSource = "SELECT UserName FROM tblUsers where UserID= '" & Me.strUserID "'"  
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:56:49.290

我认为这个查询表达了你想要做的事情的逻辑。

```
PARAMETERS [current_user] Text ( 255 ), [which_role] Text ( 255 );
SELECT UserName
FROM tblUsers
WHERE
       [which_role] = 'Admin'
    OR UserID = [current_user]; 
```

但是，我不确定当该查询用作组合框的行源时您将如何提供参数。你提到你有一种方法可以做到这一点。如果这在这里有效，那么你就完成了。如果没有，我建议用表单上的文本框替换参数。

```
SELECT UserName
FROM tblUsers
WHERE
       Forms!YourFormName!txtRole = 'Admin'
    OR UserID = Forms!YourFormName!txtCurrentUser; 
```

您可以隐藏文本框（将其 Visible 属性设置为 No），它们的值仍可用于查询。

# ios - UIView 应该捕获点击事件但传递移动事件

> ID：13684386
> 
> 赞同：0
> 
> 时间：2012-12-03T13:35:48.100
> 
> 标签：ios, uiview, touch-event

我有两种观点，小时候一种高于另一种。View1--->View2（View1 有 View2 作为孩子）

如何编码此功能？1) 如果用户在 View2 上点击 - 所以正确的消息被点击：发送到 View2；2）如果用户只是在 View1（包括 View2）上移动手指 - 事件传递给 View1 以便它可以处理 touchesBegan: 等等。

所以我要编写的代码是如果触摸很短，则创建一个函数“[View2 tapped:...]”，如果触摸正在移动，则创建另一个函数（[View1 touchesBegan:..] 等等）。

在我的情况下，如果我将手指移到 View2 上 - 它永远不会将事件传递给 View1。

Ps 我没有重写 hitTest 或任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:39:21.953

你应该看看`UIGestureRecognizers`。其中之一是`UITapGestureRecognizer`- 抓住有针对性的水龙头`UIView`。使用起来非常简单。看苹果[文档。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:40:40.537

[手势识别器](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html#//apple_ref/doc/uid/TP40009541-CH6-SW1)非常优雅地处理这种逻辑。在 view2 上有一个[`UITapGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)，然后在 view1 上做任何你想做的事情（例如 a [`UIPanGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)）。这会处理您需要的所有“哪些手势被哪些视图识别”逻辑。

# c - 从 Arduino 中的 PCA 9554 (i2c) 读取

> ID：13684387
> 
> 赞同：0
> 
> 时间：2012-12-03T13:35:48.560
> 
> 标签：c, arduino, i2c

我正在尝试从 arduino 中的 PCA9554 读取数据。硬件设置很简单：PCA9554的3个地址线都连接到高电平（+5 v），所以这个设备的地址是0x27。我用来读取值的代码如下：

```
 uint8_t i2cr8(uint8_t dev, uint8_t addr)
 {
      uint8_t val=-1;
      Wire.requestFrom(dev,(uint8_t)1);
      if(Wire.available()) {
          val = Wire.read();
       }
       return val;
  } 
```

但它始终为 0。

这段代码有什么问题？

我认为硬件没有错误，因为我可以从 I2C 总线上的其他设备读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-28T13:12:20.370

这种方法有效：

```
//exact address depends on IC model and <A0:A2> wiring
#define dip_addr       0x38 
...

byte rdata = 0xFF;

Wire.beginTransmission(dip_addr);
Wire.send((uint8_t)0);  
Wire.endTransmission();

Wire.requestFrom(dip_addr,1);

if (Wire.available()) rdata = Wire.receive();

Serial.println ("DIP: " + String(rdata, DEC)); 
```

# html - 在段落标签旁边对齐无序列表

> ID：13684400
> 
> 赞同：0
> 
> 时间：2012-12-03T13:36:18.987
> 
> 标签：html, css

我的网站上有一个部分，我希望看起来像这样：

胜：1 | 2 | 5 | 6

输：3 | 5 | 5

我这样设置标记：

```
<article class="result_day">
    <p class="win_lose_text">Date: 21/02/2012</p>
        <p class="win_lose_text">Wins: </p>
            <ul>
                <li>1</li>
                <li>1</li>
                <li>1</li>
            </ul>
        <p>lose: </p>
            <ul>
                <li>1</li>
                <li>1</li>
                <li>1</li>
            </ul>
</article> 
```

我尝试将无序列表放入段落标签中，但他们后来研究发现这是无法做到的。这是我的容器CSS：

```
.result_day
{
    background: rgba(70,70,70,0.3);
    box-shadow: 1px 1px 2px #333333;
    border-radius: 1px;
}

.result_day ul
{
    list-style-type: none;
}

.result_day li
{
    display: inline;
} 
```

我的未排序列表总是在新行上，我希望能够将它与段落标签保持在同一行上。有没有办法做到这一点？也许在 CSS 中有一种方法可以阻止

从新行开始标记？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:54:34.057

适用`display: inline`于您*和*`ul`您的`li`. 以这个小提琴为例：http: [//jsfiddle.net/3nLG5/](http://jsfiddle.net/3nLG5/)。

# javascript - 隐藏带有溢出的滚动条：启用滚动

> ID：13684403
> 
> 赞同：10
> 
> 时间：2012-12-03T13:36:24.347
> 
> 标签：javascript, jquery, html, css

我需要在具有溢出的 div 上隐藏滚动条：滚动；启用，以便 div 将使用鼠标和键盘滚动，但滚动条本身不会显示。

有没有办法用 css 做到这一点，或者 javascript 是要走的路？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-03T13:46:37.130

你可以用纯 CSS 来做到这一点（至少在 webkit 浏览器中）。您必须使用特殊的滚动条伪类来实现这一点

```
::-webkit-scrollbar {
    display: none;
} 
```

阅读这篇出色的[博文](http://css-tricks.com/custom-scrollbars-in-webkit/)以获取更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T13:46:13.553

您可以将滚动 div 放在隐藏溢出的第二个 div 内，然后使内部 div 更宽更高一点（但是，数量可能因浏览器而异）。

像这样的东西：

```
#outer {
    overflow:hidden;
    width:200px; 
    height:400px;
    border:1px solid #ccc;
}
#inner {
    overflow:scroll; 
    width:217px; 
    height:417px;
}​ 
```

完整示例位于[http://jsfiddle.net/uB6Dg/1/](http://jsfiddle.net/uB6Dg/1/)。

**编辑：** 不幸的是，您仍然可以通过突出显示文本和拖动来访问滚动条，并且它确实使填充等更加痛苦，但除此之外，我认为 javascript 是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T17:22:52.703

@Maloric 的回答为我指明了正确的方向，但是我需要流畅的宽度，而且我还希望在滚动条的宽度上更加准确。

这是一个函数，它将根据浏览器报告的内容返回滚动条的确切宽度。

```
var getWidth = function () {
    var scrollDiv = document.createElement('div'),
        scrollbarWidth;

    scrollDiv.style.overflow = 'scroll';
    document.body.appendChild(scrollDiv);

    scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;

    document.body.removeChild(scrollDiv);

    return scrollbarWidth;
};

var width = getWidth();
var container = document.querySelector('.overflowing-container');

container.style.paddingRight = width + 'px';
container.style.marginRight = (width * -1) + 'px';

// Just for testing purposes
document.querySelector('.scrollbar-width').innerHTML = 'scrollbar height: ' + getWidth()
```

```
.container {
  height: 200px;
  overflow-x: hidden;
  overflow-y: auto;
  width: 500px;
}

.overflowing-container {
  height: 100%;
  overflow-y: auto;
  width: 100%;

}
```

```
<div class="container">
  <div class="overflowing-container">
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris tristique feugiat metus, eget mollis nibh vestibulum eu. Nullam eros orci, gravida eu quam nec, maximus posuere dui. Maecenas erat magna, elementum eget nunc eget, tincidunt varius nisl. Phasellus pretium congue consectetur. Donec rutrum nisi sed eros posuere, vel pretium nunc viverra. Praesent consequat sagittis urna, quis convallis magna gravida et. In sed eleifend arcu.

  Duis ornare condimentum est luctus malesuada. Morbi nec sodales nunc. Morbi vehicula tristique massa, nec lacinia tellus vulputate fringilla. Nam eget pulvinar libero. Vestibulum ligula mi, tincidunt ac pellentesque vitae, convallis eu tortor. Cras varius dolor sit amet libero rhoncus, mattis aliquet augue porttitor. Etiam sollicitudin, sem ut mollis imperdiet, erat enim gravida tortor, et imperdiet sem nibh in ex. Aliquam ac aliquam risus. Suspendisse gravida suscipit sapien, et ultrices massa ornare eget. Nulla venenatis pellentesque arcu at auctor. Sed libero ligula, pretium in metus a, malesuada ullamcorper leo. Vivamus tempor velit in ante fringilla rhoncus. Nam ac iaculis arcu. Mauris a nisi quis arcu feugiat posuere.
  </div>
</div>

<div class="scrollbar-width"></div>
```

上面的代码片段显示了这一点。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-03T13:59:30.633

您需要使用该站点[http://jscrollpane.kelvinluck.com/中的 jquery 插件](http://jscrollpane.kelvinluck.com/)

# javascript - jsp和javascript中的UTF8问题

> ID：13684404
> 
> 赞同：0
> 
> 时间：2012-12-03T13:36:30.457
> 
> 标签：javascript, jsp, utf-8, html-encode

我有一个带有包含 UTF8 字母的文本框的 jsp 页面。当我用 javascript 拉取值时，它变成了这种格式：%u05EA%u... 如何将它转换回我可以在 java 中理解的字符串？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:38:05.893

不知道你是如何得到它的，但你可以在 javascript 中使用这个创可贴：

```
unescape('%u05EA'); //"ת" 
```

不过最好解决原来的问题。

# iphone - 如何在 xcode 4.2 上实现 Sharekit

> ID：13684412
> 
> 赞同：1
> 
> 时间：2012-12-03T13:37:00.077
> 
> 标签：iphone

任何人都可以建议我如何在 xcode 4.2 上实现 ShareKit。现在我正在尝试使用这个 Url [https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit..but) ..但我得到了很多编译错误。我不要了解他们描述的第一步。所以请任何人帮助我在我的应用程序上实现 ShareKit..

# android - Android ExpandableListView OnChildClickListener 不起作用

> ID：13684415
> 
> 赞同：1
> 
> 时间：2012-12-03T13:37:06.850
> 
> 标签：android, android-layout

我有一个 ExpandableListView，一切正常。我在每个子行中都有一个复选框，当我单击子行时，我想切换如下：

```
expandableListView.setOnChildClickListener(new OnChildClickListener() {
    @Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        CheckBox checkBox = (CheckBox) v.findViewById(R.id.checkBox1);
        checkBox.toggle();
        return true;
    }
}); 
```

问题是程序永远不会进入 onChildClick() 事件处理程序。任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:39:12.320

尝试这个，

`android:focusable=false`为**复选框**设置。如果还是不行，再补充

`android:descendantFocussability=blocksDescendants`到最顶层的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T12:48:16.750

不要忘记启用

```
@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-03T08:32:33.213

如此处所述，您可能必须将以[下行](https://stackoverflow.com/a/28827162/1993847)添加到您的复选框中：

```
 android:focusable="false"
    android:clickable="false"
    android:focusableInTouchMode="false" 
```

有了这个，我可以简单地使用 ExpandableListView 的 OnChildClickListener

# c# - 从 .aspx 加载 RSS 提要

> ID：13684417
> 
> 赞同：1
> 
> 时间：2012-12-03T13:37:11.267
> 
> 标签：c#, asp.net, rss

在一个 aspx 页面上，我创建了一个基于查询字符串 ( `http://localhost:81/Services/MicroBlogs/rss.aspx?cid=34832`)的 rss 提要

在另一个页面上，我想使用 *XmlReader*和*SyndicationFeed*列出各种 rss 提要的内容，但我无法让它工作。

我尝试使用提要的 url 加载每个提要。

首先，我得到了一个 401 未经授权的异常添加了*XmlReaderSettings*并使用*XmlUrlResolver设置了凭据*

然后我得到*DtdProcessing*错误并将*DtdProcessing.Parse*添加到设置中

但是现在我得到了无效的字符和 html 不允许的错误。

我必须如何让*SyndicateFeed*读取没有“已保存”xml 文件但在代码中创建的提要的 rss 提要？

# javascript - 如何在 Visual Studio 2012 中使用 javascript 访问 WMI？

> ID：13684420
> 
> 赞同：1
> 
> 时间：2012-12-03T13:37:15.663
> 
> 标签：javascript, visual-studio, visual-studio-2012, wmi

我有一个问题。如何在 Visual Studio 2012 中使用 javascript 访问 WMI？

# php - 使用 ?and 的 PHP 语法：

> ID：13684422
> 
> 赞同：-3
> 
> 时间：2012-12-03T13:37:24.123
> 
> 标签：php, syntax

所以，这有效：

```
<?php
 $value = ($_POST['x']) ? $_POST['x'] : $y[0];
 $output = '<input type="text" name="field1" value="'.$value.'">';
?> 
```

但是如何使它在这种情况下工作：

```
 <?php
  $output = '<input type="text" name="field1" value="'.$($_POST['x']) ? $_POST['x'] : $y[0];.'">';  
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:38:22.353

只需删除不属于那里的第一美元，将其包裹在大括号中并删除分号：

```
$output = '<input type="text" name="field1" value="'.(($_POST['x']) ? $_POST['x'] : $y[0]).'">'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:38:59.977

没有分号：

```
value="' . ($_POST['x'] ? $_POST['x'] : $y[0]) .'">'; 
```

我也得到你想要使用的感觉`isset($_POST['x'])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:45:15.623

```
<input type="type" value="<?php echo $condition ? $variant1 : $variant2 ?>" /> 
```

# c++ - 为什么#include "stdio.h" 有效？

> ID：13684424
> 
> 赞同：7
> 
> 时间：2012-12-03T13:37:30.993
> 
> 标签：c++, include

> **可能重复：**
> [#include <文件名> 和#include “文件名”有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)

为什么当我编写以下代码时编译器不抱怨：

```
#include "stdio.h" 
```

难道不应该

```
#include <stdio.h> 
```

相反，因为 stdio.h 实际上存储在库文件夹中，而不是在翻译单元的文件夹中？为什么它仍然有效？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T13:41:06.330

`""`和之间的区别`<>`不大。^(两者都在实现定义的位置1, 2)中搜索标题。不同之处在于，如果该搜索失败 `""`，则搜索就像使用`<>`. （§16.2）

基本上，这意味着如果`<>`找到具有特定名称的标头，`""`则不会找不到具有相同名称的标头³。

* * *

¹对于两种形式，这些实现定义的位置不必相同。

²不要求其中一个搜索库文件夹，另一个搜索 TU 的文件夹。允许编译器搜索整个文件系统，如果需要，甚至可以在 Google 上搜索。

³不过，这并不意味着它们总能找到相同的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:40:43.200

这是因为包含语法是如何定义的。

`#include <cstdio>`表示编译器应该包含标准库 cstdio

`#include "cstdio"`意味着编译器应该尝试查找文件“cstdio”，主要查看当前目录并使用标准库的位置作为后备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:42:01.480

`""`与`<>`仅更改查找顺序。

所以与

```
#include "stdio.h" 
```

预编译器将从翻译单元的目录开始查找，然后移动到预定义的“包含”目录

然而

```
#include <stdio.h> 
```

是其他方式

# jquery - 文件输入字段验证

> ID：13684431
> 
> 赞同：0
> 
> 时间：2012-12-03T13:38:02.987
> 
> 标签：jquery, validation, struts2, jquery-validate, struts2-jquery

我试过这个，它不工作。

我想做以下事情：

单击提交按钮时，应该验证 profilePic。profilePic 不能为空，并且只能接受其中一个

> gif|png|jpg|jpeg|pjpeg

文件。

我还想添加最大上传大小。

```
 $("#basicprofile").bind("submit", function() {
            $("#profilePic").validate({
                rules: {
                    field: {
                        required: true,
                        accept: "gif|png|jpg|jpeg|pjpeg"
                    }
                }
            });
        });

 <s:form action="basicprofile" method="post" enctype="multipart/form-data" 
  id="basicprofile">
       <s:file name="profilePic"  id="profilePic" label="Profile Picture" />
       <s:submit />
 </s:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:21:41.067

```
$(document).ready(function() {

    $("#basicprofile").validate({
        rules: {
            profilePic: {
                required: true,
                accept: "gif|png|jpg|jpeg|pjpeg"                
            }
        },

        messages: {
            profilePic: {
                required: "Empty file",
                accept: "Wrong format!!"
            }                  
        },

        errorPlacement: function(error, element) {
            $("#error-messages").html(error); // error container
        }

    });

}); 
```

您可以检查该字段是否已填充并且文件在浏览器中具有正确的格式，但检查文件大小是一个难题。您必须使用 AJAX 来完成，并使用浏览器在 POST 请求中发送到服务器的文件大小标头。

雅虎的 UI 库有一个工具可以帮助解决这个问题。YUI 上传器

示例（不检查文件大小）：http: [//jsfiddle.net/burrak/U36JS/](http://jsfiddle.net/burlak/U36JS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:16:01.123

您必须验证表单，而不是字段。我相信它必须是这样的：

```
$("#basicprofile").validate({
    rules: {
        profilePic: {
            required: true,
            accept: "gif|png|jpg|jpeg|pjpeg"
        }
    }
}); 
```

# mfc - 具有透明背景的 CWnd

> ID：13684437
> 
> 赞同：1
> 
> 时间：2012-12-03T13:38:21.407
> 
> 标签：mfc, transparency, cwnd

我想创建一个基于 CWnd 的类，它将引入一个具有透明背景的控件。

只要内容是静态的，创建控件并使用透明背景绘制其内容对我来说没什么大不了的。

问题是当我想创建一个内容不断变化的控件时。这是因为我不知道如何用父母的背景擦除控件的内容（通常情况下可能不仅仅是纯色）。

所以我想要实现的目标是在绘制其内容之前擦除控件，因为控件从未存在（父控件，并且可能会出现其他控件），而不是在这个地方绘制控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T17:22:03.473

如果你想创建一个顶级窗口，Roel 的回答很好。如果您需要创建一个子窗口（如果您正在创建控件，则必须是这种情况），您不能使用 WS_EX_LAYERED（我认为这已从 Windows 8 开始更改）。

简单的技巧是将父级绘制为控件背景。因此，您可以在 OnEraseBkgnd 中添加以下代码：

```
BOOL uiBarcodeButton::OnEraseBkgnd(CDC* pDC)
{
    CRect rect;
    GetClientRect(rect);

    return afxGlobalData.DrawParentBackground( this, pDC, rect);
} 
```

不确定 afxGlobalData 全局变量是否仅适用于 MFC 2008 Feature Pack。如果您使用的是以前版本的 MFC，则可以使用 DrawParentBackground 中的代码：

```
ASSERT_VALID(pDC);
ASSERT_VALID(pWnd);

BOOL bRes = FALSE;

CRgn rgn;
if (rectClip != NULL)
{
    rgn.CreateRectRgnIndirect(rectClip);
    pDC->SelectClipRgn(&rgn);
}

CWnd* pParent = pWnd->GetParent();
ASSERT_VALID(pParent);

// In Windows XP, we need to call DrawThemeParentBackground function to implement
// transparent controls
if (m_pfDrawThemeBackground != NULL)
{
    bRes = (*m_pfDrawThemeBackground)(pWnd->GetSafeHwnd(), pDC->GetSafeHdc(), rectClip) == S_OK;
}

if (!bRes)
{
    CPoint pt(0, 0);
    pWnd->MapWindowPoints(pParent, &pt, 1);
    pt = pDC->OffsetWindowOrg(pt.x, pt.y);

    bRes = (BOOL) pParent->SendMessage(WM_ERASEBKGND, (WPARAM)pDC->m_hDC);

    pDC->SetWindowOrg(pt.x, pt.y);
}

pDC->SelectClipRgn(NULL);

return bRes; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:07:45.450

您使用 WS_EX_LAYERED 和 UpdateLayeredWindow() API 来绘制您的窗口。请参阅[http://msdn.microsoft.com/en-us/library/ms997507.aspx](http://msdn.microsoft.com/en-us/library/ms997507.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T02:12:15.247

我为我的自定义静态控件使用了以下代码：

```
BOOL MyStaticText::OnEraseBkgnd(CDC* pDC)
{
    CRect rect;
    GetClientRect(&rect);
    pDC->SelectObject((HBRUSH)GetStockObject(NULL_BRUSH));
    return pDC->PatBlt(0, 0, rect.Width(), rect.Height(), PATCOPY); 
} 
```

# jquery - Primefaces jquery缓动（不是函数）错误

> ID：13684442
> 
> 赞同：0
> 
> 时间：2012-12-03T13:38:29.130
> 
> 标签：jquery, primefaces

我最近在 firebug 控制台中遇到以下错误：

```
TypeError: jQuery.easing[this.easing] is not a function 
```

这是**PickList**组件中的错误，当单击移动按钮或双击元素时（拖动实际上有效）。

我在各种论坛上发现这是页面上不止一个版本或 jquery 的问题，ev。类路径中的 primefaces.jar 副本不止一份，但这里都不是这种情况。

这是我的标题：

```
<head>
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
        <link href="/qmwebui/javax.faces.resource/theme.css.xhtml?ln=primefaces-qmui" rel="stylesheet" type="text/css">
        <link href="/qmwebui/javax.faces.resource/primefaces.css.xhtml?ln=primefaces" type="text/css" media="screen" rel="stylesheet">
        <script src="/qmwebui/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces" type="text/javascript">
        </script><script src="/qmwebui/javax.faces.resource/primefaces.js.xhtml?ln=primefaces" type="text/javascript">
        </script><script src="/qmwebui/javax.faces.resource/hotkey/hotkey.js.xhtml?ln=primefaces" type="text/javascript">
</head> 
```

**PrimeFaces** **3.4**版，服务器**Websphere 7.0**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:22:05.157

我遇到了同样的问题，花了很多时间来解决它。问题是我在选择列表中添加了 effect="none"，但这里不允许使用该值（这真的很愚蠢，因为在任何可以放置效果的地方都不允许使用 none）。没有效果属性一切正常。

# xml - 不知道为什么 XLS 电子表格在 Mac 上以 XML 格式打开

> ID：13684444
> 
> 赞同：1
> 
> 时间：2012-12-03T13:38:30.140
> 
> 标签：xml, xls

试图为客户解决问题。每当他们从我们的 web 应用程序导出 XLS 电子表格时，它就会打开以显示 XML。这不会发生在任何 Windows 机器上。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T06:19:26.677

许多库和程序在导出时实际上不会生成 XLS 文件。他们实际上只是生成一个 XML 文件并将其标记为 XLS。由于该文件将具有不同的幻数，因此非 Windows 操作系统不一定将其视为电子表格。

您可以切换库或写入 CSV 等格式。

# ruby-on-rails - Ruby on Rails - Bcyrpt 通过密码确认更新用户属性

> ID：13684446
> 
> 赞同：0
> 
> 时间：2012-12-03T13:38:33.890
> 
> 标签：ruby-on-rails, ruby, bcrypt

我想让用户有机会更新一些用户信息。现在只有姓名和电子邮件。用户需要输入当前密码来授权更新。我尝试了几种方法，归结为以下问题：

在更新用户属性之前，我调用了“validate_password”方法。

users_controller.rb：

```
def update
@user = User.find(params[:id])

respond_to do |format|
  if validate_password(params[:password]) && @user.update_attributes(params[:user])
    format.html { redirect_to @user, notice: 'Account was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @user.errors, status: :unprocessable_entity }
  end
end 
```

结尾

application_controller.rb：

```
 def validate_password(pswd)
if current_user.password_hash == BCrypt::Engine.hash_secret(pswd, current_user.password_salt)
  true
else
  false
end 
```

结尾

即使使用正确的密码“pswd”，它也会返回 false。我错过了什么吗？如果您知道正确的盐，您可以重新创建密码哈希吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:54:02.233

假设`current_user.password_hash`包含使用[`BCrypt::Password#create`](http://bcrypt-ruby.rubyforge.org/classes/BCrypt/Password.html), 而不是

```
current_user.password_hash == BCrypt::Engine.hash_secret(...) 
```

尝试

```
BCrypt::Password.new(current_user.password_hash) == passwd 
```

不要自己腌制。这是多余的，因为 BCrypt 已经进行了加盐。

朝着好的方向迈出的另一步是放弃手写身份验证并使用现有的、经过实战考验的解决方案，例如[Devise](https://stackoverflow.com/tags/devise/info)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:01:38.527

您还可以使用：

```
validates_presence_of :password, :on => :create 
```

这样，您将在更新时避免密码验证。

# java - 每次调用后不同的 Web 服务对象

> ID：13684449
> 
> 赞同：1
> 
> 时间：2012-12-03T13:38:46.560
> 
> 标签：java, web-services, jakarta-ee, soap

我是 Java EE 和 SOAP 的新手。我尝试创建一个简单的 Web 服务应用程序及其客户端（环境：NetBeans 7.2.1 IDE、GlassFish Server 3.1、Java 1.6）。

网络服务代码：

```
package simplews;

import javax.jws.*;

@WebService(serviceName = "SimpleWebService")
public class SimpleWebService {

    String something = null;

    @WebMethod(operationName = "setSomething")
    @Oneway
    public void setSomething(@WebParam(name = "smth") String smth) {
        something = smth;
    }

    @WebMethod(operationName = "getSomething")
    public String getSomething() {
        return something;
    }

} 
```

客户端应用代码：

```
package simpleclientapp;

import simplews.*;

public class SimpleClientApp {

    public static void main(String[] args) {

        SimpleWebService_Service service = new SimpleWebService_Service();
        SimpleWebService port = service.getSimpleWebServicePort();

        port.setSomething("trololo");
        String smth = port.getSomething();

        System.out.println(smth);
    }
} 
```

不幸的是，客户端应用程序打印出了`null`. 经过短暂的调查，我意识到，在服务器端`SimpleWebService`为每个客户端调用创建一个新对象（听起来像无状态方法）。

这里有什么问题？为什么每次调用的客户端端口不引用同一个 WS 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:06:51.893

[Web 服务本质上是无状态的](https://stackoverflow.com/questions/2312969/webservices-are-stateless)。为了保持请求之间的状态，您必须保留数据（在文件、数据库等中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:08:31.723

你是对的，JAX-WS Web 服务默认是无状态的，你不能依赖违反这个前提的东西。在存储这些值时采用不同的方法。如果您真的想按照帖子中的说明进行操作，可以阅读此文档[Java TM API for XML Web Services (JAX-WS) Stateful Web Service with JAX-WS RI 。](http://jax-ws.java.net/nonav/2.1/docs/statefulWebservice.html)

# java - 在 windows/linux 上使用 java 提取 CPU 使用率、内存使用率和网络使用率

> ID：13684451
> 
> 赞同：1
> 
> 时间：2012-12-03T13:38:47.010
> 
> 标签：java, performance, memory, cpu-usage, network-utilization

我正在尝试开发一个小型测试应用程序，该应用程序运行一些命令，每隔 X 秒测量一次 CPU 使用率、内存使用率和网络使用率，如 Windows 任务管理器中所示。该应用程序将用 java 编写，并且应该在 windows 和 linux 上运行。我发现很多人使用 Sigar API 来轻松提取系统信息。我发现了如何使用它来提取内存使用情况

```
 Mem mem = sigar.getMem();
 mem.getUsed(); 
```

我仍然不确定使用的内存和实际使用的内存之间有什么区别，有人可以详细说明一下吗？

此外，我仍然不确定如何提取 Cpu 使用情况和网络使用情况。对于 Cpu，我尝试过：

```
cpu = sigar.getCpuPerc();
cpu.getCombined(); 
```

但数字似乎与我在任务管理器中看到的非常不同。我应该使用哪个 API 来获得所需的结果？对于网络利用率，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:06:06.730

使用的内存是指分配的内存大小，实际使用的内存是分配的内存中实际使用的内存，它减少了一些内核和其他区域的内存。

对于 CPU，我还发现了不同的值，并看到一些博客建议乘以 100。所以我做了，现在值非常相似...... [http://code.google.com/p/starfire/源/浏览/主干/starfire/src/main/java/es/upm/dit/gsi/starfire/capability/systemMonitor/CpuMonitor.java?spec=svn279&r=279](http://code.google.com/p/starfire/source/browse/trunk/starfire/src/main/java/es/upm/dit/gsi/starfire/capability/systemMonitor/CpuMonitor.java?spec=svn279&r=279)

网络我还在寻找。

# php - 在 WordPress 中运行主题激活功能

> ID：13684455
> 
> 赞同：4
> 
> 时间：2012-12-03T13:39:01.073
> 
> 标签：php, wordpress, wordpress-theming

我正在尝试使用钩子在主题激活时设置图像大小，`after_setup_theme`但它似乎从未真正被调用过。为什么？

```
if( !function_exists('theme_image_size_setup') )
{
    function theme_image_size_setup()
    {
        //Setting thumbnail size
        update_option('thumbnail_size_w', 200);
        update_option('thumbnail_size_h', 200);
        update_option('thumbnail_crop', 1);
        //Setting medium size
        update_option('medium_size_w', 400);
        update_option('medium_size_h', 9999);
        //Setting large size
        update_option('large_size_w', 800);
        update_option('large_size_h', 9999);
    }
}
add_action( 'after_setup_theme ', 'theme_image_size_setup' ); 
```

相反，我做了一个解决方案，但如果有一个钩子，它不会感觉最佳：

```
if ( is_admin() && isset($_GET['activated'] ) && $pagenow == 'themes.php' ) {
    theme_image_size_setup();
} 
```

这行得通...但是为什么没有响应`after_setup_theme`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-11T19:06:34.950

这只会在您的主题从另一个主题切换到时运行。这是最接近主题激活的方法：

```
add_action("after_switch_theme", "mytheme_do_something"); 
```

或者，您可以在 wp_options 表中保存一个选项，并在每次页面加载时检查该选项，尽管这对我来说似乎效率低下，但很多人都建议这样做：

```
function wp_register_theme_activation_hook($code, $function) {  
    $optionKey="theme_is_activated_" . $code;
    if(!get_option($optionKey)) {
        call_user_func($function);
        update_option($optionKey , 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T13:56:38.327

也许问题可能是你在这个字符串中有额外的空间`'after_setup_theme '`。
试试这样：

```
add_action( 'after_setup_theme', 'theme_image_size_setup' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T07:04:34.383

每次加载页面时都会运行**after_setup_theme**。所以它不是更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T15:26:27.337

在 WPMU 环境中使用 WP 3.9，有一个名为 switch_theme 的动作，它被称为你切换主题的一切。

调用此操作时，将传递以下 $_GET 参数：action=activate, stylesheet=

我在 mu-plugins/theme-activation-hook.php 中创建了一个新文件

```
add_action('switch_theme','rms_switch_theme');
function rms_switch_theme($new_name, $new_theme='') {
    if (isset($_GET['action']) && $_GET['action'] == 'activate') {
        if (isset($_GET['stylesheet']) && $_GET['stylesheet'] == 'rms') {
            // perform the theme switch processing,
            // I echo the globals and immediately exit as WP will do redirects 
            // and will not see any debugging output on the browser.
            echo '<pre>'; print_r($GLOBALS); echo '</pre>'; exit;
        }
    } 
} 
```

# sql - 使用 VBA 更改美国日期从 Excel 插入 Access 数据库的日期

> ID：13684457
> 
> 赞同：0
> 
> 时间：2012-12-03T13:39:03.770
> 
> 标签：sql, excel, vba, date, ms-access

因此，我使用 VBA 生成的查询将 Excel 电子表格中的一组记录插入到 Access 数据库中。

我的查询基本上是这样的：

```
accName = r.Offset(x, 0)
AccNum = r.Offset(x, 1)
sector = r.Offset(x, 2)
holding = r.Offset(x, 3)
holdingvalue = r.Offset(x, 4)
holdingdate = CDate(r.Offset(x, 5))

sSQL = "INSERT INTO Holdings (AccName, AccNum, Sector, Holding, HoldingValue, HoldingDate)" & _
" VALUES ('" & Replace(accName, "'", "''") & "', '" & AccNum & "', '" & sector & "', '" & Replace(holding, "'", "''") & "', '" & holdingvalue & "', #" & holdingdate & "#)" 
```

生成的查询示例如下所示：

```
INSERT INTO Holdings (AccName, AccNum, Sector, Holding, HoldingValue, HoldingDate) 
VALUES ('Account 123', '472700', '', 'IShares S&P 500', '54379.15', #03/12/2012#) 
```

错误功能位是查询中的日期已从英国日期 (dd/mm/yyyy) 变为美国日期 (mm/dd/yyyy)。我还尝试将电子表格上的日期格式化为 ISO 日期（yyyy-mm-dd），但始终作为美国日期，即使我不使用 cdate。知道这里发生了什么吗？

编辑：当我单步执行代码并将鼠标悬停在`holdingdate`变量上时，它显示“03/12/2012”并且查询与上面相同（即日期为 dd/mm/yyy 格式，尽管我将holdingdate定义为`holdingdate = Format(r.Offset(x, 5), "yyyy-mm-dd")`。单元格中的日期也是连续的（即显示为数字时为 41246）。当我在输入数据后查看 access 数据库时，日期显示为 12/03/2012。我只是不明白... .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:34:18.380

解决了！我以前将holddate 调暗为日期，所以无论我给它什么格式，它只是返回一个excel 日期。将其更改为`Dim holdingdate as string`已解决问题，并且日期现在作为字符串传递，Access 可以愉快地吃掉担心美国/英国日期的问题。

# oauth2-playground - 通过cURL的命令行获取授权码

> ID：13684464
> 
> 赞同：2
> 
> 时间：2012-12-03T13:39:23.273
> 
> 标签：oauth2-playground

对于使用 Google 日历 API 的应用程序，我找不到通过 cURL 命令行获取 OAuth 2.0 授权代码的方法。有人知道怎么做吗？感谢所有的答案。

# java - 从 Runnable 返回一个值

> ID：13684468
> 
> 赞同：60
> 
> 时间：2012-12-03T13:39:39.197
> 
> 标签：java, runnable

的`run`方法`Runnable`有返回类型`void`，不能返回值。但是，我想知道是否有任何解决方法。

我有这样的方法：

```
public class Endpoint {
    public method() {
       Runnable runcls = new RunnableClass();
       runcls.run()
    }
} 
```

方法`run`是这样的：

```
public class RunnableClass implements Runnable {

    public JaxbResponse response;

    public void run() {
        int id = inputProxy.input(chain);
        response = outputProxy.input();
    }
} 
```

我想`response`访问`method`. 这可能吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-03T13:42:56.800

使用`Callable<V>`而不是使用`Runnable`接口。

例子：

```
public static void main(String args[]) throws Exception {
    ExecutorService pool = Executors.newFixedThreadPool(3);
    Set<Future<Integer>> set = new HashSet<>();

    for (String word : args) {
      Callable<Integer> callable = new WordLengthCallable(word);
      Future<Integer> future = pool.submit(callable);
      set.add(future);
    }

    int sum = 0;
    for (Future<Integer> future : set) {
      sum += future.get();
    }

    System.out.printf("The sum of lengths is %s%n", sum);
    System.exit(sum);
} 
```

在此示例中，您还需要实现`WordLengthCallable`实现`Callable`接口的类。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-03T13:47:48.580

```
public void check() {
    ExecutorService executor = Executors.newSingleThreadExecutor();
    Future<Integer> result = executor.submit(new Callable<Integer>() {
        public Integer call() throws Exception {
            return 10;
        }
    });

    try {
        int returnValue = result.get();
    } catch (Exception exception) {
       //handle exception
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-03T13:42:38.080

看看[Callable](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)类。这通常通过[executor 服务提交](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

它可以返回一个future对象，该对象在线程完成时返回

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-11-04T06:35:20.187

是的，有解决方法。只需使用队列并将您想要返回的值放入其中。并从另一个线程中获取这个值。

```
public class RunnableClass implements Runnable{

        private final BlockingQueue<jaxbResponse> queue;

        public RunnableClass(BlockingQueue<jaxbResponse> queue) {
            this.queue = queue;
        }

        public void run() {
            int id;
            id =inputProxy.input(chain);
            queue.put(outputProxy.input());
        }
    }

    public class Endpoint{
        public method_(){
            BlockingQueue<jaxbResponse> queue = new LinkedBlockingQueue<>();

            RunnableClass runcls = new RunnableClass(queue);
            runcls.run()

            jaxbResponse response = queue.take(); // waits until takes value from queue
        }
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-03T13:46:03.910

如果您添加一个字段，`RunnableClass`您可以将其设置`run`并读取`method_`。但是，`Runnable`它是一个糟糕的（Java 关键字）`interface`，因为它没有告诉您有关（概念）接口的任何信息（API 文档中唯一有用的一行：“该方法的一般约定`run`是它可以采取任何行动。”）。使用更有意义的界面（可能会返回一些东西）要好得多。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-08T14:38:28.220

一种方法是，我们必须使用`Future - Callable`方法。

另一种方法是，您可以保存在对象中，而不是返回值

例子：

```
class MainThread {
    public void startMyThread() {
        Object requiredObject = new Object(); //Map/List/OwnClass
        Thread myThread = new Thread(new RunnableObject(requiredObject)).start();
        myThread.join();

        System.out.println(requiredObject.getRequiredValue());    
    }
}

class RunnableObject implements Runnable {
    private Object requiredObject;

    public RunnableObject(Object requiredObject) {
        this.requiredObject = requiredObject;
    }

    public void run() {
        requiredObject.setRequiredValue(xxxxx);
    }
} 
```

因为对象范围在同一个范围内，所以您可以将对象传递给线程并可以在主范围内检索。但是，最重要的是，我们必须使用 join() 方法。因为主作用域应该等待线程完成其任务。

对于多线程情况，您可以使用`List`/`Map`来保存线程中的值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-05T17:42:39.707

尝试以下

```
public abstract class ReturnRunnable<T> implements Runnable {

    public abstract T runForResult();

    @Override
    public void run() {
        runForResult();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-03T13:43:58.453

看看[callable interface](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)，也许这适合您的需求。您还可以尝试通过在方法中调用 setter-method 来获取响应字段的`run()`值

```
public void run() {
    int id;
    id =inputProxy.input(chain);
    response = outputProxy.input();
    OuterClass.setResponseData(response);

} 
```

# asp.net - Sys.WebForms.PageRequestManager.getInstance() 在 IE 10 和 Windows 8 中不支持

> ID：13684471
> 
> 赞同：3
> 
> 时间：2012-12-03T13:39:46.870
> 
> 标签：asp.net, windows-8, asp.net-ajax, internet-explorer-10, pagerequestmanager

我在 Windows 8 的 IE 10 上的应用程序中遇到了一些 asp.net ajax 问题。但它在 IE 10 的兼容模式下运行正常。

[**您可以在此处**](http://www.usrentacar.co.uk/DefaultIE10.aspx)查看我的现场演示，它在所有浏览器而不是 IE 10 中都可以正常工作（在 Windows 7 上的 IE9 中也可以正常工作）。

不知道是什么原因？

在我的页面上，我正在注册此活动：-

```
var prm = Sys.WebForms.PageRequestManager.getInstance();

prm.add_endRequest(function() {
   page_Load();
});

$().ready(function() { page_Load(); });

function page_Load() {
    //my code for onload registration goes here(it all working fine)
} 
```

请帮我。此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:08:54.880

而不是`Sys.WebForms.PageRequestManager.getInstance();`你可以尝试 jQuery [.on()](http://api.jquery.com/on/)方法。

例如。：

```
$('html').on('click', '.selector', function () {
    page_Load();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T07:02:13.617

服务器可能无法将 Internet Explorer 10 识别为支持 JavaScript 的 Web 浏览器。运行 Windows 更新为我解决了这些问题。

如果您无法更新您的服务器，您可以尝试在 app_browser 文件夹中添加/修改您的 ie.browser。

> 如果您无权访问整台计算机和/或只想更新单个项目，请使用 NuGet 安装 App_BrowsersUpdate 包。您在解决方案资源管理器中的站点结构将类似于右图。请注意，NuGet 使用 .NET 4，因此对于只有 .NET 2 的系统，您需要获取 ZIP 文件并将新的浏览器文件手动放入 App_Browsers。
> 
> .NET 4 浏览器更新 NuGet 包 - [http://nuget.org/List/Packages/App_BrowsersUpdate](http://nuget.org/List/Packages/App_BrowsersUpdate) install-package App_BrowsersUpdate .NET 2.0 浏览器更新 NuGet 包 - [http://nuget.org/List/Packages/App_BrowsersUpdate.net20](http://nuget.org/List/Packages/App_BrowsersUpdate.net20) install-包 App_BrowsersUpdate.net20 请注意，NuGet 是 VS2010 特定的，因此如果您没有 nuget.exe 和 .NET 4，您还可以从该 zip 文件手动将 .NET 2 更新的浏览器文件复制到 ~\App_Browsers 中。更新整台机器是解决此问题的首选方法。

*   [报价来源](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# android - 使用手机 android 上的本地化设置确定应用程序可绘制语言

> ID：13684475
> 
> 赞同：0
> 
> 时间：2012-12-03T13:40:07.773
> 
> 标签：android, localization

我正在使用 android 本地化来确定要从 drawable 中显示的图片。我创建了一个可绘制的floder，如下所示

用于法语的 hdpi

可绘制的-fr-hdpi

hdpi 英文

可绘制的-fr-hdpi

是否正确，因为图像仅使用默认值显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:57:24.410

将此代码用于设备选择的语言。

```
locale = Locale.getDefault(); 
```

# javascript - Internet Explorer 中的拼写检查

> ID：13684477
> 
> 赞同：1
> 
> 时间：2012-12-03T13:40:10.313
> 
> 标签：javascript, internet-explorer, spell-checking

我想在基于 Web 的应用程序中写博客/内容时检查拼写。几乎没有相同的 javascript 插件，但它们都没有在 Internet Explorer 上工作（直到 IE 9），那么如何在 IE 中实现拼写检查？是否可以使用 HTML/javascript 检查文本框中的拼写？如果有办法做到这一点，那么您能否提供一些链接或示例代码？

# r - 具有 sapply 和 htest 类的 Hmisc::latex 生成许多表

> ID：13684482
> 
> 赞同：-1
> 
> 时间：2012-12-03T13:40:23.890
> 
> 标签：r, latex, hmisc

我无法获得具有`Hmisc::latex`和`sapply`功能的表格。`latex`返回许多表。我想使用 a`Hmisc::latex`因为它更灵活的可配置性。

重现问题的步骤：

```
library(xtable)
library(Hmisc)
library(nortest)
set.seed(1)
x <- matrix(rnorm(10*100), nrow=100)
norm.x <- sapply(x, sf.test)[1:2,]
latex(norm.x, file="", dec=2)
xtable(norm.x) # In contrast xtable produce pretty output 
```

**编辑：**

解决方案（感谢 Sven Hohenstein）：

```
library(Hmisc)
library(nortest)
set.seed(1)
x <- matrix(rnorm(10*100), nrow=100)
norm.x <- sapply(x, function(z) unlist(sf.test(z)[c("statistic", "p.value")]))
latex(norm.x, file="", dec=2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:53:22.250

您可以使用函数和修改`norm.x`返回的对象。`sapply(x, sf.test)[1:2,]``unlist``matrix`

```
norm.x <- matrix(unlist(norm.x), nrow = 2, dimnames = list(c("w", "p-value"))) 
```

* * *

完整代码：

```
library("xtable")
library("Hmisc")
library("nortest")
set.seed(1)
x <- data.frame(replicate(10, rnorm(100)))
norm.x <- sapply(x, sf.test)[1:2,]
norm.x <- matrix(unlist(norm.x), nrow = 2, dimnames = list(c("w", "p-value")))
latex(norm.x, file="", dec=2)
xtable(norm.x) 
```

# c# - HttpNotFoundResult 导致抛出 HttpException？

> ID：13684488
> 
> 赞同：2
> 
> 时间：2012-12-03T13:40:46.067
> 
> 标签：c#, asp.net, asp.net-mvc

出于测试目的，我有这个方法：

```
public ActionResult Index()
{
    System.Diagnostics.Debug.Write("Index");
    return new HttpNotFoundResult();
} 
```

正在调用该方法（输出“索引”）。不知何故，它导致 a`HttpException`被抛出。在我的 Global.asax 文件中，我有一个`Application_Error`实现：

```
void Application_Error(object sender, EventArgs e)
{
    Exception exc = Server.GetLastError();
    if (exc is System.Web.HttpException)
    {
        string msg = "UrlReferrer: "
            + Context.Request.UrlReferrer + " UserAgent: " + Context.Request.UserAgent
            + " UserHostAddress: " + Context.Request.UserHostAddress + " UserHostName: "
            + Context.Request.UserHostName;

        ErrorHandler.Error(exc.Message, msg);
    }
    else {
        ...
    }
} 
```

在系统处理完请求后调用此方法`Index`。我认为`HttpNotFoundResult`导致异常被抛出的原因 - 或者可能是任何`ActionResult`状态码为 404 的异常被抛出。

这很烦人，因为它绕过了`OnException`我的控制器上的处理程序。对于我的网站，`Application_Error`应该是最后的回退 - 大多数正常错误都打算在其他地方处理（由控制器或动作过滤器）。我只想`Application_Error`记录完全意外的异常，或者图像或 .js 文件之类的 404。

有没有办法阻止 asp.net 为程序生成的 404 引发异常？或者，有没有办法确定`Application_Error`是否`HttpException`是由程序生成的 404 引起的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:38:22.603

您可以创建一个自定义异常过滤器来处理所有操作引发的 404 异常。您可以使用`HttpContext.Items`集合来跟踪它是否是程序引发的 404。

**自定义异常过滤器**

```
public class NotFoundExceptionFilter : IExceptionFilter
{        
    public void OnException(ExceptionContext filterContext)
    {
        // ignore if the exception is already handled or not a 404
        if (filterContext.ExceptionHandled || new HttpException(null, filterContext.Exception).GetHttpCode() != 404)
            return;

        filterContext.HttpContext.Items.Add("Programmatic404", true);
        filterContext.ExceptionHandled = true;
    }
} 
```

您需要申请`NotFoundExceptionFilter`为全局过滤器。

**Application_Error 事件**

```
public static void Application_Error(object sender, EventArgs e)
{
    var httpContext = ((MvcApplication)sender).Context;

    // ignore if it is a programatically raised 404
    if(httpContext.Items["Programmatic404"] != null && bool.Parse(httpContext.Items["Programmatic404"].ToString()))
        return;

    // else, Log the exception
} 
```

# perl - 不能在 Perl RPC::Serialized::Server::NetServer::Single 创建的套接字中使用子例程名称

> ID：13684489
> 
> 赞同：2
> 
> 时间：2012-12-03T13:40:56.450
> 
> 标签：perl, serversocket

我想使用 Perl 模块并将其包装到一个独立的套接字中，该套接字会将子例程从模块发布到其他程序。但是，我可能无法克服命名空间问题，因为在客户端脚本中，我仍然收到一条错误消息： RPC::Serialized::X::Application\',\'MESSAGE\' => \'No handler for 'predejPOS ' .

我的服务器脚本：

```
use RPC::Serialized::Server::NetServer::Single;
use RPC::Serialized::Handler::HashTree;

my $s = RPC::Serialized::Server::NetServer::Single->new({
    net_server => {log_file => '', port => 20203 },
    rpc_serialized => {handler_namespaces => ''},
});

$s->run; 
```

我的客户端脚本：

```
use RPC::Serialized::Client::INET;

my $client = RPC::Serialized::Client::INET->new({
  io_socket_inet => {PeerAddr  => '127.0.0.1', PeerPort => 20203,}
});

my $result = $client->predejPOS('flu-like'); 
```

我的模块（HastTree.pm）：

```
package  RPC::Serialized::Handler::HashTree;

require Exporter;
@ISA = qw(Exporter);
@EXPORT = qw(predejPOS);

use base 'RPC::Serialized::Handler';

our $VERSION = '0.01';

sub predejPOS {
  my %POS;
  $POS{'flu-like'}='<JJ>';
  return $POS{$_[0]};
};

1; 
```

我使用的是 Windows 7，Strawberry Perl 5.12.3，并且模块位于正确的地址 (C:\PROGS\Strawberry\perl\site\lib\RPC\Serialized\Handler)。函数 predejPOS 在服务器脚本中被识别（即我可以从中打印它的结果），但我无法通过客户端-服务器通信访问它。我认为这与调用函数和调用方法之间的细微差别有关。恐怕这可能很简单，但即使经过大量的努力和谷歌搜索，我也无法让它发挥作用。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:36:13.207

好吧，我最终自己解决了它：

首先，我完全误解了调用函数的概念——通过网络你只能调用所谓的**RPC 处理程序**。此外，对于每个处理程序，在 RPC::Serialized::Handler 目录中必须有一个具有相同名称和特定结构的模块，其中只有一个名为 invoke() 的子例程。因此，我将模块（现在命名为“PredejPOS.pm”）更改为：

```
package RPC::Serialized::Handler::PredejPOS;
{
  $RPC::Serialized::Handler::PredejPOS::VERSION = '0.01';
}

use strict;
use warnings FATAL => 'all';

use base 'RPC::Serialized::Handler';

sub invoke {
    my $self = shift;
    my $key = shift;

    my %POS;
    $POS{'flu-like'}='<JJ>';

    return scalar $POS{$key};
}

1; 
```

但它仍然无法正常工作。最后其次我发现在Windows环境下，Perl Data::Serialize模块不能正常工作。在包 Serialized.pm 的子程序 recv（第 115 行）中，chomp 不会删除该死的 Windows 行结尾“\cM”。当我纠正它时，它开始按预期工作。实际上这里有一个关于这种行为的冗长讨论（[http://www.perlmonks.org/?node_id=549385](http://www.perlmonks.org/?node_id=549385)）

感谢您的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:50:33.153

对于对象方法，第一个参数始终是当前对象实例本身。抱歉，如果我不够清楚，请尝试找出与此示例的区别：

尝试这个：

```
sub predejPOS {
  my $self = shift; 
  my $key  = shift; 
  my %POS;
  $POS{'flu-like'}='<JJ>';
  return $POS{$key};
}; 
```

# android - 使用什么数据持久化方法？

> ID：13684491
> 
> 赞同：0
> 
> 时间：2012-12-03T13:41:06.150
> 
> 标签：android, mysql, jpa, amazon-ec2, jax-rs

我正在制作一个 android 应用程序，它将从远程 MySQL 数据库中检索一些信息。我将使用使用 JAX-RS 的 restful java web 服务，它将与 MySQL DB 交互以从表中检索数据。我知道为了与底层数据库交互，可以使用 JPA 的一些实现。但是因为我只需要从数据库中检索数据，而不是使用我的 android 应用程序（作为客户端）插入任何新数据。

那么我真的需要实现 JPA 吗？如果没有，我应该如何让我的 java web 服务从 MySQL 数据库中获取数据？

我的数据库安装在运行 apache tomcat 7 的 Amazon ec2-instance 上。最好的方法是什么？如果您可以向我推荐一些好的教程，请这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:04:35.970

您只需一个下午就可以使用包含零封送代码且没有添加库的极其简单的应用程序......如果您选择了正确的部分。

似乎有一种普遍的想法，即如果应用程序“太小”，则应避免使用某些技术。事实是，即使这些小型应用程序*确实*使用了正确的技术，它们也会变得**更小。**

 *我建议使用 JAX-RS 和 JPA 并使用 Tomcat 的 EE 版本（[TomEE](http://tomee.apache.org)）。

我在 TomEE 上工作，但阅读您的要求——尤其是 EC2 部分——我只需要提一下。TomEE 基本上是 Tomcat，添加了额外的库并在 EC2 （t1.micros 和更高版本）上获得了 Java EE 6 Web Profile[认证。](http://www.oracle.com/technetwork/java/javaee/community/tomee-jee6-tested-config-512329.html)它相当小，只需默认内存设置即可通过 TCK。这意味着即使有一个 613MB 内存的小型 t1.micro，服务器也只占用了其中的一小部分。

这是一个可以`Movie`从数据库读取/写入对象的 JAX-RS 应用程序。它由两个java文件和一个xml文件组成。没有添加库。

## 电影.java

我们的`Movie`对象可以表示 JSON 数据*和*数据库数据，因此我们不需要对 JSON 数据或数据库数据进行任何封送处理。这一切都是为我们处理的。

```
package org.stackoverflow;

import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@XmlRootElement(name = "movie")
public class Movie {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    private String director;
    private String title;
    private int year;

    public Movie() {
    }

    public Movie(String director, String title, int year) {
        this.setDirector(director);
        this.setTitle(title);
        this.setYear(year);
    }

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getDirector() {
        return director;
    }

    public void setDirector(String director) {
        this.director = director;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public int getYear() {
        return year;
    }

    public void setYear(int year) {
        this.year = year;
    }
} 
```

## 电影.java

这里我们有一个简单的 RESTful 服务，可以`GET`和`POST`电影。

```
package org.stackoverflow;

import javax.ejb.*;
import javax.persistence.*;
import javax.ws.rs.*;
import javax.ws.rs.core.*;

@Path("/rest/movies")
@Produces(MediaType.APPLICATION_JSON)
@Singleton
@Lock(LockType.READ)
public class Movies {

    @PersistenceContext
    private EntityManager entityManager;

    @GET
    @Path("/{id}")
    public Movie getMovie(@PathParam("id") Long id) {
        return entityManager.find(Movie.class, id);
    }

    @POST
    public void addMovie(Movie movie) {
        entityManager.persist(movie);
    }
} 
```

## 持久性.xml

为了驱动它，我们只需要一个简单的`WEB-INF/persistence.xml`文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">

  <persistence-unit name="unit">
    <jta-data-source>movieDatabase</jta-data-source>
    <properties>
      <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)"/>
    </properties>
  </persistence-unit>

</persistence> 
```

关于上面的一个有趣的事情是，`openjpa.jdbc.SynchronizeMappings`如果它们不存在，它将导致 JPA 提供程序（在本例中为 OpenJPA）为我们创建所有数据库表。

## 完毕

信不信由你，就是这样。这个应用程序有效。让我们看一下战争文件的内容，这样我们就可以全面了解战争中的所有内容和不存在的内容。

```
demo.war
demo.war/META-INF
demo.war/META-INF/MANIFEST.MF
demo.war/WEB-INF
demo.war/WEB-INF/classes
demo.war/WEB-INF/classes/org
demo.war/WEB-INF/classes/org/stackoverflow
demo.war/WEB-INF/classes/org/stackoverflow/Movie.class
demo.war/WEB-INF/classes/org/stackoverflow/Movies.class
demo.war/WEB-INF/lib
demo.war/WEB-INF/persistence.xml 
```

基本上 3 个文件，`Movies.class`, `Movie.class`, 和`persistence.xml`

## 试驾

我们将使用`curl`它，因为它很容易。我们将创建一个名为`mymovie.txt`以下内​​容的小文件：

```
{
    "movie":{
       "director":"David Dobkin",
       "title":"Wedding Crashers",
       "year":2005
    }
 } 
```

然后我们可以通过将它发布到服务器来添加该电影：

```
$ curl -v -H "Content-Type: application/json" -X POST -d "@mymovie.txt" http://localhost:8080/demo/rest/movies
* About to connect() to localhost port 8080 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to localhost (127.0.0.1) port 8080 (#0)
> POST /demo/rest/movies HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost:8080
> Accept: */*
> Content-Type: application/json
> Content-Length: 106
> 
* upload completely sent off: 106 out of 106 bytes
< HTTP/1.1 204 No Content
< Server: Apache-Coyote/1.1
< Date: Mon, 03 Dec 2012 21:12:23 GMT
< 
* Connection #0 to host localhost left intact
* Closing connection #0 
```

现在我们可以通过一个简单的命令轻松获取电影：

```
$ curl http://localhost:8080/demo/rest/movies/1
{"movie":[{"director":"David Dobkin","id":1,"title":"Wedding Crashers","year":2005}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:45:26.897

如果它是您从描述中需要的一组相当小的数据，则您不需要为此解决方案实施 JPA。您可以构建一个 RESTful Web 服务，只要调用它就对数据库执行简单的 JDBC 查询。

REST 请求进入 - 被 Web 服务询问 - Web 服务获取数据 - 从 Tomcat 返回 XML / JSON 响应。另外 - 由于您使用的是 Tomcat 而不是应用程序服务器，如果您确实想走 JPA 路线，我会推荐 Hibernate，因为如果没有 JBoss 等应用程序服务器，您将无法使用 EJB。即使那样，除非它是一个大型系统，否则只有一个运行一些 JDBC 的 Tomcat 实例应该可以正常工作，尤其是在 EC2 中。*

# android - 在活动堆栈上设置一个活动

> ID：13684499
> 
> 赞同：2
> 
> 时间：2012-12-03T13:41:39.140
> 
> 标签：android

我想将我新创建的活动设置为堆栈中唯一的一个并且也在它的顶部，所以当从 A 创建活动 B 时，我可以按返回从 B 返回主菜单。

因此，这就是我所做的

```
public void onClick(View v) {
    Intent i = new Intent(this,B.class);

    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(i);

} 
```

出于某种原因，在活动 B 开始后，按返回仍然会将我带到 A。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:27:44.130

这样做

```
public void onClick(View v) {
Intent i = new Intent(this,B.class);

i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(i);
finish(); // to end the current activity
} 
```

在 startactivity(...) 之后调用**finish(** )，这样`A activity ll removed from the stack`. 当您按下后退按钮时，堆栈中将不存在活动**。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:45:47.107

在活动 A 中调用 startActivity(i) 后，必须调用 finish(); - 完成活动。然后按回来不会带你到A！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:46:27.093

更改清单中的活动：

```
 <activity
            android:name=".ActivityA"
              android:noHistory="true"
 >
        </activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:46:28.047

这对我有用，我也用它：

```
Intent myIntent = new Intent(this, b.class);
myIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivityForResult(myIntent, 0); 
```

# java - java中将大量文件排序成层次树结构

> ID：13684500
> 
> 赞同：4
> 
> 时间：2012-12-03T13:41:39.880
> 
> 标签：java, xml, user-interface, data-structures

我有大量文件（几千个 XML 文件），我需要在 java 中编写一个 GUI，根据每个文件的 XML 数据中的“类别”元素将这些文件排序为树结构。该程序可能每天运行多次，并且每天也可能对这些文件进行小的更改/添加。

**如何在应用程序的后续执行期间以最小化加载时间的方式保存此排序结构？**不幸的是，该程序将处理 USB 硬盘驱动器上的文件，因此我试图避免在每次运行应用程序时解析每个 XML 文档以构建此树。

例如，每个 XML 文件可能有多个属性（即“Person”的值为“Fred”，“Organization”的值为“Google”），我希望允许用户选择文件组基于 GUI 中的这些类别值。

提前感谢您的任何和所有帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:44:40.883

好的，这就是你需要做的。

1.  创建将存储文件名和相关 XML 树结构数据的 SQL 数据库。
    *   [MySQL](http://www.mysql.com/)是一个不错的免费选择。
2.  当应用程序启动时，让它扫描目录中的文件名并与数据库的文件名列表进行比较。
    *   应解析任何未编入索引的名称并将其添加到数据库中。
    *   生成一个新线程来遍历这些未索引的文件并处理它们，因此用户不会看到任何滞后。
3.  在应用程序上包含一个名为“重新创建缓存”的按钮。
    *   留下警告“仅在文件更改时按此按钮”或其他内容
    *   让用户告诉您的应用程序何时旧文件已更改，因为它几乎从未发生过。

作为选项 2/3 的替代方案，您可以这样做：

1.  创建守护程序任务
    *   这将是一个单独的程序，用于维护数据库
    *   让它监视对 XML 目录的更改并适当地更新数据库。
    *   它还可以定期检查对其他文件的更改，可能每天凌晨 2 点检查一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:54:20.830

不要在每次必须显示时一次又一次地读取和解析每个文件。您可以以其他格式存储 XML 文件中的数据，从而实现快速高效的读取。最适合的格式是关系数据库。

所以这是你需要做的：

1.  安装 SQL 引擎。我不是许可方面的专家，但 MySQL 应该可以满足您的需求，而且它是免费的。创建一个包含与您的 XML 文件结构相匹配的列的表。
2.  编写一个监视文件系统更改的系统服务（您可以使用 .NET 中的 FileSystemWatcher）。您可以使用 Java 而不是 C#，但是您必须通过定期轮询来实现它。
3.  每次发生更改时，服务都会获取文件并将其发送到 SQL 数据库。在那里，您可以通过 SELECT ExtractValue(xml) 轻松解析文件。获取数据后，将它们作为插入（新文件）或更新（已编辑文件）提交到表中。
4.  每次您需要将文件加载到树中时，您在数据库上运行一个简单的 SELECT 语句，以您需要的结构返回数据。

# chef-infra - 刀命令验证失败

> ID：13684501
> 
> 赞同：1
> 
> 时间：2012-12-03T13:41:43.467
> 
> 标签：chef-infra, knife

我创建了如下设置，为此我使用的是 Amazon EC2：

我安装了 Chef 服务器并配置了刀的 ubuntu 服务器 12.04 ion。这工作得很好，我能够运行刀命令，它给了我预期的结果。

另一个类似的 ubuntu 服务器，我正在尝试将其用作厨师客户端。安装厨师并配置客户端。另外，在客户端上安装了刀。我知道这是正确安装的，因为安装后我运行了命令

```
knife --version 
```

我得到了输出

```
Chef: 10.16.2 
```

现在我已经配置了knife.rb 文件。内容如下： log_level :info log_location STDOUT node_name 'knife' cache_type 'BasicFile' cache_options( :path => "~/.chef/checksums" ) client_key '~/.chef/clientkey.pem'

```
cookbook_path       [ "~/mychefrepo/cookbooks" ]
cookbook_copyright "example org"
cookbook_email     "cookbooks@example.net"
cookbook_license   "apachev2"

chef_server_url    "http://ip-11-213-23-99:4000"

validation_key      "~/.chef/validation.pem" 
```

配置后如果我运行刀命令

```
knife client list 
```

我收到以下错误：

> 错误：无法使用密钥 /etc/chef/clientkeys.pem 作为 client1对[http://ip-11-213-23-99:4000进行身份验证](http://ip-11-213-23-99:4000)

我想请你澄清我的以下疑虑：

1.  是否也必须将 clientkey.pem 保留在厨师服务器上？如果是，那么在什么位置？
2.  我需要将pem文件保存在厨师客户端上的任何特定位置吗？
3.  我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:40:22.773

您的客户适当地存在于厨师服务器上吗？我相信它将被称为“刀”，因为这是您的节点名称。

```
http://ip-11-213-23-99:4040/clients 
```

客户端 pem 密钥确实已在服务器上注册，您可以通过 server-webui 转到服务器上的客户端选项卡来查看。密钥存储在 CouchDB 中。当您使用服务器执行 chef-client 运行时，此值会出现在此处。

提供的 pem 键的值必须与您提供的“node_name”的客户端视图中显示的存储 pem 匹配。是这样吗？

客户端密钥本身可以存储在任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T06:06:24.110

当您从服务器引导客户端时，它会在那里创建 client.pem。甚至当您在客户端本身上运行 chef-client 时，它也会创建 client.pem。您需要在服务器节点上复制此文件。同样，您必须提供到 /chef-repo/.chef 中可用的 knife.rb 的路径

1.  是的，复制它是必要的。
2.  服务器节点上的任何地方，但唯一的问题是您必须在 knife.rb 中提供该位置

# jquery - 每个文本链接启动完美灯箱画廊

> ID：13684502
> 
> 赞同：0
> 
> 时间：2012-12-03T13:41:46.820
> 
> 标签：jquery, lightbox, typo3

我现在有另一个typo3/jquery 问题，扩展perfectlightbox。

我想用文本链接打开我的图片库（`rel="lightbox[lb5]"`带有 的几张图片）。画廊应该从第一张图片开始，这就是我的文本链接

```
<a href="/uploads/pics/image_01.jpg" rel="lightbox[lb5]">more images &gt;</a> 
```

问题是，第一张图片现在在画廊中出现了两次。

ps：目前有perfectlightbox参考的服务器已经宕机，所以我看不到那里。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:30:17.183

找到了一个解决方案，无论如何，这是我的解决方案：我在我的文本链接上调用了一个函数，它模拟了对图像的点击：

```
$('a[rel="lightbox[lb' + no + ']"]').first().trigger("click"); 
```

# asp.net-mvc - Linq 不想合作 - DbExpressionBinding 错误

> ID：13684504
> 
> 赞同：0
> 
> 时间：2012-12-03T13:41:50.287
> 
> 标签：asp.net-mvc, linq, entity-framework, ef-code-first

我正在尝试从我的数据库中获取一些东西，我需要它是这样的：

```
var tribunalCase = context.TribunalCases.Where(c => c.Voters.Any(v => v.Voter.UserName == User.Identity.Name))
                    .Select(c => c)
                    .ToList(); 
```

但是，当我尝试使用 .Any() 或 .All() 时，它会崩溃。我收到以下错误：

> DbExpressionBinding 需要一个带有集合 ResultType 的输入表达式。参数名称：输入

这是我的模型：

```
public class Tribunal
    {
        public int Id { get; set; }
        public Account User { get; set; }
        public DateTime Expires { get; set; }
        public Thread Thread { get; set; }
        public int Points { get; set; }
        public String Comment { get; set; }
        public int VotersCount { get; set; }
        public List<Voters> Voters { get; set; }
    }

    public class Voters
    {
        public int Id { get; set; }
        public Account Voter { get; set; }
        public bool Vote { get; set; }
        public Tribunal Tribunal { get; set; }
    } 
```

我是这样配置的：

```
modelBuilder.Entity<Tribunal>()
                .HasOptional(t => t.Voters)
                .WithRequired(); 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:02:34.163

配置不正确：`Voters`是一个集合，所以你应该调用`HasMany`，而不是`HasOptional`。

# asp.net-mvc-4 - 相同的参数，不同的方法

> ID：13684516
> 
> 赞同：0
> 
> 时间：2012-12-03T13:42:27.790
> 
> 标签：asp.net-mvc-4

我在 asp mvc 4 中创建一个 API。

我有 2 种方法，`GetAllBooks()`并且`GetPopularBooks()`.

为了得到所有的书，我调用 localhost:xxxxx/api/books/，我得到了正确的结果。如何查询热门书籍？这两种方法都是无参数的，我们这里的信息并不是很有帮助。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:50:37.493

尽管这可以使用“按操作名称路由” [http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)来实现。我强烈建议将 GetPopularBooks() 视为 GetAllBooks，但要使用流行度过滤器。

例如

```
public IEnumerable<Books> GetAllBooks([FromUri]bool? IsPopular = null)
{
     if(IsPopular.HasValue)
     { //do something
       //return filtered
     }

     //return all
} 
```

网址：

```
http://localhost/api/books
http://localhost/api/books?isPopular=true 
```

# javascript - 添加新内容时保持位置（视口）

> ID：13684518
> 
> 赞同：0
> 
> 时间：2012-12-03T13:42:33.720
> 
> 标签：javascript, jquery, mobile, viewport

我正在尝试将我的位置设置为用户观看的位置，当使用 jQuery 中的附加功能添加新的动态内容时（例如图像）。

我已经尝试过使用 scrollTop，但内容仍然会下降更长的时间。

这是我测试过的代码：

```
var scrollPosition = $(this).scrollTop();    
$("#main-article").scrollTop(scrollPosition); 
```

但是当添加新内容时，位置不再正确，所以我需要在添加内容后以某种方式获取新位置，所以我仍然看到与添加内容之前相同的内容。

希望有意义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:14:23.743

嗯试试这个：

```
var onAppendCallback = function() {
    $visible = $('.article:visible') // Or $(this)
    $(window).scrollTop($visible.scrollTop()) // Or $('#main-aritcle')
}

var addNewContent = function(callback) {
    // Do your new content logic here
    callback && callback.call(this)
} 
```

关键是你需要使用回调，否则一切看起来都很好。

# c++ - 将模板类转换为更通用的专业化

> ID：13684521
> 
> 赞同：1
> 
> 时间：2012-12-03T13:42:39.583
> 
> 标签：c++, templates, casting

我有一个模板类，其模板参数是该类应保存的某些数据点的维数。这个类有一个专门的版本`MyClass<-1>`，它允许在编译时未知的维度。

如何将特定类（例如`MyClass<2>`）转换为这种更通用的形式？

更具体一点，这里有一些人为的例子来说明这种情况。（我使用 Eigen 库，但我认为对于一般原则，这应该无关紧要）

```
using namespace Eigen;

template <std::size_t dim>
class MyClass {
  public:
    // Some constructors...

    // A sample function:
    Matrix<double, dim, 1> returnPoint();

    // Some more functions here

  private:
    Matrix<double, dim, 1> point;
} 
```

现在，假设我有以下代码段：

```
MyClass<2> *foo;
MyClass<Dynamic> *bar;  // Dynamic is a Eigen constant, being defined as -1

// Do something here

// How to do this:
bar = some_cast<MyClass<Dynamic> *>(foo); 
```

考虑到这个问题，我想如果不实际复制点的值，我想要的内容是不可能存档的。谁能证明我错了或证实了这个假设？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:47:10.990

**可以在不实际复制值的情况下实现转换，但前提是您必须小心使其工作。**

当你用两组不同的参数实例化一个类模板时，你会得到两个不相关的不同类。除非您明确定义一个从另一个继承，例如：

```
namespace with_inheritance {

template <class T, long sz>
class vector : public vector<T,-1> {
    typedef vector<T,-1> base_t;
public:
    vector() : base_t (sz) { }
};

template <class T>
class vector<T, -1> {
    T* v_;
    size_t sz_;
public:
    vector(size_t sz) : v_ (new T[sz]), sz_ (sz) { }
    ~vector() { delete [] v_; }
    T& operator[](size_t i)
    {
        if (i >= sz_) throw i;
        return v_[i];
    }
};

} // with_inheritance 
```

因此，在这种情况下，您可以按以下方式进行转换：

```
namespace wi = with_inheritance;
wi::vector<double, 10> v;
wi::vector<double, -1>* p = &v;
std::cout << (*p)[1] << '\n'; 
```

如果没有它们之间的继承关系，将不允许转换。但是，您可以在需要时使用 reinterpret_cast 绕过类型系统。但是您必须非常小心，对象具有相同的布局和不变量，以确保一切正常。如：

```
namespace with_lots_of_care {

template <class T, long sz>
class vector {
    T* v_;
    size_t sz_;
public:
    vector() : v_ (new T[sz]), sz_ (sz) { }
    ~vector() { delete [] v_; }
    T& operator[](size_t i)
    {
        if (i >= sz_) throw i;
        return v_[i];
    }
};

template <class T>
class vector<T, -1> {
    T* v_;
    size_t sz_;
public:
    vector(size_t sz) : v_ (new T[sz]), sz_ (sz) { }
    ~vector() { delete [] v_; }
    T& operator[](size_t i)
    {
        if (i >= sz_) throw i;
        return v_[i];
    }
};

} // with_lots_of_care 
```

然后转换为：

```
namespace wc = with_lots_of_care;
wc::vector<double, 10> v;
wc::vector<double, -1>* p = reinterpret_cast<wc::vector<double, -1>*>(&v);
std::cout << (*p)[1] << '\n'; 
```

# google-chrome - 背面可见性：chrome 中的隐藏错误

> ID：13684522
> 
> 赞同：4
> 
> 时间：2012-12-03T13:42:43.570
> 
> 标签：google-chrome, css

我在 Windows Vista 上的 Chrome 中发现了一个错误：CSS3 backface-visibility:hidden doesn't work。这是一个例子： [jsFiddle](http://jsfiddle.net/csaltyj/TYuL3/)

这在 windows 7 和 mac 中的 chrome 上运行良好，但在 chrome vista 上，背面没有隐藏。

有人有任何线索吗？

```
webkit-backface-visibility:hidden; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-11T09:04:58.063

好的，我现在已经解决了与 Chrome v75.0 相同的问题，当有一个元素及其子标签（p，img）时

```
backface-visibility: hidden; 
```

Chrome 仅显示子项的内容。我使用 jQuery 插件来翻转一些内容。我通过使用修复它

```
.not('p, img, br, strong') 
```

避免在孩子身上添加背面可见性。

也许这就像双重隐藏手段展示？！就像在数学中 - 和 - 是 + :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:10:55.747

我遇到了同样的问题，实际上需要“-webkit-backface-visibility: hidden”，对我有用的是首先将其设置为“可见”然后“隐藏”。

```
-webkit-backface-visibility: visible;
-webkit-backface-visibility: hidden; 
```

我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-12T18:31:26.943

如果您遇到类似问题，请尝试添加以下样式：

`-webkit-transform: translate3d(0, 0, 0); transform: translate3d(0, 0, 0);`

# tfs - “TF14045：身份 从 TFS 2010 到 2012 的 atach 项目集合后不是公认的身份

> ID：13684525
> 
> 赞同：5
> 
> 时间：2012-12-03T13:42:55.890
> 
> 标签：tfs, tfs-2010

当我尝试访问此错误时，我无法像 2012 年那样访问 Visual Studio 2010 中的源代码控制：“TF14045：身份不是可识别的身份”。此错误在我从 TFS 2010 分离项目集合并附加到 Team Foundation Server 2012 后开始，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:50:45.700

从来没有出现过这个错误，因为迁移计划在 1 月进行，但我发现这个条目有一些来自 MS 的建议和答案：

[http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/b67ad1d6-d763-4602-bf14-489a3389a30d](http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/b67ad1d6-d763-4602-bf14-489a3389a30d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:46:34.363

我猜你安装了更新 1 的 TFS 2012？如果是这样，您必须等待即将发布的补丁程序，该补丁程序将包含此错误的错误修复。看看微软社交：

[http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/238cad96-8e74-4f14-869a-3bb5e0629fd7](http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/238cad96-8e74-4f14-869a-3bb5e0629fd7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T13:05:27.253

请确保您没有打开两个 Visual Studio 实例并尝试连接需要两个不同凭据/域的两个 TFS 服务器。

我正面临这个问题，在关闭其中一个实例后，它开始正常工作。

# ios - UICollectionView 中未显示 UILabel

> ID：13684528
> 
> 赞同：1
> 
> 时间：2012-12-03T13:43:04.960
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我有一个带有 UICollectionViewCell 对象的 UILabel。

```
@interface TideDataTableCell : UICollectionViewCell

@property (strong, nonatomic) NSString* dayString;
@property (weak, nonatomic) IBOutlet UILabel *dayLabel;

@end 
```

标签在单元对象的 m 文件中合成。但是，当我尝试分配 text 属性时，标签对象始终为空。即使创建一个新标签并将其分配给单元格 dayLabel 也不起作用！下面的代码只是对标签的直接分配，因为似乎没有任何工作......

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Main Tide Data Table Cell";

    TideDataTableCell* tideDayDataCell = [self.tideDataTable dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    tidalDate* tideDate = self.tidalDates[indexPath.row];
    self.tideDataTable.backgroundColor = [UIColor lightGrayColor];
    tideDayDataCell.backgroundColor = [UIColor whiteColor];
    tideDayDataCell.dayLabel.textColor = [UIColor blackColor];
    tideDayDataCell.dayLabel.text = tideDate.dateString;
    return tideDayDataCell;
} 
```

为什么这不起作用？！我检查了 UICollectionViewCell 中的标签是否连接到单元格 h 文件中的 dayLabel（上图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T11:02:07.450

您需要像这样在 TideDataTableCell 的 viewDidLoad 上注册您的单元格：

```
UINib *cellNibName = [UINib nibWithNibName:@"cellNibName" bundle:nil];
[self.collectionView registerNib:cellNibName forCellWithReuseIdentifier:@"cellIdentifier"]; 
```

然后，在 cellForItemAtIndexPath 您必须获取单元格并使用它：

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"cellIdentifier";

    TideDataTableCell* tideDayDataCell = [self.tideDataTable dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];

    tidalDate* tideDate = self.tidalDates[indexPath.row];
    self.tideDataTable.backgroundColor = [UIColor lightGrayColor];
    tideDayDataCell.backgroundColor = [UIColor whiteColor];
    tideDayDataCell.dayLabel.textColor = [UIColor blackColor];
    tideDayDataCell.dayLabel.text = tideDate.dateString;
    return tideDayDataCell;
} 
```

不要忘记在 xib 文件中设置重用标识符。

# android - Android 限制 CALL_PHONE 权限以避免隐藏来电

> ID：13684532
> 
> 赞同：3
> 
> 时间：2012-12-03T13:43:11.467
> 
> 标签：android, permissions, phone-call

该`CALL_PHONE`权限的 Android 文档写道：
“允许应用程序在不通过拨号器用户界面的情况下发起电话呼叫，以便用户确认正在拨打的电话。”
当用户安装应用程序时，还会向用户提示此消息。阅读应用程序可能会启动隐藏调用可能会阻止某些用户的安装。

由于我的应用程序不会启动隐藏呼叫，我想知道是否有办法限制这种行为，可能具有更严格的权限，以避免向用户显示该可怕的消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:57:11.860

这是我更正的解决方案：

```
 Intent callIntent = new Intent(Intent.ACTION_DIAL);  
 callIntent.setData(Uri.parse("tel:" + 1234));
 startActivity(callIntent); 
```

这不需要任何权限，只需打开拨号程序。应该正是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:02:33.850

我不认为这是可能的。有 2 种权限与电话 ( `CALL_PHONE`, `CALL_PRIVILEGED`)相关联，`CALL_PHONE`其中限制较少。对于拥有这些权限的任何应用程序，Google Play 将始终显示令人沮丧的描述。

如果此权限对您的应用程序非常重要，请保持原样。但是打开拨号器而不是呼叫对于用户体验来说是一个更好的选择（在大多数情况下），所以请尝试使用它（你说你无论如何都在通知用户......所以你为什么不能显示拨号器而不是那个通知？）

# php - WooCommerce 自定义字段 - 多选

> ID：13684533
> 
> 赞同：12
> 
> 时间：2012-12-03T13:43:14.233
> 
> 标签：php, forms, wordpress, multi-select, woocommerce

我正在向 WooCommerce 的结帐页面添加额外的字段，我可以添加文本框等基本字段，但需要添加一个（多）选择框，用户可以在其中选择多个项目。我已经想出了如何通过代码添加选择框，如下所示：

```
add_action('woocommerce_after_order_notes', 'my_custom_checkout_field');

function my_custom_checkout_field( $checkout ) {

    echo '<div id="my_custom_checkout_field"><h3>'.__('My Field').'</h3>';

    woocommerce_form_field( 'my_field_name', array(
        'type'          => 'select',
        'class'         => array('my-field-class form-row-wide'),
        'label'         => __('Fill in this field'),
        'placeholder'       => __('Enter something'),
        'options'           => array(
            'Buick' => __('Buick', 'woocommerce' ),
            'Ford' => __('Ford', 'woocommerce' )
        )
        ), $checkout->get_value( 'my_field_name' ));

    echo '</div>';

} 
```

但这只是一个单一的选择下拉菜单。
我可以为多选做类似的事情吗？
或者你有推荐的 WooCommerce 扩展吗？

请指教，先谢谢了！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T23:30:18.730

您需要创建自己的自定义字段类型处理程序。如果您查看[WooCommerce 源代码](http://wcdocs.woothemes.com/apidocs/source-function-woocommerce_form_field.html#1205)，您会发现可以使用过滤器：`'woocommerce_form_field_' . $args['type']`

我还没有真正测试过，这只是来自单个“选择”控件的稍微修改的代码，但你明白了：

```
add_filter( 'woocommerce_form_field_multiselect', 'custom_multiselect_handler', 10, 4 );

function custom_multiselect_handler( $field, $key, $args, $value ) {

    $options = '';

    if ( ! empty( $args['options'] ) ) {
        foreach ( $args['options'] as $option_key => $option_text ) {
            $options .= '<option value="' . $option_key . '" '. selected( $value, $option_key, false ) . '>' . $option_text .'</option>';
        }

        if ($args['required']) {
            $args['class'][] = 'validate-required';
            $required = '&nbsp;<abbr class="required" title="' . esc_attr__('required', 'woocommerce') . '">*</abbr>';
        }
        else {
            $required = '&nbsp;<span class="optional">(' . esc_html__('optional', 'woocommerce') . ')</span>';
        }

        $field = '<p class="form-row ' . implode( ' ', $args['class'] ) .'" id="' . $key . '_field">
            <label for="' . $key . '" class="' . implode( ' ', $args['label_class'] ) .'">' . $args['label']. $required . '</label>
            <select name="' . $key . '" id="' . $key . '" class="select" multiple="multiple">
                ' . $options . '
            </select>
        </p>' . $args['after'];
    }

    return $field;
} 
```

在您的代码中，只需将类型声明为“多选”：

```
add_action('woocommerce_after_order_notes', 'my_custom_checkout_field');

function my_custom_checkout_field( $checkout ) {

    echo '<div id="my_custom_checkout_field"><h3>'.__('My Field').'</h3>';

    woocommerce_form_field( 'my_field_name', array(
        'type'          => 'multiselect',
        'class'         => array('my-field-class form-row-wide'),
        'label'         => __('Fill in this field'),
        'placeholder'   => __('Enter something'),
        'options'       => array(
            'Buick' => __('Buick', 'woocommerce' ),
            'Ford' => __('Ford', 'woocommerce' )
        )
        ), $checkout->get_value( 'my_field_name' ));

    echo '</div>';

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-16T22:09:37.720

虽然回答这篇文章已经很晚了，但我添加这个解决方案是为了帮助那些仍在寻找解决方案的人。我们可以使用 custom_attributes 添加自定义数据，使其成为多选下拉菜单。

```
woocommerce_form_field('my_field_name',array(
   type=>"select",
   custom_attributes=>array("multiple"),
   options=>$options
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-25T13:08:32.433

如果您对代码片段有疑问，您可以使用这个 woocommerce 插件轻松地做到这一点。“Woocommerce 轻松结帐字段编辑器”。你可以在codecanyon找到它

# moodle - 从 Moodle 下载 SCORM

> ID：13684535
> 
> 赞同：1
> 
> 时间：2012-12-03T13:43:20.120
> 
> 标签：moodle, scrape, scorm

我是SCORM的新手。

我们需要对 SCORM 1.2 对象中的电子学习门户和索引数据进行爬网。有没有办法从 Moodle 下载这些 SCORM 对象并随后阅读它们？

如果爬取是不可能的，并且我们可以获取 SCORM 对象，是否可以读取 SCORM 对象的内容？例如，我们想从这些对象中提取文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T06:57:44.917

不，SCORM 内容是 E-Learning 内容，不可下载。它是为网页而开发的，所以无法提取数据。除非你把它写在纸上！

# android - 获取LinearLayout中视图的位置（Android）

> ID：13684538
> 
> 赞同：1
> 
> 时间：2012-12-03T13:43:34.517
> 
> 标签：android, android-listview, position, android-linearlayout

A 最近有一个自定义 ListView。然后我不得不显示所有没有滚动条的列表项。按照[在 LinearLayout 中放置项目的方法，](https://stackoverflow.com/a/1958482/1358847)我更改了代码，但无法将 onClickListener 绑定到新布局。在 ListView 中，我使用位置变量来确定触摸了哪个视图。但是在 LinearLayout onClick 回调中没有位置参数。

这是我的 BasketActivity.class：

```
package ru.**.**;

public class BasketActivity extends Activity {

    ArrayList<Item> items = new ArrayList<Item>();
    SQLiteDatabase database;
    Map<String, ?> all;
    ItemAdapter adapter;
    Item item2delete;
    View deletingView;

    private SharedPreferences settings;
    private SharedPreferences settings2;
    private Basket basket;
    TextView basketSum;
    private int position2delete;
    private Map<String, ?> all2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_basket);

        <..cutted..>

        settings = getSharedPreferences("basket", 0);
        settings2 = getSharedPreferences("price", 0);
        basket = new Basket(settings, settings2);
        all = basket.getList();

        LinearLayout l1 = (LinearLayout) findViewById(R.id.l1);
        MyDBAdapter myDBAdapter = new MyDBAdapter(getBaseContext());
        myDBAdapter.open();
        Cursor itemCursor = myDBAdapter.getItemsInBasket(all);
        while (itemCursor.moveToNext()) {

            String[] columns = itemCursor.getColumnNames();
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < columns.length; i++) {
                sb.append(columns[i]);
            }

            Item item = new Item();
            item.setId(itemCursor.getString(0));
            item.setArticul(itemCursor.getString(MyDBSchema.ITEM_ARTICUL));
            item.setTitle(itemCursor.getString(MyDBSchema.ITEM_TITLE));
            item.setPrice(itemCursor.getInt(MyDBSchema.ITEM_PRICE));
            item.setPic80(itemCursor.getString(MyDBSchema.ITEM_PIC80));
            item.setPic300(itemCursor.getString(MyDBSchema.ITEM_PIC300));
            item.setMessage(itemCursor.getString(MyDBSchema.ITEM_MESSAGE));
            item.setColor(itemCursor.getString(MyDBSchema.ITEM_COLOR));
            item.setColorpos(itemCursor.getString(MyDBSchema.ITEM_COLORPOS));
            items.add(item);
        }
        itemCursor.close();
        myDBAdapter.close();

        for (int position=0; position<items.size(); position++) {
            LayoutInflater inflater = getLayoutInflater();
            View v = inflater.inflate(R.layout.list_basket, null);

            final Item i = items.get(position);
                if (i != null) {
                    Item ei = (Item) i;

                    final TextView title = (TextView) v.findViewById(R.id.title);
                    if (title != null) title.setText(ei.title);

                    final TextView articul = (TextView) v.findViewById(R.id.articul);
                    if (articul != null) articul.setText(ei.articul);

                    TextView payed = (TextView) v.findViewById(R.id.payed);
                    if (payed != null) payed.setVisibility(TextView.GONE);

                    TextView status = (TextView) v.findViewById(R.id.status);
                    if (status != null) status.setVisibility(TextView.GONE);

                    Context context = getBaseContext();
                    ProgressBar p = new ProgressBar(context);
                    p.setIndeterminate(true);
                    Drawable d = p.getIndeterminateDrawable();          
                    WebImageView wiv = (WebImageView) v.findViewById(R.id.pic80);
                    wiv.setImageWithURL(context, ei.pic80, d);

                    final TextView price = (TextView) v.findViewById(R.id.price);
                    if (price != null) price.setText(ei.price_valid);

                    final TextView quant = (TextView) v.findViewById(R.id.quant);
                    if (quant != null) {
                        int q = (Integer) all.get(ei.articul);
                        if (q > 1) {
                            quant.setText("x "+q+" шт.");
                        }
                    }

                }
                v.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        deletingView = v;
                        int position = 0; //The order number of the view should be here!
                        Item item = (Item) items.get(position);
                        item2delete = item;
                        position2delete = position;

                        AlertDialog.Builder builder = new AlertDialog.Builder(getParent());
                        builder.setMessage(getString(R.string.suredelete))
                                .setCancelable(false)
                                .setPositiveButton(getString(R.string.yes),
                                        new DialogInterface.OnClickListener() {
                                            public void onClick(DialogInterface dialog, int id) {
                                                BasketActivity.this.removeItem();
                                                deletingView.setVisibility(View.GONE);
                                            }
                                        })
                                .setNegativeButton(getString(R.string.no),
                                        new DialogInterface.OnClickListener() {
                                            public void onClick(DialogInterface dialog, int id) {
                                                dialog.cancel();
                                            }
                                        });
                        AlertDialog alert = builder.create();
                        alert.show();
                    }
                });
                l1.addView(v);
        }

        basketSum = (TextView) findViewById(R.id.basketsum);
        basketSum.setText(Html.fromHtml(getString(R.string.basketsum) + ": <b>"
                + basket.getBasketPriceValid() + "</b>"));
    }

    protected void removeItem() {
        basket.remove(item2delete);
        Context context = getApplicationContext();
        CharSequence text = getText(R.string.item_deleted);
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(context, text, duration);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.show();
        basketSum.setText(Html.fromHtml(getString(R.string.basketsum) + ": <b>"
                + basket.getBasketPriceValid() + "</b>"));
        items.remove(position2delete);
    }
} 
```

我的问题是如何获得视图的位置`onClick(View v)`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T13:49:20.203

您可以使用`View'`s 标签；

```
for (int position=0; position<items.size(); position++) {
    v.setTag(position);
} 
```

并且在`onClick(View v)`

```
public void onClick(View v) {
    int position = 0;
    if (v.getTag() instanceof Integer) {
       position = (Integer) v.getTag();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:55:19.973

你能有吗

```
v.setTag(items.get(position).getId(); 
```

然后在`onClick`

```
public void onClick(View v) {
  int id= v.getTag();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-24T18:27:13.113

你可以有

```
val index =  parent.indexOfChild(child) 
```

# javascript - 如何通过参数传递函数名称以用作 onclick 事件监听器？

> ID：13684546
> 
> 赞同：1
> 
> 时间：2012-12-03T13:44:14.843
> 
> 标签：javascript

我正在编写一个 chrome 扩展，在其中向页面添加一个按钮，然后向它添加一个 onclick 事件。因为我想添加更多按钮，所以我想让它动态化..

```
addAutoModButton('Auto-Moderate', 'moderate');

function addAutoModButton(name, onclickfunction)    {
    ...
    ...
    //creating a button and adding it
    var modbtn = document.createElement("input");
    modbtn.setAttribute('type','button');
    modbtn.setAttribute('value',name);
    title_header.appendChild(modbtn);

    modbtn.addEventListener("click", window["onclickfunction"], false);
    // thats what is not working

}

function moderate() {
    //do some stuff
} 
```

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:48:47.130

*   您需要使用您定义的参数。

    ```
    function addAutoModButton(name, onclickfunction)    {
      ...
      modbtn.addEventListener("click", onclickfunction, false);
                                   ----^^^^^^^^^^^^^^^-- 
    ```

*   传递函数，而不是函数的名称。

    ```
    addAutoModButton('Auto-Moderate', moderate);
                                   ---^^^^^^^^-- 
    ```

    不过，您需要先定义函数，然后再将其作为参数传递。

* * *

或者，您可以保持原样（但仅限于全局范围。）通过取消引用传递给 window.properties 的属性名称。

```
modbtn.addEventListener("click", window[onclickfunction], false);
                                     ---^^^^^^^^^^^^^^^--- 
```

`window.onclickfunction`从字面上看，在它静态解析为 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:49:41.097

函数是 JS 中的一等对象，因此您可以像对待任何其他变量一样对待它：

```
function someF(){}
function func2(argumentFunction)
{
    document.body.addEventListener('click',argumentFunction,false);//<-- use argument name
}
func2(someF);//<-- function someF will be used as callback 
```

参数/变量是对函数对象的引用，这意味着 JS 并不真正关心函数的名称，它查看变量*引用*的内容，在这种情况下，参数引用了一个函数，该函数在其他地方声明但传递为一个论点。纯粹而简单

# mysql - node js + mysql 推送通知

> ID：13684551
> 
> 赞同：1
> 
> 时间：2012-12-03T13:44:30.103
> 
> 标签：mysql, node.js

我正在做一个项目，我想像 facebook 一样发出通知。即当有人评论其他个人资料或喜欢其他个人资料上的任何链接时。我想使用 nodejs 进行实时推送通知。

这些评论，喜欢的数据通过ajax请求或通过将表单发布到php存储在“通知表”中的mysql数据库中。我在网上找到了许多nodejs的教程，用于实时推送通知，但不幸的是他们谈论保持关注文件并在文件更新时发出通知。

有谁知道如何监视 mysql 表，所以每当在表中插入任何数据时，它都会发出通知。我不知道应该在 nodejs 中编写什么样的代码。

如果需要更多解释，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:47:44.213

您可以将 node.js 与 mysql 库一起使用来轮询数据库以获取新通知，我认为这就是您想要做的。我从未亲自完成过该特定任务，但我知道这是可以实现的。

关于您需要编写什么样的代码，请尝试查找“Node Middleware Tutorials”，其中可能包含一些在搜索查询中包含 MySQL 的变体，您至少会发现您应该寻找什么。

如果可以的话，我会用更具体的代码示例更新这个答案，让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:24:13.780

您可以使用[nowjs](https://github.com/Flotype/now)并在保存后添加（如果您使用的是 mysql 活动记录）以使用此包通知客户端。

在服务器上

```
var httpServer = require('http').createServer(function(req, response){ /* Serve your static files */ })
httpServer.listen(8080);

var nowjs = require("now");
var everyone = nowjs.initialize(httpServer);

everyone.now.logStuff = function(msg){
    console.log(msg);
} 
```

在客户端

```
<script type="text/javascript" src="http://localhost:8080/nowjs/now.js"></script>

<script type="text/javascript">
  now.ready(function(){
    // "Hello World!" will print on server
    now.logStuff("Hello World!");
  });
</script> 
```

有关更多信息，请查看[示例](https://github.com/Flotype/now/tree/master/examples)

# c# - .NET C# 使用类似于 Curl 脚本的 HTTPrequest

> ID：13684555
> 
> 赞同：2
> 
> 时间：2012-12-03T13:44:42.493
> 
> 标签：c#, .net, curl, httprequest

我正在使用 .NET C# 并希望使用`HTTPrequest`与在 Curl 中编写的方式相同的方式进行 POST：

```
curl
--header ’Accept: text/html’
--user ’test1:password’
--Form ’wait=0’
--Form ’data=@data.csv;type=text/csv’
some URL address here 
```

我得到了`Error 500 Internal error from the Internet server`。

要发送的数据是 CSV 文件。

我在 C# 中的源代码：

```
string data = "Time, A, B\n20120101, 100, 24\n20120102\n, 101, 27";

// Create a request using a URL that can receive a post.
                    request = WebRequest.Create(url);
                    //Set authorization
                    request.Credentials = new NetworkCredential(username, password);
                    // Set the Method property of the request to POST.
                    request.Method = "POST";

                    // Create POST data and convert it to a byte array.
                    byte[] byteArray = Encoding.UTF8.GetBytes(data);
                    // Set the ContentType property of the WebRequest.
                    request.ContentType = "application/x-www-form-urlencoded";
                    // Set the ContentLength property of the WebRequest.
                    request.ContentLength = byteArray.Length;
                    // Get the request stream.
                    dataStream = request.GetRequestStream();
                    // Write the data to the request stream.
                    dataStream.Write(byteArray, 0, byteArray.Length);
                    // Close the Stream object.
                    dataStream.Close();

// Get the original response.
                WebResponse response = request.GetResponse();
                this.Status = ((HttpWebResponse)response).StatusDescription;
                // Get the stream containing all content returned by the requested server.
                dataStream = response.GetResponseStream();
                // Open the stream using a StreamReader for easy access.
                StreamReader reader = new StreamReader(dataStream);
                // Read the content fully up to the end.
                string responseFromServer = reader.ReadToEnd(); 
                // Clean up the streams.
                reader.Close();
                dataStream.Close();
                response.Close(); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-16T09:56:10.953

cURL 使用 multipart/form-data 内容类型来创建它的请求。我认为在您的情况下这是必需的，因为您同时传递了文本参数和文件。遗憾的是，.Net 框架似乎没有内置支持创建这种内容类型。

有一个关于 SO 的问题提供了如何在此处自己操作的示例代码：[Multipart forms from C# client](https://stackoverflow.com/questions/219827/multipart-forms-from-c-sharp-client)

作为参考，该 cURL 命令生成的 HTTP 请求如下所示：

```
POST http://www.example.com/example HTTP/1.1
Authorization: Basic J3Rlc3Q6cGFzc3dvcmQn
User-Agent: curl/7.33.0
Host: www.example.com
Accept: text/html
Connection: Keep-Alive
Content-Length: 335
Expect: 100-continue
Content-Type: multipart/form-data; boundary=------------------------99aa46d554951aa6

--------------------------99aa46d554951aa6
Content-Disposition: form-data; name="'wait"

0'
--------------------------99aa46d554951aa6
Content-Disposition: form-data; name="'data"; filename="data.csv"
Content-Type: text/csv'

Time, A, B\n20120101, 100, 24\n20120102\n, 101, 27 

--------------------------99aa46d554951aa6-- 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T14:29:35.197

数据不需要为表单发布进行 URL 编码吗？[http://en.wikipedia.org/wiki/POST_%28HTTP%29#Use_for_submitting_web_forms](http://en.wikipedia.org/wiki/POST_%28HTTP%29#Use_for_submitting_web_forms)

# c - lseek() 用于复制文件

> ID：13684557
> 
> 赞同：0
> 
> 时间：2012-12-03T13:44:47.527
> 
> 标签：c, file

我做了什么：以相反的顺序复制文件的内容。我不能做的是：正向复制内容。

我在网上进行了研究，发现`lseek()`有这个论点..

```
lseek(file_descriptor,offset,whence); 
```

对于反向阅读，逻辑是直截了当的。我的代码如下：

```
#include<fcntl.h>
#include<unistd.h>
#include<stdio.h>
#include<stdlib.h>

void main(int argc,char *argv[])
{
    int fd,fd1,count=0;
    char ch='y',buffer;
    if(argc>3)
    {   
        printf("\nSyntax Error!<try> ./cp source_name destination_name\n");
        exit(0);
    }

    fd=open(argv[1],O_RDWR);
    if(fd==-1)
    {
        printf("\nCan not open source file .. :(\n");exit(0);
    }

    fd1=open(argv[2],O_RDWR);

    if(fd1=!-1)
    {
         printf("\nDestination file exist , OverWrite (Y/N) :");
         scanf("%s",&ch);
    }

    if(ch=='y'||ch=='Y')
        fd1=creat(argv[2],O_RDWR|0666);
    else
        exit(0);

    while(lseek(fd,count,2)!=-1)
    {
        count--;
        read(fd,&buffer,sizeof(char));
        write(fd1,&buffer,sizeof(char));
    }
} 
```

我认为可以对正向复制文件进行哪些更改。

```
count=0;

lseek(fd,count,0)!=-1

but this is taking the program in infinite loop . need help . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:55:03.810

要向前复制，您不需要`lseek`.

您只需要复制直到`read`返回零：

```
while(read(fd,&buffer,sizeof(char)) > 0)
{
    write(fd1,&buffer,sizeof(char));
} 
```

`write`当然，要有效地做到这一点，您将使用大于一个字符的缓冲区，但是如果最后一个字符小于缓冲区，则必须小心您的数据`read`量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:52:49.893

您的反向副本依赖于`count`变得消极并寻求失败。这不适用于正偏移量，因为[`lseek(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/lseek.2.html)允许将偏移量设置在文件末尾之外，请参阅手册页。

# windows-phone-8 - Windows Phone 8 的 GetSystemPowerStatus

> ID：13684562
> 
> 赞同：1
> 
> 时间：2012-12-03T13:45:08.373
> 
> 标签：windows-phone-8

我在 windows phone 8 sdk 中看到了 winbase.h (WINAPI) 文件 (kernel32.dll)，它具有以下功能：

> GetSystemPowerStatus 将返回电池状态（SYSTEM_POWER_STATUS）

. 问题是模拟器上的这个抛出和异常，没有在手机上测试（等待得到一个）

我用过

```
 [DllImport("Kernel32")]
   private static extern Boolean GetSystemPowerStatus( SystemPowerStatus sps ); 
```

代码符合但在运行时抛出异常。

有什么想法可以在手机上使用，还是 Windows Phone 8 根本不支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:39:41.597

正如 AnderZubi 所说，这不是 Windows Phone 8 上受支持的 Win32 API。但是，您可以从本机 C/C++ 代码调用等效的[WinRT API 。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.devices.power.battery%28v=vs.105%29.aspx)这与 Martin 发布的 C# API 非常相似。

如果您已经使用 C/C++，使用 WinRT 版本可能会节省您在 C++ 和 C# 之间架桥的需要。如果您正在开始一个只使用 XAML/C# 的新应用程序，那么 Martin 的答案会更简单。

例如：

```
int WindowsPhoneRuntimeComponent::GetBatteryRemainingPercent()
{
    auto battery = Windows::Phone::Devices::Power::Battery::GetDefault();
    int remainingPercent = battery->RemainingChargePercent;
    return remainingPercent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:01:58.780

如果您只想访问电池信息和 bool 属性，如果手机是否在充电器上，您可以使用以下命令：

```
using Microsoft.Phone.Info;
using Windows.Phone.Devices.Power;

namespace Core.Helpers
{
    public class BatteryHelper
    {
        public static int BateryLevel
        {
            get
            {
                return Battery.GetDefault().RemainingChargePercent;
            }
        }

        public static bool IsCharging
        {
            get
            {
                return DeviceStatus.PowerSource == PowerSource.External;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:04:17.523

GetSystemPowerStatus 不在 Windows Phone 8 支持的 Win32 API 列表中：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662956(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662956(v=vs.105).aspx)

# javascript - 如何在客户端验证 Symfony 2 表单（javascript）

> ID：13684563
> 
> 赞同：6
> 
> 时间：2012-12-03T13:45:11.930
> 
> 标签：javascript, forms, validation, symfony

我是 symfony 2 的新手，我正在尝试构建一个应该由服务器和导航器验证的标准表单。

服务器端验证适用于断言，`@Assert\...`但我无法找到一种方法来让它在客户端工作。

搜索后，我指出 Symfony 2 没有`javascript`库来管理这个..

所以我的问题是：最简单的方法是什么？

我知道使用诸如插件之类的客户端库或[Regula](https://github.com/vivin/regula)`jQuery Validation`之类的东西的可能性，但这意味着我必须复制我的验证规则..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:14:51.963

Symfony 是一个PHP 框架，即服务器端应用程序框架。它不提供客户端验证，除非您使用带有`required`属性和其他`email`类型的 HTML5 进行输入（在浏览器中仍然没有很好地实现）。

因此，您必须找到自己的解决方案并尝试将其插入 Symfony2 前面以使其尽可能简单……或找到现有的捆绑软件，例如[APYJsFormValidationBundle](https://github.com/Abhoryo/APYJsFormValidationBundle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T12:43:09.300

这是新的 Symfony 2 捆绑包，它为 Symfony 类型（表单）提供客户端验证的实现[https://github.com/formapro/JsFormValidatorBundle](https://github.com/formapro/JsFormValidatorBundle)

（这个包仍在维护中，似乎支持 Symfony 4）

# c# - 将 SilverLight 日期选择器的默认日期设置为当前日期

> ID：13684566
> 
> 赞同：3
> 
> 时间：2012-12-03T13:45:22.087
> 
> 标签：c#, .net, silverlight, date, datepicker

我有一个 Silverlight `Datagrid`，其中一列是日期列。

所以我使用了`DataTemplateColumn`如下

```
 <sdk:DataGridTemplateColumn   Header="Recieved Date" Width="Auto">
                        <sdk:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=RecievedDate, StringFormat='MM/dd/yyyy'}" />
                            </DataTemplate>
                        </sdk:DataGridTemplateColumn.CellTemplate>
                        <sdk:DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <sdk:DatePicker Name="dtpFinancialAndComplianceLog" Text="{Binding Path=RecievedDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            </DataTemplate>
                        </sdk:DataGridTemplateColumn.CellEditingTemplate>
                    </sdk:DataGridTemplateColumn> 
```

问题是当我单击`DatePicker`控件时，默认日期设置为 1/1/0001？

如何在编辑模式下将我的日期选择器设置为当前日期？

我试过 DisplayDateStart="{x:Static sys:DateTime.Now}" 。但这不起作用，因为 Static 仅适用于 WPF 而不适用于 Silverlight 。

在编辑时将我的日期选择器设置为当前日期的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:29:39.550

（从上面的评论到OP）

如果省略 DisplayDate，Silverlight 日期选择器不会默认为今天的日期吗？

此外，如果您总是想从今天开始，您可以尝试更新绑定到 OneWay 的方向（即无需任何绑定代码来尝试设置框中的开始内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:58:44.730

您可能需要通过在派生自 DatePicker 的 DatePickerEX 类的构造函数中分配当前日期来自定义 DatePicker 类

# android - libcore.java.io.InterruptedStreamTest#testInterruptWritablePipeChannel CTS 测试失败

> ID：13684567
> 
> 赞同：0
> 
> 时间：2012-12-03T08:08:45.660
> 
> 标签：android, system-error

在设备上使用 Tradefed 执行 CTS。JB 和 CTS 版本测试为 4.1_r1。这种情况总是失败，但有时可以幸运地通过。

细节：

> libcore.java.io.InterruptedStreamTest#testInterruptWritablePipeChannel 失败并出现错误“测试无法运行完成。原因：'未能在 600000 毫秒内接收 adb shell 测试输出。测试可能已超时，或 adb 与设备的连接变得无响应' 。”

我在[谷歌代码](http://code.google.com/p/android/issues/detail?id=37682)上找到了这个，似乎这个问题已经被谷歌修复了，但不知何故它仍然困扰着我，因为我应用了这个问题的补丁。

有没有人对这个问题有任何理想？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:22:52.433

好的，我在谷歌源上找到了这个[链接。](https://android-review.googlesource.com/#/c/43782/)似乎需要更改此 CTS 测试用例。对此案的评论说得很清楚。

> 补丁集 1：
> CTS 测试（testInterruptReadablePipeChannel 和 testInterruptWritablePipeChannel）没有干净地测试中断。在 ICS 上，他们总是在框架中中断。在 JB 执行上，主要是进入内核，“读取”中的块并且测试失败。需要更改 CTS 才能可靠地测试内核和框架中的中断。

# c# - SWIG、Box2D 和 C#

> ID：13684574
> 
> 赞同：2
> 
> 时间：2012-12-03T13:45:37.577
> 
> 标签：c#, c++, box2d, swig

本来应该很简单的事情，却变成了错综复杂的丑陋。所以这就是故事。我下载了很棒的 Box2D，取出了重要的 c++ 文件并为 SWIG 添加了一个接口。然后我继续使用 makefile 创建 Swig 包装器

```
CC=g++
CFLAGS=-c -Wall -fPIC -I../
LDFLAGS=-shared -o box.dll
SOURCES=<OMITTED>

OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=box2d.dll

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) 
    $(CC) $(LDFLAGS) $(OBJECTS) -o $@

.cpp.o:
    $(CC) $(CFLAGS) $< -o $@

swig:
    swig -csharp -c++ -outdir Wrapper Box2D.i

clean:
    -rm Collision/*.o
    -rm Collision/Shapes/*.o
    -rm Common/*.o
    -rm Dynamics/*.o
    -rm Dynamics/Contacts/*.o
    -rm Dynamics/Joints/*.o
    -rm Rope/*.o 
```

很正常的东西，它工作正常（在接口文件中修复 %includes 而不是 #includes 之后）。所以我在 cygwin 中“痛饮”，那里没有问题（必须重新排序包含，所以基类首先出现）。然后我在 VS.NET 2012 中将其加载，将所有包装器 .cs 文件复制到解决方案中并移动 DLL。这就是它变得讨厌的地方。

第一次，我相信是 x86 和 x64 混合造成了很大的问题。我可以立即看出这是问题所在，并且绝不会被高度描述性的错误消息所迷惑：

```
System.BadImageFormatException: An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B) 
```

在我尝试解决这个问题时，大部分谷歌搜索都认为调用约定可能是罪魁祸首，因此我更改了 SWIG 包装器 cpp 文件以将函数作为 __cdecl 而不是 __stdcall 导出到 dll 中，并适当地更新了包装器。

无论如何，所以我最终通过制作一个新的 x86 构建配置文件来修复 x86/x64 混合，然后在调用 dll 中的任何函数时，程序就挂了。所以我决定回到基础，简单地用 __stdcall 编译，没有包装器模块，看看它是否能工作。

它没有。

现在它抱怨它缺少入口点：

```
{"Unable to find an entry point named 'SWIGRegisterExceptionCallbacks_box2d' in DLL 'box2d'.":""} System.Exception {System.EntryPointNotFoundException} 
```

在转储 DLL 的导出后，函数会根据 __stdcall 被正确地破坏

```
CSharp_b2_aabbMultiplier_get@0
...
SWIGRegisterStringCallback_box2d@4
SWIGRegisterExceptionCallbacks_box2d@44 
```

等等等等

现在 C# 包装器端似乎没有发现这是一个问题，直接前进并忽略了重整

```
[DllImport("box2d", EntryPoint="SWIGRegisterExceptionArgumentCallbacks_box2d")] 
```

所以我绝望地尝试了这个

```
[DllImport("box2d", EntryPoint = "SWIGRegisterExceptionCallbacks_box2d", CallingConvention = CallingConvention.StdCall)] 
```

遇到了同样的问题。解决方案？把乱七八糟的名字贴进去。

```
[DllImport("box2d", EntryPoint="SWIGRegisterExceptionArgumentCallbacks_box2d@44")] 
```

... 对于所有 1392 个 DllImport 属性。不是解决方案。

我已经尝试使用 minGW 和 Cygwin 编译 DLL，所以我怀疑 DLL 的编译方式是一个很大的问题。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:27:56.773

所以事实证明 C# 不能进入 Cygwin 或 MinGW dll，所以我用 VSC++ 重新编译，一切都很好。

# c++ - cpp：关于对 `(anonymous namespace)::CPassant::NbCPassant' 的未定义引用的解释

> ID：13684580
> 
> 赞同：0
> 
> 时间：2012-12-03T13:45:55.687
> 
> 标签：c++

> **可能重复：**
> [解决链接器错误：未定义对静态类成员的引用](https://stackoverflow.com/questions/5603101/resolving-a-linker-error-undefined-reference-to-static-class-members)

此声明：`static unsigned NbCPassant;`仅在课堂外有效。如果我把它放在里面，（让它私有）这不会编译，错误：

```
undefined reference to `(anonymous namespace)::CPassant::NbCPassant' 
```

我不明白为什么。这是代码：

```
#include <iostream>
#include <unistd.h>
#include <vector>
#include "SleepChronogram.h"
#include "nsUtil.h"

using namespace std;
using namespace boost;
using namespace boost::posix_time;
using namespace nsUtil;

static unsigned CptThreads;

char * nsUtil::clrscr = "\033[2J";    //    Clear screen

#define GOTOXY nsUtil::gotoxy

GOTOXY::gotoxy (int x, int y) : m_x (x), m_y (y) {}

ostream & nsUtil::operator << (ostream & os, const gotoxy & m)
{
    return os << "\033[" << m.m_y << ';' << m.m_x << 'H';
}

#undef GOTOXY

namespace
{
    void RendezVous ()
    {
        CptThreads--;
        while(CptThreads)
        {
            condition_variable Cond;
            mutex mut;
            unique_lock<boost::mutex> lock(mut);
            Cond.wait(lock);
        }
    }

    class CPassant {
    private:
        static unsigned NbCPassant;

        unsigned NbP;
        unsigned TpsAvantRDV;
        unsigned TpsApresRDV;

    public:

        CPassant (unsigned TpsAv, unsigned TpsAp)
        :NbP(NbCPassant++) , TpsAvantRDV (TpsAv), TpsApresRDV (TpsAp) {}

        void operator () ()
        {
            sleep(TpsAvantRDV);
            RendezVous();
            sleep(TpsApresRDV);
        }

    };
}

void nsUtil::SleepChronogram (unsigned Num, 
                              unsigned & Col,
                              char Status, 
                              unsigned Duree,
                              boost::mutex & ioMutex,
                              unsigned Decal   /* = 10u */,
                              unsigned Periode /* = 1u  */)
    throw (std::ios_base::failure)
{
    for (unsigned i = Duree; i--; )
    {
        {
            lock_guard <mutex> Lock (ioMutex);
            cout << gotoxy (Col++, Num + Decal) << Status << flush;
        }
        this_thread::sleep (seconds (Periode));
    }

} // SleepChronogr()

int main (int argc, char ** argv)
{
    if (argc != 1)
        return 0;
    int NbThreads = atoi(argv[1]);
    if (NbThreads <1)
        return 0;

    vector <CPassant> VCPassant;
    VCPassant.reserve(NbThreads);
    for (int DelaiAv, DelaiAp, i (0) ; i < NbThreads; ++i)
    {
        cin >> DelaiAv >> DelaiAp;
        VCPassant.push_back(CPassant(DelaiAv, DelaiAp));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:50:36.587

您只是在代码中*声明* `NbCPassant`，您还需要*定义*它：

```
class CPassant { 
private:
    // Declare the variable
    static unsigned NbCPassant;
    ...
};

// Define the variable
unsigned CPassant::NbCPassant; 
```

# ajax - 在 Primefaces 组件中处理基本的 ajax 事件

> ID：13684582
> 
> 赞同：0
> 
> 时间：2012-12-03T13:45:57.363
> 
> 标签：ajax, jsf, primefaces

首先，我仍在学习结构及其工作原理。我在网上搜索了以下问题的合适且简单的答案：

有没有办法调整所有其他基本的 ajax 事件，比如悬停和点击 Primefaces 组件？

例如，如果您单击上一个或下一个按钮，我会知道被调用的事件`<p:schedule>`。文档说只有“dateSelect、eventMove、eventResize”和“eventSelect”作为可调用的ajax事件。但这还不够，如果您想构建一个复杂的应用程序并将 an`<p:calendar>`与`<p:schedule>`. 您需要知道时间表何时切换月份或年份。

我希望有人能给我一个清晰易懂的答案。

谢谢和最好的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:27:28.513

由于您没有指定所需的事件，因此您的答案将与问题一样清楚。

primefaces 对象只能识别它们被编程的事件。如果您需要获取特定类型的事件，您可以：

1）查看primefaces是否支持该事件。把它放在一个`<p:ajax`标签中，看看它是否有效。

2）看看标准的JSF ajax API是否支持它。

3）如果一切都失败了，您可以尝试将jQuery脚本与页面一起放置，以处理事件并从客户端进行调用。

* * *

并且大量使用 jQuery 插件来呈现它`<p:calendar`，`<p:schedule`我怀疑你可以在没有客户端 jquery 的情况下在月份选择器或呈现界面中的任何其他东西上获取事件。

# mysql - 在 Sql 的 select 语句中将数字作为列名传递

> ID：13684583
> 
> 赞同：2
> 
> 时间：2012-12-03T13:46:01.943
> 
> 标签：mysql

我的查询是这样的

```
select 5 from mytable_name; 
```

然后输出就像列名 5 并且值是 5 打印该表中存在的最大行数。任何人都可以说出这个查询为什么会这样工作的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:49:28.533

> 任何人都可以说出这个查询为什么会这样工作的原因吗？

您正在`'5'`为表中的每一行选择一个字符串文字值：

```
select 5 from mytable_name; 
```

这很好用。因为在`SELECT`语句中你可以选择：

*   列参考，
*   像你的情况一样的字面价值。
*   功能。
*   价值表达。
*   选择表达式。

如标准 SQL ^(**1**)所定义：

![在此处输入图像描述](../Images/5dd127a112f5e4163f6bdae397dcaa10.png)

**更新：**

但是，如果您有一列的名称是一个数字，就像您的情况一样，您必须对其进行转义才能选择其中的值，如下所示：

```
 SELECT `143` FROM Table1; 
```

这将选择列中的所有行`143`。

但是这个：

```
 SELECT 143 FROM Table1; 
```

将为表中找到的每一行选择字符串文字 143。

**请注意：**如果可能，尽量不要以这种方式命名这些列，建议和最佳实践不要这样做。

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/60de8/1)

* * *

## **更新 2：**

请注意，如果您选择`143`or `'143'`，甚至`"143"`这将选择文字值`143`而不是列日期。以下是相同的：

```
SELECT 143 FROM Table1;
SELECT '143' FROM Table1;
SELECT "143" FROM Table1; 
```

所有这些`SELECT`都不会选择列中的数据，它们将选择文字值`143`而不是列数据。看这个演示：

## [演示](http://sqlfiddle.com/#!2/60de8/6)

您必须使用以下两个来转义列名：

```
`` 
```

像这样：

```
SELECT `143` FROM table1; 
```

不是：

```
SELECT '143' FROM table1' 
```

就像我在这里所做的那样：

## [正确的演示](http://sqlfiddle.com/#!2/60de8/7)

* * *

^(1^(图片来自：[**对于普通人的 SQL 查询**](https://rads.stackoverflow.com/amzn/click/0201433362)))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:48:03.433

```
from mytable 
```

如果没有`where`缩小该结果的条件，将从您的表中选择所有行。和

```
select 5 
```

将为每条记录选择常数`5`。如果您在部件中使用列名，`select`那么将为每条记录选择该值。

数据库引擎将命名结果`5`，因为它会自动生成一个列名，而 5 是它的逻辑名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:48:39.190

你可能想要'SELECT * FROM mytable_name LIMIT 0,5'？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:52:23.063

使用该命令`select 5 ...`，您正在查看一个固定值。运行以下命令的相同操作：`select "test"`，您将显示一个固定的字符串。
使用`... from mytable_name`您正在查找此表的所有记录。

有了这个我们可以得出结论，对于表中的每条记录都`mytable_name`显示了固定值`"5"`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T13:48:41.210

由于您的 where 子句中没有任何内容，因此它正在选择表中的所有行。您没有选择任何列的事实是无关紧要的 - 您仍然会得到表中每一行的结果。

# c# - .Net Array() 与 [] 相同

> ID：13684589
> 
> 赞同：0
> 
> 时间：2012-12-03T13:46:24.817
> 
> 标签：c#, .net

愚蠢的问题，但是当我试图创建一个 System.Collections.Big 程序集时，我必须问一个问题，其中充满了使用更大索引的各种集合。

因此，请确认我是否正确，Array() 类不是 C# 中数组 ([]) 的简单包装器，而是真正的交易，对吗？因此，如果我升级 Array 以使用更大的索引器，我可以使用 [] 运算符来获取/设置内容，而不用担心一些隐藏的讨厌，对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:49:26.627

你是对的，`Array`但是`[]`你不能扩展它。

也就是说，即使`Array`没有密封，你也不能从中派生——系统不会让你。所以你也不能修改`Array`'s 的索引机制。

但是你为什么要这样做呢？

**`BigArray<T>`.NET Framework 中已经存在**EDIT :-)，请参阅**[http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx](http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx)**

# google-chrome - 清单无效 json 错误

> ID：13684590
> 
> 赞同：4
> 
> 时间：2012-12-03T13:46:26.583
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试更新我的扩展程序，但我收到以下错误消息。消息清晰但没有第 30 行。有什么问题？

![在此处输入图像描述](../Images/65852555a33cdc2143222a7204864a8f.png)

**清单.json**

```
{
    "name": "IdeaShop Information",
    "description": "IdeaShop siteleri ile ilgili bilgileri gosterir",
    "manifest_version": 2,
    "version": "1.0",
    "permissions": [
        "tabs", 
        "http://*/*", 
        "https://*/*"
    ],
    "browser_action": {
        "default_title": "IdeaShop Information",
        "default_icon": "icon.png",
        "popup": "popup.html"
    }
  ]
} 
```

**目录结构** ![在此处输入图像描述](../Images/fdbc009db918582eac150e871ab69caa.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:48:16.193

结尾好像多了一个`]`。

* * *

[您可以在jsonlint.com](http://jsonlint.com/)验证您的 json 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:52:00.693

最后一行的额外方括号导致错误。此类消息中显示的行号不正确。

# php - Facebook：使用应用访问令牌将图像发布到页面相册

> ID：13684599
> 
> 赞同：1
> 
> 时间：2012-12-03T13:46:49.297
> 
> 标签：php, facebook, facebook-graph-api

**如何授予 Facebook 应用程序将图像发布到 Facebook 主页相册的权限？**

这是我使用的代码：

```
$args = array(
  'image' => '@' . $img,
  'aid' => $album_id,
  'no_story' => 1,
  'access_token' => $app_access_token
);

$photo = $facebook->api($album_id . '/photos', 'post', $args); 
```

这是我得到的错误：

> 未捕获的 OAuthException：请求此资源需要用户访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T11:07:17.947

以防万一任何用户偶然发现这篇文章，解决这个错误 1> $facebook->setaccesstoken() to facebook page's access token 。facebook 页面访问令牌可通过发出 $facebook->api('/user_id/accounts') 获得，这里用户 id 是页面管理员的 id。

2> 设置访问令牌后，您可以使用 facebook->api 使用相册 ID 将照片发布到相册 $facebook->api('album_id/photos', 'post', array( 'source' => '@'. $照片));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:28:21.290

这是我用来将照片发布到 Facebook 相册的代码。我希望它会有所帮助。

```
<?php    
        include '../src/facebook.php';
        $config['appId']='app_id';
        $config['secret']='API_KEY';
        $config['fileUpload'] = true;

        $param['redirect_uri']='your_redirect_url';
        $param['scope']=',publish_stream,user_photos';

        $facebook=new Facebook($config);
        $userid=$facebook->getUser();

        if($userid){

            try{

  $args = array(
  'image' => '@' . $img,
  'message'=>$message,
);

$photo = $facebook->api('/'.$album_id . '/photos', 'post', $args);

    }
    catch(FacebookApiException $e){

       echo $e->getMessage();//Get OAuth Error

    }
    else{
       $loginUrl=$facebook->getLoginUrl($param);
      echo "Please <a href='$loginUrl'>Click Here</a> To Login";
    }

?> 
```

[在这里](https://developers.facebook.com/docs/reference/php/facebook-api/)了解更多

# c++ - 使用（希望是标准的）C++ 工具读取 FILE*？

> ID：13684601
> 
> 赞同：1
> 
> 时间：2012-12-03T13:46:53.477
> 
> 标签：c++, linux

我需要从我的程序中读取另一个程序的输出。为此，我可以使用 popen()。这样，我得到一个 FILE* 到可以在我的程序中解析的程序输出。如何从我的程序中读取和解析 popen() 返回值的内容？或者，在某处是否有更像 C++ 的 popen 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:55:33.713

您可以创建一个流缓冲区做道德等价，`popen()`也可以创建一个流缓冲区包装`FILE*`。一旦你得到一个流缓冲区，你就可以使用它，`std::istream`这似乎是你打算做的。从 a 读取的简单（未经测试的）流缓冲区`FILE*`如下所示：

```
struct FILEbuf
    : std::streambuf {
    FILEbuf(FILE* fp): fp_(fp) {}
    int underflow() {
        if (this->gptr() == this->egptr()) {
            int size = fread(this->buffer_, 1, s_size, this->fp_);
            if (0 < size) {
                this->setg(this->buffer_, this->buffer_, this->buffer_ + size);
            }
        }
        return this->gptr() == this->egptr()
            ? traits_type::eof()
            : traits_type::to_int_type(*gptr());
     }
     FILE* fp_;
     enum { s_size = 1024 };
     char  buffer_[s_size];
}; 
```

我认为我打错了一些东西，但大致上这个想法确实有效：只需从`FILE*`流缓冲区中读取。或者，创建从衍生进程读取的流。这需要几个特定于平台的调用`fork()`, `exec..()`, `pipe()`, `close()`, `dup2()`（可能在这里也忘记了一些东西），但也可以完成。

可以使用像上面这样的流缓冲区，例如，像这样：

```
int main()
{
    FILEbuf      sbuf(fopen("pstream.cpp", "r"));
    std::istream in(&sbuf);
    for (std::string line; std::getline(in, line); ) {
        std::cout << line << '\n';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:15:36.677

在`FILE*`调用`stdio_filebuf`（GNU 实现）或`stdiobuf`. 我认为这不是一个标准化的东西，但如果你用谷歌搜索`stdiobuf`你会发现它在许多平台上都可用。这是一个工作示例，说明如何将它与`FILE*`从 返回的指针一起使用`popen`，使用 gcc 4.5.0 编译并在 Linux 机器上进行测试：

```
#include <ext/stdio_filebuf.h>
#include <stdio.h>
#include <fstream>
#include <string>
#include <iostream>

using namespace std;

int main() {
    FILE* f = popen("ls", "r");
    __gnu_cxx::stdio_filebuf<char> fdbuf(f, std::ios::in);

    std::ifstream in;
    in.std::ios::rdbuf(&fdbuf);

    string s;
    in >> s;
    cout << s;

    pclose(f);
    return 0;
} 
```

# java - 使用 AES 加密/解密，盐大小为 32

> ID：13684602
> 
> 赞同：2
> 
> 时间：2012-12-03T13:46:54.663
> 
> 标签：java, encryption, aes

我必须创建一个使用 AES、盐大小为 32 和给定密码发送加密字符串的 weservice。我正在尝试使我的代码正常工作，但是当我尝试解密他们给我的字符串以检查解密是否正常工作时，出现错误：

> `Exception in thread "main" javax.crypto.BadPaddingException: Given final block not properly padded`

我的代码如下：

```
import javax.crypto.*;
import javax.crypto.spec.*;
import java.security.*;
import java.security.spec.InvalidKeySpecException;

/**
 * parts of this code were copied from the StandardPBEByteEncryptor class from the  Jasypt (www.jasypt.org) project
 */

public class AESCrypt {
    //private final String KEY_ALGORITHM = "PBEWITHSHA256AND128BITAES-CBC-BC";
    private final String KEY_ALGORITHM = "PBEWithSHA256And256BitAES-CBC-BC";
    private final String MODE_PADDING = "/CBC/PKCS5Padding";
    private final int DEFAULT_SALT_SIZE_BYTES = 32;

    private final SecureRandom rand;

    private final String passwd = "8g5qT74KdUY";

    public AESCrypt() throws Exception {
    rand = SecureRandom.getInstance("SHA1PRNG");
}

private byte[] generateSalt(int size) {
    byte[] salt = new byte[size];
    rand.nextBytes(salt);

    return salt;
}

private SecretKey generateKey(String algorithm, int keySize, byte[] salt) throws NoSuchProviderException, NoSuchAlgorithmException, InvalidKeySpecException {
    SecretKeyFactory factory = SecretKeyFactory.getInstance(KEY_ALGORITHM);
    PBEKeySpec pbeKeySpec = new PBEKeySpec(passwd.toCharArray(), salt, 100000);
    SecretKey tmpKey = factory.generateSecret(pbeKeySpec);
    byte[] keyBytes = new byte[keySize / 8];
    System.arraycopy(tmpKey.getEncoded(), 0, keyBytes, 0, keyBytes.length);

    return new SecretKeySpec(keyBytes, algorithm);
}

private byte[] generateIV(Cipher cipher) {
    byte[] iv = new byte[cipher.getBlockSize()];
    rand.nextBytes(iv);

    return iv;
}

private byte[] appendArrays(byte[] firstArray, byte[] secondArray) {
    final byte[] result = new byte[firstArray.length + secondArray.length];

    System.arraycopy(firstArray, 0, result, 0, firstArray.length);
    System.arraycopy(secondArray, 0, result, firstArray.length, secondArray.length);

        return result;
}

public byte[] encrypt(String algorithm, int keySize, final byte[] message) throws Exception {
    Cipher cipher = Cipher.getInstance(algorithm + MODE_PADDING);

    // The salt size for the chosen algorithm is set to be equal
    // to the algorithm's block size (if it is a block algorithm).
    int saltSizeBytes = DEFAULT_SALT_SIZE_BYTES;
    int algorithmBlockSize = cipher.getBlockSize();
    if (algorithmBlockSize > 0) {
        saltSizeBytes = algorithmBlockSize;
    }

    // Create salt
    final byte[] salt = generateSalt(saltSizeBytes);

    SecretKey key = generateKey(algorithm, keySize, salt);

    // create a new IV for each encryption
    final IvParameterSpec ivParamSpec = new IvParameterSpec(generateIV(cipher));

    // Perform encryption using the Cipher
    cipher.init(Cipher.ENCRYPT_MODE, key, ivParamSpec);
    byte[] encryptedMessage = cipher.doFinal(message);

    // append the IV and salt
    encryptedMessage = appendArrays(ivParamSpec.getIV(), encryptedMessage);
    encryptedMessage = appendArrays(salt, encryptedMessage);

    return encryptedMessage;
}

public byte[] decrypt(String algorithm, int keySize, final byte[] encryptedMessage) throws Exception {
    Cipher cipher = Cipher.getInstance(algorithm + MODE_PADDING);

    // determine the salt size for the first layer of encryption
    int saltSizeBytes = DEFAULT_SALT_SIZE_BYTES;
    int algorithmBlockSize = cipher.getBlockSize();
    if (algorithmBlockSize > 0) {
        saltSizeBytes = algorithmBlockSize;
    }
    System.out.println("saltSizeBytes:"+saltSizeBytes);

    byte[] decryptedMessage = new byte[encryptedMessage.length];
    System.arraycopy(encryptedMessage, 0, decryptedMessage, 0, encryptedMessage.length);

    // extract the salt and IV from the incoming message
    byte[] salt = null;
    byte[] iv = null;
    byte[] encryptedMessageKernel = null;
    final int saltStart = 0;
    final int saltSize = (saltSizeBytes < decryptedMessage.length ? saltSizeBytes : decryptedMessage.length);
    //final int saltSize = 32;
    //System.out.println("saltSize:"+saltSize);

    final int ivStart = (saltSizeBytes < decryptedMessage.length ? saltSizeBytes : decryptedMessage.length);
    final int ivSize = cipher.getBlockSize();
    final int encMesKernelStart = (saltSizeBytes + ivSize < decryptedMessage.length ? saltSizeBytes + ivSize : decryptedMessage.length);
    final int encMesKernelSize = (saltSizeBytes + ivSize < decryptedMessage.length ? (decryptedMessage.length - saltSizeBytes - ivSize) : 0);

    salt = new byte[saltSize];
    iv = new byte[ivSize];
    System.out.println("saltSize:"+saltSize);
    System.out.println("ivSize:"+ivSize);

    encryptedMessageKernel = new byte[encMesKernelSize];
    System.out.println("encryptedMessageKernel");

    System.arraycopy(decryptedMessage, saltStart, salt, 0, saltSize);
    System.arraycopy(decryptedMessage, ivStart, iv, 0, ivSize);
    System.arraycopy(decryptedMessage, encMesKernelStart, encryptedMessageKernel, 0, encMesKernelSize);

    SecretKey key = generateKey(algorithm, keySize, salt);
    System.out.println("ekey");

    IvParameterSpec ivParamSpec = new IvParameterSpec(iv);

    // Perform decryption using the Cipher
    cipher.init(Cipher.DECRYPT_MODE, key, ivParamSpec);
    decryptedMessage = cipher.doFinal(encryptedMessageKernel);

    // Return the results
    return decryptedMessage;
} 
```

现在我有这个信息，我知道它是加密的，我想解密：

```
Original String: 12334567
 Crypted String: SsH6NO9a64g0U7szvFwSbCkdUF5dNgmxgpt2jU/nFVntG3r2nYxgxLRXri4MW9Z2
       Password: 8g5qT74KdUY 
```

当我尝试解密时，`SsH...`我得到了给定的错误。问题出在哪里？这就是我所做的：

```
String toDecrypt = "SsH6NO9a64g0U7szvFwSbCkdUF5dNgmxgpt2jU/nFVntG3r2nYxgxLRXri4MW9Z2"; 
byte[] criptata = Base64.decode(toDecrypt); 
byte[] decriptata = engine.decrypt("AES", 128, criptata);
String msgdecriptato = new String(decriptata); 
```

这给了我一个错误。

这是他们用来解密的 C# 代码：

```
private const int SaltSize = 32;

/// <summary>
///     Decrypts the ciphertext using the Key.
/// </summary>
/// <param name="ciphertext">The ciphertext to decrypt.</param>
/// <param name="key">The plain text encryption key.</param>
/// <returns>The decrypted text.</returns>
public  string Decrypt(string ciphertext, string key)
{
        if (string.IsNullOrEmpty(ciphertext))
            throw new ArgumentNullException("ciphertext");
        if (string.IsNullOrEmpty(key))
            throw new ArgumentNullException("key");

        // Extract the salt from our ciphertext
        var allTheBytes = Convert.FromBase64String(ciphertext);
        var saltBytes = allTheBytes.Take(SaltSize).ToArray();
        var ciphertextBytes = allTheBytes.Skip(SaltSize).Take(allTheBytes.Length - SaltSize).ToArray();

        using (var keyDerivationFunction = new Rfc2898DeriveBytes(key, saltBytes))
        {
            // Derive the previous IV from the Key and Salt
            var keyBytes = keyDerivationFunction.GetBytes(32);
            var ivBytes = keyDerivationFunction.GetBytes(16);

            // Create a decrytor to perform the stream transform.
            // Create the streams used for decryption.
            // The default Cipher Mode is CBC and the Padding is PKCS7 which are both good
            using (var aesManaged = new AesManaged())
            using (var decryptor = aesManaged.CreateDecryptor(keyBytes, ivBytes))
            using (var memoryStream = new MemoryStream(ciphertextBytes))
            using (var cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read))
            using (var streamReader = new StreamReader(cryptoStream))
            {
                // Return the decrypted bytes from the decrypting stream.
                return streamReader.ReadToEnd();
            }
        }
    } 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:18:53.203

我已经运行了您的代码，您的原始字符串似乎有问题。你必须知道，如果它是用 128 位密钥加密的，它不能用 256 位密钥加密。如果键大小不匹配，则会出现错误的填充错误。这是您的代码，其主要功能有效：

```
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.SecureRandom;
import java.security.Security;
import java.security.spec.InvalidKeySpecException;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;

import org.bouncycastle.jce.provider.BouncyCastleProvider;
import org.bouncycastle.util.encoders.Base64;

/**
 * parts of this code were copied from the StandardPBEByteEncryptor class from
 * the Jasypt (www.jasypt.org) project
 */

public class AESCrypt {
    // private final String KEY_ALGORITHM = "PBEWITHSHA256AND128BITAES-CBC-BC";
    private final String KEY_ALGORITHM = "PBEWithSHA256And256BitAES-CBC-BC";
    private final String MODE_PADDING = "/CBC/PKCS5Padding";
    private final int DEFAULT_SALT_SIZE_BYTES = 32;

    private final SecureRandom rand;

    private final String passwd = "8g5qT74KdUY";

    public AESCrypt() throws Exception {
        rand = SecureRandom.getInstance("SHA1PRNG");
    }

    private byte[] generateSalt(int size) {
        byte[] salt = new byte[size];
        rand.nextBytes(salt);

        return salt;
    }

    private SecretKey generateKey(String algorithm, int keySize, byte[] salt)
            throws NoSuchProviderException, NoSuchAlgorithmException,
            InvalidKeySpecException {
        SecretKeyFactory factory = SecretKeyFactory.getInstance(KEY_ALGORITHM);
        PBEKeySpec pbeKeySpec = new PBEKeySpec(passwd.toCharArray(), salt,
                100000);
        SecretKey tmpKey = factory.generateSecret(pbeKeySpec);
        byte[] keyBytes = new byte[keySize / 8];
        System.arraycopy(tmpKey.getEncoded(), 0, keyBytes, 0, keyBytes.length);

        return new SecretKeySpec(keyBytes, algorithm);
    }

    private byte[] generateIV(Cipher cipher) {
        byte[] iv = new byte[cipher.getBlockSize()];
        rand.nextBytes(iv);

        return iv;
    }

    private byte[] appendArrays(byte[] firstArray, byte[] secondArray) {
        final byte[] result = new byte[firstArray.length + secondArray.length];

        System.arraycopy(firstArray, 0, result, 0, firstArray.length);
        System.arraycopy(secondArray, 0, result, firstArray.length,
                secondArray.length);

        return result;
    }

    public byte[] encrypt(String algorithm, int keySize, final byte[] message)
            throws Exception {
        Cipher cipher = Cipher.getInstance(algorithm + MODE_PADDING);

        // The salt size for the chosen algorithm is set to be equal
        // to the algorithm's block size (if it is a block algorithm).
        int saltSizeBytes = DEFAULT_SALT_SIZE_BYTES;
        int algorithmBlockSize = cipher.getBlockSize();
        if (algorithmBlockSize > 0) {
            saltSizeBytes = algorithmBlockSize;
        }

        // Create salt
        final byte[] salt = generateSalt(saltSizeBytes);

        SecretKey key = generateKey(algorithm, keySize, salt);

        // create a new IV for each encryption
        final IvParameterSpec ivParamSpec = new IvParameterSpec(
                generateIV(cipher));

        // Perform encryption using the Cipher
        cipher.init(Cipher.ENCRYPT_MODE, key, ivParamSpec);
        byte[] encryptedMessage = cipher.doFinal(message);

        // append the IV and salt
        encryptedMessage = appendArrays(ivParamSpec.getIV(), encryptedMessage);
        encryptedMessage = appendArrays(salt, encryptedMessage);

        return encryptedMessage;
    }

    public byte[] decrypt(String algorithm, int keySize,
            final byte[] encryptedMessage) throws Exception {
        Cipher cipher = Cipher.getInstance(algorithm + MODE_PADDING);

        // determine the salt size for the first layer of encryption
        int saltSizeBytes = DEFAULT_SALT_SIZE_BYTES;
        int algorithmBlockSize = cipher.getBlockSize();
        if (algorithmBlockSize > 0) {
            saltSizeBytes = algorithmBlockSize;
        }
        System.out.println("saltSizeBytes:" + saltSizeBytes);

        byte[] decryptedMessage = new byte[encryptedMessage.length];
        System.arraycopy(encryptedMessage, 0, decryptedMessage, 0,
                encryptedMessage.length);

        // extract the salt and IV from the incoming message
        byte[] salt = null;
        byte[] iv = null;
        byte[] encryptedMessageKernel = null;
        final int saltStart = 0;
        final int saltSize = (saltSizeBytes < decryptedMessage.length ? saltSizeBytes
                : decryptedMessage.length);
        // final int saltSize = 32;
        // System.out.println("saltSize:"+saltSize);

        final int ivStart = (saltSizeBytes < decryptedMessage.length ? saltSizeBytes
                : decryptedMessage.length);
        final int ivSize = cipher.getBlockSize();
        final int encMesKernelStart = (saltSizeBytes + ivSize < decryptedMessage.length ? saltSizeBytes
                + ivSize
                : decryptedMessage.length);
        final int encMesKernelSize = (saltSizeBytes + ivSize < decryptedMessage.length ? (decryptedMessage.length
                - saltSizeBytes - ivSize)
                : 0);

        salt = new byte[saltSize];
        iv = new byte[ivSize];
        System.out.println("saltSize:" + saltSize);
        System.out.println("ivSize:" + ivSize);

        encryptedMessageKernel = new byte[encMesKernelSize];
        System.out.println("encryptedMessageKernel");

        System.arraycopy(decryptedMessage, saltStart, salt, 0, saltSize);
        System.arraycopy(decryptedMessage, ivStart, iv, 0, ivSize);
        System.arraycopy(decryptedMessage, encMesKernelStart,
                encryptedMessageKernel, 0, encMesKernelSize);

        SecretKey key = generateKey(algorithm, keySize, salt);
        System.out.println("ekey");

        IvParameterSpec ivParamSpec = new IvParameterSpec(iv);

        // Perform decryption using the Cipher
        cipher.init(Cipher.DECRYPT_MODE, key, ivParamSpec);
        decryptedMessage = cipher.doFinal(encryptedMessageKernel);

        // Return the results
        return decryptedMessage;
    }

    public static void main(String[] args) throws Exception {
        Security.addProvider(new BouncyCastleProvider());
        AESCrypt aesCrypt = new AESCrypt();
        String originalText = "1234567";
        String toDecrypt = new String(Base64.encode(aesCrypt.encrypt("AES", 256, originalText.getBytes())));
        System.out.println(toDecrypt);

        byte[] criptata = Base64.decode(toDecrypt); 
        byte[] decriptata = aesCrypt.decrypt("AES", 256, criptata);
        String msgdecriptato = new String(decriptata); 
        System.out.println(msgdecriptato);
        if (!originalText.equals(msgdecriptato)) {
            throw new IllegalStateException("Strings do not match!");
        }
    }

} 
```

# php - 如何设置 Backbone Model.idAttribute？

> ID：13684607
> 
> 赞同：2
> 
> 时间：2012-12-03T13:47:09.573
> 
> 标签：php, javascript, mongodb, backbone.js, lithium

我正在使用带有主干的 MongoDb/Lithium php 框架。

我希望我的所有模型 id(s) 和 idAttribute(s) 与我的数据库文档 id 相同（即 '_id'/mongoid）

问题：

1.  当我打印 model.idAttribute 的值时，它只显示为 _id。
2.  当我打印 model.get('idAttriubte') 时，它是未定义的。
3.  如何确保 idAttribute 设置为与数据库 id/mongoid 相同？

这是模型类：

```
window.app.IHoliday = Backbone.Model.extend({
    urlRoot: HOLIDAY_URL,
    idAttribute: '_id',
    id: '_id',
    // Default attributes for the holiday.
    defaults: {
    },

    initialize: function(props) {
    },      
}); 
```

这是视图代码，在模型上调用 fetch。文档的 mongoid 作为隐藏输入 (holiday_id) 传递到此页面。

```
console.log('Holiday URL:' + HOLIDAY_URL );
        var Holiday = new window.app.IHoliday({ _id: holiday_id });
        console.log('HOLIDAY before fetch: \n' + JSON.stringify(Holiday));
        Holiday.fetch(
                {
                    success: function(){
                        //alert('Holiday fetched:' + JSON.stringify(Holiday));
                        console.log('HOLIDAY Fetched: \n' + JSON.stringify(Holiday));
                        console.log('Holiday name:' + Holiday.get('holiday_name'));
                        console.log('Holiday id:' + Holiday.id);
                        console.log('Holiday idAttribute:' + Holiday.idAttribute);
                        console.log('Holiday idAttribute:' + Holiday.get('idAttribute'));
                    }
                }); 
```

firebug 控制台的输出：

```
HOLIDAY before fetch:{"_id":"50bcaab24fbe3dfc1700000b"}
GET http://localhost:8080/li3/holidays/load/50bcaab24fbe3dfc1700000b 200 OK

HOLIDAY Fetched: 
{"_id":"50bcaab24fbe3dfc1700000b","holiday_name":"eeeeeeeeeeeeeeeee","description":"","star_rating":"3","holiday_type":"family","rooms":"1","adults":"2","child":"0","emails":""}

Holiday name:eeeeeeeeeeeeeeeee
Holiday id:50bcaab24fbe3dfc1700000b
Holiday idAttribute:_id
Holiday idAttribute:undefined 
```

编辑：以下工作......在模型类中注释掉 id 条目后：

```
 window.app.IHoliday = Backbone.Model.extend({
    urlRoot: HOLIDAY_URL,
    //id: '_id',
    idAttribute: '_id',
    // Default attributes for the holiday.
    defaults: {
    },

    initialize: function(props) {
    }, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:55:53.197

从骨干[文档](http://backbonejs.org/#Model-idAttribute)：

> 如果您直接与使用不同唯一键的后端（CouchDB、MongoDB）通信，您可以设置模型的 idAttribute 以透明地从该键映射到 id。

因此`idAttribute`，只需告诉您的 Model 类，任何与 's 值具有相同键的属性`idAttribute`也应复制到`id`. 在 Backbone[源代码](http://backbonejs.org/docs/backbone.html#section-44)中，这是按如下方式完成的：

```
if (this.idAttribute in attrs) this.id = attrs[this.idAttribute]; 
```

基本上，如果您尝试设置与 同名的属性`idaAttribute`，该值也会被复制到`id`.

所以要回答你的问题：`idAttribute`不存储`id`，但它存储包含属性的名称`id`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T13:53:49.660

`idAttribute`包含将用作 id 的类成员的名称。因此，如果您使用`idAttribute: '_id'`，Backbone 将使用该成员`_id`作为您班级的 id。

如果您想使用该属性`holiday_id`作为您的班级的 id `IHoliday`，您可以尝试：

```
window.app.IHoliday = Backbone.Model.extend({
    urlRoot: HOLIDAY_URL,
    idAttribute: 'holiday_id',
    // Default attributes for the holiday.
    defaults: {
    },

    initialize: function(props) {
    },      
});

var Holiday = new window.app.IHoliday({holiday_id : holiday_id }); 
```

Backbone 将使用该`holiday_id`属性而不是常规`id`属性。

# magento - Magento 更改产品名称添加到购物车

> ID：13684610
> 
> 赞同：3
> 
> 时间：2012-12-03T13:47:34.603
> 
> 标签：magento, cart

我想更改某些产品的一些值，同时将它们添加到 Magento CE 1.7 中的购物车

`checkout_cart_add_product_complete`我正在为此尝试观察者。如果我尝试更改产品名称或产品图片，更改价格 (CustomPrice) 效果很好，它没有保存。

有没有办法在添加到购物车时更改此属性？

```
public function checkout_cart_add_product_complete(Varien_Event_Observer $observer) {
    [...]
            // Set new Price
            $lastAddedItem->setOriginalCustomPrice($originalProduct->getPrice());
            $lastAddedItem->setCustomPrice($originalProduct->getPrice());

            // Set Product-Name
            $lastAddedItem->setName($originalProduct->getName());

            // Set Product-Images
            $lastAddedItem->setImage($originalProduct->getImage());
            $lastAddedItem->setSmallImage($originalProduct->getSmallImage());
            $lastAddedItem->setThumbnail($originalProduct->getThumbnail());

            // Save updated Item and Cart
            //$lastAddedItem->save();
            Mage::getSingleton('checkout/cart')->save();

            // Recalc Totals and save
            $quote->setTotalsCollectedFlag(false);
            $quote->collectTotals();
            $quote->save();

            Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T19:07:23.213

每次保存（更新）产品时，函数 Mage_Sales_Model_Quote_Item::setProduct 都会重置一些基本信息。幸运的是，您可以锁定一个事件“sales_quote_item_set_product”。

配置文件

```
<config>
...
    <global>
        <events>
            <sales_quote_item_set_product>
                <observers>
                    <samples>
                        <type>singleton</type>
                        <class>samples/observer</class>
                        <method>salesQuoteItemSetProduct</method>
                    </samples>
                </observers>
            </sales_quote_item_set_product>
        </events>
    <global>
...
</config> 
```

观察者.php

```
class Mynamespace_Samples_Model_Observer
{
    public function salesQuoteItemSetProduct(Varien_Event_Observer $observer)
    {
        /* @var $item Mage_Sales_Model_Quote_Item */
        $item = $observer->getQuoteItem();

        $item->setName('Ians custom product name');

        return $this;
    }
} 
```

# php - Apache Mod Rewrite 保持获取参数

> ID：13684612
> 
> 赞同：0
> 
> 时间：2012-12-03T13:47:41.530
> 
> 标签：php, apache, mod-rewrite

首先，我不是 mod rewrite 方面的专家，但我有一个需要重定向的 URL。

原始网址是`categories.asp?cat1=1&cat2=2&cat3=58&cat4=96`

我需要重定向到`/store/browse/category/TRADITIONAL-BRIDGE-SINK-MIXER/product-details/1901-Traditional-Bridge-Sink-Mixer-NDSMC`

显然会有很多这样的事情要做，我很高兴依次编写每条规则。

我希望这是有道理的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:22:32.157

我想还有很多事情要做，而不仅仅是 mod_rewrite。

您首先需要实现这一点：

*   允许将每个类别和产品的 URL 部分存储在数据库中的某个位置（可能基于语言）
*   通过连接每个类别的这些 URL 部分来显示产品的 URL，直到具体产品
    *   假设产品链接到的类别的关键字将是`TRADITIONAL-BRIDGE-SINK-MIXER`，该产品的关键字将是`1901-Traditional-Bridge-Sink-Mixer-NDSMC`
    *   然后您可以生成此 URL：`/store/browse/category/TRADITIONAL-BRIDGE-SINK-MIXER/product-details/1901-Traditional-Bridge-Sink-Mixer-NDSMC`
*   然后在 .htaccess 你会有这样的东西：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^store\/browse\/category\/(.*)\/product-details\/(.*)$ product.php?category_id=$1&product_id=$2 [QSA,L] 
```

与类别相同，假设 URL`/store/browse/category/SINK-MIXER/TRADITIONAL-BRIDGE-SINK-MIXER/1901-Traditional-Bridge-Sink-Mixer-NDSMC`您将有如下规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^store\/browse\/category\/(.*)\/(.*)\/(.*)$ categories.php?category1_id=$1&category2_id=$2&category3_id=$3 [QSA,L] 
```

这不是一个解决方案，这只是一个起点......

# android - 在 Android Viewpager 中更改页面标题

> ID：13684615
> 
> 赞同：7
> 
> 时间：2012-12-03T13:47:51.717
> 
> 标签：android, android-fragments, android-viewpager, viewpagerindicator

我有一个`ViewPager`我正在使用 getPageTitle 方法来获取当前页面的标题。

这是适配器代码：

```
 @Override
    public Fragment getItem(int i) {
        details = productData.get(i);
        Fragment fragment = new ProductViewFragment();
        Bundle args = new Bundle();
        args.putInt(ProductViewFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return productData.size();
    }

    public CharSequence getPageTitle(int position) 
    {
      return (position+1)+" of "+myData.size();
    } 
```

现在我想更新上一​​个和下一个片段的页面标题。我想将它们命名为“上一个”和“下一个”。它也应该在后续页面上动态更新。

我能够获得当前页面的标题号。例如，当我查看第 5 个片段时，当前片段将正确显示标题。在 ViewPager 的两个角落，它在左侧显示上一页标题编号，在右侧显示下一页标题编号。现在，我想让页面标题左侧为“上一个”，右侧为“下一个”，类似于 Gmail 应用程序以及它在 ViewPager 中显示邮件计数的方式。

我想知道的主要事情是如何像在 Gmail 应用程序中那样访问/修改当前片段中下一个/上一个片段的页面标题数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T06:31:23.743

我基于`ViewPagerIndicator`.

您基本上会监听页面何时更改并告诉适配器根据当前位置显示不同的页面标题。

如果您有这些示例工作并且您只是替换这两个文件，然后尝试示例 Titles->Default 并且它对我来说很好......

将代码更改为`TestFragmentAdapter`这样：

```
package com.viewpagerindicator.sample;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import com.viewpagerindicator.IconPagerAdapter;

class TestFragmentAdapter extends FragmentPagerAdapter implements IconPagerAdapter {
    protected static final String[] CONTENT = new String[] { "This", "Is", "A", "Test", };
    protected static final int[] ICONS = new int[] {
            R.drawable.perm_group_calendar,
            R.drawable.perm_group_camera,
            R.drawable.perm_group_device_alarms,
            R.drawable.perm_group_location
    };

    private int mCount = CONTENT.length;

    // CHANGE STARTS HERE
    private int current_position=0;

    public void set_current_position(int i) {
        current_position = i;
    }
    // CHANGE ENDS HERE

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(CONTENT[position % CONTENT.length]);
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        // CHANGE STARTS HERE
        if (position == current_position-1) {
            return "Previous";
        } else if (position == current_position+1) {
            return "Next";
        }
        // CHANGE ENDS HERE
        return TestFragmentAdapter.CONTENT[position % CONTENT.length];
    }

    @Override
    public int getIconResId(int index) {
      return ICONS[index % ICONS.length];
    }

    public void setCount(int count) {
        if (count > 0 && count <= 10) {
            mCount = count;
            notifyDataSetChanged();
        }
    }
} 
```

`SampleTitlesDefault`看起来像这样的代码（添加了 OnPageChangeListener）

```
package com.viewpagerindicator.sample;

import android.os.Bundle;
import android.support.v4.view.ViewPager;

import com.viewpagerindicator.TitlePageIndicator;

// CHANGE ADDED implements.... HERE
public class SampleTitlesDefault extends BaseSampleActivity implements ViewPager.OnPageChangeListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_titles);

        mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        // CHANGE STARTS HERE
        mIndicator.setOnPageChangeListener(this);
        // CHANGE ENDS HERE
    }

    // CHANGE STARTS HERE
    @Override
    public void onPageScrolled(int i, float v, int i1) {
    }

    @Override
    public void onPageSelected(int i) {
        mPager = (ViewPager)findViewById(R.id.pager);
        ((TestFragmentAdapter)mPager.getAdapter()).set_current_position(i);
    }

    @Override
    public void onPageScrollStateChanged(int i) {
    }
    // CHANGE ENDS HERE
} 
```

# spring - EL 定义数组以输出对象属性

> ID：13684617
> 
> 赞同：1
> 
> 时间：2012-12-03T13:47:53.947
> 
> 标签：spring, jsp, el

在 PHP 中，我通常会这样做：

```
foreach(array('street','town','county','postcode') as $e) {
    echo $address[$e] . '<br/>';
} 
```

它简洁且易于使用。有没有办法在 EL 中做到这一点？我很难找到一种干净利落的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:55:46.750

通常，您将填充地图或列表服务器端，然后使用 JSTL 将它们输出到您的 JSP 上，每个循环如下所示：

```
<c:forEach items="${formBean.myMap}" varStatus="itm">
    <tr>      
      <td>${itm.key.propertyName}</td>
      <td>${itm.value.propertyName}</td> <!--which is same as below ...  -->
      <td>${formBean.myMap[itm.key].propertyName}</td>
    </tr>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:02:43.227

在标准 JSTL/EL 中没有类似的东西，但您可以使用[JSTL](https://stackoverflow.com/tags/jstl/info) [`fn:split()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/split.fn.html)将单个分隔字符串拆分为数组：

```
<c:forEach items="${fn:split('street,town,county,postcode', ',')}" var="e">
    ${address[e]}<br/>
</c:forEach> 
```

*（前提是`${address}`指向`Map`具有给定值作为键的 a 或具有给定属性的 Javabean）*

或者，如果`${address}`确实 a已经*只*`Map`包含这些键，您也可以只循环自身：*`Map`*

 *```
<c:forEach items="${address}" var="entry">
    ${entry.value}<br/>
</c:forEach> 
```

*（上面示例中的映射键可以由 打印`${entry.key}`；另请注意，您需要`LinkedHashMap`保持插入顺序）**

# iphone - 通过VNC在OSX上开发，如何连接iPhone？

> ID：13684619
> 
> 赞同：2
> 
> 时间：2012-12-03T13:47:59.877
> 
> 标签：iphone, xcode, vnc

我需要在 OSX 上通过 VNC 编写程序，我需要在 iPhone 上测试应用程序。

是否可以通过 VNC 连接 iPhone 以在 xcode 中显示以进行测试？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T13:57:35.460

是的，可以通过 VNC 连接 iPhone，确保已安装 VPN-USB 驱动程序，然后按照苹果[文档](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/128-Managing_Devices/devices.html)中给出的步骤进行操作。

你需要的东西：

*   你的私钥。
*   您的配置文件（添加了设备的 UUID）。
*   转到项目设置并将代码签名实体更改为您的分发配置文件。

然后您可以在通过 VNC 连接您的设备后构建和运行。

你可以关注[这个](http://mobiforge.com/developing/story/deploying-iphone-apps-real-devices)博客来做到这一点。

# java - 如何编写一个spring拦截器，它将在通用检查之前验证所有请求

> ID：13684625
> 
> 赞同：-3
> 
> 时间：2012-12-03T13:48:16.187
> 
> 标签：java, spring, interceptor

需要拦截所有传入的请求以验证它们。如果调用控制器成功，则向调用 jsp 页面返回错误消息。

如何使用 Spring 3 实现此实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:52:06.420

扩展`HandlerInterceptorAdapter`，您将拥有自己的拦截器。在这个扩展类中，覆盖方法`postHandle`。在此方法中，您将获得一个类型的对象`ModelAndView`作为参数，您可以根据需要更改目标视图。

# mysql - 触发器：将日期从一张表移动到另一张表

> ID：13684629
> 
> 赞同：0
> 
> 时间：2012-12-03T13:48:30.617
> 
> 标签：mysql, sql, triggers

这是我的代码：

```
create trigger term_ost after update on `payments`
for each row
begin
UPDATE `current` s 
INNER JOIN payments w ON w.id_thing = s.id_thing
INNER JOIN payments w ON w.id= s.id
SET s.`new_pay_date` = w.date;
end;
$$ 
```

它不工作。

我希望它在有人购买的东西有新的付款后设置新日期，并将字段日期中的最后一个日期更改为 new_pay_date 中的新日期。

@编辑

我正在尝试更改我的触发器，以便在将字段日期插入付款后从当前更新字段“new_pay_date”。

表电流：

```
curr_cash
new_pay_date
id_person
id_thing
sum_of_things 
```

摘要：当我向付款添加新数据时（例如某人为某物付款），我想在当前表中更新他的最后付款时间。在“sum_of_things”中，它汇总了客户支付的所有款项。

@edit 在这段代码之后：

```
 CREATE TRIGGER term_ost AFTER INSERT ON `payments`
FOR EACH ROW
BEGIN
    UPDATE `current`
        SET s.`new_pay_date` = NEW.date
    WHERE 
        s.id_thing = NEW.id
END; 
```

有错误：

```
INSERT INTO `mydb`.`payments` (
`id` ,
`date` ,
`id_thing` ,
`thing_cost`
)
VALUES (
'12312312322', '2012-12-11 15:00:00', '1', '500'
)

MySQL comment:
#1054 - Unknown column 's.new_pay_date' in 'field list' 
```

... :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:52:02.327

您`w`多次使用同一个表别名，这是不允许的。似乎您想加入多个列：

```
CREATE TRIGGER term_ost AFTER INSERT ON `payments`
FOR EACH ROW
BEGIN
    UPDATE `current`
        SET `new_pay_date` = NEW.date
    WHERE 
        id_thing = NEW.id
END; 
```

# android - 如何加载几乎没有可见 FPS 下降的 OpenGL ES 纹理？

> ID：13684630
> 
> 赞同：2
> 
> 时间：2012-12-03T13:48:35.010
> 
> 标签：android, opengl-es, textures

我有大约 2 GiB 的未压缩 RGBA 8888 格式的纹理（都是 256x256 瓦片）（RGB 565 纹理格式不是一个选项，因为有很多平滑的渐变和灰色阴影，它们具有 565 格式的绿色色调）。所以我按需加载它们，当它们应该变得可见并删除旧的时。问题是，当我将它们上传到 OpenGL 时，会出现令人讨厌的 FPS 下降。当前使用 OpenGL ES 1.1。

我在一个单独的线程中解码纹理（即 BitmapFactory.decodeStream(...)），然后将位图发送到 GL 线程并将其作为纹理上传。发生这种情况时，GL 线程*有时会*因为此上传而变慢一点。我测量了纹理上传时间，大部分时间在 1-8 毫秒之间，平均约为 2 毫秒。但有时它是 40-70 毫秒。什么会导致这种下降？

我还在 GPU 上生成 mipmap（禁用 mipmap 不会影响此行为），这是所有纹理参数：

```
GLES11.glTexParameterf(GLES11.GL_TEXTURE_2D, GLES11.GL_TEXTURE_MIN_FILTER, GLES11.GL_LINEAR_MIPMAP_NEAREST);
GLES11.glTexParameterf(GLES11.GL_TEXTURE_2D, GLES11.GL_TEXTURE_MAG_FILTER, GLES11.GL_LINEAR);
GLES11.glTexParameterf(GLES11.GL_TEXTURE_2D, GLES11.GL_TEXTURE_WRAP_S, GLES11.GL_CLAMP_TO_EDGE);
GLES11.glTexParameterf(GLES11.GL_TEXTURE_2D, GLES11.GL_TEXTURE_WRAP_T, GLES11.GL_CLAMP_TO_EDGE);
GLES11.glTexParameterf(GLES11.GL_TEXTURE_2D, GLES11.GL_GENERATE_MIPMAP, GLES11.GL_TRUE);
GLES11.glTexEnvx(GLES11.GL_TEXTURE_ENV, GLES11.GL_TEXTURE_ENV_MODE, GLES11.GL_MODULATE);

GLUtils.texImage2D(GLES11.GL_TEXTURE_2D, 0, GLES11.GL_RGBA, bmp, 0); 
```

我怎样才能做得更好？例如，当他们需要每秒加载和显示许多帧时，Open GL 视频播放器是如何完成的？还是当前将页面呈现为图块的网络浏览器？EGL_image 是一个值得一看的好选择吗？OpenGL ES 2.0 会有所不同吗？

**编辑：** 加载速度变慢是因为 GL 线程上的 GC-ing。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T10:37:41.830

除了确保 GC 不会启动之外，您还可以在单​​独的线程上进行所有位图生成和纹理上传，如我对类似问题的回答中所述：[Threading textures load process for android opengl game](https://stackoverflow.com/questions/6318311/threading-textures-load-process-for-android-opengl-game/19740938#19740938)

当上传本身需要很长时间时，这将防止您出现小丢帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:12:34.847

最后我解决了它，但不是使用本机代码，也不是使用 EGL_image，而是感谢这个[视频](http://www.youtube.com/watch?v=rsQet4nBVi8)。幸运的是，我几乎拥有 256x256 的所有纹理，并且我的目标是 Android 3.2 及更高版本，因此对于这种情况，有一个简单的解决方案：

[BitmapOptions.inBitmap](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inBitmap)将为每个新图块重用一个`Bitmap`，因此不再有 furios GC-ing。我不得不放大几个小于 256x256 的位图。

# grails - Shiro 因启用数据库会话而崩溃

> ID：13684634
> 
> 赞同：2
> 
> 时间：2012-12-03T13:48:43.283
> 
> 标签：grails, shiro

我正在尝试使用 shiro 插件保护 grails 应用程序。我有一个简单的身份验证系统，可以在简单`app-run`的开发模式下正常工作。但是，一旦我在生产模式下运行应用程序 ( `grails prod run-app --stacktrace`) 任何登录或注册尝试都会引发以下错误并拒绝运行：

```
| Error 2012-12-03 05:35:15,081 [http-bio-8080-exec-9] ERROR databasesession.GormPersisterService  - [Assertion failed] - this String argument must have length; it must not be null or empty
Message: [Assertion failed] - this String argument must have length; it must not be null or empty
   Line | Method
->>  45 | deleteBySessionId in grails.plugin.databasesession.PersistentSessionAttributeValue
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   111 | invalidate        in grails.plugin.databasesession.GormPersisterService
|    90 | proxySession . .  in grails.plugin.databasesession.SessionProxyFilter
|    42 | getSession        in grails.plugin.databasesession.SessionProxyFilter$1
|   147 | getSession . . .  in org.apache.shiro.web.servlet.ShiroHttpServletRequest
|   188 | getSession        in     ''
|   108 | createSession . . in org.apache.shiro.web.session.mgt.ServletContainerSessionManager
|    64 | start             in     ''
|   121 | start . . . . . . in org.apache.shiro.mgt.SessionsSecurityManager
|   336 | getSession        in org.apache.shiro.subject.support.DelegatingSubject
|   314 | getSession . . .  in     ''
|   182 | mergePrincipals   in org.apache.shiro.mgt.DefaultSubjectDAO
|   163 | saveToSession . . in     ''
|   144 | save              in     ''
|   383 | save . . . . . .  in org.apache.shiro.mgt.DefaultSecurityManager
|   350 | createSubject     in     ''
|   183 | createSubject . . in     ''
|   283 | login             in     ''
|   257 | login . . . . . . in org.apache.shiro.subject.support.DelegatingSubject
|    68 | register          in pfm.SignupController
|   195 | doFilter . . . .  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter          in grails.plugin.cache.web.filter.AbstractFilter
|    55 | doFilter . . . .  in org.apache.shiro.grails.SavedRequestFilter
|   449 | executeChain      in org.apache.shiro.web.servlet.AbstractShiroFilter
|   365 | call . . . . . .  in org.apache.shiro.web.servlet.AbstractShiroFilter$1
|    90 | doCall            in org.apache.shiro.subject.support.SubjectCallable
|    83 | call . . . . . .  in     ''
|   380 | execute           in org.apache.shiro.subject.support.DelegatingSubject
|   362 | doFilterInternal  in org.apache.shiro.web.servlet.AbstractShiroFilter
|   125 | doFilter          in org.apache.shiro.web.servlet.OncePerRequestFilter
|    51 | doFilterInternal  in grails.plugin.databasesession.SessionProxyFilter
|   886 | runTask           in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . . in     ''
^   680 | run               in java.lang.Thread 
```

由于数据库会话在开发模式下被禁用并且堆栈跟踪包含`databasesession`我假设这就是问题所在。我不知道是什么原因造成的，也不知道如何解决。

一些可能有用的规格：

```
Grails 2.1.1
compile ":shiro:1.1.4" 
```

让我知道我是否可以提供更多信息并提前致谢

更新：这是在身份验证控制器中触发它的代码：

```
 def signIn = {
        def authToken = new UsernamePasswordToken(params.username, params.password as String)

        // Support for "remember me"
        if (params.rememberMe) {
            authToken.rememberMe = true
        }

        // If a controller redirected to this page, redirect back
        // to it. Otherwise redirect to the root URI.
        def targetUri = params.targetUri ?: "/"

        // Handle requests saved by Shiro filters.
        def savedRequest = WebUtils.getSavedRequest(request)
        if (savedRequest) {
            targetUri = savedRequest.requestURI - request.contextPath
            if (savedRequest.queryString) targetUri = targetUri + '?' + savedRequest.queryString
        }

        try{
            // Perform the actual login. An AuthenticationException
            // will be thrown if the username is unrecognised or the
            // password is incorrect.
            SecurityUtils.subject.login(authToken)

            log.info "Redirecting to '${targetUri}'."
            redirect(uri: targetUri)
        }
        catch (AuthenticationException ex){
            // Authentication failed, so display the appropriate message
            // on the login page.
            log.info "Authentication failure for user '${params.username}'."
            flash.message = message(code: "login.failed")

            // Keep the username and "remember me" setting so that the
            // user doesn't have to enter them again.
            def m = [ username: params.username ]
            if (params.rememberMe) {
                m["rememberMe"] = true
            }

            // Remember the target URI too.
            if (params.targetUri) {
                m["targetUri"] = params.targetUri
            }

            // Now redirect back to the login page.
            redirect(action: "login", params: m)
        }
    } 
```

相关的域类：

```
class User {
    String username
    String passwordHash
    byte[] passwordSalt
    Manager manager

    static hasMany = [ roles: Role, permissions: String ]

    static constraints = {
        username(nullable: false, blank: false, unique: true)
        manager(nullable: true)
    }
} 
```

最后是安全过滤器：

```
class SecurityFilters {

    def publicActions = [
        signup: ['index','register'],
        auth:['*','*']
    ]

    private boolean findAction(controllerName, actionName){
        def c = publicActions[controllerName]
        return(c)?c.find{(it==actionName||it=='*')}!=null:false
    }

    def filters = {

        all(uri: "/**"){
            before = {
                //Check for public controller/actions
                def isPublic=findAction(controllerName,actionName)

                if(isPublic) return true

                // Ignore direct views (e.g. the default main index page).
                if (!controllerName) return true

                accessControl()
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:46:59.853

嗯。刚刚看了一下数据库会话插件的来源。我无法将您的异常的行号与源匹配。您使用的是哪个版本的插件？

对我来说，看起来数据库会话插件错过了一个 sessionId 并试图用无效的会话 ID 使会话无效。

对我来说，您似乎偶然发现了插件 V1.12 中的一个错误：http: [//jira.grails.org/browse/GPDATABASESESSION-1](http://jira.grails.org/browse/GPDATABASESESSION-1)

这似乎已经修复但未在 grails.org 上发布。

要获取最新版本，请从[https://github.com/burtbeckwith/grails-database-session/archive/master.zip](https://github.com/burtbeckwith/grails-database-session/archive/master.zip)下载，解压缩并将目录重命名为`grails-database-session`.

打开一个 shell 并 cd 进入该`grails-database-session`目录。执行一个`grails package-plugin`. 如果它抱怨错误的 grails 版本，要么切换到正确的版本，要么再做`grails upgrade`一次`grails package-plugin`。

现在 cd 到您的项目并执行`grails install-plugin /path/to/grails-database-session/grails-database-session-1.2.zip`.

至少，这对我有用......

# hadoop - 将文件从本地文件系统复制到 Hadoop 中的 HDFS 时出错

> ID：13684637
> 
> 赞同：1
> 
> 时间：2012-12-03T13:48:58.707
> 
> 标签：hadoop, local, hdfs, copying

我正在使用 hadoop 处理文件，目前我正在尝试使用以下命令将文件从本地文件系统复制到 HDFS

```
hadoop fs -put d:\hadoop\weblogs /so/data/weblogs 
```

得到如下错误

```
c:\Hadoop\hadoop-1.1.0-SNAPSHOT>hadoop fs -put d:\hadoop\weblogs /so/data/weblog
s
12/12/03 19:05:16 WARN hdfs.DFSClient: DataStreamer Exception: org.apache.hadoop
.ipc.RemoteException: java.io.IOException: File /so/data/weblogs/weblogs/u_ex121
10418.log could only be replicated to 0 nodes, instead of 1
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBloc
k(FSNamesystem.java:1557)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.jav
a:695)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1393)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1389)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInforma
tion.java:1135)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1387)

        at org.apache.hadoop.ipc.Client.call(Client.java:1070)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
        at $Proxy1.addBlock(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryI
nvocationHandler.java:82)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocat
ionHandler.java:59)
        at $Proxy1.addBlock(Unknown Source)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock
(DFSClient.java:3518)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStrea
m(DFSClient.java:3381)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2500(DFSClien
t.java:2593)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFS
Client.java:2833)

12/12/03 19:05:16 WARN hdfs.DFSClient: Error Recovery for block null bad datanod
e[0] nodes == null
12/12/03 19:05:16 WARN hdfs.DFSClient: Could not get block locations. Source fil
e "/so/data/weblogs/weblogs/u_ex12110418.log" - Aborting...
put: java.io.IOException: File /so/data/weblogs/weblogs/u_ex12110418.log could o
nly be replicated to 0 nodes, instead of 1
12/12/03 19:05:16 ERROR hdfs.DFSClient: Exception closing file /so/data/weblogs/
weblogs/u_ex12110418.log : org.apache.hadoop.ipc.RemoteException: java.io.IOExce
ption: File /so/data/weblogs/weblogs/u_ex12110418.log could only be replicated t
o 0 nodes, instead of 1
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBloc
k(FSNamesystem.java:1557)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.jav
a:695)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1393)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1389)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInforma
tion.java:1135)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1387)

org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /so/data/weblog
s/weblogs/u_ex12110418.log could only be replicated to 0 nodes, instead of 1
        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBloc
k(FSNamesystem.java:1557)
        at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.jav
a:695)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1393)
        at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1389)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInforma
tion.java:1135)
        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1387)

        at org.apache.hadoop.ipc.Client.call(Client.java:1070)
        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
        at $Proxy1.addBlock(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryI
nvocationHandler.java:82)
        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocat
ionHandler.java:59)
        at $Proxy1.addBlock(Unknown Source)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock
(DFSClient.java:3518)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStrea
m(DFSClient.java:3381)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2500(DFSClien
t.java:2593)
        at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFS
Client.java:2833)

c:\Hadoop\hadoop-1.1.0-SNAPSHOT> 
```

谁能告诉我，上面的命令有什么问题，为了避免这个错误需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:21:33.873

之一：

*   具有 HDFS 的远程系统（在配置中指定）尚未启动
*   存在阻止与远程系统连接的网络问题
*   HDFS 文件系统上的磁盘空间不足
*   您配置了错误的远程系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T06:27:53.953

您的 Hadoop 集群的 DataNode 未运行。使用 jps 命令检查它。

# c++ - 如何在多配置项目中管理 3rd 方库

> ID：13684651
> 
> 赞同：8
> 
> 时间：2012-12-03T13:49:51.557
> 
> 标签：c++, version-control

假设您正在处理一些支持多种配置（linux 和 windows 构建、共享/静态链接、具有或不具有某些功能等）的项目。要构建所有这些配置，您需要不同版本的 3rd 方组件（使用 gcc 或 msvc、共享/静态、一些指定的预处理器定义等构建）。所以最终你会遇到一个问题，不仅要为你的项目管理所有这些配置，还要为你的项目使用的所有库管理这些配置。

**是否有通用的解决方案/方法/软件来促进管理单个项目的多个不同配置？**

**标准**：

*   易于设置，即从头开始构建项目需要花费多少时间？
*   易于管理，即是否很难添加新的依赖项或删除现有的依赖项？
*   错误证明，即开发人员多久会通过更改依赖项来破坏构建？

到目前为止，我已经尝试了几种方法。

1.  在 VCS 下存储每个配置的预构建包。

    **优点**：在项目很小的情况下易于设置（更新工作副本，你很高兴）。易于管理（为每个所需的配置构建一次库）。错误证明（VCS 客户端会通知您工作副本中的更改）。

    **缺点**：不适用于分布式 VCS（GIT、Mercurial 等）。存储库快速增长，最终一个简单的“克隆”操作将是无法容忍的。您最终还下载了很多您并不真正需要的东西（即，如果您在 linux 上工作，则为 windows 库）。如果您正在实现库，那么您的库的用户将通过将其集成到他们的项目中来继承所有这些问题。

2.  存储库源而不是预构建的包。

    **优点**：易于设置。

    **缺点**：添加新库非常痛苦。您需要为每个配置提供构建脚本和源代码补丁。但这只是冰山一角。您的依赖项有它们自己的依赖项，它们有自己的依赖项，依此类推……您很有可能最终得到类似 Gentoo 发行版的东西 :)

3.  在外部服务器的某个地方存储一个存档或只是一个带有预构建包的文件夹。

    **优点**：解决了问题……有点。

    **缺点**：设置起来并不容易（您必须手动复制存档）。不太容易管理（您必须手动将每个库添加到服务器）。没有变化的历史。不是防错的，因为很容易忘记在服务器上放一些东西，或者删除一些有用的东西。

    略微改进的方法：您可以使用集中式 VCS（例如 SVN）来存储所有 3rd 方库，这样会更容易使用。但是，如果您将其用作简单的文件存储，您仍然没有集中的更改历史记录，或者如果您将其用作子存储库，您将获得一个包含许多不必要库的巨大存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:53:04.853

当您遇到此类问题时，您必须学习并开始使用[配置管理](http://en.wikipedia.org/wiki/Configuration_management)工具（除了您选择的 SCM 的常用技术）。CM 是**过程**，使用一些配置管理工具是这个过程的一部分。

目前我们有多种不同的 CM 工具可供选择，您可以在其中选择最适合或只是首选。从我的观点来看，[厨师](http://www.opscode.com/chef/)是“每个人的最佳选择”，你的里程可能会有所不同

# android - 如何使 android 应用程序从专用网页获取内容？

> ID：13684652
> 
> 赞同：-2
> 
> 时间：2012-12-03T13:49:55.363
> 
> 标签：android, android-webview, android-internet

我计划在 android 中创建一个小型评论应用程序，从网络服务器/页面获取电影评论。那么我应该如何设计在线组件呢？在线部分不需要通过浏览器可见，但对应用程序可用。那么，基本上我应该如何将数据放在服务器上？Json 还是简单的网页或数据库表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:03:23.437

在我看来，实现这一目标的最佳方法是创建一些（REST 或非 REST）Web 服务，并使用 json 作为输出格式。

像这样的架构：mobile_app <---> web service <---> 数据库

您还可以有一些其他程序，例如将在 ftp 服务器上创建一些 json 文件。

如果您已经在 php、python、ruby 等中创建了网页，您可以为您的移动应用程序创建一些 API。例如，您有一些带有 your-domain/reviews.html URL 的电影评论页面

您可以使用 you-domain/reviews.json 为您的移动应用程序创建类似的端点，这将为您提供一些专用于您的移动设备的 json。

# deployment - 将 rails 应用程序部署到新的 Debian 服务器后无法加载此类文件 - sqlite3/sqlite3_native

> ID：13684663
> 
> 赞同：1
> 
> 时间：2012-12-03T13:50:23.353
> 
> 标签：deployment, ruby-on-rails-3.2

我已经开始了对基于 Debian Squeeze 的生产服务器的部署过程。我们一直在 MacOS 中开发这个 Rails 应用程序。

*   Rails 是 3.2.8 版
*   Ruby 版本为 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin12.2.0]

我们从一开始就安装了 rvm，并且该应用程序在我的计算机上完美运行。

为了了解需要什么，然后使用 Capistrano 制作脚本，我从以下内容开始：

*   安装成功 Ruby。
*   成功安装 Rails。
*   安装 SQLite3。（我不会在生产中使用它）
*   RVM 安装成功。
*   复制整个应用程序目录并在其中运行**bundle install**。

然后，运行**rake**以确保一切正常，出现以下错误：

```
rake aborted!
cannot load such file -- sqlite3/sqlite3_native
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/lib/sqlite3.rb:6:in        `require'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/lib/sqlite3.rb:6:in   `rescue in <top (required)>'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/lib/sqlite3.rb:2:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `block in require'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.2/lib/bundler.rb:128:in `require'
/root/rails_app/depot/config/application.rb:7:in `<top (required)>'
/root/rails_app/depot/Rakefile:5:in `require'
/root/rails_app/depot/Rakefile:5:in `<top (required)>'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake- 0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/root/rails_app/depot/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>' 
```

每个其他命令，例如*rails server*或*rails console*都会显示相同的错误。

# c++ - 将 system() 结果存储在文件中

> ID：13684670
> 
> 赞同：0
> 
> 时间：2012-12-03T13:50:43.623
> 
> 标签：c++, windows

如何继续`system("ping 10.50.132.10 -t");`使用 C++ 在文本文件中写入结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:53:53.567

一种方法是直接使用shell命令：

```
system("ping 10.50.132.10 -t >> file.txt"); 
```

操作后，您可以从“file.txt”中读取！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T13:57:57.227

有几个解决方案。第一个也是最简单的方法是在调用中简单地添加重定向`system`：

```
system("ping 10.50.132.10 -t > some_file.txt"); 
```

另一种更高级的方法是将输出读入你的程序，然后自己写出来。为此，请查看[`_popen`](http://msdn.microsoft.com/en-us/library/96ayss4b%28v=vs.100%29.aspx)或[`CreateProcess`](http://msdn.microsoft.com/en-us/library/ms682425%28v=vs.100%29.aspx)。

# ios - 如何使用 ios 5 及更高版本中的屏幕名称向特定关注者发布推文

> ID：13684671
> 
> 赞同：1
> 
> 时间：2012-12-03T13:50:46.073
> 
> 标签：ios, ios5

我有一个表格视图，其中显示了我的 Twitter 关注者列表。我喜欢只将推文发送给特定的关注者。选择行后，我将获得关注者的屏幕名称和 ID，以及如何在此方法中仅使用关注者名称发布推文

[postRequest setAccount:twitterAccount]

除了使用这种方法之外，还有其他方法吗？

先感谢您。

# glassfish - 关于 Glassfish 错误的 Drools Guvnor

> ID：13684673
> 
> 赞同：1
> 
> 时间：2012-12-03T13:50:52.717
> 
> 标签：glassfish, drools, guvnor

我正在尝试将 Guvnor (guvnor-5.5.0.Final-tomcat-6.0) 部署到新的 glassfish 服务器 ( 3.1.2.2 build 5) 并收到以下错误。我确实尝试了其他 WAR，但没有任何运气，并且在 OSX 和 Windows 上遇到了同样的错误。

```
Error occurred during deployment: Exception while loading the app :
java.lang.IllegalStateException: ContainerBase.addChild: start:
org.apache.catalina.LifecycleException:
java.lang.NoClassDefFoundError: org/apache/AnnotationProcessor. Please
see server.log for more details 
```

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:35:14.627

将 jasper-xxx.jar 添加到您的库中。它应该工作。如果你部署在 tomcat 中，它应该在 catalina.jar 中。

不幸的是，JBOSS 7 没有使用 tomcat，而是使用了 JBossWeb。这就是为什么你有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T18:00:14.807

取 guvnor-5.5.0.Final-jboss-as-7.0.war 二进制战争文件

*   添加 dom4j-1.6.1.jar

*   删除 javassit*.jars

*   添加resteasy-jaxb-provider-2.2.3.GA.jar

*   添加resteasy-jaxrs-2.2.3.GA.jar

将 glassfish-web.xml 文件添加到 WEB-INF [https://github.com/snowch/glassfish-guvnor/blob/master/src/main/webapp/WEB-INF/glassfish-web.xml](https://github.com/snowch/glassfish-guvnor/blob/master/src/main/webapp/WEB-INF/glassfish-web.xml)

[用这个https://github.com/snowch/glassfish-guvnor/blob/master/src/main/webapp/WEB-INF/web.xml](https://github.com/snowch/glassfish-guvnor/blob/master/src/main/webapp/WEB-INF/web.xml)替换 WEB-INF/web.xml

重新打包二进制war文件并部署到glassfish

# c# - 通过串口发送“ARROW KEY”键

> ID：13684675
> 
> 赞同：3
> 
> 时间：2012-12-03T13:50:56.120
> 
> 标签：c#, console, signals, keypress

与通过串口发送“ENTER”键的问题相同，我如何通过串口发送“箭头键”？尤其是向上箭头键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:30:21.717

光标键是键盘的一个相对较新的功能。在选择 ASCII 码时它们还不存在。这主要基于当时使用的电传打字机的功能。与广泛使用的 ASR-33 一样，它的键盘布局如下所示：

![在此处输入图像描述](../Images/0a2e739ab1e3656bde388fd06beb02d5.png)

没有光标键。请注意，换行符当时是一个单独的键，ASCII 中的 '\n'。更容易获得和影响 Unix 中行尾控制字符的选择。Return 键相当于现代键盘上的 Enter 键，即 ASCII 中的“\r”。

因此，没有标准代码可供光标键选择。您必须自己对它们进行编码。 [ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)是一个通用标准。[DEC VT-52 和 VT-100](http://ascii-table.com/ansi-escape-sequences-vt-100.php)的仿真也很常见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-08T07:34:58.307

由于 ARROW 键是扫描代码（未在 ASCII 表中定义），因此需要发送一个字节序列来表示箭头键（有关详细信息，请参见[https://en.wikipedia.org/wiki/ANSI_escape_code](https://en.wikipedia.org/wiki/ANSI_escape_code)）。不幸的是，这个顺序在不同的平台和目标之间可能会有所不同，因此您需要试验什么是适合您的目标的。从 Windows 上的串行控制台在 Ubuntu 16.04 目标上进行测试，ARROW UP 序列是三个字节（0x1b、0x5b、0x41），或在键盘上：'Esc''[''A'</p>

# javascript - 如何在 Metro 应用程序中设置 Listview 项目的焦点？

> ID：13684678
> 
> 赞同：1
> 
> 时间：2012-12-03T13:51:01.410
> 
> 标签：javascript, html, windows-8, microsoft-metro, winjs

我的 Metro 应用程序中有一个列表视图。我想在我的列表视图中设置最后一项的焦点？如何设置列表视图项的焦点？谁能帮助我？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:46:06.903

您需要使用 ListViews`currentItem`属性：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh700672.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700672.aspx)

具体来说，为它分配一个对象，其中包含您要选择的数据项的索引（来自您的数据源），以及`hasFocus`和`showFocus`属性集：

```
var yourListView = getYourListViewFromSomewhere();
yourListView.currentItem = { index: 8, hasFocus: true, showFocus: true } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:42:49.560

您是要设置焦点还是实际选择它？如果你想做后者，你所要做的就是：

```
var indexToSelect = listView.itemDataSource.length - 1;
listView.selection.set(indexToSelect); 
```

这将获取列表中最后一项的索引，然后选择该项。

否则，多米尼克的解决方案应该只用于设置焦点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:24:15.333

这是一段将列表视图的选定索引更改为最后一个索引的代码

1)`lstItems.SelectedIndex = lstItems.Items.Count - 1;`

此代码可帮助您选择列表的最后一个索引。

2)`lstItems.ScrollIntoView(lstItems.Items[lstItems.Items.Count - 1]);`

此代码可帮助您将列表滚动到最后一个索引。这两行代码都适用于 Metro 应用程序

详细说明第二段代码：

该`lstItems.ScrollIntoView`方法将列表滚动到我们获得的指定列表项，然后`lstItems.Items[lstItems.Items.Count - 1]`将其滚动到列表的最后一项。

# c++ - 尝试从编译文件中查找全局变量。程序无法区分常量和全局变量。

> ID：13684683
> 
> 赞同：1
> 
> 时间：2012-12-03T13:51:19.303
> 
> 标签：c++, unix, global-variables

再会！我试图找到很长一段时间的决定。

我的问题是：

例如，我有 2 个 .cpp 文件，其中一个包含

```
const std::string DICTIONARY_DEFAULT = "blah";
const std::string ADDTODICTIONARY_DEFAULT = "blah";
const std::string BUTTONS = "blah"; 
```

第二个是

```
static int  x1;
static int  NewY1, NewY2, NewX1, NewX2; 
```

两个片段都在全局变量部分。我需要打印全局静态变量（例如），但忽略常量。在 nm 输出中，它们看起来完全相同（每种情况下的 b 类型，这意味着未初始化的本地范围符号）。有没有办法仅使用 linux 实用程序（grep、regexps 等完全可以）来自动分离这种情况？

我的任务是更好地理解：

C++中有一个程序，主要任务是查找和撤消全局变量列表。输入数据看起来像包含大量 .cpp 文件的档案。每个 .cpp 文件都是语法正确的 C++ 程序（必须使用编译器 GNU C++ 和 Microsoft Visual C++ 成功编译）。对于存档中的每个文件，我必须以单独的字符串输出文件名和全局变量列表，如示例中所示：

输出数据：

```
000000.cpp ancestor ansv cost graph M N p qr query u
000001.cpp
000002.cpp
000003.cpp
000004.cpp
000005.cpp
000006.cpp
000007.cpp edge tree 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:50:24.050

查找全局变量是[本 clang 教程](http://amnoid.de/tmp/clangtut/tut.html)的“主题” ——在本教程中作者“只是为了好玩”，但您可以添加一些代码来完全满足您的需求......（顺便说一句，这并不难有人可能会猜到:))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:16:59.040

**简短的回答：**实际上没有办法在每种情况下都这样做

**长答案：**使用“objdump -x file.o”查看符号表。您可以看到所有全局变量，包括静态和常量，都分配到一个名为 .bss 的部分中。还存在一个称为 .rodata 的部分，一般来说，它用于存储 const 数据。不幸的是，在您的情况下，您声明了两个 const std::string 对象。这些对象通过在“main”函数运行之前调用它们的构造函数来初始化。尽管如此，它们的字段的初始化发生在运行时，因此它们只是“逻辑上”的 const，而不是真正的 const。

编译器别无选择，只能将它们与所有其他全局变量一起分配到 .bss 部分。如果添加以下行

```
const int willBeInRoData = 42; 
```

您会发现它的符号将在 .rodata 部分中，因此它将与其他全局整数区分开来。

# javascript - 如何使用javascript函数返回节点模块中的对象

> ID：13684685
> 
> 赞同：0
> 
> 时间：2012-12-03T13:51:23.933
> 
> 标签：javascript, node.js, module

我有一个问题，我正在使用一个文件来保存一个模块列表，并且在我的 nodejs 服务器中的一次调用中需要这个列表。我想以特定方式使用列表中的模块。

modules.js -

```
Mods = {
  mymodule: require('./mymodule.js')
}

exports.f = function() {
  return Mods;
} 
```

index.js -

```
f = require('./modules.js').f;

f().mymodule.echo("Hello World"); 
```

所以现在我想将我正在调用的模块的名称直接放入函数中，而不是我现在使用 f() 的方式，这样我就可以执行以下操作：

```
f = require('./modules.js').f;

f('mymodule').echo("Hello World"); 
```

我已经尝试了许多不同的实验，但无法让它工作，是否可以在 javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:55:24.853

好吧，如果你这样做：

```
var Mods = {
    mymodule: require('./mymodule.js');
}

module.exports = function( name ) {
    return Mods[name];
}; 
```

然后你可以这样做：

```
var f = require( "./modules.js"); //no .f required

f( "mymodule" ).echo( "Hello world"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:56:41.417

编辑：我被要求解释我的答案，我很高兴这样做。解决方案的关键是所谓的*括号符号*。该术语指的是在 JavaScript 中使用变量访问对象属性的能力。在下面的代码中，您可以看到如何`Mods`使用`[name]`where`name`是一个包含属性名称作为字符串的变量来访问对象的属性。

```
Mods = {
  mymodule: require('./mymodule.js');
}

exports.f = function(name) {
  return Mods[name];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:03:36.383

我会说更多... ^^

```
var Mods = {
    mymodule: require('./mymodule.js');
}

module.exports = function( name ) {
  if( !name ) return Mods;
  return Mods[name];
}; 
```

# django - 如何让 Django 在标签标签中插入复选框？

> ID：13684687
> 
> 赞同：0
> 
> 时间：2012-12-03T13:51:28.443
> 
> 标签：django, forms, html

我希望我的复选框遵循以下引导设计：

```
<label class="checkbox">
  <input type="checkbox"> Check me out
</label> 
```

我一生都无法弄清楚如何在 Django 中做到这一点（我已经用 Google 搜索过）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:14:08.527

如果您不喜欢 Django 输出字段的方式，则必须在模板中手动完成。

```
<label class="checkbox" for="{{ form.my_checkbox.id_for_label }}">
    {{ form.my_checkbox }} {{ form.my_checkbox.label }}
</label>
{{ form.my_checkbox.errors }} 
```

# javascript - D3 线作为闭合路径

> ID：13684690
> 
> 赞同：9
> 
> 时间：2012-12-03T13:51:38.430
> 
> 标签：javascript, line, d3.js

**更新：**这是问题的一个例子 - [http://jsfiddle.net/Hffks/2/](http://jsfiddle.net/Hffks/2/)

我正在尝试使用 D3 对折线图进行编码，并且我的线在最后被关闭，我的意思是它充当第一个点和最后一个点相同的封闭路径。我的数据采用以下 JSON 格式：

```
[ entityA : [ { time : 1230000,  // time since epoch
             attribute1 : 123 // numeric value 
             attribute2 : 123 // numeric value
            },
              { time : 1230010,  // time since epoch
              attribute1 : 123 // numeric value 
              attribute2 : 123 // numeric value
            } ],
  entityB : [ { ... // same format as above
  ...
 ] 
```

我正在使用一条线的标准声明（d3.svg.line 带有用于 x 和 y 的函数）：

```
var line = d3.svg.line()
        .x(function(d) {
            return x_scale(d.c_date)); 
        })
        .y(function(d) { 
            return y_scale(d.total); 
        }); 
```

然后在一个遍历实体的for循环中，我附加了一个“svg：path”：

```
canvas.append("svg:path")
            .attr("d", line(data[entity])) 
```

关于图表的其他一切都有效：点放置正确，每个实体有多条独立线，绘制轴等。但是，每条独立线都充当闭合路径。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-03T14:51:34.360

默认情况下会填充路径。如果你设置`fill`为“none”和`stroke`“black”，你会看到路径没有关闭，它只是看起来是。

工作小提琴：http: [//jsfiddle.net/Hffks/3/](http://jsfiddle.net/Hffks/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-24T07:38:09.617

我的代码是这样的：

```
var width = 400;
var height = 400;

var svg = d3.select('body')
  .append('svg')
  .attr('width', width)
  .attr('height', height);

//The data for our line
var lineData = [{
    "x": 1,
    "y": 5
  },
  {
    "x": 20,
    "y": 20
  },
  {
    "x": 40,
    "y": 10
  },
  {
    "x": 60,
    "y": 40
  },
  {
    "x": 80,
    "y": 5
  },
  {
    "x": 100,
    "y": 60
  }
];

//The line SVG Path we draw
var lineGraph = svg.append("path")
  .attr("d", d3.line()
    .x(d => d.x)
    .y(d => d.y)
    .curve(d3.curveLinear)(lineData))
    //.curve(d3.curveBasis)(lineData)) //Draws smooth joints- yumuşak birleşim noktası(mafsal) çizer
  .attr("stroke", "blue")
  .attr("stroke-width", 2)
  .attr("fill", "none"); 
```

您可以在此处查看 d3 版本 5.9.2：[https ://jsfiddle.net/jsfiddleCem/u31omp5z/8/](https://jsfiddle.net/jsfiddleCem/u31omp5z/8/)

# optimization - 优化：在没有PLT/GOT的情况下构建共享库

> ID：13684691
> 
> 赞同：1
> 
> 时间：2012-12-03T13:51:38.370
> 
> 标签：optimization, gcc, shared-libraries

除了说“CreateObject”之外，我的库不公开任何功能。尽管如此，它们的所有函数都是间接调用的，所以我在性能报告中看到高达 1.65% 的时间花费在 __i686.get_pc_thunk.bx 中。函数（类方法）被调用了 1.6 亿次，它们在共享库内部，即未公开。

我想知道是否可以在没有重定位的情况下编译内部方法——即使用相对偏移或类似的东西。

gcc 是 4.5.2

更新：实际上我认为这是因为 -O0 留在了makefile中。所以现在这没什么大不了的，但我仍然想对 -O0 做同样的事情，因为它可以减少探查器的“垃圾”。我想知道执行此操作的 -O2 “真实”选项是什么。

UPDATE2：嗯，不是-O2，可能是--dynamic-list 降低了pc_thunk 的性能，但它仍然存在......所以甚至不确定--dynamic-list 是否真的有帮助。隐藏符号是否仍应包含间接 thunk，是否正确？

UPDATE3：我创建了一个测试项目，对于内部库函数，我将属性可见性设置为隐藏，我在 gcc 4.7 和 -O2 和 LTO 启用的情况下编译，我将 --dynamic-list 传递给链接器，但没有内部函数，但调用到 get_pc_thunk 仍然存在。

这是测试共享库中的代码：

```
#include <stdio.h>

__attribute__((visibility("hidden"), noinline)) void lib1f2()
{
    puts("I should have PLT disabled");
}

void lib1f()
{
    puts("I'm lib1");
    lib1f2();
} 
```

在 gdb 中，我仍然在 lib1f2 中看到 thunk。

有趣的是，使用 -fwhole-program lib1f2 被*内联*到主可执行文件中*，但*仍然包含对 thunk 的调用。

UPDATE4：好的，我快接近了（意识到我很愚蠢），程序（和上面的代码）使用数据，即使它只是一个 const 字符串，所以它需要 GOT 调用。所以现在的问题是：

1.  不过，我可以避免 GOT 的重击吗？
2.  （相关）通过，也许，在没有 -fPIC 的情况下编译 - 会有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:01:19.200

您可能对 GCC 可见性支持感兴趣

[http://gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)

要将所有符号设为私有，您可以使用 -fvisibility=hidden 选项。还记得使用**属性**((visibility ("default")))将 CreateObject 方法标记为 public

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:08:04.373

> 1) 不过，我可以避免 GOT 的重击吗？

我想不是。至少不在 i686 上。问题是代码可以自动进行相对跳转......或者更确切地说，x86 上的所有跳转都是相对的，除了间接跳转 IIRC。另一方面，没有办法索引相对于当前程序计数器的数据。这个问题实际上在 x86_64 中得到了解决，因为有一个新的指令指针相对寻址可以完全用于这种情况。

您的测试，使用 gcc -fPIC -shared -O2 -flto 编译

在 32 位上：

```
00000530 <lib1f2.2321>:
push   %ebx
call   52b <__x86.get_pc_thunk.bx>
add    $0x1aca,%ebx
sub    $0x18,%esp
lea    -0x1a67(%ebx),%eax
mov    %eax,(%esp)
call   3f0 <puts@plt>
add    $0x18,%esp
pop    %ebx
ret
00000560 <lib1f>:
push   %ebx
call   52b <__x86.get_pc_thunk.bx>
add    $0x1a9a,%ebx
sub    $0x18,%esp
lea    -0x1a4c(%ebx),%eax
mov    %eax,(%esp)
call   3f0 <puts@plt>
add    $0x18,%esp
pop    %ebx
jmp    530 <lib1f2.2321>
nop 
```

在 64 位

```
00000000000006b0 <lib1f2.2352>:
lea    0x2a(%rip),%rdi
jmpq   590 <puts@plt>

00000000000006c0 <lib1f>:
lea    0x35(%rip),%rdi
sub    $0x8,%rsp
callq  590 <puts@plt>
xor    %eax,%eax
add    $0x8,%rsp
jmp    6b0 <lib1f2.2352> 
```

> 2）（相关）通过，也许，在没有 -fPIC 的情况下编译 - 会有什么缺点？

好吧，虽然这很尴尬，但我不得不承认我在这里有点困惑。乍一看，我会说共享库是用 -fPIC 编译的。相反，以下两个命令都有效

```
gcc -fPIC -m32 -shared -O2 -flto test.c -o test.so
gcc -m32 -shared -O2 -flto test.c -o test.so 
```

在非-fPIC 情况下，代码也不需要对get_pc_thunk 进行任何调用。诀窍是动态加载器在运行时使用正确的数据地址修复库代码。

虽然这是一个问题，因为您获得了一些速度以避免 thunk，但是您失去了实际***共享***共享库的能力，因为操作系统必须为包含重定位的库的每个代码页创建一个新副本。另一方面，当使用 GOT 时，只需复制 GOT 页，当许多应用程序链接到同一个库时，大大减少了内存占用。

有趣的是，在 64bit 模式下是不可能在非 pic 模式下编译库的，以下命令失败

```
gcc -m64 -shared -O2 -flto test.c -o test.so 
```

尽管如此，由于处理器提供了对代码相对寻址的支持，这不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:57:12.873

在函数中使用[可见性属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)，尤其是`hidden`. 你可以定义

```
 #ifdef __GNUC__
  #define MODULE_VISIBILITY  __attribute__ ((visibility ("hidden")))
 #else
  #define MODULE_VISIBILITY
 #endif 
```

然后声明你的函数，例如

```
 extern void MODULE_VISIBILITY my_module_fun(int); 
```

使用最近的（4.6 或 4.7）GCC 编译器，您还可以编译和链接链接时间[优化](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#Optimize-Options)，例如`CXX= g++ -flto`在您的`Makefile`.

# multithreading - QThread::quit() 是否丢弃 EventQueue 中的所有事件？

> ID：13684700
> 
> 赞同：3
> 
> 时间：2012-12-03T13:51:55.777
> 
> 标签：multithreading, qt, qthread

有`main`功能：

```
int main(int argc, char *argv[]) {
    QCoreApplication a(argc, argv);

    Worker w;
    QObject::connect(&w, SIGNAL(done()), &a, SLOT(quit()), Qt::QueuedConnection);
    w.start();

    int ret = a.exec();
    w.quit();
    w.wait();

    return ret;
} 
```

还有`Worker`的定义：

```
class Worker : public QThread
{
    Q_OBJECT
public:
    Worker(QObject *parent=0);
protected:
    void run();
protected slots:
    void process_request();
private:
    int ttl;
    Messenger* messenger;
}

Worker::Worker(QObject * parent)
    :QThread(parent),
    ttl(5),
    messenger(new Messenger(this))
{
    moveToThread(this);
    connect(messenger, SIGNAL(new_message()), SLOT(process_request()), Qt::QueuedConnection);
}

void Worker::finish(){
  quit();
  messenger->disconnectFromNetwork();   
}

void Worker::run(){
  messenger->connectToNetwork("somewhere");
  exec();
  emit done();
}

void Worker::process_request(){
    net_message msg;
    messenger->recv(msg);

    // PROCESSING

    messenger->send(msg);

    BOOST_LOG_SEV(file_log, severity::notification) << "TTL = " << ttl;
    if (--ttl == 0) {
        finish();
    }
} 
```

好吧，对于冗长的说明感到抱歉。这个想法是 Messenger 存在于主线程中，当它有新消息时会戳 Worker，而 Worker 只存在一定数量的消息，之后它会停止并关闭整个应用程序。

但是有一个问题：日志文件有行`TTL = -1`，和`TTL = -2`，等等。它不应该，我能想到的唯一原因是它`quit()`并没有完全结束事件循环：它允许在从`exec()`. 是这样吗？如果“否”，那么可能导致这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:40:25.817

首先[“你做错了”](http://blog.qt.io/blog/2010/06/17/youre-doing-it-wrong/)。

其次，文档没有说明调用退出后事件循环中队列的状态是什么。有可能`exec()`在事件队列为空后返回以确保完成所有异步清理（如果这是最顶层的事件循环，在这种情况下是）。

* * *

编辑：
我[检查了源代码](https://code.woboq.org/qt5/qtbase/src/corelib/kernel/qeventloop.cpp.html)。显然[`QEventLoop::processEvents`](http://doc.qt.io/archives/qt-4.8/qeventloop.html#processEvents)是在每次检查事件循环应该退出之间调用。所以看起来`exec()`只有当队列为空时才返回。

# bash - Bash 递归搜索

> ID：13684706
> 
> 赞同：0
> 
> 时间：2012-12-03T13:52:15.153
> 
> 标签：bash

我已经开始制作一个脚本，它将递归地搜索文件夹中的文件。我需要做的是将它们与另一个文件夹中的修改时间进行比较。我目前有一个类似的字符串，`compare1/folder/file.ext`但我现在需要告诉它做`compare2/folder/file.ext`. 我将如何更改基本文件夹以便比较文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:09:46.033

仍然不能 100% 确定您要查找的内容，但如果您想替换变量中的字符串，您可以执行以下操作：

```
FILE=compare1/folder/file.ext
OTHER_FILE=${FILE//compare1/compare2}   # replace compare1 with compare2

echo $OTHER_FILE    # will print compare2/folder/file.ext 
```

# java - 继续提供信息类

> ID：13684707
> 
> 赞同：1
> 
> 时间：2012-12-03T13:52:16.683
> 
> 标签：java

我开发了一个小游戏，我想制作多人游戏。我制作了一个游戏服务器，它使客户端类与当前在线玩家和位置保持同步。

现在我想让 Client 类向 Game 类提供这些信息，所以它总是最新的。

但是，使用构造函数的 PlayerList 参数创建 Game 类显然不会继续提供最新信息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:56:18.310

我实际上会使用[发布-订阅](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)机制，其中游戏服务器不会维护玩家列表，而是将更新发布到游戏域对象。玩家是订阅者或观察者，只要有来自游戏服务器的更新并刷新他们身边的域对象的状态，他们就会收到通知。

# c#-4.0 - 当下拉列表中的 autopostback = true 时，page_load 上的页面的多个回发

> ID：13684711
> 
> 赞同：2
> 
> 时间：2012-12-03T13:52:22.483
> 
> 标签：c#-4.0

这让我发疯，尝试在谷歌上搜索解决方案，但没有任何相关信息出现。好的，这就是问题所在：我的用户控件有一个更新面板，它有一个中继器，其中有一个下拉菜单。现在`onSelectedInde`x 更改下拉菜单的事件我想执行一些操作。
因此，当我设置`autopostback= true`和绑定事件处理程序时，我的更新面板会不断地使用异步回发（在循环中）更新内容。我无法真正找出问题所在。如果可能的话，任何人都可以建议一种替代方法来做同样的事情吗？我的意思是有没有办法做到这一点`autopostback= true`？

**ascx代码：**

```
<asp:updatepanel id="upd1" runat="server" childrenastrigger="true">
 <contenttemplate>
    <asp:repeater id="rpt" runat="server">
     <asp:dropdown="drp1" runat="server" autopostback="true" OnSelectedIndexchanged="ddl_selectindexchanged"/>
     </asp:repeater>
 </contenttemplate> 
```

PS：它是一个伪代码，并且 selectedindexchanged 事件甚至不会被触发一次，但是异步回发发生在此用户控件的页面加载循环中。

# android - 关于片段生命周期，何时调用片段的 onActivityResult？

> ID：13684715
> 
> 赞同：17
> 
> 时间：2012-12-03T13:52:29.160
> 
> 标签：android, android-fragments, fragment, android-lifecycle

当我开始`Camera`意图时，我注意到在生命周期`onActivityResult`之前被调用过。`onResume``fragment`

我也注意到`onActivityResult`被称为 after `onStart`。

但这是奇怪的部分：我有变量 fileUri ==“一些图像路径”。这个变量是

*   在 onStart 中不为空。
*   onActivityResult 中的 NULL
*   在 onResume 中再次 NOT NULL

见 logCat

```
12-03 14:39:42.418: D/Fragment1(29220): onStart fileUri: file:///mnt/sdcard/OPS_IMAGES/IMG_20121203_143933.jpg
12-03 14:39:42.463: W/PhoneWindow(29220): Previously focused view reported id 2131034140 during save, but can't be found during restore.
12-03 14:39:42.463: D/Fragment1(29220): onActivityResult fileUri is NULL!!!
12-03 14:39:42.468: D/Fragment1(29220): onResume fileUri: file:///mnt/sdcard/OPS_IMAGES/IMG_20121203_143933.jpg 
```

最糟糕的是，这只发生在 50% 的时间里。另外 50% onActivityResult 可以毫无问题地访问 fileUri 值...

我应该如何调试这个？

注意：为了简单起见，我没有包含我的 onResume、onStart、onActivityResult 方法的代码。它们只是具有变量检查和日志调用的基本方法。如果需要，我将编辑问题并添加这些方法。

NOTE2：我正在使用谷歌支持库来支持旧 API 版本的片段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-09T14:43:02.833

要回答您的原始问题，这是生命周期回调的顺序

```
12-09 16:38:41.800 10227-10227/org.Test I/Fragment: ## OnStart()
12-09 16:38:41.820 10227-10227/org.Test I/Fragment: ## OnActivityResult()
12-09 16:38:41.821 10227-10227/org.Test I/Fragment: ## OnResume() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:20:37.053

这不是我一直在修补的领域或我遇到的问题，但是如果您的变量由于某种原因不可见......您是否尝试过使用不同类型的方式来引用该值？

我的建议是尝试使用 SharedPreferences 变量并将值保存在编辑器中并将其拉回。这可能不是最好的解决方案，但目前可能是一种解决方法。

我从 logcat 收到了类似的错误消息，这就是我偶然发现您的帖子的原因。

```
"01-27 11:13:42.899: W/PhoneWindow(1591): Previously focused view reported id 16908862 during save, but can't be found during restore." 
```

我能够解决我的问题的方法是我的“空白构造函数”没有重新实例化我的片段。在片段中，我只有 1 个变量是“ID”，当用户选择带有他们选择的项目时，它会传递回我的活动。我只是通过使用传入的值调用我的普通构造函数来重新实例化我的片段。

例如。

```
public UIDialogFragmentVolume() {
    this(ID);
}

public UIDialogFragmentVolume(int typeID) {
    ID = typeID;
} 
```

我希望这可以帮助您确定并解决您的问题。

# iphone - 解析 nsmutabledictionary 在数组中存储用户电话号码

> ID：13684717
> 
> 赞同：0
> 
> 时间：2012-12-03T13:52:32.767
> 
> 标签：iphone, ios, nsarray, nsdictionary

我是 iphone 开发的新手。我正在开发一个应用程序，我想解析这本字典并将电话号码存储在一个数组中。任何人都可以帮助..thanx 提前。这是我尝试过的代码。

```
-(void)filterContacts{
NSLog(@"I am here");
NSArray *letters = [[NSArray alloc] initWithObjects:@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", nil];
NSMutableArray* test=[[NSMutableArray alloc]init];
NSMutableArray* obj=[[NSMutableArray alloc]init];
NSLog(@" Data %@", dataArray);

  for (int i=0; i<arrayLetters.count; i++) {
        [test addObject:[[dataArray objectAtIndex:0] valueForKey:[arrayLetters objectAtIndex:i]]];
}
for (NSDictionary *dict2 in test) {

    NSLog(@"%@",[dict2 valueForKey:@"telephone"]);
}

} 
```

当我打印这个数组时，我得到了空值。我必须解析的数据如下所示。

```
2012-12-03 20:08:29.314(
  )

 2012-12-03 20:08:29.315  (
"1 (234) 560-789,20313561301"
  )

 2012-12-03 20:08:29.316  (
   "(000) 000-0000"
  )

DataArray (
    {
    "#" =         (
    );
    A =         (
    );
    B =         (
    );
    C =         (
    );
    D =         (
    );
    E =         (
    );
    F =         (
    );
    G =         (
    );
    H =         (
    );
    I =         (
    );
    J =         (
    );
    K =         (
                    {
            letter = K;
            name = kkkkkk;
            rowSelected = "-1";
            telephone = "1 (234) 560-789,20313561301";
            telephoneSelected = "";
        }
    );
    L =         (
    );
    M =         (
    );
    N =         (
    );
    O =         (
    );
    P =         (
    );
    Q =         (
    );
    R =         (
                    {
            letter = R;
            name = RRRRR;
            rowSelected = "-1";
            telephone = "1234567890";
            telephoneSelected = "1234567890";
        }
    );
    S =         (
    );
    T =         (
    );
    U =         (
    );
    V =         (
    );
    W =         (
    );
    X =         (
    );
    Y =         (
    );
    Z =         (
    );
}

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:56:01.980

您的循环中有错误：

```
for (NSDictionary *dict in dataArray) {
    [test addObject:[[dataArray objectAtIndex:0] valueForKey:[arrayLetters objectAtIndex:i]]];
    [obj addObject: [[dataArray objectAtIndex:0]valueForKey:@"telephone"]];
} 
```

注意你是如何迭代 NSDictionary 的，但是在你的循环中你实际上没有引用你的循环变量。第一行应该引用 dict，而第二行看起来是错误的，因为您试图索引到字典值而不是字典本身。尝试这个：

```
for (NSDictionary *dict in dataArray) {
    [test addObject:dict valueForKey:[arrayLetters objectAtIndex:i]]];
    [obj addObject:[dataArray valueForKey:@"telephone"]];
} 
```

同样，在您的帖子中没有信息的情况下，我在这里做出了一些假设。您的原始帖子缺少一些内容，例如有关 dataArray 格式的详细信息（我假设您的数据样本应该是 dataArray 的内容，但明确说明这一点会有所帮助）以及 arrayLetters 应该是什么。因此，您的代码可能存在其他问题；如果上述方法不能解决您的问题，请编辑您的帖子以包含该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:59:47.437

您没有按照您提供的详细信息正确解析字典，我已经修改了您的代码。检查一下。

```
-(void)filterContacts{
NSLog(@"I am here");
NSMutableArray* test=[[NSMutableArray alloc]init];
NSMutableArray* obj=[[NSMutableArray alloc]init];
NSLog(@" Data %@", dataArray);

for (int i=0; i<arrayLetters.count; i++) {
    for (NSDictionary *dict in dataArray) {
        [test addObject:[dict valueForKey:[arrayLetters objectAtIndex:i]]];
         if([test objectAtIndex:0]!= nil){
              [obj addObject: [[[dict valueForKey:[arrayLetters objectAtIndex:i]] objectAtIndex:0]valueForKey:@"telephone"]];
           }

}
   // NSLog(@" My test %@", obj);

} 
```

**编辑**

```
-(void)filterContacts{
NSLog(@"I am here");
NSArray *letters = [[NSArray alloc] initWithObjects:@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", nil];
NSMutableArray* test=[[NSMutableArray alloc]init];
NSMutableArray* obj=[[NSMutableArray alloc]init];
NSLog(@" Data %@", dataArray);

  for (int i=0; i<arrayLetters.count; i++) {
        [test addObject:[[dataArray objectAtIndex:0] valueForKey:[arrayLetters objectAtIndex:i]]];
}
for (NSDictionary *dict2 in test) {

    NSLog(@"%@",[[dict2 objectAtIndex:0] valueForKey:@"telephone"]);
}

} 
```

在 dict2 中，值将是

```
( 
                {
        letter = K;
        name = kkkkkk;
        rowSelected = "-1";
        telephone = "1 (234) 560-789,20313561301";
        telephoneSelected = "";
    }
); 
```

所以你应该显示`objectAtIndex:0`来识别`telephone`字典中的键。 `Note check for the character "K" or "R" only coz all other character values are empty`

# javascript - Phonegap db.transaction 回调多次触发

> ID：13684720
> 
> 赞同：0
> 
> 时间：2012-12-03T13:52:39.677
> 
> 标签：javascript, cordova, asynchronous

我正在使用[phonegap进行的项目遇到问题](http://phonegap.com/)

*[步骤 1]* - 我从 Web 服务器本地存储用户登录“会话”（Web SQL）。这工作正常，我可以成功连接到 Web 服务器，发布用户登录数据，从服务器获取响应，创建本地用户数据库并存储用户“会话”值

*[步骤 2]* - 然后我需要将此“会话”值传递回 Web 服务器，并从服务器接收响应数据。同样，这按预期工作，但问题是，**回调函数正在执行两次**。

*当用户点击屏幕上的一个按钮时调用第2*步，如果因为 phonegap 不止一次地拿起水龙头，这似乎不是*第 2 步被调用两次的原因，我尝试过：*

```
$(".yes_sync").live("tap", function(){
    console.log("tap!");
    ... 
```

仅记录一次点击事件。

当用户点击我正在呼叫时：

```
var db = window.openDatabase("MVIdb", "1.0", "MVIsqlite", 200000);
db.transaction(getUserId, getUserIdFailed, getUserIdsSuccess); 
```

getUserId、getUserIdFailed 和 getUserIdsSuccess 函数如下所示：

```
function getUserId(tx){
    tx.executeSql("SELECT * FROM user WHERE id = '1'", [], getUserIdsSuccess,     getUserIdFailed);
}

function getUserIdFailed(tx, results){
    console.log("Error retrieving user session ID");
}

function getUserIdsSuccess(tx, results){
    console.log("Success retrieving user session ID");
    if(typeof results != 'undefined'){
        var return_value = results.rows.item(0).user_id; 
        user_session_id = return_value;
        var token = $.md5(user_session_id+"whatever!");

        $.get('http://localhost/project/dummyserver/sync?user_id=' + user_session_id + '&token=' + token, function(data) {  
            data = $.parseJSON(data);       
            for (var key in data){
                console.log(data[key]['user_id']);
            }

            $(".ui-loader").fadeOut();
            jQuery.mobile.changePage("_sync_complete.html", {  role: "dialog", transition: "pop" } );
        });
    }
} 
```

如您所见，成功回调中 $.get 回调的最后一行打开了一个弹出对话框。这个对话被调用了两次。

我注意到 phonegap 有很多异步行为，我理解这是为了防止系统感觉“滞后”，但它肯定不应该在 db.transaction 上多次执行回调函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:04:18.863

您的回调被调用两次，因为您将它同时传递给`executeSql`命令和`transaction`. 将其从其中删除以使其按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:32:36.170

不是最优雅的解决方案，但我使用了全局变量

```
var has_getUserIdsSuccess = false; 
```

在回调函数中：

```
if(typeof results != 'undefined'){
    if (has_getUserIdsSuccess == false){ 
        has_getUserIdsSuccess = true;
        // as per above
        has_getUserIdsSuccess = false;  // set it back to false so use can press the execute this function again later
    } 
```

我仍然有兴趣看看是否有人有更好的解决方案！

# iteration - XSLT：如何识别值列表是否相同？

> ID：13684723
> 
> 赞同：0
> 
> 时间：2012-12-03T13:52:52.467
> 
> 标签：iteration, xslt-1.0

我得到了以下 xml 片段。

```
<Root>
    <SomeTags></SomeTags>
    <Values>
        <dateFrom>date 1<dateFrom>
        <dateEnd>date 2<dateEnd>
        <value1>10</value1>
        <value2>5</value2>
    </Values>
   More Values here....
    .....................
    .....................
    <Values>
        <dateFrom>date n<dateFrom>
        <dateEnd>date  n+1<dateEnd>
        <value1>10</value1>
        <value2>5</value2>
    </Values>
</Root> 
```

我想比较所有的`<value1>`值和`<value2>`值。如果它们相同，我想将整体压缩如下：

如果 values1 == 所有值相同，如果 values2== 所有值相同，那么这应该是输出。

```
<Values>
    <dateFrom>date 1<dateFrom> should be from the first Values item
    <dateEnd>date  n+1<dateEnd> should be from the last Values item
    <value1>10</value1>
    <value2>5</value2>
</Values> 
```

其他不同的模板。

如何在 BizTalk 2009 的 XSLT (1.0) 中实现这一点？我知道迭代。为每个。但是有没有办法像程序语言一样打破。我可以以某种方式比较每个值并返回一个布尔值，说明所有值是否相同.. ??

谢谢大家的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:05:54.967

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Values">
  <xsl:if test=
  "not(preceding-sibling::Values
              [value1=current()/value1 and value2=current()/value2])">
   <Values>
     <xsl:apply-templates select="value1|value2"/>
   </Values>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下格式正确的 XML 文档**（由问题中提供的严重格式错误的文本生成）时：

```
<t>
    <Values>
        <dateFrom>date 1</dateFrom>
        <dateEnd>date 2</dateEnd>
        <value1>10</value1>
        <value2>5</value2>
    </Values>
    <somethingElse/>
    <Values>
        <dateFrom>date n</dateFrom>
        <dateEnd>date  n+1</dateEnd>
        <value1>10</value1>
        <value2>5</value2>
    </Values>
</t> 
```

**产生想要的结果**：

```
<t>
   <Values>
      <value1>10</value1>
      <value2>5</value2>
   </Values>
   <somethingElse/>
</t> 
```

**说明**：

只需应用 XSLT 最基本的设计模式：使用和覆盖**[标识规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

# objective-c - iOS：带有多行 UITextView 的 UIAlertView

> ID：13684726
> 
> 赞同：1
> 
> 时间：2012-12-03T13:53:14.357
> 
> 标签：objective-c, ios, uiviewcontroller, uitextview, uialertview

我正在寻找一种将多行添加`UITextView`到`UIAlertView`. 我用谷歌搜索了很多，但我找不到有效的解决方案。

我正在使用 iOS 5。

还是只有 的子类才有可能`UIAlertView`？

编辑：我需要一个多行输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:59:29.127

苹果将​​编辑`UIAlertViews`标记为不良做法。因此，最好创建自己的自定义`UIViewController`，它看起来像一个警报视图。

使它不是你的函数调用警报，而是加载你的新视图控制器

这是一个很好的动画示例，`UIViewController`可以让它像典型的 IOS`AlertView`

```
 -(void)initialDelayEnded {
self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
self.view.alpha = 1.0;
[UIView animateWithDuration:kTransitionDuration/1.5 animations:^{
    self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
}completion:^(BOOL complete){
    [UIView animateWithDuration:kTransitionDuration/2 animations:^{
        self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
    }completion:^(BOOL complete){
        [UIView animateWithDuration:kTransitionDuration/2 animations:^{
            self.view.transform = CGAffineTransformIdentity;
        }];
    }];
}]; 
```

}

# oracle-apex - Oracle APEX 打开已保存的用户报告

> ID：13684728
> 
> 赞同：0
> 
> 时间：2012-12-03T13:53:30.363
> 
> 标签：oracle-apex

我为一个页面保存了一些报告，比如员工页面。例如，我保存了报告（通过应用一些过滤器创建，按保存并给出名称），例如，`Report_employees_for_dept_10`我 希望在上述每个报告的另一个页面中有 3 个按钮。当我按下与“ ”相关的按钮时。它应该打开名为. 我可以去员工页面。它显示的是上次查看的已保存报告，而不是我们想要的。`Report_employees_for_dept_20``Report_employees_for_dept_30``Report_employees_for_dept_10``Report_employees_for_dept_10`

您能否解释一下如何控制 IR 报告并打开正确的报告。

谢谢， S.Ravichandran

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:23:44.407

请参阅此问题：[链接到已保存的交互式报告](https://stackoverflow.com/questions/9214426/link-to-a-saved-interactive-report)
摘要：不，无法链接私人报告。与公开报告不同，没有别名，因此无法通过 url 选择私人报告。您需要公开您的报告。

# python - __init__ 和类变量的设置

> ID：13684732
> 
> 赞同：0
> 
> 时间：2012-12-03T13:53:49.033
> 
> 标签：python, variables, inheritance

我在理解类中的继承时遇到了一些麻烦，并且想知道为什么这段 python 代码不起作用，谁能告诉我这里出了什么问题？

```
## Animal is-a object 
class Animal(object):
    def __init__(self, name, sound):
        self.implimented = False
        self.name = name
        self.sound = sound

    def speak(self):
        if self.implimented == True:
            print "Sound: ", self.sound

    def animal_name(self):
        if self.implimented == True:
            print "Name: ", self.name

## Dog is-a Animal
class Dog(Animal):

    def __init__(self):
        self.implimented = True
        name = "Dog"
        sound = "Woof"

mark = Dog(Animal)

mark.animal_name()
mark.speak() 
```

这是通过终端的输出

```
Traceback (most recent call last):
  File "/private/var/folders/nd/4r8kqczj19j1yk8n59f1pmp80000gn/T/Cleanup At Startup/ex41-376235301.968.py", line 26, in <module>
    mark = Dog(Animal)
TypeError: __init__() takes exactly 1 argument (2 given)
logout 
```

我试图让动物检查是否实现了动物，然后如果是，则获取从动物继承的类以设置动物随后能够操作的变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T14:06:11.613

katrielalex 很好地回答了您的问题，但我还想指出，您的课程编码有些糟糕 - 如果不是错误的话。关于你使用类的方式似乎很少有误解。

首先，我建议阅读 Python 文档以了解基本概念：[http ://docs.python.org/2/tutorial/classes.html](http://docs.python.org/2/tutorial/classes.html)

要创建一个类，您只需执行

```
class Animal:
    def __init__(self, name, sound): # class constructor
        self.name = name
        self.sound = sound 
```

`a1 = Animal("Leo The Lion", "Rawr")`现在您可以通过调用或调用来创建名称对象。

要继承一个类，你可以：

```
# Define superclass (Animal) already in the class definition
class Dog(Animal):

    # Subclasses can take additional parameters, such as age
    def __init__(self, age):

        # Use super class' (Animal's) __init__ method to initialize name and sound
        # You don't define them separately in the Dog section
        super(Dog, self).__init__("Dog", "Woof")

        # Normally define attributes that don't belong to super class
        self.age = age 
```

现在你可以`Dog`通过说创建一个简单的对象`d1 = Dog(18)`并且你不需要使用`d1 = Dog(Animal)`，你已经告诉类它的超类`Animal`在第一行`class Dog(Animal):`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T13:55:39.297

1.  要创建一个类的实例，你要做

    ```
    mark = Dog() 
    ```

    不是`mark = Dog(Animal)`。

2.  不要做这种事`implimented`。如果您想要一个无法实例化的类（即您必须先进行子类化），请执行

    ```
    import abc
    class Animal(object):
        __metaclass__ = abc.ABCMeta

        def speak(self):
            ... 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:21:28.413

由于给定示例中的年龄不是父（或*基*）类的一部分，因此您必须在继承的类（也称为*派生*类）中实现函数（在类中称为*方法*）。

 *```
class Dog(Animal):

    # Subclasses can take additional parameters, such as age
    def __init__(self, age):
        ... # Implementation can be found in reaction before this one

    def give_age( self ):
        print self.age 
```*

# installation - 删除 JavaFx 库以加快 JavaFx.jar 文件的加载速度

> ID：13684739
> 
> 赞同：0
> 
> 时间：2012-12-03T13:54:02.423
> 
> 标签：installation, javafx, java

我创建了一个 JavaFx 应用程序，但是当我尝试在办公室的共享硬盘上打开它时，加载时间非常慢。

我和我的同事试图找出问题可能是什么，并发现这可能是因为 JavaFx 库的文件太大了。根据[甲骨文](http://www.oracle.com/technetwork/java/javafx/overview/faq-1446554.html)

> 从 JavaFX 2.2 和 Java SE 7 更新 6 开始，JavaFX 库作为 Java SE 的一部分安装；在 Java SE 6 于 2013 年 2 月终止生命周期之前，Java SE 6 用户（仅限 Windows）仍可使用独立版本的 JavaFX 2.2。

考虑到这一点，我是否应该能够从应用程序中删除 JavaFx 库而不冒应用程序无法工作的风险？还是我的问题有其他解决方案？

需要注意的一件重要事情是，当我从桌面本地运行文件时，完全没有问题，并且程序会在 3 秒内加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:37:45.300

那篇文章的意思是 Java 7 JRE 现在包括 JavaFX 运行时。没有一些与您的应用程序捆绑在一起的特殊库，您可以直接删除它们。

如果您将 JRE 与您的应用程序捆绑在一起（使用 ant 任务或 JavaFX Packager Tool），那么您的应用程序可能正在共享驱动器上使用 JRE，这可能会导致速度变慢。提供更多信息：http: [//docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)

否则，您的问题出在其他地方。关注的领域是：

1.  网络速度
2.  共享驱动器速度
3.  过多的类路径扫描

# android - 如何在android中访问我的应用程序数据库文件？

> ID：13684740
> 
> 赞同：0
> 
> 时间：2012-12-03T13:54:10.687
> 
> 标签：android, sqlite

我创建了一个使用 SQLite 数据库并插入一些数据的应用程序，然后我需要这个完整的 sqlite 数据库文件，我尝试访问它但我没有找到数据库文件，如何访问这个文件以使用我的 PC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:00:49.293

如果您使用的是模拟器，那么您可以访问您的数据库，只需从以下路径从**文件管理器**中拉出它：`data/data/com.my.package/databases/mydb.sqlite`

如果您在设备上运行应用程序，则使用以下代码从上述文件路径获取数据库（因为您无法访问 android 设备的内部文件系统）

```
try {
            File sd = Environment.getExternalStorageDirectory();
            File data = Environment.getDataDirectory();

            if (sd.canWrite()) {
                String currentDBPath = "/data/com.yourApp.common/databases/yourApp.db";
                String backupDBPath = "/yourApp.db";
                File currentDB = new File(data, currentDBPath);
                File backupDB = new File(sd, backupDBPath);

                if (currentDB.exists()) {
                    FileChannel src = new FileInputStream(currentDB)
                            .getChannel();
                    FileChannel dst = new FileOutputStream(backupDB)
                            .getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();
                }
            }
        } catch (Exception e) {
        } 
```

之后，一旦你有了你的 db 文件，你就可以从名为 SQLte Manager 的 Mozilla 插件（插件）中查看它。使用这个：[https](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/) ://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/下载它。

# c# - BitmapCacheBrush - 缓存后释放视觉？

> ID：13684744
> 
> 赞同：3
> 
> 时间：2012-12-03T13:54:27.150
> 
> 标签：c#, wpf, performance, shapes, drawingvisual

我正在评估 WPF 在需要渲染数万个元素（矩形、线条、圆形）的应用程序中的使用。渲染需要快速，但可以完成一次并缓存 - 所以我发现 BitmapCacheBrush 是推荐的这样做方式。

但是，似乎当我渲染到 DrawingVisual 并更新 BitmapCacheBrush.Target 以使用它时，会保留 DrawingVisual 的内存。

将 DrawingVisual 缓存为位图后，有没有办法删除它？或另一种方法？（我查看了 RenderTargetBitmap 但显然不使用硬件加速渲染）

谢谢 AnonDev

# c# - 收到错误“无法添加已存在的实体”。在没有过程的情况下将表的值插入到数据库中

> ID：13684748
> 
> 赞同：3
> 
> 时间：2012-12-03T13:54:32.653
> 
> 标签：c#, linq

我正在使用 Linq to sql 将记录列表插入到 DB 表中，如下所示：

```
//my DataContext Class
 using (VTMMedicalDBDataContext objVTMMedicalDBDataContext = new VTMMedicalDBDataContext())
 {
     ReadOnlyCollection<TimeZoneInfo> objTimeZones = null;

     objTimeZones = TimeZoneInfo.GetSystemTimeZones();

     if (objTimeZones.Count > 0)
     {
         //List<TimeZoneMaster> listTimeZones = new List<TimeZoneMaster>();
         TimeZoneMaster objTimeZoneMaster = new TimeZoneMaster();

         foreach (var timezone in objTimeZones.ToList())
         {

             objTimeZoneMaster.TimeZoneName = timezone.DisplayName;

             var localName = timezone.DisplayName;

             objTimeZoneMaster.TimeZoneOffsetInMinutes = Convert.ToInt32(timezone.BaseUtcOffset.TotalMinutes);                      

             objVTMMedicalDBDataContext.TimeZoneMasters.InsertOnSubmit(objTimeZoneMaster);
             objVTMMedicalDBDataContext.SubmitChanges();

         }

     }
} 
```

我有一个主键，但我已经将它作为 AutoGeneratd 在 DBML Nullable 中设置为 true 为 false。我仍然无法摆脱它......请提出一些建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T14:35:46.130

终于经过很多麻烦后，我得到了一个新概念的答案。

**对于所有面临类似问题的人，这里有一个明确的解决方案：**

***您需要在循环**（ *for each,for or any other..）内部创建“表”类的对象（您要在 DB 中更新的对象），*这样相同的记录不会被更新，并且每个对象都使用不同的内存位置（因为本地实例仅在循环内被破坏..）***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:05:21.360

> 我有一个主键，但我已经在 DBML 中将其设置为 AutoGenerated 为 true

很好，但是，您是否在数据库级别自动生成了该字段？在 DBML 级别自动生成实际上不会为您生成任何值，它只是向模型表明该值将由存储提供程序生成（因此它可能会省略将其作为查询的一部分发送）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T13:57:56.070

您必须更新表以使该列具有标识值（自动增量）。

然后更新您的 DBML 模型-> 从 DBML 设计器中删除表，在服务器资源管理器中刷新表并再次拖放表对象。生成项目，它应该工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-20T18:40:28.163

作为替代方案，您可以在 db 中调用存储过程，它将执行插入： [使用存储过程更新数据库。](https://weblogs.asp.net/scottgu/linq-to-sql-part-7-updating-our-database-using-stored-procedures)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T17:10:07.117

使用 (VTMMedicalDBDataContext objVTMMedicalDBDataContext = new VTMMedicalDBDataContext()) { ReadOnlyCollection objTimeZones = null;

```
 objTimeZones = TimeZoneInfo.GetSystemTimeZones();

 if (objTimeZones.Count > 0)
 {
     //List<TimeZoneMaster> listTimeZones = new List<TimeZoneMaster>();

     foreach (var timezone in objTimeZones.ToList())
     {
          TimeZoneMaster objTimeZoneMaster = new TimeZoneMaster();

         objTimeZoneMaster.TimeZoneName = timezone.DisplayName;

         var localName = timezone.DisplayName;

         objTimeZoneMaster.TimeZoneOffsetInMinutes = Convert.ToInt32(timezone.BaseUtcOffset.TotalMinutes);                      

         objVTMMedicalDBDataContext.TimeZoneMasters.InsertOnSubmit(objTimeZoneMaster);
         objVTMMedicalDBDataContext.SubmitChanges();

     }

 } 
```

}

# java - GSON 将引号添加到返回的 String 对象

> ID：13684749
> 
> 赞同：3
> 
> 时间：2012-12-03T13:54:35.287
> 
> 标签：java, gson

我通过 post 命令将对象从客户端发送到服务器。当 GSON 返回时，它错误地在返回的字符串的开头和结尾添加了引号。

这是代码：

客户端代码：

```
public void getUserRole(){
    Form form = new Form();
    form.add("username", "Testuser");
    form.add("firstname", "Test");
    form.add("lastname", "User");
    form.add("userGroup", "Admin");
    form.add("userGroup", "Normal");

    String userGroupStr = "";

    try {
        userGroupStr = client.post("/rest/login/", "getUserRole", MediaType.APPLICATION_FORM_URLENCODED, String.class, form), 

        //Inspection of userGroupStr  object has role set to: "Admin" when it returns
    }
}

public <T> T post(final String uriExtension, final String path, final String mediaType, final Class<T> returnType,
    final Object postData) {
    return post(uriExtension, path, mediaType, returnType, null, postData);
} 
```

服务器代码：

```
@POST
@Path("getUserRole")
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@PermitAll
public String getUserRole(@Context HttpServletRequest req,
    @FormParam("username") String username,
    @FormParam("firstname") String firstname,
    @FormParam("lastname") String lastname,
    @FormParam("userGroup") List<String> userGroups) throws Throwable {

    //Stripped out code which essentially sets role to Admin for testing purposes
    String role = "Admin";

    //Inspection of object has role set to: Admin
    return role;
} 
```

如果有人能告诉我如何阻止它为返回的对象添加一对额外的引号，那将不胜感激！

谢谢，

# c++ - 在运行时检查动态库的兼容性

> ID：13684759
> 
> 赞同：1
> 
> 时间：2012-12-03T13:55:21.563
> 
> 标签：c++, linux, dlopen

我正在开发一个 C++ 应用程序，它需要在运行时使用 dlopen 加载动态库。这个库一般不会由我编写。

人们推荐什么方法来确保这个库和我的应用程序之间的未来二进制兼容性？

我看到的选项是：

1.  将版本号放在库文件名中，无论如何都尝试加载它（通过符号链接）。如果dlopen失败，报错。

2.  维护返回版本号的第二个接口。但是，如果这个界面由于某种原因发生了变化，我们会遇到和以前一样的问题。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:07:29.803

您应该定义关于动态加载（即`dlopen`-ed）库的约定。

您可能有一个约定，即要求库提供一个`const char mylib_version_str[];`符号，该符号给出 API 的版本等。当然，您可以有自己的预处理器技巧来帮助解决这个问题。

为了您的灵感，您可以查看 GCC 对[插件](http://gcc.gnu.org/onlinedocs/gccint/Plugin-API.html#Plugin-API)的要求（例如`plugin_is_GPL_compatible`符号）。

如果动态加载的库是 C++ 中的，您可能会使用[demangling](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)来检查函数的签名......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:08:25.487

为什么不同时使用这两个选项？就目前而言，很少有库已经这样做了（例如 Lua，旧的 dll 是 Lua51.dll，然后你有 Lua52 等。你也可以查询它的版本。）

一个好的接口可以改变，但不是那么频繁，为什么要2个简单的静态方法

```
const char* getLibraryName();
uint32 getLibraryVersion(); 
```

随着时间的推移而变化？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:45:00.970

如果您/他们使用 libtool 来构建库/应用程序，您可以推荐这种方式：[http ://www.gnu.org/software/libtool/manual/libtool.html#Versioning](http://www.gnu.org/software/libtool/manual/libtool.html#Versioning)

# java - Spring 3 和 Struts2 集成自动装配

> ID：13684760
> 
> 赞同：0
> 
> 时间：2012-12-03T13:55:21.890
> 
> 标签：java, spring, struts2, applicationcontext

这是我的 eventAction ActionSupport 类

```
public class EventAction extends ActionSupport {

    protected EventService eventService;

    protected String redirectUrl;

    public String getRedirectUrl() {
        return redirectUrl;
    }

    public void setRedirectUrl(String redirectUrl) {
        this.redirectUrl = redirectUrl;
    }

    public void setEventService(EventService services) {
        this.eventService = services;
    }
} 
```

这是我的 applicationContext.xml 中的一个片段

```
<bean id ="eventService" class ="services.EventService" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean> 
```

代码工作正常，除非我在声明中更改了 id。

我的问题为什么 spring `<bean id ="eventService">`id 必须与 EventAction 支持类中的 eventService 实例变量匹配？不`id`只是为将要创建的 bean 创建一个标识符吗？为什么 bean 标记内的 id 在我的 EventAction 中应该是相同的，而在配置中甚至没有提到 EventAction 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:13:14.773

来自 Spring 文档[beans-beanname](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-beanname)

> 每个 bean 都有一个或多个 id（也称为标识符或名称；这些术语指的是同一事物）。这些 id 在托管 bean 的容器中必须是唯一的。一个 bean 几乎总是只有一个 id，但如果一个 bean 有多个 id，那么多余的基本上可以被视为别名。当使用基于 XML 的配置元数据时，您可以使用“id”或“name”属性来指定 bean 标识符。'id' 属性允许您只指定一个 id，并且由于它是一个真正的 XML 元素 ID 属性，因此 XML 解析器能够在其他元素引用该 id 时进行一些额外的验证；因此，它是指定 bean id 的首选方式。但是，XML 规范确实限制了 XML ID 中合法的字符。这通常不是一个约束，

我相信对于 Spring-Struts2，您正在使用需要定义自动连线策略的插件，或者插件将使用默认的`name`.

这意味着当 Struts2 和 Spring 之间的插件桥接时，它将尝试根据提供的自动连接策略注入 bean

参考[Struts2 Spring-plugin](http://struts.apache.org/2.3.4/docs/spring-plugin.html)

# java - 业务逻辑：从存储过程转移到 BRMS。优点和缺点

> ID：13684768
> 
> 赞同：0
> 
> 时间：2012-12-03T13:55:49.100
> 
> 标签：java, plsql, business-rules, rule-engine

我们正在开发一个应用程序，它*在 Oracle 数据库上的存储过程中实现业务逻辑。*几年来一直如此。业务规则多种多样，并且经常针对特定客户进行定制。

目前，它们在某种程度上与数据管理和数据检索代码混合在一起。 **我一直在考虑提议在 BRMS 中移动一些逻辑。**

我的同事可能会反对，因为：

1.  他们体验到，当前基于 PLSQL 的实现比在中间层（即 Java）**中实现逻辑的实现要高效得多。**

    *我们的用户通常确实需要*我们的软件提供较短的响应时间，因为它还指导他们在工业环境中的操作。

2.  我们的团队并不大，最了解业务规则的人也是实现存储过程的人。它们不习惯与 Java 一起工作，最重要的是，使用 PLSQL 可以让我们忽略有关框架、系统集成和不同层之间映射的所有麻烦。

    **如果我们要切换到 PLSQL 以外的其他东西，它必须是不需要大量 Java 编码并且可能独立于框架的东西。**

3.  PLSQL 允许在昂贵的 DBMS 上利用应用程序的权重。理想情况下，我们希望在 BRMS 和 DBMS 之间进行有效集成。

为了更好地提出我的建议，我需要一些关于以下问题的客观数据：

1.  从存储过程转移到 BRMS 的性能损失
2.  DBMS 和 BRMS 之间的集成
3.  BRMS 提供的抽象与 PSLSQL 和纯 Java 代码提供的抽象相比
4.  转换所需的培训

我在网上查了一些参考资料。不幸的是，他们中的大多数人比较了纯 Java 代码与存储过程或纯 Java 代码与 BRMS 的实现。我找不到任何比较存储过程和 BRMS 的东西，或者描述如何将存储过程解决方案与 BRMS 集成的任何东西。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:23:11.223

1.  如果您选择了一个完善的引擎，那么规则引擎的性能很可能会比访问数据库以检索和评估规则的系统的性能好得多。我们目前使用的引擎可以在大约 50 毫秒内针对单个复杂规则评估大约 200 万个对象。那是 200 万个复杂对象。

2.  引擎的功能之一应该是允许业务人员而不是程序员创建和管理规则的 UI。使用适当的引擎，程序员永远不应该创建和管理规则。您可能正在查看开源引擎（Drools 等）。他们通常会忽略这一点。这就是为什么您会有这样的印象，即您的员工必须学习 Java 才能创建业务规则。这是一个错误的假设。

3.  业务规则引擎的全部意义在于从主代码中抽象出业务逻辑。您的基于数据库的系统无法提供普通 BRE 提供的抽象级别。我不了解您的系统，但根据我对引擎和“数据库规则系统”的了解，我对此有 99.9% 的肯定。您需要一个数据库来存储规则。就这样。

4.  这取决于您选择的引擎。对于 IT 而言，培训通常很少，而对于企业而言，培训通常处于中等水平。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:29:47.103

Oracle 有一个内置的规则引擎，它没有被广泛宣传。然而，它是用 PL/SQL 构建的，当然它的接口是 PL/SQL。

我已经将它用于一些 ETL 任务，但没有任何需要高性能处理大容量数据的任务。如果您愿意为灵活性牺牲一些性能，但我建议您这样做。

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14288/toc.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14288/toc.htm)

# exception-handling - 带多个异常的骆驼重试控制

> ID：13684775
> 
> 赞同：4
> 
> 时间：2012-12-03T13:56:05.313
> 
> 标签：exception-handling, apache-camel

前言：我对 Camel 还很陌生，在尽可能地消化了 Camel 的实际操作后，我正在将其调整到我正在进行的项目中。在这个项目中，我们有一些相当复杂的错误处理，我想确保我可以在我们对代码进行骆驼化时复制它。

在我们的项目中（与大多数项目一样），有一组我们想要重试的异常和一组我们不想重试的异常——但更具体地说，有一组我们想要重试的次数多于其他异常（并非所有可恢复的错误都可以处理相同）。在这种情况下，我试图定义一个`onException`块来更改重新投递策略。但是，似乎 Exchange 维护计数 ( `Exchange.REDELIVERY_COUNTER`)，并且此计数不依赖于引发的异常。有没有办法让这个计数特定于给定的异常？

例如 - 我有两个例外`FooException`和`BarException`. 在我的路线中（或实际上在整个上下文中），我想重试 FooExceptions 10 次，但`BarException`s 应该只重试 2 次。所以上下文将包含：

```
<onException>
     <exception>my.exception.FooException</exception>
     <redeliveryPolicy maximumRedeliveries="10" redeliveryDelay="2000"
</onException>

<onException>
      <exception>my.exception.BarException</exception>
      <redeliveryPolicy maximumRedeliveries="2" redeliveryDelay="5000"
</onException> 
```

现在，担心 - 如果我的应用程序抛出 a`FooException`并重试 4 次（每次抛出 a `FooException`），然后在第 5 次尝试时，它抛出 a `BarException`，似乎这种工作方式是 Exchange 的 a`REDELIVERY_COUNTER`为 5，当我将策略重置为仅尝试两次，它（逻辑上）得出不应重试路由的结论并抛出异常。但是，在我的应用程序中`BarExceptions`应该重试两次，不管有多少`FooExceptions`被抛出。同样，如果它交替抛出 Foo 和 Bar 异常，我希望它只增加给定异常的计数器。

Camel in Action 的最后提倡使用`retryWhile`- 这是获取我正在寻找的那种控制的唯一方法吗？我是否需要创建一个知道每个异常计数的有状态 bean？还是我忽略了一些简单的事情？我想确保当我接近这个重构时，我不会让我们走上一条丑陋的道路。

使用骆驼 2.10.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:49:10.037

我通过以下测试检查了您的情况：

```
import org.apache.camel.EndpointInject;
import org.apache.camel.Exchange;
import org.apache.camel.Produce;
import org.apache.camel.ProducerTemplate;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.mock.MockEndpoint;
import org.apache.camel.test.junit4.CamelTestSupport;
import org.junit.Test;

import java.util.concurrent.atomic.AtomicLong;

/**
 * @author Illarion Kovalchuk
 *         Date: 12/7/12
 *         Time: 2:58 PM
 */
public class Test extends CamelTestSupport
{

    private static final String MIDDLE_QUEUE = "seda:middle";

    @EndpointInject(uri = "mock:result")
    protected MockEndpoint resultEndpoint;

    @Produce(uri = "direct:start")
    protected ProducerTemplate template;

    private Processor processor = new Processor();

    @Test
    public void shouldRedeliverOnErrors() throws Exception
    {
        resultEndpoint.expectedBodiesReceived("Body");
        template.sendBodyAndHeader(MIDDLE_QUEUE, "Body", "Header", "HV");
        resultEndpoint.assertIsNotSatisfied();
    }

    @Override
    protected RouteBuilder createRouteBuilder()
    {
        return new RouteBuilder()
        {
            @Override
            public void configure() throws Exception
            {

                onException(FooException.class)
                        .redeliveryDelay(2000)
                        .maximumRedeliveries(10);

                onException(BarException.class)
                        .redeliveryDelay(5000)
                        .maximumRedeliveries(2);

                from(MIDDLE_QUEUE)
                        .bean(Processor.class, "process")
                        .to(resultEndpoint)
                        .end();
            }
        };
    }

    public static class Processor
    {
        private static AtomicLong retryState = new AtomicLong(0L);

        public static void process(Exchange e) throws FooException, BarException
        {
            long rs = retryState.getAndAdd(1L);
            if (rs < 4)
            {
                System.err.println("Foo Attempt "+ rs);
                throw new FooException();
            }
            if (rs == 4)
            {
                System.err.println("Bar Attempt "+ rs);
                throw new BarException();
            }
            System.err.println("Normal Attempt "+ rs);
        }
    }

    public static class FooException extends Throwable
    {
    }

    private static class BarException extends Throwable
    {
    }
} 
```

结果，您的同意被批准：在 BarException 之后交付尝试被用尽，即使我们只有 4 个 FooExceptions 和 1 个 BarException。

不幸的是，我现在不能完全回答你的问题，但我正在研究它，如果有新的东西，我会更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:36:05.250

尝试替换您定义例外的顺序，例如：

```
<onException>
      <exception>my.exception.BarException</exception>
      <redeliveryPolicy maximumRedeliveries="2" redeliveryDelay="5000"
</onException>

<onException>
     <exception>my.exception.FooException</exception>
     <redeliveryPolicy maximumRedeliveries="10" redeliveryDelay="2000"
</onException> 
```

# ajax - 带有 AJAX 管理面板的 CMS

> ID：13684776
> 
> 赞同：0
> 
> 时间：2012-12-03T13:56:06.637
> 
> 标签：ajax, web-applications, content-management-system

我有一个相当旧的 CMS，它正在接近完全重新设计的阶段。目前，我想回顾一些现成的 CMS-es，它们的管理面板是用完整的 AJAX 制作的。任何人都可以提出一些建议吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:20:25.480

查看 VAACO，整个管理面板只是一个带有 AJAX 调用的网页。

[http://florida.vaaco.com/admin](http://florida.vaaco.com/admin)

```
username: admin
password: demo123 
```

# xcode - xcode 断言失败

> ID：13684778
> 
> 赞同：0
> 
> 时间：2012-12-03T13:56:10.303
> 
> 标签：xcode

在构建项目时，我收到指向此代码的断言失败。请问有什么想法吗？我尝试过清理、删除派生数据、关闭 xcode 等。请提供任何帮助。

```
unsigned int
FNVForCString(
    const char* s)
{
assert(s);

unsigned int hash = 2166136261;
int ch;
while (0 != (ch = *s++))
{
    hash *= 16777619;
    hash ^= ch;
}
return hash;
} 
```

只是说它在断言上失败了；线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:02:59.817

语言是C吗？我在这里做了这个假设，尽管如果这是 Objective-C，答案变化很小。

您传递给函数的值是`NULL`

`assert`那里说“如果值为，`s`则`NULL`在这一点上失败。

# arrays - Cakephp IN(x,x) 与 'AND'

> ID：13684781
> 
> 赞同：0
> 
> 时间：2012-12-03T13:56:21.183
> 
> 标签：arrays, cakephp, find, cakephp-2.1

我正在为 cakephp 2.1 中的自定义查找而苦苦挣扎。

在我的模型中，我有这个功能：

```
public function findByGenres($data = array()) {
        $this->Item2genre->Behaviors->attach('Containable', array('autoFields' => false));
        $this->Item2genre->Behaviors->attach('Search.Searchable');
        $query = $this->Item2genre->getQuery('all', array(
            'conditions' => array('Genre.name'  => $data['genre']),
            'fields' => array('item_id'),
            'contain' => array('Genre')
        ));
        return $query;
    } 
```

这将返回以下查询：

```
SELECT `Item`.`id` FROM `items` AS `Item` 
     WHERE `Item`.`id` 
       IN(SELECT `Item2genre`.`item_id` FROM `item2genre` AS Item2genre 
          LEFT JOIN `genres` AS Genre ON(`genre_id` = `Genre`.`id`) 
              WHERE `Genre`.`name` 
                IN ('Comedy', 'Thriller')
         ) 
```

查询的结果返回具有与之关联的“喜剧”或“惊悚”类型的项目。

**如何修改查询以仅返回与其相关联的“喜剧”和“惊悚片”类型的项目？**

有什么建议么？

*编辑：*

数据内容为：

```
'genre' => array(
                (int) 0 => 'Comedy',
                (int) 1 => 'Thriller'
            ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:10:52.070

你会希望你的`'conditions'`钥匙是这样的：

```
'conditions' => array(
    array('Genre.name' => 'Comedy'),
    array('Genre.name' => 'Thriller')
) 
```

因此，特别针对您的问题，您`$data['genre']`是`array('Comedy', 'Thriller')`. 因此，您可以通过执行以下操作创建一个内容与您需要的内容相似的变量：

```
$conditions = array();
foreach ($data['genre'] as $genre) {
    $conditions[] = array('Genre.name' => $genre);
} 
```

# html - 带有图像的 html 电子邮件圆形按钮

> ID：13684782
> 
> 赞同：0
> 
> 时间：2012-12-03T13:56:27.973
> 
> 标签：html, html-email, html-table

我在制作带有图像的圆形按钮时遇到问题..该按钮在浏览器中显示正常，但在电子邮件客户端（包括 yahoo 和 gmail）中，按钮中断..这是我正在使用的 HTML 表格代码：

```
<table width="144" cellpadding="0" cellspacing="0" border="0" style="background-color: #9C084A">
  <tr>
    <td width="12"><img src="http://thehotdeal.net/clients/1/padma/1.gif" width="12" height="12" border="0" alt="...">
    </td>
    <td width="130"></td>
    <td width="12">
      <img src="http://thehotdeal.net/clients/1/padma/2.gif" width="12" height="12" border="0" alt="...">
    </td>
 </tr>
 <tr>
   <td cellpadding="0" cellspacing="0" border="0"></td>
   <td align="center">
     <p style="padding: 0"> <span mc:edit="date" style="color: #ffffff;">2012 - $25</span></p>
   </td>
   <td cellpadding="0" cellspacing="0" border="0"></td>
 </tr>
 <tr>
 <td>
   <img src="http://thehotdeal.net/clients/1/padma/3.gif" width="12" height="12" border="0" alt="...">
 </td>
 <td cellpadding="0" cellspacing="0" border="0"></td>
 <td>
   <img src="http://thehotdeal.net/clients/1/padma/4.gif" width="12" height="12" border="0" alt="...">
 </td>
</tr>
</table> 
```

[这是它的样子..注意它下面的一行..！](http://i.stack.imgur.com/3oTHA.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:07:53.360

可以更改一些元素以使此渲染更好地跨客户端：

*   `display:block;`在你的图像上
*   将您的背景颜色`td`分别使用`bgcolor="#9C084A"`
*   明确设置每个的宽度和高度`td`
*   `valign`如果需要，在您的图像上使用

这是带有这些更改的 jsfiddle - [http://jsfiddle.net/X5QTR/](http://jsfiddle.net/X5QTR/)

# perl - LWP 发送 Post 请求并仅在响应中获取标头

> ID：13684783
> 
> 赞同：0
> 
> 时间：2012-12-03T13:56:28.257
> 
> 标签：perl, lwp

我有这样的代码

```
my $ua = new LWP::UserAgent;
$ua->timeout($timeout);
$ua->agent($useragent);
$response = $ua->post($domain,['login_name'=>$login,'login_password'=> $password])->as_string; 
```

页面内容太大，收不到。如何仅通过发送帖子数据获取标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:33:52.547

首先，检查您是否可以`login_name`通过`login_password`HEAD（在 url 字符串中：）传递它`domain/?login_name=...&login_password=...`。如果这不起作用，那么你的情况很糟糕。

您不能将 POST 与 HEAD 的行为一起使用。LWP 将等待完整响应。

无论如何，使用 POST 服务器都会向您发送内容，但是您可以避免自己使用套接字 tcp 接收所有内容：**gethostbyname**、**connect**、**sysread** ，直到您`/\r?\n\r?\n/`在此之后获取并关闭套接字。无论如何都会使用一些流量，但您可以节省内存和接收时间。

使用套接字执行此操作并不正常，但有时当您拥有高负载/大数据时 - 没有比这种混乱更好的方法了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:25:02.457

我认为这应该为你做。

```
my $ua = LWP::UserAgent->new();
$ua->timeout($timeout);
$ua->agent($useragent);
my $response = $ua->post( 
    $domain,
    [ 'login_name' => $login, 'login_password' => $password ] 
);

use Data::Dumper;

print Dumper( $response->headers() );
print $response->request()->content(), "\n"; 
```

# java - 带有嵌套 json 数组的可扩展列表视图

> ID：13684789
> 
> 赞同：1
> 
> 时间：2012-12-03T13:56:52.843
> 
> 标签：java, android, expandablelistview

我们正在开发一个产品，我们必须在其中解析一个 json 数组并将其显示在一个具有 3 个级别的可扩展列表视图中。我尝试了这个概念，我只达到了我无法进入下两个级别的第一级。我是 android 开发新手，请帮助我实现这一目标。我的代码如下....

```
package com.example.expanadbalelistview;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.HashMap;
import org.json.JSONArray;
import org.json.JSONObject;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.app.ExpandableListActivity;
import android.content.Context;
import android.graphics.Color;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity {
    int aa;
    ArrayList<String[]> subcats1;
    String results;
    JSONArray jarray,jk;
    ExpandableListView explvlist;
    String top_cats[];
    String sub_cats[];

    private LayoutInflater inflater;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);
           inflater = LayoutInflater.from( MainActivity.this);
           new as(aa).execute();
           explvlist = (ExpandableListView) findViewById(R.id.ParentLevel222);

    }

    public class ParentLevel extends BaseExpandableListAdapter {
        @Override
        public Object getChild(int arg0, int arg1)
        {
               return arg1;
        }

        @Override
        public long getChildId(int groupPosition, int childPosition)
        {

               return childPosition;
        }

        @Override
        public View getChildView(int groupPosition, int childPosition,boolean isLastChild, View convertView, ViewGroup parent)
        {

Log.e("grp first",String.valueOf(groupPosition));
                View v = null;
                if( convertView != null )
                    v = convertView;
                else
                    v = inflater.inflate(R.layout.child_row1, parent, false); 
                    TextView colorGroup = (TextView)v.findViewById( R.id.grp_child );
                    colorGroup.setText(subcats.get(groupPosition)[childposition]);
                    Log.e("kkk",String.valueOf(k));
                      return v;
            //CustExpListview SecondLevelexplv = new //CustExpListview(MainActivity.this);
           // SecondLevelexplv.setAdapter(new SecondLevelAdapter());
            //SecondLevelexplv.setGroupIndicator(null);
            //return SecondLevelexplv;
        }

        @Override
        public int getChildrenCount(int groupPosition)
        {
               Log.e("ss",String.valueOf(subcats1.get(groupPosition).length));
               return subcats1.get(groupPosition).length;

        }

        @Override
        public Object getGroup(int groupPosition) 
        {
               return groupPosition;
        }

        @Override
        public int getGroupCount()
        {
               return jarray.length();
        }

        @Override
        public long getGroupId(int groupPosition)
        {
            Log.e("group pos",String.valueOf(groupPosition));
               return groupPosition;
        }

        @Override
        public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) 
        {
            Log.e("group",String.valueOf(groupPosition));
            View v = null;
             if( convertView != null )
                 v = convertView;
             else
                 v = inflater.inflate(R.layout.group_row, parent, false); 
                TextView colorGroup = (TextView)v.findViewById( R.id.row_name );
                colorGroup.setText(top_cats[groupPosition]);

                return v;
        }

        @Override
        public boolean hasStableIds() {
               return true;
        }

        @Override
        public boolean isChildSelectable(int groupPosition, int childPosition) {
               return true;
        }
 }

 public class CustExpListview extends ExpandableListView {

        int intGroupPosition, intChildPosition, intGroupid;

        public CustExpListview(Context context) 
        {

               super(context);
               Log.e("intGroupPostion",String.valueOf(intGroupPosition));   
        }

        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
               widthMeasureSpec = MeasureSpec.makeMeasureSpec(960,
                            MeasureSpec.AT_MOST);
               heightMeasureSpec = MeasureSpec.makeMeasureSpec(600,
                            MeasureSpec.AT_MOST);
               super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
 }

 public class SecondLevelAdapter extends BaseExpandableListAdapter 
 {
     int k=0;
        @Override
        public Object getChild(int groupPosition, int childPosition) {
               return childPosition;
        }

        @Override
        public long getChildId(int groupPosition, int childPosition)
        {

               return childPosition;
        }

        @Override
        public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
               TextView tv = new TextView(MainActivity.this);
               tv.setText("child");
               tv.setTextColor(Color.BLACK);
               tv.setTextSize(20);
               tv.setPadding(15, 5, 5, 5);
               tv.setBackgroundColor(Color.YELLOW);
               tv.setLayoutParams(new ListView.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
               return tv;
        }

        @Override
        public int getChildrenCount(int groupPosition)
        {
               return 5;
        }

        @Override
        public Object getGroup(int groupPosition)
        {
               return groupPosition;
        }

        @Override
        public int getGroupCount() {
               return 1;
        }

        @Override
        public long getGroupId(int groupPosition)
        {
               return groupPosition;
        }

        @Override
        public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) 
        {
            View v=null;
                return v;
       }

        @Override
        public boolean hasStableIds() {
               // TODO Auto-generated method stub
               return true;
        }

        @Override
        public boolean isChildSelectable(int groupPosition, int childPosition) {
               // TODO Auto-generated method stub

               return true;
        }

 }

 public class as extends AsyncTask
    {

        public as(int aa)
        {

        }

        @Override
        protected Object doInBackground(Object... params) 
        {

            try {

                   URL twitter = new URL("https://testaws.bigbasket.com/mapi/v0.0.1/browse-category/");
                   System.out.println(twitter);
                   URLConnection tc = twitter.openConnection();
                   BufferedReader in = new BufferedReader(new InputStreamReader(tc.getInputStream()));
                   String line;

                   while ((line = in.readLine()) != null) 
                   {  
                       jarray=new JSONArray(line);
                       top_cats=new String[jarray.length()];
                       subcats1 = new ArrayList<String[]>();
                       for (int i = 0; i < jarray.length(); i++)
                       {
                       JSONObject jo = (JSONObject) jarray.get(i);
                       String top=(jo.getString("top_category"));
                       jk =new JSONArray(jo.getString("sub_cats"));
                       int comat=top.indexOf(",");
                       top=top.substring(1, comat);
                       top=top.replace("<br\\/>", "");
                       top=top.replaceAll(""+'"'+"", "");
                       Log.e("tt",top);
                       top_cats[i]=top;
                       sub_cats=new String[jk.length()];

                      for(int j=0;j<jk.length();j++)
                      {
                          Log.e("de",String.valueOf(j));
                          JSONObject jo1 = (JSONObject) jk.get(j);
                          String top1=(jo1.getString("sub_category"));
                          sub_cats[j]=top1;
                          Log.e("dd",String.valueOf(sub_cats[j]));

                      }
                   subcats1.add(i,sub_cats);

                      }

        }
            }
            catch(Exception e)
            {

            }
            return null;
        }
        @Override
        protected void onPostExecute(Object result)
        {
             explvlist.setAdapter(new ParentLevel());

        }

        @Override
        protected void onPreExecute()
        {}

    }

} 
```

请帮我 。提前致谢....

json数组

```
[
    {
        "top_category": [
            "Fruits & <br/> Vegetables",
            "fruits-vegetables"
        ],
        "sub_cats": [
            {
                "cats": [],
                "sub_category": [
                    "Frozen Vegetables",
                    "frozen-veg"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Apple",
                            "apple"
                        ]
                    },
                    {
                        "cat": [
                            "Banana",
                            "bananas"
                        ]
                    },
                    {
                        "cat": [
                            "Exotic Fruits",
                            "exotic-fruits"
                        ]
                    },
                    {
                        "cat": [
                            "Melon",
                            "melon"
                        ]
                    },
                    {
                        "cat": [
                            "Oranges & Sweet Lime",
                            "citrus-fruits"
                        ]
                    },
                    {
                        "cat": [
                            "Other Fruits",
                            "other-fruits"
                        ]
                    }
                ],
                "sub_category": [
                    "Fruits",
                    "fruits"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Organic F&V",
                    "organic-fv"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Beans",
                            "beans"
                        ]
                    },
                    {
                        "cat": [
                            "Brinjals",
                            "brinjals"
                        ]
                    },
                    {
                        "cat": [
                            "Chilli, Lemon, Garlic & Ginger",
                            "chilli-lemon-garlic-ginger"
                        ]
                    },
                    {
                        "cat": [
                            "Exotic Vegetables",
                            "exotic-vegetables"
                        ]
                    },
                    {
                        "cat": [
                            "Gourd & Cucumber",
                            "gourds-cucumbers"
                        ]
                    },
                    {
                        "cat": [
                            "Leafy Vegetables",
                            "leafy-vegetables"
                        ]
                    },
                    {
                        "cat": [
                            "Other Vegetables",
                            "other-vegetables"
                        ]
                    },
                    {
                        "cat": [
                            "Potato, Onion & Tomato",
                            "potato-onion-tomato"
                        ]
                    },
                    {
                        "cat": [
                            "Root Vegetables",
                            "root-vegetables"
                        ]
                    }
                ],
                "sub_category": [
                    "Vegetables",
                    "vegetables"
                ]
            }
        ]
    },

    {
        "top_category": [
            "Bread <br/> Dairy & Eggs",
            "bread-dairy-eggs"
        ],
        "sub_cats": [
            {
                "cats": [
                    {
                        "cat": [
                            "Bread",
                            "breads"
                        ]
                    },
                    {
                        "cat": [
                            "Buns & Pavs",
                            "buns-cakes"
                        ]
                    },
                    {
                        "cat": [
                            "Cakes",
                            "cakes"
                        ]
                    }
                ],
                "sub_category": [
                    "Bread & Bakery",
                    "bread-bakery"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Butter & Cream",
                            "butter"
                        ]
                    },
                    {
                        "cat": [
                            "Cheese",
                            "cheese"
                        ]
                    },
                    {
                        "cat": [
                            "Condensed Milk",
                            "condensed-milk"
                        ]
                    },
                    {
                        "cat": [
                            "Curds & Buttermilk",
                            "curds-buttermilk"
                        ]
                    },
                    {
                        "cat": [
                            "Milk",
                            "milk"
                        ]
                    },
                    {
                        "cat": [
                            "Milk Drinks",
                            "milk-milk-drinks"
                        ]
                    },
                    {
                        "cat": [
                            "Paneer & Tofu",
                            "paneer-tofu"
                        ]
                    },
                    {
                        "cat": [
                            "Soya Drinks",
                            "soya-drinks"
                        ]
                    },
                    {
                        "cat": [
                            "Yogurt & Lassi",
                            "yogurt-lassi"
                        ]
                    }
                ],
                "sub_category": [
                    "Dairy Products",
                    "dairy-products"
                ]
            }
        ]
    },

    {
        "top_category": [
            "Household",
            "household"
        ],
        "sub_cats": [
            {
                "cats": [
                    {
                        "cat": [
                            "Brooms",
                            "brooms"
                        ]
                    },
                    {
                        "cat": [
                            "Cleaning Agents",
                            "cleaning-agents"
                        ]
                    },
                    {
                        "cat": [
                            "Tissues",
                            "tissues"
                        ]
                    }
                ],
                "sub_category": [
                    "Cleaning Articles",
                    "cleaning-articles"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Washing Bars",
                            "washing-bars"
                        ]
                    },
                    {
                        "cat": [
                            "Washing Liquids",
                            "washing-liquids"
                        ]
                    },
                    {
                        "cat": [
                            "Washing Powders",
                            "washing-powders"
                        ]
                    }
                ],
                "sub_category": [
                    "Detergents",
                    "detergents"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Batteries/Cells",
                            "batteriescells"
                        ]
                    },
                    {
                        "cat": [
                            "CFL's",
                            "cfls"
                        ]
                    }
                ],
                "sub_category": [
                    "Electricals",
                    "electricals"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Garbage Bags",
                    "garbage-bags"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Disposable Tableware",
                            "disposable-tableware"
                        ]
                    },
                    {
                        "cat": [
                            "Other Kitchenware",
                            "other-kitchenware"
                        ]
                    }
                ],
                "sub_category": [
                    "Kitchenware",
                    "kitchenware"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Pet Food",
                    "pet-food"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Plasticware",
                    "plasticware"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Pooja Needs",
                    "pooja-needs"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Shoe Care",
                    "shoe-care"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Other Stationery",
                            "other-stationery"
                        ]
                    },
                    {
                        "cat": [
                            "Printing Accessories",
                            "printing-accessories"
                        ]
                    }
                ],
                "sub_category": [
                    "Stationery",
                    "stationery"
                ]
            }
        ]
    },
    {
        "top_category": [
            "Confectionery",
            "confectionery"
        ],
        "sub_cats": [
            {
                "cats": [],
                "sub_category": [
                    "Biscuits",
                    "biscuits"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Chocolates",
                    "chocolates"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Cookies",
                    "cookies"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Gums & Freshners",
                            "gums-freshners"
                        ]
                    },
                    {
                        "cat": [
                            "Sweets",
                            "sweets"
                        ]
                    },
                    {
                        "cat": [
                            "Toffees",
                            "toffees"
                        ]
                    }
                ],
                "sub_category": [
                    "Sweets & Candies",
                    "sweets-candies"
                ]
            },
            {
                "cats": [],
                "sub_category": [
                    "Wafers",
                    "wafers"
                ]
            }
        ]
    },
    {
        "top_category": [
            "Meat",
            "meat"
        ],
        "sub_cats": [
            {
                "cats": [
                    {
                        "cat": [
                            "Fresh Chicken",
                            "fresh-chicken"
                        ]
                    }
                ],
                "sub_category": [
                    "Chicken",
                    "chicken"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Fresh Mutton",
                            "fresh-mutton"
                        ]
                    }
                ],
                "sub_category": [
                    "Mutton",
                    "mutton"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Fresh",
                            "fresh"
                        ]
                    }
                ],
                "sub_category": [
                    "Pork & Other Meats",
                    "pork-other-meats"
                ]
            },
            {
                "cats": [
                    {
                        "cat": [
                            "Fish",
                            "fish"
                        ]
                    },
                    {
                        "cat": [
                            "Other Seafood",
                            "other-seafood"
                        ]
                    }
                ],
                "sub_category": [
                    "Seafood",
                    "seafood"
                ]
            }
        ]
    }
] 
```

我改变了我的代码。现在我得到了第二级。但是第三层有一个问题。我无法创建`groupView()`到第二级。因此我无法建立第三级视图。请提前帮助谢谢

# mysql - PHP/MYSQL 连接多个表

> ID：13684796
> 
> 赞同：9
> 
> 时间：2012-12-03T13:57:19.157
> 
> 标签：mysql

**TICKETS**表中的字段：

```
ID TICKETID CUSTOMER
234   29      9798797
235   76      7887878 
```

表**RECEPTS**中的字段：

```
ID   DATENEW    TOTAL
234 2012-12-03   22.57
235 2012-12-03   33.98 
```

表**PAYMENTS**中的字段：

```
RECEIPT   PAYMENT
234       cash
235       debt 
```

表**CUSTOMERS**中的字段：

```
ID            NAME
9798797       John
7887878       Helen 
```

表之间的关系很容易理解：`TICKETS.CUSTOMER=CUSTOMERS.ID;` `PAYMENTS.RECEIPT=RECEIPTS.ID=TICKETS.ID`

我希望达到的最终结果：

```
TICKETID DATENEW      NAME    PAYMENT TOTAL
29       2012-12-03   John     cash   22.57
76       2012-12-03   Helen    debt   33.98 
```

我试图做这样的事情，但它在某处出错：

```
Select TICKETS.TICKETID, RECEIPTS.DATENEW, PAYMENTS.TOTAL,  CUSTOMERS.NAME, PAYMENTS.PAYMENT FROM PEOPLE, RECEIPTS 
INNER JOIN TICKETS ON RECEIPTS.ID = TICKETS.ID
INNER JOIN CUSTOMERS ON TICKETS.CUSTOMER = CUSTOMERS.ID
ORDER BY RECEIPTS.DATENEW 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T14:05:57.683

您应该能够使用以下内容来获得结果：

```
select t.ticketid,
  date_format(r.datenew, '%Y-%m-%d') datenew,
  c.name,
  p.payment,
  r.total
from tickets t
left join RECEPTS r
  on t.id = r.id
left join CUSTOMERS c
  on t.customer = c.id
left join payments p 
  on t.id = p.RECEIPT
  and r.id = p.RECEIPT 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c27e9/5)

结果：

```
| TICKETID |    DATENEW |  NAME | PAYMENT | TOTAL |
---------------------------------------------------
|       29 | 2012-12-03 |  John |    cash | 22.57 |
|       76 | 2012-12-03 | Helen |    debt | 33.98 | 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T14:05:00.007

这将给出您想要的输出：

```
SELECT
    p.RECEIPT AS TICKETID,
    r.DATENEW,
    c.NAME,
    p.PAYMENT,
    r.TOTAL
FROM
    PAYMENTS p
LEFT JOIN
    RECEIPTS r ON r.ID = p.RECEIPT
LEFT JOIN
    TICKETS t ON t.ID = p.RECEIPT
LEFT JOIN
    CUSTOMERS c ON c.ID = t.CUSTOMER
ORDER BY
    r.DATENEW DESC 
```

# android - 从android中的webservice检索字符串列表

> ID：13684799
> 
> 赞同：2
> 
> 时间：2012-12-03T13:57:28.937
> 
> 标签：android, arraylist, android-ksoap2

我正在尝试从我的 SoapObject 中检索字符串列表。我正在使用 KSoap2 调用我的 Web 服务，它返回字符串列表。这是我的代码

```
SoapPrimitive response = (SoapPrimitive)envelope.getResponse(); 
```

谁能帮我从我的 SoapPrimitive 对象中获取所有列表元素。

喜欢`List abc =response.getList() or something`？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:36:45.593

您的案例是此案例的简化版本：[Parsing kSoap response to array of objects](https://stackoverflow.com/questions/10405592/parsing-ksoap-response-to-array-of-objects)

但略有不同的是，您的对象很简单：

```
SoapObject result = (SoapObject) envelope.getResponse();
SoapObject soapresults = (SoapObject)result.getProperty(0);

int count = soapresults.getPropertyCount();

ArrayList<PT> simplifiedList = new ArrayList<PT>(); 
for (int i = 0; i < count; i++)
{
     soapresults.getPropertyAs(PT)(i)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:05:15.863

终于在@Thunder 的建议的帮助下得到了答案，而不是
SoapObject result = (SoapObject) envelope.getResponse(); 我们必须使用

```
java.util.Vector<String> result11 = (java.util.Vector<String>)envelope.getResponse(); // to get List of Strings from the SoapObject.. then
ArrayList<String> prjList = new ArrayList<String>();
for(String cs : result11)
{
prjList.add(cs);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T16:14:10.353

你可以像这样得到你的soapObject的字符串：

```
SoapObject resSoap =(SoapObject)envelope.bodyIn; 
int count = resSoap.getPropertyCount();
for (int i=0; i<count;i++){
    SoapObject so = (SoapObject) resSoap.getProperty(i);
    int idxic = so.getPropertyCount();
    lst= new String[idxic];
    String item;
    for (int e=0; e<idxic;e++){
        item=so.getProperty(e).toString();
        lst[e]=item;
    }
} 
```

# html - 元素的最低限度的样式是什么

> ID：13684800
> 
> 赞同：5
> 
> 时间：2012-12-03T13:57:29.903
> 
> 标签：html, css, styles, href

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:00:06.880

最低限度是**根本没有样式**——这样浏览器就会自动应用它的默认样式。

通常的默认值确实是宝蓝色的链接，红色或紫色的访问，其余的没有什么特别的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:00:50.427

回答是因为@Rob 说我应该把它放在这里

```
a.element{} 
```

或者

```
.element {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:00:18.340

你只需使用

```
.element {text-decoration:none;color:#CCC;} 
```

就是这样。
如果您想另外设置样式`:hover`或`:active`状态，请在之后执行`.element {}`
如果您希望它适用于所有链接，您可以使用

```
a {text-decoration:none;color:#CCC;} 
```

# javascript - 如何使用 Chrome 扩展的 ContentScript 更改 flashvars？

> ID：13684804
> 
> 赞同：1
> 
> 时间：2012-12-03T13:57:59.607
> 
> 标签：javascript, jquery, google-chrome-extension, flash

我想创建一个 chrome 扩展来帮助我调试我的 swf，并且我希望该扩展能够更改一些 flashvar，同时保持其他的不变。

我无法想象这是一个新的或独特的问题，所以在我重新发明轮子之前，我问这里是否有人有它正在完成的例子，或者如何做到这一点。

我试过搜索，但我的 googlefu 似乎关闭了。

我的用例如下。我有一个 Google Chrome 扩展程序，其中有一些带有可能的 flash var 值的下拉菜单。我想要更改下拉菜单中的值，然后用这些新的 flashvar 重新加载 swf，但不更改不在我的下拉菜单中的 flashvar。

我可以使用下拉菜单中的值轻松地在页面上注入新的 swf，但是我希望能够重新加载而不是重新创建 swf。

我曾尝试使用 Jquery 来提取所有的 flash 变量，如下所示：

```
var flashVars = $("param[name=flashvars]", gameSwfContainer).val(); 
```

但是，我很难更改或仅替换几个值，然后将它们注入回对象中。（除非有更好的方法，否则正则表达式在这里可能会有所帮助？）

谢谢你的帮助。

目前，我正在尝试执行以下操作，但我不确定这是否是正确的方向。内容脚本.js

```
//Setup
var swfVersionStr = "10.1.0";
var xiSwfUrlStr = "playerProductInstall.swf";
var params = {};
    params.quality = "high";
    params.bgcolor = "#000000";
    params.allowscriptaccess = "always";
    params.allowfullscreen = "true";
var attributes = {};
    attributes.id = "game_swf_con";
    attributes.name = "game_swf_con";
    attributes.class = "game_swf_con";
    attributes.align = "middle";
var InjectedFlashvars = {
    "run_locally": "true",
        //.. some other flash vars that I won't be changing with my extension
    "swf_object_name":"game_swf"
};
// Injection code called when correct page and div detected;    
var injectScriptText = function(text)
    { 
                loopThroughLocalStorage();
                swfobject.embedSWF(
                    swfName, "game_swf_con",  
                    "760", "625", 
                    swfVersionStr, xiSwfUrlStr, 
                    InjectedFlashvars, params, attributes);
       swfobject.createCSS("#game_swf_con", "display:block;text-align:left;");
    };
        function loopThroughLocalStorage()
    {
        for(key in localStorage){
            try{
            var optionArray = JSON.parse(localStorage[key]);
            var option = returnSelectedFlashVar(optionArray);
            var value = option.value ? option.value : "";
            InjectedFlashvars[key] = value;
            } catch(err){}

        }
    }

    function returnSelectedFlashVar(optionArray){
        for(var i= 0; i < optionArray.length;i++)
        {
            if(optionArray[i].selected == true)
            {
                return optionArray[i];
            }
        }
    } 
```

总的来说，我目前有 contentscript.js、background.js、options.js、options.html、popup.html 和 popup.js 上面的代码目前只存在于 contentscript.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:44:49.723

决定你真正想要什么有点麻烦。
但是，如果它操纵 flashvar 中的值，这可能会有所帮助......

```
queryToObject = function(queryString) {
    var jsonObj = {};
    var e, a = /\+/g,
        r = /([^&=]+)=?([^&]*)/g,
        d = function(s) {
            return decodeURIComponent(s.replace(a, " "));
        };

    while(e = r.exec(queryString)) {
        jsonObj[d(e[1])] = d(e[2]);
    }

    return jsonObj;
}

objectToQuery = function(object) {
    var keys = Object.keys(object),
        key;
    var value, query = '';
    for(var i = 0; i < keys.length; i++) {
        key = keys[i];
        value = object[key];
        query += (query.length > 0 ? '&' : '') + key + '=' + encodeURIComponent(value);
    }
    return query;
}

// this is what a flashvar value looks like according to this page...http://www.mediacollege.com/adobe/flash/actionscript/flashvars.html
var testQuery = 'myvar1=value1&myvar2=value2&myvar3=a+space';

var testObject = queryToObject(testQuery);

console.debug(testObject);

testQuery = objectToQuery(testObject);

console.debug(testQuery);

testObject.myvar0 = 'bleh';

delete testObject.myvar2;

console.debug(objectToQuery(testObject)); 
```

如果您在内容脚本中使用 localStorage，请注意存储将保存在页面的上下文中。
尝试查看[chrome.storage](http://developer.chrome.com/extensions/storage.html)。

**编辑：回答评论**
`This looks correct, but how do I "reload" the object so that those new flashvars are the ones that are used by the swf?`

我从未使用过 swfObject（5 年来没有做过任何 flash 的东西），但看了看，看起来你可以`swfobject.embedSWF`用新的 flashVars 重新运行它，它会用新的对象替换旧的对象。如果您替换一个您自己添加的东西，因为您可以提供所有详细信息，这很好，如果您替换其他人放在那里的东西，您可以克隆对象，更改一些东西并用克隆替换原始对象。克隆不会克隆任何附加到元素的事件，但我认为在你的情况下这不是问题。这是一个示例（我无法测试，因为我找不到任何仅打印 flashvars 的简单示例 swf）....

```
var target = document.querySelector('#game_swf_con');
// Cloning the element will not clone any event listners attached to this element, but I dont think that's a prob for you
var clone = target.cloneNode(true);
var flashvarsAttribute = clone.querySelector('param[name=FlashVars]');
if (flashvarsAttribute) {
    var flashvars = flashvarsAttribute.value;
    flashvars = queryToObject(flashvars);
    // add a new value
    flashvars.newValue = "something";
    // update the clone with the new FlashVars
    flashvarsAttribute.value = objectToQuery(flashvars);
    // replace the original object with the clone
    target.parentNode.replaceChild(clone, target);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:49:27.860

*资料来源：*

a)[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)

b)[背景页面](https://developer.chrome.com/extensions/background_pages.html)

c)[消息传递](https://developer.chrome.com/extensions/messaging.html)

d)[标签](https://developer.chrome.com/extensions/tabs.html)

e)[浏览器动作](https://developer.chrome.com/extensions/browserAction.html)

f) [API() 的](https://developer.chrome.com/extensions/api_index.html)

假设一个包含以下代码的 html 页面

```
<embed src="uploadify.swf" quality="high" bgcolor="#ffffff" width="550"
height="400" name="myFlashMovie" FlashVars="myVariable=Hello%20World&mySecondVariable=Goodbye"
align="middle" allowScriptAccess="sameDomain" allowFullScreen="false" type="application/x-shockwave-flash"
pluginspage="http://www.adobe.com/go/getflash" /> 
```

我尝试获取嵌入对象的高度并更改它。

**示例演示**

***清单.json***

```
{
"name":"Flash Vars",
"description":"This demonstrates Flash Vars",
"manifest_version":2,
"version":"1",
"permissions":["<all_urls>"],
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["myscript.js"]
    }
       ]
} 
```

**myscript.js**

```
// Fetches Current Width
width = document.querySelector("embed[flashvars]:not([flashvars=''])").width;
console.log("Width is  " + width);

// Passing width to background.js
chrome.extension.sendMessage(width);

//Performing some trivial calcualtions
width = width + 10;

//Modifying parameters
document.querySelector("embed[flashvars]:not([flashvars=''])").width = width; 
```

**背景.js**

```
//Event Handler for catching messages from content script(s)
chrome.extension.onMessage.addListener(

function (message, sender, sendResponse) {
    console.log("Width recieved is " + message);
}); 
```

如果您需要更多信息，请与我们联系。

# javascript - jQuery 测验中的多个计时器

> ID：13684805
> 
> 赞同：2
> 
> 时间：2012-12-03T13:58:23.013
> 
> 标签：javascript, jquery, countdown, intervals, clearinterval

我正在做一个测验，您可以从四个答案可能性中选择一个答案（比如谁想成为百万富翁）。我想为每个问题添加一个 7 秒的计数器，如果计数器结束，应该会出现一个指向下一个问题的按钮。

我已经有了 jQuiz 的基本代码，但我现在的问题是，我总是使用相同的计数器实例。所以第一个问题的计时器很好，但是如果您回答下一个问题并且距离第一个问题还有一些时间，两个计数器会同时显示。我认为当我有多个计时器实例时，我的问题将得到解决，但我不知道该怎么做。

这是我的代码。抱歉结构不好，我是 jQuery 新手。

* * *

```
$('.btn, .nxt').click(function(){
    $(this).addClass("checked");
    next(this);
    var el = $('#progress');
    el.width(el.width() + 116 + 'px');
});

function next(elem){
    $(elem).parents('.questionContainer').fadeOut(300, function(){
        var interval = window.setInterval(function() {
            var counter = 0;
            clearInterval(interval);
        });
        var counter = 0;

        timer();
        $(elem).parents('.questionContainer').next().fadeIn(300); 
        $('.nxt').hide();
    });
};

function timer(){
    var counter = 7;
    var interval = window.setInterval(function() {
        counter--;
        $(".counter").html(counter);
        if (counter == 0) {
            $(".counter").html('');
            $('.nxt').show();
            clearInterval(interval); 
        }
    }, 1000);    
};​ 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:33:32.487

我是 Stackoverflow 的新手，在这个 textarea 中编辑代码对我来说太难了...将固定 JS 添加到[jsfiddle](http://jsfiddle.net/EMqMT/)。

尝试将您的 HTML 添加到同一个小提琴并测试 JS，希望它会起作用。

有一些关于结构（主要是缓存选择）的修复，并为您要求的计时器（带注释）添加了数组。

添加 HTML 时会更容易调试 :)

```
var quizObj = {
    quizTimers: [], //timers array
    $counter: $(".counter"),
    $buttons: $('.btn, .nxt'),
    $progress: $('#progress'),
    next: function(elem){
         $(elem).parents('.questionContainer').fadeOut(300, function(){ 
            //clears the FIRST timer id in the timers array and removes it from array
            clearInterval(quizObj.quizTimers.shift());

            quizObj.timer();
            $(elem).parents('.questionContainer').next().fadeIn(300);
            $('.nxt').hide();
        });   
    },
    timer: function() {
        var counter = 7;
        var interval = window.setInterval(function() {
            counter--;
            $(".counter").html(counter);
            if (counter == 0) {
                $(".counter").html('');
                $('.nxt').show();
                clearInterval(interval);
            }
        }, 1000);   

        quizObj.quizTimers.push(interval);
    }
}

quizObj.$buttons.click(function(){
    $(this).addClass("checked");
    quizObj.next(this);
    quizObj.$progress.width(quizObj.$progress.width() + 116 + 'px');
}); 
```

# android - 显示错误值的自定义 ListView 适配器 [Mono Android]

> ID：13684806
> 
> 赞同：1
> 
> 时间：2012-12-03T13:58:24.483
> 
> 标签：android, listview, android-listview, xamarin.android, adapter

您好 Stack Overflow Android 用户，

请帮助解决以下问题：

## 问题

我正在为列出鱼类种类的应用程序编写一个功能。我正在为适配器使用自定义 ListView 适配器类（我们称之为**FishSpeciesListAdapter**）。到目前为止，我已经记录了 27 种鱼类作为程序的默认值（您最终也可以自己添加一些）。问题是当我将适配器链接到实际的 listview xml 对象时，它似乎一直在迭代相同的 5-6 个物种。

问题必须出在自定义适配器中，因为我已经测试了记录的物种，并且在我传递给适配器的列表中所有物种都不同。

这是我设置适配器的代码：

```
this.n_fishSpeciesListView = FindViewById<ListView> (Resource.Id.xml_fishSpeciesListView);
this.n_fishSpeciesListView.Adapter = new FishSpeciesListAdapter (this, 
this.n_model.SpecieManager.Species); 
```

这是自定义 ListView 适配器代码：

```
public class FishSpeciesListAdapter : BaseAdapter
{
    Context n_context;
    List<AppCode.Specie> n_specieData;

    public FishSpeciesListAdapter (Context context, List<AppCode.Specie> specieData)
    {
        this.n_context = context;
        this.n_specieData = specieData;
    }

    public override int Count {
        get { return this.n_specieData.Count; }
    }

    public override Java.Lang.Object GetItem (int position)
    {
        return null;
    }

    public override long GetItemId (int position)
    {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public override View GetView (int position, View convertView, ViewGroup parent)
    {
        View v;
        if(convertView==null){

            LayoutInflater li = LayoutInflater.FromContext(parent.Context);
            v = li.Inflate(Resource.Layout.Adapter_FishSpeciesIcon, null);
            ImageView iconImage = (ImageView)v.FindViewById(Resource.Id.xml_adapter_fishSpeciesIconImage);
            TextView nameText = (TextView)v.FindViewById(Resource.Id.xml_adapter_fishSpeciesNameText);
            TextView scientificNameText = (TextView)v.FindViewById(Resource.Id.xml_adapter_fishSpeciesScientificNameText);

            nameText.Text = this.n_specieData[position].Name;
            scientificNameText.Text = this.n_specieData[position].ScientificName;

            if (this.n_specieData[position].RelatedMedia.AttachedPhotos.Count < 1)
            {
                iconImage.SetImageResource(Resource.Drawable.Icon); 
            }
            else
            {
                iconImage.SetImageBitmap(BitmapFactory.DecodeByteArray(this.n_specieData[position].RelatedMedia.AttachedPhotos[0], 0, this.n_specieData[position].RelatedMedia.AttachedPhotos[0].Length));  
            }   
        }
        else
        {
            v = convertView;
        }
        return v;
    }
} 
```

所以当我执行上面的代码时，这是我得到的截图：

![当这里应该有 27 个独特的物种时，项目会重复自己，当然这不是整个列表，而是您可以看到循环发生的示例！](../Images/bad04a3cc1ef44a47e7478761210ef45.png)

正如您所看到的，我确信在传递的 List 变量中记录了至少 27 种不同的物种。关于为什么会这样以及如何解决这个问题的任何帮助都会非常有帮助。

## 我的研究

我读过它可能会在适配器的 GetView 方法中重用“View currentView”变量。我在[这个链接](https://stackoverflow.com/questions/11780816/getview-showing-wrong-images-in-a-custom-adapter)中找到了这些信息。我只是不知道如何在我的情况下解决这个问题。代码示例将是很好或详细的指导。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:07:00.363

您需要在 convertView 已经存在时重用它，或者在它不存在时创建一个新视图。在所有情况下，您都必须为您的 textViews/imageViews 提供正确的属性：

```
public override View GetView (int position, View convertView, ViewGroup parent)
{
    if(convertView==null){

        LayoutInflater li = LayoutInflater.FromContext(parent.Context);
        convertView = li.Inflate(Resource.Layout.Adapter_FishSpeciesIcon, null);
    }
    ImageView iconImage = (ImageView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesIconImage);
    TextView nameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesNameText);
    TextView scientificNameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesScientificNameText);

    nameText.Text = this.n_specieData[position].Name;
    scientificNameText.Text = this.n_specieData[position].ScientificName;

    if (this.n_specieData[position].RelatedMedia.AttachedPhotos.Count < 1)
    {
        iconImage.SetImageResource(Resource.Drawable.Icon); 
    }
    else
    {
        iconImage.SetImageBitmap(BitmapFactory.DecodeByteArray(this.n_specieData[position].RelatedMedia.AttachedPhotos[0], 0, this.n_specieData[position].RelatedMedia.AttachedPhotos[0].Length));  
    }   
    }

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:12:21.047

据我所知，您使用的`convertView`对象是错误的。如果任何视图已被回收（例如列表项滚动出视图），则此对象可用。它是可用的，因此您不必再次从布局 xml 中膨胀（这是一个昂贵的过程）。

你应该做的是从你的布局 xml if 膨胀`convertView==null`。否则使用该`convertView`对象。

```
 if(convertView==null){

        LayoutInflater li = LayoutInflater.FromContext(parent.Context);
        v = li.Inflate(Resource.Layout.Adapter_FishSpeciesIcon, null);
}
else{
     v=convertView;
} 
```

然后使用 v 设置所有值并返回视图。

```
 ImageView iconImage = (ImageView)v.FindViewById(Resource.Id.xml_adapter_fishSpeciesIconImage);
        TextView nameText = (TextView)v.FindViewById(Resource.Id.xml_adapter_fishSpeciesNameText);
        TextView scientificNameText = (TextView)v.FindViewById(Resource.Id.xml_adapter_fishSpeciesScientificNameText);

 nameText.Text = this.n_specieData[position].Name;
 scientificNameText.Text = this.n_specieData[position].ScientificName;

 if (this.n_specieData[position].RelatedMedia.AttachedPhotos.Count < 1)
 {
       iconImage.SetImageResource(Resource.Drawable.Icon); 
 }
 else
 {
       iconImage.SetImageBitmap(BitmapFactory.DecodeByteArray(this.n_specieData[position].RelatedMedia.AttachedPhotos[0], 0, this.n_specieData[position].RelatedMedia.AttachedPhotos[0].Length));  
 }   
 return v; 
```

# javascript - 按名称在 js 对象中查找属性

> ID：13684810
> 
> 赞同：1
> 
> 时间：2012-12-03T13:58:39.003
> 
> 标签：javascript

我有很多结构不同的对象。但我知道他们都有属性名称“siteName”。我的问题是如何从这个属性中获得价值。几个对象的解释：

```
feature1 = {
    display: "name",
    feature: {
        attributes: {
            when: '111',
            what: '222'
        },
        geometry: null
        infoTemplate: undefined
    },
    symbol: null
    siteName: 'aa'
}

feature2 = {
    feature: {
        attributes: {
            when: '111',
            what: '222'
        },
        geometry: null
        infoTemplate: undefined
    },
    static: {
        format: {
            weight: 12,
            siteName: 'cccc'
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:08:30.073

这是一个适合您的递归函数。

它返回找到的具有名称的第一个属性的值，否则返回`undefined`。

```
function findByName(obj, prop) {
    for (var p in obj) {
        if (p === prop) {
            return obj[p];
        } else if (obj[p] && typeof obj[p] === "object") {
            var result = findByName(obj[p], prop);
            if (result !== undefined)
                return result;
        }
    }
}

var result = findByName(myObject, "siteName"); 
```

* * *

或者这是另一个避免继承属性的变体。

```
function findByName(obj, prop) {
    if (obj.hasOwnProperty(prop))
        return obj[prop];

    for (var p in obj) {
        if (obj[p] && typeof obj[p] === "object") {
            var result = findByName(obj[p], prop);
            if (result !== undefined)
                return result;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:08:22.320

递归循环遍历对象：

```
function find(obj, name) {
    for (var k in obj) { // Loop through all properties of the object.
        if(k == name){ // If the property is the one you're looking for.
            return obj[k]; // Return it.
        }else if (typeof obj[k] == "object"){ // Else, if the object at [key] is a object,
            var t = find(obj[k], name); // Loop through it.
            if(t){ // If the recursive function did return something.
                return t; // Return it to the higher recursion iteration, or to the first function call.
            }
        }               
    }
} 
```

用法：

```
find(feature1, "siteName"); //Returns "aa" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:15:43.670

以下功能应满足您的需求：

```
function getFirstFoundPropertyValue(searchedKey, object) {
    if(typeof object === "object") {
        for (var key in object) {
            var currentValue = object[key];
            if(key === searchedKey) {
                return currentValue;
            }
            var nested = getFirstFoundPropertyValue(searchedKey, currentValue);
            if(typeof nested !== "undefined") {
                return nested;
            }
        }
    }
} 
```

如果找到键，则返回键的值，`undefined`否则返回。如果键出现多次，将返回第一个找到的键。

# c# - 使用惰性引用的循环队列使用 MVVM 撤消/重做

> ID：13684818
> 
> 赞同：0
> 
> 时间：2012-12-03T13:59:17.160
> 
> 标签：c#, design-patterns, stack, undo-redo

我正在使用 MVVM 和 WPF 4.5 Ribbon 来激活视图。每个激活命令如下所示：

```
public void ActivateSearchDocuments()
{
    DisplayName = "Seach Documents - App";
    ActivateItem(IoC.Get<SearchViewModel>());
} 
```

我知道我可以使用循环队列实现撤消/重做模式。我的疑问是：是否可以在该队列上存储惰性引用。我的意思是，我怎样才能将该命令存储在队列中以便稍后调用它。

我不认为代表是适当的方式。有没有更干净的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:41:44.277

命令设计模式可以使您能够撤消/重做 [http://www.dofactory.com/Patterns/PatternCommand.aspx#_self2](http://www.dofactory.com/Patterns/PatternCommand.aspx#_self2)

# visual-c++ - 为什么我的程序找不到 VC++ Runtime？

> ID：13684822
> 
> 赞同：0
> 
> 时间：2012-12-03T13:59:30.593
> 
> 标签：visual-c++, deployment, windows-installer, merge-module

我正在尝试将[Unison](http://www.cis.upenn.edu/~bcpierce/unison/)（不是我的程序）打包成一个易于使用的安装程序。**[Tl;博士：截图。](http://i.imgur.com/dZwty.jpg)**

1.  当我在测试机器上安装并运行它时，它说这个应用程序无法启动，因为应用程序配置不正确。重新安装应用程序可能会解决问题。
2.  事件日志显示它找不到依赖程序集 Microsoft.VC90.CRT。
3.  搜索显示“丢失”的 dll 实际上位于 C:\Windows\WinSxS

那么有什么问题呢？

# android - 如何设置本地录像机的持续时间？

> ID：13684828
> 
> 赞同：3
> 
> 时间：2012-12-03T13:59:50.923
> 
> 标签：android, video-recording

我想将视频录制到我的应用程序的持续时间限制为最多 10 秒。为此，我正在做以下事情：

```
 Intent takePictureIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
            takePictureIntent.putExtra("android.provider.MediaStore.EXTRA_DURATION_LIMIT", 10000);
            startActivityForResult(takePictureIntent, MyScreen.ACTION_TAKE_VIDEO); 
```

但是视频录制不会在 10 秒内停止，它会持续运行.. 那么是否可以设置原生 Cemara 的视频持续时间？

提前致谢：Rgards，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:10:57.550

`""`从中删除`"android.provider.MediaStore.EXTRA_DURATION_LIMIT"`。您正在发送此字符串*名称值*，而您应该发送*常量的值*，即`"android.intent.extra.durationLimit"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T20:36:38.640

我也有这个问题。额外的`MediaStore.EXTRA_DURATION_LIMIT`需要很长时间，而不是int。所以如果你把它`10000`放在一个很长的地方，然后把它传递进去，它就会起作用。

# javascript - 并行运行第三方 javascript-tags 的简单解决方案？（“异步”）？

> ID：13684829
> 
> 赞同：0
> 
> 时间：2012-12-03T13:59:54.753
> 
> 标签：javascript, unobtrusive-javascript

是否有任何简单的解决方案可以并行运行第三方 javascript-tags？

*只是一个 html 页面上的几个脚本，它不会一个接一个地加载/我知道对于广告它使用像 doubleclick 这样的广告服务器工作，但这不是必需的，它不仅是广告，有些需要保持能够分析 html 内容用户代理、IP、引荐来源网址或更多*

示例， *您可能非常了解*：

1.

```
<script src="http://another-ad-service.com/get-js.aspx?&cwadformat=728*90"</script> 
```

2.

```
<script language="JavaScript" type="text/javascript">
var 1a_account   = '12345';
var 1a_zonesize  = '12345-5';
var 1a_adtype    = 'js';
</script>
<script type="text/javascript" src="http://agency1a.somewhere/12345.js"></script> 
```

3.

```
<script type='text/javascript'>
<!--//<![CDATA[
   document.MAX_ct0 ='';
   var m3_u = (location.protocol=='https:'?'https://an-advertisment-agency.honolulu...'
   var m3_r = Math.floor(Math.random()*99999999999);
   document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
   document.write ("zoneid=12345");document.write("&amp;nodis=1");
   document.write ('&amp;cb=' + m3_r);
   if (document.MAX_used != ',') document.write ("&amp;exclude=" + document.MAX_used);
   document.write (document.charset ? '&amp;charset='+document.charset : 
   (document.characterSet ? '&amp;charset='+document.characterSet : ''));
   document.write ("&amp;loc=" + escape(window.location));
   if (document.referrer) document.write ("&amp;referer=" + escape(document.referrer));
   if (document.context) document.write ("&context=" + escape(document.context));
   if ((typeof(document.MAX_ct0) != 'undefined') && 
   (document.MAX_ct0.substring(0,4) == 'http')) {
       document.write ("&amp;ct0=" + escape(document.MAX_ct0));
   }
   if (document.mmm_fo) document.write ("&amp;mmm_fo=1");
   document.write ("'></scr"+"ipt>");
//]]>--></script> 
```

4.

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12345-2']);
  _gaq.push(['_setDomainName', 'website.edu']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ?
    'https://ssl' : 'http://www') + '.gooooogle-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script type="text/javascript"> window.google_analytics_uacct = "UA-12345-2"; </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:12:27.610

加载外部 JavaScript 文件时，您可以将`async`属性添加到脚本标签。

`<script src="http://another-ad-service.com/get-js.aspx?&cwadformat=728*90" async></script>`

不过，该脚本需要是自给自足的，并且不依赖于您在该脚本之前加载的其他代码。

# c# - 如何在 WPF 应用程序中使用 IME Pad

> ID：13684831
> 
> 赞同：1
> 
> 时间：2012-12-03T14:00:00.540
> 
> 标签：c#, wpf, unicode, ime

我正在尝试开发一个显示 Microsoft Input Method Editor Pad 的 C# WPF 应用程序，以便能够直接输入单个 Unicode 字符，而无需使用键盘（可以嵌入我的 IME Pad 的剥离版本然而，WPF 应用程序将是理想的 - 如果我能够以某种方式实现这一点）。不幸的是，我仍然是一名学生，并且对 C# 编程比较陌生。看来我什至无法以编程方式启动 Pad。一个简单的

`System.Diagnostics.Process.Start(@"C:\Windows\System32\IME\shared\IMEPADSV.EXE");`

似乎不起作用（但也不会引发错误）。

到目前为止，我发现的文档描述了 C++ 接口 IIMEPad、IIMEPadApplet、IMEActiveDict 和 IImeSpecifyApplets。

例如。

*   [http://blog.yezhucn.com/dnime/imepadif.htm](http://blog.yezhucn.com/dnime/imepadif.htm)
*   [http://msdn.microsoft.com/en-us/library/office/ee828915%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/ee828915%28v=office.12%29.aspx)

也许有人可以向我展示如何以编程方式启动 Pad 的示例，或者如何在 C# 中访问 C++ 接口以使用甚至修改 Pad。

感谢您的时间 ：）

山姆

# android - 几个Textviews下的按钮

> ID：13684832
> 
> 赞同：1
> 
> 时间：2012-12-03T14:00:04.260
> 
> 标签：android, android-layout, textview, android-button

我正在做的事情与教程[http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive](http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive)非常相似。

我现在想在底部放一个按钮。然后单击按钮并对选定的值执行某些操作。

我知道，我需要一些新的布局，因为将按钮添加到现有布局只会为每个 textview 添加一个按钮。但我不知道该怎么做。

一些帮助会非常好。提前致谢。:)

编辑：这是我目前的布局。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="30px" >
    </TextView>

    <CheckBox
        android:id="@+id/check"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="4px"
        android:layout_marginRight="10px" >
    </CheckBox>

</RelativeLayout> 
```

这会创建如下所示的内容：http: [//i.stack.imgur.com/cN8Dl.png](http://i.stack.imgur.com/cN8Dl.png)

我的适配器如下所示：

```
public class AttributeAdapter extends ArrayAdapter<Attribute> {

    private final List<Attribute> list;
    private final Activity context;

    public AttributeAdapter(Activity context, List<Attribute> list) {
        super(context, R.layout.activity_select_attributes, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.activity_select_attributes, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.label);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
            viewHolder.checkbox
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Attribute element = (Attribute) viewHolder.checkbox
                                    .getTag();
                            element.setSelected(buttonView.isChecked());

                        }
                    });
            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName() + "  " + list.get(position).getType());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    } 
```

现在我想要一个底部的按钮来继续选择的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:24:38.540

创建一个名为的新布局或 xml 文件`activity_base`并添加以下内容：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".BaseActivity" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button1"
         >

    </ListView>

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

</RelativeLayout> 
```

在你`ListActivity`的`Oncreate`add`setContentView(R.layout.activity_base);` 这应该做的工作。

# php - php 日期时间错误？

> ID：13684834
> 
> 赞同：2
> 
> 时间：2012-12-03T14:00:07.090
> 
> 标签：php, date, datetime

我遇到了 php 的 DateTime 函数的问题。今天是 12 月 3 日星期一。

假设以下代码：

```
$dte = new DateTime(date('Y-m-d H:i:s'));
var_dump($dte->format('Y-W'));
$dte->modify('+4 weeks');
var_dump($dte->format('Y-m-d H:i:s -- Y_W'));
$dte->modify('+1 days');
var_dump($dte->format('Y-m-d H:i:s -- Y_W')); 
```

四个星期后，将是 12 月 31 日。我怀疑会得到一年中的最后一周（52？）。但我得到的是 2012 年的第 1 周，正如您在以下输出中看到的那样。

```
string '2012-49' (length=7)
string '2012-12-31 14:48:00 -- 2012_01' (length=30)
string '2013-01-01 14:48:00 -- 2013_01' (length=30) 
```

所以我的问题是，在第一次修改后，我认为我应该得到：

```
2012-12-31 14:48:00 -- 2012_52 
```

但相反我得到

```
2012-12-31 14:48:00 -- 2012_01 
```

那么为什么一周回到 01 而不增加年份，为什么另一行给我 2013_01 ？

编辑:: 我现在看到前一周是第 52 周，与闰年有什么关系？但是话又说回来，周怎么能回到01而不增加年份呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:05:49.160

> 那么为什么一周回到 01 而不增加年份，为什么另一行给我 2013_01 ？

我认为您显示的是“年”而不是“周年”。当您使用周数时，相关部分是周年；简单的“年”仅与月和日相关。

编辑：我*认为*你想要`o`格式说明符，所以试试：

```
var_dump($dte->format('Y-m-d H:i:s -- o_W')); 
```

这应该显示`2013_01`2012 年 12 月 31 日，因为它是在 2013 年的第 1 周。

所以基本上，我不认为这是一个错误`DateTime`——这只是对“一年中的一周”的使用方式的误解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:07:36.983

这似乎没有错误。根据[文档](http://php.net/manual/en/function.date.php) `W`将返回*ISO-8601 年份的周数，从星期一开始的周数（在 PHP 4.1.0 中添加）*，因为`Mon, 31 Dec 2012 15:04:46 +0100`是星期一，它将`1`代替`52`.

有关[Wikipedia](http://en.wikipedia.org/wiki/ISO_8601)和[这个不错的站点](http://www.staff.science.uu.nl/~gent0113/calendar/isocalendar.htm)的更多信息。

# html - Css 和/或 html 难度

> ID：13684837
> 
> 赞同：-3
> 
> 时间：2012-12-03T14:00:16.593
> 
> 标签：html, css, width

我刚刚在我的网上商店安装了一个插件，css 变得有点奇怪..

如果你看：解决了

面包屑不是全宽的，就像在：已解决

我的代码或 CSS 中缺少什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:03:28.627

您已将带有类面包屑的 div 放入带有类内容的 div 中。它应该去外面。您应该比较了两个生成的 html 并查看差异（在相关位置）。这是你自己找到它的一个很好的步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:03:31.107

`<div id='content'>`有它`padding-left`并`padding-right`设置为40px。

你应该搬出`<div class="breadcrumb">`去`content`，让它成为一个孩子的`<div id="container">`。

但首先，你应该安装[firebug](http://getfirebug.com/)并学会自己解决这些问题。这很简单。

# php - 使用电子邮件解析器从电子邮件地址获取

> ID：13684844
> 
> 赞同：0
> 
> 时间：2012-12-03T14:00:47.450
> 
> 标签：php

我正在使用这段绝对令人惊叹的代码：[https ://github.com/plancake/official-library-php-email-parser/blob/master/PlancakeEmailParser.php](https://github.com/plancake/official-library-php-email-parser/blob/master/PlancakeEmailParser.php)

但它缺少的一件事是获取 From 电子邮件地址的能力。

我简单地添加了：

```
public function getFromEmail()
{
    if (!isset($this->rawFields['from']))
    {
        return false;
    }

    return $this->rawFields['from'];
} 
```

但是我如何在它返回时只获得电子邮件地址部分：`John Smith<john@gmail.com>`？

如果发件人地址只有，我还需要这个工作`john@gmail.com`吗？

感谢答案，这是完成的代码：

```
public function getFromEmail()
{
    $email = trim($this->rawFields['from']);

    if(substr($email, -1) == '>'){
        $fromarr = explode("<",$email);
        $mailarr1 = explode(">",$fromarr[1]);
        $email = $mailarr1[0];
    }

    return $email;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:09:54.987

这是一个非常简单的正则表达式：

```
$output = array();
preg_match("/.*<(.*?)>.*?/", $this->rawFields['from'], $output);
$email_address = $output[1]; 
```

但请注意：如果某人的姓名包含 < 或 >，则可能会导致安全漏洞。惰性运算符 (*.?) 用于确保使用最后一组 < >。

高温高压

PS：使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)测试正则表达式！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:05:23.960

```
$mailid='John Smith<john@gmail.com>';
$mailarr=explode("<",$mailid);
$mailarr1=explode(">",$mailarr[1]);
$just_emailid=$mailarr1[0]; 
```

# inno-setup - 如何从外部文件夹中引用文件，使其仍包含在安装程序包中？

> ID：13684853
> 
> 赞同：2
> 
> 时间：2012-12-03T14:01:13.537
> 
> 标签：inno-setup

这是我正在尝试做的事情：

`Source: {%QTDIR}/bin/QtCore4.dll; DestDir: {app}; Flags: ignoreversion;`

它不会展开 QTDIR 环境变量并给我一个错误。如果我添加`external`标志，它可以编译并正常工作，但我确实需要将该文件编译到安装程序包中。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:30:01.543

也许你可以使用`ISPP #define`？

例子：

```
#define MYCONSTANT GetEnv("USERPROFILE")

[Files]
Source: "{#MYCONSTANT}\myfile.txt"; DestDir: {app}; Flags: ignoreversion 
```

我以`UserProfile`此处链接为例，但是如果将 QTDIR 设置为 system constant ，则可以在此处定义它`%QTDIR%`。大概：

```
#define QTDIRCONSTANT GetEnv("QTDIR")

[Files]
Source: "{#QTDIRCONSTANT}\bin\QtCore4.dll"; DestDir: {app}; Flags: ignoreversion 
```

# c# - MVC 3 Razor 模型未更新：“模型”不包含“属性名称”的定义

> ID：13684856
> 
> 赞同：2
> 
> 时间：2012-12-03T14:01:25.410
> 
> 标签：c#, asp.net-mvc-3, razor, model

非常简单的 MVC 应用程序，一个模型，一个松散类型 `List<Model>`的视图和控制器通过`ViewBag`.

在我更新模型之前一切正常。现在我得到“模型”不包含“属性名称”的定义，尝试重建应用程序并清理临时文件夹。

我需要清理什么才能正确重新编译？

**~Edit**：无法找到的属性已添加到未删除的模型中。我正在尝试在视图中使用这个新属性。

**~编辑**：型号：

```
public class App
{
    public String title { get; set; }
    public String featured { get; set; }
    public String subtitle { get; set; }
    public String thumb { get; set; }
    public String logo { get; set; }
    public String web { get; set; }
    public String email { get; set; }
    public String phone { get; set; }
    public String download { get; set; }
    public String body { get; set; }
    public List<String> tags { get; set; }
    public List<String> features { get; set; }
    public List<Highlight> highlights { get; set; }
} 
```

控制器：

```
ViewBag.apps = (from xml in XmlResources.Root.Descendants("app")
                        select new App
                        {
                            title = xml.Element("title").Value,
                            featured = xml.Attribute("featured").Value,
                            subtitle = xml.Element("subtile").Value,
                            thumb = xml.Element("thumb").Value,
                            logo = xml.Element("logo").Value,
                            web = xml.Element("web").Value,
                            email = xml.Element("email").Value,
                            phone = xml.Element("phone").Value,
                            download = xml.Element("download").Value,
                            body = xml.Element("body").Value,
                            tags = (from x in xml.Descendants("tag") select x.Value).ToList(),
                            features = (from x in xml.Descendants("feature") select x.Value).ToList(),
                            highlights = (from x in xml.Descendants("highlight") select new Highlight { type = x.Attribute("type").Value, src = x.Attribute("src").Value }).ToList()
                        }).ToList(); 
```

看法：

```
@using eduApps.Models;
 @for (var i = 0; i < ViewBag.apps.Count; i++)
 {
  @{ if(!String.IsNullOrEmpty(ViewBag.apps[i].web))
                   {
                        <span>Web:</span><a href="@ViewBag.apps[i].web" title="@ViewBag.apps[i].title">@ViewBag.apps[i].web</a>
                    }
  }
} 
```

错误：“eduApps.Models.App”不包含“web”的定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:13:34.023

在使用它时尝试转换为您的类`(ViewBag.apps[i] as eduApps.Models.App)`，因为这里没有强类型，MVC 会将您`ViewBag.apps[i]`简单地视为一个`object`，而不是一个`App`确实不包含您定义的任何属性的类：

```
@{ 
    if(!String.IsNullOrEmpty((ViewBag.apps[i] as App).web))
    {
        <span>Web:</span><a href="@(ViewBag.apps[i] as App).web" title="@(ViewBag.apps[i] as App).title">@(ViewBag.apps[i] as App).web</a>
    }
} 
```

我不知道你的`App`类定义在哪里，所以你必须`Namespace.`用适当的名称空间替换，或者`using`在视图顶部的名称空间中添加一个指令。

**编辑**- 抱歉刚刚注意到您已经`using`在`eduApps.Models`. 我已经修改了我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:42:31.443

我不明白为什么你使用 ViewBag 而不是 Model。

您的 ControllerMethod 应如下所示：

```
public ActionResult Foo(){

   IList<App> model = 
   (from xml in XmlResources.Root.Descendants("app")
                    select new App
                    {
                        title = xml.Element("title").Value,
                        featured = xml.Attribute("featured").Value,
                        subtitle = xml.Element("subtile").Value,
                        thumb = xml.Element("thumb").Value,
                        logo = xml.Element("logo").Value,
                        web = xml.Element("web").Value,
                        email = xml.Element("email").Value,
                        phone = xml.Element("phone").Value,
                        download = xml.Element("download").Value,
                        body = xml.Element("body").Value,
                        tags = (from x in xml.Descendants("tag") select x.Value).ToList(),
                        features = (from x in xml.Descendants("feature") select x.Value).ToList(),
                        highlights = (from x in xml.Descendants("highlight") select new Highlight { type = x.Attribute("type").Value, src = x.Attribute("src").Value }).ToList()
                    }).ToList();

   return View(model);
} 
```

您的视图应该执行以下操作；

```
 @model IList<App>
 @foreach(App app in Model){
     @{ if(!String.IsNullOrEmpty(app.web))
        {
           <span>Web:</span><a href="@app.web" title="@app.title">@app.web</a>
        }
     }
 } 
```

Hth 托比

# regex - 使用 cygwin 从所有 web.config 文件中 Grep 密码

> ID：13684857
> 
> 赞同：1
> 
> 时间：2012-12-03T14:01:28.703
> 
> 标签：regex, bash, unix, web-config, grep

我有一堆 web.config 文件，每个文件都可能包含一个到数据库的连接字符串，如下所示：-

```
<add name="MyConnectionString" connectionString="Data Source=myserver;Initial Catalog=mydb;Persist Security Info=False;User ID=myuser;Password=secret" providerName="System.Data.SqlClient" /> 
```

我想要做的是 grep`User ID=myuser;Password=secret`部分如果存在的话。

我不能假设密码是连接字符串中的最后一个属性，它后面可能还有其他属性。所以基本上密码总是以`"`or结尾`;`。

使用 cygwin 我可以像这样搜索文件：-

```
find /cygdrive/c/inetpub/wwwroot/ -iname 'web.config' -printf '%p\0' | xargs -0 grep -i "password=" 
```

我将如何改进 grep 部分以仅检索用户名和密码而不是整行？

然后我可以通过管道将其输入`sort -u`以获取正在使用的用户名和密码的唯一列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:10:42.710

您可以使用`grep`with`-P`标志来使用 Perl 的正则表达式引擎，并使用`-o`标志仅返回输入的匹配部分：

```
grep -Po '(User ID|Password)=[^;"]*' web.config 
```

考虑到您的示例输入，这将返回以下内容：

```
User ID=myuser
Password=secret 
```

给你现有的命令，它会是这样的：

```
find /cygdrive/c/inetpub/wwwroot/ -iname 'web.config' -printf '%p\0' | xargs -0 grep -Poi '(User ID|Password)=[^;"]*' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:07:27.610

使用 grep 和 cut 你可以这样做来提取密码：

```
grep -o 'Password=[^;"]*' web.config | cut -d= -f2 
```

# facebook-graph-api - 目标用户尚未授权此操作 facebook graph api

> ID：13684860
> 
> 赞同：1
> 
> 时间：2012-12-03T14:01:37.663
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

我正在尝试代表应用程序在用户墙上发帖。

这就是我正在做的事情。

首先，我从 facebook connect 获取用户 access_token，然后`extended access token`使用以下调用接收

```
https://graph.facebook.com/oauth/access_token?             
  client_id=APP_ID&
  client_secret=APP_SECRET&
  grant_type=fb_exchange_token&
  fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

现在，当我尝试使用以下代码在朋友墙上发帖时。

```
 var params = {};
        params['message'] = 'Check out this new gag I\'ve posted about you surely it will piss you off :p';
        params['name'] = 'Gagsterz';
        params['description'] = 'If you also want to have fun on gagster join in now.';
        params['link'] = 'http://localhost/php/backup/View/Profile.php';
        params['picture'] = thumbpath;
        params['caption'] = 'Caption';

        FB.api('/'+victimid+'/feed?access_token="ACCESS_TOKEN", 'post', params, function(response) {
          if (!response || response.error) {
             var json = $.parseJSON(response.error);
             alert(json.code);
        alert(JSON.stringify(response.error));
          } else {
            alert('Published to stream - you might want to delete it now!');
          }
        }); 
```

它给出了以下错误。

```
 the target user has not authorized this action facebook graph api
 with code 200. 
```

我获得了publish_stream权限，我通过恢复权限然后登录再次授予权限来测试它，登录窗口要求获得`post on behalf`权限。但是我在第一次检索访问令牌时获得了权限. 我是否必须再次获得扩展访问令牌的许可？如果是，那么该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:07:18.547

检查您的权限，您是否有权在墙上发帖。默认情况下，您将只有读取权限。

检查这个[http://developers.facebook.com/docs/reference/rest/stream.publish/](http://developers.facebook.com/docs/reference/rest/stream.publish/)

# c# - 存储 DataGridView 初始值以提供重置功能的最佳方式？

> ID：13684872
> 
> 赞同：0
> 
> 时间：2012-12-03T14:02:30.590
> 
> 标签：c#, .net, data-binding, datagridview

我有一个 DataGridView 呈现给用户，其中填充了单元格中的值。然后我允许用户根据需要编辑这些值。提供了一个重置​​按钮，如果他们想要将单元格恢复为其初始值，则可以单击该按钮。是否有关于如何实施的“最佳实践”？也许是一个明显的方法？目前我采用的方法是拥有一个二级数​​据结构（数组/字典），它保存这些值，以便可以在网格中检索和重新填充它们。对我来说似乎特别可怕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:19:34.583

正如 Dev 在评论中指出的那样，当用作数据源时，DataSets 和 DataTables 似乎可以提供此类功能。RejectChanges 方法可用于回滚数据的值。这很适合我的需要。

# actionscript-3 - 进度事件未在线触发

> ID：13684874
> 
> 赞同：0
> 
> 时间：2012-12-03T14:02:32.560
> 
> 标签：actionscript-3, flash

我正在制作 Flash Photogallery，但我的预加载器有问题。我的画廊离线工作正常（在模拟下载中），但问题是当它在线时加载百分比不会显示。到目前为止，我发现当画廊加载全尺寸图像时 ProgressEvent 没有触发。有时它会 100% 触发，有时它会按时触发，但通常不会触发。这是我的画廊的链接和一些代码：solarratko.netii.net

```
public function kreni(f:String) //function that start when user click on thumbnail
    {
        URLrequest=new URLRequest(f); //URLrequest for image in full size
        dspLoader.load(URLrequest); //loading the image

        preloader.visible = true;//prelaoder that shows up is visible
        h.visible=true;//text area for percentage is visible
        dspLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progres);//adding progress event
        dspLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, kraj);//adding complete event

    }
    public function progres(e:Event):void
    {
        var perc:Number = e.target.bytesLoaded / e.target.bytesTotal;//calculatin percentage
        h.text = Math.ceil(perc*100).toString();//displaying percentage wich is not working online or it start too late

    }
    public function kraj(e:Event):void
    {
        h.text="";
        preloader.visible = false;
        h.visible=false;
    } 
```

# ruby-on-rails-3 - Rails 3 中的外部 API 请求数据存储

> ID：13684884
> 
> 赞同：0
> 
> 时间：2012-12-03T14:03:05.797
> 
> 标签：ruby-on-rails-3, api, session

我有一个带有 API 的 Rails 3 应用程序到提供一些数据的中央应用程序。

我已将 API 实现放入`lib/`文件夹，发现无法直接访问会话方法。所以问题 - 我如何从图书馆访问会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:35:49.130

我认为从 lib 或模型访问会话不是一个好主意。会话信息只能直接从控制器使用；

如果您需要在模型或库中使用会话信息，最好在控制器中处理会话信息并将其作为参数传递。

背后有几个原因（主要是 OOD），但检测问题的提示可能是测试对象需要创建会话对象，这在 TDD 中不是一个好的做法。

# haskell - 当我在 Haskell 中运行测试时，我的输出显示为 _

> ID：13684885
> 
> 赞同：0
> 
> 时间：2012-12-03T14:03:13.927
> 
> 标签：haskell

好的，所以我设置了多个测试用例，然后最后将它们组合在一起。 **忘记放一些代码，所以我添加了它**

问题是，例如，当我输入**Main>tests 1** 时，会显示正确答案，但是如果我尝试单独运行测试用例，例如**main>test0** ，我的输出将变为“TestCase _”

或**main>Alltests**我的输出是“ TestList [TestLabel test1 TestCase _,TestLabel test0 TestCase _,TestLabel test7 TestCase _,TestLabel est51 TestCase _]”

我的问题是是什么导致了 _ 以及为什么它不能识别测试用例

```
assertException :: (Exception e, Eq e) => e -> IO a -> IO ()
assertException ex action =
      handleJust isWanted (const $ return ()) $ do
            action
            assertFailure $ "Expected exception: " ++ show ex
     where isWanted = guard . (== ex) 

assertError ex f = 
      assertException (ErrorCall ex) $ evaluate f

tests :: Integer -> [Integer]

tests n | n == 0              = error "Not positive"
        | n == 1              = [1]
        | (n `div` 2 == 0)    = n:tests(n*2)
        | otherwise           = n:tests(3*n) 

test0 = 
      TestCase ( assertError
                    "tests 0" 
                     ( tests 0 )
               )

test7 = 
      TestCase ( assertEqual
                    "tests 7" 
                [7,18,9]
                     ( tests 7 )
                )

test51 = 
      TestCase ( assertEqual
                    [9,8,9]
                    "tests 51"

                  ( tests 51 )
               )

alltests = 
     TestList [
             -- TestLabel "test1" test1
               TestLabel "test0" test0
             , TestLabel "test7" test7
             , TestLabel "test51"test51
             ] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T14:39:24.590

当您在提示符处键入`test0`或`allTests`（注意：不能以大写字母开头，因为它不是构造函数）时，您实际上并没有运行测试。`test0`也是一个类型的[`Test`](http://hackage.haskell.org/packages/archive/HUnit/1.2.5.1/doc/html/Test-HUnit-Base.html#t%3aTest)值`allTests`。因此，当您在 ghci 提示符下键入其中任何一个时，该值将转换为`String`via `show`，`String`然后将其打印出来。

for的`Show`实例[`Test`](http://hackage.haskell.org/packages/archive/HUnit/1.2.5.1/doc/html/Test-HUnit-Base.html#t%3aTest)无法将包含[`Assertion`](http://hackage.haskell.org/packages/archive/HUnit/1.2.5.1/doc/html/Test-HUnit-Base.html#t%3aAssertion)的 s 转换为有意义的`String`，因为 an`Assertion`是`IO`-action。因此，它通常在此处显示一个下划线以指示“这是一个断言”。

```
tests 1 
```

另一方面是 type 的表达式`tests 1 :: Integral a => [a]`，当您在提示符下键入这样的表达式时，它也被转换为`String`via （在默认为`show`修复类型变量之后），但这里的实例需要完全评估列表.`a``Integer``Show`

要实际运行您的测试，您需要[`runTestTT`](http://hackage.haskell.org/packages/archive/HUnit/1.2.5.1/doc/html/Test-HUnit-Text.html#v%3arunTestTT)或[`performTest`](http://hackage.haskell.org/packages/archive/HUnit/1.2.5.1/doc/html/Test-HUnit-Base.html#v%3aperformTest)（或来自 HUnit 的其他测试运行器之一）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:39:12.950

首先我不得不说你的代码是一团糟。你确实写过复制破坏了你的格式，但是，如果你真的想要一个写得很好的解决你的问题的方法，最好也写一个写得好的问题。然而，实际运行您的代码需要进行一些更改。

例如：在您的定义中`test0`，您使用了一个`assertError`不存在的名为的函数，所以我假设您的意思`assertEqual`是在您的其他测试用例中。您的测试用例的另一个问题是函数的*使用*`assertEqual :: (Eq a, Show a) => String -> a -> a -> Assertion`：它需要三个参数，但在您的定义中它只有两个。后两个参数代表预期值和实际值，我猜，您忘记了实际值。所以我不知道，你想测试什么。

编辑：但我猜你的函数和相应测试的问题是，你的函数构造了一个无限列表（除了`0`或`1`作为输入值之外`n`），所以你的函数不会像测试用例一样终止。（我首先以为这也是输出神秘的原因，但这似乎是错误的。）

# php - 从 cms 页面 magento 将产品添加到购物车

> ID：13684888
> 
> 赞同：0
> 
> 时间：2012-12-03T14:03:23.790
> 
> 标签：php, magento

我有一个相对较小的问题，但我找不到解决方案。

我有一个静态 CMS 页面，它显示了我的 Magento 商店中某个类别的产品列表。

我想包括一个添加到购物车按钮和一个数量框，以便用户可以将每个产品添加到他们的购物车中。

问题是我已经包含了“添加到购物车”按钮，但是单击它时不会将产品添加到购物车中。我已经读到我需要将产品 ID 包含到字符串中，但我使用 foreach 循环动态显示一个类别中的多个产品......

我的问题有解决方法或解决方案吗？任何想法都会受到欢迎。

这是代码：

```
 <?php 
$category_id = "49"; // category_id for "Accessories"
$_productCollection = Mage::getResourceModel('catalog/product_collection')
->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description'), 'inner')
->addCategoryFilter(Mage::getModel('catalog/category')->load($category_id));
?>
<?php if($_productCollection->count()): ?>
  <ul class="media-list pull-left">
   <?php 
   $products = array();
   foreach ($_productCollection as $_product) { 
    ?>
    <li class="media">
      <a class="fancybox pull-left" href="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(220, 200); ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>">
        <img class="media-object"  src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(100, 100); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
      </a>
    </li>
    <div class="media-body">
      <h4 class="media-heading"><a class="view-item-button" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->__('Order'); ?> <?php echo $this->htmlEscape($_product->getName())?><?php echo $this->__('&#8482;'); ?></a></h4>
      <div class="media">
       <?php echo $_product->_data['short_description']; ?>
       <div class="clearfix"></div>
       <h6>Price <?php echo Mage::helper('core')->currency($_product->getPrice());; ?></h6>
       <?php if($_product->isSaleable()): ?>
       <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger btn-mini" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
     <?php else: ?>
     <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
   <?php endif; ?>

 </div>
</div> 
<?php } ?>
</ul> 
<script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script><?php endif; ?>
<script type="text/javascript">
$j(document).ready(function() {
  $j(".fancybox").fancybox();
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:59:27.393

我可以使用以下块代码将产品添加到购物车：

```
 {{block type="catalog/product_list_related" category_id="49" template="PATH_TO_TEMPLATE_FILE"}} 
```

然后在文件中添加一个结帐按钮，它就可以工作了！

```
`<?php if($_product->isSaleable()): ?>
            <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
        <?php endif; ?> ` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:40:34.137

您可以使用查询字符串来实现这一点，如此[处所述](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/adding_a_product_to_the_cart_via_querystring)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T16:34:52.653

```
 <?php 
$category_id = 49; // category_id for "Accessories"
$category = new Mage_Catalog_Model_Category();
$category->load($categoryid);
$_productCollection = $category->getProductCollection();
$_productCollection->addAttributeToSelect('*');
?>
<?php if($_productCollection->count()): ?>
  <ul class="media-list pull-left">
   <?php 
   $products = array();
   foreach ($_productCollection as $_product) { 
    ?>
    <li class="media">
      <a class="fancybox pull-left" href="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(220, 200); ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>">
        <img class="media-object"  src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(100, 100); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
      </a>
    </li>
    <div class="media-body">
      <h4 class="media-heading"><a class="view-item-button" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->__('Order'); ?> <?php echo $this->htmlEscape($_product->getName())?><?php echo $this->__('&#8482;'); ?></a></h4>
      <div class="media">
       <?php echo $_product->_data['short_description']; ?>
       <div class="clearfix"></div>
       <h6>Price <?php echo Mage::helper('core')->currency($_product->getPrice());; ?></h6>
       <?php if($_product->isSaleable()): ?>
       <form id="addtocartform_<?=$_product->getId()?>" action="<?=Mage::helper('checkout/cart')->getAddUrl($_product)?>">
        <input type="hidden" value="<?=$_product->getId()?>" name="product" id="product"/>
        <?php if(!$_product->isGrouped()): ?>
        <input type="text" name="qty" id="qty" maxlength="12" value="1" />
        <?php endif; ?>
        <button type="button" class="button btn-cart" onclick="this.form.submit()"><span><span>Add To Cart</span></span></button>
       </form>
     <?php else: ?>
     <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
   <?php endif; ?>

 </div>
</div> 
<?php } ?>
</ul>  
<?php endif; ?> 
```

# android - 按钮上的透明色调

> ID：13684890
> 
> 赞同：0
> 
> 时间：2012-12-03T14:03:29.583
> 
> 标签：android, xml, android-layout, android-widget

在我的 Android 应用程序中，我试图让按钮染上某种颜色（蓝色、红色或金色）。默认按钮色调为灰色。有谁知道如何更改按钮的颜色以使其保持透明度？

我尝试使用：`android:background`

但这完全放弃了透明度并使按钮成为一种纯色。

我也尝试过使用：`android:@color/transparent`

但这完全抛弃了颜色，取而代之的是完全透明的按钮。我在网上看了一段时间，发现主要是与图像按钮有关的东西。我试图着色的那种只是标准的按钮按钮。我也猜测这可以主要通过 XML 来完成。那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:13:44.477

您可以尝试像这样创建自己的可绘制按钮...

从 Android SDK ([ANDROID_SDK_HOME]/platforms/data/res) 中获取可绘制按钮并将可绘制对象导入您的项目。然后创建一个[图层列表](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)，底部可绘制按钮，顶部为半透明颜色。

# html - 使用 XSL 解析 XML“颜色”属性以填充表格单元格

> ID：13684894
> 
> 赞同：1
> 
> 时间：2012-12-03T14:03:38.520
> 
> 标签：html, xslt

我正在学习 XML，但遇到了以下问题：我的 XML 文件中有一个属性，它可以将颜色作为内容（例如`<color>red</color>`），但我不知道如何使用它。

我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<cars>
    <car year="2002" manufacturer="Jet" model="Sardine Can 1.6L">
        <meter>95664</meter>
        <color>silver</color>
        <price>099900</price>
        <dealersecurity buyback="no"/>
    </car>
    <car year="2004" manufacturer="Jet" model="Sardine Can 2.0">
        <meter>81283</meter>
        <color>red</color>
        <price>129900</price>
        <dealersecurity buyback="no"/>
    </car>
    <car year="2007" manufacturer="Jet" model="Sardine Can 2.0">
        <meter>49741</meter>
        <color>black</color>
        <price>169999</price>
        <dealersecurity buyback="yes"/>
    </car>
</cars> 
```

我的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns="http://www.w3.org/1999/xhtml"
    version="1.0">
  <xsl:output method="xml"/>

  <xsl:template match="/cars">
    <html>
      <head><title>Second Hand Sardine Cans</title>  
        <link rel="stylesheet" type="text/css" href="style.css"/></head>
      <body>
      <h1>Second Hand Sardine Cans</h1>
      <table border="1"><th>Make</th><th>Model</th><th>Year</th><th>KMs</th><th>Color</th><th>Price</th><th>Warranty</th><xsl:apply-templates/></table>
      </body>
    </html>
  </xsl:template>

 <xsl:template match="cars/car">
  <tr><xsl:for-each select="cars/car"/>
  <td><xsl:value-of select="@manufacturer" /></td>
  <td><xsl:value-of select="@model" /></td>
  <td><xsl:value-of select="@year" /></td>
  <td><xsl:value-of select="meter" /></td>
        <xsl:apply-templates/></tr>
  </xsl:template>

  <xsl:template match="meter"/>

  <xsl:template match="color">
  <td><xsl:apply-templates /></td>
  </xsl:template>

  <xsl:template match="price">
  <td><xsl:apply-templates /></td>
  </xsl:template>

  </xsl:stylesheet> 
```

到目前为止我所拥有的：
![结果到现在](../Images/7a21151c22272b5ac9e80280b6fe14b4.png)

但不是说“红色”或“黑色”，我希望那个单元格填充那个确切的颜色。

谢谢！

编辑：我在 Dimitre 的回答的帮助下修复了它。我在`<td bgcolor="{color}"><xsl:value-of select="color" /></td>`下面添加`<td><xsl:value-of select="meter" /></td>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:12:22.863

**只是改变你的转变**：

```
 <tr> 
```

**至**：

```
 <tr bgcolor="{color}"> 
```

**或者，如果您真的希望只有一个具有该颜色的单元格，请在匹配的模板中使用`color`**：

```
 <td bgcolor="{.}"> 
```

# android - 何时加载资产？

> ID：13684896
> 
> 赞同：0
> 
> 时间：2012-12-03T14:03:44.813
> 
> 标签：android, libgdx

什么是最好的方法？

1）制作方法：

```
Assets.loadAll() 
```

加载游戏中使用的所有纹理，并在splashScreen中调用此方法（因此在所有活动生命中只有一次）

或者

2）为每个屏幕制作一个方法（即Assets.loadMainMenu，Assets.loadGameScreen等）并在任何屏幕的show（）中调用它？（并在 hide() 中调用 Assets.disposeMainMenuAssets、Assets.disposeGameScreenAssets 等。）

注意：2）比第一个慢，但在第一个如果我阻止电话（使用经典的物理按钮）并且在返回应用程序后，纹理消失（如果我按下“主页”则不会发生）按钮......但是如果我锁定手机是的......奇怪的是，在libGdx 9.6中，如果我锁定手机，纹理不会消失，但是使用libGdx 9.7这个附加......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:29:41.443

如果是 5MB 的资产，我说只需将它们加载到启动屏幕上即可。这样，屏幕切换之间几乎没有“加载”时间。方法1是最好的。

创建一个名为`Assets`. 在这有一个名为“load”的静态方法，就像这样

公共类资产{

```
private static Texture tex;
public static TextureRegion tree,cloud1,cloud2,cloud3,rock,platform,playerStanding,
                            rocket, rocketShadow, moon, star;
public static SpriteAnimation playerMoving;

public static void load(){
    tex = new Texture(Gdx.files.internal("data/Graphics.png"));
    tex.setFilter(TextureFilter.Linear, TextureFilter.Linear);
    tree = new TextureRegion(tex, 0,0,246,226);
    cloud1 = new TextureRegion(tex, 246,0,225,92);
    cloud2 = new TextureRegion(tex, 358,197,88,84);
    cloud3 = new TextureRegion(tex, 0,226,105,64);
    rock = new TextureRegion(tex, 246,197,112,90);
    platform = new TextureRegion(tex, 246,92,193,105);

    tex = new Texture(Gdx.files.internal("data/Graphics2.png"));
    tex.setFilter(TextureFilter.Linear, TextureFilter.Linear);
    playerMoving = new SpriteAnimation(new TextureRegion(tex,0,0,458,555), 4, 5, 0.01f);
    playerStanding = new TextureRegion(tex,0,0,112,110);

    tex = new Texture(Gdx.files.internal("data/Graphics3.png"));
    tex.setFilter(TextureFilter.Linear, TextureFilter.Linear);
    rocket = new TextureRegion(tex,0,218,119,201);
    rocketShadow = new TextureRegion(tex,0,0,138,218);

    tex = new Texture(Gdx.files.internal("data/Graphics4.png"));
    tex.setFilter(TextureFilter.Linear, TextureFilter.Linear);
    moon = new TextureRegion(tex,0,0,410,382);
    star = new TextureRegion(tex,0,382,123,123);
}

public static void dispose(){
    tex.dispose();
}
} 
```

（这只是我游戏中的一个例子。名字并不重要，重要的是方法）

在您的初始屏幕上，您只需调用即可`Assets.load();`加载您的所有资产！

然后你想使用一个资产，你可以通过它调用它`Assets.whatever`（静态的很好）

希望这可以帮助！

# c - 点在二维轴对齐的矩形内，没有分支

> ID：13684897
> 
> 赞同：5
> 
> 时间：2012-12-03T14:03:46.143
> 
> 标签：c, algorithm, 2d

我正在寻找最优化的方法来检测一个点是否在轴对齐的矩形内。

最简单的解决方案需要 4 个分支 (if)，这对性能不利。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T14:23:30.037

给定一个段`[x0, x1]`，当 时，一个点`x`在段内`(x0 - x) * (x1 - x) <= 0`。

在二维情况下，您需要执行两次，因此需要两个条件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T14:48:14.647

考虑对 XMin-X、X-XMax、YMin-Y、Y-YMax 的值进行 BITWISE-AND 运算并使用得到的符号位。

适用于整数和浮点数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T14:10:40.357

我认为无论如何您都需要这四个测试，但是如果您知道该点是否更有可能在矩形内或之外，您可以确保这四个测试仅在最坏的情况下运行。

如果点在里面的可能性更高，你可以做

```
if ((x>Xmax) || (x<Xmin) || (y>Ymax) || (y<Ymin)) {
 // point not in rectangle
} 
```

否则，做相反的事情：

```
if ((x<=Xmax) && (x>=Xmin) && (y<=Ymax) && (y>=Ymin)) {
 // point in rectangle
} 
```

我很好奇是否真的会有更好的东西......（除非你可以对矩形边缘的位置做出一些假设，比如它们与 2s 的幂或类似的东西对齐）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T14:26:59.227

许多架构支持无分支绝对值运算。如果不是，它可以通过乘法来模拟，或者左移一个有符号值并相信特定的“实现依赖”行为。

同样，在 Intel 和 ARM 架构中，操作也很可能是无分支的

```
((x0<x) && (x<x1))&((y0<y) && (y<y1)) 
```

原因是范围检查通常针对序列进行优化：

```
mov ebx, 1       // not needed on arm
sub eax, imm0    
sub eax, imm1    // this will cause a carry only when both conditions are met
cmovc eax, ebx   // movcs reg, #1    on ARM 
```

(x) 和 (y) 表达式之间的位*和*也是无分支的。

**编辑**最初的想法是：

给定测试范围：a<=x<=b，首先定义中点。然后可以用 |(x-mid)| 测试两边 <一个; 乘以因子 B 使 A 为 2 的幂... (x-mid)*B < 2^n 和平方
((x-mid)*B)^2 < 2^2n

该值仅在最低有效 2n 位设置位（如果满足条件）。对范围 y 和 OR 执行相同操作。在这种情况下，必须选择因子 C，以便 (y-midy)^2 缩放到相同的 2^2n。

```
 return (((x-mid)*B)*(((x-mid)*B) | ((y-mid)*C)*((y-mid)*C))) >> (n*2); 
```

AABB 内部的 x,y 的返回值为 0，外部的 x,y 的返回值为非零。（这里的操作是*or*，因为人们对 (a&&b) & (c&&d) 的补集感兴趣，即 (!(a&&b)) | (!(c&dd));

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T14:43:12.127

您没有告诉我们您对可能值的范围和所需分辨率的了解，也没有告诉我们您想要优化的标准。

一个解决方案是预先计算一个二维布尔数组（如果你能负担得起的话），你可以查找你的坐标对。花费 1 次乘法（或移位）、1 次加法（用于地址计算）和 1 次内存读取。

或两个一维布尔数组。花费 2 次加法、两次内存读取和 1 次 AND，以及更小的表。

# codeigniter - 使用 CI HMVC 寻找最佳模板库

> ID：13684899
> 
> 赞同：0
> 
> 时间：2012-12-03T14:04:01.063
> 
> 标签：codeigniter, codeigniter-2, hmvc

我最近在我的项目中迁移到 HMVC 结构，我想找到模板库的最佳解决方案。

我有最新版本的 CI (2.1.3) 和 HMVC (5.4)

我正在寻找模板库，其中：

*   支持HMVC结构
*   拥有活跃的社区（经常更新）
*   有一个很好的教程

如果您使用同一个库 - 请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:51:39.450

try this philsturgeon template library [https://github.com/philsturgeon/codeigniter-template](https://github.com/philsturgeon/codeigniter-template)

# javascript - 形状内的边界文本

> ID：13684900
> 
> 赞同：0
> 
> 时间：2012-12-03T14:04:01.227
> 
> 标签：javascript, html, canvas, kineticjs

在画布上，我有一个背景形状和文字，

你如何模拟`overflow:hidden;`从 CSS 到文本的东西？

基本上文本溢出了形状，我试图掩盖/剪辑它，但找不到任何解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:10:43.290

您可以创建一个新的背景画布，将其宽度和高度设置为所需的边界框，在其上绘制文本，然后将背景画布绘制到主画布。

要创建背景画布，只需执行

```
var tempCanvas = document.createElement('canvas'); 
```

但不要将其附加到任何其他 DOM 节点。然后，您可以设置画布的`.width`和`.height`，获取其上下文并在其上绘制。

要将其绘制回可见画布，只需将背景画布传递给主画布上下文的 drawImage：

```
mainCanvas.getContext('2d').drawImage(tempCanvas, x, y); 
```

# matlab - 未声明的标识符（C-mex S-Functions）

> ID：13684907
> 
> 赞同：1
> 
> 时间：2012-12-03T14:04:26.650
> 
> 标签：matlab, mex

我知道这是很多人都面临的一个非常普遍的问题。但是我不明白如何链接到我的程序。这是一个简单的 c = a+b 程序。我有以下作为我的 C-Mex S-function：

```
#define S_FUNCTION_NAME Addition 
#define S_FUNCTION_LEVEL 2

#include "simstruc.h"

static void mdlInitializeSizes(SimStruct *S)
{
int_T nInputPorts = 2; /* Set no. of input ports */
int_T nOutputPorts = 1; /* Set no. of output ports */
int_T needsInput = 1; /* Direct feed through = yes */

int_T inputPortIdx = 0;
int_T outputPortIdx = 0;

ssSetNumSFcnParams(S, 0);

if (ssGetNumSFcnParams(S) != ssGetSFcnParamsCount(S))
{
    return; /* If no. of expected input parameters is not equal to no.
               of parameters entered in dialog box, return. Simulink
               to generate an error indicating parameter mismatched */
}

/* Configure input ports */
if (!ssSetNumInputPorts(S, 2)) return;

/* Configure first input ports */
ssSetInputPortWidth(S, 0, DYNAMICALLY_SIZED); /* Set dimensions of first input port */
ssSetInputPortDirectFeedThrough(S, 0, 1); /* Set direct feed through */

/* Configure second input ports */
ssSetInputPortWidth(S, 1, DYNAMICALLY_SIZED); /* Set dimensions of second input port */
ssSetInputPortDirectFeedThrough(S, 1, 1); /* Set direct feed through */

/* Configure output ports */
if (!ssSetNumOutputPorts(S,1)) return;
ssSetOutputPortWidth(S, 0, DYNAMICALLY_SIZED); /* Set dimensions of output ports */

ssSetNumSampleTimes(S, 1); /* Set no. of sample times */

ssSetSimStateCompliance(S, USE_DEFAULT_SIM_STATE);

ssSetOptions (S,0);

} /* End of mdlInitializeSizes */

static void mdlInitializeSampleTimes (SimStruc *S)
{
ssSetSampleTimes(S, 0, INHERITED_SAMPLE_TIME);
/* Inherited Sample time: S-function block executes whenever driving block executes */
ssSetOffsetTime(S, 0, 0.0); /* No offset required */
ssSetModelReferenceSampleTimeDefaultInheritance(S); /* */
} /* End of mdlInitializeSampleTime */

static void mdlOutputs (SimStruc *S, int_T tid)
{
int_T i;
InputRealPtrsType uPtrs = ssGetInputPortRealSignalPtrs(S,0);
real_T *y = ssGetOutputPortRealSignal(S,0);
int_T width = ssGetOutputPortWidth(S,0);

for (i=0; i<width; i++) /* i = location of memory. from 0 to 1\. */
{
    *y++ = (*uPtrs[i+1]) + (*uPtrs[i]); /* c = a + b */
}
} /* End of mdlOutputs */

static void mdlTerminate(SimStruct *S)
{
/* No task to be perform at end of simulation therefore no termination required.
   But this is a compulsory function to have for C-mex S-function */
} /* End of mdlTerminate */

#ifdef MATLAB_MEX_FILE
#include "simulink.c"
#else
#include "cg_sfun.h"
#endif 
```

但是在matlab上编译时，我不断收到以下错误：

```
Addition.c:47: error: expected ‘)’ before ‘*’ token
Addition.c:56: error: expected ‘)’ before ‘*’ token
In file included from Addition.c:82:
/DIST/it/sw/amd64/matlab/r2010b/simulink/include/simulink.c: In function ‘_ProcessMexSfunctionCmdLineCall’:
/DIST/it/sw/amd64/matlab/r2010b/simulink/include/simulink.c:2545: error: ‘mdlInitializeSampleTimes’ undeclared (first use in this function)
/DIST/it/sw/amd64/matlab/r2010b/simulink/include/simulink.c:2545: error: (Each undeclared identifier is reported only once
/DIST/it/sw/amd64/matlab/r2010b/simulink/include/simulink.c:2545: error: for each function it appears in.)
/DIST/it/sw/amd64/matlab/r2010b/simulink/include/simulink.c:2601: error: ‘mdlOutputs’ undeclared (first use in this function) 
```

任何意见将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:31:27.920

`SimStruct`您在错误消息顶部提到的两行中拼写错误。关于括号的错误意味着编译器不知道这`SimStruc`是一个类型，所以 * 不适合。之后，没有定义这两个函数，因此 simulink 接口会因为无法在您的文件中找到这两个必需的函数而感到不安。

# java - 无法在 Spring-Acegi 中设置 tokenValiditySeconds

> ID：13684908
> 
> 赞同：0
> 
> 时间：2012-12-03T14:04:27.413
> 
> 标签：java, spring, spring-security

我使用 acegi-security-1.0.0 并希望为 cookie ACEGI_SECURITY_HASHED_REMEMBER_ME_COOKIE 设置 maxAge（例如 18 天）。但是当我在浏览器中打开 cookie 时，这个 cookie 会在 2017 年到期...

```
<bean id="rememberMeServices" parent="txProxyTemplate">
        <property name="target">
            <bean class="org.acegisecurity.ui.rememberme.TokenBasedRememberMeServices">
                <property name="userDetailsService" ref="userDao"/>
                <property name="key" value="desknetRememberMe"/>
                <property name="parameter" value="rememberMe"/>
                <property name="tokenValiditySeconds" value="2"/>
            </bean>
        </property>
        <property name="transactionAttributes">
            <props>
                <prop key="autoLogin">PROPAGATION_REQUIRED</prop>
            </props>
        </property>
</bean> 
```

谁能帮我？我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:46:36.343

有令牌和cookie。Cookie 将在 5 年后过期，令牌过期时间与我们通过`property name="tokenValiditySeconds"`. 并且当令牌过期时，cookie 一定是无效的。

# objective-c - 如何在拆分视图中控制界面方向

> ID：13684909
> 
> 赞同：0
> 
> 时间：2012-12-03T14:04:25.090
> 
> 标签：objective-c, ios

在我的 splitview 应用程序中，当应用程序设置中没有存储共享密钥时，我会显示一个登录对话框。这要求应用程序在显示此对话框时停止旋转。我通过将 detailview 控制器的 shouldAutorotate 方法重写为如下方式来实现这一点：

```
-(BOOL) shouldAutorotate
{
   return ![SynchronizationHandler displaysLoginWindow];
} 
```

然而，随着最近发布的 iOS 6.0.1，这个方法永远不会被调用。我已经进行了一些搜索，但没有找到有关此特定案例的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:48:14.703

`- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {}`改为使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:56:59.100

iOS 6.0.1 似乎只对窗口的 rootviewcontroller 使用了 shouldAutorotate 方法。

# ruby-on-rails-3 - 从 Windows 命令行中杀死 localhost:3000 进程

> ID：13684915
> 
> 赞同：7
> 
> 时间：2012-12-03T14:04:44.377
> 
> 标签：ruby-on-rails-3, windows-7, command-line

所以我在窗户的导轨上使用红宝石（我听到你们都把咖啡吐到屏幕上），这只是一个短期的事情。（在家里使用 ubuntu）所以我今天下午试图启动 webrick，但我收到了错误消息

```
TCPServer Error, only one usage of each socket address is normally permitted 
```

因此，从上周开始，3000 端口似乎仍在运行？我的问题是如何从 Windows 命令行终止该进程。通常我必须按 ctrl 并在 Windows 中暂停/中断，因为 ctrl c 不起作用，这似乎只会杀死批处理。

欢迎任何解决方案

## 编辑

所以好像

```
tasklist 
```

会给我进程列表，但是我在哪里可以找到运行 webrick 服务器的进程？

`ruby.exe`未列为正在运行的进程

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T14:33:49.663

尝试使用`netstat -a -o -n`来确定`pid`在端口 3000 上运行的进程。然后你应该能够使用`taskkill /pid ####`来杀死在该端口上运行的任何进程。

可能不是最优雅的方式，但我认为它应该工作。

**编辑**

您可能还必须使用该`/F`标志来强制终止该进程。我刚刚在本地机器上试了一下，效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-11T21:09:53.587

进入`rails_project\tmp\pids`并删除其中的 .pid 文件。

跑：

```
rails server 
```

# php - 通过编辑器上传图片

> ID：13684918
> 
> 赞同：3
> 
> 时间：2012-12-03T14:05:03.407
> 
> 标签：php, image, upload, editor

我正在尝试通过编辑器为我的应用程序上传图像。我正在使用 php。我认为默认的 tinymce 至少对用户来说不是那么灵活。那么是否有任何编辑器可供用户添加来自他们计算机的图像？如果是这样，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:30:04.000

很棒的一个，但要付费：
**Readctor** - [http://imperavi.com/redactor/](http://imperavi.com/redactor/)

易于编写、易于编写的函数（也用于自定义上传 ajax 脚本）

# r - 如何将 TextMate2 中的选定文本（或一行）发送到终端上运行的 R

> ID：13684920
> 
> 赞同：6
> 
> 时间：2012-12-03T14:05:09.513
> 
> 标签：r, terminal, textmate2

如您所知，TextMate 的第 2 版即将推出，当前的开发版本非常有前途：[https ://github.com/textmate/textmate/blob/master/README.md](https://github.com/textmate/textmate/blob/master/README.md)

就我而言，我在终端（MacOSX Mountain Lion）中使用 R，并使用 TextMate2 开发我的代码。在以前版本的 TextMate (1.5.11) 中，我使用以下技巧将选定的文本或行发送到我的终端窗口：

-> 请参阅[如何将 TextMate 中的选定文本（或一行）发送到终端上运行的 R](https://stackoverflow.com/questions/9217155/how-can-i-send-selected-text-or-a-line-in-textmate-to-r-running-on-terminal)

这个技巧对我来说非常有效，但我无法弄清楚如何使用 TextMate2 获得类似的行为。

任何想法？我提前感谢您的宝贵帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-04T16:38:29.170

这对我有用，它正确地进入了选择的结尾。我刚刚在上一个答案中添加了 osascript 部分，并将其放入由 Hans-Jörg Bibiko 编写的原始 R 包中的代码中。将“范围选择器”设置为“source.r”，将“输出”设置为“丢弃”。将“输入”设置为“行”，它会做我需要的事情：如果没有选择任何内容，则发送该行，否则发送选择。

编辑：它适用于选择，但不适用于线条。当您不选择文本时，它只会从文件顶部重新运行所有内容

edit2：解决了，我写信给 Hans-Jörg Bibiko，他指给我“输入”选项。

```
#!/usr/bin/env bash

# input is selection or document
rawText="$(cat | sed 's/ / /g;')"

curDir=''
if [[ ${#TM_DIRECTORY} -gt 0 ]]; then
    curDir="$TM_DIRECTORY"
fi

osascript  -e 'on run(theCode)' \
           -e '  tell application "Terminal"' \
           -e '    do script theCode in window 1' \
           -e '  end tell' \
           -e 'end run' -- "$rawText"

if [ "$TM_LINE_NUMBER" != "" ]; then
    "$TM_MATE" -l "$(($TM_LINE_NUMBER+1)):1000000"
elif [[ $TM_SELECTION =~ [1-9][0-9]*:?[0-9]*-([1-9][0-9]*):?[0-9]* ]]; then
    # Regular Selection
    "$TM_MATE" -l "$((${BASH_REMATCH[1]}+1)):1000000"
elif [[ $TM_SELECTION =~ [1-9][0-9]*:?[0-9]*x([1-9][0-9]*):?[0-9]* ]]; then 
    # Block (option) selection
    "$TM_MATE" -l "$((${BASH_REMATCH[1]}+1)):1000000"
else 
    "$TM_MATE"
fi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T14:11:42.840

实际上基于先前的答案（[如何将 TextMate 中的选定文本（或一行）发送到终端上运行的 R](https://stackoverflow.com/questions/9217155/how-can-i-send-selected-text-or-a-line-in-textmate-to-r-running-on-terminal)），我使用以下代码在 TextMate 2 中创建了自己的 Bundle：

```
#!/bin/bash

source "$TM_SUPPORT_PATH/lib/bash_init.sh" # might not be necessary

# input is selection or document
rawText="$(cat | sed 's/ / /g;')" 

osascript  -e 'on run(theCode)' \
           -e '  tell application "Terminal"' \
           -e '    do script theCode in window 1' \
           -e '  end tell' \
           -e 'end run' -- "$rawText"

open "txmt://open?line=$(($TM_LINE_NUMBER+1))&column=1000000" & 
```

请参阅下面的屏幕截图。

![新捆绑包的代码和选项](../Images/c0714d5d4f0a43e3d1819b0d500184cd.png) 唯一的问题是，当您选择一段文本时，光标会跳到文档的第一行，这是一种非常烦人的行为。将“输入”从“行”更改为“选择”并不能解决问题。

有什么想法吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:38:14.507

A bit of an indirect answer : I use the R bundle in Textmate 2 (which also worked in Textmate 1). Just select the lines you want to run and "Send selection to / R App" ( I have it binded to command-R but I'm not sure if it's the original binding)

First time it opens the R app and execute code. Subsequent times it just pastes the code and run it.

It's not exactly "send to terminal" but still works

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T12:36:58.700

我对 bhaibeka 的回答进行了一些更改。显然 $TM_LINE_NUMBER 是空的，这会使光标跳转到文档的第一行。通过去掉最后一行，它解决了部分问题。

```
#!/bin/bash
[[ -f "${TM_SUPPORT_PATH}/lib/bash_init.sh" ]] && . "${TM_SUPPORT_PATH}/lib/bash_init.sh"
rawText="`cat`"

osascript  -e 'on run(theCode)' \
       -e '  tell application "Terminal"' \
       -e '    do script theCode in window 1' \
       -e '  end tell' \
       -e 'end run' -- "$rawText" > /dev/null 
```

另一个问题是如何将光标移动到选择的末尾。我通过在选择的末尾插入“空”输出（在右侧面板上：输出：“输入后插入”和格式：“文本”）使其工作。可能这不是最优雅的方法，但它确实有效。

# ruby-on-rails - Rails 中的 CSV 上传解析

> ID：13684921
> 
> 赞同：0
> 
> 时间：2012-12-03T14:05:09.583
> 
> 标签：ruby-on-rails, csv

有人可以就以下 CSV 解析问题提出建议：

CSV：

```
Robert,Lobos,lobs@email.com
Klein,Kleinerer,kln@gmail.com
Gross,Grosserer,gr@grosserer.de 
```

方法：

```
def upload
  if (params[:contactList])

    csv_content = params[:contactList].read
    @recipients = {}
    CSV.parse(csv_content) do |row|
      @recipients[row[0]] = {'forename' => row[0], 'surname' => row[1], 'email' => row[2]}
    end

    render 'index'
  end
end 
```

目标是渲染模板中的值，如下所示：

```
<% @recipients.each do |recipient| %>
  <option value="test"><%= recipient['forename'] %> <%= recipient['surname'] %> (<%= recipient['email'] %>)</option>
<% end %> 
```

目前抛出：

> 无法将字符串转换为整数

实现上述目标的最佳方法/快速修复是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:19:52.547

为了用块迭代散列，散列条目的`key`和`value`被提供给块。

```
<% @recipients.each do |recipient| %> 
```

应该

```
<% @recipients.each do |key, recipient| %> 
```

# c# - 如何在属性属性上使用条件语句 IF ELSE

> ID：13684927
> 
> 赞同：0
> 
> 时间：2012-12-03T14:05:26.803
> 
> 标签：c#, winforms, properties, attributes, conditional-operator

我想显示`MyProperty1`或`MyProperty2`基于**MyPropertySelected**。如何使用条件语句`if`或`else`基于**MyPropertySelected**？谢谢。

```
// [Browsable(true)
// ????? conditional statement IF ELSE in here..
// IF (MyPropertySelected) MyProperty1 will be show ELSE MyProperty2 will be show.
public bool MyPropertySelected { get; set; }

// [Browsable(true) or [Browsable(false) depending on MyPropertySelected condition.
public int MyProperty1 { get; set; }

// [Browsable(true) or [Browsable(false) depending on MyPropertySelected condition.
public int MyProperty2 { get; set; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T14:33:13.953

你把苹果和橙子混为一谈了。

*属性*是元数据，属性值在运行时获取*其值。*

换句话说：*属性*是您将使用**[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.110%29.aspx)**访问的东西，它们与特定对象无关，而是与对象的类型（即*类*）相关联。

另一个问题是您希望根据无法在编译时工作的条件向属性添加属性。

在它的封闭类被实例化之前，您`MyPropertySelected`将不会获得任何值*- 那是创建一个对象，例如：`MyClass a = new MyClass()`-*，**这意味着添加或不添加属性永远不会是编译时的选择**。

我想明确一点：**你不能纯粹使用属性来做你想做的事！**

*您不能有条件地基于运行时值应用属性*。

最后，我怀疑您想`Browsable`根据条件制作某些东西，就像您自己的问题所说的那样。你不能那样做。

## 好吧好吧，但是什么...？

您可以使用不同的软件设计来解决您的情况。

### 1)

首先，创建一个界面，该界面将具有可浏览或不可浏览的任何属性。但不要将该属性`[Browsable(bool)]`应用于接口属性。

### 2)

创建两个实现先前创建的接口的类。

在第一个类中，实现接口属性并`[Browsable(true)]`在它们上放置一个属性。在第二节课上，做同样的事情，但这次给`[Browsable(false)]`他们一个。

### 3)

一些创建对象实例的代码也将决定*哪一个将被实例化*。

也就是说，`MyPropertySelected`在两个类之外外部化并在调用者中执行整个条件切换。

```
public interface IBrowsableProperties
{
   int Property1 { get;set; }
   int Property2 { get;set; }
}

public class A : IBrowsableProperties
{ 
   [Browsable(true)]
   public int Property1 { get;set; }

   [Browsable(true)]
   public int Property1 { get;set; }
}

public class B : IBrowsableProperties
{
   [Browsable(false)]
   public int Property1 { get;set; }

   [Browsable(false)]
   public int Property1 { get;set; }
}

// Somewhere in some method...
bool propertySelected = true;

IBrowsableProperties instance = null;

if(propertySelected) 
{
   instance = new A();
}
else
{
   instance = new B();
}

// ... do stuff with your instance of IBrowsableProperties! 
```

# 更新

*我查看了您的一些问题评论，发现您正在使用`PropertyGrid`控制。*

*无论如何，您可以在您的案例中应用这个概念。`PropertyGrid`可以继承。您可以同时创建实现建议接口的派生类`PropertyGrid1`！`PropertyGrid2`*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:08:58.933

您可能需要这样的中间属性：

```
class Foo
{
    public bool MyPropertySelected
    {
        get;
        set;
    }

    public readonly int MyProperty
    {
        get 
        {
            return MyPropertySelected ? MyProperty1 : MyProperty2;
        }
    }

    private int MyProperty1
    {
        get;
        set;
    }

    private int MyProperty2
    {
        get;
        set;
    }
} 
```

# css - CSS - 页脚高度 -> 滚动问题

> ID：13684929
> 
> 赞同：1
> 
> 时间：2012-12-03T14:05:34.310
> 
> 标签：css, xhtml, footer

我已经阅读了关于页脚高度的所有帖子和谷歌结果，但我无法解决这个问题。

你可以在这里看到我的索引：http: [//adamaweb.com/faqme/](http://adamaweb.com/faqme/) 正如你所看到的，我希望页脚延伸到页面的末尾。这不是一个粘性页脚，我只是希望它扩展。但是当你加载网页时，你会看到一个很大的垂直滚动。

我认为它的出现是因为页脚中的 height:100% 。可以在没有滚动问题的情况下扩展页脚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:10:15.457

您可以将深色页脚背景放在`body`. 然后您需要为页面内容添加一个 100% 宽的包装器，并在新包装器上使用浅色背景。

是的，根据评论，您需要`height:100%;`从页脚中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:19:55.400

只需将您的 html 背景设置为与您的页脚相同：

```
 html, body {
     margin:0;
     background:black;
   } 
```

# android - Buzzbox 任务无法运行 Android

> ID：13684935
> 
> 赞同：1
> 
> 时间：2012-12-03T14:05:58.403
> 
> 标签：android, task

使用 Buzzbox SDK for Android 和简单示例。

任务不会运行。

活动启动，buzzbox 时间表已设置，已保存。

```
ScheduleManager.getInstance().saveTask(this, */1 * * * *", RobotTask.class);
ScheduleManager.getInstance().restart(this,RObotTask.class); 
```

任务：嗯，就像例子一样。代码没有问题。

我需要调试任务，或者以某种方式找出 Buzzbox 不启动任务和不工作的方式或原因。

使用 eclipse 是否可以调试 Buzzbox 计划任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:35:03.480

我会回答我自己的问题。昨晚我很困惑。但是睡了个好觉之后，答案就很清楚了。

确保 AndroidManifest.xml 包含与 Buzzbox helloworld 示例相同的内容。

尤其是，

必须定义清单中的接收者 SchedulerReciever 部分。

意图过滤器列出了可以接收的“动作”。

这是从 Android 和 Buzzbox 接收“动作”的东西。

例如，触发您的任务的“动作”称为 com.buzzbox.mob.android.scheduler.wakeup。

现在接收器和操作已根据示例在清单中定义..

这一切都工作得如此美妙。

# android - Android主机模式USB调试

> ID：13684941
> 
> 赞同：8
> 
> 时间：2012-12-03T14:06:15.713
> 
> 标签：android, usb

我正在开发一个应用程序，我的 android 手机连接到 USB 配件。但是，当连接附件时，有什么简单的方法可以调试应用程序吗？

我们可以使用微型 USB 集线器或类似设备吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T14:10:18.827

在调试使用 USB 附件或主机功能的应用程序时，您很可能会将 USB 硬件连接到您的 Android 设备。这将阻止您通过 USB 与 Android 供电设备建立 adb 连接。您仍然可以通过网络连接访问 adb。通过网络连接启用 adb：

1.  通过 USB 将 Android 供电设备连接到您的计算机。
2.  从您的 SDK platform-tools/ 目录中，在命令提示符处输入 adb tcpip 5555。
3.  输入 adb connect <device-ip-address>:5555 您现在应该已连接到 Android 驱动的设备，并且可以发出常用的 adb 命令，如 adb logcat。
4.  要将您的设备设置为在 USB 上侦听，请输入 adb usb。

来源：[Android 开发者网站](http://developer.android.com/guide/topics/connectivity/usb/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:19:21.770

您可以编写一个应用程序来读取手机上的 logcat 输出并将其显示在屏幕上和/或将其保存到一个文件中，然后您可以使用 adb 拉取该文件。该应用程序必须获得 READ_LOGS 权限，您可以使用该权限`adb shell pm grant com.package.appname android.permission.READ_LOGS`（至少在有根手机上）。

另一种选择可能是通过 WiFi 登录。adb 有一个通过 TCP/IP 连接的选项，但这不是我尝试过的，所以我不知道设置有多困难或它的工作情况如何。

除非您的日志真的很冗长，否则有时运行您的 USB 附件用例然后拔下附件并将手机连接到您的计算机以捕获 logcat 输出就足够了。日志被缓冲到一定数量，因此您可以使用此方法获得合理数量的日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-23T16:06:54.480

您可以在 Virtualbox 中运行 Android 映像。这将允许您将 USB 设备连接到虚拟设备，并通过桥接网络连接进行调试。

我还没有弄清楚如何将 SDK .img OS 映像转换为 VDI 以在 Virtualbox 中使用，但是那里有很多罐装 VDI。

# oracle - 来自 XMLTYPE 列的 Oracle JPG 元数据 xpath

> ID：13684942
> 
> 赞同：0
> 
> 时间：2012-12-03T14:06:16.563
> 
> 标签：oracle, xpath, extract, exif, multimedia

我有一个存储照片的 tavle。使用 pl/sql 脚本，我将图像元数据提取到 exifmetadata xmltype 列。我想一一选择元素，但我总是返回 null，我不知道我的 xpath 表达式有什么问题。

```
 <exifMetadata xmlns="http://xmlns.oracle.com/ord/meta/exif" xsi:schemaLocation="http://xmlns.oracle.com/ord/meta/exif http://xmlns.oracle.com/ord/meta/exif" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <TiffIfd>
      <Make tag="271">Apple</Make>
      <Model tag="272">iPhone 4S</Model>
      <Orientation tag="274">top left</Orientation>
      <XResolution tag="282">72.0</XResolution>
      <YResolution tag="283">72.0</YResolution>
      <ResolutionUnit tag="296">inches</ResolutionUnit>
      <Software tag="305">6.0.1</Software>
      <DateTime tag="306">2012-11-16T13:31:15</DateTime>
      <YCbCrPositioning tag="531">centered</YCbCrPositioning>
   </TiffIfd>
   <ExifIfd tag="34665">
      <ExposureTime tag="33434">0.004405286</ExposureTime>
      <FNumber tag="33437">2.4</FNumber>
      <ExposureProgram tag="34850">Normal program</ExposureProgram>
      <ExifVersion tag="36864">0221</ExifVersion>
      <DateTimeOriginal tag="36867">2012-11-16T12:49:58</DateTimeOriginal>
      <DateTimeDigitized tag="36868">2012-11-16T12:49:58</DateTimeDigitized>
      <ComponentsConfiguration tag="37121">Y</ComponentsConfiguration>
      <ShutterSpeedValue tag="37377">7.82697</ShutterSpeedValue>
      <ApertureValue tag="37378">2.5260692</ApertureValue>
      <BrightnessValue tag="37379">6.641153</BrightnessValue>
      <MeteringMode tag="37383">Pattern</MeteringMode>
      <Flash tag="37385">
         <Fired>No</Fired>
      </Flash>
      <FocalLength tag="37386">4.28</FocalLength>
      <FlashpixVersion tag="40960">0100</FlashpixVersion>
      <ColorSpace tag="40961">sRGB</ColorSpace>
      <PixelXDimension tag="40962">2902</PixelXDimension>
      <PixelYDimension tag="40963">1938</PixelYDimension>
      <SensingMethod tag="41495">One-chip color area</SensingMethod>
      <ExposureMode tag="41986">Auto exposure</ExposureMode>
      <WhiteBalance tag="41987">Auto</WhiteBalance>
      <FocalLengthIn35mmFilm tag="41989">35</FocalLengthIn35mmFilm>
      <SceneCaptureType tag="41990">Standard</SceneCaptureType>
   </ExifIfd>
</exifMetadata> 
```

和 SQL：

```
 SELECT 
  p.metaexif.extract('//exifMetadata/TiffIfd/Make/text()').getStringVal() "Model" 
  FROM scott.photos p
  WHERE id=22
  ; 
```

确实存在 id 22 记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:18:35.250

您设置了默认命名空间，因此您必须应对此问题。

例如使用这个：

```
select extractvalue(p.metaexif,'/exifMetadata/TiffIfd/Make',
        'xmlns="http://xmlns.oracle.com/ord/meta/exif"') 
```

# jquery - 使用 jQuery Masonry 时在 IE 中随机丢失图像

> ID：13684943
> 
> 赞同：5
> 
> 时间：2012-12-03T14:06:21.300
> 
> 标签：jquery, internet-explorer, jquery-masonry, infinite-scroll

我正在制作一个呈现照片墙的网页，当您向下滚动时，它会使用 jQuery 无限滚动来加载下一批照片。

我正在使用[jQuery Masonry](http://masonry.desandro.com/)和[jQuery InfiniteScroll](http://www.infinite-scroll.com/)。

在 Chrome 和 Firefox 下一切正常，但在 IE 下查看时，我注意到图像会随机无法显示，但如果我刷新页面，它们会出现，但其他图像会丢失。同样，如果我在丢失的图像上单击鼠标右键并选择“显示图片”，它会立即出现。

[所以我在jQuery Masonry 网站](http://masonry.desandro.com/)上测试了几个演示，再次发现，在 IE 下，偶尔会出现随机图像无法呈现的情况。这发生在我的[无限滚动演示](http://masonry.desandro.com/demos/infinite-scroll.html)中，有时甚至是[图像演示](http://masonry.desandro.com/demos/images.html)（不使用无限滚动）。

有没有其他人经历过这个，或者知道解决方案？就目前情况而言，我将无法继续我当前的项目，因为它在 IE 下基本上无法使用。

顺便说一句 - 我正在使用 IE9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T20:58:03.077

图像未加载是 Masonry 使用的 imagesLoaded 脚本版本 2 中的一个已知问题。如果您更新代码以使用 imagesLoaded 的最新版本 3 脚本，那么这将解决 IE 图像加载问题。

请注意，您需要直接在 masonry js 文件之后显式加载 imagesloaded.js 文件，因为之前版本的 imagesloaded 包含在 Masonry 中，但现在已在版本 3 中分离。

通过包含最新的 imagesloaded.js 文件，您可以保留现有的 masonry 版本，因为 masonry 版本 3 的某些选项和事件已更改，您可能会发现它不再按预期工作。

在此处下载最新版本：http: [//desandro.github.io/imagesloaded/](http://desandro.github.io/imagesloaded/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:53:47.007

通过做一些进一步的调查（试错），我确定问题似乎只在使用 Masonry 时出现。

所以现在我已经切换到[jQuery Wookmark](http://www.wookmark.com/jquery-plugin)，它为我勾选了所有的框，这没有表现出相同的问题。

# javascript - 编码 URL JavaScript

> ID：13684945
> 
> 赞同：0
> 
> 时间：2012-12-03T14:06:32.207
> 
> 标签：javascript, url, encoding

我还有一个问题，我如何找到一种方法来编码以下字符 - “ **34ТФ** ”（是的，它是俄语）在这个代码中 - 34%D2%D4

问题是如果你使用常规的“ **encodeURI** ”，那么你应该得到它 - 34%D0%A2%D0%A4

PS 我需要它来生成另一个站点上页面的正确 URL

# android - 在android drawable中调整图像大小

> ID：13684947
> 
> 赞同：1
> 
> 时间：2012-12-03T14:06:45.873
> 
> 标签：android, drawable, image-resizing

我在**可绘制文件夹**中有全分辨率图像需要根据**手机屏幕尺寸****调整**大小怎么做？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:11:28.607

像这样做

```
/************************ Calculations for Image Sizing *********************************/ 
public Drawable ResizeImage (int imageID) { 
//Get device dimensions 
Display display = getWindowManager().getDefaultDisplay(); 
double deviceWidth = display.getWidth(); 

BitmapDrawable bd=(BitmapDrawable) this.getResources().getDrawable(imageID); 
double imageHeight = bd.getBitmap().getHeight(); 
double imageWidth = bd.getBitmap().getWidth(); 

double ratio = deviceWidth / imageWidth; 
int newImageHeight = (int) (imageHeight * ratio); 

Bitmap bMap = BitmapFactory.decodeResource(getResources(), imageID); 
Drawable drawable = new BitmapDrawable(this.getResources(),getResizedBitmap(bMap,newImageHeight,(int) deviceWidth)); 

return drawable; 
} 

/************************ Resize Bitmap *********************************/ 
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) { 

int width = bm.getWidth(); 
int height = bm.getHeight(); 

float scaleWidth = ((float) newWidth) / width; 
float scaleHeight = ((float) newHeight) / height; 

// create a matrix for the manipulation 
Matrix matrix = new Matrix(); 

// resize the bit map 
matrix.postScale(scaleWidth, scaleHeight); 

// recreate the new Bitmap 
Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false); 

return resizedBitmap; 
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-04T16:24:59.363

要获得宽度，您应该这样做：

```
Display display = getWindowManager().getDefaultDisplay();
double deviceWidth;
if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB_MR1)
            deviceWidth= display.getWidth();
        else {
            display.getSize(size);
            deviceWidth=size.x;
        } 
```**

# javascript - 错误; （数组）speelVeld 未定义

> ID：13684950
> 
> 赞同：0
> 
> 时间：2012-12-03T14:06:57.853
> 
> 标签：javascript, error-handling

我需要为我学校的一个项目制作一个基于图块的游戏，但遇到了一个我似乎无法解决的“严重”错误。

这是我的脚本：

```
function init(){
var speelVeldBreedte;
var speelVeldHoogte;
var speelVeld = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
    [1,0,1,0,1,0,1,0,0,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1]
];

var speelTerrein = document.getElementById("speelterrein");
}

speelVeldBreedte=speelVeld[0].length; 
speelVeldHoogte=speelVeld.length;

var schaalTerrein = 20;
speelTerrein.width = speelVeldBreedte * schaalTerrein; 
speelTerrein.height = speelVeldHoogte * schaalTerrein;

var ctx = speelTerrein.getContext("2d");
ctx.fillStyle = "white";
ctx.fillRect(0,0,speelTerrein.width,speelTerrein.height);
    for (var y=0; y<speelVeldHoogte;y++){
        for (var x=0;x<speelVeldBreedte;x++){
            var steen = speelVeld[y][x];
            if (steen> 01){
                ctx.fillStyle = "rgb(100,0,0)";
                ctx.fillRect(x*schaalTerrein,y*schaalTerrein,schaalTerrein,schaalTerrein);
            }
        }
    } 
```

这是我得到的错误：

```
uncaughtReferenceError: speelVeld is not defined. 
```

它指的是第 32 行，即：

```
speelVeldBreedte=speelVeld[0].length; 
```

我希望有人能告诉我如何解决这个错误以及究竟是什么问题。

在此先感谢，雷米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:10:45.597

您已经`speelVeld`在函数体中进行了`init()`定义，并且您在第 32 行的调用在该函数之外——因此，JS 无法“看到”该变量，因为它超出了范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:10:11.697

spelVeld（以及与此相关的所有变量）的范围在 init() 函数内。

您可以在此处阅读有关范围的信息：http: [//coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

# java - 在 JPA 和 Hibernate 中创建外键约束

> ID：13684963
> 
> 赞同：0
> 
> 时间：2012-12-03T14:07:42.877
> 
> 标签：java, hibernate, jpa

我是 JPA 的新手。我正在尝试在 2 个类之间创建关系，其中一个是`User`类，它有一个`user_id`字段作为主键。另一类是`Party`. 我希望它有一个`user_id`字段，该字段将引用`User`具有外键约束的类。

我尝试查看教程，但我不完全了解如何引用不同类中的字段。我尝试使用`@OneToOne(targetEntity=User.class, mappedBy="user_id")`并将它放在类中的`user_id`字段上方`Party`，但它产生了一个错误，说它找不到该`user_id`字段。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:31:15.190

`mappedBy`是指目标类中的字段。尝试在课堂上设置一个`User`字段，反之亦然。`Party`然后在派对类中用 注释用户`@OneToOne(mappedBy="party")`。

```
public class User {
  Party party;
}

public class Party {
  User user;

  @OneToOne(mappedBy="party")      
  public User getUser() {
  ...
} 
```

# vb.net - 获取焦点字段的名称

> ID：13684967
> 
> 赞同：0
> 
> 时间：2012-12-03T14:07:55.300
> 
> 标签：vb.net, winforms

我只为 C# 找到了一些关于这个问题的东西，我不知道如何翻译成 VB.net。

我需要获取具有当前焦点的输入字段的名称，我该怎么做？

# java - 如何计算循环中的最小值，最大值（java）

> ID：13684973
> 
> 赞同：-4
> 
> 时间：2012-12-03T14:08:22.490
> 
> 标签：java, eclipse, loops, while-loop, min

我在为明天的讲座编写 1 个应用程序时遇到问题。

因此，该程序向用户询问数字，在键入“100”时它会停止，并显示：-average -min -max

我知道我需要使用什么样的循环（do-while 对吗？）。但是我应该如何在不使用数组的情况下计算平均值、最小值、最大值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:33:02.150

```
Step 1 : user three temp variable 
Step 2 : initialize three temp variable(min,max,avg all by 0)
Step 1 : inside the loop if temp > max ==>> max = temp
Step 1 : inside the loop if temp < min ==>> min = temp
Step 1 : avg = ( avg + temp )/i

int[] values = { .. values .. }

int min=0,max=0,avg = 0;
for(int i=1;i<=values.length;i++)
{
if(min > values[i])
min = values[i] 
if(max < values[i])
max = values[i] 
avg = ( avg + values[i] ) / i
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:18:43.680

这是速记伪代码，因为您必须自己编写代码：

```
min = max = total = user_input
count = 0
do {
    count++
    input = get_input
    total += input
    min or max maybe = input
} while (input !=100)
average = total / count
print stuff 
```

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:19:09.357

我可以告诉你如何在没有数组的情况下计算平均最小值和最大值。但是，我不能告诉您如何计算平均最小值和最大值 WITH 数组。

最小值很容易：

```
int current_min
ArrayList<int> find_min = new ArrayList<int>();
for (int c : find_min)
    if (c < current_min)
        current_min = c; 
```

最大值有点难。您需要使用“功能”

```
boolean check_if_integer_is_bigger_than_another_integer(int another_integer_to_check_against, int the_original_integer_goes_here_into_this_argument_here)
{
    if (another_integer_to_check_against > the_original_integer_goes_here_into_this_argument_here)
    return (another_integer_to_check_against > the_original_integer_goes_here_into_this_argument_here) //Important
    return (another_integer_to_check_against > the_original_integer_goes_here_into_this_argument_here)
}
    int current_max
    ArrayList<int> find_max = new ArrayList<int>();
    for (int c : find_max)
        if (check_if_integer_is_bigger_than_another_integer(c, current_max))
            current_max = c; 
```

我什至不想进入平均水平。您必须添加数字，而我并不完全有资格。

# apache-flex - 在 Flex 3.6 SDK 中创建本机扩展时出现 ExtensionContext 错误

> ID：13684978
> 
> 赞同：3
> 
> 时间：2012-12-03T14:08:47.037
> 
> 标签：apache-flex, air, flash-builder, air-native-extension

我正在使用 Flex 3.6 创建本机扩展。编码本机端，然后创建 Flex 库项目，然后创建 .ane 文件。最后将 .ane 文件导入 myFlex 项目。
这是我遇到的问题。在调试应用程序时，出现“1046：找不到类型或不是编译时常量：ExtensionContext”错误。附加图书馆项目 .as class 。

提前致谢

```
package com.extension.samples
{
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;
    import flash.external.ExtensionContext;

    public class NetworkConnectionANE extends EventDispatcher
    {
        public var _extContext : ExtensionContext;

        public function NetworkConnectionANE(target:IEventDispatcher=null)
        {
            _extContext = ExtensionContext.createExtensionContext("com.extension.samples.NetworkConnectionANE", null);
            super(target);
        }
        public function Connect(path:String):int
        {
            return _extContext.call("nativeFunc", path);
        }
        public function dispose():void
        {
            _extContext.dispose();
        }
    }
} 
```

编辑：我尝试在另一个 Flex 桌面应用程序中使用从库项目创建的 .swc 文件，但同样的错误
也尝试使用 _extContext = ExtensionContext.createExtensionContext("com.extension.samples.NetworkConnectionANE","");
编辑：关于 Flex SDK 的问题，在 SDK 4.6 中没有问题。现在的问题是，如何在 Flex 3.6 SDK 的 lib 项目中使用 Extension？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T20:49:01.770

在 flash builder 中右键单击项目，转到项目的属性，然后在 flex 库编译器中添加空气库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T06:48:05.683

我有同样的问题，但它通过以下方式解决：

1.  `File`> `New`>`Flex Library Project`
2.  选中“包括 Adob​​e AIR 库”选项

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T16:36:26.260

据我所知 ExtensionContext.createExtensionContext() 在这些情况下可以为空：

1.  调用不在 .ane 文件中。您不能从 .swc 或 .swf 文件中调用它。换句话说，它需要在调用它之前编译成一个 .ane 文件。

2.  您尝试在扩展程序不支持的平台中使用扩展程序。例如，您尝试在 PC 上使用 iOS 扩展程序。

3.  扩展的 ID 不存在。扩展 ID 必须与您在 extension.xml 中指定的 ID 相同，例如：

    ```
    <extension xmlns="http://ns.adobe.com/air/extension/3.5">
        <id>com.extension.samples.NetworkConnectionANE</id>
        <versionNumber>0.0.1</versionNumber>
        .... 
    ```

顺便说一句，您不需要设置 ExtensionContext.createExtensionContext 调用的第二个参数，除非您想指定特定于操作系统的 API（我什至没有见过这样做的应用程序）

# iphone - 如何在 UITableView 中获取列

> ID：13684979
> 
> 赞同：1
> 
> 时间：2012-12-03T14:08:46.597
> 
> 标签：iphone, objective-c, xcode, uitableview

> **可能重复：**
> [如何在 UITableView 中显示多列？](https://stackoverflow.com/questions/2855857/how-to-display-multiple-columns-in-a-uitableview)

我有一个`UITableView`30 行。我希望每一行都有一个日期、一个标题和一个名字。现在是这样的：

```
Oct 29 name title 
```

但是名称和头衔发生了变化，所以我有类似的东西：

```
Oct 29 name title
Oct 30 biggername biggertitle
Oct 30 xx title 
```

我想做3个这样的列：

```
Oct 29 | name | title
Oct 31 | b... | bi...
Oct 30 | xx   | title 
```

我怎样才能做到这一点`UITableView`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:14:23.480

使用这个东西的最好和最简单的方法`UITableViewCustomCell`。请参阅此链接 -[自定义 tableView 单元格](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/) 在单元格 XIB`UILabel`中，每行取 3 个，然后将它们用作您的列。

如果这不适合您，只需**在 google 上搜索 Custom TableView 单元格**:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:10:59.013

我设法做到这一点的最好方法是使用`UITableViewCell`每个列都有一个标签的自定义。这样，您可以将“列”的宽度指定为每个标签的宽度，然后在您的`cellForRowAtIndexPath`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:40:28.173

因为`UITableViewCell`您可以通过制作 3`UILabel`个相同宽度来完成此任务，然后将所有这些添加`UILabel`到单元格中

```
[cell addSubview:yourLabel]; 
```

如果你想在两者之间添加这个单独的图像，那么只需制作一个`UIImageView`然后将其添加`UIImageView`为单元格的子视图。

```
[cell addSubview:yourImage]; 
```

# vbscript - 为计划报告动态创建文件夹

> ID：13684980
> 
> 赞同：1
> 
> 时间：2012-12-03T14:08:51.700
> 
> 标签：vbscript, reporting-services

有没有办法在 SSRS 2005 计划作业中创建动态文件夹？

我部署了计划每月运行的 SSRS 报告。这些报告需要在动态文件夹中创建（可以使用 SP 从表中检索路径）。该部分已完成，但问题是它需要在目标中预先创建文件夹。

文件夹结构：

```
 +---Consolidated
        |   \---Product
        |       +---Drive Technologies
        |       |   +---ANEMA
        |       |   +---LD Special Motor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:37:24.887

SSRS 中没有内置选项可以完成此操作。您可以为 SSRS 创建自己的扩展，但我认为最简单和最干净的路径是创建一个独立运行并创建文件夹的脚本（powershell？）。我也会让这个脚本根据需要移动报告。那么就不需要数据驱动的订阅（= Enterprise Edition SQL）或其他一些 SSRS 黑客。

# c# - 带有 RadPaneGroup 的多选项卡 wpf 项目

> ID：13684986
> 
> 赞同：0
> 
> 时间：2012-12-03T14:09:03.883
> 
> 标签：c#, wpf, telerik

我在我的 wpf 项目中使用 RadPaneGroup 来拥有多选项卡 RadDocumentPane，并且我正在使用 Telerik Rad 组件，当我使用此代码时：RadPaneGroup.Items.Refresh(); 所有打开的选项卡都会自动关闭。有任何关于在 wpf 中使用 RadPaneGroup 和 RadDocumentPane 的经验吗？感谢您的快速答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:44:39.540

What are trying to do? I am assuming you are trying to refresh something,

in which case you may need to supply the index of the item you are trying to refresh ... Like this

```
RadPaneGroup.Items[0].Refresh; 
```

0 here is the counter or the item number you are trying to refersh also took out () from refresh.

Hope this helped!!

# game-engine - 如何在不重叠其他图块的情况下将等距对象从一个图块过渡到另一个图块

> ID：13684990
> 
> 赞同：3
> 
> 时间：2012-12-03T14:09:32.290
> 
> 标签：game-engine, isometric, tiling

我已经创建了一个等距环境，全部使用 Javascript 和 HTML5（2D Canvas），大部分工作正常。我面临的问题是具有不同高度的图块，然后对图块上对象的索引进行排序（在这种情况下，同时在两个图块之间并排移动）。

例如，一个对象可能位于它前面的瓷砖后面，因为它所在的瓷砖的高度是 -1。我想出的解决方案是在绘制瓷砖之后直接绘制瓷砖的每个对象，从 0,0 开始并从那里绘制每一行和每一列。

这很有效，直到我需要在两个图块之间转换一个对象。此时，要么对象必须使用中间图块（这是在下图中实现的），要么在对象之后绘制图块时，图块将与对象重叠。使用中间图块也会产生问题，即同一“行”上的栅栏对象被绘制，因为立方体在 1,3 处使用了图块中更高的 z-index（这在图 1 中略微可见）。

[http://i.stack.imgur.com/PQJ0H.png](http://i.stack.imgur.com/PQJ0H.png)

[http://i.stack.imgur.com/DupM7.png](http://i.stack.imgur.com/DupM7.png)

我认为绘制等距环境的久经考验的方法只是为瓦片设置 1 层，为对象设置 1 层，然后对象永远不能位于瓦片后面，但这只是我不想遵守的限制。

所以我的问题是，当从上到下绘制整个环境（或任何其他可能的方式）时，依次绘制每个图块及其对象，是否有一种巧妙的方法来推迟对象的绘制或创建一个数组以正确的顺序绘制的对象？有没有其他人遇到过类似的问题，有没有其他人找到任何解决方案？

非常感谢所有帮助。

我的平铺代码示例：

```
// each column
for(y=0; y<totalColumns; y++){
    // each row
    for(x=0; x<totalRows; x++){
        tile = tiles[y][x];
        // draw tile
        drawTile(tile);
        objects = objects[y][x];
        // draw objects for that tile
        drawObjects(objects);
    }
} 
```

编辑：

我想到的一个解决方案（在将问题读回给自己之后）是遍历所有瓷砖，获取一组瓷砖高度，对其进行排序，然后进行传统绘图。像这样：

```
var layers = [];

for(var y=0; y<cols; y++){
    for(var x=0; x<rows; x++){
        tile = tiles[y][x];
        if(!layers.indexOf(tile.height)) layers.push(tile.height);
    }
}

// sort layers
layers.sort(/*function here to sort layers*/);

for(l=0; l<layers.length; l++){
    // draw tiles for this layer

    // draw objects for this layer

} 
```

还有其他可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T20:04:38.813

您在解决方案中做正确的事情。您想对没有 alpha 的所有内容执行此操作。

至于其他解决方案，我建议使用插入排序而不是一次又一次地重建列表。在您的情况下，更改很少，因此只需更新需要它的更改。

# jquery - Jquery Ajax周期性请求在长时间连续运行的IE中停止

> ID：13684991
> 
> 赞同：2
> 
> 时间：2012-12-03T14:09:37.687
> 
> 标签：jquery, ajax, internet-explorer-8

在我的应用程序中，我使用 jquery ajax 以大约 1 秒的间隔获取设备数据。该设备具有 wince 操作系统，网页由 httpd 网络服务器托管。在连接了 Web 客户端的情况下运行设备 2 天或更长时间后，我们可以观察到该问题。IE 状态栏显示错误“'jqXHR' is null or not an object”或'jqXHR'未定义（在 jquery-1.5.2.js 中，第 6819 行）。我还通过使用 jquery 错误函数来捕获请求错误。但是这个IE报的错误不能被error函数捕获

行号 6819 指 jquery setTimeout 处理程序，发现 ajax jqXHR 对象无效。我使用提琴手分析了这个问题，找不到任何有错误的条目。但是由于浏览器发生错误，没有进一步的请求发送。我会假设请求在 IE 中被阻止并且它没有到达服务器，因此我们看不到 fiddler 中的条目。一旦 ajax 请求中设置的超时值过去，就会执行 setTimeout 句柄。

谁能猜出 jqXHR 对象是如何变得未定义的？（此对象在应用程序代码的任何部分都不会被清除/初始化。并且在前一个请求完成后，请求是一次串行发送一个。这将确保对象不会被覆盖）

请在示例代码下方找到我的应用程序中如何发送和接收 Ajax 请求：

```
 var ajax_timeout = 10000;
            var requests = 0;
            var jqxhr_obj = null;
            var stop_ajax_reqs = 1;
            var ajax_serial_reqs = {
                "None":0,
                "SystemStatus":1,
                "ScreenData":2,
                "Complete":3
            };
            var AjaxReqIndex = ajax_serial_reqs.None;
            var REQUEST_GAP_TIME = 1000;
            var PERIODIC_TIMER_VALUE = 1500;

            function SendAjaxReq(ajaxData)
            {
                jqxhr_obj = $.ajax(
                {
                    url: 'DeviceData.asp',
                    contentType: "application/x-www-form-urlencoded;charset=utf-8",
                    global: false,
                    type: 'POST',
                    data: ajaxData,
                    dateType: "text",
                    async: true,
                    timeout: ajax_timeout,
                    cache: false,
                    beforeSend: function (){requests++;},
                    complete: function(){ requests--; },
                    success: function (data, status, xmlhttp_obj)
                    {
                        $(xmlhttp_obj.responseText).appendTo("body");
                        stop_ajax_reqs = 1;
                    },
                    error: function (xmlhttp_obj, status, error_obj)
                    {          
                        $("<p>Error: "+ status + " - "+requests+" requests active</p>").appendTo("body");       
                        stop_ajax_reqs = 1;       
                    }
                });
            }

            //Send all the requests for this cycle - initiated by setInterval shown below
            function ManageAjaxSerialReqs()
            {
                if (ajax_serial_reqs.None != AjaxReqIndex)
                {
                    //Check if the previous sent ajax request is complete
                    if ((stop_ajax_reqs == 1) && (requests == 0))
                    {
                        switch (AjaxReqIndex)
                        {
                        case ajax_serial_reqs.SystemStatus:    
                            //First request of the cycle
                            SendAjaxReq("FirstReq");
                            stop_ajax_reqs = 0;            
                            AjaxReqIndex = ajax_serial_reqs.ScreenData;
                            break;
                        case ajax_serial_reqs.ScreenData:
                            //Second request of the cycle   
                            SendAjaxReq("SecondReq"); 
                            stop_ajax_reqs = 0;                  
                            AjaxReqIndex = ajax_serial_reqs.Complete;
                            break;    
                        case ajax_serial_reqs.Complete:
                            //Wait until the cycle is complelete ((stop_ajax_reqs == 1) && (requests == 0))
                            AjaxReqIndex = ajax_serial_reqs.None;
                            break;
                        default:
                            break;
                        }
                    }
                    //Send all the requests until (ajax_serial_reqs.None == AjaxReqIndex)
                    if(ajax_serial_reqs.None != AjaxReqIndex)
                        setTimeout("ManageAjaxSerialReqs()", REQUEST_GAP_TIME);        
                }
            }

            //Periodic timer
            setInterval(function()
            {
                //....do other operation...

                //send periodic requests
                if (ajax_serial_reqs.None == AjaxReqIndex)
                {
                    AjaxReqIndex = ajax_serial_reqs.SystemStatus;
                    ManageAjaxSerialReqs();        
                }

                //....do other operation...

            }, PERIODIC_TIMER_VALUE); 
```

# java - Long.valueOf 未编译以将 int 转换为 long

> ID：13684995
> 
> 赞同：-1
> 
> 时间：2012-12-03T14:10:07.127
> 
> 标签：java, int, long-integer

查看这个问题的答案（链接：[How do I convert from int to Long in Java?](https://stackoverflow.com/questions/1302605/how-do-i-convert-from-int-to-long-in-java)），我使用以下内容将 long 值（newUpdate、lastUpdate）与 int 值（Interval）进行比较

`if ((newUpdate - lastUpdate) > Long.valueOf(interval))`

我无法编译。比较两种不同类型的正确方法是什么？

更多信息：

`[INFO] Trace org.apache.maven.BuildFailureException: Compilation failure [145,51] operator > cannot be applied to long,java.lang.Long`

间隔是类型`int`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:20:54.910

如果`interval`是一个`int`，那么就...

```
 if ((newUpdate - lastUpdate) > interval) { ... 
```

在这种情况下，没有充分的理由显式转换`interval`为 a `long`。无论如何，转换将为您完成。

该表达式`Long.valueOf(Interval)`返回 a`java.lang.Long`而不是 a `long`。如果您*需要*明确地`interval`变成 a `long`，那么您应该将其转换为：

```
 if ((newUpdate - lastUpdate) > ((long) interval)) { 
```

* * *

^(关于您的示例，唯一让我感到困惑的是，为什么在比较 a`long`和 a时会出现编译错误`Long`。`Long` *应该*自动取消装箱，并且应该使用`long`,`long`版本的`>`运算符：参考[JLS - 15.20.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.1)，它说数字关系运算符在需要时执行取消装箱。唯一的解释可能是您使用 1.4 或更早版本的源代码级别进行编译。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:18:54.550

`Long.valueOf(Interval)`重新调整包装对象，`Long`因此`>`运算符不适用。

如果`Interval`是 String 类型，则`Long.valueOf(Interval).longValue()`在您的比较中使用。

如果`Interval`是`int`类型，那么只需`Interval`在您的比较中使用。它将自动提升为`long`--> [specs](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#d5e6284)。

# asp.net - ASP.NET MVC4：自定义默认验证消息

> ID：13684997
> 
> 赞同：1
> 
> 时间：2012-12-03T14:10:11.027
> 
> 标签：asp.net, validation, asp.net-mvc-4

我在 ASP.NET MVC4 页面中自定义一些默认验证消息时遇到问题。在模型类中，我具有以下属性：

```
 [DataType(DataType.Date, ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "DateField")]
    [Required(ErrorMessageResourceType = typeof(ValidationMessages), ErrorMessageResourceName = "RequiredField")]
    public DateTime? CreationDate { get; set; } 
```

当显示`Required`属性的错误消息时，一切正常 - 从 ValidationMessages 资源文件中获取了我自己的自定义消息。但是，当验证失败时`DataType`，会显示默认验证消息。

这种行为有什么解释吗？提前致谢！

# java - Zk：如何创建具有数据绑定交互的“按需加载”树？

> ID：13684999
> 
> 赞同：2
> 
> 时间：2012-12-03T14:10:12.197
> 
> 标签：java, mvvm, tree, zk

我们想在 MVVM 模式中创建一棵树。

这棵树应该有 2 个通过参数传递的目录。目标是创建一个目录浏览器，我们希望在打开一个子项时有一个“按需加载”以获得更好的性能。

目前，我们在文档中找到了示例，但它不完整：

```
public class TreeSelectionVM {

    private TreeModel<TreeNode<String>> itemTree;
    private String pickedItem;
    //omit getter and setter for brevity
}

<window apply="org.zkoss.bind.BindComposer"
    viewModel="@id('vm') @init('org.zkoss.reference.developer.mvvm.collection.TreeSelectionVM')">
    <tree id="tree" model="@bind(vm.itemTree) " width="600px"
    selectedItem="@bind(vm.pickedItem)">
        <treecols>
            <treecol label="name" />
            <treecol label="index" />
        </treecols>
        <template name="model" var="node" status="s">
            <treeitem open="@bind(node.open)">
                <treerow>
                    <treecell label="@bind(node.data)" />
                    <treecell label="@bind(s.index)" />
                </treerow>
            </treeitem>
        </template>
    </tree>
</window> 
```

我们应该管理 onOpen 事件吗？还是我们应该实现 TreeModel 和 TreeNode 方法（getChild & co）？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:39:52.967

这是一个更完整的 zk mvvm 树示例，它类似于按需加载的目录资源管理器：

[https://github.com/simbo1905/zktreemvvm](https://github.com/simbo1905/zktreemvvm)

只需使用“git clone”检查它，然后运行它：

```
mvn -Djetty.port=8080 package jetty:run 
```

该代码将在给定端口上启动自己的码头服务器。

它使用[Apache Commons VFS](http://commons.apache.org/vfs/ "Apache Commons VFS")作为文件系统的抽象，而不是使用更难模拟和单元测试的原始 java.io.File。默认情况下，代码显示一个 ZK 屏幕来浏览 commons-vfs2-2.0.jar 的内部，就好像它是常规文件和文件夹一样。只需将 ViewModel 类中的 FILE_SYSTEM_URI uri 更改为文件位置，如“file:///some/path/”，即可查看常规文件系统。

zul 页面包含一棵树并将其模型绑定到 vm.treeModel 并将 selectedItem 事件绑定到 vm.pickedItem 方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<zk>
    <window apply="org.zkoss.bind.BindComposer"
        viewModel="@id('vm') @init('org.github.simbo1905.zktreemvvm.CommonsVfs220ViewModel')">
        <tree model="@load(vm.treeModel)" selectedItem="@bind(vm.pickedItem)">
            <treecols>
                <treecol label="name" />
                <treecol label="index" />
            </treecols>
            <template name="model" var="node" status="s">
                <treeitem>
                    <treerow>
                        <treecell label="@bind(node) @converter('org.github.simbo1905.zktreemvvm.NodeConverter')" />
                        <treecell label="@bind(s.index)" />
                    </treerow>
                </treeitem>
            </template>
        </tree>
    </window>
</zk> 
```

@Converter 对保存在树模型中的 FileObject 数据进行友好渲染。

实际的 ViewModel 并没有做太多的事情，只是保存了 selectedItem 事件处理程序（它只做日志）并提供对 TreeModel 的访问：

```
public TreeModel<FileObject> getTreeModel() {
    if (treeModel == null) {
        try {
            FileSystemManager fsManager = VFS.getManager();
            FileObject fo = fsManager.resolveFile( FILE_SYSTEM_URI );
            treeModel = new CachingVfsTreeModel(fo);
        } catch (FileSystemException e) {
            throw new IllegalArgumentException(String.format("Could not open VFS uri: %s",FILE_SYSTEM_URI),e);
        }
        }
    return treeModel;
} 
```

主要工作是在扩展 AbstractTreeModel 并定义强制方法的 VfsTreeModel 类中

```
public class VfsTreeModel extends AbstractTreeModel<FileObject> {

// __ snip __

@Override
public FileObject getChild(FileObject parent, int index) {
    log.info(String.format("%s getChild on %s with index %s", level(parent), innerName(parent), index));
    FileObject child = null;
    try {
        FileObject[] children = parent.getChildren();
        child = children[index];
    } catch (FileSystemException e) {
        throw new IllegalArgumentException(e);
    }
    return child;
}

@Override
public int getChildCount(FileObject node) {
    int childCount = 0;
    try {
        FileType type = node.getType();
        if( type == FileType.FOLDER ){
            childCount = node.getChildren().length;
        }
    } catch (FileSystemException e) {
        throw new IllegalArgumentException(e);
    }
    log.info(String.format("%s getChildCount on %s returning %s",level(node),innerName(node), childCount));
    return childCount;
}

@Override
public boolean isLeaf(FileObject node) {
    boolean isLeaf = false;
    try {
        FileType type = node.getType();
        isLeaf = (type == FileType.FILE );
    } catch (FileSystemException e) {
        throw new IllegalArgumentException(e);
    }
    log.info(String.format("%s isLeaf on %s returning %s", level(node),innerName(node), isLeaf));
    return isLeaf;
} 
```

在这个错误跟踪器中有一个建议覆盖 getPath 以防止框架进行大量其他调用来找出该信息：

[http://tracker.zkoss.org/browse/ZK-1278](http://tracker.zkoss.org/browse/ZK-1278)

该方法实现为步行到根：

```
@Override
public int[] getPath(FileObject node) {
    List<Integer> paths = new ArrayList<Integer>();
    try {
        FileObject parent = node.getParent();
        while (parent != null && parent.getType().equals(FileType.FOLDER)) {
            FileObject[] children = parent.getChildren();
            for( int index = 0; index < children.length; index++){
                FileObject c = children[index];
                if( node.equals(c)){
                    paths.add(index);
                    break;
                }
            }
            node = parent;
            parent = node.getParent();
        }
    } catch (FileSystemException e) {
        throw new IllegalArgumentException(e);
    }
    int[] p = new int[paths.size()];
    for( int index = 0; index < paths.size(); index++){
        p[index] = paths.get(p.length - 1 - index); // reverse
    }
    log.info(String.format("%s getPath on %s",level(node),innerName(node)));
    return p;
} 
```

在以下树模型文档和“海量数据”文档中，它建议缓存：

[http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/Model/Tree_Model](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/Model/Tree_Model)

[http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/Performance%20Tips/Listbox,%20Grid%20and%20Tree%20for%20Huge%20Data/Implement%20ListModel%20and%20TreeModel](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/Performance%20Tips/Listbox,%20Grid%20and%20Tree%20for%20Huge%20Data/Implement%20ListModel%20and%20TreeModel)

因此，在示例代码中，ViewModel 创建了 VfsViewModel 的缓存子类。刷新页面将创建新对象并让缓存被垃圾收集，这对于本示例来说可能已经足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:34:41.247

该文档告诉您实现自己的`TreeModel`，我也这样做；）。
请阅读[此](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/Performance%20Tips/Listbox,%20Grid%20and%20Tree%20for%20Huge%20Data/Implement%20ListModel%20and%20TreeModel)内容以获取更多信息。

## 编辑

这是一般的示例[`TreeModel`](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVC/Model/Tree%20Model)。
请记住，这只是一个一般示例，您必须实现。缓存
和部分加载你自己。

## 回复第一条评论：

ZK 的 Data-Models for `MeshElement`s 独立于 MVVM 或 MVC，
因为`model="xxx"`只是调用`setModel()`for ，`Component`
而 ZK 并不关心`xxx`表达式，只要它 eval
到 ZK 在 java 中可以找到的东西。并且模板替换了渲染器

**一个例子：**

.zul 文件

```
<window title="new page title" border="normal" apply="org.zkoss.bind.BindComposer" viewModel="@id('vm') @init('web.zk.controller.ListboxMVVM')">
        <listbox model="@load(vm.list)">
            <listhead>
                <listheader />
            </listhead>
            <template name="model">
                <listitem>
                    <listcell label="@load(each.name)" />
                </listitem>
            </template>
        </listbox>
    </window>
</zk> 
```

列表框MVVM

```
public class ListboxMVVM {

    public UsersListModel getList() {
        return new UsersListModel(10, 0);
    }
} 
```

UsersListModel 是一个实现。的`AbstractListModel`

## 回复MychaL的第二条评论

正如我之前提到的，ZK 文档的[这一部分讨论了如何实现。](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/Performance%20Tips/Listbox,%20Grid%20and%20Tree%20for%20Huge%20Data/Implement%20ListModel%20and%20TreeModel)一棵树的模型。
简而言之，

```
public Object getElementAt(int index); 
```

被调用以获取预期的内容，其中逻辑的责任，
加载或卸载以及如何缓冲您需要的东西的方式，是你的。 当读取为返回类型时
，它返回的对象可以是您喜欢的任何对象，正如您所期望的那样。 要从您的数据中生成树节点，请使用 impl。一个[渲染器](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/View/Renderer/Tree_Renderer)，它更像是 MVC 方式 ，但也适用于 MVVM，或者像上面那样编写一个模板， 你从.
`Object`

`each`
`getElementAt(int index)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:28:57.103

我尝试实现 RODTreeModel 和 RODTreeNode 以分离模型/节点端和数据端，因此如果数据 bean 实现 RODTreeNodeData 接口（其中包含两个方法 getChildren 和 getChildCount），则可以按需加载任何数据 bean

基本概念/规则是让数据bean来做，用node.getChildCount()替换node.getChildren().size()，并根据需要调用dataBean.getChildCount。尽可能晚地推迟 getChildren()。

相关文件：

[树 ROD 类和示例文件](https://github.com/benbai123/ZK_Practice/tree/master/Components/projects/Components_Practice/src/test/tree/rod)

[tree_rod_load_on_demand.zul](https://github.com/benbai123/ZK_Practice/blob/master/Components/projects/Components_Practice/WebContent/tree_rod_load_on_demand.zul)