# StackOverflow 问答 12934000-12934999

# jvectormap - jvectorMap 国家颜色

> ID：12934000
> 
> 赞同：5
> 
> 时间：2012-10-17T12:08:56.857
> 
> 标签：jvectormap

我想请查看我的来源。我有问题：我需要更改国家颜色，但是颜色：...功能对我不起作用。地图是白色的，颜色不变。

请回答。谢谢！

```
<script>
jQuery.noConflict();
jQuery(function(){
  var $ = jQuery;

  $('#focus').click(function(){
    $('#map1').vectorMap('set', 'focus', 'LT');
  });
  $('#map1').vectorMap({
    map: 'world_mill_en',
    focusOn: {
      x: 0,
      y: 0,
      scale: 1
    },
    colors:          {
                    IN:'#33250B',
                    dk:'#000FFF',
                    kp:'#33250b',
                    ir:'#3f4114',
                    iq:'#525252',
                    pk:'#654511',
                    uz:'#69681c',
                    tm:'#48470d',
                    eg:'#654906',
                    az:'#083803',
                    tj:'#410a0a',
                    kg:'#545353',
                    sy:'#654511',
                    jo:'#33250b',
                    kz:'#654511',
                    lk:'#525252',
                    US:'#000000',
                                     },
    series: {
      regions: [{
        scale: ['#C8EEFF', '#0071A4'],
        normalizeFunction: 'polynomial',

      }]
    }
  });
}) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T08:42:00.783

如果您使用 1.1.x 版本，那么您的代码应如下所示：

```
$('#map1').vectorMap({
    map: 'world_mill_en',
    focusOn: {
      x: 0,
      y: 0,
      scale: 1
    },
    series: {
      regions: [{
        values: {
            IN:'#33250B',
            dk:'#000FFF',
            kp:'#33250b',
            ir:'#3f4114',
            iq:'#525252',
            pk:'#654511',
            uz:'#69681c',
            tm:'#48470d',
            eg:'#654906',
            az:'#083803',
            tj:'#410a0a',
            kg:'#545353',
            sy:'#654511',
            jo:'#33250b',
            kz:'#654511',
            lk:'#525252',
            US:'#000000'
        }
      }]
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T03:30:35.713

bjornd 的解决方案适用于 1.1x，但请确保国家/地区代码如下大写，否则将无法正常工作。

```
series: {
  regions: [{
    values: {
        IN:'#33250B',
        DK:'#000FFF',
        KP:'#33250b',
        IR:'#3f4114',
        IQ:'#525252',
        PK:'#654511',
        UZ:'#69681c',
        TM:'#48470d',
        EG:'#654906',
        AZ:'#083803',
        TJ:'#410a0a',
        KG:'#545353',
        SY:'#654511',
        JO:'#33250b',
        KZ:'#654511',
        LK:'#525252',
        US:'#000000'
    }
  }]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T16:29:20.447

您可以根据预先确定的或动态数据设置自己的对象来填充值（只需确保它以相同的格式返回 'US':'#0000000'。注意逗号，它们可能很讨厌小恶魔！

```
series: {
    regions: [{
        values: fillData,
        attribute: 'fill'
    },
  {
      values:opacityData,
      attribute: 'fill-opacity'
  }]
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-24T17:19:36.757

```
series: {
    regions: [{
        values: {
            'IN': '#3e9d01',
            'CA': '#4b93c1'
        },
        attribute: 'fill'
    }]
}, 
```

# vb.net - 我可以让我的派生类自动使用基构造函数吗？

> ID：12934010
> 
> 赞同：8
> 
> 时间：2012-10-17T12:09:29.173
> 
> 标签：vb.net, constructor, abstract-class

我有一个有两个构造函数的抽象类。当另一个类继承这个类时，似乎我必须声明与基类中具有相同签名的构造函数。这对我来说似乎有点多余。有没有办法`Sub New(Parameter as MyClass)`在我的基类中拥有它并让它成为默认的构造函数签名，除非派生类在其定义中包含它？

**为清楚起见进行编辑**：我希望暗示我不想在调用基类的派生类中创建构造函数。我希望能够做到这一点：

```
Mustinherit Class MyBase

  Sub New(MyParam As String)

  End Sub

End Class

Class MyDerived
  Inherits MyBase

End Class 
```

现在注意到派生类不调用基类了吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-17T12:14:26.567

你的假设是错误的；您的派生类的构造函数可以具有任何签名，只要它们使用 MyBase.New 正确调用其基类的构造函数之一。这是一个完整的例子：

```
Imports System

Public Class MainClass

    Shared Sub Main()
         Dim w As New Window(5, 10)
         w.DrawWindow(  )

         Dim lb As New ListBox(20, 30, "Hello world")
         lb.DrawWindow(  )

    End Sub
End Class

 Public Class Window
     Public Sub New(ByVal top As Integer, ByVal left As Integer)
         Me.top = top
         Me.left = left
     End Sub 'New

     Public Sub DrawWindow(  )
         Console.WriteLine("Drawing Window at {0}, {1}", top, left)
     End Sub

     Private top As Integer
     Private left As Integer

 End Class

 Public Class ListBox
     Inherits Window

     Public Sub New(ByVal top As Integer, ByVal left As Integer, ByVal theContents As String)
         MyBase.New(top, left) ' 
         mListBoxContents = theContents
     End Sub 

     Public Shadows Sub DrawWindow(  )
         MyBase.DrawWindow(  ) 
         Console.WriteLine("Writing string to the listbox: {0}", mListBoxContents)
     End Sub 

     Private mListBoxContents As String 

 End Class 
```

**编辑**：您根本不需要保留或扩展基类构造函数的签名。这是有效的，例如：

```
Public Class ListBox
     Inherits Window

     Public Sub New(ByVal theContents As String)
         MyBase.New(20, 30) ' 
         mListBoxContents = theContents
     End Sub 

     'More code

 End Class 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-17T12:13:24.487

在 VB.Net 中，您使用：

`MyBase.New(args)`

在您的构造函数方法体内，构造函数/方法签名上没有使用额外的措辞。

# delphi - 使用大型 TObjectList 并释放未使用的部分

> ID：12934015
> 
> 赞同：8
> 
> 时间：2012-10-17T12:09:41.273
> 
> 标签：delphi, tobjectlist

我正在使用 TObjectList (Delphi 2007) 来存储大量数据——我希望有大约 30 万个元素甚至更多。但是，当创建一个列表时，它的默认大小设置为仅存储四个元素，如果尝试添加第五个元素则为八个，如果尝试添加第九个元素则为十六个，依此类推。数字可能不对，但我认为工作是正确的。这样做的问题是所有元素都必须从内存的释放部分复制到新扩展列表迁移的新内存块。我想设置一个特定的初始大小并取消分配（或撤消内存的保留，因为保留和分配不是一回事）列表已分配/保留的任何未使用空间。这可能不是很多代码，但我认为应该有一个永久的，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T12:24:09.403

将 设置为`Capacity`您期望的最大元素数，填充列表，然后将 设置`Capacity`为您实际使用的元素（可选）。这避免了所有分配/移动/分配/移动的东西。

```
MyList.Capacity := 300000;
// Add 280000 items here

// Optionally, reduce the capacity. It's not important to do so unless
//  you end up with a lot of unused items.
MyList.Capacity := MyList.Count; 
```

# set - 知道一个集合有多少个元素吗？

> ID：12934017
> 
> 赞同：3
> 
> 时间：2012-10-17T12:09:50.513
> 
> 标签：set, pascal, freepascal, standard-library

我正在用 Pascal 编程，我试图找出标准库中是否有任何已经创建的函数/过程或类似的函数可以让我知道一个集合有多少元素？

我知道如何通过使用 for 循环和计数器在找到一个元素时增加 +1 来做到这一点（类似于当你想打印一个集合时必须做的事情），但我想知道是否还有其他更简单的方法这样做，就像我说的，一些预定义的标准功能/程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:56:48.017

如果您的集合是 1、2、4 或 8 字节，则可以使用最近引入的 popcnt 内在函数。

此内在函数在系统中，但仅在主干（2.7.1）中

```
function PopCnt(Const AValue: Byte): Byte;[internproc:fpc_in_popcnt_x];
function PopCnt(Const AValue: Word): Word;[internproc:fpc_in_popcnt_x];
function PopCnt(Const AValue : DWord): DWord;[internproc:fpc_in_popcnt_x];
function PopCnt(Const AValue : QWord): QWord;[internproc:fpc_in_popcnt_x]; 
```

原因可能必须更多地寻求加速加密/压缩算法，而不是经典集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:16:32.933

不是标准帕斯卡，不是。许多实现有一个非标准的添加；例如，GNU Pascal 具有以下功能`Card`（“cardinality”的缩写）：[http](http://www.gnu-pascal.de/gpc/Card.html#Card) ://www.gnu-pascal.de/gpc/Card.html#Card 。

**编辑**我看到这被标记为 Free Pascal，并且根据[这个页面](http://community.freepascal.org/bboards/message?message_id=757933&forum_id=24082)，它缺少这样的添加。您必须循环增加一个计数器的集合。至少您只需要遍历集合中实际的元素，而不是遍历所有可能性并检查每个可能性是否存在......

# oracle - 流畅的nhibernate中的pl/sql存储过程

> ID：12934019
> 
> 赞同：1
> 
> 时间：2012-10-17T12:09:51.960
> 
> 标签：oracle, stored-procedures, plsql, fluent-nhibernate

我正在使用流利的 nhibernate，我不能使用存储过程并执行它。

我试过了：

```
Session.GetNamedQuery("Select_All_Question_Groups"); 
```

和：

```
const string sql = "EXEC [dbo].[Stored_Procedure_Name] @PortalId=:PortalId";
return _session.CreateSQLQuery(sql).SetInt32("PortalId", portalId) 
```

* * *

```
const string sql = "call [dbo].[Stored_Procedure_Name] @PortalId=:PortalId";
return _session.CreateSQLQuery(sql).SetInt32("PortalId", portalId) 
```

* * *

```
const string sql = "EXEC [dbo].[Stored_Procedure_Name](PortalId=:PortalId)";
return _session.CreateSQLQuery(sql).SetInt32("PortalId", portalId) 
```

但这些选项都不起作用。当我使用 session.GetNamedQuery() 时，我收到该过程不存在的错误。在其他选项中没有错误，但程序不会改变任何东西。

# javascript - 使用嵌入源获取 Vimeo Id -- JavaScript/Jquery

> ID：12934034
> 
> 赞同：0
> 
> 时间：2012-10-17T12:10:48.840
> 
> 标签：javascript, jquery, regex, vimeo

我想使用其嵌入源获取**Vimeo视频的 ID。**

我想要它在**JavaScript**或**jQuery**中。

我正在使用下面的代码在**PHP**中做同样的事情。

```
preg_match('/player\.vimeo\.com\/video\/([0-9]*)/', $embed, $match);

$vid = $match[1]; 
```

上面的工作正常。是否可以在 javascript 中使用上述正则表达式？

这是一个示例 vimeo 嵌入源 -

```
<iframe src="http://player.vimeo.com/video/51478122?title=0&amp;byline=0&amp;portrait=0&amp;color=fcfcfc" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> <p><a href="http://vimeo.com/51478122">Dum Spiro - HD (ESMA 2012)</a> from <a href="http://vimeo.com/dumspiro">Dum Spiro</a> on <a href="http://vimeo.com">Vimeo</a>.</p> 
```

我想从中提取`51478122`。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:15:06.673

当然，JavaScript 也支持正则表达式 >>

```
var match = embed.match(/player\.vimeo\.com\/video\/([0-9]*)/); 
```

[jsfiddle.net/XUDBL](http://jsfiddle.net/XUDBL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:39:33.430

根据您的要求，我正在从 Iframe 获取 src 并提取 Vimeo 视频 ID。使用 jQuery 解决

请看一看。

**演示**

[http://jsfiddle.net/saorabhkr/XKvY6/1/](http://jsfiddle.net/saorabhkr/XKvY6/1/)

# java - 如何根据显示器大小调整桌面应用程序的大小

> ID：12934041
> 
> 赞同：0
> 
> 时间：2012-10-17T12:11:23.370
> 
> 标签：java, swing

> **可能重复：**
> [Java 应用程序自动调整大小以适应屏幕分辨率](https://stackoverflow.com/questions/10709561/java-application-automatically-resize-to-fit-screen-resolution)

我必须使用 Java Swing 创建一个桌面应用程序。它在大屏幕显示器（18.5 英寸）上运行良好。

我想减小窗口的大小，但现在控件重叠，一些控件隐藏了其他控件，我将如何处理我的代码以动态使用大屏幕（18.5 英寸）和小屏幕（14 英寸）？

我处理了所有屏幕的布局，但屏幕将正确显示……只有控件相互重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:58:17.517

要回答您的一个问题，您可以通过以下调用获取窗口边界，不包括任务栏。

```
Rectangle w = GraphicsEnvironment.getLocalGraphicsEnvironment()
            .getMaximumWindowBounds(); 
```

要回答您没有提出的问题，您**必须**为您的 GUI使用[Swing 布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，以便从一种显示器尺寸缩放到另一种显示器尺寸。

# git - Git：父提交比后代更年轻？

> ID：12934044
> 
> 赞同：5
> 
> 时间：2012-10-17T12:11:34.040
> 
> 标签：git

我正在浏览[http://arago-project.org/git/projects/linux-omap3.git](http://arago-project.org/git/projects/linux-omap3.git) repo 并遇到了一个奇怪的日期问题，它基本上说父提交比它的孩子小一岁。

这怎么可能？

```
user@ubuntu1004:/f/linux-omap3$ git log -2 --parents  4b8db3b
commit 4b8db3b368f5601717e3ffee0051628ba33172d3 3c0eee3fe6a3a1c745379547c7e7c904aa64f6d5
Author: Kevin Hilman <khilman@deeprootsystems.com>
Date:   Fri Aug 20 11:19:52 2010 -0700

    OMAP: bus-level PM: enable use of runtime PM API for suspend/resume

    [...skipped...]

    Cc: Rajendra Nayak <rnayak@ti.com>
    Signed-off-by: Kevin Hilman <khilman@deeprootsystems.com>

commit 3c0eee3fe6a3a1c745379547c7e7c904aa64f6d5 65f42886e24be2197b1263f138eabf40c6774d00
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Tue Jan 4 16:50:19 2011 -0800

    Linux 2.6.37 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T09:21:33.450

如评论中所述：

*   你把任何你想要的时间戳放在提交上：“ [git commit - setting timestamps into the future](https://stackoverflow.com/questions/367262/git-commit-setting-timestamps-into-the-future) ”
*   您可以修改提交的时间戳：“[如何在 Git 中更改旧提交的时间戳？](https://stackoverflow.com/questions/454734/how-can-one-change-the-timestamp-of-an-old-commit-in-git) ”
*   您正在处理两个日期：`GIT_AUTHOR_DATE`和`GIT_COMMITER_DATE`：请参阅[在 Git 中使用日期](https://stackoverflow.com/questions/2973996/git-rebase-without-changing-commit-timestamps)。

您看到的可能是以下结果：

*   rebase，因为`git rebase`默认情况下实际上不会更改作者的时间戳：请参阅“ [git rebase without changed commit timestamps](https://stackoverflow.com/questions/2973996/git-rebase-without-changing-commit-timestamps) ”。
*   [樱桃采摘](http://git-scm.com/docs/git-cherry-pick)（由[迈克尔安德森](https://stackoverflow.com/users/221955/michael-anderson)[评论](https://stackoverflow.com/questions/12934044/git-parent-commit-is-younger-than-descendant/12951228#comment17556377_12951228)），因为它还保留`GIT_AUTHOR_DATE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:24:29.947

公认的答案在技术上更具洞察力，但我只是补充一下这实际上是如何发生在我身上的。我正在调试一个受本地计算机日期影响的问题，并且正在积极更改我的系统时钟以追踪错误。修复它后，我将所有内容提交给 git，却不知道我的系统时钟仍设置在 2 个月后，从而搞砸了我的 git 历史，因为几天后我才注意到提交在 Github 中出现乱序（d'oh！ ）。这应该是可以[修复](https://stackoverflow.com/questions/12357708/what-is-the-safest-way-to-correct-the-date-of-a-future-dated-commit-in-git-and)的，虽然我还没有尝试过。

# spring - 使用 @ResponseBody 注释时空值作为空字符串

> ID：12934045
> 
> 赞同：3
> 
> 时间：2012-10-17T12:11:34.800
> 
> 标签：spring, spring-mvc, jackson

有没有办法使用`@ResponseBody`注释将空值映射到空字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T12:55:16.467

您将不得不编写一个自定义 Jackson Serializer - 一个很好的例子在这里 - [http://wiki.fasterxml.com/JacksonHowToCustomSerializers](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)（有一个具体的例子说明如何将空值转换为您可以使用的空字符串）

以下是所有步骤（对于 Jackson < 2.0）：

编写您的自定义空序列化程序：

```
import java.io.IOException;

import org.codehaus.jackson.JsonGenerator;
import org.codehaus.jackson.JsonProcessingException;
import org.codehaus.jackson.map.JsonSerializer;
import org.codehaus.jackson.map.SerializerProvider;

public class NullSerializer extends JsonSerializer<Object> {

    @Override
    public void serialize(Object value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {
        jgen.writeString("");
    }
} 
```

向 Jackson Objectmapper 注册：

```
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.ser.StdSerializerProvider;

public class CustomObjectMapper extends ObjectMapper{
    public CustomObjectMapper(){
        StdSerializerProvider sp = new StdSerializerProvider();
        sp.setNullValueSerializer(new NullSerializer());
        this.setSerializerProvider(sp);
    }

} 
```

使用 Spring MVC 注册这个 objectmapper：

```
<mvc:annotation-driven> 
   <mvc:message-converters register-defaults="true">
       <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
           <property name="objectMapper">
               <bean class="CustomObjectMapper"/>
           </property>
       </bean>
   </mvc:message-converters>
</mvc:annotation-driven> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-18T04:58:16.413

我在我的项目中也遇到了同样的问题，因此我很快就想出了一个解决方案。这篇文章肯定会帮助所有在同一问题上苦苦挣扎的人。

第 1 步：- 创建您的自定义 Null 处理程序序列化程序。

```
public class NullSerializer extends StdSerializer<Object> {

    public NullSerializer(Class<Object> t) {
       super(t);
    }

    public NullSerializer() {
      this(null);
    }

    @Override
    public void serialize(Object o, com.fasterxml.jackson.core.JsonGenerator jsonGenerator, com.fasterxml.jackson.databind.SerializerProvider serializerProvider) throws IOException {
       jsonGenerator.writeString("");
    }
   } 
```

第 2 步：- 创建 MappingJackson2HttpMessageConverter 的 bean。

```
@Bean
@Primary
public MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() {

    MappingJackson2HttpMessageConverter jsonConverter = new MappingJackson2HttpMessageConverter();
    ObjectMapper mapper = new ObjectMapper();
    mapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);
    mapper.getSerializerProvider().setNullValueSerializer(new NullSerializer());
    jsonConverter.setObjectMapper(mapper);
    return jsonConverter;

} 
```

感谢您抽出时间阅读这篇文章。我希望这能够在一定程度上解决您的疑问。

# silverlight - Silverlight 从代码中引用 XAML

> ID：12934055
> 
> 赞同：0
> 
> 时间：2012-10-17T12:12:21.013
> 
> 标签：silverlight, xaml

在 Silverlight5 中，如何从 button_click 事件中引用用户控件资源 - 表情？

如果我在代码中构建它然后以这种方式进行数据绑定，我可以很好地访问该对象，但是使用 XAML 方法我得到了一些更好的工具。示例[来自](http://www.manning.com/pbrown2/)Ch16

```
private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            // **HERE how do I reference the XAML emoticon object

            //emoticon.Name = "Smiley face2";
            //emoticon.Icon = new BitmapImage(new Uri("icons/happy.png", UriKind.RelativeOrAbsolute));
        } 
```

.

```
<UserControl x:Class="EmoticonExample.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:EmoticonExample"
             mc:Ignorable="d"
             d:DesignHeight="300"
             d:DesignWidth="400">
    <UserControl.Resources>
        <local:Emoticon x:Key="emoticon"
                        Name="SmileyFace"
                        Icon="icons/happy.png" />
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot"
          Margin="10"
          Background="White"
          DataContext="{StaticResource emoticon}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <TextBlock Text="Name:" />
        <TextBlock Text="Image:" Grid.Column="1" />

        <TextBox Name="myTextBox" Text="{Binding Name, Mode=TwoWay}" Grid.Row="1" />
        <Image Name="myImage" Source="{Binding Icon}" Stretch="None" Grid.Row="1" Grid.Column="1" />

        <Button Content="Button" HorizontalAlignment="Left" Margin="10,116,0,-92" Grid.Row="1" VerticalAlignment="Top" Width="75" Click="Button_Click_1"/>
    </Grid>

</UserControl> 
```

![在此处输入图像描述](../Images/3dbfb709929910ef94fc0adb21800f57.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:21:30.607

命名您的用户控件

```
<UserControl x:Class="EmoticonExample.MainPage" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:local="clr-namespace:EmoticonExample" 
             mc:Ignorable="d" 
             x:Name="Example"
             d:DesignHeight="300" 
             d:DesignWidth="400"> 

</UserControl 
```

然后在后面的代码中引用它：

```
var emoticon = Example.Resources["emoticon"] as Emoticon; // Im not sure of your data type 
```

# java - 使用 Maven ScmProvider.list 方法时，破折号转换为连字符

> ID：12934060
> 
> 赞同：0
> 
> 时间：2012-10-17T12:12:39.360
> 
> 标签：java, maven-scm, collabnet

Java 中的文件对象不支持字符破折号“-”（unicode `\u2013`）。它会自动将破折号字符转换为连字符“-”（unicode `\u002D`）。

我正在使用[ScmProvider.list](http://maven.apache.org/scm/apidocs/org/apache/maven/scm/provider/ScmProvider.html#list%28org.apache.maven.scm.repository.ScmRepository,%20org.apache.maven.scm.ScmFileSet,%20boolean,%20org.apache.maven.scm.ScmVersion%29)方法：

```
ListScmResult list(ScmRepository repository, ScmFileSet fileSet, 
                      boolean recursive, ScmVersion version) 
```

> 列出存储库中存在的 fileSet 的每个元素（文件和目录）。

在文件集中，其中一项（SCM 文件）将带有短划线的 repo 项替换为普通连字符。

我正在使用 Java 1.6 版。这有什么限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:23:50.857

您的意思是您认为这会`java.io.File`自动将字符`\u2013`转换为常规连字符（代码`\u002D`）吗？这不是真的，至少在我运行 Oracle Java 6 update 35 的 Windows 7 机器上不是这样。

我尝试了以下代码。它创建两个文件，具有不同的文件名；一个带有长破折号，一个带有常规破折号。

```
new File("C:\\Temp\\Hello\u2013World").createNewFile();
new File("C:\\Temp\\Hello-World").createNewFile(); 
```

因此，无论您看到什么，都不是由`java.io.File`.

# c# - 使用 c# 和 WMI 计算客 户端的打印页数

> ID：12934063
> 
> 赞同：2
> 
> 时间：2012-10-17T12:12:50.467
> 
> 标签：c#, printing, wmi

目标就像我在主题中所说的那样。我知道有很多关于这个特定问题的文章，我尝试了所有这些文章。但是由于它们都不适合我，我现在正试图找出为什么这个有时会起作用**，**有时什么都没有发生，尽管打印了很多东西。所以这是我的代码，现在应该等待打印作业，然后告诉我。而已。

```
private void StartMonitor()
    {

        try
        {
            var opt = new ConnectionOptions { EnablePrivileges = true };

            var scope = new ManagementScope("root\\CIMV2", opt);

            scope.Connect();

            var query = new WqlEventQuery("SELECT * FROM __InstanceOperationEvent WITHIN 60 WHERE TargetInstance ISA \"Win32_PrintJob\"");

            var watcher = new ManagementEventWatcher(query);

            Console.WriteLine("Ready to receive Printer Job events...");

            var pjEvent = watcher.WaitForNextEvent();

            if (pjEvent != null) Console.WriteLine("Event occured: " + pjEvent.Properties["PagesPrinted"]);
        }
        catch (ManagementException e)
        {
            Console.WriteLine(e.StackTrace);
            Console.WriteLine(e.ErrorCode);
            Console.WriteLine(e.ErrorInformation);
            _Error = e.Message;
            throw;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:47:13.690

要获得作业打印的总页数，我会尝试监视 __InstanceDeletionEvents，我相信那时 Win32_PrintJob.TotalPages 应该准确地显示打印的页面（现在无法测试，抱歉）。这里还有一个不错的选择：

[从 VB.NET 监视打印机队列](http://www.codeproject.com/Articles/3313/Monitoring-a-Printer-Queue-from-VB-NET)

如果你看文章评论，作者还建议监视 JOB_WRITTEN 事件以获取打印的总页数。

如果您尝试监控大型打印作业的进度，请在创建作业后尝试监控 __InstanceModificationEvents，如下所示：

```
Select * From __InstanceModificationEvent Within 1 
Where TargetInstance Isa "Win32_PrintJob" 
And TargetInstance.PagesPrinted > PreviousInstance.PagesPrinted 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:11:00.067

要获取特定作业的打印页面进度，请尝试使用较小的轮询间隔并使用[`EventArrivedEventHandler`](http://msdn.microsoft.com/en-us/library/system.management.eventarrivedeventhandler.aspx)附加到 WMI 事件的委托以异步方式处理传入数据。

试试这个样本。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    public class EventWatcherAsync 
    {
        private void WmiEventHandler(object sender, EventArrivedEventArgs e)
        {
            Console.WriteLine("TargetInstance.Caption :         " + ((ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value)["Caption"]);
            Console.WriteLine("TargetInstance.JobStatus :       " + ((ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value)["JobStatus"]);
            Console.WriteLine("TargetInstance.PagesPrinted :    " + ((ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value)["PagesPrinted"]);
            Console.WriteLine("TargetInstance.Status :          " + ((ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value)["Status"]);

        }

        public EventWatcherAsync()
        {
            try
            {
                string ComputerName = "localhost";
                string WmiQuery;
                ManagementEventWatcher Watcher;
                ManagementScope Scope;   

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);
                Scope.Connect();

                WmiQuery ="Select * From __InstanceOperationEvent Within 1 "+
                "Where TargetInstance ISA 'Win32_PrintJob' ";

                Watcher = new ManagementEventWatcher(Scope, new EventQuery(WmiQuery));
                Watcher.EventArrived += new EventArrivedEventHandler(this.WmiEventHandler);
                Watcher.Start();
                Console.Read();
                Watcher.Stop();
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception {0} Trace {1}", e.Message, e.StackTrace);
            }

        }

        public static void Main(string[] args)
        {
           Console.WriteLine("Listening {0}", "__InstanceOperationEvent");
           Console.WriteLine("Press Enter to exit");
           EventWatcherAsync eventWatcher = new EventWatcherAsync();
           Console.Read();
        }
    }
} 
```

# mysql - 学说 2.2 双重类型的幂

> ID：12934064
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:12:51.273
> 
> 标签：mysql, doctrine-orm

在实体存储库中：

```
$qb = $this->createQueryBuilder('c');
//....
$qb->addSelect('POWER('.$qb->expr()->abs(
                $qb->expr()->diff('c.latitude', $filter['latitude'])
            ).',2) AS ddst';
//....
return $qb->getQuery(); //to Pagerfanta with DoctrineORMAdapter 
```

错误：

```
QueryException: [Syntax Error] line 0, col 11: Error: Expected known function, got 'POWER'

QueryException: SELECT c, (POWER(ABS(c.delivery_latitude - 47.227163),2) AS ddst 
FROM MyEntity c ORDER BY ddst ASC, c.created_at DESC (this is dql error) 
```

有什么不对？Dql 不支持 POWER。我没有在 qb-expressions 中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:40:10.623

而且......也许它会对某人有所帮助。回答：

```
//app/config/config.yml

doctrine:
    dbal:
        #.....    
    orm:
        auto_generate_proxy_classes: %kernel.debug%
        # auto_mapping: true #comment this line if isset
        entity_managers:
            default:
                auto_mapping: true #from orm to here or custom mapping
                dql:
                    numeric_functions:
                        power: Acme\MyBundle\DQL\PowerFunction #or power_num: ... it's an identifier 
```

src/Acme/MyBundle/DQL/PowerFunction.php：

```
<?php
namespace Acme\MyBundle\DQL;

use Doctrine\ORM\Query\Lexer;

class PowerFunction extends \Doctrine\ORM\Query\AST\Functions\FunctionNode
{
    public $numberExpression = null;
    public $powerExpression = 1;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        //Check for correct
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->numberExpression = $parser->ArithmeticPrimary();
        $parser->match(Lexer::T_COMMA);
        $this->powerExpression = $parser->ArithmeticPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'POWER(' .
            $this->numberExpression->dispatch($sqlWalker) . ', ' .
            $this->powerExpression->dispatch($sqlWalker) . ')';
    }
} 
```

并使用（在 MyEntityRepository 中）：

```
$qb = $this->createQueryBuilder('c');
//some code
$qb->addSelect('power('.$yourNumber.',2) AS powered_num');
//'power' must be in lowercase!!!; if idetifier in config for example, 'power_num', then write 'power_num($yournumber,2)'

//some code ...

return $qb->getQuery(); //or getResult() 
```

完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-08T10:25:16.087

由于这个Bundle，我解决了同样的问题：

[https://github.com/orocrm/doctrine-extensions](https://github.com/orocrm/doctrine-extensions)

以下是处理方法。

1）安装库：

```
composer require oro/doctrine-extensions 
```

2) 将 DQL 函数添加到您的学说配置中：

```
doctrine:
    orm:
        dql:
            numeric_functions:
                pow: Oro\ORM\Query\AST\Functions\Numeric\Pow 
```

就这样。

现在 Doctrine 知道如何处理 SQL POW 函数了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:54:13.427

DQL 不是 SQL。它不支持很多比较晦涩的 SQL 函数，比如 POWER。

如果需要，您可以创建本机 SQL 查询。有关更多信息，请参阅此文档：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html)

# cakephp - 无法让 Cake PHP JsHelper 工作

> ID：12934072
> 
> 赞同：0
> 
> 时间：2012-10-17T12:13:27.383
> 
> 标签：cakephp, cakephp-2.0

我似乎在第一个障碍上就被打败了，我似乎无法在蛋糕 PHP 中得到一个基本的“Hello world”。

在 /app/Controller/MyController.php 我有：

```
public $helpers = array('Js' => array('Jquery'), 'Html', 'Form');
public $components = array('RequestHandler'); 
```

在 /app/View/Layouts/default.ctp 我有：

```
echo $this->Html->script('//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js');
echo $this->fetch('script');        
echo $this->Js->writeBuffer();
?></head> 
```

在 /app/View/My/index.ctp 我有：

```
$this->Js->alert('HelloWorld'); 
```

但我没有收到任何警报！如果我尝试：

```
echo $this->Js->alert('HelloWorld'); 
```

它打印到浏览器：（双引号而不是键入的单引号！？）

```
alert("HelloWorld"); 
```

但不包含在 < script > 标签甚至 $(document).ready(function(){});

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:23:07.673

普遍的共识是不要打扰使用 JsHelper，并且无论如何都可能在 Cake 3 中被删除。

我会放在`echo $this->Js->writeBuffer();`前面`</body>`

我不确定确切的工作原理，但我*认为*你的 JS 正在使用，`echo`因为它在你的中间输出`view`，所以当页面加载时，它是`alerts`. （JS 将在您的 HTML 输出的中间）而不是在`<head>`或之前`</body>`

在`writeBuffer`处理视图文件之前被调用；所以你的`view`js 不会被添加到缓冲区中。然而，我可能是不正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:50:24.833

老实说，JsHelper 毫无用处。我什至没有正确地打扰它，我只是像往常一样在我的网站中包含 JavaScript，但使用 Cake 的方法将其保留在框架内。

示例布局将包含 jQuery，`<head>`如下所示：

**应用程序/视图/布局/default.ctp**

```
<head>

<?php
    // Include jQuery
    echo $this->Html->script('jquery-1.8.2.min');

    // Want to send some glabal values to your scripts?
    $this->Js->set(array(
        'TEST' => 'Hello World',
        'ROOT' => $this->Html->url( '/', true)
    ));
    echo $this->Js->writeBuffer(array('onDomReady' => false));

    // Include any other scripts you've set
    echo $this->fetch('script');
?>

</head> 
```

然后在您看来，您可能希望包含该页面的特定脚本：

**应用程序/视图/页面/test.ctp**

```
<?php echo $this->Html->script('test.js'); ?> 
```

您只需像往常一样将所有 JavaScript 保存在外部脚本中：

**应用程序/webroot/js/test.js**

```
$(document).ready(function() {

    /**
     * Alert the value we set in our layout.  All JS vars that have been
     * set are available in your JavaScript via the window.app object.
     */
    alert(window.app.TEST + ' sent from ' + window.app.ROOT);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:15:09.467

在每个 ctp 文件的末尾设置写缓冲区，它应该可以工作

# jquery - document.ready 和 ajax

> ID：12934079
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:13:49.927
> 
> 标签：jquery, document-ready

假设我使用此代码，并且我想在 ajax 调用后更改它（例如更改 fx）。

```
$(document).ready(function() {

    $('.slideshow').cycle({
      fx: 'fade' ,
      timeout: 1500
    });

}} 
```

可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:19:44.587

如果该`.cycle()`方法允许您使用新参数再次调用它，您可以使用以下内容：

```
$.ajax(
  ...
  // do your ajax stuff here
  ...
).done(function() {
    $('.slideshow').cycle({ fx: 'newfx', timeout: 500} );
}); 
```

这将在 AJAX 调用之后执行，与结果无关。如果您只希望它在**成功**的AJAX 调用后执行，请使用

```
$.ajax(
  ...
  // do your ajax stuff here
  ...
  .success (function() {
    // do other stuff here, if necessary
    $('.slideshow').cycle({ fx: 'newfx', timeout: 500} );
 }); 
```

# node.js - 是否可以检查 Mongoose 模式以确定是否需要某个字段？

> ID：12934080
> 
> 赞同：3
> 
> 时间：2012-10-17T12:13:54.320
> 
> 标签：node.js, mongoose

我有一个猫鼬模式（摘录如下）：

```
var PersonSchema = new Schema({
  name : { 
      first: { type: String, required: true } 
    , last: { type: String, required: true }   
  } 
  ... 
```

我想检查架构以确定哪些字段是必需的，然后验证这些字段是否存在于用户输入中。我可以测试 name.first 的“必需”属性，如下所示：

```
var person_schema = require('../models/person');

if (person_schema.schema.paths['name.first'].isRequired) {
  req.assert('first', messages.form_messages.msg_required).notEmpty(); 
```

但是感觉这是不安全的，因为内部架构细节可能会改变。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:50:44.583

Mongoose 会为您进行此类验证。[http://mongoosejs.com/docs/validation.html](http://mongoosejs.com/docs/validation.html)。

# spring - 如何在 jstl|form 中读取已经存在的 bean？

> ID：12934086
> 
> 赞同：0
> 
> 时间：2012-10-17T12:14:12.083
> 
> 标签：spring, spring-mvc, jstl, modelattribute

我有 SpringMVC 的简单表单，我想通过 pbid 检索我已经拥有的 bean。问题是服务器端我可以得到已经设置的bean，但是jsp端总是得到新的bean。我可以使用 @ModelAttribute("productbean") 接收一些参数来获取服务器端的 bean 存储吗？怎么做？jstl|form 似乎总是得到新的形式

```
<form:form method="post" modelAttribute="productbean" action="">
<table>

    </tr>

    <tr>
        <td width="118"><form:label for="name" path="name" > Production Name:</form:label></td>
        <td colspan="2"><form:hidden path="pbid"/><form:input path="name" type="text" size="50" /></td>
    </tr>
... 
```

我的控制器是这样的：

```
@RequestMapping(value="/createproduct", method=RequestMethod.GET)
public  String getProduct(HttpServletRequest req, Model model, 
        @RequestParam(value = "pbid", required = false, defaultValue = "") String spbid) throws MalformedURLException {
    UUID pbid;
    if(spbid.isEmpty())pbid=UUID.randomUUID();
    else pbid=UUID.fromString(spbid);
    ProductBean tmp;
    if(!products.containsKey(pbid)){
        tmp=createbean();
        pbid=tmp.getPbid(); 
        System.err.println("============new productbean===============\n");
    }else{
        tmp=products.get(pbid);
        System.err.println(tmp.getMpf().size());
        System.err.println(tmp.getMpf().printFileNameList());
    }
 .....

@ModelAttribute("productbean")
public ProductBean createbean(){
    ProductBean productbean=new ProductBean(context.getRealPath(filepath));
    products.put(productbean.assignID(), productbean);
    return productbean;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:41:08.717

在类上添加会话属性注释

```
@SessionAttributes("productbean")
@controller
public class test() {
} 
```

# c# - 在 caliburn micro 的操作中传递枚举作为参数

> ID：12934090
> 
> 赞同：5
> 
> 时间：2012-10-17T12:14:24.837
> 
> 标签：c#, .net, wpf, caliburn.micro

如何在消息操作中传递枚举？例如，

XAML：

```
<UserControl.ContextMenu>
    <ContextMenu StaysOpen="True">
        <MenuItem Header="Arrow"
                  cal:Message.Attach="ChangeArrowType(LogicArrowEnum.ARROW)"/>
     .... 
```

视图模型：

```
public void ChangeArrowType(LogicArrowEnum arrowType)
{
    MessageBox.Show(arrowType); //arrowType is empty!

}

public enum LogicArrowEnum
{
    ARROW = 1,
    ASSIGN = 2,
    IF = 3,
    IF_ELSE = 4
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T06:24:42.930

您只需要将[Enum 值作为 a`string`](https://caliburnmicro.com/documentation/actions#enum-values)传递：

```
<MenuItem Header="Arrow" cal:Message.Attach="ChangeArrowType('ARROW')"/> 
```

# javascript - 使用 TypeScript 在 JavaScript 中关闭真正的私有字段

> ID：12934094
> 
> 赞同：1
> 
> 时间：2012-10-17T12:14:29.437
> 
> 标签：javascript, closures, typescript

我正在尝试用 TypeScript 重写我的一个有用的 JavaScript 类。在我的 JavaScript 类中，我使用闭包变量 self 来实现私有字段。它在事件处理程序中很有用，例如`onkeypress`，了解事件的调用者和我的类的当前实例很重要。

```
var MyClass = function (valueHolder) {
            var self = this;
            this.valueHolder = valueHolder;

            MyClass.prototype.DoUsefullactions = function (value) {
                alert(value);
            }

            MyClass.prototype.onclickForHolder = function (e) {
                var value = $(this).val(); //value from attached input
                self.DoUsefullactions(value);
            }

            MyClass.prototype.GetSelf = function () {
                return self;
            }

            this.valueHolder.onclick = this.onclickForHolder;
        } 
```

我找不到**如何在没有 TypeScript 语法的情况下使类的所有方法都可用的闭包变量，`this.self`并以 JavaScript 方式创建真正的私有成员。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:06:39.073

有一个替代的函数语法。只需使用：

```
MyClass.prototype.onclickForHolder = e => {
    var value = $(e.target).val(); //value from attached input
    this.DoUsefullactions(value);
} 
```

`this`将引用外部`this`，TypeScript 将在幕后添加一个自类型变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:36:18.393

尝试

```
 MyClass.prototype.onclickForHolder =(ev:Event) =>this.DoUsefullactions(this,ev); 
```

# joomla2.5 - 如何在我的菜单项中使用模块

> ID：12934095
> 
> 赞同：0
> 
> 时间：2012-10-17T12:14:37.407
> 
> 标签：joomla2.5

我有一个用于搜索位置的自定义模块。现在我想将此模块放入菜单项内容页面之一。我正在使用 joomla 2.5。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:34:19.893

我已经通过使用`{loadposition}`方法解决了

要将模块用于您的内容页面，请转到`extension manager->plugin manager`。然后搜索`Content - Load Modules`插件启用它（如果禁用）。然后将样式设置为`no wrapping(raw output)`.

然后到您的文章管理器并在您要显示模块的位置插入此行

```
{loadposition myposition} //where myposition is the position of your module 
```

# javascript - 移动浏览器 + 聚焦时删除输入字段值文本突出显示？

> ID：12934096
> 
> 赞同：2
> 
> 时间：2012-10-17T12:14:48.550
> 
> 标签：javascript, html, css

我有一个带有一个输入字段的简单表单。我通过 javascript inputID.focus() 将此字段设置为焦点。在某些 android 设备（和浏览器用户代理）中进行测试时，我注意到输入值在获得焦点时具有蓝色背景色。我已经尝试了很多东西，但似乎无法删除这个突出显示。有什么建议么？以下是我尝试过的：

![在此处输入图像描述](../Images/c4255489b91eaee24a0745f54116dbbb.png)

**CSS：**

```
input { width: 200px; height: 24px; border: 1px solid #999; border-radius: 5px; font: Verdana, Geneva, sans-serif; color: #666; padding: 2px; font-size: 12pt; margin-bottom: 10px; background-color: #fff !important; }
input[type=text]:focus{ border:1px solid #090; backface-visibility:hidden !important; background-color:#fff !important; -webkit-tap-highlight-color:#fff !important; -webkit-backface-visibility:hidden !important; text-decoration:none; }
input::selection { background-color:#fff; color:#fff; }
input::-moz-selection { background-color:#fff; color:#fff; }
input::-webkit-input-placeholder {background-color:#fff; color:#fff;}
input:-moz-placeholder {background-color:#fff; color:#fff;} 
```

**HTML：**

```
<input id="ducks" type="text" value="quack quack quack mr.duckworth" readonly=""> 
```

**Javascript：**

```
var inputBox = document.getElementById('ducks');
inputBox.focus(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:19:07.347

嗯，看起来像在聚焦时选择了整个输入内容。您可以尝试将插入符号放在输入字段的末尾，将此 onfocus 分配给您的输入字段

```
onfocus="this.value = this.value;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:10:45.417

哦，所以我只需要在 input:focus 选择器上设置用户选择：

**CSS：**

```
input[type="text"]:focus { 
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
} 
```

# wpf - 我应该为每个 WPF 窗口创建单独的引导程序吗？

> ID：12934100
> 
> 赞同：2
> 
> 时间：2012-10-17T12:14:52.723
> 
> 标签：wpf, prism, bootstrapper

我是 WPF 和 Prism 的新手。我想知道是否应该为每个新窗口创建新的引导程序？例如，我有“Window1”，我从 ListBox 中选择元素并单击按钮“ShowDetails”，在新窗口“Window2”中，我应该看到我的选择的详细信息。我有它们的窗口和模块，但我想知道如何以及在哪里可以为“Window2”注册模块“Module2”？

我的引导程序示例。

```
class Bootstrapper : UnityBootstrapper
{
    protected override DependencyObject CreateShell()
    {
        var mainWindow = new Window1();
        mainWindow.Show();
        return mainWindow;
    }

    protected override IModuleCatalog GetModuleCatalog()
    {
        var moduleCatalog = new ModuleCatalog();
        moduleCatalog.AddModule(typeof(Module1));

        return moduleCatalog;
    }
}

"App.xaml.cs"

public partial class App : Application
{
    public App()
    { 
        var bootstrapper = new Bootstrapper();
        bootstrapper.Run();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:24:29.800

Bootstrapper 通常用于 WPF 应用程序的启动类中。通常这将是标准模板中的文件 App.xaml.cs，它是 App.xaml 文件的代码隐藏类。您覆盖方法 OnStartup 并实例化您的引导程序并调用其运行方法。您可以将引导程序的启动延迟到覆盖 OnStartup 之前，而不是将其写入 App.xaml.cs 类的构造函数中。然后，您将在 Prism 中使用 RegionManager 并在 XAML 中定义区域。如果您有多个独立的 Windows，这与 Prism 的预期使用方式有些不同。您可以在 Prism 源代码中的 Bootstrapper 类的 CreateShell 方法中定义 MainWindow 或 Shell 的概念。反而，有一个主窗口并定义区域，也许考虑创建一种在对话框中显示其他窗口的机制。可以将 MainWindow 划分为多个区域并通过 RegionManager 注入用户控件。这是通过 RegionManager 的 activate 方法完成的。

从阅读模式和实践指南开始，或许可以考虑观看 Mike Taulty on Prism 的视频。第一个视频在这里：

[Prism 和 Silverlight：第 1 部分 - 将草图代码迈向统一](http://channel9.msdn.com/Blogs/mtaulty/Prism--Silverlight-Part-1-Taking-Sketched-Code-Towards-Unity)

视频系列中有许多视频（共 10 个）可帮助您开始使用 PRISM。

下面显示了如何在 XAML 中定义区域的示例：

```
<ItemsControl Regions:RegionManager.RegionName="MainRegion" /> 
```

可以激活 PRISM 区域，例如通过绑定到按钮的 DelegateCommand 或 ICommand 是以下代码：

```
var viewA = new ViewA(); 
var regionA = (new RegionManager()).Regions["RegionA"]; 
regionA.Activate(viewA); 
```

您必须定义多个实现 IModule 接口的模块，并将它们添加到您的 ModuleCatalog 中，就像您对 ModuleA 所做的那样。

# jquery - Jquery：如果用户输入特定单词，则替换单词，空格问题

> ID：12934102
> 
> 赞同：1
> 
> 时间：2012-10-17T12:14:55.557
> 
> 标签：jquery

我需要这样做，所以如果用户输入“魁北克”一词的任何组合，它会自动将其重命名为魁北克市，这无论如何都需要发生。我遇到的问题是，如果单词中有任何空格，它就不起作用。我尝试修剪字符串，但它不能正常工作。这是我的代码，如果有什么我可以改进的，请告诉我。

```
 $('#location').on('blur', function() {
            var field = $('#location').val();
            $.trim(field);
            switch (field) {
                case 'Quebec' :
                case 'QUEBEC' :
                case 'Québec' :

                    $('#location').attr('value', 'Quebec City');
                    break;    
            }
        })

        $('#location').on('keypress', function() {
            var field = $('#location').val();
            $.trim(field);
            switch (field) {
                case 'Quebec' :
                case 'QUEBEC' :
                case 'Québec' :

                    $('#location').attr('value', 'Quebec City');
                    break;    
            }
        })

​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:47:29.007

这样的事情应该做，或者至少是一个好的开始：

```
$('#location').on('keyup blur', function() {
    var field = this.value,
        test = field.toLowerCase().replace('é','e').indexOf('quebec');

    if (test!=-1 && field.slice(test, test+11)!='Quebec City') {
       this.value = field.substring(0, test) + "Quebec City" + field.substring(test+6);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/8FERC/)[](http://jsfiddle.net/8FERC/)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:18:16.517

您应该将值返回给`field`变量：

```
field = $.trim(field); 
```

此外，我建议您使用[`keyup`](http://api.jquery.com/keyup/)event 而不是`keypress`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:22:25.593

适用于`field = field.replace(/ /g, "");`

这是一个工作演示[http://jsfiddle.net/KyGKf/1/](http://jsfiddle.net/KyGKf/1/)**

# multithreading - 从调度程序调用委托

> ID：12934103
> 
> 赞同：0
> 
> 时间：2012-10-17T12:14:55.833
> 
> 标签：multithreading, delegates, invoke

我整个早上都被困在这个问题上，尽管它看起来应该很容易（想知道我是否遗漏了一些基本的东西）。我在课堂上有以下代码-

```
 public class myClass
 {
      private Dispatcher m_Dispatcher;

      private void myMethod() { ... }

      private void invokeTheMethod(object sender, PropertyChangedEventArgs e)
      {
           m_Dispatcher.Invoke(myMethod); //XYZ
      }

 } 
```

调度程序附加到运行 myClass 实例的线程。invokeTheMethod 方法是从另一个线程调用的，我想在 m_Dispatcher 的线程上运行 myMethod。但是，如果我尝试运行此代码，我会在 XYZ 处得到一个异常，说“对象引用不是对象的实例”。这是因为我没有以委托的形式声明 myMethod 吗？- 我尝试了不同的方法将 myMethod 声明为委托，但我无法编译它们中的任何一个。任何建议都非常感谢。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:18:23.323

你得到的错误

> 对象引用不是对象的实例 (NullReferenceException)

指领域`m_Dispatcher`。它是空的。这就是为什么你不能调用`Invoke`它的方法。

即使存在`Dispatcher`“附加到线程”的实例，也无法`myClass`获取该实例。

您可以做的是在创建 的实例时提供`Dispatcher`to的实例。像这样的东西：`myClass``myClass`

```
public class myClass
{
  // Here is the 'injection' of the instance in the constructor of this class
  public myClass(Dispatcher dispatcher) {
     m_Dispatcher = dispatcher;
  }

  private Dispatcher m_Dispatcher;

  private void myMethod() { ... }

  private void invokeTheMethod(object sender, PropertyChangedEventArgs e)
  {
       m_Dispatcher.Invoke(myMethod); //XYZ
  }
} 
```

作为旁注，您应该阅读一些关于编码约定的内容，因为大多数 C# 开发社区认为您的大小写是错误的。这是一个好的开始：http: [//msdn.microsoft.com/en-us/library/vstudio/w2a9a9s3.aspx](http://msdn.microsoft.com/en-us/library/vstudio/w2a9a9s3.aspx)

# windows - 使用 Powershell 计算文件夹

> ID：12934106
> 
> 赞同：8
> 
> 时间：2012-10-17T12:15:05.793
> 
> 标签：windows, shell, powershell, scripting

有谁知道**powershell 2.0**命令/脚本来计算特定文件夹中的所有文件夹和子文件夹（递归；没有文件）（例如C:\folder1\folder2 中所有子文件夹的数量）？

此外，我还需要所有“叶子”文件夹的数量。换句话说，我只想计算没有子文件夹的文件夹。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T12:39:31.153

在 PowerShell 3.0 中，您可以使用目录开关：

```
(Get-ChildItem -Path <path> -Directory -Recurse -Force).Count 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-17T12:21:37.830

您可以使用`get-childitem -recurse`获取当前文件夹中的所有文件和文件夹。

通过管道将`Where-Object`其过滤到仅作为容器的文件。

```
$files = get-childitem -Path c:\temp -recurse 
$folders = $files | where-object { $_.PSIsContainer }
Write-Host $folders.Count 
```

作为一个单行：

```
(get-childitem -Path c:\temp -recurse | where-object { $_.PSIsContainer }).Count 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T05:32:52.560

另外一个选项：

```
(ls -force -rec | measure -inp {$_.psiscontainer} -Sum).sum 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T12:21:26.513

这是一个很好的起点：

```
(gci -force -recurse | where-object { $_.PSIsContainer }).Count 
```

但是，我怀疑这将包括`.zip`计数中的文件。我将对其进行测试并尝试发布更新...

**编辑：**已确认 zip 文件*不*计为容器。以上应该没问题！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T17:07:16.037

要回答问题的第二部分，即获取叶文件夹计数，只需修改 where 对象子句以添加对每个目录的非递归搜索，仅获取返回计数为 0 的目录：

```
(dir -rec | where-object{$_.PSIsContainer -and ((dir $_.fullname | where-object{$_.PSIsContainer}).count -eq 0)}).Count 
```

如果您可以使用 powershell 3.0，它看起来会更干净一些：

```
(dir -rec -directory | where-object{(dir $_.fullname -directory).count -eq 0}).count 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-28T09:05:31.417

使用 recourse 选项获取路径子项，通过管道仅过滤容器，再次通过管道测量项目数

```
((get-childitem -Path $the_path -recurse | where-object { $_.PSIsContainer }) | measure).Count 
```

# java - 在java中打印带有一些文本的图像

> ID：12934109
> 
> 赞同：0
> 
> 时间：2012-10-17T12:15:09.373
> 
> 标签：java, image, text, printing

我需要用java（Swing）在打印机上打印图像和一些数据，但都是徒劳的。我只能处理数据，但不能处理图像。我有一个 abc.png 文件和 6 个 jTextBoxes，必须在打印机上打印其中的值。我正在使用 FileWriter 和 PrinterJob 类来实现该作业。数据和图像可以分开打印，但不能一起打印。有人可以给我一些建议吗。

谢谢。

打印图像的代码：

```
try {
PrintRequestAttributeSet pras = new HashPrintRequestAttributeSet();
pras.add(new Copies(1));

PrintService pss[] = PrintServiceLookup.lookupPrintServices(DocFlavor.INPUT_STREAM.GIF,     pras);

if (pss.length == 0)
throw new RuntimeException("No printer services available.");

PrintService ps = pss[0];
System.out.println("Printing to " + ps);

DocPrintJob job = ps.createPrintJob();

FileInputStream fin = new FileInputStream("C://a.gif");

Doc doc = new SimpleDoc(fin, DocFlavor.INPUT_STREAM.GIF, null);

//Doc doc1=new SimpleDoc();

job.print(doc, pras);

//fin.close();
} catch (IOException ie) {
ie.printStackTrace();
} catch (PrintException pe) {
pe.printStackTrace();
} 
```

打印文本的代码：

只需在 FileInputStream 中传递文件在硬盘上的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:15:34.727

一种解决方案可能是创建包含原始图像和文本的第二个图像。

像这样的东西可能有用吗？（未经测试）：

```
public Image addTextToImage(BufferedImage i, String[] text) {

    final int VERTICLE_PADDING_PIXELS = 5;
    final int LEFT_MARGIN_PIXELS = 5;

    FontMetrics fm = i.createGraphics().getFontMetrics();

    int width = i.getWidth();
    int height = i.getHeight()
            + (text.length * (fm.getHeight() + VERTICLE_PADDING_PIXELS));

    for (String s : text) {
        width = Math.max(width, fm.stringWidth(s) + LEFT_MARGIN_PIXELS);
    }

    BufferedImage result = new BufferedImage(i.getHeight(), width, height);

    Graphics2D g = result.createGraphics();

    g.drawImage(i, 0, 0, null);

    for (int x = 0; x < text.length; x++) {
        g.drawString(text[x], LEFT_MARGIN_PIXELS, i.getHeight() + (x + 1) *VERTICLE_PADDING_PIXELS + x*fm.getHeight());
    }

    return result;
} 
```

# c++ - 参考构造函数

> ID：12934119
> 
> 赞同：1
> 
> 时间：2012-10-17T12:15:46.323
> 
> 标签：c++, reference, constructor

这是一个相当快速的问题。

我有一个功能：

```
template<class T> T& read(T& value)
{
    // Read an value of type T and assign it to variable "value"
    return value;
} 
```

现在我可以将该功能用作：

```
char c;
read(c); 
```

但我想将此功能用作：

```
char c = read(char()); 
```

这可能吗，还是我必须将其用作：

```
char c = read<char>(); 
```

? （我知道在后者中我必须稍微调整一下功能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:18:58.823

不，不是，因为临时（您的`char()`）不能绑定到非常量引用。由于您的要求，引用不能是 const（“*读取 T 类型的值并将其分配给变量“值”* ”）。

替代：

```
template<class T> T read()
{
    // Read an value of type T and assign it to variable "value"
    return T();
}

//...
c = read<char>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:21:01.973

不，你不能，而且可能也不想。您不能将临时值绑定到非常量引用参数。无论如何，返回值并分配给参数有什么用？这没有意义。

只需使用这个：

```
template<class T> T read()
{
    // Read an value of type T and assign it to variable "value"
    return value;
} 
```

编辑：`&`从返回值中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:25:35.437

在您的模板中，您说您希望编译器拥有一个函数，该函数可以获取对类型的可编辑引用`T`并返回对该类型的可编辑引用，因此您可以将其用作 :`char c; read( c );`但您不能将其用作，`read( char() )`因为`char()`不可编辑（左值），因为您不能在等号运算符的左侧使用它：`char() = 3`无效。如果您不想更改输入，则可以使用以下内容：

```
template< class T >
T read( const T& val ) {
    // do something with val and return a T
    return val;
} 
```

那么您可以将其称为：

```
read( char() );
read (char)1 );
char c = read( (char)2 );
read( c ); 
```

如果你想要一个默认值，那么它就像前面的例子一样简单：

```
template< class T >
T read( const T& val = T() ) {
    // do something with val and return a T
    return val;
} 
```

然后你就可以打电话了`char c = read<char>()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T12:32:37.923

好的，感谢您的评论，我注意到并非所有人都理解我的问题。但有些人做到了，在他们的帮助下，我现在有了这两个类函数：

```
template<class T> void read(T& value)
{
    event::deserialize(value, *this);
}

template<class T> T read()
{
    T temp;
    event::deserialize(temp, *this);
    return temp;
} 
```

请注意，这些函数是名为 Stream 的类的成员。

谢谢您的帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T12:20:42.603

你给的第一个实际上没有意义。想想看，你传入一个匿名值，没有变量绑定到它。那你怎么能分配给它呢？会有什么改变？

由于`char()`是右值，因此不能将其用作非常量引用，而只能使用左值

在这种情况下，不需要一起引用。如果您想做您在问题中解释的内容，请尝试：

```
template<typename T>
T readT(){
  T v;
  read(v);
  return v;
} 
```

现在我们可以输入：

```
char c = readT<char>(); 
```

哪个做你想要的。

# javascript - 服务器端检查后关闭浏览器时显示警报消息

> ID：12934122
> 
> 赞同：0
> 
> 时间：2012-10-17T12:15:49.640
> 
> 标签：javascript, c#, asp.net, dom-events

我必须在一些服务器端验证后在我的网页上显示警报（基于是否显示警报的特定条件）当点击浏览器交叉时并且在警报消息之后页面不应该关闭。我从 Codebehind 做所有事情。aspx 页面中没有一行代码。任何人都可以提供代码片段。我正在使用.net1.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:55:46.710

使用下面的代码..

ScriptManager.RegisterStartupScript(this, GetType(), "alert", "alert('成功保存');",true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:45:13.710

在 CodeBehind 中进行验证时，只需在页面中添加一些 Javascript。

[此处](https://stackoverflow.com/questions/4067796/how-to-create-popup-window-when-browser-close)描述了如何在关闭选项卡时使用 JavaScript 显示弹出窗口。要将纯文本（在我们的示例中为 JavaScript）添加到您的 HTML，您可以使用 LiteralControl。

一些代码：

```
 if (warningNecessary)
        {
            LiteralControl lc = new LiteralControl();
            lc.Text = string.Concat("<script type=\"text/javascript\">",
                                        "window.onUnLoad= function (evt) {",
                                        "alert('YourAlert');",
                                        "}",
                                    "</script>");
            this.Controls.Add(lc);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:44:05.090

当我关闭浏览器时，我必须执行一些服务器端功能。

如果这些服务器端功能出现任何异常，我必须显示“操作不成功”的警报消息，在这种情况下不应关闭浏览器。

否则关闭浏览器。

# java - maven 程序集：未解决的编译错误

> ID：12934126
> 
> 赞同：1
> 
> 时间：2012-10-17T12:16:03.827
> 
> 标签：java, eclipse, maven, maven-assembly-plugin

我有一个使用 Maven 使用 maven-assembly-plugin 构建 JAR 的应用程序。

该项目包括一个依赖项列表，其中一个是另一个 Maven 项目。我正在使用 Eclipse 进行开发，当我运行该项目时，一切正常。当我使用 Maven 目标构建时`assembly:assembly`，它会生成 JAR，但是当我运行 JAR 时，会出现以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The method configure(Map<String,String>) of type SMTPMailService must 
      override a superclass method
    at rey.sto.utils.mail.SMTPMailService.configure(SMTPMailService.java:89)
    at com.ppl_sftp.transfer.FileTransfer.startTransfer(FileTransfer.java:232)
    at com.ppl_sftp.transfer.MainApp.main(MainApp.java:33) 
```

这是主项目的 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org  /2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>

<groupId>com.ppl-sftp</groupId>
<artifactId>transfer</artifactId>
<packaging>jar</packaging>
<version>0.0.1-SNAPSHOT</version>

<name>A Camel Route</name>
<url>http://www.myorganization.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
</properties>

<dependencies>
    <!-- logging -->

    <!-- testing -->
    <dependency>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-core</artifactId>
        <version>2.10.0</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.6</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.xerial</groupId>
        <artifactId>sqlite-jdbc</artifactId>
        <version>3.7.2</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-test</artifactId>
        <version>2.10.0</version>
        <type>jar</type>
        <scope>test</scope>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-ftp</artifactId>
        <version>2.9.2</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>

    <dependency>
        <groupId>my-utils</groupId>
        <artifactId>my-utils</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>
    <dependency>
         <groupId>javax.activation</groupId>
         <artifactId>activation</artifactId>
         <version>1.1</version>
        </dependency>
    <dependency>
        <groupId>com.sun.mail</groupId>
        <artifactId>javax.mail</artifactId>
        <version>1.4.5</version>
    </dependency>
</dependencies>

<build>
    <defaultGoal>install</defaultGoal>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <!-- allows the route to be ran via 'mvn camel:run' -->
        <plugin>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-maven-plugin</artifactId>
            <version>2.10.0</version>
        </plugin>
        <!-- Allows the example to be run via 'mvn compile exec:java' -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
                <mainClass>com.ppl_sftp.transfer.MainApp</mainClass>
                <includePluginDependencies>false</includePluginDependencies>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.ppl_sftp.transfer.MainApp</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这是 my-utils 项目依赖项的 pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>rey-sto-utils</groupId>
<artifactId>rey-sto-utils</artifactId>
<version>0.0.1-SNAPSHOT</version>
<build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>2.0-beta2</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>
    <dependency>
        <groupId>ojdbc6</groupId>
        <artifactId>ojdbc6</artifactId>
        <version>6</version>
    </dependency>
    <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>com.sun.mail</groupId>
        <artifactId>javax.mail</artifactId>
        <version>1.4.5</version>
    </dependency>
</dependencies> 
```

该问题与 Java 邮件依赖项有关。如您所见，我已经使用过 `com.sun.mail`，但我看到了一些其他不同的库对应于`javax.mail`.

也许我在我的 poms 中遗漏了一些东西，比如配置参数或插件。

我还尝试在我的本地存储库中放入一个在其他项目中运行良好的 mail.jar，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:39:37.520

“未解决的编译问题”来自 Eclipse 已编译的 utils 项目中的类文件，但 Eclipse 无法正确编译它。

您从 Eclipse 和 Maven 看到不同结果的原因是它们使用了不同版本的类文件。Eclipse 正在做工作区解析，所以它使用 utils/target/classes 中的 SMTPMailService 版本。`mvn install`Maven 正在从您的本地 Maven 存储库中解析 utils jar，当您在 Eclipse 中出现编译错误时，该存储库是通过运行放置在那里的。

Try running `mvn clean install` in the utils project (clean to remove any class files generated by Eclipse, install to replace the jar in your local repository). Then rebuild your assembly.

# jquery - 使用jquery上传文件名

> ID：12934135
> 
> 赞同：0
> 
> 时间：2012-10-17T12:16:36.887
> 
> 标签：jquery

如果文件上传文本的大小不为零，我正在尝试将上传的文件名发送到另一个文件。我尝试了下面的代码，但没有奏效。如果单击浏览按钮并选择文件名，我想发送文件名..请帮助？

```
<input type="file" name="fileupload" id="fileupload" value=""> 

   $(document).ready(function () {
   $("#fileupload").click(function(){

       if(fileupload>0)
       {      
    $.post("ReadExcel.jsp", {"filename": $("#fileupload").val()});
    $.post("ReadExcel.jsp", {"processId": processId });
    alert($("#fileupload").val());
       }
   });
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:18:29.437

你不是说[**编辑以获得更好的代码**]：

```
$(document).ready(function () {
  $("#fileupload").click(function(){
    var valueLength = $(this).val().length;
    if(valueLength > 0) {      
      $.post("ReadExcel.jsp", {
        "filename": $(this).val(),
        "processId": processId
      },
      success: function(data) {
        alert($(this).val());
      });
    }
  });
}); 
```

或者你可以减轻对`$(document).ready()`：

```
$("#fileupload").on('click', function(){
  var valueLength = $(this).val().length;
  if(valueLength > 0) {      
    $.post("ReadExcel.jsp", {
      "filename": $(this).val(),
      "processId": processId
    },
    success: function(data) {
      alert($(this).val());
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:19:44.600

我怀疑您想触发您的处理程序，`change`并且您想检查是否选择了文件：

```
$("#fileupload").change(function() {
   if($("#fileupload").val().length > 0) {      
       $.post("ReadExcel.jsp", {"filename": $("#fileupload").val()});
       $.post("ReadExcel.jsp", {"processId": processId });
       alert($("#fileupload").val());
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:24:28.620

希望这可以帮助..

```
$("#fileupload").change(function() {
       if($("#fileupload").val().length > 0) {      
           $.post("ReadExcel.jsp", {"filename": $("#fileupload").val()});
           $.post("ReadExcel.jsp", {"processId": processId });
           alert($(this).val());
       }
    }); 
```

# android - 在 Android 中滑动视图

> ID：12934140
> 
> 赞同：0
> 
> 时间：2012-10-17T12:16:46.200
> 
> 标签：android

我编写了一个 Android 应用程序，它使用 ViewPager 在我的应用程序的不同视图之间滑动。这很好用，但动画不像我想要的那样。当前视图向右滑动，新视图从左侧进入。但我希望当前视图像右边的一层一样离开，以便用户可以看到新视图，它位于当前视图的“下方”。我希望“旧”视图保留在右侧，以便它可以返回 onclick。当前的 Evernote 应用程序使用此行为。我附上了截图。谢谢 ;-）！

[http://i.stack.imgur.com/2RlT4.jpg](http://i.stack.imgur.com/2RlT4.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:24:00.047

您可以参考[Sliding-Sidebar](https://github.com/walkingice/gui-sliding-sidebar)。这有像 Facebook 一样的滑出效果。

上述库的快速参考：

您可以下载[Android UI Patterns](https://play.google.com/store/apps/details?id=com.groidify.uipatterns&hl=en)应用程序。从 Google Play 中查看您需要的效果。它的里面`ActionBar & Dashboard --> gui-sliding-sidebar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:22:26.003

您应该在下面的演示项目中使用应用程序菜单中的飞行将帮助您

[https://github.com/korovyansk/android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:58:05.063

我建议你使用[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)这是一个非常好的和可靠的库，有一个活跃的开发人员。它也适用于 ActionbarSherlock，非常适合向后兼容。

> SlidingMenu 一个 Android 库，允许开发人员轻松创建滑入式菜单，如在 Spotify 和 Facebook 应用程序中。

# javascript - 如何重新加载/刷新 jQuery 数据表？

> ID：12934144
> 
> 赞同：99
> 
> 时间：2012-10-17T12:16:57.613
> 
> 标签：javascript, jquery, datatables

我正在尝试实现功能，单击屏幕上的按钮将导致我的[jQuery dataTable](http://datatables.net)刷新（因为自创建 dataTable 以来服务器端数据源可能已更改）。

这是我所拥有的：

```
$(document).ready(function() {
    $("#my-button").click(function() {
        $("#my-datatable").dataTable().fnReloadAjax();
    });
}); 
```

但是当我运行它时，它什么也不做。单击按钮时刷新数据表的正确方法是什么？提前致谢！

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2014-06-17T01:18:18.043

使用 1.10.0 版的 DataTables，它是内置且简单的：

```
var table = $('#example').DataTable();
table.ajax.reload(); 
```

要不就

```
$('#example').DataTable().ajax.reload(); 
```

[http://datatables.net/reference/api/ajax.reload()](http://datatables.net/reference/api/ajax.reload())

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-06-21T11:09:17.623

先销毁数据表，再绘制数据表。

```
$('#table1').DataTable().destroy();
$('#table1').find('tbody').append("<tr><td><value1></td><td><value1></td></tr>");
$('#table1').DataTable().draw(); 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-10-17T12:34:12.593

您可以尝试以下方法：

```
function InitOverviewDataTable() {
    oOverviewTable = $('#HelpdeskOverview').dataTable({
        "bPaginate": true,
        "bJQueryUI": true, // ThemeRoller-stöd
        "bLengthChange": false,
        "bFilter": false,
        "bSort": false,
        "bInfo": true,
        "bAutoWidth": true,
        "bProcessing": true,
        "iDisplayLength": 10,
        "sAjaxSource": '/Helpdesk/ActiveCases/noacceptancetest'
    });
}

function RefreshTable(tableId, urlData) {
    $.getJSON(urlData, null, function(json) {
        table = $(tableId).dataTable();
        oSettings = table.fnSettings();

        table.fnClearTable(this);

        for (var i = 0; i < json.aaData.length; i++) {
            table.oApi._fnAddData(oSettings, json.aaData[i]);
        }

        oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
        table.fnDraw();
    });
}
// Edited by Prasad
function AutoReload() {
    RefreshTable('#HelpdeskOverview', '/Helpdesk/ActiveCases/noacceptancetest');

    setTimeout(function() {
        AutoReload();
    }, 30000);
}

$(document).ready(function() {
    InitOverviewDataTable();
    setTimeout(function() {
        AutoReload();
    }, 30000);
}); 
```

[http://www.meadow.se/wordpress/?p=536](http://www.meadow.se/wordpress/?p=536)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2015-07-09T06:58:28.197

我有同样的问题，这就是我解决它的方法：

首先使用您选择的方法获取数据，我在提交结果后使用 ajax 将对表格进行更改。然后清除并添加新数据：

```
var refreshedDataFromTheServer = getDataFromServer();

var myTable = $('#tableId').DataTable();
myTable.clear().rows.add(refreshedDataFromTheServer).draw(); 
```

这里是来源： [https://datatables.net/reference/api/clear()](https://datatables.net/reference/api/clear())

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2015-08-15T19:46:59.903

您可以使用 DataTable 的广泛 API 来重新加载它`ajax.reload()`

如果您将数据表声明为`DataTable()`（新版本），您需要：

```
var oTable = $('#filtertable_data').DataTable( );
// to reload
oTable.ajax.reload(); 
```

如果您将数据表声明为`dataTable()`（旧版本），您需要：

```
var oTable = $('#filtertable_data').dataTable( );
// to reload
oTable.api().ajax.reload(); 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2018-12-14T07:32:48.233

我建议使用以下代码。

```
table.ajax.reload(null, false); 
```

这样做的原因是，用户分页不会在重新加载时重置。
例子：

```
<button id='refresh'> Refresh </button>

<script>
    $(document).ready(function() {

        table = $("#my-datatable").DataTable();
        $("#refresh").on("click", function () { 
         table.ajax.reload(null, false); 
        });

   });
</script> 
```

可以在[此处找到有关此的详细信息](https://datatables.net/reference/api/ajax.reload())

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2017-04-20T22:25:32.590

这个简单的答案对我有用

```
 $('#my-datatable').DataTable().ajax.reload(); 
```

参考[https://datatables.net/forums/discussion/38969/reload-refresh-table-after-event](https://datatables.net/forums/discussion/38969/reload-refresh-table-after-event)

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2015-08-21T14:04:28.277

```
var ref = $('#example').DataTable();
ref.ajax.reload(); 
```

如果要向 DataTables 1.10 添加重新*加载*/**刷新按钮，请使用****drawCallback**。

 ***请参见下面的示例（我正在使用带有引导 css 的*DataTables ）*

```
var ref= $('#hldy_tbl').DataTable({
        "responsive": true,
        "processing":true,
        "serverSide":true,
        "ajax":{
            "url":"get_hotels.php",
            "type":"POST"
        },
        "drawCallback": function( settings ) {
            $('<li><a onclick="refresh_tab()" class="fa fa-refresh"></a></li>').prependTo('div.dataTables_paginate ul.pagination');
        }
    });

function refresh_tab(){
    ref.ajax.reload();
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-05-29T16:23:12.330

当您想刷新数据表时，请使用此代码：

```
 $("#my-button").click(function() {
    $('#my-datatable').DataTable().clear().draw();
 }); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-09-28T04:11:59.820

先尝试销毁数据表，然后重新设置，例如

```
var table;
$(document).ready(function() {
    table = $("#my-datatable").datatable()
    $("#my-button").click(function() {
        table.fnDestroy();
        table = $("#my-datatable").dataTable();
    });
}); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-09-05T14:58:09.483

这就是我的做法......也许不是最好的方法，但它绝对更简单（恕我直言）并且不需要任何额外的插件。

### HTML

```
<div id="my-datatable"></div> 
```

### jQuery

```
function LoadData() {
    var myDataTable = $("#my-datatable").html("<table><thead></thead><tbody></tbody></table>");
    $("table",myDataTable).dataTable({...});
}
$(document).ready(function() {
    $("#my-button").click(LoadData);
    LoadData();
}); 
```

注意：在我使用 jQuery dataTable 的过程中，有时如果你没有`<thead></thead><tbody></tbody>`它就不起作用。但是没有它你也许能过得去。我还没有完全弄清楚是什么使它需要，什么不需要。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-08-18T10:01:50.430

如果您使用 url 属性，只需执行

```
table.ajax.reload() 
```

希望它可以帮助某人

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-10-17T12:38:14.873

好吧，您没有显示加载脚本的方式/位置，但是要使用插件 API 函数，您必须在加载 DataTables 库之后但在初始化 DataTable 之前将其包含在页面中。

像这样

```
<script type="text/javascript" src="jquery.dataTables.js"></script>
<script type="text/javascript" src="dataTables.fnReloadAjax.js"></script> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-03-05T06:59:46.440

var myTable = $('#tblIdName').DataTable(); myTable.clear().rows.add(myTable.data).draw();

这在不使用 ajax 的情况下对我有用。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-06-18T13:33:39.270

> Allan Jardine 的 DataTables 是一个非常强大且流畅的 jQuery 插件，用于显示表格数据。它具有许多功能，可以完成您可能想要的大部分操作。不过，奇怪的是，如何以简单的方式刷新内容，所以我作为自己的参考，也可能为了其他人的利益，这里有一个完整的例子，如果这样做的话：

**HTML**

```
<table id="HelpdeskOverview">
  <thead>
    <tr>
      <th>Ärende</th>
      <th>Rapporterad</th>
      <th>Syst/Utr/Appl</th>
      <th>Prio</th>
      <th>Rubrik</th>
      <th>Status</th>
      <th>Ägare</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table> 
```

**Javascript**

```
function InitOverviewDataTable()
{
  oOverviewTable =$('#HelpdeskOverview').dataTable(
  {
    "bPaginate": true,
    "bJQueryUI": true,  // ThemeRoller-stöd
    "bLengthChange": false,
    "bFilter": false,
    "bSort": false,
    "bInfo": true,
    "bAutoWidth": true,
    "bProcessing": true,
    "iDisplayLength": 10,
    "sAjaxSource": '/Helpdesk/ActiveCases/noacceptancetest'
  });
}

function RefreshTable(tableId, urlData)
{
  $.getJSON(urlData, null, function( json )
  {
    table = $(tableId).dataTable();
    oSettings = table.fnSettings();

    table.fnClearTable(this);

    for (var i=0; i<json.aaData.length; i++)
    {
      table.oApi._fnAddData(oSettings, json.aaData[i]);
    }

    oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
    table.fnDraw();
  });
}

function AutoReload()
{
  RefreshTable('#HelpdeskOverview', '/Helpdesk/ActiveCases/noacceptancetest');

  setTimeout(function(){AutoReload();}, 30000);
}

$(document).ready(function () {
  InitOverviewDataTable();
  setTimeout(function(){AutoReload();}, 30000);
}); 
```

[来源](http://www.meadow.se/wordpress/?p=536)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-09T10:02:54.907

```
 if(data.length==0){
            alert("empty");
              $('#MembershipTable > tbody').empty();
            // $('#MembershipTable').dataTable().fnDestroy();
                    $('#MembershipTable_info').empty(); 
                    $("#MembershipTable_length").empty();
                    $("#MembershipTable_paginate").empty();

             html="<tr><td colspan='20'><b>No data available in Table</b> </td></tr>";
           $("#MembershipTable").append(html);
        }

        else{
             $('#MembershipTable').dataTable().fnDestroy();
            $('#MembershipTable > tbody').empty();

         for(var i=0; i<data.length; i++){
            // 
```

.......}

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-16T10:48:56.417

根据[DataTable](https://datatables.net/reference/api/destroy())帮助，我可以为我的表完成。

> 我想要多个数据库到我的 DataTable。
> 
> 例如：data_1.json > 2500 条记录 - data_2.json > 300 条记录 - data_3.json > 10265 条记录

```
var table;
var isTableCreated= false;

if (isTableCreated==true) {
    table.destroy();
    $('#Table').empty(); // empty in case the columns change
}
else
    i++;

table = $('#Table').DataTable({
        "processing": true,
        "serverSide": true,
        "ordering": false,
        "searching": false,
        "ajax": {
            "url": 'url',
            "type": "POST",
            "draw": 1,
            "data": function (data) {
                data.pageNumber = (data.start / data.length);
            },
            "dataFilter": function (data) {
                return JSON.stringify(data);
            },
            "dataSrc": function (data) {
                if (data.length > 0) {
                    data.recordsTotal = data[0].result_count;
                    data.recordsFiltered = data[0].result_count;
                    return data;
                }
                else
                    return "";
            },

            "error": function (xhr, error, thrown) {
                alert(thrown.message)
            }
        },
        columns: [
           { data: 'column_1' },
           { data: 'column_2' },
           { data: 'column_3' },
           { data: 'column_4' },
           { data: 'column_5' }
        ]
    }); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-11-28T23:50:02.453

如果使用 datatable v1.10.12 则只需调用`.draw()`方法并传递所需的绘图类型，即`full-reset`，`page`然后您将使用新数据重新绘制 dt

`let dt = $("#my-datatable").datatable()`

// 做一些动作

`dt.draw('full-reset')`

有关更多信息，请查看数据表文档

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-03-28T12:48:19.230

我做了一些与此相关的事情......下面是一个你需要的示例 javascript。这里有一个演示：http: [//codersfolder.com/2016/07/crud-with-php-mysqli-bootstrap-datatables-jquery-plugin/](http://codersfolder.com/2016/07/crud-with-php-mysqli-bootstrap-datatables-jquery-plugin/)

```
//global the manage member table 
var manageMemberTable;

function updateMember(id = null) {
    if(id) {
        // click on update button
        $("#updatebutton").unbind('click').bind('click', function() {
            $.ajax({
                url: 'webdesign_action/update.php',
                type: 'post',
                data: {member_id : id},
                dataType: 'json',
                success:function(response) {
                    if(response.success == true) {                      
                        $(".removeMessages").html('<div class="alert alert-success alert-dismissible" role="alert">'+
                              '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+
                              '<strong> <span class="glyphicon glyphicon-ok-sign"></span> </strong>'+response.messages+
                            '</div>');

                        // refresh the table

                        manageMemberTable.ajax.reload();

                        // close the modal
                        $("#updateModal").modal('hide');

                    } else {
                        $(".removeMessages").html('<div class="alert alert-warning alert-dismissible" role="alert">'+
                              '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+
                              '<strong> <span class="glyphicon glyphicon-exclamation-sign"></span> </strong>'+response.messages+
                            '</div>');

                        // refresh the table                        
                        manageMemberTable.ajax.reload();

                        // close the modal
                        $("#updateModal").modal('hide');
                    }
                }
            });
        }); // click remove btn
    } else {
        alert('Error: Refresh the page again');
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-05-03T10:23:26.940

您必须在执行更新操作后编写这行代码。

`$('#example').DataTable().ajax.reload();`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-08-26T13:07:51.363

对于我的情况（DataTables 1.10.7），以下代码适用于我；

```
 let table = $(tableName).DataTable();
table.clear().draw();

$(tableName).dataTable({ ... }); 
```

[Datatables clear()：简单地从表中删除所有数据行](https://datatables.net/reference/api/clear())

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-01-22T18:10:48.783

非常简单的答案

```
$("#table_name").DataTable().ajax.reload(null, false); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-12-02T03:33:47.153

**我的桌子第​​一次打电话：**

```
var myTable = $('.myTable').DataTable({
    "language": {
        "url": "//cdn.datatables.net/plug-ins/1.11.0/i18n/es_es.json"
    },
    dom: 'Bfrtip',
    processing: true,
    "paging": false
}); 
```

**您的 ajax 调用代码在这里。**

**然后在ajax结果之后：**

```
//Destroy my table
myTable.destroy();

//Place my table again
$("#tableWrapper").html(''+
    '<table class="table-striped myTable">'+
        '<thead>'+
            '<tr>'+
                '<th>Title</th>'+
            '</tr>'+
        '</thead>'+
        '<tbody id="info_conds">'+
            '<td>Content</td>'+
        '</tbody>'+
    '</table>'+
''); 
```

**再次调用我的表属性**

```
myTable = $('.myTable').DataTable({
    "language": {
        "url": "//cdn.datatables.net/plug-ins/1.11.0/i18n/es_es.json"
    },
    dom: 'Bfrtip',
    processing: true,
    "paging": false
}); 
```

**完毕。**

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2017-06-03T17:47:07.253

```
 function autoRefresh(){
        table.ajax.reload(null,false); 
        alert('Refresh');//for test, uncomment
    }

    setInterval('autoRefresh()', 5000); 
```

* * *

## 回答 #25

> 赞同：-6
> 
> 时间：2015-11-17T08:05:25.750

使用 init 重新初始化数据表并将检索写入 true ..done..so simple

例如。

```
TableAjax.init();
retrieve: true, 
```***

# r - 如何在增加水平边栏高度的同时降低热图本身的高度？

> ID：12934145
> 
> 赞同：1
> 
> 时间：2012-10-17T12:16:59.017
> 
> 标签：r, data-visualization, heatmap

在包中的`heatmap.2`函数中`gplots`，如何在增加水平侧栏的高度（由`ColSideColors`参数表示）的同时减少热图中的行高度？

```
library('gplots')
prob_matrix=replicate(100, rnorm(20)) 
ids=paste("patient",c(1:100),sep="_")
type_colors=sample(c("red","blue","cyan","pink","yellow","green"), length(ids), replace = TRUE, prob = NULL)
heatmap.2(prob_matrix, ColSideColors=type_colors,RowV=NULL,trace="none") 
```

我希望由生成的水平边栏`ColSideColors=subtype_colors`的高度增加，并且热图的行的高度减少。

对于扩展，我如何也可以编辑每列的宽度，而与输出绘图的 pdf 或图形设备的宽度大小**无关？**所以，在上面，我想让热图的列的宽度`prob_matrix`更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:18:08.840

我认为它被硬编码到函数中。回旋处第196行的`heatmap.2`功能有：

```
if (!missing(ColSideColors)) {
            if (!is.character(ColSideColors) || length(ColSideColors) != 
                nc) 
                stop("'ColSideColors' must be a character vector of length ncol(x)")
            lmat <- rbind(lmat[1, ] + 1, c(NA, 1), lmat[2, ] + 
                1)
            lhei <- c(lhei[1], 0.2, lhei[2])
        } 
```

0.2 是分配给彩条的高度。如果您复制`heatmap.2`并编辑它，您可以将其设置为其他内容。可能创建一个新参数，`ColSideHeight`默认值为 0.2，然后将 0.2 更改为`ColSideHeight`.

# rest - 带有 ravendb id 的 ServiceStack 路由

> ID：12934146
> 
> 赞同：9
> 
> 时间：2012-10-17T12:17:02.000
> 
> 标签：rest, ravendb, servicestack

我有一个 ID 为的实体

```
public string ID {get;set;}    
activities/1 
```

（来自 RavenDB）。

我在我的 ServiceStack AppHost 中注册了以下路由

```
Routes
    .Add<Activity>("/activities")
    .Add<Activity("/activities/{id}"); 
```

我正在使用主干应用程序向我的 REST 服务 POST 和 PUT。

**开箱即用会发生什么：**

*   id 属性被序列化为 json 为“activities/1”
*   id 属性被编码为“activities%2F1”的路由
*   ServiceStack 优先于基于 URL 的 id 属性，因此我的字符串获取直接对 RavenDb 没有用的编码值。

我知道的选项：

*   将主干更改为发布到“/活动”并让 JSON 序列化器启动
*   更改 RavenDb ID 生成以使用连字符而不是斜杠
*   让我的 Id 属性在集合上解析编码的 %2F 并转换为斜杠

两者都有缺点，因为我要么在我的 API 中失去了 RESTful，这是不可取的，要么我不遵循 RavenDb 约定，这通常是明智的。另外，我个人偏好使用斜线。

所以我想知道在 servicestack 中是否有任何其他选项可以用来对涉及较少妥协的问题进行排序？序列化程序自定义或通配符路由都在我的脑海中......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T17:26:04.477

我对 ASP.Net WebAPI 也有同样的问题，所以我不认为这是一个 ServiceStack 问题，而只是在处理 REST URL 上的 Raven 样式 id 时普遍关心的问题。

例如，假设我查询`GET: /api/users`并返回如下结果：

```
[{
  Id:"users/1",
  Name:"John"
},
{
  Id:"users/2",
  Name:"Mary"
}] 
```

现在我想获得一个特定的用户。如果我遵循纯 REST 方法，则会从该文档中收集 Id，然后将其传递到 url 的 id 部分。这里的问题是，这最终看起来 `GET: /api/users/users/1`不仅令人困惑，而且斜线妨碍了 WebAPI（和 ServiceStack）如何将 url 参数路由到操作方法。

我做出的妥协是仅从 URL 的角度将 id 视为整数。所以客户端调用`GET: /api/users/1`，我将我的方法定义为`public User Get(int id)`.

很酷的部分是 Raven 的`session.Load(id)`重载可以采用完整的字符串形式或整数形式，因此您大部分时间都不必翻译。

如果你发现自己需要翻译 id，你可以使用这个扩展方法：

```
public static string GetStringIdFor<T>(this IDocumentSession session, int id)
{
  var c = session.Advanced.DocumentStore.Conventions;
  return c.FindFullDocumentKeyFromNonStringIdentifier(id, typeof (T), false);
} 
```

调用它很简单`session.GetStringIdFor<User>(id)`。我通常只需要手动翻译，如果我正在使用 id 做一些事情，而不是立即加载文档。

我明白，通过翻译这样的 id，我打破了一些 REST 纯粹主义约定，但我认为在这种情况下这是合理的。我会对任何人提出的任何替代方法感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T12:36:50.470

我在使用 RavenDB 试用 Durandal JS 时遇到了这个问题。

我的解决方法是稍微更改 URL 以使其正常工作。所以在你的例子中：

```
GET /api/users/users/1 
```

成为

```
GET /api/users/?id=users/1 
```

从jQuery，这变成：

```
var vm = {};
vm.users = [];

$.get("/api/users/?" + $.param( { id: "users/1" })
  .done(function(data) {
      vm.users = data;
  }); 
```

# math - 简单数学 - 计算数字的滚动窗口（啊哈！负模数/余数！！）

> ID：12934148
> 
> 赞同：2
> 
> 时间：2012-10-17T12:17:16.483
> 
> 标签：math

我几乎不好意思问这个问题，因为它可能非常明显——但我看不出有一条出路，我怀疑有一条。

我有一个变量，我需要从中添加/减去值 - 但我想将它保持在一个值范围内，在任一端循环 - 例如

范围是 0-3，所以值是 0,1,2,3,0,1,2,3 - 这就是

```
x = (x + val) MOD 4 
```

然而，当 val 为负时，我们应该看到 0,3,2,1,0,3,2,1 并且解决方案远没有那么优雅

```
x = (x + val) MOD 4
if (x < 0) x = 4 + x; 
```

这行得通，但它很笨重，我不禁想到可能有一个“单线”解决方案 - 但如果我能想到它，我该死的？:)

*准备尴尬*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:14:34.017

正如 TaZ 所指出的，大多数“模”运算符实际上是余数运算符，它们只能像`x+val >= 0`.

在 c++ 中，如在[此处](http://www.cplusplus.com/forum/general/19502/)找到（进行了一些修改），您可以像这样定义一个更“数学正确”的模数

```
double mod(double x, double y) { return y!=0 ? x-floor(x/y)*y : x; } 
```

（也许也制作一个整数版本），这样

```
x = mod(x+val,4); 
```

适用于正面和负面`x+val`。

# ruby - ruby 哈希中 nil:NilClass 的未定义方法 []

> ID：12934152
> 
> 赞同：0
> 
> 时间：2012-10-17T12:17:24.177
> 
> 标签：ruby, ruby-on-rails-3, hash

我有一个哈希，包括：

```
flow = ["a", "b", "c"]
h = [{"case_id"=>1, "a"=>{"x"=>"text", "option"=>"..." },"b"=>{"report"=>"text", "option"=>"..." } ,"c"=>{"y"=>"text", "option"=>"..." }},{"case_id"=>2, "a"=>{"x"=>"text", "option"=>"..." },"b"=>{"report"=>"text", "option"=>"..." } ,"c"=>{"y"=>"text", "option"=>"..." }}]
@case = 0
@report = ""
flow.each do |step|
  if h[@case][step]['report']
    @report = h[@case][step]['report']
  end
end 
```

控制台给了我以下错误：

```
NoMethodError in MainController#index
undefined method `[]' for nil:NilClass 
```

为什么？！在以前的程序中，但使用 ruby​​ 187，没有问题。但是现在，用ruby 193，给出了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:47:07.343

```
flow = ["a", "b", "c"]
h = { "a"=>{"x"=>"text", "option"=>"..." },"b"=>{"report"=>"text", "option"=>"..." } ,"c"=>{"y"=>"text", "option"=>"..." }}
flow.each do |f|
  if h[f]['report']
    #something
  end
end 
```

Ruby 有一些由枚举类提供的很棒的迭代助手

[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:20:14.663

`h`在or 或`h[a]`is之前，您不会得到错误`nil`。请正确更新您的问题。

# java - 将属性转换为其名称

> ID：12934154
> 
> 赞同：0
> 
> 时间：2012-10-17T12:17:33.747
> 
> 标签：java

可以使用以下代码通过名称访问类属性：

```
MyClass.class.getDeclaredField("myAtt"); 
```

是否可以创建一个反向的函数？即一个将属性转换为其名称的函数？

**编辑：**我添加此编辑以使这一点更清楚：
考虑以下课程：

```
class MyClass {
    Integer myAttribute;
} 
```

我正在寻找一个接受`myAttribute`（本身，或对它的引用。idk！）并返回`"myAttribute"`字符串的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:22:46.690

尝试`java.lang.reflect.Field.getName();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:23:08.463

您可以使用[`Field#getName`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html#getName%28%29)方法： -

```
Field[] fields = MyClass.class.getDeclaredFields();

for (Field field: fields) {
    System.out.println(field.getName());
} 
```

**PS** : - 您应该以`uppercase`字母开头命名您的课程。

**更新**：-好的，如果您有属性名称：- `private String attrName;`，您可以使用以下方法获取相应的字段：-

```
Field field = MyClass.class.getDeclaredField("attrName");

// Then do this. Which is meaningless. But I don't know why you want to do this
// Your fieldName will contain "attrName" which you know already
String fieldName = field.getName(); 
```

但是从上述字段中获取名称没有意义。如果您只是在寻找这个，我会感到惊讶。但是您的问题可以更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:50:01.523

如果我理解您的问题，您想要获取当前值与变量值匹配的字段的名称。

```
private String getAttributeName(Object myInstance, Object myValue) throws IllegalAccessException
{
    Field[] fields = MyClass.class.getDeclaredFields();
    for (Field each : fields)
    {
        if (each.get(myInstance).equals(myValue))
            return each.getName();
    }
    return null;
} 
```

然后就可以调用了

```
 getAttributeName(myInstance, myValue); 
```

# python - 谁能解释为什么`skimage.measure.perimeter(img)`返回这个结果？

> ID：12934156
> 
> 赞同：1
> 
> 时间：2012-10-17T12:17:42.160
> 
> 标签：python, image-processing, scikits, scikit-image

当我测试`scikit-image`方法时，我遇到`skimage.measure.perimeter(image)`但无法解释这个函数的输出。

```
import numpy as np  
image=np.zeros((100,100))  
image[10:30,10:30]=1                   # this creates a white square  
from skimage.measure import perimeter  
x=perimeter(image)  
print x                               #Should be (20+20+20+20) = 80  
76.0        <<<<<<<<<< it returns this value 
```

我误解了这个函数应该返回什么吗？我知道**周长**是围绕一个区域的路径。
注意：-
(1) 计算的周长和返回的周长之间的差异并不总是 4。因为有时它可以是 6，无论它是正方形、矩形还是任何其他多边形。
更新：=
(1)[功能页面](http://scikit-image.org/docs/dev/api/skimage.measure.html#perimeter)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:16:38.417

您使用的是哪个版本的 skimage？0.6 版和[github 源](https://github.com/scikit-image/scikit-image)没有 skimage.measure.perimeter 功能。

另外，我认为您的意思是第 3 行：`image[10:30, 10:30] = 1`

**编辑**

好的，我想我明白了。从 0.7.1 版本开始，该函数在 _regionprops.py 中定义。结果76其实是对的。它计算形状为 (20, 20) 的白色正方形的周长。

您认为每边占 20 个像素，总计 80 个像素。但是通过这样做，您可以计算两倍的角像素。移除角落像素，您最终会得到 76 像素的周长。

对于其他形状，差异可能不是 4 个像素。

**编辑 2**

查看源代码和文档：

*   regionprops 的文档说周长是周长的近似值：

> 使用 4 连接将轮廓近似为通过边界像素中心的线的对象周长。

*   该代码计算一个由图像减去其侵蚀组成的边界图像。这个数组对应于我在第一次编辑中的周长概念。

*   然后它通过对边界图像应用卷积和加权和来计算*周长。*我认为这样做是为了计算通过边界像素中心的线的长度，如文档中所述。

如果您想了解更多详细信息，您应该询问其中一位开发人员。这是包中的一个非常新的功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-17T05:53:42.627

代码测量中心到每个连接像素的中心

# android - AudioRecord 和 MediaRecorder Android 并行

> ID：12934157
> 
> 赞同：2
> 
> 时间：2012-10-17T12:17:43.527
> 
> 标签：android, time, mediarecorder, audiorecord, android-audiorecord

我必须同时在我的应用程序和音频记录 MediaRecorder 中使用。一个注册我的脚本，另一个用于显示带有输入信号幅度的声音输入。当我同时使用但独立使用时，我的应用程序崩溃了，它工作正常。那么你有我可以同时使用的解决方案吗？？？

```
Trace logCat :
10-16 22:02:08.675: E/MediaRecorder(9007): start failed: -1
10-16 22:02:08.675: W/System.err(9007): java.lang.RuntimeException: start failed.
10-16 22:02:08.675: W/System.err(9007):     at android.media.MediaRecorder.start(Native Method)
10-16 22:02:08.675: W/System.err(9007):     at com.ax.audio_recorder.viewlvlmicro.SoundMeter.start(SoundMeter.java:40)
10-16 22:02:08.675: W/System.err(9007):     at com.ax.audio_record.MainActivity.start(MainActivity.java:177)
10-16 22:02:08.675: W/System.err(9007):     at com.ax.audio_record.MainActivity.access$0(MainActivity.java:173)
10-16 22:02:08.680: W/System.err(9007):     at com.ax.audio_record.MainActivity$3.onClick(MainActivity.java:154)
10-16 22:02:08.680: W/System.err(9007):     at android.view.View.performClick(View.java:2538)
10-16 22:02:08.680: W/System.err(9007):     at android.view.View$PerformClick.run(View.java:9152)
10-16 22:02:08.680: W/System.err(9007):     at android.os.Handler.handleCallback(Handler.java:587)
10-16 22:02:08.680: W/System.err(9007):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-16 22:02:08.680: W/System.err(9007):     at android.os.Looper.loop(Looper.java:130)
10-16 22:02:08.680: W/System.err(9007):     at android.app.ActivityThread.main(ActivityThread.java:3691)
10-16 22:02:08.680: W/System.err(9007):     at java.lang.reflect.Method.invokeNative(Native Method)
10-16 22:02:08.680: W/System.err(9007):     at java.lang.reflect.Method.invoke(Method.java:507)
10-16 22:02:08.680: W/System.err(9007):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
10-16 22:02:08.680: W/System.err(9007):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
10-16 22:02:08.680: W/System.err(9007):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:21:48.120

Android 设备所基于的许多平台将打开的音频输入流的数量限制为 1，当您在关闭第一个之前尝试创建另一个时，这会导致异常。

您可以使用 AudioRecord 记录原始 PCM，并将该数据用于将其写入文件（如果这就是“注册我的脚本”的意思）和作为可视化工具的输入。不利的一面是，如果您想保存压缩的音频（例如 mp3），您需要自己在应用程序中处理编码。

# python - pexpect.run 无法运行长命令

> ID：12934159
> 
> 赞同：0
> 
> 时间：2012-10-17T12:17:44.287
> 
> 标签：python, pexpect

我`pexpect.run`用来执行命令。见下文：

```
cmd = "grep -L killed /dir/dumps/*MAC-66.log"
output = pexpect.run(cmd) 
```

当我运行它时，`output`等于：

```
grep: /dir/dumps/*MAC-66.log: No such file or directory 
```

但是当我在我的 shell 中运行相同的命令时，它每次都有效。我没有看到问题。任何帮助表示赞赏！**pexpect.run**是否需要以某种奇特的方式拆分命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:37:17.293

你的 shell 正在解释 glob，pexpect 不是。您可以使用 python 的`glob.glob()`函数自己评估 glob，也可以通过 shell 运行它，例如：

```
cmd = "bash -c 'grep -L killed /dir/dumps/*MAC-66.log'" 
```

此外，如果您所追求的只是此命令的输出，则应该检查该`subprocess`模块。

# php - 显示一个表中的多列

> ID：12934160
> 
> 赞同：2
> 
> 时间：2012-10-17T12:17:45.373
> 
> 标签：php, sql, pivot

项目清单

我是 php 新手，我正在尝试执行以下操作：

```
empid  Salary   Month
1      2342     Jan 
1      3234     Feb
1      3445     Mar
2      3222     Jan
2      3342     Feb
3      3352     Mar 
```

我如何将其显示为：

```
empid  jan   feb    mar
1      2342  3234  3445
2      3222  3342  3352 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:20:42.367

您需要*像*这样将行转换为列：

```
SELECT
  emp_id,
  MAX(CASE WHEN month_end = 'jan' THEN salary END) 'jan',
  MAX(CASE WHEN month_end = 'feb' THEN salary END) 'feb',
  MAX(CASE WHEN month_end = 'mar' THEN salary END) 'mar'
FROM Emps
GROUP BY emp_id 
```

这是执行此操作的标准方法。它应该适用于所有 RDBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:24:34.780

您没有指定您的 RDBMS，但如果您使用的是 MySQL，并且您返回的值数量未知，那么您使用准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when month_end = ''',
      month_end,
      ''' then salary end) AS ',
      month_end
    )
  ) INTO @sql
FROM yourTable;

SET @sql = CONCAT('SELECT Emp_Id, ', @sql, ' 
                    FROM yourtable 
                    GROUP BY Emp_Id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

或者您可以通过类似于@Mahmoud 的答案的静态版本对所有月份进行硬编码

如果您在具有`PIVOT`类似于 SQL Server 的功能的 RDBMS 中工作，则可以使用以下内容：

```
select *
from
(
    select emp_id, salary, month_end
    from yourtable
) x
pivot
(
    max(salary)
    for month_end in ([jan], [feb], [mar])
) p 
```

或者使用动态sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(month_end) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT emp_id, ' + @cols + ' from 
             (
                select emp_id, salary, month_end
                from yourtable
            ) x
            pivot 
            (
                max(salary)
                for month_end in (' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:42:47.517

```
SELECT emp_id AS emp_id , 
[jan], [feb], [mar]
FROM
(SELECT month_end , salary 
    FROM Emps) AS SourceTable
PIVOT
(
AVG(salary )
FOR month_end IN ([jan], [feb], [mar])
) AS PivotTable; 
```

# wordpress - 在 wordpress 上显示帖子的查看次数

> ID：12934161
> 
> 赞同：4
> 
> 时间：2012-10-17T12:17:54.150
> 
> 标签：wordpress, wordpress-theming

我正在开发一个 wordpress，并使用一个插件 wordpress 流行的帖子，并面临这个问题。

如何在博客的类别列表页面或索引页面上显示访问者查看页面的次数。此信息已经存在，插件正在使用该信息在侧边栏中显示相同的信息，不确定如何使用相同的插件数据在博客页面上显示页面查看次数。

我试图找到这个，但没有得到我想要的。

请建议如何做到这一点？

我使用的插件是[http://wordpress.org/extend/plugins/wordpress-popular-posts/](http://wordpress.org/extend/plugins/wordpress-popular-posts/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-02-21T05:39:35.907

**你可以简单地做到这一点没有插件。**

要计算帖子浏览量，您要做的第一件事是将以下代码添加到您的 WordPress 主题**functions.php**

```
<?php
/*
 * Set post views count using post meta//functions.php
 */
function customSetPostViews($postID) {
    $countKey = 'post_views_count';
    $count = get_post_meta($postID, $countKey, true);
    if($count==''){
        $count = 0;
        delete_post_meta($postID, $countKey);
        add_post_meta($postID, $countKey, '1');
    }else{
        $count++;
        update_post_meta($postID, $countKey, $count);
    }
}
?> 
```

现在我们将在**single.php**中调用这个函数来更新数据库中的计数值。

```
<?php 
    customSetPostViews(get_the_ID());//single.php
?> 
```

现在在同一个**single.php**文件中，如果我们想显示帖子查看次数，我们可以使用以下代码：

```
<?php
    $post_views_count = get_post_meta( get_the_ID(), 'post_views_count', true );
    // Check if the custom field has a value.
    if ( ! empty( $post_views_count ) ) {
        echo $post_views_count;
    }
?> 
```

现在按帖子查看次数按降序显示所有热门帖子。使用此代码：

```
<?php//popular post query
    query_posts('meta_key=post_views_count&posts_per_page=5&orderby=meta_value_num&
    order=DESC');
    if (have_posts()) : while (have_posts()) : the_post();
?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php
    endwhile; endif;
    wp_reset_query();
?> 
```

***快乐编码***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:41:39.630

`wpp_get_views`插件提供了一个调用函数。如果您知道要显示查看次数的帖子/页面的 ID，您需要做的就是使用该 ID 作为参数调用函数。例如：

```
$count = wpp_get_views($post->ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-04T07:58:20.377

```
add_action('init','cr_tbl',55);

function cr_tbl(){

        global $wpdb;
    $table_add_two = $wpdb->prefix."post_view";
    $cat_rating_ddl="
        CREATE TABLE IF NOT EXISTS  `".$table_add_two."` (
          `pvid` INT(11) UNSIGNED AUTO_INCREMENT,
          `ip` varchar(255) NOT NULL,
          `device` varchar(255) NOT NULL,         
          `postid` int(11) NOT NULL,
          `create_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
          PRIMARY KEY(pvid)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    ";  
    $all_tables = array();
    $mytables=$wpdb->get_results("SHOW TABLES");
    foreach ($mytables as $mytable){
        foreach ($mytable as $t){                   
            $all_tables[]=$t;
        }
    }       
    $sql_one='';
    if(!in_array($table_add_two,$all_tables)){
        $sql_one.=$cat_rating_ddl;
        if(!empty($sql_one)){
            if(!function_exists('wp_should_upgrade_global_tables')){
                require(ABSPATH . 'wp-admin/includes/upgrade.php');
            }
            dbDelta($cat_rating_ddl);
        }       
    }

}

function get_the_user_ip() {

    if(!empty($_SERVER['HTTP_CLIENT_IP'])){
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    }elseif(!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
    }else{
        $ip = $_SERVER['REMOTE_ADDR'];
    }
    return $ip;}

    function add_view_record($pid){
     global $wpdb;
     $ip = get_the_user_ip();    
     $device = (wp_is_mobile())?'mobile':'desktop';         
     $table_name = $wpdb->prefix.'post_view';
     $list = $wpdb->get_results("SELECT * FROM $table_name WHERE postid = $pid and ip = '".$ip."'");        
     if(empty($list)){      
        $wpdb->insert($table_name, 
            array( 
                'ip' => $ip,
                'device' => $device,
                'postid' =>$pid,                
            )
        );                                   
     }}

    function get_view_count($pid){
    $total=0;
    global $wpdb;       
    $table_name = $wpdb->prefix.'post_view';
    $list = $wpdb->get_results("SELECT count(pvid) as total FROM $table_name WHERE postid = ".$pid);        
    if(!empty($list)){         
           $total=$list[0]->total;  
    }       
    return $total;} 
```

# android - Android 处理程序和 Looper.prepare() 问题

> ID：12934173
> 
> 赞同：1
> 
> 时间：2012-10-17T12:18:36.953
> 
> 标签：android, graphics, runnable, looper

我正在为 android 创建一个太空射击游戏，我目前正在实施射击方法，但是在尝试创建新镜头并绘制它们时遇到了一些我无法弄清楚的问题。

我有这个方法：

```
 public void createShot(int time){

     if(shotCreated==true && time<=0){
         System.out.println("Funkar");
         Shot temp = new Shot(shipX,700);
         System.out.println("Funkar2");
         shotList.add(temp);

     }else if(time>=10){
         tick=0;
     }
} 
```

从 run() 方法调用但我收到错误：java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()

我试过在论坛上研究它，但完全可以弄清楚如何解决它，有人可以帮助我吗？

问候，弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:22:30.763

在你的 run() 方法中，将这两行放在顶部

```
Looper.myLooper();
Looper.prepare(); 
```

# c# - 如何在属性网格中编辑可扩展属性的字段？

> ID：12934183
> 
> 赞同：1
> 
> 时间：2012-10-17T12:19:34.563
> 
> 标签：c#, winforms, custom-controls, propertygrid, design-time

我创建了一个具有多个属性的自定义控件。我向我的自定义控件添加了一些可扩展的属性。现在，我希望用户可以编辑属性网格中的可扩展属性字段，并为其相关属性设置新的输入值。我在属性网格中的可扩展属性是“必需标志”，并且有两个子属性，如下所示：

1.  前景色

2.  可见的

我将“Required Sign”可扩展属性的两个子属性的值设置为“Required Sign”属性的字段，如下图所示：

![](../Images/a0077ed05d6712acf32c0908885fe4cd.png)

1.  绿框：“必需标志”可扩展属性

2.  蓝框：“必需标志”可扩展属性的两个子属性

3.  红框：“必需标志”可扩展属性的字段

但是，我无法直接更改或编辑“必填符号”可扩展属性的字段值。如何更改或编辑可扩展属性（图中红框）的字段值？

我的代码如下：

```
[DisplayName("Label Information")]
[Description("Label Informationnnnnnnnnnnnnnnn")]
[DefaultProperty("Text")]
[DesignerCategory("Component")]
[TypeConverter(typeof(AllFloorsContentsLabelInformationTypeConverter))]
public class AllFloorsContentsLabelInformation : LabelX
{
    private AllFloorsContentsLabelRequiredSignInformation allFloorsContentsLabelRequiredSignInformation = new AllFloorsContentsLabelRequiredSignInformation();

    public AllFloorsContentsLabelInformation()
    {

    }

    [Category("Data")]
    [DisplayName("Required Sign")]
    [Description("Required Signnnnnnnnnnnnnnn")]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    public AllFloorsContentsLabelRequiredSignInformation AllFloorsContentsLabelRequiredSignInfo
    {
        get
        {
            return allFloorsContentsLabelRequiredSignInformation;
        }
    }
}

[DisplayName("Required Sign Information")]
[Description("Required Sign Informationnnnnnnnnnnnnnnn")]
[DefaultProperty("Text")]
[DesignerCategory("Component")]
[TypeConverter(typeof(AllFloorsContentsLabelRequiredSignInformationTypeConverter))]
public class AllFloorsContentsLabelRequiredSignInformation
{
    private Color foreColor = Color.Red;
    private ConfirmationAnswers visible = ConfirmationAnswers.Yes;

    public AllFloorsContentsLabelRequiredSignInformation()
    {

    }

    [Category("Appearance")]
    [DisplayName("ForeColor")]
    [Description("ForeColor")]
    [DefaultValue(typeof(Color), "Red")]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    public new Color ForeColor
    {
        get
        {
            return foreColor;
        }
        set
        {
            foreColor = value;
        }
    }

    [Category("Behavior")]
    [DisplayName("Visible")]
    [Description("Visibleeeeeeeeeeeeeeeeee")]
    [DefaultValue(ConfirmationAnswers.Yes)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    public ConfirmationAnswers Visible
    {
        get
        {
            return visible;
        }
        set
        {
            visible = value;
        }
    }
}

public class AllFloorsContentsLabelRequiredSignInformationTypeConverter : ExpandableObjectConverter//TypeConverter
{
    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        if (destinationType == typeof(AllFloorsContentsLabelRequiredSignInformation))
        {
            return true;
        }
        return base.CanConvertTo(context, destinationType);
    }

    public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(String) && value is AllFloorsContentsLabelRequiredSignInformation)
        {
            AllFloorsContentsLabelRequiredSignInformation allFloorsContentsLabelRequiredSignInformation = (AllFloorsContentsLabelRequiredSignInformation)value;
            return allFloorsContentsLabelRequiredSignInformation.ForeColor.ToString() + "; " + allFloorsContentsLabelRequiredSignInformation.Visible.ToString();
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }

    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
        {
            return true;
        }
        return base.CanConvertFrom(context, sourceType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value)
    {
        if (value is string)
        {
            AllFloorsContentsLabelRequiredSignInformation allFloorsContentsLabelRequiredSignInformation = new AllFloorsContentsLabelRequiredSignInformation();
            string strExtractData = (string)value;
            Color clrForeColor = Color.FromName(strExtractData.Substring(0, strExtractData.IndexOf(";") - 1).Trim());
            string strVisible = strExtractData.Substring(strExtractData.IndexOf(";") + 1, strExtractData.Length).Trim();

            allFloorsContentsLabelRequiredSignInformation.ForeColor = clrForeColor;
            if (strVisible == "Yes")
            {
                allFloorsContentsLabelRequiredSignInformation.Visible = ConfirmationAnswers.Yes;
            }
            else
            {
                allFloorsContentsLabelRequiredSignInformation.Visible = ConfirmationAnswers.No;
            }
            return allFloorsContentsLabelRequiredSignInformation;
        }
        return base.ConvertFrom(context, culture, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:43:24.993

您的属性只有一个“获取”，因此它是只读的。尝试添加“设置”属性：

```
[Category("Data")]
[DisplayName("Required Sign")]
[Description("Required Signnnnnnnnnnnnnnn")]
[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
public AllFloorsContentsLabelRequiredSignInformation AllFloorsContentsLabelRequiredSignInfo {
  get {
    return allFloorsContentsLabelRequiredSignInformation;
  }
  set {
    allFloorsContentsLabelRequiredSignInformation = value;
  }
} 
```

您`ConvertFrom`有需要进行更多错误检查的问题。

# android - 相对于旋转角度的矩形坐标

> ID：12934184
> 
> 赞同：7
> 
> 时间：2012-10-17T12:19:36.270
> 
> 标签：android, math, game-physics, discrete-mathematics

我正在尝试使用 Surfaceview 和画布绘图在 Android 中创建自定义组件。组件可通过触摸重新调整大小和旋转。考虑创建一个图像视图，其顶部、右侧、底部和左侧边缘可通过触摸和拖动所需边缘进行缩放。我`RectF`用来保持组件的边界，对于旋转我正在使用`canvas.rotate(angle, bounds.centerX(),bounds.centerY())`方法。问题是在调整顶部边缘的大小时， Let 、 Right 和 Bottom 边缘应该固定，如果旋转角度不是 0 度，我无法修复它。我需要一个数学解决方案来找出旋转矩形相对于实际矩形边界的 x,y 坐标。

我可以借助一些图像来解释它。下图显示了两个矩形，它们的边界也是已知的，并以各自的颜色显示。**将绿色矩形视为组件的初始边界，即。旋转 -45 度，中心为 (10,10)**。现在要重新调整矩形**顶部边缘**的大小并显示在下一个图 2 中。

![图1](../Images/0e35e20a4bda951277ee197e2fa0e52d.png)

从图 2 可以看出，Y 位置从 6 减少到 4。旋转后的 Rectangle 也以粉红色显示。请记住，当组件处于旋转角度 -45 度时，我正在调整大小，因此在拖动**顶部边缘**矩形的**左侧、右侧和底部位置时不应更改**。因此，**图 2 的粉色矩形**应该具有与**图 1 的绿色矩形**相同的**左、右和下坐标**。获得的矩形和预期的矩形的比较如图 3 所示。

 **![图 2](../Images/1f5cebc61d32d48cb581c074f8c38e62.png)

在图 3 中，**黄色矩形是预期/必需**输出。与绿色旋转的矩形相比，**获得的矩形粉红色**向上移动**，并且变化取决于旋转角度**。

*   我有旋转角度= -45度
*   实际（未调整大小）矩形的边界。
*   旋转时实际（未调整大小）矩形的边界 = -45 度。
*   重新调整大小的矩形的边界。
*   旋转时重新调整大小的矩形的边界 = -45 度。

**如何计算黄色矩形的边界/中心。这样我就可以正确地调整组件的大小了吗？让我知道有什么数学可以应用吗？**

**所需的点/坐标在图 3 中标记为红色圆圈。**

![图 3](../Images/b709258e92330068f366e1df683b03be.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-10T21:30:03.373

关键是：“如果旋转角度不是 0 度，我无法修复它。”

假设您的矩形旋转了 10 度。

1）将鼠标坐标围绕屏幕上的某个点旋转-10度

2）将矩形的中心旋转-10度

...现在您将问题简化为 0 度的矩形。矩形移动了，是的，鼠标移动了，但它们应该是相对的。

3) 现在进行矩形操作。矩形中心将移动。

4）将新的矩形中心旋转10度

这样您就不必考虑它，并且您始终在未旋转的坐标中工作。

`[x, y]`旋转角度的点将`a`结束于`[x*cos(a) - y*sin(a), x*sin(a) + y*cos(a)]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:24:33.780

*此答案中的所有颜色均参考您的图 3。*

如果我正确理解了您的问题，您就会知道如何计算有关粉红色矩形和绿色矩形的所有细节。所以简单地取粉红色矩形的一个角和绿色矩形的对应角之间的差异。将该差值（一个二元素向量，即分别为*x*和*y*的差值）添加到粉红色矩形的中心将为您提供所需的黄色三角形中心。

如果您还需要计算粉红色矩形的尺寸，您可能希望在未旋转的坐标系中这样做。将绿色矩形与要向其扩展矩形的点的坐标一起获取，然后将它们向后旋转 +45°。然后您可以将矩形的高度扩展到您想要的值，这将为您提供蓝色矩形，然后通过旋转粉红色矩形。**

# javascript - Javascript“推入”数组不起作用（Facebook应用程序）

> ID：12934186
> 
> 赞同：0
> 
> 时间：2012-10-17T12:19:40.483
> 
> 标签：javascript, arrays, facebook, facebook-graph-api, push

我正在尝试将我的朋友列表（姓名、图片和性别）存储在 var 上，但它无法正常工作。请准备好代码中的注释以获取详细信息。有任何想法吗？谢谢。

```
function getFriendsArray() {    
    var friendsArray = [];
        FB.api('/me/friends?fields=name,picture,gender', function(response) {
      if(response.data) {
        var data = '';
        $.each(response.data, function(indice, item) {
            alert(item.name); // Friend's name are displayed correctly
            friendsArray.push(item); // I believe this doesn't work
        });                       
      }
      else {
          errorHandler('getFriendsArray', JSON.stringify(response));
      }
    });

alert(friendsArray.length); // Returns 0 (incorrect)

return friendsArray.sort(sortByName);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:22:52.273

调用`function(response)`是异步的。您应该在之后插入警报`$.each`

为了完整性：您应该改变解决问题的方法：不要调用返回数组但调用第二个函数的函数。

```
function getFriendsArray(callback, errorHandler) {    
    var friendsArray = [];
        FB.api('/me/friends?fields=name,picture,gender', function(response) {
      if(response.data) {
        var data = '';
        $.each(response.data, function(indice, item) {
            alert(item.name); // Friend's name are displayed correctly
            friendsArray.push(item); // I believe this doesn't work
        });
        callback(friendsArray);                       
      }
      else {
          errorHandler('getFriendsArray', JSON.stringify(response));
      }
    });
}

getFriendsArray(function(friends) {
    alert(friends);
},
function(error) {
    alert('error');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:23:36.750

看起来 FB.api 发出了一个异步请求（如 jQuery.ajax），因此您`alert(friendsArray.length)`在 FB.api 调用完成并将结果推送到朋友数组之前执行。

# anchor - 带有部分的站点地图中的锚链接

> ID：12934189
> 
> 赞同：4
> 
> 时间：2012-10-17T12:19:51.387
> 
> 标签：anchor, sitemap, sections

我在我的网页中使用了很多锚链接，因为它只有一个页面可以通过单击菜单向下滚动。我也把我的页面分成几部分。

现在我正忙于为谷歌制作我的 sitemap.xml，但我不确定是否需要放入所有部分/锚链接。

我的菜单是这样的：

```
<nav id="nav" role="navigation">
            <ul class="clearfix">
                <li>
                    <a class="selected firstnav" href="#home" tabindex="-1">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#watdoenwij" tabindex="-1">
                        Wat doen wij
                    </a>
                </li>
                <li>
                    <a href="#portfolio" tabindex="-1">
                        Portfolio
                    </a>
                </li>
                <li>
                    <a href="#werkwijze" tabindex="-1">
                        Werkwijze
                    </a>
                </li>
                <li>
                    <a href="#uwwebsite" tabindex="-1">
                        De Website
                    </a>
                </li>
                <li>
                    <a class="lastnav" href="#contact" tabindex="-1">
                        Offerte & Contact
                    </a>
                </li>
            </ul>
        </nav> 
```

如您所见，我只使用指向#contact/#portfolio 等的链接。我必须将所有链接都放在我的站点地图中吗？

```
http://www.domain.com/index.php#contact
http://www.domain.com/index.php#uwwebsite
http://www.domain.com/index.php#portfolio 
```

我觉得不合适？也许谷歌将其视为双重内容......

如果我必须将它添加到我的站点地图中，我必须使用哪个链接？

```
http://www.domain.com/index.php#contact 
http://www.domain.com/#contact 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-13T21:11:43.260

不，您不应该包含锚链接。它们指的是同一个页面，站点地图指定了内容更改的频率，但它都是一页。

# python - 列表是否有简短的包含功能？

> ID：12934190
> 
> 赞同：572
> 
> 时间：2012-10-17T12:19:53.703
> 
> 标签：python, list, search, collections, contains

我看到人们正在使用`any`收集另一个列表来查看列表中是否存在某个项目，但是有没有一种快速的方法来做这样的事情？

```
if list.contains(myItem):
    # do something 
```

* * *

## 回答 #1

> 赞同：965
> 
> 时间：2012-10-17T12:21:03.770

您可以使用以下语法：

```
if myItem in some_list:
    # do something 
```

此外，逆运算符：

```
if myItem not in some_list:
    # do something 
```

它适用于列表、元组、集合和字典（检查键）。

**请注意**，这在列表和元组中是 O(n) 操作，但在集合和字典中是 O(1) 操作。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-10-17T12:36:43.403

除了其他人所说的之外，您可能还想知道什么`in`是调用`list.__contains__`方法，您可以在您编写的任何类上定义该方法，并且可以非常方便地充分利用 python。  

一个愚蠢的用途可能是：

```
>>> class ContainsEverything:
    def __init__(self):
        return None
    def __contains__(self, *elem, **k):
        return True

>>> a = ContainsEverything()
>>> 3 in a
True
>>> a in a
True
>>> False in a
True
>>> False not in a
False
>>> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-25T23:08:12.543

我最近想出了一个衬里，用于获取`True`列表是否包含任意数量的项目，或者`False`它是否包含任何事件或根本没有。Using`next(...)`给它一个默认的返回值 ( `False`) 并且意味着它应该比运行整个列表理解运行得更快。

`list_does_contain = next((True for item in list_to_test if item == test_item), False)`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-17T12:22:43.537

如果项目不存在， list 方法`index`将返回`-1`，如果存在，则返回列表中项目的索引。或者，`if`您可以在语句中执行以下操作：

```
if myItem in list:
    #do things 
```

您还可以使用以下 if 语句检查元素是否不在列表中：

```
if myItem not in list:
    #do things 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-26T13:11:42.843

还有list方法：

```
[2, 51, 6, 8, 3].__contains__(8)
# Out[33]: True
[2, 51, 6, 3].__contains__(8)
# Out[33]: False 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-18T10:53:09.053

还有另一种方法使用`index`. 但我不确定这是否有任何错误。

```
list = [5,4,3,1]
try:
    list.index(2)
    #code for when item is expected to be in the list
    print("present")
except:
    #code for when item is not expected to be in the list
    print("not present") 
```

输出：

> 不存在

# facebook - 如何将 Facebook 评论和提要拉到 hadoop？

> ID：12934191
> 
> 赞同：4
> 
> 时间：2012-10-17T12:19:54.127
> 
> 标签：facebook, hadoop

我正在做一个案例研究，我必须从我的 facebook 页面获取评论、活动等，并将它们聚合到 Hadoop 中，以便使用 map reduce 进行文本分析。

拉Facebook粉丝页面Feed的正确方法是什么？是否有任何 API 可供 hadoop 组件（如 flume 或 scribe）使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:25:16.013

是的，JSON API 叫做[Graph](https://developers.facebook.com/docs/reference/api/)，我建议你从[教程开始](https://developers.facebook.com/docs/opengraph/tutorial/)

# android - 当我将其应用于我的 EditTexts 时，最终 LayoutParams size=new LayoutParams(200, 25) 不起作用

> ID：12934193
> 
> 赞同：0
> 
> 时间：2012-10-17T12:20:02.637
> 
> 标签：android, android-layout

当我在代码行中将“大小”作为参数传递时，它显示没有工作......这是我的代码

```
 final LayoutParams size=new LayoutParams(200, 25);//globally declared 

        private void Add() {
            // TODO Auto-generated method stub
            // TODO Auto-generated method stub
            TableLayout myTable = new TableLayout(AddParing.this);
            EditText[][] myEditTexts = new EditText[2][2];
            myTable.setLayoutParams(new LayoutParams(
                    LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            TableRow[] myRow = new TableRow[2];
            for (int a = 0; a < 1; a++) {
                myRow[a] = new TableRow(AddParing.this);
                myRow[a].setLayoutParams(new LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                for (int b = 0; b < 2; b++) {

                    myEditTexts[a][b] = new EditText(AddParing.this);
                    myEditTexts[a][b].setText("");
                    myEditTexts[a[b].setBackgroundResource(R.drawable.input_bar);
                    myEditTexts[a][b].setLayoutParams(size);
                    //myEditTexts[a][b].setHeight(15);
                    myRow[a].setGravity(Gravity.CENTER);
                    myRow[a].addView(myEditTexts[a][b]);
                }
                myTable.addView(myRow[a]);
            }
            TableLayout lin = (TableLayout) findViewById(R.id.tableLayout1);
            lin.addView(myTable);
        }

    }); 
```

我想申请`setlayoutparams()`. 那么我该如何申请才能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:25:40.333

```
 final TableRow.LayoutParams size=new TableRow.LayoutParams(200, 25); 
```

使用此代码即可。

# c++ - 意外调用copyWithZone c++ cocos2d

> ID：12934194
> 
> 赞同：0
> 
> 时间：2012-10-17T12:20:05.063
> 
> 标签：c++, cocos2d-iphone, copywithzone

我有一些麻烦。

我做了一些接口（c++ 中的抽象类）。在我的类中实现它（也从 CCObject 派生）。在第三堂课中，我尝试调用接口的方法并获得 SIGABORT。这里的代码

```
 //interface class

class CallBackInterface
 {
 public:
       virtual void SomeMethod() = 0;
 };

 //my class that implement the interface 
 class MyClass : public CallBackInterface, public CCObject
 {
 public:
       void SomeMethod(){/*some realization*/}; 
 };

 //class that invoke the SomeMethod

class CallBacker()
 {
 public:
       CallBackInterface* callBackObject;
 };

 //main code

CallBacker* callBacker = new CallBacker();
 MyClass* myClass = new MyClass();
 callBacker->callBackObject = myClass;

/*
this string generate unexpected invoke of copyWithZone method CCObject's class
with SIGABORT. */

callBacker->callBackObject->SomeMethod();

/*
In debugger mode I see that SomeMethod don't invoke (debugger don't  go                                into it). Here the copyWithZone*/

CCObject* CCCopying::copyWithZone(CCZone *pZone)
    {
        CC_UNUSED_PARAM(pZone);
        CCAssert(0, "not implement"); <<- here is SIGABORT
        return 0;
    } 
```

调用使`copyWithZone`我的应用程序崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T06:37:09.297

```
class CallBackInterface : public CCObject
{
public:
     virtual void SomeMethod() = 0;
};

class MyClass : public CallBackInterface
{
     void SomeMethod(){}
}; 
```

尝试这个！我以前遇到过同样的问题。

# c# - 如何访问 docx 默认样式

> ID：12934198
> 
> 赞同：2
> 
> 时间：2012-10-17T12:20:17.410
> 
> 标签：c#, openxml, office-interop, openxml-sdk

我一直在尝试获取有关每个运行/段落的所有 docx 文档内容和信息。到目前为止，我已经设法从运行/段落属性中获取样式信息。

```
using (WordprocessingDocument doc = WordprocessingDocument.Open(filePath, false))
        {
            MainDocumentPart mainPart = doc.MainDocumentPart;
            IEnumerable<Paragraph> paragraphs = mainPart.Document.Body.OfType<Paragraph>();
            foreach (Paragraph paragraph in paragraphs)
            {
                string text = paragraph.InnerText;

                IEnumerable<Run> runs = paragraph.Descendants<Run>();
                foreach (Run run in runs)
                {
                    string runText = run.InnerText;
                    RunProperties properties = run.RunProperties;
                    string fontsize = properties.FontSize.Val;
                    string fontsize2 = properties.FontSizeComplexScript.Val;
                    string fontaname = properties.RunFonts.HighAnsi;
                }
            }
        } 
```

但这只有在文本的格式（样式）不是默认值时才有效。换句话说，`properties != null`里面的成员不是`null`。到目前为止，我只看到一种方法 - 获取 style.xml 形成内容。在互联网上搜索没有给我任何线索。那么，如何访问 style.xml 或获取默认字体名称、字体大小等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T10:45:46.370

要使用 OpenXML 获取默认样式，可以使用以下代码段：

```
using (WordprocessingDocument doc = WordprocessingDocument.Open(filePath, true))
{

   DocDefaults defaults = doc.MainDocumentPart.StyleDefinitionsPart.Styles.Descendants<DocDefaults>().FirstOrDefault();
   //get the font size
   string fontSize = defaults.RunPropertiesDefault.RunPropertiesBaseStyle.FontSize.Val;
   //get the font prob. (Ascii, HAnsi, ComplexScript,...etc)
   RunFonts runFont = defaults.RunPropertiesDefault.RunPropertiesBaseStyle.RunFonts;

} 
```

至于主题，您可以使用以下方法获取主要和次要字体：

```
var latineMajorFont = doc.MainDocumentPart.ThemePart.Theme.ThemeElements.FontScheme.MajorFont.LatinFont;
var latinMinorFont = doc.MainDocumentPart.ThemePart.Theme.ThemeElements.FontScheme.MinorFont.LatinFont;
var complexMajorFont = doc.MainDocumentPart.ThemePart.Theme.ThemeElements.FontScheme.MajorFont.ComplexScriptFont;
var complextMinorFont = doc.MainDocumentPart.ThemePart.Theme.ThemeElements.FontScheme.MinorFont.ComplexScriptFont; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T18:57:45.100

默认段落样式是样式部分中带有@w:type="paragraph" 和**@w:default="1"的样式**

请注意，样式部分通常还包含以下内容：

```
 <w:docDefaults>
    <w:rPrDefault>
      <w:rPr>
        <w:rFonts w:asciiTheme="minorHAnsi" w:eastAsiaTheme="minorEastAsia" w:hAnsiTheme="minorHAnsi" w:cstheme="minorBidi"/>
        <w:sz w:val="22"/>
        <w:szCs w:val="22"/>
        <w:lang w:val="en-AU" w:eastAsia="ko-KR" w:bidi="ar-SA"/>
      </w:rPr>
    </w:rPrDefault>
    <w:pPrDefault>
      <w:pPr>
        <w:spacing w:after="200" w:line="276" w:lineRule="auto"/>
      </w:pPr>
    </w:pPrDefault>
  </w:docDefaults> 
```

有关详细信息，请参阅 Open XML 规范。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T14:01:11.653

```
<<So, how to find out when to use typeFace from minorFont and when from majorFont?>> 
```

majorFont 旨在与 Headings（标题 1 等）一起使用，minorFont 与“普通文本”一起使用。

# algorithm - 如何找出几何中位数

> ID：12934213
> 
> 赞同：32
> 
> 时间：2012-10-17T12:20:42.853
> 
> 标签：algorithm, computational-geometry

问题是：

> 给定具有 x 和 y 坐标的 N 个点（在 2D 中），找到一个点 P（在 N 个给定点中），使得从其他（N-1）个点到 P 的距离之和最小。

这个点通常被称为[几何中位数](http://en.wikipedia.org/wiki/Geometric_median)。除了天真的算法之外，还有什么有效的算法可以解决这个问题`O(N^2)`吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T12:38:03.027

[我曾经使用模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)为当地在线法官解决了类似的问题。这也是官方的解决方案，程序得到了 AC。

唯一的区别是我必须找到的点不必是`N`给定点的一部分。

这是我的 C++ 代码，`N`可能与`50000`. 该程序在`0.1s`2ghz 奔腾 4 上执行。

```
// header files for IO functions and math
#include <cstdio>
#include <cmath>

// the maximul value n can take
const int maxn = 50001;

// given a point (x, y) on a grid, we can find its left/right/up/down neighbors
// by using these constants: (x + dx[0], y + dy[0]) = upper neighbor etc.
const int dx[] = {-1, 0, 1, 0};
const int dy[] = {0, 1, 0, -1};

// controls the precision - this should give you an answer accurate to 3 decimals
const double eps = 0.001;

// input and output files
FILE *in = fopen("adapost2.in","r"), *out = fopen("adapost2.out","w");

// stores a point in 2d space
struct punct
{
    double x, y;
};

// how many points are in the input file
int n;

// stores the points in the input file
punct a[maxn];

// stores the answer to the question
double x, y;

// finds the sum of (euclidean) distances from each input point to (x, y)
double dist(double x, double y)
{
    double ret = 0;

    for ( int i = 1; i <= n; ++i )
    {
        double dx = a[i].x - x;
        double dy = a[i].y - y;

        ret += sqrt(dx*dx + dy*dy); // classical distance formula
    }

    return ret;
}

// reads the input
void read()
{
    fscanf(in, "%d", &n); // read n from the first 

    // read n points next, one on each line
    for ( int i = 1; i <= n; ++i )
        fscanf(in, "%lf %lf", &a[i].x, &a[i].y), // reads a point
        x += a[i].x,
        y += a[i].y; // we add the x and y at first, because we will start by approximating the answer as the center of gravity

    // divide by the number of points (n) to get the center of gravity
    x /= n; 
    y /= n;
}

// implements the solving algorithm
void go()
{
    // start by finding the sum of distances to the center of gravity
    double d = dist(x, y);

    // our step value, chosen by experimentation
    double step = 100.0;

    // done is used to keep track of updates: if none of the neighbors of the current
    // point that are *step* steps away improve the solution, then *step* is too big
    // and we need to look closer to the current point, so we must half *step*.
    int done = 0;

    // while we still need a more precise answer
    while ( step > eps )
    {
        done = 0;
        for ( int i = 0; i < 4; ++i )
        {
            // check the neighbors in all 4 directions.
            double nx = (double)x + step*dx[i];
            double ny = (double)y + step*dy[i];

            // find the sum of distances to each neighbor
            double t = dist(nx, ny);

            // if a neighbor offers a better sum of distances
            if ( t < d )
            {
                update the current minimum
                d = t;
                x = nx;
                y = ny;

                // an improvement has been made, so
                // don't half step in the next iteration, because we might need
                // to jump the same amount again
                done = 1;
                break;
            }
        }

        // half the step size, because no update has been made, so we might have
        // jumped too much, and now we need to head back some.
        if ( !done )
            step /= 2;
    }
}

int main()
{
    read();
    go();

    // print the answer with 4 decimal points
    fprintf(out, "%.4lf %.4lf\n", x, y);

    return 0;
} 
```

然后我认为从您的列表中选择最接近`(x, y)`该算法返回的一个是正确的。

这个算法利用了这个关于几何中位数的维基百科段落所说的：

> 然而，使用迭代过程计算几何中值的近似值很简单，其中每一步都会产生更准确的近似值。这种类型的过程可以从到样本点的距离之和是一个凸函数这一事实推导出来，因为到每个样本点的距离是凸的并且凸函数的总和仍然是凸的。因此，减少每一步距离总和的程序不能陷入局部最优。
> 
> 这种类型的一种常见方法，在 Endre Weiszfeld [4] 的工作之后称为 Weiszfeld 算法，是一种迭代重新加权最小二乘的形式。该算法定义了一组与当前估计值到样本的距离成反比的权重，并根据这些权重创建一个新的估计值，即样本的加权平均值。那是，

上面的第一段解释了为什么会这样：因为我们试图优化的函数没有任何局部最小值，所以你可以通过迭代改进来贪婪地找到最小值。

将其视为一种二分搜索。首先，你近似结果。一个很好的近似值是我的代码在读取输入时计算的重心。然后，您会查看与此相邻的点是否为您提供了更好的解决方案。`step`在这种情况下，如果一个点与您的当前点相距一定距离，则该点被认为是相邻的。如果它更好，那么丢弃您当前的点就可以了，因为正如我所说，由于您试图最小化的函数的性质，这不会使您陷入局部最小值。

在此之后，步长减半，就像二分搜索一样，并继续，直到你得到你认为足够好的近似值（由`eps`常数控制）。

因此，算法的复杂性取决于您希望结果有多准确。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-17T14:39:31.177

`O(n^2)`使用欧几里得距离时，似乎比时间更难解决问题。但是，可以及时找到使**曼哈顿**到其他点的距离之和最小化的点或使到其他点**的欧几里得距离的平方和**`O(n log n)`最小化的点。（假设两个数字相乘是`O(1)`）。[让我从最近的一篇文章](https://stackoverflow.com/questions/12905663/given-list-of-2d-points-find-the-point-closest-to-all-other-points/12905913#12905913)中无耻地复制/粘贴我的曼哈顿距离解决方案：

> 创建一个排序的 x 坐标数组，并为数组中的每个元素计算选择该坐标的“水平”成本。元素的水平成本是到投影到 X 轴上的所有点的距离之和。这可以通过扫描阵列两次（一次从左到右，一次在相反方向）以线性时间计算。类似地，创建一个 y 坐标的排序数组，并为数组中的每个元素计算选择该坐标的“垂直”成本。
> 
> 现在对于原始数组中的每个点，我们可以通过添加水平和垂直成本来计算 O(1) 时间内所有其他点的总成本。所以我们可以计算 O(n) 中的最佳点。因此总运行时间为 O(n log n)。

我们可以采用类似的方法来计算使欧几里得距离平方和最小化到其他点的点。让排序后的 x 坐标为： x [1] , x [2] , x [3] , ..., x [n]。我们从左到右扫描这个列表，并为每个点 x [i]我们计算：

l [i = 到 x] [i] = (x [i] -x [1] ) + (x [i] -x [2] ) + .... + (x [i] -x [i-1] )左侧所有元素的距离总和，并且

sl [i = 到 x] [i]左侧所有元素的距离平方和= (x [i] -x [1] )^2 + (x [i] -x [2] )^2 + .... + (x [i] -x [i -1] )^2

请注意，给定 l [i]和 sl [i]我们可以及时计算 l [i+1]和sl [i+1]`O(1)`如下：

令 d = x [i+1] -x [i]。然后：

l [i+1] = l [i] + i *d 和 sl [i+1] = sl [i] + i* d^2 + 2*i*d

因此，我们可以通过从左到右扫描，在线性时间内计算所有的 l [i]和 sl [i 。]类似地，对于每个元素，我们可以计算 r [i]：到右侧所有元素的距离之和，以及 sri [：]在线性时间内到右侧所有元素的距离平方和。为每个 i添加 sr [i]和 sl [i]，以线性时间给出到所有元素的水平距离平方和。同样，计算到所有元素的垂直距离的平方和。

然后我们可以像以前一样扫描原始点数组，找到使垂直和水平距离的平方和最小的点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-19T09:41:24.200

如前所述，要使用的算法类型取决于您测量距离的方式。由于您的问题未指定此度量，因此这里是*曼哈顿距离*和*平方欧几里得距离*的 C 实现。用于`dim = 2`二维点。复杂性`O(n log n)`。

**曼哈顿距离**

```
double * geometric_median_with_manhattan(double **points, int N, int dim) {
    for (d = 0; d < dim; d++) {
        qsort(points, N, sizeof(double *), compare);
        double S = 0;
        for (int i = 0; i < N; i++) {
            double v = points[i][d];
            points[i][dim] += (2 * i - N) * v - 2 * S;
            S += v;
        }
    }
    return min(points, N, dim);
} 
```

简短说明：我们可以将每个维度的距离相加，在您的情况下为 2。假设我们有点`N`，一维中的值是`v_0`、 ..`v_(N-1)`和`T = v_0 + .. + v_(N-1)`。`v_i`然后对于我们拥有的每个值`S_i = v_0 .. v_(i-1)`。现在我们可以通过将左侧的值相加来表示该值的曼哈顿距离：`i * v_i - S_i`和右侧：`T - S_i - (N - i) * v_i`，结果为`(2 * i - N) * v_i - 2 * S_i + T`。添加`T`到所有元素不会更改顺序，因此我们将其省略。并且`S_i`可以即时计算。

以下是使其成为实际 C 程序的其余代码：

```
#include <stdio.h>
#include <stdlib.h>

int d = 0;
int compare(const void *a, const void *b) {
    return (*(double **)a)[d] - (*(double **)b)[d];
}

double * min(double **points, int N, int dim) {
    double *min = points[0];
    for (int i = 0; i < N; i++) {
        if (min[dim] > points[i][dim]) {
            min = points[i];
        }
    }
    return min;
}

int main(int argc, const char * argv[])
{
    // example 2D coordinates with an additional 0 value
    double a[][3] = {{1.0, 1.0, 0.0}, {3.0, 1.0, 0.0}, {3.0, 2.0, 0.0}, {0.0, 5.0, 0.0}};
    double *b[] = {a[0], a[1], a[2], a[3]};
    double *min = geometric_median_with_manhattan(b, 4, 2);
    printf("geometric median at {%.1f, %.1f}\n", min[0], min[1]);
    return 0;
} 
```

**平方欧几里得距离**

```
double * geometric_median_with_square(double **points, int N, int dim) {
    for (d = 0; d < dim; d++) {
        qsort(points, N, sizeof(double *), compare);
        double T = 0;
        for (int i = 0; i < N; i++) {
            T += points[i][d];
        }
        for (int i = 0; i < N; i++) {
            double v = points[i][d];
            points[i][dim] += v * (N * v - 2 * T);
        }
    }
    return min(points, N, dim);
} 
```

更简短的解释：与前面的方法几乎相同，但推导稍微复杂一些。说`TT = v_0^2 + .. + v_(N-1)^2`我们得到`TT + N * v_i^2 - 2 * v_i^2 * T`. 再次将 TT 添加到所有内容中，因此可以将其排除在外。应要求提供更多解释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-03T17:36:36.690

我实现了 Weiszfeld 方法（我知道这不是你要找的，但它可能有助于近似你的点），复杂度是 O(N*M/k) 其中 N 是点的数量，M 的维度点（在您的情况下为 2），并且 k 是所需的错误：

[https://github.com/j05u3/weiszfeld-implementation](https://github.com/j05u3/weiszfeld-implementation)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-05T01:23:48.403

**第 1 步：**按 x 维度 (nlogn) 对点集合进行排序
**第 2 步：**计算每个点与其左侧的所有点之间的 x**距离**：

```
xLDist[0] := 0
for i := 1 to n - 1
       xLDist[i] := xLDist[i-1] + ( ( p[i].x - p[i-1].x ) * i) 
```

**第 3 步：**计算每个点与其右侧的所有点之间的 x**距离**：

```
xRDist[n - 1] := 0
for i := n - 2 to 0
       xRDist[i] := xRDist[i+1] + ( ( p[i+1].x - p[i].x ) * i) 
```

**第 4 步：**将两者相加，您将得到从每个点到其他 N-1 个点的总 x 距离

```
for i := 0 to n - 1
       p[i].xDist = xLDist[i] + xRDist[i] 
```

> 使用 y 维度重复步骤 1、2、3、4 以获得`p[i].yDist`

`xDist`和的和最小的点`yDist`就是答案

*总复杂度 O(nlogn)*

[用 C++ 回答](https://gist.github.com/rocketspacer/3bedf01a5020310e82c3)

**进一步解释：**
这个想法是重用已经计算的前一点的总距离。
假设我们对 3 点 ABCD 进行了排序，我们看到 D 与之前其他点的总左距离为：

> AD + BD + CD = (AC + CD) + (BC + CD) + CD = AC + BC + 3CD

其中`(AC + BC)`是 C 与之前其他人的总左距离，我们利用了这一点，只需要计算`ldist(C) + 3CD`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T20:51:40.660

您可以将问题解决为凸编程（目标函数并不总是凸的）。凸程序可以使用诸如 L-BFGS 之类的迭代来求解。每次迭代的成本为 O(N)，通常所需的迭代次数并不多。减少所需迭代次数的重要一点是，我们知道最佳答案是输入中的点之一。因此，当其答案接近输入点之一时，可以停止优化。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-01-27T18:18:23.980

我们需要找到的答案是几何中位数

C++ 中的代码

```
#include <bits/stdc++.h>
using namespace std;
int main()
{
    int n;
    cin >> n;

    int a[n],b[n];
    for(int i=0;i<n;i++) 
        cin >> a[i] >> b[i];
    int res = 0;
    sort(a,a+n);
    sort(b,b+n);

    int m1 = a[n/2];
    int m2 = b[n/2];

    for(int i=0;i<n;i++) 
        res += abs(m1 - a[i]);
    for(int i=0;i<n;i++) 
        res += abs(m2 - b[i]);

    cout << res << '\n';
} 
```

# php - 连接数据库错误

> ID：12934217
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:20:54.580
> 
> 标签：php, mysql, database, windows-7

我使用 NetBeans 运行 PHP 代码。该代码用于更新我们公司服务器上的数据库表。所以我使用了代码：

```
$link = mysql_connect('192.168.X.X:X','X','X');
mysql_select_db('X',$link);
if (!$link) {die('Could not connect: ' . mysql_error());}
            echo 'Connected successfully';
            mysql_close($link); 
```

但是当我单击运行时，会返回此错误消息：

```
( ! ) Warning: mysql_connect() [function.mysql-connect]: Can't connect to MySQL server on '192.168.0.140' (10060) in C:\wamp\www\database\index.php on line 9
( ! ) Warning: mysql_select_db(): supplied argument is not a valid MySQL-Link resource in C:\wamp\www\database\index.php on line 10
Call Stack 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:32:32.603

第一个错误是不言自明的。PHP 无法连接到给定主机上的数据库。为什么这可能需要您进一步调查（SQL 服务器是否正在运行？它是否配置为接受非本地连接？是否有防火墙保护 SQL 服务器正在侦听的端口？）

第二个错误是由于您没有费心检查连接是否成功而只是假设它成功了。如果无法建立连接，则 mysql_connect 将返回 false。您需要先检查这一点，然后才能确定您有一个有效的打开连接。

```
$link = mysql_connect('192.168.X.X:X','X','X');
if (false !== $link)
{
    mysql_select_db('X',$link);
    // Rest of your code goes here
} 
```

顺便说一句，您应该考虑不推荐使用 mysql_* 函数。有更好的选择，例如 mysqli 或 PDO，您应该使用其中之一。[PHP.net 上的手册页对](http://php.net/manual/en/function.mysql-connect.php)替代方案提出了一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:33:58.273

原因可能是

MySQL 服务器未运行。

MySQL 的配置文件指定它只在某个 IP:Port 上侦听，并且您没有通过指定的地址进行通信

用于向 MySQL 服务器进行身份验证的用户名不允许从客户端计算机的 IP 地址/主机连接

有关更多详细信息，请查看以下链接

[http://dev.mysql.com/doc/refman/5.1/en/can-not-connect-to-server.html](http://dev.mysql.com/doc/refman/5.1/en/can-not-connect-to-server.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:43:40.513

你可以检查你的mysql日志来检测问题。很难说到底是什么问题。可能是您的服务器未配置为通过 ip 进行远程连接。如果这是您可以使用的问题，前提是脚本在同一台服务器上

```
$link = mysql_connect('localhost','X','X') or die('error connecting to db'); 
```

# javascript - 代码执行顺序

> ID：12934219
> 
> 赞同：2
> 
> 时间：2012-10-17T12:20:57.403
> 
> 标签：javascript, ajax

```
function method1() {
    method2();
    var x = 1;
}

function method2() {
    $.ajax({
        type: "GET",
        async: true,
        url: "/MyController/MyMethod",
        success: function (data) {
            var y = 6;
        }
    });
} 
```

哪个先发生 - y 的初始化或 x 的初始化？`sync`如果 ajax 调用不是 ，那么这两行的顺序是`async`什么？

在加载页面时调用 method1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:27:30.023

如果它是同步的并且 GET 成功，则首先初始化 Y。如果它是异步的，也可以是异步的，但我会把钱放在 X 上，只是因为我怀疑它会在 web 方法返回之前继续。话虽如此，不能保证 X 会首先被解雇。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:30:08.150

x 将首先被初始化（除非 HTTP 响应在它能够执行下一行之前以某种方式返回，这是极不可能的）。$.ajax 是异步的，响应返回需要时间。

如果你想保证 y 首先被初始化，你可以这样做：

```
function method1() {
    method2(function()
    {
        var x = 1;
    });
}

function method2(callback) {
    $.ajax({
        type: "GET",
        async: true,
        url: "/MyController/MyMethod",
        success: function (data) {
            var y = 6;
            callback();
        }
    });
} 
```

# oracle - 如何将 Oracle Spatial 数据添加到 Quantum GIS

> ID：12934220
> 
> 赞同：2
> 
> 时间：2012-10-17T12:20:59.450
> 
> 标签：oracle, gis

我无法从 Quantum GIS 连接到 Oracle。我正在尝试*Layer -> Add vector layer -> Database New*。有一些数据库连接类型，如 ODBC、MSSQL、OGDI 矢量等，但不是 Oracle。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-04-05T07:34:58.070

用于 Oracle 的 Microsoft ODBC。但是odac安装你的电脑

# javascript - 如何在鼠标滚轮移动时禁用jscrollpane栏中的页面滚动

> ID：12934228
> 
> 赞同：2
> 
> 时间：2012-10-17T12:21:19.717
> 
> 标签：javascript, jquery, jscrollpane, jquery-jscrollpane

任何人都可以告诉我如何在鼠标滚轮移动时禁用 jscrollpane 栏中的页面滚动。我只希望只有当滚动在 jscrollpane div 中结束时，使用 jscrollpane 栏使用鼠标滚轮移动将焦点放在 div 上，然后页面滚动不应该发生。
这个怎么做？

# c# - 常规经验。- 应该是什么？

> ID：12934229
> 
> 赞同：-2
> 
> 时间：2012-10-17T12:21:21.870
> 
> 标签：c#, .net, regex

这就是我要搜索的内容：

```
[assembly: AssemblyFileVersion("4.0.10.121017")] 
```

数字应该可以

1.  1-999
2.  ~~1-10~~     0-10
3.  1-9999
4.  6个数字（一个日期）

我已经写了这个但是那不起作用

```
@"\[assembly: AssemblyFileVersion\(\""(\d{1}).(\d{1}).(\d{2}).(\d{6})""\)\]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:25:34.100

```
[1-9]\d{0,2}\.(?:[1-9]|10)\.[1-9]\d{0,3}\.\d{6} 
```

* * *

**编辑**（基于问题更新）：

```
[1-9]\d{0,2}\.(?:\d|10)\.[1-9]\d{0,3}\.\d{6} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:26:09.820

只需将您的需求转换为正则表达式：

```
\[assembly: AssemblyFileVersion\(\"\d{1,3}\.\d{1,2}\.\d{1,4}\.\d{6}\"\)\] 
```

# c - 在 C 中调用汇编函数的未定义引用

> ID：12934233
> 
> 赞同：0
> 
> 时间：2012-10-17T12:21:28.887
> 
> 标签：c, assembly, undefined-reference

我只是找不到这个问题的解决方案..

我想做的是使用 gcc 调用汇编函数。看看：

```
// Somewhere in start.s
global _start_thread
_start_thread:
  ; ...

// Somewhere in UserThread.cpp
extern void _start_thread( pointer );

static void UserMainHack()
{
    _start_thread(((UserThread*)currentThread)->getUserMain());
} 
```

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:29:41.410

您是否知道许多 C 链接器在查找标识符时会*自动*添加前导下划线？所以在 C 源代码（**不是**汇编源代码）中，只需删除前导下划线：

```
extern void start_thread( pointer );

static void UserMainHack()
{
    start_thread(((UserThread*)currentThread)->getUserMain());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:30:43.723

使用“ [Asm Label](http://gcc.gnu.org/onlinedocs/gcc/Asm-Labels.html) ”为您的函数 [declaration] 程序集链接：

```
extern void start_thread(pointer) __asm__("start_thread"); 
```

（并让`.global`asm 端匹配它。）

它的工作原理很像`extern "C"`，它可以用于函数和变量，而且它是单方面的（但这次是在 C 方面）。

# c# - 哪种方式最适合从具有多列的数据表中删除重复项

> ID：12934234
> 
> 赞同：3
> 
> 时间：2012-10-17T12:21:29.477
> 
> 标签：c#

哪种方法最适合从数据表中删除多列的重复项？我的意思是下面的代码仅适用于单列。

```
public DataTable RemoveDuplicateRows(DataTable dTable, string colName)
{
   Hashtable hTable = new Hashtable();
   ArrayList duplicateList = new ArrayList();

   //Add list of all the unique item value to hashtable, which stores combination of key, value pair.
   //And add duplicate item value in arraylist.
   foreach (DataRow drow in dTable.Rows)
   {
      if (hTable.Contains(drow[colName]))
         duplicateList.Add(drow);
      else
         hTable.Add(drow[colName], string.Empty); 
   }

   //Removing a list of duplicate items from datatable.
   foreach (DataRow dRow in duplicateList)
      dTable.Rows.Remove(dRow);

   //Datatable which contains unique records will be return as output.
      return dTable;
} 
```

我尝试使用字符串 [] colName。它在`dTable.Rows.Remove(dRow);`

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:29:54.443

最简单和最易读的方法是使用`Linq-to-DataTable`：

```
var groups = from r in dTable.AsEnumerable()
             group r by new
             {
                 Col1 = r.Field<String>("Column1"),
                 Col2 = r.Field<String>("Column2"),
             };

// if you only want the first row of each group:
DataTable distinctTable = groups.Select(g => g.First()).CopyToDataTable(); 
```

注意：按具有两个属性（和）的匿名类型对 进行[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)分组，这些属性从字段和初始化。`DataRows``Col1``Col2``DataRow``Column1``Column2`

所以你得到了`IEnumerable<DataRow>`. `Enumerable.First()`返回`DataRow`每个组的第一个（您也可以使用不同的方法来选择要保留的行，例如通过按日期字段排序）。

然后`CopyToDataTable`从（现在）不同的 DataRows 创建一个新的 DataTable。

* * *

如果您使用的是 .NET 2，这是一个可能的实现：

`IEqualityComparer<Object[]>`字典 自定义的实现：

```
class ObjectArrayComparer : IEqualityComparer<Object[]>
{
    public bool Equals(Object[] x, Object[] y)
    {
        if (x == null && y == null) return true;
        if (x == null || y == null) return false;
        if (x.Length  !=  y.Length) return false;       

        for (int i = 0; i < x.Length; i++)
        {
            if (x[i] == null && y[i] == null) continue;
            if (x[i] == null || y[i] == null) return false;
            if (!x[i].Equals(y[i])) return false;
        }
        return true;
    }

    public int GetHashCode(Object[] obj)
    {
        int hash = 0;
        if (obj != null)
        {
            hash = (hash * 17) + obj.Length;
            foreach (Object o in obj)
            {
                hash *= 17;
                if (o != null) hash = hash + o.GetHashCode();
            }
        }
        return hash;
    }
} 
```

你的`RemoveDuplicateRows`方法：

```
public DataTable RemoveDuplicateRows(DataTable dTable, String[] colNames)
{
    var hTable = new Dictionary<object[], DataRow>(new ObjectArrayComparer());

    foreach (DataRow drow in dTable.Rows)
    {
        Object[] objects = new Object[colNames.Length];
        for (int c = 0; c < colNames.Length; c++)
            objects[c] = drow[colNames[c]];
        if (!hTable.ContainsKey(objects))
            hTable.Add(objects, drow);
    }

    // create a clone with the same columns and import all distinct rows
    DataTable clone = dTable.Clone();
    foreach (var kv in hTable)
        clone.ImportRow(kv.Value);

    return clone;
} 
```

测试：

```
var table = new DataTable();
table.Columns.Add("Colum1", typeof(string));
table.Columns.Add("Colum2", typeof(int));
table.Columns.Add("Colum3", typeof(string));

Random r = new Random();
for (int i = 0; i < 100; i++)
{
    table.Rows.Add("Colum1_" + r.Next(1, 10), r.Next(1, 10), "Colum3_" + r.Next(1, 10));
}
int rowCount = table.Rows.Count; // 100
var unique = RemoveDuplicateRows(table, new[] { "Colum1", "Colum2" });
int uniqueRowCount = unique.Rows.Count; // around 55-65 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:26:49.870

您可以在 Datatable.Select ... [Link上使用 Distinct](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataset/thread/ed9c6a6a-a93e-4bf5-a892-d8471b84aa3b/)

参考这个[链接](https://stackoverflow.com/questions/3200751/how-do-i-remove-duplicates-from-a-datatable-altogether-based-on-a-columns-value)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:48:06.893

下面是你的代码，我做了几个修改。
主要思想是添加到`HashTable`（我的代码中的字典<>）不是仅一列的值，而是指定列的值，并以原子方式（如单个）威胁它们这几个值。

```
 // your code with minor amends
    public DataTable RemoveDuplicateRows(DataTable dTable, string[] colNames)
    {
        // note that strongly typed dictionary has replaced the hash table + it uses custom comparer 
        var hTable = new Dictionary<DataRowInfo, string>();
        var duplicateList = new ArrayList();

        //Add list of all the unique item value to hashtable, which stores combination of key, value pair.
        //And add duplicate item value in arraylist.
        foreach (DataRow drow in dTable.Rows)
        {
            var dataRowInfo = new DataRowInfo(drow, colNames);

            if (hTable.ContainsKey(dataRowInfo))
                duplicateList.Add(drow);
            else
                hTable.Add(dataRowInfo, string.Empty);
        }

        //Removing a list of duplicate items from datatable.
        foreach (DataRow dRow in duplicateList)
            dTable.Rows.Remove(dRow);

        //Datatable which contains unique records will be return as output.
        return dTable;
    }

    // Helper classes

    // contains values of specified columns
    internal sealed class DataRowInfo
    {
        public object[] Values { get; private set; }

        public DataRowInfo(DataRow dataRow, string[] columns)
        {
            Values = columns.Select(c => dataRow[c]).ToArray();
        }

        public override bool Equals(object obj)
        {
            if (ReferenceEquals(this, obj))
                return true;

            var other = obj as DataRowInfo;
            if (other == null)
                return false;

            return Equals(other);
        }

        private bool Equals(DataRowInfo other)
        {
            if (this.Values.Length != other.Values.Length)
                return false;
            for (int i = 0; i < this.Values.Length; i++)
            {
                if (AreObjectsEqual(this.Values[i], other.Values[i]))
                    return false;
            }

            return true;
        }

        private static bool AreObjectsEqual(object left, object right)
        {
            if (ReferenceEquals(left, right))
                return true;

            if (ReferenceEquals(left, null))
                return false;

            if (ReferenceEquals(right, null))
                return false;

            if (left.GetType() != right.GetType())
                return false;

            return left.Equals(right);
        }

        public override int GetHashCode()
        {
            unchecked
            {
                int hashCode = 0;
                foreach (var value in this.Values)
                {
                    hashCode = hashCode ^ ((value != null ? value.GetHashCode() : 0) * 397);
                }
                return hashCode;
            }
        }
    } 
```

希望这会有所帮助。

**更新** 简化代码。

# android - Android 防止系统在服务运行时终止应用程序

> ID：12934235
> 
> 赞同：1
> 
> 时间：2012-10-17T12:21:30.543
> 
> 标签：android, multithreading, service

我的应用程序可以启动本地服务以在后台（线程中）执行下载任务。如果我的应用程序的所有活动都被破坏（例如，如果用户按下所有活动），即使本地服务仍在运行，系统也会终止我的应用程序。我怎样才能防止这种情况，以便应用程序仅在服务完成下载时停止？

# php - 从php数组中提取值

> ID：12934236
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:21:35.890
> 
> 标签：php, object, multidimensional-array

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

我正在使用 SOAP 从服务器获取数据，作为响应，我得到了一个像这样的 php 数组

```
Array
(
 [BookResult] => stdClass Object
 (
  [PNR] => 5WPODU
  [BookingId] => 31149
  [Status] => stdClass Object
   (
    [StatusCode] => 03
    [Description] => Fare is not available at the time of booking
    [Category] => BK
   )
  [SSRDenied] => N
  [ProdType] => Flight
 )
) 
```

我只想知道如何在单独的变量中提取“PNR”和“StatusCode”值，以便可以将它们存储在数据库中。

试过这个不起作用

```
$p = (object) $array;
echo $p->StatusCode; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:23:36.373

试试这个：

`$PNR = $array["BookResult"]->PNR;
$StatusCode= $array["BookResult"]->Status->StatusCode;`

$array 是一个数组。所以第一次潜水是 $array['BookResult']。BookResult 是 stdClass 实例，所以接下来是 $array['BookResult']->Status （获取对象的属性）。Status 也是 stdClass 实例，所以获取它的属性： $array['BookResult']->Status->StatusCode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:23:55.640

假设结果存储在 $array

```
echo $array['BookResult']->Status->StatusCode;
echo $array['BookResult']->PNR; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:32:53.110

```
var_dump($array['BookResult']->PNR);   
var_dump($array['BookResult']->Status->StatusCode); 
```

# clojure - 故障排除级联

> ID：12934243
> 
> 赞同：2
> 
> 时间：2012-10-17T12:22:04.500
> 
> 标签：clojure, hadoop

我是一个新的 Clojure/Cascalog 用户，试图迁移一些 pig 脚本，但我经常在 repl 中收到如下错误。

FlowException 本地步骤失败 cascading.flow.planner.FlowStepJob.blockOnJob (FlowStepJob.java:191)

“with-debug”提供了更多信息，但仍然没有问题的根本原因。关于如何改进这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:00:43.467

我同意堆栈跟踪有时非常无用。我可以建议的一件事是编写单元测试：[http](http://sritchie.github.com/2011/09/30/testing-cascalog-with-midje.html) ://sritchie.github.com/2011/09/30/testing-cascalog-with-midje.html这大大缩小了您的实际问题所在。

如果您的查询适用于基本情况但在大数据上失败，您可以添加一个陷阱，以查看导致失败的输入：

```
(<- .... (:trap (hfs-textline "s3://.../errors" :sinkmode :replace))) 
```

# android - Android，如何从已删除的文件中释放文件锁

> ID：12934250
> 
> 赞同：6
> 
> 时间：2012-10-17T12:22:29.590
> 
> 标签：android, mono, directory, locking

当用户想要更改登录详细信息时，我需要在我的 Android（用 Mono 编写）应用程序中删除并重新创建一个目录。我因此删除目录：

```
 Directory.Delete(AppDataFolder, true); 
```

但是，当我尝试重新创建目录时，使用：

```
 Directory.CreateDirectory(aDirectory); 
```

我得到以下异常：

```
System.IO.IOException: Lock violation on path /storage/sdcard0/Telecetera/Connect For                                  Android 
```

我看不出如何解决这个问题。有没有人有任何想法？谢谢

# google-apps-script - 谷歌电子表格脚本发布图表

> ID：12934256
> 
> 赞同：3
> 
> 时间：2012-10-17T12:22:50.993
> 
> 标签：google-apps-script, google-sheets

有没有办法用谷歌电子表格脚本发布图表？我动态创建图表，但需要一种方法来动态发布这些图表。

我指的是从图表右上角的隐藏菜单发布图表的过程。见下文。

![](../Images/7f1007fe00e413155793aec362528522.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:24:52.647

不幸的是，此功能在 Apps 脚本中不存在，但您可以在我们的[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/entry?template=Feature%20request%20from%20user)上提交功能请求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T15:33:40.183

如果动态报告正在替换您的图表，就像对我所做的那样，我只是在保存动态数据的工作表上创建了一个命名范围。然后使用 =importRange 用图表填充工作表，然后发布一次，我的数据每小时拉一次，所以我的图表每小时更新一次。希望能帮助到你。

# c# - 测试多维数值积分

> ID：12934259
> 
> 赞同：1
> 
> 时间：2012-10-17T12:23:01.823
> 
> 标签：c#, testing, numerical-integration

我需要多个维度的测试函数，其定积分是精确已知的，以便我可以测试我的数值积分方法。我想测试各种各样的功能，特别是对具有一些不可微分部分的功能感兴趣。我正在尝试对具有免赔额和最大值的保险单进行建模，这会导致功能空间出现尖角，但没有尖峰。

我寻求的一个特定结果是了解离散化误差如何随着维数的增加而变化。

C# 中的代码受到赞赏，但任何由 C# 数学库轻松表示的函数都将受到欢迎。

# java - Android 正在尝试使用回收的图像

> ID：12934265
> 
> 赞同：1
> 
> 时间：2012-10-17T12:23:27.823
> 
> 标签：java, android, exception, bitmap, recycle

我越来越

> 画布：尝试使用回收的位图 android.graphics.Bitmap@4057a3a8

每次我试图展示一张图片。 [图片](http://postimage.org/image/mjm31felt/)

当我删除 bmp.recycle() 时，一切顺利，但我没有在我的代码中使用这个图像，所以我不明白问题出在哪里。

```
package com.example.photobooth;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Rect;
import android.util.DisplayMetrics;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;

public class EditorActivity extends Activity implements OnClickListener{

    String path = null;

    private int screen_height;
    private int screen_width;

    private Bitmap setUpImage(Bitmap image) {

        int min_side = Math.min(screen_height, screen_width);
        float scale_factor = (float) (((float) min_side / image.getWidth()) * 1.5);
        float[] scalef = { scale_factor, scale_factor };
        Bitmap scaled_image = ImageUtilities.scaleImage(image, scalef);

        return scaled_image;

    }

    private void setUp() {

        Bundle b = getIntent().getExtras();
        if (b != null) {
            path = b.getString("path");
        }

        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        this.screen_height = metrics.heightPixels;
        this.screen_width = metrics.widthPixels;

        int min_measure = Math.min(screen_width, screen_height);

        // Make ImageView square
        ImageView img = (ImageView) findViewById(R.id.photo_holder);
        android.view.ViewGroup.LayoutParams lp = img.getLayoutParams();
        lp.height = min_measure;
        img.setLayoutParams(lp);

        Bitmap bmp = BitmapFactory.decodeFile(path);
        final Bitmap ready_image = setUpImage(bmp);
        bmp.recycle();

        ImageView iv = (ImageView) findViewById(R.id.photo_holder);
        iv.setImageBitmap(ready_image);

        // set up touch event for imageview(photo_holder)

        img.setOnTouchListener(new OnTouchListener() {

            float touch_x, touch_y, scrolled_x = 0.0f, scrolled_y = 0.0f;

            public boolean onTouch(View v, MotionEvent event) {

                switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:

                    touch_x = event.getX();
                    touch_y = event.getY();

                    break;

                case MotionEvent.ACTION_MOVE:

                    float cur_x = event.getX();
                    float cur_y = event.getY();

                    float scroll_x = -cur_x + touch_x;
                    float scroll_y = -cur_y + touch_y;

                    scrolled_x += scroll_x;
                    scrolled_y += scroll_y;

                    if (scrolled_x > (ready_image.getWidth() - screen_width)/2
                            || scrolled_x < -(ready_image.getWidth() - screen_width)/2){
                        scrolled_x -= scroll_x;
                        scroll_x = 0;
                    }

                    if (scrolled_y > (ready_image.getHeight() - screen_width)/2
                            || scrolled_y < -(ready_image.getHeight() - screen_width)/2){
                        scrolled_y -= scroll_y;
                        scroll_y = 0;
                    }

                    v.scrollBy((int) (scroll_x),
                            (int) (scroll_y));

                    touch_x = cur_x;
                    touch_y = cur_y;

                    break;

                }

                return true;
            }
        });

        //Set up buttons
        Button btn = (Button)findViewById(R.id.save);
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                ImageView img = (ImageView)findViewById(R.id.photo_holder);
                int scroll_x = img.getScrollX();
                int scroll_y = img.getScrollY();

                int left = (ready_image.getWidth() - screen_width)/2
                        + scroll_x;

                int top = (ready_image.getHeight() - screen_width)/2
                        + scroll_y;

                int right = left + screen_width;

                int bottom = top + screen_width;

                Rect r = new Rect(left, top, right, bottom);

                Bitmap croped_image = ImageUtilities.cropImage(ready_image,
                        r,
                        screen_width,
                        screen_width);

                String path_to_folder = Environment.getExternalStorageDirectory()
                        .getAbsolutePath();

                String pic_path = path_to_folder + File.separator + MainActivity.app_name;

                File f = new File(pic_path);
                File picture = null;
                try {
                    picture = File.createTempFile("photo_", ".jpg", f);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                try {
                    FileOutputStream fos = new FileOutputStream(picture);
                    croped_image.compress(Bitmap.CompressFormat.JPEG, 100, fos);
                    fos.close();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (requestWindowFeature(Window.FEATURE_NO_TITLE))
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_editor);

        setUp();

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

bmp 在 setUp() 方法中被回收。

ImageUtility 是

```
package com.example.photobooth;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.PorterDuff.Mode;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.RectF;

public class ImageUtilities {

    public static Bitmap getRoundedCornerBitmap(Context context, Bitmap input,
            int pixels, int w, int h, boolean squareTL, boolean squareTR,
            boolean squareBL, boolean squareBR, boolean border) {

        Bitmap output = Bitmap.createBitmap(w, h, Config.ARGB_8888);
        Canvas canvas = new Canvas(output);
        final float densityMultiplier = context.getResources()
                .getDisplayMetrics().density;

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, w, h);
        final RectF rectF = new RectF(rect);

        // make sure that our rounded corner is scaled appropriately
        final float roundPx = pixels * densityMultiplier;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        // draw rectangles over the corners we want to be square
        if (squareTL) {
            canvas.drawRect(0, 0, w / 2, h / 2, paint);
        }
        if (squareTR) {
            canvas.drawRect(w / 2, 0, w, h / 2, paint);
        }
        if (squareBL) {
            canvas.drawRect(0, h / 2, w / 2, h, paint);
        }
        if (squareBR) {
            canvas.drawRect(w / 2, h / 2, w, h, paint);
        }

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));

        canvas.drawBitmap(input, 0, 0, paint);
        if (border) {
            paint.setStyle(Paint.Style.STROKE);
            paint.setColor(Color.WHITE);
            paint.setStrokeWidth(3);
            canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
        }

        return output;
    }

    public static Bitmap cropImage(Bitmap origina_bmp, Rect rec, int w, int h) {

        Bitmap target_bitmap = Bitmap.createBitmap(w, h,
                Bitmap.Config.ARGB_8888);
        target_bitmap.setDensity(origina_bmp.getDensity());
        Canvas canvas = new Canvas(target_bitmap);
        canvas.drawBitmap(origina_bmp, new Rect(rec.left, rec.top, rec.right,
                rec.bottom), new Rect(0, 0, w, h), null);
        return target_bitmap;

    }

    public static Bitmap makeSquareImage(Bitmap original_image, int size){

        int min_side = Math.min(original_image.getWidth(),
                original_image.getHeight());
        int side_size = ImageUtilities.get2del(min_side);

        int crop_to;

        Bitmap croped_image = null;

        if (min_side == original_image.getWidth()){
            crop_to = (original_image.getHeight() - side_size) / 2;
            croped_image = ImageUtilities.cropImage(original_image, new Rect(
                    0, crop_to, original_image.getWidth(),
                    original_image.getHeight() - crop_to), size, size);
        }else{
            crop_to = (original_image.getWidth() - side_size) / 2;
            croped_image = ImageUtilities.cropImage(original_image, new Rect(
                    crop_to, 0, original_image.getWidth() - crop_to,
                    original_image.getHeight()), size, size);
        }

        return croped_image;

    }

    public static int get2del(int num) {

        while (num % 2 != 0)
            num++;

        return num;

    }

    public static Bitmap scaleImage(Bitmap originalBMP, float[] scaleFactor) {

        Matrix scaleMat = new Matrix();
        scaleMat.postScale(scaleFactor[0], scaleFactor[1]);
        Bitmap scaledImage = Bitmap.createBitmap(originalBMP, 0, 0,
                originalBMP.getWidth(), originalBMP.getHeight(), scaleMat,
                false);
        return scaledImage;

    }

} 
```

所以它没有。如果我写 bmp = null 而不是 bmp.recycle() 一切都很好，但我想知道为什么在第二次机会中应用程序崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:32:05.797

What is ImageUtilities? Maybe scaleImage may reuse the same image.

Does your program work correctly if you do:

```
bmp = null; 
```

instead of

```
bmp.recycle(); 
```

?

The official documentation of recycle says: "This is an advanced call, and normally need not be called, since the normal GC process will free up this memory when there are no more references to this bitmap. "

So using "bmp = null" should be better than "bmp.recycle()".

# c# - Visual Studio 2012 随机调试器启动失败：无法启动程序

> ID：12934271
> 
> 赞同：3
> 
> 时间：2012-10-17T12:23:44.037
> 
> 标签：c#, visual-studio-2012, visual-studio-debugging

我有一个托管的启动项目，当我按 F5 时，Visual Studio 经常抱怨对话框“无法启动程序'...\test.exe'”（没有其他信息）。进程 test.exe 实际上是在后台启动的，但是当我尝试将调试器附加到它时，VS 抱怨调试器已经附加。为了能够再次调试，我必须手动终止 test.exe 进程并重新启动 VS。我以管理员身份运行 VS。谢谢！

重要信息：

1.  在 Windows Server 2008 x64 上运行。
2.  应用程序是 x64。
3.  以管理员身份运行 VS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:33:46.613

卸载并安装最新的 VS2012Pro 后问题消失（几乎完全）。我再次收到同样的信息，但从那以后只有几次。

# asp.net - URL 内容维度

> ID：12934272
> 
> 赞同：0
> 
> 时间：2012-10-17T12:23:45.703
> 
> 标签：asp.net

有没有办法在 ASP.NET 中（在后面的代码中）仅使用 URL 来获取页面尺寸（宽度和高度）。也许下载 URL 内容然后获取宽度和高度？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:32:35.007

在后面的 ASP.NET 代码中，您无法获取客户端高度/宽度..理想情况下，它不应该与服务器端相关..

# c++ - 等待超时 - Windows

> ID：12934280
> 
> 赞同：4
> 
> 时间：2012-10-17T12:24:07.077
> 
> 标签：c++, windows, semaphore

我的 C++ 程序有一个将数据插入缓冲区的线程，以及另一个读取该数据的线程。当没有更多数据要读取时，我想等到另一个线程插入新数据。我主要在 linux 上工作，但我不知道如何在 Windows 中完成。我发现的最相似的东西是“WaitForSingleObject”函数，但这并不是我所需要的，因为我不想一直等到插入数据的线程死了。

有人可以指导我到一个我可以阅读更多信息的地方吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:25:23.383

Boost.Thread 提供[条件变量](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref)，您可以方便地使用。

如果您的编译器支持它，您可以改用 C++11 的[std::condition_variable](http://en.cppreference.com/w/cpp/thread/condition_variable)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:28:08.660

您可以使用 WaitForSingleObject 超时。您插入数据的线程可能会向您的阅读器线程发出信号，表明没有更多数据可用。这里有一些关于这个主题的好读物：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686915%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686915%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:39:04.110

在windows`WaitForSingleObject`中可以等待多种类型的句柄，例如线程句柄、事件句柄、信号量甚至互斥量，所以这个函数是等待一个对象变成信号，你不必等待其他线程变成死的！：）

```
// Global
HANDLE hHasData = CreateSemaphore(
    NULL, // Security attribute, NULL means default
    0,    // Initial count of semaphore
    100,  // Maximum count of semaphore
    NULL  // Name of semaphore, will be used to share it between processes
    );

// Producer thread
auto data = produce_data();
push_data_to_queue( data );
ReleaseSemaphore( hHasData );

// Consumer thread
while( true ) {
    WaitForSingleObject( hHasData, INFINITE );
    auto data = pop_data_from_queue();
    process_data( data );
} 
```

此外，如果您关心跨平台代码，您可以使用 C++11 线程和同步对象，如`std::condition_variable`或其对应物`boost::condition_variable`

# oop - 绑定与多态性

> ID：12934281
> 
> 赞同：1
> 
> 时间：2012-10-17T12:24:08.120
> 
> 标签：oop, polymorphism, late-binding, early-binding

后期绑定和覆盖之间是否有直接关系，早期绑定和重载也是如此？

它们（绑定/覆盖/重载）可以称为实现多态性的方法，但是是否有任何“直接关系”例如：后期绑定是覆盖的子/超级概念，反之亦然等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:35:18.377

它们是正交（独立）的概念。

*   重载、重载：多态的形式
*   Early binding/Late binding：在前者中，调用的方法在编译时是已知的。在后者中，在运行时。

当然，覆盖的实现**通常**意味着使用后期绑定，因为您只会在运行时知道对象的真实类型。但这只是特例。

# selenium - 如何使用 Selenium 在新窗口中输入凭据？

> ID：12934286
> 
> 赞同：0
> 
> 时间：2012-10-17T12:24:25.537
> 
> 标签：selenium, popup, window

我需要在使用 Selenium 打开的新窗口中输入凭据。我正在使用 selectWindow 命令，但窗口的名称是**动态**的。请建议我该如何处理。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:30:47.900

1.  在打开新窗口之前首先获取主窗口句柄 (getWindowHandle())。
2.  使用 getWindowHandles() 您可以获得所有打开的窗口句柄。
3.  使用以上两件事尝试获取新打开的窗口句柄。

有关完整逻辑，请参阅下面的链接。

[http://santoshsarmajv.blogspot.in/2012/04/how-to-switch-control-to-pop-up-window.html](http://santoshsarmajv.blogspot.in/2012/04/how-to-switch-control-to-pop-up-window.html)

# c# - 实体框架 linq 包含和分组

> ID：12934290
> 
> 赞同：5
> 
> 时间：2012-10-17T12:24:36.187
> 
> 标签：c#, linq, entity-framework

我正在尝试用一句话来包含和分组

```
var instanceIdList = context.
    Tracks.
    Include("Services").
    GroupBy(x => x.ServiceId).
    Take(top); 
```

但是当我在调试时检查结果时，我看不到任何包含值

我试图以另一种方式做

```
var objectContext = ((IObjectContextAdapter)context).ObjectContext;
var set = objectContext.CreateObjectSet<Track>();
var instanceIdList = set.Include("Services").GroupBy(x => x.ServiceId); 
```

这是课程： *跟踪*

```
 public partial class Track
{
    public long Id { get; set; }
    public System.Guid ServiceId { get; set; }
    public Nullable<System.Guid> ServiceInterfaceId { get; set; }
    public Nullable<System.Guid> ProviderId { get; set; }
    public System.Guid ServiceInstanceId { get; set; }
    public System.Guid ActivityParentId { get; set; }
    public System.Guid ActivityInstanceId { get; set; }
    public int ActivityType { get; set; }
    public int ServiceRole { get; set; }
    public int TrackOrder { get; set; }
    public System.DateTime Datetime { get; set; }
    public Nullable<System.Guid> MessageId { get; set; }
    public int Status { get; set; }
    public Nullable<int> ESBErrorCode { get; set; }
    public Nullable<int> ESBTecnicalErrorCode { get; set; }
    public string ErrorDescription { get; set; }
    public string PortName { get; set; }
    public string MachineName { get; set; }
    public string ConsumerId { get; set; }
    public string ExternalId { get; set; }
    public string ConsumerMachineName { get; set; }
    public int ServiceBehavior { get; set; }

    public virtual Message Message { get; set; }
} 
```

*服务*

```
 public partial class Service
      {
        public Service()
        {
        this.Providers = new HashSet<Provider>();
        this.ServiceInterfaces = new HashSet<ServiceInterface>();
            }

    public System.Guid ServiceId { get; set; }
    public string ServiceName { get; set; }
    public string ServiceNumber { get; set; }
    public Nullable<System.Guid> ModelSchemaId { get; set; }

    public virtual ICollection<Provider> Providers { get; set; }
    public virtual ICollection<ServiceInterface> ServiceInterfaces { get; set; }
} 
```

但结果是一样的

谢谢

三木

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:33:26.610

您还需要将 include 放在最后。

像这样...

```
var instanceIdList = context.Tracks
                            .GroupBy(x => x.ServiceId)
                            .Take(top)
                            .Include("Services"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:42:05.337

您尚未`Services`在您的`Track`类中定义任何导航属性，您需要添加以下属性。

```
public virtual ICollection<Service> Services { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:37:43.417

您的 Track 类没有称为服务的成员访问器，因此

```
Include("Services") 
```

不会工作。

您需要从 Track 链接到 Service，例如

```
public Service Services {get;set;} 
```

# c# - 抓取链接中的隐藏值

> ID：12934291
> 
> 赞同：0
> 
> 时间：2012-10-17T12:24:43.460
> 
> 标签：c#, web-scraping, html-agility-pack

我正在抓取网站的内容。

我注意到我要抓取的字段不包含我需要的确切信息。用户需要点击它以显示正确的值

例如，在屏幕上，用户可以看到“发送电子邮件”。单击发送电子邮件后，它将更改为 support@company.com。

现在，我想抓取“support@company.com”。

一种有效的策略是解析链接的节点。我用过`string.IndexOf`和`string.Substring`）

```
<a href="#" onclick="displayEmail(this, 'support@company.com');......>Send Email</a> 
```

还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:44:28.193

要从 HTML 文档（或片段）中查找特定节点或获取节点的属性值，您可以使用 AgilityPack。此外，要从字符串中提取特定信息，您可以使用正则表达式、字符串函数等。这取决于您要提取的信息类型。

要抓取电子邮件地址，或者只是数字，我会使用正则表达式（例如 from [here](http://www.regular-expressions.info/email.html)）。

以下是有关如何从您提供的 HTML 片段中抓取电子邮件地址的示例：

```
var regex = new Regex(
    @"\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b", 
    RegexOptions.IgnoreCase
);
var html = @"<a href='#' onclick='displayEmail(this, ""support@company.com"")'>Send Email</a>";
var doc = new HtmlDocument();
doc.LoadHtml(html);

// just an example on how to get node's attribute value
// your selectors could be completely different
var onclick = doc.DocumentNode.SelectSingleNode("a").Attributes["onclick"].Value;
var email = regex.Match(onclick); 
```

# php - 脸书不发邮件

> ID：12934293
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:24:51.467
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 php-facebook sdk 实现 facebook 登录。但我没有从 facebook 获取用户的电子邮件地址，以及在 facebook 上新创建的应用程序。

![这是权限设置页面上的屏幕截图](../Images/c281baed49a413d380f6115c4f5623b1.png)

![这是授权对话框的预览](../Images/a74553d5a2d8fccfe13a23e04c3c61ba.png)

![这是实际的身份验证对话框渲染](../Images/222d502e48d97851800ef67a7cf8f44d.png)

根据所附图片，我们已对以下电子邮件的权限设置进行了更改。当我预览身份验证对话框时，facebook 在对话框中显示电子邮件权限。但是在运行站点身份验证对话框时，没有显示电子邮件权限，也没有给出返回的电子邮件。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:42:01.280

set your scope (permission) in the app settings

also refer this :

```
 $facebook = new Facebook(array(
                'appId' => 'xxxxxxxxxxxxxxxxxxxxxx',
                'secret' => 'xxxxxxxxxxxxxxxxxxxxx',
            ));
    $facebookUser = $facebook->getUser();
    $fbLogoutUrl = $facebook->getLogoutUrl();
    if ($facebookUser) {
      try {
        $fbUserProfile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
      if (!empty($fbUserProfile)) {
        $fbUserId = $fbUserProfile ['id'];
        $fbUserEmail = $fbUserProfile ['email'];
      }
    } else {
      $fbLoginUrl = $facebook->getLoginUrl(array('scope' => 'email,publish_stream,user_photos,photo_upload,offline_access'));
      header("Location: " . $fbLoginUrl);
    } 
```

Regards : [TechNew.In](http://www.technew.in)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:41:27.687

That's not how you configure permissions for use with the PHP SDK.

Those settings are for the App Center only (Authenticated Referrals have been removed)

This is one way you can add permissions within the SDK,

```
$params = array(
  'scope' => 'email',
  'redirect_uri' => 'https://www.myapp.com/post_login_page'
);

$loginUrl = $facebook->getLoginUrl($params); 
```

See more at: [http://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](http://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)
And: [https://developers.facebook.com/docs/opengraph/authentication/#referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals)

# objective-c - 如何在可可应用程序中删除列分隔符？

> ID：12934297
> 
> 赞同：0
> 
> 时间：2012-10-17T12:25:01.427
> 
> 标签：objective-c, xcode, macos, cocoa, interface-builder

我是 Mac OS X 编程的新手。我试图将列数设置为一，但我的界面中的列分隔符仍然存在。我怎样才能删除它？ ![在 Interface Builder 中设置列](../Images/8e9deee897dbdc6b41aa2efa1ecedebb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:44:15.380

一个已经存在很长时间的 IB Bug（我认为）。只需调整表格视图的大小，使其小于分隔符，然后将其更改回您想要的原始大小。

# android - Android：在视图中添加按钮

> ID：12934299
> 
> 赞同：1
> 
> 时间：2012-10-17T12:25:16.783
> 
> 标签：android, button, view, viewgroup

我正在做一个 Titanium 模块（只是 Android 代码），我需要在视图中显示一个按钮，所以没有 Activity 也没有 xml 布局。我有以下代码在我的视图中添加按钮：

```
public class MyView extends ViewGroup {
 public MyView(Context context) {
  super(context);
  ...
  Button b=new Button(context);
  b.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 
                LayoutParams.WRAP_CONTENT)); 
  b.setText("Some Text");
  this.addView(b);
 }
} 
```

在 StackOverflow 中搜索，这段代码应该可以工作......但该按钮从未显示。如何将按钮添加到视图或视图组？

编辑添加 onLayout() 方法：

```
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
     LinearLayout l1=new LinearLayout(_context);
     l1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
     l1.setOrientation(LinearLayout.VERTICAL);
     Button b1=new Button(_context);
     b1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
     b1.setText("Button");
     l1.addView(b1);

     this.addView(l1);
} 
```

谢谢你的帮助。-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:32:41.487

`ViewGroup`是抽象类。而且我认为您错误地实施了它的一些方法。尝试使用任何具体的布局，例如`LinearLayout`，而不是。

# javascript - 在javascript中使用JSON将数组存储在localStorage中

> ID：12934300
> 
> 赞同：2
> 
> 时间：2012-10-17T12:25:17.347
> 
> 标签：javascript, json, html

我已经对这个问题进行了裁判并为我工作： [所以 q1](https://stackoverflow.com/questions/3357553/how-to-store-an-array-in-localstorage)

现在的问题是我使用 JSON.stringify 和 JSON.parse 将数组存储在 localStorage 中。但是当我再次运行代码并尝试在 localStorage 上使用 JSON.parse 时，什么都没有被检索到。我不知道出了什么问题。

这是代码：

```
 function BankProDisplay() {
        var myString = JSON.parse(localStorage['bankpro']);
        var mySplitResult = myString.split(",");
        for (i = 0; i < mySplitResult.length; i++) {
            document.getElementById('bankpro').innerHTML = document.getElementById('bankpro').innerHTML + mySplitResult[i] + "<br/>";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:35:33.980

如果使用 JSON.stringify 将 Array 存储在 LocalStorage 中，则使用 JSON.parse 将其取回，返回值是 Array，而不是字符串。因此，当您对 myString 使用函数 mySplitResult（实际上是 Array，感谢 JSON.parse）时，它会导致错误。所以删除函数 mySplitResult 它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:38:20.710

```
var myString = JSON.parse(localStorage['bankpro']); 
```

`JSON.parse`返回一个没有方法的 javascript 对象，而不是字符串`split`。

# android - 相同活动的两种布局

> ID：12934307
> 
> 赞同：0
> 
> 时间：2012-10-17T12:25:38.803
> 
> 标签：android, android-layout

我的活动中有以下代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (!isPreviouslyLoggedIn()) {
        setContentView(R.layout.splash);

        final TextView revolution=(TextView) findViewById(R.id.textView1);
        final Button login=(Button) findViewById(R.id.loginButton);
        final Button signUp=(Button) findViewById(R.id.signUpButton);

        login.setOnClickListener(loginListener);
        signUp.setOnClickListener(signUpListener);

    }

    else {
        setContentView(R.layout.home);
        Intent intent = new Intent(getApplicationContext(), PickUpActivity.class);
        startActivity(intent);
    }

} 
```

执行`if`语句时，`layout`设置为 splash。但是，在`else`执行语句的情况下，布局未设置`home`为`intent`直接启动。为什么会发生这种情况，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:46:00.003

试试这个方法。。

```
protected boolean active = true;
    protected int time = 5000;

        Thread thread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while (active && (waited < time)) {
                        sleep(100);
                        if (active) {
                            waited += 100;
                        }
                    }
                } catch (InterruptedException e) {

                } finally {
                    finish();
                    Intent Go_Activity = new Intent(Screen.this, otherActivity.class);
                    startActivity(Go_Activity);
                    stop();
                }
            }
        };
        thread.start(); 
```

它可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:31:14.840

设置任何时间或线程以等待一段时间以进行下一个活动。当执行 else 语句时，布局设置但时间很少。出于这个原因，您无法展示它。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:46:32.860

你知道你想问什么吗？？直接设置内容视图后，您正在启动另一个活动，因此它将显示新的（开始的）活动布局......那有什么问题？

# llvm-gcc - klee with loops 类似代码的奇怪行为

> ID：12934311
> 
> 赞同：2
> 
> 时间：2012-10-17T12:25:58.557
> 
> 标签：llvm-gcc, klee, symbolic-computation

对于带有符号参数的循环，我有一个关于 KLEE（符号执行工具）如何工作的问题：

```
int loop(int data) {
  int i, result=0;
  for (i=0;i<data ;i++){   
     result+= 1;
     //printf("result%d\n", result); //-- With this line klee give different values for data
}
   return result;
}
void main() {
  int n;
  klee_make_symbolic(&n, sizeof(int),"n");  
  int result=loop(n) ;
} 
```

如果我们用这段代码执行 klee，它只会给出一个测试用例。但是，如果我们去掉 printf(...) 的注释，klee 将需要某种类型的控制来停止执行，因为它会产生 n 的值：--max-depth= 200

我想了解为什么 klee 有这种不同的行为，这对我来说没有意义。为什么如果我在这段代码中没有 printf，它不会产生相同的值。

我发现它发生在选项时发生 - 当它没有相同的行为时，使用时式。有人知道 Klee 的 --optimize 是如何工作的吗？

另一个同样的问题是，如果在他们发表的论文中，据我所知，他们说他们的启发式搜索将使它不是无限的（他们使用避免饥饿），因为我让它运行不会停止，这是真的在这个循环的情况下应该完成 klee 执行？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:46:32.843

> 我想知道为什么使用选项 --optimize 会出现这种不同的行为。谢谢

在 C/C++ 中有“未定义行为”的概念（请参阅：C 和 C++ 中未定义行为指南[，](http://blog.regehr.org/archives/213)第 1 部分，[第 2](http://blog.regehr.org/archives/226)部分，[第 3 部分](http://blog.regehr.org/archives/232)，每个 C 程序员应了解的未定义行为[[#1/3]](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html)，[[ #2/3]](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_14.html)，[[#3/3]](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_21.html)）。

整数溢出`signed`被定义为*未定义的行为*，以允许编译器进行优化，如下所示：

```
bool f(int x){ return x+1>x ? true : false ; } 
```

让我们想想... x+1>x 在普通代数中总是正确的，在这个模代数中它几乎总是正确的（除了一种溢出的情况），所以让我们把它变成：

```
true 
```

这样的做法可以实现大量的优化。（顺便说一句。如果您想在溢出时定义行为，请使用`unsigned`整数 - 此功能在密码算法实现中广泛使用）。

另一方面，有时会导致令人惊讶的结果，例如以下代码：

```
int main(){
    int s=1, i=0;
    while (s>0) {
        ++i;
        s=2*s;
    }
    return i;
} 
```

被优化成无限循环。这不是错误！这是强大的功能！（再次......对于定义的行为，使用`unsigned`）。

让我们为上面的例子生成汇编代码：

```
$ g++ -O1 -S -o overflow_loop-O1.s overflow_loop.cpp
$ g++ -O2 -S -o overflow_loop-O2.s overflow_loop.cpp 
```

循环部分的检查编译方式不同：

溢出循环-O1.s：

```
(...)
.L2:
    addl    $1, %eax
    cmpl    $31, %eax
    jne    .L2
(...) 
```

溢出循环-O2.s：

```
(...)
.L2:
    jmp    .L2
(...) 
```

我建议您在不同的优化级别（`gcc -S -O0`vs `gcc -S -O1`... `-O3`）上检查代码的汇编。再一次，关于主题的好帖子： [[1]](http://blog.regehr.org/archives/213)， [[2]](http://blog.regehr.org/archives/226)， [[3]](http://blog.regehr.org/archives/232)， [[4]](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html)， [[5]](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_14.html)， [[6]](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_21.html)。

# jquery - 如何将想要的值保留在选择中并使用 jquery 删除剩余的值？

> ID：12934317
> 
> 赞同：0
> 
> 时间：2012-10-17T12:26:06.950
> 
> 标签：jquery, select

我有一个功能，其中有一些下拉菜单。

我有一些值，我必须检查这些值是否存在于下拉列表中。如果它们存在，我必须保留它们并从我的下拉列表中删除其他选项

这就是我一直在尝试做的

```
function getimage(value, ProdId) {
  $.getJSON("/api/ProductDetails", { option: value, productid: ProdId }, function (data) {
    $.each(data, function (idx, product) {
      $('#defaultimage').empty();
      $('<img id="dfltimage"/>').attr({ src: product.ImageURL }).appendTo('#defaultimage');

      if (product.options.length > 0) {
        $.each(product.options, function (idx, option) {
          /*appending the each option to a label*/
          $("" + "#" + option.OptionName + "").empty();
          if (option.values.length > 0) {
            /*Creating a select tag for the Retrieved options*/
            //$("" + "#" + options.OptionName + "").empty();                  
            $.each(option.values, function (idx, value) {                 
              alert(value.OptionValue);
 //             $("" + "#" + option.OptionName + "").append('<option value="' + value.OptionValue + '">' + value.OptionValue + '</option>');
              $("" + "#" + option.OptionName + "").children('option').hide();
  //            $("" + "#" + option.OptionName + "").children("option[text=" + value.OptionValue + "]").show();
              $("" + "#" + option.OptionName + "option[value='" + value.OptionValue + "']").show();
            });
          }
        })
      }
    });
  });
} 
```

在这种情况下，下拉列表最后是空的

这就是我根据给出的答案所做的更改

```
 if (product.options.length > 0) {
                    $.each(product.options, function (idx, option) {
                        /*appending the each option to a label*/

                        $("" + "#" + option.OptionName + " option").attr('not_required', 'true');
                        if (option.values.length > 0) {
                            /*Creating a select tag for the Retrieved options*/                                    
                            $.each(option.values, function (idx, value) {                             
                            alert(value.OptionValue);
                            $("" + "#" + option.OptionName + "option[value='" + this_value + "']").removeAttr('not_required');
                            $("" + "#" + option.OptionName + " option[not_required=true]").remove();

                            });

                        }

                    })
                } 
```

值不会被删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:32:05.910

首先在所有选项中设置一个属性，例如“not_required”。

```
$('#my_select_id option').attr('not_required','true'); 
```

然后遍历你的结果，在你找到它时删除每个属性。

```
for(...) {
  $('option[value=' + this_value + ']').removeAttr('not_required');
} 
```

最后选择所有仍然具有该属性的选项并删除（或隐藏）它们。

```
$('#my_select_id option[not_required=true]').remove(); 
```

[编辑]

您过早地删除了“不需要的”选项。您需要等到循环结束。

这是我上面的编辑版本：

```
 if (product.options.length > 0) {
                $.each(product.options, function (idx, option) {
                    $("" + "#" + option.OptionName + " option").attr('not_required', 'true');
                    if (option.values.length > 0) {
                        $.each(option.values, function (idx, value) {                             
                            alert(value.OptionValue);
                            $("#" + option.OptionName + " option[value='" + this_value + "']").removeAttr('not_required');
                        });
                    }
                })
                $("#" + option.OptionName + " option[not_required=true]").remove();
            } 
```

# php - 相同的脚本在不同的服务器上不起作用

> ID：12934322
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:26:20.160
> 
> 标签：php

我正在为进度条编写 PHP 脚本。

我的代码：

```
<body>
<div id="progress" style="width:500px;border:1px solid #ccc;"></div>
<!-- Progress information -->
<div id="information" style="width"></div>
<?php

if(isset($_REQUEST['sub']))
{
// Total processes
    $total = 10;

    // Loop through process
    for($i=1; $i<=$total; $i++){
        // Calculate the percentation
        $percent = intval($i/$total * 100)."%";

        // Javascript for updating the progress bar and information
        echo '<script language="javascript">
        document.getElementById("progress").innerHTML="<div style=\"width:'.$percent.';background-color:#ddd;\">&nbsp;</div>";
        document.getElementById("information").innerHTML="'.$i.' row(s) processed.";
        </script>';

        // This is for the buffer achieve the minimum size in order to flush data
        echo str_repeat(' ',1024*64);

        // Send output to browser immediately
        flush();

        // Sleep one second so we can see the delay
        sleep(1);
    }

// Tell user that the process is completed
echo '<script language="javascript">document.getElementById("information").innerHTML="Process completed"</script>';
}
?>
<form>
<input type="submit" name="sub" value="Go" />
</form>
</body> 
```

当我在[这](http://demo.ankinfosystem.com/uploadfile/another.php)台服务器上测试它时，它运行正常。但在[这](http://ddeskonline.com/test.php)台服务器上，它显示“进程已完成”。点击Go按钮后..

我在两台服务器上都使用了相同的编码...

我的错误是什么？任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:39:29.610

The php.ini on the server as of in PHP 5.3.0 may exclude cookies from `$_REQUEST`, so it might be the php.ini on the server that needs to be edited correspondently.

If You don't have ability to edit php.ini, use `$_POST` / `$_GET` etc instead of `$_REQUEST`.

If You don't know which way Your variable is sent, use something like this:

```
switch($_SERVER['REQUEST_METHOD']) {
    case 'GET': $the_request = &$_GET; break;
    case 'POST': $the_request = &$_POST; break;
    default:
} 
```

It might also be the `flush()` function that does not work due to php.ini settings. See user comments under [php.net flush() reference](http://php.net/manual/ru/function.flush.php) - some recommendations about how to edit php.ini to make it work are listed there.

# c# - 异步回发后呈现用户控制的问题

> ID：12934323
> 
> 赞同：0
> 
> 时间：2012-10-17T12:26:22.413
> 
> 标签：c#, javascript, asp.net

我在母版页中有脚本管理器：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnableScriptLocalization ="true" EnableScriptGlobalization ="true" EnablePartialRendering="true" >
</asp:ScriptManager> 
```

MyPage.aspx（放置在母版页的内容占位符中）

```
<asp:UpdatePanel ID="upMain" runat="server" UpdateMode="Conditional" EnableViewState="true">
  <Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnRefresh" EventName="Click" />
  </Triggers>
    <ContentTemplate>
        <asp:PlaceHolder ID="placeHolder1" runat="server" EnableViewState="true"></asp:PlaceHolder>
            </ContentTemplate>
</asp:UpdatePanel> 
```

MyPage.aspx 脚本：

```
 $(document).ready(function () {
        setInterval(myfun, 20000);
    });

    function myfun() {
        var btn = document.getElementById('<%=btnRefresh.ClientID%>');
                    btn.click();
    } 
```

在占位符上，我放置了包含用户控件的动态创建的表。在页面加载时，我可以看到页面上的用户控件。但是当 20 秒后调用异步回发时，我看不到用户控件。使用萤火虫，我看到用户控件在那里。但是它们不会被渲染；即使我在异步回发中再次创建它们。它们似乎是空的。帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:43:05.133

试试这个代码。您需要在每个页面回发上创建控件。

```
protected void Page_Load(object sender, EventArgs e) 
{ 
     if (!Page.IsPostBack) 
      { 
           GetData(); // get data from database 
      } 
           LoadUserControls(); // Create dynamic table containing user controls 

} 
```

我认为你应该阅读这个。[在 UpdatePanel 中动态加载 UserControl](http://geekswithblogs.net/rashid/archive/2007/08/11/Loading-UserControl-Dynamically-in-UpdatePanel.aspx)

# php - 带有 jquery mobile 和 recaptcha 的 zend 表单

> ID：12934326
> 
> 赞同：1
> 
> 时间：2012-10-17T12:26:37.783
> 
> 标签：php, zend-framework, jquery-mobile, recaptcha

我在尝试在 jquery 移动应用程序中将 reCaptcha 实现为 zend 表单时遇到了问题。当 jquery mobile 被禁用时，一切都很好，但我需要使用它，但我只能从 recaptcha + 验证消息中看到标签。

```
$recaptcha = new Zend_Service_ReCaptcha(
    '644443tQSAA4444444444444444444WNm6',
    '6L44443444444444444444444EmA_4448');

$captcha = new Zend_Form_Element_Captcha('challenge2',
    array(
        'captcha'        => 'ReCaptcha',
        'captchaOptions' => array(
            'captcha' => 'ReCaptcha', 
            'service' => $recaptcha
        )
    )
);

$captcha->setLabel('hello');        
$captcha->setErrorMessages(array( 'Please retape above words correctly'));
$this->addElement($captcha); 
```

我试图`$captcha->setAttrib('data-role', 'none')`但没有帮助。
如何使用 Zend 框架在 jQuery Mobile 上显示 reCaptcha？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:49:15.177

这里有关于如何处理的信息[https://developers.google.com/recaptcha/docs/display?hl=en#AJAX](https://developers.google.com/recaptcha/docs/display?hl=en#AJAX)

我所做的是将此脚本添加到布局中：

```
<script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script> 
```

然后，在有验证码的页面上，我有以下代码：

```
$('[data-role=page]').on('pagebeforeshow', function (event, ui) {
    if ($('#recaptcha_widget_div').length<1) { //if it was not loaded earlier
        Recaptcha.create("<your key>", 'captcha-element', {
            lang : 'en',
            tabindex: 1,
            theme: "clean",
            callback: Recaptcha.focus_response_field
        });
    }
} 
```

“captcha-element”是包装我的验证码元素的 div 的 id。

# primefaces - Primefaces 更改语言环境

> ID：12934327
> 
> 赞同：1
> 
> 时间：2012-10-17T12:26:42.463
> 
> 标签：primefaces, jsf-2, locale

我有带有用户个人资料设置的表格。这些设置之一是站点的默认语言。当用户更改默认语言设置时，我想更改当前会话的区域设置。表格处理方法：

```
@ManagedBean(name="userEditBean")
@RequestScoped
public class UserEditBean {

    @ManagedProperty(value = LanguageBean.INJECTION_NAME)
    private LanguageBean languageMB;

    private AdminUsersEditForm editForm = new AdminUsersEditForm();

    public String changeDefaultLanguage() {
        editForm.getUser().setDefaultLanguage(editForm.getLocaleCode());
        adminUserEditService.update(editForm.getUser());
        languageMB.changeLocale(editForm.getLocaleCode());
        FacesContext context = FacesContext.getCurrentInstance();  
        context.addMessage(null, new FacesMessage(languageMB.translate("user.edit.languageChanged")));
        return "/pages/protected/user/edit.xhtml?faces-redirect=true";
    } 
```

和changeLocale：

```
@ManagedBean(name="languageMB")
@SessionScoped
public class LanguageBean implements Serializable {
    public void changeLocale(String newLocaleValue) {
            //loop country map to compare the locale code
            for (Map.Entry<String, Object> entry : countries.entrySet()) {
                if(entry.getValue().toString().equals(newLocaleValue)){
                    FacesContext.getCurrentInstance()
                            .getViewRoot().setLocale((Locale)entry.getValue());
                }
            }
        } 
```

DB 中的语言已更改，但站点仍使用旧语言环境。当我从 eventListener 调用 changeLocale 以更改站点语言时，它可以工作，那么问题出在哪里。谢谢你。

**更新：** 我做了一些调试，问题出在 ViewHandlingStrategy#createView() 就行了：

```
if (ctx.getViewRoot() != null) {
    locale = ctx.getViewRoot().getLocale(); 
```

ctx.getViewRoot() 显然返回 null 并且区域设置未设置 grom getViewRoot()。但我不知道，我的 viewRoot “丢失”了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:24:58.760

I suppose your locale bean is a `@SessionScoped` bean right?

If that's the case, you should also:

*   Set the locale in your root template or in all your pages in case you don't use templating:

    ```
    <f:view contentType="text/html" locale="#{yourLocaleBean.locale}">
        <h:head>
            <!-- headers here -->
        </h:head>
        <h:body>
            <!-- content here -->
        </h:body>
    </f:view> 
    ```

I hope it helps.

# java - Oracle 将 "'{S}Paris2" 的文本解析为字符串文字，然后找到 {S} 并将其视为无法识别的 SQL 转义序列

> ID：12934331
> 
> 赞同：1
> 
> 时间：2012-10-17T12:26:57.370
> 
> 标签：java, sql, oracle

运行 jsp 报告后出现以下错误。

查询标签：doAfterBody(),0,位置不支持 SQL92 标记：3477:S

我知道导致问题“{S}”的以下代码段：

…….. AND (L.Applicable_Location_Region_ID IN (N'PARIS2', N'{S}Paris2'))

根据我的调查，我了解到以下内容：Oracle 解析 SQL 并将 "'{S}Paris2" 的文本视为字符串文字，然后找到 {S} 将其视为 SQL 转义序列，但它没有认出。

以下链接很好地解释了“转义字符”： [http ://docs.oracle.com/cd/F49540_01/DOC/inter.815/a67843/cqspcl.htm](http://docs.oracle.com/cd/F49540_01/DOC/inter.815/a67843/cqspcl.htm)

我们必须使用 {S} 后跟名称。

上面的 AND 语句适用于 SQL Server 和 MySQL，但会导致 Oracle 出现问题，因为“当您使用大括号转义单个字符时，转义的字符将成为查询中的单独标记。”

由于上述原因，应用程序将 {S} 视为转义的带有大括号的单个字符成为查询中的单独标记。

所以请你帮我如何在oracle中用大括号转义单个字符或任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:30:00.067

尝试

```
AND (L.Applicable_Location_Region_ID IN (N'PARIS2', N'\{S\}Paris2')) 
```

编辑：

从 Toad 运行此查询

```
select (N'{S}test2') from dual where ((N'{S}test2') IN (N'test2', N'{S}test2')) 
```

对我有用。您确定问题出在 Oracle 数据库中，而不是在访问它的类/驱动程序中吗？

# xcode - 如何使用应该只读的 GIT 子模块提交 hg repo？

> ID：12934334
> 
> 赞同：1
> 
> 时间：2012-10-17T12:27:15.087
> 
> 标签：xcode, git, mercurial, restkit, git-submodules

我的 Hg 存储库现在需要按照站点 wiki 中的建议方法包含一个 Git 子模块（Restkit）。但是，我不会更新 git 内容，而应该只可能从主机读取/提取更改。看来，当我第一次推送我的主要 Hg 存储库时，它拒绝了 Git 请求密码。我认为这可能是因为它也试图对 Git 站点进行身份验证。我的问题是我可以安排这个以便 Git repo 是只读的（拉）甚至是静态的和/或解决登录问题。显然，这两个不同的存储库具有不同的凭据。谢谢。PS 在 OS X 10.8.2、Xcode 4.5.1 上使用 Atlassian SourceTree 1.5.3

我刚刚重读了这篇文章；

> 2.6\. 在子存储库中同步
> 
> Subrepos 不会自动跟踪其来源的最新变更集。相反，它们会更新为与在顶级变更集中签出的变更集相对应的变更集。这样一来，开发人员在更新时总能获得一组一致的兼容代码和库。
> 
> 因此，更新子存储库是一个手动过程。只需在目标子存储库中运行“hg pull”和“hg up”，在顶级存储库中进行测试，然后在顶级存储库中提交以记录新组合。onsub 扩展可用于自动执行此操作。

假设这意味着它没有拉潜艇？但我仍然有密码请求的上述问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:50:46.500

您朝着正确的方向前进，但尚未完成所有必需的步骤。

你必须*有 subrepository*，手动创建它......并且不要将**真正的 subrepository**与**a) 独立 b) 嵌套存储库混合**

当您将嵌套转换为子存储库时，推送到主存储库将不会执行推送到子存储库（请求除外）

# iframe - 为什么社交网络按钮总是在 iframe 中？

> ID：12934336
> 
> 赞同：2
> 
> 时间：2012-10-17T12:27:21.637
> 
> 标签：iframe, facebook-like, social-networking, twitter-button

我目前正在开发像“Facebook like”和“Twitter”按钮这样的按钮。由于它会有点复杂，涉及单击按钮后显示的工具提示，因此我无法将其放入 iframe。

所以我想了一下为什么每个人都把他们的按钮放到 iframe 中。我想到的第一件事是它不可能改变按钮的外观。但是在这种情况下还有其他（安全）问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:32:23.400

我想它确实可以防止轻易篡改外观，但也可以防止行为（各种 Javascript 即），它允许更轻松的统计数据收集，并且它可能是一种广泛实施的简单方法。简单地说“请放入您的网站”对于用户来说比“请放入您的代码的头部和正文中”`<iframe src="http://blabla" />`更容易做和理解`<script .....>``<form><input type="hidden" ..><input type="submit" ..></form>`

# javascript - 使用 Twitter Bootstrap 的多个项目的单个下拉列表

> ID：12934339
> 
> 赞同：3
> 
> 时间：2012-10-17T12:27:30.047
> 
> 标签：javascript, drop-down-menu, triggers, twitter-bootstrap

我有很多 div 的情况（比如每个 div 都是一个产品容器，带有 ID、标题、图像等）。

在每个 div 中，还有一个按钮，单击该按钮时我想切换引导下拉菜单。

鉴于项目的数量，我不希望每个项目都有自己的标记，所以我想我会创建一个下拉列表并通过 javascript 以编程方式显示它。

不幸的是，我找不到办法。任何帮助，将不胜感激

提前致谢

下面是一个简单的例子

@jrharshath，感谢您的及时回复。我发布了一些代码（虚拟），我相信这可以帮助您回答问题！

```
<div id="container">
  <div class="acontainer">
    <span class="aclicker pull-right btn btn-mini"><i class="icon-chevron-down"></i></span>
    <code>ID: w4234234</code><br />
    <img src="..." /><br />
    product title here
  </div>
  (many of the above '.acontainer' repeating)
</div><!-- end container -->

<div class="dropdown" id="popmenu">
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
      <li><a tabindex="-1" href="#">Action</a></li>
        <li><a tabindex="-1" href="#">Another action</a></li>
        <li><a tabindex="-1" href="#">Something else here</a></li>
        <li class="divider"></li>
        <li><a tabindex="-1" href="#">Separated link</a></li>
    </ul>
</div> 
```

每当有人单击任何 .aclicker 元素时，我都想显示#popmenu。只是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:59:29.200

`.aclicker`每当单击元素时，您都可以使用 jQuery 来移动它。

### JavaScript

```
var $popmenu = $('#popmenu')
  , last;

$('body').on('click.dropdown', '.aclicker', function() {

  // Make sure it's not already open here
  $popmenu.hasClass('open') && last === this ?
    $popmenu.removeClass('open') : // close it

    // otherwise, reposition
    $popmenu
      .css({
        top: this.offsetTop + this.offsetHeight,
        left: this.offsetLeft + this.offsetWidth - 172
      })
      .children('.dropdown-menu')
      .dropdown('toggle'); // then open it

  last = this; // save reference
  return false;
});​ 
```

### CSS

```
#popmenu {
  position: absolute;
} 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/PfzWb/)

# sencha-touch-2 - 构建原生 iOS 应用 Sencha 2“配置文件中缺少捆绑种子 ID”

> ID：12934348
> 
> 赞同：0
> 
> 时间：2012-10-17T12:28:17.850
> 
> 标签：sencha-touch-2

我不明白此错误消息，当我运行以下命令时，我得到：

```
C:\projectsGit\mybipper\portal\bk-servlets\src\main\webapp\parentapp>sencha package build ../nativeBuild/packager.json
[INFO] The application was successfully packaged
Bundle Seed ID is missing from config file
Failed to package application 
```

我的 packager.json 是：

```
{
    "applicationName":"MobileKids",
    "applicationId":"TC3BU5LD52.com.bipper.mobilekids",
    "versionString":"1.1",
    "iconName":"icon.png",
    "inputPath":".",
    "outputPath":"../build",
    "configuration":"Debug",
    "platform":"iOS",
    "deviceType":"Universal",
    "certificatePath":"Certificate_key.p12",
    "certificateAlias":"iPhone Developer: Thomas Vervik (TC3BU5LD52)",
    "sdkPath":"C:/Program Files (x86)/Android/android-sdk",
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:19:59.243

这是 ST2 中的一个错误：[http ://www.sencha.com/forum/showthread.php?192946-2.0.1RC-Native-build-seem-to-be-broken&s=5fd0b1665305e83413dea48c9b4ee510](http://www.sencha.com/forum/showthread.php?192946-2.0.1RC-Native-build-seem-to-be-broken&s=5fd0b1665305e83413dea48c9b4ee510)

你运行的是最新版本吗？此外，上述帖子中提供了一些解决方法。

# map - CouchDB 视图 - 多重过滤器

> ID：12934350
> 
> 赞同：3
> 
> 时间：2012-10-17T12:28:21.540
> 
> 标签：map, mapreduce, couchdb

我有一个关于 couchdb views / map-reduce 的问题。

可以说，我们有一个包含酒店文档的数据库，如下所示：

```
[{
        _id: "1",
        name: "Hotel A",
        type: "hotel",
        stars: 3,
        flags: ["family-friendly","green-hotel","sport"],
        hotelType: "premium",
        food: ["breakfast","lunch"]
    }, {
        _id: "2",
        name: "Hotel B",
        type: "hotel",
        stars: 5,
        flags: ["family-friendly","pet-friendly"],
        hotelType: "budget",
        food: ["breakfast","lunch","dinner"]
    }] 
```

要查找所有 3 星级酒店，以下视图将适合：

```
function(doc) {
    emit([doc.stars, doc.name]);
} 
```

如果我使用 startkey=[3]，一切都很好。

但是如何使用多个过滤器制作视图呢？

例如 - 所有酒店：

*   带有 3 星和“家庭友好型”和“宠物友好型”标志以及 hotelType“预算”？
*   与hotelType“高级”和食物“早餐”或“午餐”？
*   等等

有任何想法吗？

编辑：我现在决定使用好的旧 mysql。CouchDB 对我来说是一次不错的体验，但是如果您需要的不仅仅是一个文档的数据，那么问题就太多了 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:20:34.500

您可以发出带有一组值的键：

```
emit([[doc.stars,doc.hotelType], doc.name]); 
```

问题在于，这只有在您可以按重要性排序属性时才有效，因为它们总是会以相同的顺序减少。Kxepal 使用不同视图的解决方案可能最适合您的情况。

资料来源：[http ://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Grouping](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Grouping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:12:37.690

您需要为此使用不同的视图。每个视图都将使用自己的密钥处理自己的域。您可以通过多个具有不同值的发射来创建单一视图的所有数据`key`，但从角度来看，这将很难维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T06:09:18.570

CouchDB 视图是一维的。而您正在寻找多维查询：

*   x = 星星
*   y = 标志
*   z = 酒店类型

不幸的是，不支持多维查询。例如，如果您需要按经纬度查询地理位置，则必须使用 GeoCouch。

# java - 如何将重新启动的活动连接到正在运行的服务到同一个应用程序中？

> ID：12934351
> 
> 赞同：0
> 
> 时间：2012-10-17T12:28:22.703
> 
> 标签：java, android, service

我的应用程序包含主活动、服务和在此服务上运行的几个线程。Activity 有 1 个按钮“*启动服务*”和其他 UI。当用户按下按钮时，按钮的名称更改为“*停止服务*”，程序创建新的服务来存储有关 CPU 使用率的信息，并以每 1 秒的频率将存储的信息粘贴到 TextVeiw。

可以说我停止了主要活动。服务继续运行，但没有任何活动可以让服务传递数据。

1分钟后。我再次启动主要活动。首先，我想看到上面提到的按钮状态（名称）“*停止服务*”，我想看到旧服务继续与我的新活动对话。

我不打算使用`LocalBinder`和`bindService(...);`方法，因为我的服务留在我自己的应用程序中。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:28:22.703

这是一个广泛的代码示例。

启动时，Activity 将实例呈现给 Application。我们的应用程序将存储主 Activity 的实例（或者换句话说，Activity 的接口）

看`GuiServiceBridgeItf gsb`

片段**应用程序类**

```
public class MyApplication extends Application{ 

    private static mYApplication mSingleton;

    public GuiServiceBridgeItf gsb = null;

 @Override
 public void onCreate() {
    super.onCreate();
    mSingleton = this;
 } 

 public mYApplication getApp(){
    return mSingleton;
 }
....
} 
```

**GuiServiceBridgeItf**接口

```
public interface GuiServiceBridgeItf {
   public void onEventReceived(String str);

   /** Notify activity about service run */
   public void imHere();
....
} 
```

这是我们实现相同接口的服务`GuiServiceBridgeItf`。 `MyService`运行 2 个线程：

一个线程运行一些逻辑（在我们的例子中，每秒通知 CPU 上的 Activity）

第二个通知主 Activity 如果 Service 运行（最好将此任务提供给 Activity 以询问 Service 是否运行）

```
public class MyService extends Service implements GuiServiceBridgeItf {

....

private RunnerThread runner = null;
private CheckAliveThread checkalive = null;

private MyApplication mMyApp = null;

public void onCreate() {
    super.onCreate();

    mMyApp  = (MyApplication)getApplicationContext();
}

public int onStartCommand(Intent intent, int flags, int startId) {

    GuiServiceBridgeItf gui2ServiceTalker = this;

    checkalive = new CheckAliveThread();
    checkalive.init(mMyApp);
    checkalive.start();

    runner = new RunnerThread(this.getApplicationContext(), gui2ServiceTalker);
    runner.start();

    ...

    return START_STICKY;
}

public void onDestroy() {   
    super.onDestroy();

    ...

    runner.doDestroy();     
    runner = null;  

    checkalive.doDestroy();
    checkalive = null;

    stopSelf();
}

private boolean isInstanceActive(){
    if(mMyApp.gsb == null){
        return false;
    }

    return true;
}

public void imHere() {}

public void onEventReceived(String str) {
    if(isInstanceActive()){
        mMyApp.gsb.onEventReceived(str);
    }
}

...

} 
```

这里的主要方法是：`boolean isInstanceActive()`返回`true`或`false`开启
Activity状态。换句话说，如果我们关闭 Activity，我们会从 Application 中注销它的实例。因为`onDestroy`main Activity 中的方法会重置`MyApplication.gsb`。

另一方面，当我们重新启动新的 Activity 时，我们再次将其*注册*到 Application，（见下文）

```
public class LauncherUI extends Activity implements GuiServiceBridgeItf{

     ....
    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            // register Activity to Application    
            GuiServiceBridgeItf gts = this;     
    mApplicationApp = (MyApplication)mContext.getApplicationContext();
    mApplicationApp .gsb = gts;

            ....
   }

   ....

    @Override
protected void onDestroy() {
   super.onDestroy();
       ....
       // Unregister Activity to prevent to Service to talk with   
       mMyApplication.gsb = null;
}

} 
```

Service 通过使用他的 Thread 验证 Activity*注册*到 Application 并因此继续通知*新生*Activity 有关 CPU 更改。现在 Activity 可以将按钮名称更新为“*停止服务*”并执行其他操作

# javascript - 幻灯片切换问题

> ID：12934361
> 
> 赞同：-3
> 
> 时间：2012-10-17T12:29:04.507
> 
> 标签：javascript, jquery, html, css

对不起我的疯狂问题。我有一些导航链接。通过将鼠标悬停在链接上，黑色背景从上到下滑动，链接从下到上移动。我找到了两个脚本。它运作良好。但我想结合两个动画。请查看我的小提琴位置。有任何想法吗？？

[http://jsfiddle.net/DpZJE/](http://jsfiddle.net/DpZJE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:33:44.970

结合？像这样？

## [小提琴](http://jsfiddle.net/DpZJE/2/)

您可以使用[hover](http://api.jquery.com/hover/)方法，它是mouseenter 和mouseleave 的组合。

```
$("li.first a.link").hover(function(){
    $("li.first a.link").animate({"paddingTop": "-=30px"}, "slow");
}, function(){
    $("li.first a.link").animate({"paddingTop": "+=30px"}, "slow");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:36:12.180

**为更好地摆弄而编辑；）**

还是像这样？
[http://jsfiddle.net/neuroflux/DpZJE/9/](http://jsfiddle.net/neuroflux/DpZJE/9/)
（带`stop()`动画）
[http://jsfiddle.net/neuroflux/DpZJE/13/](http://jsfiddle.net/neuroflux/DpZJE/13/)

片段（注意缺少`hover()`）：

```
$("li").on('mouseover', function () {
  $(this).children('span').slideToggle("slow");
  $(this).children('a').animate({"paddingTop": "-=30px"}, "slow");
}).on('mouseout', function() {
     $(this).children('span').slideToggle("slow");
     $(this).children('a').animate({"paddingTop": "+=30px"}, "slow");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:42:04.993

我想你是这个意思？不使用slideToggle，而是使用slideDown 和slideUp

```
 $("li.first").hover(function () {
     $(".trans1").slideUp("slow");
     $("li.first a.link").animate({"paddingTop": "-=30px"}, "slow");
   },function () {
     $(".trans1").slideDown("slow");
     $("li.first a.link").animate({"paddingTop": "+=30px"}, "slow");
   }); 
```

（为调试添加了黄色背景..）
[http://jsfiddle.net/avipinto/DpZJE/10/](http://jsfiddle.net/avipinto/DpZJE/10/)

# objective-c - 滚动时复制 UITableViewCell contentView 的子视图（UIButton 和 UIImageView）

> ID：12934364
> 
> 赞同：3
> 
> 时间：2012-10-17T12:29:10.737
> 
> 标签：objective-c, xcode, uitableview

在我的 tableView 中，在某些单元格中，我添加了一个 imageView 作为单元格 contentView 的子视图。在上下滚动 tableView 时，这些图像也会复制到其他单元格上。但这个问题并不总是发生。请提出解决方案..我正在使用以下代码。

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    if (friendsArray.count != 0)
    {
        NSString *str = [friendsIdArray objectAtIndex:indexPath.row];
        if ([pendingRequests containsObject:str])
        {
            // Add image for pending item
            UIImageView *pendImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pendng.png"]];
            pendImage.frame = CGRectMake(220.0, 2.5, 70, 40);
            pendImage.tag = indexPath.row;   
            [cell.contentView addSubview:pendImage];
        }
    }

}

NSString *object;

if (friendsArray.count == 0)
{
    if ([cell.contentView viewWithTag:indexPath.row]) 
    {
        for (UIView *subview in [cell.contentView subviews]) 
        {
            [subview removeFromSuperview];
        }
    }

    object = @"No friends added to the list";
    cell.textLabel.textAlignment = UITextAlignmentCenter;
}
else 
{
    object = [friendsArray objectAtIndex:indexPath.row];
    cell.textLabel.textAlignment = UITextAlignmentLeft;

    if (![cell.contentView viewWithTag:indexPath.row]) 
    {
        NSString *str = [friendsIdArray objectAtIndex:indexPath.row];
        if ([pendingRequests containsObject:str])
        {
            // Add image for pending item
            UIImageView *pendImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pendng.png"]];
            pendImage.frame = CGRectMake(220.0, 2.5, 70, 40);
            pendImage.tag = indexPath.row;   
            [cell.contentView addSubview:pendImage];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T09:00:39.767

现在问题已经解决了。我在创建新 tableViewCell 的 else 案例中使用了以下行。

```
[cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

我已经编辑了我的代码，如下所示：

```
if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    }
    else
    {
        [cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:35:49.593

试试下面的代码..

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    if (friendsArray.count != 0)
    {
        NSString *str = [friendsIdArray objectAtIndex:indexPath.row];
        if ([pendingRequests containsObject:str])
        {
            // Add image for pending item
            UIImageView *pendImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pendng.png"]];
            pendImage.frame = CGRectMake(220.0, 2.5, 70, 40);
            pendImage.tag = indexPath.row;   
            [cell.contentView addSubview:pendImage];
        }
    }

    NSString *object;

    if (friendsArray.count == 0)
    {
       if ([cell.contentView viewWithTag:indexPath.row]) 
       {
          for (UIView *subview in [cell.contentView subviews]) 
          {
             [subview removeFromSuperview];
          }
       }

        object = @"No friends added to the list";
        cell.textLabel.textAlignment = UITextAlignmentCenter;
    }
    else 
    {
       object = [friendsArray objectAtIndex:indexPath.row];
       cell.textLabel.textAlignment = UITextAlignmentLeft;

       if (![cell.contentView viewWithTag:indexPath.row]) 
       {
          NSString *str = [friendsIdArray objectAtIndex:indexPath.row];
          if ([pendingRequests containsObject:str])
          {
             // Add image for pending item
             UIImageView *pendImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pendng.png"]];
             pendImage.frame = CGRectMake(220.0, 2.5, 70, 40);
             pendImage.tag = indexPath.row;   
             [cell.contentView addSubview:pendImage];
          }
     }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:42:42.903

正如 Romit Mewada 建议的那样，您可以使用它，但每次您都有 alloc & add new `UIImageView`。

取而代之的是，您可以将 nil 发送到 that 的图像`UIImageView`。

以这种方式实施。

```
if (cell == nil)
{
    //get your cell or alloc & initialize
    // create and add imageView
}

UIImageView* imageView = [cell.contentView viewWithTag:indexPath.row];
imageView.image = nil;
//do your other task, you can use the same imageView to add other image for other row. 
```

# flash - 我可以在 Flash 项目中使用在 flex 中创建的自定义组件吗？

> ID：12934371
> 
> 赞同：0
> 
> 时间：2012-10-17T12:29:28.593
> 
> 标签：flash, apache-flex, custom-component

我在 flash builder 中创建了 flash 项目和一个 flash 组件项目，然后在 flex 组件项目中创建了一个 spark 组件。当我尝试在 Flash 中添加自定义组件时，它抛出错误

```
//code
this.addChild(new TestComp);
//compilation error
1067: Implicit coercion of a value of type TestComp to an unrelated type flash.display:DisplayObject.   Main.as /pw3d/src   line 35 Flex Problem 
```

是否可以在 Flash 中使用 flex 组件？有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:32:55.233

> Is it possible to use flex components in flash at all?

Yes, it is possible, in theory, but I expect it to be tedious and difficult. You'll have to do all your framework initialization manually. That means you'll have to do things like setup the [SystemManager](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/SystemManager.html) class manually.

Honestly, I don't know everything that the Flex Compiler / Application tag does to setup the Flex Framework. You may have to compile a simple Flex app with the 'keep' attribute and review the generated code to make sure you mimic that in your Flash Pro code.

Some reference information can be found [here](http://blogs.adobe.com/rgonzalez/2006/06/modular_applications_part_1.html), [here](http://blogs.adobe.com/rgonzalez/2006/06/modular_applications_part_2.html), and [here](http://guyinthechair.com/2010/01/understanding-the-flex-systemmanager/).

The error you're seeing is odd; because a Flex Component must extend UIComponent and UIComponent extends DisplayObject. I wonder if you are missing a SWC library in your class path somehow and Flash pro is unable to tell that TestComp is actually a DisplayObject.

# php - php 脚本获取节点值，如果它等于指定值；更改节点值具有相同的父节点

> ID：12934373
> 
> 赞同：1
> 
> 时间：2012-10-17T12:29:32.707
> 
> 标签：php, xml, tags, simplexml, nodes

就像我在 php 脚本中需要帮助的标题一样，如果它等于指定的给定值，则获取“名称”节点值；更改“率”节点值具有相同的“人”父节点。xml 文件“rate.xml”如下

```
<?xml version="1.0"?>
<user>
<person>
<name>jessy</name> 
<rate>2</rate>
</person>
<person>
<name>mice</name>
<rate>5</rate>
</person>
</user> 
```

脚本将与此类似

```
<?php
$name = $_POST['name'];
$like = $_POST['like'];

$doc = new DOMDocument();

libxml_use_internal_errors(true);

$doc->loadXML(file_get_contents ('rate.xml'));

$xpath = new DOMXPath($doc);

$nlist = $xpath->query("//user/person/rate");

$node = $nlist->item(0);

$newval = trim($node->nodeValue)-1;

$node->nodeValue = $newval;

file_put_contents ('rate.xml', $doc->saveXML());

?> 
```

我缺少的部分是如何键入“if”条件检查名称是否等于我传递给“POST”的名称，以及如何使用“POST ['名称”将更改限制在此“名称”节点之后的“速率”节点']“ 价值。实施将是一个很大的帮助亲切的问候:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:45:56.487

你可以这样做

```
$name = "jessy";
$xml = '<?xml version="1.0"?>
<user>
<person>
<name>jessy</name> 
<rate>2</rate>
</person>
<person>
<name>mice</name>
<rate>5</rate>
</person>
</user>';

$xml = new SimpleXMLElement($xml);
for($i = 0; $i < count($xml->person); $i ++) {
    if ($xml->person[$i]->name == $name) {
        $xml->person[$i]->rate = $xml->person[$i]->rate - 1;
    }
}
echo $xml->asXML(); 
```

输出

```
<?xml version="1.0"?>
<user>
    <person>
        <name>jessy</name>
        <rate>1</rate>    <----- Modified rate for jessy
    </person>
    <person>
        <name>mice</name>
        <rate>5</rate>
    </person>
</user> 
```

# function - 函数调用变量输出编号

> ID：12934381
> 
> 赞同：11
> 
> 时间：2012-10-17T12:29:55.383
> 
> 标签：function, matlab, parameters, output

我发现自己试图将自定义类与内置函数接口，并且遇到了只能用 eval 解决的情况，我想要一种“更清洁”的方式。

基本上，内置函数定义为`varargout=blabla(varargin)` 我在自定义类中定义了一个覆盖函数，如`varargout=blabla(varargin)`. 该函数如下所示：

```
function varargout=blabla(varargin)
    varargout=blabla(function_of_varargin)
end 
```

的功能`varargin`将其从自定义类转换为内置类。

但它不能按原样工作：基本上，当在覆盖函数内部调用内置函数时，它只看到一个输出参数 ( `varargout`)，即使使用多个输出参数调用自定义覆盖函数也是如此。

我基本上通过调用这个来解决它：

```
[varargout{1},varargout{2},...,varargout{nargout}]=blabla(function_of_varargin) 
```

用循环和评估构造 LHS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T12:41:50.597

你有没有试过这个：

```
[varargout{1:nargout}] = blabla(varargin{:}) 
```

?

# mysql - Linux Mandriva：Tomcat 无法获取 MySQL 数据库连接，为什么？

> ID：12934384
> 
> 赞同：2
> 
> 时间：2012-10-17T12:30:01.267
> 
> 标签：mysql, linux, jakarta-ee, tomcat, networking

**我在Linux Mandriva**上安装了**Tomcat 7**和**MySQL**数据库，但应用程序部署在容器中无法获得连接。

 **我写了两个简单的测试，当从客户端运行它们时，我得到了连接 -

```
public class TestHibernate {
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        User user = new User();
        user.setName("userName");
        user.setPassword("userPassword");

        Session session = HibernateUtil.
            getSessionFactory().openSession();

        session.beginTransaction();
        session.save(user);
        session.getTransaction().commit();

        session.close();
    }
} 
```

HibernateUtil 的一部分 -

```
...
      cnf.setProperty("hibernate.connection.url", "jdbc:mysql://ip:3306/gibrid");
      cnf.setProperty("hibernate.connection.username", "java");
      cnf.setProperty("hibernate.connection.password", "java");
... 
```

Jdbc 测试 -

```
public class TestJdbc {
    public static void main(String[] args) {
      Connection conn = null;
      String url = "jdbc:mysql://ip:3306/";
      String dbName = "gibrid";
      String driver = "com.mysql.jdbc.Driver";
      String userName = "java"; 
      String password = "java";
      try {
          Class.forName(driver).newInstance();
          conn = DriverManager.getConnection(url+dbName,userName,password);
          System.out.println("Connected to the database");
          conn.close();
          System.out.println("Disconnected from database");
      } catch (Exception e) {
          e.printStackTrace();
    }
  }
} 
```

在这些情况下，我得到一个连接并且可以使用数据库。但是当我从客户端浏览器请求时，我得到了超时。这是为什么？我将非常感谢您提供的信息。

* * *

这是**catalina.out** -

```
...
    INFO: Server startup in 5315 ms
    17.10.2012 15:36:52 com.vaadin.terminal.gwt.server.AbstractApplicationServlet serveStaticResourcesInVAADIN
    INFO: Requested resource [VAADIN/themes/web13theme/favicon.ico] not found from filesystem or through class loader. Add widgetset and/or theme JAR to your classpath or add files to WebContent/VAADIN folder.
    17.10.2012 15:36:58 com.vaadin.terminal.gwt.server.AbstractApplicationServlet serveStaticResourcesInVAADIN
    INFO: Requested resource [VAADIN/themes/projtheme/img/cancel.png] not found from filesystem or through class loader. Add widgetset and/or theme JAR to your classpath or add files to WebContent/VAADIN folder.
    3 [http-bio-8081-exec-7] INFO org.hibernate.cfg.annotations.Version - Hibernate Annotations 3.4.0.GA
    25 [http-bio-8081-exec-7] INFO org.hibernate.cfg.Environment - Hibernate 3.3.0.SP1
    39 [http-bio-8081-exec-7] INFO org.hibernate.cfg.Environment - hibernate.properties not found
    44 [http-bio-8081-exec-7] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
    50 [http-bio-8081-exec-7] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
    148 [http-bio-8081-exec-7] INFO org.hibernate.annotations.common.Version - Hibernate Commons Annotations 3.1.0.GA
    176 [http-bio-8081-exec-7] INFO org.hibernate.cfg.search.HibernateSearchEventListenerRegister - Unable to find org.hibernate.search.event.FullTextIndexEventListener on the classpath. Hibernate Search is not enabled.
    247 [http-bio-8081-exec-7] INFO org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.ssi.domen.Incoming
    313 [http-bio-8081-exec-7] INFO org.hibernate.cfg.annotations.EntityBinder - Bind entity com.ssi.domen.Incoming on table INCOMING
    397 [http-bio-8081-exec-7] INFO org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.ssi.domen.Outcoming
    397 [http-bio-8081-exec-7] INFO org.hibernate.cfg.annotations.EntityBinder - Bind entity com.ssi.domen.Outcoming on table OUTCOMING
    400 [http-bio-8081-exec-7] INFO org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.ssi.domen.User
    400 [http-bio-8081-exec-7] INFO org.hibernate.cfg.annotations.EntityBinder - Bind entity com.ssi.domen.User on table USER
    402 [http-bio-8081-exec-7] INFO org.hibernate.cfg.AnnotationBinder - Binding entity from annotated class: com.ssi.domen.Cable
    402 [http-bio-8081-exec-7] INFO org.hibernate.cfg.annotations.EntityBinder - Bind entity com.ssi.domen.Cable on table CABLE
    497 [http-bio-8081-exec-7] INFO org.hibernate.cfg.AnnotationConfiguration - Hibernate Validator not found: ignoring
    509 [http-bio-8081-exec-7] INFO org.hibernate.connection.DriverManagerConnectionProvider - Using Hibernate built-in connection pool (not for production use!)
    510 [http-bio-8081-exec-7] INFO org.hibernate.connection.DriverManagerConnectionProvider - Hibernate connection pool size: 20
    510 [http-bio-8081-exec-7] INFO org.hibernate.connection.DriverManagerConnectionProvider - autocommit mode: false
    514 [http-bio-8081-exec-7] INFO org.hibernate.connection.DriverManagerConnectionProvider - using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://---ip here----/gibrid
    514 [http-bio-8081-exec-7] INFO org.hibernate.connection.DriverManagerConnectionProvider - connection properties: {user=java, password=****}
    189691 [http-bio-8081-exec-7] WARN org.hibernate.cfg.SettingsFactory - Could not obtain connection metadata
    com.mysql.jdbc.CommunicationsException: Communications link failure due to underlying exception: 

    ** BEGIN NESTED EXCEPTION ** 

    java.net.ConnectException
    MESSAGE: Connection timed out

    STACKTRACE:

    java.net.ConnectException: Connection timed out
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at java.net.Socket.connect(Socket.java:478)
        at java.net.Socket.<init>(Socket.java:375)
        at java.net.Socket.<init>(Socket.java:218)
        at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:271)
        at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)
        at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:154)
        at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
        at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:111)
        at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2101)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1325)
        at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:867)
        at com.ssi.hbnutils.HibernateUtil.<clinit>(HibernateUtil.java:34)
        at com.ssi.windows.RegWindow.check(RegWindow.java:167)
        at com.ssi.windows.RegWindow.insert(RegWindow.java:140)
        at com.ssi.windows.RegWindow.access$0(RegWindow.java:139)
        at com.ssi.windows.RegWindow$1.buttonClick(RegWindow.java:107)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510)
        at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164)
        at com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1219)
        at com.vaadin.ui.Button.fireClick(Button.java:567)
        at com.vaadin.ui.Button.changeVariables(Button.java:223)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1460)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1404)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1329)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:761)
        at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:323)
        at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)

    ** END NESTED EXCEPTION **

    Last packet sent to the server was 6 ms ago.
        at com.mysql.jdbc.Connection.createNewIO(Connection.java:2847)
        at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:154)
        at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
        at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:111)
        at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2101)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1325)
        at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:867)
        at com.ssi.hbnutils.HibernateUtil.<clinit>(HibernateUtil.java:34)
        at com.ssi.windows.RegWindow.check(RegWindow.java:167)
        at com.ssi.windows.RegWindow.insert(RegWindow.java:140)
        at com.ssi.windows.RegWindow.access$0(RegWindow.java:139)
        at com.ssi.windows.RegWindow$1.buttonClick(RegWindow.java:107)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510)
        at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164)
        at com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1219)
        at com.vaadin.ui.Button.fireClick(Button.java:567)
        at com.vaadin.ui.Button.changeVariables(Button.java:223)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1460)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1404)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1329)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:761)
        at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:323)
        at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
    190005 [http-bio-8081-exec-7] INFO org.hibernate.dialect.Dialect - Using dialect: org.hibernate.dialect.MySQLDialect
    190066 [http-bio-8081-exec-7] INFO org.hibernate.transaction.TransactionFactoryFactory - Using default transaction strategy (direct JDBC transactions)
    190090 [http-bio-8081-exec-7] INFO org.hibernate.transaction.TransactionManagerLookupFactory - No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
    190092 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Automatic flush during beforeCompletion(): disabled
    190092 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Automatic session close at end of transaction: disabled
    190114 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Scrollable result sets: disabled
    190115 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - JDBC3 getGeneratedKeys(): disabled
    190116 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Connection release mode: auto
    190125 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Maximum outer join fetch depth: 2
    190127 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Default batch fetch size: 1
    190127 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Generate SQL with comments: disabled
    190128 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Order SQL updates by primary key: disabled
    190128 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Order SQL inserts for batching: disabled
    190129 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
    190167 [http-bio-8081-exec-7] INFO org.hibernate.hql.ast.ASTQueryTranslatorFactory - Using ASTQueryTranslatorFactory
    190169 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Query language substitutions: {}
    190169 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - JPA-QL strict compliance: disabled
    190170 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Second-level cache: enabled
    190171 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Query cache: disabled
    190171 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Cache region factory : org.hibernate.cache.impl.NoCachingRegionFactory
    190173 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Optimize cache for minimal puts: disabled
    190174 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Structured second-level cache entries: disabled
    190239 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Echoing all SQL to stdout
    190250 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Statistics: disabled
    190250 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
    190260 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Default entity-mode: pojo
    190260 [http-bio-8081-exec-7] INFO org.hibernate.cfg.SettingsFactory - Named query checking : enabled
    190761 [http-bio-8081-exec-7] INFO org.hibernate.impl.SessionFactoryImpl - building session factory
    191112 [http-bio-8081-exec-7] INFO org.hibernate.impl.SessionFactoryObjectFactory - Not binding factory to JNDI, no JNDI name configured
    380252 [http-bio-8081-exec-7] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 08S01
    380252 [http-bio-8081-exec-7] ERROR org.hibernate.util.JDBCExceptionReporter - Communications link failure due to underlying exception: 

    ** BEGIN NESTED EXCEPTION ** 

    java.net.ConnectException
    MESSAGE: Connection timed out

    STACKTRACE:

    java.net.ConnectException: Connection timed out
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at java.net.Socket.connect(Socket.java:478)
        at java.net.Socket.<init>(Socket.java:375)
        at java.net.Socket.<init>(Socket.java:218)
        at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:256)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:271)
        at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771)
        at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
        at java.sql.DriverManager.getConnection(DriverManager.java:582)
        at java.sql.DriverManager.getConnection(DriverManager.java:154)
        at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
        at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
        at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
        at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:142)
        at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:85)
        at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1353)
        at com.ssi.windows.RegWindow.check(RegWindow.java:168)
        at com.ssi.windows.RegWindow.insert(RegWindow.java:140)
        at com.ssi.windows.RegWindow.access$0(RegWindow.java:139)
        at com.ssi.windows.RegWindow$1.buttonClick(RegWindow.java:107)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510)
        at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164)
        at com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1219)
        at com.vaadin.ui.Button.fireClick(Button.java:567)
        at com.vaadin.ui.Button.changeVariables(Button.java:223)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1460)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1404)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1329)
        at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:761)
        at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:323)
        at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)

    ** END NESTED EXCEPTION **

    Last packet sent to the server was 5 ms ago. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:43:10.377

编辑您的 mysql 配置文件以绑定 0.0.0.0 或您的 ip 而不是 127.0.0.1 可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:59:24.540

我不熟悉Hibernate，所以我不知道这是否相关：

“找不到hibernate.properties”

“使用驱动程序：com.mysql.jdbc.Driver 在 URL：jdbc:mysql://---ip here----/gibrid”

IP**和**端口是否与您的测试程序中的相同？

此[博客](http://hibernatedb.blogspot.de/2009/04/hibernate-and-mysql-connection-timeouts.html)提示 C3PO 的配置问题。一条评论暗示了 Mysql 和 C3PO 之间的不同超时设置。高温高压**

# mysql - 使用带有大量 JSON 字段的 MongoDB 与 MySQL？

> ID：12934385
> 
> 赞同：25
> 
> 时间：2012-10-17T12:30:01.613
> 
> 标签：mysql, mongodb, nosql

有一个微博类型的应用程序。两个主要的基本数据库存储是：MySQL 或 MongoDB。

我计划对大量数据进行非规范化，即对帖子进行的投票存储在投票表中，并且在主帖子表中增加计数。该帖子还涉及其他操作（例如，点赞、投反对票）。

如果我使用 MySQL，一些数据比固定模式更适合 JSON，以便更快地查找。

例如

```
POST_ID   |  activity_data

213423424 | { 'likes': {'count':213,'recent_likers' :
             ['john','jack',..fixed list of recent N users]} , 'smiles' : 
             {'count':345,'recent_smilers' :
             ['mary','jack',..fixed list of recent N users]}  } 
```

该应用程序还有其他组件，其中建议使用 JSON。因此，要更新 JSON 字段，顺序为：

1.  在 python 脚本中读取 JSON。

2.  更新 JSON

3.  将 JSON 存储回 MySQL。

这将是 MongoDB 中的单个操作，具有,`$push`等原子操作。MongoDB 的文档结构也很适合我的数据。`$inc``$pull`

我在选择数据存储时的考虑。

关于 MySQL：

1.  稳定而熟悉。
2.  备份和恢复很容易。
3.  使用某些字段作为无模式 JSON 可以避免未来的一些模式更改。
4.  可能要提前使用memcached层。
5.  JSON blob 在某些表（如主帖子）中将是静态的，但会在其他一些表（如帖子投票和点赞）中进行大量更新。

关于 MongoDB：

1.  更适合将架构较少的数据存储为文档。
2.  缓存可能会被避免，直到稍后阶段。
3.  有时应用程序可能会变得写密集型，MongoDB 可以在不安全写入不成问题的那些点上表现得更好。
4.  不确定稳定性和可靠性。
5.  不确定备份和恢复有多容易。

问题：

1.  如果一半的数据是无模式的，我们是否应该选择 MongoDB，如果使用 MySQL，我们应该将其存储为 JSON 吗？
2.  像主帖这样的一些数据很关键，所以它将使用安全写入保存，计数器等将使用不安全写入保存。这种基于数据重要性和写入密集度的策略是否正确？

3.  与 MySQL 相比，监控、备份和恢复 MongoDB 有多容易？我们需要计划定期备份（比如每天），并在发生灾难时轻松恢复它们。我对 MongoDB 的最佳选择是什么，以使其成为应用程序的安全选择。

稳定性、备份、快照、恢复、更广泛的采用 Ieddatabase 持久性是指向我使用 MySQL 作为 RDBMS+NoSql 的原因，即使 NoSQL 文档存储可以更好地服务于我的目的。

考虑到我想到的数据库设计，请将您的观点集中在 MySQL 和 MongoDB 之间的选择上。我知道可能有更好的方法来使用 RDBMS 或 MongoDB 文档来规划数据库设计。但这不是我当前问题的重点。

**更新**：从 MySQL 5.7 开始，**MySQL 支持丰富的原生 JSON 数据类型**，提供数据灵活性以及丰富的 JSON 查询。

[https://dev.mysql.com/doc/refman/5.7/en/json.html](https://dev.mysql.com/doc/refman/5.7/en/json.html)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T22:25:57.233

所以，直接回答问题...

> 如果一半数据是无模式的，我们是否应该选择 mongodb，如果使用 MySQL，我们应该将其存储为 JSON 吗？

无模式存储无疑是使用 MongoDB 的一个令人信服的理由，但正如您所指出的，将 JSON 存储在 RDBMS 中也相当容易。MongoDB 的强大之处在于对无模式存储的丰富查询。

如果我可以指出插图中关于更新 JSON 字段的一个小缺陷，那么这不仅仅是获取当前值、更新文档然后将其推回数据库的问题。该过程必须全部包含在事务中。在您开始对数据库进行非规范化之前，事务往往相当简单。然后像记录赞成票这样简单的事情可以锁定整个架构中的表。

使用 MongoDB，没有事务。但是操作几乎总是可以以允许原子更新的方式构造。这通常涉及 SQL 范式的一些戏剧性转变，但在我看来，一旦您停止尝试将对象强制放入表中，它们就相当明显了。至少，很多其他人也遇到了你将面临的同样问题，而且 Mongo 社区往往相当开放，并且对他们所克服的挑战直言不讳。

> 像主帖这样的一些数据是关键的，所以它将使用安全写入保存，计数器等将使用不安全写入保存。这种基于数据重要性和写入密集度的策略是否正确？

通过“安全写入”，我假设您的意思是在每次写入后打开自动“getLastError()”的选项。我们对 DBCollection 有一个非常薄的包装器，它允许我们对何时调用 getLastError() 进行细粒度控制。但是，我们的策略不是基于数据的“重要程度”，而是基于查询之后的代码是否期望任何修改在接下来的读取中立即可见。

一般来说，这仍然是一个糟糕的指标，我们已经迁移到 findAndModify() 以获得相同的行为。在我们仍然显式调用 getLastError() 的情况下，数据库可能会拒绝写入，例如当我们 insert() 的 _id 可能重复时。

> 与 mysql 相比，Mongodb 的监控、备份和恢复有多容易？我们需要计划定期备份（比如每天），并在发生灾难时轻松恢复它们。我对 mongoDb 有哪些最佳选择，以使其成为应用程序的安全选择？

恐怕我不能谈论我们的备份/恢复策略是否有效，因为我们还没有恢复。我们遵循 MongoDB 备份建议；@mark-hillick 在总结这些方面做得很好。我们正在使用副本集，我们已经迁移了 MongoDB 版本并引入了新的副本成员。到目前为止，我们还没有停机时间，所以我不确定我能不能说得好。

> 稳定性、备份、快照、恢复、更广泛的采用 iedatabase 持久性是指向我使用 MySQL 作为 RDBMS+NoSql 的原因，即使 NoSQL 文档存储可以更好地服务于我的目的。

因此，根据我的经验，MongoDB 通过一组足够丰富的查询原语来存储无模式数据，以至于事务通常可以被原子操作替换。忘记 10 多年的 SQL 经验是很困难的，但我遇到的每个问题都已由社区或 10gen 直接解决。我记得我们没有丢失数据或有任何停机时间。

简单来说，就查询、维护、可扩展性和可靠性而言，MongoDB 是我用过的最好的数据存储生态系统。除非我有一个非常明确的关系应用程序，以至于我良心上只能使用 SQL 以外的任何东西，否则我会尽一切努力使用 MongoDB。

我不为 10gen 工作，但我非常感谢那些工作的人。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-17T16:08:01.820

我不会对这些比较发表评论（我为 10gen 工作，我觉得这样做不合适），但是，我会回答具体的 MongoDB 问题，以便您更好地做出决定。

**备份**

[这里](http://docs.mongodb.org/manual/administration/backups/)的文档非常详尽，涵盖了很多方面：

*   块级方法（LVM 让它变得非常简单，很多人都这样做）
*   有/没有日志
*   EBS 快照
*   一般快照
*   复制（技术上不是备份，但是，很多人使用副本集来进行冗余和备份 - 不推荐这样做，但已经完成）

直到最近，还没有 MongoDB 等价物，`mylvmbackup`但一个好人写了一个 :) 用他的话来说

> 到目前为止的早期阶段：它只是一个美化的 shell 脚本，需要更多的错误检查。但它已经对我有用，我想我会分享快乐。欢迎提交错误报告、补丁和建议。

[从这里](https://github.com/payperks/mongolvmbackup)获取一份副本。

**恢复**

*   [格式等](http://docs.mongodb.org/manual/administration/backups/#binary-dump-restore-formats)

`mongodump`完全记录[在这里](http://docs.mongodb.org/manual/reference/mongodump/)，mongorestore 在[这里](http://docs.mongodb.org/manual/reference/mongorestore/)。

`mongodump`将不包含索引，但包含 system.indexes 集合，因此 mongorestore 可以在您恢复 bson 文件时重建索引。bson 文件是实际数据，`mongoexport/mongoimport`但不是类型安全的，所以它可以是任何东西（从技术上讲）:)

**监控**

记录[在这里](http://www.mongodb.org/display/DOCS/Monitoring+and+Diagnostics)。

我喜欢 Cacti，但是 afaik，Cacti 模板没有跟上 MongoDB 的变化，所以依赖旧语法，所以发布 2.0.4，我相信有问题。

Nagios 运行良好，但它是 Nagios，所以你要么爱要么恨它。很多人使用 Nagios，它似乎为他们提供了很好的可见性。

我听说有人在看 Zappix，但我从未使用过它，所以无法发表评论。

此外，您还可以使用免费的外部托管彩信。您的 MongoDB 实例运行一个代理，其中一个代理通过 https 与 mms.10gen.com 进行通信（使用 python 代码）。我们使用 MMS 来查看有关 MongoDB 实例的所有性能统计信息，这从高层次的广泛视图以及提供向下钻取的能力非常有益。它安装简单，您无需为此运行任何硬件。许多客户运行它，有些客户用 Cacti/Nagios 来称赞它。

可以在[此处](https://mms.10gen.com/help/)找到有关 MMS 的帮助信息（这是一份非常详细、内容丰富的文档）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T21:21:17.543

存储 json 的 mysql 解决方案的缺点之一是您将无法有效地搜索 json 数据。如果将其全部存储在 mongodb 中，则可以对包括 json 在内的所有数据创建索引和/或查询。

Mongo 的编写工作非常好，与 mysql 相比，你唯一失去的就是事务支持，因此回滚多部分保存的能力。但是，如果您能够在原子操作中提交您的更改，那么就不存在数据安全问题。如果你被复制了，mongo 提供了一个“最终一致”的承诺，这样从服务器最终将镜像主服务器。

Mongodb 不提供某些 db 结构（如外键）的本地强制或级联，因此您必须自己管理这些（例如通过组合，这是 mongo 的优势之一），或通过使用 dbrefs。

如果您确实需要事务支持和强大的“安全”写入，但仍需要 nosql 提供的灵活性，您可以考虑使用混合解决方案。这将允许您使用 mysql 作为您的主要帖子存储，然后使用 mongodb 作为您的“无模式”存储。这是一个讨论混合 mongo/rdbms 解决方案的文档的链接： [http://www.10gen.com/events/hybrid-applications](http://www.10gen.com/events/hybrid-applications) 这篇文章来自 10gen 的站点，但是您可以通过快速的 google 搜索找到其他示例。

**2019 年 5 月 28 日更新**

自发布此答案以来，MySQL 和 Mongodb 都发生了许多变化，因此它们之间的优缺点变得更加模糊。此更新对原始问题并没有真正的帮助，但我这样做是为了确保任何新读者都能获得更新的信息。

MongoDB 现在支持事务： [https ://docs.mongodb.com/manual/core/transactions/](https://docs.mongodb.com/manual/core/transactions/)

MySql 现在支持索引和搜索 json 字段： [https ://dev.mysql.com/doc/refman/5.7/en/json.html](https://dev.mysql.com/doc/refman/5.7/en/json.html)

# c# - 试图打开 Tshark 进程并开始捕获

> ID：12934386
> 
> 赞同：0
> 
> 时间：2012-10-17T12:30:03.937
> 
> 标签：c#, wireshark

我正在尝试打开 Tshark 进程并开始捕获，但我的进程启动并立即关闭，所以我的 pcap 文件大小为零，我不知道为什么。

```
string path = "-i 1 -s 65535 -w \\192.168.0.1\captures\myFile.pcap";";
public string _tshark = @"C:\Program Files (x86)\Wireshark\tshark.exe";

        public void startCapture(string path)
        {
            ProcessStartInfo ps = new ProcessStartInfo();
            ps.FileName = _tshark;
            ps.CreateNoWindow = true;
            ps.WindowStyle = ProcessWindowStyle.Hidden;
            ps.UseShellExecute = false;
            ps.CreateNoWindow = true; 
            ps.Arguments = path;
            Process process = new Process();
            process.StartInfo = ps;
            process.Start();

        } 
```

# html - primefaces outputText html

> ID：12934392
> 
> 赞同：0
> 
> 时间：2012-10-17T12:30:32.487
> 
> 标签：html, post, primefaces

我的 Bean 中有一个字符串，它实际上包含一个帖子表单。我使用 outputText 显示此页面：

```
<h:outputText escape="false" value="#{myBean.stringHtml}" /> 
```

html 正在正确显示。此页面包含一个发布表单，我想在其中按提交按钮的 bean 保存一些数据。我想以某种方式监听这个包含在字符串中的按钮。这可能吗？谢谢！

# ubuntu - 将 s3 中的内容放到我的文件系统中？

> ID：12934393
> 
> 赞同：0
> 
> 时间：2012-10-17T12:30:34.307
> 
> 标签：ubuntu, amazon-s3, amazon-ec2, s3cmd, s3fs

我一直在尝试将 s3 中的文件推送到我的 ec2 实例。

当我这样做时：

```
sudo s3fs -o allow_other -o default_acl="public-read" files /home/logs 
```

它没有给出任何错误。但是当我试图查看`logs`目录时。我根本看不到任何输出！

我在哪里犯错误？是否有任何`s3fs`命令生成的日志文件？让我看看他们？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:08:15.240

我不熟悉 s3fs，但假设它是一个文件系统驱动程序，我会检查 dmesg。

# objective-c - 在基于视图的 NSTableView 中获取 NSPopUpButton 行

> ID：12934400
> 
> 赞同：2
> 
> 时间：2012-10-17T12:31:01.167
> 
> 标签：objective-c, cocoa, interface-builder, nstableview

我有一个基于视图的表格视图，其中一行包含 NSPopupButtons。当用户更改 popUpButton 时，我需要获取包含此 popUpButton 的表行。

我首先期望得到与

```
NSInteger clickedRow = [tableView rowForView: ((NSPopUpButton*) sender)]; 
```

但是动作的发送者总是一个`NSMenuItem`对象而不是`NSPopUpButton`. `NSMenuItem`然而不是一个视图，所以我不能使用`rowForView`它。

目前我的 IBAction 看起来像这样：

```
- (IBAction)changedPopUp:(id)sender {
    NSMenuItem* selectedMenuItem = ((NSMenuItem*) sender);
    NSPopUpButton* popupButton = (NSPopUpButton*)[selectedMenuItem view];
    NSInteger clickedRow = [tableView rowForView:popupButton];
    //[...]
} 
```

但是视图属性不是自动设置的，我发现为每个 NSMenuItem 手动设置它非常不方便。

没有简单的方法来获取表格行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-18T11:01:05.760

不要为每个`NSMenuItem`. `NSPopupButton`改为设置动作和目标。然后，`sender`将是`NSPopupButton`实例，您可以使用`rowForView`.

缺点当然是你不能对不同的菜单项有不同的操作。

# xamarin.ios - MonoTouch - 具有自定义渐变的 UIButton

> ID：12934403
> 
> 赞同：2
> 
> 时间：2012-10-17T12:31:04.570
> 
> 标签：xamarin.ios

尝试使用 CGGradientLayer 在 MonoTouch 中创建自定义 UIButton。

以下是我在网上找到的一些教程，例如：

[http://www.apptite.be/tutorial_custom_uibuttons.php#gradients](http://www.apptite.be/tutorial_custom_uibuttons.php#gradients)

到目前为止无法显示任何内容，目前只是一个空按钮。

这是我从 ViewDidLoad 运行的代码：

```
var gradient = new CAGradientLayer();

gradient.Colors = new MonoTouch.CoreGraphics.CGColor[]
{
    new MonoTouch.CoreGraphics.CGColor(115f, 181f, 216f, 1f),
    new MonoTouch.CoreGraphics.CGColor(35f, 101f, 136f, 1f)
};

gradient.Locations = new NSNumber[]
{
    .5f,
    1f
};

gradient.Frame = btnSearch.Layer.Bounds;

btnSearch.Layer.AddSublayer(gradient);

btnSearch.Layer.MasksToBounds = true; 
```

有什么我错过的想法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:25:30.147

似乎 CGColor 的构造函数接受 0.0f-1.0f 浮点范围内的 RGB 值，而不是 0-255 整数。

作为替代方案，尝试通过 UIColors 设置 CGColors：

```
gradient.Colors = new MonoTouch.CoreGraphics.CGColor[]
{
    UIColor.FromRGB (115, 181, 216).CGColor,
    UIColor.FromRGB (35, 101, 136).CGColor
}; 
```

顺便说一句，漂亮的蓝色渐变 :)

# excel - 如何使用 vba 生成图形而不占用时间？

> ID：12934407
> 
> 赞同：1
> 
> 时间：2012-10-17T12:31:15.473
> 
> 标签：excel, vba

您好，我已经编写了用于生成图形的代码，并且它工作正常。问题是生成需要花费大量时间。我不明白为什么需要时间。代码是

```
 Dim cc As Chart

    Set cc = ActiveWorkbook.Charts.Add
    Set cc = cc.Location(Where:=xlLocationAsObject, name:=assume)

    With cc

     .ChartType = xlXYScatterLines

     With .Parent

       .Top = Columns(b).Offset(0, 4).Top
       .Left = Columns(b).Offset(0, 4).Left
       .name = "cc"

     End With

  End With

  Dim sc As Series
  Set sc = cc.SeriesCollection(1)

  With sc
      .Values = Columns(b).Offset(0, -3)
      .XValues = Columns(b).Offset(0, -5)
  End With 
```

请有人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:49:31.517

你关掉屏幕更新了吗？将此添加到代码的开头：

```
Application.ScreenUpdating = False 
```

然后在代码的最后添加：

```
Application.ScreenUpdating = True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:55:43.533

试试这个，只用实际数据绘制列的行。

```
Sub makeChart(b As String, assume As String) 'i presupposed these arguments based on your code

Application.ScreenUpdating = False

Dim cc As Chart

Set cc = ActiveWorkbook.Charts.Add
Set cc = cc.Location(Where:=xlLocationAsObject, Name:=assume)

With cc

    .ChartType = xlXYScatterLines

    With .Parent

        .Top = Columns(b).Offset(0, 4).Top
        .Left = Columns(b).Offset(0, 4).Left
        .Name = "cc"

    End With

End With

Dim strValue As String, strXValue As String

'here you are using the passed column letter to find the specific column you want to chart
strValue = Split(Range(b & "1").Offset(, -3).Address, "$")(1) 'will return "C" if given column F
strXValue = Split(Range(b & "1").Offset(, -5).Address, "$")(1) 'will return "A" if given column F

Dim sc As Series
Set sc = cc.SeriesCollection(1)

With sc

    'will select from row 1 to the last true used row in the given column
    .Values = Range(strValue & "1:" & strValue & Range(strValue & Rows.Count).End(xlUp).Row)
    .XValues = Range(strXValue & "1:" & strXValue & Range(strXValue & Rows.Count).End(xlUp).Row)

End With

Application.ScreenUpdating = True

End Sub 
```

# python - 解码 utf8 邮件头

> ID：12934408
> 
> 赞同：3
> 
> 时间：2012-10-17T12:31:35.017
> 
> 标签：python, email, utf-8

在我的 MUA（Thunderbird 15.0.1）中，两个邮件主题都显示如下：

```
Keine Mail zu "Abschlagsänderung" gefunden 
```

这是重现它的片段：

```
import email

for subject in ['Subject: Re: Keine Mail zu "=?utf-8?q?Abschlags=C3=A4nderung?=" gefunden',
                'Subject: =?utf-8?q?Keine_Mail_zu_=22Abschlags=C3=A4nderung=22_gefunden?=']:
    msg=email.message_from_string(subject)
    print email.Header.decode_header(msg.get('subject')) 
```

输出：

```
[('Re: Keine Mail zu "=?utf-8?q?Abschlags=C3=A4nderung?=" gefunden', None)]
[('Keine Mail zu "Abschlags\xc3\xa4nderung" gefunden', 'utf-8')] 
```

第一个标头不能被python解析，但雷鸟可以。它是由 KMail/1.11.4 创建的

如何在 Python 2.7 中解析第一个带有变音符号的标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:06:04.717

根据[RFC 2047](https://www.rfc-editor.org/rfc/rfc2047)，

> “编码字”不得出现在“引用字符串”中。

根据[RFC 822](https://www.rfc-editor.org/rfc/rfc822)的“引用字符串”是

> 引用字符串 = <"> *(qtext/quoted-pair) <">; 常规 qtext 或带引号的字符。

所以我认为 Python 库是正确的，因为

```
"=?utf-8?q?Abschlags=C3=A4nderung?=" 
```

是一个带引号的字符串。最少引用的更好选择是

```
=?utf-8?q?=22Abschlags=C3=A4nderung=22?= 
```

具有`"`编码为`=22`.

您可以通过替换来解析`"`它们`=?utf-8?q?=22?=`：

```
>>> email.Header.decode_header('=?utf-8?q?=22?= =?utf-8?q?Abschlags=C3=A4nderung?= =?utf-8?q?=22?=')
[('"Abschlags\xc3\xa4nderung"', 'utf-8')] 
```

# ps - 如何识别多页作业的 .prn 文件中的页面边界

> ID：12934409
> 
> 赞同：1
> 
> 时间：2012-10-17T12:31:58.880
> 
> 标签：ps, printer-control-language

有人可以帮我识别多页作业**.prn**文件中的页面边界吗？`@PJL SET MEDIASOURCE=TRAYX`我的目标是在多个作业文件的每一页的开头使用 PJL 命令。

例如`X = page number`：

*   第 1 页：`@PJL SET MEDIASOURCE=TRAY1`
*   第 2 页：`@PJL SET MEDIASOURCE=TRAY2`

# mahout - 列表排序项目的最有效相似性度量

> ID：12934411
> 
> 赞同：5
> 
> 时间：2012-10-17T12:32:06.417
> 
> 标签：mahout, recommendation-engine, collaborative-filtering

我们试图找到项目（以及后来的用户）之间的相似性，其中项目按用户在各种列表中排名（想想[Hi Fidelity](http://www.imdb.com/title/tt0146882/)中的 Rob、Barry 和 Dick ）。给定列表中的较低索引意味着较高的评级。

我想一种标准方法是使用 Pearson 相关性，然后以某种方式反转索引。

但是，据我了解，皮尔逊相关性的目的是补偿通常对事物进行更高或更低但具有相似相对评分的用户之间的差异。

在我看来，如果列表是连续的（尽管长度是任意的），那么从该位置隐含的评级将以这种方式倾斜不是问题。

我想在这种情况下，基于欧几里得的相似性就足够了。是这样吗？使用 Pearson 相关性会产生负面影响并找到不合适的相关性吗？哪种相似性度量可能最适合此数据？

此外，虽然我们希望列表中的位置产生影响，但我们不想惩罚相差太远的排名。两个用户都在列表中具有非常不同的排名的项目仍然应该被认为是相似的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:14:18.693

[Jaccard Similarity](http://en.wikipedia.org/wiki/Jaccard_index)在您的情况下看起来更好。要包括您提到的排名，您可以采用一袋项目的方法。

使用您的 ( `Rob`, `Barry`, `Dick`) 示例，它们的评分分别为 (3,2,1)，您将`Rob`3 次插入此用户`a`的包中。

```
Rob, Rob, Rob. 
```

然后对于`Barry`，你做两次。当前的包如下所示，

```
Rob, Rob, Rob, Barry, Barry. 
```

你`Dick`终于放进了袋子里。

```
Rob, Rob, Rob, Barry, Barry, Dick 
```

假设另一个用户`b`有一袋`[Dick, Dick, Barry]`，你计算 Jaccard 相似度如下：

*   `a`和之间的交集`b`=`[Dick, Barry]`
*   `a`和`b`=的并集`[Rob, Rob, Rob, Barry, Barry, Dick, Dick]`
*   Jaccard 相似度 = 2/7，

即交集的项目数除以并集的项目数。

这种相似性度量不会**惩罚**相距甚远的排名。你可以看到：

> 两个用户都在列表中具有非常不同的排名的项目仍然应该被认为是相似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T07:07:57.283

最著名的仅基于排名的相似性度量是[Spearman 相关性](http://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient)。它只是将“1”分配给第一项，将“2”分配给第二项，依此类推并计算（Pearson）相关系数。（您也可以使值下降，这更直观——与 Pearson 的相关性无关。）

Spearman 的相关性在项目中实现，但是，我认为它不是很有用。

[Tau 排名](http://en.wikipedia.org/wiki/Kendall_tau_rank_correlation_coefficient)是衡量排名列表匹配程度的更原则性指标，但尚未实施。这并不难。

# asp.net - 如何在 Asp.Net 中使用 paypal 获得买家付款验证？

> ID：12934414
> 
> 赞同：1
> 
> 时间：2012-10-17T12:32:14.880
> 
> 标签：asp.net, payment-gateway, paypal-ipn, paypal-subscriptions

我是 Asp.Net 中 PayPal 集成的新手。

如何通过向 PayPal 发送交易 ID 来获取买家付款详情？我的 PayPal 帐户已收到金额，但由于页面未重定向，我无法向买家显示付款详情。现在我想通过将交易 ID 发送到 PayPal 来通过电子邮件发送买家的付款详情。有没有什么方法可以借助交易 ID 或其他方式接收买家付款详情？

帮助赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:37:52.257

使用[GetTransactionDetails](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetTransactionDetails)方法

# javascript - 表行克隆中的方法调用函数可编辑

> ID：12934423
> 
> 赞同：0
> 
> 时间：2012-10-17T12:32:56.407
> 
> 标签：javascript, clone, jeditable

我已经克隆了我的[表中的行 editable](http://jsfiddle.net/Manna/WKaR9/6/)。

这些行有 2 列可编辑，1 列带有可编辑的文本区域，另一列带有输入数字。

有一个函数可以将两个输入数字中的数字相加并给出总数。你可以[在这里](http://jsfiddle.net/Manna/WKaR9/6/)试试，有`onblur : "submit"`

我已经克隆了两行，它们是可编辑的，但是计算总计的功能在克隆的行中不起作用。

如何使我的函数在克隆行中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:00:00.807

您正在使用 克隆行`id="sum"`，并且您的页面中不应有重复`id`的 s。

当我必须克隆元素时，我会生成动态`id`s，因此它们不会被重复。

像这样：

```
var lastid = $('[id^="clonedInput"]').length + 1;
$(".clonedInput").last().clone().attr('id', 'clonedInput' + lastid).appendTo("body") 
```

你可以在这里测试一个完整的工作示例：http: [//jsfiddle.net/RASG/MjMh5/](http://jsfiddle.net/RASG/MjMh5/)

*另外，你的 jsfiddle 是一团糟。请只保留相关代码。*

## 编辑

好的，所以你还有其他问题。
例如，您的函数计数不会对克隆的行求和。
这个函数（不提你的整个代码）可能要简单得多。

```
function tally() {
    var total = 0;
    $('p.editable_number').each(function() {
        total += parseInt($(this).text()) || 0;
        $('#total').html(total);
    })
} 
```

在这里测试它：http: [//jsfiddle.net/RASG/MA78A/](http://jsfiddle.net/RASG/MA78A/)

# postgresql - PostgreSQL 关闭持久性

> ID：12934426
> 
> 赞同：1
> 
> 时间：2012-10-17T12:33:01.767
> 
> 标签：postgresql, durability

我想制作一个脚本，它将在内存中运行 postgres 而没有持久性。我读了这个页面：[http](http://www.postgresql.org/docs/9.1/static/non-durability.html) ://www.postgresql.org/docs/9.1/static/non-durability.html 但我不明白如何在脚本中设置这个参数。请你帮助我好吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:38:59.583

大多数这些参数，如`fsync`，只能在 中设置`postgresql.conf`。通过重新启动 PostgreSQL 应用更改。它们适用于整个数据库集群——该 PostgreSQL 安装中的所有数据库。这是因为所有数据库都共享一个 postmaster、[write-ahead log](http://www.postgresql.org/docs/current/static/wal-intro.html)和一组共享系统表。

您可以在脚本中的 SQL 级别设置的唯一参数是`synchronous_commit`. 通过设置`synchronous_commit = 'off'`，您可以说“如果数据库在接下来的几秒钟内崩溃，丢失此事务是可以的，只要确保它仍然以原子方式应用”。

[我在之前的回答Optimize PostgreSQL for fast testing](https://stackoverflow.com/a/9407940/398670)中写了更多关于这个主题的内容。

如果您想使用脚本设置其他参数，您可以这样做，但您必须`postgresql.conf`使用脚本打开和修改，然后重新启动 PostgreSQL。像这样的文本处理工具`sed`使这种工作更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:11:53.713

如果您正在运行基于 debian 的 linux 发行版，则可以执行以下操作：

```
pg_createcluster -d /dev/shm/mypgcluster 8.4 ramcluster 
```

创建一个基于 ram 的集群。请注意，您必须执行以下操作：

```
pg_drop cluster 8.4 ramcluster 
```

并在重新启动等时重新创建它。

# python - 通过 webapp2 访问 URI 参数

> ID：12934427
> 
> 赞同：9
> 
> 时间：2012-10-17T12:33:04.863
> 
> 标签：python, google-app-engine, webapp2

我想访问给定请求的 URI 参数：

```
http://localhost:8080/account/user?un=erik&pw=gaius 
```

我无法使以下代码工作，

**主文件**

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/account/user', account.User)],
                              debug=True) 
```

**帐户.py**

```
class User(webapp2.RequestHandler):
  def get(self, un, pw):
    self.response.headers['Content-Type'] = 'text/plain'
    self.response.write('Yey!' + un + ' ' + pw) 
```

我认为我的 main.py 有问题，但我试图通过添加命名路由和正则表达式来弄乱它，但我只是不断收到 500 个错误（内部服务器错误）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T15:18:00.057

```
class User(webapp2.RequestHandler):
  def get(self):
    un = self.request.get('un')
    pw = self.request.get('pw')
    self.response.headers['Content-Type'] = 'text/plain'
    self.response.write('Yey!' + un + ' ' + pw) 
```

# javascript - ul il 列表结构 javaScript

> ID：12934430
> 
> 赞同：0
> 
> 时间：2012-10-17T12:33:12.010
> 
> 标签：javascript, html

我有以下结构作为国家，省，市和郊区。如何在列表中添加以下结构。我将按照下表以 json 格式从数据库中提取数据。想存储它并将其保存到如下列表中。

```
<li>South Africa</li>
<ul>
<li><h3>Gauteng</h3><p>Gauteng Province.</p>
<ul>
    <li>Ekhurhuleni                         
  <ul>                          
    <li class="liid"><a href="#">Actionville</a></li>   
    <li class="liid"><a href="#">Alberton</a></li>
    <li class="liid"><a href="#">Bakerton</a></li>
    <li class="liid"><a href="#">Bedfordview</a></li>
</ul>                   
</li>
</ul> 
```

我必须将结构添加回数据库，所以我也需要保留密钥。
这是我的数据库表：

```
Table Country
CountryID   Country
1           South Africa
2           Egypt

Table Province
ProvinceID    Provincename  CountryID
1             Gauteng       1
2             Eastern Cape  1
3             Free State    1

Table City
CityID        CityName       ProvinceID
1             Ekurhuleni     1

Table Suburb
SuburbID      SuburbName     CityID
1             Actonville     1
2             Germiston      1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:34:53.377

```
var Countries = [{...}, {...}, ...];
var Provinces = [{...}, {...}, ...];
var Cities    = [{...}, {...}, ...];
var Suburbies = [{...}, {...}, ...];

var countriesUl = document.createElement('ul');
for (var i in Countries) {
    var countryLi = document.createElement('li').appendTo(countriesUl);
    document.createTextNode(Countries[i].Country).appendTo(countryLi);
    var provincesUl = document.createElement('ul').appendTo(countryLi);
    for (var j in Provinces) {
        if (Provinces[j].CountryID != Countries[i].CountryID) continue;
        var provinceLi = document.createElement('li').appendTo(provincesUl);
        document.createTextNode('<h3>' + Provinces[j].Provincename + '</h3>').appendTo(provinceLi);
        document.createTextNode('<p>' + Provinces[j].Provincename + ' province</p>').appendTo(provinceLi);
        var citiesUl = document.createElement('ul').appendTo(provinceLi);
        for (var k in Cities) {
            if (Cities[k].ProvinceID != Provinces[j].ProvinceID) continue;
            var cityLi = document.createElement('li').appendTo(citiesUl);
            document.createTextNode(Cities[k].CityName).appendTo(cityLi);
            var suburbiesUl = document.createElement('ul').appendTo(cityLi);
            for (var l in Suburbies) {
                if (Suburbies[l].CityID != Cities[k].CityID) continue;
                var suburbLi = document.createElement('li').appendTo(suburbiesUl);
                document.createTextNode(Suburbies[l].SuburbName).appendTo(suburbLi);
            }
        }
    }
}

// do whatever you want with countriesUl
countriesUl.appendTo(document.body); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:44:05.053

PHP：

```
$countries = array();
$q = "SELECT * FROM Country";
$res = mysql_query($q);
while($row=mysql_fetch_assoc($res)){
    $countryId = $row['CountryID'];
    $countries[$countryId] = array("data"=>$row,"provinces"=>array());
    $provinces = &$countries[$countryId]["provinces"];
    $qP = "SELECT * FROM Province P WHERE P.CountryID = $countryId";
    $resP = mysql_query($qP);
    while($rowP = mysql_fetch_assoc($resP)){
        $provinceId = $rowP['ProvinceID'];
        $provinces[$provinceId] = array("data"=>$rowP,'cities'=>array());
        $cities = &$provinces[$provinceId];
        $qC = "SELECT * FROM City C WHERE C.ProvinceID = $provinceId";
        $resC = mysql_query($qC);
        while($rowC = mysql_fetch_assoc($resC)){
            $cityId = $rowC['CityID'];
            $cities[$cityId] = array("data"=>$rowC,'suburbs'=>array());
            // AND SO ON FOR SUBURBS
        }
    }
}

$output="<ul>";
foreach($countries as $countryId=>$countryArray){
    $output.="<li id='$countryId'>";
    $output.="<h1>".$countryArray['data']['countryName']."</h1>";
        $output.="<ul>";
        foreach($countryArray['provinces'] as $provinceId=>$provinceArray){
            $output.="<li id='$provinceId'>";
            $output.="<h2>".$provinceArray['data']['provinceName']."</h2>";
            $output.="</li>";
        }
        $output.="</ul>";
    $output.="</li>";
} 
```

# c++ - c++ 从标准输入存储中读取向量和标准输出

> ID：12934436
> 
> 赞同：0
> 
> 时间：2012-10-17T12:33:37.563
> 
> 标签：c++, linux

我正在测试这段代码，它读取标准输入并将其存储在向量和标准输出中。知道问题可能是什么吗？

```
#include <iostream>
#include <vector>
#include <string>

using namespace std;

int main() {
  vector<string> vs;
  vector<string>::iterator vsi;

  string buffer;
  while (!(cin.eof())) {
    getline(cin, buffer);
    cout << buffer << endl;
    vs.push_back(buffer);
  };

  for (int count=1 , vsi = vs.begin(); vsi != vs.end(); vsi++,count++){
    cout << "string" << count <<"="<< *vsi << endl;
  }

  return 0;
}

[root@server dev]# g++ -o newcode newcode.cpp 
newcode.cpp: In function ‘int main()’:
newcode.cpp:19: error: cannot convert ‘__gnu_cxx::__normal_iterator<std::basic_string<char, std::char_traits<char>, std::allocator<char> >*, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >’ to ‘int’ in initialization
newcode.cpp:19: error: no match for ‘operator!=’ in ‘vsi != vs.std::vector<_Tp, _Alloc>::end [with _Tp = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Alloc = std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >]()’
newcode.cpp:20: error: invalid type argument of ‘unary *’
[root@server dev]# 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:35:57.937

在`for`循环的初始化部分，您声明了一个`vsi`类型为的新变量`int`。

解决问题的一种方法：

```
vsi = vs.begin();
for (int count=1; vsi != vs.end(); ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:37:23.477

问题出在这一行：

```
for (int count=1 , vsi = vs.begin(); vsi != vs.end(); vsi++,count++) 
```

您定义了两个`int`变量：`count`和`vsi`。然后，您尝试将第二个分配给`vs.begin()`. 这就是编译器所抱怨的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:13:24.473

问题是 vs.begin() 不返回 int，并且您将 vsi 声明为整数。

轻松修复：

```
for (int count=0;count < vs.size(); ++count){
  cout << "string" << (count+1) <<"="<< vs[count] << endl;
} 
```

笔记：

*   更喜欢 虽然在这种情况下没有区别，但在某些情况下确实如此`++count`。 所以养成一个好习惯。 请参阅：[++iterator 和 iterator++ 之间的性能差异？](https://stackoverflow.com/q/1303899/14065)`count++`

*   `while (!(cin.eof()))`实际上总是错误的（在所有语言中）。
    'eof flag' 直到你读完 eof 之后才设置为 true。
    最后一次成功读取读取到（但不超过）eof。所以你最后一次进入循环，读取将失败，但你仍然将一个值推回向量中。

    *   在某些情况下，这可能会导致无限循环。
        如果读取时出现另一种类型的失败，您将永远无法到达 eof
        （例如 cin >> x；如果输入不是整数，其中 x 是 int 可能会失败）
        请参阅：[c++ reading undefined number of lines with eof()](https://stackoverflow.com/q/7858319/14065)

# android - 无线电组对象在哪里

> ID：12934437
> 
> 赞同：1
> 
> 时间：2012-10-17T12:33:41.120
> 
> 标签：android, eclipse

我在 Eclipse 的图形布局视图中找不到任何 Radio Group 对象。它不在表单小部件中。我正在使用 Eclipse 版本：Helios Service Release 2 进行 android 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:29:40.953

在最新的 Android 工具 (ADT 21.1) 下，`RadioGroup`可以在**Form Widgets**标题下找到。

![在此处输入图像描述](../Images/0551813060b31a43117dd5213b802453.png)

# javascript - 在django中提交表单后如何取回页面而不刷新

> ID：12934439
> 
> 赞同：0
> 
> 时间：2012-10-17T12:33:46.690
> 
> 标签：javascript, html, django

参考我上面的标题：

患者详细信息.html

```
<form id="content" action="{% url patientdetails_view pk %}" method="post" > 
{% csrf_token %}{{form.owner}}
------
<tbody><tr>
<td><input type="submit" value="Save" >   
------ 
```

患者列表.html

```
{% for patient in patienter %}
<tr class = {% cycle "row_even" "row_odd" %}>
<td>{{ patient.id }}</td>
<td> <a href="#">{{ patient.Personnummer }}</a></td>
<td class ="name"> <a href=" {% url patientdetails_view patient.id %}">{{ patient.first_name }} {{ patient.last_name }}</a></td>

{% endfor %} 
```

这是我的问题

我的程序流程是这样的。我必须单击 PatientList.html 中的名称列表并编辑 patientdetails.html 中的一些数据，在我进行更改后，我如何在 patientdetails.html 中进行一些更改并保存后返回到 patientList.html。我必须单击两次才能返回原始页面。第一次单击刷新并保存数据，第二次单击返回原始页面。

1.  为什么要这样做。我在这里错过了什么。
2.  我该如何提醒“数据已保存”。

我对 django 非常陌生。我完全迷失在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:42:48.970

在处理患者详细信息更新的视图中完成表单处理后，您可以重定向到 url。您可以使用它`HttpResponseRedirect()`来执行此操作。这是 django 中非常基本的参考文档[在视图中使用表单](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#using-a-form-in-a-view)

对于#2，您可以使用[django 消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)来传递消息。通过模板，您可以在任何您认为合适的地方显示消息。

# android - 解析图像 URL Android

> ID：12934443
> 
> 赞同：0
> 
> 时间：2012-10-17T12:34:10.813
> 
> 标签：android, image, parsing, url

我从在线 xml 文件中解析了几项天气数据。其中一个节点是我要显示的图像的 URL。我设法解析它并将其保存为字符串变量，并在应用程序中显示为字符串。如何让它显示图像而不是文本？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:38:29.070

首先，您需要下载图像并将其存储在 Bitmap 对象中。

然后，用 ImageView 显示它。

[这个答案详细描述了如何做到这一点](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android/2472175#2472175)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:09:49.243

```
public class MainActivity extends Activity {
   ProgressDialog pd;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    pd = new ProgressDialog(MainActivity.this);
    pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    new DownloadImageTask((ImageView) findViewById(R.id.imageView1))
    .execute("Your URL");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;
    DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
        }
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
          pd = new ProgressDialog(MainActivity.this);
          pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    }

    protected Bitmap doInBackground(String... urls) {
    String urldisplay = urls[0];
    Bitmap mIcon11 = null;
    try {
    InputStream in = new java.net.URL(urldisplay).openStream();
    mIcon11 = BitmapFactory.decodeStream(in);
    } catch (Exception e) {
    Log.e("Error", e.getMessage());
    e.printStackTrace();
    }
    return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        pd.dismiss();
    bmImage.setImageBitmap(result);
    }
    }         
 } 
```

# ios - 如何扫描 mp3 以获取静音

> ID：12934451
> 
> 赞同：0
> 
> 时间：2012-10-17T12:35:05.620
> 
> 标签：ios, core-audio

我编写了一个 iOS 应用程序，该应用程序需要识别从互联网下载的 mp3 文件中的静音时段。

通过 AVAudioPlayer 下载和播放没有问题，但我不知道如何访问 mp3 中的实际音频帧数据，以便我可以检测声级以检测静音。我试过了 ：-

```
NSURL *fileUrl = [[NSURL alloc] initFileURLWithPath:[self filename]];

ExtAudioFileRef eaf;
OSStatus err = ExtAudioFileOpenURL((CFURLRef)CFBridgingRetain(fileUrl), &eaf);
if (noErr != err)
{
   /* handle error */
  exit(-1);
}
AudioStreamBasicDescription format;
format.mSampleRate = 44100;
format.mFormatID = kAudioFormatLinearPCM;
format.mFormatFlags = kAudioFormatFlagsNativeEndian;
format.mBitsPerChannel = 16;
format.mChannelsPerFrame = 2;
format.mBytesPerFrame = format.mChannelsPerFrame * 2;
format.mFramesPerPacket = 1;
format.mBytesPerPacket = format.mFramesPerPacket * format.mBytesPerFrame;

err = ExtAudioFileSetProperty(eaf, kExtAudioFileProperty_ClientDataFormat, sizeof(format), &format);
if (noErr != err)
{
   /* handle error */
   NSLog(@"Error: %d", err);
  exit(-1);
} 
```

但它在 set 属性上失败，错误为 1718449215，所以我假设它不允许我从 MP3 转换为 PCM。我希望能够对文件进行预处理，以便在用户播放之前知道静音将在哪里发生。

任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:00:14.790

您可以使用 AVAssetReader 和 AVAssetWriter API 将 mp3 文件转换为原始 PCM（或 .wav）数据。

# java - 来自 servlet java.lang.NoClassDefFoundError 的未捕获异常：org/apache/commons/lang/Validate

> ID：12934452
> 
> 赞同：0
> 
> 时间：2012-10-17T12:35:16.970
> 
> 标签：java, google-app-engine

在我的谷歌应用引擎项目日志部分写出

```
java.lang.NoClassDefFoundError: org/apache/commons/lang/Validate... 
```

我已阅读[java.lang.NoClassDefFoundError: org/apache/commons/lang/Validate](https://stackoverflow.com/questions/3468027/java-lang-noclassdeffounderror-org-apache-commons-lang-validate)并按其编写。但它'没有效果，我的服务器不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:43:28.003

异常说，没有找到类定义。这意味着 JVM 无法加载所述类文件。您必须确保该类在`commons-lang`项目中可用。

验证您是否`commons-lang-<>.jar`已添加到项目配置的类路径中。如果没有，请在类路径中添加上述 jar 文件。

# c# - C# 新手 - 尝试编写代码来执行一个简单的功能

> ID：12934456
> 
> 赞同：5
> 
> 时间：2012-10-17T12:35:46.827
> 
> 标签：c#, .net, mysql

我是 C# 新手（在 PHP、Python 和 Javascript 中工作），我正在尝试或多或少地复制另一个页面并更改一些内容 - 提交表单和数据库。

无论如何，这是代码：

```
public partial class commenter : System.Web.UI.Page
{

    string employee_reviewed;
    //public Commenter();
    public void SaveBtn_Click(object sender, EventArgs e)
    {
        if (CommentTB.Text == "Please enter a comment.")
        {
            String csname = "Email Error";
            Type cstype = this.GetType();
            ClientScriptManager cs = Page.ClientScript;
            if (!cs.IsStartupScriptRegistered(cstype, csname))
            {
                String cstext = "alert('Please submit at least one comment.');";
                cs.RegisterStartupScript(cstype, csname, cstext, true);
            }
            FormMessage.Text = "Please submit at least one comment.";
            return;
        }
        string comment = CommentTB.Text;
        comment = comment.Replace("'", "''");
        comment = comment.Replace("’", "''");
        comment = comment.Replace("`", "''");

        try
        {
            //myCommand.Connection.Open();
            //myCommand.ExecuteNonQuery();
            //myCommand.Connection.Close();

            MySqlCommand myCommand;
            MySqlConnection connection;
            string connStringName = "server=localhost;database=hourtracking;uid=username;password=password";
            connection = new MySqlConnection(connStringName);

            string sql_query;

            sql_query = "insert into peer_review_comment " + " (emp_id,  comment)" + " values(?employeeid, ?comment) ";

            //String csname = "Email Error";
            //Type cstype = this.GetType();
            //ClientScriptManager cs = Page.ClientScript;
            //cs.RegisterStartupScript(cstype, csname, sql_query, true);
            myCommand = new MySqlCommand(sql_query, connection);
            //FormMessage.Text = sql_query;
            //return;

            Trace.Write("comment = ", comment);
            myCommand.Parameters.Add(new MySqlParameter("?employeeid", ViewState["employeeid"].ToString()));
            myCommand.Parameters.Add(new MySqlParameter("?comment", comment));

            try
            {
                myCommand.Connection.Open();
                myCommand.ExecuteNonQuery();
                myCommand.Connection.Close();
            }
            catch (Exception ex)
            {
                FormMessage.Text = "Error:SaveBtn_Click - " + ex.Message;
            }
            //SendNotification(from, to, cc, subject, body, attach);
            FormMessage.Text = "\n Thank you for leaving anonymous feedback for " + employee_reviewed; ;
            ThankyouDiv.Visible = true;
            FormFieldDiv.Visible = false;
            reviewHeader.Visible = false;
        }
        catch (Exception ex)
        {
            FormMessage.Text = "Error:SaveBtn_Click - " + ex.Message;
        }
    }
} 
```

我真的不知道我在做什么 - 我正在阅读教程，但 C# 是一种与我习惯的语言截然不同的语言。

当我当前不更改文本但提交不起作用时，我收到 Javascript 警报 - 我希望它提交到`peer_review_comment`数据库表，并填写employeeid 以及提交的评论。

抱歉，如果我的理解如此参差不齐，我是一个 TOTAL C# 新手（目前正在阅读[http://www.csharp-station.com/Tutorial/CSharp/](http://www.csharp-station.com/Tutorial/CSharp/)）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T12:43:33.760

我的猜测是问题出在这里：

```
try
{
    myCommand.Connection.Open();
    myCommand.ExecuteNonQuery();
    myCommand.Connection.Close();
}
catch (Exception ex)
{
    FormMessage.Text = "Error:SaveBtn_Click - " + ex.Message;
    // no "return;"  !!
}
//SendNotification(from, to, cc, subject, body, attach);
FormMessage.Text = "\n Thank you for leaving anonymous feedback for " + 
                        employee_reviewed; ; 
```

您的`catch`块正在设置`FormMessage.Text`值 bot 不退出该方法，因此该方法在 catch 块完成的地方继续执行，重置该`Text`值并显示没有引发异常。

`return;`在 catch 块的末尾添加一个以查看异常消息。

一些使此类问题更容易被捕获的一般准则：

*   不要试图在一种方法中做太多事情。有一种方法来验证消息（或者在客户端使用`Validators`，另一种方法来进行 DB 调用，等等。
*   学习使用调试器。您可以单步执行代码并更好地了解导致此类错误的原因。
*   除非您可以对异常做点什么，否则让它们冒泡到更高级别的事件处理程序（如[Elmah](http://code.google.com/p/elmah/)）并没有什么坏处，这样异常就不会像这里那样被意外吞没。一般来说，最好在较低级别的方法中重新抛出异常（可能添加一些上下文或用户友好的消息），以便较高级别的异常处理可以决定做什么（显示消息、日志等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:15:52.817

我冒昧地重构了您的代码。这显示了一些更好的代码实践，但也可能向您显示问题。除了这些代码更改，我还建议阅读 D. Stanley 的答案；那里也有一些有用的提示。

```
if (CommentTB.Text == "Please enter a comment.") 
{ 
    String csname = "Email Error"; 
    Type cstype = this.GetType(); 
    ClientScriptManager cs = Page.ClientScript; 
    if (!cs.IsStartupScriptRegistered(cstype, csname)) 
    { 
        String cstext = "alert('Please submit at least one comment.');"; 
        cs.RegisterStartupScript(cstype, csname, cstext, true); 
    } 
    FormMessage.Text = "Please submit at least one comment."; 
    return; 
} 

// This helps some but very little, just wanted to show an alternative to writing three statements
string comment = CommentTB.Text.Replace("'", "''").Replace("’", "''").Replace("`", "''"); 
//string comment = CommentTB.Text; 
//comment = comment.Replace("'", "''"); 
//comment = comment.Replace("’", "''"); 
//comment = comment.Replace("`", "''"); 

try 
{ 
    // No need to do string concatenation...just make it one string.
    // sql_query = "insert into peer_review_comment " + " (emp_id,  comment)" + " values(?employeeid, ?comment) "; 
    string sql_query = "insert into peer_review_comment (emp_id,  comment) values (?employeeid, ?comment) "; 

    string connStringName = "server=localhost;database=hourtracking;uid=username;password=password"; 

    // Use a "using" clause because it guarantees the connection is closed even when an exception occurs.
    using (MySqlConnection connection = new MySqlConnection(connStringName)) 
    {
        connection.Open(); 

        // Again, use a "using" clause
        using (MySqlCommand myCommand = new MySqlCommand(sql_query, connection)) 
        {
            Trace.Write("comment = ", comment); 
            myCommand.Parameters.Add(new MySqlParameter("?employeeid", ViewState["employeeid"].ToString())); 
            myCommand.Parameters.Add(new MySqlParameter("?comment", comment)); 
            myCommand.ExecuteNonQuery(); 

            // No need for a Close statement with "using" clause.
            //myCommand.Connection.Close(); 
        }
    } 

    FormMessage.Text = "\n Thank you for leaving anonymous feedback for " + employee_reviewed;
    ThankyouDiv.Visible = true; 
    FormFieldDiv.Visible = false; 
    reviewHeader.Visible = false; 
}
catch (Exception ex) 
{ 
    FormMessage.Text = "Error:SaveBtn_Click - " + ex.Message; 
} 
```

# gwt - gwt - DataGrid 不会显示里面的所有数据，即使有滚动

> ID：12934462
> 
> 赞同：1
> 
> 时间：2012-10-17T12:36:20.423
> 
> 标签：gwt, datagrid

我有`DataGrid`一个`AbsolutePanel`.

我通过设置它的大小`myDataGrid.setSize("100px", "231px");`

它应该显示 140 个数据项，但它只显示 60 个或类似的东西，并显示自动垂直滚动条。

但是为什么它只显示部分数据，而不是完整的数据呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:14:26.963

我假设您对`DataGrid`. 默认情况下，页面大小为**50**，因此它只会显示 50 条记录。

要么你使用另一个 cosntructor ( `DataGrid(int pageSize)`) 要么你添加一个`Pager`(ie `SimplePager`)

# quartz-scheduler - JBoss 7.1.1 和 EJB 3.1 定时器服务

> ID：12934464
> 
> 赞同：5
> 
> 时间：2012-10-17T12:36:21.780
> 
> 标签：quartz-scheduler, jboss7.x, ejb-3.1

我正在考虑将基于 Spring Quartz 的应用程序移植到 EJB 3.1 以查看 EJB 是否有所改进。我无法理解故障转移如何与 Schedule Timer Service 一起工作。在 Quartz 中，有集群 Quartz 实例使用的数据库表。如果集群中的一个节点崩溃，作业仍将在其他节点上执行。

我一直在研究 Timer Service 如何持久化事物，它似乎使用了创建 Timer 的服务器的文件系统。这是真的？我看不出这怎么可能，因为它会导致计时器服务不可用，因为它不支持故障转移。

所以我一定错过了一些东西。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:07:38.363

EJB 计时器服务根本没有 Quartz 先进（有或没有 Spring）。

EJB 计时器被持久化到一个未知的位置。它可能恰好是文件系统，但如果您碰巧在 Windows 上运行，它也可能是 Windows 注册表，或者它可能是 LDAP 服务器或其他任何东西。

EJB spec JIRA上关于这个问题有一段时间了，在spec mailing list上讨论过，但后来因为没人理会回复任何人（可能是因为很多人在度假当时）。如果您问我，这是关闭问题的最蹩脚的原因之一，但我想规范负责人有时必须采取此类措施。

无论如何，在 JBoss AS 中，持久化发生在嵌入式关系数据源上，而后者又会写入文件系统。通过专有配置，您可以将此数据源指向任何远程数据库。故障转移也必须来自专有的 JBoss 功能。尽管 EJB 为了潜在的集群而禁止了很多事情，但规范中没有明确的集群支持，因此特别是 EJB 计时器不支持集群。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T08:41:30.430

不确定在提出问题时这是否可用，但您可以为此使用“cluster-ha-singleton”，它允许您创建一个从单个集群节点调用的单例计时器，以防故障转移选择的节点 选择一个新节点来运行单例（以及因此计时器）

[http://www.jboss.org/quickstarts/eap/cluster-ha-singleton/](http://www.jboss.org/quickstarts/eap/cluster-ha-singleton/)

It mentions EAP but I am running on AS 7.2.0 fine, the jars are already included in /modules/org/jboss/

# android - 为列表视图中的每个元素设置不同的分隔线颜色

> ID：12934467
> 
> 赞同：8
> 
> 时间：2012-10-17T12:36:41.453
> 
> 标签：android, android-layout, android-listview, divider

我想要一个列表元素之间有不同分隔符的列表。我用这段代码定义了一个高度为 1 的白色分隔线：

```
_listView.setDivider(new ColorDrawable(Color.WHITE));
_listView.setDividerHeight(1); 
```

然而，它将所有元素的分隔线设置为白色，我只希望其中一些是白色的，另一个是不同的颜色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T12:42:28.940

将分隔线的高度设置为 0，并在项目布局中实现一个高度为 1 的视图，并在每次构建视图时根据列表项更改其颜色。

这是一个 XML 布局示例：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

    <View 
        android:id="@+id/divider"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#FFFFFFFF" />

</LinearLayout> 
```

这就是您如何更改适配器中的颜色：

```
public class MyAdapter extends BaseAdapter {
    /** List of items to show */
    private ArrayList<String> items = new ArrayList<String>();
    private Context context;
    private int color[];

    public OffersAdapter(Context c, ArrayList<String> items, int color[])
    {
        super();
        this.context = c;
        this.items = items;
        this.color = color;
    }

    public int getCount() {
        return items.size();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder viewHolder;

    if(null == convertView)
    {
        LayoutInflater inflater = LayoutInflater.from(context);
        convertView = inflater.inflate(R.layout.list_item, parent, false);

        viewHolder.text = (TextView) convertView.findViewById(R.id.text);
        viewHolder.divider = (View) convertView.findViewById(R.id.divider);

        convertView.setTag(viewHolder);
    } else {
        //Retrieve the current view
        viewHolder = (ViewHolder) convertView.getTag(); 
    }

    //This is where you chance the divider color based on the item  
    viewHolder.divider.setBackgroundColor(color[position]);

  viewHolder.text.setText(items.get(position));

    return convertView;
}

//Holds the current view
 private static class ViewHolder {
         public TextView text;
         public View divider;
     }   
} 
```

`int color[]`您要使用的颜色列表在哪里。

[阅读此处了解有关 ViewHolder 的](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:45:57.923

1.  在 xml 中分隔您的列表项和整个列表
2.  为您的列表项创建一个自定义适配器并实例化您的列表
3.  根据您想要更改从适配器添加到列表的每个新项目的分隔线颜色的标准

例子：

列表项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView 
        android:id="@+id/sometext"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

    <View 
        android:id="@+id/customdivider"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
          />

</LinearLayout> 
```

列表.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
   >

    <ListView
        android:id="@+id/totallynewlist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
       />

</LinearLayout> 
```

CustomAdapter.java

```
public class CustomAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater = null;

    public SubjectListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data = d;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

        public View getView(int position, View convertView, ViewGroup parent) {
            View vi = convertView;
            if (convertView == null)
                vi = inflater.inflate(R.layout.listitem, null);

        //Find the divider here and depending on your criteria change the colour - if required take data from main activity if you need it to change the colour 
       View divider= (View) vi.findViewById(R.id.customdivider); 
       if(your criteria)
          divider.setBackgroundColor(R.color.white); //assuming white is defined in              colors
       else
         set to whatever color
        return vi;
        }
} 
```

在您的活动中

```
 ListView list = (ListView) findViewById(R.id.totallynewlist);

    // creating new HashMap
    HashMap<String, String> map = new HashMap<String, String>();
    <//Pass whatever condition you want for your criteria here if you need to - optional>
    ListPass.add(map);

    adapter = new CustomAdapter(this, ListPass);

    list.setAdapter(adapter); 
```

# javascript - 如何将 CAS 与将在 Phonegap 中托管和使用的 Javascript 客户端一起使用？

> ID：12934469
> 
> 赞同：3
> 
> 时间：2012-10-17T12:36:51.787
> 
> 标签：javascript, cordova, cross-domain, single-sign-on, cas

我正在编写一个 Phonegap 应用程序，该应用程序需要能够调用受 CAS 保护的远程 Web 服务。该应用程序还将作为移动网站托管在我们的网络农场（减去硬件特定部分）上。

我们的 CAS 服务器由 server1 托管，我们的 Web 服务托管在 server2 上。移动网站托管在 server2 上。

我从 Javascript 进行的任何调用都会出现跨域错误。我意识到这对手机来说不是问题，但最好避免它，因为在桌面上运行时开发会容易得多。

目前，我有一个工作设置，包括以下内容：

1.  Javascript 通过 https 调用 server2 上的服务器端脚本，包括标题中的用户名和密码。
2.  该脚本调用 CAS 的 RESTful api 并获取票证授予 cookie。该脚本会在响应中创建一个 Set-Cookie 标头，或者它会报告登录错误。
3.  Javascript 获取响应并创建 cookie（尽管在 Phonegap 中无法检测到此 cookie（document.cookie 中没有任何内容），即使它正在被传递）。
4.  然后，Javascript 调用一个服务器端脚本，该脚本为它调用一个 web 服务，将 cookie 与请求一起传递（我必须手动将 cookie 插入到请求标头中，即使它是自动在来自 javascript 的请求中传递的）。
5.  服务器端脚本将结果发送到 javascript。

有一个更好的方法吗？我在 CAS 中看到过提到代理票证，但找不到足够的信息来了解它是否是我需要的或如何使用它们。

谢谢你。

# c++ - 操作 HNet_ConnectionProperties 的 C++ 代码是什么

> ID：12934477
> 
> 赞同：1
> 
> 时间：2012-10-17T12:37:31.623
> 
> 标签：c++, windows, networking, com, wmi

这里通过VBScript我们可以枚举所有的网络连接（可见或不可见）。但我找不到任何 C++ 或 COM 代码来执行此操作。

```
strServer = "."

Set objWMI = GetObject("winmgmts://" & strServer & "/root\Microsoft\HomeNet")
Set objInstances = objWMI.InstancesOf("HNet_ConnectionProperties",48)

On Error Resume Next
For Each objInstance in objInstances
    With objInstance
        WScript.Echo .Connection
        WScript.Echo .IsIcsPrivate
        WScript.Echo .IsIcsPublic
    End With
On Error Goto 0
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:10:20.670

这是访问`HNet_ConnectionProperties`WMI 类的等效 C++ 代码

```
#include "stdafx.h"
#define _WIN32_DCOM
#include <iostream>
using namespace std;
#include <comdef.h>
#include <Wbemidl.h>
# pragma comment(lib, "wbemuuid.lib")

//CREDENTIAL structure
//http://msdn.microsoft.com/en-us/library/windows/desktop/aa374788%28v=vs.85%29.aspx
#define CRED_MAX_USERNAME_LENGTH            513
#define CRED_MAX_CREDENTIAL_BLOB_SIZE       512
#define CREDUI_MAX_USERNAME_LENGTH CRED_MAX_USERNAME_LENGTH
#define CREDUI_MAX_PASSWORD_LENGTH (CRED_MAX_CREDENTIAL_BLOB_SIZE / 2)

#pragma argsused
int main(int argc, char* argv[])
{
    wchar_t pszName[CREDUI_MAX_USERNAME_LENGTH+1] = L"user";
    wchar_t pszPwd[CREDUI_MAX_PASSWORD_LENGTH+1]  = L"password";
    BSTR strNetworkResource;
    //To use a WMI remote connection set localconn to false and configure the values of the pszName, pszPwd and the name of the remote machine in strNetworkResource
    bool localconn = true;  
    strNetworkResource = localconn ?  L"\\\\.\\root\\Microsoft\\HomeNet" : L"\\\\remote--machine\\root\\Microsoft\\HomeNet";

    COAUTHIDENTITY *userAcct =  NULL ;
    COAUTHIDENTITY authIdent;

    // Initialize COM. ------------------------------------------

    HRESULT hres;
    hres =  CoInitializeEx(0, COINIT_MULTITHREADED);
    if (FAILED(hres))
    {
        cout << "Failed to initialize COM library. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                  // Program has failed.
    }

    // Set general COM security levels --------------------------

    if (localconn)
        hres =  CoInitializeSecurity(
            NULL,
            -1,                          // COM authentication
            NULL,                        // Authentication services
            NULL,                        // Reserved
            RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication
            RPC_C_IMP_LEVEL_IMPERSONATE, // Default Impersonation
            NULL,                        // Authentication info
            EOAC_NONE,                   // Additional capabilities
            NULL                         // Reserved
            );
    else
        hres =  CoInitializeSecurity(
            NULL,
            -1,                          // COM authentication
            NULL,                        // Authentication services
            NULL,                        // Reserved
            RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication
            RPC_C_IMP_LEVEL_IDENTIFY,    // Default Impersonation
            NULL,                        // Authentication info
            EOAC_NONE,                   // Additional capabilities
            NULL                         // Reserved
            );

    if (FAILED(hres))
    {
        cout << "Failed to initialize security. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                    // Program has failed.
    }

    // Obtain the initial locator to WMI -------------------------

    IWbemLocator *pLoc = NULL;
    hres = CoCreateInstance(CLSID_WbemLocator, 0, CLSCTX_INPROC_SERVER, IID_IWbemLocator, (LPVOID *) &pLoc);

    if (FAILED(hres))
    {
        cout << "Failed to create IWbemLocator object." << " Err code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();       
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                 // Program has failed.
    }

    // Connect to WMI through the IWbemLocator::ConnectServer method

    IWbemServices *pSvc = NULL;

    if (localconn)  
        hres = pLoc->ConnectServer(
             _bstr_t(strNetworkResource),      // Object path of WMI namespace
             NULL,                    // User name. NULL = current user
             NULL,                    // User password. NULL = current
             0,                       // Locale. NULL indicates current
             NULL,                    // Security flags.
             0,                       // Authority (e.g. Kerberos)
             0,                       // Context object
             &pSvc                    // pointer to IWbemServices proxy
             );
    else
        hres = pLoc->ConnectServer(
            _bstr_t(strNetworkResource),  // Object path of WMI namespace
            _bstr_t(pszName),             // User name
            _bstr_t(pszPwd),              // User password
            NULL,                // Locale
            NULL,                // Security flags
            NULL,                // Authority
            NULL,                // Context object
            &pSvc                // IWbemServices proxy
            );

    if (FAILED(hres))
    {
        cout << "Could not connect. Error code = 0x" << hex << hres << endl;    
        cout << _com_error(hres).ErrorMessage() << endl;
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();          
        return 1;                // Program has failed.
    }

    cout << "Connected to root\\Microsoft\\HomeNet WMI namespace" << endl;

    // Set security levels on the proxy -------------------------
    if (localconn)
        hres = CoSetProxyBlanket(
           pSvc,                        // Indicates the proxy to set
           RPC_C_AUTHN_WINNT,           // RPC_C_AUTHN_xxx
           RPC_C_AUTHZ_NONE,            // RPC_C_AUTHZ_xxx
           NULL,                        // Server principal name
           RPC_C_AUTHN_LEVEL_CALL,      // RPC_C_AUTHN_LEVEL_xxx
           RPC_C_IMP_LEVEL_IMPERSONATE, // RPC_C_IMP_LEVEL_xxx
           NULL,                        // client identity
           EOAC_NONE                    // proxy capabilities
        );
    else
    {
        // Create COAUTHIDENTITY that can be used for setting security on proxy
        memset(&authIdent, 0, sizeof(COAUTHIDENTITY));
        authIdent.PasswordLength = wcslen (pszPwd);
        authIdent.Password = (USHORT*)pszPwd;
        authIdent.User = (USHORT*)pszName;
        authIdent.UserLength = wcslen(pszName);
        authIdent.Domain = 0;
        authIdent.DomainLength = 0;
        authIdent.Flags = SEC_WINNT_AUTH_IDENTITY_UNICODE;
        userAcct = &authIdent;

        hres = CoSetProxyBlanket(
           pSvc,                           // Indicates the proxy to set
           RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
           RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
           COLE_DEFAULT_PRINCIPAL,         // Server principal name
           RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx
           RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
           userAcct,                       // client identity
           EOAC_NONE                       // proxy capabilities
        );
    }

    if (FAILED(hres))
    {
        cout << "Could not set proxy blanket. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }

    // Use the IWbemServices pointer to make requests of WMI ----

    IEnumWbemClassObject* pEnumerator = NULL;
    hres = pSvc->ExecQuery( L"WQL", L"SELECT * FROM HNet_ConnectionProperties",
    WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, NULL, &pEnumerator);

    if (FAILED(hres))
    {
        cout << "ExecQuery failed" << " Error code = 0x"    << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }

    // Secure the enumerator proxy
    if (!localconn)
    {

        hres = CoSetProxyBlanket(
            pEnumerator,                    // Indicates the proxy to set
            RPC_C_AUTHN_DEFAULT,            // RPC_C_AUTHN_xxx
            RPC_C_AUTHZ_DEFAULT,            // RPC_C_AUTHZ_xxx
            COLE_DEFAULT_PRINCIPAL,         // Server principal name
            RPC_C_AUTHN_LEVEL_PKT_PRIVACY,  // RPC_C_AUTHN_LEVEL_xxx
            RPC_C_IMP_LEVEL_IMPERSONATE,    // RPC_C_IMP_LEVEL_xxx
            userAcct,                       // client identity
            EOAC_NONE                       // proxy capabilities
            );

        if (FAILED(hres))
        {
            cout << "Could not set proxy blanket on enumerator. Error code = 0x" << hex << hres << endl;
            cout << _com_error(hres).ErrorMessage() << endl;
            pEnumerator->Release();
            pSvc->Release();
            pLoc->Release();
            CoUninitialize();
            cout << "press enter to exit" << endl;
            cin.get();              
            return 1;               // Program has failed.
        }
    }

    // Get the data from the WQL sentence
    IWbemClassObject *pclsObj = NULL;
    ULONG uReturn = 0;

    while (pEnumerator)
    {
        HRESULT hr = pEnumerator->Next(WBEM_INFINITE, 1, &pclsObj, &uReturn);

        if(0 == uReturn || FAILED(hr))
          break;

        VARIANT vtProp;

                hr = pclsObj->Get(L"Connection", 0, &vtProp, 0, 0);// Reference
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "Connection : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                     wcout << "Connection : " << vtProp.bstrVal << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"IsBridge", 0, &vtProp, 0, 0);// Boolean
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "IsBridge : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "IsBridge : " << (vtProp.boolVal ? "True" : "False") << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"IsBridgeMember", 0, &vtProp, 0, 0);// Boolean
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "IsBridgeMember : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "IsBridgeMember : " << (vtProp.boolVal ? "True" : "False") << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"IsFirewalled", 0, &vtProp, 0, 0);// Boolean
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "IsFirewalled : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "IsFirewalled : " << (vtProp.boolVal ? "True" : "False") << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"IsIcsPrivate", 0, &vtProp, 0, 0);// Boolean
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "IsIcsPrivate : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "IsIcsPrivate : " << (vtProp.boolVal ? "True" : "False") << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"IsIcsPublic", 0, &vtProp, 0, 0);// Boolean
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "IsIcsPublic : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "IsIcsPublic : " << (vtProp.boolVal ? "True" : "False") << endl;
                }
                VariantClear(&vtProp);

        pclsObj->Release();
        pclsObj=NULL;
    }

    // Cleanup

    pSvc->Release();
    pLoc->Release();
    pEnumerator->Release();
    if (pclsObj!=NULL)
     pclsObj->Release();

    CoUninitialize();
    cout << "press enter to exit" << endl;
    cin.get();
    return 0;   // Program successfully completed.
} 
```

还可以考虑使用类似的工具[`Delphi WMI Code Creator`](http://code.google.com/p/wmi-delphi-code-creator/)，它可以帮助您生成 c++ 代码来访问 WMI。

# sdk - WBF 兼容设备

> ID：12934483
> 
> 赞同：0
> 
> 时间：2012-10-17T12:37:59.950
> 
> 标签：sdk, fingerprint

我打算在我的毕业项目中使用WBF，我想知道与之兼容的指纹设备，并且使用wbf真的是首选解决方案还是您更喜欢任何其他指纹读取框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:03:57.040

目前看来，WBF 是指纹识别器的唯一框架。为支持的阅读器查找有效性传感器。

# ios - 将 UIView 的旋转重置为 0

> ID：12934485
> 
> 赞同：1
> 
> 时间：2012-10-17T12:38:08.717
> 
> 标签：ios, uiview, frame, cgaffinetransform

如何将视图的旋转重置为零，同时保持该视图上的其他转换不变。

我不能使用：

`[myView setTransform:CGAffineTransformIdentity]`

因为它也将休息所有其他变换。

或者我只想要视图的框架，如果它的旋转为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:40:54.973

```
myView.transform = CGAffineTransformRotate(myView.transform, -currentRotationAngle); 
```

this will take the current transform, and rotate it to 0 degrees

Edit: i think you will need to rotate by the inverse of your current rotation value, not just set it to 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T12:52:55.537

要在保持过渡的同时重置旋转，您可以尝试以下代码：

```
 CGAffineTransform inverse = CGAffineTransformInvert(myView.affineTransform);
  inverse.tx = 0;
  inverse.ty = 0;
  myView.transform = inverse; 
```

# python - 理解 pcap-ng 格式的 Python libpcap 包装器？

> ID：12934495
> 
> 赞同：2
> 
> 时间：2012-10-17T12:38:48.803
> 
> 标签：python, wireshark, libpcap

是否已更新任何现有的用于 python 的 libpcap 包装器以读取由 Wireshark 1.8.x 生成的 pcap-ng 格式？我尝试了其中的几个都没有成功。也许我错过了一些东西，比如配置选项或新的 API。

如果这还没有完成或不完整，我愿意帮助完成这项工作。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:57:06.377

需要更新的是libpcap，而不是包装器。Libpcap 1.1.0 及更高版本可以透明地读取 pcap-ng 文件，只要 pcap-ng 文件不具有多个链路层标头类型（例如，具有两个 LINKTYPE_ETHERNET 接口的 pcap-ng 文件将是可读的，但不会是具有 LINKTYPE_ETHERNET 接口和 LINKTYPE_PPP 接口的 pcap-ng 文件）。

读取*任意*pcap-ng 文件需要对 libpcap 进行 API 更改；然后包装器也必须接受这些更改。

# google-apps-script - 如何通过电子邮件找出 Google Groups 消息的永久链接

> ID：12934503
> 
> 赞同：1
> 
> 时间：2012-10-17T12:39:05.523
> 
> 标签：google-apps-script, google-apps, mailing-list, google-groups, google-groups-api

我正在 Google Apps 上构建一个系统，在该系统中，许多办公室的人员将文档扫描到 Google Group 电子邮件中。目前，这些已转发给我，我有一个正在运行的 Google Apps 脚本，它查看每封电子邮件，将附件复制到云端硬盘，并以结构化方式在网站上添加指向它的链接，按财政年度、办公室等。（全部来自电子邮件主题行）。

我的云端硬盘最终会用完，我的组织出于技术原因拒绝创建单独的帐户，而且网上论坛拥有无限的存储空间。我正在尝试为脚本找出一种方法来代替每条消息的永久链接。我在网上看到了网上论坛消息，其中包括“在网络访问中查看此讨论”链接，但找不到启用该链接的设置。我试过查看电子邮件标题，但也看不到任何内容。

有谁知道根据电子邮件内容生成指向群组消息的链接的方法？

# erlang - Mnesia：根据涉及多个索引列的条件选择行时如何正确使用索引操作

> ID：12934505
> 
> 赞同：4
> 
> 时间：2012-10-17T12:39:14.993
> 
> 标签：erlang, mnesia

### 问题：

如何有效地从表中选择记录，其中选择基于涉及两个索引列的条件。

### 例子

我有记录，

```
#rec{key, value, type, last_update, other_stuff} 
```

*   我在键（默认）、类型和 last_update 列上有索引
*   类型通常是原子或字符串
*   last_update 是一个整数（自 1970 年以来的 unix 样式毫秒）

例如，我想要 type = Type 并且自特定时间戳以来已更新的所有记录。

我执行以下操作（包含在非脏事务中）

```
lookup_by_type(Type, Since) ->
    MatchHead = #rec{type=Type, last_update = '$1', _= '_'},
    Guard = {'>', '$1', Since},
    Result = '$_',
    case mnesia:select(rec,[{MatchHead, [Guard],[Result]}]) of
    []    -> {error, not_found};
    Rslts -> {ok, Rslts}
    end. 
```

### 问题

*   lookup_by_type 函数甚至使用底层索引吗？
*   在这种情况下是否有更好的方法来利用索引
*   我应该采取完全不同的方法吗？

谢谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:04:30.590

一种可能对您有所帮助的方法是查看 QLC 查询。这些是更多的 SQL/声明性的，如果可能的话，他们将自己利用索引 IIRC。

但主要问题是 mnesia 中的索引是散列，因此不支持范围查询。因此，您只能在`type`当前字段上有效地索引而不是在`last_update`字段上。

解决此问题的一种方法是制作表格`ordered_set`，然后将其推`last_update`为主键。`key`如果您需要快速访问该参数，则可以对其进行索引。一种存储可能性类似于：`{{last_update, key}, key, type, ...}`. 因此，您可以快速回答查询，因为`last_update`它是可订购的。

另一种解决方法是单独存储上次更新。保留一个`{last_update, key}`有序集的表，并使用它来限制在查询中对较大表进行扫描的数量。

请记住，mnesia 最好用作小型内存数据库。因此，扫描不一定是问题，因为它们是在内存中的，因此速度非常快。但它的主要功能是能够以肮脏的方式对数据进行键/值查找以进行快速查询。

# sql-server - 从两个表列中获取一个列表

> ID：12934506
> 
> 赞同：2
> 
> 时间：2012-10-17T12:39:19.100
> 
> 标签：sql-server, vb.net

我在 SQL Server 中有两个表，它们有两个相似的列。

```
 table1 (
     partID, PartName,  ....
 )

 table2 (
    sekId,  Part2Name, ....
 ) 
```

我需要在 vb.net 中使用 和 的累积值填充一个组合框，`PartName`以便`Part2Name`列表看起来像是来自单个列，因为用户可能需要其中任何一个。组合框必须是设计中的组合框。是否有一条 SQL 语句来解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:42:36.570

你得到所有的价值是这样的：

```
SELECT PartName FROM table1
UNION
SELECT PartName From table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:46:37.873

使用[UNION T-SQL](http://msdn.microsoft.com/en-us/library/ms180026.aspx)语句将两个表连接在一起

```
SELECT partID as IDNumber, PartName as Name FROM table1 
UNION 
SELECT sekID as IDNumber, Part2Name as Name From table2 
ORDER BY Name 
```

并使用重命名的列对联合进行排序

# macos - 来自 OpenGL 核心配置文件的 CIContext (OpenGL 3.2)

> ID：12934507
> 
> 赞同：3
> 
> 时间：2012-10-17T12:39:21.517
> 
> 标签：macos, opengl, core-image, opengl-3

是否不可能使用从 OpenGL 3.2 核心配置文件中使用 contextWithCGLContext 创建的 CIContext ？

当我切换到核心配置文件时，我的代码适用于旧配置文件并在 CIImage drawImage 上崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T05:30:10.183

似乎 CoreImage 无法渲染到核心配置文件上下文。

根据链接中的答案，您可能不得不求助于 IOSurfaces 从 CI<->GL3 传输数据。

[http://web.archiveorange.com/archive/v/CdR6fGkL9xkezE7HnXiG](http://web.archiveorange.com/archive/v/CdR6fGkL9xkezE7HnXiG)

# java - Possible concurrency issue in Xlet development

> ID：12934511
> 
> 赞同：1
> 
> 时间：2012-10-17T12:39:26.683
> 
> 标签：java, concurrency, xlet

I am involved in development of [Xlet](http://en.wikipedia.org/wiki/Xlet) using Java 1.4 API.

The docs say `Xlet` interface methods (those are actually xlet life-cycle methods) are called on its special thread (not the EDT thread). I checked by logging - this is true. This is a bit surprising for me, because it is different from BB/Android frameworks where life-cycle methods are called on the EDT, but it's OK so far.

In the project code I see the app extensively uses `Display.getInstance().callSerially(Runnable task)` calls (this is an LWUIT way of running a `Runnable` on the EDT thread).

So basically some pieces of code inside of the Xlet implementation class do create/update/read operations on xlet internal state objects from EDT thread and some other pieces of code do from the life-cycle thread without any synchronization (including that state variables are not declared as volatile). Smth like this:

```
class MyXlet implements Xlet {

    Map state = new HashMap();

    public void initXlet(XletContext context) throws XletStateChangeException {
        state.put("foo", "bar"); // does not run on the EDT thread

        Display.getInstance().callSerially(new Runnable() {
            public void run() {
                // runs on the EDT thread
                Object foo = state.get("foo");
                // branch logic depending on the got foo
            }
        });
    }

    ..
} 
```

My question is: does this create a background for rare concurrency issues? Should the access to the state be synchronized explicitly (or at least state should be declared as volatile)?

My guess is it depends on whether the code is run on a multy-core CPU or not, because I'm aware that on a multy-core CPU if 2 threads are running on its own core, then variables are cached so each thread has its own version of the state unless explicitly synchronized.

I would like to get some trustful response on my concerns.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:42:04.623

是的，在您描述的场景中，对共享状态的访问必须是线程安全的。

您需要注意两个问题：

第一个问题，可见性（您已经提到过），仍然可以在单处理器上发生。问题是允许 JIT 编译器在寄存器中缓存变量，并且在上下文切换时，操作系统很可能会将寄存器的内容转储到线程上下文，以便以后可以恢复。但是，这与将寄存器的内容写回对象的字段不同，因此在上下文切换之后，我们不能假设对象的字段是最新的。

例如，采取以下代码：

```
class Example {
    private int i;

    public void doSomething() {
        for (i = 0; i < 1000000; i ++) {
            doSomeOperation(i);
        }
    }
} 
```

由于循环变量（实例字段）`i`未声明为易失性，因此允许 JIT`i`使用 CPU 寄存器优化循环变量。`i`如果发生这种情况，则在循环完成之前，将不需要 JIT 将寄存器的值写回实例变量。

因此，假设一个线程正在执行上述循环，然后它被抢占。新调度的线程将无法看到 的最新值，`i`因为 的最新值`i`在寄存器中，并且该寄存器已保存到线程本地执行上下文中。至少`i`需要声明实例字段`volatile`以强制每个更新`i`对其他线程可见。

第二个问题是一致的对象状态。以`HashMap`您的代码中的 为例，在内部它由几个非最终成员变量`size`,`table`和. 形成链表的数组在哪里。当一个元素被放入地图或从地图中移除时，需要以原子方式更新这些状态变量中的两个或多个，以使状态保持一致。因为这必须在一个块或类似的块内完成，它才能成为原子的。`threshold``modCount``table``Entry``HashMap``synchronized`

对于第二个问题，在单处理器上运行时仍然会遇到问题。这是因为当当前线程正在执行 put 或 remove 方法时，OS 或 JVM 可能会抢先切换线程，然后切换到另一个尝试在同一线程上执行其他操作的线程`HashMap`。

想象一下，如果您的 EDT 线程在发生抢占式线程切换时正在调用“get”方法，并且您收到一个试图将另一个条目插入映射的回调，会发生什么情况。但是这次地图超过了负载因子，导致地图调整大小并且所有条目都被重新散列并插入。

# shopify - shopify_theme with listen enhancements v0.0.7 stalling

> ID：12934512
> 
> 赞同：1
> 
> 时间：2012-10-17T12:39:27.983
> 
> 标签：shopify, listen

I am heavily dependent on the most excellent Thor based CLI tool shopify_theme. It was recently improved by Shopify with a switch to Listen from FSSM and seems to work fine.

I was using it yesterday and experienced some glitches though. It seems the **theme watch** command loses synchronization with changes to files. I am not sure what triggers the problem. One thing I do often is use Finder to drag drop new files into assets, and I expect to see the watch command upload those new assets. Instead, nothing appears on stdout. Editing files after also fail to trigger uploads.

I cannot say for certain that the **Listen** object is the culprit, but it is troubling in that now I have to watch the watcher terminal window to see if it is actually watching. Anyone else use this gem and experience the glitch???

# applescript - AppleScripting an app to change background of Notification Center in OSX 10.8

> ID：12934516
> 
> 赞同：0
> 
> 时间：2012-10-17T12:39:30.480
> 
> 标签：applescript, osx-mountain-lion, copy-paste, nsusernotificationcenter

here's my code:

```
set NCBGPath to path ("Machintosh hd:System:LIbrary:Core Services:Notification Center:Contents:Resources")
set NCBackground to {"linen.tiff"}
set themeFolder to choose folder with prompt "Choose a Theme"
tell application "Finder"
if exists file (themeFolder & NCBackground) then
    copy file (themeFolder & NCBackground) to NCGBPath
end if
end tell ` 
```

What do I need to change to make it work? It should let you choose a folder, if in that folder there's a file called *`linen.tiff`* then copy that file to a set path:

```
/System/Library/CoreServices/Notification Center/Contents/Resources 
```

replacing the one that already exist...

In troubles setting the path and making it work

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:04:30.757

You seem to have all of your paths messed up. You're just not using them correctly. Also the Finder does not have a "copy" command. It has a "duplicate" command though. However because you're performing the duplicate to a restricted location I would use the cp shell command instead and run it with "administrator privileges".

So the below code will do what you are trying to do (I did not test it). However I doubt it's a good idea and don't know if it will even work. Normally just replacing a file won't make a change like you're expecting without restarting notification center. Also, as I mention in the code, you're going to have a file permissions issue. Files in that folder have special permissions that your copied file will not have. Finally, it's not a good idea to touch things in the /System directory.

With all that being said, if you still want to continue then give this a try.

```
set NCBGPath to "/System/Library/CoreServices/Notification Center/Contents/Resources/"
set NCBackground to "linen.tiff"
set themeFolder to (choose folder with prompt "Choose a Theme") as text
set themePath to themeFolder & NCBackground
set posixNCPath to NCBGPath & NCBackground

set shouldCopy to false
tell application "Finder"
    if exists file themePath then set shouldCopy to true
end tell

if shouldCopy then
    do shell script "cp " & quoted form of POSIX path of themePath & space & quoted form of posixNCPath with administrator privileges
    -- you probably should correct the file permissions too as the copied file probably won't have the proper owner and stuff
else
    display dialog "Could not find the background file in the chosen folder."
end if 
```

# php - strpos() 期望参数 1 是字符串，给定 CORE/Cake/I18n/I18n.php 的数组，第 140 行

> ID：12934523
> 
> 赞同：3
> 
> 时间：2012-10-17T12:39:55.727
> 
> 标签：php, cakephp, cakephp-2.2

我在这个项目上使用 Cakephp 2.2.2，我收到了这个错误：

```
Warning (2): strpos() expects parameter 1 to be string, array given [CORE/Cake/I18n/I18n.php, line 140] 
```

我不确定是什么原因造成的。我没有使用我知道的 I18n，我不确定我做了什么让这个 Cake 安装来做到这一点。

此外，我也收到此错误，但是，我相信这是由第一个错误引起的。

```
Warning (2): Illegal offset type in isset or empty [CORE/Cake/I18n/I18n.php, line 196] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:31:34.217

您可能正在向 __() 传递整数、数组或其他类型。查看[文档](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html)以了解正确用法。

# ruby - Installing ncurses for ruby on Windows

> ID：12934524
> 
> 赞同：5
> 
> 时间：2012-10-17T12:39:58.700
> 
> 标签：ruby, windows, ncurses

I am trying to install ncurses for ruby on windows. I have not installed ncurses before on my machine. I thought that having the ["ruby devkit"](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit), it had asked for would be enough, but now I am being asked to specify options... I don't know which options to pick, or if I need to do/install other things for the gem to get installed:

```
C:\Ruby193\Devkit>gem install ncurses -- --ruby=C:/Ruby193/bin/ruby --without-make-prog --without-opt-dir
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing ncurses:
        ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb --ruby=C:/Ruby193/bin/ruby --without-make-prog --without-opt-dir
C:/Ruby193/lib/ruby/1.9.1/shellwords.rb:35:in `shellsplit': undefined method `scan' for false:FalseClass (NoMethodError)
        from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:2216:in `<top (required)>'
        from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from extconf.rb:22:in `<main>'

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/ncurses-0.9.1 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/ncurses-0.9.1/./gem_make.out 
```

WHAT A PAIN, I just want to get this gem installed so I can run this:

```
require 'curses'
cols = Curses.stdscr.maxx
msg = "random_string"
str = msg.center(msg.length + cols - msg.length - 5 - 3)
puts "<!-- #{str}-->" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-10T02:08:14.147

更新后的版本：

1.  获取 ncurses（MinGW 端口）：http: [//invisible-island.net/ncurses/](http://invisible-island.net/ncurses/)
2.  把它放在 C:\ncurses
3.  `gem install curses --platform=ruby -- --with-ncurses-dir="C:\ncurses"`
4.  将 C:\ncurses\bin 的内容复制到路径中的某个位置

C:\ncurses 可以是任何目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T19:06:30.837

**更新：** SourceForge 似乎不再为 Windows 托管 NCurses 二进制文件。这个答案现在实际上已经过时了。对不起！（截至 2015 年 8 月，[GNU NCurses 页面](https://www.gnu.org/software/ncurses/)列出了一个“新”v6.0 版本，它比我的回答中的 0.9.1 版本更新。）

我终于在*没有*Cygwin、PDCurses 或手动构建 NCurses 源的情况下让它工作（在我需要它多年后......）。这些说明可[在我的博客上](http://www.railsrocket.com/plainrl-10-released)找到。以供参考：

*   [从SourceForge](http://developer.berlios.de/project/showfiles.php?group_id=273)下载最新的 NCurses 二进制文件 (0.9.1) 。
*   将文件解压缩到您机器上的某个位置。
*   通过运行找出 Ruby 在哪里搜索库`ruby -e 'puts $:'`
*   将 ncurses.so 和 lib\ncurses.rb 从 NCurses 目录复制并粘贴到您选择的目录中。将它们都放在根目录中。
*   运行启用了 NCurses 的应用程序。

有用。没有 PDCurses！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T19:49:27.423

我已经设法为 ruby​​ 2.2 做到了，默认情况下没有诅咒，但我花了一段时间：

*   从[SourceForge](http://sourceforge.net/projects/pdcurses/files/)下载[PDCurses](http://pdcurses.sourceforge.net/)；
*   解压它；
*   将其内容复制到 ruby​​ 可以看到的文件夹中。我不确定我使用的是哪一个，我想我将它复制到多个，直到它起作用。`ruby -e 'puts $:'`可能有帮助;
*   安装诅咒，`gem instal curses`. 如果上一步错误，这将失败；
*   完成：D

此方法不适用于其他 gem，例如 ffi-ncurses。提示：大部分 curses 功能来自[Window 类](http://ruby-doc.org/stdlib-2.0.0/libdoc/curses/rdoc/Curses/Window.html)，默认情况下带有 curses。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-27T11:53:47.510

截至 2020 年 2 月（可能更早），您可以使用以下命令安装 ncurses 库

```
gem install curses 
```

它没有任何问题，至少在 Ruby 2.6.5 上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-27T16:33:05.030

安装 gem 时需要 curses lib；所以首先你需要用你的 msys2 安装 NCurses

[https://sourceforge.net/p/mingw-w64/wiki2/NCurses/](https://sourceforge.net/p/mingw-w64/wiki2/NCurses/)

下载 NCurses（撰写本文时为 v5.9）： 源目录中的[http://ftp.gnu.org/pub/gnu/ncurses/](http://ftp.gnu.org/pub/gnu/ncurses/)

然后解压并在 MSYS shell 中：

./configure --host=x86_64-w64-mingw32 --enable-term-driver --enable-sp-funcs --prefix=/some/prefix

制作

检查

进行安装

然后如链接中所述： [https ://github.com/ruby/curses/issues/13](https://github.com/ruby/curses/issues/13)

使用 --platform=ruby ,--with-curses-include ,--with-curses-lib 标志与 gem install

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-17T22:22:55.670

ruby ncurses gem 需要在机器上安装 ncurses。据我所知，ncurses 尚未移植到 Windows。所以我不认为你会让这个工作。

可能还有其他方法可以找出 Windows 上的屏幕宽度，但我无法帮助您。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-01-15T20:52:14.863

我已经从 sourceforge 成功下载了[ncurses 0.9.1 二进制文件](https://sourceforge.net/projects/ncurses-ruby.berlios/files/ncurses-ruby1.8-0.9.1-i386-mswin32.zip/download)，所以该库仍然可用。

然后我尝试使用原生 Ruby 和 IronRuby 1.1.3

1.  将两个文件（ncurses.so ncurses.rb）放在

    C:\Ruby\Ruby193\lib\ruby\1.9.1

    原生 Ruby 出错

    指定的模块无法找到。- C:/Ruby/Ruby193/lib/ruby/1.9.1/ncurses.so（加载错误）

2.  将它们放在这里（对于 IronRuby） C:\Program Files (x86)\IronRuby 1.1\Lib\ruby\1.9.1

    给

    该模块应包含程序集清单。（来自 HRESULT 的异常：0x80131018）

# wget - 具有热链接要求的递归 wget

> ID：12934528
> 
> 赞同：1
> 
> 时间：2012-10-17T12:40:16.193
> 
> 标签：wget

我经常使用 wget 来镜像非常大的网站。包含热链接内容（无论是图像、视频、css、js）的站点会造成问题，因为我似乎无法指定我希望 wget 抓取其他主机上的页面必需品，而无需抓取也遵循指向其他主机的超链接主机。

比如我们看这个页面 [https://dl.dropbox.com/u/11471672/wget-all-the-things.html](https://dl.dropbox.com/u/11471672/wget-all-the-things.html)

让我们假设这是一个我想完全镜像的大型站点，包括**所有**页面要求——包括那些热链接的。

```
wget -e robots=off -r -l inf -pk 
```

^^ 获取除热链接图像之外的所有内容

```
wget -e robots=off -r -l inf -pk -H 
```

^^ 获取所有内容，包括热链接图像，但失控，继续下载整个网络

```
wget -e robots=off -r -l inf -pk -H --ignore-tags=a 
```

^^ 获取第一页，包括热链接和本地图像，不跟随超链接到范围之外的站点，但显然也不跟随超链接到站点的下一页。

我知道还有其他各种工具和方法可以实现这一点（HTTrack 和 Heritrix 允许用户区分其他主机上的热链接内容和指向其他主机的超链接），但我想看看 wget 是否可行. *理想情况下*，这不会在后处理中完成，因为我希望将外部内容、请求和标头包含在我输出的 WARC 文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:58:32.637

您不能只为 page-reqs 指定跨越主机；-H 是全有或全无。由于 -r 和 -H 将拉下整个 Internet，因此您需要拆分使用它们的爬网。要获取热链接的页面请求，您必须运行 wget 两次：一次递归通过站点的结构，一次获取热链接的请求。我对这种方法很幸运：

1)`wget -r -l inf [other non-H non-p switches] http://www.example.com`

2) 在站点结构 ( ) 中构建所有 HTML 文件的列表`find . | grep html`并通过管道传输到文件

3)`wget -pH [other non-r switches] -i [infile]`

第 1 步在您的本地计算机上构建站点的结构，并为您提供其中的任何 HTML 页面。第 2 步为您提供页面列表，第 3 步获取这些页面上使用的所有资产。这将在您的本地计算机上构建一个完整的镜像，只要热链接资产仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T11:00:54.800

我已经设法通过使用正则表达式来做到这一点。像这样的东西要镜像`http://www.example.com/docs`

```
wget --mirror --convert-links --adjust-extension \
--page-requisites --span-hosts \
--accept-regex '^http://www\.example\.com/docs|\.(js|css|png|jpeg|jpg|svg)$' \
http://www.example.com/docs 
```

您可能必须调整每个特定站点的正则表达式。例如，某些站点喜欢在 css 文件（例如`style.css?key=value`）上使用参数，本示例将排除这些参数。

您要从其他主机包含的文件可能至少包含

*   图片：`png jpg jpeg gif`
*   字体：`ttf otf woff woff2 eot`
*   其他：`js css svg`

有人认识其他人吗？

因此，您想要的实际正则表达式可能看起来更像这样（作为一个没有换行符的字符串）：

```
^http://www\.example\.org/docs|\.([Jj][Ss]|[Cc][Ss][Ss]|[Pp][Nn][Gg]|[Jj]
[Pp][Ee]?[Gg]|[Ss][Vv][Gg]|[Gg][Ii][Ff]|[Tt][Tt][Ff]|[Oo][Tt][Ff]|[Ww]
[Oo][Ff][Ff]2?|[Ee][Oo][Tt])(\?.*)?$ 
```

# jquery - Jquery选择最近的复选框收件箱不起作用

> ID：12934530
> 
> 赞同：4
> 
> 时间：2012-10-17T12:40:29.777
> 
> 标签：jquery, checkbox, selector, closest

我有一个`treelist`包含多个级别的内容，`checkboxes`并且我试图让父项`checkbox`显示为单击`'checked'`任何子项时`checkboxes`。出于某种原因，这不起作用，它正在杀死我。

**JAVASCRIPT**

```
$(function() {
        $("input.boundChild[type=checkbox]").click(function() {              
            $(this).closest("input.boundParent").prop("checked", "checked");
        });
 }); 
```

**HTML**

```
<ul>
   <li class="collapsed expanded">
       <input id="0" class="boundParent" type="checkbox" >
        Australia
             <ul style="display: block;">
               <li>
                  <input id="0/" class="boundChild" type="checkbox" checked="">
                  <input type="hidden" value="Intel Australia PTY Ltd.">
               </li>
             </ul>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T12:44:56.667

`input`元素不能有子元素，在您的标记`input.boundParent`中不是`input.boundChild`. `ul`它是元素的兄弟。你可以使用`prev`方法。

```
$(function() {
    $("input.boundChild[type=checkbox]").click(function() {              
        $(this).closest('ul').prev().prop("checked", this.checked);
        // $('input.boundParent').prop("checked", this.checked);
    });
}); 
```

[http://jsfiddle.net/dhVvN/](http://jsfiddle.net/dhVvN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:44:18.497

尝试：

```
$(this).parent("li.expanded").find("input.boundParent").attr("checked","checked"); 
```

`expanded`前提是您选择孩子时，父母 li 始终拥有班级。

# ruby-on-rails - How we can upload Large file in chunks in rails?

> ID：12934533
> 
> 赞同：1
> 
> 时间：2012-10-17T12:40:49.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

I am trying to upload a zip file of 350mb - 500mb to server. It gives "ENOSPC" error. Is it possible to upload file in chunks and receive it on server as one file ? or Use custom location for tmpfs, so that it will be independent of system tmp, because in my case tmp is of 128MB only.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:12:20.117

为什么不使用[nginx-upload](http://www.grid.net.ru/nginx/upload.en.html)和 apache-upload之类的 Web 服务器上传功能

不知道它在 apache 中叫什么，但我猜 apache 也有它

如果您使用的是 Nginx

如果您想跟踪上传进度，还有一个[nginx-upload-progress](http://wiki.nginx.org/HttpUploadProgressModule)会很有帮助

希望这有帮助

# tumblr - How to post text with picture by tumblr api?

> ID：12934539
> 
> 赞同：1
> 
> 时间：2012-10-17T12:41:02.027
> 
> 标签：tumblr

Im trying to post the text with picture as follows

```
$params['type'] = 'text';
$params['markdown'] = true;
$params['state'] = 'published';
$params['title'] = $title;
$params['body'] = '![this is image](http://xxxx.jpg)';

new HTTP_OAuth_Consumer($consumer_key, $consumer_secret_key)->sendRequest('http://api.tumblr.com/v2/blog/xxx/post', $params); 
```

but text displayed as plain text without a convert by markdown. If I once clicked preview button, text is displayed correctly.

# java - 简单的 Java 赛车游戏

> ID：12934544
> 
> 赞同：2
> 
> 时间：2012-10-17T12:41:17.147
> 
> 标签：java, simulator, currency, gambling

我是Java新手，我已经学习了大约一个月。课堂上的一个项目是编写一个程序，您可以在其中押注“马”“比赛”。这是代码：

```
import java.util.Scanner;
import java.util.Random;
public class horsies {
    public static void main (String[] args) 
    {
        Scanner input = new Scanner(System.in);
        int money = 1000; //Set original $ to 1000
        int r; //Declare variable for random number of horse to proceed
        int races = 0; //Set total races to 0
        int garfwins = 0; //Set Garfield's score to 0
        int shaunwins = 0; //Set Shaun's score to 0
        int chestwins = 0; //Set Chester's score to 0
        int garf; //Declare Garfield's progress variable
        int shaun; //Declare Shaun's progress variable
        int chest; //Declare Chester's progress variable
        String response; //Declare variable to get input on continuing game
        String horse; //Declare variable to get input on horse
        String track = "------------";
        String trackgarf;
        String trackshaun;
        String trackchest;
        int bet = 0;
        do {
            garf = 0;
            shaun = 0;
            chest = 0;
            System.out.print ("You have $"+money+"\n");
            System.out.print ("Hi, which horse would you like to bet on?\n");
            System.out.print ("a. Garfield ("+garfwins+"/"+races+")\n");
            System.out.print ("b. Shaun ("+shaunwins+"/"+races+")\n");
            System.out.print ("c. Chester ("+chestwins+"/"+races+")\n");        
            horse = input.next();
            System.out.print ("How much do you want to bet?\n");
            bet = input.nextInt();
            if (bet <= 0) {
                System.out.print ("Invalid bet.\n");
            }
            else {
                while (garf<12 && shaun<12 && chest<12){
                    r = (int) (Math.random()*3+1);
                    if (r == 1) {
                        garf++;
                    } else if (r == 2) {
                        shaun++;
                    } else if (r == 3) {
                        chest++;
                    }
                    System.out.print ("\n\n\n\n\n\n\n\n\n\n\n\n");
                    trackgarf = track.substring(0, garf)+"1"; //Get Garf's progress on track
                    trackshaun = track.substring(0, shaun)+"1"; //Get Shaun's progress on track
                    trackchest = track.substring(0, chest)+"1"; //Get Chester's progress on track
                    System.out.print (trackgarf+"\n");
                    System.out.print (trackshaun+"\n");
                    System.out.print (trackchest+"\n");
                    System.out.print ("GAR:"+garf+"\nSHA:"+shaun+"\nCHE:"+chest+"\n");
                    try {
                          Thread.sleep(1000L);
                            }
                        catch (Exception j) {}
                }
            }
            if (garf == 12 && horse == "a") {
                System.out.print ("You earned $"+(2*bet));
                money = money + (2 * bet);
                System.out.print ("Total balance: $"+money);
            } else if (shaun == 12 && horse == "b") {
                System.out.print ("You earned $"+(2*bet));
                money = money + (2 * bet);
                System.out.print ("Total balance: $"+money);
            } else if (chest == 12 && horse == "c") {
                System.out.print ("You earned $"+(2*bet));
                money = money + (2 * bet);
                System.out.print ("Total balance: $"+money);
            }
            System.out.print ("Play again?\n");
            response = input.next();

        } while (money >= 0 && (response.equals("Yes")||response.equals("yes")));
        input.close();
        }
} 
```

该程序似乎运行良好，除了货币价值似乎仍然停留在 1000 的事实。任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:44:14.480

您需要使用 equals() 函数而不是 == 运算符。

例如

```
if (garf == 12 && horse == "a") { 
```

应该

```
if (garf == 12 && horse.equals("a")) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:50:16.767

您遇到的问题是所有条件都返回 false 并且您没有任何 else 子句。

它们为假的原因是您对字符串类型进行了无效比较。

所以反而有

`horse == "a"`，你应该有`"a".equals(horse)`。

或者您可以切换到原始类型`char`，然后`horse == 'a'`将是正确的。

在 Java 运算符`==`中，比较对象类型的引用和基元的值。

因此，您使用 Object 类型的每个商品都应该记住使用 equals 方法而不是`==`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:50:02.973

而且您不会从货币变量中减去任何内容。下注时应该这样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-25T05:03:08.510

当你的马输了，你的代码确实会改变钱，所以余额保持 1000

```
else       {
            System.out.print ("You lost $"+(bet)+" bucks in this race\n");
            money = money - (bet);
            } System.out.print ("Play again?\n Balance :"+money); 
```

在循环中添加 else 语句

# time - Time or duration control?

> ID：12934547
> 
> 赞同：0
> 
> 时间：2012-10-17T12:41:29.297
> 
> 标签：time, controls, javafx-2, duration

In my application the users needs to be able to enter a duration, consisting of minutes and seconds.

I am thinking of something like the control used in Windows to change the time, though I only need minutes and seconds and also the arrows would be nice, but are not necessary.

*   Is there already a control for this in JavaFX 2?
*   If not, how can I create such a control?

A screenshot of the mentioned Windows control:

![enter image description here](../Images/1311ef6065cd04b2aeac1aed7a7be76f.png)

Thanks for any hint!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:36:13.103

不幸的是，标准 JavaFX 2 中没有这样的控制。

虽然您可以尝试`Spinner`从 JFXtras 项目中查看控制：http: [//jfxtras.org/](http://jfxtras.org/)

并将其与此处描述的 TextEdit 过滤方法集成：[What is the recommended way to make a numeric TextField in JavaFX?](https://stackoverflow.com/questions/7555564/what-is-the-recommended-way-to-make-a-numeric-textfield-in-javafx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:48:47.193

微调器的良好实现，尽管您需要对其进行调整以处理时间输入。
[JavaFX NumberTextField 和 Spinner 控件](http://java.dzone.com/articles/javafx-numbertextfield-and)。

# jquery - Unable to get data from ajax function and wcf rest service on Firefox and Chrome but works fine with IE

> ID：12934553
> 
> 赞同：1
> 
> 时间：2012-10-17T12:41:50.280
> 
> 标签：jquery, json, ajax, wcf, google-chrome

I am calling ajax function which return some data in JSON format from wcf rest service. I am getting data when I user IE browser but it's failed to get data when I use Mozilla and Chrome browser.

Following is the code I am using.

```
 <script src="js/JSon.js" type="text/javascript"></script>
    <script src="js/jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="js/jquery.js" type="text/javascript"></script>

 function fillcategory() {
                var GetCategoryURl = "http://localhost:4444/Service1.svc/GetCategory"
                var drp = "";
                   $.ajax({
                        cache: false,
                        type: "GET",
                        async: false,  
                        url: GetCategoryURl,
                        dataType: "json",   
                        success: function (objCategory) {
                            Category = objCategory;                               
                        }
                    ,
                        error: function (xhr) {

                        }
                    });

                 fillSubcategory();
            } 
```

Rquest Header is:

```
 OPTIONS /Service1.svc/GetCategory?_=1350649411289 HTTP/1.1
Host: localhost:4444
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.28) Gecko/20120306 Firefox/3.6.28
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,application/json
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 115
Connection: keep-alive
Origin: http://localhost:14853
Access-Control-Request-Method: GET
Access-Control-Request-Headers: x-requested-with 
```

Response Header is:

```
 HTTP/1.1 405 Method Not Allowed
Allow: GET
Content-Length: 1565
Content-Type: text/html; charset=UTF-8
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Fri, 19 Oct 2012 12:23:56 GMT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:02:29.070

只需将它添加到您的服务器端代码（服务）的 global.asax 文件中，它就可以肯定地工作，

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.Cache.SetNoStore();
        EnableCrossDmainAjaxCall();

    }

    private void EnableCrossDmainAjaxCall()
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
        if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
            HttpContext.Current.Response.End();
        }
    } 
```

# java - 实现接口时获得与超类相同的接口

> ID：12934564
> 
> 赞同：0
> 
> 时间：2012-10-17T12:42:28.113
> 
> 标签：java

在我使用的java`generics`和我想使用的类中`implements interface(? extends class)`，这个接口是`generic interface<T>`，但我得到消息

```
same interface as superclass 
```

代码示例：

```
public interface ISomething<T>
{
    string Name { get; set; }
    string GetType(T t);
}

public class SomeClass implements ISomething<T extends SomeClass2> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:05:22.333

您不能使用未定义的通用说明符。在您的示例中`SomeClass`，`T`未声明 , 。

这是无效的：

```
public class SomeClass implements ISomething<T extends SomeClass2> 
```

这些都有效

```
public class SomeClass<T extends SomeClass2> implements ISomething<T> 
```

或者

```
public class SomeClass implements ISomething<SomeClass2> 
```

# java - Saxon XSLT 和 NodeList 作为参数

> ID：12934566
> 
> 赞同：0
> 
> 时间：2012-10-17T12:42:28.957
> 
> 标签：java, xslt, saxon

我想要实现的是（使用 Saxon-B 9.1）：

1) 使用以下示例类的对象作为参数运行 XSLT 转换

2) 使用选定节点的自反扩展函数填充对象的属性

3) 运行第二个 XSLT 转换（在不同的 XML 输入上）并将上述对象与填充值作为参数传递

4) 将对象中的 XML 节点插入到输出文档中

我的课如下：

```
public class Example {
.   private NodeSet test;

.   public RequestInfo() {}

.   public void settest(NodeList t) {
.       this.test = t;
.   }
.   public NodeList gettest() {
.       return test;
.   }
} 
```

第一次转换似乎很好地填充了我的对象（使用 XSLT 中的 settest() 方法）——我可以看到添加到 NodeList 的正确节点。

但是，在运行第二次转换并从 XSLT 中调用 gettest() 方法时出现以下错误：

```
NodeInfo returned by extension function was created with an incompatible Configuration 
```

我在想我是否应该不使用 NodeList 但也许是撒克逊人可以识别的一些不同的等效类型？我用 NodeSet 尝试过，但得到了同样的错误信息。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:16:16.357

您没有显示足够的信息来确切地了解您做错了什么，但我可以尝试解释错误消息。Saxon 通过将整数代码分配给 XML 文档和样式表中使用的所有名称以及使用整数比较来比较名称来部分实现其快速性能。保存整数到名称的映射的地方是 NamePool，NamePool 归 Saxon Configuration 对象所有；所以参与转换的所有文档、样式表等都必须在相同的配置下创建（这有点像所有节点必须在它们附加到的文档下创建的 DOM 规则）。该消息意味着您周围至少有两个不同的配置对象。配置由您的应用程序显式创建，

我想知道 XSLT 和 Java 代码的这种混合是否真的是一个好主意？通常当我看到它时，正在使用 Java 代码，因为人们还没有掌握如何在 XSLT 中达到预期的效果。不使用 Saxon 的 DOM 有很多很好的理由：它非常慢，需要更多的代码行，它不是线程安全的，更难调试，......

# javascript - 如何使用 Jquery 绑定菜单和子菜单应用 css？

> ID：12934569
> 
> 赞同：0
> 
> 时间：2012-10-17T12:42:34.760
> 
> 标签：javascript, linq, jquery-ui, css, asp.net-web-api

我有 html 格式的 sting 值数据如何应用 css 和 jquery 样式

```
 public class Menus
      {
        public List<Menus> GetALL { get; set; }  
            public int menuId { get; set; }
            public string menuName { get; set; }
            public string menuURL { get; set; }
            public int parentId { get; set; }
       }    
    public class MenuModel
    {
        public MenuItemsEntities objEntities = new MenuItemsEntities();

        public string GetMenu()
        {
            //Get MainMenu Menus       
            Menus menuobj = new Menus();            
            var objmenu = from menus in objEntities.MenuItems
                          where menus.ParentId == 0
                          select menus;

            string strMenuBuild = string.Empty;
            strMenuBuild += "<ul>";
            foreach (var i in objmenu)
            {
                menuobj.menuName = i.ItemName;
                menuobj.menuId = i.MenuItemsID;
                menuobj.menuURL = i.URL;
                if (i.ParentId == 0)
                {                  
                    //GetSubMenu();
                    strMenuBuild = strMenuBuild + "<li><a href='" + menuobj.menuURL + "'>" + menuobj.menuName + "</a><ul>";
                    strMenuBuild += GetSubMenu(Convert.ToInt32(menuobj.menuId)) + "</ul></li>";
                    //strMenuBuild  += "</ul></li>";
                }
            }
            strMenuBuild += "</ul>";
            return strMenuBuild;
        }
        public string GetSubMenu(int submenuid)
        {
            string strSubBuild = string.Empty;
            Menus menuobj = new Menus();    
            var submenu=   from menus in objEntities.MenuItems
                          where menus.ParentId == submenuid
                          select menus;           
            if (submenu.Count() > 0)
            {
                foreach (var sbmnu in submenu)                
                {
                    menuobj.menuURL = sbmnu.URL;
                    menuobj.menuName = sbmnu.ItemName;
                    menuobj.menuId = sbmnu.MenuItemsID;

                    strSubBuild = strSubBuild + "<li ><a href='" + menuobj.menuURL + "'>" + menuobj.menuName + "</a>";

                    var submneu1 = from menus in objEntities.MenuItems
                                   where menus.ParentId == menuobj.menuId 
                                   select menus;

                    if (submneu1.Count() > 0)
                    {
                        strSubBuild += "<ul>";
                        strSubBuild += GetSubMenu(Convert.ToInt32(menuobj.menuId));
                        strSubBuild += "</ul>";  
                    }
                    strSubBuild += "</li>";
                }               
            }
            return strSubBuild;
        }
    } 
```

我已经像这样返回到 String In Html formate

* * *

*   菜单的配饰
    *   衬衫
    *   T 恤
        *   H3子菜单1
    *   牛仔裤
        *   P1子菜单1
        *   P2子菜单2
    *   裤子
    *   运动服
*   Women'sMenu' Apperals
    *   纱丽
    *   裙子
    *   裤子
*   手机
    *   手机
    *   平板电脑
    *   存储卡
    *   蓝牙
*   珠宝首饰
    *   收入
    *   戒指
    *   链条
    *   儿童珠宝

但是我绑定了菜单和子菜单。我想应用 css 和 jquery。如何应用 css 和 jquery 我不知道。任何人都可以帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:20:45.997

这是我用来构建菜单结构的功能：

```
var buildMenu = function(menu, el) {
    var ul = $('<ul></ul>');
    ul.appendTo(el);
        for(var i in menu) {
            var menuItem = $('<li><a href="' + menu[i].url + '">' + menu[i].title + '</a></li>');
            menuItem.appendTo(ul);
            if(menu[i].subMenu) {
                buildMenu(menu[i].subMenu, menuItem);
            };
        };
} 
```

menu 是包含菜单的 JSON 对象，el 是要插入菜单的 div 或包含元素。

我的 Menu 对象具有以下格式：

```
var menu : [{
    title   : 'Home',
    url     : 'Default.html'
}, {
    title   : 'Groups',
    url     : '#',
    subMenu : [{
        title   : 'Group1',
        url     : 'Group1.html'
    },{
        title   : 'Group2',
        url     : 'group2.html'
    }]
}]; 
```

希望有帮助

# ruby - Sketchup 因 .rbs 乱码插件而崩溃

> ID：12934574
> 
> 赞同：0
> 
> 时间：2012-10-17T12:42:42.193
> 
> 标签：ruby, plugins, sketchup, scramble

我有一个供客户使用的 Sketchup 插件，因此我需要对其进行扰码以创建一个 .rbs 文件。当文件为 .rb 时，可以完美运行，但是当我将其转换为 .rbs 时，插件会在启动时使 Sketchup 崩溃。有谁知道这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:55:42.273

我曾经遇到过这个问题，我的 plugin.rb 在您再次创建之前检查了是否已经创建了 webdialog。

```
if mywebdialog.nil?;
     mywebdialog = UI :: WebDialog.new ("" ...... 
```

当它是 .rb 时，此代码在 SketchUp 中工作，当它使用 Scramble .rbs 进行加密时，它会给出一个触发的错误 BugSplat ... al 检查你的代码没有这样做。

删除“if mywebdialog.nil?;” 并再次测试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T15:34:56.527

在创建另一个之前检查是否创建了 webDialog。

# jquery - 附加示例中的多层画布问题

> ID：12934578
> 
> 赞同：0
> 
> 时间：2012-10-17T12:42:48.717
> 
> 标签：jquery, css, html

我正在尝试重叠画布，但浏览器未显示重叠

[http://jsfiddle.net/zmgP4/](http://jsfiddle.net/zmgP4/)

**HTML 代码**

```
<!DOCTYPE html />
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="chrome=1, IE=edge">
    <title>well Trajectory</title>
    <link rel="Stylesheet" href="main.css" />
</head>
<body>
<div id="mainDiv">
<img id="loading" src="loading.gif" style=" position:relative; left:30%; top:30%" />
</div>
</body>
</html> 
```

**CSS 代码**

```
body 
{        
    background-color:#FFFFFF;
}

#mainDiv
{
    margin:auto;
    width:300px;
    height:300px;
    background-image:transparent;
    position:relative ;
}​ 
```

**jQuery代码**

```
function drawGauge(idParent, width, height) {
    $('#loading').remove();
    $canvasDiv = "<canvas id='gg_layer1'/>";
    $(idParent).append($canvasDiv);

    $('#gg_layer1').attr('width', width).attr('height', height).css('background-color', 'red').css('position', 'relative').css('z-index', 0).css('left', '0px').css('top', '0px');
}

function drawPointer(idParent, width, height, color) {

    $('#loading').remove();
    $canvasDiv = "<canvas id='gg_layer2'/>";
    $(idParent).append($canvasDiv);

    $('#gg_layer2').attr('width', width).attr('height', height).css('background-color', '#555555').css('position', 'relative').css('z-index', 1).css('left', '0px').css('top', '0px');
    var center = width / 2;
}
$(document).ready(function() {
    drawGauge('#mainDiv', $('#mainDiv').width(), $('#mainDiv').height());
    drawPointer('#mainDiv', $('#mainDiv').width(), $('#mainDiv').height());
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:49:55.113

尝试在脚本中使用绝对定位来重叠项目

```
css('position', 'absolute') 
```

# delphi - 如何将 RSA 公钥的模数和指数插入 FGInt 包（http://submanifold.be/）

> ID：12934580
> 
> 赞同：2
> 
> 时间：2012-10-17T12:42:48.453
> 
> 标签：delphi, rsa, public-key

我是 RSA 加密方法的新手……我需要验证来自设备的传入签名。问题是，我必须使用 delphi IDE，而 delhi 没有实现一些 RSA 库。我在网上找到了这个网站上的 FGInt 包：http: [//submanifold.be/](http://submanifold.be/)。我下载了它（RSA.zip），但我一头雾水——我不知道，我怎样才能把我的公钥模数和指数放到这段代码中。

情况如下：我有来自设备的签名，我需要将其与计算的消息（挑战）进行比较（验证）。我还有一个带有嵌入式公钥的 X509 证书。我可以从这些证书中提取这个公钥。我还可以从公钥中提取模数和指数。我的问题是，我不知道如何将获得的模数和指数放入 FGInt 包的 RSAVerify 过程。模数为 128 字节（我将它作为一个十六进制数的数组），指数的值为 65537。

有人可以帮忙解决我的问题吗，如何将模数和指数值插入到 FGint 包中的过程 RSAVerify 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:22:40.420

如果您需要 RSA 函数并且在 Windows 上运行，请使用 MSCRYPTO API。此处信息： http://en.wikipedia.org/wiki/Microsoft_CryptoAPI 此处： [http](http://en.wikipedia.org/wiki/Microsoft_CryptoAPI) : [//msdn.microsoft.com/en-us/library/windows/desktop/aa380255 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380255(v=vs.85).aspx)

如果您打算让您的应用程序在美国以外的地区可用，将自定义或第三方加密逻辑整合到您的应用程序中将使您的应用程序落入美国出口限制的“软件弹药”类别。您将必须申请出口许可证，让美国政府代表审查您的代码等，否则将面临巨额罚款和可能因出口违规而受到刑事指控的风险。

如果您的应用程序改为链接到 MSCRYPTO 库，则您无需执行任何操作。Microsoft 负责为 Windows 附带的 MSCRYPTO 库获取出口许可。

# sql - 创建存储过程时出错

> ID：12934584
> 
> 赞同：1
> 
> 时间：2012-10-17T12:42:59.590
> 
> 标签：sql, sql-server-2008, stored-procedures

我不熟悉存储过程，我创建了一个存储过程，它从 C# 页面获取一些参数，然后将结果作为`OUTPUT`参数发回。

我需要做一些计算才能得到结束日期，所以我最终使用了很多 IF 语句。但是，当我创建存储过程时，我得到了我不知道如何解决的错误，每件事似乎都是正确的！

这是存储过程代码：

```
 CREATE PROCEDURE sp_RenewSubscription 
        -- Add the parameters for the stored procedure here
        @Reference nvarchar(100),
        @SubscribtionID nvarchar(100),
        @Months int,
        @Result nvarchar(200) OUTPUT
    AS

BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @EndDate as nvarchar;
    DECLARE @MonthCounts as int;

    IF NOT EXISTS(SELECT [Reference] FROM [Norton].[dbo].[SubscriptionStatus] WHERE [Reference] = @Reference)
    SET @Result = '0: Reference ID not found'
    ELSE
    IF NOT EXISTS(SELECT [Reference] FROM [Norton].[dbo].[SubscriptionStatus] WHERE [Reference] = @Reference AND [SubscribtionID] = @SubscribtionID)
    SET @Result = '0: Subscribtion ID not found'
    ELSE
    BEGIN 
        SELECT TOP 1 @EndDate = [EndDate], @MonthCounts = [SubscriptionMonthCount] FROM [Norton].[dbo].[SubscriptionStatus] WHERE [Reference] = @Reference AND [SubscribtionID] = @SubscribtionID
        IF @EndDate = '0'
        BEGIN 
        UPDATE [Norton].[dbo].[SubscriptionStatus]
        SET [SubscriptionMonthCount] = @Months + @MonthCounts
        WHERE [Reference] = @Reference AND [SubscribtionID] = @SubscribtionID
        END
        ELSE
        BEGIN 
        UPDATE [Norton].[dbo].[SubscriptionStatus]
        SET [SubscriptionMonthCount] = @Months
        WHERE [Reference] = @Reference AND [SubscribtionID] = @SubscribtionID
        END

    SET @Result = '1: Done Successfully'
    END
GO

END
GO 
```

这是我得到的错误：

> 消息 102，级别 15，状态 1，过程 sp_RenewSubscription，第 44 行
> “END”附近的语法不正确。
> 消息 102，级别 15，状态 1，第 2 行
> 'END' 附近的语法不正确。*

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:43:36.770

在程序结束前删除`go`。

IE

```
 END 

    SET @Result = '1: Done Successfully' 
    END 
GO  --- <-- get rid of this

END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:47:41.667

试试这个：

```
CREATE PROCEDURE Sp_renewsubscription 
  -- Add the parameters for the stored procedure here 
  @Reference      NVARCHAR(100), 
  @SubscribtionID NVARCHAR(100), 
  @Months         INT, 
  @Result         NVARCHAR(200) output 
AS 
  BEGIN 
      -- SET NOCOUNT ON added to prevent extra result sets from 
      -- interfering with SELECT statements. 
      SET nocount ON; 

      DECLARE @EndDate AS NVARCHAR; 
      DECLARE @MonthCounts AS INT; 

      IF NOT EXISTS(SELECT [reference] 
                    FROM   [Norton].[dbo].[subscriptionstatus] 
                    WHERE  [reference] = @Reference) 
        SET @Result = '0: Reference ID not found' 
      ELSE IF NOT EXISTS(SELECT [reference] 
                    FROM   [Norton].[dbo].[subscriptionstatus] 
                    WHERE  [reference] = @Reference 
                           AND [subscribtionid] = @SubscribtionID) 
        SET @Result = '0: Subscribtion ID not found' 
      ELSE 
        BEGIN 
            SELECT TOP 1 @EndDate = [enddate], 
                         @MonthCounts = [subscriptionmonthcount] 
            FROM   [Norton].[dbo].[subscriptionstatus] 
            WHERE  [reference] = @Reference 
                   AND [subscribtionid] = @SubscribtionID 

            IF @EndDate = '0' 
              UPDATE [Norton].[dbo].[subscriptionstatus] 
              SET    [subscriptionmonthcount] = @Months + @MonthCounts 
              WHERE  [reference] = @Reference 
                     AND [subscribtionid] = @SubscribtionID 
            ELSE 
              UPDATE [Norton].[dbo].[subscriptionstatus] 
              SET    [subscriptionmonthcount] = @Months 
              WHERE  [reference] = @Reference 
                     AND [subscribtionid] = @SubscribtionID 

            SET @Result = '1: Done Successfully' 
        END 
  END 

GO 
```

# uiscrollview - 我们如何在 iphone 中自定义滚动视图？

> ID：12934587
> 
> 赞同：2
> 
> 时间：2012-10-17T12:43:11.047
> 
> 标签：uiscrollview, core-plot, xcode4.5, iphone-5

在这里，我使用的是两个饼图，它有一个分页。我的问题是在横向模式下，饼图在 iphone 屏幕上的每个地方都移动了。请给出任何想法以横向模式滚动

```
 [self.view setFrame:CGRectMake(0, 0, 480, 320)];
          [myScrollView setFrame:CGRectMake(0, 0.0, 480, 290-40)];
          [myScrollView setContentSize:CGSizeMake(480*2, 400.00)];
          [myScrollView setContentOffset:CGPointMake(480*currentPageTop, 0.00)];
          [pageControl setFrame:CGRectMake(0.0, 30.00, 480, 20.00)];
          [pageControl setCurrentPage:currentPageTop] 
```

# sql - 在列中查找字母

> ID：12934588
> 
> 赞同：1
> 
> 时间：2012-10-17T12:43:17.483
> 
> 标签：sql, oracle

如何查询oracle以查找包含0-1000数字的列

我试过这样的查询：

```
select (Column_name)  
from  (table_name) 
where regexp_like(CREDIT_BANK_BRANCH,'^[0-999]$'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:01:37.043

使用这个正则表达式：

```
^([0-9]{1,3}|1000)$ 
```

**解释：**

正则表达式无法计算数值表达式，因此您必须将所有内容都视为字符，因此：

找到任何一到三个字符长的数字组：`[0-9]{1,3}`或者只是数字 1000。

管道表示“或”，括号是限制表达式范围的必要条件。

**较短的版本：**

```
^(\d{1,3}|1000)$ 
```

测试：

![在此处输入图像描述](../Images/74e4955d2208ec699bc9d2f5985a14d2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:46:12.710

如果您只希望返回该列中包含数字的行，请将正则表达式更改为`^[0-9]+$`（或更短）。`^\d+$`

如果要查找具有非数字字符的记录，请使用`[^0-9]`（或更短`\D`）。

有关更多详细信息，请参阅[在 Oracle 数据库中使用正则表达式。](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_regexp.htm)

# sharepoint-2010 - 为外部列表生成业务层

> ID：12934590
> 
> 赞同：2
> 
> 时间：2012-10-17T12:43:18.033
> 
> 标签：sharepoint-2010, bcs

我在后端有我的自定义数据库，并且我使用 BCS 将信息引入 SharePoint 2010。到目前为止一切都很好，但现在我想理想地使用像 spmetal 这样的强类型生成的实体来处理列表。不幸的是，SPMETAl 不会为外部列表生成实体。

处理这种情况的最佳方法是什么？

如何生成我的业务层而不花费太多时间，因为 spmetal 不是我的选择。

# javascript - 提交html表单时如何使用jQuery获得响应？

> ID：12934591
> 
> 赞同：0
> 
> 时间：2012-10-17T12:43:16.753
> 
> 标签：javascript, jquery, forms, blobstore, blobstorage

我正在使用 BlobStore 保存图像。我有一个jsp页面。该页面的代码如下：

```
 <%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
 <%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>
 <%
 BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
 %>
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
 <html>
   <head>
     <meta name="description" content="My web page" />
    <title>My Web</title>
    <script type="text/javascript" src="jquery-1.8.0.js"></script>
    <script src="jquery-mainpage.js"></script>
   </head>

<body>
            <form method="post" id="upload_img_form" name="upload_img_form" action="<%= blobstoreService.createUploadUrl("/imagedao") %>" enctype="multipart/form-data">
                <input id="upload_img_form_input" name="upload_img_form_input" type="file">
                <input id="upload_img_submit" type="submit" name="upload_img_submit" value="Upload >>" />
            </form>
</body>
</html> 
```

在 jquery-mainpage.js 我有以下代码：

```
 $("#upload_img_form").submit(function(e){
        e.preventDefault();
        var upload_img_val = $("#upload_img_form_input").val();
        if(upload_img_val == ''){
                alert('Please choose a file!');
        }else{
            $.ajax({
               type: 'POST',
               url: url_to_blobstore,
               data: {upload_img_form_input:upload_img_val},
               success: function(result) {
                 console.log('upload_img_form result: '+result);
            }
         });
       }
}); 
```

我收到以下异常：

```
 java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Arrays.java:2786)
at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:71)
at javax.mail.internet.MimeMultipart.readTillFirstBoundary(MimeMultipart.java:244)
at javax.mail.internet.MimeMultipart.parse(MimeMultipart.java:181)
at javax.mail.internet.MimeMultipart.getCount(MimeMultipart.java:109)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet.handleUpload(UploadBlobServlet.java:145)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet.access$000(UploadBlobServlet.java:68)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet$1.run(UploadBlobServlet.java:111)
at java.security.AccessController.doPrivileged(Native Method)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet.doPost(UploadBlobServlet.java:108)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.appstats.AppstatsFilter.doFilter(AppstatsFilter.java:141)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94) 
```

为什么我得到这个异常。代码有问题吗。我想在提交此表单时得到回复。所有 jQuery 代码都在 jquery-mainpage.js 中。有没有可以给我响应的jQuery方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:56:11.663

如果您想要访问客户端脚本上的响应，只需使用 jquery 提交表单：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

响应回调可以访问响应。

或者您可以使用完整的表单插件从客户端管理您的表单提交：

[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

# locale - Java 6：使用自定义时区创建语言环境

> ID：12934592
> 
> 赞同：1
> 
> 时间：2012-10-17T12:43:21.123
> 
> 标签：locale, java-6

我正在使用 java 1.6_29，我需要为 Calendar 实例定义几个具有不同 DateTimeElements 的语言环境（例如一周的第一天......）。

在 Java 1.4 中，我们使用 LocaleElements_xx_XX 类（xx 表示语言和国家）作为 ListResourceBundle 的子类来定义新的本地元素，但在 1.6 中这不再起作用。有谁知道如何在 java 1.6 中做到这一点？谢谢 ：）

# gradle - 消息“依赖打包定义主要工件的扩展已弃用”是什么意思？

> ID：12934598
> 
> 赞同：14
> 
> 时间：2012-10-17T12:43:45.743
> 
> 标签：gradle

我的 gradle build 输出消息

```
Deprecated: relying on packaging to define the extension of the main artifact is deprecated, and will not be supported in a future version of Gradle. 
```

这是什么意思以及如何使警告消失？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-19T09:42:44.017

那里讨论了如何解决这个问题： [http ://forums.gradle.org/gradle/topics/jhuxhorn_googlemail_com-zal6c](http://forums.gradle.org/gradle/topics/jhuxhorn_googlemail_com-zal6c)

目前，没有解决方案，警告说是“窃听”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-02T22:02:26.417

目前似乎没有解决该问题的方法。该错误已在此处提交：[https ://code.google.com/p/android/issues/detail?id=65501](https://code.google.com/p/android/issues/detail?id=65501)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:10:07.573

这是说你依赖于某种类型的人工制品，它不知道但它可以通过使用 pom 的“包装”属性找到。此处计划了一些增强功能，并在[此处](https://github.com/gradle/gradle/blob/master/design-docs/dependency-management-bug-fixes.md#correct-handling-of-packaging-and-dependency-type-declared-in-poms)对其进行了描述。

# groovy - 从子项目 build.gradle 访问根 gradle build.gradle 中的变量？

> ID：12934601
> 
> 赞同：2
> 
> 时间：2012-10-17T12:44:02.837
> 
> 标签：groovy, gradle

我有一个根 build.gradle，其中包含一些我想作为某些子项目但不是所有子项目的全局变量的变量

我创建了一个列表：

```
List spring_dependencies = [
    "org.springframework:spring-beans:$springVersion",
    "org.springframework:spring-core:$springVersion",
    "org.springframework:spring-web:$springVersion",
] 
```

我有一些不使用它进行编译的子项目，所以我只想添加：

```
compile spring_dependencies 
```

到真正需要春天的项目。

如何在 gradle 中完成这个全局变量共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:18:55.437

我刚刚尝试过的一种方法（它似乎有效）是声明另一个子项目（我称之为'spring'），它具有以下内容`build.gradle`：

```
apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
  compile "org.springframework:spring-beans:$springVersion"
  compile "org.springframework:spring-core:$springVersion"
  compile "org.springframework:spring-web:$springVersion"
} 
```

将此项目添加到子项目`settings.gradle`列表中，然后在`build.gradle`需要spring库的地方，您可以执行以下操作：

```
apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
  compile project(':spring')
} 
```

从您的`spring`子项目中提取依赖项。

可能有更好的方法来实现相同的结果... :-/

# hibernate - 如何在 hbm.xml 中的多对多连接表中添加额外的列：休眠？

> ID：12934603
> 
> 赞同：2
> 
> 时间：2012-10-17T12:44:05.710
> 
> 标签：hibernate, many-to-many, rdbms, hbmxml

> **可能重复：**
> [可以向@ManyToMany Hibernate 额外表添加额外字段吗？](https://stackoverflow.com/questions/1153409/can-add-extra-fields-to-manytomany-hibernate-extra-table)

这是我的问题，有没有办法在休眠中使用 hbm.xml 文件在多对多连接表中添加额外的列。就像：

```
Create table employee(
emp_id int primary key,
emp_name varchar(50)
);

Create table address(
address_id int primary key,
address varchar(500)
);

Create table employee_address(
emp_id int,
address_id int,
/********** this is an extra column **********/
no_of_letters_sent int,

foreign key(emp_id) references employee(emp_id),
foreign key(address_id) references address(address_id)
); 
```

如何为第三个表制作 hbm.xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:00:01.087

我不认为你可以添加额外的列并保持多对多 rel。你必须切换到多对一的rels。

请参阅此处的讨论：

[可以向@ManyToMany Hibernate 额外表添加额外字段吗？](https://stackoverflow.com/questions/1153409/can-add-extra-fields-to-manytomany-hibernate-extra-table/1168740#1168740)

# android - Android数据未保存在数据库中

> ID：12934608
> 
> 赞同：1
> 
> 时间：2012-10-17T12:44:22.277
> 
> 标签：android, database, sqlite

我在将数据保存到使用 SQLITE 数据库浏览器预先创建的 sqlite 数据库时遇到问题。我将数据库存储在资产文件夹中。

这是我使用的代码：

**ApplicationContextProvider 类：**

```
import android.app.Application;
import android.content.Context;
public class ApplicationContextProvider extends Application {

private static Context sContext;

public void onCreate() {
        super.onCreate();
sContext = getApplicationContext();

}

public static Context getContext() {
    return sContext;
}

} 
```

**我的 DatabaseHelper 类：**

```
public class DataBaseHelper extends SQLiteOpenHelper {

// The Android's default system path of your application database.
//data/data/ and /databases remain the same always. The one that must be changed is com.example which represents
//the MAIN package of your project
private static String DB_PATH = "/data/data/com.fps/databases/";

//the name of your database
private static String DB_NAME = "bmiDB";

private static SQLiteDatabase mDataBase;

private static DataBaseHelper sInstance = null;
// database version    
private static final int DATABASE_VERSION = 1;

/**
 * Constructor Takes and keeps a reference of the passed context in order to
 * access to the application assets and resources.
 */
private DataBaseHelper() {
    super( ApplicationContextProvider.getContext(), DB_NAME, null, DATABASE_VERSION );

    try {
        createDataBase();
        openDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

/**
 * Singleton for DataBase
 *
 * @return singleton instance
 */
public static DataBaseHelper instance() {

    if ( sInstance == null ) {
        sInstance = new DataBaseHelper();
    }
    return sInstance;
}

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 *
 * @throws java.io.IOException io exception
 */
private void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if ( dbExist ) {
        // do nothing - database already exist
    } else {

        // By calling this method an empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch ( IOException e ) {

            throw new Error( "Error copying database" );
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 *
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase( myPath, null,
                SQLiteDatabase.OPEN_READONLY );

    } catch ( SQLiteException e ) {

        // database doesn't exist yet.

    }

    if ( checkDB != null ) {

        checkDB.close();

    }

    return checkDB != null;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 *
 * @throws java.io.IOException io exception
 */
public void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = ApplicationContextProvider.getContext().getAssets().open( DB_NAME );

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream( outFileName );

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[ 1024 ];
    int length;
    while ( ( length = myInput.read( buffer ) ) > 0) {
        myOutput.write( buffer, 0, length );
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

private void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    mDataBase = SQLiteDatabase.openDatabase( myPath, null,
            SQLiteDatabase.OPEN_READWRITE );
}

/**
 * Select method
 *
 * @param query select query
 * @return - Cursor with the results
 * @throws android.database.SQLException sql exception
 */
public Cursor select( String query ) throws SQLException {
    return mDataBase.rawQuery( query, null );
}

/**
 * Insert method
 *
 * @param table  - name of the table
 * @param values values to insert
 * @throws android.database.SQLException sql exception
 */

public void insert( String table, ContentValues values ) throws SQLException {
    mDataBase.insert( table, null, values );
}

/**
 * Delete method
 *
 * @param table - table name
 * @param where WHERE clause, if pass null, all the rows will be deleted
 * @throws android.database.SQLException sql exception
 */
public void delete( String table, String where ) throws SQLException {

    mDataBase.delete( table, where, null );

}

/**
 * Update method
 *
 * @param table  - table name
 * @param values - values to update
 * @param where  - WHERE clause, if pass null, all rows will be updated
 */
public void update( String table, ContentValues values, String where ) {

    mDataBase.update( table, values, where, null );

}

/**
 * Let you make a raw query
 *
 * @param command - the sql comand you want to run
 */

public void sqlCommand( String command ) {
    mDataBase.execSQL( command );
}

@Override
public synchronized void close() {

    if (mDataBase != null)
        mDataBase.close();

    super.close();

}

@Override
public void onCreate( SQLiteDatabase db ) {

}

@Override
public void onUpgrade( SQLiteDatabase db, int oldVersion, int newVersion ) {

}

} 
```

**以及方法 viewSavedToast() 中的一段代码：**

```
AlertDialog ad = new AlertDialog.Builder( this ).create();
    //ad.setCancelable( true );
    ad.setTitle( "Successful" );
    ad.setMessage( "You're result is saved in the database!" );
    ad.setButton( "OK", new DialogInterface.OnClickListener() {  
        public void onClick( DialogInterface dialog, int which ) {  
            //with ContentValues put the data we want into the database
            ContentValues values = new ContentValues();
            String column_name = etanswer.getText().toString();
            values.put( COLUMN_NAME, column_name  );

            //here we insert the data we have put in values
            dataBase.insert( TABLE_NAME, values );
            dialog.dismiss();           
            }  
    });  
    ad.show(); 
```

当我运行应用程序，将数据保存到数据库时，onClick() 方法出现错误？问题是什么？我相信我遵循了我在这里找到的教程中的所有步骤：http: [//myandroidsolutions.blogspot.com/2012/07/android-database-tutorial.html](http://myandroidsolutions.blogspot.com/2012/07/android-database-tutorial.html)但不知何故我得到了一个错误。

日志：

```
 10-17 20:50:11.118: E/AndroidRuntime(368): FATAL EXCEPTION: main
    10-17 20:50:11.118: E/AndroidRuntime(368): java.lang.NullPointerException
    10-17 20:50:11.118: E/AndroidRuntime(368):  at                                    com.fps.iHealthFirst.BMICalculator.viewBMISavedToast(BMICalculator.java:121)
    10-17 20:50:11.118: E/AndroidRuntime(368):  at com.fps.iHealthFirst.BMICalculator.calculateMen(BMICalculator.java:194)
10-17 20:50:11.118: E/AndroidRuntime(368):  at com.fps.iHealthFirst.BMICalculator.onClick(BMICalculator.java:143)
10-17 20:50:11.118: E/AndroidRuntime(368):  at android.view.View.performClick(View.java:2485)
10-17 20:50:11.118: E/AndroidRuntime(368):  at android.view.View$PerformClick.run(View.java:9080)
10-17 20:50:11.118: E/AndroidRuntime(368):  at android.os.Handler.handleCallback(Handler.java:587) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:47:51.500

尝试使用构建器创建对话框来设置属性并在显示它之前创建 AlertDialog，如下所示：

```
AlertDialog.Builder builder = new AlertDialog.Builder( this );
    builder.setTitle( "Successful" )
    .setMessage( "You're result is saved in the database!" )
    .setButton( "OK", new DialogInterface.OnClickListener() {           
        public void onClick( DialogInterface dialog, int which ) {
           // ...
        }
    });       
 AlertDialog ad = builder.create();
 ad.show(); 
```

# java - 将地图添加到地图集合

> ID：12934609
> 
> 赞同：0
> 
> 时间：2012-10-17T12:44:24.680
> 
> 标签：java

我收集了地图。

```
Collection<Map<String,Object>> xyz = (Collection<Map<String,Object>>) someMethod();
xyz.add(new HashMap<>()); 
```

如果我尝试向此集合添加另一个地图，它会给我运行时异常

不支持的操作。

可以做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:47:08.607

很可能是因为 someMethod() 返回了一个您无法插入的集合。如果它是“Rread only”集合，那么它将在所有插入/添加调用上抛出 UnsupportedOperation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:52:07.120

它必须是不可修改的集合。如果没有看到“someMethod()”的代码，就不可能再说下去了。

**编辑** 好的，检查 API 的 Map.values() [http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#values](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#values) ()

具体这部分。 *“该集合支持元素移除，即通过 Iterator.remove、Collection.remove、removeAll、retainAll 和 clear 操作从 map 中移除对应的映射。**不支持 add 或 addAll 操作**。”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:52:35.797

似乎 someMethod() 可能有问题。我扩展了你的例子，但它工作正常。

```
private static Collection<Map<String, Object>> someMethod() {
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("test", new Object());
        List list=new ArrayList();
        list.add(map);
        return list;
    }
    Collection<Map<String, Object>> xyz = someMethod();
    xyz.add(new HashMap<String, Object>()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T12:53:20.613

HashMap 应该有赋值吗？否则会导致编译错误。如

```
xyz.add(new HashMap<String,Object>()); 
```

# mysql - 根据变量条件选择多个单个（LIMIT 1）记录

> ID：12934611
> 
> 赞同：2
> 
> 时间：2012-10-17T12:44:25.240
> 
> 标签：mysql, sql, ruby-on-rails-3, postgresql, database-design

我有两张表，`charts`我`chart_entries`想获得当前的前 5 个图表位置（基于选择`chart_entries`给定位置的最新位置）。

有没有办法让它成为一个单一的查询？理想情况下，我的图表最多可以有 500 个位置，因此像这样进行多个查询并不可行。

在rails中，我目前正在使用这种方法`Chart.rb`

```
def table
  (1..5).each do |i|
    chart_entries.where(position: i).order('entered_at DESC').first
  end
end 
```

生成以下 SQL

```
SELECT "chart_entries".* FROM "chart_entries" WHERE "chart_entries"."chart_id" = 1 AND "chart_entries"."position" = 1 ORDER BY entered_at DESC LIMIT 1
SELECT "chart_entries".* FROM "chart_entries" WHERE "chart_entries"."chart_id" = 1 AND "chart_entries"."position" = 2 ORDER BY entered_at DESC LIMIT 1
SELECT "chart_entries".* FROM "chart_entries" WHERE "chart_entries"."chart_id" = 1 AND "chart_entries"."position" = 3 ORDER BY entered_at DESC LIMIT 1
SELECT "chart_entries".* FROM "chart_entries" WHERE "chart_entries"."chart_id" = 1 AND "chart_entries"."position" = 4 ORDER BY entered_at DESC LIMIT 1
SELECT "chart_entries".* FROM "chart_entries" WHERE "chart_entries"."chart_id" = 1 AND "chart_entries"."position" = 5 ORDER BY entered_at DESC LIMIT 1 
```

这是表结构（postgresql）

```
CREATE TABLE chart_entries (
  id integer NOT NULL,
  chart_id integer,
  entity_id integer,
  "position" integer,
  entered_at timestamp without time zone,
  locale character varying(255)
);

CREATE TABLE charts (
  id integer NOT NULL,
  name character varying(255)
); 
```

这是我的最终解决方案

```
chart_entries.where(position: [1..5]).group('position, id').having('entered_at = MAX(entered_at)').order('position ASC') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:52:29.660

这将是一个很好的候选人`GROUP BY`：

```
SELECT
    *
FROM
    chart_entries
WHERE
    chart_id = 1
    AND position BETWEEN 1 AND 5
GROUP BY
    position
HAVING
    entered_at = MAX(entered_at) 
```

使用`GROUP BY`将为每个位置选择一行。该`HAVING`子句应按日期选择最新的一个（您也可以为此使用主键，因为它*应该*是最新的 - 除非您插入自定义日期）。

无需编写每个`position`可用的个体，您可以`BETWEEN`在`WHERE`子句中使用来获取“ 1 到 5*之间*的所有位置”（或任何您的范围）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:52:21.127

使用`MAX`&`GROUP BY`

```
SELECT MAX("chart_entries".id) FROM "chart_entries" 
WHERE "chart_entries"."chart_id" = 1 AND "chart_entries"."position" IN (1,2,3,4,5) 
ORDER BY entered_at DESC 
GROUP BY  "chart_entries"."position" 
```

# ruby-on-rails - 使用不同的 link_to 路径渲染部分

> ID：12934618
> 
> 赞同：0
> 
> 时间：2012-10-17T12:44:59.090
> 
> 标签：ruby-on-rails, partial-views, renderpartial

我正在尝试呈现一个`partial`显示名称列表（我使用创建的`:resource :create`）`link_to`及其各自页面的列表。但是，我想实现两次，这样一个列表链接到**显示页面**，另一个链接到他们的**编辑页面**。

我宁愿使用一个部分来完成此操作，因为它们完全相同，除了它们的`url_path`.

页脚.html.erb：

```
<!--Show-->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <b class="icon-eye-open icon-white"></b>
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <%= render current_user.apps %>
                            </ul>
                        </li>

<!--Edit-->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <b class="icon-wrench icon-white"></b>
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <%= render current_user.apps %>
                            </ul>
                        </li> 
```

_app.html.erb：

**Show**应该有`app`并且 **Edit**应该有`edit_app_path(app)`for`link_to`的第二个参数

```
<li>
    <%= link_to app.name, app %>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:06:46.690

如果您的部分仅包含

```
 <li>
      <%= link_to app.name, app %>
    </li> 
```

我建议把它写两次，因为没有 css 类的列表对于部分恕我直言是不够的。

但是如果你真的想使用局部变量，你可以使用 Rails 3 中的局部变量来实现：

```
 <li>
        <%= link_to @app.name, @path %>
    </li> 
```

和

```
 <%= render "shared/apps", :collection => current_user.apps, :locals => {:path=> @app} %>
    <%= render "shared/apps", :collection => current_user.apps, :locals => {:path=> edit_app_path(app)} %> 
```

# spring - 支持调度程序的 Spring Batch

> ID：12934619
> 
> 赞同：0
> 
> 时间：2012-10-17T12:45:01.840
> 
> 标签：spring, scheduler, spring-batch

**场景：**系统需要每天检查数据库中的产品表，以检查每个产品的到期日期。系统需要获取到期日期与当前日期匹配的产品列表。然后，从数据库中删除这些产品。

需要考虑的事项： - 运行单个查询以检索具有匹配到期日期的产品。- 删除数据库中的这些产品。- 我们在这里谈论数以千计的产品。

**问题：**我是否需要为此创建一个受调度程序支持的 Spring Batch 作业，或者只是一个计划作业来有效地执行此操作？

因为在 Scheduled Job 中，我可以安排每天的检查和删除。它完成了。同时，我也可以使用 Spring Batch 和 Scheduler 来完成。但是，您认为更有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:32:50.467

如果您需要通过更多步骤重新开始工作，我认为春季批次将是一个明智的决定。否则，如果它真的只是一项工作，你可以手动解决重启功能......

所有这些 spring-batch 配置在您的应用程序上下文中并没有那么重，但是您需要为相应的存储库创建表。（也许你也要把那些桌子放在舞台上……）

**Spring Batch：** 如果您需要重新启动功能

**通用调度：**简单快速，不需要太多关于框架的知识

# iphone - 如何为翻译人员共享我的 iPhone 应用程序？

> ID：12934620
> 
> 赞同：1
> 
> 时间：2012-10-17T12:45:01.460
> 
> 标签：iphone, ios, translate

> **可能重复：**
> [为 iOS 创建本地化文件](https://stackoverflow.com/questions/5687339/creating-localization-files-for-ios)

我有我的英语 iPhone 公司应用程序，我们是国际公司，那么我如何通过模拟器或其他方式为所有翻译 fe 共享我的应用程序？

fe 翻译器翻译文本并需要在 iPhone 上查看效果，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:49:02.037

看起来您正在为您的应用程序搜索本地化。

请点击此链接：

[本地化示例链接 1](http://www.switchonthecode.com/tutorials/a-simple-localization-example-for-the-iphone)

[本地化示例链接 2](http://adeem.me/blog/2009/05/09/tutorial-iphone-localization-in-xib-nib-files/)

[链接 3](http://adeem.me/blog/2009/05/10/tutorial-part-2-localizing-your-iphone-application/)

最佳链接： [最佳链接...](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:54:22.070

您可以考虑将[格林威治框架](http://fadingred.github.com/greenwich/)整合到您的应用程序中。我自己没有使用过它，但最近在一次会议上看到了它的演示。它将让翻译人员对您作为临时构建分发给他们的应用程序进行更改，然后查看它们在您的应用程序中运行。

# java - “java.net.MalformedURLException：找不到协议”读取到 html 文件

> ID：12934621
> 
> 赞同：11
> 
> 时间：2012-10-17T12:45:05.460
> 
> 标签：java

我收到了一个错误：`java.net.MalformedURLException: Protocol not found`

我想阅读网络上的 HTML 文件

```
mainfest :::::   uses-permission android:name="android.permission.INTERNET"

uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" 

import com.doviz.R.id;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;
public class MainActivity extends Activity {

public String inputLine;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    String myUri = "";
    myUri = "www.tcmb.gov.tr/kurlar/today.html";

    Toast.makeText( this, "step-1 " , Toast.LENGTH_LONG).show();
    try{
            Toast.makeText( this, "step -2" , Toast.LENGTH_LONG).show();
            myUri = "www.tcmb.gov.tr/kurlar/today.html";

        URL url = new URL(myUri);

        Toast.makeText( this, "step-3" , Toast.LENGTH_LONG).show();
            final InputStream is =url.openStream();
            Toast.makeText( this, "step -4" , Toast.LENGTH_LONG).show();
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            Toast.makeText( this, "step -5 " , Toast.LENGTH_LONG).show();   
        String line;
        Toast.makeText( this, "step-6" , Toast.LENGTH_LONG).show();
        while ((line=reader.readLine())!=null){
           // page.add(line);
        }
        Toast.makeText( this, " step-7" , Toast.LENGTH_LONG).show();
    }
    catch(Exception e){
        //e.printStackTrace();
        TextView tx =(TextView)findViewById(id.TextView1); 
        tx.setText(myUri + " >>> "+  e.getMessage());
        Toast.makeText( this, "problem = " + e.getMessage() + " -- "+ e.getLocalizedMessage(), Toast.LENGTH_LONG).show();
        //System.exit(1);
    }

    Toast.makeText( this, "step -8" , Toast.LENGTH_LONG).show();

} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-17T12:47:53.613

您的 URI 不是 URI。没有协议组件。它需要 http:// 或您想要的任何其他协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T12:39:56.803

```
String myUri = "";

myUri = "www.tcmb.gov.tr/kurlar/today.html"; 
```

你的 uri 没有完成。你可以像一样写完整的 url。

```
String myUri="https://www.tcmb.gov.tr/kurlar/today.html"; 
```

# java - 在 Swing 中从一个框架移动到另一个框架

> ID：12934629
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:45:33.307
> 
> 标签：java, swing, user-interface, jframe

不幸的是，我们的团队负责人决定我们将 Swing 用于这个轻量级桌面应用程序。我以前没有使用 Swing 的经验。我将在项目的 GUI 方面工作。我已经创建了一个包含元素的框架，并在事件侦听器中编写了逻辑。现在我想在用户登录后将用户重定向到一个新框架。

我怎么做？谢谢

PS如果你能给我指出一个适合初学者的好教程，我将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:51:18.967

您的框架应该保持不变，只需创建并显示新的 JPanel 而不是旧的。

参见下面的JPanel绘画过程：

![在此处输入图像描述](../Images/cf0efe15925653baa19b2b4d7c8abb7c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T13:15:52.127

正如@Gilbert Le Blanc 指出的那样（对他+1）。在 Swing 中[，使用多个`JFrame`s](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)是不好的做法。

要完成您想要的：

*   [`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)允许动态切换组件的使用

*   或者使用`JFrame#removeAll()`并添加一个新的`JPanel`（+1 Fess）

*   尝试使用`JDialog`/`JOptionPane`然后重定向到 main`JFrame` 这里是一个很好的主题链接：[How to Make Dialogs](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T13:20:35.867

听起来您的术语混淆了。当我们听到“Frame”时，我们认为`JFrame`它相当于“Window”。所以大多数时候我们建议不要使用多个窗口，而是更改窗口的内容。内容一般用“JPanel”制作。

所以一般来说，你设置你的`JFrame`，你用这个设置内容：

```
JPanel loginPanel = new JPanel();
frame.setContentPane(loginPanel); 
```

如果您想用新面板替换您的登录面板，只需将新面板传递给该函数：

```
JPanel mainMenuPanel = new JPanel();
frame.setContentPane(mainMenuPanel); 
```

（当然你想要那些面板中的一些内容）

这是一个简单的例子：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PanelRetriever{

    Box panel1;
    JPanel panel2;

    public PanelRetriever(final JFrame frame){
        //Build the first login panel
        panel1 = Box.createVerticalBox();
        panel1.setBackground(Color.orange);
        panel1.setOpaque(true);
        panel1.add(Box.createVerticalGlue());
        panel1.add(new JTextField(10));
        JButton login = new JButton("Login");
        login.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent arg0) {
                frame.setContentPane(getPanel2());
                frame.validate();
            }});
        panel1.add(login);
        panel1.add(Box.createVerticalGlue());

        //Build second panel
        panel2 = new JPanel();
        panel2.setBackground(Color.blue);
        panel2.setOpaque(true);
        JButton logout = new JButton("Logout");
        logout.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                frame.setContentPane(getPanel1());
                frame.validate();
            }});
        panel2.add(logout, BorderLayout.CENTER);
    }

    public Container getPanel1(){
        return panel1;
    }

    public Container getPanel2(){
        return panel2;
    }

    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                PanelRetriever pr = new PanelRetriever(frame);
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(pr.getPanel1());
                frame.setPreferredSize(new Dimension(500, 400));
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T12:49:47.720

在 Swing 中，您有一个`JFrame`. 您使用`JDialog`s 从用户那里获取用户 ID 和密码输入。

这是[Oracle Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/index.html)的链接。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T12:49:01.150

您可以以与已有的方式大致相同的方式创建一个新框架；

```
MyFrame f = new MyFrame(); //MyFrame extends javax.swing.JFrame 
```

然后把它带到前面；

```
f.setVisible(true);
f.toFront(); 
```

# c++ - Qt 和正则表达式

> ID：12934639
> 
> 赞同：0
> 
> 时间：2012-10-17T12:46:25.910
> 
> 标签：c++, regex, qt, qregexp

我想用 Qt QRegExp 写简单的正则表达式

我想用“硬写”和表示任何整数来获取 Qstring 的所有子字符串`table(i, d)`，不带引号。然后使用 cap 来检索. 我提议`i``d``d`

```
 qREgExp reg ( "table(i,\\s*(\\d+)\\s*)") ; 
```

我珍惜那时的希望

```
 reg.cap(2) 
```

给我`d`这里的问题。

你会怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:16:31.497

尝试使用

```
qREgExp reg ( "\\btable\\(i,\\s*(\\d+)\\s*\\)" ); 
```

和

```
reg.cap(1) 
```

# php - Datepicker 仅在动态内容中显示一次

> ID：12934645
> 
> 赞同：0
> 
> 时间：2012-10-17T12:46:40.650
> 
> 标签：php, jquery, jquery-mobile, datepicker

使用动态内容实例化 Datepicker 时遇到一个奇怪的问题。设置：带有 PHP 注入的 HTML，与 jQuery 和 AJAX 一起编程。

我有[jquery.ui.datepicker.mobile.js](http://code.google.com/a/eclipselabs.org/p/mobile-web-development-with-phonegap/source/browse/trunk/com.mds.apg/resources/jqm/demo2/experiments/ui-datepicker/jquery.ui.datepicker.mobile.js?r=92)正在运行。

当我单击一个链接时，它会按原样加载页面。当我返回并再次单击链接时，日期选择器不显示（输入字段确实具有“hasDatepicker”类）。

现在，我注意到如果我在另一个页面上，转到带有链接的页面然后单击它，它不会显示日期选择器，甚至不是第一次。

```
$('.productSaleLink').live('click',function() {
    var prod = $(this).attr('data-params');
    $.post("product.php",{product:prod}, function(data){
        $('#productContent').html(data);
        $.mobile.changePage('#productsale', {transition: 'slide'});
        $('.currentProduct').listview();
        $('.sellLink').button();
        $(':input').textinput();
        $('.date').datepicker().css({'background-color':'red'});
    });

    return false;
}) 
```

产品.php：

```
$html = "<ul class='currentProduct' data-role='listview' data-theme='d' data-divider-theme='d'>";

while($row2 = mysql_fetch_array($products))
{
    $html .= "<li class='lis'>";
    $html .= "<h3>".$row2['brand']." ".$row2['product']."</h3>";
    $html .= "<p><span style='color:#666'>Serial:</span> <span style='font-weight:bold;'>".$row2['serial']."</span>,<span style='color:#666'> Product-ID:</span> ".$row2['product_id']."</p>";
    $html .= "<p><span style='color:#666'>Bought:</span> ".$row2['buying_date']."<span style='color:#666'> From:</span> <span style='font-weight:bold;'>".$row2['seller']."</span></p>";
    $html .= "<input class='client' style='display:inline;margin-right:5px;' type='text' name='client' id='client' value='Client' onfocus='if($(this).val()==\"Client\")$(this).val(\"\");' onblur='if($(this).val()==\"\")$(this).val(\"Client\");' />";
    $html .= "<input class='date' style='display:inline;' type='date' name='date' id='".$row2['id']."' value='Date' />";
    $html .= "<p class='ui-li-aside'>";
    $html .= "<a class='sellLink' data-params='".$row2['id']."&3p&".$_SESSION['username']."' href='sell.php' data-role='button' data-inline='true' data-theme='a'>Sell</a>";
    $html .= "</p>";
    $html .= "</li>";
}

$html .= "</ul>";
echo $html; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:06:20.080

`$(...).datepicker('destroy');`在初始化新字段之前尝试所有（或所有当前）日期选择器字段。

# php - 流浪 html 标记 - 发出 Netbeans 警告

> ID：12934651
> 
> 赞同：0
> 
> 时间：2012-10-17T12:47:10.760
> 
> 标签：php

我编写了一个函数，其中包含与站点标题相关的代码。这是功能：

首先，像上面这样的编码有什么问题吗？其次，Netbeans 在 html 标记中发出警告：Stray start html tag here。我想这是因为 html 标记包含在一个函数中，而这个函数不包含结束标记——我假设。

```
function output_headers()
{?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Appointmetns24x7</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet"  href="css/admingeneral.css"/>
script  type="text/javascript"
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js" ></script>
</head>
<body> <?php
} 
```

如果此编码方案没有任何问题，那么我将忽略 netbeans 警告并继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:17:12.590

实际的错误消息是由于`<body>`标签未关闭。Netbeans 正在收集这个并警告您 HTML 可能无效......因为它是无效的。Netbeans 无法仅通过查看此函数就知道它不应该是一个完整的 HTML 文档。

如果您必须这样做，您应该避免在不同的代码块之间拆分单独的 HTML 标记。最佳实践是确保任何输出 HTML 标记的函数也输出相应的结束标记。

但是，无论如何，您做事的方式都不理想。

您已将模板拆分为“页眉”和（可能）“页脚”功能。这种技术在几年前很常见，但现在它被认为不是特别好的做法。

更好的技术是拥有一个单独的模板文件，其中包含您的所有 HTML —— 即页眉和页脚，以及您希望动态内容所在的占位符。然后，您将动态内容位构建为字符串，并将它们提供给模板。

在最简单的形式中，这只是意味着模板是一个带有 PHP 块的纯 HTML 文件，用于`<?php echo $mainBodyCode; ?>`在适当的位置使用占位符。然后，您只需要确保填充占位符变量，并在您想要输出页面时包含它。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:53:33.187

我会坐在流浪标签是

```
xmlns="http://www.w3.org/1999/xhtml" 
```

因为你调用`<!DOCTYPE html>`的不是xhtml，所以调用xml命名空间是无效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:47:40.480

似乎如果您将根类型 html（html 标记）元素包含在函数内，然后在函数外部脚本的某个位置关闭它们，则设置了开始标记 - 然后这在 Netbeans 中被解释为错误。

有人可以选择忽略它，否则他应该避免这样编码，将 html 标头信息放在函数中。

# xamarin.android - 如何为 MvxItemTemplate 创建视图的动作监听器

> ID：12934654
> 
> 赞同：2
> 
> 时间：2012-10-17T12:47:14.580
> 
> 标签：xamarin.android, mvvmcross

我有一个包含 MvxListView 和表单的视图。我可以在我的视图代码中使用以下代码隐藏软键盘（因为这是纯粹的视图问题）

```
var editText = FindViewById<EditText>(Resource.Id.newCheckbookName);
editText.EditorAction += (object sender, TextView.EditorActionEventArgs e) =>
    {
        if (e.ActionId == ImeAction.Done)
        {
            InputMethodManager inputMgr = GetSystemService(InputMethodService) as InputMethodManager;
            inputMgr.HideSoftInputFromWindow(CurrentFocus.WindowToken, 0);
        }
        return;
   }; 
```

在我的项目模板中，我有另一个文本编辑器，并且希望具有相同的行为。但是我可以在哪里添加我的代码，因为我没有 MwxItemTemplate 的任何视图代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:32:20.490

我认为最简单的方法是在列表项中使用自定义“视图”。

**注意**：这里的“视图”指的是 Android 视图 - 不是 Model-View-ViewModel 视图 - 抱歉命名混乱！

创建自定义视图很容易...

只需创建一个自定义视图 - 例如

```
namespace Angevelle.App1.UI.Droid.Controls
{
    public class MyText : EditText
    {
        public MyText(Context context, IAttributeSet attrs)
            : base(context, attrs)
        {
            this.EditorAction += OnEditorAction;
        }

        private void OnEditorAction(object sender, EditorActionEventArgs editorActionEventArgs)
        {
            if (editorActionEventArgs.ActionId == ImeAction.Done)
            {
                // this code not tested - but something like this should work
                var imm = (InputMethodManager)Context.GetSystemService(Context.InputMethodService);
                imm.HideSoftInputFromWindow(WindowToken, 0);
            }
        }
    }
} 
```

然后，您可以在 AXML 中使用该视图，就像使用 Android 或 Mvx 视图一样：

```
<angevelle.app1.ui.droid.controls.MyText
         android:layout_height=....
     /> 
```

如果您发现`angevelle.app1.ui.droid.controls`太冗长，那么您可以使用 setup.cs 中的缩写来缩短它：

```
 protected override IDictionary<string, string> ViewNamespaceAbbreviations
    {
        get
        {
            var abbreviations = base.ViewNamespaceAbbreviations;
            abbreviations["Abv"] = "angevelle.app1.ui.droid.controls";
            return abbreviations;
        }
    } 
```

那么你可以使用：

```
<Abv.MyText
         android:layout_height=....
     /> 
```

* * *

另一种方法可能是以某种方式自定义列表...

如果您确实需要完全自定义列表视图及其适配器，那么可以使用相同类型的技术轻松完成 - 从您的 UI 项目中的 MvxBindableListView 继承：

```
public class MyListView : MvxBindableListView
{
        public MyListView(Context context, IAttributeSet attrs);
            : base(context, attrs, new MyListAdapter(context))
        {
        }
} 
```

其中 MyListAdapter 覆盖视图创建：

```
public class MyListAdapter : MvxBindableListAdapter
{
    public MyListAdapter(Context context)
        : base(context)
    {
    }

    // put your custom Adapter code here... e.g.:
    protected override MvxBindableListItemView CreateBindableView(object source, int templateId)
    {
        return new MySpecialListItemView(_context, _bindingActivity, templateId, source);
    }
} 
```

其中 MySpecialListItemView 继承自 MvxBindableListItemView 但添加了您自己的自定义功能。

使用这种方法，您的列表将从：

```
<Mvx.MvxBindableListView
      ....
     /> 
```

到：

```
<Abv.MyListView
      ....
     /> 
```

* * *

有关自定义视图的更多示例，请查看 GitHub - 例如[https://github.com/Cheesebaron中的一些 Calendar、ColorPicker、ActionBar 项目](https://github.com/Cheesebaron)

不要期望您的自定义控件在 xamarin 设计器中呈现（嗯，还没有......）

* * *

最后的两个注释...

1.  要重用代码...您可能希望以`HideSoftInputFromWindow`某种方式将该功能放在扩展方法中，以便您可以调用`anyEditText.HideOnDone()`

2.  在 Views/UIViews 上使用 Monodroid/monotouch 事件时要小心——这些事件倾向于使用本机委托/侦听器——所以有时你会发现附加一些东西来订阅一个事件可能会取消附加一些东西！通常，只要您不将 C# 事件订阅与本机侦听器/委托处理程序同时混合和匹配，您就可以了。

# r - 从类似的数据集中循环 pdf

> ID：12934655
> 
> 赞同：0
> 
> 时间：2012-10-17T12:47:17.467
> 
> 标签：r, loops, scatter

我有 60 个数据集，标记为 dataset1 到 dataset 60 所有数据集的结构都相同，但数据不同。我想从这些数据集中获得 2 个变量的散点图并导出到 60 个不同的 pdf 文件。我尝试了下面的代码，我得到了 60 个 pdf 文件，但它们都是一样的

```
 for (i in 1:60)
 {
 pdf(sprintf("C:/Users/ME/Desktop/WWD/WWD-Excel/Print/myout[%d].pdf", i))
 dataset<-read.csv(sprintf("C:/Users/ME/Desktop/WWD/WWD-Excel/CSV/dataset[%d].csv", i), header = T, sep = ",", na.strings = "NA")
 plot(dataset$hhexppc, dataset$foodshare)
 dev.off()
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:47:27.110

我建立了一个名为`tmpcsv`containsg `data1.csv`、`data2.csv`和的小型测试目录`data3.csv`，运行了这段代码......

```
setwd("~/R/misc")
for (i in 1:3) {
    pdf(sprintf("print/myout%d.pdf",i))
    dataset <- read.csv(sprintf("tmpcsv/data%d.csv",i))
    plot(y~x,data=dataset)
    dev.off()
} 
```

...并得到三个`print/myout[1-3].pdf`反映数据的文件。所以......我无法重现你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:49:16.187

因为你读进去了`dataset`，你就阴谋了`datasetpoor`。学习阅读你的作品！

# block - 在 C 中的块语句中定义的变量的生命周期

> ID：12934656
> 
> 赞同：2
> 
> 时间：2012-10-17T12:47:25.800
> 
> 标签：block, lifetime

在这个 C 代码片段中：

```
void func(void)
{
   int x=10;
   if (x>2)
   {
      int y=2;
      //block statement
      {
         int m=12;
      }
   }
   else
   {
      int z=5;
   }  
} 
```

x,y,z 和 m 何时从 func 堆栈帧中分配和释放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:52:34.333

实际分配取决于您的编译器，但许多编译器在函数开始时在堆栈上分配空间，并在函数返回之前释放它。请注意，这与变量实际可访问的时间是分开的，即直到定义它们的块的末尾。

在您的示例中，启用优化后，编译器可能不会在堆栈上为您的变量分配任何空间并简单地返回，因为它可以在编译时确定该函数实际上没有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:03:04.450

如果是自动变量（在代码块中声明的变量默认情况下是自动的），内存会在进入块时自动分配，并在退出块时自动释放（如果您使用 c 和 gcc）。您可以查看[此来源](http://www.gnu.org/software/libc/manual/html_node/Memory-Allocation-and-C.html)或[此来源](http://www.tenouk.com/ModuleZ.html)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:59:46.970

根据 C++ 规则，您应该认为每个局部变量都在其块的末尾被销毁。这是调用析构函数的时间。但是，编译器可能会决定在函数的开头/结尾一起分配/取消分配所有局部变量，这就是 VC++ 编译器所做的：

```
void func(void)
{
001413B0  push        ebp  
001413B1  mov         ebp,esp  
001413B3  sub         esp,0F0h  
001413B9  push        ebx  
001413BA  push        esi  
001413BB  push        edi  
001413BC  lea         edi,[ebp-0F0h]  
001413C2  mov         ecx,3Ch  
001413C7  mov         eax,0CCCCCCCCh  
001413CC  rep stos    dword ptr es:[edi]  
    int x=10;
001413CE  mov         dword ptr [x],0Ah  

    if (x>2)
001413D5  cmp         dword ptr [x],2  
001413D9  jle         func+3Bh (1413EBh)  
    {
        int y=2;
001413DB  mov         dword ptr [y],2  
        //block statement
        {
            int m=12;
001413E2  mov         dword ptr [m],0Ch  
        }
    }
    else
001413E9  jmp         func+42h (1413F2h)  
    {
        int z=5;
001413EB  mov         dword ptr [z],5  
    }  
} 
```

但这些是实现细节，编译器可以通过另一种方式自由调整堆栈指针。

因此，没有定义实际的堆栈指针调整，但构造函数/析构函数调用完全根据函数内部块完成。当然，您不能在其块之外使用变量 - 这不是编译的。尽管此时可能会分配堆栈空间。

# php - 为什么我的 php 脚本不起作用？

> ID：12934660
> 
> 赞同：0
> 
> 时间：2012-10-17T12:47:31.807
> 
> 标签：php, forms, html, web

编辑：显然我必须付费才能在他们的网站上注册另一个域才能拥有电子邮件功能。很抱歉浪费了时间，并感谢代码修复。

我对php没有任何经验。我才刚刚开始弄清楚。我正在尝试让我的表格将输入的信息发送到我的电子邮件。我设置了一个 else 标签，但这就是发生的一切。如果您发现任何错误，请告诉我。我真的希望这个工作。自己看：[网站](http://organizationxiii.co.nf/feedback.html)代码是：

**HTML：**

```
<form action="post_comment.php" method="post" id="commentform">

<label for="comment_author" class="required">Your Name</label>
<input name="name" id="name" tabindex="1" required="required"><br/><br/>

<label for="email" class="required">Your Email</label>
<input type="email" id="email" name="email" id="email" value="" tabindex="2"   required="required"><br/><br/>

<label for="comment" id="comment" class="required">Your Message</label><br/>

<textarea name="comment" rows="10" tabindex="4"  required="required"></textarea><br/>
<input id="submit" name="submit" type="submit" value="Submit Comment" />
<input id="send" name="send" type="hidden" value="1" />

</form> 
```

**PHP：**

```
 <?php
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['comment'];
    $from = 'From: '. $email; 
    $to = 'powersjesse@yahoo.com'; 
    $subject = 'WEBSITE';

    $body = "From: $name\n E-Mail: $email\n Message:\n $message";

    if ($_POST['send'] == "1") { 
        if (mail($to, $subject, $body, $from)) { 
        echo '<p>Your message has been sent!</p>';
    } else { 
        echo '<p>Something went wrong, go back and try again!</p>'; 
    }}
?> 
```

`Something went wrong, go back and try again!`当我尝试提交表单时， 我得到了。**更新了代码。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:51:19.507

```
<form action="post_comment.php" method="post" id="commentform"> 
```

而不是方法=“请求”

编辑添加 [http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1)

编辑（响应编辑的问题代码...）添加[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

您的 mail() 参数顺序错误；应该是 $to, $subject, $message [, $additional_headers, etc.]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T12:52:21.600

```
<form action="post_comment.php" method="get" id="commentform">

<label for="comment_author" class="required">Your Name</label>
<input name="name" id="name" tabindex="1" required="required"><br/><br/>

<label for="email" class="required">Your Email</label>
<input type="email" id="email" name="email" id="email" value="" tabindex="2"   required="required"><br/><br/>

<label for="comment" id="comment" class="required">Your Message</label><br/>

<textarea name="comment" rows="10" tabindex="4"  required="required"></textarea><br/>
<input id="submit" name="submit" type="submit" value="Submit Comment" />

</form> 
```

方法必须是 get/post

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T12:53:20.540

您的“提交”字段是提交表单的 HTML 按钮，不会添加到表单中。添加另一个不可见的输入字段：

```
<input id="send" name="send" type="hidden" value="1" /> 
```

并通过以下方式访问 PHP 中的字段：

```
if ($_REQUEST['send'] == "1") { 
```

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T13:10:43.150

根据您的代码：

```
 if ($_REQUEST['submit']) {               
        if (mail($to, $subject, $body, $from))
        { 
           echo '<p>Your message has been sent!</p>';
        }
        else
        { 
           echo '<p>Something went wrong, go back and try again!</p>'; 
        }
   } 
```

获取以下输出：

> 出了点问题，回去再试一次！

意味着`mail()`函数出了问题，它返回`false`，否则我们会看到该`Your message has been sent!`消息。

该`mail()`函数的问题是它没有显示任何错误或警告，它只是返回`false`。

**如何定位问题？**

尝试编写如下内容：

```
 if(mail("your.working.email@gmail.com" , "A subject for example" , "the content of this email","From: no-reply@yourdomain.com"))
     echo "We are good";
    else
     echo "Something not workin"; 
```

如果它有效，请在声明它们后立即检查任何已发布变量的值。

```
 echo $name;
   echo $email;
   echo $message; 
```

确保这些变量不为空，并且该`$email`变量包含合法且经过验证的电子邮件地址。

如果基本`mail`用法不起作用 - 这与您的`php settings`( `php.ini`) 或您的服务器的限制有关（联系您的托管公司）。

**EDIT1：**关于您的html表单，`type`属性`input fields`应该是`text`而不是`name`或`email`。

而不是`<input type="email"...` 写`<input type="text"...`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T12:51:27.937

的`name`textarea 是`comment`并且您`message`在这一行中使用它，

```
 $message = $_REQUEST['message']; 
```

需要是，

```
 $message = $_REQUEST['comment']; 
```

还有，表单提交的方法，需要是`POST`这样的，

```
<form action="post_comment.php" method="post" id="commentform"> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T12:53:45.063

请更改表格如下

```
<form action="post_comment.php" method="post" id="commentform"> 
```

在表单中，您只能使用 get/post

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-17T12:58:37.530

试试这个

```
<form action="post_comment.php" method="post" id="commentform">

<label for="comment_author" class="required">Your Name</label>
<input name="name" id="name" tabindex="1" required="required"><br/><br/>

<label for="email" class="required">Your Email</label>
<input type="email" id="email" name="email" id="email" value="" tabindex="2"    required="required"><br/><br/>

<label for="comment" id="comment" class="required">Your Message</label><br/>

<textarea name="comment" rows="10" tabindex="4"  required="required"></textarea><br/>
<input id="submit" name="submit" type="submit" value="Submit Comment" /> 
```

并在您的帖子页面中..

```
if ($_SERVER['REQUEST_METHOD'] === 'POST')
{
    $name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$from = 'From: '. $email; 
$to = 'powersjesse@yahoo.com'; 
$subject = 'WEBSITE';

$body = "From: $name\n E-Mail: $email\n Message:\n $message";

$headers = "From: $from \r\n";
//$headers .= "Reply-To: $visitor_email \r\n";

mail($to, $subject, $body,$headers);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-17T13:06:41.500

-> 使用***POST***而不是***REQUEST***

->**评论**更改为**消息**

**HTML**

```
<form action="post_comment.php" method="post" id="commentform">
<label for="comment_author" class="required">Your Name</label>
<input name="name" id="name" tabindex="1" required="required"><br/><br/>
<label for="email" class="required">Your Email</label>
<input type="email" id="email" name="email" id="email" value="" tabindex="2"  required="required"><br/><br/>
<label for="comment" id="comment" class="required">Your Message</label><br/>
<textarea name="message" rows="10" tabindex="4"  required="required"></textarea><br/>
<input id="submit" name="submit" type="submit" value="Submit Comment" />
</form> 
```

**PHP**

```
<?php
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];
    $from = 'From: '. $email; 
    $to = 'powersjesse@yahoo.com'; 
    $subject = 'WEBSITE';

    $body = "From: $name\n E-Mail: $email\n Message:\n $message";

    if ($_POST['submit']) {               
        if (mail($to, $subject, $body, $from)) { 
        echo '<p>Your message has been sent!</p>';
    } else { 
        echo '<p>Something went wrong, go back and try again!</p>'; 
    }}
?> 
```

# android - Android获取当前日期并在TextView中显示

> ID：12934661
> 
> 赞同：10
> 
> 时间：2012-10-17T12:47:33.657
> 
> 标签：android, date

我不知道下面的代码有什么问题 -

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView tv = (TextView) findViewById(R.id.textView1);

    String dt;
    Date cal = (Date) Calendar.getInstance().getTime();
    dt = cal.toLocaleString();
    tv.setText(dt.toString());

} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-17T12:49:13.487

我建议：

```
long date = System.currentTimeMillis(); 

SimpleDateFormat sdf = new SimpleDateFormat("MMM MM dd, yyyy h:mm a");
String dateString = sdf.format(date);   
tvDisplayDate.setText(dateString); 
```

它以以下示例格式显示

`Mon Jan 5, 2009 4:55 PM`

您可以使用任何您想要的格式 - 选项可以[在 Oracle中找到](https://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-17T12:56:56.640

使用此代码：

```
tvDisplayDate = (TextView) findViewById(R.id.tvDate);

    final Calendar c = Calendar.getInstance();
    yy = c.get(Calendar.YEAR);
    mm = c.get(Calendar.MONTH);
    dd = c.get(Calendar.DAY_OF_MONTH);

    // set current date into textview
    tvDisplayDate.setText(new StringBuilder()
    // Month is 0 based, just add 1
            .append(yy).append(" ").append("-").append(mm + 1).append("-")
            .append(dd)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T12:50:37.840

以下解决方案可能会有所帮助 -

```
final Calendar c = Calendar.getInstance();
mYear = c.get(Calendar.YEAR);
mMonth = c.get(Calendar.MONTH);
mDay = c.get(Calendar.DAY_OF_MONTH);

updateDisplay();

private void updateDisplay() {
    mDateDisplay.setText(
        new StringBuilder()
        // Month is 0 based so add 1
        .append(mMonth + 1).append("-")
        .append(mDay).append("-")
        .append(mYear).append(" "));
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-22T20:25:32.127

考虑使用 TextClock，因为它会为您处理更新。有关更多信息，请参阅文档[Docs](https://developer.android.com/reference/android/widget/TextClock.html)。[如果您的目标只是显示当前时间和日期， AnalogClock](https://developer.android.com/reference/android/widget/AnalogClock.html)和[DigitalClock](https://developer.android.com/reference/android/widget/DigitalClock.html)也很有用

```
 <TextClock
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="30sp"
    android:format24Hour="MMM,yyyy\n\thh:mm"/> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T12:49:41.023

```
 TextView tv = (TextView) findViewById(R.id.textView1);
    SimpleDateFormat dfDate_day= new SimpleDateFormat("E, dd/MM/yyyy HH:mm:ss");
    String dt="";
    Calendar c = Calendar.getInstance(); 
    data=dfDate_day.format(c.getTime());
    tv.setText(dt); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-17T12:59:16.673

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
String currentDateandTime = sdf.format(new Date());
tv.setText(currentDateandTime); 
```

我就是这样做的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-09T03:45:47.810

笔记*：

```
import java.text.DateFormat;
import java.util.Date;

// Donot import "import java.sql.Date;"

TextView tv = (TextView) findViewById(R.id.textView1);
String ct = DateFormat.getDateInstance().format(new Date());
tv.setText(ct); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-27T06:00:37.480

如果您想生成一个在按钮单击时显示当前时间的 toast，请使用此代码。

```
bt.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Calendar c = Calendar.getInstance();
            hour = c.get(Calendar.HOUR_OF_DAY);
            min = c.get(Calendar.MINUTE);
            int ds = c.get(Calendar.AM_PM);
            if(ds==0)
            AM_PM="pm";
            else
            AM_PM="am";

            Toast.makeText(MainActivity.this, ""+hour+":"+min+AM_PM, Toast.LENGTH_SHORT).show();

        }
    }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-04T05:34:27.447

```
Calendar c = Calendar.getInstance();
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String formattedDate = df.format(c.getTime());
System.out.println("Currrent Date Time : "+formattedDate); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-10-16T06:57:03.427

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");    
String currentDateandTime = sdf.format(new Date());    
tv.setText(currentDateandTime); 
```

# ruby-on-rails - 需要一个关于 Rails 的基本简单教程，没有测试，没有脚手架请

> ID：12934665
> 
> 赞同：1
> 
> 时间：2012-10-17T12:47:47.217
> 
> 标签：ruby-on-rails, ruby

我从设计 DRY 的角度理解模型、视图和控制器。我将如何使用最佳实践在 Rails 中创建基本计算器。网上有太多关于脚手架和测试的内容，这完全让我感到困惑。我不知道在哪里使用哪些变量以及如何决定它们的去向和全部。我是个菜鸟。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:57:29.793

对于基础知识，阅读[rails guides](http://guides.rubyonrails.org/index.html)非常有用。如果还不够，您可以在[railscasts中查看 Ruby on Rails 截屏视频](http://railscasts.com/)

# .htaccess - 在 htaccess 中使用 br 标记重定向 URL

> ID：12934666
> 
> 赞同：0
> 
> 时间：2012-10-17T12:47:50.040
> 
> 标签：.htaccess, redirect, rewrite

有时，当我们的网址自动从其他网站链接时，会在我们的网址中插入 br 标签。它触发一个 404 页面。我想删除那个标签。例如，它看起来像这样：

```
http://www.healthyeatingstartshere.com/moti<br />vation/healthy-eating-routine 
```

到目前为止，这是我要解决的问题，但没有骰子：

```
RewriteRule ^(.*)<br%20/>(.*)$ http://www.healthyeatingstartshere.com/$1$2 [L,R=301] 
```

有什么想法吗？

非常感谢，菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:32:50.780

用反斜杠转义空格

```
RewriteRule ^(.*)<br\ />(.*)$ http://www.healthyeatingstartshere.com/$1$2 [L,R=301] 
```

# sqlite - 如何在 sqlite 中使用 glob 并查找大括号？

> ID：12934671
> 
> 赞同：2
> 
> 时间：2012-10-17T12:48:02.477
> 
> 标签：sqlite, glob, brackets

我想像这样使用 sqlite3 查询：

`select * from Log where Desc glob '*[ _.,:;!?-(){}[]<>''"]OK';`

查找以 OK 结尾的记录，例如
`OK`
`asdasda _OK`
`asda (OK`
`dasda [OK`
`dasda ]OK`

但是当我在查询中使用后括号时，这让我失败了`...glob '*[ []]OK';`

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:37:16.590

隐藏在源代码中的注释说：

> 通配规则：
> 
> `*` 匹配任何零个或多个字符的序列。
> 
> `?` 只匹配一个字符。
> 
> `[...]` 匹配所附字符列表中的一个字符。
> 
> `[^...]` 匹配一个不在封闭列表中的字符。
> 
> 使用`[...]`and`[^...]`匹配，可以将一个字符作为or`]`之后的第一个字符包含在列表中。可以使用 指定字符范围。示例： 匹配任何单个小写字母。要匹配 a ，请将其设为列表中的最后一个字符。`[``^``-``[a-z]``-`

因此，您的记录可以通过`... glob '*[] _.,:;!?(){}[<>''"-]OK'`.

# python - 运行 Celery 的新贵工作不会停止所有工作进程

> ID：12934672
> 
> 赞同：0
> 
> 时间：2012-10-17T12:48:05.877
> 
> 标签：python, django, ubuntu, celery, upstart

我写了一个 Upstart 工作来在我的 Ubuntu 服务器上运行 celery。这是我的配置文件，名为`celeryd.conf`

```
# celeryd - runs the celery daemon
#
# This task is run on startup to run the celery daemon

description "run celery daemon"

start on startup
expect fork
respawn

exec su - trakklr -c "/app/trakklr/src/trakklr celeryd --events --beat --loglevel=debug --settings=production" 
```

当我执行`sudo service celeryd start`时，celeryd 进程启动得很好，所有 x 个工作进程都启动得很好。

..但是当我执行时`sudo service celeryd stop`，它会停止大部分进程，但有几个进程处于挂起状态。

为什么会这样？我正在使用芹菜 2.5.3。

* * *

这是 Github 跟踪器的一个问题。

[https://github.com/celery/django-celery/issues/142](https://github.com/celery/django-celery/issues/142)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:02:28.967

我仍然使用 init.d 来运行 celery，所以这可能不适用。考虑到这一点，停止 celery 服务会向 celery 发送 TERM 信号。这告诉工人不要接受新任务，但不会终止现有任务。因此，根据您的任务执行所需的时间，您可能会在告诉 celery 停止后的一段时间内看到任务。最终，除非您遇到其他问题，否则它们将全部关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:29:42.280

我无法弄清楚这一点，但这似乎是我的旧芹菜版本的问题。我在他们的问题跟踪器上发现了这个问题，我猜它指向了同样的问题：

[https://github.com/celery/django-celery/issues/142](https://github.com/celery/django-celery/issues/142)

我将 celery 和 django-celery 升级到 3.xx 版本，这个问题就消失了。

# java - 给定一个 java.lang.reflect.Method 对象，是否有一种简单的方法来获取它覆盖的方法的层次结构

> ID：12934675
> 
> 赞同：0
> 
> 时间：2012-10-17T12:48:11.837
> 
> 标签：java, reflection

给定一个 java.lang.reflect.Method 对象，是否有一种简单的方法来获取它覆盖的方法的层次结构。例如：

```
class A {
    public void someMethod() { ... }
}

interface B {
    public void someMethod();
}

class C extends A {
    public void someMethod() { ... }
}

class D extends C implements B {
    public void someMethod() { ... }
} 
```

给定 D#someMethod 的 java.lang.reflect.Method 对象，我是否可以轻松获取树：

```
D#someMethod
 |
 +- C#someMethod
 |   |
 |   +- A#someMethod
 |
 +- B#someMethod 
```

我猜一定有一种简单的方法可以做到这一点，也许是现有的图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:29:57.070

最终没有找到有用的库，所以按照 assylias 的评论，只是简单地使用反射来遍历继承并构建树（包括超类和接口）。我没有构建方法树，而是构建随后可以“遍历”的类树。

# oracle - plsql存储过程PLS-00103：遇到符号“SELECT”

> ID：12934680
> 
> 赞同：1
> 
> 时间：2012-10-17T12:48:39.557
> 
> 标签：oracle, plsql

我试图在 Oracle 11G 中创建一个存储过程，但我得到了这个异常：

```
Error(7,18): PLS-00103: Encountered the symbol "SELECT" when expecting one of the following:     ( - + case mod new not null <an identifier>    <a double-quoted delimited-identifier> <a bind variable>    continue avg count current exists max min prior sql stddev    sum variance execute forall merge time timestamp interval    date <a string literal with character set specification>    <a number> <a single-quoted SQL string> pipe    <an alternatively-quoted string literal with character set specification>    <an alternat
Error(9,65): PLS-00103: Encountered the symbol ")" 
```

这是我的代码：

```
create or replace
procedure PM_LOG_IN_SP(user_name_ in nvarchar2,  password_ in nvarchar2, res out int)
is
begin
    IF  user_name_ is not null and password_ is not null then

         res := (SELECT count(*)
          FROM HR.SYSTEM_USERS_TBL S
          WHERE S.USER_NAME = user_name_ AND S.PSWD = password_;)
    ELSE
          RES :=0;
    END IF;
end PM_LOG_IN_SP; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:43:30.377

如果要从查询中设置变量，则应使用`select into`子句：

```
create or replace
procedure PM_LOG_IN_SP(user_name_ in nvarchar2,  
                       password_ in nvarchar2, 
                       res out int)
is
begin
    IF  user_name_ is not null and password_ is not null then

          SELECT count(*)
          into res 
          FROM HR.SYSTEM_USERS_TBL S
          WHERE S.USER_NAME = user_name_ AND S.PSWD = password_;
    ELSE
          RES :=0;
    END IF;
end PM_LOG_IN_SP; 
```

# file - 将 fread 与 std::vector 一起使用时出错

> ID：12934681
> 
> 赞同：1
> 
> 时间：2012-10-17T12:48:43.803
> 
> 标签：file, vector, error-handling, fread

第一次执行成功，没有任何错误，但是当它创建`Data.bin`时，我在使用`fread`. 对不起，我不知道怎么问，所以请看程序。我评论了错误声明。

```
#include<iostream>
#include<vector>
using namespace std;

typedef struct myStuff
{
    int cdno;
    string content,des;
}MS;

int main()
{
    vector<MS> data;
    int i=0;
    string in;
    FILE *fr=NULL,*fw=NULL;
    fr=fopen("Data.bin","rb");

    //----------------------------------------------------------------------
    if(fr!=NULL)
    {
        do
        {
            data.resize(++i);
        }while( fread(&data[i-1],sizeof(MS),1,fr) ); //ERROR
        fclose(fr);
    }
    else
        data.resize(++i);

    //----------------------------------------------------------------------
    while(1)
    {
        cout<<"Enter x to exit or c to continue updating data: ";
        cin>>in;
        if(in=="x"||in=="X")
        {
            fw=fopen("Data.bin","wb");
            fwrite(&data[i],sizeof(MS),i,fw);
            fclose(fw);
            exit(0);
        }
        else if(in=="c"||in=="C")
        {
            cout<<"Enter CD no: ";
            cin>>data[i-1].cdno;
            cout<<"Enter Contents: ";
            cin>>data[i-1].content;
            cout<<"Enter Description: ";
            cin>>data[i-1].des;
            data.resize(++i);
        }
        else
            cout<<"Try Again..."<<endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:09:30.913

您不应该使用`sizeof(string)`或 sizeof 包含字符串的结构，这是没有意义的，它只会为您提供类字符串的编译时间（静态）大小。您应该改用`string.size()`which 返回字符串的动态大小。

# ios - Ipad 旋转 - 只移动状态栏

> ID：12934683
> 
> 赞同：1
> 
> 时间：2012-10-17T12:48:59.120
> 
> 标签：ios, ipad, rotation

我正在开发一些游戏，我正在处理 Ipad 旋转。我需要在旋转时做的只是移动状态栏位置，但视图本身不需要改变！

我怎样才能做到这一点？谢谢

# jquery - 将 vb.net 会话变量传递给 jquery

> ID：12934687
> 
> 赞同：2
> 
> 时间：2012-10-17T12:49:05.250
> 
> 标签：jquery, vb.net

我正在尝试将会话变量传递给 jquery。基本上我想要的是当我单击“btnVenSUSend”按钮时，我想要弹出一个警告框并让用户知道他们的信息已被提交。当它通过代码将信息写入数据库时​​，我正在填充会话变量。即使表格不完整，我也遇到了弹出警报框的问题。如果我的会话变量 = 发送，我只想要警报。

这是我的jQuery：

```
<script type="text/javascript">
    $(document).ready(function ($) {
        $("#btnVenSUSend").click(function ($) {
            var mySend = '<%=Session("mySend") %>'
            if (mySend == "send") {
                alert("Your request has been submitted, you will be notified when the process is complete.");
            }
        });
    });

</script> 
```

这是我的代码。如果 VenType 的条件正确，则通过并设置变量。这是可行的，因为我可以单步执行代码并查看结果。

```
If VenType = "E" Then
        str = "send"
        Session("mySend") = str

        Dim con As New SqlConnection(ConfigurationManager.ConnectionStrings("VendorPortalConnectionString").ToString())
        Dim cmdO As New SqlCommand("Select UserID, Password FROM VendorMaster where UserID = '" & loggedIn & "'", con)
        con.Open()

        Dim myReader As SqlDataReader
        myReader = cmdO.ExecuteReader()

        Dim UserID As String = ""
        Dim psw As String = ""

        If myReader.HasRows Then
            Do While myReader.Read
                UserID = myReader.GetString(0)
                psw = myReader.GetString(1)
            Loop
        Else
        End If
        con.Close()
        myReader.Close() 
```

只是我的 jquery 不起作用。我的 jquery 不在外部 js 中。它在我的 .aspx 页面的头部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T16:06:13.617

我可以看到您在 jQuery 代码的 mySend var 声明中缺少分号。添加时它是否有效（见下文）？

```
var mySend = '<%=Session("mySend") %>'; 
```

# jdbc - 无法在弹性搜索中为 jdbc River 的 sql 查询中指定动态时间范围

> ID：12934688
> 
> 赞同：0
> 
> 时间：2012-10-17T12:49:07.843
> 
> 标签：jdbc, lucene, elasticsearch

我正在使用弹性搜索的 jdbc 河来索引 mysql 表数据。

我的河：

```
 curl -XPUT 'localhost:9200/_river/river_mention_reports/_meta' -d '{
    "type" : "jdbc",
    "jdbc" : {
        "driver" : "com.mysql.jdbc.Driver",
        "url" : "jdbc:mysql://localhost:3306/ESTest1_development",
        "user" : "root",
        "password" : "password",
        "sql" : "select * from table where creation_time >= (NOW() - INTERVAL 2 MINUTE)",
        "poll" : "2m",
        "versioning" : false
    },
    "index" : {
        "index" : "monitoring",
        "type" : "mention_reports"
    }
}' 
```

我在河中指定的 SQL 查询是：

`select * from table where creation_time >= (NOW() - INTERVAL 2 MINUTE)`

现在的问题是，每次轮询后的河流都会删除在查询中指定的时间范围（当前减去 2 分钟）之外索引的数据，而不是向索引中添加新数据。我指定时间范围的原因是因为我不希望河流一次又一次地重新索引整个数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:18:40.790

您需要在您的河流配置的“jdbc”部分中指定**“digesting”：false**（默认为true），现在您有“versioning”：false。顺便说一句，无论如何，“版本控制”默认为 false，实际上应该在“索引”部分，而不是“jdbc”部分。

# c# - 如何将任何对象类型转换为实际类型

> ID：12934689
> 
> 赞同：1
> 
> 时间：2012-10-17T12:49:10.573
> 
> 标签：c#, .net

有没有办法`object`在运行时对某个特定类型进行类型转换？有可能吗？

```
public static void TryTypeCasting(object obj)
{
    Type type = obj.GetType();
    // Can I use this "type" variable somehow to typecast "obj" to its actual type?
} 
```

我正在使用 C# 4.0。

* * *

**编辑1：**

感谢大家的投入。

我可能正在努力实现一些不可能的事情。但我发布这个问题是为了获得专家对此的看法，并了解在 C# 4.0 中是否可以实现这样的事情。

这是一个实时问题：

在我们的产品中，我们的客户端 API（方法）序列化`Employee`派生自我们的实体类的“某些”类（例如 ）的实例`Person`。该序列化实例（即字符串值）通过一些中间类发送到服务器端 API（一种负责将字符串反序列化为适当类的实例的方法）。所以，在服务器端，API 得到的唯一东西就是一个字符串。

但是，在序列化时，自定义序列化程序总是添加类的完全限定名称（其实例正在被序列化）作为结果输出的第一行。所以在服务器端，在阅读第一行时，我知道`Employee`字符串应该被反序列化到的类（即在这种情况下）。

此外，我们调用一个接受类型参数的Web 服务方法（*我不允许更改*`Person`） 。

现在，在这个阶段反序列化之后，我有一个`Employee`存储在类型变量中的实例`object`。但即使实例可用，我也无法将它作为参数传递，直到我将其类型转换为`Employee`. 我怎样才能做到这一点？

此处提供了示例代码：

```
 public static void Deserialize(string serializedObject)
        {
            StringReader stringReader = new StringReader(serializedObject);

            // Read the first line to know class and assembly details
            string firstLine = stringReader.ReadLine();
            string[] assemblyAndClassDetails = firstLine.Split(new[] { ',' }, StringSplitOptions.None);
            string className = assemblyAndClassDetails[0];
            string assemblyName = assemblyAndClassDetails[1];

            // Remove the first line before passing it to the serializer
            serializedObject = serializedObject.Remove(0, firstLine.Length);

            // Know the type of the serialized instance
            Type typeToBeDeserializedTo = Type.GetType(className);

            DataContractJsonSerializer dataContractJsonSerializer = new DataContractJsonSerializer(typeToBeDeserializedTo);
            using(MemoryStream memoryStream = new MemoryStream(Encoding.ASCII.GetBytes(serializedObject)))
            {
                memoryStream.Position = 0;
                object deserializedObject = dataContractJsonSerializer.ReadObject(memoryStream);

                // NOW I WANT TO call a method that accepts an argument of type `Person` How can I do this?
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:55:52.487

不，这是完全不可能的（当然，除非特定类型在编译时已知，在这种情况下，您可以例如硬编码强制转换）。

它永远不可能是任何其他方式，因为类型转换意味着编译器完全知道结果的类型是什么。编译器怎么可能知道只能在运行时确定的东西？

每当这个问题出现时（而且它经常出现），答案是“可能有一个适合您的情况的解决方案，既不涉及这种假设类型的演员也不涉及反射”。如果您更详细地说明您的情况，我们可以建议这样的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T12:56:12.050

您不能在运行时执行此操作，因为您不知道对象的实际类型。此信息仅在运行时才知道，而不是在编译时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:02:39.647

假设您可以将对象分配给正确类型的变量（我不确定这是否可能），您仍然无法在方法中针对它编写任何代码，因为编译器在编译时不知道该类型是什么。

一些选择是：

*   声明可以处理您希望接受的可能类型的方法的[重载](http://csharp.net-tutorials.com/classes/method-overloading/#.UH6syW_A-zk)

*   尝试转换为方法中的可能类型

    `if ((var t1 = obj As type1) != null)` `Do something with t1`

*   使用[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T13:03:13.983

正如其他人所说，这是不可能的。

但是[鸭子打字](http://en.wikipedia.org/wiki/Duck_typing)呢？

```
((dynamic)yourObject).SomeMethod(); 
```

类型检查延迟到代码的执行。

请注意，应谨慎使用强类型语言（如 C#）中的鸭子类型，并针对特定的用例集。**不要*`dynamic`*到处使用关键字来代替强类型！**

# entity-framework - T4 模板和 EF 以及来自数据库模式应用程序的代码生成器

> ID：12934693
> 
> 赞同：0
> 
> 时间：2012-10-17T12:49:19.107
> 
> 标签：entity-framework, code-generation, t4

我目前正在放置一个进程（使用 Windows 应用程序），可以通过将此应用程序指向数据库表来生成 EF 的 POCO 对象类。

我见过 T4 模板和 VS Addin 有助于在 VS 中实现这一点。但是它需要 VS 解决方案上的 T4 模板文件。我们不想走这条路。我们想要的只是将这个应用程序生成的类复制到解决方案中，以便它可以使用。

T4 模板的工作方式是，只要您对模板进行更改，它就会应用于 Class 文件。我想做的是将新应用程序指向数据库并说表 A、B、C。该应用程序将读取列、类型、关系并为文件夹创建相应的类。开发人员然后复制这些类并粘贴到 VS 解决方案中。长期计划然后扩展此应用程序以编写存储库类。

我有一个粗略的想法，但不是一个清晰的画面。有没有人对我如何才能实现这一目标有任何指示？

谢谢

编辑：这纯粹是首先使用 EF 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:51:46.673

您似乎要问的是“我的 T4 模板可以存在于我的输出代码的单独解决方案中吗？”。

是的。你可以这样做。

# c - C strcpy 和 char

> ID：12934694
> 
> 赞同：0
> 
> 时间：2012-10-17T12:49:23.580
> 
> 标签：c, string, strcpy

我需要编写一个代码来实现这一点：您输入姓名和名字以及成绩。仅对于 >= 10 的成绩，您使用反向排序打印学生的姓名和名字。示例：

```
鲍勃
迪伦
12

罗伯特
帕特
9

克里斯
斯特罗齐
15

乔什
站
11

```

会给 ：

> 克里斯·斯特罗齐 15 鲍勃·迪伦 12 乔什·斯塔 11.

我的错误在 strcpy 行：

> 函数“strncpy”的参数太少| assing 'strncpy' 的参数 1 使指针从整数而不进行强制转换

```
 char tab_nom[N][M] ;
 char tab_prenom[N][M] ;
 float tab_notes[N];
 char tmp_n, tmp_p;
 int i,j,tmp;

for (i=0;i<N;i++)
 {
  printf("Saisissez le nom %d :", i+1);
  scanf("%s",tab_nom[i]);
  printf("Saisissez le prenom %d :", i+1);
  scanf("%s",tab_prenom[i]);
  printf("Saisissez la note %d :", i+1);
  scanf("%f",&tab_notes[i]);
  }

 for (i=0;i<N;i++)
 {
      for(j=0; j< N-1 ; j++)
      {
          if (tab_notes[j] < tab_notes[j+1])
          {
              tmp=tab_notes[j];
              tab_notes[j]=tab_notes[j+1];
              tab_notes[j+1]=tmp;

              strcpy(tmp_n,tab_nom[j]);
              strcpy(tab_nom[j],tab_nom[j+1]);
              strcpy(tab_nom[j+1],tmp_n);

              strcpy(tmp_p,tab_prenom[j]);
              strcpy(tab_prenom[j],tab_prenom[j+1]);
              strcpy(tab_prenom[j+1],tmp_p);

          }
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:56:54.190

`temp_n`是单人`char`。`strcpy`需要`char*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:51:28.140

```
strncpy(tmp_n, tab_nom[j]);
/* ... */
strncpy(tmp_p,tab_prenom[j]); 
```

您正在尝试以单个字符复制字符串...此外`strncpy`还有第三个参数 ( `size`)。试试`strcpy`吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:52:12.163

首先，您正在使用`strncpy`而不是`strcpy`.

strncpy的定义如下

```
char *strncpy(char *restrict s1, const char *restrict s2, size_t n); 
```

所以我认为您想将代码更改为

```
strncpy(tmp_n,tab_nom[j],sizeof(tmp_n)); 
```

否则，您可以`strcpy(tmp_n, tab_nom[j]);`在没有任何编译错误的情况下使用。

# python - 从 JSON 输出中选择字段

> ID：12934699
> 
> 赞同：42
> 
> 时间：2012-10-17T12:49:38.713
> 
> 标签：python

使用 Python，如何将字段提取`id`到变量中？基本上，我要改变这个：

```
{
    "accountWide": true,
    "criteria": [
        {
            "description": "some description",
            "id": 7553,
            "max": 1,
            "orderIndex": 0
        }
     ]
} 
```

类似于

```
print "Description is: " + description
print "ID is: " + id
print "Max value is : " + max 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-17T12:52:29.020

假设您将该字典存储在一个名为 values 的变量中。要进入`id`变量，请执行以下操作：

```
idValue = values['criteria'][0]['id'] 
```

如果该 json 在文件中，请执行以下操作来加载它：

```
import json
jsonFile = open('your_filename.json', 'r')
values = json.load(jsonFile)
jsonFile.close() 
```

如果该 json 来自 URL，请执行以下操作来加载它：

```
import urllib, json
f = urllib.urlopen("http://domain/path/jsonPage")
values = json.load(f)
f.close() 
```

要打印所有标准，您可以：

```
for criteria in values['criteria']:
    for key, value in criteria.iteritems():
        print key, 'is:', value
    print '' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T12:55:41.840

假设您正在处理输入中的 JSON 字符串，您可以使用`json`包解析它，请参阅[文档](http://docs.python.org/library/json.html)。

在您发布的具体示例中，您需要

```
x = json.loads("""{
 "accountWide": true,
 "criteria": [
     {
         "description": "some description",
         "id": 7553,
         "max": 1,
         "orderIndex": 0
     }
  ]
 }""")
description = x['criteria'][0]['description']
id = x['criteria'][0]['id']
max = x['criteria'][0]['max'] 
```

# css - 匹配带有标题背景的导航按钮

> ID：12934708
> 
> 赞同：1
> 
> 时间：2012-10-17T12:50:03.750
> 
> 标签：css, html

我在标题中有一个导航，标题从左到右有一个渐变。导航栏有另一个背景。导航按钮需要与该位置的标题背景相同。

```
<header>
    <nav>
        <ul>
            <li>button1</li>
            <li>button2</li>
            <li>button3</li>
        </ul>
    </nav>
</header> 
```

1.  标题有渐变。
2.  导航有一种颜色。
3.  li需要和header背景在同一个地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:19:29.920

您可以使整个导航透明并在列表元素上使用实心边框。

# [*演示*](http://dabblet.com/gist/3906821)

您可以将其与`border-radius`按钮一起使用，也可以与标题的动画背景一起使用。

## 基本理念

假设您有一个标题结构，如：

```
<header>
    <nav>
        <ul>
            <li><a href=''>Products</a></li>
            <li><a href=''>Services</a></li>
            <li><a href=''>Technologies</a></li>
            <li><a href=''>Contact</a></li>
        </ul>
    </nav>
</header> 
```

*   你给标题一个特定的背景（CSS渐变，图像，等等），并确保它的孩子没有一个背景。
*   `nav`您为和设置填充`ul`和边距。`li``0`
*   你在元素上设置了宽阔的实心边框`li`，你就完成了。然后您可以调整它（参见演示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:18:04.077

我在想你也许可以使用与 li 上的标题相同的图像，但偏移它以匹配每个 li 关于标题的位置。

当然，这需要一些客户端脚本，并且不是纯 css，而且您还没有说明这是否是一个可接受的解决方案，所以我投入了 2 美分。

干杯

编辑：

这是一个小的概念证明：

HTML：

```
<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="offset.js"></script>
    </head>

    <body>
        <header>
            <nav>
                <ul>
                    <li>ALLO</li>
                    <li>ALLO</li>
                    <li>ALLO</li>
                    <li>ALLO</li>
                </ul>
            </nav>
        </header>   
    </body>

</html> 
```

CSS：

```
header {
    background-image: url("gradient.png");
    height: 80px;
    position: relative;
    padding-top: 20px;
}

nav {
    position: relative;
    padding-top: 10px;
    background-image: url("navbg.jpg");
    background-position: 0px 10px;
    background-repeat: repeat-x;
    height: 100px;
}

li {
    width: 100px;
    height: 40px;
    float: left;
    list-style: none;
    background-image: url("gradient.png");
    background-repeat: no-repeat;
    background-position: 0px 0px; 
    background-origin: content-box;
} 
```

Javascript（在文件 offset.js 中）：

```
$(document).ready(function(){
    var elems = $("li");
    $.each(elems, function(index, elem){
        var li = $(elem);
        var pos = li.position();
        var posString = -pos.left.toString() + "px " + -pos.top.toString() + "px"
        li.css("backgroundPosition", posString);

    });

}); 
```

适用于 Chrome、FF 和 IE9

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:01:30.307

仅在代码中无法“穿透”到标题背景渐变。您将不得不通过以下任一方式伪造它：

a) 煞费苦心地重新创建 's 中的渐变`<li>`，使其与标题的背景对齐。`<li>`如果你走这条路，你应该有固定的宽度。

`<nav>`b)为纯色创建一个背景图像，但打了孔，以便您可以看到它后面的渐变。

# android - “mnt/sdcard”总是Android中的外部存储吗？

> ID：12934710
> 
> 赞同：3
> 
> 时间：2012-10-17T12:50:04.173
> 
> 标签：android, memory, external, sd-card

在我拥有的所有设备中，sd 卡始终安装在路径上`/mnt/sdcard`（该值也由函数返回`Environment.getExternalStorageDirectory().getAbsolutePath())`

我可以将其视为一个常数，还是在某些情况下它有所不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:52:00.020

**`No`**. 您不能仅将其更改视为常量 。因此，**`/sdcard`**请用于**`Environment.getExternalStorageDirectory().getAbsolutePath()`**路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T08:49:42.713

不，外部存储可以是**可移动存储介质（例如 SD 卡）**或**内部（不可移动）**存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:52:45.797

在三星 Galaxy s2 /sdcard 上是手机外部存储器。micro sd 在 /sdcard/external_sd 下

# android - 如何在屏幕上水平分割屏幕

> ID：12934712
> 
> 赞同：1
> 
> 时间：2012-10-17T12:50:12.083
> 
> 标签：android, orientation, android-linearlayout

现在它垂直分裂......我希望它水平分裂。我看过其他所有说他们的水平切割的人，我无法区分...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="top"
    android:layout_weight="1" >
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="bottom"
    android:layout_weight="1" >
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:55:52.823

将您的方向更改为`vertical`

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

 <LinearLayout
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:layout_gravity="top"
android:layout_weight=".1" >
 </LinearLayout>

 <LinearLayout
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:layout_gravity="bottom"
android:layout_weight=".1" >
</LinearLayout>

 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:02:35.263

你应该让子视图`fill_parent

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="2" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >
    </LinearLayout>

</LinearLayout> 
```

`LinearLayout`这将并排创建 2 L 个对象。

如果你想在另一个之上创建一个，你应该`android:orientation="vertical"`改为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:56:14.593

这应该有效。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<LinearLayout
    android:layout_width="0dip"
    android:layout_height="match_parent"
    android:layout_gravity="top"
    android:layout_weight="1" >
</LinearLayout>

<LinearLayout
    android:layout_width="0dip"
    android:layout_height="match_parent"
    android:layout_gravity="bottom"
    android:layout_weight="1" >
</LinearLayout>

</LinearLayout> 
```

# sql - 在 SQL Server 中使用 NVARCHAR(max) 更新查询

> ID：12934713
> 
> 赞同：-2
> 
> 时间：2012-10-17T12:50:13.517
> 
> 标签：sql, tsql, join, sql-server-2008-r2, nvarchar

对 SQL Server 性能有疑问，想看看是否有人可以提供一些关于提高更新查询性能的提示。

我正在做的是用另一个表中的数据更新一个表。以下是一些基础知识：

*   SQL Server 2008 R2
*   数据`WO`最初从其他系统泵送到表（在 ADO.NET 中使用 datareader 和 sqlbulkcopy 泵送）
*   额外的数据被抽取到`TEMP_REMARKS`（在 ADO.NET 中使用 datareader 和 sqlbulkcopy 抽取）
*   不幸的是，在原始系统中组合`WO`and `REMARKS`（通过读者查询）是不可能的（主要是性能原因）
*   使用更新两列的`WO`值进行更新`TEMP_REMARKS`
*   请注意，被转移`TEMP_REMARKS`到的列`REMARKS`是 a`nvarchar(max)`并且正在被放入另一`nvarchar(max)`列（实际上是两个 - 请参阅查询）
*   `WO`拥有超过 400 万条记录
*   `TEMP_REMARKS`拥有超过 700 万条记录

对于两者之间的连接，正在使用以下内容：

```
/* === UPDATE THE DESCRIPTION  */     
UPDATE WO
SET WO_DESCRIPTION = TEMP_REMARKS.REMARKS
FROM WO 
INNER JOIN TEMP_REMARKS ON WO.WO_DESCRIPTION_ID = TEMP_REMARKS.REMARKS_ID;

/* === UPDATE THE FINDINGS  */
UPDATE WO
SET FINDINGS = TEMP_REMARKS.REMARKS
FROM WO 
INNER JOIN TEMP_REMARKS ON WO.FINDINGS_ID = TEMP_REMARKS.REMARKS_ID; 
```

此时的问题是对`WO`表的更新需要两个多小时才能完成。我尝试使用该`MERGE`语句但没有成功。我在数据库中还有其他更完整的过程，它们不需要那么长时间，所以我确信这不是 SQL Server 本身的配置。

`nvarchar(max)`更新列 时应该做些什么？

可以做些什么来提高此查询的性能？

以下是表定义：

```
CREATE TABLE [dbo].[WO](
    [DOCUMENT_ID] [decimal](18, 0) NOT NULL,
    [WO_DESCRIPTION_ID] [decimal](18, 0) NULL,
    [WO_DESCRIPTION] [nvarchar](max) NULL,
    [FINDINGS_ID] [decimal](18, 0) NULL,
    [FINDINGS] [nvarchar](max) NULL,
.... bunch of other fields
 CONSTRAINT [PK_WO] PRIMARY KEY CLUSTERED 
(
    [DOCUMENT_ID] ASC
) 
```

这是 的表定义`TEMP_REMARKS`：

```
CREATE TABLE [dbo].[TEMP_REMARKS](
    [REMARKS_ID] [decimal](18, 0) NOT NULL,
    [REMARKS] [nvarchar](max) NULL
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:54:04.270

我认为，首先您应该考虑在 上创建主键`TEMP_REMARKS`，或者至少在上创建一些索引`REMARKS_ID`

# javascript - Facebook 身份验证不再有效 - 不呈现登录按钮

> ID：12934716
> 
> 赞同：1
> 
> 时间：2012-10-17T12:50:17.403
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我的 Facebook 身份验证突然停止工作。FB有什么改变吗？我目前正在使用 FB Javascript SDK 从本地主机运行该站点。以下 FB 代码均无效？

```
alert("got here");
window.fbAsyncInit = function () {

alert("didn't get here");

FB.init({
    appId: '102671026556892', // App ID
    //appId: '384834001576531', // App ID
    channelUrl: '//localhost/channel.html', // Channel File
    status: true, // check login status
    cookie: true, // enable cookies to allow the server to access the session
    xfbml: true  // parse XFBML
});

FB.Event.subscribe('auth.authResponseChange', function (response) {
    if (response.status === 'connected') {
        // the user is logged in and has authenticated your
        // app, and response.authResponse supplies
        // the user's ID, a valid access token, a signed
        // request, and the time the access token 
        // and signed request each expire
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;

        FB.api('/' + uid, function (user) {
            if (user) {
                loginUser(uid, user.email, user.name);
                window.location = "/users/index.html";
            }
        });

        // check an load DB            

        // TODO: Handle the access token

    } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
    } else {
        // the user isn't logged in to Facebook.
    }
});
};

alert("got here too");

// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));

alert("got here as well"); 
```

不在 window.fbAsyncInit 中的警报显示正常。window.fbAsyncInit 中的那个没有。它不呈现登录按钮（下面的代码）

```
<!-- START of Facebook LOGIN BUTTON -->            
     <div id="fb-root"></div>    
     <div class="fb-login-button" data-show-faces="false" data-width="400" data-max-rows="1"  data-size="medium" data-colorscheme="light" scope="user_about_me, email, read_stream, publish_actions">Login with Facebook</div>
<!-- END of Facebook LOGIN BUTTON --> 
```

非常感谢任何帮助。这一切都在上周末工作。:(

# c# - 更改资源文件不在本地化

> ID：12934717
> 
> 赞同：0
> 
> 时间：2012-10-17T12:50:23.377
> 
> 标签：c#, asp.net, deployment

我为几个客户部署了一个网站。

出于安全原因，部署是从目标服务器启动的。部署包括将文件复制到`dev->prod`.

对于每个目标站点，我都有一个特定的资源文件，并且在部署时我将文件从 重命名`xxx.resx`为`Resource.resx`. 这很好，但我想知道，是否可以定义要使用的资源文件`web.config`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:55:24.387

有可能的。

您可以在 web.config 中创建一个变量，您可以在其中输入要使用的 resx 的名称。假设 resx 文件位于 App_GlobalResources 中，它应该要求您使用[GetGlobalResourceObject(string, string)](http://msdn.microsoft.com/en-us/library/ms153593.aspx)访问资源对象。

如果您想要智能感知，那么您必须确保所有 .resx 文件具有完全相同的密钥（因为密钥将被编译），然后继续重命名。例如在 Global.asax 的 Application_Start 事件中，每当应用程序启动/重新启动时都会触发该事件。

无论如何，看看这个关于 web.config 变量的信息：[http ://forums.asp.net/t/1386667.aspx/1](http://forums.asp.net/t/1386667.aspx/1)

# java - 在应用程序的某个点清除 sqlite 数据库

> ID：12934718
> 
> 赞同：1
> 
> 时间：2012-10-17T12:50:26.370
> 
> 标签：java, android, sqlite, android-sqlite

每次在我的应用程序中遇到特定位置时，我都想清除我的 SQLite 数据库。

我打算只创建一个我可以调用的方法`resetTables()`，但这似乎比我预期的更具挑战性，因为我真的不知道在哪里放置它。这是一个片段。

```
@Override
        public void onCreate(SQLiteDatabase db) {

            db.execSQL(DATABASE_CREATE);

        }
        public void reset(SQLiteDatabase db) {

            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);

        } 
```

我在重置时得到一条黄线，我无法在我的代码中调用此方法。有任何想法吗？

请注意这个[问题](https://stackoverflow.com/questions/4499420/how-can-i-clear-a-sqlite-database-each-time-i-start-my-app)是相似的，但无法帮助我。

## 这有效：

```
public void resetTables(){
        mDb.delete(TABLE_NAME, null, null);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:12:35.270

首先创建一个创建数据库和表的方法。

```
 /**
     * Re crate database
     * Delete all tables and create them again
     * */
    public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(TABLE_NAME, null, null);
        db.close();
    } 
```

并使用您的按钮单击事件调用上述方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:04:11.630

我已经通过这种方式做到了...

```
@Override
public void onOpen(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    super.onOpen(db);

     db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
} 
```

是的，它确实对我有用..:)

# javascript - 如何使用 javascript / jQuery 增加/减少十六进制颜色值

> ID：12934720
> 
> 赞同：7
> 
> 时间：2012-10-17T12:50:31.583
> 
> 标签：javascript, jquery, colors, svg, coloranimation

是否可以在 jQuery / javascript 中逐步增加或减少十六进制颜色值？

我想做的是这样的：

适应 for 循环

```
for (var i = 0; i <= 100; i++) {
    console.log(i);
} 
```

我想做类似的事情

```
for (var color = 000000; color <= ffffff; color++) {
    console.log(color);
} 
```

没有任何转换。

那可能吗？我已经尝试过这个：

```
for (var color = parseInt('000000', 16); color <= parseInt('ffffff', 16); color++){
    console.log(color.toString(16));
} 
```

它可以工作，但速度非常慢（我收到警告说脚本正在减慢网站速度，如果我想停止脚本）。

我想这样做的原因：我想在一定的间隔内改变svg渐变的色标。例如，如果我有这个 svg（简化）：

```
<svg>
    ...
    <linearGradient>
        <stop offset="0%"  stop-color="#C8E3EF"/>
        <stop offset="100%"  stop-color="#C8E3EF"/>
    </linearGradient>
    ...
</svg> 
```

这个渐变当然会显示为纯色。现在我想逐步将其更改为例如

```
<svg>
    ...
    <linearGradient>
        <stop offset="0%"  stop-color="#dfcf99"/>
        <stop offset="100%"  stop-color="#c5b6ec"/>
    </linearGradient>
    ...
</svg> 
```

在每一步或每间隔，我都想使一个值更接近目标颜色（通过加法/减法）。最后的结果应该是平滑的彩色动画。没有转换有可能吗？顺便说一句，它不一定是for循环，我只是选择它来说明我的想法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T12:59:06.860

我前段时间写了一个梯度函数，也许它可以帮助你（返回一个数组）：

```
function gradient(startColor, endColor, steps) {
             var start = {
                     'Hex'   : startColor,
                     'R'     : parseInt(startColor.slice(1,3), 16),
                     'G'     : parseInt(startColor.slice(3,5), 16),
                     'B'     : parseInt(startColor.slice(5,7), 16)
             }
             var end = {
                     'Hex'   : endColor,
                     'R'     : parseInt(endColor.slice(1,3), 16),
                     'G'     : parseInt(endColor.slice(3,5), 16),
                     'B'     : parseInt(endColor.slice(5,7), 16)
             }
             diffR = end['R'] - start['R'];
             diffG = end['G'] - start['G'];
             diffB = end['B'] - start['B'];

             stepsHex  = new Array();
             stepsR    = new Array();
             stepsG    = new Array();
             stepsB    = new Array();

             for(var i = 0; i <= steps; i++) {
                     stepsR[i] = start['R'] + ((diffR / steps) * i);
                     stepsG[i] = start['G'] + ((diffG / steps) * i);
                     stepsB[i] = start['B'] + ((diffB / steps) * i);
                     stepsHex[i] = '#' + Math.round(stepsR[i]).toString(16) + '' + Math.round(stepsG[i]).toString(16) + '' + Math.round(stepsB[i]).toString(16);
             }
             return stepsHex;

         } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-03T00:41:50.440

那么你可以通过这种方式简单地做到这一点：

```
var incrementColor = function(color, step){
    var colorToInt = parseInt(color.substr(1), 16),                     // Convert HEX color to integer
        nstep = parseInt(step);                                         // Convert step to integer
    if(!isNaN(colorToInt) && !isNaN(nstep)){                            // Make sure that color has been converted to integer
        colorToInt += nstep;                                            // Increment integer with step
        var ncolor = colorToInt.toString(16);                           // Convert back integer to HEX
        ncolor = '#' + (new Array(7-ncolor.length).join(0)) + ncolor;   // Left pad "0" to make HEX look like a color
        if(/^#[0-9a-f]{6}$/i.test(ncolor)){                             // Make sure that HEX is a valid color
            return ncolor;
        }
    }
    return color;
}; 
```

对于步骤：

*   1 x 1 到 256 递增最后一种颜色
*   256 x 256 增量中间颜色
*   65536 x 65536 递增第一种颜色

这里有一个运行示例：http: [//jsfiddle.net/a3JbB/](http://jsfiddle.net/a3JbB/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T13:00:04.503

使用 setInterval 删除异常（堆栈溢出）。[jsfiddle](http://jsfiddle.net/RL3Wd/)

```
 var start = 0x000000,
    end = 0xFFFFFF, temp;
    var intervalId = setInterval(function(){
       if(start== end){clearInterval(intervalId )};
       temp = (start).toString(16);                  
             if(temp.length < 8){

                 temp = "0000000".substring(0, 8-temp.length)+temp; 
             } 
                       start++;
            console.log(temp ); 
     }, 10); 
```

# cmd - 一步一步/最快的方式编写脚本以远程执行文件

> ID：12934724
> 
> 赞同：2
> 
> 时间：2012-10-17T12:50:46.387
> 
> 标签：cmd, remote-access, execute

您好，我有 3 台带有共享文件夹的联网机器，我需要其中一台机器上的脚本来同时在所有 3 台计算机上运行文件。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T17:38:46.887

可以`waitfor`用来同步。

在目标使用`waitfor anysignalname`它会等待，直到这个信号被发送。

在主机上（或在三个目标之一的另一个 cmd 提示符上）用于`waitfor /SI anysignalname`发送信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:57:47.910

来自 sysinternals 的 PsExec

> Telnet 等实用程序和赛门铁克 PC Anywhere 等远程控制程序可让您在远程系统上执行程序，但设置起来可能很麻烦，并且需要您在希望访问的远程系统上安装客户端软件。PsExec 是一个轻量级的 telnet 替代品，可让您在其他系统上执行进程，并与控制台应用程序完全交互，而无需手动安装客户端软件。PsExec 最强大的用途包括在远程系统上启动交互式命令提示和远程启用工具（如 IpConfig），否则它们无法显示有关远程系统的信息。
> 
> 注意：一些防病毒扫描程序报告一个或多个工具感染了“远程管理员”病毒。PsTools 中没有一个包含病毒，但它们已被病毒使用，这就是它们触发病毒通知的原因。

[http://technet.microsoft.com/en-gb/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-gb/sysinternals/bb897553.aspx)

# vb.net - 出现错误：构建解决方案时“无法更新项目依赖项”

> ID：12934725
> 
> 赞同：1
> 
> 时间：2012-10-17T12:51:00.527
> 
> 标签：vb.net, winforms

在我的项目解决方案中，我有两个带有安装项目的项目，现在当我构建解决方案时，我得到了项目依赖项错误。如果我关闭 Visual Studio 并重新打开，那么它已解决，但如何在不关闭 Visual Studio 的情况下解决项目依赖错误？

# asp.net - 获取项目中所有文件的历史记录

> ID：12934727
> 
> 赞同：0
> 
> 时间：2012-10-17T12:51:04.723
> 
> 标签：asp.net, version-control, tfs

我有一个帮助项目，整个系统都依赖它，为了避免生产服务器上的版本控制问题，我需要检查项目中的所有源文件不超过 15 天前，如何在不查看历史记录的情况下做到这一点项目下的每个cs文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:16:15.367

打开源代码管理资源管理器。选择一个文件夹，右键单击并启动“查看历史记录”命令。

您现在将看到更改的递归列表。

# haskell - 遍历字符串并用haskell中的子字符串替换单个字符

> ID：12934730
> 
> 赞同：7
> 
> 时间：2012-10-17T12:51:15.427
> 
> 标签：haskell

我正在尝试学习一些 Haskell，但我觉得很难。我目前的项目有一些问题。这个想法是我必须通过一个字符串并用新的子字符串替换某些字符。例如，如果我有一个字符串“FLXF”并且我想用一个名为“FLF”的子字符串替换每个 F，那么结果应该是“FLFLXFLF”。现在我已经研究这个特定问题几个小时了。我一直在阅读类型、可能派上用场的不同功能（地图、折叠等），但我还没有解决这个问题。

下面的代码是我尝试过的一些不同的尝试：

```
apply :: String -> String
apply []     = []
apply (x:xs) = if (x == 'F')
               then do show "Hello"
                       apply xs
               else (apply (xs)) 
```

这个例子在这里我只是想在每次遇到'F'时显示你好，但它显示的只是“”，所以这显然不起作用。我真的不确定 if else 语句是去这里的方式。我还认为功能映射可能会起作用。在这里，我正在考虑的代码可能如下所示：

```
map (\x y -> if y == 'F' then "FLD" else y) "FLF" 
```

但这给了我一个类型错误。所以你可以看到我迷路了。请原谅我对 Haskell 的了解不足，但我还是新手。我真的希望你们中的一些人能在这里帮助我，或者推动我朝着正确的方向前进。如果我对某些事情不清楚，请随时提出问题。

先感谢您！

约翰

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T12:59:08.093

```
map (\x y -> if y == 'F' then "FLD" else y) "FLF" 
```

这几乎是对的。

首先...为什么函数需要两个参数？

```
map (\y -> if y == 'F' then "FLD" else y) "FLF" 
```

剩下的类型错误是因为`then`分支给出了 a `String`，但`else`分支给出了 a `Char`（两个分支必须各自给出相同类型的值）。所以我们将让`else`分支给出 a `String`（回想一下，这`String`是 的同义词`[Char]`）：

```
map (\y -> if y == 'F' then "FLD" else [y]) "FLF" 
```

现在的问题是这给了你一个`[String]`值而不是 a `String`。所以我们将所有这些字符串连接在一起：

```
concat (map (\y -> if y == 'F' then "FLD" else [y]) "FLF") 
```

`concat`和的这种组合`map`很常见，以至于有一个标准函数将它们组合在一起。

```
concatMap (\y -> if y == 'F' then "FLD" else [y]) "FLF" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T19:14:04.453

`concatMap`是这里最直观的东西。这种在数据结构上映射一个本身返回数据结构类型（在本例中为列表）的函数和将结果组合回单个“紧密”列表之间的组合在 Haskell中确实*很*常见，并且确实不仅适用于列表。

我想解释一下为什么你的第一次尝试会编译，以及它实际上做了什么——因为它与你可能想的完全不同！

```
apply (x:xs) = if (x == 'F') 
```

该行仍然非常清楚：您只需从字符串中取出第一个字符并将其与`'F'`. 在位“行人”手动将字符串分开，但很好。好吧，你给这个函数起的名字不是特别好，但我会在这里坚持下去。

```
 then do show "Hello" 
```

现在这很有趣。您可能会认为`do`开始一个点列表，“先做这个，然后做那个”......就像在简单的*Hello, World* -ish 示例程序中一样。但永远记住：在 Haskell 中，通常没有计算东西的*顺序*这样的东西。这只发生在`IO`上下文中。但是`IO`您的代码中没有！？！

不确定你是否听说过`IO`实际上是什么，不管怎样，你去吧：它是一个`Monad`. 那些“你只在故事书中读过的神话般的 Haskell 构造”......

事实上，尽管这可能会导致这里有点远，但*这个问题涵盖了所有关于`Monad`s 的*知识！那个怎么样？

这是另一种（正确的！）方式来定义您的功能。

```
apply' str = do
   x <- str
   if (x == 'F')
    then "FLF"
    else return x 
```

所以我使用了这种奇怪`do`的语法，它不在 中`IO`，它看起来与你在 中写的完全不同`IO`，但它确实有效。如何？

```
 x <- str 
```

在`do`符号中，`variable <- action`总是意味着“从这个单子事物中取出一个值，然后调用它`x`”。你可能已经看到了类似的东西

```
response <- getLine 
```

这意味着“将用户输入从现实世界中取出（从`IO`单子中取出！）并调用它`response`”。在`x <- str`中，它是我们拥有的字符串，而不是`IO`动作。所以我们从字符串中取出一个字符——既简单又好用！

但实际上，这并不完全正确。“取*一个*字符”是你用 做的`apply (x:xs) = ...`，它只取第一个。相反，`x <- str`实际上从字符串中取出*所有*可能的字符，一个接一个。如果您习惯于过程语言，这可能看起来与 非常不一致`response <- getLine`，但实际上并非如此：`getLine`它还包含用户可能给出的*所有可能输入*，并且程序必须按照此操作。

```
 if (x == 'F') 
```

这里没有什么意外，但是

```
 then "FLF" 
```

哇！就这样？我们先看下一行

```
 else return x 
```

好的，这*看起来很*熟悉，但实际上并非如此。在其他语言中，这意味着“我们完成了我们的功能，`x`就是结果”。但这显然不是这里发生的事情，因为`x`is和is`Char`的“返回类型” 。在 Haskell 中，实际上与从函数返回值几乎没有关系，而是意味着“将该值放入我们正在处理的一元上下文中”。如果 monad 是，那将是完全相同的：*将此值返回给现实世界的上下文*（这并不意味着打印该值或其他东西，只是将其交给）。但是在这里，我们的上下文是一个字符串，或者更确切地说是一个列表（字符，所以它*是*a ）。`apply'``String``return``IO`**`String`**

 **对，所以如果`x`不是`'F'`，我们将其放回字符串中。这听起来很合理，但是呢`then "FLF"`？请注意，我也可以这样写：

```
 if (x == 'F')
    then do
       x' <- "FLF"
       return x'
    else return x 
```

这意味着，我将所有字符取出`"FLW"`并将它们返回到整体结果中。但是没有必要只考虑最终结果，我们也可以只隔离这部分`do { x' <- "FLF"; return x' }`——而且，很明显，它的价值就是字符串`"FLF"`本身！

所以我希望你现在已经掌握了为什么`apply'`有效。回到你的版本，虽然它实际上没有多大意义......

```
 then do
              show "Hello"
              apply xs 
```

在这里，我们有一行不在`do`块的末尾，但里面没有 a `<-`。你通常会`IO`在类似的地方看到这个

```
main = do
   putStrLn "How ya doin'?"
   response <- getLine
   ... 
```

请记住，“仅输出”操作`IO()`在 Haskell 中具有类型，这意味着它们不会直接返回任何有意义的值，而只是返回微不足道的值`()`。所以你并不真正关心这个，但你仍然可以评估它：

```
main = do
   trivial <- putStrLn "Hello, let's see what this IO action returns:"
   print trivial 
```

编译和输出

> 你好，让我们看看这个 IO 动作返回什么：(
> )

如果我们必须一直进行这种评估，那将是愚蠢`()`的，因此 Haskell 允许将其`() <-`排除在外。真的就是这样！

所以像块`show "Hello"`中间这样的一行`do`基本上意味着“取出一个字符`show "Hello"`（它只是一个带有 value 的字符串`"\"Hello\""`），但不要对这个字符做任何其他事情/只是把它扔掉”。

您定义的其余部分只是对 的其他递归调用`apply`，但是因为它们都没有比丢弃字符更有趣的事情，所以您最终会得到`apply [] = []`，所以这就是最终结果：一个空字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-25T08:19:31.203

**if-then-else** ...我知道 Haskell 支持这些，但是，我**很**惊讶这里没有人删除它们...

因此，以下是我针对不同情况进行替换的解决方案。

*   替换一个**字符**
*   替换**单词**
*   通过每个单词的**函数**替换

$**猫替换.hs**

```
import Data.List (isPrefixOf)

replaceC :: Char -> Char -> String -> String
replaceC _ _ [] = []
replaceC a b (x:xs)
  | x == a    = b:replaceC a b xs
  | otherwise = x:replaceC a b xs

replaceW :: String -> String -> String -> String
replaceW a b s = unwords . map replaceW' $ words s
  where replaceW' x | x == a    = b
                    | otherwise = x

replaceF :: (String -> String) -> String -> String
replaceF f = unwords . map f . words

string = "Hello world ^fg(blue)"

main = do
    print string
    print $ replaceC 'o' 'z' string
    print $ replaceW "world" "kitty" string
    print . replaceF f . replaceW "world" "kitty" $ replaceC 'H' 'Y' string
  where f s | "^" `isPrefixOf` s = '^':'^':drop 1 s
            | otherwise = s 
```

$ **runhaskell 替换.hs**

```
"Hello world ^fg(blue)"
"Hellz wzrld ^fg(blue)"
"Hello kitty ^fg(blue)"
"Yello kitty ^^fg(blue)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T22:06:45.323

您的基本错误是您想用字符串替换字符串中的字符。这是不可能的，因为 String 是 Char 的列表，而 Char 是 Char 而不是短 String。String 也不是 Char，即使它的长度是 1。

因此，您真正想要的是用其他一些字符替换一些字符。您的方法很有希望，可以像这样完成：

```
replace [] = []  -- nothing to replace in an empty string
replace (c:cs) = if c == 'F' then 'F':'L':'F':replace cs
                             else c:replace cs 
```**

# d3.js - d3 事件目标

> ID：12934731
> 
> 赞同：4
> 
> 时间：2012-10-17T12:51:17.840
> 
> 标签：d3.js

有没有办法在不使用的情况下访问事件目标（DOM 元素）`this`？我在一个对象内部，我想`this`绑定到对象本身。全局`d3.event`显然不存储目标 -`d3.event.target`不起作用。有什么线索吗？

编辑：这是我正在运行的代码（它是咖啡脚本）：

```
@nodes = @svg.selectAll('g.node')
  .data(@nodes, (d) -> d.key)
  .enter()
  .append('g')
  .attr('class', 'node')
  .attr('transform', (d) => "translate(#{@x d.x},#{@y d.y})")
@nodes.append('svg:rect')
  .attr('width', @x 100)
  .attr('height', @y 50)

node_drag = d3.behavior.drag().origin(Object).on('drag', @drag_move)
@nodes.call node_drag

drag_move: (d, i) ->
  console.log d3.event.target 
```

浏览器控制台输出是

```
function e(){this.on("mousedown.drag",t).on("touchstart.drag",t)} 
```

如果我添加一条`debugger`语句并手动检查对象，也是一样。由于某种原因`d3.event.target`返回一个函数而不是事件对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-27T16:11:05.947

我通过在 dragmove 函数中重置 d3.event.target 的值解决了这个问题：

d3.event.target = event.target;

然后 d3.event.target 成为目标 DOM 元素，代替像 drag() 这样的函数...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:04:48.127

我可以重新创建它，并且我很想它应该被记录为一个错误 - 我认为将拖动控件本身传递为`d3.event.target`.

在这种情况下，修复似乎很容易 - 只需调用`rect`选择的拖动行为即可：

```
@rect = @nodes.append('svg:rect')
  .attr('width', @x 100)
  .attr('height', @y 50)

node_drag = d3.behavior.drag().origin(Object).on('drag', @drag_move)
@rect.call node_drag 
```

但是，如果您的节点组中有多个元素并且想了解哪些被拖动，我会觉得这很烦人。

# java - 具有字段名称和值的 XML 以响应映射 java 对象无法从字段中检索

> ID：12934737
> 
> 赞同：4
> 
> 时间：2012-10-17T12:51:27.047
> 
> 标签：java, xml, data-binding

我有以下响应作为 xml 我需要映射到 java 对象我尝试使用 jaxb、sax、dom 无法从下面的数据中获取 `<FIELD NAME="strShipmentNo" VALUE="A134535" />` 数据。请建议如何从下面的 xml 中检索数据

```
<DTDCREPLY>
    <CONSIGNMENT>
        <CNHEADER>
            <CNTRACK>TRUE</CNTRACK>
            <FIELD NAME="strShipmentNo" VALUE="A15082271" />
            <FIELD NAME="strRefNo" VALUE="N/A" />
            <FIELD NAME="strMode" VALUE="AIR" />
            <FIELD NAME="strOrigin" VALUE="LEAK-PROOF ENGINEERING PVT.LTD, AHMEDABAD" />
            <FIELD NAME="strOriginRemarks" VALUE="Received from" />
            <FIELD NAME="strBookedOn" VALUE="08072009" />
            <FIELD NAME="strPieces" VALUE="1" />
            <FIELD NAME="strWeightUnit" VALUE="Kg" />
            <FIELD NAME="strWeight" VALUE="0.020" />
            <FIELD NAME="strDestination" VALUE="PUNE" />
            <FIELD NAME="strStatus" VALUE="DELIVERY" />
            <FIELD NAME="strStatusTransOn" VALUE="09072009" />
            <FIELD NAME="strStatusTransTime" VALUE="1210" />
            <FIELD NAME="strRemarks" VALUE="CO SEAL" />
            <FIELD NAME="strNoOfAttempts" VALUE="" />
        </CNHEADER>
        <CNBODY>
            <CNACTIONTRACK>TRUE</CNACTIONTRACK>
            <CNACTION>
                <FIELD NAME="strAction" VALUE="DISPATCHED" />
                <FIELD NAME="strRemarks" VALUE="" />
            </CNACTION>
            <CNACTION>
                <FIELD NAME="strAction" VALUE="RECEIVED" />
                <FIELD NAME="strRemarks" VALUE="" />
            </CNACTION>
            <CNACTION>
                <FIELD NAME="strAction" VALUE="DISPATCHED" />
                <FIELD NAME="strRemarks" VALUE="" />
            </CNACTION>
            <CNACTION>
                <FIELD NAME="strAction" VALUE="RECEIVED" />
                <FIELD NAME="strRemarks" VALUE="" />
            </CNACTION>
            <CNACTION>
                <FIELD NAME="strAction" VALUE="OUT FOR DELIVERY" />
                <FIELD NAME="strRemarks" VALUE="" />
            </CNACTION>
        </CNBODY>
    </CONSIGNMENT>
</DTDCREPLY> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:56:43.003

使用[XStream](http://www.xml.com/pub/a/2004/08/18/xstream.html)，您可以序列化大多数 Java 对象而无需任何映射。对象名称成为生成的 XML 中的元素名称，类中的字符串形成 XML 的元素内容。使用 XStream 序列化的类不需要实现 Serializable 接口。XStream 是一种序列化工具而不是数据绑定工具，这意味着它不会从 XML 或 XML 模式定义 (XSD) 文件生成类。检查这个 Stackoverflow[问题](https://stackoverflow.com/questions/7137655/design-paradigm-for-instantiating-object-from-xml-file/12636771#12636771)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:45:41.920

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

`@XmlPath`下面我将演示如何使用 EclipseLink JAXB (MOXy) 的扩展来映射您的用例。

**CNBody**

```
package forum12934737;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement(name="CNBODY")
public class CNBody {

    @XmlElement(name="CNACTIONTRACK")
    private String cnActionTrack;

    @XmlElement(name="CNACTION")
    private List<CNAction> cnActions;

} 
```

**CNA动作**

使用`@XmlPath`扩展，我们可以指定我们想要将我们的字段/属性映射到嵌套在 XML 元素中的 XML 属性，该 XML 元素具有另一个具有特定值的 XML 属性。

```
package forum12934737;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlAccessorType(XmlAccessType.FIELD)
public class CNAction {

    @XmlPath("FIELD[@NAME='strAction']/@VALUE")
    private String strAction;

    @XmlPath("FIELD[@NAME='strRemarks']/@VALUE")
    private String strRemarks;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum12934737;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(CNBody.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12934737/input.xml");
        CNBody cnBody = (CNBody) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(cnBody, System.out);
    }

} 
```

**输入.xml/输出**

出于本示例的目的，我使用了您的 XML 文档的一个子集。

```
<CNBODY>
   <CNACTIONTRACK>TRUE</CNACTIONTRACK>
   <CNACTION>
      <FIELD NAME="strAction" VALUE="DISPATCHED"/>
      <FIELD NAME="strRemarks" VALUE=""/>
   </CNACTION>
   <CNACTION>
      <FIELD NAME="strAction" VALUE="RECEIVED"/>
      <FIELD NAME="strRemarks" VALUE=""/>
   </CNACTION>
   <CNACTION>
      <FIELD NAME="strAction" VALUE="DISPATCHED"/>
      <FIELD NAME="strRemarks" VALUE=""/>
   </CNACTION>
   <CNACTION>
      <FIELD NAME="strAction" VALUE="RECEIVED"/>
      <FIELD NAME="strRemarks" VALUE=""/>
   </CNACTION>
   <CNACTION>
      <FIELD NAME="strAction" VALUE="OUT FOR DELIVERY"/>
      <FIELD NAME="strRemarks" VALUE=""/>
   </CNACTION>
</CNBODY> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html](http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# java - 在类方法对其进行操作后，无法让 ArrayList 保留值

> ID：12934738
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:51:36.953
> 
> 标签：java, arraylist, genetic-algorithm

我现在应该真的知道问题出在哪里，但我遇到了麻烦。我的问题是Java Arraylist。我正在尝试通过类方法（kgenetics 类中的 addStartingPop）将对象添加到数组列表中。这个方法在 main 中被调用，它应该更新 kgenetics 的类成员，它是一个 arrayList。在 main 中调用 addStartPop() 后，我尝试在 main 中打印出新的人口。但是，如果您注意到，Item 数组并不是我期望的那样。问题：问题是这些值确实被添加到了数组列表中，但似乎它们并没有完全修改我想要的样子。

这是运行程序的输出：

这是调用 addStartPop() 之后 Arraylist 中应该包含的内容

## 我在将每个背包添加到 arraylist(knapsackSamples) 之前打印它

```
Item: (1.0, 2.0, false)

Item: (1.0, 2.0, false)

Item: (4.0, 6.0, true)

Item: (3.0, 2.0, false)

Item: (1.0, 2.0, true)

Item: (8.0, 10.0, false)

Item: (1.0, 2.0, true)

Item: (5.0, 1.0, true)

Item: (7.0, 8.0, true)

Item: (6.0, 9.0, false)

Score: 37.0

Item: (1.0, 2.0, false)

Item: (1.0, 2.0, false)

Item: (4.0, 6.0, false)

Item: (3.0, 2.0, false)

Item: (1.0, 2.0, false)

Item: (8.0, 10.0, false)

Item: (1.0, 2.0, true)

Item: (5.0, 1.0, true)

Item: (7.0, 8.0, true)

Item: (6.0, 9.0, false)

Score: 24.0 
```

* * *

当我在 main 方法中打印样本时，这就是打印出来的。分数（根据构成项目的两个数字计算）是正确的，但数组是最后添加的数组）

```
Item 0
Item: (1.0, 2.0, false)

Item: (1.0, 2.0, false)

Item: (4.0, 6.0, false)

Item: (3.0, 2.0, false)

Item: (1.0, 2.0, false)

Item: (8.0, 10.0, false)

Item: (1.0, 2.0, true)

Item: (5.0, 1.0, true)

Item: (7.0, 8.0, true)

Item: (6.0, 9.0, false)

Score: 37.0

Item 1

Item: (1.0, 2.0, false)

Item: (1.0, 2.0, false)

Item: (4.0, 6.0, false)

Item: (3.0, 2.0, false)

Item: (1.0, 2.0, false)

Item: (8.0, 10.0, false)

Item: (1.0, 2.0, true)

Item: (5.0, 1.0, true)

Item: (7.0, 8.0, true)

Item: (6.0, 9.0, false)

Score: 24.0 
```

我真的不确定，但我相信这可能是 Java 如何隐式使用引用的问题。谁能帮我吗？

这是我的代码，我将概述问题所在：

在主要方法中，在创建开始人口后，我用随机创建的样本打印出新人口应该是什么，但 ksim.printPopulation() 打印出的内容不正确。问题一定是如何在第二个代码块中创建和保存新样本。

```
package gaknapsack2;
import java.util.List;
import java.util.ArrayList;
public class GAknapsackmain {

public static void main(String[] args) {
    float knapsackCapacity = 18.5f;
    int startPop = 2;
    int populationLimit = 1000;
    List<Knapsack> listholder = new ArrayList<Knapsack>(populationLimit);
    Item[] items = new Item[10];
    items[0] = new Item(1.0f,2.0f,false);
    items[1] = new Item(1.0f,2.0f,false);
    items[2] = new Item(4.0f,6.0f,false);
    items[3] = new Item(3.0f,2.0f,false);
    items[4] = new Item(1.0f,2.0f,false);
    items[5] = new Item(8.0f,10.0f,false);
    items[6] = new Item(1.0f,2.0f,false);
    items[7] = new Item(5.0f,1.0f,false);
    items[8] = new Item(7.0f,8.0f,false);
    items[9] = new Item(6.0f,9.0f,false);        
    Knapsack itemKnapsack = new Knapsack(items.length,knapsackCapacity,items,0);       
    kgenetics ksim = new kgenetics(populationLimit,itemKnapsack,knapsackCapacity,startPop);        
    ksim.addStartingPop();
    //ksim.setPopulation(listholder);
    ksim.printPopulation();        

} 
```

}

```
package gaknapsack2;
import java.util.List;
import java.util.ArrayList;
import java.util.Random;
public class kgenetics {
private int maxPopulation;
private int startingPopulationSize;
//private Knapsack[] knapsackSamples;
private List<Knapsack> knapsackSamples = new ArrayList<Knapsack>(100);
//the knapsack to base all other knapsacks from
private Knapsack baseKnapsack;
private float knapsackCapacity;

public kgenetics(int mP,Knapsack ks, float capacity, int startPop){
    this.maxPopulation = mP;
    this.baseKnapsack = ks;
    this.knapsackCapacity = capacity;
    this.startingPopulationSize = startPop;        
}

public float calculateScore(Knapsack k){
    float weightTotal = 0.0f;
    float valueTotal = 0.0f;
    float totalScore = 0.0f;
    for(int i = 0; i < k.getNumberOfItems();i++){
       if(k.getItemAtIndex(i).isPresent() == true){
            weightTotal += k.getItemAtIndex(i).getWeight();
            valueTotal += k.getItemAtIndex(i).getValue();
       }
    }
    //if oversize, take items out of knapsack until it is legal weight
    if(weightTotal > this.knapsackCapacity){
        int i = 0;
        while(weightTotal > this.knapsackCapacity){
            if(k.getItemAtIndex(i).isPresent() == true){
                weightTotal -= k.getItemAtIndex(i).getWeight();
                valueTotal -= k.getItemAtIndex(i).getValue();
                k.getItemAtIndex(i).setPresent(false);
            }
            i++;
        }
    }
    totalScore = weightTotal + valueTotal;
    return totalScore;
}

public void printPopulation(){
    for(int i = 0; i < this.knapsackSamples.size(); i++){
        System.out.println("Item " + i);
        this.knapsackSamples.get(i).printKnapsack();
        System.out.println();
    }
}

public void setPopulation(List<Knapsack> r){
    this.knapsackSamples = r;
}

public void makeRandomSample(Knapsack k){
    for(int i = 0; i < k.getNumberOfItems(); i++){
        Random rand = new Random();
        float x = rand.nextFloat();
        if(x > 0.5){
            k.getItemAtIndex(i).setPresent(true);
        }
    }
}

public void addNew(Knapsack k){
    this.knapsackSamples.add(k);
}
public void addStartingPop(){
    //Knapsack newKnapsack = new Knapsack(this.baseKnapsack.getNumberOfItems(),this.baseKnapsack.getCapacity(),this.baseKnapsack.getItemsArray(),this.baseKnapsack.getScore());
    Knapsack newKnapsack;
    for(int i = 0; i < this.startingPopulationSize;i++){
        newKnapsack = new Knapsack(this.baseKnapsack.getNumberOfItems(),this.baseKnapsack.getCapacity(),this.baseKnapsack.getItemsArray(),this.baseKnapsack.getScore());
        //might be a trouble area if pass by reference or value
        //might have to test           
        newKnapsack.setRandomKnapsackItems(newKnapsack);
        //this.makeRandomSample(newKnapsack);
        float score = calculateScore(newKnapsack);
        newKnapsack.setScore(score);
        newKnapsack.setItems(newKnapsack.getItemsArray());
        newKnapsack.printKnapsack();
        this.knapsackSamples.add(newKnapsack);
    }
    //return newKnapsack;
}

//create a crossover between knapsacks thus creating a new possible solution
//add the probability for a mutation to occur during cross over
public Knapsack crossOver(Knapsack p1, Knapsack p2){
    System.out.print("performing crossover\n");
    p1.printKnapsack();
    Random r = new Random();        
    Knapsack newKnapsack = new Knapsack(p1.getNumberOfItems(),p1.getCapacity(),p1.getItemsArray(),p1.getScore());
    //Knapsack newKnapsack = new Knapsack();
    //newKnapsack = p1;
    //newKnapsack.printKnapsack();
    //no bigger crossover than half of the number of items in knapsack
    int rangeCrossover = r.nextInt(this.baseKnapsack.getNumberOfItems()/2);
    int positionStart = r.nextInt(this.baseKnapsack.getNumberOfItems());
    int positionEnd = (positionStart + rangeCrossover);
    System.out.println("Crossover - posStart: "+ positionStart + " posEnd: " + positionEnd);
    for(int i = 0; i < this.baseKnapsack.getNumberOfItems();i++){
        if(i >= positionStart && i <= positionEnd){
            newKnapsack.setItemAtIndex(i, p2.getItemAtIndex(i).isPresent());
        }
    }
    System.out.print("finished crossover\n");
    newKnapsack.printKnapsack();
    return newKnapsack;
}

//create the reproduction function that performs the crossover on all knapsacks 
public void reproduction(){
    for(int i = 0; i < this.knapsackSamples.size();i+=2){
        if(this.knapsackSamples.get(i + 1) != null){
            Knapsack child = new Knapsack();                                
            //Knapsack child = new Knapsack(p1.getNumberOfItems(),p1.getCapacity(),p1.getItemsArray(),p1.getScore());
            //child.copyKnapsack(this.knapsackSamples.get(i));
            //child.printKnapsack();
            child = this.crossOver(this.knapsackSamples.get(i),this.knapsackSamples.get(i + 1));

            child.setScore(this.calculateScore(child));
            System.out.println("new child");
            //child.printKnapsack();
            Knapsack addthis = new Knapsack(child.getNumberOfItems(),child.getCapacity(),child.getItemsArray(),child.getScore());
            //addthis.printKnapsack();
            this.knapsackSamples.add(addthis);
        }
    }
} 
```

}

根据要求的背包对象：

```
package gaknapsack2;
import java.util.Random;

public class Knapsack{
private int totalNumberOfItems;
private float knapSackCapacity;
private Item[] knapsackItems;
private float knapsackScore;
private float weight;
private float value;

public Knapsack(int totalNumOfItems, float cap, Item[] items, float s){
    this.totalNumberOfItems = totalNumOfItems;
    this.knapSackCapacity = cap;
    this.knapsackItems = items;
    this.knapsackScore = s;        
}

public Knapsack(){
    this.totalNumberOfItems = 0;
    this.knapSackCapacity = 0;
    this.knapsackItems = null;
    this.knapsackScore = 0;        
}

//randomly select items from the baseknapsack that was instaniated and
//set Items in it to have itemPresent = true
public void setRandomKnapsackItems(Knapsack k){
    for(int i = 0; i < this.totalNumberOfItems; i++){
        Random rand = new Random();
        float x = rand.nextFloat();
        if(x > 0.5){
            k.knapsackItems[i].setPresent(true);
        }
    }
}

public void setItemAtIndex(int i, boolean b){
    this.knapsackItems[i].setPresent(b);
}

public void setItems(Item[] i){
    this.knapsackItems = i;
}

public Item getItemAtIndex(int i){
    return this.knapsackItems[i];
}

public int getNumberOfItems(){
    return this.totalNumberOfItems;
}

public float getCapacity(){
    return this.knapSackCapacity;
}

public Item[] getItemsArray(){
    Item[] copy = this.knapsackItems;
    return copy;
}

public float getScore(){
    return this.knapsackScore;
}

public void setScore(float f){
    this.knapsackScore = f;
}

public Knapsack copyKnapsack(Knapsack k){
    Knapsack kNew = new Knapsack();
    kNew.totalNumberOfItems = k.totalNumberOfItems;
    kNew.knapSackCapacity = k.knapSackCapacity;
    for(int i = 0; i < k.totalNumberOfItems;i++){
        kNew.knapsackItems[i] = k.knapsackItems[i].returnCopyOfItem();
    }
    kNew.knapsackScore = k.knapsackScore;
    kNew.printKnapsack();
    return kNew;
}

public void printKnapsack(){
    for(int i = 0; i < this.totalNumberOfItems;i++){
        this.knapsackItems[i].printItem();
    }
    System.out.println("Score: " + this.knapsackScore);
}
} 
```

如果您遵循 main 方法中的代码。您会看到一个名为 where ksim（负责添加背包对象）到 ksim 作为成员的数组列表。这应该保留在函数 addStartPop() 中添加到数组列表中的随机背包但是当我在 main 中打印此之后的人口时，值是错误的

我一直试图弄清楚这一点。请帮助，如果需要，我可以提供更多代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:48:14.670

看来kgen保留了一个背包（baseKnapsack）的副本，然后你到处使用这个背包的数组。如果您将列表从 baseKnapsack 传递到您创建的每个新背包项目，它们都将使用相同的列表。代替

```
 newKnapsack = new Knapsack(this.baseKnapsack.getNumberOfItems(),this.baseKnapsack.getCapacity(),**this.baseKnapsack.getItemsArray()**,this.baseKnapsack.getScore()); 
```

尝试这样的事情：

```
 newKnapsack = new Knapsack(this.baseKnapsack.getNumberOfItems(),this.baseKnapsack.getCapacity(),**new Item[baseKnapsack.totalNunberOfItems]**,this.baseKnapsack.getScore()); 
```

# wordpress - 如何显示“完整”图像 URL，以便我可以在 Wordpress 中使用随机背景

> ID：12934741
> 
> 赞同：0
> 
> 时间：2012-10-17T12:51:44.317
> 
> 标签：wordpress, wordpress-theming

我正在尝试编写一个自定义页面类型，它在 Wordpress 中为页面提供随机背景。（即主页上漂亮的大图）。我已经成功了！但是我返回一个大图像，任何想法如何快速添加使其显示完整图像大小的 URL？

非常感谢帮助！

（我已将完整代码插入其中，如果有帮助，任何人都可以在自己的网站上使用它？）

```
 <?php
            /**
             * Template Name: Fullscreen Random
            */

            get_header();

            ?> 
            <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>

            <style media="screen" type="text/css">
            body {
            background: url(<?php
            $args = array( 'post_type' => 'attachment', 'numberposts' => 1, 'orderby' => 'rand', 'post_status' => null, 'post_parent' => 5 ); 
            $attachments = get_posts( $args );
            if ($attachments) {
                        foreach ( $attachments as $attachment ) {
                                echo $attachment->guid;
                }
            }
            ?>) no-repeat center center fixed;
            webkit-background-size: cover;
            moz-background-size: cover;
            o-background-size: cover;
            background-size: cover;
            }
            #menu {background:rgba(0, 0, 0, 0.2)!important;}
            * {color:white!important;}
            </style>

            <?php endwhile; ?>
            <? get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:17:41.607

使用[wp_attachment_is_image](http://codex.wordpress.org/Function_Reference/wp_attachment_is_image)确保您只获取您的图像和[wp_get_attachment_image_src](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)以附件 id 和“完整”作为参数，您可以从返回数组的第一个元素获取全尺寸附件图像的 url（尚未对此进行测试但它似乎可行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:51:50.807

对于那些对包含@“Edgar Allan Pwn”建议的最终脚本感兴趣的人，它如下：

```
<?php
/**
 * Template Name: Fullscreen Random
*/

get_header();

?> 
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>

<style media="screen" type="text/css">
body {
background: url(<?php

    $args = array(
    'orderby'        => 'rand',
    'post_type'      => 'attachment',
    'post_parent'    => $post->ID,
    'post_mime_type' => 'image',
    'post_status'    => null,
    'numberposts'    => 1,
    );

    $attachments = get_posts($args);

    if ($attachments) {

        foreach ($attachments as $attachment) { ?>

        <?php $full = wp_get_attachment_image_src( $attachment->ID, 'full', false, false );

        echo $full[0];

        }
    } 

?>) no-repeat center center fixed;
webkit-background-size: cover;
moz-background-size: cover;
o-background-size: cover;
background-size: cover;
}
#menu {background:rgba(0, 0, 0, 0.2)!important;}
* {color:white!important;}
</style>

<?php endwhile; ?>
<? get_footer(); ?> 
```

# ios - iOS SecItemCopyMatching RSA 公钥格式？

> ID：12934743
> 
> 赞同：5
> 
> 时间：2012-10-17T12:51:50.337
> 
> 标签：ios, security, cryptography, rsa, public-key-encryption

我正在尝试从已经生成的密钥对（两个 s）中提取 1024 位 RSA 公钥`SecKeyRef`，以便通过网络发送它。我所需要的只是一个简单的`(modulus, exponent)`对，它应该占用 131 个字节（模数为 128，指数为 3）。

但是，当我将密钥信息作为`NSData`对象获取时，我得到 140 位而不是 131 位。这是一个示例结果：

```
<30818902 818100d7 514f320d eacf48e1 eb64d8f9 4d212f77 10dd3b48 ba38c5a6
 ed6ba693 35bb97f5 a53163eb b403727b 91c34fc8 cba51239 3ab04f97 dab37736
 0377cdc3 417f68eb 9e351239 47c1f98f f4274e05 0d5ce1e9 e2071d1b 69a7cac4
 4e258765 6c249077 dba22ae6 fc55f0cf 834f260a 14ac2e9f 070d17aa 1edd8db1
 0cd7fd4c c2f0d302 03010001> 
```

在重试密钥生成几次并比较结果`NSData`对象后，所有密钥保持相同的字节是前 7 个：

```
<30818902 818100> 
```

最后三个字节看起来像指数（65537，一个公共值）。“模数”和指数之间还有两个字节：

```
<0203> 
```

有更多加密经验的人可以帮我确定这是什么编码吗？德尔？如何正确解码模数和指数？

我尝试使用手动剥离模数和指数

```
NSData* modulus = [keyBits subdataWithRange:(NSRange){ 7, 128 }];
NSData* exponent = [keyBits subdataWithRange:(NSRange){ 7 + 128 + 2, 3 }]; 
```

但是在尝试解密远程主机使用该“密钥”编码的数据时出现错误。

编辑：

这是我最终用来解压 RSA blob 的解决方案的要点：[https ://gist.github.com/vl4dimir/6079882](https://gist.github.com/vl4dimir/6079882)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:11:52.903

假设您希望该解决方案在 iOS 下运行，请查看[此线程](https://stackoverflow.com/questions/3840005/how-to-find-out-the-modulus-and-exponent-of-rsa-public-key-on-iphone-objective-c)。该帖子确认编码为 DER，并展示了如何从`NSData`您开始使用的对象中提取指数和模数。

还有另一种解决方案不适用于 iOS，但适用于在[此线程](https://stackoverflow.com/questions/3116907/rsa-get-exponent-and-modulus-given-a-public-key)中安装了 OpenSSL 的桌面系统（包括 MacOS X） 。即使您正在寻找仅限 iOS 的解决方案，您仍然可以使用它来验证您的代码是否正常工作。

# php - 从 PHP 中的父类调用子方法

> ID：12934744
> 
> 赞同：2
> 
> 时间：2012-10-17T12:51:51.923
> 
> 标签：php, oop, inheritance, visibility

具有以下类层次结构：

```
class TheParent{

    public function parse(){
        $this->validate();
    }

}

class TheChild extends TheParent{

    private function validate(){
        echo 'Valid!!';
    }
}

$child= new TheChild();
$child->parse(); 
```

这将起作用的步骤顺序是什么？

问题是当我运行该代码时，它给出了以下错误：

```
Fatal error: Call to private method TheChild::validate() from context 'TheParent' on line 4 
```

由于`TheChild`继承自`TheParent`不应该`$this`调用`parse()`引用的实例`$child`，所以`validate()`对`parse()`?

**注意：**
在做了一些研究之后，我发现这个问题的解决方案要么根据PHP 手册中的[这个注释](http://www.php.net/manual/en/language.oop5.visibility.php#109324)`validate()`来制作函数，虽然我不完全理解为什么它在这种情况下工作。 `protected`

第二种解决方案是在父项中创建一个`abstract protected`方法`validate()`并在子项中将其覆盖（这将是多余的）到第一个解决方案，因为`protected`可以从父项访问子项的方法？！！

有人可以解释在这种情况下继承是如何工作的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T13:02:12.270

其他海报已经指出，需要保护这些方法才能访问它们。

我认为您应该在代码中再更改一件事。您的基类`parent`依赖于在子类中定义的方法。那是糟糕的编程。像这样更改您的代码：

```
abstract class TheParent{

    public function parse(){
        $this->validate();
    }

    abstract function validate();

}

class TheChild extends TheParent{

    protected function validate(){
        echo 'Valid!!';
    }
}

$child= new TheChild();
$child->parse(); 
```

创建一个抽象函数确保子类**肯定**有这个函数`validate`，因为抽象类的所有抽象函数都**必须实现**才能继承自这样的类

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T12:54:00.267

您对继承的想法是正确的，而不是可见性。

protected 可以被类以及继承的类和父类使用，private 只能在它定义的实际类中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:55:57.503

Private 只能由定义的类访问，既不是父类也不是子类。

改用受保护的：

```
class TheParent{

    public function parse(){
        $this->validate();
    }

}

class TheChild extends TheParent{

    protected function validate(){
        echo 'Valid!!';
    }
}

$child= new TheChild();
$child->parse(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:02:01.943

来自 PHP 文档

> [其他对象的可见性](http://php.net/manual/en/language.oop5.visibility.php)
> 
> 相同类型的对象将可以访问彼此的私有成员和受保护成员，即使它们不是相同的实例。这是因为在这些对象内部时，特定于实现的细节是已知的。

Private 只能通过`class which defines` or `Same object type`Example访问

```
class TheChild {
    public function parse(TheChild $new) {
        $this->validate();
        $new->validate(); // <------------ Calling Private Method of $new
    }
    private function validate() {
        echo 'Valid!!';
    }
}

$child = new TheChild();
$child->parse(new TheChild()); 
```

输出

有效！！有效！！

# mysql - 在 MySQL 中查找与纬度经度最近的邮政编码

> ID：12934746
> 
> 赞同：0
> 
> 时间：2012-10-17T12:52:00.603
> 
> 标签：mysql, latitude-longitude, spatial, postal-code

我有一个表**Postcode**包含所有英国邮政编码（大约 1.8mi 认为）

```
CREATE TABLE `Postcode` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Postcode` varchar(8) DEFAULT NULL,
  `Postcode_Simple` varchar(8) DEFAULT NULL,
  `Positional_Quality_Indicator` int(11) DEFAULT NULL,
  `Eastings` int(11) DEFAULT NULL,
  `Northings` int(11) DEFAULT NULL,
  `Latitude` double DEFAULT NULL,
  `Longitude` double DEFAULT NULL,
  `LatLong` point DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Postcode` (`Postcode`),
  KEY `Postcode_Simple` (`Postcode_Simple`),
  KEY `LatLong` (`LatLong`(25))
) ENGINE=InnoDB AUTO_INCREMENT=1755933 DEFAULT CHARSET=latin1; 
```

我想要实现的是......给定一个坐标，找到最接近坐标的邮政编码。问题是我为执行此操作而编写的查询（实际上是在存储过程中）遇到了一些问题。查询是：

```
SELECT
    Postcode
FROM
    (SELECT
        Postcode,
        GLENGTH(
            LINESTRINGFROMWKB(
                LINESTRING(
                    LatLong, 
                    GEOMFROMTEXT(CONCAT('POINT(', varLatitude, ' ', varLongitude, ')'))
                )
            )
        ) AS distance
    FROM
        Postcode
    WHERE
        NOT LatLong IS NULL) P
ORDER BY
    Distance
LIMIT
    1; 
```

我遇到的问题是查询需要大约 12 秒才能运行，而且我不能花那么长时间才能得到结果。谁能想到我可以可靠地加快这个查询的任何方法？

（这里是查询的解释）

```
id select_type table      type possible_keys key    key_len ref    rows    Extra
1  PRIMARY     <derived2> ALL  (NULL)        (NULL) (NULL)  (NULL) 1688034 Using filesort
2  DERIVED     Postcode   ALL  LatLong       (NULL) (NULL)  (NULL) 1717998 Using where 
```

我一直在想办法缩小我必须执行距离计算的初始数据量，但我无法想出任何不限于在给定范围内查找邮政编码的方法距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:01:39.960

也许尝试以下方式：

```
SELECT Postcode, lat, lon
FROM
(
SELECT Postcode, MAX(latitude) AS lat, MAX(longitude) AS lon
FROM PostCode

-- field name
GROUP BY Postcode 

HAVING MAX(latitude)<varLatitude AND MAX(longitude)<varLongitude

LIMIT 1
) AS temp 
```

这基本上会带来纬度和经度小于您指定但大于任何其他纬度/经度组合小于您的变量的邮政编码；如此有效地与您的变量最近的纬度/经度，因此最接近的邮政编码。您可以使用 MIN 和更大的然后尝试相同的方法，而不是反过来。

以上只会为您提供一个结果/邮政编码。如果您希望找到一些更漂亮的东西，比如找到一组以特定纬度/经度半径给出的邮政编码，那么您应该查看[https://developers.google.com/maps/articles/中解释的公式phpsqlsearch_v3#findnearsql](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T23:16:01.370

我已经写了一篇关于你所追求的内容的[教程。](http://www.tec20.co.uk/working-with-postcodes-and-spatial-data-in-mysql)

基本上，你在正确的路线上。为了提高搜索效率，您需要通过在 LatLong 字段上使用空间索引来减少 GLength() 计算的数量。如果您将搜索限制在一个细化的区域，例如您要比较邮政编码的点周围 10 英里的多边形，您会发现查询要快得多。

# java - 在java代码中实例化jsp 2.0的标签

> ID：12934747
> 
> 赞同：1
> 
> 时间：2012-10-17T12:52:04.983
> 
> 标签：java, jsp, tags

我正在将我的 java web 应用程序项目从 JSP 迁移到 thymeleaf。

我希望暂时能够在 thymeleaf 页面中重用一些简单的自定义 JSP 标记。以老式方式定义的自定义标签（如 java 文件）似乎不是问题。我只是实例化标签，设置假 PageContext，请求和响应，属性 - 并调用 doStartTag / doEndTag。

但是我找不到如何实例化表示 JSP 2.0 标记的对象（即在“.tag”文件中定义的方法。我该如何实现呢？

提前感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:04:01.377

看起来有两种方法：

1.  使用 jspc-maven-plugin 从 jsp 和标记文件中获取预编译的类 - 我检查了它的工作原理 - 但是这个插件的最新版本是 2.0-alpha-3，它现在已经 4 岁了。

2.  访问 servlet-container jsp 编译器（在大多数情况下是 jasper）并执行与第一个变体相同的操作，但在执行时按需执行。然而，这使得应用程序依赖于容器。

（我现在的个人意见是，最好完全避免这个想法 - 所有解决方案看起来都太不可靠而无法在生产中使用）

# android - 如何在我的代码上实现 AsyncTask？

> ID：12934755
> 
> 赞同：-2
> 
> 时间：2012-10-17T12:52:19.973
> 
> 标签：android, android-anr-dialog

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //connMgr = (ConnectivityManager) this.getSystemService(CONNECTIVITY_SERVICE);

        //if ((connMgr.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)
            //  || (connMgr.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED)) {

        if(new CheckInternetAvaliable(MobileReagentsActivity.this).isInternetAvaliable) {

            morePrefs = this.getSharedPreferences("morePrefs", MODE_WORLD_READABLE);

            final int welcomeScreenDisplay = 5000;   

            db = new VendorRatingDatabaseHandler(this);

            isDataInserted = morePrefs.getBoolean("flagValue", false);

            Thread welcomeThread = new Thread() {

                int wait = 0;

                @Override
                public void run() {
                    try {
                        super.run();
                        while (wait < welcomeScreenDisplay) {
                            sleep(100);
                            wait += 100;
                        }
                    } catch (Exception e) {
                        System.out.println("EXc=" + e);
                    } finally {
                        Intent intent = new Intent(MobileActivity.this, HomeScreen.class);

                        intent.putExtra("message", message);
                        intent.putExtra("topMolNames", topMolNames);
                        intent.putExtra("topFomls", topFomls);
                        intent.putExtra("lastConnect", lastConnect);
                        intent.putExtra("dateDiff", dateDiff);
                        intent.putExtra("moldrawPrefs", moldrawPrefs);

                        startActivity(intent);
                        Log.i("Test", "Starting Home Screen!! ");
                        MobileActivity.this.finish();
                    }
                }
            };
            welcomeThread.start();

            try {

                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();

                URL url = new URL(ConstantsClass.MORE_STARTUP_MESSAGE_URL + "?uid="+new AndroidUdIdClass(MobileActivity.this).androidId+"&device=android"); // URL of the XML

                XMLHandler myXMLHandler = new XMLHandler();
                xmlR.setContentHandler(myXMLHandler);
                xmlR.parse(new InputSource(url.openStream()));

            } catch (Exception e) {
                System.out.println(e);
            }

             getsetXML = XMLHandler.data;

             message = getsetXML.getMessage();
             vendorListFull = getsetXML.getVendorListFull();
             vendorListUser = getsetXML.getVendorListUser();
             topMolNames = getsetXML.getTopMolNames();
             topFomls = getsetXML.getTopFomls();
             lastConnect = getsetXML.getLastConnect();
             dateDiff = getsetXML.getDateDiff();
             moldrawPrefs = getsetXML.getMoldrawPrefs();

             prefsEditor = morePrefs.edit();
             prefsEditor.putString("UserVendorList", vendorListUser);
             prefsEditor.putString("VendorListFull", vendorListFull);
             prefsEditor.commit();

             //---------------------------------------------------------

             String[] str_arr_vendor_list = vendorListFull.split(",");

             for(int i=0; i<str_arr_vendor_list.length; i++) {

                 VendorRatingData vendorRatingData = new VendorRatingData();

                 vendorRatingData.setVendorName(str_arr_vendor_list[i]);
                 vendorRatingData.setVendorRating("0");

                 VendorRatingData vendor_rating = new VendorRatingData();

                 if(!isDataInserted) {

                     db.addVendorRating(vendorRatingData);      

                 }else {

                     vendor_rating = db.getRating(str_arr_vendor_list[i]);

                    // Toast.makeText(getApplicationContext(), "vendor_rating::" + i, Toast.LENGTH_LONG).show();
                     if(!(vendor_rating.getVendorName().equalsIgnoreCase(str_arr_vendor_list[i]))) {

                         db.addVendorRating(vendorRatingData);
                     }
                 }

             }

             db.close();

             prefsEditor = morePrefs.edit();
             prefsEditor.putBoolean("flagValue", true);
             prefsEditor.commit();
        } 
```

当数据获取需要时间时执行此代码时出现 ANR 错误，因此我想将 AsyncTask 添加到其中，但我不知道该怎么做。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:10:11.803

像这样跟随：

```
@Override
protected void onNewIntent(Intent intent) {
    //this is very important, otherwise you would get a null Scheme in the onResume later on.
    setIntent(intent);
}

public class FetchAlbums extends AsyncTask<Void, Void, ArrayList<Photoset>> {

//declarations what u required
@Override
protected void onPreExecute() {          
super.onPreExecute();
}

@Override
protected ArrayList<PhotoSet> doInBackground(Void... params) {

    //do ur work here completly that will runs as background
}

@Override
protected void onPostExecute(ArrayList<PhotoSet> result) {       
super.onPostExecute(result);
} 
} 
```

# c# - 找不到 XML QName 的适当操作

> ID：12934762
> 
> 赞同：1
> 
> 时间：2012-10-17T12:52:37.563
> 
> 标签：c#, windows-services

我有另一个开发人员编写的 .NET 2.0 Windows 服务，该开发人员后来继续前进。我们没有原始源代码，所以我使用 JustDecompile 将项目反向工程回源代码。

当我尝试测试此 Web 服务时，它不断抛出错误：找不到 XML QName {my namespace} 的适当操作

代码装饰有

```
[WebServiceBinding(Name="WFCWebServicesSoapBinding", Namespace="my namespace")] 
```

原始代码是用 VB.NET 编写的；JustDecompile 仅支持 C# 中的逆向工程。

我对为什么会发生这种情况感到有点困惑——如果我从生产环境中运行的代码中反编译了应用程序，那么如果我重新编译该代码，它不应该同样工作吗？

**编辑**

查看 JustDecompile 生成的内容与我可用的最后一个已知版本（此开发人员在进行更改时创建了单独的版本 - 可能是因为在我之前，没有虚拟机系统），我认为人类没有任何办法写了 JustDecompile 生成的内容。我认为可能有一个控制角色或某些东西会影响服务......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:36:57.670

我设法找到了我正在使用的代码的旧版本。很难准确地解读它们之间的差异，因为 JustDecompile 大约将代码中的行数翻了一番。（它变得一团糟——如果你使用 JustDecompile，请注意代码的编写方式会对你的反编译项目产生影响）

我能够很好地运行这个旧代码。我认为可能发生的是隐藏字符或导致 Web 服务调用崩溃的东西。

# graphviz - Graphviz --- 边缘标签太靠近另一个边缘

> ID：12934763
> 
> 赞同：12
> 
> 时间：2012-10-17T12:52:39.917
> 
> 标签：graphviz

我有以下代码，它会产生下图。如您所见，边缘和边缘标签周围有点拥挤，尤其是“^a”周围。创造更多空间的最佳方法是什么，以便人们可以清楚地看到哪个标签属于哪个边缘？

```
digraph finite_state_machine {                                                                                                                                                                                  
    pad=0.2;
    {
        rank=same;
        node [shape = point, style = invis]; q_0;
        node [shape = doublecircle, style = solid]; q_5;
        node [shape = circle];
        q_1 [ label = <<i>q<sub>1</sub></i>> ];
        q_2 [ label = <<i>q<sub>2</sub></i>> ];
        q_3 [ label = <<i>q<sub>3</sub></i>> ];
        q_4 [ label = <<i>q<sub>4</sub></i>> ];
        q_5 [ label = <<i>q<sub>5</sub></i>> ];
        q_0 -> q_1;
        q_1 -> q_2 [ label = "." ];
        q_1 -> q_2 [ label = <&epsilon;>, constraint=false ];
        q_2 -> q_1 [ label = <&epsilon;>, constraint=false ];
        q_2 -> q_3 [ label = <<i>a</i>> ];
        q_3 -> q_4 [ label = <<i>^a</i>> ];
        q_3 -> q_4 [ label = <&epsilon;>, constraint=false ];
        q_4 -> q_3 [ label = <&epsilon;>, constraint=false ];
        q_4 -> q_5 [ label = <<i>b</i>> ];
    }
} 
```

![在此处输入图像描述](../Images/f929d453b68a09ef47a872a058b3f4d0.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-23T12:38:40.737

Graphviz中没有[属性](http://www.graphviz.org/doc/info/attrs.html#d:margin)可以调整边缘标签周围的边距/填充。您可能最接近您需要的效果是使用`\n`在标签上方/下方引入空白行以强制空间。

显然，这不会自动扩展到任何东西。

或者，您可以尝试使用该`ranksep`属性来强制增加一些空间。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-01T20:18:21.643

如果[xlabel](https://graphviz.gitlab.io/_pages/doc/info/attrs.html#d:xlabel)不能解决它，那么将标签包装在表格中有时可能是一种解决方法。例如：

```
q_1 -> q_2 [ label = <<table cellpadding="10" border="0" cellborder="0">
                        <tr><td>&epsilon;</td></tr>
                      </table>>, 
             constraint = false ]; 
```

要在一侧添加比另一侧更多的空间，您可以添加一个空单元格。然后代码很快变得（更多）不可读，但您可以使用简单的 sed 脚本来预处理您的点文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-07T20:11:43.390

我知道这是一个老问题，但如果这是您正在寻找的，下面的这种方法也可能会有所帮助。见下图。我在您的代码中添加了以下内容：

*   minlen=2（扩大节点之间的间隙）

*   tailport=n/s（将箭头尾部的位置更改为北/南）

*   headport=n/s（将头部的位置更改为向北或向南的箭头）

```
 digraph finite_state_machine {                                                                                                                                                                                  
    pad=0.2;
    {
        rank=same;
        node [shape = point, style = invis]; q_0;
        node [shape = doublecircle, style = solid]; q_5;
        node [shape = circle];
        q_1 [ label = <<i>q<sub>1</sub></i>> ];
        q_2 [ label = <<i>q<sub>2</sub></i>> ];
        q_3 [ label = <<i>q<sub>3</sub></i>> ];
        q_4 [ label = <<i>q<sub>4</sub></i>> ];
        q_5 [ label = <<i>q<sub>5</sub></i>> ];
        q_0 -> q_1;
        q_1 -> q_2 [ label = "." ];
        q_1 -> q_2 [ label = <&epsilon;>, constraint=false, minlen=2, tailport=n, headport=n];
        q_2 -> q_1 [ label = <&epsilon;>, constraint=false, minlen=2, tailport=s, headport=s];
        q_2 -> q_3 [ label = <<i>a</i>> ];
        q_3 -> q_4 [ label = <<i>^a</i>> ];
        q_3 -> q_4 [ label = <&epsilon;>, constraint=false, minlen=2, tailport=n, headport=n];
        q_4 -> q_3 [ label = <&epsilon;>, constraint=false, minlen=2, tailport=s, headport=s];
        q_4 -> q_5 [ label = <<i>b</i>> ];
    }
} 
```

![图片](../Images/d05cdbad27a22f410588c7cb475b157f.png)

# sqlite - 更新行的 SQLite 触发器卡住了

> ID：12934765
> 
> 赞同：2
> 
> 时间：2012-10-17T12:52:44.783
> 
> 标签：sqlite, triggers

我正在尝试设置插入或更新点图层的属性，该属性具有从同一数据库中的多边形图层（12 位分水岭标识符）派生的属性。所以这是使用 SpatiaLite（SQLite 的空间扩展），但这是一个细节，这应该只是一个 SQL 问题。

所以，我在下面创建了两个触发器。它设置动作时间戳的`UPDATED_ON`部分效果很好。但是，无论点出现在何处，空间部分总是分配相同的值，如所附示例所示。它似乎对所有行执行相同的测试，输入来自一行，但应用于错误的行。因此，触发器的 SQL 中的某些内容必须抓住错误的点来执行操作。是`new.rowid`零件吗？

```
CREATE TRIGGER INSERT_UDT_HUC12 AFTER INSERT ON mypoints
BEGIN
  UPDATE mypoints SET UPDATED_ON = DATETIME('NOW') WHERE rowid = new.rowid;
  UPDATE mypoints SET WBD_HUC12 =
              (SELECT HUC_12 FROM cumberland_huc12, mypoints
               WHERE st_intersects(mypoints.Geometry, cumberland_huc12.Geometry))
      WHERE mypoints.rowid = new.rowid;
END;

CREATE TRIGGER UPDATE_UDT_HUC12 AFTER UPDATE ON mypoints
BEGIN
  UPDATE mypoints SET UPDATED_ON = DATETIME('NOW') WHERE rowid = new.rowid;
  UPDATE mypoints SET WBD_HUC12 =
              (SELECT HUC_12 FROM cumberland_huc12, mypoints
               WHERE st_intersects(mypoints.Geometry, cumberland_huc12.Geometry))
      WHERE mypoints.rowid = new.rowid;
END 
```

![示例地图](../Images/7e14a2fc5dbd435372a69bb4e96983bc.png "示例地图")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:58:55.143

返回新流域标识符的子查询如下：

```
SELECT HUC_12 FROM cumberland_huc12, mypoints
WHERE st_intersects(mypoints.Geometry, cumberland_huc12.Geometry) 
```

请注意，这将返回与 中的*任何*点相交的*所有*分水岭。因此，您的触发器将收到恰好是此查询中第一个的触发器。*`mypoints`*

 *`WHERE mypoints.rowid = new.rowid`您还必须在子查询中使用过滤器。*

# javascript - 用身体的百分比宽度和高度控制图像的纵横比

> ID：12934768
> 
> 赞同：0
> 
> 时间：2012-10-17T12:52:49.973
> 
> 标签：javascript, jquery, html, css

我有这两张图片出现在我的网站上，我是从另一家公司的服务器上提取的。我需要这些照片随浏览器窗口缩放，所以我给了它们一个百分比宽度和高度以随身体缩放。

问题是其中一些图像尺寸不同，我需要所有图像看起来彼此相同。当我知道图像的宽度和高度的值时，这很容易做到，因为我可以裁剪或调整大小。但是，您如何才能保持具有可扩展宽度和高度的比率呢？

我认为需要一些 JavaScript 才能做到这一点。这是我拥有的CSS：

```
html {
  width: 100%;
  height: 100%;
}
body {
  width: 100%;
  height: 100%;
  margin: 0px;
  padding: 0px;
}
.image {
  width: 40%;
  height: 40%;
  margin: 1%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T22:35:46.037

如果你不关心 IE8，你可以指定`width`. 大多数浏览器都会为您保持纵横比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:56:32.523

仅使用 CSS 会花费您大量时间来针对所有兄弟进行优化。

通过一些修改和 js，您可以使用[完美的背景图像来实现这一点](http://css-tricks.com/perfect-full-page-background-image/)

# sql - SSIS 包未填充任何结果

> ID：12934770
> 
> 赞同：1
> 
> 时间：2012-10-17T12:52:54.940
> 
> 标签：sql, sql-server, visual-studio-2008, ssis

我正在尝试将数据库中的数据加载到标准模板的 excel 文件中。包已经准备好并且正在运行，抛出了几个验证警告，指出可能会发生截断，因为我的模板的字段比我匹配的 DB 列的大小略小。

但是，没有数据被填充到我的 Excel 工作表中。没有报告错误，当我单击我的 OLE DB 源的预览时，它会向我显示结果行。不过，这些都没有填充到我的 Excel 表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T13:30:27.387

您应该首先确保您有通过管道传输的数据。在将源任务连接到目标任务的箭头中（我假设您之间没有任何步骤），双击，您将打开数据流路径编辑器。单击数据查看器，然后单击添加并单击确定。这将使您能够看到正在通过管道移动的内容。

![在此处输入图像描述](../Images/f923d5d4afaf6fc7ab02987407f02fad.png)

Excel 需要考虑的一点是，它更喜欢 Unicode 数据类型而不是非 Unicode。您可能有一个非 Unicode 的数据库排序规则，因此您可能必须在数据转换任务中转换值。

![在此处输入图像描述](../Images/9b0d10e17e9406c423accc0c8a11e1f1.png)

![在此处输入图像描述](../Images/0a740d877cad23bd479b60535c263d5d.png)

此外，您可能需要强制包在 32 位运行时中执行。VS 应用程序是在 32 位环境中开发的，因此您可以看到的驱动程序是 32 位的。如果没有 64 位等效版本，则在您尝试运行该软件包时它会中断。右键单击您的项目并单击“属性”，然后在“调试”菜单下，您需要将设置 Run64BitRuntime 更改为 FALSE。

![在此处输入图像描述](../Images/6c080bc7a0ae0d007056cc560e9bfba7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:55:49.713

几个可能导致答案的问题：

1.  您是否检查过数据在运行时实际上是通过 SSIS 包传递的？
2.  你有仔细检查你的映射吗？
3.  尝试在包内进行转换，以免出现截断问题

如果您添加有关您正在运行的内容的更多详细信息，我可能会给出更好的答案。

编辑：考虑到您在评论中写的内容，我会坚决尝试第三种选择。让我们知道这是否不能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:59:16.250

你没有提供太多信息。在源和 Excel 目标之间添加数据视图，以查看数据是否通过。这样做，只需双击数据流路径，选择数据视图，然后添加一个网格。

运行您的应用程序。如果您看到数据，请提供更多详细信息，以便我们为您提供帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T20:36:34.743

就像对遇到此问题的其他人的帮助一样-我遇到了类似的问题，并且在我发现发生了什么之前把头撞在墙上很长一段时间。我的导出是将数据写入文件，但因为我使用模板文件作为目标，并且该模板文件具有已删除的先前数据，所以该过程将数据附加到先前使用的行下方。因此，例如，我正在写出三行数据，但数据直到第 344 行才开始！

解决方案是在我的模板文件中选择整个电子表格，并删除它的每一部分，这样我就有了一张完全干净的表格。然后我将我的标题行添加到干净的工作表中并保存了它。然后我运行了数据流任务，然后...... ta-daa !!! 完美出口！

希望这将帮助一些在未来遇到同样问题的可怜的灵魂！

# jquery - Ajax 错误 - 请求外部页面时出现 500 内部服务器错误

> ID：12934771
> 
> 赞同：0
> 
> 时间：2012-10-17T12:52:59.667
> 
> 标签：jquery, asp.net, ajax

我对 ajax 有疑问。这是我在 div 中加载页面或其中一部分的代码。

```
 $("a").click(function (event) {
  var Rel = $(this).attr("rel");//The class name want to load from Default2.aspx
  if (Rel) {
      $('.Content_Part').load("Default2.aspx ." + Rel )
  }
  event.preventDefault();
  }); 
```

我当前的页面名称是“Default.aspx”，目标页面是“Default2.aspx”，问题是当我想从 Default2.aspx 加载某些内容时出现错误“500 internal server error”但是当我想加载某些内容时从 Default.aspx 一切正常。
有关更多信息：
我在 default.aspx 中有一个类名为“Content_Part”的 div，我想从 default2.aspx 中加载一个类名为“myTable”的表到“Content_Part”。
我正在使用此功能，它工作正常，但 1 小时后出现此问题。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:17:15.180

**顺便说一句，不回答你的问题，但你应该处理 ajax 错误。**

```
<script>
 $('.Content_Part').load("Default2.aspx ." + Rel, function(response, status, xhr) {
  if (status == "error") {
    var msg = "Sorry but there was an error: ";
    $(this).html(msg + xhr.status + " " + xhr.statusText);
  }
});
</script> 
```

# javascript - 自定义 Dojo 构建中的最大应用程序大小？

> ID：12934772
> 
> 赞同：0
> 
> 时间：2012-10-17T12:53:02.750
> 
> 标签：javascript, dojo

在我的自定义 Dojo 构建中（使用来自 Github 的 dojo-boilerplate 模板）我的 dojo.js 仅输出：

//>>建立

而 dojo.js.uncompressed.js 包含真实代码（7.7MB）。

我对其他应用程序使用相同的锅炉模板，并且似乎仅适用于最大 3 MB 的较小应用程序。

有什么我可以做的吗？

我的构建中没有错误，只有一些警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:08:23.040

可能是在压缩过程中发生了错误，但是闭包太冗长了，您看不到错误。您可以通过在您的配置文件中添加以下行来尝试关闭 Closure Compiler 的日志记录级别：

```
var profile = {
//your config here
};

//Dial down the closure verbosity
Packages.com.google.javascript.jscomp.Compiler.setLoggingLevel(Packages.java.util.logging.Level.WARNING); 
```

# php - 如何使用同一列中的数据

> ID：12934774
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:53:03.847
> 
> 标签：php, mysql

截图mysql： ![在此处输入图像描述](../Images/8544ca22f5403b96c6b88801cfe697c0.png)

如果我想使用“发件人姓名”或“主题”列中的数据，那么我使用代码

```
include ("connect.php");
$model = mysql_query("SELECT * FROM entries WHERE entries_id='3' limit 1"); 
$profil = mysql_fetch_array($model);

echo $profil[sender_name]; 
echo $profil[subject]; 
```

但是如何使用用户输入并位于“数据”列中的其他数据？

例如，在“数据”列中，有城市、地址、电话等字段。

使用什么代码仅插入城市名称（例如：柏林）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:00:46.560

数据列中的值是序列化的。要使用它，您必须首先对其进行反序列化[（参见 php.net - unserialize）](http://php.net/manual/en/function.unserialize.php)。

例如（使用您的逻辑，我很确定您不需要此查询的限制部分。）

```
include ("connect.php");
$model = mysql_query("SELECT * FROM entries WHERE entries_id='3' limit 1"); 
$profile = mysql_fetch_array($model);
$data = unserialize($profile['data']);  //This is now an array of the data 
```

要查看未序列化数据的外观，您可以执行此操作

```
print_r($data); 
```

并使用未序列化的数据来获取价值，你会这样做

```
echo $data[0]['value']; //This will print "Berlin" for entries_id = 3. 
```

# c - 在 C 中，为什么当我修改它的内容时我的指针参数会改变？

> ID：12934784
> 
> 赞同：1
> 
> 时间：2012-10-17T12:53:29.457
> 
> 标签：c, pointers

我有这个自定义字符串复制功能，我注意到`*dest`参数在取消引用和修改其内容时发生了变化：

```
char *copyArray(char *dest, char *src)
{
    char *a = dest;

    while (*dest++ = *src++)
        ;   
    char *b = dest;

    if ( (a-b) != 0)  
        printf("Dest pointer has changed\n");

    return dest;                                                                        
} 
```

如果您考虑以下代码：

```
int main()
{
    char name [] = "Hello, there!";

    char *new = copyArray(name, "bye");

    printf("New is '%s', name is '%s'\n", new, name); 

    return 0;
} 
```

我得到以下输出：

```
Dest pointer has changed
New is 'o, there!', name is 'bye' 
```

为什么会这样？

我的意图是`*new`指向相同的位置`name[]`指向，但显然随着地址的变化，它指向不同的地方。

我觉得发生的事情是，一旦复制结束，C 将目标字符串的原始内容减去更改的字符数（4 表示“再见”）移动到新地址并将其分配给`*dest`.

这是真的发生了吗？有人可以向我解释为什么吗？

这与工作无关，我只是想更好地理解指针的行为。

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:56:35.593

问题出现在这里

```
while (*dest++ = *src++)
    ; 
```

用简单的英语表示，将 src 指向的东西复制到 dest 指向的东西中，然后增加 src 和 dest （也就是说，将两个指针都前进到指向下一个东西）。

如果您想避免更改指针，请使用指针的副本 - 例如您已经创建的变量，然后返回该变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T12:57:48.573

参数在函数`dest`内部被递增（在`while`条件下）四次（`"bye"`包括 4 个字符，包括将在 的最终迭代中分配的 null `while`），`copyArray()`然后返回它的值以`new`指向`name + 4`。

有`new`指向从的开始`name`返回。`a``copyArray()`

# nsis - 在 NSIS 安装程序中执行 Bat 文件 - 不工作

> ID：12934788
> 
> 赞同：1
> 
> 时间：2012-10-17T12:53:54.987
> 
> 标签：nsis

我已经为我的 java 项目成功构建了 nsis 脚本。我有一个批处理文件，我需要在我的 NSIS 安装程序中运行它。它必须在提取所有文件后运行。我尝试了以下命令

```
!define MUI_FINISHPAGE_RUN $INSTDIR\bin\batch.bat 
```

这个也试过：

```
SetOutPath $INSTDIR
ExpandEnvStrings $0 %COMSPEC%
nsExec::ExecToStack '"$INSTDIR\batch.bat"' 
```

我已经提到了这个[链接](https://stackoverflow.com/questions/3265141/executing-batch-file-in-nsis-installer)。

我的要求是：

1.安装完成后如何使用Nsis脚本启动批处理文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:36:19.177

如果您不打算使用结果，为什么要调用 ExpandEnvStrings？您的两个示例中的路径甚至都不匹配。

只要您获得正确的路径和引号，它就应该可以工作：

```
!include MUI2.nsh
!insertmacro MUI_PAGE_INSTFILES
!define MUI_FINISHPAGE_RUN
!define MUI_FINISHPAGE_RUN_FUNCTION RunBatch
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE English

Function RunBatch
;The most basic version, runs with visible console:
ExecWait '"$temp\test.cmd" /foo "bar baz" /blergh'

;You must use cmd.exe if you want redirection (With stupid extra quotes for cmd.exe):
ExpandEnvStrings $0 %COMSPEC%
ExecWait '"$0" /C ""$temp\test.cmd" /foo "bar baz" /blergh > "$temp\stdout.txt""'

;Use one of the exec plugins if you want to hide the console:
nsExec::Exec '"$temp\test.cmd" /foo "bar baz" /blergh'
FunctionEnd 
```

您可以根据需要使用几个 exec 插件：[nsExec](http://nsis.sourceforge.net/Docs/nsExec/nsExec.txt)、[ExecDos](http://nsis.sourceforge.net/ExecDos_plug-in) 或[ExecCmd](http://nsis.sourceforge.net/ExecCmd_plug-in)

# javascript - 在javascript中更改outerHTML

> ID：12934793
> 
> 赞同：6
> 
> 时间：2012-10-17T12:54:06.123
> 
> 标签：javascript, jquery

`$(editor[i])[0].outerHTML`值为：

```
 <p style="color: red;" data-mce-style="color: red;">some string</p> 
```

我想`data-mce-style="color: red;"`消失。
我这样做是这样的：

```
$(editor[i])[0].outerHTML.replace('data-mce-style="color: red;"', ''); 
```

但它不会取代它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T12:56:50.880

`.replace`创建一个*新*的转换字符串；它不会改变原始变量。您只是创建一个新字符串，而不是将新字符串存储回`outerHTML`，例如：

```
$(editor[i])[0].outerHTML = $(editor[i])[0].outerHTML.replace('data-mce-style="color: red;"', ''); 
```

`<p>`但是，这只能解决您当前的问题——有比字符串化和重新解析元素更好的方法来完成您的需要。由于您使用的是 jQuery，最明显的方法是使用该[`removeAttr`](http://api.jquery.com/removeAttr/)方法：

```
$(editor[i]).removeAttr('data-mce-style')​;​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:56:59.057

尝试：

```
$(editor[i]).removeAttr('data-mce-style') 
```

[http://api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/)

当然，这将适用于选择器中的所有元素。如果您只想将此应用于元素 0，请使用：

```
$(editor[i]).first().removeAttr('data-mce-style') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:56:54.503

[element.setAttribute(attr, null)](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute) 或 [element.removeAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.removeAttribute)

不需要 outerHTML 和替换。请注意，替换 HTML 将删除事件侦听器（属性事件处理程序除外）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T12:57:43.267

```
$(editor[i]).removeAttr('data-mce-style')​;​ 
```

[**小提琴**](http://jsfiddle.net/8FERC/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T12:55:29.963

尝试使用 jQuery `removeData()`：

```
$(editor[i]).removeData('mce-style'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T13:08:26.450

您需要更改/删除特定属性，因为您需要使用

```
$(editor[i]).removeAttr('data-mce-style'); 
```

有关更多信息，请查看以下链接： [http ://api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/)

如果您需要更改特定属性的值，请执行以下操作：

```
attr(attributeName, value); 
```

有关相同的更多信息，请查看以下链接： [http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

# php - 未知的PHP

> ID：12934796
> 
> 赞同：0
> 
> 时间：2012-10-17T12:54:12.873
> 
> 标签：php

好的。我看到了这段代码，我很好奇它是如何工作的以及它做了什么。谁能给我解释一下？谢谢！

```
$_SESSION['langtype']
   = (empty($_SESSION['langtype'])) ? 'false' : $_SESSION['langtype']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:54:49.447

如果未设置值，则将其放入 false `$_SESSION['langtype']`，否则将保留当前值。

另请参阅[http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:55:54.097

如果为空（或带有键的值不存在），它会放入`"false"`（`$_SESSION['langtype']`作为字符串，而不是 BOOL VALUE） ，否则保持相同的值。`$_SESSION['langtype']``langtype`

`"false"`把它作为一个字符串可能是个坏主意。例如，如果这个杰作的作者决定做一个检查`if ($_SESSION['langtype']) { }`，无论如何它都会返回 true。我很好奇在哪种情况下这个解决方案应该是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:56:36.967

`if-else`它是陈述的简写。如果`(empty($_SESSION['langtype']))`那么`$_SESSION['langtype'] = false`否则`$_SESSION['langtype'] = $_SESSION['langtype']`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T12:57:45.703

这是本语句中使用的三元运算符

```
$_SESSION['langtype'] = (empty($_SESSION['langtype'])) ？'假' : $_SESSION['langtype'];

```

这意味着如果名为**langtype**的会话变量为空则返回 false，否则使用与定义相同的 langtype

之后的部分**？**表示值 if 函数

```
空（$_SESSION['langtype']）
```

返回 true（如果它为空，则将其设置为 false 或取消定义该变量），即

```
$_SESSION['langtype'] = false;
```

和之后的部分**：**表示 else 语句，如果 langtype 不为空，则保持原样（等于定义的值）为

```
$_SESSION['langtype']=$_SESSION['langtype'];
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T12:58:40.100

它被称为三元运算符。它由条件表达式和两个条件评估的返回值组成。

```
// if expression evaluates to true first value will be returned,
// otherwise it will the second 
$variable = (expression) ? 'value if true' : 'value if false'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T12:57:51.073

如果它没有设置（真）那么它将是假的，否则如果它（假）它会打印会话值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T12:59:39.247

```
$_SESSION['langtype'] = (empty($_SESSION['langtype'])) ? 'false' : $_SESSION['langtype']; 
```

对于初学者，上面的代码与您可能知道的长版本相同

```
<?php
     if(empty($_SESSION['langtype'])) {
           $_SESSION['langtype'] = 'false';
     } else {
          $_SESSION['langtype'] =  $_SESSION['langtype'];
     }
 ?> 
```

# exception - 使用 Python 在 MySql 中插入 blob 对象时出现编程错误

> ID：12934803
> 
> 赞同：0
> 
> 时间：2012-10-17T12:54:33.630
> 
> 标签：exception, unicode, python-2.7, mysql-python

我有一个 MySQL 数据库和一个带有架构的表

```
tweet_id BIGINT
tweet_metadata LONGBLOB 
```

我正在尝试在我的数据库中插入一行，如下所示：

```
import MySQLdb as mysql

host = 'localhost'
user = 'root'
passwd = '************'
db = 'twitter'

insert_tweet_query = ''' INSERT INTO tweets(tweet_id, tweet_metadata) VALUES(%s, %s)'''

''' Creates a MySQL connection and returns the cursor '''
def create_connection():
    connection = mysql.connect(host, user, passwd, db,use_unicode=True)
    connection.set_character_set('utf8')
    cursor = connection.cursor()
    cursor.execute('SET NAMES utf8;')
    cursor.execute('SET CHARACTER SET utf8;')
    cursor.execute('SET character_set_connection=utf8;')    
    return connection, cursor

''' Close the connection '''
def close_connection(cursor, connection):
    cursor.close()
    connection.commit()
    connection.close()

connection, cursor = create_connection()    
tweet = dict({u'contributors': None, u'truncated': False, u'text': u'RT @HMV_Anime: \u7530\u6751\u3086\u304b\u308a\u59eb\u30d9\u30b9\u30c8\u30a2\u30eb\u30d0\u30e0\u300cEverlasting Gift\u300d\u98db\u3076\u3088\u3046\u306b\u58f2\u308c\u3066\u3044\u307e\u3059\uff01\u6728\u66dc\u306f\u6a2a\u30a2\u30ea\u516c\u6f14\uff01\u300c\u30d1\u30fc\u30c6\u30a3\u30fc\u306f\u7d42\u308f\u3089\u306a\u3044\u300d\u306e\u30e9\u30c3\u30d7\u30d1\u30fc\u30c8\u306e\u4e88\u7fd2\u5fa9\u7fd2\u306b\u3082\u5fc5\u9808\u3067\u3059\uff01 http://t.co/SVWm2E1r http://t.co/rSP ...', u'in_reply_to_status_id': None, u'id': 258550064480387072L, u'source': u'<a href="http://shootingstar067.com/" rel="nofollow">ShootingStar</a>', u'retweeted': False, u'coordinates': None, u'entities': {u'user_mentions': [{u'indices': [3, 13], u'id': 147791077, u'id_str': u'147791077', u'screen_name': u'HMV_Anime', u'name': u'HMV\u30a2\u30cb\u30e1\uff01'}], u'hashtags': [], u'urls': [{u'indices': [100, 120], u'url': u'http://t.co/SVWm2E1r', u'expanded_url': u'http://ow.ly/evEvT', u'display_url': u'ow.ly/evEvT'}, {u'indices': [121, 136], u'url': u'http://t.co/rSP', u'expanded_url': u'http://t.co/rSP', u'display_url': u't.co/rSP'}]}, u'in_reply_to_screen_name': None, u'in_reply_to_user_id': None, u'retweet_count': 40, u'id_str': u'258550064480387072', u'favorited': False, u'retweeted_status': {u'contributors': None, u'truncated': False, u'text': u'\u7530\u6751\u3086\u304b\u308a\u59eb\u30d9\u30b9\u30c8\u30a2\u30eb\u30d0\u30e0\u300cEverlasting Gift\u300d\u98db\u3076\u3088\u3046\u306b\u58f2\u308c\u3066\u3044\u307e\u3059\uff01\u6728\u66dc\u306f\u6a2a\u30a2\u30ea\u516c\u6f14\uff01\u300c\u30d1\u30fc\u30c6\u30a3\u30fc\u306f\u7d42\u308f\u3089\u306a\u3044\u300d\u306e\u30e9\u30c3\u30d7\u30d1\u30fc\u30c8\u306e\u4e88\u7fd2\u5fa9\u7fd2\u306b\u3082\u5fc5\u9808\u3067\u3059\uff01 http://t.co/SVWm2E1r http://t.co/rSPYm0bE #yukarin', u'in_reply_to_status_id': None, u'id': 258160273171574784L, u'source': u'<a href="http://www.hootsuite.com" rel="nofollow">HootSuite</a>', u'retweeted': False, u'coordinates': None, u'entities': {u'user_mentions': [], u'hashtags': [{u'indices': [127, 135], u'text': u'yukarin'}], u'urls': [{u'indices': [85, 105], u'url': u'http://t.co/SVWm2E1r', u'expanded_url': u'http://ow.ly/evEvT', u'display_url': u'ow.ly/evEvT'}, {u'indices': [106, 126], u'url': u'http://t.co/rSPYm0bE', u'expanded_url': u'http://twitpic.com/awuzz0', u'display_url': u'twitpic.com/awuzz0'}]}, u'in_reply_to_screen_name': None, u'in_reply_to_user_id': None, u'retweet_count': 40, u'id_str': u'258160273171574784', u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': True, u'id': 147791077, u'verified': False, u'profile_image_url_https': u'https://si0.twimg.com/profile_images/2573283223/mn4nu924bnxh643sgu1p_normal.jpeg', u'profile_sidebar_fill_color': u'DDEEF6', u'geo_enabled': False, u'profile_text_color': u'333333', u'followers_count': 17108, u'profile_sidebar_border_color': u'C0DEED', u'location': u'\u4e03\u68ee\u4e2d\u5b66\u6821', u'default_profile_image': False, u'listed_count': 1012, u'utc_offset': 32400, u'statuses_count': 33277, u'description': u'\u79c1\u3001\u8d64\u5ea7\u3042\u304b\u308a\u3002\u3069\u3053\u306b\u3067\u3082\u3044\u308b\u3054\u304f\u666e\u901a\u306e\u4e2d\u5b66\u751f\u3002\u305d\u3093\u306a\u79c1\u3060\u3051\u3069\u3001\u6bce\u65e5\u3068\u3063\u3066\u3082\u5145\u5b9f\u3057\u3066\u308b\u306e\u3002\u3060\u3063\u3066\u3042\u304b\u308a\u306f\u2026\u2026 \u3060\u3063\u3066\u3042\u304b\u308a\u306f\u2026\u2026\u3000\uff08\u203b\u3053\u3061\u3089\u306f@HMV_Japan\u306e\u59c9\u59b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u3059\u3002\u3054\u8cea\u554f\u30fb\u304a\u554f\u3044\u5408\u308f\u305b\u306f\u3001HMV\u30b5\u30a4\u30c8\u4e0a\u306e\u5c02\u7528\u30d5\u30a9\u30fc\u30e0\u3088\u308a\u304a\u9858\u3044\u81f4\u3057\u307e\u3059\u3002\uff09', u'friends_count': 17046, u'profile_link_color': u'0084B4', u'profile_image_url': u'http://a0.twimg.com/profile_images/2573283223/mn4nu924bnxh643sgu1p_normal.jpeg', u'following': None, u'profile_background_image_url_https': u'https://si0.twimg.com/profile_background_images/104844943/bg_hmv2.gif', u'profile_background_color': u'202020', u'id_str': u'147791077', u'profile_background_image_url': u'http://a0.twimg.com/profile_background_images/104844943/bg_hmv2.gif', u'name': u'HMV\u30a2\u30cb\u30e1\uff01', u'lang': u'ja', u'profile_background_tile': False, u'favourites_count': 0, u'screen_name': u'HMV_Anime', u'notifications': None, u'url': u'http://www.hmv.co.jp/anime/', u'created_at': u'Tue May 25 02:07:35 +0000 2010', u'contributors_enabled': False, u'time_zone': u'Tokyo', u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'created_at': u'Tue Oct 16 10:59:40 +0000 2012', u'possibly_sensitive_editable': True, u'in_reply_to_status_id_str': None, u'place': None}, u'user': {u'follow_request_sent': None, u'profile_use_background_image': True, u'id': 500471418, u'verified': False, u'profile_image_url_https': u'https://si0.twimg.com/profile_images/2722246932/b71d269b9e1e16f59698b4f7fa23a0fe_normal.jpeg', u'profile_sidebar_fill_color': u'DDEEF6', u'geo_enabled': False, u'profile_text_color': u'333333', u'followers_count': 2241, u'profile_sidebar_border_color': u'C0DEED', u'location': u'\u3072\u3060\u307e\u308a\u8358204\u53f7\u5ba4', u'default_profile_image': False, u'listed_count': 41, u'utc_offset': 32400, u'statuses_count': 18879, u'description': u'\u611f\u3058\u308d\u2026\u2026\u3002 \u2514(\u2510L \u309c\u03c9\u3002)\u2518\u305d\u3057\u3066\uff71\uff8d\u9854\uff80\uff9e\uff8c\uff9e\uff99\uff8b\uff9f\uff70\uff7d\u3060 \u270c( \u055e\u0a0a \u055e)\u270c \u2026\u2026\uff01 \u3051\u3044\u304a\u3093\u3001\u307e\u3069\u30de\u30ae\u3001AB\u3001\u3089\u304d\u2606\u3059\u305f\u3001\u3086\u308b\u3086\u308a\u3001\u30df\u30eb\u30ad\u30a3\u3068\u304b\u306e\u30a2\u30cb\u30e1\u3001\u6771\u65b9\u3001\u30dc\u30ab\u30ed\u597d\u304d\u3060\u3088\u2517(^\u03c9^ )\u251b\u30c7\u30c7\u30f3\uff01 \u30d5\u30a9\u30ed\u30d0\u306f\u3059\u308b\u304b\u3089\u5f85\u3063\u3068\u3044\u3066 \u53ef\u6190\u3061\u3083\u3093\u540c\u76dfNo.9 \u308c\u3044\u3080\u540c\u76dfNo.4 \u898f\u5236\u57a2\u2192@SpeedPer_2', u'friends_count': 2038, u'profile_link_color': u'0084B4', u'profile_image_url': u'http://a0.twimg.com/profile_images/2722246932/b71d269b9e1e16f59698b4f7fa23a0fe_normal.jpeg', u'following': None, u'profile_background_image_url_https': u'https://si0.twimg.com/profile_background_images/600710368/ff2z5gv4s83u313432hj.jpeg', u'profile_background_color': u'C0DEED', u'id_str': u'500471418', u'profile_background_image_url': u'http://a0.twimg.com/profile_background_images/600710368/ff2z5gv4s83u313432hj.jpeg', u'name': u'\u3055\u30fc\u3057\u3083\u3059@\u30cf\u30cb\u30ab\u30e0\u30ac\u30c1\u52e2', u'lang': u'ja', u'profile_background_tile': True, u'favourites_count': 3066, u'screen_name': u'SpeedPer', u'notifications': None, u'url': u'https://mobile.twitter.com/account', u'created_at': u'Thu Feb 23 05:10:57 +0000 2012', u'contributors_enabled': False, u'time_zone': u'Irkutsk', u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'created_at': u'Wed Oct 17 12:48:33 +0000 2012', u'possibly_sensitive_editable': True, u'in_reply_to_status_id_str': None, u'place': None})

cursor.execute(insert_tweet_query, (tweet['id_str'], tweet))

close_connection(cursor, connection) 
```

但是，尽管设置了适当的 'UTF-8' 编码，但我得到如下异常

```
_mysql_exceptions.ProgrammingError: (1064, 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \': \'NULL\', u\'truncated\': \'0\', u\'text\': "\'RT @HMV_Anime: \\xe7\\x94\\xb0\\xe6\\x9d\\x91\\\' at line 1') 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:07:28.087

您可以尝试使用*repr*：

```
cursor.execute(insert_tweet_query, (tweet['id_str'], repr(tweet))) 
```

# asp.net - 如何在 Gridview 中为自动完成扩展器的 BehaviourID 分配值

> ID：12934805
> 
> 赞同：1
> 
> 时间：2012-10-17T12:54:40.897
> 
> 标签：asp.net, ajax

如何在 Gridview 中为自动完成扩展器的 BehaviourID 分配值

例如，我在 Gridview 隐藏字段中绑定 ID，并且我有带有 AUtocompleteExtender 的文本框在这种情况下，我如何将该隐藏字段值分配给 AutoComplete Extender 的行为 ID。

# regex - 评估存储在变量 perl regexp 中的模式

> ID：12934806
> 
> 赞同：0
> 
> 时间：2012-10-17T12:54:45.020
> 
> 标签：regex, perl, variables, eval, match

我想知道篮子里有没有苹果[大问题的简化版]

```
$check_fruit = "\$fruit =~ \/has\/apple\/";
$fruit="basket/has/mango/";
if ($check_fruit) {
       print "apple found\n";
} 
```

check_fruit 变量持有评估正则表达式的语句。然而它 check_fruit 变量总是变为真并显示苹果找到:(

如果我遗漏了什么，有人可以在这里帮助我。

要完成的目标：好的，让我解释一下：

1.  我有一个文件，其中在每一行上定义了一个模式子句，类似于：

    ```
    Line1: $fruit_origin=~/europe\\/finland/ && $fruit_taste=~/sweet/ 
    Line2: similar stuff that can contain ~10 pattern checks seprated by && or || with metacharacters too 
    ```

2.我有另一个来自 perl 哈希的水果属性列表，其中包含许多这样的水果

3 我想对每个水果进行分类，看看有多少水果分别属于文件每一行定义的类别。

每行水果计数/配置文件的排序有没有更简单的方法来完成这个？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:59:02.460

`if ($check_fruit)`返回 true 因为 $check_fruit 已定义，不为空也不为零。如果要评估其内容，请使用`eval`. 但是子程序会更好：

```
sub check_fruit {
    my $fruit = shift;
    return $fruit =~ m(has/apple);
}

if (check_fruit($fruit)) {
    print "Apple found\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:04:57.043

`$check_fruit`只不过是一个保存字符串数据的变量。如果你想执行它包含的代码，你必须使用`eval`.

您的代码中还有一些与字符串引用/转义相关的其他错误。这也解决了这个问题：

```
use strict;
use warnings;
my $check_fruit = '$apple =~ m|/has/mango|';
my $apple="basket/has/mango/";

if (eval $check_fruit) {
       print "apple found\n";
} 
```

然而，这通常不是一个好的设计。至少，它会使代码混乱。`$check_fruit`如果来自用户，这也是一个巨大的安全漏洞。您可以将正则表达式放入变量中，这是可取的：

*编辑：请注意，来自用户输入的正则表达式也可能是一个安全问题，但范围更有限。*

```
my $check_fruit = qr|/has/mango|;
my $apple="basket/has/mango/";

if ($apple =~ /$check_fruit/) {
       print "apple found\n";
} 
```

您还可以做其他事情来使您的 Perl 代码更加动态。最好的方法取决于您要完成的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:58:44.580

为什么需要将语句存储在变量中？如果您确定该值不是由用户设置的，那么您可以这样做

```
if (eval $check_fruit) { 
```

但如果用户可以在该表达式中设置任何内容，则这是不安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T12:59:11.447

将模式（并且只有模式）放入变量中，使用正则表达式匹配 delimiters 中的变量`m/.../`。如果您事先不知道该模式，则`quotemeta`用于转义任何元字符。

它应该如下所示：

```
my $check_fruit = '/has/apple/'; # here no quotemeta is needed
my $fruit       = 'basket/has/mango/';
if ($fruit =~ m/$check_fruit/) {
  # do stuff!
} 
```

# c - int 类型并像 c 中的“标志”一样使用它

> ID：12934809
> 
> 赞同：1
> 
> 时间：2012-10-17T12:54:54.667
> 
> 标签：c, gcc, int

我创建了一个名为 panel 的结构，它在 OpenGL 中渲染，工作正常，但我想将它添加到面板：

```
int flags; 
```

然后我在标题中定义它：

```
#define PANEL_TITLE    0x0001
#define PANEL_MOVEABLE 0x0002
#define PANEL_SHADOW   0x0003 
```

像这样使用标志值：

```
panel.flags = PANEL_TITLE | PANEL_MOVEABLE; 
```

而不是很多:(看起来不太好）

```
bool panel_has_title;
bool panel_moveable;
bool panel_shadow; 
```

然后检查 bool 值，而不是我可以只使用单个 int 来获得相同的结果。我已经阅读了很多使用标志的开源东西，就像上面的代码一样。但是我的问题是它不起作用，当我检查标志时：

```
panel.flags = PANEL_TITLE | PANEL_MOVEABLE;
if(panel.flags & PANEL_TITLE) //this one works
{

}
if(panel.flags & PANEL_MOVEABLE) //this one doesn't work
{
  //not gets called
} 
```

* * *

编辑：好的，现在我将其更改为

```
#define PANEL_TITLE    0x0002
#define PANEL_MOVEABLE 0x0004
#define PANEL_SHADOW   0x0008 
```

它们又相交了吗？新问题是如果我设置

```
panel.flags = PANEL_TITLE; 
```

然后它里面的每个函数都会被调用

```
if(panel.flags & PANEL_TITLE)  
{
  //called which is normal
}
if(panel.flags & PANEL_MOVEABLE)  
{
  //called ..
}
if(panel.flags & PANEL_SHADOW)  
{
  //called ..
} 
```

正常吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:11:24.723

这里的问题是位掩码彼此相交。例如（简化为 8 位）

```
#define PANEL_TITLE    0x0001 // 0b00000001
#define PANEL_MOVEABLE 0x0002 // 0b00000010
#define PANEL_SHADOW   0x0003 // 0b00000011 
```

你想要的是这样的：

```
#define PANEL_TITLE    0x0001 // 0b00000001
#define PANEL_MOVEABLE 0x0002 // 0b00000010
#define PANEL_SHADOW   0x0004 // 0b00000100 
```

编辑您的编辑：

你不要那样设置它们，你设置它们：

```
panel.flags |= PANEL_TITLE; 
```

对于最后一个问题，我第一眼看不出有什么问题，尝试用调试器跳过它并输出变量，这将使您对问题有更清晰的认识

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:58:52.067

```
#define PANEL_TITLE    0x0001
#define PANEL_MOVEABLE 0x0002
#define PANEL_SHADOW   0x0003 
```

定义标志时，它们不应相交。用你的定义

```
PANEL_SHADOW == PANEL_MOVEABLE | PANEL_TITLE 
```

是真的。你是认真的吗？而是使用不同的位，例如

```
#define PANEL_SHADOW   0x0004 
```

打印 的值`panel.flags & XXX`。应该不同于0。错误可能在其他地方（你修改了`panel.flags`吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:28:11.230

不，这不正常。这是超自然的（开玩笑的......）

```
$ cat >pan.c && gcc pan.c && ./a.exe
#define PANEL_TITLE    0x0002
#define PANEL_MOVEABLE 0x0004
#define PANEL_SHADOW   0x0008
struct {int flags;} panel;
int main(){
  panel.flags = PANEL_TITLE | PANEL_MOVEABLE;
  if (panel.flags & PANEL_TITLE) printf("Hep\n");
  if (panel.flags & PANEL_MOVEABLE) printf("Hop\n");
  if (panel.flags & PANEL_SHADOW) printf("Hip\n");
} 
```

按预期输出。这不是臀部。

```
Hep
Hop 
```

修改后的问题中的所有三个变体也是如此。

没有建议的答案可以解释这些主张。虽然拥有 PANEL_SHADOW 0x0003 不一定是正确的，但它不一定是错误的。但是，在这些情况下，通常只需声明：

```
#define PANEL_SHADOW (PANEL_TITLE | PANEL_MOVEABLE) 
```

...表明这确实是目的。

您的“面板”是否以某种方式映射到易失性存储器？
函数会改变它吗？
你有没有#defined 0x0002 意味着完全不同的东西？

# javascript - 如何使用 phonegap 和 android 混淆 javascript 和 html 文件

> ID：12934812
> 
> 赞同：2
> 
> 时间：2012-10-17T12:55:08.013
> 
> 标签：javascript, android, html, cordova

我有一个 phonegap 应用程序，我想将它启动到 Google Play Market。在启动之前，我想加密/混淆我的代码。请建议我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:14:16.670

为 Phonegap 加密/混淆代码的最佳方法是让本地编译代码真正进行加密/解密。

您可以在此处找到有关如何操作的更多信息：[http ://www.oleksiy.pro/2011/09/20/phonegap-application-encryption/](http://www.oleksiy.pro/2011/09/20/phonegap-application-encryption/)

**编辑**：这仅适用于基于 iOS 的编译。另一个类似的问题可以在这里找到： [How to encrypt HTML+JS assets in Android Phonegap mobile app？](https://stackoverflow.com/questions/6160554/how-to-encrypt-htmljs-assets-in-android-phonegap-mobile-app)

如果你只需要一个通用的混淆器 YUI 压缩器效果很好。[http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:35:02.257

这可能有点离题，但混淆应用程序内部工作的最佳方法之一是将部分/全部业务逻辑迁移到服务器端 Web 服务。

# command - 启动 cmd 运行命令不起作用

> ID：12934817
> 
> 赞同：3
> 
> 时间：2012-10-17T12:55:21.047
> 
> 标签：command, exit, execute, cmd

我正在处理一个脚本或批处理文件（或两者的组合），它导入一个 Outlook prf 文件，然后启动一个新的 cmd.exe 窗口运行一个特定于应用程序的程序，该程序在传递服务器集群名称时会拉入一个 Outlook 数据文件之前创建的 Outlook 配置文件。所以我有 vbs 脚本来检查 Outlook 配置文件，如果它不存在它会导入 prf。这工作正常，现在我需要的程序被称为 addiman.exe 服务器集群名称是 gsiapp ...手动方法是我启动一个 cmd 窗口并输入“addiman gsiapp”我希望通过在例程中调用它来自动化它调用 :Filesite 以下命令不成功，它会启动一个新的 cmd.exe 窗口但不运行该命令。

```
:ImportPRf

call cscript \\gsf1\Apps\Scripts\public\deployprf.vbs

GOTO :FileSite

:FileSite

start cmd.exe /c "c:\program files\interwoven\worksite\addiman.exe" GSIAPP

GOTO :EXIT

:Exit
Exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:07:49.240

```
start cmd.exe /c "c:\program files\interwoven\worksite\addiman.exe GSIAPP" 
```

试试这个，因为 cmd.exe 将 "" 之间的部分解释为命令并忽略 GSIAPP 语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:53:54.277

问题解决了，不需要完整路径。只需要推杆“addiman GSIAPP”。感谢所有提供建议的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:02:56.653

胡乱猜测。尝试在“开始”之前添加另一个呼叫 - 像这样

```
:FileSite

call start cmd.exe /c "c:\program files\interwoven\worksite\addiman.exe" GSIAPP 
```

# c++ - 如何创建包含 __imp__ 符号的导入 .lib？

> ID：12934818
> 
> 赞同：1
> 
> 时间：2012-10-17T12:55:26.403
> 
> 标签：c++, visual-c++, dllimport

我们有一个没有导入库的外部 DLL，并且我们有从该 DLL 声明函数的头文件。

其中一些函数是用 声明的`__declspec(dllimport)`，而另一些则不是。如果不使用该属性，我们可以通过编写一个 .def 文件并运行该`lib`工具来简单地创建导入库。但是，使用属性声明的函数[需要特殊符号](http://msdn.microsoft.com/en-us/library/aa271769%28v=vs.60%29.aspx)，例如函数`foo`需要`__imp__foo`。

有没有一种简单的方法来创建一个包含`__imp__`符号的导入 .lib，最好不要为每个导出编写存根函数并生成假 DLL？

# c# - 首先使用 EF 5 逆向工程代码，为什么 [Key] 加上 HasKey()？

> ID：12934821
> 
> 赞同：1
> 
> 时间：2012-10-17T12:55:36.373
> 
> 标签：c#, entity-framework-5

我首先使用**EF 逆向工程**代码来获取我的 POCO 和映射表。我得到以下异常：EntityType 'MYPOCO' 没有定义键。定义此 EntityType 的键。 我在 pk 字段上**添加了 [Key] 属性，它工作正常。**但 ：

为什么必须在 poco PK 属性上设置 [Key] 属性

```
[Key] // what's the reason for this redundancy with HasKey() in mapping class ?
public int ID_MYPOCO { get; set; } 
```

而**在映射类中已经提到了它**......

```
public class MYPOCOMap : EntityTypeConfiguration<MYPOCO>
{
    public MYPOCOMap()
    {
        // Primary Key
        this.HasKey(t => t.ID_MYPOCO);
    }
} 
```

它正在工作，没什么大不了的，但想知道这种冗余是否有任何理由？无论如何，对 EF 逆向工程非常满意，这是我最喜欢的四种映射数据库的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:59:54.313

区别在于前者是在`compile`时间，而后者是在`run time`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:02:10.100

虽然 [Key] 之类的属性用于 DB 生成，但它们也用于其他事情，例如验证，因此也需要定义。

# java - Spring MVC 读取和解析文件

> ID：12934829
> 
> 赞同：2
> 
> 时间：2012-10-17T12:55:47.213
> 
> 标签：java, spring, spring-mvc

我是 Spring 新手，我只是想打开一个简单的文本文件并解析它，以便创建一些 POJO。我的问题是我无法让 Spring 找到 txt 文件。

我试过把文件到处放，现在我把它放进去

/myAop/src/main/resources/myFile.txt

我在一个名为的文件中引用它

com.myApp.pojo.Team.java

使用这样的代码：

```
FileSystemResource resource = new FileSystemResource("/myApp/src/main/resources/myFile.txt");
File f =resource.getFile(); 
```

但是，我没有任何运气。

我还尝试了其他几个位置。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:37:05.213

您只需要指定文件名，因为**src/main/resource**已经在类路径中。试试这个：

```
FileSystemResource resource = new FileSystemResource("myFile.txt");
File f =resource.getFile(); 
```

尝试 New Xmlclasspathresource() 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:20:37.640

尝试另一个路径 FileSystemResource resource = new FileSystemResource("/main/resources/myFile.txt");

实际上，资源中的文件放在类下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-21T20:04:02.773

尝试使用绝对路径

```
FileSystemResource resource = new FileSystemResource("file:C:/test/workspace/src/myApp/src/main/resources/myFile.txt"); 
```

您也可以使用类路径，但文件应该在类路径中。

```
FileSystemResource resource = new FileSystemResource("classpath:myApp/src/main/resources/myFile.txt"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T13:05:52.050

我最终做的是将文件与 POM.xml 文件一起放在基目录中，然后我可以通过使用名称而不是使用任何类型的路径来访问它。我确信有更好的方法，但目前我只需要继续前进。

# sql - SQL 表/列命名约定

> ID：12934836
> 
> 赞同：0
> 
> 时间：2012-10-17T12:55:56.937
> 
> 标签：sql, sql-server, database

在我昨天问的一个问题中：-

[SQL SELECT DISTINCT 谜题](https://stackoverflow.com/questions/12917494/sql-select-distinct-puzzle)

用户[spectralghost](https://stackoverflow.com/users/1007019/spectralghost)提到我的列名（egTypeID）是一个糟糕的命名约定。你们能否为我详细说明为什么会这样，并让我知道“应该”对表和列使用什么样的命名约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:59:51.807

你参考这个：

```
LEFT JOIN Document d on dt.DocumentType=dt.TypeID --terrible naming convention.... 
```

这样做的问题是语义相同的列在两个表中具有不同的名称。不管它是什么，建议都是一样的，以便能够更好地阅读您的脚本。当你试图记住所有这些时，你必须做很多额外的思考，如果你不遵守这个规则，随着桌子的数量开始增长......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:01:02.237

看那个问题，我猜想评论不是关于列 TypeID 的名称，而是关系是一个名为 Type 的列和一个名为 TypeID 的列之间的关系。不想把话放在发表评论的人的嘴里，我看到了这些问题：

1.  `Type`很可能是保留字，现在或将来。通常，应避免使用在编程语言或数据库模型中具有共同含义的词。
2.  当您有一列是某事物的 ID（在本例中为 a `Type`）和另一列是事物本身时，很难理解这种关系是否正确发生。在这种情况下，不清楚是否`Type`持有 ID 或类型的名称。如果 FK 端的列引用 TypeID 列，它至少应该*包含*名称 TypeID。

与命名约定不直接相关的其他问题：

1.  如果您的系统包含文档以外的其他内容，TypeID 将不会成为一个非常具有描述性的名称。也许 DocTypeID 会更清楚，尤其是在关系的外键方面。
2.  您可以认真考虑从文档类型列表中完全删除 TypeID 列，并简单地使用类型*名称*作为主键。只要这些不是可变的，它就会在您需要类型名称但不需要类型表中的其他信息时为您保存一个 JOIN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:01:06.607

真的只有那个用户可以回答，因为“糟糕的命名约定”是他的个人意见。有问题的行是这个

```
LEFT JOIN Document d on dt.DocumentType=dt.TypeID --terrible naming convention.... 
```

我认为他的意思是外键在两个表中应该具有相同的名称 - 而不是 DocumentType，该字段应该被命名为 TypeID，所以该行应该是

```
LEFT JOIN Document d on dt.TypeID=dt.TypeID 
```

# javascript - 分配 `window.__proto__ = prelude` 后，`window.onload` 无法运行，但为什么呢？

> ID：12934838
> 
> 赞同：1
> 
> 时间：2012-10-17T12:56:00.947
> 
> 标签：javascript

我的`prelude`意思是这个对象：[http](http://gkz.github.com/prelude-ls/) ://gkz.github.com/prelude-ls/ 不过，绑定到
似乎不是个好主意。 我对为什么会发生这种情况以及我在 Chrome 中的代码感到好奇和困惑：`prelude``window.__proto__`

```
window.__proto__ = prelude;
window.onload = function(){
  console.log('loaded');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:58:44.740

`__proto__`是对窗口对象原型的非标准引用（[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)）。

在您的第一行中，您将覆盖`window`. 这意味着之前写入原型对象的所有其他内容都会得到列表，包括可能负责调用的本机函数`window.onload`。

您通常不应该覆盖原型对象，而是扩展它或直接向对象添加新属性，例如`window`.

# php - 将图片上传到 Facebook 页面相册，得到 #240 异常

> ID：12934839
> 
> 赞同：-2
> 
> 时间：2012-10-17T12:56:00.750
> 
> 标签：php, facebook, wordpress, facebook-graph-api

我正在尝试使用 facebook graph 将图像上传到页面 album

```
$facebook->setFileUploadSupport(true);
$args = array('message' => 'Photo Caption',
'source' => '@' . realpath(ABSPATH.$image_realpath) 
, 'access_token' => $page_access_token);
$data = $facebook->api('/'. $album_id . '/photos/', 'post', $args);
print_r($data); 
```

但它给了我这个例外

```
Fatal error: Uncaught OAuthException: (#240) This user isn't allowed to upload photos to this object's wall 
```

我是该页面的管理员，我向我的应用程序添加了、、、、权限`manaege_pages`，但仍然遇到此`publish_stream`问题`share_item``offline_access`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:01:43.610

尝试在应用设置中设置范围（权限）：' **manage_pages** '

试试这个 ：

```
$DestinationFile = 'images/filename.jpg';
$newImagePath = "@" . realpath($DestinationFile);
$response = $facebook->api(
            '/me/photos/', 'post', array(
            'access_token' => $facebook->getAccessToken(),
            'message' => 'This is an awesome tech website : http://www.technew.in ' ,
            'source' => $newImagePath
        ));
print_r($response); 
```

# java - 在 dom 元素问题中创建命名空间

> ID：12934841
> 
> 赞同：0
> 
> 时间：2012-10-17T12:56:09.980
> 
> 标签：java, dom, element

我尝试使用 DOM APi 创建 XML 文档，当我使用以下代码时，我得到了预期的结果

```
Element rootTreeNode = document.createElementNS("http://schemas.microsoft.com/ado/2007","ex" + ":Ex") 
```

这是输出控制台中带有标签的输出

```
 ex:Ex Version="1.0" xmlns:ex="http://schemas.microsoft.com/ado/2007"/ 
```

现在我想在这个元素中添加以下内容

```
**xmlns:gp**="http://www.pst.com/Protocols/Data/Generic" 
```

而且我没有成功使用**xmlns:gp** 我尝试使用以下类似

```
rootTreeNode.setAttributeNS("xmlns" ,"gp","http://www.pst.com/Protocols/Data/Generic") 
```

我得到了它，就像下面这样

```
**xmlns:ns0="xmlns"** **ns0:gp**="http://www.pst.com/Protocols/Data/Generic" 
```

如果在第一个参数中放入 null

```
rootTreeNode.setAttributeNS(null ,"gp","http://www.pst.com/Protocols/Data/Generic") 
```

我只得到带有**URL的****gp**而没有 xmlns 。

 **我在这里做错了什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:19:50.293

完整测试：

```
DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = dbfac.newDocumentBuilder();

Document doc = docBuilder.newDocument();

Element root = doc.createElementNS("http://schemas.microsoft.com/ado/2007","ex" + ":Ex");
root.setAttributeNS("http://www.w3.org/2000/xmlns/" ,"xmlns:gp","http://www.pst.com/Protocols/Data/Generic");

doc.appendChild(root);

TransformerFactory transfac = TransformerFactory.newInstance();
Transformer trans = transfac.newTransformer();
trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
trans.setOutputProperty(OutputKeys.INDENT, "yes");

StringWriter sw = new StringWriter();
StreamResult result = new StreamResult(sw);
DOMSource source = new DOMSource(doc);
trans.transform(source, result);
String xmlString = sw.toString();

System.out.println("Xml:\n\n" + xmlString); 
```**

# ruby-on-rails-3 - 我不能用 redis-store 跟踪 s

> ID：12934846
> 
> 赞同：1
> 
> 时间：2012-10-17T12:56:27.360
> 
> 标签：ruby-on-rails-3

我的轨道是 3.2.8

我有像下面这样的宝石

```
#gemfile
gem 'redis', '3.0.2'
gem 'redis-store', '1.1.3'
gem 'redis-rails'

#session_store.rb
Application.config.session_store :redis_session_store 
```

然后是轨道

它报告如下错误

```
=> Booting Thin
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/magicstudio/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/configuration.rb:140:in `const_get': uninitialized constant ActionDispatch::Session::RedisSessionStore (NameError)
    from /Users/magicstudio/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application/configuration.rb:140:in `session_store' 
```

为什么？

# javascript - 如何让javascript不将小数点为0的数字四舍五入为整数

> ID：12934849
> 
> 赞同：0
> 
> 时间：2012-10-17T12:56:30.663
> 
> 标签：javascript, decimal, rounding, strict

有没有办法让 JS 不将小数点为 0 的数字四舍五入为整数？ex var = 100.0 //100？我知道这在 JS 中不是很常见的事情，但需要从处理库中移植一个方法，该处理库将导入到 processing.js。该方法使用严格类型的浮点数/整数来决定它是浮点数还是整数/颜色值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:57:37.920

JavaScript 中没有整数，只有浮点数。因此，试图弄清楚它是 int 还是 float 基本上是不可能的。

# c - 在线程终止后，在线程中分配的内存是否仍然存在？

> ID：12934855
> 
> 赞同：1
> 
> 时间：2012-10-17T12:56:43.817
> 
> 标签：c, multithreading, memory-management

我遇到了一些内存分配问题，并尝试检测这些问题的可能原因。

有许多可能的原因，并且必须花费大量时间来检查每个原因。

可能的原因之一是在线程内分配了一个内存缓冲区，并且在线程终止后使用该缓冲区。

因此，如果线程终止有可能导致内存释放，那么可以避免许多小时的调试。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:59:11.363

我认为不会，尽管它当然可能取决于您的具体细节。

通常，从操作系统的角度来看，内存分配是每个进程的活动，而线程存在*于进程内部*。因此，如果一个线程分配了内存然后死掉了，操作系统不会清理它，因为该进程还活着。内存在进程内部是共享的，因此操作系统无法知道该内存不再被使用并且可以被清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:01:28.013

不，“死”的线程不会释放任何内存。

当一个线程结束时，线程本身就会从内存中消失，就像一个函数执行完后一样。它会带走所有的“堆栈”对象，但您自己分配的所有内存（即 malloc）仍然存在。

因此，在结束线程之前，应确保已正确释放线程使用且不再需要的所有动态内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:37:55.750

除了所有答案之外，我还想说明**pthread有一个 TLS 密钥，这些密钥已在****pthread_key_create**中注册，它接受密钥 ID 和析构函数。在**pthread_exit**上，调用静态**pthread_key_clean_all()**迭代键并调用分配的析构函数，这些析构函数可以执行内存释放（通过应用程序设计）。
因此，要理解这一点 - 在您的代码中搜索所有**pthread_key_create**调用，检查是否分配了析构函数并将断点放置到所有这些调用中，以检查销毁的内容和顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:04:24.677

线程分配的内存行为类似于方法调用分配的内存：

*   当方法返回（线程终止）时，堆栈上的变量将被释放
*   除非显式释放，否则堆上的变量将继续分配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T13:01:11.893

*当线程结束时，线程堆栈*上的任何内容（例如局部变量）都将变为无效。但是，如果数据在*堆中*，那么只要进程在运行，内存就仍然有效。当然，您需要将指向该堆分配的指针保存在该线程之外的某个位置。

# jsp - HTTP GET 请求返回空格

> ID：12934862
> 
> 赞同：0
> 
> 时间：2012-10-17T12:56:59.650
> 
> 标签：jsp, get, newline

我有一个对 jsp 页面的 GET 请求。JSP页面的内容如下：

```
<%@page language="java" import="java.sql.*,java.util.*" %>
<%@page import="javax.servlet.*, java.util.*,java.util.Date, java.text.*"%>
<jsp:useBean id="workM" class="test.concept" scope="page" />
<jsp:useBean id="userM" class="test.learning" scope="page" />
<jsp:useBean id="checkM" class="test.check" scope="session" />
<%
if (checkM.checkUser()) //For auto loading user's most used search engine. Note: Only if the difference between top two is very big
{
    String user_id = checkM.getUser();
    ResultSet RS6=workM.executeQuery("select top 1 searchEngineUsed,count(*) as number from UserSearchEngineSearch where user_id='"+user_id+"' group by searchEngineUsed order by number desc;");
    while (RS6.next())
    {

        String name = RS6.getString("searchEngineUsed");
        if (name.equals("google"))
        {
            out.print("1");
        }
        else if (name.equals("yahoo"))
        {
            out.print("2");
        }
        else if (name.equals("bing"))
        {

            out.print("3");
        }
        else if (name.equals("baidu"))
        {

            out.print("4");
        }
        else if (name.equals("yandex"))
        {
            out.print("5");
        }
        else if (name.equals("askcom"))
        {
            out.print("6");
        }
        else //by default just display google
        {
            out.print("1");
        }
    }
}
else //user not login
{ 
    out.print("1");
}
%> 
```

但是，GET 网页的内容是包含 5 行换行，后跟 4（表示选择了“baidu”）。如何删除 5 行新行距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:04:34.253

如果您使用的是 Tomcat，您可以使用

```
<%@ page trimDirectiveWhitespaces="true" %> 
```

在您的页面上，或在您的页面中定义一个全局设置`web.xml`

```
<jsp-config>
  <jsp-property-group>
    <url-pattern>*.jsp</url-pattern>
    <trim-directive-whitespaces>true</trim-directive-whitespaces>
  </jsp-property-group>
</jsp-config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:21:33.597

您也可以将其重写为如下内容：

```
<%@page language="java" import="java.sql.*,java.util.*"
%><%@page import="javax.servlet.*, java.util.*,java.util.Date, java.text.*"
%><jsp:useBean id="workM" class="test.concept" scope="page" 
/><jsp:useBean id="userM" class="test.learning" scope="page" 
/><jsp:useBean id="checkM" class="test.check" scope="session"
/><%
......
%> 
```

它不会添加任何额外的新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:52:27.353

JSP 顶部的and`<%@page>`指令由换行符分隔。`<jsp:useBean>`如果您真的想删除它们，则需要将它们写在一行中。然而，额外的换行符并没有什么害处，它们不会被浏览器呈现。

# c# - 网格中的剑道日历

> ID：12934866
> 
> 赞同：2
> 
> 时间：2012-10-17T12:57:11.600
> 
> 标签：c#, asp.net-mvc, calendar, grid, kendo-ui

您好我正在使用剑道网格来编辑价格表。

我正在尝试编辑表中的单个值：

```
@(Html.Kendo().Grid(Model).Name("PriceList")
    .Columns(columns =>
    {
        columns.Bound(p => p.Id).Hidden();
        columns.Bound(p => p.Name);
        columns.Bound(p => p.ValidFrom).Format("{0:dd.MM.yyyy h:mm:ss}");
        columns.Bound(p => p.ValidTill).Format("{0:dd.MM.yyyy h:mm:ss}");
        columns.Bound(p => p.Created).Format("{0:dd.MM.yyyy h:mm:ss}");
        columns.Bound(p => p.UserName);
        columns.Bound(p => p.FilePath);
        columns.Command(command => { command.Edit(); command.Destroy(); });
    })
    .DataSource(dataSource => dataSource.Ajax()
            .Model(model =>
            {
                model.Id(p => p.Id);
                model.Field(p => p.ValidFrom).Editable(false);
                model.Field(p => p.ValidTill).Editable(true);
                model.Field(p => p.Created).Editable(false);
                model.Field(p => p.UserName).Editable(false);
                model.Field(p => p.FilePath).Editable(false);
                model.Field(p => p.Name).Editable(false);
        })
        .Read("PriceList_Read", "Admin")       
        .Destroy("PriceList_Editing_Destroy", "Admin")
        .Update(update=>update.Action("PriceList_Editing_Update", "Admin"))
        .Events(e=>e.Error("error_handler"))
    )   
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .AutoBind(true)
) 
```

而且我在将网格中的编辑值传递给我的控制器时遇到了麻烦：

```
public ActionResult PriceList_Editing_Update([DataSourceRequest] DataSourceRequest request, PriceListViewModel model)
        {

                    int Id = model.Id;
                    string Name = model.Name;
                    DateTime date = model.ValidTill; // 0001 00:00:00 value all the time

            return View("Index", GetViewResult());
        } 
```

我总是取回空的日期时间值（我的意思是空的`{1\. 1\. 0001 0:00:00}`）同样的问题是使用 DateTime 属性（Created 和 ValidFrom）的其他 2 个列。其余值已正确回发。我试图使用这些值来获取这些值，`string DateTillStr = Request.Params["ValidTill"];`但是如果我在 firebug 中检查我的 GET，我可以看到网格没有在 Request 中发回这个值，它只发送我的模型对象的 NON Datetime 值。像这样：

```
Actual  false
FilePath    D:\Projects\CPSkla\CPSkla\App_Data\Cen°k 2012_10.xlsx
Id  23
Name    Testovací ceník
User    0
User1   null
UserName    djezek 
```

仅此而已，我的模型中仅缺少这 7 个属性，其余 4 个：

```
public partial class PriceListView
{
    public int Id { get; set; }
    public int User { get; set; }
    public string Name { get; set; }
    public System.DateTime ValidFrom { get; set; }
    public System.DateTime ValidTill { get; set; }
    public string FilePath { get; set; }
    public Nullable<System.DateTime> Created { get; set; }
    public Nullable<System.DateTime> Updated { get; set; }
    public bool Actual { get; set; }
    public string UserName { get; set; }
} 
```

还有其他方法可以将这些数据发回吗？我发现我可以将其他数据附加到更新请求，但我遇到了如何在 javascript 函数中识别表中已编辑的行的问题（我知道如何识别选定的值但未编辑）。

我使用萤火虫发现剑道网格内的日历选择器实际上并没有将其选定的值放入分配给保存日期值的输入中。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:26:47.950

使用网格的[保存](http://docs.kendoui.com/api/web/grid#save)事件 - 您可以看到从输入字段收集的实际值、模型（dataItem）和事件 HTML 元素，该元素用作输入元素的容器。

此外，如果您想发送其他值（或者只是以不同的方式发送有问题的字段，请使用更新配置的[数据](http://docs.kendoui.com/api/framework/datasource#transportupdatedata-objectstringfunction)功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:07:00.790

如果我没记错的话，我认为这是一个带有日期和时间的文化问题，并且不是特定于 Kendo UI 而是特定于 ASP.NET MVC。

因此，例如，如果预期的日期格式字符串为 mm/dd/yyyy 并且日期为 dd/mm/yyyy，您将获得空日期值 (0001 00:00:00)

看到这个问题

[日期格式不正确的 MVC DateTime 绑定](https://stackoverflow.com/questions/528545/mvc-datetime-binding-with-incorrect-date-format)

希望这可以帮助

# asp.net-mvc - GDI+ 中出现一般错误

> ID：12934880
> 
> 赞同：3
> 
> 时间：2012-10-17T12:57:59.307
> 
> 标签：asp.net-mvc, gdi+

我知道这已经被问了一百万次了，但我想我需要把它变成一百万零一个。

我`"A generic error has occurred in GDI+"`在尝试保存新的`bitmap`.

我已经完全精简到最基本的代码行，但我仍然使用以下方法得到错误：

```
public class HomeController : Controller
{
  public ActionResult Index()
  {
    return this.View();
  }

  public void CreatePicture()
  {
    try
    {    
      // THIS WORKS
      System.IO.File.Copy("C:\\copyTest.bmp", "C:\\test folder\\copyTest2.bmp");

      // THIS WORKS
      System.IO.File.Delete("C:\\test folder\\deleteTest.bmp");

      using (Bitmap newBitmap = new Bitmap(120, 120))
      {
        // THIS FAILS
        newBitmap.Save("C:\\test folder\\test.bmp", ImageFormat.Bmp);
      }
    }
    catch (Exception ex) 
    {
      throw ex;
    }
  }
} 
```

该代码是`MVC 3.0`使用匿名登录从网站内空白页面上的 html 链接调用的。

看法：

```
@Html.ActionLink("Create Picture", "CreatePicture", "Home", new { }) 
```

我已检查“测试文件夹”的文件夹权限，并已授予对以下内容的完全访问权限：

*   网络
*   网络服务
*   IUSR

我仍然收到错误...我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:01:56.850

这可能是由其他原因引起的，但在这种情况下，您似乎没有指定图像类型。所以尝试：`newBitmap.Save("C:\\test folder\\test.bmp",System.Drawing.Imaging.ImageFormat.Bmp );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:25:24.563

4个多小时后，我终于解决了这个问题。

我的电脑开始自行停止，所以我决定重新启动它。

重新启动后（顺便没有安装更新）神奇地现在一切正常！！！

# java - 如何触发 JSlider 更改监听器？

> ID：12934881
> 
> 赞同：1
> 
> 时间：2012-10-17T12:58:00.200
> 
> 标签：java, swing, listener, jslider, changelistener

如何以编程方式触发 a 的更改侦听器`JSlider`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T13:11:27.183

假设您想通知滑块的侦听器，您将使用以下命令：

```
 ChangeEvent ce = new ChangeEvent(slider);
    for(ChangeListener cl : slider.getChangeListeners()){
        cl.stateChanged(ce);
    } 
```

除非您扩展类并添加一些新的时髦功能，否则您不需要直接触发更改事件。在这种情况下，该`fireStateChanged()`方法受到保护，因此您应该有权访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T20:58:40.523

`slider.setValue(value)`将触发状态更改事件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T13:08:08.557

看看 ChangeListener，[这里](http://www.leepoint.net/notes-java/GUI/components/70sliders/20changelistener.html)和[这里的例子](http://www.java2s.com/Tutorial/Java/0240__Swing/TrackingchangestoaJSliderwithaChangeListener.htm)

# android - 在项目单击时切换当前片段

> ID：12934885
> 
> 赞同：0
> 
> 时间：2012-10-17T12:58:17.530
> 
> 标签：android, android-layout, android-fragments

我正在尝试为 android 编写一个文件管理器作为一个大学项目。我的想法是使用其中的片段为它创建一个带有 viewpager 的选项卡式视图。实际上，加载应用程序时获得的第一个视图是路径选择片段，其中有 SD 卡、音乐等。该片段包含所述文件夹的列表视图。当我单击一个项目时，我希望将另一个片段添加到寻呼机中，并且效果很好。但我也希望将当前片段替换为“单击”文件夹的网格视图。那是行不通的。我使用 File[] 的数组列表将文件存储在我选择的每个文件夹中。我还在片段适配器中添加了方法来添加和替换片段数组列表中的片段。尝试使用事务和我的列表，列表已正确更新，但视图未正确更新。以下代码是我的片段适配器中用于替换片段的方法。它在设置为我的列表视图的 onItemclicklistenr 中调用：

```
 public void replaceFragment(SherlockFragment newFragment, int pos) {
    SherlockFragment old=fragments.get(pos);
    fragments.set(pos, newFragment);
    notifyDataSetChanged(); 
```

}

我阅读了有关此问题的几个答案，几乎尝试了所有方法，似乎没有任何效果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:34:45.323

我找到了一个可怕的解决方案。更新片段列表（没有片段事务）后，我为视图寻呼机重新设置适配器并恢复当前项目。通过这种方式，我强制构建片段布局。不漂亮，但随便。这是被称为 onclick 的界面：

```
@Override
    public void onPathSelected(int position) {
            // TODO Auto-generated method stub
            Log.d("positioninsideintfc", Integer.toString(position));
            firstrun.add(true);
            int current=mPager.getCurrentItem();
            root=(File) filepaths.get(position);
            fragmentfilelists.add(root.listFiles());
            initpath=MainActivity.root.getAbsolutePath();
            Gridfragment newfrag=Gridfragment.newInstance(current);
            mAdapter.addFragment(Selectpathfragment.newInstance(current+1));
            mAdapter.replaceFragment(newfrag, current);
            mPager.setAdapter(mAdapter);
            mPager.setCurrentItem(current);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:02:59.977

你应该学会`Activity`说你的框架使用的语言。一般来说，您的 Activity 应该实现`Interface`，然后您的 Fragment 将用于通信。因此，在您的情况下，当用户点击列表项时，带有列表视图的片段应告诉其父活动（使用所述界面）类似“用户点击此”的信息。您的父活动应该完成其余的工作，替换/添加片段。您的片段，就像在 OOP 中一样，不应该知道其他片段的存在。

# asp.net - 页面加载时更新控件字段

> ID：12934887
> 
> 赞同：0
> 
> 时间：2012-10-17T12:58:24.303
> 
> 标签：asp.net, c#-4.0

我通过调用 select 方法用数据库中的数据填充一些控件

我更改了值以更新它，但是当我按下更新按钮时，它会采用在页面加载时调用的值，并忽略所有更改。

我怎样才能避免这种情况？

提前致谢 ： ）

这是一个简单的代码来提出我的问题

```
SelectBLL _selectbll;
string _title = string.Empty;
string _details = string.Empty;

#region Page Load
protected void Page_Load(object sender, EventArgs e)
{
    GetUMedicineDetails();
}
#endregion

#region Get UMedicine Details
private void GetUMedicineDetails()
{
    _selectbll = new SelectBLL();
    _selectbll._GetUMedicineDetails(Request.QueryString[0].ToString(), ref _title, ref _details);
    #region Bind Controls
    txtdetails.Text = _details;
    txttitle.Text = _title;
    #endregion
}
#endregion

#region Update Button
protected void btnupdate_Click(object sender, EventArgs e)
{
    _UpdateUMedicine();
}
#endregion

#region UpdateU Medicine
public void _UpdateUMedicine()
{
    _updatebll = new UpdateBLL();
    _updatebll._UpdateUMedicine(
        Convert.ToInt32(Request.QueryString[0]), txtdetails.Text, txttitle.Text);
}
#endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:01:15.203

`DataBind`仅当[`!Page.IsPostaBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostaBack)
        GetUMedicineDetails();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:04:37.573

**[Page.IsPostBack 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)**：获取一个值，该值指示页面是第一次呈现还是正在加载以响应回发。

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!IsPostBack)
    {
        GetUMedicineDetails();
    }
} 
```

另外，参考：

**[如何：确定如何调用 ASP.NET 网页](http://msdn.microsoft.com/en-us/library/ms178141%28v=vs.85%29.aspx)**

# c# - 检测 Windows 服务中的空闲

> ID：12934892
> 
> 赞同：0
> 
> 时间：2012-10-17T12:58:49.777
> 
> 标签：c#, windows-services

我有一个 Windows 服务，它会在被调用时启动（远程）。我不想让服务保持运行，所以我希望服务在进入空闲时间时自动停止，这意味着在最后一次通话后几分钟。我不想从我的远程客户端停止服务，因为我不知道我是否完成了工作，这就是为什么我想在服务端使用一些空闲事件。有什么办法吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:01:52.973

在 Windows 服务中添加一个计时器，该计时器在每次调用时都会重置。当计时器过去时（几分钟后），它会调用服务的 Stop 方法，一旦服务器空闲，它就会有效地停止服务器。

**附加信息** 为了减少您的编码开销，您正在寻找一个拦截点来处理这个计时器。如果您将 WCF 用于您的服务调用，最简单的方法是使用作为服务扩展添加的自定义 IParameterInspector。您可以将计时器逻辑添加到 AfterCall() 方法中，以便每个服务调用都通过同一代码块运行并重置计时器。有关实现自定义行为的详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx#S6)。

如果您不使用 WCF，那就有点棘手了。您可以使用 Castle Windsor 或 PostSharp 之类的 AOP 框架，或者以消息传递样式设计您的服务。AOP 允许您使用将调用您的重置代码的属性来装饰您的方法。消息传递涉及设计您的服务合同，以便在服务中有一个通用入口点，该入口点检查输入的消息并根据其内容将其路由到正确的方法。可以想象，一个入口点=一个添加定时器重置代码的地方。但这些都不像基于 WCF 的解决方案 IMO 那样干净或易于实施。

# jquery - jquery tokeninput 输入参数丢失

> ID：12934893
> 
> 赞同：1
> 
> 时间：2012-10-17T12:58:49.590
> 
> 标签：jquery, ruby-on-rails, forms, jquery-tokeninput

我正在关注关于 jquery tokeninput 的 railscasts 第 258 集。

不知道为什么用户的输入没有达到用户查询的输入参数？

我的数据库是postgres。

药房管制员

```
 def index
      @pharmacies = Pharmacy.order(:name)
      respond_to do |format|
        format.html
        format.json { render json: @pharmacies.tokens(params[:q]) }
      end
    end 
```

用户模型

```
 def pharmacy_tokens=(tokens)
    self.pharmacy_ids = Pharmacy.ids_from_tokens(tokens)
  end 
```

药房模型

```
 def self.tokens(query)
    pharmacies = where('lower(name) LIKE ? or name LIKE ?', "%#{query}%", "%#{query}%")
    if pharmacies.empty?
      [{id: "<<<#{query}>>>", name: "New: \"#{query}\""}]
    else
      pharmacies
    end
  end 
```

用户视图

```
 <div class="field">
      <%= f.label :pharmacy_tokens, "Pharmacies" %><br />
      <%= f.text_field :pharmacy_tokens, data: {load: @user.pharmacies} %>
    </div> 
```

用户的.js.coffee

```
 jQuery ->
    $('#user_pharmacy_tokens').tokenInput '/pharmacies.json'
    theme: 'facebook'
    prePopulate: $('#user_pharmacy_tokens').data('load')
    preventDuplicates: true
    queryParam: "q" 
```

结果

```
 Processing by PharmaciesController#index as JSON
    Parameters: {"locale"=>"en"}
    (0.6ms)  SELECT COUNT(*) FROM "pharmacies" WHERE (lower(name) LIKE '%%' or name LIKE '%%')
    Pharmacy Load (0.8ms)  SELECT "pharmacies".* FROM "pharmacies" WHERE (lower(name) LIKE '%%' or name LIKE '%%') ORDER BY pharmacies.name ASC, name
    Completed 200 OK in 30ms (Views: 27.0ms | ActiveRecord: 1.4ms) 
```

当在 text_field 中输入 javascript 工作时，只是文本不再出现在查询中......只是我空的“喜欢”百分号......“%%”。我在这里的输入发生了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:13:32.470

尝试其中之一。主要是第一个。

```
1\. Try %#{query}% without double quotes.
2\. Try %query% without double quotes 
```

让我知道哪一个有效。

# matrix - 在球面上从一个点移动到另一个点

> ID：12934908
> 
> 赞同：2
> 
> 时间：2012-10-17T12:59:18.607
> 
> 标签：matrix, glsl, vector-graphics, cinder

我正在使用基于 GPU 的粒子系统。通过将 x、y、z 位置作为 1024*1024 纹理上的 rgb 值传递来计算一百万个粒子。他们的速度也是如此。

我试图让它们从任意点移动到球体上的一个点。

我当前用于计算的着色器正在从一个点直接移动到另一个点。

我目前没有使用质量或速度纹理

```
// float mass   = texture2D( posArray, texCoord.st).a;
vec3 p      = texture2D( posArray, texCoord.st).rgb;
// vec3 v       = texture2D( velArray, texCoord.st).rgb;

// map into 'cinder space'
p = (p * - 1.0) + 0.5;

// vec3 acc = -0.0002*p; // Centripetal force
// vec3 ayAcc  = 0.00001*normalize(cross(vec3(0, 1 ,0),p)); // Angular force
// vec3 new_v  = v + mass*(acc+ayAcc);

vec3 new_p = p + ((moveToPos - p) / duration);

// map out of 'cinder space'
new_p = (new_p - 0.5) * -1.0;

gl_FragData[0] = vec4(new_p.x, new_p.y, new_p.z, mass);
//gl_FragData[1] = vec4(new_v.x, new_v.y, new_v.z, 1.0); 
```

moveToPos 是作为浮点数的鼠标指针 (0.0f > 1.0f) 坐标系正在从 (0.5,0.5 > -0.5,-0.5) 转换为 (0.0,0.0 > 1.0,1.0)

我对矢量数学以及让我感到困惑的计算完全陌生。我知道我需要使用以下公式：

x=Rsinφcosθ

y=Rsinφsinθ

z=Rcosφ

但是从 moveToPos(xyz) > p(xyz) 计算角度仍然是一个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:47:40.143

几年前我写了这个 GPU 粒子着色器的原始版本（现在@：[https](https://github.com/num3ric/Cinder-Particles) ://github.com/num3ric/Cinder-Particles ）。这是解决您的问题的**一种可能方法**。

我将从片段着色器开始，将弹力施加到粒子上，以便它们或多或少地被约束到球体的表面。像这样的东西：

```
uniform sampler2D posArray;
uniform sampler2D velArray;
varying vec4 texCoord;

void main(void)
{   
    float mass  = texture2D( posArray, texCoord.st).a;
    vec3 p      = texture2D( posArray, texCoord.st).rgb;
    vec3 v      = texture2D( velArray, texCoord.st).rgb;

    float x0    = 0.5; //distance from center of sphere to be maintaned
    float x     = distance(p, vec3(0,0,0)); // current distance
    vec3 acc    = -0.0002*(x - x0)*p; //apply spring force (hooke's law)

    vec3 new_v  = v + mass*(acc);
    new_v = 0.999*new_v; // friction to slow down velocities over time
    vec3 new_p  = p + new_v;

    //Render to positions texture
    gl_FragData[0] = vec4(new_p.x, new_p.y, new_p.z, mass);
    //Render to velocities texture
    gl_FragData[1] = vec4(new_v.x, new_v.y, new_v.z, 1.0);
} 
```

然后，我将传递一个新`vec3` `uniform`的鼠标位置与相同半径的球体相交（在 Cinder 的着色器之外完成）。

现在，将其与之前的软弹簧约束相结合。你可以向这个吸引点添加一个切向力。从一个简单的`(mousePos - p)`加速度开始，然后找出一种使用叉积使该力完全切向的方法。

我不确定球坐标方法在这里如何工作。

> x=Rsinφcosθ
> 
> y=Rsinφsinθ
> 
> z=Rcosφ

你从哪里得到 φ 和 θ？纹理将位置和速度存储在笛卡尔坐标中。另外，来回转换并不是一个真正的选择。

如果您对向量不满意，我的解释可能太高级了。不幸的是，着色器和粒子动画本质上是非常数学的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:16:01.783

这是我制定的一个解决方案 - 它有效，但是如果我将球体的中心点移到它们自己的边界之外，我会丢​​失粒子。

```
#define NPEOPLE 5

uniform sampler2D posArray;
uniform sampler2D velArray;

uniform vec3 centerPoint[NPEOPLE];
uniform float radius[NPEOPLE];
uniform float duration;

varying vec4 texCoord;

void main(void) {

    float personToGet   = texture2D( posArray, texCoord.st).a;
    vec3 p              = texture2D( posArray, texCoord.st).rgb;

    float mass          = texture2D( velArray, texCoord.st).a;
    vec3 v              = texture2D( velArray, texCoord.st).rgb;

    // map into 'cinder space'
    p = (p * - 1.0) + 0.5;

    vec3 vec_p = p - centerPoint[int(personToGet)];
    float len_vec_p = sqrt( ( vec_p.x * vec_p.x ) + (vec_p.y * vec_p.y) + (vec_p.z * vec_p.z) );
    vec_p = ( ( radius[int(personToGet)] /* mass */ ) / len_vec_p ) * vec_p;
    vec3 new_p = ( vec_p + centerPoint[int(personToGet)] );
    new_p = p + ( (new_p - p) / (duration) );

    // map out of 'cinder space'
    new_p = (new_p - 0.5) * -1.0;

    vec3 new_v = v;

    gl_FragData[0] = vec4(new_p.x, new_p.y, new_p.z, personToGet);
    gl_FragData[1] = vec4(new_v.x, new_v.y, new_v.z, mass);
} 
```

我传入 5 个 vec3f 的数组和一个映射为 5 个中心点和半径的浮点数。粒子在开始时设置为随机位置，并朝着映射到位置数组的 alpha 值的数组中的数字移动。

我的目标是从 openCV 传递 blob 数据，并将球体映射到相机源上的人。

目前在视觉上真的很无趣，因此需要使用速度纹理来添加粒子的行为。

# javascript - 是否可以在不触发关联的 $route 的情况下更改 $location

> ID：12934909
> 
> 赞同：4
> 
> 时间：2012-10-17T12:59:20.397
> 
> 标签：javascript, angularjs

是否可以在不触发关联路由的情况下更改 Angular.js 中的位置路径。也许类似于以下内容（不工作的代码）：

```
$location.path("/booking/1234/", {silent: true}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T10:37:12.073

这是解决方案，在角度模块中编译 - <a href="https://github.com/garakh/ngSilent" rel="nofollow">https://github.com/garakh/ngSilent 只需添加模块然后使用这种方式：

```
$ngSilentLocation.silent('/new/path/'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:20:34.043

您可以在路由器中设置`reloadOnSearch`为 false，并且可以更改 url 的“搜索”部分。

这个想法是您应该设计您的 URL 方案，以便如果基本 url 发生变化，它代表不同的资源并且应该重新加载。如果搜索部分发生变化（ 之后的部分`?`，您可能只是在更改过滤器或排序顺序或其他内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T14:06:57.650

是的，可以使用解决方法。

```
var off = $scope.$on('$stateChangeStart', function (e) {
             e.preventDefault();
             off();
          });
$location.path("/booking/1234/"); 
```

它的工作方式是 - 它正在缓存下一个状态更改事件 - 使他不会发生（通过调用“preventDefault”，然后调用自身来取消注册此事件处理程序）。

仅在 Chrome 上测试。在这篇文章中看到它：[https ://github.com/angular-ui/ui-router/issues/64](https://github.com/angular-ui/ui-router/issues/64)

希望能帮助到你

# ios - 自定义 UITabBarItem 就像在 Evernote 应用程序中一样

> ID：12934917
> 
> 赞同：0
> 
> 时间：2012-10-17T12:59:51.113
> 
> 标签：ios, uitabbar

我正在尝试创建一个选项卡栏，其中一个选项卡项将打开模式视图而不是打开选项卡。我已经想出了怎么做，但我希望那个特殊的标签项目看起来很突出，就像在 Evernote 标签栏中一样。Evernote“添加”按钮看起来好像总是处于选中状态（同时在标签栏中有一个常规选中的标签）。

我想知道 - 是否可以在不覆盖标签栏顶部的自定义按钮的情况下实现相同的外观（同时 2 个蓝色按钮）？

谢谢

![印象笔记标签栏](../Images/49cb240c0bec6daf1d64115f737a6f68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:17:25.177

1.  创建一个没有内容的标签栏项目
2.  在其上方添加一个带有加号图像的按钮并将操作设置为标签栏操作

# ruby-on-rails - Cocoon添加关联，如何限制关联数量

> ID：12934925
> 
> 赞同：7
> 
> 时间：2012-10-17T13:00:23.797
> 
> 标签：ruby-on-rails, ruby, haml, simple-form, cocoon-gem

我正在创建一个使用 Ruby/Rails/HAML 存储卡片的系统 - 在这种情况下，有一个 Card 类，它有很多颜色（这也是一个类）。创建和编辑卡片时，我使用 Cocoon gem 来动态添加颜色关联。

我遇到的问题是，在卡片模型中，一张卡片最多只能有 5 种颜色。然而，界面允许添加无限的颜色，从而导致错误。

Cocoon中有没有办法限制可以添加到表单中的关联数量，从而不超过这个限制？

这是添加/编辑卡片的表单代码

```
 = simple_form_for @card, multipart: true do |c|
  = c.input :name, label: "Name of the card"
  = c.input :cost, label: "Cost of the card"
  #colours
   = c.simple_fields_for :colours do |colour|
    = render "colour_fields", f: colour
   .links
    = link_to_add_association 'add colour', c, :colours 
```

这是 colour_fields 表格

```
.nested-fields
 = f.input :value, as: :select, collection: Colour::VALUES, selected: f.object.value, include_blank: false
 = link_to_remove_association "remove colour", f 
```

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T17:23:01.490

我会为此使用javascript。您可以绑定到在插入新项目时触发的事件：在此事件上计算有多少项目，并在需要时隐藏链接。

同样，在加载页面时也这样做。

所以在看起来像这样的代码中：

```
 $(function() {
   function check_to_hide_or_show_add_link() {
     if ($('#colours .nested-fields:visible').length == 5) {
       $('#colours .links a').hide();
     } else {
       $('#colours .links a').show();
     }
   }

   $('#colours').on('cocoon:after-insert', function() {
     check_to_hide_or_show_add_link();
   });

   $('#colours').on('cocoon:after-remove', function() {
     check_to_hide_or_show_add_link();
   });

   check_to_hide_or_show_add_link();     
 }); 
```

像这样的东西应该工作。请注意，此代码未经测试:)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-26T19:30:26.120

我有一个类似的任务要做，我最终做的是`onclick`在“添加”链接上放置一个事件。此`onclick`事件将在执行添加字段的代码之前执行。

在您的情况下，代码如下所示：

```
= link_to_add_association 'add colour', c, :colours, class: 'add-colour-link' 
```

然后在您的 JavaScript 中（在本例中为 CoffeeScript）：

```
$('.add-colour-link').on 'click', (e) ->
   if $('#colours .nested-fields:visible').size() < 5
     return true #continue the execution 
   else
     #maybe display the modal to the user that only a maximum of 5 is allowed
     return false #prevent further execution 
```

# regex - 用正则表达式匹配长数字中的最后一位

> ID：12934928
> 
> 赞同：-2
> 
> 时间：2012-10-17T13:00:38.290
> 
> 标签：regex

当谈到正则表达式时，我是真正的新手，如果这“应该”很容易，我深表歉意。

我需要匹配具有以下格式的数字的最后 6 位

> 308950 3200 014559

前两组数字将保持不变（308950 3200），不需要提取。我只对最后 6 位数字感兴趣。

完整的数字可能包含空格，但这些必须是可选的。

这必须在正则表达式中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:07:33.487

使用正则表达式模式

```
(?<=\b308950\s*3200\s*)\d{6}\b 
```

或者

```
\b308950\s*3200\s*(\d{6})\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:03:10.210

如果前导数字保持不变，您可以使用：

```
308950 3200\s*(\d{6}) 
```

或者，您可以使用：

```
(?:\d+\s)+(\d{6}) 
```

此外，如果字符串将位于输入字符串的*末尾*，请考虑在末尾添加一个`$`来表示这一点（以确保它与字符串的末尾匹配）：

```
(\d{6})$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:03:15.843

即使数字之间有空格，也应该这样做

```
^308950 3200[\d\s]*?((\d\s?){6})$ 
```

第 1 组将包含带空格的所需数字（如果有）

# javascript - 什么是自由变量？

> ID：12934929
> 
> 赞同：33
> 
> 时间：2012-10-17T13:00:38.200
> 
> 标签：javascript, closures, free-variable

Javascript闭包定义说：

> “闭包”是一个表达式（通常是一个函数），它可以具有自由变量以及绑定这些变量的环境（即“关闭”表达式）。

有人可以向我解释自由变量的概念吗？这个概念是 Javascript 特有的还是也适用于其他语言？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-17T13:02:55.717

自由变量只是既不是本地声明也不是作为参数传递的变量。

[来源 ：](http://en.wikipedia.org/wiki/Free_variable)

> 在计算机编程中，术语自由变量是指函数中使用的变量，这些变量既不是局部变量也不是该函数的参数。[1](http://en.wikipedia.org/wiki/Free_variable)在这种情况下，术语非局部变量通常是同义词。

在 javascript 闭包中，这些只是函数在声明闭包的封闭作用域或父作用域中获取（读取和写入）的变量。

看看这个现实世界的例子：

```
Gol.prototype._ensureInit = function() {
    ...
    var _this = this;
    var setDim = function() {
        _this.w = _this.canvas.clientWidth;
        _this.h = _this.canvas.clientHeight;
        _this.canvas.width = _this.w;
        _this.canvas.height = _this.h;
        _this.dimChanged = true;
        _this.draw();
    };
    setDim();
    window.addEventListener('resize', setDim);
    ...
}; 
```

在这个例子中，闭包从`setDim`函数指向`_this`在封闭范围（`_ensureInit`函数）中声明的变量。此变量未声明`setDim`或传递。这是一个*“自由变量”*。

请注意，`_this`它不会成为函数的变量`setDim`：在同一范围内声明的另一个函数将共享同一个变量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T13:08:50.027

“免费翻译”可以是：`"out of scope" - variables`.

由于 ECMAscript 使用词法作用域，自由变量是在父作用域中定义并通过作用域链搜索查找的变量。

```
(function _outerScope() {
    var foo = 42;

    (function _innerScope() {
        var bar = 100;

        console.log( foo + bar ); // 142
    }());
}()); 
```

在上面的例子中，是上下文中的`foo`一个*自由变量*`_innerScope`。如果我们快速浏览一下 ECMAscript 的基本概念，就会变得非常明显。

*上下文*链接到一个激活*对象*（在 ES3 中），分别链接到一个*词法环境记录*（在 ES5 中），其中包含诸如：`function declarations`、`variables declared with var`和`formal paramters`、以及对所有*父激活对象*/*词法环境*的引用。如果需要访问某个变量，ECMAscript 引擎会首先从当前的*Context*本身中查找*AO* / *LE ；*如果在那里找不到，它会查看父*AO*的 / *LE*的。

 ***由于任何*Context*都将这些数据存储在*类似数组的结构*中（不要忘记我们在这里讨论的是实现级别，而不是 Javascript 本身），所以我们在讨论`Lexical Scope`，因为我们按顺序搜索所有父*Context*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T13:05:10.317

举个例子：

```
var myModule = (function (){
   var moduleVar; // closure variable

   return function(){
     // actual function
   }
})(); 
```

定义的变量是一个闭包变量。它可以在整个闭包本身中使用，但不是全局命名空间的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-29T09:20:50.177

我不记得我读过多少次 JS 书籍并修改了一些有闭包主题的主题。

答案只是对已接受答案的补充。

下面的例子摘自[Modern JavaScript for the Impatient, Cay Horstmann](http://horstmann.com/javascript-impatient/)

```
// text is a free variable of the arrow function.
const sayLater = (text, when) => {
  //         vv
  let task = () => console.log(text) // (heed no 'text' variable here) => console.log(text)
  setTimeout(task, when)
} 
```

现在你可以掌握

> 术语自由变量是指函数中使用的变量，这些变量既不是局部变量也不是该函数的参数。***

# c# - “不提供此类页面。” 尝试浏览 *.cshtml 文件时出错

> ID：12934932
> 
> 赞同：41
> 
> 时间：2012-10-17T13:00:52.347
> 
> 标签：c#, asp.net-mvc

我只是创建了一个新的 MVC 4 Web API 项目，并创建了一个新的 .cshtml 文件，其中包含非常简单的 HTML：

```
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
</head>
<body>
    <div>

    </div>
</body>
</html> 
```

打开 URL 时显示以下错误：

> “/”应用程序中的服务器错误。
> 
> 不提供此类页面。
> 
> 说明：您请求的页面类型未提供服务，因为它已被明确禁止。扩展名“.cshtml”可能不正确。请查看下面的 URL 并确保其拼写正确。
> 
> 请求的 URL：/index.cshtml

我在我的一位同事的开发机器上测试了这个场景（完全相同的项目）。它按预期工作。所以我想配置或某些安装肯定有问题。但是**在哪里**搜索？本地 IIS 和 Visual Studio 开发服务器都不起作用。

**更新**

直接访问 .cshtml 文件不用于生产代码 -**仅**用于培训目的！导航到`/Home/Index`工作正常。所以没有别的，这显然是错误的。只需直接访问 .cshtml 文件。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-17T13:01:53.157

**更新 2：**

我终于明白了你想要达到的目标。对不起，我最初不理解。我没有仔细阅读你的问题。您正在尝试直接访问`~/Views`文件夹外的 Razor 页面。

在 ASP.NET MVC 4 中，默认情况下禁用此功能。为了启用它，您只需在 web.config 中调整以下设置：

```
<add key="webpages:Enabled" value="true" /> 
```

`false`当您使用任何模板创建新的 ASP.NET MVC 4 项目时，它的值默认为。因此，如果您说它可以在他的 PC 上运行，我猜您的同事已经这样做了。

~~**原来的**~~

您不应直接`.cshtml`在 ASP.NET MVC 应用程序中请求文件。这些是位于`~/Views`文件夹中的视图。它们不能直接访问。您需要相应的控制器操作。

例如，假设您有以下控制器：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

然后`~/Views/Home/Index.cshtml`使用您的问题中显示的内容定义视图。

现在，当您运行应用程序时，您可以导航到`/Home/Index`哪个将执行控制器的`Index`操作`Home`并呈现相应的视图。

[我建议您阅读一些有关ASP.NET MVC](http://www.asp.net/mvc)的入门教程，以熟悉最基本的基本概念。

* * *

**更新 1：**

阻止对`.cshtml`文件`~/Views`夹内文件的请求的代码位于`~/Views/web.config`文件内：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
        <remove name="BlockViewHandler"/>
        <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
</system.webServer> 
```

 ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-24T20:49:55.860

如果您已启用网页并且您已验证 .NET 版本有效，那么您的问题很可能是 IIS 服务器没有可在所有站点之间共享的 razor 二进制文件。要修复它，您应该确保已将 mvc 二进制文件包含在 /bin 文件夹中。这个链接解释得很好： http:
[//www.codeproject.com/Answers/437259/his-type-of-page-is-not-served-CSHTML-how-to-serve#answer1](http://www.codeproject.com/Answers/437259/his-type-of-page-is-not-served-CSHTML-how-to-serve#answer1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-23T23:12:00.433

我遇到了同样的问题，我通过转到客户端的属性并显示“开始操作”的地方解决了它，选择当前页面。我将其设置为特定页面。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-05-23T20:23:14.047

我在一个 MVC 项目中收到了同样的消息，结果发现我缺少 MVC 框架的一个关键部分，即 Global.asax 和 Global.asax.cs 条目。我在解决方案资源管理器中选择了该项目并执行了添加、新项、全局应用程序类。然后我对其进行了编辑并将 Application_Start 替换为必要的配置项：

```
 protected void Application_Start()
            {
                AreaRegistration.RegisterAllAreas();
                FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
                RouteConfig.RegisterRoutes(RouteTable.Routes);
                BundleConfig.RegisterBundles(BundleTable.Bundles);
            } 
```

这为我解决了。~~

# maven - Maven 多模块 w。每个模块的装配选项？

> ID：12934936
> 
> 赞同：1
> 
> 时间：2012-10-17T13:01:07.497
> 
> 标签：maven, maven-plugin

我有一个多模块 maven 设置，我想将其中一个 jar 及其依赖项打包在一起，而其他所有的 jar 都可以保持原样。我的配置如下所示：

根：

```
<project...>
    <modelVersion>4.0.0</modelVersion>
    <name>Foo</name>
    <artifactId>Foo</artifactId>
    <groupId>org.example</groupId>
    <version>1.0</version>
    <packaging>pom</packaging>

     <modules>
         <module>Bar1</module>
         <module>Bar2</module>
         <module>Bar3</module>
     </modules>
 </project> 
```

模块（Bar1）：

```
<project...>
    <modelVersion>4.0.0</modelVersion>
    <name>Foo - Bar1</name>
    <artifactId>Bar1</artifactId>
    <groupId>${project.parent.groupId}</groupId>

    <parent>
        <artifactId>Foo</artifactId>
        <groupId>org.exmaple</groupId>
        <version>1.0</version>
    </parent>

    <build>
        <finalName>Bar1</finalName>
        <plugins>
        ...
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                        <mainClass>org.exmaple.bar1.Main</mainClass>
                        </manifest>
                    </archive>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
            ...
        </plugins>
    </build>
</project> 
```

运行`mvn package`后会给我模块的所有 jar/war 文件。但是要生成具有依赖关系的 jar，我必须切换到模块并另外触发程序集`cd Bar1; mvn assembly:single`。

是否有机会更改设置，以便在`mvn package`构建包含依赖项的罐子之一之后？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:12:13.927

将程序集插件包含到包阶段的执行中：

```
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-assembly-plugin</artifactId>
  <configuration>
    <descriptor>src/assembly/bin.xml</descriptor>
    <finalName>apache-maven-cookbook-${pom.version}</finalName>
  </configuration>
  <executions>
    <execution>
      <phase>package</phase>
      <goals>
        <goal>single</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

如[Maven 组装页面所述](http://maven.apache.org/plugin-developers/cookbook/generate-assembly.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:12:05.230

您需要为程序集插件定义一个执行。否则不会执行。该插件的站点可能有点误导，因为有一个配置部分看起来像你的。但是，如果您希望执行实际发生，则需要对其进行定义。

# c++ - 如何使用 enable_if 和模板专业化 c++？

> ID：12934941
> 
> 赞同：3
> 
> 时间：2012-10-17T13:01:14.300
> 
> 标签：c++, templates, template-specialization

我试图在 boost 中使用 enable_if 来进行模板专业化，但无法让它工作并且对如何编写它以及语法的实际含义感到困惑。我已经阅读了 boost 文档，但对我来说仍然不太有意义

我有四种方法，我希望它们都被命名为相同的东西并且都非常相似。我有两个返回字符串的函数和两个返回整数的函数。在每种情况下，参数都是 int,int,return 类型或 int,const char*,return 类型，因为最后一个参数将是可以返回的默认值。

所以像这样的东西......

```
int getVal(int,int,int)
int getVal(int,const char*,int)
string getVal(int,int,string)
string getVal(int,const char*,string) 
```

但这不起作用，因为参数是相同的，只有返回类型不同，我需要它是一个模板化的方法，而不是一个重载的方法。这是在一个非模板类中。所以如果返回类型是字符串或整数，我需要 enable_if，或者检查最后一个参数的 enable_if？

如果有人能够解释语法的含义并且实际上正在这样做，那么任何帮助都会有所帮助。谢谢

这是我尝试获取正确语法的众多尝试之一。

```
 template<typename myType> 
   typename enable_if<boost::is_arithmetic<myType>, myType>::type
    GetValue(int row, int col, myType d)
    { 
        unsigned int columnIndex = this->GetColumnIndex(col);

        try {
            CheckColumnType(col, Integer);
        }
        catch(DatatableException e){
            return d;
        }
        if("0" == this->m_rows[row][col])
        {
            return 0;
        }
        else if("1" == this->m_rows[row][col])
        {       
            return 1;
        }
        else
        {
            return atoi(this->m_rows[row][col].c_str());
        }
    }

template<typename myType> 
  typename disable_if<boost::is_arithmetic<myType>, myType>::type
   GetValue(int row, int col, myType d)
    {
        unsigned int columnIndex = this->GetColumnIndex(col);

        try {
            CheckColumnType(col, String);
        }
        catch(DatatableException e){            
            return d;

        }
        return this->m_rows[row][col];
    }

 template <class T>
  T GetValue(int row, typename enable_if<is_arithmetic<!T> >::type* dummy = 0){
{
            unsigned int columnIndex = this->GetColumnIndex(col);
            try {
                CheckColumnType(col, Integer);
            }
            catch(DatatableException e){
                return d;
            }
            if("0" == this->m_rows[row][col])
            {
                return 0;
            }
            else if("1" == this->m_rows[row][col])
            {       
                return 1;
            }
            else
            {
                return atoi(this->m_rows[row][col].c_str());
            }
    }

 template <class T>
    T GetValue(int row, typename enable_if<is_arithmetic<T> >::type* dummy = 0){

            try {
                CheckColumnType(col, Integer);
            }
            catch(DatatableException e){
                return d;
            }
            if("0" == this->m_rows[row][col])
            {
                return 0;
            }
            else if("1" == this->m_rows[row][col])
            {       
                return 1;
            }
            else
            {
                return atoi(this->m_rows[row][col].c_str());
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:12:53.493

我不确定`std::enable_if`您是否正在寻找。您是否尝试使用函数模板专业化？

```
template <typename T>
T function(int number, T const& result = T());

template <>
std::string function(int number, std::string const& result)
{
        // implementation for T = std::string
        return result;
}

template <>
int function(int number, int const& result)
{
        // implementation for T = int
        return result;
} 
```

请注意，这需要 C++11。默认参数的歧义可以通过显式指定类型来解决，例如`int ret = function<int>(1);`.

# oracle - Oracle URL 字符串

> ID：12934944
> 
> 赞同：0
> 
> 时间：2012-10-17T13:01:21.533
> 
> 标签：oracle, url, plsql

我有一个表，其中包含一个类型为 VARCHAR2 且长度为 255 的字段，用于存储 URL。对其运行 SELECT 查询会返回数据，如下所示：

```
SELECT URL FROM SERVICE WHERE ID = 1 
```

返回我存储的 URL（在这种情况下，返回 file:///test.url/）。

但是，从存储过程运行相同的东西，我得到一个空框。我的所有其他字段都已填写，我没有收到任何错误。URL 字段肯定包含数据，并且我确保它传入的变量足够大以支持它。

我的问题是：为了通过存储过程传递 URL 式字符串，我是否需要以特定方式处理它？与工作同事就此进行的讨论提出了这样的想法，即 URL 字符串中的字符可能会导致某种形式的转义子句被触发，但我无法找到有关该主题的任何进一步信息。

**编辑：**使用的部分存储过程：

```
 SELECT        ...,
                    USER.SERVICE.URL,
                    ...

      FROM          USER.SITE

      -- More joins

      INNER JOIN    USER.SERVICE
      ON            USER.SITE.URLID = USER.SERVICE.ID          

      -- More joins

      WHERE         USER.SERVICE.ID = 1... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:36:03.410

就像他说的那样，您只执行选择，但不存储它。您需要将字段的值存储在变量上。为了在存储过程或包中使用它，您需要将它存储在一个变量中，就像这样

```
SELECT field INTO var FROM table 
```

请记住，您不需要以特殊方式处理它，因为它只是一个简单的字符串。你的程序应该是这样的。

```
CREATE PROCEDURE DEMO(R_URL OUT VARCHAR2) IS  
BEGIN
 SELECT URL INTO R_URL FROM DUAL;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:24:56.660

您正在从存储过程运行它。这意味着您需要将其选择为变量。从它的声音来看，您将所选数据暴露给客户端应用程序，这意味着您需要以某种方式将其传递出去，例如通过 OUT 参数。

因此，对您的问题的一个可能答案是您没有填充您认为正在填充的变量，或者您没有将值传递给 OUT 参数（或其他）。

无论如何你反弹它，这是一个调试场景。如果你不能在这里发布你的代码（当我说我真的不想仔细研究你的大块代码时，我相信我代表我们所有人），那么你需要自己去检查。

# iphone - iPhone向安装了应用程序的其他用户发送蓝牙消息

> ID：12934945
> 
> 赞同：0
> 
> 时间：2012-10-17T13:01:23.177
> 
> 标签：iphone, ios, bluetooth, message

如果我点击“Awesome App”中的一个按钮，有没有办法向附近也安装了“Awesome App”的用户发送短信？这可以通过蓝牙、wifi、3g 或任何其他聪明人建议的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:07:45.453

您可以注册应用程序以获取地理更新，将位置提交到您的服务器，当用户发送消息时，此消息将发送到您的服务器，检查位置并且附近的所有用户都会收到带有此消息的推送通知。

还要确保他们也可以从服务器获取消息，因为不能保证推送通知的传递。

更新您调用的应用程序的位置

```
self.locationManager = [[CLLocationManager alloc] init];
[self.locationManager startMonitoringSignificantLocationChanges]; 
```

如果您不再需要更新，请务必致电

```
[self.locationManager stopMonitoringSignificantLocationChanges]; 
```

还要确保在's键中设置`location`值。`info.plist``UIBackgroundModes`

这将在您的应用程序处于后台时为您提供位置更改，并且根据[文档](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringSignificantLocationChanges)，如果您的应用程序已被终止，它甚至会重新启动您的应用程序。

# blackberry - 移动滑块时增加 LabelField 值

> ID：12934948
> 
> 赞同：0
> 
> 时间：2012-10-17T13:01:30.553
> 
> 标签：blackberry, slider, gauge

我创建了一个 SliderField 类，以便在我的 BlackBerry 应用程序中显示一个可拖动的滑块。滑块主要用于设置应用程序中位置更新（通过 GPS）的间隔。该应用程序基于 OS 5.0 构建，因此未找到 SliderField 的 API。我面临的问题是，随着滑块的移动，我需要增加标签中的整数值。例如，如果标签中的整数值为 1，并且用户移动滑块，则该值应增加到 5、10、15 等。我不知道如何将移动滑块与增加标签字段中的值联系起来。有人可以帮忙吗？我将 SliderField 对象添加到屏幕，如下所示：

```
Bitmap sliderBack = Bitmap.getBitmapResource( "progress51.png" );
    Bitmap sliderFocus = Bitmap.getBitmapResource( "progress51.png" );
    Bitmap sliderThumb = Bitmap.getBitmapResource( "butt.png" );
SliderField theSlider = new SliderField( sliderThumb, sliderBack, sliderFocus,20, 1, 1, 1 );
         secondHFM.add(theSlider) 
```

下面是我的 SliderField 类的代码。

```
public class SliderField extends Field
 {
 Bitmap _imageThumb;

Bitmap _imageSlider;
Bitmap _imageSliderLeft;
Bitmap _imageSliderCenter;
Bitmap _imageSliderRight;

Bitmap _imageSliderFocus;
Bitmap _imageSliderFocusLeft;
Bitmap _imageSliderFocusCenter;
Bitmap _imageSliderFocusRight;

private int _numStates;
private int _currentState;
private boolean _selected;

private int _xLeftBackMargin;
private int _xRightBackMargin;

private int _thumbWidth;
private int _thumbHeight;

private int _totalHeight;
private int _totalWidth;

private int _rop;

private int _backgroundColours[];
private int _backgroundSelectedColours[];

private int _defaultSelectColour = 0x977DED;
private int _defaultBackgroundColour = 0x000000;
private int _defaultHoverColour = 0x999999;

public SliderField( Bitmap thumb
            , Bitmap sliderBackground
            , int numStates
            , int initialState
            , int xLeftBackMargin
            , int xRightBackMargin )
{
    this( thumb, sliderBackground, sliderBackground, numStates, initialState, xLeftBackMargin, xRightBackMargin, FOCUSABLE );
}

public SliderField( Bitmap thumb
            , Bitmap sliderBackground
            , int numStates
            , int initialState
            , int xLeftBackMargin
            , int xRightBackMargin
            , long style )
{  
    this( thumb, sliderBackground, sliderBackground, numStates, initialState, xLeftBackMargin, xRightBackMargin, style );
}

public SliderField( Bitmap thumb
            , Bitmap sliderBackground
            , Bitmap sliderBackgroundFocus
            , int numStates
            , int initialState
            , int xLeftBackMargin
            , int xRightBackMargin )
{
    this( thumb, sliderBackground, sliderBackgroundFocus, numStates, initialState, xLeftBackMargin, xRightBackMargin, FOCUSABLE );
}

public SliderField( Bitmap thumb
            , Bitmap sliderBackground
            , Bitmap sliderBackgroundFocus
            , int numStates
            , int initialState
            , int xLeftBackMargin
            , int xRightBackMargin
            , long style )
{
    super( style );

    if( initialState > numStates || numStates < 2 ){
    }
    _imageThumb = thumb;
    _imageSlider = sliderBackground;
    _imageSliderFocus = sliderBackgroundFocus;
    _numStates = numStates;
    setState( initialState );

    _xLeftBackMargin = xLeftBackMargin;
    _xRightBackMargin = xRightBackMargin;

    _rop = _imageSlider.hasAlpha() ? Graphics.ROP_SRC_ALPHA : Graphics.ROP_SRC_COPY;

    _thumbWidth = thumb.getWidth();
    _thumbHeight = thumb.getHeight();
    initBitmaps();
}              
public SliderField( Bitmap thumb
            , Bitmap sliderBackground
            , int numStates
            , int initialState
            , int xLeftBackMargin
            , int xRightBackMargin
            , int[] colours
            , int[] selectColours )
{
    this(thumb, sliderBackground, sliderBackground, numStates, initialState, xLeftBackMargin, xRightBackMargin, FOCUSABLE );

    if( colours.length != numStates+1 ){
        throw new IllegalArgumentException();
    }
    _backgroundColours = colours;
    _backgroundSelectedColours = selectColours;
}
public void initBitmaps()
{
    int height = _imageSlider.getHeight();

    _imageSliderLeft = new Bitmap( _xLeftBackMargin, height );
    _imageSliderCenter = new Bitmap( _imageSlider.getWidth() - _xRightBackMargin - _xLeftBackMargin, height);
    _imageSliderRight = new Bitmap( _xRightBackMargin, height );

    copy( _imageSlider, 0, 0, _xLeftBackMargin, height, _imageSliderLeft );
    copy( _imageSlider, _xLeftBackMargin, 0, _imageSlider.getWidth() - _xRightBackMargin - _xLeftBackMargin, height, _imageSliderCenter);
    copy( _imageSlider, _imageSlider.getWidth() - _xRightBackMargin, 0, _xRightBackMargin, height, _imageSliderRight);

    _imageSliderFocusLeft = new Bitmap( _xLeftBackMargin, height );
    _imageSliderFocusCenter = new Bitmap( _imageSlider.getWidth() - _xRightBackMargin - _xLeftBackMargin, height);
    _imageSliderFocusRight = new Bitmap( _xRightBackMargin, height );

    copy( _imageSliderFocus, 0, 0, _xLeftBackMargin, height, _imageSliderFocusLeft );
    copy( _imageSliderFocus, _xLeftBackMargin, 0, _imageSlider.getWidth() - _xRightBackMargin - _xLeftBackMargin, height, _imageSliderFocusCenter);
    copy( _imageSliderFocus, _imageSlider.getWidth() - _xRightBackMargin, 0, _xRightBackMargin, height, _imageSliderFocusRight);
}
private void copy(Bitmap src, int x, int y, int width, int height, Bitmap dest) {
    int[] argbData = new int[width * height];
    src.getARGB(argbData, 0, width, x, y, width, height);
    for(int tx = 0; tx < dest.getWidth(); tx += width) {
        for(int ty = 0; ty < dest.getHeight(); ty += height) {
            dest.setARGB(argbData, 0, width, tx, ty, width, height);
        }
    }
}
public void setState(int newState) {
    if( newState > _numStates ){
        throw new IllegalArgumentException();
    } else {
        _currentState = newState;
        invalidate();
    }
}
public int getState() {
    return _currentState;
}
public int getNumStates() {
    return _numStates;
}
public int getColour() {
    if(_backgroundSelectedColours != null) {
        return _backgroundSelectedColours[getState()];
    }
    return 0x000000;
}

public int getPreferredWidth() {
    return _totalWidth;
}

public int getPreferredHeight() {
    return _totalHeight;
}
protected void layout( int width, int height ) {
    if (width < 0 || height < 0)
        throw new IllegalArgumentException();
    _totalWidth = width;
    _totalHeight = Math.max(_imageSlider.getHeight(), _imageThumb.getHeight());

    setExtent( _totalWidth, _totalHeight );
}

public void paint( Graphics g )
{
    int sliderHeight = _imageSlider.getHeight();
    int sliderBackYOffset = ( _totalHeight - sliderHeight ) >> 1;
    int backgroundColor = _defaultBackgroundColour;
    if( _backgroundSelectedColours != null || _backgroundColours != null ) {

        if( _selected ) {
            backgroundColor = _backgroundSelectedColours != null ? _backgroundSelectedColours[getState()] : _defaultSelectColour;
        } else if(g.isDrawingStyleSet(Graphics.DRAWSTYLE_FOCUS)) {
            backgroundColor = _backgroundColours != null ? _backgroundColours[getState()] : _defaultHoverColour;
        } else {
            backgroundColor = _defaultBackgroundColour;
        }
    }
    g.setColor( backgroundColor );
    g.fillRect( 1, sliderBackYOffset + 1, _totalWidth - 2, sliderHeight - 2 );

    if(g.isDrawingStyleSet(Graphics.DRAWSTYLE_FOCUS)) {    
        paintSliderBackground( g, _imageSliderFocusLeft, _imageSliderFocusCenter, _imageSliderFocusRight );
    } else {
        paintSliderBackground( g, _imageSliderLeft, _imageSliderCenter, _imageSliderRight );
    }
    int thumbXOffset = ( ( _totalWidth - _thumbWidth ) * _currentState ) / _numStates;
    g.drawBitmap( thumbXOffset, ( _totalHeight - _thumbHeight ) >> 1, _thumbWidth, _thumbHeight, _imageThumb, 0, 0 );
}

private void paintSliderBackground( Graphics g, Bitmap left, Bitmap middle, Bitmap right ) 
{
    int sliderHeight = _imageSlider.getHeight();
    int sliderBackYOffset = ( _totalHeight - sliderHeight ) >> 1;
    g.drawBitmap( 0, sliderBackYOffset, _xLeftBackMargin, sliderHeight, left, 0, 0 );
    g.tileRop( _rop, _xRightBackMargin, sliderBackYOffset, _totalWidth - _xLeftBackMargin - _xRightBackMargin, sliderHeight, middle, 0, 0 );
    g.drawBitmap( _totalWidth - _xRightBackMargin, sliderBackYOffset, _xRightBackMargin, sliderHeight, right, 0, 0 );
}

public void paintBackground( Graphics g ) 
{
}

protected void drawFocus( Graphics g, boolean on )
{
    boolean oldDrawStyleFocus = g.isDrawingStyleSet( Graphics.DRAWSTYLE_FOCUS );
    try {
        if( on ) {
            g.setDrawingStyle( Graphics.DRAWSTYLE_FOCUS, true );
        }
        paint( g );
    } finally {
        g.setDrawingStyle( Graphics.DRAWSTYLE_FOCUS, oldDrawStyleFocus );
    }
}
protected boolean touchEvent(TouchEvent message)
{
    boolean isConsumed = false;
    boolean isOutOfBounds = false;
    int x = message.getX(1);
    int y = message.getY(1);
    if(x < 0 || y < 0 || x > getExtent().width || y > getExtent().height) {
        isOutOfBounds = true;
    }
    switch(message.getEvent()) {
        case TouchEvent.CLICK:
        case TouchEvent.MOVE:
            if(isOutOfBounds) return true; 
            _selected = true; 

            int stateWidth = getExtent().width / _numStates;
            int numerator = x / stateWidth;
            int denominator = x % stateWidth;
            if( denominator > stateWidth / 2 ) {
                numerator++;
            }
            _currentState = numerator;
            invalidate();

            isConsumed = true;
            break;
        case TouchEvent.UNCLICK:
            if(isOutOfBounds) {
                _selected = false; 
                return true;
            }
            _selected = false; 
            stateWidth = getExtent().width / _numStates;
            numerator = x / stateWidth;
            denominator = x % stateWidth;
            if( denominator > stateWidth / 2 ) {
                numerator++;
            }
            _currentState = numerator;
            invalidate();
            fieldChangeNotify(0);
            isConsumed = true;
            break;
    }
    return isConsumed;
}
protected boolean navigationMovement(int dx, int dy, int status, int time) 
{
    if( _selected )
    {
        if(dx > 0 || dy > 0) {
            incrementState();
            fieldChangeNotify( 0 );
            return true;
        } else if(dx < 0 || dy < 0) {
            decrementState();
            fieldChangeNotify( 0 );
            return true;
        }
    }
    return super.navigationMovement( dx, dy, status, time);
}
public void decrementState() {
    if(_currentState > 0) {
        _currentState--;
        invalidate();
    }
}
public void incrementState() {
    if(_currentState < _numStates) {
        _currentState++;
        invalidate();
    }
}
protected boolean invokeAction(int action) {
    switch(action) {
        case ACTION_INVOKE: {
            toggleSelected();
            return true;
        }
    }
    return false;
}
protected boolean keyChar( char key, int status, int time ) {
    if( key == Characters.SPACE || key == Characters.ENTER ) {
        toggleSelected();
        return true;
    }

    return false;
}
protected boolean trackwheelClick( int status, int time ) {
    if( isEditable() ) {
        toggleSelected();
        return true;
    }
    return super.trackwheelClick(status, time);
}
private void toggleSelected() {
    _selected = !_selected;
    invalidate();
}
public void setDirty( boolean dirty )
{  
}
public void setMuddy( boolean muddy )
{ 
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:21:11.990

如果您使用下面的代码，您将得到您的实际需求，您可以通过在滑块字段引用上调用 getValue() 方法将滑块**当前值获取到您的屏幕类中。**

实现**FieldChangeListener**接口并尝试覆盖**fieldChanged()**方法。

使用**Horizo** ​​ntalFieldManager类和**setStatus()**方法，如果你想在屏幕底部显示你的滑块，否则你可以正常显示。

这里的代码：

```
 public class SliderScreen extends MainScreen implements FieldChangeListener
{
private SliderField slider;
 private HorizontalFieldManager hm;

public SliderField(){

slider = new SliderField(
                    Bitmap.getBitmapResource("slider2_thumb_normal.png"),
                    Bitmap.getBitmapResource("slider2_progress_normal.png"),
                    Bitmap.getBitmapResource("slider2_base_normal.png"),
                    Bitmap.getBitmapResource("slider2_thumb_focused.png"),
                    Bitmap.getBitmapResource("slider2_progress_focused.png"),
                    Bitmap.getBitmapResource("slider2_base_focused.png"), 8, 4,
                    8, 8, FOCUSABLE);

            slider.setChangeListener(this);
            hm = new HorizontalFieldManager();

            hm.add(slider);

            setStatus(hm);

}

public void fieldChanged(Field field, int context) {
        try {

            if (field == slider) {
                int value = slider.getValue();

            }

        } catch (IllegalStateException e) {

            e.printStackTrace();
        } catch (NullPointerException e) {
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:49:21.783

我已经完成了如何使用此代码的简单示例，检查一下

```
 public final class MyScreen extends MainScreen implements FieldChangeListener//,FocusChangeListener
{
    /**
     * Creates a new MyScreen object
     */
    public MyScreen()
    {        
        // Set the displayed title of the screen       
        setTitle("MyTitle");

        SliderField slider;

        slider = new SliderField( 
            Bitmap.getBitmapResource( "slider_thumb_normal.png" ),  Bitmap.getBitmapResource( "slider_progress_normal.png" ),  Bitmap.getBitmapResource( "slider_base_normal.png" ),
            Bitmap.getBitmapResource( "slider_thumb_focused.png" ), Bitmap.getBitmapResource( "slider_progress_focused.png" ), Bitmap.getBitmapResource( "slider_base_focused.png"),
            Bitmap.getBitmapResource( "slider_thumb_pressed.png" ), Bitmap.getBitmapResource( "slider_progress_pressed.png" ), Bitmap.getBitmapResource( "slider_base_pressed.png"),
            10, 0, 12, 12, FOCUSABLE );
        slider.setPadding( 20, 20, 20, 20 );
        slider.setBackground( BackgroundFactory.createSolidBackground( 0xD3D3D3 ) );
        slider.setChangeListener(this);
        //slider.focusChangeNotify(0);
        add( slider );

    }

    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub
        if(field instanceof SliderField)
        {
            SliderField temp = (SliderField)field;
            System.out.println("Temp value is"+temp.getValue());
        }
    }

} 
```

# web-services - 找不到类异常：Spring WS

> ID：12934957
> 
> 赞同：2
> 
> 时间：2012-10-17T13:02:06.423
> 
> 标签：web-services, xsd, spring-ws

我正在使用**Spring 3.1.3**和**spring ws-2.1.1 开发一个简单的 Web 服务。**

**我的 web.xml 是——**

```
<servlet>
<servlet-name>spring-ws-service</servlet-name>
<servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
<init-param>
  <param-name>transformWsdlLocations</param-name>
  <param-value>true</param-value>
</init-param>
</servlet>
<servlet-mapping>
<servlet-name>spring-ws-service</servlet-name>
<url-pattern>/*</url-pattern>
</servlet-mapping> 
```

**而来自 Meta-inf 的 spring-ws-servlet.xml 就像——**

```
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop
       http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-2.5.xsd">
<bean id="stringReversalService">
</bean>
<bean id="stringReversalServiceEndpoint">
<property name="stringReversalService" ref="stringReversalService"/>
</bean>
<bean id="payloadMapping">
<property name="defaultEndpoint" ref="stringReversalServiceEndpoint"/>
</bean>
<bean id="stringReversalSchema">
<property name="xsd" value="/WEB-INF/reversalService.xsd"/>
</bean>
<bean id="stringReversal">
<property name="schema" ref="stringReversalSchema"/>
<property name="portTypeName" value="stringReversal"/>
<property name="locationUri" value="http://localhost:8080/string-reversal/services"/>
</bean>
</beans> 
```

**在 JBoss 7.1.1 上构建战争和部署时，我得到：-**

```
18:20:45,299 INFO  [org.jboss.as.server] (HttpManagementService-threads - 4) JBAS018558: Undeployed "Spring-WS-WebService.war"
18:22:18,174 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "Spring-WS-WebService.war"
18:22:18,197 WARN  [org.jboss.as.ee] (MSC service thread 1-8) JBAS011006: Not installing optional component ***org.springframework.ws.transport.http.MessageDispatcherServlet due to exception: java.lang.ClassNotFoundException: org.springframework.ws.transport.http.MessageDispatcherServlet from [Module "deployment.Spring-WS-WebService.war:main" from Service Module Loader]***
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
    at java.lang.Class.forName0(Native Method) [rt.jar:1.6.0_26]
    at java.lang.Class.forName(Class.java:247) [rt.jar:1.6.0_26]
    at org.jboss.as.server.deployment.reflect.DeploymentClassIndex.classIndex(DeploymentClassIndex.java:54) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:79)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:06:04.513

它无法找到`MessageDispatcherServlet`。您需要`spring-ws-core-<version>.jar`在应用程序中包含依赖项`WEB-INF/lib`或确保它已经存在。

# .htaccess - Opencart 普通网址不再起作用

> ID：12934960
> 
> 赞同：0
> 
> 时间：2012-10-17T13:02:12.690
> 
> 标签：.htaccess, routes, opencart

我在使用 Opencart 时遇到了一个问题，其中只有 SEO url 正在工作，而 **index.php?route=common/home** 等所有“正常”的 url 都已停止工作。它们导致页面未找到错误。

这是我的网站：[www.24x7style.com](http://www.24x7style.com)

我最近没有对我的网站进行任何更改..这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:40:36.490

并非所有非 SEO URL 都会导致错误。例如，[http://24x7style.com/index.php](http://24x7style.com/index.php?route=checkout/cart) ?route=checkout/cart似乎工作。搜索 URL 也有效： http://24x7style.com/index.php?route=product/search&filter_name= [nyassa](http://24x7style.com/index.php?route=product/search&filter_name=nyassa)

您的帐户/* URL 均无效。也许您可以检查您的目录/控制器/帐户/* 文件，确保它们完好无损。

# c++ - 编译 C++ Thrift 代码以连接 Cassandra 会导致以下错误。我们在这里缺少什么？

> ID：12934961
> 
> 赞同：2
> 
> 时间：2012-10-17T13:02:16.453
> 
> 标签：c++, cassandra, thrift

```

    $ g++ -lthrift -Wall thriftfs.cpp cassandra_constants.cpp Cassandra.cpp cassandra_types.cpp -o thriftfs -I/usr/local/include/thrift -L/usr/local/lib

        在 /usr/local/include/thrift/protocol/TProtocol.h:23:0 包含的文件中，
                         来自 /usr/local/include/thrift/TProcessor.h:24，
                         来自 Cassandra.h:10，
                         从 t`在此处输入代码`hriftfs.cpp:4：
        /usr/local/include/thrift/transport/TTransport.h:34:1: 错误：'uint32_t' 没有命名类型

        /usr/local/include/thrift/transport/TTransport.h:156:29：错误：ISO C++ 禁止声明没有类型的“buf”[-fpermissive]

        在 /usr/local/include/thrift/TProcessor.h:24:0 包含的文件中，
                         来自 Cassandra.h:10，
                         来自 thriftfs.cpp:4:
        /usr/local/include/thrift/protocol/TProtocol.h:184:1：错误：'uint32_t' 没有命名类型

        在 Cassandra.h:10:0 包含的文件中，
                         来自 thriftfs.cpp:4:
        /usr/local/include/thrift/TProcessor.h:72:57: 错误: 'uint32_t' 尚未声明

        在 cassandra_types.h:11:0 包含的文件中，
                         来自 Cassandra.h:11，
                         来自 thriftfs.cpp:4:
        /usr/local/include/thrift/TApplicationException.h:94:3：错误：'uint32_t' 没有命名类型

        在 Cassandra.h:11:0 包含的文件中，
                         来自 thriftfs.cpp:4:
        cassandra_types.h:85:16: 错误: 'uint8_t' 没有命名类型
        在 Cassandra.h:11:0 包含的文件中，
                         来自 thriftfs.cpp:4:
        cassandra_types.h:142:3：错误：“uint32_t”没有命名类型

        在 Cassandra.h:11:0 包含的文件中，
                         来自 thriftfs.cpp:4:
        cassandra_types.h:1478:16: 错误: 'uint8_t' 没有命名类型
        在 Cassandra.h:11:0 包含的文件中，
                         来自 thriftfs.cpp:4:
        cassandra_types.h:1812:3: 错误: 'uint32_t' 没有命名类型

        在 thriftfs.cpp:4:0 包含的文件中：
        Cassandra.h:217:3：错误：“uint32_t”没有命名类型

        Cassandra.h:4857:35：错误：'org::apache::thrift' 尚未声明
        Cassandra.h:4857:62：错误：在 '*' 标记之前应有 ',' 或 '...'
        Cassandra.h:4859:71：错误：无法声明指向“void”成员的指针
        Cassandra.h:4859:145：错误：模板参数 2 无效
        Cassandra.h:4859:145：错误：模板参数 4 无效
        Cassandra.h:4860:45：错误：'org::apache::thrift' 尚未声明
        Cassandra.h:4860:72: 错误：在 '*' 标记之前需要 ',' 或 '...'

        Cassandra.h:4935:42：错误：'thrift' 不是 'org::apache' 的成员
        Cassandra.h:4935:42：注意：建议的替代方案：
        /usr/local/include/thrift/Thrift.h:75:37: 注意：'apache::thrift'
        Cassandra.h:4935:42：错误：'thrift' 不是 'org::apache' 的成员
        Cassandra.h:4935:42：注意：建议的替代方案：
        /usr/local/include/thrift/Thrift.h:75:37: 注意：'apache::thrift'
        Cassandra.h:4935:77：错误：模板参数 1 无效
        Cassandra.h:4935:105：错误：'thrift' 不是 'org::apache' 的成员
        Cassandra.h:4935:105：注意：建议的替代方案：
        /usr/local/include/thrift/Thrift.h:75:37: 注意：'apache::thrift'
        Cassandra.h:4935:105：错误：'thrift' 不是 'org::apache' 的成员
        Cassandra.h:4935:105：注意：建议的替代方案：
        /usr/local/include/thrift/Thrift.h:75:37: 注意：'apache::thrift'
        Cassandra.h:4935:140：错误：模板参数 1 无效
        Cassandra.h：在构造函数 'org::apache::cassandra::CassandraProcessor::CassandraProcessor(boost::shared_ptr)' 中：
        Cassandra.h:4898:49: 错误: 分配只读位置 '"login"[((org::apache::cassandra::CassandraProcessor*)this)->org::apache::cassandra::CassandraProcessor: :processMap_]'
        Cassandra.h:4898:49：错误：无法转换 'void (org::apache::cassandra::CassandraProcessor::*)(int32_t, int) {aka void (org::apach

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:18:54.823

添加以下定义：

```
g++ -DHAVE_NETINET_IN_H -DHAVE_INTTYPES_H ... 
```

或者`#include <stdint.h>`在包含`Thrift.h`在您的代码中之前添加。

[请参阅THRIFT-1326](https://issues.apache.org/jira/browse/THRIFT-1326)的讨论。据说该问题已在 thrift 0.9 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:23:38.743

看起来您的问题是编译器问题。

它找不到类型“uint32_t”

关于这个还有另一个问题：

['uint32_t' 标识符未找到错误](https://stackoverflow.com/questions/5162784/uint32-t-identifier-not-found-error)

引用自用户**templatetypedef**

> 此类型在 C 标头中定义，该标头当前不是 C++ 标准的一部分。根据标题上的 Wikipedia 页面，它直到 VS2010 才随 Visual Studio 一起提供。
> 
> 同时，您可能会通过添加将 Microsoft 的自定义整数类型映射到 C 期望的类型的 typedef 来伪造您自己的标头版本。例如：
> 
> typedef __int32 int32_t; typedef 无符号 __int32 uint32_t; /* ... 等等 ... */ 希望这会有所帮助！

# java - Android：当微调器没有答案时，代码会崩溃

> ID：12934963
> 
> 赞同：0
> 
> 时间：2012-10-17T13:02:22.190
> 
> 标签：java, android, android-spinner, android-sqlite

我有3个旋转器，他们在选择旋转器一个时，他们正在做古老的乐趣它更新了旋转器两种等。

我有一个例程，当微调器更改时，它会运行它以使用微调器中的值更新编辑文本字段。

但是，当页面加载时它会翻倒（我假设微调器 3 中什么都没有？）

```
public void updateLocalDesc(){

   AssetType = spnAssetType.getSelectedItem().toString();     
       AssetGroup = spnAssetGroup.getSelectedItem().toString();

       if(!spnAssetSubGroup.getSelectedItem().toString().equals("")){
           AssetSubGroup = spnAssetSubGroup.getSelectedItem().toString();
           tbLongDescription.setText(AssetType + " - " + AssetGroup + " - " + AssetSubGroup);
       } else
       {
           tbLongDescription.setText(AssetType + " - " + AssetGroup);
       }

} 
```

正如你所看到的，我正在努力保护它。我的错误是： http: [//pastebin.com/y6x5iPNW](http://pastebin.com/y6x5iPNW)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:07:12.803

空指针在哪一行？我想它在

```
if(!spnAssetSubGroup.getSelectedItem().toString().equals("")) 
```

`spnAssetSubGroup.getselectedItem()`在调用它之前，您应该对其进行空检查`toString()`。就像是：

```
if(spnAssetSubGroup.getSelectedItem() != null && !spnAssetSubGroup.getSelectedItem().toString().equals("")) 
```

该错误也可能在

```
AssetType = spnAssetType.getSelectedItem().toString();     
AssetGroup = spnAssetGroup.getSelectedItem().toString(); 
```

`getSelectedItem()`当没有选择任何项目时返回 null，因此您需要确保 null 检查某些微调器是否最初不会选择任何内容。

# php - 指向个人资料页面的可过期链接

> ID：12934964
> 
> 赞同：0
> 
> 时间：2012-10-17T13:02:31.007
> 
> 标签：php, hyperlink, temporary

我正在使用 mysql 为一个导师机构开发一个核心 php 项目，在该项目中，我向具有与他们所需条件相匹配的导师个人资料页面链接的人发送邮件。我希望这些链接成为临时链接，并希望它们在 72 小时内到期，我不知道该怎么做。有任何想法吗？最初的链接是这样的

```
"http://mysite.com/mysubdirectory/index.php?action=view_credentials&tutorid=".$tutor_id; 
```

感谢帮助。

对于寻求与我相同答案的任何人，我都关注了 shadyyx 并付出了一些努力，我完成了！谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:06:53.387

发送链接时使用表存储TIMESTAMP，如果在TIMESTAMP+<72小时>之后访问链接，则重定向到错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:08:45.180

我想到的一些解决方案：

为这些链接创建一个数据库表，您将在其中保存链接、唯一标识符（一些哈希）、创建日期和过期日期。

然后创建一个页面（脚本）来获取该链接（不包含完整的 URL，而是该脚本的 URL 和存储在数据库中的链接的唯一标识符）。此脚本将尝试搜索由唯一哈希标识的链接，同时将当前日期和时间调整为链接到期日期。

如果找到链接并且未过期，则您会将用户重定向到该页面，否则您将收到一条消息，指出链接已过期或未找到。

应该很容易实现。

希望这个想法对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:06:41.907

在您发送之前，您`tutor_id`应将其存储在数据库中。这将有助于发送唯一的 ID（以防万一：），并检查所使用的 ID 是否有效。因此，当任何人进入链接时，您`index.php`应该检查所有参数是否有效，再次查询 DB 的值`$_GET['tutorid']`并查看它是否未过期。您会知道这一点，因为您的数据库记录应`TIMESTAMP`与创建日期保持一致。有了创建日期，您可以检查它的年龄并接受或拒绝`tutor_id`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-31T19:09:27.667

受保护的链接是来自 codecanyon 的 PHP 脚本，它会在固定时间后过期链接等等。

它可用于在 72 小时或任意小时数内使教程链接或任何其他链接失效，按 IP 地址，适用于单个用户或多个用户。php 编码器可以通过一些努力将其集成到他们的应用程序中。

[http://codecanyon.net/item/protected-links-expiring-download-links/2556861](http://codecanyon.net/item/protected-links-expiring-download-links/2556861)

# java - 通过 Flyway 的 ODBC 连接

> ID：12934967
> 
> 赞同：3
> 
> 时间：2012-10-17T13:02:42.097
> 
> 标签：java, maven-plugin, flyway

我正在尝试使用 maven/flyway 通过 ODBC 进行数据库版本控制。

我使用 sql server localdb 作为数据库。但是当我运行 mvn flyway:status 时没有提供用户名/密码时，我收到以下错误：

> Flyway 错误：com.googlecode.flyway.core.exception.FlywayException：缺少数据库用户名。它没有被指定为属性，也没有在 settings.xml 中为 ID 为“flyway-db”的服务器定义

当我给出空的用户名/密码时，它显示：

> Flyway 错误：com.googlecode.flyway.core.exception.FlywayException：缺少数据库用户名。它没有被指定为属性，也没有在 settings.xml 中为 id 为“flyway-db”的服务器定义 -> [帮助 1]

我的数据库没有用户名/密码。以下是我正在使用的配置标签（如果用户名/密码为空）：

```
 <configuration>
            <driver>sun.jdbc.odbc.JdbcOdbcDriver</driver>
            <url>jdbc:odbc:localdbtest</url>
            <user></user>
            <password></password>
        </configuration> 
```

我相信对于空的用户名/密码，还有其他事情需要做。没有把握。非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:43:05.273

我相信您的情况类似于[Issue 341](http://code.google.com/p/flyway/issues/detail?id=341)。我会在下一个版本中研究这个。

**更新：**这应该现在在 Flyway 2.0 中修复

# jquery - 如何通过 ActionLink 提交表单

> ID：12934968
> 
> 赞同：0
> 
> 时间：2012-10-17T13:02:40.960
> 
> 标签：jquery, asp.net-mvc, post, actionlink

我需要 ASP MVC 方面的帮助。我有：

```
<% using (Html.BeginForm(null,null,FormMethod.Post)) {%>
    <p>
         <input type="submit" value="Choose" />
          .
          .
          .
          <%=Html.ActionLink("Save", "Index")%>
    </p>
<% } %> 
```

而且我需要通过该 ActionLink 提交表单，因为我需要从下拉列表中获取 selectedValue 并且我不知道如何从 FormCollection 或具有属性 POST 的方法中的参数中执行此操作。

所以我需要在点击操作链接后调用这个函数。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Index(FormCollection formValues)
    {
    } 
```

我用 jquery 尝试了一些东西，`Ajax.ActionLink`但一切都称为 Index 的 GET 方法。（`new { onclick = "$(this).parents('form').first().submit();"`- 对我不起作用 - 它也称为 GET 方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:35:12.680

您需要调用表单的提交，然后返回 false。Javascript：

```
$(function() {
    $('find-your-link').click(function(e) {
        e.preventDefault();
        $(this).parents('form').first().submit();
    });
}); 
```

那应该提交表单而不会将您发送到 GET URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:29:43.650

试试这个：

HTML/C#:

```
<% 
using (Html.BeginForm(null,null,FormMethod.Post, new { id = "myform" })) 
{%>
    <p>
         <input type="submit" value="Choose" />
         .
         .
         .
         <%=Html.ActionLink("Save", "Index", null, new { id="action-save" })%>
    </p>
<% } %> 
```

JS：

```
$(function() {

   $('#action-save').bind('click', function(event) {
       $('#myform').submit();     
       return false;
   });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:17:24.347

默认情况下，actionlink 始终是 GET。你不能把它变成开箱即用的 POST。

`FormCollection`关于您的设置，当您使用常规提交按钮时，下拉列表中的值应该在您的范围内。

另一种方法是使方法参数与表单值匹配。例如，如果您有一个名为“foo”的下拉列表，您可以有一个方法`Index(string foo)`，如果它具有相同的名称，MVC 会将下拉列表值映射到该参数。请注意，formvalues 的类型应该能够解析为参数的类型。在您的情况下，如果您的下拉列表的值类型是`int, your method-parameter should be of type`int 类型。（您不能期望将值的表单数组解析为字符串类型参数）。

此外，我建议您将方法归因于`[HttpPost]`，然后更具可读性`[AcceptVerbs(HttpVerbs.Post)]`

如果您确实想使用 ActionLink，则必须开始学习您的 javascript 技能以最终提交表单值。

提示：如果你在你的 POST 方法的第一行设置了一个断点，并且你执行了一个监视，`this`你可以通过几个基类来获取提交的值，然后找到`ValueProviders`.

# jquery - Chrome 中的 jQuery show() 按钮

> ID：12934969
> 
> 赞同：0
> 
> 时间：2012-10-17T13:02:45.437
> 
> 标签：jquery, google-chrome, show-hide

我有一个按钮，我用 jQuery 隐藏/显示，这取决于是否选中了复选框。这适用于除 Chrome 之外的所有浏览器。按钮获取`display: block;`样式，但不出现。如果我在它上面移动鼠标，我可以看到这个按钮变成了`0px` `height`and `width`。我试过给按钮一个固定的大小，但它没有帮助（如果我`display: block;`默认给一个也没有）。有任何想法吗？

我需要使用 .checbox `div`，因为我使用的是[花哨的 checkbox](http://blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/)。`input`是`hidden`。_

CSS：

```
button {
    background-color: #A01823;
    border: 1px solid #710F12;
    color: #FFFFFF;
    float: right;
    font-size: 15px;
    margin: 2px 0 0;
    padding: 3px 10px 5px;
    text-align: center;
} 
```

JS：

```
$(document).on("click",".enter_chat .checkbox",function() {
    enter_chat();
});

$(document).ready(function() {
    enter_chat(true);
});

function enter_chat(init) {
    init = typeof a !== 'undefined' ? init : false;
    if ($("#enter_chat").is(':checked')) {
        $("#btn_enter_chat").hide();
        $("#messaging_view_send_message").keyup(function(event) {
            if(event.keyCode == 13) {
                $("#btn_enter_chat").click();
            }
        });
    } else {
        $("#btn_enter_chat").show();
        $("#messaging_view_send_message").unbind();
    }
} 
```

HTML：

```
<div class="enter_chat">
   <div class="checkbox" style="background-position: 0px 0px;">
      <input id="enter_chat" type="checkbox" checked="checked" name="enter_chat" value="1">
      <label>Submit by pressing enter</label>
   </div>
</div>
<button type="submit" name="messaging_view[submit]" class="btn_comment" id="btn_enter_chat">Send message</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:49:01.387

我在 html 中使用了以下代码以及您的所有其他脚本，它在所有浏览器中都可以正常工作，也可以在 chrome 中使用

```
<pre>
    <input type="checkbox" class="enter_chat" id="enter_chat" checked="checked"/>
    <button type="submit" name="messaging_view[submit]" class="btn_comment" id="btn_enter_chat"> Send message </button> 
```

我建议您右键单击 chrome 浏览器并单击**检查元素**，然后查看控制台是否有任何错误...对于 firefox，请始终使用**firebug**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:17:00.863

您需要将 document.ready 代码更改为此...

```
$(document).on("click","#enter_chat",function() {
    enter_chat();
}); 
```

请参阅此工作示例...

[http://jsfiddle.net/ESfTv/](http://jsfiddle.net/ESfTv/)

# objective-c - 进入委托方法时如何隐藏uialertview？

> ID：12934970
> 
> 赞同：0
> 
> 时间：2012-10-17T13:02:50.333
> 
> 标签：objective-c, ios, xcode, ios5, ios6

嗨，伙计们，我有一个名为的方法`manageui`，它会显示一段时间的等待视图，当超时时，它`UIAlertView`会显示一条消息以重试我的问题是我无法隐藏`UIAlertView`调用之前的`manageui`调用

**这是我的代码：**

```
 -(void)mangeui
{
    double Currenttime=0;
    double ptime=Currenttime+5000;
     NSLog(@"fire /n");

    do 
    {
        //add condition for found session
        if (Currenttime<ptime)
        {
            NSLog(@"inside if");
            [spinner setHidden:NO];
            [alert setHidden:YES];
        }
        else
        {

            alert = [[UIAlertView alloc] initWithTitle:@"Oops:(" 
                                                            message:@"No device found \n Make sure bluetooth is activated and the devices are within range." 
                                                           delegate:self 
                                                  cancelButtonTitle:@"Tap to retry"
                                                  otherButtonTitles:nil];

         [spinner setHidden:YES];
            [alert show];

        }

        Currenttime+=1;
    } while (Currenttime < ptime+1 &&[_matchmakingClient availableServerCount]==0);
} 
```

**alertview 的代表是：**

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex

{
    [alertView dismissWithClickedButtonIndex:1 animated:true];
    [spinner setHidden:NO];

    alertView.hidden=YES;
    [self mangeui];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:57:08.610

尝试这个：

`[alertView dismissWithClickedButtonIndex:0 animated:YES];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:25:10.260

好吧，我认为您不了解代表的概念

在[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)中它说`alertView:clickedButtonAtIndex:`

> 调用此方法后，接收器会自动关闭。

是的，不需要单独声明来关闭警报视图。只要按下按钮`alertview`并`alertview`消失，就会调用该方法

# cakephp - CakePHP 保存表单数据，然后通过另一个控制器方法将其传递给视图

> ID：12934975
> 
> 赞同：3
> 
> 时间：2012-10-17T13:03:04.733
> 
> 标签：cakephp

我有一个游戏模型、视图和控制器，以及一个创建新游戏记录的新游戏动作。这很好用。

然后，我想在会话中或作为传入数组（但作为 URL 参数不可见）使该表单数据可用于 main_game_view.ctp。我不介意它是在会话中完成还是传入，以效率更高者为准。

我尝试了各种不同的设置这个、写那个、传递另一个的组合，但到目前为止没有任何效果。这是我最近失败后的代码。GamesController 新游戏动作：

```
public function newgame() {
    if ($this->request->is('post')) {
        $this->Game->create();
        $this->Session->write('Game',$this->request->data);
        if ($this->Game->save($this->request->data)) {
            // Put the id of the game we just created into the session, into the id field of the Game array.

            $this->Session->write('Game.id',$this->Game->getLastInsertID());
            $this->redirect(array('action' => 'main_game_view'));
        } else {
          $this->Session->setFlash('There was a problem creating the game.');
        }
    }
} 
```

将游戏 ID 写入会话非常有效，当我 read() 时，我可以在 main_game_view 中看到它。但是无论我将请求数据的会话写入放在哪里，我都无法在 main_game_view 中找到它。

同样，如果我尝试将任何内容传递到重定向中，我无法在 main_game_view 操作*或*main_game_view 视图本身中找到它。

目前我的 main_game_view 操作只是一个空函数，但在尝试通过重定向传递数据后我找不到任何东西。

这是 main_game_view.ctp：

```
<?php debug($this->viewVars); ?>

<p><?php echo 'Game id: ' . $this->Session->read('Game.id') ?></p>
<p><?php echo 'Game name: ' . $this->Session->read('Game.game_name') ?></p> 
```

Game.id 很好，但 Game.game_name 中没有任何内容（这是模型中的有效字段名称。我所有传递变量的尝试也都失败了，调试行只显示：array()。

这看起来很简单，遵循 CakePHP 博客教程并对其进行调整以创建/编辑/删除游戏实例，但显然有些东西还没有完全融入......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:15:38.987

`Game.game_new`仅仅通过编写你没有会话密钥：`$this->Session->write('Game',$this->request->data);`显然你必须在 main_game_view 中做这样的事情：

```
<?php $game = $this->Session->read('Game'); ?>
<p><?php echo 'Game id: ' . $this->Session->read('Game.id') ?></p>
<p><?php echo 'Game name: ' . $game['Game']['game_name']; ?></p> 
```

# c++ - 动态填充 QML 菜单

> ID：12934982
> 
> 赞同：1
> 
> 时间：2012-10-17T13:03:44.677
> 
> 标签：c++, list, menu, qml

我正在开发一个运行 HP webOS 应用程序的环境。我需要阅读 Mojo.Menu 并使用从 javascript 代码中获取的数据填充 QML 菜单。

例如从

```
 Mojo.Menu.prefsItem,
            {
                { label: $L("High Scores")
            }, 
```

我会创建 QML 对象

```
MenuItem {
    text: "High scores"
    onClicked: //some stuff
} 
```

该列表（ QStringList 或 QList ）将由 Q_INVOKABLE 函数提供。

这是否可以动态创建这样的 MenuItem 并将它们推送到 MenuLayout？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:15:42.557

您可以使用

```
Qt.createQmlObject() 
```

动态创建对象，然后您可以将它们的属性更改为列表中的属性。有关动态对象创建的更多详细信息，请参阅[本文](http://qt-project.org/doc/qt-4.8/qdeclarativedynamicobjects.html)。

要将这些动态创建的项目添加到布局中，请先创建布局：

```
MenuLayout {
  id: customLayout
} 
```

然后添加动态创建的 MenuItem

```
var menuComponent = Qt.createComponent("MenuItem.qml");
if(menuComponent.status == Component.Ready) {
  var createdMenu = menuComponent.createObject(customLayout);
  createdMenu.text = "Text from your QList";
} 
```

# sql - SQL Server 中 FREETEXTTABLE 中的术语顺序

> ID：12934983
> 
> 赞同：0
> 
> 时间：2012-10-17T13:03:46.140
> 
> 标签：sql, sql-server, sql-server-2008, freetexttable

从文档来看，SQL Server 的 FREETEXTTABLE 似乎应该将包含多个单词的搜索查询视为词袋。

如果我运行：

```
SELECT *
FROM FREETEXTTABLE(tblThings, *, 'Cartridge Black') 
```

我得到的结果是“墨盒”这个词紧跟“黑色”这个词，例如：

```
EPSON STYLUS INKJET CARTRIDGE BLACK
INKJET CARTRIDGE BLACK 40ML 
```

没有结果有单词在其他顺序。

相反，如果我跑

```
SELECT *
FROM FREETEXTTABLE(tblThings, *, 'Black Cartridge') 
```

我得到一组不同的结果：

```
AD1020BK BLACK CARTRIDGE
GD230X BLACK CARTRIDGE 
```

在这两组结果中，我都找不到“黑色墨盒”。

有没有办法让 SQL Server 忽略单词的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:10:35.663

使用自由文本或 conatins

```
SELECT *
FROM FREETEXT(tblThings, *, 'Cartridge Black') 
```

# oracle - Oracle - 为什么我应该使用包而不是独立的过程或函数

> ID：12934984
> 
> 赞同：12
> 
> 时间：2012-10-17T13:03:51.143
> 
> 标签：oracle, database-design, plsql

我搜索了谷歌，但没有找到任何令人满意的答案来解释为什么我应该使用包。

我知道一个包是一堆过程、函数和不同的变量。据我了解，它有点对应于 OOP 中的对象。但是，当然没有什么比实例化一个包的不同实例更能让每个实例具有不同的属性值并表现不同的事情了。

那么当我可以创建一个独立的过程并独立调用它时，使用包有什么好处呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-17T13:13:54.530

包提供以下优点：

1.  凝聚力：与特定子系统相关的所有程序和功能都在一个程序单元中。这只是很好的设计实践，但也更易于管理，例如在源代码控制中。
2.  常量、子类型和其他有用的东西：PL/SQL 不仅仅是存储过程。我们可以在包规范中定义的任何内容都可以与其他程序共享，例如用户定义的异常。
3.  重载：定义具有相同名称但不同签名的过程或函数的能力。
4.  安全性：在包体中定义私有过程，因为它们没有在规范中公开，所以只能由包使用。
5.  共享公共代码：私有过程的另一个好处。
6.  我们只需要在一个包上而不是在几个过程上授予 EXECUTE 权限。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T13:11:51.190

如[Oracle docs](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/packages.htm#i2408)中所述，软件包之所以好，是因为：

*   模块化
*   更简单的应用程序设计
*   信息隐藏
*   附加功能
*   更好的性能

文档中解释了每个原因的详细信息。

# ios - UIImagePickerController takePicture 无法显示快门动画

> ID：12934985
> 
> 赞同：1
> 
> 时间：2012-10-17T13:03:55.857
> 
> 标签：ios

我正在使用标准 UIImagePickerController 和我自己的 overlayView 并使用该`takePicture`方法拍照。问题是快门动画没有发生。需要手动触发吗？这是在 iOS 6 上。

# android - DeadObjectException 尝试使用 Context.sendOrderedBroadcast 时

> ID：12934990
> 
> 赞同：1
> 
> 时间：2012-10-17T13:04:15.277
> 
> 标签：android, broadcastreceiver

我正在使用[Context.sendOrderedBroadcast](http://developer.android.com/reference/android/content/Context.html#sendOrderedBroadcast%28android.content.Intent,%20java.lang.String,%20android.content.BroadcastReceiver,%20android.os.Handler,%20int,%20java.lang.String,%20android.os.Bundle%29)方法发送广播并在到达 resultReceiver 之前检查是否有人收到它。

这是一个代码片段：

```
context.sendOrderedBroadcast(intent, null, new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) { 
  // Do something if this broadcast was not handled by others.
}, null, Activity.RESULT_OK, null, null); 
```

这通常可以正常工作，但有时我会收到以下错误并且我的 BroadcastReceiver 没有被调用：

> W/ActivityManager(12067): 发送 Intent { act=... } 的广播结果失败 W/ActivityManager(12067): android.os.DeadObjectException W/ActivityManager(12067): 在 android.os.BinderProxy.transact(Native Method ) W/ActivityManager(12067)：在 android.content.IIntentReceiver$Stub$Proxy.performReceive(IIntentReceiver.java:121) W/ActivityManager(12067)：在 com.android.server.am.ActivityManagerService.performReceive(ActivityManagerService.java :12912) W/ActivityManager(12067)：在 com.android.server.am.ActivityManagerService.processNextBroadcast(ActivityManagerService.java:13133)W/ActivityManager(12067)：在 com.android.server.am.ActivityManagerService.finishReceiver(ActivityManagerService .java:12766) W/ActivityManager(12067): 在 android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:287) W/ActivityManager(12067): 在 com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1755) W/ActivityManager(12067): 在 android.os.Binder.execTransact(Binder.java:301) W/ActivityManager(12067)：在 dalvik.system.NativeStart.run(Native Method)

到目前为止，我只在 Android 2.1 版的摩托罗拉 Defy 手机上遇到过这种情况，但它也可能发生在其他人身上。

我在互联网上找不到任何参考，有谁知道为什么会发生这种情况？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:27:25.020

如果调用的组件`sendOrderedBroadcast()`在广播绕回提供的`BroadcastReceiver`匿名子类实例之前被销毁，我可以看到这种情况发生。

# javascript - 检测对 HTML5 的支持属性

> ID：12934991
> 
> 赞同：5
> 
> 时间：2012-10-17T13:04:17.120
> 
> 标签：javascript, html

如何检查浏览器是否支持元素的 HTML5`form`属性`input`？

在[这个问题](https://stackoverflow.com/questions/11178296/how-to-check-browser-support-for-html5-form-attributes)之后，我尝试了以下方法：

```
var supportForm = function()
{
  var input = document.createElement("input");
  if ("form" in input)
  {
    input.setAttribute("form", "12345");

    if (input.form == "12345")
      return true;
  }

  return false;
} 
```

...但这给 FireFox 带来了假阴性（至少 14 个）。替换`input.form`为`input.getAttribute("form")`IE 9 会产生误报。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T14:58:25.803

对于输入元素，在 HTML5 表单引用功能之前有对父表单的引用，这会导致您提到的这个问题。

我希望有一种更优雅的方法来检查它是否受支持，但现在您可以使用以下方法（但它涉及与 DOM 的处理）：

```
function testInputFormSupport() {
    var input = document.createElement('input'),
         form = document.createElement('form'),
         formId = 'test-input-form-reference-support';
    // Id of the remote form
    form.id = formId;
    // Add form and input to DOM
    document.childNodes[0].appendChild(form);
    document.childNodes[0].appendChild(input);
    // Add reference of form to input
    input.setAttribute('form', formId);
    // Check if reference exists
    var res = !(input.form == null);
    // Remove elements
    document.childNodes[0].removeChild(form);
    document.childNodes[0].removeChild(input);
    return res;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:34:19.910

我不认为这很容易。

根据[http://dev.w3.org/html5/spec/association-of-controls-and-forms.html#attr-fae-form的规范](http://dev.w3.org/html5/spec/association-of-controls-and-forms.html#attr-fae-form)

1.  表单所有者必须存在才能设置为元素。
2.  该元素必须在文档中才能更改其表单所有者

# javascript - chrome和firefox之间重音字符的Mailto链接行为不同

> ID：12934995
> 
> 赞同：0
> 
> 时间：2012-10-17T13:04:39.667
> 
> 标签：javascript, email, firefox, google-chrome, mailto

我有一个 Web 应用程序，允许用户通过弹出电子邮件来邀请其他人。问题是对于法语用户，这封电子邮件包含重音字符，并且电子邮件无法在 Firefox 中打开，并出现以下错误：

错误：组件返回失败代码：0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIDOMLocation.href]

我已经将其归结为如何对重音进行编码，并且可以使用以下代码轻松重现它：

```
document.location.href = 'mailto:?body=' + escape("à"); 
```

在 Firefox 中已损坏，但在 Chrome 和 IE 中有效。

```
document.location.href = 'mailto:?body=' + encodeURIComponent("à"); 
```

在 Firefox 中工作，但在使用 Chrome 和 IE 时在电子邮件正文中产生错误的字符（“Ã”）

因此，我的问题是 - 我应该如何在 mailto 链接中编码特殊字符，以便它们可以跨浏览器工作？

谢谢！

# python - 如何在 Python 中检测小写字母？

> ID：12934997
> 
> 赞同：44
> 
> 时间：2012-10-17T13:04:46.370
> 
> 标签：python, string, lowercase, letter

我需要知道是否有一个函数可以检测字符串中的小写字母。假设我开始编写这个程序：

```
s = input('Type a word') 
```

是否有一个函数可以让我检测字符串 s 中的小写字母？可能最终将这些字母分配给不同的变量，或者只打印小写字母或小写字母的数量。

虽然这些是我想做的，但我最感兴趣的是如何检测小写字母的存在。最简单的方法将受到欢迎。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-17T13:07:12.047

要检查字符是否为小写，请`islower`使用`str`. 这个简单的命令式程序打印字符串中的所有小写字母：

```
for c in s:
    if c.islower():
         print c 
```

请注意，在 Python 3 中，您应该使用`print(c)`而不是`print c`.

* * *

> 可能最终将这些字母分配给不同的变量。

为此，我建议使用列表推导，尽管您可能还没有在课程中涉及到这一点：

```
>>> s = 'abCd'
>>> lowercase_letters = [c for c in s if c.islower()]
>>> print lowercase_letters
['a', 'b', 'd'] 
```

或者要获取可以`''.join`与生成器一起使用的字符串：

```
>>> lowercase_letters = ''.join(c for c in s if c.islower())
>>> print lowercase_letters
'abd' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-17T13:10:41.643

有两种不同的方法可以查找小写字符：

1.  用于[`str.islower()`](http://docs.python.org/library/stdtypes.html#str.islower)查找小写字符。结合列表推导，您可以收集所有小写字母：

    ```
    lowercase = [c for c in s if c.islower()] 
    ```

2.  您可以使用正则表达式：

    ```
    import re

    lc = re.compile('[a-z]+')
    lowercase = lc.findall(s) 
    ```

第一种方法返回单个字符列表，第二种方法返回字符*组*列表：

```
>>> import re
>>> lc = re.compile('[a-z]+')
>>> lc.findall('AbcDeif')
['bc', 'eif'] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-04T20:32:07.810

有很多方法，这里有一些：

1.  使用预定义的`str`方法`islower()`：

    ```
    >>> c = 'a'
    >>> c.islower()
    True 
    ```

2.  使用`ord()`函数检查字母的ASCII码是否在小写字符的ASCII码范围内：

    ```
    >>> c = 'a'
    >>> ord(c) in range(97, 123)
    True 
    ```

3.  检查字母是否等于它的小写形式：

    ```
    >>> c = 'a'
    >>> c.lower() == c
    True 
    ```

4.  检查字母是否在模块列表`ascii_lowercase`中`string`：

    ```
    >>> from string import ascii_lowercase
    >>> c = 'a'
    >>> c in ascii_lowercase
    True 
    ```

但这可能还不是全部，如果您不喜欢这些方法，您可以找到自己的方法：D.

最后，让我们开始检测：

```
d = str(input('enter a string : '))
lowers = [c for c in d if c.islower()]

# here i used islower() because it's the shortest and most-reliable
# one (being a predefined function), using this list comprehension
# is (probably) the most efficient way of doing this 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T13:13:02.833

您应该使用`raw_input`字符串输入。然后使用对象`islower`的方法`str`。

```
s = raw_input('Type a word')
l = []
for c in s.strip():
    if c.islower():
        print c
        l.append(c)
print 'Total number of lowercase letters: %d'%(len(l) + 1) 
```

做就是了 -

```
dir(s) 
```

你会发现`islower`和其他属性`str`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T13:10:29.707

```
import re
s = raw_input('Type a word: ')
slower=''.join(re.findall(r'[a-z]',s))
supper=''.join(re.findall(r'[A-Z]',s))
print slower, supper 
```

印刷：

```
Type a word: A Title of a Book
itleofaook ATB 
```

或者您可以使用列表理解/生成器表达式：

```
slower=''.join(c for c in s if c.islower())
supper=''.join(c for c in s if c.isupper())
print slower, supper 
```

印刷：

```
Type a word: A Title of a Book
itleofaook ATB 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-14T12:47:02.917

如果您不想使用这些库并想要简单的答案，那么代码如下：

```
 def swap_alpha(test_string):
      new_string = ""
      for i in test_string:
          if i.upper() in test_string:
              new_string += i.lower()

          elif i.lower():
                new_string += i.upper()

          else:
              return "invalid "

      return new_string

user_string = input("enter the string:")
updated = swap_alpha(user_string)
print(updated) 
```

# c# - 作为系统执行任务？

> ID：12934999
> 
> 赞同：1
> 
> 时间：2012-10-17T13:04:53.157
> 
> 标签：c#, security, windows-services, localsystem

我正在尝试测试一些将作为服务在远程机器上运行的代码（该服务将作为本地系统运行）。

我试图找出在系统上下文下运行时测试代码的最简单方法。

让代码在本地系统帐户下运行的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:08:11.720

您可以创建计划任务并设置运行它的用户帐户。

通过控制面板\管理工具\任务计划程序执行此操作

然后做创建任务

在那里，您可以指定要运行的用户，例如 SYSTEM