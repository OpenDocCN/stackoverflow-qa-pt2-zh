# StackOverflow 问答 12707000-12707999

# objective-c - 如何检查小数的格式？

> ID：12707003
> 
> 赞同：0
> 
> 时间：2012-10-03T10:54:27.050
> 
> 标签：objective-c, xcode, nsnumberformatter, digits

例如：用户将 1234,56 放入 TextField。

我设置了这个 NSNumberFormatter：

```
[numberFormatter setNumberStyle:NSNumberFormatterNoStyle];
[numberFormatter setMaximumIntegerDigits:5];
[numberFormatter setMaximumFractionDigits:1]; 
```

如您所见，我只想允许最大值。一位小数。如何将我的字符串与我的 numberFormatter 规则进行比较，以便我可以打开警报，提示用户输入不正确？

谢谢迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:32:58.843

使用 numberFormatter 检查您输入的号码，如下所示：

```
 NSNumber * myNumber = [numberFormatter numberFromString:yourTextField.text];
 if(myNumber)
    //valid entered number
 else
    //invalid entered number 
```

您应该为此使用 UITextField 的委托方法：

```
- (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range  replacementString:(NSString *)string
{
  NSNumberFormatter *numberFormatter = [NSNumberFormatter alloc]init]
  [numberFormatter setNumberStyle:NSNumberFormatterNoStyle];
  [numberFormatter setMaximumIntegerDigits:5];
  [numberFormatter setMaximumFractionDigits:1];
  NSNumber * myNumber = [numberFormatter numberFromString:string];
  [numberFormatter release];
  if(myNumber)
    return YES;
  else
   return NO;
} 
```

# visual-studio-2010 - 为什么 vs2012 不支持 XNA？

> ID：12707004
> 
> 赞同：4
> 
> 时间：2012-10-03T10:54:29.670
> 
> 标签：visual-studio-2010, xna, visual-studio-2012, monogame

> **可能重复：**
> [如何在 Visual Studio 2012 上安装 XNA 游戏工作室？](https://stackoverflow.com/questions/10881005/how-to-install-xna-game-studio-on-visual-studio-2012)

我想在 xna 中制作一个游戏应用程序。但是买了vs2012之后（差不多800块钱买的！！）xna游戏工作室环境就不能用了！这对 MS 来说太疯狂了。它们是同一家公司的两种产品不是吗？有谁知道vs2012什么时候支持monogame的xna？

我已经尝试了几个选项并已经搜索了互联网，但我无法在 vs2012 中启动项目。在其中花费大量（浪费）时间。也许你可以帮我解决这个问题。

不，我没有 vs2010 什么的。对于我个人而言，这已经足够昂贵了。所以你说的地方没有答案；“你需要先安装vs2010...”

来自微软公司的荒谬。否则，我必须切换到替代方案。有谁知道用 xna of monogame 开发游戏的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:06:03.020

安装免费的[Visual C# 2010 Express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)，然后安装 XNA。您不需要完整（付费）Visual Studio 提供的任何功能。

当然，请留意新的 XNA 版本。我想我记得当 Visual Studio 2010 发布时，下一个版本的 XNA 需要一段时间才能发布并与 2010 兼容——但我可能是错的。

# jquery - jQuery：自动建议从 XML 解析的结果并自定义这些解析结果

> ID：12707009
> 
> 赞同：0
> 
> 时间：2012-10-03T10:54:39.187
> 
> 标签：jquery, xml, autocomplete

我正在从 XML 文件中检索一些结果，并且在自动建议中我正在尝试添加一些 html 代码：

```
London, <br/>
United Kingdom 
```

我的代码是这样的：

```
$.ajax({
                url: "veh.xml",
                dataType: "xml",
                success: function( xmlResponse ) {
                    var data = $( "geoname", xmlResponse ).map(function() {
                        return {
                            value: $( "reg", this ).text() 
                                   + '<br/>'
                                   + $( "model", this ).text()
                        };
                    }).get();
                    $( "#mainsearch" ).autocomplete({
                        source: data,
                        minLength: 0,
                        select: function( event, ui ) {
                            log( ui.item ?
                                "Selected: " + ui.item.value + ", geonameId: " + ui.item.id :
                                "Nothing selected, input was " + this.value );
                        }
                    });
                }
            }); 
```

我得到了这个结果：

```
London,<br/>United Kingdom 
```

我正在尝试创建列表效果。

我的 xml 看起来像这样：

```
<geoname>
    <model>London</model>
    <reg>United Kingdom</reg>
    </geoname>

<geoname>
    <model>Paris</model>
    <reg>France</reg>
    </geoname> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:28:32.030

你得到这个结果：

```
London,<br/>United Kingdom 
```

因为自动完成使用的默认渲染是一个`li`元素，并且数据只是作为文本而不是 html 输入的。

因此，要更改渲染，您必须覆盖默认渲染项并在您的项目中添加数据。

```
$.ajax({
    url: "veh.xml",
    dataType: "xml",
    success: function( xmlResponse ) {

        var data = $( "geoname", xmlResponse ).map(function() {
            return {
                value: $( "reg", this ).text() + '-' + $( "model", this ).text(),
                reg: $( "reg", this ).text(),
                model: $( "model", this ).text()
            };}).get();

        $( "#mainsearch" ).autocomplete({
            source: data,
            minLength: 0,
        focus: function( event, ui ) {
            $( "#mainsearch" ).val( ui.item.label );
            return false;
        },
            select: function( event, ui ) {
                log( ui.item ?
                     "Selected: " + ui.item.value + ", geonameId: " + ui.item.id :
                     "Nothing selected, input was " + this.value );
            }
        }).data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li class='ui-menu-item' role='menuitem'></li>" )
                   .data( "item.autocomplete", item )
                   .append( "<a>" + item.reg + "<br />" + item.model +"</a>")
                   .appendTo( ul );
        };
    }
}); 
```

您有一个关于 jQuery-UI 自动完成演示的示例，带有“自定义数据和显示”：http: [//jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)
浏览演示的源代码，您会找到另一个示例。

希望我的回答可以帮助您解决部分问题。

# php - 交替字符集中可能组合数量的公式？

> ID：12707016
> 
> 赞同：0
> 
> 时间：2012-10-03T10:55:05.220
> 
> 标签：php, math, random, combinations

在此示例中查找可能组合数量的公式是什么：从 AZ 和 0-9 生成 4 个字符，但它们会交替出现。例如：L7W8、Q6N6、H3P1 等。

用 PHP 代码来说明：

```
$length = 4;

$pool_1 = explode(',', 'A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z');
$pool_2 = explode(',', '1,2,3,4,5,6,7,8,9,0');

$s = '';

for ($i = 0; $i < $length; $i++)
    $s.= ($i % 2) ? $pool_2[array_rand($pool_2)] : $pool_1[array_rand($pool_1)];        

echo $s; 
```

如果 $length 是 4，得到可能的组合数量的公式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:23:30.860

交替不影响选择的总数。

它只是 26*10*26*10。

如果不允许字母重复，则为 26*10*25*10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:31:35.693

答案是`26 * 10 * 26 * 10`为了`length = 4`

解释：

对于第一个位置，您有 26 个选择。第二，你有 10 个。可能的变化：26 * 10 第三个位置，你又有 26 个选择。所以你会得到可能的变化：（26 * 10）* 26

等等..

这是基本的[组合学](https://en.wikipedia.org/wiki/Combinatorics)。从 26 个中挑选 1 个在数学上表示为`26C1`等于`26/1 = 26`。

`NCR = (N.N-1.N-2 .. N-R-1)/(1.2.3 .. R)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:23:27.713

如果您正在寻找独特的组合，那么公式将是：

(26 * 25) / 2！* (10 * 9) / 2！= 14625

分析：

上面的公式假设您想要字母和数字的唯一组合。例如，B1A0 将是序列中的第一个值，Z9Y8 将是最后一个值。A0B1、A1B0 或 B0A1 都是重复的，没有反映在上面的公式中。如果这些也可以允许，则公式简化为：

26 * 25 * 10 * 9 = 58500

如果可以允许重复的字母和数字，例如 AA00，那么公式将是：

26 * 26 * 10 * 10 = 67600

我还建议将 $length 分解为两个单独的变量。一个变量用于字母，另一个变量用于数字。因此，例如，如果您正在寻找独特的组合，那么您的代码可能如下所示：

```
$NumLetters = 26;
$NumNumbers = 10;
$LettersLen = 2;
$NumbersLen = 2;

$NumCombos = $NumLetters * ($NumLetters-1) / gmp_fact($LettersLen) * $NumNumbers * ($Numbers-1) / gmp_fact($NumbersLen); 
```

如果您知道 $NumbersLen 或 $LettersLen 始终为 2，那么您可以消除对 gmp_fact 的调用并将其替换为数字 2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:09:11.373

对于最终字符串中的每个字符，您将可能插入的数量相乘。

```
Choice of A-Z = 26
Choice of 0-9 = 10

Combining A-Z and 0-9:  26 * 10 = 260
Combining A-Z and A-Z:  26 * 26 = 676
Combining 0-9, A-Z, 0-9: 10 * 26 * 10 = 2600 
```

# powershell - Powershell：开始处理输出和成绩单

> ID：12707018
> 
> 赞同：3
> 
> 时间：2012-10-03T10:55:39.020
> 
> 标签：powershell, cmd

代码示例：

```
$logfile = "log.txt"
$filename = "backup.rar"
Start-Transcript -Path $logfile -Append -Force
"Start..."
Start-Process -FilePath "C:\Program Files\WinRAR\Rar.exe" -ArgumentList ("a " + $filename + " @backup.lst") -NoNewWindow -Wait
"Done"
Stop-Transcript 
```

控制台中的输出：

```
...
Start...
Error: Do not find backup.lst
Done
... 
```

但是在日志文件中：

```
...
Start...
Done
... 
```

哪里输出rar.exe？

PS：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:42:59.177

这是一个[已知问题](https://connect.microsoft.com/PowerShell/feedback/details/315875/unable-to-capture-all-session-output-into-a-transcript)-`Start-Transcript`它不会捕获 exe 的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:55:47.017

我的第一个想法是 Start-Transaction 没有捕获错误（显然;））

您可能想查看使用 -RedirectStandardOutput 和 -RedirectStandardError 的启动过程参数

# php - 来自mysql插入查询的自动增量值

> ID：12707024
> 
> 赞同：0
> 
> 时间：2012-10-03T10:55:47.900
> 
> 标签：php, mysql

```
if(!class_exists('MySql'))
{ include('MySql.php'); }
  $sql=new MySql();
  $sql->connect();
  $sqlCommand="insert into `freecomputermarket`.`members`
 (`UserName`,`Password`,`Email`,`BirthDate`,`RegisterationDate`,`ActivationCode`,
 `ActivationLink`,`IsActive`,`Gender`)
 values('$this->_userName','$this->_password','$this->_email','$this->_birthDate',
 '$this->_registerationDate','$this->_activationCode','$this->_activationLink',
 '$this->_isActive','$this->_gender')";
  $sql->query($sqlCommand); 
```

我如何才能插入自动增量 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:58:01.600

你已经`MySql`很好地隐藏了你的类的实现细节。

*   如果您使用的是**PDO**，您将需要查看[LastInsertId()](http://www.php.net/manual/en/pdo.lastinsertid.php)
*   如果您使用的是**mysqli**，请查看[mysql_insert_id()](http://www.php.net/manual/en/mysqli.insert-id.php)；
*   如果您使用**mysql**：切换到 PDO 或 mysqli

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:58:43.453

```
$sql->query($sqlCommand);
$id = lastInsertId(); 
```

此处的文档：http: [//php.net/manual/en/pdo.lastinsertid.php](http://php.net/manual/en/pdo.lastinsertid.php)

# java - 使用应用程序更改 Android IP 地址

> ID：12707027
> 
> 赞同：0
> 
> 时间：2012-10-03T10:55:58.477
> 
> 标签：java, android, ip, runtime.exec

我正在尝试在我的应用程序中更改模拟器或设备的 IP 地址

这是代码：

```
try {
    Runtime.getRuntime().exec(new String[]{"su","-c","ifconfig eth0 xx.xx.xx.xx"});
} catch (IOException e) {
    e.printStackTrace();
} 
```

没有发现异常，但ip地址没有改变！有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:20:08.237

据我所知，Android 上的 ifconfig 功能非常有限，大多数人建议改用 netcfg。

# c++ - 序列范围展开，使用可变参数模板

> ID：12707030
> 
> 赞同：2
> 
> 时间：2012-10-03T10:56:06.977
> 
> 标签：c++, templates, c++11

假设，我有一些序列，例如斐波那契数，定义为模板：

```
template <unsigned int N> struct Fibonacci { unsigned int value = /*...*/; }; 
```

我需要的是获得具有该序列的前 N ​​个元素的 constexpr 数组。我可以做到，使用可变参数模板：

```
template <unsigned int ... Numbers>
struct FibArray
{
    static constexpr array<unsigned int, sizeof...(Numbers)> value = { Fibonacci<Numbers>::value... };
};
// and then:
const auto fib_array = FibArray<1, 2, 3, 4, 5, 6, 7>::value; 
```

是否有可能避免手动枚举索引，并获得具有多个所需值的相同数组？像这样的东西：

```
const array<unsigned, 7> fib_array = GetFirstNFibValues<7>::value; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:32:07.743

您可以通过生成索引来获得此行为：

```
template<unsigned...> struct indices{};

template<unsigned N, unsigned... Indices>
struct indices_gen : indices_gen<N-1, N-1, Indices...>{};

template<unsigned... Indices>
struct indices_gen<1, Indices...>{
  using type = indices<1, Indices...>;
};

#include <array>

template<unsigned N>
struct fibonacci{
  static constexpr unsigned value = N; // yes, lazyness on my part
};

template<class IPack>
struct first_n_fib_impl;

template<unsigned... Is>
struct first_n_fib_impl<indices<Is...>>
{
  using arr_type = std::array<unsigned, sizeof...(Is)>;
  static constexpr arr_type value = {{ fibonacci<Is>::value... }};
};

template<unsigned... Is>
constexpr std::array<unsigned, sizeof...(Is)> first_n_fib_impl<indices<Is...>>::value;

template<unsigned N>
struct first_n_fib
  : first_n_fib_impl<typename indices_gen<N>::type>
{
}; 
```

[活生生的例子（证明`[1..7]`确实是生成的）。](http://liveworkspace.org/code/d75b980c311dc5bed696ce25ac6b4cac)

# windows-phone-7 - WP7滑块拖动结束事件

> ID：12707036
> 
> 赞同：1
> 
> 时间：2012-10-03T10:56:21.977
> 
> 标签：windows-phone-7, events, slider, drag

我正在开发一个 WP7 音乐播放器。我使用滑块来跟踪播放进度。我想让用户拖动滑块在轨道内寻找某个位置，但找不到拖动结束事件？

`slider_ValueChanged`活动不能满足我的需要。

我按照[WPF 此处的说明进行操作：带有在用户拖动后触发的事件的滑块，](https://stackoverflow.com/questions/723502/wpf-slider-with-an-event-that-triggers-after-a-user-drags)但它在 WP7 上不起作用

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:05:16.737

我使用操作完成事件按照[此处](http://www.charlespetzold.com/blog/2010/06/Basic-Manipulation-Event-Handling-in-Windows-Phone-7.html)的说明进行操作，并且可以正常工作

# android - Android 应用程序未知主机异常

> ID：12707040
> 
> 赞同：0
> 
> 时间：2012-10-03T10:56:32.780
> 
> 标签：android

我为安卓平板电脑开发了一个应用程序。在该应用程序中，当我进入应用程序并执行一些操作后，我让应用程序空闲半小时或有时又一次返回应用程序执行任何操作，它会导致应用程序崩溃`UNKNOWNHOSTEXCEPTION`。我不知道为什么即使在我在文件中给予`INTERNET`许可后它也会发生。我`Android manifest`已经为这个问题寻找解决方案一个星期了......我仍然无法找到任何解决方案。我在我的应用程序中使用了片段......请帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:38:30.513

当您尝试切换网络或所需的网络不可用时，会发生这种类型的异常。

使用 try/catch 块来防止应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:04:10.753

平板电脑可能会暂时关闭网络以节省能源。将 try/catch 添加到您的请求中，并且可能会在一段时间内尝试 2-3 次，然后才会向用户显示错误。

# jquery - jquery mouseout 问题

> ID：12707041
> 
> 赞同：0
> 
> 时间：2012-10-03T10:56:34.727
> 
> 标签：jquery, mouseover, mouseout

我有以下代码可以正常工作，只是没有触发鼠标悬停，因此图标留在鼠标悬停阶段。

我从其他来源拼凑了这段代码，所以我确信它可以被简化。任何帮助，将不胜感激！

```
jQuery(function(jQuery){
    jQuery('a.fav_me').live('click', function(){
        var self = this;
        jQuery.get(self.href, {
            theID: self.id.substring(3)
        }, function(data){
            jQuery(self).html('<img src="/images/icons/liked-icon.png" alt="you already like this member" title="you already like this member"/>').toggleClass('fav_me fav_delete');
        });
        return false;
    });
    jQuery('a.fav_delete').live('mouseover', function(){
        var entryID = jQuery(this).attr("rel");
        jQuery(this).html('<img src="/images/icons/unlike-lrg.png" alt="remove your like" title="remove your like"/>').attr('href', 'includes/favourite-add/' + entryID + '/delete/');
    }).live('mouseout', function(){ 
        jQuery(this).html('<img src="/images/icons/liked-icon.png" alt="you already like this member" title="you already like this member"/>');
    }).live('click', function(){
        var entryID = jQuery(this).attr("rel");
        var self = this;
        jQuery.get(self.href, {
            theID: self.id.substring(3)
        }, function(data){
            jQuery(self).html('<img src="/images/icons/hug-icon-lrg.png" alt="add to likes" title="like this member"/>').toggleClass('fav_delete fav_me').attr('href', 'includes/favourite-add/' + entryID);
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:03:28.737

尝试“mouseleave”而不是“mouseout”

# c# - 如何在 WPF 中以编程方式设置 clr-namespace 属性

> ID：12707047
> 
> 赞同：2
> 
> 时间：2012-10-03T10:57:09.390
> 
> 标签：c#, wpf, xaml, kinect.toolbox

我是 WPF 的新手，所以我不确定问题的标题是否正确或是否有意义，如果它可以变得更相关，请进行编辑。我在我的应用程序中使用 Kinect.Toolbox MouseControl。对于使用磁性控件，我遇到了问题。我知道我可以通过添加以下内容在 XAML 中定义它们：

```
<Page ... 
  xmlns:local ="clr-namespace:Kinect.Toolbox;assembly=Kinect.Toolbox">
  ...
<Button local:MagneticPropertyHolder.IsMagnetic="True" ... />
 .... 
```

但我需要在代码中做到这一点。反正有没有在代码中设置磁控制？我可以像这样获取页面中的所有控件：

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
    {
        if (depObj != null)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
                if (child != null && child is T)
                {
                    yield return (T)child;
                }

                foreach (T childOfChild in FindVisualChildren<T>(child))
                {
                    yield return childOfChild;
                }
            }
        }
    }

    foreach (Button tb in FindVisualChildren<Button>(this))
    {
            //Set the buttons to be magnetic
    } 
```

但是我无法理解如何以编程方式设置它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:06:39.710

这看起来像一个[附加属性](http://msdn.microsoft.com/en-us/library/ms749011.aspx)。

要设置它，你会做类似的事情

```
tb.SetValue(MagneticPropertyHolder.IsMagneticProperty, true); 
```

或者可能

```
MagneticPropertyHolder.SetIsMagnetic(tb, true); 
```

快速浏览一下 Kinect Toolbox 源代码表明两者都可以。第二个是更安全的类型。

请参阅[如何在后面的代码中访问附加属性？](https://stackoverflow.com/q/541420/385844)了解更多信息。

# mongodb - 一次性对存在于 Mongodb 数据库中的所有集合启用分片

> ID：12707049
> 
> 赞同：0
> 
> 时间：2012-10-03T10:57:18.237
> 
> 标签：mongodb, sharding

我有一个庞大的数据库，其中有大约 300 个集合，我必须为每个集合启用分片，是否有命令对来自 mongos 的所有集合启用分片，

假设我的数据库名称是 abc

我像这样为数据库启用了分片

```
db.runCommand({"enablesharding" : "abc"}) 
```

稍后我需要使用

```
db.runCommand( { shardcollection : "collection name", key : { _id : 1 } } ) 
```

foreach 集合，

所以请建议和简单的方法

提前感谢您回复此帖子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:19:13.107

您可以通过编程方式获取所有集合名称。

```
db.getCollectionNames().forEach(function(coll_name) {
  db.runCommand( { shardcollection : coll_name, key : { _id : 1 } } )
}) 
```

# eclipse - 我在哪里可以下载 LuaEclipse 插件

> ID：12707051
> 
> 赞同：2
> 
> 时间：2012-10-03T10:57:33.260
> 
> 标签：eclipse, lua

我可以从哪里下载 LuaEclipse 插件？[luaeclipse.luaforge.net](http://luaeclipse.luaforge.net)页面上的链接已损坏。

顺便说一句，由于防火墙问题，我无法使用 Eclipse 更新站点[http://luaeclipse.luaforge.net/update-site/site.xml 。](http://luaeclipse.luaforge.net/update-site/site.xml)所以我需要下载 LuaEclipse 插件的存档，然后我将在本地提取它并可以将 eclipse 指向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T18:27:52.273

Lua 开发工具看起来像 Eclipse 插件的新版本：参见： http: [//www.eclipse.org/koneki/ldt/](http://www.eclipse.org/koneki/ldt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:32:47.440

此链接有效： [LuaEclipsePlugin](https://github.com/luaforge/lua-eclipse-ide)

在那里，您可以将其下载为 zip 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T13:00:22.350

以下链接是 Eclipse 的 lua 插件的最新 URL（将在 Eclipse 内部使用）：

[http://download.eclipse.org/ldt/releases/milestones/](http://download.eclipse.org/ldt/releases/milestones/)

# php - 如何计算倒置问号？

> ID：12707052
> 
> 赞同：2
> 
> 时间：2012-10-03T10:57:38.443
> 
> 标签：php, utf-8

如何计算倒置问号在字符串中出现的次数？

如果我有一个随机字符串，我希望计算 ¿ 字符。我怎样才能做到这一点？

我知道 unicode 代码是`U+00BF`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:01:58.873

利用`echo substr_count($text, '¿')`

一个有趣的 hack：因为 JSON 直接支持 \uxxxx 语法，所以我想到的第一件事是：

```
$unicodeChar = '\u00BF';
echo substr_count($text, json_decode('"'.$unicodeChar.'"')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:59:45.060

您可以使用[**substr_count()**](http://php.net/manual/en/function.substr-count.php)，如下所示：

```
$times = substr_count($text, '¿'); 
```

**¿**字符是 ASCII 扩展的有效字符，因此您可以将它与普通的 php 字符串函数一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T11:03:18.980

尝试使用[mb_substr_count()](http://www.php.net/manual/en/function.mb-substr-count.php)

前任。：

```
$count = mb_substr_count($text, '¿'); 
```

# mysql - 具有多个选择的Mysql group by子句

> ID：12707063
> 
> 赞同：2
> 
> 时间：2012-10-03T10:58:22.627
> 
> 标签：mysql

我的产品表中有 2 列 - 名称和品牌，给定的是数据，

```
NAME               BRAND
'Ruby Axe Guitar', 'Guitar''s & Co'
'TV'             , 'LG' 
```

当我尝试此查询时，它工作正常，

```
select name,brand, sum(1000) as sum,'Test' as name1
from products
group by name,brand 
```

但即使我没有在`group by`子句中包含品牌，我也感到惊讶，查询工作正常..

```
select name,brand, sum(1000) as sum,'Test' as name1
from products
group by name 
```

有人可以解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:05:55.400

MySQL 比恕我直言要严格得多。根据实际的 SQL 规范，任何非分组列都需要在包含子句的查询中使用[聚合函数。](http://en.wikipedia.org/wiki/Aggregate_function)`GROUP BY`

MySQL 将允许在没有此类聚合函数的情况下检索非分组列，返回任意值。他们在文档中对此选择进行了[解释：](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。这意味着前面的查询在 MySQL 中是合法的。您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:01:50.277

你不能选择没有聚合函数的未分组行 - MySQL 会给你随机值。我猜你对第二个查询很幸运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:03:45.527

因为`NAME`您的数据已经是唯一的，所以`GROUP BY NAME`与`GROUP BY NAME, OTHER_FIELD`.

`NAME`是唯一的，那么与任何其他列的组合也是唯一的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:09:42.800

我相信它的意图是被忽视的疏忽。通常，您需要将任何非聚合列包含到“GROUP BY”子句中。但是，MySQL 基本上抓取列的第一个条目，而不是它遇到的聚合的一部分。

这可能没问题，例如对您知道的表/列进行查询，无论相应组中有多少记录都不会改变。例如。您需要一份客户列表及其总订单。订单表有一个连接到客户表的客户 ID。因此，您可以进行 SUM（Orders.Amount），但仍然可以获得客户 ID、姓名、地址、电话。由于加入是在客户 ID 上的，因此相应的名称、地址等将永远不会改变，因此在 group by 中并不重要。只需按客户 ID 分组。

因此，如果您无意中遗漏了一列，MySQL 不会让您窒息...

# firefox - 仅在 Firefox 中的内容安全策略报告

> ID：12707066
> 
> 赞同：3
> 
> 时间：2012-10-03T10:58:30.817
> 
> 标签：firefox, content-security-policy

我已经为我们的网站创建了[内容安全策略](https://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html)，但我想先试用它，看看它是否会导致任何问题，所以我使用了仅报告标题并添加了报告 uri 指令。

标头名称 X-WebKit-CSP-Report-Only 在基于 Webkit 的浏览器中正常工作，但 X-Content-Security-Policy-Report-Only 或[Content-Security-Policy-Report-Only](http://www.html5rocks.com/en/tutorials/security/content-security-policy/#report-only)在 Firefox（版本 15）中均无效。X-Content-Security-Policy 有效，将违规报告发送到我的 report-uri 指令中指定的 URL。但是，这也实现了我还不想做的政策。有没有其他人遇到过这个？

# java - 如何在 jboss 的 server.password 中创建 KeyStorePass

> ID：12707070
> 
> 赞同：0
> 
> 时间：2012-10-03T10:58:49.053
> 
> 标签：java, hibernate, jboss, datasource

我正在使用 Jboss4.2.2 配置使用基于密码的加密 (PBE) 的配置身份，你能告诉我 server.password 的用途以及如何创建它。

项目产品-ds.xml

```
<local-tx-datasource>
    <jndi-name>mobeeadminDatasource</jndi-name>
            <use-java-context>false</use-java-context>
            <connection-url>jdbc:oracle:thin:@localhost:1521:xe</connection-url>
            <driver-class>oracle.jdbc.OracleDriver</driver-class>

             <security-domain>EncryptedOracleDbRealm</security-domain>
            </local-tx-datasource>
         <mbean code="org.jboss.security.plugins.JaasSecurityDomain"
                     name="jboss.security:service=JaasSecurityDomain,domain=ServerMasterPassword">
          <constructor>
             <arg type="java.lang.String" value="ServerMasterPassword"></arg>
          </constructor>
          <!-- The opaque master password file used to decrypt the encrypted
          database password key -->
          <attribute name="KeyStorePass">{CLASS}org.jboss.security.plugins.FilePassword:${jboss.server.home.dir}/conf/server.password</attribute>
          <attribute name="Salt">mobeeadm</attribute>
          <attribute name="IterationCount">13</attribute>
        </mbean>
        <mbean code="org.jboss.jdbc.HypersonicDatabase"
          name="jboss:service=Hypersonic,database=mobeeadminDatasource">
          <attribute name="Database">mobeeadminDatasource</attribute>
          <attribute name="InProcessMode">true</attribute>
       </mbean> 
```

登录-config.xml

```
<application-policy name="EncryptedOracleDbRealm">
   <authentication>
      <login-module code= "org.jboss.resource.security.JaasSecurityDomainIdentityLoginModule"
         flag = "required">
         <module-option name="username">kcbuser</module-option>
         <module-option name="password">29gsr5RGZ9cUs5/sDXk81r</module-option>
         <module-option name="managedConnectionFactoryName">
            jboss.jca:service=LocalTxCM,name=mobeeadminDatasource
         </module-option>
         <module-option name="jaasSecurityDomain">
            jboss.security:service=JaasSecurityDomain,domain=ServerMasterPassword
         </module-option>
      </login-module>
   </authentication>
</application-policy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:30:35.887

[您可以在此处](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Security_Guide/sect-PBE.html)找到 PBE 设置的详细说明和说明

# ruby-on-rails-3.2 - 当 Intanrails 存在于另一个驱动器上时，如何将 mysql 与 rails 3 连接

> ID：12707078
> 
> 赞同：0
> 
> 时间：2012-10-03T10:59:15.707
> 
> 标签：ruby-on-rails-3.2

在我不想删除的驱动器上运行 MySQL 的 Instant-rails。我最近安装了 rails 3.2.8 和 ruby​​ 作为 1.9.3。请指导如何将我的应用程序连接到 MySQL。

*   MySQL gems 已安装
*   将 gem 添加到 gem 文件
*   database.yml 文件写为：

> 开发：
> 适配器：mysql
> 数据库：pretstreet
> 用户名：root
> 主机：localhost
> 套接字：/tmp/mysql.sock
> 端口：3306

执行应用程序时，错误为：

> ActiveRecord::ConnectionNotEstablished

我尝试了 rake 命令，它向我显示错误：

> 耙中止！()：在第 12 行第 1 列扫描简单键时找不到预期的“：”
> 
> 任务：TOP => db:migrate => db:load_config

我面临的另一个问题是，每当我在命令提示符下使用“mysqladmin”相关命令时，它都会显示错误并挂起我的系统。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:04:55.353

尝试这个

```
development:
 adapter: mysql2 # or mysql
 encoding: utf8
 reconnect: false
 database: xyz_development
 pool: 5
 username: root
 password:
 socket: /var/run/mysqld/mysqld.sock 
```

# assembly - gdb 无法从字符串地址访问内存

> ID：12707087
> 
> 赞同：3
> 
> 时间：2012-10-03T10:59:36.190
> 
> 标签：assembly, gdb, x86

我用以下变量编译了一个汇编程序：

```
.data
x: .long 1337
str: .string "Hallo Welt\n" 
```

在 gdb 中，我想使用带有 str 地址的检查命令。

```
(gdb) x str
0x6c6c6148: Cannot access memory at address 0x6c6c6148 
```

我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:45:09.483

0x6c6c6148 是“Hall”，因此 gdb 试图将字符串内容解释为地址。从[手册](http://www.delorie.com/gnu/docs/gdb/gdb_56.html)：

> *addr*，起始显示地址
> *addr*是您希望 GDB 开始显示内存的地址。表达式不需要有指针值（尽管它可能）；**它总是被解释为内存字节的整数地址。**

试试看`x/s &str`，可能效果更好。

# javascript - Jquery UI 选项卡启用/禁用未触发的事件

> ID：12707090
> 
> 赞同：0
> 
> 时间：2012-10-03T10:59:43.273
> 
> 标签：javascript, jquery, tabs, jquery-ui-tabs

我正在尝试切换一系列导航按钮以在禁用/启用选项卡时做出反应。但是，选项卡启用和禁用方法似乎没有触发它们（或者绑定可能是错误的）。

这有效：

```
$('body').on('tabsload', '.tabContainer', function (event, ui) {
   $(ui.panel).find(".tab-loading").remove();
}); 
```

这不起作用：

```
$('body').on('tabsenable', '.tabContainer', function (event, ui) {
   debugger;
});
$('body').on('tabsdisable', '.tabContainer', function (event, ui) {
   debugger;
}); 
```

我以这种方式启用标签：

```
$tabContainer.tabs('option', 'disabled', []); 
```

这不会触发事件吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:12:45.637

我认为错误是设置选项**禁用**而不调用方法。

试试这个：

```
$(".tabContainer").tabs('enable');
$(".tabContainer").tabs('disable'); 
```

和：

```
$(".tabContainer").bind("tabsenable", function(event, ui){
    // action...
});

$(".tabContainer").bind("tabsdisable", function(event, ui){
    // action...
}); 
```

# jquery - 如何更改 MathJax 中的数学填充？

> ID：12707094
> 
> 赞同：4
> 
> 时间：2012-10-03T10:59:48.257
> 
> 标签：jquery, html, css, mathjax

就像，当我的 div 中有我的数学块时，它看起来像这样，我将 div 的填充设置为`0`：

![即使我将包装器 div 的填充设置为零。](../Images/2157a4e2e0557794deacfa619644563e.png)

那么，有没有办法改变数学填充的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T09:51:58.367

从[这里](https://stackoverflow.com/questions/11296415/how-to-left-align-mathjax-elements)找到（相信我回答了这个问题，然后忘记了）：

```
MathJax.Hub.Config({
    jax: ["input/TeX","output/HTML-CSS"],
    displayIndent: "2em"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:42:47.153

自定义它的最简单方法是`MathJax.Hub.Config(...)`在您在标题中加载 MathJax 配置文件之前调用。例如：

```
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    "HTML-CSS": {
        styles: {
            ".MathJax nobr": {
                padding: "0.2em 0.2em"
            },
        }
    }
});
</script>
<script type="text/javascript" src="/path/to/MathJax.js?config=TeX-AMS_HTML" charset="utf-8"></script> 
```

在哪里更改 MathJax 安装的路径。

或者，您可以修改现有配置文件或通过此处概述的方法设置自己的配置：http: [//docs.mathjax.org/en/latest/configuration.html#config-files](http://docs.mathjax.org/en/latest/configuration.html#config-files)

# iphone - 如何从 iPhone 的文档目录中读取 pdf 文件？

> ID：12707096
> 
> 赞同：4
> 
> 时间：2012-10-03T10:59:51.957
> 
> 标签：iphone, ios, multithreading, nsdocumentdirectory, pdf-reader

目前我在 iPhone 应用程序中工作，我在资源文件夹（本地 pdf 文件）中有一个 pdf 文件，然后我成功读取了该 pdf 文件（paper.pdf），下面我提到了读取本地 pdf 文件供您参考。

例子：

```
CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("paper.pdf"), NULL, NULL);
pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);
CFRelease(pdfURL); 
```

然后我尝试将pdf文件（来自URL）存储在NSDocument目录中，存储成功。

```
NSData *pdfData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.msy.com.au/Parts/PARTS.pdf"]];

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
 NSString *documentsDirectory = [paths objectAtIndex:0]; 
 NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"myPDF11.pdf"];
 [pdfData writeToFile:filePath atomically:YES]; 
```

然后我尝试阅读该 pdf 文件（来自 NSDocument 目录），但我不知道，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T11:17:22.637

它非常简单，请使用下面的代码将您的 pdf 从文档目录显示到 Webview

**从文档目录加载 PDF**

```
 - (void)viewDidLoad
 {
[super viewDidLoad];

UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 367)];
webView.scalesPageToFit = YES;

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
 NSString *documentsDirectory = [paths objectAtIndex:0]; 
 NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"myPDF11.pdf"];

NSURL *targetURL = [NSURL fileURLWithPath:filePath];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request];

[self.view addSubview:webView];
[webView release];
 } 
```

**从应用程序捆绑资源文件夹加载 PDF**

```
 - (void)viewDidLoad
 {
[super viewDidLoad];

UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 367)];
webView.scalesPageToFit = YES;

NSString *path = [[NSBundle mainBundle] pathForResource:@"myPDF11" ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request];

[self.view addSubview:webView];
[webView release];
 } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T11:11:28.823

尝试使用这个：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; 
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"myPDF11.pdf"];

NSURL *pdfUrl = [NSURL fileURLWithPath:filePath];
pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);
CFRelease(pdfURL); 
```

来自[NSURL 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)：

> NSURL 类与其 Core Foundation 对应的 CFURLRef 是免费桥接的。有关免费桥接的更多信息，请参阅“免费桥接”。

# .net - Windows 2000 和 .Net 2.0+

> ID：12707106
> 
> 赞同：0
> 
> 时间：2012-10-03T11:00:16.760
> 
> 标签：.net

我听说，Windows 2000 只能与.Net 2.0 一起使用，不能与此之上的其他版本一起使用。这是真的吗？如果是，你有微软的官方帖子或类似的东西，我可以在哪里阅读有关限制的信息？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:02:08.883

如果您转到[.NET Framework System Requirements](http://msdn.microsoft.com/en-us/library/8z6watww.aspx)，您可以从下拉列表中选择您想要的版本。

是的，`Windows 2000 Professional with SP4`被列为与 FW 2.0 兼容，但不在上面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:05:20.097

.NET Framework 更高版本支持的操作系统不包括 Windows 2000。V2.0 的直接后继版本是 V3，它支持[本页](http://msdn.microsoft.com/en-us/library/232852c5-9dbe-415a-a49a-1c4f1bf6fcdb%28v=vs.90%29)列出的操作系统。

# git - 在单独的 repo 上重放来自特定提交的提交历史

> ID：12707110
> 
> 赞同：0
> 
> 时间：2012-10-03T11:00:41.010
> 
> 标签：git

我 git-svn 将 SVN 存储库转换为 git 存储库。它有 1000 次提交。所有这些历史都在新的 git 存储库中，并且在此基础上我还进行了十几个左右的提交。但是，我希望我能从头开始，在第 1000 次提交时在 SVN 存储库的工作副本上使用一个简单的 git init。我有那个工作副本可以开始，我可以将它 git init 用于新的 git repo。但是，我在重放十几个新的 git 提交时遇到了麻烦。我用归档、重置、变基、获取、合并和其他几个命令绕了一圈。我什至试图简单地消除 1000 行历史，但由于某种原因它使我陷入了合并雷区。如何从新的 repo 中删除顶部并在更新的 repo 上回复这些努力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:03:28.923

我不确定我是否完全理解你想要做什么，但你知道 git-cherry-pick 吗？ [http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)

# c# - 在启动时设置按钮的 ToggleState 并检查状态

> ID：12707111
> 
> 赞同：1
> 
> 时间：2012-10-03T11:00:41.287
> 
> 标签：c#, wpf, mvvm, togglebutton

我的 wpf 应用程序中有一个切换按钮。在启动时，必须设置切换按钮。

**我的 Xaml 文件：**

```
<ToggleButton Content="AUD Reset" IsChecked="True" Height="23" HorizontalAlignment="Center" Margin="0" Name="button4" Command="{Binding Path=ConnectCommand}" VerticalAlignment="Center" Width="100" /> 
```

在切换按钮单击时，我想检查我的视图模型类中的切换状态，如果它返回 true，那么我想做以下操作：

**我的视图模型类：**

```
private ICommand mUpdater;
    public ICommand ConnectCommand
    {
        get
        {
            if (mUpdater == null)
                mUpdater = new DelegateCommand(new Action(ConnectToSelectedDevice), new Func<bool>(ConnectCanExecute));

            return mUpdater;
        }
        set
        {
            mUpdater = value;
        }
    }

    public bool ConnectCanExecute()
    {
        return true;
    }

    public void ConnectToSelectedDevice()
    {
        mComm.SetAddress(0x40);
        Byte[] buffer= new Byte[2];
        buffer[0] = 0x24;
        buffer[1] = 0x00;

        if(Check if button togglestate is set, if true then)
        {
         buffer[1] = 0x04;
        }
        mComm.WriteBytes(2, buffer);
    } 
```

如何检查我的视图模型中是否选中了切换按钮并执行上述语句。

请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:15:14.013

您可以将 IsChecked 属性添加到您的 ViewModel 并将其与 ToggleButton.IsChecked 依赖属性绑定：

```
public bool IsChecked {
   get { return this.isChecked; }
   set {
      this.isChecked = value;
      this.OnPropertyChanged("IsChecked");
   }
}

<ToggleButton Content="AUD Reset" IsChecked="{Binding Path=IsChecked}" Height="23" HorizontalAlignment="Center" Margin="0" Name="button4" Command={Binding Path=ConnectCommand} VerticalAlignment="Center" Width="100" /> 
```

然后检查它的状态：

```
public void ConnectToSelectedDevice()
{
    mComm.SetAddress(0x40);
    Byte[] buffer= new Byte[2];
    buffer[0] = 0x24;
    buffer[1] = 0x00;

    if(this.IsChecked)
    {
     buffer[1] = 0x04;
    }
    mComm.WriteBytes(2, buffer);
} 
```

最后，在 ViewModel 的构造函数中初始化 IsChecked 属性：

```
public ViewModel() {
   this.IsChecked = true;
} 
```

# node.js - NodeJS - 数据类型、变量、控制结构、迭代

> ID：12707116
> 
> 赞同：1
> 
> 时间：2012-10-03T11:01:08.190
> 
> 标签：node.js

我是学习NodeJS的初学者。我确信脚本语言有自己的数据类型、变量、控制结构、迭代结构等。但我找不到任何相关的文档？

请提供一些相同的参考。

：：编辑：：

到目前为止，JS 具有在浏览器中运行的功能，并且可以实现特定的功能。

如何编写一个独立的程序，让用户使用 NodeJS 以**mm/dd/yyyy**格式输入日期？就像在浏览器端我们常说的——

```
val = window.prompt('Enter a Date in MM/DD/YYYY format!',''); 
```

有没有办法我可以在 NodeJS 中编写相同的代码而不在浏览器中运行它？此外，所有 JS 浏览器端功能都不能在 NodeJS 中使用 - 请澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:37:50.773

您使用 JavaScript 编写 Node.js 服务器。因此，您需要查找 JavaScript 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:43:24.110

都是 JavaScript，但你真正需要的是 Node 的 API 文档。

[http://nodejs.org/api/documentation.html](http://nodejs.org/api/documentation.html)

至于入门，看一些[示例代码](http://www.nodebits.org/tags/sample-app)总是一个好的举措。

# sql-server - SQL Server - 将表连接到自身时对象名称无效

> ID：12707118
> 
> 赞同：1
> 
> 时间：2012-10-03T11:01:11.783
> 
> 标签：sql-server

我试图找到我的问题的答案，但找不到类似的例子。

我有这样一个查询的结果

```
SELECT * FROM (
   SELECT id FROM table
) AS t1 
```

现在我想将 t1 加入到它自己的另一个实例中，因为我需要移动它。例如，如果我想将一行与前一行进行比较。我试过：

```
SELECT * FROM (
   SELECT id FROM table
) AS t1
LEFT JOIN t1 AS t2 ON (my conditions) 
```

但我收到一个错误，即 t1 是无效的对象名称。当我复制我的选择语句时：

```
SELECT * FROM (
   SELECT id FROM table
) AS t1
LEFT JOIN (
   SELECT id FROM table
) AS t2 ON (my conditions) 
```

以上工作，但它不比加入已经返回的结果慢吗？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:07:46.263

第一个是正确的：

```
SELECT * FROM (
   SELECT id FROM table
) AS t1
LEFT JOIN t1 AS t2 ON (my conditions) 
```

因为你不能给别名起别名。您可以使用 CTE 执行类似的操作，如下所示：

```
;WITH cte
AS
(
    SELECT * FROM Table   
)
SELECT *
FROM Cte t1
INNER JOIN cte t2 ON -- 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T11:14:53.920

我认为您的选择应该是以下形式：

```
SELECT * 
FROM [table] t1
LEFT JOIN [table] t2 ON (your conditions) 
```

从性能的角度来看，这与您上一次选择和[Mahmoud 回答](https://stackoverflow.com/a/12707238/390819)中的 CTE 解决方案相同（我已经查看了 SQL Server 中所有三个的执行计划）。

这可能只是一个品味问题，但我发现这种形式更具可读性/可维护性。

# sql - 为什么选择/读取会导致排他（X）锁？

> ID：12707122
> 
> 赞同：0
> 
> 时间：2012-10-03T11:01:34.370
> 
> 标签：sql, sql-server, sql-server-2008, deadlock

我正在处理的 API 使用的数据库中发生了一些死锁。这仅在 API 进行负载测试时发生。在初步调查和研究中，一些进口指标似乎缺失，现已应用。这似乎解决了死锁问题。在应用索引之前，SQL 正在执行索引扫描。应用索引后，SQL 正在执行索引查找。

这个问题的原因是为了巩固我对死锁的理解。我仍然有点困惑，为什么没有索引选择语句会导致 MS SQL 中的排他（X）锁定？

我认为，这纯粹是因为我不了解死锁图。从我可以看到下图中的2个进程都在做选择..那怎么会导致排他（X）锁？图表上可能没有什么东西吗？

这是在没有额外索引的情况下发生的死锁图：

![在此处输入图像描述](../Images/95d0a26cc744e47eae41dacd13b5d4dd.png)

...这是XML（来自该图表：

```
<deadlock-list>
 <deadlock victim="process4c3708">
  <process-list>
   <process id="process4c3708" taskpriority="0" logused="1580" waitresource="KEY: 5:72057594038910976 (a94bedf44228)" waittime="99" ownerId="13602992" transactionname="user_transaction" lasttranstarted="2012-10-03T10:59:34.830" XDES="0x8cbf23b0" lockMode="S" schedulerid="3" kpid="7588" status="suspended" spid="67" sbid="0" ecid="0" priority="0" trancount="1" lastbatchstarted="2012-10-03T10:59:35.027" lastbatchcompleted="2012-10-03T10:59:35.020" clientapp=".Net SqlClient Data Provider" hostname="DEVMACHINE" hostpid="8440" loginname="user" isolationlevel="read committed (2)" xactid="13602992" currentdb="5" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" stmtstart="170" stmtend="728" sqlhandle="0x02000000b3a88339052734f326b9dbb95deb1d46fe4d192d">
select basefolder1_.Identifier as col_0_0_ from TradeInfo tradepr0_ inner join BaseFolder basefolder1_ on tradepr0_.BaseFolderId=basefolder1_.Id where basefolder1_.BoxId=@p0 and tradepr0_.PersonId=@p1 and tradepr0_.CurrentTrade=1 and tradepr0_.IsActive=1;     </frame>
     <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
unknown     </frame>
    </executionStack>
    <inputbuf>
(@p0 uniqueidentifier,@p1 uniqueidentifier,@p2 uniqueidentifier,@p3 uniqueidentifier)select basefolder1_.Identifier as col_0_0_ from TradeInfo tradepr0_ inner join BaseFolder basefolder1_ on tradepr0_.BaseFolderId=basefolder1_.Id where basefolder1_.BoxId=@p0 and tradepr0_.PersonId=@p1 and tradepr0_.CurrentTrade=1 and tradepr0_.IsActive=1;
select basefolder1_.Identifier as col_0_0_ from TradeInfo tradepr0_ inner join BaseFolder basefolder1_ on tradepr0_.BaseFolderId=basefolder1_.Id where basefolder1_.BoxId=@p2 and tradepr0_.PersonId=@p3 and tradepr0_.SuspendedTrade=1 and tradepr0_.IsSuspended=1;
    </inputbuf>
   </process>
   <process id="process5dd4c8" taskpriority="0" logused="1580" waitresource="KEY: 5:72057594038910976 (b34811986aff)" waittime="301" ownerId="13602927" transactionname="user_transaction" lasttranstarted="2012-10-03T10:59:34.660" XDES="0xafb9f950" lockMode="S" schedulerid="4" kpid="2076" status="suspended" spid="61" sbid="0" ecid="0" priority="0" trancount="1" lastbatchstarted="2012-10-03T10:59:35.020" lastbatchcompleted="2012-10-03T10:59:35.020" clientapp=".Net SqlClient Data Provider" hostname="DEVMACHINE" hostpid="8440" loginname="user" isolationlevel="read committed (2)" xactid="13602927" currentdb="5" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
    <executionStack>
     <frame procname="adhoc" line="1" stmtstart="170" stmtend="728" sqlhandle="0x02000000b3a88339052734f326b9dbb95deb1d46fe4d192d">
select basefolder1_.Identifier as col_0_0_ from TradeInfo tradepr0_ inner join BaseFolder basefolder1_ on tradepr0_.BaseFolderId=basefolder1_.Id where basefolder1_.BoxId=@p0 and tradepr0_.PersonId=@p1 and tradepr0_.CurrentTrade=1 and tradepr0_.IsActive=1;     </frame>
     <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000">
unknown     </frame>
    </executionStack>
    <inputbuf>
(@p0 uniqueidentifier,@p1 uniqueidentifier,@p2 uniqueidentifier,@p3 uniqueidentifier)select basefolder1_.Identifier as col_0_0_ from TradeInfo tradepr0_ inner join BaseFolder basefolder1_ on tradepr0_.BaseFolderId=basefolder1_.Id where basefolder1_.BoxId=@p0 and tradepr0_.PersonId=@p1 and tradepr0_.CurrentTrade=1 and tradepr0_.IsActive=1;
select basefolder1_.Identifier as col_0_0_ from TradeInfo tradepr0_ inner join BaseFolder basefolder1_ on tradepr0_.BaseFolderId=basefolder1_.Id where basefolder1_.BoxId=@p2 and tradepr0_.PersonId=@p3 and tradepr0_.SuspendedTrade=1 and tradepr0_.IsSuspended=1;
    </inputbuf>
   </process>
  </process-list>
  <resource-list>
   <keylock hobtid="72057594038910976" dbid="5" objectname="ccp.dbo.TradeInfo" indexname="PK__Activity__3214EC07060DEAE8" id="lock8011dd00" mode="X" associatedObjectId="72057594038910976">
    <owner-list>
     <owner id="process5dd4c8" mode="X"/>
    </owner-list>
    <waiter-list>
     <waiter id="process4c3708" mode="S" requestType="wait"/>
    </waiter-list>
   </keylock>
   <keylock hobtid="72057594038910976" dbid="5" objectname="ccp.dbo.TradeInfo" indexname="PK__Activity__3214EC07060DEAE8" id="lock8a864e00" mode="X" associatedObjectId="72057594038910976">
    <owner-list>
     <owner id="process4c3708" mode="X"/>
    </owner-list>
    <waiter-list>
     <waiter id="process5dd4c8" mode="S" requestType="wait"/>
    </waiter-list>
   </keylock>
  </resource-list>
 </deadlock>
</deadlock-list> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:16:27.837

它不会（没有锁定提示）

推测在同一个事务中存在前面的语句（死锁图中未显示）实际获得了`X`锁。

请注意，`logused="1580"`如果语句是独立的，这也不会发生`SELECT`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:20:27.247

死锁 XML 中的任何 SELECT 都没有实际获得 X 锁。死锁涉及的两个资源目前在X模式下*拥有*，在S模式下*请求。*这意味着每个事务*先前*已锁定资源（在本例中为键），也许它运行了更新/插入该行的 DML 语句。SELECT 语句只想读取行，因此它们请求 S 模式。

# php - 使用 jQuery 和 Ajax 上传文件

> ID：12707123
> 
> 赞同：0
> 
> 时间：2012-10-03T11:01:35.413
> 
> 标签：php, jquery, ajax, symfony

我有一个使用 jQuery`$.post`方法发送到服务器的表单。我正在发送几个字段，例如：

```
var myName = "Pedro";
var myDescription = "Description of Pedro";

$.post("~/insert_user", { name: myName, description: myDescription }, function(data){
    alert("Successfully inserted " + data.name + " in DB");
}, "json"); 
```

这很好用，因为我将值输入`insert_user.php`并处理并将其插入数据库中。

如果我需要在表单中添加一个字段以让用户上传图像怎么办？

我将如何在我的`$.post`通话中做到这一点，我将如何在 PHP 中获得它？

顺便说一句，我正在使用 Symfony2.0，以防万一它改变了一些东西。但重要的部分是如何在 ajax 调用中添加文件类型字段。

提前致谢。

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:32:00.520

您会发现使用预构建的 jquery 插件会容易得多。我最喜欢的是 uploadify [http://uploadify.com](http://uploadify.com)。

它简单易用，它将为您节省大量时间尝试找出自己的方法<>

$.post 与下面的代码块相同。为了让你做你需要做的事情，你需要改变它以至少使用它，然后事情会变得更简单。因此，首先将 $.post 更改为此

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

然后在 ajax 块 contentType 中添加一个参数：“multipart/form-data”或尝试 mimeType（记不太清楚）和数据中：$（“#form”）.serialize（），应该可以。

请告诉我它是否不起作用

--NEW EDIT LOL--原谅我的盲目编码，你可能需要测试这个

我做了更多的研究并遇到了这个。您需要构建此数组并将其添加到 ajax 块中的数据中

```
var files = new FormData($('#fileinputid'));     
jQuery.each($('#fileinputid')[0].files, function(i, file) {
    files.append(i, file);
}); 
```

如果我读到的内容是准确的，您应该能够将该数组与其余的 ajax 数据一起传递。虽然我不完全确定如何将其添加到序列化数据中。

请对此进行测试并告诉我。如果它不起作用，请为您进行完整的 javascript 脚本测试，然后将其发布在这里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:05:50.580

本教程可能会有所帮助：[Nettuts+：使用 AJAX 上传文件](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:17:26.917

制作 iframe 并将表单放入其中，提交表单并瞧。或者您可以使用这些[AJAX 文件上传脚本之一](http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T18:51:14.947

我终于用了这个：

[http://malsup.com/jquery/form/#faq](http://malsup.com/jquery/form/#faq)

它非常适合我需要的东西。

谢谢你们的帮助。

# assembly - 显示字符的 Ascii 值

> ID：12707124
> 
> 赞同：0
> 
> 时间：2012-10-03T11:01:40.720
> 
> 标签：assembly, character, ascii, mips

我正在尝试制作一个可以显示字符的 ascii 值的程序。问题是它不显示真正的 ascii 值。我在 MIPS 汇编中编写此代码，这与普通汇编语言非常相似。这是代码：

```
.data

User: .asciiz "Bush"
Line: .asciiz "\n"
Address: .word User

.text

main:
li $t0,1
li $t1,2
li $t2,3
li $t3,4
li $t4,5

lb $a0,User($0)
li $v0,1
syscall

la $a0,Line
li $v0,4
syscall

lb $a0,User($t0)
li $v0,1
syscall

la $a0,Line
li $v0,4
syscall

lb $a0,User($t1)

li $v0,1
syscall

la $a0,Line
li $v0,4
syscall

lb $a0,User($t2)

li $v0,1
syscall

la $a0,Line
li $v0,4
syscall

lb $a0,User($t3)

li $v0,1
syscall

la $a0,Line
li $v0,4
syscall

li $t1,-1
jal Length

j Exit

Length:

beq $a0,0,End
addi $t1,$t1,1
lb $a0,User($t1)
j Length

End:
move $a0,$t1
li $v0,1
syscall

jr $ra

Exit:
li $v0,10
syscall 
```

它没有显示真正的 ascii 值的可能原因是什么。此外，当我尝试制作一个查找所有英文字母的 ascii 值的程序时，我会遇到运行时错误。如果有人能帮助我解决这个问题，那对我来说将是一件大事。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:08:24.393

你期望它做什么，它目前做什么？这是我的输出：

```
66
117
115
104
0
4 
```

如果要显示实际的字母，请使用向量 11 而不是 1 `syscall`，这是[打印字符向量](http://www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html)：

```
B
u
s
h

4 
```

* * *

```
lb $a0,User($0)
li $v0,1
syscall 
```

这会从 的地址加载一个字节`User`并将其放入`$a0`. 然后，它将该值打印*为 integer*。at`User`的值是 ASCII 字母“B”的值，即 66，因此它打印 66。这不正确吗？

```
la $a0,Line
li $v0,4
syscall 
```

这会将 的地址`Line`放入`$a0`，然后打印存储在该地址的字符串。在这种情况下，它是一个换行符字符串，因此会打印一个换行符。这是对的。

```
lb $a0,User($t0)
li $v0,1
syscall 
```

这几乎与第一个块相同，除了现在我们的地址偏移量为`$t0`，在本例中为 1，这意味着它加载了“B”（“u”）之后的字节。'u' 的 ASCII 值是 117，这就是打印出来的。这不正确吗？

对于“Bush”的前五个字符（请记住，字符串已经以 0 值结尾），并且似乎打印了正确的值，所以你告诉我们它有什么问题。

您的例程存在一个错误`Length`，因为第一个字符不是来自`User`，而是来自`Length`。更改顺序如下：

```
addi $t1,$t1,1
lb $a0,User($t1)
beq $a0,0,End
j Length 
```

* * *

至于字母表的东西，请提出一个单独的问题并提供足够的问题细节：你尝试了什么，它做了什么，它应该做什么，诸如此类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-09T17:26:48.957

$s1 是 ascii 值

显示寄存器 $s1 中的字符

> ```
>  li $v0, 11      #print character
>   move $a0, $s1
>   syscall 
> ```

示例：$s1="0"=0x30=48 结果：0 将寄存器 $s1 中的 ascii 值显示为十进制

```
li $v0, 1
move $a0, $s1 
 syscall 
```

示例：$s1="0"=0x30=48 结果：48

# c++ - 在 C++ 中存储字节模式

> ID：12707137
> 
> 赞同：1
> 
> 时间：2012-10-03T11:02:06.340
> 
> 标签：c++, word, bit, memory-address

我目前正在从事一个需要我存储 32 位模式并对其进行分析的项目。我需要一种方法将诸如“1001 1001 1100 1000”之类的模式存储在一个变量中，例如，它不会被重新解释为字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:06:31.913

在 C++03 中，我会使用`unsigned int`or`unsigned long`但两者均未指定为 32 位。*被指定为至少*`unsigned long`能够保存值 [0, 2 ^(32) -1]，因此理论上它可能大于 32 位。在 C++11 中，我会使用;*^(`uint32_t`)*

 *例如`0000 0000 0000 0000 1001 1001 1100 1000`is `0x99c8`，其中`0x`是十六进制前缀。

```
uint32_t bitpattern = 0x998c 
```

如果变量`bitpattern`包含所需的位模式，并且您希望将其作为十六进制数字流式传输到控制台，则可以使用：

```
std::cout << std::hex << bitpattern; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:34:02.257

如果要将 32 位模式转换为 int，还可以使用 STL 容器`<bitset>`来完成这项工作：

```
std::bitset<32> bit(std::string("0001100111001000"));
long unsigned bit_number = bit.to_ulong();
std::string bit_string = bit.to_string(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:09:10.023

您确实意识到该模式不是 32 位的，对吧？

既然不是，就像

```
unsigned long pattern = 0x99c8; 
```

应该是非常安全的，你很难找到一个`unsigned long`小于 16 位的平台。Lke Armen 说，如果你有`uint32_t`，请使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:57:18.960

除了尝试使用整数类型和位掩码来创建自己的系统之外，您可能还需要考虑一个很少使用的内置功能，[即位字段](http://msdn.microsoft.com/en-us/library/ewwyfdbe%28v=vs.71%29.aspx)。这种类型的定义很像结构，但是每个元素的数据类型是匿名的，大小由位数指定。有一些开销，但不会比你自己尝试实现的多；实际上，您让编译器完成工作。

如果您需要在整数类型（例如 long）之间来回转换结构，您可以（ab）使用 reinterpret_cast：

```
struct bitSet {
  bitSet(long in1) { //ctor, eg bitSet tmpBit(input);
    *this = reinterpret_cast<bitSet>(in1);
  }
  long toLong() { //eg output=tmpBit.toLong;
    return reinterpret_cast<long>(*this);
  }

  unsigned U0 : 4;
  unsigned U1 : 4;
  unsigned U2 : 4;
  unsigned U3 : 4;
  unsigned U4 : 4;
  unsigned U5 : 4;
  unsigned U6 : 4;
  unsigned U7 : 4;
}; 
```

这样做的好处是，虽然你不能保证整数类型的长度，比如 long，但这确实保证了每个元素只有 4 位长。*

# android - 在运行时在列表中添加行内容

> ID：12707139
> 
> 赞同：0
> 
> 时间：2012-10-03T11:02:09.287
> 
> 标签：android, listview, android-listview

我正在创建一个列表视图，其中每一行有两个部分，左边是一个图像视图，右边部分包含一些文本字段。但是该字段应该动态加载..意味着从 0 到 9 的值将动态出现。我很困惑如何使用正确的部分。我想在java编码中创建它..而不是在xml中..我像这样创建我的xml ..`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="2dp"
    android:background="@android:color/white"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="2dp"
        android:layout_weight=".88"
        android:background="#D8D8D8"
        android:clickable="true"
        android:gravity="center"
        android:text="image"
        android:textColor="@android:color/black" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".15"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" />
         </LinearLayout>

</LinearLayout> 
```

` ![在此处输入图像描述](../Images/f882ae13f554140c4521b24ec2e4c76d.png)

我的适配器类是这样的::

```
 public class SimpleAdapter extends ArrayAdapter<Simple> {
        TextView mImage;
        LinearLayout layout_VER;
        LinearLayout layout_hor;
        private ArrayList<Simple> dd;
        Activity context = null;
        Intent myIntent;

        public SimpleAdapter(Activity context, int textViewResourceId, ArrayList<Simple> objects) {
            super(context, textViewResourceId, objects);
            this.dd = objects;
            this.context = context;
        }

        @Override
        public Simple getItem(int position) {
            // TODO Auto-generated method stub
            return dd.get(position);
        }

        @Override
        public int getCount() {

            return dd.size();
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;
            pos = position;

            if (view == null) {
                LayoutInflater inflater = context.getLayoutInflater();
                view = inflater.inflate(R.layout.row, null);
            }
            view.setTag(pos);
            mImage = (ImageView) view.findViewById(R.id.image);
            if (dd != null) {
                Simple simple = dd.get(position);

            }

            layout_VER=(LinearLayout)view.findViewById(R.id.dyn_main);
            layout_VER.setTag(pos);
            showDEtails(view, layout_VER, 10);
            return view;
        }

        private void showDEtails(View view, LinearLayout layout_VER2, int Obj ) {
            View myView=view;
            LinearLayout ver_layout=layout_VER2;
            Log.i("showAppointments0000000000","vr_layout:::"+ver_layout.getTag());
            LinearLayout hr_layout1 = (LinearLayout)myView.findViewById(R.id.dyn_new);
            hr_layout1.setTag(ver_layout.getTag()+","+0);
            LinearLayout hr_layout2 =null;
            for (int i = 0; i < Obj i++) {
                if (i > 4) {
                    if (Obj  % 5 == 0) {
                        int mp=Obj  % 5;
                        hr_layout2 = new LinearLayout(context);
                        hr_layout2.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
                        hr_layout2.setOrientation(LinearLayout.HORIZONTAL);
                        hr_layout2.setTag(ver_layout.getTag()+","+mp);
                    }      
                    TextView text = new TextView(context);
                    text.setTextSize(12);
                    text.setGravity(Gravity.LEFT);
                    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                            LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
                    layoutParams.setMargins(2, 2, 2, 2);
                    text.setLayoutParams(layoutParams);
                    text.setPadding(3, 3, 3, 3);
                    text.setClickable(true);
                    hr_layout2.addView(text);               
                }else{
                    TextView text = new TextView(context);
                    text.setText("Value of j is : " + i);
                    text.setTextSize(12);
                    text.setGravity(Gravity.LEFT);
                    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                            LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
                    layoutParams.setMargins(2, 2, 2, 2);
                    text.setLayoutParams(layoutParams);
                    hr_layout1.addView(text);
                    text.setClickable(true);
                    text.setPadding(3, 3, 3, 3);
                }
            }
        } 
```

我的o/p是这样的![在此处输入图像描述](../Images/f1ac5993ea2aaf60456402acaf09cc26.png)

有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:09:40.983

通过 java Pragmatically 代码动态创建布局。

请检查链接。它可以帮助您务实地创建带有视图的布局。

[关联](http://www.dreamincode.net/forums/topic/130521-android-part-iii-dynamic-layouts/)

[关联](https://stackoverflow.com/questions/3204852/android-add-a-textview-to-linear-layout-programmatically)

谢谢。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:09:50.000

如果您的右侧部分具有静态布局并且只有字段中的文本会更改，则使用该布局创建一个单独的 xml，然后在 ListView 适配器的 getView() 中填充并填充您的值。像这样的东西：

```
public View getView(int position, View v, ViewGroup parent) {
        LayoutInflater layoutInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = layoutInflater.inflate(mTextViewResourceId, null);
        TextView text = (TextView) v.findViewById(R.id.field1);
        text.setText(mItems.get(position).field1text);
        return v;
} 
```

# javascript - IE 菜单悬停问题

> ID：12707140
> 
> 赞同：0
> 
> 时间：2012-10-03T11:02:18.110
> 
> 标签：javascript, css

网站：[http ://bit.ly/Pa3xJS](http://bit.ly/Pa3xJS)

使用 IE（9 或更低版本），当悬停在主页上的任何菜单上并尝试选择项目 2+ 时，即：悬停在 Shop 上并尝试单击 Brushes 或 Haircare，菜单就会消失。

我怀疑这是由于我的幻灯片内容，但是我尝试过的一切（CSS hacks 和 JS 更改）并没有让菜单按应有的方式工作，并且在 FF、Chrome 和 Safari 上也是如此。

是否有针对此的特定 IE 修复或我错过的 CSS hack？

编辑：我已经更新了 Justus 的 CSS fiddle 以包含没有无关代码的幻灯片内容 - [http://jsfiddle.net/eN7sh/14/](http://jsfiddle.net/eN7sh/14/)。随意玩，只是寻找IE上的问题..主要是IE9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:11:07.743

您的网站有很多其他代码，因此很难看出问题的真正原因。不久前，我摆弄了一个仅限 CSS 的 3 级菜单：http: [//jsfiddle.net/eN7sh/12/](http://jsfiddle.net/eN7sh/12/)

我很确定如果您可以匹配`css`/它将起作用`html`，尽管`li:hover`在 IE7 上可能不起作用。如果必须，您可以只使用 javascript 在`hover`事件上添加一个类名并使用它。小提琴代码：HTML：

```
<ul class="main">
  <li ><a href="#">Link one</a></li>
  <li><a href="#">Link two</a>
    <ul>
      <li><a href="#">Sublink one</a></li>
      <li><a href="#">sublink two</a>
        <ul>
          <li><a href="#">Sub sublink one</a></li>
          <li><a href="#">Sub sublink two</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

CSS：

```
ul.main {
}
.main li {
    float: left;
    position: relative;
}
.main ul {
    position: absolute;
    display: none;
    left: 0;
    top: 1em;
}
.main li:hover > ul {
    display: block;
}
.main ul li {
    display: block;
    float: none;
    white-space:nowrap;
}
.main ul ul {
    left:100%;
    top: 0;
​}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:39:32.717

我在 ie 8 上检查了你的网站。它工作正常..

你应该做的只有一件事

申请

子菜单项上的 z-index 属性。

# asp.net - 定制的 asp.net 软件如何使用 Datamax Oniel 条码打印机打印其内容？

> ID：12707144
> 
> 赞同：1
> 
> 时间：2012-10-03T11:02:23.757
> 
> 标签：asp.net, winforms, c#-4.0, printing, barcode

我使用 C# 在 ASP.NET 中创建了一个 Windows 应用程序。该应用程序在网格视图中生成条形码，我想使用 Datamax Oniel 条形码打印机打印该网格视图。

问题是 datamax Oniel 条码打印机不能用于打印除了打印机附带的应用程序之外的任何内容。

所以我想知道如何使用 Datamax 打印机进行打印？

我到处搜索，但不知道该怎么做。

PS-我是asp.net，c＃的新手。请用简单的方式向我解释。提前谢谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-14T15:22:55.237

我有一个非常相似的问题，我有一个用于接收库存的 asp.net 应用程序。需要将条形码标签打印到 Datamax O'neil Mark III。不容易找到，但有 ac# SDK。我是通过在霍尼韦尔的支持网站上注册找到的：

[https://hsm.secure.force.com/thetechsupportall](https://hsm.secure.force.com/thetechsupportall)

有一个“软件开发人员资源”选项卡，其中包含指向 SDK 的链接，从该页面中，如果您单击“Datamax-o'neil 入门”，您应该会进入一个页面，您可以在其中选择您的打印机型号并下载SDK，其中包括一个 dll 和文档。

我最初考虑的选项是：

*   编写一个单独的 Windows 桌面应用程序，其中包含库存收据和条形码打印功能。在直接连接到打印机的计算机上运行此程序。

*   在 Web 应用程序中编写库存接收功能。将条形码打印请求存储到某种队列中，可能在 SQL Server 中。编写一个小窗口桌面应用程序或服务，该应用程序或服务在连接到打印机的计算机上运行，​​只需检查队列并打印条形码。

*   编写一个在连接到打印机的机器上运行的自托管 .net web api 应用程序。有一个接受数据并打印条形码的 api 端点。我可以在浏览器或 asp.net 中使用一些 javascript 来发布到这里。

事实证明，我的实际解决方案要简单得多。上面提到的 SDK 包括一个示例应用程序，该应用程序显示了如何使用 IP 地址从 c# 代码直接在打印机上打印标签。我按照该示例进行操作，并能够从我的 asp.net 应用程序中向打印机发送标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:06:05.190

ASP.NET 应用程序无法做到这一点。ASP.NET 应用程序只生成 html、javascript 等并将这些内容提供给浏览器。只有浏览器在本地计算机上运行，​​因此您唯一的方法是制作浏览器插件或 Windows 应用程序，它们将从网络获取条形码并打印它。

# spring - Spring Integration，删除出站通道适配器中的文件

> ID：12707149
> 
> 赞同：2
> 
> 时间：2012-10-03T11:02:54.083
> 
> 标签：spring, integration, delete-file, channel, outbound

我正在使用 Spring Integration 轮询文件的目录，在服务类中处理此文件，将此文件写入输出目录，然后删除原始文件。

我有以下 XML 配置：

```
 <int-file:inbound-channel-adapter id="filesInChannel"
                                    directory="file:${java.io.tmpdir}/input" 
                                    auto-create-directory="true"  >
      <int:poller id="poller" fixed-delay="1000" />
  </int-file:inbound-channel-adapter>

  <int:service-activator id="servicActivator"
                         input-channel="filesInChannel"
                         output-channel="filesOut"
                         ref="my_file_processing_service">
  </int:service-activator>

  <int-file:outbound-channel-adapter  id="filesOut" auto-create-directory="true" delete-source-files="true" directory="file:${java.io.tmpdir}/output"/> 
```

这会轮询文件，将其传递给我的 processing_service 并将其复制到出站目录。但是原始文件不会被删除。有谁知道为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T11:00:33.830

我知道这个问题是很久以前提出的，但也许答案对其他人有用。

[Spring集成参考](http://docs.spring.io/spring-integration/docs/2.2.6.RELEASE/reference/htmlsingle/#file-outbound-channel-adapter)中提供了输入文件不被删除的原因：

> 仅当入站消息具有文件有效负载或标头值包含源文件实例或表示原始文件路径的字符串时，该`delete-source-files`属性才会生效。`FileHeaders.ORIGINAL_FILE`

您的邮件不包含此特定标题。如果您使用[标准文件转换器](http://docs.spring.io/spring-integration/docs/2.2.6.RELEASE/reference/htmlsingle/#file-transforming)之一(`FileToStringTransformer`和`FileToByteArrayTransformer`)，它将自动设置。或者，您可以使用[标题丰富](http://docs.spring.io/spring-integration/docs/2.2.6.RELEASE/reference/htmlsingle/#header-enricher)器手动设置它。

[在幕后](https://github.com/spring-projects/spring-integration/blob/master/spring-integration-file/src/main/java/org/springframework/integration/file/transformer/AbstractFilePayloadTransformer.java?source=cc)，文件转换器中正在发生这样的事情：

```
...
Message<?> transformedMessage = MessageBuilder.withPayload(result)
        .copyHeaders(message.getHeaders())
        .setHeaderIfAbsent(FileHeaders.ORIGINAL_FILE, file)
        .setHeaderIfAbsent(FileHeaders.FILENAME, file.getName())
        .build();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:13:07.023

从文档[http://static.springsource.org/spring-integration/reference/html/files.html](http://static.springsource.org/spring-integration/reference/html/files.html)

```
<int-file:outbound-gateway id="mover" request-channel="moveInput"
reply-channel="output"
directory="${output.directory}"
mode="REPLACE" delete-source-files="true"/> 
```

我不知道如何在入站通道适配器上执行此操作（我认为这是有道理的）

# java - 如何使用 javax.inject 提供程序 在spring xml配置中

> ID：12707152
> 
> 赞同：4
> 
> 时间：2012-10-03T11:03:09.137
> 
> 标签：java, spring, provider, inject

我有一个名为让我们说 A 有这样一个二传手的类：

```
//class A
@Inject
public void setAProvider(Provider<B> b)
{
    this.b = b;
} 
```

当我只想拥有一种 A 实例时，它适用于 javax.inject 和注释配置。我的问题是我想要有两个 A 类实例，一个`Provider<B1>`带有`Provider<B2>`. 我的问题是如何在 Spring xml 配置中表达我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-07T20:35:37.943

其实[这里](https://stackoverflow.com/questions/16435117/when-to-use-javax-inject-provider-in-spring)简单回答一下，你需要`ProviderCreatingFactoryBean`。

这是一个例子：

```
<bean id="a" class="a.b.b.A" scope="prototype">
    <property name="xxx" value="15000"/>
</bean>

<bean id="b" class="a.b.b.B" scope="prototype">
    <property name="zzz" value="-1"/>
</bean>

<bean id="providerOfA" class="org.springframework.beans.factory.config.ProviderCreatingFactoryBean">
    <property name="targetBeanName" value="a"/>
</bean>

<bean id="providerOfB" class="org.springframework.beans.factory.config.ProviderCreatingFactoryBean">
    <property name="targetBeanName" value="b"/>
</bean>

<bean id="barServiceA" class="a.b.c.BarService">
    <property name="provider" ref="providerOfA"/>
</bean>

<bean id="barServiceB" class="a.b.c.BarService">
    <property name="provider" ref="providerOfB"/>
</bean> 
```

# java - 在 HttpClient 类中同步请求和响应

> ID：12707158
> 
> 赞同：1
> 
> 时间：2012-10-03T11:03:24.667
> 
> 标签：java, jsp, servlets, httpclient

我正在尝试使用 httpClient 进行登录验证并在服务器端获取无限循环。更多解释将在代码之后进行。这是我的服务器端代码

```
 public void doPost(HttpServletRequest req, HttpServletResponse resp)
    while(true){    
        String user_name = req.getParameter("username");
        String password = req.getParameter("password");
        System.out.println("User name and password is "+user_name +"   paswword is "+password);
        resp.setContentType("text/plain");
        PrintWriter writer = resp.getWriter();
        if(user_name.equalsIgnoreCase("haseeb")){
            System.out.println("valid user name");
            writer.write("welcome");
            //writer.flush();
            break;
        }
        else{
            writer.write("unknown User");
            System.out.println("unknown user name");
            writer.flush();
            continue;
        }

    }//End of while loop

}   //End of doPost Method 
```

从客户端我正在尝试登录，如果登录无效，服务器将返回“unknownUser”，如果登录有效，则客户端将再次发送登录请求，循环将中断。在服务器端，我得到了无限循环，服务器一次又一次地处理第一个请求参数....！！！如果有人想要我可以发布我的客户端代码以获得进一步的帮助，您可以在评论部分索取。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:12:25.367

问题出`continue`在`else`块中。它应该`break`也是如此。但是，更好的编写方法是没有`while`循环。例如

```
public void doPost(HttpServletRequest req, HttpServletResponse resp)
    String user_name = req.getParameter("username");
    String password = req.getParameter("password");
    System.out.println("User name and password is "+user_name +"   paswword is "+password);
    resp.setContentType("text/plain");
    PrintWriter writer = resp.getWriter();
    if(user_name.equalsIgnoreCase("haseeb")){
        System.out.println("valid user name");
        writer.write("welcome");
        writer.flush();
    }
    else{
        writer.write("unknown User");
        System.out.println("unknown user name");
        writer.flush();
    }

}   //End of doPost Method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:07:22.560

```
while(true){

  if(...)
   break; 
```

这是令人讨厌的代码.. 当细节错误时你可以抛出一个异常并告诉用户他需要再次编写他的凭据。所以发送一个新的httpRequest。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:15:35.230

当然你会得到一个无限循环！

```
while(true){ 
.....
    else{
        ......
        continue;
    }
} 
```

这就是造成它的原因。

而不是`continue;`您应该将请求发送回请求其凭据的用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:21:28.210

您似乎不了解 HTTP 请求的工作原理。

The user's browser sends a request to the server asking for the login page, the server responds with the HTML and that response ends there. Then, the user validates his credentials, causing the browser to send a *new* request, and the server responds with either the page after the login, or the login page again and a message indicating that the credentials did not match, but in both cases *the response ends there again*. HTTP connections are not kept, it's just a series of requests and responses in separate connections.

So you don't use a loop, you just send the appropriate HTML back, once per request.

* * *

This still holds even if the user's application is a desktop application and not a browser, as long as it uses HTTP as its transport. You can't resubmit data using the same request, at least not if you use the `HttpServletRequest` / `HttpServletResponse` paradigm.

# salesforce - Salesforce：如何在我公司的销售人员中创建开发人员帐户

> ID：12707164
> 
> 赞同：0
> 
> 时间：2012-10-03T11:03:37.847
> 
> 标签：salesforce

我在 salesforce 中创建了一个开发人员帐户。但现在我需要创建一些逻辑，使用某人在公司销售人员中创建的一些自定义对象。

我应该在公司的销售人员中创建一个开发者帐户吗？

还是应该将所有内容复制到我的开发者帐户中？

或者...？

我该怎么做或者我在哪里可以学习如何做？

## 笔记：

我需要使用在生产环境中创建的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:18:28.643

您应该在您的开发人员版本中安装自定义对象。这可以通过多种方式完成，例如使用您可以在公司的销售人员中创建的非托管包。

您的公司必须拥有特定版本的 salesforce，例如 Enterprise、developer 等。在特定版本的 salesforce 中没有开发人员版本帐户之类的东西。意味着您无法在企业中创建开发人员版本。

了解非托管包[http://wiki.developerforce.com/page/How_to_Create_and_Register_a_Package](http://wiki.developerforce.com/page/How_to_Create_and_Register_a_Package)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T02:09:00.880

实现目标的最佳方法是使用沙盒实例而不是开发人员版本。沙盒实例允许您在生产和测试之间切换逻辑和更改。

单击 setup|sandbox 以创建和管理您的测试环境。

根据您的许可证，沙盒实例在空间方面可能有不同的限制。

# java - Spring REST 服务：如何配置以删除 json 响应中的空对象

> ID：12707165
> 
> 赞同：81
> 
> 时间：2012-10-03T11:03:39.613
> 
> 标签：java, spring, jackson

我有一个返回 json 响应的 spring webservice。我正在使用此处给出的示例来创建服务： [http ://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)

返回的 json 格式为：{"name":null,"staffName":["kfc-kampar","smith"]}

我想从返回的响应中删除任何空对象，所以它看起来像这样： {"staffName":["kfc-kampar","smith"]}

我在这里发现了类似的问题，但我已经能够得到一个有效的解决方案，例如

[在 Spring 中配置 ObjectMapper](https://stackoverflow.com/questions/7854030/configurating-objectmapper-in-spring)

[使用基于spring注解的配置时如何配置MappingJacksonHttpMessageConverter？](https://stackoverflow.com/questions/10650196/how-to-configure-mmppingjacksonhttpmessageconverter-while-using-spring-annotatio)

[配置jacksonObjectMapper在spring mvc 3中不起作用](https://stackoverflow.com/questions/6177913/configuring-the-jacksonobjectmapper-not-working-in-spring-mvc-3)

[如何配置spring mvc 3在json响应中不返回“null”对象？](https://stackoverflow.com/questions/6049523/how-to-configure-spring-mvc-3-to-not-return-null-object-in-json-response)

[Spring配置@ResponseBody JSON格式](https://stackoverflow.com/questions/4823358/spring-configure-responsebody-json-format)

[Jackson+Spring3.0.5 自定义对象映射器](https://stackoverflow.com/questions/11392944/jacksonspring3-0-5-custom-object-mapper)

通过阅读这些和其他来源，我发现实现我想要的最简洁的方法是使用 Spring 3.1 和可以在 mvc-annotation 中配置的消息转换器。我更新的弹簧配置文件是：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<context:component-scan base-package="com.mkyong.common.controller" />

<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
            <property name="prefixJson" value="true" />
            <property name="supportedMediaTypes" value="application/json" />
            <property name="objectMapper">
                <bean class="org.codehaus.jackson.map.ObjectMapper">
                    <property name="serializationInclusion" value="NON_NULL"/>
                </bean>
            </property>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

服务类与 mkyong.com 网站上给出的相同，除了我注释掉了 Shop name 变量的设置，因此它为空，即

```
@Controller
@RequestMapping("/kfc/brands")
public class JSONController {
    @RequestMapping(value="{name}", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK) 
    public @ResponseBody Shop getShopInJSON(@PathVariable String name) {
        Shop shop = new Shop();
        //shop.setName(name);
        shop.setStaffName(new String[]{name, "cronin"});
        return shop;
    }
} 
```

我使用的 Jackson jar 是 jackson-mapper-asl 1.9.0 和 jackson-core-asl 1.9.0。这些是我添加到 pom 中的唯一新 jar，作为我从 mkyong.com 下载的 spring-json 项目的一部分提供。

项目成功构建，但是当我通过浏览器调用服务时，我仍然得到相同的东西，即 {"name":null,"staffName":["kfc-kampar","smith"]}

谁能告诉我我的配置哪里出错了？

我尝试了其他几个选项，但我能够以正确格式返回 json 的唯一方法是将对象映射器添加到 JSONController 并让“getShopInJSON”方法返回一个字符串，即

```
public @ResponseBody String getShopInJSON(@PathVariable String name) throws JsonGenerationException, JsonMappingException, IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);

    Shop shop = new Shop();
    //shop.setName(name);
    shop.setStaffName(new String[]{name, "cronin"});
    String test = mapper.writeValueAsString(shop);
    return test;
} 
```

现在，如果我调用该服务，我会得到预期的结果，即 {"staffName":["kfc-kampar","cronin"]}

我还能够使用 @JsonIgnore 注释让它工作，但这个解决方案不适合我。

我不明白为什么它在代码中而不是在配置中工作，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2014-12-16T20:07:15.687

Since Jackson 2.0 you can use [JsonInclude](https://github.com/FasterXML/jackson-annotations/blob/master/src/main/java/com/fasterxml/jackson/annotation/JsonInclude.java)

```
@JsonInclude(Include.NON_NULL)
public class Shop {
    //...
} 
```

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2016-04-09T09:58:22.753

由于正在使用 Jackson，因此您必须将其配置为 Jackson 属性。对于 Spring Boot REST 服务，您必须在`application.properties`or中配置它`application.yml`：

```
spring.jackson.default-property-inclusion = NON_NULL 
```

[资源](https://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-31T06:31:04.100

```
@JsonSerialize(include=JsonSerialize.Inclusion.NON_EMPTY)
public class Shop {
    //...
} 
```

杰克逊 2.0 或更高版本使用`@JsonInclude(Include.NON_NULL)`

这将删除空对象和空对象。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-08-26T14:55:07.453

设置`spring.jackson.default-property-inclusion=non_null`选项是最简单的解决方案，并且效果很好。

**但是**，如果您在代码中的某处实现 WebMvcConfigurer，请注意，属性解决方案将不起作用，您必须在代码中设置 NON_NULL 序列化，如下所示：

```
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    // some of your config here...

    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
        MappingJackson2HttpMessageConverter jsonConverter = new MappingJackson2HttpMessageConverter(objectMapper);
        converters.add(jsonConverter);
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-28T19:36:41.343

如果您使用的是 Jackson 2，则 message-converters 标签为：

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="prefixJson" value="true"/>
            <property name="supportedMediaTypes" value="application/json"/>
            <property name="objectMapper">
                <bean class="com.fasterxml.jackson.databind.ObjectMapper">
                    <property name="serializationInclusion" value="NON_NULL"/>
                </bean>
            </property>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-23T10:14:33.983

自 Jackson 2.0 起，`@JsonSerialize(include = xxx)`已弃用，取而代之的是`@JsonInclude`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-12-31T04:53:53.903

对于所有非 xml 配置人员：

```
ObjectMapper objMapper = new ObjectMapper().setSerializationInclusion(JsonInclude.Include.NON_NULL);
HttpMessageConverter msgConverter = new MappingJackson2HttpMessageConverter(objMapper);
restTemplate.setMessageConverters(Collections.singletonList(msgConverter)); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-02-19T09:18:35.903

从 1.6 版开始，我们有了新的注释 JsonSerialize（例如在 1.9.9 版中）。

例子：

```
@JsonSerialize(include=Inclusion.NON_NULL)
public class Test{
...
} 
```

默认值为始终。

在旧版本中，您可以使用 JsonWriteNullProperties，它在新版本中已被弃用。例子：

```
@JsonWriteNullProperties(false)
public class Test{
    ...
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-04T10:31:19.540

您可以[`JsonWriteNullProperties`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonWriteNullProperties.html)用于较旧版本的 Jackson。

对于杰克逊 1.9+，使用[`JsonSerialize.include`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html#include%28%29).

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-04T10:17:25.950

我通过配置Spring容器找到了解决方案，但仍然不是我想要的。

我回滚到 Spring 3.0.5，删除并在它的地方我将我的配置文件更改为：

```
 <bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <bean
                class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper" ref="jacksonObjectMapper" />
            </bean>
        </list>
    </property>
</bean>

<bean id="jacksonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper" />
<bean id="jacksonSerializationConfig" class="org.codehaus.jackson.map.SerializationConfig"
    factory-bean="jacksonObjectMapper" factory-method="getSerializationConfig" />
<bean
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="jacksonSerializationConfig" />
    <property name="targetMethod" value="setSerializationInclusion" />
    <property name="arguments">
        <list>
            <value type="org.codehaus.jackson.map.annotate.JsonSerialize.Inclusion">NON_NULL</value>
        </list>
    </property>
</bean> 
```

这当然类似于其他问题中给出的回答，例如

[配置jacksonObjectMapper在spring mvc 3中不起作用](https://stackoverflow.com/questions/6177913/configuring-the-jacksonobjectmapper-not-working-in-spring-mvc-3)

需要注意的重要一点是，mvc:annotation-driven 和 AnnotationMethodHandlerAdapter 不能在同一个上下文中使用。

我仍然无法让它与 Spring 3.1 和 mvc:annotation-driven 一起使用。我认为使用 mvc:annotation-driven 的解决方案以及随之而来的所有好处会好得多。如果有人能告诉我如何做到这一点，那就太好了。

# c# - 单步执行测试时测试成功；否则不

> ID：12707166
> 
> 赞同：1
> 
> 时间：2012-10-03T11:03:40.720
> 
> 标签：c#, testing, watin

我用 WatiN 编写了一个测试，当用 F10 单步执行代码时，测试成功，但是当我从上下文菜单中执行“运行测试”命令时，测试失败。

这是我的测试：

```
[TestMethod]
[STAThread]
public void Should_show_captcha_after_three_invalid_login_attempts_with_invalid_username()
{
    // Given
    int numberOfLoginAttempts = 3;

    // When
    for (int loginAttempt = 1; loginAttempt <= numberOfLoginAttempts; loginAttempt++)
    {
        EnterUsername(LoginSettings.ValidUserName);
        EnterPassword(loginAttempt.ToString());

        ClickLoginButton();

        // Check we are still on the loginpage
        Assert.IsTrue(_browser.Title.Contains("Inloggen"));
    }

    bool isCaptchaVisible = _browser.Page<LoginPage>().Captcha.Exists;

    // Then
    Assert.IsTrue(isCaptchaVisible);

    // Make sure to clear the login attempts for next test cases
    RemoveLoginAttempts();
} 
```

仅供参考：在数据库中，我们根据用户名跟踪 loginAttempts。当登录尝试次数 > 2 时，将显示验证码。我遇到的问题是DB中的计数器保持1。当我手动单步执行测试时，计数器增加了。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:20:37.700

嗯，你是对的，它必须是时间。然而问题的一部分是这不是单元测试，另一个是你假设在执行另一行测试代码之前已经完成了大量异步工作，这些测试代码是假设它编写的拥有。

例如，登录尝试循环中的计数绝对不是数据库中的计数。一切都是平等的，它应该匹配，但是..

所以对我来说，你应该测试一下登录功能。如果不成功，则登录数据库中的 colunt，如果成功则重置该计数。然后进行另一个测试，以查看当数据库中的登录尝试超过限制时，登录响应会检测到并显示正确的响应。

如果您想加入所有这些以进行端到端/白盒测试。然后应该使用一些描述的自动化测试。

我怀疑 Windows、浏览器、您的网络服务器甚至您的 dbms 都没有时间来完成第一次登录尝试的处理，在您排队另外两个，然后完成测试之前。而在调试模式下，在您逐步完成时，他们有足够的时间。

# .htaccess - Htaccess单页重定向问题

> ID：12707167
> 
> 赞同：1
> 
> 时间：2012-10-03T11:03:42.827
> 
> 标签：.htaccess, mod-rewrite, redirect

我在使用 htaccess 设置单页重定向时遇到了一些问题。目前我有一个 htaccess 文件：

```
RewriteCond %{SCRIPT_FILENAME} !-s
RewriteRule (.*) index.php?path=$1 [QSA,L] 
```

然后是一组重定向，例如

```
Redirect 301 /oldpage.htm http://www.mydomain.com/new-page 
```

但是我遇到的问题是，当我进入浏览器并输入旧 URL 时，我会被重定向到带有附加参数的 URL，例如：

“http://www.mydomain.com/new-page?path=oldpage.htm”

对于我的某些重定向，这似乎仍然有效，对于某些重定向，它会产生 404 错误。我还尝试使用 RewriteCond 和 Rewrite Rule 为那些我可以的页面编写更通用的捕获所有重定向，并且我遇到了同样的问题。

我认为其他一些规则一定会干扰我的重定向 - 我能看到的唯一一个可能会这样做的是上面的规则，但如果是这种情况，我被重定向到的 URL 不应该是

“http://www.mydomain.com/index.php?path=oldpage.htm”

谁能解释为什么将参数附加到 URL 以及如何阻止这种情况发生以便我的重定向工作？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:13:15.557

因为你的 $1 in rewrite 规则

RewriteRule (.*) index.php [QSA,L] 试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:52:38.347

这是因为 mod_alias（`Redirect`指令）和 mod_rewrite（`Rewrite*`指令）都被应用于 URL 文件映射处理管道中的同一个 URI。为了防止这种情况发生，在这种情况下，您需要坚持使用其中一种。

您还希望首先应用重定向：

```
RewriteRule ^/?oldpage.htm$ http://www.mydomain.com/new-page [L,R=301]

RewriteCond %{SCRIPT_FILENAME} !-s
RewriteRule (.*) index.php?path=$1 [QSA,L] 
```

您的`index.php`规则将捕获所有不是符号链接的 CGI 脚本的请求，因此，如果这确实是您的意图，那么几乎所有请求。否则，您可以通过以下方式让合法请求安然无恙：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

高于最后一条规则。

# ruby-on-rails - rails 3.2 使用活动管理员 0.5.5 member_action 获取路由错误

> ID：12707168
> 
> 赞同：2
> 
> 时间：2012-10-03T11:03:43.583
> 
> 标签：ruby-on-rails, ruby, routes, ruby-on-rails-3.2, activeadmin

我已成功合并设计、活动管理员和 cancan，使用单个用户模型在我的 Web 应用程序的管理员和前端进行授权和身份验证，我是否批准了用户模型的布尔标志？这样他们就可以发布他们的应用程序（数据库中批准状态的真假）。现在我想“只”通过管理页面批准用户。

```
in app\model\user.rb

def approve!
  #set approved boolean state in database to true
  approved = true
end

def disapprove!
  #set approved boolean state in database to false
  approved = false
end 
```

在活跃的管理员中，我有。

```
app\admin\user.rb

  member_action :approve, :method => :put do
    App.find(params[:id]).approve!
    redirect_to [:admin, resource], :notice => "Developer Approved"
  end

   member_action :disapprove, :method => :put do
      user = User.find(params[:id])
      user.disapproved!
      redirect_to admin_user_path(user), notice: "Successfully Disapproved Developer!"
   end 
```

这对于列链接

```
 column "Approve Developer" do |user|

       if user.developer? && user.approved_developer?
       link_to 'Disapprove Developer', "#"

    elsif user.developer? && !user.approved_developer?
       link_to 'Approve Developer',approve_admin_user_path

    else
       "Not A Developer"
    end

  end 
```

运行 rake 路线告诉我

```
approve_admin_user PUT    /admin/users/:id/approve(.:format)  admin/users#approve
disapprove_admin_user PUT    /admin/users/:id/approve(.:format)  admin/users#disapprove 
```

一切似乎都很好，但是当我加载页面并单击批准开发人员链接或不批准开发人员链接时，我收到`No route matches {:action=>"approve", :controller=>"admin/users"}`错误。

我还为活动管理员设置了路由，如`ActiveAdmin.routes(self)`routes.rb 我也有一个`resources :users` 我仍然不知道我在这里做错了什么 非常感谢帮助 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T14:55:31.310

我有同样的问题，我想你可以解决你编辑这部分代码的问题：

```
 link_to 'Approve Developer',approve_admin_user_path() 
```

至：

```
link_to 'Approve Developer',approve_admin_user_path(user), :method => :put 
```

link_to 默认的 http 动词是 GET，就我而言，它完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:13:26.523

尝试这个

```
map.namespace :admin do |a|
   a.resources :users, :member => {:approve => :get} 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T19:19:03.153

从路由条目中可以看出，链接创建中缺少 :id。尝试这个：

```
link_to 'Approve Developer', approve_admin_user_path(:id => user.id) 
```

如果它不起作用，请不要忘记重新启动服务器。

# wordpress - 需要建议使用正确的 wordpress 插件来执行电子商务功能

> ID：12707171
> 
> 赞同：-1
> 
> 时间：2012-10-03T11:04:04.513
> 
> 标签：wordpress, e-commerce

我想使用 Wordpress 制作一个电子商务网站。我尝试了一些名为`wp eCommerce, woocommerce`. 但他们都未能满足我的要求。我有一定的要求，比如；

1.  当用户访问该站点时，将有一个注册和登录按钮。用户可以在哪里注册他的所有详细信息。

2.  当用户一旦登录，他将获得 20 奖励积分。

3.  当用户购买东西时，此奖励积分将很有帮助，然后他将从总金额中获得 0.20 美元的折扣。这样，奖励积分将起作用。

`wp eCommerce`我认为此选项在和中不可用`woocommerece`。我还需要用户在访问网站时注册，而不是在他结账时注册，因为注册会给他 20 个奖励积分。

所以我已经看到了两个插件（wp eCommerce 和 woothemes）这个功能不能在那里完成。

因此，请帮助我，如果您想提供任何建议或任何有价值的链接`，这也将是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:18:18.193

如果没有自定义，现有的电子商务插件都不会满足您的要求。如果您对功能很认真，请考虑聘请开发人员进行更改。

# c# - MVC3 集合的 ValidationMessage

> ID：12707173
> 
> 赞同：3
> 
> 时间：2012-10-03T11:04:16.553
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我们的 MVC3 模型包括这样的字符串集合

```
[CannotBeEmpty(ErrorMessageResourceName = "ColorCodes", ErrorMessageResourceType = typeof(Resources.Strings))]
[Display(ResourceType = typeof(Resources.Strings), Name = "ColorCodes")]
public List<string> ColorCodes { get; set; } 
```

我在我的视图中显示这个模型

```
<div class="editor-field colors">
     @Html.EditorFor(model => model.ColorCodes)
     @Html.ValidationMessageFor(model => model.ColorCodes)
</div> 
```

我的问题是 myValidationMessageFor 仅呈现 1 行，而在下面的示例中， EditorFor 会显示 3 个输入字段。

```
 <input class="text-box single-line" id="ColorCodes_0_" name="ColorCodes[0]" type="text" value="#d6c0d6">
 <input class="text-box single-line" id="ColorCodes_1_" name="ColorCodes[1]" type="text" value="">
 <input class="text-box single-line" id="ColorCodes_2_" name="ColorCodes[2]" type="text" value="#fcfcfc">
 <span class="field-validation-valid" data-valmsg-for="ColorCodes" data-valmsg-replace="true"></span> 
```

如您所见，data-valmsg-for 包含错误的“ColorCodes”。它应该包含 ColorCodes_0_、ColorCodes_1_ 和 ColorCodes_2_。当模型包含集合时，我应该如何使用 ValidationMessageFor。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:24:20.170

您可以循环迭代模型`for`并接收预期结果。

```
@for(int i = 0; i < Model.ColorCodes.Count; i++)
{
   @Html.EditorFor(model => model.ColorCodes[i])
   @Html.ValidationMessageFor(model => model.ColorCodes[i])
} 
```

# java - 将图像复制到剪贴板不适用于 Linux（Java AWT 和 SWT）

> ID：12707176
> 
> 赞同：2
> 
> 时间：2012-10-03T11:04:35.980
> 
> 标签：java, linux, swt, awt, jfreechart

我正在开发一个包含 JFreeChart 的 Eclipse RCP 应用程序。它的功能之一是将图形复制到剪贴板以便将它们粘贴到其他应用程序中，但它不适用于 Linux，

有一个[SWT 示例](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet282.java)，您可以在其中找到在 Linux 中不起作用的片段。

另一方面，JFreeChart 在 AWT 上实现了这一点：

```
Clipboard systemClipboard
            = Toolkit.getDefaultToolkit().getSystemClipboard();
    Insets insets = getInsets();
    int w = getWidth() - insets.left - insets.right;
    int h = getHeight() - insets.top - insets.bottom;
    ChartTransferable selection = new ChartTransferable(this.chart, w, h,
            getMinimumDrawWidth(), getMinimumDrawHeight(),
            getMaximumDrawWidth(), getMaximumDrawHeight(), true);
    systemClipboard.setContents(selection, null); 
```

但是，这两个示例在 Linux 64 位上都失败了。有没有办法实现它？？

提前致谢！

编辑：

将 JFreeChart 图形复制到文件但不复制到剪贴板的代码

```
final org.eclipse.swt.dnd.Clipboard clipboard = new org.eclipse.swt.dnd.Clipboard(menu.getDisplay());
                    Insets insets = source.getInsets();
                    int w = source.getWidth() - insets.left - insets.right;
                    int h = source.getHeight() - insets.top - insets.bottom;
                    ChartTransferable selection = new ChartTransferable(source
                            .getChart(), w, h, source.getMinimumDrawWidth(), source.getMinimumDrawHeight(), source
                            .getMaximumDrawWidth(), source.getMaximumDrawHeight(), true);

                    Image image = new Image(menu.getDisplay(),ImageUtils.convertToSWT(selection.getBufferedImage()));
                    if (image != null) {
                        ImageLoader imageLoader = new ImageLoader(); 
                        imageLoader.data = new ImageData[] { image.getImageData() }; 
                        imageLoader.save("/tmp/graph.jpg", SWT.IMAGE_JPEG); // fails 
                        ImageTransfer imageTransfer = ImageTransfer.getInstance();
                        clipboard.setContents(new Object[]{image.getImageData()}, 
                                new Transfer[]{imageTransfer}, DND.CLIPBOARD | DND.SELECTION_CLIPBOARD);
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-22T13:45:13.003

将图像复制到剪贴板不适用于 Linux 64 上的 SWT，自 2009 年以来 Eclipse 跟踪器上存在一个[问题。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=283960 "错误 283960 - 剪贴板图像传输在 Linux x86_64 上不起作用。")

我做了一个解决方法 SWT Transfer 实现，将图像复制为 PNG。
它适用于 Ubuntu 64，未在其他平台上测试。

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.UncheckedIOException;

import org.eclipse.swt.SWT;
import org.eclipse.swt.dnd.ByteArrayTransfer;
import org.eclipse.swt.dnd.TransferData;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.ImageLoader;

/**
 * Custom clipboard transfer to work around SWT bug 283960 that make copy image to clipboard not working on Linux 64.
 *  
 * @see https://bugs.eclipse.org/bugs/show_bug.cgi?id=283960
 */
public class PngTransfer extends ByteArrayTransfer {

    private static final String IMAGE_PNG = "image/png";
    private static final int ID = registerType(IMAGE_PNG);

    private static PngTransfer _instance = new PngTransfer();

    private PngTransfer() {}

    public static PngTransfer getInstance () {
        return _instance;
    }

    @Override
    protected String[] getTypeNames() {
        return new String[]{IMAGE_PNG};
    }

    @Override
    protected int[] getTypeIds() {
        return new int[]{ID};
    }

    @Override
    protected void javaToNative(Object object, TransferData transferData) {
        if (object == null || !(object instanceof ImageData)) {
            return;
        }

        if (isSupportedType(transferData)) {
            ImageData image = (ImageData) object;
            try (ByteArrayOutputStream out = new ByteArrayOutputStream();){
                // write data to a byte array and then ask super to convert to pMedium

                ImageLoader imgLoader = new ImageLoader();
                imgLoader.data = new ImageData[] { image };
                imgLoader.save(out, SWT.IMAGE_PNG);

                byte[] buffer = out.toByteArray();
                out.close();

                super.javaToNative(buffer, transferData);
            } catch (IOException e) {
                throw new UncheckedIOException(e);
            }
        }
    }

    @Override
    protected Object nativeToJava(TransferData transferData) {
        if (isSupportedType(transferData)) {

            byte[] buffer = (byte[])super.nativeToJava(transferData);
            if (buffer == null) {
                return null;
            }

            try (ByteArrayInputStream in = new ByteArrayInputStream(buffer)){
                return new ImageData(in);
            } catch (IOException e) {
                throw new UncheckedIOException(e);
            }
        }

        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:28:37.800

试试这个代码：

```
JFreeChart chart = YOUR_CHART_HERE;
ChartComposite chartComposite = new ChartComposite(shell, SWT.NONE, chart, true);

Image image = new Image(Display.getDefault(), chartComposite.getBounds());
GC gc = new GC(image);
chartComposite.print(gc);
gc.dispose();

ImageTransfer imageTransfer = ImageTransfer.getInstance();
clipboard.setContents(new Object[] {image.getImageData()}, new Transfer[]{imageTransfer}); 
```

# java - 我在 BufferedImage 中出现奇怪的黑色区域，我该如何解决？

> ID：12707178
> 
> 赞同：4
> 
> 时间：2012-10-03T11:04:38.653
> 
> 标签：java, swing, concurrency, awt, bufferedimage

我目前正在编写 Fractal Explorer 程序，但遇到了一个非常奇怪的问题：我在 BufferedImage 上绘制分形，并且在该图像中随机出现黑色区域​​。截图：http: [//imgur.com/a/WalM7](http://imgur.com/a/WalM7)

图像是多线程计算的：大图像被分成四个（因为我有一个四核处理器）单独计算的子图像。黑色区域出现在每个子图像的开头。它们总是矩形的，不一定按照像素的计算顺序（从左到右，但该区域并不总是延伸到子图像的远端）。

我已经验证，在绘制像素后（使用 Graphics.drawLine），BufferedImage.getRGB 立即返回像素的正确颜色，但在计算完成后，它可以返回黑色，因为像素是在屏幕上绘制的。

如果我禁用多线程计算（通过任务管理器仅将一个内核分配给 javaw.exe），问题似乎消失了，但我真的不想放弃多核计算。有没有其他人遇到过这个问题（我没有通过谷歌和stackoverflow找到任何东西），你知道如何解决吗？

Graphics.drawLine 调用在 Graphics 对象上同步；如果我另外在 BufferedImage 上同步它，则没有任何变化。

如果您想亲自查看该错误，您可以在[http://code.lucaswerkmeister.de/jfractalizer/](http://code.lucaswerkmeister.de/jfractalizer/)下载该程序。它也可以在 GitHub (https://github.com/lucaswerkmeister/JFractalizer) 上找到，但我最近才切换到 GitHub，并且在第一次 GitHub 提交中问题已经很明显了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:47:08.883

我认为问题在于 BufferedImage 和 Graphics 都不是线程安全的，并且您会在计算后读取 BufferedImage 的线程中看到陈旧的值。

像你说的那样在 BufferedImage 上同步实际上应该有帮助。但请注意，您必须同步来自*所有*线程的*所有访问，**包括只读访问*。所以我的猜测是，在某些组件（应该是 AWT 线程）上绘制 BufferedImage 的线程在没有同步的情况下这样做，因此会看到陈旧的值。

 **但是，我建议不要在多个线程之间共享一个 BufferedImage，而是给每个线程一个可以绘制的单独图像。然后，在所有线程完成后，将它们的工作组合到 AWT 线程中的新图像上。

另外，如果您还没有这样做，我建议您使用[ExecutorService 。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)它的优点是[可调用](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)任务（在您的情况下是工作线程的图像部分）的返回值的可见性问题由库类处理。

如果将这两种方法结合起来，就不需要进行任何手动同步，这总是一件好事（因为很容易出错）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:21:55.760

缓冲图像可能不是线程安全的，因为它们的数据可能存在于显卡上。但是，这可以被覆盖。通过使用`((DataBufferInt) image.getRaster().getDataBuffer()).getData()`高速全图绘制的秘密技术（数据缓冲区类型取决于您选择的图像类型），您将获得未加速的图像。只要您从不两次写入同一个像素，这在理论上应该是完全安全的。但请记住在从图像中读取像素之前以某种方式加入（）您的线程。实际上并不推荐来自线程的 join() 方法，因为这需要线程死亡。

相关说明：您看到的闪烁可能是 awt 呈现到屏幕的方式的产物。它以即时模式运行，这意味着您执行的每个绘图操作都会立即更新屏幕。这会减慢将多个对象直接渲染到窗口的速度。您可以通过实施双缓冲策略来解决闪烁问题。我喜欢绘制一个中间图像，然后只将该图像绘制到屏幕上。**

# jquery - 当我选择工具栏下拉菜单时，我的 CKEditor 实例正在获取“模糊”事件

> ID：12707184
> 
> 赞同：0
> 
> 时间：2012-10-03T11:05:09.430
> 
> 标签：jquery, ckeditor

我的页面有一个文本区域，它是一个 CKEditor 实例。当用户离开文本区域时，内容应该保存。我遇到的问题是当我尝试从工具栏中选择一个下拉项时触发了“模糊”事件（例如，如果我突出显示文本区域然后尝试从下拉列表中应用格式），所以如果我使用此功能，内容保存（在应用样式之前），然后编辑器被销毁。

我的代码如下：

```
// Initially, colName is a variable which stores the name of the column being edited
// The textarea id is editText_colName
$('#editText_' + colName).ckeditor({
            toolbar : 'Basic',
            format_tags : 'h1;h2;h3;p',
            resize_enabled : false
});
var editor = $('#editText_' + colName).ckeditorGet();
editor.on('blur', function() {
    // Get content of text editor, and save
    var data = $('#editText_' + colName).val();
    // ... save data ...
    // ... on success, do the following ...
    editor.destroy();
    $('#editText_' + colName).remove();
}); 
```

如何确保仅在用户离开编辑器时才达到模糊功能，而不是在他们从工具栏中选择菜单时才达到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:23:50.590

这是我想出的解决方案。

我所做的是在进行模糊之前检查鼠标是否位于编辑器区域之外。如果它不在编辑器区域之外，则意味着模糊事件来自对话框打开或下拉列表，所以我什么也不做。

它不在 jquery 中，因为我的项目使用 ADF，但我认为您可以轻松地将代码转换为 jquery。

这是代码：

```
//onBlur listener
MyComponent._handleBlur = function (event)
{
    var editor = event.editor;

    //blur only if the mouse is outside the ckeditor container.
    if(MyComponent._isMouseOutsideElement(event.editor.container.$))
    {
        editor.__hasFocus = false;
        //do your stuff
    }
}

//onFocus listener
MyComponent._handleFocus = function (event)
{
   var editor = event.editor;

   //focus only if it doesn't already have the focus.
   if(!editor.__hasFocus)
    {
        editor.__hasFocus = true;
        //do your stuff
    }
}

//mousemove listener that saves the mouse position.
MyComponent._onMouseMove = function(event)
{
    var posx = 0;
    var posy = 0;

    if (event.pageX || event.pageY)     
    {
        posx = event.pageX;
        posy = event.pageY;
    }
    else if (event.clientX || event.clientY)     
    {
        posx = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
        posy = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;
    }
    MyComponent._mousePosition = [posx, posy];
}

//find the absolute position of an element in a document
MyComponent._getElementPosition = function (element) 
{
    var x = 0; 
    var y = 0;
    do 
    {
        x += element.offsetLeft;
        y += element.offsetTop;
        element = element.offsetParent
    }
    while (element);

    return [x,y];
}

//indicate if the mouse is outside the editor
MyComponent._isMouseOutsideElement = function (element) 
{
    var positionEditor = MyComponent._getElementPosition(element)

    var top = positionEditor[1];
    var bottom = top + parseInt(window.getComputedStyle(element,null).height);
    var left = positionEditor[0];
    var right = left + parseInt(window.getComputedStyle(element,null).width);

    var mouseX = MyComponent._mousePosition[0];
    var mouseY = MyComponent._mousePosition[1];

    return mouseX <= left || mouseX >= right || mouseY <= top || mouseY >= bottom;
}

document.onmousemove = MyComponent._onMouseMove;

editor.on('focus', MyComponent._handleFocus);
editor.on('blur', MyComponent._handleBlur); 
```

我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:51:00.110

我假设您使用的是 CKEditor 3.6.x。您所观察到的实际上是一个错误。它已在[CKEditor 4 beta](http://ckeditor.com/ckeditor-4-beta)中修复。您还可以检查[最新的夜间版本](http://nightly-v4.ckeditor.com/)以查看它现在是否正常工作。

抱歉，我们正在尽力而为 ;)

# networking - 如果我知道 IP，我可以跟踪活动吗？

> ID：12707191
> 
> 赞同：0
> 
> 时间：2012-10-03T11:05:35.973
> 
> 标签：networking, ip, trace

假设我有一个用户 xxxx 的 IP，那么使用该 IP 可以跟踪用户正在进行的所有活动吗？我怎样才能做到这一点 ？

我如何检查用户打开了哪些网页或类似的东西

请指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:23:52.017

你不能。流量是点对点的，知道一个点的地址并不足以知道去往/来自该点的流量。这就像仅仅因为您知道他们的家庭地址而询问您是否可以阅读某人（蜗牛）的邮件。

为了完全“窥探”它，您需要处于所有流量都通过您的节点的中间（例如让邮递员给您邮件，然后您将其交给房主）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:22:52.290

如果你有一台机器，来自用户的流量正在到达它（例如你连接到同一个交换机），那么可能是的。最简单的方法是使用网络嗅探器（Windows 的 Wireshark，Linux 的 tcpdump）。

但是，如果使用 surf SSL 安全站点（又名 https），您将只能看到加密内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:43:22.847

地理位置不准确，因为 IP 地址数据的主要来源是区域互联网注册机构。他们不保存有关单个 IP 地址信息的数据库，而是有关已分配给某些组织的 IP 地址范围的信息。这样的组织可以自由支配他们获得的 IP 地址，并且不需要向 RIR 提供位置信息。换句话说，只有您的 ISP 知道您的确切位置。如果您想找到用户的位置，您必须询问您的 ISP，他们很可能会拒绝您的请求。

您无法嗅探从某人发送的数据包，除非您属于同一子网 - 您必须连接到同一交换机并与该用户位于同一虚拟 LAN 上。即使您以某种方式找到用户的物理位置并连接到同一个交换机，ISP 也很可能已经设置了端口安全性，这将拒绝访问您的 MAC 地址。

总之，除非您已经连接到同一个交换机，否则您无法跟踪该用户的活动。

如果您连接到同一台交换机，则可以安装一种流行的数据包嗅探器实用程序，例如 Wireshark，并将其设置为混杂模式。

# java - 如何在java中直接用\n检索数据？

> ID：12707194
> 
> 赞同：0
> 
> 时间：2012-10-03T11:05:37.207
> 
> 标签：java

假设我输入`katheline\njoseph`了 db 表的列（数据类型-CLOB）。

在 java 端，我希望 o/p 为：

```
katheline

Joseph 
```

ie \n 应该在java 端被识别为换行符。

java中是否有任何一种方法可以检索带有\n作为换行符的db列。

我不想做任何操作......例如。不希望使用字符串 Tokenizer 类或替换方法。他们工作正常，但我正在寻找直接方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:22:42.473

`\n`只是您可以在字符串中写入字符数 10（“换行符”）的一种方式。如果您从数据库中检索该字符，它将在您的字符串中。您可以遍历字符并验证它是：

```
for(int i=0; i<value.length(); i++)
{
   char c = value.charAt(i);
   int code = value.codePointAt(i);
   System.out.println(c + " - " + code);
} 
```

它应该打印：

```
A - 65
B - 66

 - 10
C - 67 
```

为了：

```
AB
C 
```

**手动 SQL**

在 SQL 中：尝试`char(10)`或类似的东西。这取决于 RDBMS。

**用Java替换**

如果您无法将 DB 中的值转换为真正的换行符，那么您可以执行以下操作：

```
value.replaceAll("\\\\n", "\\n"); 
```

它接收一个正则表达式：`\\n`表示 bar 和 n 以及一个替换：`\n`

当我在写一个 Java 字符串时，我必须转义条，所以这就是为什么使用这么多条的原因。

**用换行符将值写入 DB**

永远不要将值写为文字 SQL：

```
insert into .... values ('myvalue'); 
```

使用参数：

```
insert into... values (?) 
```

和

```
preparedStatement.setParam(1, myValue); 
```

# javascript - 选中复选框时禁用表单字段

> ID：12707195
> 
> 赞同：2
> 
> 时间：2012-10-03T11:05:38.340
> 
> 标签：javascript, html, forms

要查看我所指的表格，请访问 [http://www.pazzle.co.uk/index.php?main_page=product_info&cPath=6_1&products_id=3](http://www.pazzle.co.uk/index.php?main_page=product_info&cPath=6_1&products_id=3)

只需将其添加到购物车，然后按结帐。

你看到的那个表格，当它被选中时，我试图禁用复选框下方的字段（仅限运输详细信息）。我怎样才能做到这一点？

对不起，我不能直接复制代码，因为它太大了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:59:59.280

您需要编辑页面上的 javascript。

[http://jsfiddle.net/CPjpt/5/](http://jsfiddle.net/CPjpt/5/)

翻转复选框几次，你会看到它工作

```
<script type="text/javascript">
$(document).ready(function(){
//Initalize
    if($("#shippingAddress-checkbox").attr("checked") == "checked")
    {
        $("#shippingField input:not(#shippingAddress-checkbox), #shippingField select").attr("disabled", "disabled");
    }
    else
    {
        $("#shippingField input:not(#shippingAddress-checkbox), #shippingField select").removeAttr("disabled");               
    }

    //Setup action
    $("#shippingAddress-checkbox").click(function(){
       if($(this).attr("checked") == "checked")
       {
           $("#shippingField input:not(#shippingAddress-checkbox), #shippingField select").attr("disabled", "disabled");
       }
       else
       {
           $("#shippingField input:not(#shippingAddress-checkbox), #shippingField select").removeAttr("disabled");               
       }
    });​
});
</script> 
```

基本上，当单击该复选框时，将所有输入字段设置为禁用属性等于禁用。当该框取消选中远程禁用属性时。

# php - 最适合我的网站的 HTML5 音频/视频播放器？

> ID：12707202
> 
> 赞同：-5
> 
> 时间：2012-10-03T11:05:57.600
> 
> 标签：php, jquery, html

我想知道我的网站最好的 html5 音频/视频。我用谷歌搜索时可以找到几个玩家，但不确定该使用哪一个。它应该可以在所有具有自动 Flash 后备功能的浏览器/设备中运行

做了一些研究，发现[https://www.mediaelementjs.com/](https://www.mediaelementjs.com/)是一个非常好的 HTML5 播放器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:11:18.417

我认为最好的 HTML5 视频播放器是

```
<video width="320" height="240" controls="controls">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser doesn't support HTML5 Video
</video> 
```

和音频播放器是

```
<audio controls="controls">
  <source src="horse.ogg" type="audio/ogg">
  <source src="horse.mp3" type="audio/mpeg">
  Your browser doesn't support HTML5 Audio
</audio> 
```

它很棒，适用于所有 html5 浏览器，而且很棒

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:13:17.157

听起来您正在寻找[jwPlayer](http://www.longtailvideo.com/players)

# json - Cocoa - 解析 JSON 字符串

> ID：12707203
> 
> 赞同：1
> 
> 时间：2012-10-03T11:05:59.100
> 
> 标签：json, cocoa, nsjsonserialization

我知道网络上有很多关于这个的例子，但我已经尝试了一切，但我错过了一些东西。我想将 JSON 字符串解析成字典。

E 有服务器的这个响应：

```
{"type":"response", "action":"mkac", "result":"[{"Band":"Adele","Hits":422},{"Band":"Bryan Adams","Hits":93},{"Band":"Adai","Hits":30},{"Band":"Adamo","Hits":18},{"Band":"Adelle","Hits":15}]"} 
```

我做：

```
NSError *parseError = nil;
                        NSDictionary *outputDictionary = 
                        [NSJSONSerialization JSONObjectWithData: [output dataUsingEncoding:NSUTF8StringEncoding]
                                                        options: NSJSONReadingMutableContainers
                                                          error: &parseError];
                        NSLog(@"server said: %@", [outputDictionary objectForKey:@"result"]); 
```

但是 outputDictionary 总是给我空值。

任何人都可以帮助我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:30:00.587

是的，您的 json 格式错误。如果你正确格式化它，你会明白为什么：

```
{
  "type":"response", 
  "action":"mkac", 
  "result":"[{"Band":"Adele","Hits":422},{"Band":"Bryan Adams","Hits":93},{"Band":"Adai","Hits":30},{"Band":"Adamo","Hits":18},{"Band":"Adelle","Hits":15}]"
} 
```

您会注意到 for 的值以字符`"result"`开头`"`，这意味着该值在技术上是`"[{"`. 然而在那之后，它遇到了`Band`。由于`Band`没有用双引号括起来（或前面有 a`,`或 a`}`等），因此会产生解析错误。如果您在 之前`[{`和之后立即删除双引号`}]`，则它会正确解析：

```
{
  "type":"response", 
  "action":"mkac", 
  "result":[
    {
      "Band":"Adele",
      "Hits":422
    },
    {
      "Band":"Bryan Adams",
      "Hits":93
    },
    {
      "Band":"Adai",
      "Hits":30
    },
    {
      "Band":"Adamo",
      "Hits":18
    },
    {
      "Band":"Adelle",
      "Hits":15
    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:53:07.837

我弄清楚发生了什么。json 字符串无效，因为 "[ 我必须用 [ 替换

# oracle - 封装规范中的程序

> ID：12707204
> 
> 赞同：12
> 
> 时间：2012-10-03T11:06:03.667
> 
> 标签：oracle, stored-procedures, plsql, scope, package

我有一个名为**save_db_values的包**

我有两个名为**store_records**的过程和另一个名为**db_activities**的过程。 **db_activities**将通过传递 db_activities 中的所有值从我的应用程序中**调用**，我将调用**store_records**过程进行插入和删除。

我需要在包规范中定义**store_records过程吗？**当我没有在规范中定义 store_records 时，我收到错误`store_records not declared in this scope.`

**store_records**过程我不想公开，因此我没有添加规范。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-03T11:29:05.397

如果您不希望某些程序公开可用，您可能不会在包规范中声明它们。仅在包体中声明它们。您所面临的错误的原因是包体中程序的声明顺序或缺少前向声明。例如：

```
 create or replace package Test_pkg as
  2    procedure Proc1;
  3  end;
  4  /

Package created

create or replace package body Test_pkg as
  2  
  3    procedure proc1 is
  4    begin
  5      proc2;
  6    end;
  7  
  8    procedure Proc2 is
  9    begin
 10      dbms_output.put_line('proc2 is being executed');
 11    end;
 12  
 13  end;
 14  /

Warning: Package body created with compilation errors
Error: PLS-00313: 'PROC2' not declared in this scope 
```

发生这种情况是因为我们正在调用`Proc2`稍后在包中声明的哪个。在这种情况下，我们的选择是：

`pro2`在调用它的过程之前声明

```
 create or replace package body Test_pkg as
  2  
  3  
  4    procedure Proc2 is
  5    begin
  6      dbms_output.put_line('proc2 is being executed');
  7    end;
  8  
  9    procedure proc1 is
 10    begin
 11      proc2;
 12    end;
 13  
 14  end;
 15  /

Package body created 
```

使用前向声明。

```
create or replace package body Test_pkg as
  2  
  3    procedure Proc2;
  4  
  5    procedure proc1 is
  6    begin
  7      proc2;
  8    end;
  9  
 10    procedure Proc2 is
 11    begin
 12      dbms_output.put_line('proc2 is being executed');
 13    end;
 14  
 15  
 16  end;
 17  /

Package body created

SQL> exec test_pkg.Proc1;

proc2 is being executed

PL/SQL procedure successfully completed 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T11:27:49.063

您可以只在主体中声明过程，但它们出现的顺序是相关的；调用过程必须在被调用过程之后定义。或者您使用前向声明使其更容易：

```
package save_db_values is
   procedure db_activities;
end save_db_values;

package body save_db_values is
   procedure store records; -- forward declaration

   procedure db_activities is
   begin
     store_records;
   end;

   procedure store records is
   begin
      null;
   end;
end save_db_values; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T06:46:54.657

这是因为在 package body 中写入程序的主体而发生的。如果您没有在包规范中声明任何过程，那么您应该首先编写它。

它会工作:)

# mysql - MySQL：如何组合从另一个表中多次引用的列并分配正确的别名？

> ID：12707208
> 
> 赞同：0
> 
> 时间：2012-10-03T11:06:11.223
> 
> 标签：mysql

我在这里提出的问题可能看起来很傻，但它让我有点抓狂，因为我不明白 MySQL 连接是如何工作的。

我有 2 张桌子：

```
user;
+--------------------+--------------+------+-----+---------+-------+
| Field              | Type         | Null | Key | Default | Extra |
+--------------------+--------------+------+-----+---------+-------+
| id                 | int(11)      | NO   | PRI | NULL    |       |
| name               | varchar(128) | NO   |     | NULL    |       |
+--------------------+--------------+------+-----+---------+-------+

game;
+--------------------+--------------+------+-----+---------+-------+
| Field              | Type         | Null | Key | Default | Extra |
+--------------------+--------------+------+-----+---------+-------+
| id                 | int(11)      | NO   | PRI | NULL    |       |
| source_id*         | int(11)      | NO   |     | NULL    |       |
| target_id*         | int(11)      | NO   |     | NULL    |       |
+--------------------+--------------+------+-----+---------+-------+ 
```

`game.source_id`并且`game.target_id`是引用`user.id`.

现在我想从`game`表中选择所有内容，并且我想在结果中包含 2 个用户的名称，因为`game`有 2 个用户。我希望这些列被命名为`target_name`和`source_name`具体。

**试过这个查询**：

```
SELECT
    g.id,
    u.name
FROM
    game g
RIGHT JOIN
    user u
ON
    u.id = g.source_id 
OR
    u.id = g.target_id
WHERE
    g.source_id = 1
OR
    g.target_id = 1
; 
```

但正如您可能已经注意到的那样，我没有别名`u.name`为`target_name`or`source_name`因为我不知道如何做到这一点，最终结果如下所示：

```
+----+------+
| id | name |
+----+------+
| 1  | bo   |
| 1  | al   |
| 2  | jo   |
| 2  | jay  |
+----+------+ 
```

如您所见，`game`结果中出现了多次。

**预期结果：**

```
+----+-------------+-------------+
| id | target_name | source_name |
+----+-------------+-------------+
| 1  | bo          | al          |
| 2  | jo          | jay         |
+----+-------------+-------------+ 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:10:57.120

您需要在桌子上加入桌子`user`两次`game`才能获得游戏的两个名称。我之所以添加`COALESCE`是因为它对于显示列的描述性值很有用。`NULL`例如，如果源或目标没有值，则将显示的值是`-no value-。

```
SELECT  a.*,
        COALESCE(b.name,'-no source-') sourceName,
        COALESCE(c.name,'-no target-') targetName
FROM    game a
        LEFT JOIN `user` b
            on b.id = a.source_ID
        LEFT JOIN `user` c
            on on c.id = a.target_id
-- your condition here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:12:06.400

```
SELECT
    g.id,
    source.name,
    target.name
FROM
    game g
LEFT JOIN
    user source
ON
    source.id = g.source_id 
LEFT JOIN
    user target
ON
    target.id = g.target_id
WHERE
    g.source_id = 1
OR
    g.target_id = 1
; 
```

where 子句是可选的，旨在搜索用户 id=1 玩过的所有游戏，作为源或作为目标。

# jquery - 在页面加载时加载 googlemaps

> ID：12707219
> 
> 赞同：-1
> 
> 时间：2012-10-03T11:06:43.227
> 
> 标签：jquery, google-maps-api-3

嗨，我正在尝试在加载新页面时加载 googlemaps ..但是下面的 itz 不起作用是我的代码

```
 <script type="text/javascript">

    var query = location.href.substring((location.href.indexOf('?')+1), location.href.length);
    if(location.href.indexOf('?') < 0) query = '';
    querysplit = query.split('&');
    query = new Array();

    for(var i = 0; i < querysplit.length; i++){
    var namevalue = querysplit[i].split('=');
    namevalue[1] = namevalue[1].replace(/\+/g, ' ');
    query[namevalue[0]] = unescape(namevalue[1]);
    }
    window.onload = function(lat,lng){
    // Do stuff with query string data here.
alert(query['latitute']);
    var map;
    //code write to load map on right side
        var myLatlng = new google.maps.LatLng(lat,lng);
        map = new google.maps.Map(document.getElementById('map'), {
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        center: myLatlng,
                        zoom: 10});
    }
    </script> 
```

我的目标是，当我单击首页上的链接时，第二页应加载地图，该地图从首页获取硬编码的 latlng。警报语句正在运行，但地图加载却没有。尝试在 jquery 或 js 中实现它。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:28:01.047

您是如何获得**lat**和**lng**值的？您是否尝试过使用此变量显示警报？

此外，如果您的第一个警报有效，请尝试以下操作：

```
window.onload = function() {
    var lat = parseFloat(query['latitute']);
    var lng = parseFloat(query['longitute']);
    var map;
    var myLatlng = new google.maps.LatLng(lat, lng);

    map = new google.maps.Map(document.getElementById('map'),
        {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: myLatlng,
            zoom: 10
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:19:24.213

看起来你正在尝试做这样的事情：

[http://www.geocodezip.com/v3_MW_example_linktothis.html?lat=42.359783&lng=-71.092800&zoom=14&type=h](http://www.geocodezip.com/v3_MW_example_linktothis.html?lat=42.359783&lng=-71.092800&zoom=14&type=h)

(it parses the query string and centers the map at the coordinates obtained) But modifying the "lat" to be "latitude" and "lng" to be longitude

# django - 使用 Fabric 自动启动 virtualenv 和 Django 开发服务器？

> ID：12707220
> 
> 赞同：4
> 
> 时间：2012-10-03T11:06:45.807
> 
> 标签：django, virtualenv, fabric

> **可能重复：**
> [以部署用户身份通过​​结构激活 virtualenv](https://stackoverflow.com/questions/1180411/activate-a-virtualenv-via-fabric-as-deploy-user)

有人建议我尝试使用fabric 将Django 部署到生产服务器，并使用python 而不是bash 来自动化任务。

我想轻松启动并自动激活我的 virtualenv，并在其中启动 Django 开发服务器。

我创建了一个名为 fabfile.py 的文件：

```
from fabric.api import local

def activate_env():
    local("source /.../expofit_env/bin/activate")

def run_local_server():
    local("/.../server/manage.py runserver")

def start():
    activate_env()
    run_local_server() 
```

但是，当我跑步时

```
fab start 
```

我收到以下消息：

```
[localhost] local: source /.../expofit_env/bin/activate
/bin/sh: 1: source: not found

Fatal error: local() encountered an error (return code 127) while executin
'source /.../expofit_env/bin/activate' 
```

我究竟做错了什么？

* * *

**更新**

根据 Burhan Khalid 的建议，我尝试了以下方法：

```
....
def activate_env():
    local("/bin/bash /.../expofit_env/bin/activate")
.... 
```

只跑

```
fab activate_env 
```

结果：

```
[localhost] local: /bin/bash /.../expofit_env/bin/activate

Done. 
```

但是执行后，virtualenv 没有被激活。对于以下代码：

```
def start_env(): 
    with prefix('/bin/bash /.../expofit_env/bin/activate'): 
        local("yolk -l") 
```

我仍然得到一个错误，好像 virtualenv 没有被激活。

```
alan@linux ~/Desktop/expofit $ fab start_env
[localhost] local: yolk -l
/bin/sh: 1: yolk: not found 
```

当我手动激活 virtualenv 时，蛋黄工作正常：

```
alan@linux ~/.../expofit_env $ source bin/activate
(expofit_env)alan@linux ~/.../expofit_env $ yolk -l

DateUtils       - 0.5.2        - active 
Django          - 1.4.1        - active 
Python          - 2.7.3rc2     - active development (/usr/lib/python2.7/lib-dynload)
.... 
```

* * *

**更新**

[从这个问题](https://stackoverflow.com/questions/1180411/activate-a-virtualenv-via-fabric-as-deploy-user?rq=1)尝试了一种新方法。

```
from __future__ import with_statement
from fabric.api import *
from contextlib import contextmanager as _contextmanager

env.activate = 'source /.../expofit_env/bin/activate'

@_contextmanager
def virtualenv():
    with prefix(env.activate):
        yield

def deploy():
    with virtualenv():
        local('yolk -l') 
```

给出同样的错误：

```
[localhost] local: yolk -l
/bin/sh: 1: source: not found

Fatal error: local() encountered an error (return code 127) while executing 'yolk -l'

Aborting. 
```

即使面团第一个命令也没有错误地通过：

```
alan@linux ~/.../expofit_env/bin $ fab virtualenv

[servername] Executing task 'virtualenv'

Done. 
```

**更新**

可以`local`使用自定义 shell 运行。

```
from fabric.api import local

def start_env():
        local('source env/bin/activate',shell='/bin/bash') 
```

但是，这并没有像手动完成一样激活 virtualenv。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T00:13:31.887

要从 fab 文件中启用 virtualenv，您需要运行以下命令：

```
def task():

    # do some things outside the env if needed 

    with prefix('source bin/activate'):
        # do some stuff inside the env
        pip install django-audiofield 
```

with bloc 中的所有命令都将在 virtualenv 中执行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:20:17.203

默认情况下，您使用的是`sh`shell，并且`source`命令是 bashism（即，仅在 bash 中有效的东西）。

要激活您的环境，您需要直接使用 bash 执行它。`/bin/bash /path/to/bin/activate`.

# encoding - 如何在录制和输入实时视频流之间同步？

> ID：12707224
> 
> 赞同：1
> 
> 时间：2012-10-03T11:07:03.917
> 
> 标签：encoding, ffmpeg, directshow, video-capture, video-recording

我正在做一个项目，我正在从一些输入视频设备接收原始帧。我正在尝试使用 FFMPEG 库将这些帧写入视频文件中。我无法控制从输入源获得的帧速率。该帧速率在运行时也有所不同。现在我的问题是如何在录制的视频和即将到来的视频之间同步。根据我在 FFMPEG 中设置的帧速率和我收到的录制视频播放的实际帧速率比输入视频快或慢。我尝试按照以下链接在编码视频中添加时间戳（作为 numOfFrames），但这没有帮助。

[ffmpeg速度编码问题](https://stackoverflow.com/questions/5858333/ffmpeg-speed-encoding-problem)

请告诉我一种同步两者的方法。这是我第一次使用 FFMPEG 或任何多媒体库，因此任何示例都将受到高度赞赏。

我正在使用 directshow ISampleGrabber 接口来捕获这些帧。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:56:54.603

所以最后我想出了如何做到这一点。这是如何..

首先，我从不为帧提供时间戳的源过滤器的 PREVIEW 引脚进行预览。所以应该从源过滤器的捕获引脚获取帧。比在`SampleCB`回调函数中我们无法使用`IMediaSample::GetTime()`. 但是这个函数会以 100ns 为单位返回时间。FFMPEG 要求它以 1/time_base 为单位。这里 time_base 是所需的帧速率。所以directshow时间戳需要先转换成FFMPEG单位。比我们可以在`AVFrame::pts`ffmpeg的变量中设置pts。需要考虑的另一件事是视频的第一帧在 FFMPEG 中的时间戳应该为 0，因此在从 directshow 时间戳转换为 FFMPEG 时需要注意这一点。

谢谢你

# php - 如何选择元素所在的数组

> ID：12707226
> 
> 赞同：0
> 
> 时间：2012-10-03T11:07:08.490
> 
> 标签：php, arrays

我想选择元素所在的数组

```
Array ( 

  [0] => Array ( [0] => woman [synonym] => lady [1] => girl [word] => girl )

  [1] => Array ( [0] => man [synonym] => man [1] => boy [word] => boy )

) 
```

如果我使用

```
array_search('girl', $array); 
```

它只会返回密钥，但我想选择`num`数组的，然后再获取该数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:12:19.547

我想你正在寻找[`array_filter()`](http://php.net/manual/en/function.array-filter.php)：

```
function filter($array) {
    return in_array('girl', $innerArray);
}
$filter = array_filter($yourArray, 'filter'); 
```

在一行中使用 PHP-5.4 回调的相同概念：

```
array_filter($array, function($innerArray) {return in_array('girl', $innerArray)}); 
```

# php - 文件上传导致文件大小为 0 且错误代码为 0

> ID：12707230
> 
> 赞同：1
> 
> 时间：2012-10-03T11:07:23.897
> 
> 标签：php, file, upload

我正在尝试将图像上传到 php 脚本。我有一个非持久性错误，导致上传的某些图像的文件大小为 0。我尝试将 _FILES 数组打印到我的日志文件中，它显示错误代码为 0，应该没问题.

这些行：

```
foreach($_FILES['image_file'] as $key => $val){
      error_log(date('j/n/o H:i:s')." ". $key ." => ".$val. "\n", 3,$log_path);
    } 
```

在日志文件中给我这些：

1.  2012 年 3 月 10 日 12:12:54 名称 => 59175248636.jpg
2.  2012 年 3 月 10 日 12:12:54 类型 => 图像/jpeg
3.  2012 年 3 月 10 日 12:12:54 tmp_name => C:\WINDOWS\Temp\php411F.tmp
4.  2012 年 3 月 10 日 12:12:54 错误 => 0
5.  2012 年 3 月 10 日 12:12:54 大小 => 0

从日志文件中可以看出，这个脚本在 Windows 机器上运行，我对此知之甚少。我已经将 php.ini 中的 post_max_size 更改为 10M，并将 upload_max_size 更改为 10M。

我对这个问题感到震惊。当我在自己的设备上进行测试时，它工作正常，但由于某种原因，当我的测试人员尝试时，它失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:37:52.323

编辑 - 试试这个：

我认为您可能需要将 $_FILES['file'] 更改为 $_FILES['image_file'] 才能使用您的设置。为了便于阅读，我将其保留如下...

```
if ($_FILES['file']['error'] === UPLOAD_ERR_OK && $_FILES['file']['size'] > 0){

   ... upload was successful ...

}elseif($_FILES['file']['error'] === UPLOAD_ERR_OK && $_FILES['file']['size'] == 0){

   die("Upload failed, random upload issue... please try again);
   // change this error to something more useful... (leave this error in for testing)

}else {

   die("Upload failed with error code " . $_FILES['file']['error']);

} 
```

这并不能解决随机文件大小问题，但它将允许您的代码/进程继续。将其视为上传失败并告诉用户重试...

[使用Marc B](https://stackoverflow.com/users/118068/marc-b)发布的这个[stackoverflow 帖子中的代码](https://stackoverflow.com/questions/7959615/filesfilesize-returning-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-10T19:33:39.487

由于我不时遇到这种情况，我想我只会发布可能发生这种情况的一个原因：如果您尝试从压缩文件的 Windows 资源管理器视图中拖放文件（双击压缩文件，它就像一个文件夹一样打开）到您的上传者。我经常使用 DropzoneJS，默认情况下，它会立即处理这些文件并将其推送到我的服务器，最终看到一个 0 字节的文件，没有文件上传错误。因此，如果您的用户正在执行上述操作，那可能就是您最终得到此类文件的原因。

# javascript - 从javascript中的字符串中删除额外的包

> ID：12707232
> 
> 赞同：0
> 
> 时间：2012-10-03T11:07:27.380
> 
> 标签：javascript, ruby-on-rails-3

我在`"\r\n Departing\r\n "`用`"Departing"`javascript 替换时遇到问题。

请建议最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:13:57.330

这应该有效：

```
"\r\n Departing\r\n ".replace(/[^a-z]/gmi,''); 
```

g => 全局
m => 多行
i => 不区分大小写

[^az] => 字符，a 到 z，但由于不区分大小写，AZ 也不会被替换。

如果字符串中可能出现数字，您可以很容易地防止它们被替换：

```
"\r\n Departing2\r\n ".replace(/[^a-z0-9]/gmi,''); 
```

如果您只想删除换行符并修剪剩余的字符串：

```
"\r\n Departing2\r\n ".replace(/[\r\n]/gm,'').replace(/^\s+|\s+$/g,'');
"\r\n We're Departing, too\r\n!".replace(/[\r\n]/gm,'').replace(/^\s+|\s+$/g,''); 
```

应该很好地为你处理事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:11:47.713

这应该有效：

```
"\r\n Departing\r\n ".trim() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:12:16.753

使用正则表达式。

```
str.replace(/\s/g,"");    /*  "\r\n Departing\r\n "(/\s/g,"") = "Departing" */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:14:24.677

```
var mystring = "\r\n Departing\r\n ";
mystring = mystring.replace(/\r\n/g, ""); 
```

演示：[JSFiddle](http://jsfiddle.net/cxgus/7/)

# python - 我想在python中创建一个每5秒运行一次的函数，直到变量达到100%

> ID：12707235
> 
> 赞同：0
> 
> 时间：2012-10-03T11:07:40.523
> 
> 标签：python

所以我想创建一个函数来打印重建的进度和完成重建的剩余时间。但是一旦重建达到 100%，它就需要结束。这是我到目前为止所拥有的：

```
def progress():
    # This prints out the time left until rebuild is done.
    loudEchoCMD("storage::rebuild-eta")
    # This prints out the % of the rebuild that is done.
    rebuildProgress = loudEchoCMD("storage::rebuild-progress") 
    print rebuildProgress 
    if rebuildProgress != '100%':
        global t 
        t = threading.Timer(5.0, progress)
        t.start()
    else:
        t.cancel() 
```

当我开始重建过程时，它将首先完成该过程，然后启动线程，而不是让线程每五秒打印一次进度和 ETA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:03:34.723

> 当我开始重建过程时，它将首先完成然后开始线程

在不同的线程中启动重建过程。

```
import threading
build = threading.Thread(target = start_rebuild)
build.start()
progress()
build.join()  # wait for build thread to end 
```

另外，假设`progress`完成时间不到 5 秒，我认为省略`global t`and就足够了`t.cancel`：

```
def progress():
    # This prints out the time left until rebuild is done.
    loudEchoCMD("storage::rebuild-eta")
    # This prints out the % of the rebuild that is done.
    rebuildProgress = loudEchoCMD("storage::rebuild-progress") 
    print rebuildProgress 
    if rebuildProgress != '100%':
        t = threading.Timer(5.0, progress)
        t.start() 
```

# android - JNI GetObjectClass 总是返回类的新对象？

> ID：12707237
> 
> 赞同：0
> 
> 时间：2012-10-03T11:07:43.787
> 
> 标签：android, android-ndk, java-native-interface

我想知道在**jni**

```
jclass cls = (*env)->GetObjectClass(env, obj); 
```

它返回类的**新对象**或**当前对象**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:32:47.987

这取决于JVM。例如，在 Android 上，类是单例的，因此 GetObjectClass() 如果类已加载，则返回当前实例。

# python - IRC 消息发送到服务器以向频道中的用户发送“耳语”消息

> ID：12707239
> 
> 赞同：0
> 
> 时间：2012-10-03T11:08:05.013
> 
> 标签：python, protocols, irc

我正在用 Python 从头开始​​编写一个 IRC 机器人，并且进展顺利。

我似乎无法追踪的一件事是如何让机器人向私人（仅对他们可见）但在频道内而不是单独的 PM/对话中的用户发送消息。

我知道它一定在某个地方，但我在文档中找不到它。

我不需要完整的功能，只需要命令关键字来从服务器调用操作（例如PRIVMSG）。

谢谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:29:54.893

您在寻找 / 通知吗？（见irchelp.org/irchelp/misc/ccosmos.html#Heading227）

# android - 3d 对象作为增强现实中的标记

> ID：12707240
> 
> 赞同：0
> 
> 时间：2012-10-03T11:08:04.847
> 
> 标签：android, ios, 3d, augmented-reality

我想应用增强现实，我的应用程序必须检测 3d 对象作为标记或我用谷歌搜索的真实对象并找到一些正在做同样事情的工作，比如使用建筑物作为标记或任何其他地方，但它是通过 GPS 系统完成的我不想做那种事情，我需要进行标记检测，这已经在 Vuforia sdk 中为 2d 工作了。我想知道这是否有可能我可以使用 3d 对象或真实对象作为增强现实中的标记，如果是，那么您会建议我使用哪个 sdk 可以帮助我在 iPhone 和 android 等 Vuforia 中构建它。在此先感谢，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:20:48.557

Metaio 是一个相当易于使用的 AR SDK，可用于 Android 和 iPhone，具有 3D 跟踪功能：

[https://dev.metaio.com/sdk/tracking-configuration/optical-tracking-technologies/markerless-3d/](https://dev.metaio.com/sdk/tracking-configuration/optical-tracking-technologies/markerless-3d/)

然而，支持 3D 跟踪的无水印版本价格昂贵。一个免费的替代方案（目前）是使用 Metaio 制作的 Junaio 浏览器来提供 3D 跟踪 AR 体验：

[http://www.junaio.com/develop/quickstart/3d-tracking-and-junaio/](http://www.junaio.com/develop/quickstart/3d-tracking-and-junaio/)

我对它们都有经验，但我还没有使用 3D 跟踪功能，所以我不确定你是否可以跟踪实际的建筑物，但从演示中，诸如盒子和类似物体之类的东西似乎得到了很好的支持。

祝你好运！

# jquery - 播放前隐藏 YouTube 视频嵌入图像

> ID：12707244
> 
> 赞同：3
> 
> 时间：2012-10-03T11:08:34.300
> 
> 标签：jquery, html, iframe, youtube-api

我正在制作一个网站，我想嵌入一个 YouTube 视频。我的前辈讨厌 YouTube 的普通播放器布局，所以我对其进行了一些定制（没有按钮等）。问题是，当我打开网站页面时，YouTube 会显示一张图片（播放器大小，在我的情况下为 480p）并且该图片确实被破坏了。

我需要一些方法来获取 YouTube 嵌入代码并在其上放置图像。当我单击图像时，它应该会更改为 YouTube，然后自动开始播放视频。这样我可以避免人们在打开页面时看到那个丑陋的预览图像。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T15:31:09.927

将带有图像的 div 放在要显示视频的任何位置：

```
<div id="coverimageforplayer"><img class="introvideo" src="video-cover.jpg" width="800" height="450" /></div> 
```

现在，添加以下 jquery 代码：

```
$('#coverimageforplayer').click(function() {
        var embedCode = '<iframe ...Your Youtube embed code></iframe>';
        $('#coverimageforplayer').html(embedCode);
    }); 
```

对我来说就像一个魅力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T11:14:10.647

如果视频被隐藏，Youtube 将不会播放视频，因此您可以尝试将自动播放设置为一个但隐藏 div，然后您可以使用 jQuery 将您的封面与视频“交换”。视频将加载并自动播放。

使用 jQuery：

```
<div id="youtubeplayer" style="display:none;">
<!-- Player code with &autoplay=1 -->
</div>
<div id="coverimageforplayer"><img src="wherever.png" /></div>

<script type="text/javascript">
$('#coverimageforplayer').click(function() {
$('#coverimageforplayer').replaceWith($('#youtubeplayer').show());
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:21:32.333

如果大部分访问者永远不会真正开始播放，我建议您使用一种方法，`img`在页面上只有标签（带有您想要的任何自定义图像），直到有人点击其中一个，此时您换入YouTube iframe 嵌入式播放器。这样你就可以避免提前加载播放器，除非你知道你确实需要它。

YouTube Direct Lite 代码库中有一个这样做的示例，包括在鼠标悬停时覆盖“播放”图标。您可以在以下位置查看现场演示

[http://ytdirectlite.appspot.com/static-min/submit.html](http://ytdirectlite.appspot.com/static-min/submit.html)

如果您登录该页面底部的提交界面，然后转到“我的 YouTube 视频”选项卡。

有几段代码可以处理这个问题，但最相关的位是

[https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/load.js#71](https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/load.js#71) https://code.google.com/p/youtube-direct-lite /source/browse/static/js/ytdl/player.js#17

# javascript - Javascript 大纲

> ID：12707246
> 
> 赞同：3
> 
> 时间：2012-10-03T11:09:00.720
> 
> 标签：javascript, documentation-generation, outline-view

对于 JavaScript 项目的文档，需要脚本文件的大纲，类似于[Eclipse](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcoutline.htm)或[Oxygen](http://oxygenxml.com/doc/ug-author/topics/outline-view-JavaScript.html)中的这些示例。

我只需要 JavaScript 文件的“树”结构，而不是完整的文档。是否有任何解析器以 JSON 或 XML 等任何格式输出此大纲树？我认为那里有东西，但实际上我找不到。

这里举个例子。

```
var someVar = "test";
function Test()
{

    this.value = false;

    this.main = function()
    {
        // do something
    };

} 
```

JSON 中的大纲

```
[
  {
    line:1,
    type:'var',
    name:'someVar'
  },
  {
    line:2,
    type:'function',
    name:'Test',
    inner:[
       {
          line:5,
          type:var,
          name:'value'
       },
       {
         line:7,
         type:'function',
         name:'main'
       }
    ]
  }
] 
```

也许不寻常，但这就是所需要的。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:33:33.310

[Esprima](http://esprima.org/)可能是一个不错的选择。另请参阅“ [JavaScript 解析器和扩展](https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-compile-to-JS)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:17:42.860

如果您指的是 JS 文档，请尝试：[http ://code.google.com/p/jsdoc-toolkit/](http://code.google.com/p/jsdoc-toolkit/)

# asp.net-mvc-3 - 创建单选按钮列表

> ID：12707249
> 
> 赞同：0
> 
> 时间：2012-10-03T11:09:11.310
> 
> 标签：asp.net-mvc-3

我正在使用 asp.net mvc3 创建单选按钮列表。我需要从控制器中获取一个***列表***并将其显示在视图中。对于视图中的每个相应列表，我都有“是/否”单选按钮，如果单选按钮为“是”，则需要在末尾为列表中的每个项目生成一个字符串，则为 1，否则为 0。

因此，例如，如果列表中有 10 个项目，那么我需要在视图中显示它们（项目的默认值为 false），然后在提交时生成一个字符串，其中字符串中的每个字符对应于每个项目的 bool 值在列表中。

谁能给我一个想法，我该如何在 mvc3 中做到这一点？我在这里先向您的帮助表示感谢。

**更新**

这是我正在尝试的代码：

我的班级有两个属性：

```
public List<Module> lstModules { get; set; } // gives the list of items

public List<bool> IsModuleActivelst { get; set; } //gives the bool values 
```

在控制器中，我需要为此创建一个列表和相应的布尔值。我被困在这里，无法生成代码。无论如何我会解释伪代码

```
public class MMController : Controller
{
    [HttpGet]
    public ActionResult Clients()
    {
        //I need to generate the list - using lstModules prop

        // Assign the list with the predefined values and if not just give the default values- using IsModuleActivelst  prop

     }
} 
```

在这里，我创建了视图：

```
 @foreach (var i in Model.lstModules)
{
    <div class="formlabel">
        <div align="right" class="label">

            @Html.LabelFor(model => model.lstModules):</div>
    </div>

    <div class="formelement">
     <label for="radioYes" class="visible-enable" style="cursor:pointer;position:relative;">
                @Html.RadioButtonFor(model => model.IsModuleActivelst, "True", new { @id = "radioYes", @style = "display:none;" })
               <span>Yes</span></label>
                <label for="radioNo" class="visible-disable" style="cursor:pointer;position:relative;">
                @Html.RadioButtonFor(model => model.IsModuleActivelst, "False", new { @id = "radioNo", @style = "display:none;" })
                 <span>No</span></label>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:45:22.793

我建议您首先定义一个视图模型，该模型将代表您需要在特定视图中使用的信息。到目前为止，您已经提到了用户需要使用单选按钮设置模块是否处于活动状态的模块列表（我个人会使用 True/False 状态复选框，但这是您自己的决定）：

```
public class ModuleViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool IsActive { get; set; }
}

public class MyViewModel
{
    public IEnumerable<ModuleViewModel> Modules { get; set; }
} 
```

然后你可以定义一个控制器来填充视图模型，渲染表单并有另一个动作来处理表单提交：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            // TODO: this information could come from a database or something
            Modules = new[]
            {
                new ModuleViewModel { Id = 1, Name = "module 1", IsActive = true },
                new ModuleViewModel { Id = 2, Name = "module 2", IsActive = true },
                new ModuleViewModel { Id = 3, Name = "module 3", IsActive = false },
            }
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return Content(
            string.Format(
                "Thank you for selecting the following values: {0}",
                string.Join(" ", model.Modules.Select(x => string.Format("model id: {0}, active: {1}", x.Id, x.IsActive)))
            )
        );
    }
} 
```

最后一部分是定义视图（`~/Views/Home/Index.cshtml`）：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.Modules)
    <button type="submit">OK</button>
} 
```

最后，将为 Modules 集合的每个元素自动呈现相应的编辑器模板 - 请注意模板的名称和位置很重要 - `~/Views/Shared/EditorTemplates/ModuleViewModel.cshtml`：

```
@model ModuleViewModel

<div>
    @Html.HiddenFor(x => x.Id)
    @Html.HiddenFor(x => x.Name)

    <h2>@Html.DisplayFor(x => x.Name)</h2>
    @Html.Label("IsActiveTrue", "Yes")
    @Html.RadioButtonFor(x => x.IsActive, "True", new { id = Html.ViewData.TemplateInfo.GetFullHtmlFieldId("IsActiveTrue") })
    <br/>
    @Html.Label("IsActiveFalse", "No")
    @Html.RadioButtonFor(x => x.IsActive, "False", new { id = Html.ViewData.TemplateInfo.GetFullHtmlFieldId("IsActiveFalse") })
</div> 
```

# qt - 从 qt 4.8 构建 qt 4.6

> ID：12707258
> 
> 赞同：0
> 
> 时间：2012-10-03T11:10:22.620
> 
> 标签：qt, qt4, qt-creator, qt4.8, qt4.6

我有一个项目`qt-creator`。
那台电脑有`Qt: 4.8.2`

我想在其上运行应用程序的计算机之一`Qt: 4.6.2`

我可以看到 qt-creator 在 QtVersions 项目下有一个选项，但我只有一个选项“ `Qt 4.8.1 (System)`”

我也想在`Qt 4.6.x`那里有一个选项，我该如何添加/安装它？

目标计算机：

```
kde4-config --version
Qt: 4.6.2
KDE Development Platform: 4.4.2 (KDE 4.4.2)
kde4-config: 1.0

uname -a
Linux fw-01 2.6.32-24-generic #41-Ubuntu SMP Thu Aug 19 01:12:52 UTC 2010 i686 GNU/Linux 
```

构建计算机：

```
kde4-config --version
Qt: 4.8.2
KDE Development Platform: 4.8.5 (4.8.5)
kde4-config: 1.0

uname -a
Linux rito 3.3.8-gentoo #3 SMP Thu Sep 13 10:11:22 CEST 2012 i686 AMD Athlon(tm) II X2 245 Processor AuthenticAMD GNU/Linux 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:18:22.043

由于 SDK 不再支持旧版本，您必须从源代码编译库。 [归档 FTP 站点](ftp://ftp.qt.nokia.com/qt/source/)有您想要的版本。

尽管我应该指出，只要您动态链接并且您的代码库不使用 v4.6.2 之后的功能 - 那么它就会按预期工作。如果是，那么使用 v4.6.2 头文件进行编译不会改变任何事情——您仍然需要升级另一台计算机或从应用程序中删除较新的 Qt 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T14:22:50.637

我的解决方法，

*   在虚拟盒子中安装 kubuntu 10.04
*   将项目复制到v​​irtualbox
*   使用 virtualbox 中的 qt-creator 编译它

在 virtualbox 中生成的二进制文件在 4.6 和 4.8 环境中都可以正常工作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T00:22:10.880

在 Qt Creator 中，尝试工具 -> 选项 -> Qt 版本（或构建/运行，然后是 qt 版本，或其他一些令人讨厌的东西，具体取决于您拥有的 qt creator 版本）。

应该看到它知道的 Qt 版本列表。单击添加以手动引用您的 4.6 qmake。那应该让创作者接受它。

# facebook - 使用 Drupal 在 fb 页面上发布

> ID：12707260
> 
> 赞同：1
> 
> 时间：2012-10-03T11:10:27.240
> 
> 标签：facebook, facebook-graph-api, drupal, drupal-7

您好我正在使用 drupal7 。我需要在 FB Fan Page 上发布我的节点。

任何人都知道哪个模块支持这个

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:16:55.347

有一个模块 - [http://drupal.org/project/fb](http://drupal.org/project/fb)

# iphone - 哪个应用程序图标会显示在设备上的 App Store 中？

> ID：12707262
> 
> 赞同：0
> 
> 时间：2012-10-03T11:10:39.377
> 
> 标签：iphone, ios, ipad, app-store

我的通用应用程序捆绑了以下图标：

```
iphone-icon@2x (114x114)
iphone-icon (57x57)
ipad-icon@2x (144x144)
ipad-icon (72x72) 
```

并使用 iTunes 连接我提交另一个图标：

```
iTunes-icon (1024x1024) 
```

现在我的问题是，这些图标中的哪一个会显示在以下各项中：a）iPhone 设备上的 App Store，b）iPad 设备上的 App Store，c）Mac/PC 上的 iTunes？

Apple 的措辞暗示`iTunes-icon`将用于所有应用商店，但这引出了一个问题，当设计师花费数小时专门为每种尺寸设计设备图标时，为什么 Apple 会在设备上使用 1024x1024 下采样图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:20:27.713

从 iOS 6 开始，所有 App Store 都显示降采样的 1024x1024 图标。您可以在 App Store 中的图标与主屏幕上不同的应用程序中看到这一点（例如，1Password Pro 图标在 App Store 中有一个红色的“Pro”框，但在安装时没有）。我不确定在装有 iOS 5 的 iPhone 上是否是这样，我似乎记得它显示了实际的主屏幕图标，但我没有 iOS 5 设备可供检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:15:15.450

我的理解是使用 1024x1024 图标代替旧的 512x512 图标在桌面显示器上显示图标（1024x1024 用于视网膜桌面显示器；按比例缩小的 512x512 用于普通显示器）。因此，这是在您的 Mac/PC 或浏览器中的 iTunes 中使用的图标。

其他图标用于适当地显示每个相应设备上的图标。

对此的简单测试是不提供设备特定图标之一：您将在该设备上看到一个锯齿状图标，您没有为其提供优化图标。但是，如果您提供它，该图标将看起来应有的样子。

# asp.net-mvc - 如何在 Substitute 中将接口作为参数传递给 Controller 类

> ID：12707263
> 
> 赞同：0
> 
> 时间：2012-10-03T11:10:39.343
> 
> 标签：asp.net-mvc, nsubstitute

我是 nSubstitute 的新手。我正在为我的控制器类编写测试方法。我有一个名为 GetDefaultStateTest() 的 TestMethod，它具有 Substitute 类，如下所示

```
[TestMethod]
    public void GetDefaultStateTest()
    {
        var _GetDefaultState = Substitute.For<CustomerController>(ICustomer cus);
        Assert.IsNotNull(_GetDefaultState.GetDefaultState());
    } 
```

因为我的控制器类具有如下的参数化构造函数。

```
public class CustomerController : Controller
{
private readonly ICustomer _customer;
  public CustomerController(ICustomer customer)
  {
    _customer = customer;
  }

  public string GetDefaultState()
  {
        // Get default state from settings table
        List<tblSettings> settings = new List<tblSettings>();
     // Calling service method GetSettings
        settings = _customer.GetSettings();
        var defaultState = from setting in settings
                           where setting.Desc == "DefaultState"
                           select setting.Settings;
        string strState = "";
        foreach (var oState in defaultState)
        {
            strState = oState;
            break;
        } 
        return strState;
   }
} 
```

在运行测试方法时，它会引发空引用问题。因为参数 ICustomer 为空

```
var _GetDefaultState = Substitute.For<CustomerController>(ICustomer cus); 
```

如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:23:35.993

如果您正在测试您的控制器类，那么您不想替换它，您想使用一个真实的（否则您只是在测试一个假对象“有效”:)）。您*可能*想要替换的是该类的依赖项，在这种情况下，`ICustomer`.

```
[TestMethod]
public void GetDefaultStateTest()
{
    var customer = Substitute.For<ICustomer>();
    var controller = new CustomerController(customer);
    Assert.IsNotNull(controller.GetDefaultState());
} 
```

然后，您可能想要伪造该`ICustomer.GetSettings()`方法，以便您可以测试您的控制器对该数据的操作：

```
[TestMethod]
public void GetDefaultStateTestFromSettings()
{
    var customer = Substitute.For<ICustomer>();
    customer.GetSettings().Returns(somethingSensible);
    var controller = new CustomerController(customer);
    Assert.AreEqual(expectedDefaultState, controller.GetDefaultState());
} 
```

顺便说一句，有时使用真实对象（例如 的真实实现`ICustomer`）而不是替代品更有意义。这将取决于与依赖项交互的定义有多完善、您希望在哪里定义被测系统的边界以及测试给您的被测系统正常工作的信心程度。或者更简单地说，任何使测试变得容易和可靠的东西。:)

希望这可以帮助。

# arraylist - 如何将传入的短信保存到 android 中的字符串 ArrayList 中？

> ID：12707271
> 
> 赞同：-1
> 
> 时间：2012-10-03T11:11:21.107
> 
> 标签：arraylist

如何将传入的短信保存到 android 中的字符串 ArrayList 中？我将短信放入广播接收器类，并希望将这些文本消息放入字符串 ArrayList 中，每次收到的消息都放入 ArrayList 的下一个索引中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:21:04.940

如果您能够将信息归结为您感兴趣的字符串表示形式，那么是什么阻止您在 android 中使用普通的 java 数组列表？

```
 String test = "test";
 List<String> list = new ArrayList<String>();
 list.add(test);

 for(String s:list) {
     System.out.println(s);
 } 
```

# android - 如何在另一个自定义视图中添加自定义视图？

> ID：12707276
> 
> 赞同：2
> 
> 时间：2012-10-03T11:11:55.530
> 
> 标签：android, graphics, android-view, android-custom-view

我有一个自定义视图，并希望在该自定义视图上再添加一个自定义视图。这是我的自定义视图类：

```
public class CustomCircle extends View{

float radius;
Paint paint = new Paint();

String message = "";
public CustomCircle(Context context, AttributeSet attrs) {
    super(context, attrs);

}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawCircle(getWidth()/2, getHeight()/2,radius, paint);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean isClickInCircle = false;
    float x = event.getX();
    float y = event.getY();

    double check = Math.sqrt((x-getWidth()/2)*(x-getWidth()/2) + (y-getHeight()/2)*(y-getHeight()/2));
    if (check<=radius) {
        isClickInCircle= true;
    }
    if (isClickInCircle) {

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:

            Toast.makeText(getContext(),message, Toast.LENGTH_LONG).show();
            return true;

        case MotionEvent.ACTION_UP:
            Toast.makeText(getContext(), message, Toast.LENGTH_LONG).show();
            return true;

        default:
            break;
        }
    }

    return false;
} 
```

并且正在使用另一个扩展的类`LinearLayout`：

```
public class B extends LinearLayout {

private Paint paint;

public B(Context context) {
    super(context);
    paint = new Paint();
    paint.setColor(Color.WHITE);
    paint.setStyle(Style.FILL);
}

public void addCircle() {

    CustomCircle circleBlue = new CustomCircle(getContext(), null);
    circleBlue.paint.setColor(Color.WHITE);
    circleBlue.paint.setAntiAlias(true);
    circleBlue.radius = 160;
    circleBlue.message = "Clicked";
    addView(circleBlue);

    CustomCircle circleRed = new CustomCircle(getContext(), null);
    circleRed.paint.setColor(Color.RED);
    circleRed.paint.setAntiAlias(true);
    circleRed.radius = 80;
    circleRed.message = "Clicked";
    addView(circleRed);

} 
```

我正在使用主要活动类调用 B 类：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    B root = new B(this);
    root.addCircle();
    setContentView(root);
} 
```

输出只显示一个圆圈而不是另一个圆圈内的圆圈。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:28:51.713

> 输出只显示一个圆圈而不是圆圈内的圆圈。

如果你想重叠孩子，你选择了错误的布局，`RelativeLayout`或者`FrameLayout`是要走的路。另外，关于您的代码：

```
public class B extends RelativeLayout {
//...
public void addCircle() {

    // the constructor that uses the AttributeSet should be added if you use the 
    // custom component in the xml layout
    CustomCircle circleBlue = new CustomCircle(getContext());
    // ...
    // add it with LayoutParams
    RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
    rlp.addRule(RelativeLayout.CENTER_IN_PARENT);
    addView(circleBlue, rlp);
    // the same for the other view
} 
```

此外，您的两个圆圈将具有相同的尺寸，因此它们将完美重叠（并且您将无法看到它们），您需要通过 给它们不同的尺寸，`LayoutParams`例如：

```
RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(200, 200); 
```

对于第一个，并且：

```
RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(100, 100); 
```

对于第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:30:36.527

布局中是否有可能有 2 个圆圈，但您只能看到一个，因为它与第一个圆圈的颜色相同，并且它们彼此重叠？

改变`circleRed.paint.setColor(Color.WHITE);` 并`circleRed.paint.setColor(Color.BLACK);` 看看它给出了什么

# c - 用递归反转c中的字符串

> ID：12707278
> 
> 赞同：3
> 
> 时间：2012-10-03T11:12:04.400
> 
> 标签：c, string, recursion

我已经编写了代码来反转 c 中的字符串......它工作正常，但我无法在`main()`函数中返回反转的字符串。

```
#include<stdio.h>

main()
{
  char a[17]="abcdefg";
  reverse(a);
  printf("\n");
  system("PAUSE");
}
int reverse(char *a)
{
   if(*a!='\0')
   {   
     reverse(a+1);
   }
   printf("%c",*a);
} 
```

它打印反转的字符串，但我想要反转的字符串在`main()`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-14T00:56:43.553

以下是使用递归反转字符串的一种方法！

```
#include <stdio.h>
#include <string.h>

void rev_str_recursive(char arr[], size_t iStart, size_t iLast)
{
    if( iStart < iLast )
    {
        //swap
        char temp = arr[iStart];
        arr[iStart] = arr[iLast];
        arr[iLast] = temp;

        rev_str_recursive(arr, ++iStart, --iLast);  
    }
}

void main()
{
    char cArray[] = {"A quick brown fox jumps over a lazy dog"};

    rev_str_recursive(cArray, 0, strlen(cArray)-1);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T11:14:27.620

您需要修改字符串，即输入缓冲区为`reverse()`，而不仅仅是打印它。

以递归方式执行此操作似乎有点令人讨厌，但当然应该是可能的。

基本上，我猜打印变成了一项任务，如下所示：

1.  Base：空字符串的反转是空字符串。
2.  步骤：字符串的反转通过交换第一个和最后一个字符开始，然后递归字符串的其余部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-08T17:25:52.517

这是使用递归反转字符串的另一种方法：

```
void reverseString(char* dest, char *src, int len) {
    if (src == NULL || len == 0)
        return;

    reverseString(dest, src + 1, len - 1);
    strncat_s(dest, len + 1, src, 1);
} 
```

你可以这样调用：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define STRING "Let's try this one."
#define SIZE 20

void main() {

    char* src = (char*)malloc(SIZE);
    char* dest = (char*)malloc(SIZE);

    strcpy_s(dest, SIZE, "");
    strcpy_s(src, SIZE, STRING);

    reverseString(dest, src, strlen(src));
    /* Do anything with dest. */
    // printf("%s\n", dest);

    free(src);
    free(dest);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:22:17.250

此代码不可执行:(您定义 int reverse 但 reverse 函数不返回任何值

而是使用它（使用 void）：

```
#include<stdio.h>

main()
{
  char a[17]="abcdefg";
  reverse(a);
  printf("\n");
  system("PAUSE");
}
void reverse(char *a)
{
   if(*a!='\0')
   {   
     reverse(a+1);
   }
   printf("%c",*a);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T01:44:12.673

```
#include <iostream>
using namespace std;

reverse( char *str)
{
    if (*str!='\0')
    {
       reverse(str+1);
       cout<<*str;
    }
//cout<<*str   when i am just printing here then why this is printing after one space ??
}

int main()
{   
    string a ;  
    cin>>a;   
    reverse(&a[0]); 
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-10T14:27:04.070

Emre Can Kucukoglu 的回答略有变化。. . 我们可以消除 strncat_s

```
void revstr_rec(char *sstr, char *dstr, int len)
{
    int i = 0;
    if((! *sstr) || (! len) )
        return;

    revstr_rec(sstr + 1, dstr, len - 1);
    dstr[len - 1] = *sstr;

    return;
}

int main()
{
    char *sstr = NULL;
    char *dstr = NULL;

    sstr = malloc(16);
    if(! sstr)  {
        printf("no memory . . .\n");
        return 0;
    }
    strcpy(sstr, "hello world !");
    printf("sstr: %s\n", sstr);

    dstr = malloc(16);
    if(! dstr)  {
        printf("no memory . . .\n");
        return 0;
    }

    revstr_rec(sstr, dstr, strlen(sstr));
    printf("dstr(recursive): %s\n", dstr);

    free(sstr);
    free(dstr);

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-10T04:49:43.023

```
#include <stdio.h>
#define MAX 100
int main()
{
char str[MAX], *rev;
scanf("%s", str);
rev = reverse(str); 
printf("The reversed string is : %s\n", rev);
return 0;
}
char *reverse(char ch[])
   {
    static char r[MAX];
    static int i=0;
    if(*ch == '\0') return "";
    else 
   {
    reverse(ch+1);
    r[i++]=*ch;
   }
    return r;
   } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-16T08:17:42.357

左右索引的简单方法

```
void main()
{
    char* str = (char*)malloc(strlen("somestring")+1);
    strcpy(str, "somestring");
    int leftIndex = 0;
    int rightIndex = strlen(str) - 1;

    printf("%s\n", ReverseString(str, leftIndex, rightIndex));
    free(str);
}

char* ReverseString(char* str, int leftIndex, int rightIndex)
{
    if (leftIndex == rightIndex || leftIndex == (rightIndex +1)) {
        return str;
    }

    // flip letters
    char leftLetter = *(str + leftIndex);
    char rightLetter = *(str + rightIndex);
    *(str + leftIndex) = rightLetter;
    *(str + rightIndex) = leftLetter;

    return ReverseString(str, leftIndex+1, rightIndex -1);
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-03T11:17:00.110

使用`sprintf`它将把你反转的字符串打印到缓冲区中。

```
#include<stdio.h>

char *b;

main()
{
  char a[17]="abcdefg";
  char buffer[17];
  buffer[0]= '\0';
  b = buffer;
  reverse(a);
  printf("%s\n",buffer);
}
int reverse(char *a)
{
   if(*a!='\0')
   {   
     reverse(a+1);
     sprintf(b,"%c",*a);
     b++;
   }

} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-09-18T08:22:07.633

```
void palindromo(char *s)
{
    if(s[0] != '\0'){
        palindromo(s+1);
        printf("%c", s[0]);
    }
} 
```

这是一个小的递归函数，用于打印反转的字符串。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-11-27T15:07:19.820

```
#include<stdio.h>
#include<string.h>
void rev(char *);

int main()
{
    char s[]="Hello";
    printf("\n%s",s);
    rev(s);
    printf("\n%s",s);
    return 0;
}

void rev(char *s)
{
    static int i=0;
    static int j=0;
    if(j==0)                   //since static variable can be intitialized 
    {                          //only with a constant literal,to store 
        j=strlen(s)-1;         //length-1 in 1st function call, we can use 
    }                          //this trick.(condition satisfied only in 1st 
                               //function call)
    if(i<j)
    {
        char temp;
        temp=s[i];
        s[i]=s[j];             //Analogous to for(i=0,j=l-1;i<j;i++,j--)
        s[j]=temp;             //                { //swap code }
        i++;
        j--;
        rev(s);           
    }
} 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2015-02-04T15:48:41.587

```
#include<stdio.h>
void reverse(char *a);
main()
{
  char a[17]="abcdefg";
  reverse(a);
  printf("\n");
  system("PAUSE");
}
void reverse(char *a)
{
   if(*a!='\0')
   {   
     reverse(a+1);
   }
   printf("%c",*a);
} 
```

# html - CSS - 流体网格布局网站的不同标题图像

> ID：12707280
> 
> 赞同：1
> 
> 时间：2012-10-03T11:12:05.723
> 
> 标签：html, css, image, dynamic, fluid-layout

编辑：进一步阅读接下来的 5 行！我的问题不是为移动设备、平板电脑和台式机（查询）做不同的 css 的逻辑- 问题是从 INSIDE CSS`@media`更改属性。`IMAGE.SRC`

我正在尝试制作一个新的流畅网站，并且正在尝试创建 3 个不同的标题图像：

1.  移动标题图片（低分辨率）
2.  平板电脑标题图片（中等分辨率）
3.  桌面标题图像（高分辨率）

（所有图像的纵横比也有所不同）

我怎样才能让它工作？

目前，我尝试简单地为每个 CSS SECTION（移动设备、平板电脑、桌面）更改 CSS 中的 SRC

像这样：

```
#img_header {
   src: url(img/header_m.png);
} 
```

我们都知道这不起作用 :D 我也不想使用它`background-image`。

这样做的正确方法是什么？

我应该侵入 Adob​​e Dreamweaver CS6 生成的 javascript 代码并从那里更改 .src 吗？

我确定有一种CSS方式，所以告诉我伙计们。谢谢

更新：我应该说我已经使用了媒体查询......

这是我的CSS：

```
/* Layout für Mobilgeräte: 480 px oder weniger. */
.gridContainer {
    margin-left: auto;
    margin-right: auto;
    width: 97.826%;
    padding-left: 1.0869%;
    padding-right: 1.0869%;
}

#div_header {
    clear: both;
    float: left;
    margin-left: 0;
    width: 100%;
    display: block;
}

#img_header {
    src: url(img/header_m.png);
}

/* Layout für Tablet-PCs: 481 bis 768 px. Erbt Stile vom: Layout für Mobilgeräte. */
@media only screen and (min-width: 481px) {
    .gridContainer {
        width: 93.451%;
        padding-left: 0.7744%;
        padding-right: 0.7744%;
    }

    #div_header {
        clear: both;
        float: left;
        margin-left: 0;
        width: 100%;
        display: block;
    }

    #img_header {
        src: url(img/header_t.png);
    }
}

/* Desktoplayout: 769 bis maximal 1232 px.  Erbt Stile von: den Layouts für Mobilgeräte und Tablet-PCs. */
@media only screen and (min-width: 769px) {
    .gridContainer {
        width: 89.1614%;
        max-width: 1232px;
        padding-left: 0.4192%;
        padding-right: 0.4192%;
        margin: auto;
    }

    #div_header {
        clear: both;
        float: left;
        margin-left: 0;
        width: 100%;
        display: block;
    }

    #img_header {
        src: url(img/header.png);
    }
} 
```

现在您已经阅读了所有内容，您应该想象我无法`img.src`从内部 css 更改...，我认为这样做的唯一方法是从 adobe DW cs6 侵入未格式化的自动生成的 javascript，不是吗?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:15:31.503

如果您使用不同分辨率的单张图像，则无需拍摄 3 张图像。取更大的图像（用于桌面大小）并编写下面的 css

```
<header><img src="img/header_m.png" /></header> 
```

CSS

```
header img{max-width:100%} 
```

我相信您知道媒体查询 [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

**更改前景图像**

如果要更改不同设备的前景图像，请尝试 z-index

```
.header{
    background-color:red;
    position:relative;  height:auto}

img:first-child{
    position:absolute; top:0; left:0;
    z-index:-1; width:200px
}
img{
    position:absolute; top:0; left:0;
    z-index:10; width:200px
} 
```

更改相应设备宽度的 z-index 值。

在这里演示[http://jsfiddle.net/5vpG7/70/](http://jsfiddle.net/5vpG7/70/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:15:58.827

您可以使用`CSS3 media queries`您想要的结果......

而且我认为您应该阅读这篇文章，它将对您有所帮助：-

[http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T11:20:16.143

您可以使用**媒体查询来制作不同的图像**

**移动的**

```
@media only screen and (min-width : 320px) and (max-width : 480px) {
 Your image for mobile
} 
```

**药片**

```
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px){

Your image for tablet
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:14:45.287

……………………………………………………………………………………………………………………

现在用于**媒体查询 css**

```
 @media screen and (min-width: 500px) and (max-width: 800px) { 
// your css code here 

 } 
```

***[有关此的更多信息](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T12:34:46.497

我现在在 div_header 中设置了另一个 div，并为该子 div 提供了背景图像和硬编码的宽度和高度（与单个图像匹配），所以我伪造了一个现在能够定义（背景）图像的标签通过 css 源而不是定义图像源的**属性**；）

无论如何谢谢你的回答

# timezone - 谷歌电子表格 - 如何使用函数确定时区

> ID：12707287
> 
> 赞同：5
> 
> 时间：2012-10-03T11:12:32.083
> 
> 标签：timezone, google-sheets, utc, epoch

如何使用公式确定当前时区？我使用的公式给出了意想不到的结果。

我的电子表格设置（文件 > 电子表格设置...）：时区：**(GMT+01:00) 阿姆斯特丹**

我使用的公式： **=TEXT(NOW(),"HH:mm z")**

这给出： **格林威治标准时间 12:47**

本地时钟时间是 12:47，我希望公式显示：“ **12:47 GMT+1** ”。我还尝试了 Z 而不是 z，它给出“12:47 +0000”，我希望 +1。

有什么建议么？

我需要这个，所以我可以确定 UTC 时间并转换为纪元时间（“UTC 时间” - DATE(1970,1,1)*24*60*60）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T10:50:00.840

您不能使用没有 javascript 检查您当地时区的公式来做到这一点。按照这个表格：

[https://docs.google.com/a/codeproject.com/spreadsheet/ccc?key=0AqhqY231XZd3cFBiY2VqeWdmNWdaX25zN2lpekthQlE&hl=en_US#gid=4](https://docs.google.com/a/codeproject.com/spreadsheet/ccc?key=0AqhqY231XZd3cFBiY2VqeWdmNWdaX25zN2lpekthQlE&hl=en_US#gid=4)

不支持时区格式的东西`TEXT`。这个电子表格是由 Stackoverflow 的一位贡献者完成的，它不是我的。

所以……脚本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T08:33:18.320

=TEXT(NOW()+x/24, "DD/MM/YYYY HH:mm:ss")

=TEXT(NOW()+8/24, "DD/MM/YYYY HH:mm:ss")

NOW 函数之后的 (+x/24) 会将 x 小时（在我的情况下为 8）添加到标准时间。NOW()+1 会给你明天的时间，所以工作 bakc 或 forward 你可以设置公式来给出不同的时区。

希望这可以帮助，

罗比

# java - 如何发送压缩的 http 请求？

> ID：12707292
> 
> 赞同：4
> 
> 时间：2012-10-03T11:13:02.910
> 
> 标签：java, web-services, zip, http-post

我想将压缩的请求正文作为基于 Web 服务的应用程序的 POST http 请求发送。谁能帮助我如何发送压缩的 http 请求或如何发送压缩的请求正文作为 POST http 请求的一部分？

**编辑**：*在此处添加解决方案*

```
HttpURLConnection request = null; 
StringBuilder sb = new StringBuilder(getFileAsString("TestFile.txt")); 
String fileStr = getFileAsString("TestFile.txt"); 
HttpClient client = new HttpClient(); 
client.getState().setCredentials(
    new AuthScope(hostip, port), 
    new UsernamePasswordCredentials("username", "password")); 
PutMethod post = new PutMethod(url); 
post.setRequestHeader("Content-Encoding", "gzip") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:17:44.907

HTTP 协议不支持压缩请求（它支持在客户端宣布其处理压缩内容的能力时交换压缩响应）。如果要实现压缩请求，则应在客户端和 Web 服务之间建立这样的协议，即始终压缩 HTTP 有效负载，以便在接收端，Web 服务始终可以解压缩和解释有效负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T15:28:19.280

我使用一个特殊的 servlet 来解压和压缩请求和响应

```
public void doPost(HttpServletRequest req, HttpServletResponse res) throws IOException{

    InputStream zipedStreamRequest = req.getInputStream();
    String unzipJsonStr  = ZipUtil.uncompressWrite(zipedStreamRequest);
    System.out.println("<---- ZIP request <----");
    System.out.println(unzipJsonStr);
    MainHandler handler = new MainHandler();
    String responseJson = handler.handle(unzipJsonStr);
    System.out.println("----> ZIP response ---->");
    System.out.println(responseJson);

    OutputStream responseOutputStream = res.getOutputStream();

    if (responseJson!=null) {
        ZipUtil.compressWrite(responseJson, responseOutputStream);  
    }

} 
```

那么这是我的 ziputil 类

```
public class ZipUtil {

private static final int NB_BYTE_BLOCK = 1024;

/**
 * compress and write in into out
 * @param in the stream to be ziped
 * @param out the stream where to write
 * @throws IOException if a read or write problem occurs
 */
private static void compressWrite(InputStream in, OutputStream out) throws IOException{
    DeflaterOutputStream deflaterOutput = new DeflaterOutputStream(out);
    int nBytesRead = 1;
    byte[] cur = new byte[NB_BYTE_BLOCK];
    while (nBytesRead>=0){
        nBytesRead = in.read(cur);
        byte[] curResized;
        if (nBytesRead>0){
            if (nBytesRead<NB_BYTE_BLOCK){
                curResized = new byte[nBytesRead];
                System.arraycopy(cur, 0, curResized, 0, nBytesRead);
            } else {
                curResized = cur;
            }
            deflaterOutput.write(curResized);
        }

    }
    deflaterOutput.close();
}

/**
 * compress and write the string content into out
 * @param in a string, compatible with UTF8 encoding
 * @param out an output stream
 */
public static void compressWrite(String in, OutputStream out){
    InputStream streamToZip = null;
    try {
        streamToZip = new ByteArrayInputStream(in.getBytes("UTF-8"));           
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
    try {
        ZipUtil.compressWrite(streamToZip, out);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

/**
 * uncompress and write int into out
 * @param in
 * @param out
 * @throws IOException
 */
private static void uncompressWrite(InputStream in, OutputStream out) throws IOException{
    InflaterInputStream inflaterInputStream = new InflaterInputStream(in);
    int nBytesRead = 1;
    byte[] cur = new byte[NB_BYTE_BLOCK];
    while (nBytesRead>=0){
        nBytesRead = inflaterInputStream.read(cur);
        byte[] curResized;
        if (nBytesRead>0){
            if (0<=nBytesRead && nBytesRead<NB_BYTE_BLOCK){
                curResized = new byte[nBytesRead];
                System.arraycopy(cur, 0, curResized, 0, nBytesRead);
            } else {
                curResized = cur;
            }
            out.write(curResized);
        }
    }

    out.close();
}

/**
 * uncompress and write in into a new string that is returned
 * @param in
 * @return the string represented the unziped input stream
 */
public static String uncompressWrite(InputStream in){
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    try {
        uncompressWrite(in, bos);
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    try {
        byte[] byteArr = bos.toByteArray();
        String out = new String(byteArr, "UTF-8");
        return out;
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }

    return null;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:57:30.203

```
public static void main(String[] args) throws MessagingException,
        IOException {

    HttpURLConnection request = null;
    try {

        // Get the object of DataInputStream
        StringBuilder sb = new StringBuilder(getFileAsString("TestFile.txt"));

        String fileStr = getFileAsString("TestFile.txt");

        System.out.println("FileData=" + sb);
        HttpClient client = new HttpClient();
          client.getState().setCredentials(
                    new AuthScope(hostip, portno),
                    new UsernamePasswordCredentials(username, password));

        PutMethod post = new PutMethod(url);
        post.setRequestHeader("Content-Encoding", "gzip");
        post.setRequestHeader("Content-Type", "application/json");

        post.setDoAuthentication(true);

        byte b[] = getZippedString(fileStr);;
            InputStream bais = new ByteArrayInputStream(b);
        post.setRequestBody(bais);
        try {
            int status = client.executeMethod(post);

        } finally {
            // release any connection resources used by the method
            post.releaseConnection();
        }

    }catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {

    }
} 
```

# tridion - 如何在 SDL Tridion 2011 SP1 中获取模板的组件

> ID：12707298
> 
> 赞同：0
> 
> 时间：2012-10-03T11:13:19.210
> 
> 标签：tridion

我是 Tridion 的新手。我正在为 TBB 寻找一些示例代码，以获取组件模板的所有组件。我已经看到了如何获取页面组件或从文件夹中获取组件的示例，但不是为了这个。

我可以通过`object.GetListUsingItems(filter).SelectNodes(*).Count`在我的模板中使用来获得计数，但我需要一种方法来迭代所有组件并获取组件的标题或其他属性。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:28:06.160

您无法一次性获取模板的所有组件，您需要首先查看哪些 Schema 与此组件模板相关联，然后获取每个模式的所有组件。执行此操作时请注意蓝图上下文。

我对您要通过此实现的目标感到有些困惑，如果您想将此作为发布操作的一部分，那么您很快就会以包含许多组件的大量发布事务告终。

如果您想要的属性比列表中公开的更多，请`GetUsingItems`改用 - 但请注意，这是一个相当慢的操作，与获取列表相比，数据库交互要多得多。

# objective-c - 如何在 Cocoa 中找到线的方向？

> ID：12707299
> 
> 赞同：1
> 
> 时间：2012-10-03T11:13:24.820
> 
> 标签：objective-c, point, direction

考虑笛卡尔坐标系中的一条线**AB**。线的长度是**d**。

**我需要的：**

我想在 B 点画一个箭头，来表示线的方向。

**我尝试了什么：**

[我在 B 的一些 x 点之前找到了一个点 C](https://stackoverflow.com/questions/12617387/how-can-i-find-the-points-in-a-line-objective-c)，它位于线 AB 中。然后我试图找到相对于线 CB 成 90 度的点 (P & Q)。但这对我不起作用。

参考这张图片： ![在此处输入图像描述](../Images/3b556fd98a1e1b875a5765ae36b934da.png) 除了做这个复杂的步骤，还有没有其他方法可以找到线的方向以在正确的方向上绘制正确的箭头？

请记住，这条线可能位于任何方向。我所拥有的只是 A 点和 B 点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:27:16.190

1.  我不认为[如何在一行中找到点 - 目标 c 中给出的答案？](https://stackoverflow.com/questions/12617387/how-can-i-find-the-points-in-a-line-objective-c/12618111#12618111)太复杂了。你可以通过使用而不是对使它*看起来*更好一点。`CGPoint``(x, y)`

2.  您的问题中缺少一个输入参数：箭头的所需大小，例如从**C**到**B**的距离。

话虽如此，以下计算应该对您有所帮助。

```
// Your points A and B:
CGPoint A = CGPointMake(x1, y1);
CGPoint B = CGPointMake(x2, y2);

// Vector from A to B:
CGPoint AB = CGPointMake(B.x - A.x, B.y - A.y);

// Length of AB == distance from A to B:
CGFloat d = hypotf(AB.x, AB.y);

// Arrow size == distance from C to B.
// Either as fixed size in points ...
CGFloat arrowSize = 10.;
// ... or relative to the length of AB:
// CGFloat arrowSize = d/10.;

// Vector from C to B:
CGPoint CB = CGPointMake(AB.x * arrowSize/d, AB.y * arrowSize/d);

// Compute P and Q:
CGPoint P = CGPointMake(B.x - CB.x - CB.y, B.y - CB.y + CB.x);
CGPoint Q = CGPointMake(B.x - CB.x + CB.y, B.y - CB.y - CB.x); 
```

**P**是通过首先减去向量**CB** = (CB.x, CB.y) 然后加上垂直向量 (-CB.y, CB.x)从**B计算得出的。**

# kinect - 我需要将骨骼数据映射到彩色图像点吗？- kinect/XNA

> ID：12707303
> 
> 赞同：0
> 
> 时间：2012-10-03T11:13:51.527
> 
> 标签：kinect, xna-4.0

我一直在做一个项目，我需要使用手关节与 3D 对象进行交互，现在我使用距离公式但是。. 我正在使用手关节 (X,Y,Z) 并使用公式将它们转换为 3D 空间，以便能够与模型进行交互。

而不是使用公式进行转换。. 我真的需要使用函数 MapSkeletalpoint 来为图像点着色吗？

想知道我在做什么：

```
 var rightHands = playerSkeleton.Joints[JointType.HandRight];
         var rightHandsX = rightHands.Position.X;
         var rightHandsY = rightHands.Position.Y;
         var rightHandsZ = rightHands.Position.Z;

          HandX = rightHands.Position.X;
          HandY = rightHands.Position.Y;
          HandZ = rightHands.Position.Z;

    foreach (_3DModel s in Solar)
    {
         x_mod = (float)Math.Floor(((HandX * 0.5f)) * maxWidth);
         y_mod = (float)Math.Floor(((HandY * -0.5f)) * maxHeight);
         z_mod = (float)Math.Floor((HandZ) / 4 * 20000);

  if (Math.Sqrt(Math.Pow(x_mod - s.modelPosition.X, 2) + Math.Pow(y_mod- s.modelPosition.Y, 2) + Math.Pow(z_mod - s.modelPosition.Z,2)) < 20)
     {

          sound.Play();
         Console.WriteLine("1" + "handx:" + x + "," + " " + "modelPos.X:" + s.modelPosition.X + "," + " " + "handY:" + y + "modelPos.Y:" + s.modelPosition.Y);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:34:07.560

实际上，创建有效的命中测试并不容易，尤其是在对象数量较多的情况下。

你需要的是一个碰撞系统。我给你的建议是你应该使用一些现有的，例如 BEPU 可能会有所帮助： [http ://bepu.squarespace.com/](http://bepu.squarespace.com/)

您应该将对象的位置与手的位置绑定（由 Kinect 报告），然后由 BEPU 完成其余的工作（在发生碰撞时它将触发处理程序）。

只是一个小建议 - 使用手的相对位置（例如肩膀）总是好的。在基于 Kinect 的游戏中并不总是需要使用 Kinect 报告的绝对坐标（但您更清楚自己想要什么）

# web-applications - 构建离线 webapp 的框架

> ID：12707307
> 
> 赞同：2
> 
> 时间：2012-10-03T11:14:04.943
> 
> 标签：web-applications, frameworks, offline-mode

什么框架支持构建离线工作的 webapp？

我认为大多数 webapp 应该用 javascript 编码以便离线使用，并且当 webapp 在线连接时应该同步数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:50:13.287

一些最受欢迎的：

*   [AngularJS](http://angularjs.org/)（来自谷歌）
*   [骨干](http://backbonejs.org/)
*   [应用程序](http://appjs.org/)
*   [ExtJS](http://www.sencha.com/products/extjs)

这些框架将为您的应用程序提供基本的代码结构/组织，主要基于 MVC 模式。其中一些已经有 UI 小部件库（如 ExtJS），但对于其余部分，您可能希望在它们之上使用 UI 库，为您提供可从 jQuery 或类似工具中使用的糖果小部件，例如：

*   [jquery-ui](http://jqueryui.com/)和[jquery-mobile](http://jquerymobile.com)
*   [剑道井](http://www.kendoui.com)

# objective-c - Xcode 4.5 中奇怪的 LLDB 错误：内部错误 [IRForTarget]

> ID：12707308
> 
> 赞同：10
> 
> 时间：2012-10-03T11:14:05.380
> 
> 标签：objective-c, xcode, xcode4.5

在某些文件中放置断点时，例如：刚刚新创建的 ViewController 并在`viewDidLoad`方法上放置断点时出现奇怪的 LLDB 错误

```
Internal error [IRForTarget]: Couldn't rewrite external variable _ZZ53
[EPGViewController($__lldb_category) $__lldb_expr:]E19$__lldb_expr_result 
```

我尝试用谷歌搜索这个错误 - 找不到任何有用的东西。清理缓存，重启也没有用。

再一次 - 这个错误我没有在所有文件上得到。我不知道为什么。感谢任何帮助或提示！

另外，当我尝试`po`一些变量时，我得到

```
(lldb) po self.title
error: Couldn't materialize struct: Structure hasn't been laid out yet
Internal error [IRForTarget]: Couldn't rewrite external variable _ZZ58-
[EventsEPGViewController($__lldb_category) $__lldb_expr:]E19$__lldb_expr_result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:18:20.833

我也遇到了这个错误，花了很多时间调试它却没有结果。它似乎与断点本身有关：我注意到如果我停用断点，则不会出现错误。

您也许可以将断点移动到另一行以进行抑制。这不是我遇到的第一个 clang 错误，在 XCode 4.3 'po' 上甚至不能可靠地输出变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:42:01.877

将该项目的指定调试器从 lldb 更改为 gdb，这样就很好了。

# c++ - 如何查看 cppdepend 的分析流程（例如基类不应该使用派生类）

> ID：12707316
> 
> 赞同：1
> 
> 时间：2012-10-03T11:14:37.190
> 
> 标签：c++, cppdepend

我在玩 cppdepend，
有一件事让我很烦恼：
它列出了某些违​​反“基类不应使用派生类”的类。但我没有找到一种方法来准确查看基类在何处以及如何使用衍生物。可以做到吗？顺便说一句，我在 Win 上使用评估版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:15:35.867

要查看基类中使用了哪些方法，最简单的方法是在类浏览器中选择相关的基类，右键单击并选择“选择我使用的方法”，您将在派生类中也存在方法。

# css - iPad 将按钮文本分成两行

> ID：12707317
> 
> 赞同：0
> 
> 时间：2012-10-03T11:14:42.643
> 
> 标签：css, ipad

除了按钮内的文本被分成两行的 iPad 之外，以下代码在任何地方都可以正常工作：

```
.sign_up {
  background: url('../images/submit_button.png') no-repeat 0 0;
  border: 0;
  text-align: center;
  color: white;
  text-transform: uppercase;
  font-size: 14px;
  cursor: pointer;
  margin-left: 12px;
  width: 110px;
  height: 34px;
} 
```

已将 sign_up 类提供给包含“添加其他”作为文本的按钮元素。

然而，在 iPad 上，“其他”最终位于第二行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:21:17.647

使用 - 重置 iPad 按钮默认样式

```
button, input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:00:44.283

在css中添加`white-space:nowrap;`

# activex - 如何摆脱烛台图表中的空置周末

> ID：12707320
> 
> 赞同：0
> 
> 时间：2012-10-03T11:14:53.277
> 
> 标签：activex, teechart

我读过一些关于 teechart 周末问题的文章，建议是愚蠢的步骤：

1.  `TChart1.Series(0).XValues.DateTime = False`
2.  使用连续数字作为 Xvalues
3.  用日期时间替换 X 标签。

问题是：我根据日期、小时和分钟绘制实时烛台，我必须保持 TChart1.Series(0).XValues.DateTime = True

那么有什么方法可以摆脱空周末（不仅是周末，甚至一天中的某个时间，例如从 5:15 到 6:00 都需要删除），以便连续显示烛台（Xvalues 必须保持日期时间风格）？

谢谢。

（顺便说一句，我使用 Teechart2011 Eval & VB6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:28:13.290

从[这里](https://stackoverflow.com/questions/12732336/how-to-get-rid-of-the-vacant-weekend-in-the-candlestick-chart-01)截取你的代码，我创建了一个简单的示例，在这里我似乎可以正常工作。在下面找到它：

```
Private Sub Form_Load() 
  Dim month, day, year, hour, minute, second, nums As Integer
  Dim tmpDate As Date
  month = 6
  day = 7
  year = 2012
  hour = 6
  minute = 15
  second = 0
  nums = 10

  TChart1.Aspect.View3D = False
  TChart1.AddSeries scCandle
  TChart1.Axis.Bottom.Labels.Angle = 90

  For i = 1 To nums
    tmpDate = (DateValue(day & "," & month & "," & year) + TimeValue(hour & ":" & minute & ":" & second))
    If Not IsWeekend(tmpDate) Then
      With TChart1.Series(0)
        .asCandle.AddCandle .Count, 5, 15, 0, 10, tmpDate, clTeeColor
      End With
    End If
    day = day + 1
  Next i
End Sub

Public Function IsWeekend(InputDate As Date) As Boolean
    Select Case Weekday(InputDate)
        Case vbSaturday, vbSunday
            IsWeekend = True
        Case Else
            IsWeekend = False
    End Select
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:07:04.433

TeeChart 根据关联轴上的 X 和 Y 值绘制每个点。您可以使用中断轴工具在轴上获得不连续的效果，但在水平轴上连续绘制点的最简单方法是使用连续的 X 值。因此，我建议您使用该`TChart1.Series(i).asCandle.AddCandle XVal, OpenVal, HighVal, LowVal, CloseVal, Label, clTeeColor`功能，即：

*   XVal: `TChart1.Series(i).Count`，而不是从系统检索的日期
*   标签：从系统中检索到的日期，转换为字符串

如果这不能解决问题，因为您仍然认为您必须有 DateTime XValues，请解释原因。

# php - 输入类型文件上传的最大文件数

> ID：12707321
> 
> 赞同：0
> 
> 时间：2012-10-03T11:14:57.650
> 
> 标签：php, html, file-upload, types, input

> **可能重复：**
> [最大文件数可以同时 php 上传](https://stackoverflow.com/questions/3564796/max-file-number-can-php-upload-at-same-time)

我正在尝试使用 html 和 php 上传多个文件

```
<input type="file" name="upload[]" accept="image/gif, image/jpeg, application/x-tar, application/x-zip-compressed"  multiple="true"> 
```

在php中使用时

```
print count($_FILES['upload']); 
```

即使我在 html 中选择了 20 个，我也总是获得最多 5 个文件。我应该怎么做才能一次上传 20 个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:26:46.623

您可能需要更改 php.ini 文件并增加限制`max_file_uploads`（现在在您的服务器中必须为 5）

还要确保对这些参数进行相关更改（如果需要）

```
upload_max_filesize
post_max_size
max_input_time
max_execution_time 
```

* * *

**LevSahakyan 解决了这个问题。**

他在使用

```
for($i=0; $i<count($_FILES['upload']); $i++) 
```

并且因为“上传”本身就是一个数组，并且有 5 个参数（名称、类型、tmp_name、错误和大小），所以它只上传了 5 个项目。现在他正在使用正确的参数 -

```
for($i=0; $i<count($_FILES['upload']['name']); $i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:33:23.350

您需要在 php.ini 文件中更改这 2 个参数以允许这样做。

```
max_file_uploads = 20
post_max_size = 256M 
```

这将允许您同时上传 20 个文件，并增加上传文件大小的最大允许值。

# javascript - 在 webview 中启用 Javascript 时，Android Webview 未检测到链接点击

> ID：12707322
> 
> 赞同：3
> 
> 时间：2012-10-03T11:14:59.330
> 
> 标签：javascript, android, webview, webviewclient

在我的应用程序中，我需要检测 webview 中的链接点击。我使用以下代码

```
web = (WebView)findViewById(R.id.webView1);
        web.getSettings().setJavaScriptEnabled(true);
        web.setWebViewClient(new VideoWebViewClient());

        web.loadUrl("http://syncquik.com/home.php");

class VideoWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            System.out.println("link===="+url);
            view.loadUrl(url);

            return false;
        } 
```

但是在 编写`shouldOverrideUrlLoading(WebView view, String url)`时不会调用方法 。`web.getSettings().setJavaScriptEnabled(true);`但是如果我不写 `web.getSettings().setJavaScriptEnabled(true);`then `shouldOverrideUrlLoading(WebView view, String url)`就会被调用并检测到链接。我需要这两个，需要启用javascript并检测链接点击。请帮我弄清楚这一点。圣努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-28T12:28:34.377

它适用于我的项目，也许您应该尝试清理您的项目并通过 Project --> Clean 重试

# javascript - Ajaxform 在调用提交之前获取数据

> ID：12707323
> 
> 赞同：0
> 
> 时间：2012-10-03T11:15:00.610
> 
> 标签：javascript, jquery, html, ajaxform

我正在使用[AjaxForm 插件](http://www.malsup.com/jquery/form)

我想提醒数据正在推送到服务器的内容。

```
<form class='frmAppList'>
    <input type='hidden' name='deviceid' value='<deviceId>'>
    <input type='hidden' name='operationtype' value='<Coming from server>'>
    <input type='hidden' name='type' value='command'>
    <button type="submit" class='btnAppsList button'>
         APPS LIST
    </button>
</form> 
```

这是在**jsp**中的循环，因此**表单**不止一次生成具有**class** -> **frmAppList**。

我正在使用该类来应用**ajaxform**，如下所示：

```
$('.frmAppList').ajaxForm({
   url : 'urltoserver',
   dataType : 'json',
   type : 'post',
   beforeSubmit : function() {
     return false;
     //something here that gives me the device id that is passed
     //since the form is not one I cant use id, also every form has **deviceid**
     //i need to get that deviceid so that i can pass it in **success** ajax call
     //at ***Label->(A)*** 
   },
   success : function(response) {
      if (response.status) {
        //***Label*** ->(A)
        //have to call other ajax call to take the data 
        //for that i need the device id that is going in this ajax call
      }
   },
   error : function(xhr, ajaxOptions, thrownError) {
      alert('error');
   },
   timeout :10000
}); 
```

我怎样才能获得该设备 ID，请帮助我.... 非常感谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:10:28.903

来自 ajaxForm 文档：

```
success
Callback function to be invoked after the form has been submitted. If a 'success' callback function is provided it is invoked after the response has been returned from the server. It is passed the following arguments:
1.) responseText or responseXML value (depending on the value of the dataType option).
2.) statusText
3.) xhr (or the jQuery-wrapped form element if using jQuery < 1.4)
4.) jQuery-wrapped form element (or undefined if using jQuery < 1.4)
Default value: null 
```

第三个和第四个参数是你要找的。从那里开始：

```
success : function(response,status,request,form) {
  console.log(request,form);
} 
```

# android - 如何将应用内计费项目设置为已使用？

> ID：12707324
> 
> 赞同：1
> 
> 时间：2012-10-03T11:15:04.577
> 
> 标签：android, in-app-purchase, google-play

我们正在编写类似聊天的应用程序，用户可以在其中购买一些消息。假设有 100 条消息。我们可以在我们的应用程序中控制用户使用了多少这些消息。

现在想象一下用户用尽了购买的 100 条消息，然后重新安装应用程序，瞧——用户又收到了 100 条消息！

那么问题来了：如何控制那个item已经被使用了？我可以向应用内服务器报告购买的物品不能再使用了吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:10:49.240

这些将是非托管项目，根据定义，您负责管理它们。唯一可靠的方法是在您自己的服务器上执行此操作，并使用某种稳定的用户标识符（例如他们的 Google 帐户）关联项目。如果您所说的“应用内服务器”是指 Google 的服务器，那么他们只会对托管项目执行此操作：他们会检查您是否已经拥有该项目，如果是，则会收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:37:22.183

使用新的 Market Billing 库修订版 #3 - 可以使用物品消耗

[证明链接](http://android-developers.blogspot.ru/2012/12/in-app-billing-version-3)

# blackberry - 我们可以更改黑莓 Java 中的文本颜色吗？我认为没有提供 API

> ID：12707329
> 
> 赞同：0
> 
> 时间：2012-10-03T11:15:22.700
> 
> 标签：blackberry, fonts

如何更改黑莓中文本的字体颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:19:51.357

试试这个 -

```
LabelField l = new LabelField("hello") {
  protected void paint(Graphics g) {
      g.setColor(0x0511a0a); //here you can add any colors. either color codes (like - 0x0511a0a) or like this- Color.RED
      super.paint(g);
  }
}; 
```

# oracle - varchar2 字段中的多行文本

> ID：12707331
> 
> 赞同：0
> 
> 时间：2012-10-03T11:15:24.320
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我有一个多行日期，我想将它插入到表格中。当然，我想在保留墨盒返回位置的同时检索它。

例如。我在文本文件中有这样的数据

```
-------------------------------
| ID  |   text                |
|     |                       |
| 01  |  This is headline.    |
| 02  |  This is all the text.|
|     |  ¤                    |
|     |  Of great story once  |
| 03  |  Great weather        |
------------------------------- 
```

¤ 是墨盒返回的指示器。当我尝试运行查询时，数据如下所示：

```
-------------------------------
| ID  |   text                |
|     |                       |
| 01  |  This is headline.    |
| 02  |  This is all the text.|
| 03  |  Great weather        |
------------------------------- 
```

我想在表格中有什么：（我不知道如何在下面的示例中显示墨盒返回）

```
-----------------------------------------------------
| ID  |   text                                      |
|     |                                             |
| 01  |  This is headline.                          |
| 02  |  This is all the text. Of great story once  |
| 03  |  Great weather                              |
----------------------------------------------------- 
```

这当然是错误的，因为 ID 02 的数据没有完全导入。

这是我的脚本：

```
LOAD DATA
INFILE "file.txt" BADFILE "file.bad" DISCARDFILE "file.dsc"
APPEND
INTO TABLE text_table
FIELDS TERMINATED BY X'7C' TRAILING NULLCOLS
(
    employee_id,           
    exp_pro CHAR(4000)
) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:18:12.473

首先确保问题不在于您查看数据的方式（或使用的 IDE）。有时观众会简单地停在换行符（或回车，或一些二进制字符）处。

尝试先转储一些数据的十六进制表示。例如：

```
with txt as (
select 'This is line 1.' || chr(13) || chr(10) || 'Line 2.' as lines
from dual
)
select dump(txt.lines, 16) from txt; 
```

您应该能够看到 0d0a (crlf) 字符，或存在的任何其他“不可打印”字符（如果有）。

# android - 来自服务的 runOnUiThread

> ID：12707332
> 
> 赞同：6
> 
> 时间：2012-10-03T11:15:24.477
> 
> 标签：android

我的服务中有一个方法必须从线程中调用，但我不希望该代码在线程中执行。

如果我没有活动并且我从服务中调用它，我该如何调用 runOnUiThread？

谢谢。

我对 AsyncTask 解决方案不感兴趣！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T11:54:53.763

也许a`Handler`可以帮助你。Handler 是与创建的线程相关联的元素，您可以将带有代码的 runnable 发布到 Handler，并且该 runnable 将在创建 Handler 的线程中执行。

资料链接：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T11:27:30.257

您滥用的单词数量令人费解。`runOnUiThread`是在主线程上运行代码的辅助方法。通常，当您尝试从工作线程更新 UI 时会使用此方法。由于 a`Service`没有 UI，因此 runOnMainThread 似乎非常不合适。

您的问题应改写为以下任一问题：

*   如何在 MainThread 之外运行我的代码？

使用`AsyncTask`或`IntentService`。

*   当我当前在另一个线程中时，如何在 MainThread 上执行代码。（通常`Activity` `runOnUiThread`可以使用。）

`Handler`在您`Service`的主线程上创建一个并`Runnables`在其上发布/向其发送消息。

# jaxb - 具有冲突 xsd 导入的 wsdl

> ID：12707336
> 
> 赞同：0
> 
> 时间：2012-10-03T11:15:40.297
> 
> 标签：jaxb, jax-ws, wsimport

一段时间以来，我试图找到解决以下问题的方法。我有一个包含几个 (6) xsd 导入的 wsdl 文件。我无法更改这些 xsd，因为它们在我的项目之外。总共有 4 个定义，这些定义在其中 2 个模式中略有不同。我试图将每个“冲突”的 xsd 模式转换为它自己的包。我尝试了以下绑定，但它没有完成这项工作：

testbindings.jaxb：

```
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" version="2.1">
    <bindings schemaLocation="a.xsd">
         <schemaBindings>
               <package name="org.wsi.a" />
         </schemaBindings>
    </bindings>
</bindings> 
```

使用：`wsimport -p org.wsi -b testbindings.jaxb broker.wsdl`

所有类都在 中生成`org.wsi`，没有类在`org.wsi.a`. 如果没有 -p 开关，所有 xsd 都会在它们自己的默认包中生成。但不能告诉 wsimport 为每个 xsd 使用特定的包。此时我使用以下绑定文件，这可能是不正确的，但 wsimport 不会抱怨：

```
<?xml version="1.0"?>
<jaxws:bindings xmlns:jaxws="http://java.sun.com/xml/ns/jaxws" xmlns:xsd="http://www.w3.org/2001/XMLSchema"              xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb">

<jaxws:bindings wsdlLocation="broker.wsdl" node="wsdl:definitions/wsdl:types/xsd:schema">

    <jaxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema" node="//xs:schema/xs:import[@namespace='http://docs.oasis-open.org/wsn/b-2']">>
        <jaxb:schemaBindings>
            <jaxb:package name="org.broker.wsi.b_2"/>
        </jaxb:schemaBindings>
    </jaxb:bindings>

    <jaxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema" node="//xs:schema/xs:import[@namespace='http://docs.oasis-open.org/wsn/t-1']">>
        <jaxb:schemaBindings>
            <jaxb:package name="org.broker.wsi.t_1"/>
        </jaxb:schemaBindings>
    </jaxb:bindings>

</jaxws:bindings> 
```

在包 org.broker.wsi.b_2 和 org.broker.wsi.t_1 中，不会生成任何文件。

我使用了以下指定的绑定： http: [//docs.oracle.com/cd/E13222_01/wls/docs103/webserv/data_types.html#wp227713](http://docs.oracle.com/cd/E13222_01/wls/docs103/webserv/data_types.html#wp227713) 但可能不正确。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:37:25.417

问题/答案中描述了为 wsdl、内部 xsd 和外部 xsd 设置正确包名称的问题：

*   [wsimport - 如何在单独的项目/文件夹中生成服务端点类和 JAXB 类](https://stackoverflow.com/questions/8211668/wsimport-how-to-generate-service-endpoint-classes-and-jaxb-classes-in-seperate)，发布者： [dma-k](https://stackoverflow.com/users/267197/dma-k "作者")

int-bindings.xml 文件：

```
<?xml version="1.0"?>
<jaxws:bindings version="2.0"
                xmlns:jaxws="http://java.sun.com/xml/ns/jaxws" 
            xmlns:xsd="http://www.w3.org/2001/XMLSchema"                 
            xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
            xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
            wsdlLocation="broker.wsdl">

<jaxws:package name="org.broker.wsi" />

<jaxb:bindings node="//xsd:schema">
    <jaxb:schemaBindings>
        <jaxb:package name="org.broker.wsi.al"/>
    </jaxb:schemaBindings>
</jaxb:bindings> 
```

外部绑定文件（缩写）：

```
<jaxb:bindings version="1.0"
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <jaxb:bindings schemaLocation="http://docs.oasis-open.org/wsn/b-2.xsd" node="//xsd:schema">
            <jaxb:schemaBindings>
                 <jaxb:package name="org.broker.wsi.oasis.b2"/>
            </jaxb:schemaBindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

# c# - StructureMap 使用 XML 配置获取 appSettings 值

> ID：12707337
> 
> 赞同：1
> 
> 时间：2012-10-03T11:15:47.327
> 
> 标签：c#, dependency-injection, structuremap

是否可以在 XML 中配置 StructureMap 以从 appSettings 检索构造函数参数值？

我正在寻找与此类似的 XML 配置：

```
For<IService>().Use<Service>()
    .Ctor<string>("serviceUrl").EqualToAppSetting("serviceUrl"); 
```

PS XML 配置的原因是在开发和测试环境中使用 stub 版本的服务，但在生产中真正实现。

# javascript - 打开 IE InPrivate 模式

> ID：12707338
> 
> 赞同：2
> 
> 时间：2012-10-03T11:15:57.253
> 
> 标签：javascript

我需要使用`InPrivate`模式打开一个 IE 实例，然后在该实例的选项卡中打开 2 个页面。我已经使用它 2 天了，我用它打开了 2 个单独`IE`的窗口和我想要的页面，但是我找不到我需要用来在同一个窗口中打开两个页面的推荐。

这是我的 JS 那种作品

```
var oShell = new ActiveXObject("WScript.Shell");
oShell.run("\"%ProgramFiles%\\Internet Explorer\\iexplore\" -private http://www.yahoo.com");
oShell.run("\"%ProgramFiles%\\Internet Explorer\\iexplore\" -private http://www.google.com"); 
```

我发现这个页面我认为会有所帮助，但我似乎无法掌握建议的内容或所需的命令。

[InternetExplorer.Application 与 -nomerge 开关？](https://stackoverflow.com/questions/2686228/internetexplorer-application-with-nomerge-switch)

# extjs - Proper way to extend Ext.panel.Panel?

> ID：12707347
> 
> 赞同：3
> 
> 时间：2012-10-03T11:16:31.747
> 
> 标签：extjs, extjs4.1

I am creating a GUI for a webpage using Ext JS 4.1.1\. I have tried to create a component ('*GeneSearchComponent*' below) which I can use in a more complicated layouts. But for some reason I cannot insert an instance of '*GeneSearchComponent*' into *hpanel*. What am I missing in extending the pre-defined '*Ext.panel.Panel*' class (and in creating a "widget" of my own)?

If I remove the call to "`Ext.create('gene-search-component', ...`", everything works; if I put it back in, everything breaks. I wonder why.

(I have not included the definition of 'gene-combobox'. I am pretty convinced that it's not the root cause of my problem.)

Thanks for your time!

Tuomas

```
Ext.define('GeneSearchComponent', {
    extend: 'Ext.panel.Panel',
    alias: ['gene-search-component'],
    constructor: function(cnfg) {
        this.callParent(arguments);
        this.initConfig(cnfg);
    },
    config: {
        collapsible: true,
        frame: true,
        title: 'Search',
        bodyPadding: '15 15 15 15',
        width: 350,
        layout: {
            type: 'vbox', 
            align: 'left'
        },
        items: [
            Ext.widget('gene-combobox', {
                id: 'comboboxid'
            }),
            Ext.create('Ext.Button', {
                text: 'Search',
                handler: function() {
                    dosomething();
        }})]
    },
    onRender: function() {
        this.callParent(arguments);
    }
});

Ext.application({
    name: 'FW',
    launch: function() {
        var bd = Ext.getBody();
        var div = Ext.get("search_form");

        var hpanel = Ext.create('Ext.panel.Panel', {
            id: 'horizontal-panel',
            title: "HBoxLayout Panel",
            layout: {
                type: 'hbox',
                align: 'middle'
            },
            items: [
                Ext.create('Ext.container.Container', {
                    id: 'another-panel',
                    title: "VBoxLayout Panel",
                    width: 250,
                    layout: {
                        type: 'vbox',
                        align: 'left'
                    },
                    items: [{
                        xtype: 'panel',
                        width: 250,
                        title: ' Panel One',
                        flex: 2
                    },{
                        xtype: 'panel',
                        width: 250,
                        title: ' Panel Two',
                        flex: 1
                    },{
                        xtype: 'panel',
                        width: 250,
                        title: ' Panel Three',
                        flex: 1
                }]}),
                Ext.create('gene-search-component', {
                    id: 'searchPanel',
            })],
            renderTo: div,
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:16:10.180

The problem is that you have not given the `gene-search-component` the `widget` namespace when configuring its alias.

```
alias: 'widget.gene-search-component' 
```

Also to echo the comments on your OP you are doing a lot of unnecessary typing creating components in the way that you are. You should make use of the xtype field rather than using Ext.Create everywhere. I've modified your code to show you how much simpler it could be.

[http://jsfiddle.net/hzXx8/](http://jsfiddle.net/hzXx8/)

# ios - 找不到实例方法“-supportsOrientation”

> ID：12707348
> 
> 赞同：2
> 
> 时间：2012-10-03T11:16:38.423
> 
> 标签：ios, cordova, xcode4

我正在使用 cordova 2.1.0 创建一个应用程序，但在构建过程中，我收到以下警告

找不到实例方法“-supportsOrientation:”（返回类型默认为“id”）。

这是我的 AppDelegate.m 文件 -

```
/*
 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
 */

//
//  AppDelegate.m
//
//  Created by ___FULLUSERNAME___ on ___DATE___.
//  Copyright ___ORGANIZATIONNAME___ ___YEAR___. All rights reserved.
//

#import "AppDelegate.h"
#import "MainViewController.h"

#import <Cordova/CDVPlugin.h>

@implementation AppDelegate

@synthesize window, viewController;

- (id) init
{   
    /** If you need to do any extra app-specific initialization, you can do it here
     *  -jm
     **/
    NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage]; 
    [cookieStorage setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];

    self = [super init];
    return self;
}

#pragma UIApplicationDelegate implementation

/**
 * This is main kick off after the app inits, the views and Settings are setup here. (preferred - iOS4 and up)
 */
- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{    
    NSURL* url = [launchOptions objectForKey:UIApplicationLaunchOptionsURLKey];
    NSString* invokeString = nil;

    if (url && [url isKindOfClass:[NSURL class]]) {
        invokeString = [url absoluteString];
        NSLog(@"Shop launchOptions = %@", url);
    }    

    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    self.window = [[UIWindow alloc] initWithFrame:screenBounds];
    self.window.autoresizesSubviews = YES;

    self.viewController = [[MainViewController alloc] init];
    self.viewController.useSplashScreen = YES;
    self.viewController.wwwFolderName = @"www";
    self.viewController.startPage = @"index.html";
   // self.viewController.invokeString = invokeString;

    // NOTE: To control the view's frame size, override [self.viewController viewWillAppear:] in your view controller.

    // check whether the current orientation is supported: if it is, keep it, rather than forcing a rotation
    BOOL forceStartupRotation = YES;
    UIDeviceOrientation curDevOrientation = [[UIDevice currentDevice] orientation];

    if (UIDeviceOrientationUnknown == curDevOrientation) {
        // UIDevice isn't firing orientation notifications yet… go look at the status bar
        curDevOrientation = (UIDeviceOrientation)[[UIApplication sharedApplication] statusBarOrientation];
    }

    if (UIDeviceOrientationIsValidInterfaceOrientation(curDevOrientation)) {
        if ([self.viewController supportsOrientation:curDevOrientation]) {
            forceStartupRotation = NO;
        } 
    } 

    if (forceStartupRotation) {
        UIInterfaceOrientation newOrient;
        if ([self.viewController supportsOrientation:UIInterfaceOrientationPortrait])
            newOrient = UIInterfaceOrientationPortrait;
        else if ([self.viewController supportsOrientation:UIInterfaceOrientationLandscapeLeft])
            newOrient = UIInterfaceOrientationLandscapeLeft;
        else if ([self.viewController supportsOrientation:UIInterfaceOrientationLandscapeRight])
            newOrient = UIInterfaceOrientationLandscapeRight;
        else
            newOrient = UIInterfaceOrientationPortraitUpsideDown;

        NSLog(@"AppDelegate forcing status bar to: %d from: %d", newOrient, curDevOrientation);
        [[UIApplication sharedApplication] setStatusBarOrientation:newOrient];
    }

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
}

// this happens while we are running ( in the background, or from within our own app )
// only valid if Shop-Info.plist specifies a protocol to handle
- (BOOL) application:(UIApplication*)application handleOpenURL:(NSURL*)url 
{
    if (!url) { 
        return NO; 
    }

    // calls into javascript global function 'handleOpenURL'
    NSString* jsString = [NSString stringWithFormat:@"handleOpenURL(\"%@\");", url];
    [self.viewController.webView stringByEvaluatingJavaScriptFromString:jsString];

    // all plugins will get the notification, and their handlers will be called 
    [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:CDVPluginHandleOpenURLNotification object:url]];

    return YES;    
}

- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{    
    // IPhone doesn't support upside down by default, while the IPad does.  Override to allow all orientations always, and let the root view controller decide whats allowed (the supported orientations mask gets intersected).
    NSUInteger supportedInterfaceOrientations = (1 << UIInterfaceOrientationPortrait) | (1 << UIInterfaceOrientationLandscapeLeft) | (1 << UIInterfaceOrientationLandscapeRight) | (1 << UIInterfaceOrientationPortraitUpsideDown);
    return supportedInterfaceOrientations;
}

@end 
```

我也无法运行该应用程序，日志上显示以下错误 -

```
2012-10-03 16:38:07.653 Shop[829:13403] Multi-tasking -> Device: YES, App: YES
2012-10-03 16:38:07.671 Shop[829:13403] -[MainViewController supportsOrientation:]: unrecognized selector sent to instance 0x7e725e0
2012-10-03 16:38:07.718 Shop[829:13403] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MainViewController supportsOrientation:]: unrecognized selector sent to instance 0x7e725e0'
*** First throw call stack:
(0x1a2022 0x207dcd6 0x1a3cbd 0x108ed0 0x108cb2 0x2dfa 0x337386 0x338274 0x347183 0x347c38 0x33b634 0x271fef5 0x176195 0xdaff2 0xd98da 0xd8d84 0xd8c9b 0x337c65 0x339626 0x290c 0x28a5 0x1)
terminate called throwing an exception(lldb) 
```

我找不到与它相关的任何东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:28:43.510

我发现有效的是从架构和有效架构列表中删除 armv6 并添加 armv7s

在 Xcode 中：

*   项目导航 > 您的项目 > 构建设置选项卡
*   在搜索框中，搜索架构
*   选择：标准armv7 armv7s

*   项目导航 > CordovaLib.xcodeproj > 构建设置选项卡

*   在搜索框中，搜索架构
*   选择：标准armv7 armv7s
*   在搜索框中搜索有效架构
*   删除 armv6
*   添加armv7s

# sql - 选择案例中的语法错误

> ID：12707350
> 
> 赞同：1
> 
> 时间：2012-10-03T11:16:39.127
> 
> 标签：sql, sql-server-2008-r2, case, for-xml-path

几天前我开始学习 SQL，我有以下查询，它在“case”附近给了我一个错误，我似乎无法弄清楚：

```
SELECT * , Stuff((SELECT ', ' +  CAST( orderid as varchar(10))
      FROM( oitems t2 
 case when (ocardtype in ('PayPal','Sofort') OR
        ocardtype in ('mastercard','visa') and
        odate is not null) then 
              FOR XML PATH(''), 1, 2, '') [Proccessed] else  FOR XML PATH(''), 1, 2, '') [NotProccessed] end)
                      FROM orders t1
    Group by orderid,t1.odate, t1.ocardtype 
```

我猜你知道这段代码应该做什么，但我不确定这是否是正确的使用方式`select case`。

```
oitems table

+---------+-----------+----------+
| orderid | catalogid | numitems |
+---------+-----------+----------+
| o737    |       353 |        1 |
| o738    |       364 |        4 |
| o739    |       353 |        3 |
| o740    |       364 |        6 |
| o741    |       882 |        2 |
| o742    |       224 |        5 |
| o743    |       224 |        2 |
+---------+-----------+----------+

orders table
    +-----------------+------------+------------+
    |         orderid | ocardtype  |   odate    |
    +-----------------+------------+------------+
    |     o737        | Paypal     |            | 'OK
    |     o738        | MasterCard | 01.02.2012 | 'OK
    |     o739        | MasterCard | 02.02.2012 | 'OK
    |     o740        | Visa       | 03.02.2012 | 'OK
    |     o741        | Sofort     |            | 'OK
    |     o742        |            |            | 'ignore because ocardtype is empty
    |     o743        | MasterCard |            | 'ignore because Mastercard no odate
    +-----------------+------------+------------+ 
```

预期结果

```
+-----------+------------------------+--------------+
| catalogid | ProcessedSucssessfully | NotProcessed |
+-----------+------------------------+--------------+
|       353 |o737,o739               |              |
|       364 |o738,o740               |              |
|       882 |o741                    |              |
|       224 |                        |o742,o743     |
+-----------+------------------------+--------------+ 
```

我有以下条件，您可以在上述代码的案例陈述中找到这些条件

1.  如果`ocardtype`为空，则添加`orderid`到`NotProcessed`

2.  如果`ocardtype`某些订单是万事达卡或维萨卡并且日期为空，则将 orderid 添加到`NotProcessed`

3.  如果`ocardtype`是 Paypal 或 Sofort，则不要检查日期并将其添加`orderid`到`ProcessedSucssessfully`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:25:28.740

检查这个请求

```
SELECT CatalogId, ProcessedSucssessfully = 
       STUFF((SELECT ', ' + b.OrderId
              FROM oitmes b JOIN orders o ON b.OrderId = o.OrderId
              WHERE b.CatalogId = a.CatalogId
              AND (o.OcardtType in ('PayPal','Sofort') OR o.OcardtType in  ('mastercard','visa') and o.odate is not null)    
              FOR XML PATH('')), 1, 2, ''),
                  NotProcessed =
        STUFF((SELECT ', ' + c.OrderId
               FROM oitmes c JOIN orders o ON c.OrderId = o.OrderId
               WHERE c.CatalogId = a.CatalogId
               AND (o.OcardtType in ('mastercard') OR o.OcardtType is null) and o.odate is null
               FOR XML PATH('')), 1, 2, '')
FROM oitmes a
GROUP BY a.CatalogId 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/668b4/3)上的演示[](http://sqlfiddle.com/#!3/668b4/3)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:01:51.893

似乎您使用的是之前而不是之后的`FROM`子句：`CASE`

```
SELECT   ProductNumber, Category =
      CASE ProductLine
         WHEN 'R' THEN 'Road'
         WHEN 'M' THEN 'Mountain'
         WHEN 'T' THEN 'Touring'
         WHEN 'S' THEN 'Other sale items'
         ELSE 'Not for sale'
      END,
   Name
FROM Production.Product
ORDER BY ProductNumber 
```

我能想到的另一件事是，您没有返回 true 或 false ，`CASE`这可能会给您带来错误。**

# .net - .net 3.5 的痣

> ID：12707351
> 
> 赞同：1
> 
> 时间：2012-10-03T11:16:45.240
> 
> 标签：.net, .net-3.5, msbuild, mstest, moles

我们正在尝试在单元测试中使用 Moles。

但是，我们遇到了问题，因为我们的代码当前是使用 .net 3.5 构建的，并且目前无法将其升级到 .net 4。

当我尝试运行测试时，出现以下错误：

“您只能使用针对 .NET 框架 3.5 的测试程序集的默认主机适配器运行测试”。

我在这里的另一篇文章中发现这是 VS 的一个已知限制（“仅在默认主机适配器中支持 .NET Framework 3.5 测试的执行”）。

所以我随后将测试项目的目标框架更改为 .NET 4.0，它在本地对我的问题进行了排序，但是当我尝试在 TFS 中运行构建时，我得到：

“测试运行只能针对单个 .Net 框架版本。不支持在单个运行中针对多个框架版本。”

有什么想法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:44:18.683

确保目标项目和测试项目都设置为 .NET Framework 3.5 配置文件，而不是客户端配置文件。

# jpanel - 如何使 JOptionPane.showOptionDialog 适合您的屏幕

> ID：12707358
> 
> 赞同：0
> 
> 时间：2012-10-03T11:17:08.140
> 
> 标签：jpanel

```
String[] options = {"Adlawan", "Angeles", "Arreza", "Benenoso", "Bermas", "Brebante",       "Cabaylo", "C. Cainglet", "O. Cainglet",
                "Calunsag", "Cameros", "Casanaan", "Catulong", "Chicote", "Dela Paz", "Ea", "Echavez"};

int choose = JOptionPane.showOptionDialog(null, "                    WHICH EMPLOYEE'S     DATA WOULD YOU LIKE TO RESET?", "Click to One Choose ", JOptionPane.DEFAULT_OPTION, JOptionPane.QUESTION_MESSAGE, null,
            option, option[16]);

if(choose == 0)
{
    JOptionPane.showMessageDialog(null, Ms. Adlawan is tall);
}

else if (choose == 1)
{
    JOptionPane.showMessageDialog(null, Mr. Angeles is old);
} 
```

这些是我上面的代码。它运行完美，如果我运行这些代码，将出现 17 个按钮，如果我单击由（选择 == 0）表示的“Adlawan”，则会出现消息（Adlawan 女士很高），如果我单击由（选择）表示的“Angeles” == 1) 出现消息（安吉利斯先生老了）。我遇到的问题是所有 17 个选项都不适合屏幕，我怎样才能使这 17 个选项按钮适合屏幕。我已经尝试过 JPanel 并将 JScrollPane 添加到面板并将这些选项按钮添加到面板但它不起作用。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:14:03.757

我建议你使用`JOptionPane.showInputDialog`.

```
String selected = (String)JOptionPane.showInputDialog(
                    null,
                    "WHICH EMPLOYEE'S DATA WOULD YOU LIKE TO RESET?",
                    "Select One To Choose",
                    JOptionPane.DEFAULT_OPTION,
                    null, //icon
                    options ,
                    options[0]);

if(selected!=null){
  System.out.println("Selected option : " + selected); 
} 
```

# html - How can I access the request body of a POST request from Flex?

> ID：12707359
> 
> 赞同：0
> 
> 时间：2012-10-03T11:17:12.313
> 
> 标签：html, apache-flex, http-post

I have an HTML page and it needs to send a POST request for another HTML page that's embedding a Flex application. How can I access the request body from that request in Flex?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:10:50.650

Even though you say that you are POSTING a request from one HTML page to another; that is not actual what happens. The POST rewuest is sent to a server. That server may then process the request somehow and spit out a new HTML page. But, you cannot POST from one HTML page to another.

Since Flex is a client side technology, you cannot use a POST Request to pass data into it. You also wouldn't be able to access the POST request from Javascript as a parallel.

So, you can have your server process the data, and prepare it to send back to your Flex app. You could do this using FlashVars. If you have a greater data set, then you could somehow save the data to the server, and load it into the Flex app using HTTPService, RemoteObject, or WebService.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:11:11.587

you can use **FlashVar** and **External Interface** to pass data from parent page to embeded Flex app Please take a look on [Communicating with the wrapper](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f17.html)

Hopes that Helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T15:03:18.147

In the end I used a GET request and attached the data to the URL. I know it's ugly, but couldn't find any other way...

# java - Java MySQL事务和executeBatch

> ID：12707361
> 
> 赞同：3
> 
> 时间：2012-10-03T11:17:25.003
> 
> 标签：java, mysql, transactions

我遇到了一个我无法弄清楚的问题。

我有以下 SQL 代码片段，其中我将多行插入到表中。重要的是不要在异常上添加任何行。

代码按预期工作，但如果删除了回滚部分，则会在异常中添加一些行，即使 connection.commit(); 永远不会被调用。这是为什么？

我担心的是：如果我的应用程序在调用批量插入时被操作系统杀死，会发生什么情况，从而永远不会调用回滚部分。我的测试表明在这种情况下没有插入任何内容。但是，如果删除了回滚部分，我仍然对为什么在异常中插入某些行感到困惑。

对此有任何提示吗？

```
 Connection connection = null;
    PreparedStatement stmt = null;

    try {
        connection = DBConnectionFactory.getInstance().getConnection(JDNI);
        connection.setAutoCommit(false);

        stmt = connection.prepareStatement(
                "INSERT INTO " + TABLE_PREFIX + TABLE_OUTBOX + "...");

        // add multiple statements

        stmt.executeBatch();

        connection.commit();

    } catch (Exception ex) {
        try {
            log.debug(ex);
            log.debug("rolling back insert message batch");
            connection.rollback();
            log.debug("rollback success");
        } catch(Exception e) {
            log.debug("unable to rollback", e);
        }
        throw new TranquilityException("could not insert endpoints!!", ex);
    } finally {
        if (stmt != null) {
            try {
                stmt.close();
            } catch (Exception ex) {
                log.warn("Could not close sql statement", ex);
            }
        }
        if (connection != null) {
            try {
                connection.setAutoCommit(true);
                connection.close();
            } catch (Exception ex) {
                log.error("Could not close sql connection", ex);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:11:15.003

我认为发生这种情况的原因有两个：

*   首先是您似乎正在使用连接池。在这种情况下，您的连接将被重新使用。如果您将带有未提交事务的连接返回到池，并且稍后由另一个方法签出该连接，则在提交该后一个方法时，该事务可能会被提交。

*   第二个（也更有可能）是在您的 finally 块中，您正在设置 connection.setAutoCommit(true); 当您的方法完成时，这将导致您的连接中的所有内容都被刷新。我知道您需要为连接池执行此操作，但您应该在执行此操作之前确保您的连接处于完成状态。

# python - 循环遍历 Django 中的模型并默认获取列名和 .get_FOO_display

> ID：12707364
> 
> 赞同：0
> 
> 时间：2012-10-03T11:17:32.147
> 
> 标签：python, django

我有以下内容：

```
# model

TITLE_CHOICES = (
    ('mr', 'Mr.'),
    ('ms', 'Ms.'),
    ('mrs', 'Mrs.'),
    ('mis', 'Miss.'),
)
class Client(models.Model):
    name_title = models.CharField(max_length=3, choices=TITLE_CHOICES)
    first_name = models.CharField(max_length=40)
    last_name = models.CharField(max_length=40)

# form
class ClientForm(ModelForm):
    class Meta:
        class = Client

# view
def client_view(request):
    client = Client.object.get(id=1)
    clientForm = ClientForm(instance=client)
    return render_to_response('client.html',{'client':client,
                                             'clientForm':clientForm}, ...)

# client.html
... 
```

如何遍历`client`打印出列名和值的对象，同时确保如果值是 a`choice`它打印出人类可读的选择值，而不是存储的值（`get_title_display`）？

为什么这在 Django 中不容易做到？（这不是很常见的事情吗？）

如果我不能这样做，我必须静态遍历每一列并使用`get_title_display`，这意味着模型和模板之间没有分离，这意味着如果我更改我的模型，我必须手动更新模板。不是很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:28:34.850

尝试类似：

```
# add to your Client model    
def get_fields(self):
    fields_display = []
    for f in Client._meta.fields:
        name = f.name        
        if len(f.choices) == 0:
            fields_display.append([name, f.value_to_string(self)])
        else:
            fields_display.append([name, getattr(self,"get_%s_display" % name)()])

   return fields_display 
```

然后，您可以在模板中为给定对象循环 get_fields

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:01:25.180

如果要`get_FOO_display`默认获取，则必须覆盖该`__getattribute__`方法。尝试这样的事情：

```
class FooModel(models.Model):
    ...
    def __getattribute__(self, item):
        get = lambda i: object.__getattribute__(self, i)
        name_map = get('_meta')._name_map

        if item.startswith('_') or name_map.has_key(item):
            return get(item)

        else:
            field = name_map.get(item)
            if field.choices:
                return get('get_%s_display' % item)()

            else:
                return get(item) 
```

# r - 在R中找到最大值的索引

> ID：12707368
> 
> 赞同：21
> 
> 时间：2012-10-03T11:17:53.067
> 
> 标签：r, dataframe

我有以下数据框`surge`：

```
MeshID    StormID Rate Surge Wind
1         1412 1.0000E-01   0.01 0.0
2         1412 1.0000E-01   0.03 0.0
3         1412 1.0000E-01   0.09 0.0
4         1412 1.0000E-01   0.12 0.0
5         1412 1.0000E-01   0.02 0.0
6         1412 1.0000E-01   0.02 0.0
7         1412 1.0000E-01   0.07 0.0
1         1413 1.0000E-01   0.06 0.0
2         1413 1.0000E-01   0.02 0.0
3         1413 1.0000E-01   0.05 0.0 
```

我使用以下代码来查找每次风暴的浪涌最大值：

```
MaxSurge <- data.frame(tapply(surge[,4], surge[,2], max)) 
```

它返回：

```
1412 0.12
1413 0.06 
```

这很好，除了我还希望它包含`MeshID`浪涌最大值处的值。我知道我可能可以使用`which.max`，但我不太清楚如何将其付诸实践。我对 R 编程很陌生。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T03:31:32.780

`data.table`以及编码优雅的解决方案

```
library(data.table)
surge <- as.data.table(surge)
surge[, .SD[which.max(surge)], by = StormID] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-18T12:48:26.327

这是另一个 data.table 解决方案，但不依赖于 .SD（因此快 10 倍）

```
surge[,grp.ranks:=rank(-1*surge,ties.method='min'),by=StormID]
surge[grp.ranks==1,] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-03T13:08:31.400

如果您最多有 2 个 data.points，`which.max`则只会参考第一个。更完整的解决方案将涉及`rank`：

```
# data with a tie for max  
surge <- data.frame(MeshID=c(1:7,1:4),StormID=c(rep(1412,7),
rep(1413,4)),Surge=c(0.01,0.03,0.09,0.12,0.02,0.02,0.07,0.06,0.02,0.05,0.06))

# compute ranks  
surge$rank <- ave(-surge$Surge,surge$StormID,FUN=function(x) rank(x,ties.method="min"))
# subset on the rank  
subset(surge,rank==1)
   MeshID StormID Surge rank
4       4    1412  0.12    1
8       1    1413  0.06    1
11      4    1413  0.06    1 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-03T11:23:27.210

这是一个 plyr 解决方案，只是因为如果我不这样做，就会*有人说...*

```
R> ddply(surge, "StormID", function(x) x[which.max(x$Surge),])
  MeshID StormID Rate Surge Wind
1      4    1412  0.1  0.12    0
2      1    1413  0.1  0.06    0 
```

# linux - 我们可以连接到远程网络中的本地系统数据库吗？

> ID：12707371
> 
> 赞同：0
> 
> 时间：2012-10-03T11:17:55.440
> 
> 标签：linux, putty

我可以访问具有公共 IP 的 Linux 系统“ **A** ”，例如（1.1.1.1）。具有本地 IP 例如（12.12.12.12）的 Oracle 数据库系统“ **B** ”存在于系统“ **A** ”的本地网络中。我可以通过 Putty连接到系统“ **B ”。**我的系统中有一个项目需要使用系统“ **B** ”的数据库。有没有办法将系统“ **B** ” ip 连接到我的系统，以便我可以在我的项目中使用它？我的系统是windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:46:11.917

您可以使用 ssh/putty 创建一个 SSH 隧道，这将允许您连接到本地主机并将您的数据包通过隧道传输到远程子网中的主机。

[您可以在此处](http://howto.ccs.neu.edu/howto/windows/ssh-port-tunneling-with-putty/)了解如何执行此操作。

# sandbox - 在 OS X Sandbox 中终止子进程

> ID：12707372
> 
> 赞同：0
> 
> 时间：2012-10-03T11:17:58.080
> 
> 标签：sandbox, osx-mountain-lion, appstore-sandbox

我正在尝试将 Apache 捆绑到我的沙盒应用程序中。启动它有效，但我发现一些问题阻止它。通过直接调用“kill”或使用“apachectl -k stop”，我不断收到“拒绝信号”沙盒错误。

有什么方法可以完成我正在尝试的事情吗？是否所有信号都被拒绝？

我正在最新版本的 OS X 10.8 中对其进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:12:38.687

无法在沙盒中终止其他应用程序，但您可以使用`SMLoginItemSetEnabled`服务管理框架中的功能来启动和停止其他应用程序。

如果您想使用此方法，请参阅[使用服务管理框架添加登录项。](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html "添加登录项")

# jquery - 将 jquery 添加到 rails，“滑块不是函数”

> ID：12707374
> 
> 赞同：2
> 
> 时间：2012-10-03T11:18:05.983
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, coffeescript

我正在尝试向我的 rails 应用程序添加一个简单的滑块。

我的 .js.coffee 文件

```
jQuery ->
  $("#slider").slider() 
```

我仍然收到错误消息

```
TypeError: $("#slider").slider is not a function 
```

我认为它与将 jquery 添加到 rails 有关。

我的宝石文件

```
source 'https://rubygems.org'
gem 'rails', '3.2.8'

group :development, :test do
  gem 'mysql2'
  gem 'haml'
  gem 'haml-rails'
  gem 'devise'
  gem 'paperclip'
  gem 'mailcatcher'
  gem 'squeel'
  gem 'nested_form'
  gem 'kaminari'
  gem 'simple_form'
  gem 'ransack'
  gem 'delayed_job_active_record'
  gem 'capybara'
  gem 'launchy'
  gem 'rspec-rails'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require_tree .
//= require jquery_nested_form 
```

application.html.haml 中的 head 部分

```
 = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application"
    = csrf_meta_tags 
```

页面来源

```
<!DOCTYPE html>
<html>
  <head>
    <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <link href="/assets/styles.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
    <script src="/assets/home.js?body=1" type="text/javascript"></script>
    <script src="/assets/offers.js?body=1" type="text/javascript"></script>
    <script src="/assets/transactions.js?body=1" type="text/javascript"></script>
    <script src="/assets/transports.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery_nested_form.js?body=1" type="text/javascript"></script>
    <script src="/assets/application.js?body=1" type="text/javascript"></script>
    <meta content="authenticity_token" name="csrf-param" />
    <meta content="aATz55lG9w8tzTcmRhj8/F2m6pYcFHDupUlwVW4fw/E=" name="csrf-token" />
  </head>
  <body>
    <div id='site'>
      <div id='main'>
        <div id='top'>
          <div class='wrapper'>
             <a href='index.html.haml'></a>
            </div>
            <div id='top_menu'>
              <a href="/">Home</a>
              <a href="/regulations">Regulation</a>
              <a href="/faqs">FAQ</a>
              <a href="contact">Contact</a>
              <br>
              <div class='add'>
                <a href="/users/sign_out" data-method="destroy" rel="nofollow">Logout</a>
                <a href="/choose">Add offer</a>
                <a href="/offers">Offeers</a>
                <a href="/transactions">Transactions</a>
              </div>
            </div>
          </div>
        </div>
        <div id='content'>
          <div class='wrapper'>
            <h1>New offer</h1>
<form accept-charset="UTF-8" action="/offers" class="simple_form new_offer" enctype="multipart/form-data" id="new_offer" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="aATz55lG9w8tzTcmRhj8/F2m6pYcFHDupUlwVW4fw/E=" /></div>
<label class="string optional control-label" for="offer_Description">Description</label>
<textarea cols="40" id="offer_description" name="offer[description]" rows="8" style="width:90%; height: 80px;">
</textarea>

<div id='slider'></div>

<br>
<div>
  <div>
    <label class="string optional control-label" for="offer_Amount">Amount</label>
    <input id="offer_amount" name="offer[amount]" size="30" type="text" />
  </div>
  <div>
    <label class="string optional control-label" for="offer_Unit">Unit</label>
    <select id="offer_unit" name="offer[unit]"><option value="m3">m3</option>
    <option value="szt">szt</option></select>
  </div>
</div>
<div>
  <div>
    <label class="string optional control-label" for="offer_Price">Price</label>
    <input id="offer_whole_price" name="offer[whole_price]" size="30" type="text" />
  </div>
</div>
<div>
  <label class="string optional control-label" for="offer_Unit price">Unit price</label>
  <input id="offer_unit_price" name="offer[unit_price]" size="30" type="text" />
</div>
<div></div>
<label class="string optional control-label" for="offer_Photos">Photos</label>
<div class='newPaperclipFiles'>
  <div class="fields"><input id="offer_photos_attributes_0_image" name="offer[photos_attributes][0][image]" type="file" />
  <input id="offer_photos_attributes_0__destroy" name="offer[photos_attributes][0][_destroy]" type="hidden" value="false" /><a href="javascript:void(0)" class="remove_nested_fields" data-association="photos">Destroy</a>
  </div>
  <a href="javascript:void(0)" class="add_nested_fields" data-association="photos">Add photo</a>
</div>
<div class='actions'>
  <input name="commit" type="submit" value="Save" />
</div>
</form>
<div id="photos_fields_blueprint" style="display: none"><div class="fields"><input id="offer_photos_attributes_new_photos_image" name="offer[photos_attributes][new_photos][image]" type="file" />
<input id="offer_photos_attributes_new_photos__destroy" name="offer[photos_attributes][new_photos][_destroy]" type="hidden" value="false" /><a href="javascript:void(0)" class="remove_nested_fields" data-association="photos">Usuń</a>
</div></div>
<a href="/offers">Back</a>
          </div>
        </div>
        <div id='fotter'>
        </div>
      </div>
    </div>
  </body>
</html> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:24:21.613

如果您没有看到 jQuery 在那里正确链接（您可以使用 Firebug 或只是尝试打开源中显示的 URL 以确认 jQuery 正在加载）。

这应该可以帮助您调试问题，否则请粘贴您呈现的（来自浏览器）页面的 HTML 源代码。

**编辑：**

抱歉，注意到您正在使用 Coffee，请尝试此页面以获得一些 jQuery + Coffee 语法帮助：

[http://aaronrussell.co.uk/articles/using-coffeescript-with-jquery/](http://aaronrussell.co.uk/articles/using-coffeescript-with-jquery/)

# .net - 实体框架中的存储过程很慢

> ID：12707375
> 
> 赞同：7
> 
> 时间：2012-10-03T11:18:09.777
> 
> 标签：.net, sql-server-2008, entity-framework

我正在使用以下查询从实体框架调用存储过程（返回数据）

```
from sp in db.GetSale(bID, SID,m,y).Where(x => x.isActive == true)
select sp 
```

如果我直接运行这个过程，只需要2秒，但是当我通过EF调用这个存储过程时，需要10到15秒。

有什么改善这种情况的指导吗？我在 SO 上看到过其他帖子，但没有成功

编辑

这是我的程序的 sqlplan [https://skydrive.live.com/redir?resid=87DCBD5D3E9AAA57!374](https://skydrive.live.com/redir?resid=87DCBD5D3E9AAA57!374)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T12:13:44.223

我怀疑参数嗅探。

尝试在您的过程中应用反参数嗅探代码。（在使用它们之前将参数分配给局部变量）。

[http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:41:56.897

请记住，您的`.Where(x => x.isActive == true)`过滤器不会应用于程序本身。当您处理表时，过滤器被传递给 where 子句并在数据库上执行。在您的情况下，将执行 proc（不带活动子句），完整的结果集将返回给应用程序，然后`where`将被应用。

我知道你说 proc 更快，但你确定你没有以某种方式将 isActive=true 作为参数传递给它吗？

我看到你已经在这个 proc 上有了参数，所以如果你将状态添加为另一个参数并在查询级别应用它，它会提高你的性能。

# nhibernate - NHibernate - 联合三个 QueryOvers

> ID：12707379
> 
> 赞同：6
> 
> 时间：2012-10-03T11:18:25.163
> 
> 标签：nhibernate, queryover

嗨 StackOverflow 用户，

我遇到了这个问题，我有三个 QueryOver，每个都返回一个候选 ID 列表，然后我用它来带来这些候选。为此，我编写了以下代码。

```
 private IQueryOver<CandidateEntity, CandidateEntity> UnionPublicWithPrivateCandidates(
        IQueryOver<CandidateEntity, CandidateEntity> publicCandidates, 
        IQueryOver<CandidateEntity, CandidateEntity> privateCandidate, 
        IQueryOver<CandidateEntity, CandidateEntity> candidatesByUserRole)
    {
        return ActiveCandidatesQueryOver.Where(Restrictions.Disjunction()
                                        .Add(Subqueries
                                            .WhereProperty<CandidateEntity>(c => c.Id)
                                            .In((QueryOver<CandidateEntity>)publicCandidates.Select(c => c.Id)))
                                        .Add(Subqueries
                                            .WhereProperty<CandidateEntity>(c => c.Id)
                                            .In((QueryOver<CandidateEntity>)privateCandidate.Select(c => c.Id)))
                                        .Add(Subqueries
                                            .WhereProperty<CandidateEntity>(c => c.Id)
                                            .In((QueryOver<CandidateEntity>)candidatesByUserRole.Select(c => c.Id))));
    } 
```

这将返回正确的结果，生成的查询如下所示

```
SELECT *
FROM   Applicants 
WHERE  IsActive = 1
   and (Id in (SELECT Id from **FirstQueryOver**)
         **or** Id in (SELECT Id from **SecondQueryOver**)
         **or** Id in (SELECT Id from **ThirdQueryOver**)) 
```

问题是它使用“或”。因此，查询非常缓慢。

相反，如果我写这个：

```
SELECT *
FROM   Applicants 
WHERE  IsActive = 1
   and (Id in (SELECT Id from **FirstQueryOver**
                     union SELECT Id from **SecondQueryOver**
                     union SELECT Id from **ThirdQueryOver**)) 
```

它几乎立即完成。

您对我应该如何重构代码以获得更好的性能有任何想法吗？

谢谢你，阿德里安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:03:09.157

我搜索但没有找到任何东西，所以我做了以下黑客攻击：

```
private IQueryOver<CandidateEntity, CandidateEntity> UnionPublicWithPrivateCandidates(
                  IQueryOver<CandidateEntity, CandidateEntity> publicCandidates,
                  IQueryOver<CandidateEntity, CandidateEntity> privateCandidate,
                  IQueryOver<CandidateEntity, CandidateEntity> candidatesByUserRole)
{
    var excludedQueryCandidates = QueryOver
        .WithSubquery.WhereNotExists(((QueryOver<CandidateEntity>)publicCandidates.Select(x => x.Id)))
        .WithSubquery.WhereNotExists((QueryOver<CandidateEntity>)privateCandidate.Select(x => x.Id))
        .WithSubquery.WhereNotExists((QueryOver<CandidateEntity>)candidatesByUserRole.Select(x => x.Id));

    return QueryOver.WithSubquery.WhereNotExists((QueryOver<CandidateEntity>) excludedQueryCandidates.Select(Projections.Distinct(Projections.Id())));
} 
```

这不是最好的解决方案，但应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:39:41.813

我不能说为什么 or 与 union 有如此大的差异。sql 分析器、查询分析器和估计的执行计划应该让您更深入地了解 sql 运行查询的方式，我猜它在第一种情况下没有使用正确的索引。但是，我会尝试将您的查询重写为：

```
SELECT *
  FROM   Applicants  
  WHERE  IsActive = 1
    and (this_.Id in (SELECT this_0_.Id from **FirstQueryOver** 
                                          or **SecondQueryOver** 
                                          or **ThirdQueryOver**)) 
```

看看你有什么表现。

# dependencies - 我是否需要将静态库的依赖静态库包含到我的程序中

> ID：12707381
> 
> 赞同：1
> 
> 时间：2012-10-03T11:18:29.133
> 
> 标签：dependencies, static-libraries

我有一个在我的程序中使用的静态库。这个静态库也依赖于一些静态库。要运行我的程序，我还需要将这些依赖的静态库放入我的项目工作目录中。

现在，我的问题是可以只有一个静态库而不是将所有依赖的静态库都放入我的项目工作目录中吗？

是否必须将我使用的所有依赖静态库放入我自己的静态库中才能运行我的程序？

提前致谢。对不起我的英语不好。

# javascript - 扩展通过 AJAX 返回的 div

> ID：12707382
> 
> 赞同：0
> 
> 时间：2012-10-03T11:18:32.510
> 
> 标签：javascript, jquery, css, ajax

考虑以下用于动态扩展 div 的 Javascript jQuery 代码：

```
$('.expandingThumbnail').hover(function() {
    $(this).animate({
        height: '32px',
        width:  '32px'
    }, 500);
},function() {
    $(this).animate({
        height: '128px',
        width: '128px'
    }, 500);
}); 
```

它在任何理论 div 上运行：

```
<div class="expandingThumbnail">Hi!</div> 
```

只要此 div 作为页面请求的一部分返回，它就会按预期扩展。但是，如果此 div 作为 AJAX 请求的一部分返回并通过 jQuery 的`.html()`方法插入到另一个 div 中，则 div 不会按预期扩展。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:20:40.380

这是动态生成内容的典型问题；直接事件处理程序仅适用于调用时已经存在的元素。您需要将处理程序绑定到静态父元素，以处理由新元素触发的事件。详情请参阅[`.on`](http://api.jquery.com/on/)。请注意，您可以（*并且应该*）将`document`下面的选择器替换为最近的静态父元素，`.expandingThumbnail`以提高性能。

```
$(document).on( 'mouseenter', '.expandingThumbnail', function() {
    $(this).animate({
        height: '32px',
        width:  '32px'
    }, 500);
}).on('mouseleave', '.expandingThumbnail', function() {
    $(this).animate({
        height: '128px',
        width: '128px'
    }, 500);
}); 
```

# java - 使用石英进行数据检索

> ID：12707383
> 
> 赞同：1
> 
> 时间：2012-10-03T11:18:35.660
> 
> 标签：java, spring, spring-mvc, quartz-scheduler

我需要帮助来使用 Quartz 从数据库中检索数据。我正在从主类中的 config.xml 中读取休眠属性，并使用这些属性尝试从我的作业类 (Quartz Process.java) 中检索数据，该类正在获取空指针异常。

请帮助我解决问题。谢谢并提前

这是我的主要课程：

```
@Component("TestProgram")

public class TestProgram
{
        static ClassPathXmlApplicationContext applicationContext=null;

    public void testMethod() throws SchedulerException
    {
        JobDetail job = new JobDetail();
        job.setName("Retriving The Master Details");
        job.setJobClass(QuartzProcess.class);

        SimpleTrigger trigger = new SimpleTrigger();
        trigger.setName("Trigger For Retriving The Master Details");
        trigger.setStartTime(new Date(System.currentTimeMillis() + 1000));
        trigger.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);
        trigger.setRepeatInterval(5000);

        Scheduler scheduler = new StdSchedulerFactory().getScheduler();
        scheduler.start();
        scheduler.scheduleJob(job, trigger);
    }

    public static void main(String[] args) throws Exception
    {
        String conf[] = {"Config.xml"};
        applicationContext= new ClassPathXmlApplicationContext(conf);
        TestProgram unittest=applicationContext.getBean(TestProgram.class);     
        unittest.testMethod();
    }

} 
```

石英工艺.java

```
@Component("QuartzProcess")

public class QuartzProcess implements Job
{
    @Autowired
    private MasterService MasterService;

    @Override   
        public void execute(JobExecutionContext jec) throws JobExecutionException
        {
         try
         {

             List<MasterVO> MasterVO=MasterService.findAll();
             System.out.println("MasterVO..."+MasterVO);
             for(int index=0;index<MasterVO.size();index++)
                 System.out.println(MasterVO.get(index));

         }
         catch(Exception e)
         {
             e.printStackTrace();
         }
        }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:31:00.333

您收到 Null 指针异常，因为您的 Quartz 作业没有由 Spring 实例化并且在 springContext 之外运行，因此您在其中引用的所有 bean 都将为 null。现在有几种方法可以访问石英 Job 中的 spring beans。

1）在applicationContext中定义下面的bean

```
<bean id="scheduler"class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
  <property name="configLocation">
     <value>classpath:quartz.properties</value>
  </property>
  <property name="applicationContextSchedulerContextKey">
    <value>applicationContext</value>
  </property> 
```

在您的测试类中获取上述 bean 调度程序。您的测试类中的代码将如下所示：

```
public void testMethod() throws SchedulerException
{
    JobDetail job = new JobDetail();
    job.setName("Retriving The Master Details");
    job.setJobClass(QuartzProcess.class);

    SimpleTrigger trigger = new SimpleTrigger();
    trigger.setName("Trigger For Retriving The Master Details");
    trigger.setStartTime(new Date(System.currentTimeMillis() + 1000));
    trigger.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);
    trigger.setRepeatInterval(5000);

    scheduler.scheduleJob(job, trigger);
} 
```

您需要以通常的方式进入主类的调度程序 bean。您不需要执行 scheduler.start ，因为调度程序将由 spring 容器启动。

在您的 QuartzProcess 类中，您需要添加以下方法来获取 applicationContext：

```
 public ApplicationContext getApplicationContext(JobExecutionContext context) throws Exception {
        ApplicationContext applicationContext = null;
        applicationContext = (ApplicationContext) context.getScheduler().getContext().get(APPLICATION_CONTEXT_KEY);
        if (applicationContext == null) {
            throw new JobExecutionException("No application context available in scheduler context for key \""
                                            + APPLICATION_CONTEXT_KEY
                                            + "\"");
        }
        return applicationContext;
    } 
```

然后在quartzprocess的xecute方法中，您需要执行以下代码来获取所需的bean

```
 ApplicationContext ctx = getApplicationContext(context);
  QuartzProcess quartzProcess = (QuartzProcess)ctx.getBean("quartzProcess"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:23:17.713

如果您正在尝试创建更新数据库的计划作业，那么使用 Spring Task 怎么样。

这是一个示例： [如何停止使用 spring 任务安排的作业](https://stackoverflow.com/questions/12692083/how-to-stop-jobs-scheduled-using-spring-task/12692452#12692452)

然后只需调用执行数据库更新的方法。

# ios - SDWebImage 在滚动时清除图像缓存？

> ID：12707388
> 
> 赞同：3
> 
> 时间：2012-10-03T11:18:50.477
> 
> 标签：ios, ios5, uiscrollview, ios6, sdwebimage

谁能告诉我如何在滚动图像时清除缓存？我正在使用 SDwebImage 包。它一直工作到 110 张照片之后它给内存收到警告并崩溃我也尝试了以下方法但没有成功：

```
SDImageCache *imageCache = [SDImageCache sharedImageCache]; 
```

[imageCache clearMemory]; [imageCache clearDisk]; [imageCache cleanDisk];``

在此代码之后，它会在崩溃之后再滚动 10 张照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:08:56.053

尝试 [imageCache 发布]；或在启动时自动释放或尝试写入

```
-(void)dealloc
{
   [super dealloc];  
  [imageCache release];
} 
```

# javascript - 从数据表中获取所选行的第一列的值

> ID：12707396
> 
> 赞同：0
> 
> 时间：2012-10-03T11:19:12.930
> 
> 标签：javascript, jquery, html

我正在制作一个选择器控件，我想从数据表中获取选定行的第一列的值，它最初工作正常，但是当我使用分页时，它不起作用。请提出一些建议。这是我的代码。

```
$(document).ready(function ()
{
    $('#example').dataTable({"sPaginationType": "full_numbers","iDisplayLength": 10,});
    $('#example tr').click(function ()
    {
        var queryString = window.location.search.substring(1);
        if ($(this).find('th:first').attr('id') != "th")
        {
            window.opener.document.getElementById(queryString).value = $(this).find('td:first').text();
            window.close();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:23:19.070

很可能新元素是动态形成的..try

```
$('#example').delegate('tr','click',function () {
                                var queryString = window.location.search.substring(1);
                                if ($(this).find('th:first').attr('id') != "th") {
                                    window.opener.document.getElementById(queryString).value = $(this).find('td:first').text();
                                    window.close();
                                }
            }); 
```

# objective-c - 通过 FMDB 查询自定义类

> ID：12707398
> 
> 赞同：0
> 
> 时间：2012-10-03T11:19:26.770
> 
> 标签：objective-c, sqlite, fmdb

我是 FMDB 和 sqlite 的新手。我想知道是否可以通过 FMDB 查询自定义类。

我无法理解使用 FMDB 优于 sqlite 的优势.. 是否有任何添加的 API 和功能？

任何人都可以帮助我了解如何使用 sqlite 的自定义功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:08:48.473

FMDB 只是 sqlite 的包装器。

不确定查询自定义类是什么意思，您可以查询保存在 sqlite 数据库中的任何内容

# c++ - 二维旋转opengl

> ID：12707399
> 
> 赞同：0
> 
> 时间：2012-10-03T11:19:29.053
> 
> 标签：c++, opengl, rotation, 2d

这是我正在使用的代码。

```
#define ANGLETORADIANS 0.017453292519943295769236907684886f // PI / 180
#define RADIANSTOANGLE 57.295779513082320876798154814105f   // 180 / PI

rotation = rotation *ANGLETORADIANS;

cosRotation = cos(rotation);
sinRotation = sin(rotation);

for(int i = 0; i < 3; i++)
{
    px[i] = (vec[i].x + centerX) * (cosRotation - (vec[i].y + centerY)) * sinRotation;
    py[i] = (vec[i].x + centerX) * (sinRotation + (vec[i].y + centerY)) * cosRotation;
    printf("num: %i, px: %f, py: %f\n", i, px[i], py[i]);
} 
```

到目前为止，它接缝我的 Y 值正在翻转.. 假设我输入 X = 1 和 Y = 1 的值，旋转 45 圈你应该看到大约 x = 0 和 y = 1.25 ish 但我得到 x = 0 y = - 1.25。

我的 90 度旋转也总是返回 x = 0 和 y = 0。

ps 我知道我只是以我的价值观为中心，而不是把它们放回原处。不需要把它们放回去，因为我只需要知道我现在得到的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:28:54.167

您的支架位置对我来说看起来不正确。我希望：

```
px[i] = (vec[i].x + centerX) * cosRotation - (vec[i].y + centerY) * sinRotation;
py[i] = (vec[i].x + centerX) * sinRotation + (vec[i].y + centerY) * cosRotation; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:29:12.870

你的括号是错误的。它应该是

```
px[i] = ((vec[i].x + centerX) * cosRotation) - ((vec[i].y + centerY) * sinRotation);
py[i] = ((vec[i].x + centerX) * sinRotation) + ((vec[i].y + centerY) * cosRotation); 
```

反而

# java - 闪烁的托盘图标

> ID：12707401
> 
> 赞同：6
> 
> 时间：2012-10-03T11:19:31.907
> 
> 标签：java, swing, system-tray, trayicon

我知道如何使用 java 在窗口的系统托盘中放置一个图标，但是执行系统托盘图标**闪烁**的最佳方法是什么？或者如果我可以不时或在某些事件（应用程序运行时）替换任何图标，请提前分享您的经验

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T11:24:02.340

*   在某些基础上更改图标没有问题，输出为闪烁图标

*   创建一个`Arrays of BufferedImage`或[队列](https://stackoverflow.com/a/7944388/714968)

*   在所需事件上启动[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)并在某个时间段更改`BufferedImage`或[图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)

*   `Swing Timer`并在剩余一段时间后停止或添加`ActionListener`到`Message`，另一种方法可以是确定`LEFT`或`RIGHT`鼠标按钮从`MouseListener`（for `Icon`in `System Tray`）一个用于停止`Timer`，第二个用于`JPopup`

编辑

例如，正如我提到的，您可以添加[ActionListener](https://stackoverflow.com/a/8460383/714968)或 MouseListener，在那里您可以停止 Swing Timer

```
import java.awt.AWTException;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Image;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.TrayIcon;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UIManager;

public class ActiveTray {

    private SystemTray tray;
    private TrayIcon trayIcon;
    private Icon icon, icon1;
    private Image image, image1;
    private Timer timer;

    public ActiveTray() {
        if (SystemTray.isSupported() == false) {
            System.err.println("No system tray available");
            return;
        }
        tray = SystemTray.getSystemTray();
        PropertyChangeListener propListener = new PropertyChangeListener() {

            public void propertyChange(PropertyChangeEvent evt) {
                TrayIcon oldTray[] = (TrayIcon[]) evt.getOldValue();
                TrayIcon newTray[] = (TrayIcon[]) evt.getNewValue();
                System.out.println(oldTray.length + " / " + newTray.length);
            }
        };
        tray.addPropertyChangeListener("trayIcons", propListener);
        icon = new BevelArrowIcon(BevelArrowIcon.UP, false, false);
        image = iconToImage(icon);
        icon1 = new BevelArrowIcon(BevelArrowIcon.DOWN, false, false);
        image1 = iconToImage(icon1);
        PopupMenu popup = new PopupMenu();
        MenuItem item = new MenuItem("Hello, World");
        trayIcon = new TrayIcon(image, "Tip Text", popup);
        ActionListener menuActionListener = new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                trayIcon.displayMessage("Good-bye", "Cruel World",
                        TrayIcon.MessageType.WARNING);
            }
        };
        item.addActionListener(menuActionListener);
        popup.add(item);
        ActionListener actionListener = new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                tray.remove(trayIcon);
            }
        };
        trayIcon.addActionListener(actionListener);
        try {
            tray.add(trayIcon);
            start();
        } catch (AWTException ex) {
            Logger.getLogger(ActiveTray.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    private void start() {
        timer = new javax.swing.Timer(125, updateCol());
        timer.start();
        trayIcon.displayMessage(null, "  Aplication Loaded  ", TrayIcon.MessageType.NONE);
    }

    private Action updateCol() {
        return new AbstractAction("Icon load action") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                Runnable doRun = new Runnable() {

                    @Override
                    public void run() {
                        Image img = trayIcon.getImage();
                        if (img == image) {
                            trayIcon.setImage(image1);
                        } else {
                            trayIcon.setImage(image);
                        }
                    }
                };
                SwingUtilities.invokeLater(doRun);
            }
        };
    }

    public static void main(String args[]) {
        ActiveTray activeTray = new ActiveTray();
    }

    static Image iconToImage(Icon icon) {
        if (icon instanceof ImageIcon) {
            return ((ImageIcon) icon).getImage();
        } else {
            int w = icon.getIconWidth();
            int h = icon.getIconHeight();
            GraphicsEnvironment ge =
                    GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice gd = ge.getDefaultScreenDevice();
            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            BufferedImage image = gc.createCompatibleImage(w, h);
            Graphics2D g = image.createGraphics();
            icon.paintIcon(null, g, 0, 0);
            g.dispose();
            return image;
        }
    }

    static class BevelArrowIcon implements Icon {

        public static final int UP = 0;         // direction
        public static final int DOWN = 1;
        private static final int DEFAULT_SIZE = 16;
        private Color edge1;
        private Color edge2;
        private Color fill;
        private int size;
        private int direction;

        public BevelArrowIcon(int direction, boolean isRaisedView,
                boolean isPressedView) {
            if (isRaisedView) {
                if (isPressedView) {
                    init(UIManager.getColor("controlLtHighlight"),
                            UIManager.getColor("controlDkShadow"),
                            UIManager.getColor("controlShadow"),
                            DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlHighlight"),
                            UIManager.getColor("controlShadow"),
                            UIManager.getColor("control"),
                            DEFAULT_SIZE, direction);
                }
            } else {
                if (isPressedView) {
                    init(UIManager.getColor("controlDkShadow"),
                            UIManager.getColor("controlLtHighlight"),
                            UIManager.getColor("controlShadow"),
                            DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlShadow"),
                            UIManager.getColor("controlHighlight"),
                            UIManager.getColor("control"),
                            DEFAULT_SIZE, direction);
                }
            }
        }

        public BevelArrowIcon(Color edge1, Color edge2, Color fill,
                int size, int direction) {
            init(edge1, edge2, fill, size, direction);
        }

        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            switch (direction) {
                case DOWN:
                    drawDownArrow(g, x, y);
                    break;
                case UP:
                    drawUpArrow(g, x, y);
                    break;
            }
        }

        @Override
        public int getIconWidth() {
            return size;
        }

        @Override
        public int getIconHeight() {
            return size;
        }

        private void init(Color edge1, Color edge2, Color fill,
                int size, int direction) {
            edge1 = Color.red;
            edge2 = Color.blue;
            this.edge1 = edge1;
            this.edge2 = edge2;
            this.fill = fill;
            this.size = size;
            this.direction = direction;
        }

        private void drawDownArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            g.drawLine(xo, yo, xo + size - 1, yo);
            g.drawLine(xo, yo + 1, xo + size - 3, yo + 1);
            g.setColor(edge2);
            g.drawLine(xo + size - 2, yo + 1, xo + size - 1, yo + 1);
            int x = xo + 1;
            int y = yo + 2;
            int dx = size - 6;
            while (y + 1 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x += 1;
                y += 2;
                dx -= 2;
            }
            g.setColor(edge1);
            g.drawLine(xo + (size / 2), yo + size - 1, xo
                    + (size / 2), yo + size - 1);
        }

        private void drawUpArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            int x = xo + (size / 2);
            g.drawLine(x, yo, x, yo);
            x--;
            int y = yo + 1;
            int dx = 0;
            while (y + 3 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x -= 1;
                y += 2;
                dx += 2;
            }
            g.setColor(edge1);
            g.drawLine(xo, yo + size - 3, xo + 1, yo + size - 3);
            g.setColor(edge2);
            g.drawLine(xo + 2, yo + size - 2, xo + size - 1, yo + size - 2);
            g.drawLine(xo, yo + size - 1, xo + size, yo + size - 1);
        }
    }
} 
```

# jquery - jQuery parseJSON 错误

> ID：12707406
> 
> 赞同：2
> 
> 时间：2012-10-03T11:19:58.713
> 
> 标签：jquery, json

我正在尝试解析从我的 Sinatra/DataMapper 后端提供的 JSON 字符串，但从`$.parseJSON`. 违规行是：

```
var data = $.parseJSON('{"id":1249,"ssid":"asdf","mac_addr":"12:34:56:78:90:12","description":"<a href=\"http://www.google.com\">Google</a>","gps_lat":"53.345036547354","gps_lng":"-6.2576787407226675","location":"","authentication_method":"WPA2-PSK","password":"","xml_id":"default","access_network_area_id":37}'); 
```

Firebug中出现的错误是：

```
SyntaxError: JSON.parse: expected ',' or '}' after property value in object 
```

由于我一生都看不到任何丢失的“，”或“}”符号（除非 ruby​​ to_json 方法被破坏，否则不应该有），我假设这是一个逃避问题。但是我需要逃避哪些角色来修复它？

编辑：

我的后端是 Sinatra (Ruby)，使用 DataMapper 作为 ORM。JSON 字符串在控制器中生成为`@data = model.to_json`，并在视图中处理为`$.parseJSON('#{@data}')`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:27:53.040

您的 JSON 字符串未充分转义 - 键内容内的引号前有*单个*`description`反斜杠；由于反斜杠是 Javascript 字符串中的特殊符号，因此会在实际字符串`\"`中产生未转义的字符。`"`这些反斜杠需要加倍才能在字符串中保留为文字字符，使其成为有效的 JSON 表示形式。

这个更正的 JSON 字符串按预期工作：

```
var data = $.parseJSON('{"id":1249,"ssid":"asdf","mac_addr":"12:34:56:78:90:12","description":"<a href=\\"http://www.google.com\\">Google</a>","gps_lat":"53.345036547354","gps_lng":"-6.2576787407226675","location":"","authentication_method":"WPA2-PSK","password":"","xml_id":"default","access_network_area_id":37}'); 
```

我怀疑您使用以下伪代码生成 Javascript 代码：

```
print "var data = $.parseJSON('" + json_string + "')" 
```

简单地将字符串包含在引号内*并不足以*确保其文字值在生成的 Javascript 代码中保持不变。为了保护字符串免受此类特殊字符问题的影响，通常将其包装在额外的 JSON 编码中*而不是*用单引号包装就足够了：

```
print "var data = $.parseJSON(" + json_encode(json_string) + ")" 
```

由于 JSON 编码会生成有效的 Javascript 数据结构，因此对简单字符串进行 JSON 编码将产生正确引用的 Javascript 字符串。不过，公平地说，如果您的 JSON 来自受信任的来源，您也许可以完全跳过中间 JSON 解码步骤：

```
print "var data = " + json_string 
```

# asp.net-mvc - asp.net mvc web api同控制器不同功能参数

> ID：12707408
> 
> 赞同：2
> 
> 时间：2012-10-03T11:20:06.667
> 
> 标签：asp.net-mvc, routes, asp.net-web-api

在我的控制器 UserApiController 中，我具有以下功能：

```
public object GetUsers(string CountryID, string StateID)
{
   //biz
}

public object GetPositions(int CompanyID, int DepartmentID)
{
   //biz
} 
```

在我的控制器 SalesApiController 中，我具有以下功能：

```
public object GetOrders(string CountryID, int CompanyID)
{
   //biz
}

public object GetProducts(string CountrID, string StateID, int CompanyID)
{
   //biz
} 
```

在 web api 配置中，我可以像这样映射：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{CountryID}/{StateID}",
    defaults: new {  } 
```

它适用于 UserApiController.GetUsers，因为函数签名仅与 GetUsers 匹配。

现在，问题：

1.如何定义路由以处理具有相同参数数量的不同功能（在相同或不同控制器内）

2.如何定义路由以处理具有不同参数数量的不同功能（如果可能，在相同或不同控制器中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:23:22.980

> 1.如何定义路由以处理具有相同参数数量的不同功能（在相同或不同控制器内）

这里有几种解决方案。

*   使用多条路线。以您的 UserApiController 为例，很难有一个路由与 2 个动作一起使用，其中它们具有不同的参数名称。我建议添加以下两条路线：

    ```
     config.Routes.MapHttpRoute(
            name: "DefaultApi-UserApiGetUsers",
            routeTemplate: "api/{controller}/GetUsers/{CountryID}/{StateID}",
            defaults: new { action = "GetUsers" });

        config.Routes.MapHttpRoute(
            name: "DefaultApi-UserApiGetPositions",
            routeTemplate: "api/{controller}/GetPositions/{CompanyID}/{DepartmentID}",
            defaults: new { action = "GetPositions" }); 
    ```

*   按照 danludwig 的建议使用查询字符串参数。这样，您只需要一条路线：

    ```
     config.Routes.MapHttpRoute(
            name: "DefaultApiOnlyRoute",
            routeTemplate: "api/{controller}/{action}"); 
    ```

    1.  api/UserApi/GetUsers?CountryID=USA&StateID=WA
    2.  api/UserApi/GetPositions?CompanyID=123&DepartmentID=456

> 2.如何定义路由以处理具有不同参数数量的不同功能（如果可能，在相同或不同控制器中）

*   同样，定义多条路线：

    ```
     config.Routes.MapHttpRoute(
            name: "DefaultApi-SalesApi2Params",
            routeTemplate: "api/{controller}/{action}/{CountryID}/{CompanyID}");

        config.Routes.MapHttpRoute(
            name: "DefaultApi-SalesApi3Params",
            routeTemplate: "api/{controller}/{action}/{CountryID}/{StateID}/{CompanyID}"); 
    ```

*   改用查询字符串参数并且只有一个路由——即上面的'DefaultApiOnlyRoute'。

    1.  api/SalesApi/GetOrders?CountryID=USA&CompanyID=123
    2.  api/SalesApi/GetProducts?CountryID=USA&StateID=WA&CompanyID=123

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T17:37:33.290

你可以创建一个像这样的属性，然后用这个属性装饰你的动作。您仍然需要创建一个与您所做的匹配参数数量的路由一样的路由。

```
public class SomeAttribute : ActionFilterAttribute
{
  public override void OnActionExecuting(ActionExecutingContext filterContext)
  {
    for(int i = 0; i <= filterContext.ActionParameters.Count; i++)
    {
      // i + 2 is to not consider controller and action parameters
      filterContext.ActionParameters[filterContext.ActionParameters.ElementAt(i).Key] = 
        Convert.ChangeType(
          filterContext.Controller.ControllerContext.RouteData.Values.ElementAt(i + 2).Value, 
          filterContext.ActionDescriptor.GetParameters()[i].ParameterType
        );
      }
   }
} 
```

我希望它有所帮助。

# erlang - 与处理 websocket 连接的牛仔进程链接（cowboy，erlang）

> ID：12707410
> 
> 赞同：0
> 
> 时间：2012-10-03T11:20:12.627
> 
> 标签：erlang, cowboy, sockjs

我正在开发一个同时使用牛仔和 sockjs 的 erlang 应用程序，我想知道是否可以与处理 websocket 连接的牛仔进程链接？

现在，带有 gen_server 行为的进程与每个 websocet 连接相关联。这样的进程将 Conn 实例存储在 init 中，当客户端关闭连接时，该进程将从 websocket 处理程序中终止，如果 gen_server 进程终止，则从 gen_server 的 terminate() 调用 Conn:close 来进行清理。它有效，但我不喜欢这个解决方案，因为在某些情况下，即使启用了 trap_exit，也不会调用终止函数，所以如果可以进行链接，它会是更好、更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:45:10.667

在什么情况下不会在 gen_server 上调用终止？

从理论上讲，您可以从 Conn 对象中提取 Pid，但这显然会破坏封装。

如果您可以提出一个理智的 API 来解决您的问题，请随时提交拉取请求（请在拉取请求中详细解释问题）。

# python-2.7 - 在 Ubuntu 12.04 中使用 Python2.7 Crontab 设置背景

> ID：12707411
> 
> 赞同：5
> 
> 时间：2012-10-03T11:20:13.360
> 
> 标签：python-2.7, crontab, ubuntu-12.04

我编写了以下简单的 python 脚本，打算在 Ubuntu 12.04 中将其设置为 cron 作业，以每小时更改一次墙纸。当我从终端完美运行脚本时，该脚本会运行并更改壁纸。但是，当我设置 cron 作业时，我可以在 syslog 中看到 cron 作业已经运行但墙纸没有改变？

```
#!/usr/bin/python

import os
import random

directory = os.getcwd() + '/'
files = os.listdir('.')
random.shuffle(files)
files.remove('.project')
files.remove('.pydevproject')
files.remove('background.py')
background = files[0]
setup = 'file://' + directory + background

print setup

os.system("gsettings set org.gnome.desktop.background picture-uri '%s'" % (setup)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:22:37.563

在 cron 下运行 gsettings 似乎有问题。更改 os.system 命令以包含 DISPLAY=:0 GSETTINGS_BACKEND=dconf 就可以了。

os.system("DISPLAY=:0 GSETTINGS_BACKEND=dconf gsettings set org.gnome.desktop.background picture-uri '%s'" % (setup))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:31:03.913

您必须更改脚本的工作目录。您可以通过像这样从 crontab 调用它来做到这一点：

```
cd /path/of/your/script && python scriptname.py 
```

或者您可以在脚本中执行以下操作：

```
import os

my_path = os.path.abspath(__file__)
dir_name = os.path.dirname(my_path)
os.chdir(dir_name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T14:44:05.067

除了为背景图像文件提供正确的路径和设置必要的环境变量之外，您还可以在不`os.system()`调用 Python 的情况下更改背景：

```
import os
import urllib
from gi.repository.Gio import Settings  # pylint: disable=F0401,E0611

def set_background(image_path, check_exist=True):
    """Change desktop background to image pointed by `image_path`.

    """
    if check_exist:  # make sure we can read it (at this time)
        with open(image_path, 'rb') as f:
            f.read(1)

    # prepare uri
    path = os.path.abspath(image_path)
    if isinstance(path, unicode):  # quote() doesn't like unicode
        path = path.encode('utf-8')
    uri = 'file://' + urllib.quote(path)

    # change background
    bg_setting = Settings.new('org.gnome.desktop.background')
    bg_setting.set_string('picture-uri', uri)
    bg_setting.apply() # might be unnecessary 
```

来自[使用 Python 2.7.3 的自动背景更换器不起作用，尽管它应该](https://stackoverflow.com/a/12206964/4279)

# postgresql - 在存储函数中使用准备好的语句

> ID：12707417
> 
> 赞同：11
> 
> 时间：2012-10-03T11:20:26.907
> 
> 标签：postgresql, prepared-statement, plpgsql

我在数据库中有一个表：

```
create table store (
    ...
    n_status        integer not null,
    t_tag           varchar(4)
    t_name          varchar,
    t_description   varchar,
    dt_modified     timestamp not null,
    ...
); 
```

在我存储的函数中，我需要`select`对这个表多次执行相同的操作：

```
select * from store
where n_place_id = [different values]
and t_tag is not null
and n_status > 0
and (t_name ~* t_search or t_description ~* t_search)
order by dt_modified desc
limit n_max; 
```

在这里，`t_search`和`n_max`是存储函数的参数。我认为为此使用准备好的语句是有意义的，但我遇到了奇怪的问题。这是我所拥有的：

```
create or replace function fn_get_data(t_search varchar, n_max integer)
  returns setof store as
$body$
declare
    resulter        store%rowtype;
    mid             integer;
begin
    prepare statement prep_stmt(integer) as
        select *
          from store
         where n_place_id = $1
           and (t_name ~* t_search or t_description ~* t_search)
      order by dt_modified
         limit n_max;

    for mid in
        (select n_place_id from ... where ...)
    loop
        for resulter in
            execute prep_stmt(mid)
        loop
            return next resulter;
        end loop;
    end loop;
end;$body$
  language 'plpgsql' volatile; 
```

但是，当我实际运行该功能时

```
select * from fn_get_data('', 30) 
```

我收到此错误：

```
ERROR:  column "t_search" does not exist
LINE 3:   and (t_name ~* t_search or t_description ~* t_search)
                         ^
QUERY:  prepare prep_stmt(integer) as
        select * from store where n_status > 0 and t_tag is not null and n_museum = $1
        and (t_name ~* t_search or t_description ~* t_search)
        order by dt_modified desc limit maxres_free 
```

好的，也许它不喜欢准备好的语句中的外部变量，所以我将其更改为

```
prepare prep_stmt(integer, varchar, integer) as
select * from store where n_status > 0 and t_tag is not null and n_museum = $1
and (t_name ~* $2 or t_description ~* $2)
order by dt_modified desc limit $3

...

for resulter in
    execute prep_stmt(mid, t_search, n_max)

... 
```

这次我得到一个不同的错误：

```
ERROR:  function prep_stmt(integer, character varying, integer) does not exist
LINE 1: SELECT prep_stmt(mid, t_search, n_max)
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
QUERY:  SELECT prep_stmt(mid, t_search, n_max) 
```

我在这里想念什么？

**编辑**我在顶部添加了相关的表结构。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T12:04:04.367

在我看来`EXECUTE`，动态 SQL 的 PL/PgSQL 胜过`EXECUTE`准备语句的常规 SQL。

代码：

```
create or replace function prep_test() returns void as $$
begin
    PREPARE do_something AS SELECT 1;
    EXECUTE do_something;
end;
$$ LANGUAGE 'plpgsql'; 
```

测试：

```
regress=# select prep_test(1);
ERROR:  column "do_something" does not exist
LINE 1: SELECT do_something
               ^
QUERY:  SELECT do_something
CONTEXT:  PL/pgSQL function "prep_test" line 4 at EXECUTE statement 
```

在 PL/PgSQL 之外它工作正常：

```
regress=# EXECUTE do_something;
?column?
----------
        1
(1 row) 
```

我不确定您将如何在 PL/PgSQL 中执行准备好的语句。

出于兴趣，您*为什么*要尝试在 PL/PgSQL 中使用准备好的语句？无论如何，计划都是为 PL/PgSQL 准备和缓存的，它是自动发生的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-17T01:17:22.027

有一种方法可以`EXECUTE`在函数中准备好语句，但是就像公认的答案所说的那样，您通常不希望在函数中执行此操作，因为该函数已经存储了它的计划。

话虽如此，仍然存在需要在函数中使用准备好的语句的用例。我的用例是为不同用户使用多个模式，其中模式包含名称相似的表，并且您希望使用相同的函数根据`search_path`设置的内容访问这些表之一。在这种情况下，由于函数存储其计划的方式，在更改`search_path`原因后使用相同的函数会导致事情中断。我已经说明了这个问题的两种解决方案。首先是使用`EXECUTE '<Your query as a string here>'`. 但这对于大型查询可能会变得非常难看，因此使用第二种方法的原因是，它涉及到`PREPARE`.

因此，对于“为什么”你想要这样做的背景，这里是如何：

```
CREATE OR REPLACE FUNCTION prep_test()
  RETURNS void AS $$
BEGIN
  PREPARE do_something AS SELECT 1;
  EXECUTE 'EXECUTE do_something;';
END;
$$ LANGUAGE plpgsql; 
```

尽管添加一些保护措施以防止其损坏可能符合您的最佳利益。就像是：

```
CREATE OR REPLACE FUNCTION prep_test()
  RETURNS void AS $$
BEGIN
  IF (SELECT count(*) FROM pg_prepared_statements WHERE name ilike 'do_something') > 0 THEN
    DEALLOCATE do_something;
  END IF;

  PREPARE do_something AS SELECT 1;
  EXECUTE 'EXECUTE do_something;';

  DEALLOCATE do_something;
END;
$$ LANGUAGE plpgsql; 
```

同样，那些认为他们想要这样做的人，通常可能不应该这样做，但对于那些需要它的情况，这就是你的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T09:26:30.517

您可以在 PLPGSQL 中使用这样的 EXECUTE 语句：

```
select magicvalue into str_execute from magicvalues where magickey = ar_requestData[2];
EXECUTE str_execute into str_label USING ar_requestData[3], ar_requestData[4]::boolean, ar_requestData[5]::int, ar_requestData[6]; 
```

这是我在我的应用程序中使用的代码。ar_requestData 是一个包含文本值的数组。在表魔法值中，我是否存储了准备好的语句之类的东西。选择语句例如：

```
insert into classtypes(label, usenow, ranking, description) values($1,$2,$3,$4) returning label' 
```

亲切的问候，

洛克伯格曼

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-13T03:13:46.057

plpgsql 中不允许使用 PREPARE 语句。您可以拼接函数内的所有语句，然后使用动态执行。这是一个例子。

```
create or replace function sp_test(f_total int) returns void as $ytt$
declare v_sql text;
declare i int;
begin
  v_sql:='prepare ytt_s1 (int,timestamp) as select * from tbl1 where id = $1 and log_time = $2;';
  while i < f_total
  loop
    v_sql:=v_sql||'execute ytt_s1('||i||',now());';
    i := i + 1;
  end loop;
  v_sql:=v_sql||'deallocate ytt_s1;';
  execute v_sql;
end;
$ytt$ language plpgsql; 
```

# java - java以英语和其他语言打印结果

> ID：12707419
> 
> 赞同：1
> 
> 时间：2012-10-03T11:20:28.077
> 
> 标签：java

我想要做的是在 java 输出中以英语和其他语言打印结果。除了复制粘贴代码并将输出翻译成我需要的语言之外，还有什么“简单”的方法可以做到这一点？

我正在构建一个用户频繁输入/输出的游戏，我希望可以选择问题（输出）为超过 1 种语言。用户的输入只是数字，因此不会有任何差异。

一种方法是复制带有输出（printf）的类并相应地翻译它们，并在游戏开始时要求用户选择语言，但在这种情况下，每次我对代码进行更改时，我都需要在两者中都进行更改代码的副本，从而使其变得更加困难。
有没有更短更健壮的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:37:13.203

查看 java.text.MessageFormat 类。它允许您使用占位符（如分数、用户名等）定义模板消息，然后将这些消息与数据重复合并以生成您正在寻找的字符串类型。我们的想法是，您将为要支持的每种语言提供一组模板。

# c# - 如何删除动态创建的事件处理程序？

> ID：12707423
> 
> 赞同：0
> 
> 时间：2012-10-03T11:20:45.427
> 
> 标签：c#, wpf, event-handling

我是比较新手。我认为我遇到的问题很简单，但我找不到解决方案。单击 button1 会打开一个弹出窗口并添加到`canvas1`MouseDown 事件处理程序`canvas1.MouseDown += (s1, e1) =>{...};`中，我想在用户关闭弹出窗口时将其删除。这是整个代码：

```
namespace MyfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            int linesNumber = 0;

            Button button1 = new Button();
            button1.Content = "Draw";
            button1.HorizontalAlignment = HorizontalAlignment.Left;
            button1.VerticalAlignment = VerticalAlignment.Top;
            button1.Click += (s, e) =>
            {
                Popup popup = new Popup();
                popup.PlacementTarget = button1;
                popup.IsOpen = true;

                Button closePopupButton = new Button();
                closePopupButton.Content = "close";
                closePopupButton.Click += (s1, e1) =>
                {
                    popup.IsOpen = false;
                    // remove canvas1.MouseDown event handler here
                };
                popup.Child = closePopupButton;

                canvas1.MouseDown += (s1, e1) =>
                {
                    Point point = Mouse.GetPosition(canvas1);
                    Line line = new Line();
                    line.X2 = point.X; line.Y2 = point.Y;
                    line.Stroke = Brushes.Red; line.StrokeThickness = 1;
                    canvas1.Children.Add(line);
                    linesNumber++;
                };
            };
            grid1.Children.Add(button1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:27:17.200

将事件处理程序保存在变量中的某处

```
MouseButtonEventHandler onMousedown = (o, args) => 
{ 
    ...
};

canvas1.MouseDown += onMouseDown; 
```

稍后您可以再次删除事件处理程序：

```
canvas1.MouseDown -= onMouseDown; 
```

# javascript - 无法在 html/javascript 中提交表单

> ID：12707425
> 
> 赞同：0
> 
> 时间：2012-10-03T11:20:49.607
> 
> 标签：javascript, html

我有一个应用程序，用户必须在表单中输入有关自己的详细信息；

```
 <ul class = 'rounded'>

            <li style = "color: #FFFFFF"><input type = "text" placeholder = "Name" name = "name" id = "name" autocapitalize = "on" autocorrect = "off" autocomplete = "off" style="color: #FFFFFF;  background: transparent url(../.png);  border: 0;  font: normal 17px Helvetica;  padding: 0;  display: inline-block;  margin-left: 0px;  width: 100%;  -webkit-appearance: textarea;" /></li>
            <li style = "color: #FFFFFF"><input type = "email" placeholder = "Email" name = "email" id = "email" autocapitalize = "off" autocorrect = "off" autocomplete = "off" style="color: #FFFFFF;  background: transparent url(../.png);  border: 0;  font: normal 17px Helvetica;  padding: 0;  display: inline-block;  margin-left: 0px;  width: 100%;  -webkit-appearance: textarea;" /></li>
            <li style = "color: #FFFFFF"><input type = "text" maxlength = "11" placeholder = "Telephone" name = "telephone" id = "telephone" style="color: #FFFFFF;  background: transparent url(../.png);  border: 0;  font: normal 17px Helvetica;  padding: 0;  display: inline-block;  margin-left: 0px;  width: 100%;  -webkit-appearance: textarea;" /></li><br>

            <li>Notifications<span class = 'toggle'><input type = 'checkbox' class = 'toggle' name = 'notifications' id = 'notifications' /></span></li>
            <li>Preview<span class = 'toggle'><input type = 'checkbox' class = 'toggle' name = 'preview' id = 'preview' /></span></li>

            <li>Set Profession</li>

            <select name = 'job' id = 'job'>
                <option value = 'jobselect'>Select Profession</option>
                <option value = 'job1'>Mechanical Engineer</option>
                <option value = 'job2'>Software Engineer</option>
                <option value = 'jobother'>Other</option>
            </select>

            <p style = 'font-weight: normal; color: white;'>If you chose 'Other', please specify: <input type = "text" placeholder = "Other" name = "other" id = "other" autocapitalize = "on" autocorrect = "off" autocomplete = "off" style="color: #777;  background: transparent url(../.png);  border: 0;  font: normal 17px Helvetica;  padding: 0;  display: inline-block;  margin-left: 0px;  width: 100%;  -webkit-appearance: textarea;"/></p>

        </ul>

    </form> 
```

然后在一个按钮之后提交它。表单链接到一个 .js 文件，编码如下

```
 var jQT = $.jQTouch({

icon: 'kilo.png',
statusBar: 'black' 
```

});

```
 $('#settingsForm').submit(function() {

    var formValues = {
        'name' : document.getElementById('#name'),
        'email' : document.getElementById('#email'),
        'telephone' : document.getElementById('#telephone'),
        'notifications' : document.getElementtById('#notifications'),
        'preview' : document.getElementById('#preview'),
        'job' : document.getElementById('#job'),
        'other' : document.getElementById('#other')
    };

    var formValueStr = JSON.stringify(formValues);

    $.cookie('SettingsCookie', formValueStr, { expires: 14 }); 
```

});

```
 $(document).ready(function() {

    var formValueStr = $.cookie('SettingsCookie');

    if (formValueStr != null) {

        var formValues = JSON.parse(formValuesStr);

        write(formValues['#name']);
        write(formValues['#email']);
        write(formValues['#telephone']);
        write(formValues['#notifications']);
        write(formValues['#preview']);
        write(formValues['#job']);
        write(formValues['#other']);

    } 
```

});

但是出了点问题，我不知道是什么。表单没有按应有的方式保存，当我希望它保留时，字段中的信息将被删除。我该如何解决？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:49:29.950

您应该使用`document.getElementById('name').value`来读取 java 脚本中的文本值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:22:30.370

你错过了你的开始`<form id="settingsForm">`标签..

当您使用 JQuery 时，您最好`$('#name').val();`使用

这是针对选择列表的。您基本上必须循环选择列表的所有元素并检查它们是否被选中。

```
 <select name="garden" multiple="multiple">

    <option>Flowers</option>
    <option selected="selected">Shrubs</option>
    <option>Trees</option>
    <option selected="selected">Bushes</option>

    <option>Grass</option>
    <option>Dirt</option>
  </select>
  <div></div>
<script>

    $("select").change(function () {
          var str = "";
          $("select option:selected").each(function () {
                str += $(this).text() + " ";
              });
          $("div").text(str);
        })
        .trigger('change');
</script> 
```

和你的例子..

```
<script>
   var changedValues = [];
   $("select#job option:selected").each(function () {
             changedValues.push($(this).text());
    });

</script>

<select name = 'job' id = 'job'>
                <option value = 'jobselect'>Select Profession</option>
                <option value = 'job1'>Mechanical Engineer</option>
                <option value = 'job2'>Software Engineer</option>
                <option value = 'jobother'>Other</option>
</select> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T09:23:01.733

我只是有一个非常相似的问题。我有一个复选框，当其他人使用它时它没有出现，有时在 XP 上使用 IE8 可以，但在 IE9、Windows 7 或 Firefox 上却不行。最终我找到了 name="preview"。如果我将名称更改为“asdpreview”甚至“review”，那很好。

我无法弄清楚为什么会出现问题 - 也许现在保留了“预览”？无论如何更改名称也可能会解决您的问题。

# ruby - 如何检查ruby中是否存在记录

> ID：12707426
> 
> 赞同：0
> 
> 时间：2012-10-03T11:20:55.423
> 
> 标签：ruby

我正在使用 Ruby 1.9.3、MS Sql Server 和 Windows 7 Ultimate

我想知道如何检查数据库中是否已经存在某个记录，以避免重复记录。在 Rails 中调用 Object.exists 会很容易吗？但我只使用 Ruby。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:54:24.867

检查源代码[`exists?`](http://apidock.com/rails/ActiveRecord/FinderMethods/exists?)在activerecord

它基本上`primary key`使用 sql 查询检查是否存在具有 id 的存在。

您可以使用这些来编写自己的辅助方法。

否则你也可以`activerecord`在 ruby​​ 中使用 gem。

# android - Android：通过 Intent.ACTION_SEND 分享（某事），然后自动返回我的应用

> ID：12707427
> 
> 赞同：5
> 
> 时间：2012-10-03T11:20:55.997
> 
> 标签：android, action, send, sharing

我想分享我的应用程序中的一些内容。一旦共享（例如 - 消息发送），我希望我的应用程序再次处于活动状态并且发送应用程序消失。使用下面的代码，我希望`onActivityResult`被调用，但它从未被调用。

发送电子邮件后，我的应用程序再次出现，但在发送 SMS（“消息”）后，消息应用程序仍然存在。（`onActivityResult`永远不会被调用）

谢谢 ：-）

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
sharingIntent.setType("text/plain"); 
String shareBody = "This is a test";
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "You have to see this!");
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);

startActivityForResult(Intent.createChooser(sharingIntent, "Share via"),1);

getFragmentManager().popBackStack(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T12:37:07.270

只有当用户按下后退按钮时才会调用它。因为您正在开始一个新的意图，所以您将控制权交给了另一个应用程序。所以通常，如果用户按下后退按钮（我会作为 Android 用户这样做），用户将返回到您的应用程序。这是我更喜欢在这种情况下使用的方式，据我所知，这也是在 Android 中执行此操作的唯一方法。

# android - 虚拟盒子 Android 模拟器和 Eclipse

> ID：12707434
> 
> 赞同：1
> 
> 时间：2012-10-03T11:21:29.150
> 
> 标签：android, android-emulator

我开始在我的开发中使用这台 VirtualBox 机器作为 Android 模拟器：

[http://www.buildroid.org/blog/?page_id=121](http://www.buildroid.org/blog/?page_id=121)

我在这个模拟器中安装并执行我的应用程序，但是当我尝试使用 adb connect [my ip address] 连接到 Eclipse 时，我发现了问题。

当我使用 Eth1 的仅主机网络将我的虚拟机与 Eclipse 连接时，我的虚拟设备失去了互联网连接。仅当 eth01 网络配置为 NAT 时，我的设备才能访问互联网，但使用此配置，我无法使用 adb connect 与 Eclipse 连接。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:55:57.870

最后，我的 Virtual Box 模拟器工作并与 Eclipse 通信。当我发现正确的网络配置一切正常。

我正确的网络配置是：

Et01：NAT Et02：内部网络。

在 adb -connect 中，我使用 Et01 Ip 将其与 Eclipse 连接。

希望有用！！

# .net - 16352 是 .NET Webservices 可以返回 Jsonp 的最大长度吗？

> ID：12707436
> 
> 赞同：0
> 
> 时间：2012-10-03T11:21:40.627
> 
> 标签：.net, web-services, jsonp

我有一个将 Json 值返回给 javascript 调用者的网络服务。由于我无法让 .NET 返回 JSON 格式，（即使我已将其设置为 ResponseFormat:=ResponseFormat.Json）（此外，这不是跨域请求）我必须设置 javascript 以接收它改为 JSONP。

这工作正常，直到返回值的字符长度开始增长。奇怪的错误开始出现。花了我几个小时，最后，我能找到的唯一模式是：

在“神奇”的 16352 个字符之后，它将在返回的值之间插入一个 ");jsonp1349260900225("。（1349260900225 <-- 这会发生变化，但格式保持不变）此后每 16352 个字符都会如此。在 javascript一方面，它只是接受响应并尝试将其解析为正常，从而导致错误出现在输出的随机区域。

以前有人遇到过这个问题吗？16352 个字符并不是很多，我根本无法减少长度来回避这个问题。

提前致谢。

以下是 firebug 返回值的片段：

> lign=\u0027absMiddle\u0027 /\u003e\u003cimg src=\u0027http://squarelet.com/images/smiley/Smile.gif\u0027 align=\u0027absMiddle\u0027 /\u003e \u003cimg src=\u0027http://squarelet .com/images/smiley/Smile.gif\u0027 align=);jsonp1349260900225(u0027absMiddle\u0027 /\u003e\u003cimg src=\u0027http://squarelet.com/images/smiley/Smile.gif\u0027 align=\u0027absMiddle \u0027 /\u003e \u003cimg src=\u0027http://squarelet.com/images/smiley/Smile.gif\u0027 align=\u0027absMiddle\u0027 /\u003e\u003cimg src=\u0027http://squarelet.com/images /笑脸/Smile.gif\u0027 对齐=\

这是返回值的 Web 服务：

```
<WebMethod()> _
<ScriptMethod(UseHttpGet:=True, ResponseFormat:=ResponseFormat.Json)> _
Public Function L_C_H(ByVal CSI As String, ByVal CCI As String) As List(Of SquareLet.ChatManagement.Chat)

    Return SquareLet.ChatManagement.Chat.LoadHistory(Guid.Parse(CSI), Guid.Parse(CCI))

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:00:33.347

您必须[将 MaxJsonLength 设置](http://msdn.microsoft.com/en-us/library/bb763183%28VS.100%29.aspx)为更大的值。该属性可能会限制您。

# sml - 在函数内分配多个值

> ID：12707439
> 
> 赞同：1
> 
> 时间：2012-10-03T11:21:48.030
> 
> 标签：sml, smlnj

我想在函数中分配多个值，例如在函数中：

```
fun posdiv(n,l::ls)=let val m=n in posdiv1(k,m,n,l::ls) end; 
```

我想像`let val...`下面这样：

```
fun posdiv(n,l::ls)=let val m=n (*and val j=greatest(l::ls) where greatest is a different function and returns a value not a list*)in posdiv1(k,m,n,l::ls) end; 
```

它的一般语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:39:40.530

与在其他地方分配多个值的语法相同：

```
fun posdiv (n, l::ls) =
  let
    val m = n
    val j = greatest (l::ls)
  in
      posdiv1 (k, m, n, l::ls)
  end 
```

# wordpress - 如何使用 .htaccess 在内部将 /blog/ 添加到 url？

> ID：12707440
> 
> 赞同：0
> 
> 时间：2012-10-03T11:22:02.110
> 
> 标签：wordpress, .htaccess

嗨，我在子文件夹 /blog/ 中安装了 wordpress，因为它必须与其他旧版 cms 共存，所以现在如果我想访问 wordpress 的某些页面，我需要使用链接作为 www.domain.com/blog/news/并希望使用 www.domain.com/news/。

所以基本上对于某些链接，我需要在内部以某种方式添加这个 /blog/ 以便 wordpress 可以正常处理它。

请注意，链接很少，因此重写规则可以是字面的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:03:12.110

为 wordpress 重写 URI 总是有点粗略，因为 wordpress 有自己的路由方式，有时可能无法与其他重写很好地配合，但您可以尝试：

```
RewriteRule ^/?news/some-page$ /blog/news/some-page [L] 
```

只要它们在任何其他 wordpress 相关规则之前。

# vb.net - 从另一个表单关闭一个表单

> ID：12707443
> 
> 赞同：0
> 
> 时间：2012-10-03T11:22:06.007
> 
> 标签：vb.net, winforms

我面临一个多表单应用程序的问题，我有 mainForm 和几个 mdiForms。其中一个子表单 (frmDashboardManager) 是在 mainForm 之外打开新的拥有表单 (frmDahboard) 这是我所拥有的：

```
 Dim fDash As New frmDashboard
  fDash = isDashboardOpen(tempDash) 
  If fDash IsNot Nothing Then
    fDash.Close() 'HERE I GET THE ERROR
  End If

   Private Function isDashboardOpen(ByVal dash As clsDashboard) As frmDashboard

    isDashboardOpen = Nothing
    Try
        'search if Dashboard is already open
        For Each fr As frmDashboard In Me.OwnedForms
            If fr.My_Dashboard.Id = dash.Id Then
                isDashboardOpen = fr
                Exit For
            End If
        Next

    Catch ex As Exception
        gError.GetAppEx(ex, FORM_NAME & ".isDashboardOpen")
    Finally

    End Try

End Function 
```

我得到的错误是：对象引用未设置为对象的实例。

疯狂的是，我检查了 isDashboardOpen 实际上返回了一个 frmDashboard（这也是执行 fDash.Close() 的原因）。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:12:17.543

我刚刚发现我的错误。

我在 frmDashboard 中配置了两次用户控件。我纠正了这一点，一切正常。

感谢您的时间。

# c++ - 调整大小以减少计数时，在 vector::resize() 中重新分配的空间？

> ID：12707444
> 
> 赞同：2
> 
> 时间：2012-10-03T11:22:07.723
> 
> 标签：c++, stl, vector

根据**Stroustrup 的说法：C++ 编程语言**：-

“当调整***向量***的大小以容纳更多（或更少）元素时，它的所有元素都可能被移动到新位置。”

即使将矢量重新调整为更小的尺寸，这是否成立？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:31:36.737

**情况 1：**如果请求的新大小大于当前大小，`std::vector::capacity()`则所有元素都将被重新定位。
**情况 2：**如果请求的新大小小于当前大小，`std::vector::capacity()`则不会重新定位元素。

* * *

**标准证据：**

该标准将效果定义`vector::resize()`为：

**C++11 标准 23.3.6.3/12 向量容量：**

```
void resize(size_type sz, const T& c); 
```

**影响：**

```
if (sz > size())
     insert(end(), sz-size(), c);
else if (sz < size())
    erase(begin()+sz, end());
else
; // do nothing 
```

正如[@DavidRodríguez-dribeas](https://stackoverflow.com/users/36565/david-rodriguez-dribeas)正确指出的那样，`std::vector::insert()`操作的迭代器失效规则是：

> **23.3.6.5 矢量修饰符**
> 
> 1 [插入，push_back，emplace，emplace_back]
> 
> 备注：**如果新大小大于旧容量，则**导致重新分配。如果没有发生重新分配，则插入点之前的所有迭代器和引用仍然有效。

本质上这意味着：插入点之前的所有迭代器和引用都将不受影响，除非新容器大小大于先前的容量，因为在这种情况下，所有元素都可能被移动到新位置，从而使指向原始位置的指针/迭代器无效。由于**`resize()`仅在容器末尾擦除/插入元素**^([注 1])。控制因素归结为根据当前容量请求的大小。

因此，案例 1 的结果。

在**案例 2** `std::vector::erase()`中将被调用，并且在这种情况下的无效规则是：

> **23.3.6.5 矢量修饰符**
> 
> 迭代器擦除（const_iterator 位置）；
> 
> 3 效果：在擦除点**处或之后**使迭代器和引用无效。

由于^([Note 1])，元素只会在最后被删除，不需要重新定位所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:23:49.497

> ...元素可能会移动到新位置。”

注意它所说的**可能会被移动**。所以这意味着这*取决于*它是什么类型的调整大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:08:58.830

向量中的迭代器因两个原因而无效。如果向量需要增加其容量，则在迭代器 (1) 的位置之前插入/删除元素或重新定位整个缓冲区 (2)。这里的关键是对`capacity()`.

因为`resize()`只从容器的末尾插入/删除。当向量收缩时，只有那些引用被删除元素的迭代器才会失效。当向量增长时，如果新大小小于 ，则没有迭代器会失效，如果新大小大于`capacity()`，则所有迭代器都将失效。

由于 Als 提供了不正确的*证据*¹，因此我在此处添加了正确的引号：

> **23.3.6.5 矢量修饰符**
> 
> 1 [插入，push_back，emplace，emplace_back]
> 
> 备注：**如果新大小大于旧容量，则**导致重新分配。如果没有发生重新分配，则插入点之前的所有迭代器和引用仍然有效。
> 
> 2 [擦除]
> 
> **效果：在擦除点或擦除点之后**使迭代器和引用无效。

类似的引用可以在 C++03 中找到。

* * *

¹避免重复指示`resize`插入或擦除等价的引用。哪个是对的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:31:09.890

问题正文中的答案“”**当调整向量的大小以容纳**更多（或**更少**）**元素时，它的所有元素都可能被移动到新位置**。“”

# c# - WCF 服务崩溃本地主机行为

> ID：12707447
> 
> 赞同：2
> 
> 时间：2012-10-03T11:22:17.137
> 
> 标签：c#, .net, wcf

我有一个带有 NetTcpBinding 和 DuplexChannel 自托管在控制台应用程序中的 WCF 服务。客户“订阅”WCF 服务，我收集到列表的回调。在客户端，我已将处理程序附加到故障和关闭事件，当我收到它们时，我只是再次重新连接客户端。

在测试服务崩溃时，我有一个奇怪的行为（对我来说）：当客户端和服务都在本地主机上测试时，我只是杀死 WCF 服务进程并且客户端收到故障事件，然后一直尝试重新连接，直到服务又活了。

当我在生产服务器上部署服务并且客户端在另一个计算机上（通过互联网，不在同一个域中）时，当我终止托管进程时 - 客户端没有收到任何有关故障的通知，尽管我有正确的关闭方法当中止被发送到列表中的所有回调时的应用程序，当我以正确的方式关闭它时 - 客户端得到错误事件并正确地尝试重新订阅。

所以问题是，为什么会这样？问题不是如何保持活动连接，我想我找到了如何以另一种方式做到这一点（可靠的会话或 ping 服务）

我只想知道为什么部署时事件的行为不同？配置是一样的——我没有改变任何东西。

# arduino - 与 CAN 总线屏蔽 (SparkFun) 的 Arduino Mega 2560 连接

> ID：12707449
> 
> 赞同：0
> 
> 时间：2012-10-03T11:22:26.990
> 
> 标签：arduino

我正在尝试将[Arduino Mega2560](http://en.wikipedia.org/wiki/List_of_Arduino_compatibles#Official_Arduino_versions)与[SparkFun](http://en.wikipedia.org/wiki/SparkFun_Electronics)的[CAN 总线](http://en.wikipedia.org/wiki/CAN_bus) [屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)连接并进行通信。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:40:32.360

将 CAN 设备连接到屏蔽层（正确连接[CAN-Low](http://en.wikipedia.org/wiki/CAN_bus#Layers)和[CAN-High](http://en.wikipedia.org/wiki/CAN_bus#Layers)信号）并在 CAN 低和 CAN 高信号之间放置至少一个 120 欧姆的电阻（它们有时称为终端电阻，但它们主要[作用作为上拉电阻](https://electronics.stackexchange.com/questions/19362/what-does-this-can-bus-waveform-mean/19390#19390)（类似于集电极开路/漏极开路的上拉电阻）。

# asp.net - 如何使用 ASP.NET 检查电子邮件地址是否存在？

> ID：12707452
> 
> 赞同：0
> 
> 时间：2012-10-03T11:22:35.443
> 
> 标签：asp.net, c#-4.0

如何使用 ASP.NET 检查给定的电子邮件（任何有效的电子邮件）地址是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:26:38.790

```
you send invitation mail to user with encrypted key..
If user is verified you have to verified key and you have only verified email.. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:34:04.787

如果不实际发送邮件，则无法检查电子邮件是否存在。

您唯一可以检查的是地址是否具有正则表达式的正确形状：

```
string email = txtemail.Text;
Regex regex = new Regex(@"^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$");
Match match = regex.Match(email);
if (match.Success)
    Response.Write(email + " is corrct");
else
    Response.Write(email + " is incorrct"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:54:43.140

这是一个可能适合您的代码解决方案。此示例从不同于 From: 消息中指定的地址的地址发送消息。当应处理退回的消息并且开发人员希望将退回的消息重定向到另一个地址时，这很有用。

[http://www.afterlogic.com/mailbee-net/docs/MailBee.SmtpMail.Smtp.Send_overload_3.html](http://www.afterlogic.com/mailbee-net/docs/MailBee.SmtpMail.Smtp.Send_overload_3.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:14:06.260

整个过程并不是那么简单。它需要与电子邮件服务器进行全面通信，并询问他此电子邮件是否存在。

[我知道一个供应商提供一个 dll 来进行所有这些通信并检查服务器上是否存在电子邮件， http://www.advancedintellect.com/product.aspx?](http://www.advancedintellect.com/product.aspx?mx) mx 上的 aspNetMX

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-12T06:31:38.947

首先你需要导入这个命名空间：

```
using System.Text.RegularExpressions;

private bool ValidateEmail(string email)
{
    Regex regex = new Regex(@"^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$");
    Match match = regex.Match(email);
    if (match.Success)
        return true;
    else
        return false;
} 
```

[访问这里](http://www.stepover-f10.com/2014/01/validate-email-address-in-csharp.aspx)查看完整的源代码。

# jquery - 使用可以垂直放置的尽可能多的 div 填充浏览器

> ID：12707453
> 
> 赞同：-1
> 
> 时间：2012-10-03T11:22:36.677
> 
> 标签：jquery, html, css

我只是说要考虑这个查询……我需要

计算浏览器窗口高度并附加具有设置高度的 div 以填充直到窗口已满......这是为了让 div 垂直堆叠在一起......我正在寻找生成过渡

任何指针都会很棒

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:29:17.197

请在下面找到根据浏览器的高度添加宽度和高度为 100px 的 div 的 Jquery 代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Vertically Add up Div's</title>
  <style type="text/css">
    #container      { background:#ccc; display:inline-block; height:100%; margin:0; padding:0; width:100%; }
    .add-blocks     { border:1px solid red; float:left;  height:100px; width:100px; }
  </style>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

  <script type="text/javascript">

    $(document).ready(function(){

        var wheight = $(window).height();
        var wwidth  = $(window).width();

        /* Number of rows */
        var blocks  = Math.round(wheight / 100);        

        /* Number of cols */
        var cols = Math.round(wwidth / 100);

        /* Div html markup */
        var str = "<div class='add-blocks'>&nbsp;</div>";

        for(var i = 1; i < (blocks); i++)
        {
            for(var j = 1; j < cols; j++)
            {
                $("#container").append(str);
            }
        }

    });

    </script>

</head>

<body>
<div id="container">&nbsp;</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:26:51.263

```
var divHeight = 100;
var winHeight = window.innerHeight;
for(i =0; i < parseInt(winHeight / divHeight);i++){
$('<div style="height:100px;float:left;"></div>').appendTo('body');
} 
```

你是这个意思吗？

# ios - BugSense 在 iOS 上的 phonegap 应用程序上以状态码 500 响应

> ID：12707455
> 
> 赞同：2
> 
> 时间：2012-10-03T11:22:42.520
> 
> 标签：ios, cordova, nsexception, bugsense

我正在为 iOS 设备开发一个 phonegap 应用程序。我还为 iOS 集成了 bugsense。

我正在使用 javascript 中的 window.onError 来捕获错误，然后使用 Webview 委托方法来执行异常处理。这是我创建自定义 NSException 对象并使用 BUGSENSE_LOG() 方法记录异常的地方。但这行不通。这是我得到的错误：

```
 BugSense --> Server responded with status code: 500 
```

这是我的代码：

```
NSDictionary *myDictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"Source", @"Phonegap ios", nil];

NSException *exc = [NSException exceptionWithName:@"MyException" reason:completeMessage userInfo:myDictionary];    
//[exc raise];
BUGSENSE_LOG(exc, @"Tag"); 
```

我已经关闭了调试器，并且正在制作发布版本。我也检查了我的设置，一切似乎都符合 Bugsense 官方网站上给出的指导方针。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:37:39.150

好吧..我能够找到解决我自己问题的方法。我所做的不是创建 NSException 对象，而是引发了一个异常，捕获它然后记录它。令人惊讶的是它的工作..

```
 @try {
    [NSException raise:@"MyException" format:@"%@,%@,%@",message,url,lineNumber];
}
@catch (NSException *exception) {        
    BUGSENSE_LOG(exception, @"tag");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:29:19.947

请查看 Bug sense Guys 报告的内容。请参阅 URL [https://groups.google.com/forum/?fromgroups=#!topic/phonegap/9JasIb4Jlg4](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/9JasIb4Jlg4)

大家好，谢谢你提出来。我们已经开始尝试使用 PhoneGap，但我们发现了以下问题。window.onerror 无法在 Android 上运行，因此我们无法拥有全局未捕获的异常处理程序。然后我们想到创建一个 Bugsense 回调，您可以将它添加到 Phonegap 的 onerror 回调中。

如果您有任何建议，我们将非常乐意听取他们的意见。我们还发布了我们的 api 结构，以便您可以创建自己的插件。顺便说一句，我们有一些 HTML5 支持 [https://github.com/soundcloud/Bugsense-js](https://github.com/soundcloud/Bugsense-js) https://github.com/crcn/mesh-bugsense

# c# - 强制接口实现检查异常

> ID：12707460
> 
> 赞同：1
> 
> 时间：2012-10-03T11:23:05.140
> 
> 标签：c#, java, .net, exception, interface

> **可能重复：**
> [C# 明确定义抛出的异常](https://stackoverflow.com/questions/4088114/c-sharp-explicitly-defining-what-exceptions-are-thrown)

我有一段这样的Java代码：

```
public interface ByteSource
{
    public void open() throws IOException;
    public void close();
    public byte readByte() throws IOException;
    public void writeBytes(byte[] bytes) throws IOException;
} 
```

我不是 Java 专家（也不是 .NET 专家！），我想创建一个类似的界面，`.NET`但我不确定如何处理`throws ....`. 我想知道这在 Java 语言中是什么意思。

我应该关心它吗？目前最好的事情（或者我能想到的唯一事情）看起来像：

```
public interface IByteSource
{
    void Open();
    void Close();
    byte ReadByte();
    void WriteBytes(byte[] bytes);
} 
```

.NET 中是否有类似于 java 代码的方法？！也许有些属性？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T11:26:31.313

我不会在意它。受检查的异常没有添加到 .NET 中的原因有很多，但基本上是因为在大多数情况下，它们更多的是障碍而不是帮助。您也许可以用它`///`来*记录*它可能*合理预期*会抛出的东西，但将其留给调用链来决定它们是否专门处理。例如：

```
/// <summary>what this does</summary>
/// <exception cref="System.IO.IOException">some scenario</exception>
void Open(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:26:26.207

在 C# 中，您不必声明代码会抛出哪些异常，因此请忘记这行代码。你的代码很好。

# wordpress - 一次更新所有帖子，不想添加或删除只更新，以便自动生成帖子 slug..

> ID：12707469
> 
> 赞同：0
> 
> 时间：2012-10-03T11:23:32.720
> 
> 标签：wordpress, post, updates

我已将我网站的默认永久链接更改为自定义永久链接 (/%post-name%) 现在所有帖子都需要 slug 值。目前不存在。如果 slug 屏幕选项无法发布或更新帖子，则会自动添加 slug，但在我的情况下，现在我无法为所有帖子使用 slug 选项，这已被禁用，现在我想更新每个post 什么都不想添加或删除只想更新所有帖子。目前数据库中的帖子数为200000，请提出任何有效的查询或任何方法，以便完成我的任务。

谢谢，莫妮卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T23:36:55.613

试试这个插件，它应该可以完成工作：

[http://www.jerrytravis.com/598/wordpress-plugin-to-generate-post-slugs](http://www.jerrytravis.com/598/wordpress-plugin-to-generate-post-slugs)

这段代码也可以完成这项工作，但是您必须添加一些限制以避免脚本由于执行的最大限制而崩溃：

```
// get all posts
$posts = get_posts( array (  'numberposts' => -1 ) );

    foreach ( $posts as $post )
    {
        // check the slug and run an update if necessary 
        $new_slug = sanitize_title( $post->post_title );
        wp_update_post(
            array (
                'ID'        => $post->ID,
                'post_name' => $new_slug
            )
        );
    } 
```

代码的信用： [https ://wordpress.stackexchange.com/questions/46086/regenerate-slugs-from-title-of-posts](https://wordpress.stackexchange.com/questions/46086/regenerate-slugs-from-title-of-posts)

# excel - 编译错误：Next 没有 For

> ID：12707470
> 
> 赞同：1
> 
> 时间：2012-10-03T11:23:36.147
> 
> 标签：excel, vba, outlook, export

我正在尝试将与 Outlook 2010 中特定文件夹相关的所有数据导出到 Excel。我需要收件人、发件人、正文、所有日期字段、有附件等。有没有一种方法可以在不逐字段定义的情况下包含所有字段？

当我运行下面的代码时，我有一个编译错误：Next without For。

我相信所有的IF都关闭了。

```
Sub ExportToExcel()

    On Error GoTo ErrHandler
    Dim appExcel As Excel.Application
    Dim wkb As Excel.Workbook

Dim wks As Excel.Worksheet    
Dim rng As Excel.Range    
Dim strSheet As String    
Dim strPath As String    
Dim intRowCounter As Integer    
Dim intColumnCounter As Integer    
Dim msg As Outlook.MailItem    
Dim nms As Outlook.NameSpace    
Dim fld As Outlook.MAPIFolder    
Dim itm As Object
    strSheet = "OutlookItems.xls"
    strPath = "C:\"

strSheet = strPath & strSheet    
Debug.Print strSheet
'Select export folder Set nms = Application.GetNamespace("MAPI")    
Set fld = nms.PickFolder
'Handle potential errors with Select Folder dialog box.

If fld Is Nothing Then    
MsgBox "There are no mail messages to export", vbOKOnly, "Error"    
Exit Sub    
ElseIf fld.DefaultItemType <> olMailItem Then    
MsgBox "There are no mail messages to export", vbOKOnly, "Error"    
Exit Sub    
ElseIf fld.Items.Count = 0 Then    
MsgBox "There are no mail messages to export", vbOKOnly, "Error"    
Exit Sub    
End If
    'Open and activate Excel workbook.
Set appExcel = CreateObject("Excel.Application")

appExcel.Workbooks.Open (strSheet)    
Set wkb = appExcel.ActiveWorkbook    
Set wks = wkb.Sheets(1)    
wks.Activate    
appExcel.Application.Visible = True
    'Copy field items in mail folder. For Each itm In fld.Items    
intColumnCounter = 1    
Set msg = itm    
intRowCounter = intRowCounter + 1    
Set rng = wks.Cells(intRowCounter, intColumnCounter)    
rng.Value = msg.To    
intColumnCounter = intColumnCounter + 1    
Set rng = wks.Cells(intRowCounter, intColumnCounter)    
rng.Value = msg.SenderEmailAddress    
intColumnCounter = intColumnCounter + 1    
Set rng = wks.Cells(intRowCounter, intColumnCounter)    
rng.Value = msg.Subject    
intColumnCounter = intColumnCounter + 1    
Set rng = wks.Cells(intRowCounter, intColumnCounter)    
rng.Value = msg.Body    
intColumnCounter = intColumnCounter + 1    
Set rng = wks.Cells(intRowCounter, intColumnCounter)    
rng.Value = msg.SentOn    
intColumnCounter = intColumnCounter + 1    
Set rng = wks.Cells(intRowCounter, intColumnCounter)    
rng.Value = msg.ReceivedTime    
Next itm    
Set appExcel = Nothing        
Set wkb = Nothing    
Set wks = Nothing    
Set rng = Nothing    
Set msg = Nothing    
Set nms = Nothing    
Set fld = Nothing    
Set itm = Nothing    
Exit Sub    
ErrHandler:  If Err.Number = 1004 Then    
MsgBox strSheet & " doesn't exist", vbOKOnly, "Error"    
Else    
MsgBox Err.Number & "; Description: ", vbOKOnly, "Error"    
End If    
Set appExcel = Nothing    
Set wkb = Nothing    
Set wks = Nothing    
Set rng = Nothing    
Set msg = Nothing    
Set nms = Nothing    
Set fld = Nothing    
Set itm = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:41:02.357

这不是 For/Next 循环的问题。

换行

```
ErrHandler: If Err.Number = 1004 Then 
```

至

```
ErrHandler:
If Err.Number = 1004 Then 
```

**提示**：始终缩进您的代码 :) 您可能还想看到[这个](http://www.siddharthrout.com/2011/08/01/to-err-is-human/)（第 4 点）？

**编辑**：请参阅上面链接中的第 6 点：) 要在您的代码中说明这一点，请参阅此部分

```
 Set appExcel = Nothing
    Set wkb = Nothing
    Set wks = Nothing
    Set rng = Nothing
    Set msg = Nothing
    Set nms = Nothing
    Set fld = Nothing
    Set itm = Nothing
    Exit Sub
 ErrHandler:
    If Err.Number = 1004 Then
        MsgBox strSheet & " doesn't exist", vbOKOnly, "Error"
    Else
        MsgBox Err.Number & "; Description: ", vbOKOnly, "Error"
    End If

    Set appExcel = Nothing
    Set wkb = Nothing
    Set wks = Nothing
    Set rng = Nothing
    Set msg = Nothing
    Set nms = Nothing
    Set fld = Nothing
    Set itm = Nothing
End Sub 
```

这也可以写成

```
LetsContinue:
    Set appExcel = Nothing
    Set wkb = Nothing
    Set wks = Nothing
    Set rng = Nothing
    Set msg = Nothing
    Set nms = Nothing
    Set fld = Nothing
    Set itm = Nothing
    Exit Sub
ErrHandler:
    If Err.Number = 1004 Then
        MsgBox strSheet & " doesn't exist", vbOKOnly, "Error"
    Else
        MsgBox Err.Number & "; Description: ", vbOKOnly, "Error"
    End If

    Resume LetsContinue
End Sub 
```

另一个例子

```
If fld Is Nothing Then
    MsgBox "There are no mail messages to export", vbOKOnly, "Error"
    Exit Sub
ElseIf fld.DefaultItemType <> olMailItem Then
    MsgBox "There are no mail messages to export", vbOKOnly, "Error"
    Exit Sub
ElseIf fld.Items.Count = 0 Then
    MsgBox "There are no mail messages to export", vbOKOnly, "Error"
    Exit Sub
End If 'Open and activate Excel workbook. Set appExcel = CreateObject("Excel.Application")

Set wkb = appExcel.Workbooks.Open(strSheet)
Set wks = wkb.Sheets(1)
wks.Activate 
```

你不需要使用`Exit Sub`那么多次

您可以将其余代码放在`Else`IF 部分

事实上，不要`Exit Sub`在你的代码中使用。原因是，您的代码将退出子程序，而不会破坏和清理您创建的对象。优雅地退出程序:)

**跟进**

试试这个代码。（**未经测试**）

```
Sub ExportToExcel()
    On Error GoTo ErrHandler

    '~~> Excel Objects / Variables
    Dim appExcel As Excel.Application
    Dim wkb As Excel.Workbook
    Dim wks As Excel.Worksheet

    Dim strSheet As String, strPath As String
    Dim intRowCounter As Long, intColumnCounter As Long

    '~~> Outlook Objects
    Dim msg As Outlook.MailItem
    Dim nms As Outlook.Namespace
    Dim fld As Outlook.MAPIFolder
    Dim itm As Object

    strSheet = "OutlookItems.xls"
    strPath = "C:\"

    strSheet = strPath & strSheet

    Set nms = Application.GetNamespace("MAPI")
    Set fld = nms.PickFolder

    If fld Is Nothing Then
        MsgBox "There are no mail messages to export", vbOKOnly, "Error"
    ElseIf fld.DefaultItemType <> olMailItem Then
        MsgBox "There are no mail messages to export", vbOKOnly, "Error"
    ElseIf fld.Items.Count = 0 Then
        MsgBox "There are no mail messages to export", vbOKOnly, "Error"
    Else
        'Open and activate Excel workbook.
        Set appExcel = CreateObject("Excel.Application")

        Set wkb = appExcel.Workbooks.Open(strSheet)
        Set wks = wkb.Sheets(1)
        appExcel.Visible = True

        'Copy field items in mail folder.
        For Each itm In fld.Items
            Set msg = itm

            With wks
                intRowCounter = intRowCounter + 1
                .Cells(intRowCounter, intColumnCounter) = msg.To

                intColumnCounter = intColumnCounter + 1
                .Cells(intRowCounter, intColumnCounter) = msg.SenderEmailAddress

                intColumnCounter = intColumnCounter + 1
                .Cells(intRowCounter, intColumnCounter) = msg.Subject

                intColumnCounter = intColumnCounter + 1
                .Cells(intRowCounter, intColumnCounter) = msg.Body

                intColumnCounter = intColumnCounter + 1
                .Cells(intRowCounter, intColumnCounter) = msg.SentOn

                intColumnCounter = intColumnCounter + 1
                .Cells(intRowCounter, intColumnCounter) = msg.ReceivedTime
            End With
        Next itm
    End If
LetsContinue:
    Set appExcel = Nothing
    Set wkb = Nothing
    Set wks = Nothing
    Set msg = Nothing
    Set nms = Nothing
    Set fld = Nothing
    Set itm = Nothing
    Exit Sub
ErrHandler:
    If Err.Number = 1004 Then
        MsgBox strSheet & " doesn't exist", vbOKOnly, "Error"
    Else
        MsgBox "Error Number: " & Err.Number & vbNewLine & _
               "Error Description: " & Err.Description, vbOKOnly, "Error"
    End If
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:29:02.203

假设您的代码看起来像您粘贴的内容，那么您收到错误的原因是这一行：

```
'Copy field items in mail folder. For Each itm In fld.Items 
```

请注意循环的 for 部分是您的评论的一部分？

Siddharth 给了你很多很好的技巧来帮助避免这些问题，但是要让你的代码编译，只需将我展示给你的行替换为：

```
'Copy field items in mail folder. 
For Each itm In fld.Items 
```

您还注释掉了另一行：

```
'Select export folder Set nms = Application.GetNamespace("MAPI") 
```

应该：

```
'Select export folder 
Set nms = Application.GetNamespace("MAPI") 
```

# git - Git or no Git - 大型二进制文件版本控制，但不需要合并

> ID：12707471
> 
> 赞同：4
> 
> 时间：2012-10-03T11:23:40.010
> 
> 标签：git, version-control, binary

StackOverflow 上有很多关于代码库中二进制文件的版本控制和 SCM 的先前对话。但我还没有找到关于我正在研究的这个特定项目和用例的任何信息：

我有一个单独的父二进制文件 - 在多个演出中非常大。从那个文件中，我有数百个大小相同的“孩子”，但与父母相比，每个孩子都略有不同，差异很小。

我永远不需要将孩子合并到父母中 - 所以我需要一些认真的建议和洞察力来了解如何仅保存 1 个父母和 n 个孩子之间的差异：

1.  只保存每个孩子的二进制差异。
2.  当需要该子项时（用于下载、实现等），使用父文件+差异重新编译它。
3.  不需要合并 - 我只是对保存差异以减少每个孩子的文件大小感兴趣。

我在 GIT 上工作了很多，我在 StackOverflow 上看到了一些关于 Git 处理二进制文件以进行版本控制的惊人能力的好消息，就像这里的[这个](https://stackoverflow.com/questions/4697216/is-git-good-with-binary)。

但我的需求更简单——我想要一个很棒的 C 或 C++ 主干来保存二进制文件差异，并使用这些差异加上父文件重新编译原始文件。就是这样。有没有像 GIT 这样的快速解决方案，但没有额外的功能？

非常感谢 - 我试图避免在这里重新发明轮子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T00:18:08.793

听起来您想要重复数据删除而不是版本控制。如果是这种情况，请尝试[ddar](http://www.synctus.com/ddar)。您可以使用它来存储相关的二进制文件，它会负责保持存储效率。

# wpf - new WinForms.PrintDialog() 在 Windows 7 x64 上什么都不做

> ID：12707473
> 
> 赞同：0
> 
> 时间：2012-10-03T11:23:41.610
> 
> 标签：wpf, printing

可在 Win7 x86、Windows XP 上打印。在 Windows 7 x64 上，此代码不执行任何操作。它也不会抛出任何异常。我没有想法，谷歌搜索没有帮助。也许有人有这个问题的经验？谢谢。

```
System.Drawing.Font printFont = new System.Drawing.Font("Courier New", 10);
                DataTablePrintDocument printDoc = new DataTablePrintDocument(this, printFont);

                WinForms.PrintDialog dlg = new WinForms.PrintDialog();

                WinForms.DialogResult result = dlg.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:25:10.623

尝试将您的系统字体恢复为原始字体，这在不久前为我解决了这个问题。;)

由于它适用于 x86 和 xp，因此没有编码错误。

# c++ - 为什么不能共享成员变量？

> ID：12707478
> 
> 赞同：6
> 
> 时间：2012-10-03T11:23:53.503
> 
> 标签：c++, cuda

我想在 CUDA 代码中实例化一个类，它与同一块中的其他线程共享它的一些成员。

但是，在尝试编译以下代码时，我收到错误消息：»attribute "shared" does not apply here«（nvcc 版本 4.2）。

```
class SharedSomething {

public:
    __shared__ int i; // this is not allowed
};

__global__ void run() {

    SharedSomething something;
} 
```

这背后的理由是什么？是否有解决方法来实现所需的行为（跨一个块的类的共享成员）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T11:41:15.477

标记为的对象`__shared__`驻留在每个线程块专用的共享内存中。它的大小有限，并且与线程块具有相同的生命周期。

所以这就是你不能将类成员声明为共享的原因——它们的生命周期不是由类实例管理，而是由线程块管理。可能`static`班级成员可以共享，但没有检查。

有关详细信息，请参阅[CUDA 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)，第 B.2.3 节。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T11:54:30.063

Rost 解释了限制背后的基本原理。要回答问题的第二部分，一个简单的解决方法是让内核声明共享内存，并初始化类所拥有的指向它的指针，例如在类构造函数中。例子。

```
class Foo 
{
public:
  __device__
  Foo(int *sPtr) : sharedPointer(sPtr, gPtr) {
    sharedPointer[threadIdx.x] = gPtr[blockIdx.x * blockDim.x + threadIdx.x];
    __syncthreads();
  }

  __device__
  void useSharedData() { printf("my data: %f\n", sharedPointer[threadIdx.x]); }

private:
  int *sharedPointer;
};

__global__ void example(int *gData) 
{
  __shared__ int sData[BLOCKDIM];

  Foo f(sData, gData);

  f.useSharedData();
} 
```

警告：在浏览器中编写的代码，未经验证，未经测试（这是一个微不足道的例子，但这个概念扩展到实际代码——我自己也使用过这种技术）。

# android - 从xml文件中解析并根据标签的内容进行分组

> ID：12707481
> 
> 赞同：0
> 
> 时间：2012-10-03T11:24:01.027
> 
> 标签：android, xml-parsing

这是我的 xml 文件 [http://www.yupptv.com/mobile/androidxml.aspx](http://www.yupptv.com/mobile/androidxml.aspx) 我想根据类型显示名称、id、图像、类型和链接的频道，即如果类型是“新闻频道”，我必须显示该类型下的所有频道。我怎样才能做到这一点？这是我的 listactivity 代码

```
 ArrayList<HashMap<String, String>> channelist = new ArrayList<HashMap<String, String>>();
    XMLParser parser = new XMLParser();

    String xml = parser.getXmlFromUrl(url);// getting XML

    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(CHANNEL);

    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) 
    {

        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => valuez
        map.put(NAME, parser.getValue(e,NAME ));
        Log.i("name"+ NAME, "created");
        map.put(ID, parser.getValue(e,ID));
        map.put(TYPE,parser.getValue(e,TYPE ));
        map.put(LANGUAGE,parser.getValue(e,LANGUAGE ));
        map.put(IMAGE,parser.getValue(e,IMAGE));
        map.put(LINK,parser.getValue(e,LINK ));
        map.put(BANDWIDTH,parser.getValue(e,BANDWIDTH));
        map.put(CELLNAPID, parser.getValue(e,CELLNAPID ));

              if(map.containsKey(TYPE)&&TYPE=="News Channel")
     {
         channelist.add(map);     
     }        
    }

        ListAdapter adapter = new SimpleAdapter(this, channelist,
        R.layout.list_item,
        new String[] { NAME, ID,TYPE,LANGUAGE,IMAGE,LINK,BANDWIDTH,CELLNAPID}, new int[] {
                R.id.name, R.id.id,R.id.type,R.id.language,R.id.image,R.id.link,R.id.bandwidth,R.id.cellnapid });

setListAdapter(adapter); 
```

`

xml解析器.java

```
public String getXmlFromUrl(String url) {
    String xml =null ;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    }
    catch (UnsupportedEncodingException e)
    {
        e.printStackTrace();
    } 
    catch (ClientProtocolException e)
    {
        e.printStackTrace();
    } catch (IOException e) 
    {
        e.printStackTrace();
       // e.printStackTrace(err);
    }
    // return XML

    return xml;

}

public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

            doc = db.parse("http://www.yupptv.com/mobile/androidxml.aspx");

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } 
    catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

            // return DOM
        return doc;

}
public String getValue(Element item, String str) 
{
    NodeList n = item.getElementsByTagName(str);

    return this.getElementValue(n.item(0));

}

public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";

} 
```

请帮忙

提前致谢

# image-processing - 从图像元数据中提取特征

> ID：12707483
> 
> 赞同：2
> 
> 时间：2012-10-03T11:24:07.017
> 
> 标签：image-processing, machine-learning, metadata, feature-extraction

我正在解决一个安全问题，我正在尝试识别恶意图像。我必须从图像中挖掘属性（很可能来自元数据），这些属性可以输入到 Weka 以运行各种机器学习算法，以检测恶意图像。

由于图像元数据可能以各种不同的方式被破坏，我发现很难识别要在图像元数据中查看的特征，我可以为学习算法量化这些特征。

我之前曾使用 ImageJ 等工具使用像素信息等信息来帮助我对图像进行分类，但是我正在寻找一种更好的方法（关于安全性）来识别和量化图像/图像元数据中的特征。

对工具和功能有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:56:51.567

如前所述，**这不是一个学习问题**。

问题是**一个漏洞利用与另一个漏洞利用*不**相似***。他们利用各个不同（！）库中的各个单独错误，例如缺少边界检查。它与其说是文件的属性，不如说是使用它的库。10 个图书馆中有 9 个不在乎。一个人会因为编程错误而行为不端。

*检测*此类文件的最佳方法是编写您能想到的最*迂腐*、同时也是最*强大*的格式验证器，并拒绝任何不 1000% 符合规范的图像。假设库在处理实际有效的图像时没有错误。

**我强烈建议您从调查这些漏洞的实际工作方式开始。**了解您正在尝试“学习”的内容可能会引导您以某种方式检测它们（或理解为什么无法进行一般检测......）。

下面是一个简单的例子，说明*其中一个或两个*漏洞如何起作用：

假设我们有一个非常简单的文件格式，比如 BMP。对于压缩，它支持简单的运行长度编码，因此可以将相同的像素有效地存储为 ( `count x color`pair)。不适用于照片，但对于线条艺术来说非常紧凑。考虑以下图像数据：

```
Width: 4
Height: 4
Colors: 1 = red, 2 = blue, 3 = green, 4 = black
Pixel data: 2x1 (red), 4x2 (blue), 2x3, 5x1, 1x0, 4x1 
```

您发现文件中有多少错误？它们可能会导致一些信任库代码失败，但是任何现代库（在了解这种攻击并且知道文件可能由于传输和硬盘错误而损坏的情况下编写）都应该跳过它，甚至可能产生部分图片。看，也许这*不是*攻击，而只是生成图像的程序中的编程错误......

哎呀，即使不是每次越界使用都必须是攻击。想想CD。有时，每个人都使用“过度刻录”来在 CD 上放入比规范所指的更多的数据。是的，*某些*驱动器可能会因为您过度刻录 CD 而崩溃。但我不会认为所有超过 650 MB 的 CD 都是攻击，因为它们违反了黄皮书关于 CD 的规范。

# android - 安卓mp3解析

> ID：12707489
> 
> 赞同：3
> 
> 时间：2012-10-03T11:24:43.220
> 
> 标签：android, fft, business-process-management

我正在为 android 制作一个音乐播放器，我想在播放之前获得歌曲的平均 BPM（可能还有频率或音调），所以我可以向用户展示一些关于这首歌的信息，我知道我可能必须打开一个流并对其进行一些数学运算以获取我需要的数据，但我不知道该怎么做，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:50:22.813

我终于找到了解决方案！我正在使用 Minim java 音频库，它可以对音频缓冲区执行离线分析:) [http://code.compartmental.net/tools/minim/manual-minim/](http://code.compartmental.net/tools/minim/manual-minim/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:13:35.607

您可以使用 FFT

[android SDK中的FFT库](https://stackoverflow.com/questions/9272232/fft-library-in-android-sdk)

这个例子可能会有所帮助：

[Android音频FFT使用audiorecord检索特定频率幅度](https://stackoverflow.com/questions/5774104/android-audio-fft-to-retrieve-specific-frequency-magnitude-using-audiorecord)

另一个：

[使用 Android FFT 获取声音频率](https://stackoverflow.com/questions/9325123/i-want-get-frequency-using-android-fft)

# emacs - 将自定义标记添加到 emacs org-mode

> ID：12707492
> 
> 赞同：14
> 
> 时间：2012-10-03T11:24:54.460
> 
> 标签：emacs, org-mode

我将 emacs org-mode 用于各种目的。最常见的功能是用特殊标签`TODO`&标记我的任务`DONE`。有没有办法添加自定义标签（例如`IN_PROGRESS`）并用单独的颜色突出显示它？

另外，如果这个标签在同一个缓冲区中滚动，`TODO`那么`DONE`我可以使用相同的热键在它们之间切换。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T06:12:04.153

我在我的 init.el 中使用了以下内容，它为所有 org 文件设置了额外的任务状态及其样式：

```
(setq org-todo-keyword-faces
      '(
        ("NOT-TODO" . (:foreground "blue" :weight bold))
        ("IF-TIME" . (:foreground "yellow" :weight bold))
        ("NOT-REPRO" . (:foreground "purple" :weight bold))
        ))

(setq org-todo-keywords
      '((sequence "TODO" "NOT-TODO" "NOT-REPRO" "IF-TIME" "DONE"))) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-03T11:33:31.167

您可以在文件的开头这样做：

```
#+TODO: TODO IN-PROGRESS WAITING DONE 
```

在该行上按 Cc Cc 以刷新设置（后续加载文件不需要），一切都应该是愉快的。

正如[这里](http://orgmode.org/worg/org-tutorials/org4beginners.html)所解释的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-06T09:15:28.410

我使用以下内容生成看起来有点像按钮的 TODO 关键字，以使它们在我的大纲和议程中更加清晰。如果我没记错的话，这个样式来自邮件列表。

```
 (setq org-todo-keywords
  '((sequence "TODO"
      "MAYBE"
      "NEXT"
      "STARTED"
      "WAITING"
      "DELEGATED"
      "|"
      "DONE"
      "DEFERRED"
      "CANCELLED")))

  (setq org-todo-keyword-faces
    '(("PROJ" :background "blue" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("TODO" :background "red1" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("NEXT" :background "red1" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("STARTED" :background "orange" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("WAITING" :background "yellow" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("DEFERRED" :background "gold" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("DELEGATED" :background "gold" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("MAYBE" :background "gray" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("APPT" :background "red1" :foreground "black" :weight bold :box (:line-width 2 :style released-button))
      ("DONE" :background "forest green" :weight bold :box (:line-width 2 :style released-button))
      ("CANCELLED" :background "lime green" :foreground "black" :weight bold :box (:line-width 2 :style released-button)))) 
```

这使我的议程如下所示： ![在此处输入图像描述](../Images/a4c2c7835efa0fd538530189cccc4c0a.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-03T15:54:04.753

要在不修改特定组织文件的情况下添加关键字，您可以修改`org-todo-keywords`.

有关更多信息，请参阅[组织手册](http://www.gnu.org/software/emacs/manual/html_node/org/TODO-types.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-18T02:09:56.573

作为细粒度的替代品

```
(setq org-todo-keyword-faces
      '(...
       ) 
```

它允许您对每个状态进行调整，您可以考虑采用二分法方法，例如，该方法本质上为管道`TODO`两侧的两组中的每一个制作一个面`|`

```
(set-face-attribute 'org-todo nil
                    :foreground "#AFD8AF"
                    )
(set-face-attribute 'org-done nil
                    :foreground "#CC9393"
                    ) 
```

（这个颜色选择是我当前的`zenburn`主题切换。）也就是说，这些分别适用于

```
TODO1 TODO2 ... TODOk | DONE1 DONE2 ... DONEn 
```

例如，![在此处输入图像描述](../Images/87cab1297da1cc20ebeddd28334aaa41.png)

* * *

预计到达时间：

从那以后，我不得不与各种 org-mode 标题级别具有各种颜色的事实作斗争，并且尝试找到与所有标题级别形成鲜明对比的颜色对（for`org-todo`和）太不方便了。`org-done`此外，将不得不处理不断变化的 Emacs 颜色主题，因为随着季节的变化，低对比度的 zenburn 可能不太合适。

简单地反转默认颜色要容易得多。生成的矩形边缘有点尴尬，所以边框有助于使它看起来更自然一些。然后，我得出了一个很像 Stuart Hickinbottom 的计划。

所以我现在有

```
(set-face-attribute 'org-todo nil
                    :box '(:line-width 2 
                           :color "grey75" 
                           :style released-button)
                    :inverse-video t
                    )
(set-face-attribute 'org-done nil
                    :box '(:line-width 2 
                           :color "grey75" 
                           :style released-button)
                    :inverse-video t
                    )
(set-face-attribute 'org-priority nil
                    :inherit font-lock-keyword-face 
                    :inverse-video t 
                    :box '(:line-width 2 
                           :color "grey75" 
                           :style released-button)
                    ) 
```

这会产生，带有初始化文件颜色选择`(load-theme 'deeper-blue t)`，

![在此处输入图像描述](../Images/9bfe7df6ce46b6aa82e1265f8a748514.png)

（红色表示停止！这样做！绿色表示你可以自由去玩。）

# android - Android：未从 url 下载完整文件

> ID：12707495
> 
> 赞同：0
> 
> 时间：2012-10-03T11:25:11.323
> 
> 标签：android, android-asynctask

在我的应用程序中，我需要从 url 下载 mp3 文件。我正在使用异步任务下载文件。出于测试目的，我将文件保存在 Dropbox 中。问题是，它没有下载完整的文件。实际文件大小为 5 MB。但是，它只下载了 29 KB 的数据。当我检查内容的长度时，它显示为-1。我不知道问题出在哪里。下面，我发布我的代码。

```
@Override
    protected Void doInBackground(String... sUrl) 
    {
        InputStream input = null;
        OutputStream output = null;
        try 
        {
            URL link = new URL(sUrl[0]);
            HttpURLConnection urlConnection = (HttpURLConnection)link.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.connect();
            int fileLength = urlConnection.getContentLength();
            Log.v("Download file length", ""+fileLength);
            input = urlConnection.getInputStream();
            int downloadedSize = 0;
            output = new FileOutputStream(Environment.getExternalStorageDirectory()
                    .getAbsolutePath()+"/audiofolder/1.mp3.mp3");

            byte[] data = new byte[1024];
            int bufferLength = 0;

            while (((bufferLength = input.read(data)) > 0)) 
            {
                output.write(data, 0, bufferLength);
                downloadedSize += bufferLength;
                publishProgress((int)((downloadedSize/fileLength) * 100));
            }//while
            output.flush();
            output.close();
            input.close();
        }//try 
        catch (MalformedURLException e) 
        {
            e.printStackTrace();
        }//catch
        catch (IOException e) 
        {
            e.printStackTrace();
        }//catch
        return null;
    }//diInBackground 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T05:39:45.737

检查您的链接。当您看到内容长度 = -1 时，表示链接标题中没有内容长度。它不会在您的下载进度下强制执行。你只下载 29KB 因为它下载网站，.html 不是文件 mp3。您可以将链接复制并粘贴到浏览器上进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:40:08.250

在我的应用程序中，以下代码完美运行。你可以试试这个。

```
 @Override
    protected Void doInBackground(String... aurl) {

        try {

            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            File file = new File("mnt/sdcard/");
            file.mkdirs();
            File outputfile = new File(file, title + ".mp3");
            FileOutputStream fileOutput = new FileOutputStream(outputfile);
            InputStream inputStream = conexion.getInputStream();
            int totalSize = conexion.getContentLength();
            int downloadedSize = 0;
            byte[] buffer = new byte[1024];
            int bufferLength = 0;  
            while ((bufferLength = inputStream.read(buffer)) != -1) {
                downloadedSize += bufferLength;
                onProgressUpdate((int) ((downloadedSize * 100) / totalSize));
                fileOutput.write(buffer, 0, bufferLength);
            }
            fileOutput.close();
        } catch (Exception e) {
            download = true;
            e.printStackTrace();

        }
        return null;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T16:56:10.127

来自 Android 文档：

[https://developer.android.com/reference/java/net/URLConnection.html#getContentLength()](https://developer.android.com/reference/java/net/URLConnection.html#getContentLength())

getContentLength 返回：

此连接的 URL 引用的资源的内容长度，如果内容长度未知，或者内容长度大于 Integer.MAX_VALUE，则为 -1。

# android - Android如何正确实现接近传感器

> ID：12707498
> 
> 赞同：0
> 
> 时间：2012-10-03T11:25:14.347
> 
> 标签：android, location, proximity

我的应用程序找到用户的位置。我正在尝试设置接近警报。该应用程序使用 ZXing 扫描仪扫描二维码。qrcode 具有我读入应用程序的 lon/lat 值。我想将用户的当前位置与存储在 qrcode 上的值进行比较，并确定用户是否在给定的容差（半径）内。

ProximityIntentReceiver 中的 onReceive 方法永远不会被调用。任何想法为什么？谢谢。

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.location.LocationManager;
import android.util.Log;

    public class ProximityIntentReceiver extends BroadcastReceiver {

        private static final String TAG = ProximityIntentReceiver.class.getSimpleName(); 
        private static final int NOTIFICATION_ID = 1000;

        @Override
        public void onReceive(Context context, Intent intent) {
             Log.e(TAG, "inside prox onreceive");
            String key = LocationManager.KEY_PROXIMITY_ENTERING;

            Boolean entering = intent.getBooleanExtra(key, false);

            if (entering) {
                Log.d(getClass().getSimpleName(), "entering");
            }
            else {
                Log.d(getClass().getSimpleName(), "exiting");
            }

            NotificationManager notificationManager =
                (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0);       

            Notification notification = createNotification();
            notification.setLatestEventInfo(context,
                "Proximity Alert!", "You are near your point of interest.", pendingIntent);

            notificationManager.notify(NOTIFICATION_ID, notification);

        }

        private Notification createNotification() {
            Notification notification = new Notification();

            notification.icon = R.drawable.ic_launcher;
            notification.when = System.currentTimeMillis();

            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notification.flags |= Notification.FLAG_SHOW_LIGHTS;

            notification.defaults |= Notification.DEFAULT_VIBRATE;
            notification.defaults |= Notification.DEFAULT_LIGHTS;

            notification.ledARGB = Color.WHITE;
            notification.ledOnMS = 1500;
            notification.ledOffMS = 1500;

            return notification;
        }

    } 
```

.

```
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.support.v4.content.LocalBroadcastManager;
import android.util.Log;

public class LocationService extends Service {

    private static final String TAG = LocationService.class.getSimpleName();
    LocationManager             mlocManager;
    LocationListener            mlocListener;
    NfcScannerApplication       nfcscannerapplication;
    private static final String PROX_ALERT_INTENT = "com.carefreegroup.ProximityAlert";
    Intent intent;
    PendingIntent proximityIntent;
    ProximityIntentReceiver pir;

    @Override
    public void onCreate() {

        nfcscannerapplication = (NfcScannerApplication) getApplication();
        mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        mlocListener = new MyLocationListener();
        pir = new ProximityIntentReceiver();
        intent = new Intent(PROX_ALERT_INTENT);
        proximityIntent = PendingIntent.getBroadcast(this, 0, intent, 0);

        Log.e(TAG, "Service created and location manager and listener created");
        super.onCreate();
    }

    @Override
    public void onDestroy() {
        mlocManager.removeUpdates(mlocListener);
        unregisterReceiver(pir);
        Log.e(TAG, "Service destroyed");
        super.onDestroy();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocListener);

        Log.e(TAG, "requesting location updates");
        super.onStart(intent, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    private class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location loc) {

            Log.e(TAG, "about to set geopoints in application object");
            nfcscannerapplication.setLat(loc.getLatitude());
            nfcscannerapplication.setLon(loc.getLongitude());

            fireLocationChangeEvent(loc.getLongitude(), loc.getLatitude());

            mlocManager.addProximityAlert(53.653480529785156, -1.51961088180542, 2, -1, proximityIntent );

            IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT); 
            registerReceiver(pir, filter);

              sendBroadcast(intent);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:49:33.147

请查看此 [Proximity Alert 以了解存储在服务器中的位置坐标](https://stackoverflow.com/questions/12669860/proximity-alert-for-location-coordinates-stored-in-server/12669960#12669960)。

问题略有不同，但您需要使用它的方法。

我认为这要简单得多。

# c++ - 在 unordered_map 中，C2440 'type cast'：无法转换 ... 当 operator== 和 hash_value 被定义时

> ID：12707499
> 
> 赞同：0
> 
> 时间：2012-10-03T11:25:20.307
> 
> 标签：c++, stl, unordered-map

在向 MyClass 添加 unordered_map 类型成员时发生编译错误 C2440

而 operator== 和 hash_value() 已经定义。

```
#include <unordered_map>
namespace MyNameSpace {
    class MyClass {
    public: 
        struct SomeArg { int x; int y; };
        typedef void (MyClass::*FUNC)(MyClass*, MyClass::SomeArg);
        struct SomeTuple { MyClass::FUNC a; int b; int c; };
        void func(MyClass* myc, MyClass::SomeArg);
    private:
        // xfunctional(768): error C2440 'type cast' cannot convert 'SomeTuple' to 'size_t'
        std::unordered_map<SomeTuple, int> someMap; 
    }; // end of MyClass
    bool operator ==(const SomeTuple& a, const SomeTuple& b);
    std::size_t hash_value(const MyClass::SomeTuple& t);
}
namespace std { // already tried moving here
    //bool operator ==(const SomeTuple& a, const SomeTuple& b) { 
    //    return (a.a==b.a && a.b==b.b && a.c==b.c); 
    //}
    //size_t hash_value(const MyNameSpace::MyClass::SomeTuple& t) {
    //    size_t seed=0; boost::hash_combine(seed, t.x); boost::hash_combine(seed, t.y);
    //}
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:34:32.183

不是`boost`。您应该专门`std::hash`针对您的类型，或将谓词赋予`map`.

```
template <class Key,
class T,
class Hash = hash<Key>,
class Pred = std::equal_to<Key>,
class Alloc = std::allocator<std::pair<const Key, T> > >
class unordered_map; 
```

如果你`SomeTuple`不在课堂上`unordered_map`，其中创建了 where `Key`is `SomeTuple`——这很简单，但在其他情况下——在我看来是不可能的。

```
#include <unordered_map>

namespace MyNameSpace {
    struct SomeTuple { int a; int b; int c; };
}

namespace std {
template<>
struct hash<MyNameSpace::SomeTuple>
{
   size_t operator ()();
};
}

namespace MyNameSpace {
    class MyClass {
    public: 
        struct SomeArg { int x; int y; };
        void func(MyClass* myc, MyClass::SomeArg);
    private:
        // xfunctional(768): error C2440 'type cast' cannot convert 'SomeTuple' to 'size_t'
        std::unordered_map<SomeTuple, int> someMap; 
    }; // end of MyClass
    bool operator ==(const SomeTuple& a, const SomeTuple& b);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:30:53.960

我想你的意思是这个 bool MyClass::operator==(const SomeTuple& other) const

# c++ - 提升序列化和 register_type

> ID：12707500
> 
> 赞同：11
> 
> 时间：2012-10-03T11:25:22.540
> 
> 标签：c++, serialization, boost, export

我正在做的应用程序有问题。我需要使用 boost 序列化来序列化一些数据包。根据文档，可以使用`BOOST_CLASS_EXPORT_KEY`和`BOOST_CLASS_EXPORT_IMPLEMENT`分别进入 .hpp 和 .cpp 文件，以便能够使用多态基指针序列化派生类。

所以这就是我所拥有的：

.hpp：包含我的类声明并最终`BOOST_CLASS_EXPORT_KEY(mynamespace::mypacket)`

.cpp：包含我的类定义和`BOOST_CLASS_EXPORT_IMPLEMENT(mynamespace::mypacket)`

到目前为止一切都运行良好，但是当需要序列化时，我得到一个 bad_alloc 错误。

我通过显式调用`register_type<mypacket>()`我需要使用的存档上的方法来解决这个问题。

但这是我的问题：boost 的 EXPORT* 是为了避免调用 register_type 方法还是我做错了什么？我有点想在我的代码中做两次相同的工作，但更重要的是，如果我们之后仍然必须在存档上使用 register_type，我看不到使用导出密钥 + 实现的任何优势！

我在这里和其他地方阅读了其他一些帖子，似乎我不是唯一一个尝试这个问题的人，但我还没有找到任何答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T13:27:51.690

我想出了如何避免在存档上调用 register_type。对于那些可能感兴趣的人，需要进行模板序列化专业化以及导出密钥+实现。

所以这就是你的 .hpp 应该是什么样子：

*   类声明（mynamespace::myclass）
*   类导出：`BOOST_CLASS_EXPORT_KEY(mynamespace::myclass)`

在 cpp 中：

*   类定义
*   类导出：`BOOST_CLASS_EXPORT_IMPLEMENT(mynamespace::myclass)`
*   AND：对于每个类，您需要使用的存档的 serialize() 成员专业化：

`template void mynamespace::mypacket::serialize(boost::archive::text_iarchive& arch, const unsigned int version);`

`template void mynamespace::mypacket::serialize(boost::archive::text_oarchive& arch, const unsigned int version);`

boost::archive::text_(i/o)archive 应该替换为您正在使用的任何类型的 boost 存档。

希望有一天它会对某人有所帮助（这清楚地写在了[boost文档](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/special.html#dlls)中，但我必须一直错过它直到今天......）

# javascript - 提交jquery ajax帖子时加载栏，不显示

> ID：12707502
> 
> 赞同：2
> 
> 时间：2012-10-03T11:25:28.330
> 
> 标签：javascript, jquery, ajax, forms, loading

我正在使用[jQuery UI 对话框模式表单](http://jqueryui.com/demos/dialog/#modal-form)。

一切都很好，但我发送了一个 ajax 帖子，所以我添加了这段代码：

```
$( "#dialog-form" ).dialog({
            autoOpen: false,
            height: 500,
            width: 550,
            modal: true,
            buttons: {
                "Create an account": function() {

                    var bValid = true;
                    allFields.removeClass( "ui-state-error" );
                    // From jquery.validate.js (by joern), contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
                    if ( bValid ) {
                            $.ajax({ url: 'about.php',
                                 data: {name: name.val(), email: email.val()},
                             type: 'post',
                             async: false
                        });
                                    }
                                }
                            }
                        }); 
```

这`$.ajax`部分是我添加的。我想在处理帖子时显示一个加载栏，我添加了以下代码：

```
$('#progress')
    .hide()  // hide it initially
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
    }); 
```

但它不起作用，我的帖子转到一个有 2 秒等待时间的 php 脚本。它只是不显示`#progress div`，所以`.hide`正在工作。

另外，例如，如果我在它不起作用`$( "#dialog-form" ).dialog({ hide: "slide" });`之前添加，它会在所有按钮功能完成后隐藏。`$.ajax`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:59:02.007

如果您`#progress div`仅在此 ajax 调用期间显示，为什么不将`show`/`hide`操作放在按钮操作上？

像这样 ：

```
$( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 500,
        width: 550,
        modal: true,
        buttons: {
            "Create an account": function() {

                var bValid = true;
                allFields.removeClass( "ui-state-error" );

                if ( bValid ) {
                        // show before ajax call
                        $('#progress').show();

                        $.ajax({ url: 'about.php',
                             data: {name: name.val(), email: email.val()},
                             type: 'post',
                             async: true,
                             complete: function() {
                                 //hide on complete
                                 $('#progress').hide();
                             }
                     });
              }
        }
    }
}); 
```

希望这会有所帮助。

# .htaccess - .htaccess 重定向显着增加加载时间

> ID：12707503
> 
> 赞同：0
> 
> 时间：2012-10-03T11:25:31.127
> 
> 标签：.htaccess, mod-rewrite

我通过 .htaccess RewriteRule 设置了一个 SEF 链接，指向我网站上的一篇文章，只是为了看看它是如何工作的，它确实有效，但它大大增加了该特定页面的加载时间。平均而言，文章（包括我正在谈论的文章，​​当不使用重写规则时）加载时间约为 1.3 秒。使用重写规则，加载时间平均为 3.3 秒，直到页面显示，并且 firefox 选项卡中的加载程序会继续旋转 2 秒。我在我的计算机上安装了 WAMP，并且正在通过 no-ip.com 访问该网站。

这是 .htaccess 配置（非常简单，如您所见）：

```
Options +FollowSymLinks

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^o-sw-liji /NewSWL/o-nama.php?body=o-sw-liji 
```

在 httpd.conf 我有这个（在某处我读到这可能会由于某种原因影响加载时间 - 通过所有目录或其他东西搜索文件，我不记得我到底读了什么）：

```
<Directory />
    Options None
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>

DocumentRoot "Z:/Program Files (x86)/wamp/www/"
<Directory "Z:/Program Files (x86)/wamp/www/">
    Options None
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

任何想法为什么 .htaccess 重定向会增加加载时间这么多？

**更新：**所以我在“o-nama.php”脚本中放置了一个基于会话的计数器。显然，当我通过“正常”链接（即“o-nama.php?body=o-sw-liji”）访问网络时，计数器会增加一，因为它应该是一页加载。但是当通过重定向链接访问页面时，即“o-nama/o-sw-liji”，计数器会增加 6-8，这自然会使加载时间更长，因为它加载相同的页面 6- 8次。我不知道为什么会这样。任何帮助表示赞赏。

**更新2：**解决了，答案贴在下面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:49:56.753

好的，我已经解决了。在我的主视图文件中，我没有通过绝对路径加载图像和脚本（我认为它被称为？） - 无论如何：
我的项目是在 localhost/NewSWL/ 中设置的，
我有像这样加载的图像和脚本：

```
img/somerandomgimg.png
javascript/randomjavascript.js 
```

等等

我把它改成这样：

```
/NewSWL/img/somerandomimg.png
/NewSWL/javascript/randomjavascript.js 
```

页面多次停止重新加载，加载时间与我实施重写规则之前一样。希望这可以帮助某人。

# magento - Magento：订单 ID 以 00000 开头

> ID：12707504
> 
> 赞同：0
> 
> 时间：2012-10-03T11:25:41.797
> 
> 标签：magento, magento-1.5

Magento 1.5.1.0：在我安装了Aitoc的预购模块后，我会时不时收到订单号，例如00000002、00000004（订单号通常以4或6开头）。只有一小部分客户获得了这些订单号，但问题是在我们的支付系统中，订单是使用不同的订单号注册的。

我能做些什么来调试发生了什么？订单号在哪里设置？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:46:21.567

在您的模块中查找 Mage/Eav/Model/Entity/Increment/Numeric.php 的覆盖。

问候博蒂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:01:23.143

您可以更新您的 eav_entity_type 表。

```
 update `eav_entity_type` set `increment_pad_length`=4 where `entity_type_code`='order'; 
```

# javascript - 对于不支持 JavaScript 库的浏览器，是否可以将服务器流身份验证用作 Google Drive 上客户端身份验证的后备？

> ID：12707507
> 
> 赞同：1
> 
> 时间：2012-10-03T11:25:55.820
> 
> 标签：javascript, google-drive-api

值得注意的是，用于直接在 JavaScript 中实现 Google Drive 功能[的 Google API JavaScript 库支持的浏览器列表](http://code.google.com/p/google-api-javascript-client/)并未正式支持 IE 7 或 Opera。

如果我想使用 JS 库，并为不受支持的浏览器提供基于服务器的回退，这可能吗？

显而易见的问题是，客户端和服务器流身份验证需要单独的 API 密钥，因此如果范围仅限于 Drive 应用程序打开和创建的文件，那么使用服务器身份验证在 IE 7 中创建的文件是否会在 Chrome 中使用客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T01:09:53.783

使用客户端流和服务器流的“混合”身份验证工作正常。JS 客户端和 CORS 端点还没有全部到位，所以我尽可能使用 JS，但在必要时通过我的 servlet 代理。

我对两者都使用一个客户端 ID。

# java - 尽管有关闭语句，但数据库连接未关闭

> ID：12707510
> 
> 赞同：1
> 
> 时间：2012-10-03T11:26:03.950
> 
> 标签：java, connection, pool

我在关闭数据库连接时遇到问题。我收到以下错误

==================================================== =================================

```
267137 [http-8080-Processor23] FATAL com.abc.r2.dwrclasses.DBUtilities  - Failed to get a connection from DataSource JNDI/TPXSRUDB
org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, pool exhausted
    at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:103)
    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:540)
    at com.abc.r2.dwrclasses.DBUtilities.getNativeConnection(DBUtilities.java:110)
    at com.abc.r2.dwrclasses.ProcedureCaller.callProcedure(ProcedureCaller.java:81)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.directwebremoting.impl.DefaultRemoter$1.doFilter(DefaultRemoter.java:740)
    at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:744)
    at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:593)
    at org.directwebremoting.dwrp.BaseCallHandler.handle(BaseCallHandler.java:90)
    at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:120)
    at org.directwebremoting.servlet.DwrServlet.doPost(DwrServlet.java:141)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)
    at com.oracle.determinations.web.platform.util.CharsetFilter.doFilter(CharsetFilter.java:46)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)
    at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)
    at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
    at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)
    at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)
    at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:705)
    at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.util.NoSuchElementException: Timeout waiting for idle object
    at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:756)
    at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:95)
    ... 42 more 
```

==================================================== ==================================

我编写了一个 DBUtilities.java 文件，它使用 JNDI 获取连接并返回连接对象。然后，此连接对象在其他 java 类中用于查询数据库（调用过程），然后在完成后关闭。但是，在成功连接一定数量之后，它给出了上述错误。在我的课堂上编写的代码如下所示。谁能告诉我代码有什么问题或者数据库有问题。我正在使用oracle 10g。

==================================================== ========================================

```
package com.abc.r2.dwrclasses;

/*
 * Utilites.java
 *
 * Created on 08 July 2004, 11:55
 */

import java.sql.*;

import javax.sql.*;
import javax.naming.*;

import java.util.*;

import org.apache.log4j.Logger;
import org.apache.log4j.NDC;
import org.apache.commons.dbutils.DbUtils;

import com.ibm.ws.rsadapter.jdbc.WSJdbcConnection;
import com.ibm.ws.rsadapter.jdbc.WSJdbcUtil;

/**
 * Abstract class containing useful database methods.
 * @author Rajan Panchal
 */
public abstract class DBUtilities {

    private static final Logger log = Logger.getLogger(DBUtilities.class);

    private static Context initCtx; // Initial context
    private static Context envCtx;  // Environment context
    static ResourceBundle rb;
    static String appServer;
    DataSource ds;
    // Only get the JNDI context once, it's expensive.
    /* Get the JNDI context depending upon the configuration stored in appconfiguration.properties file in configuration folder */
    static {
        try {
                rb = ResourceBundle.getBundle("configuration.queries");
                appServer = rb.getString("APP_SERVER");
                log.debug("Application Server: "+appServer);
            if(appServer.equalsIgnoreCase("TOMCAT")){        
                initCtx = new InitialContext();        
                envCtx  = (Context)initCtx.lookup("java:/comp/env");
            }else if(appServer.equalsIgnoreCase("WEBSPHERE")){
                Hashtable env = new Hashtable();
                env.put("java.naming.factory.initial","com.ibm.websphere.naming.WsnInitialContextFactory");
                System.out.println("INITIAL_CONTEXT_FACTORY: com.ibm.websphere.naming.WsnInitialContextFactory");
                initCtx = new InitialContext(env);
            }
        } catch (javax.naming.NamingException e) {
                log.fatal("Failed to get JNDI context on "+appServer, e);
                throw new RuntimeException(e);
        }
    }

    /**
     *  Get a JDBC connection
     * @param jndiName the JNDI name of the datasource
     * @return a Connection to the datasource
     */
    public static Connection getConnection(String jndiName) {
        int maxtry = 10;
        int DBConnectTry = 0;
        while( DBConnectTry++ < maxtry){
            log.info("trying to connect:"+DBConnectTry);
        try {
            if(appServer.equalsIgnoreCase("TOMCAT")){               
                DataSource ds = (DataSource)envCtx.lookup(jndiName);
                log.debug("Returning connection object for "+appServer);
            return ds.getConnection();
            }else if(appServer.equalsIgnoreCase("WEBSPHERE")){
                DataSource ds = (DataSource)initCtx.lookup(jndiName);
                log.debug("Returning connection object for "+appServer);
                return ds.getConnection();
            }
        } catch (javax.naming.NamingException e) {
            log.fatal("JNDI lookup  failed for DataSource "+jndiName, e);
            throw new RuntimeException(e);
        } catch (SQLException e) {
            log.fatal("Failed to get a connection from DataSource "+jndiName, e);
            log.info("Wait for 1 sec...");
             Long WaitTime = System.currentTimeMillis()+1000L;
             while(System.currentTimeMillis()<WaitTime){

           }
            log.info("Wait Over retrying...");            
        }
        }
        return null;

    }
/* This method returns the native connection for executing the pl/sql  procedure with array descriptors.*/    
    public static Connection getNativeConnection(String jndiName) {
        int maxtry = 10;
        int DBConnectTry = 0;
        Connection conn;
        while( DBConnectTry++ < maxtry){
            log.info("trying to connect:"+DBConnectTry);
        try {
                if(appServer.equalsIgnoreCase("TOMCAT")){
                    DataSource ds = (DataSource)envCtx.lookup(jndiName);
                    conn = ds.getConnection();
                    if (conn instanceof org.apache.commons.dbcp.DelegatingConnection)      { 
                        log.debug("detected apache commons dbcp datasource");          
                        conn = ((org.apache.commons.dbcp.DelegatingConnection) conn).getInnermostDelegate();      
                    }
                    return conn;
                }else if(appServer.equalsIgnoreCase("WEBSPHERE")){
                    DataSource ds = (DataSource)initCtx.lookup(jndiName);
                    conn = (Connection) WSJdbcUtil.getNativeConnection((WSJdbcConnection)ds.getConnection());                   
                    return conn;
                }
        } catch (javax.naming.NamingException e) {
            log.fatal("JNDI lookup  failed for DataSource "+jndiName, e);
            throw new RuntimeException(e);
        } catch (SQLException e) {
            log.fatal("Failed to get a connection from DataSource "+jndiName, e);
            log.info("Wait for 1 sec...");
             Long WaitTime = System.currentTimeMillis()+1000L;
             while(System.currentTimeMillis()<WaitTime){

           }
            log.info("Wait Over retrying...");            
        }
        }
        return null;

    }
    /**
     * Utility method to close a connection, and/or a statement, and/or a resultset
     * @param con Connection, or null
     * @param stmt Statement, or null
     * @param rs ResultSet, or null
     */
    public static void cleanUp(Connection con, Statement stmt, ResultSet rs) {
        try {
            if (rs != null) {
                while (rs.next()) // Drain the resultset.
                    ;
                rs.close();
            }

            if (stmt != null)
                stmt.close();

            if (con != null)
                con.close();
        } catch (SQLException e) {
            log.error("Failed to close connection", e);
        }
    }

    /**
     * Convert a ResultSet to a List of Maps
     * This enables the results to be processed
     * using the JSTL forEach tag.
     * @param rs the ResultSet to convert
     * @throws SQLException may be thrown by ResultSet operations
     * @return the converted ResultSet
     */
    @SuppressWarnings("unchecked")
    public static List convertResultSet(ResultSet rs) throws SQLException {
        try {
            NDC.push("convertResultSet");
            log.debug("start");

            // Get column names
            ResultSetMetaData rsmd = rs.getMetaData();
            int numberOfColumns = rsmd.getColumnCount();
            log.debug("Column Count is "+numberOfColumns);
            String[] names = new String[numberOfColumns];
            int[] types = new int[numberOfColumns];
            for (int i = 0; i < names.length; ++i) {
                names[i] = rsmd.getColumnName(i+1);
                types[i] = rsmd.getColumnType(i+1);
                log.debug("  Name="+names[i]);
            }

            List l = new LinkedList();

            // Loop through the rows
            while (rs.next()) {
                log.debug("Processing row "+l.size());
                Map m = new HashMap();

                // Loop through the columns
                for (int i = 0; i < names.length; ++i) {
                    Object o;
                    switch(types[i]) {
                        case Types.DATE:
                            o = rs.getTimestamp(i+1);
                            break;
                        default:
                            o = rs.getString(i+1);
                    }
                    log.debug("  "+names[i]+"='"+o+"'");
                    /*
                    if (o == null)
                        o = "&nbsp;";
                    */
                    m.put(names[i], o);
                }

                // Add the map to the list
                l.add(m);
                log.debug("done");
            }

            return l;
        } finally {
            NDC.pop();
        }
    }

    @SuppressWarnings("unchecked")
    public static void formatDates(List rows, java.text.SimpleDateFormat fmt) {
        Iterator it1 = rows.iterator();
        while (it1.hasNext()) {
            Map m = (Map)it1.next();
            List names = new LinkedList();
            Iterator it2 = m.entrySet().iterator();
            while (it2.hasNext()) {
                Map.Entry e = (Map.Entry)it2.next();
                if (e.getValue() instanceof Timestamp) {
                    names.add(e.getKey());
                }
            }

            it2 = names.iterator();
            while(it2.hasNext()) {
                String name = (String)it2.next();
                Timestamp t = (Timestamp) m.get(name);
                String s = fmt.format(t);
                m.put(name,s);
            }

        }

    }

    /**
     * Generate dummy results as a List of Maps
     *
     * @param columns A string array containing the required columns names
     * @param rows    The number of rows to generate
     * @return The data as a List of Maps
     */
    @SuppressWarnings("unchecked")
    public static List generateTestData(String[] columns, int rows) {

        try {
            NDC.push("generateTestData");

            List l = new LinkedList();

            for (int row = 1; row <= rows; ++row) {
                Map m = new HashMap();

                // Loop through the columns
                for (int i = 0; i < columns.length; ++i) {
                    String s = columns[i]+" "+row;
                    m.put(columns[i], s);
                }

                // Add the map to the list
                l.add(m);
            }

            return l;
        } finally {
            NDC.pop();
        }
    }

    /**
     * retrieves just the error code from an oracle message
     */
    public static String parseOracleError(String errCode, String errMsg) {

        int start = 0;
        int end = 0;
        start = errMsg.indexOf(errCode);
        end = errMsg.indexOf(":", start);
        return errMsg.substring(start, end);
    }

     /**Close a <code>Connection</code>, <code>Statement</code> and
     * <code>ResultSet</code> cleanly.
     */
    public static void close(Connection conn, Statement stmt, ResultSet rs) {
        try {
            DbUtils.close(rs);
            DbUtils.close(stmt);
            DbUtils.close(conn);
        } catch (SQLException sqlEx) {
            log.error("Failed to close database objects cleanly.", sqlEx);
        }
    }

    /**Close a <code>Connection</code> and <code>Statement</code> cleanly.
     */
    public static void close(Connection conn, Statement stmt) {
        try {
            DbUtils.close(stmt);
            DbUtils.close(conn);
        } catch (SQLException sqlEx) {
            log.error("Failed to close database objects cleanly.", sqlEx);
        }
    }

    /**Close a <code>Connection</code> and <code>Statement</code> quietly.
     */
    public static void closeQuietly(Connection conn, Statement stmt) {
        DbUtils.closeQuietly(stmt);
        DbUtils.closeQuietly(conn);
    }

    /**Close a <code>Connection</code>, <code>Statement</code> and 
     * a <code>ResultSet</code> quietly.
     */
    public static void closeQuietly(Connection conn, Statement stmt, ResultSet rst) {
        DbUtils.closeQuietly(rst);
        DbUtils.closeQuietly(stmt);
        DbUtils.closeQuietly(conn);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:53:44.587

问题可能出在`cleanup`没有**finally**块的代码中。

如果任何`ResultSet`or `Statement`cleanup 抛出异常，`con.close()`则不会发生。

尝试类似（未测试）：

```
public static void cleanUp(Connection con, Statement stmt, ResultSet rs) {
    try {
        if (rs != null) {
            while (rs.next()) // Drain the resultset.
                ;
            rs.close();
        }

        if (stmt != null)
            stmt.close();

    } catch (SQLException e) {
        log.error("Failed to close statement", e);
    }
    finally {
        if (con != null)
           try {
               con.close();
           } catch (SQLException e) {
               log.error("Failed to close connection", e);
           } 
    }
} 
```

类似的问题可能在其他地方发生。

您也可能实际上并不需要这里的一些其他代码。我认为在关闭结果集之前“排空”结果集不会有任何好处，关闭语句也会关闭结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:54:58.173

如果您的 cleanUp 方法尝试预先关闭 ResultSet 和/或 Statement，则它可能无法关闭给定的 SQLConnection。例如，如果关闭 ResultSet 失败并抛出 SQLException，它将直接跳转到 catch 块，甚至不尝试关闭连接。关闭日志中的连接是否有错误？

为了避免这个问题，要么提供只尝试关闭单个事物的专用清理方法，要么包装每次尝试关闭某事。在它自己的 try/catch 块内。相同的建议适用于各种 close 和 closeQuietly 方法。

// 编辑

此代码部分很可能是有害的。在 getNativeConnection(String jndiName) 中：

```
DataSource ds = (DataSource)envCtx.lookup(jndiName);
conn = ds.getConnection();
if (conn instanceof org.apache.commons.dbcp.DelegatingConnection) { 
   log.debug("detected apache commons dbcp datasource");          
   conn = ((org.apache.commons.dbcp.DelegatingConnection)conn).getInnermostDelegate();      
} 
```

DelegatingConnection 似乎是处理连接池的代理。当您打开“本机”连接时，DelegatingConnection-Proxy 在连接关闭时不会收到通知，并且无法将其返回到池中。这样，池中就会充满关闭的连接，直到达到限制。

# apache-flex - Flex RichTextEditor 抛出错误：FTETextField 不支持将类型设置为“输入”

> ID：12707512
> 
> 赞同：0
> 
> 时间：2012-10-03T11:26:17.043
> 
> 标签：apache-flex, rich-text-editor

我目前正在使用 Flex 4.6.0。

我正在尝试将 RichTextEditor 组件添加到我的应用程序，但是当我运行它时，它会冻结并抛出此错误：

> 错误：FTETextField 不支持将类型设置为“输入”。

你知道是什么原因造成的，以及如何摆脱它吗？

谢谢 ！

编辑：代码如下：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           xmlns:comps="comps.*"
                       xmlns:views="views.*"
           width="100%" height="100%">

<fx:Style source="design.css"/>

<s:layout>
<s:VerticalLayout horizontalAlign="center"
                  paddingTop="10" paddingBottom="10" paddingRight="10" paddingLeft="10"/>
</s:layout>

<s:Label text="My app" fontSize="20" fontWeight="bold"/>

<mx:RichTextEditor />

</s:Application> 
```

# mercurial - Mercurial，配置服务器以允许任何人推送到它

> ID：12707513
> 
> 赞同：1
> 
> 时间：2012-10-03T11:26:18.050
> 
> 标签：mercurial

我正在完成以下教程[Mercurial Turotial](http://hginit.com/02.html)并且我坚持以下几点：

> 现在我将使用 hg push 命令，它将我的更改从我的存储库推送到中央存储库：
> 
> C:\Users\joel\recipes> hg push 推送到[http://joel.example.com:8000/](http://joel.example.com:8000/) 搜索更改 ssl 需要哦，太好了。它认为这是行不通的。我忽略了仅仅运行一个随机的 Web 服务器并允许世界上任何人将他们愚蠢的更改推送到其中的安全隐患。忍受我一会儿；我将配置该服务器以允许世界上的任何人做任何他们想做的事情。这可以通过编辑服务器上的文件 .hg\hgrc 来完成：
> 
> .hg\hgrc [web] push_ssl=False allow_push=*
> 
> 不用说，这是相当不安全的，但是如果您工作时在一个受保护的 LAN 上，并且有一个良好的防火墙，并且您信任 LAN 上的每个人，那么这是可以接受的。否则，您将需要阅读有关安全性的高级章节。

他正在访问哪个文件？

[![](../Images/4328fad05ad81da082bc3c7e91c4ff4a.png "由 imgur.com 主办")](https://imgur.com/vUXQn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:14:10.727

Mercurial 不会自动创建配置文件。
如果您需要该文件但它不存在，只需自己创建它并将教程中的设置放入其中。

引用[Mercurial 的配置文件](http://www.selenic.com/mercurial/hgrc.5.html)：

> **文件**
> 
> Mercurial 从多个文件中读取配置数据（如果存在）。这些文件默认不存在，您必须自己创建适当的配置文件

# ruby-on-rails - Rails：新条目未保存

> ID：12707522
> 
> 赞同：0
> 
> 时间：2012-10-03T11:26:40.887
> 
> 标签：ruby-on-rails, ruby, methods, undefined

尝试将新条目保存到我的数据库时遇到问题。提交时，项目应保存到项目表中，该项目中的技术/技术将保存到关系表中。

**更新**代码经过多次更改后已更新

**这是我的新动作：**

```
def new
    @project = Project.new
    @technol = Technol.new(params[:tech])

@all_technols = Technol.all
tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

@project_technol = @project.projecttechnols.build

#@project_technol = Projecttechnol.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end 
```

**创建动作：**

```
 def create
    @all_technols = Technol.all
    @project = Project.new(params[:project])

@technol = Technol.new(params[:tech])

params[:technol].each_value do |tech|

technology = Technol.find_by_tech(tech.strip)

@project_technol = @project.projecttechnols.build(:technol_id => technology.id)

end

    @project.client = params[:new_client] unless params[:new_client].blank?
    @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
    @project.tech = params[:new_tech] unless params[:new_tech].blank?
    @project.role = params[:new_role] unless params[:new_role].blank?
    @project.industry = params[:new_industry] unless params[:new_industry].blank?
    @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

还有我的 3 个模型：

**项目.rb**

```
class Project < ActiveRecord::Base
  attr_accessible  :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech , :technols

validates_presence_of :business_div, :client, :customer_benifits, :end_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

def self.like(text); "%#{text}%"; end

  def self.search(search_client, search_industry, search_role, search_techs_ids, search_business_div, search_project_owner,  search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end
    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end

#_projects = _projects.joins(:technols).
 #             where("technols.id" => search_techs_ids)

#_projects = _projects.joins(:projecttechnols).where("projecttechnols.id" => search_techs_ids)

if search_techs_ids.present?
_projects = _projects.joins(:technols).where("technols.id" => search_techs_ids)
end

    if search_business_div.present?
      _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
    end
    if search_project_owner.present?
      _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
    end

     if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end

todays_date = DateTime.now.to_date

if !search_start_date_A.blank? or !search_start_date_B.blank?
    search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
    search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
    todays_date = nil
    search_start_date_dd = nil

    end

if search_start_date_dd.blank?
    todays_date = nil
end

if search_start_date_A.present? or search_start_date_B.present?

      _projects = _projects.where [' DATE(start_date) BETWEEN ? AND ?', search_start_date_A, search_start_date_B]
    end

                if search_start_date_dd.present?
      _projects = _projects.where ['DATE(start_date) BETWEEN ? AND ?', search_start_date_dd, todays_date]
    end

    if search_keywords.present?
      _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
    end
    # now you have applied only the present scopes. return the result, and watch 
    # the query as it executes.
    _projects
  end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

**技术.rb**

```
class Technol < ActiveRecord::Base
  attr_accessible :tech

has_many :projecttechnols
has_many :projects, :through => :projecttechnols
end 
```

**工程技术.rb**

```
class Projecttechnol < ActiveRecord::Base
  attr_accessible :project_id, :technol_id

belongs_to :technol
belongs_to :project
end 
```

这是新观点的一部分，我认为这是导致问题的原因：

```
<div class="tech">

<% common_techs = [['Mainframe'],['UNIX'],['Windows Servers'],['Networking'],['CISCO'], ['Win7'], ['Telephony'], ['Web services'], ['Website'], ['Cloud'], ['Virtualisation'], ['Data Centre']] %>
 <% db_techs = Technol.all.map {|p| [p.tech]}.uniq %>

<% all_tech = common_techs + db_techs %>

<%= form_for(@technol) do |tech| %>
<div class="field">
    <%= tech.label :tech %><br />
    <%= tech.text_field :tech %>
  </div>
<%end%> 
```

当我单击提交按钮创建一个新项目时，我收到此错误：

```
 RuntimeError in ProjectsController#create

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id

app/controllers/projects_controller.rb:116:in `block in create'
app/controllers/projects_controller.rb:112:in `each_value'
app/controllers/projects_controller.rb:112:in `create' 
```

这些是我的参数：

```
 {"utf8"=>"✓",
 "authenticity_token"=>"sPyJbgBKTxa9iHWF9r0Gg/0R/v0l0/e8KwXpPebzdus=",
 "project"=>{"project_name"=>"",
 "status"=>"Active",
 "client"=>"",
 "business_div"=>"",
 "project_owner"=>"",
 "start_date"=>"01-10-2012",
 "entry_date"=>"2012-10-03",
 "end_date"=>"09-10-2012",
 "role"=>"",
 "industry"=>"",
 "summary"=>"",
 "lessons_learned"=>"",
 "customer_benifits"=>"",
 "financials"=>"",
 "keywords"=>""},
 "new_client"=>"",
 "new_business_div"=>"",
 "new_project_owner"=>"",
 "technol"=>{"tech"=>"TESTER"},
 "new_role"=>"",
 "new_industry"=>"",
 "commit"=>"Save New Project"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:38:31.200

这是因为您正在查找由`params[:technols]`. 但是，当您查看该哈希时`{"tech"=>"Web services"}`，只有一个键是“技术”。因此，当您尝试这样做时，`params[:technol][:id]`您基本上会得到一个 nil 对象。

# php - 将活动类添加到当前子类别

> ID：12707525
> 
> 赞同：0
> 
> 时间：2012-10-03T11:26:54.883
> 
> 标签：php, magento

通过代码打击，我检索了当前的父类别和他的孩子。是否可以为当前孩子添加一个活动课程？

```
<?php
$currentCat = Mage::registry('current_category');
if ( $currentCat->getParentId() == Mage::app()->getStore()->getRootCategoryId() )
    {
    $loadCategory = $currentCat;
    }
    else
    {
    $loadCategory = Mage::getModel('catalog/category')->load($currentCat->getParentId());
    }
    $subCategories = explode(',', $loadCategory->getChildren());
    foreach ( $subCategories as $subCategoryId )
    {
    $cat = Mage::getModel('catalog/category')->load($subCategoryId);
    if($cat->getIsActive())
        {
        echo '<li><a href="'.$cat->getURL().'">'.$cat->getName().'</a></li>';
        }
     }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:13:26.073

您已经拥有当前类别，因此您可以对照循环通过的类别的 ID 检查它的 ID。

你在哪里

```
echo '<li><a href="'.$cat->getURL().'">'.$cat->getName().'</a></li>'; 
```

更改它以检查 ID，然后在找到时添加“活动”类

```
$class = '';
if ($currentCat->getId() == $cat->getId())
{
    $class = ' class="active"';
}
echo '<li'.$class.'><a href="'.$cat->getURL().'">'.$cat->getName().'</a></li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T14:37:14.803

要将类别设置为活动类别，我们必须在目录层中设置当前类别。

```
$_categoryName=YourCategoryName;

$_category = Mage::getModel('catalog/category')->loadByAttribute('name', $_categoryName);
Mage::getSingleton('catalog/layer')->setCurrentCategory($_category); 
```

这看起来比改变 phtml 过滤器的丑陋黑客要好。

# algorithm - 您如何 RESTfully 获得复杂的记录子集？

> ID：12707526
> 
> 赞同：1
> 
> 时间：2012-10-03T11:26:57.343
> 
> 标签：algorithm, web-services, rest

我有一个关于从 RESTful 服务获取“随机”可用内容块的问题，而不复制客户端已经缓存的内容。如何以 RESTful 方式执行此操作？

我提供了大量的项目（带有文本和网址的小文章）。让我们假设它是：/api/article/

我的（软件）客户希望获得可用的随机块。太多了，无法将它们全部加载到客户端上。他们没有自然的顺序，所以这不是他们可以要求最新的情况。相反，客户可能会给出大约 6-10 个属性来“提示”他们希望看到的文章类型（例如，流行的、最近的、流行的……）。

随着时间的推移，客户获得的内容越来越多，但在服务器上我不知道他们已经拥有什么，而且因为它们是随机发送的，所以我不能只传递他们拥有的“最新”内容。

可以想象，我可以发送本地存储的 GUIDS。客户端仅在本地存储 50-100 个。这足够小，可以填充到 POST 变量中，但不能填充到 GET 查询字符串中。

设计这个的干净方法是什么？

关键点：

*   数据没有逻辑顺序
*   客户端必须在本地缓存内容
*   每个项目都有一个 GUID
*   想要避免下拉重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:25:36.403

如果数据真正保持随机顺序，您将永远无法令人满意地完成这项工作（请记住[Dilbert RNG 效应](http://search.dilbert.com/comic/Random%20Number%20Generator)）；您需要修复特定客户的订单，以便他们可以正确地翻页。不过这很容易做到；只是使特定的顺序成为资源本身；此时，您已经获得了自然的（如果可能是合成的）排序，并且可以使用正常的分页技术。

需要注意的主要事情是，当您执行初始查询时，您将创建一个资源以响应 GET：您可能应该使用作为查询参数哈希的资源名称（包括客户端的身份，如果很重要），因此如果有人连续两次执行相同的查询，他们将获得相同的资源（因此保持适当的幂等性）。您始终可以在超时后删除资源，而无需手动处置……</p>

# android - Android 图片活动

> ID：12707530
> 
> 赞同：0
> 
> 时间：2012-10-03T11:27:05.867
> 
> 标签：android

我已经使用内置图像捕获活动创建了拍照活动，但仍然无法将图片存储在 sdcard 中并查看捕获的图像。Intent 已启动，我可以拍照但当我单击确定（保存）时，什么也没有发生。以下是我的活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.picturelayout);
    imageForUpload = (ImageView) findViewById(R.id.trackMePicture);
    btnBack = (Button) findViewById(R.id.btnBack);
    intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri(this));
    startActivityForResult(intent, TAKE_PHOTO_CODE);
}

/**
 * @return
 */
private Uri getImageUri(Context context) {
    // TODO Auto-generated method stub

    File file =newFile(Environment.getExternalStorageDirectory(),context.getPackageName());
    if(!file.exists())
        file.mkdir();
    File newFile=new File(file,new Date().toString()+".jpg");
    Uri imagePath=Uri.fromFile(newFile);
    return imagePath;

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(requestCode==TAKE_PHOTO_CODE ){
        if(resultCode==-1){

            Toast.makeText(getApplicationContext(), "Result code : "+resultCode, Toast.LENGTH_LONG).show();
            //Uri imagePath=getImageUri();
            Bitmap b;
            try {
                b = Media.getBitmap(getContentResolver(), getImageUri(this));
                imageForUpload.setImageBitmap(b);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }else{
            Toast.makeText(getApplicationContext(), "Result code : "+resultCode, Toast.LENGTH_LONG).show();
        }
    }
    else{
        Toast.makeText(getApplicationContext(), "Request  code : "+requestCode, Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:37:21.697

您的代码中没有`onActivityResult()`将位图存储`b`在文件中的代码。您可以查看我的 Zwitscher 应用程序中的[PicHelper.storeBitmap()](https://github.com/pilhuhn/ZwitscherA/blob/master/src/de/bsd/zwitscher/helper/PicHelper.java#L180)方法，了解如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:01:40.570

这是我的做法（用于拍照或浏览媒体目录），希望对您有所帮助：

```
static int SELECT_IMAGE = 2000;
static int CAMERA_REQUEST = 2001; 

public void ProfilePictureDialog()
{
    builder = new AlertDialog.Builder(this);
    builder.setCancelable(false);
    builder.setMessage("").setPositiveButton("Browse images", new DialogInterface.OnClickListener()
    {  
        @Override  
        public void onClick(DialogInterface dialog, int which)
        {  
            Intent gallery = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);       
            startActivityForResult(gallery, SELECT_IMAGE); 

        }}).setNegativeButton("Cancel", new DialogInterface.OnClickListener()
        {  
        @Override  
        public void onClick(DialogInterface dialog, int which)
        {  

        }}).setNeutralButton("Take picture with camera", new DialogInterface.OnClickListener(){  
        @Override  
        public void onClick(DialogInterface dialog, int which)
        {  
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST); 
        }});
    builder.show();   
}

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if(resultCode == RESULT_OK)
    {
        if (requestCode == CAMERA_REQUEST)
        {  
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            ImageView profilePicture = (ImageView) findViewById(R.id.profilepic);

            photo = Bitmap.createScaledBitmap(photo, profilePicture.getWidth(), profilePicture.getHeight(), true);
            profilePicture.setImageBitmap(photo);
        }
        else if(requestCode == SELECT_IMAGE)
        {
            Uri selectedImagePath = data.getData();

            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(selectedImagePath, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            Bitmap photo = BitmapFactory.decodeFile(filePath);

            ImageView profilePicture = (ImageView) findViewById(R.id.profilepic);

            photo = Bitmap.createScaledBitmap(photo, profilePicture.getWidth(), profilePicture.getHeight(), true);
            profilePicture.setImageBitmap(photo);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:40:11.750

尝试这样做：

```
final Bundle extras = data.getExtras(); 
if (extras != null) {
    Bitmap b = extras.getParcelable("data");
    imageForUpload.setImageBitmap(b);

} 
```

# iphone - 如何在导航控制器中创建无限循环，如 iphone 中的 instagram 应用程序？

> ID：12707531
> 
> 赞同：3
> 
> 时间：2012-10-03T11:27:09.733
> 
> 标签：iphone, uinavigationcontroller, instagram

我正在开发一个应用程序，该应用程序将具有许多子视图，例如社交网络应用程序的流程`instagram`和类型，流程是图像->详细图像->任何评论->用户名->关注->用户名->图像用户名->图像->`picyou`详细图片->任何评论->用户名->关注->用户名->图片用户名->该死的，这是无限的，永远不会停止.....

并且永远不会收到内存警告或因内存问题而崩溃...

我正在使用导航控制器，但经过一段时间的导航更改一些视图控制器后，它给了我这样的错误`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Pushing the same view controller instance more than once is not supported (<ViewController: 0x6d97110>)'`

我想在按下后做同样的事情，你也会得到所有的数据。你知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:19:11.317

UINavigationController 自动支持您描述的这种行为。内存高效且可能无限。每次您想从应用程序的一个部分转到下一个应用程序时，您只需使用与此类似的代码。

```
ViewController *vc = [[ViewController alloc] init];
//customize ViewController
[self.navigationController pushViewController:vc animated:YES]; 
```

因此，如果您想从照片转到照片详细视图，只需在按下按钮时按下照片详细视图控制器即可。即使您已经在照片细节视图控制器中，您也可以从该类中推送另一个。只要确保创建一个单独的实例。从你的错误来看，我认为这是你现在的问题。

我还发现最好为这些类型的视图控制器创建一个自定义初始化程序。对于照片详细信息视图，请使用类似的东西。

```
-(id)initWithPhoto:(Photo*)photo; 
```

# zend-framework2 - 如何在 Zend Framework 2 中使用 cookie？

> ID：12707532
> 
> 赞同：1
> 
> 时间：2012-10-03T11:27:15.810
> 
> 标签：zend-framework2, httpcookie

我不明白如何在 ZF2 中使用 cookie？有人可以建议一些带有 set 和 get cookie 的链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:46:43.013

只需使用上的`rememberMe()`方法`SessionManager`设置cookie

请参阅第 260 行的[SessionManager 代码](https://github.com/zendframework/zf2/blob/master/library/Zend/Session/SessionManager.php)

还有`forgetMe()`要删除cookie

此外，您可以像这样为会话管理器配置默认值：

**模块.php**

```
public function onBootstrap(\Zend\EventManager\EventInterface $e)

    $config = $e->getApplication()
        ->getServiceManager();
        ->get('Configuration');

    $sessionConfig = new SessionConfig();
    $sessionConfig->setOptions($config['session']);
    $sessionManager = new SessionManager($sessionConfig, null, null);
    Session::setDefaultManager($sessionManager);
} 
```

**模块.config.php**

```
return array(
    'session' => array(
        'remember_me_seconds' => 2419200,
        'use_cookies' => true,
        'cookie_httponly' => true,
    ),
); 
```

有关配置选项的完整列表，请参见[此类：](https://github.com/zendframework/zf2/blob/master/library/Zend/Session/Config/SessionConfig.php)

# javascript - 在 javascript 函数中调用正则表达式

> ID：12707533
> 
> 赞同：0
> 
> 时间：2012-10-03T11:27:16.737
> 
> 标签：javascript, expression

我花了很多时间试图解决这个问题。我知道这很容易，但它对我不起作用！

我想使用这个表达式`^.*(?=.{6,})(?=.*[a-zA-Z])[a-zA-Z0-9]+$`和 javascript 来验证密码。

我不确定如何构造函数以及如何在代码中调用它。我有一些东西可以验证电子邮件，但我无法使密码表达式起作用。

```
function validateEmail()
{     
   var emailID = document.myForm.email.value;
   atpos = emailID.indexOf("@");
   dotpos = emailID.lastIndexOf(".");
   if (atpos < 1 || ( dotpos - atpos < 2 )) 
   {
       alert("Please enter correct email address")
       document.myForm.email.focus() ;
       return false;
   }
   return( true );
}

function validate()
{
    if( document.myForm.email.value == "" )
       {
         alert( "Please provide your Email!" );
         document.myForm.email.focus() ;
         return false;
       }
    else
       {
         // Put extra check for data format
         var ret = validateEmail();
         if( ret == false )
         {
            return false;
       }
} 
```

我想从 validate 函数中调用 passwordChecker。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:37:41.687

这应该做

```
function validateEmail()
{     
   var emailID = document.myForm.email.value;
   atpos = emailID.indexOf("@");
   dotpos = emailID.lastIndexOf(".");
   if (atpos < 1 || ( dotpos - atpos < 2 )) 
   {
       alert("Please enter correct email address")
       document.myForm.email.focus() ;
       return false;
   }
   return true;
}

function validatePassword()
{     
   var reg = /^.*(?=.{6,})(?=.*[a-zA-Z])[a-zA-Z0-9]+$/;
   return reg.test(document.myForm.password.value);       
}

function validate()
{
    if(document.myForm.email.value == "" || !validateEmail())
    {
         alert( "Please provide a valid Email!" );
         document.myForm.email.focus() ;
         return false;
    }
    else if(!validatePassword())
    {
         alert("Please provide a valid password!");
         document.myForm.password.focus() ;
         return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:44:08.500

我的建议

```
function isEmail(email) {     
   var re = /^.*(?=.{6,})(?=.*[a-zA-Z])[a-zA-Z0-9]+$/; 
   return re.test(email); 
}

function validate() {
    var email = document.myForm.email;
    if (email.value.trim() =="") { // may need IE support
      alert( "Please provide your Email!" );
      email.focus() ;
      return false;
    }
    if (!isEmail(email.value)) {
      alert( "Please provide a valid Email!" );
      email.focus() ;
      return false;
    }
    return true;
} 
```

# ruby-on-rails - 使用前端服务器和不同机器上的音频文件在 LAN 上运行 Ruby on rails 应用程序的流式音频？

> ID：12707535
> 
> 赞同：0
> 
> 时间：2012-10-03T11:27:23.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, centos

我有一个 ruby​​ on rails 应用程序：
1\. 它使用 jplayer 作为音频播放器
2\. 现在音频文件和应用程序服务器在一台机器上。
3\. 我想在不同的机器上分离音频文件和服务器运行的应用程序。这样我就可以从它们在 LAN 上流式传输音频。
4\. 我已经将数据库与运行应用程序的服务器分开
5\. 我在所有 3 台机器中使用 cent 0S 5.8
一台用于运行 ROR 应用程序，第二台用于数据库，第三台用于音频流。谁能给我一个想法
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:03:45.223

现在忽略流式传输，这是一个简单的 rails 应用程序调用另一个 rails 应用程序的示例：

```
require 'net/http'
require 'uri'
url = URI.parse("http://yourother.com/getaudio/#{@audio.id}")
req = Net::HTTP::Get.new(url.path)
resp = Net::HTTP.new(url.host, url.port).start {|http| http.request(req)}
play_your_audio(resp.body) 
```

注意 GET 的使用，所以我们不必担心身份验证。

这是一篇关于流式 IO 和 Rails 的好文章：

[http://www.intridea.com/blog/2012/5/24/building-streaming-rest-apis-with-ruby](http://www.intridea.com/blog/2012/5/24/building-streaming-rest-apis-with-ruby)

# version-control - 如何使用 neo4j 实施修订？

> ID：12707538
> 
> 赞同：11
> 
> 时间：2012-10-03T11:27:38.737
> 
> 标签：version-control, neo4j

我有一个对象，我需要保留对它所做的所有更改的历史记录。我将如何使用[neo4j](http://neo4j.org/)实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T07:01:09.100

与 RDBMS 一样，它取决于您的域和数据查询要求。

您的应用程序是否需要定期访问对象的所有版本，或者通常只访问最新版本，而旧版本可通过当前版本获得？这方面的一个例子可能是维基百科上的页面。例如，假设我们有一个版本为 3 的页面。然后我们可以对其建模如下：

```
(pages)-[:PAGE]->(V3)-[:PREV]->(V2)-[:PREV]->(V1)
   ^               ^
   |               |
category        current
  node      version of page 
```

在这里，只能看到当前版本构成主要结构的一部分，但您可能希望允许所有版本构成该结构的一部分。在这种情况下，您可以使用关系属性来指示版本并从类别节点链接所有页面版本：

```
 (V1)
    ^
    |
[:PAGE(v=1)]
    |
 (pages)-[:PAGE(v=2)]->(V2)
    |
[:PAGE(v=3)]
    |
    v
  (V3) 
```

在这里，您只需指定您感兴趣的版本即可立即遍历到页面的特定版本。

第三种选择可能是您希望所有旧版本与主结构完全分离。为此，您可以使用多个类别节点，一个 for `(current_pages)`，另一个 for `(old_pages)`。由于每个页面都被新版本取代，因此它与前一个类别取消链接，而是链接到后者。这将形成更多的“存档”类型的系统，其中旧版本甚至可以移动到单独的数据库实例中。

所以你有这三个选项，还有更多我没有想到的！Neo4j 为您提供了这种设计的极大灵活性，并且绝对没有“正确”的答案。但是，如果这些都不能激发您的灵感，请发布有关您的域的更多信息，以便可以根据您的需求量身定制答案。

干杯，尼日

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T23:07:49.363

你也可以从另一边接近它：

```
(pages)-[:VERSION]->(V1)-[:VERSION]->(V2)-[:VERSION]->(V3)
   ^                                                   ^
   |                                                   |
category                                            current
  node                                          version of page 
```

优点：创建新版本时，只需将其添加到链的末尾，无需在（页面）和当前版本之间“插入”它。

缺点：你不能只扔掉旧版本，除非你重建链条。但这可能不是一个频繁的操作。

# c++ - getinstance() 在单例中究竟做了什么？

> ID：12707542
> 
> 赞同：3
> 
> 时间：2012-10-03T11:27:52.433
> 
> 标签：c++, design-patterns, singleton

我遇到过*单例模式*。我无法理解两者之间的区别

```
singletonobj.getinstance().dosomething() //1st one 
```

和

```
singletonobj.dosomething() //2nd one 
```

做什么`getinstance()`，在第二种情况下没有做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T11:34:01.760

好吧，从技术上讲，`singletonobj.getinstance()`这是多余的，因为这意味着您已经掌握了该对象。

调用通常看起来像：

```
SingletonClass::getinstance().dosomething(); 
```

或者

```
singletonobj.dosomething() 
```

如果您预取了对象 - 即以前做过

```
SingletonClass& singletonobj = SingletonClass::getinstance(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:39:11.667

首先，`singletonobj`是一个错误/令人困惑的名称。单例是基于类调用的，例如：

```
Log::getInstance().doSomething(); 
```

并不是

```
Log log = new Log;
log.getInstance().doSomething(); 
```

所以这应该回答这个问题，但无论如何我会详细说明:)

```
Log::doSomething(); 
```

将强制`doSomething()`成为静态方法，而

```
Log::getInstance().doSomething(); 
```

有`doSomething()`作为实例方法。

为什么使用`getInstance()`？因为根据其定义，单例应该只有零个或一个实例。通过将单例的构造函数设为私有并发布该`getInstance()`方法，它允许您控制该类的实例数量。私有构造函数只是为了避免其他类实例化此类，这会破坏此类作为单例的目的，因为您将无法控制此类的实例数量。

```
class SingletonExample {

    private:
    static SingletonExample* instance = NULL;

    SingletonExample() { }

    public:

    static SingletonExample getInstance() {

        if (instance == NULL) {
            instance = new SingletonExample;
        }

        return *instance;
    }

    void doSomething() {            
        // Do something :)
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T11:33:48.373

看起来第一个示例调用的是常规方法，而第二个示例调用的是静态方法。

单例设计模式确保在任何给定时间仅实例化给定对象的单个实例。第一个示例返回所述实例，然后使用对象的实例调用方法。

第二个示例似乎使用了不需要对象实例的静态方法，并且实际上使单例设计模式无效......

# java - JAVA 与 Python Socket 默认值

> ID：12707543
> 
> 赞同：3
> 
> 时间：2012-10-03T11:27:53.793
> 
> 标签：java, sockets, python-2.7

我很确定我的根本问题是由我们的网络管理的防病毒应用程序，但是我用 Python 编写的一个基本套接字客户端直到不久前还在工作，现在给我“套接字错误 10013”。我也有 JAVA 中的[SocketTest](http://sockettest.sourceforge.net)应用程序。SocketTest 有效，但我未能成功让 Python 进行连接。WIN 7 PC 有两个网卡，没有桥接。我已经打开和关闭了防火墙。如果我禁用与公司 LAN 的连接，那么 Python 客户端会很高兴。重申一下，这种配置工作了几个月。我找不到区别。这是示例代码：

Python

```
MY_IP = '192.168.100.2'
MY_PORT = 62828
ROBOT_IP = "192.168.100.10"
ROBOT_SOCK = 29999

robotSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
robotSocket.bind((MY_IP, MY_PORT)) # Tried without binding
robotSocket.connect((ROBOT_IP, ROBOT_SOCK)) 
```

结果“套接字错误 10013”

爪哇：

```
socket = new Socket(ROBOT_IP, ROBOT_SOCK);
is = socket.getInputStream();
in = new BufferedInputStream(is);
while (!desonnected)
{
    try
{
    String got = readInputStream(in); // in.readLine(); 
```

这工作正常，但我找不到调整我的 Python 代码的区别。我确定是防毒墙网络版，但是....

**编辑**

我按照建议运行了 WireShark。启用两个网卡后，不会发送 Python 连接请求。禁用公司 LAN 后，我比较了 JAVA 客户端和 Python 客户端之间的连接请求，它们包含相同的数据，当然本地端口除外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:11:39.043

我最近在 Windows 7 上的套接字绑定和多个 NIC 方面遇到了很多困难。

我通常是一个 unix 人，但我不得不为朋友做一些 C#.Net 作为一个忙..

我的问题是我无法将套接字绑定到客户端的特定端口和 ip。解决方案是增加我想要绑定的 NIC 的“绑定优先级”。我对Windows不太了解，所以我无法详细说明。阅读这篇文章以获取一些信息，它对我有帮助：[Windows 7 中的网络适配器卡优先级绑定顺序](http://techrena.net/view-change-network-adapter-card-priority-binding-order-windows-7/)

不确定您是否遇到同样的问题，因为套接字错误 10013 似乎与权限相关。谷歌给了我这个：[处理套接字错误 10013](http://wiki-errors.com/dealing-with-socket-error-10013/)

# cocos2d-iphone - cocos2d 1.1 sprite for retina 4 inch iPhone5

> ID：12707547
> 
> 赞同：0
> 
> 时间：2012-10-03T11:28:10.513
> 
> 标签：cocos2d-iphone, ios6, sprite, iphone-5

I use cocos2d 1.1, xCode 4.5 for my game's progect. I would like to recode my game for support the iPhone 5\. But I faced with problem: cocos2d 1.1 can't detected sprite for retina 4 inch.

Default-568h@2x.png - work fine, but the game's sprites appears as *-hd.png. It seems cocos2d 1.1 can detected just *-hd.png, however I added the sprites *-568h@2x.png.

Sorry for my English.

The solving of this problem is in **CCFileUtils.m** file as written below **sergio**.

I did the little changes in method **+(NSString*) getDoubleResolutionImage:(NSString*)path**

```
+(NSString*) getDoubleResolutionImage:(NSString*)path
{
#if CC_IS_RETINA_DISPLAY_SUPPORTED

    if( CC_CONTENT_SCALE_FACTOR() == 2 )
    {
        NSString *pathWithoutExtension = [path stringByDeletingPathExtension];
        NSString *name = [pathWithoutExtension lastPathComponent];

        NSString *extension = [path pathExtension];

        if( [extension isEqualToString:@"ccz"] || [extension isEqualToString:@"gz"] )
        {
            extension = [NSString stringWithFormat:@"%@.%@", [pathWithoutExtension pathExtension], extension];
            pathWithoutExtension = [pathWithoutExtension stringByDeletingPathExtension];
        }

        CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;

        if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f)
        {
            if( [name rangeOfString:CC_RETINA4_DISPLAY_FILENAME_SUFFIX].location != NSNotFound ) {

                CCLOG(@"cocos2d: WARNING Filename(%@) already has the suffix %@. Using it.", name, CC_RETINA4_DISPLAY_FILENAME_SUFFIX);
                return path;
            }

            NSString *retinaName = [pathWithoutExtension stringByAppendingString:CC_RETINA4_DISPLAY_FILENAME_SUFFIX];
            retinaName = [retinaName stringByAppendingPathExtension:extension];

            if( [__localFileManager fileExistsAtPath:retinaName] )
            {   
                return retinaName;
            }
        }

        if( [name rangeOfString:CC_RETINA_DISPLAY_FILENAME_SUFFIX].location != NSNotFound ) {

            CCLOG(@"cocos2d: WARNING Filename(%@) already has the suffix %@. Using it.", name, CC_RETINA_DISPLAY_FILENAME_SUFFIX);
            return path;
        }

        NSString *retinaName = [pathWithoutExtension stringByAppendingString:CC_RETINA_DISPLAY_FILENAME_SUFFIX];
        retinaName = [retinaName stringByAppendingPathExtension:extension];
        if( [__localFileManager fileExistsAtPath:retinaName] )
        {   
            return retinaName;
        }

        CCLOG(@"cocos2d: CCFileUtils: Warning HD file not found: %@", [retinaName lastPathComponent] );

    }

#endif // CC_IS_RETINA_DISPLAY_SUPPORTED

    return path;
} 
```

and also add in file **ccConfig.h**

```
#ifndef CC_RETINA4_DISPLAY_FILENAME_SUFFIX
#define CC_RETINA4_DISPLAY_FILENAME_SUFFIX @"-568h@2x"
#endif 
```

**If someone have a notice, please write**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:19:53.863

You can change suffix in ccConfig.h file

```
#ifndef CC_RETINA_DISPLAY_FILENAME_SUFFIX
#define CC_RETINA_DISPLAY_FILENAME_SUFFIX @"-hd"
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:51:48.497

As far as I know, there is no general support in Cocos2D 2.x for iPhone 5 -568h@2x images.

The only iPhone 5 specific support that was added to cocos2D 2.1 concerns the addition of a `Default-568h@2x.png` image to the Xcode template. Read the [ChangeLog](https://github.com/cocos2d/cocos2d-iphone/blob/release-2.1-beta2/CHANGELOG) for details.

On the other hand, it is also true that in `UIKit` too there is no support for "-568h@2x images", so I don't think that cocos2D is going to add one.

On a more conceptual level, I understand that the general approach to supporting iPhone 5 resolution is not at the bitmap level (i.e., providing differently scaled images), rather at the layout level (i.e., changing the disposition or sizes of non-image UI elements). (If you think about it, we already have to manage x1 and x2 images, both for iPhone and iPad: this means 4 different versions for each image; adding another dimension to this would be crazy.)

If your app really does need using scaled images, then I guess you are on your own both when using UIKit and when using cocos2D.

On the bright side, if you give a look at `CCFileUtils.h` you can easily change it so that it supports the `-568h@2x`. If you want a discussion of this, have a look at [this blog post](http://labs.freescapes.org/blog/2012/05/cocos2d-and-the-new-retina-ipad-take-2/) which describes an analogous change but for the iPad 3\. It might help you in building your own solution.

# c++ - 循环矢量化 001

> ID：12707549
> 
> 赞同：1
> 
> 时间：2012-10-03T11:28:19.500
> 
> 标签：c++, c, optimization, vectorization, icc

我有一个矢量化优化问题。

我有一个结构 pDst，它有 3 个字段名为：“红色”、“绿色”和“蓝色”。
类型可能是“Char”、“Short”或“Float”。这是给定的，不能更改。
还有另一个数组 pSrc 表示图像 [RGB] - 即一个由 3 个指针组成的数组，每个指针都指向图像的一层。
每一层都是使用面向 IPP 平面的图像构建的（即，每个平面都是独立形成的 - 'ippiMalloc_32f_C1'）： [http](http://software.intel.com/sites/products/documentation/hpc/ipp/ippi/ippi_ch3/functn_Malloc.html) ://software.intel.com/sites/products/documentation/hpc/ipp/ippi/ippi_ch3/functn_Malloc.html .

我们希望按照以下代码中的说明复制它：

```
for(int y = 0; y < imageHeight; ++y)
{
    for(int x = 0; x < imageWidth; ++x)
    {
        pDst[x + y * pDstRowStep].red     = pSrc[0][x + y * pSrcRowStep];
        pDst[x + y * pDstRowStep].green   = pSrc[1][x + y * pSrcRowStep];
        pDst[x + y * pDstRowStep].blue    = pSrc[2][x + y * pSrcRowStep];
    }
} 
```

然而，在这种形式下，编译器不能向量化代码。
起初它说：

> “循环未矢量化：存在矢量依赖性。”。

当我使用#pragma ivdep 来帮助编译器时（因为没有依赖关系），我收到以下错误：

> “循环未矢量化：取消引用太复杂。”。

任何人都知道如何允许矢量化？
我使用英特尔编译器 13.0。
谢谢。

# 更新：

如果我编辑代码如下：

```
Ipp32f *redChannel      = pSrc[0];
Ipp32f *greenChannel  = pSrc[1];
Ipp32f *blueChannel     = pSrc[2];
for(int y = 0; y < imageHeight; ++y)
{
    #pragma ivdep
    for(int x = 0; x < imageWidth; ++x)
    {
        pDst[x + y * pDstRowStep].red     = redChannel[x + y * pSrcRowStep];
        pDst[x + y * pDstRowStep].green   = greenChannel[x + y * pSrcRowStep];
        pDst[x + y * pDstRowStep].blue    = blueChannel[x + y * pSrcRowStep];
    }
} 
```

对于'char'和'short'的输出类型，我得到了vecotization。
然而，对于“浮动”类型，我没有。
相反，我收到以下消息：

> 循环未矢量化：矢量化可能但似乎效率低下。

怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:54:43.627

这些方面的东西应该可以工作（`char`版本，未经测试，还请记住 __m128i 指针应该正确对齐！）

```
void interleave_16px_to_rgb0(__m128i *red, __m128i *green, __m128i *blue, __m128i *dest) {
  __m128i zero = _mm_setzero_si128();
  __m128i rg_0 = _mm_unpackhi_epi8(*red, *green);
  __m128i rg_1 = _mm_unpacklo_epi8(*red, *green);
  __m128i bz_0 = _mm_unpackhi_epi8(*blue, zero);
  __m128i bz_1 = _mm_unpacklo_epi8(*blue, zero);
  dest[0] = _mm_unpackhi_epi16(rg_0, bz_0);
  dest[1] = _mm_unpacklo_epi16(rg_0, bz_0);
  dest[2] = _mm_unpackhi_epi16(rg_1, bz_1);
  dest[3] = _mm_unpacklo_epi16(rg_1, bz_1);
} 
```

这将从每个平面占用 16 个字节：

```
r0 r1 r2 ... r16
g0 g1 g2 ... g16
b0 b1 b2 ... b16 
```

并像这样交错它们，从以下开始写出 16x4 字节`*dest`：

```
r0 g0 b0 0 r1 g1 b1 0 r2 g2 b2 0 ... r16 g16 b16 0 
```

不用说，您也可以使用相同的函数族来交错其他数据类型。

* * *

*更新：*更好的是，由于您已经拥有 IPP，您应该尝试使用所提供的内容，而不是重新发明轮子。通过快速检查，您正在寻找 ippiCopy_8u_P3C3R 或 ippiCopy_8u_P4C4R 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T17:05:55.127

在以下代码中，使用 pragma ivdep 肯定会忽略向量依赖性，但编译器启发式/成本分析得出的结论是向量化循环效率不高：

```
Ipp32f *redChannel      = pSrc[0];
Ipp32f *greenChannel  = pSrc[1];
Ipp32f *blueChannel     = pSrc[2];
for(int y = 0; y < imageHeight; ++y)
{
    #pragma ivdep
    for(int x = 0; x < imageWidth; ++x)
    {
        pDst[x + y * pDstRowStep].red     = redChannel[x + y * pSrcRowStep];
        pDst[x + y * pDstRowStep].green   = greenChannel[x + y * pSrcRowStep];
        pDst[x + y * pDstRowStep].blue    = blueChannel[x + y * pSrcRowStep];
    }
} 
```

矢量化将是低效的，因为该操作涉及将连续的内存块从源复制到目标的非连续内存位置。所以这里发生了分散。如果您仍想强制执行矢量化并查看与非矢量化版本相比是否有任何性能改进，请使用 pragma simd 而不是 pragma ivdep，如下所示：

```
#include<ipp.h>
struct Dest{
float red;
float green;
float blue;
};
void foo(Dest *pDst, Ipp32f **pSrc, int imageHeight, int imageWidth, int pSrcRowStep, int pDstRowStep){
    Ipp32f *redChannel      = pSrc[0];
    Ipp32f *greenChannel  = pSrc[1];
    Ipp32f *blueChannel     = pSrc[2];
    for(int y = 0; y < imageHeight; ++y)
    {
        #pragma simd
        for(int x = 0; x < imageWidth; ++x)
        {
            pDst[x + y * pDstRowStep].red     = redChannel[x + y * pSrcRowStep];
            pDst[x + y * pDstRowStep].green   = greenChannel[x + y * pSrcRowStep];
            pDst[x + y * pDstRowStep].blue    = blueChannel[x + y * pSrcRowStep];
        }
    }
    return;
} 
```

对应的矢量化报告为：

```
$ icpc -c test.cc -vec-report2
test.cc(14): (col. 9) remark: SIMD LOOP WAS VECTORIZED
test.cc(11): (col. 5) remark: loop was not vectorized: not inner loop 
```

有关 pragma simd 的更多文档，请访问[https://software.intel.com/en-us/node/514582](https://software.intel.com/en-us/node/514582)。

# entity-framework-5 - 调用 DBContext 抛出异常（代码优先，创建 DB）

> ID：12707556
> 
> 赞同：1
> 
> 时间：2012-10-03T11:28:42.863
> 
> 标签：entity-framework-5

我想尝试这里描述的 EF5：http: [//msdn.microsoft.com/en-us/data/jj193542](http://msdn.microsoft.com/en-us/data/jj193542)

但只要

使用 (var db = new BloggingContext())

到达 System.InvalidOperationException 时抛出附加详细信息，说明“未映射类型‘ConsoleApplication1.Program+Blog’。使用 Ignore 方法或 NotMappedAttribute 数据注释检查该类型是否已明确排除。验证该类型被定义为一个类，不是原始的、嵌套的或泛型的，也不是从 EntityObject 继承的。”

没有创建数据库。我正在使用 VS 2012 Express for Windows Desktop 和 SQL Server 2012。数据库资源管理器可以毫无问题地连接到本地 SQLExpress 实例。

有任何想法吗？

干杯，mttmjapj

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:24:41.413

好吧，找到了罪魁祸首。不知不觉将Blog 和Post 的源码放到了程序类中。这显然是嵌套的，因此无法工作。

# javafx-2 - JavaFX 2 刷新表格单元格以更改样式

> ID：12707558
> 
> 赞同：2
> 
> 时间：2012-10-03T11:28:47.340
> 
> 标签：javafx-2

我需要更改具有可变列数的 TableView 中任意单元格的样式。下面的代码显示了基本问题。

ExampleRow 类是来自电子表格的真实数据的代理，它的另一个功能是保存突出显示信息。因为我不知道会有多少列，所以我只保留一个应该突出显示的列列表（不支持列重新排列）。ExampleTableCell 类只是设置单元格的文本并在需要时应用突出显示。

如果我在绘制表格之前设置了高亮显示 [cell (2,2)]，那么当应用程序启动时，单元格会正确显示为红色文本。问题是单击按钮将单元格 (1,1) 设置为突出显示，但表格没有更改。如果我将应用程序窗口的大小调整为空，然后再次打开它，则单元格 (1,1) 的突出显示被正确绘制 - 大概是因为此过程强制完全重绘。

我想知道的是如何触发表格以重绘新突出显示的单元格（或所有可见单元格），以便样式正确？

TIA

```
package example;

import java.util.HashSet;
import java.util.Set;
import javafx.application.Application;
import javafx.beans.property.SimpleIntegerProperty;
import javafx.beans.property.SimpleObjectProperty;
import javafx.beans.value.ObservableValue;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.stage.Stage;
import javafx.util.Callback;

public class CellHighlightExample extends Application {

    private final int columnCount = 4;
    private final int rowCount = 5;
    private TableView<ExampleRow> table = new TableView<>();

    @Override
    public void start(Stage stage) {
        BorderPane root = new BorderPane();
        Scene scene = new Scene(root);

        Callback<TableColumn.CellDataFeatures<ExampleRow, String>, ObservableValue<String>> cellValueFactory = new Callback<TableColumn.CellDataFeatures<ExampleRow, String>, ObservableValue<String>>() {
            @Override
            public ObservableValue<String> call(TableColumn.CellDataFeatures<ExampleRow, String> p) {
                int row = p.getValue().getRow();
                int col = p.getTableView().getColumns().indexOf(p.getTableColumn());
                return new SimpleObjectProperty<>("(" + row + ", " + col + ")");
            }
        };

        Callback<TableColumn<ExampleRow, String>, TableCell<ExampleRow, String>> cellFactory = new Callback<TableColumn<ExampleRow, String>, TableCell<ExampleRow, String>>() {
            @Override
            public TableCell<ExampleRow, String> call(TableColumn<ExampleRow, String> p) {
                return new ExampleTableCell<>();
            }
        };

        for (int i = 0, n = columnCount; i < n; i++) {
            TableColumn<ExampleRow, String> column = new TableColumn<>();
            column.setCellValueFactory(cellValueFactory);
            column.setCellFactory(cellFactory);
            table.getColumns().add(column);
        }

        ObservableList<ExampleRow> rows = FXCollections.observableArrayList();
        for (int i = 0, n = rowCount; i < n; i++) {
            ExampleRow row = new ExampleRow(i);
            //Force a cell to be highlighted to show that highlighting works.
            if (i == 2) { row.addHighlightedColumn(2); }
            rows.add(row);
        }
        table.setItems(rows);

        Button b = new Button("Click to Highlight");
        b.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent t) {
                ExampleRow row = table.getItems().get(1);
                row.addHighlightedColumn(1);
                //How to trigger a redraw of the table or cell to reflect the new highlighting?
            }
        });

        root.setTop(b);
        root.setCenter(table);
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

    private class ExampleTableCell<S extends ExampleRow, T extends String> extends TableCell<S, T> {

        @Override
        public void updateItem(T item, boolean empty) {
            super.updateItem(item, empty);

            if (item == null) {
                setText(null);
                setGraphic(null);
            } else {
                setText(item);
                int colIndex = getTableView().getColumns().indexOf(getTableColumn());
                ExampleRow row = getTableView().getItems().get(getIndex());
                if (row.isHighlighted(colIndex)) {
                    setTextFill(Color.RED);
                }
            }
        }
    }

    private class ExampleRow {

        private SimpleIntegerProperty row;
        private Set<Integer> highlightedColumns = new HashSet<>();

        public ExampleRow(int row) {
            this.row = new SimpleIntegerProperty(row);
        }

        public int getRow() { return row.get(); }
        public void setRow(int row) { this.row.set(row); }
        public SimpleIntegerProperty rowProperty() { return row; }

        public boolean isHighlighted(int col) {
            if (highlightedColumns.contains(col)) {
                return true;
            }
            return false;
        }

        public void addHighlightedColumn(int col) {
            highlightedColumns.add(col);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T12:20:14.967

关于这个问题有很多讨论，即在更改项目后刷新表格视图。
请参阅
[JavaFX 2.1 TableView 刷新项目](https://stackoverflow.com/q/11065140/682495)
问题
[http://javafx-jira.kenai.com/browse/RT-21822](http://javafx-jira.kenai.com/browse/RT-21822)
[http://javafx-jira.kenai.com/browse/RT-22463](http://javafx-jira.kenai.com/browse/RT-22463)
[http://javafx-jira.kenai .com/browse/RT-22599](http://javafx-jira.kenai.com/browse/RT-22599)

解决方法是触发内部tableview更新方法。有些人建议删除 tableview 项目并再次添加它们，但最简单的解决方法似乎是：

```
b.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent t) {
        ExampleRow row = table.getItems().get(1);
        row.addHighlightedColumn(1);
        //How to trigger a redraw of the table or cell to reflect the new highlighting?
        // Workaround
        table.getColumns().get(0).setVisible(false);
        table.getColumns().get(0).setVisible(true);
    }
}); 
```

在上面链接的问题评论中找到。这是真正的解决方法还是错觉？你需要自己深入挖掘。

# ruby - Ruby 1.9 中更自然的 Proc 调用方式

> ID：12707559
> 
> 赞同：5
> 
> 时间：2012-10-03T11:28:50.293
> 
> 标签：ruby, lambda, proc

我们知道，在 Ruby 1.9 中有几种 Proc 调用方式

```
 f =->n {[:hello, n]}
 p f[:ruby]       # => [:hello, :ruby]
 p f.call(:ruby)  # => [:hello, :ruby]
 p f.(:ruby)      # => [:hello, :ruby]
 p f === :ruby    # => [:hello, :ruby] 
```

我很好奇，调用 Proc 的更“自然”方式是什么？“自然”可能意味着更多的计算机科学——类似的方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:54:58.180

第二种选择是迄今为止最常用的。

```
p f.call(:ruby)  # => [:hello, :ruby] 
```

它使它更类似于标准方法。此外，一些库在验证参数检查方法的可用性时实际上依赖于鸭子类型`#call`。在这种情况下， using`#call`确保您可以提供一个 lambda 或任何其他响应`#call`.

`Rack`中间件就是这种约定的一个很好的例子。基本中间件可以是 lambda，或者您可以使用类提供更复杂的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:49:01.323

我总是使用选项 3。考虑到能够在没有括号的情况下调用方法的语法歧义，这是最接近实际方法调用语法的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:10:43.273

我看到了**Rack**源代码中使用的第一种方式。让我困惑了很久。它选自**lib/rack/builder.rb**（**版本：1.6.0.alpha**）

```
module Rack
  class Builder
    ...

    def to_app
      app = @map ? generate_map(@run, @map) : @run
      fail "missing run or map statement" unless app

      # This is the first option calling a proc
      # @use is a array of procs (rack middleware)
      @use.reverse.inject(app) { |a,e| e[a] }
    end

    ...
  end
end 
```

# android - 如何在 Android 应用中设置全息黑暗主题？

> ID：12707560
> 
> 赞同：112
> 
> 时间：2012-10-03T11:28:49.483
> 
> 标签：android, android-theme

如何在我的应用程序中设置黑暗全息主题？这时候我得到了这个：

```
<style name="AppTheme" parent="android:Theme.Holo.Light" /> 
```

但是当我将其更改为：

```
<style name="AppTheme" parent="android:Theme.Holo.Dark" /> 
```

我收到一个错误`error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Dark'.`

如何解决问题？

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-10-03T11:37:21.080

更改`parent="android:Theme.Holo.Dark"` 为`parent="android:Theme.Holo"`

Holo 黑暗主题被称为 Holo

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-03T11:41:21.477

默认情况下，android 会将 Holo 设置为 Dark 主题。没有名为 Holo.Dark 的主题，只有 Holo.Light，这就是为什么您收到资源未找到错误的原因。

所以只需将其设置为：

```
<style name="AppTheme" parent="android:Theme.Holo" /> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-24T05:40:33.853

根据android.com，只需要在AndroidManifest.xml文件中设置即可：

[http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme](http://developer.android.com/guide/topics/ui/themes.html#ApplyATheme)

将主题属性添加到您的应用程序元素对我有用：

--AndroidManifest.xml--

...

<申请...

```
 android:theme="@android:style/Theme.Holo"/>
  ... 
```

</应用>

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-01T04:52:59.440

在您的应用程序 android 清单文件中，在 application 标签下，您可以尝试其中的几个主题。

代替

```
<application
    android:theme="@style/AppTheme" > 
```

由android系统定义的不同主题。它们可以是：-

```
android:theme="@android:style/Theme.Black"
android:theme="@android:style/Theme.DeviceDefault"
android:theme="@android:style/Theme.DeviceDefault.Dialog"
android:theme="@android:style/Theme.Holo"
android:theme="@android:style/Theme.Translucent" 
```

这些主题中的每一个都会对您的应用程序产生不同的影响，例如 DeviceDefault.Dialog 将使您的应用程序看起来像一个对话框。你应该尝试更多这些。您可以查看 android sdk 或简单地使用 Eclipse IDE 中的自动完成功能来探索各种可用选项。

定义自己的主题的正确方法是编辑`styles.xml`应用程序资源文件夹中的文件。

# matlab - 在 3D 散点图上显示不同颜色的类别

> ID：12707564
> 
> 赞同：1
> 
> 时间：2012-10-03T11:29:01.630
> 
> 标签：matlab

除了 3 个数值外，数据还包含分类值（0 或 1），并希望使用 3D 散点图显示数据。我试图编写一个函数来从 csv 文件中读取数据并通过以下方式创建散点图：

```
function f = ScatterPlotUsers(filename)

    data = ReadCSV(filename);
    x = data(:,2);
    y = data(:,3);
    z = data(:,4);

    size = ones(length(x), 1)*20;
    userType = data(:,5);
    colors = zeros(length(x), 1);

    a = find(userType == 1);
    b = find(userType == 0);
    colors(a,1) = 42; %# color for users type a
    colors(b,1) = 2;  %# color for users type b

    scatter3(x(:),y(:),z(:),size, colors,'filled') 
    view(-60,60); 
```

我真正想做的是将 a 的颜色设置为红色，将 b 的颜色设置为蓝色，但无论颜色值如何（例如 42 和 2），点的颜色都不会改变。有谁知道确定几个分类值（在这种情况下只有 0 和 1）的特定颜色的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:47:28.727

但是，您做得对，您确定颜色图条目 42 和 2 指的是红色和蓝色吗？您可以尝试明确给出 RGB 值：

```
colors = zeros(length(x), 3);
colors(userType == 1, :) = [1 0 0]; %# colour for users type a (red)
colors(userType == 2, :) = [0 0 1]; %# colour for users type b (blue) 
```

另外，我建议您更改变量的名称`size`，因为`size`它也是一个 Matlab 命令；Matlab 可能对此感到困惑，您的代码的任何未来读者*肯定会*对此感到困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:18:50.910

我会使用颜色图，特别是如果您的`userType`值从 0 开始并增加：

```
% Read in x, y, z, and userType.

userType = userType + 1;

colormap(lines(max(userType)));

scatter3(x, y, z, 20, userType); 
```

如果您想要特定的颜色，请`lines(...)`用矩阵替换。例如，如果您有 3 种用户类型并且希望它们是红色、绿色和蓝色：

```
colormap([1, 0, 0;
          0, 1, 0;
          0, 0, 1]); 
```

其他一些注意事项：

我们添加一个以`userType`从基于 0 的索引切换到基于 1 的索引。

您可以`size`对 scatter3 的参数使用标量，而不是指定单个值的数组。

# android - Android：浅堆和保留堆有什么区别

> ID：12707572
> 
> 赞同：29
> 
> 时间：2012-10-03T11:29:47.517
> 
> 标签：android, performance, memory-management, memory-leaks

我试图找出应用程序的内存泄漏`MAT`，在这里`list_object` 我找到了一些数值 int`Shallow heap`和`retained heap`column。这些值是什么，以及如何知道内存泄漏在哪里。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-03T11:32:30.200

来自[Nikita Salnikov-Tarnovski 的博客](https://plumbr.eu/blog/how-much-memory-what-is-retained-heap)：

> 浅堆很简单——它只包含对象本身占用的堆。如何计算它有一些细微差别，但在本文的范围内，我们保持不变。请继续关注同一主题的未来帖子。
> 
> 保留堆在许多方面更有趣。您很少对浅堆感兴趣，在大多数情况下，您的实际问题可以翻译为“如果我从内存中删除这个对象，垃圾收集器现在可以释放多少内存”。
> 
> 现在，我们都记得，所有 Java 垃圾收集 (GC) 算法都遵循以下逻辑：
> 
> 1）有些对象被 GC 认为是“重要的”。这些被称为 GC 根，并且（几乎）从未被丢弃。例如，它们是当前正在执行的方法的局部变量和输入参数、应用程序线程、来自本机代码的引用以及类似的“全局”对象。
> 
> 2) 假定从这些 GC 根引用的任何对象都在使用中，因此不会被 GC 丢弃。在 Java 中，一个对象可以以不同的方式引用另一个对象，在最常见的情况下，对象 A 存储在对象 B 的字段中。在这种情况下，我们说“B 引用 A”。
> 
> 3) 重复该过程，直到所有可以从 GC 根传递到达的对象都被访问并标记为“正在使用”。
> 
> 4）其他所有东西都是未使用的，可以扔掉。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-21T10:19:27.777

[来自 eclipse 内存分析器文档](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Fconcepts%2Fshallowretainedheap.html)

**浅层与保留堆**

> **浅堆**是一个对象消耗的内存。一个对象每个引用需要 32 位或 64 位（取决于操作系统架构），每个整数 4 个字节，每个 Long 8 个字节等。根据堆转储格式，可以调整大小（例如对齐到 8，等等... ) 以更好地模拟 VM 的实际消耗。
> 
> **X 的保留集**是当 X 被垃圾回收时将被 GC 删除的对象集。
> 
> **X 的保留堆**是 X 的保留集中所有对象的浅层大小的总和，即由 X 保持活动的内存。
> 
> 一般来说，对象的浅堆是它在堆中的大小，同一对象的保留大小是当对象被垃圾回收时将释放的堆内存量。
> 
> 前导对象集的保留集，例如特定类的所有对象或由特定类加载器加载的所有类的所有对象，或者只是一堆任意对象，是如果所有对象都被释放的对象集该领先集变得无法访问。保留集包括这些对象以及只能通过这些对象访问的所有其他对象。保留大小是保留集中包含的所有对象的总堆大小。 ![在此处输入图像描述](../Images/cb7b92e881622cc64190b73a7345f693.png)
> 
> 最小保留大小给出了对保留大小的良好（低估）估计，其计算方式比一组对象的确切保留大小更快。它只取决于检查集中的对象数量，而不是堆转储中的对象数量。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-01T05:34:55.957

简单来说，对象的浅堆是它在堆中的大小，同一对象的保留大小是当对象被垃圾回收时将释放的堆内存量。 [更多细节](http://help.eclipse.org/luna/topic/org.eclipse.mat.ui.help/concepts/shallowretainedheap.html?cp=37_2_1)

# php - 如何隐藏实际的下载文件夹位置

> ID：12707589
> 
> 赞同：1
> 
> 时间：2012-10-03T11:31:47.877
> 
> 标签：php, security, mod-rewrite

我有一个问题，即如何`mod_rewrite`提高安全性。

我有一个我的 php 文件，它在网上显示一个 .pdf 文件`www.exaple.com?id=234`，它对数据库进行查询并获取实际的文件夹位置。

实际的文件夹位置是`uploads/`，我正在使用类似[如何隐藏实际文件夹位置的东西](https://stackoverflow.com/questions/10997516/how-to-hide-the-actual-download-folder-location.)

现在我想使用`google docs`

```
 echo "<iframe src=\"http://docs.google.com/gview?url=".root."uploads/myfile.pdf"."&embedded=true\" style=\"width:100%; height:100%;\" frameborder=\"0\"></iframe> 
```

但我不想`uploads/`在此 url 中显示上传目录。所以我使用`module_rewrite`将目录名称更改为`myfiles/`.

问题是，当用户将目录更改为`www.example.com/myfiles/hacking.php`than 时，它也会重写为`uploads/hacking.php`.

我允许用户上传文件。虽然我使用的是黑名单，但我们认为可能存在安全漏洞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:42:07.583

不要将文件放在网络可访问的位置。将它保存在 www 根目录之外的某个地方，并有一个脚本来打开、读取文件并将其输出到浏览器。

这样即使是php文件，也只有内容会被下发，不会被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:42:30.043

重写 url 来隐藏路径是没有用的。

最后，您有一个用户可以使用的 URL。请求将向他发送资源。如果他要求`example.com/?fileid=123`而不是`example.com/uploads/file123.ext?`

是的，将东西放入参数会迫使您使用脚本来获取和发送资源。使用看起来像路径的东西只允许您使用此脚本。但是它可以被使用，并且这些都不能提高安全性。不使用脚本意味着无法检查是否允许请求资源的用户，但对于公共资源，这不是问题。

你真正想做什么？您的安全问题是检查是否上传了恶意内容？如果您允许上传可执行文件，并且还允许执行它们，那么您注定要失败。重写任何 URL 没有任何帮助。

检查上传的内容。防止这些东西在您的服务器上执行。

当谈到使用这里讨论的 URL 时，情况应该是这样的：

如果不重写你会引用`/uploads/example.pdf`，使用重写应该将此 url 转换为其他内容，**并禁用原始 url**！如果您仍然可以通过上传文件夹获取内容，那么您的重写是错误的。

如果它是正确的，你就不需要使用旧的上传 url，因为它不再起作用了。

# perl - Perl 单行从文件中删除尾随空格

> ID：12707596
> 
> 赞同：4
> 
> 时间：2012-10-03T11:32:11.497
> 
> 标签：perl

我在 Perl 脚本中调用 perl one-liner。

单行的目的是从文件中删除尾随空格。

在主 perl 脚本中：

```
`perl -pi -e 's/\s+$//' tape.txt`; 
```

现在它给我一个错误`Substitution replacement not terminated at -e line 2.`

它哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T11:35:26.673

这是因为`$/`您的主 perl 脚本中的（特殊变量）。请注意，变量````像在字符串内部一样被插入到字符串内部`""`，并且其中有一些单引号的事实并没有改变这一点。你需要逃避`$`：

```
`perl -pi -e 's/\s+\$//' tape.txt;` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T13:08:04.800

反引号语法调用一个 shell，当被调用时，shell 假定它应该插入传递的字符串。

更简洁的语法可能是：

```
system('perl -pli -e "s/\s*$//" tape.txt'); 
```

由于您没有捕获命令的输出，因此使用反引号或`qx`代替`system`不是问题。

同样，添加`-l`开关 autochomps 读取的每一行**，**然后添加一个换行符 --- 可能是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T20:33:32.587

\s 匹配 [ \t\n\r\f] 并且不想匹配 \n。

注意使用 {} 作为 subst 分隔符：

```
$ echo -e 'hi    \nbye'| perl -pe 's{[\t\040]+$}{};' | cat -A
hi$
bye$ 
```

# javascript - 阻塞的异步调用

> ID：12707597
> 
> 赞同：1
> 
> 时间：2012-10-03T11:32:14.773
> 
> 标签：javascript, asynchronous, xmlhttprequest

我在嵌入式环境中有一个 XHR 异步调用，似乎阻塞了我的 UI。这些调用似乎仅在涉及 DNS 解析时才会被阻止，否则不会。因此，当我尝试查询[http://www.google.com](http://www.google.com)时，调用会阻塞；但是当我查询“http://173.194.39.18”时，它没有。我的理解是，如果环境具有 IP 地址但没有 DNS 解析功能（例如，您的设备与路由器有网络连接，但路由器本身未连接到 Internet），那么呼叫将被阻止DNS 超时的持续时间。

这是正确的，还是我错过了一些基本的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:51:11.927

A DNS timeout will be very much like a regular timeout. Although, due to this being an asynchronous call this should not "block" any other function (unless it is waiting for a success event).

If you need to shorten this time you can set a timeout for the request.

[http://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send-method](http://www.w3.org/TR/XMLHttpRequest/#infrastructure-for-the-send-method)

# jquery - 渐进式下载

> ID：12707598
> 
> 赞同：1
> 
> 时间：2012-10-03T11:32:15.847
> 
> 标签：jquery, asp.net-mvc, jquery-mobile, razor, asp.net-mvc-4

我正在使用 asp.net MVC 4 razor 开发一个 JQuery 移动应用程序。在我的应用程序中，有保存在数据库中的图像列表。

是否可以以渐进方式显示这些图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:45:09.793

我对您的问题的理解是您不想加载视口之外的图像（网页的可见部分）。**您想延迟加载图像。**

**检查这个 jQuery 插件：**

[用于 jQuery 的延迟加载插件](http://www.appelsiini.net/projects/lazyload)

**[见工作演示](http://www.appelsiini.net/projects/lazyload/enabled.html)**

Lazy Load 是一个用 JavaScript 编写的 jQuery 插件。它延迟了长网页中图像的加载。**在用户滚动到它们之前，不会加载视口之外的图像（网页的可见部分）。**这与图像预加载相反。

在包含许多大图像的长网页上使用延迟加载可以加快页面加载速度。加载可见图像后，浏览器将处于就绪状态。在某些情况下，它还可以帮助减少服务器负载。

# biztalk - 过程或函数“Itinerary_getitinerary”需要参数“@name”，但未提供该参数

> ID：12707599
> 
> 赞同：0
> 
> 时间：2012-10-03T11:32:26.777
> 
> 标签：biztalk

我正在使用您的 BRI 扩展程序并收到以下错误。我该如何调试呢？谢谢！

过程或函数“Itinerary_getitinerary”需要参数“@name”，但未提供该参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:11:10.960

对于调试，最好的办法是启用 ESB 工具包跟踪： http: [//midheach.wordpress.com/2011/02/28/tracing-with-esb-toolkit-2-1/](http://midheach.wordpress.com/2011/02/28/tracing-with-esb-toolkit-2-1/)

这将导致 ESB Toolkit 在处理消息时将调试消息输出到事件日志。

至于您的具体错误消息，解析器连接字符串错误或 BRE 策略规则有错误导致行程解析失败。

# c# - 页面打开时按钮可见

> ID：12707606
> 
> 赞同：0
> 
> 时间：2012-10-03T11:33:05.360
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我有一个非常简单的 xaml：（我只在基本应用模板中添加了一个按钮）

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="App1.MainPage"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App1"
    xmlns:common="using:App1.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>

        <!-- TODO: Delete this line if the key AppName is declared in App.xaml -->
        <x:String x:Key="AppName">My Application</x:String>
    </Page.Resources>

    <!--
        This grid acts as a root panel for the page that defines two rows:
        * Row 0 contains the back button and page title
        * Row 1 contains the rest of the page layout
    -->
    <Grid Style="{StaticResource LayoutRootStyle}">
        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Back button and page title -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
            <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
        </Grid>

        <!-- HERE IS THE BUTTON-->
        <Button Opacity="0" Margin="110,153,0,169" Grid.Row="1" Height="306" Width="476"/>

        <VisualStateManager.VisualStateGroups>

            <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscape"/>
                <VisualState x:Name="Filled"/>

                <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
                <VisualState x:Name="FullScreenPortrait">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!-- The back button and title have different styles when snapped -->
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</common:LayoutAwarePage> 
```

我的问题是，虽然我已将按钮的不透明度设置为 0，但在我的应用程序打开时的短动画期间它是可见的。

如何在页面打开时使其不可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:46:32.097

先生，您需要使用`Visibility`并将其设置为`Collapsed`

所以，

```
 <Button Visibility="Collapsed" Opacity="0" Margin="110,153,0,169" Grid.Row="1" Height="306" Width="476"/> 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.visibility.aspx)

# jsp - servlet 中的 RMI 客户端 UnmarshalException

> ID：12707608
> 
> 赞同：0
> 
> 时间：2012-10-03T11:33:07.410
> 
> 标签：jsp, servlets, permissions, rmi

我构建了一个搜索文件的 rmi 应用程序。它在终端上运行良好。我想通过 JSP 提供搜索词并在 servlet 中编写客户端代码。

它给了我异常 发生异常：java.rmi.UnmarshalException: error unmarshalling return; 嵌套异常是：java.lang.ClassNotFoundException: myRMIImpl_Stub

我想问我是否需要为客户端使用策略文件（我在终端中使用）和存根文件。我在类文件夹中复制了存根文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:18:38.997

> 我想问我是否需要使用策略文件（我在终端中使用）

如果您在客户端使用 SecurityManager，则只需要客户端的策略文件。

> 和存根文件

例外是告诉您您需要它。

> 我在类文件夹中复制了存根文件。

例外是告诉您您没有正确执行此操作。

# java - 如何匹配传递给Class参数的null 与 Mockito

> ID：12707609
> 
> 赞同：84
> 
> 时间：2012-10-03T11:33:06.893
> 
> 标签：java, unit-testing, mocking, mockito

我有这样的方法：

```
public <T> method(String s, Class<T> t) {...} 
```

在为其他参数使用匹配器时，我需要检查`null`是否传递给第二个参数，我一直在这样做：

```
@SuppressWarnings("unchecked")
verify(client).method(eq("String"), any(Class.class)); 
```

但是有没有更好的方法（没有抑制警告）？`T`表示某些其他方法的返回类型，`void`在这些情况下有时`null`会传入。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-10-03T18:30:16.417

Mockito 有一个[`isNull`matcher](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Matchers.html#isNull(java.lang.Class))，你可以在其中传入类的名称。因此，如果您需要将它与其他匹配器一起使用，正确的做法是

```
verify(client).method(eq("String"),isNull(Class<?>.class)); 
```

现在已弃用，请参阅下面的答案以了解新方法 - [https://stackoverflow.com/a/41250852/1348](https://stackoverflow.com/a/41250852/1348)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-12-20T20:35:42.483

大卫华莱士的回答更新：

截至 2016-12，Java 8 和 Mockito 2.3，

```
public static <T> T isNull(Class<T> clazz) 
```

已[弃用](https://static.javadoc.io/org.mockito/mockito-core/2.3.10/org/mockito/ArgumentMatchers.html#isNull(java.lang.Class))并将在 Mockito 3.0 中删除

采用

```
public static <T> T isNull() 
```

反而

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-10-03T12:34:32.383

这对我有用：

```
verify(client).method(eq("String"), eq((Class<?>) null)); 
```

# java - 蚂蚁 任务：使用排除参数

> ID：12707612
> 
> 赞同：4
> 
> 时间：2012-10-03T11:33:17.983
> 
> 标签：java, ant, build

得到以下 build.xml 字符串：

```
<jar destfile="${lib.dir}/rpt.jar" basedir="${classes.src}" excludes="**/*.java" /> 
```

我是 Ant 新手，我不明白*excludes*字符串是如何工作的。哪些文件受到影响？所有java源文件？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T11:50:59.420

首先关于声明

```
<jar destfile="${lib.dir}/rpt.jar" basedir="${classes.src}" excludes="**/*.java" /> 
```

此目标用于将您的文件打包到 jar 存档中

destfile ：指定目标文件的名称和位置，将创建的存档

basedir ：指定需要打包的文件的基本目录。请注意，将包含所有文件和子文件夹

excludes ：这用于从 basedir 中排除您在包（jar）中不需要的文件

现在回答你的问题

上述语句的作用是将 classes.src 中的所有文件打包到 $(lib.dir)/rpt.jar 中，但会排除在 basedir 的任何子文件夹中或内部找到的任何 .java 文件。

编辑：这个 exclude="* */* .java" 通常用于从 jar 中排除源代码，这些源代码将被使用、分发、导出等

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T11:40:51.273

是的，您的代码排除了所有 Java 文件。看看模式定义：[这个页面](http://ant.apache.org/manual/dirtasks.html#patterns)很好地解释了 Ant 模式是如何工作的。它还包含许多说明它的示例。模式无处不在，所以如果你继续使用 Ant，你真的需要理解它们。

基本上意味着每个`**`子目录。并且`/*.java`表示这些目录中的每个 Java 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T11:41:46.647

```
<jar destfile="${lib.dir}/rpt.jar" basedir="${classes.src}" excludes="**/*.java" /> 
```

相当于

```
<jar destfile="${lib.dir}/rpt.jar">
  <fileset dir="${classes.src}" excludes="**/*.java" />
</jar> 
```

即它包括`${classes.src}`目录及其子目录中的所有文件，除了那些以结尾的文件`.java`（并且除了[默认的 excludes](http://ant.apache.org/manual/dirtasks.html#defaultexcludes)）

# android - 整个应用程序中的 Android 全局进度条

> ID：12707613
> 
> 赞同：2
> 
> 时间：2012-10-03T11:33:19.203
> 
> 标签：android, android-progressbar, android-notification-bar

我想在我的应用程序中实现一些目标，但我不确定哪个是最好的选择。在我的应用程序中，我正在通过网络服务器下载数据。我想创建像全局进度条这样的东西，它必须向用户显示他从整个应用程序中下载了多少数据......无论他是什么活动。我认为现在是时候说我在我的应用程序中使用 TabHost 和 TabGroupActivity 了。所以现在我认为它应该是这样的：

![在此处输入图像描述](../Images/25bfe815b1be04cf08b97215fe2b1696.png)

对于第二个选项，我在考虑是否是一个更好的选择来实现带有进度条的通知，该通知正在更新下载的数据大小..类似于下载应用程序时的 Google Play 商店通知：

![在此处输入图像描述](../Images/4370e1d68b13a1ae8740684f32595b65.png)

有什么建议我应该寻找什么以及在 Android 应用程序中最好的方法是什么？

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:52:02.247

My first decision was to create a custom view, which had title, some custom action buttons and textviews which I added to every screen. After that I changed to ActionBarSherlock and made some custom design for it too so it can look like the same in every version and that worked for me.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:59:07.453

如果你想使用“**活动中的进度条**”选项，你在某种程度上强迫用户打开你的应用程序来检查进度，而我认为你的**下载服务**考虑到**永久**通知要好得多。之后这一切就是Android通知栏的主要含义。这样，用户每时每刻都可以通过下拉菜单轻松查看进度。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:52:37.313

您可以使用**Service**来实现这一点，可能还有其他各种方法可以做到这一点，但这是我知道的一种......

1.  开始在后台服务中下载数据
2.  每当数据发生变化时广播信息
3.  在您的选项卡活动中接收广播数据
4.  将页脚或页眉添加到选项卡小部件并显示进度条
5.  继续更新进度条中的数据，直到下载完成

您还可以在数据更新时更新来自**服务的通知。****

# css - LESS 混合逻辑

> ID：12707614
> 
> 赞同：0
> 
> 时间：2012-10-03T11:33:22.210
> 
> 标签：css, less, mixins

我为边距创建了一个 LESS mixin，它接受多个数值并吐出带有 rem 测量单位和 px 后备的 css 值/属性对。

**以下是我需要帮助的内容：**

1.  我希望 mixin 能够接受有效的基于字符串的属性，例如“auto”或“inherit”
2.  我希望能够只声明必要的参数数量。例如。如果我只需要左边距，那么我只想写类似`.margin(nope,nope,nope,1);`.

这是我到目前为止所拥有的：

```
.margin(@sizeValueTop: auto, @sizeValueRight: 0, @sizeValueBottom: 0, @sizeValueLeft: 0) {
  @pxValueTop: (@sizeValueTop * 16);
  @remValueTop: (@sizeValueTop);
  @pxValueRight: (@sizeValueRight * 16);
  @remValueRight: (@sizeValueRight);
  @pxValueBottom: (@sizeValueBottom * 16);
  @remValueBottom: (@sizeValueBottom);
  @pxValueLeft: (@sizeValueLeft * 16);
  @remValueLeft: (@sizeValueLeft);
  margin-top: ~"@{pxValueTop}px"; 
  margin-top: ~"@{remValueTop}rem";
  margin-right: ~"@{pxValueRight}px"; 
  margin-right: ~"@{remValueRight}rem";
  margin-bottom: ~"@{pxValueBottom}px"; 
  margin-bottom: ~"@{remValueBottom}rem";
  margin-left: ~"@{pxValueLeft}px"; 
  margin-left: ~"@{remValueLeft}rem";
}

body{
  .margin(1,1,1,1);
} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:59:24.563

1）想要阻止它做数学`auto * 16`？不可能，除非他们在我不看的时候加入了 if/else 控制语句。守卫是检查参数类型的唯一方法。这意味着同一个 mixin 的多个声明来覆盖你的所有基础。不过，您可以让 mixins 调用其他 mixins...

2）也不可能。将您最有可能保留为默认值的参数放在最后。在您的示例中，由于您的默认值`nope`在您的参数的 3/4 上，因此输入没有任何优势。`0``0`

# javascript - JavaScript 代码在我的 Blogger 网站上不起作用

> ID：12707617
> 
> 赞同：0
> 
> 时间：2012-10-03T11:33:32.900
> 
> 标签：javascript, blogger, jsfiddle

我使用 fiddle.com 网站制作了[JavaScript代码。](http://en.wikipedia.org/wiki/JavaScript)但在小提琴中，我只能通过使用

> 没有包裹（身体）

选项。我不确定这个选项有什么作用。Fiddle 的链接在[这里](http://jsfiddle.net/GDXuS/3/)。我将此脚本添加到我的[Blogger](http://en.wikipedia.org/wiki/Blogger_%28service%29)博客，但它不起作用。

### 代码

```
function getTotal(){
    var form = document.theForm;
    var inputs = form.getElementsByTagName('input');
    var length = inputs.length;
    var total = '0';

    for (i = 0; i<length-1; i++){
        if(inputs[i].type == 'radio'){
            var checked = inputs[i].checked?1:0;
            if(checked){
                var value = inputs[i].value.split("~~")[0];
                total -= -value;
            }
        }
    }
    document.getElementById('totalspan').innerHTML="Toplam Fiyat: "+ total + " tl"
    total='0';
} 
```

该脚本用于计算选择的总价格。你可以在小提琴中看到它。另外，我在 Blogger 上有它，但正如我所说，它不起作用。

我的博客的链接在[这里](http://hackintoshturkey.blogspot.com/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:03:00.137

`no wrap (body)`意味着您的脚本将被插入到`script`标签内的新标签中`body`，`no wrap (head)`意味着您的脚本将被插入到新`script`标签内`head`。[您可以在jsFiddle 帮助](http://doc.jsfiddle.net/basic/introduction.html#choose-framework)中了解它

其他选项会将您的 JS 代码包装在特定的 DOM 事件处理程序（`onLoad`和`onDomReady`）中

你网站上的脚本错误告诉我`calculateTotal is not defined`，所以请检查你的命名。

为什么在计算总数时使用字符串？您可以安全地使用原生 JS`parseInt`功能。

使用表单`click`事件的另一点是错误的，您应该使用`change`输入的事件。

最简单的选择是像这样使用[jQuery](http://jquery.com)：

```
$('[name="CPU"], [name="OperatingSystem"], [name="Case"]').on('change', updateTotal);

function updateTotal {
   var total = 0;
   // calculate your total here
   $('#totalspan').text(total);
} 
```

请检查我的 5 分钟小提琴：http: [//jsfiddle.net/GDXuS/5/](http://jsfiddle.net/GDXuS/5/)

您还可以使用`data-`属性来存储价格或任何其他数据（参见[jQuery 网站](http://api.jquery.com/data/)）。

我建议你学习一些编程语言。

# mysql - 如何使用 Korma 配置瞬态字段

> ID：12707618
> 
> 赞同：4
> 
> 时间：2012-10-03T11:33:43.493
> 
> 标签：mysql, clojure, korma

我正在使用带有[korma](http://sqlkorma.com/)的 Clojure 将 Clojure 映射存储在 Mysql 数据库中，例如使用以下结构存储映射：

```
(defentity users
  (table :user)
  (entity-fields :email 
                 :password 
                 :name)) 
```

在具有四列`id`（隐式定义）`email`、`password`和的表中`name`。

所以，当我调用这段代码时，一切正常：

```
(insert users (values {:email "john@example.com"
                       :password "____hashed_passw___"
                       :name "J"})) 
```

我遇到的问题是我的地图可能包含一些在数据库中没有对应列的键（我不想保留这些值）。例如：

```
(insert users (values {:email "john@example.com"
                       :password "____hashed_passw___"
                       :name "J"
                       :something "else"})) 
```

会抛出错误`MySQLSyntaxErrorException Unknown column 'something' in 'field list'`。

理想情况下，我想知道的是在 Korma 的某个地方是否有一个选项可以忽略地图中存在的额外键。这个问题*可以*通过`dissoc`保存所有这些来解决，但我更愿意在我这样做之前找出是否有内置的方法（或任何其他更好的想法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:04:39.273

不，您必须从地图中删除额外的键/值对。可以说，科尔马可以根据辩护理由将它们移除。

我建议您在[https://github.com/korma/Korma](https://github.com/korma/Korma)上提出它作为功能请求，或者考虑自己添加它。维护者 Chris Granger 很容易交谈，并且可能会考虑您的想法。

# delphi - Delphi中的圆角矩形

> ID：12707624
> 
> 赞同：1
> 
> 时间：2012-10-03T11:34:03.460
> 
> 标签：delphi

我一直在尝试在边框中绘制一个带间距的圆角矩形，但我似乎无法找到使用 Canvas.RoundRect 函数的方法，而且我自己绘制边缘的数学不太好，我可以绘制使用 Canvas.MoveTo 和 Canvas.LineTo 函数的带间距的矩形，但我不知道如何使边缘变圆。目前我正在做的是我在我想在边框中制作间距的地方制作黄色矩形，但问题是当我打印时我必须直接在打印机画布上绘制并且我必须在透明纸上绘制，所以背景颜色会导致问题。任何可以帮助我建立自定义绘图程序或告诉我如何擦除该区域并仍然在没有任何背景颜色的透明纸上打印的人。黄色背景色仅供预览，

查看图片以了解我所说的边界线间距是什么意思。

![在此处输入图像描述](../Images/0c3772fb2929edb2d6ae9e9edab42dfa.png)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T14:41:46.983

您可以通过操作当前设备上下文的剪辑区域来排除间隙。假设 L、R、T 和 B 是您的黄色矩形的坐标以形成间隙，请使用以下代码：

```
ExcludeClipRect(Canvas.Handle, L, T, R, B); // exclude the gap
Canvas.RoundRect(<whatever you already do here>);
SelectClipRgn(Canvas.Handle, 0); // reset the clipping region 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T12:17:30.133

您可以自己绘制部分圆角矩形。用于直线部分，`MoveTo`用于拐角。`LineTo`[`Arc`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCanvas.Arc)

该`Arc`函数绘制椭圆的一部分。函数的前两对坐标表示椭圆的边界。如果您希望矩形的角为圆形，则椭圆为圆形，并且`X2 - X1`等于`Y2 - Y1`。后两对坐标表示圆上的起点和终点；它们将与您传递到直线部分的点`MoveTo`相同`LineTo`。圆弧是逆时针绘制的。

# xslt - XSLT 应用模板的默认选择是什么？

> ID：12707630
> 
> 赞同：14
> 
> 时间：2012-10-03T11:34:50.543
> 
> 标签：xslt, xslt-2.0

身份模板如下所示：

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
</xsl:template> 
```

`<xsl:apply-templates select="@*|node()" />`select more than `<xsl:apply-templates />`，或者身份模板可能是这样的？

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates />
    </xsl:copy>
</xsl:template> 
```

当我执行以下操作时，究竟选择了什么？

```
<xsl:apply-templates /> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T12:00:28.867

> `<xsl:apply-templates select="@*|node()" />`select more than `<xsl:apply-templates />`，或者身份模板可能是这样的？

```
<xsl:apply-templates/> 
```

相当于：

```
<xsl:apply-templates select="node()"/> 
```

这是一个较短的前者：

```
<xsl:apply-templates select="child::node()"/> 
```

这相当于：

```
<xsl:apply-templates select="* | text() | comment() | processing-instruction()"/> 
```

正如我们从最后一条指令中看到的，`xsl:apply-templates`您所询问的指令没有选择任何属性，因此它不能用作以下指令的简写：

```
<xsl:apply-templates select="@*|node()"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T11:37:28.833

默认选择`<xsl:apply-templates/>`只是`"node()"`，它不包括属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T18:15:38.737

[apply-templates](http://www.w3.org/TR/xslt20/#element-apply-templates)的默认选择是`node()`，它是`child::node()`. 此 XPath 表达式的计算方式如下：

*   首先，取“子”[轴](http://www.w3.org/TR/xpath/#axes)的所有节点。这是当前元素的所有直接子元素，即其他元素、文本和注释，但*不是*属性。
*   [然后用节点测试](http://www.w3.org/TR/xpath/#node-tests)“node()”过滤这个节点集。在这种情况下，不会过滤任何元素，因为该测试匹配所有内容。

因此，使用 时`<xsl:apply-templates />`，将应用子元素的模板，但不适用于属性。在复制模板的情况下，这意味着属性不会被复制。

# jquery - 是否有一个 JQuery 表达式将针对没有规定类的 div

> ID：12707633
> 
> 赞同：2
> 
> 时间：2012-10-03T11:34:59.837
> 
> 标签：jquery, jquery-selectors

我使用 tabber.js ( [www.barelyfitz.com/projects/tabber/](http://www.barelyfitz.com/projects/tabber/) ) 创建选项卡列表，然后我使用 columniser 函数对选项卡中的信息进行分列。

但是我的 jquery 选择器不起作用：$('("div.tabberlive div").not(".tabbertabhide") ul')。我有 $('div.tabbertab ul') ，我认为它可以在所有选项卡上工作并正常显示，但它会将隐藏的选项卡分列并显示它们。我希望使其更具体到可见的 div （不幸的是，它没有唯一的目标类）会有所帮助。

我的HTML如下：

```
<div class="tabberlive">
  <ul class="tabbernav">...</ul>
  <div class="tabbertab "><ul>...</ul></div>
  <div class="tabbertab tabbertabhide"><ul>...</ul></div>
  <div class="tabbertab tabbertabhide"><ul>...</ul></div>
  <div class="tabbertab tabbertabhide"><ul>...</ul></div>
</div> 
```

分列器功能是：

```
$(document).ready(function(){
  var size = 6,
      $ul  = $('("div.tabberlive div").not(".tabbertabhide") ul'),
      $lis = $ul.children().filter(':gt(' + (size - 1) + ')'),
      loop = Math.ceil($lis.length / size),
      i    = 0;

  $ul.css('float', 'left').wrap("<div style='overflow: hidden'></div>");

  for (; i < loop; i = i + 1) {
    $ul = $("<ul />").css('float', 'left').append($lis.slice(i * size, (i * size) + 6)).insertAfter($ul);
  }
}); 
```

我试图猜测选择器但显然失败了......非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:36:09.053

这不是好的语法。

你可以使用这个：

```
$('div.tabberlive div:not(.tabbertabhide) ul') 
```

或者你可以使用

```
$('div.tabberlive div').not('.tabbertabhide').find('ul') 
```

[不允许](http://api.jquery.com/not/)您通过删除不需要的元素来过滤 jQuery 集。

[find](http://api.jquery.com/find/)为您提供后代之间的匹配元素。

# javascript - 部分覆盖 Backbone.sync

> ID：12707634
> 
> 赞同：2
> 
> 时间：2012-10-03T11:35:01.680
> 
> 标签：javascript, backbone.js

有什么方法可以部分覆盖 Backbone.sync，比如说，只有`create`and `update`，离开`read`并`delete`使用本机 Backbone.sync？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:39:16.327

就那么简单：

```
// retain original sync with new name
Backbone.ajaxSync = Backbone.sync;

Backbone.customSync = function(method, model, option) {
    // Fallback for old sync method
    if (method == 'read' || method == 'delete') return Backbone.ajaxSync(method, model, option);

    // your custom code for other methods
    console.log('Custom sync for ' + method);
}

Backbone.sync = Backbone.customSync; 
```

# testing - 如何按需清除Jmeter中每个线程（用户）的JSESSIONID

> ID：12707635
> 
> 赞同：6
> 
> 时间：2012-10-03T11:35:01.510
> 
> 标签：testing, jmeter, qa, performance-testing

我想随时（根据我的要求）清除 Jmeter JsessionID 变量。

我知道 Jmeter CookieManager 中有一个名为“**每次迭代清除 Cookie** ”的复选框选项。
但是它会在每次迭代中清除会话，而我想在迭代中的任何时候清除它。

我怎么能在 Jmeter 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-20T08:46:25.497

您可以，只需添加后/预处理 beanShell 并使用此代码

```
import org.apache.jmeter.protocol.http.control.CookieManager;
import org.apache.jmeter.protocol.http.control.Cookie;
CookieManager manager = sampler.getCookieManager();
for (int i=0;i<manager.getCookieCount();i++){
    Cookie cookie = manager.get(i);
    //remove a cookie 
    if (cookie.getName().equals("BAD_COOKIE")){
        sampler.getCookieManager().remove(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:39:37.673

目前你不能简单地，特别是如果你想清除一个特定的 cookie。

您应该在 JMeter Bugzilla 提出增强请求，准确说明您想要做什么。

我认为自定义函数将是一个不错的功能，请参阅：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=53976](https://issues.apache.org/bugzilla/show_bug.cgi?id=53976)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-22T17:03:39.103

*我的方式与上述方式相距不远（抱歉，这对我不起作用），但它更短，包含循环内索引的重要更新，以及一些用于清除脚本使用的额外演示（我希望;)）*

JSESSIONID 是令牌之一（第一个或一些后续），因此为了删除包括 JSESSIONID 在内的所有令牌，我建议在您需要的 JSR223 Pre-和/或 PostProcessor 中使用以下 Java 脚本：

```
import org.apache.jmeter.protocol.http.control.CookieManager;

CookieManager cManager = sampler.getCookieManager();
    int count = cManager.getCookieCount();
    for (int index = 0; index < count; index++) {
        cManager.remove(0);
        } 
```

[jMeter中将脚本添加到PostProcessor的示例](https://i.stack.imgur.com/IBnq9.png)

注意：这里的**for**循环内部是 (0)，而不是 (index)，这有助于避免 OutOfBoundary 异常，因为每次迭代后 CookieManager 实例的大小都会变小。

# c++ - boundingRect() 的工作原理

> ID：12707638
> 
> 赞同：2
> 
> 时间：2012-10-03T11:35:20.210
> 
> 标签：c++, qwt, rectangles

我有一些代码在其中绘制符号并将其附加到绘图上。现在我想知道是否有一个使用符号自动创建的边界矩形，以便我可以编写一些代码来选择符号，以便用户可以编辑它 - 例如选择它以删除它。

我在 qwt_plot_marker.h 中看到了一个 boundingRect() 方法，我将如何使用它来确定在实现以下代码时是否创建了一个矩形？

```
void DataPointMarker::draw(QPainter *p, 
const QwtScaleMap &xMap, const QwtScaleMap &yMap,
const QRect &) const
{
  const int posX = xMap.transform(m_positionX);
  const int posY = yMap.transform(m_positionY);

p->save();

symbol().draw(p, posX, posY);

p->restore(); 
```

该符号在别处定义。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:01:49.573

[boundingRect](http://qwt.sourceforge.net/class_qwt_series_data.html#aedb969ba51a27d88d26ad7f7cb1c2c7f)函数返回一个足够大的矩形，以使系列的所有点都适合它。这是自动缩放所需要的，而且绝对不是您想要的。您想要的是焦点或选择指示器之类的东西。您可以查看`event_filter`qwt 附带的示例。在那里可以选择和移动点/标记。

qwt 示例目录可以在 qwt 的基本目录中找到（至少在 Windows 上），例如`qwt-6.0\examples`. 二进制文件位于`qwt-6.0\examples\bin`. 查看该`INSTALL`文件以了解如何构建二进制文件。

# batch-file - 如何编写杀死多个进程的批处理文件

> ID：12707641
> 
> 赞同：0
> 
> 时间：2012-10-03T11:35:31.573
> 
> 标签：batch-file, batch-processing

我想要一个可以杀死所有 chrome.exe 进程的批处理文件。我遇到了这个示例：taskkill /im chrome.exe

它只杀死它找到的 chrome.exe 的第一个进程。我怎样才能循环它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T11:38:21.853

你可以使用这个：

```
taskkill /F /IM <processname.exe> /T
taskkill /F /IM Chrome.exe /T 
```

# mysql - MySQL查询中的每一行都需要一个序列号

> ID：12707646
> 
> 赞同：3
> 
> 时间：2012-10-03T11:36:13.773
> 
> 标签：mysql, sql-order-by

所以我发现这个很有用：

```
SELECT (@row:=@row+1) AS ROW, ID  
FROM TableA ,(SELECT @row := 0) r   
ORDER BY ID DESC 
```

`@row:=@row+1`效果很好，但我得到了按 ID 排序的行。

我的表看起来更像这样：

```
SELECT (@row:=@row+1) AS ROW, ID , ColA, ColB, ColC
FROM TableA 
JOIN TableB on TableB.ID = TableA.ID
JOIN TableC on TableC.ID = TableA.ID 
WHERE ID<500
,(SELECT @row := 0) r   
ORDER BY ID DESC 
```

**注意：** 我注意到`if I remove the JOINs I DO get the requested result`（其中`ROW`是每行的序号，无论 ID 的 ORDER BY 是什么）。第一个示例效果很好，但对于某些原因，JOIN 以某种方式将其搞砸了。

所以我明白了：

```
ROW  | ID  
3      15  
2      10  
1      2 
```

我追求的是：

```
ROW  | ID  
1      15  
2      10  
3      2 
```

这是**[SqlFiddle](http://sqlfiddle.com/#!2/8a511/6)**

所以基本上似乎在`ORDER BY`发生之前评估了行号。我需要在`ORDER BY`给出行后进行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T11:38:44.820

删除`ORDER BY`：

```
SELECT (@row:=@row+1) AS ROW, ID  
FROM table1 ,(SELECT @row := 0) r 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/1bcb9/1)

然后，如果您想`ORDER BY`在另一个中使用包装查询`SELECT`：

```
select *
from 
(
  SELECT (@row:=@row+1) AS ROW, ID  
  FROM table1 ,(SELECT @row := 0) r
) x
order by row 
```

或者，如果您离开查询，那么您可以通过简单地使用or 或order来查看`ORDER BY`行号的应用方式-[参见演示](http://sqlfiddle.com/#!2/1bcb9/18)`DESC``ASC`

如果您使用`DESC`订单

```
SELECT (@row:=@row+1) AS ROW, ID  
FROM table1, (SELECT @row := 0) r
order by id desc; 
```

结果似乎是您想要的结果：

```
ROW | ID
----------
1   | 15
2   | 10
3   | 2 
```

如果您使用`ASC`订单：

```
SELECT (@row:=@row+1) AS ROW, ID  
FROM table1 ,(SELECT @row := 0) r   
ORDER BY ID; 
```

结果是：

```
ROW | ID
----------
1   | 2
2   | 10
3   | 15 
```

编辑，根据您的更改，您应该将行号放在子查询中，然后加入其他表：

```
select *
from
(
  SELECT (@row:=@row+1) AS ROW, ID  
  FROM Table1,(SELECT @row := 0) r   
  order by ID desc
) x
JOIN Table2 
  on x.ID = Table2.ID; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8a511/10)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T11:42:16.617

我没有发现您的查询有任何问题

```
SELECT (@row:=@row+1) AS ROW, ID  
FROM table1 ,(SELECT @row := 0) r   
order by ID desc 
```

# [SQL Fiddle 演示](http://sqlfiddle.com/#!2/ebb16/1)

# c# - 如何从 defaultview.table 复制表结构？

> ID：12707647
> 
> 赞同：0
> 
> 时间：2012-10-03T11:36:28.367
> 
> 标签：c#, asp.net

我创建了一个包含三列的数据表。我正在对数据进行排序

```
DataTable dt= new DataTable();

DataColumn auto = new DataColumn("ID",typeof(System.Int32));
                        dt.Columns.Add(auto);
                        auto.AutoIncrement = true;            
                        auto.AutoIncrementSeed = 1;
                        auto.ReadOnly = true;
 dt.PrimaryKey = new DataColumn[] { dt.Columns["ID"] }; 
 dt.Columns.Add(new DataColumn("Name"));
 dt.Columns.Add(new DataColumn("Precedence",typeof(System.Int32))); 

DataView dv = dt.DefaultView;
                dv.Sort = "Precedence ASC";
                dt=dv.table 
```

dv.table 不返回原始表的表结构。我也想要排序的数据和表模式（主键）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:49:32.460

如果您使用`dt=dv.table`它，它会分配一个参考`dv`to`dt`

用户 copy() 方法复制 Datatable 而不是分配表

```
dt = dv.Table.Copy(); 
```

# android - FragmentLayout.java的android片段源代码

> ID：12707654
> 
> 赞同：5
> 
> 时间：2012-10-03T11:36:56.073
> 
> 标签：android, android-fragments

我试图理解 android 上片段的概念。[官方页面](http://developer.android.com/guide/components/fragments.html#Example)有一些代码片段和一个提到整个源代码的链接，但是`FragementLayout.java.`点击它，我被重定向到这个页面

[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

这表示源代码在安装 sdk 的示例目录中可用。我尝试检查各种不同 API 级别（8、11、17）的示例，但找不到片段教程的源代码。有没有人知道它在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:46:24.710

我在 13、14 和 16 的示例文件夹中有那个确切的文件。

对于额外的功劳，我建议查看 Action Bar Sherlock 的 Fragments 演示，因为我相信它展示了学习 Fragments 的更好方法。

有关此问题的更多讨论，请查看我的问题和相关答案：

*   [有多少活动与片段？](https://stackoverflow.com/questions/12363790/how-many-activities-vs-fragments)

您可以看到我不喜欢该教程中的模式，但是对于这两种方法都有很好的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:04:13.833

> 使用从现有示例创建项目创建一个新项目。选择最大目标名称，然后选择 Sample ApiDemo。结束。现在去 ApiDemos->src->com.example.android.apis.app->FragmentLayout.java .Enjoy

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T21:03:31.303

是的，它似乎已从官方 Android 在线文档中删除。

但是，可以在每个 API 级别的可下载“SDK 示例”中找到它。

下载“Samples for SDK”，以“Android 4.4.2 (API 19)”为例：

1.  打开 Android SDK 管理器（例如 Eclipse > 窗口 > Android SDK 管理器）。
2.  勾选“Android 4.4.2 (API 19)”>“SDK 示例”。
3.  安装。

FragmentLayout.java 将在类似的目录中找到

"C:\Program Files\Android\sdk\samples\android-19\legacy\ApiDemos\src\com\example\android\apis\app\FragmentLayout.java"

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-03T11:44:30.433

[您可以在此处](http://developer.android.com/training/basics/fragments/index.html)的官方 Android 文档中找到示例代码以及说明

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-03T12:50:39.680

只需单击此链接即可从 Android Developers wbesite 下载示例：[FragmentBasics.zip](http://developer.android.com/shareables/training/FragmentBasics.zip)

# android - 将 cookie 存储在 sharedpreferences 中

> ID：12707655
> 
> 赞同：6
> 
> 时间：2012-10-03T11:37:02.533
> 
> 标签：android, cookies, sharedpreferences, httpsurlconnection

我一直在努力解决这个问题：我正在制作一个 HttpsURLConnection 并使用 java.net.cookiemanager 来管理我的 cookie（据我所知，没有办法将 android.webkit.cookiemanager 用于 HttpUrlConnection/HttpsUrlConnection 吗？ ）。我需要将我的长期 cookie 保存到以后的连接中。

可悲的是我不能使用[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)它是 PersistentCookieStore 因为我需要允许一个不受信任的证书（使用[http://abhinavasblog.blogspot.se/2011/07/allow-untrusted -certificate-for-https.html](http://abhinavasblog.blogspot.se/2011/07/allow-untrusted-certificate-for-https.html)）。我试过单独使用他们的 PersistentCookieStore 但他们使用的是 apache cookie 而我使用的是 java.net cookie ......

这是我尝试过的：

```
cManager = new CookieManager(null, CookiePolicy.ACCEPT_ALL);

private void setSharedPreferences(){
    List<HttpCookie> cookies = cManager.getCookieStore().getCookies();

    if (cookies.isEmpty()) {
        Log.d(tag,"no cookies received");
    } else {
        for (int i = 0; i < cookies.size(); i++) {
            if(cookies.get(i).getName().equals("rememberMe")) {
                editor.putString(
                        "rememberMe", cookies.get(i).toString());
                editor.commit();
            }
        }
    }
} 
```

当我在下一次应用启动时检索 cookie 时：

```
SharedPreferences sharedPreferences = context.getSharedPreferences("PREF_NAME", Context.MODE_PRIVATE);
editor = sharedPreferences.edit();
String rememberString = sharedPreferences.getString("rememberMe", "none");

if (!rememberString.equals("none")) {
    Log.d("rememberME är inte", "none!");
    URI uriToCookie = null;
    try {
        uriToCookie = new URI("https://myservername.com");
    } catch (URISyntaxException e) {
        e.printStackTrace();
    }
    List<HttpCookie> cookieList = HttpCookie.parse(rememberString);
    cManager.getCookieStore().add(uriToCookie, cookieList.get(0));
} 
```

cookie 已添加到 cManager 但服务器无法识别。我相信存在某种解析问题。有人得到解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T06:28:38.157

查看您的代码后，我的代码是错误的，但您根本没有存储整个 cookie：

```
for (int i = 0; i < cookies.size(); i++) {
           if(cookies.get(i).getName().equals("rememberMe")){
               editor.putString("rememberMe", cookies.get(i).toString());
               editor.commit();
           }
       } 
```

您`List`使用和循环获取 cookie 的长度`cookies.size()`并获取所有 cookie，但您提交保存键值“rememberMe”，而不是附加或存储在单独的键中。所以基本上，你只是一遍又一遍地覆盖你存储的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T07:19:43.667

我使用了这部分：

```
 cookies = ((AbstractHttpClient) httpClient).getCookieStore().getCookies();
        Log.v("Cookie:", cookies.toString());
        if (cookies.isEmpty()) {
        } else {
               for (int i = 0; i < cookies.size(); i++) {
                      if(cookies.get(i).getName().contentEquals("PHPSESSID")) {
                         PHPSESSID = cookies.get(i).getValue();
                      }
                   }
        } 
```

只需使用 contentEquals 获取域名，并让它与 urs 匹配并存储。哦，我使用 PHPSESSID 作为字符串，我将其转储到我的 sharedprefs 中以备后用

# solr - 词干和原词

> ID：12707657
> 
> 赞同：0
> 
> 时间：2012-10-03T11:37:05.387
> 
> 标签：solr, lucene, filterfactory

朋友们，

我目前使用 KStemmer 在我使用 solr 开发的应用程序中执行词干提取操作。发现当我们使用 kStemmer 时，它并没有使用 protwords.txt

```
<analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="stopwords.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.EnglishPossessiveFilterFactory"/>
    <filter class="solr.KStemFilterFactory" protected="protwords.txt"/>

  </analyzer> 
```

它没有将原词中的文字视为受保护的。这是 Kstem 的工作原理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:54:18.720

我检查了源代码，但看不到实现。顺便说一句，我检查了 Solr 3.6 的源代码。

它在[SnowballPorterFilterFactory](https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6/solr/core/src/java/org/apache/solr/analysis/SnowballPorterFilterFactory.java)中实现，但不在[KStemFilterFactory](https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6/solr/core/src/java/org/apache/solr/analysis/KStemFilterFactory.java)中实现。

# objective-c - 显示导航栏时 viewWillAppear 中的正确 self.view.frame

> ID：12707658
> 
> 赞同：0
> 
> 时间：2012-10-03T11:37:07.457
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationcontroller

我`navigationBar`在父视图控制器中显示：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO animated:YES];
    [super viewWillDisappear:animated];
} 
```

然后，在下一个视图控制器中

```
- (void)viewDidLoad
{
    /* ... */
    NSLog(@"%i, %g", self.navigationController.navigationBarHidden,
            self.view.frame.size.height);
}

- (void)viewWillAppear:(BOOL)animated
{
    /* ... */
    [super viewWillAppear:animated];
    NSLog(@"%i, %g", self.navigationController.navigationBarHidden, 
            self.view.frame.size.height);
}

- (void)viewWillLayoutSubviews
{
    NSLog(@"%i, %g", self.navigationController.navigationBarHidden, 
            self.view.frame.size.height);
}

- (void)viewDidAppear:(BOOL)animated
{
    NSLog(@"%i, %g", self.navigationController.navigationBarHidden, 
            self.view.frame.size.height);
} 
```

输出：

```
-[viewDidLoad]: 1, 416
-[viewWillAppear:]: 0, 460
-[viewWillLayoutSubviews]: 0, 416
-[viewDidAppear:]: 0, 416 
```

如您所见`viewWillAppear`，出错了`self.view.frame.size.height`。可以用`viewWillLayoutSubviews`，不过是iOS5引入的。是否可以在 viewWillAppear 中获得正确的帧高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:33:17.050

这是迄今为止我得到的最佳解决方案：

```
- (void)viewWillAppear:(BOOL)animated
{
    /* recalculate frame size */
    CGSize size = [UIScreen mainScreen].bounds.size;
    UIApplication *application = [UIApplication sharedApplication];
    if (UIInterfaceOrientationIsLandscape(application.statusBarOrientation))
        size = CGSizeMake(size.height, size.width);
    if (!application.statusBarHidden)
        size.height -= MIN(application.statusBarFrame.size.width,
                           application.statusBarFrame.size.height);

    CGRect frame = self.view.frame;
    frame.size.height = size.height -
                        self.navigationController.navigationBar.frame.size.height;
    self.view.frame = frame;

    /* ... */
} 
```

# php - 环境特定的内存泄漏

> ID：12707664
> 
> 赞同：0
> 
> 时间：2012-10-03T11:37:28.117
> 
> 标签：php, symfony, doctrine-orm

我在使用 Doctrine 2 /Symfony 的批处理脚本期间遇到了内存泄漏问题。

首先：我知道如何正确管理实体管理器以避免内存泄漏，并且由于某种原因，我的实时服务器能够运行以下代码而不会遇到此问题。但是，在我的本地开发环境（PHP 5.4.7）上运行以下命令会导致我的内存使用膨胀。

编辑：

是否有任何可能导致此问题的 php ini、apache、osx、mysql 配置，因为我现在完全不知所措。

请注意，这两个位置的代码是相同的 - 所以导致这种差异的唯一原因是我不知道的某种日志记录（x-debug 或 SQL 的自动日志记录）。

实时服务器在本地运行 PHP 5.4.6 vs 5.4.7 实时服务器在本地运行 centos 6，而在本地运行 OSX

我在 prod 模式下运行以下命令并关闭调试...

```
<?php

namespace Vendor\Bundle\MemoryTestBundle\Command;

use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;

class MemTestCommand extends ContainerAwareCommand
{
    protected function configure()
    {
        $this
            ->setName('mem:test')
            ->setDescription('Shows memory use ballooning out of control');
    }

    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $em = $this->getContainer()->get('doctrine.orm.entity_manager');

        $q = $em->createQuery('SELECT s FROM VendorMemoryTestBundle:SimpleEntity s');
        $iterableResult = $q->iterate();

        $i = 0;

        while (($row = $iterableResult->next()) !== false) {
            $i++;
            if ($i%50 == 0){
                echo sprintf('Memory usage: %01.0fKB.', memory_get_usage(true) / 1024) . PHP_EOL;
                $em->clear();
            }
            $em->detach($row[0]);
        }
    }
} 
```

输出

```
Memory usage: 72192KB.
Memory usage: 72448KB.
Memory usage: 72448KB.
Memory usage: 72704KB.
Memory usage: 73216KB.
Memory usage: 73472KB.
Memory usage: 73472KB.
Memory usage: 73728KB.
Memory usage: 73728KB.
Memory usage: 73984KB.
Memory usage: 73984KB.
Memory usage: 74240KB.
etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:27:22.283

如此处所述： [php/symfony/doctrine 内存泄漏？](https://stackoverflow.com/questions/2097744/php-symfony-doctrine-memory-leak)

在调试环境中，Symfony 记录所有查询。您必须手动设置选项“profiler:false”。

```
all:
  doctrine:
    class: sfDoctrineDatabase
    param:
      dsn: 'mysql:host=localhost;dbname=.......'
      username: .....
      password: .....
      profiler: false 
```

让我知道这是否有帮助。链接页面上也几乎没有其他建议；您可能想检查它们。

# java - 递归调用 AdjustmentListener - StackOverFlow 错误 Swing Java

> ID：12707669
> 
> 赞同：1
> 
> 时间：2012-10-03T11:37:47.383
> 
> 标签：java, swing, jtable, jscrollpane, jscrollbar

我必须同步表格的水平滚动。列将是相同的，唯一可以为列更改的属性是它们的大小。现在下面的代码显示了 3 个同步滚动的表格。但是当我更改任何表中任何一列的大小然后尝试滚动时，我得到一个 Stack Overflow 错误并且 gui 被扭曲。

我试图通过将其余表格的视口位置设置为左侧首先出现的列来实现它。如果列的大小不同，那么从为该列滚动的百分比我正在重建其他表的位置。

```
import java.awt.Color;
import java.awt.Point;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableColumnModel;

public class ScrollableJTable implements AdjustmentListener{ 
  JFrame frame = null;
  JPanel panel =  null;
  JTable table = null;
  JTableHeader header = null;
  JScrollPane pane = null;
  JTable table1 = null;
  JTableHeader header1 = null;
  JScrollPane pane1 = null;  
  JTable table2 = null;
  JTableHeader header2 = null;
  JScrollPane pane2 = null;  

    public static void main(String[] args) { 
        new ScrollableJTable(); 
    } 

    public ScrollableJTable() { 
        frame = new JFrame("Creating a Scrollable JTable!"); 
        panel = new JPanel(); 
        String data[][] = { 
            {"001", "vinod", "Bihar", "India", "Biology", "65", "First","001", "vinod", "Bihar", "India", "Biology", "65", "First"}, 
            {"002", "Raju", "ABC", "Kanada", "Geography", "58", "second","001", "vinod", "Bihar", "India", "Biology", "65", "First"}, 
            {"003", "Aman", "Delhi", "India", "computer", "98", "Dictontion","001", "vinod", "Bihar", "India", "Biology", "65", "First"}, 
            {"004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion","001", "vinod", "Bihar", "India", "Biology", "65", "First"}           
        }; 
        String col[] = {"Roll", "Name", "State", "country", "Math", "Marks", "Grade","Roll", "Name", "State", "country", "Math", "Marks", "Grade"}; 
        table = new JTable(data, col); 
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
        header = table.getTableHeader(); 
        header.setBackground(Color.yellow); 
        pane = new JScrollPane(table);
        pane.getHorizontalScrollBar().addAdjustmentListener(this);
        pane.setSize(100, 100);

        table1 = new JTable(data, col); 
        table1.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
        header1 = table1.getTableHeader(); 
        header1.setBackground(Color.yellow); 
        pane1 = new JScrollPane(table1);   
        pane1.getHorizontalScrollBar().addAdjustmentListener(this);
        pane1.setSize(100, 100);

        table2 = new JTable(data, col); 
        table2.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
        header2 = table2.getTableHeader(); 
        header2.setBackground(Color.yellow); 
        pane2 = new JScrollPane(table2);   
        pane2.getHorizontalScrollBar().addAdjustmentListener(this);
        pane2.setSize(100, 100);

        panel.setSize(500, 500);
        panel.add(pane);         
        panel.add(pane1);
        panel.add(pane2);
        frame.add(panel);
        frame.pack(); 
        frame.setSize(1000, 1000); 
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        frame.setVisible(true); 
    }

    public void adjustmentValueChanged(AdjustmentEvent e) {

      JScrollPane scrollPane = null, scroll = null;
      JScrollBar bar = null;
      int position[] = null;

      bar = (JScrollBar) e.getAdjustable();
      scroll = (JScrollPane) bar.getParent();
      position = this.getFirstVisibleColumnIndex(scroll);
      for (int j = 0; j < panel.getComponentCount(); j++) {
        scrollPane = (panel.getComponent(j) instanceof JScrollPane) ? (JScrollPane) panel.getComponent(j) : null;
        if (scrollPane != null && scrollPane != scroll) this.setFirstColumnVisiblePosition(position, scrollPane);
      }

    } 

    private int[] getFirstVisibleColumnIndex(JScrollPane scroll) {
      JTable table = null;
      TableColumnModel model = null;
      Object obj = null;
      int retval[] = null, index = -1, position = -1, relpos = -1;

      if (scroll == null) return null;
      obj = scroll.getViewport().getView();
      table = (obj instanceof JTable ? (JTable)obj : null);
      if (table == null) return null;
      model = table.getColumnModel();
      if (model == null) return null;

      position = scroll.getViewport().getViewPosition().x;
      for (int column = 0; index == -1 && column < model.getColumnCount(); column++) {
        position = position - model.getColumn(column).getWidth();
        if (position < 0) {
          index  = column;
          relpos = ((position + model.getColumn(column).getWidth()) * 100) / model.getColumn(column).getWidth();
        }
      }

      retval = new int[2];
      retval[0] = index;   
      retval[1] = relpos;  
      return retval;
    }

    private boolean setFirstColumnVisiblePosition(int position[], JScrollPane scroll) {
      JTable table = null;
      TableColumnModel model = null;
      Object obj = null;
      int pos = 0, width = 0;

      if (scroll == null || position == null) return false;
      obj = scroll.getViewport().getView();
      table = (obj instanceof JTable ? (JTable)obj : null);
      if (table == null) return false;
      model = table.getColumnModel();
      if (model == null) return false;
      if (position[0] == -1 || position [1] == -1) return false;

      for (int column = 0; column < position[0]; column++) {
        pos = pos + model.getColumn(column).getWidth();
      }
      width = model.getColumn(position[0]).getWidth(); 

      pos   = pos + ((position[1] * width) / 100);

      scroll.getViewport().setViewPosition(new Point(pos, scroll.getViewport().getViewPosition().y));
      return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:57:03.213

有一些重要的问题，如`AdjustmentListener`

仅用于最后硬编码`JScrollBar`（不能评论某些工作，最好知道所有 JScrollBars 的值并重新计算另一个 JScrollBars 的具体值）

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.JTableHeader;

public class ScrollableJTable {

    private JFrame frame = null;
    private JPanel panel = null;
    private JTable table = null;
    private JTableHeader header = null;
    private JScrollPane pane = null;
    private JTable table1 = null;
    private JTableHeader header1 = null;
    private JScrollPane pane1 = null;
    private JTable table2 = null;
    private JTableHeader header2 = null;
    private JScrollPane pane2 = null;

    public static void main(String[] args) {
        new ScrollableJTable();
    }

    public ScrollableJTable() {
        frame = new JFrame("Creating a Scrollable JTable!");
        panel = new JPanel();
        String data[][] = {
            {"001", "vinod", "Bihar", "India", "Biology", "65", "First", "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"002", "Raju", "ABC", "Kanada", "Geography", "58", "second", "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"003", "Aman", "Delhi", "India", "computer", "98", "Dictontion", "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion", "001", "vinod", "Bihar", "India", "Biology", "65", "First"}
        };
        String col[] = {"Roll", "Name", "State", "country", "Math", "Marks", "Grade", "Roll", "Name", "State", "country", "Math", "Marks", "Grade"};
        table = new JTable(data, col);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        header = table.getTableHeader();
        header.setBackground(Color.yellow);
        pane = new JScrollPane(table);
        pane.setPreferredSize(new Dimension(400, 200));
        table1 = new JTable(data, col);
        table1.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        header1 = table1.getTableHeader();
        header1.setBackground(Color.yellow);
        pane1 = new JScrollPane(table1);
        pane1.setPreferredSize(new Dimension(400, 200));
        table2 = new JTable(data, col);
        table2.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        header2 = table2.getTableHeader();
        header2.setBackground(Color.yellow);
        pane2 = new JScrollPane(table2);
        pane2.setPreferredSize(new Dimension(200, 200));
        panel.setSize(500, 500);
        panel.add(pane);
        panel.add(pane1);
        panel.add(pane2);
        frame.add(panel);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        final JScrollBar bar = pane.getHorizontalScrollBar();
        final JScrollBar bar1 = pane1.getHorizontalScrollBar();
        final JScrollBar bar2 = pane2.getHorizontalScrollBar();
        bar2.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                bar.setValue(e.getValue());
                bar1.setValue(e.getValue());
            }
        });
    }
} 
```

1.  不要使用`setSize`，大部分都`LayoutManagers`接受`PreferredSize`（在我的代码示例中硬编码）

2.  `FlowLayout`(built_in `LayoutManager`for `JPanel`) 只接受`PreferredSize`

3.  使用`JFrame#pack()`而不是`JFrame#setSize(int, int)`

4.  看看[InitialThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

5.  （事件每个人都可以告诉你）输出`AdjustmentListener`是在 EDT 上完成的，`invokeLater()`如果你必须在屏幕上计算`JScrollBars`不同大小的不同值，输出应该被延迟然后更好，而不会跳跃`JScrollPane`s 内容屏幕上

编辑

无论如何，我尝试的任何东西都不例外，只有在ColumnModel不等于RowModel的情况下，剩下的只是计算每个ScrollBars Models的比率

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.JTableHeader;

public class ScrollableJTable {

    private JFrame frame = null;
    private JPanel panel = null;
    private JTable table = null;
    private JTableHeader header = null;
    private JScrollPane pane = null;
    private JTable table1 = null;
    private JTableHeader header1 = null;
    private JScrollPane pane1 = null;
    private JTable table2 = null;
    private JTableHeader header2 = null;
    private JScrollPane pane2 = null;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                ScrollableJTable scrollableJTable = new ScrollableJTable();
            }
        });
    }

    public ScrollableJTable() {
        frame = new JFrame("Creating a Scrollable JTable!");
        panel = new JPanel();
        String data[][] = {
            {"001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"002", "Raju", "ABC", "Kanada", "Geography", "58", "second",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"003", "Aman", "Delhi", "India", "computer", "98", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"}
        };
        String data1[][] = {
            {"001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"002", "Raju", "ABC", "Kanada", "Geography", "58", "second",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "002", "Raju", "ABC", "Kanada", "Geography", "58", "second",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"003", "Aman", "Delhi", "India", "computer", "98", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "003", "Aman", "Delhi", "India", "computer", "98", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"}
        };
        String data2[][] = {
            {"001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"002", "Raju", "ABC", "Kanada", "Geography", "58", "second",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "002", "Raju", "ABC", "Kanada", "Geography", "58", "second",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "002", "Raju", "ABC", "Kanada", "Geography", "58", "second",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"003", "Aman", "Delhi", "India", "computer", "98", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "003", "Aman", "Delhi", "India", "computer", "98", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "003", "Aman", "Delhi", "India", "computer", "98", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"},
            {"004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First",
                "004", "Ranjan", "Bangloor", "India", "chemestry", "90", "Dictontion",
                "001", "vinod", "Bihar", "India", "Biology", "65", "First"}
        };
        String col[] = {"Roll", "Name", "State", "country", "Math", "Marks",
            "Grade", "Roll", "Name", "State", "country", "Math", "Marks", "Grade"};
        String col1[] = {"Roll", "Name", "State", "country", "Math", "Marks",
            "Grade", "Roll", "Name", "State", "country", "Math", "Marks", "Grade",
            "Roll", "Name", "State", "country", "Math", "Marks", "Grade",
            "Roll", "Name", "State", "country", "Math", "Marks", "Grade"};
        String col2[] = {"Roll", "Name", "State", "country", "Math", "Marks",
            "Grade", "Roll", "Name", "State", "country", "Math", "Marks", "Grade",
            "Roll", "Name", "State", "country", "Math", "Marks", "Grade",
            "Roll", "Name", "State", "country", "Math", "Marks", "Grade",
            "Roll", "Name", "State", "country", "Math", "Marks", "Grade",
            "Roll", "Name", "State", "country", "Math", "Marks", "Grade"};
        table = new JTable(data, col);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        header = table.getTableHeader();
        header.setBackground(Color.yellow);
        pane = new JScrollPane(table);
        pane.setPreferredSize(new Dimension(400, 200));
        table1 = new JTable(data1, col1);
        table1.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table1.setPreferredScrollableViewportSize(table1.getPreferredSize());
        header1 = table1.getTableHeader();
        header1.setBackground(Color.yellow);
        pane1 = new JScrollPane(table1);
        pane1.setPreferredSize(new Dimension(400, 200));
        table2 = new JTable(data2, col2);
        table2.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table2.setPreferredScrollableViewportSize(table2.getPreferredSize());
        header2 = table2.getTableHeader();
        header2.setBackground(Color.yellow);
        pane2 = new JScrollPane(table2);
        pane2.setPreferredSize(new Dimension(200, 200));
        panel.setSize(500, 500);
        panel.add(pane);
        panel.add(pane1);
        panel.add(pane2);
        frame.add(panel);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        final JScrollBar bar = pane.getHorizontalScrollBar();
        final JScrollBar bar1 = pane1.getHorizontalScrollBar();
        final JScrollBar bar2 = pane2.getHorizontalScrollBar();
        bar2.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(final AdjustmentEvent e) {
                if (e.getValueIsAdjusting()) {
                    final int i = bar.getMaximum();
                    if (e.getValue() > i) {
                        EventQueue.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                bar.setValue(i);
                            }
                        });
                    } else {
                        EventQueue.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                bar.setValue(e.getValue());
                            }
                        });
                    }
                    final int i1 = bar1.getMaximum();
                    if (e.getValue() > i1) {
                        EventQueue.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                bar1.setValue(i1);
                            }
                        });
                    } else {
                        EventQueue.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                bar1.setValue(e.getValue());
                            }
                        });
                    }
                }
            }
        });
    }
} 
```

# firefox - 如何在 Firefox 中发出跨域请求？

> ID：12707674
> 
> 赞同：0
> 
> 时间：2012-10-03T11:38:03.240
> 
> 标签：firefox, jquery, cross-domain

我正在使用以下 jQuery AJAX 调用来访问 SOAP Web 服务：

```
jQuery.ajax({    
    url: url,    
    type: "GET",             
    dataType: "jsonp text",
    crossDomain :true,
    data:"i="+'a'+"&j="+'b',
    processData: false, 
    success: OnSuccess,       
    error: OnError      
}); 
```

此代码在 IE 中运行良好，但在 Firefox 中得到空响应。在进一步搜索时，Firefox 似乎默认不允许跨域请求，或者它以不同的方式处理标头信息。

我的应用程序已打开`localhost:8081`，而我要使用的 WebService 已打开`localhost:8080`。有什么办法可以让 Firefox 发出跨域请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:25:07.677

是的，这个问题在我为 Firefox 安装 CORS 插件后得到解决。但是有没有其他方法，我可以使用 JQuery-ajax 代码设置参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T21:48:09.823

您需要发送与 OPTIONS 请求响应中相同的“Access-Control-####”标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:40:59.697

请参阅[https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

# c# - 如何在 ASP.NET MVC 3 Entity Framework 中使用 DBContext 映射存储过程

> ID：12707682
> 
> 赞同：6
> 
> 时间：2012-10-03T11:38:19.753
> 
> 标签：c#, asp.net-mvc-3, entity-framework, stored-procedures

我在这里为表映射..如何在这里映射存储过程？

```
public class AppDBContext : DbContext
{
    public DbSet<UserAccount> UserAccount { get; set; }
    public DbSet<GetUserAccounts> GetGetUserAccounts { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<UserAccount>().ToTable("UserAccount");
        modelBuilder.Entity<Customer>().ToTable("Customer");

        base.OnModelCreating(modelBuilder);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T11:44:28.560

Code First 不支持存储过程。

您可以使用以下方法在数据库初始化程序中执行脚本：

```
string sql = "CREATE PROCEDURE [MyProc]...";
context.Database.ExecuteSqlCommand(sql); 
```

您可以像这样从上下文中执行程序：

```
string command = "EXEC MyProc";
IEnumerable<T> results = context.Database.SqlQuery<T>(command, null); 
```

就个人而言，我将其包装成一个不错的 OO 模型。我有专门的带有强类型方法的 SP 类。这些方法装饰有一个属性，该属性告诉 DB 初始化程序从给定源创建给定名称的存储过程。强类型方法调用存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T11:56:01.637

我正在使用 DB Context 和 DB First Approach。创建存储过程后，进入VS中的模型页面，在模型页面的右键选项中选择从数据库中更新模型。然后在 Model Browser > Function Imports 中选择导入的 SP，如果我想更改它们的名称、返回值等。在所有这些之后，我可以使用与内部方法或其他实体类相同的 SP。例如，假设您有一个名为“ `sp_UserUpdate`”的 SP，此 SP 将`userName`考试`userAge`作为内部参数，并将`res`结果状态作为输出参数。在 VS 中导入 SP 后，您可以使用它，如下所示：

```
System.Data.Objects.ObjectParameter pRes = new System.Data.Objects.ObjectParameter("res", 0);
db.sp_UserUpdate(userName , userAge , pRes); 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:53:48.257

在**AppDBContext**中添加：

```
public virtual ObjectResult<ResultObject> MyStoredProcedure(string parameter)
        {
            ((IObjectContextAdapter)this).ObjectContext.MetadataWorkspace.LoadFromAssembly(typeof(ResultObject).Assembly);

            var Param = parameter!= null ?
                new ObjectParameter("Column", parameter) :
                new ObjectParameter("Column", typeof(string));

            return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction<ResultObject>("MyStoredProcedure", Param);
        } 
```

将此添加到**.edmx**文件中

```
<FunctionImport Name="MyStoredProcedure" ReturnType="Collection(AppDBContext.ResultObject)" >
      <Parameter Name="ZipCode" Mode="In" Type="String" />
      </FunctionImport> 
```

# java - 我们如何查看 JVM 过去的内存和 CPU 使用记录

> ID：12707687
> 
> 赞同：0
> 
> 时间：2012-10-03T11:38:33.763
> 
> 标签：java, jvm

我想为网站编写一个管理工具。我想在图表中显示网站的内存使用情况和 CPU 使用情况。我在某处读到 JVM 将这些数据写入 MAT 工具用来显示结果的转储文件中。所以我的问题是 JVM 将这个文件转储到哪里以及以什么速率转储。

因为我想在图表上显示过去 24 小时的使用情况。那么我们如何捕获这些数据。

寻求帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:16:20.053

目前 JVM 中没有任何东西可以生成您想要的数据流。您可以将 JVisualVM 之类的分析器连接到您的应用程序，但这也可能会大大减慢它的速度（也就是说，对于内存分析来说，它还不错......取决于您的应用程序的非功能性要求）。

还有两个选择：

## 使用 MBean 编写自己的代码

在 ScheduledExecutorService 中，运行一个通过[MBean 接口](http://docs.oracle.com/javase/1.5.0/docs/guide/management/overview.html)询问 JVM 的周期性进程。您可以生成可以在 MAT 中查看的堆转储。

## 使用 cron 和 jmap

您还可以使用[jmap](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)生成堆转储并在操作系统级别安排它以每隔一段时间运行一次。如果您不想或不能更改代码，这可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:40:30.890

AFAIK，如果你想要历史数据，你必须自己记录。当您使用 VisualVM 进行连接时，您总是从您连接的点开始。

MAT 工具可用于检查堆转储。它仅适用于内存快照，使用恕我直言很痛苦。

# ruby - # 未定义的方法“get” 从 Rspec - Controllers 运行以下代码后，我从该get方法中得到一个错误 it "assigns @MyItems" do my_item = mock(:mypay_items) my_ 问问题 问问题 2012-10-03T11:38:38.963 4547 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 从 Rspec - Controllers 运行以下代码后，我从该get方法中得到一个错误 it "assigns @MyItems" do my_item = mock(:mypay_items) my_item = mock( MyItem) MyItem.should_receive(:all).and_return(my) get 'index' assigns[:my_items].should eql(my_items) response.should be_success end 这会导致错误： undefined method `get' for # <rspec::core::examplegroup::nested_1:0x34b6ae0>否。外部系统进程正在监视应用程序，每当它确定发生此类问题时，它就会终止应用程序。当这种杀戮发生时，没有办法运行你自己的代码，也没有办法获得为什么会发生这种杀戮的信息。 然后，该系统进程会生成任意崩溃报告，这些报告会发送到 iTunes Connect。 rubyrspecgetcontrollers 4 3 回答 3 This answer is useful 6 您似乎没有正确地将您的规范声明为控制器规范，这导致 HTTP 请求方法（get、post等）不可用。确保在你的规范顶部，你有类似的东西： describe PostsController do ... end 替换PostsController为您的控制器的名称。如果这不起作用，请添加:type => :controller： describe PostsController, :type => :controller do ... end 另请参阅此答案：# <rspec::core::examplegroup::nested_1:0x00000106db51f8>的未定义方法 `get' 于 2012-10-03T12:32:43.540 回答 This answer is useful 4 如果您使用的是“spec/features”，您可能需要将以下内容添加到您的“spec_helper.rb”中 config.include RSpec::Rails::RequestExampleGroup, type: :feature 于 2013-02-20T15:46:44.740 回答 This answer is useful 2 我遇到了同样的问题，对我有用的解决方案是将 require 'rspec/rails' 添加到我的 spec_helper 文件中。我所有的控制器都设置正确，添加 :type => 控制器没有帮助。 于 2014-01-26T02:22:15.857 回答 Related 2 django - Lettuce and Django 1.55+ getting ImportError: cannot import name WSGIServerException 1 javascript - 使用 mootools Fx 缩放背景大小 2 c++ - 跳出无限循环 2 java - 无法让公共布尔 removeBorrower(String libraryNumber) 工作 2 dom - 对 GWT 小部件的未知引用阻止清除分离的 DOM 树 1 apache - htaccess 动态重写，SSL，非 WWW 1 protobuf-net - Protobuf-net：预编译字典的推荐方式 2 ios - 使用 AFNetworking、ios 上传图片 2 java - 使用 java 时，Sikuli 中的文本识别 (OCR) 已关闭 1 objective-c - 将图像添加到 UIImageView Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</rspec::core::examplegroup::nested_1:0x00000106db51f8></rspec::core::examplegroup::nested_1:0x34b6ae0>

> ID：12707688
> 
> 赞同：1
> 
> 时间：
> 
> 标签：ruby, rspec, get, controllers

从 Rspec - Controllers 运行以下代码后，我从该`get`方法中得到一个错误

```
it "assigns @MyItems" do
  my_item = mock(:mypay_items)
  my_item = mock( MyItem)
  MyItem.should_receive(:all).and_return(my)
  get 'index'
  assigns[:my_items].should eql(my_items)
  response.should be_success
end 
```

这会导致错误：

```
undefined method `get' for #<RSpec::Core::ExampleGroup::Nested_1:0x34b6ae0> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T12:32:43.540

您似乎没有正确地将您的规范声明为控制器规范，这导致 HTTP 请求方法（`get`、`post`等）不可用。确保在你的规范顶部，你有类似的东西：

```
describe PostsController do
   ...
end 
```

替换`PostsController`为您的控制器的名称。如果这不起作用，请添加`:type => :controller`：

```
describe PostsController, :type => :controller do
   ...
end 
```

另请参阅此答案：[#<RSpec::Core::ExampleGroup::Nested_1:0x00000106db51f8> 的未定义方法 `get'](https://stackoverflow.com/questions/6296235/undefined-method-get-for-rspeccoreexamplegroupnested-10x00000106db51f)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T15:46:44.740

如果您使用的是“spec/features”，您可能需要将以下内容添加到您的“spec_helper.rb”中

```
config.include RSpec::Rails::RequestExampleGroup, type: :feature 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-26T02:22:15.857

我遇到了同样的问题，对我有用的解决方案是将 require 'rspec/rails' 添加到我的 spec_helper 文件中。我所有的控制器都设置正确，添加 :type => 控制器没有帮助。

# asp.net-mvc-3 - ASP.NET MVC3：Ajax 回发不会从视图发布完整数据

> ID：12707697
> 
> 赞同：0
> 
> 时间：2012-10-03T11:38:52.490
> 
> 标签：asp.net-mvc-3, jquery

嗨，今天的问候！

### (1) 绑定到视图的视图模型*（MyViewModel.cs）*如下...

```
public class MyViewModel
{    
   public int ParentId { get; set; }  //property1       
   List<Item> ItemList {get; set;}   //property2

   public MyViewModel()   //Constructor
   {
     ItemList=new List<Item>();  //creating an empty list of items
   }
} 
```

### (2) 我正在通过 ajax 回*发（来自 MyView.cshtml 视图）*调用一个操作方法，如下所示。

```
function AddItem() {
    var form = $('#MyForm');
    var serializedform = form.serialize();
    $.ajax({
        type: 'POST',
        url: '@Url.Content("~/MyArea/MyController/AddItem")',
        cache: false,
        data: serializedform,
        success: function (html) {$('#MyForm').html(html);}
    });
} 
```

**下面的按钮单击将调用 ajax 回发...**

```
<input type="button" value="Add" class="Previousbtn" onclick="AddItem()" /> 
```

### (3) 我在*（MyController.cs 控制器）*中有一个动作方法，如下所示......

```
public ActionResult AddItem(MyViewModel ViewModel)
{
   ViewModel.ItemList.Add(new Item());
   return View("MyView", ViewModel);
} 
```

**现在的问题是，从动作返回后，视图模型中没有数据。但我能够获得第三次回发的数据！你能建议解决方案吗..**

> 视图中的完整表单代码如下...

```
 @model MyViewModel

    <script type="text/javascript" language="javascript">
        function AddItem() {
            var form = $('#MyForm');
            var serializedform = form.serialize();
            $.ajax({
                type: 'POST',
                url: '@Url.Content("~/MyArea/MyController/AddItem")',
                cache: false,
                data: serializedform,
                success: function (html) {
                    $('#MyForm').html(html);
                }
            });
        }

        function RemoveItem() {
            var form = $('#MyForm');
            var serializedform = form.serialize();
            $.ajax({
                type: 'POST',
                url: '@Url.Content("~/MyArea/MyController/RemoveItem")',
                cache: false,
                data: serializedform,
                success: function (html) {
                    $('#MyForm').html(html);
                }
            });
        }

     function SaveItems() {    
        var form = $('#MyForm');
        var serializedform = forModel.serialize();
        $.ajax({
            type: 'POST',
            url: '@Url.Content("~/MyArea/MyController/SaveItems")',
            cache: false,
            data: serializedform,
            success: function (html) {
                $('#MyForm').html(html);
            }
        });
    }

    </script>
    @using (Html.BeginForm("SaveItems", "MyController", FormMethod.Post, new { id = "MyForm" }))
    {    
        @Html.HiddenFor(m => Model.ParentId)
        <div>
             <input type="button" value="Save" onclick="SaveItems()" />
        </div>
        <div>
            <table>
                <tr>
                    <td style="width: 48%;">
                        <div style="height: 500px; width: 100%; overflow: auto">
                            <table>
                                <thead>
                                    <tr>
                                        <th style="width: 80%;">
                                            Item
                                        </th>
                                        <th style="width: 10%">
                                            Select
                                        </th>
                                    </tr>
                                </thead>
                                @for (int i = 0; i < Model.ItemList.Count; i++)
                                {
                                    @Html.HiddenFor(m => Model.ItemList[i].ItemId)                                
                                    @Html.HiddenFor(m => Model.ItemList[i].ItemName)                                
                                    <tr>
                                        @if (Model.ItemList[i].ItemId > 0)
                                        {

                                            <td style="width: 80%; background-color:gray;">
                                                @Html.DisplayFor(m => Model.ItemList[i].ItemName)
                                            </td>
                                            <td style="width: 10%; background-color:gray;">
                                                <img src="@Url.Content("~/Images/tick.png")" alt="Added"/>
                                                @Html.HiddenFor(m => Model.ItemList[i].IsSelected)
                                            </td>
                                        }
                                        else
                                        {                            
                                            <td style="width: 80%;">
                                                @Html.DisplayFor(m => Model.ItemList[i].ItemName)
                                            </td>
                                            <td style="width: 10%">
                                                @if ((Model.ItemList[i].IsSelected != null) && (Model.ItemList[i].IsSelected != false))
                                                {
                                                    <img src="@Url.Content("~/Images/tick.png")" alt="Added"/>                                            
                                                }
                                                else
                                                {
                                                    @Html.CheckBoxFor(m => Model.ItemList[i].IsSelected, new { @style = "cursor:pointer" })
                                                }
                                            </td>
                                        }
                                    </tr>
                                }
                            </table>
                        </div>
                    </td>
                    <td style="width: 4%; vertical-align: middle">
                        <input type="button" value="Add" onclick="AddItem()" />
                        <input type="button" value="Remove" onclick="RemoveItem()" />
                    </td>                
                </tr>
            </table>
        </div>    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:17:50.260

您必须返回 PartialViewResult 然后您可以执行类似的操作

```
$.post('/controller/GetMyPartial',function(html){
$('elem').html(html);});

    [HttpPost]
    public PartialViewResult GetMyPartial(string id
    {

        return PartialView('view.cshtml',Model);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:17:12.147

在我的项目中，我使用这样的 json 获取带有国家 ID 的状态数据

在我看来

```
 <script type="text/javascript">
        function cascadingdropdown() {           
            var countryID = $('#countryID').val();
            $.ajax({
                url: "/City/State",
                dataType: 'json',
                data: { countryId: countryID },
                success: function (data) {
                    alert(data);
                    $("#stateID").empty();
                    $("#stateID").append("<option value='0'>--Select State--</option>");
                    $.each(data, function (index, optiondata) {
                        alert(optiondata.StateName);
                        $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
                    });
                },
                error: function () {
                    alert('Faild To Retrieve states.');
                }

            });
        } 
    </script> 
```

在我的控制器中以 json 格式返回数据

```
public JsonResult State(int countryId)
        {           
            var stateList = CityRepository.GetList(countryId);
            return Json(stateList, JsonRequestBehavior.AllowGet);
        } 
```

我想这会对你有所帮助....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:32:07.290

我解决了以下问题...

**问题：**

> 我在这里显示的表单代码实际上是另一个视图页面的一部分，该页面也包含一个表单。所以，当我在运行时看到页面源时，有两个表单标签：一个在另一个里面，浏览器忽略了内部表单标签。

**解决方案：**

> 在父视图页面中，早些时候我使用 Html.Partial 通过将模型传递给它来呈现这个视图。
> 
> ```
> @using(Html.BeginForm())
> {
> ---
> ---
> @Html.Partial('/MyArea/Views/MyView',MyViewModel)
> ---
> ---
> } 
> ```
> 
> 但是现在，我添加了一个没有内容的 div。单击按钮时，我正在调用一个操作方法（通过 ajax 回发），然后将上面显示的视图页面*（**MyView.cshmtl**）*呈现到这个空的 div 中。
> 
> ```
>  @using(Html.BeginForm())
>     {
>     ---
>     ---
>     <div id="divMyView" style="display:none"></div>
>     ---
>     ---
>     } 
> ```
> 
> 该操作返回一个单独的视图，该视图加载到上述 div 中。由于它是具有自己的表单标签的单独视图，因此我能够在每次回发时发送和接收数据。

**谢谢大家对此的建议：）**

# mysql - 如何使用 GROUP BY 按 FIELD 排序

> ID：12707700
> 
> 赞同：2
> 
> 时间：2012-10-03T11:39:03.410
> 
> 标签：mysql

我有一个这样的查询：

```
SELECT
  t.type,
  SUM( t.external_account )
FROM
  u_contracts c,
  u_data u,
  u_transactions t
WHERE
  c.user_id = u.id
  AND t.contract_id = c.id
  AND t.nulled =0
  AND DATE (c.init_date) < DATE (u.dead)
  AND u.dead IS NOT NULL
  AND t.type != 'repay'
GROUP BY
  t.type; 
```

现在这给了我想要的结果，但现在我想添加 ORDER BY 到它，但是通过特定的字段名称，如：

```
ORDER BY FIELD( t.type, 'type1', 'type2', ... ) 
```

但我不能将它插入到查询中。当我这样尝试时：

```
SELECT
  t.type,
  SUM( t.external_account )
FROM
  u_contracts c,
  u_data u,
  u_transactions t
WHERE
  c.user_id = u.id
  AND t.contract_id = c.id
  AND t.nulled =0
  AND DATE (c.init_date) < DATE (u.dead)
  AND u.dead IS NOT NULL
  AND t.type != 'repay'
ORDER BY
  FIELD( t.type, 'initial', 'commision', 'overpay', 'penalty', 'penalty2' )
GROUP BY
  t.type; 
```

它给出了我的 sql 错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'GROUP BY t.type' at line 17 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T11:43:34.353

你只是有错误的顺序`group by`and `order by`;

```
...
ORDER BY
  FIELD( t.type, 'initial', 'commision', 'overpay', 'penalty', 'penalty2' )
GROUP BY
  t.type; 
```

应该：

```
...
GROUP BY
  t.type
ORDER BY
  FIELD( t.type, 'initial', 'commision', 'overpay', 'penalty', 'penalty2' ); 
```

# php - 在 drupal 模块中插入 PHP 代码

> ID：12707703
> 
> 赞同：1
> 
> 时间：2012-10-03T11:39:16.033
> 
> 标签：php, drupal-7

我的自定义 drupal 7 模块中有一个 iframe，它显示来自远程 url 的数据，如下所示：-

```
$element[$delta]['#markup'] = '<iframe class="page_flipper" src="someURL"></iframe>'; 
```

它运行良好，但我想在这个 iframe 中显示另一个脚本/程序的输出。该程序结合了 HTML、CSS、JavaScript 和 PHP 的代码。换句话说，我想将该程序集成到上述 iframe 中。谁能告诉我该怎么做？

我尝试使用 iframe 的 src 属性中的相对路径来指向程序，如下所示：-

```
$element[$delta]['#markup'] = '<iframe class="page_flipper" src="mydir/index.php"></iframe>'; 
```

但它没有工作，drupal 在 iframe 中显示此错误`"The requested page "/<site_name>/node/myFlip/index.php" could not be found.`任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:08:19.257

下面的代码片段应该可以解决问题吗？

```
// Get the path to the module..
$module_path = drupal_get_path('module', 'MY_MODULE');

// Prepend with the Drupal root..
$path = DRUPAL_ROOT . '/' . $module_path . '/mydir/index.php'; 

// Use..
$element[$delta]['#markup'] = 
  "<iframe class='page_flipper' src='$path'></iframe>"; 
```

我觉得将带有 PHP 脚本的文件夹放在 Drupal 安装的根目录中更安全。然后你可以通过以下方式访问它：

```
global $base_url;
$path = $base_url . '/ext/index.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:04:04.580

You can use Drupals drupal_get_path() and url() functions to build an absolute url to the file.

```
$iframe_url = url(drupal_get_path('module','MYMODULE').'/mydir/index.php',array('absolute'=>true));

$element[$delta]['#markup'] = "<iframe class='page_flipper' src='$iframe_url'></iframe>"; 
```

# asp.net - 默认读者配额设置

> ID：12707706
> 
> 赞同：0
> 
> 时间：2012-10-03T11:39:21.073
> 
> 标签：asp.net, wcf, web-services

我目前正在开发一个 Web 应用程序。我也在使用 WCF Web 服务。我根据需要在 WCF 的 web.config 中自定义了阅读器的配额设置，例如 maxNameTableCharCount,maxStringContentLength。

我的问题是，每当我在我的应用程序中添加服务引用时，它都会添加 WCF 的默认设置。我只想知道我们如何覆盖这些默认设置。但是我知道我可以在我的应用程序 web.config 中再次更改这些设置，但我想自动更改它。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:42:57.870

添加服务引用时，它将创建您所知道的默认设置。无法自动调整这些。

您应该只需要添加一次设置，然后您就可以自由地进行相应的调整。

如果您需要更新服务，只需这样做，而不是删除并再次添加。

# php - 检查用户是否有权访问 zend 框架中的登录页面

> ID：12707708
> 
> 赞同：1
> 
> 时间：2012-10-03T11:39:22.077
> 
> 标签：php, zend-framework

在 Zend 框架中，如果用户未登录，有什么更好的方法来限制用户访问登录后页面。没有 Zend，我将编写一个代码来检查
用户 ID 是否在会话中设置，并将该代码放在公共文件中（在所有
登录后页面上使用）。

在 Zend Framework 中，我可以使用 zend_auth 的 hasIdentity 方法进行检查，但我
不想在所有操作中进行检查。我正在考虑的另一种方法是创建一个
插件并将其挂钩到 routeshutdown 事件，然后在获取控制器和操作
名称之后从请求对象我可以决定是否重定向用户。

请提出一些在zend框架中实现它的好方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:01:51.650

您通常会编写一个控制器插件并将其添加到前端控制器。通过这种方式，您可以拦截所需的调度和路由过程，并发出重定向到适当的页面。

```
class Your_Controller_Plugin_Authcheck extends Zend_Controller_Plugin_Abstract
{
} 
```

在引导类中：

```
protected function _initFrontControllerPlugins()
{
    $this->bootstrap(array('AuthcheckPlugin', 'FrontController'));

    $front = $this->getResource('FrontController');
    $front->registerPlugin($this->getResource('AuthcheckPlugin'));
}

protected function _initAuthcheckPlugin()
{
    $plugin = new Your_Controller_Plugin_Authcheck();

    return $plugin;
} 
```

顺便说一句：这是 Zend Framework 1 - 可能在 2 中工作相同，但我相信如果你已经使用它，你可能会在那里改变一些东西。

# android - 全选并清除所有选择复选框

> ID：12707711
> 
> 赞同：0
> 
> 时间：2012-10-03T11:39:33.103
> 
> 标签：android, android-listview

我正在实现通知功能，例如android中的默认消息应用程序。现在，我正在通过添加复选框来删除多条消息，在该复选框中，我使用一个通用复选框来选择列表中的所有消息。但我无法检查 CustomAdpter 的 getview 中的 listview 复选框。

```
class customListAdpter extends BaseAdapter {
    private Context ctx;
    CheckBox checkBox;
    TextView sender, message;

    customListAdpter(Context context) {
        this.ctx = context;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return new NotifiCation().senderlist.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(final int pos, View v, ViewGroup arg2) {
        // TODO Auto-generated method stub
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.checkboxlist, null);
            checkBox = (CheckBox) v.findViewById(R.id.btn_chck);
            sender = (TextView) v.findViewById(R.id.text_senderno);
            message = (TextView) v.findViewById(R.id.text_msg);
        }
        sender.setText("" + new NotifiCation().senderlist.toArray()[pos]);
        message.setText("" + new NotifiCation().msglist.toArray()[pos]);

        checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                // TODO Auto-generated method stub
                if (buttonView.isChecked()) {

                }

            }

        });
        return v;
    }
} 
```

这是我的主要活动。在这里，我有主复选框。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.delete_notifications);
    db = new DB(NotificationsDelete.this);
    notifications = (ListView) findViewById(R.id.list_with_ckbox);
    selectAll = (CheckBox) findViewById(R.id.btn_checkall);
    done = (Button) findViewById(R.id.done_notification_delete);
    notifications.setAdapter(new customListAdpter(con));
    selectAll.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton chkbox, boolean arg1) {
            if (chkbox.isChecked() == true) {
                for (int i = 0; i < new NotifiCation().senderlist.size(); i++) {
                    //notifications.setItemChecked(i, true);
                    customListAdpter adpter=new  customListAdpter(con);
                    adpter.checkBox.setChecked(true);
                }
            } else {
                // new customListAdpter(con).checkBox.setChecked(true);
            }

        }
    });
    done.setOnClickListener(this);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:57:12.990

在处理 selectAll 复选框字段的 onCheckedChanged() 后尝试调用 notifyDataSetChanged()。

# c# - 将 C# linq 代码转换为 VB。[已编辑]

> ID：12707712
> 
> 赞同：0
> 
> 时间：2012-10-03T11:39:34.760
> 
> 标签：c#, vb.net, linq, entity-framework

我想将我的一些 EntityFramework C# 代码移植到 VB.NET 中。我正在尝试不同的在线代码转换器，但他们无法为我解决这个问题。

我有这两个功能。

```
public List<T> Find<T>(Func<T, bool> predicate) where T : class
    {
        var objectSet = db.CreateObjectSet<T>();
        return objectSet.Where<T>(predicate).ToList();
    }

    public void Delete<T>(Func<T, bool> predicate) where T : class
    {
        var objectSet = db.CreateObjectSet<T>();
        IEnumerable<T> records = from x in objectSet.Where<T>(predicate) select x;

        foreach (T record in records)
        {
            objectSet.DeleteObject(record);
        }
    } 
```

现在转换器告诉我：

```
Public Function Find(Of T As Class)(predicate As Func(Of T, Boolean)) As List(Of T)
    Dim objectSet = db.CreateObjectSet(Of T)()
    Return objectSet.Where(Of T)(predicate).ToList()
End Function

Public Sub Delete(Of T As Class)(predicate As Func(Of T, Boolean))
    Dim objectSet = db.CreateObjectSet(Of T)()
    Dim records As IEnumerable(Of T) = From x In objectSet.Where(Of T)(predicate) Select x

    For Each record As T In records
        objectSet.DeleteObject(record)
    Next
End Sub 
```

但我得到两个错误，两者`objectSet.Where<T>(predicate)`都是：

> 重载解析失败，因为没有可访问的“Where”接受此数量的类型参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:02:43.500

只需从对 的调用中删除 type 参数`Where`，无论如何都没有必要。其次，决定一种风格：要么使用 LINQ 要么使用函数，而不是两者兼而有之。

那是，

*   要么写：

    ```
    Dim records As IEnumerable(Of T) = From x In objectSet Where predicate(x) Select x 
    ```

    …但在 VB 中，您可以省略`Select x`：

    ```
    Dim records As IEnumerable(Of T) = From x In objectSet Where predicate(x) 
    ```

*   或写：

    ```
    Dim records As IEnumerable(Of T) = objectSet.Where(predicate) 
    ```

对`Find`. 简单地写：

```
Return objectSet.Where(predicate).ToList() 
```

# java - java不能关闭框架吗？

> ID：12707716
> 
> 赞同：1
> 
> 时间：2012-10-03T11:39:42.047
> 
> 标签：java, swing, awt, frame, windowlistener

大家好，我正在用java编写一个小程序，这是我第一次尝试任何带有界面/图片的东西。

它为我制作了框架，但是当我单击关闭按钮 X 时，它并没有关闭它只是把它当作什么都没发生......有什么想法吗？

```
class Graph extends Canvas{

    public Graph(){
        setSize(200, 200);
        setBackground(Color.white);
    }

    public static void main(String[] args){

        Graph gr = new Graph();  

        Frame aFrame = new Frame();
        aFrame.setSize(300, 300);       
        aFrame.add(gr);       
        aFrame.setVisible(true);

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T11:44:05.520

那是 java.awt.Frame 吗？我认为您需要为此显式添加处理程序：

```
frame.addWindowListener(new WindowAdapter(){
  public void windowClosing(WindowEvent we){
    System.exit(0);
  }
} 
```

我为此使用[了这个](http://www.roseindia.net/java/example/java/awt/AwtCloseButtonEvent.shtml)来源。

如果它是摆动它会像`jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:48:41.100

添加`aFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T20:26:51.913

```
class Graph extends Canvas{

public Graph(){
    setSize(200, 200);
    setBackground(Color.white);
    addWindowListener( 
              new java.awt.event.WindowAdapter() {
                public void windowClosing( java.awt.event.WindowEvent e ) {
                  System.out.println( "Closing window!" );
                  dispose() ;
                  System.exit( 0 );
                }
                }
            );
}

public static void main(String[] args){

    Graph gr = new Graph();  

    Frame aFrame = new Frame();
    aFrame.setSize(300, 300);       
    aFrame.add(gr);       
    aFrame.setVisible(true);

} 
```

# ruby-on-rails - 主题大礼包铁路引擎

> ID：12707719
> 
> 赞同：1
> 
> 时间：2012-10-03T11:39:51.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spree

我正在使用 spree 电子商务引擎进行 Rails 项目。

我想编辑搜索栏上方的链接，但在部分 _nav_bar.html.erb 中找不到它们

我也找不到添加这些字段的 Deface 覆盖或 js 代码。在 _nav_bar 部分我有

```
<nav id="top-nav-bar" class="columns omega ten">
  <ul id="nav-bar" class="inline" data-hook>
        <h2>This happens before</h2>
    <li id="search-bar" data-hook>
        <h2>This happens after</h2>
      <%= render :partial => 'spree/shared/search' %>
    </li>
  </ul>
</nav> 
```

它导致代码：

```
<nav id="top-nav-bar" class="columns omega ten"><ul id="nav-bar" class="inline" data-hook>
<h2>This happens before</h2>
  <li><a href="/account">My Account</a></li>
  <li><a href="/user/logout">Logout</a></li>
<li id="search-bar" data-hook>
        <h2>This happens after</h2>
     ............
</nav> 
```

这两个链接是从哪里来的？我该如何编辑它们？为什么他们不简单地持有在这个部分？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T06:29:00.000

它是`spree_auth_devise`扩展的覆盖。请参阅[auth_shared_login_bar.rb](https://github.com/spree/spree_auth_devise/blob/master/app/overrides/auth_shared_login_bar.rb)它在其中插入链接的位置`li#search-bar`

# hadoop - 运行没有输出文件的 Hadoop 作业

> ID：12707726
> 
> 赞同：9
> 
> 时间：2012-10-03T11:40:12.950
> 
> 标签：hadoop

是否可以在不指定输出文件的情况下运行 hadoop 作业？当我尝试运行 hadoop 作业时，没有指定的输出文件抛出异常。任何人都可以使用Java给出任何程序。

我正在将reduce处理的数据写入非关系数据库，因此我不再需要它写入HDFS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:13:50.277

不幸的是，你不能真正做到这一点。编写输出是框架的一部分。当你在框架之外工作时，你基本上只需要处理后果。

您可以使用[NullOutputFormat](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/lib/output/NullOutputFormat.html)，它不会将任何数据写入 HDFS。不过，我认为它仍然会创建文件夹。您总是可以让 Hadoop 创建文件夹，然后[将其删除](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/fs/FileSystem.html#delete%28org.apache.hadoop.fs.Path,%20boolean%29)。

# jquery - 如何使用 Jquery 设置验证？

> ID：12707727
> 
> 赞同：0
> 
> 时间：2012-10-03T11:40:12.337
> 
> 标签：jquery, jquery-ui, jquery-validate

当我在那个小注册页面中打开对话框时。在注册按钮单击事件上，我调用 Ajax 函数提交数据。所以如何设置需要验证下面的代码在对话框中

上次保存的输入字段

在 Anchor 标签 id saveData 上调用 Ajax 并保存数据...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:40:44.013

[Mobilevikings](https://mobilevikings.com/nl/)有一个很好的使用 JQuery 的验证系统，你应该检查一下 :)

编辑：您应该查看**form-validation.js**文件的源代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:42:15.373

尝试编写验证代码或使用[**jQuery 验证插件**](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

# c# - 如何在 WPF RichTextBox 中使用字符串索引突出显示文本？

> ID：12707738
> 
> 赞同：2
> 
> 时间：2012-10-03T11:40:43.313
> 
> 标签：c#, wpf, formatting, wpf-controls, richtextbox

我正在开发一个自定义 RichTextBox，它突出显示输入的某些单词。 *（更像是突出显示某些字符串，因为我打算突出显示不被空格分隔的字符串）*

我通过将文本加载到内存中来搜索字符串，并逐个查找字符串列表，然后对它们应用格式。

问题是，当应用格式设置时，我从纯文本表示中获得的索引不一定指向 RichTextBox 内容中的相同位置。

（第一个格式是完美的。任何后续格式都开始向左滑动。我认为这是因为格式将某些元素添加到文档中，这使我的索引不正确。）

示例伪代码如下。

```
// get the current text
var text = new TextRange(Document.ContentStart, Document.ContentEnd).Text;

// loop through and highlight
foreach (string entry in WhatToHighlightCollection)
{
    var currentText = text;
    var nextOccurance = currentText.IndexOf(suggestion); //This index is Unreliable !!!

    while (nextOccurance != -1)
    {
        // Get the offset from start. (There appears to be 2 characters in the 
        // beginning. I assume this is document and paragraph start tags ?? 
        // So add 2 to it.)
        int offsetFromStart = (text.Length) - (currentText.Length) + 2;

        var startPointer = Document.ContentStart.
             GetPositionAtOffset(offsetFromStart + nextOccurance, LogicalDirection.Forward);

        var endPointer = startPointer.GetPositionAtOffset(suggestion.Length, LogicalDirection.Forward);

        var textRange = new TextRange(startPointer, endPointer);
        textRange.ApplyPropertyValue(TextElement.BackgroundProperty, new SolidColorBrush(Colors.Yellow));
        textRange.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Bold);
        textRange.ApplyPropertyValue(TextElement.FontFamilyProperty, new FontFamily("Segoe UI"));

        // Go to the next occurance.
        currentText = currentText.Substring(nextOccurance + suggestion.Length);
        nextOccurance = currentText.IndexOf(suggestion);
    }
} 
```

**如何将字符串索引映射到富文本框内容？**

**注意：**目前我并不担心它的性能，尽管总是欢迎任何建议，因为目前我在每个 TextChanged 事件上运行它以突出显示“作为用户类型”并且它变得有点迟钝。

# emacs - 涉及正斜杠的 Emacs 键绑定

> ID：12707739
> 
> 赞同：4
> 
> 时间：2012-10-03T11:40:45.427
> 
> 标签：emacs, elisp

在 emacs 中，我想`\C-/`从撤消重新映射到我自己的函数，注释当前区域或当前行（如果没有选择区域）。当我尝试这样的事情时：

```
(global-set-key "\C-/" 'comment-or-uncomment-region-or-line) 
```

我收到一个错误

```
error: Invalid modifier in string 
```

我正在尝试不同的键绑定方式，不幸的是没有成功，谷歌搜索`\C-/`也不是很有帮助。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T11:45:07.160

```
(global-set-key (kbd "C-/") 'comment-or-uncomment-region-or-line) 
```

# debugging - 如何使用 Nvidia 显卡调试 OpenCL 内核代码？

> ID：12707741
> 
> 赞同：1
> 
> 时间：2012-10-03T11:40:46.180
> 
> 标签：debugging, opencl, nvidia

如何使用 Nvidia 显卡调试 OpenCL 内核代码？建议我一些调试器是否已升级为支持 opencl 和 nvidia 显卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:50:38.837

你想要什么：[Nvidia Visual Profiler](http://developer.nvidia.com/cuda/nvidia-visual-profiler) （感谢 google）

# java - SWT 中的 java.awt.Robot 等效项

> ID：12707742
> 
> 赞同：2
> 
> 时间：2012-10-03T11:40:49.783
> 
> 标签：java, swt, swtbot

我正在为应用程序编写 SWTBot 测试，其中包含一些用 Delphi 编写的组件。自然，我无法通过 SWTBot 处理这些组件。我找到了一种解决方法，我只是将焦点设置在包含 delphi 组件的视图或编辑器上。然后我`java.awt.Robot`用来生成允许我与组件交互的事件。

我只是想知道，SWT 中是否有任何工具可以做同样的事情`java.awt.Robot`？我还没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:07:43.050

nope, there is nothing like it. More I think about it, more stupid it looks to me to duplicate common code to be framework specific

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T12:00:39.577

您可以通过使用`Display.post`. 这是在 2004 年实施的。[https://bugs.eclipse.org/bugs/show_bug.cgi?id=15025](https://bugs.eclipse.org/bugs/show_bug.cgi?id=15025)

# c# - String.Format 重新格式化替换

> ID：12707744
> 
> 赞同：0
> 
> 时间：2012-10-03T11:40:58.573
> 
> 标签：c#, visual-studio-2010, visual-studio

假设我`String.Format("{0} {1} at {2} for {3}-{4} ... and finally {7}", var1, var2, ...)`现在必须在 String.Format 的开头添加一个额外的变量，并且出于维护和可读性的原因，我想避免`String.Format("{8} {0} {1} at {2} ...", ...)`。

基本上我想避免我最终得到看起来像`String.Format("{5} {3} {0} {7} {1} {4} {2}", var1, var2, ...`. 在 6 次更改请求之后你可能会得到一些东西，你必须非常仔细地查看每个变量将被替换的位置。

有什么东西可以**自动**为我重新订购替换件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:54:58.840

这种构造将允许您链接任意数量的变量（它相当通用，对于您的特定示例，它需要一些调整）：

```
string var1 = "a", var2 = "b";
string result = string.Empty;

foreach(var a in new object[] {var1, var2 /*, var3, varN */})
{
    result = string.Format("{1} {0}", a, result);
} 
```

无论如何，我只是`string.Format`以您想要避免的方式使用以最少的努力获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:47:01.060

尝试这个：

```
var firstString = string.Format("{0} {1} at {2} for {3}-{4} ... and finally {7}",var1, var2, ...);
var result = yourNewString + firstString; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:47:02.387

你可以这样做：

```
var var1 = String.Empty;
String.Format("{0} {1} {2} at {3} ...", var1, var2, ...); 
```

然后，如果您需要在开始时添加一些内容，您只需设置`var1`值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:43:48.860

使用以下...

```
var Result=variable+String.Format("{0} {1} at {2} for {3}-{4} ... and finally {7}",var1, var2, ...) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-11T15:53:32.240

由于似乎没有任何东西可以保持`string.Format`整洁（即维护者更容易）：

完全避免此问题的另一种方法是使用命名字符串格式。例子：`"{parent} yelled at {child}".FormatWith(new { parent = "I", child = "Mark" })`

[示例实现](https://stackoverflow.com/a/159126/540352)（由 Phil Haack 编写）

此外，使用 Roslyn，我们可能会在某个时候获得[String Interpolation](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2312991-string-interpolations-in-c)，它可以解决这个问题，而无需“自定义书面构造”。

# android - 使用 Android SDK 访问 Google 帐户（邮件日历）

> ID：12707750
> 
> 赞同：0
> 
> 时间：2012-10-03T11:41:29.753
> 
> 标签：android, sdk, oauth

我对 Android 开发完全陌生，想知道以下是否可行，以及处理它的最佳方法：

*   用户登录 Google 帐户 - 未存储在手机上（OAuth??）
*   应用程序显示他们的 GMail 电子邮件 - 不需要发送，只接收/阅读
*   应用程序可以访问他们的日历并显示事件 - 再次只读

这就是谷歌方面的全部内容！我只使用过 Facebook 身份验证 - 所以不确定 Google 的工作原理。我似乎无法在网上找到任何明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:20:53.347

是的，这一切皆有可能。

*   使用[Google Play 服务](http://android-developers.blogspot.de/2012/09/google-play-services-and-oauth-identity.html)获取 Google API 的 OAuth 2*访问令牌*。对于 GMail IMAP 和只读日历 API 访问，您需要说明以下范围：

    ```
    https://mail.google.com/
    https://www.googleapis.com/auth/calendar.readonly 
    ```

*   使用您的 OAuth 2*访问令牌*使用一些适用于 Android 的 IMAP 库（例如[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html)，查看[此 Android JavaMail 教程](https://namheo.wordpress.com/2010/04/26/smtps-imaps-in-java-android/)和 Google 的[使用 OAuth2 和 JavaMail](https://code.google.com/p/google-mail-oauth2-tools/wiki/JavaSampleCode)的示例）。

*   有关如何访问用户日历的信息，请参阅[日历 API 文档。](https://developers.google.com/google-apps/calendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:51:48.350

您可以注册一个使用 OAuth 登录 google 的 Web 应用程序。 [https://developers.google.com/accounts/docs/OAuth](https://developers.google.com/accounts/docs/OAuth)

然后您可以使用 GMail API 使用 OAuth 令牌访问用户的电子邮件 [https://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

然后对于日历，您还可以使用 OAuth 访问 Google Calendar API。 [https://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

您可以创建一个 Web 应用程序并使用您的 android 应用程序通过您创建的 API 访问您的 Web 服务器数据库。使用这些数据，您可以为您的 android 用户提供一个不错的 GUI 并提供用户交互。

另一种方法是只使用 android 客户端而不使用 Jan Gerlinger 提到的 Web 应用程序。

您还可以在此处查看 k-9 邮件应用程序的源代码以获取想法： [https ://github.com/k9mail/k-9](https://github.com/k9mail/k-9)

它是一个功能齐全的开源 android 电子邮件客户端，也支持许多协议，包括 IMAP、SMTP 和 Microsoft Exchange 帐户。您可以深入研究源代码以了解他们是如何做到的。

# python - 来自自定义表单的 web.py post 变量

> ID：12707753
> 
> 赞同：0
> 
> 时间：2012-10-03T11:41:43.157
> 
> 标签：python, web.py

我是 Python Web 框架的新手，我选择 web.py 作为起点。

我按照 web.py 网站上的教程，发现了 urls、POST 和 GET 的工作原理，但我对如何使用模板和模板引擎感到困惑。

我有一个自定义 html 表单，想在我的应用程序中使用它。我应该使用“模板引擎”还是应该使用 web.py 内置表单库？

谁能给我一个如何将自定义表单值发布到 web.py 应用程序的示例？（使用没有内置库的表单。）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:39:28.777

You can use web.py form library to render only parts of the form in your templates, see [http://webpy.org/cookbook/form_fields](http://webpy.org/cookbook/form_fields)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:44:10.577

Andrey Kuzmin 的回答与“自定义表单”不兼容。他链接的教程是通过 web.py 生成的表单您可以获取自定义表单的表单变量

```
 def POST(self):
        user_data = web.input()
        return user_data.YOUR_CUSTOM_HTML_FORM_VAR 
```

# web-applications - 如何使用领域清除凭据？

> ID：12707755
> 
> 赞同：0
> 
> 时间：2012-10-03T11:41:52.683
> 
> 标签：web-applications, servlets, web, alfresco, realm

我真的很想知道**realm**的用法。 [http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)说

> 现有浏览器会保留身份验证信息，直到关闭选项卡或浏览器或用户清除历史记录。 [1] HTTP 没有为服务器提供一种方法来指导客户端丢弃这些缓存的凭据。这意味着服务器无法在不关闭浏览器或使用 URL 中的会话的情况下“注销”用户的有效方法。

在我的编码中

```
res.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
res.setHeader("WWW-Authenticate", "Basic realm=\"Alfresco\""); 
```

因此该站点请求基于领域的身份验证。一旦它请求，用户名和密码就会保存在某个地方，直到浏览器缓存或浏览历史被删除，这些信息才会被保存。

我的问题是**有没有办法使用 servlet 清除服务器中的此类凭据？** 任何帮助是极大的赞赏！！！

参考： [REALM 术语在安全性中的确切用途是什么？](https://stackoverflow.com/questions/8468075/what-is-the-exact-uses-of-realm-term-in-security)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:39:43.597

服务器永远不会对浏览器进行这种级别的控制。处理帐户详细信息泄漏的唯一安全方法是立即使帐户无效或锁定，并使与其相关的所有用户会话到期。Web 服务器能够完成所有这些操作。

从[规格](https://www.rfc-editor.org/rfc/rfc1945#section-11)：

```
 The realm attribute (case-insensitive) is required for all
   authentication schemes which issue a challenge. The realm value
   (case-sensitive), in combination with the canonical root URL of the
   server being accessed, defines the protection space 
```

这基本上意味着一旦您成功验证了一次，浏览器就可以安全地假设同一根 URL 下的所有资源都可以使用相同的凭据进行访问。在 HTTP Basic 凭据上设置客户端超时没有标准方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:39:51.953

您可能想看看这个答案：[How to force Jetty to ask for credentials with BASIC authentication after invalidating session?](https://stackoverflow.com/questions/2180206/how-to-force-jetty-to-ask-for-credentials-with-basic-authentication-after-invali)

基本身份验证对我来说似乎没用。

如果可以，您想切换到表单身份验证。

# c# - 获取交叉点的索引

> ID：12707763
> 
> 赞同：0
> 
> 时间：2012-10-03T11:42:08.410
> 
> 标签：c#, linq, intersection, set-intersection

我有个问题。我正在使用下面的代码找到一个交叉点：

```
Envelope[][] extents = new Envelope[tilesCountX][tilesCountY];

// some code here to set "extents" values

var intersectedTiles =
    extents
    .SelectMany(es => es)
    .Where(e => EnvIntersects(e, bounds))
    .ToList();

private static bool EnvIntersects(Envelope e1, Envelope e2)
{
    return e1.MinX >= e2.MinX && e1.MaxX <= e2.MaxX && e1.MinY >= e2.MinY && e1.MaxY <= e2.MaxY;
} 
```

它有效，但我想获取相交范围的索引。

**例如**
， 如果`extents[2][7]`是一个相交元素，我想得到`2`and `7`。

是否可以通过修改我的代码？

**[编辑]**

`bounds`是一个内部`Envelope`有`MinX`, `MinY`,`MaxX`和`MaxY`属性的。

```
Envelope bounds = new Envelope();
bounds.MinX = some_value_1;
bounds.MaxX = some_value_2;
bounds.MinY = some_value_3;
bounds.MaxY = some_value_4; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:55:34.823

试试这个：

```
var intersectedTiles =
extents
.SelectMany((es,i) => es.Select((x,j)=>new{I=i,J=j,Element = x}))
.Where(e => EnvIntersects(e.Element, bounds))
.ToList(); 
```

对于 intersectedTiles 中的所有元素，这是正确的：

```
intersectedTiles[x].Element == extents[intersectedTiles[x].I][intersectedTiles[x].J] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T12:06:05.597

我认为这也可以给你你想要的：

```
var intersectedIndices =
    from x in Enumerable.Range(0, tilesCountX)
    from y in Enumerable.Range(0, tilesCountY)
    where EnvIntersects(extents[x, y], bounds)
    select new { x, y }; 
```

# android - 有没有办法创建一个控制实例来控制我的应用程序的多个活动？

> ID：12707767
> 
> 赞同：2
> 
> 时间：2012-10-03T11:42:26.470
> 
> 标签：android, architecture

我在一个有几个开发人员的项目上工作。我们开发一个相当大的应用程序。每个开发人员都有几个活动，可以看作是整个主应用程序的子应用程序。

我确实意识到，这可能不是最好的设计，但它存在，我们必须以某种方式处理它。

现在的主要问题是，我们需要一个 master，它始终处于活动状态并检查 I/O 等，并且可以为每个子应用程序/活动提供状态更改。诸如“我们刚刚失去了互联网连接”之类的东西。

现在，那个master是一个单例，它首先由启动器活动实例化，每个活动/子应用程序都可以通过传递适当的接口来注册，具体取决于活动想要接收的更新。

这是有效的，但感觉不对，因为单例需要上下文来访问系统资源以确定系统状态，如互联网或 gps。如果单例被操作系统杀死，那么简单的“getInstance”不会有多大好处，因为单例需要以某种方式获取上下文。我已经阅读了有关扩展 Application 类并在那里创建静态成员上下文的信息，但是这个变量必须是 volatile 并且如果整个应用程序处于某种重启后崩溃/终止状态，它可能返回 null。感觉不安全。

此外，主人也应该有可能以某种方式打开用户对话框以向用户显示警告等。这些警告在整个应用程序中看起来应该是相同的，开发人员不必担心它何时或为何突然弹出。现在，这些消息显示为覆盖所有内容的自定义祝酒词。当然，它们需要上下文，如果应用程序即将关闭，则可能会出现问题。

总而言之，这就是我们所处的混乱局面，我正在寻找解决方案。

那么我如何创建一个安全的主对象或活动（甚至是服务？！），它可以将信息传递给不同的活动并发布警告等（甚至可能有能力关闭活动或至少命令它们在不需要的情况下关闭自己注册一个 can_close 接口）。

它应该是安全的，如果在崩溃后 android 仅重新启动处于活动状态的活动，它会以某种方式设法也重新启动或至少具有/提供与以前相同的信息。

欢迎每个想法，但无法对应用程序进行全面检修（缺乏时间和人力）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:24:55.907

这里有一些想法：

1.  `Service`为您需要做的所有监控创建一个组件。如果我理解正确，则仅当某些活动正在运行时才需要此服务。所以你可以把它变成一种`bound` 服务。让所有活动`bind`在启动时与此服务绑定，并在关闭时解除绑定。该服务将在第一个活动绑定时启动。
2.  为您的所有活动创建一个基类。您可以在此处编写所有常用代码。例如，绑定到主服务并与主服务交换消息的代码。此类还可以包含用于通知用户等的实用方法。因此所有活动都将使用相同的方法进行通知。
3.  对于用户通知，您可以使用`Status Bar Notification`或创建一个`Fragment`可以捕获、聚合和显示通知的工具。您可以在基本 Activity 类中实现一个通用菜单项来显示/隐藏此 Fragment。如果您使用状态栏通知，请确保为您的应用使用一个聚合通知。否则，不同的活动可能会在状态栏中造成混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:49:28.577

我想一种解决方案是创建一个作为主服务的服务。您必须让它独立于不同的活动运行（但如果不再使用应用程序，请不要忘记管理自己以整齐地关闭它，您不想杀死您的客户电池）。但是，服务不能对接口起作用，因此您可能需要向活动广播消息以命令它们打开对话框。

最后的想法：祝酒词还可以，但阻止界面的弹出窗口非常糟糕，尤其是在移动设备上。

# java - 不确定我是否应该搜索或排序我的哈希图

> ID：12707769
> 
> 赞同：1
> 
> 时间：2012-10-03T11:42:30.970
> 
> 标签：java, search, sorting, hashmap

嗨，我有一个年龄列表，我需要找到 30 岁以上的人，有没有可能在 hashmap 中搜索？（请注意，我可能还需要寻找其他年龄段的人，所以为了代码的简单性，我不想使用两个不同的列表）

**简而言之：我的目标是找到一种在 HashMap 中搜索具有特定值的元素的方法**

样品清单是

```
element1 40
element2 4
element3 66
element4 5 
```

我想找到值大于 40 和值大于或等于 66 的那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:46:55.717

我建议您使用[NavigableMap](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html)（实现为 TreeSet）。

如果您基于列表实现索引，则此实现非常快 - O(log(N))，而 O(N)。

编辑。例子：

```
class PersonsAgeIndex {

    private NavigableMap<Integer, List<Person>> ageToPersons = 
                                    new TreeMap<Integer, List<Person>>();

    public void addPerson( Person p ) {
        List<Person> personsWithSameAge = this.ageToPersons.get( p.age );

        if ( personsWithSameAge == null ) {
            personsWithSameAge = new LinkedList<Person>();
            this.ageToPersons.put( p.age, personsWithSameAge );
        }

        personsWithSameAge.add( p );
    }

    public List<Person> personsWithAgeLessThan( int age ) {
        List<Person> persons = new LinkedList<Person>();

        // persons with less age
        for (List<Person> tmp : this.ageToPersons.headMap( age ).values()) {
            persons.addAll( tmp );
        }

        return persons;
    }

    public List<Person> personsWithAgeInInterval( int minAge, int maxAge ) {
        List<Person> persons = new LinkedList<Person>();

        // persons with age, which: (minAge <= age <= maxAge)
        for (List<Person> tmp : this.ageToPersons.subMap( minAge, true, maxAge, true ).values()) {
            persons.addAll( tmp );
        }

        return persons;
    }

}

class Person {
    public final int age;

    public Person(int age) {
        this.age = age;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:56:34.297

尝试这个：

```
 private List<Person> getPeople(Map<?, Person> peopleMap, int filterAge) {
    List<Person> returnList = new ArrayList<Person>(peopleMap.values().size());
    for (Person p : peopleMap.values()) {
        if (p.getAge() > filterAge)
        returnList.add(p);
    }
    return returnList;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:45:41.713

`HashMap`迭代顺序是“不可预测的”（也就是说，如果你排序，而不是插入键，当你以后尝试迭代键时，顺序是不一样的）。

改用 a `LinkedHashMap`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:45:50.870

好问题......不幸的是，地图需要一个非常具体的密钥。您上面的解决方案是唯一真正的方法。

或者，您可以维护两个列表，并将 30 岁以上的列表存储到第二个列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T11:46:24.880

您不能对 a 进行排序`HashMap`，它没有顺序。如果您想要订购`HashMap`，请使用`LinkedHashMap`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T11:51:13.577

```
HashMap<String,String> hmap = new HashMap<String,String>();
SortedSet<String> keys = new TreeSet<String>(hmap.keySet()); 
```

这将为您提供一个排序集，您可以将其作为一个子集。

keys.subSet(from,to) 例如 keys.subSet(30,100)

您将拥有一套包含所有必需元素的集合。

# c - 在 chroot 模式下从二进制调用脚本，不工作

> ID：12707770
> 
> 赞同：0
> 
> 时间：2012-10-03T11:42:41.167
> 
> 标签：c, linux, ubuntu, snmp, net-snmp

名为 =program.c 的程序的一部分

```
int memoryPercent()
{
    int memoryPercent=0;
    FILE *pipe1 = NULL;

    pipe1=popen("/home/jatin/scripts/memoryPercent.sh","r");

    if(!pipe1)
    {
        snmp_log(LOG_ERR,"popen failed in temp(),errno:%d\n",errno);
        return -1;
    }

    if( fscanf(pipe1,"%d",&memoryPercent) != 1) 
    {
        snmp_log(LOG_ERR,"fscanf failed in temp fun(),errno:\n");
        return -2;
    }

    pclose(pipe1);
    return memoryPercent;
} 
```

上面是我在这个位置的调用代码 /home/jatin/scripts/memoryPercent.sh 给出了一个脚本，它返回一个 INTEGER 值。

在 UBUNTU 12.04 中，当我编译并执行此代码时，它运行良好。

但在我的 VM-WARE

我已经在 /var/snmp3 位置复制了所有必要的依赖项，并使用 CHROOT 执行了这个二进制文件，语法是

```
/usr/sbin/chroot /var/snmp3/ /usr/local/bin/program 
```

它仅显示值“-1”！谁能告诉我我错过了什么？

`/var/snmp3/home/jatin/scripts/memoryPercent.sh` 该脚本在 775 模式和775 模式下位于同一位置`/home/jatin/scripts/memoryPercent.sh`....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:37:33.037

尝试从 chrooted shell 手动运行脚本。

我认为您缺少 memoryPercent.sh 使用的外壳。您是否已将 shell 复制到 chrooted 环境？

# asp.net - ELMAH 捕获和记录的错误和异常列表

> ID：12707772
> 
> 赞同：0
> 
> 时间：2012-10-03T11:42:44.750
> 
> 标签：asp.net, elmah

我试图找到一个可以捕获和记录的**列表**，但我不能。我想知道是否捕获了诸如成员**登录**或登录**失败之**类的东西，**请求**错误之类的，和...。`errors``exceptions`**`ELMAH`****`ELMAH`********`401``403``404`******

 ******提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:45:42.813

默认情况下，ELMAH 将捕获**所有未处理的异常**。

您还可以向 ELMAH 发送您希望的其他异常（在您的异常处理程序中），但除非异常被抛出并且**未处理**，否则 ELMAH 不会记录它。******

# jquery - 无法使用 http://www.google.com 的 XMLHttpRequest.getAllResponseHeaders() 读取响应标头

> ID：12707782
> 
> 赞同：0
> 
> 时间：2012-10-03T11:43:35.337
> 
> 标签：jquery, httpresponse, cors

我在标头中使用了 CORS（跨源资源共享）以允许客户端连接到其他 Web 资源。我尝试连接到[https://www.google.com](https://www.google.com)，但无法获取任何标题信息。我需要从标题中读取日期。

这是我从[http://saltybeagle.com/2009/09/cross-origin-resource-sharing-demo/使用的代码](http://saltybeagle.com/2009/09/cross-origin-resource-sharing-demo/)

```
<%
 response.addHeader("Access-Control-Allow-Origin", "http://www.autocom.dk  http://ucommbieber.unl.edu/CORS/cors.php");

 response.addHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
 response.addHeader("Access-Control-Allow-Headers" , "X-Requested-With");
 response.addHeader("Access-Control-Max-Age", "86400");
 %>

<html>
<head>
<script type="text/javascript"       src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

function getCORS(url, data, callback, type) {
try {
    // Try using jQuery to get data
    jQuery.get(url, data, callback, type);
    // Tr
    jQuery.get(url, data, function(data, textStatus, jqxhr){
      alert("success" + data + " text status:" + textStatus + "  ---" +  jqxhr.getAllResponseHeaders());
    });
} catch(e) {
    // jQuery get() failed, try IE8 CORS, or use the proxy
    if (jQuery.browser.msie && window.XDomainRequest) {
        // Use Microsoft XDR
        var xdr = new XDomainRequest();
        xdr.open("get", url);
        xdr.onload = function() {
            callback(handleXDROnload(this, type), 'success', this);
        };
        xdr.onreadystatechange() = function()
        {
          alert(xdr.getAllResponseHeaders());
        }
        xdr.send();
    } else {
        try {
            // Ancient browser, use our proxy
            var mycallback = function() {
                var textstatus = 'error';
                var data = 'error';
                if ((this.readyState == 4)
                    && (this.status == '200')) {
                    textstatus = 'success';
                    data = this.responseText;
                }
                callback(data, textstatus);
            };
            // proxy_xmlhttp is a separate script you'll have to set up
            request = new proxy_xmlhttp();
            request.open('GET', url, true);
            request.onreadystatechange = mycallback;
            request.send();
        } catch(e) {
            // Could not fetch using the proxy
        }
     }
   }
 }

/**
 * Because the XDomainRequest object in IE does not handle response XML,
 * this function acts as an intermediary and will attempt to parse the XML and
 * return a DOM document.
 *
 * @param XDomainRequest xdr  The XDomainRequest object
 * @param string         type The type of data to return
 *
 * @return mixed
 */

function handleXDROnload(xdr, type)
{
var responseText = xdr.responseText, dataType = type || "";

if (dataType.toLowerCase() == "xml"
    && typeof responseText == "string") {
    // If expected data type is xml, we need to convert it from a
    // string to an XML DOM object
    var doc;
    try {
        if (window.ActiveXObject) {
            doc = new ActiveXObject('Microsoft.XMLDOM');
            doc.async = 'false';
            doc.loadXML(responseText);
        } else {
            var parser = new DOMParser();
            doc = parser.parseFromString(responseText, 'text/xml');
        }
        return doc;
    } catch(e) {
        // ERROR parsing XML for conversion, just return the responseText
    }
  }
  return responseText;
 } 

function testGet()
{
  //getCORS('http://ucommbieber.unl.edu/CORS/cors.php', null, function(data){alert(data);});
  getCORS('http://www.google.com', null, function(data){alert(data);});
}

</script>
</head>
<body>
<h1>CORS Examples</h1>

<p>Test GET
      This page retrieves content from another server, using CORS<br />
   <a href="#" onclick="testGet(); return false;">Get content from another server</a>
</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:18:03.490

CORS 是您需要在请求的**服务器**端而不是客户端添加的配置。在这里，您必须在 Google 端添加 HTTP 标头。

# javascript - 如何将函数应用于所有具有border-radius属性的元素

> ID：12707788
> 
> 赞同：1
> 
> 时间：2012-10-03T11:43:52.717
> 
> 标签：javascript, jquery, css

这个想法是在 IE 7/8 中制作一些边框半径效果，所以我决定使用[jquery.corner.js](http://jquery.malsup.com/corner/)库。为了使其更通用，我想编写一些脚本，将`corner()`函数应用于具有border-radius 属性的页面中的所有元素。

例如，对于这个元素

```
.someElement
{
    border-radius:10px;
} 
```

函数必须执行以下操作

```
 $(".someElement").corner("10px"); 
```

问题是**我想对所有元素应用圆角，包括动态添加的元素和在某些操作（悬停、单击等）中继承边框半径属性的元素。**这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:47:25.437

您需要声明一个函数，将您的 css 应用于每次更改。要检测 css 样式更改，请参见此处：

[事件检测何时使用 Jquery 更改 css 属性](https://stackoverflow.com/questions/1397251/event-detect-when-css-property-changed-using-jquery)

然后，您需要在样式更改和 dom 树更改时调用该函数（每次将某些内容附加到页面中时）...。

我建议您使用特定的类来应用边界半径 css。这样，您可以通过 jQuery 类选择器选择圆角元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:55:10.400

您应该有一个通用 css 类，用于所有具有圆角边框的元素，然后在选择器中使用该类。

您必须在文档就绪处理程序中执行此操作。这当然只会对当前存在的元素应用圆角边框。如果要覆盖使用 ajax 加载的元素，可以执行以下操作：

```
$(document).ajaxSuccess(function(e, xhr, settings)
{
    $(xhr.responseText).find(".class-that-applies-rounded-borders").corner("10px");
}); 
```

# jquery - jQuery 在尝试在搜索表单中添加字段时抛出 TypeError

> ID：12707793
> 
> 赞同：1
> 
> 时间：2012-10-03T11:44:09.687
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, ransack

我目前在我的 Ruby on Rails 3.0 应用程序中集成了搜索 gem Ransack，基本搜索工作正常，所有 ruby​​ 代码工作正常。但我在 Ryan Bates 的 Railscast for Ransack (http://railscasts.com/episodes/370-ransack) 的帮助下创建了一个用于动态添加或删除更多搜索字段的表单。

这是我的链接：

```
<%= link_to_add_fields "Add Conditions", f, :condition %> 
```

这是我的部分领域：

```
<div class="field">
  <%= f.attribute_fields do |a| %>
    <%= a.attribute_select %>
  <% end %>
  <%= f.predicate_select :only => [:eq, :not_eq, :matches, :does_not_match, :lt, :lteq, :gt, :gteq, :cont, :not_cont, :start, :not_start, :end, :not_end, :true, :false, :present, :blank], :compounds => false %>
  <%= f.value_fields do |v| %>
    <%= v.text_field :value %>
  <% end %>
  <%= link_to "remove", '#', class: "remove_fields" %>
</div> 
```

我的应用程序助手：

```
def link_to_add_fields(name, f, type)
  new_object = f.object.send "build_#{type}"
  id = "new_#{type}"
  fields = f.send("#{type}_fields", new_object, child_index: id) do |builder|
    render(type.to_s + "_fields", f: builder)
  end
  link_to(name, '#', class: "add_fields", data: {id: id, fields: fields.gsub("\n", "")})
end 
```

最后是 jQuery 代码：

```
(function(){

  jQuery(function($) {
    $('form').on('click', '.remove_fields', function(event) {
      $(this).closest('.field').remove();
      return event.preventDefault();
    });
    return $('form').on('click', '.add_fields', function(event) {
      var regexp, time;
      time = new Date().getTime();
      regexp = new RegExp($(this).data('id'), 'g');
      $(this).before($(this).data('fields').replace(regexp, time));
      return event.preventDefault();
    });
  });

}).call(this); 
```

虽然删除链接可以正常工作，但添加字段不起作用。相反，Firebug 向我抛出以下消息：

```
TypeError: $(this).data("fields") is undefined 
```

我已经尝试搜索错误并解决它，但老实说，我不知道为什么会发生这种情况，并且非常感谢一些帮助。

# php - 从数据库查询填充复选框

> ID：12707796
> 
> 赞同：0
> 
> 时间：2012-10-03T11:44:19.767
> 
> 标签：php, mysql

我正在尝试检查一个复选框，如果数据库中该字段的值为 1。

我有：

```
<?php 

$selectedSPK=$_POST['SPKSelect'];
$assigned = $_POST['Sales_Exec'];
$date = $_POST['DateSelect'];

if ($selectedSPK) {
    $Priorityquery = "SELECT  Priority FROM Data WHERE SPKCustNo  = '$selectedSPK' ";
    $Priorityresult = mysql_query($Priorityquery);
    $row = mysql_fetch_array($Priorityresult);
    $checked = $Priorityresult['Priority'];
}
?>
<input name="PriorityCheckBox" type="checkbox" value="1" 
<?php if ($checked == 1) echo ' checked'; ?> /> 
```

但没有得到任何快乐，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:48:49.067

试试这个：

您没有使用查询返回的行...

```
<?php 
    $selectedSPK=$_POST['SPKSelect'];
    $assigned = $_POST['Sales_Exec'];
    $date = $_POST['DateSelect'];
    if ($selectedSPK)
    {
        $Priorityquery = "SELECT  Priority FROM Data WHERE SPKCustNo  = '$selectedSPK' ";
        $Priorityresult = mysql_query($Priorityquery);
        $row = mysql_fetch_array($Priorityresult);
        //$checked = $Priorityresult['Priority']; // <------ this is where you went wrong...
        $checked = $row['Priority']; // <------ this will fix where u went wrong!
    }
    ?>
    <input name="PriorityCheckBox" type="checkbox" value="1" <?php if ($checked == 1){echo ' checked'; }?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:51:10.830

你应该使用

```
<?php if ($checked == 1){echo "checked='checked'"; } 
```

并且

```
$checked = $Priorityresult['Priority']; 
```

到

```
 $checked = $row['Priority']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T11:52:46.197

我认为你有一个错误......试试这个

```
<input name="PriorityCheckBox" type="checkbox" value="1" <?php if ($row['Priority'] == 1) echo ' checked'; ?> /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:48:03.883

试试这个方法

```
<input name="PriorityCheckBox" type="checkbox" value="1" <?php if ($checked == 1) echo "checked='checked'"; ?> /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T11:48:10.247

改变

```
<?php if ($checked == 1) echo ' checked'; ?> 
```

到

```
<?php if ($checked == 1) echo ' checked="checked"'; ?> 
```

并`$checked = $Priorityresult['Priority'];`_`$checked = $row['Priority'];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T11:49:29.857

它应该是`checked="checked"`

```
<?php if ($checked == 1) echo "checked='checked'"; ?> 
```

# prolog - 如何编写谓词 minmax(L, X, Y)？

> ID：12707798
> 
> 赞同：2
> 
> 时间：2012-10-03T11:44:28.080
> 
> 标签：prolog

如何编写谓词 minmax(L, X, Y) 来找出整数 L 列表中 X 的最小值和 Y 的最大值。

例子：

```
?- minmax([1, -10, 1, 0, 7, 7], X, Y).
X = -10, Y = 7. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-05T07:30:38.960

让我们定义`list_minnum_maxnum/3`如下[`list_minnum/2`](https://stackoverflow.com/a/31722246/4609915)：

```
list_minnum_maxnum([E|Es],Min,Max) :-
   V is E,
   list_minnum0_minnum_maxnum0_maxnum(Es,V,Min,V,Max).

list_minnum0_minnum_maxnum0_maxnum([]    ,Min ,Min,Max ,Max).
list_minnum0_minnum_maxnum0_maxnum([E|Es],Min0,Min,Max0,Max) :-
   V    is E,
   Min1 is min(Min0,V),
   Max1 is max(Max0,V),
   list_minnum0_minnum_maxnum0_maxnum(Es,Min1,Min,Max1,Max). 
```

OP 给出的示例查询：

```
?- list_minnum_maxnum([1,-10,1,0,7,7], Min,Max).
Min = -10,
Max = 7. 
```

请注意，此实现`list_minnum_maxnum/3`适用于各种数字。

```
?- list_minnum_maxnum([1,-10,1,0,7.2,7,7], Min,Max).
Min = -10,
Max = 7.2. 
```

* * *

如果您只关心处理整数，请**使用[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")！**

```
:- use_module(library(clpfd)). 
```

我们定义`list_zmin_zmax/3`如下：

```
list_zmin_zmax([E|Es],Min,Max) :-
   V #= E,
   list_zmin0_zmin_zmax0_zmax(Es,V,Min,V,Max).

list_zmin0_zmin_zmax0_zmax([]    ,Min ,Min,Max ,Max).
list_zmin0_zmin_zmax0_zmax([E|Es],Min0,Min,Max0,Max) :-
   V    #= E,
   Min1 #= min(Min0,V),
   Max1 #= max(Max0,V),
   list_zmin0_zmin_zmax0_zmax(Es,Min1,Min,Max1,Max). 
```

与以前相同的示例用法：

```
?- list_zmin_zmax([1,-10,1,0,7,7], Min,Max).
Min = -10,
Max = 7. 
```

好的！对非整数的支持如何？

```
?- list_zmin_zmax([1,-10,1,0,7.2,7,7], Min,Max).
ERROR: Domain error: `clpfd_expression' expected, found `7.2' 
```

我们期望得到一个错误，我们得到一个错误......

请注意，感谢[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")，我们也可以运行更一般的查询！

```
?- list_zmin_zmax([A,B], Min,Max).
A #>= Min, Max #>= A, Min #= min(A,B),
B #>= Min, Max #>= B, Max #= max(A,B). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T17:12:49.373

如前所述，您需要遍历列表，不断*累积*最小值和最大值。因此，假设您必须从头开始编写此代码，您需要做的第一件事是将问题*分解*为简单的步骤：

1.  您需要一种方法来比较两个对象并确定哪个更低或更高。
2.  您需要一种迭代循环并跟踪所看到的最小值和最大值的方法。

这导致 a`min/3`和 `max/3`，因此：

```
min(X,X,X).
min(X,Y,X) :- X < Y .
min(X,Y,Y) :- X > Y .

max(X,X,X).
max(X,Y,X) :- X > Y .
max(X,Y,Y) :- X < Y . 
```

出于您的目的，如果您愿意，甚至可以将它们组合成一个谓词：

```
rank( X , X , X , X ) .
rank( X , Y , X , Y ) :- X < Y .
rank( X , Y , Y , X ) :- X > Y . 
```

Prolog 中一个非常典型的编程*模式*是有一个简单的公共 API 谓词，它调用一个私有的“工人”谓词来完成实际的工作。通常，worker 谓词会携带临时的“累加器”变量来简化工作。您的公共谓词可能如下所示：

```
minmax([X|Xs],Min,Max) :- minmax_scan( Xs , X , X , Min , Max ). 
```

在这里，您的公共 API 谓词接受一个非空列表，将工作谓词使用的最小/最大累加器播种到列表的头部，然后使用列表的尾部调用工作谓词。

您的工作者谓词可能如下所示：

```
% if the list is empty, we've solved the puzzle, right?
minmax_scan( [] , Min , Max , Min , Max ) .
% if the list is non-empty, we need to compare its head to
% the current value for min/max to determine the new values for min/max
% (which might be the same), and then recurse down on the tail of the list
minmax_scan( [X|Xs] , CurrMin , CurrMax , Min , Max ) :-
  min( X , CurrMin , NextMin ) ,
  max( X , CurrMax , NextMax ) ,
  minmax_scan( Xs , NextMin , NextMax , Min , Max )
  . 
```

简单的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T13:53:31.393

从列表中取出第一个值，然后检查列表中的每个其他元素，选择较低/较高的值作为临时最小值/最大值。

当在列表末尾时，您同时拥有...

```
minmax([First|Rest], Min, Max) :-
   minmax(Rest, First, First, Min, Max).

minmax([], Min, Max, Min, Max).
minmax([Value|Ns], MinCurr, MaxCurr, Min, Max) :-
   .... 
   minmax(Ns, MinNext, MaxNext, Min, Max). 
```

我会让你在递归调用之前编写测试（即填充点！）

*编辑*只是指出库（[聚合](http://www.swi-prolog.org/pldoc/man?section=aggregate)），在几个 Prolog 系统中可用：

```
1 ?- [user].
minmax(L, X, Y) :- aggregate( (min(E), max(E)), member(E, L), (X, Y) ).
|: 
true.

2 ?- minmax([1, -10, 1, 0, 7, 7], X, Y).
X = -10,
Y = 7. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T16:54:27.927

这是一些令人费解且有点复杂的事情。

```
is_minmax(A,B-D,C-E) :-
    D is min(...),
    E is max(...) .

pair(A,B,A-B).

minmax(L,MIN,MAX) :- 
    L=[A|_], length(L,N), N2 is N-1,
    length(L2,N2), append(L2,[MIN],L22), 
    length(L3,N2), append(L3,[MAX],L33),
    maplist(pair, [A|L2], L22, KL2),
    maplist(pair, [A|L3], L33, KL3),
    maplist(is_minmax, L, KL2, KL3). 
```

（在 SWI Prolog 中工作）。试着找出用什么来代替点`...`。

# windows-8 - Windows 8 Live Tiles 徽章图像/文本

> ID：12707806
> 
> 赞同：1
> 
> 时间：2012-10-03T11:44:35.663
> 
> 标签：windows-8, microsoft-metro, winrt-xaml, live-tile

我一直在关注[这个](http://blogs.msdn.com/b/windowsappdev/archive/2012/04/16/creating-a-great-tile-experience-part-1.aspx)例子，现在有一个工作的活瓷砖。但是，我的图块在图块的左下角显示有一个小十字。在示例中，这显示为一辆小卡车。这一套怎么样？

我看不到它在文章中指定的位置。起初，我认为这可能是应用程序清单中指定的“徽章”图标，但那里没有显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:27:46.743

这些磁贴更新中的图像取自清单 (Package.appxmanifest) 中的“小徽标”30x30 像素图像。

平铺品牌，也可以是应用程序的名称（如果您愿意，也可以不使用）。此处的一些设计/使用指南 -[磁贴和徽章（Windows 应用商店应用程序）的指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx)。

默认功能通过“小徽标”、“显示名称”/“短名称”和“显示名称”设置进行设置，但您可以在磁贴更新中指定[绑定](http://msdn.microsoft.com/en-us/library/windows/apps/br212854.aspx)权限（例如，隐藏某些磁贴更新的徽标/名称） .

# git - 使用 git grep 时是否可以默认忽略某些目录？

> ID：12707808
> 
> 赞同：2
> 
> 时间：2012-10-03T11:44:38.173
> 
> 标签：git, grep

在 Django 中使用 south 我们有类似的东西：

```
/app
  /migrations
    .. migration files. 
```

由于迁移文件代表历史结构而不是当前存在的结构，因此我不想每次都搜索它们。有什么方法可以在运行时默认排除它们`git grep`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:00:40.487

这是一个糟糕的 hack，但它可能对您有用：`app/migrations/.gitattributes`使用以下内容创建

```
* binary 
```

将所有迁移标记为二进制文件，然后用于`git grep -I`跳过二进制文件。

如果您还想忽略差异中的迁移，可以通过将内容更改`.gitattributes`为

```
* binary -diff 
```

有关于添加受尊重的属性的[讨论](http://git.661346.n2.nabble.com/git-grep-while-excluding-files-in-a-blacklist-td7195648.html)`grep`，因此有一天可能会有适当的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:03:48.700

我有一个别名`git gr`，`git grep`可以启用颜色和不区分大小写。您可以这样做并添加排除项。而且打字速度更快！

否则，大部分情况下都无法更改 Git 命令的默认行为，因为它们直接在内部使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:46:56.043

我认为没有`git grep`单独使用命令的解决方案。

我能想到的一种解决方法是将要忽略的文件/文件夹添加到文件中，`.gitignore`然后执行以下命令：

```
git grep --exclude-standard 
```

# android - 从服务中使用 CalendarBuilder (ical4j)

> ID：12707810
> 
> 赞同：0
> 
> 时间：2012-10-03T11:44:49.840
> 
> 标签：android, service, thread-safety, ical4j

CalendarBuilder（来自 ical4j）不是线程安全的。至少看起来是这样。有什么方法可以从服务中使用它吗？我的 android 应用程序中有一项服务需要运行此方法。由于某些限制，我不能只使用相同的活动。我必须使用该服务。任何建议将不胜感激。

> java.lang.ExceptionInInitializerError 在 net.fortuna.ical4j.model.DefaultTimeZoneRegistryFactory.createRegistry(DefaultTimeZoneRegistryFactory.java:48) 在 net.fortuna.ical4j.data.CalendarBuilder.(CalendarBuilder.java:123)
> 
> 由：net.fortuna.ical4j.model.TimeZoneRegistryImpl.(TimeZoneRegistryImpl.java:76) 的 net.fortuna.ical4j.util.ResourceLoader.getResourceAsStream(ResourceLoader.java:77) 的 java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:31:46.330

确实 CalendarBuilder 不是线程安全的，但是我不相信这是问题的根源。从源码可以看出尝试加载tz.alias资源时出现异常：

[https://github.com/ical4j/ical4j/blob/develop/src/main/java/net/fortuna/ical4j/model/TimeZoneRegistryImpl.java#L74](https://github.com/ical4j/ical4j/blob/develop/src/main/java/net/fortuna/ical4j/model/TimeZoneRegistryImpl.java#L74)

您可能需要检查您是否已将此文件与您的服务打包在一起。

# django - Django 表单字段验证 - 如何判断操作是插入还是更新？

> ID：12707812
> 
> 赞同：6
> 
> 时间：2012-10-03T11:44:56.157
> 
> 标签：django, django-models, django-forms, django-validation

我正在尝试在 Django 中执行此操作：在管理员中保存对象时，我还想根据我的第一个对象中的一个字段保存另一个不同类型的对象。为了做到这一点，我必须检查第二个对象是否已经存在，如果存在，则仅针对第一个对象中的特定字段返回验证错误。我的问题是我希望验证错误仅在插入操作时出现在字段中。

如何根据知道操作是更新还是插入来显示特定管理表单字段的验证错误？

PS我知道对于模型验证这是不可能的，因为验证器只接受值参数，但我认为表单验证应该是可能的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T12:52:52.500

这可以通过在 Django 管理表单中编写 clean_[name_of_field] 方法来完成。可以通过测试 self.instance.pk 来检查插入或更新操作。

```
class EntityAdminForm(forms.ModelForm):
    def clean_field(self):
        field = self.cleaned_data['field']
        insert = self.instance.pk == None
        if insert:
            raise forms.ValidationError('Some error message!')
        else:
            pass
        return field

class EntityAdmin(admin.ModelAdmin):
    form = EntityAdminForm 
```

在向 Django 管理员注册实体模型时，您必须使用 EntityAdmin 类：

```
admin.site.register(Entity, EntityAdmin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:56:48.197

您可以[在模型级别编写自定义验证](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#django.db.models.Model.clean)：

```
#inside your class model ...
def clean(self):
    is_insert = self.pk is None
    from django.core.exceptions import ValidationError, NON_FIELD_ERRORS
    #do your business rules
    if is_insert:
        ...
        if __some_condition__ :
            raise ValidationError('Dups.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:26:25.173

为您的模型创建模型表单。在该`clean`方法中，您可以为特定字段设置错误。

有关更多信息，请参阅[清理和验证相互依赖的字段](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:22:24.057

那（可能）不是一个确切的答案，但我想它可能会有所帮助。

Django Admin 为您提供了`save`使用 ModelAdmin.save_model 方法覆盖方法（[文档在这里](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)）

Django api 也有一个`get_or_create`方法（[Doc is here](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get-or-create)）。它返回两个值，第一个是对象，第二个是一个布尔值，表示是否创建了对象（更新了现有记录）。

让我说你`FirstObject`有`SecondObject`

在您的相关`admin.py`文件中：

```
class FirstObjectAdmin(admin.ModelAdmin):
...
...
    def save_model(self, request, obj, form, change):
        s_obj, s_created = SecondObject.objects.get_or_create(..., defaults={...})
        if not s_created:
            #  second object already exists... We will raise validation error for our first object
            ... 
```

对于其余部分，我对如何处理它没有明确的想法。由于您手头有表单对象，因此您可以为 admin 调用`form.fields{'somefield'].validate(value)`和[编写自定义验证](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#adding-custom-validation-to-the-admin)。您可能会覆盖`clean`方法并尝试触发`raise ValidationError`from`ModelAdmin.save_model`方法。你可以从那里调用`validate`并传递一个值......

您可以挖掘 django 源代码以查看 django 是如何处理此问题的，并尝试定义一些自定义验证步骤。

# c# - 以编程方式设置图像坐标

> ID：12707813
> 
> 赞同：0
> 
> 时间：2012-10-03T11:45:03.897
> 
> 标签：c#, image, microsoft-metro

与其声明图像并从 xaml 文件设置源，有人可以在代码中完成初始化部分、设置图像坐标并完全设置源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:52:55.143

```
// Create Image Element
Image myImage = new Image();
myImage.Width = 200;

// Create source
BitmapImage myBitmapImage = new BitmapImage();

// BitmapImage.UriSource must be in a BeginInit/EndInit block
myBitmapImage.BeginInit();
myBitmapImage.UriSource = new Uri(@"C:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures\Water Lilies.jpg");

// To save significant application memory, set the DecodePixelWidth or   
// DecodePixelHeight of the BitmapImage value of the image source to the desired  
// height or width of the rendered image. If you don't do this, the application will  
// cache the image as though it were rendered as its normal size rather then just  
// the size that is displayed. 
// Note: In order to preserve aspect ratio, set DecodePixelWidth 
// or DecodePixelHeight but not both.
myBitmapImage.DecodePixelWidth = 200;
myBitmapImage.EndInit();
//set image source
myImage.Source = myBitmapImage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:58:50.017

您需要创建一个指定来源的新图像：

```
Image myImage = new Image();
BitmapImage bitmapImage = new BitmapImage(new Uri("/YourSource", UriKind.Relative)); //Or UriKind.Absolute depending in the path
myImage.Source = bitmapImage; 
```

如果要将图像放置到一些坐标中，可以在后面放置一个 Canvas 并使用 Canvas 坐标放置图像。采用：

```
 _myCanvas.Children.Add(myImage);  //To add your image to Canvas, declared on Xaml or previously created and added to your control
Canvas.SetTop(myImage, 100);   //Set Y coordenate relative to Canvas initial point
Canvas.SetLeft(myImage, 100);  // Set X 
```

# ruby-on-rails - 在“WHERE”子句中使用指定变量导出到 CSV

> ID：12707819
> 
> 赞同：1
> 
> 时间：2012-10-03T11:45:20.277
> 
> 标签：ruby-on-rails, where-clause, export-to-csv

我正在尝试创建一个链接列表，其中包含链接中的供应商名称，并使用该供应商名称导出数据。我知道我现在在模型中输入的内容是错误的，我只是不确定如何正确传递供应商.. 抱歉，如果这含糊不清，这是我到目前为止的代码：

控制器

```
def export_supplier    
@software = Software.find_supplier
software = CSV.generate do |csv|

# for the headers of the csv file
  csv << ["Quantity", "Item Number", "Item Description"]
  # the chosen rows from the database
  @software.each do |s|
    csv << [s.amount, s.productcode, s.description]
  end
end
send_data(software, :type => 'text/csv', :filename => 'software.csv')
end 
```

看法

```
<% @softwares.each do |l| %>
<li>
    <%= link_to "#{l.supplier}", :controller =>'softwares', :action => 'export_supplier'%>
</li>
<% end %> 
```

模型

```
def self.find_supplier
find_by_sql("SELECT s.productcode, s.description, CAST(SUM(l.amount) as UNSIGNED) AS amount
FROM softwares s
LEFT JOIN licenses l ON s.id=l.software_id
WHERE s.supplier = #{l.supplier} AND l.amount > 0
GROUP BY s.supplier, s.vendor, s.title, s.edition")
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:57:29.137

`<%= link_to "#{l.supplier}", :controller =>'softwares', :action => 'export_supplier',:supplierid=>l.supplier.id%>`或者

如果路由是成员路由

`<%= link_to "#{l.supplier}", export_supplier_software_path(software,:supplier_id=>l.supplier.id%>)`

如果路线是收集路线

`<%= link_to "#{l.supplier}", export_supplier_softwares_path(:supplier_id=>l.supplier.id%>)`

# phpmyadmin - 如何在 phpMyAdmin 中增加导入大小限制

> ID：12707822
> 
> 赞同：72
> 
> 时间：2012-10-03T11:45:31.280
> 
> 标签：phpmyadmin

有谁知道是否或如何增加**phpMyAdmin 中的导入大小限制**？目前我的服务器限制为 50MB。

请注意，这与`upload_max_filesize`php.ini 中的不同。该值设置为 2MB。

我需要将一个表导入到我的一个数据库中，并且 phpMyAdmin 对导入的 50MB 限制阻止了我这样做。

谢谢。

已修改 - 附上 2 个屏幕截图：

屏幕截图 #1 - phpinfo() 显示 php.ini 设置。 ![在此处输入图像描述](../Images/a714fe71cdcf6e99dc56d9a34fae4832.png) 屏幕截图 #2 - 显示 phpMyAdmin 导入限制 ![在此处输入图像描述](../Images/f60977944df921a2e85f0d0f07fa5352.png)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-10-17T08:09:27.107

如果您使用 WHM/Cpanel，那么为了在 phpmyadmin 的导入部分更改“最大：50MiB”限制，您必须更改 WHM（Web 主机管理器）中的两个值。

步骤 1) 转到 Tweak 设置，找到“cPanel PHP Max upload size”根据您的需要进行更改。保存更改。

步骤 2) 转到 Tweak 设置，找到“cPanel PHP Max POST size”根据您的需要进行更改。保存更改。

回到你的 phpMyadmin。该值应该已更改。

![在此处输入图像描述](../Images/f824a137edf32d573e820aa984243d4e.png)

![在此处输入图像描述](../Images/a12797eaf9686b00a9cdbfec67b86f10.png)

![在此处输入图像描述](../Images/b6a1859d405c1baa2644ce2bcb60924f.png)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-05-08T17:01:07.957

通过执行以下操作，我的工作正常时遇到了同样的问题

更改为 php.ini 文件

```
post_max_size = 800M 
upload_max_filesize = 800M 
max_execution_time = 5000 
max_input_time = 5000 
memory_limit = 1000M 
```

现在重新启动以使更改生效

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-10-03T11:53:50.370

你也可以增加`post_max_size`，看看它是否有帮助？

通过 HTML 表单上传文件使得上传被视为任何其他表单元素内容，这就是为什么`post_max_size`也需要增加。

更新：最终解决方案涉及命令行：

要仅导出 1 个表，您会这样做

```
mysqldump -u user_name -p your_password your_database_name your_table_name > dump_file.sql 
```

并导入：

```
mysql -u your_user -p your_database < dump_file.sql 
```

'删除表 your_tabe_name;' 如果导入脚本还没有，也可以添加到导入脚本的顶部，以确保在脚本创建和填充表之前删除表

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2015-07-07T10:53:38.307

*在php.ini*中更改这些值

 *```
post_max_size = 750M 
upload_max_filesize = 750M 
max_execution_time = 5000 
max_input_time = 5000 
memory_limit = 1000M 
```

然后重新启动 Wamp 以使更改生效。这需要一些时间。如果您收到以下错误：

> 如果您想完成导入，脚本超时已过，请重新提交相同的 zip 文件，导入将继续。

然后更新`phpMyAdmin`配置，在*phpMyAdmin\libraries\config.default.php*

```
/**
 * maximum execution time in seconds (0 for no limit)
 *
 * @global integer $cfg['ExecTimeLimit']
 */
$cfg['ExecTimeLimit'] = 0; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-11-29T06:56:01.817

我有同样的问题。我的 .sql 文件为 830 MB，允许的 phpMyAdmin 导入大小为 50MB（如屏幕截图所示）。当我将文件压缩为 .zip 时，它的大小变成了大约 80 MB。然后我把它压缩成**bzip2 格式**，我惊讶地发现文件大小被压缩到只有 12MB（从 830MB 到 12MB ！！！）。由于 phpMyAdmin 允许三种压缩类型，即 .zip 、 .gzip 和 .bzip2 ，因此我上传了压缩的 bzip2 文件和 viola .... 它已导入数据库！因此，通过使用正确的压缩，我能够将一个 830MB 的 .sql 文件导入 phpMyAdmin。

**注意：** phpMyAdmin 导入页面明确指示压缩文件名应类似于**filename.sql.bz2**。它不应该像 filename.bz2 。

**注意 2：**您可以使用 7-Zip 软件将 .sql 文件压缩为 bzip2 压缩文件。cPanel 还可以选择将文件压缩为 bzip2 格式。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-02-24T10:26:30.123

首先，您必须根据您的要求更改**php.ini**文件中的值。

```
post_max_size = 1024M 
upload_max_filesize = 1024M 
max_execution_time = 3600
max_input_time = 3600 
memory_limit = 1024M 
```

***注意 - 小心更改这些值。这些值将影响该服务器的所有项目。***

现在，如果上述解决方案不起作用，请检查您的**phpmyadmin.conf**文件。如果您使用的是**WAMP ，那么您可以在****"C:\wamp64\alias"**中找到该文件。

您必须更改以下值。

文件中已有的值是 -

```
 php_admin_value upload_max_filesize 128M
  php_admin_value post_max_size 128M
  php_admin_value max_execution_time 360
  php_admin_value max_input_time 360 
```

将上面的代码更改为 -

```
#  php_admin_value upload_max_filesize 128M
#  php_admin_value post_max_size 128M
#  php_admin_value max_execution_time 360
#  php_admin_value max_input_time 360 
```

现在只需重新启动服务器，即可使用更改的值。:)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-04-24T02:26:19.063

这是由于 phpmyadmin 中的文件大小导入限制，默认值非常低，所以你应该增加 upload_max_filesize 你可以在你的 php.ini 中更改它，替换为这个

upload_max_filesize = 100M

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-10-12T06:48:30.503

您可以从 php.ini 文件中增加限制。如果您使用的是 Windows，您将从 C:\xampp\php 目录中获取 php.ini 文件。

现在更改以下几行并设置您的限制

```
post_max_size = 128M
upload_max_filesize = 128M 
max_execution_time = 2000
max_input_time = 3000
memory_limit = 256M 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-06T17:16:46.797

如果您对机器有直接的 root SSH 访问权限，您将能够更改以下设置：/usr/local/cpanel/3rdparty/etc/phpmyadmin/php.ini

只需更改行：upload_max_filesize = 50M

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-11-19T22:18:51.917

如果您使用的是 xampp，请找到 php.ini（在 xampp 文件夹本身中），转到第 735 行并将 post_max_size 更改为您希望的值。例如：如果你想升级到 80MiB，

post_max_size = 80M

确保更改值后重新启动 apache。

就是这样...

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-09-04T06:13:25.930

转到您的 cpanel 并搜索“ini 编辑器”。你会得到“Multiphp INI Editor”在那里你选择你的wordpress目录并放 `upload_max_filesize = 256M` `post_max_size = 256M` `memory_limit = 256M`

[![在此处输入图像描述](../Images/d86909921340b27d819c3426caeac908.png)](https://i.stack.imgur.com/sehOp.png)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-03-29T16:21:42.360

确保您正在编辑 php.ini 而不是 php-development.ini 或 php-production.ini，php.ini 文件类型是配置设置，当您在编辑器中编辑它时会显示 .ini 扩展名。你可以在这里找到 php.ini：**xampp/php/php**

然后

```
upload_max_filesize = 128M
post_max_size = 128M
max_execution_time = 900
max_input_time = 50000000
memory_limit = 256M 
```

![在此处输入图像描述]](../Images/b6bf3c13f33767b33e0109905d268e0a.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-12-30T12:00:53.207

1:nano /etc/php5/apache2/php.ini
你可以通过上传一个名为 phpinfo.php 的文件找到你的 php.ini 位置，文件内容如下`<?php phpinfo();?>`，并通过访问 yourdomain.com/phpinfo.php 访问它，你会看到结果

2：将所需的值更改为upload_max_filesize和post_max_size 例如：upload_max_filesize = 200M post_max_size = 300M 然后它将变为200M。

3：重启你的apache

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-03-13T22:22:09.873

更改 c:/wamp64/alias/phpmyadmin.conf 上的文件 phpmyadmin.conf

php_admin_value upload_max_filesize 512M
php_admin_value post_max_size 512M
php_admin_value max_execution_time 360
​​ php_admin_value max_input_time 360

将时间增加到 5000 或更高非常重要，因此，当您上传大文件时，该过程不会停止。

这对我行得通。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-11-30T07:05:33.570

> 如果您使用 NGINX：

1.  `cd /etc/php/<PHP_VERSION>/fpm`示例 => **cd /etc/php/7.2/fpm**

2.  `nano php.ini`

    ```
    post_max_size = 1024M 
    upload_max_filesize = 1024M 
    max_execution_time = 3600 
    max_input_time = 3600 
    memory_limit = 1024M 
    ```

3.  保存 php.ini 文件后，使用以下命令重新启动 fpm：

    ```
    systemctl restart php<PHP_VERSION>-fpm 
    ```

示例 => **systemctl 重启 php7.2-fpm**

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-05-18T08:39:37.580

我通过转到 CPanel > 选择 PHP 版本 > 切换到 PHP 扩展来增加最大文件大小，然后滚动到 upload_max_filesize 字段（它将有一个可点击的大小链接 - 我的大小设置为 2MB），然后我将其增加到 256MB。然后点击“保存”。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-19T06:35:53.127

**您可以在C:\xampp\htdocs**中搜索**php.ini**文件

 **更改为**php.ini**文件

```
post_max_size = 805M 
upload_max_filesize = 805M 
max_execution_time = 5005 
max_input_time = 5005 
memory_limit = 1005M 
```

编辑后请*重启* **XAMPP**

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-05-16T13:32:16.093

在较新版本的 cpanel 上：搜索 ini

[![选择主目录](../Images/a12cf3e662edeae4c58c2b25dc1f46ad.png)](https://i.stack.imgur.com/gvYDC.png)

[![向下滚动到'upload_max_file](../Images/e618931edbb7189fe1c6e87c4fc8b7e4.png)](https://i.stack.imgur.com/KBrEs.png)大小'并编辑它...然后保存[输入 [![在此处输入图像描述](../Images/10bfeafafacdc1264cca724112fa862f.png)](https://i.stack.imgur.com/yBces.png)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-10-09T19:04:59.050

Sharky的回答很到位。显示的 phpMyAdmin 上传文件大小不受 php.ini 设置管理，您可以在运行包含以下内容的 phpinfo.php 时看到：

```
<?php
// Show all information, defaults to INFO_ALL
phpinfo();
?> 
```

增加 php.ini 设置是一个很好的做法：

post_max_size upload_max_filesize max_execution_time max_input_time memory_limit

您可以使用 Sujiraj R 共享的设置示例。对 php.ini 和 WHM 的“调整设置”区域进行所有更改后，当您启动 phpMyAdmin 并进入导入屏幕时，您将看到为“cPanel PHP 最大上传大小”选择的大小“ 场地。

这篇文章有很多很好的答案，但你必须来回查看才能得到正确的答案。我希望通过在这篇文章中封装这些以前的答案，我能有所帮助。我在这篇文章中提到的所有答案都是由其他人在此处发布的，因此请不要将此处发布的任何答案归功于我。***

# drupal-6 - 如何访问 tpl 文件中的 cck 字段？

> ID：12707827
> 
> 赞同：0
> 
> 时间：2012-10-03T11:45:52.197
> 
> 标签：drupal-6, cck, drupal-theming

我正在开发一个已经创建的 drupal 站点。在主题文件夹中，它有一个 tpl.php 文件，主题用于显示内容。现在如下

**打印$内容**

并且 cck 的所有字段都正确显示。但我想访问每个字段，如标题、正文等。我尝试过使用**$content['title']**，但没有显示任何内容。

谁能告诉我如何访问我的 tpl 文件中的不同字段。我正在使用 Drupal 6。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:48:26.520

尝试

```
<pre>
 print_r($content);
</pre> 
```

然后你会看到数组中到底有什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:03:32.323

您可以使用 node-[type].tpl.php 查看不同的字段。默认情况下，每个 CCK 字段都暴露在以字段名称命名的变量中，例如，如果您有一个名为的字段，`field_logo`那么您有一个名为的变量`$field_logo`，它是一个表示字段处理值的数组，可以是`print_r()`'d.

[Drupal 文档](http://drupal.org/node/1089642)中提供了更多模板建议。还有[更多关于使用 node.tpl.php](http://api.drupal.org/api/drupal/modules!node!node.tpl.php/6)及其衍生产品的信息。

# plugins - 最佳 ExtJs 4 主题资源

> ID：12707828
> 
> 赞同：5
> 
> 时间：2012-10-03T11:45:55.970
> 
> 标签：plugins, extjs, extjs4, themes

经过大量搜索，我没有找到 ExtJs 4 主题的任何好的资源。ExtJs 4 主题和插件的最佳资源是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T19:00:39.890

煎茶市场

[https://market.sencha.com](https://market.sencha.com)

# excel - 匹配 excel 中的 2 列以在第 3 列中显示值

> ID：12707829
> 
> 赞同：2
> 
> 时间：2012-10-03T11:45:58.980
> 
> 标签：excel, indexing, matching

我有一个带有 2 个选项卡的 excel 电子表格，第一个选项卡有一个位置、位置类型和版本号列。第二个选项卡包含我要处理的位置、位置类型和空白列。

在两个选项卡上，位置都在那里多次（否则会简单得多），我只使用一种特定的位置类型，希望这会更容易，但在我的主工作表上，每个位置都有 3 种位置类型。

我想要做的是将版本号字段中的值放入我的空白单元格中，其中位置和版本号匹配..有可能吗

选项卡 1 - 位置信息

```
Location, location type, Version
LEEDS      Live          1.0.01
LEEDS      Test          1.1.01
LEEDS      Train         1.2.02 
```

选项卡 2 - 问题

```
Location, Location type, Version
LEEDS, Live, (HERES WHERE I WANT THE VERSION BASED ON MATCHING A and B)
LEEDS, Live, (HERES WHERE I WANT THE VERSION BASED ON MATCHING A and B)
LEEDS, Live, (HERES WHERE I WANT THE VERSION BASED ON MATCHING A and B) 
```

有很多地方，但仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:57:35.093

您可以使用以下公式执行此操作（无需向表中添加值）

```
{=INDEX(Sheet1!C:C,MATCH(A2,IF(Sheet1!B:B=B2,A:A),0))} 
```

sheetnames 可能不是您要查找的内容 - 这假设您在 Tab2 中的查找数据具有`A2 = "LEEDS"`和`B2 = "Live"`.

您将需要使用`control+shift+enter`（在 Mac 上替换`command`为`control`）来制作这些公式（如果在列表中）数组公式。这使得公式作为数组操作工作。[有关数组公式的更多信息](http://office.microsoft.com/en-us/excel-help/putting-basic-array-formulas-to-work-HA001087292.aspx?CTT=5&origin=HA001087290)。

* * *

但是，我在这种情况下所做的其中一件事是在我的主数据选项卡上创建一个唯一的“关键”值。然后，不必做一个复杂的公式（这实际上更适用于电子表格将在几天后维护并且我自己或其他人需要它）我可以使用一个简单的`vlookup`- 这比一个更容易理解`MATCH`等的组合

所以我要做的是在 A 中为 Tab 1 添加一个名为“Key”的列，并使这个值类似于：

```
= B2 & B3 
```

这提供了一个唯一键，您可以使用它来引用每一行。

然后，在您的第二个选项卡上，您可以执行类似的操作

```
=vlookup(A2 & A3, Tab1SheetName!A:D, 4, false) 
```

当您在几周/几个月后回顾此电子表格或其他人需要使用它时，这会更容易理解。

# c# - Jamaa SMPP 客户端工作示例

> ID：12707834
> 
> 赞同：2
> 
> 时间：2012-10-03T11:46:13.740
> 
> 标签：c#, smpp

我正在使用 Jamaa SMPP 客户端

有没有人有发送短信的工作示例？

这是我的代码：

```
var textMessage = new TextMessage() { DestinationAddress = "XXXXXXXXX", SourceAddress = "XXXXXXXXX", Text = "test" };
var client = new SmppClient();
client.Properties.SystemID = "xxxx";
client.Properties.Password = "YYYY";
client.Properties.Port = ZZZZ;
client.Properties.Host = "255.255.255.255";
client.Properties.DefaultEncoding = DataCoding.SMSCDefault;
client.Properties.AddressNpi = NumberingPlanIndicator.Unknown;
client.Properties.AddressTon = TypeOfNumber.Unknown;

client.ForceConnect();
client.Start();
client.SendMessage(textMessage);
client.Shutdown(); 
```

但我的提供者说我缺少绑定信息 ( `Bind_transceiver`, `Bind_transmitter`, `Bind_receiver`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-04T06:30:51.710

看看下面的示例代码。我认为您缺少 SystemType 参数。发送操作对我很好。

```
// Initialize Connection 
        client = new SmppClient();
        properties = client.Properties;
        properties.SystemID = "BBBB";
        properties.Password = "BBBB";
        properties.Port = 1234; //IP port to use
        properties.Host = "1.2.3.4"; //SMSC host name or IP Address
        properties.SystemType = "EXT_SME"; 
        properties.DefaultServiceType = "EXT_SME";
        //Resume a lost connection after 30 seconds
        client.AutoReconnectDelay = 3000;

        TextMessage send_msg = new TextMessage();

        send_msg.DestinationAddress = mobile_number; //Receipient number
        send_msg.SourceAddress = "1234"; //Originating number
        send_msg.Text = message;
        send_msg.RegisterDeliveryNotification = true; /
        client.SendMessage(send_msg);
        general_obj.WriteLog(mobile_number +" "+message, "SendLog"); 
```

# base64 - InnoSetup（sha1 + base64 编码字符串）

> ID：12707837
> 
> 赞同：2
> 
> 时间：2012-10-03T11:46:19.773
> 
> 标签：base64, inno-setup, pascal, sha1

有没有办法可以使用 sha1 对密码进行编码，然后在 InnoSetUp 中使用 base64 输出？

我看到 InnoSetup 已经有了`GetSHA1OfString()`，但这不是 base64 编码，而是十六进制编码。

我发现有人在这里发布了一个函数 [http://www.vincenzo.net/isxkb/index.php?title=Encode/Decode_Base64](http://www.vincenzo.net/isxkb/index.php?title=Encode/Decode_Base64)

但这只是将 ANSI 字符串作为输入，所以我不能将输出传递`GetSHA1OfString()`给它。

我想`admin`使用sha1对输入进行base64编码，所以输出应该是 `0DPiKuNIrrVmD8IUCuw1hQxNqZc=`

任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-28T06:34:18.087

FPC自带sha1和base64库，所以你可以自己写函数（可以一行实现，不过我拆成3个加注释）：

```
uses
  sha1,
  base64;

function GetBase64SHA1OfString(const S: AnsiString): AnsiString;
var
  Digest: TSHA1Digest;
  DigestStr: AnsiString;
begin
  // Compute the SHA1
  Digest := SHA1String(S);
  // Convert SHA1 to string representation
  DigestStr := SHA1Print(Digest);
  // Compute base64 of the string representation and return it
  Exit(EncodeStringBase64(DigestStr));
end;

begin
  Writeln(GetBase64SHA1OfString('Hello!'));
end. 
```

# android - How to start Android console on VirtualBox emulator?

> ID：12707841
> 
> 赞同：1
> 
> 时间：2012-10-03T11:46:26.240
> 
> 标签：android, mobile, android-emulator, virtualbox

I've set up Android on a virtualbox, it boots and runs correctly.

However I'm trying to start its console so I can do `netcfg` and get the IP address, so I can try connecting the adb to it.

As the tutorials say, I tried pressing ALT + F1 but it has no effect. I've tried both the right and left ALT buttons but the console doesn't show up.

What am I doing wrong? Does Android have to be started in Debug mode to see the console?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:06:42.333

No need for Debug mode for use the console. What a image are you use? Try [Ctrl]+Alt+F2/F3, or [download other image](http://www.android-x86.org/download).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T21:55:31.203

Easiest way it's to open the Android Apps inside the VM and open a Terminal Emulator like you will do in your phone. At least, I do it that way as ALT+F1 doesn't work for me. Then, in the terminal emulator, you can use "su" to root and "netcfg" to know the IP of the VM so as to use it in "adb connect IP". Hope it helps

# android - 如何正确处理动作模式“完成”按钮？

> ID：12707843
> 
> 赞同：24
> 
> 时间：2012-10-03T11:46:34.580
> 
> 标签：android, android-actionbar, actionbarsherlock, contextual-action-bar

> **可能重复：**
> [如何调用 ActionBar 的类似 ContextMenu 的行为？](https://stackoverflow.com/questions/6162595/how-to-invoke-the-actionbars-contextmenu-like-behavior)
> [如何识别ActionMode中是否点击了Done按钮](https://stackoverflow.com/questions/11642877/how-to-recognize-whether-the-done-button-is-clicked-in-actionmode)

如何正确处理动作模式“完成”按钮？

![动作模式完成按钮](../Images/3388d766318ba38a34fab99bb83f54b6.png)

我在动作模式下对一个对象执行了一些操作，我想通过单击此按钮来保存结果——比如“保存并退出”。如何在此按钮上发送按键？

我看到的唯一方法是用标志覆盖 onDestroyActionMode(ActionMode mode) 方法，在 dispatchKeyEvent(KeyEvent event) 中触发以处理它是否是由“返回”按钮按下引起的。

日志猫：

按下“完成”

```
10-03 14:31:58.211: D/DESTROY(967): onDestroyActionMode 
```

按下“返回”

```
10-03 14:32:01.771: D/DISPATCH(967):   Action: 0/n  Keykode: 4  
10-03 14:32:01.911: D/DISPATCH(967):   Action: 1/n  Keykode: 4  
10-03 14:32:01.911: D/DESTROY(967): onDestroyActionMode 
```

但这看起来不是很好的做法。有什么“好”的解决方案吗？

**UPD：我知道如何在 ActionMode.Callback 中调用动作模式和处理动作项事件，但我如何捕捉“完成”按钮按下来修改它的行为？**“返回”按钮和“完成”按钮都导致`ActionMode.Callback`'`onDestroyActionMode()`调用。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-10-03T12:58:54.760

这种模式称为 CAB（上下文操作栏）。请查看[菜单指南](http://developer.android.com/guide/topics/ui/menus.html)并在官方网站上搜索 CAB ：[使用上下文操作模式](http://developer.android.com/guide/topics/ui/menus.html#CAB)

# android - 焦点表行不起作用

> ID：12707845
> 
> 赞同：0
> 
> 时间：2012-10-03T11:46:50.463
> 
> 标签：android, focus, android-xml, android-tablelayout

我有一个 TableLayout，我希望里面的元素（每个表格行都有一个文本视图）集中在触摸上。我将每个元素的可聚焦属性设置为 true，但它不起作用！

这是xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="bottom"
android:focusable="true"
android:focusableInTouchMode="true"
android:gravity="right" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:background="#444444"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:gravity="bottom"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:focusable="true"
        android:focusableInTouchMode="true" >

        <requestFocus />

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#993399"
            android:clickable="true"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:clickable="true"
                android:editable="false"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:gravity="right"
                android:text="Zein"
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Home"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="About us"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#00FF00"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:gravity="right"
                android:text="Students"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView5"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:gravity="left"
                android:text="Course Scheduele"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView6"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:gravity="left"
                android:text="Exam Scheduele"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow7"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView7"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Exam Grades"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow8"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView8"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Course Grades"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow9"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView9"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="GPA"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow10"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView10"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Drop &amp; Add"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow11"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView11"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Petition Enquiry"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow12"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView12"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:background="#00FFFF"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:gravity="right"
                android:text="University Services"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow13"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView13"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Petition Enquiry"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow14"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#D60024"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView14"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:gravity="right"
                android:text="Employees"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow15"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView15"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Petition Enquiry"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow16"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="#009933"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView16"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_marginRight="5dip"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:gravity="right"
                android:text="My Account"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow17"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:focusable="true"
            android:focusableInTouchMode="true" >

            <TextView
                android:id="@+id/textView17"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:text="Petition Enquiry"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

我希望每个元素在用户触摸它时都成为焦点，知道为什么它在这里不起作用吗？

**可绘制/table.xml**

更新：

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true"
           android:color="#993399" /> <!-- pressed -->
     <item android:state_focused="true"
           android:color="#993399" /> <!-- focused -->
     <item android:color="#222222" /> <!-- default -->

</selector> 
```

这就是我在 main.xml 中引用它的方式

```
 android:src="@drawable/table1" 
```

仍然没有任何事情发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:34:49.483

为您的列表视图项创建选择器，并设置其参数，例如：

```
<item android:drawable="@drawable/but" android:state_pressed="false" android:state_selected="false"/>
<item android:drawable="@drawable/butpressed" android:state_pressed="true"/>
<item android:drawable="@drawable/butpressed" android:state_pressed="false" android:state_selected="true"/> 
```

在示例中我更改了图片，但您可以设置任何其他参数

# php - 检查过去一个月与否 PHP

> ID：12707852
> 
> 赞同：0
> 
> 时间：2012-10-03T11:47:36.563
> 
> 标签：php, date, time

我很乐意帮助那些不起作用的代码我想看看该项目是否在上个月发布。如果是，那么得到一个积极的结果。

```
 //$project_time="2012-08-01 13:43:49";
    $project_time="2012-10-02 14:05:09";
 $end=mktime(0,0,0,date("m",strtotime($project_time))+1,date("d",strtotime($project_time)),d    ate("y",strtotime($project_time)));
 $end=date("d.m.y",$end);
 $today=mktime(0,0,0,date("m"),date("d"),date("y"));
 $today=date("d.m.y",$today);    

echo 'Project date '.$date.'<br />';
echo 'End date '.$end.'<br />';
echo 'Today '.$today.'<br />';

if($today<$end){
  echo " open<br />";
}
else{
  echo " finish<br />";
} 
```

PROJECT_TIME 首先给出了一个好的结果，而另一个则没有。$ 结束创建日期基于 $ PROJECT_TIME 加上一个月。变量数据 TOTDAY 获取今天的日期。以及我想从 PROJECTTIME 上个月得到答案的比较

如果有人理解并可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:56:17.073

strtotime 是您要使用的功能。只需使用以下语法：

```
$end = date('d.m.y', strtotime('+1 month', strtotime($project_time)); 
```

*编辑*

人们所说的比较字符串是正确的。不要比较字符串，比较时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:56:46.973

尝试将其重写为：

```
$project_time = "2012-10-02 14:05:09";
$project_endtimestamp = strtotime('+1 month', strtotime($project_time));

echo 'Project date ' . $date . '<br />';
echo 'End date ' . date('d.m.y', $project_endtimestamp) . '<br />';
echo 'Today ' . date('d.m.y') . '<br />';

if (time() < $project_endtimestamp) {
    echo " open<br />";
} else {
    echo " finish<br />";
} 
```

**编辑：**没有完全理解这个问题。根据@Simon Germain 的回答`+1 month`在通话中添加。`strtotime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:00:09.170

Basic problem: You're comparing two "d.m.y" strings.

This will always fail, because PHP sees them as plain text, not as dates. Therefore, asking which one is bigger will generally give the wrong answer.

Also: Get rid of all that crazyness with the old-style date handling functions. PHP has much better ways to do that sort of thing these days.

```
$project_time="2012-10-02 14:05:09";

$projDate = DateTime::createFromFormat('Y-m-d H:i:s', $project_time);
$dateNow = new DateTime();
if($projDate < $dateNow) {
    ... do something here...
} 
```

# ruby-on-rails - Heroku 与 AWS RDS：是否需要 database.yml 中的详细信息？

> ID：12707854
> 
> 赞同：0
> 
> 时间：2012-10-03T11:47:42.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, amazon-web-services

我们正在 Heroku 上运行 Rails 应用程序，并将其连接到 Amazon RDS 上的数据库。它工作正常，安全区域已配置并且应用程序处于活动状态。

Heroku 要求您以以下格式提供数据库 URL

```
mysql2://user:pass@rdsinstance.com/database 
```

由于我们在插件中指定了数据库信息`database.yml`，如果有的话，我们需要在文件中提供什么？

以下就足够了，还是我们需要的甚至更少？也许只是适配器名称？

```
production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  pool: 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:02:18.180

Heroku 会自动将`database.yml`部署时的任何文件的内容替换为共享数据库的值，该值通常存储在`SHARED_DATABASE_URL`config 变量中。

我不知道是否可以保存覆盖该值。如果你这样做了，你应该能够从 Rails 连接到数据库而无需任何额外的努力。如果您的应用程序运行良好，并且您只是想知道需要在默认`database.yml`文件中写入什么，那么您可以放入任何您想要的内容，Heroku 将在任何情况下在部署时替换它。

# mysql - CakePHP：表连接

> ID：12707856
> 
> 赞同：0
> 
> 时间：2012-10-03T11:47:50.553
> 
> 标签：mysql, cakephp

我是 CAKEPHP 的新手，第一次使用连接。我也阅读了文档。

现在我有两种模型，一种用于用户，另一种用于状态。

在状态表中，我有一个外键，它是用户表中的用户 ID。

我想在条件下使用 $hasMany，这样如果登录用户共享状态，它应该更新在外键中具有 UID 的状态表，并且 UID 是用户表主键

我不知道该怎么做。

我相信它应该是这样的

```
class User extends AppModel 
{    
    var $name = 'User';    
    var $hasMany = array(
    'Status' => array( 
    'conditions' => array('Status.FK' => 'User.id') 
       )
    );
} 
```

希望我做对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:16:21.573

对于 hasMany，将此代码放入您的用户模型中：

```
/**
 * @see Model::$hasMany
 */
    public $hasMany = array(
        'Status' => array(
            'className' => 'Status',
            'foreignKey' => 'Status.FK',
            'dependent' => true,
        ),
    ); 
```

但最好的方法是在您的状态模型中使用 belongsTo，因为 belongsTo 的查询比 hasMany 方法少。在您的控制器中，您可以使用 Status 模型来检索用户及其状态。例如：在状态模型中：

```
/**
 * @see Model::$belongsTo
 */
    public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'Status.FK',
        ),
    ); 
```

然后在您的控制器中从数据库中查找特定行，您可以使用：

```
 $this->recursive = 1;
    $this->Status->find('all',array('conditions' => array('User.id' => $id))); 
```

# c# - 在一个项目代码中使用“C# via XAML”和“C++/CX via XAML”

> ID：12707857
> 
> 赞同：-1
> 
> 时间：2012-10-03T11:47:56.490
> 
> 标签：c#, xaml, windows-8, windows-runtime, c++-cx

我想在一个应用程序中使用 WinRT 代码“C# via XAML”和“C++/CX via XAML”。

第一种形式是用“C# via XAML”编写的，第二种形式是用“C++/CX via XAML”编写的。

打开表单输入以下代码：

```
//C# -> C++
this.Frame.Navigate(typeof(PageOnCPP)); 
```

和

```
//C++ -> C#
using namespace Windows::UI::Xaml::Interop;
//...
this->Frame->Navigate(TypeName(PageOnCSharp::typeid)); 
```

我怎样才能在一个项目中同时完成这两项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:55:43.700

Visual Studio 不允许在同一个项目中使用两种不同的语言。如果你想这样做，你需要为你的第二语言创建第二个项目。然后，您可以引用该项目并使用您的其他类。

# java - 具有相同哈希码但不相等的两个实例

> ID：12707869
> 
> 赞同：12
> 
> 时间：2012-10-03T11:49:02.790
> 
> 标签：java, equals, hashcode

我正在阅读以下文章引用的段落[-Java 理论与实践：散列-有效且正确地定义 hashCode() 和 equals()](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)

> **定义相等** Object 类有两种推断对象身份的方法：equals() 和 hashCode()。通常，如果您覆盖其中一种方法，则必须同时覆盖这两种方法，因为它们之间存在必须维护的重要关系。特别是，如果两个对象根据 equals() 方法相等，则它们必须具有相同的 hashCode() 值***（尽管相反通常不正确）***。[我补充的重点]

我的问题与该段的后半部分有关，“尽管通常情况相反”。一个类的两个不同实例如何具有相同的 hashCode 但不相等？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T11:51:45.393

简单来说，hashcode() 是通过某种公式生成哈希的函数，因此可能会发生一些冲突，两个不同的值可能会产生相同的哈希码。

如果我只是通过将 mod 乘以 6 来计算哈希码，那么两个不同的值可能具有相同的哈希码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T11:54:35.713

你可以考虑`hashes to be a bucket`..

*   如果**两个对象**相等，它们将进入**同一个桶**（具有相同的哈希码）
*   但是，如果**两个对象**进入同一个**桶**（具有相同的哈希码），这并不意味着它们必须相等
*   还要注意，如果两个对象不相等，即使那样它们也可以具有相同的哈希码。显然，这是从上述两点推断出来的。

因此，哈希码只不过是该存储桶的哈希值。任何数量的对象都可以具有相同的哈希码，具体取决于用于计算哈希码的算法。

一种理想的算法是为不同的对象生成不同的哈希码。所以，理想情况下，`1 object`每个`bucket`..当然这是完美的情况，这可能是不可能的..

一个桶当然可以包含几个对象，基于一些属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-27T02:54:44.050

将哈希码视为只是减少检查相等性的工作量的东西。如果两个对象相等，它们肯定具有相同的哈希码。但是，如果两个对象具有相同的哈希码，它们可能在数学上具有很高的相似性，但仍然不相同。只是为了心态：想想把一只鸭子比作动物园里的一头大象。它们高度不同，并且会有不同的抽象哈希码，因此您不必费心比较它们的腿、翅膀等来检查它们是否相同。但是，如果您要比较鸭子和天鹅，它们非常相似并且具有相同的抽象哈希码，因此现在您只需比较每种动物的非常微小的特征来检查是否相等。随着您减少被比较的两个元素之间的极端性，抽象哈希码变得越来越具体。就像比较鸭子和天鹅比比较鸭子和大象有更具体的哈希码一样，比较不同品种的鸭子会使哈希码更加具体，比较同一品种的两只鸭子的 dna 会使哈希码更加具体。这个答案只是为了创造一种理解哈希码概念的心态。看完这篇，你一定模糊了对这个答案上下文中hashcode这个词的理解。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-03T11:52:09.833

我认为反过来实际上是

> 如果根据 equals() 方法，两个对象不相等，则它们必须具有 A DIFFERENT hashCode() 值

这显然不成立，因为在一般情况下生成唯一哈希是不可能的，因为您通常试图将一组值映射到一组较低基数的哈希码上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T11:54:40.550

我将使用示例进行解释。假设 `hashCode()`字符串是基于字符串长度的。`"foo"`在这种情况下，和的哈希码`"bar"`相等。但`"foo"`本身并不等于`"bar"`。

这是因为has code实现了一种公式：您可以确定每个对象的has code，但不能从哈希码恢复对象。可以有多个具有相同哈希码的对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T11:54:44.520

您可以将您的`hashCode()`实现定义为始终返回`1`示例。这是完全有效的：不同的实例（不是`equal`）可以具有相同的`hashCode`. `HashMaps`但是在 或其他类型的集合中查找这些对象的运行时性能`Sets`会很差（因为它们在内部都位于同一个桶中 - 查找性能从`O(1)`到下降，`O(n)`因为您需要遍历同一个桶中的对象列表）。

还可以考虑看看[HashMaps 在 Java 中是如何工作的](http://javarevisited.blogspot.ch/2011/02/how-hashmap-works-in-java.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T11:55:43.777

对象的哈希码通常比原始对象小得多。这是散列函数的目的之一。因此，您可以想象，如果您有 n 个不同的对象（例如一个类的所有排列），则不可能将它们编码为 m（其中 m < n）不同且更小（比原始对象）的唯一代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-03T12:04:50.583

让我举个例子：

假设字符串的 HashCode 得到如下： hashCode = 每个字符 ASCII 码的总和（但我们知道，真正的 hash 更复杂）

例如：“abc”的哈希码计算形式为：49+50+51 = 150

那么“acb”的哈希码等于：49+51+50 = 150

等等。如您所见，有许多字符串具有 hashcode=150 但它们不相等。

# jquery - jquery-ajax 多次调用

> ID：12707874
> 
> 赞同：2
> 
> 时间：2012-10-03T11:49:30.380
> 
> 标签：jquery, ajax, jquery-deferred

我正在使用以下代码来处理多个 ajax 请求，如下所示：

请求**1 开始**| 请求**1 完成**| 请求**2 开始**| 请求**2 完成**| ...

这是代码：

```
var startingpoint = fireRequest(1);
    $.each(types,function(ix,type) 
    {
       startingpoint = startingpoint.pipe( function() 
       {
          alert(startingpoint.status); // undefined
          return fireRequest(type);
        });
    }); 
```

**fireRequest**只是返回 $.ajax(...) 的正确 ajax 函数的 switchcase

当一个请求失败时，我希望链停止。我开始实现它，作为测试，我想提醒 ajax 对象的状态，但它显示“未定义”。我怎样才能获得状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:30:35.453

您尝试实现的行为已经是 .pipe() 方法的行为。它接受两个回调作为参数，并且仅在前一个请求成功的情况下执行完成的回调并沿着链继续。这可以在以下 jsfiddle 中说明：http: [//jsfiddle.net/dflor003/Vq2YF/](http://jsfiddle.net/dflor003/Vq2YF/)（注意：在具有内置 JSON.stringify 支持和 console.log 支持的浏览器中打开它）

如果您确实想检查请求的状态，它将把状态作为第二个参数传递给 done 回调。更多细节可以在 jQuery 的 API 文档站点上找到：http: [//api.jquery.com/deferred.pipe/](http://api.jquery.com/deferred.pipe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T03:32:41.873

# JS示例1

此代码假定您希望在任何一个请求失败（通过 404 或 500 响应，或超时）时中止其他请求，并且不需要评估数据响应以确定业务逻辑故障场景。[$.when()](http://api.jquery.com/jQuery.when/)

> 该方法将在所有 Deferred 解析后立即解析其主 Deferred，或者在其中一个 Deferred 被拒绝时拒绝主 Deferred。

```
 $.when(fireRequest(1), fireRequest(2),fireRequest(3))
  .then(myAllSuccessfulFunc, oneFailedFunc);

function myAllSuccesfulFunc(req1,req2,req3){
//everything returned a 200.
   alert("these are not the droids you are looking for");
};
function oneFailedFunc(req1,req2,req3){
    //* each req looks like [ "not success", statusText, jqXHR ] */
//feel free to check what failed, but I don't know what you need

   req1[2].abort();
   req2[2].abort();
   req3[2].abort();
}; 
```

# js示例2

您实际上需要在响应中解析成功的数据请求，以查看是否由于来自后端的逻辑而使其他请求失败。

```
var stop = 4;
//if you are sure fireRequest(x) returns a good promise object, do this:
callNext(fireRequest(1),1);

function callNext(promise, currentIndex){
   promise.done(function(ajaxArgs){
   var jqXHR = ajaxArgs[2];
//replace this with some logic check that makes sense to your app
   if(/error/.test(jqXHR.responseText)){
    //do something
   }else if(currentIndex <stop){
    callNext(fireRequest(currentIndex+1),currentIndex+1);
   }).fail(function(ajaxArgs){
   //server returned a 404, or a 500, or something not a success.
   });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T07:34:43.903

我认为问题在于，`$.Deferred`类似的东西是为处理异步和并发过程而设计的，所以如果你想让它们按照你描述的方式行事，你总是不得不以某种方式欺骗它们。

如果您想要/需要一个接一个地处理您的调用（使用~~A~~ JAX），我建议将它们放入一个数组并使用一个简单的递归函数循环遍历该数组，直到所有调用完成或其中一个调用失败。

这基本上可以像这样工作：

```
var requests = [
  {
  url : '/serviceA'
  data : myParams4ServiceA
  },
  ...
  {
  url : '/serviceZ'
  data : myParams4ServiceZ
  }
]; 
```

现在您有一个 AJAX 请求数组，您可以构建一个递归函数，该函数将逐个处理它们：

```
function work(){

$.ajax(requests[0]).done(function(data){
  //handle data here
  requests.shift(); //request is done and can be removed from the Array, request[0] will now be the next request in the queue

  if (requests.length){
    work(); //function calls itself again if there's still need for it
  } else {
    // we are done!
  }

}).fail(function(e){
  //call failed -> handle error
});

}

work(); 
```

有关成功链的示例，请参见**[this](http://jsfiddle.net/frederikring/BKaak/1/)** **[fiddle](http://jsfiddle.net/frederikring/BKaak/)** ，而对于失败的链，请参见this fiddle。

另一种可能性是将 AJAX 调用设置为`async : false`（请注意，这在 jQuery 1.8+ 中已弃用：“*从 jQuery 1.8 开始，不推荐使用 async: false 和 jqXHR ($.Deferred)；您必须使用完整/成功/错误回调。* ”这再次指向我们备份），并使用`$.when().then().fail()`您应用于请求数组的简单链，例如：

```
$.when.apply($, requests).then(function(){

    $.each(arguments, function(){
        //do stuff with your data
    });

}).fail(function(){

    //handle the error

}); 
```

由于您的呼叫现在被阻塞，这也将连续处理它们。也请参阅**[小提琴](http://jsfiddle.net/frederikring/T4rFX/2/)**。

# c# - 数据绑定动态控件类型和名称

> ID：12707878
> 
> 赞同：0
> 
> 时间：2012-10-03T11:49:55.713
> 
> 标签：c#, asp.net, .net, controls

我正在研究一种方法来制作我所有的 SQL 查询，然后将它们数据绑定到中继器、数据列表等等......

```
protected void sqlQuery(Control controlName, String query) {
    SqlConnection conn = new SqlConnection();
    SqlCommand cmd = new SqlCommand();

    conn.ConnectionString = ConfigurationManager.ConnectionStrings["SqlConn"].ToString();
    cmd.Connection = conn;

    try {
        cmd.CommandText = query;

        DataTable dt = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(cmd);

        adapter.Fill(dt);
        controlName.DataSource = dt;
        controlName.DataBind();

    } catch (Exception error) {
        Label1.Text = "Error!<br/>" + error;
    }
} 
```

然后我会用我想要数据绑定的控件名称调用该方法。像：

```
sqlQuery(Repeater1, "SELECT * FROM someTable");
sqlQuery(DataList1, "SELECT * FROM someTable"); 
```

但是那个剂量现在起作用了，因为当我只使用 Control 时它不知道控制类型。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:02:59.437

出现问题是因为`Control`没有您需要的属性/方法，并且这些属性未在接口或基本控件类型上定义。

因此，您必须使用一种称为 [反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)的东西，这允许您调用所需的属性和方法（以及许多其他东西），而无需任何编译时知识，当然如果您在没有这些的情况下传入控件会得到一个令人讨厌的异常，并且在使用反射时会影响性能 - 但在你的情况下，这将是微不足道的。

我没有方便的 IDE，但应该按照这些思路来做。

```
public static void DatabindControlFromSqlQuery(Control control,string query)
{
    var connectionString = ConfigurationManager.ConnectionStrings["SqlConn"].ToString(); 
    using (var connection = new SqlConnection(connectionString))
    {
        using (var cmd = new SqlCommand(connection))
        {
            cmd.CommandText = query;
            var dt = new DataTable();
            var adapter = new SqlDataAdapter(cmd);
            adapter.Fill(dt);

            var type = control.GetType();
            var dataSourceProp = type.GetProperty("DataSource");

            dataSourceProp.SetValue(control,dt);

            var dataBindMethod = type.GetMethod("DataBind");
            dataBindMethod.Invoke(control,null);

        }
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:11:07.113

接受的答案错误地假设`.DataSource`属性只能通过反射获得。

所有具有此属性的 ASP.NET 控件都派生自，`System.Web.UI.WebControls.BaseDataBoundControl`因此您可以这样编写代码（无需反射，因此速度会快得多）：

```
protected void sqlQuery(Control controlName, String query) {
    // cast the control to the base class
    var controlWithDataSource = controlName as BaseDataBoundControl;
    if (controlWithDataSource == null)
        throw new ArgumentException("Control does not inherit BaseDataBoundControl.");

    SqlConnection conn = new SqlConnection();
    SqlCommand cmd = new SqlCommand();

    conn.ConnectionString = ConfigurationManager.ConnectionStrings["SqlConn"].ToString();
    cmd.Connection = conn;

    try {
        cmd.CommandText = query;

        DataTable dt = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(cmd);

        adapter.Fill(dt);

        // here reference the new control
        controlName.DataSource = dt;
        controlName.DataBind();

    } catch (Exception error) {
        Label1.Text = "Error!<br/>" + error;
    }
} 
```

您可能可以将方法的签名更改为此类，因此您根本不需要强制转换

```
protected void sqlQuery(BaseDataBoundControl controlName, String query) 
```

# sass - 如何枚举 SCSS 类

> ID：12707879
> 
> 赞同：4
> 
> 时间：2012-10-03T11:49:56.043
> 
> 标签：sass

如何在 Sass (scss) 中以逗号分隔类而不在编译代码中重复 CSS 本身？

我有：

```
@for $i from 1 through ($maxcolumns){
  .col#{$i}{
    //code for all columns
  }
} 
```

这会产生

```
.col1{
  //code
}
.col2{
  //code
} 
```

但是我更喜欢

```
.col1, .col2, ...{
  //code
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:28:40.423

这就是@extend 的用途：

```
%commonStyles {
    border: 1px solid;
}

@for $i from 1 through 5 {
  .col#{$i}{
    @extend %commonStyles;
  }
} 
```

生成：

```
.col1, .col2, .col3, .col4, .col5 {
  border: 1px solid;
} 
```

# javascript - HTML Canvas 更新已绘制的所有内容的笔触颜色

> ID：12707880
> 
> 赞同：0
> 
> 时间：2012-10-03T11:50:01.010
> 
> 标签：javascript, canvas, coffeescript

我有一个带有颜色选择器的界面，允许用户更改笔触颜色，但发生的事情是，我开始绘制 - 它绘制黑色。我将笔画更改为红色，然后开始绘画——所有黑色的东西现在都变成了红色。我一点也不知道为什么。

这是我认为相关的代码。这一切都在一个咖啡脚本类中

```
canvasMouseDown: (event) ->
  @offset = $(@canvas).offset()
  _x = @offset.left
  _y = @offset.top
  @ctx.moveTo event.pageX - _x, event.pageY - _y

  # does nothing more than save the current canvas via getImageData() to allow an undo
  @saveUndoState()

  @ctx.strokeStyle = @attr.stroke

  @canvas.bind "mousemove.canvasDraw", (e) =>
    x = e.pageX - _x
    y = e.pageY - _y

    @ctx.lineTo x, y
    @ctx.stroke()

initCanvas: ->
  @ctx = @canvas[0].getContext '2d'

  $(@canvas).bind "mousedown.canvasDraw", (e) =>
    @canvasMouseDown e
  $(@canvas).bind "mouseup.canvasDraw", (e) =>
    @canvasMouseUp e 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:41:55.983

废话。忘记在 mousedown 上包含 ctx.beginPath，在 mouseup 上包含 ctx.closePath

# ruby-on-rails-3.1 - Rails 3.1 缩略图图像旋转/即时调整大小

> ID：12707881
> 
> 赞同：0
> 
> 时间：2012-10-03T11:50:04.183
> 
> 标签：ruby-on-rails-3.1

我想知道是否有一种（简单的）方法可以在通过资产管道提供服务之前对 rails 中的图像进行预处理。值得注意的是，我正在寻找旋转和调整图像大小，希望有类似的东西

```
/thumbs/my_thumb.png?deg=35&height=50 
```

回形针可以做到这一点吗？大概我需要创建一个新的模型/控制器和某种？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:54:20.783

如果您希望调整图像大小并保存，请使用

```
class User < ActiveRecord::Base
  attr_accessible :avatar
  has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" }
end 
```

在你看来，

```
<%= image_tag @user.avatar.url(:medium) %>
<%= image_tag @user.avatar.url(:thumb) %> 
```

# mysql - Pig STORE 到 MySQL 数据库 - ClassNotFoundException: 'com.mysql.jdbc.Driver'

> ID：12707883
> 
> 赞同：0
> 
> 时间：2012-10-03T11:50:14.257
> 
> 标签：mysql, jdbc, apache-pig

我正在与 Pig 合作，我正在尝试将我的结果存储在 MySQL 数据库中。根据我在这个网站上找到的帮助，我正在使用：

```
STORE final_data INTO '$dbTable' USING org.apache.pig.piggybank.storage.DBStorage('com.mysql.jdbc.Driver','jdbc:mysql://$host:$port/$db','$dbUser','$dbPass','INSERT INTO $dbTable'); 
```

我也在导入罐子（目录是正确的）： piggybank.jar, mysql-connector-java-5.1.20-bin.jar

但是，当我运行 Pig 脚本时出现以下错误：

```
[MainThread] ERROR org.apache.pig.piggybank.storage.DBStorage - can't
load DB driver:com.mysql.djbc.Driver

java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

[MainThread] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 2999:
Unexpected internal error. could not instantiate
'org.apache.pig.piggybank.storage.DBStorage' with arguments
'[com.mysql.jdbc.Driver, jdbc:mysql://x.xxx.xxx.xxx:xxxx/database,
username, password, INSERT INTO myTable]' 
```

有人看到代码错误吗？或者，也许我错过了一个罐子？如果您对如何在 MySQL 数据库中存储 Pig 数据有其他建议，我也很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:37:13.277

> 尝试将 mysql-connector-java 添加到 PIG_CLASSPATH

谢谢，这正是我需要做的！做 REGISTER 显然是不够的。

# objective-c - XCODE 子视图大小不匹配

> ID：12707886
> 
> 赞同：1
> 
> 时间：2012-10-03T11:50:39.467
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

请看这张照片：

![](../Images/db51bd83d259321a2177c025f8f1cb6f.png)

我正在尝试从书中练习一个多视图示例。

左边是主视图，中间是连接到“Page 2”栏按钮的子视图。最右边的是模拟器的结果。

程序编译成功。但是，结果是子视图似乎向下移动了一点。不知道是设置问题还是代码问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:00:50.677

它可能会有所帮助

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

# php - 在 LDAP 'lastlogon' 查找中，我如何破译结果？

> ID：12707888
> 
> 赞同：1
> 
> 时间：2012-10-03T11:50:43.030
> 
> 标签：php, active-directory, ldap

我正在使用 PHP 脚本使用 LDAP 从 Active Directory 中获取数据。

当我得到“lastlogon”的用户值时，我得到一个像 129937382382715990 这样的数字

我试图弄清楚如何从中获取日期/时间，但不知道，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:57:43.200

[在PHP：LDAP 函数](http://www.php.net/manual/en/ref.ldap.php#61144)页面上阅读此评论。

> 它们都使用“间隔”日期/时间格式，其值表示自 1601 年 1 月 1 日（UTC，0 或 0x7FFFFFFFFFFFFFFF，9223372036854775807 表示帐户永不过期）以来的 100 纳秒间隔数：[https://msdn.microsoft.com/en-us/library/ms675098(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/ms675098(v=vs.85).aspx)
> 
> 因此，如果您需要将其从/转换为 UNIX 时间戳，您可以通过以下方式轻松计算差异：
> 
> ```
> <?php
> $datetime1 = new DateTime('1601-01-01');
> $datetime2 = new DateTime('1970-01-01');
> $interval = $datetime1->diff($datetime2);
> echo ($interval->days * 24 * 60 * 60) . " seconds\n";
> ?> 
> ```
> 
> 两个日期之间的差异是 11644473600 秒。不要依赖浮点计算或其他可能计算错误的数字（包括时区或类似的东西）。
> 
> 现在您可以从 LDAP 字段转换：
> 
> ```
> <?php
> $lastlogon = $info[$i]['lastlogon'][0];
> // divide by 10.000.000 to get seconds from 100-nanosecond intervals
> $winInterval = round($lastlogon / 10000000);
> // substract seconds from 1601-01-01 -> 1970-01-01
> $unixTimestamp = ($winInterval - 11644473600);
> // show date/time in local time zone
> echo date("Y-m-d H:i:s", $unixTimestamp) ."\n";
> ?> 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:57:33.887

这是自 1601 年 1 月 1 日 00:00:00 UT 以来的 100 纳秒滴答数。

[维基百科中的系统时间](http://en.wikipedia.org/wiki/System_time)文章可以为您提供更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:05:48.183

那这个呢：

```
$timeStamp = 129937382382715990;
echo date('Y-m-d H:i:s', $timeStamp); 
```

编辑 - - -

我刚刚尝试了以下方法，并注意到除非您机器上的时钟设置在未来 10 年，否则此方法将不起作用。下面是我用来证明上述内容几乎没有用的代码，除非你做更多的处理可能......

```
$time = time();
echo date('Y-m-d H:i:s', $time);  

echo "<br />";

$timeStamp = 129937382382715990;
echo date('Y-m-d H:i:s', $timeStamp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-08T17:39:35.013

就我而言，我使用的是 Pentaho。使用 a`Modified Javascript value`您可以转换值，`lastLogon`是我要从数据流转换的列：

```
calendar = java.util.Calendar.getInstance();

calendar.setTime(new Date("1/1/1601"));
base_1601_time = calendar.getTimeInMillis();

calendar.setTime(new Date("1/1/1970"));
base_1970_time = calendar.getTimeInMillis();

ms_offset = base_1970_time - base_1601_time;

calendar.setTimeInMillis( lastLogon / 10000 - ms_offset); //lastLogon is a column from stream
var converted_AD_time = calendar.getTime(); // now just add this variable 'converted_AD_time'  to the 'Fields' as a show in the image below 
```

[![在此处输入图像描述](../Images/3f838987f612ad8d957276bdd7ff8287.png)](https://i.stack.imgur.com/JIutg.png)

# java - 由链表备份的 StringBuilder

> ID：12707894
> 
> 赞同：4
> 
> 时间：2012-10-03T11:51:14.550
> 
> 标签：java, stringbuilder

我注意到它`StringBuilder`由一个数组备份，这使得它分配了一个内存块。我不喜欢这种行为，因为内存高度碎片化，有时很难找到足够大的内存块，这会触发 GC ......

我想知道是否有一个`StringBuilder`由链表备份的版本，它对内存更友好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:56:05.670

首先，我会严重质疑是否需要替代方案：对于*大多数*用例，实现`StringBuilder`是完全明智的，并且工作得很好。在你决定之前测量。

如果您确实需要如此庞大的类似对象以至于这成为一个问题，那么像[Ropes for Java](http://ahmadsoft.org/ropes/)这样的东西可能会有所帮助：它实际上是一个包含许多不同`CharacterSequence`实现（具有公共接口[`Rope`](http://ahmadsoft.org/ropes/doc/org/ahmadsoft/ropes/Rope.html)）的库，针对不同的交互进行了优化。

# android - 如何设置 ViewPager 页面的布局？

> ID：12707896
> 
> 赞同：1
> 
> 时间：2012-10-03T11:51:21.360
> 
> 标签：android

我的 ActionBar 上有两个选项卡，ViewPager 中有四个页面。我需要为这些情况定义和指定八种不同的布局。我已经编写了 XML 布局，但是我在哪里设置它们呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:56:54.230

以下是您可以使用的一些不错的教程：

[http://android-developers.blogspot.in/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)

[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

[https://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](https://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

# vb.net - 将数字字符串转换为 sqldbtype

> ID：12707899
> 
> 赞同：0
> 
> 时间：2012-10-03T11:51:34.253
> 
> 标签：vb.net

```
Dim MyType as String = "numeric"
Dim sdtype As SqlDbType  sdtype = DirectCast([Enum].Parse(GetType(SqlDbType), MyType), SqlDbType) 
```

不适用于数字。我想知道如何处理这种数据类型。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:11:41.753

枚举根本不包含值“ `SqlDbType`numeric”，因此不可能将此类字符串强制转换为该枚举。

为避免错误，请使用这样的代码：（C#，不熟悉 VB.NET 抱歉）

```
SqlDbType dbType;
if (Enum.TryParse<SqlDbType>(myType, true, out dbType))
{
    MessageBox.Show("type: " + dbType);
}
else
{
    MessageBox.Show("invalid type: " + myType);
} 
```

但是有多种数字类型可用，例如`Float`，将字符串更改为其中一种应该可以正常工作：

```
Dim MyType as String = "float" 
```

SQL Server 数据库提供程序的所有可用数据类型包括：

```
大整数
二进制
少量
字符
约会时间
十进制
漂浮
图片
诠释
钱
NChar
文本
NVarChar
真实的
唯一标识符
小日期时间
小整数
小钱
文本
时间戳
小整数
变量二进制
变量字符
变体
xml
UDT
结构化的
日期
时间
日期时间2
日期时间偏移

```

任何尝试转换不在此列表中的字符串都将导致错误。

**编辑**：重新考虑看起来您正在使用 Access 数据库？在这种情况下，使用`OleDbType`而不是`SqlDbType`，只需将代码更改为：

```
Dim sdtype As OleDbType  sdtype = DirectCast([Enum].Parse(GetType(OleDbType), MyType), OleDbType) 
```

它应该可以工作，因为`OleDbType`确实包含“数字”。

# c++ - 从字符串转换为 LPCTSTR 时遇到问题

> ID：12707902
> 
> 赞同：0
> 
> 时间：2012-10-03T11:51:46.367
> 
> 标签：c++, string, mfc

我正在尝试将一些文本放在静态文本小部件中，如下所示：

```
m_StartupTime.SetWindowText(someStringVariable); 
```

并得到一个错误：

> 'CWnd::SetWindowTextA' : 无法将参数 1 从 'std::string' 转换为 'LPCTSTR'

我尝试过使用该`c.str()`方法，但是当我这样做时，程序编译正常，但在运行时崩溃，抛出错误：

![错误](../Images/226e8694c426d50e3702938ded80d72a.png)

所以我正在弄清楚问题是否与转换有关，还是与此有关？

使用 CString 并不能解决问题，我尝试从 Unicode 字符集切换到多字节，但没有成功。哦，我正在MFC中开发。

编辑：找到解决方案！我使用了 CString 类。

```
string a = "smth";
CString str(a.c_str()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:29:45.463

断言对话框显示断言发生的位置：文件 winocc.cpp，第 246 行。

查看代码，这是该文件中的行：

```
ENSURE(::IsWindow(m_hWnd) || (m_pCtrlSite != NULL)); 
```

您的断言似乎与字符串无关，但控件不存在（还没有？），即控件窗口无效或不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:40:48.723

```
CA2T str(someStringVariable.c_str());
m_StartupTime.SetWindowText(str);

```

假设 someStringVariable 具有 std::string 类型。包括 AtlBase.h 来编译它。

# gcc - 您可以将 D 目标文件与 C 目标文件链接起来吗？

> ID：12707904
> 
> 赞同：0
> 
> 时间：2012-10-03T11:51:46.713
> 
> 标签：gcc, compiler-construction, linker, dmd, object-files

假设我有两个源文件，一个是用 D 编程语言编写的，另一个是用 C 编程语言编写的。我都只是编译它们，使用 DMD（数字火星 D 编译器）的 D 源和使用 GCC 编译器的 C 源。

结果将是来自不同来源的两个 .o（对象）文件。是否可以将这两个文件链接到一个可执行文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:25:56.923

这取决于很多事情。处理参数有不同的方式：调用者设置它们，被调用者清理（Windows 中的 Pascal 风格，更紧凑）；或者调用者设置和清理（C 风格，使用更多空间，因为清理对每个调用站点重复）。参数可以通过值或引用传递。数据（尤其是数组和结构）可以在内存中以不同的方式布局。快速查看[D 的主页](http://dlang.org)，它包含诸如不可变数据和本机关联数组之类的东西，必须在 C 中匹配（并且可能需要在 D 的运行时中进行链接，除非那个构建在您系统的 C 库上，否则您将在很多的痛苦）。等等。*如果*你知道事情是如何完成的细节，你当然可以提供必要的胶水和缺少的编译器支持功能，但它不会很容易。对于 GCC 编译器，有一些保证和共性会有所帮助，对于不相关的编译器，这可能更像是一场赌博。有一个基于 LLVM 的[D 编译器](http://llvm.org/ProjectsWithLLVM/#LDC)，我猜它有更多使用 gcc 的机会，因为 clang 的目标之一是 GCC 兼容性。

# mysql - 加入一个可选的空值

> ID：12707906
> 
> 赞同：2
> 
> 时间：2012-10-03T11:51:52.117
> 
> 标签：mysql, join, null

我在使用以下查询时遇到问题：

```
SELECT 
    job.name,
    job_element.label,
    job_element_role_hours.role,
    job_element_role_hours.hours_budgeted,
    latest_rate.hourly_rate,
    ( job_element_role_hours.hours_budgeted * latest_rate.hourly_rate ) AS line_cost
FROM
    job_element
    INNER JOIN job ON job_element.job = job.id
    INNER JOIN job_element_role_hours ON job_element_role_hours.element = job_element.id
    LEFT JOIN(
        SELECT 
            rate.*
        FROM
            rate
        LEFT JOIN rate AS newest ON (
            rate.role = newest.role
            AND COALESCE(rate.client_company, 1) = COALESCE(newest.client_company, 1)
            AND COALESCE(rate.client_group, 1) = COALESCE(newest.client_group, 1)
            AND COALESCE(rate.client_contact, 1) = COALESCE(newest.client_contact, 1)
            AND newest.date_from > rate.date_from
        )
        WHERE newest.id IS NULL
    ) AS latest_rate ON (
        latest_rate.role = job_element_role_hours.role
        AND (
            COALESCE(latest_rate.client_company, 1) = COALESCE(job.client_company, 1)
            OR latest_rate.client_company IS NULL
        )
        AND (
            COALESCE(latest_rate.client_group, 1) = COALESCE(job.client_group, 1)
            OR latest_rate.client_group IS NULL
        )
        AND (
            COALESCE(latest_rate.client_contact, 1) = COALESCE(job.client_contact, 1)
            OR latest_rate.client_contact IS NULL
        )

    )
WHERE job.id = 4 
```

所以......这个查询获取一个作业的元素列表。每个元素都按“角色小时数”进行细分——例如，一个名为“构建 HTML 电子邮件”的元素可能有两个小时的设计师和两个小时的开发者——然后根据每个元素的小时费率计算成本角色。

问题是我将**latest_rate**子查询加入到主查询中。这是我的费率表：

```
'CREATE TABLE `rate` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `client_company` int(11) DEFAULT NULL,
  `client_group` int(11) DEFAULT NULL,
  `client_contact` int(11) DEFAULT NULL,
  `role` int(11) DEFAULT NULL,
  `date_from` datetime DEFAULT NULL,
  `hourly_rate` decimal(18,2) DEFAULT NULL,
  `last_edited_by` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) 
```

一个角色可能有多种费率：“全局”费率，其中设置了角色，但 client_company、client_group 和 client_contact 字段为 NULL；设置了角色和 client_company 但其他所有内容为 NULL 的公司特定费率，以及设置了角色、client_company 和 client_contact 但 client_group 为 NULL 的客户特定费率。

我想为“最接近”匹配为 Job 设置的 client_company、client_group 和 client_contact 的角色获得一个费率。因此，如果有一个设置了角色和 client_company 的 Rate 记录（并且 client_company 与 Job 匹配），我想要那个。否则，我将退回到带有 NULL client_company 的那个。

我的加入尝试显然是错误的：

```
AND (
     COALESCE(latest_rate.client_company, 1) = COALESCE(job.client_company, 1)
     OR latest_rate.client_company IS NULL
) 
```

它将返回与 client_company 匹配或具有 NULL client_company 的所有记录。

我怎样才能得到它来获得最匹配的字段？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T07:28:23.880

您可以尝试使用一个查询，该查询基本上针对您绝对想要匹配的一个参数获取所有匹配率 - 似乎是`role`您的情况。

然后你可以做类似的事情：

```
MAX(
    CASE WHEN <conditions 1> THEN <calculation 1> END,
    CASE WHEN <conditions 2> THEN <calculation 2> END,
    ...
    ) 
```

这将为您提供可能的最大费率，即，如果您有最匹配的字段，则适用的费率。

# javascript - 在 Javascript 上，为什么未使用 bind() 绑定的函数仍然绑定到对象？

> ID：12707909
> 
> 赞同：4
> 
> 时间：2012-10-03T11:52:07.903
> 
> 标签：javascript

在下面的代码中，第一个函数没有绑定到`obj`，但第二个函数是，所以`f()`返回`fifi`并按预期`g()`返回。`Mark Twain`但是第三次​​尝试，是by `(obj.getCallBack)`first，现在是一个函数，然后调用它，本质上应该和`f`case一样。但他们确实打印出来`Mark Twain`。为什么他们不一定要`obj`使用`bind()`但仍然通过`this`指向来执行`obj`？

（第四次尝试只是一个通常的方法调用，并且`this`应该绑定到调用该方法的对象）。

（在当前的 Chrome、Firefox 和 IE 9 上测试）

```
window.name = "fifi";

var obj = {
    name: "Mark Twain",
    getCallBack: function() {
        return this.name;
    }
}

var f = obj.getCallBack;
var g = f.bind(obj);

console.log(f);
console.log(f());

console.log(g);
console.log(g());

console.log((obj.getCallBack)());
console.log(obj.getCallBack()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:02:37.810

您忘记了，如果函数作为某个对象的属性被调用，则该对象将是`this`调用的对象。所以：

```
obj.getCallBack() //The function referenced by `obj.getCallBack`
                    //is called as a property of `obj`, so obj will be `this`
                    //for the call

f()    //The function referenced by f, is not called as a property of some object so
         //`this` will depend on strict mode. 
```

在这些基本规则之后，将调用绑定函数，可以将其视为代理函数（任何 shim 都会这样做），用于`.call/.apply`显式设置目标函数的上下文。所以`this`代理函数的值无关紧要，但在幕后它是由基本规则设置的。

编辑：

`(obj.getCallBack)` [不将函数作为值返回，因为未调用 getValue。](http://ecma-international.org/ecma-262/5.1/#sec-11.1.6). `obj.getCallback`所以它与第一篇文章完全相同。

所以你可以这样做并且不会出错：

```
(obj.getCallback) = 5; 
```

相对于：

```
(function(){}) = 5; //invalid assignment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:37:43.257

为了补充 Esailija 的回答，实际效果应该是：

```
var obj = {
    name: "Mark Twain",
    getCallBack: function() {
        return function() { return this.name; };
    }
}

var f = obj.getCallBack();
var g = f.bind(obj);

console.log(f);
console.log(f());

console.log(g);
console.log(g());

console.log((obj.getCallBack())());
console.log(obj.getCallBack()());

console.log(obj.getCallBack().bind(obj)()); 
```

然后在这种情况下，第三次尝试将给出`fifi`，第四次尝试也将给出。为了得到里面的名字`obj`，第五次尝试绑定它并调用它，然后会得到`Mark Twain`。

但是返回callBack函数的方法应该绑定它，所以我们把代码改成：

```
var obj = {
    name: "Mark Twain",
    getCallBack: function() {
        return (function() { return this.name;}).bind(this);  // <-- note here
    }
} 
```

现在所有的尝试，甚至`f()`，都将返回`Mark Twain`。

# java - Java应用程序无法从mysql中检索数据

> ID：12707917
> 
> 赞同：-1
> 
> 时间：2012-10-03T11:52:56.807
> 
> 标签：java, eclipse, apache, easyphp

一个奇怪的问题。
我使用eclipse在java中创建了一个应用程序，其中数据是从数据库中检索的，但在第二行它停止响应并且本地主机服务器也停止响应......

```
Class.forName("com.mysql.jdbc.Driver");
Connection con=DriverManager.getConnection("jdbc:mysql://127.0.0.1:8080/testdb/", "root",""); 
```

通过调试我注意到eclipse调用了这个exe

```
c:\program files\java\jre7\bin\javaw.exe 
```

但它没有响应。
apache 服务器启动但没有响应。
它会生成这个错误文件
Apache error.log

```
Command line: 'C:\\PROGRA~1\\EASYPH~1.1\\Apache\\bin\\apache.exe -d C:/Program Files/EasyPHP-12.1/apache'
[Wed Oct 03 16:27:03.579034 2012] [mpm_winnt:notice] [pid 6776:tid 464] AH00418: Parent: Created child process 5576
[Wed Oct 03 16:27:04.392034 2012] [mpm_winnt:notice] [pid 5576:tid 472] AH00354: Child: Starting 64 worker threads.
[Wed Oct 03 16:27:08.094034 2012] [mpm_winnt:notice] [pid 7088:tid 476] AH00364: Child: All worker threads have exited.
[Wed Oct 03 16:52:36.275034 2012] [mpm_winnt:warn] [pid 5576:tid 700] (OS 64)The specified network name is no longer available.  : AH00341: winnt_accept: Asynchronous AcceptEx failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:54:42.390

我会检查 MySQL 是否正在侦听端口 8080。默认值为 3306。您是否将 MySQL 守护程序设置为侦听端口 8080？

# linux - 列出以句点或分号结尾的行

> ID：12707921
> 
> 赞同：5
> 
> 时间：2012-10-03T11:53:10.813
> 
> 标签：linux, unix

如何使用 grep 或 egrep 编写命令以显示文件中以分号“;”结尾的所有行 或句号“.” 特点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T15:00:27.270

使用`grep`(and `egrep`) 时，美元符号 ( `$`) 匹配行尾，而 carret ( `^`) 匹配行首。因此，例如，如果你想匹配包含“fish”这个词并且没有其他字符的行，你可以使用这个：

```
grep '^fish$' 
```

使用单引号来包装搜索表达式很重要，这样 bash 就不会对它做任何有趣的事情。

因此，要回答您的问题，您将需要使用搜索模式`'[.;]$'`来匹配一个`.`或`;`字符后跟一个行尾字符。我将此用作示例测试文件：

```
$ cat testfile 
one
two;
three.
four: 
```

结果如下：

```
$ grep '[.;]$' testfile 
two;
three. 
```

如果您还想在行尾允许空格，请使用此模式：`'[.;][ \t]*$'`它将与 or 之后的任意数量的空格或制表符`.`匹配`;`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T11:54:31.860

这应该这样做：

```
$ grep -E '(;|\.)$' 
```

该`-E`开关启用正则表达式模式。该表达式仅匹配以分号或句点结尾的行。

注意：我没有测试过这个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T11:55:52.913

没有`-E`：

```
grep '\.\|;$' filename 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T12:13:39.213

三种方式：其中任何一种对我有用。

一：

```
grep '[\.;]$' your_file 
```

二：

```
awk '/\.$/ || /;$/' your_file 
```

三：

```
awk '/[\.;]$/' your_file 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T12:15:02.477

使用 sed ：

```
sed -rn '/(\.|;)$/p' 
```

用 awk

```
awk '/(\.|;)$/' 
```

# xaml - 在 Windows 应用商店应用程序/Metro XAML 中将 WebView 设置为自动高度

> ID：12707922
> 
> 赞同：3
> 
> 时间：2012-10-03T11:53:14.067
> 
> 标签：xaml, webview, windows-8, windows-runtime

如果我把 a 放在 a中，它会将`TextBlock`a`ListView`扩展`ListView`到文本的长度。但是，a`WebView`不这样做。

反正有没有`WebView`拉伸它的父元素？内容加载后是否必须执行某些操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:49:19.397

与`Canvas`元素一样，`Webview`不会拉伸以适应其内容。您将需要设置绝对大小`WebView`或找到其他方法来设置不依赖于其内容的大小。

# node.js - 有理由不在 node.js 后端使用 Backbone.Model 吗？

> ID：12707923
> 
> 赞同：4
> 
> 时间：2012-10-03T11:53:20.453
> 
> 标签：node.js, backbone.js

我在想……当我使用 编写 Web 应用程序时`Backbone.js`，大多数时候我会复制模型：一个版本用于语言后端`X`，使用 ORM `Y`，一个用于前端使用 Backbone。很多共同的验证，用于生成 url 的相同 sh*t 等等......我刚开始`Node.js`，我想既然你可以在后端和前端运行很多相同的代码，为什么不使用 Backbone.js后端的模型也是如此，这样代码重复就会减少吗？我找不到关于那个的信息......任何指针？这是一个坏主意，为什么？我只能猜测，在这种情况下，您必须编写`Backbone.sync`数据库持久性。

**编辑**

实现这一目标需要解决的实际问题：

1.  `Backbone.sync`使用 mongodb（或使用的任何数据库）。
2.  使用 node.js 文件构建客户端 javascript 文件，可能的解决方案：[browserify](https://github.com/substack/node-browserify)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:55:49.787

在尝试了一段时间使用 构建后端后`Backbone`，我发现这完全是矫枉过正，带来的问题多于简化。相反，我回滚到使用简单的包装器`mongodb`。

我最初使用 Backbone 的想法是在后端和前端之间共享 url 生成和模型验证。但事实上，您不需要 Backbone。所以我为验证和 url 生成编写了可重用的函数，并用来`browserify`使它们在客户端可用。

当然，如果更多的人构建用于运行 Backbone 后端的工具，这一切都可能在未来发生变化……但在撰写本文时，Backbone 绝对不是为此而设计的，并且没有库可以帮助适应它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:19:55.140

有点过时，但还是很有趣：[在服务器上使用 Node.js 和 Socket.io 重新使用 Backbone.js 模型来构建实时应用程序](http://andyet.net/blog/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/)

在 node.js 上使用 Backbone 时，通过持久化到 couchDB 来替换默认 Backbone.sync 的库：[node-backbone-couch](https://github.com/saimonmoore/node-backbone-couch)

# multithreading - 服务器上的 CPU 密集型和 IO 密集型进程的多进程与多线程

> ID：12707924
> 
> 赞同：5
> 
> 时间：2012-10-03T11:53:22.500
> 
> 标签：multithreading, cassandra, operating-system, multiprocessing

我有一台服务器，比如 16 核和 32G 内存。对于像这样的进程`apache`，它为每个新连接生成一个新线程，以下哪个替代方案更好，为什么？同样在应用程序的情况下会发生什么`cassandra`。如果 cassandra 有很多写入内存的情况，这意味着在同一台机器上拥有两个“节点”会有任何好处吗？

1.  **同一应用程序的多个（例如两个）实例在同一台机器上运行并服务于两个不同的端口。**（可能是本机前面另一台机器上的 LB）。

    我很困惑操作系统将如何处理多线程应用程序的两个实例。这两个进程都会在所有内核上运行线程吗？在什么情况下会发生上下文切换（进程和线程之间）以及它将如何影响性能？

2.  **在一个端口上服务的多线程应用程序的单个实例。**

对于像 cassandra 这样的应用程序，其中线程将拥有它们将写入的共享内存，线程之间的上下文切换何时发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:06:08.777

在 Windows 上下文中（以及 AFAIK 也在 Unix 上），进程只是围绕*执行线程的*结构上下文（并且也有一些内存保护） ，这意味着执行代码的事物只是一个线程。

进程不能像线程在同一进程中那样容易地相互共享内存。

但它始终是执行代码的线程。

现在，您的应用程序的两个实例在同一台机器上运行，多线程将使用可用的 CPU 内核，并且必须在它们之间**共享**这些内核。如果您的内核数量多于应用程序中的线程总数，那么您很幸运，因为这意味着它*可以*让所有线程运行，而无需上下文切换来为另一个线程腾出位置。然而，这是*理论上*的。实际上，操作系统必须与其他线程（甚至可能不是您的应用程序的线程）共享在内核上运行的特定线程的时间，因此每个线程都有一定的时间片（量子），它可以在被切换之前运行.

操作系统线程调度程序对此进行控制。

因此，性能取决于正在运行的线程数、可用内核数以及这些线程在做什么。假设它们可以在核心上运行，那么事情可能会很快。但这种情况很少发生，线程可能需要等待、阻塞等。

运行两个实例或一个实例多线程只会产生真正的区别，我认为在运行两个实例的情况下，线程数多于内核数。

还有 IO 的因素，它不取决于您的 CPU 或线程，而是取决于您的硬盘延迟和 RAM 延迟。如果您的许多线程将大部分时间都花在等待 IO 上，那么运行您的应用程序的一两个实例不会有太大的不同。

然而，这是性能和线程，*除非经过测量*，否则很难给出准确的预测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:03:16.673

在同一台机器上运行的同一应用程序的多个实例需要进程间同步。如果进程间同步量较低，则此方法可能是有益的。此外，如果您的应用程序本身是多线程的，那么您只需要一个进程。如果您的应用程序是单线程的，那么您可能希望运行多个实例，例如每个 CPU 一个进程，以利用硬件资源。

如果您的进程受 IO 限制，则吞吐量不受 CPU 限制，一个线程可以服务所有 IO 请求。

> 对于像 cassandra 这样的应用程序，其中线程将拥有它们将写入的共享内存，线程之间的上下文切换何时发生？

当两个或更多线程尝试同步它们对共享内存的写入时，就会发生上下文切换。

# c++ - 食人魔构建 gcc 4.7

> ID：12707927
> 
> 赞同：0
> 
> 时间：2012-10-03T11:53:28.787
> 
> 标签：c++, ogre3d, gcc4.7

我正在尝试在 MacOSX 10.6 上使用 gcc 4.7 构建一个名为 Ogre3d v1.8 的库。我尝试从 MacPorts 和 gFortran 网页安装 gcc 版本。两者都有相同的问题，我在互联网上找不到太多关于此的信息。

我的问题是我收到此错误：

```
Scanning dependencies of target OgreMain
[ 0%] Building CXX object OgreMain/CMakeFiles/OgreMain.dir/src/OgreAlignedAllocator.cpp.o
In file included from /usr/local/gcc-4-7-svn/lib/gcc/x86_64-apple-darwin10/4.7.0/include/c++/bits/postypes.h:42:0,
from /usr/local/gcc-4-7-svn/lib/gcc/x86_64-apple-darwin10/4.7.0/include/c++/bits/char_traits.h:42,
from /usr/local/gcc-4-7-svn/lib/gcc/x86_64-apple-darwin10/4.7.0/include/c++/string:42,
from /Users/parwrange/Desktop/ogre/ogre_src_v1-8-1/OgreMain/include/OgrePrerequisites.h:33,
from /Users/parwrange/Desktop/ogre/ogre_src_v1-8-1/OgreMain/include/OgreArchive.h:31,
from /Users/parwrange/Desktop/ogre/ogre_src_v1-8-1/OgreMain/include/OgreStableHeaders.h:41,
from /Users/parwrange/Desktop/ogre/ogre_src_v1-8-1/OgreMain/src/OgreAlignedAllocator.cpp:28:
/usr/local/gcc-4-7-svn/lib/gcc/x86_64-apple-darwin10/4.7.0/include/c++/cwchar:46:19: fatal error: wchar.h: No such file or directory
compilation terminated.
make[2]: *** [OgreMain/CMakeFiles/OgreMain.dir/src/OgreAlignedAllocator.cpp.o] Error 1
make[1]: *** [OgreMain/CMakeFiles/OgreMain.dir/all] Error 2
make: *** [all] Error 2 
```

换句话说，看起来**头文件 wchar.h 丢失了。**

我已经能够使用 gcc 4.7 安装构建其他库。所以我猜这是Ogre3d v1.8特有的东西。也许与包含顺序有关。但由于我在寻找其他有此问题的人时遇到问题，我希望这里有人对如何做有一些好的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:26:43.357

今天我遇到了同样的问题，但在与 Ogre 不同的项目中。您是否有可能使用 64 位操作系统并以 32 位编译可执行文件？

如果是这种情况，那么您需要 32 位版本的 glibc-devel（或等效的 - 取决于 Unix 风格）包。

尝试做这样的事情：

```
locate wchar.h    //this will return some paths to wchar.h
                  //like /usr/include/wchar.h
//use this path:
rpm -qf /usr/include/wchar.h  //this will return package name that includes the file

yum search 'package-name' 
```

您应该拥有 x86_64 和 i386/i686 版本的软件包。如果您只有其中一个，则需要安装第二个。

顺便说一句，我不确定它是 glibc-devel、glibc-headers 还是任何其他名称，因为我遇到过这个问题几次，使用不同的文件，但总的来说这是解决问题的方法。

# wpf - wpf windowstyle 无边框样式

> ID：12707931
> 
> 赞同：1
> 
> 时间：2012-10-03T11:53:45.107
> 
> 标签：wpf, resize, windowless

我有 wpf 应用程序我正在使用 WindowStyle none 并且我正在自己添加窗口控件（最小化，关闭）

但 WindowStyle none 仍然有窗口调整大小边框

窗口调整大小边框很好，但我想在 windows xp ， vista ， 7 中设置它的样式

我看到解决方案设置 noresize 但我需要窗口通常可以调整大小（没有调整大小）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:37:36.217

如果您设置`WindowsStyle`为无，并且要删除调整大小边框，则必须构建一个自定义调整大小窗口。

阅读[这篇](http://digitalmoosetracks.com/blog/wpf-transparent-window-with-resizing)文章。它会帮助你。这个想法是你在窗口周围有一堆句柄，并使用 SendMessage() API 调用来处理调整大小事件`user32.dll`。

有很好的代码示例。希望我对你有所帮助。

# mysql - 可以返回消息、收件人姓名和发件人姓名的单个查询

> ID：12707934
> 
> 赞同：2
> 
> 时间：2012-10-03T11:53:54.470
> 
> 标签：mysql

```
Table_Users
id  username
1   Jack
2   Marine
3   Katie
4   Hennry

Table_Messages
id  to_id   from_id Messages
1   2   3   Hello
2   3   2   Hi 
```

**需要一个可以返回消息、收件人姓名和发件人姓名的查询**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:56:34.153

您需要在 table`users`上加入 table`messages`两次，因为您需要获取`to`和`from`users 的等效名称。

```
SELECT  a.id,
        b.`username` TO_NAME,
        c.`username`  FROM_NAME,
        a.Messages
FROM    tbl_Messages a
        INNER JOIN users b
            on a.to_ID  = b.id
        INNER JOIN users c
            on a.from_ID = c.id 
```

# [请参阅 SQLFiddle 演示](http://sqlfiddle.com/#!2/2eadc/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:58:03.820

这是查询：

选择消息作为消息，（从 table_users 中选择用户，其中 id=to_id）作为“From Name”，（从 table_users 中选择用户，其中 id=from_id）作为来自 table_messages 的“To Name”；

# asp.net - 从不同的数据库中选择数据

> ID：12707938
> 
> 赞同：3
> 
> 时间：2012-10-03T11:54:18.177
> 
> 标签：asp.net, sql, ado.net-entity-data-model

我有两个数据库和一个使用 VS 2010 中的实体数据模型获取/设置数据的应用程序。

我在 DB(A) 中执行完整的存储过程，然后使用 DB(B) 中的 EXEC 语句返回数据。数据返回正常且正确，但每当我运行程序时，我都会在 C# 中收到以下异常：

'GetAverageTimes_Result' 上的 'AbandonTime' 属性无法设置为 'String' 值。您必须将此属性设置为“十进制”类型的非空值。

我已经检查过数据模型中的任何地方，值是十进制并设置为可为空等。即使我将其更改为任何其他类型或不可为空的值，我仍然会收到相同的错误。这令人难以置信的沮丧。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:32:21.347

如果序列号在每个数据库的主表上，那么您可以使用完全限定名称将表连接在一起：

创建视图 vWhatever

作为

SELECT（无论你想选择什么）

FROM [Database A].[schema - 通常是 dbo].DSNA_tblMaiin AS

JOIN [数据库 B].[dbo].DSNB_tblMaiin AS b ON a.Serialnumber = b.SerialNumber

JOIN [数据库 C].[dbo].DSNC_tblMaiin AS c ON a.SerialNumber = c.SerialNumber

WHERE（无论您想过滤什么）

去

如果资产在其中一个表中，但不是全部三个（并且您不知道是哪一个），您可以在视图中使用 UNION 来完成它 - 它实际上会将所有三个表放在一起，附加字段你指定（相同的数据类型），直到你有一个大的“虚拟表”前：

创建视图 vWhatever

作为

选择 col1、col2、序列号等。

FROM [数据库 A].[dbo].DSNA_tblMaiin

联合所有

选择 col1、col2、序列号等。

FROM [数据库 B].[dbo].DSNB_tblMaiin

联合所有

选择 col1、col2、序列号等。

FROM [数据库 C].[dbo].DSNC_tblMaiin

去

点符号正是您正在查看的内容。如果您将查询扩展到另一台服务器，它将只是 [ServerName].[DatabaseName].[ObjectSchema].[ObjectName] 而不是 [DatabaseName].[ObjectSchema].[ObjectName]

# c# - 如何使用 DataContractSerializer 为泛型类型编写自定义序列化程序？

> ID：12707939
> 
> 赞同：4
> 
> 时间：2012-10-03T11:54:18.217
> 
> 标签：c#, asp.net, serialization, azure

我想编写一个自定义序列化程序，用于将会话状态存储到**Azure 缓存（预览版）**中，这意味着这个自定义序列化程序必须实现`IDataCacheObjectSerializer`（*如果我错了，请告诉我*）。我需要编写这个自定义序列化程序的原因是我需要序列化一些包含一些`System.Data.Linq.EntitySet`属性的 Linq 对象。并且默认的序列化`NetDataContractSerializer`器无法序列化`EntitySet`.

我的计划是通过使用编写自定义序列化程序`DataContractSerializer`（*我搜索了一些提到`DataContractSerializer`可以序列化的文章`EntitySet`，所以如果我错了，请告诉我*），但问题是我如何编写可以支持泛型类型的自定义序列化程序。

目前，我的自定义序列化程序代码如下：

```
public class CustomSerializer : IDataCacheObjectSerializer
{
    public CustomSerializer()
    { }
    public object Deserialize(System.IO.Stream stream)
    {
        /* How can I know the type of object?????? */
        DataContractSerializer dcs = new DataContractSerializer("Type of object");
    }

    public void Serialize(System.IO.Stream stream, object value)
    {
        DataContractSerializer dcs = new DataContractSerializer(value.GetType());
        dcs.WriteObject(stream, value);
    }
} 
```

顺便说一句，我已将 Linq 序列化模式更改为“单向”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:10:19.257

我没有使用 IDataCacheObjectSerializer，但常见的解决方案如下所示：

```
public sealed class CustomSerializer<T> : IDataCacheObjectSerializer
{
    object IDataCacheObjectSerializer.Deserialize(System.IO.Stream stream)
    {       
        DataContractSerializer dcs = new DataContractSerializer(typeof(T));
        return dcs.ReadObject(stream);
    }

    void IDataCacheObjectSerializer.Serialize(System.IO.Stream stream, object value)
    {
        if (!(value is T)) 
        {
            throw new AgrumentException();
        }
        DataContractSerializer dcs = new DataContractSerializer(typeof(T));
        dcs.WriteObject(stream, value);
    }
} 
```

# android - 带有editText的listView - TextWatcher重新加载视图

> ID：12707943
> 
> 赞同：0
> 
> 时间：2012-10-03T11:54:30.710
> 
> 标签：android, android-layout, android-listview, android-edittext, textwatcher

我`ListView`用 some`TextView`和a 编写了 a `EditText`。这个有一个`TextWatcher`which in`afterTextChange()`方法将一个实例添加到一个 sigleton 类。一切都很好，但是当我滚动`ListView`并修改 an 的值时`EditText`，`ListView`会重新加载并在顶部返回滚动条。这是正常的反馈还是我可以控制这种行为？

**文本观察者的一部分**

```
@Override
    public void afterTextChanged(Editable s) {
        if(!s.toString().isEmpty()){ 
            if (Integer.parseInt(s.toString())!=0){

                HashMap<Products, Integer> into=new HashMap<Products,Integer>();
                Products pr = new Products();
                into = cart.getProdotti();
                pr.set_id(Integer.parseInt(pro.get("id").toString()));
                pr.setPrezzo(Double.parseDouble(pro.get("prezzo").toString()));
                pr.setNome(pro.get("nome").toString());
                boolean flag = false;
                if(!into.isEmpty()){
                    Iterator<Products> iter = into.keySet().iterator();
                    while(iter.hasNext()){
                        if(pr.get_id()==iter.next().get_id()){
                            into.put(pr, Integer.parseInt(s.toString()));
                            cart.setProdotti(into);
                            flag = true;
                        }                       
                    }
                    if(flag==false){
                        into.put(pr, Integer.parseInt(s.toString()));
                        cart.setProdotti(into);
                    }
                }else{
                    into.put(pr, Integer.parseInt(s.toString()));
                    cart.setProdotti(into);
                }
            }
        }
    } 
```

GETVIEW 适配器

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.product_row, null);

        TextView nome = (TextView)vi.findViewById(R.id.nomeProdotto); // title
        TextView descrizione = (TextView)vi.findViewById(R.id.descrizioneProdotto); // artist name
        TextView prezzo = (TextView)vi.findViewById(R.id.prezzoProdotto); // duration
        //ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image
        final EditText quantity = (EditText)vi.findViewById(R.id.quantity);

        product = products.get(position);

        nome.setText(product.get("nome"));
        descrizione.setText(product.get("descrizione"));
        prezzo.setText("€"+product.get("prezzo"));
        quantity.setText("0");
        quantity.addTextChangedListener(new CustomTextWatcher(products.get(position)));
        //imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
        return vi;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:29:49.703

这是正常行为。您需要存储第一个可见索引并在重新加载列表视图时将其设置为它。

您需要在重新加载之前使用 getFirstVisiblePosition() 来查找索引，在重新加载之后使用 setSelection(position) 将其设置为较旧的视图位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:00:11.603

你是`adapter.notifyDataSetChanged()`用来重新加载你的 ListView 吗？如果您使用它，您将不会遇到这样的问题..

# restkit - 如何在 RestKit 中手动进行对象映射？

> ID：12707945
> 
> 赞同：3
> 
> 时间：2012-10-03T11:54:33.397
> 
> 标签：restkit

我在客户端和服务器端都有一个响应对象，如下所示：

客户端 ：

```
//BaseResponse.h
@interface BaseResponse : NSObject{
    NSString *code;
    NSString *message;
    NSObject *responseObject;
}
+(RKObjectMapping *)objectMapping;

//BaseResponse.m
+(RKObjectMapping *)objectMapping{
    RKObjectMapping *baseResponseMapping = [RKObjectMapping mappingForClass:[BaseResponse class]];
    [baseResponseMapping mapKeyPath:@"code" toAttribute:@"code"];
    [baseResponseMapping mapKeyPath:@"message" toAttribute:@"message"];
    [baseResponseMapping mapKeyPath:@"responseObject" toAttribute:@"responseObject"];

    return baseResponseMapping;
} 
```

服务器端 ：

```
public class BaseResponse {
   private String code; 
   private String message;  
   private Object responseObject;
...
} 
```

当我从 ios 调用 restful web 服务时，它返回一个 BaseResponse 对象。但是 BaseResponse 中的 responseObject 可以根据 Web 服务方法而有所不同。所以我在服务器端和客户端做了对象。

所以我的问题是：如何在调用`- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response`方法或`- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects`方法后在 restkit 中手动进行对象映射。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T09:13:01.717

RESTkit 实际上对此有很好的支持。基本上，您需要在响应中包含一些可以用来确定您想要执行的映射类型的内容。

为此，您将映射定义为动态映射，然后从那里开始。

我可以从 wiki 复制示例，但那是作弊，所以我建议您看一下[映射说明的这一部分](https://github.com/RestKit/RestKit/wiki/Object-mapping#dynamic-object-mapping)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T15:48:06.670

我的解决方案是这样

```
...
[objectManager postObject:nil path:path parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    BaseResponse *response = (BaseResponse *)[[result array] objectAtIndex:0];
    NSError *error = nil;
    AppVersion *appVersion = [[AppVersion alloc]init];
    RKMappingOperation *operation = [[RKMappingOperation alloc]
                                                 initWithSourceObject:response.responseObject destinationObject:appVersion mapping:[AppVersion objectMapping] ];

    BOOL success = [operation performMapping:&error];
... 
```

# typescript - TypeScript - 分离代码输出

> ID：12707949
> 
> 赞同：1
> 
> 时间：2012-10-03T11:54:40.830
> 
> 标签：typescript, code-separation

我正在尝试打字稿，我发现它非常有用。

我有一个相当大的项目，我正在考虑使用打字稿重写它。这里的主要问题如下：

文件 A.ts：

```
class A extends B {
    // A stuff
} 
```

文件 B.ts：

```
class B {
    // B stuff
} 
```

如果我用这个命令编译 A.ts：

```
tsc --out compiledA.js A.ts 
```

我会从编译器那里得到错误，因为他不知道如何在扩展后威胁“B”。

因此，“解决方案”将包括在 A.ts 中（作为第一行代码）：

```
/// <reference path="./B.ts" /> 
```

使用相同的命令再次编译 A.ts

```
tsc --out compiledA.js A.ts 
```

将导致compiledA.js 包含B.ts 和A.ts 代码。（这可能非常好）

就我而言，我只需要在compiledA.js 文件中编译A.ts 代码，我不希望B.ts 的东西在那里。

确实，我想要的是：

*   tsc --out A.js A.ts => 只编译 A.ts 的东西
*   tsc --out B.js B.ts => 只编译 B.ts 的东西

我可以通过删除“扩展”关键字来做到这一点，但这样做我会失去大部分打字稿的优点。

有人可以告诉我是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:27:31.907

经过一番研究，我发现问题是由编译器中的 --out 参数引入的。

如果您想处理模块，@silent__thought 解决方案就可以正常工作。如果不是，则需要使用 require 语句（查看问题），然后在没有 --out 参数的情况下编译“main.ts”文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:59:44.477

**编辑：**正如 Andrea 指出的那样，如果您省略`--out`参数，您将获得预期的行为，即没有源文件的组合。我将把这个替代解决方案留在下面，以防它可以帮助其他人。

* * *

我相信您将不得不使用外部模块语法（CommonJS 或 AMD）来执行此操作。

使用您的示例：

**a.ts**

```
import B = module("b")

class A extends B.B {
    // A stuff
} 
```

**b.ts**

```
export class B {
    // B stuff
} 
```

用 编译`tsc --out compiledA.js A.ts`。

这导致使用 CommonJS 系统进行`a.js`导入。`b.js`生成的文件如下所示：

**a.ts**

```
var __extends = this.__extends || function (d, b) {
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
}
var B = require("./b")
var A = (function (_super) {
    __extends(A, _super);
    function A() {
        _super.apply(this, arguments);

    }
    return A;
})(B.B); 
```

**b.ts**

```
var B = (function () {
    function B() { }
    return B;
})();
exports.B = B; 
```

# c# - 将鼠标悬停在诸如组合框之类的东西上时的默认蓝色

> ID：12707950
> 
> 赞同：0
> 
> 时间：2012-10-03T11:54:41.073
> 
> 标签：c#, wpf, combobox, default

> **可能重复：**
> [wpf 设置 ComboBox 选定项突出显示颜色](https://stackoverflow.com/questions/1278144/wpf-set-combobox-selected-item-highlight-color)

首先很抱歉，如果这个问题已经得到解答，我整个晚上都在浏览谷歌，试图找到一个解决方案，甚至不确定我正在搜索的内容是否正确。

我的问题是，当我单击/悬停在组合框/按钮等上时，它会显示默认的系统蓝色，我希望能够将其删除或将其更改为在组合框中的选择上悬停时使用的灰色。这是一个 WPF 项目，我添加了一些图片来显示问题所在。我尝试了几种不同的方法，但都没有运气。我希望我忽略了一个简单的设置。

![在此处输入图像描述](../Images/08a58e54fc0da868d7adb3890e617265.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:12:36.687

在高层次上，您需要设置[ComboBox 的样式](http://msdn.microsoft.com/en-us/library/ms752094.aspx)。

这是一篇很好的[博客](http://www.eidias.com/Blog/2012/2/20/customizing-wpf-combo-box-style)文章，介绍了如何让它看起来完全不同。

要更改默认颜色，您需要这种类型的 xmal（取自此[博客](http://www.eidias.com/Blog/2012/2/20/customizing-wpf-combo-box-style)）

```
 <ControlTemplate x:Key="CustomToggleButton" TargetType="ToggleButton">
    <Grid>
        <Border Name="Border" />
        <Border Name="SmallBorder" />
        <Path Name="Arrow" />
    </Grid>
</ControlTemplate>

<Style TargetType="{x:Type ComboBoxItem}">
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True" />
    <Setter Property="Control.Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                <Border>
                    <ContentPresenter />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type ComboBox}">
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True" />
    <Setter Property="Control.Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid>
                    <ToggleButton Template="{StaticResource CustomToggleButton}" />
                    <ContentPresenter />
                    <TextBox />
                    <Popup>
                        <Grid>
                            <Border>
                                <ScrollViewer>
                                    <ItemsPresenter />
                                </ScrollViewer>
                            </Border>
                        </Grid>
                    </Popup>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# mysql - 需要构造查询以在同一个表中找到记录的父项？

> ID：12707955
> 
> 赞同：0
> 
> 时间：2012-10-03T11:54:48.560
> 
> 标签：mysql, sql

我需要在单个表上构造一个查询。表结构和其中的一些虚拟数据如下

```
id  | username  | seniorid
1   | Superuser |   -1
2   | user1 |    1
3   | user2 |    1
4   | user3 |    3
5   | user4 |    4
6   | user5 |    1
7   | user6 |    6
8   | user7 |    6
9   | user8 |    8
10  | user9 |    9
11  | user10    |    8
12  | user11    |    8
13  | user12    |    8
14  | user13    |    6
15  | user14    |    3
16  | user15    |    2
17  | user16    |    8
18  | user17    |    8 
```

上表中只有一个超级用户。这将是用户层次结构的最高级别。此超级用户是唯一一个将高级 ID 设为 -1 的用户。超级用户是所有用户的父级。在上表中，每个用户可能有也可能没有子用户。表中提到了父用户和子用户之间的关系，因此seniorid中的数字只是另一个用户的id。

例如：

考虑关注用户

```
id  | username  | seniorid
18  | user17    |    8 
```

在上述情况下，seniorid 为 8，因此上述用户的父级为

```
8   | user7 |    6 
```

其中作为“user7”6的seniorid，因此父级是

```
6   | user5 |    1 
```

通过这种方式进行回溯，我们将获得从“超级用户”到“用户17”的以下层次结构列表

```
id  | username  | seniorid
1   | Superuser |   -1
6   | user5 |    1
8   | user7 |    6
18  | user17    |    8 
```

这个层次结构将有多达 n 个级别，即多达许多级别

我想要使​​用单个查询的层次结构结果。

在构建上述查询时，我需要您的帮助。请任何人都可以在mysql中给我这样的查询。

我有我需要在单个查询中找出其高级用户列表的用户的 id、用户名、高级用户 ID。这里的单个查询意味着它可能有多个嵌套查询。但作为一个整体，它将作为单个查询触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:03:29.350

AFAIK，如果您不知道要检索多少级别，则无法在单个查询中执行此操作。

如果您想要**n 个**级别，查询将如下所示：

```
SELECT * FROM users u 
LEFT JOIN users u1 on u1.id = u.seniorid
LEFT JOIN users u2 on u2.id = u1.seniorid
...
LEFT JOIN users u{n-1} on u{n-1}.id = u{n-2}.seniorid
WHERE u.id = 1 
```

您可以定义最大数量的层次结构级别并生成这样的查询。

如果你不能这样做，你将不得不链接尽可能多的查询......

编辑：像这样：

```
<?php
    function addSeniors($id,&$array){
        $s = "SELECT * FROM users WHERE id = $id";
        $q = mysql_query($q);
        $results = array();
        while($r = mysql_fetch_assoc($q)){
            $array[]=$r;
            addSeniors($r('seniorid'),$array);
        }
    }

    $s = "SELECT * FROM users WHERE id = 1";
    $q = mysql_query($s);
    $results = array(mysql_fetch_assoc($q));

    addSeniors($r['seniorid'],$results);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:21:35.297

如果您使用的是 mysql，最好使用嵌套集来解决这个问题。尝试阅读此[http://www.fliquidstudios.com/2008/12/23/nested-set-in-mysql/](http://www.fliquidstudios.com/2008/12/23/nested-set-in-mysql/)

# performance - 将 fpu 切换为单精度

> ID：12707961
> 
> 赞同：3
> 
> 时间：2012-10-03T11:55:08.677
> 
> 标签：performance, assembly, optimization, x86, x87

在 fpu 切换到单精度模式前几年，我在旧 fpu 上读到过，除法和 sqr 的速度是正常模式下的两倍。

（检查它的来源[http://stereopsis.com/FPU.html](http://stereopsis.com/FPU.html)）

还是这样，这样的切换可以加快一些循环，在里面产生很多浮点代码？

第二个问题相关，例如，在执行系统（winapi）调用时，我可以在代码中自由地玩弄 FPU 精度吗，与 fpu 舍入模式和系统端相同，api 是否也会破坏我的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-07T07:53:49.330

是的，Agner Fog 的吞吐量/延迟数字与降低 x87 精度以加快最坏情况的速度完全一致。

考虑到现代 div/sqrt 硬件的工作方式，使用 Radix-16 或 Radix-1024 分频器迭代计算结果的更多位，这也是有意义的，因此需要更少的正确位意味着您可以更快地停止。（[GCC 的 sqrt() 编译后是如何工作的？用的是哪一种 root 方法？Newton-Raphson？](https://stackoverflow.com/questions/54642663/how-sqrt-of-gcc-works-after-compiled-which-method-of-root-is-used-newton-rap/54642832#54642832)和[Intel x86 处理器的整数除法算法](https://stackoverflow.com/questions/8401194/the-integer-division-algorithm-of-intels-x86-processors)）

`fdiv`考虑到 x87和 SSE1`divss`在相同的硬件上运行，`divss`具有相同的最佳情况（舍入除数）但更好的最坏情况，这也是有意义的。`divss`x87 精度位大概控制硬件分频器的方式完全相同`divsd`。

**详情如下**

* * *

是的，x87 可以限制为 64 位或 32 位*总*宽度（`double`或`float`），低于标准的 80 位。 **是的，这确实稍微加快了`fsqrt`最坏`fdiv`情况的速度，使其速度与相同精度的标量 SSE/SSE2 大致相同**（`sqrtss`= 标量单 / `sqrtsd`= 标量双）。没有其他东西运行得更快或更慢。

**它不会*使*x87 比 SSE 更快，所以在这一点上，它主要是 CPU 历史的好奇。**

显然 DirectX 确实（曾经？）实际上将 x87 精度设置为 24 位尾数（`float`），并且 MSVC 的 CRT 启动用于将其设置为 53 位尾数（`double`）。请参阅 Bruce Dawson 的[https://randomascii.wordpress.com/2012/03/21/intermediate-floating-point-precision/](https://randomascii.wordpress.com/2012/03/21/intermediate-floating-point-precision/)。但微软的历史怪异是个例外；其他工具链/操作系统不会乱用 x87。

[Agner Fog 的指令表](https://agner.org/optimize/)没有提到 Sandybridge 或更高版本 CPU 的 x87 精度。这可能意味着它不再有帮助，或者（我认为）Agner 认为它不值得一提。他的 SnB 和更新的表格没有任何脚注，所以我认为这就是解释。据我所知，SnB 的分频器与 NHM 没有太大区别。

对于尼哈勒姆：

*   `fdiv`7-27 个周期延迟 = 吞吐量（根本没有流水线化），脚注说*Round divisors 或**低精度**给出低值。*

*   `divsd`/ `divpd`7-22 周期延迟=吞吐量。

*   `divss`/ `divps`7-14 个周期延迟=吞吐量。

因此，所有形式的最佳情况性能（分频器占用 7 个周期）都是相同的，最坏情况变得更糟，可能的尾数位越多。

**我们知道除法器硬件是迭代的，并且必须持续更长时间才能计算更多位，因此将 x87 精度设置为 24 位或 53 位以与 using*完全相同*的方式帮助性能是 100% 合理的`divss`。无论如何，它们共享相同的硬件执行单元。**

IvyBridge 终于流水线化了 FP 分频器。与 IvB 相比，Haswell 没有对 div 数字进行任何重大更改。这些是 HSW 编号：

*   `fdiv`10-24c 延迟，8-18c 吞吐量
*   `divsd`/ `divpd xmm`: 10-20c 延迟，8-14c 吞吐量
*   `divss`/ `divps xmm`: 10-13c 延迟，7c 吞吐量（固定延迟对调度程序来说很好）

另请参阅[浮点除法与浮点乘法](https://stackoverflow.com/questions/4125033/floating-point-division-vs-floating-point-multiplication/45899202#45899202)，其中我收集了 Agner Fog 的最新 Intel CPU 数据，包括 256 位 YMM 向量。我在那里省略了 x87，因为它基本上与高性能无关。

* * *

**通常您只使用 SSE1，因为它通常更快**（由于平坦的寄存器集和 2 操作数指令而不是堆栈，因此无需在`fxch`和寄存器副本上花费前端带宽）。`fld`并且在某些情况下使用 SIMD 的机会（通常 4x float sqrt 结果与 1 相同）使其与将 x87 FPU 设置为 32 位相比是一个巨大的胜利。

大多数 SSE 数学指令的吞吐量和延迟与 x87 对应的指令相似，但 x87 的开销更大。

***如果您需要制作与古代*CPU兼容的 32 位二进制文​​件，甚至没有 SSE1**`fdiv` ，是的，如果`fsqrt`性能对您的代码很重要，您可以将 x87 精度降低到 24 位。（可能还可以加速一些微编码的 x87 指令，例如`fsin`and `fyl2x`，IDK。）

或者，如果将精度降低到`float`过于激烈，那么您将`double`在 XMM regs 中查看 SSE2 的数学。它是 x86-64 的基线，因此如果您出于某种原因必须制作 32 位二进制文​​件，则再次值得考虑。没有它的最新 CPU 是 Athlon XP。（如果您不计算当前 Geode 之类的东西。）

* * *

> 与fpu舍入模式和系统端相同，api也会破坏我的设置吗？

AFAIK，什么都不会改变舍入模式。那将是一个很大的差异，并且对性能没有帮助。

如果有人能够证明这样做是合理的，那么有人会这样做是为了在`(int)float`没有 SSE convert-with-truncation 指令（或 SSE3`fisttp`用于 x87 版本）的情况下使用 C 的性能，以避免必须将 x87 舍入模式设置为截断（接近 0），然后在每次 FP 值转换为整数时恢复它。

大多数编译器在优化时假定舍入到最近。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T16:41:43.387

我的理解是，精度对传统 x86 FPU 速度的影响几乎以 i486 结束。不过，这是 8087 天以来的常见优化。

# php - PHPExcel 错误 - 运行示例

> ID：12707963
> 
> 赞同：0
> 
> 时间：2012-10-03T11:55:21.400
> 
> 标签：php, excel

我刚刚按照此处的安装过程在本地服务器上下载并安装了 PHPExcel 框架。[https://github.com/PHPOffice/PHPExcel/blob/develop/install.txt](https://github.com/PHPOffice/PHPExcel/blob/develop/install.txt)

但是运行示例测试`http://localhost/Tests/02types.php`一直给我这个错误：

```
08:10:37 Create new PHPExcel object
08:10:37 Set document properties
08:10:37 Set default font
08:10:37 Add some data
08:10:37 Rename worksheet
08:10:37 Write to Excel2007 format
Fatal error: Uncaught exception 'Exception' with message 'Could not close zip file /var/www/Tests/02types.xlsx.' in /var/www/Classes/PHPExcel/Writer/Excel2007.php:378 Stack trace: #0 /var/www/Tests/02types.php(124): PHPExcel_Writer_Excel2007->save('/var/www/Tests/...') #1 {main} thrown in /var/www/Classes/PHPExcel/Writer/Excel2007.php on line 378 
```

有谁知道为什么会发生这种情况？任何帮助将不胜感激。

海伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:11:21.943

如果 zip 文件无法关闭，则意味着以下两种情况之一：

任何一个

> 您在另一个应用程序中打开了任何现有的 zip 文件

或者

> 您的 PHP 没有相关权限来写入它试图创建 zip 文件的目录

# gmail - 如何在星号中配置 gtalk 和 jabber

> ID：12707967
> 
> 赞同：2
> 
> 时间：2012-10-03T11:55:35.427
> 
> 标签：gmail, asterisk

我在星号中设置了所有配置并且工作正常，但是当我加载模块 jabber 时出现如下错误：

```
[Nov 14 17:21:38] ERROR[2991]: res_jabber.c:1694 aji_act_hook: JABBER: encryption failure. possible bad password.
[Nov 14 17:21:38] ERROR[2991]: res_jabber.c:1577 aji_act_hook: aji_act_hook was called with out a packet
[Nov 14 17:21:38] WARNING[2991]: res_jabber.c:1392 aji_recv: Parsing failure: Hook returned an error.
[Nov 14 17:21:38] WARNING[2991]: res_jabber.c:2743 aji_recv_loop: JABBER: Got hook event.
[Nov 14 17:21:38] WARNING[2991]: res_jabber.c:2754 aji_recv_loop: JABBER: socket read error 
```

我创建了新的 gmail 帐户，但错误如密码错误，我设置了正确的密码，然后我也收到错误：

我的 jabber.conf

```
[gtalk_account]
type=client
serverhost=talk.google.com
username=myid@gmail.com/Talk
secret=password
port=5222
usetls=yes
usesasl=yes
buddy=mydi@gmail.com
statusmessage=”This is an Asterisk server”
timeout=100 
```

我的 gtalk.conf

```
[buddy]
username=myid@gmail.com
disallow=all
allow=ulaw
context=google-in
connection=gtalk_account 
```

当我加载模块然后收到类似上面的错误消息。

有没有朋友可以解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T05:38:28.263

根据星号文档，您输入了错误的用户名

[https://wiki.asterisk.org/wiki/display/AST/Calling+using+Google#CallingusingGoogle-XMPPConfiguration](https://wiki.asterisk.org/wiki/display/AST/Calling+using+Google#CallingusingGoogle-XMPPConfiguration)

我认为您使用的配置不再有效。

请注意，我刚刚测试了该配置并得到了像你展示的错误，但我也从谷歌得到了为什么它不起作用的答案。谷歌说“我们检测到帐户登录尝试”并“阻止了它”。

即，如果您使用来自其他 IP 的相同帐户，则当前的 google 帐户保护导致 gtalk 无法在星号服务器上工作。

# .net - MemoryFailPoint 无条件抛出 InsufficientMemoryException

> ID：12707970
> 
> 赞同：7
> 
> 时间：2012-10-03T11:55:43.960
> 
> 标签：.net, iis, memory-management, clr, vmware

我有一个非常奇怪的问题；在我们的 REST 应用程序中，我们引入了一个用于上传 WebPackage 的选项。由于这些在解压后可能会相当大，因此我们希望确保通过 MemoryFailPoint 进行内存检查的成功体验。

在我的本地 IIS 7.5 上，它可以完美运行——甚至可以达到最大值。预期值为 2GB。在我们的带有 IIS 7.5 的虚拟 Windows Server 2008R2 x64 上，这无条件地失败 - 即使只尝试 1MB。

虚拟服务器托管在 VMWare ESXi 4.1.0、348481 上。

以下是在虚拟机上失败的示例代码：

```
using (MemoryFailPoint failPoint = new MemoryFailPoint(1))
{
   ... // deliberately excluded webpackage code
} 
```

例外情况（在 XML 中）：

```
<InsufficientMemoryException>
    <Message>Insufficient memory to meet the expected demands of an operation, and this system is likely to never satisfy this request.  If this is a 32 bit system, consider booting in 3 GB mode.</Message>
    <StackTrace>
        <Line>at System.Runtime.MemoryFailPoint..ctor(Int32 sizeInMegabytes)</Line>
        <Line>at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)</Line>
        <Line>at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)</Line>
    </StackTrace>
    <UserDefinedInformation>
        <failpointSizeInMegaBytes>1.00</failpointSizeInMegaBytes>
        <gcTotalMemoryBeforeInMegaBytes>153.34</gcTotalMemoryBeforeInMegaBytes>
    </UserDefinedInformation>
</InsufficientMemoryException> 
```

我的机器也出现了一个类似的异常 - 请注意，我需要在触发异常*之前分配***64GB ：**

 *```
<InsufficientMemoryException>
    <Message>Insufficient available memory to meet the expected demands of an operation at this time.  Please try again later.</Message>
    <StackTrace>
        <Line>at System.Runtime.MemoryFailPoint..ctor(Int32 sizeInMegabytes)</Line>
        <Line>at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)</Line>
        <Line>at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)</Line>
        <Line>at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)</Line>
    </StackTrace>
    <UserDefinedInformation>
        <failpointSizeInMegaBytes>65536.00</failpointSizeInMegaBytes>
        <gcTotalMemoryBeforeInMegaBytes>150.63</gcTotalMemoryBeforeInMegaBytes>
    </UserDefinedInformation>
</InsufficientMemoryException> 
```

这让我发疯......真的......但是嘿; 注意两个（非常）不同的例外：

**服务器**：*内存不足，无法满足操作的预期需求，并且该系统很可能永远不会满足此请求。如果这是 32 位系统，请考虑以 3 GB 模式启动。*

使用 Jetbrains 和本网站的 dotPeek，[http: //reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/clr/src/BCL/System/ Runtime/MemoryFailPoint@cs/1305376/MemoryFailPoint@cs](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/clr/src/BCL/System/Runtime/MemoryFailPoint@cs/1305376/MemoryFailPoint@cs)，我们可以看到可能是什么问题（尽管我仍然一无所知）：

```
 // Check to see that we both have enough memory on the system
        // and that we have enough room within the user section of the
        // process's address space.  Also, we need to use the GC segment
        // size, not the amount of memory the user wants to allocate.
        // Consider correcting this to reflect free memory within the GC
        // heap, and to check both the normal & large object heaps.
        ulong num1 = (ulong) sizeInMegabytes << 20;
        this._reservedMemory = num1;
        ulong size = (ulong)(Math.Ceiling((double)num1 / (double)MemoryFailPoint.GCSegmentSize) * (double)MemoryFailPoint.GCSegmentSize);
        if (size >= MemoryFailPoint.TopOfMemory)
            throw new InsufficientMemoryException(Environment.GetResourceString("InsufficientMemory_MemFailPoint_TooBig")); 
```

**本地**：*此时可用内存不足，无法满足操作的预期需求。请稍后再试。*

**编辑**

Hans 和我讨论了 VM 大小，但由于我现在得出结论，它在开发服务器和我的机器上或多或少相等，所以我现在将这部分排除在外。任何提示、建议等都非常受欢迎。

**工艺信息**

```
Process Name: w3wp
PID: 5716
User Name: NT AUTHORITY\NETWORK SERVICE
Working Set: 376.456 K
Peak Working Set: 432.400 K
Private Working Set: 320.684 K
Commit Size: 538.552 K
Handles: 919
Threads: 39 
```

**操作系统 (WMI)**

```
BootDevice: \Device\HarddiskVolume1
BuildNumber: 7601
BuildType: Multiprocessor Free
Caption: Microsoft Windows Server 2008 R2 Standard 
CodeSet: 1252
CountryCode: 45
CreationClassName: Win32_OperatingSystem
CSCreationClassName: Win32_ComputerSystem
CSDVersion: Service Pack 1
CSName: SOME_NAME [MODIFIED]
CurrentTimeZone: 120
DataExecutionPrevention_32BitApplications: True
DataExecutionPrevention_Available: True
DataExecutionPrevention_Drivers: True
DataExecutionPrevention_SupportPolicy: 3
Debug: False
Description: Development Server
Distributed: False
EncryptionLevel: 256
ForegroundApplicationBoost: 2
FreePhysicalMemory: 5.366.516 K
FreeSpaceInPagingFiles: 8.368.456 K
FreeVirtualMemory: 12.985.412 K
InstallDate: 17-01-2011 15:01:55
LargeSystemCache: null
LastBootUpTime: 11-09-2012 14:44:33
LocalDateTime: 03-10-2012 14:13:47
Locale: 0406
Manufacturer: Microsoft Corporation
MaxNumberOfProcesses: 4294967295
MaxProcessMemorySize: 8.589.934.464 K
MUILanguages: System.Object[]
Name: Microsoft Windows Server 2008 R2 Standard |C:\Windows|\Device\Harddisk0\Partition2
NumberOfLicensedUsers: null
NumberOfProcesses: 70
NumberOfUsers: 7
OperatingSystemSKU: 7
Organization: 
OSArchitecture: 64-bit
OSLanguage: 1033
OSProductSuite: 272
OSType: 18
OtherTypeDescription: null
PAEEnabled: null
PlusProductID: null
PlusVersionNumber: null
Primary: True
ProductType: 3
RegisteredUser: Windows User
SerialNumber: 11111-111-1111111-11111 [MODIFIED]
ServicePackMajorVersion: 1
ServicePackMinorVersion: 0
SizeStoredInPagingFiles: 8.388.152 K
Status: OK
SuiteMask: 272
SystemDevice: \Device\HarddiskVolume2
SystemDirectory: C:\Windows\system32
SystemDrive: C:
TotalSwapSpaceSize: null
TotalVirtualMemorySize: 16.774.452 K
TotalVisibleMemorySize: 8.388.152 K
Version: 6.1.7601
WindowsDirectory: C:\Windows 
```

**开发服务器的 VMMap 屏幕截图**

![虚拟机地图](../Images/892083c0b2750486d39f39521ed996f8.png)

对虚拟大小感到好奇，我从 Sysinternals 下载了 VMMap：[http ://technet.microsoft.com/en-us/sysinternals/dd535533](http://technet.microsoft.com/en-us/sysinternals/dd535533)

**来自我的本地计算机的 VMMap 屏幕截图（MemoryFailPoint 按预期工作）**

![虚拟机地图 2](../Images/7e213bd6a08b7c2aad922dc623f064ca.png)

我仍然不清楚 MemoryFailPoint 失败的原因 - 确保有足够的内存用于操作很重要（尤其是在谈论 Windows Azure 或其他云提供商时）。举个例子，由于资源非常有限，ExtraSmall 实例将在进程的某个地方失败（即使它是 x64 架构）——这可以通过 MemoryFailPoint 阻止，从而确保数据的有效状态。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T23:13:51.040

.net 4.5 和 IIS 中存在错误（或功能）。

MemoryFailPoint 类依赖于一个内部 GC 相关变量，但在 x64 下，该变量可以为 0，除以零可以生成正无穷大（双精度），并且具有该极值的某些操作（甚至与零相乘）可以生成较大的双精度值（取决于实际的 FPU 设置）。

你可以很容易地检查这个错误。创建一个简单的 Web 应用程序并添加一个页面，然后粘贴以下代码：

```
<%
    var memoryFailPointType = typeof(System.Runtime.MemoryFailPoint);
    var staticPrivateFieldFlags = 
        System.Reflection.BindingFlags.NonPublic |
        System.Reflection.BindingFlags.Static;
    var gCSegmentSizeField = memoryFailPointType
        .GetField("GCSegmentSize", staticPrivateFieldFlags);
    var gCSegmentSize = (uint)gCSegmentSizeField.GetValue(null);
    string allocationResult;
    try
    {
        using (var mfp = new System.Runtime.MemoryFailPoint(1))
        {
            allocationResult = "Ok";
        }
    }
    catch (Exception exception)
    {
        allocationResult = exception.Message;
    }
%>
<%= gCSegmentSize %><br /> <!-- it can be 0 -->
<%= allocationResult %><br /> <!-- Insufficient memory to meet the expected demands of an operation, and this system is likely to never satisfy this request. If this is a 32 bit system, consider booting in 3 GB mode. --> 
```

因此，如果 gCSegmentSize 为零且 (ulong)(double.PositiveInfinite * (uint)0) 不等于 0，则不应使用 MemoryFailPoint 类。

在控制台应用程序中，FPU 控制字是 0x09001F，但在 IIS 下，FPU 控制字是 0x08001F。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T00:04:53.193

.NET 4.5 的修补程序汇总 2828842 中有针对此问题的修复程序 [http://support.microsoft.com/kb/2828842/en-us](http://support.microsoft.com/kb/2828842/en-us)*

# codeigniter - 每页记录允许用户选择 - codeigniter 分页

> ID：12707973
> 
> 赞同：1
> 
> 时间：2012-10-03T11:55:57.330
> 
> 标签：codeigniter, pagination

我有有效的分页。我已将限制设置为每页 5 条记录，但我希望用户能够根据需要进行更改。问题是我不知道该怎么做。

在视图中，我创建了下拉菜单，因此用户可以选择每页要查看多少条记录：

```
 <ul class="dropdown-menu">
    <li>
        <a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers" id="2" class="pPage" data-tableid="smpl_tbl">
        2 records per page
        </a>
    </li>
    <li>
        <a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers"  id ="50" class="pPage" data-tableid="smpl_tbl">
        50 records per page
        </a>
    </li>
    <li><a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers" id="100" class="pPage" data-tableid="smpl_tbl">
        100 records per page
        </a>
    </li>
    <li>
        <a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers" id="all" class="pPage" data-tableid="smpl_tbl">
        Display all records
        </a>
    </li>
</ul> 
```

在我的控制器中，我有以下代码：

```
public function displayAllUsers()
    {

        $recordsPerPage = 5;
        $limit = $recordsPerPage;
        $offset = 3;

        $offset = $this->uri->segment(3);
        $this->db->limit($limit, $offset);

        $data['users'] = $this->backOfficeUsersModel->get();

        $totalresults = $this->db->get('back_office_users')->num_rows();

        //initializing & configuring paging
        $this->load->library('pagination');
        $config['base_url'] = site_url('/backOfficeUsers/displayAllUsers');
        $config['total_rows'] = $totalresults;
        $config['per_page'] = $limit;
        $config['uri_segment'] = 3;
        $config['full_tag_open'] = '<div class="dataTables_paginate paging_bootstrap pagination"><ul>';
        $config['full_tag_close'] = '</ul></div>';
        $config['cur_tag_open'] = '<li><a href=# style="color:#ffffff; background-color:#258BB5;">';
        $config['cur_tag_close'] = '</a></li>';
        $config['num_tag_open'] = '<li>';
        $config['num_tag_close'] = '</li>';

        $this->pagination->initialize($config); 

        $data['main_content'] = 'bousers/users';
        $data['title'] = 'Back Office Users';
        $errorMessage = FALSE;

        $this->load->vars($data,$errorMessage);
        $this->load->vars($currentUser);
        $this->load->view('backOffice/template');

    } // end of function displayAllUsers 
```

谁能告诉我如何显示用户从下拉菜单中选择的记录数？如果他没有选择任何东西，我想默认显示5条记录。

任何帮助将不胜感激。

问候，佐兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:03:41.233

你不应该那样做一个下拉菜单。试试这个

**看法**

```
echo form_open('controller/displayAllUsers');
            $options = array(
                            '' => 'Select',
                             '2' => '2',
                             '50' => '50',
                             '100' => '100');
            echo form_dropdown('sel',$options,'');
echo form_submit('submit',Submit); 
```

**控制器**

```
if(isset($post['sel']) && !empty($post['sel']))
                $config['per_page'] = $post['sel'];
                else
                $config['per_page'] = 5; 
```

并且不要忘记在执行此操作之前加载*表单助手*。否则您可以提供正统的 html`select`框

编辑：（*另一种方式*）

看法：

```
<ul class="dropdown-menu">
<li>
    <a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers/2"  class="pPage" data-tableid="smpl_tbl">
    2 records per page
    </a>
</li>
<li>
    <a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers/50"  class="pPage" data-tableid="smpl_tbl">
    50 records per page
    </a>
</li>
<li><a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers/100"  class="pPage" data-tableid="smpl_tbl">
    100 records per page
    </a>
</li>
<li>
    <a href="<?php echo base_url(); ?>backOfficeUsers/displayAllUsers" id="all" class="pPage" data-tableid="smpl_tbl">
    Display all records
    </a>
</li> 
```

控制器：

```
public function displayAllUsers()
{

$currentUser = $this->isLoggedIn();
$this->load->model('backOfficeUsersModel');
$this->db->order_by('userid');
//$recordsPerPage = 5;
//$limit = $recordsPerPage;
if ($this->uri->segment(3) !="") {
$limit = $this->uri->segment(3);
} else {
$limit = 5;
}

$offset = 4;

$offset = $this->uri->segment(4);
$this->db->limit($limit, $offset);

$data['users'] = $this->backOfficeUsersModel->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T08:05:08.633

我也实现了相同的代码，它也适用于我的其他页面。

这是控制器中的代码：

```
class Test extends CI_Controller {

    public $limit = 2;
    public $data = array();
    /**
     * Constructor
     */
    public function __construct()
    {
        parent::__construct();

        if($this->input->post('paging_limit')){
            $this->limit = $this->input->post('paging_limit');
        }
    }

    public function index()
    {

        $this->load->library('pagination');
        $this->limit = ($this->uri->segment(4)) ? $this->uri->segment(4) : $this->limit;
        $config['base_url'] = site_url('test/index/' . $this->limit);
        $config['uri_segment'] = 5;
        $config['per_page'] = $this->limit;

        $offset = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;
        $this->data['page_offset'] = $offset;

        $this->data['test_list'] = $this->test_model->get_test_list($this->limit, $offset);

        $found_rows =  $this->test_model->get_found_rows();
        $config['total_rows'] = $found_rows;

        $fetched_rows =  sizeof($this->data['test_list']);
        $this->pagination->initialize($config);
        $this->data['pagination'] = $this->pagination->create_links();

        $this->data['paging_info'] =  get_paging_info($offset, $this->limit, $fetched_rows, $found_rows);

        $this->data['paging_limit_dropdown'] =  get_paging_limit_options('test/', $this->limit);
        $this->load->view('test', $this->data);
    }
} 
```

实用程序助手功能：

```
// ------------------------------------------------------------------------

/**
 * get_paging_info
 *
 * Returns the pagination info
 * @param int
 * @param int
 * @param int
 * @access  public
 * @return  string
 */
if ( ! function_exists('get_paging_info'))
{
    function get_paging_info($offset, $limit, $fetched_rows, $found_rows)
    {
        $X = $offset + 1;
        $Y = $offset + $limit;
        if($fetched_rows < $limit)
        {
            $Y -= ($limit - $fetched_rows); 
        }
        $CI =& get_instance();
        $CI->lang->load('common', 'english');
        return sprintf($CI->lang->line('common_paging_info'), $X , $Y, $found_rows);
    }
}

// ------------------------------------------------------------------------

/**
 * get_paging_limit_options
 *
 * Returns the pagination limit drop down 
 * @param int
 * @param int
 * @param int
 * @access  public
 * @return  string
 */
if ( ! function_exists('get_paging_limit_options'))
{
    function get_paging_limit_options($url, $limit = '')
    {
        $CI =& get_instance();
        $CI->load->helper('form');
        $dropdown = form_open($url);
        $options = array(
                    '' => 'Select',
                    '2' => '2',
                    '3' => '3',
                    '4' => '4',
                    '5' => '5',
                    '6' => '6',
                    '10' => '10',
                    '20' => '20'
                    );
        $dropdown .= form_dropdown('paging_limit', $options, $limit);
        $dropdown .= form_submit('submit', 'Go');
        return $dropdown;
    }
} 
```

通用语言代码：

```
$lang['common_paging_info']         = "Showing %s to %s of %s entries"; 
```

查看文件：

```
<div class="row-fluid">
    <div class="span6">
        <div class="pagination">{$paging_info}</div>
    </div><!--/span-->

    <div class="span6">
    {$paging_limit_dropdown}
    {$pagination}    
    </div><!--/span-->
</div><!--/row--> 
```

@注意，我使用的是 Smarty 模板，将上面的变量替换为 PHP echo

# java - 如何通过匹配文本框中键入的值（如自动完成）来构造查询以从 mongo 获取值？

> ID：12707977
> 
> 赞同：0
> 
> 时间：2012-10-03T11:56:08.403
> 
> 标签：java, mongodb

我在 mongodb 中有测试集合，在那个集合中，我有许多与以下结构相同的文档，

```
 { "_id" : ObjectId("5026176dcac010a752b0d3a9"), 
         "number" : "yes",
         "url" :"www.emesene.com"
       } 
```

实际上，我正在为 html 中的**“数字”**和**“url”**字段创建自动完成选项，我已经将类型值、字段等带到后端。现在，我想使用类型值和字段构造**基本dbobject**查询以获取存储值（作为自动完成）基于键入的值。

我已经构建了 basicdbobject 查询如下，但它不工作

```
 query={ "url" : { "$regex" : "www" , "$options" : "i"} }
      collection.find(query).limit(5)

      field=url
      typed value=www 
```

任何人都可以帮助我...提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:04:18.037

您是否尝试过它的所有简单性？

```
query={ url:{ "$regex" : "www" } }
collection.find(query).limit(5) 
```

# java - 如何处理复合键休眠

> ID：12707978
> 
> 赞同：0
> 
> 时间：2012-10-03T11:56:11.337
> 
> 标签：java, hibernate, jakarta-ee, hibernate-mapping

我的 hbm.xml 文件是这样的：

```
<hibernate-mapping>
<class name="pojopackage.WordhelperWordusage" table="WORDHELPER_WORDUSAGE" schema="SOZANA">
    <composite-id name="id" class="pojopackage.WordhelperWordusageId">
        <key-property name="idwh" type="java.lang.Integer">
            <column name="IDWH" />
        </key-property>
        <key-property name="idwu" type="java.lang.Integer">
            <column name="IDWU" />
        </key-property>
        <key-property name="type" type="java.lang.Integer">
            <column name="TYPE" />
        </key-property>
    </composite-id>
    <many-to-one name="wordhelper" class="pojopackage.Wordhelper" update="false" insert="false" fetch="select">
        <column name="IDWH" />
    </many-to-one>
    <many-to-one name="wordusage" class="pojopackage.Wordusage" update="false" insert="false" fetch="select">
        <column name="IDWU" />
    </many-to-one>
</class> 
```

但是我有两个 POJO 类，它们是“WordhelperWordusage.java”和“WordhelperWordusageId.java”，所以我很困惑，我应该如何处理这些类？如何实施？提前致谢！ **更新**

我确实喜欢这个

```
wordhelper_wordusage.save(wordhelper);
wordhelper_wordusage.save(wordusage);
session.save(wordhelper);
session.save(wordusage);
session.save(wordhelper_wordusage); 
```

但它给了我这样的例外：

```
Hibernate: select max(ID) from SOZANA.WORDFORM
Hibernate: select max(ID) from SOZANA.WORDHELPER
Exception in thread "main" org.hibernate.id.IdentifierGenerationException:
ids for this   class must be manually assigned before calling save():   pojopackage.WordhelperWordusage 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:11:23.440

复合 PK 通常映射到一个 PK 类，以便 Hibernate 可以正确处理它们。您发布的映射就是这种情况。请注意，使用 PK 类不是强制性的`WordhelperWordusage`，如果您`class`在元素中省略该属性，您可以将这些 PK 属性映射到同一个类中`<composite-id>`（但不推荐）。有关更多详细信息，请参阅此相关问题：[休眠复合键](https://stackoverflow.com/q/2301259/851811)。

至于给定映射文件的实现，在映射中创建具有属性的类还不够吗？

```
package pojopackage;

public class WordhelperWordusage { 

    private WordhelperWordusageId id;
    private Wordhelper wordhelper;
    private Wordusage wordusge;

    // Getters / Setters

    // Implement equals() and hashCode() delegating to id
} 
```

和

```
package pojopackage;

public class WordhelperWordusageId { 
    private Integer idwu;
    private Integer type;

    // Getters / setters

    // Implement equals() and hashCode() consistently, using idwu and type.

} 
```

请记住始终如一地在这些类中实现`hashCode()`和。`equals()`所以 a`WordhelperWordusage`的哈希码是它的 id 的哈希码，当且仅当它们的 id 相等时它们才相等。对于 id 类，只需对两个 Integer 属性进行哈希处理，然后将它们比较为`equals()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:10:50.900

WordhelperWordusageId.java 类用于构建主键。它有两个属性 idwh 和 idwu。此属性的组合定义了主键。Hibernate 为复合键创建对象并覆盖 equals 和 hashCode 方法。此对象用于标识主 WordhelperWordusage.java 对象的键。因此为简单起见，将对象视为简单的 id 列属性，唯一的区别是这是对象而不是简单属性，否则所有规则都适用于 ID。异常生成器方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:11:56.187

这可以帮助你 [http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-component](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-component)

# javascript - jQuery(this)：如何切换下一个表？

> ID：12707980
> 
> 赞同：-2
> 
> 时间：2012-10-03T11:56:16.670
> 
> 标签：javascript, jquery, dom, this

当用户单击链接时，我想显示/隐藏以下结构的表格：

```
<div class="container">
    <div class="banner">
        <h2>$header</h2>
    </div>
    <p class="howto">balbalblablablalbalbalbalblabla <a href='#'>link</a></p>
        <table id=table_action class="widefat">
        ...
        </table>
</div> 
```

我试过了，但它不起作用，我不明白为什么：

```
jQuery(document).ready(function(){  
    jQuery('.howto a').click(function() {
        jQuery.(this).next('table').toggle();
    });
}); 
```

对我来说：jQuery.(this) 指的是触发事件的 dom 元素，并且有一个 table 元素，我的代码片段有什么问题？

谢谢，本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:00:37.650

您的链接`$('.howto a')`位于内部`.howto`。调用`.next()`链接返回虚无。

相反，在里面试试这个`.click()`：

```
jQuery(this).parent().next('table').toggle(); 
```

**编辑**

此外，您可能需要添加一个`.preventDefault()`以防止在单击链接时发生默认行为：

```
jQuery('.howto a').click(function(event) {
    event.preventDefault();
    jQuery(this).parent().next('table').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T12:01:01.317

[工作小提琴](http://jsfiddle.net/kNjdU/1/)

代码：

```
 jQuery(this).parent().next('table').toggle(); 
```

您的代码中有两个问题：

1.  `jQuery.(this)`代替`jQuery(this)`
2.  调用`.next('table')`锚元素，但表格位于父段落元素旁边。`.parent()`之前调用`.next`解决了这个问题。

# javascript - Openstreetmap Javascript 脚本

> ID：12707981
> 
> 赞同：1
> 
> 时间：2012-10-03T11:56:21.707
> 
> 标签：javascript, jquery, plugins, openstreetmap

有没有什么好的 js light 插件可以在网站中嵌入地图？

像 gmaps 之类的东西，我正在尝试一个 jquery 插件，似乎太重了，太多 kb。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:59:05.483

[http://leaflet.cloudmade.com/](http://leaflet.cloudmade.com/)

非常轻巧

还有具有更多功能的 OpenLayers

# payment-gateway - 此错误代码仅适用于 FDC Omaha 上的商家。商户号字段提交的值无效

> ID：12707990
> 
> 赞同：2
> 
> 时间：2012-10-03T11:56:46.873
> 
> 标签：payment-gateway, authorize.net, merchant-account

我将我的 Authorize.Net 帐户配置为使用 CIM API 从我的网站上的客户那里获得付款。当客户在我的网站上注册时，他会创建他的付款资料。所有信息都存储在 authorize.net 上。我只保存个人资料 ID 来获得付款。一个月后，我通过向 Authorize.Net 发送请求来获得付款。

一切都很好，我得到了付款。但是针对某些配置文件，存在一些问题，我收到错误

> 响应原因代码：205 响应原因文本：此交易已被拒绝。其他建议：此错误代码仅适用于 FDC Omaha 上的商家。商户号字段提交的值无效。

是编程问题还是其他问题？我在 authorize.net 上搜索了这个，但找不到合适的解决方案。我无法理解是什么`merchant number field`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:48:11.070

来自[Authorize.Net 开发者社区论坛](http://community.developer.authorize.net/t5/Integration-and-Testing/Error-response-2-205/td-p/694)

> 对 Authorize.net 的调用和对支持票的回复均表示商家服务提供商 (MSP) 已将商家帐户的状态设置为非活动状态。因此，我们联系了 MSP 并获得了处理器配置表或 VAR 表，其中包含激活帐户所需的所有信息。然后我们再次致电 Authorize.net，他们通过电话解决了问题，并与我们进行了实时测试。

# node.js - nodejs mongodb Gridstore.exist 无限循环

> ID：12707999
> 
> 赞同：0
> 
> 时间：2012-10-03T11:57:17.523
> 
> 标签：node.js, mongodb, mongoose, gridfs, node-mongodb-native

我正在尝试使用 mongodb 的 GridStore，当我尝试以下代码时，我遇到了一个奇怪的无限循环问题`GridStore.exist(db, req.params.filename, function(err, result){`

以下是整个代码及其调试输出

```
var express = require('express'),
    mongoose = require('mongoose');

var app = express();

var db = mongoose.createConnection('mongodb://localhost/dev_gridfs');
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(express.errorHandler({dumpExceptions: true, showStack : true}));

app.get('/', function(req,res){
    console.log('main');
    res.send('<img src="/images/test.jpg"/>');
});

var GridStore = mongoose.mongo.GridStore;

app.get('/images/:filename', function(req, res){
    console.log('in get image: ' + req.params.filename);
    GridStore.exist(db, req.params.filename, function(err, result){
        console.log('in gridstore exist');
        if (err) {
            console.log(err);
            res.status(500);
            res.send();
        }
        if (result) { 
            console.log('file found');
            //TODO code for sending the file
            res.send('');
        } else {
            res.status(404);
            res.send();
        }
    });
});

app.listen(3000);
console.log('listening on 3000'); 
```

打印的输出是

```
main
in get image: test.jpg 
```

版本：[节点：v0.8.11，快递：3.0.0rc4，猫鼬：3.2.1]

任何建议表示赞赏。我不确定这是否是节点 mongodb 驱动程序的错误，我还没有在驱动程序问题跟踪器中发现这是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:50:23.133

我犯了一个错误！GridStore 需要 MongoDB DB 对象而不是 Mongoose DB 对象。进行了以下代码更改，其他一切都按预期工作！

更改了上面代码中显示的以下行

```
var db = mongoose.createConnection('mongodb://localhost/dev_gridfs'); 
```

作为

```
var mongooseDb = mongoose.createConnection('mongodb://localhost/dev_gridfs');
var db = mongooseDb.db; 
```