# StackOverflow 问答 13281000-13281999

# javascript - 选中 jQuery 中的所有复选框

> ID：13281005
> 
> 赞同：0
> 
> 时间：2012-11-08T01:13:28.593
> 
> 标签：javascript, jquery

我有代码在表格中显示一个人的信息（字段：姓名、姓氏、地址等），其中一个输入是一个复选框。代码如下：

```
$("#table").append('<tr class="trow'+j+'">'+
                      '<td class="ids" id="z'+i+'">'+totrecs+'</td>'+
              '<td>'+member[i].jdate+'</td>'+
              '<td class="users" 

              '<td id="contact'+i+'">'+member[i].fname+' '+member[i].lname+'</td>'+
              '<td id="myaddress'+i+'">'+member[i].address1+' '+member[i].town+'</td>'+

              '<td><input type="checkbox" name="whome" id="showMe'+i+'"'+
                                             'class="boxes" onclick="getMe('+i+')" /> </td></tr>');  
      totrecs++;
      j++;
     } 
```

按钮 -`<input type="button" id="selectall" title="Select All" value="Select All" />`

我想要做的是创建一个函数，当单击某个按钮时，所有复选框都将被选中/选中。

我将不胜感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:15:39.683

在我的头顶上：

```
$('#table input[type="checkbox"]').prop('checked', true); 
```

# ruby - Ruby Double (RR) 如何为传递给块参数方法的方法调用块设置期望？

> ID：13281006
> 
> 赞同：2
> 
> 时间：2012-11-08T01:13:32.040
> 
> 标签：ruby, testing, mocking, double, block

在我的代码中，我有类似于以下人为示例的代码。

```
class Excel
  def self.do_tasks
    with_excel do |excel|
      delete_old_exports
      export_images(excel)
      export_documents(excel)
    end
  end

  def with_excel
    excel = WIN32OLE.connect('Excel.Application')
    begin
      yield excel
    ensure
      excel.close()
    end
  end
end 
```

现在，我想为“do_tasks”方法编写一个测试，在其中设置方法调用的期望值，看看这些期望值是否得到满足。

我尝试了以下方法（使用 shoulda-context 和 test-unit）。但是，最后三个模拟的预期失败（模拟没有被调用）。

```
class ExcelTest < ActiveSupport::TestCase  
  should "call the expected methods" do  
    mock.proxy(Excel).with_excel
    mock(Excel).delete_old_exports
    mock(Excel).export_images.with_any_args
    mock(Excel).export_documents.with_any_args

    Excel.do_tasks
  end
end 
```

任何有关如何测试此类代码的指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:04:58.110

一个较老的问题，但我刚刚用 rr 对一些类似的代码进行了一些工作，并认为我会给出一个答案。

以下测试将按照您的要求进行（使用 RR 和 TestUnit）：

```
describe Excel do
  describe '.do_tasks' do
    let(:excel_ole) { mock!.close.subject }

    before do
      stub(WIN32OLE).connect('Excel.Application') { excel_ole }
      mock(Excel).delete_old_exports
      mock(Excel).export_images(excel_ole)
      mock(Excel).export_documents(excel_ole)
    end

    it 'calls the expected methods' do
      Excel.do_tasks
      assert_received(Excel) { |subject| subject.delete_old_exports }
    end
  end
end 
```

它使用 RR 的“间谍”双打 - 见[https://github.com/rr/rr#sies](https://github.com/rr/rr#spies)

但是，对于您提供的示例代码，您要测试的方法位于块内这一事实是一个实现细节，不应隐式测试（这可能导致脆弱的测试）。上面的测试显示了这一点，with_excel 方法没有被模拟（顺便说一下，这应该定义为 self.with_excel 以使代码工作）。可以重构实现，以便 WIN32OLE 初始化和拆卸在 .do_tasks 方法中内联发生，并且测试仍然可以通过。

另一方面，这可能是人为示例的副作用，但总的来说，测试非公共方法是个坏主意。方法 delete_old_exports、export_images 和 export_documents 看起来可能应该对合作者进行分解。

# ruby-on-rails - Rails：使用 Twitter 文本 gem 时，将“@”作为用户名链接的一部分包含在内

> ID：13281007
> 
> 赞同：1
> 
> 时间：2012-11-08T01:13:43.367
> 
> 标签：ruby-on-rails, twitter

我目前正在使用（坦率地说令人惊叹的）Twitter Text gem 来自动在推文状态中为我正在构建的 Twitter 小部件设置链接。

但是，当在用户名（即@adamt）上使用 auto_link 功能时，它会从链接文本中删除“@”，输出如下内容：

```
@<a href="twitter.com/adamt">adamt</a> 
```

有谁知道使用 Twitter Text gem 包含在该链接内的“@”中的简单方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:19:16.760

您需要使用该`:username_include_symbol => true`选项（[来自代码](https://github.com/twitter/twitter-text-rb/blob/master/lib/twitter-text/autolink.rb)）。

# facebook-graph-api - 使用墙上帖子上的操作字段禁用 facebook 评论

> ID：13281019
> 
> 赞同：2
> 
> 时间：2012-11-08T01:15:29.400
> 
> 标签：facebook-graph-api, comments, facebook-comments

我的应用程序允许用户为了一个独特的目的而相互交互。作为这种体验的一部分，我在用户的墙上发帖，这样他/她的朋友就可以知道用户的帖子，他们可以来应用程序进行交互。但在这种情况下，用户最终可能只是在 facebook 页面本身上发表评论，而我的应用程序将不知道这种交互。为避免这种情况，我想知道是否可以禁用对此帖子的评论。Graph API 文档指出，我可以为此目的使用墙贴上的“操作”字段。我尝试了评论和空链接或将用户带到我的应用程序的链接等的各种组合。但我注意到，无论我设置什么，facebook总是显示指向墙贴的链接，而不是我试图放置的链接。

关于如何实现这一目标的任何想法？谢谢。

# file-upload - 如何设置独立附件内容类型

> ID：13281021
> 
> 赞同：0
> 
> 时间：2012-11-08T01:15:40.477
> 
> 标签：file-upload, couchdb, couchapp

我已经能够创建一个独立的附件，但 content_type 最终成为 multipart/form-data。我做错了什么？代码后面是帖子的响应，然后是请求；您可以在请求中看到 Request Payload 中的内容类型是正确的。

代码：

```
 function uploadFile() {
    var fd = new FormData();
    var file = document.getElementById('fileToUpload').files[0];
    fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
    var xhr = new XMLHttpRequest();
    xhr.upload.addEventListener("progress", uploadProgress, false);
    xhr.addEventListener("load", uploadComplete, false);
    xhr.addEventListener("error", uploadFailed, false);
    xhr.addEventListener("abort", uploadCanceled, false);
    xhr.open("PUT", "http://usr:pswd@localhost:5984/db_test/testdoc7/"+ file.name +"?rev=1-967a00dff5e02add41819138abb3284d");

    xhr.send(fd);
  } 
```

回复：

```
{
   "_id": "testdoc7",
   "_rev": "2-2841dcd640adb94de525e486be34052e",
   "_attachments": {
       "P9025287.JPG": {
           "content_type": "multipart/form-data; boundary=----WebKitFormBoundary9QNXLDTeW13Gc1ip",
           "revpos": 2,
           "digest": "md5-VcoscthaPUYoWHBmCBaAnA==",
           "length": 3083669,
           "stub": true
       }
   }
} 
```

要求：

```
Request URL:http://usr:pswd@localhost:5984/db_test/testdoc7/P9025287.JPG?rev=1-967a00dff5e02add41819138abb3284d
Request Method:PUT
Status Code:201 Created
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:3083669
Content-Type:multipart/form-data; boundary=----WebKitFormBoundary9QNXLDTeW13Gc1ip
Cookie:AuthSession=YmRyaG9hOjUwOUFFNDg3OnR23NsQsqdQvnKp7HX_0g90grXw
Host:localhost:5984
Origin:http://localhost:5984
Referer:http://localhost:5984/estante_test/_design/library/html5/html5test.html
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Query String Parametersview URL encoded
rev:1-967a00dff5e02add41819138abb3284d
Request Payload
------WebKitFormBoundary9QNXLDTeW13Gc1ip
Content-Disposition: form-data; name="fileToUpload"; filename="P9025287.JPG"
Content-Type: image/jpeg

------WebKitFormBoundary9QNXLDTeW13Gc1ip--
Response Headersview source
Cache-Control:must-revalidate
Content-Length:71
Content-Type:text/plain; charset=utf-8
Date:Wed, 07 Nov 2012 22:45:40 GMT
ETag:"2-2841dcd640adb94de525e486be34052e"
Location:http://localhost:5984/estante_test/testdoc7/P9025287.JPG
Server:CouchDB/1.2.0 (Erlang OTP/R15B) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:15:13.163

您的代码正在将整个表单的正文放入 CouchDB。我怀疑如果您查看附件，您会发现不仅 Content-Type 不正确。这样的事情应该会更好：

```
function uploadFile() {
  var file = document.getElementById('fileToUpload').files[0];
  var xhr = new XMLHttpRequest();
  xhr.upload.addEventListener("progress", uploadProgress, false);
  xhr.addEventListener("load", uploadComplete, false);
  xhr.addEventListener("error", uploadFailed, false);
  xhr.addEventListener("abort", uploadCanceled, false);
  xhr.open("PUT", "http://usr:pswd@localhost:5984/db_test/testdoc7/"+ file.name +"?rev=1-967a00dff5e02add41819138abb3284d");
  xhr.send(file);
} 
```

这是因为 File 接口继承自 Blob，因此[XHR2 发送算法](http://www.w3.org/TR/XMLHttpRequest/#the-send-method)将提交文件的原始数据，并根据文件条目的 .type 属性设置 mime 类型。

请注意，至少有些浏览器没有为文件提供良好的 MIME 类型猜测，因此除非您通过[xhr.setRequestHeader()](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)为自己提供覆盖，否则您最终可能仍会使用“application/octet-stream”作为类型。

# java - 无法从 B 类访问 A 类中的公共方法

> ID：13281023
> 
> 赞同：0
> 
> 时间：2012-11-08T01:15:46.250
> 
> 标签：java, class, methods

我有两个班，A班和B班。

```
public class A {
    B testB = new B();
    testB.setName("test"); //**Error Syntax error on token(s), misplaced constructs
                           //**(same line above) Error Syntax error on "test"
}

//in a separate file
public class B {
    public String name;
    public void setName(String name){
        this.name = name;
    }
} 
```

为什么我不能在 A 类的 B 类中访问这个函数“setName”？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:17:31.780

您需要将该代码放在`A`'s 的构造函数中...

```
public A() {
    B testB = new B();
    testB.setName("test");
} 
```

...然后实例化它。

```
A someA = new A(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:18:07.913

您需要从另一个方法或构造函数中调用该函数。

```
 public class A {

      //Constructor
      public A(){
        B testB = new B();
        testB.setName("test");
      }

      //Method
      public void setup(){

        B testB = new B();
        testB.setName("test"); 
       }
    }

    /*Then in a main method or some other class create an instance of A 
and call the setup method.*/

    A a = new A();
    a.setup(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T01:17:28.057

```
testB.setName("test"); 
```

是一个语句，需要在代码块中。目前它在不允许非声明性语句的类块中。

因此，将此语句移动到构造函数、方法或初始化程序块中将解决问题：

```
public class A {
   B testB = new B(); // B can remain here

   public A() {
     testB.setName("test");
   }
} 
```

# emacs - 在这种情况下如何使用（交互式“r”）功能？

> ID：13281026
> 
> 赞同：8
> 
> 时间：2012-11-08T01:15:55.063
> 
> 标签：emacs, elisp

我定义了一个函数并想将该区域用作`optional`参数。

```
(defun my-grep-select(&optional beg end)
  (interactive "r")
    (if mark-active
       (....)
      (....)) 
```

如果标记处于活动状态，我想 grep 缓冲区中的选择字符，或者如果标记未激活，则 grep 缓冲区中光标下的单词。

但是在这种情况下：我打开文件并没有选择任何东西，然后运行命令`my-grep-select`，emacs抱怨：

```
The mark is not set now, so there is no region 
```

我怎样才能消除这种抱怨？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T03:35:49.153

正确的做法可能是：

```
(defun my-grep-select(&optional beg end)
  (interactive
   (if (use-region-p) (list (region-beginning) (region-end))
     (list <wordbegin> <wordend>)))
  ...) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T05:23:42.353

你不需要使用`(interactive "r")`. `(region-active-p)`相反，您可以使用或类似的方式检查区域是否处于活动状态，然后使用`(region-beginning)`并`(region-end)` 执行其他任何操作。

当区域处于活动状态并且传递了一组不同的参数时，也许需要做出选择......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T14:43:22.000

您也可以只使用`M-n`或`<down>`在迷你缓冲区中（发出 `M-x grep`命令后）插入选定的文本。

# expressionengine - MediaTemple 上的 ExpressionEngine - 删除 index.php 会导致“未指定输入文件”

> ID：13281027
> 
> 赞同：4
> 
> 时间：2012-11-08T01:15:56.823
> 
> 标签：expressionengine, mediatemple

我有一个带有标准 ExpressionEngine htaccess 代码的 MT 站点，用于删除 index.php 并且主页可以正常工作，如果我将 index.php 放在 URL 中，所有其他页面都可以正常工作。没有它，我得到“没有指定输出文件”。它适用于我的本地和非 MT 服务器，所以我知道它是一个环境问题。需要更改 htaccess 中的哪些内容才能使其在 MT 上运行？

```
<IfModule mod_rewrite.c>

# Enable Rewrite Engine
# ------------------------------
RewriteEngine On
RewriteBase /

# Use Dynamic robots.txt file
# ------------------------------
RewriteRule robots\.txt /robots.php [L]

# Redirect index.php Requests
# ------------------------------
RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteCond %{THE_REQUEST} !/admin/.*
RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,L]

# Standard ExpressionEngine Rewrite
# ------------------------------
RewriteCond $1 !\.(css|js|gif|jpe?g|png) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T01:15:56.823

感谢@danielcgold 通过 twitter 提供的答案：

尝试使用此行`RewriteRule ^(.*)$ /index.php?/$1 [L]`并注意 ? 在 index.php 之后

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T14:24:23.313

我昨晚发布了一个要点，其中包含我在 (mt) 上的所有 ExpressionEngine 站点的标准重写规则。

```
## BEGIN Expression Engine Rewrite

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteRule ^(.*)$ /index.php?/$1 [L]

## END Expression Engine Rewrite 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T20:12:03.510

使用 EE 2.7.0 和 Mediatemple 的 Grid 服务（以前称为“GS”），我很幸运地使用了标准的 .htaccess：

```
<IfModule mod_rewrite.c>
        RewriteEngine On

        # Removes index.php from ExpressionEngine URLs
        RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

但随后进入 AccountCenter > [mydomain.com] > PHP Settings，并将 PHP 版本从**5.5.1 CGI (latest)**更改为**5.3.7 CGI (stable)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T10:56:44.627

我在 ExpressionEngine Stack Exchange 站点上发布了[这个解决方案](https://expressionengine.stackexchange.com/a/32164/2432)，但简而言之，我们必须使用的共享托管环境被迫使用 FastCGI，我们无法修改任何 CGI 或 PHP 配置。

为了`$_SERVER['PATH_INFO']`自己创建变量，对我有用的是这个 3 步“自定义”方法：

1.  首先，在 中`ExpressionEngine > CP Home > Admin > System Administration > Output And Debugging`，我将**Force URL 查询字符串**设置为**No**。
2.  接下来，如前面的答案中所述，我将`.htaccess`指令从更改`RewriteRule ^(.*)$ /index.php/$1 [L,QSA]` **为** `RewriteRule ^(.*)$ /index.php?/$1 [L,QSA]`（index.php 之后的额外？）。
3.  最后，我将这段自定义 PHP 代码添加到站点根`index.php`文件的顶部，以“强制”`$_SERVER['PATH_INFO']`变量准确存在：

    ```
    <?php

        $path = $_SERVER['REQUEST_URI'];
        $pos = strpos($path, '?');
        if ($pos !== false)
            $path = substr($path, 0, $pos);
        $_SERVER['PATH_INFO'] = $path;

        /**
         * ExpressionEngine - by EllisLab
           ...
           ... 
    ```

我希望这可以帮助别人！我真的把头发拉了出来，试图找到更优雅的解决方案！

# c# - 使用 FB graph api 从公共 fb 页面检索更多帖子

> ID：13281032
> 
> 赞同：0
> 
> 时间：2012-11-08T01:16:52.547
> 
> 标签：c#, facebook, facebook-graph-api

当我尝试通过传递访问令牌从公共 facebook 页面获取帖子时，我只能检索最新的 25 个帖子。我可以增加返回的帖子数量吗？或者我可以根据我想要的日期检索帖子。如果可能的话，有人可以指导我怎么做吗？

我现在拥有的：

```
 static JsonObject GetPost(string accessToken)
    {
        FacebookClient facebookClient = new FacebookClient(accessToken);

        JsonObject pagePost = facebookClient.Get("/pageName/posts") as JsonObject;

        return pagePost;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:32:27.757

您是否尝试过在 API 响应中使用分页链接？也许您的 SDK 包装了这些，但应该有一种方法可以获取下一页 - 您也可以在初始请求中要求更多（例如`facebookClient.Get("/pageName/posts?limit=100")`）

# jquery - 可折叠面板和调整浏览器大小

> ID：13281033
> 
> 赞同：0
> 
> 时间：2012-11-08T01:16:54.097
> 
> 标签：jquery, media-queries

我已经设置了这个 codepen 来最好地解释我想要做什么。

[http://codepen.io/cfed/full/pfvwr](http://codepen.io/cfed/full/pfvwr)

我正在使用媒体查询来隐藏第四个 div 的内容区域，并在浏览器小于 1300px 时将 div 固定到父容器的底部。我是他们使用 jquery 来切换这个 div 的可见性。这部分工作正常。

我想从这里实现的是以下 -

*   当浏览器大于 1300px 时，总是显示 div。即如果有人最小化浏览器，切换可见性，然后返回到更宽的视图，它应该返回到原始位置。目前它可以以最小化状态返回。
*   jquery 函数仅在浏览器小于 1300px 时才有效。因此，当浏览器大于 1300 像素时单击链接不会执行任何操作。

任何指向我正确方法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:36:05.227

给你：[http ://codepen.io/anon/full/dcBsg](http://codepen.io/anon/full/dcBsg)

要在浏览器窗口宽度超过 1300 像素时显示内容区域，您只需添加一个事件侦听器，以`$(window).resize`在内容区域不可见时显示内容区域（`slideToggle`更改元素的 CSS 时将覆盖您的媒体查询）。

当浏览器宽度超过 1300 像素时，首先防止内容区域被隐藏就像检查窗口的宽度一样简单，如果太宽则什么也不做。

# python - 如何在程序完成执行时防止命令窗口关闭

> ID：13281034
> 
> 赞同：1
> 
> 时间：2012-11-08T01:17:05.683
> 
> 标签：python, command-line, py2exe, command-window

我用 Python (.py) 编写了一个小程序，并使用 Py2exe 将其转换为 Windows 可执行文件 (.exe)。它要求一个字符串，然后输出一个字符串——非常简单！-- 并且在 Python 中完美运行。

但是，当 exe 文件在命令窗口中完成执行时，命令窗口会在我看到它的输出之前自动关闭（我假设它确实会打印输出，因为正如我所说，它在 Python 中完美运行）。

我怎样才能防止这种情况发生？我假设我需要更改我的代码，但我到底需要添加什么？

这是我的代码，以防它帮助您查看它（它是一个文字包装器）：

```
import string

def insertNewlines(text, lineLength):
    if text == '':
        return ''
    elif len(text) <= lineLength:
        return text
    elif text[lineLength] == ' ':
        return text[:lineLength] + '\n' + insertNewlines(text[lineLength+1:], lineLength)
    elif text[lineLength-1] == ' ':
        return text[:lineLength] + '\n' + insertNewlines(text[lineLength:], lineLength)
    else:
        if string.find(text, ' ', lineLength) == -1:
            return text
        else:
            return text[:string.find(text,' ',lineLength)+1] + '\n' + insertNewlines(text[string.find(text,' ',lineLength)+1:], lineLength)
    print

if __name__ == '__main__':
    text = str(raw_input("Enter text to word-wrap: "))
    lineLength = int(raw_input("Enter number of characters per line: "))
    print 
    print insertNewlines(text, lineLength) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:19:06.167

最简单的方法可能是`raw_input()`在程序完成之前使用。它会等到您按下回车键后再关闭。

```
if __name__ == '__main__':
    text = str(raw_input("Enter text to word-wrap: "))
    lineLength = int(raw_input("Enter number of characters per line: "))
    print 
    print insertNewlines(text, lineLength)
    raw_input() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:21:25.853

只需将其放在代码的末尾：

```
junk = raw_input ("Hit ENTER to exit: ") 
```

换句话说，您的`main`细分应该是：

```
if __name__ == '__main__':
    text = str(raw_input("Enter text to word-wrap: "))
    lineLength = int(raw_input("Enter number of characters per line: "))
    print 
    print insertNewlines(text, lineLength)
    junk = raw_input ("Press ENTER to continue: ") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T01:41:00.777

这是我在脚本中使用的：

```
#### windows only ####
import msvcrt

def readch(echo=True):
    "Get a single character on Windows."
    while msvcrt.kbhit():
        msvcrt.getch()
    ch = msvcrt.getch()
    while ch in b'\x00\xe0':
        msvcrt.getch()
        ch = msvcrt.getch()
    if echo:
        msvcrt.putch(ch)
    return ch.decode()

def pause(prompt='Press any key to continue . . .'):
    if prompt:
        print prompt,
    readch()
###################### 
```

但有时，我只是使用以下方法使窗口在关闭前保持打开一小段时间。

```
import time
time.sleep(3) 
```

# r - 合并R中不同长度和缺失值的列

> ID：13281040
> 
> 赞同：1
> 
> 时间：2012-11-08T01:17:31.303
> 
> 标签：r, csv, boxplot

我有一个简单的问题，老实说，我试图找到答案。我真的做到了。

我有一堆 .csv 文件已导入 R 数据帧

我想从每个数据框中获取一个特定的列（具有通用名称），将其合并到一个数据框中，以数据框的名称作为列名，并使用每列生成一个箱线图。

这些列的长度不同，并且经常包含 NA。

示例：数据帧（其中第一行是标题）

数据框名称`Tom`：

```
col1    col2 col3 col4
name1   33   44   55
name2   33   NA   55
name3   33   34   55
name4   33   24   55 
```

数据框名称`Bob`：

```
col1    col2 col3 col4
name5   33   74   55
name6   33   NA   55
name7   33   32   55 
```

数据框名称`Stu`：

```
col1    col2 col3 col4
name8   33   44   55
name9   33   11   55
name10  33   34   55
name11  33   24   55
name12  33   32   55
name13  33   24   5
name14  33   34   55
name15  33   24   5 
```

期望的结果

```
Tom  Bob  Stu
44   74   44
NA   NA   11 
34   32   34
24        24
          32
          24
          34
          24 
```

因此，从每个数据帧中获取“col3”（列名是共享的），并生成一个仅包含 col3 数据的新数据帧，每列被命名为它来自的数据帧的名称......后跟生成 Tom、Bob 和 Stu 的并排箱线图（但我可能可以解决）。可以在上面所需结果的空白处使用 NA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:33:35.497

将你的 data.frames 放在一个命名列表中，`llist`从`Hmisc`包中在这里很有用

```
library(Hmisc)
data.list <- llist(Tom, Bob, Stu)
library(reshape2)
# get a long format version of col3
col3 <- melt(lapply(data.list, `[[`, 'col3'))
# the column `L1` contains the names Tom, Bob, Stu

library(ggplot2)
# create the boxplots

ggplot(col3, aes(x=L1, y= value)) + geom_boxplot() 
```

![在此处输入图像描述](../Images/14b390db57ee8671bd59d6f0ce3cb3ba.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:48:21.460

这是一种基本方法`rbind`，在将标识符列添加到 3 个数据帧中的每一个之后，我使用 创建一个新的组合数据帧。请注意，您也可以在不先创建单个数据框的情况下创建箱线图。

```
Tom = read.table(header=TRUE,
text="col1    col2 col3 col4
name1   33   44   55
name2   33   NA   55
name3   33   34   55
name4   33   24   55")

Bob = read.table(header=TRUE,
text="col1    col2 col3 col4
name5   33   74   55
name6   33   NA   55
name7   33   32   55")

Stu = read.table(header=TRUE,
text="col1    col2 col3 col4
name8   33   44   55
name9   33   11   55
name10  33   34   55
name11  33   24   55
name12  33   32   55
name13  33   24   5
name14  33   34   55
name15  33   24   5")

# Add a new person identifier column to each data frame.
Tom$person = "Tom"
Bob$person = "Bob"
Stu$person = "Stu"

# Combine 3 data frames by row.
dat = rbind(Tom, Bob, Stu)

dat
#      col1 col2 col3 col4 person
# 1   name1   33   44   55    tom
# 2   name2   33   NA   55    tom
# 3   name3   33   34   55    tom
# 4   name4   33   24   55    tom
# 5   name5   33   74   55    bob
# 6   name6   33   NA   55    bob
# 7   name7   33   32   55    bob
# 8   name8   33   44   55    stu
# 9   name9   33   11   55    stu
# 10 name10   33   34   55    stu
# 11 name11   33   24   55    stu
# 12 name12   33   32   55    stu
# 13 name13   33   24    5    stu
# 14 name14   33   34   55    stu
# 15 name15   33   24    5    stu

boxplot(col3 ~ person, data=dat)

# This would also work, without rearranging the data:
boxplot(Tom[, "col3"], Bob[, "col3"], Stu[, "col3"])

# Save to pdf file.
pdf("boxplot_1.pdf", height=5, width=5)
boxplot(col3 ~ person, data=dat, main="Boxplot of three samples.", ylab="col3")
dev.off() 
```

![在此处输入图像描述](../Images/4f8576e31f9bf7e8d2ea2a44198402b6.png)

# ruby-on-rails - @user.save 如何在 user_spec.rb 中工作？（rails教程第6章）

> ID：13281043
> 
> 赞同：3
> 
> 时间：2012-11-08T01:17:48.540
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我正在学习 Ruby on Rails 教程，并且达到了[清单 6.29](http://ruby.railstutorial.org/chapters/modeling-users#code-authenticate_spec)。它描述了（看似标准的）用户身份验证过程的测试。

**我的问题是理解 user_spec.rb 文件的以下（已编辑）部分：**

```
describe User do

before do
    @user = User.new(name: "Example User", email: "user@example.com", 
                 password: "foobar", password_confirmation: "foobar")
end

subject { @user }

describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
       it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
       let(:user_for_invalid_password) { found_user.authenticate("invalid") }

       it { should_not == user_for_invalid_password }
       specify { user_for_invalid_password.should be_false }
   end
end
end 
```

**我的主要困惑是这条线：**

```
before { @user.save } 
```

这真的将测试用户保存在数据库中吗？在测试密码的正确性之前保存这个测试用户会不会使测试变得多余？ **在我看来，我只是在保存用户（使用其密码），然后检查它是否仍然具有相同的密码**（我刚刚保存了它！）有人能够澄清我为什么错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:31:53.770

[是的，它确实确实将用户保存在数据库中（很可能在下一次测试之前被database_cleaner](https://github.com/bmabey/database_cleaner)或其他东西清除 - 测试通常意味着主要是相互隔离运行，并且通常不会使状态永久化）。

与使测试变得多余相反，它是必需的元素。有问题的测试是针对身份验证方法的，而不是针对用户创建的。正在创建用户以针对它测试身份验证方法。基本上，这里发生的是它正在创建用户，然后尝试使用第一个有效密码和下一个无效密码对同一用户进行身份验证，以确保身份验证方法的正确功能。

# c# - C# 从程序线程更新表单（richTextBox 和 toolStripStatusLabel）

> ID：13281048
> 
> 赞同：1
> 
> 时间：2012-11-08T01:18:44.000
> 
> 标签：c#, winforms

我正在尝试使用一个控制台应用程序并为它构建一个 gui。我已经让我的 GUI 的主要功能正常工作，并将控制台应用程序文件添加到我的新项目中。我更改了文件的名称空间以匹配 winform 应用程序的名称空间，并将控制台应用程序的主要功能移动到 Program 类中，将其定义为一个函数，该函数采用从表单获取的 CSV 路径参数。

因此，它似乎可以运行该程序，但我无法更新表单。有一些 Console.WriteLine() 函数我想写入 toolStripStatusLabel 和其他到richTextBox。

我是 C# 新手，主程序不是我写的，但我试图在它的基础上构建。

程序.cs

```
Form1 Frm1 = new Form1();
Frm1.UpdateStatusBar("Sorted jobs by EDD....");
Frm1.Refresh(); 
```

Form1.cs

```
public void UpdateStatusBar(string status)
{
    Form1 Frm1 = new Form1();
    Frm1.toolStripStatusLabel1.Text = status;  
} 
```

[Pastebin Program.cs](http://pastebin.com/HjnJ1YcF) 见第 92 行。

[Pastebin Form1.cs](http://pastebin.com/PyPEsmRD) 见第 88 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:07:55.110

我认为，问题在于：您在尝试 UpdateStatusBar() 时尝试创建新的 Form1。

您可以通过以下方式解决此问题：

```
public void UpdateStatusBar(string status)
{    
    this.toolStripStatusLabel1.Text = status;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:43:03.943

正如@Thinhbk 所说，`Form1`每次您想要更新工具条时都创建一个新的不是要走的路。您遇到的另一个问题是所有处理都在同一个线程中运行（我查看了您在 Pastebin 上发布的内容），这意味着您无论如何都不会看到进度更新。

为了使它工作，我首先将`public void AX1Program(string path)`方法的签名修改为：

```
public void AX1Program(Form1 form1, ManualResetEvent resetEvent, string path) 
```

传入表单意味着我们可以访问该`UpdateStatusBar`方法，并`resetEvent`用于在线程完成时发出信号。`AX1Program`对此的更改主体：

```
try
{
    ...
    //Do work as per normal
    ...
    form1.UpdateStatusBar("some new status");
}
catch (Exception)
{
    //Any exception handling/logging you may need.
}
finally
{
    //Indicate that we are done.
    resetEvent.Set();
} 
```

现在，要调用该`AX1Program`方法，您目前有一些代码（它在您的`Writebutton_Click`方法中的几个地方）：

```
Program Pgm1 = new Program();
Pgm1.AX1Program(CSVtextBox.Text); 
```

我们想异步调用它，所以我们改为：

```
RunAX1Program(CSVtextBox.Text); 
```

它调用以下两种方法：

```
private void RunAX1Program(string text)
{
    ManualResetEvent resetEvent = new ManualResetEvent(false);
    ThreadPool.QueueUserWorkItem(RunAX1ProgramDelegate,
        new object[] { resetEvent, text });
}

private void RunAX1ProgramDelegate(object state)
{
    object[] stateArray = (object[])state;
    ManualResetEvent resetEvent = (ManualResetEvent)stateArray[0];
    string text = (string)stateArray[1];

    Program program = new Program();
    program.AX1Program(this, resetEvent, text);
    //Wait until the event is signalled from AX1Program.
    resetEvent.WaitOne();
} 
```

因为我们现在想从另一个线程更新工具条，所以该`UpdateStatusBar`方法需要如下所示，以便我们可以安全地修改控件：

```
public void UpdateStatusBar(string status)
{
    if (this.InvokeRequired)
    {
        this.BeginInvoke((MethodInvoker)delegate
        {
            UpdateStatusBar(status);
        });
    }
    else
    {
        toolStripStatusLabel1.Text = status;
    }
} 
```

然后，您可以使用类似的模式来更新您的富文本框。

# emacs - emacs 使用 auto-complete-clang 来自动完成，它显示无效的成员函数

> ID：13281049
> 
> 赞同：4
> 
> 时间：2012-11-08T01:19:04.883
> 
> 标签：emacs, autocomplete, clang

我正在使用 emacs24.1 和 auto-complete-clang 来完成 C++ 语法，但是当我触发自动完成操作时，下拉列表包含在 struct 中未指定定义的无效成员函数。我怎样才能避免这种情况？我的 init.el 定义了关于 auto-complete-clang.el

```
(add-to-list 'load-path "/root/.emacs.d/plugins/auto-complete-1.3.1")
(require 'auto-complete)
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "/root/.emacs.d/plugins/ac-dict")
(ac-config-default)
;;start after 3 characters were typed 
(setq ac-auto-start 3)
;;show menu immediately
(setq ac-auto-show-menu 0.3) 
```

**是的，我知道构造函数、析构函数和运算符 = 是默认的，但我仍然不希望显示它们，因为我没有指定声明它们。**

![在此处输入图像描述](../Images/8b79b27316dc8af01648a1541f08bb2a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:17:05.297

当您说“无效的成员函数”时，您指的是 userInfo、~userInfo 和 operator= 吗？

它们分别是默认的构造函数、析构函数和赋值运算符。每个班级都会有一个。它们不是无效的。实际上它们是必需的，如果您不提供它们，编译器将生成默认值。有关这方面的更多文档，请参阅[http://cartan.cas.suffolk.edu/oopdocbook/opensource/derivedcdas.html](http://cartan.cas.suffolk.edu/oopdocbook/opensource/derivedcdas.html)

压制这些成员可能不是一个好主意，因为它们仍然是合理的完成。

# xml - 在标签的第一个实例之前插入文本

> ID：13281050
> 
> 赞同：1
> 
> 时间：2012-11-08T01:19:05.123
> 
> 标签：xml, xslt

我有一堆文档，我正在尝试使用 xslt 设置样式，并且我有一些这样的代码：

```
<tag1>Something</tag1>
<tag2>Something else</tag2>
<tag3>...</tag3> 
```

但在某些文件中可能只有：

```
<tag2>Something else</tag2>
<tag3>...</tag3> 
```

当我渲染文档时，我想`<h2>Heading</h2>`在 tag1、tag2 或 tag3 之前添加一个“”（以先到者为准）。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T04:42:55.753

**就这么简单（没有条件指令，没有`xsl:element`，没有`starts-with()`，没有`preceding-sibling::`轴，没有模式，只有一个覆盖标准身份规则的模板）：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[self::tag1 or self::tag2 or self::tag3][1]">
   <h2>Heading</h2>
   <xsl:call-template name="identity"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（将提供的片段包装到单个顶部元素中以成为格式良好的 XML 文档）：

```
<t>
    <tag1>Something</tag1>
    <tag2>Something else</tag2>
    <tag3>...</tag3>
</t> 
```

**产生了想要的正确结果：**

```
<t>
   <h2>Heading</h2>
   <tag1>Something</tag1>
   <tag2>Something else</tag2>
   <tag3>...</tag3>
</t> 
```

**请注意**：

如果有很多元素名称（不一定以相同的字符串开头，那么像这样重写最后一个模板的匹配模式会更短更实用：

```
 <xsl:template match=
  "*[contains('|tag1|tag2|tag3|', concat('|',name(),'|'))][1]"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:36:33.600

```
<xsl:if test="count(./preceding-sibling::*)=0"><h2>Heading</h2></xsl:if> 
```

这意味着当前节点在文档中的前面有 0 个兄弟元素（即是其父节点的第一个元素）。但正如评论的那样：定位父元素并将 H2 添加到其输出中会产生更好的性能。

总是有一个包含标签，在最坏的情况下它是文档元素本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T01:41:49.493

稍微不同的方法：

```
<xsl:template match="*[tag1|tag2|tag3]">
<xsl:element name="{name()}">
<h2>Heading</h2>
<xsl:apply-templates/>
</xsl:element>
</xsl:template>

<xsl:template match="tag1|tag2|tag3">
<xsl:element name="{name()}"><xsl:apply-templates/></xsl:element>
</xsl:template> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T03:12:44.250

这是我发现对我有用的东西：

```
<xsl:template match="*[starts-with(name(), 'tag')][1]" priority="1">
  <h2>Heading</h2>

  <xsl:apply-templates select="." mode="display"/>
</xsl:template>

<xsl:template match="*[starts-with(name(), 'tag')]">
  <xsl:apply-templates select="." mode="display"/>
</xsl:template>

<xsl:template match="root/tag1" mode="display">
  <p>First tag:
  <xsl:apply-templates />
  </p>
</xsl:template>

<xsl:template match="root/tag2" mode="display">
  <p>Second tag:
  <xsl:apply-templates />
  </p>
</xsl:template>

<xsl:template match="root/tag3" mode="display">
  <p>Third tag:
  <xsl:apply-templates />
  </p>
</xsl:template> 
```

有点不正统，但效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T04:42:32.003

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()" name="ident">
  <xsl:copy>
     <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:template match="*[self::tag1|self::tag2|self::tag3]
                      [not(preceding-sibling::tag1|
                           preceding-sibling::tag2|
                           preceding-sibling::tag3)]">
  <h2>Heading</h2>
  <xsl:call-template name="ident" />
</xsl:template>      
</xsl:stylesheet> 
```

**...或者等价于这个 XSLT 2.0 一个...**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
  <xsl:copy>
     <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:template match="*[self::tag1|self::tag2|self::tag3]
                      [not(preceding-sibling::tag1|
                           preceding-sibling::tag2|
                           preceding-sibling::tag3)]">
  <h2>Heading</h2>
  <xsl:next-match />
</xsl:template>      
</xsl:stylesheet> 
```

**...将转换此输入文档..**

```
<t>
  <branch1>
    <something-before/>
    <tag1>Something</tag1>
    <tag2>Something else</tag2>
    <tag3>tag3 content</tag3>
    <something-after/>
  </branch1>
  <branch2>
    <something-before/>
    <tag3>tag3 content</tag3>
    <tag2>Something else</tag2>
    <something-after/>
  </branch2>
</t> 
```

**...进入...**

```
<t>
  <branch1>
    <something-before />
    <h2>Heading</h2>
    <tag1>Something</tag1>
    <tag2>Something else</tag2>
    <tag3>tag3 content</tag3>
    <something-after />
  </branch1>
  <branch2>
    <something-before />
    <h2>Heading</h2>
    <tag3>tag3 content</tag3>
    <tag2>Something else</tag2>
    <something-after />
  </branch2>
</t> 
```

# android - aapt 在哪里查找资源标识符

> ID：13281052
> 
> 赞同：0
> 
> 时间：2012-11-08T01:19:06.817
> 
> 标签：android, build, aapt

我正在尝试从命令行构建一个 android 应用程序（在“Minimal”源文件中描述的一个使用 Eclipse + ADT 创建 Android 应用程序）并且 aapt 失败并出现一些错误。
错误如下所示：

> AndroidManifest.xml:1：错误：在包“android”中找不到属性“versionCode”的资源标识符，
> 并且为 AndroidManifest.xml 中的每个属性重复一次。

我正在运行的命令是：
`aapt package -M AndroidManifest.xml -S res -J gen`

所以我想我无法为 aapt 定义在哪里查找资源标识符。这个对吗？
我如何告诉 aapt 在哪里寻找资源标识符？
我正在运行 Android 资产打包工具 v0.2。
谢谢，吉姆。

编辑：我应该包含一个指向我复制的源页面的链接：
http ://stackoverflow.com/questions/11888398/minimal-source-files-to-create-android-app-using-eclipse-adt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-22T21:38:42.320

到目前为止，我在 Internet 上找到的创建 android 应用程序的最佳示例是[https://geosoft.no/development/android.html](https://geosoft.no/development/android.html)，如果您使用支持库应用程序主题，则很难弄清楚如何创建 R .java 类，我建议你使用这个参考答案[How to compile an Android app with aapt2 without using any build tools?](https://stackoverflow.com/questions/54274657/how-to-compile-an-android-app-with-aapt2-without-using-any-build-tools/57153503#57153503) 通过它，您将能够使用 android.jar 的通用主题，而无需依赖任何支持库。

# python - Python 导入在全球范围内可见但在类内不可见

> ID：13281066
> 
> 赞同：0
> 
> 时间：2012-11-08T01:20:50.477
> 
> 标签：python, class, reference, import, module

我正在尝试将 python 模块导入另一个（都在同一目录中）。
但是，它仅在全局范围内可见，而不在类定义中，如此屏幕截图所示： ![在此处输入图像描述](../Images/dc87948baf93cd14d3f19e182b8f1beb.png)

有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:23:26.460

这是因为您稍后在方法代码中已将其用作`terrain`局部变量。`__init__`使用不同的变量名。

# android - 如何在画布中调用字符串值？

> ID：13281071
> 
> 赞同：0
> 
> 时间：2012-11-08T01:21:24.510
> 
> 标签：android, android-layout, android-intent, android-emulator, android-canvas

我在 String 中有一些存储值，例如：

```
Intent myIntent = getIntent(); 
Bundle b = myIntent.getExtras();
String a = b.getString("a"); 
```

我想在我的画布页面上显示这个值：如何显示它？我尝试这样做：

```
canvas.drawText(a,apaint); 
```

但它不起作用。你能帮帮我吗..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:13:45.353

先设置油漆颜色

```
paint.setColor(Color.WHITE); 
```

然后画文字

```
canvas.drawText(a, x, y, paint); 
```

`x`-`y`原点坐标。

# c - 从文件中读取以创建数组扫雷代码

> ID：13281073
> 
> 赞同：0
> 
> 时间：2012-11-08T01:21:28.040
> 
> 标签：c, arrays, file-io

我在完成这项任务时遇到了麻烦。我应该创建扫雷阵列。它读入一个文件：

```
100
3
0 0
2 1
7 7
10
0 0
0 1
0 2
0 3
0 4
0 5
0 6
0 7
7 0
7 1 
```

第一行是棋盘数 (100) 第二行是棋盘中炸弹的数量。2 个整数行分别是炸弹位置的行和列。

我的问题是它只打印出一个板，我的第二个问题是如何将板上的 9 切换为 *？

谢谢你！

```
#include <stdio.h>

#define BOARD_SIZE 8
#define BOMB 9

int main() {

    FILE *fp;

    fp = fopen("mine.txt","r");

    int numberBoards = 0;
    int numberMines  = 0;
    int col;
    int row;
    int currentBoard = 0;

    // first row is going to be the number of boards
    fscanf(fp,"%d",&numberBoards);

    while ( fscanf(fp,"%d",&numberMines) > 0 ) {
            int i,j;
            // start board with all zeros
            int board[BOARD_SIZE][BOARD_SIZE] = { {0} };

            currentBoard++;
            printf("Board #%d:\n",currentBoard);

            //Read in the mines and set them
            for (i=0; i<numberMines; i++) {
                    fscanf(fp,"%d %d",&col,&row);
                    board[col-1][row-1] = BOMB;
            }

            //mine proximity
            for (i=0; i<BOARD_SIZE; i++) {
                    for (j=0; j<BOARD_SIZE; j++) {
                            if ( board[i][j] == BOMB ) {
                                    //Square to the left
                                    if (j > 0 && board[i][j-1] != BOMB) {
                                            board[i][j-1]++;
                                    }
                                    //Square to the right
                                    if (j < 0 && board [i][j+1] !=BOMB){
                                            board [i][j+1]++;
                                    }

                                    //Square to the top
                                    if (i > 0 && board [i-1][j] !=BOMB) {
                                            board [i-1][j]++;
                                    }

                                    //Square to the bottom
                                    if ( i < 0 && board [i+1][j] !=BOMB){
                                            board [i+1][j]++;
                                    }

                    }

            }

            //Print out the minesweeper board
            for (i=0; i<BOARD_SIZE; i++) {
                    for (j=0; j<BOARD_SIZE; j++) {
                            printf("%d ",board[i][j]);
                    }
                    printf("\n");
            }
            printf("\n");
    }
    //Close the file.
    fclose(fp);

    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:09:38.653

`fclose`and不应该在`return`while 循环中——这就是它只创建一个板的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:26:45.080

我不明白你关于打印多块板的问题。要打印 a`*`而不是 a `9`：

```
if ( board[i][j] == 9 ) printf("* ");
else printf("%d ",board[i][j]); 
```

# c# - 无法将 emonic c# 插件安装到 Eclipse 3.7.2

> ID：13281077
> 
> 赞同：0
> 
> 时间：2012-11-08T01:21:34.377
> 
> 标签：c#, eclipse

我想在 Eclipse 中使用 c#，但在尝试安装时出现该错误。如何解决这个问题。

下图：我的 Eclipse 版本，计算依赖后的源（放入插件管理器）信息。

```
Version: 3.7.2
Build id: M20120208-0800 
```

* * *

```
 http://emonic.sourceforge.net/updatesite/internap/site.xml 
```

* * *

```
Cannot complete the install because some dependencies are not satisfiable
org.emonic.debugger_feature.feature.group [0.0.2] cannot be installed in this environment because its filter is not applicable. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:46:14.493

I'm not an expert, but it *appears* that the `org.emonicdebugger` feature is exclusive to Linux:

![Screenshot from an installation where I experienced the same issue](../Images/3f28c46aae2c61b9c586f3258935204b.png)

I was having the same problem. After I unchecked that feature from the download, the installation completed successfully.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T16:20:29.840

我尝试下载它四五次，现在我通过此链接成功下载了 emonic：

[http://emonic.sourceforge.net/updatesite/nchc/site.xml](http://emonic.sourceforge.net/updatesite/nchc/site.xml)（台南，台湾 - 亚洲）。

您必须取消选中 org.emonicdebugger！我为 C/C++ 开发人员使用 Eclipse IDE（版本：Mars Release (4.5.0)）。我的操作系统是 Windows 7。

# c++ - 垂直反转二维数组？

> ID：13281079
> 
> 赞同：2
> 
> 时间：2012-11-08T01:21:39.097
> 
> 标签：c++

好的，我很好地填充了 2D 数组......现在我需要保留随机生成到 2D 数组中的相同值，但颠倒垂直顺序（第二个 for 循环）。所以基本上第二个 for 循环需要保持相同的值，但顺序相反。但我觉得如果我进入嵌套的 for 循环和 rand()，它会生成所有新的随机字母......

有谁知道该怎么做？这是我到目前为止所拥有的：

```
char array[20][20];

srand(time(NULL));

for(int i=0;i<20;i++)
 {
     for(int j=0;j<20;j++) {
         array[i][j]= ((rand() % 2) == 0) ? 'O' : 'X';
         cout << array[i][j];
     }
     cout << endl;

     for(int j=20-1; i>=0; i-- {
         array[i][j]= ((rand() % 2) == 0) ? 'O' : 'X';
         cout << array[j][i];
     }
     cout << endl;
 } 
```

编辑对于任何对如何解决此问题感到好奇的人，我想通了！！这是代码：

```
char array[20][20];

srand(time(NULL));

for(int i=0;i<20;i++) {
     for(int j=0;j<20;j++) {
         array[i][j]= ((rand() % 2) == 0) ? 'O' : 'X';
         cout << array[i][j];
     }
     cout << endl;
}

cout << endl;

for(int i=0;i<20;i++) {
    for(int j=19;j>=0;j--) {
        cout << array[i][j];
    }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:25:05.390

你这个条件看起来不太好：

```
 `for(int j=20-1; i>=0; i-- {` 
```

**因为它把循环索引变量改回了`0`，这将使我们的循环无限期地运行。**

另外我认为您不需要在第二个循环中分配新值（您想保留第一个循环中的值）

相反，它应该是（**在当前循环之外**）：

```
 for(int i=19;i>=0;i--)
  {
    for(int j=0;j<20;j++) {
       //no need of line below as you want to print the old values
       //array[i][j]= ((rand() % 2) == 0) ? 'O' : 'X'; 
       cout << array[i][j];
     }
  } 
```

这样，它将首先打印底行，而列不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:25:34.910

无需使用嵌套的 for 循环交换反转中的所有元素，您只需执行 1 个 for 循环，如下所示：

*   交换`array[0]`_`array[19]`
*   交换`array[1]`_`array[18]`
*   ... 等等

伪代码：

```
int i;
int size = 20;
int bound = size / 2;
for(i = 0; i < bound; i++) {
     swap(array[i], array[bound-i]);
} 
```

原因`array[i]`是指向该特定行的指针。因此，您可以在不触及值的情况下交换指针。

# objective-c - 当模型中设置了默认值时，为什么我会得到“休假是必需的值”？

> ID：13281082
> 
> 赞同：1
> 
> 时间：2012-11-08T01:22:31.717
> 
> 标签：objective-c, core-data

我正在为我的问题简化这一点，但是，例如，假设我有一个模型，该模型具有一个名为的实体`Employee`和一个名为的布尔属性`vacationing`，该属性是非可选的，但具有`NO`set 的默认值。

`Employee`但是，在尝试将更新保存到实体时，我看到“休假是必需的值” 。代码如下所示：

```
- (void)reinstateEmployee:(Employee*)employee context:(NSManagedObjectContext*)context {
    employee.vacationing = NO;

    NSError *error;
    if (![context save:error]) {
        NSLog(@"Error saving: %@", error.localizedDescription);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:22:31.717

这里的问题是，`NO`它实际上只是一个别名，`0`它也代表`nil`and `NULL`。

由于分配`nil`给`NSNumber`属性是完全有效的，因此编译器不会抱怨，而是设置`vacationing`为 false，而是取消设置，这在需要属性时无效。

这通过替换 更明显`NO`，`YES`这将产生编译器警告。

要解决此问题，请替换`NO`为`@NO`或`[NSNumber numberWithBool:NO]`改为分配一个`NSNumber`实例。

# ios - 什么是重定向 URI？它如何适用于 OAuth2.0 的 iOS 应用程序？

> ID：13281084
> 
> 赞同：190
> 
> 时间：2012-11-08T01:22:36.537
> 
> 标签：ios, authentication, uri, oauth-2.0

这里的初学者程序员，请原谅无知和解释会非常好:)

我试图阅读某个 OAuth 2.0 服务的教程，但我不理解这个重定向 URI ...... . 我有一个生成的 App ID，但我需要提供某种重定向 URI 来生成 API 密钥。

这是我应该自己在某个地方托管的 URL 吗？顾名思义，我认为重定向 URL 应该将某人“重定向”到某个地方。我唯一的猜测是，这是用户在登录服务后被重定向到的 URL。

但是，即使该假设是正确的，我也不明白另一件事 - 在我将应用程序发送到浏览器以供用户登录后，如何再次打开它们？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-11-09T13:28:50.313

读这个：

[http://www.quora.com/OAuth-2-0/How-does-OAuth-2-0-work](http://www.quora.com/OAuth-2-0/How-does-OAuth-2-0-work)

或者更简单但快速的解释：

[http://agileanswer.blogspot.se/2012/08/oauth-20-for-my-ninth-grader.html](http://agileanswer.blogspot.se/2012/08/oauth-20-for-my-ninth-grader.html)

重定向 URI 是应用的回调入口点。想想 Facebook 的 OAuth 是如何工作的——在最终用户接受权限后，Facebook 必须调用“某物”才能返回应用程序，而“某物”就是重定向 URI。此外，重定向 URI 应该不同于应用程序的初始入口点。

这个难题的另一个关键点是，**您可以从提供给 webview 的 URL 启动您的应用程序**。为此，我只是按照此处的指南进行操作：

[http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

和

[http://incho.net/mobile-development/iphone-development/launching-application-via-url-scheme/](http://inchoo.net/mobile-development/iphone-development/launching-application-via-url-scheme/)

*注意：在最后 2 个链接中，“http://”在打开移动 safari 时有效，但“tel://”在模拟器中无效*

在第一个应用程序中，我调用

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"secondApp://"]]; 
```

在我的第二个应用程序中，我将“secondApp”（而不是“secondApp://”）注册为 URL Scheme 的名称，并将我的公司作为 URL 标识符。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-03T11:51:58.987

看看 OAuth 2.0 playground。您将获得协议的概述。它基本上是一个环境（与任何应用程序一样），向您展示协议中涉及的步骤。

[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-30T07:20:02.927

重定向的 uri 是用户成功登录到您的应用后将被重定向的位置。例如，要在 facebook 中获取您的应用程序的访问令牌，您需要提交重定向的 uri，这只是您在创建 facebook 应用程序时提供的应用程序域。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-25T12:08:05.873

如果您使用的是 Facebook SDK，则无需费心在 facebook 的应用管理页面上输入任何重定向 URI。只需为您的 iOS 应用程序设置一个 URL 方案。您的应用程序的 URL 方案应该是一个值“fbxxxxxxxxxxx”，其中 xxxxxxxxxxx 是您在 facebook 上标识的应用程序 ID。要为您的 iOS 应用设置 URL 方案，请转到应用设置的信息选项卡并添加 URL 类型。

# c++ - C++ 无法计算出数组和函数

> ID：13281089
> 
> 赞同：-3
> 
> 时间：2012-11-08T01:23:22.073
> 
> 标签：c++, visual-c++

> **可能重复：**
> [卡在 C++ 函数和数组上](https://stackoverflow.com/questions/13280921/stuck-on-c-functions-and-arrays)

卡在这个问题上：我无法让它运行，我坚持让数组函数返回到 main。谢谢你的帮助。

需要使用二维数组来存储 3 只猴子每周 7 天吃掉的食物磅数。

创建一个函数来获取一周中每一天每只猴子吃掉的磅数。创建第二个函数来确定通过数组来计算所有吃的钱的总数，然后是一天吃的平均值。

创建第三个函数来确定哪只猴子在哪一天吃的食物最少。还要输出猴子那天吃的量。创建第四个函数来确定哪只猴子一天吃的食物量最多。输出猴子数量、吃的磅数和工作日。

```
#include <iostream>
using namespace std;

const int monkeys = 3;
const int weekdays = 7;
double monkeyWeek[monkeys][weekdays];
double largest;
double least;
double average;
int index;
int dayCount;
double amount;

double amountEaten(double[] [weekdays], int);
double mostEaten (double[] [weekdays],int);
double leastEaten (double[][weekdays], int);

int main(){
    double mostBananas (double[] [weekdays],int);
    double leastBananas (double[][weekdays],int);
    //double bananaAverage (double[][weekdays], int);
}

double amountEaten(double array[] [weekdays], int) {
    cout << "Please enter the amount of food eaten per monkey per day." << endl;
    double amount = array[0][0];
    for (index = 0; index < monkeys; index++)
    {
        for (dayCount = 0; dayCount < weekdays; dayCount++)
        {
            cout << endl << "Please enter the amount of pounds eaten by monkey" 
                         << (index +1)
                         << endl << "for day " << (dayCount +1) << ": ";
            cin >> monkeyWeek[monkeys] [weekdays] ;
            if (monkeyWeek[monkeys] [weekdays] < 1)
                cout << endl <<"Must feed positive amount" << endl;
        }
    }
}

double mostEaten( double array[] [weekdays], int size)
{
    double largest = array[0][0];
    for (int count = 0; count < size; count++)
    {
        for (int col = 0; col < count; col++)
        {
            if (array[count][weekdays] > largest)
            largest = array[count][weekdays];
        }
    }
    return largest;
}

double leastEaten(double array[] [weekdays], int size)
{
    double least = array[0][0];

    for (int count = 0; count < size; count++)
    {
        for (int col = 0; col < size; col++);
        {
            if (array[count][weekdays] < least)
            least = array[count][weekdays];
        }
    }
    return least;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:32:37.870

您只是在声明函数，根本没有调用任何函数。使用下面的示例并相应地更改您的程序。

例子：

```
int main()
{
    int i_array={0,1,2,3,4,5};
    function(i_array);           //  Call a function
    printf("%d",i_array[0]);    // will print 100 not 0
}

void function(int []  i_array)
{
    i_array[0]=100;
} 
```

# java - JPanel 上出现的视觉伪影

> ID：13281092
> 
> 赞同：2
> 
> 时间：2012-11-08T01:23:26.113
> 
> 标签：java, swing, jpanel, repaint, paintcomponent

我正在尝试使用 2 创建一个`JPanel`程序`BorderLayout`。中心面板用于随机绘制矩形，而南面板用于按钮。

`JFrame`每当我将鼠标光标悬停在北或南按钮上时，我都会在左上角得到一个奇怪的按钮图像。我做了一些研究，发现这可能是拥有透明背景的原因。我尝试使用`super.paintComponent(g)`面板，但之前绘制的其余矩形消失了。我需要矩形留在`JPanel`但不是左上角的奇怪图像中。

我不知道我做错了什么，希望有人可以帮助或提供一些关于如何解决这个问题的线索。

```
 public class TwoBRandomRec extends JFrame{

    private static final long serialVersionUID = 1L;

    public static void main(String[] args) {
        TwoBRandomRec rec = new TwoBRandomRec();

        rec.setSize(500,500);
        rec.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        rec.setVisible(true);
    }

    public TwoBRandomRec() {
        //Create the buttons
        JButton north = new JButton("North");
        JButton south = new JButton("South");
        DrawPanel drawPanel = new DrawPanel(500,500);

        JPanel southP = new JPanel();
        southP.add(south);
        southP.add(north);

        this.add(drawPanel, BorderLayout.CENTER);
        this.add(southP, BorderLayout.SOUTH);

        this.setTitle("TwoButtonRandomRec");
        this.pack();        
    }

    public class DrawPanel extends JPanel {

        private static final long serialVersionUID = 1L;

        private Random rand = new Random();
        private int x,y,xSize,ySize;
        private int height,width;

        public DrawPanel(int w,int h) {
            width = w;
            height = h;
        }
        public void RandomX(){
             x=rand.nextInt(width-1);
             xSize=rand.nextInt(width-x);
         }

         public void RandomY(){
             y=rand.nextInt(height-1);
             ySize=rand.nextInt(height-y);
         }

         public Color RandomColour(){
             rand.nextInt(height);
             return new Color(rand.nextInt(255),rand.nextInt(255),rand.nextInt(255));
         }

        @Override
        protected void paintComponent(Graphics g) {
            RandomX();
            RandomY();

            g.setColor(RandomColour());
            g.fillRect(x, y, xSize, ySize);
            try {
                Thread.sleep(50);

            } catch (InterruptedException e) {  
            }

            repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T01:27:54.970

你不打电话`super.paintComponent`

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g); // <-- Insert me here and watch problem go away
    RandomX();
    RandomY();

    g.setColor(RandomColour());
    g.fillRect(x, y, xSize, ySize);
    try {
        Thread.sleep(50); // <-- This is an INCREDIBLY bad idea, NEVER, EVER do this

    } catch (InterruptedException e) {  
    }

    repaint(); // <-- This is a bad idea, watch CPU max out...
} 
```

您有义务致电`super.paintComponent`以确保正确维护油漆链，并进行不透明度和图形上下文清理等操作。

该`Graphics`对象通过单个重绘通道在组件之间共享，未能遵守正确的绘制链将导致像您这样的问题

`paint`永远不要从任何方法（包括调用）更新 UI `repaint`，这只会导致你的`paint`方法被一遍又一遍地调用......直到你的 CPU 达到 100% 并且程序挂起。

永远不要，永远不要在方法（或一般的 UI）中做任何耗时或阻塞操作`paint`，这将使它看起来像挂起的程序并使用户不高兴（你认为僵尸群是坏的：P）。以这种方式阻塞会阻止 EDT 响应绘画请求......

我建议通读一遍：

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# javascript - Threejs - 基于四元数旋转翻译对象

> ID：13281093
> 
> 赞同：1
> 
> 时间：2012-11-08T01:23:32.650
> 
> 标签：javascript, 3d, webgl, three.js

我有一个使用四元数的对象。这个四元数在用户的按键上得到更新，以允许对象旋转它的内轴。旋转效果很好。当处于默认状态时（在用户调整旋转之前）我的四元数读取 w:1, x:0, y:0, z:0

我希望这个对象总是通过它的内部 z 轴在空间中向前移动 - THREE.Vector3(0,0,-1)。如何使用 quat 知道它的 z 轴在哪里并向前移动？

例如 - 当我的四元数读取 w:0.7, x:0.7, y:0, z:0 - 对象被旋转以使其 z 轴指向上方。有没有办法通过它的内轴移动一个物体？

这是一个 jsfiddle 示例：[http](http://bitly.com/RXPy5w) ://bitly.com/RXPy5w - 我希望正方形始终相对于它的 z 轴向前移动

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:28:33.730

这里的四元数代表三个空间中的旋转。您需要首先指定要旋转的初始方向。将其设为起始方向方向的单位向量。

现在，要沿当前方向的方向行进，您可以通过当前四元数描述的旋转来旋转初始方向向量。现在你有一个指向正确方向的单位向量。

最后，当然，您可以缩放该单位向量以表示非单位距离的运动，将其添加到您的当前位置，您就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:42:24.543

您所要做的就是在渲染循环中添加以下行：

```
airplane.translateZ( 1 ); 
```

更新的小提琴： http: [//jsfiddle.net/Lc8gH/21/](http://jsfiddle.net/Lc8gH/21/) 享受吧！

顺便说一句，你不能“翻译一个四元数”。继续学习，直到你理解这段代码在做什么。

# ruby - 使用 Ruby 解析具有数百个标签的结构化和半结构化文本

> ID：13281108
> 
> 赞同：0
> 
> 时间：2012-11-08T01:25:43.117
> 
> 标签：ruby, ruby-on-rails-3

我将分批处理 10,000-50,000 条记录，每条记录大约有 200-400 个字符。我预计我可以拥有的搜索词数量不会超过 1500 个（都与本地企业相关）。

我想创建一个函数，将结构化标签与术语列表进行比较以标记数据。

这些条款基于业务描述。因此，例如，a `[Jazz Bar]`、`[Nightclub]`、`[Sports Bar]`或`[Wine Bar]`都对应于 的查询`[Bar]`。

通常这个数据有某种现有的标签，所以我也可以为第一遍创建一个严格的层次结构，然后在没有明确的现有标签的情况下进行第二遍。

实现这一点的最性能敏感的方法是什么？我可以有一个包含所有关键字的表，并尝试将它们与每条数据进行匹配。这在我匹配现有标签的情况下很简单，在处理自由文本时不那么简单。

我正在使用 Heroku/Postgresql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:15:19.560

使用[Sphinx](http://sphinxsearch.com/)搜索引擎和[ThinkingSphinx](http://pat.github.com/ts/en/) Ruby gem 是一个非常安全的选择。是的，有一些配置开销，但我还没有找到 Sphinx 失败的场景。:-)

如果您有 30-60 分钟的时间进行设置，请尝试一下。我一直在使用 Sphinx 在包含 600,000 多条记录的数据库表中搜索复杂查询（3 个单独的搜索条件 + 2 个单独的字段分组/排序），我在 0.625 秒内得到了结果，这一点也不差，我确信比你用纯 Ruby 代码自己完成的任何事情都要好得多。

# windows - 使用 Sed 提取整个网站的基本 URL

> ID：13281109
> 
> 赞同：1
> 
> 时间：2012-11-08T01:25:50.593
> 
> 标签：windows, sed

我正在寻找包含以下内容的文件：

```
 http://www.site1.com/d23bdbd0fbc517d34, r N 4
    https://www.site2.com/file/d23bdbd0fbc517d34, X
    http://www.site3.com/file/d23bdbd0fbc517d34
    https://www.site4.edu/site/d23bdbd0fbc517d34 
```

我需要使用 sed 来获得这种输出：

```
 www.site1.com
    www.site2.com
    www.site3.com
    www.site4.edu 
```

帮助！我无法让它完全正常工作。从技术上讲，我正在为 Windows 使用 sed.exe，但它可能非常相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:28:31.790

```
$ cat file.txt
    http://www.site1.com/d23bdbd0fbc517d34, r N 4
    https://www.site2.com/file/d23bdbd0fbc517d34, X
    http://www.site3.com/file/d23bdbd0fbc517d34
    https://www.site4.edu/site/d23bdbd0fbc517d34
$ sed -r 's@.*//([^ /]+).*@\1@g' file.txt
www.site1.com
www.site2.com
www.site3.com
www.site4.edu 
```

如果你没有`-r`switch ：

```
sed 's@.*//\([^ /]\+\)[/ ].*@\1@g' file.txt 
```

此外，在[windows](/questions/tagged/windows "显示标记为“windows”的问题") IIRC 下，使用双引号而不是单引号。

所以也许：

```
sed.exe "s@.*//\([^ /]\+\)[/ ].*@\1@g" file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:54:37.060

另一个变体是：

```
sed '\#.*www[.]\([^/]*\).*# s::\1:' 
```

将显示

```
site1.com
site2.com
site3.com
site4.edu 
```

用

```
@ThinkPad-T420:~$ sed --version 
GNU sed version 4.2.1 
```

# jquery - 使用 jquery/javascript 启用/禁用文本框

> ID：13281110
> 
> 赞同：0
> 
> 时间：2012-11-08T01:26:03.290
> 
> 标签：jquery

我使用 JQuery，我有一个网页，其中列出了多行，每行带有单选按钮和文本框。当我连续单击单选按钮时，我正在尝试启用文本框。我所期待的是 - 它应该只在该行中启用/禁用文本框。它不应该启用/禁用其他行中的文本框。

默认情况下，每行中的所有文本框在页面加载时都被禁用。我进行了研究，并且能够获得一个解决方案来启用一个文本框，当我单击一个单选按钮时。现在，当我选择另一个单选按钮时，我希望之前启用的文本框应该再次被禁用，并且当前行中的文本框现在应该被启用。这就是我想要达到的目标。

我做了很多研究，大多数答案都不符合要求。请帮助。我使用 JQuery，我也尝试使用 Jquery 和 javascripts 获得解决方案。

这是代码：

```
<div class="content">   
    <form name="selectedMatIds" action="@{addMaterialsToBuffer()}" method="POST">
    <div class="separator" style="margin-top:30px"><h4>Materials found</h4></div>
    <table class="table MaterialTable" id="makeZebras">
        <thead>
        <tr>
                <th class="alignLeft first">
                    Code
                </th>
                <th class="alignLeft">
                    Measure
                </th>
                <th class="alignLeft">
                    Unit
                </th>
                <th class="alignLeft">
                    New Unit
                </th>
            </tr>
        </thead>
        <tbody>
            #{list items:foundList, as:'mat' }
            <tr>
                <td>
                    <input type="radio" name="selectedMatIds" id="selectedMatIds" value="${mat.id}" onclick="getMaterialID()"> ${mat.materialCode} 
                </td>
                <td>
                    ${mat.bum}
                </td>
                <td>
                    ${mat.iumPerBum}
                </td>
                <td>
                <div id="group">
                    <input type="text" id="newIUM" name="${mat.id}" value="${newIUM}" disabled>
                    <input type="hidden" id="oldIUM" name="oldIUM" value="${mat.iumPerBum}">
                    <input type="hidden" id="bum" name="bum" value="${mat.bum}">
                    <a id="save" onclick="loadURL1()">Save</a> <a>Cancel</a>                        
                </div>
                </td>
            </tr>
            #{/list}
        </tbody>
        <div class="actions">
            <input type="submit" class="primary" value="Continue">
        </div>
    </table> 
```

现在，Jquery 脚本：

```
$("input:radio[name='selectedMatIds']").click(function() {
    var isDisabled = $(this).is(":checked");
    var value = $(this).val();
    var textValue = $("#newIUM").val();
    alert(isDisabled);
    alert(value);
    alert(textValue);
    if(isDisabled) $("#newIUM").removeAttr("disabled");
    else $("#newIUM").attr("disabled", isDisabled);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:30:49.450

采用[`.closest()`](http://api.jquery.com/closest/)

```
$("input:radio[name='selectedMatIds']").click(function() {
      var value = $(this).val();
      var $closest = $(this).closest('tr'); // Find closest tr 
      // Find the value of the textbox in current row
      var textValue = $closest.find('input[type="text"]').val(); 
        //  Disable All Text Boxes
      $('.MaterialTable input[type="text"]').prop('disabled' , true);  

      // Only enable the textbox of the particular row
      $closest.find('input[type="text"]').prop('disabled' , false);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:12:26.900

谢谢你的帮助！当用户单击单选按钮然后将此值从隐藏文本字段传递给控制器​​时，我通过将文本框内容写入隐藏文本字段来解决此问题。

# arrays - 带数组的 Fortran 子例程

> ID：13281111
> 
> 赞同：2
> 
> 时间：2012-11-08T01:26:06.390
> 
> 标签：arrays, fortran, subroutine

我在这个程序中的子程序有问题，它位于程序的末尾。我在子例程中对数组进行划分时遇到错误，它显示“不可分类语句”。希望有人能帮忙！

```
PROGRAM subroutine1
IMPLICIT NONE

INTEGER:: err, ierr, counter, y ,i ,j 
!INTEGER, ALLOCATABLE:: gamenum(:)
CHARACTER(30):: fname
REAL, ALLOCATABLE:: AB(:), H(:), TB(:), BA (:), SP(:)

100 Format (A)
200 Format (I2)
300 Format (F9.3)

! 1.Open file

WRITE(*,100)"Please enter a filename:"
READ(*,*) fname

OPEN (UNIT=10, FILE=fname, STATUS="OLD", ACTION="READ", IOSTAT=err)
IF(err.NE.0) STOP "An error occured when opening the file."

! 2.Count Lines

READ(10,*)

counter=0
DO
    READ(10,*,IOSTAT=ierr)
    IF(ierr .NE. 0) EXIT
    counter=counter+1
END DO

!WRITE(*,200) counter

! 3\. allocate array

ALLOCATE(AB(counter)) 
ALLOCATE(H(counter))
ALLOCATE(TB(counter)) 
ALLOCATE(BA (counter)) 
ALLOCATE(SP(counter))

! 4\. read in data

REWIND(10)

READ(10,*)

DO i=1,counter
    READ(10,*) AB(i), H(i), TB(i)   
END DO

REWIND(10)

! 5\. Call subroutine

    CALL arraycalc(counter,AB,H,TB,BA,SP)

! 6\. Write out
WRITE(*,100)"Game    AB       H       TB       BA       SP" 

DO i=1,counter
    WRITE(*,200,ADVANCE="NO") i
    WRITE(*,'(5F9.3)') AB(i), H(i), TB(i), BA(i), SP(i)
END DO

END PROGRAM subroutine1

!HERE IS THE PART WHERE I'M HAVING TROUBLE  

SUBROUTINE arraycalc(counter,AB,H,TB,BA,SP)
IMPLICIT NONE

INTEGER, INTENT(IN)::counter
INTEGER::i
REAL,INTENT(INOUT)::AB,H,TB
REAL,INTENT(INOUT):: BA,SP

DO i=1,counter
    BA(i)=H(i)/AB(i)
END DO

DO i=1,counter
    SP(i)=TB(i)/AB(i)
END DO

END SUBROUTINE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:00:15.620

在子例程内部，`AB`, `H`, `TB`, `BA`, 和`SP`没有声明为数组，因此给出错误的语句确实没有意义。它们是标量，因此不能被索引。

# objective-c - 如何将子视图添加到视图控制器？

> ID：13281112
> 
> 赞同：1
> 
> 时间：2012-11-08T01:26:12.543
> 
> 标签：objective-c, xcode

我有一个绿色矩形，但是当我运行应用程序时它不会显示。这是我的代码：

```
- (void) makeBlockg {

    x = arc4random()%(320) + 1;

    CGRect block = CGRectMake(x, 0, 100, 70);

    greenblock.frame = block;

    greenblock.self.backgroundColor = [UIColor greenColor];

    [self.view addSubview:greenblock];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:57:57.753

这段代码对我来说很好。你确定你用 正确初始化绿块`greenblock = [[UIView alloc] init]`吗？如果不这样做，greenblock 是 nil，而不是一个空的 UIView 对象。

# multithreading - IBM Websphere Portal 中的轮询 portlet 问题

> ID：13281113
> 
> 赞同：0
> 
> 时间：2012-11-08T01:26:13.343
> 
> 标签：multithreading, crash, websphere, polling, portal

我在诊断工作中的生产问题时遇到问题。基本上，我们有一个在 IBM Websphere Portal（版本 5 或 6）上运行的 Intranet Portal 站点。所以页面几乎是建立在不同portlet 的组合之上的，即新闻portlet、通用链接portlet、图形图像portlet 等。我们还创建了一个轮询portlet，供内部用户对特定问题进行投票。但是，当（我被告知）多个用户同时投票（或同时配置 portlet）时，这个轮询 portlet 会导致整个门户中断，这会增加运行线程的数量。我一直在尝试使用负载测试工具（例如 Fiddler）在 QA/Test 环境中复制该问题，但未能重现该问题。我的信息量有限 当他们找到我在代码中找到问题的根本原因时，我得到了答复。如果无法复制问题，我就无法确保我已经解决了问题。

谁能建议我可以通过哪些其他方式来重现该问题？有没有人遇到过类似的问题？你是如何复制它的？

很抱歉，除了向您描述问题外，我无法提供太多信息。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:32:36.107

我怀疑您被告知的有关 Portal 中断的情况与 Portal Server 用尽 Web 线程有关。

WebSphere Portal 只是构建在 WebSphere Application Server 之上的应用程序。WebSphere Application Server 提供 JavaEE 运行时本身。长话短说，WebSphere Application Server 为某些任务维护*线程池*。

线程池之一是“Web Container”线程池。如果设置为`X`，则最多`X`可以同时处理 Web 请求；th 请求将`X+1`不得不等待。

如果线程池已用尽并且有大量请求等待线程可用，则可能会发生中断。

您应该检查 Web 容器线程池的大小并从那里获取。

# ruby-on-rails - Ruby 方法中的哈希和花括号

> ID：13281114
> 
> 赞同：-1
> 
> 时间：2012-11-08T01:26:17.003
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash

我的一个视图文件中有这个方法：

```
<%= link_to "Sign up now!", signup_path, class: "btn", id: "some_id" %> 
```

这是正确的，还是我必须像这样在两个散列周围附加花括号：

```
<%= link_to "Sign up now!", signup_path, { class: "btn", id: "some_id" } %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T02:09:17.697

您的两个代码示例都是正确且有效的。然而你的问题是不对的

`class: "btn", id: "some_id"`不是两个哈希，而是一个。

因此，您将一个哈希作为最后一个参数传递，并且可以安全地放弃花括号。

# javascript - 在 Acrobat 中使用 JavaScript 设置 PDF 表单小部件的值时，如何保留其设计？

> ID：13281124
> 
> 赞同：2
> 
> 时间：2012-11-08T01:28:17.367
> 
> 标签：javascript, widget, field, acrobat, adobe-indesign

我在 InDesign 中创建了一个交互式 PDF 表单，我需要对其执行一些繁重的 JavaScript 操作。问题是在使用 JavaScript 设置字段值时，小部件设计被覆盖。例如，复选框在选中时应如下所示：

[http://i45.tinypic.com/axl6u.png](http://i45.tinypic.com/axl6u.png)

但是执行：

```
var f = this.getField("Checkbox");
f.value = "Yes"; 
```

在 JS 控制台中导致小部件的外观默认为 acrobat 的：

[http://i49.tinypic.com/11qmm1g.png](http://i49.tinypic.com/11qmm1g.png)

我已经尝试了 Acrobat 的 Javascript API 参考中记录的每个小部件属性，但无济于事。最初，使用鼠标检查/取消检查工作正常。使用 JS 设置值后，Acrobat 的默认黑色复选字符将用于所有后续切换，包括使用鼠标时...

InDesign 如何导出带有小部件自定义图标的交互式 PDF？有没有办法在 Acrobat Pro 中使用 JS 强制使用这些图标？使用鼠标选择复选框或单选按钮与使用 JS 设置其值有什么区别？

# c# - 公开列表的最佳方式是什么 作为只读？

> ID：13281125
> 
> 赞同：6
> 
> 时间：2012-11-08T01:28:30.327
> 
> 标签：c#

我已经多次遇到这个设计问题，但从未找到一个杀手级的解决方案。

我想公开一个在所有者`class`范围内可编辑但仅对其他公共范围可读的集合。

**试验一：**

```
public class MyClass
{
    private List<object> _myList = new List<object>();

    public IEnumerable<object> MyList { get { return _myList; } }
} 
```

这样做的问题是外部代码可以将其转换回`List`并编辑，如下所示：

```
var x = ((List<object>)MyList); 
```

**试验二：**

```
public class MyClass
{
    private List<object> _myList = new List<object>();

    public IEnumerable<object> MyList { get { return _myList.ToList(); } }
} 
```

这样我们可以防止外部修改，但会产生不必要的`List`多次复制开销。

**试验 3：**

```
public class MyClass
{
    private List<object> _myList = new List<object>();
    private ReadOnlyCollection<object> _roList = 
        new ReadOnlyCollection<object>(_myList)

    public IEnumerable<object> MyList { get { return _roList; } }
} 
```

这是我目前使用的标准解决方案，但`ReadOnlyCollection`速度慢了大约 30%：

```
Debug Trace:
Use normal foreach on the ReadOnlyCollection
Speed(ms): 2520,3203125
Result: 4999999950000000

use<list>.ForEach
Speed(ms): 1446,1796875
Result: 4999999950000000

Use normal foreach on the List
Speed(ms): 1891,2421875
Result: 4999999950000000 
```

有没有一种“完美”的方式来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T01:30:54.457

您是否尝试过返回枚举器？

```
public class MyClass
{
    private List<object> _myList = new List<object>();

    public IEnumerable<object> MyList { get { yield return _myList.GetEnumerator(); } }
} 
```

这不会创建副本，是只读的，并且不能转换回列表。

**编辑：**这只适用于*收益*回报。以这种方式评估它是懒惰的，我不知道这对您来说是否是一个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T01:31:55.157

您可以使用[`List<T>.AsReadOnly`](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)方法来公开列表的瘦只读包装器。不会有额外的复制，调用者将立即“看到”在您的方法内完成的对原始数组的更改：

```
public ReadOnlyCollection<object> MyList { get { return _myList.AsReadOnly(); } } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-26T10:08:12.957

`List<T>`实现`IReadOnlyList<T>`：

```
public class MyClass
{
    private List<object> _myList = new List<object>();   // Modifiable

    public IReadOnlyList<object> MyList => _myList;      // Read only
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T01:45:58.487

我通常使用并且非常喜欢的解决方案，因为它很简单，如下所示：

```
public IEnumerable<object> MyList { get { return _myList.Select(x => x); } } 
```

但是，它要求您使用支持 Linq 的 .NET 版本

用 a 循环它`foreach`实际上更快：不到 1ms`Select`和 0.1 秒`ReadOnlyCollection`。对于`ReadOnlyCollection`，我使用了：

```
public IEnumerable<object> MyROList { get { return new ReadOnlyCollection<object>(_myList); } } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T04:08:06.300

为什么不使用[`List<T>.AsReadOnly`method](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)，请参阅下面的代码片段：

```
public class MyClass
{
    private List<object> _myList = new List<object>();

    public IList<object> MyList { get { return _myList.AsReadOnly(); } }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T01:33:01.017

`ReadOnlyCollection<T>`用作包装器 - 它在内部使用您的集合`List<T>`（使用相同的引用，因此它不会复制任何内容，并且对列表所做的任何更改也会反映在 ReadOnlyCollection 中）。

它比仅提供 IEnumerable 属性要好，因为它还提供索引和计数信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T01:59:44.287

.NET Framework 4.5 引入了两个新接口：[`IReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/hh881542.aspx)和[`IReadOnlyList<T>`](http://msdn.microsoft.com/en-us/library/hh192385.aspx). `List<T>`实现这两个接口。

# java - java中的xStream反序列化

> ID：13281128
> 
> 赞同：0
> 
> 时间：2012-11-08T01:28:38.113
> 
> 标签：java, android, xml, xstream

```
<requests>    
    <request id="246">
        <employee id="40350">Michael Daniels</employee>
        <start>2012-10-20</start>
        <end>2012-10-25</end>
        <created>2012-10-11</created>
        <status lastChanged="2012-10-24" lastChangedByUserId="2270">superceded</status>
        <type id="4">Vacation</type>
        <amount unit="hours">2</amount>
        <notes>
            <note from="employee">Having wisdom teeth removed.</note>
            <note from="manager">Get well soon</note>
        </notes>
    </request>
    <request id="248">
        <employee id="40350">Michael Daniels</employee>
        <start>2012-11-12</start>
        <end>2012-11-15</end>
        <created>2012-10-19</created>
        <status lastChanged="2012-10-30" lastChangedByUserId="2270">superceded</status>
        <type id="4">Vacation</type>
        <amount unit="hours">2</amount>
        <notes>
            <note from="employee">My dog ate my homework so I can't come to work.</note>
        </notes>
    </request> 
```

我很难弄清楚 xstream 想要我如何设置它......这就是我目前正在做的事情：

```
class Holder
{
    Requests requests;

    @XStreamAlias("requests")
    public static class Requests
    {
        List<Request> requests = new ArrayList<Request>();
    }

    @XStreamAlias("request")
    public static class Request
    {
        int id;
        Employee employee;
        String start;
        String end;
        String created;
        Status status;
        Type type;
        Amount amount;
        Notes notes;

    }

    public static class Employee
    {
        int id;
        String content;
    }
    public static class Status
    {
        String content;
        String lastChanged;
        int lastChangedByUserId;
    }
    public static class Type
    {
        int id;
        String content;
    }
    public static class Amount
    {
        String unit;
        int content;
    }
    public static class Notes
    {
        List<Note> notes = new ArrayList<Note>();
    }
    public static class Note
    {
        String from;
        String content;
    }
} 
```

有人请帮我弄清楚如何设置结构，以便xstream从bove xml填充它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:43:51.847

我认为您需要静态类中的 getter 和 setter 结构，就像`public static class Employee`“int id”和“String content”一样。

# paypal - Paypal 自定义用户结账

> ID：13281131
> 
> 赞同：1
> 
> 时间：2012-11-08T01:29:03.493
> 
> 标签：paypal, fuelphp

是否有任何已知的方式（api 或类似的东西）可以用来为 Paypal 创建我自己的用户结帐体验？

因此，例如，用户单击我的捐赠按钮，将他们带到我的捐赠页面。我收集所需的用户信息并使用某种身份验证方法将其安全地传递给贝宝，而无需从我的网站重定向或使用他们的“自定义您的付款页面”（这对我来说完全不够可定制）。

我浏览了他们无数的api，但还没有发现任何有用的东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:21:38.493

这可以使用[Direct Payment API](https://www.paypal.com/cgi-bin/webscr?cmd=_dcc_hub-outside)来完成。但是，为了使用它，您需要拥有一个 PayPal 支付专业帐户。

如果您打算使用 FuelPHP 来实现它，那么这里有一个功能丰富、基于驱动程序的[包](https://github.com/calvinfroedge/FuelPay)。

# actionscript-3 - AS3 计算对象是否在其他对象上并更改动态文本

> ID：13281135
> 
> 赞同：0
> 
> 时间：2012-11-08T01:29:36.450
> 
> 标签：actionscript-3, flash

所以我有这个功能。它应该做的是计算葡萄干饼干是否在盘子上（我已经正确声明了所有变量）并有一个动态文本显示卡路里计数。当饼干从盘子里出来时，卡路里计数应该减去饼干的卡路里计数（它不应该重置，因为我还有其他饼干）。raisinOnce 是一个布尔值，可确保在将饼干添加到盘子中至少一次之前不会扣除卡路里。

```
function caloriesf(e:Event)
{
    calories.text="only "+String(caloriesv)+" calories!";
    if (((raisin.x > plateminx && raisin.x < platemaxx)&& (raisin.y > plateminy && raisin.y < platemaxx))&& raisinInPlate==false)
    {
        raisinOnce=true;
        caloriesv+=50;
        raisinInPlate=true;
        return;
    }
    else if (((raisin.x < plateminx && raisin.x > platemaxx)&&(raisin.y < plateminy && raisin.y > platemaxx)) && raisinOnce==true)
    {
        raisinInPlate=false;
        caloriesv-=50;
    }
} 
```

现在，当将 cookie 添加到盘子中时，这可以正常工作，但在将其移除时就不行了！这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:24:50.683

我想到了。问题是 else 不需要语句，我也不需要使用 Once 布尔值...更正后的代码如下（有效）

```
function caloriesf(e:Event)
{
    calories.text="only "+String(caloriesv)+" calories!";
    if ((raisin.x > plateminx && raisin.x < platemaxx)&& (raisin.y > plateminy && raisin.y < platemaxy))
    {
        if (raisinInPlate==false)
        {
            caloriesv+=50;
            raisinInPlate=true;
        }
    }
    else
    {
        if (raisinInPlate==true)
        {
            raisinInPlate=false;
            caloriesv-=50;
        }
    }
} 
```

# javascript - 如何更改 JSON 格式？

> ID：13281142
> 
> 赞同：0
> 
> 时间：2012-11-08T01:30:16.997
> 
> 标签：javascript, json, node.js, mongodb

我有以下 json

`{"result": { "a": 1, "b": 2 "c": [ { "d": 3, "e": 4 }, { "d": 3, "e": 4 } ] }}`

我想把它改成这样：

`{"result": [{ "a": 1, "b": 2, "d": 3, "e": 4 }, { "a": 1, "b": 2, "d": 3, "e": 4 }]}`

有没有办法像这样改变JSON？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:42:45.687

您可以`Array.prototype.reduce()`为此使用：

```
var obj = {"result": { "a": 1, "b": 2, "c": [ { "d": 3, "e": 4 }, { "d": 3, "e": 4 } ] }};

var res = obj.result.c.reduce(function(res, arrObj) {
    res.result.push({a:obj.result.a, b:obj.result.b, d:arrObj.d, e:arrObj.e});
    return res;
}, {result:[]}); 
```

或者如果它应该更动态，那么就像这样：

```
var res = obj.result.c.reduce(function(res, arrObj) {
    Object.keys(obj.result).forEach(function(key) {
       if (typeof obj.result[key] !== 'object')
           arrObj[key] = obj.result[key];
    });
    res.result.push(arrObj);
    return res;
}, {result:[]}); 
```

# c# - 如何更改 WPF 应用程序的图标

> ID：13281143
> 
> 赞同：5
> 
> 时间：2012-11-08T01:30:21.807
> 
> 标签：c#, wpf

> **可能重复：**
> [所有应用程序窗口的 WPF 图标](https://stackoverflow.com/questions/1881580/wpf-icon-for-all-app-windows)

我有一个`wpf`应用程序，我想为所有窗口设置图标。

我`ico`在我的项目文件夹 /img/app.ico 中有文件，但它是`build action = Resource`.

我将应用程序更改`Icon and manifest`为`/img/app.ico`，但它不起作用。

编译时提示错误：

```
The img/app.ico is not found. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T01:42:07.323

您是否尝试过强制图标

```
<Window Icon="youricon.ico"></Window> 
```

[http://msdn.microsoft.com/en-us/library/system.windows.window.icon.aspx](http://msdn.microsoft.com/en-us/library/system.windows.window.icon.aspx)

# javascript - jQuery 给了我“未定义”的回显 json

> ID：13281144
> 
> 赞同：0
> 
> 时间：2012-11-08T01:30:32.710
> 
> 标签：javascript, jquery, json, jsonp

我正在尝试打印出“消息”

JSON：

```
[{"outcome":false,"message":"This is the message"}] 
```

我已经尝试了 3 件事，这是它们的结果......

`console.log(msg)`=> `[{"outcome":false,"message":"Your account is pending beta activation"}]`（这很好）

`var x = $.parseJSON(msg);`

`console.log(x)`给我一个对象

`console.log(x.message)`给我`undefined`

`msg.message`如果不是这样，正确的访问方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:31:44.457

您在数组中有一个对象。使用索引`0`。

```
x[0].message; 
```

* * *

如果您预计 Array 中有更多对象，则可以使用`$.each`来迭代 Array。

```
$.each(x, function(i, obj) {
    console.log(obj.message);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T01:32:41.510

看起来您获得了一个包含返回数组的 json 对象，您是否尝试过：

```
console.log(x[0].message); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T01:34:05.657

你的 json 是一个对象数组

相反，您应该使用

```
x[0].message; 
```

# ruby-on-rails-3 - 如何为 JavaScript 开发配置 Rails 3

> ID：13281147
> 
> 赞同：0
> 
> 时间：2012-11-08T01:30:50.350
> 
> 标签：ruby-on-rails-3

我正在将一个应用程序从 Rails 2 移动到 Rails 3。应用程序中有一堆 JavaScript 文件，其中大部分用于使用 Google 地图。以前，我的 JS 文件位于 public/javascripts/*.js 中。我注意到它们没有被任何使用 javascript_include_tag 的页面加载，它编写了一个 JavaScript 标记，试图从 /assets/*.js 加载 JS 文件。（例如 /assets/application.js）。

我读到 Rails 3 期望 JS 文件位于 app/assets/javascripts/*.js 中。所以我将我的 JS 文件移到了那里，但它们仍然无法在 /assets/application.js 中访问，除非我先运行**bundle exec rake assets:precompile**。

我的 JS 开发周期不能是：

1.  对 JS 进行更改
2.  运行 bundle exec rake assets:precompile
3.  重新加载浏览器

那只是太长了。**我的问题是如何配置我的应用程序以使开发周期如下？**

1.  对 JS 进行更改
2.  重新加载浏览器

到目前为止，我已经尝试过：

*   在 config/application.rb 中启用读取“Bundler.require(:default, :assets, Rails.env)”的行
*   在 config/application.rb 中设置 config.assets.enabled = false（和 true）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:44:31.923

Rails 资产管道应与清单文件一起使用。这允许 Rails 在生产时连接所有的 javascript。为此，您应该有一个看起来像这样的 application.js 文件。

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

这里重要的部分是 require_tree 部分。这告诉 Rails 将所有其他 javascript 文件包含在同一文件夹中。这意味着您希望 application.js 的清单版本和所有自定义 javascript 文件都存在于 app/assets/javascripts 中。

从 Rails 2 过渡到资产管道的一个很好的指南可以在这个 RailsCast 中找到：[http: //railscasts.com/episodes/282-upgrading-to-rails-3-1](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T07:22:24.020

recently i have this issues

I change file config/environments/development.rb `config.assets.digest = false` then that working

# postgresql - 针对派生的 ts_vector 的 Postgres 文本搜索

> ID：13281152
> 
> 赞同：1
> 
> 时间：2012-11-08T01:31:45.127
> 
> 标签：postgresql, full-text-search

不知何故，我欺骗自己在数据库上编写全文搜索实现。我有一个表示数据库中所有实体的表，一个表示所有标签的表，以及一个表示标签与实体的多对多关系的表。

我编写了一个查询，它将给定实体的所有标签名称分组并将它们连接成一个字符串，然后我将其转换为一个 ts_vector。该查询如下所示：

```
SELECT e.id, to_tsvector(c.publicname || ' ' || string_agg(cv.name, ' '))
FROM categoryvalue cv, entitycategoryvalue ecv, entity e 
WHERE ccv.categoryvalueid = cv.id AND e.id = ecv.entityid
GROUP BY e.id; 
```

查询在此架构中返回结果：

```
id | to_tsvector
1  | tag_a, tag_b, tag_c
2  | tag_b, tag_d, tag_e 
```

这正是我想要匹配 ts_query 的内容。不过，我是 SQL 的菜鸟，我想知道是否有一种方法可以创建一个可以根据我编写的查询结果不断更新的表？

**编辑：**我在这篇博客文章[http://tech.pro/tutorial/1142/building-faceted-search-with-postgresql中记录了我的最终解决方案和系统](http://tech.pro/tutorial/1142/building-faceted-search-with-postgresql)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:55:04.027

我想你想要一个[`VIEW`](http://www.postgresql.org/docs/current/interactive/sql-createview.html).

```
CREATE VIEW my_tsearch_table AS
SELECT e.id, to_tsvector(c.publicname || ' ' || string_agg(cv.name, ' '))
FROM categoryvalue cv, entitycategoryvalue c=ecv, entity e 
WHERE ccv.categoryvalueid = cv.id AND e.id = ecv.celebrityid
GROUP BY e.id; 
```

但是请注意，您不能向视图添加索引。这可能是全文搜索的问题，因为`tsvector`为每次搜索生成所有这些 s 非常昂贵。

如果您需要索引该表，您正在寻找[物化视图](http://en.wikipedia.org/wiki/Materialized_view)。

PostgreSQL 不支持自动维护的物化视图；你不能只是`CREATE MATERIALIZED VIEW`然后向它添加一些索引。

您*可以*做的是使用普通表、使用查询创建的普通[视图](http://www.postgresql.org/docs/current/interactive/sql-createview.html)和一些触发器函数手动维护物化视图。

在对视图有贡献的每个表上添加一个触发器函数，并让该触发器函数根据对该表所做的更新来更新（或插入或删除，视情况而定）物化视图。但是，这在并发环境中可能会很复杂，并且很容易出现锁排序死锁。

触发器维护视图的替代方案是物化视图有点过时。定期创建一个新表，将您的普通视图复制到新表中，添加所需的索引，然后删除旧的物化视图表并重命名新表以替换它。

也可以看看：

*   [http://wiki.postgresql.org/wiki/Materialized_Views](http://wiki.postgresql.org/wiki/Materialized_Views)
*   [http://tech.jonathangardner.net/wiki/PostgreSQL/Materialized_Views](http://tech.jonathangardner.net/wiki/PostgreSQL/Materialized_Views)

# lazy-loading - 延迟加载 - 与 javascript 过滤结合使用时刷新/更新

> ID：13281153
> 
> 赞同：2
> 
> 时间：2012-11-08T01:31:45.410
> 
> 标签：lazy-loading, filtering, jquery-isotope

我现在正在尝试在我的网站上实现延迟加载。我已经成功地在具有静态库的页面上进行延迟加载。

该网站的主要产品组合有大量图像，可以使用 javascript 库 Isotope 进行过滤。

不使用过滤时延迟加载工作正常，但是，如果页面加载并且我不滚动，但使用过滤，则进入视图的项目不会解析。我发现偶尔的图像有效，但大多数都没有。对于如何解决这个问题，有任何的建议吗？

大概我需要能够做一些事情来重新触发延迟加载以刷新或重新检查自己？

这是我正在尝试工作的画廊，您可以在其中看到我遇到的问题：[http ://www.imageworkshop.com/lazyload-portfolio/](http://www.imageworkshop.com/lazyload-portfolio/)

有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:46:51.917

单击过滤后的项目调用此代码：`$(window).trigger('scroll');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:23:34.297

我从 acarabott 找到了这个答案 - [https://stackoverflow.com/a/13919010/735369](https://stackoverflow.com/a/13919010/735369) 我已经实现了这个并且它已经奏效了。唯一的问题是在滚动操作发生之前不会发生刷新。

* * *

如果要使用isotope的排序/过滤功能，需要设置lazyload的failure_limit，并通过isotope的onLayout回调触发事件。

```
jQuery(document).ready(function($) {
var $win = $(window),
    $con = $('#container'),
    $imgs = $("img.lazy");

  $con.isotope({
     onLayout: function() {
        $win.trigger("scroll");
     }
});

$imgs.lazyload({
    failure_limit: Math.max($imgs.length - 1, 0)
 }); 
```

解释

根据文档（[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)）

```
After scrolling page Lazy Load loops though unloaded images. In loop it checks if image has become visible. By default loop is stopped when first image below the fold (not visible) is found. This is based on following assumption. Order of images on page is same as order of images in HTML code. With some layouts assumption this might be wrong. 
```

使用同位素排序/过滤列表，页面顺序肯定与 HTML 不同，因此我们需要调整 failure_limit。

如您所见，我们存储了 jQuery 对象，以便我们可以使用它的 length-1 作为 failure_limit。如果你好奇它为什么是length-1，那是因为下面检查了lazyload的update方法。

```
 if (++counter > settings.failure_limit) {
    return false;
 } 
```

其他事件的延迟加载

如果您没有在滚动时触发延迟加载，则需要将“滚动”触发器交换为您正在使用的任何事件。演示

[http://jsfiddle.net/arthurc/ZnEhn/](http://jsfiddle.net/arthurc/ZnEhn/)

# assembly - 尝试启用保护模式时的引导循环

> ID：13281156
> 
> 赞同：2
> 
> 时间：2012-11-08T01:31:56.797
> 
> 标签：assembly, x86, nasm, bootloader, protected-mode

我正在编写一个基本的引导加载程序，直到我有某种环境，我可以在其中编写一个简单的 C 程序，将其写入硬盘（无文件系统）并运行它。这就是我想做的。

这是我到目前为止所做的。

阶段1：

1.  设置堆栈和段寄存器
2.  将视频模式更改为 640x480x8
3.  将下一个扇区读入内存
4.  远远跳到它

第 2 阶段：

1.  再次设置堆栈和段（我需要再次这样做吗？）
2.  设置 GDT（这部分让我很困惑 - TBH 我只是复制/粘贴）
3.  启用 A20 门
4.  进入保护模式

我之前已经成功进入保护模式，但由于某种原因现在我不能。当我尝试时，Bochs 进入引导循环，但据我所知，该代码与有效的旧代码相同。

我尝试注释掉启用 A20 和 GDT 的调用，但这并没有阻止引导循环。

[我在 PasteBin 上](http://pastebin.com/NQxAB0PN)有我的整个引导加载程序代码，但我也会在这里放一些东西：

* * *

设置堆栈：

```
CLI           ;Disable interrupts while setting up the stack
XOR AX,AX     ;Real mode flat memory model
MOV DS,AX
MOV ES,AX
MOV FS,AX
MOV GS,AX
MOV SS,AX
MOV SP,0xFFFF
STI           ;Enable interrupts 
```

启用 A20：

```
MOV AX,0x2401
INT 0x15
RET 
```

进入保护模式：

```
MOV EAX,CR0
OR  EAX,1
MOV CR0,EAX 
```

GDT代码有点啰嗦，不是我自己写的。但是，正如我所说，不加载 GDT 并不能阻止以后的引导循环。

顺便说一句...如果您对我的引导加载程序有任何一般性评论（这是我的第一个），请随时提及。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:43:39.823

“引导循环”可能意味着您的代码存在[三重错误](http://en.wikipedia.org/wiki/Triple_fault)。

既然您无论如何都在虚拟机中运行，我建议您尝试一下`qemu`，原因有两个。首先，维基百科的文章说：“在 QEMU 中，三重故障会在控制台中生成虚拟机转储，指令指针设置为触发第一个异常的指令。” 让模拟器将您指向失败的确切指令将使您的调试速度更快。

其次，如果这还不够，QEMU 支持附加`gdb`到虚拟 CPU，它允许您单步执行代码、打印寄存器内容以及所有常见的事情。请参阅该选项的`qemu`手册页。`-gdb`

# flash - 带有 2 个按钮的 flash 5.5 文档类文件

> ID：13281157
> 
> 赞同：2
> 
> 时间：2012-11-08T01:32:02.957
> 
> 标签：flash, button

我可能会错误地问这个问题并错误地寻找它。我正在尝试用 3 帧构建一个简单的 Flash 演示文稿，第一帧上有两个按钮。1 转到第 2 帧，第 2 帧转到第 3 帧。我知道如何在时间线上对其进行编码，并且可以让 1 个按钮在类文件（.as 文件）中工作。我无法在类文件中使用 2 个按钮。我希望代码尽可能简单。这就是我所拥有的。

包裹 {

```
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.display.SimpleButton;

public class Buttontest extends MovieClip
{

    public function Buttontest()
    {
        init();
    }
    private function init():void
    {
        ball.addEventListener(MouseEvent.CLICK, handleButtonClicks);
        //ball2.addEventListener(MouseEvent.CLICK, handleButtonClicks);

    }
    private function handleButtonClicks(event:MouseEvent):void
    {
        gotoAndPlay(2);
        //gotoAndPlay(3);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:26:29.760

我做了一个快速测试 - 在 Flash Pro 中的舞台上放置一个符号，称为实例球，并在 Document Class 中编写以下代码，它可以工作。

```
package {
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class ClickTest extends MovieClip {

        public function ClickTest() {
            this.gotoAndStop(1);
            this.ball1.addEventListener(MouseEvent.CLICK, ball1Callback);
            this.ball2.addEventListener(MouseEvent.CLICK, ball2Callback);
        }
        private function ball1Callback(e:Event):void {
            trace("ball 1 clicked");
            this.gotoAndStop(2);
        }
        private function ball2Callback(e:Event):void {
            trace("ball 2 clicked");
            this.gotoAndStop(3);
        }
    }
} 
```

确保您在舞台上的按钮上命名了实例。此外，您可能想要使用 this.goToAndStop() 函数，否则它将继续循环播放电影。

# javascript - 将元素动态添加到 SVG 后，该项目不可见

> ID：13281158
> 
> 赞同：1
> 
> 时间：2012-11-08T01:32:20.053
> 
> 标签：javascript, html, svg

我正在创建一个在 SVG 中绘制的自定义地图。我想向这张地图添加一个多边形，但是在添加了多边形之后它没有被绘制。如果我将整个页面粘贴到 .html 文件中并打开它，它会显示 (http://peterelzinga.eu/map/test.html)。

将多边形添加到我的 SVG 的代码：

```
var svg = file_get_contents("18/135160/86183.svg");
var parser = new DOMParser();
var data = parser.parseFromString(svg, "text/xml");
data = data.firstChild;
console.log(data);
data.setAttribute ("x", d);
data.setAttribute ("y", e);
document.getElementById('front').appendChild(data); 
```

添加多边形后的 SVG 元素：

```
<svg id="map" xmlns="http://www.w3.org/2000/svg" version="1.1" width="512" height="512">
    <g id="back">
        <image xlink:href="12/2110/1345.png" x="0" y="0" width="256" height="256"></image>
    </g>
    <g id="front">
        <g width="256" height="256" x="0" y="0">
            <polyline fill="#FFFFFF" stroke="#000000" stroke-miterlimit="10" points="256,85.333 209,100.667 230.334,158.334 143,194.334 160.667,248.667 221.667,223.667 256,241.334 " onclick="alert('St Jansdal')"></polyline>
        </g>
    </g>
</svg> 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T21:31:51.487

来自 Mozilla 文档：[https ://developer.mozilla.org/en-US/docs/Web/API/DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)

您应该将内容类型指定为“image/svg+xml”以获取 SVGDocument。

问题是您生成的节点不是 SVG 节点，而是 XML 节点。

我通过从 createElement 切换到 createElementNS 解决了类似的问题。查看答案：[jquery 的附加不能与 svg 元素一起使用？](https://stackoverflow.com/questions/3642035/jquerys-append-not-working-with-svg-element/3642265#comment25657339_3642265)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:01:27.537

为什么上述方法不起作用对我来说仍然是一个谜。但是，我确实设法通过使用以下解决方案解决了这个问题：

用于加载和添加一个新的 svg 元素（包含我们的折线）到主元素的 javascript 函数：

```
var api  = new XMLHttpRequest;
api.open("GET", a+"/"+b+"/"+c+".svg", false);

api.send("");

if( api.status == 200 ) {
    var parser = new DOMParser();
    var data = parser.parseFromString(api.responseText, "text/xml");
    data = data.firstChild;
    console.log(data);
    data.setAttribute("x", d);
    data.setAttribute("y", e);
    document.getElementById('front').appendChild(data);
} 
```

现在，我在文件中放置了一个完整的 svg 元素，而不是仅在 .svg 文件中包含折线元素：

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
    <polyline fill="#FFFFFF" points="0,97 45,81.333 51.667,100.667 13.667,117.333 31,164 142.167,119.5 127.167,75.001 
172.667,53.341 152.5,0 0,0 "/>
</svg> 
```

这确实有效。通过设置 I 的 X 和 Y 值，可以将 svg 定位在正确的位置，以便在正确的位置绘制多段线。

最终结果：

```
<svg id="map" xmlns="http://www.w3.org/2000/svg" version="1.1" width="512" height="512">
    <g id="back">
        <image xlink:href="18/135160/86183.png" x="0" y="0" width="256" height="256"></image>
        <image xlink:href="18/135161/86183.png" x="256" y="0" width="256" height="256"></image>
        <image xlink:href="18/135160/86184.png" x="0" y="256" width="256" height="256"></image>
        <image xlink:href="18/135161/86184.png" x="256" y="256" width="256" height="256"></image>
    </g>
<g id="front">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0" y="0" width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
            <polyline name="St. Jansdal" fill="#FFFFFF" points="256,84.75 209,100.75 230.75,157.5 142.5,194.25 160.75,248.5 221.75,223.75 256,241 "></polyline>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="256" y="0" width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
            <polyline name="St. Jansdal" fill="#FFFFFF" points="0,85.336 6.333,82.669 44,180.336 86,200.669 135.333,181.002 155.667,138.669 136.667,82.669   190,63.669 202,94.336 256,76.002 256,137.336 219.333,151.336 184.333,219.669 188.333,228.669 231.333,252.669 256,243.336   256,256 30,256 0,240.669 "></polyline>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="256" y="256" width="256px" height="256px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve">
            <polyline name="St. Jansdal" fill="#FFFFFF" points="31.25,0 78.5,24 82.75,29.75 82.75,34.75 81.5,40 74.5,52.5 0,80.75 0,134.25 64.25,110 87.25,120   120.75,207.5 133.5,212.25 133.5,206 139.25,199.75 150,197.75 154,198.75 162,202.25 165.25,191.5 122.5,76.25 129.5,61.75   135.25,55 138.75,53.25 141.5,53.25 144.5,53.75 235.25,93.75 239.5,103.75 256,97.75 256,0 "></polyline>
        </svg>
    </g>
</svg> 
```

# php - 为什么通过 Ajax 上传文件时，CodeIgniter 会抛出“没有文件上传”错误？

> ID：13281159
> 
> 赞同：0
> 
> 时间：2012-11-08T01:32:24.857
> 
> 标签：php, jquery, ajax, codeigniter, file-upload

我要做的就是使用 ajax 将文件上传到基于 CodeIgniter 的网站。但由于某种原因，CodeIgniter 不断给出“没有上传文件”错误。我该如何解决这个问题？

这是JavaScript：

```
<script type="text/javascript">
function updatebgimage()
    {   
        regexp = /^[^[\]]+/;
        var imgfile = document.getElementById("imagetoresize"); 
        var fileInputName = regexp.exec( imgfile['name'] ); 
        formdata = new FormData(); 
        formdata.append("imagetoresize",imgfile.files[0]);
        $.ajax({  
            url: "<?php echo site_url('uploadbgimage'); ?>",  
            type: "POST",  
            data: formdata,  
            dataType: "json",
            processData: false,  
            contentType: false,  
            success: function (data) {  
                    alert(data.message); 
            }  
        });  
    } 
</script> 
```

下面是调用的 CodeIgniter 控制器：

```
public function uploadbgimage()
{
    $config['upload_path'] = './images/stores/'.$memberid.'/'; 
    $config['file_name'] = 'main_bg_image.jpg'; 
    $config['allowed_types'] = 'jpg|png'; 
    $config['overwrite'] = true;       
    $this->load->library('upload', $config);  
    $data = array();
    if (! $this->upload->do_upload("bgimage"))
    {
        $data['result'] = 'fail';
    $data['message'] = $this->upload->display_errors();  
    } 
    else 
    {
         $data['result'] = 'success';
     $data['message'] = 'file was uploaded fine';  
    }
    echo json_encode($data);
} 
```

这是HTML：

```
<form method="post" enctype="multipart/form-data">
     <input type="file" id="imagetoresize" name="imagetoresize" value="" class="field1" /> 
     <input type="button" onclick="updatebgimage()" value="UploadBGImage" /> 
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:42:15.187

不应该是：

```
formdata.append("imagetoresize",imgfile.file); 
```

请参阅[https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)

# linux - 用于访问 Wifi 网络的优化 TCP 堆栈？

> ID：13281161
> 
> 赞同：0
> 
> 时间：2012-11-08T01:32:28.917
> 
> 标签：linux, networking, tcp

我目前在我的 linux 机器上运行 TCP CUBIC。我想知道对于通过弱 WiFi 链接访问网络的主机是否有可用于 Linux 的更优化的 TCP 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:18:09.923

有损网络的问题是发送方重新传输丢失的数据包需要一段时间。这就是任何努力都必须集中的地方。您可以调整 TCP 堆栈以更快地重新传输数据包，基本上是用带宽换取延迟。您甚至可以多次发送每个数据包而无需等待，并且与所有现有的 TCP 堆栈完全兼容。

几周前，有一篇文章介绍了一些公司正在研究这方面的问题，尽管它的目标是高速蜂窝网络，以在面临严重（如 5%）丢包时提供更强大（因此，更高吞吐量）的通信. 它*读起来*像是使用“奇偶校验”数据包之类的东西，如果其中一个数据包丢失，它允许接收器重建多个数据包中的任何一个，就像 RAID5 可以在发生故障时重建任何一个磁盘一样。当然，这需要连接两端的支持。

[http://www.extremetech.com/computing/138424-increasing-wireless-network-speed-by-1000-by-replacing-packets-with-algebra](http://www.extremetech.com/computing/138424-increasing-wireless-network-speed-by-1000-by-replacing-packets-with-algebra)

> 使用编码的 TCP，数据包块聚集在一起，然后转换为描述数据包的代数方程。如果部分消息丢失，接收方可以求解方程以导出丢失的数据。求解方程的过程是“简单且线性的”，这意味着它不需要代表路由器/智能手机/笔记本电脑进行太多处理。

# jsf-2 - JSF2 读取 GET 参数中的特殊字符

> ID：13281166
> 
> 赞同：0
> 
> 时间：2012-11-08T01:33:21.470
> 
> 标签：jsf-2, facelets

这是我的问题，有人可以帮我....！

目前，我正在将应用程序从 struts 迁移到 JSF2。我们有一个用户验证链接，在他们成功注册后发送到他们的电子邮件进行验证。例如：

```
http://testserv:5050/bjb/page/validateAccount.faces?Email=qwerty@testsession#1.com&Code=1272 
```

电子邮件地址在发送给用户的旧链接中包含特殊字符。在新应用程序中，我们使用 URLEncoder.encode 对它们进行编码。我认为，这与 UTF-8 无关，但是我将请求、响应和 JSF ExternalContext#setResponseCharacterEncoding 设置为 UTF-8。tomcat 也配置为 UTF-8。

## 验证帐户.xhtml

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
</h:head>
<h:body>
<h:form acceptcharset="UTF-8" name="verifyUserAccountForm" id="verifyUserAccountForm" prependId="false">
        <f:metadata>
            <f:event type="preRenderView" listener="#{verifyUserBean.execute}"></f:event>
        </f:metadata>
    </h:form>
</h:body>
</html> 
```

在java代码中，FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get(paramName); 无法正确读取 URL GET 请求参数。

我应该如何为现有链接解决这个问题。我的想法是，我可以在我的 xhtml 页面中编写一个 javascript 函数，它可以在加载时执行，因此使用 javascript 函数我可以对参数进行编码。但是如何在`<f:event type="preRenderView">`调用之前执行该javascript函数。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:28:43.790

传出 URL 中的查询字符串参数应编码如下，其中明确提及所需的字符集：

```
String emailParam = URLEncoder.encode(email, "UTF-8");
String url = "http://testserv:5050/bjb/page/validateAccount.faces?Email=" + emailParam + "&Code=1272"; 
```

Tomcat 服务器应该使用相同的字符集来解码传入的 URL：

```
<Context ... URIEncoding="UTF-8"> 
```

这就是您在编码/解码 GET URL 方面需要做的所有事情。HTML 元标记与此无关。HTTP 响应编码与此无关。HTML 表单接受字符集弊大于利。

请注意，您`<Context>`在正确的 Tomcat 配置文件中编辑元素。例如，如果您在 Eclipse 中管理 Tomcat，则默认情况下需要在 Eclipse 的*Servers*项目中编辑该项目，而不是在 Tomcat 的安装文件夹中。

### 也可以看看

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# javascript - 简单的 if/then 语句有问题

> ID：13281171
> 
> 赞同：0
> 
> 时间：2012-11-08T01:33:38.663
> 
> 标签：javascript, jquery

我是一名设计师，除了 HTML/CSS 之外，我并不擅长编写任何代码。我几乎不懂 Javascript，但我通常可以通过 Franken-copypasta 来获得成功的 jQuery 脚本，以获得简单的动画和基本功能。但在这种情况下，我在某个地方被绊倒了，我不知道在哪里。

该脚本仅用于在单击“#showNav”按钮时在 0 到 -250px 之间切换“#left-sidebar”元素的“left”属性。

```
$(document).ready(function(){
var navPos = $('#left-sidebar').position().left;
$('#showNav').click(function(){
    if(navPos = -250){
        $('#left-sidebar').animate({
            left: '0px'
        }, 500);
    } else {
        $('#left-sidebar').animate({
            left: '-250px'
        }, 500);
    }
});
}); 
```

我想我可以写一个 if/then 语句来检查元素是否已经在 -250，并相应地切换到相反的值。目前，单击该按钮会导致#left-sidebar 从-250 变为0，但是当我再次单击该按钮时，它不会按预期返回-250。我想这是一个非常简单的修复，但我什至不知道从哪里开始......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:39:28.920

移动`var navPos = $('#left-sidebar').position().left;`到您的点击处理程序内部，它将起作用。

现在，您只分配`navPos`一次。所以`navPos`总是会保持初始值，不管你多久点击一次。

所以你需要的是用户点击`#showNav`div时的位置。

这是完整的更新代码：

```
$(document).ready(function(){
  $('#showNav').click(function(){
    var navPos = $('#left-sidebar').position().left; 

    if(navPos == -250){
      $('#left-sidebar').animate({left: '0px'}, 500);
    } else {
      $('#left-sidebar').animate({left: '-250px'}, 500);
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:46:15.183

**[代码演示](http://jsbin.com/ujitas/1/edit)**

```
$(function(){ // a bit shorter DOM ready

    $('#showNav').click(function(){
        var navPos = $('#left-sidebar').position().left;       
        $('#left-sidebar').stop().animate({left: navPos===-250 ? 0 : -250}, 500);
    });

}); 
```

*   点击检索位置和

*   使用一个简单的*三元运算符*，它只是说：

```
is navPos === -250            ?
if YES (animate left to 0   ) :
if NO  (animate left to -250) ; 
```

# javascript - 包含 JavaScript 的 Joomla 文章的电子邮件隐藏替代方案

> ID：13281172
> 
> 赞同：0
> 
> 时间：2012-11-08T01:33:46.430
> 
> 标签：javascript, email, joomla, joomla2.5, joomla-article

我在 Joomla 2.5 中有一篇文章，其中包含 JavaScript。在 JS 中，我有一个包含电子邮件的文本字符串：

```
var my_email = "a@b.com" ; 
```

此字符串触发内置于 Joomla 中的电子邮件隐藏插件。当然，当我禁用插件时，就没有问题了。但我不想禁用它，因为网站的其他部分将从中受益。

还有其他解决方案吗？显然有一个 PHP 类提供了这个：

```
echo JHtml::_('email.cloak', 'demo@example.com'); 
```

来自[http://docs.joomla.org](http://docs.joomla.org/How_to_cloak_email_addresses)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:53:20.747

您可以使用此标签在一篇文章中禁用披风`{emailcloak=off}`

这只会影响您放置标签的文章——标签的位置无关紧要，它会在整篇文章中禁用它。（标签同时被剥离）。

当然，这意味着您在 Javascript 中拥有的地址将对机器人可见。

# r - 根据一个数据帧内其他值的总和计算一个值

> ID：13281177
> 
> 赞同：3
> 
> 时间：2012-11-08T01:34:40.330
> 
> 标签：r, dataframe

我正在尝试在 R 中解决这个问题，虽然我知道我现在已经在 Excel 中完成了，但我真的很想学习如何使用 R。

我的数据框如下所示：

```
 OBJECTID CDUID SENSI_FINA FREQUENCY SUM_LENGTH

        6  5915          1        51      19178

        7  5915          2        97      21536

        8  5915          3       201      35640

        9  5915          4       551     170549

       10  5915          5       308     145126

       11  5917          1       210      28104

       12  5917          2      1897     249379 
```

现在我想对`SUM_LENGTH`per求和`CDUID`，然后计算每总和`SUM_LENGTH`的百分比`SENSI_FINAL=5``SUM_LENGTH``CDUID`

所以简单地说，我想这样做：

> (145123/(19178+21536+35640+170549))*100

为`CDUID = 5915`，然后为下一个 5917 等。

到目前为止，我所做的是根据 CDUID 计算总和：

```
CDlenght <- aggregate(step1$SUM_LENGTH~step1$CDUID, data=step1, sum) 
```

但现在我被困住了...... :-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:43:28.170

我会使用`data.table`or`ddply`为此

```
library(plyr)

DT2 <- ddply(step1, .(CDUID), mutate, percent = 100* SUM_LENGTH / sum(SUM_LENGTH))

 subset(DT2, SENSI_FINA == 5)
##   OBJECTID CDUID SENSI_FINA FREQUENCY SUM_LENGTH percent
## 5       10  5915          5       308     145126 37.0192 
```

我认为`data.table`语法更优雅，内存效率更高

```
library(data.table)
DT <- data.table(step1)

DT[,percent :=  100* SUM_LENGTH / sum(SUM_LENGTH), by = CDUID][SENSI_FINA == 5] 
```

`:=`在内通过引用分配`DT`（因此该`percent`列现在将在`DT`

# php - 在逗号分隔列表中搜索字符串

> ID：13281179
> 
> 赞同：0
> 
> 时间：2012-11-08T01:35:29.720
> 
> 标签：php, mysql, regex, search, comma

我正在尝试搜索不包含任何搜索词的食谱表。每个配方的成分存储在一个字段中，以逗号分隔。

我试过使用 WHERE NOT MATCH...AGAINST 但这在我搜索豌豆时不起作用。它将返回带有豌豆蛋白的结果。我不需要那个。这也是多元化的问题。

我尝试使用 NOT REGEXP，但我对正则表达式不太熟悉，而且我过去两天所做的所有谷歌搜索都没有产生结果。

有什么方法可以在此表中的该字段中搜索多个值并将它们排除在结果中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:26:41.953

查看 MATCH... AGAINST... 的运算符

我认为您正在寻找的是：

```
WHERE MATCH(ingredients) AGAINST ("-pea*" in boolean mode) 
```

例子：

```
pea protein,radish
// not returned (as desired)

peas,beans
// not returned (as desired) 
```

但可能仍然存在问题：

```
peanut butter,bacon
// not returned (not as desired)

green pea soup,bacon
// returned (not as desired) 
```

我有点想“正确”地做这件事，你需要*每种成分*的元数据。

或者，您可以将过敏原“标签”应用于食谱——与成分本身分开。

例如，如果有人对“麸质”过敏，那实际上并不是配方级别的成分。它是许多配方成分的属性，但...

这种方法需要您编制所有已知过敏原的列表，然后将它们应用于食谱，不确定您的上下文，但过敏原标记可以作为一项民俗学任务。

# mvvm-light - RelayCommand 和 WeakReference

> ID：13281181
> 
> 赞同：3
> 
> 时间：2012-11-08T01:35:42.187
> 
> 标签：mvvm-light

我有以下内容：

```
public MainViewModel(IDataService dataService)
{
    _dataService = dataService;

    NotWorkingCommand = new RelayCommand(() => 
    dataService.GetData((item, error) =>
    {
        if (error != null)
        {
            // Report error here
            return;
        }
        WelcomeTitle = item.Title;
    }));
} 
```

有人可以解释一下为什么我`RelayCommand`会在一段时间后停止射击吗？我怀疑它与`WeakReference`used in the有关，`RelayCommand`但我没有使用`WeakReference`. 如果我`_dataService.GetData`改用它，它将起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:39:46.350

在您的 lambda 表达式中， dataService.GetData 指令将不起作用，因为变量 dataService 的范围仅限于构造函数。

相反，您应该将此引用复制到支持字段并改为调用此实例。如果当您说它通过使用 _dataService.GetData 工作时，您认为您已经接近解决方案。

```
private readonly IDataService _dataService;

public RelayCommand NotWorkingCommand { get; private set; }

public MainViewModel(IDataService dataService)
{
        _dataService = dataService;

        NotWorkingCommand = new RelayCommand(() =>
        _dataService.GetData((item, error) =>
        {
            if (error != null)
            {
                // Report error here
                return;
            }
            WelcomeTitle = item.Title;
        }));
    } 
```

似乎正确创建了委托，因为在创建中继命令时（在ctor的范围内）存在引用，但由于无法正确评估它，因此无法在运行时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-08T07:24:26.563

marckm 在这里没有错，使用类级变量的建议将起作用。但我想澄清一下，这个问题的完整答案应该包括一些关于 lambdas 中“变量捕获”的信息。

*在*MVVMLight 开始使用弱引用之前，方法级变量 dataService 将被 lambda 表达式捕获。通常，一旦方法完成，此变量将超出范围。由于 lambda 中的变量捕获，这不会在这里发生，这就是为什么 lambda 的主体将（总是）稍后工作的原因。

*在*MVVMLight 移至弱引用后，代码最初可以工作，但没有类级变量（和赋值），方法级变量最终将被垃圾收集，然后 RelayCommand 将停止工作。这正是您在这里看到的（六年前 - 我知道 - 但这个问题今天仍然有效）。

# php - PHP rand 和重复数字

> ID：13281184
> 
> 赞同：0
> 
> 时间：2012-11-08T01:35:52.860
> 
> 标签：php, random

我创建了这个 php 脚本来生成随机数，但是我的问题是，这些数字在很多情况下都会重复，并且没有得到不同的数字而没有重复

```
> <?php
> 
> $products=array("1","2","3","4","5","6","7","8","9","10");
> 
> for ($i=0;$i<count($products);$i++) {
> 
> $numbers_[$i]=rand(0,count($products));
> 
> if ($numbers_[$i]=="") { $numbers_[$i]="1"; } else { if
> ($numbers_[$i]>count($products)) { $numbers_[$i]=="10"; } else {
> 
> if ($numbers_[$i]==$numbers_[$i]) { $numbers_[$i]=="*"; }
> 
> 
> }
> 
> 
> }
> 
> 
> print "".$products[$numbers_[$i]]."<br>";
> 
> } ?> 
```

我总是需要得到5个不同的数字......

这是我的一个问题

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:42:17.853

如果您追求不同的数字，请继续生成随机数，直到获得 5 个不同的数字。

对于您生成的每个随机数，请检查您的数组以查看您是否已经拥有它。如果是这样，请不要再次将其添加到数组中并继续生成。

PHP`in_array()` [函数](http://php.net/manual/en/function.in-array.php)可以很容易地检查一个值是否已经在您的数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T01:49:04.657

你用 X 个可能的值查询 X 个随机数。他们应该碰撞。

代码很难理解，但我认为条件`if ($numbers_[$i]==$numbers_[$i])`总是正确的。你说你需要“5”个不同的数字，但代码中没有“5”，所以我可能仍然缺少一块......

如果您尝试随机化 $products 中元素的顺序，请尝试[shuffle()](http://php.net/manual/en/function.shuffle.php)

要获得 N 和 M (N<=M) 之间的数字，请随机使用`$data=array(); for($i=N;$i<=M;++$i) $data[]=$i; $result=shuffle($data);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T01:53:07.330

你需要“ [array_rand](http://www.php.net/manual/en/function.array-rand.php) ”。

```
$products = array("1","2","3","4","5","6","7","8","9","10");
$rand_keys = array_rand($products, 5); // Get 5 Only 
```

然后，您可以遍历返回的密钥并打印出产品编号或任何其他详细信息。

```
foreach ($rand_keys as $key) {
    echo $products[$key];
} 
```

# interface - Go 定义中使用接口的接口

> ID：13281191
> 
> 赞同：4
> 
> 时间：2012-11-08T01:36:26.443
> 
> 标签：interface, go

我正在制作一个斐波那契堆。（在我正在学习的算法类中多次提到它们，我想检查它们。）我希望堆使用任何类型的节点，所以我定义了一个 Node 接口：

```
package node

type Node interface {
    AddChild(other Node)
    Less(other Node) bool
}

type NodeList []Node

func (n NodeList) AddNode(a Node) {
    n = append(n, a)
} 
```

（我使用 []Node 数组，因为它与堆定义具有相同的效果。）如您所见，Node 接口使用 Node 类型的参数定义了它的两个函数。这应该意味着函数必须接受实现 Node 接口的参数。堆的其余部分使用这些节点。

在使用这个堆的程序中，我创建了一个实现 Node 接口的类型：

```
package main

import "container/list"
import node "./node"

type Element struct {
    Children *list.List
    Value int
}

func (e Element) AddChild(f Element) {
    e.Children.PushBack(f)
}

func (e Element) Less(f Element) bool {
    return e.Value < f.Value
}

func main() {
    a := Element{list.New(), 1}

    n := new(node.NodeList)
    n.AddNode(a)
} 
```

然而，这并没有奏效。编译器抱怨 Element 没有正确的接口函数定义。

```
cannot use a (type Element) as type node.Node in function argument:
Element does not implement node.Node (wrong type for AddChild method)
    have AddChild(Element)
    want AddChild(node.Node) 
```

这里有什么问题？显然 Element 没有正确实现接口，但我认为这是因为我如何定义接口。有没有正确的方法可以在 Go 中做我想做的事情？接口可以引用自己吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T01:45:10.970

功能

```
func (e Element) Less(f Element) bool 
```

与界面中的功能不匹配

```
func Less(other Node) bool 
```

您需要实际匹配签名，如

```
func (e Element) Less(f Node) bool 
```

是的，这意味着您可以通过 a`Node`不是`Element`. 您必须在运行时对此进行测试并惊慌失措。

* * *

作为一个为什么会这样的例子，考虑你的代码是否合法，我尝试了以下方法：

```
type Other int
func (o Other) Less(f Other) bool {
    return o < f
}
func (o Other) AddChild(f Other) {}
e = GetSomeElement() // of type Element
var o Other
var n Node = e
fmt.Println(n.Less(o)) 
```

因为我将 存储`Element`到 type 的 var 中`Node`，所以我现在可以`Less()`使用不是 another 的参数调用`Element`，这违反了 的类型`Element.Less()`。这就是为什么这是不合法的。

# perl - 从第一个键到最后一个键对哈希进行排序（Perl）

> ID：13281195
> 
> 赞同：4
> 
> 时间：2012-11-08T01:37:14.357
> 
> 标签：perl, sorting, hash

我有以下哈希，我希望按照我设置的顺序保留它；这甚至可能吗？如果没有，是否存在任何替代方案？

```
my %hash = ('Key1' => 'Value1', 'Key2' => 'Value2', 'Key3' => 'Value3'); 
```

我需要编写自定义排序子程序吗？我有哪些选择？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T01:41:12.497

[http://metacpan.org/pod/Tie::IxHash](http://metacpan.org/pod/Tie::IxHash)

```
use Tie::IxHash;
my %hash;
tie %hash,'Tie::IxHash'; 
```

此哈希将保持其顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T01:43:26.887

请参阅[Tie::Hash::Indexed](http://p3rl.org/Tie%3a%3aHash%3a%3aUndexed)。引用其概要：

```
use Tie::Hash::Indexed;

tie my %hash, 'Tie::Hash::Indexed';

%hash = ( I => 1, n => 2, d => 3, e => 4 );
$hash{x} = 5;

print keys %hash, "\n";    # prints 'Index'
print values %hash, "\n";  # prints '12345' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T01:40:01.620

尝试这样做：

```
print "$_=$hash{$_}\n" for sort keys %hash; 
```

如果您希望它按字母顺序排序。

如果您需要保留原始订单，请参阅其他帖子。

请参阅[http://perldoc.perl.org/functions/sort.html](http://perldoc.perl.org/functions/sort.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T01:57:22.480

一种可能性是像你有时对数组做的一样：指定键。

```
 for (0..$#a) {  # Sorted array keys
     say $a[$_];
 }

 for (sort keys %h) {  # Sorted hash keys
     say $h{$_};
 }

 for (0, 1, 3) {  # Sorted array keys
     say $h{$_};
 }

 for (qw( Key1 Key2 Key3 )) {  # Sorted hash keys
     say $h{$_};
 } 
```

您还可以按如下方式获取有序值：

```
 my @values = @h{qw( Key1 Key2 Key3 )}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T11:05:35.853

这取决于您将如何访问数据。如果您只想存储它们并访问最后一个/第一个值，您总是可以将哈希放在一个数组中并使用 push() 和 pop()。

```
#!/usr/bin/env perl

use strict;
use warnings;

use v5.10;

use Data::Dumper;

my @hashes;

foreach( 1..5 ){
    push @hashes, { "key $_" => "foo" };
}

say Dumper(\@hashes); 
```

# java - Android - 如何创建可点击的列表视图？

> ID：13281197
> 
> 赞同：14
> 
> 时间：2012-11-08T01:37:20.130
> 
> 标签：java, android, eclipse, listview, clickable

我想让列表视图中的所有列表项打开一个新页面，因此每个列表视图项都打开一个我可以使用的新黑页。我根本不知道如何实现这一点。我已经连续搜索了几个小时，但找不到我的解决方案的答案。如果有人可以展示和/或解释如何执行此操作而不是提供链接，将不胜感激，但两者都有帮助。

到目前为止，这是我的代码：

```
 <string-array name="sections">
    <item >Pro Constructive</item>
    <item >Con Constructive</item>
    <item >1st Speaker Cross</item>
    <item >Pro Rebbutal</item>
    <item >Con Rebuttal</item>
    <item >2nd Speaker Cross</item>
    <item >Pro Summary</item>
    <item >Con Summary</item>
    <item >Grand Cross</item>
    <item >Pro Final Focus</item>
    <item >Con Final Focus</item>
</string-array> 
```

这是在我的 string.xml

```
 <ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:entries="@array/sections" >
</ListView> 
```

这是在我的 activity_main.xml 中。

我该从哪里开始才能使列表中的每个项目都可以点击并打开一个新页面？

提前致谢！

编辑：

Logcat 不再相关。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-08T01:45:08.817

事实上，这很容易：

这是您使用 ListView 的 Activity，它实现了 OnItemClickListener：

```
public class MainActivity extends Activity implements OnItemClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        //* *EDIT* * 
        ListView listview = (ListView) findViewById(R.id.listView1);
        listview.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?> l, View v, int position, long id) {
        Log.i("HelloListView", "You clicked Item: " + id + " at position:" + position);
            // Then you start a new Activity via Intent
            Intent intent = new Intent();
            intent.setClass(this, ListItemDetail.class);
            intent.putExtra("position", position);
            // Or / And
            intent.putExtra("id", id);
            startActivity(intent);
    } 
```

**编辑**

上面的代码将放在您的 MainActivity.java 中。我将类的名称更改为，`MainActivity`并将 contentView 更改为`setContentView(R.layout.activity_main)`- 这些名称是 Eclipse 中新创建的 Android 项目的名称。
另请参阅 //* *Edit* * 下的 2 行新行 - 这些行将设置监听器以点击列表中的项目。

您的 activity_main.xml 应如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:entries="@array/sections" >
    </ListView>
</RelativeLayout> 
```

`res/values/` 文件夹中的**array.xml （不是 string.xml）看起来像这样**

```
<resources>
    <string-array name="sections">
        <item >Pro Constructive</item>
        <item >Con Constructive</item>
        <item >1st Speaker Cross</item>
        <item >Pro Rebbutal</item>
        <item >Con Rebuttal</item>
        <item >2nd Speaker Cross</item>
        <item >Pro Summary</item>
        <item >Con Summary</item>
        <item >Grand Cross</item>
        <item >Pro Final Focus</item>
        <item >Con Final Focus</item>
    </string-array>
</resources> 
```

注意：如果您复制并粘贴此代码，它应该可以工作。但是，由于您尚未创建项目，因此单击项目会出现错误`ListItemDetail.class`。

这是一个看起来如何的示例：

你的 ListItemDetail.java：

```
public class ListItemDetail extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_listitem);

    Intent intent = getIntent();
    int position = intent.getIntExtra("position", 0);

    // Here we turn your string.xml in an array
    String[] myKeys = getResources().getStringArray(R.array.sections);

    TextView myTextView = (TextView) findViewById(R.id.my_textview);
    myTextView.setText(myKeys[position]);

    }

} 
```

及其activity_listitem.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/my_textview"/>

</LinearLayout> 
```

如果您复制过去此代码，它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:52:05.803

您可以像这样从 string.xml 中的数组填充列表视图

```
String[] myKeys = getResources().getStringArray(R.array.sections);
ListView mListView = (ListView)findViewById(R.id.listView1);
mListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, myKeys)); 
```

并且单击列表视图项目是非常简单易行的方法。只需使用[setOnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)

```
mListView.setOnItemClickListener(new OnItemClickListener() 
{
    public void onItemClick(AdapterView<?> arg0,View arg1, int position, long arg3) 
    {

        Intent n = new Intent(getApplicationContext(), yourclass.class);
        n.putExtra("position", position);
        startActivity(n);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T01:44:23.427

您使用该`onListItemClick`函数来设置加载下一个活动并传递任何数据的 Intent。

```
public void onListItemClick(ListView parent, View view, int position, long id)
{
    Intent intent = new Intent(this, AnotherActivity.class);
    intent.putExtra("position", position);
    startActivity(intent);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-02T06:14:10.647

listView= (ListView) findViewById(R.id.listview);

*   项目清单

    ```
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            if(position==0){
                Intent i=new Intent(MainActivity.this,Main3Activity.class);
                startActivity(i);
            }
        }
    }); 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-09T10:19:09.440

1.  内部 fragment.java 和数组适配器

String[] menuItems = {"默认 C02", "默认 02"};

```
 ListView listView = (ListView) root.findViewById(R.id.main_menu);

    ArrayAdapter<String> listViewAdapter = new ArrayAdapter<String>(
        getActivity()
        ,android.R.layout.simple_list_item_1
        ,menuItems
    );

    listView.setAdapter(listViewAdapter);

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
        public void onItemClick(AdapterView<?> l, View v, int position, long id){
            Log.i("menuItems", "You clicked Item: " + id + " at position:" + position);

        }
    }); 
```

# c# - 使用 XtraGrid 实体框架创建主/详细网格

> ID：13281199
> 
> 赞同：2
> 
> 时间：2012-11-08T01:37:33.647
> 
> 标签：c#, entity-framework, grid, devexpress, master-detail

我是 C#、Entity 和使用网格的初学者，所以虽然我认为我的要求有点笼统，但我有点迷茫。我的 SQL 数据库中有两个表：`PeriodicReports`和`PeriodicReportGroups`. 每个报告组可以有 1 个或多个定期报告，所以我设想的是一个网格，其中的行在左侧有一个 + 符号并且可以展开，显示每个组的相关定期报告。我知道这是可以做到的，因为我在 DevExpress 支持站点中看到了非常相似的示例，但是尽管我已经花时间尝试理解它们并将它们应用到我的案例中，但我仍然没有想出如何去做。这就是我的代码的样子。将实体框架与我的表一起使用后，自动创建了这个类：

```
public partial class ReportEntities : DbContext
{
    public ReportEntities()
        : base("name=ReportEntities")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<PeriodicReportGroup> PeriodicReportGroups { get; set; }
    public DbSet<PeriodicReport> PeriodicReports { get; set; }
} 
```

我自己创建了这个界面和类，以便只在我的网格中显示某些列：

```
 public interface IPeriodicReportGroup
{
    string Name { get; }
    string Description { get; }
    bool Active { get; set; }
}

public partial class PeriodicReportGroup : IPeriodicReportGroup
{
} 
```

另一方面，我的 XtraForm 带有 XtraGrid：

```
public partial class Form1 : XtraForm
{
    public Form1()
    {
        InitializeComponent();
        InitSkinGallery();
        InitGrid();
    }

    BindingList<IPeriodicReportGroup> gridDataList = new BindingList<IPeriodicReportGroup>();

    void InitGrid()
    {
        var database = new ReportEntities();

        var reportGroups = database.PeriodicReportGroups.ToList( );

        foreach (var group in reportGroups )
            gridDataList.Add( group );

        gridControl.DataSource = gridDataList;
    }
... 
```

到目前为止，我已成功地将数据库中的定期报告组放入网格中，这很好。但是我仍然不知道如何精确设置将为每个组扩展的详细信息网格，尽管我觉得它应该是相当标准的东西。有人可以提供一些指导吗？我不是要求其他人来做我的工作，只是可以为我指明正确方向的事情，因为现在我很迷茫。我也希望能够通过将数据输入空行来添加新组和新细节，这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:25:18.143

XtraGrid 支持三种方法：查看此[链接](http://documentation.devexpress.com/#WindowsForms/CustomDocument3473)以获取更多信息。基本上主细节是令人困惑的东西，但仔细阅读会帮助你。

# android - App Store 中所有应用的详细信息

> ID：13281200
> 
> 赞同：2
> 
> 时间：2012-11-08T01:37:35.837
> 
> 标签：android, iphone, mobile, app-store

有没有办法获取 App Store（Google Play/Apple App Store/Windows Store）中所有可用应用程序的详细信息？是否有任何 RSS Feed 或可用于此的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:21:15.540

简单的回答是NO，在AppStore、Google Play或Windows商店里都没有这样的获取应用信息的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:19:05.553

1.  [您可以使用此链接](http://itunes.apple.com/rss)获取 iPhone 应用程序的 RSS 提要。您可以根据需要生成 rss feed url。
2.  对于 Android，请参阅此[链接](http://androinica.com/2009/07/tips-follow-the-android-market-with-an-rss-reader-for-beginners/)
3.  对于 Windows，请参阅此[链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh452973.aspx)

# sql-server - 立即执行的 SELECT 语句，需要永远插入表变量

> ID：13281201
> 
> 赞同：1
> 
> 时间：2012-11-08T01:37:36.533
> 
> 标签：sql-server, insert, table-variable

我在下面有以下 SQL 代码。完成需要很长时间，但如果我只运行`SELECT DISTINCT ID, ParentID FROM Y WHERE ID IN (3,4)`，它会立即完成。

```
DECLARE @table TABLE
(
  ID int,
  ParentID int
)

INSERT INTO @table 
SELECT DISTINCT ID, ParentID FROM Y WHERE ID IN (3,4)

SELECT * FROM @table 
```

这是怎么回事，这毫无意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T06:07:45.343

尝试改用临时表。表变量仅针对一行进行了优化，并假设这就是它将得到的。

[在这里](http://www.sqlbadpractices.com/using-table-variable-for-large-table-vs-temporary-table/)阅读更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:45:45.853

尽管它是一个几乎可以立即执行的简单 SELECT，但如果您有一个大型数据集，IN 将花费更长的时间，因为它会在处理条件之前收集所有数据。在它的位置使用并存在，它很可能会运行得更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T03:37:53.590

这种行为可能有多种原因。如果没有执行计划，我们只能猜测原因，不能确定确切的原因。

1.  由于您`DISTINCT ID`在查询中使用，我假设这`ID`不是主键。您可以修改查询以`PK`在`WHERE`子句中使用吗？

2.  可能是Y表的数据太大，几百万的量级，由于缺少if indexing(on the table) & Exists(in the query)，查询时间会比较长。

3.  试试这个代码只是为了检查速度

    ```
    SELECT DISTINCT ID, ParentID
    FROM Y WHERE ID IN (3,4) 
    ```

# jquery - 为 jquery cookie 设置 json = true

> ID：13281209
> 
> 赞同：0
> 
> 时间：2012-11-08T01:38:51.077
> 
> 标签：jquery, cookies

我正在使用 [https://github.com/carhartl/jquery-cookie中的 jquery cookie 插件](https://github.com/carhartl/jquery-cookie)

当我尝试通过执行 var jq=jQuery jq.cookie.json = true 来设置 json = true;

我在 cookie.js 文件的第 55 行遇到语法错误

```
var decode = config.raw ? raw : decoded;
        var cookies = document.cookie.split('; ');
        for (var i = 0, l = cookies.length; i < l; i++) {
            var parts = cookies[i].split('=');
            if (decode(parts.shift()) === key) {
                var cookie = decode(parts.join('='));
                return config.json ? JSON.parse(cookie) : cookie; /line 55 
```

有人和我有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:49:13.830

当您将 cookie 值存储为 json 字符串时，该值必须设置为 true。如果传递的字符串不是有效的 json 格式，则 JSON.parse 失败。

# wso2 - StratosLive 云中的 WSO2 ESB 是否完全支持 API？

> ID：13281211
> 
> 赞同：1
> 
> 时间：2012-11-08T01:39:11.080
> 
> 标签：wso2, cloud, wso2esb, wso2stratos

我有一个使用 API 功能的小型 WSO2 ESB 4.5.1 本地测试应用程序。我在 WSO2 StratosLive 上也有一个开发者帐户，并注意到那里的 ESB 似乎已升级到 ESB 4.5.x/Carbon 4.0。我可以在 StratosLive 上成功部署我的 API 应用程序，而不会出现明显错误；但是，我看到我部署的 API 应用程序在一段时间后“消失”（即我稍后登录 StratosLive 并且不再部署 API 应用程序）。StratosLive 上的其他 ESB 代理很好。

任何人都知道这是 StratosLive 管理故障还是我在 StratosLive 上使用 API 来抢先一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:59:23.460

WSO2 StratosLive 尚未升级到 WSO2 ESB 4.5.X。它仍然由 WSO2 ESB 4.0.2 提供支持。但我们前段时间添加了 API 功能。我们还在使用 WSO2 Carbon 4.0.x 系列产品升级 StratosLive。这将在 2012 年底之前提供。

# php - 获取类中的所有元素

> ID：13281221
> 
> 赞同：1
> 
> 时间：2012-11-08T01:41:16.380
> 
> 标签：php, class, dom

我想使用 PHP DOM 来获取特定类中的所有元素。

我的 HTML

```
<tr>
  <td><ul class="up">
      <li><a href="/updown.html#ud1">Russia</a></li>
      <li><a href="/updown.html#ud2">Pakistan</a></li>
          <li><a href="/updown.html#ud3">Iran</a></li>
    </ul></td>
</tr>

<tr>

  <td valign="top"><ul class="down">
      <li><a href="/updown.html#ud4">Spain</a></li>
      <li><a href="/updown.html#ud5">France</a></li>
    </ul></td>
</tr> 
```

为什么这个 PHP 不起作用？

```
$elements = $xpath->query('//ul[@class="up"]'); 
$elements = $elements->getElementsByTagName('li'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:47:00.920

尝试 -

```
....

$xpath = new DOMXPath($dom);                     
$nodes = $xpath->query('//ul[@class="up"]'); 

foreach($nodes as $node) {                      

    foreach($node->getElementsByTagName('li') as $li) {

    ....  // li elements of ul with class="up"

    }
} 
```

* * *

所以使用下面的代码 -

```
<?php 
$str = '
<table>
<tr>
  <td><ul class="up">
      <li><a href="/updown.html#ud1">Russia</a></li>
      <li><a href="/updown.html#ud2">Pakistan</a></li>
      <li><a href="/updown.html#ud3">Iran</a></li>
    </ul></td>
</tr>

<tr>

  <td valign="top"><ul class="down">
      <li><a href="/updown.html#ud4">Spain</a></li>
      <li><a href="/updown.html#ud5">France</a></li>
    </ul></td>
</tr>
</table>';

$dom = new DOMDocument;

$dom->loadHTML($str);
$xpath = new DOMXPath($dom);                     
$nodes = $xpath->query('//ul[@class="up"]');   // get <ul>'s with class 'up'
foreach($nodes as $node) {                      // loops through each <ul>
    foreach($node->getElementsByTagName('li') as $li) {    // loops through the <li>'s

    echo $li->nodeValue . "<br/>\n";   // echo's the <li> elements

}}

?> 
```

输出是 -

```
Russia
Pakistan
Iran 
```

# java - Java中的模幂运算使用欧拉totient和中国剩余定理

> ID：13281222
> 
> 赞同：1
> 
> 时间：2012-11-08T01:41:17.953
> 
> 标签：java, rsa, primes, exponentiation, chinese-remainder-theorem

编辑 - 澄清

我正在尝试使用拉格朗日和中国余数定理在 Java 中实现模幂运算。

例如，如果 N 是 55，给定素数 5 和 11，phi 是 40，所以我知道有 40 个数字与低于 55 的 N 互质。我的导师说这样做的方法是“使用拉格朗日定理, 几个模 5 和 11 的乘法和 CRT 结合两个结果"

我的问题是如何计算这些数字？我需要他们将它们放入中国剩余定理中来完成计算，但我想不出一个聪明的方法来使用 phi(n) 循环遍历 N。N 将是一个非常大的数字，至少 1024 位。我可能在这里走错了路，我什至需要所有这些素数吗？

我确实怀疑答案将与扩展的 euclid 函数有关，我已经对其进行了编码，所以如果我需要使用它的结果，那很好。

我不明白[N 以下多少个数与 N 互质？](https://stackoverflow.com/questions/1019040/how-many-numbers-below-n-are-coprimes-to-n)所以这对我没有多大帮助，而且我看的数学论文很难理解，总和和乘积类型符号让我有点困惑。此外，一些答案使用平方根和日志，这不是 BigInteger 的真正选项（如果我错了，请纠正我）

谁能用简单的英语给我答案？？

可以给我看代码，这更像是一个学习练习，因为我要提交的答案使用蒙哥马利。（是的，我知道，奇怪的是我可以从数学公式中算出蒙哥马利，但这个拉格朗日加 CRT 让我完全困惑）

我已经做到了这一点，通过我找到的一个例子来工作。素数是七和五，所以 35 的 phi 是 24（我有一个工作的欧拉函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:00:52.587

有关已解决的示例，请参[见此答案](https://crypto.stackexchange.com/questions/5296/modular-exponentiation-using-eulers-totient-and-the-chinese-remainder-theorem/5300#comment8850_5300)。它准确地展示了如何通过对主要因子进行模运算并组合结果来执行模指数模复合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:31:21.977

要找到所有与 N 互质的数字，只需在 [1,N] 上迭代 euclid GCD() 算法。如果 GCD(a,N) == 1 则 a,N 互质

# django - 登录验证错误

> ID：13281227
> 
> 赞同：0
> 
> 时间：2012-11-08T01:41:59.670
> 
> 标签：django, login, django-forms, django-views, django-login

我是 Django 新手。

我的登录页面只需要“用户名”和“密码”，如果它们留空或填写不正确，我想**提出 ValidationError**。我创建了代码，但它只是引发了

> “/login/ 处的 KeyError”和“/login/ 处的 UnboundLocalError：分配前引用的局部变量 'context'”

如何修复我的代码？

视图.py

```
def LoginRequest(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = LoginForm(request.POST)
        if form.is_valid():
            username=form.cleaned_data['username']
            password = form.cleaned_data['password']
            uasite1= authenticate(username=username, password=password)
            if uasite1 is not None:
                login(request, uasite1)
                return HttpResponseRedirect('/profile/')
            else:
                return render_to_response('login.html', {'form': form}, context_instance=RequestContext(request))
        else:
            return render_to_response('login.html', context, context_instance=RequestContext(request))
    else:
        form = LoginForm()
        context ={ 'form' : form}
        return render_to_response('login.html',{'form': form}, context_instance=RequestContext(request)) 
```

表格.py

```
class LoginForm(forms.Form):
    username = forms.CharField(label = (u'User Name'))
    password = forms.CharField(label = (u'Password'),widget = forms.PasswordInput(render_value=False))

    def clean_username(self):
        data = self.cleaned_data['username']
        if not data:
            raise forms.ValidationError("Please Enter Username.")
        return data

    def clean_password(self):
        data = self.cleaned_data['password']
        if not data:
            raise forms.ValidationError("Please Enter Password.")
        return data

    def clean(self):
        username = self.cleaned_data['username']
        password = self.cleaned_data['password']
        try:
            User.objects.get(username=username, password=password)
        except User.DoesNotExist:
            raise forms.ValidationError("Email or Password is incorrect.")
        return self.cleaned_data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:45:16.510

您缺少模板...

```
from django import template

context_instance=template.RequestContext(request) 
```

而且..这里没有引用上下文....

```
return render_to_response('login.html', context, context_instance=RequestContext(request)) 
```

# jquery - 在表中显示新行的延迟效果

> ID：13281236
> 
> 赞同：0
> 
> 时间：2012-11-08T01:43:00.520
> 
> 标签：jquery, delay, rows

我制作了一个 jsfiddle 以使其更易于解释。（[http://jsfiddle.net/FPznm/](http://jsfiddle.net/FPznm/)）。我想要做的是，当您单击表格末尾的“Visa mer”按钮时，我希望隐藏的行延迟淡入。

它不能像现在这样工作，我不知道为什么。（请参阅 jsfiddle 上的 Javascript 窗口）。

问题是，如果我在效果消失`.delay()`之前添加一个，但它们仍然会显示。`.fadeIn()``fadeIn()`

```
 for (i = 0; i <= increaseBy; i++) {
        hidden.eq(i).delay(i * 20).fadeIn(500);
        hidden.eq(i).removeClass("hidden");
    } 
```

这是问题所在的代码。我想这`.eq()`就是让它不起作用的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:50:16.807

那是因为`removeClass`执行速度比`fadeIn`方法快，您可以在动画完成时删除该类。

```
hidden.eq(i).delay(i * 20).fadeIn(500, function(){
    hidden.eq(i).removeClass("hidden");
}); 
```

[http://jsfiddle.net/k28WT/](http://jsfiddle.net/k28WT/)

如果你想选择前 5 个元素，`hidden`你可以使用`:lt`选择器：

```
$(document).ready(function() {
    $("td.showMore").on('click', function() {
        $("tr.hidden:lt(5)").each(function(i){
            $(this).delay(i + 200).fadeIn(500, function(){
               $(this).removeClass('hidden')
            })
        })
    });
}); 
```

[http://jsfiddle.net/vex3R/](http://jsfiddle.net/vex3R/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:50:25.590

我创建了一个小提琴来解释我的答案：http: [//jsfiddle.net/3leven11/FPznm/5/](http://jsfiddle.net/3leven11/FPznm/5/)

您需要做的就是：

```
$(document).ready(function() {
    $("td.showMore").on('click', function() {
        var increaseBy = 5;
        $("tr.hidden").each(function(index, elem) {
            if (index <= increaseBy) {
                $(elem).delay(index * 20).fadeIn(500, function() {$(elem).removeClass('hidden');});
            }
        });
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T01:53:22.443

问题是动画是异步的，所以你要立即删除类

试试这个吧..注意表格行的动画效果不好

```
$("td.showMore").on('click', function() {
        var hidden = $("tr.hidden"),
            increaseBy = 5;
        for (i = 0; i <= increaseBy; i++) {
            hidden.eq(i).delay(i * 200).fadeIn(1000, function(){ 
                   $(this).removeClass("hidden");
            });

        }
    }); 
```

编辑：另请注意，您的延迟`20`为 20 毫秒，即 1/50 秒，人眼甚至无法记录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T01:54:20.287

您需要删除此行：`hidden.eq(i).removeClass("hidden");`

`fadeIn`是异步的：在内部它可能正在使用`setTimeout`or `setInterval`。您已指定在 500 毫秒后完成淡入，但在`hidden`之后立即删除该类（无需等待 500 毫秒过去）

如果您需要在完成后更改一个类或做其他`fadeIn`事情，您可以提供一个回调`fadeIn`，这将在动画完成后执行。有关更多详细信息，请参见：[http ://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

# python - 如何在shell中打印python函数返回值？

> ID：13281238
> 
> 赞同：-1
> 
> 时间：2012-11-08T01:43:26.173
> 
> 标签：python, shell

```
def hello():
    return "hello world" 
```

以上是我的python代码。在我输入的外壳中：

```
fooshell=$(python -c 'import hello; hello.hello()') 
```

但是当我这样做时

```
echo $fooshell 
```

我得到一个空行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:46:39.810

采用`print`

```
fooshell=$(python -c 'import hello; print(hello.hello())') 
```

如果您的`hello()`方法本身不打印到`stdout`.

# javascript - 捕获滚轮事件

> ID：13281244
> 
> 赞同：6
> 
> 时间：2012-11-08T01:43:57.743
> 
> 标签：javascript, mouseevent

当用户在页面不滚动/不可滚动的情况下滚动滚轮时，我想捕获一个事件。但是，标准的 JS 滚动事件仅在浏览器实际滚动时触发，并且不会触发样式为隐藏溢出的 DOM 元素。

谷歌地图的滚动缩放是我正在寻找的行为类型的一个例子。

有谁知道如何完成这样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T01:51:29.323

您可以很好地捕获鼠标滚轮事件：

```
$( '#yourElement' ).on( 'DOMMouseScroll mousewheel', function () {
    ...
}); 
```

**现场演示：http:** [//jsfiddle.net/chtNP/1/](http://jsfiddle.net/chtNP/1/)

（我使用 jQuery 来绑定事件处理程序，但不管你使用哪个 API，它都可以工作，当然。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T17:45:32.577

此时，Firefox 定义了 DOMMouseScroll 和 wheel 事件。Chrome、Opera 和 IE（*最新的，再次！*）定义了鼠标滚轮。

我是这样做的：

```
if(window.onwheel !== undefined) {
    window.addEventListener('wheel', onMouseWheel)
} else if(window.onmousewheel !== undefined) {
    window.addEventListener('mousewheel', onMouseWheel)
} else {
    // unsupported browser
} 
```

请注意，旧 IE 版本中的 addEventListener 支持需要一个 polyfill。或者，您可以使用旧的 window.mousewheel = function(){} 或任何方法。

如您所见，事件侦听器附加到窗口对象。您不能以跨浏览器的方式将其附加到元素上。您可以使用事件对象目标属性来查看它是在哪里触发的，并在此基础上进行过滤。

PS：另一个跨浏览器考虑：在 IE 中，在回调函数（“onMouseWheel”）中处理事件对象时，您必须在事件对象内部使用“wheelDelta”属性（并将其反转！）。其他浏览器将填充“deltaY”（或用于水平滚动的“deltaX”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T01:47:35.290

使用 jQuery，您可以使用[这个插件](http://brandonaaron.net/code/mousewheel/demos)，或者任何数量的类似插件来做同样的事情。

如果 jQuery 或类似的框架不是一个选项，它是可能的，但是当你想让它在多个浏览器中工作时，你要为一个痛苦的世界做好准备......

# java - 更新文本区域

> ID：13281246
> 
> 赞同：1
> 
> 时间：2012-11-08T01:44:05.813
> 
> 标签：java, for-loop, textbox, textarea, logic

我在更新或“重新绘制”文本区域时遇到问题。我希望在 for 循环的每个循环中更新文本区域。我尝试了一些方法，例如调用`paint();`and`repaint();`函数以及使用`text.append();`and `text.setText();`，但这似乎不起作用。我还设置了 for 循环，以便它应该在每次迭代时附加文本。这是我的代码，非常感谢任何帮助。

缺口。

```
package ********_****_rps;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class AutomatedRoshamboRPS extends javax.swing.JFrame {

    int num = 0;
    int compnum = 0;
    int earnings = 0;
    int wins = 0;
    int losses = 0;
    int ties = 0;
    int roshamboCount = 0;
    int gamesPlayed = 0;
    int i;
    int games = 0;
    String a = "", b;

    void updateStats() {

        String statsToString = stats.getText();
        if (num - compnum == 1 || num - compnum == -2) //won
        {
            wins++;
            gamesPlayed++;

        } else if (num - compnum == 0) //tied
        {
            ties++;
            gamesPlayed++;
        } else { //lost
            losses++;
            gamesPlayed++;
        }
        earnings = +(wins * 2) - (losses * 2) + (roshamboCount * 10) - (roshamboCount * 2);
        stats.setText("STATISTICS:"
                + "\nGames Played:" + gamesPlayed
                + "\nEarnings:" + earnings
                + "\nWins:" + wins
                + "\nTies:" + ties
                + "\nLosses:" + losses
                + "\nRoshambo:" + roshamboCount);

    }
    void game() {
        String userChoice;
        compnum = (int) Math.floor((Math.random() * 3) + 1);
        switch (num) {
            case 1:
                userChoice = "ROCK";
                break;
            case 2:
                userChoice = "PAPER";
                break;
            case 3:
                userChoice = "SCISSORS";
                break;
            default:
                userChoice = "ROCK";
        }
        if (num - compnum == 1 || num - compnum == -2) {
            text.append("\nYou won!");
            a += userChoice;
        } else if (num - compnum == 0) {
            text.append("\nYou tied!");
        } else {
            text.append("\nYou lost!");
            a = "";
        }

        if (a.equals("ROCKROCKROCK") || a.equals("PAPERPAPERPAPER") || a.equals("SCISSORSSCISSORSSCISSORS")) {
            roshamboCount++;
            a = "";
            if (text.getLineCount() > 10000) {
                text.setText("");
            }
        }
    }

    public AutomatedRoshamboRPS() {
        initComponents();

        text.setText("ROCK PAPER SICSSORS"
                + " \nSelect your throw by clicking on one \nof the options to the left.\n"
                + "---------------------------------------------------");

        rock.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                b = numGames.getText();
                games = Integer.parseInt(b);

                for (int l = 0; l < games; l++) {
                    num = 1;
                    game();
                    updateStats();
                }
            }
        });
        paper.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                b = numGames.getText();
                games = Integer.parseInt(b);

                for (int l = 0; l < games; l++) {
                    num = 2;
                    game();
                    updateStats();
                }
            }
        });
        scissors.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                b = numGames.getText();
                games = Integer.parseInt(b);

                for (int l = 0; l < games; l++) {
                    num = 3;
                    game();
                    updateStats();
                }
            }
        });
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        buttonGroup2 = new javax.swing.ButtonGroup();
        jLabel1 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        text = new javax.swing.JTextArea();
        jScrollPane2 = new javax.swing.JScrollPane();
        stats = new javax.swing.JTextArea();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        numGames = new javax.swing.JTextField();
        rock = new javax.swing.JToggleButton();
        paper = new javax.swing.JToggleButton();
        scissors = new javax.swing.JToggleButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setResizable(false);

        jLabel1.setFont(new java.awt.Font("Arial", 0, 24)); // NOI18N
        jLabel1.setText("Automated Roshambo");

        text.setColumns(20);
        text.setEditable(false);
        text.setFont(new java.awt.Font("Arial", 0, 13)); // NOI18N
        text.setLineWrap(true);
        text.setRows(5);
        jScrollPane1.setViewportView(text);

        stats.setColumns(20);
        stats.setEditable(false);
        stats.setRows(5);
        jScrollPane2.setViewportView(stats);

        jLabel5.setText("Number of games");

        jLabel6.setText("to simulate:");

        rock.setIcon(new javax.swing.ImageIcon(getClass().getResource("/haughton_nick_rps/Rock.png"))); // NOI18N
        rock.setContentAreaFilled(false);

        paper.setIcon(new javax.swing.ImageIcon(getClass().getResource("/haughton_nick_rps/Paper.png"))); // NOI18N
        paper.setContentAreaFilled(false);

        scissors.setIcon(new javax.swing.ImageIcon(getClass().getResource("/haughton_nick_rps/Scissors.png"))); // NOI18N
        scissors.setContentAreaFilled(false);

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .add(jLabel1)
                .add(80, 80, 80))
            .add(layout.createSequentialGroup()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                    .add(layout.createSequentialGroup()
                        .addContainerGap()
                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 375, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(org.jdesktop.layout.GroupLayout.LEADING, layout.createSequentialGroup()
                        .add(36, 36, 36)
                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                            .add(layout.createSequentialGroup()
                                .add(6, 6, 6)
                                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                                    .add(rock, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .add(scissors, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .add(paper))
                                .add(35, 35, 35)
                                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                                    .add(jLabel3)
                                    .add(jLabel2)
                                    .add(jLabel4)))
                            .add(jLabel5)
                            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
                                .add(org.jdesktop.layout.GroupLayout.LEADING, numGames)
                                .add(org.jdesktop.layout.GroupLayout.LEADING, jLabel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                        .add(18, 18, 18)
                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 244, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(32, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(18, 18, 18)
                .add(jLabel1)
                .add(18, 18, 18)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(jScrollPane1)
                    .add(layout.createSequentialGroup()
                        .add(jLabel5)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(jLabel6)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(numGames, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                            .add(layout.createSequentialGroup()
                                .add(0, 0, Short.MAX_VALUE)
                                .add(jLabel2)
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                .add(jLabel3)
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                .add(jLabel4)
                                .add(208, 208, 208))
                            .add(layout.createSequentialGroup()
                                .add(rock, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 57, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                                .add(paper, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 60, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                                .add(scissors, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 61, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                .add(0, 0, Short.MAX_VALUE)))))
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 125, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    public static void main(String args[]) {

        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new AutomatedRoshamboRPS().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.ButtonGroup buttonGroup2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextField numGames;
    private javax.swing.JToggleButton paper;
    private javax.swing.JToggleButton rock;
    private javax.swing.JToggleButton scissors;
    private javax.swing.JTextArea stats;
    private javax.swing.JTextArea text;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:49:52.120

*“在 for 循环的每个循环中更新”* - 有问题。

据我所知，您的程序只是在 EDT 的内容中进行所有更新，从而违反了事件调度线程。这会阻止 UI 开始更新。

您可能希望通读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息。

**更新**

因此，我查看了您的代码并对其进行了修改（尽我所能）以使用 a`SwingWoker`代替。我玩了2000场比赛没有问题。

```
public class TestRockPaperScissors {

    public static void main(String[] args) {
        new TestRockPaperScissors();
    }

    public TestRockPaperScissors() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                AutomatedRoshamboRPS frame = new AutomatedRoshamboRPS();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class AutomatedRoshamboRPS extends javax.swing.JFrame {

        int num = 0;
        int compnum = 0;
        int earnings = 0;
        int wins = 0;
        int losses = 0;
        int ties = 0;
        int roshamboCount = 0;
        int gamesPlayed = 0;
        int i;
        int games = 0;
        String a = "", b;

        public void updateStats(int state, int roshamboCount, String result) {

            text.append(result + "\n");

            String statsToString = stats.getText();
            if (state == 0) //won
            {
                wins++;
                gamesPlayed++;

            } else if (state == 1) //tied
            {
                ties++;
                gamesPlayed++;
            } else { //lost
                losses++;
                gamesPlayed++;
            }
            earnings = +(wins * 2) - (losses * 2) + (roshamboCount * 10) - (roshamboCount * 2);
            stats.setText("STATISTICS:"
                    + "\nGames Played:" + gamesPlayed
                    + "\nEarnings:" + earnings
                    + "\nWins:" + wins
                    + "\nTies:" + ties
                    + "\nLosses:" + losses
                    + "\nRoshambo:" + roshamboCount);

        }

        public void setGameState(boolean enabled) {

            numGames.setEnabled(enabled);
            rock.setEnabled(enabled);
            paper.setEnabled(enabled);
            scissors.setEnabled(enabled);

        }

        public AutomatedRoshamboRPS() {
            initComponents();

            text.setText("ROCK PAPER SICSSORS"
                    + " \nSelect your throw by clicking on one \nof the options to the left.\n"
                    + "---------------------------------------------------\n");

            rock.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    b = numGames.getText();
                    games = Integer.parseInt(b);

                    setGameState(false);

                    new GameWorker(AutomatedRoshamboRPS.this, games, 1).execute();

//                    for (int l = 0; l < games; l++) {
//                        num = 1;
//                        game();
//                        updateStats();
//                    }
                }
            });
            paper.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    b = numGames.getText();
                    games = Integer.parseInt(b);

                    setGameState(false);

                    new GameWorker(AutomatedRoshamboRPS.this, games, 2).execute();

//                    for (int l = 0; l < games; l++) {
//                        num = 2;
//                        game();
//                        updateStats();
//                    }
                }
            });
            scissors.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    b = numGames.getText();
                    games = Integer.parseInt(b);

                    setGameState(false);

                    new GameWorker(AutomatedRoshamboRPS.this, games, 3).execute();

//                    for (int l = 0; l < games; l++) {
//                        num = 3;
//                        game();
//                        updateStats();
//                    }
                }
            });
        }

        @SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
        private void initComponents() {

            buttonGroup1 = new javax.swing.ButtonGroup();
            buttonGroup2 = new javax.swing.ButtonGroup();
            jLabel1 = new javax.swing.JLabel();
            jScrollPane1 = new javax.swing.JScrollPane();
            text = new javax.swing.JTextArea();
            jScrollPane2 = new javax.swing.JScrollPane();
            stats = new javax.swing.JTextArea();
            jLabel2 = new javax.swing.JLabel();
            jLabel3 = new javax.swing.JLabel();
            jLabel4 = new javax.swing.JLabel();
            jLabel5 = new javax.swing.JLabel();
            jLabel6 = new javax.swing.JLabel();
            numGames = new javax.swing.JTextField();
            rock = new javax.swing.JToggleButton();
            paper = new javax.swing.JToggleButton();
            scissors = new javax.swing.JToggleButton();

            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
            setResizable(false);

            jLabel1.setFont(new java.awt.Font("Arial", 0, 24)); // NOI18N
            jLabel1.setText("Automated Roshambo");

            text.setColumns(20);
            text.setEditable(false);
            text.setFont(new java.awt.Font("Arial", 0, 13)); // NOI18N
            text.setLineWrap(true);
            text.setRows(5);
            jScrollPane1.setViewportView(text);

            stats.setColumns(20);
            stats.setEditable(false);
            stats.setRows(5);
            jScrollPane2.setViewportView(stats);

            jLabel5.setText("Number of games");

            jLabel6.setText("to simulate:");

//            rock.setIcon(new javax.swing.ImageIcon(getClass().getResource("/haughton_nick_rps/Rock.png"))); // NOI18N
            rock.setText("Rock");
            rock.setContentAreaFilled(false);

//            paper.setIcon(new javax.swing.ImageIcon(getClass().getResource("/haughton_nick_rps/Paper.png"))); // NOI18N
            paper.setText("Paper");
            paper.setContentAreaFilled(false);

//            scissors.setIcon(new javax.swing.ImageIcon(getClass().getResource("/haughton_nick_rps/Scissors.png"))); // NOI18N
            scissors.setText("Scissors");
            scissors.setContentAreaFilled(false);

            org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
            getContentPane().setLayout(layout);
            layout.setHorizontalGroup(
                    layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                    .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(jLabel1)
                    .add(80, 80, 80))
                    .add(layout.createSequentialGroup()
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                    .add(layout.createSequentialGroup()
                    .addContainerGap()
                    .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 375, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(org.jdesktop.layout.GroupLayout.LEADING, layout.createSequentialGroup()
                    .add(36, 36, 36)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                    .add(6, 6, 6)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                    .add(rock, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(scissors, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(paper))
                    .add(35, 35, 35)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(jLabel3)
                    .add(jLabel2)
                    .add(jLabel4)))
                    .add(jLabel5)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
                    .add(org.jdesktop.layout.GroupLayout.LEADING, numGames)
                    .add(org.jdesktop.layout.GroupLayout.LEADING, jLabel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .add(18, 18, 18)
                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 244, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                    .addContainerGap(32, Short.MAX_VALUE)));
            layout.setVerticalGroup(
                    layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                    .add(18, 18, 18)
                    .add(jLabel1)
                    .add(18, 18, 18)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(jScrollPane1)
                    .add(layout.createSequentialGroup()
                    .add(jLabel5)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                    .add(jLabel6)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                    .add(numGames, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                    .add(0, 0, Short.MAX_VALUE)
                    .add(jLabel2)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                    .add(jLabel3)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                    .add(jLabel4)
                    .add(208, 208, 208))
                    .add(layout.createSequentialGroup()
                    .add(rock, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 57, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(paper, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 60, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(scissors, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 61, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 0, Short.MAX_VALUE)))))
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 125, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap()));

            pack();
        }// </editor-fold>
// Variables declaration - do not modify
        private javax.swing.ButtonGroup buttonGroup1;
        private javax.swing.ButtonGroup buttonGroup2;
        private javax.swing.JLabel jLabel1;
        private javax.swing.JLabel jLabel2;
        private javax.swing.JLabel jLabel3;
        private javax.swing.JLabel jLabel4;
        private javax.swing.JLabel jLabel5;
        private javax.swing.JLabel jLabel6;
        private javax.swing.JScrollPane jScrollPane1;
        private javax.swing.JScrollPane jScrollPane2;
        private javax.swing.JTextField numGames;
        private javax.swing.JToggleButton paper;
        private javax.swing.JToggleButton rock;
        private javax.swing.JToggleButton scissors;
        private javax.swing.JTextArea stats;
        private javax.swing.JTextArea text;
// End of variables declaration
    }

    public class GameWorker extends SwingWorker<Object, GameResults> {

        private int games;
        private int userChoice;
        private int roshamboCount;
        private AutomatedRoshamboRPS parent;

        public GameWorker(AutomatedRoshamboRPS parent, int games, int userChoice) {
            this.games = games;
            this.userChoice = userChoice;
            this.parent = parent;
        }

        protected String toString(int choice) {
            String value = "ROCK";
            switch (choice) {
                case 1:
                    value = "ROCK";
                    break;
                case 2:
                    value = "PAPER";
                    break;
                case 3:
                    value = "SCISSORS";
                    break;
            }

            return value;
        }

        @Override
        protected void done() {
            parent.setGameState(true);
        }

        @Override
        protected void process(List<GameResults> chunks) {

            for (GameResults results : chunks) {
                parent.updateStats(results.state, results.getRoshamboCount(), results.getText());
            }

        }

        @Override
        protected Object doInBackground() throws Exception {

            for (int index = 0; index < games; index++) {
                String text = null;
                int compnum = (int) Math.floor((Math.random() * 3) + 1);
                int state = 2;
                if (userChoice - compnum == 1 || userChoice - compnum == -2) {
                    text = "You won!  " + toString(userChoice) + " beats " + toString(compnum);
                    state = 0;
                    roshamboCount++;
                } else if (userChoice - compnum == 0) {
                    text = "You tied!  " + toString(userChoice) + " ties with " + toString(compnum);
                    state = 1;
                } else {
                    text = "You lost!  " + toString(userChoice) + " losses to " + toString(compnum);
                    state = 2;
                }

                publish(new GameResults(state, roshamboCount, text));

            }

            return null;

        }
    }

    public class GameResults {

        private String text;
        private int state;
        private int roshamboCount;

        public GameResults(int state, int roshamboCount, String text) {
            this.text = text;
            this.state = state;
            this.roshamboCount = roshamboCount;
        }

        public int getRoshamboCount() {
            return roshamboCount;
        }

        public int getState() {
            return state;
        }

        public String getText() {
            return text;
        }

    }
} 
```

# c# - 在 asp.net 中的下拉列表的 selectedindex 更改事件上重新加载 .js 文件

> ID：13281248
> 
> 赞同：-1
> 
> 时间：2012-11-08T01:44:29.257
> 
> 标签：c#, javascript, asp.net

我在更新面板中有一个下拉菜单。在选定的索引更改事件中，我需要使用 c# 或 javascript 执行 .js 文件我该怎么做？

```
<asp:UpdatePanel ID="UP_Social_Ddl" runat="server">
  <ContentTemplate>
     <div class="styled-select">
      <asp:Label runat="server" 
         ID="Label2" 
         Font-Size="Small" 
         ToolTip="Social : 'ON' will post your activity on this page to your FaceBook Wall."   Text="Social :" 
         Style="vertical-align: bottom;" />
          <asp:DropDownList 
             ID="ddlSocialSwitch" 
             runat="server" 
             AutoPostBack="true" 
             Style="vertical-align: middle;" 
              ToolTip="Social : ON will post your activity on this page to your FaceBook Wall."   
              OnSelectedIndexChanged="ddlSocialSwitch_SelectedIndexChanged">
          </asp:DropDownList>
       &nbsp;<a valign="bottom" onclick="logout_fb" href="#" id="auth-logoutlink"><img valign="bottom" src="facebookLogOutButton.png"/></a>
       <asp:Label ID="lbl" Visible="false" runat="server"></asp:Label>
      </div>
  </ContentTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:10:05.557

I'll assume you mean "function" and not "file". Assuming that, I see that you have a click handler on the auth-logoutlink. update panels will "destroy" the event handler because of how it recreates the DOM when the data is returned. You have to reattach the onclick event to that link.

# javascript - 输入具有唯一 ID 的动态表单

> ID：13281250
> 
> 赞同：0
> 
> 时间：2012-11-08T01:44:36.260
> 
> 标签：javascript, html, forms

我想动态创建表单输入。而我将其设为静态如下。

html

```
<input type="text" id="try1" /><br/>
<input type="text" id="try2" style="display: none"/><br/>
<input type="text" id="try3" style="display: none"/> 
```

javascript

```
$("#try1").live("input", function(){
    a = $(this).val();
    if (a.length >= 3){
        $("#try2").show();
    }
    else if (a.length <=3){
        $("#try2").hide();
    }

});

$("#try2").live("input", function(){
    a = $(this).val();
    if (a.length >= 3){
        $("#try3").show();
    }
    else if (a.length <=3){
        $("#try3").hide();
    }

}); 
```

如何输入动态表单，当填充超过 3 个字符时，新的输入表单将出现在下方。请帮帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:30:58.310

试试这个代码

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>

 var counter=2;
$(document).ready(function() {

    $("input").live('keyup', function(){
        var currentID = $(this).attr('id');
        a = $('#'+currentID).val();

        if (a.length >= 3){
            $('<input/>').attr({ type: 'text', id: 'try'+counter, name: 'try'+counter }).appendTo('#appenddiv');
            counter++;

        }
        else if (a.length <=3){
            $('#try'+currentID).remove();

        }
    });

});

</script>
<input type="text" id="try1" /><br/>
<div id= "appenddiv">

</div> 
```

# c - 解析堆栈和寄存器（EBP、EIP、ESP）并找出与每一帧相关的函数

> ID：13281254
> 
> 赞同：2
> 
> 时间：2012-11-08T01:44:50.783
> 
> 标签：c, pointers, assembly, stack, cpu-registers

因此，假设我可以访问程序的寄存器。我可以访问 esp、ebp 和 eip。eip 指向下一条需要执行的指令， ebp 指向另一个帧指针， esp 指向栈顶。我理解这一点，但是我不理解堆栈的其余部分或如何解析它。

例如，如果我想获得一个框架的局部变量，我应该只减去`ebp - esp`（知道这`ebp`是一个比 更大的地址`esp`）然后遍历这些地址并取消引用它们吗？这是从该特定框架获取局部变量的正确方法吗？

另一个问题，找出与每一帧相关的功能的最佳方法是什么？如果我将地址减 1 `ebp`，然后取消引用该值，我应该得到返回地址“0x804 ...”吗？这个地址和函数有什么关系？例如，如果 Foo() 的高 pc 地址`0x8045555`和低 pc 地址`0x8045550`，我将要获得的返回地址会在这些地址之间吗？

非常感谢，如果我不够清楚，请告诉我..

注意：如果有人有更好的标题建议，我没有找到更好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:00:47.670

这方面的细节取决于您的 CPU 指令集架构（您显然使用的是 32 位 x86）和您的编译器工具链（我猜不出来）。通常，您不想自己重新编写代码来遍历堆栈帧，因为它复杂而脆弱，并且取决于您的编译器的优化和调试设置。

如果您正在尝试调试程序，您应该首先让您平台的调试器尝试整理您的堆栈。例如，使用`gdb`，您可以运行`bt`以获取“回溯”。

如果您尝试从相关程序内部执行此操作，并且您使用的是 GNU C 库，那么您可以使用该[`backtrace(3)`](http://www.linuxjournal.com/article/6391)函数。

如果您只是想了解事情的真正运作方式，这里有一篇有用的博客文章：[http ://eli.thegreenplace.net/2011/02/04/where-the-top-of-the-stack-is-on-x86 /](http://eli.thegreenplace.net/2011/02/04/where-the-top-of-the-stack-is-on-x86/)

要更深入地了解，请尝试 Wikipedia 的[x86 Calling Conventions](http://en.wikipedia.org/wiki/X86_calling_conventions)文章。再深入一点，如果您使用的是基于 ELF 的架构，例如 Linux，请参阅[ELF ABI 规范](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format#Specifications)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:16:56.920

寄存器和堆栈中的数据只是一系列字节。数据由将字节放入系列中的各种指令和应用程序结构化，但是有关字节结构的信息不是字节系列的一部分，而是可能或可能不可用的附加信息。

例如，当编译源代码并由编译器生成二进制代码时，二进制代码中将包含额外的描述信息。附加描述信息的数量将取决于选择的编译器选项以及所用工具链中各种其他工具的功能。

例如，如果选项是使用附加信息（如函数名称）创建调试版本，并且工具链支持使用附加信息显示二进制代码，那么您可以很好地查看变量、函数名称和步进通过源代码级别的代码。

另一方面，如果选项是在没有附加信息的情况下创建优化的构建，那么即使工具链可能支持使用附加信息显示二进制代码，以便以更易读的视图呈现二进制代码，因为信息是不在那里，工具链无法在源代码级别显示二进制代码，显示源代码行、变量、函数名称等。

因此，为了完成您想要做的事情，您需要拥有附加信息，以便您可以将二进制代码与附加信息结合起来。如果没有额外的信息，你所拥有的只是内存中的一堆字节。您可以以各种方式显示这些字节，例如将它们解释为汇编代码或将它们解释为文本字符串。然而，如果没有额外的信息，你只是在猜测，无论你有多么受过教育。

不同平台和操作系统上的不同编译器和工具链会生成不同类型的附加信息。因此，您将需要了解您的工具链提供的特定信息。

# javascript - 从 live() 触发时，jQuery submit() 不会触发

> ID：13281260
> 
> 赞同：0
> 
> 时间：2012-11-08T01:45:25.603
> 
> 标签：javascript, jquery

我试图`#url_form`在将 URL 粘贴到`#video_url`. 该类`.loading`已正确添加，但仍未提交表单。这是代码：

```
 $(document).ready(function(){
  $("#url_form").live("paste", "#video_url", function(){
    $("#video_url").addClass("loading");
    $("#url_form").submit();
  });
}); 
```

和 HTML：

```
<form accept-charset="UTF-8" action="/posts/get_video" data-remote="true" id="url_form" method="post">
   <input autofocus="autofocus" class="post-modal-url loading" id="video_url" name="video_url" placeholder="Paste a URL here" required="required" type="url">
</form> 
```

Rails form_tag：

```
 <%= form_tag get_video_posts_path, :remote => true, :id => "url_form"  do -%>
    <%= url_field_tag 'video_url', params[:video_url], :placeholder => "Paste a URL here", :required => true, :autofocus => true, :class => "post-modal-url" -%>
  <% end -%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:46:30.967

改变

```
 $("url_form").submit(); 
```

至

```
$("#url_form").submit(); 
```

# android - 您可以从 ActionBar 的下拉导航中启动 Activity Intent

> ID：13281262
> 
> 赞同：1
> 
> 时间：2012-11-08T01:45:53.700
> 
> 标签：android, android-intent, android-actionbar

您可以使用 ActionBar 的下拉导航中的 Intent 启动活动吗？

```
ActionBar.OnNavigationListener navigationListener = new OnNavigationListener() {
    @Override
    public boolean onNavigationItemSelected(final int itemPosition,long itemId) {
             launchActivity(itemPosition);
             return true;
             }
    };

    getActionBar().setListNavigationCallbacks(adapter, navigationListener);
} 
```

这是那个方法：

```
 protected void launchActivity(int itemPosition) {
     Intent intent;
     switch (itemPosition) {
        case 1:
           intent = new Intent(this, MyActivity.class);
           startActivity(intent);
           break;
        case 2:
           ...
           ...
     }
} 
```

这导致手机崩溃并重新启动（看起来像内存不足）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T08:39:28.980

这很简单但确实需要技巧

```
protected void launchActivity(int itemPosition, Context context) {
     Intent intent;
     switch (itemPosition) {
        case 1:
           intent = new Intent(context, MyActivity.class);
           startActivity(intent);
           break;
        case 2:
           ...
           ...
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T13:06:58.193

我怀疑这是因为`onNavigationItemSelected`在活动开始时被调用 - 即用户根本没有从导航列表中选择任何内容。

在您的`launchActivity`方法中，您需要检测要启动的活动是否是已经在运行的活动，如果是，请不要尝试启动另一个活动。这里发生的是您的活动开始，`onNavigationItemSelected`立即触发，然后您的`launchActivity`方法正在启动另一个活动，然后重复该过程，直到您的设备内存不足。

您需要在`launchActivity`方法中添加代码：

```
protected void launchActivity(int itemPosition) {
    Intent intent;
    switch (itemPosition) {
        case 1:
            if (<this activity is not MyActivity>) {
                intent = new Intent(this, MyActivity.class);
                startActivity(intent);
            }
            break;
        case 2:
            ...
            ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:28:23.363

您绝对可以从操作栏下拉导航中启动活动。

活动是否启动然后崩溃？

# c# - Windows8 列表框对齐文本中心

> ID：13281267
> 
> 赞同：0
> 
> 时间：2012-11-08T01:46:38.707
> 
> 标签：c#, microsoft-metro

如何在 Windows 8 中使用 C# 将列表框的项目居中对齐？

这是我的xml：

```
 <ListBox x:Name="listBox1" HorizontalAlignment="Left" Height="365" Margin="242,275,-1,0" VerticalAlignment="Top" Width="190" SelectionChanged="listBox1_SelectionChanged" FontSize="20" FontWeight="Bold"/> 
```

在后面的代码中，我使用以下代码填充列表框：

```
 listBox1.Items.Add(new ListBoxItem() { Content = Global.availableDecks[0].ToString(), IsEnabled = true });
  listBox1.Items.Add(new ListBoxItem() { Content = Global.availableDecks[1].ToString(), IsEnabled = true }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:53:39.897

尝试创建一个 ItemTemplate 来创建对象的可视化表示（在本例中为列表框项）。[你可以在这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)找到更多信息

# php - PHP - 如果 isset 不显示，则嵌套内的变量

> ID：13281269
> 
> 赞同：0
> 
> 时间：2012-11-08T01:47:00.887
> 
> 标签：php, isset

我有这两个文件

***一个.php***

```
<?

 echo "
     <form action = 'B.php' method = 'post'>
           Age: <input type = 'text' name = 'age'>
           <input type = 'submit' name = 'send' value = 'send'>
      </form>
 ";

?> 
```

***B.php***

```
<?

  $age = $_REQUEST ['age'];

  if (isset($_POST['send'])){
      echo "Are you sure you wanna send this age?";
      echo "
             <form action = 'B.php' method = 'post'>
             <input type = 'submit' name = 'age2' value = 'YES'>
          ";

                 if (isset($_POST['age2']) && !isset($_POST['send'])){
                     echo "Your final age is".$age; //It doesn't display!!! :(
                 }
            echo "</form>";
  }
 ?> 
```

如果我删除第二个 if isset，将显示 $age。

如果您意识到，在第二个问题中，我有两个条件，第一个条件是必须单击“是”按钮，第二个条件是不能单击发送按钮。

我已经尝试了很多，但我没有得到这个:(

PS我想在同一页面中显示它。没有其他页面。如果这不可能，那么我将在其他页面中制作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:57:40.380

您确实需要：

*   分出第二个[`if`](http://php.net/if)。不可能两者都是真的。要么 button1 被按下，要么没有。
*   用 a 继续前一个变量`<input type=hidden>`
*   了解字符串和[heredoc](http://php.net/heredoc)语法。
*   修复你可怕的缩进。

所以它看起来像：

```
<?php

  $age = $_REQUEST['age'];

  if (isset($_POST['send'])) {

      echo <<<END
             Are you sure you wanna send this age?
             <form action='B.php' method='POST'>
                <input type='submit' name='age2' value='YES'>
                <input type=hidden name=age value='$age'>
             </form>
END;

  }

  if (isset($_POST['age2'])) {
      echo "Your final age is $age";
  }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:52:40.280

你的意思是。您发送第一个表格。然后它加载另一个页面进行确认。一旦你确认你得到原来的年龄。正确的？

像这样试试。

```
<?php
  $age = $_POST['age'];
  if (isset($_POST['send'])):
?>
  Are you sure you want to send this age?
  <form action = 'b.php' method = 'post'>
  <input type = 'hidden' name = 'age' value = '<?php echo $age; ?>'>
  <input type = 'submit' name = 'age2' value = 'YES'>

<?php
  endif;
  // This wont show up if the first form is sent
  if (isset($_POST['age2'])){
      echo "Your final age is ".$_POST['age']; //It does display!!! :(
  }

 ?> 
```

# .htaccess - .htaccess 301 重定向删除 url 的结尾

> ID：13281271
> 
> 赞同：1
> 
> 时间：2012-11-08T01:47:23.290
> 
> 标签：.htaccess, replace

我对 htaccess 不是很了解，我已经搜索了答案并尝试了类似问题的一些可能的解决方案。但没有运气。我们有一个 wordpress 站点，我们从该站点移到`http://somesite.com/blog/`了刚才`http://somesite.com` 我找到了重定向它的方法，但问题是：旧 url 的末尾有帖子编号，所以它看起来像这样：

`http://somesite.com/blog/blog-title-here/1234/`

该博客的新链接如下所示：

`http://somesite.com/blog-title-here/`

有人可以帮我找出 301 htaccess 重定向吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T16:33:27.860

您可以使用 mod_alias：

```
RedirectMatch 301 ^/blog/([^/]+) /$1/ 
```

或 mod_rewrite：

```
RewriteEngine On
RewriteRule ^/?blog/([^/]+) /$1/ [L,R=301] 
```

# django - Heroku 运行了错误的应用程序

> ID：13281276
> 
> 赞同：1
> 
> 时间：2012-11-08T01:48:36.817
> 
> 标签：django, heroku

我不小心将另一个应用程序上传到了我的 Heroku 文件夹，名为 social... 所以我有两个应用程序——`spicestore`现在`social`。而不是运行`python spicestore/manage.py runserver`Heroku 是运行`python social/manage.py runserver`. 我通过运行 bash 终端并从我的 git 文件夹中删除了`social`Heroku 中的文件夹，但这并没有将其恢复。

我怎样才能明确告诉它指向哪里，并`social`从我的 Heroku 目录中删除呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:56:30.973

如果`spicestore`应用程序在您的 git 存储库中，并且`social`不在您的 git 存储库中，那么当您通过 将应用程序推送到 heroku 时`git push -f`，`social`将被覆盖。您不需要使用 bash shell 或 git 以外的任何系统来切换应用程序。

# sql - SQL：连接两个表时如何获得原始排序

> ID：13281277
> 
> 赞同：1
> 
> 时间：2012-11-08T01:48:37.737
> 
> 标签：sql

我有两张桌子

第一个看起来像这样：

```
Name|Sir Name|Adress
Max1|Musterma|Muster Street
Max2|Musterma|Muster Street
Max3|Musterma|Muster Street
Max4|Musterma|Muster Street
Max5|Musterma|Muster Street 
```

第二个看起来像这样：

```
Name|Money
Max3|50.00
Max1|40.00
Max3|43.00
Max2|77.00
Max3|18.00
Max1|97.00
Max1|87.00 
```

我想使用 Left Join 并制作这样的输出：

```
Max1|Musterma|Muster Street|40.00
Max1|Musterma|Muster Street|97.00
Max1|Musterma|Muster Street|87.00
Max2|Musterma|Muster Street|77.00
Max3|Musterma|Muster Street|50.00
Max3|Musterma|Muster Street|43.00
Max3|Musterma|Muster Street|18.00
Max4|Musterma|Muster Street|
Max5|Musterma|Muster Street| 
```

我得到的是这样的：

```
Max3|Musterma|Muster Street|50.00
Max1|Musterma|Muster Street|40.00
Max3|Musterma|Muster Street|43.00
Max2|Musterma|Muster Street|77.00
Max3|Musterma|Muster Street|18.00
Max1|Musterma|Muster Street|97.00
Max1|Musterma|Muster Street|87.00
Max4|Musterma|Muster Street|
Max5|Musterma|Muster Street| 
```

我得到的内容是在第二个（右）表的条目位置之后排序的。

但我想让列表排序

1.  在用户的第一个位置之后
2.  在第二个钱的位置之后

谁能告诉我我还要写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:52:46.407

在 SQL 的末尾添加一个`order by`子句。它看起来像这样：

```
order by Table1.Name, Table2.Money 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:57:07.990

您可以使用 order by 子句，如下所示：

```
select name
     , sir_name
     , address
     , money
from   table1
left join table2 on (...)
ORDER BY name, money 
```

我只是猜到了您的表和列的名称，因为您没有提供它们=)

# facebook-graph-api - 即使我在墙上的帖子上设置了操作，它们也不会显示在图形 api 资源管理器或 FB UI 中

> ID：13281282
> 
> 赞同：0
> 
> 时间：2012-11-08T01:48:50.577
> 
> 标签：facebook-graph-api, action

我正在尝试使用以下 ruby​​ on rails 代码在墙上设置的操作。但是当我看到那些墙贴时，这些动作并没有出现在那里。它们也不会出现在图形 API 资源管理器中。我正在关注墙贴图 api 文档，但这里可能遗漏了一些东西。

```
 actionArray = Array.new
   actionArray << {"name" => "custom1", "link" => myUrl}
   actionArray << {"name" => "custom2", "link" => myUrl}

   postId = @graph.put_wall_post("some text", {"name" => "some text",
                                               "link" => myUrl,
                                               "caption" => "caption",
                                               "description" => "description",
                                               "picture" => pictureUrl,
                                               "actions" => actionArray}) 
```

想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:03:37.743

您不能创建多个自定义操作链接。本文档： http: [//developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)`actions`描述了您在阅读帖子数组时将看到的数据。对于应用程序创建的大多数帖子（通过 Stream.Publish 等方法或通过 Feed Dialog），您将看到三个操作：Like、Comment 和应用程序定义的自定义操作（这第三个是可选的，因此它是并不总是在那里）。但是，这仅描述了如何读取这三个对象。

创建帖子时，您只能指定一个自定义操作链接 - 其他两个（喜欢和评论）是自动创建的，无法自定义。如果您通过 Feed 对话框创建帖子，请在此处阅读：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

> 动作 一个 JSON 数组，包含一个描述动作链接的对象，该对象将出现在帖子下的“评论”和“喜欢”链接旁边。包含的对象必须具有键名称和链接。

因此，虽然您传递的“actions”参数必须像 JSON 数组一样格式化，但它只能有一个对象。它最终看起来像这样：

```
actions=[{"link":"http://apps.facebook.com/myAppUrl","name":"This is Link Text"}] 
```

尝试以这种方式进行操作（您的 Actions 数组中只有一个对象）并查看它是否有效 - 如果无效，则可能是您使用的 SDK 不支持 Action Link。

# ios - IOS如何让MPMediaPickerController仅以横向模式出现？

> ID：13281284
> 
> 赞同：2
> 
> 时间：2012-11-08T01:48:59.530
> 
> 标签：ios, landscape-portrait

由于某些原因，我将我的应用程序限制为只能在横向模式下运行，但奇怪的是，当我从我的应用程序中打开 iPod 音乐库时，它总是会以纵向模式跳出。

看到下面的代码，我很困惑是否是系统默认行为？我如何告诉它以横向模式出现（与其他 UI 保持一致）？谢谢。

```
- (IBAction)getMusic:(id)sender {
    MPMediaPickerController *picker = [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeMusic];
    picker.delegate                     = self;
    picker.allowsPickingMultipleItems   = YES;
    picker.prompt                       = NSLocalizedString (@"Add songs to play",nil);

    [self presentModalViewController: picker animated: NO];
    [picker release];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return UIInterfaceOrientationIsLandscape(interfaceOrientation);;
    } else {
        return YES;

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-27T14:06:09.427

只需将 MPMediaPickerController 的视图添加到支持所需方向的视图控制器的视图中。（在 iOS 6.1 SDK 中测试）

```
mediaPickerController = [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeAny];

mediaPickerController.delegate = self;
mediaPickerController.allowsPickingMultipleItems = NO;
mediaPickerController.prompt = @"Select songs to edit";

//[self presentViewController:mediaPicker animated:YES completion:^{}];
[self.view addSubview:mediaPickerController.view]; 
```

![在此处输入图像描述](../Images/acb5a57778a27485f23e2f5ce85cc1a7.png)

此外，在 iOS 7 的情况下，您应该如下设置媒体选择器的框架。

```
mediaPickerController = [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeAny];

mediaPickerController.delegate = self;
mediaPickerController.allowsPickingMultipleItems = NO;
mediaPickerController.prompt = @"Select a song to edit";

// in case of iOS 7
mediaPickerController.view.frame = CGRectMake(0, 0, 568, 320);

[self.view addSubview:mediaPickerController.view]; 
```

![在此处输入图像描述](../Images/42539850e34c6ee532be4820e4018038.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:40:33.773

从 MPMediaPickerController 类参考：

> 注意： MPMediaPickerController 类仅支持纵向模式。这个类确实支持子类化。这个类的视图层次是私有的；不要修改视图层次结构。

[这里](https://stackoverflow.com/questions/3687388/mpmediapickercontroller-orientation-on-ipad)和[其他地方](https://iphonedevsdk.vanillaforums.com/forum/iphone-sdk-development/105699-mpmediapickercontroller-orientation.html)都有描述解决方法的帖子，但我不能保证它们。

# java - 使用 .. 父目录说明符（“点点”）解析路径名而不解析符号链接

> ID：13281286
> 
> 赞同：11
> 
> 时间：2012-11-08T01:49:10.293
> 
> 标签：java, file, filesystems, guava, apache-commons

给定类似 的路径`/a/./b/c/../d`，我想删除所有“当前目录”指示符（即句点）和“父目录”指示符（即 ..），给出`a/b/d`.

我可以使用`File.getCanonicalPath()`，但这也解决了我不想要的符号链接。

有什么简单的方法吗？也就是说，比编写一个标记器并自己处理它更简单。

如果你能告诉我 '.' 的正确名称是什么，可以加分。和 '..' 在这种情况下。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T03:06:17.243

番石榴也有这个[`Files.simplifyPath(String)`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/io/Files.html#simplifyPath-java.lang.String-)。但是，您最好的选择（如果您可以使用 JDK7）是将您的路径表示为 a[`Path`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)并用于[`Path.normalize()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html#normalize%28%29)获取规范化版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T02:02:26.450

您可以`FilenameUtils.normalize()`在[Apache Commons IO](http://commons.apache.org/io/)库中使用 -[请参阅此处的 javadoc](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FilenameUtils.html#normalize-java.lang.String-boolean-)。

“点”（`.`）是当前目录，“点”（`..`）是父目录——[在 unix 目录上阅读](http://www.st-andrews.ac.uk/ITS/training/unix/unix1.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-15T11:50:23.407

也看看这个问题（Java 7 或更新版本）： [Java: how to normalize paths with nio Path?](https://stackoverflow.com/q/28053779/91497)

该解决方案很棒，但它不可移植（它不适用于 Windows 机器）。

# javascript - 如何将上下文传递给匿名函数？

> ID：13281288
> 
> 赞同：29
> 
> 时间：2012-11-08T01:49:14.430
> 
> 标签：javascript, callback

有一些功能，那就是做一些长期的工作，并提供回调。

```
someFunc: function(argument, callback, context) {
  // do something long

  // call callback function
  callback(context);
} 
```

在应用程序中，我使用此功能

```
someFunc('bla-bla', function (context) {
  // do something with this scope
  context.anotherFunc();
}, this); 
```

如何在不传`context`参的情况下实现回调函数？

需要一些这样的：

```
someFunc('bla-bla', function () {
  // do something with this scope
  this.anotherFunc();
}, this); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-10-20T01:26:13.500

接受的答案似乎有些过时了。假设您在相对现代的浏览器上运行，您可以`Function.prototype.bind`在[vanilla javascript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)中使用。或者，如果您使用[underscore](http://underscorejs.org/#bind)或[jQuery](http://api.jquery.com/jQuery.proxy/)，您可以分别使用`_.bind`or `$.proxy`（如果需要，它将回退到`call`/ `apply`）。

以下是这三个选项的简单演示：

```
// simple function that takes another function
// as its parameter and then executes it.
function execute_param(func) {
    func();
}

// dummy object. providing an alternative context.
obj = {};
obj.data = 10;

// no context provided
// outputs 'Window'
execute_param(function(){
    console.log(this);
});

// context provided by js - Function.prototype.bind
// src: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind
// outputs 'Object { data=10 }''
execute_param(function(){
    console.log(this);
}.bind(obj));

// context provided by underscore - _.bind
// src: http://underscorejs.org/#bind
// outputs 'Object { data=10 }'
execute_param(_.bind(function(){
    console.log(this);
},obj));

// context provided by jQuery - $.proxy
// src: http://api.jquery.com/jQuery.proxy/
// outputs 'Object { data=10 }'
execute_param($.proxy(function(){
    console.log(this);
},obj)); 
```

您可以在此处的 jsfiddle 中找到代码：http: [//jsfiddle.net/yMm6t/1/](http://jsfiddle.net/yMm6t/1/)（*注意：确保开发人员控制台已打开，否则您将看不到任何输出*）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-08T01:53:58.560

用于`Function.prototype.call`调用函数并手动设置该`this`函数的值。

```
someFunc: function(argument, callback, context) {
    callback.call(context); // call the callback and manually set the 'this'
} 
```

现在您的回调具有预期`this`值。

```
someFunc('bla-bla', function () {
  // now 'this' is what you'd expect
    this.anotherFunc();
}, this); 
```

* * *

当然，您可以在`.call`调用中像往常一样传递参数。

```
callback.call(context, argument); 
```

# javascript - 使用 JSON 的空 jqGrid

> ID：13281289
> 
> 赞同：0
> 
> 时间：2012-11-08T01:49:18.713
> 
> 标签：javascript, json, jsp

jqGrid 是空的。jqGrid 寻呼机显示“没有要查看的记录”。服务器正在返回看起来是格式正确的 JSON 字符串。我定义了一个 JSONReader 来匹配我的 JSON 字符串格式，但我仍然得到一个空网格。任何帮助，将不胜感激。

这是来自服务器的 JSON 字符串：

```
{"JSONObj":{"totalpages":"1","currpage":"1","totalrecords":"1","rows":[{"id":"1","cell":["num1","Vendor1"]}]}} 
```

这是来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-    strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>JSON Example</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="grid.locale-en.js"></script>
    <script type="text/javascript" src="jquery.jqGrid.min.js"></script>
    <link rel="stylesheet" type="text/css" href="jquery-ui-1.9.0.custom.css" />
    <link rel="stylesheet" type="text/css" href="ui.jqgrid.css" />

    <script type="text/javascript">

      jQuery(document).ready(function () {
         jQuery("#vendorGrid2").jqGrid({
             jsonReader : {
                 root:"rows",
                 total: "totalpages",
                 page: "currpage",
                 records: "totalrecords",
                   cell: "cell", 
                   id: "id"
                },
           pager: $("#vendorGrid2_pager"),
           rowNum:1,
           rowList:[10,20,30],
           datatype: "json",
           viewrecords:true,
           url: "getJSONVendorList",  // call the struts2 action in jsonexample.xml
           gridModel:"JSONObj",       // the object that gets returned containing the grid data
           height: 250,
           colNames:['ID', 'Name'],
           colModel:[
               {name:'num',index:'num', width:200, sorttype:"int"},
               {name:'name',index:'name', width:500, sorttype:"string"}
           ],
           multiselect: false,
           height: "100%",
           caption: "Vendor List",
              //loadComplete: function(data){alert('loaded');},
              loadError: function(xhr,status,error){alert(status+" "+error);}, 
       });

         // this works when datatype:"local"
         //jQuery("#vendorGrid2").addRowData("1", {num:"1", name:"Dallas Vendor"});
         //jQuery("#vendorGrid2").addRowData("2", {num:"2", name:"Ft. Worth Vendor"});
     });

    </script>

</head>
<body>

JSON Example

<div id="gridInfo">
    <table id="vendorGrid2"></table>
    <div id="vendorGrid2_pager"></div>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:22:34.607

为了其他可能有同样问题的人的利益，我将回答我自己的问题：

Java 类正在使用 JSON 库 (jar) 构建一个带有名为 JSONObj 的变量的 JSON 对象。这样做会在 JSON 字符串中创建一个 JSON 字符串，因此在 Object 开头的“额外”字符串“JSONObj”。这不是要走的路。
正确的方法是使用 struts2 JSON 插件（struts2-json-plugin-2.1.8.jar）。该插件采用整个 java 类并将其转换为 JSON 对象。必须使用类属性和公共 getter 和 setter（POJO/java bean）才能正确实现类。无需在类中“构建” JSON 对象。这更像是一个 java/struts2/JSON 概念，而不是一个特定的代码问题，但我还是发布了 java 类：

```
package autobasic;

import java.util.ArrayList;
import java.util.List;
import org.apache.log4j.Logger;
import autobasic.beans.VendorBean;
import autobasic.db.DbVendorList;
import autobasic.exception.AutobasicException.AutobasicDBException;
import com.opensymphony.xwork2.ActionSupport;

public class VendorListActionSupport extends ActionSupport
{

   private static final long serialVersionUID = 1L;
   private static Logger log = Logger.getLogger(VendorListActionSupport.class);
   private String currpage = "1";
   private String totalpages = "1"; 
   private String totalrecords = "2"; 
   private ArrayList<ArrayList<String>> rows = new ArrayList<ArrayList<String>>();

   public String returnJSON()
   {
      getVendorList();
      return SUCCESS;
   }

   void getVendorList()
   {
      try
      {
         DbVendorList dbVendorList = new DbVendorList();
         List<VendorBean> vendorList = null;
         vendorList = dbVendorList.getVendorList();  // load the list
         totalrecords = Integer.toString(vendorList.size());

         ArrayList<String> items = null;

         for (VendorBean vb : vendorList)
         {
            items = new ArrayList<String>();
            items.add(vb.getID());
            items.add(vb.getName());
            items.add(vb.getCity());
            items.add(vb.getPhone());
            rows.add(items);
         }
      }
      catch (AutobasicDBException e)
      {
         e.printStackTrace();
      }
   }

   public String getCurrpage()
   {
      return currpage;
   }

   public String getTotalpages()
   {
      return totalpages;
   }
   public String getTotalrecords()
   {
      return totalrecords;
   }

   public ArrayList<ArrayList<String>> getRows()
   {
      return rows;
   }
} 
```

# java - “错误：未报告的异常 EmptyFileException；在编译我的驱动程序时必须在 Java 中捕获或声明为抛出”

> ID：13281294
> 
> 赞同：1
> 
> 时间：2012-11-08T01:50:05.193
> 
> 标签：java

第一次在这里发帖，如果格式有问题，我会尝试修复它。无论如何，所以当我尝试运行我的驱动程序时，我一直在 java 中遇到这个错误。该程序的目标是写入然后从文件中读取，我写入文件很好，现在我试图从中读取，这是错误：

未报告的异常 EmptyFileException；必须被抓住或宣布被扔掉

大学 ufl = University.readFromFile("university.txt");

```
//read from file
public static University readFromFile(String filename) throws EmptyFileException {
    File file = new File(filename);
    University university = null;
    Scanner in = null;
    try {
        in = new Scanner(file);
        String str = in.nextLine();
        Scanner in2 = new Scanner(str).useDelimiter(":");
        in2.next(); 
        String uName = in2.next();

        //Read University info
        str = in.nextLine();
        in2 = new Scanner(str).useDelimiter(":");
        in2.next(); 
        String uTerm = in2.next();
        str = in.nextLine();
        in2 = new Scanner(str).useDelimiter(":");
        in2.next(); 
        int uYear = in2.nextInt();
        str = in.nextLine();
        in2 = new Scanner(str).useDelimiter(":");
        in2.next(); 
        int uNumStudents = in2.nextInt();
        str = in.nextLine();
        in2 = new Scanner(str).useDelimiter(":");
        in2.next(); 
        int uNumInstructors = in2.nextInt();
        str = in.nextLine();
        in2 = new Scanner(str).useDelimiter(":");
        in2.next(); 
        int uNumCourses = in2.nextInt();

        //Create and read arrays of objects
        Student[] uStudents = new Student[uNumStudents];
        for(int i = 0; i < uNumStudents; i++)
                        uStudents[i] = readStudent(in);

        Instructor[] uInstructors = new Instructor[uNumInstructors];
        for(int i = 0; i < uNumInstructors; i++)
                        uInstructors[i] = readInstructor(in);

                    //Create array of possible TAs to pass into readCourse method
                    GradStudent[] gStudents = new GradStudent[uNumStudents];
                    for(int j=0; j<uStudents.length; j++) {
                        for(int i=0; i<uStudents.length; i++) {
                            if(uStudents[i] instanceof GradStudent)
                                gStudents[j] = (GradStudent) uStudents[i];
                        }
                    } 

        Course[] uCourses = new Course[uNumCourses];
        for(int i = 0; i < uNumCourses; i++)
                        uCourses[i] = readCourse(in, uInstructors, gStudents, uStudents);

        //Create University object
        university = new University(uName, uTerm, uYear, uStudents, uInstructors, uCourses);
        return university;

    } catch (FileNotFoundException fe) {
    fe.printStackTrace();
    return null;
}
} 
```

我的 EmptyFileException 的代码是

```
public class EmptyFileException extends Exception {
String filename;

EmptyFileException() {
}

EmptyFileException(String filename) {
    this.filename = filename;
}

public String toString() {
    return "The file " + filename + " is empty.";

} 
```

}

司机是

```
public class TestDriver2 {

public static void main(String[] args) {

    University ufl = University.readFromFile("university.txt");

            if (ufl != null) {
                System.out.println("\n--Printing out University info--");
                System.out.println(ufl);

                System.out.println("\n--Printing out Students info--");
                Student[] students = ufl.getStudents();
                for (Student s : students)
                        System.out.println("\n" + s);
            }
} 
```

}

任何帮助，将不胜感激。如果不清楚，前两个文件编译得很好，只有驱动程序不会编译（这是我老师给我的）。

**更新**

添加了该`throws`子句并编译了，并没有改变我老师给我的代码。

但是现在我不断收到此错误：

```
Exception in thread "main" java.util.InputMismatchException
 at java.util.Scanner.throwFor(Scanner.java:909)
 at java.util.Scanner.next(Scanner.java:1530)
 at java.util.Scanner.nextInt(Scanner.java:2160)
 at java.util.Scanner.nextInt(Scanner.java:2119)
 at University.readFromFile(University.java:174)
 at TestDriver2.main(TestDriver2.java:8) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T01:54:11.470

改变

```
public static void main(String[] args) { 
```

至

```
public static void main(String[] args) throws EmptyFileException { 
```

（或在代码中插入适当的`catch`语句。）

# java - 尽管满足条件，while循环不循环

> ID：13281296
> 
> 赞同：1
> 
> 时间：2012-11-08T01:50:08.640
> 
> 标签：java, loops, while-loop

到目前为止，这是我的代码（好吧，while循环）：

```
public class Lab10d
{
public static void main(String args[])
{
    Scanner keyboard = new Scanner(System.in);
    char response = 0;

    //add in a do while loop after you get the basics up and running

        String player = "";

        out.print("Rock-Paper-Scissors - pick your weapon [R,P,S] :: ");

        //read in the player value
        player = keyboard.next();

        RockPaperScissors game = new RockPaperScissors(player);
        game.setPlayers(player);
        out.println(game);
    while(response == ('y'))
    {
        out.print("Rock-Paper-Scissors - pick your weapon [R,P,S] :: ");
        player = keyboard.next();
        game.setPlayers(player);
        //game.determineWinner();
        out.println(game);
        out.println();

        //

    }
    out.println("would you like to play again? (y/n):: ");
        String resp =  keyboard.next();
        response = resp.charAt(0);
}
} 
```

它应该额外运行代码，直到输入 n

当我输入ay时，它应该重新运行代码但没有

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T01:53:25.747

`while`在您询问他们是否要再次播放之前，您的循环结束。

将循环更改为：

```
while(response == ('y'))
    {
        out.print("Rock-Paper-Scissors - pick your weapon [R,P,S] :: ");
        player = keyboard.next();
        game.setPlayers(player);
        //game.determineWinner();
        out.println(game);
        out.println();
        out.println("would you like to play again? (y/n):: ");
        String resp =  keyboard.next();
        response = resp.charAt(0);
    } 
```

还有一个问题：`response`在循环开始之前没有设置为'y'。它根本不会在循环中做任何事情。请改用`do { ... } while (response == 'y')`循环。

```
 do
    {
        out.print("Rock-Paper-Scissors - pick your weapon [R,P,S] :: ");
        player = keyboard.next();
        game.setPlayers(player);
        //game.determineWinner();
        out.println(game);
        out.println();
        out.println("would you like to play again? (y/n):: ");
        String resp =  keyboard.next();
        response = resp.charAt(0);
    } while (response == 'y'); 
```

do-while 将执行代码*一次*，**然后**检查条件并继续执行`true`。while 循环只会检查条件，并继续执行 while it's `true`。

编辑：我为你整理了一些代码：

```
import java.util.Scanner;

public class Troubleshoot {

    public static void main(String[] args) {
        Scanner s = new Scanner(System.in);
        char response = ' ';
        do {
            System.out.println("Stuff");
            System.out.print("Again? (y/n): ");
            response = s.next().charAt(0);
        } while (response == 'y');
    }

} 
```

输出：

```
Stuff
Again? (y/n): y
Stuff
Again? (y/n): y
Stuff
Again? (y/n): n 
```

# c++ - 如何确定项目被告知在哪里链接 Visual Studio 中的特定库？

> ID：13281299
> 
> 赞同：0
> 
> 时间：2012-11-08T01:50:27.983
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++

我有一个 Visual Studio 项目。这很简单，而且很有效。但是，我们正在将代码移植到 64 位。我已经编译了这个简单的项目，但它无法链接：

```
fatal error LNK1112: module machine type 'X86' conflicts with target machine type 'x64' 
```

这告诉我它正在尝试链接错误版本的库。它应该链接 64 位库，但它正在尝试链接 32 位库。这显然是错误的。

我的问题是我无法弄清楚我的项目决定在哪​​里链接该库。我看过：

*   项目属性，道具文件。尽管指定了 lib 路径，但没有指定 lib 名称。
*   项目属性 -> 链接器 -> 命令行。也不在那里。
*   我已经查看了某种 a 的头文件`#pragma comment(lib, )`，但我找不到它的任何用途。

我还能在哪里看？有没有办法让 Visual Studio 告诉我它是如何决定在不同的库中链接的？

不确定它是否相关，但这是一个使用 CppUnit 的小型单元测试项目。它`cppunit-vc100-MTd.lib`在应该链接的时候链接`cppunit-vc100-x64-MTd.lib`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:02:32.260

在您的项目属性页面上，在链接器、常规下，将项目链接进度报告设置为您需要显示被点击的库的任何内容。/VERBOSE 或 /VERBOSE:lib 可能会做你想做的事。

使用 /VERBOSE:lib 在输出窗口中显示的示例输出

```
1>  Searching libraries
1>      Searching D:\winsdk\lib\kernel32.lib:
1>      Searching D:\winsdk\lib\user32.lib:
1>      Searching D:\winsdk\lib\gdi32.lib:
1>      Searching D:\winsdk\lib\winspool.lib:
1>      Searching D:\winsdk\lib\comdlg32.lib:
1>      Searching D:\winsdk\lib\advapi32.lib:
1>      Searching D:\winsdk\lib\shell32.lib:
1>      Searching D:\winsdk\lib\ole32.lib:
1>      Searching D:\winsdk\lib\oleaut32.lib:
1>      Searching D:\winsdk\lib\uuid.lib:
1>      Searching D:\winsdk\lib\odbc32.lib:
1>      Searching D:\winsdk\lib\odbccp32.lib: 
```

ETC..

此外，您的源代码树中可能有一个头文件，该文件通过

```
#pragma comment (lib, "cppunit-vc100-MTd.lib") 
```

但这应该很容易通过“在文件中查找”点击“包含路径”进行搜索，这是“在文件中查找”配置中的固定选项之一。

# jquery - jQuery fadeIn() 结果显示：内联元素的块

> ID：13281300
> 
> 赞同：8
> 
> 时间：2012-11-08T01:50:32.347
> 
> 标签：jquery, css

[http://jsfiddle.net/chovy/dk5Ua/](http://jsfiddle.net/chovy/dk5Ua/)

```
<div></div>

var $span = $('<span>foo</span>');

$span.hide();
$("div").append($span);
$span.fadeIn(); 
```

您会注意到生成的跨度具有内联样式`display: block;`而不是内联样式。

这是生成的html：

```
<span style="display: block;">foo</span> 
```

如何让 fadeIn() 产生 display: inline？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T20:21:34.903

我刚刚找到了一个类似问题的简单解决方案。在您的情况下，解决方法是：

```
$span.css('display', 'inline').hide().fadeIn(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T01:54:12.687

我和阿德里安在一起；这真的不是一个问题。但你是对的：当你使用任何显示/隐藏元素的东西（例如显示、隐藏、切换、淡出等）时，jQuery 会对显示属性进行非常简单的转换。

老实说，我从来不明白他们为什么这样做（简单地将显示设置为：

```
isShown ? '' : 'none'; 
```

而不是他们的逻辑，本质上是：

```
isShown ? 'block' : 'none'; 
```

) 但他们所做的一切都是有原因的，所以我想他们在设置错误的显示类型背后有一些逻辑。

*** 编辑 ***

正如我所怀疑的，jQuery 人确实有他们的理由（参见 jfriend00 的评论）；我也看到现在的问题中有一个实际问题：

> 如何让 fadeIn() 产生 display: inline？

答案是你需要看看 fadeIn 是如何工作的；本质上它只是：

```
this.animate({opacity: "show"}, speed, easing, callback ); 
```

换句话说，它大致相当于：

```
this.animate({opacity: '100%'}, speed, easing, function() {
    this.css('display', 'block')
}); 
```

（警告：我实际上不是 jQuery 动画功能的大用户，所以虽然上面的代码应该可以工作，但我不做任何承诺）。

鉴于此，如果您想将显示设置为其他内容（例如 say `'inline'`），您可以执行以下操作：

```
this.animate({opacity: '100%'}, speed, easing, function() {
    this.css('display', 'inline') // or you could use this.css('display', '')
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-31T11:03:49.043

我发现这非常有用，而且有点简单（基于[MakuraYami](https://stackoverflow.com/users/1235305/makurayami)对[这个问题](https://stackoverflow.com/questions/1091322/how-to-fade-to-display-inline-block)的[回答](https://stackoverflow.com/a/10322651/1009413)）：

```
$span.fadeIn().css('display', 'inline'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T07:11:18.997

通过克隆原始对象，我可以调用fadeIn，它给了我一个内联样式。

```
var $htm = $('<span/>')
, $divs = $('div');

$divs.replaceWith(function(){
   return $htm.clone().fadeIn(2000);
}); 
```

# r - 创建共现矩阵

> ID：13281303
> 
> 赞同：36
> 
> 时间：2012-11-08T01:50:43.733
> 
> 标签：r, matrix

我正在尝试解决具有共现矩阵的问题。我有一个交易和项目的数据文件，我想查看项目一起出现的交易数量的矩阵。

我是 R 编程的新手，我很高兴找出 R 的所有快捷方式，而不是创建特定的循环（我几年前曾经使用 C，现在只坚持使用 Excel 宏和 SPSS）。我已经检查了这里的解决方案，但没有找到一个有效的解决方案（最接近的是这里给出的解决方案：[使用 SAC 的共现矩阵？](https://stackoverflow.com/questions/10568540/co-occurrence-matrix-using-sac) - 但是当我使用 projecting_tm 时它产生了一条错误消息，我怀疑 cbind 不是在我的情况下成功。

基本上我有一个包含以下内容的表：

```
TrxID Items Quant
Trx1 A 3
Trx1 B 1
Trx1 C 1
Trx2 E 3
Trx2 B 1
Trx3 B 1
Trx3 C 4
Trx4 D 1
Trx4 E 1
Trx4 A 1
Trx5 F 5
Trx5 B 3
Trx5 C 2
Trx5 D 1, etc. 
```

我想创建类似的东西：

```
 A B C D E F
A  0 1 1 0 1 1
B  1 0 3 1 1 0
C  1 3 0 1 0 0
D  1 1 1 0 1 1
E  1 1 0 1 0 0
F  0 1 1 1 0 0 
```

我所做的是（你可能会嘲笑我的菜鸟 R 方法）：

```
library(igraph)
library(tnet)

trx <- read.table("FileName.txt", header=TRUE) 
transID <- t(trx[1])
items <- t(trx[2])

id_item <- cbind(items,transID)
item_item <- projecting_tm(id_item, method="sum")
item_item <- tnet_igraph(item_item,type="weighted one-mode tnet")
item_matrix <-get.adjacency(item_item,attr="weight")
item_matrix 
```

如上所述，cbind 可能不成功，因此projecting_tm 无法给我任何结果。

任何替代方法或对我的方法的更正？

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-03-26T12:23:44.063

使用上述任一答案中的“dat”，尝试`crossprod`并`table`：

```
V <- crossprod(table(dat[1:2]))
diag(V) <- 0
V
#      Items
# Items A B C D E F
#     A 0 1 1 1 1 0
#     B 1 0 3 1 1 1
#     C 1 3 0 1 0 1
#     D 1 1 1 0 1 1
#     E 1 1 0 1 0 0
#     F 0 1 1 1 0 0 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-08T02:36:19.940

我会结合使用 reshape2 包和矩阵代数：

```
#read in your data
dat <- read.table(text="TrxID Items Quant
Trx1 A 3
Trx1 B 1
Trx1 C 1
Trx2 E 3
Trx2 B 1
Trx3 B 1
Trx3 C 4
Trx4 D 1
Trx4 E 1
Trx4 A 1
Trx5 F 5
Trx5 B 3
Trx5 C 2
Trx5 D 1", header=T)

#making the boolean matrix   
library(reshape2)
dat2 <- melt(dat)
w <- dcast(dat2, Items~TrxID)
x <- as.matrix(w[,-1])
x[is.na(x)] <- 0
x <- apply(x, 2,  function(x) as.numeric(x > 0))  #recode as 0/1
v <- x %*% t(x)                                   #the magic matrix 
diag(v) <- 0                                      #repalce diagonal
dimnames(v) <- list(w[, 1], w[,1])                #name the dimensions
v 
```

对于图形可能...

```
g <- graph.adjacency(v, weighted=TRUE, mode ='undirected')
g <- simplify(g)
# set labels and degrees of vertices
V(g)$label <- V(g)$name
V(g)$degree <- degree(g)
plot(g) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-07-08T08:41:12.357

出于效率原因，尤其是在稀疏数据上，我建议使用稀疏矩阵。

```
dat <- read.table(text="TrxID Items Quant
Trx1 A 3
Trx1 B 1
Trx1 C 1
Trx2 E 3
Trx2 B 1
Trx3 B 1
Trx3 C 4
Trx4 D 1
Trx4 E 1
Trx4 A 1
Trx5 F 5
Trx5 B 3
Trx5 C 2
Trx5 D 1", header=T)

library("Matrix")

# factors for indexing matrix entries and naming dimensions
trx.fac <- factor(dat[,1])
itm.fac <- factor(dat[,2])

s <- sparseMatrix(
        as.numeric(trx.fac), 
        as.numeric(itm.fac),
        dimnames = list(
                as.character(levels(trx.fac)), 
                as.character(levels(itm.fac))),
        x = 1)

# calculating co-occurrences
v <- t(s) %*% s

# setting transactions counts of items to zero
diag(v) <- 0
v 
```

我正在尝试在此线程中发布的每个解决方案。他们都没有使用大型矩阵（我使用的是 1,500 x 2,000,000 矩阵）。

**有点题外话**：在计算了一个共现矩阵之后，我通常想计算单个项目之间的距离。可以像这样在共现矩阵上有效地计算余弦相似度/距离：

```
# cross-product of vectors (numerator)
num <- v %*% v

# square root of square sum of each vector (used for denominator)
srss <- sqrt(apply(v^2, 1, sum))

# denominator
den <- srss %*% t(srss)

# cosine similarity
v.cos.sim <- num / den

# cosine distance
v.cos.dist <- 1 - v.cos.sim 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-04-25T01:38:17.550

我会为此使用 xtabs：

```
dat <- read.table(text="TrxID Items Quant
Trx1 A 3
Trx1 B 1
Trx1 C 1
Trx2 E 3
Trx2 B 1
Trx3 B 1
Trx3 C 4
Trx4 D 1
Trx4 E 1
Trx4 A 1
Trx5 F 5
Trx5 B 3
Trx5 C 2
Trx5 D 1", header=T)

term_doc <- xtabs(~ TrxID + Items, data=dat, sparse = TRUE)
co_occur <- crossprod(term_doc, term_doc)
diag(co_occur) <- 0
co_occur 
```

我投入`sparse = TRUE`以表明这可以适用于非常大的数据集。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-09T03:05:14.003

如果您首先创建一个二分图，这实际上非常简单和干净，其中顶部节点是交易，底部节点是项目。然后创建到底部节点的投影。

```
dat <- read.table(text="TrxID Items Quant
Trx1 A 3
Trx1 B 1
Trx1 C 1
Trx2 E 3
Trx2 B 1
Trx3 B 1
Trx3 C 4
Trx4 D 1
Trx4 E 1
Trx4 A 1
Trx5 F 5
Trx5 B 3
Trx5 C 2
Trx5 D 1", header=T)

library(igraph)
bip <- graph.data.frame(dat)
V(bip)$type <- V(bip)$name %in% dat[,1]

## sparse=TRUE is a good idea if you have a large matrix here
v <- get.adjacency(bipartite.projection(bip)[[2]], attr="weight", sparse=FALSE)

## Need to reorder if you want it alphabetically
v[order(rownames(v)), order(colnames(v))]

#   A B C D E F
# A 0 1 1 1 1 0
# B 1 0 3 1 1 1
# C 1 3 0 1 0 1
# D 1 1 1 0 1 1
# E 1 1 0 1 0 0
# F 0 1 1 1 0 0 
```

# java - 数组列表为所有元素打印相同的数据

> ID：13281304
> 
> 赞同：2
> 
> 时间：2012-11-08T01:51:04.100
> 
> 标签：java, arraylist

我正在尝试打印获取并存储在对象中的数据集。该对象使用一个数组列表。在获取数据时（在将其添加到数组列表之前），所有记录都打印不同，但是当我开始打印它们时，它们是相同的。我不知道为什么。

这是代码

```
void caseClicked()

{
  //println("Inside case clicked");

  for(int i = 0; i < mapData.size(); i++)
  {
    if (dist(mapData.get(i).pf.x, mapData.get(i).pf.y, gX, gY) < percentY(1))
    {
      clickedCaseId = mapData.get(i).icaseNum;
      clickedStateId = mapData.get(i).stateId;
      glyphPosX = mapData.get(i).pf.x;
      glyphPosY = mapData.get(i).pf.y;
      print("Value of icaseNum selected" + mapData.get(i).icaseNum + "\n");
      break;
    }
    else
      continue;
  }

  try{
          db.getConnection(); 
          if (db.conn.connect())
          {
            String tempQ = "select distinct(svin), vfatcount, saccdate, day " + d_year + " where icasenum = " + clickedCaseId + " and istatenum = " + clickedStateId;
            println(tempQ);
            db.conn.query(tempQ);
            Glyph tg1 = new Glyph();                 
            gl.fnVins.clear();
            while (db.conn.next()) 
            {
              tg1.fVin.VIN = db.conn.getString(1);
              tg1.fVin.fatals = (int)Float.parseFloat(db.conn.getString(2));
              println("Value of VIN is " + tg1.fVin.VIN + "\n");
              println("Value of fatals is " + tg1.fVin.fatals + "\n");

              gl.fnVins.add(tg1.fVin);
              gl.gdate = db.conn.getString(3);
              gl.gday = db.conn.getString(4);
            }

            for (int i = 0; i < gl.fnVins.size(); i++)
            println("Value of VIN is " + gl.fnVins.get(i).VIN + "\n");

          }
      }
      catch (Exception e)
      {      
          System.err.println ("Error:DBHelper.dataPointQuery - " + e.toString());
       //   return null;        
      }          
            db.closeConnection();

} 
```

字形类是

```
public class Glyph
{
  float caseNum = 0;
  float stateId = 0;
  float time = 0;
  int fatal = 0;
  String gday = "", gdate = "";

  class fnVin
  {
    int fatals = 0;
    String VIN = "";
  }

  fnVin fVin = new fnVin();
  ArrayList<fnVin> fnVins = new ArrayList<fnVin>();

} 
```

请有人能帮我弄清楚这个实现有什么问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:58:26.087

问题是：在 while 循环中将其添加到 gl.fnVin 之前，您没有创建新的 tg1.fVin 实例。

```
gl.fnVins.add(tg1.fVin); 
```

要解决此问题，您必须在 while 循环中添加到数组之前创建新的 fnVin 实例。

```
while (db.conn.next()) {
    fVin fv = new fVin();
    fv.VIN = db.conn.getString(1);
    fv.fatals = (int)Float.parseFloat(db.conn.getString(2));              

    gl.fnVins.add(fv);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:58:42.993

您在这里（在您的班级内）继续重用相同的`fnVin`对象：`Glyph`

```
Glyph.fnVin fVin = new Glyph.fnVin(); 
```

你应该做的是，首先，删除该行，然后使用这个更改的循环：

```
while (db.conn.next()) 
{
    fnVin fVin = new fnVin();
    fVin.VIN = db.conn.getString(1);
    fVin.fatals = (int)Float.parseFloat(db.conn.getString(2));
    // println("Value of VIN is " + fVin.VIN + "\n");
    // println("Value of fatals is " + fVin.fatals + "\n");

    gl.fnVins.add(fVin);
    gl.gdate = db.conn.getString(3);
    gl.gday = db.conn.getString(4);
} 
```

我不确定是否仅基于您的代码，但您可能也需要考虑移动`gdate`到`gday`您的`fVin`内部类。此外，您应该制作`fVin`成 a`public class`以便您可以在此方法中制作它的新实例。

# python - 将稀疏的 csv 文件读入 pandas

> ID：13281305
> 
> 赞同：1
> 
> 时间：2012-11-08T01:51:17.337
> 
> 标签：python, csv, pandas

我有一个空格分隔的 CSV 文件，格式如下：

```
2012-11-01 1 2012-12-01 4 2013-02-01 6
2012-12-01 2 2013-01-01 nan
2012-11-01 3 2012-12-01 5 2013-01-01 5 2013-04-01 7 
```

基本上日期后跟一个值，但日期是稀疏的。一些值是 nan，或者也可能丢失。我希望能够将其读入 Pandas 并根据相应的日期排列值。

运行熊猫：

```
import pandas as pd
pd.read_csv('sparse.csv', sep=" ", parse_dates=True) 
```

错误：

```
ValueError: Expecting 6 columns, got 8 in row 1 
```

读取此文件并对齐日期/值的方法是什么？

（我可以做一些“预处理”吗？）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:00:01.273

CSV 应包含具有相同字段数的行。如果它只是成对的日期数字而没有成对之间的关​​系，则它不是 CSV，而只是成对的文件。因此，它应该被解析为成对的文件：

```
input = open("sparse.csv").read().split() # split by newlines and spaces
i = iter(input)
for date in i:
    if date != "nan":
        value = i.next()
        # process pairs 
```

# android - Android 调整 TextView 的大小

> ID：13281306
> 
> 赞同：1
> 
> 时间：2012-11-08T01:51:18.683
> 
> 标签：android, layout, resize, textview

好吧，我正在尝试在我的应用程序中为教师做一个搜索系统，我已经做到了，但是有一个布局问题。当我为我的 TextViews 设置文本时，它们会根据单词长度调整大小，我不希望这样。

这是我的搜索代码：

```
 String prof = s.toString();
            int i=0;                
            pesquisa.clear();
            for(i = 0; i<professores.size();i++){
                if(professores.get(i).contains(prof)){
                    pesquisa.add(professores.get(i));
                }
            }
            for(i=0;i<cont;i++){
                txt.get(i).setText(""); 
            }
            if(pesquisa.size() > cont){
                for(i =0; i<cont;i++){              
                    txt.get(i).setText(pesquisa.get(i));            
                }   
            }else{
                for(i =0; i<pesquisa.size();i++){               
                    txt.get(i).setText(pesquisa.get(i));            
                }
            } 
```

和一个 TextView 布局：

```
 <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="fill_horizontal"
        android:layout_marginLeft="10dip"
        android:layout_marginTop="10dip"
        android:layout_weight="1"
        android:background="@drawable/bgtxtview"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

这是bgtxtview：

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item>     
        <shape>
            <solid
                android:color="#b0b0b0" />
            <stroke
                android:width="1dp"
                android:color="#505050" />
            <corners
                android:radius="5dp" />
            <padding
                android:left="2dp"
                android:right="2dp"/>

        </shape>
       </item>
   </selector> 
```

Sooo，我该怎么做才能解决这个问题？

带有布局的图像。

!图像布局[http://i.stack.imgur.com/qU2Uu.jpg]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:27:21.233

您应该在 TextView 中将宽度设置为**0dp**而不是**match_parent**。

'当总和大于LinearLayout时，权重用于分配剩余的空白空间或带走空间。

# amazon-s3 - 只读访问 Amazon 上的 S3 文件夹

> ID：13281310
> 
> 赞同：1
> 
> 时间：2012-11-08T01:51:33.747
> 
> 标签：amazon-s3, amazon-web-services, user-permissions

我正在尝试设置对 Amazon 上特定文件夹的只读访问权限。我有一个“公司”存储桶和文件夹“软件”。出于某种原因，以下代码对我不起作用（我正在使用 CloudBerry 进行验证）：

```
{
    "Statement": [
    {
        "Effect": "Allow",
        "Action": [
            "s3:Get*",
            "s3:List*"
        ],
        "Resource": "arn:aws:s3:::corporate/software/*"
    }
    ]
} 
```

但如果我使用：

```
"Resource": "*" 
```

我能看到所有的桶......我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T02:37:20.570

下面的代码对我有用：

```
{
    "Statement": [
{
    "Effect": "Allow",
    "Action": [
        "s3:ListBucket",
        "s3:GetBucketLocation",
        "s3:ListBucketMultipartUploads"
    ],
    "Resource": "arn:aws:s3:::corporate",
    "Condition": {}
    },
    {
    "Effect": "Allow",
    "Action": [
        "s3:GetObject",
        "s3:GetObjectAcl",
        "s3:GetObjectVersion",
        "s3:GetObjectVersionAcl"
    ],
    "Resource": "arn:aws:s3:::corporate/software/*",
    "Condition": {}
    },
    {
        "Effect": "Allow",
        "Action": "s3:ListAllMyBuckets",
        "Resource": "*",
        "Condition": {}
    }
]
} 
```

# php - 使用 mysql 进行 ajax 更新的问题

> ID：13281315
> 
> 赞同：1
> 
> 时间：2012-11-08T01:51:55.237
> 
> 标签：php, javascript, jquery, html

我正在为医生办公室构建位置查找器应用程序。在应用程序中，有多个等待登记的患者的列表。

例如，第一个病人是病人 X。这是一步一步的过程（描述我的问题的最简单的方法）

1) 患者 X 的姓名旁边是一个标记为**Check In**的按钮。单击 Check In 后，患者 ID（称为 selectid）通过 Ajax 发送到**changeloc.php**，其中记录了检查时间和日期。

2) 成功后，用户会看到一个下拉菜单（替换初始按钮），其中包含用户可以选择的多个位置。从 select 中选择一个位置后，变量**locationSelect**将被发送到**changeloc.php**并在其中记录。

3）然后用户可能决定选择多个位置，重复步骤 2

4) 最后，当用户完成位置选择时，他点击用户在步骤 2 和 3 中点击位置的同一选择中的最后一个选项，标题为**Check Out**。单击此按钮后，它将被发送到**checkloc.php**并记录。

5) 最后，下拉菜单消失，**Checked Out字样**

这是我的代码：

PHP

```
<?php

 date_default_timezone_set('America/Denver');

 $apptid = $_REQUEST['selectid'];
 $currentlocation = $_REQUEST['locationSelect'];
 $currentlocationstart = date("Y-m-d H:i:s"); 
 $checkin = $_REQUEST['checkIn'];
 $checkout = $_REQUEST['checkOut'];
 /*** mysql hostname ***/
 $hostname = 'localhost';

 /*** mysql username ***/
 $username = '***********';

 /*** mysql password ***/
 $password = '**********';

$conn = new PDO("mysql:host=$hostname;dbname=sv", $username, $password);
    /*** The SQL SELECT statement ***/

if(!empty($currentlocation)){
   //$sql2 = "UPDATE history SET ";
   //$query = $conn->prepare($sql2);
   //$query->execute(array(':apptid'=>$apptid, ':locationstart'=>$locationstart));
   $sql = "UPDATE schedule SET currentlocation = ?, currentlocationstart = ? WHERE apptid= ? ";
   $q = $conn->prepare($sql);
   $q->execute(array($currentlocation,$currentlocationstart, $apptid));

}

if(!empty($checkin)){
   $sql = "UPDATE schedule SET currentlocation = ?, currentlocationstart = ? WHERE apptid= ? ";
   $q = $conn->prepare($sql);
   $q->execute(array($checkin,$currentlocationstart, $apptid));
   //$sql2 = "insert into history (apptid, locationstart) VALUES (:apptid,:locationstart)";
   //$query = $conn->prepare($sql2);
   //$query->execute(array(':apptid'=>$apptid, ':locationstart'=>$locationstart));
}

if(!empty($checkout)){
   $sql = "UPDATE schedule SET currentlocation = ?, currentlocationstart = ? WHERE apptid= ? ";
   $q = $conn->prepare($sql);
   $q->execute(array($checkout,$currentlocationstart, $apptid));
}
?> 
```

Javascript

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>

<script type="text/javascript">
$(document).ready(function() {
$('.locationSelect').hide();  // Hide all Selects on screen
$('.finished').hide();        // Hide all checked Out divs on screen

$('.checkIn').click(function() {
    var $e = $(this);
    var data = $e.data("param").split('-')[1] ;
    // gets the id  of button  (1 for the first button)
    // You can map this to the corresponding button in database...
    $.ajax({
        type: "POST",
        url: "changeloc.php",
        // Data used to set the values in Database
        data: { "checkIn" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.hide();
            // Get the immediate form for the button
            // find the select inside it and show...
            $e.nextAll('form').first().find('.location').show();
        }
    });
});

$('.locationSelect').change(function() {
    $e = $(this);
    var data = $e.data("param").split('-')[1] ;
    // gets the id  of select (1 for the first select)
    // You can map this to the corresponding select in database...
    $.ajax({
        type: "POST",
        url: "changeloc.php",
        data: { "locationSelect" : $(this).val(), "selectid" : data},
        success: function() {
            // Do something here
        }
    });
});
$('.locationSelect option[value="CheckOut"]').click(function() {
    var $e = $(this);
    var data = $e.closest('select').data("param").split('-')[1] ;
    // gets the id  of select (1 for the first select)
    // You can map this to the corresponding select in database...
    // from which checkout was processed
    $.ajax({
        type: "POST",
        url: "changeloc.php",
        data: { "checkOut" : $(this).val(), "selectid" : data},
        success: function() {
            // Get the immediate form for the option
            // find the first finished div sibling of form
            // and then show it..
            $e.closest('form').nextAll('.finished').first().show();
            // Hide the current select in which the option was selected
            $e.closest('.locationSelect').hide();
            alert('done');
        },
        error: function(request) {
            alert(request.responseText);
        }
    });
});
});
</script> 
```

和html：

```
<button class="checkIn" data-param="button-1">Check In</button>

   <form method='post' class='myForm' action=''>
      <select name='locationSelect' class='locationSelect' data-param="location-1">
        <option value='1'>Exam Room 1</option>
        <option value='2'>Exam Room 2</option>
        <option value='3'>Exam Room 3</option>
        <option value='4'>Exam Room 4</option>
        <option value='CheckOut'>Check Out</option>
      </select>
    </form>

<div class='finished' style='color:#ff0000;'>Checked Out</div> 
```

问题是：

1）当用户单击“签**入”**按钮时，该按钮会像应有的那样消失，但没有出现下拉菜单（这可能意味着下拉菜单后不会出现其他任何内容）

2）数据库没有更新任何东西。

感谢您的任何帮助！如果您需要更多，请询问详细信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:01:20.240

代码`$e.nextAll('form').first().find('.location').show();`正在寻找一个带有“location”类的元素，而 html 中的表单有一个带有“locationSelect”类的选择。我认为您希望这两个课程阅读相同。

# haskell - 是否可以注释函数的特殊属性（例如，满射性）？

> ID：13281316
> 
> 赞同：14
> 
> 时间：2012-11-08T01:51:57.553
> 
> 标签：haskell, types, higher-order-functions

假设我有一个高阶函数`f :: (a -> b) -> (a -> b)`。但`f`只有在输入函数是满射的情况下才能正常运行。无论如何，有没有强制这种情况发生在 Haskell 中？例如，我真的希望`f`'s 类型签名是这样的：

```
f :: (Surjective (a -> b)) => (a -> b) -> (a -> b) 
```

但这不起作用，因为我不希望该类型的所有函数都`a -> b`被声明为满射，只有其中一些函数。例如，可能`f`将一个满射函数转换为一个非满射函数。

我们可以将函数包装在一种特殊的数据类型`data Surjective f = Surjective f`中，并定义

```
f :: Surjective (a -> b) -> (a -> b) 
```

但这会使为一个函数分配多个属性变得困难。

在实践中有没有方便的方法来做到这一点？这在理论上是可能的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T14:46:18.603

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T05:03:09.657

如果类型依赖于由其类型唯一确定的值，我们可以在 Haskell 中模拟依赖类型。当然，这不是依赖类型，但有时它可能很有用。

因此，让我们在类型级别构建一种小型建设性集合论。每种类型将代表一个特定的功能，并将由一个值（不包括所有底部的东西）占据。

将 F 定义为满足以下条件的最小集合：

*   `id:: a -> a`位于 F。
*   `term:: a -> ()`位于 F。
*   `init:: Empty -> a`在 F 中（其中 Empty 表示空集）。
*   `p1 :: (a,b) -> a`位于 F。
*   `i1 :: a -> Either a b`位于 F。
*   `flip :: (a,b) -> (b,a)`位于 F。
*   如果两者`f::a -> b`都`g::b -> c`在 F 中，则`g.f :: a -> c`在 F 中。
*   如果两者`f::a -> b`都`g::c -> d`在 F 中，则以下函数在 F 中：

```
 f*g :: (a,c) -> (b,d)
      f*g (x,y) = (f x,g y)
      f + g :: Either a b -> Either c d
      (f+g) (Left x) = f x
      (f+g) (Right y) = g y` 
```

*   （在此处添加其他归纳规则，以便您喜欢的函数可以包含在 F 中。）

集合 F 旨在表示在 Haskell 中类型级别可编码的函数，同时其各种属性如超射性、单射性等可由 Haskell 中的类型级别函数证明。

借助关联类型，我们可以将 F 编码干净，如下所示：

```
class Function f where
    type Dom f :: *
    type Codom f :: *
    apply :: f -> Dom f -> Codom f

data ID a = ID  -- represents id :: a -> a
instance Function (ID a) where
    type Dom (ID a) = a
    type Codom (ID a) = a
    apply _ x = x

data P1 a b = P1 -- represents the projection (a,b) -> a
instance Function (P1 a b) where
    type Dom (P1 a b) = (a,b)
    type Codom (P1 a b) = a
    apply _ (x,y) = x 
```

...

```
data f :.: g = f :.: g  -- represents the composition (f.g)
instance ( Function f
         , Function g
         , Dom f ~ Codom g)
         => Function (f :.: g) where
     type Dom (f :.: g) = Dom g
     type Codom (f :.: g) = Codom f
     apply (f :.: g) x = apply f (apply g x)
 ... 
```

类型级谓词“f 是满射的”可以表示为类实例：

```
class Surjective f where
instance Surjective (ID a)  where
instance Surjective (P1 a b)  where
instance (Surjective f,Surjective g)
     => Surjection (f :.: g) where
 .. 
```

最后，可以定义采用那些可证明的满射函数的高阶函数：

```
surjTrans :: (Function fun,Surjective fun)
             => fun -> Dom fun -> Codom fun
surjTrans surj x = apply surj x 
```

对于注入、同构等也是类似的。例如，可以声明仅将（构造）同构作为参数的高阶函数：

```
isoTrans :: (Function fun,Surjective fun,Injective fun)
            => fun -> Dom fun -> Codom fun
isoTrans iso x = apply iso x 
```

如果转换采用更有趣的形式，那么它必须是一个类方法，并由每个函数的结构递归定义（由其类型唯一确定）。

我当然不是逻辑或 Haskell 方面的专家，我真的很想知道这个理论有多么强大。如果你发现了这个，你能发布一个更新吗？

这是完整的代码：

```
 {-# LANGUAGE UndecidableInstances #-}
{-# LANGUAGE TypeOperators #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE TypeFamilies #-}

infixl 6 :.:
infixl 5 :*:
infixl 4 :+:

data TRUE
data Empty

class Function f where
  type Dom f :: *
  type Codom f :: *
  apply :: f -> Dom f -> Codom f

instance Function (a -> b) where
  type Dom (a->b) = a
  type Codom (a->b) = b
  apply f x = f x

data ID a = ID
data Initial  a = Initial
data Terminal a = Terminal
data P1 a b = P1
data P2 a b = P2
data I1 a b = I1
data I2 a b = I2
data FLIP a b = FLIP
data COFLIP a b = COFLIP
data f :.: g = f :.: g
data f :*: g = f :*: g
data f :+: g = f :+: g

instance Function (ID a) where
  type Dom (ID a) = a
  type Codom (ID a) = a
  apply _ x = x

instance Function (Initial a) where
  type Dom (Initial a) = Empty
  type Codom (Initial a) = a
  apply _ _ = undefined

instance Function (Terminal a) where
  type Dom (Terminal a) = a
  type Codom (Terminal a) = ()
  apply _ _ = ()

instance Function (P1 a b) where
  type Dom (P1 a b) = (a,b)
  type Codom (P1 a b) = a
  apply _ (x,y) = x

instance Function (P2 a b) where
  type Dom (P2 a b) = (a,b)
  type Codom (P2 a b) = b
  apply _ (x,y) = y

instance Function (I1 a b) where
  type Dom (I1 a b) = a
  type Codom (I1 a b) = Either a b
  apply _ x = Left x

instance Function (I2 a b) where
  type Dom (I2 a b) = b
  type Codom (I2 a b) = Either a b
  apply _ y = Right y

instance Function (FLIP a b) where
  type Dom (FLIP a b) = (a,b)
  type Codom (FLIP a b) = (b,a)
  apply _ (x,y) = (y,x)

instance Function (COFLIP a b)  where
  type Dom (COFLIP a b) = Either a b
  type Codom (COFLIP a b) = Either b a
  apply _ (Left x) = Right x
  apply _ (Right y) = Left y

instance ( Function f
         , Function g
         , Dom f ~ Codom g)
         => Function (f :.: g) where
  type Dom (f :.: g) = Dom g
  type Codom (f :.: g) = Codom f
  apply (f :.: g) x = apply f (apply g x)

instance (Function f, Function g)
         => Function (f :*: g)  where
  type Dom (f :*: g) = (Dom f,Dom g)
  type Codom (f :*: g) = (Codom f,Codom g)
  apply (f :*: g) (x,y) = (apply f x,apply g y)

instance (Function f, Function g)
         => Function (f :+: g) where
  type Dom (f :+: g) = Either (Dom f) (Dom g)
  type Codom (f :+: g) = Either (Codom f) (Codom g)
  apply (f :+: g) (Left x)  = Left (apply f x)
  apply (f :+: g) (Right y) = Right (apply g y)

class Surjective f where
class Injective f  where
class Isomorphism f where

instance Surjective (ID a)  where
instance Surjective (Terminal a)  where
instance Surjective (P1 a b)  where
instance Surjective (P2 a b)  where
instance Surjective (FLIP a b)  where
instance Surjective (COFLIP a b) where
instance (Surjective f,Surjective g)
         => Surjective (f :.: g) where
instance (Surjective f ,Surjective g )
         => Surjective (f :*: g)  where
instance (Surjective f,Surjective g )
         => Surjective (f :+: g)  where

instance Injective (ID a)  where
instance Injective (Initial a)  where
instance Injective (I1 a b)  where
instance Injective (I2 a b)  where
instance Injective (FLIP a b)  where
instance Injective (COFLIP a b)  where
instance (Injective f,Injective g)
         => Injective (f :.: g) where
instance (Injective f ,Injective g )
         => Injective (f :*: g)  where
instance (Injective f,Injective g )
         => Injective (f :+: g)  where

instance (Surjective f,Injective f)
         => Isomorphism f  where

surjTrans :: (Function fun,Surjective fun)
             => fun -> Dom fun -> Codom fun
surjTrans surj x = apply surj x

injTrans :: (Function fun,Injective fun)
            => fun -> Dom fun -> Codom fun
injTrans inj x = apply inj x

isoTrans :: (Function fun,Isomorphism fun)
            => fun -> Dom fun -> Codom fun
isoTrans iso x = apply iso x

g1 :: FLIP a b
g1 = FLIP

g2 :: FLIP a b :*: P1 c d
g2 = FLIP :*: P1

g3 :: FLIP a b :*: P1 c d :.: P2 e (c,d)
g3 = FLIP :*: P1 :.: P2

i1 :: I1 a b
i1 = I1 
```

例如，以下是一些输出（查看 Haskell 在类型检查时如何“证明”这些递归属性）：

```
 isoTrans  g1 (1,2)
==> (2,1)
surjTrans g2 ((1,2),(3,4))
==> ((2,1),3)
injTrans  g2 ((1,2),(3,4))
==>     No instance for (Injective (P1 c0 d0)) ..

surjTrans i1 1 :: Either Int Int
==>     No instance for (Surjective (I1 Int Int)) ..
injTrans i1 1 :: Either Int Int
==>  Left 1
isoTrans i1 1 :: Either Int Int
==>      No instance for (Surjective (I1 Int Int)) .. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T02:07:03.447

首先，您通常使用`newtype`声明而不是`data`声明。GHC 使用 newtypes 进行类型检查，然后在编译期间有效地擦除它们，因此生成的代码更高效。

使用`newtype`这种注释是 Haskell 中的一种常见解决方案，尽管正如您所指出的，如果您需要围绕一个值包装许多属性，这并不完全令人满意。

您可以`newtype`与类型类结合使用。`Surjective`在您想要的任何包装器上为类型类声明一个类型类实例，`newtype`并在函数中匹配该类型类，例如`f`，而不需要特定的`newtype`包装器。

当然，更好的是让编译器检查函数是否真的是满射的……但这是一个相当开放的研究问题。:-)

# node.js - express 中的资产路径

> ID：13281317
> 
> 赞同：3
> 
> 时间：2012-11-08T01:52:24.307
> 
> 标签：node.js, express

我使用以下内容在我的节点应用程序中声明我的资产路径：

```
app.use("/styles", express.static(__dirname + '/public/styles'));
app.use("/images", express.static(__dirname + '/public/images'));
app.use("/script", express.static(__dirname + '/public/script')); 
```

...但它似乎是在资产路径中添加 url 路径（例如'/search'），然后通过逻辑传递它。所有路径都是相对于可移植性的 - 我该如何避免这种情况？

提前致谢... ：）

詹姆士

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T02:06:57.783

只需这样做，您就可以完成：

```
app.use(express.static(__dirname + '/public')); 
```

# c - 读取文件和操作队列

> ID：13281326
> 
> 赞同：0
> 
> 时间：2012-11-08T01:53:18.277
> 
> 标签：c, io, queue

所以我正在尝试编写这个函数，read_deck，它是：

```
void read_deck(char *filename, queue *deck) 
```

这个函数接受一个文件名的字符串。它打开文件文件名以供阅读。然后它一次一张地将卡片读入队列卡组，以便它们出现在文件中的顺序与它们出现在队列中的顺序相同。读取卡片直到到达文件末尾，此时文件关闭并且函数返回。

```
int main(int argc, char **argv) 
```

Main 将设置队列甲板并使用 read_deck 用第一个命令行参数指定的文件中的卡片填充它。然后它将打印牌组大小，其中的所有卡片（函数 length 和 print_list）将对此有用。

我目前的计划：未完成，不知道如何进一步处理

```
 #include "libcardlist.h"
#include <stdio.h>

void read_deck(char *filename, queue *deck);

int main(int argc, char **argv){

    char *filename = argv[1];
    FILE *f = fopen(filename, "r"); // open file
    char buf[1024]; 
    stack *deck = new_stack(); // new deck
    int status;
    card cards;

    //how to set up the queue
    read_deck(  f , deck  ); // what would be the fields here?

}
void read_deck(char *filename, queue *deck){
   int status;
   card cards;
  for (status = fscanf(f,"%s", buf); 
         status != EOF; 
         status = fscanf(f,"%s", buf))
         {
            fscanf (f,"%d%c", &cards.face,&cards.suit);
            printf (" %d%c\n",cards.face,cards.suit);
         }
} 
```

对于我当前的 read_deck，由于某种原因，它只打印其他卡片。这是所需的输出：

```
gcc p2.c libcardlist.c
lila [program1]% cat smalldeck.cards 
14S
2D
13C
10H
5H
11C
13S
4D
13D
lila [program1]% a.out smalldeck.cards
Deck 9: 14S 2D 13C 10H 5H 11C 13S 4D 13D 
```

我现在的输出：

```
 2D
 10H
 11C
 4D
 4D 
```

libcardlist.c（正确）

```
/* This file contains functions to operate on a lists, stacks, and
   queues of cards */

#include <stdio.h>
#include <stdlib.h>

/* Report an error and exit the program with a failure */
void cardlist_error(char *msg){
  fprintf(stderr,"libcardlist: %s\n",msg);
  exit(EXIT_FAILURE);
}

/* Basic type for a card */
typedef struct {
  int face;         /* 2-14 */
  char suit;            /* C H S D */
} card;

/* Convert a string like 14D into a card */
card str2card(char *buf){
  card c;
  sscanf(buf,"%d%c",&c.face,&c.suit);
  return c;
}

/* Given a card c, put a string like 14D in buf representing it.  Good
   for printing  */
char *card2str(card c, char *buf){
  sprintf(buf, "%d%c", c.face, c.suit);
  return buf;
}

/* Lists are of cards */
typedef card node_data;

/* List Functions */

/* Basic type for a list: data and next */
typedef struct node {
  node_data data;
  struct node *next;
} node;

/* Returns how many nodes are in a list */
int length(node *l){
  int n = 0;
  while(l != NULL){
    n++;
    l = l->next;
  }
  return n;
}

/* Reverses a list, creates a fresh and distinct copy of the list */
node *reverse(node *l){
  node *r = NULL;
  while(l != NULL){
    node *new = malloc(sizeof(node));
    new->data = l->data;
    new->next = r;
    r = new;
    l = l->next;
  }
  return r;
}

/* Print a list of cards to a file pointer */
void print_list(node *l, FILE *f){
  char buf[1024];       /* Use this for string conversion */
  while(l != NULL){     /* Til end of list */
    fprintf(f,"%s ", card2str(l->data,buf)); /* Convert to string and print */
    l = l->next;                 /* Advance to next */
  }
  fprintf(f,"\n");
}

/* Stack functions */

/* Basic type for a stack */
typedef struct stack {
  node *top;
} stack;

/* Make a new stack: allocate memory and set its top pointer to
   initially be NULL for an empty stack */
stack *new_stack(){
  stack *s = malloc(sizeof(stack));
  s->top = NULL;
  return s;
}

/* Return 1 if the stack is empty and 0 otherwise  */
int stack_empty(stack *s){
  return s->top == NULL;
}

/* Push something on the top of the stack */
void stack_push(stack *s, node_data p){
  node *new = malloc(sizeof(node)); /* New node for the new data */
  new->data = p;            /* New node gets the new data */
  new->next = s->top;           /* new will be on top, point it at current top */
  s->top = new;             /* new is on top now */
}

/* Remove the top element of the stack */
void stack_pop(stack *s){
  if(!stack_empty(s)){      /* If the stack is not empty */
    node *remove = s->top;  /* Track what's being removed */
    s->top = s->top->next;  /* Advance the top down one */
    free(remove);       /* Get rid of the old top node */
  }
}

/* Retrive data from the top of the stack */
node_data stack_top(stack *s){
  if(!stack_empty(s)){      /* If the stack is not empty */
    return (s->top->data);  /* Return the data */
  }
  else{             /* Otherwise there is an error */
    cardlist_error("stack_top called on empty stack");
  }
}

/* Queue functions */

/* Basic type for the queue data structure */
typedef struct queue {
  node *front;          /* Front of the line */
  node *rear;           /* Back of the line */
} queue;

/* Make a new queue which is initially empty */
queue *new_queue(){
  queue *q = malloc(sizeof(queue));
  q->front = NULL;
  q->rear = NULL;
  return q;
}

/* Returns 1 if the queue is empty and 0 otherwise */
int queue_empty(queue *q){
  return q->front == NULL;
}

/* Add something to the front of the queue */
void queue_add(queue *q, node_data p){
  node *new = malloc(sizeof(node)); /* Adding a new node */
  new->data = p;            /* Set new node's data */
  new->next = NULL;         /* It will be the end of the line */
  if(queue_empty(q)){       /* First node to be added */
    q->front = new;     /* Front and back are new node */
    q->rear = new;
  }
  else {            /* Not first node */
    q->rear->next = new;    /* Current rear is second to last */
    q->rear = new;      /* new guy is last */
  }
}

/* Remove first element of the queue */
void queue_remove(queue *q){
  if(!queue_empty(q)){      /* If the queue is not empty */
    node *remove = q->front;    /* Track who is being removed */
    q->front = q->front->next;  /* Second in line is now at front */
    free(remove);       /* Remove the old front */
  }
}

/* Get the data for the front of the queue */
node_data queue_front(queue *q){
  if(!queue_empty(q)){      /* If queue is not empty */
    return (q->front->data);    /* Get data for front node */
  }
  else{             /* Otherwise this is an error */
    cardlist_error("queue_front called on empty queue");
  }
} 
```

错误：

```
segmentation fault 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:06:24.570

您的`read_deck`函数想要从输入文件中读取，但您已经在 中打开了文件`main()`，因此将 传递`FILE *f`给`read_deck`。原型变为：

```
void read_deck(FILE *f, queue *deck); 
```

你可以这样称呼它：

```
read_deck(f, deck); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:25:53.137

read_deck 中的 for 循环每次迭代调用 fscanf 两次。一次在 for 语句中，一次在循环体中。（在执行开始时加上一次，但每次函数调用只运行一次。）`fscanf(f,"%s", buf)`调用写入`*buf`; 虽然没有对数据做任何事情，但这些调用确实消耗了文件的一部分。该`fscanf (f,"%d%c", &cards.face,&cards.suit);`线路正在抓取数据，但只有其他呼叫未使用的线路。

所以你必须选择一个。`fscanf`从 for 循环中删除调用（并相应地更新状态检查），或使用`sscanf`从`*buf`. 我推荐前者。

# c# - 从 Windows 应用商店/Metro C# 应用程序引用 F# 库

> ID：13281340
> 
> 赞同：3
> 
> 时间：2012-11-08T01:54:29.883
> 
> 标签：c#, f#, microsoft-metro, windows-store

我正在尝试在 F#中做一些[SharpDX 。](http://sharpdx.org/)SharpDX 不能导入便携式库，只能导入标准 .NET 库。

在解决[了一个明显的错误](http://connect.microsoft.com/VisualStudio/feedback/details/761306/cannot-add-reference-to-portable-f-library-from-portable-c-library#tabs)以从 C# 应用程序引用 F# 库之后，我现在在执行时遇到了另一个问题：

`Could not load file or assembly 'FSharp.Core, Version=4.3.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.`

这是一个熟悉的异常，但我不知道在 Visual Studio 2012 中会导致什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:32:53.517

据我所知，您只能在 Windows Store 项目中引用 F# Portable Libraries，而不是常规的 f# dll，这是第一件事。
第二个，正如错误所说 - 你必须引用 FSharp.Core 库。它位于此处：

> C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime.NETPortable\FSharp.Core.dll

我在这里用更多信息回答了类似的问题：
[https ://stackoverflow.com/a/13064798/574062](https://stackoverflow.com/a/13064798/574062)

# c# - 如何在 C# 中将字符串从“GBK”转换为“UTF-8”？

> ID：13281341
> 
> 赞同：1
> 
> 时间：2012-11-08T01:54:31.923
> 
> 标签：c#, email

我在开发我的电子邮件客户端时遇到了问题。当我从我的应用程序向电子邮件服务器发送带有附件名称的包含中文的电子邮件并从服务器返回时，我发现中文电子邮件附件的名称是混乱的代码.但它就在电子邮件服务器上。此外，当我从其他客户端发送带有附件名称的包含中文的电子邮件时，一切正常。感谢你所做的一切！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-23T12:18:35.167

你的意思是字符串存储在字节数组中？

```
 string strSource = "abcdefg";
        byte[] array2=Encoding.GetEncoding("gbk").GetBytes(strSource);

        //get string from gbk
        string str = Encoding.GetEncoding("gbk").GetString(array2);

        //convert string to utf-8
        byte[] array3 = Encoding.UTF8.GetBytes(str); 
```

=================答案在下面编辑，2016.08.01=============

您应该用gbk阅读附件的中文名称，然后将电子邮件内容转发到其他地方使用utf-8或gbk。你可以试一试。

# qt - 在 Qt 中的两个表单之间传递值

> ID：13281349
> 
> 赞同：1
> 
> 时间：2012-11-08T01:55:20.377
> 
> 标签：qt

我有一个`lineEdit`名为. 在名为的第二种形式中，我有一个被调用和一个被调用的确定按钮。`myVal``MainWindow``SecondWindow``lineEdit``myVal2``OKButton`

我认为最好的解决方案是使用信号和插槽。我搜索了不同的网站，但我尝试使用。 `connect(ui.OKButton, SIGNAL(clicked()), MainWindow, SLOT(transferValue));`

但是，我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:37:03.000

在我看来，您的第二个窗口应该是 QDialog 的子类，如上所述。

然后，如果您想检索您的 LineEdit 值，只需提供一个访问器：

```
class MyDialog : public QDialog {
public:
    QString myVal() const { return ui->lineEdit->text(); }
}; 
```

要显示您的对话框，请使用 exec 并检查返回值：

```
MyDialog dialog;
if (dialog.exec() == QDialog::Accepted) { /* The user clicked Ok */ 
    const QString val = dialog.myVal();
} 
```

您的第二个窗口不需要知道您的 MainWindow 及其内部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:39:30.517

最佳解决方案将取决于您的第二个窗口的性质。

如果您的第二个窗口是无模式对话框，那么信号和插槽将是您的选择。将 OK 按钮的`clicked()`信号连接到主窗口实现的插槽。在您的插槽内，读取第二个窗口中行编辑的值并将其复制到主窗口中的行编辑。

如果您的第二个窗口是模态对话框，那么您实际上并不需要信号和插槽。您应该使用`QDialog`派生类并使用对`exec()`. 当此函数返回时，返回值指示用户是单击确定还是取消。根据此值，您可以决定是否应该复制行编辑值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T07:32:22.067

我会明确地覆盖 SecondWindow 的构造函数并将 MainWindow 的实例作为参数传递，然后您可以不受限制地访问 MainWindow 类的公共变量。

# jquery - Jquery html 不工作不知道为什么？

> ID：13281352
> 
> 赞同：1
> 
> 时间：2012-11-08T01:55:33.923
> 
> 标签：jquery, html, jquery-ui, jquery-mobile, jquery-selectors

这是html

```
<!DOCTYPE html>
    <html>
    <title>Ingredient</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="themes/receta.min.css" />
      <link rel="stylesheet" href="css/jquery.mobile.structure-1.1.0.min.css" /> 
      <script src="js/jquery-1.7.1.min.js"></script> 
      <script src="js/jquery.mobile-1.1.0.min.js"></script> 
      <script type="text/javascript" charset="utf-8" src="js/ingredients.js"></script>  

      <h1><center>INGREDIENTES</h1>
    <ul>
     <li onclick="this.parentNode.removeChild(this);">
      <input type="hidden" name="ingredients[]" value="Cheese" />
      Cheese
     </li>
     <li onclick="this.parentNode.removeChild(this);">
      <input type="hidden" name="ingredients[]" value="Ham" />
      Ham
     </li>
    </ul>
    <select onchange="selectIngredient(this);">
     <option value="Cheese">Cheese</option>
     <option value="Olives">Olives</option>
     <option value="Pepperoni">Pepperoni</option>
     <option value="Milk">Milk</option>
    </select>

      </html> 
```

这是jquery

```
 function selectIngredient(select)
    {
      var $ul = $(select).prev('ul');

      if ($ul.find('input[value=' + $(select).val() + ']').length == 0)
        $ul.append('<li onclick="$(this).remove();">' +
          '<input type="hidden" name="ingredients[]" value="' + 
          $(select).val() + '" /> ' +
          $(select).find('option[selected]').text() + '</li>');
    } 
```

![这是我在选择另一种成分时需要看到的，这种成分应该与其他成分一起使用](../Images/e5c28e38e344f5991bab5e417610be81.png)

当我运行这个 html 和 jquery 时它不起作用。如果我选择它，它应该将另一种成分添加到列表中，但它不会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:02:25.130

我认为这里：

```
$(select).find('option[selected]').text() 
```

你实际上是这个意思：

```
$(select).find('option:selected').text() 
```

但是为什么不再使用`$(select).val()`呢？在您的 HTML 中，文本和值是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T02:10:51.740

## *[jsBin demo](http://jsbin.com/ujitas/3/edit)*

**(purified) HTML**

```
<h1>INGREDIENTES</h1>
<ul>
 <li>
  <input type="hidden" name="ingredients[]" value="Cheese" />
  Cheese
 </li>
 <li>
  <input type="hidden" name="ingredients[]" value="Ham" />
  Ham
 </li>
</ul>

<select>
 <option value="Cheese">Cheese</option>
 <option value="Olives">Olives</option>
 <option value="Pepperoni">Pepperoni</option>
 <option value="Milk">Milk</option>
</select> 
```

**(funnyfied) jQ**

```
function selectIngredient(select){

      var selVal = $(select).val();
      var $ul    = $(select).prev('ul');
      var exists = $ul.find('input[value=' + selVal +']').length;

      if ( !exists ){        
          $ul.append('<li>' +
          '<input type="hidden" name="ingredients[]" value="' + selVal + '" /> ' +
          selVal + '</li>');        
      }
}

$('ul').on('click','li',function(){
   $(this).remove();
});

$('select').change(function(){
   selectIngredient(this);
}); 
```

If you like it more structured you can use:

```
 var input = $('<input />',{
          type : 'hidden',
          name : 'ingredients[]',
          value: selVal
    });
    $('<li />', { text: selVal }).prepend( input ).appendTo( $ul ); 
```

# java - jcombobox 将它与 jbutton 一起使用

> ID：13281358
> 
> 赞同：0
> 
> 时间：2012-11-08T01:56:18.743
> 
> 标签：java, swing, jbutton, actionlistener, jcombobox

我想知道如何设置与 Jbutton 一起使用的 JComboBox。在 JcomboBox 中选择某个对象会在按下按钮时更改计算。这是我到目前为止所拥有的，但它似乎不起作用，我不确定它有什么问题。

```
 //JComboBox objectList = new JComboBox();
    String[] objectStrings = { "Triangle", "Box", "Done" };
    JComboBox objectList = new JComboBox(objectStrings);
    //objectList.setModel(new DefaultComboBoxModel(new String[]{"Triangle", "Box", "Done"}));
    objectList.setSelectedIndex(0);
    final int object = objectList.getSelectedIndex();
    objectList.setBounds(180, 7, 86, 20);
    objectList.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if (object == 2) {
                System.exit(0);
            }
        }
    });

    frmPrestonPalecekWeek.getContentPane().add(objectList);

    JButton btnCalculate = new JButton("Calculate!");
    btnCalculate.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            String box;
            String done;
            Box a;
            Triangle b;
            b = new Triangle(Double.parseDouble(txtSidea.getText()), Double.parseDouble(txtSideb.getText()), Double.parseDouble(txtSidec.getText()));
            a = new Box(Double.parseDouble(txtSidea.getText()), Double.parseDouble(txtSideb.getText()), Double.parseDouble(txtSidec.getText()));
            if (object  == 0) {
            txtOutput.setText("this is the volume " + a.getVolume());
            }
            else if (object == 2) {
                System.exit(0);
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:04:00.167

在按钮的动作侦听器中，您应该检查在组合框中选择的项目，而不是使用在初始化期间设置的索引 ( `final int object = objectList.getSelectedIndex()`)，因为当组合选择更改时它不会更改。这个变量甚至被标记为`final`。

例如你可以做类似的事情：

```
btnCalculate.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
       int selectedIndex = objectList.getSelectedIndex();
       if (selectedIndex == 0) {
           ...
       } else if selectedIndex == 2) {
          ...       
       }
    }
} 
```

# scala - 如何使用 Selenium WebDriverWait 获得更有意义的失败消息/断言？

> ID：13281361
> 
> 赞同：0
> 
> 时间：2012-11-08T01:57:02.403
> 
> 标签：scala, testing, selenium, webdriver, qa

当等待条件超时时，我收到非常无用的消息：

```
Tests in error: 
    myTestName(mySuiteName): Timed out after 10 seconds waiting for              
    com.mycompany.qa.core.SeleniumWebTesting$$anon$1@6818c458 
```

这是**斯卡拉**代码：

```
 def pageContains(locatorType: String, content: String) {
    locatorType match {
      case "TagName" =>
        val tag = new WebDriverWait(driver, defaultWait).until(
          new ExpectedCondition[Boolean] {
// it times out on this line below, but I can't send out any assert failure or useful message
            override def apply(driver: WebDriver) = driver.findElement(By.tagName(content)).isDisplayed
          }
        )
      case _ =>
        throw new UnsupportedOperationException("No valid locator strategy received (try a valid one, like class name)")
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:05:10.143

您可以使用**withMessage()**方法。

```
WebDriverWait wait = new WebDriverWait(driver, timeout);
wait.withMessage("Your desired Message");
wait.until(new ExpectedConditions(boolean)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:42:12.167

如果您使用的是 scala，我们在[http://code.google.com/p/driveby/方面取得了巨大成功](http://code.google.com/p/driveby/)

# filepicker.io - filepicker.io 是否将 s3 文件设置为公开？

> ID：13281367
> 
> 赞同：5
> 
> 时间：2012-11-08T01:57:44.023
> 
> 标签：filepicker.io

在上传到 Amazon S3 时如何让 Filepicker 设置适当的权限，以便文件在我的 s3 存储桶中是“公共”的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T01:59:19.123

您可以通过将您的 s3 存储桶变成一个静态网站来做到这一点。

使用 Amazon，转到存储桶的属性。在属性中，网站选项卡有一个复选框，可以让您的存储桶成为静态网站。

如果您需要所有文件都是 https，那么您可以将以下安全策略添加到您的存储桶中。

```
{
    "Statement": [
        {
               "Sid": "AllowPublicRead",
               "Effect": "Allow",
                "Principal": {
                        "AWS": "*"
                },
                "Action": "s3:GetObject",
                "Resource": "arn:aws:s3:::NAME_OF_BUCKET_HERE/*"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:12:59.747

[https://developers.filepicker.io/docs/web/#store](https://developers.filepicker.io/docs/web/#store)

```
filepicker.store(input, [options], onSuccess(FPFile){}, onError(FPError){}, onProgress(percent){}) 
```

> 公共访问
> 
> **{访问：'公共'}**
> 
> 指示文件应以允许公共访问直接访问底层文件存储的方式存储。例如，如果文件存储在 S3 上，这将允许直接使用 S3 url。这对用户从 FPUrl 读取的能力没有影响。默认为“私人”。

# html - 使用安全的 html 模板在 gwt 中插入空格

> ID：13281370
> 
> 赞同：0
> 
> 时间：2012-11-08T01:58:31.027
> 
> 标签：html, gwt

我有以下 gwt html 模板，以便在我的项目中设置面板的标题。

```
@Template("<div>{0}<span style=\"font-size: 11px;\">{1}</span></div>")
 SafeHtml method1(String title,String subtitle); 
```

例如，如果 title="Hello" 和 subtitle="World" 则上述格式的输出文本为 -> HelloWorld

> 我希望上述格式的输出为“Hello”和“World”之间的空格-> Hello World
> 
> 当我们在 HTML 中使用 ' ' 时，如何在上述 div 之间插入一个空格？
> 
> 因为这是一个动态打印标题的模板，所以我不能使用 css 作为这个标题。我尝试使用`&amp;`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:33:03.100

以下不起作用吗？（即在 之后插入一个空格`{0}`）

```
@Template("<div>{0} <span style=\"font-size: 11px;\">{1}</span></div>")
SafeHtml method1(String title,String subtitle); 
```

或者你可以使用`&nbsp;`：

```
@Template("<div>{0}&nbsp;<span style=\"font-size: 11px;\">{1}</span></div>")
SafeHtml method1(String title,String subtitle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:21:38.697

如果`&nbsp;`不起作用，您可以`padding-left: 5px`在跨度上添加您的样式。当您说您不能使用 css 作为标题时，我不确定您的意思。

# javascript - RGraph：x轴上的奇怪标记

> ID：13281372
> 
> 赞同：0
> 
> 时间：2012-11-08T01:58:48.927
> 
> 标签：javascript, rgraph

我的[RGraph](http://www.rgraph.net/) x 轴上有这些奇怪的标记。知道是什么原因造成的吗？

这是一个截图（我用红色箭头标记了不需要的标记）

![截屏](../Images/84971369f06e4970ad6133e615ef1623.png)

这是我打印该行的 JavaScript 代码。

```
function PrintLine(labels, tooltips, data, color, legend) {
  var line = new RGraph.Line(CANVAS_ID, data);

  line.Set('chart.labels', labels);
  line.Set('chart.background.grid.hlines', false);
  line.Set('chart.background.grid.autofit.numvlines', labels.length-1);
  if(legend[0].length > 0) {
    line.Set('chart.colors', legend[0]);
    line.Set('chart.key', legend[1]);
    line.Set('chart.key.position', 'gutter');
    line.Set('chart.key.position.gutter.boxed', false);
    line.Set('chart.key.position.x', 400);
  }

  line.Set('chart.tooltips', tooltips);
  line.Set('chart.shadow', true);
  line.Set('chart.ylabels', false);
  line.Draw();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:29:15.027

看起来你可能有一个以前的图表 - 你可以通过清除 ObjectRegistry 来摆脱它：

RGraph.ObjectRegistry.Clear();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T22:24:32.983

将线设置 chart.numxticks 调整为您想要的 X 刻度线数 .set('chart.numxticks',n)

# jquery - Jquery全选/取消选择复选框

> ID：13281374
> 
> 赞同：0
> 
> 时间：2012-11-08T01:59:03.303
> 
> 标签：jquery, checkbox, html-table

我目前有这个显示记录列表，下面有几个按钮。其中两个被称为针对复选框的“全选”和“全部清除”。我想知道如何实现代码来选择所有存在的复选框并取消选择它们，有点像切换但在两个单独的按钮上。

```
function showAll(qstring,qtype){
 $("#vsdiv").show();
 var myurl="scripts/searchadmin.php"; 
 $.ajax({
  url: myurl, dataType:'json',data:{querystring:qstring,querytype:qtype},
  success: function(member){
   $("#resultstable").append('<tr class="yellow">'+
                                        '<th>#REC</th><th>JOINED</th><th>USER NAME</th>'+
                                        '<th>CONTACT</th><th>ADDRESS</th><th>PHONE</th>'+
                                        '<th>EMAIL</th><th>STATUS</th><th>SELECT</th></tr>');
   var j=0;var totrecs=1;
   for(var i=0;i<10;i++){
    $("#resultstable").append('<tr class="trow'+j+'">'+
                  '<td class="ids" id="z'+i+'">'+totrecs+'</td>'+
          '<td>'+member[i].jdate+'</td>'+
          '<td class="users"     id="username'+i+'">'+member[i].username+'</td>'+
          '<td id="contact'+i+'">'+member[i].fname+' '+member[i].lname+'</td>'+
          '<td id="myaddress'+i+'">'+member[i].address1+' '+member[i].town+'</td>'+
          '<td id="phone'+i+'">'+member[i].phone+'</td>'+
          '<td id="email'+i+'">'+member[i].email+'</td>'+
          '<td id="status'+i+'">'+member[i].status+'</td>'+
          '<td><input type="checkbox" name="whome" id="showMe'+i+'"'+
                                         'class="boxes" onclick="getMe('+i+')" /></td></tr>');  
                                         $('#sr').html('Showing 1 of '+member.length+' Members')

});

  totrecs++;
  j++;
 }
}
});
} 
```

任何关于我应该采取的方法的想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:13:40.207

```
$(function () {
$('#selectall').click(
    function() {
        $('.boxes').prop('checked', true);
    }
);
});

$(function () {
$('#clearall').click(
    function() {
        $('.boxes').prop('checked', false);
        }
     );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:17:45.740

```
$(document).ready(function () {
  $('#selectall').click(function() {
     $('.boxes').attr('checked','checked');
  });
  $('#clearall').click(function() {
    $('.boxes').removeAttr('checked');
  });
}); 
```

[演示](http://jsfiddle.net/PGRNT/)

# c++ - 读取用户辅助注册表项 C++

> ID：13281376
> 
> 赞同：0
> 
> 时间：2012-11-08T01:59:26.630
> 
> 标签：c++, registry

出于某种原因，当我尝试使用`keyRegOpenKey()`该函数打开注册表时返回错误（它返回数字 2）。我怎样才能解决这个问题？我的 IDE 是代码块，我正在使用 Windows XP 机器。提前致谢！

```
#include <iostream>
#include <windows.h>

using namespace std;

int main()
{
    //{75048700-ef-11-d0-9888-006097deac}
    HKEY var;
    char bob[1900];
    int k;
    k = RegOpenKey(HKEY_CURRENT_USER,"software\\microsoft\\windows\\currentVersion\\explorer\\UserAssist\\{75048700-ef-11-d0-9888-006097deac}\\count",&var);

    if (k==ERROR_SUCCESS)
    {
        cout<<"CALL 1 WAS SUCCESSFULL : "<<var<<" "<<k<<endl;
        if (RegEnumKey(var,0,bob,200)==ERROR_SUCCESS)
        {
            cout<<"CALL 2 WAS SUCCESSFULL "<<bob<<endl;
        }
        else
        {
            cout<<"CALL 2 FAILED: "<<bob<<endl;
        }
    }
    else
    {
        cout<<"CALL WAS NOT SUCCESSFULL "<<var<<" "<<k<<endl;
    }

    RegCloseKey(var);

    return 0;
} 
```

# python - Python：将字典值转换为列表

> ID：13281377
> 
> 赞同：0
> 
> 时间：2012-11-08T01:59:32.293
> 
> 标签：python, dictionary

如果我有`d = {"key": (5,4,"val1","val2",2)}`我将如何从元组中获取 val1 并将其本身变成一个列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:00:41.490

`[d['key'][2]]`应该做的伎俩...

分解它：

*   `d['key']`从字典中检索元组
*   [2] 下标列表并从中获取所需的项目
*   外括号将最终对象放入列表中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:02:05.803

你的意思是简单的：

```
list(d['key'][2]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:22:17.330

```
from operator import itemgetter

values = map(itemgetter(2), d.values()) 
```

应该是大型词典的最快方式。

即使我们的 BDFL 非常不喜欢那些 map、filter、lambda 构造；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T02:02:34.803

假设您想要字典中*所有键的该位置的值列表：*

```
[value[2] for value in d.values()] 
```

# c# - 设计一个自轮换的通用列表

> ID：13281379
> 
> 赞同：1
> 
> 时间：2012-11-08T01:59:40.637
> 
> 标签：c#, data-structures

我正在寻找类似于 a 的数据结构`List<T>`。

我想要做的是指定这个结构可以容纳的最大项目数，例如 10 个项目。当添加第 11 项时，我想要它做的是删除添加的第一项，将列表中的其余项目向上移动并将第 11 项添加到列表的底部。

当添加另一个项目时，再次删除顶部项目并且所有内容再次向上移动，等等。

.NET 中是否已经存在这样的数据结构？还是我需要自己构建？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:02:58.420

A`Queue<T>`是最接近的。一旦队列达到最大大小，很容易将 a 包装`Queue<T>`在另一个类中以实现头部的自动出列。

# meteor - 如何忽略关于添加观察者的初始结果的预先存在的文件？

> ID：13281381
> 
> 赞同：0
> 
> 时间：2012-11-08T01:59:48.487
> 
> 标签：meteor

我的应用程序正在**使用**`cursor.observe`.

引用[文档](http://docs.meteor.com/#observe)：

> added 将根据需要立即调用以提供查询的初始结果（如果有）。

就我而言，我只想处理在客户生命周期中添加的文档，而对已存在的文档不做任何事情。那么，如何忽略*查询初始结果中***预先存在的文档**呢？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:47:00.717

有一个隐藏的`_suppress_initial`论点`observe`可以解决这个问题：[https ://github.com/oortcloud/unofficial-meteor-faq#why-does-observe-fire-a-bunch-of-added-events-for-existing-documents](https://github.com/oortcloud/unofficial-meteor-faq#why-does-observe-fire-a-bunch-of-added-events-for-existing-documents)*

# html - 检查浏览器是否禁用了离线应用程序缓存

> ID：13281382
> 
> 赞同：1
> 
> 时间：2012-11-08T01:59:58.793
> 
> 标签：html, firefox, offline, browser-history, application-cache

所以我有一个使用ApplicationCache 存储离线数据的应用程序。长话短说，对于没有启用离线数据的用户来说，它正在悄然消亡，最常见的是因为他们关闭了历史记录或正在使用隐私浏览，我想抓住这一点并给用户一个明确的错误。

看来这*可以*通过检查缓存的状态来检测，当没有缓存时它将返回 0 `UNCACHED`......但我不确定这是否意味着还没有缓存*，*或者没有*保证*缓存（并且因为应该有，有问题）。[官方定义](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#application-cache-api)用处不大：

```
UNCACHED (numeric value 0)
The ApplicationCache object's cache host is not associated with an application
cache at this time. 
```

但实际上，`cache.status==0`至少在 Firefox 上中止似乎可以正常工作。我做得对吗，还是有更好的方法？如果有人可以挖掘状态图，则加分。

**更新**：不，如果用户以前从未访问过该页面，它也会返回 0/UNCACHED。嘎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:57:19.323

在 上收听`error`事件`applicationCache`。当它触发时，*其中*`applicationCache.status===applicationCache.UNCACHED`一个原因是缓存被禁用。给用户的消息可能*暗示*缓存已关闭。

# android - 如何在 XML 文件中生成随机数？

> ID：13281384
> 
> 赞同：1
> 
> 时间：2012-11-08T02:00:10.077
> 
> 标签：android, rotation

我正在制作一个在按下按钮时旋转的物体，我希望它旋转 360 度，然后继续旋转一个随机数，这样它每次都会落在不同的地方。这就是我的 xml 文件（称为动画）中的内容，它完美地旋转了 360。

```
 <rotate 
    android:fromDegrees = "0"
    android:toDegrees = "360"
    android:pivotX = "50%"
    android:pivotY = "50%"
    android:startOffset = "0"
    android:duration = "1000" /> 
```

我只需要生成随机值背后的逻辑帮助。

这也是它在我的java中出现的方式

```
 but_spin = (Button)  findViewById(R.id.spin_but);
 final Context mcontext = this;
 but_spin.setOnClickListener(new View.OnClickListener() {
 public void onClick(View arg0) {
      ImageView animated = (ImageView) findViewById(R.id.big_button);
      anime = AnimationUtils.loadAnimation(mcontext, R.anim.anime);
      animated.startAnimation(anime);  
      }}
    ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:20:40.437

你不能在 XML 中做到这一点。手动编码动画，

```
static final Random R = new Random(System.currentTimeMillis());
...
Animation a = new RotateAnimation(0, 360 + R.nextInt(180));
ImageView animated = (ImageView) findViewById(R.id.big_button);
animated.startAnimation(a); 
```

有关详细信息，请参阅[`RotateAnimation`](http://developer.android.com/reference/android/view/animation/RotateAnimation.html)API 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:15:34.053

您不能在 XML 文件中生成随机数。

从代码创建一个 RotateAnimation。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:18:59.597

XML 布局文件包含在应用执行期间不会更改的静态数据。您将需要使用 Java 代码生成一个随机数并根据该值旋转您的可绘制对象。

# php - 使用 PHP 和 javaScript 的登录解决方案的密码哈希

> ID：13281385
> 
> 赞同：4
> 
> 时间：2012-11-08T02:00:29.547
> 
> 标签：php, javascript, login

我知道，出于安全原因，有必要对用户的密码进行散列（使用盐）并将其与存储的散列密码进行比较，因此如果其他人获得散列字符串，他将无法计算回密码或查看把它放在彩虹桌上。

该方法有一部分我不明白。假设我有这个标准的登录表单

```
<form method='post' action='login.php'>
    <input type='text' name='user' />
    <input type='password' name='password' />
    <input type='submit' name='submit' value='login' />
</form> 
```

然后我使用 PHP 登录

```
<?php
    if(isset($_POST['submit'])){
        $username = $_POST['username'];
        $password = sha1($_POST['password']);
        $authorize = $login_object->login($username, $password);
    }
?> 
```

并且，在幕后，`$login_object`负责对数据库进行身份验证并返回真/假。（我做了这个对象，我有真正有用的对象来做这个）

但这意味着`POST request`原始旅行中的密码，未经哈希处理且不安全！任何人都可以截获真正的密码！

所以我在想的是我应该在发送密码之前使用javascript对密码进行哈希处理。我将有一个隐藏字段`<input type='hidden' name='real_password' value='' />`并让 javaScript 复制名为密码的输入的值，对其进行哈希处理，将其放入 real_password 隐藏输入中并将密码字段空白。这样，`POST request`将拥有散列密码，而不是原始的、不安全的原始密码。

我对我所说的是否正确，或者我应该只对 php 进行哈希处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:08:22.543

散列可以保护服务器端的数据。要保护到服务器的数据流，请使用 HTTPS。在这方面，密码或其哈希是否在网络上被盗（并随后被复制）没有区别。HTTPS 还授予证书以确保在用户的浏览器中显示挂锁（切记不要在未经适当认证的页面中输入重要密码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T02:12:29.627

我的评论，作为答案；）

如果您使用 Javascript 对密码进行哈希处理，那么登录所需的实际密码将成为哈希密码，该密码仍然通过原始网络传输且未加密。要将密码从用户的浏览器安全地传输到您的服务器，您需要使用 SSL。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T02:16:34.390

正如许多评论者所说，安装 SSL 证书将防止任何窃听，因此您不必担心。通过 HTTP 发送它是未加密的，并且容易被窃听，尤其是在不安全的无线网络上。

至于在客户端对密码进行哈希处理，一个更好的主意是查看客户端 SSL 证书，这些证书实际上是由浏览器本身生成的（假设您安装了 SSL 证书来加密连接）。只需`<keygen>`在您的 HTML 中添加一个标签，您的浏览器就会生成一个密钥对并将私钥存储在其密钥库中（[示例](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_keygen)）。然后在访问站点时，用户将公钥发送到服务器进行身份验证。不幸的是，它在所有当前的浏览器中都有点混乱，并且根本无法与 Internet Explorer 一起使用（惊喜，惊喜。谢谢你，微软！）。

# ios5 - 苹果撰写电子邮件屏幕

> ID：13281386
> 
> 赞同：1
> 
> 时间：2012-11-08T02:00:31.617
> 
> 标签：ios5

我正在制作一个允许用户互相发送消息的应用程序。我想制作一个类似于 Apple 撰写邮件屏幕的屏幕。尝试向上滚动撰写文本框时，我希望拥有可滚动的文本字段。

我尝试`UITableView`使用不同的单元格创建一个，`UITextFields`但这与 Apple 创建它们的方式不同，并且消息视图的滚动也没有按应有的方式工作。

有没有好的样品可用？或者知道 Apple 是如何创建撰写屏幕的吗？感谢您的帮助，我尝试对此进行研究，但找不到任何相关信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:21:37.350

Three20 是一个开源的 Objective-C 库，被 App Store 中的数十个知名品牌使用，包括 Facebook、Posterous、Pulse、Meetup.com 和 SCVNGR。Three20 提供强大的视图控制器，例如 Launcher、流行的照片浏览器和互联网感知表。该库是模块化的，这意味着您可以选择将库的哪些元素包含在您的应用程序中。这种模块化设计使 Three20 成为唯一鼓励社区中所谓的“扩展”的 Objective-C 框架之一。您可以使用右侧的可播放演示来探索 Three20 的一些功能。

# python - Django 中间件配置不当？

> ID：13281392
> 
> 赞同：0
> 
> 时间：2012-11-08T02:01:29.313
> 
> 标签：python, django, django-middleware

出于某种原因，由于自定义中间件，我收到了 ImproperlyConfigured 错误。

```
[Wed Nov 07 20:47:07 2012] [error] [client 158.130.107.158] File does not exist: /home/davidxu/public_html/favicon.ico
[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] mod_wsgi (pid=24114): Exception occurred processing WSGI script '/home/davidxu/dev/Penn-Course-Review-api/api/django.wsgi'.
[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] Traceback (most recent call last):
[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]   File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/wsgi.py", line 219, in __call__
[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]     self.load_middleware()
[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]   File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py", line 47, in load_middleware
[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] ImproperlyConfigured: Error importing middleware api.apiconsumer.authenticate: "No module named api.apiconsumer.authenticate" 
```

作为参考，以下是文件的相关部分`settings.py`：

```
MIDDLEWARE_CLASSES = ( 
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.cache.UpdateCacheMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.cache.FetchFromCacheMiddleware',
    'api.apiconsumer.authenticate.Authenticate',
)

INSTALLED_APPS = ( 
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'api.courses',
    'api.apiconsumer',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    'api.static_content',
    'django_extensions', # used for debugging, remove if problematic
    'django.contrib.staticfiles',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
) 
```

以及`django.wsgi`文件的价值。（注意，这里有很多自定义的东西。）

```
import os,sys

PROJECT_PATH = os.path.realpath(os.path.dirname(__file__))

sys.path.append(PROJECT_PATH)

from sandbox_config import *

#Uncomment these two lines to use virtualenv
#activate_this = os.path.join(COURSESAPI_APP_ROOT, "ENV/bin/activate_this.py")
#execfile(activate_this, dict(__file__=activate_this))

sys.path.append(DEV_ROOT)
sys.path.append(COURSESAPI_APP_ROOT)

os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

不幸的是，此时我不确定该尝试什么。该错误非常无用。

*   删除有问题的行导致下一个自定义中间件破坏程序，这让我认为这可能是一个路径问题。
*   谷歌似乎没有太多帮助。

有什么想法可能是什么问题，什么值得尝试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:05:07.490

这个文件在哪里 ( `api/apiconsumer/authenticate.py`)

```
No module named api.apiconsumer.authenticate 
```

位于（你能告诉我们你这个文件的绝对路径吗？）？

它实际上位于`/home/davidxu/dev/Penn-Course-Review-api/api/apiconsumer/authenticate.py`？

如果它不在与您的 wsgi 进程的 PYTHONPATH 相关的正确文件系统路径中，它将无法加载该模块中的代码。

此外，您的“api”应用程序是否列在您的 settings.py 中`INSTALLED_APPS`？如果您没有将“api”列为`INSTALLED_APPS`应用程序，Django 将不知道搜索“api.apiconsumer.authenticate”。

**已编辑**

OP 告诉我这`api`实际上是他的项目的名称，他的应用程序名称是`apiconsumer`.

所以我的回答解决了这个问题： -

我建议您将 django 项目名称与应用程序名称明确分开。因此`apiconsumer`，在您的 INSTALLED_APPS 中用作应用程序名称并`apiconsumer.authenticate.Authenticate`在您的 MIDDLEWARE_CLASSES 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:16:46.573

Do the following files exist?

```
api/__init__.py
api/apiconsumer/__init__.py 
```

If not, then `api/apiconsumer/authenticate.py` won't be found.

Also, try removing `api` from the prefix in the `MIDDLEWARE_CLASSES` and `INSTALLED_APPS`. So, you would have:

```
MIDDLEWARE_CLASSES = (
    ...
    'apiconsumer.authenticate.Authenticate',
)

INSTALLED_APPS = (
    ...
    'courses',
    'apiconsumer',
    'static_content',
    ...
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T17:24:38.910

**在init** .py中使用导入时配置不正确。

症状是： - runserver 就像一个魅力 - 部署时 (apache/nginx+uwsgi) 导入模块时出现许多错误，最后引发了 ImproperlyConfigured

解决方案：将所有**init** .py 文件留空。

# php - PHP SESSION HTML表格携带问题

> ID：13281395
> 
> 赞同：2
> 
> 时间：2012-11-08T02:01:37.347
> 
> 标签：php

我正在使用 URL 中的 add 将项目添加到我的 cart.php 中。

```
 case "add":
if (isset($_SESSION['cart'][$comic_id])) {
$_SESSION['cart'][$comic_id]++;
} else {
$_SESSION['cart'][$comic_id] = 1;} 
```

...我的项目呈现在 cart.php 中的 HTML 表格中。然后我只想从 checkout.php 中的数组中重新调用特定变量，以便客户可以确认订单总额以及他们的个人详细信息。

当我使用以下内容时，我似乎只能使用 SESSION 变量来携带最后添加的项目/行：

```
$_SESSION['totalnameqty']=$name . " " . $qty . " " . $cost; 
```

...然后在 checkout.php 页面上使用回显：

```
$totnamqty=$_SESSION['totnamqty'];
echo $totnamqty; 
```

...我想将添加到 cart.php 中的 HTML 表中的所有项目 $name、$qty 和 $cost 带到 checkout.php，而不仅仅是 1 个项目/行。不确定如何执行此操作或是否可能。有人可以帮忙吗？

这是我的购物车.php：

```
if (isset($_SESSION['cart'][$comic_id])){

    echo "<table border=\"0\" padding=\"10\" width=\"80%\">";
    echo "<td colspan=\"1\" align=\"left\"><a href=\"title.php\">Continue Shopping</a></div>";
    echo "<td colspan=\"6\" align=\"right\"><a href=\"$_SERVER[PHP_SELF]?action=empty\" onclick=\"return confirm('Crystal Fusion: Are you sure you wish to empty your cart?');\">Empty Cart</a></td>";                  
    echo "<tr height=\"20px\">";
    echo "<tr height=\"20px\">"; 
    echo "<td align=center>Image</td><td align=center>Title</td><td align=center>Description</td><td colspan=3 align=center>Copies (+/-)</td><td align=center>Price</td>";
    echo "<tr height=\"20px\">";

    foreach($_SESSION['cart'] as $comic_id => $qty) {   

        $sql = sprintf("SELECT title, description, cost, image_thumbnail
                FROM comic 
                WHERE comic_id = %d;",$comic_id); 

        $result = mysql_query($sql);

        if(mysql_num_rows($result) > 0) {

            list($name, $description, $price, $image_thumbnail) = mysql_fetch_row($result);

            $cost = $price * $qty; 
            $total = $total + $cost; 

            $cost = number_format($cost,2); 
            $total = number_format($total,2); 
            $description =  substr($description, 0, 250); 

            echo "<br><tr>";
            echo "<td width=\"10px\" align=\"center\"><img height=100 align=center src=\"$image_thumbnail\">";
            echo "<td align=\"center\">$name</td>";
            echo "<td width=\"40%\" align=\"center\">$description...<a href=comic_dyn.php?comic_id=$comic_id>More Info</td>";
            echo "<td width=\"30px\" align=\"center\"><a href=\"$_SERVER[PHP_SELF]?action=add&comic_id=$comic_id\">+<br></a><td align=\"center\">$qty <td width=\"20px\" align=\"center\"><a href=\"$_SERVER[PHP_SELF]?action=remove&comic_id=$comic_id\">-</a></td>";
            echo "<td align=\"right\">$$cost</td>";
            echo "</tr>";           
        }

    }

    echo "<br><tr><tr height=100px>";
    echo "<td><td><td colspan=\"4\" align=\"right\">Total:</td>";
    echo "<td width=\"60px\" align=\"right\">$$total</td>"; 
    echo "<tr><td colspan=\"7\" align=\"right\"><a href=\"checkout_html.php\">Proceed to Checkout</a>"; 
    echo "<tr height=\"50px\">";
    echo "</table>";
}else{

    echo "Your cart is currently empty."; 
    echo "<br><br><td colspan=\"1\" align=\"left\"><a href=\"title.php\">Continue Shopping</a></div>"; 

}

//session variables (to be carried to checkout.php
$_SESSION['cost']=$cost;
$_SESSION['name']=$name;
$_SESSION['qty']=$qty;
$_SESSION['totnamqty']=$name . " " . $qty . " " . $cost; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:31:03.590

您正在循环内设置 $name、$qty 和 $cost 值，因此您正在访问循环下方/外部的最后设置值。此外，您在开头使用 $comic_id ，但下面在 foreach 语句中使用相同的变量。我猜您可以删除 foreach 并改用： $qty = $_SESSION['cart'][$comic_id]?

否则，假设顶部的 isset() 不正确，并且您正在尝试循环购物车中的每个 $comic_id；然后你想为每个 $comic_id 索引你的“成本”、“名称”、“数量”和“tonamqty”值。例如。在你的 foreach 循环中使用类似的东西： $_SESSION['comics'][$comic_id]['cost'] = $cost;

但是，我认为不使用会话变量的结帐方法更合适。我会将用户当前看到的内容发布到 checkout.php，而不是使用会话数据。假设会话是从多个选项卡访问的，并且用户在过时的选项卡上单击结帐。如果使用会话变量，服务器只知道用户请求签出会话中的最新项目，而不是主动可见的内容。

# symfony - Doctrine2 在实体中查询

> ID：13281398
> 
> 赞同：1
> 
> 时间：2012-11-08T02:02:07.930
> 
> 标签：symfony, doctrine-orm

我将 SF2.1 与 Doctrine2 一起使用

我有 2 个实体：类别和文章，与 oneToMany 关系链接。

我想检索特定类别的所有文章，但只检索已发表的文章....

我向您展示我目前所做的事情：

```
// in /Entity/category.php :
public function getAllArticlesPublished(){
    $articles = array();
    foreach($this->getArticles() as $article){
        if($article->isPublished()) $articles[] = $article;
    }
    return $articles;
} 
```

这是这样做的好方法吗？解析整个文章数组看起来不太好......但我不想在存储库中这样做，因为它涉及特定的类别。

对我有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:31:06.527

你可以看看[Filtering Collections](http://doctrine-orm.readthedocs.org/en/latest/reference/working-with-associations.html#filtering-collections)。如果它不能解决您的问题，那么存储库将是此类内容的最佳位置。

# iphone - 在 iOS 中为核心数据项目计算时间戳

> ID：13281404
> 
> 赞同：2
> 
> 时间：2012-11-08T02:02:33.117
> 
> 标签：iphone, ios, ipad, datetime, timestamp

我在我的项目中使用核心数据。数据库是 sqlite 并且有用于存储具有数据类型“时间戳”的“生日”的列。

现在，我想在其中插入一些记录，并且我有人类可读格式的日期，例如“1809-06-17”。

如何将此日期转换为时间戳，以便从数据库中获取此日期。

我尝试使用 python 脚本进行一些转换，但得到了不同的结果。

有什么简单的方法可以做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:33:33.253

您可以将日期存储为 TEXT，而不必担心与时间戳之间的转换。

要将时间戳转换为 NSDate，请使用：

```
NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeStamp];
NSLog(@"%@", date); 
```

字符串到 NSDate 到时间戳：

```
NSDate *date = [NSDate dateWithString:stringWithDate];
NSTimeInterval timeStamp = [date timeIntervalSince1970]; 
```

SQLite 没有 Date 的数据类型，它只是根据您的选择将其存储在 INT（Unix 时间）、REAL（儒略日数）或 TEXT（ISO8601 字符串）中。

因此，您可以将日期以已有的格式（“1809-06-17”）存储为 TEXT 列，或者使用上述方法将日期作为时间戳存储在 INT 列中以进行双向转换。

SQLite 日期和时间函数：[SQLite 日期和时间](http://www.sqlite.org/lang_datefunc.html) SQLite DATATYPES：[SQLite 数据类型 doc](http://www.sqlite.org/datatype3.html) SQLite 官方网站和文档：[SQLite Home](http://www.sqlite.org/datatype3.html)

希望你能解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:20:40.213

最后我得到了我需要的解决方案。

```

NSDateFormatter *df = [[NSDateFormatter alloc]init];
[df setDateFormat:@"yyyy-MM-dd"];    
NSDate * 过去 = [df dateFromString:@"1971-04-06"];
NSTimeInterval oldTime = [过去 timeIntervalSinceDate:[df dateFromString:@"2001-01-01"]];
NSString * unixTime = [[NSString alloc] initWithFormat:@"%0.0f", oldTime];
NSLog(@"unixTime = %@",unixTime);

```

# git - 同一工作目录的 git 遥控器是不同的（或者至少看起来像这样）

> ID：13281411
> 
> 赞同：3
> 
> 时间：2012-11-08T02:03:56.440
> 
> 标签：git, git-clone, git-remote

我有一个工作目录，我在其中一台计算机上使用 GIT 进行跟踪，并且在过去的某个时间点，我在外部硬盘驱动器上创建了一个远程（裸机）存储库。这个遥控器叫做`origin`. 然后我稍后在其他计算机上克隆了该存储库。自从我创建 以来`origin`，我通过将所有更改从任何计算机推送到它来确保始终保持最新状态。然后我将这些更改拉回其他计算机，以便我的工作目录都相同。

前几天我决定重组我的外置硬盘。我在驱动器上的不同位置创建了一个新的裸仓库（我们称之为它`other_remote`），将其作为新远程添加到我的一台计算机上的工作目录中，并将该工作目录推送到它。

现在，我打算`origin`从我的硬盘中删除 repo，但在继续之前，我有疑问，我决定比较两个远程 repo，以确保我没有做让我后悔的事情。

我开始了`du`，我得到了这个：

```
$ du -sch origin                                                                                                                                  
207M    origin
207M    total

$ du -sch other_remote                                                                                                                      
34M     other_remote
34M     total 
```

现在吓到我了！我显然还没有删除`origin`。我做了很多研究（在这里和谷歌上），但我找不到任何相关信息。

我发现的唯一一件事是有人说你可以用它`git count-objects -v`来很好地估计回购的大小。但同样，这个命令在我的两个裸仓库中给出了完全不同的结果：

```
$ cd path/to/origin
$ git count-objects -v
count: 137
size: 211976
in-pack: 0
packs: 0
size-pack: 0
prune-packable: 0
garbage: 0

$ cd other/path/to/other_remote
$ git count-objects -v
count: 6
size: 9888
in-pack: 131
packs: 1
size-pack: 24725
prune-packable: 0
garbage: 0 
```

谁能帮我理解为什么我的两个远程仓库如此不同？我可以安全地擦除`origin`并只保留`other_remote`吗？如果我这样做会丢失一些信息吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:31:29.307

首先，[`git count-objects`](http://git-scm.com/docs/git-count-objects)只计算未打包的对象（在*裸*仓库中，它们很可能在初始推送后被打包）。
另请参阅“[为什么我的 git 存储库这么大？](https://stackoverflow.com/questions/1029969/why-is-my-git-repository-so-big) ”以了解相同数量文件的更大存储库的原因，以及“[我是否需要在裸存储库上运行 git gc？](https://stackoverflow.com/questions/3532740/do-i-ever-need-to-run-git-gc-on-a-bare-repo) ”（由于悬空提交而导致对象松散）

关键是，新的裸回购可能比具有相同历史的活跃非裸回购要小。

然后，确保您已推送所有内容（所有分支和所有标签）。
参见例如“[使用 GitHub 如何在添加现有存储库时推送所有分支？](https://stackoverflow.com/a/4886153/6309) ”。
你只是`git push myNewBareRepo`，还是`git push --all myNewBareRepo`？

# c++ - CUDA内核中的while循环失败

> ID：13281415
> 
> 赞同：2
> 
> 时间：2012-11-08T02:04:19.947
> 
> 标签：c++, cuda

我正在使用 GPU 进行一些计算来处理单词。最初，我使用一个块（有 500 个线程）来处理一个单词。要处理 100 个单词，我必须在 main 函数中循环内核函数 100 次。

```
for (int i=0; i<100; i++)
    kernel <<< 1, 500 >>> (length_of_word); 
```

我的内核函数如下所示：

```
__global__ void kernel (int *dev_length)
{
   int length = *dev_length;
   while (length > 4)
   {   //do something;
          length -=4;
   }
} 
```

现在我想同时处理所有 100 个单词。

每个块仍将有 500 个线程，并处理一个字（每个块）。

dev_totalwordarray：存储单词的所有字符（一个接一个）

dev_length_array：存储每个单词的长度。

dev_accu_length：存储单词的累积长度（所有先前单词的总字符数）

dev_salt_ 是一个大小为 500 的数组，用于存储无符号整数。

因此，在我的主要功能中，我有

```
 kernel2 <<< 100, 500 >>> (dev_totalwordarray, dev_length_array, dev_accu_length, dev_salt_); 
```

填充 cpu 数组：

```
 for (int i=0; i<wordnumber; i++)
    {
        int length=0;
        while (word_list_ptr_array[i][length]!=0)
        {
            length++;
        }

        actualwordlength2[i] = length;
    } 
```

从 cpu -> gpu 复制：

```
 int* dev_array_of_word_length;
    HANDLE_ERROR( cudaMalloc( (void**)&dev_array_of_word_length, 100 * sizeof(int) ) );
    HANDLE_ERROR( cudaMemcpy( dev_array_of_word_length, actualwordlength2, 100 * sizeof(int), 
```

我的函数内核现在看起来像这样：

```
__global__ void kernel2 (char* dev_totalwordarray, int *dev_length_array, int* dev_accu_length, unsigned int* dev_salt_)
{

  tid = threadIdx.x + blockIdx.x * blockDim.x;
  unsigned int hash[N];

  int length = dev_length_array[blockIdx.x];

   while (tid < 50000)
   {
        const char* itr = &(dev_totalwordarray[dev_accu_length[blockIdx.x]]);
        hash[tid] = dev_salt_[threadIdx.x];
        unsigned int loop = 0;

        while (length > 4)
        {   const unsigned int& i1 = *(reinterpret_cast<const unsigned int*>(itr)); itr += sizeof(unsigned int);
            const unsigned int& i2 = *(reinterpret_cast<const unsigned int*>(itr)); itr += sizeof(unsigned int);
            hash[tid] ^= (hash[tid] <<  7) ^  i1 * (hash[tid] >> 3) ^ (~((hash[tid] << 11) + (i2 ^ (hash[tid] >> 5))));
            length -=4;
        }
        tid += blockDim.x * gridDim.x;
   }
} 
```

但是，kernel2 似乎根本不起作用。

它似乎 `while (length > 4)` 导致了这个。

有谁知道为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:06:49.787

我不确定是否`while`是罪魁祸首，但我在您的代码中看到一些让我担心的事情：

*   您的内核不产生任何输出。优化器很可能会检测到这一点并将其转换为空内核
*   在几乎任何情况下，您都希望为每个线程分配数组。这会消耗大量内存。您的`hash[N]`表将按线程分配并在内核结束时丢弃。如果`N`很大（然后乘以线程总数），您可能会耗尽 GPU 内存。更不用说，访问`hash`几乎和访问全局内存一样慢。
*   块中的所有线程将具有相同的`itr`值。是有意的吗？
*   每个线程仅在其自己的表副本中初始化一个字段`hash`。
*   我看到全局索引`hash[tid]`在哪里。`tid`请注意，即使`hash`是全局的，您也可能会遇到并发问题。并非网格中的所有块都会同时运行。虽然一个块将初始化 的一部分`hash`，但另一个块甚至可能不会启动！

# css - 绝对定位和 z-index 无法点击链接

> ID：13281424
> 
> 赞同：1
> 
> 时间：2012-11-08T02:05:55.343
> 
> 标签：css, html, z-index

我正在制作一个 tumblr 主题，并使用绝对定位和 z-index 将一些元素放置在页面上，以控制其他元素之上的内容。出于某种原因，我的链接变得不可点击，我将包含内容的 div 的 z-index 更改为较高的数字，但它不会使它们可点击。我无法弄清楚代码中的错误是什么。这是我拥有的CSS。

```
p.blogPost { text-indent: 30pt; text-align: justify;
}
p.blogTags { 
    font-family: 'Lobster Two', cursive; 
    color: #de2424;
    text-align: right;
}
body { 
    font-family: 'Oxygen', sans-serif; 
    margin:0px; }
h1.postTitle { 
    font-family: 'Lobster Two', cursive; 
    color: #de2424; 
}
h2.dateText {
    font-family: 'Lobster Two', cursive;
    color: #f1e8da;
}
#container { 
    width: 940px; 
    margin: auto; }
#blogContentWrapper { 
    width:940px; 
    position:relative; 
    overflow: hidden; }
#blogHeaderRibbon { position: relative; top: 20px; z-index: 3;
    }
#blogBottomRibbon { position: relative; top:-190px; z-index: 3;
    }
#dateTab { position: relative; left: -50px; top: 90px; }
#dateText { position: relative; top: -93px; left: 10px; }
#blogContent { 
    position: relative;
    top: -83px;
    width: 780px; 
    margin: auto; 
    background-image: URL('images/eggshell.jpg');
    z-index:2;
    }
#blogPostContent { 
    padding: 30px; 
    z-index: 3;
    } 
```

你可以在这里查看开发页面 [http://secretmblrtheme.tumblr.com](http://secretmblrtheme.tumblr.com)

在这里设置一个 jsFiddle：http: [//jsfiddle.net/grngf/2/](http://jsfiddle.net/grngf/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:14:40.653

根据您的 tumblr 网站，您的`#blogContent`z-index 为 -1，位于`#blogContentWrapper`. 尝试将其更改为 1，并增加要放在其前面的其他元素的 z-index（如果有）

# php - php 动态 og：facebook 的图像

> ID：13281431
> 
> 赞同：0
> 
> 时间：2012-11-08T02:07:21.230
> 
> 标签：php, facebook, dynamic

现在这一切都结束了stackoverflow，但我还没有遇到一个有效的解决方案，所以这里......

只是想让 facebook 识别我的 og:image 非常简单。facebook 对象调试器输出的所有内容都不会显示，但缩略图除外。但是，它确实显示了正确的 url，并且当单击空白缩略图时，它会加载正确的图像。

图像大小肯定不是问题，因为我有另一个网站可以处理更大的图像。

代码：

```
<meta property="og:title" content="<? echo $product_name; ?>"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.domain.com.au/product-tesst.php?id=<?     echo $id ?>"/>
<meta property="og:image"content="https://www.domain.com.au/inventory_images/thumb_<? echo $id ?>.jpg"/>
<meta property="og:site_name" content="Biz Name"/>
<meta property="fb:admins" content=""/>
<meta property="og:description" content="<? echo stripslashes($details) ?>"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:41:48.930

这可能是您使用的安全图片网址，请参阅此[错误报告](http://developers.facebook.com/bugs/405588419493203)

简答使用：

```
<meta property="og:image:secure_url" content="https://www.domain.com.au/inventory_images/thumb_<? echo $id ?>.jpg" /> 
```

# c++ - 虚函数返回的枚举协方差

> ID：13281437
> 
> 赞同：3
> 
> 时间：2012-11-08T02:07:41.493
> 
> 标签：c++, enums, c++11, covariance

为什么 C++ 不能识别`enum MyEnum : int`为与 的协变`int`？

示例：http: [//ideone.com/Ns1O2d](http://ideone.com/Ns1O2d)

```
#include <iostream>

enum FooType : int
{
    Crazy = 0,
    Cool
};

enum BarType : int
{
        Hello = Cool + 1,
        World
};

class Foo
{
public:
        Foo(void)
        {
        }

        ~Foo(void)
        {
        }

        virtual int getType(void) 
        {
                        return Crazy;
        }
};

class Bar : public Foo
{
public:
        Bar(void)
        {
        }

        ~Bar(void)
        {
        }

        virtual BarType getType(void)
        {
                return Hello;
        }
};

int main(int argc, char* argv[])
{
        Bar f = Bar();           
        std::cout << f.getType() << std::endl;
        return 0;
} 
```

编译错误：

```
prog.cpp:43:18: error: conflicting return type specified for 'virtual BarType Bar::getType()'
prog.cpp:26:14: error:   overriding 'virtual int Foo::getType()' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:49:42.093

非范围枚举类型（即通常的`enums`，而不是`enum class`and `enum struct`）提供对整数的隐式提升，即您可以这样做：

```
enum FooType : int { Crazy, Cool };
int val = Crazy; // promotion to integer 
```

但是，这不起作用：

```
FooType val = 0;  // illegal 
```

这来自第 7.2/5 节：*每个枚举定义了一个不同于所有其他类型*的类型，结合第 7.2/9 节：*枚举数的值或无作用域枚举类型的对象通过整数提升转换为整数.*

我相信这条规则的原因很明显：可能（并且通常是）整数值没有定义相应的枚举数。在上面的例子中，理论上可以转换`0`和，但转换或任何更大的数字都不能转换。`1``2`

但是，如果枚举与其基础类型（在您的示例中）是**协变**`int`的，那么在您定义它的意义上，以下是可能的：

```
class Foo
{
public:
  virtual ~Foo(void) {}
  virtual int getType(void) 
  {
    return Crazy;
  }
};

class Bar : public Foo
{
public:
  virtual ~Bar(void) {}
  virtual BarType getType(void)
  {
    return Foo::getType();
  }
}; 
```

在派生类中，`Bar::getType()`现在已经定义返回 a `BarType`，但它通过调用继承的函数来实现`Foo::getType()`，这是完全合法的。

如果这是可能的，则必须将结果从`Bar::getType()`隐式转换为. 如上所述，这是不可能的。`int``Foo::getType()``int`

* * *

`Bar::getType`但是，您仍然可以通过以与 相同的方式声明`Foo:getType`并返回 a `BarType`（隐式提升为）来实现您的代码似乎想要的内容`int`：

```
class Bar : public Foo
{
public:
  virtual ~Bar(void) {}
  virtual int getType(void)
  {
    return Hello;
  }
}; 
```

请注意，这仅在基础类型是`int`（这是因为您`int`在枚举的声明中将其固定）并且枚举没有作用域（即不使用`enum class`or `enum struct`）时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T03:09:11.797

C++ 不能那样工作。协变返回类型的想法仅适用于作为原始返回类型子类的对象的引用或指针。

编写时`enum class MyEnum : int`，您没有指定子类，而是指定 MyEnum 将由 int 类型实现。

您只能执行以下操作：

```
class Base {
  public:
  virtual Base* foo() = 0;
};

class Derived : public Base {
  public:
  Derived* foo();
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T03:18:43.657

typed `enum`s 最近才被 C++ 采用。在一个理想的世界里，s 应该做很多事情`enum`——我们应该能够迭代定义的值，我们应该能够将它们变成代数，我们应该被允许像我们一样扩展它们`class`，并且我们可能应该能够像您要求的那样创建一个`virtual`返回协变的函数。`enum`

但我们不能。

现在，我们可以做的是：

```
class Base {
public:
  virtual int getType() const { return 0; }
};

enum Bird : int { Chicken = 0, Duck = 1 };

class Derived: public Base {
public:
  Bird getBirdType() const { return static_cast<Bird>(getType()); }
  virtual int getType() const override { return Chicken; }
}; 
```

旧签名`getType`（`getBirdType`

如果我们能写作，世界可能会变得更美好`Bird Derived::getType() const override`，但除非你同意莱布尼茨的观点，否则我们不会生活在那个世界里。向 C++ 添加特性会花费标准的开发时间和编译器实现它的时间。因此，添加到 C++ 中的功能往往是已经在市场上的编译器中测试过的功能，其成本值得收益和需求。

如果您真的想要该功能，我鼓励您参与 C++ 标准化工作！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T04:28:37.690

> 为什么 C++ 不能识别`enum MyEnum : int`为与 的协变`int`？

因为它不是——虽然派生类类型的对象可能被隐式视为其公共基类型的对象，但强类型枚举是*强类型的*。即，它们可能*不会*被隐含地视为其基础类型的对象，也就是说，它们不是协变候选对象。

# php - Codeigniter 路由和 mod 重写

> ID：13281439
> 
> 赞同：0
> 
> 时间：2012-11-08T02:07:53.647
> 
> 标签：php, codeigniter, codeigniter-2

由于某些原因，我一直遇到 mod rewrite 的问题，我已经从 url 中删除了 index.php，但是当我尝试对配置文件执行相同操作时，它会显示一些联系网站管理员页面。现在我正在选择路线，但我有一个小问题。

```
My url is http://website.com/user/profile/user_profile/username 
```

我的路线中有这个

```
$route['profile/(:any)'] = 'user/profile/user_profile'; 
```

因此，当我输入 website.com/profile/username 时，它​​工作正常。我的问题是，如果我也想摆脱 /profile 并拥有 website.com/username，该怎么办？

以防万一，我不妨把我的 modrewrite 记录放在这里，这样所有聪明的人都可以告诉我哪里出错了。

```
Options FollowSymLinks
RewriteEngine on

RewriteCond $1 !^(index\.php|images|css|javascript|cron|sit-env|robots\.txt)

RewriteCond $1 !^(index\.php|javascript|sit-env|robots\.txt)

RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond $1 !^(index\.php|images|css|javascript|cron|sit-env|robots\.txt)

RewriteCond $1 !^(index\.php|javascript|sit-env|robots\.txt)

RewriteRule ^([0-9a-zA-Z]+)([\/]?)$ /user/profile.php/user_profile/$1 [L] 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:35:05.730

我只是使用该`404_override`方法捕获尚未在 CodeIgniter 中定义的任何路由，然后在显示 404 页面之前进行数据库查找。

我的示例实际上是针对 CMS 的，但它可以很容易地更改以满足您的要求。

```
public function error_404()
{
    $Path = trim(uri_string(), '/');
    $this->load->model('page_model');
    $Page = $this->page_model->GetByPath($Path);
    if(empty($Page))
    {
        $ViewData = array
        (
            'PageTitle' => 'Error 404'  
        );
        $this->load->view('error_404', $ViewData);
        return;
    }
    else
    {
        $ViewData = array
        (
            'PageTitle' => $Page->Title,
            'Keywords' => $Page->Keywords,
            'Description' => $Page->Description,
            'CurrentPage' => $Page->Path,
            'Page' => $Page
        );
        $this->load->view('generic', $ViewData);
    }
} 
```

在我的`application/config/routes.php`文件中，我只是把

```
$route['404_override'] = 'controller/error_404'; 
```

替换`controller`为包含该`error_404`操作的控制器。

根据您的原始请求，您可以使用分段集合来查找传递给`www.domain.com/username`失败的用户名：

```
$route['profile/(:any)'] = 'user/profile/user_profile/$1'; 
```

以上将路由`www.domain.com/profile/abc123`到`www.domain.com/user/profile/user_profile/abc123`

希望这可以帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:16:18.560

如果你走的路线，你可以有这样的。

```
$route['(:any)/'] = 'user/profile/user_profile'; 
```

但请注意，规则是​​从上到下评估的。将其保留在最后，因此如果您的站点路由都不起作用，它将尝试将其重定向到 user_profile 控制器。

这样做的主要缺点是您的用户运行的任何奇怪的 url 都将被解释为可能的用户。如果某个名为*forum*的人想要查看他的个人资料，他可能会被重定向到某个论坛（如果有的话）。

# php - 用 php 填充表单字段

> ID：13281442
> 
> 赞同：0
> 
> 时间：2012-11-08T02:08:00.290
> 
> 标签：php, html

我有一个表格供用户填写信息，我想知道如果用户重定向回页面，如何保留以前输入的信息。

所以，我有两个文件，

*   表单.html
*   验证.php

下`form.html`：

```
<form id="regForm" action="index.php?validate" method="post" onsubmit="return regValidation();" >

<tr>
  <td width="150px" >First Name: <font color="red">*</font> </td>
  <td><input type="text" name="firstNameField" id="firstNameField" value/ ></td>
</tr> 
```

在 下`validate.php`，我使用 $_SESSION 存储了信息：

```
<?php
    session_start();

    $_SESSION['first'] = $_POST['firstNameField'];
?> 
```

但是当我尝试如下填充`firstNameField`时`$_SESSION['first']`

```
<td><input type="text" name="firstNameField" id="firstNameField" value="<?php echo isset($_SESSION['first']) ? $_SESSION['first'] : NULL; ?>" /></td> 
```

该字段将被替换为`<?php echo isset($_SESSION['first']) ? $_SESSION['first'] : NULL; ?>`

有人可以告诉我为什么以及如何正确修复它吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:12:21.097

将文件名更改为，`form.php`而不是`form.html`让 Apache 知道在该文件中解析 PHP。

或者，您可以修改`.htaccess`文件并添加如下一行：

```
AddType application/x-httpd-php .html 
```

这告诉 Apache 使用 PHP 渲染所有以 HTML 结尾的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:23:54.137

为什么要通过两个文件来使这变得复杂？

只要有一个。

由于 $_POST 中没有任何内容，因此第一次填充 nowt。随后该变量将具有适当的值。

这将为您将来节省很多心痛，因为您不需要保持两个文件同步。

它还消除了使用会话的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:28:08.660

默认情况下，任何文件扩展名为 .html 的文件都不会被解析，因此会暴露`<?php $yourCode->exposed = true; ?>`

如果重命名同一个文件，将其文件扩展名从 .html 更改为 .php，那么 `<?php echo 'HelloWorld'; ?>`将被解析，最终结果是`HelloWorld`

这个默认行为可以被 Tim 上面描述的覆盖

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T03:44:53.560

将文件名更改为 form.php 而不是 form.html，就像 php 标记一样

或添加 .html 处理程序

# html - Regex - Find elements with name attribute but not id

> ID：13281443
> 
> 赞同：3
> 
> 时间：2012-11-08T02:08:18.290
> 
> 标签：html, regex, validation, tags

This problem came to me today. I'm working in a web-based (Struts 2) project with lots of JSPs, and most of `input, select, table` and `a` elements are defined with only with the `name` attribute, no `id` set, such as:

`<input name="myname" class="myclass" value="" type="text"/>`

So far so good, except that unfortunately there's a lot of javascript validation for those fields, and as far as I could read the code before leaving most of them actually refer to the elements with `document.getElementById`.

The catch here is that this is an old application (not that much old actually) only compatible with IE-6 and IE-7 (I didn't searched the net in order to understand how IE actually seems to find the element only with the `name` attribute, but I guess it must do something). No surprise every other single browser complains and cries.

So, I'm trying to come up with a simple solution: look up all JSPs that defines `input, select, table` and `a` elements with the `name` attribute but not `id` in order to fix the HTML.

Using my good ol' friend [http://rubular.com](http://rubular.com) I came up with the following:

`/<(?:(input|select|a|table))\s+((?!id).)*>`

This will catch every referred element without `id`. But how can I actually assert that only those with `name` are matched?

Oh, another important point. The definition of the elements are in a single line, so it's most probable that there arent't such things as:

```
<input name="..."
       class="..."/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:45:57.823

尝试这个：

`<(?:input|select|a|table)\s+(?=[^>]*\bname\s*=)(?![^>]*\bid\s*=)[^>]*>`

解释：

```
<                           "<"
(?:input|select|a|table)    One of "input", "select", "a", "table"
\s+                         Whitespace
(?=                         Positive lookahead
[^>]*                           Anything up to but excluding ">"
\b                              Word boundary
name                            "name"
\s*                             Possible whitespace
=                               "="
)
(?!                         Negative lookahead
[^>]*                           Anything up to but excluding ">"
\b                              Word boundary
id                              "id"
\s*                             Possible whitespace
=                               "="
)
[^>]*                       Anything up to but excluding ">"
>                           ">" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T05:30:27.543

## 免责声明：

每个人都会告诉你不要使用正则表达式来解析 HTML，他们是对的。也就是说，以下正则表达式解决方案对于一次性任务应该做得相当不错（如果不考虑 100% 的可靠性）。

## 正则表达式匹配具有一个属性但没有另一个属性的标签：

以下经过测试的 PHP 脚本使用（完全注释的）正则表达式来匹配`INPUT`、和具有属性但没有属性`SELECT`的元素的开始标记。该脚本在每个开始标记中插入一个与现有属性相同的新属性：`TABLE``A``NAME``ID``ID``NAME`

```
<?php // test.php Rev:20121107_2100
$re = '%
    # Match HTML 4.01 element start tags with NAME but no ID attrib.
    (                      # $1: Everything up to tag close delimiter.
      <                    # Start tag open delimiter.
      (?:input|select|table|a)\b  # Element name.
      (?:                  # Zero or more attributes before NAME.
        \s+                # Attributes are separated by whitespace.
        (?!name\b|id\b)    # Only non-NAME, non-ID before NAME attrib.
        [A-Za-z][\w\-:.]*  # Attribute name is required.
        (?:                # Attribute value is optional.
          \s*=\s*          # Name and value separated by =
          (?:              # Group for value alternatives.
            "[^"]*"        # Either a double-quoted string,
          | \'[^\']*\'     # or a single-quoted string,
          | [\w\-:.]+      # or a non-quoted string.
          )                # End group of value alternatives.
        )?                 # Attribute value is optional.
      )*                   # Zero or more attributes before NAME.
      \s+                  # NAME attribute is separated by whitespace.
      name                 # NAME attribute name is required.
      \s*=\s*              # Name and value separated by =
      (                    # $2: NAME value.
        "[^"]*"            # Either a double-quoted string,
      | \'[^\']*\'         # or a single-quoted string,
      | [\w\-:.]+          # or a non-quoted string.
      )                    # $2: NAME value.
      (?:                  # Zero or more attributes after NAME.
        \s+                # Attributes are separated by whitespace.
        (?!id\b)           # Only non-ID attribs after NAME attrib.
        [A-Za-z][\w\-:.]*  # Attribute name is required.
        (?:                # Attribute value is optional.
          \s*=\s*          # Name and value separated by =
          (?:              # Group for value alternatives.
            "[^"]*"        # Either a double-quoted string,
          | \'[^\']*\'     # or a single-quoted string,
          | [\w\-:.]+      # or a non-quoted string.
          )                # End group of value alternatives.
        )?                 # Attribute value is optional.
      )*                   # Zero or more attributes after NAME.
    )                      # $1: Everything up to close delimiter.
    # Insert missing ID attribute here...
    (\s*/?>)               # $3: Start tag close delimiter.
    %ix';
$html = file_get_contents('testdata.html');
$html = preg_replace($re, "$1 id=$2$3", $html);
file_put_contents('testdata_out.html', $html);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T09:14:49.693

如果我们在 javascript 中使用 getElementById，那么如果存在与 id 中使用的名称相同的元素，它在 Internet Explorer 中有效，但在所有其他浏览器（Firefox、Chrome、Safari 等）中无效。

可以通过以下代码消除。

```
function includeIdIfNotExist(element) {
    var id = element.getAttribute('id');
    var name = element.getAttribute('name');
    if (name && !id) {
        element.id = name;
    }
}
function addMissingId() {
    var elementsToAddId = ['input', 'select'];
    for (var j = 0; j < elementsToAddId.length; j++) {
        var inputElements = document.getElementsByTagName(elementsToAddId[j]);
        for (var i = 0; i < inputElements.length; i++) {
            includeIdIfNotExist(inputElements[i]);
        }
    }
}
document.onload = addMissingId(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-16T15:37:37.317

如果你想搜索有名字但没有id的元素，并设置id等于名字，你可以进行如下的查找和替换：

寻找：

```
(<(?:input|select|table|form|textarea)\s+)(?=[^>]*\bname\s*="(\w+)")((?![^>]*\bid\s*=)[^>]*>) 
```

它适用于输入、选择、表格、表单、文本区域。**您可以从input|select|table|form|textarea**部分添加或删除 html 标签。它还将检查元素是否具有 id

用。。。来代替：

```
$1id="$2" $3 
```

这将在您之前选择的 html 标记上添加 id="[nameValue]" ，该标记具有名称但没有 id。

希望能帮助到你！

# c++ - platform independent inter thread communication

> ID：13281446
> 
> 赞同：0
> 
> 时间：2012-11-08T02:08:49.700
> 
> 标签：c++, multithreading, operating-system, pthreads, threadpool

I have a process which receives multiple jobs and picks a thread from thread pool and assigns a job to it, this thread in turn may spawn another set of threads from its own thread pool. Now when a STOP request for a job comes to the main process, it should be forwarded to corresponding thread for that request and all the threads associated with that job should clean themselves up and exit, My question is how to notify the worker threads about "STOP".

A global variable can be used and worker threads can poll it frequently but there are lot of functions that a worker can be doing, and adding checks everywhere could work.

Is there a clean approach? some kind of messaging layer. btw the code is **C++**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:35:28.037

[Boost.Thread](http://www.boost.org/doc/libs/release/doc/html/thread.html)库是 pthread的包装器，也可移植到 Windows。该类`boost::thread`有一个`interrupt()`方法可以在下一个中断点中断[线程](http://www.boost.org/doc/libs/release/doc/html/thread/thread_management.html#interruption_points)。

Boost.Thread 还有一个`thread_group`提供相关线程集合的类。`thread_group`还有一个在线程组中的每个线程上`interrupt()`调用的方法。`interrupt()`

# android - How to do hardware decoding of video on Android?

> ID：13281449
> 
> 赞同：2
> 
> 时间：2012-11-08T02:09:29.793
> 
> 标签：android, video, codec, hardware-acceleration

How does Android tablet PC hardware decode hd video? The CPU is arm. The hardware decoding in system should be with Mali module to do hard solution. But I don't know how to it. Anyone’s help is very appreciating.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:02:44.610

在 Android 4.1 或更高版本中，使用[MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html) API 对来自 Java 的视频进行编码或解码。

Mali 是 GPU，但它不包含 VDU（视频解码器单元），它是针对每个 SoC 的芯片组特定的。像 TI、QCOM 等芯片组供应商都有自己的，他们每个人都提供自己的 OpenMAX (OMX) 组件来执行此操作，您会在 android adb 日志中看到其中提到的一些。

示例代码：[http ://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/](http://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/)

# python - Is it possible to open multiple URLs from a .txt and scrape all the webpages at once?

> ID：13281450
> 
> 赞同：0
> 
> 时间：2012-11-08T02:09:41.650
> 
> 标签：python, file, url

I can't understand how to deal with more than one URL. This is what I've tried so far, but it's only scraping the last URL from the list:

```
from twill.commands import *
from bs4 import BeautifulSoup
from urllib import urlopen

with open('urls.txt') as inf:
    urls = (line.strip() for line in inf)
    for url in urls:
        line = url 

site = urlopen(url)   

soup = BeautifulSoup(site)

for td in soup.find_all('td', {'class': 'subjectCell'}):
    print td.find('a').text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:20:18.380

这些代码应该在 for 循环内

```
site = urlopen(url)   

soup = BeautifulSoup(site)

for td in soup.find_all('td', {'class': 'subjectCell'}):
    print td.find('a').text 
```

然后他们将被调用每个 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:11:28.363

If you want to loop over all of the URLs, you have to put the code that processes each URL into the loop. But you haven't done that. All you have is:

```
for url in urls:
    line = url 
```

This will reassign the variables `url` and `line` over and over, finally leaving them both pointing to the last URL. And then, when you call `size = urlopen(url)` outside the loop, it will work on the last URL.

Try this:

```
with open('urls.txt') as inf:
    urls = (line.strip() for line in inf)
    for url in urls:
        site = urlopen(url)   
        soup = BeautifulSoup(site)
        for td in soup.find_all('td', {'class': 'subjectCell'}):
            print td.find('a').text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:12:09.617

You need to put everything you want to do with each url into the `for` loop:

```
with open('urls.txt') as inf:
    urls = (line.strip() for line in inf)
    for url in urls:
        site = urlopen(url)   
        soup = BeautifulSoup(site)

        for td in soup.find_all('td', {'class': 'subjectCell'}):
            print td.find('a').text 
```

# perl - Hexadecimal Computations in Perl

> ID：13281452
> 
> 赞同：0
> 
> 时间：2012-11-08T02:10:17.383
> 
> 标签：perl, xor, unpack

I have a string of ASCII characters. I convert this to hex string using the unpack function.

```
#! /usr/bin/perl

use strict;
use warnings;

my $str="hello";
my $value=unpack("H*",$str);

print $value,"\n";

**output:** 68656c6c6f 
```

Now, lets say, I want to use this output as a string of hex bytes, read one byte at a time and perform some computation on it and store the output in another variable.

For instance,

```
#! /usr/bin/perl

use strict;
use warnings;

my $str="hello";
my $value=unpack("H*",$str);

my $num=0x12;
my $i=0;

while($i<length($value))
{
    my $result.=(substr($value,$i,2)^$num);
    $i+=2;
}

print $result,"\n";

**output:**

Argument "6c" isn't numeric in bitwise xor (^) at test.pl line 13.
Argument "6c" isn't numeric in bitwise xor (^) at test.pl line 13.
Argument "6f" isn't numeric in bitwise xor (^) at test.pl line 13.
8683202020 
```

The output is incorrect and also there are several warnings.

If we take the first hex byte of the string, "hello" as an example:

```
68 xor 12 = 7A 
```

However, the output shows it as 86\. The output is incorrect and also I am not sure how it got an output of 86.

What is the right way to do it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T02:22:03.243

如果某些东西是十六进制的，它必然是一个字符串，因为十六进制是一个数字的*人类可读表示*。你不想要一个字符串；您需要一系列数字，其中每个数字都是字符的数值。您可以使用[`ord`](http://perldoc.perl.org/functions/ord.html)逐个字符获取数字，但`unpack`也提供了方法：

```
my @bytes = unpack 'C*', $str; 
```

做你想要的处理：

```
$_ ^= $num for @bytes; 
```

并重构字符串：

```
$str = pack 'C*', @bytes; 
```

以上三者结合：

```
$str = pack 'C*', map $_ ^ $num, unpack 'C*', $str; 
```

你也可以这样做：

```
my $mask = chr($num) x length($str);
$str ^= $mask; 
```

# node.js - How to use a specific version of NPM?

> ID：13281454
> 
> 赞同：11
> 
> 时间：2012-11-08T02:10:34.953
> 
> 标签：node.js, npm

How can I switch which version of npm I'm using?

Currently:

```
$ npm -v
1.1.65 
```

But I need: 1.0.x

I tried but got an error:

```
$npm version 1.0
npm ERR! version No package.json found 
```

Anyone know how to use a different version of NPM? Thanks

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-11-02T20:50:17.190

您的 NPM 版本与您的 NodeJS 版本相关联。据我所知，每个 Node 版本只能有一个 NPM 版本。使用[nodeenv](https://github.com/asdf-vm/asdf)或我最喜欢的[asdf](https://github.com/asdf-vm/asdf)之类的东西，您可以定义每个文件夹的节点版本。

每个节点版本（例如每个文件夹）你全局安装你想要使用的 NPM 版本。

```
$ npm install -g npm@x.x 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2021-09-04T15:39:57.190

您可以在不安装其他版本的 node.js 的情况下更新 npm，并且 npm 不特定于 node.js 的版本。

当然，随着 node.js 的进步和功能的增加，npm 也在进步，所以 npm 有一些限制，具体取决于 node.js，但你应该尽可能多地更新 npm，因为有重要的安全补丁和错误修复。

这是所有软件的最佳实践。稳定性不值得忽视安全风险。

命令是`npm install npm@latest -g`全局安装它。这将安装将与您已安装的 node.js 一起运行的最新版本。

此外，您可以在这样的项目中将特定版本的 npm 安装到您的 package.json 中，`npm install npm@6.14`并且您可以在本地使用它。更有趣的是，您可以在项目中安装本地版本的 node.js 并使用它！

示例：我正在运行节点 16.8.0 并且我有 npm 7.21.0 但我想使用早期版本的 npm 但仅用于项目：

在项目目录中

`npm i --save-dev npm@6.14`

这会将早期版本的 npm 放入 node_modules/.bin 中，这样您就可以运行与该项目相关的它。如果您`npm -v`此时键入，您将获得您的全局版本。

如果你输入`node_modules/.bin/npm -v`，你会得到 6.14.15

由于您已将此版本的 npm 作为此项目的版本，因此当您在脚本中使用 npm 时，它将使用 6.14.15 而不是全局版本。

node.js 也是如此。

您可以像这样安装旧版本的 node.js：`node_modules/.bin/npm install --save-dev node@lts`然后将这个版本的 node.js 添加到项目中。

您可以通过输入进行测试`node_modules/.bin/node -v`，在我的示例中，您将看到本地安装的版本号，在我的示例中为 v14.17.3，尽管我的全局是 v16.8.0

如果您这样做，您的 package.json 脚本中的项目脚本将运行本地安装的版本，而不是全局版本。

您可以通过在 package.json.scripts 中创建一个脚本来测试它，如下所示`"what:version": "npm -v && node -v"`：

然后如果你运行 npm run what:version 你会得到

```
> what:version
> npm -v && node -v

6.14.15
v14.17.3 
```

这是什么价值？

这是您将 node 和 npm 与您的项目打包的一种方式。这对于有很多人在同一个项目上工作的大型项目特别有价值，因此您可以全面保持一致性，或者如果您有一个具有特定版本的 node + npm 的构建服务器。此外，如果您有公司要求等。

此外，还有 npx 可以让你做更多的事情。使用 npx 你甚至可以在不安装的情况下尝试一些东西。

这是 npm 的文档：[https ://docs.npmjs.com/about-npm-versions](https://docs.npmjs.com/about-npm-versions)

如果您发现需要在不同版本的 node.js 和 npm 之间切换，您可能需要使用 nvm [https://docs.npmjs.com/downloading-and-installing-node-js-and-npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T08:44:12.207

当您安装 npm 时，您只会获得最新的软件包，因此您需要单独安装特定版本，例如：

```
npm install -g npm@5.6.0 
```

完成后，运行版本检查，您应该会看到刚刚安装的版本：

```
npm -v
5.6.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-16T06:32:39.063

对于特定版本，请使用

> **npm install -g npm@xyz**

对于最新版本，请使用

> **npm install -g npm@latest**

# windows - 如何使用 Windows cmd/bat 文件一次打开各种应用程序并关闭终端窗口？

> ID：13281459
> 
> 赞同：0
> 
> 时间：2012-11-08T02:11:23.840
> 
> 标签：windows, cmd

我正在使用这个：

```
start /b cmd /c "C:\Windows\notepad.exe"
start /b  cmd /c "C:\Program Files\Google\Chrome\Application\chrome.exe"
start /b cmd /c "C:\Program Files\Skype\Phone\Skype.exe"
exit 
```

上述工作，但保持提示/终端窗口打开。一旦最后一个应用程序打开，如何从 bat/cmd 文件中关闭它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:32:12.777

请尝试以下操作：

```
C:
cd \Windows
start notepad.exe
cd "\Program Files\Google\Chrome\Application"
start chrome.exe
cd "\Program Files\Skype\Phone"
start Skype.exe
exit 
```

这可能是您的启动 cmd - 只需启动应用程序

# python - 我的“for”循环中的python语法无效

> ID：13281463
> 
> 赞同：2
> 
> 时间：2012-11-08T02:12:11.013
> 
> 标签：python, csv, syntax

```
def citypop():
  import csv                                  
  F = open("Top5000Population.txt")           
  csvF = csv.reader(F)
  D = {}
  with csvF for row in csvF:
      city,state,population = row[0],row[1],row[2] 
      population = population.replace(',','') 
      population = int(population)
      city = city.upper()[:12]
      D[(city, state)] = population
  return D 
```

该函数返回一个以该城市（在该州）的人口为键和作为`citypop()`值的字典。`(city,state)`

我不断收到语法错误..我没有正确理解 csv 模块吗？

编辑：谢谢你们的帮助....这应该可以工作，但现在突然间我得到了错误

```
 for city, state, population in reader(F):       File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/encodings/ascii.py", line 26, in decode         return codecs.ascii_decode(input, self.errors[0]) UnicodeDecodeError: 'ascii' codec can't decode byte 0xa4 in position 7062: ordinal not in range(128) 
```

当我运行测试用例时....有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:17:17.527

认为您在尝试使用 with 语句时的意思是 - 在这种情况下，文件将在将代码留在其下后立即关闭：

```
from csv import reader

def citypop():
  D = {}
  with open("Top5000Population.txt") as F:
    for city, state, population in reader(F):
      city = city.upper()[:12]
      D[(city, state)] = int(population.replace(',',''))
  return D 
```

或者：

```
def citypop():
  with open("Top5000Population.txt") as F:
    return dict(((x.upper()[:12], y), int(z.replace(',', '')) for x, y, z in reader(F)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:16:28.040

我认为您误解了 Python 的[`with`声明](http://effbot.org/zone/python-with-statement.htm)。制作第 6 行：

```
for row in csvF: 
```

应该解决问题。

供参考，该语句与C#中`with`的语句基本相同；`using`它声明了您在完成后需要卸载或释放的资源的范围。

# audio - flash sound malfunction

> ID：13281466
> 
> 赞同：-1
> 
> 时间：2012-11-08T02:12:25.617
> 
> 标签：audio, flash, flash-cs3, flash-cs6

**Problem summary:**

A sound (stream) placed inside a movie clip that is within another movie clip will start playing continuously when I use the play control to jump around on the main timeline.

**Details:**

I am using Flash CS3 but the same issue occurs with CS6\. I've spent quite a bit time to search/research for the issue but didn't find a solution. To demonstrate the problem, I've reduced the flash movie to a very simple structure.

One the main timeline:

*   The first frame has a movie clip (Game MC) and a stop action.
*   Following the first frame, there are several frames, mostly empty except some text.
*   The last frame has a stop action.

On the Game MC timeline:

*   There is only one frame. On that frame, there is a movie clip (Card MC), and the stop action.

On the Card MC timeline:

*   It starts with 3 blank frames and a stop action.
*   Starting at frame 4, a sound (.wav format) is placed and is set to be "stream."
*   At the end of this timeline, there is a stop action.

From Flash CS3, I press Ctrl+Enter to test the movie. The movie stops on frame 1 of the main timeline with the card showing, no sound, as expected. Now I use "." to move the play head forward one frame at a time. No problem. I see the frames after the first frame. Still no sound, as expected. So far so good.

**The problem starts** when I use "," to move the play head backward, the sound in the Card MC starts to play, regardless where the play head is, even when the Game MC (thence the Card MC) is not on the stage. Worse, each press of "," will trigger another start of the same sound overlapping with the previous one. And the sound would continue in loops until I close the swf.

**However,** the problem will not occur if I place the Card MC directly on the main timeline. It only occurs when it is inside another movie clip (Game MC).

I need to solve this problem because the full version of the flash card game is to be placed in an HTML page with a javascript based play control, which allows the viewer to jump around in the swf timeline.

The fla file is at: [https://docs.google.com/file/d/0B_5mgotjr4l5RDZaOGxFeFFWN1U/edit?pli=1](https://docs.google.com/file/d/0B_5mgotjr4l5RDZaOGxFeFFWN1U/edit?pli=1)

Any insight will be greatly appreciated.

Keith

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:33:33.670

事实证明这确实是 Flash 中的一个错误，并且被告知它不会出现在 Flash 的下一个版本中。解决方法是使用 Sound 类来加载和播放声音。

# android - Cannot interract with Widget that embedded into Lock Screen

> ID：13281468
> 
> 赞同：2
> 
> 时间：2012-11-08T02:12:51.420
> 
> 标签：android, frameworks, android-widget, lockscreen

I'm trying to embed a widget into LockScreen. This widget has been implemented already and has put in "packages/apps". In LockScreen constructor ("framework/base/policy/src/com/android/internal/policy/impl/LockScreen.java), I added some code lines:

```
 if (mCreationOrientation != Configuration.ORIENTATION_LANDSCAPE) {
       inflater.inflate(R.layout.keyguard_screen_tab_unlock_advanced, this, true);
       showWeatherClockWidget();
    } else {
       inflater.inflate(R.layout.keyguard_screen_tab_unlock_land, this, true);
    } 
```

I implemented showWeatherClockWidget() function as follows:

```
 private void showWeatherClockWidget() {
            mHost = new AppWidgetHost(mContext, HOST_ID);
            mAppWidgetManager = AppWidgetManager.getInstance(mContext);

            List<AppWidgetProviderInfo> providers = mAppWidgetManager.getInstalledProviders();
            for (AppWidgetProviderInfo pi: providers) {
                if (WEATHER_CLOCK_WIDGET.equals(pi.provider.getClassName())) {
                    int id = mHost.allocateAppWidgetId();
                    mPi = pi;
                    Log.v(TAG, "pi: " + pi.provider.getClassName());
                    Log.v(TAG, "id_length: " + mAppWidgetManager.getAppWidgetIds(pi.provider).length);
                    mAppWidgetManager.bindAppWidgetId(id, pi.provider);
                    addAppWidgetView(id, pi);
                }
            }
        }

   private void addAppWidgetView(int appWidgetId, AppWidgetProviderInfo appWidget) {
        // Inflate the AppWidget's RemoteViews
        mAppWidgetContainer = (LinearLayout) findViewById(R.id.weatherclock_widget_container);
        AppWidgetHostView view = mHost.createView(mContext, appWidgetId, appWidget);
        view.setAppWidget(appWidgetId, appWidget);

        // Add it to the list
        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        mAppWidgetContainer.addView(view, layoutParams);
    } 
```

The LinearLayout containing widget was defined in my own xml layout file placed in "framework/base/core/res/res/layout"

```
 <LinearLayout
        android:id="@+id/weatherclock_widget_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
     /> 
```

After that, I faced with a list of problems: Firstly, I met an error announcing me that:

```
E/AndroidRuntime( 2614): java.lang.SecurityException: bindAppWidgetId appWidgetId=25 provider=ComponentInfo{com.sample.weatherclock/com.sample.weatherclock.ClockWidgetDigital}: User 1000 does not have android.permission.BIND_APPWIDGET. 
```

I believe that BIND_APPWIDGET has protectionLevel = "signature|system". I wonder why LockScreen does not have this permission because it runs with system priority. I tried to add this permission into AndroidManifest.xml ("frameworks/base/core/res") but it didn't work. So, I did some tricks by disabling some code lines used for checking permission in "/base/services/java/com/android/server/AppWidgetServiceImpl.java"

```
public void bindAppWidgetId(int appWidgetId, ComponentName provider) {
//    mContext.enforceCallingPermission(android.Manifest.permission.BIND_APPWIDGET,
//        "bindAppWidgetId appWidgetId=" + appWidgetId + " provider=" + provider);
    bindAppWidgetIdImpl(appWidgetId, provider);
 } 
```

After that, the widget could be binded but I was in face of another problem: my widget could not update. It updates only on the first time the lockscreen turns on. I put a log in onUpdate() and i founded that it was called whenever the time changes.

```
I/WeatherClock(  326): updateTime: 9:2
I/WeatherClock(  326): updateDate: 10/8 |4
I/WeatherClock(  326): ClockWidgetDigital onUpdate() 
```

Besides, I even can not interact with it. When i touched it, I received the log:

```
I/ActivityManager(  147): START {act=android.intent.action.MAIN flg=0x10000000 cmp=com.sample.weatherclock/.WeatherSettingsActivity bnds=[10,50][471,317] u=0} from pid -1 
```

but nothing happen, this activity can not start.

Can anybody help me? I was stuck by this for days :( Thanks in advance.

**UPDATE** It is not really that the widget can not start activity when I touch it. Actually, after I unlock screen, it has run already. It just can not unlock itself. Any idea for solving it?

# doctrine - 用于 link_to 功能的 Symfony 图像按钮

> ID：13281475
> 
> 赞同：0
> 
> 时间：2012-11-08T02:13:53.960
> 
> 标签：doctrine, symfony-1.4, link-to-function

我有一个表单，当最初提交时，它会进入一个页面，用户可以在该页面上“预览”该项目，然后再将其发布到网站。我有这 3 个链接，但我想将其从默认文本链接更改为可以单击以执行这些任务的图像按钮。

```
 <?php echo link_to('Edit', 'ticket_edit', $ticket) ?>
  <?php echo link_to('Purchase', 'ticket_publish', $ticket, array('method' => 'put')) ?>
  <?php echo link_to("Cancel", 'ticket_delete', $ticket, array('method' => 'delete', 'confirm' => 'Are you sure you want to delete the item?')) ?> 
```

因此，我希望它为每个显示一个图像，而不是“编辑”、“发布”和“取消”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:49:36.570

您可以使用

```
<?php echo link_to( image_tag( '<your image name>' ), 'ticket_edit', $ticket) ?> 
```

等等其他链接...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:39:56.827

您可以使用`button_to ($name, $internal_uri, $options)`（[Symfony 文档](http://www.symfony-project.org/api/1_4/UrlHelper#method_button_to)）

```
<?php echo button_to('Edit', 'ticket_edit', $ticket) ?> 
```

但您不能将图像用作按钮。但是，[这个 SO 答案](https://stackoverflow.com/a/8854973/699091)将为您提供一个功能，您可以使用它来获得您需要的东西。

# php - 使用 array_key_exists 搜索多维数组不起作用

> ID：13281476
> 
> 赞同：0
> 
> 时间：2012-11-08T02:14:23.193
> 
> 标签：php, array-key-exists

我并试图让 if else() 语句在执行之前查找 2 个或更多条件，但它对我不起作用.. 例如，我的最终目标是搜索 array[Pack] 和 if [Type] == s45 && [ packageA1] 存在然后使用 array_slice 将附加信息添加到 [Type array]

if() 条件可以正常工作，但 else if() 则不行......

$节点：

```
Array
(
    [Pack] => Array
        (
            [Type] => s45
            [packageA1] => Array
                (
                    [level] => REMOVE FROM DB
                    [stage] => REMOVE FROM DB
                    [description] => s45 info here
                    [image] => 
                )

        )

    [Pack2] => Array
        (
            [Type] => s99
            [packageA1] => Array
                (
                    [level] => REMOVE FROM DB
                    [stage] => REMOVE FROM DB
                    [description] => s99 info goes here
                    [image] => 
                )

        )
)

//more code...
$i = 1;
if(!array_key_exists($item[0], $node)){
     $node[$row[0]] = array("Type" => $item[0], "package".$item[1] => array("level" => "REMOVE FROM DB", "stage" => "REMOVE FROM DB", "description" => $item[3], "image" => $item[4]));
}else if(array_key_exists($item[0], $node) && array_key_exists("package".$item[1], $node)){
     $i++;
     $res = array_slice($node[$rowKey], 0, $i, true) +  array("my_key" => "my_value") + array_slice($node[$rowKey], $i, count($node[$rowKey]) - 1, true);
} 
```

预期输出：

```
Array
(
    [Pack] => Array
        (
            [Type] => s45
            [packageA1] => Array
                (
                    [level] => REMOVE FROM DB
                    [stage] => REMOVE FROM DB
                    [description] => s45 info here
                    [image] => 
                )
            [packageA2] => Array
                (
                    [level] => REMOVE FROM DB
                    [stage] => REMOVE FROM DB
                    [description] => blahhhhhh blah blahh
                    [image] => 
                )
            [packageE1] => Array
                (
                    [level] => REMOVE FROM DB
                    [stage] => REMOVE FROM DB
                    [description] => moar random stuff inserted
                    [image] => 
                )    
        )

    [Pack2] => Array
        (
            [Type] => s99
            [packageA1] => Array
                (
                    [level] => REMOVE FROM DB
                    [stage] => REMOVE FROM DB
                    [description] => s99 info goes here
                    [image] => 
                )

        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:23:24.420

您可以使用`array_filter`

```
$filter = array_filter($data, function ($p) {
    return $p['Type'] == "s45" && is_array($p['packageA1']);
});

$packageA2 = array(
        'level' => 'REMOVE FROM DB',
        'stage' => 'REMOVE FROM DB',
        'description' => 'blahhhhhh blah blahh',
        'image' => NULL);

$packageE1 = array(
        'level' => 'REMOVE FROM DB',
        'stage' => 'REMOVE FROM DB',
        'description' => 'moar random stuff inserted',
        'image' => NULL,
);

$filter['Pack']['packageA2'] = $packageA2 ;
$filter['Pack']['packageE1'] = $packageE1 ;
var_dump($filter); 
```

输出

```
array
  'Pack' => 
    array
      'Type' => string 's45' (length=3)
      'packageA1' => 
        array
          'level' => string 'REMOVE FROM DB' (length=14)
          'stage' => string 'REMOVE FROM DB' (length=14)
          'description' => string 's45 info here' (length=13)
          'image' => null
      'packageA2' => 
        array
          'level' => string 'REMOVE FROM DB' (length=14)
          'stage' => string 'REMOVE FROM DB' (length=14)
          'description' => string 'blahhhhhh blah blahh' (length=20)
          'image' => null
      'packageE1' => 
        array
          'level' => string 'REMOVE FROM DB' (length=14)
          'stage' => string 'REMOVE FROM DB' (length=14)
          'description' => string 'moar random stuff inserted' (length=26)
          'image' => null 
```

# iphone - AVAudioPlayer with extremely long duration (for ~10 second file)

> ID：13281478
> 
> 赞同：2
> 
> 时间：2012-11-08T02:14:41.763
> 
> 标签：iphone, ios, avaudioplayer, duration

When playing a file with an AVAudioPlayer (loaded from NSData) I am accessing the 'duration' property as specified by apple's docs like this:

```
player = [[AVAudioPlayer alloc] initWithData:self.audioData error:&local_error];
NSLog(@"%f",player.duration); 
```

However the duration spits out 268435.199875 for a less than 10 second file.

Any idea what's going on?

# cordova - Phonegap vertical tab bar / navigation bar

> ID：13281479
> 
> 赞同：3
> 
> 时间：2012-11-08T02:14:56.547
> 
> 标签：cordova, phonegap-plugins

Is it possible to implement a vertical tab bar with PhoneGap (for iOS and Android)? Something like this. [https://github.com/futuresimple/FSVerticalTabBarController#readme](https://github.com/futuresimple/FSVerticalTabBarController#readme)

I am new to Phonegap. I just heard you can make a horizontal tab bar with NativeControls.

# wso2 - WSO2 Cloud Gateway and StratosLive

> ID：13281480
> 
> 赞同：1
> 
> 时间：2012-11-08T02:15:08.110
> 
> 标签：wso2, wso2stratos

Is WSO2 Cloud Gateway supported in StratosLive? Is there self-service setup? I would like to expose an internal web service (behind corporate firewalls) to WSO2 ESB on StratosLive and Cloud Gateway may be one solution...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:52:55.387

StratosLive 支持 WSO2 CG，我们正在 StratosLive 中部署 CG（和其他服务）。请过几天再回来看看。

# javascript - Change value during validation in Backbone.js

> ID：13281483
> 
> 赞同：3
> 
> 时间：2012-11-08T02:15:31.287
> 
> 标签：javascript, backbone.js

I have a Backbone Model and am doing some validation when the setter is called. Instead of returning an error, I want to overwrite the value. How do I do this?

```
myObj = Backbone.Model.extend({
  // Attributes
  x: function() { },
  y: function() { },

      // Validation
      validate: function(atr) {

            // Checking for number
            var numberRegex = /^\d+$/;

            if(!numberRegex.test(atr.x)) // not number
                  atr.x = 'NA'; // Trying to set x to "NA"
      }
}); 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:33:00.367

您在 validate 函数中收到的 atr 是模型属性的副本。因此，更改它不会更改模型中的属性。在 validate call 中设置属性`this.set('x','NA',{silent:true});`。

# ruby-on-rails - uninitialized constant Dalli (NameError) in staging but not production

> ID：13281488
> 
> 赞同：1
> 
> 时间：2012-11-08T02:16:32.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, memcached, dalli

So I get a `uninitialized constant Dalli (NameError)` when I push my ruby on rails app to my staging on heroku, but it works fine in production. my `production.rb` and `staging.rb` files are the exact same except for a mailer host value. Could someone help? Thanks!

production.rb:

```
Novulty::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Enable Rails's static asset server
  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Compress CSS using yui-compressor gem
  config.assets.css_compressor = :yui

  # Compress JS using uglifier gem
  config.assets.js_compressor = :uglifier

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  config.force_ssl = false

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  config.assets.precompile += %w[ *.js *.css ]

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5

  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = false
  config.action_mailer.default :charset => "utf-8"

  # Use SMTP to send mail
  config.action_mailer.delivery_method = :smtp

  # Use Gmail to send smtp mail
  config.action_mailer.smtp_settings = {
    :address              => "smtp.gmail.com",
    :port                 => 587,
    :domain               => "novulty.com",
    :user_name            => ENV["GMAIL_USERNAME"],
    :password             => ENV["GMAIL_PASSWORD"],
    :authentication       => :plain,
    :enable_starttls_auto => true
  }

  # Specify what domain to use for mailer URLs
  config.action_mailer.default_url_options = {
    host: "novulty.com"
  }

  # Specify how long an item should stay cached by setting the Cache-Control headers
  config.static_cache_control = "public, max-age=2592000"

  # Specify Dalli as the storage backends for Rails’ built-in Rack::Cache integration
  config.action_dispatch.rack_cache = {
    :metastore    => Dalli::Client.new,
    :entitystore  => 'file:tmp/cache/rack/body',
    :allow_reload => false
  }
end 
```

staging.rb:

```
Novulty::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Enable Rails's static asset server
  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Compress CSS using yui-compressor gem
  config.assets.css_compressor = :yui

  # Compress JS using uglifier gem
  config.assets.js_compressor = :uglifier

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  config.force_ssl = false

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  config.assets.precompile += %w[ *.js *.css ]

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5

  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = false
  config.action_mailer.default :charset => "utf-8"

  # Use SMTP to send mail
  config.action_mailer.delivery_method = :smtp

  # Use Gmail to send smtp mail
  config.action_mailer.smtp_settings = {
    :address              => "smtp.gmail.com",
    :port                 => 587,
    :domain               => "novulty.com",
    :user_name            => ENV["GMAIL_USERNAME"],
    :password             => ENV["GMAIL_PASSWORD"],
    :authentication       => :plain,
    :enable_starttls_auto => true
  }

  # Specify what domain to use for mailer URLs
  config.action_mailer.default_url_options = {
    host: "novultystaging.herokuapp.com"
  }

  # Specify how long an item should stay cached by setting the Cache-Control headers
  config.static_cache_control = "public, max-age=2592000"

  # Specify Dalli as the storage backends for Rails’ built-in Rack::Cache integration
  config.action_dispatch.rack_cache = {
    :metastore    => Dalli::Client.new,
    :entitystore  => 'file:tmp/cache/rack/body',
    :allow_reload => false
  }
end 
```

production.rb:

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module Novulty
  class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # Use dalli cache store in production
    config.cache_store = :dalli_store

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Add Font-Awesome support (add app/assets/font to the asset path)
    config.assets.paths << Rails.root.join("app", "assets", "fonts")

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable escaping HTML in JSON.
    config.active_support.escape_html_entities_in_json = true

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'

    config.assets.initialize_on_precompile = false
  end
end 
```

Here is the output of `heroku logs --tail --remote staging`:

```
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:571:in `block in <class:Engine>'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
2012-11-08T02:04:59+00:00 app[web.1]: /app/config/environments/staging.rb:96:in `block in <top (required)>': uninitialized constant Dalli (NameError)
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:24:in `class_eval'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:24:in `configure'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/config/environments/staging.rb:1:in `<top (required)>'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
2012-11-08T02:04:59+00:00 app[web.1]:   from script/rails:6:in `require'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-11-08T02:04:59+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-11-08T02:04:59+00:00 app[web.1]:   from script/rails:6:in `<main>' 
```

Feel free to check out my code at [www.github.com/sambaek/novulty](http://www.github.com/sambaek/novulty)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:22:56.720

看看你的`Gemfile`：

```
group :production do
  gem 'dalli'
end 
```

Bundler 不会在您的暂存环境中加载 Dalli。要么将其移出`:production`组，使其在所有环境中可用，要么也将其添加到`:staging`环境中。

# maven - 有人可以向我解释这个 Maven 命令吗？

> ID：13281495
> 
> 赞同：0
> 
> 时间：2012-11-08T02:17:28.793
> 
> 标签：maven

请你详细解释一下这个命令好吗？什么是执行？和执行：执行？-实验？-Dconfig 文件？

```
mvn exec:exec -Pexperiment -DconfigFile=src/test/resources/configFile/configFile-demo000.js 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:22:56.487

它运行由 exec 插件使用“实验”配置文件定义的 exec 目标。'configFile' 值也在命令行中定义为系统属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:56:13.930

*   `mvn`是 Maven 命令
*   `exec:exec`是目标的捷径`org.codehaus.mojo:exec-maven-plugin:1.2.1:exec`（版本可能不同）。此处对此进行了描述：http: [//mojo.codehaus.org/exec-maven-plugin/exec-mojo.html](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html)。
*   `-Pexperiment`告诉 maven 使用名为`experiment`. 此处描述了构建配置文件：[http ://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)
*   `-DconfigFile=...`是 maven 在 pom 文件或插件中使用的系统属性。此处描述了 Maven 属性：http: [//www.sonatype.com/books/mvnref-book/reference/resource-filtering-sect-properties.html](http://www.sonatype.com/books/mvnref-book/reference/resource-filtering-sect-properties.html)。此处描述了如何配置插件：[http ://maven.apache.org/guides/mini/guide-configuring-plugins.html](http://maven.apache.org/guides/mini/guide-configuring-plugins.html)

# wordpress - 在 WordPress 中，如何获取“redirect_to”URL 参数以包含登录后重定向的原始页面的路径和参数？

> ID：13281496
> 
> 赞同：1
> 
> 时间：2012-11-08T02:17:32.997
> 
> 标签：wordpress, redirect

我有一个名为的自定义文件夹`/portal/`，它接受诸如`/portal/?id=123`or之类的参数`/portal/?id=321`。

在`/portal/index.php`文件中，我包含以下内容，如果用户未通过身份验证，它将自动将用户重定向到 WP 登录。

> include_once( $_SERVER['DOCUMENT_ROOT'] . '/wp-load.php' );

如果未登录，它们会自动重定向到`http://www.domain.com/wp-login.php?redirect_to=http%3A%2F%2Fwww.domain.com%2F&reauth=1`.

如何修复`redirect_to`参数，使其包含路径和参数？我希望重定向看起来像这样：

> [http://www.domain.com/wp-login.php?redirect_to=http%3A%2F%2Fwww.domain.com%2Fportal%2F?id%3D123&reauth=1](http://www.domain.com/wp-login.php?redirect_to=http%3A%2F%2Fwww.domain.com%2Fportal%2F?id%3D123&reauth=1)

这样，一旦用户登录，他们将被重定向到他们首先尝试访问的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:22:46.140

我能够想出一个 hack 来检查以 . 开头的 cookie 密钥是否存在`wordpress_logged_in_`。如果 cookie 密钥不存在，则我将登录页面重定向到`http://www.domai.com/wp-login.php?redirect_to=http%3A%2F%2Fwww.domain.com'.urlencode($_SERVER['REQUEST_URI'])`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:50:23.820

首先，`wp-load.php`不推荐包含 -[请不要包含 wp-load](http://ottopress.com/2010/dont-include-wp-load-please/) - 有几个原因。

大概您已将 Wordpress 配置为需要登录，这就是您要重定向到登录页面的原因，并且因为它是直接从您的包含中发生的，所以您不能在加载之前插入任何过滤器来更改重定向，并且之后使用它们没有实际意义，因为重定向已经触发。

如果这是作为插件构建的，它将由 wp-load 加载，并且您可以访问`login_url`过滤器，您可以使用它来添加重定向，如下例所示： http: [//trepmal.com/filter_hook/login_url/](http://trepmal.com/filter_hook/login_url/) .

# c++ - C++ windows窗体中的向量使用

> ID：13281499
> 
> 赞同：1
> 
> 时间：2012-11-08T02:17:38.567
> 
> 标签：c++, visual-c++

我正在使用 Visual Studio 2010 使用 Windows 窗体在 C++ 中进行编程来创建东西。他妈的讨厌它！

我想使用向量数组，我可以在本机 C++ 程序中轻松做到这一点，但我找不到任何可在表单中使用的遍历示例。

我在 main.cpp 中包含了 cliext/vector。如果我尝试将其包含在 Form.h 中，它会告诉我我做不到。当我尝试创建一个向量数组变量时，它告诉我我有一个

语法错误缺少';' 在'<'之前

我要做的就是创建 6 个数组（int/float/2 Point/2 String^），我也可以轻松添加数据，然后稍后再读回来。

我只需要一个如何设置它的示例。

[编辑]

不确定发布不起作用的代码将如何帮助获得指向工作示例的链接，但可以肯定......我会同意的。

哦，如果我添加 using namespace cliext; 在我的 .h 文件的顶部，我被告知 cliext 不是类或命名空间。

第一次加载的错误都是关于向量语法是如何错误的……然后我得到了一大堆错误，这些错误源于后来未定义的变量。

```
#pragma once

 namespace Lab6_Draw_V1 {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
public:
    Form1(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        iPix=1;
        sColorLine="Black";
        sColor="Black";
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::Panel^  panel1;
protected: 
private: System::Windows::Forms::ColorDialog^  colorDialog1;

private: System::Windows::Forms::Label^  colorBox1;
private: System::Windows::Forms::RadioButton^  BtnPix1;
private: System::Windows::Forms::RadioButton^  BtnPix3;
private: System::Windows::Forms::RadioButton^  BtnPix5;

private: System::Windows::Forms::ToolStrip^  toolStrip1;
private: System::Windows::Forms::ToolStripButton^  toolStripBtnLine;
private: System::Windows::Forms::ToolStripButton^  toolStripBtnSquare;
private: System::Windows::Forms::ToolStripButton^  toolStripBtnEllipse;

private: System::Windows::Forms::ToolStripButton^  toolStripBtnColor;
private: System::Windows::Forms::Label^  labelPos1;
private: System::Windows::Forms::Label^  labelPos2;

private:
    /// <summary>
    /// Required designer variable.
    Point firstPoint,finalPoint,iSize;
    bool Drawing,move;
    int iShape;
    float iPix;
    String^ sColor;
    String^ sColorLine;

    vector<int> vShape;
    vector<Point> vfirstPoint;
    vector<Point> vSize;
    vector<float> vPix;
    vector<String^>^ vfillColor;
    vector<String^>^ vlineColor;

private: System::Windows::Forms::RadioButton^  BtnPix7;
private: System::Windows::Forms::RadioButton^  BtnPix10;
private: System::Windows::Forms::RadioButton^  BtnPix15;

private: System::Windows::Forms::Panel^  panel2;
private: System::Windows::Forms::ToolStripButton^  toolStripBtnLineColor;
private: System::Windows::Forms::Label^  colorBox2;
private: System::Windows::Forms::Label^  label1;
private: System::Windows::Forms::Label^  label2;

    /// </summary>
    System::ComponentModel::Container ^components;

      #pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        System::ComponentModel::ComponentResourceManager^  resources = (gcnew System::ComponentModel::ComponentResourceManager(Form1::typeid));
        this->panel1 = (gcnew System::Windows::Forms::Panel());
        this->colorDialog1 = (gcnew System::Windows::Forms::ColorDialog());
        this->colorBox1 = (gcnew System::Windows::Forms::Label());
        this->BtnPix1 = (gcnew System::Windows::Forms::RadioButton());
        this->BtnPix3 = (gcnew System::Windows::Forms::RadioButton());
        this->BtnPix5 = (gcnew System::Windows::Forms::RadioButton());
        this->toolStrip1 = (gcnew System::Windows::Forms::ToolStrip());
        this->toolStripBtnLine = (gcnew         System::Windows::Forms::ToolStripButton());
        this->toolStripBtnSquare = (gcnew System::Windows::Forms::ToolStripButton());
        this->toolStripBtnEllipse = (gcnew System::Windows::Forms::ToolStripButton());
        this->toolStripBtnColor = (gcnew System::Windows::Forms::ToolStripButton());
        this->toolStripBtnLineColor = (gcnew System::Windows::Forms::ToolStripButton());
        this->labelPos1 = (gcnew System::Windows::Forms::Label());
        this->labelPos2 = (gcnew System::Windows::Forms::Label());
        this->BtnPix7 = (gcnew System::Windows::Forms::RadioButton());
        this->BtnPix10 = (gcnew System::Windows::Forms::RadioButton());
        this->BtnPix15 = (gcnew System::Windows::Forms::RadioButton());
        this->panel2 = (gcnew System::Windows::Forms::Panel());
        this->colorBox2 = (gcnew System::Windows::Forms::Label());
        this->label1 = (gcnew System::Windows::Forms::Label());
        this->label2 = (gcnew System::Windows::Forms::Label());
        this->toolStrip1->SuspendLayout();
        this->SuspendLayout();
        // 
        // panel1
        // 
        this->panel1->BorderStyle = System::Windows::Forms::BorderStyle::Fixed3D;
        this->panel1->Location = System::Drawing::Point(160, 37);
        this->panel1->Name = L"panel1";
        this->panel1->Size = System::Drawing::Size(837, 447);
        this->panel1->TabIndex = 0;
        this->panel1->Paint += gcnew System::Windows::Forms::PaintEventHandler(this, &Form1::panel1_Paint);
        this->panel1->MouseDown += gcnew System::Windows::Forms::MouseEventHandler(this, &Form1::panel1_MouseDown);
        this->panel1->MouseMove += gcnew System::Windows::Forms::MouseEventHandler(this, &Form1::panel1_MouseMove);
        this->panel1->MouseUp += gcnew System::Windows::Forms::MouseEventHandler(this, &Form1::panel1_MouseUp);
        // 
        // colorBox1
        // 
        this->colorBox1->AutoSize = true;
        this->colorBox1->BackColor = System::Drawing::Color::White;
        this->colorBox1->BorderStyle = System::Windows::Forms::BorderStyle::Fixed3D;
        this->colorBox1->Location = System::Drawing::Point(16, 148);
        this->colorBox1->MinimumSize = System::Drawing::Size(37, 37);
        this->colorBox1->Name = L"colorBox1";
        this->colorBox1->Size = System::Drawing::Size(37, 37);
        this->colorBox1->TabIndex = 6;
        this->colorBox1->BackColorChanged += gcnew System::EventHandler(this, &Form1::colorBox1_BackColorChanged);
        // 
        // BtnPix1
        // 
        this->BtnPix1->AutoSize = true;
        this->BtnPix1->Checked = true;
        this->BtnPix1->Location = System::Drawing::Point(83, 213);
        this->BtnPix1->Name = L"BtnPix1";
        this->BtnPix1->Size = System::Drawing::Size(56, 17);
        this->BtnPix1->TabIndex = 7;
        this->BtnPix1->TabStop = true;
        this->BtnPix1->Text = L"1 Pixel";
        this->BtnPix1->UseVisualStyleBackColor = true;
        this->BtnPix1->CheckedChanged += gcnew System::EventHandler(this, &Form1::BtnPix1_CheckedChanged);
        // 
        // BtnPix3
        // 
        this->BtnPix3->AutoSize = true;
        this->BtnPix3->Location = System::Drawing::Point(83, 236);
        this->BtnPix3->Name = L"BtnPix3";
        this->BtnPix3->Size = System::Drawing::Size(56, 17);
        this->BtnPix3->TabIndex = 8;
        this->BtnPix3->Text = L"3 Pixel";
        this->BtnPix3->UseVisualStyleBackColor = true;
        this->BtnPix3->CheckedChanged += gcnew System::EventHandler(this, &Form1::BtnPix3_CheckedChanged);
        // 
        // BtnPix5
        // 
        this->BtnPix5->AutoSize = true;
        this->BtnPix5->Location = System::Drawing::Point(83, 259);
        this->BtnPix5->Name = L"BtnPix5";
        this->BtnPix5->Size = System::Drawing::Size(56, 17);
        this->BtnPix5->TabIndex = 9;
        this->BtnPix5->Text = L"5 Pixel";
        this->BtnPix5->UseVisualStyleBackColor = true;
        this->BtnPix5->CheckedChanged += gcnew System::EventHandler(this, &Form1::BtnPix5_CheckedChanged);
        // 
        // toolStrip1
        // 
        this->toolStrip1->Items->AddRange(gcnew cli::array< System::Windows::Forms::ToolStripItem^  >(5) {this->toolStripBtnLine, 
            this->toolStripBtnSquare, this->toolStripBtnEllipse, this->toolStripBtnColor, this->toolStripBtnLineColor});
        this->toolStrip1->Location = System::Drawing::Point(0, 0);
        this->toolStrip1->Name = L"toolStrip1";
        this->toolStrip1->Size = System::Drawing::Size(1016, 25);
        this->toolStrip1->TabIndex = 10;
        this->toolStrip1->Text = L"toolStrip1";
        this->toolStrip1->ItemClicked += gcnew System::Windows::Forms::ToolStripItemClickedEventHandler(this, &Form1::toolStrip1_ItemClicked);
        // 
        // toolStripBtnLine
        // 
        this->toolStripBtnLine->DisplayStyle = System::Windows::Forms::ToolStripItemDisplayStyle::Text;
        this->toolStripBtnLine->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"toolStripBtnLine.Image")));
        this->toolStripBtnLine->ImageTransparentColor = System::Drawing::Color::Magenta;
        this->toolStripBtnLine->Name = L"toolStripBtnLine";
        this->toolStripBtnLine->Size = System::Drawing::Size(33, 22);
        this->toolStripBtnLine->Text = L"Line";
        this->toolStripBtnLine->Click += gcnew System::EventHandler(this, &Form1::toolStripBtnLine_Click);
        // 
        // toolStripBtnSquare
        // 
        this->toolStripBtnSquare->DisplayStyle = System::Windows::Forms::ToolStripItemDisplayStyle::Text;
        this->toolStripBtnSquare->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"toolStripBtnSquare.Image")));
        this->toolStripBtnSquare->ImageTransparentColor = System::Drawing::Color::Magenta;
        this->toolStripBtnSquare->Name = L"toolStripBtnSquare";
        this->toolStripBtnSquare->Size = System::Drawing::Size(47, 22);
        this->toolStripBtnSquare->Text = L"Square";
        this->toolStripBtnSquare->Click += gcnew System::EventHandler(this, &Form1::toolStripBtnSquare_Click);
        // 
        // toolStripBtnEllipse
        // 
        this->toolStripBtnEllipse->DisplayStyle = System::Windows::Forms::ToolStripItemDisplayStyle::Text;
        this->toolStripBtnEllipse->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"toolStripBtnEllipse.Image")));
        this->toolStripBtnEllipse->ImageTransparentColor = System::Drawing::Color::Magenta;
        this->toolStripBtnEllipse->Name = L"toolStripBtnEllipse";
        this->toolStripBtnEllipse->Size = System::Drawing::Size(44, 22);
        this->toolStripBtnEllipse->Text = L"Ellipse";
        this->toolStripBtnEllipse->Click += gcnew System::EventHandler(this, &Form1::toolStripBtnEllipse_Click);
        // 
        // toolStripBtnColor
        // 
        this->toolStripBtnColor->DisplayStyle = System::Windows::Forms::ToolStripItemDisplayStyle::Text;
        this->toolStripBtnColor->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"toolStripBtnColor.Image")));
        this->toolStripBtnColor->ImageTransparentColor = System::Drawing::Color::Magenta;
        this->toolStripBtnColor->Name = L"toolStripBtnColor";
        this->toolStripBtnColor->Size = System::Drawing::Size(58, 22);
        this->toolStripBtnColor->Text = L"Fill Color";
        this->toolStripBtnColor->Click += gcnew System::EventHandler(this, &Form1::toolStripBtnColor_Click);
        // 
        // toolStripBtnLineColor
        // 
        this->toolStripBtnLineColor->DisplayStyle = System::Windows::Forms::ToolStripItemDisplayStyle::Text;
        this->toolStripBtnLineColor->Image = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"toolStripBtnLineColor.Image")));
        this->toolStripBtnLineColor->ImageTransparentColor = System::Drawing::Color::Magenta;
        this->toolStripBtnLineColor->Name = L"toolStripBtnLineColor";
        this->toolStripBtnLineColor->Size = System::Drawing::Size(65, 22);
        this->toolStripBtnLineColor->Text = L"Line Color";
        this->toolStripBtnLineColor->Click += gcnew System::EventHandler(this, &Form1::toolStripBtnLineColor_Click);
        // 
        // labelPos1
        // 
        this->labelPos1->AutoSize = true;
        this->labelPos1->Location = System::Drawing::Point(712, 504);
        this->labelPos1->Name = L"labelPos1";
        this->labelPos1->Size = System::Drawing::Size(35, 13);
        this->labelPos1->TabIndex = 11;
        this->labelPos1->Text = L"label1";
        // 
        // labelPos2
        // 
        this->labelPos2->AutoSize = true;
        this->labelPos2->Location = System::Drawing::Point(848, 504);
        this->labelPos2->Name = L"labelPos2";
        this->labelPos2->Size = System::Drawing::Size(35, 13);
        this->labelPos2->TabIndex = 12;
        this->labelPos2->Text = L"label2";
        // 
        // BtnPix7
        // 
        this->BtnPix7->AutoSize = true;
        this->BtnPix7->Location = System::Drawing::Point(83, 282);
        this->BtnPix7->Name = L"BtnPix7";
        this->BtnPix7->Size = System::Drawing::Size(56, 17);
        this->BtnPix7->TabIndex = 13;
        this->BtnPix7->Text = L"7 Pixel";
        this->BtnPix7->UseVisualStyleBackColor = true;
        this->BtnPix7->CheckedChanged += gcnew System::EventHandler(this, &Form1::BtnPix7_CheckedChanged);
        // 
        // BtnPix10
        // 
        this->BtnPix10->AutoSize = true;
        this->BtnPix10->Location = System::Drawing::Point(83, 306);
        this->BtnPix10->Name = L"BtnPix10";
        this->BtnPix10->Size = System::Drawing::Size(62, 17);
        this->BtnPix10->TabIndex = 14;
        this->BtnPix10->Text = L"10 Pixel";
        this->BtnPix10->UseVisualStyleBackColor = true;
        this->BtnPix10->CheckedChanged += gcnew System::EventHandler(this, &Form1::BtnPix10_CheckedChanged);
        // 
        // BtnPix15
        // 
        this->BtnPix15->AutoSize = true;
        this->BtnPix15->Location = System::Drawing::Point(83, 329);
        this->BtnPix15->Name = L"BtnPix15";
        this->BtnPix15->Size = System::Drawing::Size(62, 17);
        this->BtnPix15->TabIndex = 15;
        this->BtnPix15->Text = L"15 Pixel";
        this->BtnPix15->UseVisualStyleBackColor = true;
        this->BtnPix15->CheckedChanged += gcnew System::EventHandler(this, &Form1::BtnPix15_CheckedChanged);
        // 
        // panel2
        // 
        this->panel2->BackColor = System::Drawing::Color::White;
        this->panel2->BorderStyle = System::Windows::Forms::BorderStyle::Fixed3D;
        this->panel2->Location = System::Drawing::Point(83, 148);
        this->panel2->Name = L"panel2";
        this->panel2->Size = System::Drawing::Size(37, 37);
        this->panel2->TabIndex = 17;
        // 
        // colorBox2
        // 
        this->colorBox2->AutoSize = true;
        this->colorBox2->BackColor = System::Drawing::Color::Black;
        this->colorBox2->BorderStyle = System::Windows::Forms::BorderStyle::Fixed3D;
        this->colorBox2->Location = System::Drawing::Point(16, 213);
        this->colorBox2->MinimumSize = System::Drawing::Size(37, 37);
        this->colorBox2->Name = L"colorBox2";
        this->colorBox2->Size = System::Drawing::Size(37, 37);
        this->colorBox2->TabIndex = 18;
        this->colorBox2->BackColorChanged += gcnew System::EventHandler(this, &Form1::colorBox2_BackColorChanged);
        // 
        // label1
        // 
        this->label1->AutoSize = true;
        this->label1->Location = System::Drawing::Point(8, 250);
        this->label1->Name = L"label1";
        this->label1->Size = System::Drawing::Size(54, 13);
        this->label1->TabIndex = 19;
        this->label1->Text = L"Line Color";
        // 
        // label2
        // 
        this->label2->AutoSize = true;
        this->label2->Location = System::Drawing::Point(12, 185);
        this->label2->Name = L"label2";
        this->label2->Size = System::Drawing::Size(46, 13);
        this->label2->TabIndex = 20;
        this->label2->Text = L"Fill Color";
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->BackColor = System::Drawing::SystemColors::Control;
        this->ClientSize = System::Drawing::Size(1016, 538);
        this->Controls->Add(this->label2);
        this->Controls->Add(this->label1);
        this->Controls->Add(this->colorBox2);
        this->Controls->Add(this->panel2);
        this->Controls->Add(this->BtnPix15);
        this->Controls->Add(this->BtnPix10);
        this->Controls->Add(this->BtnPix7);
        this->Controls->Add(this->labelPos2);
        this->Controls->Add(this->labelPos1);
        this->Controls->Add(this->toolStrip1);
        this->Controls->Add(this->BtnPix5);
        this->Controls->Add(this->BtnPix3);
        this->Controls->Add(this->BtnPix1);
        this->Controls->Add(this->colorBox1);
        this->Controls->Add(this->panel1);
        this->Icon = (cli::safe_cast<System::Drawing::Icon^  >(resources->GetObject(L"$this.Icon")));
        this->MinimumSize = System::Drawing::Size(1024, 530);
        this->Name = L"Form1";
        this->Text = L"Lab 6 Paint";
        this->toolStrip1->ResumeLayout(false);
        this->toolStrip1->PerformLayout();
        this->ResumeLayout(false);
        this->PerformLayout();

    }
    #pragma endregion
private: System::Void btnColor_Click(System::Object^  sender, System::EventArgs^  e) {

         }
    private: System::Void panel1_Paint(System::Object^  sender, System::Windows::Forms::PaintEventArgs^  e) {

         //  Loop with case statements for the shapes and colours
         // grab data from vector array

     }
    private: System::Void toolStripBtnColor_Click(System::Object^  sender, System::EventArgs^  e) {
        ColorDialog^ MyDialog = gcnew ColorDialog;
  // Keeps the user from selecting a custom color.
  MyDialog->AllowFullOpen = false;
  // Allows the user to get help. (The default is false.)
  MyDialog->ShowHelp = true;
  // Sets the initial color select to the current text color.
  MyDialog->Color = panel1->ForeColor;

  // Update the text box color if the user clicks OK  
  if ( MyDialog->ShowDialog() == ::System::Windows::Forms::DialogResult::OK )
         {
            colorBox1->BackColor= MyDialog->Color;
            sColor = Convert::ToString(colorBox1->BackColor);
        //  labelColor->Text=sColor;
         }
     }
     private: System::Void panel1_MouseDown(System::Object^  sender, System::Windows::Forms::MouseEventArgs^  e) {
        if( e->Button== System::Windows::Forms::MouseButtons::Left)
            {
             Drawing = true;
             firstPoint = e->Location;
             labelPos1->Text = Convert::ToString(e->Location);
             // set shape flag
            } 
        if( e->Button== System::Windows::Forms::MouseButtons::Right)
            {
            move=true;
            iSize.X=finalPoint.X-firstPoint.X;
            iSize.Y=finalPoint.Y-firstPoint.Y;
            } 

        }
     private: System::Void toolStrip1_ItemClicked(System::Object^  sender, System::Windows::Forms::ToolStripItemClickedEventArgs^  e) {
              }

          private: System::Void panel1_MouseMove(System::Object^  sender, System::Windows::Forms::MouseEventArgs^  e) 
     { 
```

// tempPos=e->位置；labelPos2->Text = Convert::ToString(e->Location);

```
 if(Drawing)
         {
             //draw temp outline with no fill and black outline
              panel1->Refresh();
             auto g = panel1->CreateGraphics();

             switch(iShape)
             {
             case 1:
                 g->DrawLine(Pens::Black,firstPoint,e->Location);
                 break;
             case 2:
                 g->DrawRectangle(Pens::Black,firstPoint.X,firstPoint.Y,(e->Location.X-firstPoint.X),(e->Location.Y-firstPoint.Y));
                 break;
             case 3:
                 g->DrawEllipse(Pens::Black,firstPoint.X,firstPoint.Y,(e->Location.X-firstPoint.X),(e->Location.Y-firstPoint.Y));
             default:break;

             }

         }
         if(move)
         {
             //code
             panel1->Refresh();
             auto g = panel1->CreateGraphics();
             firstPoint=e->Location;
             SolidBrush^ myBrush = gcnew SolidBrush(Color::FromArgb(colorBox1->BackColor.A,colorBox1->BackColor.R,colorBox1->BackColor.G,colorBox1->BackColor.B) );
             Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
             myPen->Width = iPix;

             switch(iShape)
             {
             case 1:
                 finalPoint.X=iSize.X+firstPoint.X;
                 finalPoint.Y=iSize.Y+firstPoint.Y;
                 g->DrawLine(myPen,firstPoint,finalPoint);
                 break;
             case 2:
                 g->FillRectangle(myBrush,firstPoint.X,firstPoint.Y,iSize.X,iSize.Y);
                 g->DrawRectangle(myPen,firstPoint.X,firstPoint.Y,iSize.X,iSize.Y);
                 break;
             case 3:
                 g->FillEllipse(myBrush,firstPoint.X,firstPoint.Y,iSize.X,iSize.Y);
                 g->DrawEllipse(myPen,firstPoint.X,firstPoint.Y,iSize.X,iSize.Y);
                 break;
             default:break;
            }
         }

     }
          private: System::Void panel1_MouseUp(System::Object^  sender, System::Windows::Forms::MouseEventArgs^  e) 
     {
         if( e->Button== System::Windows::Forms::MouseButtons::Left)
            {
             finalPoint = e->Location;
             labelPos2->Text = Convert::ToString(e->Location);
             // draw filled shape

             panel1->Refresh();
             auto g = panel1->CreateGraphics();
             SolidBrush^ myBrush = gcnew SolidBrush(Color::FromArgb(colorBox1->BackColor.A,colorBox1->BackColor.R,colorBox1->BackColor.G,colorBox1->BackColor.B) );
             Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
             myPen->Width = iPix;

             switch(iShape)
             {
             case 1:
                 g->DrawLine(myPen,firstPoint,finalPoint);
                 break;
             case 2:
                 g->FillRectangle(myBrush,firstPoint.X,firstPoint.Y,(e->Location.X-firstPoint.X),(e->Location.Y-firstPoint.Y));
                 g->DrawRectangle(myPen,firstPoint.X,firstPoint.Y,(e->Location.X-firstPoint.X),(e->Location.Y-firstPoint.Y));
                 break;
             case 3:
                 g->FillEllipse(myBrush,firstPoint.X,firstPoint.Y,(e->Location.X-firstPoint.X),(e->Location.Y-firstPoint.Y));
                 g->DrawEllipse(myPen,firstPoint.X,firstPoint.Y,(e->Location.X-firstPoint.X),(e->Location.Y-firstPoint.Y));
                 break;
             default:break;

             }
             iSize.X=finalPoint.X-firstPoint.X;
             iSzie.Y=finalPoint.Y-firstPoint.Y;

             vShape.push_back (iShape);
             vfirstPoint.push_back (firstPoint);
             vSize.push_back (iSize);
             vfillColor.push_back (myBrush);
             vlineColor.push_back (myPen);
             vPix.push_back (iPix);

             Drawing=false;
            }
         else move=false;
     }
          private: System::Void toolStripBtnLine_Click(System::Object^  sender, System::EventArgs^  e) {
         iShape=1;
     }
          private: System::Void toolStripBtnSquare_Click(System::Object^  sender, System::EventArgs^  e) {
         iShape=2;

     }
         private: System::Void toolStripBtnEllipse_Click(System::Object^  sender, System::EventArgs^  e) {
         iShape=3;
     }
         private: System::Void BtnPix1_CheckedChanged(System::Object^  sender, System::EventArgs^  e) {
         iPix=1;
         panel2->Refresh();
         auto g = panel2->CreateGraphics();
         Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
         myPen->Width = iPix;
         g->DrawLine(myPen,2,18,33,18);
     }
           private: System::Void BtnPix3_CheckedChanged(System::Object^  sender, System::EventArgs^  e) {
         iPix=3;
         panel2->Refresh();
         auto g = panel2->CreateGraphics();
         Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
         myPen->Width = iPix;
         g->DrawLine(myPen,2,18,33,18);
     }
          private: System::Void BtnPix5_CheckedChanged(System::Object^  sender, System::EventArgs^  e) {
         iPix=5;
         panel2->Refresh();
         auto g = panel2->CreateGraphics();
         Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
         myPen->Width = iPix;
         g->DrawLine(myPen,2,18,33,18);
     }
         private: System::Void BtnPix7_CheckedChanged(System::Object^  sender, System::EventArgs^  e) {
         iPix=7;
         panel2->Refresh();
         auto g = panel2->CreateGraphics();
         Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
         myPen->Width = iPix;
         g->DrawLine(myPen,2,18,33,18);
     }
           private: System::Void BtnPix10_CheckedChanged(System::Object^  sender, System::EventArgs^  e) {
         iPix=10;
         panel2->Refresh();
         auto g = panel2->CreateGraphics();
         Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
         myPen->Width = iPix;
         g->DrawLine(myPen,2,18,33,18);
     }
            private: System::Void BtnPix15_CheckedChanged(System::Object^  sender, System::EventArgs^  e) {
         iPix=15;
         panel2->Refresh();
         auto g = panel2->CreateGraphics();
         Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
         myPen->Width = iPix;
         g->DrawLine(myPen,2,18,33,18);
     }
            private: System::Void toolStripBtnLineColor_Click(System::Object^  sender, System::EventArgs^  e) {
    ColorDialog^ MyDialog = gcnew ColorDialog;
    // Keeps the user from selecting a custom color.
    MyDialog->AllowFullOpen = false;
    // Allows the user to get help. (The default is false.)
    MyDialog->ShowHelp = true;
    // Sets the initial color select to the current text color.
    MyDialog->Color = colorBox2->BackColor;

  // Update the text box color if the user clicks OK  
  if ( MyDialog->ShowDialog() == ::System::Windows::Forms::DialogResult::OK )
         {
            sColorLine = Convert::ToString(MyDialog->Color);
        //  labelColorLine->Text=sColorLine;
            colorBox2->BackColor= MyDialog->Color;
         }
     }
           private: System::Void colorBox1_BackColorChanged(System::Object^  sender, System::EventArgs^  e) {
          panel1->Refresh();
             auto g = panel1->CreateGraphics();
             SolidBrush^ myBrush = gcnew SolidBrush(Color::FromArgb(colorBox1->BackColor.A,colorBox1->BackColor.R,colorBox1->BackColor.G,colorBox1->BackColor.B) );
             Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
             myPen->Width = iPix;

             switch(iShape)
             {
             case 1:
                 g->DrawLine(myPen,firstPoint,finalPoint);
                 break;
             case 2:
                 g->FillRectangle(myBrush,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 g->DrawRectangle(myPen,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 break;
             case 3:
                 g->FillEllipse(myBrush,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 g->DrawEllipse(myPen,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 break;
             default:break;
            } 
     }
           private: System::Void colorBox2_BackColorChanged(System::Object^  sender, System::EventArgs^  e) {
             panel1->Refresh();
             auto g = panel1->CreateGraphics();
             SolidBrush^ myBrush = gcnew SolidBrush(Color::FromArgb(colorBox1->BackColor.A,colorBox1->BackColor.R,colorBox1->BackColor.G,colorBox1->BackColor.B) );
             Pen^ myPen = gcnew Pen(Color::FromArgb(colorBox2->BackColor.A,colorBox2->BackColor.R,colorBox2->BackColor.G,colorBox2->BackColor.B) );
             myPen->Width = iPix;

             switch(iShape)
             {
             case 1:
                 g->DrawLine(myPen,firstPoint,finalPoint);
                 break;
             case 2:
                 g->FillRectangle(myBrush,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 g->DrawRectangle(myPen,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 break;
             case 3:
                 g->FillEllipse(myBrush,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 g->DrawEllipse(myPen,firstPoint.X,firstPoint.Y,(finalPoint.X-firstPoint.X),(finalPoint.Y-firstPoint.Y));
                 break;
             default:break;
            } 
     } 
```

}; }

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T03:08:18.413

如果您不专注于使用名为 的函数`push_back`，但`Add`可以使用 ，则可以使用 .NET 提供的集合来存储 .NET 数据。

```
using namespace System::Collections::Generic;

List<int> vShape;
List<Point> vfirstPoint;
List<Point> vSize;
List<float> vPix;
List<String^> vfillColor;
List<String^> vlineColor; 
```

`System::Collections::Generic::List<T>`类似于`std::vector`。 `System::Collections::Generic::LinkedList<T>`到`std::list`和`System::Collections::Generic::Dictionary<TKey, TValue>`到`std::unordered_map`。

# jquery - 中止 .ajax 请求并停止下载文件

> ID：13281502
> 
> 赞同：0
> 
> 时间：2012-11-08T02:18:34.280
> 
> 标签：jquery, ajax

如果这是重新发布，我很抱歉，但我无法弄清楚。我正在加载一个充满图像的页面，如果用户在下载图像之前离开，我想停止下载。我认为我有 abort() 工作，但文件继续下载。

```
$(document).ready(function(){
var jqXHR;
$('.buttons li#stop').click(function(){
    jqXHR.abort();
    alert('aborted');
}); 
$('.buttons li#start').click(function(){
    jqXHR = $.ajax({
    dataType:"html",
    url:"images.php",
    success: function(data){
        $('.pageContent').html(data);
    }
    });         
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:30:30.480

您的 jqXHR 可能已经完成，并且您获得的 HTML 已经插入到 .pageContent 中。浏览器正在下载 HTML 中指定的图像，因此您无法通过中止 jqXHR 来停止它。

您可以尝试将 .pageContent 的 html 设置为空，但我不知道这是否会按您的预期工作。

```
$(document).ready(function(){
    var jqXHR;
    $('.buttons li#stop').click(function(){
        jqXHR.abort();
        $('.pageContent').html(data);
        alert('aborted');
    }); 
    $('.buttons li#start').click(function(){
        jqXHR = $.ajax({
        dataType:"html",
        url:"images.php",
        success: function(data){
            $('.pageContent').html(data);
        }
        });         
    });     
}); 
```

或者您可以点击浏览器的停止按钮。

# struts2 - 接受属性不起作用 struts2的标签

> ID：13281503
> 
> 赞同：1
> 
> 时间：2012-11-08T02:18:48.457
> 
> 标签：struts2, struts-validation

我正在尝试使用接受属性验证上传文件的内容类型，但它似乎不起作用。这是我的代码。

```
<s:file theme="simple" name="fileUpload" accept="image/jpeg"/> 
```

我也试过

```
<s:file theme="simple" name="fileUpload" accept="image/*"/> 
```

两者都不起作用可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:22:59.193

`accept`IE 和 Safari 不支持HTML属性。您可以为文件上传操作定义允许的 mime 类型，`struts.xml`如下所示：

```
<action name="..." class="...">
  <interceptor-ref name="defaultStack">
     <param name="fileUpload.allowedTypes">image/jpeg</param>
  </interceptor-ref>
  <result>...</result>
</action> 
```

[`fileUpload`](http://struts.apache.org/development/2.x/docs/file-upload-interceptor.html)查看您可以在拦截器中配置的其他参数。

# java - 防止在 JSF 对话框 AJAX CRUD 上重复提交

> ID：13281507
> 
> 赞同：1
> 
> 时间：2012-11-08T02:19:33.323
> 
> 标签：java, ajax, jsf-2, primefaces

只是想知道为什么我会在我的应用程序中遇到这种行为。

我在 UI 中使用了 primefaces，几乎我所有的页面都遵循这种模式。我在所有 CRUD 操作中大量使用 AJAX，并使用对话框将其展示给用户。

```
<ui:composition template="myTemplate.xhtml">
    <ui:define name="content">
        <ui:include
            src="/pages/CreateDialog.xhtml" />
        <ui:include
            src="/pages/UpdateDialog.xhtml" />
        <ui:include
            src="/pages/DeleteDialog.xhtml" />
    </ui:define>
</ui:composition> 
```

我唯一担心的是，在我的对话框中执行 CRUD 之后，用户不小心点击了 F5 或在浏览器上刷新，总是提到 FF/Chrome 和其他浏览器

```
To display this page, Firefox must send repeat action... 
```

显然这会导致双重提交。以前我在旧应用程序的这种情况下使用 Post-Redirect-Get，但由于这是 AJAX JSF 更新，所以我不能这样做。

有什么解决方法，这是正常的吗？我认为在浏览器刷新期间不应再次触发 AJAX 操作。

帮助？

**更新**

我正在用这段代码打开我的对话框

```
<p:commandButton value="Add" 
        onclick="createWidget.show();"
        update=":CreateForm"
        action="#{MyBean.add}" 
        /> 
```

我的创建对话框使用这个

```
<p:dialog  header="Create">
    <h:form id="CreateForm" prependId="false">
        <p:commandButton value="Add" icon="ui-icon-plus"
            actionListener="#{MyBean.add}"
            update=":messageGrowl" 
            oncomplete="closeDialogIfSucess(xhr, status, args, createWidget 'createDialogId')"/>
    </h:form>
</p:dialog> 
```

我实际上正在关注这个站点的页面......[完整的 WebApplication JSF EJB JPA JAAS](http://uaihebert.com/?p=834)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T06:20:19.713

已经经历过几次回调方法中的 JavaScript 错误最终会导致这种行为。我能够重现您在更正回调签名后消失的问题：

```
oncomplete="closeDialogIfSucess(xhr, status, args, createWidget, 'createDialogId')" 
```

根据您的 JavaScript 函数签名：

```
function closeDialogIfSucess(xhr, status, args, createWidget, dialogid) 
```

（如果您的 JavaScript 调用只有 3 个参数，请更正`oncomplete`调用）

无关：我猜你正在使用这个函数来关闭一个特定的对话框。另一种方法是将`widgetVar`属性分配给您的对话框：

```
<p:dialog id="testDialog"  header="Create" widgetVar="createWidget">
    <h:form id="CreateForm" prependId="false">
        ...
    </h:form>
</p:dialog> 
```

该`widgetVar`对象将在回调函数中表示您的对话框，因此您可以通过调用`hide()`对话框的函数来关闭它：

```
function closeDialogIfSucess(xhr, status, args, createWidget) {
    if(args.validationFailed || !args.loggedIn) {  
        jQuery('#testDialog').effect("shake", { times:3 }, 100);  
    } else {  
        createWidget.hide();  
    }  
} 
```

# html - 尝试将表格背景图像设置为“包含”

> ID：13281509
> 
> 赞同：0
> 
> 时间：2012-11-08T02:19:41.970
> 
> 标签：html, css

我正在尝试在表格单元格上设置背景图像以“包含”png 图像。图像宽约 1400 像素。它只是显示图像的一小部分。我以为它会按比例重新调整大小。使用 IE9。请指教。

```
<head>
<style>
.yes
{
 background-image: url(fullfamily.png);
 background-attachment: fixed;
 background-repeat: no-repeat;
 background-size: contain;
 -moz-background-size: contain;

 /* these two don't work */
 -webkit-background-size: contain;
 -o-background-size: contain;
  }
  </style>
  </head>

 <body><table width="500" height="500" ><tr><td class="yes"></td></tr></table>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:25:00.260

> **包含**
> 
> 该关键字指定背景图像在确保其尺寸小于或等于背景定位区域的对应尺寸的同时，应尽可能地缩放。

该`cover`属性可能是您正在寻找的 - 它将确保整个图像可见，如果它比可用空间更宽或更高，则基本上将其裁剪：

> **覆盖**
> 
> 该关键字指定背景图像在确保其尺寸大于或等于背景定位区域的对应尺寸的同时，应尽可能缩小。

[https://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

# python - 列表创建不正确

> ID：13281511
> 
> 赞同：2
> 
> 时间：2012-11-08T02:20:02.093
> 
> 标签：python

我正在尝试根据下面的输入创建一个列表，但我没有看到预期的输出。谁能建议我哪里出错了？

**输入：**

```
CR  FA  CL  Title
409452  WLAN    656885  Age out RSSI values from buffer in Beacon miss scenario
415560  WLAN    656886  To Record SMD Event Logging 
```

我想要一个像

```
[['CR', 'FA', 'CL', 'TITLE'], ['409452', 'WLAN', '656885', 'Age out RSSI values from buffer in Beacon miss scenario'], ['415560', 'WLAN', '656886','To Record SMD Event Logging']] 
```

但我看到它的创建就像

```
[['CR', 'FA', 'CL', 'TITLE'], ['', '409452', 'WLAN', '656885\tAge out RSSI values from buffer in Beacon miss scenario'], ['', '415560', 'WLAN', '656886\tTo Record SMD Event Logging']] 
```

Python代码

```
 for i in info.splitlines():
    index = re.split(r'\W+',i,3)
    CRlist.append(index) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:33:26.693

如果在每行的开头但第一行有额外的空格，那么您得到的输出正是您所期望的。

造成这种情况的一个常见原因是，您尝试解析具有错误行尾的文件，而没有使用通用换行符模式，结果让事情变得无可救药。

例如，这两行在您的文本编辑器中可能看起来相同：

```
409452  WLAN    656885  Age out RSSI values from buffer in Beacon miss scenario
\r409452  WLAN    656885  Age out RSSI values from buffer in Beacon miss scenario 
```

但是你`re.split`会对他们做非常不同的事情：

```
['409452', 'WLAN', '656885', 'Age out RSSI values from buffer in Beacon miss scenario']
['', '409452', 'WLAN', '656885\tAge out RSSI values from buffer in Beacon miss scenario'] 
```

解决方案是去除多余的空白。你可以尝试写一个更复杂的正则表达式，或者直接做`re.split(r'\W+', s.lstrip(), 3)`.

既然您提到要删除尾随空格，请使用`strip`而不是`lstrip`: `re.split(r'\W+', s.strip(), 3)`。

但我不确定你为什么一开始就使用正则表达式，而你可以这样做`s.strip().split(None, 3)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:34:06.997

我觉得你应该使用`csv`模块，但这是一个非正则表达式的解决方案：

```
>>> s = '''CR  FA  CL  Title
... 409452  WLAN    656885  Age out RSSI values from buffer in Beacon miss scenario
... 415560  WLAN    656886  To Record SMD Event Logging'''
>>> [x.strip().split(None, 3) for x in s.splitlines()]
[['CR', 'FA', 'CL', 'Title'], ['409452', 'WLAN', '656885', 'Age out RSSI values from buffer in Beacon miss scenario'], ['415560', 'WLAN', '656886', 'To Record SMD Event Logging']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:34:33.097

如果您将 \t 作为分隔符，则可以使用此分隔符（请注意，您可以使用 strip 并检查 item.strip() 是否为空条目，如果是则跳过它）：

```
info = """
          CR  FA  CL  Title
          409452  WLAN    656885  Age out RSSI values from buffer in Beacon miss scenario
          415560  WLAN    656886  To Record SMD Event Logging
       """
[[x.strip() for x in row.split('\t') if x.strip()] for row in info.split('\n')] 
```

如果您在列之间有多个空格，您可以尝试使用这个：

```
[[x.strip() for x in row.split('  ') if x.strip()] for row in info.split('\n')] 
```

或结合：

```
[[x.strip() for x in row.replace('\t', '  ').split('  ') if x.strip()] for row in info.split('\n')] 
```

最后使用 split(None, 3):

```
[row.split(None, 3) for row in info.split('\n')] 
```

# jquery - 我的 Rails 应用程序可以在 localhost 上运行，但不能在 Heroku 上运行

> ID：13281514
> 
> 赞同：0
> 
> 时间：2012-11-08T02:20:22.980
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui, heroku, modal-dialog

我是 Rails 新手，目前我有一个可以在 localhost 上完美运行的 Rails 应用程序，但是当我将它部署到 Heroku.com 时，我仍然可以看到主页，当我导航到另一个页面时，它会显示错误。我尝试使用此命令“heroku logs”

这里的日志

```
ActionView::Template::Error (undefined method `link_to_modal' for #<#<Class:0x000000046b8a10>:0x000000046b4500>): 
```

这可能是我认为我有“link_to_modal”方法的原因吗？

```
<p class="text"><%= link_to_modal "+Add Album", "#addalbum" %><p> 
```

它在我的计算机上正常工作，但在 heroku 上不能正常工作，所以我想知道我能用它做什么，这个方法伴随着我正在使用的这个 gem [“jquery-modal-rails”](https://github.com/dei79/jquery-modal-rails)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:42:41.667

将这些行添加到您的 config/production.rb 文件中

```
require 'jquery/modal/rails'
require 'jquery/modal/filters'
require 'jquery/modal/helpers' 
```

# html - 图像位置不起作用

> ID：13281519
> 
> 赞同：0
> 
> 时间：2012-11-08T02:21:20.810
> 
> 标签：html, css, animate.css

如果我重新调整浏览器的大小，我似乎无法让 boxclosed1.png 留在同一个位置。有人有什么想法吗？我正在用 chrome 进行测试。我试图按照此链接上发布的内容进行操作：[CSS：位置绝对调整大小失败](https://stackoverflow.com/questions/3442943/css-position-absolute-fails-in-resizing)

**编辑**：所以我尝试取出所有其他物品（草等），然后它似乎定位正确。在这种情况下，我需要更改我当前在 div 和样式中的设置以使其协同工作？

代码：

**html**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3c.org/TR/xhtml11/DTD/xhtml11-strict.dtd">

<!-- START HTML -->
<html>

    <!-- START HEAD -->
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <link rel="stylesheet" type="text/css" href="css/27.css" />

    <!-- END HEAD -->
    </head>

    <!-- START BODY -->
    <body>

        <div id="cont">
 <a href="malmo/"><img class="animated bounceInDown" src="boxclosed1.png" alt="Malmö"></a>
        </div>

    <!-- END BODY -->
    </body>

<!-- END HTML -->
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:08:54.567

如果您放置在相对定位`boxclosed1.png`的内部，则图像仍将相对于其父级*绝对定位，如果调整浏览器大小，它将移动......图像也是如此。*`position: absolute``<div>`

 *将图像移出任何容器（在`</body>`结束标记之前）并给它一个`position: fixed`AND 设置它相对于页面的位置`bottom`，例如`right`

```
.fixed { position: fixed; bottom: 20px; right: 20px; } 
```

检查（并调整大小）**[小提琴](http://jsfiddle.net/seeXU/)**

顺便说一句，为了避免意外的跨浏览器结果，我不会设置标签`width`或`height`既不放置标签（除非您确切知道自己在做什么）`html`*

# ios - 在 NSMutableArray 中访问 NSMutableDictionary

> ID：13281528
> 
> 赞同：0
> 
> 时间：2012-11-08T02:22:48.780
> 
> 标签：ios, nsmutablearray, plist, nsmutabledictionary

我有一个`NSMutableArray`（`NSMutableDictionary`它是一个 plist）。数组中的每个字典都有 2 个键：' `id`' 和 ' `lu`'。

如何在 where 中找到索引`NSMutableArray`，`NSMutableDictionary`例如`id`= '47653'？

我试图这样做，但它不工作：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *path = [basePath stringByAppendingPathComponent:@"id.plist"];
NSMutableArray *mut_array = [[NSArray arrayWithContentsOfFile:path] mutableCopy];

NSMutableDictionary *mut_dico = [[NSMutableDictionary alloc] init];

NSString *egalIDPlistData = [contentDictio objectForKey:@"id"];

for(mut_dico in mut_array) {
    if([[mut_dico objectForKey:@"id"] isEqualToString:@"47653"]) {
        NSLog(@"Test");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:52:08.277

`NSMutableArray *mut_array = [[NSArray arrayWithContentsOfFile:path] mutableCopy];`将创建一个不可变字典的可变数组，而不是可变字典。`mutableCopy`不是深拷贝。

无论可变性如何，以下内容都可以满足您的要求：

```
NSUInteger indexOfDictionary = [[array valueForKey:@"id"] indexOfObject:@"49711"];

if(indexOfDictionary == NSNotFound)
{
    NSLog(@"no matching objects found!");
    return;
}

NSDictionary *fullDictionary = [array objectAtIndex:indexOfObject]; 
```

使用`valueForKey:`了这样一个事实，即对数组的键值编码调用以相同的顺序返回对数组中每个对象的调用结果的数组，以及在这种情况下对两者的`NSDictionary`响应类似的事实`valueForKey:``objectForKey:`

至于您真正处理的是字符串还是数字的问题，请尝试使用 just`@49711`代替，`@"49711"`如果可行，则您有数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:55:21.463

在您的日志中，ID 为 49711，而在您的 if 条件中，它为 47653。在您的数组中存在 id = 47653 的字典之前，您的条件不会满足

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T02:46:08.650

加载的 plist 中的对象是不可变的。

尝试：

```
for(NSDictionary * dict in mut_array)
{
    if([[dict objectForKey:@"id"] isEqualToString:@"49711"]) {
        NSLog(@"Test");
    }
} 
```

# java - 运行驱动程序时线程“main”中的异常 java.util.InputMismatchException 错误

> ID：13281531
> 
> 赞同：0
> 
> 时间：2012-11-08T02:22:58.470
> 
> 标签：java, exception

我的代码全部编译，但在运行驱动程序时我不断收到错误消息。错误是

线程“主”中的异常`java.util.InputMismatchException`

```
 at java.util.Scanner.throwFor(Scanner.java:909)
    at java.util.Scanner.next(Scanner.java:1530)
    at java.util.Scanner.nextInt(Scanner.java:2160)
    at java.util.Scanner.nextInt(Scanner.java:2119)
    at University.readFromFile(University.java:174)
    at TestDriver2.main(TestDriver2.java:8) 
```

我的代码主体是：

```
//read from file
public static University readFromFile(String filename) throws EmptyFileException {
File file = new File(filename);
University university = null;
Scanner in = null;
try {
    in = new Scanner(file);
    String str = in.nextLine();
    Scanner in2 = new Scanner(str).useDelimiter(":");
    in2.next(); 
    String uName = in2.next();

    //Read University info
    str = in.nextLine();
    in2 = new Scanner(str).useDelimiter(":");
    in2.next(); 
    String uTerm = in2.next();
    str = in.nextLine();
    in2 = new Scanner(str).useDelimiter(":");
    in2.next(); 
    int uYear = in2.nextInt();
    str = in.nextLine();
    in2 = new Scanner(str).useDelimiter(":");
    in2.next(); 
    int uNumStudents = in2.nextInt();
    str = in.nextLine();
    in2 = new Scanner(str).useDelimiter(":");
    in2.next(); 
    int uNumInstructors = in2.nextInt();
    str = in.nextLine();
    in2 = new Scanner(str).useDelimiter(":");
    in2.next(); 
    int uNumCourses = in2.nextInt();

    //Create and read arrays of objects
    Student[] uStudents = new Student[uNumStudents];
    for(int i = 0; i < uNumStudents; i++)
                    uStudents[i] = readStudent(in);

    Instructor[] uInstructors = new Instructor[uNumInstructors];
    for(int i = 0; i < uNumInstructors; i++)
                    uInstructors[i] = readInstructor(in);

                //Create array of possible TAs to pass into readCourse method
                GradStudent[] gStudents = new GradStudent[uNumStudents];
                for(int j=0; j<uStudents.length; j++) {
                    for(int i=0; i<uStudents.length; i++) {
                        if(uStudents[i] instanceof GradStudent)
                            gStudents[j] = (GradStudent) uStudents[i];
                    }
                } 

    Course[] uCourses = new Course[uNumCourses];
    for(int i = 0; i < uNumCourses; i++)
                    uCourses[i] = readCourse(in, uInstructors, gStudents, uStudents);

    //Create University object
    university = new University(uName, uTerm, uYear, uStudents, uInstructors, uCourses);
    return university;

} catch (FileNotFoundException fe) {
    fe.printStackTrace();
    return null;
} 
```

异常文件：

```
public class EmptyFileException extends Exception {
    String filename;
    EmptyFileException() { }

    EmptyFileException(String filename) {
        this.filename = filename;
    }

    public String toString() {
        return "The file " + filename + " is empty.";
    }
} 
```

还有司机：

```
public class TestDriver2 {

public static void main(String[] args) throws EmptyFileException {

    University ufl = University.readFromFile("university.txt");

            if (ufl != null) {
                System.out.println("\n--Printing out University info--");
                System.out.println(ufl);

                System.out.println("\n--Printing out Students info--");
                Student[] students = ufl.getStudents();
                for (Student s : students)
                        System.out.println("\n" + s);
            }
    }
} 
```

# r - 在R中获取矩阵列的加权和的最快方法

> ID：13281532
> 
> 赞同：8
> 
> 时间：2012-11-08T02:23:03.717
> 
> 标签：r, sum, weighted

我需要矩阵每一列的加权和。

```
data <- matrix(1:2e7,1e7,2) # warning large number, will eat up >100 megs of memory
weights <- 1:1e7/1e5
system.time(colSums(data*weights))
system.time(apply(data,2,function(x) sum(x*weights)))
all.equal(colSums(data*weights), apply(data,2,function(x) sum(x*weights))) 
```

通常`colSums(data*weights)`比应用调用更快。

我经常做这个操作（在一个大矩阵上）。因此，寻求有关最有效实施的建议。理想情况下，如果我们可以将权重传递给 colSums（或 rowSums），那就太好了。

谢谢，感谢任何见解！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T02:33:51.037

`colSums`并且`*`都是内部或原始函数，并且将比该`apply`方法快得多

您可以尝试的另一种方法是在寻找时使用一些基本的矩阵代数

```
 weights %*% data 
```

矩阵乘法方法似乎并没有更快，但它会避免创建一个大小为`data`

```
system.time({.y <- colSums(data * weights)})
##  user  system elapsed 
##  0.12    0.03    0.16 

system.time({.x <- weights %*% data})
##   user  system elapsed 
##   0.20    0.05    0.25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T09:33:36.847

Rcpp 导致性能提升（特别是在列数较多的情况下）。

```
library(Rcpp)
library(inline)
src <- '
 Rcpp::NumericMatrix dataR(data);
 Rcpp::NumericVector weightsR(weights);
 int ncol = dataR.ncol();
 Rcpp::NumericVector sumR(ncol);
 for (int col = 0; col<ncol; col++){
   sumR[col] = Rcpp::sum(dataR( _, col)*weightsR);
 }
 return Rcpp::wrap(sumR);'

weighted.colSums <- cxxfunction(
  signature(data="numeric", weights="numeric"), src, plugin="Rcpp")
data <- matrix(as.numeric(1:1e7),1e5,100) # warning large object
weights <- 1:1e5/1e5
all.equal(colSums(data*weights), weighted.colSums(data, weights))
## [1] TRUE
print(system.time(colSums(data*weights)))
##   user  system elapsed 
##  0.065   0.001   0.064 
print(system.time(as.vector(weighted.colSums(data, weights))))
##   user  system elapsed 
##  0.019   0.001   0.019 
all.equal(as.vector(weights %*% data), weighted.colSums(data, weights))
## [1] TRUE
print(system.time(weights %*% data))
##   user  system elapsed 
##  0.066   0.001   0.066 
```

# ios - iOS Calling Web Service 在 4g 上不起作用

> ID：13281536
> 
> 赞同：5
> 
> 时间：2012-11-08T02:23:34.110
> 
> 标签：ios, json, web-services, 4g

我正在编写一个调用 JSON Web 服务的应用程序。当 iPhone 连接到 WiFi 网络时，它可以正常工作。但是当它使用蜂窝数据网络时，它不起作用。我收到从 [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error] 返回的错误。这是我的代码：

```
-(BOOL) CallService {
    NSError *error;
    NSData *paramData = [NSJSONSerialization dataWithJSONObject:self.parameter    options:kNilOptions error:&error];

    NSString *serviceUrl = [[NSString alloc] initWithFormat:@"%@%@", self.webHost, self.serviceName];
    NSURL *url = [NSURL URLWithString:serviceUrl];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:@"json" forHTTPHeaderField:@"Data-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [paramData length]]  forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:paramData];
    NSError *errorReturned = nil;
    NSURLResponse *theResponse =[[NSURLResponse alloc]init];
    NSData *data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&theResponse
                                                     error:&errorReturned];

    BOOL retVal = FALSE;

    if (errorReturned){
        //...handle the error
        NSLog(@"%@", errorReturned.description);
    }
    else {
        self.serviceResult = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
        NSLog(@"%@", error);
        retVal = (BOOL)[self.serviceResult objectForKey:@"Success"];
    }

    return retVal;
} 
```

并且返回的错误是：

```
purgeIdleCellConnections: found one to purge conn = 0x1d04d710
2012-11-07 20:17:43.776 iPressBoxx-iPhone[733:907] 
Error Domain=NSCocoaErrorDomain 
Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" 
(JSON text did not start with array or object and option to allow fragments not set.)
 UserInfo=0x1d04eff0 {NSDebugDescription=JSON text did not start with array or object and option to allow fragments not set.} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:02:35.177

听起来对我来说，您是 JSON 编码的数据，或者结果混淆了。

最好的办法是打印出所有原始数据或使用诸如 Charles Proxy ( [http://charlesproxy.com](http://charlesproxy.com) ) 之类的东西来拦截网络请求并查看发生了什么。

# c++ - 多线程蛮力和递归多维循环。另一种方式？

> ID：13281539
> 
> 赞同：0
> 
> 时间：2012-11-08T02:24:11.963
> 
> 标签：c++, c, multithreading, recursion, brute-force

我喜欢在编程方面自己解决问题......所以我正在考虑一种方法来循环遍历具有动态维度的多维数组。（主要用于蛮力之类的东西）

我想出的遍历未知维度数组的方法如下：

```
#include <stdio.h>
#include <stdlib.h>

/* a simple example of the method I'm using */
void func(int *v,char *usable,int len,int D,int d)
{
  for(v[d] = 0; v[d] < len; v[d]++)
  {
    if(d+1 < D)
      func(v,len,D,d+1);
    else
    {
      for(int i = 0; i < D; i++)
        printf("%c",usable[v[i]]);
      printf("\r");
    }
  }
}
int main()
{
  int *v,z,min = 4,max = 6;
  for(z = min; z <= max; z++)
  {
    v = malloc(sizeof(int)*z);
    func(v,"0123456789",10,z,0);
    printf("\n");
    free(v);
  }
  return 0;
} 
```

我认为这是一个很好的优雅解决方案，但在考虑多线程处理时我遇到了更多问题。我想知道我尚未发现的此类进程的**替代解决方案，以及对此类进程****进行多线程**处理的可能方法。我尝试的一种方法是创建预先确定的*块*，但是由于当数字或可用字符增加太大时需要处理大量值，它们会溢出任何正常变量。

有人可能会问：“为什么需要创建多线程蛮力。” 我会回答说，创建多线程蛮力的能力意味着多线程其他进程的能力，如迷宫解决和最佳路线确定。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:52:54.137

我仍然对你试图用你的代码做什么感到困惑。但是根据你的描述。您说您正在尝试开发一种“循环遍历具有动态维度的多维数组的方法”。

对我来说，这句话说你想遍历一个 n 维数组。所以它会循环遍历数组 [n] 或循环遍历数组 [n] [m] 等等，以获取任意数量的维度和长度。这是你想要做的吗？如果是这样，您可以简单地使用模板函数来循环遍历 n 维数组。

# php - 处理动态生成的具有变量名的文本框

> ID：13281540
> 
> 赞同：0
> 
> 时间：2012-11-08T02:24:41.053
> 
> 标签：php, html

我正在编写一个基于上传的 CSV 文件写出表单的脚本。CSV 文件包含由仅包含“,,,,”的行分隔的部分。每个块都包含有关将要启动的服务器的信息。它看起来像这样：

```
主机,tctivt2r6ra03,,,
int,eth0,10.153.196.248,255.255.255.0,10.153.196.1
整数，eth1,10.153.157.113,255.255.255.128,10.153.157.1
int,eth2,10.153.157.241,255.255.255.128,10.153.157.129
int,eth3,00:50:56:ac:69:cb,,
部分,/家,10,,
部分，交换，10，，
部分,/opt,60,,
部分，/数据，30，，
,,,,

```

此输入被写入包含表的 div。每行输入都是表中的唯一行。一些值最终出现在文本框中。

该脚本生成如下[所示](https://dl.dropbox.com/u/116457/upload_file_ouput.PNG)的输出。

每个盒子都是动态生成的，由从 0 开始的主机 ID 和同样从 0 开始的盒子编号组成。例如：

```
<tr><th>eth0: </th><td><input type="text" value="10.153.196.248" name="host0Box0" /></td><td><input type="text" value="255.255.255.0" name="host0Box1" /></td><td><input type="text" value="10.153.196.1" name="host0Box2" /></td></tr><tr> 
```

我的问题是如何处理具有可变数量框的表单。具体来说，在处理输入的“部分”行时，可能有六个或更多框。

具有四个分区的示例：

```
<tr><th>Partition name:</th><td> /</td><td>10</td></tr>
<tr><th>Partition name:</th><td> /var</td><td><input type="text" value="10" name="host0Box9" /></td></tr>
<tr><th>Partition name:</th><td> /home</td><td><input type="text" value="10" name="host0Box10" /></td></tr>
<tr><th>Partition name:</th><td> swap</td><td><input type="text" value="10" name="host0Box11" /></td></tr>
<tr><th>Partition name:</th><td> /opt</td><td><input type="text" value="60" name="host0Box12" /></td></tr>
<tr><th>Partition name:</th><td><input type="text" value="/data" name="host0Box13" />/td><td><input type="text" value="30" name="host0Box14" /></td></tr>
<tr><th>Number of Disks: </th><td><input type="text" value="1" name="host0Disks" /></td></tr></table></div><span><br /><br /></span> 
```

六个分区的示例：

```
<tr><th>Partition name:</th><td> /</td><td>10</td></tr>
<tr><th>Partition name:</th><td> /var</td><td><input type="text" value="10" name="host1Box9" /></td></tr>
<tr><th>Partition name:</th><td> /home</td><td><input type="text" value="10" name="host1Box10" /></td></tr>
<tr><th>Partition name:</th><td> swap</td><td><input type="text" value="10" name="host1Box11" /></td></tr>
<tr><th>Partition name:</th><td> /opt</td><td><input type="text" value="60" name="host1Box12" /></td></tr>
<tr><th>Partition name:</th><td><input type="text" value="/data" name="host1Box13" /></td><td><input type="text" value="30" name="host1Box14" /></td></tr>
<tr><th>Partition name:</th><td><input type="text" value="/test1" name="host1Box15" /></td><td><input type="text" value="30" name="host1Box16" /></td></tr>
<tr><th>Partition name:</th><td><input type="text" value="/test2" name="host1Box17" /></td><td><input type="text" value="20" name="host1Box18" /></td></tr>
<tr><th>Number of Disks: </th><td><input type="text" value="1" name="host0Disks" /></td></tr></table></div><span><br /><br /></span> 
```

这是一项正在进行的工作，我知道为了正确处理每个主机部分，我将不得不进行更改。与此同时，我正在尝试解决这一问题。

我现在的问题是，当 II 最终到达处理表单的地步时，当填充 $_POST 数组时，我应该使用什么方法来说明动态分配的项目名称？我是否将数组值拉出并将它们放在不同的数组中？我可以像普通数组一样迭代 $_POST 数组吗？还有其他我不知道的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:57:59.970

看起来你在追求[这个？](http://www.php.net/manual/en/reserved.variables.post.php#96902)

因此，不要`name="host0Box0"`使用`name="host[0][Box][]`假设您可以更改脚本输出。

使用`[]`将自动填写一个数组，例如

```
<input type="text" name="foo[]" value="Hello" />
<input type="text" name="foo[]" value="World" /> 
```

会给你数组

```
Array(
  [foo] => Array(
    [0] => Hello
    [1] => World
  )
) 
```

我可能误解了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:49:03.537

您可以像遍历任何数组一样遍历超全局 $_POST 数组。试试 var_dump($_POST) 看看有什么可用的。

[由于发布的名称是未知的，如果这些名称包含不寻常的字符](http://www.php.net/manual/en/language.variables.external.php#81080)，您可能需要解析原始输入流。问题 813487的已[接受答案](https://stackoverflow.com/a/2731431/1345237)可能会有所帮助。

# javascript - 加载跨域内容时的事件触发？

> ID：13281545
> 
> 赞同：1
> 
> 时间：2012-11-08T02:25:01.513
> 
> 标签：javascript, html, css, facebook, cross-domain

我正在使用 Facebook 评论社交插件，但它会导致加载内容的高度出现问题。我想设置一个自定义滚动条来包含已加载评论的高度，但保持样式与网站的其余部分保持一致。

问题是我用来呈现自定义滚动条的插件需要在每次内容更改时重新调用。鉴于内容是跨域提取的，我想知道是否有办法检查它何时加载/更改，如果有，它是什么？

任何帮助将不胜感激！

我浏览了[页面](https://developers.facebook.com/docs/reference/plugins/comments/)上的文档，但找不到任何相关内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:36:43.950

也许您可以使用[jquery $.getJSON()](http://api.jquery.com/jQuery.getJSON/)，当您收到 时`data`，您可以做其他事情。

# c++ - 使用修剪函数 C++ 删除空格时出错

> ID：13281549
> 
> 赞同：-1
> 
> 时间：2012-11-08T02:26:04.540
> 
> 标签：c++

我有一个 cpp 文件，它可以抓取线条并修剪它们，但我遇到了错误。

错误说：

`error C2784: 'std::basic_istream<_Elem,_Traits> &std::getline(std::basic_istream<_Elem,_Traits> &,std::basic_string<_Elem,_Traits,_Alloc> &)' : could not deduce template argument for 'overloaded function type' from 'overloaded function type'`

我不确定这意味着什么......但这是脚本......：

```
#include <string>
#include <iostream>
#include <algorithm>
#include <vector>
#include <fstream>
#include <cctype>
#include "settings.h"

using namespace std;

// trim from start
static inline std::string& line_trim(std::string& s) {

    //erase 
    s.erase(
            //pointer start location
            s.begin(),

            //find from pointer which is set to begin
                std::find_if( s.begin(), 
            //check to the end
                s.end(), 
            //look for spaces
                std::not1( std::ptr_fun<int, int>(std::isspace) ) ) );

    //return the result
        return s;
}

// trim from end
static inline std::string& end_trim(std::string& s) {

    //erase   
    s.erase(

            //find from the pointer set to end of line
                std::find_if(s.rbegin(),

            //check to the beginning (because were starting from end of line
                s.rend(), 

            //look for spaces
                std::not1(std::ptr_fun<int, int>(std::isspace))).base(),
                s.end());
        return s;
}

static inline std::string& trim(std::string &s) {
    return line_trim(end_trim(s));
}

ifstream file(std::string file_path){
string line;

    std::map<string, string> config;

    while(std::getline(file, line))
    {
        int pos = line.find('=');
        if(pos != string::npos)
        {
            string key = line.substr(0, pos);
            string value = line.substr(pos + 1);
            config[trim(key)] = trim(value);
        }
    }
    return (config);
} 
```

该错误发生在第三个函数中，例如：

`while(std::getline(file, line))`

编辑：这是我的`settings.h`

```
#include <map>
using namespace std;

static inline std::string &line_trim(std::string&);

static inline std::string &end_trim(std::string&);

static inline std::string &trim(std::string&);

std::map<string, string> loadSettings(std::string); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:33:29.840

var文件在哪里？

```
ifstream file(std::string file_path){
string line;

    std::map<string, string> config;

    while(std::getline(file, line)) 
```

在这里文件是函数，getline 期望 basic_istream 因此失败

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:37:07.173

我根据您的`settings.h`文件将两个和两个拼凑在一起......我认为您忘记写出您的函数标题。这一点：

```
ifstream file(std::string file_path){
string line;

    std::map<string, string> config; 
```

应该：

```
std::map<string, string> loadSettings(std::string file_path) {
    ifstream file(file_path);
    string line;
    std::map<string, string> config; 
```

对于您当前的实现，`file`是一个函数（因为它具有从开头开始的范围`{`），所以它不是`getline`.

# jquery - jQuery背景不显示在IE中

> ID：13281551
> 
> 赞同：2
> 
> 时间：2012-11-08T02:26:18.110
> 
> 标签：jquery, css, internet-explorer, background, w3c-validation

我试图让我的网站在 IE 中显示背景，但是我不知道为什么它不这样做。我相信是在某个时候，出于某种原因，现在不是。

一些背景：Wordpress 网站。使用购买的模板 - 尚未收到他们关于此问题的消息。网站上有很多定制的工作，所以可能出了问题。我猜这很简单。寻找它在 IE9 中工作，因为我认为该网站在 8 及以下版本中完全混乱 - 但如果你有关于如何纠正它的提示，那也很酷。我已经通过 W3 检查器运行了 CSS，但它输出的代码并没有解决问题。

网站： http: [//www.cardwells.co.nz](http://www.cardwells.co.nz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:39:30.907

我使用 IE Developer 工具在 IE7、IE8 中调试您的代码。

它扔了`Expected identifier, string or number`

此错误的最常见原因是缺少逗号或多余的逗号。

在您的代码中

```
$("#logoParade").smoothDivScroll({ 
        autoScrollingMode: "always", 
        autoScrollingDirection: "endlessloopright", 
        autoScrollingStep: 1, 
        autoScrollingInterval: 25, // This comma is not required; Remove this
    }); 
```

我在`autoScrollingInterval: 25,`. 删除它并再次检查。

# ruby-on-rails - ruby on rails shared 错误消息无法定义方法或对象

> ID：13281553
> 
> 赞同：2
> 
> 时间：2012-11-08T02:26:40.820
> 
> 标签：ruby-on-rails

我一直在阅读 michael hartl 的 ruby​​ on rails 教程，我正在尝试发布微博。我正在尝试在表单中呈现错误消息，并且书中说将 f.object 分配给对象。它不断给我“对象”是未定义的局部变量或方法的错误。这是代码：

共享/_error_messages.html.erb

```
<% if object.errors.any? %>
<div id="error_explanation">
    <div class="alert alert-error">
        The form contains <%= pluralize(object.errors.count, "error") %>.
    </div>
    <ul>
        <% object.errors.full_messages.each do |msg| %>
            <li>* <%= msg %></li>
        <% end %>
    </ul>
</div><% end %> 
```

共享/_post_form.html.erb

```
<%= form_for(@post) do |f| %>
 <%= render 'shared/error_messages', object: f.object %>
   <div class="field">
<%= f.text_area :content, placeholder: "Compose new post..." %>
   </div>
 <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:43:18.763

更新：

下面的答案是不正确的。有关详细信息，请参阅评论。

原始答案：

我不确定 Hartl 的教程说什么，但`f.object`没有在表单上定义，我认为这是错误的来源（为了清楚起见，请发布错误本身）。

更改此行：

```
<%= render 'shared/error_messages', object: f.object %> 
```

到

```
<%= render 'shared/error_messages', object: f %> 
```

应该解决问题。基本上，您想将表单传递`f`给部分，并带有名称`object`——这就是选项的`object: f`作用。（实际上，您可以将其命名为任何您想要的名称，只要您在部分内部使用相同的命名即可。`object`在这种情况下，名称没有什么特别之处。）

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:34:20.253

也许你忘了传递一个`@post`表单控制器。当您渲染部分时，您在哪里控制器`_post_form.html.erb`？检查您是否`@post = current_user.posts.build`在该控制器中没有，添加它。

# xml - 如何将 .txt 文件中的文本插入 xml 文件

> ID：13281554
> 
> 赞同：0
> 
> 时间：2012-11-08T02:26:45.163
> 
> 标签：xml, text

这

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Data [
<!ENTITY data SYSTEM 'data.txt'>
]>
<Data>
  &data;
</Data> 
```

结果在这个

```
<?xml version="1.0" encoding="UTF-8" ?> 
  <!DOCTYPE Data (View Source for full doctype...)> 
- <Data>
  <event start="Nov 5 2012 00:00:00 GMT" link="http://www.washingtonpost.com/wp-srv/onpolitics/watergate/chronology.htm" image="http://www.constitutioncenter.org/timeline/flash/assets/asset_upload_file761_12313.jpg" title="Nixon Elected">Richard Milhous Nixon, the 55-year-old former vice president who lost the presidency for the Republicans in 1960, reclaims it by defeating Hubert Humphrey in one of the closest elections in U.S. history</event> 
  <event start="June 17 2012 00:00:00 GMT" end="Aug 1 1972" link="http://www.washingtonpost.com/wp-srv/onpolitics/watergate/chronology.htm" image="http://www.utexas.edu/features/archive/2005/graphics/watergate4.jpg" title="Watergate arrests">Five men, one of whom says he used to work for the CIA, are arrested at 2:30 a.m. trying to bug the offices of the Democratic National Committee at the Watergate hotel and office complex.</event> 
  </Data> 
```

在此过程中是否有删除顶行的方法？还是隐藏它们？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Data [
<!ENTITY data SYSTEM 'data.txt'>
]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:27:01.417

一种方法是使用内联 DOCTYPE 声明和外部实体。这只有在您的 XML 解析器能够处理 DOCTYPE 时才有帮助

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Data [
<!ENTITY data SYSTEM 'data.txt'>
]>
<Data>
  &data;
</Data> 
```

在这种情况下`data.txt`是从 xml 文件位置开始的相对路径，您也可以使用绝对路径，前提是您的 XML 解析器可以遵循它。

# android - 在 Android 中使用 ASyncTask 加载布局

> ID：13281555
> 
> 赞同：1
> 
> 时间：2012-11-08T02:26:45.837
> 
> 标签：android, android-layout, android-asynctask, android-xml, android-dialog

我有一个应用程序加载一个对话框，其中包含在对话框的 XML 布局中指定的一些图像。我已经阅读了很多关于在 Android 中使用图像并注意 VM 预算的内容，因此我相信任何可能占用大量内存的图像处理都应该在主线程之外处理。话虽如此，我想知道使用 ASyncTask 从 UI 线程加载整个布局是否明智。我有一个工作代码，但我无法通过一些谷歌搜索来确定这是否是一种好的做法。这是下面的代码。

这是当用户按下按钮加载对话框时触发的 case 语句。

```
case R.id.showDialog:

    vibrator.vibrate(vibrateMilis);

    mDialog = new Dialog(getActivity(), R.style.CustomDialog);

    new LoadLayout().execute("");

break; 
```

这是 ASyncTask

```
private class LoadLayout extends AsyncTask<String, Void, String> 
{

    ProgressDialog progressDialog;

        @Override
        protected String doInBackground(String... params) 
        {

            mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            mDialog.setContentView(R.layout.dialog_layout);
            mDialog.setCancelable(true);

            return null;
        }

        @Override
        protected void onPostExecute(String result)
        {

            progressDialog.cancel();

            mDialog.show();

        }

        @Override
        protected void onPreExecute() 
        {

            progressDialog = new ProgressDialog(
                    getActivity());
            progressDialog.setMessage("Loading...");
            progressDialog.setCancelable(false);
            progressDialog.show();

        }

        @Override
        protected void onProgressUpdate(Void... values) 
        {

            // Do nothing

        }

} 
```

所以这段代码有效，但我的问题是这个。这被认为是好的做法吗？我的口味似乎有点hacky。我没有在多次 Google 搜索中遇到这个问题，所以这就是我有点担心的原因。我的意思是，如果这是一种好的做法，它会被记录在某个地方吗？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:04:40.530

你有没有参考android开发者网站。你的方法是错误的。如需更多指导，请参阅[Vogella](http://www.vogella.com/articles/AndroidPerformance/article.html)文档。它很好地解释了 AsyncTask。

另请参阅下面的 AsyncTask 示例代码。

```
 // The definition of our task class
   private class PostTask extends AsyncTask<String, Integer, String> {
   @Override
   protected void onPreExecute() {
      super.onPreExecute();
      displayProgressBar("Downloading...");
   }

   @Override
   protected String doInBackground(String... params) {
      String url=params[0];

      // Dummy code
      for (int i = 0; i <= 100; i += 5) {
        try {
          Thread.sleep(50);
        } catch (InterruptedException e) {
          e.printStackTrace();
        }
         publishProgress(i);
      }
      return "All Done!";
   }

   @Override
   protected void onProgressUpdate(Integer... values) {
      super.onProgressUpdate(values);
      updateProgressBar(values[0]);
   }

   @Override
   protected void onPostExecute(String result) {
      super.onPostExecute(result);
      dismissProgressBar();
   }
   } 
```

希望对您有很大帮助。

享受编码... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:00:17.650

我认为你做错了，因为：

首先，当调用doInBackground()方法时，它会在其他线程中，你只能在主线程中改变UI元素。

其次，显示对话框不浪费时间，你可以在 onPreExecute() 或 onPostExecute(String result) 中调用它，只需在 doInBackground() 中执行让用户等待的操作，例如从网络或数据库获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:19:01.250

您不能在后台线程中加载整个布局（请注意`AsyncTask.postExecute()`在主线程上执行）。因为所有的 UI 组件都应该从 only 修改`Main Thread`（也称为 UI 线程）。您可以使用后台线程来收集显示 UI 所需的信息。

# spring-batch - 如何让 ItemReader 读取 2 个表

> ID：13281559
> 
> 赞同：2
> 
> 时间：2012-11-08T02:27:24.107
> 
> 标签：spring-batch

我必须创建一个批处理作业来进行财务对账。现在我有3个步骤：

第 1 步：从第三方读取 XML，将其转换为我们的领域对象，写入 DB（表 1）

第 2 步：从我们的事务数据存储中读取一个平面文件，写入数据库（表 2）

步骤 3：在 aggregatorObject 中读取 table1 和 table 2，处理两个列表以查找差异并设置状态码，在表 2 中写入状态码

我的问题是第3步。我找不到让我的 ItemReader 从 2 SQL 读取的好解决方案。

我从这样的自定义 ItemReader 开始：

```
package batch.concilliation.readers;

@Component("conciliationReader")
public class TransactionReader implements ItemReader<TransactionsAgragegator>{

private final Logger log = Logger.getLogger(TransactionReader.class);

@Autowired
private ConciliationContext context;

@Autowired
private ServiceSommaireConciliation serviceTransactionThem;

@Autowired
private ServiceTransactionVirement serviceTransactionUs;

@Override
public TransactionsAgragegator read() throws Exception, UnexpectedInputException, ParseException, NonTransientResourceException {

    TransactionsAgragegator agregator = new TransactionsAgragegator();

    SommaireConciliationVirementInterac sommaire = serviceSommaireThem.findByRunNo(context.getRunNo());

    List<TransactionVirement> journalSic = serviceTransactionUs.findByTimestamp(sommaire.getBeginDate(), sommaire.getEndDate()); 

    // on place ces deux listes dans l'objet agregteur.
    agregator.setListeTransactionThem(sommaire.getPayments());
    agregator.setListeTransactionsUs(journalSic);

    return aggregator;
}

} 
```

此 Reader 使用两个已实现的服务 (DAO)，它们读取两个表并返回域对象。我从我们和他们那里获取两个交易列表，并将它们放在一个聚合器对象中。这个对象将被传递给 ItemProcessor，我可以做我的业务逻辑......但是这个阅读器启动了一个无限循环，因为它永远不会读取 null。

我阅读了有关 ItemReaderAdapter 的信息，但我仍然遇到循环集合的相同问题，直到我得到一个空值。

所以总而言之，我想阅读 2 个不同的表格并获得 2 个列表：

```
List<TransactionThirdParty>
List<TransactionHome> 
```

然后我的 ItemProcesssor 将检查两个列表是否相等，一个有更多或更少的交易然后另一个..etc

任何 Spring Batch 专家都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:23:38.033

这里的问题是你的前两个步骤是面向块的，但第三个不是。虽然前两个可能具有通常的读取-过程-写入周期，但第三个步骤虽然依赖于前两个，但它是一次性操作。与在批处理域中复制文件没有什么不同。

所以你不应该在这里使用 ItemReader 方式，因为你没有退出标准（这就是为什么你永远不会从阅读器那里得到空值，它不知道源何时用尽，因为它不处理行或记录。

这就是[TaskletStep 提供](http://static.springsource.org/spring-batch/reference/html-single/index.html#taskletStep)帮助的地方

> Tasklet 是一个简单的接口，它有一个方法 execute，TaskletStep 将重复调用该方法，直到它返回 RepeatStatus.FINISHED 或抛出异常以表示失败。

因此，将您的第三步实现为[Tasklet](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/step/tasklet/Tasklet.html)而不是面向块的方式。

# shell - 使用 awk 或 sed 在两个模式之间获取第 n 次出现

> ID：13281560
> 
> 赞同：8
> 
> 时间：2012-11-08T02:27:28.090
> 
> 标签：shell, sed, awk

我有一个问题，我想解析文件的输出，我想在两个模式之间获取第 n 次出现的文本，最好使用 awk 或 sed

```
category
1
s
t
done
category
2
n
d
done
category
3
r
d
done
category
4
t
h
done 
```

假设对于这个例子，我想在 category 和 done 之间获取第三次出现的文本，基本上输出是

```
category
3
r
d
done 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T07:10:03.843

这可能对您有用（GNU sed）：

```
'sed -n '/category/{:a;N;/done/!ba;x;s/^/x/;/^x\{3\}$/{x;p;q};x}' file 
```

`-n`使用该选项关闭自动打印。收集 和 之间的`category`线`done`。在保持空间中存储一个计数器，当它达到 3 时，在模式空间中打印集合并退出。

或者，如果您更喜欢 awk：

```
awk  '/^category/,/^done/{if(++m==1)n++;if(n==3)print;if(/^done/)m=0}'  file 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T02:30:51.947

尝试这样做：

```
 awk -v n=3 '/^category/{l++} (l==n){print}' file.txt 
```

或者更神秘：

```
awk -v n=3 '/^category/{l++} l==n' file.txt 
```

如果您的文件很大：

```
awk -v n=3 '/^category/{l++} l>n{exit} l==n' file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T04:00:31.117

如果您的文件不包含任何空字符，则正在使用`GNU sed`. 这将找到模式范围的*第三次出现。*但是，您可以轻松地对其进行修改以获得您想要的任何事件。

```
sed -n '/^category/ { x; s/^/\x0/; /^\x0\{3\}$/ { x; :a; p; /done/q; n; ba }; x }' file.txt 
```

结果：

```
category
3
r
d
done 
```

解释：

使用开关关闭默认打印`-n`。在行首匹配单词“category”。将模式空间与保持空间交换，并将空字符附加到模式的开头。在示例中，如果模式随后包含两个前导空字符，则将模式拉出保持空间。现在创建一个循环并打印模式空间的内容，直到匹配最后一个模式。当找到最后一个模式时，`sed`将退出。如果没有找到`sed`，将继续读取下一行输入并继续循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T13:20:58.900

```
awk -v tgt=3 '
/^category$/ { fnd=1; rec="" }

fnd {
   rec = rec $0 ORS
   if (/^done$/) {
      if (++cnt == tgt) {
         printf "%s",rec
         exit
      }
      fnd = 0
   }
}
' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T08:30:27.310

使用 GNU awk，您可以将记录分隔符设置为正则表达式：

```
<file awk 'NR==n+1 { print rt, $0 } { rt = RT }' RS='\\<category' ORS='' n=3 
```

输出：

```
category 
3
r
d
done 
```

`RT`是匹配的记录分隔符。请注意，相对于 的记录`n`将关闭一个，因为第一条记录指的是第一条之前的记录`RS`。

### 编辑

根据 Ed 的评论，当记录之间有其他数据时，这将不起作用，例如：

```
category
1
s
t
done
category
2
n
d
done

foo

category
3
r
d
done

bar
category
4
t
h
done 
```

解决此问题的一种方法是使用第二个（或第一个）awk 清理输入：

```
<file awk '/^category$/,/^done$/' |
  awk 'NR==n+1 { print rt, $0 } { rt = RT }' RS='\\<category' ORS='' n=3 
```

输出：

```
category 
3
r
d
done 
```

### 编辑 2

正如*Ed*在评论中指出的那样，上述方法不搜索结束模式。其他答案未涵盖的一种方法是使用（请注意，awk getline`getline`有一些[警告）：](http://awk.info/?tip/getline)

```
<file awk '
  /^category$/ {
    v = $0
    while(!/^done$/) { 
      if(!getline) 
        exit
      v = v ORS $0
    }
    if(++nr == n) 
      print v
}' n=3 
```

一行：

```
<file awk '/^category$/ { v = $0; while(!/^done$/) { if(!getline) exit; v = v ORS $0 } if(++nr == n)  print v }' n=3 
```

# node.js - 使用 mocha-phantomjs 自动化功能测试

> ID：13281561
> 
> 赞同：23
> 
> 时间：2012-11-08T02:27:35.297
> 
> 标签：node.js, mocha.js, phantomjs

我的项目正在使用：Node、Coffeescript、SocketIO、Browserify 和 Mocha。（用于标准服务器端单元测试的 mocha）

我想使用无头浏览器自动化一些客户端接口测试。PhantomJS 看起来是一个理想的选择（由于 Web 套接字支持而选择了 Zombie）。

PhantomJS 页面警告它不是一个测试运行器，我理解，他们建议使用[mocha-phantomjs](https://github.com/metaskills/mocha-phantomjs)项目来驱动你的测试。

所以我已经能够运行示例测试（例如`mocha-phantomjs tests/mixed.html`），但我当前的问题实际上是在测试中使用 PHANTOM。mocha-phantomjs repo 中的所有示例测试似乎都使用标准的 mocha 服务器端单元测试。

例如，我可以轻松地运行`mocha-phantomjs tests/mixed.html`查看无聊的旧单元测试。或者我可以运行`phantomjs tests/login.coffee`以加载我的登录屏幕......但是我如何将两者结合起来以断言我应该在我的登录屏幕上看到什么？

我在网上找不到任何这样的例子，我正在努力理解解决这个问题的最佳方法。

希望这一切都有意义。提前感谢您的任何帮助。

**更新**：我发现了作者的以下建议（[在这里](https://github.com/metaskills/mocha-phantomjs/issues/18)），但我不太明白如何处理它：`phantomjs lib/mocha-phantomjs.coffee test/mixed.html`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T00:02:02.480

这里有一个相当不错的使用 Mocha 和 Phantom.JS 进行测试的[教程](http://net.tutsplus.com/tutorials/javascript-ajax/testing-javascript-with-phantomjs/)。

关于 Mocha 和 PhantomJS 的部分很短，但基本思想是将 DOM 断言和交互放入您的 Mocha 测试套件中，通过 testrunner.html 文件在客户端运行它，然后将 mocha-phantomjs 指向测试运行器。 .html 文件。

套用一下，您的 Mocha 测试可能如下所示：

```
describe("DOM Test", function () {

    var el = document.createElement("div");
    el.id = "myDiv";
    el.innerHTML = "Hello World!";
    document.body.appendChild(el);
    var myEl = document.getElementById('myDiv');

    it("has the right text", function () {
        (myEl.innerHTML).should.equal("Hello World!");
    });
}); 
```

testrunner.html 文件将是正常设置：

```
<html>
    <head>
        <title> Tests </title>
        <link rel="stylesheet" href="./node_modules/mocha/mocha.css" />
    </head>
    <body>
        <div id="mocha"></div>
        <script src="./node_modules/mocha/mocha.js"></script>
        <script src="./node_modules/chai/chai.js"></script>
        <script>
            mocha.ui('bdd');
            mocha.reporter('html');
            var should = chai.should();
        </script>
        <script src="test/test.js"></script>
        <script>
            if (window.mochaPhantomJS) { mochaPhantomJS.run(); }
            else { mocha.run(); }
        </script>
    </body>
</html> 
```

如果您更喜欢完全从 node.js 生态系统运行的解决方案，那么值得考虑[Zombie.JS](http://zombie.labnotes.org/)。这个 Stack Overflow[问题](https://stackoverflow.com/questions/9350232/mocha-and-zombiejs)提供了一个基本示例。

权衡的是，虽然 Zombie.JS 可以简单地通过需要节点模块来使用，而且速度非常快，但它并不是一个“真正的”网络浏览器。PhantomJS 更接近，因为它基于 webkit。此外，使用 mocha-phantomjs 的第一种方法将允许您在您选择的不同浏览器中运行客户端 Mocha 测试，PhantomJS 只是其中之一。

# php - 是否可以将 javascript 值转移到 PHP？

> ID：13281562
> 
> 赞同：0
> 
> 时间：2012-11-08T02:27:40.263
> 
> 标签：php, javascript, date

> **可能重复：**
> [从 PHP 访问 JavaScript 变量](https://stackoverflow.com/questions/2338942/access-a-javascript-variable-from-php)

假设我有以下 javascript：

```
<script>
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!

    var yyyy = today.getFullYear();
    if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} today = mm+'/'+dd+'/'+yyyy;
</script> 
```

现在我想将今天变量的值输入 PHP。

```
$cur_date = '<script type="text/javascript"> document.write(today) </script>';

echo "current date: $cur_date";

$checkin = strtotime($cur_date); 
```

虽然我可以输出当前日期，但是如何使用 strtotime 函数将其传输到 $checkin 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:30:44.287

PHP 在页面发送到浏览器之前运行。以你想要的方式是不可能的。

# html - 在 safari 下隐藏 iframe 水平滚动条

> ID：13281566
> 
> 赞同：1
> 
> 时间：2012-11-08T02:28:34.250
> 
> 标签：html, iframe, safari, scrollbar

在我的 iframe 上，我想隐藏水平滚动条，同时保持垂直滚动条。我用过

> 样式=“溢出-x：隐藏；”

它适用于 Firefox，但不适用于 safari。有没有办法在 safari 下隐藏水平滚动条？

我听说的唯一方法是更改​​ iframe 内页面的溢出。但我无法修改 iframe 中的页面，因为它是一个外部网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T09:43:15.700

它是您作为 iframe 中的 URL 传递的网站还是文档。

如果它是一个文档，并且当无法提供或隐藏水平或垂直滚动​​条时，您可以使用 iframe 设置文档的大小

Document document = new Document(PageSize.(desiredSize), 50, 50, 100, 72); （注意：这里 desiredSize 可以是 A0-A10 或 B0-B5 或 ARCH-A 等）

（注意：这是在创建文档本身时完成的）。

请查看[此](http://api.itextpdf.com/itext/com/itextpdf/text/Document.html)链接以获取有关 Java 类-“文档”的更多信息。

# selenium - 无法连接到火狐

> ID：13281568
> 
> 赞同：3
> 
> 时间：2012-11-08T02:28:59.180
> 
> 标签：selenium, selenium-webdriver, selenium-grid

我正在研究 Selenium，我目前有一个集线器连接到两个运行 linux 和所有浏览器的 vm。

我能够启动浏览器，直到它突然停止。Firefox 或任何其他浏览器无法启动。我收到以下错误。

> 45000 毫秒后无法连接到端口 7055 上的主机 127.0.0.1。

我正在运行 Selenium-server-standalone 2.26 和 firefox 16.0.2 。

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T14:49:03.747

在启动 Selenium 服务器之前尝试运行它：

```
export DISPLAY=:0 
```

# mongodb - 多个计数一个请求？

> ID：13281572
> 
> 赞同：0
> 
> 时间：2012-11-08T02:29:13.563
> 
> 标签：mongodb, count, database

有什么方法可以让我在一个请求中返回多个计数？

而不是奔跑`users.find({gender:"male"}).count();`，`231`然后奔跑，`users.find({gender:"female"}).count();`得到`416`可以返回的东西`{male:"231",female:"416"}`。我知道 map reduce 可以做到这一点，这是我最好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:46:56.520

[`Groupby`](http://docs.mongodb.org/manual/reference/aggregation/group/#_S_group)在`Aggregation`框架中会做的伎俩

```
 db.users.aggregate({$group:{_id:'$gender',count:{$sum:1}}}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:02:56.993

RameshVel 是正确的。该`$group`命令可能是您正在寻找的。

例如，以下查询：

`db.people.aggregate({$group: {_id: '$gender', total: { $sum : 1 }}})`

将产生以下结果：

```
{
  "result": [
    {
      "_id": "m",
      "total": 49988
    },
    {
      "_id": "f",
      "total": 50012
    }
  ],
  "ok": 1
} 
```

您可以在此处阅读有关 MongoDB 聚合框架的更多信息：http: [//docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

希望有帮助。

# jquery - 如何使用 jquery 在 ajax 函数的回调函数中获取数据？

> ID：13281573
> 
> 赞同：0
> 
> 时间：2012-11-08T02:29:16.200
> 
> 标签：jquery

从 ajax 调用获取返回数据的最佳选择是使用函数。在我下面的例子中，我调用了函数 returnData() 但是我如何在这个 returnData() 函数之外得到它？

```
 var testFile = $("#selection").val(),
           testData = getTestData(testFile); 

           function getTestData(testF) {
           $.getJSON("test.php", {
           fileTest: testF
           }, function (data) {
              $.each(data, function (index, value) {
                if (value != "") {} else {
                 testArray[index] = value;
               }
           });
       });
         returnData(testArray);
      } ​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T02:34:11.613

在函数之外声明一个变量。

```
var testFile = $("#selection").val(),
    results = '', // We will store the results in this
    testData = getTestData(testFile); 

function returnData(valueReturned)
{
  results = valueReturned; // Store the results into that variable we created
  anotherFunction();
}

function getTestData(testF) {
    $.getJSON("test.php", {
        fileTest: testF
    }, function (data) {
        $.each(data, function (index, value) {
            if (value != "") {} else {
                testArray[index] = value;
            }
        });
    });
  returnData(testArray);
}​

function anotherFunction(){
  // We can access the contents of the results variable here :)
  console.log(results); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:37:00.703

```
var result = null;

result = getTestData();

function getTestData(){
    return returnData(testArray);
}

alert(result); 
```

顺便说一句，testArray 首先是在哪里定义的？从您的代码看来，它已经在`getTestData()`.

此外，回调后面的代码可能会在 AJAX 函数返回之前执行：

```
var noodleIsCooked = false;

$.post("cook.php", {"Start cooking"}, function(){
    noodleIsCooked = true;
});

eatNoodle();

function eatNoodle(){
    if(!noodleIsCooked){
        alert("Yike I can't eat this!");
    }
} 
```

上面的代码几乎总是会触发警报。

但是，要吃熟面条，您需要`eatNoodle()`像这样将回调放在回调中：

```
$.post("cook.php", {"Start cooking"}, function(){
        noodleIsCooked = true;
        eatNoodle();
    }); 
```

# jquery - 新图像加载时触发函数，将选择器与 If/else 语句匹配

> ID：13281582
> 
> 赞同：0
> 
> 时间：2012-11-08T02:31:27.063
> 
> 标签：jquery, event-handling, callback, slider

我碰壁了，需要一些指导才能使它起作用。我以我是 jQuery 的菜鸟作为开头，任何可以写出我已经写得更好或更精简的东西的方式当然都是受欢迎的。

目前我在页面上有 2 个滑块。每个图像都有一个独特的类。当用户单击图像滑块时，图像滑入并添加“activeSlide”类。我希望发生的是，当用户单击滑块并加载与另一个图像匹配的图像时，会弹出警报。会有不同的图像组合会触发弹出窗口，如果没有匹配，则不会发生任何事情。

目前使用下面的代码它可以工作，但在图像匹配并且用户再次单击滑块后会触发警报。理想的情况是用户单击图像滑块，加载新图像，如果匹配，将调用事件处理程序以弹出警报。

这是我的 HTML：

```
<div id="top" class="Slider">
    <img class="rsImg" src="images/tShirtRed.png" alt="tShirtRed" />
    <img class="rsImg" src="images/tShirtGreen.png" alt="tShirtGreen" />
    <img class="rsImg" src="images/tShirtRed.png" alt="tShirtRed" />
</div>

<div id="bottom" class="Slider">
    <img class="classBottom1" src="images/image5.png" alt="" />
    <img class="classBottom2" src="images/image6.png" alt="" />
    <img class="classBottom3" src="images/image6.png" alt="" />
</div> 
```

这是我的 jQuery：

```
var sliderInstance = $("#chest").data('royalSlider');

    sliderInstance.ev.on('rsAfterSlideChange', function() {
            if (($('#chest .rsActiveSlide img').attr('alt') == 'tShirtGreen') && ($('#legs .rsActiveSlide img').attr('alt') == 'jeansGreen')) {
            alert('Your message');
            } else {
            //Do nothing
            }
    }); 
```

我的开发环境在这里：[http ://beingproperties.com/match-game/](http://beingproperties.com/match-game/)

提前感谢您并感谢您的任何意见。干杯-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:21:54.590

在 RoyalSlider 的开发人员的帮助下解决了这个问题：[Royal Slider](http://dimsemenov.com/plugins/royal-slider/)

jQuery 需要在滑块初始化之后并在 document.ready() 函数中。

我还需要重新排列我试图调用的函数。固定代码见上文。

再次感谢 RoyalSlider 的 Dmitry！-克里斯

# iis-7 - Azure 子文件夹博客

> ID：13281583
> 
> 赞同：3
> 
> 时间：2012-11-08T02:31:41.633
> 
> 标签：iis-7, azure, blogs, blogengine.net

我试图弄清楚如何/是否可以将博客添加到现有天蓝色网站上的子文件夹中。

BlogEngine 似乎是一个不错的选择，因为它是用 .net 编写的，并且从我读过的内容来看，它很容易设置为 azure 上的独立站点。

我现在遇到的问题是如何将我的子文件夹 /blog 设置为 azure 中的应用程序。我知道在本地你可以打开 IIS 并右键单击 -> 转换为应用程序。但是有什么我可以在 web.config 中放入或发布可以实现相同目的的设置吗？

现在我收到一条错误消息，因为 /blog 有它自己的 web.config 文件。

如果有更简单的方法或者我正在考虑这个错误，请告诉我：-)

谢谢，安德鲁

**编辑**

我联系了 azure support，他们建议我从 azure 网站升级到 azure VM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:21:46.850

目前还没有一个好方法可以在不设置 VM 的情况下同时运行一个完整的博客引擎和一个 azure 网站。

我最终使用他们的数据 API 从谷歌博客博客中提取。不完全是我想要的，但我无法承担与 VM 解决方案相关的额外成本。

# c++ - 1个数组单元格中的多个元素？

> ID：13281584
> 
> 赞同：-3
> 
> 时间：2012-11-08T02:31:47.550
> 
> 标签：c++, arrays

我必须实现一个程序，其中我有一个大小稳定的数组，并且在每个单元格中我必须放入一个 id、一个计数器和一个指针。我的问题是如何将多个元素放入 1 个数组单元格中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:43:48.420

像这样：

```
struct Cell {
  Cell() : id(0), counter(0), pointer() {}
  int id, counter;
  std::unique_ptr<int> pointer;
};

Cell cells[100]; 
```

您可以像这样访问元素：

```
cells[0].id = 1;
++cells[0].counter;
cells[0].pointer.reset(new int(9)); 
```

# svg - SVG – 沿路径动画矩形；矩形的中心始终在路径上

> ID：13281586
> 
> 赞同：3
> 
> 时间：2012-11-08T02:32:24.417
> 
> 标签：svg, svg-animate

我想为一个矩形设置动画，使其遵循迄今为止使用的给定路径`animateMotion`。这就是我得到的：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<g>
   <rect height="40" width="40" style="fill:#777; stroke:none;"/>
   <animateMotion fill="freeze" path="M 0 0 Q 190 160 150 70 T 200 150 T 300 200 T 200 200" dur="3.14159s" repeatCount="indefinite"/>
</g>
<path d="M 0 0 Q 190 160 150 70 T 200 150 T 300 200 T 200 200" style="fill:none;stroke:#F00;stroke-width:5"/> 
```

现在我的问题是：如何让矩形跟随路径（已经实现），矩形（`20 20`）的中心始终在路径上？这可以通过 SVG 提供的方式实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:19:12.123

当然，只需向矩形添加一个变换。

```
html, body, svg {
  height: 100%;
  width: 100%;
}
```

```
<svg>
    <g>
       <rect transform="translate(-20,-20)" height="40" width="40" style="fill:#777; stroke:none;"/>
       <animateMotion fill="freeze" path="M 0 0 Q 190 160 150 70 T 200 150 T 300 200 T 200 200" dur="3.14159s" repeatCount="indefinite"/>
    </g>
    <path d="M 0 0 Q 190 160 150 70 T 200 150 T 300 200 T 200 200" style="fill:none;stroke:#F00;stroke-width:5"/>
</svg>
```

translate 将矩形原点从 0,0 移动到矩形中心。

# c# - .NET 的 Web 部署 API

> ID：13281587
> 
> 赞同：1
> 
> 时间：2012-11-08T02:32:33.363
> 
> 标签：c#, .net, msdeploy

我已经在我的机器上安装了 MSDeploy。我正在使用 Visual Studio 2010 和 C#。尝试加载“Microsoft.Web.*”来编写一些性感的 msdeploy 功能。也许我是 3 级 tard（极有可能），但获得这个绝对打击的文档@。

我得到的错误是：“命名空间‘Microsoft’中不存在类型或命名空间名称‘Web’（您是否缺少程序集引用？）”

所以——当然我尝试通过引用加载它，但它不在那里。然后，我在谷歌上喜欢“webdeploy api C#”的 mf 之类的，并且无法找到关于如何安装/下载 msdeploy ("microsoft.web.*) .dlls、apis 的任何信息。

哪位大哥能给个链接？

我确实下载并安装了“WebDeploymentSetup.msi”，但没有。我确实安装了“webdeploy_en.msi”，但没有。然后我发现了这个名为“AzurePack.exe”的疯狂的东西——甚至没有尝试安装它。但是，如果有人说就是这样。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:39:19.263

Microsoft.Web.Deployment.dll 可在此处找到：c:\Program Files\IIS\Microsoft Web Deploy V3\Microsoft.Web.Deployment.dll

指向一个参考。

唯一的先决条件是安装 WebDeploy v3.0： [http ://www.iis.net/downloads/microsoft/web-deploy](http://www.iis.net/downloads/microsoft/web-deploy)

# python - 如何从 Python 中的前一个 __import__ 获取类对象/实例？

> ID：13281590
> 
> 赞同：0
> 
> 时间：2012-11-08T02:32:58.530
> 
> 标签：python

假设您在分层“文件夹2”中有一个名为“模块”的模块，其中有一个名为“klass”的类。

我怎样才能得到方括号语法中的类？

```
module = __import__('folder1.folder2.module', fromlist='*')
sbs_module = module['klass']

#lets say we print a value from the method getValue
print sbs_module.getValue() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:44:01.610

替换这一行：

```
sbs_module = module['klass'] 
```

用这条线：

```
sbs_module = module.klass 
```

这样做的原因是您需要`klass`使用点表示法来引用模块变量（在本例中为名为 的变量），而不是通过键访问变量。

或者，您可以使用两种不同的符号：

*   按键：

    ```
    sbs_module = vars(module)['klass'] 
    ```

*   按属性：

    ```
    sbs_module = getattr(module, 'klass') 
    ```

但除非绝对必要，否则我不推荐它。

# html - ABCPDF 链接以深色突出显示

> ID：13281598
> 
> 赞同：3
> 
> 时间：2012-11-08T02:34:31.143
> 
> 标签：html, abcpdf

我正在使用 ABCPDF.Net 版本 5 从 HTML 创建 PDF 文件。但是，链接似乎以深色突出显示，几乎无法阅读。如果我设置 pdfDoc.HtmlOptions.AddLinks = false; 然后文本显示正常，但显然链接消失了。这些链接也可以很好地显示为 HTML。只是想知道是否有人以前遇到过这个问题，或者知道如何解决这个问题。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:22:05.617

版本 5 很旧。我建议你升级到最新版本，它有一个更好的 HTML 渲染引擎。

ABCPdf 将以任何 HTML 在服务器上的样子流式传输。首先，当您直接在服务器上查看 HTML 时，请仔细检查您是否没有遇到此问题。在 IE 中打开页面（ABCPdf，pre version 8 使用服务器版本的 IE 进行渲染）。

如果您在服务器上获得了一种有趣的颜色，只需更改页面的 css 直到一切正常。

# java - “return 1”以某种方式给了我一个递归方法的解决方案

> ID：13281603
> 
> 赞同：0
> 
> 时间：2012-11-08T02:35:53.030
> 
> 标签：java, methods, recursion

```
 {
System.out.println (base + " to the " + i + " power =  " + 
                          power(base, i));   
}

    public static double power(double baseNum, int exp) 
    {
        if (exp == 0)
            return 1;
        else
            return baseNum * power(baseNum, --exp); 
    } 
```

快速提问，上面称为“power”的方法在返回“1”时以某种方式返回答案的答案。因此，如果我传递参数来计算 2 ^ 5，RETURN 1 会以某种方式变成 32.0。这里到底发生了什么？“1”如何变成32.0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T02:44:03.280

**[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)**：

```
power(2, 5)
= 2 * power(2, 4)
== 2 * 2 * power(2, 3)
=== 2 * 2 * 2 * power(2, 2)
==== 2 * 2 * 2 * 2 * power(2, 1)
===== 2 * 2 * 2 * 2 * 2 * power(2, 0)
====== 2 * 2 * 2 * 2 * 2 * 1 (exp == 0)
===== 2 * 2 * 2 * 2 * 2
==== 2 * 2 * 2 * 4
=== 2 * 2 * 8
== 2 * 16
= 32 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:41:30.900

```
else
    return baseNum * power(baseNum, --exp); 
```

那个代码就在那里。当其中一个`power`函数返回 1 时，它实际上是由 this 调用的。所以它会是这样的：

```
return baseNum * power(baseNum, --exp); 
```

和`power`返回的 1，所以：

```
return baseNum * 1; 
```

在这种情况下，baseNum 将为 32.0。

递归。

更好的解释：[http](http://pastebin.com/raw.php?i=dHTnSPuY) ://pastebin.com/raw.php?i=dHTnSPuY （我的评论以@符号开头）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T02:43:12.863

幂(2, 5)->2*幂(2,4)->2*2*幂(2,3)->2*2*2*幂(2,2)->2*2*2* 2*power(2,1)->2*2*2*2*2*power(2,0)->32。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T02:45:08.400

这是，如果你会原谅双关语，递归的力量。它是这样工作的：

```
power(2, 5) = 2 * power(2, 4)
            = 2 * 2 * power(2, 3)
            . . .
            = 2 * 2 * 2 * 2 * 2 * power(2, 0)
            = 2 * 2 * 2 * 2 * 2 * 1
            = 32 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T02:49:58.777

既然你已经有了答案。请参阅此以了解有关[递归](http://www.youtube.com/watch?v=ozmE8G6YKww)的更多信息位置 01:47

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T02:54:43.827

在递归中，有一件重要的事情要记住，那就是基本情况。每个递归都需要在某个时间点停止。它不可能永远持续下去。

因此，在幂函数中，这是基本情况。

```
if (exp == 0)
    return 1; 
```

当 exp 为 0 时，它停止。没有它，它将给出stackoverflow！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T03:15:15.570

考虑如何指定函数的输出`power(base, exp)`。

对于 base `b`，我们指定以下内容：

```
power(b, 0) = b^0 = 1
power(b, 1) = b^1 = b
power(b, 2) = b^2 = b * b
power(b, 3) = b^3 = b * b * b
...
power(b, n) = b^n = b * b * ... * b  (n times) 
```

请注意，每次我们将指数增加一时，我们将结果乘以`b`得到新结果。一般来说，我们可以使用以下两条规则生成整个序列：

> 1.  `b^0 = 1`对全部`b`
> 2.  `b^n = b^(n-1) * b`对于所有正整数`n`

这两个规则直接转换为您提供的函数定义。

```
public static double power(double baseNum, int exp) 
{
    if (exp == 0)  /* when the exponent is zero, the result is always 1\. */
        return 1;
    else           /* otherwise, the power is equal to b^(n-1) * b. */
        return baseNum * power(baseNum, --exp); 
} 
```

当您从正整数指数开始时，我们使用规则 2 根据较小的指数计算结果，直到我们到达指数零 - 当我们知道结果应该始终为 1 时（使用规则 1）。

最后，几点说明。

1.  在该`else`子句中，简单地显示减法而不是使用前置增量会更清楚。也就是说，考虑使用：

    ```
    return baseNum * power(baseNum, exp - 1); /* exp - 1 instead of --exp */ 
    ```

2.  如果`exp`传递给你的函数是负数，它可能会在递归调用自身太多次并耗尽内存后崩溃。

3.  如果您希望该函数考虑负索引，您仍然可以使用递归调用，除了反转我们的递归规则以使指数向零移动：

    ```
    public static double power(double base, int exp)
    {
        if (exp == 0)
            return 1;
        else if (exp < 0)
            return power(base, exp + 1) / base;
        else
            return power(base, exp - 1) * base;
    } 
    ```

# mysql - 使用来自在线 Codeigniter 的 localhost MySql

> ID：13281604
> 
> 赞同：0
> 
> 时间：2012-11-08T02:36:05.077
> 
> 标签：mysql, codeigniter, codeigniter-2

我在机器上有一个 Codeigniter 项目，它以公共访问权限运行。然而，它使用的 MySql 数据库只能通过 localhost 访问。当我运行应用程序时，我得到

```
A Database Error Occurred

Unable to connect to your database server using the provided settings.

Filename: core/Loader.php

Line Number: 346 
```

[我按照此处](http://codeigniter.com/forums/viewthread/207916/)提到的说明进行操作，但仍然遇到相同的错误

```
Try

1\. print_r($params) and print_r($active_record);

2\. if the $params are still correct then simplify $active_record

3\. echo mysql_error();

4\. $db[‘default’][‘db_debug’] = true/false

5\. $db[‘default’][‘stricton’] = true/false; 
```

[编辑]

我已将参数设置为

```
$db['default']['hostname'] = 'mysql12.freehostia.com';
$db['default']['username'] = 'username';
$db['default']['password'] = 'password';
$db['default']['database'] = 'myDB';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = false;
$db['default']['db_debug'] = true;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = false; 
```

# android - 在 ABS 中使用 ShareActionProvider 和 Split Actionbar 的奇怪间距

> ID：13281607
> 
> 赞同：1
> 
> 时间：2012-11-08T02:36:37.390
> 
> 标签：android, actionbarsherlock

由于 ActionbarSherlock，我在拆分操作栏中​​使用了兼容性 ShareActionProvider - 但是，一旦图标展开以适合“历史”菜单，我就会遇到奇怪的间距问题 - 最后/最常用的共享选项的图标正在推动我的操作栏中的其他元素周围并奇怪地间隔它们。有谁知道我将如何解决/解决这个问题？以某种方式禁用历史记录会阻止“双”图标出现吗？或者有什么方法可以让它成为一个普通的图标，按下后会弹出一个“选择一个动作”弹出窗口之类的？

这是一张图片供参考

[http://i.imgur.com/yqOdt.png](http://i.imgur.com/yqOdt.png)

# macos - Mac 上的 Git：-a 命令不起作用

> ID：13281611
> 
> 赞同：0
> 
> 时间：2012-11-08T02:36:59.643
> 
> 标签：macos, git, version-control

我正在尝试使用**git commit -a "add some change"**命令提交目录中的所有文件。

我正在使用 Mac OS X，Leopard。

提交命令后，终端响应：

**致命的：带有 -a 的路径没有意义。**

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:40:07.607

在 git 中，使用 -m 选项添加消息。-a 表示 all 因此提交所有更改的文件

在终端中输入：

```
git add -a -m "Added some change" 
```

对于未来的问题，请参阅

```
git commit -h

(... omitted output)
-m, --message <message>
                      commit message
(... omitted output)
Commit contents options
-a, --all             commit all changed files
(... omitted output) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:44:02.253

尝试 git commit -am “一些消息”

# parallel-processing - 如何在一个 PBS 作业提交中运行多个命令

> ID：13281616
> 
> 赞同：5
> 
> 时间：2012-11-08T02:38:18.467
> 
> 标签：parallel-processing, pbs, qsub, torque, supercomputers

我写了一个只需要 1-4 cpu 的代码。但是当我在集群上提交作业时，我必须至少占用一个节点，每个作业有 16 个核心。所以我想在我提交的每个作业的每个节点上运行几个模拟。我想知道是否有一种方法可以在一项工作中并行提交模拟。

这是一个示例：我的代码需要 4 个 CPU。我为一个节点提交了一个作业，我希望该节点运行我的代码的 4 个实例（每个实例具有不同的参数）以占用所有 16 个内核。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T06:09:01.930

是的当然; 通常，此类系统将提供有关如何执行此操作的说明，[例如这些](https://support.scinet.utoronto.ca/wiki/index.php/User_Serial)。

如果您有（例如）4 个 4-cpu 作业，您知道每个作业都将花费相同的时间，并且（例如）您希望它们在 4 个不同的目录中运行（因此输出文件更容易跟踪），请使用shell & 符号在后台运行它们，然后等待所有后台任务完成：

```
(cd jobdir1; myexecutable argument1 argument2) &
(cd jobdir2; myexecutable argument1 argument2) &
(cd jobdir3; myexecutable argument1 argument2) &
(cd jobdir4; myexecutable argument1 argument2) &
wait 
```

（where`myexecutable argument1 argument2`只是一个占位符，用于您通常运行程序；如果您使用`mpiexec`或类似的东西，就像您通常使用它一样进入那里。如果您使用的是 OpenMP，您可以`OMP_NUM_THREADS`在上面的第一行。

如果您有许多任务不会花费相同的时间，那么最简单的方法是分配比上面的（比方说）4 个更多的工作，并让像[gnu](http://www.gnu.org/software/parallel/)这样的工具在必要时并行启动这些工作，如[本文所述回答](https://stackoverflow.com/questions/5547787/running-shell-script-in-parallel/5551712#5551712)。

# node.js - 特定代码块的 node.js 模块

> ID：13281617
> 
> 赞同：0
> 
> 时间：2012-11-08T02:38:27.820
> 
> 标签：node.js

每当我有一个“项目”时，我都有一个特定的代码块（forEach 循环）在我的代码库中到处使用。

如何将其重构为可以在需要时调用的模块或全局函数。

这是上下文：

```
Item.findById(itemid).populate('wants').exec(function(err, item){
        item.wants.forEach(function(person){
            person.avatar = gravatar.url(person.email, {size: 80, default: 'mm' });
        });

       //do some more stuff with item
}); 
```

我想在我有“项目”对象的其他地方重新使用这个 forEach 循环。我在想我传入 item 对象并再次返回它。

```
 item.wants.forEach(function(person){
        person.avatar = gravatar.url(person.email, {size: 80, default: 'mm' });
    }); 
```

就像是：

```
var myLib = require('./lib/myLib');
...
item = myLib.doStuff( item ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:03:11.797

您的`./lib/myLib.js`文件将如下所示：

```
module.exports.doStuff = function(item) {
    item.wants.forEach(function(person){
        person.avatar = gravatar.url(person.email, {size: 80, default: 'mm' });
    });
    return item;
} 
```

然后，您可以像您已经概述的那样要求和使用：

```
var myLib = require('./lib/myLib');
item = myLib.doStuff( item ); 
```

# php - WooCommerce，手动添加产品和购买价格

> ID：13281619
> 
> 赞同：3
> 
> 时间：2012-11-08T02:39:26.783
> 
> 标签：php, wordpress, e-commerce, woocommerce

如果我需要购买技术上不是`product`

换句话说，它是一个完全独立的“会员”，需要购买，而不是产品帖子。

我希望能够手动在购物车中添加商品……手动名称、手动价格、手动元数据，然后购买。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:52:29.030

这是示例

```
global $woocommerce;
$woocommerce->cart->add_to_cart(16); 
```

16 -> 这是商店中现有产品的 ID

文档[链接](http://wcdocs.woothemes.com/apidocs/class-WC_Cart.html)

# python - shutil.copy 脚本不起作用

> ID：13281622
> 
> 赞同：1
> 
> 时间：2012-11-07T02:14:29.923
> 
> 标签：python

我在 python 中编写了一个脚本，该脚本应该将一堆文件复制到 system32，然后通过 cmd 安装它们。

我可以手动完成，但我正在尝试使其自动化。这是我写的：

```
import shutil
import os
L = ['file1.type', 'file2.type'.... ]
dst = "C:\\Windows\\system32"
for f in L:
     shutil.copy(f, dst)
os.system("cmd command yada yada...") 
```

它不起作用。我试着用空闲的方式一步一步地做，效果很好。所有文件都与脚本位于同一目录中。我在这里想念什么？

# javascript - 是否可以计算 html 内容在默认缩放屏幕上占用的空间？

> ID：13281624
> 
> 赞同：0
> 
> 时间：2012-11-08T02:39:57.017
> 
> 标签：javascript, jquery, html, css

HTML/CSS/JS 问题：您拥有带有文本内容的简单格式的 HTML 页面。想象一下，如果你愿意的话，像

```
<p>content</p>
<div>content2</div>
<ul>
    <li>c1</li>
    <li>c2</li>
</ul> 
```

所有这些都只包含文本，具有基于 css 的可变格式。您想在页面的某个区域显示此内容。假设出于本讨论的目的，该区域被假定为足够大以显示任何一组未与其他标签嵌套的标签的内容。

1）您不希望内容溢出页面上的显示区域 2）您不希望在页面上的显示区域中创建滚动框

是否可以动态计算您可以在屏幕上显示多少内容？如果是这样，我会使用这些信息来分块内容，并通过 JS 以 powerpoint 的方式显示这些片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:46:24.530

您可以使用

```
$('#something').width() 
```

和

```
$('#something').height() 
```

# mysql - SELECT INTO 局部变量未声明？

> ID：13281628
> 
> 赞同：2
> 
> 时间：2012-11-08T02:40:21.740
> 
> 标签：mysql, sql

我正在执行的 sql 文件中有以下内容...

```
DECLARE rowcount INT;

SELECT COUNT(*) INTO rowcount
FROM VRG_PROBLEM_ACCOUNT PA 
WHERE NEW.CustName = PA.CustNAME 
AND NEW.AreaCode = PA.AreaCode 
AND NEW.PhoneNumber = PA.PhoneNumber; 
```

然而我得到了

```
ERROR 1327 (42000): Undeclared variable: rowcount 
```

在另一个文件中，我正在执行相同类型的 SELECT...INTO localvariable 并且它可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T02:42:57.450

局部变量只能在存储例程中声明。您可以改用@-variables，它根本不需要声明：

```
SELECT COUNT(*) INTO @rowcount
FROM ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:48:05.787

稍微重写一下你的查询怎么样？

```
DECLARE rowcount INT;

SET rowcount = (
    SELECT COUNT(*)
      FROM VRG_PROBLEM_ACCOUNT PA 
     WHERE PA.CustNAME = NEW.CustName
       AND PA.AreaCode = NEW.AreaCode
       AND PA.PhoneNumber = NEW.PhoneNumber); 
```

**更新 1***

我不知道您的完整代码，但请记住，`DECLARE`仅允许在`BEGIN ... END`复合语句中使用，并且必须在其开头，在任何其他语句之前。

# asp.net-mvc - 是否有任何报告工具为 Razor ViewEngine 提供开箱即用的 MVC 3 ReportViewer？

> ID：13281629
> 
> 赞同：2
> 
> 时间：2012-11-08T02:40:29.320
> 
> 标签：asp.net-mvc, razor, reporting

如标题所述。我所看到的大部分内容都涉及将其本机 Webforms 报表查看器放入 MVC 工作区的变通方法，而天生支持 Razor ViewEngine 的则更少。有没有免费或付费的提供这个？

我正在寻找类似于默认 Webforms ReportViewer 处理事情的方式，您可以在其中预览您将要导出的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:45:09.257

我个人使用[Perpetuum SharpShooter](http://www.perpetuumsoft.com/SharpShooter-Reports-Web.aspx)进行网络报告。我使用标准的 ASP.NET WebForms，但我在某处看到了 Razor 的文档。

然而不幸的是，它没有原生的基于 Web 的报表设计器。真可惜。我必须创建大量的解决方法来为我的用户提供他们的 Windows 报告编辑器。

# objective-c - 在 UICollectionViewCell 上设置 .reuseIdentifier

> ID：13281631
> 
> 赞同：6
> 
> 时间：2012-11-08T02:40:44.507
> 
> 标签：objective-c, xcode, interface-builder, nib, uicollectionview

我有一个特别`UICollectionViewCell`想**实例化自己**，并添加到`UICollectionView`. 为了使其工作，`UICollectionViewCell`实例需要`.reuseIdentifier`设置其属性。

通常，描述单元格的类或 Nib 会在集合视图中注册，并且集合视图会使用`.reuseIdentifier`已设置的单元格实例化单元格，使用以下方法：

```
- registerClass:forCellWithReuseIdentifier:
- registerNib:forCellWithReuseIdentifier: 
```

但是，由于我在集合视图之外构建此单元格，因此这些不适用。

当我自己创建单元格时，似乎无法设置它`.reuseIdentifier`（因为它是只读属性，并且没有`init...`初始化它的方法）。

`.reuseIdentifier`未设置时`UICollectionView`，添加单元格时会引发异常。此行为不同于`UITableView`，其中重用标识符是可选的。

设置集合视图单元格的重用标识符的一种简单解决方法是将其嵌入`.xib`文件中并使用该`Identifier`框，然后使用

```
[NSBundle.mainBundle loadNibNamed:@"MyCellName" owner:self options:nil][0]; 
```

然后我可以通过上述实例化`UICollectionViewCell`并且一切正常。

...但这似乎是一个非常愚蠢和任意的箍跳。是否有其他方法可以在没有`.xib`-wrapper 绕行的情况下在单元实例上设置此属性？

* * *

更新：Apple 的文档是这样说的：

> 为了简化代码的创建过程，集合视图要求您始终使视图出列，而不是在代码中显式创建它们。

...这实际上是不正确的，因为它不需要这个（即，只要以*某种方式*设置了它们的标识符，外部实例单元就可以正常工作，例如，如果从 a 加载`.xib`），它也不会“简化我的代码的创建过程”在我的特定用例中（需要一个额外的文件；此外，要求集合视图创建这几个复杂的一次性文件会很麻烦）。

但是上面的内容似乎暗示这个问题的答案是否定的：故意“很难”创建一个可用的单元格，除非让集合视图出列它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:14:29.040

我很抱歉这么说，但我认为您将不得不接受这样一个事实，即 UICollectionView 是生产 UICollectionViewCells 的唯一 Apple 品牌工厂。因此，如果您有两个要在其中显示完全相同的*对象*的集合视图，那么您就不走运了！

好消息是，如果您有两个集合视图，您希望在其中显示一个*看起来*与另一个完全相同的单元格，那么您可以完成您的任务。这很简单：

```
@interface MyModelClass : NSObject
  // a bunch of data
@end

@interface MyCollectionViewCell : UICollectionViewCell
-(void)refreshCellWithObject:(MyModelClass *)object;
@end 
```

同时，在哪个类中拥有 UICollectionView cv1 和 cv2

```
[[self cv1] registerClass:[MyCollectionViewCell class] forCellWithReuseIdentifier:@"MyCollectionViewCell"]; 
```

和

```
[[self cv2] registerClass:[MyCollectionViewCell class] forCellWithReuseIdentifier:@"MyCollectionViewCell"]; 
```

他们的数据源可以看起来相同

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
   MyModelObject *obj = [self theObjectIWant];

   MyCollectionViewCell *cell;

   cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCollectionViewCell" forIndexPath:indexPath];

   [cell refreshCellWithObject:obj];

   return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:21:08.217

使用这两种方法。

```
– registerNib:forCellWithReuseIdentifier:
– dequeueReusableCellWithReuseIdentifier:forIndexPath: 
```

参见苹果的[UICollectionView 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UICollectionView_class/Reference/Reference.html)

# javascript - 插入（使用 AJAX）浮动 其他浮动之前的元素 s 不移动它们

> ID：13281632
> 
> 赞同：1
> 
> 时间：2012-11-08T02:41:25.457
> 
> 标签：javascript, html, css, ajax

所以我有一堆 li 元素看起来像：

```
<div id="previous_button">
    <a href="javascript:void(0)" id="previous">Previous</a>
</div>
<div id="slider-stage">
    <ul id="slider-list">
        <li>First</li>
        <li>Second</li>
        <li>Third</li>
        <li>Fourth</li>
        <li>Fifth</li>
        <li>Sixth</li>
    </ul>
</div>
<div id="next_button">
    <a href="javascript:void(0)" id="next">Next</a>
</div> 
```

和 CSS：

```
#slider-stage
{
    float: left;
    width:825px;
    overflow:auto;
    overflow-x:hidden;
    overflow-y:hidden;
    height:235px;
    margin:0 auto;
}

#slider-list
{
    width: 1200px;
    border:0;
    margin:0;
    padding:0;
}

#slider-list li
{
    list-style:none;
    margin:0;
    padding:0;
    border:0;
    margin-right:15px;
    background: grey;
    background-size: 150px 235px;
    float:left;
    width:150px;
    height:235px;
}
#previous_button
{
    float: left;
    height: 235px;
    margin-right: 15px;
}
#next_button
{
    float: left;
    height: 235px;
    margin-right: 15px;
} 
```

当 margin-left 改变时整个滑块列表移动：

```
window.addEvent('domready', function()
{ 
    var totIncrement = 0;
    var increment = 165;
    var maxRightIncrement = increment*(-2);
    var fx = new Fx.Tween('slider-list',
    {    
        duration: '500',
        property: 'margin-left'
    });
    // Previous Button
    document.id('previous').addEvent
    ('click', function(event)
    { 
        if(totIncrement<0)
        { 
            totIncrement = totIncrement + increment;
            fx.start(totIncrement);
        }
    }); 
    // Next Button
    document.id('next').addEvent
    ('click', function(event)
    { 
        special = special + 1;
        if(totIncrement>maxRightIncrement)
        { 
            totIncrement = totIncrement - increment;
            fx.start(totIncrement);
        }
    });
}); ​ 
```

当最后添加新元素时没有问题，当我尝试将它添加为第一个时 - 滑块列表移动。原因很明显，但是有什么办法可以避免呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:03:58.247

当您将新元素添加到列表的开头时，将`margin-left`新元素的宽度减小，有效地假装您向右滚动一次，从而使滑块保持在相同的位置：

```
$('new').addEvent('click', function(event) {
    Element('<li>New</li>', {text: 'New'})
        .inject($('slider-list'), 'top');
    $('slider-list').setStyle('margin-left', $('slider-list').getStyle('margin-left').toInt() - 165);
    totIncrement -= 165;
}); 
```

[http://jsfiddle.net/kelervin/aZJTu/](http://jsfiddle.net/kelervin/aZJTu/)

# android - 使用 _id 从 listItem onClick 获取信息

> ID：13281637
> 
> 赞同：0
> 
> 时间：2012-11-08T02:42:55.483
> 
> 标签：android, android-intent, android-sqlite

我有一个由数据库填充的列表视图。列表视图显示数据库的一些列。我希望能够单击 listItem 并显示一个显示整个记录的新活动。我试图通过在意图之间传递 id 来做到这一点，但它不起作用。活动正在开始，但 textViews 没有被填充。我在这里包含了相关的代码片段。非常感谢一些帮助

**主要活动**

```
public class MainActivity extends ListActivity {
    ....
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ...
        ...  
    }

    private void fillList() {
        ListView lv = getListView();

        Cursor c = db.getData();
        startManagingCursor(c);

        CustomCursorAdapter adapter = new CustomCursorAdapter(getApplicationContext(), c);
        lv.setAdapter(adapter);

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position, long id){
                Intent k = new Intent(MainActivity.this, ProductDetails.class);
                k.putExtra("item_id", id);
                startActivity(k);
            }
        });
    }

} 
```

**产品详情**

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        db = new ProdDB(this);
        setContentView(R.layout.product_details);
        db.open();

        long id = getIntent().getLongExtra("item_id", 0);

        Cursor cursor = db.getDetails(id);
        while(cursor.moveToFirst()){
            tv1.setText(cursor.getString(cursor.getColumnIndex(ProdDB.KEY_PRODCODE)));
            tv2.setText(cursor.getString(cursor.getColumnIndex(ProdDB.KEY_PRODNAME)));
            ...
            ...
        }
    }
} 
```

**DB.getDetails() - 来自 ProdDB**

```
String[] columns = new String[] {KEY_ROWID, 
        KEY_PRODCODE,
        KEY_PRODNAME,
        KEY_PRODTYPE,
        KEY_PRODCAT,
        KEY_PRODPRICE,
        KEY_PRODRRP,
        KEY_PRODSUPPLIER,
        KEY_NOTES};
return db.query(DB_TABLE, columns, KEY_ROWID + " = ?", new String[]{String.valueOf(id)}, null, null, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:26:34.080

你有问题，因为你正在使用`while(cursor.moveToFirst()){`. 如果你必须使用`while`循环，那么你应该使用`.moveToNext()`。否则，您可以只取出`while`moveToFirst 的循环，因为我假设您只需要一行。至于为什么，别问我，我不能告诉你。

# php - 如何建立连接？

> ID：13281639
> 
> 赞同：0
> 
> 时间：2012-11-08T02:43:00.917
> 
> 标签：php, db2

我是 DB2 的新手。

```
$database = 'test';
$user = 'user1';
$password = 'pswd1';
$hostname = '10.250.10.10';
$port = 556;

$conn_string = "DRIVER={IBM DB2 ODBC DRIVER};DATABASE=$database;" .
  "HOSTNAME=$hostname;PORT=$port;PROTOCOL=TCPIP;UID=$user;PWD=$password;";
$conn = db2_connect($conn_string, '', '');

if ($conn) {
    echo "Connection succeeded.";
    db2_close($conn);
}
else {
print($conn);
    echo "Connection failed.";
    die(db2_conn_errormsg());

} 
```

所有的值都是正确的。但连接失败。请给我建议。以及如何检查 PHPINFO()。DB2 是否安装成功。

我收到以下错误

```
Connection failed.[unixODBC][Driver Manager]Data source name not found, and no default driver specified SQLCODE=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:32:12.180

我不是 PHP 专家，但如果您使用的是 ODBC 驱动程序，您可能需要在 ODBC 驱动程序管理器中对数据库进行编目。在 Windows 上，在“搜索程序和文件”中搜索 ODBC。我不确定 Linux 上的等价物

# amazon-s3 - 如何在我的 Amazon EC2 服务器之间创建共享 /home 目录

> ID：13281653
> 
> 赞同：0
> 
> 时间：2012-11-08T02:45:17.113
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services

我有一个使用 Ubuntu 12.04 启动的 EC2 服务器集群。这将是一个开发环境，几个开发人员将在其中进行 ssh-ing。我想将其设置为 /home 目录在所有 4 个服务器之间共享。我想这样做是为了 A) 简化服务器的部署，并且 B) 使开发人员更容易，以便他们的 homedir 中的所有内容都可以在所有服务器上使用。

过去我已经看到使用 NetApp 网络连接驱动器完成此操作，但我似乎无法弄清楚如何使用 AWS 组件创建等效项。

有谁知道我如何使用亚马逊服务创建相同的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:55:27.073

您可能需要让服务器托管 NFS 共享来存储主目录。我会试试这个人在他的回答中做了什么[https://serverfault.com/questions/19323/is-it-feasible-to-have-home-folder-hosted-with-nfs](https://serverfault.com/questions/19323/is-it-feasible-to-have-home-folder-hosted-with-nfs)。

# geocode - 邮政编码的国际地理编码

> ID：13281654
> 
> 赞同：1
> 
> 时间：2012-11-08T02:45:21.287
> 
> 标签：geocode, yahoo-api, google-geocoder, bing-maps

我正在尝试开发一种寻址解决方案，用户可以在其中输入邮政编码，然后自动填写城市、州和国家/地区。这对于给定的区域/文化设置显然很简单，具体取决于服务，但我是试图管理这个以进行国际查找。例如，邮政编码 10104 映射到（至少）美国纽约市、哥斯达黎加圣何塞和法国的一个地区。我需要能够将邮政编码扔给服务并返回我可以提供给用户以供选择的所有匹配项。据我所知，这在 3 个主要的地理编码服务（谷歌、必应、雅虎）中不容易管理，但我希望我遗漏了一些东西。任何有助于推动这一进程的帮助将不胜感激。

# php - Facebook 致命错误会话已过期

> ID：13281655
> 
> 赞同：1
> 
> 时间：2012-11-08T02:45:29.407
> 
> 标签：php, facebook, facebook-php-sdk

```
<?php
require_once"includes/strings.php";
require_once"php/function.php";
require_once"php/config.php";
require_once"php/app.php";

$currentFBuserid = "0";

///////FACEBOOK GET USER INFORMATION
session_start();
// Enter the app id and secret below
define('YOUR_APP_ID', '$fbAppID');
define('YOUR_APP_SECRET', '$fbAppSecret');

require_once"php/fbsdk/src/facebook.php";

$facebook = new Facebook(array(
  'appId'  => $fbAppID,
  'secret' => $fbAppSecret,
));

$userId = $facebook->getUser();
if($userId){
    $userInfo = $facebook->api('/' + $userId);
           } 
```

好的，问题很简单，大约每两个小时我猜会话在我的网站上过期，并且错误“致命错误：未捕获的 OAuthException：验证访问令牌时出错：会话已在 unix 时间 1352329200 过期。

当前的unix时间是1352330589。在/home/######/public_html/php/fbsdk/src/base_facebook.php第1238行抛出"

无论我抓取这个网站多久，我都很难弄清楚问题是什么。

顺便说一句：（刷新页面解决了这个问题）

我真的需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:16:16.860

> 好的，问题很简单，大约每两个小时我猜会话在我的网站上过期，并且错误“致命错误：未捕获的 OAuthException：验证访问令牌时出错：会话已在 unix 时间 1352329200 过期。

使用客户端流程获取的用户访问令牌将在两小时后过期。

您可以扩展它们，也可以使用服务器端流程——两者都会生成一个有效期为 60 天的令牌。

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

（最新版本的 PHP SDK 有一个方法称为`setExtendedAccessToken`扩展短期令牌。）

> 顺便说一句：（刷新页面解决了这个问题）

如果您使用 JS SDK 进行登录，那么刷新当然会使其向 Facebook 发出新的跨域请求，并会获得一个新的短期访问令牌。

# java - 找出我错过的地方}

> ID：13281656
> 
> 赞同：-5
> 
> 时间：2012-11-08T02:45:36.913
> 
> 标签：java

当我编译时，我得到这个错误：解析时到达文件结尾 }^ 我知道我错过了一个 }，我在最后添加了一个但仍然得到相同的编译错误..我的眼睛都在交叉看 }。 ..任何有一双清澈眼睛的人都能指出明显的东西吗？

解决了...删除了代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T02:48:28.003

此代码需要以更好的一致性进行格式化。使用[IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)，您可以自己找到此类问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T02:47:42.127

没有`}`结束`swtich`

```
default:
          break;
}

                  c++;

     System.out.print( "\n\t\t\tEnter Another Pledge? (Y/N)?\n\t\t\t" );
     a = Keyboard.nextLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T02:48:33.053

```
import java.util.Scanner;
import java.text.*;

public class test2
{
  public static void main(String[] args)
  {
      final int Max = 50;
      int c = 0;
      int s = 0;
      int number =0;
      String a;
      char choice, summary;
      Student [] jogathon = new Student[Max];
      Scanner Keyboard = new Scanner(System.in);

        for (int i=0; i< Max; i++) {
        jogathon[i].laps = 0;
        jogathon[i].amount = 0;
        jogathon[i].totals = 0;

        } // make it more visible to relieve yoursel of this problem

      do
      { // next time put tabs after here
      Student.opening();

      System.out.print( "\n\t\tIs this a Donation? (y/n)?\n\t\t" );
          a = Keyboard.nextLine();
          choice = a.charAt(0);

            switch(a)
            { // what an ugly way to format a switch statement...

            case 'n':
          case 'N':
              jogathon[c].getdata();
              s = jogathon[c].number;
              if (s >= 1 && s <= 7)
              {
                  jogathon[c].gettotals();
                  jogathon[c].toString();
                  jogathon[c].showTotals();

              }

              break;

          case 'y':
          case 'Y':
             jogathon[c].number = 0;
             jogathon[c].gettotals();
             jogathon[c].toString();
             jogathon[c].showTotals();

              break;

          default:
          break;
     } // look you forgot the } here at the end of the switch statement
                  c++;
     System.out.print( "\n\t\t\tEnter Another Pledge? (Y/N)?\n\t\t\t" );
     a = Keyboard.nextLine();
     choice = a.charAt(0);
     choice = Character.toUpperCase(choice);
      // this one below goes to the end of the "do{"
     } while (((a == 'Y') || (a == 'y')) && (c > Max));

       for (int i=0; i< c; i++) {
             System.out.println(i + "\t" + jogathon[i].name + "\t" + >money.format(jogathon[i].pledge));
   }

       System.out.println( "===============================\n");
       for (int i=0; i< 7; i++) {
           System.out.println(jogathon[c].names[i] + "\t" + >  >money.format(jogathon[c].totals[i]));
       }
// missing your final }'s here I think maybe you just omitted the rest 
```

# ruby-on-rails - 使用带有不显示 plotLines 的导轨的 highcharts

> ID：13281657
> 
> 赞同：4
> 
> 时间：2012-11-08T02:45:42.783
> 
> 标签：ruby-on-rails, highcharts

我正在使用[此处](https://github.com/agrobbin/highcharts-js-rails)找到的 gem 使用带有导轨的 High Charts 库。一切都很好，除了当我尝试将 plotLine 添加到任一轴时，我似乎无法弄清楚。这是我迄今为止尝试过的两个选项及其结果。任何对正在发生的事情的见解将不胜感激。

选项1：

```
chart.yAxis([{title: 'Y-Axis', min: 0, plotLines: {value: 25}]) 
```

结果：我的 JavaScript 出现错误

```
Uncaught TypeError: Object #<Object> has no method 'concat' 
```

具体来说，这是在 highcharts.js 中引用以下代码

```
each((options.plotLines || []).concat(options.plotBands || []), function (plotLineOptions) {
    //plotLinesAndBands.push(new PlotLineOrBand(plotLineOptions).render());
    axis.addPlotBandOrLine(plotLineOptions);
}); 
```

当我在那里暂停执行时，options.plotLines 变量是一个对象而不是数组，因此没有 concat 方法。

选项 2：

```
chart.yAxis([{title: '', min: 0, plotLines: [{value: 25}]}]) 
```

结果：页面无法呈现，Rails 出现以下错误消息。

```
You must pass a Hash to Highcharts::Axis::PlotLines. You passed [{:value=>25}] 
```

我不知道该怎么做，但是，考虑到[高图表](http://api.highcharts.com/highcharts#yAxis.plotLines)的 API 文档，我预计这会起作用，因为我想提供超过 1 个 plotLine。

我也尝试使用chart.renderer.path，但也失败了。有人可以解释发生了什么，并希望提出一种方法，我可以用这个 gem 在 Rails 中的 High Charts 图表上画一条水平线。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:33:06.273

我实际上是通过操作由 HighCharts ruby​​ 对象生成的底层 javascript 来解决这个问题的。这是执行此操作的代码

```
chart.yAxis([{title: '', min: 0, plot_lines_replace: plot_lines}])

# Because of a bug in this High Charts rails library, I'm going to have
# to add the plot_lines myself through the javascript

return chart.to_s.gsub("plot_lines_replace", "plotLines").html_safe 
```

这将使用 javascript 中的 plotLines 修改 plot_lines_replace 字符串，它会正常工作。

# facebook-graph-api - Facebook API 点赞不准确？

> ID：13281658
> 
> 赞同：1
> 
> 时间：2012-11-08T02:45:50.893
> 
> 标签：facebook-graph-api, facebook-like

检查这里是否有人可以提供帮助 - 我的网站上有很多用户遇到这个问题..

在从我的几个网站成员那里收到失败问题后测试我自己的帐户，我发现喜欢没有被准确地记录到我的个人资料中。登录时，我喜欢一个页面（这只是一个例子，同样的问题发生在多个页面上）。它是：

[http://www.imdb.com/name/nm1869946/](http://www.imdb.com/name/nm1869946/)

如果我使用 FQL 或在 Graph API Explorer 上查看此页面，我可以找到它的 ID：

10150237928985504

如果我通过访问 graph.facebook.com/me/likes 查看我的点赞列表，它不会出现。

当我在 Graph API Explorer 中输入时：

我/喜欢/10150237928985504

我得到：

```
{
"data": [
]
} 
```

但是 - 如果我去我的 Facebook 个人资料，我可以在那里看到“赞”。该页面已添加到我的新闻提要中，并且链接显示在我的“喜欢”列表中。

那么为什么不能通过 Graph API 或 FQL 获得“我喜欢”页面这一事实呢？

非常感谢！

# database-design - 在 ER 图中关联实体

> ID：13281661
> 
> 赞同：0
> 
> 时间：2012-11-08T02:46:02.920
> 
> 标签：database-design, erd

我需要绘制一个具有 3 个实体的 ER 图：待办事项列表、事件和联系人。这些实体彼此不相关，我正在考虑使用 User 实体连接它们。如果用户实体没有任何属性可以吗？那我应该如何将它转换为关系表呢？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:38:41.723

用户表至少有以下字段：ID（主键）、用户全名、用户登录名、散列密码、电子邮件地址......

在其他表中，您需要添加用户 ID 字段以充当外键。因此，例如，如果您想获取 Becky 的待办事项列表，您可以编写

```
select todoitems.name, todoitems.targetdate
from todoitems inner join users on todoitems.user = users.id
where users.username = 'Becky'
and todoitems.done = 0 /* or false */
order by todoitems.targetdate 
```

# python - 如何在 Python ElementTree 中插入子子元素

> ID：13281663
> 
> 赞同：3
> 
> 时间：2012-11-08T02:46:23.093
> 
> 标签：python

我的xml：-

```
<users>
</users> 
```

我只需要附加一个子元素：-

```
<users>
<user name="blabla" age="blabla" ><group>blabla</group>
</users> 
```

我的代码给出了一些错误:(

```
import xml.etree.ElementTree as ET
doc = ET.parse("users.xml")
root_node = doc.find("users")
child = ET.SubElement(root_node, "user")
child.set("username","srquery")
group  = ET.SubElement(child,"group")
group.text = "fresher"
tree = ET.ElementTree(root_node)
tree.write("users.xml") 
```

我错过了“追加”，但我不知道在哪里添加。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:07:25.540

更改此行

```
root_node = doc.find("users") 
```

...到这条线

```
root_node = doc.getroot() 
```

这里的关键点是它`doc`已经是对根节点的引用，并且可以使用`getroot()`. `doc.find('users')`不会返回任何东西，因为`users`它不是根的孩子，它是根本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T03:12:58.927

稍作修改的版本来解释发生了什么：

```
root = ET.fromstring('<users></users>') # same as your doc=ET.parse(...).find(...), btw. doc=root
el = ET.Element('group')   # creating a new element/xml-node
root.append(el)            # and adding it to the root

ET.tostring(root)
>>> '<users><group /></users>'
el.text = "fresher"        # adding your text
ET.tostring(root)
>>>  '<users><group>fresher</group></users>' 
```

# asp.net - 如何在页面后面显示代码中的字符串

> ID：13281666
> 
> 赞同：1
> 
> 时间：2012-11-08T02:46:40.833
> 
> 标签：asp.net, variables, user-interface, code-behind

我正在尝试在我的 aspx 页面中显示在我的代码后面声明的公共字符串“TrialExtensionLengthDays”：

```
<asp:Button ID="ExtendTrialButton" runat="server" Text="Extend Trial" CssClass="actionButton extendTrialButton"  title="Extend Trial by <%=TrialExtensionLengthDays%> days" OnClientClick="confirm('Extend the Customer Demo by <%=TrialExtensionLengthDays%> days?')"/> 
```

这是后面代码的相关部分：

```
Public Class EditTrialCustomer
    Inherits System.Web.UI.Page

    Public TrialExtensionLengthDays As String

Protected Sub Page_OnPreInit()
    TrialExtensionLengthDays = (System.Configuration.ConfigurationManager.AppSettings("TrialExtensionLengthDays"))
End Sub 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:51:05.500

尝试使用[Tooltip](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.tooltip.aspx)属性而不是标题。

使用页面加载中的代码来设置此属性：

```
protected void Page_Load(object sender, EventArgs e)
    {
        ExtendTrialButton.ToolTip = "Extend Trial by " + TrialExtensionLengthDays + " days";
        ExtendTrialButton.OnClientClick = "confirm('Extend the Customer Demo by" + TrialExtensionLengthDays + " days?')";
    } 
```

而你的asp页面只是：

```
<asp:Button CssClass="actionButton extendTrialButton" ID="ExtendTrialButton"  runat="server" Text="Extend Trial"  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:50:38.620

尝试声明

> TrialExtensionLengthDays StringBuilder 而不是 String

# c++ - 如何消毒 cin？

> ID：13281669
> 
> 赞同：7
> 
> 时间：2012-11-08T02:47:11.987
> 
> 标签：c++

假设我有一个接受整数的程序。如果用户输入超出范围的数字或字母或其他内容，如何阻止程序崩溃？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T03:05:26.530

的`cin`基类是[`std::basic_istream`](http://en.cppreference.com/w/cpp/io/basic_istream). 输入流指示一个可恢复的错误，以防它无法从流中提取请求的数据。为了检查那个错误位，[`std::basic_istream::fail()`](http://en.cppreference.com/w/cpp/io/basic_ios/fail)必须使用方法——`true`如果出现故障或`false`一切正常，它就会返回。重要的是要记住，如果出现错误，数据将留在流中，当然，还必须使用 清除错误位[`std::basic_istream::clear()`](http://en.cppreference.com/w/cpp/io/basic_ios/clear)。此外，程序员必须忽略不正确的数据，否则尝试读取其他内容将再次失败。为此，[`std::basic_istream::ignore()`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)可以使用方法。至于取值的有效范围，必须手动检查。好了，理论说得够多了，下面是一个简单的例子：

```
#include <limits>
#include <iostream>

int main()
{
    int n = 0;

    for (;;) {
        std::cout << "Please enter a number from 1 to 10: " << std::flush;
        std::cin >> n;

        if (std::cin.fail()) {
            std::cerr << "Sorry, I cannot read that. Please try again." << std::endl;
            std::cin.clear();
            std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
            continue;
        }

        if (n < 1 || n > 10) {
            std::cerr << "Sorry, the number is out of range." << std::endl;
            continue;
        }

        std::cout << "You have entered " << n << ". Thank you!" << std::endl;
        break;
    }
} 
```

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T03:22:27.777

我更喜欢将输入读取为字符串，*然后*使用`boost::lexical_cast<>`：

```
#include <boost/lexical_cast.hpp>
#include <iostream>
#include <string>

int main () {
  std::string s;
  while( std::cin >> s) {
    try {
      int i = boost::lexical_cast<int>(s);
      std::cout << "You entered: " << i << "\n";
    } catch(const std::bad_cast&) {
      std::cout << "Ignoring non-number: " << s << "\n";
    }
  }
} 
```

* * *

*后记*：如果你对 Boost 过敏，可以使用 lexical_cast 的这个实现：

```
template <class T, class U>
T lexical_cast(const U& u) {
  T t;
  std::stringstream s;
  s << u;
  s >> t;
  if( !s )
    throw std::bad_cast();
  if( s.get() != std::stringstream::traits_type::eof() )
    throw std::bad_cast();
  return t;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T02:59:56.207

如果我没记错的话，你应该在检查后清除缓冲区

```
 if (cin.fail())
    {
      cout<<"need to put a number"<<endl;
      cin.clear();
      cin.ignore();
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T03:22:19.977

如果您不想在代码中添加库，也可以使用 do..while() 语句。在您的 do while 中，您将要求用户输入，然后将其接收到您的变量中，然后在 while 部分中，您将能够检查这是否是您期望的数据，如果不继续要求数据的话。

只是另一种选择....即使已经提到的答案应该足够有效

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T06:28:33.057

您可以使用以下代码来最简单快速地检查 int 中的有效输入：

```
#include "stdafx.h"

#include <iostream>
using namespace std;

int main()
{

    int intb;
    while( !( cin>>intb ) ){
        cin.clear ();
        cin.ignore (1000, '\n');
        cout<<"Invalid input enter again: "<<endl;

    }
    cout<<"The value of integer entered is "<<b<<endl;

        return 0;
} 
```

while 循环不断迭代，直到获得正确的输入。cin.clear() 改变错误控制状态。cin.ignore() 清除输入流，以便可以再次获取新输入。如果未完成，while 循环将处于无限状态。

# jquery-ui - jqueryui 自动完成。我做错了什么

> ID：13281670
> 
> 赞同：1
> 
> 时间：2012-11-08T02:47:15.633
> 
> 标签：jquery-ui, jquery-autocomplete

所以这是从输入中调用两个变量的问题，在“#key”变量上，最后一次调用数据库中的“split(this.value);” 让它像这样

//这可以

touser: karen galante, jor monucha, wappa who,

//这需要

rnkey：凯伦·加兰特，乔尔·蒙努查，gdhdf9j7hd98fg7dfn，

// nappppaa8686f86df8,iuof79f79ds7h8j7kg70gfd70fg8dsf,gdhdf9j7hd98fg7dfn,

我是 jquery ui 的新手，我已经在这段代码上工作了几天，任何想法

```
$(function() {
    var availableTags = [
    {
            value: "iuof79f79ds7h8j7kg70gfd70fg8dsf",
            label: "jor monucha",
            desc: "the write less, do more, JavaScript library",
            icon: "16.png"
    },
            {
            value: "nappppaa8686f86df8",
            label: "karen galante",
            desc: "the write less, do more, JavaScript library",
            icon: "16.png"
    },        {
            value: "gdhdf9j7hd98fg7dfn",
            label: "wappa who",
            desc: "the write less, do more, JavaScript library",
            icon: "16.png"
    },
        ];
    function split( val ) {
        return val.split( /,\s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $( "#tags" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 2,
            source: function( request, response ) {
                // delegate back to autocomplete, but extract the last term
                response( $.ui.autocomplete.filter(
                    availableTags, extractLast( request.term ) ) );
            },
            focus: function() {
                // prevent value inserted on focus
                return false;

            },

       select: function( event, ui ) {
            $( "#project" ).val( ui.item.label );
            $( "#project-id" ).val( ui.item.value );
            $( "#project-description" ).html( ui.item.desc );
            $( "#project-icon" ).attr( "src", "images/" + ui.item.icon );

                var hintkey = split( this.value );
                // remove the current input
                hintkey.pop();
                // add the selected item
                hintkey.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                hintkey.join( ", " );
                hintkey.push( "" );

                $( "#key" ).val(hintkey);

                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.label );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " ); 
```

# php - 验证用户名和密码的功能不起作用

> ID：13281679
> 
> 赞同：1
> 
> 时间：2012-11-08T02:48:21.603
> 
> 标签：php, validation, if-statement

> **可能重复：**
> [正则表达式匹配整个字符串](https://stackoverflow.com/questions/8571226/regular-expression-matching-for-entire-string)

在我的表单页面上，我试图让它只接受我的用户名和密码的字母数字字符，并要求它们为 6 到 15 个字符。当我输入无效数据时，它会将其插入数据库，而不是抛出我在 CheckAlNum 函数中定义的用户错误。

函数.php

```
function checkAlNum($whichField) 
{
    if (preg_match('/[A-Za-z0-9]+/', $_POST[$whichField])){
        if ( (!count(strlen($whichField) >= 6)) OR (!count(strlen($whichField) <= 15 ))) {
            $message1 = '<p> Username and password must be between 6 and 15 characters </p>';
                return user_error($message1);
        }
        else{       
            return true;
        }           
    }

    else {
        $message = '<p>Username and password can only be numbers or letters</p>';
            return user_error($message);
     }

 } 
```

表单.php

```
 if (count($_POST) > 0) {

           //Validate the inputs
            $errorMessages = array();

            //Validate the username   
            $item5 = checkAlNum('username');
            if($item5 !== true) {
                $errorMessages[] = $item5;
            }

            //Validate the password
            $item6 = checkAlNum('password');
            if($item6 !== true) {
                $errorMessages[] = $item6;
            }

            //Validate the firstName and lastName
            $item1 = checkNameChars('firstName');
            if ($item1 !== true) {
                $errorMessages[] = $item1;

            }

            $item2 = checkNameChars('lastName');
            if ($item2 !== true) {
                $errorMessages[] = $item2;

            }   

            //Validate the office name
            $item3 = checkOfficeChars('office');
            if ($item3 !== true) {
                $errorMessages[] = $item3;

            }

            //Validate the phone number 
            $item4 = validate_phone_number('phoneNumber');
            if($item4 !== true) {
                $errorMessages[] = $item4;
            }  

            //Check to see if anything failed
            if (count($errorMessages) == 0) {

                $newEmployee = new Person;
                    $newEmployee -> insert();

            }

            else { //Else, reprint the form along with some error messages
                echo "<h2><span>Error</span>: </h2>";

                foreach($errorMessages as $msg) {
                    echo "<p>" . $msg . "</p>";
              }
            }
        }  

        ?> 
```

我尝试过使用 checkAlNum 函数的 if-else 语句以及正则表达式的嵌套（尽管我很确定正则表达式是正确的）。也许我只是错过了一些非常愚蠢的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:52:08.787

```
function checkAlNum($whichField) 
{
    if (preg_match('/^[a-z0-9]{6,15}$/i', $_POST[$whichField])) {
        return true;          
    }
    else {
        $message = '<p>Username and password can only be numbers or letters, 6-15 characters long</p>';
            return user_error($message);
     }
} 
```

如果没有`^`and`$`锚，您的正则表达式只会检查字段中是否有字母数字，而不是整个事情都是字母数字。并在此处更改`+`为`{6,15}`实现长度检查，因此您可以在代码中删除该额外检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:57:23.343

我认为第二个 if 语句是不正确的。它应该是这样的：

```
if ( !( (!count(strlen($whichField) >= 6)) OR (!count(strlen($whichField) <= 15 )) ) ) {
// ... do something
} 
```

这是由于德摩根规则规定

A AND B = !( !A OR !B )

无论如何，我不会以这种方式进行检查，从结构上讲，您最终会得到太多难以维护的嵌套 if 语句，并使您的代码看起来不漂亮。尝试避免代码中的嵌套条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T02:59:00.187

Barmar 的回答是最好的。但是，如果您想保留 if 语句来检查字符串长度，则需要删除 ，`count()`因为您已经使用 . 检查长度`strlen()`。

```
if ( (!(strlen($whichField) >= 6)) OR (!(strlen($whichField) <= 15 ))) { 
```

# mysql - 与远程 MySql 的 JDBC 连接失败

> ID：13281683
> 
> 赞同：0
> 
> 时间：2012-11-08T02:49:22.150
> 
> 标签：mysql, jdbc, glassfish, connection-pooling, remote-connection

在 glassfish(3.1.2) 中，我创建了一个连接到远程 MySql 数据库的 JDBC 连接池（和 JDBC 资源）。在 glassfish 中进行 ping 测试时，它是成功的。

我的 Java EE 6 应用程序正在使用该持久性单元（persistence.xml）：

```
<persistence-unit name="remotePU" transaction-type="JTA">
    <jta-data-source>jdbc/remotePU</jta-data-source>
    <properties> 
    </properties>
</persistence-unit> 
```

在一个 dao 中，我注入了一个持久性上下文：

```
@PersistenceContext(unitName = "remotePU")
private EntityManager em; 
```

然后我就用这个实体管理器来查询。

我还使用本地数据库测试了相同的设置，并且效果很好，所以我知道错误不在代码中。

我查询时得到的异常堆栈是：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
....
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed.
....
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
....
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost. 
```

远程连接只是慢吗？这是对远程数据库服务器的 ping：

```
Pinging xxxxx.net [xx.xx.xx.xx] with 32 bytes of data:
Reply from xx.xx.xx.xx: bytes=32 time=29ms TTL=54
Reply from xx.xx.xx.xx: bytes=32 time=28ms TTL=54
Reply from xx.xx.xx.xx: bytes=32 time=28ms TTL=54
Reply from xx.xx.xx.xx: bytes=32 time=28ms TTL=54

Ping statistics for xx.xx.xx.xx:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 28ms, Maximum = 29ms, Average = 28ms 
```

我可以调整 Glassfish 中的一些 JDBC 连接池设置以获得更好的连接吗？

# r - 更改 alpha 不会影响 ggplot2 中的任何内容

> ID：13281684
> 
> 赞同：7
> 
> 时间：2012-11-08T02:49:36.467
> 
> 标签：r, graph, ggplot2, alpha

我对 R 和 ggplot2 有点陌生，所以这个问题可能有点低级。但是我做了相当多的实验，并没有在网上找到答案，所以我想我会在这里问。

当我*将*alpha 添加到我的图表时，图表显示如下：

[一些阿尔法](http://imageshack.us/photo/my-images/703/floole.png/)

**但是，无论我如何*更改*alpha 的值，我都不会在图表中看到任何变化。我尝试了 alpha=.9 和 alpha=1/10000，图表中没有任何区别。**

然而，“阿尔法”一词似乎正在*发挥*作用。当我从代码*中删除*“alpha”时，我得到下图：

[没有阿尔法](http://imageshack.us/photo/my-images/805/floo.png/)

这是我的代码。谢谢！

```
library(ggplot2)
library(chron)
argv <- commandArgs(trailingOnly = TRUE)
mydata = read.csv(argv[1])
png(argv[2], height=300, width=470)

timeHMS_formatter <- function(x) {                  # Takes time in seconds from midnight, converts to HH:MM:SS
h <- floor(x/3600)
m <- floor(x %% 60)
s <- round(60*(x %% 1))                         # Round to nearest second
lab <- sprintf('%02d:%02d', h, m, s)        # Format the strings as HH:MM:SS
lab <- gsub('^00:', '', lab)                    # Remove leading 00: if present
lab <- gsub('^0', '', lab)                      # Remove leading 0 if present
}

dateEPOCH_formatter <- function (y){
epoch <- c(month=1,day=1,year=1970)
    chron(floor(y),out.format="mon-year",origin.=epoch)
}

p=  ggplot() + 
coord_cartesian(xlim=c(min(mydata$day),max(mydata$day)), ylim=c(0,86400)) +         # displays data from first email through present
scale_color_hue() +
xlab("Date") +
ylab("Time of Day") +
scale_y_continuous(label=timeHMS_formatter, breaks=seq(0, 86400, 7200)) +           # adds tick marks every 2 hours
scale_x_continuous(label=dateEPOCH_formatter, breaks=seq(min(mydata$day), max(mydata$day), 365) ) +
ggtitle("Email Sending Times") +                                                        # adds graph title
theme( legend.position = "none", axis.title.x = element_text(vjust=-0.3)) +
layer(
    data=mydata, 
    mapping=aes(x=mydata$day, y=mydata$seconds, alpha=1/2, size=5), 
    stat="identity", 
    stat_params=list(), 
    geom="point", 
    geom_params=list(),
    position=position_identity(),
)       

print(p)
dev.off() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T03:04:44.583

您需要将`alpha`规范*放在*`mapping`语句之外，如

```
layer(
    data=mydata, 
    mapping=aes(x=day, y=seconds), 
    stat="identity", 
    stat_params=list(), 
    geom="point", 
    geom_params=list(alpha=1/2, size=5),
    position=position_identity(),
) 
```

我更习惯于更紧凑地表达这一点

```
geom_point(data=mydata,
           mapping=aes(x=day, y=seconds),
           alpha=1/2,size=5) 
```

其余被排除的东西代表默认值，我相信......

另请参阅：[为什么 ggplot 图例显示“颜色”参数？](https://stackoverflow.com/questions/4731867/why-does-the-ggplot-legend-show-the-colour-parameter)

# iphone - iOS - 如何将分层数据表示为具有 2 个场景的主/详细模板

> ID：13281688
> 
> 赞同：3
> 
> 时间：2012-11-08T02:49:53.820
> 
> 标签：iphone, objective-c, ios, design-patterns

我有一组数据，基本上是一个目录

1.  第一节

1.  第一小节

1.  第一小节内容A
2.  第一小节内容B

3.  第二小节

1.  第二小节内容A
2.  第二小节内容B

3.  第二节

1.  第一小节

1.  第一小节内容A
2.  第一小节内容B

3.  第二小节

1.  第二小节内容A
2.  第二小节内容B

我希望主视图能够处理显示级别 1、1.1、1.2 的数据

我希望 Detail 视图能够显示级别 1.1.1、1.1.2 的项目的详细信息

因此，第一个 UITableView 将显示 2 个项目

* * *

第一节
第二节

* * *

当有人点击“第一部分”时，我想触发一个推送，重新加载相同的主视图，其中数据由树中的后续级别表示。下一节将显示 1.1 和 1.2 的标题

* * *

第一小节
第二小节

* * *

当有人点击“第一小节”时，我想触发一个推送，重新加载相同的主视图，其中数据由树中的后续级别表示。下一节将显示 1.1.1 和 1.1.2 的标题。

* * *

第一小节内容A
第一小节内容B

* * *

当有人点击“第一小节内容 A”时，我想触发推送到加载与该标题相关的内容的详细信息视图。

这可能吗？是否有警告此设置的最佳实践？这里的目标是为任何分支节点列表提供单个主视图，并为查看叶节点提供单个详细视图。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:12:03.497

是的，可以这样做。

请在此处查看代码> [http://code.google.com/p/sugartin-info/downloads/detail?name=cellMaxMinDemo.zip&can=2&q=](http://code.google.com/p/sugartin-info/downloads/detail?name=cellMaxMinDemo.zip&can=2&q=)

它具有文件夹结构视图，管理得非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:13:49.893

要正确回答这个问题，您需要告诉我们这些数据是如何排列的。为此，无需考虑导航或界面指南，您可以生成一个新数组作为表格数据源，然后根据用户对给定表格单元格的选择进行更改。

假设您有某种字典和数组结构，您可以构建任何部分的子部分（子部分）的数组。将其设置为您的数据源并重新加载表视图。

# java - 带有（首选）Java 的 Google 地球插件

> ID：13281689
> 
> 赞同：1
> 
> 时间：2012-11-08T02:49:56.220
> 
> 标签：java, google-earth-plugin

我希望构建一个使用 google-earth-plugin 和 Java 的应用程序（首选）我的目标，简而言之，就是将插件与 3D 图像一起使用，并允许最终用户导航到我预先定义的区域并添加一些其它功能。

我的理解是 GE API 已被弃用，开发人员应该使用 GE 插件。如果是这样，构建 GE 应用程序的首选语言是什么。我对 Java 很满意（在 Eclipse 上）；但我找不到任何解释如何创建简单的“hello world”的“101 教程”（不确定这是否可行）。

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:23:33.977

GE-API 有一个 Java Wrapper。这是一个非常先进的项目，已经有第三个稳定版本的代码。我个人从未使用过它。也许有人可以评论它有多好。这是链接： [https ://code.google.com/p/gwt-earth-3/](https://code.google.com/p/gwt-earth-3/)

无论如何，您可以使用 GWT 编写包含 JavaScript 使用的 Java 项目。这是链接： [https ://developers.google.com/web-toolkit/overview](https://developers.google.com/web-toolkit/overview)

祝你好运。如今，几乎任何架构解决方案都是可能的。不要听那些告诉你你不能做某事的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:29:05.580

我认为你不能使用 Java 和 GE API，你应该在你的 Java 应用程序中嵌入一个支持 GE 插件的浏览器，我还没有找到这样的浏览器。而且我不知道如何在 Java 应用程序中嵌入浏览器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:22:41.357

我一直在玩 GE 插件一段时间，但我一直在使用 C# 插件。使用起来相当容易，但知道 javascript 会更容易（我不知道）。

该插件有一个 javascript 界面，所以如果像 Paco 所说的那样，您可以找到一种方法在您的应用程序中嵌入浏览器并向其发送 javascript 命令，您应该没问题。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:15:06.487

我会尝试一个答案，但我不知道 Java！

您可以将插件嵌入到 QWebView 中。也许 Qt Jambi 已经为你完成了，java 用户 [http://qt-jambi.org/](http://qt-jambi.org/)

希望这可以帮助：-/

# vb.net - Timer_tick 没有停止的问题

> ID：13281691
> 
> 赞同：2
> 
> 时间：2012-11-08T02:50:07.083
> 
> 标签：vb.net, .net-4.0

我对编程和 vb.net 非常陌生，尝试更多地自学以作为一种爱好，因为我有一个我认为有用的程序的想法，但我无法解决这个问题，我相信它是与计时器有关。

我有一个 size.(600,600) 的表单，带有一个 size.(450,150) 的按钮，在表单上设置了 location(100,50)。单击时我想向下移动它自己的高度，然后在它的位置添加一个新按钮。下面包含的代码在前两次单击时可以正常工作，但在第三次单击时，按钮会继续移动，并且自动滚动条会延伸。我最初以为是自动滚动功能或位置属性，但意识到随着按钮不断移动，计时器并没有停止。我知道代码在实现结果方面可能非常笨拙，并且编译器当前跳过了一些行/变量（这些来自较早的尝试来解决这个问题）。

我环顾四周，找不到问题的原因。任何帮助将不胜感激。如果代码块看起来很乱，请道歉 - 先去吧。

```
Public Class frmOpenScreen
Dim intWButtons, intCreateButtonY, intCreateButtonX 'intTimerTick As Integer
Dim arrWNames() As String
Dim ctrlWButtons As Control
Dim blnAddingW As Boolean

Private Sub btnCreateW_Click(sender As System.Object, e As System.EventArgs) Handles btnCreateW.Click
    'Creates new Button details including handler
    Dim strWName, strWShort As String
    Dim intCreateButtonY2 As Integer
    Static intNumW As Integer
    Dim B As New Button

    strWName = InputBox("Please enter the name name of the button you are creating. Please ensure the spelling is correct.", "Create W")
    If strWName = "" Then
        MsgBox("Nothing Entered.")
        Exit Sub
    End If
    strWShort = strWName.Replace(" ", "")
    B.Text = strWName
    B.Width = 400
    B.Height = 150
    B.Font = New System.Drawing.Font("Arial Narrow", 21.75)
    B.AutoSizeMode = Windows.Forms.AutoSizeMode.GrowAndShrink
    B.Anchor = AnchorStyles.Top
    B.Margin = New Windows.Forms.Padding(0, 0, 0, 0)
    'Updates Crucial Data (w name array, number of w buttons inc Create New)
    If intNumW = 0 Then
        ReDim arrWNames(0)
    Else
        intNumW = UBound(arrWNames) + 1
        ReDim Preserve arrWNames(intNumW)
    End If
    arrWNames(intNumW) = strWShort
    intNumW = intNumW + 1
    intWButtons = WButtonCount(intWButtons) + 1
    'updates form with new button and rearranges existing buttons
    intCreateButtonY = btnCreateW.Location.Y
    intCreateButtonX = btnCreateW.Location.X
    ‘intTimerTick = 0
    tmrButtonMove.Enabled = True
    ‘Do While intTimerTick < 16
    ‘    'blank to do nothing
    ‘Loop
    'btnCreateW.Location = New Point(intCreateButtonX, intCreateButtonY + 150)
    B.Location = New Point(intCreateButtonX, intCreateButtonY)
    Me.Controls.Add(B)
    B.Name = "btn" & strWShort
    intCreateButtonY2 = btnCreateW.Location.Y
    If intCreateButtonY2 > Me.Location.Y Then
        Me.AutoScroll = False
        Me.AutoScroll = True
    Else
        Me.AutoScroll = False
    End If
    'MsgBox(intCreateButtonY)
End Sub

Function WButtonCount(ByRef buttoncount As Integer) As Integer
    buttoncount = intWButtons
    If buttoncount = 0 Then
        Return 1
    End If
    Return buttoncount
End Function

Public Sub tmrButtonMove_Tick(sender As System.Object, e As System.EventArgs) Handles tmrButtonMove.Tick
Dim intTimerTick As Integer
    If intTimerTick > 14 Then
        intTimerTick = 0
    End If
    If btnCreateW.Location.Y <= intCreateButtonY + 150 Then
        btnCreateW.Top = btnCreateW.Top + 10
    End If
    intTimerTick += 1
If intTimerTick = 15 Then
        tmrButtonMove.Enabled = False
    End If
End Sub

End Class 
```

所以我目前的理解是，tick 事件处理程序应该在每次触发时增加 timertick 变量，一旦它达到 15，它应该禁用计时器并停止按钮移动，但它没有这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:46:47.487

IntTimerTick 在每个 Tick 事件开始时初始化为 0。如果您将其声明为静态，则不会发生这种情况：

```
Static Dim intTimerTick As Integer 
```

# mysql - 比较MySQL中格式化字符串中的数字？

> ID：13281693
> 
> 赞同：0
> 
> 时间：2012-11-08T02:50:29.980
> 
> 标签：mysql, sql

我在 MySQL 的表中有一个`PolicyNo`列，格式如下：

```
XXXX-000000 
```

四个大写**字符**，后跟一个**破折号**和一个六位**数字**。

六位数字是递增的，`1`为下一行添加，并且所有行的四个字符始终相同。该`PolicyNo`列是唯一的，类型为`varchar(11)`。

如果订购，它将如下所示：

```
XXXX-000001
XXXX-000002
XXXX-000003
... 
```

现在我想获取所有`PolicyNo`大于指定数字的数字。

例如：检索所有`PolicyNo`大于`'XXXX-000100'`：

```
XXXX-000101
XXXX-000102
XXXX-000103
... 
```

我测试了这个查询，它工作正常，但我只是不知道这样做是否真的*安全*：

```
SELECT  'XXXX-000099' > 'XXXX-000098'
    ,   'XXXX-000099' > 'XXXX-000100'
    ,   'XXXX-000099' > 'XXXX-000101'

Result:
+-------------------------------+-------------------------------+-------------------------------+
| 'XXXX-000099' > 'XXXX-000098' | 'XXXX-000099' > 'XXXX-000100' | 'XXXX-000099' > 'XXXX-000101' |
+-------------------------------+-------------------------------+-------------------------------+
|                             1 |                             0 |                             0 |
+-------------------------------+-------------------------------+-------------------------------+ 
```

有没有其他方法可以做到这一点，或者已经可以使用它了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:04:39.603

您还可以使用 MySQL 提供的 SUBSTRING 函数，如以下查询。

> **SELECT count(*) FROM Table1 where substring(policyNo,6)>YOUR_RANGE;**

这里 6 作为从第 6 位开始的 6 位数字传递，如果您也想传递初始 4 字符，那么您可以使用以下查询。这里第二个 where 子句将从 policyNo 中获取初始 4 个字母。

**SELECT count(*) FROM Table1 where substring(policyNo,6)>YOUR_RANGE AND substring(policyNo,1,4) = 'ABCD'**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:04:59.823

因为你的数字是零填充的，只要四个字母的前缀是相同的并且*总是*相同的长度，那么这应该可以工作，因为 MySQL 会进行字典比较。

请注意，`0`填充中的少一个将导致此失败：

```
SET @policy1 = 'XXXX-00099';
SET @policy2 = 'XXXX-000598';
SELECT @policy1, @policy2, @policy1 > @policy2 AS comparison;
=========================================
> 'XXXX-00099', 'XXXX-000598', 1 
```

如果您需要真正比较最后的数字，则需要将它们解析出来并强制转换：

```
SET @policy1 = 'XXXX-00099';
SET @policy2 = 'XXXX-000598';
SELECT @policy1, @policy2, 
   CONVERT(SUBSTRING(@policy2, INSTR(@policy2, '-')+1), UNSIGNED) >
   CONVERT(SUBSTRING(@policy2, INSTR(@policy2, '-')+1), UNSIGNED) AS comparison;
=========================================
> 'XXXX-00099', 'XXXX-000598', 0 
```

# bash - 持久性 AWK 程序

> ID：13281695
> 
> 赞同：2
> 
> 时间：2012-11-08T02:50:50.827
> 
> 标签：bash, awk, log4j

我的任务是编写一个 BASH 脚本来过滤 log4j 文件并将它们通过 netcat 管道传输到另一台主机。要求之一是脚本必须跟踪它已经发送到服务器的内容，并且由于接收服务器上的许可限制而不能再次发送（服务器上的产品在每天数据模型上获得许可） .

为了实现过滤，我使用了封装在 BASH 脚本中的 AWK。BASH 组件工作正常——当我试图让它记住已经发送到服务器的内容时​​，让我感到悲伤的是 AWK 程序。每次一行与我的模式匹配时，我通过抓取一行的时间戳来做到这一点。在程序结束时，最后一个时间戳被写入当前工作目录中的隐藏文件。在程序的连续运行中，AWK 会将这个文件读入一个变量。现在，每次一行与模式匹配时，它的时间戳也会与变量中的时间戳进行比较。如果它较新，则打印，否则不打印。

期望的输出：

> 信息 2012-11-07 09:57:12,479 [[artifactid].connector.http.mule.default.receiver.02] org.mule.api.processor.LoggerMessageProcessor：MsgID=5017f1ff-1dfa-48c7-a03c-ed3c29050d12 交互状态=Accept InteractionDateTime=2012-08-07T16:57:33.379+12:00 零售商=CTCT RequestType=RemoteReconnect

隐藏文件：

> 2012-10-11 12:08:19,918

这就是理论，现在是我的问题。

该脚本适用于人为/琐碎的示例，例如：

> 信息 2012-11-07 09:57:12,479 [[artifactid].connector.http.mule.default.receiver.02] org.mule.api.processor.LoggerMessageProcessor：MsgID=5017f1ff-1dfa-48c7-a03c-ed3c29050d12 交互状态=Accept InteractionDateTime=2012-08-07T16:57:33.379+12:00 零售商=CTCT RequestType=RemoteReconnect

但是，如果我在包含堆栈跟踪等的完整日志文件上运行它，那么缩进级别似乎会对我的程序造成严重破坏。程序的第一次运行将产生所需的结果 - 将打印匹配的行并将最新的时间戳写入隐藏文件。再次运行它是问题出现的时候。程序的输出包含来自堆栈跟踪等的缩进行（参见下面的块），我不知道为什么。然后，这会填充隐藏文件，因为最后一个匹配行不包含时间戳，并且会向其中写入一些垃圾，从而使任何进一步的运行毫无意义。

不需要的输出：

> 在 package.reverse.domain.SomeClass.someMethod(SomeClass.java:233) 在 package.reverse.domain.processor.SomeClass.process(SomeClass.java:129) 在 package.reverse.domain.processor.someClass.someMethod(SomeClassjava :233) 在 package.reverse.domain.processor.SomeClass.process(SomeClass.java:129)

隐藏文件后：

> package.reverse.domain.process(SomeClass.java:129)

我的 awk 程序：

```
FNR == 1 {
    CMD = "basename " FILENAME
    CMD | getline FILE;
    FILE = "." FILE ".last";
    if (system("[ -f "FILE" ]") == 0) {
        getline FIRSTLINE < FILE;
        close(FILE);
        print FIRSTLINE;
    }
    else {
        FIRSTLINE = "1970-01-01 00:00:00,000";
    }
 }
$0 ~ EXPRESSION {
    if (($2 " " $3) > FIRSTLINE) {
        print $0;
        LASTLINE=$2 " " $3;
    }
}
END {
    if (LASTLINE != "") {
        print LASTLINE > FILE;
    }
} 
```

任何帮助找出为什么会发生这种情况将不胜感激。

更新：

BASH 脚本：

```
#!/bin/bash
while getopts i:r:e:h:p: option
do
    case "${option}"
    in
        i) INPUT=${OPTARG};;
        r) RULES=${OPTARG};;
        e) PATFILE=${OPTARG};;
        h) HOST=${OPTARG};;
        p) PORT=${OPTARG};;
        ?) printf "Usage: %s: -i <\"file1.log file2.log\"> -r <\"rules1.awk rules2.awk\"> -e <\"patterns.pat\"> -h <host> -p <port>\n" $0;
           exit 1;
    esac
done

#prepare expression with sed
EXPRESSION=`cat $PATFILE | sed ':a;N;$!ba;s/\n/|/g'`;
EXPRESSION="^(INFO|DEBUG|WARNING|ERROR|FATAL)[[:space:]]{2}[[:digit:]]{4}\\\\-[[:digit:]]{1,2}\\\\-[[:digit:]]{1,2}[[:space:]][[:digit:]]{1,2}:[[:digit:]]{2}:[[:digit:]]{2},[[:digit:]]{3}.*"$EXPRESSION".*";

#Make sure the temp file is empty
echo "" > .temp;

#input through awk.
for file in $INPUT
do
    awk -v EXPRESSION="$EXPRESSION" -f $RULES $file >> .temp;
done

#send contents of file to splunk indexer over udp
cat .temp;
#cat .temp | netcat -t $HOST $PORT;

#cleanup temporary files
if [ -f .temp ]
then
    rm .temp;
fi 
```

模式文件（我想匹配的东西）：

```
Warning
Exception 
```

awk 脚本如上。

Example.log

```
info  2012-09-04 16:00:11,638 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.interop.multidriveinterop: session not initialised
error 2012-09-04 16:00:11,639 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor: nz.co.amsco.interop.exceptions.systemdownexception
nz.co.amsco.interop.exceptions.systemdownexception
    at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.getdeviceconfig(comadaptorprocessor.java:233)
    at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.process(comadaptorprocessor.java:129)
    at org.mule.processor.chain.defaultmessageprocessorchain.doprocess(defaultmessageprocessorchain.java:99)
    at org.mule.processor.chain.abstractmessageprocessorchain.process(abstractmessageprocessorchain.java:66)
    at org.mule.processor.abstractinterceptingmessageprocessorbase.processnext(abstractinterceptingmessageprocessorbase.java:105)
    at org.mule.processor.asyncinterceptingmessageprocessor.process(asyncinterceptingmessageprocessor.java:90)
    at org.mule.processor.chain.defaultmessageprocessorchain.doprocess(defaultmessageprocessorchain.java:99)
    at org.mule.processor.chain.abstractmessageprocessorchain.process(abstractmessageprocessorchain.java:66)
    at org.mule.processor.AbstractInterceptingMessageProcessorBase.processNext(AbstractInterceptingMessageProcessorBase.java:105)
    at org.mule.interceptor.AbstractEnvelopeInterceptor.process(AbstractEnvelopeInterceptor.java:55)
    at org.mule.processor.AbstractInterceptingMessageProcessorBase.processNext(AbstractInterceptingMessageProcessorBase.java:105) 
```

用法：

> ./filter.sh -i "Example.log" -r "rules.awk" -e "patterns.pat" -h 主机 -p 端口

请注意，主机和端口在此版本中都未使用，因为输出只是被扔到标准输出上。

所以如果我运行它，我会得到以下输出：

> 信息 2012-09-04 16:00:11,638 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.interop.multidriveinterop：会话未初始化错误 2012- 09-04 16:00:11,639 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor: nz.co.amsco.interop .exceptions.systemdownexception at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.getdeviceconfig(comadaptorprocessor.java:233) at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.process(comadaptorprocessor.java:129)

如果我在同一个未更改的文件上再次运行它，我应该不会得到任何输出，但是我看到：

> nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.process（comadaptorprocessor.java:129）

我一直无法确定为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:55:42.910

您没有提供任何可以重现您的问题的示例输入，所以让我们从清理您的脚本开始，然后从那里开始。将其更改为：

```
BEGIN{
  expression = "^(INFO|DEBUG|WARNING|ERROR|FATAL)[[:space:]]{2}[[:digit:]]{4}-[[:digit:]]{1,2}-[[:digit:]]{1,2}[[:space:]][[:digit:]]{1,2}:[[:digit:]]{2}:[[:digit:]]{2},[[:digit:]]{3}.*Exception|Warning"
    # Do you really want "(Exception|Warning)" in brackets instead?
    # As written "Warning" on its own will match the whole expression.
}

FNR == 1 {
    tstampFile = "/" FILENAME ".last"
    sub(/.*\//,".",tstampFile)

    if ( (getline prevTstamp < tstampFile) > 0 ) {
        close(tstampFile)
        print prevTstamp
    }
    else {
        prevTstamp = "1970-01-01 00:00:00,000"
    }

    nextTstamp = ""
}

$0 ~ expression {
    currTstamp = $2 " " $3
    if (currTstamp > prevTstamp) {
        print
        nextTstamp = currTstamp
    }
}

END {
    if (nextTstamp != "") {
        print nextTstamp > tstampFile
    }
} 
```

现在，你还有问题吗？如果是这样，请向我们展示您如何运行脚本，即您正在执行的 bash 命令，并发布一些重现您的问题的小示例输入。

# oracle - 周范围，而不是放置日期

> ID：13281699
> 
> 赞同：1
> 
> 时间：2012-11-08T02:51:14.787
> 
> 标签：oracle

我有以下查询，但不是像“22-OCT-2012 AND 28-OCT-2012”那样放置一周的范围，而是放置一个像 CurrentWeek -2 或 CurrentWeek-1 这样的代码，这样可以避免每次编辑查询我需要运行它的那一周。你知道这个怎么做吗？

感谢 LD

```
 SELECT WO.USER_6 AS STYLE
 ,SUM (CASE WHEN (OPERATION.STATUS ='C' AND OPERATION.CLOSE_DATE BETWEEN '22-OCT-2012' AND '28-OCT-2012') THEN OPERATION.RUN_HRS ELSE 0 END) WEEK43
 ,SUM (CASE WHEN (OPERATION.STATUS ='C' AND OPERATION.CLOSE_DATE BETWEEN '29-OCT-2012' AND '04-NOV-2012') THEN OPERATION.RUN_HRS ELSE 0 END) WEEK44
FROM WORK_ORDER WO, OPERATION
WHERE  WO.BASE_ID = OPERATION.WORKORDER_BASE_ID
AND WO.Lot_ID = Operation.Workorder_Lot_ID
        AND WO.Sub_ID = Operation.Workorder_Sub_ID
        AND WO.Split_ID = Operation.Workorder_Split_ID
AND WO.TYPE ='W'
AND WO.WAREHOUSE_ID ='MEX-04'
AND OPERATION.CLOSE_DATE BETWEEN '22-OCT-2012'  AND '04-NOV-2012'
AND OPERATION.RESOURCE_ID IN ('171-4','171-ADD','171-3' ,'BAMEX-SEWCONC','BAMEX-SEWPATC')
AND OPERATION.RUN > 0
GROUP BY
WO.USER_6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:37:52.427

在这种情况下，我将使用`trunc`函数：

```
currentweek will be trunc(sysdate,'D') 
current_week - 1 will be trunc(sysdate,'D') - 7
current week - 2 will be trunc(sysdate,'D') - 2 * 7 
```

注意这将给出星期天的第一天。如果你想要星期一，你应该有一天：

```
current week - 2 will be trunc(sysdate,'D') - 2 * 7 + 1 
```

**更新：** 弗兰克是对的，一周第一天的行为取决于 NLS_TERITORY

```
alter session set NLS_TERRITORY ='UNITED KINGDOM';
select trunc(sysdate,'D') from dual;
05-11-2012

alter session set NLS_TERRITORY ='AMERICA';
select trunc(sysdate,'D') from dual;
04-11-2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T05:12:46.217

如果我理解您的问题，那么您可以像这样使用它来度过当前的工作日

```
SUM (CASE WHEN (OPERATION.STATUS ='C' AND OPERATION.CLOSE_DATE BETWEEN to_char(trunc(sysdate),'DD-MON-YYYY')  and to_char(trunc(sysdate)-6,'DD-MON-YYYY')) THEN OPERATION.RUN_HRS ELSE 0 END) WEEK43 
```

希望这对你有帮助

# java - 将查询字符串参数解析为 java 对象

> ID：13281701
> 
> 赞同：2
> 
> 时间：2012-11-08T02:51:18.753
> 
> 标签：java, parsing, query-string, querystringparameter

我有这样的查询字符串：

```
ObjectGUId=1abcde&ObjectType=2&ObjectTitle=maximumoflife&Content=racroi&TimeStamp=2012-11-05T17:20:06.056 
```

我有 Java 对象：

```
LogObject{
    private String ObjectGUId;
    private String ObjectType;
    private String ObjectTitle;
    private String Content;
    private String TimeStamp;
} 
```

所以我想将此查询字符串解析为这个 java 对象。

我已经搜索并阅读了很多问题，但还没有得到正确的答案。

告诉我什么可以解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T01:08:49.400

如果您真的不需要将查询字符串推送到您自己的类中（尽管您可能想要），而不是手动解析它，您可以使用 URLDecoder，正如@Sonrobby 评论的那样：

```
String qString = "ObjectGUId=1abcde&ObjectType=2&ObjectTitle=maximumoflife";
Uri uri = Uri.parse(URLDecoder.decode("http://dummy/?" + qString, "UTF-8"));
if (uri != null) {
    for(String key: uri.getQueryParameterNames()) {
        System.out.println("key=[" + key + "], value=[" + uri.getQueryParameter(key) + "]");
    }
} 
```

“虚拟”看起来很脏，但如果您只有查询字符串值（qString），则它是必需的。如果您有完整的 URL，只需将其直接传递给 URLDecoder，即可完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-08T10:09:50.753

受@bruno.braga 启发，这是一种使用 Apache http-components 的方法。您利用所有解析极端情况：

```
List<NameValuePair> params = 
    URLEncodedUtils.parse("http://example.com/?" + queryString, Charset.forName("UTF-8")); 
```

这将为您提供一个应该易于使用的 NameValuePair 对象列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T03:29:06.453

## 礼仪

1.  您确实应该更具体地说明您尝试过的内容以及为什么它不起作用。

2.  您的正确代码示例在`LogObject`这里真的很有帮助。

3.  理想情况下，您将提供[SSCCE](http://sscce.org/)，以便其他人可以轻松地自己测试您的问题。

## 回答

您可以像这样提取名称：值对：

```
String toParse = "ObjectGUId=1abcde&ObjectType=2&ObjectTitle=maximumoflife&Content=racroi&TimeStamp=2012-11-05T17:20:06.056";
String[] fields = toParse.split("&");
String[] kv;

HashMap<String, String> things = new HashMap<String, String>();

for (int i = 0; i < fields.length; ++i)
{
    t = fields[i].split("=");
    if (2 == kv.length)
    {
        things.put(kv[0], kv[1]); 
    }
} 
```

我选择将它们放入 HashMap 中，但您可以很容易地查看名称部分 ( `kv[0]`) 并选择对其进行处理。例如：

```
if kv[0].equals("ObjectGUId")
{
    logObject.setGUId(kv[1]); // example mutator/setter method
}
else if //... 
```

但是，您的所有字段`LogObject`都是私有的，并且您没有向我们展示任何方法，所以我希望您有一些从外部设置它们的方法......请记住，您需要将这些对存储在某种数据结构中（就像我对 a 所做的那样`HashMap`）如果您打算`LogObject`用所有字段初始化 a 而不是在构造函数调用之后设置字段。

说到 SSCCE，[我为这个答案做了一个](http://pastebin.com/4wFi83xW)。

# jquery - jQuery 工具范围输入演示不适用于我的 Chrome 或 Firefox

> ID：13281705
> 
> 赞同：0
> 
> 时间：2012-11-08T02:51:51.960
> 
> 标签：jquery, jquery-tools

我在本地尝试[这个演示。](http://jquerytools.org/demos/rangeinput/index.html)如果成功，我应该能够看到这样的[东西](http://jquerytools.org/demos/rangeinput/index.htm)。但是，我看到的只是一个可编辑的框，上面写着“NaN”。

这是我尝试过的：

1.  我复制了[他们网页](http://jquerytools.org/demos/rangeinput/index.html)给出的代码并将其保存为本地 html 文件。我用 Chrome 和 Firefox 打开它，但没有看到滚动条，我只看到了一个白框。
2.  我去看了他们的[独立演示](http://jquerytools.org/demos/rangeinput/index.htm)，并用 Chrome 做了一个“查看页面源代码”。我复制了整个 html 文件，保存在本地，然后在 Chrome 和 Firefox 中打开。结果还是一样。

这是我当前的本地 html 文件：

```
<!DOCTYPE html>
<html>
<!--
   This is a jQuery Tools standalone demo. Feel free to copy/paste.
   http://flowplayer.org/tools/demos/

   Do *not* reference CSS files and images from flowplayer.org when in
   production Enjoy!
-->
<head>
  <title>jQuery Tools standalone demo</title>

    <!-- include the Tools -->
  <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>

  <!-- standalone page styling (can be removed) -->
  <link rel="shortcut icon" href="/media/img/favicon.ico">
  <link rel="stylesheet" type="text/css"
        href="/media/css/standalone.css"/>

    <!-- rangeinput styling -->
  <link rel="stylesheet" type="text/css"
        href="/media/css/rangeinput/skin1.css"/>
</head>
<body>  <!-- HTML5 range input -->
  <input type="range" name="test" min="100" max="300" value="150" />

  <!-- make it happen -->
  <script>
    $(":range").rangeinput();
  </script>
</body>
</html> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:21:03.980

下载页面时，脚本所做的任何 HTML 结构更改都会保存在您的文件中。如果您在开发者控制台的 Network 选项卡中查看*index.html*文件的请求，您会发现请求文件的内容与实际下载的文件不同（除了脚本和样式表 url）。

**从请求的*index.html***复制正文的内容，您的示例将在本地开始工作。

# javascript - 将 PDF 页面拖放到表格中并用作图像文件

> ID：13281706
> 
> 赞同：0
> 
> 时间：2012-11-08T02:51:53.107
> 
> 标签：javascript, jquery, image, pdf, drag

我在 HTML 对象标签中有一个 PDF。我正在尝试将正在查看的某个 PDF 页面拖到 html 表单内的 Div 框中。我知道您可以将 pdf 页面拖出浏览器并将其另存为图像，但我想将此页面拖到 html 表单上的框中并将此图像作为数据保存到数据库中。只是不确定我会如何在 Javascript/Jquery 中做到这一点。 ![将某些 PDF 页面拖入表单 Div](../Images/c4546cdea40ce4cc798fd72769f67e28.png)

我在想也许在它被拖到 div 框后它会保存为 html 目录中的临时图像文件，当保存到数据库时会抓取这个临时图像文件然后删除它？

我试图在 jsfiddle 中创建一个示例，但它禁用了外部 pdf ...... :(

# entity-framework - LINQ-to-Entity 连接表返回

> ID：13281714
> 
> 赞同：0
> 
> 时间：2012-11-08T02:52:18.103
> 
> 标签：entity-framework, join, linq-to-entities

我有两个表如下：

```
Departments:
   DeptID   (PK)
   DeptName
   ...

Employees: 
   EmpID    (PK)
   DeptID   (FK)
   EmpName
   ... 
```

我有一个使用 LINQ 的查询，如下所示：

```
public List<Employee> GetEmployee(int deptID)
{
    var query = from e in mdc.Employees
                join d in mdc.Departments on e.DeptID equals d.DeptID
                where e.DeptID == deptID
                select new { e.EmpID, e.EmpName, d.DeptName };

    return query.ToList();
} 
```

现在我的问题是这个。我想选择字段 EmpID、EmpName 和 DeptName。但是我的返回类型是什么？这个返回一个错误，因为这个查询返回 a`GenericList`而不是 my `List<Employee>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:17:56.153

您需要创建另一个具有此类所需属性的类，

```
public class NewType{
public EmpID{get;set;}
//other fields here
} 
```

然后选择，

```
public List<NewType> GetEmployee(int deptID)
{
    var query = from e in mdc.Employees
                join d in mdc.Departments on e.DeptID equals d.DeptID
                where e.DeptID == deptID
                select new NewType{ e.EmpID, e.EmpName, d.DeptName };

    return query.ToList();
} 
```

# ruby - 如何在模块中定义 self.included 以便它通过其包含/扩展模块传递到后续包含/扩展

> ID：13281715
> 
> 赞同：0
> 
> 时间：2012-11-08T02:52:31.230
> 
> 标签：ruby

我有许多模块，当它们被包含在内时，我希望它们调用一个“包含”函数。这个函数对所有模块都是一样的。因此我希望能够在一个包含这个函数模块并让所有这些子模块都包含它..这是一个人为的例子，但我需要类似....

```
module Humanable
  def self.extended(klass)
    klass.instance_eval do
      define_method :included do |base|
        puts 'I was just included into the Person Class'
      end
    end
  end
end

module Personable
  extend Human
end

class Person
  include Personable
end 
```

当 Person 包含 Personable 时，它​​在哪里放置 Humanable 模块中的字符串。这不起作用，但希望你明白我该如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:45:58.763

答案似乎是：

```
module Humanable
  def self.extended(klass)
    klass.define_singleton_method :included do |base|
      puts 'hello'
    end
  end
end

module Personable
  extend Humanable # does **not** puts 'hello'
end

class Person
  include Personable # puts 'hello'
end 
```

# java - 用户如何在 JPanel 的构造函数中输入参数？

> ID：13281723
> 
> 赞同：1
> 
> 时间：2012-11-08T02:54:47.390
> 
> 标签：java, swing, joptionpane

我正在构建简单的 Swing Java 应用程序，它包含 JFrame 和 JPanel。我的 JPanel 的构造函数需要 1 个参数才能传递。我想让我的用户可以输入这个变量。所以现在我的应用程序刚刚启动，我需要在代码中传递这个参数。我的目标是：在我的 JPanel（可能还有 JFrame）启动之前，会出现带有问题“选择一个数字”的小窗口，并选择从 1 到 10 的数字列表，当用户选择一个并按下按钮时，应该传递这个值进入 myJPanel 的构造函数。

如何做到这一点？

JFrame代码：

```
public class MainWindow extends JFrame {

/**
 * Launch the application.
 */
 public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                MainWindow frame = new MainWindow();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 

/**
 * Create the frame.
 */
public MainWindow() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 542, 455);
    myJPanel panel1 = new JPanel(4); // HERE
    add(panel1);

} 
```

}

**编辑**

有没有更优雅的方法来做到这一点？: ] 我不想转换为字符串，然后转换为 int。

而且，如果用户单击取消按钮，如何关闭整个应用程序？

```
 Object[] possibleSizes = { 3, 4, 5, 6, 7 };
    Object selectedValue = JOptionPane.showInputDialog(null,
    "Choose a number", "Uwaga!",
    JOptionPane.INFORMATION_MESSAGE, null,
    possibleSizes, possibleSizes[0]);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 542, 455);
    MyJPanel panel1 = new MyJPanel(Integer.parseInt(selectedValue.toString()); // HERE
    add(panel1); 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:09:29.223

您可能正在寻找类似[`JOptionPane.showInputDialog`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showInputDialog%28java.awt.Component,%20java.lang.Object%29).

这非常简单，但允许您从用户那里收集信息，这些信息作为`String`

有关更多信息，请查看[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，[JOptionPane](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features)

您可以使用 获得非常复杂的结果`JOptionPane`，请查看[仅接受 java 中的单个数字](https://stackoverflow.com/questions/13224455/accept-only-a-single-digit-in-java/13224591#13224591)作为示例

# bash - 我在ubuntu中更改了PATH，但它不起作用

> ID：13281725
> 
> 赞同：0
> 
> 时间：2012-11-08T02:55:18.967
> 
> 标签：bash, ubuntu, path

我在我的 ubuntu 中安装了 Intellij Idea。我从终端运行它。

首先[，我这样做](https://stackoverflow.com/questions/11709374/change-path-permanently-on-ubuntu)，将 PATH 更改为 .bashrc，并获取它。

但它不起作用。

而且我确定目录是正确的。现在我在 .bashrc 中写了一个别名，它可以工作。

```
alias runidea='cd $THEDIR ; sh idea.sh' 
```

我回显 PATH 它是正确的。但如果我输入`sh idea.sh`

它告诉我`sh:Can't open idea.sh`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:12:33.380

尝试通过`idea.sh`在 shell 中输入来运行它（不带`sh`）

`$ idea.sh`不喜欢`$ sh idea.sh`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:22:31.833

试试这个

```
alias runidea='~/idea-IU-111.277/bin/idea.sh' 
```

现在创建了别名，然后运行以下命令

```
runidea 
```

idea-IU-111.277 可以替换为您的 intellij idea 文件夹

# c# - 如何确定 SECURITY_INFORMATION 的值是什么？

> ID：13281729
> 
> 赞同：1
> 
> 时间：2012-11-08T02:55:29.137
> 
> 标签：c#, pinvoke, msdn

所以我现在正在尝试操作几个 pinvoke 函数，但我不知道在哪里可以找到 SECURITY_INFORMATION 中每个标志的值？

这是[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379573%28v=vs.85%29.aspx)

我已经访问过 PInvoke 站点，它对 SECURITY_INFORMATION 的定义似乎不正确。[这里](http://www.pinvoke.net/default.aspx/Enums/SECURITY_INFORMATION.html#)

我认为它不正确的原因是因为当我尝试调用 ConvertSecurityDescriptorToStringSecurityDescriptor 方法时抛出以下错误。

```
A call to PInvoke function 'ConvertSecurityDescriptorToStringSecurityDescriptor' 
has unbalanced the stack. This is likely because the managed PInvoke signature 
does not match the unmanaged target signature. Check that the calling 
convention and parameters of the PInvoke signature match the target 
unmanaged signature. 
```

但是我再次有兴趣弄清楚如何找到我提供的 MSDN 文章中列出的每个标志的十六进制值。就好像人们只是神奇地生成了这些值并且它们是正确的，即使在那篇文章中没有任何记录它们的迹象。

**编辑 1**

```
[DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
public static extern bool ConvertSecurityDescriptorToStringSecurityDescriptor(IntPtr SecurityDescriptor, 
    uint RequestedStringSDRevision, 
    SECURITY_INFORMATION SecurityInformation,
    out IntPtr StringSecurityDescriptor, 
    out int StringSecurityDescriptorLen);

[Flags]
public enum SECURITY_INFORMATION  {
    OWNER_SECURITY_INFORMATION = 0x00000001,
    GROUP_SECURITY_INFORMATION = 0x00000002,
    DACL_SECURITY_INFORMATION = 0x00000004,
    SACL_SECURITY_INFORMATION = 0x00000008,
    UNPROTECTED_SACL_SECURITY_INFORMATION = 0x10000000,
    UNPROTECTED_DACL_SECURITY_INFORMATION = 0x20000000,
    PROTECTED_SACL_SECURITY_INFORMATION = 0x40000000
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:42:28.670

有几件事要尝试。第一的：

```
[Flags]
public enum SECURITY_INFORMATION : uint  {
    OWNER_SECURITY_INFORMATION = 0x00000001,
    GROUP_SECURITY_INFORMATION = 0x00000002,
    DACL_SECURITY_INFORMATION = 0x00000004,
    SACL_SECURITY_INFORMATION = 0x00000008,
    UNPROTECTED_SACL_SECURITY_INFORMATION = 0x10000000,
    UNPROTECTED_DACL_SECURITY_INFORMATION = 0x20000000,
    PROTECTED_SACL_SECURITY_INFORMATION = 0x40000000
} 
```

请注意，基础类型已更改为`uint`. 这些值在[此处定义](http://msdn.microsoft.com/en-us/library/cc230369.aspx)。

如果仍然不起作用，请尝试：

```
[DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
public static extern bool ConvertSecurityDescriptorToStringSecurityDescriptor(
    IntPtr SecurityDescriptor, 
    uint RequestedStringSDRevision, 
    SECURITY_INFORMATION SecurityInformation,
    out IntPtr StringSecurityDescriptor, 
    out IntPtr StringSecurityDescriptorLen); 
```

更改`StringSecurityDescriptorLen`为指针。

最后，如果您使用的是 .NET 4.0，显然对调用约定的处理方式已经改变，可能值得一看。阅读： [https ://stackoverflow.com/a/6768223/917090](https://stackoverflow.com/a/6768223/917090)

以上只是胡乱猜测，请老师注意！

# python - 带有 ipython 笔记本的 Amazon ec2 实例

> ID：13281731
> 
> 赞同：2
> 
> 时间：2012-11-08T02:56:10.353
> 
> 标签：python, amazon-ec2, amazon, ipython

我在亚马逊 EC2 中启动了一个微型实例。由于我想使用 ipython notebook，我选择了名为 ami-74d00c1d 的 linux 镜像，其中包含准备好的 ipython notebook。现在我想在同一个实例中使用 drupal 创建一个网页。所以我有两个问题：

1.  有没有关于 ami 组织的文件？python文件在哪里，apache配置在哪里...

2.  如何更改实例配置，将根指向另一个页面而不是 ipython 笔记本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:28:22.197

我还没有找到有关 ami 组织的任何文档。

但是要配置 ipython 笔记本起始页，ipython 文档（[http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#quick-howto-running-a-public-notebook-server](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#quick-howto-running-a-public-notebook-server)）提供了一个非常很好的解释。

# mongodb - 是否可以展平 MongoDB 结果查询？

> ID：13281733
> 
> 赞同：60
> 
> 时间：2012-11-08T02:56:14.950
> 
> 标签：mongodb, mongodb-query, flatten

我的 MongoDB 集合中有一个深度嵌套的集合。

当我运行以下查询时：

```
db.countries.findOne({},{'data.country.neighbor.name':1,'_id':0}) 
```

我在这里得到了这个嵌套的结果：

```
{"data" : {
  "country" : [
    {
      "neighbor" : [
        {
          "name" : "Austria"
        },
        {
          "name" : "Switzerland"
        }
      ]
    },
    {
      "neighbor" : {
        "name" : "Malaysia"
      }
    },
    {
      "neighbor" : [
        {
          "name" : "Costa Rica"
        },
        {
          "name" : "Colombia"
        }
      ]
    }
  ]
}} 
```

现在，这就是我想要的：

```
['Austria', 'Switzerland', 'Malaysia', 'Costa Rica', 'Colombia'] 
```

或这个：

```
{'name':['Austria', 'Switzerland', 'Malaysia', 'Costa Rica', 'Colombia']} 
```

或其他类似的东西......这可能吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-08T03:10:01.437

您可以使用[聚合](http://docs.mongodb.org/manual/applications/aggregation/)`$project`框架的& `$unwind`&`$group`来使结果更接近您的要求。

```
> db.countries.aggregate({$project:{a:'$data.country.neighbor.name'}},
                         {$unwind:'$a'},
                         {$unwind:'$a'},
                         {$group:{_id:'a',res:{$addToSet:'$a'}}})
  {
    "result" : [
        {
            "_id" : "a",
            "res" : [
                "Colombia",
                "Malaysia",
                "Switzerland",
                "Costa Rica",
                "Austria"
            ]
        }
    ],
    "ok" : 1
} 
```

`$unwind`由于名称数组嵌套很深，因此使用了两次。并且仅当`neighbor`属性是数组时才有效。在您的示例中，一个邻居字段（马来西亚）不是数组

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-07-18T15:31:07.287

以更简单的方式完成，也许是最近的

```
db.countries.aggregate({$unwind:'$data.country.neighbor.name'}) 
```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-11-08T03:06:20.443

在新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)下非常简单。$project 和 $unwind 操作是正确的。

# sql - SQL 触发器正在更新随机行而不是连接行

> ID：13281741
> 
> 赞同：0
> 
> 时间：2012-11-08T02:57:50.740
> 
> 标签：sql, sql-server, tsql

我在更新触发器中有这个查询

```
UPDATE [FSSQLPROD01].[collectionsDELETE].[dbo].[collections] 
SET 
    Defendant_1 = i.DisplayName 
    , Loan_Number_1 = i.Comments 
    , Client = i.KS_BookName 
    , Date_Instructed = i.OpenDate 
    , Person_Responsible_name = i.ResponsibleFeeEarnerName 
    , Person_Responsible_Email = i.ResponsibleFeeEarnerEmail 
    , Person_Acting_name = i.BillingFeeEarnerName 
    , Person_Acting_email = i.BillingFeeEarnerEmail 
    , Agent_Acting_name = i.BillingFeeEarnerName 
    , Agent_Acting_email = i.BillingFeeEarnerEmail 
    , CBA_Panel_Service_Area = i.KS_ServiceCat 
    , HBN_Number = i.KS_ClientAcctRef 
    , St_George_Contact = i.KS_Instructor 
FROM 
    [FSSQLPROD01].[collectionsDELETE].[dbo].[collections] c
INNER JOIN 
    Inserted i
ON
    Left(c.file_number, 6) COLLATE DATABASE_DEFAULT = i.MatterNumber COLLATE DATABASE_DEFAULT 
```

![在此处输入图像描述](../Images/8f6de51da4fd37514ab3e6f2b907677e.png) 现在 Join 连接在 File_Number 上匹配，例如 70003-1 但由于某种未知原因，应该更新到此行的数据已更新为完全随机的行 614864-7

我可以继续执行触发器并更新 70003-1 行，但我继续更新另一行 614864-7

这也在链接服务器上运行，触发器在一个服务器上与其他服务器约会

服务器 tigger 位于 Microsoft SQL Server 2005 - 9.00.3042.00 (X64) Feb 10 2007 00:59:02 版权所有 (c) 1988-2005 Microsoft Corporation Enterprise Edition（64 位）在 Windows NT 5.2 上（Build 3790：Service Pack 2 )

服务器触发器正在更新 Microsoft SQL Server 2005 - 9.00.3042.00 (X64) Feb 10 2007 00:59:02 版权所有 (c) 1988-2005 Microsoft Corporation Enterprise Edition (64-bit) o​​n Windows NT 5.2 (Build 3790: Service Pack 2 )

我一直在想，将服务器 SP 更新到 SP4 可以解决问题吗？

有没有人知道为什么这可能会影响服务器

修正案

是的，我实际上对值进行了硬编码并简化了它应该工作的 SQL 语句

```
DECLARE @MatterNumber as varchar(50)
SET @MatterNumber = (SELECT i.MAtternumber FRom Inserted as i) + '-1'
Print @MatterNumber

UPDATE [FSSQLPROD01].[collectionsDELETE].[dbo].[collections] 
       SET Loan_Number_1 = ‘123’
       WHERE file_number =  @MatterNumber 
```

但是，一旦我将 Declared Varible 值设置为 Loan_Number_1 或任何其他列，这就是问题开始发生的时候

```
DECLARE @LoanNumber as varchar(50)
SET @LoanNumber =    (SELECT i.Comments FRom Inserted as i)
    Print @LoanNumber
DECLARE @MatterNumber as varchar(50)
SET @MatterNumber = (SELECT i.MAtternumber FRom Inserted as i) + '-1'

Print @MatterNumber –-I print here I see 70003-1

UPDATE [FSSQLPROD01].[collectionsDELETE].[dbo].[collections] 
       SET Loan_Number_1 = @LoanNumber

       WHERE file_number =  @MatterNumber

Print @MatterNumber –-I print here I see 70003-1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:16:32.267

```
UPDATE [FSSQLPROD01].[collectionsDELETE].[dbo].[collections] 
SET 
    Defendant_1 = i.DisplayName 
    , Loan_Number_1 = i.Comments 
    , Client = i.KS_BookName 
    , Date_Instructed = i.OpenDate 
    , Person_Responsible_name = i.ResponsibleFeeEarnerName 
    , Person_Responsible_Email = i.ResponsibleFeeEarnerEmail 
    , Person_Acting_name = i.BillingFeeEarnerName 
    , Person_Acting_email = i.BillingFeeEarnerEmail 
    , Agent_Acting_name = i.BillingFeeEarnerName 
    , Agent_Acting_email = i.BillingFeeEarnerEmail 
    , CBA_Panel_Service_Area = i.KS_ServiceCat 
    , HBN_Number = i.KS_ClientAcctRef 
    , St_George_Contact = i.KS_Instructor 
FROM

    Inserted i
where
    Left([FSSQLPROD01].[collectionsDELETE].[dbo].[collections] .file_number, 6) COLLATE DATABASE_DEFAULT = i.MatterNumber COLLATE DATABASE_DEFAULT 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-08T03:41:35.920

触发器用于更新单个记录。当我们进行批量插入/更新时，它们不起作用。因为`SQL Server triggers runs only 1 time per UPDATE.` 如果您在单个语句中修改 3000 行，您的触发器将不会触发 3000 次。您的触发器只会触发一次。所以这就是它更新随机行的原因（尽管它应该是第一行）。

# gwt - Google Objectify v4 按 id 获取

> ID：13281745
> 
> 赞同：4
> 
> 时间：2012-11-08T02:58:36.800
> 
> 标签：gwt, objectify

我正在尝试使用 Objectify v4 在 App Engine 中获取实体，但它不起作用。

*   我的@Entity：**Translation.class**
*   我要获取的@Entity 的@Id：**301L**

我的@Entity：

```
@Entity
public class Translation {
  @Id
  private Long id;
  private String text;

  public String getText() {
    return text;
  }

  public Long getId() {
    return id;
  }

  public void setText(String text) {
    this.text = text;
  }
} 
```

不说话的请求：

```
Translation translation =ObjectifyService.ofy().load().type(Translation.class).id(301L).get(); // translation is null 
```

但如果我这样做：

```
 Translation translation = ObjectifyService.ofy().load().type(Translation.class).first().get(); // translation is not null 
```

然后：

```
System.out.println(translation.getId()); // translation id equal 301 
```

因此，**按 id 获取**似乎不起作用。问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T11:36:10.323

由于您的实体有一个`@Parent`字段，为了通过 id 获取它，您需要执行：

```
Translation translation = ObjectifyService.ofy().load().type(Thing.class).parent(par).id(301).get(); 
```

有关更多信息，请查看[Objectify 基本操作 - 加载](https://code.google.com/p/objectify-appengine/wiki/BasicOperations#Loading)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:23:17.820

对于@stickfigure，这是我真正的@Entity（PartOfSpeechGroup 显然也是一个@Entity）。

```
@Entity
public class Translation implements IsSerializable {
  @Id
  private Long id;
  private String text;
  @Parent
  private Key<PartOfSpeechGroup> partOfSpeechEntryKey;

  public Translation() {}

  public Translation(Key<PartOfSpeechGroup> partOfSpeechEntryKey) {
    this.partOfSpeechEntryKey = partOfSpeechEntryKey;
  }

  public String getText() {
    return text;
  }

  public Long getId() {
    return id;
  }

  public Key<PartOfSpeechGroup> getPartOfSpeechEntryKey() {
    return partOfSpeechEntryKey;
  }

  public void setText(String text) {
    this.text = text;
  }
} 
```

# java - 本地磁盘上不存在文件时的java文件构造函数

> ID：13281758
> 
> 赞同：0
> 
> 时间：2012-11-08T03:00:56.627
> 
> 标签：java, constructor

我想在 java 中实例化 File，但该文件不驻留在我的本地磁盘上，它驻留在 http 服务器上。我试图做类似的事情

```
File file = new File ("http://myserver.com/abc.txt"); 
```

但得到一个例外。怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:03:04.320

```
String data = "";
try {
    // Create a URL for the desired page
    URL url = new URL("http://myserver.com/abc.txt");
    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    String str;
    while ((str = in.readLine()) != null) {
        data += str + "\n"
    }
    in.close();
} catch (MalformedURLException e) {
} catch (IOException e) {
}
System.out.println(data); 
```

你不能创建文件，你必须使用阅读器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:03:21.437

您可能需要使用`URL`该类：[http ://docs.oracle.com/javase/tutorial/networking/urls/index.html](http://docs.oracle.com/javase/tutorial/networking/urls/index.html)

# javafx-2 - JavaFX 2 - 将父对象写入 FXML 文件

> ID：13281759
> 
> 赞同：5
> 
> 时间：2012-11-08T03:01:02.173
> 
> 标签：javafx-2, fxml

我知道我可以使用以下内容将 FXML 文件加载到 Parent 对象中：

```
 parent = FXMLLoader.load(getClass().getResource(fxmlFile.getAbsolutePath())); 
```

现在我想做完全相反的事情并将父对象保存为 FXML 文件的根。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:46:50.310

当前没有允许将通用 JavaFX 对象序列化为 FXML 的公共 API。实现这样的事情也绝非易事，因为在运行时不知道应该在哪里初始化哪些值等等。

JavaFX SceneBuilder 使用一种机制来序列化为 FXML 来实现拖放功能，但是这方面的代码非常繁重。

请参阅：
[https ://forums.oracle.com/forums/thread.jspa?messageID=10377102](https://forums.oracle.com/forums/thread.jspa?messageID=10377102)

# excel - 验证内容 - 不允许用户输入 - 给出无效数据报告

> ID：13281760
> 
> 赞同：2
> 
> 时间：2012-11-08T03:01:35.520
> 
> 标签：excel, vba

我正在尝试编写一个程序来执行以下步骤：

*   在单元格 M2 时，检查同一行中列 M 之前的所有单元格的内容
*   如果同一行中列 M 之前的任何单元格为空，则不允许用户在单元格 M2 中输入任何值。而是向用户发送有关空数据的消息。
*   在缺失数据的单元格 N2 中创建报告（excel 的第一行包含列中的数据标题）

到目前为止遇到的问题：无限循环 - 我认为当清除内容循环再次触发时会导致此问题

我不确定连接代码是否良好。

## 下面的程序：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Address = "$M$2" Then    
MsgBox "1"    
Call MyMacro    
End If    
End Sub

Sub MyMacro()

'If [OR(ISBLANK(A2:L2))] Then
If ISBLANK(A2) Then
MsgBox "2"
Range("N2").Select
ActiveCell.Value = N2.Value + A1.Value
'Range("M2").ClearContents
'MsgBox "3"

'this the message that pops up if any cell in the range is blank
End If

End Sub 
```

* * *

感谢您提前回复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:49:53.173

这样的事情会

1.  `A2:L2`在何时`M2`更改时测试空白（真正的空白）
2.  关闭`Events`，以避免在`N2`使用时重新加载代码
3.  将这些有问题的单元格范围转储到`N12`是否有空白

**代码**

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim rng1 As Range
If Intersect(Target, Range("M2")) Is Nothing Then Exit Sub
With Application
.EnableEvents = False
On Error Resume Next
Set rng1 = Range("A2:L2").Cells.SpecialCells(xlBlanks)
On Error GoTo 0
If Not rng1 Is Nothing Then
MsgBox "blank cells in " & rng1.Address(0, 0), vbCritical, "User entry in M2 removed"   
[n2] = rng1.Address
[m2].Clear
End If
.EnableEvents = True
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T04:02:55.473

另一个不使用宏的选项是使用自定义公式在 M 列中使用数据验证

`=counta(A2:L2)=12`

和自定义错误消息“A 到 L 列中的空白单元格”。

这当然不会给您丢失的单元格，但是您可以使用此数组公式获得第一个单元格（使用 ctrl+Shift+enter 输入）

`=IFERROR(ADDRESS(ROW(),MATCH(TRUE,A2:L2="",0)),"")`

# c++ - C++ Sprite 不显示 - 也没有错误

> ID：13281763
> 
> 赞同：2
> 
> 时间：2012-11-08T03:01:59.540
> 
> 标签：c++, sfml

我有点迷失为什么我的精灵不会显示。我没有收到任何错误，但图像未显示在渲染窗口上。

我像这样加载它：

`main.cpp`

```
//before main loop
sf::Sprite background = loadBG(theme["Background"]);
//in main loop
window.draw(background); 
```

我的函数及其标题是：

`header`

```
sf::Sprite loadBG(std::string); 
```

`cpp`

```
sf::Sprite loadBG(std::string img){

sf::Texture texture;   
if (!texture.loadFromFile(img)){
   exit(1);
}

sf::Sprite sprite(texture); 
    return (sprite);
} 
```

我已经测试了它的值，`theme["Background"]`它等于`test.jpg`

我错过了什么让它显示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:27:51.797

你`sf::Texture`的超出范围。

请尝试以下代码（无错误检查）：

```
void loadBG(sf::Texture& texture, sf::Sprite& sprite, const std::string& img) {
    if(texture.loadFromFile(img))
        sprite.setTexture(texture);
} 
```

# android - 固定按钮即使在滑动 viewPager 时也会保留

> ID：13281765
> 
> 赞同：1
> 
> 时间：2012-11-08T03:02:23.690
> 
> 标签：android, button, android-viewpager, swipe

我的两个xml（带有浮动对话框主题）中有一个关闭按钮[x]，我正在使用viewPager。

关闭按钮位于两个 xml 的右上角。但是，当我向左或向右滑动时，按钮也会来回滑动，这看起来很奇怪。即使我滑动页面，有什么想法可以让按钮保持固定吗？

来自其中一页的代码（两页相似）：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:minWidth="350dp" 
    android:minHeight="700dp"
    android:background="#CECECE"
    android:id="@+id/dialogLayout"
    android:orientation="vertical">

<TableRow
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<TextView
    android:id="@+id/lblInfo"
    android:layout_marginLeft="10dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="-6dp"
    android:text="Information"
    android:textStyle="bold"
    android:textColor="#000"
    android:textSize="40dp" />

<ImageButton
    android:id="@+id/btnClose"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="320dp"
    android:layout_marginTop="-4dp"
    android:layout_marginRight="-4dp"
    android:background="#0000"
    android:src="@drawable/close" />

</TableRow>

<TextView
    android:id="@+id/lblInfo"
    android:layout_width="wrap_content"
    android:layout_height="400dp"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="10dp"
    android:textColor="#000"
    android:textSize="17dp" />

</LinearLayout> 
```

viewPager xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="612dp"
    android:layout_height="700dp">

    <android.support.v4.view.ViewPager
        android:id="@+id/viewPager"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:39:49.353

最后，我所做的是按照@Luksprog 的建议将关闭按钮 (btnClose) 和页面标题 (lblTitle) 放在 viewPager 之外。当我为页面标题应用 onPageChangeListener 时，关闭按钮是固定的，以便 TextView 会根据翻转的页面相应地更改标题！代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewpagerbase);

    //add onClickListener for the btnClose
    ImageButton btnClose = (ImageButton)findViewById(R.id.btnClose);
    btnClose.setOnClickListener( new OnClickListener() {
        public void onClick(View v) {
            onBackPressed();
        }
    });

    //attach the viewPage adapter 
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.viewPager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);
    //set listener for page change 
    myPager.setOnPageChangeListener(this);

}   //end of onCreate 
```

# django - 在 virtualenv 中创建项目时没有名为 django.core 的模块

> ID：13281771
> 
> 赞同：11
> 
> 时间：2012-11-08T03:03:26.203
> 
> 标签：django, path, virtualenv

所以我环顾了很多与我类似的问题，但是我找不到具体的答案。我的 comp 规格是 Windows 7 64 位。

我的问题是这样的：

1）我使用pip安装了virtualenv：

```
pip install virtualenv 
```

2）之后我创建并激活了一个新环境：

```
path/virtualenv env
...
path/to/env/Scripts/activate 
```

3）在运行新环境时，我安装了django：

```
(env) path/pip install django 
```

4）安装成功后，我准备做一个项目。但是，在尝试时：

```
path/django-admin.py startproject test 
```

我收到以下错误：

```
File "C:/path/env/Scripts/django-admin.py", line 2, in (module)
    from django.core import management
ImportError: No module named django.core 
```

我尝试了人们发布的各种解决方案，包括使用完整路径：

```
python C:/path/to/django-admin.py startproject test 
```

我还检查了它所引用的 Python 版本是否正确，因为它与 Python27 关联的 virtualenv 内部和外部都是正确的。许多其他解决方案都谈到了 PYTHONPATH 或 syspath，但是，当我在 python shell 中导入 django 或 managemnet 时，这些都可以正常工作。

我感觉它可能与路径有关，但我不确定 virtualenv 如何与系统路径交互。既然它是自包含的并且系统路径是系统范围的，那么是否有必要在路径中专门设置一些东西？

顺便说一句，我的 django-admin.py 文件在两者中

```
path/env/Scripts 
```

和

```
path/env/Lib/site-packages/django/bin 
```

django文件夹在

```
path/env/Lib/site-packages 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-12-23T09:45:31.103

我通过使用以下命令解决了这个问题：

`django-admin startproject`

只需删除附加到“django-admin”的“.py”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T22:29:51.387

我也无法获得任何其他堆栈溢出答案。让一个在 Win64 上运行的 Django 堆栈有点困难。

但是，我在这里找到了一个对我有用的答案：http: [//samudranb.com/2012/06/02/how-to-setup-a-djangopython-development-env-on-windows/](http://samudranb.com/2012/06/02/how-to-setup-a-djangopython-development-env-on-windows/)

尝试从管理员命令提示符运行：

```
ftype Python.File="[your venv path]\Scripts\python.exe" "%1" %* 
```

完成后请务必将其设置回原始值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-12T20:11:12.620

我已经搜索了几个小时来解决这个问题......我随机看到了这个视频：（[https://www.youtube.com/watch?v=lPmkl4jtYgA](https://www.youtube.com/watch?v=lPmkl4jtYgA)）他把“python .\Script\django -admin.py startproject”在虚拟环境中进入命令提示符，因此我尝试通过以下修改来指向我机器上的正确路径“python .\env\Script\django-admin.py startproject”。瞧！

希望这对某人有所帮助，因为这个问题似乎有多种原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T01:04:49.333

这将帮助您理解为什么您会面临这个问题，并且还有一个简单的解决方案：

[http://blog.jayteebee.org/2009/07/importerror-no-module-named-djangocore.html](http://blog.jayteebee.org/2009/07/importerror-no-module-named-djangocore.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-05T17:52:32.200

Windows server 2003 提供了 Where 命令 where python.exe

将显示在路径上找到的当前 python.exe 的完整路径，使用它来检查它是否为您的 virtualenv 使用正确的路径。

关联问题开始发挥作用，因为运行 file.py 所以 .py 是 argv[0] 通过 windows 关联传递它，它不会跟随你的 venv。

python file.py 不会找到 file.py 除非它在当前目录中。

所以解决方案是 -

python %VIRTUAL_ENV%\scripts\django-admin.py startproject myproject

这从当前活动的 venv 运行 python 并使用 venv env 变量，因此它指向 django-admin.py 的正确位置（或者你当然可以自己给它一个绝对路径）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-19T18:18:22.323

我有同样的问题。我使用这个命令解决了这个问题： (env)C:\environment directory>python Scripts\django-admin.py

这个链接对我很有帮助： [在此处输入链接描述](https://groups.google.com/forum/#!topic/django-users/EKRJWAe1znk)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-25T10:55:55.920

在 Windows 中，您设置：

```
set PATH=C:\virtualenv\python2.7\Scripts REM Scripts folder contains python.exe, pip.exe, django-admin.exe,...
set PYTHONPATH=C:\virtualenv\python2.7\Lib\site-packages REM site-packages folder contains packages of python such as django,... 
```

之后，通过创建项目 mysite

```
django-admin.py startproject mysite 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-11T16:10:56.670

我遇到了同样的问题，我同时运行 python 3.4 和 2.7，所以我在我的机器上全局安装了 Django，当我返回我的虚拟环境时，我能够创建一个没有问题的项目。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-15T16:00:51.620

我在 MacOSX（雪豹）的终端中使用 virtualenv 时遇到了同样的问题。我对这个问题的解决方案是将 django-admin.py 的第一行从

```
#!/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python 
```

至

```
#!/path-to-your-virtualenv-directory/bin/python 
```

希望这可以帮助某人。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-29T18:13:56.740

我遇到了同样的问题，我解决它的方法是在进行迁移之前激活我的项目目录并运行我的服务器***"python manage.py runserver"***。激活项目目录：source /path/bin/active 路径表示你的项目存储在哪里。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-19T09:24:56.520

有同样的错误，这为我解决了。

**源 /path/to/virtualwrapper/activate**

**点安装django**

> 此修复尝试重新安装和配置 django

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-10-25T14:02:58.293

我有同样的问题，但我解决了，首先我激活了虚拟环境，然后运行：

`django-admin.exe startproject project_name`

# linux - 进程间实内存页读取？

> ID：13281773
> 
> 赞同：0
> 
> 时间：2012-11-08T03:03:56.733
> 
> 标签：linux, windows, security, operating-system, computer-architecture

如果一个进程在另一个进程退出后立即运行（例如），第二个进程可能会被分配一些第一个进程的实际页面。第二个进程是否有可能读取第一个进程的一些数据？（针对 Windows 和/或 Linux 操作系统的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T06:17:11.680

正是出于这个原因，大多数具有安全模型的操作系统（基于 NT 的 Windows、大多数 Unix、Mac OS...）都会清理内存页面（通常通过用零覆盖）。当然，在单个进程中，您可以重用内存页面而无需清理。

您可以在 linux 的 do_anonymous_page 中看到这一点（[v3.6.6 中 mm/memory.c 的第 3143 行](http://lxr.linux.no/linux+v3.6.6/mm/memory.c#L3143)）。当对已映射但未分配的页面发出写请求时，内核调用`alloc_zeroed_user_highpage_movable`以分配零页面。

# sql - SQL：查找子图

> ID：13281776
> 
> 赞同：4
> 
> 时间：2012-11-08T03:04:34.890
> 
> 标签：sql, sql-server, graph, subgraph

我有一个存储在 SQL 服务器中的图形网络。图网络（标记、无向和连接图的集合）存储在 Vertex-Edge 映射方案中（即有 2 个表......一个用于顶点，一个用于边）：

顶点（graphID、vertexID、vertexLabel）

边（graphID、sourceVertex、destinationVertex、edgeLabel）

我正在寻找一种简单的方法来计算该网络中的特定子图。例如：我想知道这个网络中有多少个“ABC”实例：“CDABCEABCF”。我有一些关于如何用 Java 或 C++ 来完成的想法......但我不知道如何使用 SQL 来解决这个问题。有任何想法吗？

一点背景：我不是学生..这是我想从事的一个小项目。我做了很多社交媒体分析（在内存中），但很少有针对 SQL 数据库挖掘图表的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:15:42.750

我的想法是创建一个存储过程，其输入是一个字符串，如“ABC”或一个预先创建的表，其中顶点按正确顺序（“A”、“B”、“C”）。所以你会有一个循环，你应该一步一步地走过路径'ABC'。为此，您需要一个用于当前步骤顶点的临时表：
1）步骤 0

```
@currentLabel = getNextVertexLabel(...) --need to decide how to do this
select 
  * 
into #v
from Vertices 
where 
  vertexLabel = @currentLabel

--we need it later
select 
  * 
into #tempV 
from #v 
where 
  0 <> 0 
```

2）步骤一

```
@currentLabel = getNextVertexLabel(...)

insert #tempV
select
  vs.*
from #v v
join Edges e on
  e.SourceVertex = v.VertexID
  and e.graphID = v.graphID
join Vertices vs on
  e.destinationVertex = vs.VertexID
  and e.graphID = vs.graphID
where
  vs.vertexLabel = @currentLabel

truncate table #v
insert #v
select * from #tempV

truncate table #tempV 
```

3）循环后

您的结果将存储在#v。所以子图的数量将是：

```
select count(*) from #v 
```

# google-app-engine - Google App Engine - 将实体数量保持在限制范围内的推荐方法是什么？

> ID：13281777
> 
> 赞同：1
> 
> 时间：2012-11-08T03:04:38.940
> 
> 标签：google-app-engine, google-cloud-datastore

我有一些实体，我需要通过丢弃旧的来将它们保持在有限的数量内。就像日志条目维护一样。GAE有什么好的方法来做到这一点吗？

我心中的选项：

选项 1\. 为这些实体中的每一个添加一个 Date 属性。创建 cron 作业以每天检查数据存储统计信息。如果超过限制，则查询该类型的一些实体并按日期排序，最旧的在前。删除它们，直到大小小于例如 0.9 * max_limit。

选项 2。选项 1 需要具有索引的附加属性。我观察到实体键 ID*可能*会增加。所以我想只查询键并按升序排序。删除 id 较小的那些。它不需要额外的属性（日期）和索引。但是我很担心密钥ID是否会越来越多地得到保证？

我认为这是一个常见的数据维护任务。有成熟的方法吗？

顺便说一句，我的应用程序的一个小广告，免费且纯粹是为了程序员的乐趣！[http://robotypo.appspot.com](http://robotypo.appspot.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:46:00.357

您不能假设 ID 总是在增加。[关于 ID gen](https://developers.google.com/appengine/docs/python/datastore/functions#allocate_ids)的文档仅保证：

> 以这种方式分配的 ID 不会被 Datastore 的自动 ID 序列生成器使用，并且可以在实体键中使用而不会发生冲突。

[默认排序顺序](https://developers.google.com/appengine/docs/python/datastore/queries#Sort_Orders)也不保证按 ID 号排序：

> 如果未指定排序顺序，则按照从数据存储中检索结果的顺序返回结果。

这是模糊的，并没有说默认顺序是按 ID。

* * *

一种解决方案可能是使用跟踪第一个元素的旋转计数器。当您想添加新实体时：获取计数器，将其递增，将其修改为限制，然后添加一个带有 ID 的新元素作为计数器的值。这一切都必须在事务中完成，以保证计数器不会被另一个请求增加。具有相同键的新元素将覆盖存在的元素（如果有）。

当您想要全部获取它们时，您可以手动生成密钥（因为它们都是已知的），进行批量获取，按 ID 排序，然后将它们分成计数器值的两部分并交换它们。

* * *

如果您希望 ID 是唯一的，您可以维护一个单独的计数器（使用事务来修改和读取它以确保您的安全）并创建具有 ID 作为其值的实体，然后在达到限制时删除 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T16:31:34.383

您可以创建第二个实体（我们称之为 A），它保留您要限制的实体的键列表，如下所示（伪代码）：

```
class A:
    List<Key> limitedEntities; 
```

添加新实体时，将其键添加到 A 的列表中。如果列表的长度超过限制，则取列表的第一个元素并删除相应的实体。

请注意，当您添加或删除实体时，您应该修改事务中的实体 A 的列表。由于这些实体属于不同的实体组，您应该考虑使用[Cross-Group Transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)。

希望这可以帮助！

# c# - 如何在加载页面时访问最初启动的线程，然后在 c# mvc 中的 ajax 方法调用中访问？

> ID：13281781
> 
> 赞同：1
> 
> 时间：2012-11-08T03:04:57.060
> 
> 标签：c#, asp.net-mvc, multithreading

我正在使用 C# 5.0、VS 2012、MVC4。我有一个场景，在对员工信息执行搜索时，我需要缓存员工数据并查询缓存。

我最初并没有显示所有员工，而是想启动一个线程来缓存所有员工。所以在显示视图时的索引方法中，我正在这样做

```
 //Starting a thread to load the cache if its null
        if (HttpRuntime.Cache["AllEmployees"] == null)
        {
            thCacheAllEmployees = new Thread(new ThreadStart(CacheAllEmployees));
            thCacheAllEmployees.Name = "CacheAllEmployees";
            thCacheAllEmployees.Start();
        } 
```

CacheAllEmployees 是一个单独的方法，它将查询 LDAP 并将所有员工存储在 Cache 中。LDAP 查询大约需要 15 秒。但是在加载视图并且尚未加载缓存后的前 15 秒内，当用户开始在搜索框中输入内容时，我正在对 GetFilteredEmployees 操作方法进行 ajax 方法调用。我想访问以前启动的线程，检查它是否还活着，然后等待该线程完成，这样我就不需要再次执行新的 LDAP 查询。

```
 if (thCacheAllEmployees.IsAlive)
        {
            thCacheAllEmployees.Join();

            if (HttpRuntime.Cache["AllEmployees"] != null)
                return (List<CMSUser>)HttpRuntime.Cache["AllEmployees"];
        } 
```

但问题是，当它的 ajax 调用看起来像是一个新的主线程并且不知道 thCacheAllEmployees 时。所以 thCacheAllEmployees 将是空对象。所以我需要从应用程序中当前所有活动线程中获取该线程的实例。

第一次在会话变量中加载视图时，我可以存储 thCacheAllEmployees 的线程 ID，但是在进行 ajax 方法调用时如何从线程池访问该线程？

有没有更好的方法来做到这一点？请给你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:27:55.047

当您认为线程认为操作而不是数据时。当您要存储数据时，您不会将该数据放在线程上，而是将其放入内存中，然后根据范围，一个或多个线程可以访问该内存。

有很多方法可以存储这些数据。我不确定要缓存的数据对于不同的用户会话是否是唯一的，或者您是否只需要一个全局缓存。任何你想从任何地方访问的东西都可以放在一个静态变量中。您只需要确保使用锁，这样多个线程就不会尝试同时访问该数据，这是不安全的。

* * *

**模型**

```
public static class MyCache
{
     private static object LockToken = new object(); 
     private static List<CMSUser> _Users { get; set; }

     static MyCache()
     {
        _Users = GetUsers();
     }

     public static List<CMSUser> Users
     {
          lock (LockToken)
          {
               return _Users;
          }
     }
} 
```

* * *

**控制器**

```
public class UsersController : ApiController
{
    public List<CMSUser> Get()
    {
        return MyCache.Users;
    }
} 
```

* * *

**看法**

```
$.ajax({
    url: '/api/users',
    dataType: 'json',
    success: function(users) {
        // do something with users here
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:17:43.280

为什么要等待第一次调用缓存数据？您可以在应用程序启动期间通过将其添加`Application_Start`到`Global.asax`.

这意味着当您的应用程序启动时您将有 15 秒的开销，但之后您就可以开始了。

如果你也想在这里使用一个线程，你可以把它的 id 放在一个静态变量中，并用它来检查列表是否已经加载。

# sql - Rails ActiveRecord 查询使用内连接

> ID：13281784
> 
> 赞同：2
> 
> 时间：2012-11-08T03:05:06.687
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我有两个表正在尝试进行内部连接。

一个是`users`主键为 的表`id`。

另一个表是外键`bars`在哪里。还有一个名为where的列是表的外键。`user_id``bars``foo_id``food_id``foos`

我正在尝试组合一个 ActiveRecord 查询，我可以在其中选择在 N 天前或之前创建的所有用户，并且没有任何`foos`位置`bars.foo_id`等于特定 ID。我试着做这样的事情：

```
users = User.where("users.created_at <= ?", 50.days.ago).joins(:bars).where("bars.foo_id != 5") 
```

此查询字段超过 30,000 个结果，这是不正确的，因为 Users 表只有 12,000 行。

我在这里到底做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:19:22.597

尝试使用这个

```
 User.includes(:bars).where("users.created_at <= ?", 50.days.ago).where("bars.foo_id != 5") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T04:38:10.430

你的连接数学是错误的，它的效果是为每个用户 + foo 组合创建行。这就是完全连接的工作方式。出现此错误的原因是您实际上并未将 bar 表连接到 users 表。通常你必须加入一个条件，就像在你的情况下`bars.user_id=users.id`是个好主意。

话虽如此，您要做的是确定哪些用户符合条件，然后加载这些用户：

```
users = User.where('id IN (SELECT DISTINCT user_id FROM bars WHERE bars.foo_id!=?)', 5) 
```

这个子选择，如果单独运行，应该只返回一个没有特定 foo 的用户列表。使用这个作为`WHERE`条件应该只加载那些用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:43:25.277

这应该工作 -

```
User.joins(:bars).where("bars.foo_id != ? and users.created_at <= ?", 5, 50.days.ago).select("distinct users.*") 
```

它将生成以下 sql -

```
 select distinct users.* from users 
 INNER JOIN bars on bars.user_id = user.id
 WHERE bars.foo_id != 5 and users.created_at <= '2012-09-19 10:59:54' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:09:07.533

因为它是您的加入，所以对于满足 where 子句的每个用户/栏条件，结果集中都会出现一行：如果用户有 5 个栏，它将出现 5 次。

你不能只用一个 distinct 来解决这个问题，因为这会选择所有可以实现连接的行：所有具有至少 1 个 bar 且 foo_id 不是 5 的用户，而不是所有没有此类 bar 的用户

您可以使用左连接来执行此操作：

```
User.joins("left join bars on bars.user_id = users.id and bars.foo_id = 5").where("users.created_at < ? AND bars.id is null", 50.days.ago") 
```

这会尝试将“坏”条 (foo_id=5) 加入用户。因为它是左连接，如果不存在这样的条，则将在结果集中返回一行，其中条表的所有列都设置为空，然后您可以对其进行过滤。重要的是在 ON 子句中的条 (foo_id = 5) 上有条件，以便它有助​​于连接的完成方式，而不是在连接后进行过滤。

# php - 查询语法帮助

> ID：13281787
> 
> 赞同：0
> 
> 时间：2012-11-08T03:06:02.113
> 
> 标签：php, database, mysqli

我正在尝试查询我的 MySQL 数据库以获取有关用户的信息。您在前一页提交表单，然后进入该页面并连接到数据库和所有这些好东西。我只是对查询的 SELECT 函数的语法有一个快速的问题。我想说“从 tbl_name 中选择，其中字段名与字段姓氏连接（中间有空格）等于变量 $user。

我想用 PHP 我需要在引号前面加上斜杠。它似乎没有返回任何值。我只是使用了不正确的语法吗？

```
$user=$mysqli->real_escape_string($_POST['user']);

$sql="SELECT * FROM tbl_name WHERE firstname.\" \".lastname='$user'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:22:59.763

我想这就是你要找的东西？？

```
$sql = 'SELECT * FROM '.$tbl_name .' WHERE CONCAT(firstname," ",lastname )='.$user.' '; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:45:41.453

您必须`CONCAT()`在`WHERE`子句中使用 SQL 将`firstname`和`lastname`列连接在一起：

```
SELECT
    *
FROM
    tbl_name
WHERE
    CONCAT(firstname. ' ', lastname) = ? 
```

在 PHP 中使用现有代码（用于复制+粘贴）：

```
$sql = "SELECT * FROM tbl_name WHERE CONCAT(firstname, ' ', lastname) = '" . $user . "'"; 
```

* 另外值得注意的是：由于您使用的是 MySQL，因此您可以在查询中合法地使用单引号和/或双引号（T-SQL 绑定到字符串的单引号）。因此，如果您在 PHP 中使用双引号将整个查询包装起来，则可以在 SQL 查询中使用单引号，而不必转义双引号。这更像是程序员的偏好提示，但有一天可能会让您避免引用转义的头痛=P

# css - 将内联块包装器 div 居中？

> ID：13281788
> 
> 赞同：0
> 
> 时间：2012-11-08T03:06:14.843
> 
> 标签：css, html

我正在尝试实现这样的目标：http: [//i.minus.com/ibxOaBw7BW8b5g.png](http://i.minus.com/ibxOaBw7BW8b5g.png)

这是我到目前为止所拥有的：http: [//jsfiddle.net/QAPub/2/](http://jsfiddle.net/QAPub/2/)

如何使包装器/容器居中？我真的不在乎容器是否存在，我的主要目标是三个黑色 div 的中心，但这是我所得到的。

HTML：

```
 <div class="clearfix">
        <div class="content"></div>
        <div class="content"></div>
        <div class="content"></div>
    </div>​ 
```

CSS：

```
 .clearfix:after { 
        content: " ";
        display: block; 
        height: 0; 
        clear: both;
     }
     .clearfix {
        background-color: orange;
         display: inline-block;
     }

     .content {
         float: left;
         background-color: black;
         border: 1px solid black;
         width: 100px;
         height: 100px;
         margin: 10px;
     } 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:04:52.180

对“.clearfix”使用以下 css

```
.clearfix {
    background-color: orange;
    display:table;
    margin:0 auto;
} 
```

这是[jsFiddle 文件](http://jsfiddle.net/AH9Mh/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:45:45.940

有几种不同的方法可以实现这一点。

这是我将使用的一个，将容器放入主体中并为其留出边距并将其放置在您想要的任何位置。

[http://jsfiddle.net/QAPub/3/](http://jsfiddle.net/QAPub/3/)

```
body{
width:500px;
height:500px;
}

.clearfix {
position:relative;
background-color: orange;
display: block;
width:370px;
height:120px;
margin:auto;
top:20px;
}
.content {
float: left;
background-color: black;
border: 1px solid black;
width: 100px;
height: 100px;
margin: 10px;
} 
```

​</p>

# asp.net - 在 Sencha 的 ASP.Net Web 表单中重用 DAL

> ID：13281793
> 
> 赞同：1
> 
> 时间：2012-11-08T03:06:24.787
> 
> 标签：asp.net, entity-framework, sencha-touch-2, webforms, sencha-architect

我有一个内置在 ASP.Net Web 窗体中的 N 层 Web 应用程序。该应用程序为青少年体育项目注册用户 - 效果很好！客户要求我建立一个移动版本的注册。我将需要构建一个新的前端，这没关系。修改当前的移动 Web 表单不是一种选择。我真的很喜欢 Sencha Architect，并且非常了解 IDE，可以考虑使用 Sencha 作为前端。另外，我喜欢 Sencha 提供的跨设备 (Android/iDevice) Web 应用程序的好处。

我的问题是如何最好地构建应用程序。我不想重写 DAL（或任何存储的过程），所以我正在考虑几个选项：

**后端** 1) 利用 EF 并尝试与我现有的 SP 一起工作（尽管至少可以说这看起来很麻烦） 2) 使用新的 ASP.Net Web API 来制作调用 SP 的服务端点

**前端** 1) 使用 Sencha Architect 2) 使用 ASP.Net Web Forms (虽然我担心重写 Sencha 已经做得好的东西) 3) 使用 ASP.Net MVC (关注重写 Sencha 已经做得好的东西)

理想情况下，我会找到某种方法来重用我拥有的 DAL。我不想在此应用程序中管理两个数据访问层。

谢谢！

# php - 如果当前日期和时间已过，如何更改文本颜色？

> ID：13281794
> 
> 赞同：0
> 
> 时间：2012-11-08T03:06:27.383
> 
> 标签：php, javascript, html, css

> **可能重复：**
> [PHP - 如何检查当前日期/时间是否超过设定的日期/时间？](https://stackoverflow.com/questions/2832467/php-how-can-i-check-if-the-current-date-time-is-past-a-set-date-time)

我在下方有一个下拉菜单，其中显示了考试的名称、日期和时间。

```
$sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
$sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

while ( $sessionqrystmt->fetch() ) {
    $sessionHTML .= sprintf("<option value='%s'>%s - %s - %s</option>", $dbSessionId, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), $dbSessionTime) . PHP_EOL;  
}

$sessionHTML .= '</select>'; 
```

我想要做的是，如果考试的日期和时间已通过当前日期和时间，则将这些选项的文本显示为红色，如果尚未通过，则将这些选项的文本显示为绿色。

例如当前日期/时间：24/09/2012 09:00:00（这只是一个示例，我想要实际的当前日期和时间。

```
AAA - 13/08/2012 - This text should be red
BVF - 27/01/2013 - This text should be green 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:22:32.980

```
<style>
.red{ color:red; }
.green{ color:green; }
</style>

while ( $sessionqrystmt->fetch() ) {
    if(strtotime(date("d-m-Y h:i:s")) > strtotime($dbSessionDate)){
         $class = 'red';
    } else {
         $class = 'green';
    }
    $sessionHTML .= sprintf("<option value='%s' class='%s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), $dbSessionTime) . PHP_EOL;  
} 
```

将您当前的日期与 $dbSessionDate 进行比较，然后确定班级。

```
$now = date("Y-m-d h:i:s");
$date = "2012-11-08 07:00:35";

echo $now."<br/>".$date."<br/>";

if(strtotime($now) > strtotime($date)){
    echo "RED";
} else {
    echo "GREEN";
} 
```

这是另一个关于比较时间的简单示例。我猜你可以根据这个调整你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:52:06.327

你想用 PHP 还是 javascript 来做这件事？使用 PHP 似乎更好，因为您不知道客户端的系统时钟是否设置为正确的时间。

假设客户端与服务器处于同一时区，因此从其他位置访问的人（可能是度假或学习旅行的学生）可能会得到不正确的信息。

在任何情况下，还应显示视图上次更新的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:19:55.123

```
if ( time( ) > strtotime( "date here" ) ) {
    // current time is greater than date
} 
```

:)

# ddos - 如何让 G-WAN servlet 在不发送任何回复的情况下静默关闭其连接

> ID：13281795
> 
> 赞同：0
> 
> 时间：2012-11-08T03:06:36.243
> 
> 标签：ddos, g-wan

如何让 gwan 对某些请求不发送回复，即在不构建和发送回复的情况下让 servlet 静默关闭？

减少从服务器端传出的带宽很有用。

仅用于收集数据，无需对客户端做出任何响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:24:02.847

你可以用 gwan 做到这一点`connection handler`。

我认为这是您需要在处理程序上捕获的事件。由于您希望 servlet 运行，然后关闭连接。

```
HDL_BEFORE_WRITE, // after a reply was built, but before it is sent 
```

这是一个示例代码`connection handler`。您仍然需要添加过滤器。此代码将在构建回复后关闭所有请求。

```
int init(int argc, char *argv[])
{ 
   u32 *states = (u32*)get_env(argv, US_HANDLER_STATES);
   *states =  (1 << HDL_BEFORE_WRITE)
}

int main(int argc, char *argv[])
{
    long state = (long)argv[0];
    if(state == HDL_BEFORE_WRITE)
    {
        return 0; // Close connection
    }
    return(255); // continue G-WAN's default execution path
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:39:25.297

您还可以通过执行类似（未经测试）的操作来关闭来自 servlet 的连接：

```
#include <sys/socket.h>

char buf[1024];
int s = (int)get_env(argv, CLIENT_SOCKET);
shutdown(s, SHUT_WR);
while(read(s, buf, sizeof(buf)) > 0);
close(s);
return 500; 
```

然后像上面那样返回 500 之类的东西，这样你就不必建立回复了。

# ruby-on-rails - Heroku 延迟作业错误

> ID：13281799
> 
> 赞同：0
> 
> 时间：2012-11-08T03:07:00.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, delayed-job, worker

谷歌在这方面不是很有帮助，所以我希望这里的人可能有一个想法。

我的应用程序在服务器上运行良好（最近在 heroku 上运行良好），但是大约一个小时前，当我在其上打开某个页面时（涉及显示受我正在运行的延迟作业影响的信息的页面），我遇到了一个 heroku 错误，并且日志说（在许多其他事情中）：

```
dyno=web.1 queue=0 wait=5ms service=119ms status=500 bytes=643
2012-11-07T23:17:44+00:00 app[worker.1]:    (1.3ms)  SELECT COUNT(*) AS count_all, priority AS priority FROM "delayed_jobs" WHERE (run_at < '2012-11-07 23:17:44.830238' and failed_at is NULL) GROUP BY priority
2012-11-07T23:17:44+00:00 app[worker.1]:    (2.5ms)  SELECT COUNT(*) FROM "delayed_jobs" WHERE (failed_at is not NULL)
2012-11-07T23:17:44+00:00 app[worker.1]:    (1.2ms)  SELECT COUNT(*) FROM "delayed_jobs" WHERE (locked_by is not NULL) 
```

显然，delayed_job 存在问题，但我不确定从哪里开始寻找，特别是考虑到它之前的工作方式并且仍然在我的服务器上运行。

任何想法是什么问题或如何开始调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:37:46.860

很可能在 DJ 中正在处理的工作中，这可能不会在您的日志中注入错误消息。您可以在日志中搜索特定的工作人员消息并尝试查看错误。甚至这样做的问题是您需要确定作业何时运行，否则您可能正在查看日志的错误部分。

```
heroku run logs || grep worker 
```

其次，您需要弄清楚为什么您的视图呈现错误。由于您的视图是由您的应用程序而不是您的工作人员呈现的，因此您的应用程序中的某些内容不同步。弄清楚到底出了什么问题，这可能表明您的工人做了/没有做什么。

# c# - wcfextras 仍然生成许多文件而不是单个 WSDL 文件

> ID：13281803
> 
> 赞同：0
> 
> 时间：2012-11-08T03:08:20.143
> 
> 标签：c#, .net, wcf, wsdl, wcf-extensions

这是`app.config`我得到的：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <extensions>
      <behaviorExtensions>
        <add name="wsdlExtensions" type="WCFExtras.Wsdl.WsdlExtensionsConfig, WCFExtras, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
      </behaviorExtensions>
    </extensions>

    <behaviors>
      <endpointBehaviors>
        <behavior name="WsdlSampleEndpointBehavior">
          <wsdlExtensions singleFile="true" />
        </behavior>
      </endpointBehaviors>

      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="True"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <diagnostics>
      <messageLogging
           logEntireMessage="true"
           logMalformedMessages="true"
           logMessagesAtServiceLevel="true"
           logMessagesAtTransportLevel="true"
           maxMessagesToLog="3000"
           maxSizeOfMessageToLog="20000"/>
    </diagnostics>
<services>
  <service name="VogService">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8733/"/>
      </baseAddresses>
    </host>
    <endpoint address="GoToTheMarketService"
    binding="basicHttpBinding" bindingConfiguration="GoToTheMarketService"
    contract="GoToTheMarketService" name="GoToTheMarketService" behaviorConfiguration="WsdlSampleEndpointBehavior">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services>

<bindings>
  <basicHttpBinding>
    <binding name="GoToTheMarketService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </system.serviceModel>

  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="messages"
          type="System.Diagnostics.XmlWriterTraceListener"
          initializeData="C:\messages.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>

  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

我添加`wcfextras`到项目引用，甚至将其设置为复制本地。

结果，它只生成相同的 WSDL 文件，导入 XSD 等等：

```
...
<wsdl:import namespace="aaa" location="http://localhost:8733/?wsdl=wsdl0"/>
...
<xsd:schema targetNamespace="aaa/Imports">
<xsd:import schemaLocation="http://localhost:8733/?xsd=xsd0" namespace="aaa"/>
<xsd:import schemaLocation="http://localhost:8733/?xsd=xsd1" namespace="http://lalala.com/asdas12"/>
</xsd:schema>
... 
```

我怎样才能使它只生成一个单一的 WSDL 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:18:28.680

要获得传统的 WSDL，我们使用以下步骤：

1.  在您的 svc.vb 中，导入 System.Web.Services
2.  在您的 .svc.vb 中，使用`<WebMethod()>`
3.  在 .asmx 中添加一个 .asmx 文件（与 .svc 相同的目录）代码：

4.  现在在浏览器中点击你的网址到新的 .asmx?wsdl
5.  繁荣。WSDL

# php - 最有效的穿越方式

> ID：13281805
> 
> 赞同：0
> 
> 时间：2012-11-08T03:08:51.407
> 
> 标签：php, xpath, domdocument

请参阅底部的编辑：

我正在使用 XPath 从站点中抓取一些数据。我想知道我是否可能使用了太多`foreach() loops`，并且可以以更简单的方式遍历层次结构。我觉得我可能使用了太多查询，并且可能有更好的方法只使用一个

层次结构看起来像这样。

```
<ul class='item-list'>
    <li class='item' id='12345'>
        <div class='this-section'>
            <a href='http://www.thissite.com'>
                <img src='http://www.thisimage.com/image.png' attribute_one='4567' attribute-two='some-words' />

        </div>
        <small class='sale-count'>Some Number</small>
    </li>
    <li class='item' id='34567'>
    <li class='item' id='48359'>
    <li class='item' id='43289'>
</ul> 
```

所以我做了以下事情：

```
$dom = new DOMDocument;
@$dom->loadHTMLFile($file);
$xpath = new DOMXPath($dom);

$list = $xpath->query("//ul[@class='item-list']/li");

foreach($list as $list_item)
{
$item['item_id'][] = $list_item->getAttribute('id');

$links = $xpath->query("div[@class='this-section']//a[contains(@href, 'item')]", $list_item);

foreach($links as $address)
{
    $href = $address->getAttribute('href');
    $item['link'][] = substr($href, 0, strpos($href, '?'));
}

$other_data = $xpath->query("div[@class='this-section']//*[@attribute-one]", $list_item);

foreach($other_data as $element)
{
    $item['cost'][] = $element->getAttribute('atribute-one');
    $item['category'][] = $element->getAttribute('attribute-two');
    $item['name'][] = $element->getAttribute('attribute-three');        

}

$sales = $xpath->query(".//small[@class='sale-count']", $list_item);

foreach($sales as $sale)
    $item['sale'][] = substr($sale->textContent, 0, strpos($sale->textContent, ' '));
 } 
```

我是否需要不断地重新查询才能在层次结构中工作，还是有更简单的方法来完成这个？

**编辑** 所以看来我确实使用了太多的 foreach 循环。对于我取出的每一个，我都节省了大量的内存。所以我的问题变成了。

一个我有父元素（在这种情况下是`<li>`），是否没有一种方法可以在不重新查询和循环结果的情况下挑选元素和属性？我需要尽可能多地消除这些 xpath 子查询和 foreach 循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:24:21.590

当然，您可以[`DOMElement::getElementsByTagName()`](http://php.net/manual/en/domelement.getelementsbytagname.php)改用：

```
$images = $list_item->getElementsByTagName( 'img'); 
```

至于哪个效率更高，您必须对其进行基准测试。您可以比较相对 XPath 查询或`<li>`的节点树的前序遍历之间的速度。

# performance - 向 Berkeley DB 插入数据 在大数据中性能非常差

> ID：13281809
> 
> 赞同：0
> 
> 时间：2012-11-08T03:09:14.230
> 
> 标签：performance, berkeley-db

我已经持有 80G Berkeley DB 文件。我测量一条没有事务的记录（32 字节密钥/100 字节值）的平均插入速度为 8 毫秒。

与同接口插入空数据库相比，平均速度为3~6us。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:02:27.857

如果您在缓冲区为空时插入数据，它可以很好地执行，一旦系统的缓冲区已满，它们将无法继续，直到一些缓冲区空间变得更清晰。例如，将数据写入 HDD 的时间通常为 8 ms。

在系统安静后，我会测试一百万条记录的半身像，以查看缓冲区未满时的延迟情况。

# css - CSS - 特定于单个元素的样式

> ID：13281813
> 
> 赞同：0
> 
> 时间：2012-11-08T03:09:37.467
> 
> 标签：css, margins

我正在使用 jQuery 向一些元素添加一个类。

我对添加类并不陌生，也不是删除它们。但我在样式方面仍然有点中间，任何灵活性样式都可以对单个元素执行。

这是发生了什么：

我有 2 个使用 jQuery 影响的 div：

```
<div id="columnleft">stuff in here</div>
<div id="columncenter">bigger stuff in here</div> 
```

简而言之，column left 大约 155px 宽，而 columncenter 相对于 columnleft 定位，margin-left 为 162px

这是我的风格：

```
<style>
#columnleft {
  float:left; 
  position:relative;
  text-align:left;
  width:155px; 
}

#columncenter {  
  position:relative; 
  padding-bottom:50px
  margin:0; 
  margin-left:162px; 
}
</style> 
```

我基本上用下面的 jQuery 示例来切换这 2 个 div：

到目前为止，我已经让这两个单独的实例开始工作：

```
$("#columnleft").hide();
$("#columncenter").css("margin","0px"); 
```

然后........

```
$("#columnleft").show();
$("#columncenter").css("margin-left","162px"); 
```

虽然这可行，但我并不十分满意。
我更喜欢创建一个或两个类，我可以使用它来切换 columnleft 的隐藏，同时还可以同时更改 margin-left。

当我只使用 jQuery 时，上面的示例一切正常。但是有时页面加载时，columnleft 意味着隐藏，columncenter 意味着从一开始就被扩展。在那些时刻不需要 jQuery 进入场景会很好。

我能想到的是：

```
<style>
.disappear { display:none; }
.maximize { margin:0px;  margin-left:0px; }
</style> 
```

页面加载时：

```
<div id="columnleft" class="disappear">stuff in here</div>
<div id="columncenter" class="maximize">bigger stuff in here</div> 
```

似乎 columncenter 被忽略了。（columnleft 确实消失了）此外，使用 jquery 切换，也会出现相同的结果。

专栏中心讨厌我！有谁看到我错过了标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:22:59.377

**查看 JSFiddle：http:** [//jsfiddle.net/tuanderful/bTZq8/](http://jsfiddle.net/tuanderful/bTZq8/)

如果你有另一个`div`同时包含`#columnleft`and `#columncenter`，并且有一个`.hide-left`or类怎么办`.show-left`：

```
<div class="hide-left">
    <div id="columnleft">stuff in here</div>
    <div id="columncenter">bigger stuff in here</div>
</div> 
```

​ 然后添加以下 CSS：

```
.show-left #columnleft {
    display: block;
}
.show-left #columncenter {
    margin-left: 162px; 
}

.hide-left #columnleft {
    display: none;
}
.hide-left #columncenter {
    margin-left: 0; 
} 
```

您可以更新您的 jQuery 以简单地切换父容器上的`.hide-left`或类。`.show-left`

我在这里所做的与添加`.disappear`和`.maximize`样式类似，但我在两列周围添加了一些上下文。巧妙的是，所有的样式都完全由 CSS 处理——当你想显示或隐藏你的侧边栏时，你只需要 JavaScript 来更新容器的状态；也就是说，将容器中的类从隐藏更改为显示，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:16:50.600

你需要穿上`!important`css样式。

```
.maximize {
  margin-left: 0px !important;
} 
```

这使得它可以覆盖任何其他同类样式。[**在这里查看。**](http://jsfiddle.net/gCRP2/)

CSS中有一个重要性顺序。一个 id`#`被认为比一个类更重要`.`（毕竟只能有一个 id 和许多类）。因此，如果您尝试使用类覆盖 id，则需要使用`!important`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:22:37.380

css 中每种类型的选择器的权重不同 id 高于 classes 和 classes 高于 objects

解决您的问题，使选择器成为这样

```
#columncenter.maximize 
```

这将覆盖它之前的规则

不要使用`!important`，虽然它现在可能有效，但以后可能很难找出为什么某些东西会被覆盖

# ember.js - Emberjs 1.0-pre 路由器找不到路径状态并说路由器未定义

> ID：13281815
> 
> 赞同：1
> 
> 时间：2012-11-08T03:09:38.747
> 
> 标签：ember.js, ember-old-router

这个**[Emberjs 路由器](http://jsfiddle.net/CNydA/8/)**拒绝使用 jsfiddle Jquery onDomReady 并返回错误；**未捕获的错误：断言失败：找不到路径的状态：“root”**。

但是，当我将 jsfiddle jquery 设置更改为**onLoad**时，页面加载但路由器似乎仍然无法识别，并且任何尝试手动转换路由器的尝试都会失败并显示消息 **错误：无法调用未定义的方法 'transitionTo'**。但是，如果我单击视图中指向或链接到路线的动作助手之一，则会引发错误。

任何有关如何解决此问题的建议将不胜感激。

```
 App = Ember.Application.create({
   ready: function(){ 
    App.router.transitionTo('root');
    }
 });

 App.stateFlag = Ember.Mixin.create({
   stateFlag: function(name) {
   var state = App.get('router.currentState.name'); 
    while (state.name === name) {
        state = state.get('parentState');
        console.log('state');
        //return true;
    }
 }.property('App.router.currentState')
 });

 App.ApplicationController = Em.Controller.extend();

 App.ApplicationView = Ember.View.extend({
     templateName: 'application'
 });

 App.HomeController = Em.ObjectController.extend();
 App.HomeView = Em.View.extend({
    templateName: 'home'
 });

 App.LoginController = Em.ObjectController.extend();

 App.LoginView = Ember.View.extend({
    tagName: 'form',
    templateName: 'logging',

 });

 App.SectionController = Em.ObjectController.extend(App.stateFlag, {
  stateFlag: 'sectionA',
  stateFlag: 'sectionB'
});

App.SectionView = Ember.View.extend({
 templateName: "sub_section_b_view"
});

App.SectionA = Em.ObjectController.extend();
App.SectionAView = Ember.View.extend({
 templateName: "section A"
});

App.SectionB = Em.ObjectController.extend();
App.SectionBView = Ember.View.extend({
 templateName: "section B"
});

App.Router = Ember.Router.extend({
 enableLogging: true,
 location: 'hash',
 root: Ember.Route.extend({

    anotherWay: Ember.Router.transitionTo('root.logon.index'),

    showLogin: function(router, event) {
        router.transitionTo('root.logon.index');
    },

    doHome: function(router, event) {
    router.transitionTo('home');
  },
    doSections: function(router, event) {
    router.transitionTo('section.index');
  },

    home: Ember.Route.extend({
    route: '/',
    connectOutlets: function(router, event) {
      router.get('applicationController').connectOutlet('home');
    }

  }),

   logon: Ember.Route.extend({
      route: '/login',
      enter: function(router) {
          console.log("The login sub-state was entered.");
        },
      connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet('mine', 'login');
         router.get('applicationController').connectOutlet('section');
      },

        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.get('loginController').connectOutlet('loga', 'login');
            }
        })
   }),

   section: Ember.Route.extend({
       route: '/section',
       connectOutlets: function(router, event) {
         router.get('applicationController').connectOutlet('section');
       },

      index: Ember.Route.extend({
        route: "/"
      }),       

      doSectionA: function(router, event) { router.transitionTo('section.sectionA'); 
      },

      sectionA: Ember.Route.extend({
        route: 'section A',
         connectOutlets: function(router, context) {
            router.get('sectionController').connectOutlet('sectionA'); 
          }

       }),

       doSectionB: function(router, event) { router.transitionTo('section.sectionB');

       },

       sectionB: Ember.Router.extend({
          route:'section B',
        connectOutlets: function(router, context) {
          router.get('sectionController').connectOutlet('sectionB');
        }
      })
    })
})
});​ 
```

**车把模板**

```
 <script type="text/x-handlebars" data-template-name="application">
    <h1>Hi samu</h1>
    {{outlet loga}}
    {{outlet }}
    <a href="#" {{action showLogin }}> go to root.logon.index state</a>   
    <br>
   <a href="#" {{action anotherWay}} >it works to go to root longon index using this</a>
 </script> 

 <br>
 <script type='text/x-handlebars' data-template-name='home'> 
 </script>
 <br>
 <script type="text/x-handlebars" data-template-name="logging">

   {{view  Ember.TextField placeholder="what" class="userInput"  }}
   {{outlet loga}}
 <br>
 <b> Inserted from Login controller and view </b>

 </script>

 <script type="text/x-handlebars" data-template-name="sub_section_b_view">

   <b>Inserted from the subsection controller and view </b> 

</script>

<script type='x-handlebars' data-template-name='section A' >

</script>

<script type='x-handlebars' data-template-name='section B' >

 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:55:11.413

修修补补之后，我开始一切工作。命名的出口有效，嵌套的子路线有效。这是**工作[jsfiddle](http://jsfiddle.net/CNydA/30/)**。在该 jsfiddle 中，如果单击“转到 root.logon.index 状态”，则将呈现由名为 **{{outlet loga}}**的命名出口提供的表单。

如果您单击名为**testingsections**的链接，它将呈现显示两个子节的两个链接的节视图，单击其中任何一个都会呈现其内容。**此外，我尝试将路由器中的每个路由分解为许多类或独立类，然后创建新路由以从路由器内部扩展这些类，以模拟将 Emberjs 路由器拆分到多个文件中，以减少现实生活中路由器的大小和有效**

这是整个代码。 **车把模板**

```
 <script type="text/x-handlebars" data-template-name="application">
   <h1>Hi Laps</h1>
   {{outlet loga}}
   {{outlet }}
    <a href="#" {{action showLogin }}> go to root.logon.index state</a>   
      <br>
  <a href='#' {{action doSection}}> testing sections</a>
 </script> 

 <br>

 <script type='text/x-handlebars' data-template-name='home'> 
 </script>

 <br>
<script type="text/x-handlebars" data-template-name="logging">
  {{view  Ember.TextField placeholder="what" class="userInput"  }}
  {{outlet loga}}
  <br>
  <b> Inserted from Login controller and view </b>       
</script>

<script type="text/x-handlebars" data-template-name="sub_section_b_view">

  <b>Inserted from the subsection controller and view </b> 
  <a href='#' {{action doSectionA}}><p>Sub section  yea</p></a>
  <br>
   <a href='#' {{action doSectionB}}> our B part yep</a>

   {{outlet}}
</script>

<script type='text/x-handlebars' data-template-name='sectionA' >
 <br>
 <font color="red">my section a is working</font>
</script> 
```

**Javascript/Emberjs 位**

```
App = Ember.Application.create({
  ready: function(){ 
  //App.router.transitionTo('root.home');
  }
});

App.stateFlag = Ember.Mixin.create({
    stateFlag: function(name) {
    var state = App.get('router.currentState.name'); 
    while (state.name === name) {
        state = state.get('parentState');
        console.log('state');
        //return true;
     }
   }.property('App.router.currentState')
});

App.ApplicationController = Em.Controller.extend();

App.ApplicationView = Ember.View.extend({
 templateName: 'application'
});

App.HomeController = Em.ObjectController.extend();
App.HomeView = Em.View.extend({
  templateName: 'home'
});

App.LoginController = Em.ObjectController.extend();

App.LoginView = Ember.View.extend({
 tagName: 'form',
 templateName: 'logging',
 /* class name does not work */
 className: ['userInput']
});

App.SectionController = Em.ObjectController.extend(App.stateFlag, {
  stateFlag: 'sectionB'
});

App.SectionView = Ember.View.extend({
  templateName: "sub_section_b_view"
});

App.SectionAController = Em.ObjectController.extend();
App.SectionAView = Ember.View.extend({
  templateName: "sectionA"
});

App.SectionBController = Em.ObjectController.extend();
App.SectionBView = Ember.View.extend({
 templateName: "sectionB"
});

App.SectionARoute = Ember.Route.extend({
  connectOutlets: function(router, context) {
   router.get('sectionController').connectOutlet({viewClass: App.SectionAView}); 
   }                  
});

App.SectionBRoute = Ember.Route.extend({
 connectOutlets: function(router, context) {
  router.get('sectionController').connectOutlet({viewClass: App.SectionBView});
 }
});

App.Router = Ember.Router.extend({
 enableLogging: true,
 location: 'hash',
 root: Ember.Route.extend({
   anotherWay: Ember.Router.transitionTo('root.logon.index'),
   doSection: Ember.Router.transitionTo('root.section.index'),

   showLogin: function(router, event) {       
       router.transitionTo('root.logon.index');
   },

   doHome: function(router, event) {
      router.transitionTo('home');
   },
   doSections: function(router, event) {
      router.transitionTo('section.index');
   },
   home: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router) {
      router.get('applicationController').connectOutlet('home');
       }

   }),

   logon: Ember.Route.extend({
      route: '/login',
      enter: function(router) {
         console.log("The login sub-state was entered.");
      },

      index: Ember.Route.extend({
         route: '/',
         connectOutlets: function(router, context) {
            router.get('applicationController').connectOutlet('loga', 'login');
         }
      })
    }),

    section: Ember.Route.extend({
        route: '/section',
        doSectionA: Ember.Router.transitionTo('section.sectionA'),
        doSectionB: Ember.Router.transitionTo('root.section.sectionB'),

        connectOutlets: function(router, event) {
                router.get('applicationController').connectOutlet('section');
        },

        index: Ember.Route.extend({
             route:  '/'            
        }),

         sectionA: App.SectionARoute.extend({
             route: '/sectionA'
         }),

         sectionB: App.SectionBRoute.extend({
             route: '/sectionB'
         })        

   })         

 })
}); 
```

# google-apps-script - 从 Google Apps 脚本宏中取消选中查看受保护范围

> ID：13281817
> 
> 赞同：3
> 
> 时间：2012-11-08T03:09:57.340
> 
> 标签：google-apps-script, google-sheets

我有一个受保护范围的 Google 电子表格。由于散列标记，数据难以读取。我可以通过取消选中视图菜单中的“受保护范围”来手动解决问题。我可以用宏做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T02:04:56.090

就是这样。

从[文档](http://support.google.com/drive/bin/answer.py?hl=en&answer=63175)中：

> 尝试编辑他们没有编辑权限的受保护范围内的单元格的协作者将收到一条错误消息。打开具有受保护范围的电子表格时，个人将看到他们没有编辑权限的范围以方格背景显示。 **如果背景图案使阅读电子表格内容变得困难，您可以通过将鼠标指向查看菜单并取消选中受保护范围来隐藏受保护范围。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:51:22.927

坏消息，恐怕。我自己花了一个小时寻找相同的答案，但我认为没有！

解决方法：包含带有屏幕截图的文本的图像，告诉他们转到“查看”>“受保护的范围”。

或者只是相信他们不会拿你的床单开玩笑。您可以随时回滚历史记录。

# python-3.x - 呼叫功能有问题

> ID：13281821
> 
> 赞同：0
> 
> 时间：2012-11-08T03:10:42.947
> 
> 标签：python-3.x

我不知道哪里出错了。如果我只调用我的 valid_ISBN(isbn) 函数，我可以获得正确的结果，但是当我写入文件时，结果变得全部无效。（可能函数调用有问题，但我不知道如何解决）

```
def main():
    # Call and open the File
    inFile = open("isbn.txt", "r")

    for line in inFile:
        line_strip = line.replace("-", "").replace(" ", "").rstrip("\n")
        isbn = line_strip # the function call

        # Output file
       str = []
       str.append(line)
        outFile = open("isbnOut.txt", "a")
        for i in str:
            if valid_ISBN(isbn) == "valid":
                outFile.write(i.strip() + "  valid\n")
            else:
                outFile.write(i.strip() + "  invalid\n")

    inFile.close()
    outFile.close()

def valid_ISBN(isbn):
    if len(isbn) != 10 or (isbn[0:9].isdigit()) == False:
        print("invalid")
    else:
        return partial_sums(isbn)

def partial_sums(s1):
    lst1 =[]
    sum1 = 0
    for i in range(len(s1)):
        if (i == (len(s1) -1)) and ((s1[i] == "x") or (s1[i] == "X")):
            sum1 = sum1 + 10
        else:
            sum1 = sum1 + int(s1[i])
        lst1.append(sum1)
    #print(lst1)

    sum_of_s1(lst1)

def sum_of_s1(s2):
    lst2 = []
    sum2 = 0
    for i in s2:
        sum2 += i
       lst2.append(sum2)
    #print(lst2)

    checkISBN(lst2[-1])

def checkISBN(value):
    if value % 11 == 0:
        print("valid")
    else:
        print("invalid")

main() 
```

2 isbn 文本文件的测试用例（无新行）：

019-923-3241

818-851-703X

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:34:41.880

在您的主要功能中：

每次从输入文件中读入一行时，都会初始化 str 并只用一个值填充它。您打开输出文件，对 str 中的 one 值进行有效性检查，最后将 one 值写入输出文件。

下次您阅读文件时，您会做同样的事情......所以根本不需要 str

也`str`用作变量名是不好的形式。在您的控制台中写入`help(str)`，您将看到原因。

现在来处理您的实际投诉：

您的问题是没有新行。

当你说`for line in some_open_file_handler:...`python 所做的是填充`line`直到下一个换行符或文件末尾的所有内容。

如果您的输入文件没有分隔 isbns 的新行，则 line 的第一个值为`019-923-3241 818-851-703X`. 因此，该行将`line_strip = line.replace("-", "").replace(" ", "").rstrip("\n")`linetrip 设置为`0199233241818851703X`

这应该可以解决它： `'line.split()`将产生`['019-923-3241','818-851-703X']`

```
outFile = open("isbnOut.txt", "a")
for line in open("isbn.txt", "r"):
    isbns = line.split()  #this splits stuff up by whitespace.
    for isbn in isbns: 
        isbn = isbn.replace("-", "").replace(" ", "").rstrip("\n")
        if valid_ISBN(isbn) == "valid":
            outFile.write(i.strip() + "  valid\n")
        else:
            outFile.write(i.strip() + "  invalid\n") 
```

# ios - 在 ViewController 中添加两个 Text Field 并在另一个 ViewController 中显示

> ID：13281822
> 
> 赞同：0
> 
> 时间：2012-11-08T03:10:50.587
> 
> 标签：ios, xcode, uiviewcontroller, uitextfield

我正在使用一个`NavigationViewController`和 2 个视图控制器（名为`ViewController`and `ResultViewController`）来制作一个简单的应用程序，它将在第一个 ViewController 中汇总 2 个文本字段并将结果显示在一个标签中，在`ResultViewController`. 我正在使用 push segue 来连接 VC，但我无法创建一个从 textFields 接收总和的变量。错误说：“在'ViewController'类型的对象上找不到属性总和”。我还尝试在`prepareForSegue`方法内创建 sum 变量，但没有成功...

下面，我的第一个`ViewController.m`代码片段：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
 {  
 }

- (IBAction)addButtonPressed:(UIButton *)sender {

ResultViewController *tempView = [self.storyboard instantiateViewControllerWithIdentifier:@"ResultViewController"];

double sum = [_fieldOne.text doubleValue] + [_fieldTwo.text doubleValue];

tempView.answer = self.sum.text; //here appears the error I mentioned

[self presentViewController:tempView animated:YES completion:nil];

} 
```

`ResultViewController.m`片段：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.displaySum.text = self.answer;
} 
```

任何帮助将不胜感激！提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:12:59.147

Sum 是一个局部变量。你要

```
tempView.answer = [NSString stringWithFormat:@"%d",sum]; 
```

# coldfusion - 在 ColdFusion 中显示时区（例如 PST）

> ID：13281823
> 
> 赞同：0
> 
> 时间：2012-11-08T03:10:54.873
> 
> 标签：coldfusion, timezone, coldfusion-9

我试图在时间戳之外显示客户端的时区。例如太平洋标准时间 4:13

我尝试使用 GetTimeZoneInfo() 但我能想到的唯一方法是以小时为单位获取偏移量，然后通过硬编码值数组确定。

我发现的其他方法是使用 java.util.TimeZone 类。以下是我尝试过的代码---

```
 <cfset tz = CreateObject("java", "java.util.TimeZone")> 
<cfset tz = tz.getDefault()> 
<cfoutput>TimeZone:#tz.getDisplayName(false, 1)#</cfoutput> 
```

这给了我作为中央标准时间的输出。

任何进一步的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:22:15.390

您上面提到的代码获取*服务器的*TZ，而不是客户端的。

如果您想要客户的 TZ，您应该阅读针对其他[类似问题](https://stackoverflow.com/questions/1091372/getting-the-clients-timezone-in-javascript)的评论。这些都围绕使用该`Date.getTimezoneOffset()`方法。不过，这只会给您与 UTC 的偏移量，而不是更熟悉的 GMT / BST 等。

# java - 用于 HTTPS 调用的 Apache Commons HttpClient

> ID：13281826
> 
> 赞同：0
> 
> 时间：2012-11-08T03:12:00.940
> 
> 标签：java, security, https

HttpClient 是否使用每个 JRE 中都可用的 cacerts？我是否需要使用 SSL 配置 HttpClient 来调用 HTTPS 端点。

端点使用 GeoTrust，它是 JRE 的 cacerts 信任的权威。HttpClient 是否处理安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:16:44.407

是的，确实如此，根据[网站](http://hc.apache.org/httpclient-3.x/sslguide.html)。如果您安装了[JSSE](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html)并且 1.4 之后的所有 JDK 都附带了它，那么 SSL 可以与 httpclient 库（任何版本）一起使用，就像您对任何其他请求一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:17:00.277

Commons HttpClient API 中没有任何内容允许开发人员自定义控制 SSL 参数。不需要专门配置 Commons HttpClient；HttpClient 会将 SSL 验证等委托给任何 Java 标准 SSL 套接字使用。反过来，这将最终在您的 JRE`cacerts`文件中被查询以进行 CA 验证。

# vb.net - 使用 HtmlAgilityPack 从 html 获取宽度

> ID：13281827
> 
> 赞同：2
> 
> 时间：2012-11-08T03:12:14.810
> 
> 标签：vb.net, html-parsing, html-agility-pack, selectsinglenode, selectnodes

嘿，我有以下 HTML：

```
<DIV class=channel_row><SPAN class=channel>
<DIV class=logo><IMG src='/images/channel_logos/WRCB.png'></DIV>
<P><STRONG>3</STRONG><BR>WRCB </P></SPAN><SPAN style='PADDING-BOTTOM: 0px; PADDING-LEFT: 0px; WIDTH: 0px; PADDING-RIGHT: 0px; HEIGHT: 42px; PADDING-TOP: 0px' class=time>
<DIV style='MARGIN: 10px'><A class=thickbox title='Inside Edition' href='/tv/info/?program_id=20474&amp;height=260&amp;width=612' jQuery171012058627296475072='8'>Inside Edition</A> 
<P class=schedule_flags><STRONG class=new_flag>New</STRONG>, <STRONG class=cc_flag>CC</STRONG>, <STRONG class=stereo_flag>Stereo</STRONG></P></DIV></SPAN><SPAN style='PADDING-BOTTOM: 0px; PADDING-LEFT: 0px; WIDTH: 490px; PADDING-RIGHT: 0px; HEIGHT: 42px; PADDING-TOP: 0px' class=time>
<DIV style='MARGIN: 10px'><A class=thickbox title='The Voice' href='/tv/info/?program_id=20475&amp;height=260&amp;width=612' jQuery171012058627296475072='9'>The Voice</A> 
<P class=schedule_flags><STRONG class=live_flag>Live</STRONG>, <STRONG class=new_flag>New</STRONG>, <STRONG class=cc_flag>CC</STRONG>, <STRONG class=stereo_flag>Stereo</STRONG></P></DIV></SPAN></DIV> 
```

我现在可以使用以下代码获取一些项目（/images/channel_logos/WRCB.png, 3, WRCB, Inside Edition）：

```
 Dim all = New Dictionary(Of String, Object)()
    For Each channel In doc.DocumentNode.SelectNodes(".//div[@class='channel_row']")
        Dim info = New Dictionary(Of String, Object)()

        With channel
            info!Logo = .SelectSingleNode(".//img").Attributes("src").Value
            info!Channel = .SelectSingleNode(".//span[@class='channel']").ChildNodes(3).ChildNodes(0).InnerText
            info!Station = .SelectSingleNode(".//span[@class='channel']").ChildNodes(3).ChildNodes(2).InnerText

            Dim style As String = .SelectSingleNode(".//span").Attributes("style").Value

            info!Shows = From tag In .SelectNodes(".//a[@class='thickbox']")
                         Select New With {.Show = tag.Attributes("title").Value}
        End With

        all.Add(info!Station, info.Item("Shows"))
        theLogoURL(theCount) = "http://epbfi.com" & Trim(info.Item("Logo"))
        theChannelNum(theCount) = Trim(info.Item("Channel"))
        theStationCallLetters(theCount) = Trim(info.Item("Station"))

        Dim Shows As String = ""
        Dim ShowsDetail As String = ""
        Dim tmpShows = all.Item(info!Station) 
```

但是，我找不到在**< BR>WRCB < /P>< /SPAN>< SPAN style='PADDING-BOTTOM: 0px;之后获取宽度的技巧 填充左：0px；宽度：0px；**

我正在寻找**WIDTH: 0px;** 只要。

我可以在上面的代码中修改什么以获得该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:20:31.230

我想你可以试试这个：

```
.SelectSingleNode(".//span[2]").Attributes("style").Value 
```

# boost-asio - 在一个 udp 套接字中发出多个 async_send_to 是否安全？

> ID：13281829
> 
> 赞同：2
> 
> 时间：2012-11-08T03:12:34.640
> 
> 标签：boost-asio

我正在用 boost::asio 编写一个 udp 广播服务器。udp 数据包将从一个源端接收并广播到多个目的地。在单个线程中执行此类操作是否安全？

```
boost::asio::ip::udp::socket s;
MyHandler handler; // do nothing handler
MyBuffer buffer; //  buffer is allocated on heap and managed by smart ptr
...

s.async_send_to(buffer, destination1, handler);
s.async_send_to(buffer, destination2, handler);
s.async_send_to(buffer, destination3, handler); 
```

或者我应该使用阻塞 send_to 来代替？或者我应该链接它们，即在第一个 async_send_to 的完成处理程序中调用第二个 async_send_to？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:38:25.780

文档说：

> 尽管缓冲区对象可以根据需要被复制，但底层内存块的所有权由调用者保留，它必须保证它们在调用处理程序之前保持有效。

如果缓冲区是在堆栈上分配的（即，它是在调用 async_send 的同一块中定义的）这很可能会被破坏。因为调用所以 async_send 不会阻塞，一旦你从这个代码片段返回，内存就会被释放。您可以将“缓冲区”设为类属性，以确保它在您需要时一直有效。但是如果缓冲区在堆上，那你就没事了，代码会照原样工作。

# python - 为什么我得到一个 None 值，为什么这个数字仍在 Python 中打印？

> ID：13281835
> 
> 赞同：1
> 
> 时间：2012-11-08T03:13:12.563
> 
> 标签：python, list, dictionary, set

> **可能重复：**
> [功能打印正确的输出和无](https://stackoverflow.com/questions/12466233/function-printing-correct-output-and-none)

试图在假装的 twitter 提要程序中打印共同用户。在家工作。数字是用户（例如`1111`是用户）。字典中的以下集合是键的朋友集合。

我想要这个输出：

```
Most friends in common
1111:   222 33333 5454
222:    1111 33333 5454
33333:  1111 222
5454:   1111 222 
```

但是有这个输出：

```
Most friends in common
1111 :  222 33333 5454  1111 None
222 :   1111 33333 5454  222 None
33333 :  1111 222  33333 None
5454 :   1111 222  5454 None 
```

这是我的程序：

```
all_users = {'1111': set(['5454', '222']), '33333': set(['5454']), '5454': set(['1111', '33333', '222']), '222': set(['1111', '5454'])}

def findmutual(id, all_users):
    users = []
    for key in all_users:
        mutual = all_users[id].intersection(all_users[key])
        rank = len(mutual)
        templist = [rank, key.strip()]
        users.append(templist)
    users = sorted(users)

    print users

    for item in users:
        if  id == item[1]:
            print "" ,
        if item[0] == 0:
            print "",
        else:
            print item[1],

users = []
for key in all_users:
    users.append(key)
users = sorted(users)
print "Most friends in common"
for item in users:
    print item, ":\t", findmutual(item, all_users) 
```

请帮助我理解这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:24:24.987

`findmutual`不返回任何东西，这在 Python 中相当于返回`None`. 所以“无”出现在输出中，因为您告诉它打印 的返回值`findmutual(item, all_users)`，它始终是`None`。

这些数字仍在打印，因为`findmutual` *它自己会*打印它们。这很少是您想要的，因为它剥夺了您调用`findmutual`以查找用户 ID 并对其进行任何其他操作的灵活性；每次你调用它时，它都会打印它们（即使你不想要它），并且你无法访问 Python 中的数字来进一步操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:26:49.540

```
for item in users:
    print item, ":\t", findmutual(item, all_users) # << That's why it shows None 
```

这里发生了什么？

1.  项目 = 用户 [n]
2.  打印：
    1.  物品
    2.  输入函数
    3.  该功能打印更多
    4.  函数结束并（自动）返回 None
    5.  打印函数的返回值（无）！

您可能想更改第 3-4 步！而不是所有的打印语句，比如：

```
result=''
...
result += '' #whatever
...
return result 
```

**更新：**

如果我猜对了，您是在尝试根据谁最受欢迎来建立排名？

在这种情况下，您可能会考虑其他解决方案：

```
all_users = {'1111': set(['5454', '222']),
             '33333': set(['5454']),
             '5454': set(['1111', '33333', '222']),
             '222': set(['1111', '5454'])}

from collections import defaultdict, Counter

def findmutual(user_relation_map):    
    user_list = set(sorted(user_relation_map.keys()))
    user_ranking = defaultdict(int)
    for user in user_list:
        for friend in user_relation_map[user]:
            user_ranking[friend] += 1
    return user_ranking

c=Counter(findmutual(all_users))
print("Ranking : {0}".format(c.most_common()))

>>> Ranking : [('5454', 3), ('1111', 2), ('222', 2), ('33333', 1)] 
```

# php - 使用 Ajax 和 PHP 从下拉列表中自动选择

> ID：13281836
> 
> 赞同：0
> 
> 时间：2012-11-08T03:13:13.157
> 
> 标签：php, ajax, forms, drop-down-menu, get

我正在使用下拉列表选择一个选项，该选项根据已保存的项目填写表格。我要做的就是从下拉列表中获取表单ID，然后查询数据库以获取正确的值以进入字段。The Ajax request works correctly, however ,since the form is called from a function, when a value is selected that same function is called again so there are 2 forms generated.

所以信息流是这样的。

1.  当页面加载时，会调用函数 create_event 来显示一个表单。

2.  如果从下拉列表中选择一个项目（在 create_event 中）以填写一些选项，则通过 ajax 再次调用相同的 create_event 函数，以便再次加载相同的表单。

这是调用表单的地方

```
if($_GET['form_id']){ //a value was selected from the drop down list
    if(isset($my_username)){  //make sure the user is signed in
        $form_id = $_GET['form_id']; 
        $event->create_event($form_id);
    }
}
if($uri_2 == "create" AND !$_GET['form_id']){ //checks URI for create page and no form_id has been selected
    if(isset($my_username)){  //make sure the user is signed in
        $form_id = "";
        $event->create_event($form_id);
    }
} 
```

我该如何解决这个问题？我对页面重新加载很好，但如果不通过 URL 直观地传递一些东西（我想避免），我不知道如何做到这一点。

# java - Json Gson 期望 Begin Object 但是是字符串

> ID：13281837
> 
> 赞同：0
> 
> 时间：2012-11-08T03:13:21.657
> 
> 标签：java, android, json, gson

我正在使用以下代码来包含此 Json

```
public class RequestsDTO
{
    @SerializedName ("requests")
    public Requests requestsContainer;

    public  class Requests 
    {
        @SerializedName ("request")
        public List<Request> requests;      
    }

    public class Request
    {

        @SerializedName ("amount")
        public Amount amount;

        @SerializedName ("id")
        public int requestId;

        @SerializedName ("status")
        public Status status;

        @SerializedName ("created")
        public String  created;
        @SerializedName ("start")
        public String start;

        @SerializedName ("notes")
        public Notes notes;

        @SerializedName ("type")
        public Type type;

        @SerializedName ("employee")
        public Employee employee;

        @SerializedName ("end")
        public String end;
    }

    public class Amount
    {

        @SerializedName ("content")
        public int time;
        @SerializedName ("unit")
        public String unit;
    }
    public  class Status
    {

        @SerializedName ("content")
        public String currentStatus;
        @SerializedName ("lastChanged")
        public String lastChangedDate;
        @SerializedName ("lastChangedByUserId")
        public int lastChangedByUserId;
    }
    public  class Notes
    {
        @SerializedName ("note")
        public List<Note> note;
    }
    public  class Note
    {
        @SerializedName ("content")
        public String content;
        @SerializedName ("from")
        public String from;
    }
    public  class Type
    {
        @SerializedName ("content")
        public String content;
        @SerializedName ("id")
        public int id;
    }
    public  class Employee
    {
        @SerializedName ("content")
        public String content;
        @SerializedName ("id")
        public int id;
    }
} 
```

和json：

```
 {"requests": {"request": [
     {
         "amount": {
             "content": 2,
             "unit": "hours"
         },
         "id": 246,
         "status": {
             "content": "superceded",
             "lastChanged": "2012-10-24",
             "lastChangedByUserId": 2270
         },
         "created": "2012-10-11",
         "start": "2012-10-20",
         "notes": {"note": [
             {
                 "content": "Having wisdom teeth removed.",
                 "from": "employee"
             },
             {
                 "content": "Get well soon",
                 "from": "manager"
             }
         ]},
         "type": {
             "content": "Vacation",
             "id": 4
         },
         "employee": {
             "content": "Michael Daniels",
             "id": 40350
         },
         "end": "2012-10-25"
     }, 
```

我正在像这样构建我的 Gson：

```
public class Json {
    private static Gson gson;

    private static class MyNoteClassTypeAdapter implements JsonDeserializer<List<RequestsDTO.Note>> {
        public List<RequestsDTO.Note> deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext ctx) {
            List<RequestsDTO.Note> vals = new ArrayList<RequestsDTO.Note>();
            if (json.isJsonArray()) {
                for (JsonElement e : json.getAsJsonArray()) {
                    vals.add((RequestsDTO.Note) ctx.deserialize(e, RequestsDTO.Note.class));
                }
            } else if (json.isJsonObject()) {
                vals.add((RequestsDTO.Note) ctx.deserialize(json,RequestsDTO.Note.class));
            } else {
                throw new RuntimeException("Unexpected JSON type: " + json.getClass());
            }
            return vals;
        }
    }

    public static Gson getGson()
    {
        if (gson == null)
        {
            Type ListType = new TypeToken<List<RequestsDTO.Note>>() {}.getType();
            GsonBuilder builder = new GsonBuilder();
            builder.registerTypeAdapter(DateTime.class, new DateTimeSerializer());
            builder.registerTypeAdapter(ListType, new MyNoteClassTypeAdapter());
            gson = builder.create();
        }
        return gson;
    }
} 
```

这是因为“Note.class”列表可以作为列表或单个对象返回。

最后像这样构建它

```
Json.getGson().fromJson(response, RequestsDTO.class); 
```

有些东西正在磨损，我不知道是什么。在过去的几个小时里，它一直困扰着我。

我收到这个错误

```
 11-07 20:04:57.097: E/AndroidRuntime(6963): FATAL EXCEPTION: main
11-07 20:04:57.097: E/AndroidRuntime(6963): java.lang.RuntimeException: Unable to start activity 
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1648)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1662)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.os.Looper.loop(Looper.java:130)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.app.ActivityThread.main(ActivityThread.java:3696)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at java.lang.reflect.Method.invokeNative(Native Method)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at java.lang.reflect.Method.invoke(Method.java:507)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at dalvik.system.NativeStart.main(Native Method)
11-07 20:04:57.097: E/AndroidRuntime(6963): Caused by: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1932 column 20
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:81)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.read(CollectionTypeAdapterFactory.java:60)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.Gson.fromJson(Gson.java:795)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.Gson.fromJson(Gson.java:761)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.Gson.fromJson(Gson.java:710)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.Gson.fromJson(Gson.java:682)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.mokinetworks.bamboohr.service.WebService.getTimeOffRequests(WebService.java:154)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.mokinetworks.bamboohr.ViewRequestActivity.onCreate(ViewRequestActivity.java:29)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1610)
11-07 20:04:57.097: E/AndroidRuntime(6963):     ... 11 more
11-07 20:04:57.097: E/AndroidRuntime(6963): Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1932 column 20
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
11-07 20:04:57.097: E/AndroidRuntime(6963):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165)
11-07 20:04:57.097: E/AndroidRuntime(6963):     ... 28 more 
```

有谁知道出了什么问题？

我的 json 中的第 1932 行指向这里

```
 "created": "2012-10-20",
    "start": "2012-10-29",
    "notes": "",            <---------line 1932
    "type": {
        "content": "Vacation",
        "id": 4
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:23:15.367

如果我没记错的话，错误中提到了一些 JSON 解析错误，在：

```
line 1932 column 20 
```

您的 JSON 在该行是什么样的？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-19T17:51:33.770

您的 RequestDTO 包含作为对象的字段注释。

```
@SerializedName ("notes")
public Notes notes; 
```

但是 JSON 给了你一个字符串

```
"notes": "", 
```

因此错误。

解决方案是将注释更改为字符串。

```
@SerializedName ("notes")
public String notes; 
```

# ios - iOS在设置捆绑子窗格中存储值数组

> ID：13281838
> 
> 赞同：1
> 
> 时间：2012-11-08T03:13:28.523
> 
> 标签：ios, settings, bundle, preferences

我正在尝试将值存储在设置捆绑子窗格中。

我有`Root.plist`和孩子`moteurs.plist`

在 中`moteurs.plist`，我有 14 个电机，我想为每个电机存储 2 个值（校准系数）。这些值需要由用户更改。

在`Root.plist`我有：

```
<dict>
<key>PreferenceSpecifiers</key>
<array>
    <dict>
        <key>Title</key>
        <string>Moteurs</string>
        <key>Type</key>
        <string>PSGroupSpecifier</string>
    </dict>
    <dict>
        <key>Type</key>
        <string>PSChildPaneSpecifier</string>
        <key>Title</key>
        <string>Paramètres moteurs</string>
        <key>File</key>
        <string>moteurs</string>
        <key>Key</key>
        <string>moteurs</string>
    </dict>
    <dict> 
```

在`moteurs.plist`：

```
<dict>
<key>PreferenceSpecifiers</key>
<array>
    <dict>
        <key>Title</key>
        <string>L5K-070</string>
        <key>Type</key>
        <string>PSGroupSpecifier</string>
    </dict>
    <dict>
        <key>AutocapitalizationType</key>
        <string>None</string>
        <key>AutocorrectionType</key>
        <string>No</string>
        <key>DefaultValue</key>
        <string>0,0</string>
        <key>IsSecure</key>
        <false/>
        <key>Key</key>
        <string>coeff1_preference</string>
        <key>KeyboardType</key>
        <string>Number Pad</string>
        <key>Title</key>
        <string>Coeff 1</string>
        <key>Type</key>
        <string>PSTextFieldSpecifier</string>
    </dict>
    <dict>
        <key>AutocapitalizationType</key>
        <string>None</string>
        <key>AutocorrectionType</key>
        <string>No</string>
        <key>DefaultValue</key>
        <string>0,0</string>
        <key>IsSecure</key>
        <false/>
        <key>Key</key>
        <string>coeff2_preference</string>
        <key>KeyboardType</key>
        <string>Number Pad</string>
        <key>Title</key>
        <string>Coeff 2</string>
        <key>Type</key>
        <string>PSTextFieldSpecifier</string>
    </dict> 
```

我遇到了一个问题：我无法为孩子初始化默认值（或者我不知道如何读取这些值）

使用以下方法初始化根默认值：

```
- (void)registerDefaultsFromSettingsBundle {
    [[NSUserDefaults standardUserDefaults] registerDefaults:[self defaultsFromPlistNamed:@"Root"]];
     [[NSUserDefaults standardUserDefaults] synchronize];
}

- (NSDictionary *)defaultsFromPlistNamed:(NSString *)plistName {
    NSLog(@"Traitement de %@:",plistName);

    NSString *settingsBundle = [[NSBundle mainBundle] pathForResource:@"Settings" ofType:@"bundle"];
    NSAssert(settingsBundle, @"Could not find Settings.bundle while loading defaults.");

    NSString *plistFullName = [NSString stringWithFormat:@"%@.plist", plistName];

    NSDictionary *settings = [NSDictionary dictionaryWithContentsOfFile:[settingsBundle stringByAppendingPathComponent:plistFullName]];
    NSAssert1(settings, @"Could not load plist '%@' while loading defaults.", plistFullName);

    NSArray *preferences = [settings objectForKey:@"PreferenceSpecifiers"];
    NSAssert1(preferences, @"Could not find preferences entry in plist '%@' while loading defaults.", plistFullName);

    NSMutableDictionary *defaults = [NSMutableDictionary dictionary];
    for(NSDictionary *prefSpecification in preferences) {
        NSString *key = [prefSpecification objectForKey:@"Key"];
        id value = [prefSpecification objectForKey:@"DefaultValue"];
        if(key && value) {
            [defaults setObject:value forKey:key];
        }

        NSString *type = [prefSpecification objectForKey:@"Type"];
        if ([type isEqualToString:@"PSChildPaneSpecifier"]) {
            NSString *file = [prefSpecification objectForKey:@"File"];
            NSAssert1(file, @"Unable to get child plist name from plist '%@'", plistFullName);
            [defaults addEntriesFromDictionary:[self defaultsFromPlistNamed:file]];
        }
    }

    return defaults;
} 
```

我可以使用访问根首选项值

```
NSString *test = [[NSUserDefaults standardUserDefaults] stringForKey:@"serveur_preference"];
    NSLog(@"serveur:%@",test); 
```

那么如何读取子窗格首选项值？为每个电机存储 2 个系数的最佳做法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:05:44.587

子窗格设置应该可以使用它们的常用标识符（如 plist 中指定的那样）访问，如下所示

```
NSUserDefaults* settings = [NSUserDefaults standardUserDefaults];
NSString* coeff1 = [settings stringForKey:@"coeff1_preference"];
NSString* coeff2 = [settings stringForKey:@"coeff2_preference"]; 
```

同样，您可以使用设置默认值`-NSUserDefaults registerDefaults:`

# android - 除非选中复选框，否则如何使文本变灰？

> ID：13281841
> 
> 赞同：1
> 
> 时间：2012-11-08T03:14:05.290
> 
> 标签：android, checkbox

嗨，我是 android 编码的新手，我正在尝试编写一个省电应用程序。我希望某些文本和时间选择显示为灰色并禁用，除非选中该`Disable data overnight`复选框。请帮助这个可怜的菜鸟！我看了其他帖子，但我不明白。谢谢！

```
<script android:layout_width="wrap_content" >

function setfunction(@+id/checkBox2) {
var el = document.getElementById("data_off_night");
if(el.checked)
  document.getElementById("data_off_night").disabled = false;
else
 document.getElementById("data_off_night").disabled = true;    
}  
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:28:02.153

也许它会帮助你。

```
CheckBox checkBox = (CheckBox) findViewById(R.id.checkbox_id);
    if (checkBox.isChecked()) {
        checkBox.setEnabled(true);
    }else{
        checkBox.setEnabled(false);
    } 
```

# javascript - 使用 jQuery 自动播放滑块

> ID：13281843
> 
> 赞同：1
> 
> 时间：2012-11-08T03:14:37.740
> 
> 标签：javascript, jquery, slider

我有以下代码，无法在滑块上添加自动播放。谁能帮我这个？

```
$('#front-slides').slides({
        preload: true,
        generateNextPrev: false,
        slideSpeed: 500,
        animationStart: function(current){
            $slideCaption = $(".slides_container div.slide:eq("+ (current-1) +") .caption").text();
            $("#headline h6").text($slideCaption);

            if($slideCaption != ''){
                $("#headline").stop().hide().slideDown(600);
            }else{
                $("#headline").hide();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T08:11:16.627

只需在 slideSpeed 下添加以下行：500，

```
 play: 5000,
    pause: 2500, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T08:15:08.050

```
 $(function() { 
      $(".slider").jCarouselLite({
      auto:500,
      speed:800,
      btnNext: ".next",                     
      btnPrev: ".prev",                     
      visible: 5                 
     });             
}); 
```

# knockout.js - Uploadify 说当我将 DOM 对象直接传递给占位符元素时它找不到占位符元素，但 Uploadifive 有效，为什么？

> ID：13281844
> 
> 赞同：2
> 
> 时间：2012-11-08T03:14:40.963
> 
> 标签：knockout.js, uploadify

我试图让您使用带有淘汰赛的uploadify/uploadifive，并不断收到有关无法找到占位符元素的错误。该错误仅在运行使用 uploadify(flash) 版本的 IE 时发生。其他浏览器很好，因为它们使用的是 uploadifive(html5)。为什么它在 IE 中不起作用？

HTML

```
<input type="file"  data-bind="imageUpload: images"  /> 
```

自定义绑定

```
 ko.bindingHandlers.imageUpload = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
            var uploadCallback = function (file, data, response) {
                valueAccessor().collection().add(JSON.parse(data));
            };
            window.setTimeout(function () {
              $(element).uploadifive({
                  'method': 'post',
                  'fileObjName': 'FileData',
                  'uploadScript': 'Image/Upload',
                  'onUploadComplete': uploadCallback,
                  'onFallback': function () {
                      $(element).uploadify({
                          'method': 'post',
                          'fileObjName': 'FileData',
                          'swf': '/Scripts/Uploadify/uploadify.swf',
                          'uploader': 'Image/Upload',
                          'onUploadSuccess': uploadCallback
                      });
                  }});
             }, 0);
           }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:14:40.963

问题是没有在输入元素上放置 id 并且需要将 uploadify 创建代码包装在超时函数中。问题中的代码反映了对 $.uploadify 的调用的超时。这是因为uploadify 在内部使用了swfupload，它会尝试通过id 查询输入元素。如果您不想在 input 元素上放置 id 属性，您还可以在 uploadify 脚本中添加一些代码，该脚本将生成一个 id。

这是我添加的

```
 //Add id to DOM object if it doesn't exist. 
        if (!$this.attr('id')) {
            $this.attr('id', 'uploadify' + uploadControlIdCounter);
            uploadControlIdCounter += 1;
        } 
```

同样的事情，还有更多的上下文。

```
 /*
   Uploadify v3.1.1
   Copyright (c) 2012 Reactive Apps, Ronnie Garcia
   Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
   */

   (function($) {
   var uploadControlIdCounter = 0;
   // These methods can be called by adding them as the first argument in the uploadify plugin call
var methods = {

    init : function(options, swfUploadOptions) {

        return this.each(function() {

            // Create a reference to the jQuery DOM object
            var $this = $(this);

            //Add id to DOM object if it doesn't exist. 
            if (!$this.attr('id')) {
                $this.attr('id', 'uploadify' + uploadControlIdCounter);
                uploadControlIdCounter += 1;
            } 
```

# netbeans - J2ME NetBeans6.9 GameBuilder

> ID：13281848
> 
> 赞同：1
> 
> 时间：2012-11-08T03:14:56.900
> 
> 标签：netbeans, java-me, netbeans-6.9

首先你打开 GameBuilder，创建精灵、平铺层和场景，现在我如何让它出现在模拟器的显示中？我尝试创建一个 VisualMIDlet 并插入此代码 public void startApp() throws MIDletStateChangeException {

```
 try {
  display = Display.getDisplay(this);
  GameDesign gameCanvas = new GameDesign();
  gameCanvas.start();
  Display.setCurrent(gameCanvas);

}
catch (Exception ex) {
  System.out.println(ex);
}
} 
```

但在 Display.setCurrent(gameCanvas); 程序产生错误

```
 Display.setCurrent(gameCanvas);
method Display.setCurrent(Displayable) is not applicable
  (actual argument GameDesign cannot be converted to Displayable by method invocation conversion)
method Display.setCurrent(Alert,Displayable) is not applicable
  (actual and formal argument lists differ in length) 
```

我能做些什么？也许是课堂上的错误？谢谢

# apache - node.js node-http-proxy 没有传递节点模块

> ID：13281849
> 
> 赞同：1
> 
> 时间：2012-11-08T03:15:08.990
> 
> 标签：apache, node.js, http, socket.io

我想将 /n/ 请求传递给 node.js，然后将其他所有内容留给端口 8080 上的 Apache。代理在端口 80 上运行，/n/ 的代码在端口 9000 上。

但是，像节点这样的东西`socket.io`被破坏了，因为我认为它没有被正确代理 - socket.io 查询从 apache 返回 404，如预期的那样：

404 未找到

# 未找到

在此服务器上未找到请求的 URL /socket.io/socket.io.js。

* * *

Apache/2.2.22 (Ubuntu) 服务器在 localhost 端口 8080

我的 /n/ 的起始 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="/socket.io/socket.io.js"></script> 
```

代理：

```
var app = require('http').createServer(handler);
var io = require('socket.io').listen(app);
var fs = require('fs');
var url = require('url');
var httpProxy = require('http-proxy');
io.set('log level', 1); 
app.listen(9000);

httpProxy.createServer({
router: {
    'localhost/n': '127.0.0.1:9000',
    'localhost': '127.0.0.1:8080'
    }

}).listen(80); 
```

如何让代理`socket.io/socket.io.js`通过 Node，而不是 Apache？我曾尝试使用为我的静态文件提供服务的相同代码（例如 css/js），但似乎不存在名为`socket.io`的实际文件夹 - 节点似乎重写了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:41:26.243

单独的 node.js 不会做 apache 开箱即用的事情，以提供静态文件。所以每个 url/request/file 都需要在路由器中指定。为了让它快速运行，你可以[在这里](http://expressjs.com/api.html)阅读 node.js 的 express 或者只是在路由器中指定文件

```
 router: {
    'localhost/n': '127.0.0.1:9000',
    'localhost': '127.0.0.1:8080',
    '/socket.io/socket.io.js': 'path/to/the/file'
    } 
```

# actionscript-3 - 使用类文件 AS2 中的代码

> ID：13281854
> 
> 赞同：0
> 
> 时间：2012-11-08T03:15:33.027
> 
> 标签：actionscript-3, flash, actionscript, actionscript-2, keylistener

出于某种原因，您不能`keyListener.onKeyDown = function()`在类描述中使用（说不能使用）。为什么？

另外，我如何将其“转换”为 Class.as 文件可用的东西？*（例如，如果我的类文件名为“Player.as”，并且它扩展了 MovieClip。扩展的movieclip 对这个问题有影响吗？）

```
var keyListener:Object = new Object();
keyListener.onKeyDown = function() {
    if (Key.getCode() == 111) { // a is 65
        //do something
    }
};
Key.addListener(keyListener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:20:23.317

为什么stackexchange中的actionscript不支持QQ。无论如何，我不知道确切的答案，但我用这个解决了它：

```
if (Key.isDown(111))
    {
        //do something
    } 
```

不`getCode()`！没有听众！终于解脱了！

# jquery - 下拉菜单提交按钮

> ID：13281855
> 
> 赞同：0
> 
> 时间：2012-11-08T03:15:37.393
> 
> 标签：jquery, button, drop-down-menu

我目前有一个下拉菜单，我可以在其中选择一个城镇，当我选择它时，它将显示与该城镇相关联的记录。我想知道如何在其中添加一个按钮，所以当我选择一个城镇时，它会突出显示它，然后允许我单击“提交”按钮，而不是只选择城镇并自动显示数据。这是我当前的代码。

```
$("#myTown option").click(getTown);

function getTown(){
    var town=$(this).val();
    window.location='searchresults.php?querystring='+town+'&querydesc=Town= &querytype=4';
} 
```

我在下拉菜单 ID 旁边的按钮是“搜索”。

任何关于我应该采取的方法的想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:30:08.993

而是将事件移动到按钮，然后读取选择框的值：

```
<select id="myTown"></select>
<button id="submit">提交</button>

<脚本>
$("#submit").click(getTown);

函数 getTown(){
 var town=$("#myTown").val();
 window.location='searchresults.php?querystring='+town+'&querydesc=Town= &querytype=4';
}
</脚本>

```

# java - ArrayAdapter 用于 Java 中的 android 编程，字符串数组

> ID：13281856
> 
> 赞同：0
> 
> 时间：2012-11-08T03:15:47.800
> 
> 标签：java, android, android-arrayadapter

我正在使用 ArrayAdapter 用一些字符串值填充列表视图。出于测试目的，我有：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.order_list);  
        ArrayList<Ingredient> ingredientArray = new ArrayList<Ingredient>();
        Ingredient test1 = new Ingredient();
        Ingredient test2 = new Ingredient();
        test1.testObject1();
        test2.testObject2();
        ingredientArray.add(test1);
        ingredientArray.add(test2);
        String names[] = {test1.getName(), test2.getName()};

        ListView lv = (ListView)findViewById(android.R.id.list);
        lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, names));

    } 
```

两个函数testObject1，testObject2分别将name的值设置为'A'和'B'，但是当ListView活动开始时，它显示'B'两次，而不是我期望的首先是'A'，然后是'乙'。如何修改此代码以使其正常工作？

# regex - 在字符串中查找一个序列并将其与后面的字符一起打印出来

> ID：13281857
> 
> 赞同：1
> 
> 时间：2012-11-08T03:15:59.917
> 
> 标签：regex, perl

我正在尝试在 Perl 中创建一个程序，该程序将读取数千个字符并尝试找到匹配的字符串。我需要打印出字符串加上接下来的五个字母。我还需要打印出找到它的位置，即有多少个字母。我对 Perl 很陌生。我现在只是在课堂上学习它。

这是我到目前为止的代码：

```
#!/usr/bin/perl

$sequence = 'abcd';
$fileName = 'file.txt';

#Opening file
unless (open(fileName, $fileName)) {
    print "Cannot open file.";
    exit;
}
@tempArr = <fileName>;    #Adding the lines to an array
close fileName;           #closing the file
$characters = join('', @tempArr);    #making it a clean string
$characters =~ s/\s//g;               #removing white lines
if (characters =~ m/$sequence/i) {

    #Print $sequence and next five characters
}
else {
    print "Does not contain the sequence.";
}

exit; 
```

file.txt 看起来像：

```
aajbkjklasjlksjadlasjdaljasdlkajs
aabasdajlakjdlasdjkalsdkjalsdkjds
askdjakldamwnemwnamsndjawekljadsa
abcassdadadfaasabsadfabcdhereeakj 
```

我需要打印出“abcdheree”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:21:15.947

要打印`$sequence`& 后面的 5 个字符，请尝试使用：

```
if ($characters =~ m/$sequence.{5}/i) {
    print "$&\n"; 
```

（你忘了`$`开`characters`）

**笔记**

*   `.`表示任何字符
*   `{5}`是一个量词
*   使用时`open`，请使用 3 个参数，例如：`open my $fh, "<", "$file" or die $!;`请参阅[http://perldoc.perl.org/perlpentut.html](http://perldoc.perl.org/perlopentut.html)
*   始终放在`use strict; use warnings;`脚本的顶部
*   不要忘记`$`变量（你错过了很多）
*   用于`my`声明变量
*   也许比制作一个大字符串更好的方法：您可以逐行处理数组，例如：`foreach my $line (@tempArr) { #process $line }`
*   `@melTemp1`您调用从未声明的数组

**最后**

```
#!/usr/bin/perl
use strict; use warnings;

my $sequence = 'abcd';
my $fileName = 'file.txt';

#Opening file
open my $fh, "<", $fileName or die "Cannot open file. [$!]";

my @tempArr = <$fh>;                    #Putting the file handle into an array
close $fileName;                        #closing the file handle

my $characters = join('', @tempArr);    #making it a big string
$characters =~ s/\s//g;                 #removing white spaces & tabs

if ($characters =~ m/$sequence.{5}/i) {
    print "$&\n";
}
else {
    print "Does not contain the sequence.";
} 
```

# php - Heroku PHP 托管超时

> ID：13281858
> 
> 赞同：3
> 
> 时间：2012-11-08T03:16:15.627
> 
> 标签：php, heroku, background, timeout, facebook-apps

我目前正在使用 PHP 和 Facebook API 在 Heroku 上主持一个研究项目。它有点密集，所以它超过了 Heroku 的 30 秒响应时间限制。在他们的支持下，他们建议使用后台进程来执行此操作（https://devcenter.heroku.com/articles/background-jobs-queueing），但他们没有说我应该如何为 PHP 执行此操作。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:34:20.367

试试[Symfony 2 进程组件](http://symfony.com/doc/2.0/components/process.html)。它有一个漂亮而简单的 OO 界面，用于处理流程。

```
use Symfony\Component\Process\PhpProcess;

$command = file_get_contents('/hello_world.php');

if ( $command ) {
    $process = new PhpProcess($command);
    $process->run();

    if ($process->isSuccessful()) {

        $output = $process->getOutput();
        // ... 
    }
    else {
        throw new Exception($process->getErrorOutput());
    }
} 
```

# r - 制作条形图

> ID：13281860
> 
> 赞同：-9
> 
> 时间：2012-11-08T03:16:29.203
> 
> 标签：r

我需要在 R 中制作一个条形图。
基本上我有一个棒球运动员数据集，其中列出了每个球员所在的球队以及每个球员的位置。例如：

```
Player    Team    Position 
1    Diamondbacks First Base
2    Diamondbacks Third Base
3    White Sox    Left Field
4    Giants       Pitcher 
```

实际的数据集比这大得多，但它的想法是一样的。我需要制作一个条形图来显示团队中不同位置的频率，我不知道该怎么做。基本上，我所知道的是`barplot()`，所以任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:25:14.373

考虑一个分组条形图。

[此问题](https://stackoverflow.com/questions/8148956/how-to-create-grouped-barplot-with-r?rq=1)的修改示例

```
# if you haven't installed ggplot, if yes leave this line out
install.packages("ggplot2") # choose your favorite mirror

require(ggplot2)
data(diamonds) # your data here instead
# check the dataset
head(diamonds)
# plot it, your team variable replaces 'clarity' and field position replaces 'cut'
ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar(position="dodge") +
opts(title="Examplary Grouped Barplot") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T22:03:22.707

`barplot()`如果你给它一张桌子，效果很好。考虑以下数据：

```
set.seed(423)
data <- data.frame(player   = 1:100,
                   team     = sample(c("Team1", "Team2", "Team3"), 100, replace = TRUE),
                   position = sample(c("Pos1", "Pos2", "Pos3", "Pos4"), 100, replace = TRUE)) 
```

首先，让我们做一个二维表：

```
tab <- table(data$team, data$position) 
```

您可以`data`使用定义的处置制作的一个条形图`tab`是这样的：

```
barplot(tab, beside = TRUE, legend = TRUE) 
```

这为您提供了以下内容： ![在此处输入图像描述](../Images/bc8ab1e071b620431b6277d3073543a9.png)

您可以运行`?barplot`以了解如何进一步自定义您的情节。

# android - Android：RelativeLayout wrt背景图像中小部件的缩放和位置

> ID：13281865
> 
> 赞同：0
> 
> 时间：2012-11-08T03:16:51.053
> 
> 标签：android, image, background, android-relativelayout, scaling

我有一个带有背景 PNG 的 RelativeLayout。背景PNG中有一个标题。在 RelativeLayout 中，我将小部件放置在此标题中。

当它扩展到更大的设备时，问题就开始了：背景 PNG 中的标题拉伸，导致小部件在标题中的位置太高。因为我在“dp”中指定了我的相对布局定位，所以我希望小部件能够根据背景图像的缩放比例重新定位并自动放置到位。

这是我的 RelativeLayout 的简化版本：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingBottom="26dp"
    android:paddingLeft="12dp"
    android:background="@drawable/home_bg"
    android:paddingRight="12dp"
    tools:context=".HomeActivity" >

    <TextView
        android:id="@+id/welcome_tv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="142dp"
        android:text="@string/home_11"
        android:textColor="@color/tile_points_white"
        android:textSize="20sp" />

</RelativeLayout> 
```

我知道我可以在 9 补丁背景 PNG 中修复标题高度（这就是我现在所做的），但我宁愿让标题也垂直缩放。

如何指定我的小部件应与背景 PNG 的缩放成比例地重新定位？

干杯，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:44:01.413

尝试改变

```
android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
```

至

```
android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
```

# php - 为什么我使用 mysqli 的新版本不能工作？

> ID：13281869
> 
> 赞同：0
> 
> 时间：2012-11-08T03:17:43.737
> 
> 标签：php, html, mysql, mysqli

我写了这段代码，但是 stackoverflow 上的人指出这些函数将被弃用。所以我用 mysqli 函数更新它。新的不会返回我想显示的图像 url。

这是旧的工作代码：

```
<html>
<head>

<title>My first PHP script</title>
</head>
<body> 

<?php

$dbhost = 'access.website';
$dbname = 'my_db';
$dbuser = 'usr_nam';
$dbpass = 'passwrd';

$mysql_handle = mysql_connect($dbhost, $dbuser, $dbpass)
    or die("Error Connecting To Database Server");

mysql_select_db($dbname, $mysql_handle)
    or die("Error selecting database: $dbname");

$query = sprintf("SELECT image_url, Type FROM Pokemon 
    c WHERE c.name='%s'", 
    mysql_real_escape_string($_GET["fname"]));

$result = mysql_fetch_assoc(mysql_query($query));   

echo '<img height="450" width="330" src="'.$result['image_url'].'" />';

mysql_close($mysql_handle);

?>

</body>
</html> 
```

这是我的新代码：

```
<html>
<head>

  <title>My first PHP script</title>
</head>
<body> 

<?php

$dbhost = 'access.website';
$dbname = 'my_db';
$dbuser = 'usr_nam';
$dbpass = 'passwrd';

$link = mysqli_connect($dbhost,$dbuser,$dbpass,$dbname);

mysqli_select_db($link,$dbname);

$query = sprintf("SELECT image_url, Type FROM Pokemon 
    c WHERE c.name='%s'", 
    mysqli_real_escape_string($link,$_GET["fname"]));

$result = mysqli_query($link,$query);   

echo '<img height="450" width="330" src="'.$result['image_url'].'" />';

mysqli_close($link);

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:19:10.323

您实际上并没有通过或类似方式从`$result`资源中获取结果：[`mysqli_fetch_assoc()`](http://php.net/manual/en/mysqli-result.fetch-assoc.php)

```
$result = mysqli_query($link,$query);   
$row = mysqli_fetch_assoc($result);

echo '<img height="450" width="330" src="'.$row['image_url'].'" />'; 
```

另一个建议：虽然您已切换到 MySQLi，但您并没有通过准备好的语句获得其主要的安全优势。使用准备好的语句和占位符会更好地完成此操作：

```
// MySQLi object-oriented version with a prepared statement
$mysqli = new mysqli('host','user','pass','dbname');
// Prepare the query and placeholder
$stmt = $mysqli->prepare("SELECT image_url, Type FROM Pokemon c WHERE c.name=?");
// Bind input var & execute
$stmt->bind_param('s', $_GET['fname']);
$stmt->execute();
$stmt->bind_result($img_url)
$stmt->fetch();

echo '<img height="450" width="330" src="'.$img_url.'" />'; 
```

或非 OO 版本：

```
// $link is already defined
$stmt = mysqli_prepare($link, "SELECT image_url, Type FROM Pokemon c WHERE c.name=?");
mysqli_stmt_bind_param($stmt, 's', $_GET['fname']);
mysqli_stmt_execute($stmt);
// Bind output var & fetch
mysqli_stmt_bind_result($stmt, $img_url);
mysqli_stmt_fetch($stmt);
// $img_url now holds the value 
```

# r - 我的 stat_summary 是否考虑了计算平均值的所有点？

> ID：13281871
> 
> 赞同：1
> 
> 时间：2012-11-08T03:17:47.283
> 
> 标签：r, ggplot2

我的代码如下：

```
ggplot(data=ICL1, aes(x=as.Date(AÑO_MES), y=IndICL1, group=RUN_FM, colour=RUN_FM)) +
 ylim(0,150)+ xlab("Periodo") + ylab("% Cobertura") + 
geom_hline(aes(yintercept=100),colour="red")+
stat_summary(fun.y = mean, geom="line",size=1.5 , mapping = aes (group = 1),colour="green") + geom_point() 
```

问题是我收到以下消息：*“删除了包含缺失值的 153 行（stat_summary）”*

这是因为这些点超出了我**`ylim(0,150)`**的 ，我这样使用它是因为比例尺可以正确查看我想要显示的内容。

我想知道这个消息`stat_summary`是否正在考虑计算平均值的缺失点？...如果没有，我应该怎么做才能在平均值计算中考虑这些点但不在图表中显示它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T03:24:58.813

用于`coord_cartesian()`更改*显示*的范围。正如您所发现的`ylim()`，它`xlim()`会影响实际用于计算和生成绘图的数据范围。

在您的情况下，您应该将 替换`ylim`为`coord_cartesian(ylim=c(0, 150))`。

# javascript - 在我的代码中使用 masonry JS

> ID：13281872
> 
> 赞同：0
> 
> 时间：2012-11-08T03:17:49.967
> 
> 标签：javascript, css, jquery-masonry

我已经尝试应用 Masonry [http://masonry.desandro.com/](http://masonry.desandro.com/) JS 使图像在彼此下方浮动，但它似乎不起作用。

我使用了以下功能 - 我做错了什么？CSS问题可能吗？

```
<script>
  $(function(){

    $('.cycler-wrap').masonry({
      itemSelector: '.cycler-container',
      columnWidth: 100
    });

  });
</script> 
```

根据下面 Kelvin 的回复更新了网站。现在只是一个循环问题:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:27:47.717

这里的问题是您的`.cycle-container`元素是 0 像素高，因为您的`img`元素是绝对定位的，这会将它们从文档流中取出。

如果您改为制作`.cycler img`元素`position:relative`，砌体应该按预期工作。由于您的图像是`display:inline`，要保持循环器工作，您实际上只需要制作第一张图像`position:relative`：

```
.cycler img{
    position: absolute;
    top:0;
    left:0;
}

.cycler img:first-child{
    position:relative;
} 
```

当然，并不是所有的浏览器都支持`:first-child`，所以最好只`.first`为每个组中的第一个图像添加一个类并将其用作选择器。

# java - 现有线程中的 Java 执行方法

> ID：13281873
> 
> 赞同：0
> 
> 时间：2012-11-08T03:17:53.490
> 
> 标签：java

假设我有线程 A 和 B 正在运行。如何从线程 B“调用”一个方法，以便在线程 A 中执行该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:12:12.663

为此，线程 A 必须实现某种请求排队机制，线程 B 可以在该机制上将请求排队。线程 A 还必须提供一个循环，在该循环中轮询请求队列以出列并执行请求

这是标准的生产者-消费者架构，例如，当您使用在它们自己的线程上运行的 Swing Worker 任务时，或者当您`SwingUtilities.invokeLater()`在 EDT 上运行所有任务时。

# javascript - 有没有一种简单的方法可以将文件链接变成下载按钮？

> ID：13281881
> 
> 赞同：0
> 
> 时间：2012-11-08T03:18:50.350
> 
> 标签：javascript, jquery, html

例如一个 mp3 文件，很容易让用户使用浏览器打开它，或者通过右键单击和左键单击将链接另存为。

但是有没有一种简单的方法让用户通过简单的左键单击来下载它？同时保持 mp3 格式。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:40:21.067

您可以使用`target=_blank`为此目的指定属性的基本 html 链接，

```
<a href="http://www.mysite.com/music.mp3" target="_blank">Download Link</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:27:14.347

您可以制作下载页面（PHP），并将其放在您的 mp3 文件所在的文件夹中。在下载页面写这个：

```
<?
header('Content-disposition: attachment; filename= your_file.mp3);
readfile(your_file.mp3);
?> 
```

将 your_file.mp3 重命名为 mp3 文件的真实名称。然后只需将链接放置到您刚刚创建的下载页面。当您单击链接时，将下载文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:51:43.670

在执行此操作的网页中，您基本上无法在 javascript 中执行任何操作。下载链接的工作方式是在服务器上设置一个 HTTP 标头。将常规资源更改为可下载资源的标头是`Content-disposition`. 具体来说，您需要将其发送为：

```
Content-Disposition: attachment; filename=music_file_name.mp3 
```

这迫使浏览器执行“另存为”而不是尝试显示文件。

显然，您如何设置此标头取决于您的服务器或框架或编程语言或全部三者。这是一个关于如何在 PHP 中执行此操作的示例：

```
http_send_content_disposition("music_file_name.mp3");
http_send_file("music_file_name.mp3"); 
```

请注意，HTML 中的链接保持不变，无需更改。您甚至可以使用表单提交下载：

```
<a href="music_file_name.mp3">Download</a>

<form action="music_file_name.mp3">
    <input type="submit" value="Download">
</form> 
```

浏览器如何请求文件并不重要。只要`Content-disposition`设置为“附件”，它就会显示“另存为”对话框来保存文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T03:26:02.940

您可以在浏览器上安装 Greasemonkey 并在 Greasepot 上查找可以将 mp3 文件更改为可下载按钮的脚本。

# php - 根据答案添加值

> ID：13281882
> 
> 赞同：0
> 
> 时间：2012-11-08T03:18:55.797
> 
> 标签：php, add

我有这两个文件。

***一个.php***

```
<?

   echo "
       <form action = 'B.php' method = 'post'>
          5+5 = ?
          Write answer: <input type = 'text' name = 'op1'>

           10+10 = ?
           Write answer: <input type = 'text' name = 'op2'>
       </form>

   ";
?> 
```

***B.php***

```
<?

 $op1 = $_REQUEST ['op1'];
 $op2 = $_REQUEST ['op2'];

 if ($op1 == '10'){
     echo "Right answer. 2p.";
     $mark = '2';
 }else{
     echo "Wrong answer. 0p.";
     $mark2 = '0';
 }

 if ($op2 == '20'){
     echo "Right answer. 2p.";
     $mark3 = '2';
 }else{
     echo "Wrong answer. 0p.";
     $mark4 = '0';
 }

?> 
```

如何进行表达式以进行总加？我写了一个简单的例子，我的有 20 个操作，我该怎么做取决于答案加 2 点或 1 点或 0 并最终写出结果？（就像从0到10的考试）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:24:31.637

尝试将变量设置为 0，然后添加点。`if`这是通过语句将事物相加的最基本方法。

```
<?php

 $op1 = $_REQUEST ['op1'];
 $op2 = $_REQUEST ['op2'];
 $total=0;
 if ($op1 == '10'){
     echo "Right answer. 2p.";
     $mark = '2';
     $total+=2;
 }else{
     echo "Wrong answer. 0p.";
     $mark2 = '0';
 }

 if ($op2 == '20'){
     echo "Right answer. 2p.";
     $mark3 = '2';
     $total+=2;
 }else{
     echo "Wrong answer. 0p.";
     $mark4 = '0';
 }
 echo "Total points: $total";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:49:21.613

虽然提供了答案，但我会指出您的代码有什么问题，即`PLENTY`.

首先，在可以直接使用HTML的情况下，为什么还要echo HTML呢？与大量 HTML 相呼应是使代码变得**丑陋**的做法之一。

其次，您对每个问题和答案都使用 if 语句。这是没有意义的：为每个问题添加 10 行代码。

第三，永远不要使用`$_REQUEST`.

我建议维护一个数据库或一系列问题和答案。例如，

```
$q_array = Array(
     array(
        "question" => "abc",
        "answer" => "455",
     ),....
) 
```

然后，您可以回显问题，并使用循环检查答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:17:30.003

**shubam 答案的扩展：**
$q_array = Array(

```
"op1"=>"10",
op2=>"20"

) 
```

**数组的键是表单中的输入类型字段名称，数组的值是正确答案**

```
$total=0;
foreach($_REQUEST as $key=>$val)
{

if($q_array[$key]=$val)
{

     echo "Right answer. 2p.";
     $mark = '2';
     $total+=2;
     echo"<br>";

}

}

echo "Total points: $total"; 
```

# algorithm - 最小生成树和最短路径

> ID：13281883
> 
> 赞同：0
> 
> 时间：2012-11-08T03:18:58.760
> 
> 标签：algorithm, graph-algorithm, shortest-path, minimum-spanning-tree

我遇到了一个问题，说：

给定一个具有整数权重（正数和负数）的连通有向图，开发一种算法来找到两个顶点之间的最短路径。

我想我可以使用最小生成树算法，例如 kruskal 的算法，然后使用 dijkstra 的算法来证明，因为在 MST 中，每个顶点只有一个传入边，所以即使使用负权重，dijkstra 的算法也可以工作。

这听起来像哥斯达黎加吗？

ps 我无法证明 MST 包含每个顶点的有向图的最短路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:41:35.720

首先，您应该注意您的图表不应该有任何负循环。

其次，通常 Dikstra 不适用于具有负权重的图。

Thirst，[Bellman-Ford 算法](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)可用于在有向负权重图中寻找最短路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:55:40.273

> 我无法证明 MST 包含每个顶点的有向图的最短路径。

那是因为它是假的。以边权重为 2、3 和 4 的三角形图为例。MST 仅包含权重为 2 和 3 的边，但最短路径的权重为 4，通过 MST 的路径的权重为 5。

鉴于此，在您的算法中嵌入最小生成树似乎是个坏主意。

# java - 无法在 Tomcat 服务器上本地查看网页？

> ID：13281884
> 
> 赞同：2
> 
> 时间：2012-11-08T03:18:58.960
> 
> 标签：java, eclipse, apache, tomcat

我有一个 Java 2E 项目，它基本上处理网站上的事情。xhtml 代码很好，在我的笔记本电脑上，我可以在 Eclipse 中运行 Apache Tomcat 服务器，打开我的 Web 浏览器并转到 http://localhost:8080/web-app。当我这样做时，它会打开我创建的 index.html 网页。

但是，当我尝试在我的 Mac 上执行此操作时（打开 Eclipse，从我的闪存驱动器导入确切的项目），它给了我一个 Apache 错误，说“找不到请求的资源”。

有人知道我在这里做错了什么吗？如果您需要更多详细信息，请告诉我。在我的 Mac 上的 Eclipse 中，每当我尝试以...运行时，“在服务器上运行”选项不可用，就像在我的 Windows 笔记本电脑上一样。我必须手动转到“运行配置...在服务器上运行...apache tomcat 服务器...然后单击运行，然后什么也没有发生。”

# scripting - 将复制文件并将它们移动到另一个文件夹的脚本

> ID：13281885
> 
> 赞同：0
> 
> 时间：2012-11-08T03:18:59.840
> 
> 标签：scripting, batch-file

我知道这个问题似乎已经被问了一百万次，但我认为我的困境有点不同，我找不到任何符合我目的的东西。如果这已经被问到了，而我只是以某种方式错过了它，请让我参考那个问题。

我有三个文件需要从一个文件夹复制到另一个文件夹中，这些文件可能已经存在。

因此，例如`C:\Program Files\file.dll`需要移动到`C:\Program Files (x86)`可能`file.dll`已经存在的地方。我还需要将源文件保留在其目录中。

我知道这`MOVE [source][destination]`将从源中移动文件，这将删除它们。

我试过这个：

```
set source=C:\Program Files\file.dll
set destination=C:\Program Files (x86)\
xcopy %source% %destination% /y 
```

我在这里找到的：[如何编写一个将一个目录复制到另一个目录的批处理脚本，替换旧文件？](https://stackoverflow.com/questions/9904608/how-do-i-write-a-batch-script-that-copies-one-directory-to-another-replaces-old)

但我收到消息“参数数量无效”。

我错过了什么愚蠢的东西吗？有没有一种简单的方法可以做到这一点？即使是正确方向的提示也将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:33:43.270

如果路径中有空格，您可能需要：

```
xcopy "%source%" "%destination%" /y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-30T07:09:33.797

使用它将所有文件从源文件夹复制到目标。

这也可以在您的给定路径上添加新的洪水泛滥名称或将其复制到现有文件夹。

`powershell Copy-Item -Path "C:Source\floder" -Destination "C:\Destination" -Recurse`

# java - 代码永不终止

> ID：13281887
> 
> 赞同：0
> 
> 时间：2012-11-08T03:19:43.390
> 
> 标签：java, loops, while-loop, do-while

这是我的代码：

```
import java.util.Scanner;
import static java.lang.System.*;

public class GuessingGame
{
private int upperBound;
private int count, guess, num, pct;

public GuessingGame(int stop)
{
    upperBound = stop;
}

public void setNum(int stop)
{
    upperBound = stop;
}

public void playGame()
{
    int count = 0;
    int attempt = 1;
    Scanner keyboard = new Scanner(System.in);
    //upperBound = keyboard.nextInt();
     num = (int)Math.random()*upperBound;
     guess = 0;
     out.println("Enter a number between 1 and " + upperBound);
        guess = keyboard.nextInt();
        count++;
        if(guess != num)
            attempt++;
    do{
        out.println("Enter a number between 1 and " + upperBound);
        guess = keyboard.nextInt();
        count++;
        if(guess != num)
            attempt++;
    }while(guess != num);
     pct = (count/attempt)*100;

}

public String toString()
{
    String output="";
    output = "It took you " + count + " tries to guess " + num + "\n you guessed wrong " + pct + "% of the time";
    return output;
}
} 
```

我知道它必须在某些时候guess 必须等于 num 但代码永远不会结束当前的“游戏”但是当我使用我的示例 5 作为 stop/upperBound 时它似乎是无限循环的

这是我要求的跑步者课程：

```
import java.util.Scanner;
import static java.lang.System.*;

public class Lab10e
{
public static void main(String args[])
{
    Scanner keyboard = new Scanner(System.in);
    char response = ' ';

    out.print("Guessing Game - how many numbers? ");

    //read in the player value
    int stop = keyboard.nextInt();

    GuessingGame game = new GuessingGame(stop);
    game.playGame();
    out.println(game);
    out.println("would you like to play again? (y/n):: ");
    String resp =  keyboard.next();
    response = resp.charAt(0);

    do {
    out.print("Guessing Game - how many numbers? ");
    stop = keyboard.nextInt();
    game.setNum(stop);
    game.playGame();
    out.println(game);
    out.println();
    out.println("would you like to play again? (y/n):: ");
    resp =  keyboard.next();
    response = resp.charAt(0);
    //

}while(response == 'y'); 

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:31:50.597

您在这里有两个问题：首先，您的随机数将始终为零。换行

```
num = (int)Math.random()*upperBound; 
```

到

```
num = (int)(Math.random()*upperBound); 
```

你的第二个问题是，即使你在第一次尝试时猜对了，它总是会问你两次。这主要源于您复制并粘贴了您的猜测代码。如果您改为从代码中删除这些行，则不会发生这种情况（不是`do`循环内的行）：

```
 out.println("Enter a number between 1 and " + upperBound);
    guess = keyboard.nextInt();
    count++;
    if(guess != num)
        attempt++; 
```

此外，由于循环终止的方式，您不需要单独的`count`和`attempt`变量。您始终可以预测`attempt`变量将是什么（比`count`...大一，实际上，在您的程序中，它会大二，但这不是正确的猜测百分比）。您可以完全删除该`attempt`变量，而是执行

```
double countDouble = (double) count;
pct = (int) ((countDouble/(countDouble+1))*100.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:25:17.093

当你这样做时：

```
(int)Math.random()*upperBound; 
```

它将 Math.random() 转换为 a `int`，由于它是四舍五入的，它总是为零。因此 num 将始终等于 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T03:26:26.837

你需要

```
(int)(Math.random()*upperBound) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T04:01:18.117

从您的代码中`out.println("Enter a number between 1 and " + upperBound);`，我看到您想在 range 中创造`num`价值，`[1; upperBound]`但实际上是在 range中创造价值`[0, upperBound-1]`。

如果要从 1 到 N 随机数，请使用`(int) (Math.random()*N)+1`. 由于`Math.random()`将返回范围 [0; 1）（没有 1）`Math.random()*N`总是会返回`double`范围内的值`[0; N)`（没有 N），但是由于我们将它转`int`​​换为 range 将更改为`[0; N-1]`，所以要使它成为`[1; N]`你需要添加`1`到返回值。

# android - 多个列表项未显示

> ID：13281889
> 
> 赞同：0
> 
> 时间：2012-11-08T03:19:52.547
> 
> 标签：android, android-listview, android-fragments, listitem

为什么我运行我的应用程序时只显示一个列表项？！

这是我的 MainActivity 类的源代码。该应用程序很好地添加了一个列表项，但在那之后，它只是不显示其余的项目。

```
public class MainActivity extends BaseActivity {

    public static Context appContext;
    private final String TAG = "Main Activity";

    // LIST OF ARRAY STRINGS WHICH WILL SERVE AS LIST ITEMS
    ArrayList<String> listItems;

    // DEFINING STRING ADAPTER WHICH WILL HANDLE DATA OF LISTVIEW
    ArrayAdapter<String> adapter;

    Button addItem;
    ListView courseList;
    EditText input2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // ActionBar gets initiated
        ActionBar actionbar;
        actionbar = getSupportActionBar();
        // Tell the ActionBar we want to use Tabs.
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        // initiating both tabs and set text to it.
        ActionBar.Tab assignTab = actionbar.newTab().setText("Assignments");
        ActionBar.Tab schedTab = actionbar.newTab().setText("Schedule");
        ActionBar.Tab contactTab = actionbar.newTab().setText("Contact");

        // Create three fragments to display content
        Fragment assignFragment = new Assignments();
        Fragment schedFragment = new Schedule();
        Fragment contactFragment = new Contact();

        assignTab.setTabListener(new MyTabsListener(assignFragment));
        schedTab.setTabListener(new MyTabsListener(schedFragment));
        contactTab.setTabListener(new MyTabsListener(contactFragment));

        actionbar.addTab(assignTab);
        actionbar.addTab(schedTab);
        actionbar.addTab(contactTab);
        listItems = new ArrayList<String>();
        adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, listItems);
        addItem = (Button) findViewById(R.id.button1);
        courseList = (ListView) findViewById(R.id.listView1);
        input2 = (EditText) findViewById(R.id.editText1);
        addItem.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (!(input2.getText().toString()).equals("")) {
                    listItems.add(input2.getText().toString());
                    courseList.setAdapter(adapter);
                }
                input2.setVisibility(View.INVISIBLE);
                addItem.setVisibility(View.INVISIBLE);
            }
        });
        final Intent intent = new Intent(this, Detail.class);
        courseList.setOnItemClickListener(new     AdapterView.OnItemClickListener() {
                    @Override
                    public void onItemClick(AdapterView<?> arg0,     View arg1,
                            int arg2, long arg3) {
                        if (isTablet(MainActivity.this)) {

                        } else {
                            startActivity(intent);
                        }

                    }
                });
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.add_item:
            input2.setVisibility(View.VISIBLE);
            input2.requestFocus();
            addItem.setVisibility(View.VISIBLE);
            Log.i(TAG, "Add Clicked");
            return true;
        case R.id.calendar:
            Log.i(TAG, "Calendar Clicked");
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    public boolean isTablet(Context context) {
        boolean xlarge =     ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == 4);
        boolean large = ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE);
        return (xlarge || large);
    }
} 
```

这只发生在我动态添加片段之后。片段显示正常，但自从我在平板电脑视图中使列表项不可点击后，它们就不会出现。它与此有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:13:32.690

`adapter.notifyDataSetChanged()`将项目添加到列表后，您需要添加到代码中。另外请设置一次适配器 - 每次用户单击按钮时都无需执行该调用

# visual-studio - 在 Visual Studio 中打开一个文件夹

> ID：13281893
> 
> 赞同：69
> 
> 时间：2012-11-08T03:20:06.603
> 
> 标签：visual-studio, visual-studio-2012

我正在创建一个 Angular 项目，但我喜欢 Visual Studio 2012 的功能。我正在寻找在 Visual Studio 2012 中打开文件夹的选项（类似于 Sublime 文本中的“打开文件夹”选项），它将列出所有内容文件夹。目前，我正在 Windows 资源管理器中导航文件，并根据需要在 Visual Studio 中打开它们。

我能想到的选项之一是创建一个项目（例如控制台应用程序）并将这些文件和文件夹添加到其中，但我不会编译该项目。

只是想知道是否有更好的方法（我不知道的 VS 模板）或 VS 中某处的隐藏选项。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-11-08T17:53:23.767

解决方案
文件 -> 打开网站 -> 文件系统并选择文件夹。
没有额外的项目或解决方案文件。VS 只是按原样打开文件夹。

**即使在 Visual Studio 2017 社区中，此解决方案仍然有效**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-23T13:49:29.323

现在还有另一个选择，那就是使用 Visual Studio Code。它更轻量级，受 Microsoft 支持，非常适合包括 Angular 在内的 js 开发。

否则，在 Visual Studio 2017 中，现在可以直接打开文件夹：

[![打开文件夹](../Images/d08063cdd1465b57b6821f13647d9335.png)](https://i.stack.imgur.com/QgBwu.png)

您可以在[此处](https://www.visualstudio.com/en-us/news/releasenotes/vs2017-relnotes#open-folder)找到更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-28T14:29:26.003

关键是查看右侧并确保在底部您位于“解决方案资源管理器”选项卡上。您将看到那里列出的所有文件夹/代码文件。

# c++ - 实现二次机会需求页面替换算法

> ID：13281894
> 
> 赞同：0
> 
> 时间：2012-11-08T03:20:09.903
> 
> 标签：c++, visual-c++

我遇到的问题是它总是错过，而不是替换一个元素，而是用它拉入的整数填充每一帧。我很难弄清楚从这里去哪里。“requests.txt”是一个随机整数文件，示例输出应如下所示：

```
2: page hit, page 2 is in frame 8    
45: page hit, page 45 is in frame 2 
```

但我的看起来像：

```
99: page miss, page 99replaces page 0in frame 0
99: page miss, page 99replaces page 0in frame 1
99: page miss, page 99replaces page 0in frame 2
99: page miss, page 99replaces page 0in frame 3
99: page miss, page 99replaces page 0in frame 4
99: page miss, page 99replaces page 0in frame 5
99: page miss, page 99replaces page 0in frame 6
99: page miss, page 99replaces page 0in frame 7
99: page miss, page 99replaces page 0in frame 8
99: page miss, page 99replaces page 0in frame -1
4: page miss, page 4replaces page 0in frame 0
4: page miss, page 4replaces page 0in frame 1
4: page miss, page 4replaces page 0in frame 2
4: page miss, page 4replaces page 0in frame 3
4: page miss, page 4replaces page 0in frame 4
4: page miss, page 4replaces page 0in frame 5
4: page miss, page 4replaces page 0in frame 6
4: page miss, page 4replaces page 0in frame 7
4: page miss, page 4replaces page 0in frame 8 
```

代码：

```
#include <iostream>
#include <fstream>
#include <iomanip>

using namespace std;
void search(int input, int  P_list[], bool  R_bit[], int & victim);
int main()
{
//Basic initilization
int victim = 0;
bool R_bit [10];
int P_list [10];

 for(int i = 0; i <10;  i++)
 {
    //Sets one array to all false
    R_bit [i] = false;
    //Sets every integer in the other array to -1
    P_list [i] = -1;
 }

 int input;

 ifstream inFile;

 //Opens up the text file "requests.txt"
 inFile.open("requests.txt");
 //If It is not able to open the file
 if (!inFile)
 {
     //Display error message
    cout << "Unable to open specified file";
    //Exit with an error(1)
      exit(1);
 }

 while(inFile >> input )
 {
    if(input < 0)
    {
        cout << "invalid input ";
        exit(1);
    }
    else if(input > 99) 
    {
        cout << "invalid input ";
        exit(1);
    }
  //search array 2, replace and end
    search(input, P_list, R_bit, victim);

}       return 0;
}

void search(int input, int  P_list[], bool  R_bit[], int &victim)
{

//local var only unless you pass them  input is the only thing you passed
for(int i = 0; i <10; i++)
{

    if(input == P_list [i])
    {//Output if it is a hit

        cout << input << ": page hit, " << input << "is in frame " << i << endl;
        R_bit [i] = 1;

        return;
    }
    int oldpage;
    //Sets up a bool to end the while loop
    bool flag = true;
    //While true
    while(flag){
    //looks for the first 0 in the R-Bit array
    if (R_bit [victim] == 0)
    {
        //If it is zero
        flag = false;
        //Recording previous page for output 
        oldpage = R_bit [victim];
        //Replaces with input 
        R_bit [victim] = input;

        victim = victim + 1;

    }
    else
    {   //Makes the R-Bit zero
        R_bit [victim] = 0;
        //Increments, makes it zero
        ++victim;

    }
        //If the victim is going to go out of bounds
    if(victim > 9)
    {
        //Set to zero 
        victim = 0;
    }
    }

    //output if it misses and the frame it is in
    cout << input << ": page miss, page " << input << " replaces page " << oldpage << " in frame " << (victim - 1) << endl;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:50:23.080

您将 R_bit （最近的标志）与 P_list （保存的数据）混合在一起

```
 //Recording previous page for output 
    oldpage = R_bit [victim];
    //Replaces with input 
    R_bit [victim] = input; 
```

应该

```
 //Recording previous page for output 
    oldpage = P_list [victim];
    //Replaces with input 
    P_list [victim] = input; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:51:12.707

我认为，在您的搜索功能中，您从未设置 P_list[someIndex] 值。

我相信，这就是正在发生的事情：

1.  你打电话搜索第一个号码
2.  P_list 将没有它，因为您已将所有内容初始化为 -1
3.  所以你决定你将替换一些东西，但你永远不会将当前整数添加到 P_list

希望你能从这里开始。

# android - 安卓图片库

> ID：13281895
> 
> 赞同：1
> 
> 时间：2012-11-08T03:20:29.207
> 
> 标签：android, image, audio, gallery

我是 android 新手，正在创建一个图片库项目

我已经成功创建了一个旋转图片库

现在我想播放一个声音文件，但发生的事情是，一旦图像改变，音乐就会中断或停止

我试过用不同的线程播放音乐，但没有用。这是我的代码：

 `````
public class MainActivity extends Activity {
Timer timer;
TimerTask task;
int cnt = -1;
ImageView icon;        

String[] images = {"alienaquacamera", "alienaquadesktop","alienaquaexcel"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    icon = (ImageView) findViewById(R.id.img);        

    MediaPlayer mPlayer = MediaPlayer.create(MainActivity.this, R.raw.ghatotkach);
    mPlayer.start();

    final Handler mHandler = new Handler();

    // Create runnable for posting
    final Runnable mUpdateResults = new Runnable() {
        public void run() {
            changeImage();
        }
    };        

    timer = new Timer();

    task = new TimerTask() {

        @Override
        public void run() {
            mHandler.post(mUpdateResults);
        }
    };

    timer.schedule(task, 0, 3000);
}

public void changeImage(){

    ++cnt;

    if(cnt==images.length)
        cnt = 0;

    Resources res = getResources();

    String drawableName = images[cnt];

    int resID = res.getIdentifier(drawableName , "drawable", getPackageName());
System.out.println("cnt = " + cnt + " , image = " + drawableName + " , ID = " + resID);
    if(resID>0)
        icon.setImageResource(resID);
}
} 
```` 

`我无法理解出了什么问题``

# javascript - 如何保留添加到 jQuery 匹配集中的项目顺序？

> ID：13281897
> 
> 赞同：9
> 
> 时间：2012-11-08T03:21:02.093
> 
> 标签：javascript, jquery, html, dom

我正在尝试以特定顺序将元素添加到 jQuery 对象。但是，结果集的顺序与 DOM 树相同。例如：

```
<div>one</div>
<span>two</span>
<p>three</p>

...

var $result = $("span").add("p").add("div"); 
```

我想要一个结果集，其中 $result[0] 是跨度，$result[1] 是 p，依此类推。但是，它们的顺序与 DOM 中的相同。

除了 .add() 之外，还有其他方法可以像我想要的那样构建一个 jQuery 对象吗？

我知道我可以为它们分配一些数据属性来指定顺序，并以此对我的结果集进行排序。但是，这将需要在我的应用程序中发生数十次，并且每次都必须分配订单数据值和排序将非常难看，并且需要很长时间才能实现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T03:39:13.007

您可以使用本机`Array.push`：

```
$.fn.push = function(selector) {
    Array.prototype.push.apply(this, $.makeArray($(selector)));
    return this;
};

var $result = $("span").push("p").push("div"); 
```

演示：http: [//jsfiddle.net/ZUAcy/](http://jsfiddle.net/ZUAcy/)

您可能认为 jQuery 在幕后执行此操作，`add()`但它实际上从函数返回 pushStack 以优化其选择器：http: [//james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.add](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.add)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-31T14:07:48.100

这会起作用：

```
var $result = $([
    $('span')[0],
    $('p')[0],
    $('div')[0]
]); 
```

从[.add() 上的文档](https://api.jquery.com/add/#entry-longdesc)：

> 要创建具有**明确定义顺序**且没有排序开销的元素的 jQuery 对象，请使用`$(array_of_DOM_elements)`签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T13:31:02.523

以下代码生成的无序数组：

```
var $result = $("span").add("p").add("div"); 
```

应该使用以下代码行转换为有序数组：

```
var result=$("span").get().concat($("p").get(),$("div").get());
var $result=$(result); 
```

# php - 在 web 上显示来自 dBase 的 Big5 编码

> ID：13281899
> 
> 赞同：1
> 
> 时间：2012-11-08T03:21:05.867
> 
> 标签：php, encoding, odbc, dbase

我有一个dBase III文件，里面的中文是用Big5编码的。在 PHP ODBC 的帮助下，我可以从 dBase 文件中检索/插入记录。

但是，我无法正确显示中文单词（Big5）。

当我使用 mb_detect_encodingfunction 检测那些中文单词时，它显示为“UTF-8”。我猜 odbc 以“UTF-8”而不是原始编码（ASCII/Big5）的形式转储数据。

我想问一下，我怎样才能正确显示单词？非常感谢你的帮助。我为这个问题苦苦挣扎了 2 天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:05:34.727

您要确保源和显示均采用 UTF-8 格式，并且所有涉及数据的内容均采用 UTF-8 格式设置。

从你最确定的开始：检查数据库编码。您可以设置服务器范围的编码、数据库编码、表编码和列编码

接下来，检查处理它的 php .php 源文件本身应该是 UTF-8，标题和内容类型字符集等都应该设置为 UTF-8。

如果您将数据发送到其他地方，例如 javascript 或其他 php 页面进行处理，您还需要检查它们。小心任何外部库或流读取器/写入器，它们的编码无法由您控制。您与数据库建立的连接也可能会改变编码。

一旦您确定输出是 UTF-8 格式，您需要确保浏览器以 UTF-8 格式显示。您需要告诉浏览器这个网页的编码是什么，浏览器在标题定义中读取它。

祝你好运！

# python - 在不考虑零值的情况下使用 numpy 计算多个数组的平均值

> ID：13281904
> 
> 赞同：4
> 
> 时间：2012-11-08T03:21:25.917
> 
> 标签：python, arrays, numpy, average

我正在研究 numpy 并且我有许多具有相同大小和形状的数组，例如： `a= [153 186 0 258] b=[156 136 156 0] c=[193 150 950 757]` 我想要数组的平均值，但我希望程序忽略计算中的零值。因此，此示例的结果数组将是：`d=[167.333 157.333 553 507.5]` 这是此计算的结果：`d=[(153+156+193)/3 (186+136+150)/3 (156+950)/2 (258+757)/2]`。有可能这样做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T03:31:37.303

在 Python 中：

```
>>> a = [153, 186, 0, 258]
>>> b = [156, 136, 156, 0]
>>> c = [193, 150, 950, 757]
>>> import statistics
>>> [statistics.mean([x for x in s if x]) for s in zip(*[a, b, c])]
[167.33333333333334, 157.33333333333334, 553, 507.5] 
```

在 numpy 中：

```
>>> import numpy as np
>>> A = np.vstack([a,b,c])
>>> np.average(A, axis=0, weights=A.astype(bool))
array([ 167.33333333,  157.33333333,  553\.        ,  507.5       ]) 
```

如果列中的所有值都可能为零，则可能需要使用掩码数组来避免无法进行归一化的问题（权重之和不能为零）。输出中未定义的插槽将被屏蔽。

```
>>> a[0] = b[0] = c[0] = 0
>>> A = np.vstack([a,b,c])
>>> np.ma.average(A, axis=0, weights=A.astype(bool))
masked_array(data=[--, 157.33333333333334, 553.0, 507.5],
             mask=[ True, False, False, False],
             fill_value=1e+20)
>>> np.ma.average(A, axis=0, weights=A.astype(bool)).tolist()
[None, 157.33333333333334, 553.0, 507.5] 
```

# java - CometD - 如何在 tomcat jetty 中运行演示

> ID：13281910
> 
> 赞同：0
> 
> 时间：2012-11-08T03:21:49.533
> 
> 标签：java, spring, hibernate, cometd

我正在尝试在 CometD 中运行演示应用程序。我已经安装了 Maven。我已经按照[这里](http://docs.cometd.org/reference/#d0e117)的命令。在我的控制台中显示`[INFO] Starting scanner at interval of 1 seconds.` . 我去`http://localhost:8080/`看看 apache tomcat 主页，但我看不到任何项目。我怎么能看到那些项目。我想测试演示。请帮忙。

顺便说一句，下面是我运行命令`mvn jetty:deploy-war`启动码头服务器后控制台中显示的日志：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building CometD :: Demo 2.5.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] >>> jetty-maven-plugin:7.6.7.v20120910:deploy-war (default-cli) @ cometd-demo >>>
[INFO] 
[INFO] --- maven-enforcer-plugin:1.1.1:enforce (enforce-maven-version) @ cometd-demo ---
[INFO] 
[INFO] <<< jetty-maven-plugin:7.6.7.v20120910:deploy-war (default-cli) @ cometd-demo <<<
[INFO] 
[INFO] --- jetty-maven-plugin:7.6.7.v20120910:deploy-war (default-cli) @ cometd-demo ---
[INFO] Configuring Jetty for project: CometD :: Demo
[INFO] Context path = /
[INFO] Tmp directory = /home/tom/cometd-2.5.0/cometd-demo/target/tmp
[INFO] Web defaults = org/eclipse/jetty/webapp/webdefault.xml
[INFO] Web overrides =  none
2012-11-08 11:30:14.862:INFO:oejs.Server:jetty-7.6.7.v20120910
2012-11-08 11:30:15.311:INFO:oejpw.PlusConfiguration:No Transaction manager found - if your webapp requires one, please configure one.
2012-11-08 11:30:15.742:INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/home/tom/cometd-2.5.0/cometd-demo/target/tmp/webapp/},/home/tom/cometd-2.5.0/cometd-demo/target/cometd-demo-2.5.0.war
2012-11-08 11:30:16,026 main [ INFO][AnnotationCometdServlet] Processed annotated service org.cometd.examples.ChatService@1d91eb90
2012-11-08 11:30:16,027 main [ INFO][AnnotationCometdServlet] Registered annotated service org.cometd.examples.ChatService@1d91eb90 in servlet context
2012-11-08 11:30:16,105 main [ INFO][CometdDemoServlet] Monitored Subscribe from seti_51cw11a1uy7x5ygbmosqpdkirv - last connect 0 ms ago for /seti/http_localhost_8080_cometd
2012-11-08 11:30:16,109 main [ INFO][CometdDemoServlet] Monitored Subscribe from seti_51cw11a1uy7x5ygbmosqpdkirv - last connect 0 ms ago for /seti/all
2012-11-08 11:30:16,118 main [DEBUG][AuctionService] Mapping oortion#bids to /auction/*
2012-11-08 11:30:16,119 main [DEBUG][AuctionService] Mapping oortion#bid to /service/auction/bid
2012-11-08 11:30:16,119 main [DEBUG][AuctionService] Mapping oortion#bidder to /service/auction/bidder
2012-11-08 11:30:16,119 main [DEBUG][AuctionService] Mapping oortion#search to /service/auction/search
2012-11-08 11:30:16,119 main [DEBUG][AuctionService] Mapping oortion#category to /service/auction/category
2012-11-08 11:30:16,119 main [DEBUG][AuctionService] Mapping oortion#categories to /service/auction/categories
2012-11-08 11:30:16,122 main [DEBUG][AuctionChatService] Mapping chat#trackMembers to /auction/chat/**
2012-11-08 11:30:16,122 main [DEBUG][AuctionChatService] Mapping chat#privateChat to /service/auction/chat
2012-11-08 11:30:16.137:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080
[INFO] Started Jetty Server
[INFO] Starting scanner at interval of 1 seconds. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:08:33.133

日志显示[Jetty](http://eclipse.org/jetty)正确启动，我只是尝试了相同的指令，获得了相同的日志，当我将浏览器指向 localhost:8080 时，我可以看到[CometD](http://cometd.org)主页。

如果您看到不同的页面，那么您的浏览器可能已经缓存了它；尝试重新加载页面。

你做的一切都是正确的，我认为这只是浏览器积极缓存。

请注意，您发出的命令将启动 Jetty，而不是 Tomcat。

但是，您可以手动将 CometD 战争部署到 Tomcat 中，以使 CometD 在 Tomcat 中工作，尽管建议在 Jetty 中运行 CometD。

# java - MessageSource 始终返回默认消息

> ID：13281911
> 
> 赞同：5
> 
> 时间：2012-11-08T03:21:56.743
> 
> 标签：java, spring

我正在尝试在 Spring 中使用 MessageSource 注入文本消息。我编写的程序编译得很好，但它总是打印出默认消息，而不是从 .properties 文件中获取正确的值。我一点头绪都没有。

这是尝试注入文本的 Circle 类：

```
 @Component
    public class Circle implements Shape {

        @Resource
        private Point center;
        @Autowired
        private MessageSource messageSource;

        public MessageSource getMessageSource() {
            return messageSource;
        }

        public void setMessageSource(MessageSource messageSource) {
            this.messageSource = messageSource;
        }

        public Point getCenter() {
            return center;
        }

        public void setCenter(Point center) {
            this.center = center;
        }

        @Override
        public void draw() {
            System.out.println(this.messageSource.getMessage("greeting", null, "Default Greeting", null));
            System.out.println(this.messageSource.getMessage("draw.circle", new Object[] {center.getX(), center.getY()}, "Required Drawing", null));

        } 
```

这是 bean 配置文件的一部分：

```
...
    <bean id="center" class="java.awt.Point">
        <constructor-arg value="0" />
        <constructor-arg value="-20" />
    </bean>

    <bean id="messageSourse" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename">
                <value>messages</value>
        </property>
    </bean>

    <context:component-scan base-package="com.myproject.spring"/>

    <context:annotation-config/> 
```

我将问候语和 draw.circle 存储在 messages.properties 文件中并编写了一个主类。但输出总是：

```
Default Greeting  
Required Drawing 
```

有人知道我的情况可能会出什么问题吗？

**更新** 感谢您的建议。我正在调试，似乎这里出了点问题：

```
public String getMessage(String code, Object[] args, String defaultMessage, Locale locale) {
        if (this.parentMessageSource != null) {
            return this.parentMessageSource.getMessage(code, args, defaultMessage, locale);
        }
        else {
            return renderDefaultMessage(defaultMessage, args, locale);
        }
    } 
```

this.parentMessageSource 为 null，因此它决定呈现默认消息。但我仍然不太明白什么是 parentMesssageSource 以及它如何（不）为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-20T01:15:43.137

您必须使用**id="messageSource"**代替**id="messageSour *s* e"**。对于所有使用 Java 配置的，您必须将**“messageSource()”**作为方法名称

```
 @Bean
    public MessageSource messageSource() {
        ResourceBundleMessageSource resourceBundleMessageSource =
                new ResourceBundleMessageSource();
        resourceBundleMessageSource.setBasename(I18_PATH_TEMPLATE + "email_welcome");
        resourceBundleMessageSource.setDefaultEncoding("UTF-8");
        return resourceBundleMessageSource;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:31:09.943

可能 messageSource 无法选择您的消息文件。ResourceBundleMessageSource 已重写`toString()`方法来显示 messageResource 配置。尝试使用一次。您还可以`messageSource`在对象被注入后借助调试工具检查它是否已成功加载所有属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-10T01:28:00.930

你拼错了 bean id

你写的不是' **messageSource '，而是'** **messageSourse** '。

您必须有一个消息资源 bean 的 id，并且它应该始终是“messageSource”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-30T13:24:48.150

属性文件的扩展名应该是 .properties

# android - 应用程序被错误配置为使用 Release Key Hash 登录 Facebook

> ID：13281913
> 
> 赞同：3
> 
> 时间：2012-11-08T03:22:04.987
> 
> 标签：android, facebook

我已将 Facebook 集成到我的应用程序中。我在模拟器和我的设备 HTC 中使用调试密钥哈希测试了我的应用程序。当我为我签名的 APK 尝试释放密钥哈希时，“应用程序为 Facebook 登录配置错误”错误总是发生在我的设备 HTC One X 中。

**keytool -exportcert -alias android -keystore C:\android2012\android.keystore | openssl sha1 -二进制 | openssl base64**

我使用上述命令来生成 Release 密钥哈希。别名是“android”。输入密码后成功生成密钥哈希。这个密钥哈希被输入到 Facebook 仪表板，我试图在我签名的 APK 中访问，但它失败了。

任何人都可以帮忙吗？被这个错误困扰了几天。非常感谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T05:35:30.703

为什么在您测试它时它可以在模拟器甚至设备上运行，因为在从 eclipse 进行测试时，您使用的是*debug.keystore*而不是您的发布密钥。

遵循以下两种解决方案之一，您应该一切顺利。

**解决方案1：**

试试这个链接：[http](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1) ://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1 。我发现使用 Facebook 获取哈希键的方法并不总是像宣传的那样有效。但是，此链接具有获取哈希键的不同方法，并且几乎总是有效。

**解决方案2：**

话虽如此，我总是发现最简单的事情就是*让 Facebook SDK 告诉你你的 Hash Key 是什么*。这要简单得多，不应该超过几分钟。

第 1 步：在您的 Facebook SDK 中，找到*Util.java*类。在那，改变这个：

```
private static boolean ENABLE_LOG = false; 
```

至：

```
private static boolean ENABLE_LOG = true; 
```

第 2 步：创建一个**新**的签名 APK，传输到您的设备并安装。如果已经安装，自然会提示。

第 3 步：在您的 DDMS (Logcat) 运行并且您的设备连接到计算机的情况下，运行应用程序并继续寻找*密钥不匹配*警告。该警告具有**实际**的哈希键。复制该密钥，转到您的 Facebook 开发人员页面并将新密钥添加到列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:11:45.570

我在这个问题上被困了大约一个星期！我想为我自己的密钥库而不是 debug.keystore 生成哈希密钥。我已经尝试了网络上所有可能的解决方案...

最后我有了一个奇怪的理解：

keytool -exportcert -alias androiddebugkey -keystore [PATH_TO_KEYSTORE]\debug.keystore | [PATH_TO_OPENSSL]\openssl sha1 -binary | [PATH_TO_OPENSSL]\openssl base64

使用这种方法我被要求输入密码并收到一个哈希键（错误的）

此处提出的分三步的第二种方法[Facebook Android Generate Key Hash](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash/12405323#12405323)

keytool -exportcert -alias androiddebugkey -keystore [PATH_TO_KEYSTORE]\debug.keystore > [PATH_TO_OPENSSL]\debug.txt [PATH_TO_OPENSSL]\openssl sha1 -binary [PATH_TO_OPENSSL]\debug.txt > [PATH_TO_OPENSSL]\bin\debug_sha.txt [PATH_TO_OPENSSL ]\openssl base64 -in [PATH_TO_OPENSSL]\bin\debug_sha.txt > [PATH_TO_OPENSSL]\bin\debug_base64.txt

使用这种方法，我还被要求输入密码并收到不同的哈希键 = 正确的...

PS把你的别名而不是“androiddebugkey”和你的密钥库而不是“debug.keystore”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T00:30:53.250

我有这个问题两个月了。我的密钥哈希值一直高达 9。今天我终于找到了简单的解决方案：

**步骤1：**

在手机上安装从 facebook 开发者页面下载的 facebook sdk。不要安装普通的 facebook 应用程序。确保您可以登录 facebook。然后登出。

**第2步：**

使用您的最终发布密钥将您的应用导出为 apk，就像您将其上传到 Playstore 时一样。

**第 3 步：**

通过 USB 数据线或 USB 棒将 Apk 文件放在手机上。

**第4步：**

使用文件管理器安装您的应用程序：例如[https://play.google.com/store/apps/details?id=com.rhmsoft.fm](https://play.google.com/store/apps/details?id=com.rhmsoft.fm)

**第 5 步：**

启动您的应用程序并尝试使用 facebook 登录。将打开一个对话框并告诉您：“在 facebook 开发人员控制台中找不到密钥

**第 6 步：**

写下钥匙。

**第 7 步：**

将其放入您的 facebook 开发者控制台并保存。现在你完成了。下载您的应用程序并使用之前使用的密钥库发布的任何人都可以登录 facebook。

享受

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T11:02:18.463

出现此问题可能是因为我们使用的是“openssl-0.9.8k”版本。尝试使用以下链接中的“openssl-0.9.8e”或“openssl-0.9.8d”不同的版本：

> [https://code.google.com/p/openssl-for-windows/downloads/list](https://code.google.com/p/openssl-for-windows/downloads/list)

不会出现这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-12T13:20:50.877

Siddharth 的解决方案 2 有时在 Facebook SDK 3.0 及更高版本中是不可能的。使用以下代码在您的应用程序本身内烘烤正确的密钥哈希。

```
try {
            PackageInfo info =     getPackageManager().getPackageInfo("com.package.mypackage",     PackageManager.GET_SIGNATURES);
            for (Signature signature : info.signatures) {
                MessageDigest md = MessageDigest.getInstance("SHA");
                md.update(signature.toByteArray());
                String sign=Base64.encodeToString(md.digest(), Base64.DEFAULT);
                Log.e("MY KEY HASH:", sign);
                Toast.makeText(getApplicationContext(),sign,     Toast.LENGTH_LONG).show();
            }
} catch (NameNotFoundException e) {
} catch (NoSuchAlgorithmException e) {
} 
```

用你的包名替换 com.package.mypackage...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-04T00:52:52.373

要获取 openssl 路径，请按照以下步骤操作：

1.  以 zip 格式下载 Windows 的“openssl”
2.  在您想要的路径中提取zip。
3.  获取 zip 中“bin”文件夹的路径

而已

[https://sourceforge.net/projects/openssl/files/latest/download](https://sourceforge.net/projects/openssl/files/latest/download)

# c# - 如何从多个异步线程更新图表中的单个图形？

> ID：13281914
> 
> 赞同：0
> 
> 时间：2012-11-08T03:22:13.970
> 
> 标签：c#, wpf, multithreading, graph, charts

```
 Parallel.foreach(list<> , a=>  
    {  
    // do some operation  
         chart1.Series[0].Points.AddXY(x, y);  
    }); 
```

我想为并行调用的每个线程绘制不同的线。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:01:12.997

您可以通过与控件关联的调度程序执行此操作：

```
Parallel.ForEach(list, a=>  
{
    // do some operation 
    chart1.Dispatcher.Invoke(new Action(() => { chart1.Series[0].Points.AddXY(x, y); }));
}); 
```

# python - 在 Django 模板上渲染数组

> ID：13281916
> 
> 赞同：0
> 
> 时间：2012-11-08T03:22:24.787
> 
> 标签：python, django, templates, orm

我有以下观点

```
def deals(request):
    usr=UserProfile.objects.get(user_id=request.user.id)
    merchant=MerchantProfile.objects.get(user_id=usr.id)
    dealItems=MerchantDeal.objects.filter(merchant_id=merchant.id)
    stateText = {1 : 'Created',
                  2 : 'Activated',
                  3 : 'Completed'}

    return render_to_response('deals.html',locals(),context_instance=RequestContext(request)) 
```

在模型中，`MerchantDeal`我有一个字段 state_id，其中三个 id 分别为 created、completed 和 used

我有以下模板

```
<table>
                  <tr>
                    <th>Deals</th>
                    <th>Status</th>
                    <th>Start date </th>
                    <th>End date </th>
                    <th>Used</th>
                    <th>Edit</th>
                  </tr>
                  {% for Item in dealItems %}
                  <tr class="gray">
                    <td>{{Item.title|capfirst}} </td>
                    <td >{{Item.current_state}}</td>
                    <td>{{Item.start_date}}</td>
                    <td>{{Item.end_date}}</td>
                    <td width="90">{{Item.used}}</td>
                    <td width="92"><a class="ajax cboxElement" href="/ajax/item?id={{foodItem.id}}">edit</a></td>
                  </tr>
                  {%endfor%}
                </table> 
```

这是将 current_state 显示为 1、2、3 而不是 created、completed 和 used。我也定义了 stateText 数组

```
stateText = {1 : 'Created',
             2 : 'Activated',
             3 : 'Completed'} 
```

如何为来自数据库的 1,2,3 渲染它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T04:12:51.070

在您的`MerchantDeal`模型中：

```
STATE_CHOICES = ((1,'Created'),(2,'Activated'),(3,'Completed'))

class MerchantDeal(models.Model):
    # .. your various other fields
    current_state = models.IntegerField(choices=STATE_CHOICES) 
```

然后在您的模板中：

```
<td>{{ Item.get_current_state.display }}</td> 
```

[文档](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display)详细说明了这是如何工作的。

# c# - 在 Facebook 照片上传过程中捕获网络错误导致的异常

> ID：13281922
> 
> 赞同：0
> 
> 时间：2012-11-08T03:22:44.307
> 
> 标签：c#, wpf, multithreading, error-handling, facebook-c#-sdk

我已经将照片上传到 Facebook 活动页面，主要是按照本[教程](http://blog.prabir.me/post/Facebook-CSharp-SDK-Upload-Progress.aspx)进行的。到目前为止，结果令人满意，大部分时间都将照片上传到活动页面。但是，有时当程序正在上传照片，并且网络连接延迟或断开时，程序会崩溃并抛出`System.AggregateException`, 消息：

`A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread.`

通过初步检查，这个的InnerException是：

`[Facebook.WebExceptionWrapper]: {"The underlying connection was closed: An unexpected error occurred on a receive."}`

, 并且上述异常的 InnerException 是`System.IO.IOException`, 另一个`System.Net.Socket.SocketException`在 IOException 中, 其中, 两个错误消息都描述了类似的内容`{"An established connection was aborted by the software in your host machine"}`。

异常的 StackTrace 只给了我：

```
at System.Threading.Tasks.TaskExceptionHolder.Finalize() 
```

现在很明显，问题是由系统有时可能遇到的糟糕的网络连接引起的。[那么，根据本教程](http://blog.prabir.me/post/Facebook-CSharp-SDK-Upload-Progress.aspx)引用的代码，我如何或在哪里处理此异常？当这发生在另一个线程中时，我不知道应该将 try-catch 块放在哪里，或者在我看来是这样。

先谢谢了！

[教程](http://blog.prabir.me/post/Facebook-CSharp-SDK-Upload-Progress.aspx)中的参考代码：

```
var mediaObject = new FacebookMediaObject
                              {
                                  ContentType = "image/jpeg",
                                  FileName = Path.GetFileName(_filename)
                              }
                              .SetValue(File.ReadAllBytes(_filename));

var fb = new FacebookClient(_accessToken);
fb.PostCompleted += fb_PostCompleted;
fb.PostAsync("/me/photos", new Dictionary<string, object> { { "source", mediaObject } });

public void fb_PostCompleted(object sender, FacebookApiEventArgs e)
{
  if (e.Cancelled)
  {
    var cancellationError = e.Error;
    MessageBox.Show("Upload cancelled");
  }
  else if (e.Error == null)
  {
    // upload successful.
    MessageBox.Show(e.GetResultData().ToString());
  }
  else
  {
    // upload failed
    MessageBox.Show(e.Error.Message);
  }
} 
```

# windows-runtime - 在 WinRT 中，如何获取 listviewitem 中按钮的父级？

> ID：13281925
> 
> 赞同：2
> 
> 时间：2012-11-08T03:23:01.780
> 
> 标签：windows-runtime

我想获得一个按钮的 ListViewItem 。在普通 WPF 中，我会使用 GetContainerForItem() 但找不到 WinRT 的等价物。在我的 AddButton_Click() 函数中，您将看到我获取相关按钮被按下的项目 id 的脆弱方式。

```
<DataTemplate x:Key="Custom80ItemTemplate">
        <Grid Margin="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button Grid.Column="0" Width="40" Height="40" Click="AddButton_Click" Content="&#xE118;" FontFamily="Segoe UI Symbol" Style="{StaticResource TextButtonStyle}" />
            <StackPanel Grid.Column="1" Margin="10,0,0,0">
                <TextBlock Text="{Binding name}" Style="{StaticResource ItemTextStyle}" MaxHeight="40"/>
                <TextBlock Text="{Binding id}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap"/>
                <TextBlock Text="{Binding group}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap"/>
            </StackPanel>
        </Grid>
    </DataTemplate>

    <ListView x:Name="searchResultsListView" Grid.Row="1"
              SelectionMode="None" 
              HorizontalAlignment="Left" 
              Margin="10,0,10,10" 
              ItemTemplate="{StaticResource Custom80ItemTemplate}" />

    private async void AddButton_Click(object sender, RoutedEventArgs e)
    {
        var parent1 = ((FrameworkElement)sender).Parent;
        var grid = parent1 as Grid;
        var stackpanel = grid.Children[1] as StackPanel;
        var textBlock = stackpanel.Children[1] as TextBlock;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:52:51.703

为什么需要直接访问模板中的元素？如果您只想访问`id`单击项目的值，您可以将按钮的命令放在项目本身中：

```
public class ItemViewModel
{
    public string name { get; set; }
    public string id { get; set; }
    public string group { get; set; }

    public ICommand command { get; set; }

    public ItemViewModel
    {
        command = new RelayCommand(_ => OnClick());
    }

    private void OnClick()
    {
        // access id here
    }
} 
```

你可以在[这里](http://relaycommandrt.codeplex.com/)`RelayCommand`找到一个实现。

现在只需通过绑定替换事件处理程序`command`：

```
<Button Grid.Column="0" Width="40" Height="40" Command="{Binding command}" Content="&#xE118;" FontFamily="Segoe UI Symbol" Style="{StaticResource TextButtonStyle}" /> 
```

# javascript - 如何检测儿童滚动？

> ID：13281931
> 
> 赞同：0
> 
> 时间：2012-11-08T03:23:39.390
> 
> 标签：javascript, jquery

我们可以看到滚动事件不会在`overflow:scroll`元素上传播，如下所示：

[http://jsfiddle.net/vnXm6/](http://jsfiddle.net/vnXm6/)

我们如何**从父元素**中检测`scroll`子元素上的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:45:10.333

### 使用此代码：

```
$("#parent > #child").on("scroll", function(){
   console.log('scrolling'); 
}); 
```

你可以看到控制台输出，是这样的：

```
scrolling
scrolling
scrolling
scrolling
scrolling
scrolling 
```

### 小提琴：http: [//jsfiddle.net/dZ24z/](http://jsfiddle.net/dZ24z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:50:39.507

我明白你的意思，新的 .live 替代品不适用于滚动。这是一个狡猾的解决方法！

```
$("#parent").on("mouseover", function(){

    $('#parent > *').on('scroll', function(){
       console.log('scrolling');
     });
}); 
```

[**修订小提琴**](http://jsfiddle.net/videsignz/HTUTA/2/)

# css - 当内容太大时使div滚动

> ID：13281932
> 
> 赞同：12
> 
> 时间：2012-11-08T03:23:53.833
> 
> 标签：css, html, scroll

![在此处输入图像描述](../Images/4604f11ad88024856610752b5b3930d0.png)

我有这个设置，其中结果包装在跨度标签中，并使用 jquery 将其“移动”到其他 div 中。目前搜索最多只返回 30 个值，这一切都很好，但我不认为这是一个公平的限制。我想要做的是在结果超出显示范围时滚动 div，例如列表框。我尝试了许多不同的方法，但似乎没有一个效果很好。我也希望它保持固定的高度

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-08T03:27:39.987

你没有在这里分享任何标记，但如果你愿意有一个固定的高度，只需使用它

```
.container {
   /* Optional - You can set a  min-height : whatever px; for reserving some space*/
   height: 200px; /* Fix a height here */
   overflow: auto; /* Optionally you can also use overflow: scroll; */
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-11T11:27:37.890

除了@mr-alien 回答：您可以使用`max-height`来限制容器的大小，同时使其适合内容：

```
.container {
   /* Optional - You can set a  min-height : whatever px; for reserving some space*/
   max-height: 200px; /* Fix a max-height here */
   overflow: auto; /* Optionally you can also use overflow: scroll; */
} 
```

# vb.net - Visual Basic 2010 清除图片框

> ID：13281935
> 
> 赞同：0
> 
> 时间：2012-11-08T03:24:24.737
> 
> 标签：vb.net, visual-studio-2010

我试图在 Visual Basic Studio 2010 中构建一个简单的扑克游戏。当我单击 btnShuffle 时，我将五个图像占位符分配给卡片的默认背面

```
btnShuffle_onClick......

    picFlop1.Image = My.Resources.BlankCard    //saved in my resources folder
    picFlop2.Image = My.Resources.BlankCard    //and so on and so on...

end sub 
```

然后在我的 btnDeal 卡中，我尝试了所有版本的 picFlop1.Dispose()、picFlop1.Image = Nothing... 等等，但似乎没有任何东西可以擦除空白图像。我尝试跳过清除步骤并只是在空白卡上写下实际的人脸卡，但似乎没有显示扔了最初的空白卡..任何帮助都会很棒..

```
btnDeal_onClick...

   //find first five cards on deck and assign them by overwrite/delete blank card

   picflop1.Image = My.Resource.SomeCard  //Does Not Work
   picFlop1.Image.Dispose()     //Does Not Work
   picFlop1.Image = Nothing     //Does Not Work

end sub 
```

***更新***

我正在分配这些空白卡……不是在洗牌功能中，而是在 timer1 间隔功能中……这与它有什么关系吗？上面列出的方法在 btnReset_onClick 中工作

_马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:41:04.663

怎么样？

```
PictureBox1.Image = New Image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:41:22.943

假设 picFlip 是一个 PictureBox，您是否在设置新图像后尝试过 Invalidate() 和 Update()？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T04:12:59.503

很好地呼吁仔细查看计时器@LarsTech ..

显然，如果你不停止计时器，它会不断踢出代码来显示卡片的背面。所有其他代码都运行良好，只是在计时器前看不到它......谢谢大家。 . 一如既往.. 你最好的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T15:05:08.107

你必须

```
 PictureBox.Image = null 
```

之后，您可以设置新图像

# java - 如何设置 JTableHeader 外观和颜色

> ID：13281938
> 
> 赞同：1
> 
> 时间：2012-11-08T03:24:38.123
> 
> 标签：java, swing, background-color, look-and-feel, jtableheader

这是我的第一篇文章，所以任何关于如何使我的文章更好的建议都会很棒！

在这个网站的研究帮助下，我能够生成一个表格，我可以更改其字体、更改对齐方式并保持当前的外观和感觉。但是，我不能更改颜色并且不确定该怎么做。任何建议将不胜感激！

创建 JTable 后，我调用：

table.getTableHeader().setDefaultRenderer(new HeaderRenderer(table));

```
private class HeaderRenderer implements TableCellRenderer {

    DefaultTableCellRenderer renderer;

    public HeaderRenderer(JTable table) {
        setOpaque(true);//this is an attempt to change color
        renderer = (DefaultTableCellRenderer)
            table.getTableHeader().getDefaultRenderer();
        renderer.setHorizontalAlignment(JLabel.CENTER);
    }

    @Override
    public Component getTableCellRendererComponent(
        JTable table, Object value, boolean isSelected,
        boolean hasFocus, int row, int col) {
        Component cell = renderer.getTableCellRendererComponent(
                table, value, isSelected, hasFocus, row, col);

        setBackground(headerColor);//this is an attempt to change color
        //cell.setBackground(headerColor);//this is an attempt to change color
        cell.setFont(headerFont);//this successfully changes font
        return cell;
    }
} 
```

谁能指出我的方向或帮助我创建一个可以着色、居中并具有“Nimbus”外观和感觉的表头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:14:17.760

所有 Nimbus 属性都作为键存储在 UIManager 的默认表中。您可以检索和修改这些值中的任何一个，以自定义应用程序的外观。[此](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html)页面列出了所有 Nimbus 默认值

# javascript - Knockout.js 子对象仅在更新父对象并将值设置为子对象时更新

> ID：13281952
> 
> 赞同：3
> 
> 时间：2012-11-08T03:26:45.140
> 
> 标签：javascript, knockout.js

一、jsfiddle链接[http://jsfiddle.net/wenbert/m5pHs/36/](http://jsfiddle.net/wenbert/m5pHs/36/)

```
<button data-bind="click: addHero">Add Hero With Meta</button>

<ul data-bind="foreach: heroes">
    <li class="parent" data-bind="ifnot: isDeleted">
        <input class="big-box" type="text" data-bind="value: name" />
        <button class="btn-small" data-bind="click: $parent.removeHero">Remove Hero</button>
        <br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<button class="btn-small" data-bind="click: $parent.addMeta">Add Meta</button>
        <div class="child" data-bind="template: { name: 'checkbox-template' }"></div>
    </li>
</ul>

<script type="text/html" id="checkbox-template">
    <ul data-bind="foreach: meta">
        <li data-bind="ifnot: isDeleted">
            <input class="child-item blue" type="text" data-bind="value: name" />: 
            <input class="child-item small" type="text" data-bind="value: damage" />
            <button class="btn-small" data-bind="click: $parent.removeMeta">Remove Meta</button>
            <br/>
        </li>
    </ul>
</script>

<pre data-bind="text: ko.toJSON($data, null, 2)"></pre>
​ 
```

**Javascript**

```
var initialData = [
    {
        name: "Batman",
        isDelete: false,
        meta: [
            { name: "Belt", damage: "99", isDeleted: false },
            { name: "Gun", damage: "104", isDeleted: false}
        ]
    },
    {
        name: "Hulk",
        isDelete: false,
        meta: [
            { name: "Pants", damage: "1", isDeleted: false }
        ]
    },
];

function Hero(data) {
    var self = this;
    self.name = ko.observable(data.name);
    self.meta = ko.observableArray(data.meta);
    self.isDeleted = ko.observable(data.isDeleted);
}

function Meta(data) {
    var self = this;
    self.name= ko.observable(data.name);
    self.damage= ko.observable(data.damage);
    self.isDeleted = ko.observable(data.isDeleted);
}

function SuperheroViewModel() {
    var self = this;
    self.heroes = ko.observableArray();
    self.heroes.meta = ko.observableArray();

    self.heroes.push(new Hero(initialData[0]));
    self.heroes.push(new Hero(initialData[1]));

    self.addHero = function() {
        self.heroes.push(
            new Hero({
                name: 'Wolverine',
                isDelete: false,
                meta: [new Meta({name: 'Claws', damage: '200', isDeleted: false})]
            })
        );
        /*
        //Using something like this also does not enable me to update the child items when adding.
        self.heroes.push(new Hero(initialData[1])
        );*/
    }

    self.addMeta = function(item) {
        item.meta.push(new Meta({name: '--', damage: '0', isDeleted: false}));
    }

    self.removeHero= function(item) {
        item.isDeleted(true);
    }

    self.removeMeta = function(item) {
        item.isDeleted(true);
    }

}

ko.applyBindings(new SuperheroViewModel()); 
```

​<strong>长什么样子

![输出](../Images/184139475933cc4dd82a39823c01c9da.png)

**什么有效：**

1.  添加英雄
2.  移除英雄（通过设置`isDeleted`为 true）
3.  添加元
4.  更新英雄名称会更新调试视图中的数据

**什么不起作用：**

1.  删除 Meta - 我无法将其设置`meta.isDeleted`为 true
2.  Meta *(EG: Belt, Gun, Pants)*，当您更改文本框中的值时不会更新。但是，如果您编辑 Meta，然后编辑父级，则 Meta 会更新。看起来只有在更新父项时才会触发子项。

**明白了**

1.  如果您添加了一个新英雄然后编辑了 Meta，即使没有更新父项，它们也会自动更新。

**所以2个问题：**

1.  如何使用我的 jsfiddle 中的内容设置子对象的值？[http://jsfiddle.net/wenbert/m5pHs/36/](http://jsfiddle.net/wenbert/m5pHs/36/)
2.  子项更新时如何触发更新？现在，子项更新仅在您同时更新父项时触发*（例如：蝙蝠侠、绿巨人）*

更新：似乎子项没有更新，因为它们是使用`initialData array`.

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T05:35:16.453

好的，考虑一下[这个 fiddle](http://jsfiddle.net/tyrsius/BFhP3/1/)中的变化，它有效，我认为它更干净。

我会分解我所做的

首先，我`data`通过 viewmodels 构造函数传入，以便它可以重用：

```
ko.applyBindings(new SuperheroViewModel(initialData)); 
```

接下来，`heroes`使用映射构造数组，这样无论传入数据的大小如何，它都会填充：

```
self.heroes = ko.observableArray(ko.utils.arrayMap(data, function(i){
    return new Hero(i);
})); 
```

我还将`meta`构造移动到英雄对象中，因为`meta`它是 的子对象`heroes`，而不是根视图模型：

```
self.meta = ko.observableArray(ko.utils.arrayMap(data.meta, function(i){
        return new Meta(i);
    })); 
```

由于`hero`构造函数处理`meta`构造，`addHero`函数不再需要，所以它的`meta`行看起来与 initialData 行相同：

```
meta: [{name: 'Claws', damage: '200', isDeleted: false}] 
```

最后，我将`add/remove`元函数移到了`hero`视图模型中。这更有意义，它解决了尝试使用`$parent`from的范围问题`meta`。

如果您有任何问题，请告诉我。

# c# - 如何将用户控件文本框中的文本绑定到文本块中？

> ID：13281957
> 
> 赞同：1
> 
> 时间：2012-11-08T03:27:32.027
> 
> 标签：c#, wpf, data-binding, user-controls

我创建了一个用户控件文本框，我想将文本块绑定到我在用户控件的文本框中键入的内容。我尝试了一些代码，但它不起作用。有谁能教我？谢谢

我的用户控件文本框：

```
<Grid  Background="Silver" Style="{StaticResource EntryFieldStyle}"  Width="175" Height="25" Margin="0" >          
    <TextBox Name="watermarkTextBox" Background="Green"   />    
</Grid> 
```

我的xml代码：

```
<StackPanel Orientation="Horizontal">
      <UserControls:WatermarkTextBox x:Name="usernameArea"/>
      <TextBlock Text="{Binding ElementName=usernameArea Path=watermarkTextBox.Text}"  FontSize="13" Foreground="White"/> 
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:17:18.853

**Edit2**：一种方法是使用依赖属性以及实现 INotifyPropertyChanged。

将会发生的是，每次文本框的文本发生更改时，我们都会触发 PropertyChangedEvent。Window 窗口将通过访问 WatermarkTextBox 的 WatermarkText 依赖属性来订阅此事件。

这是它的外观：

* * *

WatermarkTextbox.xaml：

```
<TextBox Name="watermarkTextBox" ...
         TextChanged="watermarkTextBox_TextChanged"/> 
```

WatermarkTextbox.xaml.cs：

```
public partial class WatermarkTextBox : UserControl, INotifyPropertyChanged
{
    ...
    public static readonly DependencyProperty WatermarkTextProperty =
        DependencyProperty.Register("WatermarkTextProperty", typeof(String),
        typeof(WatermarkTextBox), new PropertyMetadata(null));

    public String WatermarkText
    {
        get { return watermarkTextBox.Text; }
        set { OnPropertyChanged("WatermarkText"); }
    }
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string name)
    {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
     }
     private void watermarkTextBox_TextChanged(object sender, TextChangedEventArgs e)
     {
           WatermarkText = this.watermarkTextBox.Text;
     }

} 
```

[主窗口].xaml：

```
 <TextBlock Text="{Binding ElementName=usernameArea Path=WatermarkText}" .../> 
```

添加[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)本质上允许您在用户控件中公开值以在 XAML 中进行修改（以及通常的绑定）。

* * *

您可能还想将 的`Foreground`（文本颜色）属性更改为`TextBlock`比白色更暗的东西，因为默认情况下，`Background`是白色的。

# javascript - Mozilla Ace：文本鼠标悬停反应

> ID：13281959
> 
> 赞同：0
> 
> 时间：2012-11-08T03:27:37.520
> 
> 标签：javascript, ace-editor

我想在某些突出显示的元素上使用带有鼠标悬停反应的 Mozilla Ace。就像文本的工具提示，或者，例如，查看[Dabblet](http://dabblet.com)上的颜色鼠标悬停。我只想了解如何在 Ace 中制作类似的回调函数并使用它们。那么，如何才能达到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:18:50.940

诀窍是一些CSS规则：

```
.ace_layer * {
    pointer-events:none !important;
}

.ace_constant {
    pointer-events:auto !important;
} 
```

看[这个小提琴](http://jsfiddle.net/khela/VxfRj/)

# c++ - GDI 与 Direct2D

> ID：13281964
> 
> 赞同：16
> 
> 时间：2012-11-08T03:28:52.750
> 
> 标签：c++, winapi, direct2d

我现在正在编写一个模拟程序，我想将我的应用程序从使用 GDI 移植到使用 Direct2D。但是我的 Direct2D 代码比我的 GDI 代码慢得多。

我在屏幕上渲染了很多椭圆。在我的 GDI 应用程序中，我绘制到内存设备上下文，然后使用 BitBlt 在 Windows 设备上下文上绘制。使用 Direct2D，我在 ID2D1HwndRenderTarget 上绘图。

我的问题是，当使用 GDI 时，我可以轻松绘制 400 多个椭圆并且仍然有 400 FPS。当我用 Direct2D 做相同数量的椭圆时，我的 FPS 下降到 30FPS。

我已经关闭了抗锯齿，但它并没有真正帮助。有趣的是，与 GDI 相比，在 Direct2D 中仅绘制几个椭圆会更快。我可以做些什么来提高 Direct2D 的性能，还是应该让我的应用程序继续使用 GDI？

这是我使用 GDI 绘制的代码：

```
VOID Begin() {
    SelectObject(this->MemDeviceContext, this->MemoryBitmap);
    this->BackgroundBrush = CreateSolidBrush(this->BackgroundColor);
    HBRUSH OldBrush = (HBRUSH)SelectObject(this->MemDeviceContext, this->BackgroundBrush);
    Rectangle(this->MemDeviceContext, -1, -1, 801, 601);
    SelectObject(this->MemDeviceContext, OldBrush);
    DeleteObject(this->BackgroundBrush);
    SetViewportOrgEx(this->MemDeviceContext, 400, 300, &this->OldOrigin);
}
VOID End() {
    SetViewportOrgEx(this->MemDeviceContext, this->OldOrigin.x, this->OldOrigin.y, 0);
    BitBlt(this->DeviceContext, 0, 0, 800, 600, this->MemDeviceContext, 0, 0, SRCCOPY);
} 
```

在我的 Begin 和 End 函数之间，我以标准 GDI 方式绘制椭圆。

这是我使用 Direct2D 的开始和结束函数：

```
VOID BeginDrawing() {
    this->RenderTarget->BeginDraw();
    RenderTarget->Clear(D2D1::ColorF(D2D1::ColorF::CornflowerBlue));
    RenderTarget->SetTransform(this->ScalingMatrix * this->TranslateMatrix);
}
VOID EndDrawing() {
    this->RenderTarget->EndDraw();
} 
```

下面是我设置 Direct2D 接口的方法。一切都在课堂上；这就是为什么我不能发布完整的代码：

```
 if(D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &Direct2DFactory) != S_OK)
        throw std::runtime_error("RENDERWINDOW::InitializeDirect2D: Failed to create a factory interface.");
    RECT WindowRect;
    memset(&WindowRect, 0, sizeof(RECT));
    GetClientRect(this->WndHandle, &WindowRect);
    D2D1_SIZE_U WindowSize = D2D1::SizeU(WindowRect.right, WindowRect.bottom);
    Direct2DFactory->CreateHwndRenderTarget(D2D1::RenderTargetProperties(D2D1_RENDER_TARGET_TYPE_HARDWARE), 
    D2D1::HwndRenderTargetProperties(this->WndHandle, WindowSize, D2D1_PRESENT_OPTIONS_IMMEDIATELY), &RenderTarget); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-22T22:01:19.050

首次尝试 Direct2D 的一个常见错误是开发人员没有正确缓存 D2D 资源，而是过于频繁地创建和销毁资源。如果所有椭圆的大小都相似，则应创建并缓存此椭圆对象一次。如果您有 30 种不同的尺寸/形状，请为所有 30 种尺寸/形状创建一次椭圆版本。这显着加快了 Direct2D。矩形和所有其他基元也是如此。如果原语存在太多变化，则缩放缓存对象与重复创建/销毁也是某些场景的解决方案，尽管使用其本机大小的资源是理想的，并且存储卡有相当多的内存来存储您的资源。

Gdi 椭圆看起来非常糟糕，直接使用 Direct3D 相当复杂，特别是对于椭圆、大多边形和更高级别的图元。通过正确使用 Direct2D，您应该能够获得良好的速度和高质量的渲染。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T05:04:26.203

前段时间，由于性能低下，我拒绝将渲染代码从 GDI 迁移到 Direct2D。据我从谷歌了解到，Direct2D 性能取决于驱动程序和硬件优化，您不应该期望在不同硬件上具有相同的速度。GDI 已经很老了，几乎在所有地方都能正常工作。

必须说我已经尝试使用它来绘制简单的几何图元，而 Direct2D 似乎是更强大的库，并且在复杂场景中可能会提高性能，但这不是我的情况。

如果您需要更高质量的 GDI 性能 - 尝试直接使用 OpenGL 或 Direct3D。

这是一个相关的问题： [TDirect2DCanvas 是慢还是我做错了什么？](https://stackoverflow.com/questions/4055456/is-tdirect2dcanvas-slow-or-am-i-doing-something-wrong)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-11T10:04:51.367

我正在研究 d2d。基本上它比 gdi 快 2 倍或 3 倍，如果你坚持基本绘图的话。画线，矩形，椭圆，.. 像 RenderTarget->DrawLine。在全球范围内，直接在渲染目标上绘图比 gdi 快 2 倍 3 倍。也不要忘记使用 d2d 后备缓冲区而不是 hwnd。这与使用 gdi 位图 backbuffer 的过程完全相同，但使用的是 direct2d 资源。

如果你想使用高级的 d2d 对象，比如几何，这是另一回事。

例如，如果不创建该矩形的变换几何实例，就无法移动矩形。

D2D 资源是不可变的，尽管它们在 cpu 级别进行管理，但您不能修改源形状并仅绘制它。您必须为每个平移、旋转创建此形状的副本......

如果您使用诸如绘画之类的应用程序绘图，这不是一个大问题……但是如果您想使用具有大量形状、鼠标点击测试、缩放、滚动等的实时系统……那么这可以给表演中的一个漏洞。

在我的测试中，我（在调试模式下）大约需要 0.5 秒来转换/翻译源几何图形 1000000 次。

代码测试示例：

```
void TestGeometryPerf() { //1000000 = 0.35s/0.45s (in msvc 2019 debug mode)
    ID2D1RectangleGeometry *r;
    ID2D1TransformedGeometry *t;
    D2D1_RECT_F rect = D2D1::RectF(0, 0, 1, 1);
    D2D1::Matrix3x2F matrix = D2D1::Matrix3x2F::Translation(10,10);

    //create geometry source
    m_factory->CreateRectangleGeometry(rect, &r);

    for(int x = 0; x < 1000000; x++) {

        //create a transformed geometry from geometry source
        m_factory->CreateTransformedGeometry(r, matrix, &t);
        if( t->Release() != 0) {
            throw;
        }

    }
    if( r->Release() != 0) {
        throw;
    }
} 
```

# android - 在构建 OpenCV4Android 示例时找不到“ld”错误

> ID：13281965
> 
> 赞同：2
> 
> 时间：2012-11-08T03:29:02.613
> 
> 标签：android, opencv, android-ndk, cross-compiling

尝试使用 ndk-build 在 OpenCV for Android Samples (2.4.3) 中构建 libdetection_based_tracker 时，出现以下错误，教程 3 和教程 4 出现类似错误。

```
SharedLibrary  : libdetection_based_tracker.so 
collect2: cannot find 'ld'
make: *** [obj/local/armeabi-v7a/libdetection_based_tracker.so] Error 1 
```

我不知道这个错误指的是哪个 ld，我正在运行 archlinux x64 安装。

# javascript - 如何使用 jquery 从 Web 浏览器获取 cookie

> ID：13281968
> 
> 赞同：-4
> 
> 时间：2012-11-08T03:29:24.550
> 
> 标签：javascript, jquery, cookies, browser, session-cookies

我需要使用 jquery 从 Web 浏览器获取 cookie 意味着来自浏览器的所有 cookie 不是由我当前的脚本/页面/域生成的，因为我需要访问由其他网站生成的 cookie

请帮帮我，因为我已经尝试过使用 javascript 和 jquery 但没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:32:46.567

`document.cookie`在javascript中尝试。仅适用于同一域。您不能从不同的站点访问 cookie。

# javascript - 保存时将值返回给 BackBone.js

> ID：13281970
> 
> 赞同：2
> 
> 时间：2012-11-08T03:29:43.573
> 
> 标签：javascript, jquery, backbone.js

所以我正在使用backbone.js，并且我正在尝试保存一个模型。在服务器端，我正在为接收到的模型生成一个 GUID，并且我正在返回该 GUID，以便模型在客户端拥有它。

我的功能就是这样

```
 this.save({},
        {
            success: function (model, response) {
                alert(response);
            },
            error: function (model, response) {
                alert(response)
            }
        }); 
```

它将对象发送到服务器，它从帖子中返回我想要的值。它返回一个 ( `HTTP/1.1 200 OK`) 但它调用错误函数（其中有我正确的返回值）任何想法为什么？

我在控制台中做了以下

```
JSON.stringify(response)
"{"readyState":4,"responseText":"5dad212e-73bf-4e01-911a-397b81f77022","status":200,"statusText":"OK"}" 
```

所以它正在取回 200 和 guid 但没有成功......我真的不想只使用错误功能，因为这不是应该触发的：p

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T06:14:37.877

查看您的`resposneText`，似乎服务器没有返回可接受的响应 - 不是正确的`json`对象。使服务器返回响应，例如，

```
{ 
  "guid" : "id_to_be_returned" //, 
  // and other attributes to be added in the model 
} 
```

并将响应类型设为`json`。它应该工作。

# java - Calculator GUI ActionPerformed 方法，并包装另一个类

> ID：13281971
> 
> 赞同：0
> 
> 时间：2012-11-08T03:29:56.570
> 
> 标签：java, swing, user-interface, wrapper

我正在尝试将计算器 GUI 包装在我构建的类上，以便以不同的方式计算值（不是正常的方式，以反向波兰表示法）。

我只想知道两件事：

1）如何编写我的 actionPerformed 方法，以便当您单击按钮或操作时，它会显示在显示屏中

2）我如何使用带有计算方法的GUI（比如如何制作它，以便当你按下GUI上的所有数字或运算符时，它会在我的计算类中注册）。基本上如何将 GUI 包裹起来？

**编辑，我编辑了我的代码，但是当它编译时它给了我一个空指针异常，怎么会？

到目前为止我的 GUI 类：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class GUI extends JFrame implements ActionListener
{
JPanel buttonPanel, topPanel, operationPanel;
JTextField display;

doMath math = new doMath();

JButton Num1;
JButton Num2;
JButton Num3;
JButton Num4;
JButton Num5;
JButton Num6;
JButton Num7;
JButton Num8;
JButton Num9;
JButton Num0;

JButton Add;
JButton Sub;
JButton Mult;
JButton Div;
JButton Eq;
JButton Clr;
public GUI()
{
    super("Calculator");
    setSize(400,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new GridLayout (2,1));

    buttonPanel = new JPanel();        
    buttonPanel.setLayout(new GridLayout(4, 4));
    buttonPanel.add(Num1 = new JButton("1"));
    buttonPanel.add(Num2 = new JButton("2"));
    buttonPanel.add(Num3 = new JButton("3"));
    buttonPanel.add(Num4 = new JButton("4"));
    buttonPanel.add(Num5 = new JButton("5"));
    buttonPanel.add(Num6 = new JButton("6"));
    buttonPanel.add(Num7 = new JButton("7"));
    buttonPanel.add(Num8 = new JButton("8"));
    buttonPanel.add(Num9 = new JButton("9"));
    buttonPanel.add(Num0 = new JButton("0"));        
    buttonPanel.add(Clr = new JButton("C"));
    buttonPanel.add(Eq = new JButton("="));
    buttonPanel.add(Add = new JButton("+"));
    buttonPanel.add(Sub = new JButton("-"));
    buttonPanel.add(Mult = new JButton("*"));
    buttonPanel.add(Div = new JButton("/"));

    Num1.addActionListener(this);
    Num2.addActionListener(this);
    Num3.addActionListener(this);
    Num4.addActionListener(this);
    Num5.addActionListener(this);
    Num6.addActionListener(this);
    Num7.addActionListener(this);
    Num8.addActionListener(this);
    Num9.addActionListener(this);
    Num0.addActionListener(this);
    Clr.addActionListener(this);
    Eq.addActionListener(this);
    Add.addActionListener(this);
    Sub.addActionListener(this);
    Mult.addActionListener(this);
    Div.addActionListener(this);

    topPanel = new JPanel();         
    topPanel.setLayout(new FlowLayout());
    topPanel.add(new JTextField(20));
   //jtfResult.setHorizontalAlignment(JTextField.RIGHT);
   // jtfResult.setEditable(false);  

    add(mainPanel);

    mainPanel.add(topPanel, BorderLayout.NORTH);
    mainPanel.add(buttonPanel, BorderLayout.SOUTH);

    setVisible(true);

}

public void actionPerformed(ActionEvent e) 
{
     if(e.getSource() == Num1)
    {
        s += "1";
        display.setText(s);
    }
    if(e.getSource() == Num2)
    {
        s += "2";
        display.setText(s);
    }
    if(e.getSource() == Num3)
    {
        s += "3";
        display.setText(s);
    }
    if(e.getSource() == Num4)
    {
        s += "4";
        display.setText(s);
    }
    if(e.getSource() == Num5)
    {
        s += "5";
        display.setText(s);
    }
    if(e.getSource() == Num6)
    {
        s += "6";
        display.setText(s);
    }
    if(e.getSource() == Num7)
    {
        s += "7";
        display.setText(s);
    }
    if(e.getSource() == Num8)
    {
        s += "8";
        display.setText(s);
    }
    if(e.getSource() == Num9)
    {
        s += "9";
        display.setText(s);
    }
    if(e.getSource() == Num0)
    {
        s += "0";
        display.setText(s);
    }
    if(e.getSource() == Add)
    {
        s += "+";
        display.setText(s);
    }
    if(e.getSource() == Sub)
    {
        s += "-";
        display.setText(s);
    }
    if(e.getSource() == Mult)
    {
        s += "*";
        display.setText(s);
    }
    if(e.getSource() == Div)
    {
        s += "/";
        display.setText(s);
    }
    if(e.getSource() == Eq)
    {
        String result = "" + math.doMath1(s);
        display.setText(result);
    }

}
} 
```

我的计算类（按预期工作，只需要知道如何将我的 GUI 包装在它上面）：

```
public class doMath
{
Stack stack = new Stack();

String next = "";

public doMath()
{

}

public int doMath1(String expr)
{
    while( expr.length()  >0) //for(int i = 0; i < expr.length(); i++)
{              
    if(expr.length() == 0)
        return 0;
    if(expr.indexOf(" ")>0)
    {
        next = expr.substring(0,expr.indexOf(" "));

        if(next.equals("+"))
            stack.push(stack.pop() + stack.pop());
        else if(next.equals("-"))
        {
            int x = stack.pop();
            stack.push(stack.pop()- x);
        }
        else if(next.equals("*"))
            stack.push(stack.pop() * stack.pop());
        else if(next.equals("/"))
        {
            int x = stack.pop();
            stack.push(stack.pop()/ stack.pop());
        }
        else 
        stack.push(new Integer(Integer.parseInt(next)));         
         expr = expr.substring(expr.indexOf(" ")+1);
    }        
}

    return stack.pop();
}    
} 
```

**错误：**

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at GUI.actionPerformed(GUI.java:126)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1849)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2169)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:420)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:258)
at     javax.swing.plaf.basic.BasicButtonListener.
    mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:5517)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3129)
at java.awt.Component.processEvent(Component.java:5282)
at java.awt.Container.processEvent(Container.java:1966)
at java.awt.Component.dispatchEventImpl(Component.java:3984)
at java.awt.Container.dispatchEventImpl(Container.java:2024)
at java.awt.Component.dispatchEvent(Component.java:3819)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4212)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3892)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3822)
at java.awt.Container.dispatchEventImpl(Container.java:2010)
at java.awt.Window.dispatchEventImpl(Window.java:1791)
at java.awt.Component.dispatchEvent(Component.java:3819)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:463)
at         java.awt.EventDispatchThread.pumpOneEventForHierarchy
    (EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForHierarchy
    (EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:110) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:56:18.973

从您的代码中，您似乎有一个可行的模型。

基本上你需要在`ActionListener`每个按钮上附加一个。在你的情况下，我会使用同一个监听器的单个实例......

```
ActionListener calculatorActionHandler = new CalculatorActionHandler();
Num1.addActionListener(calculatorActionHandler); 
```

在这个处理程序中，我将获取按钮的文本并将它们连接在一起

```
public class CalculatorActionHandler implements ActionListener {
    private StringBuilder expression = new StringBuilder(32);
    private Gui gui;

    public CalculatorActionHandler(Gui gui) {
        this.gui = gui;
    }

    public void actionPerformed(ActionEvent e) {
        JButton source = (JButton)e.getSource();
        String text = source.getText();
        if (text.equals("=")) {
            doMath math = new doMath();
            int result = math.doMath1(expression.toString());
            expession = new StringBuilder(32);
            // Update the UI
        } else {
            expession.append(text);
            // Update this value to the screen, maybe using a JLabel
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:59:43.103

通过实现 ActionListener，您有了一个良好的开端。

您需要添加

```
addActionListener(this) 
```

给你的每一个`JButton`s。

然后对于每个按钮，您都需要一个 if 语句，或者在这种情况下可能使用 switch 会更好，但它应该如下所示：

```
String text = "";

....

if(e.getSource() == Num1)
{
    text += "1"
    display.setText(text);
}

/*continue this pattern for the other
  buttons, adding the character to the 
  text string */ 
```

对于您的等号按钮，`doMath`在输入的表达式上调用方法并将结果写入显示器。

上面的代码可能有错误，你应该参考我在上面评论中发布的链接。

# ruby-on-rails-3 - 在 Ruby on Rails 中关闭会话并重定向到登录

> ID：13281973
> 
> 赞同：7
> 
> 时间：2012-11-08T03:30:13.297
> 
> 标签：ruby-on-rails-3, session-timeout

我正在使用`session[:hash_name]`ruby​​ on rails 来保存会话信息，例如用户名和内容。

我正在尝试找到一种方法来使此会话到期而无需用户注销。特别是在两种情况下：一段时间后它需要过期以及当用户关闭浏览器时。

到目前为止，我发现[了另一个](http://www.tutorialspoint.com/ruby-on-rails/rails-session-cookies.htm)参数`cookies[:hash_name]`，它可以在一段时间后过期。但我不确定如何在每个用户请求中检查此参数，然后调用 reset_session。重置会话后，我需要将用户重定向到登录页面。

非常感谢解决这两个问题的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T06:30:47.723

您可以将会话存储在 cookie 中，该 cookie 默认为会话 cookie（意味着当用户关闭浏览器时它会消失），并使用`:expire_after`.

这可以在`config/initializers/session_store.rb`. 例如：

```
Yourapp::Application.config.session_store :cookie_store, 
                                         key: 'your_session_id',
                                         expire_after: 45.minutes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:37:43.930

好吧，我很确定如果你运行`session.delete(:hash_name)`它会破坏会话，但是强烈建议你不要尝试构建自己的身份验证系统，特别是当你需要花费几个小时来构建最基本的功能时，而预构建的解决方案可以在 20 分钟内安装。不仅如此，预建解决方案的安全性可能是您自己制作的任何解决方案的两倍，因为它已经过无数开发人员的测试和测试。

我强烈建议使用设计进行身份验证。使用 devise 您可以获得诸如 之类的方法`sign_out(current_user)`，这显然会注销发出请求的用户。看看[devise的github页面](https://github.com/plataformatec/devise)

只需`gem install devise`将其添加到您的 gemfile 中，然后运行

`rails g devise:install User # or whatever model name`

他们处理其余的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T11:11:16.877

我猜您正在使用自己的自定义身份验证方法。因此，对于场景 1（即一段时间后会话到期），您可以执行类似于以下给出的操作：

```
def create_session
  if session[:hash_key]
    destroy_session if session[:last_login] < 10.minutes.ago
    session[:last_login] = Time.now
  else
    ... authenticate
    session[:last_login] = Time.now
  end
end

def destroy_session
  reset_session
end 
```

对于方案 2（即在浏览器关闭时），您可以调用使用 jquery 事件处理程序，并且可以执行以下操作：

```
$('window').unload(function(){
  //call to destroy session method
}); 
```

# c - 如何获取远程计算机的本地网络IP地址

> ID：13281974
> 
> 赞同：4
> 
> 时间：2012-11-08T03:30:21.297
> 
> 标签：c, network-programming, ip

远程计算机有两个地址：**LAN**和**VPN**

我尝试通过以下代码获取**LAN** IP 地址：

```
hostent *host = gethostbyname(hostname);
if (host) strcpy(ip, inet_ntoa(*((struct in_addr *)host->h_addr))); 
```

因此，有时它返回**LAN**，但有时返回**VPN**。我知道 h_addr_list 字段中有很多地址，但是我怎么知道哪个地址是本地的？

我尝试使用 GetAdaptersInfo()，它具有确定本地 IP 的字段，但只返回我计算机的 IP 地址。我不知道如何获取远程计算机的 ip。

谁给我一些建议，拜托！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:18:24.790

根据您的问题，您声明您可以获得计算机的局域网 IP 并获得远程计算机的 IP，无论是局域网还是 VPN。要确定远程计算机上的哪个 IP 在您的局域网上，您可以使用子网测试，我当然假设您的 VPN 在不同的子网上，您基本上可以测试您计算机 ip 的前 2-3 个八位字节是否匹配远程ip的2-3个八位字节。这是我能想到的唯一方法。

因此，如您所说，循环访问远程 IP，您可以获得它们并根据您计算机八位字节的本地 IP 地址检查它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:51:00.613

在解决了这个问题之后，我意识到远程字符串上的适配器由于安全问题而不能公开。因此，我们没有确切的方法来知道哪个 IP 地址是 VPN。

此外，VPN 地址是由 VPN 服务器创建的。因此，该 VPN 地址可以是任何东西，甚至类似于我们的本地 IP。换句话说，我们无法以任何方式猜测 VPN 地址。

# wpf - UserControl 上的依赖属性有什么方法可以在值更改时在其视图模型上执行命令？

> ID：13281975
> 
> 赞同：0
> 
> 时间：2012-11-08T03:30:48.447
> 
> 标签：wpf, mvvm, prism

假设有一个具有依赖属性（某个对象的集合）的 UserControl - 无论如何，当设置依赖属性时，自动执行视图模型公开的命令而不破坏封装并以“MVVM 方式”执行此操作?

是的，我知道我总是可以连接属性更改的静态处理程序，将对象转换为我的用户控件的实例，获取数据上下文，将其转换为视图模型并手动调用命令

编辑：也许一个例子会有所帮助。我的 UserControl 有一个“ItemsSource”依赖属性..我希望它可以设置为 ObjectA 的集合。我有一个“Items”依赖属性，它只能是可获取的，并且是 ObjectB 的集合。

我想要这样的行为，如果我设置 ItemSource，我的 ObjectAs 集合将由视图模型一对一地转换为 ObjectB，并且 Items 依赖属性将自动反映这一点。

为此，我需要一个只写的 ItemsSource 和一个只读的 Items 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:04:39.323

只是为了说清楚：

*   **您希望控件**上有一个只写的 DependencyProperty *ItemsSource*
***   您希望控件的**ViewModel**上有一个只读的 Dependency-Property *Items****   *项目*应返回转换后的版本并反映*ItemsSource的更改*****

 ****如果这是您想要的，那将是一个解决方案：

*   将 ItemsSource-Property 添加到与控件中相同类型的 ViewModel
*   双向绑定到控件的 DP
*   *在 ViewModel 的ItemsSource*属性的 Set-accessor 中，使用*ItemsSource*元素的转换版本填充*Items集合*
**   *为Items*属性触发 OnPropertyChanged*

 **在这种情况下，Control 和 ViewModel 的ItemsSource*是可读的。据我所知，只写 DP 是不可能的：

[SO Thread 关于只写 DP](https://stackoverflow.com/questions/1315186/how-can-i-create-a-custom-write-only-dependency-property "SO Thread 关于只写 DP")

但是，这种方法无论如何都应该有效。

希望这会有所帮助，干杯...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T07:12:52.640

如果你使用`ObservableCollection`你可以使用它的`CollectionChanged`事件。

视图模型：

```
 private ObservableCollection<object> _Objects
  public ObservableCollection<object> Objects
  {
    get { return _Objects; }
    set { _Objects = value; 
           OnPropertyChanged(new PropertyChangedEventArgs("Objects"));
     }
  }

  Objects.CollectionChanged+= new System.Collections.Specialized.NotifyCollectionChangedEventHandler(Objects_CollectionChanged); 

 void Objects_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {

    } 
```*****

# c# - 多个 ConsoleKey 变量

> ID：13281978
> 
> 赞同：0
> 
> 时间：2012-11-08T03:31:21.323
> 
> 标签：c#, console-application

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Text;

namespace LearningKeys
 {
class Program
{
    static void Main(string[] args)
    {       

       while (true)
            {     

            ConsoleKeyInfo Menu;
            Menu = Console.ReadKey(true);

            Console.WriteLine("1\. Pick Item");
            Console.WriteLine("2\. Display all Items");
            Console.WriteLine("3\. Pick Special Item");
            Console.WriteLine("4\. Quit");

            if (Menu.Key == ConsoleKey.Backspace)
            {
                Console.WriteLine("1\. Pick Item");
                Console.WriteLine("2\. Display all Items");
                Console.WriteLine("3\. Pick Special Item");
                Console.WriteLine("4\. Quit");

            }

            ConsoleKeyInfo DisplayAllItems;
            DisplayAllItems = Console.ReadKey(true);

           if (DisplayAllItems.Key == ConsoleKey.D1)
            {
                Console.WriteLine("1\. Mushrooms \n2\. Sword \n3.Boots"); 

            }

            Console.Read();

            break;

            }
     }
   }
} 
```

您好，我想知道为什么当我将 ConsoleKeyInfo 变量放在上面时，为什么我的前 4 个 Console.WriteLine 会消失。或者为什么当我分配了多个控制台键时程序无法运行？我确定这是因为 Console.ReadKey(); 但我不确定还能使用什么。我只是在学习 ConsoleKeys。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:42:52.277

Console.ReadKey 阻塞意味着程序将挂起，直到您按下一个键。您没有看到写入行，因为程序正在等待密钥

它与您拥有多少 ConsoleKeyInfo 变量无关。

# c# - “远程服务器返回错误：（400）错误请求。” 当我向 Quickbooks 添加新客户时..

> ID：13281979
> 
> 赞同：0
> 
> 时间：2012-11-08T03:31:25.933
> 
> 标签：c#, asp.net, quickbooks

我得到了“远程服务器返回错误：（400）错误请求。” 当我向 Quickbooks 添加新客户时.. 以下代码不起作用.. 为什么？

```
string Results = string.Empty;
        string requestUrl = null;
        requestUrl = "https://apps.quickbooks.com/j/AppGateway";

        HttpWebRequest WebRequestObject = null;
        StreamReader sr = null;
        HttpWebResponse WebResponseObject = null;
        StreamWriter stwr = null;

        try
        {
            WebRequestObject = (HttpWebRequest)WebRequest.Create(requestUrl);
            WebRequestObject.Method = "POST";
            WebRequestObject.ContentType = "application/x-qbxml";
            WebRequestObject.AllowAutoRedirect = false;
            string post = @"<?xml version=""1.0"" encoding=""utf-8""?>
<?qbxml version=""6.0""?>
<QBXML>
<SignonMsgsRq>
<SignonDesktopRq>
<ClientDateTime>%%CLIENT_DATE_TIME%%</ClientDateTime>
<ApplicationLogin>mydvqbapp.www.ipx2.com</ApplicationLogin>
<ConnectionTicket>TGT-142-6jCkNfIvWB$7Aw_ppW14jA</ConnectionTicket>
<Language>English</Language>
<AppID>APP_ID</AppID>
<AppVer>1</AppVer>
</SignonDesktopRq>
</SignonMsgsRq>
<QBXMLMsgsRq onError=""stopOnError"">
<CustomerAddRq>
<CustomerAdd> <!-- required -->
<Name >Sample Name</Name> <!-- required -->
<IsActive >True</IsActive> <!-- optional -->
<ClassRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</ClassRef>
<ParentRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</ParentRef>
<CompanyName >Sample CompanyName</CompanyName> <!-- optional -->
<Salutation >Mr</Salutation> <!-- optional -->
<FirstName >Sam Firstname</FirstName> <!-- optional -->
<MiddleName ></MiddleName> <!-- optional -->
<LastName >Sam LastName</LastName> <!-- optional -->
<JobTitle ></JobTitle> <!-- optional -->
<BillAddress> <!-- optional -->
<Addr1 >Sam Add1</Addr1> <!-- optional -->
<Addr2 >Sam Add2</Addr2> <!-- optional -->
<Addr3 ></Addr3> <!-- optional -->
<Addr4 ></Addr4> <!-- optional -->
<Addr5 ></Addr5> <!-- optional -->
<City ></City> <!-- optional -->
<State ></State> <!-- optional -->
<PostalCode ></PostalCode> <!-- optional -->
<Country ></Country> <!-- optional -->
<Note ></Note> <!-- optional -->
</BillAddress>
<ShipAddress> <!-- optional -->
<Addr1 ></Addr1> <!-- optional -->
<Addr2 ></Addr2> <!-- optional -->
<Addr3 ></Addr3> <!-- optional -->
<Addr4 ></Addr4> <!-- optional -->
<Addr5 ></Addr5> <!-- optional -->
<City ></City> <!-- optional -->
<State ></State> <!-- optional -->
<PostalCode ></PostalCode> <!-- optional -->
<Country ></Country> <!-- optional -->
<Note ></Note> <!-- optional -->
</ShipAddress>
<ShipToAddress> <!-- must occur 0 - 50 times -->
<Name >Test</Name> <!-- required -->
<Addr1 ></Addr1> <!-- optional -->
<Addr2 ></Addr2> <!-- optional -->
<Addr3 ></Addr3> <!-- optional -->
<Addr4 ></Addr4> <!-- optional -->
<Addr5 ></Addr5> <!-- optional -->
<City ></City> <!-- optional -->
<State ></State> <!-- optional -->
<PostalCode ></PostalCode> <!-- optional -->
<Country ></Country> <!-- optional -->
<Note ></Note> <!-- optional -->
<DefaultShipTo ></DefaultShipTo> <!-- optional -->
</ShipToAddress>
<Phone ></Phone> <!-- optional -->
<AltPhone ></AltPhone> <!-- optional -->
<Fax ></Fax> <!-- optional -->
<Email ></Email> <!-- optional -->
<Cc ></Cc> <!-- optional -->
<Contact ></Contact> <!-- optional -->
<AltContact ></AltContact> <!-- optional -->
<AdditionalContactRef> <!-- must occur 0 - 8 times -->
<ContactName ></ContactName> <!-- required -->
<ContactValue ></ContactValue> <!-- required -->
</AdditionalContactRef>
<Contacts> <!-- optional, may repeat -->
<Salutation ></Salutation> <!-- optional -->
<FirstName ></FirstName> <!-- required -->
<MiddleName ></MiddleName> <!-- optional -->
<LastName ></LastName> <!-- optional -->
<JobTitle ></JobTitle> <!-- optional -->
<AdditionalContactRef> <!-- must occur 0 - 5 times -->
<ContactName ></ContactName> <!-- required -->
<ContactValue ></ContactValue> <!-- required -->
</AdditionalContactRef>
</Contacts>
<CustomerTypeRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</CustomerTypeRef>
<TermsRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</TermsRef>
<SalesRepRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</SalesRepRef>
<OpenBalance ></OpenBalance> <!-- optional -->
<OpenBalanceDate ></OpenBalanceDate> <!-- optional -->
<SalesTaxCodeRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</SalesTaxCodeRef>
<ItemSalesTaxRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</ItemSalesTaxRef>
<ResaleNumber ></ResaleNumber> <!-- optional -->
<AccountNumber ></AccountNumber> <!-- optional -->
<CreditLimit ></CreditLimit> <!-- optional -->
<PreferredPaymentMethodRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</PreferredPaymentMethodRef>
<CreditCardInfo> <!-- optional -->
<CreditCardNumber ></CreditCardNumber> <!-- optional -->
<ExpirationMonth ></ExpirationMonth> <!-- optional -->
<ExpirationYear ></ExpirationYear> <!-- optional -->
<NameOnCard ></NameOnCard> <!-- optional -->
<CreditCardAddress ></CreditCardAddress> <!-- optional -->
<CreditCardPostalCode ></CreditCardPostalCode> <!-- optional -->
</CreditCardInfo>
<!-- JobStatus may have one of the following values: Awarded, Closed, InProgress, None [DEFAULT], NotAwarded, Pending -->
<JobStatus ></JobStatus> <!-- optional -->
<JobStartDate ></JobStartDate> <!-- optional -->
<JobProjectedEndDate ></JobProjectedEndDate> <!-- optional -->
<JobEndDate ></JobEndDate> <!-- optional -->
<JobDesc ></JobDesc> <!-- optional -->
<JobTypeRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</JobTypeRef>
<Notes ></Notes> <!-- optional -->
<AdditionalNotes> <!-- optional, may repeat -->
<Note ></Note> <!-- required -->
</AdditionalNotes>
<!-- PreferredDeliveryMethod may have one of the following values: None [Default], Email, Fax -->
<PreferredDeliveryMethod >ENUMTYPE</PreferredDeliveryMethod> <!-- optional -->
<PriceLevelRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</PriceLevelRef>
<ExternalGUID ></ExternalGUID> <!-- optional -->
<CurrencyRef> <!-- optional -->
<ListID ></ListID> <!-- optional -->
<FullName ></FullName> <!-- optional -->
</CurrencyRef>
</CustomerAdd>
<IncludeRetElement ></IncludeRetElement> <!-- optional, may repeat -->
</CustomerAddRq>
</QBXMLMsgsRq>
</QBXML>";
            post = post.Replace("%%CLIENT_DATE_TIME%%", DateTime.Now.ToString("yyyy-MM-ddTHH:mm:ss"));

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.LoadXml(post);
            post = xmlDoc.InnerXml;
            WebRequestObject.ContentLength = post.Length;
            stwr = new StreamWriter(WebRequestObject.GetRequestStream());
            stwr.Write(post);

            stwr.Close();
            WebResponseObject = (HttpWebResponse)WebRequestObject.GetResponse();
            sr = new StreamReader(WebResponseObject.GetResponseStream());
            Results = sr.ReadToEnd();
        }
        finally
        {
            try
            {
                lblMethod.Text = Results;
                sr.Close();

            }
            catch(Exception ex)
            {
                lblMethod.Text = "Error:<br/>" + ex.Message;
            }

            try
            {
                WebResponseObject.Close();
                WebRequestObject.Abort();
                lblMethod.Text = lblMethod.Text + "Sucessfully Connected";
            }
            catch (Exception ex)
            {
                lblMethod.Text = "Error:<br/>" + ex.Message;
            }
        }
    } 
```

在上面的编码中，我得到了一个错误位置，“WebResponseObject = (HttpWebResponse)WebRequestObject.GetResponse();”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:27:08.277

您的 qbXML 远非 QuickBooks Online 有效。

如果您参考 QuickBooks OSR：http: [//developer.intuit.com/qbsdk-current/common/newosr/index.html](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)

以及 QuickBooks SDK 文档： [https ://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/010_qb](https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/010_qb)

您会注意到 QuickBooks Online*仅支持 qbXML 6.0 版*。您尝试使用的许多功能都来自较新版本的 qbXML。例如：

*   附加联系方式
*   邮寄到地址

此外，QuickBooks Online 甚至根本不支持您使用的许多功能。例如：

*   信用卡信息

确保将 OSR 设置为 6.0，并且*仅选中“OE”复选框*。

这是一个工作请求的示例： [http ://wiki.consolibyte.com/wiki/doku.php/quickbooks_qbxml_customeradd_with_parent](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_qbxml_customeradd_with_parent)

# javascript - 在 Knockout 模板绑定中嵌套视图模型

> ID：13281982
> 
> 赞同：0
> 
> 时间：2012-11-08T03:31:42.213
> 
> 标签：javascript, knockout.js, template-engine

我有一个淘汰模板，它成功地将内容添加到我的页面。我想要发生的是绑定在添加的模板内的另一个淘汰视图模型。

这不是我最好的例子，但是当您尝试在敲除模板中添加`text/javascript`节点时，它生动地展示了 javascript 。`text/html`

[http://jsfiddle.net/hYYPr/2/](http://jsfiddle.net/hYYPr/2/)

当模板被添加到 DOM 时，我尝试的一种不太成功的方法甚至不执行内部的 javascript。

关于如何完成类似事情的任何想法或例子？或者完全是另一种方法？

# objective-c - 比较 switch 语句中的数字

> ID：13281983
> 
> 赞同：0
> 
> 时间：2012-11-08T03:31:42.227
> 
> 标签：objective-c, ios, xcode, switch-statement

我需要比较 switch 语句中的 int ，但我不确定我是如何输入错误的。这是我的代码：

```
switch (y) {
    case int y isgreater(1, 411):
       // case code here... 
```

为了简化我想要的，在 VB 中，代码将是：

```
Case >= 411:
  'Code here for case 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:40:52.403

Objective-C 等基于 C 的语言不支持这种语法。只需使用一个`if`语句：

```
if (y >= 411) {
    // do stuff
} 
```

在`switch`语句中，每个`case`值都必须是离散常数。

```
switch (expression) {
    case 5:
        // stuff
        break;
    case 12:
        // stuff
        break:
    default:
        // stuff
        break;
} 
```

# wcf - 在 Castle Windsor 中注册 WCF 服务组件

> ID：13281988
> 
> 赞同：3
> 
> 时间：2012-11-08T03:32:41.337
> 
> 标签：wcf, dependency-injection, castle-windsor, ioc-container, castle

我还没有找到其他人遇到这个问题，所以我假设发生这种情况是我自己的错。当谈到 WCF 和 Castle Windsor IoC 容器时，我非常绿色，所以这可能是发生这种情况的第一个原因。无论如何，我已经为此苦苦挣扎了几天，还没有找到原因。

首先，我使用 Castle Windsor 注册了我的服务。

```
var baseUri = new Uri("http://localhost:49246");

_container = new WindsorContainer();

var returnFaults = new ServiceDebugBehavior
{
    IncludeExceptionDetailInFaults = true,
    HttpHelpPageEnabled = true
};
var metadata = new ServiceMetadataBehavior { HttpGetEnabled = true };

_container.Register(
    Component.For<IServiceBehavior>().Instance(returnFaults),
    Component.For<IServiceBehavior>().Instance(metadata));

var baseUri = new Uri("http://localhost:49246");

_container = new WindsorContainer();

var returnFaults = new ServiceDebugBehavior
{
    IncludeExceptionDetailInFaults = true,
    HttpHelpPageEnabled = true
};
var metadata = new ServiceMetadataBehavior { HttpGetEnabled = true };

_container.Register(
    Component.For<IServiceBehavior>().Instance(returnFaults),
    Component.For<IServiceBehavior>().Instance(metadata));

_container
    .Register(
        Component
            .For<IAccountDataAccessor>()
                .ImplementedBy<AccountDataAccessor>(),
        Component
            .For<IInstitutionDataAccessor>()
                .ImplementedBy<InstitutionDataAccessor>(),
        Component
            .For<IRelationshipDataAccessor>()
                .ImplementedBy<RelationshipDataAccessor>(),
        Component
            .For<ITransactionDataAccessor>()
                .ImplementedBy<TransactionDataAccessor>()

    );

_container.AddFacility<WcfFacility>(f => { f.CloseTimeout = TimeSpan.Zero; });
_container.Register(
    Component
        .For<IAccountDataService>()
        .ImplementedBy<AccountDataService>()
        .Named("AccountDataService")
        .LifeStyle.Is(Castle.Core.LifestyleType.Singleton)
        .AsWcfService(new DefaultServiceModel()
            .AddBaseAddresses(baseUri)
            .AddEndpoints(WcfEndpoint
                .ForContract(typeof(IAccountDataService))
                .BoundTo(new WSHttpBinding()))),
    Component
        .For<IInstitutionDataService>()
        .ImplementedBy<InstitutionDataService>()
        .Named("InstitutionDataService")
        .LifeStyle.Is(Castle.Core.LifestyleType.Singleton)
        .AsWcfService(new DefaultServiceModel()
            .AddBaseAddresses(baseUri)    
            .AddEndpoints(WcfEndpoint
                .ForContract(typeof(IInstitutionDataService))
                .BoundTo(new WSHttpBinding()))),
    Component
        .For<IRelationshipDataService>()
        .ImplementedBy<RelationshipDataService>()
        .Named("RelationshipDataService")
        .LifeStyle.Is(Castle.Core.LifestyleType.Singleton)
        .AsWcfService(new DefaultServiceModel()
            .AddBaseAddresses(baseUri)
            .AddEndpoints(WcfEndpoint
                .ForContract(typeof(IRelationshipDataService))
                .BoundTo(new WSHttpBinding()))),
    Component
        .For<ITransactionDataService>()
        .ImplementedBy<TransactionDataService>()
        .Named("TransactionDataService")
        .LifeStyle.Is(Castle.Core.LifestyleType.Singleton)
        .AsWcfService(new DefaultServiceModel()
            .AddBaseAddresses(baseUri)    
            .AddEndpoints(WcfEndpoint
                .ForContract(typeof(ITransactionDataService))
                .BoundTo(new WSHttpBinding())))); 
```

现在，当我尝试获取 AccountDataService 的服务参考时，它工作正常，没有错误。但是，当我尝试添加对机构数据服务的服务引用时，它会抛出一个异常：

```
 Could not find a component with name InstitutionDataService, did you forget to register it? 
```

这非常令人沮丧，我似乎无法在 Castle Windsor 文档中找到一个直接的答案（或缺少答案）。我试图实施这个 SO 问题中建议的解决方案：

[所以问题](https://stackoverflow.com/questions/10085172/using-castle-windsor-wcffacility-to-create-client-endpoints)

但这也没有用。似乎没有任何组件已注册。另外，如果有帮助，这是我的 svc 标记：

```
 <%@ ServiceHost Language="C#" Debug="true" Service="AccountDataService"
Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, Castle.Facilities.WcfIntegration" %> 
```

所有服务都是一样的。

所以，我的问题是，为什么我的组件没有与 AccountDataService 一起注册？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:12:35.613

以下是我如何通过没有 app.config 文件的代码进行配置。

一个区别是我在 DefaultServiceModel 上使用 PublishMetadata 方法，而不是使用 IServiceBehavior 注册它。老实说，如果同一个接口被注册两次并且它不是装饰器模式，我不确定 Windsor 会如何表现（参见[这篇](http://mikehadlow.blogspot.com/2010/01/10-advanced-windsor-tricks-4-how-to.html)关于 Windsor 和装饰器的帖子）。

另一个区别是我在 AddBaseAddress 方法中为每个服务指定了一个唯一地址。每个服务都需要一个唯一的地址，但您可以使用 WcfEndpoint 上的 At() 方法公开与每个服务的基地址相关的多个唯一终结点。（即，如果您想为同一服务公开 BasicHttpEndpoint 和 WSHttpEndpoint）

```
using System;
using System.ServiceModel;
using System.ServiceModel.Description;
using Castle.Facilities.WcfIntegration;
using Castle.MicroKernel.Registration;
using Castle.Windsor;

namespace DISandbox
{
    public class Program
    {
        private static WindsorContainer _container;

        public static void Main(string[] args)
        {
            _container = new WindsorContainer();
            _container.AddFacility<WcfFacility>();

            ServiceDebugBehavior returnFaults = new ServiceDebugBehavior
            {
                IncludeExceptionDetailInFaults = true,
                HttpHelpPageEnabled = true,
            };

            _container.Register(
                Component.For<IServiceBehavior>().Instance(returnFaults));

            string baseAddress = "http://localhost:49246/";

            _container.Register(
                Component
                    .For<IAccountDataService>()
                    .ImplementedBy<AccountDataService>()
                    .AsWcfService(new DefaultServiceModel()
                        .PublishMetadata(mex => mex.EnableHttpGet())
                        .AddBaseAddresses(baseAddress + "AccountDataService")
                        .AddEndpoints(WcfEndpoint
                            .ForContract<IAccountDataService>()
                            .BoundTo(new WSHttpBinding()))),
                Component
                    .For<IInstitutionDataService>()
                    .ImplementedBy<InstitutionDataService>()
                    .AsWcfService(new DefaultServiceModel()
                        .PublishMetadata(mex => mex.EnableHttpGet())
                        .AddBaseAddresses(baseAddress + "InstitutionDataService")
                        .AddEndpoints(WcfEndpoint
                            .ForContract<IInstitutionDataService>()
                            .BoundTo(new WSHttpBinding()))));

            Console.WriteLine("Press any key to exit...");
            Console.ReadLine();
        }
    }

    [ServiceContract]
    public interface IAccountDataService
    {
        [OperationContract]
        void DoStuff();
    }

    public class AccountDataService : IAccountDataService
    {
        public void DoStuff() { }
    }

    [ServiceContract]
    public interface IInstitutionDataService
    {
        [OperationContract]
        void DoStuff();
    }

    public class InstitutionDataService : IInstitutionDataService
    {
        public void DoStuff() { }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T16:47:42.363

这是我使用 app.config 文件自行托管的方法。我这样做是因为这是我熟悉的。如果需要，我可以将其修改为通过代码而不是通过 app.config 文件进行配置...

```
using System;
using System.ServiceModel;
using Castle.Facilities.WcfIntegration;
using Castle.MicroKernel.Registration;
using Castle.Windsor;

namespace DISandbox
{
    public class Program
    {
        private static WindsorContainer _container;

        public static void Main(string[] args)
        {
            _container = new WindsorContainer();
            _container.AddFacility<WcfFacility>();

            _container.Register(
                Component
                    .For<IAccountDataService>()
                    .ImplementedBy<AccountDataService>()
                    .AsWcfService(),
                Component
                    .For<IInstitutionDataService>()
                    .ImplementedBy<InstitutionDataService>()
                    .AsWcfService());

            Console.WriteLine("Press any key to exit...");
            Console.ReadLine();
        }
    }

    [ServiceContract]
    public interface IAccountDataService
    {
        [OperationContract]
        void DoStuff();
    }

    public class AccountDataService : IAccountDataService
    {
        public void DoStuff() { }
    }

    [ServiceContract]
    public interface IInstitutionDataService
    {
        [OperationContract]
        void DoStuff();
    }

    public class InstitutionDataService : IInstitutionDataService
    {
        public void DoStuff() { }
    }
} 
```

还有配置文件...

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyHttpServiceBehavior">
          <serviceMetadata httpGetEnabled="True" />
          <serviceDebug includeExceptionDetailInFaults="True" httpHelpPageEnabled="True"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <services>
      <service name="DISandbox.AccountDataService" behaviorConfiguration="MyHttpServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:49246/AccountDataService"/>
          </baseAddresses>
        </host>
        <endpoint binding="basicHttpBinding" contract="DISandbox.IAccountDataService" />
      </service>

      <service name="DISandbox.InstitutionDataService" behaviorConfiguration="MyHttpServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:49246/InstitutionDataService"/>
          </baseAddresses>
        </host>
        <endpoint binding="basicHttpBinding" contract="DISandbox.IInstitutionDataService" />
      </service>
    </services>
  </system.serviceModel>

</configuration> 
```

# javascript - 我可以在 javascript 中将其设为单行吗？

> ID：13281990
> 
> 赞同：2
> 
> 时间：2012-11-08T03:32:56.100
> 
> 标签：javascript

我经常做这样的事情：

```
t={};
t.args={}; 
```

然后分配变量，如`t.args.id=12`. 我可以将上述内容设为单行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T03:34:50.137

怎么样的东西：

```
var t = { args: { id: 12 } }; 
```

这将通过以下方式访问：

```
t.args.id; 
```

如果您不想`t.args`在初始化期间指定内部属性（即 - `id`），您也可以轻松地使用`t = { args: {} }`。然后使用`t.args.id = 12`仍然可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T03:34:57.000

怎么样：

```
var t = { args: {} }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:40:11.537

这将起作用，但不一定是最易读的方法：

`(t={}).args={}`

# python - 代码生成不正确的 HTML 代码

> ID：13281993
> 
> 赞同：0
> 
> 时间：2012-11-08T03:33:03.123
> 
> 标签：python, html

输入：-

```
 CRlist
  [['CR', 'FA', 'CL', 'TITLE'], ['409452', 'WLAN', '656885', 'Age out RSSI values from buffer in Beacon miss scenario'], ['379104', 'BT', '656928', 'CR379104: BT doesn\xe2\x80\x99t work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.']] 
```

我有以下 pythong 代码来生成 HTML 代码，但它生成了一个不期望的输出，我将数组值 pring 之前似乎有正确的数据，但是在 using.format 时，有些东西变得混乱了..谁能指出什么是错的这里？

```
for i in range(len(CRlist)):
    if i==0:
        continue
    for j in range(len(CRlist[0])):
        print "i"
        print i
        print "j"
        print j
        print "CRlist[i][j]"
        print CRlist[i][j]//right data here
        CRstring += """
        <tr>
        <td><a href="{CR}">{CR}</a></td>
        <td>{FA}</td>
        <td>{CL}</td>
        <td>{Title}</td>
        </tr>""".format(
            CR=CRlist[i][j],
            FA=CRlist[i][j],
            CL=CRlist[i][j],
            Title=CRlist[i][j],
            )
CRstring += "\n</table>\n" 
```

我对输出的期望，但创建不正确

```
 <tr>
   <td><a href="409452">409452</a></td>
   <td>WLAN</td>
   <td>656885</td>
   <td>Age out RSSI values from buffer in Beacon miss scenario</td>
   </tr>
    .............. 
```

实际输出，行单元格数据是多余的

```
 <tr>
                   <td><a href="409452">409452</a></td>
                   <td>409452</td>
                   <td>409452</td>
                   <td>409452</td>
                   </tr>
                   <tr>
                   <td><a href="WLAN">WLAN</a></td>
                   <td>WLAN</td>
                   <td>WLAN</td>
                   <td>WLAN</td>
                   </tr>
                   <tr>
                   <td><a href="656885">656885</a></td>
                   <td>656885</td>
                   <td>656885</td>
                   <td>656885</td>
                   </tr>
                   <tr>
                   <td><a href="Age out RSSI values from buffer in Beacon miss scenario">Age out RSSI values from buffer in Beacon miss scenario</a></td>
                   <td>Age out RSSI values from buffer in Beacon miss scenario</td>
                   <td>Age out RSSI values from buffer in Beacon miss scenario</td>
                   <td>Age out RSSI values from buffer in Beacon miss scenario</td>
                   </tr>
                   <tr>
                   <td><a href="379104">379104</a></td>
                   <td>379104</td>
                   <td>379104</td>
                   <td>379104</td>
                   </tr>
                   <tr>
                   <td><a href="BT">BT</a></td>
                   <td>BT</td>
                   <td>BT</td>
                   <td>BT</td>
                   </tr>
                   <tr>
                   <td><a href="656928">656928</a></td>
                   <td>656928</td>
                   <td>656928</td>
                   <td>656928</td>
                   </tr>
                   <tr>
                   <td><a href="CR379104: BT doesnΓÇÖt work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.">CR379104: BT doesnΓÇÖt work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.</a></td>
                   <td>CR379104: BT doesnΓÇÖt work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.</td>
                   <td>CR379104: BT doesnΓÇÖt work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.</td>
                   <td>CR379104: BT doesnΓÇÖt work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.</td>
                   </tr>
/table> 
```

=========PLlist==========

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:55:05.713

此代码为每个模板变量提供相同的值：

```
CR=CRlist[i][j],
FA=CRlist[i][j],
CL=CRlist[i][j],
Title=CRlist[i][j], 
```

显然，这并不像您预期​​的那样工作。这是另一种写法：

```
TEMPLATE = """
    <tr>
    <td><a href="{CR}">{CR}</a></td>
    <td>{FA}</td>
    <td>{CL}</td>
    <td>{Title}</td>
    </tr>
"""

for i, item in enumerate(CRlist):
    if i == 0:
        continue

    CRstring += TEMPLATE.format(
        CR=item[0],
        FA=item[1],
        CL=item[2],
        Title=item[3],
    )

CRstring += "\n</table>\n" 
```

您甚至可以通过对列表进行切片来删除`i`和`enumerate`位：

```
for item in CRList[1:]:
    CRstring += # ... 
```

由于您正在生成 HTML 并使用用户输入（至少我假设）并且没有转义 HTML，因此您遇到了 XSS 漏洞。让我们也解决这个问题：

```
# near the top of the file:
import cgi

# later...
# ...
CRstring += TEMPLATE.format(
    CR=cgi.escape(item[0]),
    FA=cgi.escape(item[1]),
    # ...
) 
```

* * *

# 进一步改进

这一切都很好，但正如评论中有人指出的那样，使用真正的模板引擎可能会更好。我个人喜欢[Jinja2](http://jinja.pocoo.org/2/)。下面是你如何做到这一点：

```
 {%- for item in cr_list[1:] %}
        <tr>
            <td><a href="{{ item[0] | escape }}">{{ item[0] | escape }}</a></td>
            <td>{{ item[1] | escape }}</td>
            <td>{{ item[2] | escape }}</td>
            <td>{{ item[3] | escape }}</td>
        </tr>
    {%- endfor %}
</table> 
```

此外，您可能希望将数据放入对象中。例如：

```
class CREntry(object):
    def __init__(self, cr, fa, cl, title):
        self.cr = cr
        self.fa = fa
        self.cl = cl
        self.title = title 
```

然后你可以很简单地转换它：

```
entries = [CREntry(*entry) for entry in CRlist[1:]] 
```

然后您的代码变得更加清晰，能够引用`entry.title`而不是`item[3]`.

您可能还想使用[PEP 8](http://www.python.org/dev/peps/pep-0008/)中概述的普通 Python 约定。

如果你已经完成了，你的代码如下所示：

```
import jinja2

env = jinja2.Environment(autoescape=True)  # no more | escape everywhere!

template = env.from_string(r"""
        {%- for entry in entries %}
            <tr>
                <td><a href="{{ entry.cr }}">{{ entry.cr }}</a></td>
                <td>{{ entry.fa }}</td>
                <td>{{ entry.cl }}</td>
                <td>{{ entry.title }}</td>
            </tr>
        {%- endfor %}
    </table>
""")

class CREntry(object):
    # ...

# later...
entries = [CREntry(*entry) for entry in cr_list]
cr_string = template.render(entries=entries) 
```

其他地方的代码多一点，但当您实际生成 HTML 时会少一些，我会说它*更*易于维护。

# android - 如何控制Android中的音量按钮？

> ID：13281994
> 
> 赞同：3
> 
> 时间：2012-11-08T03:33:07.207
> 
> 标签：android

我正在开发一个Android应用程序，用户可以在手机丢失后找到手机，我打算实现远程响铃功能，我想做一些事情，比如闹钟响起时，无论音量增大或减小键是按下时，警报响起时音量仍将保持最大...但我不知道如何实现这一点...我只能检测到按下音量键的事件...请为此提供帮助..谢谢...

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event){

    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        Toast.makeText(this, "Volume Up", Toast.LENGTH_LONG).show();
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN){
        Toast.makeText(this, "Volume Down", Toast.LENGTH_LONG).show();
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T03:47:41.693

你的代码对我来说很好。我把它扔进了一个基本的应用程序，它成功地拦截了按键而不改变我设备上的音量。

您是否尝试过覆盖`onKeyUp`以及`onKeyDown`？

编辑：请注意，这在服务中不起作用**。**您根本无法拦截服务中的硬件音量按钮按下。

# ios - 使用 Neon iOS 改进 C 代码

> ID：13281995
> 
> 赞同：1
> 
> 时间：2012-11-08T03:33:30.997
> 
> 标签：ios, performance, simd, neon

下面的代码用于缩放图像，但性能不佳。我用谷歌搜索并找到了一些将代码转换为 Neon ASM 以获得更好性能的建议。

```
inline void insetw32(char *pb_dst, char *pb_pFore, char *pb_pBack, char *pmix, int w)
{
    register char bbm = (char)(pmix[0]<<24>>24);
    for(int i = 0;i< w;i++)
    {
        *pb_dst++ = (((*pb_pFore++ - *pb_pBack++) * bbm)>>8) + *pb_pBack;
        *pb_dst++ = (((*pb_pFore++ - *pb_pBack++) * bbm)>>8) + *pb_pBack;
        *pb_dst++ = (((*pb_pFore++ - *pb_pBack++) * bbm)>>8) + *pb_pBack;
        *pb_dst++ = (((*pb_pFore++ - *pb_pBack++) * bbm)>>8) + *pb_pBack;
    }
} 
```

我尝试用 NEON 翻译代码，性能比 C 语言快 2 倍，但是我使用 MMX 的相同代码在 x86 平台上可以快 4 倍，有没有其他好的方法来改进呢？还是我的 NEON 代码有任何错误？

```
 uint8x8_t fac1 = vdup_n_u8(bbm);
    int16x8_t fac = vmovl_u8(fac1);
    w /= 2; // 8/ 4
    while (w--)
    {
        int8x8_t temp8;
        int16x8_t  temp16;
        uint8x8_t rgbaFore  = vld1_u8(pb_pFore);
        uint8x8_t rgbaBack  = vld1_u8(pb_pBack);
        uint8x8_t rgbaDst  = vld1_u8(pb_dst);
        int16x8_t fore = vmovl_u8(rgbaFore);
        int16x8_t back = vmovl_u8(rgbaBack);
        temp16 = vsubq_s16(fore, back);
        temp16 = vmulq_s16(temp16, fac);
        temp8 = vshrn_n_s16(temp16, 8);
        temp8 = vadd_u8(temp8, rgbaBack);

        vst1_u8(pb_dst, temp8);

        pb_dst += 8;
        pb_pFore += 8;
        pb_pBack += 8;
    } 
```

# ruby-on-rails - Rails发布脚手架不解析html

> ID：13281997
> 
> 赞同：2
> 
> 时间：2012-11-08T03:33:46.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试学习 Rails，并以我的博客为借口。

现在，我正在玩转脚手架。我得到了 MVC 及其背后的想法，所以当我遇到以下错误时，我正要重新创建它。

如果我输入类似的内容

```
text
text
text 
```

在帖子表单的“内容”标签中，它将所有文本显示为一个块。

```
text text text 
```

我想我可以尝试做类似的事情

```
<p>text</p>
<p>text</p>
<p>text</p> 
```

但是，它显示

```
<p>text</p><p>text</p><p>text</p> 
```

我希望 Rails 做的是实际解析内容中的 html。我会怎么做才能让它发生？

这是我用来提交内容的新表单部分

```
<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这是整个帖子控制器

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.paginate(page: params[:page])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T03:39:32.227

为了防止 XSS 攻击，Rails 默认会转义 html。如果您不希望您的 html 转义，则必须`.html_safe`在您不想转义的字符串上使用。在`show.html.erb`：

```
<%= @post.content.html_safe %> 
```

或者更好的方法是不要`<p>`在您的内容字段中输入 's 并用于[`simple_format`](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)将格式设置为段落，如下所示：

```
<%= simple_format(@post.content) %> 
```

当然，您也可以将两者结合使用。例如，当您省略了段落标签，但在*您*的内容中有链接时：

```
<%= simple_format(@post.content.html_safe) %> 
```

请注意，您可以安全地`.html_safe`在您自己输入的内容上使用它，但不要在第三方输入的内容（如评论）上使用它，因为这会使您的网站受到 XSS 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T03:58:18.390

Mischa 的回答让我陷入了搜索的困境，我还发现了这个宝石——https: [//github.com/sophlenz/tinymce-rails](https://github.com/spohlenz/tinymce-rails)

它将 TinyMCE，一个所见即所得的编辑器添加到 textarea