# StackOverflow 问答 13321000-13321999

# xml - xml构造错误

> ID：13321000
> 
> 赞同：3
> 
> 时间：2012-11-10T09:53:38.323
> 
> 标签：xml, syntax

我有以下 xml 文件作为程序的输出：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<rsp stat='ok'>
<results total='5'>
<result cover='http://ia.media-imdb.com/images/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_CR0,0,54,74_.jpg' title='The Amazing Spider-Man 'year='2012' director='Marc Webb' rating='7.3' details='/title/tt0948470/' />
<result cover='http://i.media-imdb.com/images/SF1f0a42ee1aa08d477a576fbbf7562eed/realm/feature.gif' title='The Amazing Spider-Man 2 'year='2014' director='Marc Webb' rating='N.A.' details='/title/tt1872181/'/>
<result cover='http://ia.media-imdb.com/images/M/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,0,54,74_.jpg' title='Spider-Man 'year='2002' director='Sam Raimi' rating='7.3' details='/title/tt0145487/'/>
<result cover='http://ia.media-imdb.com/images/M/MV5BODUwMDc5Mzc5M15BMl5BanBnXkFtZTcwNDgzOTY0MQ@@._V1._SX54_CR0,0,54,74_.jpg' title='Spider-Man 3 'year='2007' director='Sam Raimi' rating='6.3' details='/title/tt0413300/'/>
<result cover='http://ia.media-imdb.com/images/M/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1._SX54_CR0,0,54,74_.jpg' title='Spider-Man 2 'year='2004' director='Sam Raimi' rating='7.5' details='/title/tt0316654/'/>
</results>
</rsp> 
```

但是当我将它保存为 xml 文件并在浏览器中打开它时，它会显示属性构造错误。为什么 ？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T10:02:45.850

您必须使用空格字符将属性值与其他属性的名称分开。请注意，`year`紧跟在 的值之后`title`。你只是放错了几个空格。

`title='The Amazing Spider-Man 'year='2012'`

您必须将其更改为

`title='The Amazing Spider-Man' year='2012'`

以下文档应正确呈现。

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<rsp stat='ok'>
  <results total='5'>
    <result cover='http://ia.media-imdb.com/images/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_CR0,0,54,74_.jpg' title='The Amazing Spider-Man' year='2012' director='Marc Webb' rating='7.3' details='/title/tt0948470/' />
    <result cover='http://i.media-imdb.com/images/SF1f0a42ee1aa08d477a576fbbf7562eed/realm/feature.gif' title='The Amazing Spider-Man 2' year='2014' director='Marc Webb' rating='N.A.' details='/title/tt1872181/'/>
    <result cover='http://ia.media-imdb.com/images/M/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,0,54,74_.jpg' title='Spider-Man' year='2002' director='Sam Raimi' rating='7.3' details='/title/tt0145487/'/>
    <result cover='http://ia.media-imdb.com/images/M/MV5BODUwMDc5Mzc5M15BMl5BanBnXkFtZTcwNDgzOTY0MQ@@._V1._SX54_CR0,0,54,74_.jpg' title='Spider-Man 3' year='2007' director='Sam Raimi' rating='6.3' details='/title/tt0413300/'/>
    <result cover='http://ia.media-imdb.com/images/M/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1._SX54_CR0,0,54,74_.jpg' title='Spider-Man 2' year='2004' director='Sam Raimi' rating='7.5' details='/title/tt0316654/'/>
  </results>
</rsp> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T10:00:59.843

每个属性前都需要一个空格。（你在“年”忘记了一个）

# postgresql - Postgresql 未使用“createdb”作为超级用户创建数据库，但未输出错误

> ID：13321005
> 
> 赞同：125
> 
> 时间：2012-11-10T09:54:04.033
> 
> 标签：postgresql, psql

我正在使用“postgres”超级用户进行全新的 postgresql 安装。通过以下方式登录：

```
sudo -u postgres psql

postgres=# createdb database
postgres-# \list
                                  List of databases
   Name    |  Owner   | Encoding |  Collation  |    Ctype    |   Access privileges   
-----------+----------+----------+-------------+-------------+-----------------------
 postgres  | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | 
 template0 | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres
                                                             : postgres=CTc/postgres
 template1 | postgres | UTF8     | en_GB.UTF-8 | en_GB.UTF-8 | =c/postgres
                                                             : postgres=CTc/postgres 
```

没有错误，但尚未创建表。有任何想法吗？

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-11-10T09:59:04.430

`createdb`是一个命令行实用程序，您可以从**bash**而不是从 psql 运行它。要从**psql**创建数据库，请使用如下`create database`语句：

```
create database [databasename]; 
```

注意：请务必始终以`;`

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-12-08T15:19:41.467

迟到了，但接受的答案并没有解释为什么没有显示错误。由于这是 Postgres 新手经常偶然发现的东西，我想补充一下。

* * *

TL/TR：始终以`;`

* * *

因为`createdb database`did not end with`;` `psql`认为语句未完成并等待更多输入。这由提示从`postgres=#`变为 来表示`postgres-#`。我希望`psql`做一个非常微妙的改变（更“突出”）。

通过输入元命令`\list`，“当前”SQL 语句被“中止”而不执行它。

如果`createdb`以 a 结束，`;`则输出将是：

```
postgres=> createdb foobar;
错误：“createdb”处或附近的语法错误
LINE 1: createdb foobar;
        ^
postgres=>
```

清楚地表明出了什么问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-04T20:33:16.330

使用节点终端，我必须运行：

```
psql -U postgres 
```

[输入您的密码]

然后 ...

```
CREATE DATABASE dbadmin; 
```

* * *

令人困惑的是，我之前输入了这些相同的命令，但它不起作用。只有在注销并重新登录后，我才能使用文档中的这个标准命令：[https ://www.postgresql.org/docs/10/tutorial-createdb.html](https://www.postgresql.org/docs/10/tutorial-createdb.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-05T01:05:08.730

不久前我也处于这种情况。如果其他人遇到这种情况，考虑到命令提示符显示您可以通过简单地键入和返回键`postgres-#`来执行挂起的 createdb 命令。`;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-28T16:45:03.290

在 PostgreSQL 中创建新数据库非常简单，在 Linux 上执行这个命令（CentOS 7 示例）：

```
sudo -u postgres psql -c "create database MyDb;" 
```

# java - Java 正则表达式匹配如果前面没有关键字

> ID：13321008
> 
> 赞同：5
> 
> 时间：2012-11-10T09:54:11.087
> 
> 标签：java, regex

这是一个正则表达式特定的问题..

我需要一个可以找到某个关键字的正则表达式。示例**ABCDE** 但如果某些字符在此关键字之前，则它不应该匹配。示例**]]**

所以......在这样的一行中，它应该只匹配粗体部分......

[[TestChannel]] ABCDE：这是一个测试**ABCDE**

编辑：我一直在这里尝试.. [http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

到目前为止我已经尝试过..

```
(!]])(ABCDE)
((!]])ABCDE)
(!]])!(ABCDE)
((!]])|ABCDE) 
```

**解决方案**：在 Pshemo 评论链接的帮助下 -> [http://www.regular-expressions.info/lookaround.html#lookbehind](http://www.regular-expressions.info/lookaround.html#lookbehind)

```
(?<!]])ABCDE 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T10:13:54.880

```
(?<!]])ABCDE 
```

感谢 Pshemo 的链接。

# iphone - 通过 VPP 分发 iPhone 应用程序

> ID：13321014
> 
> 赞同：3
> 
> 时间：2012-11-10T09:55:16.703
> 
> 标签：iphone, software-distribution

我们开发了一个 iPhone 应用程序，允许用户离线访问通过我们销售的系统创建的内容。由于我们被告知必须通过批量购买计划 (VPP) 分发的应用程序类型，我们现在遇到了获得 Apple 批准的问题。除了程序的主要限制之外，这很好：

1.  我们的一些客户没有在 DUN 或 VPP 上注册，我们的客户所采用的内部流程阻止他们注册。
2.  我们的一些客户位于无法注册该计划的国家/地区。
3.  我们也想访问应用程序，但不能不使用不同的方法。
4.  向不同设备的分发过程似乎非常复杂，向系统的每个用户发布单独的 URL。

有没有人找到解决这些限制的方法或有任何建议？

谢谢

尼尔

# objective-c - NSURLRequest 显然缓存在 Cache.db 但再次请求

> ID：13321019
> 
> 赞同：0
> 
> 时间：2012-11-10T09:56:42.467
> 
> 标签：objective-c, nsurlconnection, nsurlcache

我正在使用此块在 iOS 5 应用程序中同步图像下载。逻辑很简单，如果图像在缓存中使用它，如果不下载它，我想 NSURLRequestReturnCacheDataElseLoad 正是这种行为。

```
 [factory.downloadImagesQueue addOperationWithBlock:^(){
        NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/%@",IP2BaseImgURL,imgName]];
        NSURLRequest *request = [NSURLRequest requestWithURL:url
                         cachePolicy:NSURLRequestReturnCacheDataElseLoad
                     timeoutInterval:15.0];

        NSCachedURLResponse* cachedResponse = [[NSURLCache sharedURLCache] cachedResponseForRequest:request];
        if (cachedResponse!=nil) {
            NSLog(@"%@ found in cache",imgName);
            [delegate imageDidFinishDownload:[UIImage imageWithData:[cachedResponse data]] atIndexPath:indexPath];
        } else {
            NSError *error;
            NSURLResponse *response;
            NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
            if (data == nil) {
                FULL_ERROR_LOG(error)
            } else {
                NSLog(@"%@ downloaded",imgName);
                if (![response.MIMEType isEqualToString:@"image/png"] && ![response.MIMEType isEqualToString:@"image/jpeg"]) {
                    NSLog(@"Found wrong mime type: %@",response.MIMEType);
                    [delegate imageDidEncounterErrorWhileDownload:imgName atIndexPath:indexPath];
                } else {
                    NSCachedURLResponse *cachedResponse = [[NSCachedURLResponse alloc] initWithResponse:response data:data];
                    [[NSURLCache sharedURLCache] storeCachedResponse:cachedResponse forRequest:(NSURLRequest *)request];
                    [delegate imageDidFinishDownload:[UIImage imageWithData:data] atIndexPath:indexPath];
                }
            }
        }

    }]; 
```

我用三张图片做了一个测试。当我第一次下载它们时，我可以看到消息'downloaded MyimgName1.jpg''downloaded MyimgName2.jpg''downloaded MyimgName3.jpg'，通过打开Cache.db，我可以看到我所有的图像都正确存储在其中.

但是，当我尝试再次下载时，只有第一个下载的图像显示消息“MyimgName1.jpg 在缓存中找到”，这意味着对于所有其他 2 和 3 请求，cachedResponse 为 nil：

```
 NSCachedURLResponse* cachedResponse = [[NSURLCache sharedURLCache] cachedResponseForRequest:request];
    if (cachedResponse!=nil) { // <-- nil
    } 
```

我在 NSCache 的设置或创建中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:47:11.873

该行：

```
[[NSURLCache sharedURLCache] storeCachedResponse:cachedResponse forRequest:(NSURLRequest *)request]; 
```

当 'cachedResponse' 的值为 nil 时，将始终存储 nil，因为它在 if 内。我想知道你是如何缓存任何东西的。

无论如何，您应该先分配一个新的 NSCachedURLResponse 实例，然后再将其插入缓存。附带说明一下，尝试更改缓存的容量，这可能是问题所在。您可以使用 setMemoryCapacity 更改它：

# javascript - Jquery 脚本无法在我的计算机上运行

> ID：13321023
> 
> 赞同：0
> 
> 时间：2012-11-10T09:57:40.857
> 
> 标签：javascript, jquery

我尝试构建的这个网站上的脚本有问题。这是脚本本身：

```
var id=0;
var cases=$('.cases').length;
$('#show').html($('#'+id).html());
setInterval(function() 
{
    $('#show').empty();
    if (id==cases-1)
        id=0;
    else
        id++;
    $('#show').html($('#'+id).html());
},5000); 
```

这是html代码：

```
<div class="page">
    <br /><br /><headline>cases</headline><br /><br /><div id='case'></div><div class='content'><div id='show'></div><div id='column1'><div class='cases' id='0'><div class='short'><div id='cases-image'><img src='images/Sunset.jpg'/></div><div id='cases-info'><div id='cases-headline'>zxfbzsxdbfsdfh</div><cases-text>dfghsdfgsdfgsdfg</cases-text><div class='more' id=zxfbzsxdbfsdfh >להמשך קריאה...</div></div></div></div></div><div id='column2'><div class='cases' id='1'><div class='short'><div id='cases-image'><img src='images/גלריה1.bmp'/></div><div id='cases-info'><div id='cases-headline'>xbzsdfbsdf</div><cases-text>dafasdvasdvasdv</cases-text><div class='more' id=xbzsdfbsdf >להמשך קריאה...</div></div></div></div></div>            </div>
        <div id="footer">
</div> 
```

它在 jsFiddle 中工作，但在我的计算机上不起作用，它只显示第一种情况，脚本中的 id 发生变化，但它没有从其他情况下获取 html ......你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:05:21.833

尝试像这样使用：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript">

$(document).ready(function(){

    var id=0;
    var cases=$('.cases').length;
    $('#show').html($('#'+id).html());
    setInterval(function() 
    {
        $('#show').empty();
        if (id==cases-1)
            id=0;
        else
            id++;
        $('#show').html($('#'+id).html());
    },5000);

});
</script> 
```

如果您的代码在小提琴中运行，那么它应该可以在您的计算机上运行，​​确保遵循约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:05:31.743

确保

你已经包含了 jQuery.js

您已将代码包装在就绪处理程序中，例如

```
<script type="text/javascript">
$(function(){
 //your code
});
</script> 
```

# xml - VS2010中xsc和xss文件的作用是什么？

> ID：13321024
> 
> 赞同：12
> 
> 时间：2012-11-10T09:57:52.690
> 
> 标签：xml, visual-studio-2010, xsd

我正在创建一个 xml 文件并想向其中添加一个 xml 模式文件。所以我添加了一个 .xsd 文件，但它包含 .xss 和 .xsc 文件。我需要对这些文件做任何事情来正确定义我的架构吗？他们的目的是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T07:38:12.460

哦..k..我终于明白了...

现在我想起来了，我认为我看到的行为是因为文件最初是如何创建的，而不是 XSD 本身。如果我们最初将文件创建为数据集（生成 XSD），那么我们将获得所有行李文件（.cs、.xsc、.xss）。创建这些文件是因为 XSD 表示数据集而不是纯 XML 模式文件。如果我们不希望将架构视为数据集，则在文本编辑器中打开 XSD 文件并删除应用于根数据集元素的各种 msprop 和 msdata 属性。然后我们可以删除与该文件关联的子文件并留下原始 XML XSD。然后 VS 会将文件视为常规 XSD。

所以我在文本编辑器中打开了 xsd 文件并更改了

```
msdata:IsDataSet="true"  to

 msdata:IsDataSet="false" 
```

当我重新加载项目时，文件不再存在..

但是问题仍然存在——即使我们没有使用这些文件，我们也能够获得输出，那么这些文件是否只是为了设计而不是用于任何其他目的？

有没有人使用过这些文件？谁能举一个我们将 xsd 视为数据集的示例？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-17T11:14:45.770

.xss 存储有关如何将表放置在数据集的可视化表示中的详细信息。

[https://datatypes.net/open-xss-files](https://datatypes.net/open-xss-files)

# ruby - 日期之间的天数

> ID：13321026
> 
> 赞同：1
> 
> 时间：2012-11-10T09:58:18.673
> 
> 标签：ruby, date, date-arithmetic

我有两个日期：`start date`和`end date`。我想计算 和 之间的天`end date`数`start date`。如果`start date`is `1-11-2011`, `end date`is `2-11-2012`, and I put `start date - end date`，它将显示天数为`1`，并且不会计算月份和年份。我怎样才能在红宝石中做到这一点？请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T10:25:20.103

```
require "date"
(
  Date.strptime("2-11-2012", "%m-%d-%Y") -
  Date.strptime("1-11-2011", "%m-%d-%Y")
).to_i + 1
# => 397 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T14:02:51.773

```
require 'date'

start_date = Date.parse('1-11-2011')
# => #<Date: 2011-11-01 … >
end_date   = Date.parse('2-11-2012')
# => #<Date: 2012-11-02 … >

inclusive_days_in_range = (start_date .. end_date).count
# => 368 
```

或者，如果您关心效率（快两个数量级）：

```
inclusive_days_in_range = (end_date - start_date) + 1
# => 368 
```

请注意，如果您使用`Date.parse`，给定的日期字符串将被解释为好像它以天开始，然后是月份和年份。如果这不是您想要的，您必须使用该`Date.strptime`方法手动指定您的日期格式，即使我不知道地球上有哪个国家会采用传统的日期格式。为了清楚并避免字符串解析，您还可以通过以下方式初始化 Date 对象：

```
Date.new(2012, 1, 11) 
```

另一个好主意是在应用程序内部使用[ISO-8601](https://en.wikipedia.org/wiki/ISO_8601) (YYYY-MM-DD) 格式，并且只根据需要将它们转换为本地化表示以提高清晰度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-20T05:04:20.080

试试这个。

```
time_ago_in_words(pending_requests.created_at) 
```

这将照顾好几天和几个小时，例如

```
about 17 hours ago 
```

和

```
3 days ago 
```

# javascript - 查找在 socket.io 中发送的消息的大小

> ID：13321034
> 
> 赞同：0
> 
> 时间：2012-11-10T09:59:48.690
> 
> 标签：javascript, socket.io

我正在尝试优化序列化函数的大小，并想比较两种不同方案通过线路发送的消息的大小。

有没有办法检查要为给定对象发送的 socket.io 消息的大小？

对不起，如果这是一个微不足道的问题/有一个明显的答案......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:43:28.533

您可以使用 Chrome 的开发者工具。一个 guie 在[这里](http://blog.kaazing.com/2012/05/09/inspecting-websocket-traffic-with-chrome-developer-tools/)可用。这不包括外部标头（即 IP 和 TCP），如果您也需要它们，则必须使用单独的工具，如 tcpdump 或 Wireshark。

# python - Python中非常非常大的数字

> ID：13321035
> 
> 赞同：-5
> 
> 时间：2012-11-10T09:59:51.387
> 
> 标签：python, integer

据我了解，python 可以处理任意长度的整数。它可以很好地处理加法和乘法，但似乎会随着除法而分崩离析。

```
>>> from decimal import Decimal, getcontext
>>> getcontext().prec=2**5 
>>> ORIG_NUM=476939688738611836995535477357070857939902076027788232031989775824606225595773435668861833
>>> print(Decimal(ORIG_NUM)/7)
6.8134241248373119570790782479582E+88
>>> print("%.6f" % (Decimal(ORIG_NUM)/7))
68134241248373123068520468160885027682039120236463560535175757714209021725053511199096832.000000 
```

我不想要 e 符号因此 getcontext().prec 尝试。另外，对 %f 去掉小数点感到困惑？

```
>>> getcontext().prec=2**7
>>>QUOTIENT= (Decimal(476939688738611836995535477357070857939902076027788232031989775824606225595773435668861833)/7)

>>>print(QUOTIENT)
68134241248373119570790782479581551134271725146826890290284253689229460799396205095551690.428571428571428571428571428571428571429
>>>QUOTIENT*7
4.7693968873861185e+89
>>> Decimal(QUOTIENT)*7
Decimal('476939688738611861479643277126195193774273841655244923746230303999463152075374578393677824')
>>> print(Decimal(QUOTIENT)*7)
476939688738611861479643277126195193774273841655244923746230303999463152075374578393677824
>>> print(Decimal(QUOTIENT)*7)==ORIG_NUM
476939688738611861479643277126195193774273841655244923746230303999463152075374578393677824
False 
```

第二个问题是数字不匹配。

有关该主题的任何信息？

希望这样更好...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T10:22:10.637

1.  `print(Decimal(QUOTIENT)*7)==ORIG_NUM`失败，因为`print`函数返回`None`。
2.  如果您想要精确的划分，请使用`Fraction`该类。

    ```
    >>> from fractions import Fraction
    >>> x = 476939688738611836995535477357070857939902076027788232031989775824606225595773435668861833
    >>> f = Fraction(x, 7)
    >>> print(f)
    476939688738611836995535477357070857939902076027788232031989775824606225595773435668861833/7
    >>> f * 7 == x
    True 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:26:17.140

```
>>> (Decimal(QUOTIENT)*7)-476939688738611836995535477357070857939902076027788232031989775824606225595773435668861833
Decimal('24484107799769124335834371765627456691714240528174856926479601142724815991') 
```

疯狂的巨大错误。

```
>>> 68134241248373119570790782479581551134271725146826890290284253689229460799396205095551690*7
476939688738611836995535477357070857939902076027788232031989775824606225595773435668861830
>>> MODD=(Decimal(476939688738611836995535477357070857939902076027788232031989775824606225595773435668861833)%7)
3.000000
>>>TRUNCD_QUO=int((Decimal(476939688738611836995535477357070857939902076027788232031989775824606225595773435668861833)/7))
>>>((TRUNCD_QUO*7)+MODD)==ORIG_NUM
True 
```

# python - 在 Python 中创建一个 5D 数组

> ID：13321042
> 
> 赞同：1
> 
> 时间：2012-11-10T10:01:15.470
> 
> 标签：python, numpy

我有一个灰色图像，我想在其中将每个像素映射到其他 N 个大小为 LxM 的矩阵。如何初始化这样的矩阵？我试过 `result=numpy.zeros(shape=(i_size[0],i_size[1],N,L,M))`了，但我得到了 Value Error 'array is too big'。任何人都可以建议一个替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:15:19.693

`N`如果我理解正确，灰色图像中的每个像素都映射到其他图像中的单个像素。在这种情况下，地图数组是`numpy.zeros((i.shape[0], i.shape[1], N, 2), dtype=numpy.int32)`因为您需要将 1 x 和 1 y 坐标存储到彼此`N`的数组中，而不是每次都存储完整的第 N 个数组。使用整数索引将进一步减少内存使用。

然后`result[y,x,N,0]`和`result[y,x,N,1]`是`y`和`x`到第 N 个图像的映射。

# iphone - 适用于 iOS 4,5 和 6 的 Twitter

> ID：13321043
> 
> 赞同：-1
> 
> 时间：2012-11-10T10:01:22.523
> 
> 标签：iphone, objective-c, ios

谁能让我知道如何在我的 ios 4,5 和 6 应用程序中使用 twitter 框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:10:41.413

`TWTweetComposeViewController`下面是使用 iOS 5 中包含的 buit-in-twitter 框架创建和展示的代码片段：

包括 twitter 框架工作和导入`#import <Twitter/Twitter.h>`

```
if ([TWTweetComposeViewController canSendTweet])
{
    TWTweetComposeViewController *tweetSheet = 
        [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:@"Initial Tweet Text!"];
    [self presentModalViewController:tweetSheet animated:YES];
} 
```

这对你来说是一个很好的[教程](http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5)。

# mysql - phpmyadmin 插入 csv 文件

> ID：13321045
> 
> 赞同：0
> 
> 时间：2012-11-10T10:01:47.560
> 
> 标签：mysql, sql, csv, phpmyadmin

我有一个 csv 文件，如下所示：

```
"99999999","99999999","AA","AAA","COUNTRYA"
"99999998","99999998","BB","BBB","COUNTRYB" 
```

我更改了这些值，因为它们是私有的。我在表中的 php myadmin 中创建了 5 列。然后我点击导入并上传csv文件，但我不知道该填写什么选项：

字段终止于：

由以下内容包围的字段：

字段转义：

我的问题？我需要填写这些选项以使用 phpmyadmin 将我的 csv 文件插入我的表中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:08:25.037

首先 phpmyadmin 不是一个非常安全的网络应用程序 - 请尝试使用隧道式 mysql 客户端。

为了回答您的问题，它要求您提供文件的格式。

“字段终止于”是询问您的字段是什么分开的，在这种情况下，逗号是

“包围的字段”是要求字段值的边界，在这种情况下，报价是

“字段转义”是询问如果您需要在字段中使用它，您将如何表示封闭字符（引号），在这种情况下应该是`\"`

# gwt - GWT MultiWordSuggestOracle：如何通过后端进行搜索

> ID：13321047
> 
> 赞同：0
> 
> 时间：2012-11-10T10:02:17.387
> 
> 标签：gwt

我对 GWT MultiWordSuggestOracle 有疑问...

根据我看到的示例，为了使用数据填充 oracle，您需要在前端加载数据：

```
private MultiWordSuggestOracle oracleProducts = new MultiWordSuggestOracle();
oracleProducts.clear();
for (ProductDTO product : products) {
    oracleProducts.add(product.getDescription());
}
....
productTextBox = new WatermarkedTextBox();
new SuggestBox(oracleProducts, productTextBox) 
```

一旦你的页面上有 10 个带有自动完成功能的文本字段，并且每个字段都填充了 100 多个字符串，事情就会变得有点慢，尤其是在互联网连接速度较慢的情况下。

是否有替代 oracle / 建议框不需要使用数据预先填充自动完成字段或向后端发送请求以进行搜索的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:37:47.007

您必须`SuggestOracle.requestSuggestions`在那里实现并对后端进行 RPC/RequestFactory/REST 调用。

这就是我们通过对后端进行 REST 调用来实现联系人建议框的方式：

```
@Override
public void requestSuggestions(final Request request, final Callback callback) {
    SearchCriteria criteria = new SearchCriteria(request.getQuery());
    criteria.setPageSize(request.getLimit());
    RestClientFactory.getContactClient().search(criteria,
            new Result<SearchResult<Contact>>() {

                @Override
                public void onFailure(Throwable caught) {
                }

                @Override
                public void onSuccess(SearchResult<Contact> result) {
                    Response resp = new Response();
                    resp.setMoreSuggestions(!result.isLastPage());
                    resp.setSuggestions(ContactMultiWordSuggestion.fromContacts(result.getList()));
                    callback.onSuggestionsReady(request, resp);
                }
            });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:45:14.450

你可以自由地实现`SuggestOracle`你想要的方式。

现在已弃用的 GWT-Incubator 项目有一个[使用 RPC 的示例](http://code.google.com/p/google-web-toolkit-incubator/source/browse/trunk/src/com/google/gwt/widgetideas/client/RPCSuggestOracle.java)，您可以轻松复制和调整它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T10:10:14.220

尝试将 setLimit() 用于 SuggestBox 实例，这应该可以完成工作

# ios - xcode UI 元素约束布局

> ID：13321054
> 
> 赞同：4
> 
> 时间：2012-11-10T10:03:16.240
> 
> 标签：ios, xcode, xcode4.5

我是 Mac OS 和 Xcode 的新手，我的 UI 元素布局有问题，当我把它放在视图上时，模拟器上的元素看起来与它不同，请检查下面的照片，是关于自动布局的吗？

![布局问题](../Images/23164c1a214eddb9d94f1fbb4261dbff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:30:53.610

您需要使用 iOS 6 的`constraints`和`auto layout`功能。

请查看本[教程](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)以获得良好的开端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:32:06.717

[Apple 在教程“ Your Second iOS App](http://developer.apple.com/library/ios/Documentation/iPhone/Conceptual/SecondiOSAppTutorial/CreatingAddView/CreatingAddView.html#//apple_ref/doc/uid/TP40011318-CH6-SW11) ”中提供了对约束的简短介绍

简而言之，当您创建元素时，会自动创建一些约束，并有助于自动为您的项目设置空间。其他的不是自动创建的，您可以通过选择一个元素并使用尺寸检查器或引脚约束来创建它们，以防止碰撞并允许旋转以自动重新定位元素。

# entity-framework - 实体框架和POCO实体，EF版本有区别吗？

> ID：13321055
> 
> 赞同：0
> 
> 时间：2012-11-10T10:03:39.070
> 
> 标签：entity-framework, entity-framework-4

我使用的是 EF 4.0，要生成 POCO 实体，首先我创建 edmx 模型，然后从这个模型中创建我的 POCO 实体。但是，我不知道如果我从 EF 4.0 或 EF 5... 等生成这些 POCO 实体是否有所不同。

我问这个，因为我正在考虑使用具有接口的存储库，并且该接口可以由许多类实现，一个使用 EF 4.0，其他使用 EF 5，其他类使用其他技术。我想打开这扇门。

我的疑问是如何从客户端向存储库说我想要添加、修改或删除一些寄存器。如果我创建一个 POCO 实体，我可以用这个实体创建一个外部 dll，它可以用于实现接口的不同类，但是我如何创建这个实体呢？从 EF 4.0 的 edmx，EF 5 的 edmx，我手动创建了这个（如果数据库很大，需要做很多工作）......等等？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:42:34.790

POCO 实体不绑定到特定的 EF 版本。原因是这些只是没有任何 EF 相关概念的普通类。这样做的副作用是，无论您如何创建它们都无关紧要 - 只要它们没有任何 EF 特定的东西，它们就应该使用 DbContext 和 ObjectContext 在 EF 4、EF 5 上工作。

# jquery - 可汗学院的提示功能是如何编码的

> ID：13321059
> 
> 赞同：2
> 
> 时间：2012-11-10T10:03:52.003
> 
> 标签：jquery, raphael, jquery-svg

我很想知道提示机制是如何在以下 URL 中编码的，

[http://www.khanacademy.org/math/arithmetic/multiplication-division/e/multiplication_3](http://www.khanacademy.org/math/arithmetic/multiplication-division/e/multiplication_3)

当用户点击右侧的“**我想要一个提示**”按钮时。

从我目前发现的情况来看，使用了 MathJax、Raphael JavaScript Library 和 jQuery。

我的理解正确吗？如果是这样，我很想知道这一切是如何结合在一起产生美丽的交互性的，就像它在网站上所做的那样。

高度赞赏任何指针/线索/提示或示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:36:39.797

**方法**

代码非常庞大和复杂，但是使用浏览器内置的开发者工具，我们可以专注于点击提示按钮时发生的事情。

您可以在单击事件上放置一个断点，然后单击提示按钮并查看您在 JavaScript 中的最终位置。不过，在这种情况下，我查看了提示按钮的 id（它只是`hint`），并且因为我们知道该站点正在使用 jQuery，所以搜索了`$("#hint").click`or的出现`$('#hint').click`。一共有三个，但我们想要的是这个：

```
... $("#hint").click(function() {
    var a = z.shift();
    if (a) {
        $(X).trigger("hintUsed"), E += 1;
        var c = z.length + " step" + (z.length === 1 ? "" : "s") + " left";
        $(this).val($(this).data("buttonText") || "I'd like another hint (" + c + ")");
        var d = $(a).parent();
        $(a).appendTo("#hintsarea").runModules(d), X.scratchpad.resize(), z.length === 0 && ($(a).addClass("final_answer"), $(X).trigger("allHintsUsed"), $(this).attr("disabled", !0));
    }
    var g = !f && e.readOnly,
        h = $("#next-question-button").is(":visible");
    !g && !h && tb("problems/" + r + "/hint", b(!1, G, "hint", (new Date).getTime()), function() {}, function() {}, "attempt_hint_queue");
}), ... 
```

然后我们可以检查这些变量的值，进入函数等。

**结果**

流程是这样的：

1.  `z`是一个提示数组，或者更确切地说是 div，其中包含对名为`showHint()`. 数组中的项目数与剩余的提示数相同。
2.  代码获取此数组中的第一个 div 并将其分配给 variable `a`。
3.  计算已使用/剩余多少提示。
4.  div`a`附加到工作区中带有 id 的空 div `hintsarea`。
5.  div 中的 JavaScript`a`被执行：`showHint()`.
6.  `showHint()`执行构成提示的附加计算并为数字和符号添加颜色。

MathJax 用于这种格式。如果您使用开发人员工具检查 DOM，您会看到每个数字和符号都包含在几个动态创建的 span 中，以控制位置和样式。

关于拉斐尔，在这种情况下，它仅用于绘制总和中的水平线。不过，对于其他问题，我认为它用于绘制可以拖动的图像和对象。

顺便说一句，当单击提示按钮时，还会向服务器发送一个 XHR 请求，但这似乎不会影响用户的功能。它只是将统计数据发送回可汗学院，我假设他们将其用于监控和改进功能。

# redmine - 通过电子邮件提交在 Redmine 中设置开始日期和截止日期

> ID：13321063
> 
> 赞同：0
> 
> 时间：2012-11-10T10:04:08.950
> 
> 标签：redmine, email

我正在使用 Redmine 的传入电子邮件功能来创建新问题，但是我在通过电子邮件传递问题的开始日期和截止日期时遇到了问题。

这是 rake 脚本：

```
rake -f [redacted other options] allow_override=start_date,due_date 
```

以下是电子邮件的相关部分：

```
Start date: 11/12/2012 
Due date: 11/15/2012 
```

出于某种原因，所有其他字段都正确通过（包括自定义字段），但是这两个字段拒绝通过。关于如何正确通过 Redmine 问题的开始和结束日期的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:23:15.590

经过一些额外的测试，很明显，电子邮件提交的日期格式必须是 yyyy-mm-dd （无论全局设置中用户指定的日期格式如何）

# javascript - 动态调整图像地图和图像的大小

> ID：13321067
> 
> 赞同：39
> 
> 时间：2012-11-10T10:04:49.073
> 
> 标签：javascript, html, image, map

我目前正在尝试在我的网站上制作一个图像地图，它将根据窗口的大小调整大小......我想知道是否有办法用 HTML 来做这个，或者我必须用 Javascript 或其他来做这个语言。

```
<div style="text-align:center; width:1920px; margin-left:auto; margin-right:auto;">
<img id="Image-Maps_5201211070133251" src="Site.png" usemap="#Image-Maps_5201211070133251" border="0" width="1920" height="1080" alt="" />
<map id="_Image-Maps_5201211070133251" name="Image-Maps_5201211070133251">
<area shape="poly" coords="737,116,1149,118,944,473," href="http://essper.bandcamp.com" alt="Bandcamp" title="Bandcamp"   />
<area shape="poly" coords="1006,589,1418,590,1211,945," href="http://soundcloud.com/essper" alt="Soundcloud" title="Soundcloud"   />
<area shape="poly" coords="502,590,910,591,708,944," href="http://facebook.com/the.essper" alt="Facebook" title="Facebook"   />
</map> 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-02-26T23:54:49.410

我写了一个小库来保持 imageMap 缩放为可调整大小的图像，因此地图在图像缩放时保持同步。当您想要映射百分比缩放图像等时很有用。

它可以与 jQuery 一起使用，也可以不与 jQuery 一起使用。

[https://github.com/davidjbradshaw/imagemap-resizer](https://github.com/davidjbradshaw/imagemap-resizer)

你可以看到它在工作。

[http://davidjbradshaw.com/imagemap-resizer/example/](http://davidjbradshaw.com/imagemap-resizer/example/)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-11-10T12:28:28.560

如果您最终使用 JavaScript 完成任务，这里有一个跨浏览器代码片段，用于调整`MAP`元素中所有区域的大小。

```
window.onload = function () {
    var ImageMap = function (map) {
            var n,
                areas = map.getElementsByTagName('area'),
                len = areas.length,
                coords = [],
                previousWidth = 1920;
            for (n = 0; n < len; n++) {
                coords[n] = areas[n].coords.split(',');
            }
            this.resize = function () {
                var n, m, clen,
                    x = document.body.clientWidth / previousWidth;
                for (n = 0; n < len; n++) {
                    clen = coords[n].length;
                    for (m = 0; m < clen; m++) {
                        coords[n][m] *= x;
                    }
                    areas[n].coords = coords[n].join(',');
                }
                previousWidth = document.body.clientWidth;
                return true;
            };
            window.onresize = this.resize;
        },
        imageMap = new ImageMap(document.getElementById('map_ID'));
    imageMap.resize();
} 
```

`previousWidth`必须等于原始图像的宽度。您还需要在 HTML 中使用一些相对单位：

```
<div style="width:100%;">
<img id="Image-Maps_5201211070133251" src="Site.png" usemap="#Image-Maps_5201211070133251" border="0" width="100%" alt="" /> 
```

[在jsFiddle](http://jsfiddle.net/p7EyT/)工作演示。如果在 IE 中打开 fiddle，`AREA`点击它们时实际上可以看到 s。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-21T10:44:10.860

这是我最简单的解决方案。不需要 jquery 或任何插件。注意，此解决方案不会处理标记中的任何错误，或不按比例调整大小的图像。

```
function mapResizer(maps) {
    if (!maps) {maps = document.getElementsByTagName('map');}
    for (const map of maps) {
        map.img = document.querySelectorAll(`[usemap="#${map.name}"]`)[0];
        map.areas = map.getElementsByTagName('area');
        for (const area of map.areas) {
            area.coordArr = area.coords.split(',');
        }
    }
    function resizeMaps() {
        for (const map of maps) {
            const scale = map.img.offsetWidth / (map.img.naturalWidth || map.img.width);
            for (const area of map.areas) {
                area.coords = area.coordArr.map(coord => Math.round(coord * scale)).join(',');
            }
        }
    }
    window.addEventListener('resize', () => resizeMaps());
    resizeMaps();
}
if (document.readyState == 'complete') {
    mapResizer();
} else {
    window.addEventListener('load', () => mapResizer());
}
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-21T18:34:58.633

作为一个类（ES6）：

```
class ResponsiveImageMap {
    constructor(map, img, width) {
        this.img = img;
        this.originalWidth = width;
        this.areas = [];

        for (const area of map.getElementsByTagName('area')) {
            this.areas.push({
                element: area,
                originalCoords: area.coords.split(',')
            });
        }

        window.addEventListener('resize', e => this.resize(e));
        this.resize();
    }

    resize() {
        const ratio = this.img.offsetWidth / this.originalWidth;

        for (const area of this.areas) {
            const newCoords = [];
            for (const originalCoord of area.originalCoords) {
                newCoords.push(Math.round(originalCoord * ratio));
            }
            area.element.coords = newCoords.join(',');
        }

        return true;
    };
} 
```

用法：

```
var map = document.getElementById('myMapId');
var image = document.getElementById('myImageId');
new ResponsiveImageMap(map, image, 800); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-21T17:50:18.247

您可以将坐标乘以原始图像和样式图像的比率。

```
<img id="paredea" usemap="#PAREDE-A"  src="https://i.imgur.com/o9nrUMR.png">

    <map name="PAREDE-A">
        <area id="paredea0" shape="rect"  onclick="alert('colmeia A')">
        <area id="paredea1" shape="rect"  onclick="alert('colmeia B')">
        <area id="paredea2" shape="rect"  onclick="alert('colmeia C')">
        <area id="paredea3" shape="rect"  onclick="alert('colmeia D')">
        <area id="paredea4" shape="rect"  onclick="alert('colmeia E')"> 

        <area id="paredea5" shape="rect"  onclick="alert('comeia F')">
        <area id="paredea6" shape="rect"  onclick="alert('colmeia G')">
        <area id="paredea7" shape="rect"  onclick="alert('colmeia H')">
        <area id="paredea8" shape="rect"  onclick="alert('colmeia I')">
        <area id="paredea9" shape="rect"  onclick="alert('colmeia J')">  

        <area id="paredea10" shape="rect"  onclick="alert('colmeia K')">
        <area id="paredea11" shape="rect"  onclick="alert('colmeia L')">
        <area id="paredea12" shape="rect"  onclick="alert('colmeia M')">
        <area id="paredea13" shape="rect"  onclick="alert('colmeia N')">
        <area id="paredea14" shape="rect"  onclick="alert('colmeia O')">  
    </map>

    <script>

        var coordsA = [];
        coordsA[0] = "0,0,200,130";
        coordsA[1] = "200,0,400,130";
        coordsA[2] = "400,0,600,130";
        coordsA[3] = "600,0,800,130";
        coordsA[4] = "800,0,1000,130";

        coordsA[5] = "0,160,200,240";
        coordsA[6] = "200,160,400,240";
        coordsA[7] = "400,160,600,240";
        coordsA[8] = "600,160,800,240";
        coordsA[9] = "800,160,1000,240";

        coordsA[10] = "0,270,200,400";
        coordsA[11] = "200,270,400,400";
        coordsA[12] = "400,270,600,400";
        coordsA[13] = "600,270,800,400";
        coordsA[14] = "800,270,1000,400";

        function setcoords(areaid, totalOfAreas) {
            document.getElementById('paredea').style.width = "auto";
            var width1 = document.getElementById('paredea').width;
            document.getElementById('paredea').style.width = "100%";
            var width2 = document.getElementById('paredea').width;
            var ratio = width2 / width1;

            for (var i = 0; i < totalOfAreas; i++) {
                var temp = coordsA[i].split(",");
                var newcoords = "";
                for (var j = 0; j < temp.length; j++) {
                    temp[j] *= ratio;
                    newcoords += temp[j] + ",";
                }
                newcoords = newcoords.substr(0, newcoords.length - 1);

                document.getElementById(areaid + i).coords = newcoords;
            }
        }

       window.onload = function () {
            setcoords("paredea", 15);
        };

        window.onresize = function () {
            setcoords("paredea", 15);
        };
    </script> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-27T09:48:07.050

如果您可以访问 Illustrator 或其他可以生成 SVG 的程序，那么使用 SVG**创建动态图像映射非常容易**。

**这不需要任何编程。**

**这是 Illustrator 的说明** *（只需几秒钟）*****：****

 **1.  在 Illustrator 中打开图像，以新名称保存

2.  将文档大小调整为与图像相同的大小

3.  为地图部分绘制填充矩形（有助于将不透明度设置为 50%）

4.  使用“属性”面板为每个矩形添加一个链接

5.  将所有矩形的不透明度更改为 0%

6.  选择图像并在“链接”调色板菜单中选择“取消嵌入...”（名称无关紧要，我们不会使用图像）

7.  文件 › 另存为 SVG（图像位置：链接，CSS 属性：样式元素，已选中响应）

8.  打开生成的 svg 文件

9.  删除前两行（XML 和 Adob​​e 注释）

10.  更新图像源

11.  将 svg 代码粘贴到您的 html 文档中

这适用于所有主要浏览器。这是 Illustrator 的 SVG 导出设置的屏幕截图：

[![在此处输入图像描述](../Images/21fb20ebc77f11fa85630984d9a338f9.png)](https://i.stack.imgur.com/hQpfE.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-12T23:41:05.247

上周我遇到了同样的问题，我最终为此编写了一个 jQuery 插件。

这是项目 gitHub：

[https://github.com/etienne-martin/mapify](https://github.com/etienne-martin/mapify)

**基本用法：**

```
$("img[usemap]").mapify(); 
```

**活生生的例子**

[http://emartin.ca/mapify/](http://emartin.ca/mapify/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-18T22:49:53.093

为此，您需要具有原始图片的`data-original-coords`属性`coords`

```
$(function () {
    function adjeustCoords() {
        var image=$('img'); //change that to your image selector
        var originalWidth=image[0].naturalWidth;
        var currentWidth=image.width();
        var ratio=currentWidth/originalWidth;
        $("map area").each(function(){
            //change that to your area selector
            var coords=$(this).attr('data-original-coords').split(',');
            coords = coords.map(function (x) {
                return Math.round(x*ratio);
                //i don't know if all browsers can accept floating point so i round the result
            });
            $(this).attr('coords',coords.join());
        });
    }
    adjeustCoords();
    $(window).resize(function(){
        adjeustCoords();
    });
}); 
```

这适用于 chrome 、 firefox 和 edge minimum 版本

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-10T10:34:24.813

您可以使用 CSS sprites 来实现这一点。您将让图像片段仅适合一张图像，这样您只需发出一个 http 请求即可加载所有图像。此技术不需要 javascript，您只需使用`background-position;`属性来移动图像。

这是一种有效的页面优化技术。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-16T20:40:09.340

我只测试了直角坐标，但我认为它应该推广到圆形或多边形

```
function wrap ( img, map ) {
  var originalCoords = [ ],
      test = new Image();

  for ( var i = 0; i < map.areas.length; ++i ) {
    var coords = map.areas[i].coords;
    originalCoords.push( coords.split( "," ).map( parseFloat ) );
  }

  function resize () {
    var ratio = img.width / test.width;
    for ( var i = 0; i < map.areas.length; ++i ) {
      map.areas[i].coords = originalCoords[i].map( function ( n ) {
        return ratio * n;
      } ).join( "," );
    }
  }

  test.addEventListener( "load", function () {
    window.addEventListener( "resize", resize, false );
    resize();
  }, false );

  test.src = img.src;
}

var imgs = document.querySelectorAll( "img[usemap]" );
for ( var i = 0; i < imgs.length; ++i ) {
  var map = document.querySelector( "map[name=" + imgs[i].useMap.substring( 1 ) + "]" );
  wrap( imgs[i], map );
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-20T09:58:22.623

这是我刚刚编写的另一个用于管理图像映射的插件：[https ://github.com/gestixi/pictarea](https://github.com/gestixi/pictarea)

除此之外，这些区域会根据图像的大小自动缩放。请注意，它使用画布来渲染区域。

基本用法：

```
$(function() {
  $('#map').pictarea({
    rescaleOnResize: true
  });
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-15T16:37:13.450

我发现通过`background-size`适当调整 和所有其他 CSS 属性大小和位置，我可以从单个图像映射中获得多个图像大小。

以下 CSS 用于包含多个社交网络图像的 ImageMap。使用 CSS，我可以拉出三个不同大小的单个 Twitter 图标。

```
.twitterIcon64 { /* Actual Size */
    background-size: 300px 282px;
    background: url('/images/social-media-icons.png') no-repeat -18px -109px;
    width: 64px;
    height: 64px;
}
.twitterIcon32 { /* 1/2 size */
    background-size: 150px 141px;
    background: url('/images/social-media-icons.png') no-repeat -9px -54px;
    width: 32px;
    height: 32px;
}
.twitterIcon21 { /* 1/3 size */
    background-size: 100px 94px;
    background: url('/images/social-media-icons.png') no-repeat -6px -36px;
    width: 22px;  /* Round up to avoid truncation */
    height: 22px; /* Round up to avoid truncation */
} 
```

这非常适用于媒体查询（非常动态）。

如有必要，可以使用 javascript 来选择适当的类或计算适当的大小。

在 IE 11、Edge、Firefox 和 Chrome 上测试。**

# gmail - 如何跟踪我发送给某人但他/她忘记在 GMail 中回复我的邮件？

> ID：13321068
> 
> 赞同：-1
> 
> 时间：2012-11-10T10:04:57.687
> 
> 标签：gmail

我有时会向我的合作伙伴发送请求邮件，但是当邮件发送并在我的发件箱中时，如果对方不回复线程，我将不会被提醒。

无论如何，我可以建立一个过滤器或其他东西来找出所有这些类型的邮件吗？从技术上讲，我想跟踪我发送但没有得到回复的所有邮件。

非常感谢任何形式的帮助或讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:47:42.523

显然不是这个问题的好网站，但仍然......试试[Boomerang Chrome](https://chrome.google.com/webstore/detail/boomerang-for-gmail/mdanidgdpmkimeiiojknlnekblgmpdll)扩展。

# datetime - Yii：在数据库中保存日期和时间

> ID：13321069
> 
> 赞同：1
> 
> 时间：2012-11-10T10:05:05.127
> 
> 标签：datetime, model, yii

我无法通过模型在数据库中保存日期。在我的控制器中，如果我在日志中转储从 $_POST 收到的日期，我会以这种格式“10/Nov/2012 07:30”获得日期。如果我使用：

```
$AccountAppointment->start_date=Yii::app()->dateFormatter->format($_POST['AccountAppointment']['start_date'], 'dd/M/yyyy HH:mm'); 
```

我得到错误：

```
Invalid datetime format: 1292 Incorrect datetime value: '10/NoGMT+5/2012 07:30' for column 'start_date' 
```

将 dateFormatter 中的格式更改为 'dd/M/yyyy HH:mm' 或 'dd/MM/yyyy HH:mm' 或 'dd/MMM/yyyy HH:mm' 会引发相同的错误。

Db 是 MySQL 5.0，Yii 版本 1.1.12。

任何帮助将不胜感激，我几乎被卡住了....谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:24:49.610

我找不到将 dd/MMM/yyyy HH:mm 日期格式转换为 MySQL 的任何转换，因此创建了我自己的方法。这只是一种解决方法，一旦我想出一个更优雅的解决方案，我会更新我的答案。以下是我创建的方法：

```
 public function returnDate($inputDate){
    //Input format of date is : dd/MMM/yyyy HH:mm, example: 02/Feb/2012 18:20\. The method converts the format to YYYY-MM-DD H:i which is compliant to MySQL 5.0 or above.
    $retval='';
    $dd=substr($inputDate, 0,2);
    $mm=substr($inputDate, 3,3);
    $yy=substr($inputDate,7,4);
    $tt=substr($inputDate,12,5);
    $month=0;
    switch($mm){
        case "Jan":
            $month='01';
            break;
        case "Feb":
            $month='02';
            break;
        case "Mar":
            $month='03';
            break;
        case "Apr":
            $month='04';
            break;
        case "May":
            $month='05';
            break;
        case "Jun":
            $month='06';
            break;
        case "Jul":
            $month='07';
            break;
        case "Aug":
            $month='08';
            break;
        case "Sep":
            $month='09';
            break;
        case "Oct":
            $month='10';
            break;
        case "Nov":
            $month='11';
            break;
        case "Dec":
            $month='12';
            break;
    }
    $retval=$yy.'-'.$month.'-'.$dd.' '.$tt;
    return $retval;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T10:14:28.490

更改日期选择器中的格式，默认为 yy-mm-dd

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T07:23:20.690

我认为您不了解格式功能。请看下文。

```
/**
 * Formats a date according to a customized pattern.
 * @param string $pattern the pattern (See {@link http://www.unicode.org/reports/tr35/tr35-dates.html#Date_Format_Patterns})
 * @param mixed $time UNIX timestamp or a string in strtotime format
 * @return string formatted date time. Null if $time is null. (the null value check is available since Yii 1.1.11)
 */
public function format($pattern,$time){
----------------------
} 
```

您需要切换日期格式和时间。这是对的：

```
 $AccountAppointment->start_date=Yii::app()->dateFormatter->format('dd/MM/yyyy HH:mm' ,$_POST['AccountAppointment']['start_date']); 
```

希望我能帮助别人:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:58:47.823

我过去曾使用过类似的东西。我使用 CDateTimeParser 来解析日期，然后按照您想要的方式对其进行格式化。

```
echo Yii::app()->dateFormatter->formatDateTime(
    CDateTimeParser::parse($classified->create_date, 'yyyy-MM-dd'
),'medium',null); 
```

我假设你可以这样做：

```
echo Yii::app()->dateFormatter->formatDateTime(
    CDateTimeParser::parse($classified->create_date, 'dd/MMM/yyyy HH:mm'
),'full',null); 
```

或者

```
echo Yii::app()->formatter->datetime(
    CDateTimeParser::parse($classified->create_date, 'dd/MMM/yyyy HH:mm')
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T17:01:38.947

您使用了错误的格式。“Nov” 对应于模式`MMM`，而不是`M`（即月份作为整数，没有任何前导零）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T10:28:47.560

您可以使用内置的 CDateTimeParser：

```
date('Y-m-d H:i:s', CDateTimeParser::parse($input, $format, array('second'=>0))) 
```

测试：

```
$inputs = array('10/Nov/2012 07:30', '31/Jan/2012 23:59');
$format = 'dd/MMM/yyyy HH:mm';
foreach($inputs as $input)
{
    echo $input . ' -> ' . date('Y-m-d H:i:s', CDateTimeParser::parse($input, $format, array('second'=>0)));
    echo '<br>';
} 
```

输出：

```
10/Nov/2012 07:30 -> 2012-11-10 07:30:00
31/Jan/2012 23:59 -> 2012-01-31 23:59:00 
```

此外，我为上面编写了一个包装函数以考虑比较运算符，因此您可以在 CGridView 过滤器中使用本地化的日期时间。也许它可以提供任何帮助。请参阅：[https ://stackoverflow.com/a/53759001/3090890](https://stackoverflow.com/a/53759001/3090890)

# css - 定位框架集或框架

> ID：13321075
> 
> 赞同：1
> 
> 时间：2012-11-10T10:06:19.220
> 
> 标签：css, positioning, frame, frames, frameset

首先：我知道使用`frameset`or并不聪明`frame`，我知道，但这是一种特殊情况，我只想有一个简单的答案：**我可以定位一个框架或框架集，它现在在最远留在屏幕上，这样我就可以在屏幕中间找到它？**我可以移动框架中的内容，但框架本身不会移动。我怎样才能做到这一点？

我尝试了marginwidth，但这并没有解决它。

这是代码：

```
<frameset id=\"Q\" rows=\"75,*\" border=\"0\">
<frame name=\"haha\" src=\"home.php\" noResize scrolling=\"no\" />
<frameset cols=\"350,*\">
    <frame name=left src=\"$leftBar\">
    <frame name=main src=\"home.php?process=random\" frameborder=\"3\" noresize=\"noresize\" />
</frameset>
</frameset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:18:42.000

将框架元素的显示设置为阻塞并使用自动左右边距，如下所示：

```
iframe {
    display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

[http://jsfiddle.net/83zQX/1/](http://jsfiddle.net/83zQX/1/)

# javascript - 构建可调整大小的 jQuery Mobile 轮播

> ID：13321079
> 
> 赞同：0
> 
> 时间：2012-11-10T10:06:50.830
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在尝试很多天来找到解决小问题的方法：

我看到许多 带有导航按钮的**轮播图像滑块**，因此您可以动态初始化图像数量并构建滑块，以便您可以使用 NEXT 和 PREV 按钮进行导航，但所有这些都无法调整大小。例如：[http ://www.bxslider.com/examples/display-move-multiple-slides-once-example-one](http://www.bxslider.com/examples/display-move-multiple-slides-once-example-one)

我的问题是我想使用`jQuery Mobile`并显示它`mobile`，每部手机的分辨率都在变化。测试它是否适合的最佳方法是调整浏览器窗口的大小并检查滑块是否显示。在上面的那个例子中，它的大小是不可调整的。

我如何用 3 个图像构建一个类似的东西，1 个在中间，2 个在 conners 中，下面有文本，导航按钮可以通过 1 个图像和重要的薄层滚动图像，以便调整大小。

找到类似的电话示例：http: [//m.husqvarnacp.com/us/](http://m.husqvarnacp.com/us/)但它不可读。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:39:13.360

如果您想根据浏览器窗口调整大小来缩放页面，那么您应该看看这种技术。 [如何实现在调整浏览器窗口大小时缩放的网页？](https://stackoverflow.com/questions/90595/how-to-implement-a-web-page-that-scales-when-the-browser-window-is-resized)

如果问题只是图像大小不同，那么您可以固定图像的高度并让宽度变化，这样滑块就不会影响页面的布局。还可以考虑这个画廊滑块插件，[Step Carousel 插件](http://www.dynamicdrive.com/dynamicindex4/stepcarousel.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:39:18.280

我设法使用 flexslider 实现了这一点：[http ://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

它非常易于设置，正如您在演示 ( [http://flexslider.woothemes.com/](http://flexslider.woothemes.com/) ) 中所见，它具有响应性。

它也适用于触摸事件，因此非常适合移动设备。

# java - 在 EJB 中使用异步注解时出错

> ID：13321082
> 
> 赞同：0
> 
> 时间：2012-11-10T10:07:15.993
> 
> 标签：java, asynchronous, ejb, websphere, ejb-3.1

在 EJB 中调用`@Asynchronous`方法时，我看到一个错误被记录下来，尽管方法执行工作正常。关于出了什么问题的任何建议？WebSphere V8 上的 EJB 3.1

界面是：

```
@Local
public interface MyService {
    @Asynchronous
    public void doJob(MyObj o);
} 
```

实现类：

```
@Stateless
@Local(MyService.class)
public class MyBean implements MyService {
    @Asynchronous
    public void doJob(MyObj o) {

        // insert to DB

   }
} 
```

**错误信息**

*CWWAM1101E: 在类 {0} 中，方法 {1} 使用 @Asynchronous 注释，但必须应用于 bean 类的业务方法或本地/远程业务接口的业务方法。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:01:46.150

当您实现一个接口 ( `MyService`) 时，您的 bean 不会公开一个无接口视图。这意味着 EJB 容器必须“做某事”的所有方法都必须在该接口中定义。

很可能`void doJob(...)`未定义`MyService`。如有疑问，请显示 和 的完整`doJob`定义`MyService`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T03:54:48.580

这是 WebSphere V8.0.0.5 之前的一个缺陷，预计在 V8.0.0.6 中会进行修复

# javascript - 粘性模态在放大/缩小和浏览器调整大小时改变它的位置

> ID：13321085
> 
> 赞同：1
> 
> 时间：2012-11-10T10:07:46.900
> 
> 标签：javascript, jquery, html, css

我的模态有问题。当使用 jquery 单击按钮时，我已经完成了让它向下滑动。现在我的问题是每当我放大、缩小或调整浏览器大小时，模态的位置都会发生变化。我希望模态坚持我想要的位置。这是我的代码：

```
 <script> 
$(document).ready(function(){
$("#login").click(function(){
$("#form").slideDown(400);
 });
  $("#close").click(function(){
$("#form").slideUp(400);
 });
});
</script>

<style type="text/css">
#form
{
display:none;
position:absolute !important;
top:300px !important;
left:820px !important;
margin-top:-120px !important;
margin-left:-500px !important;
z-index:101;
}
</style> 
```

正如您在上面的代码中看到的那样，我使用 top 和 left 固定了我的模态在 CSS 中的位置。但是当我缩小/放大或调整浏览器大小时，位置会发生变化。我怎样才能让它固定在一个固定的位置？任何帮助，将不胜感激。

更新：我自己修好了。我只需要删除css中的一些代码。这是新的 CSS 代码：

```
<style type="text/css"> 
#form
{
display:none;
position:absolute !important;
z-index:101;
}
</style> 
```

希望这对有同样问题的每个人都有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:10:31.003

使用`position: fixed`而不是`absolute`

# sql - SQL 查询以按名称计算唯一服务和组

> ID：13321086
> 
> 赞同：1
> 
> 时间：2012-11-10T10:07:47.683
> 
> 标签：sql, sql-server, tsql

我对 SQL 相当陌生，但我被困在一个查询中。我有下表称为`Appointment`

```
NAME    SERVICE DATE
-----------------------------    
John    Abc 2012-11-10
Michael Xyz 2012-11-10
Denis   Xyz 2012-11-10
Denis   Pqr 2012-11-06
John    Abc 2012-11-06
Michael Abc 2012-11-05
Sofy    Abc 2012-11-04
John    Pqr 2012-11-01
Michael Pqr 2012-11-01
Michael Abc 2012-10-21
John    Abc 2012-10-23
John    HFD 2012-10-23
John    BHU 2012-11-09
Michael KSD 2012-11-08 
```

我想要做的是计算日期`2012-11-01`和`2012-11-10`.

以下是所需的输出

```
NAME    Abc Pqr Xyz
--------------------------------    
John    2   1   0
Michael 1   1   1
Denis   0   1   1
Sofy    1   0   0 
```

这是我尝试过的：

```
SELECT  Name, COUNT(Distinct Service) 
FROM    [Appointment] 
WHERE   [DATE] between '2012-11-01 00:00:00.000' and '2012-11-10 23:59:59.999' 
AND     (Service = 'Abc' or Service = 'Pqr' or Service = 'Xyz') 
GROUP BY Name 
```

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T11:26:35.327

```
SELECT Name,
       SUM(CASE WHEN Service = 'Abc' THEN 1 ELSE 0 END) Abc,
       SUM(CASE WHEN Service = 'Pqr' THEN 1 ELSE 0 END) Pqr,
       SUM(CASE WHEN Service = 'Xyz' THEN 1 ELSE 0 END) Xyz
FROM   TableName
WHERE [Date] BETWEEN CAST('2012-11-01' AS DATE) AND 
                     CAST('2012-11-10' AS DATE)
GROUP BY Name 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/a1d9b/25)

或者

```
SELECT Name, Abc, Pqr, Xyz
FROM 
  (
      SELECT [Name], [Service]
      FROM TableName
      WHERE [Date] BETWEEN CAST('2012-11-01' AS DATE) AND 
                           CAST('2012-11-10' AS DATE)
  ) p
  PIVOT
  (
      COUNT ([service])
      FOR [Service] IN ( [Abc], [Pqr], [Xyz] )
  ) AS s 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/a1d9b/35)

# web-services - 动态 RESTful 服务注册和发现

> ID：13321090
> 
> 赞同：2
> 
> 时间：2012-11-10T10:07:58.940
> 
> 标签：web-services, rest, load-balancing, distributed-computing, saas

在我的 Web 应用程序中，我有几个服务器模块通过 RESTful 服务响应客户端模块。

让我在这里给出一个用例。假设我正在构建一个社交网络，其中服务器模块的实例负责管理不同用户的推文。

这些服务器中的每一个都处理对不同数据集的请求。例如，Server1 将为用户 U1、U2 和 U3 的推文提供服务，Server2 为用户 U4 和 U5 提供推文，Server3 为用户 U6、U7 和 U8 提供推文。这些服务器的实现是相同的，只是它们处理的用户数据不同。此配置甚至可能在运行时更改，即处理特定用户推文数据的责任可以从一台服务器更改到另一台服务器。

现在假设客户端模块需要用户 U3 的数据。它应如何确定（在运行时）它必须联系哪个服务器。

基本上，实现这种动态服务注册和发现的各种方法是什么？这是一个实时应用程序，希望通过客户端模块缓存服务发现结果，以保存网络跃点以在每个请求上进行服务发现。

是否有一些现有的开源解决方案可以帮助我提供此功能，或者我应该继续自己实现它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:47:53.937

这看起来像是反向代理的职责。

[清漆](https://www.varnish-cache.org/)就是一种情况。我建议您将它与它结合起来，因为它已经满足了您的大部分需求。

# jquery - jQuery 网络摄像头/flash 长延迟

> ID：13321091
> 
> 赞同：2
> 
> 时间：2012-11-10T10:08:18.023
> 
> 标签：jquery, webcam

我正在使用这个[jQuery 网络摄像头插件](http://www.xarg.org/project/jquery-webcam-plugin/)来确定用户是否连接了网络摄像头。

```
<div id="webcam"></div>                         
<script>
    $("#webcam").webcam({

        mode: "callback",
        debug: function (type, string) {
            if (type == 'error'){
                alert('error');
            }
        },
    }); 
</script> 
```

问题是，它仅在 5-6 秒后弹出警报，而在插件的网站上，您可以在页面加载时看到消息，没有任何延迟......

可能是什么问题？

# java - 在 onCreate() 中获取状态栏高度

> ID：13321096
> 
> 赞同：1
> 
> 时间：2012-11-10T10:09:43.097
> 
> 标签：java, android

我正在尝试获取`statusBar`内部高度，`onCreate`但我在这里找到的方法需要已经绘制了一些视图来获取它的大小，然后计算 statusBar 高度。

因为我在 onCreate 上，所以我还没有画出它的大小

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T07:09:31.230

```
root = (ViewGroup)findViewById(R.id.root);
root.post(new Runnable() { 
public void run(){
    Rect rect = new Rect();
    Window win = getWindow();
    win.getDecorView().getWindowVisibleDisplayFrame(rect);
    int statusHeight = rect.top;
    int contentViewTop = win.findViewById(Window.ID_ANDROID_CONTENT).getTop();
    int  titleHeight = contentViewTop - statusHeight;
    Log.e("dimen", "title = " + titleHeight + " status bar = " + statusHeight);
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:56:46.450

使用全局布局监听器

```
public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);

     // inflate your main layout here (use RelativeLayout or whatever your root ViewGroup type is
     LinearLayout mainLayout = (LinearLayout ) this.getLayoutInflater().inflate(R.layout.main, null); 

     // set a global layout listener which will be called when the layout pass is completed and the view is drawn
     mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(
     new ViewTreeObserver.OnGlobalLayoutListener() {
          public void onGlobalLayout() {
               // measure your views here
          }
     }
 );

 setContentView(mainLayout); 
```

[编辑]

只需执行一次：

```
ViewTreeObserver observer = mainLayout.getViewTreeObserver();

observer.addOnGlobalLayoutListener (new OnGlobalLayoutListener () {
@Override
public void onGlobalLayout() {
    // measure your views here
    mainLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);
   }
 }); 
```

# gridview - 在 GridView windows 8 中更改特定行/列的背景颜色？

> ID：13321104
> 
> 赞同：0
> 
> 时间：2012-11-10T10:10:31.833
> 
> 标签：gridview, windows-8, microsoft-metro

我们如何更改 GridView 的特定行或特定列的背景颜色。我试图这样做，但似乎我们不能使用 xaml 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:37:50.107

IMO 最简单的方法是制作自定义 GridView 类并覆盖 PrepareContainerForItemOverride 方法，您可以在那里为特定的 GridView 项目进行各种自定义。

这是示例：

[http://leontech.wordpress.com/2012/03/01/customizing-gridview-items-in-metro-app-4/](http://leeontech.wordpress.com/2012/03/01/customizing-gridview-items-in-metro-app-4/)

另一种方法是使用 DataTemplateSelector 并为每个项目选择适当的模板。

# java - Method.invoke 和异常

> ID：13321111
> 
> 赞同：0
> 
> 时间：2012-11-10T10:11:49.497
> 
> 标签：java, exception, methods, invoke

`compare(T o1, T o2)` 如果我如何在方法中使用调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:20:26.287

正如 Aubin 指出的那样：比较器被调用非常非常多次！在比较器中使用慢反射似乎是一种壮丽而光荣的自杀方式。我无法想象不得不这样做（只是因为你~~不能~~不应该把苹果和橙子比较，如果你只有苹果，你已经知道如何比较它们了）！

我不明白，你为什么要这样做。如果您发布到目前为止的代码，这将更加清晰，我们可以为您提供更好的帮助！

**但是**，要回答有关如何捕获通过反射调用的方法引发的异常的问题：

查看[Method.invoke()的 API 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)

它明确指出`InvocationTargetException`在调用的方法因抛出异常而终止时抛出：

> [InvocationTargetException](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/InvocationTargetException.html) - 如果底层方法抛出异常。

所以这就是你可以做的，使用`Throwable.getCause()`来获取原始异常：

```
try {
    myMethod.invoke(myArgs...);
} catch(InvocationTargetException e) {
    Throwable myOriginalException = e.getCause();
} 
```

# .net - .NET Entity Framework 如何添加导航属性

> ID：13321112
> 
> 赞同：1
> 
> 时间：2012-11-10T10:11:49.373
> 
> 标签：.net, entity-framework, navigation-properties

我已经使用实体框架创建了数据库模型，该模型在收件人和邮件列表之间具有多对多的关系。当我生成数据库时，它没有让我访问链接表，而只是访问收件人中的属性-recipient.mailingList。我尝试将新收件人添加到数据库并创建新收件人，正确添加了所有属性。检查并有效。但是当我将 MailingList 添加到收件人时，它给了我错误：“英文翻译：IEntityChangeTracker 的多个实例无法引用实体对象。”。我添加了 MailingList 如下。

```
Recipient newRecipient = new Recipient();

// some added properties.

newRecipient.MailingList.Add(chosenMailingList);
context.Rcipients.AddObject(newRecipient); 
```

在出错之前，我可以看到 newRecipient 添加了 mailingLists。在我尝试分配 MailingList 之前，程序添加了 newRecipient 没有问题。谁能告诉我如何将邮件列表添加到收件人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:20:39.873

我认为您不小心同时有两个上下文。您必须从添加新收件人的同一上下文实例中获取 selectedMailingList。

# ruby-on-rails - Ruby on Rails - format.js {} 重定向到哪里？

> ID：13321113
> 
> 赞同：1
> 
> 时间：2012-11-10T10:11:55.113
> 
> 标签：ruby-on-rails, templates, redirect, coffeescript, format

如果我的问题听起来很完整，我首先道歉，但我是 Rails 的新手，我完全不确定框架中发生了什么。

我正在阅读一本关于“Ruby on Rails”的书，我只需要在单击按钮时从表中删除一些行。我在 assets/javascript/*.js.coffee 添加的 JavaScript 如下：

```
if $("#cart").length is 1
  $("#cart").hide "blind",
    direction: "vertical"
  , 1000
$("#cart tr").not(".total_line").remove() 
```

原始的 JavaScript（因为我是咖啡 js 的新手，所以我使用了一个在线转换器来转换它，我不确定它是否正确）：

```
if ($('#cart').length == 1) { $('#cart').hide("blind", {direction: "vertical" }, 1000); }

$('#cart tr').not('.total_line').remove(); 
```

我在控制器的destroy方法中添加了：

```
format.js {} 
```

现在方法看起来像：

```
 def destroy
    #@cart = Cart.find(params[:id])
    #@cart.destroy
    @cart = current_cart
    @cart.destroy
    session[:cart_id] = nil

    respond_to do |format|
      #format.html { redirect_to store_url,notice: 'Your cart is currently empty' }
      format.js { }
      format.html { redirect_to store_url }
      format.json { head :no_content }
    end
  end 
```

但它给了我以下错误（在单击应该调用js的按钮之后）：

> 模板丢失
> 
> 缺少模板 carts/destroy、application/destroy with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}。在以下位置搜索：*“/home/gotqn/Aptana Projects/depot/app/views”

经过一番搜索，我发现这个问题[模板缺失](https://stackoverflow.com/questions/6495046/template-is-missing)，它说我需要重定向到我的方法中的某个地方。我只是尝试写：

```
format.js {head :no_content } 
```

我确实没有再次出现错误，但没有执行 JavaScript。

我真的需要一些帮助来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:23:59.440

资产不是动态的，它们是在服务器启动时生成的（至少在生产时）。您需要一个`view/carts/destroy.js.erb`包含所需代码的模板。如果 js 本身是静态的，那么你可以在这个模板中使用要执行的资产文件。

# java - 取消停靠 JPanel 隐藏 JMenuBar

> ID：13321117
> 
> 赞同：1
> 
> 时间：2012-11-10T10:12:36.943
> 
> 标签：java, macos, jdialog, docking, jmenubar

我正在尝试以这样一种方式在 JFrame 中取消停靠 JPanel，以便在取消停靠时将 JPanel 与 JFrame 分开。我遇到的问题是，当我专注于未停靠的 JPanel 时，我正在使用的 JMenuBar 消失了。我目前正在使用 JDialog 来取消停靠 JPanel。JMenuBar的消失是因为JDialog，因为在使用mac osx的时候，屏幕顶部的JMenuBar对于JDialogs是不可用的。

有谁知道如何取消对接（以我可以保留 JMenuBar 的方式），或者甚至解决我遇到的问题？

这里有图片来给出这个问题的视觉想法。

![在此处输入图像描述](../Images/44050dbc2ae54d9d3fe39a1b94980024.png)

在第二张图中，顶部的 JMenuBar 消失了。我暂时在 JDialog 的顶部添加了 JMenuBar，否则我不能再使用键盘快捷键了。 ![在此处输入图像描述](../Images/82fbe68482d9ecc92d5cd1dcebb6273b.png)

如果有任何问题，请不要犹豫。

提前致谢

# php - 选择下拉列表 yii 的值

> ID：13321122
> 
> 赞同：0
> 
> 时间：2012-11-10T10:12:51.140
> 
> 标签：php, yii

我正在使用表单生成器来创建表单。我制作了这段代码来生成下拉列表，但是我无法选择所需的选项。

```
'box'=>array(
        'type'=>'dropdownlist',
        'items'=>User::model()->getListUsers(),         
        'prompt'=>'Please select:',
      ) 
```

我尝试添加一个数组键`'select' =>85`来默认选择 85 id 值，但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T10:22:38.163

使用 htmlOptions 数组。

一个快速的谷歌导致这个例子应该可以帮助你。

```
$form->dropDownList($model,'sex',array('1'=>'men','2'=>'women'), array('options' => array('2'=>array('selected'=>true)))); 
```

在你的情况下，我会想象你需要做的

```
'box'=>array(
        'type'=>'dropdownlist',
        'items'=>User::model()->getListUsers(),         
        'prompt'=>'Please select:',
    'htmlOptions'=>array('options' => array(
                        '85'=>array('selected'=>true)
                        )
                );
      ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:40:30.593

谢谢@艾伦

稍微修改你的答案就可以了。下面的代码对我有用。

```
'box'=>array(
        'type'=>'dropdownlist',
        'items'=>User::model()->getListUsers(),         
        'prompt'=>'Please select:',
        'options' => array('85'=>array('selected'=>true))
      ) 
```

# java - 无法在简单的 java webapp 中加载静态内容

> ID：13321126
> 
> 赞同：1
> 
> 时间：2012-11-10T10:13:33.697
> 
> 标签：java, jsp, servlets

我有具有以下结构的 Java Web 应用程序

```
WebContent->images->image.jpg
          ->js->test.js 
```

我尝试使用以下代码在我的 jsp 中显示图像。

```
<img src="${pageContext.request.contextPath}/images/image.jpg" width="500" height="500" /> 
```

Firebug 显示带有以下 URL 的 GET 请求

```
 http://localhost:8080/test/images/image.jpg 
```

有 200 ok 响应，但什么也不显示。

我检查了这些问题：

[无法在 Web 应用程序中加载静态内容（图像/JS）](https://stackoverflow.com/questions/8509056/unable-to-load-static-contents-images-js-in-web-application)

[调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-find-relative-resources-like-css-images-and-links-when-cal/3658735#3658735)

但没有帮助。我在做什么有什么问题吗？

我的 servlet 映射

```
<servlet>
<servlet-name>test</servlet-name>
<servlet-class>com.test.HomeServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>test</servlet-name>
<url-pattern>/</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T10:56:13.070

问题是您的 servlet 正在捕获所有请求并将其传递给 HelloServlet。

你需要避免给“ `<url-pattern>/</url-pattern>`”。

尝试将 url 模式更改为“ `<url-pattern>/test</url-pattern>`”

# java - Apache Commons Daemon procrun 访问在 Windows 7 上被拒绝

> ID：13321132
> 
> 赞同：1
> 
> 时间：2012-11-10T10:14:03.960
> 
> 标签：java, windows, windows-services

我尝试运行附带的 Windows 示例：

> commons-daemon-1.0.10-src\src\samples\ProcrunService.java

我编译得很好，但是当我运行 ProcrunServiceInstall.cmd 时，我得到了

> 访问被拒绝

我也像这样运行命令：

```
prunsrv //IS//ProcrunServiceJvm --DisplayName="ProcrunServiceJvm" --Startup=auto --Install=d:\dev\java\libs\commons-daemon-1.0.10-src\commons-daemon-1.0.10-src\dist\prunsrv.exe --StartMode=java --StopMode=java --Classpath=d:\dev\java\libs\commons-daemon-1.0.10-src\commons-daemon-1.0.10-src\dist\ProcrunService.jar --StartClass=org.eclipse.jetty.start.Main  --StopClass=org.eclipse.jetty.start.Main --StartMode=java --StartClass=ProcrunService --StartParams=start --StopMode=java  --StopClass=ProcrunService  --StopParams=stop 
```

我得到错误：

```
[2012-11-10 12:03:29] [error] Unable to open the Service Manager
[2012-11-10 12:03:29] [error] Access is denied.
[2012-11-10 12:03:29] [error] Commons Daemon procrun failed with exit value: 8 (Failed to install service)
[2012-11-10 12:03:29] [error] Access is denied.
Access is denied.
Failed to install service 
```

这里有什么问题 ？它是我的家用电脑，我拥有文件的所有权利和控制权

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:12:01.320

尝试在具有管理员权限的提示符下运行您的命令。右键单击 CMD.exe 图标并选择“以管理员身份运行”以这种方式启动它。

# php - php - 在两个不同的 div 中循环输出？

> ID：13321134
> 
> 赞同：1
> 
> 时间：2012-11-10T10:14:29.897
> 
> 标签：php, html, css

我想在一行的每一侧输出我的 sql 行，而不会中断行。例如，我想最终得到的 html/css 代码是这样的：

```
<div id='container'>

 <div style='float:left;'>
   Even loops here..
 </div>

 <div id='line' style='float:left;'>
 </div>

 <div style='float:right;'>
   Uneven loops here..
 </div>

 <div style='clear:both;'></div>
</div> 
```

有没有办法在两个不同的 div 中输出 sql 行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:56:11.823

只需编写两个不同的查询或获取所有行并将其放入数组中并像这样过滤它们：

```
$array = array();
while($row = mysql_fetch_array($results)){
    $array[] = $row['number']; 
```

或者只是使用 $row 作为一个数组来过滤 }

```
print_r(array_filter($array, "odd"));
echo "Even:\n";
print_r(array_filter($array, "even")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:56:55.353

试试这个代码：

```
<div id='container'>

 <div style='float:left;'>
   <?php
   $ct_row = 0;
   foreach ($array as $one) :
   if (($ct_row % 2) == 0) {
        echo $one;
   }
   $ct_row++;
   endforeach;
   ?>
 </div>

 <div id='line' style='float:left;'>
 </div>

 <div style='float:right;'>
   <?php
   $ct_row = 0;
   foreach ($array as $one) :
   if (($ct_row % 2) != 0) {
        echo $one;
   }
   $ct_row++;
   endforeach;
   ?>
 </div>

 <div style='clear:both;'></div>
</div> 
```

# c# - Javascript 函数不会从代码隐藏中调用

> ID：13321135
> 
> 赞同：2
> 
> 时间：2012-11-10T10:14:37.703
> 
> 标签：c#, javascript

我在 javascript 中有带参数的函数，我想在 Gridview 绑定其数据时多次调用此函数。所以我把这样的代码

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    if (((DataRowView)e.Row.DataItem) != null)
 {
Page.ClientScript.RegisterStartupScript(this.GetType(),new Random().Next(100).ToString(), 
                        "likeStatus('"+argument+"')", true);
 }
} 
```

每次我更改的值，`key`但这个函数只被调用一次。所以请帮助我在gridview绑定的每次迭代中调用函数应该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:08:05.640

问题是，如果您需要随机性，则需要使用相同的实例，`Random`并且不能每次都创建一个新实例。你现在的做法可能每次都会产生相同的价值。（另请注意，随机值与唯一值不同）
为了解决这个问题，我会做一些不同的事情。

`StringBuilder`在你的类中声明一个字段。在绑定网格之前创建它：

```
sb = new StringBuilder();
gridView.DataBind(); 
```

然后在写入构建器的`RowDataBound`情况下。`GridView`

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    if (((DataRowView)e.Row.DataItem) != null)
       sb.Append("likeStatus('"+argument+"');");
} 
```

最后在`PreRender`注册脚本字符串

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "MyScript", 
                        sb.ToString(), true); 
```

或者使用唯一值作为键，例如`Guid.NewGuid().ToString()`

# javascript - IMG 和 URL bbcode 的安全性

> ID：13321136
> 
> 赞同：3
> 
> 时间：2012-11-10T10:14:47.220
> 
> 标签：javascript, regex, bbcode

在安全地解析 bbcode 时，我遇到了一些困难，特别是 [img] 和 [url]。语言不太重要，但这是关于 JavaScript 的。）

1.  URL：不久前，用户可以在我的网站上写 [url=#" onclick="alert('test');"]Link[/url]，当其他人点击链接时，会出现警报。但是，通过用任何内容替换所有双引号和单引号，即删除它们，警报hax不再起作用。我的问题是这是否对url足够安全？或者还有其他我需要注意的情况吗？

2.  图片：img bbcode 需要哪些安全功能？删除引号并检查 url 的结尾是否以已知的图像文件类型（如 .png 或 .jpg）结尾是否足够？还是我需要做更多？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:37:02.457

根据我的评论中的警告，我建议您将 URL 的字符列入白名单：az、0-9、&、.、/、?、:、= 等。然后将 替换为`.*?`您允许的字符：

```
/\[img\]([a-z0-9:&?=\/\.%]+?)\[\/img\]/ig
/\[url\=([a-z0-9:&?=\/\.%]+?)\](.*?)\[\/url\]/ig 
```

这将涵盖我认为的大多数情况，但国际 URL 除外。此正则表达式中不允许使用引号，因此无需转义它们。它们的意思是表示为`%22`。此外，这不会验证 URL，但我相信只能防止 XSS。

[url] 和 [img] 都带有一个 URL，所以这部分正则表达式是相同的。而且您不应该检查 .png 或 .jpeg，因为许多图像没有带有显式扩展名的 URL。

那么正则表达式匹配中的 url 组将只需要为 HTML 进行转义。

[完整代码](http://jsfiddle.net/2t7Nu/4/)：

```
var imgRe = /\[img\]([a-z0-9:&?=\/\.%;]+?)\[\/img\]/ig;
var linkRe = /\[url\=([a-z0-9:&?=\/\.%;]+?)\](.*?)\[\/url\]/ig

$('#convert').click(function() {
    var output = $('#bbcode').val();

    // Escape HTML special characters
    // It's wrong to escape them before converting the bbcode into HTML
    // but I couldn't think of issues
    output = output.replace(/&/g, '&amp;');
    output = output.replace(/</g, '&lt;');
    output = output.replace(/"/g, '&quot;');

    // Convert bbcode
    output = output.replace(imgRe, function(str, url) {
        return '<img src="' + url  + '"/>';
    });

    output = output.replace(linkRe, function(str, url, txt) {
        return '<a href="' + url  + '">' + txt + '</a>';
    });

    // print output
    $('#pre').html(output);
}); 
```

# javascript - Phonegap - Javascript，从对象中生成变量

> ID：13321137
> 
> 赞同：-1
> 
> 时间：2012-11-10T10:14:55.523
> 
> 标签：javascript, variables, object, cordova

使用 Phonegap 及其 SQL 函数，我的查询返回形式为

```
results.rows.item(i).Title 
```

其中 results.rows.item(i) 是每个对象，而 .Title 将指定要选择的字段。

这只是几个字段中的一个，所以我不想多次写出一大行，而是想将它声明为一个变量。

```
var details = "results.rows.item(i).Title + \' \' " +
        "+ results.rows.item(i).Street + ' ' " +
        "+ results.rows.item(i).PostalCode + ' ' " +
        "+ results.rows.item(i).Contact + ' ' " +
        "+ results.rows.item(i).ContactEmail + ' ' " +
        "+ results.rows.item(i).ContactPhone + ' ' " +
        "+ results.rows.item(i).OperatingHours + ' ' " +
        "+ results.rows.item(i).Operator + '</p></div>'" 
```

当然，由此产生的问题是，当我尝试在以下行中使用它时，它是一个字符串

```
$("#locations").append('<div data-role="collapsible"><h3>' + results.rows.item(i).Title + '</h3><p>' + details); 
```

我能做些什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:18:54.820

如果我没有正确理解您的问题，那么您可以通过使用括号表示法而不是点表示法将字符串用作属性名称：

```
var details = [];
var item = results.rows.item(i);
["Title", "Street", "PostalCode", "Contact", "ContactEmail", "ContactPhone", "OperatingHours", "Operator"].forEach(function(field) {
    details[details.length] = item[field];
});
details = details.join(' '); 
```

（请注意，它使用 ES5 的[`forEach`](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.18)。如果您可能未在启用 ES5 的环境中运行，则可以使用 shim [或重写上述内容以使用`for`循环]。）

基本上，在 JavaScript 中，您有两种访问对象属性的选项： 您可以使用带点的文字属性名称，例如`foo.bar`；或者您可以使用带括号的符号和字符串，例如`foo["bar"]`. 在后一种情况下，字符串不必是字符串文字，它可以是任何表达式的结果。所以所有这些输出的`bar`属性`foo`：

```
var foo = {bar: "baz"};
console.log(foo.bar);        // "baz"
console.log(foo["bar"]);     // "baz"
var s = "bar";
console.log(foo[s]);         // "baz"
var b = "b", a = "a", r = "r";
console.log(foo[b + a + r]); // "baz" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:37:15.340

这将为当前行中的所有字段附加值

```
var rowData = results.rows.item(i);
var fieldName,fieldValue;

for(var fieldName in rowData) {
    fieldValue = rowData[fieldName];

    $("#locations").append('<div data-role="collapsible"><h3>' + fieldValue + '</h3><p>' + details);

} 
```

# ruby-on-rails-3 - 世界宝石的国家名称

> ID：13321138
> 
> 赞同：0
> 
> 时间：2012-11-10T10:15:05.957
> 
> 标签：ruby-on-rails-3

我正在寻找宝石或只是世界各国的数据。我只想要名字，没有简码，即美国/英国。我看过的选项对我的需求来说有点过分了。有人知道这样的宝石吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T20:32:08.453

使用geocoder的gem非常强大，用户很容易[http://www.rubygeocoder.com/](http://www.rubygeocoder.com/)

使用 <%= select("venue", :country , Country.all.collect {|c| [ c[0] , c[1] ] }, {:include_blank => ' '}) %>

用于创建选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:18:12.560

找到了，符合我的要求

宝石“terrarum”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T10:18:15.757

也许[这个列表](http://www.nationsonline.org/oneworld/countries_of_the_world.htm)是你需要的？简短而简单。

# javascript - ASP.NET 中的动画

> ID：13321139
> 
> 赞同：2
> 
> 时间：2012-11-10T10:15:10.220
> 
> 标签：javascript, asp.net, animation

我在完成需要在 Web 应用程序中将线条显示为动画的任务时遇到困难。

线数据存储在数据库中，由 x、y 和时间信息组成。x 和 y 坐标指定绘制点的位置，而时间表示各个点的时间戳（以毫秒为单位）。

例如，点 1 (x=10, y=23, t=152) 点 2 (x=21, y=29, t=385) 点 3 (x=15, y=20, t=506) .. ……

因此，任务是根据给定的时间戳在 Web 应用程序中显示这些点。

我的问题首先是我不知道使用什么样的图形插件，然后如何实现它（即如何使用计时器，如何做动画等）。

我将不胜感激您的任何帮助！如果您需要有关此任务的更多信息，请告诉我。我很乐意提供。

亲切的问候，弗里达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:55:38.737

我想我会用[Raphaël 来做](http://raphaeljs.com/)这样的事情。它易于使用并支持所有主流浏览器。动画线条绘制可能有点麻烦，因为您必须将每个步骤生成为单独的路径，但这应该不难。

这是一个非常简单的例子

```
var points = [
    { x: 0, y: 0, t: 0 },
    { x: 100, y: 230, t: 1520 },
    { x: 210, y: 290, t: 3850 },
    { x: 150, y: 200, t: 5060 },
];

var paths = [];

// build paths
points.forEach(function (p, idx) {
    if (idx === 0) {
        paths.push('M ' + p.x + ' ' + p.y);
    } else {
        paths.push(paths[idx - 1] + ' L ' + p.x + ' ' + p.y);
    }
});

var paper = Raphael(10, 10, 300, 300);
var line = paper.path(paths[0]);

var next = 1;

function animate() {
    if (paths[next]) {  
        duration = points[next].t - points[next - 1].t        
        line.animate({ path: paths[next] }, duration, 'linear', animate);
        next++;
    }
}
animate(); 
```

这是一个小提琴，您可以在其中看到它的实际效果：http: [//jsfiddle.net/toxicsyntax/FLPdr/](http://jsfiddle.net/toxicsyntax/FLPdr/) **​UPDATE**

 **这是使用上述代码的完整 HTML 页面。它仍然是一个简化的示例，但您应该能够按照自己的方式工作。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Raphael Play</title>
        <script type="text/javascript" src="https://raw.github.com/DmitryBaranovskiy/raphael/master/raphael-min.js"></script>
        <script type="text/javascript">
            function drawLine(points) {

                var paths = ['M ' + points[0].x + ' ' + points[0].y];

                // build paths
                for (var i = 1; i < points.length; i++) {
                    var p = points[i];
                    paths.push(paths[i - 1] + ' L ' + p.x + ' ' + p.y);
                }

                // get drawing surface
                var paper = new Raphael(document.getElementById('canvas_container'), 500, 500);  

                // draw line
                var line = paper.path(paths[0]);
                var next = 1;

                function animate() {
                    if (paths[next]) {  
                        duration = points[next].t - points[next - 1].t        
                        line.animate({ path: paths[next] }, duration, 'linear', animate);
                        next++;
                    }
                }
                animate();
            }
        </script>
        <style type="text/css">
            #canvas_container {
                width: 500px;
                border: 1px solid #aaa;
            }
        </style>
    </head>
    <body>
        <div id="canvas_container"></div>
        <script type="text/javascript">
            window.onload = function () {
                // the points here should be generated by your ASP.NET application
                drawLine([
                    // the points here should be generated by your ASP.NET application
                    { x: 0, y: 0, t: 0 },
                    { x: 100, y: 230, t: 1520 },
                    { x: 210, y: 290, t: 3850 },
                    { x: 150, y: 200, t: 5060 },
                ]);
            }
        </script>
    </body>
</html> 
```

The points are at the end of the HTML page, and in your application you could generate those from your model.**

# c++ - boost::spirit::hold_any 是如何工作的？

> ID：13321140
> 
> 赞同：9
> 
> 时间：2012-11-10T10:15:50.073
> 
> 标签：c++, boost-spirit

[显然](http://felipedelamuerte.wordpress.com/2012/04/06/why-you-shouldnt-use-boostany-especially-not-in-time-critical-code/) `hold_any`比`boost::any`. 它是如何做到这一点的？

编辑：感谢 Mat 的评论，我在另一个问题上找到了[hkaiser 的答案，](https://stackoverflow.com/a/3225254/19501)但`hold_any`它缺乏细节。欢迎提供更详细的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:20:44.073

我认为原因之一是因为 boost::hold_any 使用模板元编程方法，而 boost::any 使用继承方法。

在内部， boost::spirit::hold_any 使用 void* 存储“值”并使用另一个对象来跟踪数据类型信息：

```
>> boost/spirit/home/support/detail/hold_any.hpp
template <typename Char>
class basic_hold_any
{
    ....
    spirit::detail::fxn_ptr_table<Char>* table;
    void* object;
    ...
} 
```

boost::any 使用持有者存储“值”，它不需要另一个对象来跟踪数据类型信息。持有者是从占位符继承的，因此具有继承的缺点。

```
>> boost/any.hpp
class any
{
    ...
    placeholder * content;
    ...
}

class placeholder
template<typename ValueType>
class holder : public placeholder
{
    ...
    ValueType held;
    ...
} 
```

...性能差异更多地在于调用构造函数和析构函数，但即使对于强制转换， boost::spirit::hold_any 也应该更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T04:07:31.593

hold_any 做了两个优化： 1\. 对于小对象，它不为对象持有者分配内存，而是直接存储在指针内存中；2.不使用RTTI类型比较（比较慢）而是使用自己的类型表

# spotify - 如何使用 libspotify 发布播放列表

> ID：13321141
> 
> 赞同：2
> 
> 时间：2012-11-10T10:16:20.790
> 
> 标签：spotify

我找不到任何使用 libspotify 发布播放列表的方法。当我创建一个新的播放列表时，默认情况下它也不会发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:40:49.453

不幸的是，libspotify 中没有用于发布/取消发布播放列表的 API。

# android - 使布局不可点击

> ID：13321142
> 
> 赞同：1
> 
> 时间：2012-11-10T10:16:26.297
> 
> 标签：android, android-layout

我正在使用`FrameLayout`具有 2 个子 Child1 和 Child2.Child1 的父级进行布局，当`Activity`启动时可见，并且当用户单击特定的`ImageView`Child2 时将可见。因此，当 Child2 变得可见时，Child1`View`存在的所有内容都应该变得不可点击，并且只有`View`在 child2 上才能被点击..

**编辑** 我也有 EditText，所以我不希望用户在其他布局变得可见时在其中输入任何输入，就像 DialogBox 变得可见时发生的一样。！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T10:20:05.613

如果你已经设置`onClick Listener`了 Event 并且你想删除它，那么使用：`ButtonOrAnything.setOnClickListener(null);`这将取消`OnClick`Even you have Set

或者

你也可以使用`ButtonOrAnything.setClickable(false);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:25:44.420

**-**当 child_1 布局被点击时 child_2 应该使用不可点击`setClickable(false)`，反之亦然

**例如：**

```
imageView_1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                                child_1.setClickable(true);
                child_2.setClickable(false);

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-03T00:09:12.533

`android:clickable="true"`因此，如果这对某人有帮助，您需要`android:focusable="true"`在将出现在所有内容前面的 FrameLayout 上。至少这对我有用。干杯!

# iphone - 在 UIbutton 中分配随机标题

> ID：13321143
> 
> 赞同：0
> 
> 时间：2012-11-10T10:16:44.290
> 
> 标签：iphone, ios, uiimageview, uibutton

我`application`就像与测验有关，在我看来，我有 1 个图像视图和 4 个`UIbuttons`，最初我必须加载图像`imageview`并以随机方式分配 4 个按钮标题，其中一个按钮应该是当前图像名称，如果用户单击按钮我想显示下一组按钮标题和新的`image`

```
 -(IBAction)answersetting:(id)sender
{
int i=0;
UIButton *mybutton = (UIButton *)sender;
[mybutton addTarget:self action:@selector(submitGuess:)
forControlEvents:UIControlEventValueChanged];
if(mybutton.tag == 1||mybutton.tag == 2||mybutton.tag == 3||mybutton.tag == 4)
{
           for(int loop = 0; loop<4;loop++)
    {
        animage.image=[UIImage  imageNamed:[NSString stringWithFormat:@"%@.jpg",[imageary objectAtIndex:i]]];
        name=[self convertToDisplayName:[imageary objectAtIndex:i]];
        [mybutton setTitle:name forState:UIControlStateNormal];
        NSLog(@"current image name :%@",name);
        if ([mybutton.titleLabel.text isEqualToString:[imageary objectAtIndex:i]])
        {
            //titles equal
            [self alertshow];
            i++;
        }

        UIView *newView = [self.view viewWithTag:i];
        if([newView isKindOfClass:[UIButton class]])
        {
            UIButton *newButton = (UIButton *)newView;
            [newButton setTitle:name forState:UIControlStateNormal];
        }
    }
   }
 } 
```

这无法执行我上面描述的内容。我应该对我的代码进行哪些更改？请帮助解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T07:15:30.293

只需创建一个显示图像和设置按钮标题的方法。并使用另一种方法来评估猜测结果。

```
//This method display the image and buttons

-(void)displayImageAndButton:(int)pos
{
       animage.image=[UIImage  imageNamed:[NSString stringWithFormat:@"%@.jpg",[imageary objectAtIndex:pos]]];

        UIView *newView = [self.view viewWithTag:buttonTag1];
        if([newView isKindOfClass:[UIButton class]])
        {
            UIButton *newButton = (UIButton *)newView;
            name=[self convertToDisplayName:[imageary objectAtIndex:pos++]];
            [newButton addTarget:self action:@selector(submitGuess:)
forControlEvents:UIControlEventValueChanged];
            [newButton setTitle:name forState:UIControlStateNormal];
        }
        newView = [self.view viewWithTag:buttonTag2];
        if([newView isKindOfClass:[UIButton class]])
        {
            UIButton *newButton = (UIButton *)newView;
            name=[self convertToDisplayName:[imageary objectAtIndex:pos++]];
            [newButton addTarget:self action:@selector(submitGuess:)
forControlEvents:UIControlEventValueChanged];
            [newButton setTitle:name forState:UIControlStateNormal];
        }
        newView = [self.view viewWithTag:buttonTag3];
        if([newView isKindOfClass:[UIButton class]])
        {
            UIButton *newButton = (UIButton *)newView;
            name=[self convertToDisplayName:[imageary objectAtIndex:pos++]];
            [newButton addTarget:self action:@selector(submitGuess:)
forControlEvents:UIControlEventValueChanged];
            [newButton setTitle:name forState:UIControlStateNormal];
        }
        newView = [self.view viewWithTag:buttonTag4];
        if([newView isKindOfClass:[UIButton class]])
        {
            UIButton *newButton = (UIButton *)newView;
            name=[self convertToDisplayName:[imageary objectAtIndex:pos++]];
            [newButton addTarget:self action:@selector(submitGuess:)
forControlEvents:UIControlEventValueChanged];
            [newButton setTitle:name forState:UIControlStateNormal];
        }
 }

    //this method evaluates the answer

    - (IBAction)submitGuess:(id)sender
    {
      UIButton *mybutton = (UIButton *)sender;
      if ([mybutton.titleLabel.text isEqualToString:[imageary objectAtIndex:positionOfQuest]])
      {
                //titles equal
                [self alertshow];
      }
      positionOfQuest++;
      [self displayImageAndButton:positionOfQuest];
    } 
```

这里 buttonTag1,buttonTag2,buttonTag3 & buttonTag4 是您的按钮的标签。

int`viewDidLoad`声明一个变量，如：

```
static positionOfQuest = 0; //this for holding the question number 
```

在 IB 中添加按钮标签并`viewDidLoad`在调用以下方法之前对其进行初始化

你需要`viewDidLoad`像这样调用该方法：

```
[self displayImageAndButton:positionOfQuest]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T07:42:28.700

如果你喜欢简单的方法...

```
#include <stdlib.h>

NSMutableArray *quiz = [NSMutableArray alloc....];

for (int i=0; i<4; i++) { 
   int r = arc4random() % [quiz count];

   NSLog(@"%@", [quiz objectAtIndex:r]);
  _Button_1.title = [quiz objectAtIndex:r];

  // or better, i suggest you to use KVC
  // [self valueForKey:@"_Button_%d", i] setTitle //something like this.
  //
} 
```

# java - Chrome 移动 API？

> ID：13321144
> 
> 赞同：0
> 
> 时间：2012-11-10T10:16:44.540
> 
> 标签：java, android, google-chrome

我想构建一个类似于 Diet Coda 的应用程序，这样我就可以预览我正在处理的网页。为此，我想使用 Google Chrome Mobile 而不是 WebView。我想知道 Google Chrome Mobile 是否有一些我可以调用以定期重新加载页面或从服务与浏览器交互的功能。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:26:47.303

这可以通过使用 WebKit 的调试协议来实现。
查看此参考页面：[1.0:Page - Chrome 开发人员工具 - Google Developers](https://developers.google.com/chrome-developer-tools/docs/protocol/1.0/page)
有一个名为“重新加载”的功能，您可以使用该功能远程重新加载页面。

有关更通用的远程调试信息，请查看此页面：[调试器协议 - Chrome 开发人员工具 - Google 开发人员](https://developers.google.com/chrome-developer-tools/docs/debugger-protocol)
您需要一些准备工作，例如安装 Android SDK 以使用 adb 连接到设备，以启用远程调试功能。

# java - wsimport 生成具有固定 URL 地址的代码

> ID：13321149
> 
> 赞同：0
> 
> 时间：2012-11-10T10:18:02.873
> 
> 标签：java, web-services, wsimport

我正在为现有的 SOAP Web 服务编写客户端。我已经使用 wsimport 实用程序针对在我的 Tomcat 中运行的服务实例的 WSDL 文件生成了存根。

问题是，wsimport 在生成的代码中使用固定的 URL 地址，因此该应用程序仅在针对一台特定服务器（例如在我的测试环境中）运行时才有效。

我需要能够使用服务实际部署的 URL 地址对存根进行参数化。

* * *

根据[这个线程](https://stackoverflow.com/questions/3567856/changing-the-url-on-a-webservice-client-generated-with-wsimport)，它应该有助于使用两个参数的构造函数而不是默认构造函数，并传递 WSDL 文件的实际 URL 地址和与默认构造函数中使用的相同的限定名称。

不过，这对我不起作用。它抛出以下异常：

```
Exception in thread "main" java.lang.Error: Undefined operation name GetMetadataLanguages
    at com.sun.xml.ws.model.JavaMethodImpl.freeze(JavaMethodImpl.java:327)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.freeze(AbstractSEIModelImpl.java:97)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:268)
    at com.sun.xml.ws.client.WSServiceDelegate.addSEI(WSServiceDelegate.java:633)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:328)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:311)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:304)
    at javax.xml.ws.Service.getPort(Unknown Source)
    at com.opentext.livelink.service.docman.DocumentManagement_Service.getBasicHttpBindingDocumentManagement(DocumentManagement_Service.java:66)
    at cz.csinsertdt.util.cs.CSAuthenticationHandler.getDocManagementService(CSAuthenticationHandler.java:91)
    at cz.csinsertdt.TestScenario02.getDocManagementService(TestScenario02.java:264)
    at cz.csinsertdt.TestScenario02.run(TestScenario02.java:73)
    at cz.csinsertdt.TestScenario02.main(TestScenario02.java:57) 
```

我究竟做错了什么？

* * *

我的代码中引发异常的部分如下所示：

```
DocumentManagement_Service service = new DocumentManagement_Service(
    new URL(location.toString() + "/DocumentManagement?wsdl"),
    new QName("urn:DocMan.service.livelink.opentext.com", "DocumentManagement")
);

DocumentManagement endpoint = service.getBasicHttpBindingDocumentManagement();
setSoapHeader((WSBindingProvider) endpoint, otAuth);

return endpoint; 
```

otAuth 是从另一个服务获得的授权令牌。

# java - JSP中多部分请求时获取参数

> ID：13321164
> 
> 赞同：2
> 
> 时间：2012-11-10T10:19:14.850
> 
> 标签：java, jsp, servlets

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Add new product</title>
            <link type="text/css" rel="Stylesheet" href="css/SiteStyle.css" />
            <script src="js/jquery-1.3.2.js" type="text/javascript"></script>
    </head>
    <body>
         <form id="MainForm" action="Relay" method="post" enctype="multipart/form-data">
            <input name="destination"  type="hidden" value="AddNewProduct" />
             <script src="js/AddNewProduct.js" type="text/javascript"></script>
            <center>
                <h1>Add new product</h1>
            <hr />
        <table class="TableLogin">
            <tr>
                <td align="center" colspan="2" class="TDLoginHeader">
                        Product information</td>
            </tr>
            <tr>
                <td align="right" class="TDLoginTitle">
                        Product Title
                </td>
                <td align="left" class="TDLoginText">
                    <input id="TxtTitle" type="text" class="LoginTextBoxes" name="Title" maxlength="75" /></td>
            </tr>
            <tr>
                <td align="right" class="TDLoginTitle">
                        Dollar price
                </td>
                <td align="left" class="TDLoginText">
                    <input id="TxtPrice" type="text"  class="LoginTextBoxes" name="Price" maxlength="15" /></td>
            </tr>
            <tr>
                <td align="center" colspan="2" class="TDLoginTitle">
                    Product number</td>
            </tr>
            <tr>
                <td align="center" colspan="2">
                    <table style="width:100%;">
            <tr>
                <td align='center' class='TDProductNumber'>
                    <input id='Txtdigit1' name='Txtdigit1' class='TxtProductNumber' type='text' />
               </td>
                <td align='center' class='TDProductNumber'>
                    <input id='Txtdigit2' name='Txtdigit2' class='TxtProductNumber' type='text' />
                </td>
                <td align='center' class='TDProductNumber'>
                    <input id='Txtdigit3' name='Txtdigit3' class='TxtProductNumber' type='text' />
                </td>
                <td align='center' class='TDProductNumber'>
                    <input id='Txtdigit4' name='Txtdigit4' class='TxtProductNumber' type='text' />
                </td>
                <td align='center' class='TDProductNumber'>
                    <input id='Txtdigit5' name='Txtdigit5' class='TxtProductNumber' type='text' />
                </td>
                <td align='center' class='TDProductNumber'>
                    <input id='Txtdigi6' name='Txtdigit6' class='TxtProductNumber' type='text' />
                </td>
                <td align='center' class='TDProductNumber'>
                    <input id='Txtdigit7' name='Txtdigit7' class='TxtProductNumber' type='text' />
                </td>
            </tr>
            <tr>
                <td colspan="7" class="TDLoginTitle">
                    <label>Product Image</label>
                        <input id="ProductImage" name="ProductImage" type="file" />
                </td>
            </tr>
          </table>
                </td>
            </tr>
            <tr>
                <td align="center" colspan="2">
                      <input id="BtnAdd" type="button" value="Add" class="BtnSize" /></td>
            </tr>
        </table>
        <div id="DivAddMessage">
        </div>
        <div>
           <a href='Login.jsp'>Back</a>
        </div>
        </center>
        </form>
    </body>
</html> 
```

Servlet“中继”代码：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();            
    String destination=request.getParameter("destination");
    out.print(destination);
} 
```

这是一段用于输入产品信息（标题、价格、7 位数字、产品图片）的代码，当我想在 servlet 中获取 'destination' 参数时，得到的值为 null 我知道这是因为多部分请求，但我怎么能得到这个值和文件上传的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:27:29.997

由于您使用多部分编码（'multipart/form-data'）发布，因此参数未按预期显示。

例如，如果您使用的是[commons-fileupload](http://commons.apache.org/fileupload/)，则参数将显示为并且可以使用 FileItem 对象上的“isFormField”方法进行识别。

这个关于 coderanch 的主题解释了如何：[coderanch](http://www.coderanch.com/t/364761/Servlets/java/do-get-request-parameters-when)

大多数（每一个）现代网络框架都将这一点抽象出来，顺便让这类事情变得更容易。 [参考这个网站它会帮助你](http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm)

**代码**

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
        for (FileItem item : items) {
            if (item.isFormField()) {
                // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
                String fieldname = item.getFieldName();
                String fieldvalue = item.getString();
                // ... (do your job here)
            } else {
                // Process form file field (input type="file").
                String fieldname = item.getFieldName();
                String filename = FilenameUtils.getName(item.getName());
                InputStream filecontent = item.getInputStream();
                // ... (do your job here)
            }
        }
    } catch (FileUploadException e) {
        throw new ServletException("Cannot parse multipart request.", e);
    }

    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T10:46:36.610

使用注解

> @MultipartConfig

为您的 Servlet

# c# - 如何打开 Word 文档而无需先将其保存在服务器上？

> ID：13321167
> 
> 赞同：1
> 
> 时间：2012-11-10T10:19:42.277
> 
> 标签：c#, asp.net, ms-word

我通过使用合并字段为用户自定义模板，从模板生成 word 文档。例如： 名称：“用户名”。现在我使用将文档保存在服务器上

```
object miss = System.Reflection.Missing.Value;
            object oDocName = "C:\\Users\\admin\\Desktop\\test002.doc";
            wordDoc.SaveAs(ref oDocName, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss);
            ((_Application)wordApp).Quit(ref miss, ref miss, ref miss); 
```

然后，我使文档可供下载：

```
protected void download_Click(object sender, EventArgs e)
{ 
    FileStream fileStream = new FileStream("C:\\Users\\ebimbari\\Desktop\\test002.doc", FileMode.Open);

    int fileSize = (int)fileStream.Length;
    byte[] Buffer = new byte[fileSize];

    fileStream.Read(Buffer, 0, fileSize);
    fileStream.Close();

    Response.ContentType = ContType("C:\\Users\\admin\\Desktop\\test002.doc");
    Response.BinaryWrite(Buffer);
    Response.AddHeader("content-disposition", "attachment;filename=\"" + "form" + ".doc");
    Response.End();
} 
```

问题是我不希望将表单保存在服务器上。我可以直接打开使其可供下载的文档吗？我正在使用**Microsoft.Office.Interop.Word**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:23:35.097

使用魔法`IsolatedStorageFile`

**编辑**：“如何拥有文件的持久副本，而不将其实际保存到硬盘”的答案是 - 使用神奇的`IsolatedStorageFile`.

（“神奇”这个词可能会被省略）。

我无法测试这段代码，也不确定`worddoc.SaveAs(...)`行为如何。请测试并告诉我：

```
 private static readonly string CACHE =  @"MyWordCache";

    static void PutFile(object wordDoc, string fname)
    {
        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (!store.DirectoryExists(CACHE))
                store.CreateDirectory(CACHE);

            object fullname = Path.Combine(CACHE, fname);
            wordDoc.SaveAs(ref fullname, ...);
        }
    }

    protected bool Downloadfile(string fname)
    { 
        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (!store.DirectoryExists(CACHE))
                return false;

            var fullname = Path.Combine(CACHE, fname);
            using (var fileStream = store.OpenFile(fullname, FileMode.Open))
            {
                int fileSize = (int)fileStream.Length;
                byte[] Buffer = new byte[fileSize];

                fileStream.Read(Buffer, 0, fileSize);

                Response.ContentType = ContType(fullname);
                Response.BinaryWrite(Buffer);
                Response.AddHeader("content-disposition", "attachment;filename=\"" + "form" + ".doc");
                Response.End();
            }
        }
        return true;
    } 
```

# javascript - 当后续请求的答案是 204 时，为什么 OPTIONS 请求会失败？

> ID：13321168
> 
> 赞同：6
> 
> 时间：2012-11-10T10:19:46.260
> 
> 标签：javascript, ajax, backbone.js, xmlhttprequest, cors

我正在构建一个基于 Backbone.js 的应用程序并面临一个奇怪的问题。

在某个时候，该应用程序请求一个集合资源，并且在 Chrome（和 Safari）中我收到这样的错误：

```
XMLHttpRequest cannot load http://api.mydomain.net/v1/foos/00000d/bars/000014/boots Origin http://localhost:3501 is not allowed by Access-Control-Allow-Origin. 
```

好的，我认为 CORS 问题并归咎于我的 API。然后通过 CURL 请求这个资源：

```
curl -i -H'Accept: application/json' -H'X-Auth-Token: pAWp5hrCmXA83GgFzgHC' -XOPTIONS 'http://api.mydomain.net/v1/foos/00000d/bars/000014/boots'
HTTP/1.1 200 OK
Status: 200
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,X-Auth-Token
Content-Length: 0 
```

看起来不错，现在 GET：

```
curl -i -H'Accept: application/json' -H'X-Auth-Token: pAWp5hrCmXA83GgFzgHC' -XGET 'http://api.mydomain.net/v1/foos/00000d/bars/000014/boots'
HTTP/1.1 204 No Content
Status: 204
Cache-Control: no-cache
Content-Length: 0
Content-Type: text/plain 
```

如果我请求包含至少一个对象的靴子集合，一切正常。我的服务器的 CORS 标头以 arr 响应，我认为完全没问题。那么为什么浏览器会报告跨源资源问题呢？

是因为`text/plain`我的 204 响应的内容类型吗？

开发工具中的预检 (OPTIONS) 请求： [![选项](../Images/77330d4c2ca57028cab28d8d2d7125e6.png)](https://i.stack.imgur.com/Viifh.png)

中止响应的请求标头： [![得到](../Images/2bb15187d9ab24554e9455b3313d58a3.png)](https://i.stack.imgur.com/XdOgs.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T11:30:23.433

您还必须`Access-Control-Allow-Origin`在第二个请求的响应标头中包含 。这不是客户端问题，而是后端问题。

此行为符合[CORS 规范](http://www.w3.org/TR/cors/)，适用于以下说明（[第 7.1.5 节“带预检的跨域请求”](http://www.w3.org/TR/cors/#cross-origin-request-with-preflight-0)）：

1.  预检请求（[细节](http://www.w3.org/TR/cors/#cross-origin-request-with-preflight)省略）
2.  “将[跨域请求状态](http://www.w3.org/TR/cors/#cross-origin-request-status)设置为预检完成。”
3.  “这是实际请求。（...）在提出请求时请遵守以下请求规则。”
    *   ~~如果响应的 HTTP 状态代码为 301、302、303 或 307~~ *不适用*
    *   ~~如果最终用户取消请求~~ *不适用*
    *   ~~如果出现网络错误~~ *不适用*
    *   否则
        执行[资源共享检查](http://www.w3.org/TR/cors/#resource-sharing-check)。如果返回失败，请应用缓存和网络错误步骤。

**您的请求在**[资源共享检查](http://www.w3.org/TR/cors/#resource-sharing-check)的第一步已经失败：

1.  如果响应包含零个或多个`Access-Control-Allow-Origin`标头值，则返回失败并终止此算法。

* * *

我提供了一个简单的 NodeJS 示例来说明您的问题。
您当前的后端行为如下：

```
require('http').createServer(function(request, response) {
    if (request.method == 'OPTIONS') { // Handle preflight
        response.writeHead(200, {
           "Access-Control-Allow-Origin": "*",
           "Access-Control-Allow-Headers": "X-Foo"
        });
    } else {                           // Handle actual requests
        response.writeHead(204, {
          //"Access-Control-Allow-Origin": "*"
        });
    }
    response.end();
}).listen(12345); 
```

现在，发出请求并体验**失败**：

```
var x = new XMLHttpRequest;
x.open('GET', 'http://localhost:12345');
x.setRequestHeader('X-Foo','header to trigger preflight');
x.send(); 
```

回到我提供的代码，并`Access-Control-Allow-Origin`在响应中启用标头，然后再次测试。您的请求现在将成功。

# c# - 使用 EPPlus 设置折线图使用的数据

> ID：13321179
> 
> 赞同：5
> 
> 时间：2012-11-10T10:20:35.473
> 
> 标签：c#, excel, epplus

我正在尝试使用 EPPlus 在 Excel 中自动添加一个简单的折线图。我有并且知道包含我要使用的数据的单元格范围。我希望图表如下所示：

![在此处输入图像描述](../Images/e9c18deae32918862e4a08f32d6c312e.png)

`Before`和列的`After`内容比显示的要多得多。

我正在使用此代码创建图表并定位它，但我不确定如何设置图表使用的数据：

```
ExcelChart ec = ws.Drawings.AddChart("Line Time Graph", OfficeOpenXml.Drawing.Chart.eChartType.Line);
ec.Title.Text = "Benchmarks";
ec.SetPosition(_times.Count + 2, 0, 1, 0); 
```

它可能与它有关，`ec.Series.Add`但我不确定如何正确使用它。如果你能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T07:07:25.783

希望这可以帮助你：

```
ExcelChart ec = ws.Drawings.AddChart("Line Time Graph", OfficeOpenXml.Drawing.Chart.eChartType.Line);
ec.Title.Text = "Benchmarks";
ec.SetPosition(_times.Count + 2, 0, 1, 0);
ec.SetSize(800, 600);

var ran1 = sheet.Cells["A3:A10"];
var ran2 = sheet.Cells["G3:G10"]; // label range if there is. Otherwise, let select blank range then edit XML data later to remove 'c:cat' tags (bellow example)

var serie1 = ec.Series.Add(ran1, ran2);
// use serie1 variable to format and so on
// set serie1.HeaderAddress to A2 also

var ran1 = sheet.Cells["B3:B10"];
var serie2 = ec.Series.Add(ran1, ran2);
// use serie2 variable to format and so on 
```

我刚刚测试的另一个完整示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OfficeOpenXml;
using System.IO;
using OfficeOpenXml.Drawing.Chart;

namespace TestExcelEPPluss
{
    class Program
    {
        static void Main(string[] args)
        {
            ExcelPackage package = new ExcelPackage();
            var sheet = package.Workbook.Worksheets.Add("TestingGraph");

            Random r = new Random();
            var cell = sheet.Cells["A1"];
            cell.Value = "Before";

            cell = sheet.Cells["B1"];
            cell.Value = "After";

            for (int i = 0; i < 100; i++)
            {
                cell = sheet.Cells[i + 2, 1];
                cell.Value = r.Next(300, 500);
                cell = sheet.Cells[i + 2, 2];
                cell.Value = r.Next(300, 500);
            }

            ExcelChart ec = (ExcelLineChart)sheet.Drawings.AddChart("chart_1", eChartType.Line);
            ec.SetPosition(1, 0, 3, 0);
            ec.SetSize(800, 300);
            //ec.Legend.Add();

            var ran1 = sheet.Cells["A2:A101"];
            var ran2 = sheet.Cells["0:0"];

            var serie1 = (ExcelLineChartSerie)ec.Series.Add(ran1, ran2);
            serie1.Header = sheet.Cells["A1"].Value.ToString();

            ran1 = sheet.Cells["B2:B101"];
            var serie2 = ec.Series.Add(ran1, ran2);
            serie2.Header = sheet.Cells["B1"].Value.ToString();

            var xml = ec.ChartXml;
            var lst = xml.GetElementsByTagName("c:lineChart");
            foreach (System.Xml.XmlNode item in lst[0].ChildNodes)
            {
                if (item.Name.Equals("ser"))
                {
                    foreach (System.Xml.XmlNode subitem in item.ChildNodes)
                    {
                        if (subitem.Name.Equals("c:cat"))
                        {
                            item.RemoveChild(subitem);
                            break;
                        }
                    }
                }
            }

            string path = @"C:\test1.xlsx";
            File.WriteAllBytes(path, package.GetAsByteArray());
            package.Dispose();

            Console.WriteLine("Done - Path: {0}", path);
            Console.ReadLine();
        }
    }
} 
```

`c:cat`是`ser`系列的类别，让我们从图表 xml 中删除`c:cat`标签，然后您的图表将`1,2,3,4,5,...`用作该类别的默认值（此处为 x 轴）。

# java - 为什么 JVM 不拾取 Linux 上的输入文本语言环境

> ID：13321181
> 
> 赞同：0
> 
> 时间：2012-11-10T10:20:52.303
> 
> 标签：java, locale

我正在尝试获取用户在 JPasswordField 中输入文本的语言环境。

为此，我正在做下一个：

```
final JPasswordField passwdField = new JpasswordField();
final InputContext it = InputContext.getInstance();
final JTextArea localeLng = new JTextArea();
...
...(some code) 
... 
passwdField.addKeyListener(new KeyAdapter() {
  @Override
  public void keyReleased(KeyEvent e) {
       localeLng.setText(it.getLocale().getLanguage().toUpperCase());
   }
}); 
```

我有两种键盘布局 En 和 Ru。当我在它们之间切换时，它不会影响 localeLng 值。这可能在带有 JRE 7up7 的 Ubuntu 上。
但这在 Windows 7 上完美运行。

那么，我的问题可能出在什么地方呢？

* * *

## 我暂时的粗略解决方案:)

```
public void keyReleased(KeyEvent e) {
    int key = (int)e.getKeyChar();
    if(key>122){
        localeLng.setText("!");
        localeLng.setBackground(Color.RED);
    } else {
        localeLng.setText("En");
        localeLng.setBackground(Color.BLUE);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:33:20.853

提醒一下，使用 Java 可以获得一组定义良好的方法和类，但实现不同，这可能是一件好事，那里有许多 JVM 和许多提供对 Java 的支持的操作系统，可能每个都有自己的实现。

也就是说，[此链接](http://download.java.net/jdk8/docs/api/java/awt/im/InputContext.html#getLocale%28%29)将回答您的问题。

我还建议让用户决定什么是正确的语言环境，以编程方式获取正确的语言环境可能非常棘手，尤其是在 Linux 下。

# php - 如何在表单中添加字符串 $action

> ID：13321183
> 
> 赞同：2
> 
> 时间：2012-11-10T10:21:47.917
> 
> 标签：php

我的 register.php 文件中有这个 php 代码：

```
// include the Zebra_Form class
require 'system/Zebra_Form.php';

// instantiate a Zebra_Form object
$form = new Zebra_Form('register_form'); 
```

我现在想添加将转到 action="?do=register" 的操作

这是[Zebra_Form](http://stefangabos.ro/wp-content/docs/Zebra_Form/Zebra_Form/Zebra_Form.html)类：

```
void Zebra_Form ( 
    string $name , 
    [ string $method = 'POST'] , 
    [ string $action = ''] , 
    [ array $attributes = ''] ) 
```

请指导我在哪里写操作 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:30:41.183

假设你真的想要 "?do=register" 作为你的行动：

```
$form = new Zebra_Form('register_form', 'POST', '?do=register'); 
```

Zebra_Form 中的操作是第三个参数。您必须明确指定第二个选项参数的值才能设置第三个参数。我假设你想在这里“发布”，你通常会这样做。

# jquery - 将 div 放在 colorbox iframe 之外和 colorbox-overlay 的顶部

> ID：13321189
> 
> 赞同：2
> 
> 时间：2012-11-10T10:23:05.247
> 
> 标签：jquery, colorbox

目前我正在尝试在颜色框之外放置一个 div 并将其绝对放置在颜色框叠加层中的某个位置。我在颜色框中加载的页面是 iframe，所以我想将 div 放在加载 iframe 的颜色框之外。我试过这个：

```
 #facebook-test { z-index: 9999; position: absolute; top: -20px; left: -20px; background:#000; height: 100px; width: 100px;} 
```

此 div 的 z-index 高于 #colorbox 和 #colorbox-overlay 的 z-index。但我似乎无法将其从 iframe 中取出？打开颜色框时是否需要加载 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:59:59.163

您是否尝试使用以下方法将其附加到正文：

```
$("body").append(<div id='#facebook-test'></div>); 
```

# ruby-on-rails - 导轨从型号中选择

> ID：13321190
> 
> 赞同：0
> 
> 时间：2012-11-10T10:23:12.407
> 
> 标签：ruby-on-rails, database, activerecord

在一些视频中，我看到了下一个字符串：

```
User.select(:email).map(&:email) 
```

请告诉我这是什么意思

我知道那个字符串

```
User.select(:email) 
```

仅从数据库中选择电子邮件列，但我不明白是什么意思

```
.map(&:email) 
```

`User.select(:email)`我们可以改成`User.pluck(:email)`

因为从教程中我明白那是相同的方法。这是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:25:05.163

将`map(&:email)`您的 s 数组`User`映射到仅包含用户电子邮件的字符串映射。

Array.map 遍历当前数组，并通过调用参数块创建一个新数组，并将结果存储在新数组中。它与此等效：

```
new_array = []
Users.select(:email).each do |user|
  new_array << user.email
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:39:19.777

`User.select(:email)`

正在返回一个对象数组`User`。表达方式

`User.select(:email).map(&:email)`

仅选择该对象的电子邮件属性。所以你最终得到了一系列电子邮件字符串。最后与

```
User.pluck(:email) 
```

`User.select(:email)`但由于这个原因，它是不同的。

另请参阅 pluck 的[文档](http://guides.rubyonrails.org/active_record_querying.html#pluck)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T11:23:12.450

我想你已经知道 map(&:email) 给了你什么，我假设你在问如何以及为什么，因为当我第一次看到这个时，这就是同样的事情。所以这是巫毒教的结果回馈给你的更高级的红宝石魔法之一:)

基本上让我们看一下map函数，它本身最基本的用法就是接受块级命令。在迭代之后，获取默认返回值并将其放入一个数组中供您使用。例如，让我们看看这个

```
list = User.all 
```

所以我们得到一个用户对象列表[用户模型，用户模型]等。

```
list.map do |user|
  user.email
end 
```

如果你在 IRB 或 Rails 控制台中运行这个块，你会得到 ["some@email.here, another@email.here"] 等。所以让我们捕获这个结果并将它分配给一个变量

```
email_list = list.map do |user|
  user.email
end 
```

现在 email_list 应该等于 ["some@email.here, another@email.here"] 现在您已经了解了 map 函数的背景，让我们深入研究它可以接受参数的各种方式

```
list.map {|user| user.email } 
```

这和上面的一样，但是使用花括号来包围块逻辑

```
list.map(&:email) 
```

这是上述内容的简写，通过为您定义块，您只需提供您希望在块项目上运行的子函数。

希望这能让您对速记方法及其块级等价物有所了解。

# css - 绝对元素上的渐变

> ID：13321192
> 
> 赞同：0
> 
> 时间：2012-11-10T10:23:48.830
> 
> 标签：css, positioning, gradient

我想在滑块的两侧添加一个渐变层。

所以我有这个代码：

```
<div>
    <div id="gradientsx">
    </div>
    <ul class="slider">
        <li>item 1</li>
        [...]
    </ul>
    <div id="gradientdx">
    </div>
</div> 
```

.gradientsx 有一个渐变背景，他的位置是绝对的。但也`<ul>`必须有一个绝对位置（允许滑动），所以梯度x 中的宏大变得不可见。我怎样才能解决这个问题？

这是示例：http: [//jsfiddle.net/tPMuA/3/](http://jsfiddle.net/tPMuA/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:37:05.103

您可以使用`z-index`在项目顶部强制使用 shadow-div。但请注意，如果它位于项目之上，它也可能会阻止鼠标事件。不过，不确定这是否是一个问题，因为我无法从那个小提琴中找出滑块会是什么样子。

[http://jsfiddle.net/tPMuA/7/](http://jsfiddle.net/tPMuA/7/)

# java - Java 枚举中的协变返回类型

> ID：13321193
> 
> 赞同：4
> 
> 时间：2012-11-10T10:23:56.870
> 
> 标签：java, generics, enums, covariant

正如本网站上的另一个问题所述，这样的事情是不合法的：

```
public enum MyEnum {
    FOO {
        public Integer doSomething() { return (Integer) super.doSomething(); }
    },
    BAR {
        public String doSomething() { return (String) super.doSomething(); }
    };

    public Object doSomething();
} 
```

这是由于协变返回类型显然不适用于枚举常量（再次打破枚举常量是枚举类型的单例子类的错觉......）那么，我们添加一些泛型怎么样：这合法吗？

```
public enum MyEnum2 {
    FOO {
        public Class<Integer> doSomething() { return Integer.class; }
    },
    BAR {
        public Class<String> doSomething() { return String.class; }
    };

    public Class<?> doSomething();
} 
```

在这里，所有三个返回`Class`对象，但单个常量比整个枚举类型“更具体”......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T10:32:07.690

从根本上说，问题在于 is 的编译时类型，`MyEnum.FOO`而*不是*特定生成的子类。您可以在没有任何协方差的情况下看到这一点：`MyEnum`

 *```
enum MyEnum {
    FOO {
        public void foo() {}
    };
}

public class Test {
    public static void main(String[] args) throws Exception
    {
        MyEnum.FOO.foo(); // Error
    }
} 
```

基本上，编译器*只会*看到`MyEnum`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:48:56.893

我们可以在 Java 枚举中使用协变返回类型，但我们不能使用该子类型作为返回分配给的变量，这与普通类层次结构不同。

```
public class EnumCovariance {

   public static void main(String[] args) {
      // Type mismatch: cannot convert from Class<capture#1-of ?> to Class<Integer>
      Class<Integer> something = MyEnum2.FOO.doSomething();
      Child child = new Child();
      Base base = child;
      // ok
      Class<Integer> something3 = child.doSomething();

      // Type mismatch: cannot convert from Class<capture#2-of ?> to Class<Integer>
      Class<Integer> something2 = base.doSomething();
    }
}

abstract class Base {
   public abstract Class<?> doSomething();
}

class Child extends Base {
   @Override
   public Class<Integer> doSomething() {
      return Integer.class;
   }
}

enum MyEnum2 {
   FOO {
      public Class<Integer> doSomething() {
         return Integer.class;
      }
   },
   BAR {
      public Class<String> doSomething() {
         return String.class;
      }
   };

   public abstract Class<?> doSomething();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T10:38:14.830

此代码运行良好：

```
public enum MyEnum {
   FOO {
      @Override
      public Integer doSomething() {
         return (Integer)super.doSomething();
      }
   },
   BAR {
      @Override
      public String doSomething() {
         return (String)super.doSomething();
      }
   };

   public Object doSomething() {
      System.err.println( this );
      return null;
   }

   public static void main( String[] args ) {
      MyEnum toto = MyEnum.FOO;
      System.err.println( toto.doSomething() );
   }
} 
```

输出是：

```
FOO
null 
```

此代码无法编译，错误是`"The return type is incompatible with MyEnum2.doSomething()"`，`Cannot cast from Class<Object> to Class<Integer>`并且`Cannot cast from Class<Object> to Class<String>`：

```
public enum MyEnum2 {
   FOO {
      @Override
      public Class<Integer> doSomething() {
         return (Class<Integer>)super.doSomething();
      }
   },
   BAR {
      @Override
      public Class<String> doSomething() {
         return (Class<String>)super.doSomething();
      }
   };

   public Class<Object> doSomething() {
      System.err.println( this );
      return null;
   }

   public static void main( String[] args ) {
      MyEnum2 toto = MyEnum2.FOO;
      System.err.println( toto.doSomething() );
   }
} 
```*

# sql-server - 我可以在单个数据库中创建多少个存储过程？

> ID：13321199
> 
> 赞同：4
> 
> 时间：2012-11-10T10:25:00.990
> 
> 标签：sql-server, sql-server-2008

我想找出我们可以在单个数据库中创建的最大存储过程数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T10:27:39.120

[SQL Server 的最大容量规格](http://msdn.microsoft.com/en-us/library/ms143432.aspx)说：

> 数据库对象包括表、视图、存储过程、用户定义的函数、触发器、规则、默认值和约束等对象。数据库中所有对象的总数不能超过 2,147,483,647。

换言之，存储过程没有专门的硬性上限，但对象总数不得超过 2,147,483,647。我想说，如果您担心这个限制，您需要重新评估您的数据库设计。

# ios - IOS 我得到 [UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] 错误

> ID：13321203
> 
> 赞同：2
> 
> 时间：2012-11-10T10:25:38.333
> 
> 标签：ios, uinavigationcontroller

错误不是每次。我曾尝试清理和重建应用程序，但它也是。

错误：

```
 *** Assertion failure in -[UIWindowController 
    transition:fromViewController:toViewController:target:didEndSelector:], 
   /SourceCache/UIKit_Sim/UIKit-2372/UIWindowController.m:211

 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
     reason: 'Attempting to begin a modal transition from 
     <UINavigationController: 0x9190730> to <UINavigationController: 0x83a9dc0> 
     while a transition is already in progress. Wait for viewDidAppear/viewDidDisappear
     to know the current transition has completed'

 *** First throw call stack:
 (0x213d012 0x1e85e7e 0x213ce78 0x191bf35 0x10b8d05 0xeb74f3 0xeb7777 0x10be033f   
  0xeb77b7 0x104f0 0x1e996b0 0x18c6035 0x20c0f3f 0x20c096f 0x20e3734 0x20e2f44 
  0x20e2e1b 0x36437e3 0x3643668 0xdcd65c 0x1133f2 0x25c5)
  libc++abi.dylib: terminate called throwing an exception 
```

BaseController.h：

```
 @class LoginViewController;
 @interface BaseController:UIViewController
 //...
 @end 
```

基本控制器.m

```
 @implement BaseController
 //...
 -(void)showLoginForm
 {
    UIViewController* loginx =(UIViewController*) [[LoginViewController alloc] init];
    UINavigationController* navx = [[UINavigationController alloc] initWithRootViewController:loginx];
    [navx.navigationBar setBackgroundImage:[UIImage imageNamed:@"title_bar.png"] forBarMetrics:UIBarMetricsDefault];
    //added
    //i can use @try to catch it       
    [self presentModalViewController:navx animated:YES];//<====it is error

    [loginx release];
    [navx release];
 } 
```

登录视图控制器：

```
 @interface LoginViewController:BaseController
 //...
 @end 
```

otherViewController：我会判断用户是否登录在这个控制器中。如果没有登录，我会调用showLoginForm

```
 //@interface otherViewController:BaseController
  //......
 -(void)viewDidLoad
  {
     //make a thread to call isLogin
  }
 -(void)isLogin
  { 
      BOOL logined = YES;
      //......
      if(!logined)//i take this on MainThread,it has error also.
         [super showLoginForm];
  } 
```

MainViewController:(显示otherViewController是Main ViewController)

```
 //@interface MainViewController:BaseController
  //......

 -(void)buttonAction
 {
     otherViewController* other = [[otherViewController alloc] init];
     UINavigationController* navigation = [[UINavigationController alloc] initWithRootViewController:other];
      [self presentModalViewController:navigation animated:YES];
     //release
  } 
```

所以，谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T12:08:56.140

在 otherViewController.m 中，您应该将调用 isLogin 方法的代码移动到

```
- (void)viewDidAppear:(BOOL)animated 
```

这将确保在`[self presentModalViewController:navx animated:YES];`调用 otherViewController 时完成转换。

# asp.net-mvc - 加载任何 MVC 页面失败并显示错误“已添加具有相同键的项目”。

> ID：13321205
> 
> 赞同：1
> 
> 时间：2012-11-10T10:26:10.033
> 
> 标签：asp.net-mvc, iis-7.5, windows-server-2008-r2

我遇到了一个仅出现在一台服务器上的间歇性问题，并导致所有 MVC 页面无法加载并显示错误“已添加具有相同密钥的项目”。

重新启动应用程序池可以解决问题，但在此之前，加载任何 mvc 页面都会引发以下异常：

```
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 10/11/2012 08:09:24 
Event time (UTC): 10/11/2012 08:09:24 
Event ID: d76264aedc4241d4bce9247692510466 
Event sequence: 6407 
Event occurrence: 30 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/21/ROOT-2-129969647741292058 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: d:\websites\SiteAndAppPoolName\ 
    Machine name: UKSERVER 

Process information: 
    Process ID: 6156 
    Process name: w3wp.exe 
    Account name: IIS APPPOOL\SiteAndAppPoolName 

Exception information: 
    Exception type: ArgumentException 
    Exception message: An item with the same key has already been added.

Server stack trace: 
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Web.WebPages.Scope.WebConfigScopeDictionary.<>c__DisplayClass4.<.ctor>b__0()
   at System.Lazy`1.CreateValue()

Exception rethrown at [0]: 
   at System.Lazy`1.get_Value()
   at System.Web.WebPages.Scope.WebConfigScopeDictionary.TryGetValue(Object key, Object& value)
   at System.Web.Mvc.ViewContext.ScopeGet[TValue](IDictionary`2 scope, String name, TValue defaultValue)
   at System.Web.Mvc.ViewContext.ScopeCache.Get(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.ViewContext.GetClientValidationEnabled(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.Html.FormExtensions.FormHelper(HtmlHelper htmlHelper, String formAction, FormMethod method, IDictionary`2 htmlAttributes)
   at System.Web.Mvc.Html.FormExtensions.BeginForm(HtmlHelper htmlHelper, String actionName, String controllerName)
   at ASP._Page_Views_Dashboard_Functions_BookingQuickLookup_cshtml.Execute() in d:\Websites\SiteAndAppPoolName\Views\Dashboard\Functions\BookingQuickLookup.cshtml:line 3
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)
   at ASP._Page_Views_Dashboard_Functions_cshtml.Execute() in d:\Websites\SiteAndAppPoolName\Views\Dashboard\Functions.cshtml:line 5
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.Html.RenderPartialExtensions.RenderPartial(HtmlHelper htmlHelper, String partialViewName, Object model)
   at ASP._Page_Views_Dashboard_Index_cshtml.Execute() in d:\Websites\SiteAndAppPoolName\Views\Dashboard\Index.cshtml:line 9
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Request information: 
    Request URL: http://SiteAndAppPoolName.spawtz.com/Dashboard 
    Request path: /Dashboard 
    User host address: 86.164.135.41 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: IIS APPPOOL\SiteAndAppPoolName 

Thread information: 
    Thread ID: 17 
    Thread account name: IIS APPPOOL\SiteAndAppPoolName 
    Is impersonating: False 
    Stack trace:    at System.Lazy`1.get_Value()
   at System.Web.WebPages.Scope.WebConfigScopeDictionary.TryGetValue(Object key, Object& value)
   at System.Web.Mvc.ViewContext.ScopeGet[TValue](IDictionary`2 scope, String name, TValue defaultValue)
   at System.Web.Mvc.ViewContext.ScopeCache.Get(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.ViewContext.GetClientValidationEnabled(IDictionary`2 scope, HttpContextBase httpContext)
   at System.Web.Mvc.Html.FormExtensions.FormHelper(HtmlHelper htmlHelper, String formAction, FormMethod method, IDictionary`2 htmlAttributes)
   at System.Web.Mvc.Html.FormExtensions.BeginForm(HtmlHelper htmlHelper, String actionName, String controllerName)
   at ASP._Page_Views_Dashboard_Functions_BookingQuickLookup_cshtml.Execute() in d:\Websites\SiteAndAppPoolName\Views\Dashboard\Functions\BookingQuickLookup.cshtml:line 3
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)
   at ASP._Page_Views_Dashboard_Functions_cshtml.Execute() in d:\Websites\SiteAndAppPoolName\Views\Dashboard\Functions.cshtml:line 5
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.Html.RenderPartialExtensions.RenderPartial(HtmlHelper htmlHelper, String partialViewName, Object model)
   at ASP._Page_Views_Dashboard_Index_cshtml.Execute() in d:\Websites\SiteAndAppPoolName\Views\Dashboard\Index.cshtml:line 9
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Custom event details: 
```

如前所述，在重新启动应用程序池之前，每个 MVC 操作都会引发此错误，并且该错误似乎发生在`System.Web.WebPages.Scope.WebConfigScopeDictionary.TryGetValue(Object key, Object& value)`

有没有人见过这个问题？它只发生在此服务器上，在服务器上的任何应用程序池上（不限于此），并且应用程序池重新启动对其进行排序。

非常感谢任何帮助。

干杯，

马修

**编辑：**

这是 web.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <section name="listManagers" type="Spawtz.ListManagersConfigSection, SpawtzConfiguration" />
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
      <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
    </sectionGroup>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="ConnectionString" value="cs" />
  </appSettings>
  <log4net>
    <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
      <to value="spawtzerror@spawtz.com" />
      <from value="matthew@spawtz.com" />
      <subject value="Error in SiteAndAppPoolName Spawtz Application" />
      <smtpHost value="127.0.0.1" />
      <bufferSize value="1" />
      <lossy value="true" />
      <evaluator type="log4net.spi.LevelEvaluator">
        <threshold value="WARN" />
      </evaluator>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="User: %X{User} %n%d [%t] %-5p %c [%x] - %m%n%n%n" />
      </layout>
    </appender>
    <root>
    </root>
    <logger name="Error">
      <level value="ERROR" />
      <appender-ref ref="SmtpAppender" />
    </logger>
  </log4net>
  <system.web>
    <!--  DYNAMIC DEBUG COMPILATION
          Set compilation debug="true" to enable ASPX debugging.  Otherwise, setting this value to
          false will improve runtime performance of this application. 
          Set compilation debug="true" to insert debugging symbols (.pdb information)
          into the compiled page. Because this creates a larger file that executes
          more slowly, you should set this value to true only when debugging and to
          false at all other times. For more information, refer to the documentation about
          debugging ASP.NET files.
    -->
    <compilation defaultLanguage="c#" debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
    <!--  CUSTOM ERROR MESSAGES
          Set customErrors mode="On" or "RemoteOnly" to enable custom error messages, "Off" to disable. 
          Add <error> tags for each of the errors you want to handle.

          "On" Always display custom (friendly) messages.
          "Off" Always display detailed ASP.NET error information.
          "RemoteOnly" Display custom (friendly) messages only to users not running 
           on the local Web server. This setting is recommended for security purposes, so 
           that you do not display application detail information to remote clients.
    -->
    <!--<customErrors mode="On" defaultRedirect="Error.aspx" />-->
    <customErrors mode="Off" />
    <!--  AUTHENTICATION 
          This section sets the authentication policies of the application. Possible modes are "Windows", 
          "Forms", "Passport" and "None"

          "None" No authentication is performed. 
          "Windows" IIS performs authentication (Basic, Digest, or Integrated Windows) according to 
           its settings for the application. Anonymous access must be disabled in IIS. 
          "Forms" You provide a custom form (Web page) for users to enter their credentials, and then 
           you authenticate them in your application. A user credential token is stored in a cookie.
          "Passport" Authentication is performed via a centralized authentication service provided
           by Microsoft that offers a single logon and core profile services for member sites.
    -->
    <authentication mode="Forms" />
    <!--  AUTHORIZATION 
          This section sets the authorization policies of the application. You can allow or deny access
          to application resources by user or role. Wildcards: "*" mean everyone, "?" means anonymous 
          (unauthenticated) users.
    -->
    <authorization>
      <allow users="*" />
      <!-- Allow all users -->
      <!--  <allow     users="[comma separated list of users]"
                             roles="[comma separated list of roles]"/>
                  <deny      users="[comma separated list of users]"
                             roles="[comma separated list of roles]"/>
            -->
    </authorization>
    <!--  APPLICATION-LEVEL TRACE LOGGING
          Application-level tracing enables trace log output for every page within an application. 
          Set trace enabled="true" to enable application trace logging.  If pageOutput="true", the
          trace information will be displayed at the bottom of each page.  Otherwise, you can view the 
          application trace log by browsing the "trace.axd" page from your web application
          root. 
    -->
    <trace enabled="false" requestLimit="10" pageOutput="false" traceMode="SortByTime" localOnly="true" />
    <!--  SESSION STATE SETTINGS
          By default ASP.NET uses cookies to identify which requests belong to a particular session. 
          If cookies are not available, a session can be tracked by adding a session identifier to the URL. 
          To disable cookies, set sessionState cookieless="true".
    -->
    <sessionState mode="InProc" stateConnectionString="tcpip=127.0.0.1:42424" sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes" cookieless="false" timeout="20" />
    <!--  GLOBALIZATION
          This section sets the globalization settings of the application. 
    -->
    <globalization requestEncoding="utf-8" responseEncoding="utf-8" />
    <pages validateRequest="false" controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID" pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        <add namespace="System.Linq" />
        <add namespace="System.Collections.Generic" />
        <add namespace="SpawtzController.ViewModels" />
        <add namespace="SpawtzController" />
      </namespaces>
      <controls>
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
    <httpHandlers>
      <add path="*" verb="/Views/*" type="System.Web.HttpNotFoundHandler" />
      <add verb="*" path="*.mvc" validate="false" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add path="Telerik.Web.UI.WebResource.axd" verb="*" type="Telerik.Web.UI.WebResource, Telerik.Web.UI" validate="false" />
      <add path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" validate="false" />
      <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
    </httpHandlers>
    <httpModules>
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
      <add name="FixIIS5xWildcardMapping" type="Elmah.FixIIS5xWildcardMappingModule, Elmah" />
    </httpModules>
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="MvcContrib" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.34.0" newVersion="2.0.34.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Castle.Core" publicKeyToken="407dd0808d44fbdc" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.5.1.0" newVersion="2.5.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Castle.Windsor" publicKeyToken="407dd0808d44fbdc" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.5.1.0" newVersion="2.5.1.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>
  <connectionStrings>
    <add name="Spawtz" connectionString="cs" />
  </connectionStrings>
  <elmah>
    <errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="Spawtz" applicationName="SiteAndAppPoolName" />
    <security allowRemoteAccess="yes" />
    <errorFilter>
      <test>
        <equal binding="HttpStatusCode" value="404" type="Int32" />
      </test>
    </errorFilter>
  </elmah>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="UrlRoutingHandler" />
      <remove name="ErrorLog" />
      <remove name="ErrorMail" />
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
      <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
    </modules>
    <handlers>
      <remove name="UrlRoutingHandler" />
      <remove name="elmah" />
      <remove name="BlockViewHandler" />
      <add name="BlockViewHandler" path="/Views/*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
      <add name="Mvc" path="*" verb="*" modules="IsapiModule" scriptProcessor="C:\Windows\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="None" preCondition="classicMode,runtimeVersionv2.0,bitness64" />
      <add name="Telerik_Web_UI_DialogHandler_aspx" verb="*" preCondition="integratedMode" path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" />
      <add name="elmah" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
      <add name="Telerik_Web_UI_WebResource_axd" path="Telerik.Web.UI.WebResource.axd" verb="*" type="Telerik.Web.UI.WebResource, Telerik.Web.UI" />
    </handlers>
    <defaultDocument>
      <files>
        <remove value="iisstart.htm" />
        <remove value="index.html" />
        <remove value="index.htm" />
        <remove value="Default.asp" />
        <remove value="Default.htm" />
      </files>
    </defaultDocument>
  </system.webServer>
  <location path="elmah.axd">
    <system.web>
      <authorization>
        <allow roles="Administrators" />
        <deny users="?" />
      </authorization>
    </system.web>
  </location>
</configuration> 
```

**再次编辑：**

好的，既然上面的问题似乎没有简单的答案，也许这个问题有一个答案：我可以以某种方式配置IIS在指定时间段内遇到指定数量的错误后自动回收应用程序池吗？我知道我可以启用快速故障保护，但这不是我所追求的，因为那时我将不得不手动重新启动应用程序池。作为一种解决方法（阅读：hack ...），我想修复它，以便它在连续出现大量错误时自行重启。那是可行的吗？

**再编辑一次**

好的，这个错误今天早上也发生在另一台服务器上，所以似乎不仅仅是服务器配置导致它。也许这是我的代码中的某些东西，但我对如何诊断它感到困惑，因为我无法复制它也无法调试它......似乎我还有更多的调查要做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T00:57:17.647

我们在这个问题上挣扎了 7 个月。当我们的 IIS 应用程序池被自动回收时，问题似乎就出现了。再次回收它们或轻弹 web.config 通常会使网站重新上线，但需要大量挖掘才能找到根本原因。在一些外部顾问和 Microsoft 技术支持的帮助下，该问题被追溯到 Telerik 库中的一个错误，其中一个密钥被动态添加到 ConfigurationManager.AppSettings 没有多线程竞争条件保护。在这种情况下，我们能够通过向 web.config 添加一些条目来绕过有问题的代码。Telerik 几个版本前已发现该问题，因此我们将更新到更新版本以获得更永久的修复。如果您动态更新 ConfigurationManager.AppSettings，就会出现问题。MS建议如下：

改变这个：

```
try
{
    System.Configuration.ConfigurationManager.AppSettings["YourAppSettingsKey"] = string1;
}
catch(System.Exception)
{
} 
```

对此：

```
if(ConfigurationManager.AppSettings.Get(key) == null)
{
    lock (_lockObj)
    {
        if(ConfigurationManager.AppSettings.Get(key) == null)   // check required inside the lock()
        {
            ConfigurationManager.AppSettings.Set(key, value);
        }
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:30:06.080

如果有人感兴趣，我已经以一种非常老套的方式解决了这个问题（我认为）......我所做的是连接到`Application_Error`global.asax 中的事件，然后检查是否有`Server.GetLastError()`异常（或它的内部异常）包含引发的错误的详细信息（请参阅问题中的完整堆栈跟踪）。如果是这样，我然后使用本文中找到的方法调用应用程序域重新启动：[http ://www.west-wind.com/weblog/posts/2006/Oct/08/Recycling-an-ASPNET-Application-从内部](http://www.west-wind.com/weblog/posts/2006/Oct/08/Recycling-an-ASPNET-Application-from-within)（基本上使用`HttpRuntime.UnloadAppDomain();`或者如果通过触摸 web.config 文件不起作用。

我需要冲凉先...

# css - 如何通过jquery对动态创建的html元素进行样式设置

> ID：13321207
> 
> 赞同：1
> 
> 时间：2012-11-10T10:26:24.560
> 
> 标签：css, styles

我创建了一个脚本，如下所示：

```
 $.getJSON('Json.json',function(data){
 $('#output').empty();                          
 var html = '<div class="general">';                    
 html += '<span class="logo">' + data.general.logo+ '</span>';
 html += '<span class="name">' + data.general.name+ '</span>';
 html += '</div>';  
 html +='<ul class="navigation" >'; 
 html +='<li><a href='+data.navigation[0].link+'>'+data.navigation[0].title+'</a></li>'; 
```

我的问题是我现在如何在 CSS 中设置这些类的样式。我也将如何获取 id，因为目前我将 id 值作为 data.x.id smthing 像这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T10:37:24.710

当您在旅途中创建元素时，您必须使用该`.on()`方法。[http://api.jquery.com/on/](http://api.jquery.com/on/)

# android - 为什么我的 mysql 数据库不接受重音符号？

> ID：13321209
> 
> 赞同：3
> 
> 时间：2012-11-10T10:26:32.383
> 
> 标签：android, mysql, database, cakephp, collation

我刚刚发现了一个问题，其中包含重音符号的城市名称（例如 La Cañada、Peñasco 等）不会保存到我的数据库中。查看另一个 SO 问题的答案，[对于 MySQL 和 PHP 使用的最佳排序规则是什么？](https://stackoverflow.com/questions/367711/what-is-the-best-collation-to-use-for-mysql-with-php)，我尝试将我的数据库和 varchar 的排序规则类型都更改`latin1_swedish_ci`为`utf8_general_ci`仍然拒绝该字符。我也尝试`utf8_unicode_ci`过类似的结果。

如果我去掉客户端的重音标记，我已经验证了保存是否有效，但理想情况下我想将它保留在那里，因为这是城市的真实名称（无论如何根据谷歌地图 apis）。

您使用哪些排序规则类型来支持ñ？

附加信息：将 MySQL、phpMyAdmin 和 CakePHP 与 Android 应用程序一起用作客户端

* * *

感谢您迄今为止的建议。我想这现在变成了一个 CakePHP 问题......我注意到默认情况下[utf8 是不启用的](http://www.missingfeatures.com/2008/10/23/using-utf8-in-your-cakephp-app/)，所以我在我的 app/config/database.php 文件中启用了它。我将文件通过 FTP 传回服务器并再次尝试，但仍然没有任何运气。我是否需要重新部署应用程序来启动这些数据库配置更改，或者我的应用程序的其他区域我应该检查吗？第一次使用 CakePHP 用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T10:43:35.470

*排序*只是字符排序的顺序，这是执行比较的必要步骤。它与数据的存储方式无关（除非给定的排序规则特定于某些编码）。

*字符编码*是将字符映射到它们的二进制表示以进行存储，它决定了支持的*字符集*。

但是，仅仅因为数据库/表/列使用特定的字符编码并不是故事的结局。您还必须考虑在您的应用程序中以及在其与其他组件（例如 MySQL）的接口上使用的编码。

虽然它是针对 PHP 的，但[UTF-8](https://stackoverflow.com/a/279279)几乎涵盖了您需要考虑的所有内容。

# java - 具有多行的 CellTable 中的 GWT TextColumn

> ID：13321210
> 
> 赞同：0
> 
> 时间：2012-11-10T10:26:33.367
> 
> 标签：java, gwt, datagridtextcolumn

我想在 GWT 的 CellTable 中显示有关一本书的信息。比如它的内容。如何创建一个显示那么多文本的 TextColumn。多行或滚动条是我正在寻找的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:26:00.430

如果你的内容是纯文本，你可以把它放在 TextColumn 中。它将包裹在一个单元格中，除非某些 CSS 阻止包裹。

如果要对单元格的高度设置限制，请在此表中添加 CSS 规则：

```
.myTable tr {
    max-height: 100px;
} 
```

如果你有格式化文本，你需要通过扩展 AbstractCell 来创建你自己的 Cell：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells)

# symfony - symfony2 翻译奏鸣曲管理包

> ID：13321211
> 
> 赞同：6
> 
> 时间：2012-11-10T10:26:44.480
> 
> 标签：symfony, translation, bundle, admin, sonata-admin

我试图翻译 Sonata Admin Bundle Breadcrumbs 和 Tablename List 标题。到目前为止没有任何效果:-(

我将自己的翻译文件放在 /app/Resources/translations 和我自己的包的翻译文件夹中。我试图将它们放在 SonataAdminBundle.de.yml 和 messages.de.yml 中。我还在我的管理类中设置了一个翻译域。但是我仍然看不到我自己的翻译。唯一使用的翻译文件是来自 SonataAdminBundle 的翻译文件。

谁能告诉我如何正确处理 SonataAdminBundle 的翻译？哪些文件必须放在哪里，这些文件的内容是什么？

提前致谢。

丽莎

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:17:44.627

好吧，这就是我的做法：

在我的 XYBundle 中，我在 XYBundle/Ressources/translations 中创建了一个 XYBundle.fr.xliff 文件（确保它是翻译而不是翻译。使用 T 对我没有任何作用）至少有一个翻译：

```
<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
    <file source-language="en" datatype="plaintext" original="" >
        <body>
            <trans-unit id="breadcrumb.link_article_list">
                <source>breadcrumb.link_article_list</source>
                <target>Liste des articles</target>
            </trans-unit>  
        </body>
    </file>
</xliff> 
```

在您的服务声明中：

```
 <call method="setTranslationDomain">
            <argument>"XYBundle"</argument>
        </call> 
```

并且不要忘记清除缓存 php app/console cache:clear

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:31:34.400

确保您已清除缓存。否则新的翻译将被忽略。

就我而言，它仍然可以与 yaml 和 xml 文件一起使用。但请确保已设置 $translationDomain。否则只会加载默认的 SonataAdmin 翻译文件。

您可以在所有奏鸣曲管理类中手动设置属性：

`protected $translationDomain = 'messages';`

或在服务声明中如上所示...

# css - 活动链接不会改变颜色。怎么解决？

> ID：13321221
> 
> 赞同：0
> 
> 时间：2012-11-10T10:27:58.053
> 
> 标签：css, onclick, background-color

我对我的菜单有疑问。我有一个包含 6 个项目的菜单，如果它们处于活动状态（因此我的用户正在使用），我想给它们一个不同的颜色。我已经试过了：

```
<nav id="sub-navigation" class="toggles-menu">
<ul id="quick-index-nav" role="navigation" class="pills slim muted">
<li>
<a id="qindex-day">abc</a>
</li>
<li>
<a id="qindex-day">random</a>
</li>

<li<? if(!$_GET['t']||$_GET['t']=='') echo ' class="active"';?>>
<a id="qindex-popular" target="right" href="right.php">all of them</a>
</li>
<li<? if($_GET['t']=='tod') echo ' class="active"';?>>
<a id="qindex-today" target="right" href="right.php?t=tod">today</a>
</li>
<li class="yesterday<? if($_GET['t']=='yes') echo ' active"';?>">
<a id="qindex-yesterday" target="right" href="right.php?t=yes">yesterday</a>
</li>
<li<? if($_GET['t']=='mix') echo ' class="active"';?>>
<a id="qindex-day" target="right" href="right.php?t=mix">samba</a>
</li>
</ul>
</nav> 
```

CSS：

```
.pills>li.active>a{color:#fff}
.pills.slim>li>a{padding:3px 5px;}
.pills.muted>li>a{color:gray}
.pills.muted>li.active>a{color:#fff} 
```

但这行不通。如果我点击它们，它不会激活任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:30:46.783

您需要通过外部样式表或直接嵌入页面中的样式标记来向页面添加样式。

CSS：

```
li.active a{
    color: red; // for example
} 
```

您还可以使用内联样式：

```
<li<? if(!$_GET['t']||$_GET['t']=='') echo ' style="color: red;"';?>> 
```

它会起作用，但不推荐。

# netbeans - 64 位 Win 7 平台上的 JavaFx 应用程序

> ID：13321225
> 
> 赞同：0
> 
> 时间：2012-11-10T10:28:27.730
> 
> 标签：netbeans, 64-bit, javafx, java

我在运行的桌面上编写了一个 JavaFx 应用程序（基于 JavaFx 窗口的表单）

1.  赢 7 32 位
2.  Netbeans 7.3 测试版
3.  jdk-7u9-windows-i586

它运行成功。

我最近有一台笔记本电脑正在运行

1.  赢 7 64 位
2.  Netbeans 7.3 测试版
3.  jdk-7u9-windows-x64

我刚刚复制了代码并切换了 Java 平台......目前它设置为默认的“默认 JavaFx 平台”。

如果我运行该应用程序，我会收到以下错误对话框

JavaFx 启动器错误 - 运行应用程序时出现异常

任何人都知道我需要在这里更改什么...

运行应用程序时的完整堆栈跟踪

```
ant -f "C:\\DEV\\Projects\\Java Apps\\BaseAppPlatform" jfxsa-run
init:
Deleting: C:\DEV\Projects\Java Apps\BaseAppPlatform\build\built-jar.properties
deps-jar:
Updating property file: C:\DEV\Projects\Java Apps\BaseAppPlatform\build\built-jar.properties
compile:
Detected JavaFX Ant API version 1.2
Launching <fx:jar> task from C:\Program Files\Java\jdk1.7.0_09\lib\ant-javafx.jar
Signing JAR: C:\DEV\Projects\Java Apps\BaseAppPlatform\dist\BaseAppPlatform.jar to C:\DEV\Projects\Java Apps\BaseAppPlatform\dist\BaseAppPlatform.jar as nb-jfx

Warning: 
The signer certificate will expire within six months.
Enter Passphrase for keystore: Enter key password for nb-jfx: 
Launching <fx:deploy> task from C:\Program Files\Java\jdk1.7.0_09\lib\ant-javafx.jar
jfx-deployment-script:
jfx-deployment:
jar:
Copying 12 files to C:\DEV\Projects\Java Apps\BaseAppPlatform\dist\run858846669
jfx-project-run:
Executing com.javafx.main.Main from C:\DEV\Projects\Java Apps\BaseAppPlatform\dist\run858846669\BaseAppPlatform.jar using platform C:\Program Files\Java\jdk1.7.0_09/bin/java
java.lang.ClassNotFoundException: co.za.chrispie.LoginController
file:/C:/DEV/Projects/Java%20Apps/BaseAppPlatform/dist/run858846669/BaseAppPlatform.jar!/BaseAppPlatform/Login.fxml:9
at javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:728)
at javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:777)
at javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:182)
at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:565)
at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2314)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2131)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2742)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2721)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2707)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2694)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2683)
at BaseAppPlatform.BaseAppPlatform.start(BaseAppPlatform.java:21)
at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
at java.lang.Thread.run(Thread.java:722)

Exception in Application start method
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.javafx.main.Main.launchApp(Main.java:642)
at com.javafx.main.Main.main(Main.java:805)
Caused by: java.lang.RuntimeException: Exception in Application start method
at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
at java.lang.Thread.run(Thread.java:722)
Caused by: javafx.fxml.LoadException: java.lang.ClassNotFoundException: co.za.chrispie.LoginController
at javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:728)
at javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:777)
at javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:182)
at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:565)
at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2314)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2131)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2742)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2721)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2707)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2694)
at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2683)
at BaseAppPlatform.BaseAppPlatform.start(BaseAppPlatform.java:21)
at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
... 1 more
Caused by: java.lang.ClassNotFoundException: co.za.chrispie.LoginController
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:726)
... 19 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:16:24.813

`java.lang.ClassNotFoundException: co.za.chrispie.LoginController`根据您在复制时错过了一些代码或依赖库来判断。

查找负责类的 java 或 jar 文件`co.za.chrispie.LoginController`并确保：

*   它存在于您的笔记本电脑上
*   它在正确的位置包装明智
*   它包含在您的新项目中（源文件夹）

# dojox.grid.datagrid - 第二个请求没有重新加载数据

> ID：13321226
> 
> 赞同：1
> 
> 时间：2012-11-10T10:29:13.087
> 
> 标签：dojox.grid.datagrid

我有增强网格，它根据我对数据库的查询从 AJAX 调用获得响应后加载数据。
当我提出第一个请求时，我可以看到要在网格中正确填充的数据。但是，我更改了我的查询，它仍然加载以前的数据。我的响应以 JSON 格式从数据库返回正确的数据。

我尝试了所有可能的方式并使用 firebug 进行了调试，但无法获得输出。我尝试搜索类似的帖子，但它仍然对我不起作用。任何帮助将不胜感激。
我在下面粘贴我的代码。

```
_initialiseGrid:function(){

var layout = [
              {'name': 'Project Name', 'field': 'projectName', 'width': '200px'},
              {'name': 'Date Created', 'field': 'createdDate', 'width':       '100px',formatter:this.formatDate},
              {'name': 'Comments', 'field': 'senderComments', 'width': '250px',editable:true}                    
             ];

 dataGrid = new dojox.grid.EnhancedGrid({
            id: 'JoinProjectGrid',
            structure: layout,
            rowSelector: '20px',
            plugins: {indirectSelection: {headerSelector:true}}},
            document.createElement('div'));

}

_loadData:function(response){

     var projectList=response.retrievedList;
     var rowData = {
                    identifier: "projectId",
                    items: projectList
                   };
     dataStore = new dojo.data.ItemFileWriteStore({data: rowData});
     dataGrid.set("store",dataStore);
     dojo.byId("gridDivForJoin").appendChild(dataGrid.domNode);
     dataGrid.startup();

   } 
```

我尝试使用：

```
dataGrid.setStore(dataStore) 
```

这不适用于第二个请求，所以我使用了 dataGrid.set("store",dataStore) ，它不加载新数据但显示前一个数据。我也尝试过：

```
clearOnClose:true, urlPreventCache:true 
```

刷新网格并使用下面的代码也可以在第二次请求时清除存储。

```
 var newStore = new dojo.data.ItemFileReadStore({data: {  identifier: "",  items: []}});
  dataGrid.setStore(newStore); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:20:39.970

添加后我得到了它

```
dataGrid.render() 
```

# html - IE8 不支持媒体查询

> ID：13321228
> 
> 赞同：2
> 
> 时间：2012-11-10T10:29:18.923
> 
> 标签：html, css, internet-explorer-8

我使用链接标签使用媒体查询调用 css，但 ie8 不支持媒体查询，ie8+ 支持相同的媒体查询。

```
 <link rel="stylesheet" media="only screen and (min-width: 1200px)" href="something.css" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:32:59.430

看一下这个：

[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

respond.js polyfill 添加了对 ie 的媒体查询支持。它通过静默 ajax 调用动态加载样式表。

# excel - 在 Excel 中录制宏以进行图表格式化

> ID：13321229
> 
> 赞同：1
> 
> 时间：2012-11-10T10:29:26.457
> 
> 标签：excel, vba

宏记录是否适用于图表格式？我开始录制宏，在 excel 中创建图表并在图表上应用一堆格式。不幸的是，它没有记录格式化所需的 VB 代码。有没有办法让它在图表上记录格式更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:19:49.413

根据[Andy Pope](http://www.ozgrid.com/forum/showthread.php?t=76496&p=387734#post387734)的说法，“图表引擎在 2007 年是全新的，而 VBA 语法的吐出并没有及时实现。” 我假设这是您正在使用的版本？

他建议尽可能使用早期版本，否则请在对象浏览器、网络搜索中阅读，或在此处询问如何执行您想要执行的特定操作。我认为记录图表格式的能力也在 Excel 2010 中。

线宽设置为`ActiveChart.SeriesCollection(1).format.line.weight=2`

线条颜色设置为`ActiveChart.SeriesCollection(1).Border.Color = RGB(255, 127, 0)`

# javascript - 如何为 jquery ui 对话框创建自定义绑定？

> ID：13321230
> 
> 赞同：1
> 
> 时间：2012-11-10T10:29:41.357
> 
> 标签：javascript, jquery, knockout.js

我正在尝试创建一个`custom binding for jquery-ui dialog`. 我创建了一个按钮，我们可以通过它打开一个对话框。

[**JSFIDDLE**](http://jsbin.com/anexuz/1/edit)

**HTML**

```
<button data-bind="click: openDialog(true)">Open</button>

  <div data-bind="value: $root.openDialog, dialog: { autoOpen: false, 
                  resizable: false, draggable: false, 
                  dialogClass: 'differentDialog searchoption', modal: false }">
    <p>This is a dialog</p>
  </div> 
```

**JS**

```
function VM(){
  this.openDialog = ko.observable(false);
}
ko.bindingHandlers.dialog = {
    init: function (element, valueAccessor, allBindingAccessor, viewModel, bindingContext) {
        var options = ko.utils.unwrapObservable(valueAccessor() || {});

        $(element).dialog(options);
        alert('init');
    },
    update: function (element, valueAccessor, allBindingAccessor, viewModel, bindingContext) {
        alert('update');
        var options = ko.utils.unwrapObservable(valueAccessor() || {});

      if(viewModel.openDialog()){

        viewModel.openDialog(false);

        viewModel.openDialog.isModified(false);

        $(element).dialog("open");
      }
    }
};

ko.applyBindings(new VM()); 
```

我还没有成功。谁能告诉我我做错了什么？

# node.js - 无法将 node.js 应用程序部署到 heroku

> ID：13321231
> 
> 赞同：13
> 
> 时间：2012-11-10T10:29:50.453
> 
> 标签：node.js, heroku

我正在尝试将一个简单的基于 node.js express 的应用程序部署到 heroku，这显然是非常基本的：[https ://devcenter.heroku.com/articles/nodejs](https://devcenter.heroku.com/articles/nodejs)

这是我的 package.json：

```
{
  "name": "cours-lic3-blois",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "*",
    "ejs": "*",
    "github-flavored-markdown": "*",
    "less-middleware": "*"
  },
  "engines": {
    "node": "0.8.8",
    "npm": "1.1.65"
  }
} 
```

当我`git push heroku master`得到以下跟踪时：

```
 -----> Heroku receiving push
 -----> Node.js app detected
 -----> Resolving engine versions
        Using Node.js version: 0.8.8
        Using npm version: 1.1.65
 -----> Fetching Node.js binaries
 -----> Vendoring node into slug
 -----> Installing dependencies with npm
        npm ERR! Error: ENOENT, chmod '/tmp/build_1suuxlhd9s8n6/node_modules/express/bin/express'
        npm ERR! If you need help, you may report this log at:
        npm ERR!     <http://github.com/isaacs/npm/issues>
        npm ERR! or email it to:
        npm ERR!     <npm-@googlegroups.com>

        npm ERR! System Linux 2.6.32-348-ec2
        npm ERR! command "/tmp/node-node-tonf/bin/node" "/tmp/node-npm-NG88/cli.js" "rebuild"
        npm ERR! cwd /tmp/build_1suuxlhd9s8n6
        npm ERR! node -v v0.8.8
        npm ERR! npm -v 1.1.65
        npm ERR! path /tmp/build_1suuxlhd9s8n6/node_modules/express/bin/express
        npm ERR! code ENOENT
        npm ERR! errno 34
        npm ERR!
        npm ERR! Additional logging details can be found in:
        npm ERR!     /tmp/build_1suuxlhd9s8n6/npm-debug.log
        npm ERR! not ok code 0
  !     Failed to rebuild dependencies with npm
  !     Heroku push rejected, failed to compile Node.js app

 To git@heroku.com:fast-everglades-2007.git
  ! [remote rejected] master -> master (pre-receive hook declined)
 error: failed to push some refs to 'git@heroku.com:fast-everglades-2007.git' 
```

我试图在我的 package.json 中调整各种版本，但无济于事。我正在 Windows 上开发，这个 ENOENT 问题可能是由于某些文件模式问题造成的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T09:07:31.190

我通过以下方式解决了这个问题：

*   确保 Procfile 提交到 git

*   删除 node_modules/ 文件夹并将其提交到 git (git rm -r node_modules/)

之后，我做了 git push heroku master 然后错误消失了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-23T00:34:51.480

我遇到了这个问题，这是因为：

1.  我保持`node_modules`版本控制
2.  我`bin`在我的 .gitignore 文件中

`npm`正在尝试`chmod express/bin/express`，但由于我的`.gitignore`这个文件不在 git 中，因此在部署期间没有被克隆，所以它失败了。我没有注意到它，因为本地`npm`安装会`bin/express`照常创建文件。

删除`bin`并`.gitignore`提交丢失的文件为我解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T22:31:38.393

Heroku 团队，您能否考虑将 npm 配置为`npm install --no-bin-links --production`默认使用，或者创建一个环境变量让用户设置该标志。这是节点安装中的一个严重错误。从我的 .gitignore 中删除 bin 目录（如下所示）使我能够进行部署，但它在跨平台开发环境中有效地破坏了使用 git，需要在 node_modules 可能已更改的每个 git pull 上进行显式的 npm 重建。

NPM 最佳实践是避免在 .gitignore 中包含 node_modules（请参阅[http://www.futurealoof.com/posts/nodemodules-in-git.html](http://www.futurealoof.com/posts/nodemodules-in-git.html)）。

我相信`--no-bin-links`这将提供两全其美的效果，在已排除 bin 目录的情况下启用 node_modules 的部署，支持 npm 重建，但在创建 bin 链接时不会失败。

我在这里提交了一个拉取请求：[https ://github.com/heroku/heroku-buildpack-nodejs/pull/33](https://github.com/heroku/heroku-buildpack-nodejs/pull/33)

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T11:20:12.410

通过将 gruntfile.js 重命名为 Gruntfile.js 解决了类似的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-10T15:48:16.080

几天前我遇到了类似的问题，我认为是因为我导入了我创建的模块，这就是错误的原因；我这样更正它：我将模块称为“路径” `const path = require ("path")` ，然后在导入模块的位置加入文件路径 `const myModule = require (path.join (__ dirname, 'MyModule.js'))`

# openlaszlo - resizestate 中的 Openlaszlo 缩放问题

> ID：13321232
> 
> 赞同：1
> 
> 时间：2012-11-10T10:29:59.780
> 
> 标签：openlaszlo, lzx

我实际上是在拖动时尝试创建荧光笔，我可以使用调整大小状态和 drawview 类来实现这一点。但是当视图被缩放时这不起作用。

当我尝试拖动鼠标时，它有时会起作用，有时所选区域会变小或变大。我附上了示例代码

```
<canvas width="1024" height="768" debug="true">    
<class name="boxdraw">    

        <handler name="onmousedown"><![CDATA[
                Debug.write("onmousedown");
                this.boxview.setAttribute ('x', this.getMouse ('x'));
                this.boxview.setAttribute ('y', this.getMouse ('y'));
                this.boxview.setAttribute ('width', 0);
                this.boxview.setAttribute ('height', 0);
                this.boxview.setAttribute ('visible', true);

                this.boxview.resizer.apply ();
        ]]></handler>

        <handler name="onmouseup"><![CDATA[
                Debug.write("onmouseip");
                this.boxview.setAttribute ('visible', false);
                this.boxview.resizer.remove ();

        ]]></handler>

        <handler name="oninit" >
              this.setAttribute ('clickable', true);
        </handler>
    <drawview name="boxview" visible="false">
             <attribute name="isready" value="false" type="boolean" />
              <handler name="oncontext">
                this.setAttribute("isready", true);
                this.strokeStyle = 0x999999;
                this.lineWidth = 2;
              </handler>

            <handler name="oninit">
                this.strokeStyle = 0x999999;
                this.lineWidth = 2;
            </handler>

            <resizestate name="resizer">

                <attribute name="minheight" value="${-this.y + 1}"/>
                <attribute name="minwidth" value="${-this.x + 1}"/>

                <attribute name="maxheight" value="${classroot.height - this.y - 1}"/>
                <attribute name="maxwidth" value="${classroot.width - this.x - 1}"/>
                <attribute name="xroffset" value="${this.x - this.width + this.getMouse( 'x' )}" /> 
                <attribute name="yroffset" value="${this.y - this.height + this.getMouse( 'y' )}" /> 

                <attribute name="width"
                           value="${(this.immediateparent.getMouse ( 'x' ) - this.xroffset) > this.maxwidth ? 
                                  this.maxwidth : 
                                  Math.max((this.immediateparent.getMouse( 'x' )- this.xroffset), this.minwidth)}" />

                <attribute name="height"
                           value="${(this.immediateparent.getMouse ( 'y' ) - this.yroffset) > this.maxheight ? 
                                  this.maxheight : 
                                  Math.max((this.immediateparent.getMouse( 'y' )- this.yroffset), this.minheight)}" />

                <handler name="onwidth">
                    this._draw ();                    
                </handler>

                <handler name="onheight">
                    this._draw ();

                </handler>

                <method name="_draw"><![CDATA[
                    Debug.write("__draw", this.minheight, this.maxheight,this.minwidth,this.maxwidth);
                    Debug.write("this.xroffset,this.yroffset", this.xroffset,this.yroffset);
                    Debug.write("this.immediateparent.getMouse ( 'x' )",this.immediateparent.getMouse ( 'x' ),this.immediateparent.getMouse ( 'y' ));

                    this.clear ();
                    this.beginPath();
                    this.lineTo (this.width, 0);
                    this.lineTo (this.width, this.height);
                    this.lineTo (0, this.height);                                   
                    this.lineTo (0, 0);
                    this.closePath();
                    this.stroke ();

                ]]></method>

            </resizestate>
        </drawview>

    </class>

    <view name="sample" width="1024" height="600" bgcolor="green" xscale="1.63" yscale="1.53">
        <boxdraw name="resizebox" 
                           width="100%" height="100%"
                          options="ignorelayout" 
                           visible="true"/>
    </view>

</canvas> 
```

# linux - 使用 rsyslog 重定向日志

> ID：13321240
> 
> 赞同：-1
> 
> 时间：2012-11-10T10:31:00.870
> 
> 标签：linux, redirect, logging, rsyslog

我在 rsyslog.conf 中添加了这一行：

```
if $msg contains 'arpwatch'          then          /var/log/test.log 
```

问题是如果我有同时包含表达式 (arpwatch) 的日志行，那么只有第一行被记录，而其他行则不被记录。

如果我同时有包含“arpwatch”的行，我如何修改我的表达式以写入日志？

如果将这些行发送到 rsyslog：

```
2012 年 11 月 10 日 09:56:34 alienvault->/var/log/syslog 11 月 10 日 09:56:34 alienvault arpwatch_eth0: chdir(/usr/arpwatch): 没有这样的文件或目录
2012 年 11 月 10 日 09:56:34 alienvault->/var/log/syslog 11 月 10 日 09:56:34 alienvault arpwatch_eth0：（使用当前工作目录）
2012 年 11 月 10 日 09:56:34 alienvault->/var/log/syslog 11 月 10 日 09:56:34 alienvault arpwatch_eth0：pcap 打开 eth0：eth0：不存在这样的设备（SIOCGIFHWADDR：没有这样的设备）

```

然后`/var/log/test.log`我有这条线：

```
2012 年 11 月 10 日 09:56:34 alienvault->/var/log/syslog 11 月 10 日 09:56:34 alienvault arpwatch_eth0: chdir(/usr/arpwatch): 没有这样的文件或目录

```

其他的被忽略

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T08:01:27.743

```
$template usermsg,"%TIMESTAMP% %HOSTNAME% %programname% %syslogfacility-text%.%syslogseverity-text% :%msg:::sp-if-no-1st-sp%%msg::drop-last-lf%\n"
$ActionFileDefaultTemplate usermsg

if $programname == 'arpwatch' and $msg contains 'arpwatch' then /var/log/test.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:40:24.790

您检查 rsyslog 的 msg 属性以了解该模式`arpwatch`- 但它实际上只在记录的消息中......这`arpwatch_eth0`不是 msg 的一部分

# c# - 如何使用 C# 在 aspx 中的 div 中添加 div 和文本

> ID：13321244
> 
> 赞同：0
> 
> 时间：2012-11-10T10:31:49.137
> 
> 标签：c#, asp.net

如何使用 C# 在 .aspx 文件的 div 中添加 div 和文本。我想添加一个用于输入评论或查询的文本框以及一个用于发布该文本/查询的按钮。到服务器。重定向后，该页面应从 DB 获取数据并在该页面上显示。与stackoverflow之类的（所有表单）相同，我们输入问题，然后提交，可以显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:37:46.087

取自代码项目站点 - 在 div 中创建一个 div（如果您使用的是 asp.net，它的工作方式）

```
System.Web.UI.HtmlControls.HtmlGenericControl Panel = new System.Web.UI.HtmlControls.HtmlGenericControl("DIV");
    Panel.ID = "panel1";
    Panel.Style.Add(HtmlTextWriterStyle.BackgroundColor, "White");
    Panel.Style.Add(HtmlTextWriterStyle.Height, "680px");
    Panel.Style.Add(HtmlTextWriterStyle.Width, "660px");
    Panel.Style.Add(HtmlTextWriterStyle.BorderColor, "Black");
    Panel.Style.Add(HtmlTextWriterStyle.BorderStyle, "Groove");
    Panel.Style.Add(HtmlTextWriterStyle.BorderWidth, "2px");
    System.Web.UI.HtmlControls.HtmlGenericControl div = new System.Web.UI.HtmlControls.HtmlGenericControl("DIV");
    div.ID = "panel12";
    div.Style.Add(HtmlTextWriterStyle.BackgroundColor, "White");
    div.Style.Add(HtmlTextWriterStyle.Height, "70px");
    div.Style.Add(HtmlTextWriterStyle.Width, "60px");
    div.Style.Add(HtmlTextWriterStyle.BorderColor, "Black");
    div.Style.Add(HtmlTextWriterStyle.BorderStyle, "Groove");
    div.Style.Add(HtmlTextWriterStyle.BorderWidth, "2px");
    this.Controls.Add(Panel);
    Panel.Controls.Add(div); 
```

# c - 为什么变量的printf输出不同

> ID：13321248
> 
> 赞同：1
> 
> 时间：2012-11-10T10:32:30.687
> 
> 标签：c, printf

我不知道为什么会这样！想知道原因。

```
{
int i=01;
printf("%d\n",i);
}
output: 1 
```

但

```
{
int i=011;
printf("%d\n",i);
}
output: 9 
```

有人有答案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T10:33:57.153

`011`是八进制常数。`11 (b8) = 9 (b10)`.

> **C11 (n1570), § 6.4.4.1 整数常量**
> 八进制常量由前缀 0 组成，可选地后跟数字 0 到 7 的序列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T10:34:55.293

011 = 八进制，(1*8)+1=9 ...................

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-29T16:01:31.230

```
The numbers which are preceded by 0 is called octal numbers in c programming .
to evaluate such an expression we simply follow a conversion rule of converting octal to decimal number system
For conversion the following steps are  to be proceed
such as 011
here 0 indicate the number is octal 
and we are require to convert 11 which is (base 8) to decimal (base 10)

11= 1x8^1+1x8^0
   =8+1
   =9 
```

# powershell - 奇怪的 PowerShell Exec 输出捕获行为

> ID：13321250
> 
> 赞同：1
> 
> 时间：2012-11-10T10:32:35.430
> 
> 标签：powershell, powershell-3.0

我正在编写一个简单的 PowerShell 脚本来处理 mkvinfo 的输出。它捕获 mkvinfo 的输出，存储在变量 $s 中并对 $s 进行一些后处理。奇怪的是，虽然 $s 有内容，但我无法从中提取子字符串。

我收到的错误消息是：

> 使用“1”参数调用“子字符串”的异常：“startIndex 不能大于字符串的长度。参数名称：startIndex”

这是一个示例代码：

```
$filePath = $folder + $file.name
$mkvinfoExe = "C:\mkvinfo.exe"
$s = & $mkvinfoExe $filePath
$s | out-host
$s.Substring($s.Length-1) | out-host 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T10:40:38.777

你确定`$s`是字符串而不是数组吗？如果它是一个数组，`$s.Length`将是数组中元素的数量，你可能会得到你得到的错误。

例如：

```
PS > $str = @("this", "is", "a")
PS > $str.SubString($str.Length - 1)
Exception calling "Substring" with "1" argument(s): "startIndex cannot be larger than length of string.
Parameter name: startIndex"
At line:1 char:1
+ $str.SubString($str.Length - 1)
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ArgumentOutOfRangeException 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:40:46.050

刚刚发现是因为mkvinfo输出多行，$s其实是一个String数组（或者List？）。切换到 $s[0].Substring($s[0].Length-1) 可以解决它。

# c - gcc 用 -o 构建，但不是 -o3？

> ID：13321257
> 
> 赞同：2
> 
> 时间：2012-11-10T10:33:42.317
> 
> 标签：c, gcc, compiler-errors, compiler-optimization

我的 Makefile 看起来像这样：

```
CC=gcc
CFLAGS=-Wall -Wextra -std=c99 -pedantic
OBJECTS=main.o Scene.o Matrix.o Vector.o Triangle.o Color.o Raster.o

render: $(OBJECTS)
    $(CC) $(CFLAGS) -lm -o render -g $(OBJECTS)
    rm $(OBJECTS)

clean:
    rm -f render* 
```

这构建了我的可执行文件，没有错误，但是当我将 -o 更改为 -o2 或 -o3 时，我收到错误：

```
gcc -Wall -Wextra -std=c99 -pedantic   -c -o main.o main.c
gcc -Wall -Wextra -std=c99 -pedantic   -c -o Scene.o Scene.c
gcc -Wall -Wextra -std=c99 -pedantic   -c -o Matrix.o Matrix.c
gcc -Wall -Wextra -std=c99 -pedantic   -c -o Vector.o Vector.c
gcc -Wall -Wextra -std=c99 -pedantic   -c -o Triangle.o Triangle.c
gcc -Wall -Wextra -std=c99 -pedantic   -c -o Color.o Color.c
gcc -Wall -Wextra -std=c99 -pedantic   -c -o Raster.o Raster.c
gcc -Wall -Wextra -std=c99 -pedantic -lm -o3 render -g main.o Scene.o Matrix.o Vector.o Triangle.o Color.o Raster.o
gcc.exe: error: render: No such file or directory
make: *** [render] Error 1 
```

优化标志检测到我的代码中可能存在一些错误，但由于在此之前我没有收到任何错误消息，因此很难知道出了什么问题。我在 Windows 7 上使用 MinGW/MSYS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T10:37:11.373

`-o render`表示使用名称创建输出文件`render`。

现在您将其更改`-o`为`-o3`不正确的。相反，您需要保持`-o render`原样并添加一个`-O3`优化标志。注意大写字母`O`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T10:35:03.403

`-o`是输出文件标志。你在想`-O`（资本）。

# android - 从 obj 文件渲染对象并创建 VBO 结果混合纹理或黑屏

> ID：13321260
> 
> 赞同：1
> 
> 时间：2012-11-10T10:33:56.873
> 
> 标签：android, opengl-es, textures, vbo, wavefront

我想通过解析一个obj文件来渲染一个对象（android平台，opengl es 1.1）。解析没问题，我将所有数据（v、vn、vt）和索引正确存储在单独的数组中。当我尝试使用 glDrawElements 进行渲染时，对象绘制得很好，但纹理是混合的。我猜这是因为纹理坐标的索引与顶点不同，opengl 只使用顶点索引。我试图使 VBO 不能使用索引。但是这次当我调用 gldrawArrays 时，什么都没有绘制。（黑页）。请告诉我问题的原因是什么以及渲染此类对象的其他方法是什么。

这是我的代码的一些部分。如果您需要其他零件，请告诉我。这是 ObjectArr 类，它保存矩阵并创建 VBO 并绘制对象。

```
public ObjectArr(float[] positions, float[] textureCoords, float[] normal, short[] faceIndices, short[] texturePointer, short[] normalPointer){
    texture = textureCoords;
    vertexPointer = faceIndices;
    normals = normal;
    vertex = positions;
    ByteBuffer ilbuffer = ByteBuffer.allocate(vertexPointer.length * 8 * 4); // creating interleave
    ilbuffer.order(ByteOrder.nativeOrder());
    interleave = ilbuffer.asFloatBuffer();
    for (int i = 0; i < vertexPointer.length; i++) { 
        for (int j = 0;j < 3; j++) // positions
            interleave.put(vertex[3 * vertexPointer[i] + j]); // three number for position
        for (int j = 0;j < 3; j++) // normals
            interleave.put(normals[3 * normalPointer[i] + j]); // three number for normal
        for (int j = 0; j < 3; j++) 
            interleave.put(texture[3 * texturePointer[i] + j]); // three number for texture
    }
    interleave.position(0);
draw (GL10 gl){    
    GL11 gl11 = (GL11) gl;
    int stride = 9 * 4;
    gl11.glBindBuffer(GL11.GL_ARRAY_BUFFER, VBO[0]);
    gl11.glEnableClientState(GL11.GL_VERTEX_ARRAY);
    gl11.glVertexPointer(3, GL11.GL_FLOAT, stride, 0);
    gl11.glEnableClientState(GL11.GL_NORMAL_ARRAY);
    gl11.glNormalPointer(GL11.GL_FLOAT, stride, 3 * 4); // 4 is float size
    gl11.glEnableClientState(GL11.GL_TEXTURE_COORD_ARRAY);
    gl11.glTexCoordPointer(3,GL11.GL_FLOAT,stride,(3 + 3) * 4);
    gl11.glEnable(GL11.GL_TEXTURE_2D);
    gl11.glBindTexture(GL11.GL_TEXTURE_2D, texturesMatrix[0]);
    gl11.glDrawArrays(GL11.GL_TRIANGLE_STRIP, 0, vertexPointer.length);
    // deactivate arrays with gldisableclient...
    gl11.glBindBuffer(GL11.GL_ARRAY_BUFFER, 0);
}
public void createVBO(GL10 gl){ // creates VBO from interleave created before
    GL11 gl11 = (GL11) gl;
    VBO = new int[1];
    gl11.glGenBuffers(1, VBO, 0);
    gl11.glBindBuffer(GLES11.GL_ARRAY_BUFFER, VBO[0]);
    gl11.glBufferData(GLES11.GL_ARRAY_BUFFER, 9 * 4 * vertexPointer.length, interleave, GLES11.GL_STATIC_DRAW); // 9 is stride
}

public void loadGLTexture(GL10 gl, Context context) { // plane is a simple obj and also png file
    GL11 gl11 = (GL11) gl;
    // reading bitmap from raw folder
    gl11.glGenTextures(1, texturesMatrix, 0); // matrix with integer values for binding
    gl11.glBindTexture(GL11.GL_TEXTURE_2D, texturesMatrix[0]);
    GLUtils.texImage2D(GL11.GL_TEXTURE_2D, 0, bitmap, 0);
    bitmap.recycle();
} 
```

这是我的渲染器中的 unSurfaceCreated 和 onDrawFrame 方法。

```
public void onSurfaceCreated(GL10 gl, EGLConfig config) { 
    GL11 gl11 = (GL11) gl;
    obj.createVBO(gl);
    obj.loadGLTexture(gl, this.context);
    gl11.glEnable(GL10.GL_TEXTURE_2D);
    gl11.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);  // Set color's clear-value to black
    gl11.glClearDepthf(1.0f);            // Set depth's clear-value to farthest
    gl11.glEnable(GL10.GL_DEPTH_TEST);   // Enables depth-buffer for hidden surface removal
    gl11.glDepthFunc(GL10.GL_LEQUAL);    // The type of depth testing to do
    gl11.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);  // nice perspective view
    gl11.glShadeModel(GL10.GL_SMOOTH);   // Enable smooth shading of color
    gl11.glDisable(GL10.GL_DITHER);      // Disable dithering for better performance
}
public void onDrawFrame(GL10 gl){
    GL11 gl11 = (GL11) gl;
    // Clear color and depth buffers
    gl11.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl11.glLoadIdentity();
    gl11.glTranslatef(-8.0f, 0.0f, -16.0f);
    //--- Touch
    gl11.glTranslatef(X, 0.0f, 0.0f);
    gl11.glTranslatef(0.0f, Y, 0.0f);
    //--- Touch
    gl11.glScalef(0.03f * zoomScale, 0.03f * zoomScale, 0.03f * zoomScale);  (NEW)
    obj.draw(gl);
} 
```

我完全困惑和卡住了。我很感激任何帮助。tnx。

# java - 如何在 Java 中使用 GCC？

> ID：13321267
> 
> 赞同：14
> 
> 时间：2012-11-10T10:34:23.913
> 
> 标签：java, gcc, cygwin

为了使用 GCC，我在 windows 7 上安装了 CYGWIN Emulator Terminal，我知道它可以编译太多语言，我可以将它与 C 一起正确使用，但不知道如何使用它来编译 java 文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2018-08-02T11:19:10.637

**如果有人在2016 年 9 月 30 日之后**阅读此问题：

GNU Compiler for Java ( **GCJ** ) 已**停产**，不再是 GNU Compiler Collection (GCC) 的一部分，如[GCC 7 的发行说明中](https://gcc.gnu.org/gcc-7/changes.html)所示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-10T10:38:54.140

你读过说明书吗？ [GNU Java](https://gcc.gnu.org/wiki/GCJ)

他们有一个名为 gcj 的编译器，专门用于 Java 语言。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-04T12:53:10.677

**GCC Java 编译器**

曾几何时，有一个 GCC Java 前端，但它已被弃用。

值得注意的是，该软件包[不再存在于 Ubuntu 18.04 中，但它存在于 Ubuntu 16.04](https://packages.ubuntu.com/search?keywords=gcj)中。

为什么它被弃用：[Java JRE vs GCJ](https://stackoverflow.com/questions/3032727/java-jre-vs-gcj)

只是为了好玩，我们可以在旧的 Docker 容器中试用这个历史软件。但是 TODO：我今天无法让它在 Ubuntu 16.04 或 14.04 客户机上运行，​​而且我懒得调试它。但我发誓，当我第一次回答这个问题时，我至少完成了一次。

主.java

```
public class Main {
    public static void main(String args[]) {
        System.out.println("hello world");
    }
} 
```

编译并运行：

```
sudo apt-get install gcj-4.8 libgcj16-dev
gcj-4.8 -c Main.java
gcj --main=Main -o Main Main.o
./Main 
```

编译失败：

```
gcj-4.8: error: libgcj.spec: No such file or directory 
```

相关：[https ://bugs.launchpad.net/ubuntu/+source/gcj-4.0/+bug/24906](https://bugs.launchpad.net/ubuntu/+source/gcj-4.0/+bug/24906)

**安卓艺术**

从 Android 5 开始，Android 一直在使用“ART 运行时”，它会提前在应用程序中编译 Java：[https ://en.wikipedia.org/wiki/Android_Runtime](https://en.wikipedia.org/wiki/Android_Runtime)

因此，如果您要在 2019 年的今天研究 Java 到二进制编译，那么您应该看看。

就像 Android 中的所有其他东西一样，不幸的是，在没有 Android 的其余部分的情况下运行 ART 可能是不可能的或疯狂的。

这里我简单解压了一些预编译的 Android 应用程序：[Java 中的 native 关键字是干什么用的？](https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for/30635871#30635871)表明它们实际上被编译为共享对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-10T10:57:11.997

[GCC 是](http://gcc.gnu.org/frontends.html)编译多种语言（GNU Pascal、Mercury、Cobol、GNU Modula-2、Modula-3、GHDL、PL/1、GCC Unified Parallel C...）的前端。

> 目前主要的 GCC 发行版包含 C (gcc)、C++ (g++)、Objective C、Fortran、Java (GCJ)、Ada (GNAT) 和 Go 的前端。

[GCJ](http://gcc.gnu.org/java/)相当于 javac，但正如您所见，最新消息是 2009 年发布的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-22T13:58:39.377

除了接受的答案之外，我建议不要根据以下帖子使用 GCC 编译 Java：[Java JRE vs GCJ](https://stackoverflow.com/questions/3032727/java-jre-vs-gcj)。Javac 是一个更好的选择！但是，如果您使用 GCC 将 Java 编译为本机代码（也许），它可能仍然值得一看。在我看来，GCJ 已经死了（最后一次新闻更新是在 2009 年！[https://gcc.gnu.org/java/index.html](https://gcc.gnu.org/java/index.html)）

# javascript - 显示具有一个固定尺寸的图像的稳健方法

> ID：13321271
> 
> 赞同：2
> 
> 时间：2012-11-10T10:35:37.367
> 
> 标签：javascript, jquery, css

假设我们有一个用户上传的图片，上传脚本限制了 mb 但不限制图片大小（所以可以是任何比例，600X200,200X350 等等......）。

[我已经使用写在 css 上的 twitter bootstrap图像处理程序](http://twitter.github.com/bootstrap/base-css.html#images)在我的网站上显示了这张图片的一部分，这对个人资料图片很有用，问题是现在我希望该图片成为封面（如 facebook/twitter[封面图片](http://facebookcoversize.com/)），我的网站是响应式的，所以如果屏幕分辨率小于 900 像素宽，封面的宽度为 900 像素或 100%。高度始终固定为 200 像素。所以我知道有一种方法可以使用 CSS（也可能使用 jquery）来控制正确的图像显示，但我不是前端开发人员，我是 php 开发人员，我不想使用服务器端脚本来执行此操作。所以我开始寻找建议或代码片段（css，javascript），我相信它必须是已经为此制定的解决方案，但我在谷歌上找不到任何解决方案。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:43:05.523

我绝对**不建议**使用纯 CSS 解决方案。如果上传的图片可以有任何分辨率，甚至不是客户端解决方案。您想使用 php 脚本保存已上传图像的调整大小版本并将其提供给客户端。作为块的背景图像并使用 css（不是跨浏览器）或作为 img 标签并使用 js 调整大小。

CSS：

```
.myselector{
    background-size: cover;
} 
```

或 js (jquery):

```
$(function(){
    var containers = $('.myselector'), w = $(window);
    function onResize(){
        //resize code
        containers.each(function(){
            var $this = $(this),
                w = $this.width(),
                h = $this.height(),
                ratio = w/h,
                $img = $('img',$this); // assuming there is only one img in each container
            $img.css({'width':'auto','height':'auto'});
            var iw = $img.width(), ih = $img.height(), iratio = iw/ih;
            if(iratio>ratio){
                $img.css({
                    height:'100%',
                    width:'auto',
                    marginLeft: (w-iw*(h/ih))/2
                });
            }
            else{
                $img.css({
                    width:'100%',
                    height:'auto',,
                    marginTop: (h-ih*(w/iw))/2
                });
            }
        });
    }
    w.bind('resize',onResize);
    //resize on each image load event
    $('img',containers).bind('load',onResize);
    onResize();
}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/kHxd2/2/](http://jsfiddle.net/kHxd2/2/)

当缓存的图像在 IE 中呈现时，图像的 onload 监听器可能需要 tweeking 做出反应：http: [//css-tricks.com/snippets/jquery/fixing-load-in-ie-for-cached-images/](http://css-tricks.com/snippets/jquery/fixing-load-in-ie-for-cached-images/)

此外，您可能想为罕见的非 js 浏览器设置 css 规则... (.myselector img{width:100%;})

编辑：容器CSS：

```
.myselector{
    width: 100%;
    max-width: 900px;
    height: 200px;
    margin: auto; /* centering */
    overflow: hidden;
} 
```

查看更新的小提琴：http: [//jsfiddle.net/kHxd2/3/](http://jsfiddle.net/kHxd2/3/)

最好的解决方案是将图像容器嵌入主包装器 div 并将上述 css 规则应用于该大容器。

这是一些有用的代码来处理服务器端调整大小：[http ://www.9lessons.info/2009/03/upload-and-resize-image-with-php.html](http://www.9lessons.info/2009/03/upload-and-resize-image-with-php.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:39:21.523

您必须将此图像作为背景图像，然后使用样式：

```
background-image: url(url/to/your/image.png);
background-size: cover; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T10:39:30.097

css3 中有一个属性叫做 as`background-size:cover;`和`background-size:contain;`。您可能希望使用它们来满足您的需求。

**包含**

**指定背景图像应该被缩放到尽可能大，同时确保它的两个尺寸都小于或等于背景定位区域的相应尺寸。**

**cover**

**指定背景图片在保证两个尺寸都大于或等于背景定位区域对应尺寸的情况下，尽量缩小。**

# java - 如何在 Jetty 8 中使用 JDBC 连接池？

> ID：13321278
> 
> 赞同：2
> 
> 时间：2012-11-10T10:36:42.457
> 
> 标签：java, jdbc, jetty, jndi, connection-pooling

我以前使用过 Tomcat 的 JDBC 连接池，它[可以在 Java 中轻松配置](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html#Plain_Ol%27_Java)。

现在我使用 Jetty 8。

如何在 Jetty 中使用 JDBC 连接池？我看了[这里，](http://wiki.eclipse.org/Jetty/Howto/Configure_JNDI_Datasource)但是我不知道把这些 XML 片段放在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:57:10.637

您可以在 jetty.xml 文件或 WEB-INF/jetty-env.xml 文件或上下文 XML 文件中配置所有 JNDI 资源。有关更多信息，请参阅 JNDI。

您还需要将池实现 jar 文件添加到类路径中。

# javascript - 事件点击 youtube API

> ID：13321282
> 
> 赞同：0
> 
> 时间：2012-11-10T10:37:20.937
> 
> 标签：javascript, youtube-api, jquery, preventdefault

我正在使用 Youtube API 和 Jquery。使用某个脚本，我可以将 Youtube Feeds 作为图像获取，看一下示例：[JsFiddle](http://jsfiddle.net/bfysr/1/)

我正在尝试执行一个 Jquery 点击事件，该事件必须调用另一个名为“嵌入”的脚本，如下所示：

```
$("a").click(function(event) {
    event.preventDefault();
    $(this).embedly({
    chars: 220,
    nostyle: true,
    key:':41f042ec20b04dda84448dc4a46d357d'
}); 
}); 
```

它似乎不起作用。当我从我的桌面执行此操作时，单击不会调用嵌入部分，并且无论阻止默认值如何，都会转到 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:58:23.077

您可以使用事件委托来确保无论锚点何时进入 DOM 都会触发处理程序：

```
$(document).on("click","a",function(event) {
    event.preventDefault();
    $(this).embedly({
        chars: 220,
        nostyle: true,
        key:':41f042ec20b04dda84448dc4a46d357d'
    });
}); 
```

[http://jsfiddle.net/bfysr/3/](http://jsfiddle.net/bfysr/3/)

# c# - 在 C# 中获取列表的子字符串

> ID：13321285
> 
> 赞同：1
> 
> 时间：2012-11-10T10:37:44.477
> 
> 标签：c#, string, linq

我即将获得列表的子字符串。这是我的 LINQ。（从第三方服务读取 XML。）

```
 var Payment = from Main in xml.Descendants(ns + "OTA_AirBookRQ")
               select new
               {
                   DepartureDate = Main
                                   .Elements(ns+"Segment")
                                   .Elements(ns+"DepartureDate")
                                   .ToList(),
               } 
```

`Payment.DepartureDate[0].Value`返回日期为`"2012-11-14T19:05:00"`. 我需要从中得到的只是`"19:05:00"`. 我如何实现这一目标？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T10:40:41.823

```
DateTime.Parse("2012-11-14T19:05:00").ToString("HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:42:48.450

使用该`DateTime.Parse(dateString)`方法执行此操作更有意义，但如果您必须使用子字符串，只需执行：（ `string.substring(firstPos, length);`在您的情况下 - 假设您的日期字符串名为 strDate： `strDate.substring(9, strDate.length-1);`

子字符串：http: [//msdn.microsoft.com/en-us/library/system.string.substring (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.string.substring(v=vs.100).aspx)

日期时间解析：http: [//msdn.microsoft.com/en-us/library/1k1skd40.aspx](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

# javascript - 使用 ajax 分页加载页面后重新初始化其他 javascript 函数

> ID：13321292
> 
> 赞同：8
> 
> 时间：2012-11-10T10:38:20.487
> 
> 标签：javascript, jquery, ajax, pagination

抱歉，这里是个新手。如何加载其他插件，并在加载 ajax 生成的页面后让其他单独的脚本运行？这是我当前的代码：

```
jQuery(document).ready(function($) {
var $mainContent = $("load-content"),
siteUrl = "http://" + top.location.host.toString(),
url = ''; 

$(document).delegate("a[href^='"+siteUrl+"']:not([href*='/wp-admin/']):not([href*='/wp-login.php']):not([href$='/feed/'])", "click", function() {

if($.browser.msie){
var myie="/"+this.pathname;
location.hash = myie;
//alert(location.hash);

}else{

location.hash = this.pathname;
}
return false;
});

$("#searchform").submit(function(e) {

$search = $("#s").val();
$search = $.trim($search);
$search = $search.replace(/\s+/g,'+');

location.hash = '?s='+$search;
e.preventDefault();
});

$(window).bind('hashchange', function(){
url = window.location.hash.substring(1);
if (!url) {
return;
}

url = url + " #content";

$('html, body, document').animate({scrollTop:0}, 'fast');

$mainContent.fadeOut(500, function(){$('#content').fadeOut(500, function(){
$("#loader").show();});}).load(url, function() {
$mainContent.fadeIn(500, function(){
$("#loader").hide(function(){ $('#content').fadeIn(500);});});});
});
$(window).trigger('hashchange');

}); 
```

页面上的嵌入对象如何保留其功能？主要是视频、幻灯片和其他使用 javascript 的媒体，例如

[视频js（html5视频播放器）](http://videojs.com/)

维密欧

和

[wordpress 的投资组合幻灯片](http://wordpress.org/extend/plugins/portfolio-slideshow/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T21:58:45.367

当您加载 ajax 生成的标记时，它不会保留以前的功能。在上面的示例中，当 DOM 准备好执行操作时，您正在初始化事物。为了确保任何插件等在您执行 ajax 请求后正在运行，您需要重新初始化它们。

鉴于您上面的代码示例，我建议您进行一些重组。例如，您可以创建一个名为的函数`init`，您可以调用该函数来初始化某些插件：

```
function init () {
    $("#plugin-element").pluginName();
}

jQuery(document).ready(function () {
    // Initialise the plugin when the DOM is ready to be acted upon
    init();
}); 
```

然后在此之后，在您成功回调 ajax 请求时，您可以再次调用它，这将重新初始化插件：

```
// inside jQuery(document).ready(...)
$.ajax({
    type: 'GET',
    url: 'page-to-request.html',
    success: function (data, textStatus, jqXHR) {
        // Do something with your requested markup (data)
        $('#ajax-target').html(data);            

        // Reinitialise plugins:
        init();
    },
    error: function (jqXHR, textStatus, errorThrown) {
        // Callback for when the request fails
    }
}); 
```

# c# - 我无法在 c# 中使用 asp.net 从 Excel 文件中读取并存储到数据库中？

> ID：13321294
> 
> 赞同：0
> 
> 时间：2012-11-10T10:38:30.200
> 
> 标签：c#, asp.net, excel

我这样做是为了阅读：

```
private bool writetoven(string xlspath)
{
    OleDbConnection excelConnection = new OleDbConnection(excelConnectionString)

    try
    {
        OleDbCommand ocmd = new OleDbCommand("select * from [Sheet1$]", excelConnection);
        excelConnection.Open();
        OleDbDataReader odr = ocmd.ExecuteReader();
        string vcode = "";
        string pswd = "";
        string vname = "";

        while (odr.Read())
        {
            vcode = valid(odr, 0);
            pswd = valid(odr, 1);
            vname = valid(odr, 2);

            insertdataintosql(vcode,pswd,vname);
        }
        excelConnection.Close();
        return true;
    }
    catch (DataException)
    {
        return false;
    }
    finally
    {
        lblmsg4.Text = "Data Inserted Sucessfully";
    }
} 
```

我的连接字符串是这样的：

```
excelConnectionString = "provider=Microsoft.jet.oledb.4.0;data source=" + 
                        filepath1 + 
                        ";extended properties='Excel 8.0;HDR=YES;'"; 
```

但我收到一个错误

> *Microsoft Jet 数据库引擎无法打开文件 ''。它已被其他用户独占打开，或者您需要权限才能查看其数据。*
> 
> *第 1574 行：OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);
> 第 1575 行：
> 第 1576 行：excelConnection.Open();
> 第 1577 行：
> 第 1578 行：*

文件似乎仍然打开但它没有，我检查了正在运行的进程并且它不存在

现在我该怎么办？...我的 Excel 工作表已关闭，但出现此错误

我在我的 com 上没有 Microsoft 访问权限，这可能是个问题

这个问题与我正在使用的文件上传控件有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T10:42:22.153

好吧，错误说：

> *无法打开文件''。*

所以看起来好像您的 Excel 连接字符串无效 - 它没有有效的 Excel 文件名！

您何时何地**设置**Excel 连接字符串？

`filepath1`您在那一刻使用的有效吗？

它是否包含有效的 Excel 文件名？

**更新：**为什么我不明白的是：您将`xlspath`作为参数传递给您的方法 - 但是，您似乎没有在任何地方使用该 xlspath - 肯定不会将您的`excelConnectionString`...连接在一起。

```
private bool writetoven(string xlspath)
{
    OleDbConnection excelConnection = new OleDbConnection(excelConnectionString) 
```

`excelConnectionString`您可以在创建连接之前在此行上设置断点吗？您的外观是什么样的？可能是`xlspath`包含`vendor.xls`- 但您的 Excel 连接字符串甚至从未设置为该值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:04:48.750

您的 Excel 文件已在 Microsoft Excel 中打开。关闭 Excel 窗口，一切都会好起来的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:35:37.833

确保运行您的 Web 应用程序的帐户对该文件具有权限。

此外，由于您没有使用路径，而只是使用文件名，因此它可能无法找到它所在的文件。该文件相对于您的 Web 应用程序位于何处？

System.IO.File.ReadAllBytes(filepath1) 是成功还是失败？

由于您正在处理文件上传：

用户正在通过浏览器从他们的计算机上传，并且文件在发布响应中传输到您的服务器。请参阅：[http ://blog.divergencehosting.com/2009/03/12/upload-read-parse-file-aspnet/](http://blog.divergencehosting.com/2009/03/12/upload-read-parse-file-aspnet/)

即使您拥有完整路径，您也无法从您的服务器访问用户计算机上的文件。浏览器会向您发送文件的副本，`uploadControl.PostedFile.InputStream;`其中up​​loadControl 是您的asp:FileUpload 控件的名称。

然后，您需要将此流保存到服务器上的文件位置，并提供此连接字符串的完整路径。

如果您使用 EPPlus 之类的东西而不是 OleDbConnection 来读取文件，则可以使用内存中的流而不是先保存文件。

# python - pythonfoursquare - SSL3证书验证失败

> ID：13321302
> 
> 赞同：9
> 
> 时间：2012-11-10T10:39:21.850
> 
> 标签：python, ssl, ssl-certificate, foursquare

我正在尝试使用 Mike Lewis 的 Python 包装器向 Foursquare API 发出无用户请求 - [https://github.com/mLewisLogic/foursquare](https://github.com/mLewisLogic/foursquare)：

```
client = foursquare.Foursquare(client_id=Client_ID, client_secret=Client_Secret)
categs = client.venues.categories() 
```

**间歇性**地，我收到“连接到 Foursquare API 时出错”的消息。运行记录器以捕获更详细的消息会产生：

“SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败”

这在我的本地 Windows 开发机器和运行 ubuntu 的服务器上都没有发生过。我在这里遗漏了一些关于安全证书的基本知识吗？问题是间歇性的，有时只需稍等片刻，然后重试即可暂时解决问题。

我已经下载了最新的 20120716 版本的包装器，尽管在 init.py 的代码中它仍然显示 API_VERSION = '20120608'。我正在使用 Python 2.73，并且还使用上述代码中的 id 和 secret 注册了 Foursquare API 密钥。我列出了网址，使用我的本地 IP:8000 并尝试为本地和开发机器使用单独的密钥，但这似乎没有什么区别。

非常感谢帮助。谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-11T15:48:35.517

我昨天遇到了完全相同的问题。我进行了很多搜索并尝试了很多，并且似乎以下策略适用于我的情况（我不是 100% 确定，但它不再报告错误）。

1）下载[http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)

```
wget http://curl.haxx.se/ca/cacert.pem 
```

2) 转到您的 Python httplib2 目录。我的在 `/usr/local/lib/python2.7/dist-packages/httplib2`

```
cd /usr/local/lib/python2.7/dist-packages/httplib2 
```

3）备份当前证书

```
cp cacerts.txt backup_cacerts.txt 
```

4）然后将下载的文件复制到那里并将其重命名为`cacerts.txt`

```
mv cacert.pem cacerts.txt 
```

就是这样。

希望能帮助到你。如果不能从备份文件中恢复并尝试其他方法。

更改后，我的foursquare脚本可以正常工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T11:53:43.813

安装或升级`certifi`包：

```
pip install --upgrade certifi 
```

这是推荐的解决方案`urllib3`（许多项目都使用`requests`它，包括 ，上面链接的foursquare库和许多其他库又使用它）：[http://urllib3.readthedocs.io/en/latest/user-guide。 html#证书验证](http://urllib3.readthedocs.io/en/latest/user-guide.html#certificate-verification)

如果您需要将它用于不使用 urllib3 而是 httplib2 的包，例如，您将`certifi/cacerts.pem`文件复制到`httplib2/cacerts.txt`. 要从/复制到的目录可以通过执行以下操作找到：

```
python -c 'import httplib2; import os.path; print(os.path.dirname(httplib2.__file__))'

python -c 'import certifi; import os.path; print(os.path.dirname(certifi.__file__))' 
```

如果您只是使用`urllib2`，`httplib2/`则不使用目录，而是使用系统位置。您可以使用以下内容检查正在查看的文件：

```
strace python -c "import urllib2; urllib2.urlopen(urllib2.Request('https://google.com/'))" 2>&1 | grep 'open' | grep 'cert' 
```

# sql-server-2008 - 计算 SQL Server 中的行数

> ID：13321304
> 
> 赞同：-5
> 
> 时间：2012-11-10T10:39:56.263
> 
> 标签：sql-server-2008

我需要查询我的 SQL Server 表中的列数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T10:43:54.407

```
select count(*) from your_table 
```

计算**所有**行，即使某些记录包含`NULL`条目。

```
select count(some_column) from your_table 
```

计算记录在哪里`some_column` `IS NOT NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:41:48.443

这个

```
select count(*) from table 
```

`*`表示所有列

# php - php中的跨服务器访问

> ID：13321306
> 
> 赞同：1
> 
> 时间：2012-11-10T10:40:31.467
> 
> 标签：php, mysql

我可以从我的 php 应用程序上的三个不同服务器获取数据吗？实际上，我在三台不同的服务器上有我的数据，我想生成一份报告，其中包含来自所有三台服务器的数据。你能给我推荐一个代码吗？

```

函数 dbcon（IP 地址、服务器名称、服务器密码、数据库名称）
{
    $con = mysql_connect(ipaddress,servername,serverpassword);
    如果 (!$con)
    {
        die('无法连接：' . mysql_error());
    }

    mysql_select_db(databasename) or die ("Cant find DB");

}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:45:31.073

当然这是可能的。我假设（尽管您对此不是很清楚）您正在谈论三个数据库服务器？那么你所要做的就是：

*   确保可以通过网络 (tcp) 访问数据库服务器
*   创建三个数据库连接，而不是只创建一个

由于打开与数据库服务器的连接会返回一个句柄，因此您可以使用某些东西来处理特定连接。手册页中清楚地解释了打开连接所需的语法。我建议您阅读它们并查看提供的示例...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:54:35.600

第一的：

> 欢迎来到堆栈溢出！[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

In order to connect to three different databases, you'll need 3 connection objects, and query each separately. Make sure you have configured the receiving ends to correctly accept connections.

# javascript - $(#form).submit() 在 Chrome 浏览器中不起作用

> ID：13321312
> 
> 赞同：1
> 
> 时间：2012-11-10T10:40:53.900
> 
> 标签：javascript, jquery

我已经使用 jquery 在页面中插入了一个隐藏表单，并且我在按钮单击事件上使用 jquery 提交表单。隐藏表单在 Firefox 中提交，但它没有在 chrome 中提交。

以下是我在 document.ready 函数上使用 jquery 插入的表单。

```
$('#leftnav').after(
       "<tr><td><form name='login1'" +        
                "action='https://abc.com/FormPost/Submit' method='post'" + 
                "id='login' >" + 
                "<input type='hidden' name='MerchantIdentifier' value='abc' />" + 
                "<input type='hidden' name='Url'" + 
                  "value='http://chcnq.chxcg.servertrust.com/one-page-checkout.asp'/>"+
                "<input type='hidden' name='Description'" +
                  "value='Volusion Order' />"+
                "<input type='hidden' name='Data' value='' />"+
                "<input type='hidden' name='TransactionIdentifier'"+ 
                  "value='12' />" + 
                "<input type='hidden' name='Amount' value='' />"+
                "<input name='Token' type='hidden' value='" + token + "' />"+
                "<input type='hidden' name='ErrorUrl' />" +
        "</form></td></tr>"); 
```

在按钮单击时，我编写了以下代码：

```
$("#btnSubmitOrder").click(function() {
$("#login").submit();
}); 
```

请您告知为什么它无法在 chrome 浏览器中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:03:01.257

根据我的评论：

在一个操作上提交两个表单通常是一种不好的做法，但是：

1）您可以将目标 iframe 添加到您的两个表单中。这样浏览器就不会被它们中的任何一个提交重定向。

或者

2）您可以防止默认行为并使用 $.ajax 将数据发送到 #login 表单 url，然后（在回调中）在第一个表单上调用 submit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T11:13:20.000

使用这个 javascript 代码。

```
$("#btnSubmitOrder").click(function() {

 document.forms['login1'].submit();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T10:42:38.193

尝试这个：

```
$("#btnSubmitOrder").click(function() {
  $("form[name=login1]").submit();
}); 
```

# wpf - 如何在 Iron Python 中从 xaml 访问嵌入的字体

> ID：13321314
> 
> 赞同：3
> 
> 时间：2012-11-10T10:41:06.123
> 
> 标签：wpf, ironpython, truetype, sharpdevelop

我想将字体作为资源添加到 WPF Iron Python 应用程序。在 xaml 文件中，我想在 xml Fontfamily 属性中使用此字体。

```
MainWindow.xaml:
...
<Grid>
  <TextBox Text="ABC" FontFamily="./Fonts/#Foo"/>
</Grid> 
```

在 python 代码中，窗口被加载到 MainWindow c'tor 中：

```
MainWindow.py:

class MainWindow (Window):
   def __init__(self):
      wpf.LoadComponent(self, 'MainWindow.xaml') 
```

在项目中，我将字体添加到文件夹“Fonts”并使用构建操作资源。但是这种方法行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:15:03.607

您需要使用代码将字体添加到文本框中。wpf.LoadComponent() 方法从磁盘加载 .xaml 文件并创建 WPF 窗口，但不会在任何嵌入式资源中查找包括字体在内的任何内容。据我所知，最简单的方法是从磁盘加载字体。

首先更改字体的构建操作，使**Copy to output 目录**为**Always**。在您的示例中，字体将被复制到 bin\Debug\Fonts\ 文件夹。

现在您需要为您的文本框命名，以便您可以通过代码访问它。在您的 MainWindow.xaml 中，将**x:Name**属性添加到您的 TextBox。在这里，我将其命名为**textbox**。

```
<Grid>
    <TextBox x:Name="textbox" Text="ABC"/>
</Grid> 
```

现在在您的**MainWindow**类中，您可以为您的文本框添加一个属性，并在构造函数中编写一些代码以从磁盘加载字体并将其应用于您的文本框。完整代码如下所示。

```
import wpf

from System import Uri
from System.IO import Path
from System.Windows import Window
from System.Windows.Media import FontFamily

class MainWindow(Window):
    def __init__(self):
        wpf.LoadComponent(self, 'MainWindow.xaml')
        self.addFont()

    def addFont(self):
        fontDirectory = Path.GetFullPath(".\\Fonts\\")
        uri = Uri(fontDirectory)

        fontFamily = FontFamily(uri, "./#Foo")
        self.textbox.FontFamily = fontFamily

    def get_textbox(self):
        return self._textbox

    def set_textbox(self, value):
        self._textbox = value

    textbox = property(get_textbox, set_textbox) 
```

addFont () 方法简单地创建一个指向您的字体所在目录的 Uri，然后使用您的字体系列名称创建一个新的 FontFamily，最后更新 TextBox FontFamily 属性**。**

# javascript - 图像幻灯片动画不动画

> ID：13321318
> 
> 赞同：0
> 
> 时间：2012-11-10T10:41:30.130
> 
> 标签：javascript

我正在尝试制作动画幻灯片。这段代码有效，但没有动画，所以我看到函数结束时位置的变化，假设动画需要时间

```
function slide()
{
for (var i=0;i<100;i++)
{
setTimeout("realslide(i);",100);
}

};

function realslide(ii){
var I=ii;
var s_e=document.getElementById("slide_element");
var po="-"+i+"px";
se.style.left=po;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:46:33.690

您观察动画行为的时间太少了。将时间戳更改为 3 秒，3000 而不是 1 毫秒 100

看我的评论

# compact-framework - 在 ZPL 中模拟打印

> ID：13321319
> 
> 赞同：0
> 
> 时间：2012-11-10T10:41:47.460
> 
> 标签：compact-framework, zebra-printers, zpl, zpl-ii

是否可以在没有实际打印机的情况下尝试使用 ZPL 制作的 Windows Mobile 应用程序？喜欢模拟打印？

此外，是否有任何针对初学者的 Zebra 编程语言的网站/视频/书籍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-22T10:36:45.460

我正在从[这里](https://www.zebra.com/content/dam/zebra/manuals/printers/common/programming/zpl-zbi2-pm-en.pdf)学习 ZPL ：它由 Zebra 网站提供。我认为这很有帮助。

如果要模拟打印，可以使用[labelary](http://labelary.com/viewer.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:36:07.547

看看我在[PrintPage PrintPageEventHandler Is Printing Too Many Copies](https://stackoverflow.com/q/10287558/153923)上的问答。

我的问题是从 Windows 窗体打印，但你可以用 Windows Mobile 做同样的事情。

您所做的是创建一个与您要打印的文档具有相同比例的虚拟表单。用你想让他们说的话来设置标签。某些字段需要是 INPUT 字段，以便您的 Windows Mobile 应用程序可以调用它们并填写这些值。

例如，如果您需要设置客户地址，则虚拟表单上的标签将为`lblCustomerStreet`, `lblCustomerCity`, `lblCustomerState`, 并`lblCustomerZip`具有**公共**属性：

```
public string CustomerStreet {
  get { return lblCustomerStreet.Text; }
  set { lblCustomerStreet.Text = value; }
} 
```

当您需要打印时，您可以将表单的大小与 PrintDocument 的页面大小进行比较。您可以使用该比率来增加或减小标签的大小，以使文本适合页面。

这确实需要一些时间，并且涉及很多试验和错误。

但是，我在顶部发布的问题和答案将为您提供大约 80% 的帮助。您只会对我的代码的**Document_Printed**部分感兴趣。

我的示例代码包括面板控件、标签控件、一个图像控件（公司徽标）以及可以删除的自定义条码控件的大小调整。首先打印图像，然后是面板，然后是标签，最后是条形码 - 因为在我的打印输出中，条形码是最重要的，标签上的文本比面板制作的框线更重要。面板只是让您的打印输出看起来很漂亮。

# php - 我应该如何构建我的应用程序？

> ID：13321321
> 
> 赞同：1
> 
> 时间：2012-11-10T10:41:48.267
> 
> 标签：php, symfony, frameworks

我知道这个问题可能很模糊，我会尽力解释我的问题，希望能从有经验的人那里得到很多见解，希望这不会被关闭。

我正在编写一个基于 Symfony 2 的组件和捆绑包的 PHP Web 应用程序框架，但是我的问题可能与此无关。该框架旨在对**3rd 方插件开放**，这些插件将有自己的配置文件 (yaml)，安装这些插件的人应该能够在**本地覆盖这些设置**。

我还必须确保每次执行插件升级操作时，应该很容易循环“升级补丁”列表以升级插件的设置，同时仍然**保留本地设置**。

我想我可以有一个本地的、应用程序的特定 plugins.yml 文件，它存储如下内容：

```
pluginA:
  somesettings: value
  somesettings2: value2 
```

此应用程序的特定设置文件将允许用户覆盖任何默认设置。然后每个插件可以包含一个“升级”类，该类将包含每个版本的所有补丁，框架将识别当前安装的路径，并循环遍历每个“升级补丁”并执行操作，直到它达到最新版本。

这听起来像是一个不错的选择，还是我应该考虑其他一些事情？如何轻松升级可以覆盖的配置设置？如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:54:09.680

在我看来，您正在寻求实现一些 Symfony 核心允许做的事情——即让其他用户覆盖/实现已经存在的包的自定义部分。如果是这样，也许这个答案可以很好地说明如何使用 ClassLoader Component (Symfony 2.0) 或 Composer (Symfony 2.1) 来实现它：

[如何覆盖 Core Symfony2 类？](https://stackoverflow.com/questions/11464119/how-can-i-override-core-symfony2-classes "如何覆盖 Core Symfony2 类？")

# plot - Gnuplot 的轴和标题

> ID：13321322
> 
> 赞同：0
> 
> 时间：2012-11-10T10:41:53.873
> 
> 标签：plot, gnuplot

请问如何使用 1:2 和另一个标签修改 tamisage.data ， ![在此处输入图像描述](../Images/54eb57b4fb98db54019bb3d565925454.png)

我怎样才能用 échantillon 改变 echantillon ？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:19:56.087

要更改标签，您需要使用：

```
plot ... title "New title" ... 
```

要添加重音，您可以使用特殊编码：

```
set term ... enhanced  #need to use a terminal which supports enhanced text
set encoding iso_8859_1
plot sin(x) w lines title '{\351}foo'  #{\351} is 'e' with an accent. 
```

# html - 应用程序缓存在 Tomcat 6.0 中有效，但在 weblogic 10.3 中无效

> ID：13321323
> 
> 赞同：1
> 
> 时间：2012-11-10T10:41:57.790
> 
> 标签：html, weblogic-10.x, application-cache

我正在使用应用程序缓存，我面临以下问题：

在 Tomcat 服务器中：

当服务器在线并且第一次访问该页面时，清单文件中指定的文件被成功捕获到应用程序缓存中。

当服务器离线时，当我们尝试访问缓存页面时，浏览器控制台出现错误（`Application Cache Error event: Manifest fetch failed (-1)`根据我在互联网上的发现，这很正常），但应用程序缓存工作正常。

在 Weblogic 服务器中：

我尝试在 Weblogic 服务器中运行相同的代码，在在线模式下，文件按预期缓存。但是在离线模式下，第一次加载页面时，它工作正常，但是当我看到控制台时，应用程序缓存的状态变为 OBSOLETE 模式，所以如果我再次刷新页面，它会抛出我404 错误。另外，`"Application Cache Error event: Manifest fetch failed (-1)"`当我尝试在 tomcat 服务器中运行代码时，我没有得到我得到的结果。请让我知道我做错了什么。以下是文件：

索引.html

```
<html manifest="demo.appcache"> 
<head> 

<link rel="stylesheet" href="style.css" type="text/css" /> 

<script type="text/javascript" src="script.js" ></script>

</head> 
<body> 
<h1>Basic example of page using Application Cache</h1> 
<p>Disconnect from the internet and try to reload this page. It should load without requiring you to connect to the internet.</p> 
</body> 
</html> 
```

清单文件（demo.appcache）

```
CACHE MANIFEST

CACHE:
style.css
script.js
index.html
demo.appcache

NETWORK:
* 
```

样式.css

```
body{
    background-color: #333;
}
h1{
    color: #c94054;
}
p{
    color: #fff;
} 
```

脚本.js

```
if (!window.applicationCache){
    alert('It seems that Application Cache is not supported in this browser. Please use a browser which supports it.');
} 
```

web.xml

```
<mime-mapping>
     <extension>appcache</extension>
     <mime-type>text/cache-manifest</mime-type>
     </mime-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:10:50.013

当浏览器遇到 html 标签中的 manifest 行时，就会出现这个问题，它会尝试从服务器下载 appcache 文件。但是当服务器没有这个文件时它返回 404 错误，所以应用程序缓存转到 OBSOLETE 事件。

所以在这种情况下，可能的原因是 1 - 您的服务器不包含此文件 2 - 如果您的服务器有此文件但没有返回到浏览器，这发生在服务器正在运行但您的应用程序实际上未部署时。

因此，请尝试停止您的服务器，而不仅仅是从服务器实例中取消部署您的应用程序。希望它有效。

# php - PHP Post ，每个将数据发布到我的服务器的函数的一个 php 文件

> ID：13321330
> 
> 赞同：1
> 
> 时间：2012-11-10T10:43:39.423
> 
> 标签：php, web-applications, post

每次我将一些信息从我的网络应用程序发布到服务器时，我都会将其发送到 PHP 文件。这个 php 文件然后调用将信息放入数据库的函数。这是大意吧？:)

唯一的问题是我发现自己为每个函数调用创建了一个 php 文件！我有一个用于创建“任务”，一个用于创建“用户”，一个用于切换变量，一个用于设置变量......等等。

我不知道还能怎么做。尽管我将所有 PHP 数据库函数保存在一个文件中，但我发现我必须为每次发布调用创建一个新文件。

**示例 1**：

```
<?php
include 'databasefunctions.php';
inserttaskDB();
?>- 
```

**示例 2**：

```
<?php
include 'databasefunctions.php';
inserthelpoffers($_POST[task_id],$_SESSION[id],$_POST[help_offer]);
?> 
```

* * *

我发现我的代码组织得很糟糕。如何更好地组织我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:34:55.830

我想我知道你在做什么。当您通过应用程序向 php 页面发送发布请求时，ypu 调用该文件中的函数将数据存储到数据库中。问题似乎是您将此发布请求发送到多个 PHP 文件而不是一个。因此，这是一个快速解决方案。

```
//I believe your databasefunctions.php has all the functions like
function inserttaskDB($task){
   //SQL query to insert
}

function inserthelpoffers($taskId,$id,$helper){
   // SQL query to insert helper offer
} 
```

现在你可以做的是只有一个像 getDataFromMobile.php 这样的文件，所以当你向 getDataFromMobile 发送数据时，再发送一个名为 func(for function) 的变量

```
//Now in your getDataFromMobile you can use a switch statement

$functionName = $_POST["func"];

switch($functionName){
    case "inserttaskDB":
        //Gets all your post iformation here and call the respective function
    break;
    case "inserthelpoffers":
      inserthelpoffers($_POST[task_id],$_SESSION[id],$_POST[help_offer]);
    break;
} 
```

这是一个非常快速的解决方法。在这种情况下，我个人会倾向于 OOP。

希望这会有所帮助，丁斯

# mysql - mysql 和多于一列的索引

> ID：13321332
> 
> 赞同：2
> 
> 时间：2012-11-10T10:43:48.097
> 
> 标签：mysql, database-indexes

如何使用多于一列的索引

原始索引有一个索引 on `block_id`，但是当它已经在具有两列的唯一索引中时是否需要？

**具有多于一列的索引**

(a,b,c)

*   您可以搜索 a、b 和 c
*   你可以搜索 a 和 b
*   你可以搜索一个
*   你**不能**搜索 a 和 c

这也适用于唯一索引吗？

# 桌子

```
id
block_id
account_id
name 
```

# 索引来源

```
PRIMARY KEY (`id`)
UNIQUE KEY `block_id` (`block_id`,`account_id`)
KEY `block_id` (`block_id`),
KEY `account_id` (`account_id`), 
```

# 索引替代

```
PRIMARY KEY (`id`)
UNIQUE KEY `block_id` (`block_id`,`account_id`)
KEY `account_id` (`account_id`), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:59:00.180

据我所知，您上面描述的规则始终适用于索引是否唯一。您可能会对您想到的查询运行解释，并观察在各种情况下何时使用索引以及何时不使用索引。

# html - 每次从服务器加载 index.html，而不是从缓存中加载

> ID：13321335
> 
> 赞同：58
> 
> 时间：2012-11-10T10:45:05.253
> 
> 标签：html, caching, webserver

我有一个网页**index.html**托管在特定服务器上。我已经指出`example.com`。`example.com/index.html`因此，当我在 index.html 中进行更改并保存它，然后尝试打开 example.com 时，更改不会反映。网页被缓存的原因。

然后我手动刷新页面，因为它加载了新副本而不是从缓存中，所以它工作正常。但我不能要求我的客户这样做，他们希望一切都是完美的。所以我的问题是，关于如何让文件每次都从服务器而不是从缓存中加载，是否有技巧或技术？

PS：我知道 CSS、JS 和图像文件的技巧，即附加`?v=1`但不知道如何为 index.html 执行此操作。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-10T10:49:06.183

这样：

```
<meta http-equiv="expires" content="0"> 
```

将内容设置为“0”会告诉浏览器始终从 Web 服务器加载页面。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-26T15:31:45.597

元标签对我不起作用。我从实现过滤器或控制器的 java 类中设置标题。它奏效了。这是代码

```
HttpServletResponse httpResponse = (HttpServletResponse) response;
httpResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1
httpResponse.setHeader("Pragma", "no-cache"); // HTTP 1.0
httpResponse.setDateHeader("Expires", 0); // Proxies. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-20T12:01:21.087

截至 2018 年，只有两种最可靠的方式可用

1）`**<meta http-equiv="expires" content="0">**`使用此元标记但要小心，因为此标记会在浏览器处理网页后立即破坏页面的所有缓存。

2) 在服务器上为每个页面请求生成一个唯一 ID，并将此 ID 附加到 HTML 文档内所有文件名的末尾，并带有？在每次需要从服务器加载的图像、文档、css/js 文件、视频等上附加唯一 ID 之前。例如，如果您`<img src="images/profile223.jpg" alt="profile picture">`在服务器端有 HTML 标签，则在文件名末尾附加唯一 ID，如下所示`echo '<img src="images/profile223.jpg?'.$uniqueid.'"" alt="profile picture">';`。在此示例中，我使用 php，但您可以生成任何语言的唯一 ID。**Google、Facebook、Microsoft、Twitter 等所有大公司都使用这种技术，因为它是最有效的方法，并且不会影响您想要存储在用户浏览器上的缓存数据，例如登录会话 ID。这种技术是跨浏览器兼容的，并支持旧版本的 IE、Firefox、Chrome、Safari 和 Opera。**您可以使用相同的技术在 url 末尾附加唯一 id

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-26T11:50:41.220

**您可以尝试以下方法。它对我有用。**

请在您的 .htaccess 文件中添加以下代码行。

```
<IfModule mod_headers.c>

    <FilesMatch "\.(html|php)$">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires 0
    </FilesMatch>

    <FilesMatch "\.(ico|pdf|jpg|png|gif|js|css)$">
        Header set Cache-Control "max-age=172800, public, must-revalidate"
    </FilesMatch>

</IfModule> 
```

如果您使用上述代码，浏览器将不会缓存 .html 文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-09T08:33:45.207

将这个元标记添加到标题中适用于大多数浏览器（在这种情况下 index.html 不会被缓存）：

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

有点晚，但它可能会帮助别人！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-10T10:52:42.783

您可以随文件发送额外的标头以告诉客户端（即浏览器）该文件不能被缓存。如果您有 Apache，请查看[mod_expires](http://httpd.apache.org/docs/2.2/mod/mod_expires.html)。如果您使用服务器端脚本语言，例如 PHP，您也可以使用它来解决它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-06T07:32:22.903

我曾经在我的网站上遇到过这个问题。在您的网址中添加 q=''

```
http://yoururl.com/somelinks?q=fill_with_random_number 
```

对我来说，它有效

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-17T17:21:32.903

我强烈建议不要使用元标记，而是使用 Murali Krishna Bellamkonda 发布的 htaccess。这将永远是最好和最安全可靠的方式。您可以微调您的整个系统以长时间保持缓存，在特定时间刷新文件等......继续尝试所有这些元标记，看看会发生什么！（不，我不会）查看带有 ExpiresDefault A5 的 Header set Cache-Control "max-age=5, immutable" 以获得无缓存选项。

# r - 如何在 R 中创建一个允许类向量索引的 S4 类？

> ID：13321339
> 
> 赞同：2
> 
> 时间：2012-11-10T10:45:46.900
> 
> 标签：r, oop, s4

我想在 R 中创建一个新类，它基本上应该类似于向量类，只是向量中的每个元素都有两个附加属性，分别是“开始时间”和“结束时间”。部分功能应该是各种常规索引。

我尝试过在这里至少提供一些代码：

```
 setClass(
      Class = "Intervals",
      representation = representation(
        start.time = "POSIXct",
        end-time = "POSIXct",
        numbers = "numeric"),
      contains = "vector"
    ) 
```

这显然不起作用，因为之后

```
iv <- function(start.time, end.time, numbers) {
  new(Class="Intervals", start.time = start.time, 
      end.time = end.time, numbers = numbers)
} 
```

和

```
st <- seq(1,5)*3600+as.POSIXct("1970-01-01 01:00")
et <- seq(2,6)*3600+as.POSIXct("1970-01-01 01:00")
numbers <- c(1,2,3,4,5)
example <- iv(st,et,numbers) 
```

示例 [1:3] 例如给我 NA NA NA。

还是让我自己写getter，从类似的东西开始

```
setMethod(
  f = "[",
  signature="Intervals",
  definition=function(x,i,j,drop){
... 
```

? 当然我想避免这种情况，因为我不知道如何正确处理参数 x,i,j,drop。

我需要插槽“数字”吗？有没有一种从虚拟类向量继承的方法允许我省略它？此外，我不想将结构限制在包含数值的向量上。

我希望这个问题不是太微不足道，但是我阅读了书籍和 pdf 中的不同章节，却没有自己找到解决方案。

提前非常感谢。

米卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:56:35.097

行。同时，我设法（在[如何为 S4 类定义子集运算符的帮助下？](https://stackoverflow.com/questions/10961842/how-to-define-the-subset-operators-for-a-s4-class)）提出（经过一些重命名）：

```
setMethod(
  f = "[",
  signature="Intervals",
  definition=function(x,i,j,...,drop=TRUE){ 
    initialize(x, from=x@from[i], to=x@to[i], values = x@values[i])
  }
) 
```

只是如果有人感兴趣.. show 方法看起来像这样。

```
setMethod(
  f = "show",
  signature="Intervals",
  definition=function(object){
    rownames <- sapply(seq_along(object@to), 
                       function (i) paste(object@from[i], "--", object@to[i]))
    df.show <- data.frame(object@values, row.names = rownames)
    names(df.show) <- ifelse(length(names(object@values)) == 0,
                             "Values", names(object@values))
    print (df.show)
  }
) 
```

# php - TinyBox 如何从父页面获取传递值

> ID：13321345
> 
> 赞同：1
> 
> 时间：2012-11-10T10:46:52.193
> 
> 标签：php, javascript, jquery, javascript-events

大家好最近我遇到了一个不知道如何将值从父页面传递到小盒子的问题......以下是我的源代码有什么想法可以帮助我存档。一个 edit.php 包裹在一个小盒子里，所以当我点击一个特定的列时，假设该值应该传递给 edit.php(tinybox) 并且该值将显示在文本字段中......但它只是简单地工作...... ..我是 php 新手，希望有人指出我的好:)

父页面.php

```
display_cell6.appendChild(edit).innerHTML='<img id="edit" alt="Edit" class="'+obj[idx].id+'" onclick="TINY.box.show({iframe:\'ajaxEditUserDetail.php\',boxid:\'frameless\',width:400,height:280,openjs:function(){openJS(this.id)}}); title="Edit" src="images/edit.png"></img>';

   function openJS(id){
        var id=parent.document.getElementById(id);
        alert(id);

    } 
```

编辑.php

```
 <div id="banner">
<span>Edit Customer Information</span>
</div>
<div id="form_container">

<fieldset>
<div class="box-form">
    <form action="send.php" method="POST" id="userDetail" >
        <fieldset>
            <div>
                <label for="name_Req">Name <strong>*</strong></label>
                <input type="text" id="name_Req" name="name" value="test"       
title="Required! Please enter your name" />
            </div>
            <div>
                <label for="contact_Req_Email">E-mail <strong>*</strong></label>
                <input type="text" id="contact_Req_Email" name="email"    
title="Required! Please enter a valid email address" />
            </div>
            <div>
                <label for="telephone_Tel">Telephone</label>
                <input type="text" id="telephone_Tel" name="telephone" 
title="Please     enter a valid telephone number" />
            </div>              
            <div>
                <label for="address">Address</label>
                <input type="text" id="address" name="address" title="Please enter a 
valid address" />
            </div>                              
            <div>

                <input type="submit" value="Save" id="sub" class="button"  />
            </div>
        </fieldset>
    </form>

</div>

 </fieldset>
</div> 
```

# c# - 下拉列表数据未插入到 asp.net 页面的查询中

> ID：13321346
> 
> 赞同：0
> 
> 时间：2012-11-10T10:46:53.107
> 
> 标签：c#, asp.net

我在 asp.net 网页中放置了五个下拉列表和三个文本框。在下拉列表中选择和在文本框中插入的值是要在查询条件中插入的值。现在的问题是，当我按下搜索按钮执行时，文本框中的值被插入到查询中，但下拉列表值保持为空，结果未显示。我检查下拉列表的代码，例如：

```
 ddlChannel.SelectedValue;
    ddlChannel.Text;
    ddlChannel.SelectedItem; 
```

但没有从查询中插入任何选定的值。pageLoad 中的任何一个问题。我使用`Page_Prerender`方法通过查询执行从数据库加载下拉列表。知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:34:36.830

您必须在页面 pl 上设置控件 autopostback 属性 true，eventvalidation 设置 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:59:39.127

从您的下拉列表中选择的值很可能在回发时重置（当您单击搜索按钮时）

您可以使用以下代码来避免重置您的下拉列表

```
if(!Page.IsPostBack)
{
    //Bind dropdown lists logic
} 
```

# visual-c++ - Visual C++中的3D三次样条插值

> ID：13321348
> 
> 赞同：-1
> 
> 时间：2012-11-10T10:46:57.870
> 
> 标签：visual-c++, opengl

我正在寻找代码和示例，以便在视觉 c++ 中轻松理解三次样条插值，以便在 openGL 上使用它。我找到了一些，但它们都是 2D 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:21:05.447

3D 中的三次样条插值与 2D 中的插值没有太大区别。唯一不同的是，向量有一个额外的元素。

您能否发布到目前为止您尝试过的内容或您所指的 2D 示例之一，以便我们向您展示如何逐步将其扩展为 3D。

# flash - haxe/nme/flash 异常通知

> ID：13321349
> 
> 赞同：1
> 
> 时间：2012-11-10T10:47:04.610
> 
> 标签：flash, haxe, nme

我正在使用 Haxe 和 NME 以及 flash 目标来创建一个 .swf。如何确保显示未捕获的异常？目前看来他们只是默默地吃掉了。我正在编译：

```
haxelib run nme build path/to/MyNmmlFile.nmml flash 
```

我相信这是我需要通过那里的一些标志，或者我需要在 nmml 文件中设置的东西，但不知道是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:21:53.207

尝试将 <haxeflag name="-debug" /> 添加到您的 nmml。并使用flashplayerdebug。

# c# - dbcontext 和 POCO 模板有什么区别？

> ID：13321354
> 
> 赞同：-2
> 
> 时间：2012-11-10T10:47:25.483
> 
> 标签：c#, entity-framework, poco, dbcontext

我可以在管理器扩展中看到存在 EF 4.x dbcontext 和 EF 4.x POCO。它们都为持久性无知生成实体。

它们之间有什么区别？

4.x 和 5.x 有什么区别？5.x版本有哪些新功能？

是否可以只使用一个交换实体来访问数据库的所有方式？我想使用一个接口来使用不同的方式来访问数据库。EF 4、EF 5 和其他非必要的将是 EF。我想编程一次并在许多场景中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:41:18.720

DbContext 是您通往模型中所有实体的门户。例如，如果您的上下文被称为 con，您可能会调用 con.Orders() 来获取您的 Order 对象。使用 Entity Framework 生成的 POCO（普通的旧 CLR 对象）不会从 Entity Framework 扩展类。带有实体框架的 POCO 更高级，因此我建议您在开始时不要使用它们。EF 5 的新功能之一是用 ObjectContext 替换 DbContext。好的，不是替换，因为您仍然可以使用 DbContext。但是微软希望 ObjectContext 成为访问所有实体而不是 DbContext 的新的更简单的方法。在大多数情况下，ObjectContext 更容易使用。

# ios - Movieplayercontroller 使用带有两个音轨的 m4v

> ID：13321355
> 
> 赞同：1
> 
> 时间：2012-11-10T10:47:59.850
> 
> 标签：ios, mpmovieplayercontroller, m4v

我需要在我的应用程序中使用带有两个音频钉的 m4v 视频。但是当我播放视频时，它同时从两个音轨开始。我需要使用设备的默认语言（默认为英语）加载音轨。

这是我的代码：

> ```
> _moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
> [_moviePlayer shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeLeft];
> _moviePlayer.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
> [self presentMoviePlayerViewControllerAnimated:_moviePlayer]; 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:55:08.280

`MPMoviePlayerController`就像包装`MPMoviePlayerViewController`不支持选择音轨一样。

# vim - 如何在 NERDTree 中进行快速搜索？

> ID：13321356
> 
> 赞同：26
> 
> 时间：2012-11-10T10:48:20.723
> 
> 标签：vim, nerdtree, vim-plugin

是否可以通过文件名和文件内容在 NERDTree 窗口中进行搜索？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-10T11:14:16.247

你可以`/foo`在任何其他普通的 Vim 窗口中做类似的事情，但你仅限于当前显示在 NERDTree 中的文本：你不能搜索未扩展的子目录或未列出的文件。

假设您位于项目的根目录，您可以执行以下操作`foo`在整个项目的 JavaScript 文件中搜索单词：

```
:vim foo **/*.js | copen 
```

如果“工作目录”( `:pwd`) 不是您项目的根目录，则为以下内容：

```
:vim foo /path/to/project/**/* | copen 
```

请注意使搜索递归的`**`( )。`:help starstar`

如果要打开`app/views/foobar.php`进行编辑，可以执行以下操作：

```
:e **/foo<tab> 
```

嗯，有很多方法。

使用本机命令访问文件/缓冲区或跨项目搜索相对简单，但有很多第三方插件可以使其更快、更容易。`Ctrl`+`P`是我最喜欢的文件/缓冲区查找器插件，但在转向插件之前，您应该熟悉基础知识。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-24T15:39:29.190

我最喜欢的 vim 插件之一中的[Command-t ，它是基于 ruby​​ 的插件，上面与](https://github.com/wincent/command-t)[FZF 集成。](https://github.com/junegunn/fzf)

通过使用 Comamnd-T 和 FZF，您可以使用极快的“模糊”机制进行搜索：

*   打开文件和缓冲区
*   跳转到标签和帮助
*   运行命令，或以前的搜索和命​​令
*   用最少的击键次数。

如你看到的

[![在此处输入图像描述](../Images/ec978cfd49aeea5fb555956fc91039ff.png)](https://i.stack.imgur.com/U2IcE.gif)

我总是通过打开一个新终端来搜索命令历史并点击：

```
CTRL+R 
```

除了通过在任何终端选项卡中写入递归搜索所有文件夹：

```
fzf 
```

另外，你可以在里面写`vim`

```
:CommandT 
```

但是，我仍然在寻找一个强大的 vim 插件来搜索文件内容。特别是在大文件夹中。如果我找到一个，我会更新这个答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-08T21:47:11.810

不直接回答问题，而是查看[fzf.vim](https://github.com/junegunn/fzf.vim)。它不仅提供文件搜索功能，而且速度极快。

# c++ - 您可以在 C++ OOP 中“重载演员表”吗？

> ID：13321358
> 
> 赞同：3
> 
> 时间：2012-11-10T10:48:43.687
> 
> 标签：c++, oop, casting, operator-overloading, assignment-operator

好吧，WinAPI 有一个`POINT`结构，但我正在尝试为此创建一个替代类，以便您可以设置构造函数的值`x`和`y`来自构造函数的值。这很难用一句话来解释。

```
/**
 * X-Y coordinates
 */
class Point {
  public:
    int X, Y;

    Point(void)            : X(0),    Y(0)    {}
    Point(int x, int y)    : X(x),    Y(y)    {}
    Point(const POINT& pt) : X(pt.x), Y(pt.y) {}

    Point& operator= (const POINT& other) {
        X = other.x;
        Y = other.y;
    }
};

// I have an assignment operator and copy constructor.
Point myPtA(3,7);
Point myPtB(8,5);

POINT pt;
pt.x = 9;
pt.y = 2;

// I can assign a 'POINT' to a 'Point'
myPtA = pt;

// But I also want to be able to assign a 'Point' to a 'POINT'
pt = myPtB; 
```

是否可以以某种方式重载`operator=`，以便我可以将 a 分配`Point`给 a `POINT`？或者也许是其他一些方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T10:51:56.107

你可以在你的`Point`类中添加一个强制转换运算符：

```
class Point {
  // as before
  ....
  operator POINT () const { 
    // build a POINT from this and return it
    POINT p = {X,Y};
    return p;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T10:53:07.853

这是类型转换运算符的工作：

```
class Point {
  public:
    int X, Y;

    //...

    operator POINT() const {
        POINT pt;
        pt.x = X;
        pt.y = Y;
        return pt;
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T10:54:29.223

使用转换运算符：

```
class Point 
{
public:
   operator POINT()const
   {
       Point p;
       //copy data to p
       return p;
   }
}; 
```

# javascript - 页面加载时，如何将焦点（）聚焦到 javascript 上的另一个窗口？

> ID：13321361
> 
> 赞同：-1
> 
> 时间：2012-11-10T10:48:52.653
> 
> 标签：javascript

# 新问题

在 Google Chrome 上，我只能`focus()`在单击元素时打开窗口。

# 原来的问题

*如何`focus()`使用 javascript 访问一个窗口，其中弹出窗口不是在我用来聚焦网页的同一窗口内创建的*

```
var wnd = window.open("http://bing.co.uk", "stage"); 
```

适用于修改从不同网页打开的弹出窗口。

```
wnd.focus(); 
```

但是，这不起作用，因为当具有 wnd 焦点功能的网页打开时，舞台窗口已经打开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T10:53:45.050

### 回答你原来的问题：

如果您知道具有该名称的窗口存在，您可以从**以后的调用**中获取对它的引用`window.open`（例如，当您想要调用`blur`或时`focus`）：

```
window.open("", "theWindowName").focus(); 
```

但是，当然，如果窗口*不*存在，那将打开一个新窗口。遗憾的是，您无法提前知道（除了在您的应用程序逻辑中）具有该名称的窗口是否已经存在。

一旦你有了 window 对象，你就可以调用`blur`or `focus`。

[实例](http://jsbin.com/igepeh/1)| [来源](http://jsbin.com/igepeh/1/edit)

* * *

### 回答您完全不同的新问题：

> 在 Google Chrome 上，我只能`focus()`在单击元素时打开窗口。

如果您的代码打开了窗口，您应该可以。例如：

HTML：

```
<button id="btnOpen">Open</button>
<button id="btnFocus">Focus</button> 
```

JavaScript：

```
jQuery(function($) {
  $("#btnOpen").click(function() {
    window.open(
      "about:blank",
      "theWindow",
      "width=500,height=500");
  });
  $("#btnFocus").click(function() {
    // Note that this happens a full second later, NOT
    // in direct response to a user event
    setTimeout(function() {
      window.open("", "theWindow").focus();
    }, 1000);
  });
}); 
```

[实例](http://jsbin.com/igepeh/3)| [来源](http://jsbin.com/igepeh/3/edit)

# ubuntu-12.04 - ERROR 1045 (28000): Access Denied for 'root'@'localhost' (使用密码: YES)

> ID：13321367
> 
> 赞同：1
> 
> 时间：2012-11-10T10:49:32.093
> 
> 标签：ubuntu-12.04, mysql-error-1045

我一直遇到root密码问题。

> sudo mysql -u root -p
> 
> 输入密码
> 
> ERROR 1045 (28000): Access Denied for 'root@localhost' (使用密码: YES)

我已经经历了几次，无法弄清楚。我只是在设置 mysql 服务器时设置了 root 密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:04:46.140

mysql 上的 root 密码（可能）与服务器上的 root 密码不同。

如果是新设置，您是否尝试过不使用 -p 以不使用密码登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T16:57:42.727

如果使用 phpMyAdmin，请确保该用户的主机设置为 localhost。

仅通过检查 root 用户帐户，可以看出有多个 root 用户具有不同的主机值。因此，如果您的用户使用 localhost 选项不起作用，请创建另一个具有相同名称的用户并为其指定主机 127.0.0.1 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-05T23:53:44.657

这对我在 Amazon Linux 2 上的 mysql 15.1 上有效：

尝试在同一行输入密码（没有提示）：

$mysql -u root -p<密码>

记住“-p”和“密码”之间的“没有空格”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-10T10:58:34.830

我遇到了同样的问题，请检查配置中的所有 Ini 文件。我不记得是哪一个了。

# python - 如何在本地主机上使用多线程应用程序引擎

> ID：13321368
> 
> 赞同：3
> 
> 时间：2012-11-10T10:49:59.760
> 
> 标签：python, multithreading, google-app-engine

我在本地服务器和 mysql 数据库（appengine rdbms）上使用 python2.7、谷歌应用引擎

我的应用程序运行完美（一个连接），但是当两个或多个连接同时，我得到*1054 套接字错误*，因为 basehttpserver 不支持多线程我可以找到任何方法来解决这种情况

我可以将我的 appengine 应用程序部署到 apache 还是如何在 localhost 上构建多线程

```
 File "C:\Python27\lib\SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "C:\Python27\lib\SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "C:\Python27\lib\SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 2734, in __init__
    BaseHTTPServer.BaseHTTPRequestHandler.__init__(self, *args, **kwargs)
  File "C:\Python27\lib\SocketServer.py", line 639, in __init__
    self.handle()
  File "C:\Python27\lib\BaseHTTPServer.py", line 343, in handle
    self.handle_one_request()
  File "C:\Python27\lib\BaseHTTPServer.py", line 313, in handle_one_request
    self.raw_requestline = self.rfile.readline(65537)
  File "C:\Python27\lib\socket.py", line 476, in readline
    data = self._sock.recv(self._rbufsize)
error: [Errno 10054] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T12:41:05.160

```
from SocketServer import ThreadingMixIn # socketserver in Python 3
class ThreadingHTTPServer(ThreadingMixIn, BaseHTTPServer): pass # see line 628 in SocketServer.py 
```

你想要一个多线程`BaseHTTPServer`。`BaseHTTPServer`继承自`TCPServer`which 是单线程的。`SocketServer`定义`ThreadingTCPServer`使用`ThreadingMixIn`. 该mixin可以混合到上面的`BaseHTTPServer`类似物中。

关于错误的注意事项：错误意味着连接在 http-request 的第一行（GET ...）之前被重置。这对 BaseHTTPServer 来说不是问题。它应该继续运行。

告诉我它是否不能解决问题。

# iphone - 从 CAShapeLayer 获得真正糟糕的性能

> ID：13321369
> 
> 赞同：1
> 
> 时间：2012-11-10T10:50:11.883
> 
> 标签：iphone, ios, performance, cocoa-touch, graphics

我有一个存储在一个大文件中的图形，它被分解成很多`mutablePaths`类似的内容：

```
mutablePath = CGPathCreateMutable();
CGPathMoveToPoint(mutablePath, NULL, 123.70,49.23);
CGPathAddCurveToPoint(mutablePath, NULL, 124.57,54.05,124.06,58.98,123.43,63.80);
CGPathAddCurveToPoint(mutablePath, NULL, 123.09,66.42,122.70,69.03,122.43,71.66);
CGPathAddCurveToPoint(mutablePath, NULL, 121.64,81.02,121.35,83.58,120.92,86.11);
CGPathCloseSubpath(mutablePath);
CGPathAddPath(outlineMutablePath, NULL, mutablePath);
CGPathRelease(mutablePath); 
```

我使用 将所有路径合并为 4-5 个路径`CGPathAddPath`，然后将每个路径添加到`CAShapeLayer`. 我将其附加`CAShapeLayers`到如下视图：

```
for (int i = 0; i < [_graphic.shapeLayers count]; i++)
{
    [self.layer addSublayer:[_graphic.shapeLayers objectAtIndex:i]];
} 
```

图形正在正确绘制，但是，当我在图形所在的同一屏幕上拉出模态视图时，模态视图在出现在屏幕上时会非常糟糕。还注意到绘制形状需要相当长的时间，一般来说，当我试图离开它并转到不同的导航控制器时，它似乎会压低屏幕。在运行时间配置文件时，我注意到大部分时间都花在了`CALayer layoutSublayers`和中`CALayer drawInContext`。

该图形确实有很多路径，但并没有那么复杂，以至于我认为`iOS`绘制它应该有这么多的麻烦。当我在 drawRect 中手动绘制这些路径时，我没有得到这种效果。另外，一位专家告诉我，以这种风格绘制图形会更好地提高性能。这让我相信我在某处做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T19:42:14.293

尝试将`shouldRasterize`属性设置`YES`为 all`CAShapeLayers`或`self.layer`.

# opencl - 错误：“atomic_t”未在此范围内声明，其他声明为其他

> ID：13321373
> 
> 赞同：1
> 
> 时间：2012-11-10T10:51:12.780
> 
> 标签：opencl

请帮助...在 opencl 程序中，我收到这些错误。我没有“oclUtils.h”头文件。S0 我没有将它包含在我的程序中。这就是我遇到这个问题的原因。我也在发送我的内核。如果这是原因，我如何在不使用 oclUtils.h 的情况下使用原子函数？

```
*"__kernel void BLAS_susdot_kernel(__global float *x,__global int *index,__global float        *y,const int n,__global float* dot_p)                    \n" \
"{                                                                                      \n" \
"    int block_x = get_group_id(0);                                                                     \n" \
"    int thread_x = get_local_id(0);                                                                    \n" \
"    int i = get_global_id(0);                                                                          \n" \
"    float dot_value, old = *dot_p;                                                                     \n" \
"    int warp_thread_id = i & (32-1);                                                                   \n" \
"    __local float tmp[512];                                                                                    \n" \
"    __local float share_dot_p;                                                                         \n" \
"    if(thread_x == 0)                          \n" \
"       share_dot_p = 0.0;                              \n" \
"    if (i < n)                                 \n" \
"   {                                        \n" \
"        tmp[i]= x[i]*y[index[i]];           \n" \
"        if(warp_thread_id <16 && (i+16)< n) \n" \
"            tmp[i]+=tmp[i+16];              \n" \
"        if(warp_thread_id <8 && (i+8)< n )  \n" \
"            tmp[i]+=tmp[i+8];               \n" \
"        if(warp_thread_id <4 && (i+4)< n )  \n" \
"            tmp[i]+=tmp[i+4];               \n" \
"        if(warp_thread_id <2 && (i+2)< n)   \n" \
"            tmp[i]+=tmp[i+2];               \n" \
"        if(warp_thread_id==0 && (i+1)< n)   \n" \
"        {                                   \n" \
"            tmp[i]+=tmp[i+1];               \n" \
"            do                              \n" \
"            {                               \n" \
"                dot_value = old;            \n" \
"                old = convert_int( atomic_cmpxchg((volatile __global unsigned int*)&share_dot_p, convert_int(dot_value), convert_int(tmp[i] + dot_value)));  \n" \
"            } while (dot_value != old);     \n" \
"            //share_dot_p +=tmp[i];         \n" \
"        }                                   \n" \
"        if(thread_x==0)                  \n" \
"        {                                   \n" \
"                                            \n" \
"            do                              \n" \
"            {                               \n" \
"                dot_value = old;            \n" \
"                old = convert_int(atomic_cmpxchg((volatile __global unsigned int *) dot_p, convert_int(dot_value), convert_int(share_dot_p+dot_value)));  \n" \
"            } while(dot_value != old);                                                 \n" \
"               // *dot_p += share_dot_p;                                               \n" \
"                                                                                       \n" \
"        }                                                                              \n" \
"   }                                                                                   \n" \
"}                                                                                      \n" \
"\n";* 
```

**我得到的错误：**

```
Build Program Info: ptxas application ptx input, line 160; error   : Label expected for argument 0 of instruction 'call'
ptxas application ptx input, line 160; error   : Call target not recognized
ptxas application ptx input, line 160; error   : Function 'atomic_cmpxchg' not declared in this scope
ptxas application ptx input, line 160; error   : Call target not recognized
ptxas application ptx input, line 185; error   : Label expected for argument 0 of instruction 'call'
ptxas application ptx input, line 185; error   : Call target not recognized
ptxas application ptx input, line 185; error   : Function 'atomic_cmpxchg' not declared in this scope
ptxas application ptx input, line 185; error   : Call target not recognized
ptxas application ptx input, line 161; error   : Unknown symbol 'atomic_cmpxchg'
ptxas application ptx input, line 186; error   : Unknown symbol 'atomic_cmpxchg'
ptxas fatal   : Ptx assembly aborted due to errors
error   : Ptx compilation failed: gpu='sm_13', device code='cuModuleLoadDataEx_4'
: Considering profile 'compute_13' for gpu='sm_13' in 'cuModuleLoadDataEx_4'
: Retrieving binary for 'cuModuleLoadDataEx_4', for gpu='sm_13', usage mode='  '
: Considering profile 'compute_13' for gpu='sm_13' in 'cuModuleLoadDataEx_4'
: Control flags for 'cuModuleLoadDataEx_4' disable search path
: Ptx binary found for 'cuModuleLoadDataEx_4', architecture='compute_13'
: Ptx compilation for 'cuModuleLoadDataEx_4', for gpu='sm_13', ocg options='  ' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:56:07.980

由于您使用`atomic_cmpxchg`的是 OpenCL 中可选扩展的一部分，因此您需要检查您的设备是否支持它，然后在内核代码中启用它：

1.  检查`cl_khr_global_int32_base_atomics`是否在返回的扩展名中列出`clGetDeviceInfo(..., CL_DEVICE_EXTENSIONS, ...)`

2.  将以下内容添加到内核代码的顶部：

`#pragma OPENCL EXTENSION cl_khr_global_int32_base_atomics : enable`

请注意，如果您使用带有 __local 或 64 位操作数的原子函数，您可能需要启用其他扩展：

```
#pragma OPENCL EXTENSION cl_khr_global_int32_base_atomics : enable
#pragma OPENCL EXTENSION cl_khr_local_int32_base_atomics : enable
#pragma OPENCL EXTENSION cl_khr_int64_base_atomics : enable
#pragma OPENCL EXTENSION cl_khr_global_int32_extended_atomics : enable
#pragma OPENCL EXTENSION cl_khr_local_int32_extended_atomics : enable
#pragma OPENCL EXTENSION cl_khr_int64_extended_atomics : enable 
```

此外，请确保您使用的是 OpenCL 1.1 或更高版本，因为在 OpenCL 1.0 中原子函数的名称不同。例如，如果您使用 NVidia 的`nvcc`实用程序离线编译内核，请确保您指定了`-arch`命令行开关。

这些特定错误与 oclUtils.h 无关。这是一个 NVidia 头文件，仅当您在主机（而非内核）代码中调用 ocl* 函数时才需要它。

# iphone - 从 NSString 中删除除 + - 运算符之外的所有特殊字符

> ID：13321374
> 
> 赞同：1
> 
> 时间：2012-11-10T10:51:12.090
> 
> 标签：iphone, objective-c, ios, nsstring

我想删除**除 +、空格和 - 之外**的所有特殊字符。怎么可能？

我的字符串是

```
Äî;a[bRa]Co-Founder MobÄ: +91 9711700008 
```

输出：

```
abRaCo-Founder Mob +91 9711700008 
```

根据下面的答案，我更新了我的代码，但仍然没有成功。

```
NSMutableCharacterSet *special = [NSMutableCharacterSet characterSetWithCharactersInString:@"+ -"];
[special formUnionWithCharacterSet:[[NSCharacterSet alphanumericCharacterSet] invertedSet]];

NSString *temp=@"gaurav 1!@#!#@! kant !@#!@#!@#12kestwal ";

NSString *yourString = [temp stringByTrimmingCharactersInSet:special];

NSLog(@"%@",yourString); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:25:05.803

比巨型功能短得多。:D 上面：

```
id s = @"$bla++$bleb+$blub-$b";
NSMutableCharacterSet *ch = [[NSCharacterSet alphanumericCharacterSet] mutableCopy];
[ch invert];
[ch removeCharactersInString:@"+-"]; //make sure its not removed
s = [[s componentsSeparatedByCharactersInSet:ch] componentsJoinedByString:@""];
NSLog(@"%@ - %@",ch, s); 
```

在这个例子中 $ 被删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:02:59.837

你能试试吗

```
NSString *yourString = @"Äî;a[bRa]Co-Founder MobÄ: +91 9711700008"

// thanks for Daij-Djan to point my mistake here
NSMutableCharacterSet *special = [[NSCharacterSet alphanumericCharacterSet] mutableCopy];
[special invert];
[special removeCharactersInString:@"+ -"]; 

// for this one I answer before Daij-Djan, please see edit version
//  note: I didn't offensive to anyone, please do not misunderstanding, thanks.
NSString *yourString =[[yourString componentsSeparatedByCharactersInSet:special]
 componentsJoinedByString:@""]; 
```

所以，它分开然后加入，感谢这个链接[Strip Non-Alphanumeric Characters from an NSString](https://stackoverflow.com/questions/1656410/strip-non-alphanumeric-characters-from-an-nsstring)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:07:19.703

这是一个如何实现你想要做的事情的例子：

```
#import <Foundation/Foundation.h>

BOOL isWanted(unichar character)
{
    if(character>='a' && character<='z')
        return YES;
    if(character>='A' && character<='Z')
        return YES;
    if(character>='0' && character<='9')
        return YES;
    if(character=='-' || character=='+')
        return YES;
    return NO;
}

int main(int argc, char** argv)
{
    @autoreleasepool
    {
        NSString* string= @"Äî;a[bRa]Co-Founder MobÄ: +91 9711700008";
        NSMutableString* filteredString=[NSMutableString new];
        for(NSUInteger i=0; i<[string length];i++)
        {
            unichar character=[string characterAtIndex: i];
            if(isWanted(character))
                [filteredString appendString: [NSString stringWithFormat: @"%c",character]];
        }
        NSLog(@"%@",filteredString);
    }
    return 0;
} 
```

如果您想在字符串中包含该字符，isWanted 函数返回 YES。为了便于阅读，我没有使用很多逻辑 OR，但只是 if，您可以用唯一的 if 替换它。
有时如果看文档花费太多时间，您可以自己发明解决方案。很多人会不同意，当然单行解决方案更好，但如果您没有找到正确的文档方法，为什么要浪费时间？

# c# - 构建包后通过 Win8 商店应用程序中的 URL 打开文件

> ID：13321377
> 
> 赞同：5
> 
> 时间：2012-11-10T10:51:56.787
> 
> 标签：c#, windows-8, windows-store-apps

我想通过 Win8 商店应用程序中的 URL 打开文件。下面是代码。

```
var uri = new Uri(uriToLaunch);
var options = new Windows.System.LauncherOptions(); 
options.TreatAsUntrusted = false;
var success = await Windows.System.Launcher.LaunchUriAsync(uri, options); 
```

实际上，代码在调试模式下运行良好。这样，文件就被打开了。

问题是，当我构建包并通过包重新安装它时，文件将无法打开。我跟踪了成功值，它返回 false。当我尝试在本地打开文件时也会发生同样的事情，它可以从调试模式打开，但在构建到包后失败。

任何人都有解决它的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:20:21.747

直接文件/文件夹访问在 Windows 应用商店应用程序中受到限制。它是一个沙盒执行环境。您可以使用指定的文件夹来创建和访问文件。对于其他任何事情，您都需要最终用户干预。

查看类：StorageFolder::GetFileAsync、StorageFile::OpenAsync 和 DataReader::LoadAsync。

# wordpress - 如何使用 Octopress 的 exitwp.py 构建文件从 Wordpress 迁移内容？

> ID：13321381
> 
> 赞同：1
> 
> 时间：2012-11-10T10:52:49.737
> 
> 标签：wordpress, octopress

我已经使用`exitwp.py`. 我已将所有 wordpress 文件转换为 exitwp 目录内 build 目录上的 markdown 格式，我正在使用 octopress，如何将我的 Wordpress 导出文件放入 Octopress 以在基于 Octopress 的博客上显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:39:36.310

复制所有文件

`path_to_exitwp/build/jekyll/your_blog_url`

至

`path_to_octopress/source`

# ipad - 为什么 iframe div 不能在 iPad 上滚动？

> ID：13321383
> 
> 赞同：4
> 
> 时间：2012-11-10T10:53:14.557
> 
> 标签：ipad, html, iframe, scroll

我在 div 中创建了一个 iframe，但我似乎无法让它在 iPad 上滚动（用 1 根或 2 根手指）。它在 iPhone 上运行良好，但仅在横向模式下。

iframe 在 div 中设置为 100% 的高度和宽度，并且 div 使用 overflow-y: auto 和 overflow-x: hidden 设置。

作为参考，该网站是[www.cramondkirkbadminton.net](http://www.cramondkirkbadminton.net)。

谁能让我知道我做错了什么？

谢谢，坎贝尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T23:33:42.847

将样式应用`-webkit-overflow-scrolling: touch;`到 iFrame，应该这样做。

# c# - 自定义控件属性的默认样式 Setter 处的 XamlParseException

> ID：13321393
> 
> 赞同：1
> 
> 时间：2012-11-10T10:54:28.050
> 
> 标签：c#, xaml, custom-controls, winrt-xaml, xamlparseexception

请原谅这个迟钝的标题，不知道如何最好地表达我的问题......

我在项目 Foo 中编写了一个自定义控件“CustomControl”。它有一个依赖属性“Title”，它是一个字符串：

```
public static readonly DependencyProperty TitleProperty =
    DependencyProperty.Register(
        "Title",
         typeof(string),
         typeof(CustomControl),
         PropertyMetadata.Create("Default Title")
    );
public string Title
{
    get { return (string)GetValue(TitleProperty); }
    set { SetValue(TitleProperty, value); }
} 
```

在我的 Generic.xaml 文件中，我尝试使用 Setter 节点设置“Title”的值：

```
<Style TargetType="local:CustomControl">

    <!-- Setter for Template property -->

    <Setter Property="Title" Value="Any String" />
</Style> 
```

该应用程序在尝试呈现控件时立即窒息，说它在我的控件中找不到“Title”属性：

> Foo.exe 中出现“Windows.UI.Xaml.Markup.XamlParseException”类型的异常，但未在用户代码中处理
> 
> WinRT 信息：在类型“Foo.Controls.CustomControl”中找不到属性“Title”。[线：X 位置：Y]
> 
> 附加信息：未指定的错误

我在这里做错了吗？这是不允许的吗？当我中断调试器时，我可以**看到**对象上的 Title 属性，所以我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:01:54.060

我觉得很傻，最好删除这个问题，因为在拉了几个小时的头发后，我在发布问题后 10 秒解决了它。

问题出在我的 DependencyProperty.Register 调用中。我的所有者类型（第三个参数）引用了一个名称非常相似的类，而不是实际拥有的类。哎呀。:(

# regex - 反向正则表达式，从正则表达式创建字符串

> ID：13321395
> 
> 赞同：3
> 
> 时间：2012-11-10T10:54:28.510
> 
> 标签：regex

我在一个多语言网站上工作，并选择使用每种语言的自定义 URL，例如：

```
/en/cities/paris/
/nl/steden/paris/ 
```

两者都指向 Cities 控制器的 Index 方法。

在每个页面上都有一个切换语言的选项，它会在我的路由中查找以匹配控制器、视图和语言。

因此，如果我在荷兰语页面上，它将找到英文版的正确 url，它将是“cities”而不是“steden”。

一切正常，直到我开始使用更复杂的正则表达式。

我有这些正则表达式将匹配我想要的 URL：

```
#^en/cities/([^/]+?)/$#
#^nl/steden/([^/]+?)/$# 
```

在我的代码中，我可以访问正在匹配的变量，在此示例中为“paris”。是否可以“反转”这个正则表达式并让它打印 'en/cities/paris/'

如果不是.. 考虑到 URL 不同，我将如何链接到同一页面的不同版本.. 最好让它尽可能可编程。

在一个有点类似的问题中，有人回答（http://stackoverflow.com/a/7070734/616398）正则表达式的本质是匹配无限数量的结果......所以它可能是不可能的。

从字符串/URL 到一组匹配的标准以在 MVC 中使用非常容易，但反过来......不幸的是，没那么多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T23:46:53.243

是的，这是可能的！对于这种情况，我编写了以下解决方案：

```
$regex = '#^en/cities/([^/]+?)/$#';
$replace = array('paris');

$result = preg_replace_callback('#^\^|\([^)]*\)|\$$#', function($m)use($replace){
    static $index = 0;
    if($m[0] === '^' || $m[0] === '$'){return '';}
    if(isset($replace[$index])){
        return $replace[$index++];
    }
    return $m[0];
}, substr($regex, 1, -1));
echo $result; // en/cities/paris/ 
```

**[在线演示](http://viper-7.com/R5nS7g)**

I've made it "flexible" so you can add more values to it !

```
$regex = '#^en/cities/([^/]+?)/region/([^/]+?)$#'; // <<< changed
$replace = array('paris', 'nord'); // <<< changed

$result = preg_replace_callback('#^\^|\([^)]*\)|\$$#', function($m)use($replace){
    static $index = 0;
    if($m[0] === '^' || $m[0] === '$'){return '';}
    if(isset($replace[$index])){
        return $replace[$index++];
    }
    return $m[0];
}, substr($regex, 1, -1));
echo $result; // en/cities/paris/region/nord 
```

**[Online demo](http://viper-7.com/Af0cS8)**

* * *

**Explanation:**

```
$regex = '#^en/cities/([^/]+?)/region/([^/]+?)$#'; // Regex to "reverse"
$replace = array('paris', 'nord'); // Values to "inject"

/*  Regex explanation:
   #   Start delimiter
       ^\^         Match "^" at the begin (we want to get ride of this)
       |           Or
       \([^)]*\)   Match "(", anything zero or more times until ")" is found, ")"
       |           Or
       \$$         Match "$" at the end (we want to get ride of this)
   #   End delimiter
*/

$result = preg_replace_callback('#^\^|\([^)]*\)|\$$#', function($m)use($replace){
    static $index = 0; // Set index 0, note that this variable is only accessible in this (anonymous) function
    if($m[0] === '^' || $m[0] === '$'){return '';} // Get ride of ^/$ at the begin and the end
    if(isset($replace[$index])){ // Always check if it exists, for example if there were not enough values in $replace, this will prevent an error ...
        return $replace[$index++]; // Return the injected value, at the same time increment $index by 1
    }
    return $m[0]; // In case there isn't enough values, this will return ([^/]+?) in this case, you may want to remove it to not include it in the output
}, substr($regex, 1, -1)); // substr($regex, 1, -1) => Get ride of the delimiters
echo $result; // output o_o 
```

> [**Note**: This works only on **PHP 5.3+**]

# python - django manytomanyfield .add() 方法

> ID：13321398
> 
> 赞同：6
> 
> 时间：2012-11-10T10:54:45.287
> 
> 标签：python, django, overriding, manytomanyfield

假设我有：

```
class Album(models.Model):
    photos = models.ManyToManyField('myapp.Photo')
    photo_count = models.IntegerField(default = 0)

class Photo(models.Model):
    photo = models.ImageField(upload_to = 'blahblah') 
```

想要的是，每次我调用 .add() 方法时，增加`photo_count`on`Album`类，所以我想覆盖 .add() 方法。问题是，我无法导入`.add()`'s 类，因为它在方法内，所以它就像`def->class->def`. 那么有什么可以覆盖的`.add()`吗？或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T11:07:30.160

您[可以使用 django 的信号](https://docs.djangoproject.com/en/dev/ref/signals/)并编写一个信号处理程序，该处理程序将使用信号递增计数器`m2m_changed`：

[https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed](https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T23:01:03.810

可能最简单的选择是跳过信号，完全删除 photo_count 字段，然后在您使用 [album].photo_count 的任何地方调用 [album].photos.count()。

您还可以在 Album 上定义一个属性，如下所示：

```
class Album(models.Model):
    photos = models.ManyToManyField('myapp.Photo')

    @property
    def photo_count(self):
        return self.photos.count()

class Photo(models.Model):
    photo = models.ImageField(upload_to = 'blahblah') 
```

这两个选项的缺点是它们使根据照片数量进行搜索/排序变得更加困难。他们也不将计数存储在数据库中。（如果您有一些与同一个数据库交互的非 Django 应用程序，这可能是重要的。）如果您认为您想通过 Django 进行此类搜索，请查看[Django annotations](https://docs.djangoproject.com/en/dev/ref/models/querysets/#annotate)。

这比处理信号更简单，但可能仍然是矫枉过正。

# java - org.springframework.test 也无法在存在 maven 依赖项的情况下解决

> ID：13321400
> 
> 赞同：6
> 
> 时间：2012-11-10T10:54:46.583
> 
> 标签：java, maven, spring-transactions, spring-test

我在尝试为我的 Spring 应用程序构建测试套件时遇到问题。我是 Maven 新手，我找不到问题所在。我已添加到我的 pom.xml

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.0.0.RELEASE</version>
    <scope>test</scope> 
</dependency> 
```

但我仍然从 Eclipse 得到错误：`The import org.springframework.test cannot be resolved`.

在这个讨论之后（[http://appfuse.547863.n4.nabble.com/spring-test-package-not-found-td1596479.html](http://appfuse.547863.n4.nabble.com/spring-test-package-not-found-td1596479.html)），我尝试添加`<scope>provided<scope>`但没有成功。

这是我的完整`pom.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.mose</groupId>
<artifactId>emergency-alert-server</artifactId>
<name>emergency-alert-server</name>
<version>1.0.0-BUILD-SNAPSHOT</version>
<packaging>war</packaging>
<properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.0.5.RELEASE</org.springframework-version>
    <org.aspectj-version>1.6.10</org.aspectj-version>
    <org.slf4j-version>1.6.1</org.slf4j-version>
</properties>
<dependencies>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>   

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Jackson JSON Processor -->
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.7.6</version>
    </dependency>

    <!-- JAXB XML Processor -->
    <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.2.2</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- File Upload -->
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.2</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.4</version>
    </dependency>

    <!-- Test-->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency> 
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.0.0.RELEASE</version>
        <scope>test</scope> 
    </dependency>
    <dependency>
        <groupId>hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.10</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
        <scope>test</scope>
    </dependency>

    <!-- MySQL database driver -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.9</version>
    </dependency>   
    <!-- Hibernate framework -->
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-core</artifactId>
      <version>3.6.0.Final</version>
    </dependency>
    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency>
    <!-- Google Cloud Messaging for server  -->
    <dependency>
        <groupId>com.google.android.gcm</groupId>
        <artifactId>gcm-server</artifactId>
        <version>1.0.2</version>
    </dependency>
</dependencies>

<repositories>
    <!-- For testing against latest Spring snapshots -->
    <repository>
        <id>org.springframework.maven.snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <url>http://maven.springframework.org/snapshot</url>
        <releases><enabled>false</enabled></releases>
        <snapshots><enabled>true</enabled></snapshots>
    </repository>
    <!-- For developing against latest Spring milestones -->
    <repository>
        <id>org.springframework.maven.milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
        <snapshots><enabled>false</enabled></snapshots>
    </repository>
    <!-- For Spring releases -->
    <repository>
        <id>org.springframework.maven.release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
        <snapshots><enabled>false</enabled></snapshots>         
    </repository>
    <repository>
      <id>repository.jboss.org-public</id>
      <name>JBoss repository</name>
      <url>https://repository.jboss.org/nexus/content/groups/public</url>
    </repository>
    <repository>
        <id>gcm-server-repository</id>
         <url>https://raw.github.com/slorber/gcm-server-repository/master/releases/</url>
    </repository>       
</repositories>

<pluginRepositories>
    <pluginRepository>
        <id>apache.snapshots</id>
        <name>Apache Snapshots</name>
        <url>http://people.apache.org/repo/m2-snapshot-repository</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
</pluginRepositories>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>                
            <configuration>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>install</id>
                    <phase>install</phase>
                    <goals>
                        <goal>sources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <!-- Have to use version 1.2 since version 1.3 does not appear to work with ITDs -->
            <version>1.2</version>
            <dependencies>
                <!-- You must use Maven 2.0.9 or above or these are ignored (see MNG-2972) -->
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${org.aspectj-version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${org.aspectj-version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0-SNAPSHOT</version>
            <!-- 
            <configuration>
                <contextFile>src/main/webapp/META-INF/context.xml</contextFile>
            </configuration> -->
            <dependencies>      
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.9</version>
                </dependency>
            </dependencies>
        </plugin>                       
    </plugins>
</build> 
```

然后我尝试运行`mvn dependency:tree`，但我看不出有什么奇怪的：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building emergency-alert-server 1.0.0-BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ emergency-alert-server ---
[INFO] org.mose:emergency-alert-server:war:1.0.0-BUILD-SNAPSHOT
[INFO] +- org.springframework:spring-orm:jar:3.0.5.RELEASE:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.0.5.RELEASE:compile
[INFO] |  |  \- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- org.springframework:spring-core:jar:3.0.5.RELEASE:compile
[INFO] |  |  +- (org.springframework:spring-asm:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  +- org.springframework:spring-jdbc:jar:3.0.5.RELEASE:compile
[INFO] |  |  +- (org.springframework:spring-beans:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  |  \- (org.springframework:spring-tx:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  \- org.springframework:spring-tx:jar:3.0.5.RELEASE:compile
[INFO] |     +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |     +- (org.springframework:spring-aop:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |     +- (org.springframework:spring-beans:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |     +- (org.springframework:spring-context:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |     \- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] +- org.springframework:spring-context:jar:3.0.5.RELEASE:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.0.5.RELEASE:compile
[INFO] |  |  +- (aopalliance:aopalliance:jar:1.0:compile - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-asm:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-beans:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  |  \- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-beans:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- org.springframework:spring-expression:jar:3.0.5.RELEASE:compile
[INFO] |  |  \- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  \- org.springframework:spring-asm:jar:3.0.5.RELEASE:compile
[INFO] +- org.springframework:spring-webmvc:jar:3.0.5.RELEASE:compile
[INFO] |  +- (org.springframework:spring-asm:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-beans:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-context:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- org.springframework:spring-context-support:jar:3.0.5.RELEASE:compile
[INFO] |  |  +- (org.springframework:spring-beans:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  |  +- (org.springframework:spring-context:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  |  \- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  +- (org.springframework:spring-expression:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |  \- org.springframework:spring-web:jar:3.0.5.RELEASE:compile
[INFO] |     +- (aopalliance:aopalliance:jar:1.0:compile - omitted for duplicate)
[INFO] |     +- (org.springframework:spring-beans:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |     +- (org.springframework:spring-context:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] |     \- (org.springframework:spring-core:jar:3.0.5.RELEASE:compile - omitted for duplicate)
[INFO] +- org.aspectj:aspectjrt:jar:1.6.10:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.6.1:runtime
[INFO] |  \- (org.slf4j:slf4j-api:jar:1.6.1:runtime - omitted for duplicate)
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.1:runtime
[INFO] |  +- (org.slf4j:slf4j-api:jar:1.6.1:runtime - omitted for duplicate)
[INFO] |  \- (log4j:log4j:jar:1.2.16:runtime - omitted for duplicate)
[INFO] +- log4j:log4j:jar:1.2.16:runtime
[INFO] +- javax.inject:javax.inject:jar:1:compile
[INFO] +- org.codehaus.jackson:jackson-mapper-asl:jar:1.7.6:compile
[INFO] |  \- org.codehaus.jackson:jackson-core-asl:jar:1.7.6:compile
[INFO] +- javax.xml.bind:jaxb-api:jar:2.2.2:compile
[INFO] |  +- javax.xml.stream:stax-api:jar:1.0-2:compile
[INFO] |  \- javax.activation:activation:jar:1.1:compile
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided
[INFO] +- javax.servlet.jsp:jsp-api:jar:2.1:provided
[INFO] +- javax.servlet:jstl:jar:1.2:compile
[INFO] +- commons-fileupload:commons-fileupload:jar:1.2.2:compile
[INFO] +- commons-io:commons-io:jar:1.4:compile
[INFO] +- junit:junit:jar:4.7:test
[INFO] +- org.springframework:spring-test:jar:3.0.0.RELEASE:test
[INFO] +- hsqldb:hsqldb:jar:1.8.0.10:test
[INFO] +- commons-dbcp:commons-dbcp:jar:1.2.2:test
[INFO] |  \- commons-pool:commons-pool:jar:1.3:test
[INFO] +- mysql:mysql-connector-java:jar:5.1.9:compile
[INFO] +- org.hibernate:hibernate-core:jar:3.6.0.Final:compile
[INFO] |  +- antlr:antlr:jar:2.7.6:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.1:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  +- org.hibernate:hibernate-commons-annotations:jar:3.2.0.Final:compile
[INFO] |  |  \- (org.slf4j:slf4j-api:jar:1.5.8:compile - omitted for conflict with 1.6.1)
[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.0.Final:compile
[INFO] |  +- javax.transaction:jta:jar:1.1:compile
[INFO] |  \- (org.slf4j:slf4j-api:jar:1.6.1:compile - omitted for duplicate)
[INFO] +- javassist:javassist:jar:3.12.1.GA:compile
[INFO] \- com.google.android.gcm:gcm-server:jar:1.0.2:compile
[INFO]    \- com.googlecode.json-simple:json-simple:jar:1.1:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.642s
[INFO] Finished at: Sat Nov 10 11:44:19 CET 2012
[INFO] Final Memory: 6M/81M
[INFO] ------------------------------------------------------------------------ 
```

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-19T08:57:33.870

如果 Maven 构建成功但 Eclipse 发现错误，则表明 Eclipse 没有读取与 Maven 导入相同的 jar。右键单击该项目并选择 Maven/update 并在其后添加 Project/clean。

有时 Eclipse (Kepler) Maven 插件无法下载 jar。检查丢失的 jar 是否在您的本地存储库中。通常只会有一些文件告诉 Maven 在固定时间内不要尝试再次下载。如果是这样，请删除该 jar 的存储库部分，临时将范围设置为编译，然后执行 Maven 清理和安装。如果这不起作用，请在 pom.xml 文件的目录中打开一个命令窗口，然后发出**mvn -U clean install**命令。

此外，您的 pom.xml 对我来说看起来相当大。将存储库定义、编译器版本等常见的东西放入可以由项目的所有组件共享的父 pom 是一种很好的做法。我喜欢依赖传递依赖（例如 spring-mvc 可能会在没有你指定的情况下吸收 Spring 框架的其余部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T01:57:22.697

该包`org.springframework.transaction`由`spring-tx`工件提供，而不是`spring-test`.

您可能会通过将其添加到您的`pom.xml`

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-tx</artifactId>
    <version>${org.springframework-version}</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T21:40:31.677

最可能的原因是您的 maven 本地存储库中的缓存错误，您可以： 1\. 检查您是否在 eclipse 配置和项目的构建路径中使用现有版本的 java。2\. 转到您的本地 maven 存储库，它的常用路径是 C:\Users[your_user].m2\repository 并清理 spring 框架依赖项，然后转到 eclipse 并在您的项目上启动 maven 全新安装。3\. 保存所有项目源和更改，然后创建一个新的，放置所有源，清理它并运行 maven clean install -U。

# android - 如何保护我的应用程序免受任务杀手的攻击？

> ID：13321401
> 
> 赞同：2
> 
> 时间：2012-11-10T10:55:06.903
> 
> 标签：android, kill-process

我的应用程序（音频播放器）在启动任何任务杀手后错误地结束了进程。通知不会从通知栏中消失，单击它后，应用程序崩溃。我希望我的应用程序不会停止和关闭。是否可以保护我的应用程序免受任务杀手应用程序的影响？

# windows-8 - 在 Win RT 上的外部应用程序中打开文件

> ID：13321403
> 
> 赞同：0
> 
> 时间：2012-11-10T10:55:34.853
> 
> 标签：windows-8, .net-4.5

如何在 Windows 8 RT 上的外部应用程序中打开文件？就我而言，我正在为其中一个 torrent 跟踪器开发一个客户端，并希望在 uTorrent 中打开 torrent。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:31:02.597

如果它对某人有用，可以在[这里找到解决方案](http://msdn.microsoft.com/en-US/library/windows/apps/xaml/Hh779671)

# shell - 进程不能被kill -9杀死，它总是改变进程ID

> ID：13321411
> 
> 赞同：4
> 
> 时间：2012-11-10T10:57:03.793
> 
> 标签：shell, process

```
[root@rp8 flash]# ps -ef|grep "sleep"
root     17510 17314  0 11:52 pts/3    00:00:00 sleep 120
root     17512 17328  0 11:52 pts/2    00:00:00 grep --color=auto sleep
[root@rp8 flash]# kill -9 17510
[root@rp8 flash]# ps -ef|grep "sleep"
root     17514 17314  0 11:53 pts/3    00:00:00 sleep 120
root     17516 17328  0 11:53 pts/2    00:00:00 grep --color=auto sleep
[root@rp8 flash]# kill -9 17514
[root@rp8 flash]# ps -ef|grep "sleep"
root     17518 17314  0 11:53 pts/3    00:00:00 sleep 120
root     17520 17328  0 11:53 pts/2    00:00:00 grep --color=auto sleep 
```

这有什么问题以及如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T10:58:58.063

查看父进程；你可能也需要杀死它。

每个睡眠进程的 ps 输出具有相同的父进程 id: `17314`。要阻止睡眠过程重生（一次又一次），您必须这样做`kill 17314`，但首先要确保在停止它之前知道它是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T10:57:57.867

可能是因为`17314`不断产生它。从根本上斩断邪恶！**（错误，在杀死它**`17314`之前一定要弄清楚它是什么）

# mysql - 在where子句中更新mysql的最大值

> ID：13321413
> 
> 赞同：1
> 
> 时间：2012-11-10T10:57:34.110
> 
> 标签：mysql

我只是坚持使用一个简单的 mysql 查询，我想更新具有最大表 ID 的行，我正在尝试类似但它不起作用

```
UPDATE inbox i
INNER JOIN messages m ON i.message_id = m.id 
SET i.read = 0
WHERE m.conversation_id = 10
AND i.user_id = 1
ORDER BY i.id DESC
LIMIT 1 
```

我也尝试过子查询，但它也不起作用

需要一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:06:33.180

在 MySql 中，如果您有一个引用同一个表的子查询，则无法更新表，但您可以使用 JOINS 替换子查询。我会这样做，这是一个技巧，但它有效：

```
UPDATE
  inbox inner join (select max(id) as maxid from inbox) mx on inbox.id = mx.maxid
SET inbox.`read` = 0 
```

**编辑：**我看到你编辑了你的问题，所以我必须编辑我的答案：

```
UPDATE
  inbox
  INNER JOIN (select max(inbox.id) as maxid
              from
                inbox inner join messages
                on inbox.message_id = messages.id
              where
                messages.conversation_id=10
                and inbox.user_id=1) mx
  on inbox.id = mx.maxid
SET inbox.`read` = 0 
```

`conversation_id`您的子查询根据您想要的和返回最大 id `user_id`，然后加入`inbox`最大 id 以选择您想要的行，然后您可以只更新该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T10:59:25.383

您需要像使用反引号一样转义[MySQL 中的保留字。](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)`read`您还可以使用`limit`仅更新最大的记录。

```
UPDATE inbox
SET `READ` = 0
order by id desc
limit 1 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/998b1/1)

# android - 在 Android 中使用 JSON 网络服务并处理数据

> ID：13321415
> 
> 赞同：0
> 
> 时间：2012-11-10T10:57:46.247
> 
> 标签：android, json, string, web-services, http

我正在尝试使用下面的网络服务

```
http://62.253.195.179/disaster/webservices/login.php?message=[{"email":"ugo.amanoh@transputec.com","password":"welcome"}] 
```

这将返回一个 JSON 数组

```
[{"companyuserId":"2","name":"ben stein","superiorname":"Leon","departmentId":"26","departmentname":"Development","companyId":"23","UDID":"12345","isActive":"1","devicetoken":"12345","email":"ugo.amah@transputec.com","phone":"5456465465654","userrole":"1","chngpwdStatus":"1"}] 
```

我的代码如下

```
try{

    String weblink = URLEncoder.encode("http://62.253.195.179/disaster/webservices/login.php?message=[{\"email\":\"ugo.amanoh@transputec.com\",\"password\":\"welcome\"}]");
    HttpParams httpParameters = new BasicHttpParams();
    int timeoutConnection = 7500;
    HttpConnectionParams.setConnectionTimeout(httpParameters,
            timeoutConnection);
    int timeoutSocket = 7500;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
    HttpClient client = new DefaultHttpClient(httpParameters);
    HttpGet request = new HttpGet();
    URI link = new URI(weblink);
    request.setURI(link);
    HttpResponse response = client.execute(request);

    BufferedReader rd = new BufferedReader(new InputStreamReader(
            response.getEntity().getContent()));
    result = rd.readLine();
    JSONObject myData = new JSONObject(result);
    JSONArray jArray = myData.getJSONArray("");
    JSONObject steps = jArray.getJSONObject(0);
    String name = steps.getString("name");

} catch (JSONException e) {
    e.printStackTrace();
} 
```

但它不起作用，我不能 100% 确定这是最好的方法。

```
11-10 10:49:55.489: E/AndroidRuntime(392): java.lang.IllegalStateException: Target host must not be null, or set in parameters. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:22:50.623

你不需要`HttpClient`：

```
String weblink = URLEncoder.encode("http://62.253.195.179/disaster/webservices/login.php?message=[{\"email\":\"ugo.amanoh@transputec.com\",\"password\":\"welcome\"}]");
URI link = new URI(weblink);
URLConnection linkConnection = link.openConnection();
BufferedReader rd = new BufferedReader(new InputStreamReader(linkConnection.getInputStream());
.... 
```

我认为您犯的错误是您使用`HttpGet request = new HttpGet();`而不是`HttpPost post = new HttpPost(webLink);`.

# c# - .net 中多边形中的巨大数据集点（碰撞检测）

> ID：13321418
> 
> 赞同：0
> 
> 时间：2012-11-10T10:58:30.850
> 
> 标签：c#, .net, dataset, collision-detection, polygon

我有一个很大的多边形网格，通常是三角形，但有时是矩形。我的网格中的每个点都有一个值（值与坐标无关）。

现在我在与旧网格相同的坐标空间中创建第二个网格。我现在想使用旧网格中的值插入新网格中所有点（顶点）的值。

现在我可以循环新网格中的每个多边形，并通过进行 2d 碰撞检测来检测每个多边形中的哪些旧顶点（即使这样我也无法正常工作，所以如果有人有简单快速的 2d 碰撞检测代码（三角形就足够了）我很乐意看到它）。

然而，我的主要观点再次。为每个新多边形循环每个旧顶点似乎效率不高。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:15:51.047

在没有进一步了解您的问题的启发式的情况下，我建议的可能解决方案如下：我将确定整个风景的矩形边界，然后将该区域分成相等的矩形分区，例如 100x100。对于每个分区，您可以在此分区中保留一个带有顶点的旧多边形列表（一种“散列”旧多边形）。然后迭代每个新多边形，确定它可能接触到的分区（只需使用多边形边界矩形的顶点和其间的所有分区就可以了）并查找预先构建的列表以找到相应的旧顶点，这些顶点是候选的精确的碰撞检测。

这将减少耗时的精确碰撞检测计算，但肯定会增加内存消耗。因此，根据您的确切问题，这可能是一个很好的解决方案，也可能是不切实际的。

# java - Android 开发 Eclipse - 无法创建新的 Android 项目 - Mac OS

> ID：13321420
> 
> 赞同：4
> 
> 时间：2012-11-10T10:58:35.053
> 
> 标签：java, android, eclipse, macos, project

我在使用 Eclipse 向导创建新的 android 项目时遇到问题，昨天一切正常。有几个项目工作。现在，当我在向导的最后一步按“完成”时，它保持打开状态，并将一个带有白色标记包的空项目添加到工作分支，我尝试重新安装 eclipse，它是 sdk+plug，仍然没有。

非常感谢您的帮助，在此先感谢您

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:49:31.203

这可能是因为 jre 更新。在 Linux 上，使用开放式 JDK 时，SVN 插件过去常常在 hhtps 连接上失败。

要找出问题，请尝试检查 /workspace/.metadata/ 下的工作区日志，我建议您删除日志文件，然后启动 eclipse 并尝试产生错误。很可能一个插件正在接收一个未处理（或以错误方式处理）的异常，并且您可能可以从日志文件中找出问题所在。

# c# - 反序列化 iTunes rss xml

> ID：13321421
> 
> 赞同：0
> 
> 时间：2012-11-10T10:58:40.300
> 
> 标签：c#, serialization

我正在为 iTunes 提出的 xml 架构而苦苦挣扎。我能够反序列化标题和链接等元素。但不是那些以itunes为前缀的元素：例如itunes：image和itunes：duration

`[XmlElementAttribute("itunes:duration")]`不起作用。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T11:09:14.417

您正在寻找：

```
[XmlElementAttribute(AttributeName = "duration", Namespace = "itunes")] 
```

# regex - 正则表达式从 VB.NET 中略有不同的字符串中提取数据

> ID：13321427
> 
> 赞同：1
> 
> 时间：2012-11-10T10:59:16.013
> 
> 标签：regex, vb.net

我有以下三个字符串，我需要从中提取一些数据

```
randomData1§randomData2§randomData3
randomData1§randomData2§randomData3
randomData§randomData§randomData1§randomData2§randomData3 
```

我需要一个可以与上述所有三个字符串一起使用的表达式来给出：

```
(randomData1) (randomData2) (randomData3)
(randomData1) (randomData2) (randomData3)
(randomData§randomData§randomData1) (randomData2) (randomData3) 
```

randomData2 和 randomData3 将始终是数字（例如：`10`、`100`、`1045`等）并始终用 . 分隔`§`。左边的任何东西都`§randomData2§`可以有很大的变化，也可能包含分隔符`§`。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:06:04.470

您可以使用“$”字符作为模式的最后一个字符将正则表达式匹配模式“锚定”到主题字符串的末尾。所以尝试这样的事情：

```
^(.+)§([^§]+)§([^§]+)$ 
```

请注意，我对 VB 一无所知，这是普通的正则表达式用法。我假设 VB 使用一些标准的正则表达式引擎。

# javascript - JS用回调处理鼠标滚轮和滚动条页面滚动

> ID：13321431
> 
> 赞同：2
> 
> 时间：2012-11-10T10:59:50.723
> 
> 标签：javascript, jquery

如主题 - 是否有人知道任何 jQuery 插件或 JS 脚本来处理鼠标滚轮/滚动条拖动页面滚动，允许您在滚动完成后调用任何函数（回调）？

Nicescroll 似乎是一个非常好的解决方案，除了它不提供任何回调

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:06:02.937

只需将事件绑定到您的页面：

```
$(function() {
    $(window).bind('mousewheel', function(event, delta) {
        //Mouse wheel event callback
    });

    $(window).bind('scroll', function(event) {
        //Scroll event callback
    });
}); 
```

鼠标滚轮插件[http://brandonaaron.net/code/mousewheel/docs](http://brandonaaron.net/code/mousewheel/docs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:08:10.677

或者这个

[http://james.padolsey.com/javascript/special-scroll-events-for-jquery/](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)

（还没有亲自尝试过）

# mysql - 如何在 PostgreSQL 中编写这个 MySQL 位？

> ID：13321432
> 
> 赞同：-1
> 
> 时间：2012-11-10T10:59:50.693
> 
> 标签：mysql, postgresql, heroku, geolocation

我在看[MaxMind的这个花絮](http://dev.maxmind.com/geoip/csv)

```
SELECT ip_country
FROM geoip
WHERE
INET_ATON('xxx.xx.xxx.xxx') BETWEEN begin_ip_num AND end_ip_num
LIMIT 1 
```

我尝试了几种方法，但似乎 BETWEEN 并没有像我认为它在 postgresql 中所做的那样。

如您所见，我正在尝试根据 IP 确定国家/地区。这里有几行，以防万一这可以更容易地完成：

> "223.204.0.0","223.207.255.255","3754688512","3754950655","TH","泰国""223.208.0.0","223.215.255.255","3754950656","3755474943","CN" "中国" "223.216.0.0","223.219.255.255","3755474944","3755737087","JP","日本"

postgres 版本是 9.1 - 忘了添加这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T12:35:40.657

数据类型[`inet`](http://www.postgresql.org/docs/current/interactive/datatype-net-types.html#DATATYPE-INET)可能会解决您的问题。只要列类型是`text`or `varchar`，数据就会根据您的排序规则像文本一样[排序](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-COLLATE-EXPRS)- 这也会影响`BETWEEN`.

还取决于 PostgreSQL 的版本（排序规则支持是后期添加的）。只要您不提供基本信息，这都是猜测。

# c++ - 在 C++ 中使用指针作为映射的值

> ID：13321434
> 
> 赞同：1
> 
> 时间：2012-11-10T11:00:02.900
> 
> 标签：c++, stl, map

我有一个`map<key_t, struct tr_n_t*> nodeTable`并且我正在尝试执行`nodeTable[a] = someNode`where `a`is of type`typedef long key_t`和`someNode`is of type `o_t*`。

在 stl_function.h 的执行中，我在以下点遇到分段错误：

```
 /// One of the @link comparison_functors comparison functors@endlink.
  template<typename _Tp>
    struct less : public binary_function<_Tp, _Tp, bool>
    {
      bool
      operator()(const _Tp& __x, const _Tp& __y) const
      { return __x < __y; }
    }; 
```

源代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <map>

using namespace std;

typedef long key_t;

typedef struct tr_n_t {
    key_t key;
    map<key_t, struct tr_n_t *> nodeTable;
} o_t;

int main() {
    o_t *o = (o_t *) malloc(sizeof(o_t));
    o->nodeTable[1] = o;
    return 0;
} 
```

我没有正确使用地图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:38:28.733

问题是因为你使用 malloc 初始化 o，它的内存被分配了，但它的构造函数没有被调用。

将其更改为，`o_t *o = new o_t();`因为使用`new`而不是`malloc`将调用地图的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:38:04.707

您正在为 分配空间`o_t`，但没有初始化内存。试试这个：

```
#include <map>

typedef long key_t;

struct o_t {
    key_t key;
    std::map<key_t, o_t*> nodeTable;
};

int main() {
    o_t o;
    o.nodeTable[1] = &o;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:38:27.187

您正在使用 C 样式`malloc`分配包含 C++ 类的结构。没有`std::map`调用 的构造函数，因此该对象无效。您不能将 malloc 与普通结构一起使用，但不能在需要正确初始化才能工作的对象上使用。

尝试将分配更改为

```
o_t *o = new o_t(); 
```

# wpf - 如何使用实体框架组织项目中的层？

> ID：13321442
> 
> 赞同：1
> 
> 时间：2012-11-10T11:01:19.517
> 
> 标签：wpf, entity-framework, service-layer

我对组织我的项目感到两难。我正在构建一个发送时事通讯的应用程序。我在我的解决方案中将其分为三个项目：`Newsletter.UI`（WPF）`Newsletter.DAL`和`Newsletter.Services`. 其中`Newsletter.DAL`有代表由 EF 生成的实体的类在附加文件中增强（它们是部分类）-覆盖`ToString()`。其中`Newsletter.UI`当然有 WPF 项目供演示。我的问题从`Newsletter.Services`.

现在我创建了`MailingListService.cs`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Newsletter.DAL;

namespace Newsletter.Services
{
    public class MailingListService
    {
        private NewsletterEntities _context;

        public MailingListService()
        {
            _context = new NewsletterEntities();
        }

        public List<string> GetAllMailingListsNames()
        {
            var query = from m in _context.MailingLists select new { m.Name };
            List<string> names = new List<string>();
            foreach (var m in query)
                names.Add(m.Name);
            return names;
        }

        public List<MailingList> GetAllMailingLists()
        {
            var query = from m in _context.MailingLists select m;
            return query.ToList();       
        }
    }
} 
```

`MessageService.cs`：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Newsletter.DAL;
using System.Data.Entity;

namespace Newsletter.Services
{
    public class MessageService
    {
        private NewsletterEntities _context;

        public MessageService()
        {
            _context = new NewsletterEntities();
        }

        public List<Message> GetAllMessages()
        {
            return (from m in _context.Messages select m).ToList();
        }

        public static Message GetMessageByID(int id)
        {
            using (NewsletterEntities context = new NewsletterEntities())
            {
                Message message = (from m in context.Messages where m.MessageID == id select m).FirstOrDefault();
                return message;
            }
        }
    }
} 
```

`RecipientService.cs`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Newsletter.DAL;

namespace Newsletter.Services
{
    public class RecipientService
    {
        private NewsletterEntities _context;
        public RecipientService()
        {
            _context = new NewsletterEntities();
        }
        public void addRecipient(Recipient newRecipient)
        {
            _context.Recipients.AddObject(newRecipient);
        }
    }
} 
```

然而，这会产生问题。当我打开一个创建收件人的窗口时，我创建了一个`MailingListService`实例来加载邮件列表的名称。然后，当我尝试创建一个新的`Recipient`时，我创建一个`RecipientService`实例并尝试添加一个收件人。我收到一个错误，我无法在不同的地方使用上下文。

如何解决这个问题？我的方法不好吗？它应该是什么（服务中应该有什么）？我不想在将来陷入这样的错误。我现在不想学习 MVVM 方法，我需要或多或少地按照我的方式来做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:51:08.693

几种方法是可能的：

1.  为业务事务使用一个上下文实例。上下文应该在服务之外创建，并通过它们的方法或构造函数传递给服务。这将需要一个更高级别的服务（或外观）层来编排较低级别的服务（就像您现在拥有的服务一样）。IoC 容器可以帮助您创建和注入具有生命周期的上下文，该生命周期绑定到外观服务实例的生命周期。

2.  分离/连接。在您的`AddRecipient`方法中，首先分离收件人（在检查它是否已附加之后）并将其附加到当前上下文。但是：现在工作单元在 2 个上下文实例之间拆分，您需要 a`TransactionScope`来保持它在事务上的合理性。

3.  在更高级别进行聚合，例如通过创建`MailService`处理邮件列表、消息和收件人的方法。

4.  一种混合的方法。具有自己的上下文实例的服务和（最好是无状态的）服务，这些服务在其方法签名中具有带有上下文参数的方法（例如`public Recipient AddRecipient(NewsletterEntities context, string name, string email)`. （通过传递名称等），服务负责创建新`Recipient`对象或返回现有对象（如果它们已经存在）那里）。

只是一些想法:)。

# java - 如何在android中使用AES减少解密时间

> ID：13321445
> 
> 赞同：1
> 
> 时间：2012-11-10T11:01:59.590
> 
> 标签：java, performance, encryption

我现在正在研究音频文件的加密和解密。它对我来说工作正常，但解密速度太低。如何减少解密时间？它应该需要 <6 或 7 秒。我怎样才能做到这一点？请帮我举一个简单的例子。我正在使用 AES。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:16:45.053

我猜这是一个`javax.crypto.Cipher`例子。它可以处理`update()`对任意长度数组的调用，如果您使用更长的数组，您将需要减少开销。

Try 应该按 8192 字节的块来处理数据（这是缓冲区的传统长度，它与 CPU 内部缓存的交互相当好）。

```
CipherInputStream cis = new CipherInputStream(fis, encipher);
byte[] buffer = new byte[8192]; // Or larger (but use powers of 2)
int bytesRead;
while ((bytesRead = cis.read(buffer)) != -1)
{
    fos.write(buffer, 0, bytesRead);
}
fos.flush(); 
```

....不要忘记在 finally 块中关闭所有流..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:28:50.673

```
public class EncryptDecrypt {
    public Cipher encryptcipher, decryptCipher;
    String TAG = "EncryptDecrypt";
    // The default block size
    public static int blockSize = 16;

    // Buffer used to transport the bytes from one stream to another
    byte[] buf = new byte[blockSize]; // input buffer
    byte[] obuf = new byte[8192]; // output buffer

    // The key
    byte[] key = null;  

     byte[] IV = null;

    public EncryptDecrypt(String passwd) {

        key = passwd.getBytes();
        key = "SECRETSECRET_1SE".getBytes();

        // default IV value initialized with 0
        IV = new byte[blockSize];
        initCiphers();

    }

    public void initCiphers() {
        try {
            // 1\. create the cipher using Bouncy Castle Provider
            encryptcipher = Cipher.getInstance("AES/CBC/PKCS5Padding", "BC");
            // 2\. create the key
            SecretKey keyValue = new SecretKeySpec(key, "AES");
            // 3\. create the IV
            AlgorithmParameterSpec IVspec = new IvParameterSpec(IV);
            // 4\. init the cipher
            encryptcipher.init(Cipher.ENCRYPT_MODE, keyValue, IVspec);
            encryptcipher.getOutputSize(8192);

            // 1 create the cipher
            decryptCipher = Cipher.getInstance("AES/CBC/PKCS5Padding", "BC");
            // 2\. the key is already created
            // 3\. the IV is already created
            // 4\. init the cipher
            decryptCipher.init(Cipher.DECRYPT_MODE, keyValue, IVspec);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public String encryptData(URL inputFileName, String outputFileName) {
        File outFilename = new File(outputFileName);
        try {
            InputStream fis;
            OutputStream fos;
            fis = new BufferedInputStream(inputFileName.openStream(), 1000);
            fos = new BufferedOutputStream(new FileOutputStream(outFilename));
            Log.i(TAG, "Output path:" + outFilename);
             int bufferLength = (inputFileName.toString().length() > 10000000
             ? 10000000
             : 1000);
            byte[] buffer = new byte[8192];
            int noBytes = 0;
            byte[] cipherBlock = new byte[encryptcipher
                    .getOutputSize(buffer.length)];

            int cipherBytes;
            long startTime = System.currentTimeMillis();
            while ((noBytes = fis.read(buffer)) != -1) {
                cipherBytes = encryptcipher.update(buffer, 0, noBytes,
                        cipherBlock);
                fos.write(cipherBlock, 0, cipherBytes);
            }
            // always call doFinal
            cipherBytes = encryptcipher.doFinal(cipherBlock, 0);
            fos.write(cipherBlock, 0, cipherBytes);
            System.out
                    .println("encryption "
                            + " took "
                            + ((System.currentTimeMillis() - startTime) / 1000.0)
                            + "s");
            // close the files
            fos.close();
            fis.close();
            Log.i("encrypt", "done");
        }

        catch (Exception ex) {
            ex.printStackTrace();
        }
        return outFilename.toString().trim();
    }

    public String decryptData(String inputFileName, String outputFileName) {

        InputStream fis;
        OutputStream fos;
        try {
            fis = new BufferedInputStream(new FileInputStream(inputFileName));
            fos = new BufferedOutputStream(new FileOutputStream(outputFileName));
            byte[] buffer = new byte[8192];
            int noBytes = 0;
            byte[] cipherBlock = new byte[decryptCipher
                    .getOutputSize(buffer.length)];
            int cipherBytes;
            long startTime = System.currentTimeMillis();
            while ((noBytes = fis.read(buffer)) != -1) {
                cipherBytes = decryptCipher.update(buffer, 0, noBytes,
                        cipherBlock);
                Log.d("BufferRead", "" + buffer);
                fos.write(cipherBlock, 0, cipherBytes);
            }
            // allways call doFinal
            cipherBytes = decryptCipher.doFinal(cipherBlock, 0);
            fos.write(cipherBlock, 0, cipherBytes);
            System.out
                    .println("decryption "
                            + " took "
                            + ((System.currentTimeMillis() - startTime) / 1000.0)
                            + "s");
            // close the files
            fos.close();
            fis.close();
            Log.i("decrypt", "done");
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return outputFileName.toString().trim();
    }
}

This is my code 
```

# c++ - 位向量和位集

> ID：13321446
> 
> 赞同：1
> 
> 时间：2012-11-10T11:02:01.170
> 
> 标签：c++, stl, bitset, bitvector

stl 的位向量和位集容器有什么区别？请解释。据我了解，bitset 是位向量概念的实现，我是对还是错？实现位向量的其他方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T11:06:44.920

`bit_vector`具有与 a 相同的界面`std::vector`，并针对空间进行了优化。它不是标准 C++ 的一部分。该[文档](http://www.sgi.com/tech/stl/bit_vector.html)声称它接近于 STL `vector<bool>`，这可能非常接近于标准 C++ `std::vector<bool>`。

[std::bitset](http://en.cppreference.com/w/cpp/utility/bitset)是固定大小的，并且具有不同的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:05:10.993

他们是不同的。A`std::bitset`具有在编译时已知的固定大小。这使得它可以非常有效地实施。一个位向量（我假设你的意思是`std::vector<bool>`）可以像任何其他的一样在大小上有所不同`std::vector`。

# c - atmel 89c2051 设置或清除 C 中的单个寄存器位

> ID：13321447
> 
> 赞同：1
> 
> 时间：2012-11-10T11:02:38.793
> 
> 标签：c, atmel

我正在编写一个 atmel 89c2051 控制器。我想根据每个单独的寄存器位的状态来制定条件，例如：

当端口 1 位 0 为 0 时做（某事）

我试过使用 while P1_0 但编译器返回一个未声明的标识符错误。我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T04:24:59.127

屏蔽您的端口变量，然后进行简单的真/假测试。例如：

```
while (PIND & (1<<PD1))
{
    // Do stuff.
} 
```

上面的代码创建了一个新的“掩码”变量，它被`1`转移到`PD1`（实际变量是`0b00000010`, 或`0x02`）的位置。`AND`然后使用读取的引脚编辑该“掩码” ：除了您要测试的位置中的位之外，一切都变成`0`（因为两个位都必须是`1`结果）。`1`结果是`0`或大于 的某个数字`0`，这将`true`在布尔测试中计算为 。

# python - Python 类丢失属性

> ID：13321448
> 
> 赞同：10
> 
> 时间：2012-11-10T11:02:49.103
> 
> 标签：python, class, pygtk

我有一个特殊的python问题。在我的 gtk python 应用程序执行过程中，我的一些类对象神秘地丢失了属性，导致我的程序的一些功能中断。

很难理解为什么会发生这种情况——我从不故意删除属性，并且有问题的类继承自我自己（而不是其他人）编写的类。

我可以通过重复执行某个操作来触发问题（例如生成对该`add_card`方法的多次调用 - 通过疯狂点击或打开文件，导致`add_card`被调用二十次左右）

我真的很茫然，我希望我有更多我认为有用的信息可以给你。

什么会导致 python 对象丢失属性？

编辑，重新。问题：

以下是与我“丢失”的两个属性相关的示例回溯：

```
Traceback (most recent call last):
  File "lib/genericlist.py", line 90, in cursor_changed
    if self.viewer:
AttributeError: 'DeckerRunnerList' object has no attribute 'viewer'

Traceback (most recent call last):
  File "lib/genericlist.py", line 100, in row_activated
    selection = self.TABLE_NAME+"&&"+text
AttributeError: 'DeckerRunnerList' object has no attribute 'TABLE_NAME' 
```

这是它们的设置位置：

```
class DeckerGenericList(object):   

    def __init__(self, database, viewer=None, deck=None):

        super(DeckerGenericList, self).__init__()

        self.database = database
        self.viewer = viewer
        self.deck = deck
        #TABLE_NAME is set in the subclass constructor 
```

这个特定的子类不称其为超类`__init__`，因此属性集在子类中重复：

```
class DeckerRunnerList(DeckerGenericList):

      def __init__(self, database, viewer=None, deck=None):

        self.database = database
        self.viewer = viewer
        self.deck = deck
        self.TABLE_NAME = "runners" 
```

DeckerGenericList 的所有其他子类都有相同的问题，它们的定义都是这样的：

```
class DeckerGearList(DeckerGenericList):

    def __init__(self, database, viewer=None, deck=None):

        self.TABLE_NAME = "gear"
        #... some other class attributes

        super(DeckerGearList, self).__init__(database, viewer=viewer, deck=deck) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:30:07.100

PyQT（因此也可能是 PyGtk 或其他框架）具有奇怪的行为，即在属性代码内/下方的某处实际引发 AttributeError 实际上会使 python 报告该对象上的被调用属性不存在。

关于为什么会这样（实际上是正确且可以理解的行为）的原因，有一个（有点官方的）故事。它与在基类上定义的 __getattr__ 有关：其工作原理是，如果在对象上调用属性导致 AttributeError，则调用 __getattr__ 方法。但是该方法不知道实际上没有找到什么“属性”。并且由于 (PyQt.QObject) __getattr__ 旨在实现“特定”属性，因此它决定引发另一个 AttributeError 提及“被调用”属性。

无论如何，可能是您从一个在某处使用 __getattr__ 的对象继承，并且您自己的属性代码确实调用了（另一个）确实不存在的属性。您可以做的检查是：

```
@property
def myproperty:
   try:
      doStuff..
   except AttributeError as e:
      print "Got ya! It is withing the attribute:", repr(e)
      raise ValueError("Got an AttributeError within my attribute!") 
```

更新/注意：此外，如果您自己在 DeckerGenericList 对象上实现 __getattr__，请出于同样的原因小心处理它！在 __getattr__ 中提高 AttributeError's 大多数时候会导致类似这样的看似奇怪的行为。请注意，没有简单的解决方法：“真实”的 AttributeError 只携带一个字符串消息（而不是具体的实际属性名称），但更重要的是：__getattr__ 函数一开始就看不到原始的 AttributeError。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:12:54.657

好吧，您可以使用 property 和 inspect 模块来跟踪对属性的更改，如下所示：

```
import sys
import inspect

def from_where_called():
    info = inspect.getframeinfo(sys._getframe(2))
    code = info.code_context[0] if info.code_context else ''
    return '%s:%s %s' % (info.filename, info.lineno, code)

def add_watched_attribute(name):  
    def attr_watch_get(self):
        value = getattr(self, '_' + name, 'unset')
        print from_where_called(), name, 'is', value
        return value

    def attr_watch_set(self, value):
        print from_where_called(), name, 'set to', value
        setattr(self, '_' + name, value)

    def attr_watch_delete(self):
        print from_where_called(), name, 'deleted'
        delattr(self,'_' + name)

    sys._getframe(1).f_locals[name] = property(
        attr_watch_get, attr_watch_set, attr_watch_delete
    )

class InspectedClass(object):
    add_watched_attribute('victim')

    def __init__(self):
        self.victim = 2

    def kill(self):
        del self.victim

x = InspectedClass()
x.victim = 'asdf'
x.kill() 
```

或者您可以使用此答案中的 sys.settrace：[https ://stackoverflow.com/a/13404866/816449](https://stackoverflow.com/a/13404866/816449)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:31:53.070

我认为这是一个垃圾收集器错误。我有一个类似的问题，我想我已经把它缩小到了 GC。

尝试`extra_references = []`在包含丢失属性的类的模块顶部添加一个列表。在`__init__`类的方法中，添加以下代码：

```
global extra_references
extra_references.append(self) 
```

这将确保始终存在对 GObject 之外的对象的引用。

如果问题消失了，那么 Python 的垃圾收集器在你完成它之前就吃掉了你的对象。闻起来很像这个错误（据说已经修复）：[https ://bugzilla.gnome.org/show_bug.cgi?id=92955](https://bugzilla.gnome.org/show_bug.cgi?id=92955)

# css - 如何设置 Facebook 评论插件的样式，例如“真实”的 Facebook 评论？

> ID：13321449
> 
> 赞同：0
> 
> 时间：2012-11-10T11:02:57.930
> 
> 标签：css, facebook, facebook-apps, facebook-comments

我正在尝试编写一个支持看起来像本机 facebook 评论的评论的 Facebook 应用程序。

评论插件不使用与整个 Facebook 站点相同的样式。

设置自定义评论样式表已被弃用（2012 年 6 月），取而代之的是他们的新插件系统，该系统将所有内容都放在 iframe 中。

我应该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:54:15.527

第一：如果您想在不使用社交插件的情况下复制某些内容，请注意 facebook 的设计指南：

> [https://www.facebook.com/brandpermissions/index.php](https://www.facebook.com/brandpermissions/index.php)

话虽如此，您已经回答了您的问题。不推荐使用自定义样式表，因此您只能更改评论插件的颜色方案（深色/浅色）。让它看起来像 facebook 的唯一方法是自己编程。不幸的是，这将永远不会相同，因为社交插件甚至不需要用户授权任何应用程序进行评论......

# javascript - 需要弄清楚这个赞成/反对的边缘情况

> ID：13321452
> 
> 赞同：1
> 
> 时间：2012-11-10T11:03:04.743
> 
> 标签：javascript, jquery

我一直在研究这个赞成/反对票问题，并且一直遇到 3 个问题。

代码：

```
$(function() {

$('button').click(function(e){

    e.preventDefault();

    var $this = $(this),
        $container = $(this).parent(),
        $buttons = $container.children('button'),
        $count = $container.children('.count'),
        was = $container.data('was');

    // 0 case
    if ($this.is('.up')) {
        if (was === 0 || $this.is('.active')) {
            vote = 0;
        } else {
            vote = 1;
        }
    } else {
        vote = -1;
    }

    if ( was + vote < 0 ) {
        $this.toggleClass('active');
        return false;
    }

    if( $this.hasClass('active') ){
        $this.toggleClass('active');
        $count.text( was );
    } else {
        if( $buttons.filter('.active').length ){
            $buttons.toggleClass('active');
        } else {
            $this.toggleClass('active');
        }
        $count.text( was + vote );
    }

});

}); 
```

现场演示：[jsfiddle](http://jsfiddle.net/TV7G4/3/) ​</p>

我在演示中标记了每个案例（总共 6 个案例）

问题：

*   案例#1：如果上面有一个活动类并且它最初是（data-was）0，那么点击向下应该添加一个活动类向下将其变为红色并保持计数为0。

*   案例 #2：如果活动班级在向下按钮上，并且原始分数（数据是）为 1，那么活动班级应该继续向上，并且计数应该达到 3。

*   案例#3：如果按钮上有一个向上类并且原始分数是（data-was）1，那么单击向下应该使其变为0并将一个活动类放在向下，单击向上应该使其变为0从 up 中删除活动类，然后在向下单击活动类的情况下单击应该将其返回到 1。

案例 #4 - #6 都表现正常，所以如果不清楚问题出在哪里，它们都应该表现得如此，但***永远不要***低于 0。

这变得有点复杂，所以我正在辩论只是显示来自 ajax 请求的实际返回分数，但我不希望点击之间有任何延迟，所以这就是我以这种方式接近它的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:22:43.703

我创建了一个演示，将逻辑基本上简化为 2 个步骤。第一步是在其他按钮处于活动状态时进行调整，然后对当前按钮进行调整。

最重要的变化是忘记“曾经”，只使用“现在”并存储任何更改。我想您会看到存储当前值并使用它使代码更易于阅读和调试。

另外，我不会尝试为当前`vote`变量分配实际值，而是会注意到我只是使用加/减，当您遇到许多逻辑分支​​（很多`if`）时，它会变得容易得多。这也允许在代码中分离一些条件......例如，如果需要，首先进行重置，然后处理当前按钮。

演示：http: [//jsfiddle.net/TV7G4/6/](http://jsfiddle.net/TV7G4/6/)

```
$('button').click(function(e) {
    e.preventDefault();
    var $this = $(this),
        $container = $(this).parent(),
        $count = $container.find('.count'),
        curr_votes = $container.data('vote_count'),
        is_upVote = $this.hasClass('up'),
        this_active = $this.hasClass('active'),
        $otherButton = $this.siblings('.vote'),
        vote_change = 0;

    /* reset vote_count if other already active*/
    if ($otherButton.is('.active')) {
        $otherButton.removeClass('active');
        is_upVote ? vote_change++ : vote_change--;

    }

    /* adjust vote_count for this action */
    if (this_active) {
        is_upVote ? vote_change-- : vote_change++;
    } else {
        is_upVote ? vote_change++ : vote_change--;
    }

    /* always toggle class on curent button*/
    $this.toggleClass('active');

    /* update vote count */
    curr_votes += vote_change;
    curr_votes = curr_votes < 0 ? 0 : curr_votes;

    $count.text(curr_votes);
    /* store the current value*/
    $container.data('vote_count', curr_votes);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:04:38.270

这是你的[小提琴更新](http://jsfiddle.net/TV7G4/7/)。我有我认为你想要的功能。我没有使用该`data`属性

# android - 在 Eclipse 上加载 ActionBarSherlocks 的演示时出错

> ID：13321455
> 
> 赞同：0
> 
> 时间：2012-11-10T11:03:36.030
> 
> 标签：android, actionbarsherlock, android-support-library, android-compatibility, fragmenttransaction

我试图在 ActionBarSherlock 上加载演示，但使用`FragmentTransaction`. 活动是`FeatureToggles`和`TabNavigation`。我也遇到了一个错误，`TabNavigationCollapsed`因为它正在扩展`TabNavigation`which uses `FragmentTransaction`.

错误是：

```
The import android.support.v4.app.FragmentTransaction cannot be resolved 
```

我的错误可能是什么？我的项目构建目标是 Android 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:12:23.753

Build Path 中是否添加了 Android 支持库？在项目的“lib”文件夹中应该是文件 android-support-v4.jar。

如果没有，请先通过 SDK Manager 下载

# android - 同一对象数组中的数组内的json数组？

> ID：13321457
> 
> 赞同：1
> 
> 时间：2012-11-10T11:03:45.223
> 
> 标签：android, json

我创建了一个带有 json 解析的小应用程序，因为我正在访问 json 数组，但是在这个 jsonarray 中我想要电话号码标题和地址行但是如何访问电话号码我不明白所以如何访问它

这是json格式

```
> {
    "responseData": {
        "results": [
            {
              "title": "Pakvan Dining Hall",
              "phoneNumbers": [
                    {
                        "type": "",
                        "number": "079 26636473"
                    },
                    {
                        "type": "Mobile",
                        "number": "09427608429"
                    }
                ],
                 "addressLines": [
                    "Vadilal Sarabhai Hospital",
                    "Ahmedabad, Gujarat 380006, India"
                ]
            },
            {
              "title": " Dining Hall",
              "phoneNumbers": [
                    {
                        "type": "",
                        "number": "079 26645473"
                    },
                    {
                        "type": "Mobile",
                        "number": "09427608429"
                    },
                    {
                        "type": "",
                        "number": "079 26645473"
                    },
                    {
                        "type": "Mobile",
                        "number": "09427608429"
                    }
                ],
                 "addressLines": [
                    " Sarabhai Hospital",
                    "Ahmedabad, Gujarat 380006, India"
                ]
            },
} 
```

ArrayList>contactList = new ArrayList>();

```
 JsonParser jparser= new JsonParser();
    String jsonstringfunction =jparser.jsonstringfunction(url);

    Log.e("Jsonstringfunction","n"+jsonstringfunction);

    try
    {   
        JSONObject jsonObject2 = new JSONObject(jsonstringfunction);

        JSONObject response = jsonObject2.getJSONObject(TAG_RESPONSE);
        JSONArray jresults=response.getJSONArray(TAG_RESULTS);
        Log.e("check","3333"+jresults);

        for (int i = 0; i < jresults.length(); i++)
        {
            Log.e("check","4444"+jresults.length());
            String titlenoformating = jresults.getJSONObject(i).get(TAG_TITLENOFORMATING).toString();

            Log.e("Title",""+titlenoformating);

            HashMap<String, String> map = new HashMap<String, String>();
            map.put(TAG_TITLENOFORMATING,titlenoformating);

            JSONArray jaddressline=jresults.getJSONObject(i).getJSONArray(TAG_ADDRESSLINES);

            Log.e("addressline","addressline"+jaddressline);
            String addressline2="";
            for(int j=0;j<jaddressline.length();j++)
            {   
                addressline2=addressline2+jaddressline.getString(j).toString();

                Log.e("addressline","jaddressline"+addressline2);
            }
            // adding each child node to HashMap key => value
            map.put(TAG_ADDRESSLINES,addressline2); 

            JSONArray jphonenumbers=jresults.getJSONObject(i).getJSONArray(TAG_PHONENUMBERS);

            for(int k=0;k<jphonenumbers.length();k++)
            {

                Log.e("Phonenumbers","phonenumbers"+jphonenumbers);

             JSONArray jtype=jphonenumbers.getJSONObject(k).getJSONArray(TAG_TYPE);

                Log.e("JsonPhone","type"+jtype);
                for(int m=0;m<jtype.length();m++)
                {                   

                    String type=jtype.getString(m).toString();

                    Log.e("type","type"+type);
                }       

            }

            contactList.add(map);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:33:46.223

```
String[] title,number,address;
JSONObject jobject = new JSONObject(your_result_object);
JSONObject json=jobject;
JSONObject jresponse = json.getJSONObject("responseData");
JSONArray jresult = jresponse.getJSONArray("results");

title = new String[jresult.length()];

for(int i=0;i<jresult.length();i++){
JSONObject obj = jresult.getJSONObject(i);
title[i] = obj.getString("title");

JSONArray jphonenumbers = obj.getJSONArray("phoneNumbers");
number = new String[jphonenumbers.length()];

for(int j=0;j<jphonenumbers.length();j++){
JSONObject obj2 = jphonenumbers.getJSONObject(j);
number[j] = obj2.getString("number");
}

JSONArray jaddress = obj.getJSONArray("addressLines");
address = new String[jaddress.length()];
for(int k=0;k<jaddress.length();k++){
address[k] = jaddress.getString(k);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:53:19.443

电话号码数组应该可以在这里访问：

```
responseData.results['phonenumber'] 
```

# git - Git结帐双破折号的含义

> ID：13321458
> 
> 赞同：307
> 
> 时间：2012-11-10T11:04:14.643
> 
> 标签：git, git-checkout

这个git命令中文件名前的双破折号是什么意思？

```
git checkout --ours -- path/to/file.txt
git checkout --theirs -- path/to/file.txt 
```

它们是强制性的吗？是否相当于

```
git checkout --ours path/to/file.txt
git checkout --theirs path/to/file.txt 
```

* * *

## 回答 #1

> 赞同：427
> 
> 时间：2012-11-10T11:09:27.147

假设我的 Git 存储库中有一个名为的文件`path/to/file.txt`，并且我想恢复对它的更改。

```
git checkout path/to/file.txt 
```

现在假设文件名为`master`...

```
git checkout master 
```

哎呀！而是改变了分支。将`--`要检出的树与要检出的文件分开。

```
git checkout -- master 
```

如果一些怪胎向我们的存储库添加了一个名为的文件，它也会对我们有所帮助`-f`：

```
git checkout -f      # wrong
git checkout -- -f   # right 
```

这记录在[git-checkout: Argument Disambiguation](https://git-scm.com/docs/git-checkout#_argument_disambiguation)中。

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2015-03-05T17:04:00.130

双破折号“--”表示“命令行标志结束”，即它告诉前面的命令不要尝试解析命令行选项之后的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T17:07:39.013

`--`请注意，如果您的参数包含通配符 ( `*`) ，则您不需要，因为 Git 2.5 (Q2 2015 )

帮助 " `git <cmd> <revs> <pathspec>`" 命令行约定捕获错误输入路径的启发式方法是确保命令行后面部分中的所有非 rev 参数都是工作树中文件的名称，但这意味着 " [`git grep $str -- \*.c`](https://git-scm.com/docs/git-grep)" 必须始终是用“”消除歧义`--`，因为没有人会创建一个名称字面意思是星号点的文件。

Git 2.5**放弃了使用通配符字符串声明用户可能打算给我们一个 pathspec 的启发式方法**。

```
git checkout 'a*'
# same as
git checkout -- 'a*' 
```

请参阅[Duy Nguyen (](https://github.com/nguyenlocduy) [)的](https://github.com/nguyenlocduy)[提交 28fcc0b](https://github.com/git/git/commit/28fcc0b71a6543fe50576efc1ac8fb4e4555b6a6)（2015 年 5 月 2 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 949d167](https://github.com/git/git/commit/949d16795c55ae4712aaec847d55bd2d7d050c84))^(中，2015 年 5 月 19 日）)[`nguyenlocduy`](https://github.com/nguyenlocduy)
^([`gitster`](https://github.com/gitster))

> ## [`pathspec`](https://github.com/git/git/commit/28fcc0b71a6543fe50576efc1ac8fb4e4555b6a6): 避免`--`使用通配符时需要“”
> 
> 当`--`命令行中缺少“”并且命令可以同时使用 revs 和路径时，想法是如果一个参数可以被视为扩展的 SHA-1 和路径，那么“ `--`”是必需的，否则 git 拒绝继续。
> 它目前实现为：
> 
> *   (1) 如果参数是 rev，那么它不能存在于工作树中
> *   (2) 否则，它必须存在于工作树中
> *   (3) 否则，“ `--`”是必需的。
> 
> 这些规则适用于文字路径，但是当涉及到非文字路径规范时，它几乎总是要求用户添加“ `--`”，因为它失败了（2）并且（1）真的很少遇到（以“ `*.c`”为例，（1）如果有一个名为“ `*.c`”的引用，则满足。
> 
> 此补丁通过考虑任何有效的 ( `*`) 通配符路径规范“存在于工作树中”来稍微修改规则。
> 规则变为：
> 
> *   (1) 如果 arg 是 rev，那么它必须存在于工作树中或者不是有效的通配符路径规范。
> *   (2) 否则，它要么存在于工作树中，要么是通配符路径规范
> *   (3) 否则，“ `--`”是必需的。
> 
> 使用新规则，`--`当涉及通配符路径规范时，大多数时候不需要“”。

* * *

在 Git 2.26（2020 年第一季度）中，对区分修订和路径规范的消歧逻辑进行了调整，以便反斜杠转义的全局特殊字符不计入“通配符是路径规范”规则中。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 39e21c6](https://github.com/git/git/commit/39e21c6ef5221a1dcb8a241f60d7e91d59bd6627)（2020 年 1 月 25 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 341f8a6](https://github.com/git/git/commit/341f8a6476d1d25c3906696489d87fc381739b59))^(中，2020 年 2 月 12 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## [`verify_filename()`](https://github.com/git/git/commit/39e21c6ef5221a1dcb8a241f60d7e91d59bd6627)：处理“通配符是路径规范”规则中的反斜杠
> 
> ^(报告人：David Burström)
> ^(签字人：Jeff King)
> 
> 提交[28fcc0b71a](https://github.com/git/git/commit/28fcc0b71a6543fe50576efc1ac8fb4e4555b6a6) ( `pathspec`: 避免`--`使用通配符时需要 " "，2015-05-02) 允许：
> 
> ```
> git rev-parse '*.c' 
> ```
> 
> 没有双破折号。
> 
> 但它用于检查通配符的规则实际上会查找任何特殊的 glob。
> 这过于自由，因为这意味着实际上不进行任何通配符匹配的模式，例如“ `a\b`”，将被视为路径规范。
> 
> 如果您在磁盘上确实有这样的文件，那大概就是您想要的。
> 但如果你不这样做，结果会令人困惑：与其说“ `there's no such path a\b`”，我们会悄悄地接受它作为一个路径规范，它很可能什么都不匹配（或者至少不是你想要的）。
> 同样，寻找路径“ `a\*b`”根本不会扩大搜索范围；它只会找到一个条目“ `a*b`”。
> 
> 此提交将规则切换为仅在 glob 元字符扩展搜索时触发，这意味着这两种情况现在都将报告错误（`--`当然，您仍然可以使用“”来消除歧义；我们只是收紧了 DWIM 启发式）。

（[DWIM：按我的意思做](https://en.wikipedia.org/wiki/DWIM)）

> 请注意，我们根本没有测试[28fcc0b71a](https://github.com/git/git/commit/28fcc0b71a6543fe50576efc1ac8fb4e4555b6a6)中的原始功能。
> 所以这个补丁不仅测试了这些极端情况，还增加了对现有行为的回归测试。

# javascript - 按顺序调用 javascript 方法

> ID：13321460
> 
> 赞同：-4
> 
> 时间：2012-11-10T11:04:16.187
> 
> 标签：javascript, function

我在 JavaScript 中有 3 个方法，我想一个接一个地调用，也就是说按顺序调用。

```
recuperer_from_proposer_liste_idchamp();
nombre_etape(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:07:17.633

除非有任何异步调用（例如 AJAX 请求），否则这些方法将按照您键入它们的顺序运行。

JavaScript 解释器逐行执行命令。

如果您有异步调用，则需要使用回调函数处理这些调用。如果你不明白回调是如何工作的，[网上有很多指南](http://recurial.com/programming/understanding-callback-functions-in-javascript/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:13:57.153

如果你确实在做一些异步的事情，你必须找出方法何时完成它们的工作。所以调用方法1：

```
method1 (); 
```

然后 method1 需要通知我们它的操作结束，为此它必须调用一个名为 method1_finished 的方法，然后调用 method2：

```
method1_finished () {
    method2 ();
} 
```

方法3也是如此：

```
method2_finished () {
    method3 ();
} 
```

根据代码的来源，您通常可以直接在需要回调的地方定义匿名函数：

```
xmlhttp.onreadystatechange = function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
        // call succeeded, now go on to the next step
  }
}
xmlhttp.open("GET","someurl.php",true);
xmlhttp.send(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:20:22.903

您可能必须将逻辑更改为这样

```
function getRowsFromDatabase(callback) {
    // do your fancy database connection
    // and data retrieval here

    // when you're ready, call the registered callback

    if(typeof(callback) == "function") {
        callback(rowsRetrieved);
    }
}

function displayRowsOnScreen() {
    getRowsFromDatabase(function(rows){
        // do the dom magic here
    })
} 
```

# oracle - 如何使用 purify 从工具化中排除共享库？

> ID：13321472
> 
> 赞同：2
> 
> 时间：2012-11-10T11:06:19.343
> 
> 标签：oracle, solaris, purify, rational-purify

工具化与 Oracle 的 libclntsh 链接的 C 代码会在运行生成的程序时导致崩溃。程序以“非法指令”信号终止。

至少在某些版本的 Oracle 11g 和 Purify 中存在该错误。

这是一个[已知的错误，IBM 已发布了解决方法](http://www-01.ibm.com/support/docview.wss?uid=swg21319640)。不幸的是，解决方法对我的工作环境没有帮助。

我在用

```
$ purify -version
Version 7.0.1.0-002.U 120210 Solaris SPARC 
```

在 Sun SPARC 硬件上的 Solaris 10 下。我用 Sun CC 11 编译 C 源代码。

就像解决方法中描述的那样，我尝试将 libclntsh 从工具化中排除，如下所示：

```
$ purify -verbose -cache-dir=purify_cache -always-use-cache-dir \
     -selective -exclude-libs=/oracle/app/rdbms/ora11203/lib/libclntsh.so.11.1 \
     cc -o myprogram ... -lclntsh 
```

这不起作用。Purify 只是说它正在检测 libclntsh.so.11.1，当然我得到了一个相应的`_pp3_`文件而不是一个文件`_pp0_`。

我尝试了排除模式的变体：

```
-exclude-libs=libclntsh.so.11.1
-exclude-libs=clntsh.so 
```

没有任何成功。

能够排除 libclntsh 也将大大缩短工具化时间。在这台 SPARC 机器上，工具化 libclntsh.so 需要几分钟时间。

看看解决方法，它只提到了 HPUX - 但我希望它也适用于 Solaris ......不知何故。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:43:16.617

对于该版本的 Purify（Solaris SPARC 上的 7.0.1-ish），以下选项语法有效：

```
$ purify -cache-dir=purify_cache -always-use-cache-dir \
    -enable-exclude -exclude-libs=libclntsh.so.11.1 cc ... 
```

Purify 然后仍然打印一些关于工具化 libclntsh.so.11.1 的内容，但它完成得更快并创建了一个`_p0_`文件：

```
$ find purify_cache -name '*_pp0_*'
purify_cache/.../lib/libclntsh.so.11.1_pure_pp0_pc0_0_0_1009171813_510_64 
```

优点：

*   如果您只需要工具化代码的其他部分，排除会产生更快的工具化时间
*   使用 Purify 和 Oracle 库解决非法指令崩溃问题

坏处：

*   不再检测到排除库中的内存错误（因为这些库函数的输入数据错误）。

Purify`:`在提供给`-exclude-libs`选项的值中用作分隔符，即您可以指定多个库进行排除（例如`-exclude-libs=foo.so:bar.so`）。

# c - 查询结构的多维映射的设计，该结构的数据隐藏在 C 中的某些源代码文件中

> ID：13321482
> 
> 赞同：3
> 
> 时间：2012-11-10T11:07:41.923
> 
> 标签：c, arrays, map, structure, private

我正在开发一个 2D 瓦片地图游戏，其中瓦片由“对象”源代码文件中的结构表示。我想通过使用地图的多维数组在单独的源代码文件中表示世界地图。

然而，为了隐藏对象的实现细节，最好让地图源代码对对象结构的细节一无所知（除了请求大小），并调用对象源代码文件中的特定函数来做任何内部对象处理。

与使地图源代码包含对象结构或直接从地图代码中操作对象相比，这是一种更好的方法吗？

您认为 C 中处理这种设计的最佳方式是什么，以及为了更好的代码而将实现细节保密的问题？

谢谢你，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:59:11.357

通常，在 C 中封装代码的最佳方式是使用函数而不是直接访问数据结构。

例如，让我们考虑一个“人”数据结构。而不是在您的标题中公开它：

```
typedef struct {
  int age;
  int weight_lbs;
} person; 
```

而是在您的公共标头中公开以下内容：

```
typedef void *person;

extern person person_create();
extern void person_destroy(person p);
extern int person_get_age(person p);
extern void person_set_age(person p, int age);
extern int person_get_weight(person p);
extern void person_set_weight(person p, int weight_lbs); 
```

然后在您的 .c 或私有标头中定义实际的 person 结构。person_create() 和 person_destroy() 很重要，因为您必须提供一种方法来创建一个人，因为底层结构是隐藏的。

这提供了以下好处：

*   让您最大程度地控制客户如何访问您的数据
*   允许您在不破坏二进制兼容性的情况下修改数据结构
*   允许您对公开的函数使用符号版本控制

主要缺点是它更冗长并且性能损失最小。如果您有更复杂的内存管理问题（想要使用块池等），这也可能会更加困难，但仍然可以完成。

# scala - Scala 是否有少量的底层语法特性？

> ID：13321485
> 
> 赞同：10
> 
> 时间：2012-11-10T11:08:17.413
> 
> 标签：scala

Scala 是一种有趣的语言，它声称简洁、可扩展（通过在库而不是编译器中指定许多特性）并支持 DSL。在尝试实现这一点时，它有很多运算符以及编译器调整（例如，支持中缀运算符，例如：_* 以展平序列）。

我发现许多运算符（“Scala 编程”索引中的 2½ 页）和编译器调整令人困惑。公平地说，许多运算符都是从 C 等人借来的*传统算术/布尔运算符）。*

有人告诉我，这有一些基本的句法规则作为基础，我认为如果我知道这些，就会减轻我的认知负担。

是否有一些规则（如果有，它们是什么）还是我注定要学习库中的许多“运算符”方法和隐式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T14:04:11.140

有两种方法可以理解您关于运营商的问题：

1.  Scala 编译器如何处理运算符的规则是什么？（语言规则）
2.  管理库中如何定义运算符的规则是什么？（运营商定义）

## 语言规则

确实有规律。我会让你确定你是否认为它们“很少”。与 Scala 的大部分内容一样，您可以在[Language Reference](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 6.12 节中找到它们。

最重要的位：

*   唯一接受的前缀*运算*符是`+`,`-`和.`!``~`

*   任何不带参数的方法都可以用作*后缀*运算符。

*   任何采用一个参数的方法都可以用作中*缀*运算符。然而，这些操作的优先级受制于特定规则，可能主要是为了使算术和其他表达式被视为人们所期望的。优先级由运算符/方法名称的第一个字符确定，并且与您对 C 或 Java 的期望相匹配。

*   所有中缀运算符都是左结合运算符，以 . 结尾的运算符除外`:`。典型的例子包括`::`和`+:`。

所以基本上有四个规则。我鼓励您阅读规范以获得更多见解。

## 运算符定义

运算符定义的选择取决于库设计者。例如，Scala 集合库使用一组相对较小且一致的运算符（`++`、`--`、`**`、`+=`、`-=`、`++=`、`--=`、`+:`等）。解析器组合器带有一个更奇特的集合，一些库起初可能完全无法理解，因为它们的自定义运算符定义（想到 sbt 或 Lift，尽管这只是我个人的看法）。

这已被认为是潜在问题的根源，Scala 风格指南对符号方法名称（自定义运算符）有[这样](http://docs.scala-lang.org/style/naming-conventions.html#symbolic_method_names)的说法：

> 避免！尽管 Scala 在某种程度上促进了 API 设计的这一领域，但不应轻易定义具有符号名称的方法，特别是当符号本身是非标准的时（例如，`>>#>>`）。作为一般规则，符号方法名称有两个有效的用例：
> 
> *   特定领域的语言（例如`actor1 ! Msg`）
> *   逻辑数学运算（例如`a + b`或`c :: d`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:35:05.103

Scala 对操作符没有特殊处理

摘自《Scala 2ed 编程》一书

> **任何方法都可以是运算符**
> 
> 在 Scala 中，运算符不是特殊的语言语法：任何方法都可以是运算符。使方法成为运算符的原因在于您如何使用它。当你写“s.indexOf('o')”时，indexOf 不是一个操作符。但是当你写“ s indexOf 'o' ”时， indexOf 是一个运算符，因为你是在运算符符号中使用它。

我在您所指的索引中找不到 2 1/2 页。

Scala 运算符始终可用作在某些对象上定义的方法。这也与任何值在 scala 中表示为对象的事实一致，这与 Java 对原始类型的特殊遗留处理不同。

scala 底层实现可以利用原语在字节码级别提高性能，但这对最终用户是透明的。

**运营商**

所以这里的规则很简单：每个运算符实际上都是在某种类型上定义的方法。运算符中缀符号只是一个可读性问题，例如

```
val sum = 1 + 2 
```

读起来比

```
val sum = 1.+(2) 
```

这种符号也是构建具有“自然感觉”的 dsl 的基础。测试库[ScalaSpecs](http://code.google.com/p/specs/)清楚地证明了这一点。

**特殊的编译器规则**

正如您所说，有限数量的“编译器调整”可用于上述目的，以允许更清晰和更易于理解的代码。

[可以在此处](https://stackoverflow.com/questions/1483212/list-of-scalas-magic-functions)找到这些“调整”的相关摘要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T19:02:48.193

所有信息都可以在[stackoverflow](https://stackoverflow.com/tags/scala/info)和[spec](http://www.scala-lang.org/docu/files/ScalaReference.pdf)中找到。

这是我关于从哪里开始的建议：

1.  了解如何将标识符连续解析为操作数和运算符。请参阅我的回答[何时在 Scala 中缀表示法中使用括号来](https://stackoverflow.com/questions/5592642/when-to-use-parenthesis-in-scala-infix-notation/5597154#5597154)讨论此主题。
2.  记住*足够*多的运算符优先级[列表](https://stackoverflow.com/questions/7618923/actual-precedence-for-infix-operators-in-scala)。就个人而言，我只记得算术`+`, `-`, `*`,`/`的那些字母的优先级最低，而奇怪的 unicode 字母的优先级最高。对于其余部分，我添加括号或只是猜测优先级将按照 DSL 设计者的意图或在 Java 中的方式“解决”。
3.  学习列表的`x :: xs`and`xs ::: ys`运算符，因为它们非常流行并且与右侧相关联，因为它们以 . 结尾`:`。
4.  Optionally, if you are curious, have a cursory look at the section *6.12 Prefix, Infix, and Postfix Operations* of the spec so that you'll know in some corner of your brain that there are specifics with respect with operator having `=` and prefix operators.

Finally, one last word of advice. Do not try to learn all operators, do not assume you should know all operator meanings to use the language effectively. That is unless you have learned other languages by reading and remembering the complete API.

# javascript - 创建 DIV 元素并添加 HTML 内容

> ID：13321488
> 
> 赞同：-1
> 
> 时间：2012-11-10T11:08:47.857
> 
> 标签：javascript, jquery

我对jquery一无所知。有人可以指导我下面的代码做什么。我用谷歌搜索但没有找到结果。我想在类为“p-notification”的 div 中添加一些 HTML 内容。这该怎么做？

```
 this.notification = $('<div/>', {
            'class': 'p-notification'
 });
 this.content = $('<div/>', {
        'class': $elem.attr("hasFooter") === "true" ? 'p-content with-p-footer' : 'well',
        'style': $elem.attr("paddless") === "true" ? 'padding:0;' : '',     
        'text': 'Loading'
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:11:13.100

以下部分将`notification`范围上的属性添加或设置为新创建`div`的具有 class 的元素`p-notification`：

```
 this.notification = $('<div/>', {
            'class': 'p-notification'
 }); 
```

下一部分将`content`范围上的属性添加或设置为新创建的`div`元素，其中预设了几个属性：`class`、`style`和`text`：

```
 this.content = $('<div/>', {
        'class': $elem.attr("hasFooter") === "true" ? 'p-content with-p-footer' : 'well',
        'style': $elem.attr("paddless") === "true" ? 'padding:0;' : '',     
        'text': 'Loading'
 }); 
```

这本身不会对 DOM 产生净影响，因为您已经创建了元素但没有将它们插入到文档中。您可以使用jQuery 提供的[几种方法](http://api.jquery.com/category/manipulation/dom-insertion-inside/)之一插入它们，例如`append`：

```
$('#somediv').append(this.content);//adds the div that was created to an element with id somediv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:11:39.843

您可以这样做来添加内容：

```
$('.p-notification').append('<div>Hey</div>'); 
```

或者这个来替换内容：

```
$('.p-notification').html('<div>Hey</div>'); 
```

# oracle - 将类型创建为表时出现 PLS 错误

> ID：13321490
> 
> 赞同：1
> 
> 时间：2012-11-10T11:09:24.373
> 
> 标签：oracle, oracle11g

我正在以这种方式创建类型：

```
CREATE OR REPLACE TYPE t_type1 AS OBJECT
(
  -- fields
);

CREATE OR REPLACE TYPE t_user AS OBJECT
(
  -- fields  
) NOT FINAL;

CREATE OR REPLACE TYPE t_type2 AS TABLE OF t_type1;

CREATE OR REPLACE TYPE t_superuser UNDER t_user
(
  -- fields
  field t_type2
); 
```

执行“CREATE OR REPLACE TYPE t_type2 AS TABLE OF t_type1;”时出现错误 - 它返回语法错误。因此我无法完成最后一条语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T11:18:30.443

这个结构`CREATE OR REPLACE TYPE othertype ( field typetable )`在语义上是不正确的。你创建你的第一个类型如下：

```
SQL>  CREATE OR REPLACE TYPE typetable AS TABLE OF number; -- for example 
  2  /

Type created 
```

第二个如下：

```
SQL> CREATE OR REPLACE TYPE othertype as table of typetable;
  2  /

Type created 
```

或者，如果您想创建一个对象类型：

```
SQL> create or replace type othertype as object
  2  (
  3    field typetable
  4  )
  5  /

Type created 
```

# java - 从没有 storepass 的 Java Key Store 导出没有 keypass 的私钥

> ID：13321492
> 
> 赞同：3
> 
> 时间：2012-11-10T11:09:41.390
> 
> 标签：java, keystore, jks

我有一个**没有 storepass 的 JKS 密钥库**，其中包含一个**没有 keypass 的私钥**。

*   我不能使用这个商店和这个密钥来使用例如*交互*签名`jarsigner`（它不允许空的keypass），
*   并且所有*自动化*都因要求存储通行证或密钥通行证或两者兼而有之而失败。

**但是私钥*在*密钥库中。**

我所有尝试提取密钥的尝试`keytool`都失败了，所有尝试使用密码保护密钥或密钥库的尝试也都失败了，这都是由于不通行证。GUI 和其他操作密钥库的工具也是如此。我*猜*这是因为 storepassless 商店中的 keypassless 密钥不再受支持，或者可能从来没有。

但我猜在`java.security.KeyStore`命名空间或其他地方有代码可以让我使用 Java 代码导出私钥。有谁确切知道，如果是这样，可以指出我正确的方向，因为我对此的经验为零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:13:40.107

`KeyStore`您可以在此处找到一些用于导出私钥的Java 代码[。](https://stackoverflow.com/a/150195/3474)

当您说“没有”密码时，不清楚您的意思。JKS 密钥库需要密钥库密码以及每个密钥和私钥条目的密码。但是，此密码可以是空字符串。如果这就是您的意思，请`new char[0]`用作密码，如下所示：

```
KeyStore keys = KeyStore.getInstance("JKS");
 /* You don't actually need the password to open the store. */
try (FileInputStream is = new FileInputStream("identity.jks")) {
  keys.load(is, null);
}
char[] password = new char[0];
/* Continue with example from linked answer. */
... 
```

如果不为这些指定参数，命令行工具将无法工作，但是您是否尝试过指定空字符串？即，`-storepass ""`？您还可以更改商店本身的密码或单个密钥条目，以便密码不再为空并且工具不会抱怨。

# node.js - 用于 windows 的 node-opencv

> ID：13321496
> 
> 赞同：0
> 
> 时间：2012-11-10T11:10:25.460
> 
> 标签：node.js, opencv

我正在尝试在 windows7 中安装 node-opencv 或 opencv-node 作为节点模块。可以从命令提示符访问 node 和 node-gyp。设置了 Python 和 env 变量。我相信 openCV 至少安装到拥有预建库的程度。但是对于 node-opencv 和 opencv-node 我都得到了同样的错误。

```
gyp info it worked if it ends with ok
gyp info using node-gyp@0.7.3
gyp info using node@0.8.9 | win32 | ia32
gyp ERR! configure error
gyp ERR! stack Error: Command failed:   File "<string>", line 1
gyp ERR! stack     import platform; print platform.python_version();
gyp ERR! stack                                   ^
gyp ERR! stack SyntaxError: invalid syntax
gyp ERR! stack
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:540:15)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at maybeClose (child_process.js:638:16)
gyp ERR! stack     at Process._handle.onexit (child_process.js:680:5)
gyp ERR! System Windows_NT 6.1.7600
gyp ERR! command "node" "C:\\Users\\Chris\\AppData\\Roaming\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "configure"
"build"
gyp ERR! cwd C:\wamp\www\serv\opencv-node
gyp ERR! node -v v0.8.9
gyp ERR! node-gyp -v v0.7.3
gyp ERR! not ok 
```

日志文件说的几乎相同，任何帮助表示赞赏！

- 更新，安装 python 2.7.3 后，我现在收到此错误：

```
C:\Users\Chris\AppData\Roaming\npm\node_modules\opencv-node>node "C:\Program Fil
es (x86)\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\b
in\node-gyp.js" configure build
gyp ERR! configure error
gyp ERR! stack Error: Command failed: CreateProcessW: The system cannot find the
 file specified.
gyp ERR! stack
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:540:15)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at maybeClose (child_process.js:638:16)
gyp ERR! stack     at Socket.ChildProcess.spawn.stdin (child_process.js:815:11)
gyp ERR! stack     at Socket.EventEmitter.emit (events.js:88:17)
gyp ERR! stack     at Socket._destroy.destroyed (net.js:357:10)
gyp ERR! stack     at process.startup.processNextTick.process._tickCallback (nod
e.js:244:9)
gyp ERR! System Windows_NT 6.1.7600
gyp ERR! command "node" "C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\nod
e_modules\\node-gyp\\bin\\node-gyp.js" "configure" "build"
gyp ERR! cwd C:\Users\Chris\AppData\Roaming\npm\node_modules\opencv-node
gyp ERR! node -v v0.8.9
gyp ERR! node-gyp -v v0.6.8
gyp ERR! not ok
npm ERR! opencv-node@0.2.6 install: `node-gyp configure build`
npm ERR! `cmd "/c" "node-gyp configure build"` failed with 1
npm ERR!
npm ERR! Failed at the opencv-node@0.2.6 install script.
npm ERR! This is most likely a problem with the opencv-node package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp configure build
npm ERR! You can get their info via:
npm ERR!     npm owner ls opencv-node
npm ERR! There is likely additional logging output above.

npm ERR! System Windows_NT 6.1.7600
npm ERR! command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program File
s (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "opencv-node
"
npm ERR! cwd C:\wamp\www\serv\opencv-node
npm ERR! node -v v0.8.9
npm ERR! npm -v 1.1.61
npm ERR! code ELIFECYCLE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\wamp\www\serv\opencv-node\npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-12T09:36:20.743

我有类似的麻烦。

我的解决方案是以管理员身份启动“VS2015 的开发人员命令提示符”（您需要安装 Visual Studio）。只有在其中我才能安装opencv（npm i opencv）而不会出错，但会出现警告。

也许，它也会帮助你！

# c# - 像 C# 中的 Vector 这样的类

> ID：13321499
> 
> 赞同：-1
> 
> 时间：2012-11-10T11:10:48.987
> 
> 标签：c#, class, vector

我需要写一个简单的类。我需要两种方法：

```
Vector property = new Vector();
property.add("key", "value"); //set value of key
property.get("key"); //return value of key 
```

CSharp 有这样的课程吗？

我正在尝试编写自己的课程

```
string[] keys;

public void add(string key, string value)
{
 this.keys[key] = value;
} 
```

但字符串不能是数组的索引（但必须）。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T11:15:03.780

```
Vector property = new Vector();  -->   var property = new Dictionary<string, string>();
property.add("key", "value");    -->   property.Add("key", "value");
property.get("key")              -->   property["key"] 
```

**异常处理：** 如果在字典中找不到键，最后一个可能会抛出异常。另一种永不抛出的方法是：

```
string value;
bool keyFound = property.TryGetValue("key", out value); 
```

**术语：**您想到的通常称为*字典*或*地图*；*与scalar*相反的术语*vector*通常保留用于简单的数组或值列表。

 ** * *

**PS：**您可以创建自己的类（见下文）-尽管您拒绝`Dictionary<TKey,TValue>`仅仅是因为相关方法没有命名`add`并且`get`超出了我的范围。

```
class PropertyMap
{
    private Dictionary<string, string> map = new Dictionary<string, string>();

    public string add(string key, string value) { map.Add(key, value); }
    public string @get(string key) { return map[key]; }

    public string this[string key]  //  <-- indexer allows you to access by string
    {
        get
        {
            return @get(key);
        }
        set
        {
            add(key, value);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T11:14:43.483

您可以轻松地为此使用字典。

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict.Add("Key", "Value");

//access using:
dict["Key"]; 
```

编辑：如果需要，您还可以将字典用于其他对象，而不仅仅是字符串。如果您的“价值观”实际上是数字，您还可以使用：

```
var dict = new Dictionary<string, double>(); 
```

，这可能会为您节省一些转换回数字的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T11:29:12.753

使用此代码...

```
private Dictionary<string, string> keys = new Dictionary<string, string>();

public void add(string key, string value)
{
    this.keys.Add(key, value);
}

public string get(string key)
{
    return this.keys[key];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T11:22:07.850

您可以使用[`Dictionary<TKey,TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)来执行此操作。如果您想`Vector`用作 `Dictionary``Vector``Dictionary`

**例子**

```
class Vector : Dictionary<string,string>
{
    public string Get(string Key) //Create a new void Get(string Key) which returns a particular value from a specific Key in the Dictionary (Vector)
    {
        return this[Key]; //Return the key from the Dictionary
    }
    public void add(string Key, string Value) //Create a new void Add(string Key, string Value) which creates a particular value referring to a specific Key in the Dictionary (Vector)
    {
        this.Add(Key, Value); //Add the key and its value to Vector
    }
}

Vector property = new Vector(); //Initialize a new class Vector of name property
property.add("key", "value"); //Sets a key of name "key" and its value "value" of type stirng
MessageBox.Show(property.Get("key")); //Returns "value"
//MessageBox.Show(property["key"]); //Returns "value" 
```

这将创建一个`Vector`实现的新类，`Dictionary`以便您可以将其`Vector`用作`Dictionary`.

**注意**：这[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)是一个通用类，提供从一组键到一组值的映射。字典中的每个添加都包含一个值及其关联的键。通过使用其键检索值非常快，因为[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)该类是作为哈希表实现的。

谢谢，
我希望你觉得这有帮助:)*

# jquery - 缩放的可拖动图像超出 DIV 元素（jQuery）的范围

> ID：13321500
> 
> 赞同：0
> 
> 时间：2012-11-10T11:11:04.647
> 
> 标签：jquery, jquery-ui, zooming

我在 div 元素中有可拖动的图像对象（图像不能拖到 div 之外）。我还为该可拖动图像制作了一个缩放滑块，但问题是我正在缩放它超出 div 边界的图像（当图像被拖动并缩放到 div 边界附近时）。要修复它，我必须将它拖到任何地方才能再次卡在它的 div 中。缩放时有没有办法将图像保留在与缩放图像重叠的 div 元素内（最大图像缩放不大于 div 元素）。希望你能理解我的问题。这是我的代码：

```
$(function() {
      $( ".over_image" ).draggable({ cursor: "move", cursorAt: { top: 30, left: 80 } });
      $( ".over_image" ).draggable({ containment: "parent", scroll: false });
}); 
   $("#slider").slider({
                    step: 2,
                    min: 75,
                    max: 220,
                    value: 150,
                    slide: function(e,ui){
                        var sliderValue =  jQuery("#slider").slider("value");
                        $(".over_image").width(sliderValue);

                    }
                });

<div class="wraper">
     <div id="output" class="foto-frame">
 <img class="over_image" id="img_1" src="1.png" width="100" height="auto" />
     </div>
<div id="progressbox"><div id="progressbar"></div ></div>
<div class="nav-buttons">
     <div id="slider"></div>
</div> 
```

图像不能走出`#output`div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:42:48.400

您是否尝试过将此属性添加到 div 类：

```
.foto-frame {
        overflow:hidden;
} 
```

# android - 从类创建意图将 ListView 扩展为类扩展片段

> ID：13321505
> 
> 赞同：0
> 
> 时间：2012-11-10T11:11:47.613
> 
> 标签：android

我被困在这里将近2天，请帮助：

如何从“MyClass extends ListView”创建一个 Intent 到“Test extends Fragment”？

我在 MyClass 中使用了这段代码：

Intent intent = new Intent(MyClass.this, Test.class);

开始活动（意图）；

它不起作用。:(

大帮助！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:26:31.797

首先，您试图从完全错误的视图中打开视图。

你有这个活动类。将您的“MyClass”放入布局 xml 并将您的活动的内容视图设置为该布局。（为两个视图执行此操作）

```
setContentView(R.layout.your_layout_name); 
```

并使用以下方法加载视图：

```
View v=(MyClass)findViewById(R.id.yourViewId); 
```

然后使用像这样的意图：

```
Intent intent= new Intent(FirstActiviy.class,SecondActivity.class);
startActivity(intent); 
```

但在此之前检查 Android 文档。

# windows - 覆盖 Windows cmd 内部命令

> ID：13321506
> 
> 赞同：4
> 
> 时间：2012-11-10T11:11:49.393
> 
> 标签：windows, command-line, path

我正在使用一个程序，它使用`type`命令将文件的内容通过管道传输到另一个程序，如下所示：

```
type test.txt | (another program) 
```

这个命令在我的主程序中是硬编码的。问题是该`type`命令存在正斜杠问题：

```
E:\babak\git\bin>type e:/babak/git/bin/test.txt
The syntax of the command is incorrect. 
```

有没有办法`type`用一个名为 的自定义应用程序覆盖 cmd 内部`type`，它支持正斜杠，所以如果有人`type`在 cmd 中调用，则调用自定义`type`应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T21:23:04.143

如果将参数括在引号中，则 TYPE 内部命令将与引号一起正常工作。

```
type "e:/babak/git/bin/test.txt" 
```

如果引用命令，则可以阻止使用内部命令并强制使用批处理或 exe：

```
"type" e:/babak/git/bin/test.txt 
```

您还可以包含路径信息以强制使用 exe 或批处理

```
E:\babak\git\bin\type e:/babak/git/bin/test.txt 
```

或者

```
.\type e:/babak/git/bin/test.txt 
```

但是，如果您无法控制程序如何调用 TYPE，那么我看不出您可以如何使用上述任何技术。

我能想到的唯一其他选择是预处理您的路径信息以将正斜杠转换为反斜杠。然后您需要确保您的程序获得修改后的路径信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-18T14:56:09.807

您可以使用 doskey 覆盖 command.com 中的内部 cmd，例如在 win7 上

```
c:\> date
  The current date is: Mon 09/18/2017
   Enter the new date: (mm-dd-yy)

c:\>   @doskey date=c:\cygwin\bin\date.exe $*
c:\>   @doskey echo=c:\cygwin\bin\echo.exe $*     

c:\> date +%Y-%m-%d
2017-09-18 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T11:27:47.840

cmd.exe 只是一个驻留在 System32（或其他）目录中的程序。如果你用新的 cmd.exe 替换它，那么只要用户运行 cmd，就会运行那个。

在替换文件之前会有权限问题需要解决，但并非不可能。

# python-3.x - 解释移位加法器乘法

> ID：13321507
> 
> 赞同：0
> 
> 时间：2012-11-10T11:11:56.237
> 
> 标签：python-3.x, binary

有人可以用虚拟术语向我解释二进制值乘法的 Shift Adder 方法吗？更不用说编写程序来计算答案了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:01:45.787

我假设您知道纸铅笔的标准乘法方法（又名[长乘法方法](http://en.wikipedia.org/wiki/Multiplication_algorithm#Long_multiplication)）

二进制移位和加法与长乘法方法非常相似。

例如，在长乘法中，如果要将二进制数 1001 乘以 1011，则过程如下所示：

```
 1 0 0 0
       x 1 0 1 1
  ---------------
         1 0 0 0  ( Step 1: 1000 x LSB (bit 0) of 1011, which is 1, followed by 0 shift to the left)
+      1 0 0 0 -  ( Step 2: 1000 x bit 1 of 1011, which is again 1, followed by 1 shift to the left)
+    0 0 0 0 - -  ( Step 3: 1000 x bit 2 of 1011, which is 0, followed by 2 shifts to the left)
+  1 0 0 0 - - -  ( Step 4: 1000 x MSB (bit 3) of 1011 which is 1 again, followed by 3 shifts to the left)
 ----------------
   1 0 1 1 0 0 0  ( Step 5: Add all the above)
 ---------------- 
```

现在在 shift 和 add 方法中，最后你不做加法（步骤 5），而是我们不断地添加数字，如下所示：

```
Step 0: Result = 0
Step 1: Result = Result + Step 1 of Long division (1000 x LSB (bit 0) of 1011, which is 1, followed by 0 shift)
               = 0000 + 1000
               = 1000
Step 2: Result = Result + Step 2 of Long division (1000 x bit 1 of 1011, which is again 1, followed by 1 shift)
               = 1000 + 10000 (Additional zero at the end of second term is due to shifting 1000 to the left by 1 time: 1000_0)
               = 11000

Step 3: Result = Result + Step 3 of Long division (1000 x bit 2 of 1011, which is 0, followed by 2 shift)
               = 11000 + 000000
               = 11000
Step 4: Result = Result + Step 4 of Long division (1000 x MSB (bit 3) of 1011 which is 1 again, followed by 3 shift)
               = 11000 + 1000000 (Additional zeros at the end of second term is due to shifting 1000 to the left three times: 1000_000)
               = 1011000 
```

我希望上述算法足以让您开始编码。

# android - 为应用程序android编程提供用户友好的帮助和提示

> ID：13321509
> 
> 赞同：2
> 
> 时间：2012-11-10T11:12:33.443
> 
> 标签：android, android-layout

我很抱歉我的英语说得不好。我正在开发一个安卓应用程序。如果您看到“viber”或“备份”这些应用程序在主布局上显示 alpha 布局，以便用户在首次运行时提供帮助，我想为我的布局提供用户友好的帮助。例如看 theas 图片 1-主要布局

![在此处输入图像描述](../Images/f52ff47ebf16b51dae8298af5b9227ec.png)

2-显示帮助时

![在此处输入图像描述](../Images/8e48308017e6d03f8d132493d1a631ef.png)

我怎么能做这样的事情？任何的想法？感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:40:44.990

以下是我对如何执行此操作的一些想法

*   创建一个没有背景颜色属性的弹出窗口，并使背景变暗，然后使用图像视图，放置在您帮助用户使用的图标之上，显示图标的突出显示图片

制作弹出窗口 -[如何在 android 中创建弹出窗口？](https://stackoverflow.com/questions/7498605/how-to-create-a-popup-window-in-android)

使背景变暗 - [Android PopupWindow 活动时背景模糊或变暗](https://stackoverflow.com/questions/3221488/blur-or-dim-background-when-android-popupwindow-active)

*   或者你可以创建一个单独的布局，复制你的原始布局，把它放在一个框架布局中，覆盖一个昏暗的空图像视图，然后把你的文本视图，你的按钮和一个小高亮图标放在这个视图的顶部

框架布局 - [http://developer.android.com/reference/android/widget/FrameLayout.html](http://developer.android.com/reference/android/widget/FrameLayout.html)

希望对你有帮助，有什么问题可以问

# android - 阻止 WebView 打开浏览器

> ID：13321510
> 
> 赞同：10
> 
> 时间：2012-11-10T11:12:47.823
> 
> 标签：android, webview, browser, android-webview

**我已经为给定的 WebView 启用了 JavaScript，并在 WebView 中打开了新链接，而不是在浏览器中。** 这是主要活动

```
 package com.Afrogfx.pronouns;

    import android.os.Bundle;
    import android.annotation.SuppressLint;
    import android.app.Activity;
    import android.view.Menu;
    import android.webkit.WebView;

    @SuppressLint("SetJavaScriptEnabled")
    public class MainActivityPronouns extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_activity_pronouns);

    WebView wvHtml = (WebView) findViewById(R.id.webview);
    wvHtml.getSettings().setBuiltInZoomControls(true);
    wvHtml.getSettings().setJavaScriptEnabled(true);
    wvHtml.loadUrl("http://afrogfx.com/appcatcategories.php?catid=13&parentid=11");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main_activity_pronouns, menu);
    return true;
    }
    } 
```

**我如何处理我的代码以在 WebView（应用程序）内打开站点中的所有链接，而不是在浏览器中＆（不向用户显示在浏览器中打开）。**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-10T11:25:12.523

为此，只需创建扩展 webclient 的子类并使用该类的方法 onPageFinished(WebView c,String url) 和
public boolean shouldOverrideUrlLoading(final WebView view, final String url)

这是代码-

```
 myWebView.setWebViewClient(new WebViewClient()       
        {
             @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) 
            {
                //view.loadUrl(url);
                System.out.println("hello");
                return false;
            }
        });
        myWebView.loadUrl(url); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-06-03T06:45:54.990

如果您使用 Kotlin：

```
webView.webViewClient = object : WebViewClient() {
                override fun shouldOverrideUrlLoading(
                    view: WebView?,
                    request: WebResourceRequest?
                ): Boolean {
                    return false
                }
            } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-10T11:19:10.260

所以你必须使用 WebviewClient .. 这是类

```
private class HelloWebViewClient extends WebViewClient 
{
    @Override
    public boolean shouldOverrideUrlLoading(final WebView view, final String url) 
    {
        Utils.showActivityViewer(WebsiteActivity.this);
        new Thread(new Runnable() 
        {

            public void run()
            {
                view.loadUrl(url);
            }

            }).start();  

        return true;
    }
} 
```

并在 webview 中绑定为

```
webview.setWebViewClient(new HelloWebViewClient()); 
```

并参考[http://developer.android.com/reference/android/webkit/WebViewClient.html](http://developer.android.com/reference/android/webkit/WebViewClient.html)

# html - 样式化下拉菜单元素

> ID：13321513
> 
> 赞同：-2
> 
> 时间：2012-11-10T11:13:09.523
> 
> 标签：html, css

我正在尝试为导航的下拉级别设置样式（例如，增加下拉的宽度），但找不到要更改的相关选择器。该网站是[http://www.mattmaclennan.co.uk/a2](http://www.mattmaclennan.co.uk/a2)

示例：在“New Motorcycles”下拉菜单中，我想增加宽度，然后将翻转元素移到一边

我知道要使用的代码，但我只是找不到相关的选择器来执行它。在这里扯我的头发！

感谢您提前提供任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:39:30.473

也许这会有所帮助？[http://jsfiddle.net/Xtu9t/](http://jsfiddle.net/Xtu9t/)

```
<nav>
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">New Motorcycles</a>
        <ul>
            <li><a href="#">Adventure</a></li>
            <li><a href="#">125cc</a></li>
            <li><a href="#">foofoo</a>
                <ul>
                    <li><a href="#">subsub</a></li>
                    <li><a href="#">subsub2</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">Used motorcycles</a>
        <ul>
            <li><a href="#">Motor 1</a></li>
            <li><a href="#">Motor 2</a></li>
        </ul>
    </li>
    <li><a href="#">etc</a></li>
</ul> 
```

它的基本下拉菜单，所以你必须自己做更多的造型。但这是CSS

```
body {    
font-family: Helvetica, sans-serif;
font-size: 14px;
line-height: 10px;
}

nav ul ul {
display: none;
}
nav ul li:hover > ul {
    display: block;
}

nav ul {
     background: red; 
     list-style: none;
     position: relative;
    display: inline-table;
}
nav ul:after {
content: "";
clear: both;
display: block;
}

nav ul li {
    float: left;

}
    nav ul li:hover {
        background: black;
    }
        nav ul li:hover a {
            color: #fff;
        }

    nav ul li a {
        display: block;
        padding: 25px 20px;
        color: #fff;
        text-decoration: none;

    }

nav ul ul {
    background: red;
    padding: 0;
    position: absolute;
    top: 100%;
}
    nav ul ul li {
        float: none;
        position: relative;
    }
        nav ul ul li a {
            padding: 15px 20px;
            color: #fff;
        }    
            nav ul ul li a:hover {
                background: #000;
            }

nav ul ul ul {
    position: absolute;
    left: 100%;
    top:0;
} 
```

如您所见，没有使用任何类或ID。​</p>

# github - 为什么 github 会显示“您最近推送的分支”？

> ID：13321516
> 
> 赞同：24
> 
> 时间：2012-11-10T11:13:36.263
> 
> 标签：github

我快速转发了几个开发分支以与 master 保持同步，并将它们推送到私有存储库。私人仓库归客户的 github 帐户所有，我是合作者。

现在，github 在“您最近推送的分支：”下显示了两个链接，每个链接都包含“拉取请求”和“比较”。当我出于好奇点击“拉取请求”时，它会显示： `Oops! master is already up-to-date with feature Try a different branch?`. 任何其他分支的情况都是一样的，因为它们都是快进更新的。那么这些链接的意义何在？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-04-17T09:47:50.687

在我的情况下，这条消息在大约 2 小时后自行消失。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-10T15:33:43.323

这些链接可让您快速比较或打开来自您的分支的拉取请求。当最近推送的分支位于远程 HEAD 之前时，它们会显示。大多数时候，远程 HEAD 指向 master（这可以通过在*Admin*部分调整存储库的“默认分支”来更改）。

由于看起来您的远程 HEAD 指向 master，因此这些链接确实不应该显示。最好的做法是发送邮件**support@github.com。**.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-11T20:05:10.673

我为删除这些消息所做的是实际创建拉取请求，然后，我将拉取请求标记为已关闭。它没有以任何方式影响我的存储库，并且确实删除了该消息。

# jquery - 用户键入时出现文本区域问题，但文本没有改变

> ID：13321523
> 
> 赞同：2
> 
> 时间：2012-11-10T11:14:55.193
> 
> 标签：jquery, html

我有一个小问题。我有一个带有选项的选择。When one option is selected, then text changes in textarea, everything is working perfectly while user don't try to write something in text area, when user types, then text doesn't change anymore. 这是代码：选择选项：

```
 <select class="es" id="es1">
    <option id="edu1">1</option>
    <option id="edu2">2</option>
</select> 
```

这是我使用的 jQuery 代码（在此代码中，我选择了选项 id，然后通过 id 号显示文本，一切正常）

```
$('#es1').change(function() {
                    $('#sk1').html('');
                    var id = $(this).children(":selected").attr("id");
                    var idd = id.split('edu');
                    var num = idd[1];
                    $('#sk1').html(customTextByNumber[num]);
                }); 
```

我有 id="sk1" 的文本区域。最有趣的是，当用户在框中输入额外的内容时，当我选择其他选项时，文本不会改变，但是当我查看检查元素（在谷歌浏览器中）时，我可以看到文本正在改变，但之后标签。例如，当用户不键入时，所有内容都显示在 html 中，如下所示：

```
<textarea id="sk1">text here</textarea> 
```

用户输入额外内容后：

```
<textarea id="sk1">ecustom text and user text</textarea> Another options text which is not shown to user</textarea> 
```

也许您对如何解决此类问题有一些想法？

**已解决**如果有人有这样的问题使用这个

```
$('#sk1').val(something); 
```

而不是这个

```
$('#sk1').html('something'); (this is bad one) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T11:24:29.547

您需要使用以下`.val()`方法`textarea`：

```
$('#es1').change(function () {
    $('#sk1').val(''); // This line is probably unnecessary...
    var id = $(this).children(":selected").attr("id");
    var idd = id.split('edu');
    var num = idd[1];
    $('#sk1').val(customTextByNumber[num]);
});​ 
```

我不知道是什么`customTextByNumber`，但在编辑`textarea`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:19:18.217

你能试试这个：

```
$('#es1').change(function() {
                $('#sk1').html('');
                var id = $(this).children(":selected").attr("id");
                var idd = id.split('edu');
                var num = idd[1];
                $('#sk1').val(num);
}); 
```

在这里你可以看到[http://jsfiddle.net/tH8N5/](http://jsfiddle.net/tH8N5/)

# iphone - 苹果推送通知证书到期

> ID：13321528
> 
> 赞同：8
> 
> 时间：2012-11-10T11:15:20.503
> 
> 标签：iphone, ios, xcode, apple-push-notifications

我正在开发应用程序更新，并完全从头开始构建这个新版本。我现在正在应用程序中设置推送通知。我可以看到该应用程序已经配置了推送通知，但生产推送 SSL 证书的到期时间是 2012 年 2 月![看图片](../Images/5c1bb28c72f97b33f8de5af67a9866e9.png)

这是否意味着商店中当前版本的应用程序由于证书过期而无法正常工作推送通知？

如果我希望推送通知在新的版本中工作，我的下一步应该是什么。撤销旧证书并创建新证书，或者我应该选择“在当前证书过期之前生成新的生产推送 SSL 证书”上的配置选项

我唯一担心的是，如果现有应用程序有有效的推送通知，它们不应该受到影响。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T11:29:52.770

此证书用于服务器端，因此如果证书过期，则服务器无法向 Apple 服务器发送推送消息（可能服务器在尝试连接 Apple 服务器时收到错误消息）。

更新：回答您问题的第二部分，生成新证书并将其安装在您的服务器上。尝试发送测试消息并确保它有效。完成测试后，请撤销旧证书并将其从服务器中删除，以避免将来出现混淆。

# tidesdk - 在 TideSDK 中设置窗口尺寸

> ID：13321530
> 
> 赞同：1
> 
> 时间：2012-11-10T11:15:34.060
> 
> 标签：tidesdk

我希望在启动我正在开发的应用程序时添加一个小的启动屏幕，以显示许可证和版本信息以及一些客户特定信息的详细信息。在 tiapp.xml 中设置了我的默认窗口尺寸等后，我现在正在研究如何在特定用户窗口（即 index.html）上覆盖这些。

我对 API 进行了深入研究，并认为我找到了我想要的东西，但在测试时它对窗口尺寸没有任何作用。我知道这将是我做的（我是一个拼命学习 javascript 的 php 人！）但是有人可以看看我的代码并指出我的方式的错误......

在我的 index.html 中，我有以下代码：

```
<script>
    var Ti = Titanium;
    var window = Ti.UI.currentWindow;
    window.setHeight(250);
    window.setWidth(500);
</script> 
```

我猜我要么搞砸了我的 javascript 或 TideSDK 语法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:10:29.913

您使用了保留变量“window”，它属于 JavaScript，不能被覆盖。

以下代码适用于我：

```
var Ti = Titanium;

var this_window = Ti.UI.getCurrentWindow();

setTimeout(function(){
  this_window.setHeight(250);
  this_window.setWidth(500);
}, 3000); 
```

如果你想学习编写好的 JavaScript，我可以给你几本书推荐。

# android - 使用电源按钮唤醒设备

> ID：13321532
> 
> 赞同：2
> 
> 时间：2012-11-10T11:16:15.977
> 
> 标签：android

有没有办法在不按电源按钮/不使用警报管理器的情况下唤醒 android 设备，例如 ontouchlistener

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:07:14.063

如果设备有一个打开的移动数据套接字连接，传入的数据包会唤醒手机。

如果设备是电话，来电或短信会唤醒电话。

其他应用程序安排的闹钟`AlarmManager`可能会唤醒手机，具体取决于它们的配置方式。

一个`OnTouchListener`肯定**不能**叫醒电话。为了接收事件，手机必须已经唤醒。

# xcode - Xcode MVC 问题 - 需要一个多模型 - 单视图

> ID：13321533
> 
> 赞同：1
> 
> 时间：2012-11-10T11:16:33.293
> 
> 标签：xcode, macos, model-view-controller

我最近开始使用 Xcode，来自 C# 背景。我正在努力为 OSX 实现一些我在 C# 中发现相当微不足道的东西。

基本上，我想创建一个包含两个点的模型。然后我想打开一个窗口，其中包含一个自定义视图，该视图链接到一个对象，该对象是 NSView 的子类。然后，我想使用基于 NSView 的对象的dirtyRect 函数在这两点之间画一条线。

我已经按照示例进行了此操作，并且效果很好。但是，我希望能够打开多个窗口，每个窗口都具有相同类型的视图，以便使用相同的技术显示数据，但每个窗口都与不同的模型相关联。

如何让基于 NSView 的对象知道它应该绘制什么模型数据？我想我在这里遗漏了一些愚蠢的简单东西......

谢谢，

汤姆。

# jquery - CanJS点击事件实现

> ID：13321538
> 
> 赞同：1
> 
> 时间：2012-11-10T11:18:00.480
> 
> 标签：jquery, jquery-events, mouseclick-event, canjs, canjs-control

我正在为我的项目使用 CanJS（一个 js 框架），但我遇到了一个问题。

我在 book.js 中编写了一些代码，如下所示：

```
Book = can.Model({
    create: 'POST site/book'
},{});

Books = can.Control({

        '.gotoPrevPage click' : function(){
            b= new Book({name:"newbook1"});
            b.save();
        }
}); 
```

而且，我的html文件如下：

```
...
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/can.jquery-1.0.7.min.js"></script>
<script type="text/javascript" src="js/book.js"></script>
...
<div class="twopageDoc">

    <div class="gotoPrevPage"></div>

    <div class="leftPage">

        <img src="images/1.jpg" />

    </div>

    <div class="rightPage">

        <img src="images/2.jpg" />

    </div>

    <div class="gotoNextPage"></div>

</div>
... 
```

现在，当我单击带有类`gotoPrevPage`事件的 div 时不起作用并且我没有看到任何错误，但是当我使用 Chrome 控制台并写下上述事件的 2 行代码时，POST 完成并且它可以工作。我不知道原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T11:36:43.993

从您的代码看来，您没有初始化控制器。您应该在 DOM 元素上创建 Books 的实例：

```
new Books('.twpopageDoc') 
```

# jquery - 自动完成 - 使用 CakePHP 1.3 + jQuery

> ID：13321539
> 
> 赞同：1
> 
> 时间：2012-11-10T11:18:01.710
> 
> 标签：jquery, json, cakephp, autocomplete

我正在关注本[教程](http://blogfreakz.com/cakephp/cakephp-jquery-autocomplete-tutorial)（对于 CakePHP 1.3）

自动完成功能有效，通过 JSON 返回的数据看起来正确：

```
[{"value":"test2","label":"<img class=\"avatar\" width=\"24\" height=\"24\" src=\"test2.jpg\"><span class=\"username\">test2<\/span>"},{"value":"test","label":"<img class=\"avatar\" width=\"24\" height=\"24\" src=\"test.jpg\"><span class=\"username\">test<\/span>"}] 
```

下拉列表按预期填充，但返回的项目格式不正确：

```
&lt;img class="avatar" width="24" height="24" src="test2.jpg"&gt;&lt;span class="username"&gt;test2&lt;/span&gt; 
```

预期结果：

```
<img class="avatar" width="24" height="24" src="test2.jpg"><span class="username">test</span> 
```

有什么建议吗？

# java - Java将字符串与通配符正则表达式匹配以查找

> ID：13321545
> 
> 赞同：0
> 
> 时间：2012-11-10T11:18:40.510
> 
> 标签：java, html, regex, html-parsing

我有几个 HTML 文件，每个文件都有一个`<h1>`标签。我想解析该标签以获取它的内容（书名）。例如，标签如下所示：

```
<H1>bookname</H1> 
```

我正在尝试使用以下代码获取它：

```
Scanner scan = new Scanner(file, "Windows-1255");
String name="";
Pattern p = Pattern.compile("<H1>*</H1>"); //tried adding '(' and ')' around the '*', didn't help
while (scan.hasNext()) {
    name = scan.nextLine();
    Matcher m = p.matcher(name);
    if (m.matches()) {
        name = name.substring(4, name.length() - 6);
        break;
    }
} 
```

它不起作用，h1 标签永远不会匹配，我不知道名字。这应该怎么做？

也许很重要，H1 标签的内容是希伯来语，charset=Windows-1255。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:23:36.193

尝试使用

```
Pattern p = Pattern.compile("<H1>.*</H1>"); 
```

（注意额外的`.`- 你的版本只匹配空标签）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T11:24:41.147

我找到了一个可能对你有用的例子。它还简化和概括了匹配过程，因此您不需要对找到的模式进行子串化：

```
String stringToSearch = "<h1>Yada yada yada yada </h1>";
String name = "";

// the pattern we want to search for
Pattern p = Pattern.compile("<h1>.*</h1>");
Matcher m = p.matcher(stringToSearch);

// if we find a match, get the group 
if (m.find())
{
  // get the matching group
  name = m.group(1);
} 
```

# security - parse.com 安全性

> ID：13321553
> 
> 赞同：23
> 
> 时间：2012-11-10T11:20:10.783
> 
> 标签：security, private-key, parse-platform

最近我发现[parse.com](http://parse.com)是多么有用和简单。它确实加快了开发速度，并为您提供了一个现成的数据库来存储来自您的网络/移动应用程序的所有数据。

但它有多安全？据我了解，您必须将您的应用程序私钥嵌入代码中，从而授予对数据的访问权限。

但是，如果有人能够从您的应用程序中恢复密钥怎么办？我自己试过了。我花了 5 分钟从标准 APK 中找到私钥，而且还可以使用硬编码在您的[javascript 源](https://github.com/ParsePlatform/Todo/blob/master/js/todos.js)代码中的私钥构建一个 Web 应用程序，几乎任何人都可以看到它。

保护我发现的数据的唯一方法是 ACL ( [https://www.parse.com/docs/data](https://www.parse.com/docs/data) )，但这仍然意味着任何人都可以篡改可写数据。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T20:31:54.180

与任何后端服务器一样，您必须防范潜在的恶意客户端。Parse 有几个安全级别来帮助你。

正如您所说，第一步是[ACLs 。](https://parse.com/docs/data#security)您还可以更改数据浏览器中的[权限](https://parse.com/docs/data#security)，以禁止未经授权的客户端创建新类或向现有类添加行或列。

如果该级别的安全性不满足您的要求，您可以通过[Cloud Functions](https://parse.com/docs/cloud_code_guide)代理您的数据访问。这就像创建一个虚拟应用程序服务器以在您的客户端和后端数据存储之间提供一层访问控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-24T14:07:31.793

在我只需要向 Web 应用程序公开用户数据的小视图的情况下，我采用了以下方法。

一种。创建一个包含安全对象字段子集的辅助对象。

湾。使用 ACL，使安全对象只能从适当的登录名访问

C。使辅助对象公开读取

d。编写一个触发器以使辅助对象与主对象的更新保持同步。

我大部分时间也使用云函数，但是当您需要一些灵活性时，这种技术很有用，并且如果辅助对象是多个安全对象的视图，它可能比云函数更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T16:54:30.340

我所做的是以下。

1.  限制所有类的公共读/写。访问类数据的唯一方法是通过云代码。
2.  使用参数验证用户是登录用户`request.user`，用户会话是否为空，对象 id 是否合法。
3.  验证用户后，我将允许使用主密钥检索数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-11T17:19:16.430

只需严格控制全局级别安全选项（客户端类创建等）、类级别安全选项（例如，您可以禁用客户端删除 _Installation 条目。禁用所有类的用户字段创建也很常见。 )，最重要的是，请注意 ACL。

通常我使用 beforeSave 触发器来确保 ACL 始终正确。因此，例如，_User 对象是恢复电子邮件所在的位置。我们不希望其他用户能够看到彼此的恢复电子邮件，因此 _User 类中的所有对象都必须仅对用户进行读写设置（public read false 和 public write false）。

这样只有用户自己可以篡改自己的行。其他用户甚至不会注意到该行存在于您的数据库中。

在某些情况下进一步限制这一点的一种方法是使用云功能。假设一个用户可以向另一个用户发送消息。您可以将其实现为一个新类 Message，其中包含消息的内容，以及指向发送消息的用户和将接收消息的用户的指针。

由于发送消息的用户必须能够取消它，并且由于接收消息的用户必须能够接收它，因此两者都需要能够读取该行（因此ACL必须对它们都具有读取权限）。但是，我们不希望它们中的任何一个篡改消息的内容。

所以你有两种选择：要么创建一个 beforeSave 触发器，在提交之前检查用户尝试对此行所做的修改是否有效，或者你设置消息的 ACL 以便没有人拥有写权限，然后你创建云功能验证用户，然后使用主密钥修改消息。

重点是，您必须为应用程序的每个部分都考虑这些因素。据我所知，没有办法解决这个问题。

# git - Git 和 GitHub 的区别

> ID：13321556
> 
> 赞同：304
> 
> 时间：2012-11-10T11:20:31.547
> 
> 标签：git, github

我最近使用 Eclipse 向 Git 添加了一个新项目，但没有看到该项目出现在我的 GitHub 帐户中。

为什么他们有相同的帐户信息和不同的存储库？

Git 和 GitHub 不是一回事吗？

* * *

## 回答 #1

> 赞同：396
> 
> 时间：2012-11-10T11:25:55.493

**Git**是一个版本控制系统，一个管理源代码历史的工具。

**GitHub**是 Git 存储库的托管服务。

所以它们不是一回事：**Git**是**工具**，**GitHub**是**使用 Git 的项目的服务**。

要将您的代码获取到 GitHub，[请查看此处](https://help.github.com/articles/create-a-repo)。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-11-10T11:30:22.797

在 SVN 类比中，Git 取代了 SVN，而 GitHub 取代了 SourceForge：P

如果你的这个项目是新的，那么你仍然可以提交到本地 Git，然后你可以稍后*推*送到 GitHub。您需要在 Git 设置中将 GitHub 存储库添加为“远程存储库”。

他们似乎为 Eclipse 用户提供了一些东西：http: [//eclipse.github.com/](http://eclipse.github.com/)

否则，如果您是 Git 新手：http: [//git-scm.com/book](http://git-scm.com/book)

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2015-07-03T12:27:24.963

什么是[Git](https://en.wikipedia.org/wiki/Git_%28software%29)：

> “Git 是一个免费的开源分布式**版本控制系统**，旨在快速高效地处理从小型项目到大型项目的所有项目”

Git 是一个分布式对等版本控制系统。网络中的每个节点都是对等点，存储整个存储库，也可以充当多节点分布式备份。尽管节点可以是无头或“裸”的，但没有中央服务器的特定概念，在集中式版本控制系统中扮演的角色类似于中央服务器。

什么是[GitHub](https://en.wikipedia.org/wiki/GitHub)：

> “GitHub 是一个**基于 Web 的**Git 存储库**托管服务**，它提供了 Git 的所有分布式修订控制和源代码管理 (SCM) 功能，并添加了自己的功能。”

Github 为每个项目提供访问控制和多种协作功能，例如 wiki、任务管理、错误跟踪和功能请求。

你**不需要**GitHub 来使用 Git。

GitHub（以及任何其他本地、远程或托管系统）都可以是单个项目中相同分布式版本存储库中的对等点。

Github 允许您：

*   与他人共享您的存储库。
*   访问其他用户的存储库。
*   将存储库（github 服务器）的远程副本存储为本地副本的备份。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-04-10T18:43:12.643

Git——GitHub 建立在其之上的版本控制工具。

GitHub——我们的公司和我们软件的名称。我们构建软件和网站来帮助您以一种很好的方式与 Git 存储库进行交互。

GitHub.com — 您登录以在线查看存储库的网站。

GitHub Desktop — 可以安装在计算机上的应用程序，可帮助您将本地代码与 GitHub.com 同步。

来源：[https ://guides.github.com/introduction/getting-your-project-on-github/](https://guides.github.com/introduction/getting-your-project-on-github/)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-11-10T16:30:18.597

[Git 和 GitHub](https://www.theserverside.com/video/Git-vs-GitHub-What-is-the-difference-between-them)之间有许多明显的区别。

Git 本身真正专注于版本控制的基本任务。它维护一个提交历史，它允许您通过[reset](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/How-a-git-reset-and-push-to-remote-works-on-previous-local-commits)和[revert](https://www.theserverside.com/tutorial/How-to-git-revert-a-commit-A-simple-undo-changes-example)命令撤消更改，并允许您通过 push 和 pull 命令与其他开发人员共享代码。我认为这些是每个开发人员都希望从 DVCS 工具中获得的基本功能。

[![Git 与 GitHub 对比图](../Images/1ca83a9927fe515731b49c759c79562b.png)](https://i.stack.imgur.com/ijR3Q.png)

**Git 没有范围蔓延**

[但是关于Git](https://www.theserverside.com/tutorial/Five-basic-Git-commands-every-beginner-needs-to-know)的一件事是，它实际上只是专注于源代码控制，仅此而已。这很棒，但这也意味着该工具缺少组织想要的许多功能。例如，没有内置的用户管理工具来验证谁在连接和提交代码。[与 Jira 或Jenkins](https://www.theserverside.com/tutorial/Need-a-CI-tool-Heres-a-Jenkins-tutorial-for-beginners)之类的集成留给开发人员通过诸如钩子之类的东西来解决。基本上，有很多地方可以集成功能。这就是 GitHub 和 GitLab 等组织的用武之地。

**其他 GitHub 功能**

GitHub 的主要“增值”是它为 Git 提供了一个基于云的平台。这本身就很棒。除此之外，GitHub 还提供：

*   简单的任务跟踪
*   一个 GitHub 桌面应用
*   在线文件编辑
*   分支保护规则
*   拉取请求功能
*   组织工具
*   热头的互动限制
*   表情支持！！！:octocat: :+1:

因此，GitHub 确实为已经流行的 DVCS 工具增添了润色和改进。

**Git 和 GitHub 的竞争对手**

有时，当谈到区分 Git 和 GitHub 时，我认为看看它们与谁竞争是件好事。Git 在平面上与 Mercurial、Subversion 和 RTC 等工具竞争，而 GitHub 更多地在 SaaS 领域与 GitLab 和 Atlassian 的 BitBucket 等云供应商竞争。

**不需要 GitHub**

我总是想提醒人们的一件事是，你不需要 GitHub、GitLab 或 BitBucket 来使用 Git。Git 是在 2005 年什么时候发布的？GitHub 直到 2007 年或 2008 年才出现，因此早在云托管供应商出现之前，大型组织就在使用 Git 进行分布式版本控制。所以Git本身就很好。它不需要云托管服务才能有效。但与此同时，拥有一个 PaaS 提供商肯定不会有什么坏处。

**使用 GitHub 桌面**

顺便说一句，您提到了您的 GitHub 帐户中的存储库与您在本地拥有的存储库之间的不匹配？这是可以理解的。在您连接并完成拉取或获取之前，本地 Git 存储库不知道远程 GitHub 存储库。话虽如此，GitHub 提供了一个称为[GitHub 桌面](https://www.theserverside.com/video/Test-Git-command-basics-on-the-GitHub-Desktop-app)的工具，它允许您从桌面客户端连接到 GitHub，并轻松地将本地 Git 存储库加载到 GitHub，或者将 GitHub 存储库带到您的本地计算机上。

[![GitHub 桌面](../Images/869184add17a86dcb835b715d9af8d5c.png)](https://i.stack.imgur.com/2jz57.png)

该工具并没有给我留下太大的印象，因为一旦您了解了 Git，这些事情在 Bash shell 中并不难做到，但它是一种选择。

[![Git 和 GitHub 的较量](../Images/b2ca04c0383a5e7c2c9ac6a196c5c2fa.png)](https://i.stack.imgur.com/DVJkS.png)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-10-25T12:05:04.583

简单来说，我们可以在下面说出 git 和 git hub 和 VSTS 之间的区别。

**git** : - 将 git 视为一种引擎/技术，以实现对我们项目的源代码版本控制。与 TFS（又是一个集中的源版本控制）不同，git 是分布式版本控制技术。这意味着 git 它实际上并不要求拥有任何服务器。通过 git 技术，我们可以将自己的本地机器作为源代码存储库，不需要总是有一个集中的服务器（大规模可以有微软服务器来推送和保存我们的项目源代码）。但是对于 SVN 和 TFS 类型的版本控制，服务器必须与之关联。

例如，如果我是一名自由开发人员并且我直接向我的客户报告并且没有其他开发人员参与，我需要保持对我的代码的版本控制以回滚（任何版本）并提交我的代码，而我没有有购买服务器的预算，我没有时间在我的机器上安装和使用其他服务器作为 TFS 服务器和 TFS 客户端。因此，最佳方式是安装 git 引擎并将我的本地机器用作 git 版本控制的存储库。

**GitHub** : - 正如我之前所说，git 是一种技术，与一些命令/shell 命令一起使用，即 git 只有没有 UI。GitHub 是在线产品或在线存储库，它在其流程中使用 git 技术并实现版本控制以及其他功能，如错误跟踪、项目管理、支持票证管理等。换句话说，Git Hub 是由其他第三方公司基于 git 技术构建的具有 UI 和其他功能的包装器，它实际上是基于 git 技术的某人或某个团体拥有的产品，因为 git 是开源的，并且没有市场价值产品。

**VSTS** : - VSTS 是一个 Microsoft 产品，用于在线存储库保持源代码版本控制，可以被视为 git hub 的替代品。自微软成立以来，VSTS 既支持 git 技术，也支持 TFS（TFVC-team Foundation 版本控制）。因为 TFS 是另一个实现这种版本控制的老微软产品。我逐渐假设 VSTS 会逐渐淘汰 TFS，因为 git 是该领域的突出技术并且它是开源的。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-07-21T00:15:07.027

用简单的英语：

1.  众所周知，它们都是源代码控制。
2.  打个比方，如果 Git 是一台独立的计算机，那么 GitHub 就是一个通过 Web 连接起来的计算机**网络，这些计算机具有各种功能。**
3.  因此，除非您打开 GitHub 帐户并**明确**告诉 VSC 或任何编辑器使用 GitHub，否则您会在上面看到您的源代码*，*否则它们只会在下面，您的本地计算机。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-11T06:28:33.983

**Git-** Git 是您安装在本地系统上的版本控制软件。对于单独从事项目的个人来说，Git 被证明是优秀的软件。

**GitHub** - 如前所述，Git 是一个跟踪代码更改的版本控制系统，而 GitHub 是一个基于 Web 的 Git 版本控制存储库托管服务。它提供了 Git 的所有分布式版本控制和源代码管理 (SCM) 功能，同时还提供了一些自己的功能。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-17T17:13:48.720

简而言之，Git 是一个版本控制系统，可让您管理和跟踪源代码历史记录。GitHub 是一种基于云的托管服务，可让您管理 Git 存储库。如果您有使用 Git 的开源项目，那么 GitHub 旨在帮助您更好地管理它们。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-01T03:45:57.933

简单来说：

Git - 是本地存储库。

GitHub - 是中央存储库。

希望下图有助于理解： [![Git 和 GitHub 的区别](../Images/1812438c54d87cd59bd0f500c6c56377.png)](https://i.stack.imgur.com/jwCeV.png)

[![Git 和 GitHub 的区别更多细节](../Images/c1fe32f1d19e9e841e59f5979df9c9fb.png)](https://i.stack.imgur.com/TbfUF.png)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2019-12-05T09:27:34.033

如果您想跨开发人员进行协作，则需要 Github。如果您是单一贡献者，git 就足够了，请确保定期备份您的代码

# mysql - 如何将表中的两个 varchar 字段设为主键？

> ID：13321557
> 
> 赞同：1
> 
> 时间：2012-11-10T11:20:38.610
> 
> 标签：mysql, innodb, composite-primary-key

MySQL 引擎：InnoDB

我有一张桌子，我需要两个字符串作为主键。这样做的原因是因为我希望 ON DUPLICATE KEY UPDATE 取决于这两个字符串。我怎么做？提前泰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T11:24:19.873

您不应将它们用作主键。将它们用作`UNIQUE`索引，并且`ON DUPLICATE KEY UPDATE`仍然可以使用。我建议您将主键设置为完全独立于您的数据的单个整数类型列。

看看这个例子：[http ://sqlfiddle.com/#!2/41f2d/1](http://sqlfiddle.com/#!2/41f2d/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:21:52.030

您可以更改表并将这两列定义为主键，

```
ALTER TABLE myTable ADD PRIMARY KEY (colA, colB); 
```

或在创建表期间

```
CREATE TABLE myTable
(
    colA INT, 
    colB INT,
    -- other fields here, ....
    CONSTRAINT tb_pk PRIMARY KEY (colA, colB)
) 
```

# css - 右侧有圆形按钮的CSS三角形边？

> ID：13321558
> 
> 赞同：2
> 
> 时间：2012-11-10T11:20:47.943
> 
> 标签：css

我试图在 CSS 中创建一个像这样的按钮，而按钮的尖部分没有那么尖？

这是CSS：

```
.home_icon { width: 40px; height: 25px; margin-left:10px; margin-top:8px; background: #FFCC05 url(../images/home_icon.svg) no-repeat 12px 4px; -webkit-border-radius: 11px 5px 5px 11px/17px 5px 5px 17px; -moz-border-radius: 11px 5px 5px 11px/17px 5px 5px 17px; border-radius: 11px 5px 5px 11px/17px 5px 5px 17px;} 
```

谁能有解决方案？只要我有一个按钮尖尖（左侧）的“等边”三角形，我就准备好更改css代码了吗？

[![对齐顶部](../Images/a93c7591e25c2684f6044cf873d8286b.png "工具提示")](https://i.stack.imgur.com/yLLmq.png "工具提示")
[（来源：[kerrydeaf.com](http://www.kerrydeaf.com/css.png)）]

**更新：** 这是我的 jsfiddle：http: [//jsfiddle.net/alma/eBtY4/1/](http://jsfiddle.net/alma/eBtY4/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:42:18.950

你能试试这样的吗

```
.home_icon
{
 width: 120px;
 height: 80px;
 background:red;
 position: relative;
-moz-border-radius:0 10px 10px 0;
-webkit-border-radius:0 10px 10px 0;
 border-radius:0 10px 10px 0;
}
.home_icon:before
{ 
content:"";
position:absolute;
right: 100%;
width: 0;
height: 0;
border-top: 40px solid transparent;
border-right: 26px solid red;
border-bottom: 40px solid transparent;
} 
```

# debugging - clr 4.0 中的方法表布局

> ID：13321568
> 
> 赞同：0
> 
> 时间：2012-11-10T11:22:35.850
> 
> 标签：debugging, c#-4.0, sos

我有两个类 Class1 和 Program a 如下所示：

```
 class Class1
 {
     public void xx()
     { 

     }
 }

 class Program : Class1
 {
     static void Main(string[] args)
     {

     }
 } 
```

但是当我看到方法表时，我看不到 Program 类中继承的公共函数。为什么会发生这种情况？我认为继承的方法应该存在于方法表程序类中。

# vb.net - 创建新位图时的参数异常

> ID：13321575
> 
> 赞同：0
> 
> 时间：2012-11-10T11:23:43.073
> 
> 标签：vb.net, bitmap

我有一个小问题，当我尝试以下操作时，我的代码无法正常工作：

```
 Dim filename As String = "C:\Users\NahNah\Desktop\HeightMap.png"
        IO.File.Create(filename)
        Dim h As New Structures.HeightMap(1, 10, 512)
        Dim graph As Graphics = CreateGraphics()
        Dim png As New Bitmap(filename)

        graph.DrawImage(png, Width, Height)
        h.Generate()
        graph = h.Draw(graph)
        graph.DrawImage(png, 1024, 1024)
        png.Save(filename) 
```

我在行得到一个参数异常

```
 Dim png As New Bitmap(filename) 
```

如您所见，我真的不知道自己在做什么，我需要帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:56:42.570

当然失败了......

```
 IO.File.Create(filename)
    ......
    Dim png As New Bitmap(filename) 
```

当您尝试打开一个像有效位图一样的空文件时，您期望会发生什么？

虽然我错过了很多细节（结构及其参数是一个谜，你从哪里得到宽度和高度......），我认为你应该遵循这种方法

```
Dim h As New Structures.HeightMap(1, 10, 512)
Using png As New Bitmap(Width, Height)   
    Using graph = Graphics.FromImage(png)
        h.Generate()
        graph.DrawImage(png, 1024, 1024)
        png.Save(filename)
    End Using
End Using 
```

# tridion - 设置内容过期日期并显示过期内容的默认内容

> ID：13321576
> 
> 赞同：2
> 
> 时间：2012-11-10T11:23:49.780
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在使用 Tridion 2011 SP1。有没有办法为发布的内容设置内容到期日期。此外，如果内容已过期，是否有任何方法可以显示过期内容的默认内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T11:58:48.887

是的，有几种方法可以让内容过期。首先，您需要在内容和/或页面元数据模式中创建到期日期字段。选项包括：

1) 使用每晚批处理作业取消发布您过期的内容。此作业将扫描您的内容到期日期元字段，取消发布过期内容并在其位置发布默认内容。您将使用核心服务连接到批处理作业应用程序中的 Tridion（如果在 CM 服务器上运行作业，则使用 Powershell）。这里的缺点是，如果你有很多内容，这可能需要相当长的时间才能运行。

2) 保持发布过期内容，并在前端 Web 应用程序中设置逻辑以使用默认内容忽略/替换过期内容（例如伪代码 [检查动态交付 API 的确切功能]：如果 date.now < content.metadata .expirydate 然后显示组件表示 X，否则显示组件表示 Y)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:08:15.587

我会选择以下方法：

将到期日期元数据添加到组件和页面：

*   使用自定义解析器排除任何过期的组件和页面。
*   发布过期内容时，您可以在过期日期安排发布操作。
*   使用搜索文件夹搜索过期内容。

此外，您可以将过期日期作为元数据包含在发布的页面中，以及过滤过期内容的可能逻辑。

有关更多信息，请参阅我的博客：[80.000 英尺](http://80000ft.blogspot.com)

# php - 在这段代码中找不到什么问题

> ID：13321584
> 
> 赞同：0
> 
> 时间：2012-11-10T11:24:55.643
> 
> 标签：php, javascript

我有以下脚本，它会在我的屏幕上弹出一个对话框，告诉我出现错误：

```
<script type="text/javascript">
var myFunc = function() 
{
    var html='<div class="cs-body">explanation of the error</div>';
    $(html).csDialog();
    return false;
};
</script> 
```

我希望当我的 php 脚本为 $error 返回“1”值时弹出此对话框，如下所示：

```
if ($error==1) {
echo "<script type='javascript'>$(document).ready(myFunc)</script>";
} 
```

即使我离开 if 子句并只是回显脚本，它也不会做任何事情。有人可以告诉我我在这里缺少什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:31:29.920

尝试将脚本类型从“javascript”更改为“text/javascript”

那成功了！感谢迷失资源！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:27:47.013

您需要确保在包含 jQuery*之后输出此脚本片段。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:28:05.423

检查您的javascript函数是否在运行时定义

```
echo "<script type='javascript'>$(document).ready(myFunc)</script> 
```

在*标记，只是为了看看它是否有效。PS：你应该只在*如果需要，请立即标记，否则，将它们添加到底部*标签。请记住，加载 js 文件会阻止加载任何其他页面资源***

 **** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T11:42:53.903

试试这个

```
<?php if ($error==1) {  ?>
 <script type="text/javascript">
   $(document).ready(myFunc)
 </script>";

<?php } ?> 
```

丁斯***

# gcc - 在 Fedora 上使用 gold 代替 ld 作为系统链接器

> ID：13321589
> 
> 赞同：6
> 
> 时间：2012-11-10T11:26:09.397
> 
> 标签：gcc, llvm, llvm-gcc

我想使用 gold 作为我的系统链接器而不是 ld，因为 ld 不支持 -fPIC 和 -shared。我按照这个特定的 url 这样做， [gold-plugin](http://llvm.org/docs/GoldPlugin.html) 根据文档，我运行**gcc -v filename.c**以找出 gcc 将运行的链接命令。 **然后它告诉我检查运行 collect2 的行并将其替换为 -plugin /path/to/LLVMgold.so。** 但是 gcc 和 collect2 是二进制文件。我研究了一下..并了解 gcc 调用 collect2 ，然后 collect2 通过搜索 ld-linux.so.2 调用系统链接器 ld。我在我的 Fedora 上安装了 gcc4.4.4 的 rpm 包...如何更改我的配置。

**如何让 gcc 调用 ld-new/gold 而不是 collect2？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-03T20:22:21.667

我回答有点晚了，但我意识到 Fedora 推出了与 binutils 一起分发的黄金。命令是`ld.gold`。您可以使用以下命令将其选择为默认链接器`alternatives`：

```
# alternatives --config ld

There is 2 program that provides 'ld'.

  Selection    Command
-----------------------------------------------
*+ 1           /usr/bin/ld.bfd
   2           /usr/bin/ld.gold

Enter to keep the current selection[+], or type selection number: 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:53:18.940

当我阅读像 ld 或 ar 这样的标准工具时，不能重命名或具有像 ld_1.6 或其他任何扩展名。也许您可以将 ld_new 的名称更改为 ld 并将其地址放在 .login.user 文件中的 PATH 之前，或者在命令行中临时添加。然后，当任何程序调用 ld 时，您可以确定您的 ld 将首先被调用，这是我在不更改 bin/ld 的情况下使用 ld-gold 的方式。

# c# - 附加属性 + 样式 -> ArgumentNullException

> ID：13321593
> 
> 赞同：5
> 
> 时间：2012-11-10T11:26:41.433
> 
> 标签：c#, wpf, triggers, styles

我创建了一个非常简单的附加属性：

```
public static class ToolBarEx 
{
    public static readonly DependencyProperty FocusedExProperty =
        DependencyProperty.RegisterAttached(
            "FocusedEx", typeof(bool?), typeof(FrameworkElement),
            new FrameworkPropertyMetadata(false, FocusedExChanged));

    private static void FocusedExChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (d is ToolBar)
        {
            if (e.NewValue is bool)
            {
                if ((bool)e.NewValue)
                {
                    (d as ToolBar).Focus();
                }
            }
        }
    }

    public static bool? GetFocusedEx(DependencyObject obj)
    {
        return (bool)obj.GetValue(FocusedExProperty);
    }

    public static void SetFocusedEx(DependencyObject obj, bool? value)
    {
        obj.SetValue(FocusedExProperty, value);
    }
} 
```

在 Xaml 中设置它非常好，但如果我尝试在样式中设置它：

我在运行时收到 ArguemntNullException（说：“值不能为空。参数名称：属性”）。

我无法弄清楚这里有什么问题。任何提示都适用！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T11:40:37.983

注册附加依赖属性时常犯的错误是错误地指定`ownerType`参数。这必须始终是注册类，`ToolBarEx`这里：

```
public static readonly DependencyProperty FocusedExProperty =
    DependencyProperty.RegisterAttached(
        "FocusedEx", typeof(bool?), typeof(ToolBarEx),
        new FrameworkPropertyMetadata(false, FocusedExChanged)); 
```

并且只是为了避免属性更改处理程序中不必要的代码，您可以安全地`NewValue`转换为`bool`：

```
private static void FocusedExChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var toolBar = d as ToolBar;
    if (toolBar != null && (bool)e.NewValue)
    {
        toolBar.Focus();
    }
} 
```

# javascript - 用Javascript在HTML表格中动态添加表格行

> ID：13321594
> 
> 赞同：0
> 
> 时间：2012-11-10T11:27:13.147
> 
> 标签：javascript, jquery

我有以下代码：

```
<body onload="LoadData()">
    <table id="myTable">
    </table>
</body> 
```

我有 Javascript 函数，如：

```
<script type="text/javascript">
    function LoadData()
    {
        var sTempTableRow='<tr><td>cell-1 </td><td>cell-2 </td><td>cell-3 </td><td>cell-4 </td></tr>'
        $('#myTable').append(sTempTableRow);
    }
</script> 
```

我已经尝试了很多次，并且总是面临一个例外，例如`Microsoft JScript runtime error: Object expected`.

请告诉我这里有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:29:51.360

相反，如果 onload 事件使用 jquery 的就绪：

```
<script type="text/javascript">
    $(document).ready(function()
    {
      var sTempTableRow='<tr><td>cell-1 </td><td>cell-2 </td><td>cell-3 </td><td>cell-4 </td></tr>';
      $('#myTable').append(sTempTableRow);
    });
</script>
<body>
    <table id="myTable">
    </table>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:34:20.443

你可以找到解决方案：

```
$(document).ready(function(){
     var sTempTableRow='<tr><td>cell-1 </td><td>cell-2 </td><td>cell-3 </td><td>cell-4 </td></tr>'
     $('#myTable').append(sTempTableRow);
    }); 
```

​并删除 onload 语句。

您可以在[此处](http://jsfiddle.net/s8nZ5/)找到解决方案。

# ruby-on-rails - 跨 Rails 应用程序访问类对象

> ID：13321595
> 
> 赞同：0
> 
> 时间：2012-11-10T11:27:40.850
> 
> 标签：ruby-on-rails, ruby, asset-pipeline

如果这已经在某个地方得到回答，请原谅我，因为我找不到它。

我试图在 lib 目录下包含我在 Rails 3 中编写的类，以便我的控制器可以访问这些方法。

该类在这个目录中，具体来说是：lib/assets，它被称为 Ducksboard。

我正在尝试将其包含在我的 application_controller 中：

```
class ApplicationController < ActionController::Base
  include Ducksboard 
```

但我不断收到这样的路由错误

> 未初始化的常量 ApplicationController::Ducksboard

我什至更新了应用程序配置文件，以便它在库中搜索资产

```
config.autoload_paths += %W(#{config.root}/lib) 
```

有没有更好的方法来创建类并在我的应用程序中访问它们？这似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:34:36.997

你为什么要把它放在 lib/ **assets**中？您知道 Rails 中使用了哪些资产，对吧？

无论如何，您需要在 config/initializers 中添加一个初始化程序

```
require_dependency 'assets/ducksboard' 
```

# css - 如何使用css调整右div的高度

> ID：13321600
> 
> 赞同：2
> 
> 时间：2012-11-10T11:27:58.183
> 
> 标签：css

我在父 div 中包含 2 列 div（左和右）。我希望在左或右 div 高度扩展时自动调整父 div 高度。我现在遇到的问题是父 div 的高度只是在左侧扩展时扩展，它不适用于右侧。我有所有 div 的 height:auto 。

有没有人有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:53:36.820

您可能正在使用`float`将右侧 div 移动到右侧。浮动不会自动调整父母的高度，您必须在 parent 的末尾添加以下代码`div`。

```
<br style="clear:both;" /> 
```

这将标记同一级别上所有浮动的结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:53:52.427

您可能正在浮动您的 div 以使它们彼此相邻。通过这样做，您“从流程中删除这些 div”，即父级不再将它们作为内容。

您可以通过提供`overflow: hidden`给父级或添加一个清晰的 div 来“绕过”这种效果。

带有溢出的示例：http: [//jsfiddle.net/BramVanroy/LJTGh/](http://jsfiddle.net/BramVanroy/LJTGh/)

重要的 CSS：

```
#wrapper {
    height: auto;
    width: 77%;
    margin: 20px auto;
    overflow: hidden; /*THIS IS IMPORTANT */
    border: 1px solid;
} 
```

**或者**

带有清晰的示例：http: [//jsfiddle.net/BramVanroy/LJTGh/1/](http://jsfiddle.net/BramVanroy/LJTGh/1/)

重要的 CSS：

```
.clear {clear: both;} 
```

​ 第一个选项需要多行 CSS，第二个选项需要多行 HTML 和多行 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:37:14.850

`float`例如，您可以这样做

```
<div class="parent" style="float:left">
   <div class="child" style="float:left"></div>
    <div class="child" style="float:left"></div>

</div> 
```

# javascript - 使用对象字面量创建原型库选项卡

> ID：13321602
> 
> 赞同：2
> 
> 时间：2012-11-10T11:28:05.350
> 
> 标签：javascript, prototypejs

我有一个这样的 HTML：

```
<dl>
    <dt class="tab-title">Title</dt>
    <dd class="tab-content">Ain't Life Grand</dd>
</dl> 
```

JS 之后的最终 HTML 需要如下所示：

```
<dl>
    <dt class="tab-title">Title</dt>
    <dd class="tab-content">Ain't Life Grand</dd>
    <dt class="tab-title">Another Title</dt>
    <dd class="tab-content">Ain't Life Grand again</dd>
    <dt class="tab-title">How'about Another</dt>
    <dd class="tab-content">Ain't Life Grand last!</dd>
</dl> 
```

我到目前为止的JS如下：

```
<script type="text/javascript">
    var arrayData = {
        titletwo: {
            title: 'Another Title',
            html: 'Ain\'t Life Grand again'
        },
        titlethree: {
            title: 'How\'about Another',
            html: 'Ain\'t Life Grand last!'
        }
    }
    for (var key in arrayData) {
        var obj = arrayData[key];
            $$('dl').insert('<dt class="tab-title">'.obj['title'].'</dt>');
        $$('dl').insert('<dd class="tab-content">'.obj['title'].'</dd>');
    }
</script> 
```

它似乎没有做任何事情。请投稿！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:52:31.530

你的方法很好，只是你做错了这两行：

```
$$('dl').insert('<dt class="tab-title">'.obj['title'].'</dt>');
$$('dl').insert('<dd class="tab-content">'.obj['title'].'</dd>'); 
```

因为这个，我可以告诉你来自 PHP；`.`不进行连接，`+`而是使用：

```
$$('dl').insert('<dt class="tab-title">' + obj['title'] + '</dt>');
$$('dl').insert('<dd class="tab-content">' + obj['title'] + '</dd>'); 
```

并不是说它是一个错误，而是一个简单的优先样式问题，使用点运算符`.`从对象文字中查询键值对，如下所示（以下是等效的）：

```
$$('dl').insert('<dt class="tab-title">' + obj.title + '</dt>'); 
```

`obj[ "..." ]`[在动态查询这些值时使用括号表示法。]

# c - 斐波那契数列出错了？

> ID：13321615
> 
> 赞同：4
> 
> 时间：2012-11-10T11:29:36.907
> 
> 标签：c

我们被要求编写一个程序来生成斐波那契数列作为我们的作业。所以我写了一个程序来生成前 n 个斐波那契数。这是我的第一个代码，它可以正常工作

```
# include <stdio.h>
void main()
{
    int a = -1, b = 1, c = 0, i, n, sum = 0 ;
    printf("Enter the limit : ") ;
    scanf("%d", &n) ;
    printf("\nThefibonacci series is : \n\n") ;

    for(i = 1 ; i <= n ; i++)
    {
        c = a + b ;
        printf("%d \t", c) ;
        b=c;
        a=b;
    }
} 
```

所以我尝试了各种组合，我发现如果我将第 12 行和第 13 行互换，我的代码会运行良好。IE

```
# include <stdio.h>
void main()
{
    int a = -1, b = 1, c = 0, i, n, sum = 0 ;
    printf("Enter the limit : ") ;
    scanf("%d", &n) ;
    printf("\nThefibonacci series is : \n\n") ;
    for(i = 1 ; i <= n ; i++)
    {
        c = a + b ;
        printf("%d \t", c) ;
        a=b;
        b=c;
    }
} 
```

这是相同的逻辑对。为什么第一个代码给我错误的输出？

什么是分段错误？（我的编译器经常告诉我我的代码中有分段错误）

PS-我是一个初学者。刚学 c 语言三周，我们正在学习循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T11:38:43.023

语句的顺序很重要。

```
b = c;
a = b; 
```

当它运行时，`b`和`a`都将等于 的原始值`c`，并且 的旧值`b`已经丢失。这可能不是你想要的。

```
a = b;
b = c; 
```

当它运行时，`a`将等于 的旧值`b`，`b`并将等于 的原始值`c`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T11:40:35.347

在斐波那契数列中，生成一个新数字作为前两个数字的总和。

假设前两个数字是`A`和`B`，而新生成的数字是`C`。现在对于下一次迭代，您需要忘记`A`&是您以前的新数字。`B``C`

要使你成为新的，`B`你需要做：`C``A``B`

```
A = B   // B becomes the new A
B = C   // C becomes the new B 
```

你正在做的是：

```
B = C   // C becomes the new B, but you've not saved the old value of B!!!
A = B   // Old value of B gone..B is now C, which is assigned to A 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T11:39:18.127

孤立地看这个：

```
 c = a + b ;
    printf("%d \t", c) ;
    b=c;
    a=b; 
```

两者的值`a`以及`b`执行此操作后的值将是`c`。

```
 c = a + b ;
    printf("%d \t", c) ;
    a=b;
    b=c; 
```

如果重新排列语句，`a`则获取 的旧值`b`，并`b`获取 的新值`c`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T11:39:49.277

行是按顺序执行的，因此在第一个示例中`b`变为`c`before `a`become `b`，实际上您正在分配`c`给两者`a`并`b`创建某种指数级数（但为零）而不是斐波那契数列。

分段错误意味着您的程序正在访问不允许访问内存的某个地方的内存，通常是因为您取消引用无效指针或访问超出范围的数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-10T11:43:35.903

> 这是相同的逻辑对。为什么第一个代码给我错误的输出？

你有没有想过，为什么

```
printf("Enter the limit : ") ;
scanf("%d", &n) ;
printf("\nThe fibonacci series is : \n\n") ; 
```

首先输出`Enter the limit`，然后等待你输入一个数字，然后输出`The fibonacci series is`——以特定的顺序？

为什么不反过来或同时做所有事情呢？

* * *

> 什么是分段错误？

一个简单的谷歌搜索会给你大量的解释。这意味着您已经访问了内存，这不是您可以访问的。

# python - django - 渲染到函数的响应 - 不工作

> ID：13321616
> 
> 赞同：0
> 
> 时间：2012-11-10T11:29:36.090
> 
> 标签：python, django

我有这样的看法：

```
 def myview(request):
      print "A"

      some_function()

      return HttpResponse("This should not appear")

  def some_function():
      return render_to_response("templ.html", {}, context_instance=RequestContext(request)) 
```

在这里，如果我这样调用函数，该函数将呈现模板：

```
 return some_function() 
```

但它总是希望函数返回，但我希望函数只在特定时间返回。我可以在视图中使用一些逻辑是否返回，但我要求可以在视图中执行所有操作，以便我可以简单地调用函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:46:00.060

您可以从函数呈现响应，但您需要的`return some_function()`并不`some_function()`孤单，在您的情况下 some_function() 确实执行，但返回值不会作为视图的返回值传递`myview()`

所以执行流程继续并到达`return HttpResponse("This should not appear")`，这就是您将在您的视图中得到的响应。

如果你有`some_function()`一个人（并且没有`return`），那么你的视图将返回没有响应（`myview()`作为一个什么都不返回的函数），并且 Django 会抱怨。

如果您在调用的函数上使用，您可以使用逻辑来控制流程`return`，例如：

```
def my_view(request):

    if request['x'] == 'a':
        return function_a()
    elif request['x'] == 'b':
        return function_b()

    return some_other_response() 
```

只需`function_x()`返回一个有效的响应。

# c++ - 具有超过 4 个参数的 cppcms url dispather

> ID：13321620
> 
> 赞同：2
> 
> 时间：2012-11-10T11:29:53.110
> 
> 标签：c++, web, cppcms

我开始使用 cppcms 制作一个简单的网站+“服务”，它从以下路径获取输入：/maindb/2012/11/2/finalists/....

现在我注意到漂亮的 url 处理只有一个正则表达式调度程序，最多 4 个参数将提供给被调用的函数，而没有正则表达式的函数甚至连路径都什么也得不到。

现在实现4个以上参数/子文件夹最可行的方法是什么。我是否必须编写自己的 url 处理，如果是，我从哪里获取 url？

url 类是否足够公开以继承它并轻松扩展它以获得更长的功能？

还是有其他方法我应该怎么做？（因为 4 个参数似乎有点少）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:05:10.527

两点：

1.  如果您有子文件夹，您可能正在寻找将 URL 组织到层次结构中。看

    [http://cppcms.com/wikipp/en/page/cppcms_1x_tut_hierarchy](http://cppcms.com/wikipp/en/page/cppcms_1x_tut_hierarchy)

2.  如果您需要超过 4 个参数，您应该：

    *   检查您是否真的正确组织了您的应用程序（见上文）
    *   将几个案例组合成一个正则表达式，然后将它们拆分为一个参数

        例如`(/\d\d\d\d/\d\d/\d\d)/(\w+)`，第一个将处理数据而不是单独的年月日。

PS：Url dispatcher 不是为了派生而设计的。

# java - 添加一个while循环，使用户输入的石头剪刀布游戏重复，直到用户结束游戏

> ID：13321627
> 
> 赞同：1
> 
> 时间：2012-11-10T11:30:28.330
> 
> 标签：java, java.util.scanner

好的，所以我编写了一个简单的石头剪刀布游戏，使用用户输入来玩。用户输入他们的选择，*随机函数*选择计算机运行，然后产生结果。在此之后，程序终止，因为它已经完成。我想使用一个 while 循环，这样当游戏结束时，它会重新开始，然后如果用户输入*exit*或*quit*程序将停止，这可以很容易地通过说诸如 while之类的话来完成`playerGo != exit`，play the game blah废话。但是，我无法让它工作，有人可以帮助我吗，我是 Java 菜鸟 :)

```
import java.util.Scanner;   

public class RockPaperScissors{   
  public static void main(String[] args){  

    Scanner input = new Scanner(System.in);

    int compGoInt;
    String compGo;
    String playerGo;

    System.out.println("You can type 'Exit' to quit the game at any time.");
    System.out.print("Please enter your choice. Rock, Paper or Scissors: ");
    playerGo = input.nextLine();

    compGoInt = (int) (Math.random() * 3);

    switch (compGoInt){
    case 0:
        compGo = "Rock";
        break;
    case 1:
        compGo = "Paper";
        break;
    case 2:
        compGo = "Scissors";
        break;
    default:
        compGo = "Error";
        System.out.println("Error.");
        break;
    }

    if (playerGo.equals(compGo)){
        System.out.println("Computer chooses "+compGo);
        System.out.println("It's a draw!");
    }

    else if ((playerGo.equalsIgnoreCase("Rock") && compGo.equalsIgnoreCase("Scissors")) ||
            (playerGo.equalsIgnoreCase("Paper") && compGo.equalsIgnoreCase("Rock")) ||
            (playerGo.equalsIgnoreCase("Scissors") && compGo.equalsIgnoreCase("Paper"))){
        System.out.println("Computer chooses "+compGo);
        System.out.println("Player Wins!");
    }

    else if ((compGo.equalsIgnoreCase("Rock") && playerGo.equalsIgnoreCase("Scissors")) ||
            (compGo.equalsIgnoreCase("Paper") && playerGo.equalsIgnoreCase("Rock")) ||
            (compGo.equalsIgnoreCase("Scissors") && playerGo.equalsIgnoreCase("Paper"))){
        System.out.println("Computer chooses "+compGo);
        System.out.println("Computer Wins!");
    }

    else{
        System.out.println("Something has gone wrong!");
        System.out.println("Player chose "+playerGo);
        System.out.println("Computer chose "+compGo);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:34:23.063

简单的说：

```
while(true) {
     if(playerGo.equalsIgnoreCase("Exit")) break;
     else //GameLogic
} 
```

不过，如果我可以这样说，您应该让用户选择一个数字，因为任何字母输入都容易出错。

为澄清起见：

```
import java.util.Scanner;   

public class RockPaperScissors{   
    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);

        int compGoInt;
        String compGo;
        String playerGo;

        while(true) {
            System.out.println("You can type 'Exit' to quit the game at any time.");
            System.out.print("Please enter your choice. Rock, Paper or Scissors: ");
            playerGo = input.nextLine();

            if(playerGo.equalsIgnoreCase("Exit")) break;    //Checks for exit condition.
            else { //GameLogic

                compGoInt = (int) (Math.random() * 3);

                switch (compGoInt){
                case 0:
                    compGo = "Rock";
                    break;
                case 1:
                    compGo = "Paper";
                    break;
                case 2:
                    compGo = "Scissors";
                    break;
                default:
                    compGo = "Error";
                    System.out.println("Error.");
                    break;
                }

                if (playerGo.equals(compGo)){
                    System.out.println("Computer chooses "+compGo);
                    System.out.println("It's a draw!");
                }

                else if ((playerGo.equalsIgnoreCase("Rock") && compGo.equalsIgnoreCase("Scissors")) ||
                        (playerGo.equalsIgnoreCase("Paper") && compGo.equalsIgnoreCase("Rock")) ||
                        (playerGo.equalsIgnoreCase("Scissors") && compGo.equalsIgnoreCase("Paper"))){
                    System.out.println("Computer chooses "+compGo);
                    System.out.println("Player Wins!");
                }

                else if ((compGo.equalsIgnoreCase("Rock") && playerGo.equalsIgnoreCase("Scissors")) ||
                        (compGo.equalsIgnoreCase("Paper") && playerGo.equalsIgnoreCase("Rock")) ||
                        (compGo.equalsIgnoreCase("Scissors") && playerGo.equalsIgnoreCase("Paper"))){
                    System.out.println("Computer chooses "+compGo);
                    System.out.println("Computer Wins!");
                }

                else{
                    System.out.println("Something has gone wrong!");
                    System.out.println("Player chose "+playerGo);
                    System.out.println("Computer chose "+compGo);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:44:06.853

您可以添加一个布尔变量 IsGameRunning = true。将整个登录包装在一个检查 IsGameRunning 状态的 while 循环中。在 switch 语句中添加一个 case 来检查用户输入“-1”，当用户输入“-1”作为输入时，case 会将 IsGameRunning 变量更改为 false。

简单，应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:55:10.007

```
boolean running = true;
do{
    System.out.println("You can type 'Exit' to quit the game at any time.");
    System.out.print("Please enter your choice. Rock, Paper or Scissors: ");
    playerGo = input.nextLine();
    running = !(playerGo.equalsIgnoreCase('Exit') || playerGo.equalsIgnoreCase('Quit'));
    if(running){
       //logic
       compGoInt = (int) (Math.random() * 3);
       ...
    }
}while(running) 
```

do while -> input 需要至少被询问一次。

并且对于

```
if (playerGo.equals(compGo)){
     System.out.println("Computer chooses "+compGo);
     System.out.println("It's a draw!");
 } 
```

`playerGo.equals(compGo)`->`playerGo.equalsIgnoreCase(compGo)`喜欢你的其他代码

# jquery - 小图像缩略图不起作用

> ID：13321628
> 
> 赞同：3
> 
> 时间：2012-11-10T11:30:30.080
> 
> 标签：jquery

我在 div 中创建了一堆锚点和图像，并使用以下代码加载它们：

```
$('#gallery img').each(function(i) {
    var imgFile = $(this).attr('src');      

}); // end each​​​​​ 
```

但是代码不起作用，我看不到图像。我得到一个 404

**问题 1：**你能检查一下有什么问题吗[http://jsfiddle.net/u3vFG/](http://jsfiddle.net/u3vFG/)

**ISSUE 2:**另外，我可以防止对 DIV id=gallery 元素中的图像和锚点进行硬编码吗？我可以动态加载这些 url 并创建图像和锚点，比如从 JSON 字符串吗？

基本上我想要一个空的 div

```
<div id="gallery">
    <!-- load images dynamically here -->
</div>​ 
```

并用 JSON 结果填充它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:52:01.770

您的第一个问题可能与这个问题有关：[如何纠正 imgur 403 禁止错误？](https://webapps.stackexchange.com/questions/25681/how-to-remedy-imgur-403-forbidden-errors)实际上，如果您链​​接的网站因某种原因被禁止（过去违反了 TOS），
imgur 会做出回应。`403 Forbidden`

第二个问题可以通过一个简单的[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)调用来解决：

```
var url = "http://example.com/get_gallery_images_json.php";
$.getJSON(url, function(data) {
    $.each(data, function(idx, imgFile) {
        var a = $("<a>").attr("href", imgFile);
        $("<img>").attr("src", imgFile).appendTo(a);
        a.appendTo($("#gallery"));
    }); 
}); 
```

这里`url`必须返回一个 JSON 字符串，它是图像 url 的数组，当你想填充你的画廊时，你必须调用它。例子：

```
["http://example.com/image1.png", "http://example.com/image2.png"] 
```

上面的 JSON 实际上是一个数组，而不是一个常规的对象。您可以在此处找到有关 JSON 的更多信息：[JSON - 维基百科](http://en.wikipedia.org/wiki/JSON)

**编辑：**添加了一些示例锚/图像附加实现和 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:54:14.627

不知道为什么问题 1 是一个问题。关于浏览器缓存的一些事情。请参阅我上面的评论。关于问题 2，您当然可以使用 JSON 字符串来提供数据。我假设您要从 url 中提取 json 数据。我还将假设您的 JSON 结构现在只是文件名和 URL，例如 {"filename":"someurl"}。

```
$.getJSON('http://someurl.com/getmystuff', function(data) {
    var $gallery = $('#gallery');
    $.each(data, function(name, url) {
        $gallery.append('<a href="' + url + '"><img src="' + url + '" width="70" height="70"/></a>');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:55:47.120

我认为该网站受到了防[盗链](http://en.wikipedia.org/wiki/Inline_linking)的保护。这意味着只有网站本身才能访问图像。

当您将图像链接粘贴到新选项卡中时，您有权访问和查看图像。然后图像缓存在浏览器中，当您刷新小提琴时，由于图像在浏览器缓存中可用，因此可以显示它们。

# regex - perl 正则表达式不是字符串的开头

> ID：13321635
> 
> 赞同：2
> 
> 时间：2012-11-10T11:32:12.953
> 
> 标签：regex, perl

我无法通过查看文档来解决这个问题。

我想匹配除了字符串开头之外到处出现的东西

```
"hello world hello hello" =~ m/^hello/ 
```

会匹配第一个你好

我想要的不是^，所以匹配第二个和第三个你好，但不是第一个

那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T11:36:41.107

这会做：

```
/(?<=.)hello/sg 
```

# android - OnPreferenceChangeListener 和 OnSharedPreferenceChangeListener 有什么不同

> ID：13321637
> 
> 赞同：11
> 
> 时间：2012-11-10T11:33:25.930
> 
> 标签：android, sharedpreferences, android-preferences

我想获得复选框首选项的值。哪种方法适合听偏好？

OnPreferenceChangeListener 和 OnSharedPreferenceChangeListener 之间的真正区别是什么？！

**更新** 为什么不调用 onSharedPreferenceChanged？

```
public class Setting extends PreferenceActivity implements
        OnSharedPreferenceChangeListener // ,OnPreferenceChangeListener
{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);// deprecated warning
    }

    @Override
    public void onSharedPreferenceChanged(
            SharedPreferences sharedPreferences, String key) {// DO Stuff
    }

    @Override
    protected void onResume() {
        super.onResume();
        // getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);
        // PreferenceManager.getDefaultSharedPreferences(this).registerOnSharedPreferenceChangeListener(this);
        this.getSharedPreferences("myPrefDB", MODE_PRIVATE)
                .registerOnSharedPreferenceChangeListener(this);
    }

    @Override
    protected void onPause() {
        super.onPause();
        // getPreferenceScreen().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this);
        // PreferenceManager.getDefaultSharedPreferences(this).unregisterOnSharedPreferenceChangeListener(this);
        this.getSharedPreferences("myPrefDB", MODE_PRIVATE)
                .unregisterOnSharedPreferenceChangeListener(this);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T11:43:50.270

这两者之间的区别在于，`OnPreferenceChangeListener`回调**仅在其**首选项更改时调用（适用于单个键），而当该对象中的**任何**首选项更改时（适用于所有键）`OnSharedPreferenceChange`时调用回调。**`SharedPreferences`**

 **所以，在你的情况下，你需要使用`OnPreferenceChangeListener`你的`CheckBoxPreference`.

这是一个例子：

```
Preference ckboxPref = this.findPreference(CKBOX_PREF_KEY);
ckboxPref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

    @Override
    public boolean onPreferenceChange(Preference preference,
            Object newValue) {
        //Do stuff
    }
}); 
```

如果您使用片段，则该方法`findPreference`不起作用，但您没有使用任何片段，所以没关系。**

# mysql - 重复键更新不更新而是插入一行

> ID：13321638
> 
> 赞同：0
> 
> 时间：2012-11-10T11:33:30.080
> 
> 标签：mysql

```
INSERT INTO min_product ( shopid, productid , outward ) 
SELECT shopid, productid , outward 
FROM main_product 
WHERE shopid= '51' 
    ON DUPLICATE KEY UPDATE outward  = ( SELECT sum(outward)  
                                         FROM main_product WHERE shopid= '51' ) 
```

main_product 表

```
productid outward shopid
    333      2      44//present
    343      4      44//present
    353      5      44//present
    363      1      44//present
    373      2      44//not present 
```

min_product 表

```
productid outward shopid

333      1      44
343      1      44
353      1      44
363      1      44 
```

* * *

问题是它不会更新重复行而是插入新行？查询中有什么问题`ON DUPLICATE KEY UPDATE`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:42:18.680

如果您的数据库允许插入重复行，则您的表定义不正确 - 仅在插入 UNIQUE 索引或 PRIMARY KEY 的副本时才执行更新

[INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# java - Swing TCP 客户端结束与服务器的连接，但之后可以重新连接

> ID：13321640
> 
> 赞同：0
> 
> 时间：2012-11-10T11:33:34.923
> 
> 标签：java, networking, tcp

我有一个 Swing 客户端，它有一个连接和取消按钮，因此它可以尝试连接到服务器或结束当前连接。我正在尝试使客户端可以连接到服务器，结束连接，然后再次连接到服务器多次。

我的理解是，通常当客户端和服务器结束连接时，无论是谁结束它，客户端都会关闭其流和套接字。显然，它们不能被重用于另一个连接尝试。现在我有 Socket 和流变量作为私有实例变量和一个连接到服务器的方法，它创建一个新的套接字，然后是打开和关闭流的方法。

只是想知道通常如何处理这样的事情。我曾想过使用一种巨大的方法来创建新的套接字、流并处理所有通信以及流和套接字的关闭，但这似乎很混乱。或者也许让一个新线程创建所有内容，然后在通信结束时终止线程。

想法赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:50:37.267

**-**当客户端连接到服务器时，在**服务器端**创建一个**单独的线程。**

 ****-**为该特定客户端执行**读取和写入**该**特定线程**的过程。`client socket`

 ****-**然后在完成后终止**客户端线程**。

**-**如果您再次尝试连接它，将跨越一个**新线程。**

**-**您始终可以创建一个`HashMap`以保持客户端-套接字与线程关系的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:44:58.273

您应该将所有“逻辑”放在一个不同于 GUI 的新类中。然后因为你有 2 个按钮，你的 Gui 类应该能够在逻辑类上调用至少 2 个方法：`connect()`和`disconnect()`. 然后在这些方法中，您可以处理连接到服务器、打开/关闭流等所需的所有工作......

如果您计划添加功能，这将使您的代码更清晰、更易于维护，并且可能更具发展性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:45:25.637

我宁愿为每个套接字创建创建一个线程，并使用该线程处理请求和响应。****

# c++ - 使用 fstream 的 C++

> ID：13321644
> 
> 赞同：1
> 
> 时间：2012-11-10T11:34:09.053
> 
> 标签：c++, fstream

好的，所以我从高中起就没有使用过 C++（曾经在 borland C++ 工作过）

现在我想用 C++ 解决一个问题，但我不明白为什么 fstream 不起作用

由于某种原因 ios::in 不起作用。

```
#include <fstream>
fstream f("Cities.txt,ios::in); 
```

如何正确使用 Fstream？

提前致谢！

注意：我使用的是 Visual Studio 2008

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T11:37:12.260

从改变

```
fstream f("Cities.txt,ios::in); 
```

至

```
std::fstream f("Cities.txt" , std::ios::in);
^^^                       ^   ^^^
namespace          you miss"  namespace 
```

完毕！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T11:40:05.080

你在高中学到的东西可能早在 97 年 C++ 标准化之前。根据标准，所有 C++ 库函数都是 std 命名空间的一部分。为了使用作为标准命名空间一部分的 fstream，您必须使用 std:: 对其进行限定，因此，您的语法为

```
#include <fstream>
std::fstream f("Cities.txt",std::ios::in); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T11:36:21.480

您必须首先创建一个`ifstream`类对象，然后打开文件。这样做。

```
#include <fstream>

std :: ifstream f ("Cities.txt",ios::in) ; 
```

然后检查它是否打开并开始使用它。

您还缺少`"`after 文件名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T12:53:18.080

作为 的替代方案[`std::fstream`](http://en.cppreference.com/w/cpp/io/basic_fstream)，请考虑[`std::ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)(and [`std::ofstream`](http://en.cppreference.com/w/cpp/io/basic_ofstream))：

```
#include <fstream>

…

std::ifstream f("Cities.txt");
std::ofstream o("output.txt");
std::string s;
while( f >> s )
  o << s; 
```

就个人而言，我觉得这比指定[open mode](http://en.cppreference.com/w/cpp/io/ios_base/openmode)更方便。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T11:55:03.217

你也可以写

```
#include <fstream>
using namespace std;
fstream f("Cities.txt",ios::in); 
```

该`using`指令允许您不要`std::`在一切之前写。当心，这可能是不好的做法，但在小程序中它不应该是一个问题。

# javascript - sqlite SELECT 查询错误

> ID：13321657
> 
> 赞同：-1
> 
> 时间：2012-11-10T11:36:30.590
> 
> 标签：javascript, sqlite

我正在尝试执行查询，但我无法理解问题所在。 `liste_id_ch`: 表示一个值数组。

```
 tx.executeSql("SELECT Distinct(IdGroupe)  from Champs where IdChamp IN '"+liste_id_ch+"' ", [], succes_recup_etap, erreur_recup_li

ste_id_grp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:41:19.710

```
String query = "";
for(int i=0;i<liste_id_ch.length();i++)
{
    if(i == liste_id_ch.length() - 1)
      query = query + liste_id.ch(i);
    else
      query = query + liste_id_ch(i) +",";
}

if(query.length() > 0)
{
    tx.executeSql("SELECT Distinct(IdGroupe)  from Champs where IdChamp IN ("+query+")", [], succes_recup_etap, erreur_recup_liste_id_grp);
} 
```

# javascript - 单击选项卡式菜单中的链接时，需要对网页显示图像吗？

> ID：13321673
> 
> 赞同：1
> 
> 时间：2012-11-10T11:38:30.953
> 
> 标签：javascript, jquery, html

单击选项卡式菜单中的链接时，我需要的图像应该出现在我想要所有链接数量的位置...这是我用于示例的代码...它对我不起作用...我需要知道正确答案...帮帮我...

```
<html>
<head>
<title>image event</title>
<script type="text/javascript" ></script>
<style type="text/css">
#detail {
    width:320px;
    height:180px;
    margin-bottom:12px;
    border: 1px solid #000000;
}
#detail div {
    position:relative;
    width:100%;
    height:100%;
}
#detail div img {
    position: absolute;
    top: 0;
    left:0;
    width:100%;
    height:100%;
    z-index:1;
}
#detail div span {
    color:#ffffff;
    position:absolute;
    bottom:0;
    text-align:center;
    width:100%;
    background: #000000;
    opacity: .8;
    z-index:2;
}
#links img {
    width:30px;
    height:30px;
    margin-left:16px;
}
</style>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery-1.7.1.js">

var container = $('#detail');
container.find('div:first-child').fadeIn("slow");
$('a').click(function () {
    var active = $(container.find('div')[$(this).prevAll('a').length]);
    active.siblings().hide();
    active.fadeIn("slow");
});
</script>

</head>
<body>
<div id="detail">
    <div id="div1" style="display:none">
        <span>CONTENT 1</span>
        <img src="images/1.jpg"/>
    </div>
    <div id="div2" style="display:none;">
        <span>CONTENT 2</span>
        <img src="images/2.jpg" />
    </div>
    <div id="div3" style="display:none">
        <span>CONTENT 3</span>
        <img src="images/3.jpg" />
    </div>
    <div id="div4" style="display:none">
        <span>CONTENT 4</span>
        <img src="images/4.jpg" />
    </div>
</div>
<div id="links">
        <a href="#" name="div1" ><img src="images/1.jpg" /></a>
        <a href="#" name="div2" ><img src="images/2.jpg" /></a>
        <a href="#" name="div3" ><img src="images/3.jpg" /></a>
        <a href="#" name="div4" ><img src="images/4.jpg" /></a>    
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:56:47.570

我会尽量保持简单：

```
<img id="image"/>
<button class="image-url" href="http://www.placehold.it/350x350/FFF">IMG 1</button>
<button class="image-url" href="http://www.placehold.it/350x350/EEE">IMG 1</button>
<button class="image-url" href="http://www.placehold.it/350x350/GGG">IMG 1</button>
<button class="image-url" href="http://www.placehold.it/350x350/DDD">IMG 1</button> 
```

```
$('.image-url').on 'click', (ev)->
  # Edit: the fade effect
  $('#image').fadeOut('slow')
  $('#image').attr('src', $(this).attr('href'))​
  $('#image').fadeIn('slow') 
```

[**小提琴**](http://jsfiddle.net/bUpTw/)

# c++ - 加密基于 C++/Perl 的应用程序的具体问题，以便数据库访问凭据永远不会被黑客入侵

> ID：13321680
> 
> 赞同：2
> 
> 时间：2012-11-10T11:39:53.973
> 
> 标签：c++, perl, encryption

我正在开发一个跨平台应用程序，该应用程序将使用 C++-> 移动设备和 Perl-> 台式电脑（如 Windows /Linux/Mac OS）创建。

现在，由于该应用程序可以下载，我担心黑客获取我的应用程序源代码的能力。

具体来说，该应用程序将连接到我的中央数据库——至少，我希望黑客无法获取我的数据库连接详细信息。理想情况下，我不希望代码的任何部分被黑客入侵。

基本上，用户可以使用这个应用程序更新他的一些信息——如果黑客掌握了这些数据，他们可以很容易地改变任何不幸的用户的数据。我想到的一件事是，用户最初必须使用 OAuth/OAuth2 进行身份验证（使用他的电子邮件 ID @yahoo/@hotmail/@gmail）——只有在那之后，应用程序才会真正显示管理界面。但无论如何，在某个时候，应用程序将连接到中央数据库——这就是为什么我不希望数据库的访问细节受到损害。

很多组织都在做这样的应用程序，所以他们自己一定也面临着这类问题吗？我想知道如何保护我的应用程序（最好是整个代码），并至少保护数据库凭据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T11:47:26.300

简单的答案是您不公开您的数据库。曾经。

在顶部添加一个服务层（可以是基于 HTTP 的，但不是必须的），它将处理身份验证和授权。然后，您的应用程序会使用用户的凭据登录并代表他们执行操作。您的服务层公开了您的应用程序与之通信的 API，但您的服务会发出并控制对数据库的*所有*调用。

您已经提到了 OAuth - 这是向此类 API 添加身份验证的一种完全可以接受的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T11:44:56.387

你不能。

从好的方面来说，您可以在服务器上设置安全性。连接客户端提供他们是给定用户的凭据。服务器在证明请求被允许后生成 SQL 命令。支持者可以做任何您的应用程序可以做的事情，但您的应用程序将无法对您的数据库做出不良行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T00:28:14.083

前面的答案是绝对正确的。您需要一个基于服务器的服务层，它提供身份验证/授权代码并与数据库交互。但是，这并不总是一个完美的世界，如果您坚持要求这些应用程序必须充当数据库客户端，您希望尽可能地限制暴露。通常这是通过让客户使用尚未被授予对通用数据库的任何访问权限的特定帐户来完成的。然后，您创建特定的存储过程，这些过程只能执行应用程序所需的操作和查询。这可以防止任何在代码中找到凭据的人在数据库中做任何不希望的事情，但您仍然会遇到任何人都可以通过查看代码来冒充他人的问题。没有 在没有服务器端组件的情况下防止这种情况的方法。对于封闭/受信任的用户组来说，这可能没问题，但我不会使用这种方法向公众发布任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T21:15:11.780

如果可以，请使用 OAuth2 并允许受信任的第三方处理身份验证。Twitter、Facebook 和 GitHub 对安全性都比较偏执；另一张海报是正确的：永远不要将直接数据库访问作为用户有权访问的应用程序的一部分公开；把它放在自己的服务后面。

祝你好运！:)

# android - 为什么线程在加载所有数据之前终止？

> ID：13321685
> 
> 赞同：1
> 
> 时间：2012-11-10T11:40:08.997
> 
> 标签：android, asynchronous

我正在使用 Thread 加载库（本机代码）必须将一些函数从 android 代码调用到本机代码。在线程终止一段时间后它工作正常，所以这些函数没有正确调用。目前我正在使用此代码创建线程。

```
class  aThread extends Thread {

  public static boolean finished;

  public void run() {

      if ( a_app.initApp() != 0) {           
        return;
      } else {           
      }
      a_app.startPjsua(ApjsuaActivity.CFG_FNAME);
      finished = true;
      a_app.deinitApp();         
  }
} 
```

过程是否正确。？我可以使用任何服务来解决这个问题，如果是的话，如何在活动和服务之间创建通信。

我的要求是我必须在后台连续调用一个函数，直到应用程序完全关闭。？这样做的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:42:04.660

你在寻找这样的东西吗？

```
boolean ok;
onCreate(Bundle a)
{
  ...
  ok=true;
  new aThread().start();
}

    class  aThread extends Thread {

      public static boolean finished;

      public void run() {
         while(ok==true)
         {
           if ( a_app.initApp() != 0) {           
             ok=false;
           } else { 
           a_app.startPjsua(ApjsuaActivity.CFG_FNAME);
           finished = true;
           a_app.deinitApp();           
           }

          //If you want to execute after some interval..
          //Thread.sleep(time_in_milliseconds);

         }
      }
    } 
```

这样，它将运行只要`ok=true`. 当您退出应用程序或想要停止线程时；设置 的值`ok=false`。

# android - 编写一个抢占所有其他 NFC 应用程序的 NFC 应用程序

> ID：13321688
> 
> 赞同：1
> 
> 时间：2012-11-10T11:40:44.673
> 
> 标签：android, nfc, rfid

有没有办法让 NFC 应用程序读取手机上可能下载的所有其他应用程序的标签？

通常，如果多个应用程序可以读取给定标签，则提示用户打开哪个应用程序。我想跳过这一步，让我的应用程序自动打开。

任何资源或实际代码都会非常有帮助。这只是一个研究项目的一部分，所以我什至不需要编写应用程序代码，我只是想知道这是否可能，如果我有时间，可能会构建一个概念验证应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:43:13.413

否，但您可以使用过滤器来指定要查找的特定 NDEF 标记类型。在这种情况下，只会启动您的应用程序，但如果另一个应用程序也在寻找完全相同的标签类型，则会启动两个应用程序。

# ruby-on-rails - 如何从 rake 路线中排除引擎路线

> ID：13321689
> 
> 赞同：2
> 
> 时间：2012-11-10T11:40:48.777
> 
> 标签：ruby-on-rails, routes

我在我的 Rails 应用程序中安装了一个引擎（社交流）。当我运行 rake 路线时，我会得到所有路线，包括安​​装的引擎的路线。这很有用，但有很多路线。

有没有办法运行**rake 路由**，以便它只返回父应用程序而不是引擎的路由？我仍然希望能够为引擎运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T11:50:37.970

我总是发现 rake 路由的输出过于冗长。我通常只是对我感兴趣的内容进行 grep。假设我正在寻找包含单词 login 的路线，只需运行：

`rake routes | grep login`

当然，这也适用于另一种方式。想要除包含登录名的所有路由吗？只需运行反向选择：

`rake routes | grep -v login`

因此，在您的情况下，只需对引擎名称进行反向选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T04:25:32.167

您还可以在调用时使“rake routes”仅显示特定控制器的路由（作为“主页”控制器的示例）

```
CONTROLLER=homepage rake routes 
```

# c++ - Do/While 循环不循环

> ID：13321695
> 
> 赞同：0
> 
> 时间：2012-11-10T11:41:57.993
> 
> 标签：c++, do-while

我是 C++ 的初学者，我正在做一个 do/while 循环练习，但我无法识别条件，更不用说它不能正确循环了。你们能给我一个关于如何解决这样一个简单问题的良好基础吗？我想尝试使用字符串来满足 do/while 循环的条件。

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main ()
{
    double mean = 0;
    string continuer;
    do
    {
        cout << "Do you want to proceed?" << endl;
        getline (cin, continuer);
        cout << "something" << endl;
        cin >> mean;
    }
    while (continuer == "Y" || continuer == "y");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:56:09.023

我从您的问题和评论中收集到的信息，您希望按照用户的意愿遍历循环。

你只需要一个`char`变量，就像这样。

```
string input ;
int number = 0 ;

do
{
  cout << "Please enter a number" << endl ;
  cin >> number ;
  cout << "If you want to continue, Press Y" << endl ;
  cin >> input ;

} while (input == "Y" || input == "y") ; 
```

这个 do-while 循环将至少执行一次，因为在循环执行结束时会检查条件。因此，即使用户在第一次询问时没有按 Y，此循环也会执行一次。之后，只要满足条件，它就会继续。

在此处了解有关 do-while 循环的更多信息。

[http://www.cplusplus.com/doc/tutorial/control/](http://www.cplusplus.com/doc/tutorial/control/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:45:33.093

你看到了什么？循环体应至少执行一次。这会发生吗？

此外，Continuer 可以长于一个字符，例如“Y\n”。对此进行测试。

这是我要做的：

```
#include <string>
#include <sstream>
using namespace std;

    int main ()
    {
        double number = 0;
        string continuer;
        int loop = 0
        do
        {

            cout << "Do you want to proceed?" << endl;
            getline (cin, number);
            cout << "something" << endl;
            cin>> mean;
            getline (cin, continuer);

            cout << "Your answer was '" << continuer << "'." << endl;
            loop = strcmp("Y", continuer);
            if (loop != 0) strcmp("y", continuer);
            if (loop == 0) cout << "Your choice is to stop." << endl;
            else cout << "Your choice is to continue." << endl;
        } while (loop == 0);
        cout << "Bye" << endl;
        return 0;
    } 
```

尽可能明确，直到您对所使用的语言和算法有足够的信心。更容易看到正在发生的事情，并且当它起作用时，很容易删除“cout”行。

# actionscript-3 - 读出多维数组

> ID：13321696
> 
> 赞同：0
> 
> 时间：2012-11-10T11:42:05.890
> 
> 标签：actionscript-3, flash

正确读取了多数组，但读出了他搞砸的数组。假设对数组中数组的每个元素执行的操作，当在 2 个数组中创建更多索引时，他不再执行此操作。

当我在 2 数组中创建第二个索引时，他不再对前一个索引执行此操作，只有最后一个索引。

谢谢

```
private var Enemy:Array = new Array();//1st array
private var EnemyHull:Array = new Array(); 
private var waves:Array = new Array();//2 array ==> array 1 get in this

private function enterFrame(e:Event):void
    {                               
        //Enemy Ai
        for(var i2:uint; i2 < waves.length; i2++){
            for(var i:uint; i < Enemy.length; i++){
                waves[i2][i].x -= 1;//when a second index in 2 array i made he doesn't do this action anymore on previous index, only the last made index.
            }
        }
    }

private function enemySpawnen(event:TimerEvent):void
    {           
        for(var i:uint = 0; i < hoeveelheidEnemy;i++){
            //
            }

            if(Enemy[i] != null){;
                viewContainer.addChild(Enemy[i]);
                //
            }
        }
        waves[iwaves] = Enemy;
        iwaves++;
    }

 function shoot(e:Event):void
            {
                //                  
                try{
                    for(var i2:uint; i2 < waves.length; i2++){
                        for(var i:uint = Enemy.length-1; i >= 0;i--){
                            if(kogel.hitTestObject(waves[i2][i])){
                                //
                                }
                            }
                        }
                    }
                }
                    catch(e:Error){

                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:28:06.077

您的 for 循环错过了正常工作的重要事项：您必须将迭代器（i 或 i2）初始化为起始值。

你写了 ：

```
for(var i2:uint; i2 < waves.length; i2++){
        for(var i:uint; i < Enemy.length; i++){
            waves[i2][i].x -= 1;
        }
    } 
```

但你需要的是：

```
for(var i2:uint = 0; i2 < waves.length; i2++){
        for(var i:uint = 0; i < Enemy.length; i++){
            waves[i2][i].x -= 1;
        }
    } 
```

不要忘记循环声明中的**= 0 ！**

# java-me - 在 Android 手机上运行 J2me 应用程序

> ID：13321703
> 
> 赞同：10
> 
> 时间：2012-11-10T11:43:18.570
> 
> 标签：java-me

是否可以在 Android 手机上运行 J2ME 应用程序？如果是这样，安装程序是什么？

否则，是否可以将 .jad 文件转换为 .apk？在这种情况下，程序是什么。

（我已经测试过[netmite](http://www.netmite.com/)提供的程序，但它似乎不起作用。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:46:18.173

使用此站点[http://www.netmite.com/android/srv/2.0/getapk.php](http://www.netmite.com/android/srv/2.0/getapk.php)，您可以将 J2ME 应用程序转换为 Android 应用程序。您只需要在其中提供您的 .Jad 和 .Jar 文件，它就会为您生成 Android 的可执行文件 .apk。

然而，它无法将 Java ME 的所有功能转换为 Android，但可以轻松转换基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T05:13:35.117

您可以在 android 中尝试 phoneME、netmite j2me app runner、jblend、jbed 之类的 jeme 模拟器。目前，phoneME 是最好的。你可以在这里获得各种版本的phoneME [http://davy.preuveneers.be/phoneme](http://davy.preuveneers.be/phoneme) 你还需要OI 文件管理器来选择phoneME 中的文件。

对于其他模拟器（如果您想尝试），可以在此处找到完整的指南[http://w3epic.com/run-java-apps-j2me-on-android-devices-guide/ 。](http://w3epic.com/run-java-apps-j2me-on-android-devices-guide/)

@dennis 我明白了，谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T17:19:34.923

找了好久的安卓JavaME模拟器，终于找到了。这就是您需要的：

[http://davy.preuveneers.be/phoneme/](http://davy.preuveneers.be/phoneme/)

毫无疑问，Android 是最好的。

**2016 年 1 月 15 日添加：** phoneME 的作者 Davy Preuveneers 关于 Álvaro Gutiérrez 评论的 Android 5.0+ 问题的回复：

> 你好，
> 
> 我正在运行 Android 5.0.1 的三星 Galaxy S4 上进行测试，“phoneME Advanced - Foundation Profile + MIDP FullHD Resolution”构建似乎在此设备上运行良好。
> 
> 另外，在这个线程 [Position Independent Executables 和 Android Lollipop](https://stackoverflow.com/questions/30498776/position-independent-executables-and-android-lollipop)之后，我跑了：
> 
> `$ readelf -l libcvm.so | grep -i "file type"`
> 
> 它报告：
> 
> `Elf file type is DYN (Shared object file)`
> 
> 所以根据网站，这是可以的。
> 
> 但是，对于 CDC 和 Foundation 配置文件（类似控制台的应用程序），确实存在出现此错误的问题：
> 
> “错误：仅支持与位置无关的可执行文件 (PIE)”
> 
> 然而，对于这 2 个配置文件，我调用本机可执行文件并将本机 stdout/stderr 流重定向到 Android，而对于 MIDP 双堆栈，我加载一个库并创建一个复杂的包装器以使事情顺利进行。
> 
> 我可以使用 -fPIE 和 -pie 选项重新编译，但最终会得到不再向后兼容运行 Android 4.0 及更低版本的设备的二进制文件。这就是为什么我在我的网站上为 Android 5+ 设备添加了一些额外的构建：
> 
> [http://davy.preuveneers.be/phoneme/?q=node/10](http://davy.preuveneers.be/phoneme/?q=node/10)
> 
> 最好的问候，戴维

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-28T22:24:57.987

MicroEmu开源项目还没有被提及，这里是：[https ://code.google.com/p/microemu/](https://code.google.com/p/microemu/)

# java - 将 ArrayList 复制到基元数组 - 鉴于此规范，是否有一些绕过？

> ID：13321706
> 
> 赞同：1
> 
> 时间：2012-11-10T11:43:40.270
> 
> 标签：java

所以我要写一个简单的东西，它读取输入文件直到 EOF 到达 - 该文件由 int-double 对组成。我要计算第二个数组中所有元素的平均值，最后将两组数据存储在各自的原始数据类型数组中。

当然，这个任务很简单，所以问题不直接与它有关——而是关于*数组*部分。因为我不知道要存储多少对，所以我使用两个 ArrayList 来存储它。然而，规范严格指出最后，整数和双精度数都必须存储在原始数组中——这就是我的问题。有没有比将 ArrayList 复制到原始类型数组更快的方法？我不能从一开始就使用数组，因为我不知道大小甚至上限，并且使用 toArray() 也行不通，因为最后我必须有原始 int[] 和 double[]，不是 Integer[] 和 Double[] 的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:47:03.497

您应该能够从 Double 转换为原始 double。

就像是：

```
 ArrayList<Double> test = new ArrayList<Double>();
    //Get your values into the ArrayList here.

    double[] values = new double[test.size()];
    for(int i = 0; i < test.size(); i++){
        values[i] = test.get(i).doubleValue();
    } 
```

据我所知，没有比直接复制它更“好”的方法了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:48:45.507

不，没有直接简单的方法可以做到这一点。将 an 转换`ArrayList`为普通数组并没有那么糟糕，因为 ArrayList 可以自动增长，而如果您的元素比您预期的多，您应该注意分配一个新数组。最后什么都不会改变，因为`ArrayList`完全相同的事情，但无需担心。

至于原始类型与类型在 Java 中没有问题，您几乎可以免费拆箱和装箱。

顺便说一句`ArrayUtil`，[apache-commons](http://commons.apache.org/)`toPrimitive`类具有为您执行此操作的方法。

# php - 这 while() 让我发疯

> ID：13321709
> 
> 赞同：0
> 
> 时间：2012-11-10T11:44:03.000
> 
> 标签：php

我知道这个问题真的很可怜，我只是犯了一个我无法意识到的大错误。我想加载一个带有日期的数组。我有开始日期和结束日期。这是我的代码：

```
$year_from=2011;
$month_from=1;
$year_till=2012;
$month_till=5;
$array=array();
$year=$year_from;
$month=$month_till;
while($year!=$year_till and $month!=$month_till){
    $array[]=$year.'-'.$month;
    if($month==12){
        $month=1;
        $year=$year+1;
    }else{
        $month=$month+1;
    }
}
print_r($array); 
```

该脚本的输出如下：

```
Array ( [0] => 2011-1 [1] => 2011-2 [2] => 2011-3 [3] => 2011-4 [4] => 2011-5 [5] => 2011-6 [6] => 2011-7 [7] => 2011-8 [8] => 2011-9 [9] => 2011-10 ) 
```

请帮助我知道这是一项非常简单的任务，但它让我发疯。非常感谢任何帮助。

**编辑：**

期望的输出：

```
Array ( [0] => 2011-1 [1] => 2011-2 [2] => 2011-3 [3] => 2011-4 [4] => 2011-5 [5] => 2011-6 [6] => 2011-7 [7] => 2011-8 [8] => 2011-9 [9] => 2011-10 [10] => 2011-11 [11] => 2011-12 [12] => 2012-1 [13] => 2012-2 [14] => 2012-3 [15] => 2012-4 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:48:03.567

```
while(!($year==$year_till and $month==$month_till)){
    $array[]=$year.'-'.$month;
    if($month==12){
        $month=1;
        $year=$year+1;
    }else{
        $month=$month+1;
    }
} 
```

现在条件为真，而月份和年份相等则为假，即您已到达目标日期*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:51:38.437

尝试：

```
$year_from=2011;
$month_from=1;
$year_till=2013;
$month_till=11;
$array=array();
$year=$year_from;
$month=$month_from;
while($year!=$year_till and $month!=$month_till){
    $array[]=$year.'-'.$month;
    if($month==12){
        $month=1;
        $year=$year+1;
    }else{
        $month=$month+1;
    }
}
print_r($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:00:48.143

您可以运行两个 for 循环： 1\. 外部 for 循环将持续 2011 年至 2013 年（包括）。2\. 内部 for 循环将经过 1 到 12 个月（将它们重置为 12 到 1）。内部循环将检查年份是否等于 2013，然后在第 11 个月停止。

伪代码：

```
for (int year = 2011; year <= 2013; year++)
    for (int month = 1; month <= 12; month++)
    {
        //Add to array year and month
        //Check if year == 2013 && month == 11 the break loop
        //Check if month == 12 then month = 1
    } 
```

我没有`t recognize the language you use (I think it`使用 PHP），但我确定它有处理 DateTime 的类，并且有将 +1 添加到月份的方法。在这种情况下，您使用 while 循环将 +1 添加到月份并检查我们是否达到了所需的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T12:01:06.600

我不确定你在逻辑上试图做什么，但这里是给出你想要的答案的代码：

```
<?php 

$year_from=2011;
$month_from=1;
$year_till=2013;
$month_till=13;
$array=array();
$i = 0;

while($year_from < $year_till){
  while($month_from < $month_till){
     $array[$i] = $year_from.'-'.$month_from;
     $i++;
      $month_from++;
   }
  $year_from++;    
  $month_from= 1; 
```

}

```
print_r($array);

?> 
```

这输出

```
Array ( [0] => 2011-1 [1] => 2011-2 [2] => 2011-3 [3] => 2011-4 [4] => 2011-5 [5] => 2011-6 [6] => 2011-7 [7] => 2011-8 [8] => 2011-9 [9] => 2011-10 [10] => 2011-11 [11] => 2011-12 [12] => 2012-1 [13] => 2012-2 [14] => 2012-3 [15] => 2012-4 [16] => 2012-5 [17] => 2012-6 [18] => 2012-7 [19] => 2012-8 [20] => 2012-9 [21] => 2012-10 [22] => 2012-11 [23] => 2012-12 ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T12:15:25.360

```
$year_from=2011;
$month_from=1;
$year_till=2012;
$month_till=5;
$array=array();
$year=$year_from;
$month=$month_from;
echo "<br>".$year_till. " " .$month."<br>"; 
while($year!=$year_till || ($year==$year_till && $month!=$month_till)){
    $array[]=$year.'-'.$month;
    if($month==12){
        $month=1;
        $year=$year+1;
    }
    else{
        $month=$month+1;
    }
}
print_r($array); 
```

# c# - 将数据网格项检查为数字

> ID：13321714
> 
> 赞同：0
> 
> 时间：2012-11-10T11:44:49.710
> 
> 标签：c#, windows, forms, types, row

我试图让数据网格根据项目的数量显示不同的颜色行。

我遇到的问题是 if 语句：

```
if (RowType == < 5) 
```

无效，如何解析要根据值检查的行类型？

```
foreach (DataGridViewRow row in dtaPart.Rows)
{
    //Cell three is where quantity is 
    string RowType = row.Cells[3].Value.ToString();

    if (RowType ==  //> 5)
    {
        row.DefaultCellStyle.BackColor = Color.White;
        row.DefaultCellStyle.ForeColor = Color.Black;
    }
    else if (RowType == //< 5)
    {
        row.DefaultCellStyle.BackColor = Color.Orange;
        row.DefaultCellStyle.ForeColor = Color.Black;
    }
    else if (RowType == //< 1)
    {
        row.DefaultCellStyle.BackColor = Color.Red;
        row.DefaultCellStyle.ForeColor = Color.Black;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:46:47.533

您可以使用`double value = double.Parse(RowType)`然后检查是否`value > 5, < 5, < 1`等。

但是，如果您的 datagrid 列已经包含数字类型，例如`double`or `int`，您不需要调用`ToString()`然后解析字符串；所以代替这个：

```
string RowTypeStr = row.Cells[3].Value.ToString(); 
double RowType = double.Parse(RowTypeStr); 
```

但您可以直接转换值：

```
double RowType = (double)row.Cells[3].Value; 
```

# .htaccess - 如何使用modrewrite实现子域url重写

> ID：13321715
> 
> 赞同：-1
> 
> 时间：2012-11-10T11:44:50.597
> 
> 标签：.htaccess, mod-rewrite

[当用户在http://xyz.mywebsite.com](http://xyz.mywebsite.com)是虚拟且不存在的地址栏中键入[http://xyz.mywebsite.com](http://xyz.mywebsite.com)时，我想将网站用户重定向到 www.mywebsite/users.php?user=xyz .

我是初学者，对 url 重写不太了解。试图搜索谷歌和堆栈溢出，但没有得到解决方案。

我从这个开始

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^([^.]+).mobilehealthnig.com$
RewriteRule (.*) http://www.mywebsite.com/users.php?subdomain=%1
</IfModule> 
```

也试过这个，但这些都不适合我

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.mywebsite.com
RewriteCond %{HTTP_HOST} ([^.]+).mywebsite.com
RewriteRule ^(.*)$ /users.php?subdoamin=%1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:40:04.240

好的，根据您的其他输入，我建议进行此设置：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(.+)\.mywebsite\.com$
RewriteRule (.*) http://www.mywebsite.com/users.php?subdomain=%1 [L]
</IfModule> 
```

如果这不起作用（我从你的评论中得到），你必须检查实际问题出在哪里：

*   重写是否有效？
*   这条规则有什么作用吗？什么？
*   这条规则被忽略了吗？为什么？

在这种情况下绝对最有意义的是打开重写日志以查看和了解重写引擎内部实际发生的情况。请看一下这两个命令`RewriteLog`和`RewriteLogLevel`里面提到的手册。启用可能为 7 的日志级别，并查看发出单个请求时记录的内容。它应该让您了解在哪里寻找问题的原因。

# c# - 有什么东西可以将 Olson 时区列表简化为 UI 的可读格式（就像 Google 日历一样）？

> ID：13321716
> 
> 赞同：4
> 
> 时间：2012-11-10T11:44:55.833
> 
> 标签：c#, javascript, asp.net-mvc, timezone, nodatime

我正在编写一个要求用户选择时区的应用程序。我正在从 Olson 数据库（通过 NodaTime）中获取我的时区列表，但至少出于我的目的，这是一个包含许多冗余条目的庞大列表。

当您在 Google 日历上创建活动时，它允许您从相对较小的列表中选择时区，并在必要时按国家/地区排序。我希望能够在不创建单独数据库的情况下实现如此简单的事情，这就是 [这个人所做](http://www.aviblock.com/blog/2009/03/12/presenting-a-list-of-timezones-to-the-user/)的。

因为我在前端使用 C# MVC 和 JavaScript 编写此代码，所以我正在寻找其中任何一种语言的库，它可以以用户友好的格式为我提供一个简化的列表，我可以在下拉列表中显示。有没有这样的事情，还是我必须自己创建并定期更新，就像超链接中显示的示例一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T11:54:33.567

这里有两个可能的答案：

*   文件中的信息`zone.tab`。碰巧的是，就在今天，另一位贡献者通过使用此数据的[hg 克隆邮寄了该列表。](http://code.google.com/r/mj1856-noda-time/source/detail?r=db68aca2aef855ed63dc2bb1accba51beafea889)我还没有看过它，但希望在周末这样做——经过一番按摩，我们希望能把它放到 1.1 分支中。

*   来自[CLDR](http://cldr.unicode.org/)的信息。这提供了向用户展示的建议示例城市——它正是为此目的而设计的（我相信即使是本地化的）。但是，您需要自己将其与 Noda Time 集成；我们目前没有任何代码，只是掌握 CLDR 需要一些时间。

很抱歉这个问题没有开箱即用 - 但我们知道它并希望随着时间的推移提供答案。

# windows-phone-7 - 在 XNA 中实现类似于 Battle Zone (1980) 的地形

> ID：13321726
> 
> 赞同：2
> 
> 时间：2012-11-10T11:46:09.363
> 
> 标签：windows-phone-7, 3d, xna, terrain

我正在为 Windows Phone 开发一个 3D 游戏，其中包括无限距离的地形和火山，类似于 Atari Inc. 的 Battle Zone (1980)。无论玩家驾驶多远，玩家都无法触及地形。目前，为了实现这一点，我在圆柱壁内映射了一个 2D 纹理。圆柱体也随着玩家移动，因此玩家永远无法到达地形。我不确定这是否是实现地形的好方法，因为我在将其映射到圆柱体壁上时面临纹理失真等问题。

请建议我在 XNA 中实现类似于 Battle Zone 的地形视图的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:34:57.880

通常，开发人员使用盒子（所谓的 SkyBox）代替圆柱体

![在此处输入图像描述](../Images/9b97cecea7456feeb6a279718e6db0cc.png)

它的多边形更少，而且通常失真更少（边缘可能有一些）

为了让它看起来更真实，一些开发人员（如 Valve）在第一遍中使用屏幕外渲染，包括天空盒 + 一些具有低细节的远处模型和移动的云精灵或带 alpha 的纹理环。两个视点是同步的（主摄像头和屏幕外摄像头），然后（不清除颜色缓冲区）它们在顶部渲染最终场景。由于远处的建筑物会移动一点，并且周围的场景看起来不那么平坦。为了避免通道之间的 z 缓冲区清理，他们只需在主通道场景的地板下（字面意思）进行第一次通道。

# c# - 清除文本框时未处理的异常

> ID：13321731
> 
> 赞同：2
> 
> 时间：2012-11-10T11:46:30.323
> 
> 标签：c#, winforms

> **可能重复：**
> [为什么我收到 FormatException 未处理错误？](https://stackoverflow.com/questions/13312411/why-am-i-getting-a-formatexception-was-unhandled-error)

我是 C# 和 Stack Overflow 的新手，所以如果这个问题不合适（或在错误的地方），请随时编辑或删除它。

我做了一个简单的计算器，但我有一个问题：当我清除一个文本框以输入另一个数字时，一条消息显示*“发生未处理的异常”*，可选择退出或继续。每次清除 texboxes 时，如何停止显示此消息？

```
private void button1_Click(object sender, EventArgs e)
{
    int value1 = Convert.ToInt32(textBox1.Text);
    int value2 = Convert.ToInt32(textBox2.Text);
    textBox3.Text = sum(value1, value2).ToString();
}

private void textBox1_TextChanged(object sender, EventArgs e)
{
    int vlera1 = Convert.ToInt32(textBox1.Text);
}

private void textBox2_TextChanged(object sender, EventArgs e)
{
    int vlera2 = Convert.ToInt32(textBox2.Text);
}

private void textBox3_TextChanged(object sender, EventArgs e)
{ }

int sum(int value1, int value2) {
    return (value1) + (value2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T11:51:25.160

使用`int.TryParse(string s, out int result)`而不是`Convert.ToInt32(string value, int fromBase)`
发生这种情况是因为您试图将 的空数据转换`TextBox`为`Int32`.

```
if (int.TryParse(textBox1.Text, out vlera1))
{
    //assign here    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:34:20.470

当您`FormatException`尝试将无法转换为 struct 类型的字符串转换`int`为`int`. 在进行转换之前，您可以随时`int.TryParse(string s, out int result)`查看是否`string`能够进行`int`转换。

**例子**

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    int x = 0; //Initialize a new int of name x and set its value to 0
    if (int.TryParse(textBox1.Text, out x)) //Check if textBox1.Text is a valid int
    {
        int vlera1 = Convert.ToInt32(textBox1.Text); //Initialize a new int of name vlera2 and set its value to (textBox1.Text as int)
    }
    else
    {
        //DoSomething if required
    }
}

private void textBox2_TextChanged(object sender, EventArgs e)
{
    int x = 0; //Initialize a new int of name x and set its value to 0
    if (int.TryParse(textBox2.Text, out x)) //Check if textBox2.Text is a valid int
    {
        int vlera2 = Convert.ToInt32(textBox2.Text);  //Initialize a new int of name vlera2 and set its value to (textBox1.Text as int)
    }
    else
    {
        //DoSomething if required
    }
} 
```

## **另一种解决方案**

您可能总是使用 try-catch 语句来查看您提供的代码是否引发了异常，并在需要时执行某些操作

**例子**

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    try
    {
        int vlera1 = Convert.ToInt32(textBox1.Text); //Initialize a new int of name vlera2 and set its value to (textBox1.Text as int)
    }
    catch (Exception EX)
    {
        MessageBox.Show(EX.Message); //(not required) Show the message from the exception in a MessageBox
    }
}

private void textBox2_TextChanged(object sender, EventArgs e)
{
    try
    {
        int vlera2 = Convert.ToInt32(textBox2.Text);  //Initialize a new int of name vlera2 and set its value to (textBox1.Text as int)
    }
    catch (Exception EX)
    {
        MessageBox.Show(EX.Message); //(not required) Show the message from the exception in a MessageBox
    }
} 
```

**注意**：try-catch 语句由一个 try 块和一个或多个 catch 子句组成，这些子句为不同的异常指定处理程序

谢谢，
我希望你觉得这有帮助:)

# android - 吐司不工作

> ID：13321733
> 
> 赞同：1
> 
> 时间：2012-11-10T11:46:39.853
> 
> 标签：android, maps, location, toast

所以我只是想获取用户的位置并在吐司中显示它......但它根本不起作用......我也试图在活动开始时显示吐司但即使在那个时候它也不起作用这是我的代码

```
package com.example.alert;

import com.example.alert.CurrentLocation.MyLocationListener;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class ViewAlerters extends Activity{

private Button addButton;
private Button removeButton;
LocationManager lm=(LocationManager)getSystemService(Context.LOCATION_SERVICE);

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view_alerters);
    Toast.makeText( ViewAlerters.this,"Hello",Toast.LENGTH_SHORT).show();

    LocationListener ll=new MyLocationListener();
    //lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5*60*10000, 0, ll);
    lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, ll);
    setUpViews();

}

private void setUpViews() {
    Toast.makeText( getApplicationContext(),"Hello",Toast.LENGTH_SHORT).show();

    addButton = (Button) findViewById(R.id.add_button);
    //alerterText = (TextView) findViewById(R.id.alert_list_text);
    removeButton = (Button)findViewById(R.id.remove_button);
    addButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(ViewAlerters.this,AddAlerter.class);
            startActivity(intent);
        }
    });

}

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(Location loc)
    {
        if(loc!=null)
        {
            double x;

            String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();
        /*  cr.moveToFirst();
            while(!cr.isAfterLast()) {
                 al.add(cr.getString(cr.getColumnIndex(dbAdapter.KEY_NAME))); //add the item
                 cr.moveToNext();
            }*/
        //  lm.addProximityAlert(loc.getLatitude(), loc.getLongitude(), 10009,, intent)

            //for loop, alerters retrieving one by one
//      x= calcDistance(loc.getLatitude(),loc.getLongitude(),z,y);
    //      if(x<1){
        //        Intent myIntent = new Intent(ViewAlerters.this,CallMode.class);
          //        startActivity(myIntent);
            }

        }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Disabled - @From :Alert Me",Toast.LENGTH_SHORT ).show();

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText( getApplicationContext(),"Gps Enabled - @From :Alert Me",Toast.LENGTH_SHORT).show();

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
    }

public double calcDistance(double latA, double longA, double latB, double longB) {

    double theDistance = (Math.sin(Math.toRadians(latA)) *  Math.sin(Math.toRadians(latB)) + Math.cos(Math.toRadians(latA)) * Math.cos(Math.toRadians(latB)) * Math.cos(Math.toRadians(longA - longB)));
    return new Double((Math.toDegrees(Math.acos(theDistance))) * 69.09*1.6093);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:48:27.037

不要使用 getApplicationContext：

```
Toast.makeText( this,"Hello",Toast.LENGTH_SHORT).show(); 
```

请参阅有关`Context`s 中的差异的问题：[差异以及何时使用 getApplication()、getApplicationContext()、getBaseContext() 和 someClass.this](https://stackoverflow.com/questions/10347184/difference-and-when-to-use-getapplication-getapplicationcontext-getbasecon)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T06:38:22.670

```
Toast.makeText( ViewAlerters.this,"Hello",Toast.LENGTH_SHORT).show(); 
```

# matlab - Matlab文本对象回车问题+图外文本

> ID：13321734
> 
> 赞同：1
> 
> 时间：2012-11-10T11:46:42.927
> 
> 标签：matlab, text, uicontrol

我正在尝试在情节顶部显示一些文字。使用

```
text(13,15200,('~ 12h'),'HorizontalAlignment','right','VerticalAlignment','middle','FontSize',10,'FontAngle','italic'); 
```

我可以创建我想要的文本框。但是我没有做的一件事是在该文本对象中创建一个回车符。已经尝试添加 '\r' 或 '\n' 但我得到的唯一结果是显示 '\r' 或 '\n' 而不会中断行。有任何想法吗？

我现在使用文本对象将文本放在轴内。但我仍在尝试找到一种方法将一些文本放在控制之外。搜索 stackoverflow 我发现这篇[关于使用 UICONTROL](https://stackoverflow.com/questions/10525890/matlab-add-text-to-the-outside-of-figure)的帖子。它工作得很好，但是当我导出到 EPS 时，文本似乎是像素格式而不是矢量 - 所以它看起来真的很糟糕。除了使用 uicontrol 还有其他方法吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:38:32.903

在未解释的文本中，您可以使用回车符指定换行符，回车符的 ascii 代码为 10。

```
text(x,y,sprintf('break after this%snew line here',char(10))); 
```

要允许文本在轴外，您需要关闭文本对象的剪辑

```
text(x,y,.....,'clipping','off') 
```

# java - 套接字问题 - 仅读取第一条消息

> ID：13321740
> 
> 赞同：0
> 
> 时间：2012-11-10T11:47:14.780
> 
> 标签：java, sockets

我对套接字很陌生，希望有人能帮助我。我有一些工作，但它没有很快发送信息，所以我已经重构，现在无法恢复任何工作。问题似乎是只有第一条发布的消息被读取，然后接收者坐在上面，`client = listener.accept();`即使我很确定发送者仍在发送消息

谁能看到我在这里可能做错了什么？

谢谢

```
 public class Sender {
        Socket server = null;
        DataInputStream inp = null;
        PrintStream outp = null;

        public Sender(){
            server = new Socket("127.0.0.1" , 3456);
            outp = new PrintStream(server.getOutputStream());
        }

        private void connectAndSendToServer(String message)  {
            outp = new PrintStream(server.getOutputStream());
            outp.print(message + "\n");
            outp.flush();

        }
    } 
```

接收器类

```
public class Receive{

    public String receiveMessage(int port) {
        String message= null;
        ServerSocket listener = null;
        Socket client = null;
        try{
            listener = new ServerSocket(port);
            client = listener.accept();         
            BufferedReader br = new BufferedReader(new InputStreamReader(client.getInputStream()));
            return br.readLine();

        }
        ...
        finally{
            try {
                if(client!=null && listener!=null){
                    client.close();
                    listener.close();
                }
            } 
            catch (IOException e) {

            }
        }
        return message;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:55:10.143

这是因为 a`ServerSocket`被用作普通 Socket 的入口点。`accept()`是一种阻塞操作，与正常接收/发送数据的线程相比，它通常在不同的线程上完成`Socket`。它坐在那里等待新的连接产生一个新的连接，`Socket`然后用于数据。

这意味着在接收消息时，您应该只调用 readLine() 从特定的 Socket 中读取。有一个`accept`inside`receiveMessage`是错误的，因为它是一个不同的操作，甚至是阻塞的。

```
Socket socket = serverSocket.accept();

ClientThread thread = new ClientThread(socket);

class ClientThread extends Thread {
  Socket socket;

  public void run() {
    while (!closed) {
      String line = reader.readLine();
      ...
    }
  } 
```

虽然您不需要为每个客户端都有一个线程，但是如果您想让您的服务器接受大于 1 的连接数，则至少需要两个线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T11:56:41.260

您没有正确使用 ServerSocket。您不应该为每条消息创建一个新实例，而是将其用作数据成员并运行无限循环以获取新的客户端套接字连接。因为您在本地创建它，所以当您从该方法返回时，由于不再使用和引用该对象（因此被 GC 处理），因此套接字已关闭。
类似（<条件满足>是伪代码定义您接受新连接的条件）：

```
while(< condition met >) {
    try {
        client = listener.accept();
        BufferedReader br = new BufferedReader(new InputStreamReader(client.getInputStream()));
        String str = br.readLine();
        //do something with str
    } finally {
        //close client socket
    }    
} 
```

更好的方法是在不同的线程中处理客户端套接字，以便主线程返回接受，而您可以并行处理客户端套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:39:18.047

试试我写的这个基本的聊天服务器。该服务器只是保持循环运行并将客户端发送的消息广播到与该服务器关联的所有其他客户端。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;

public class Server {

    // ///----------------------------------------Instance Variable Fields
    ServerSocket ss = null;
    Socket incoming = null;

    // ///----------------------------------------Instance Variable Fields

    // ///---------------------------------------- static Variable Fields
    public static ArrayList<Socket> socList = new ArrayList<Socket>();

    // ///---------------------------------------- static Variable Fields

    public void go() {

        try {

            ss = new ServerSocket(25005);

            while (true) {

                incoming = ss.accept();
                socList.add(incoming);
                System.out.println("Incoming: " + incoming);
                new Thread(new ClientHandleKaro(incoming)).start();

            }

        } catch (IOException e) {

            e.printStackTrace();
        } finally {

            try {
                ss.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

    class ClientHandleKaro implements Runnable {

        InputStream is = null;
        OutputStream os = null;
        InputStreamReader isr = null;
        BufferedReader br = null;
        PrintWriter pw = null;
        boolean isDone = false;

        Socket sInThread = null;

        public ClientHandleKaro(Socket sxxx) {

            this.sInThread = sxxx;

        }

        @Override
        public void run() {

            if (sInThread.isConnected()) {

                System.out.println("Welcamu Clienta");
                System.out.println(socList);
            }

            try {
                is = sInThread.getInputStream();
                System.out.println("IS: " + is);
                isr = new InputStreamReader(is);
                br = new BufferedReader(isr);

                os = sInThread.getOutputStream();
                pw = new PrintWriter(os, true);

                String s = new String();

                while ((!isDone) && (s = br.readLine()) != null) {

                    String[] asx = s.split("-");
                    System.out.println("On Console: " + s);

                    // pw.println(s);

                    Thread tx = new Thread(new ReplyKaroToClient(s,
                            this.sInThread));
                    tx.start();

                    if (asx[1].trim().equalsIgnoreCase("BYE")) {

                        System.out.println("I am inside Bye");
                        isDone = true;

                    }
                }
            } catch (IOException e) {

                System.out.println("Thanks for Chatting.....");
            } finally {

                try {
                    Thread tiku = new Thread(new ByeByeKarDo(sInThread));
                    tiku.start();
                    try {
                        tiku.join();
                    } catch (InterruptedException e) {

                        e.printStackTrace();
                    }

                    System.out.println("Accha to hum Chalte hain !!!");
                    System.out.println(socList);

                    br.close();
                    pw.close();
                    sInThread.close();

                } catch (IOException e) {

                }
            }

        }

    }

    class ReplyKaroToClient implements Runnable {

        public String mString;
        public Socket mSocket;

        public ReplyKaroToClient(String s, Socket sIn) {

            this.mString = s;
            this.mSocket = sIn;
        }

        @Override
        public void run() {

            for (Socket sRaW : socList) {

                if (mSocket.equals(sRaW)) {
                    System.out.println("Mai same hun");
                    continue;

                } else {
                    try {
                        new PrintWriter(sRaW.getOutputStream(), true)
                                .println(mString);
                    } catch (IOException e) {

                        System.out.println("Its in Catch");

                    }
                }
            }

        }

    }

    class ByeByeKarDo implements Runnable {

        Socket inCom;

        public ByeByeKarDo(Socket si) {

            this.inCom = si;
        }

        @Override
        public void run() {

            try {
                new PrintWriter(inCom.getOutputStream(), true)
                        .println("You have Logged Out of Server... Thanks for your Visit");
            } catch (IOException e) {

                e.printStackTrace();
            }

        }

    }

    public static void main(String[] args) {

        new Server().go();
    }
} 
```

# linux - 如何删除字符串并使用它前面的数字

> ID：13321742
> 
> 赞同：-3
> 
> 时间：2012-11-10T11:47:26.257
> 
> 标签：linux, bash, ubuntu

我有一个这样的文件。我使用 Ubuntu 和终端。

```
 1345345 dfgdfg
 1345 dfgdfg
 13445 dfgdfg
 1345345 ddfg
 15345 df
 145 dfgdfg
 45 dfgdfg
 15 dfgdfg 
```

我想创建一个脚本，我可以删除字符串并将数字相除或乘以这样的数字并在附近打印结果

```
 1345345 *3  or /3 result = 
 1345 *3 or /3
 13445 *3 or /3
 1345345 *3 or /3
 15345 *3  or /3
 145 *3 or /3
 45 *3  or /3
 15 *3  or /3 
```

这是一个包含 50 个或更多条目的文件，然后将其输出到一个新的文本文件中。所有这些都是我在 Ubuntu 上制作的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:35:32.577

一个非常基本的例子是这样的：

```
cat input | sed -r 's/ *([0-9]+).*/\1/' | xargs perl -e 'for($c=0;$c<=$#ARGV;$c++) {print ($ARGV[$c] . ": " . $ARGV[$c] * 3 . "\n");}' 
```

（输入是包含您的数据的文件）

给出：

```
1345345: 4036035
1345: 4035
13445: 40335
1345345: 4036035
15345: 46035
145: 435
45: 135
15: 45 
```

毫无疑问，您需要更加充实它才能达到您的全部目的，但这应该是乐趣的一部分

所以让我们分解一下。

1.  我们将输入文件的内容通过[管道](http://www.ucblueash.edu/thomas/Intro_Unix_Text/IO_Redir_Pipes.html)（使用）管道到[sed](http://www.grymoire.com/Unix/Sed.html)[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)中，该表达式只提取第一个数字并忽略其他所有内容：`|` `cat input | sed -r 's/ *([0-9]+).*/\1/'`

    *   它需要在任何空格或无空格之后可以找到的任何数字`*`（因为当我复制它时该示例有一些）
    *   和`([0-9]+)`
    *   后面可能跟其他任何东西`.*`
    *   并用它的 find 替换完整的字符串，这就是`s/input/replace/`构造的内容

    这将使您获得以下结果：

    `1345345 1345 13445 1345345 15345 145 45 15`

2.  您希望对此数据执行操作：为此，您通常需要使用一些编程语言，例如[python](http://python.org)、[perl](http://perl.org)、[ruby](http://ruby-lang.org)​​ 或其他任何适合您需要的语言。（有些事情你的 shell 会为你做的很好），我在这里使用了 perl，这让我们`| xargs perl -e 'for($c=0;$c<=$#ARGV;$c++) {print ($ARGV[$c] . ": " . $ARGV[$c] * 3 . "\n");}'`

    *   所以我们再次通过管道将数据传递给我们的下一个命令`|`
    *   要将前一个管道的输出作为参数发送到另一个程序，我们使用[xargs](http://en.wikipedia.org/wiki/Xargs)，就像在命令前面加上
    *   接下来在您的程序中循环（`for($c=0;$c<=$#ARGV;$c++) { ... }`通过提供的命令行参数，执行您的操作（这里我们执行 * 3）并打印结果（`print ($ARGV[$c] . ": " . $ARGV[$c] * 3 . "\n");`）。
3.  获得数据后，将其[重定向](http://en.wikipedia.org/wiki/Redirection_%28computing%29)到新文件，此处尚未完成

或者，您也可以使用[grep](http://en.wikipedia.org/wiki/Grep)或许多其他程序，这就是 *nix 的美妙之处，它有很多工具。但是，您正在寻找的基本概念是[过滤](http://en.wikipedia.org/wiki/Filter_%28Unix%29)数据，对其进行处理并再次将其吐出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T21:30:04.523

使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")：（在这个例子中，我不希望数字和字符串之间有空格）

```
perl -lne 's/\W//; print "$_ x 3 = ", $_ * 3' file.txt | tee newfile.txt 
```

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
awk '{print $1 " x 3 = " $1 * 3}' file.txt | tee newfile.txt 
```

仅使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")：

```
 while read n x; do echo "$n x 3 = $((n * 3))"; done < file.txt | tee newfile.txt 
```

# php - 在 preg 函数中保存一个值

> ID：13321745
> 
> 赞同：2
> 
> 时间：2012-11-10T11:47:44.790
> 
> 标签：php, regex

我有这个代码：

```
<?php
$array = array();
$test = 'this is a #test';
$regex = "#(\#.+)#";
$test = preg_replace($regex, '<strong>$1</strong>', $test);
echo $test;
?> 
```

我想做：`$array[] = $1`

请问有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:33:16.453

如果您使用 PHP ≥ 5.3.0，您可以使用[匿名函数](http://www.php.net/manual/en/functions.anonymous.php)和[`preg_replace_callback`](http://php.net/manual/en/function.preg-replace-callback.php). 首先是回调：

```
$array = array();
$callback = function ($match) use (&$array) {
    $array[] = $match[1];
    return '<strong>'.$match[1].'</strong>';
};

$input = 'this is a #test';
$regex = '/(#.*)/';
$output = preg_replace_callback($regex, $callback, $input);
echo "Result string:\n", $output, "\n";
echo "Result array:\n";
print_r($array); 
```

结果是：

```
Result string:
this is a <strong>#test</strong>
Result array:
Array
(
    [0] => #test
) 
```

在 PHP 5.3.0 之前，您只能使用[`create_function`](http://php.net/manual/en/function.preg-replace-callback.php)或在代码中其他地方定义的任何函数。他们都不能访问`$array`定义在父作用域中的局部变量`$callback`。在这种情况下，您要么必须为`$array`（呃！）使用全局变量，要么在类中定义函数并创建该类`$array`的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:21:05.863

在 PHP 4 >= 4.0.5、PHP 5 中，使用[preg_replace_callback](http://us3.php.net/preg_replace_callback)和`global`变量。

### PHP代码：

```
$array = array();
$input = 'this is a #test';
$regex = '/(#\w*)/';
$output = preg_replace_callback(
  $regex,
  create_function(
    '$match', 'global $array; 
     $array[] = $match[1]; return "<strong>" . $match[1] . "</strong>";'),
  $input);
echo "Result string:\n", $output, "\n\n";
echo "Result array:\n";
print_r($array); 
```

### 输出：

```
Result string:
this is a <strong>#test</strong>

Result array:
Array
(
    [0] => #test
) 
```

### 演示：

点击**[这里](http://ideone.com/y4KuXh)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T11:56:29.663

您可以使用：

```
preg_match($regex, $test, $matches);
$my_array = $matches[1]; 
```

# google-sheets - 获取填充列的长度

> ID：13321747
> 
> 赞同：0
> 
> 时间：2012-11-10T11:48:00.530
> 
> 标签：google-sheets, count, google-sheets-formula

我在 Google 表格中有一些列，想知道有多少列被填满，例如 100,220 或什么。

我怎样才能把这个东西公式，这样我就不必每次都计算列数或查找列数？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-11T05:06:31.393

你可以通过两种方式做到这一点

1.  通过电子表格中的一个或多个单元格中的公式
2.  通过使用电子表格的 Google 脚本向您的电子表格添加一个菜单项，单击该菜单项时执行脚本以将结果输出到屏幕上的 msgBox 对话框，或将结果输出到电子表格中的单元格。

这两种方法都很简单，几乎不需要研究。如果您需要更多帮助，请回复评论

# java - 如何从文件中获取 .java 文件的绝对路径？

> ID：13321749
> 
> 赞同：2
> 
> 时间：2012-11-10T11:48:08.997
> 
> 标签：java

我想在当前类的同一个包中创建一个新文件。

```
FileOutputStream fileOut = new FileOutputStream(YYY);
ObjectOutputStream out = new ObjectOutputStream(fileOut);
out.writeObject(this); 
```

为此目的，正确的 YYY 是什么？

我试过这个：

```
FileOutputStream fileOut = new FileOutputStream("myObject");
ObjectOutputStream out = new ObjectOutputStream(fileOut);
out.writeObject(this); 
```

但“myObject”文件创建于：c:\program files\eclipse

请帮忙！谢谢

编辑：也许值得一提的是这是一个 SVN 项目。也许与此有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:25:13.750

测试简单案例：

`URL resource = this.getClass().getClassLoader().getResource(this.getClass().getName().concat(".class"));`

这应该为您提供 .class 文件。请记住 .java 文件甚至可能不在系统上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:48:32.383

What you want is not possible because there might not be a .java file around (only a .class file), the .class file might reside inside a (nested) .jar file and the JVM does not know which classpath entry was used to locate the .class file.

That said, I have tried to solve the same problem for a project of mine. The code goes like this:

```
 private static List<Class> getClassesForPackage(String packagename)
            throws ClassNotFoundException
    {
        // This will hold a list of directories matching the pckgname.
        // There may be more than one if a package is split over multiple
        // jars/paths
        List<Class> classes = new ArrayList<Class>();
        List<File> directories = new ArrayList<File>();
        try {
            ClassLoader classLoader =
                Thread.currentThread().getContextClassLoader();
            if (classLoader == null) {
                throw new ClassNotFoundException("Can't get class loader.");
            }

            // Ask for all resources for the path
            Enumeration<URL> resources =
                classLoader.getResources(packagename.replace('.', '/'));
            while (resources.hasMoreElements()) {

                URL res = resources.nextElement();
                if (res.getProtocol().equalsIgnoreCase("jar")) {

                    JarURLConnection conn =
                        (JarURLConnection) res.openConnection();
                    JarFile jar = conn.getJarFile();
                    for (JarEntry e : Collections.list(jar.entries())) {

                        if (e.getName().startsWith(
                                packagename.replace('.', '/'))
                            && e.getName().endsWith(".class")
                            && !e.getName().contains("$"))
                        {
                            String className =
                                e.getName().replace("/", ".").substring(
                                        0,
                                        e.getName().length() - 6);
                            classes.add(Class.forName(className));
                        }
                    }
                }
                else
                    directories.add(new File(URLDecoder.decode(
                            res.getPath(),
                            "UTF-8")));
            }
        }
        catch (NullPointerException x) {
            throw new ClassNotFoundException(packagename
                + " does not appear to be "
                + "a valid package (Null pointer exception)");
        }
        catch (UnsupportedEncodingException encex) {
            throw new ClassNotFoundException(packagename
                + " does not appear to be "
                + "a valid package (Unsupported encoding)");
        }
        catch (IOException ioex) {
            throw new ClassNotFoundException(
                "IOException was thrown when trying "
                    + "to get all resources for " + packagename);
        }

        List<String> subPackages = new ArrayList<String>();
        // For every directory identified capture all the .class files
        for (File directory : directories) {

            if (directory.exists()) {

                // Get the list of the files contained in the package
                File[] files = directory.listFiles();
                for (File file : files) {

                    // add .class files to results
                    String fileName = file.getName();
                    if (file.isFile() && fileName.endsWith(".class")) {
                        // removes the .class extension
                        classes.add(Class.forName(packagename + '.'
                            + fileName.substring(0, fileName.length() - 6)));
                    }
                    // add directories to subpackages
                    if (file.isDirectory()) {
                        subPackages.add(packagename + "." + fileName);
                    }
                }
            }
            else {
                throw new ClassNotFoundException(packagename + " ("
                    + directory.getPath()
                    + ") does not appear to be a valid package");
            }
        }
        // check all potential subpackages
        for (String subPackage : subPackages) {
            classes.addAll(getClassesForPackage(subPackage));
        }
        return classes;
    } 
```

To find the directory of the corresponding .java file you need to configure the source directory you are using.

# javascript - Internet Explorer 开放开发者工具修复脚本 - WEIRD

> ID：13321757
> 
> 赞同：4
> 
> 时间：2012-11-10T11:49:49.383
> 
> 标签：javascript, internet-explorer, compatibility

我试图了解 WTF 将与 Internet Explorer 9 一起使用，这本身就绝非易事。我认为问题是由于浏览器可比性问题，但现在我不确定。

在登台服务器上，我已将标头设置为 Header set X-UA-Compatible: IE=Edge，但它没有任何效果。

例如，如果我重置浏览器，然后打开 URL：

[http://www.45sound.com/shows/259-heathers-trinity-college-dublin-18-9-2012](http://www.45sound.com/shows/259-heathers-trinity-college-dublin-18-9-2012)

单击时间轴，不会移动 nob 或更改视频。

但是，如果我打开开发人员工具，单击 F12，然后关闭它，而不重新加载页面，它可以完美运行...

这是一个加载问题，有人知道发生了什么吗？我不确定为什么此操作会对 javascript 产生影响。

任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T12:37:49.237

听起来您的代码`console`在 IE 中对象的怪异实现存在问题 - 只有在开发工具打开时它才会创建对象。也可以看看

*   [IE9是否支持console.log，它是一个真正的功能吗？](https://stackoverflow.com/q/5472938/1048572)
*   [IE8 中的 console.log 发生了什么？](https://stackoverflow.com/questions/690251/what-happened-to-console-log-in-ie8)
*   [“控制台”是 Internet Explorer 的未定义错误](https://stackoverflow.com/q/3326650/1048572)
*   主管说了什么：[Internet Explorer 9 有问题的控制台对象](http://whattheheadsaid.com/2011/04/internet-explorer-9s-problematic-console-object)

# php - 使用 htmlspecialchars 从 XSS 加固

> ID：13321759
> 
> 赞同：0
> 
> 时间：2012-11-10T11:50:34.507
> 
> 标签：php, javascript, sql-injection, xss

我拥有一个网站，用于发布带有数据库的问题和答案等论坛。我想强化我的代码以防止 XSS 和 SQl 注入。

对于 XSS，我使用了 folloinf 函数：Strip_tags htmlspecialchars htmlentities

我的问题是：它们之间有什么区别？另外，我遇​​到的问题是：1-我有一个文本区域和带有默认文本的文本框 2-使用上述功能时，我在文本区域中输入了任何测试..输出不会采用我写的内容textarea ..它将始终采用默认值...

这就是我所做的

```
$first_name = $_POST['first_name'];
$first_name = htmlspecialchars($first_name);
echo $first_name 
```

另外，任何人都对防止SQL注入有任何想法，我对此一无所知..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:16:35.450

直接看说明书。 [http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt->bind_param("s", $city);

    /* execute query */
    $stmt->execute();

    /* bind result variables */
    $stmt->bind_result($district);

    /* fetch value */
    $stmt->fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt->close();
}

/* close connection */
$mysqli->close();
?> 
```

对于 XSS，strip_tags 就可以了。除非有人破解了您的 FTP 密码并且他们进入并编辑您的文件，或者如果您允许他们上传漏洞，请确保您在上传文件夹中禁用脚本执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:17:32.807

为了防止 XSS，您应该根据您要输出到的区域使用不同的过滤规则。

`hmtlentities`（转换`<`为`&lt;`）很好，但是将不安全的变量输出到`<head>`or `<script>`or`<style>`标签；

另一个棘手的领域是标签属性，`<input onMouseDown=""`因为人们可以破坏你的字符串并添加他们自己的属性（就像 SQL 注入一样）。

该主题在以下地方进行了深入介绍：

[http://adamjonrichardson.com/2012/02/01/improving-xss-cross-site-scripting-prevention-in-four-simple-steps/](http://adamjonrichardson.com/2012/02/01/improving-xss-cross-site-scripting-prevention-in-four-simple-steps/) https://www.golemtechnologies.com/articles/prevent-xss

您还可以研究使用 PHP 的[filter_var](http://php.net/manual/en/function.filter-var.php)函数，非常有用。

# haskell - Haskell 隐藏包：Data.HashSet

> ID：13321762
> 
> 赞同：3
> 
> 时间：2012-11-10T11:50:38.993
> 
> 标签：haskell, hashset, ghci

我想在 Haskell 中使用 Data.HashSet。所以我把`import Data.HashSet`我的程序放在了开头。GHCI 抱怨：`Could not find module Data.HashSet`.

我的问题是：

*   我怎样才能让 Data.HashSet 工作？
*   我在某处读到这是隐藏模块或包的一部分。为什么模块隐藏？“隐藏”是否意味着我不应该使用它？
*   如果我不应该使用它，对于具有接近恒定查找时间的 haskell 数据结构，是否有更好的选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T11:56:17.610

[`Data.HashSet`](http://hackage.haskell.org/packages/archive/unordered-containers/0.2.2.1/doc/html/Data-HashSet.html)是[unordered-containers](http://hackage.haskell.org/package/unordered-containers)包中的一个模块，也是[hashmap](http://hackage.haskell.org/packages/archive/hashmap/1.3.0.1/doc/html/Data-HashSet.html)包中的一个模块。如果您安装了任一软件包，

```
import Data.HashSet 
```

应该开箱即用，因为它是两个包的暴露模块。要安装它（使用`unordered-containers`，因为这是常用的），

```
cabal update
cabal install unordered-containers --dry-run
-- check that it wouldn't reinstall anything, if all's fine
cabal install unordered-containers 
```

# javascript - atr onmouseover 到在 for 循环中创建的 Raphaël.js 变量

> ID：13321765
> 
> 赞同：0
> 
> 时间：2012-11-10T11:51:05.677
> 
> 标签：javascript, html, for-loop, raphael, onmouseover

希望任何人都可以提供帮助。

我有大量来自 svg 文件的路径（这里只显示几个），我将它们存储在一个数组中，以便在 Raphael 纸上动态创建它们。

```
var paths = "M539.99,181v95.141h-0.12L509.521,181H539.99zdivideM539.99,276.511v84.85h-30.41L539.99,276.511zdivideM539.99,85.021V181h-30.47L539.99,85.021"; // string with paths from svg file. Much much bigger in real code
var pathsArray = paths.split("divide"); // putting all paths in an array 
```

一切正常，直到我尝试将属性分配给 for 循环内的 onmouseover 函数中的路径。没发生什么事。并且控制台中没有错误消息。

```
var currentPath = window['section' + i];
currentPath.node.onmouseover = function() {  
    this.style.cursor = 'pointer'; 
    currentPath.attr("fill", "#ccc"); // <-- THIS PART DOESNT WORK
} 
```

我也试过这样：

```
window['section' + i].attr("fill", "#ccc"); 
```

这给了我一条错误消息： TypeError: 'undefined' is not an object (evalating 'window['section' + i].attr')

这是完整的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="raphael.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>

<script type="text/javascript">

var paths = "M539.99,181v95.141h-0.12L509.521,181H539.99zdivideM539.99,276.511v84.85h-30.41L539.99,276.511zdivideM539.99,85.021V181h-30.47L539.99,85.021"; // string with paths from svg file. Much much bigger in real code
var pathsArray = paths.split("divide"); // putting all paths in an array 

var paper = Raphael(10, 50, 1000, 1000);

for (var i=0;i<pathsArray.length;i++)
{ 

var currentPath = window['section' + i];

currentPath = paper.path(pathsArray[i]);
currentPath.attr("fill", "#f00");
currentPath.attr("stroke", "#fff");
currentPath.node.onmouseover = function() {  
    this.style.cursor = 'pointer'; 
    currentPath.attr("fill", "#ccc"); // <-- THIS PART DOESNT WORK
}

}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:54:55.640

尝试使用*这个*关键字，根据[文档](http://raphaeljs.com/reference.html#Element.mouseover)也有一个内置的鼠标悬停事件。因此，以下内容也应该起作用：

```
currentPath.mouseover(function() {  
    this.node.style.cursor = 'pointer';  // using 'node' property to get access to DOM element
    this.attr("fill", "#ccc"); // 'this' should refer to Raphael element
}); 
```

即使 currentPath 在处理函数内部，它也总是取循环中最后一个“currentPath”的值。

# php - 登录用户/使用 PDO 开始会话

> ID：13321769
> 
> 赞同：0
> 
> 时间：2012-11-10T11:51:42.237
> 
> 标签：php, mysql, pdo

我正在尝试使用 PDO 在我的网站上创建登录部分。

到目前为止，我有以下...

**配置文件**

```
 // Connect to DB
    $username = 'user@site.co.uk';
    $password = 'pass';

    try {
        $conn = new PDO('mysql:host=localhost;dbname=db', $username, $password);    
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } 
    catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
        }

?> 
```

**头文件.php**

```
// DB Config
include '/assets/config.php';

// User Session
$login = 'liam';
$pass = 'password';

$sth = $conn->prepare("SELECT * FROM access_users WHERE login = ? AND pass = ?");
$sth->bindParam(1, $login);
$sth->bindParam(2, $pass);
$sth->execute();

if ($sth->rowCount() > 0)
{
  // session stuff,
 // refresh page
}  

?> 
```

但是，我的浏览器不显示该页面，并且当我查看我的源代码时，其中没有包含任何数据，任何人都可以看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:51:26.010

你已经设置了`PDO::ERRMODE_EXCEPTION`。这意味着，您应该将语句包装在一个`try/catch`块中并测试`execute()`返回代码：

```
try {
    $sth = $conn->prepare("SELECT * FROM access_users WHERE login = ? AND pass = ?");
    $sth->bindParam(1, $login);
    $sth->bindParam(2, $pass);
    if (!$sth->execute()) {
        $info = $sth->errorInfo();
        echo 'Error: ' . $sth->errorCode() . ' (' . $info[2] . ")\n";
    } elseif ($sth->rowCount() > 0)
    {
        // session stuff,
        // refresh page
    }
} catch (PDOException $e) {
    echo 'Exception: ' . $e->getMessage() . "\n";
} 
```

当然，还要放入一些跟踪语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:16:55.930

尝试这个：

```
// User Session
$login = 'liam';
$pass = 'password';
$sth = $conn->prepare("SELECT * FROM users WHERE username = :username AND password = :password");
$sth->execute(array(":username" => $login,":password" => $pass));

if ($sth->rowCount() > 0)
{
// session stuff,
// refresh page
  echo $sth->rowCount();
} 
```

确保您有用户名“liam”并在数据库中传递“密码”

# php - Symfony2：使用 ajax 和验证更改选择

> ID：13321771
> 
> 赞同：21
> 
> 时间：2012-11-10T11:51:52.243
> 
> 标签：php, forms, symfony

场景：我有一个包含 2 个选择的表单。当用户从第一个选择中选择某些内容时，第二个选择会填充新值。这部分工作正常。

但是该表单没有得到验证，因为它包含一些初始表单中不允许的选项。

形式：

```
<?php

class MyType extends AbstractType
{
    private $category;

    public function __construct($category = null)
    {
        $this->category = $category;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('category', 'choice', array(
            'choices' => array(
                'foo' => 'foo',
                'bar' => 'bar'
            )
        );

        $builder->add('template', 'choice', array(
            'choices' => $this->loadChoices()
        );
    }

    private function loadChoices()
    {
        // load them from DB depending on the $this->category
    }
} 
```

最初的类别是`foo`. 因此 foo 的模板被加载并设置为选项。但是，如果用户选择`bar`，则会加载条形模板。但是表单仍然有 foo 选项并且不验证。

解决这个问题的最佳方法是什么？

我发现的一种方法是重新启动控制器中的表单：

```
<?php

$form = $this->createForm(new MyType());

if ($request->getMethod() === 'POST') {
    if ($request->request->has($form->getName())
        && isset($request->request->get($form->getName())['category'])) {
            $form = $this->createForm(new MyType($request->request->get($form->getName())['category']));
    }

    // ...
} 
```

这有效，但我无法测试它，因为它`IllegalArgumentException`在设置值时抛出并且只是假设默认值。有没有更好的解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-14T07:51:31.727

我认为你必须使用事件来管理这个，这是更正确的方法

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('category', 'choice', array(
        'choices' => array(
            'foo' => 'foo',
            'bar' => 'bar'
        )
    ));

    $ff = $builder->getFormFactory();

    // function to add 'template' choice field dynamically 
    $func = function (FormEvent $e) use ($ff) {
        $data = $e->getData();
        $form = $e->getForm();
        if ($form->has('template')) {
            $form->remove('template');
        }

        $cat = isset($data['category'])?$data['category']:null;

        // here u can populate ur choices in a manner u do it in loadChoices
        $choices = array('1' => '1', '2' => '2');
        if ($cat == 'bar') {
            $choices = array('3' => '3', '4' => '4');
        }

        $form->add($ff->createNamed('template', 'choice', null, compact('choices')));
    };

    // Register the function above as EventListener on PreSet and PreBind
    $builder->addEventListener(FormEvents::PRE_SET_DATA, $func);
    $builder->addEventListener(FormEvents::PRE_BIND, $func);
} 
```

# github - Github 相当于 Launchpad “问答”

> ID：13321775
> 
> 赞同：0
> 
> 时间：2012-11-10T11:52:20.113
> 
> 标签：github, launchpad

对于 Launchpad 项目，可以通过[问答](https://answers.launchpad.net/)提供社区支持。如何为我的 Github 项目启用类似的功能？Github 或其他网站是否已经提供了一些东西？目的是帮助例如软件安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:41:05.350

我相信 GitHub 上没有类似的东西。但是，利用可用的工具，我将使用项目 wiki 来构建关于您的软件的知识库，并使用问题跟踪器（可能带有某种“文档”类别/标签）作为重现问答线程的一种手段，理想情况下应该会导致在一个维基页面（你需要自己整理）中，对特定问题有某种明确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:28:07.220

Github 中没有问答功能。但是，可以在其他站点（例如 googlegroups）上创建问答和论坛。

# java - android - 在字符串中搜索和替换

> ID：13321777
> 
> 赞同：0
> 
> 时间：2012-11-10T11:53:04.297
> 
> 标签：java, android, string

这是字符串的一部分

```
test="some text" test2="othertext" 
```

它包含更多具有相同格式的相似文本。每个“语句”由空格分隔如何按名称搜索（test，test2）并替换其值（“”之间的东西）？在java中

我不知道它是否足够清楚，但我不知道如何解释它

我想搜索“测试”并将其内容替换为其他内容

将 test=" **some text** " test2="othertext" 替换为其他内容

编辑：这是文件的内容

```
 test="some text" test2="othertext" 
```

我在字符串中读取了该文件的内容

现在我想用别的东西替换**一些文本**

**有些文本**不是静态的，它可以是任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:35:48.553

**您可以使用** `replace()` **String 的方法，它有 3 种类型和 4 种变体：**

*   `revStr.replace(oldChar, newChar)`
*   `revStr.replace(target, replacement)`
*   `revStr.replaceAll(regex, replacement)`
*   `revStr.replaceFirst(regex, replacement)`

**例如：**

```
String myString = "Here is the home of the home of the Stars";
myString = myString.replace("home","heaven"); 
```

**////////////////// 编辑部分 ////////////////////// ///////////**

```
String s = "The quick brown fox test =\"jumped over\" the \"lazy\" dog";
String lastStr = new String();
String t = new String();

Pattern pat = Pattern.compile("test\\s*=\\s*\".*\"");
Matcher mat = pat.matcher(s);

        while (mat.find()) {

            // arL.add(mat.group());
            lastStr = mat.group();

        }

Pattern pat1 = Pattern.compile("\".*\"");
        Matcher mat1 = pat1.matcher(lastStr);

        while (mat1.find()) {

            t = mat.replaceAll("test=" + "\"Hello\"");

        }

        System.out.println(t); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:05:25.840

所以你想用其他东西替换“测试”的每个实例？

假设字符串名称是 myString：

```
myString = myString.replace("test","something else"); 
```

这是你想要做的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T12:14:48.063

我认为您要求您以字符串的形式从文件中获取数据，假设您的字符串是，

> String s = "My name="sahil" 和 my company="microsoft"，我也住在 country="india""。

现在你想用“mahajan”替换“sahil”，用“google”替换“microsoft”。

我尝试使用字符串方法来实现此功能，但没有找到相关的结果。但我可以为您提供一些方法。您可以使用**regionMatches**，**indexOf("name="")**。但是这些函数将帮助您找到*sahil*（假设）的位置。但是这里的 replcae 函数很难工作，因为它替换了字符序列，您应该知道确切的字符序列。

现在您可以尝试使用字符串方法。它可以提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T12:43:15.563

我没有对此进行测试，但它应该可以工作：

```
String mFileContents;
private void replaceValue(String name, String newValue) {
    int nameIndex = mFileContents.indexOf(name);
    int equalSignIndex = mFileContents.indexOf("=", nameIndex);
    int oldValueIndex = equalSignIndex + 2;
    int oldValueLength = mFileContents.indexOf("\"", oldValueIndex);
    String oldValue = mFileContents.substring(oldValueIndex, oldValueLength);

    String firstHalf = mFileContents.substring(0, oldValueIndex -1);
    String secondHalf = mFileContents.substring(oldValueIndex);
    secondHalf.replaceFirst(oldValue, newValue);

    mFileContents = firstHalf + secondHalf;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T12:04:04.303

```
String a = "some text";
    a = a.replace("text", "inserted value");
    System.out.print(a); 
```

试试这个

# asp.net - 如果页面 abc.aspx 包含用户控件，如何使用更新面板？

> ID：13321781
> 
> 赞同：-1
> 
> 时间：2012-11-10T11:53:56.137
> 
> 标签：asp.net, user-controls, updatepanel

我有一个网页 abc.aspx 使用此页面（如母版页），在此页面中，我使用此 i 框架作为内容占位符编写了一个 Html 标记 iframe。

我在这个 iframe 标记中调用 home.aspx 页面。

在我的 home.aspx 页面中，我有一些用户控制。所以，我的问题是

在这种情况下如何实现更新面板请告诉我解决方案。

谢谢你，戈鲁斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:08:18.943

在 web.config 中注释 xhtmlConformance 标签后，更新面板正常工作。

```
<system.web>
    <xhtmlConformance mode="Legacy" />
</system.web> 
```

请参考以下链接.... [http://weblogs.asp.net/scottgu/archive/2006/12/10/gotcha-don-t-use-xhtmlconformance-mode-legacy-with-asp-net-ajax。 aspx](http://weblogs.asp.net/scottgu/archive/2006/12/10/gotcha-don-t-use-xhtmlconformance-mode-legacy-with-asp-net-ajax.aspx)

# ajax - 同位素 jQuery 库的 Minima.pl 实现？

> ID：13321784
> 
> 赞同：4
> 
> 时间：2012-11-10T11:54:27.197
> 
> 标签：ajax, html, css, jquery-isotope

我不明白的一件事是 Minima.pl (http://minima.pl/pl) 是如何在 Isotope 库中实现该功能的，其中单击缩略图会打开更大的图像库（单个可单击图像，单击它使它在画廊中的其余图像中循环）同时使用同位素项目？

这是我走了多远-> [http://tinyurl.com/cr5kzml](http://tinyurl.com/cr5kzml)

任何人对我所缺少的东西有任何想法，我该如何让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:43:53.917

好吧，我是 minima.pl 网站的作者 ;)。

放大后负责重新定位瓷砖的部分单击一个：

```
$('#mainContent').isotope('reLayout', function(){
  $('html, body').animate({scrollTop: item.offset().top - 10}, 400);
}); 
```

它还负责将浏览器窗口滚动到单击磁贴的顶部。

在加载点击的磁贴内容（通过 AJAX）后，我触发了上述操作。诀窍是在放大点击的图块的同时触发它。

我很乐意回答任何其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:11:42.537

通过单击缩略图，ajax 函数返回相同的画廊，但缩略图的替换更大。然后让同位素重新排列画廊。您可以在此处找到示例：http: [//www.maxmedia.com](http://www.maxmedia.com)或[http://www.phpdevpad.de](http://www.phpdevpad.de)（我自己的站点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:55:13.803

实际上，这很容易实现。通常，单击一个同位素 .item 可以将其最大化，再次单击可以将其最小化。如果您想在单击的同位素 .item 中进行交互，您只需不将最小化功能附加到它。相反，单击另一个同位素 .item 会最小化先前选择的 = 最大化的项目。通过跟踪先前选择的 .item，在最大化的 .item 内单击不会关闭它。仅通过单击每个同位素 .item 内的“标题”区域才允许最大化和最小化的示例的基本逻辑：

```
$(document).ready(function () {

var $container = $('#container');

        $container.isotope({
            itemSelector: '.item',
                masonry: {
                columnWidth: 128 // corresponding to .item divs width relationships
                }
        });

        // $container.isotope('shuffle'); // randomise for every new visitor

        $items = $('.item'); // to reference methods on all .item divs later

        $('.header').click(function () { // instead of registering the entire .item div (default use), only its .header div (child div) receives clicks

        var $previousSelected = $('.selected'); // necessary for switching

        if ($(this).parent().hasClass('selected')) { // use $(this).parent() (not $(this)), because the .header div is a child of the .item div

            $(this).parent().removeClass('selected');
            $(this).parent().children('.maximised').hide();
            $(this).parent().children('.minimised').show();

            $items.find('.minimised, .header').removeClass('overlay'); // returns all .minimised divs to previous state after the .item is closed again

            } else {

            $previousSelected.removeClass('selected');
            $previousSelected.children('.minimised').show();
            $previousSelected.children('.maximised').hide();

            $(this).parent().addClass('selected');
            $(this).parent().children('.minimised').hide();
            $(this).parent().children('.maximised').show();

            $items.not('.selected').find('.minimised, .header').addClass('overlay'); // adds .overlay on each .item which is not currently .selected

            }

        $container.isotope('reLayout'); // comment out to mimick old masonry behaviour

        });

    }); 
```

每个 Isotope .item 内部的实际交互性可以随心所欲地编码；硬编码或动态...

# c# - Windows 8 应用程序如何连接到 Socket 服务器

> ID：13321787
> 
> 赞同：2
> 
> 时间：2012-11-10T11:54:35.080
> 
> 标签：c#, sockets, windows-8

我已经使用此示例[socketAsyncEventArgs完成了服务器](http://www.codeproject.com/Articles/22918/How-To-Use-the-SocketAsyncEventArgs-Class)

在视觉工作室 2010 和 .net 4.0 中。

现在我正在尝试使用 StreamSocket 从 Windows 8 应用程序连接到它，但我收到“访问被拒绝”消息。这是客户端代码：

```
private StreamSocket streamSocket;
    public string Server = "192.168.0.101";
    public int Port = 9900;

    public async void Connect()
    {
        streamSocket = new StreamSocket();
        Connect();
        try
        {
            await streamSocket.ConnectAsync(
                new Windows.Networking.HostName(Server),
                Port.ToString()); // getting Acces Denied here

            DataReader reader = new DataReader(streamSocket.InputStream);
            reader.InputStreamOptions = InputStreamOptions.Partial;
            while (true)
            {
                var bytesAvailable = await reader.LoadAsync(1000);
                var byteArray = new byte[bytesAvailable];
                reader.ReadBytes(byteArray);

            }
        }
        catch (Exception e)
        {
            MessageBox(e.StackTrace);
        }
    } 
```

如何解决问题？还有其他方法可以使用此服务器发送和接收消息吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T12:43:32.977

您可能还会在错误消息中看到以下内容：

```
WinRT information: A network capability is required to access this network resource 
```

这是因为您需要向应用程序添加允许您访问本地网络的功能。双击`Package.appxmanifest`项目中的文件。单击`Capabilities`选项卡。将`Private Networks (Client & Server)`功能添加到您的项目中。

# javascript - Jquery mouseover 不适用于精灵动画

> ID：13321789
> 
> 赞同：0
> 
> 时间：2012-11-10T11:54:48.867
> 
> 标签：javascript, jquery, animation, mouseover

我不能给工作鼠标悬停。

我想在某个位置移动一个 div，并通过鼠标悬停、鼠标单击和拖放进行一些 div 交互。但是，我被阻止了，因为第一步，鼠标悬停，不喜欢工作。那是代码：

```
 (function($) {
        $(document).ready(function() {

        $("#dxani").mouseover(function() { $("#dxani").css("background-image", "url(img/sprite/fr1.png)") });
        $('#dxani').sprite({fps: 3, no_of_frames: 4})
        $("#dxani").animate({marginLeft: "+=200px", }, 20000 );
        setTimeout(function() {$("#dxani").css("background-image", "url(img/sprite/sprite1sx.png)")} , 20000 );
        $("#dxani").animate({marginLeft: "-=200px", }, 20000 );
        setTimeout(function() {$("#dxani").css("background-image", "url(img/sprite/sprite1dx.png)")} , 40000 );
        $("#dxani").animate({marginLeft: "+=400px", }, 40000 );
        setTimeout(function() {$("#dxani").css("background-image", "url(img/sprite/sprite1sx.png)")} , 80000 );
        $("#dxani").animate({marginLeft: "-=400px", }, 40000 );
        setTimeout(function() {$("#dxani").css("background-image", "url(img/sprite/sprite1dx.png)")} , 120000 );
        $("#dxani").animate({marginLeft: "+=800px", }, 80000 ); 
        setTimeout(function() {$("#dxani").css("background-image", "url(img/sprite/sprite1dx.png)")} , 200000 );
        $("#dxani").animate({marginLeft: "-=800px", }, 200000 );    

        });
    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:34:50.130

`background-position`如果精灵要显示不同的区域，您需要更新值

# c++ - Geany 简单链接

> ID：13321797
> 
> 赞同：1
> 
> 时间：2012-11-10T11:55:32.450
> 
> 标签：c++, geany

当我运行并构建一个简单的程序时，它失败了。这是错误消息：

> g++ -Wall -o "main" "main.cpp" (in directory: /home/markuz/Desktop) /tmp/ccHV9wPu.o: In function `main': main.cpp:(.text+0x11): undefined reference to`Test::display()' collect2: ld returned 1 exit status 编译失败。

这是文件。编译和构建命令是geany 1.22的默认

```
//main.cpp
#include "imba.h"
int main(){
Test t;
t.display();
return 0;
}

//imba.h
class Test{
public:
void display();
};

//imba.cpp
#include <iostream>
#include "imba.h"

void Test::display(){
std::cout << "oi";
} 
```

![在此处输入图像描述](../Images/a2d3bd0d47b509a94ac4c291af65f129.png)

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:58:11.797

您还需要`imba.cpp`在编译步骤中添加该文件。尽管您已将标头包含在主文件中，但您尚未编译它的源代码，因此链接器无法找到目标文件`imba.cpp`- 这就是错误所抱怨的

# php - 保护 codeigniter 视图

> ID：13321805
> 
> 赞同：0
> 
> 时间：2012-11-10T11:55:58.360
> 
> 标签：php, codeigniter, session

我在 Codeigniter 中有这个查看页面

```
<?php 
$is_logged_in = $this->session->userdata('is_logged_in');

        if (!isset($is_logged_in) || $is_logged_in != true) 
        {
            return false;
        }
 ?>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="<?php echo base_url();?>css/style.css" type="text/css" media="screen" />
</head>
<body>
    <p><?php echo form_open('it/create'); ?></p>
    <p><?php echo form_input('department', 'department'); ?></p>
<p><?php echo form_textarea('problem', 'Issue'); ?></p>
    <p><?php echo form_submit('submit', 'Submit'); ?></p>
    <p><?php echo form_close(); ?></p>
</body>
</html> 
```

这是控制

```
 class Create extends CI_Controller {

        public function __construct()
        {
            parent::__construct();
            $this->is_logged_in();
        }

        public function create_issue()
        {
            $this->load->view('v_it');
        }

        public function is_logged_in()
        {
            $is_logged_in = $this->session->userdata('is_logged_in');

            if (!isset($is_logged_in) || $is_logged_in != true) 
            {
                echo "you don't have permission";
            }
        }
    } 
```

但是当我直接从 url 登录到视图时，它会毫无问题地打开，这有什么问题，我什至像添加的那样直接在视图页面中添加了会话，但它打开了。

更新：这就是我在另一个控制器中添加 SESSION 的地方：

```
$data = array(
                'username' => $this->input->post('username'),
                'is_loged_in' => 'true' );

            $this->session->set_userdata($data);
            redirect('create/create_issue'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:13:05.837

```
public function create_issue()
    {
        $is_logged_in = $this->session->userdata('is_logged_in');

        if (!isset($is_logged_in) || $is_logged_in != true) 
        {
            echo "you don't have permission";
        } else {
            $this->load->view('v_it');
        }
    } 
```

在你的控制器中。不确定您认为 return false 应该在视图中做什么，但它没有退出任何东西，只是将 false 返回到无处，然后继续显示 HTML。您确实希望控制器本身具有这种逻辑，您只需检查是否已登录，如果它返回 false，则根本不加载视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T12:15:29.757

您应该将授权逻辑写入控制器，它可能会对您有所帮助。即使您需要写入逻辑以查看参考下方

在控制器中：

```
public function create_issue()
    {
        $is_logged_in = $this->session->userdata('is_logged_in');

        if (is_logged_in ) 
        {
           redirect();//redirect your login page to the user
        } else {
            $this->load->view('v_it');
        }
    } 
```

在视图逻辑中：

```
<?php 
    $is_logged_in = $this->session->userdata('is_logged_in');

            if (!isset($is_logged_in) || $is_logged_in != true) 
            {
                echo "you are not valid user";
            }
else{

     ?>
    <html>
    <head>
        <title></title>
        <link rel="stylesheet" href="<?php echo base_url();?>css/style.css" type="text/css" media="screen" />
    </head>
    <body>
        <p><?php echo form_open('it/create'); ?></p>
        <p><?php echo form_input('department', 'department'); ?></p>
    <p><?php echo form_textarea('problem', 'Issue'); ?></p>
        <p><?php echo form_submit('submit', 'Submit'); ?></p>
        <p><?php echo form_close(); ?></p>
    </body>
    </html>
<?php } ?> 
```

# assembly - 汇编程序如何处理“org 100h”指令？

> ID：13321808
> 
> 赞同：3
> 
> 时间：2012-11-10T11:56:08.873
> 
> 标签：assembly

我知道，这个指令是做什么的。据我所知，程序加载器没有看到这个指令，那么，汇编程序如何处理它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T12:08:02.653

它将汇编期间的当前地址设置为 100h。就是这样。一个简单的任务。

阐述：

该指令不控制以下指令在结果图像中的放置位置，而是控制指令在加载到内存后的放置位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T18:30:11.283

“org <100h>”指示**编译器**使用未来的运行时信息来评估地址，因为二进制图像将加载偏移量（在您的上下文中，前 100h 字节可能用于 PSP 等）

这可以用来访问同一段中的任何数据（通常在 DS=CS 时，尤其是对于 com 文件，当“除了 CS 之外一无所知”时），或者在极少数情况下对绝对偏移量执行 JMP 时。

换句话说，它使段中的所有进一步标签都从特定偏移量开始计算：仅此而已。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-02-08T03:48:44.573

大多数程序在 Windows 中加载时通常从 100 开始所以当我们编写 org 100h 时，它会在运行时告诉编译器从 100 开始存储数据。即如果你使用 60h 或 70h 编译器将产生数据错误可能出现在 60或您给定的位置

# android - 我应该使用什么来以特定速率更新来自 android 的数据？

> ID：13321815
> 
> 赞同：0
> 
> 时间：2012-11-10T11:56:36.667
> 
> 标签：android

我有安卓应用程序。例如，它需要每 1 小时从 Internet 下载一次数据。它将运行 6 个异步任务，从互联网下载数据并将它们保存到数据库。我只想问，我应该用什么？警报管理器或服务？如果您能给我一些链接，例如以特定速率下载数据，这对我很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:36:09.507

> 我只想问，我应该用什么？警报管理器或服务？

两者，如果你要自己做 HTTP 工作。您可能需要将其设为[a`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)或以其他方式使用 a`WakeLock`来保持设备唤醒。

如果您更愿意使用`DownloadManager`HTTP 工作，那么您不必处理服务、 .`AsyncTasks`和`WakeLock`. 在这种情况下，您可以使用`AlarmManager`and a `BroadcastReceiver`。但是，`DownloadManager`仅适用于 API 级别 9 及更高级别。

# gnuplot - 为 OS X Moutain Lion 选择哪种 Gnuplot 变体？

> ID：13321817
> 
> 赞同：1
> 
> 时间：2012-11-10T11:56:42.883
> 
> 标签：gnuplot, osx-mountain-lion, macports

我想知道您为 Mac OS X Moutain Lion 推荐的最适合的 Gnuplot 变体？最好的，我的意思是 OS X 性能最高的，并且避免使用 X11。

```
port variants gnuplot 
```

> *   **[+]aquaterm** : 启用 AquaTerm 终端
> *   **emacs** : 使用 gnuplot 的 emacs 模式
> *   **[+]luaterm** : 启用基于 lua 的终端
> *   **no_x11**：旧版兼容性变体
> *   **[+]x11** : 启用 X11 支持
> *   **[+]pangocairo** : 启用基于 cairo 的终端
> *   **qt** : 启用 qt 终端
> *   **tutorial** : 构建教程（需要 tex 安装）
> *   **通用**：为多种架构构建
> *   **wxwidgets**：启用 wxt 终端（wxWidgets 2.8，仅限 32 位）
> *   **wxwidgets_devel**：启用 wxt 终端（使用 wxWidgets 2.9，支持 64 位）

**[+]**代表什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:13:34.640

我会选择 +aquaterm +pangocairo。请注意，这些并不是真正的变体——它仍然是相同的 gnuplot——这只是 gnuplot 知道哪些后端库会在不同的“设备”上绘制绘图的问题（设备可以是使用 aquaterm 之类的终端的屏幕，或者它可以是使用 postscript、png、pngcairo 等终端的文件...）

# batch-file - bat 将文本从文本 file1 替换为 file2（相对搜索）

> ID：13321820
> 
> 赞同：1
> 
> 时间：2012-11-10T11:56:54.273
> 
> 标签：batch-file, full-text-search, substr

textfile1 是源，textfile2 是目标

示例 textfile1.txt：

```
 server1.net 2100 /l /n /k port:2000,server2.net 2100 /l /n /k port:20000 
```

文本文件2.txt：

```
 server3.net 2000 /l /k port:xxxx,server4.net 2000 /l /k port:yyyyy 
```

我需要在 textfile1.txt 中找到“port:”字符并在 textfile2.txt 中替换端口号（“port:”字符后的 n 个字符）

注意：portnumber 是 textfile1 中的变量号，但 text: "port:" 是固定的。谢谢

基本上我需要在 textfile1 和 textfile2 中放置相同的端口号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:58:57.313

下面的批处理文件适用于两个文本文件中的无限服务器列表，并允许`port:nnnn`在行中的任何位置包含该选项。它不检查任何错误以使其更简单。

```
@echo off
setlocal EnableDelayedExpansion
rem Read data from both files
set /P "data1=" < textfile1.txt
set /P "data2=" < textfile2.txt
rem Replace "port" data in all servers
:nextServer
   rem Get port number after "port:" in first data and eliminate it
   for /F "tokens=1* delims=," %%a in ("%data1:*port:=%") do set port1=%%a& set data1=%%b
   rem Replace port number in second data and change colon by semicolon
   for /F "tokens=1  delims=," %%a in ("%data2:*port:=%") do set data2=!data2::%%a=;%port1%!
rem Pass to next server, if any
if defined data1 goto nextServer
rem Output result restoring colons
echo %data2:;=:% 
```

例如，使用此数据：

```
 server1.net 2100 /l /n /k port:2000,server2.net 2100 /l /n /k port:20000,server5.net 2100 /l /n /k port:1234

server3.net 2000 /l /k port:xxxx,server4.net 2000 /l /k port:yyyyy,server6.net 2000 /l /k port:zzzz 
```

输出是：

```
server3.net 2000 /l /k port:2000,server4.net 2000 /l /k port:20000,server6.net 2000 /l /k port:1234 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:57:03.317

我不明白您为什么要使用批处理来执行此任务 - 使用另一种脚本语言（如 VBScript、JScript 或 PowerShell）会更简单。

但这是一个原生批处理解决方案。我的解决方案不假设每个命令中选项的顺序。它允许之前和之后的任意数量的选项`/port:nnnn`。

```
@echo off
setlocal enableDelayedExpansion

::read the line from textfile1
set "str="
<"textfile1.txt" set /p "str="
if not defined str exit /b

::enclose each command in quotes
set "str="!str:,=","!""

::extract the port from each command into an array
set /a n=0
for %%A in (!str!) do (
  set "cmd=%%~A"
  set /a n+=1
  for /f %%B in ("!cmd:*port:=!") do set "port!n!=%%B"
)

::read the line from textfile2
set "str="
<"textfile2.txt" set /p "str="
if not defined str exit /b

::enclose each command in quotes
set "str="!str:,=","!""

::process each command
set /a n=0
set "ln="
for %%A in (!str!) do (
  set "cmd=%%~A"
  REM break the command into 2 parts, discarding port:
  REM %%B = before port
  REM %%E = after port
  for /f "tokens=1* delims=," %%B in ("!cmd:port:=,!") do (
    for /f "tokens=1*" %%D in ("%%C") do (
      set /a n+=1
      REM transfer !n! into %%N
      for %%N in (!n!) do (
        REM build the new line
        set "ln=!ln!,%%B port:!port%%N! %%E"
      )
    )
  )
)

::remove space before comma
set "ln=!ln: ,=,!"

::write the result back to textfile2
>"textfile2.txt" echo !ln:~1! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:03:30.050

进一步澄清您希望长期做什么可能会有所帮助，但与此同时，这是我刚刚编写和测试的一个脚本，它完全符合您的要求。

```
for /f "tokens=6,12 delims=, " %%a in (textfile1.txt)do (
set portOne=%%a
set portTwo=%%b
call :writeTextTwo
)
type texttwo_temp>textfile2.txt
goto :EOF
:writeTextTwo
for /f "tokens=1-12 delims=, " %%c in (textfile2.txt)do (echo %%c %%d %%e %%f %portOne%,%%h %%i %%j %%k %portTwo% >>texttwo_temp )
 goto :EOF 
```

我希望这有帮助。

# jquery - jquery：速记 - 几个 id 不显示

> ID：13321824
> 
> 赞同：2
> 
> 时间：2012-11-10T11:57:31.970
> 
> 标签：jquery, css, jquery-selectors, block, hidden

> **可能重复：**
> [如何组合两个 jQuery 选择器？](https://stackoverflow.com/questions/10458994/how-can-i-combine-two-jquery-selectors)

我有一个工作代码

```
$('#block1').css("display", "none");
$('#block2').css("display", "none");
$('#block3').css("display", "none"); 
```

我相信它可以写成一个字符串。怎么做？

我相信它可以通过几个选项和预期的结果来完成，所以如果需要，这里有更多额外的细节：

可以`display: none;`为所有以单词开头的 id设置`block`，例如`block123`or `blockabc4`（所有以开头的 id`block`都只有`#block1`, `#block2`and `#block3`）。`display`代码应用前属性的当前值为`block`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:58:32.283

```
$('#block1, #block2, #block3').css("display", "none"); 
```

或者如果你有很多不同结局的块：

```
$('[id^=block]').css('display', 'none'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:58:57.373

使用逗号运算符对不同的选择器进行分组，如下所示：

```
$('#block1,#block2,#block3').css("display", "none"); 
```

或者，您可以使用 jQuery[以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)`id`来选择属性以`block`字符串开头的所有元素，如下所示：

```
$('[id^=block]').css("display", "none"); 
```

此外，`.hide()`是 的快捷方式`.css("display", "none")`，因此上面的代码可能只是：

```
$('#block1,#block2,#block3').hide();
$('[id^=block]').hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T12:00:15.790

你可以这样做：

```
$('[id^=block]').css("display", "none"); 
```

但是，如果您使用某种常见的钩子（例如类或祖先的血统）来定位它们，那就更好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T12:00:54.460

包含 ID 以“block”开头的所有元素

```
$('[id^="block"]').css("display", "none"); 
```

# android - 动态更改 AlertDialog 中按钮的文本

> ID：13321825
> 
> 赞同：1
> 
> 时间：2012-11-10T11:58:01.860
> 
> 标签：android, android-alertdialog, settext

编辑：下面的代码有效！错误在我的代码中的其他地方......

原帖如下...

编辑结束。

我有一个在 onResume() 中加载的 textView，它带有一个打开 AlertDialog 的 OnClickListener()。AlertDialog 有一些文本和三个按钮，setPositivtButton、setNegativeButton 和一个 setNeutralButton。每次打开 AlertDialog 时，我都想根据一些变量更改中性按钮的文本。我试过这个没有成功...

```
enter code here
protected void OnResume() {
    TextView text = new TextView (this);
    text.setTextColor(res.getColor(R.color.white));
    text.setOnClickListener(new OnClickListener() {
        public void onClick(final View v) {                 
            final String str = (String) v.getTag();
            String buttonText = "Jump";
            AlertDialog.Builder showinf = new AlertDialog.Builder(v.getContext());
            showinf.setTitle("SomeTitle");
            showinf.setMessage("someMeassage");
            showinf.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            if (variable == true) buttonText = "Sit";
                else buttonText = "Jump";
            variable = !variable; //For testing purposes...
            showinf.setNeutralButton(buttonText, new DialogInterface.OnClickListener()     {                        
                public void onClick(DialogInterface dialog, int id) {
                    // Do something
                }
            });
            showinf.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // Do something
                }
            });
            showinf.show();
        };
    });
} 
```

这段代码是否可以通过一些 tweeks 来实现，还是我必须重写整个代码？每次单击 textView 时是否应该创建 AlertDialog 或者是否可以直接在 setNeutralButton 代码中执行此操作？

编辑：

稍微更改了代码（变量=！变量），没有任何变化。还尝试了一个没有成功的对话框......

我是 android 新手，但是在 onResume() 中设置 TextView 和 Dialog 是否会导致在使用 onClickListener 再次加载 onResume() 之前无法更改任何内容？

——汤米

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T12:00:24.120

创建一个单例类来保存你想要的值。然后使用该单例类的实例访问它

# c# - 必填字段验证不起作用

> ID：13321826
> 
> 赞同：-1
> 
> 时间：2012-11-10T11:58:04.247
> 
> 标签：c#, asp.net

这是我的 aspx 页面代码：

```
<asp:TextBox runat="server" id="txtName" />

<asp:RequiredFieldValidator runat="server" id="reqName"
     controltovalidate="txtName" 
     errormessage="Please enter your name!" /> 
```

它不工作。当我单击确定按钮时，我没有收到错误消息，然后它显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:32:21.863

假设您使用的是 jquery，您可以`blur`按如下方式使用事件：

```
<asp:TextBox runat="server" id="txtName" />
<asp:RequiredFieldValidator runat="server" id="reqName"
     controltovalidate="txtName" 
     errormessage="Please enter your name!" />

<script type="text/javascript">
    $('#<%= txtName.ClientID %>').blur(function () {
        var control = document.getElementById('<%= reqName.ClientID %>');
        ValidatorEnable(control);
        ValidatorValidate(control);
        ValidatorUpdateIsValid();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:03:17.033

您没有共享太多代码，但很可能您可以做一件事来使事情正常进行。

```
<asp:TextBox runat="server" ID="txtName" />
<asp:RequiredFieldValidator runat="server" ID="reqName" 
         ControlToValidate="txtName"
         ErrorMessage="Please enter your name!" 
         ValidationGroup="save" />
<asp:Button runat="server" ID="button" 
         Text="Click me" 
         ValidationGroup="save" /> 
```

给`ValidationGroup`你一个`RequiredFieldValidator`和`Button`（也可能是其他回发导致控制`ImageButton`等）。

**更新**

如果您也想在 TAB 上进行验证，请执行此操作

```
<asp:TextBox runat="server" ID="txtName" />
<asp:RequiredFieldValidator runat="server" ID="reqName" 
         ControlToValidate="txtName"
         ErrorMessage="Please enter your name!" 
         ValidationGroup="save" />
<asp:Button runat="server" ID="button" 
         Text="Click me" 
         ValidationGroup="save" />
<script type="text/javascript">
    function fireValid() {
        if (Page_ClientValidate('save')) // save is your validation group here
        {
            //Your valid
        }
    }
</script> 
```

# arrays - 在 shell 脚本中将整数添加到数组元素时遇到问题

> ID：13321831
> 
> 赞同：1
> 
> 时间：2012-11-10T11:58:30.283
> 
> 标签：arrays, bash, shell

我正在尝试解析 svn info 上的输出，而不使用像 sed 或 awk 这样的外部 shell 命令。这纯粹是学术性的，因为我知道我可以使用这些工具在心跳中做到这一点。

我正在解析的输出是：

```
Path: .
URL: svn://brantwinter@192.168.10.222/handbrake_batch/trunk/handbrake
Repository Root: svn://ilium007@192.168.10.222/handbrake_batch
Repository UUID: 99c2cca7-102b-e211-ab20-02060a000c0b
Revision: 6
Node Kind: directory
Schedule: normal
Last Changed Author: ilium007
Last Changed Rev: 6
Last Changed Date: 2012-11-10 19:00:35 +1000 (Sat, 10 Nov 2012) 
```

这是我的代码：

```
#!/bin/bash

#set -x

OLD_IFS="$IFS"
IFS=$'\r\n'

# Get the output from svn info into an array
SVN_INFO_ARR=(`svn info`)
COUNT=0
for i in ${SVN_INFO_ARR[@]}; do
    echo $COUNT
    echo "$i"
    (( COUNT++ ))
done

# Get the element that says "Revision: 6"
REV_ARR=${SVN_INFO_ARR[4]}

# Testing the loop over what should be a two element array
COUNT=0
for i in ${REV_ARR[@]}; do
    echo $COUNT
    echo "$i"
    (( COUNT++ ))
done

#This should give the number 6 (or string or something)
REV_NUMBER=${REV_ARR[1]}

echo ${REV_NUMBER}

### INCREMENT REVISION NUMBER FROM ARRAY ELEMENT ###

#NEW_REV_NUMBER= ????? + 1

IFS="$OLD_IFS" 
```

我希望能够接受字符串：

**修订：6**

并拉出 6 并递增 1，以便我可以更新要包含在 SVN 提交中的发布 txt 文件。

我试着让那个 6 变成 7 一个小时，我觉得自己像个白痴，因为我做不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:05:57.067

你需要括号： 改变这个：

```
# Get the element that says "Revision: 6"
REV_ARR=${SVN_INFO_ARR[4]} 
```

对此：

```
# Get the element that says "Revision: 6"
REV_ARR=(${SVN_INFO_ARR[4]}) 
```

前

```
#This should give the number 6 (or string or something)
REV_NUMBER=${REV_ARR[1]} 
```

这样您就可以：

```
((REV_NUMBER++)) 
```

**编辑：**

正如你所写：

```
SVN_INFO_ARR=(`svn info`) 
```

而不仅仅是：

```
SVN_INFO_ARR=`svn info` 
```

括号用于在 bash 中定义一个数组。看一下：

```
man -Len -P'less +"/^ *Arrays"' bash 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T14:41:23.717

而不是硬编码数组索引，更好的方法是过滤掉您需要的行并提取数字

这是使用正则表达式的一种方法（Bash 4）

```
while read -r line; do
    if [[ $line =~ Revision:\ ([0-9]+) ]]; then
         new_rev_num=$((BASH_REMATCH[1]+1))
         echo $new_rev_num
         break
    fi
done < $(svn info) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:48:16.277

用于`grep`仅选择您需要的行。然后，使用参数扩展删除“修订：”。最后，`let`用来做算术：

```
REVISION=$(svn info | grep '^Revision:')
REVISION=${REVISION#* }
let REVISION++ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T22:24:43.567

这段代码最终起作用了：

```
#!/bin/bash

set -x

OLD_IFS="$IFS"
IFS=$'\r\n'

# Get the output from svn info into an array
SVN_INFO_ARR=(`svn info`)

IFS="$OLD_IFS"

# Get the element that says "Revision: 6"
REV_ARR=(${SVN_INFO_ARR[4]})

#This should give the number 6 (or string or something)
REV_NUMBER=${REV_ARR[1]}
echo $REV_NUMBER
echo $(( REV_NUMBER + 1 )) 
```

上面的答案让我困惑了一段时间，因为它缺少前面的 $：

```
echo $(( REV_NUMBER + 1 )) 
```

并且`((REV_NUMBER++))`符号不起作用，我仍然得到 6，而不是 7：

```
+ OLD_IFS='     
'
+ IFS='
'
+ SVN_INFO_ARR=(`svn info`)
++ svn info
+ IFS='     
'
+ REV_ARR=(${SVN_INFO_ARR[4]})
+ REV_NUMBER=6
+ echo 6
6
+ echo 6
6 
```

# asp.net-mvc - 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例

> ID：13321834
> 
> 赞同：1
> 
> 时间：2012-11-10T11:58:37.510
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我见过很多有这样问题的主题，但找不到我的。在此错误之后，它指定了一个来源：

```
 @{
Line 4:      ViewBag.Title = "Edit product: " + @Model.Name;
Line 5:      Layout = "~/Views/Shared/_MasterLayout.cshtml";
Line 6:  
} 
```

它发生在我从视图中单击我的产品名称后

```
@Html.ActionLink(item.Name, "Edit", new { item.ProductID }) 
```

链接变成

```
http://localhost:31363/Master/Edit?ProductID=1 
```

但是，如果我手动将链接编辑为

```
http://localhost:31363/Master/Edit/1 
```

有用。那么，我应该如何解决才能使其以第一种方式或在第二种方式中自动工作？我现在没有任何特殊路由，它是 Mvc4 应用程序附带的默认路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:00:56.133

这应该可以解决问题：

```
@Html.ActionLink(item.Name, "Edit", new { id = item.ProductID }) 
```

**解释**

在您的代码中，您正在创建一个带有 ProductID 参数的链接，因为

```
@Html.ActionLink(item.Name, "Edit", new { item.ProductID }) 
```

等于：

```
@Html.ActionLink(item.Name, "Edit", new { ProductID = item.ProductID }) 
```

由于默认路由中没有名为 ProductID 的参数，因此将其添加到查询字符串中。此外，您的 Edit 操作可能有一个名为 id 的整数参数，如下所示：

```
public ActionResult Edit(int id) 
```

由于此参数不是可选的或可为空的，因此无法将请求映射到此操作并且您会收到错误消息。所以参数名称很重要，因为 ASP.NET MVC 不能自己弄清楚。

# javascript - 意外的新行 Javascript/Smarty

> ID：13321836
> 
> 赞同：1
> 
> 时间：2012-11-10T11:58:47.137
> 
> 标签：javascript, smarty, prestashop

我正在开发一个 Prestashop 网站，我收到一个“SyntaxError：未终止的字符串文字”javascript 错误。问题是当我得到一个地址时，这很好用：

```
,"address1":"Pza libertad"
,"address2":"4&ordm; 3&ordf;"
,"postcode":"08905" 
```

问题来了：

```
 ,"address1":"Plaza libertad 3"
    ,"address2":"
4&ordm;3&ordf;"
    ,"postcode":"08905" 
```

这段代码是这样生成的：

```
{foreach from=$type.formated_fields_values key=pattern_name item=field_name name=inv_loop}
{if !$smarty.foreach.inv_loop.first},{/if}"{$pattern_name}":"{$field_name|escape:'htmlall':'UTF-8'}"
{/foreach} 
```

在数据库中，两个“address2”看起来是一样的。

有任何想法吗？

# android - 什么是 eCpm 填充率 rpm

> ID：13321838
> 
> 赞同：6
> 
> 时间：2012-11-10T11:58:49.940
> 
> 标签：android, ios, admob

我使用 admob-sdk 为我的应用创建了广告。我得到了收入，但我不知道`eCpm, fillrate, rpm`我一直在网上搜索什么，但找不到这个问题的正确解决方案..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T12:18:13.450

这些是不同的广告暴民指标，可帮助您衡量应用在展示广告方面的效果

Ecpm = 每千次请求的收入

填充率 = 收到广告的请求百分比（有时没有广告可显示）

Rpm = 每千次请求的收益（与 ecpm 几乎相同）

# ruby-on-rails - 在 Rails 3.2 上使用太阳黑子 solr 进行自定义查询

> ID：13321840
> 
> 赞同：2
> 
> 时间：2012-11-10T11:59:14.343
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, solr, sunspot

3种型号：

```
Class Product
 include Mongoid::Document
 has_many :orders, dependent: :destroy, :autosave => true
 #search
 searchable do
  text :title, :description, :boost => 2.0
  time :created_at
 end
end

Class Order
 include Mongoid::Document
 belongs_to :product
 has_one :dispute, dependent: :destroy, :autosave => true
end

Class Dispute
 include Mongoid::Document
 belongs_to :order
 field :buyer_has_requested_refund, :type => Boolean, :default => "false"
end 
```

**我需要在内部`products_controller.rb`采取`index`行动，从高到低排序所有与订单有争议的产品`buyer_has_requested_refund = true`**

就像是：

```
def index
 @search = Product.solr_search do |s|
 s.fulltext params[:search]
 s.keywords params[:search]
 s.order_by :disputes_where_buyer_has_requested_refund, :desc
 end
 @products = @search.results
    respond_to do |format|
    format.html # index.html.erb
  end 
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:49:25.900

您应该告诉 solr 索引排序搜索所需的信息：

```
class Product
 include Mongoid::Document
 has_many :orders, dependent: :destroy, :autosave => true
 has_many :disputes, :through => :orders
 #search
 searchable do
  text :title, :description, :boost => 2.0
  integer :disputes_where_buyer_has_requested_refund { |product| product.disputes.where(:buyer_has_requested_refund => true).size }
  time :created_at
 end
end 
```

请注意在创建/销毁新争议时相应地重新索引索引中的记录值。您可以在延迟作业中使用 after_create/after_destroy 挂钩来执行此操作，也可以根据您的需要和索引的大小每天重新索引一次。

# scala - 我如何改进这种蛋糕图案的尝试

> ID：13321842
> 
> 赞同：1
> 
> 时间：2012-11-10T11:59:28.223
> 
> 标签：scala

这是我实现 Scala Cake Pattern 的早期尝试之一：

```
trait dbConfig {
  val m: Model = ???
}

trait testDB extends dbConfig {
  override val m = new Model(Database.forURL("jdbc:h2:mem:testdb", driver = "org.h2.Driver"))
  m.cleanDB
}

trait productionDB extends dbConfig {
  override val m = new Model(Database.forURL("jdbc:postgresql:silly:productionDB", driver = "org.postgresql.Driver"))
}

trait SillySystem extends HttpService with dbConfig {
....
// System logic
....
} 
```

这将允许我在测试时像这样使用我的服务：

```
class TestService extends SillySystem with testDB {
.....
} 
```

像这样用于生产：

```
class ProductionService extends SillySystem with productionDB {
.....
} 
```

这行得通，但我做得对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T12:32:17.213

`DbConfig`抽象和使用可能会有所帮助，`def` [因为](https://stackoverflow.com/a/13291872/406435)可以`def`用 a 覆盖 a`val`或`lazy val`，但反过来不行。

[`SillySystem`不是 a`DbConfig`](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，所以使用依赖注入而不是继承。

```
trait DbConfig {
  def m: Model // abstract
}

trait TestDB extends DbConfig {
  // you can override def with val
  val m = new Model(Database.forURL("jdbc:h2:mem:testdb", driver = "org.h2.Driver"))
  m.cleanDB
}

trait ProductionDB extends DbConfig {
  val m = new Model(Database.forURL("jdbc:postgresql:silly:productionDB", driver = "org.postgresql.Driver"))
}

trait SillySystem extends HttpService {
  this: DbConfig => // self-type. SillySystem is not a DbConfig, but it can use methods of DbConfig.
....
// System logic
....
}

val testService = new SillySystem with TestDB

val productionService = new SillySystem with ProductionDB

val wrongService1 = new SillySystem // error: trait SillySystem is abstract; cannot be instantiated
val wrongService2 = new SillySystem with DbConfig // error: object creation impossible, since method m in trait DbConfig of type => Model is not defined

val correctService = new SillySystem with DbConfig { val m = new Model(...) } // correct 
```

# .net - 什么是 ASP.NET MVC 应用程序中的 PreserveLoginUrl appSetting 键/值？

> ID：13321843
> 
> 赞同：46
> 
> 时间：2012-11-10T11:59:40.517
> 
> 标签：.net, asp.net-mvc

我正在查看一些`ASP.NET MVC`代码，特别是 web.config 文件。

我在该`appSettings`部分中注意到了这一点：

`<add key="PreserveLoginUrl" value="true" />`

1.  这是做什么的？
2.  它是什么时候引入 ASP.NET MVC 的？

干杯！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-10T12:13:45.200

来自[MVC 4 白皮书](http://www.asp.net/whitepapers/mvc4-release-notes)：

> 当 WebMatrix.WebData.dll 包含在 ASP.NET MVC 4 应用程序的 /bin 目录中时，它将接管用于表单身份验证的 URL。将 WebMatrix.WebData.dll 程序集添加到您的应用程序（例如，在使用“添加可部署依赖项”对话框时选择“带有 Razor 语法的 ASP.NET 网页”）将覆盖身份验证登录重定向到 /account/logon 而不是 /account /login 符合默认 ASP.NET MVC 帐户控制器的预期。为了防止这种行为并使用已经在 web.config 的身份验证部分中指定的 URL，您可以添加一个名为 PreserveLoginUrl 的 appSetting 并将其设置为 true

# c# - 数据网格中的 NumericUpDown

> ID：13321845
> 
> 赞同：4
> 
> 时间：2012-11-10T11:59:54.903
> 
> 标签：c#, wpf, datagrid, numericupdown

我有一个包含一堆数字的 WPF 窗口。或者用更好的词：每一列都绑定到一个 int 属性。现在我想有一个很好的方法来改变一些数字，我希望我可以使用 numericUpDown 控件。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T12:49:00.133

您可以使用`DataGridTemplateColumn`.

示例代码：

```
<DataGrid ItemsSource="{Binding MyData}" AutoGenerateColumns="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
                    <DataGridTemplateColumn Header="Age">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <wpfToolkit:IntegerUpDown Value="{Binding Age, UpdateSourceTrigger=PropertyChanged}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid> 
```

在哪里`wpfToolkit`：

```
xmlns:wpfToolkit="clr-namespace:Xceed.Wpf.Toolkit;assembly=WPFToolkit.Extended" 
```

在此示例中，我使用[Extended WPF Toolkit](http://wpftoolkit.codeplex.com/)`IntegerUpDown`中的控件。

# javascript - 所有功能、事件等的浏览器兼容性代码

> ID：13321849
> 
> 赞同：0
> 
> 时间：2012-11-10T12:00:07.833
> 
> 标签：javascript, html, css

我使用 onmouseover 和 onmouseout 来查看图像，但它在 chrome 中不起作用。需要解决这个问题。

脚本是

```
<script>
var img;

window.onload = function () {
      img = document.getElementById ("img");
   }
</script>

<img style= "position:absolute;TOP:90px; LEFT:185px;visibility:hidden;" 
     class="two" 
     id="img" 
     src="services/web2.png" 
     width="800" height="500" alt=""/>

 <div class="item home">
    <img src="imagess/bg_home.png" alt="" width="199" height="199" class="circle"/>
    <a href="#" class="icon"></a>
    <h2>IT</h2>
    <ul>
        <li>
           <a href="target4" 
              onMouseOver="img.style.visibility='visible'; img.src='services/web2.png'"
              onMouseOut="img.style.visibility='hidden';">Sales & Service</a>
        </li>
        <li>
            <a href="target5" 
               onMouseOver="img.style.visibility='visible'; img.src='services/web2.png'" 
               onMouseOut="img.style.visibility='hidden';">CCTV</a>
         </li>
         <li>
             <a href="target6" 
                onMouseOver="img.style.visibility='visible'; img.src='services/web2.png'"
                onMouseOut="img.style.visibility='hidden';">DVR</a>
         </li>
     </ul>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:17:26.187

您正在使用非常突兀的 javascript，这只是一种不好的做法。所以追踪错误没有多大意义。建议使用 jQuery 的人是非常正确的，采纳这个建议对你有好处。

直接在 DOM 元素上使用 onMouseOver 和其他 javascript 已经不再是事情了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:05:36.600

分离你的 JavaScript

```
window.onload = function () {
    var img = document.getElementById('img'),
        links = ['target4', 'target5', 'target6'],
        i = links.length, e,
        over = function over(){
            img.style.visibility='visible';
            img.src='services/web2.png';
        },
        out = function out(){
            img.style.visibility='hidden';
        };

    while( --i >= 0 ){
        e = document.getElementById(links[i]);
        e.addEventListener('mouseover', over, false);
        e.addEventListener('mouseout', out, false);
    }
}​ 
```

从您的 HTML

```
<img id="img" class="two" src="services/web2.png" alt=""/>

 <div class="item home">
    <img src="imagess/bg_home.png" alt="" width="199" height="199" class="circle"/>
    <a href="#" class="icon"></a>
    <h2>IT</h2>
    <ul>
        <li>
           <a id="target4" href="target4">Sales &amp; Service</a>
        </li>
        <li>
           <a id="target5" href="target5">CCTV</a>
         </li>
         <li>
           <a id="target6" href="target6">DVR</a>
         </li>
     </ul>
  </div>​ 
```

工作[**示例小提琴**](http://jsfiddle.net/XtR7h/1/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-10T12:10:36.167

您最好将 jQuery 用于那种应该适用于所有浏览器的东西。

[http://api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-10T12:14:19.323

尝试这个：

CSS：

```
#img {
 position:absolute;
 top:90px;
 left:185px;
 visibility:hidden;
} 
```

JS：

```
$(function(){

  var $img = $('#img');

  // selector container for image
  var $container = $('.item');

  $container.find('ul li a')
    .bind('mouseover', function(event) {

        var target = $(this).attr('href'); //if you need to differentiate

        $img
           .css('visibility', 'visible')
           .attr('src', 'services/web2.png');

    })
    .bind('mouseout', function(event) {

        var target = $(this).attr('href'); //if you need to differentiate

        $img
           .css('visibility', 'hidden');

    })
}); 
```

HTML：

```
<img class="two" id="img" src="services/web2.png" width="800" height="500" alt="" />
<div class="item home">
   <img src="imagess/bg_home.png" alt="" width="199" height="199" class="circle"/>
   <a href="#" class="icon"></a>
   <h2>IT</h2>
   <ul>
     <li><a href="target4">Sales & Service</a></li>
     <li><a href="target5">CCTV</a></li>
     <li><a href="target6">DVR</a></li>
   </ul>
</div> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-10T12:17:44.830

使用 jQuery！

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.6.2.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $('li a').mouseenter(function () {
                $('li a').hide(1);
            }).mouseout(function () {
                $('li a').show(1);
            });
        });
    </script>
</head>
<body>
    <ul>
        <li><a id="link" href="http://www.tivo.com/">DVR</a></li>
    </ul>
</body>
</html> 
```

# servicestack - servicestack Razor 查看具有相同名称但不同命名空间的响应 dto 的页面

> ID：13321852
> 
> 赞同：1
> 
> 时间：2012-11-10T12:00:43.697
> 
> 标签：servicestack

我在不同的子命名空间中有 2 个 dto，但响应 dto 的类名相同，在同一个程序集中。

使用 servicestack 中的 razor 视图页面，它会在 View 文件夹中查找响应 dto .cshtml。

是否可以为不同的命名空间提供 2 个单独的 razor 视图页面？

例如

```
namespace mydto.Cars
{
      public class queryResponse
      {
      }
}

namespace mydto.Bikes
{
      public class queryResponse
      {
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:42:12.680

不，它仅按名称扫描查看页面。我会将命名空间尾部添加到描述 DTO 如何不同的 DTO，例如 CarsQueryResponse。

使用 ServiceStack，您通常不希望有多个具有相同名称但名称空间不同的 DTO，例如，每个请求 DTO 的名称必须是唯一的，这使您可以只知道名称来调用 Web 服务。

# c++ - C++中嵌套函数的设计模式

> ID：13321855
> 
> 赞同：1
> 
> 时间：2012-11-10T12:00:53.323
> 
> 标签：c++, design-patterns, nested

我有两个A类，B类。

对于A，我有两种方法`callB()`，和`checksomethinginB()`。

对于 B，我有一种方法`execute()`。

我像这样使用它们：

```
A _a;
_a.callB(); //inside the function, B object _b will be created

//after _b created, in another place, _b will execute _b.execute().
_b.execute()
{
   // I want to use A method checksomethinginB()
} 
```

所以我不知道在B中使用A方法的好方法，我可以创建的是使用静态函数，但我认为可能有更好的方法，谢谢你的建议！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:05:45.230

要么将正确的实例传递`A`给 的构造函数`B`，要么在需要时传递它。

如果`checksomethinginB`不需要任何状态，`A`那么它当然可以是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:06:59.057

在没有查看课程详细信息并且没有说明您的课程实际做什么的情况下，您可以考虑以下选项：

1.  如果 A 类和 B 类之间存在共性，您可以考虑从另一个中派生出一个。除非有充分的理由，否则不应使用此功能，而不仅仅是为了使您能够做您想做的事
2.  修改函数签名`B:execute`以获取作为类 A 实例的参数参数（或指向或引用 A 实例的指针），以便您可以调用`A::checksomethinginB()`
3.  按照您的建议将函数设为静态 - 请记住，如果`checksomethinginB()`需要访问 A 的非静态成员变量，这是不可能的

可能有更好的选择，但如果没有关于你的类和功能要求的更多细节，很难说

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:20:59.057

我不太确定您为什么要在`class A`其中运行的功能`class B`-我会`A::checksomethinginB()`转到`B::checksomething()`. 从这里，我看到了两种（+1）的可能性：

1.  如果`A::checksomethinginB`/`B::checksomething`不使用来自 的任何状态`A`，那么您就完成了..
2.  如果是这样，那么它实际上`A`在它的代码中使用，所以你需要给他一个：可能传递一个对它的引用。
3.  如果它只使用`A`'s 的静态部分，你可以直接使用它们`A::staticSomethingNotMentionedBefore`。

# asp.net - 如何使用 jquery uploadify 插件将文件内容传递到 [WebMethod]

> ID：13321860
> 
> 赞同：2
> 
> 时间：2012-11-10T12:01:32.790
> 
> 标签：asp.net, uploadify

我想使用 jquery uploadfy 插件将文件内容传递到 [WebMethod] 但是无法调用 Upload 方法。有人可以帮我吗？提前致谢！索引.aspx：

```
<head runat="server">
<title></title>
<link href="uplodify/uploadify.css" rel="stylesheet" type="text/css" />
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="uplodify/swfobject.js" type="text/javascript"></script>
<script src="uplodify/jquery.uploadify.v2.1.4.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#file_upload').uploadify({
            'uploader': '/uplodify/uploadify.swf',
            'script': '/Index.aspx/Upload',
            'cancelImg': '/uplodify/cancel.png',
            'buttonImg': '/uplodify/browse.jpg',
            'sizeLimit': 262144, 
            'fileExt': '*.jpg',
            'fileDesc': '*.jpg',
            'folder': '/pic',
            'onProgress': function (event, ID, fileObj, data) {
                var bytes = Math.round(data.bytesLoaded / 1024);
                $('#' + $(event.target).attr('id') + ID).find('.percentage').text(' - ' + bytes + 'KB ');
                return false;
            },
            'onSelect': function (event, ID, fileObj) {
                if (parseInt(fileObj.size) > 262144) {
                    window.alert fileObj.name");
                    return false;
                }
            },
            'onComplete': fun

        });

    });

    function checkImport() {
        if ($.trim($('#file_uploadQueue').html()) == "") {
            alert('please select pic！');
            return false;
        }
        else {
            jQuery('#file_upload').uploadifyUpload();
            return true;
        }

    }
    function fun(event, queueID, fileObj, response, data) {

    }

</script>
</head>

  <body>
<form id="form1" runat="server">
<div>
    <img height="100" width="100" src="nopic.jpg" id="filesUploaded" runat="server" />
    <input id="file_upload" name="file_upload" type="file" />
    <input id="Button1" type="button" value="uploadfile" onclick="checkImport()" runat="server"
        class="ui-corner-all" /><br />
</div>
</form>
</body> 
```

索引.cs：

```
 public partial class Index : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    [WebMethod]
    public static string Upload(byte[] FileData)
    {

        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T13:53:15.763

In ASP.NET [Page methods](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/) expect to be invoked using `application/json` content type. So you could use either a new WebForm or a generic handler to handle the file upload:

```
$(document).ready(function () {
    $('#file_upload').uploadify({
        'swf': '<%= ResolveUrl("~/uploadify/uploadify.swf") %>',
        'uploader': '<%= ResolveUrl("~/upload.ashx") %>'
    });
}); 
```

and the generic handler might look like this:

```
public class Upload : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        HttpPostedFile uploadedFile = context.Request.Files["FileData"];
        // TODO: do something with the uploaded file. For example
        // you could access its contents using uploadedFile.InputStream

        context.Response.ContentType = "text/plain";
        context.Response.Write("Hello World");
    }

    public bool IsReusable
    {
        get { return true; }
    }
} 
```

Also to facilitate debugging use a tool such as [Fiddler](http://www.fiddler2.com/fiddler2/) as it allows you to inspect the HTTP traffic between the client and the web server, showing you potential errors you might have. Also a javascript debugging tool such as FireBug or Chrome developer tools is a must-have.

# php - 使用 PHP Curl 重定向到我的学校门户

> ID：13321861
> 
> 赞同：4
> 
> 时间：2012-11-10T12:01:58.690
> 
> 标签：php, curl

我正在尝试使用 PHP Curl 连接到我学校的门户，但没有运气，因为它似乎重定向到某些页面。我正在制作一个用于在 jQuery mobile 中显示学校日程的 web 应用程序，但为了显示您自己的日程安排，您需要登录并从那里转到您的日程安排。这就是我打算使用 CURL 和 PHP 来实现的目标。

我使用了来自[http://codeaid.net/php/get-the-last-effective-url-from-a-series-of-redirects-for-the-given-url](http://codeaid.net/php/get-the-last-effective-url-from-a-series-of-redirects-for-the-given-url)的教程，它适用于给定的链接，但我找不到应该使用哪个链接重定向到我的学校门户。

如果有人知道要遵循哪些步骤以了解您必须使用哪个 URL，那将非常有帮助。

我使用的代码：

```
<?php function getLastEffectiveUrl($url)
    {
         // initialize cURL
         $curl = curl_init($url);
         curl_setopt_array($curl, array(
         CURLOPT_RETURNTRANSFER => true,
         CURLOPT_FOLLOWLOCATION => true,
    ));

    // execute the request
    $result = curl_exec($curl);

    // fail if the request was not successful
    if ($result === false) {
        curl_close($curl);
        return null;
}

          // extract the target url
          $redirectUrl = curl_getinfo($curl, CURLINFO_EFFECTIVE_URL);
          curl_close($curl);

          return $redirectUrl;
    }

    $lastEffectiveUrl = getLastEffectiveUrl('https://login.hhs.nl');
    echo $lastEffectiveUrl . "-";
?> 
```

同样，这是我从 Codeaid 学习的教程，我不认为自己制作了这个教程。

我的学校页面的链接是 https://portal.hhs.nl，你可以看到如果你去那里它会将我重定向到另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:30:42.933

What you want to do is near impossible ... They applied several redirects with several methods and security tokens ... Let me explain:

At first look, i thought i was redirected by header(), but when i used [Tamper Data](https://addons.mozilla.org/nl/firefox/addon/tamper-data/) the picture became more clear:

**1)** When you open [https://portal.hhs.nl](https://portal.hhs.nl), you're redirected by some meta tags

```
<META name="verify-v1" content="Yh6PvgPdX64Vdo9akXqTvstTouu9uQcvrPpFaL9jqZs=" />
<META name="verify-v1" content="eiUD3J3OcF6SjBKGe5ZvkMTzVEJ9rnpr1NaCKV9OIKw=" />
<meta name="google-site-verification" content="Ka0UPoAllNqYvbuviJCk8iV64YfqfWbX6G1APHdY5tg" />
<META content="text/html; charset=windows-1252" http-equiv=Content-Type>
<META content="0; URL=http://portal.hhs.nl/portal/pls/portal/PORTAL.home" http-equiv=Refresh> 
```

So you have to parse those meta tags, and redirect ... here's how you do it [PHP: Can CURL follow meta redirects](https://stackoverflow.com/questions/1820705/php-can-curl-follow-meta-redirects)

**2)** For some reasons i can't "open" the data when i'm redirected with **Tamper Data**, so you have to do some research on this step ...

**3)** And here's another "redirect" technique, with JavaScript !!!

```
<FORM NAME="SingleSignOn" METHOD="POST" ACTION="https://aselect.hhs.nl/aselectserver/server" >
<INPUT TYPE="HIDDEN" NAME="request" VALUE="direct_login1" >
<INPUT TYPE="HIDDEN" NAME="rid" VALUE="C741680139CA153E" >
<INPUT TYPE="HIDDEN" NAME="a-select-server" VALUE="aselectserver1" >
</FORM>
</BODY> 
```

Just parse those and redirect to [https://aselect.hhs.nl/aselectserver/server](https://aselect.hhs.nl/aselectserver/server) with those POST values ...

4) Finally we're on [https://aselect.hhs.nl/aselectserver/server](https://aselect.hhs.nl/aselectserver/server) where we actually input our credentials, and where you also should parse data and send it with the credentials. After this step only you know what's behind the portal ...

**Conclusion:** Those security measures make it clear that they want to stop some automated kiddies like us, and what if someday those steps were changed ? What i suggest is to ask the school for some API, i know some schools in the Netherlands that uses [Untis](http://www.untis.nl) and they have a great API that returns some **JSON** data !

If you insist or if it's not possible to get your hand on an API, then get ready for some hard work !

Veel succes (good luck) !

# java - java堆栈和方法返回的对象

> ID：13321863
> 
> 赞同：1
> 
> 时间：2012-11-10T12:02:59.887
> 
> 标签：java, garbage-collection

声明

```
rs.getString("name")  //rs is java.sql.ResultSet interface 
```

字节码是：

```
41:  aload   4
43:  ldc     #10; //String name
45:  invokeinterface #11,  2; //InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
50:  pop 
```

在第 45 行，返回的字符串对象`rs.getString("name")`被压入堆栈，在第 50 行，返回对象（一个字符串对象）被弹出。

1）堆栈是否只包含对这个返回的字符串对象的*引用，堆上的实际对象或堆栈包含实际的字符串对象？*

2）并且在弹出返回的字符串对象后，它会被垃圾收集还是被释放为该方法的堆栈的内存消失？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T12:05:55.547

> 在第 45 行，rs.getString("name") 返回的字符串对象被推入堆栈

没有返回*的*字符串对象。有一个返回的字符串*引用*。

至少从概念上讲，*对象*永远不会在堆栈上，永远不会返回，永远不会传递。它只是*一个*参考。

> 并且在弹出返回的字符串对象后，它会被垃圾收集还是被释放为该方法的堆栈的内存消失了？

当堆栈弹出时，*引用*将被清除，这意味着如果没有其他强引用，字符串对象本身将有资格进行垃圾回收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:06:17.747

1）堆栈只包含对对象的引用。所有对象都存储在堆上。

2）当没有对它的活动引用时，字符串的存储*可能会被垃圾收集。*这与它是否从堆栈中弹出无关。这是关于在整个程序中对该字符串的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T12:07:02.483

1.  堆栈具有对字符串的引用，而不是字符串本身。

2.  由于您没有分配字符串，因此当对 ResultSet 中的行的引用被 GCed 时，该值将被 GCed。

# wxpython - 使用键盘在 OSX 上使用 GridCellChoiceEditor 禁用单元格编辑

> ID：13321867
> 
> 赞同：0
> 
> 时间：2012-11-10T12:03:51.247
> 
> 标签：wxpython

[给出了使用来自wiki.wxpython.org](http://wiki.wxpython.org/GridCellChoiceEditor)的组合框构建网格的示例代码。使用键盘导航网格时，无法禁用单元格编辑。按下`Enter`时，下拉菜单隐藏，但控件仍处于活动状态。按`Enter`,`Esc`或`Tab`没有任何效果。

![问题示例](../Images/62dcaae0ee8a7c2be40f1eff019095ce.png)

[`wx.ComboBox`](http://www.wxpython.org/docs/api/wx.ComboBox-class.html)确实有一个`wx.EVT_TEXT_ENTER`事件，它允许处理`Enter`处于“锁定”状态的压力机。那么，`DisableCellEditControl`在处理程序内部执行应该停止编辑吗？好吧，编辑器是隐藏的，但是光标仍然在隐藏的编辑器中。`Up`使用/时可以访问下拉列表`Down`。

```
def on_text_enter(evt):
    self.grid1.DisableCellEditControl()

self.comboBox.Bind(wx.EVT_TEXT_ENTER, on_text_enter) 
```

![光标被困在隐藏的编辑器中](../Images/d77dd901a4a9beca24c1c8bc11f7e8db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:03:51.247

好吧，这是另一个橡皮鸭调试案例。意识到焦点仍在组合框中，鸭子开始怀疑手动恢复焦点是否可以解决问题。并且做到了。因此，为了将来参考，事件处理程序：

```
def on_text_enter(evt):
    self.grid1.DisableCellEditControl()
    self.grid1.SetFocus()

 self.comboBox.Bind(wx.EVT_TEXT_ENTER, on_text_enter) 
```

# php - 我的图表不是从我的 html 表创建的

> ID：13321872
> 
> 赞同：0
> 
> 时间：2012-11-10T12:04:27.250
> 
> 标签：php, jquery, symfony

我会建立一个从表格中给出的条形图。

我尝试使用[此示例](http://filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/)，但我的页面中只得到一个表格。

这是我的代码：

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>            
             <th>Total des Alertes </th>
             <th>Nombre critique</th>
                 <th>Nom d'analyste</th>
            <th>Nombre majeur</th>
            <th>Nombre d'alertes traités</th>

        </tr>
    </thead>
    <tbody>

     {% for liste10 in listes %}

        <tr class="gradeU">
        <td>{{listes11}}</td>
        <td>{{liste10.critique}}</td>
            <td>{{liste10.user_name}} </td>
        <td>{{liste10.majeur}}</td>

        <td> </td>

    </tr>
        {% endfor %}

    </tbody>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:24:51.167

你将不得不导入**jquery**和**Visualize.jQuery.js**库，然后把它写在你的文件中

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript" src="http://dwpe.googlecode.com/svn-history/r12/trunk/charting/js/visualize.jQuery.js"></script>
<script>
$(function(){
   $('table').visualize();
});
</script> 
```

# zend-framework2 - 在 URL 中传递数据时的路由

> ID：13321873
> 
> 赞同：0
> 
> 时间：2012-11-10T12:04:35.983
> 
> 标签：zend-framework2

我已经使用 Skeleton Application and Module 创建了一个基本的 Zend Framework 2 应用程序，尽管我遇到了路由问题并且似乎无法解决它。

在我的模块中，它松散地基于 Zend Framework 网站上的新快速入门模块，我在 module.config.php 中有以下路由

```
'router' => array(
    'routes' => array(
        'blog' => array(
            'type'    => 'Literal',
            'options' => array(
                // Change this to something specific to your module
                'route'    => '/blog',
                'defaults' => array(
                    // Change this value to reflect the namespace in which
                    // the controllers for your module are found
                    '__NAMESPACE__' => 'Blog\Controller',
                    'controller'    => 'View',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                // This route is a sane default when developing a module;
                // as you solidify the routes for your module, however,
                // you may want to remove it and replace it with more
                // specific routes.
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '[/:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),
    ),
), 
```

使用标准模块、控制器和操作 URL 请求时，此路由似乎可以正常工作：

```
blah.com/blog/post/view 
```

我遇到问题的地方是当我尝试通过 URL 传递一些数据时：

```
blah.com/blog/post/view/id/1 
```

两个 URL 中的后者导致 404。我猜我需要一个子路由来允许在 URL 上传递数据，尽管我完全坚持我所需要的。有人能指出我正确的方向吗？我已经浏览了参考指南，尽管我似乎无法越界。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:10:29.773

您必须在路线中添加可选段。还要为其添加默认值：试试这个：

```
'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '[/:controller[/:action[/id[/:idvar]]]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                            'idvar'  => '0'
                        ),
                    ),
                ), 
```

并在您的控制器操作中，尝试：

`$id = $this->params('idvar')`;

检索`idvar`值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T11:43:35.533

如果您需要多个可选参数并且可以以任意随机组合提供（例如 pageNumber = 2，participant = active），则需要添加查询类型的子路由，这样您就可以完全灵活地提供 GET 参数：

适合以下示例的 url 可以使用 url 视图助手使用此语法构建： $this->url('event/index/query', array('o_id' => 1, 'participation' => 'active', 'pageNumber' => '2'));

```
 'routes' => array(
       'event' => array(
            'type'    => 'literal',
            'options' => array(
                'route'    => '/event',
                'defaults' => array(
                    'controller' => 'cebEvent.eventController',
                    'action'     => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'index' => array(
                    'type' => 'segment',
                    'options' => array(
                        'route' => '/index[/:o_id]',
                        'defaults' => array(
                            'controller' => 'eventController',
                            'action'     => 'index',
                        ),
                    ),
                    'may_terminate' => true,
                    'child_routes' => array(
                        'query' => array(
                            'type' => 'Query',
                        ),
                    ),

                ), 
```

# sql - 带有 CASE 和空值检查的 WHERE

> ID：13321876
> 
> 赞同：2
> 
> 时间：2012-11-10T12:04:41.743
> 
> 标签：sql, tsql, date, null, where

我对 WHERE 子句中的 CASE 语句有疑问。在我的查询中，我想获取日期之前的行。日期在 3 列上进行检查。`date1`is NOT NULL 所以我不需要有一个 NULL 检查，但是日期`date2`并且`date3`可以是 NULL 所以我想检查空值并相应地检查日期条件。我尝试了两种方法，但无法弄清楚如何正确地做到这一点。你能帮我吗？

查询一：

```
SELECT *
FROM
    docs
WHERE
    date1 < '20120601'
    AND CASE
        WHEN date2 IS NOT NULL AND date3 IS NOT NULL THEN date2 < '20120601' 
        WHEN date2 IS NOT NULL AND date3 IS NULL THEN date2 < '20120601'
        WHEN date2 IS NULL AND date3 IS NOT NULL THEN date3 < '20120601'
    END 
```

这首先在以下情况下给出错误：`Incorrect syntax near '<'.`

我将查询修改为：

```
SELECT *
FROM
    docs
WHERE
    date1 < '20120601'
    AND CASE
        WHEN date2 IS NOT NULL AND date3 IS NOT NULL AND date2 < '20120601' THEN TRUE 
        WHEN date2 IS NOT NULL AND date3 IS NULL AND date2 < '20120601' THEN TRUE
        WHEN date2 IS NULL AND date3 IS NOT NULL AND date3 < '20120601' THEN TRUE
    END 
```

并得到另一个错误：`An expression of non-boolean type specified in a context where a condition is expected, near 'END'.`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T12:20:55.950

这应该有效：

```
SELECT *
FROM
    docs
WHERE (date1 < '20120601')
OR    (date2 IS NOT NULL AND date2 < '201205601')
OR    (date2 IS NULL AND date3 IS NOT NULL AND date3 < '20120601') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T12:57:49.507

```
where
date1 < '20120601'
    and
coalesce(date2, date3, '20000101') < '20120601' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:17:01.330

那这个呢 ？

```
SELECT *
FROM
    docs
WHERE date1 < '20120601'
  AND ISNULL(date2, '20120601') < '20120601'
  AND ISNULL(date3, '20120601') < '20120601' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T20:02:14.133

正确的答案是：

```
SELECT *
FROM
    docs
WHERE
    date1 < '20120601' AND
        ((date2 IS NOT NULL AND date3 IS NOT NULL AND date2 < '20120601') OR 
         (date2 IS NOT NULL AND date3 IS NULL AND date2 < '20120601') OR
         (date2 IS NULL AND date3 IS NOT NULL AND date3 < '20120601')) 
```

# android - 如何在 Android 的 Imageview 中设置 BLOB 图像？

> ID：13321877
> 
> 赞同：1
> 
> 时间：2012-11-10T12:04:48.437
> 
> 标签：android, image

您好，我将图像作为 blob 存储在数据库中，并以字符串形式从数据库中检索图像。现在我想在 imageview 中设置这个图像。我试图将它转换为位图但没有显示它。我已经完成了这样的代码。请帮助提前感谢

在日志中，我正在播种这种格式的照片：[ B@4052b078 ]

```
byte[] imageAsBytes = Base64.decode(sp_photo.getBytes(), 0);
alert_photo.setImageBitmap(BitmapFactory.decodeByteArray(imageAsBytes, 0, Bytes.length)); 
```

这里 sp_photo 是我的照片字符串路径。并且 alert_photo 是图像视图。请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:13:10.583

试试这个，它可能会工作：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inDither = false;
options.inPurgeable = true;
options.inInputShareable = true;
options.inTempStorage = new byte[1024 *32];

Bitmap bm = BitmapFactory.decodeByteArray(imageAsBytes, 0, imageAsBytes.length, options);
alert_photo.setImageBitmap(bm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:38:32.890

试试这个示例代码......

[http://code.google.com/p/android-newbie-sourcecode/source/browse/trunk/ImageToDatabase/?r=6](http://code.google.com/p/android-newbie-sourcecode/source/browse/trunk/ImageToDatabase/?r=6)

# iis - Web Deploy 也可以处理依赖关系吗？

> ID：13321885
> 
> 赞同：0
> 
> 时间：2012-11-10T12:06:17.417
> 
> 标签：iis, deployment, installation, webdeploy

我正在寻找一种部署 ASP.NET MVC 网站的方法，包括它的所有依赖项，例如 .NET 框架或 ASP.NET MVC 3。

我发现了如何使用 web deploy 转储我所有依赖项的列表，但它也可以实际部署所有这些依赖项吗？

如果没有，我还有哪些其他选择（希望不会太贵）？Installaware 似乎能够做到这一点，但它对我来说有点太贵了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:44:28.990

Web 部署 (MSDeploy) 可以列出您提到的依赖项，但是它不提供打包和部署那些较大类型的依赖项（如框架或功能）的自动方式。

使用[Web Deploy runCommand Provider](http://technet.microsoft.com/en-us/library/ee619740%28v=ws.10%29.aspx)，它可用于部署 .Net 框架、ASP.NET MVC 3。但您需要编写自己的部署清单和部署批处理文件。

或者，您可以使用 powershell 或 psexec 进行部署

# joomla - 如果作者对前端进行了微小的更改，则 Joomla 中的 k2 篇文章将变为未发布

> ID：13321887
> 
> 赞同：6
> 
> 时间：2012-11-10T12:06:30.133
> 
> 标签：joomla, joomla-k2

“作者”组没有任何发布权限。还行吧。因此，编辑/管理员会初步批准任何文章。

如果作者决定编辑已经发表的文章，问题就来了。当他从前端点击“保存”时，该项目立即变为未发布。（因为作者组无权发布项目）。所以，这至少对我来说是个大问题。

即使作者进行了调整，我希望文章在获得管理员的初步批准后仍能继续发表。知道如何做这样的事情吗？

此逻辑是 Joomla Core 中的默认处理方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:51:05.717

您可能想要考虑从 K2 切换到其他类似 EasyBlog 的东西......或者只是不使用 K2。似乎 K2 的默认设置是遵循与您的工作流程冲突的工作流程。

否则，您可以修改 K2 以满足您的需要......我真的不建议修改扩展，因为这样您就不能再对它们进行更新，除非您计划每次更新时都进行修改（这很痛苦）。

您的问题位于管理员/components/com_k2/models/item.php 以下几行是表单版本 2.6.1 第 785 行。

```
 if ($front)
        {
            if (!K2HelperPermissions::canPublishItem($row->catid) && $row->published)
            {
                $row->published = 0;
                $mainframe->enqueueMessage(JText::_('K2_YOU_DONT_HAVE_THE_PERMISSION_TO_PUBLISH_ITEMS'), 'notice');
            }
        } 
```

如果我对您的理解正确，您想要更多类似的东西：

```
 if ($front)
    {
        $row->published = 1;
        if (!K2HelperPermissions::canPublishItem($row->catid) && $row->published && $isNew)
        {
            $row->published = 0;
            $mainframe->enqueueMessage(JText::_('K2_YOU_DONT_HAVE_THE_PERMISSION_TO_PUBLISH_ITEMS'), 'notice');
        }
    } 
```

如果我通过在 if 语句中添加对 $isNew 的检查来正确理解他们的模型，它只会将 published = 0 应用于新条目。如果我理解你的话，这是你唯一想要影响的人。这样，如果文章已经存在并且已发布，它将始终保持发布状态，除非管理员将其更改为未发布。

我不确定这是否会按我期望的方式工作，所以请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:26:39.807

转到您的 joomla 管理，转到 k2 菜单并在`User Groups`选项卡中创建一个名为 editors 的组并授予它访问权限`Publish item`，然后返回`Users`选项卡并将那些您想要使其成为编辑器的用户放在 editors 组中。

确保您的编辑组用户有权访问`Front-end item editing`和`Edit any item`。

您的问题是因为您的编辑器可以`Edit any item`访问但他们无权访问`Publish item`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T21:04:23.747

您应该允许作者编辑任何项目或禁用为作者编辑文章的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T15:29:17.847

您要设置的权限实际上是在k2用户组设置中。查找**Allow editor of already published items**并将其设置为**yes**。

至少对于 k2 v. 2.6.7 来说是这样，尽管我认为自 v.2.6.0 或更早版本以来没有任何权限设置发生变化。

# javascript - 如何在网站上使用行号突出显示代码和语法？

> ID：13321890
> 
> 赞同：3
> 
> 时间：2012-11-10T12:06:58.933
> 
> 标签：javascript

我想在网站上展示编程语言，而不需要任何初始化等等。[google-code-prettify](http://code.google.com/p/google-code-prettify/)显然是一个很好的起点，但是我不知道如何在旁边添加行号。我将要弄清楚的风格。

最好的问候，蒂姆

**更新：**

尽管我选择了最佳答案，但我发现 Google 实际上确实提供了我正在寻找的东西！

**更新**

我改变了主意，我为最佳答案选择的版本提供了大量的编程语言，而谷歌没有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:09:40.580

巴斯宾，要点？

[http://pastebin.com](http://pastebin.com)
[http://gist.github.con](http://gist.github.con)

两者都做你想做的。

或者，如果您希望在服务器上执行此操作

[http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:26:06.240

尝试查看这篇文章： http: [//www.leancrew.com/all-this/2007/12/source-code-line-numbers-and-javascript/](http://www.leancrew.com/all-this/2007/12/source-code-line-numbers-and-javascript/)

# php - PHP 和 XMLWriter

> ID：13321892
> 
> 赞同：2
> 
> 时间：2012-11-10T12:07:08.130
> 
> 标签：php, xml, xmlwriter

我**成功地**使用以下代码将多个大型 XML 文件合并到一个新的（更大的）XML 文件中。在 StackOverflow 上找到了至少部分内容

> ```
>  $docList = new DOMDocument();
> 
>     $root = $docList->createElement('documents');
>     $docList->appendChild($root);
> 
>     $doc = new DOMDocument();
> 
>     foreach(xmlFilenames as $xmlfilename) {
> 
>         $doc->load($xmlfilename);
> 
>         $xmlString = $doc->saveXML($doc->documentElement);
> 
>         $xpath = new DOMXPath($doc);
>         $query = self::getQuery();  // this is the name of the ROOT element
> 
>         $nodelist = $xpath->evaluate($query, $doc->documentElement);
> 
>         if( $nodelist->length > 0 ) {
> 
>             $node = $docList->importNode($nodelist->item(0), true);
> 
>             $xmldownload = $docList->createElement('document');
> 
>             if (self::getShowFileName())
>                 $xmldownload->setAttribute("filename", $filename);
> 
>             $xmldownload->appendChild($node);
> 
>             $root->appendChild($xmldownload);
>         }
> 
>     }
> 
> $newXMLFile = self::getNewXMLFile();
> $docList->save($newXMLFile); 
> ```

当文件数量随着文件大小的增加而增加时，我开始遇到*内存不足的问题。*

我在[这里](http://codeinthehole.com/writing/creating-large-xml-files-with-php/)找到了一篇文章，它解释了这个问题并推荐使用 XMLWriter

因此，现在尝试使用 PHP XMLWriter 将多个大型 XML 文件合并到一个新的（更大的）XML 文件中。稍后，我将对新文件执行 xpath。

代码：

> ```
> $xmlWriter = new XMLWriter();
> $xmlWriter->openMemory();
> $xmlWriter->openUri('mynewFile.xml');
> $xmlWriter->setIndent(true);
> $xmlWriter->startDocument('1.0', 'UTF-8');
> 
> $xmlWriter->startElement('documents');
> 
> $doc = new DOMDocument();
> 
> foreach($xmlfilenames as $xmlfilename) 
> {
>     $fileContents = file_get_contents($xmlfilename);
>     $xmlWriter->writeElement('document',$fileContents);
> }
> 
> $xmlWriter->endElement();
> $xmlWriter->endDocument();
> $xmlWriter->flush(); 
> ```

好吧，生成的（新）xml 文件**不再正确**，因为元素被转义 - 即 <?xml version="1.0" encoding="UTF-8"?>

```
&lt;CONFIRMOWNX&gt;
&lt;Confirm&gt;
&lt;LglVeh id=&quot;GLE&quot;&gt;
&lt;AddrLine1&gt;GLEACHER &amp;amp; COMPANY&lt;/AddrLine1&gt;
&lt;AddrLine2&gt;DESCAP DIVISION&lt;/AddrLine2&gt; 
```

谁能解释如何从 XML 文件中获取内容并将它们正确写入新文件？

我对此感到厌烦，我知道这将是我想念的简单事物。

谢谢。罗伯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T12:58:27.183

看，问题在于[**XMLWriter::writeElement**](http://www.php.net/manual/en/function.xmlwriter-write-element.php)旨在编写一个完整的 XML 元素。这就是为什么它会自动清理（例如替换`&`为`&amp;`）作为第二个参数传递给它的内容的内容。

一种可能的解决方案是改用[**XMLWriter::writeRaw**](http://www.php.net/manual/en/function.xmlwriter-write-raw.php)方法，因为它按原样写入内容 - 无需任何清理。显然它不会验证其输入，但在您的情况下，它似乎不是问题（因为您正在使用已经检查过的源）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-10T12:24:19.953

嗯，不知道为什么将它转换为 HTML 字符，但你可以像这样解码它

htmlspecialchars_decode($data);

它将特殊的 HTML 实体转换回字符。

# html - iOS - 将本地 HTML 页面附加到电子邮件

> ID：13321893
> 
> 赞同：1
> 
> 时间：2012-11-10T12:07:12.047
> 
> 标签：html, ios, email

是否允许将本地存储的 HTML 页面附加到从我的 iOS 应用程序发送的电子邮件中？

什么是正确的 mimeType ？

# 编辑

这是我的代码不起作用，请指出阻止本地 html 文件附件的问题在哪里。

```
-(IBAction)share:(id)sender{

NSString *btn_title = [sender titleForState:(UIControlStateNormal)];

 if ([btn_title isEqualToString: @"fb"] ) {

 }else if ([btn_title isEqualToString: @"tw"]){

 }else if ([btn_title isEqualToString: @"email"]){

     if ([MFMailComposeViewController canSendMail])
     {
         MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
         mailer.mailComposeDelegate = self;
         [mailer setSubject:@""];
         NSArray *toRecipients = [NSArray arrayWithObjects:@"", nil];
         [mailer setToRecipients:toRecipients];

         NSString *emailBody = @"";

         NSError * error = nil;
         NSData *htmlData = [NSData dataWithContentsOfFile:@"/hamla.html" options: NSMappedRead error: &error];

         [mailer addAttachmentData:htmlData mimeType:@"text/html" fileName:@"hamla"];

         [mailer setMessageBody:emailBody isHTML:NO];
         [self presentModalViewController:mailer animated:YES];
     }
     else
     {
         UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                         message:@"Your device doesn't support the composer sheet"
                                                        delegate:nil
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles: nil];
         [alert show];
     }
 } 
```

}

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
            break;
        default:
            NSLog(@"Mail not sent.");
            break;
    }
    // Remove the mail view
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:18:00.890

我不明白为什么会有问题。

mimetype 是“文本/html”。看看这里：

[http://reference.sitepoint.com/html/mime-types-full](http://reference.sitepoint.com/html/mime-types-full)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:07:53.043

@Shymaa Othman 您使用的 MIME 类型是正确的。只需要知道您是否检查过您是否正确定位了您的 html 并获取 NSData 不为空..？如果没有，请在附加到邮件之前尝试此代码。

```
NSData NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"hamla" ofType:@"html"];

NSData *htmlData = [NSData dataWithContentsOfFile:htmlFile]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T09:12:28.930

当我使用 isHTML = YES 设置MessageBody 并添加文本附件时，它可以工作。

```
NSData *stringData = [textBody dataUsingEncoding:NSUTF8StringEncoding];
[mailer addAttachmentData:stringData
                 mimeType:@"text/plain"
                 fileName:@"text_file"]; 
```

# java - Java：重命名从远程服务器下载的文件

> ID：13321897
> 
> 赞同：1
> 
> 时间：2012-11-10T12:07:18.853
> 
> 标签：java, string

在我的应用程序中，我正在从远程服务器下载文件。我正在使用其原始名称保存文件。问题是，在 url 名称中出现如下： **03%20Nas%20murrgo%20shov.mp3**而实际文件名是**Nas murrgo shov.mp3**。那么，如何格式化文件名呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:09:19.230

看起来您的字符串是 URL 编码的。尝试 ：

```
java.net.URLDecoder.decode(filename, "UTF-8"); 
```

# html - 隐藏的可见性在野生动物园中不起作用

> ID：13321898
> 
> 赞同：4
> 
> 时间：2012-11-10T12:07:52.270
> 
> 标签：html, css, safari

我想使用样式属性隐藏 div 标签

```
<div style='visibility:hidden'>Sample</div> 
```

但是，该物业适用于 Firefox，但不适用于 safari。有人可以提出替代方案。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:38:30.177

一种不同的方法可能是：

```
<span style="opacity: 0">Sample</span> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-10T10:08:41.720

您可以使用 display: none;

代码如下所示：

```
<div style='display:none;'>Sample</div> 
```

# qt - 事件提供给嵌入到 QML Qt4 中的 QWidget(QWT)

> ID：13321902
> 
> 赞同：2
> 
> 时间：2012-11-10T12:08:09.037
> 
> 标签：qt, qml, qwidget, qwt

我在 QML 项目 (Qt 4.8) 中使用了 QwtPlot (Qwt 6.0.1) 。我通过 QDeclarativeItem 包装它

```
GraphWidgetQML::GraphWidgetQML(QDeclarativeItem *parent):QDeclarativeItem(parent)
{
    _GraphArea = new GraphWidget; //child of QwtPlot without event handlers overrides
    QGraphicsProxyWidget *_wiget = new QGraphicsProxyWidget(this);    
    _wiget->setWidget(_GraphArea);
    _wiget->setFlag(QGraphicsItem::ItemIsFocusable,true);
    this->setClip(true);
} 
```

并通过代码插入 QML

```
qmlRegisterType<GraphWidgetQML> ("GraphWidget",1,0,"GraphWidget"); //registration type 
```

和 QML

```
 GraphWidget {
        id: drawer

        objectName: "drawer"

        anchors.top: parent.top
        anchors.bottom: parent.bottom
        anchors.left: parent.left
        anchors.right: parent.right
        //
        anchors.topMargin: 5
        anchors.bottomMargin: 5
        anchors.leftMargin: 5
        anchors.rightMargin: 5
    } 
```

但是，鼠标事件将无法正常工作。例如，当我想绘制一个缩放矩形时，当我释放鼠标按钮时，它不会缩放，直到按下回车键。右键根本不起作用。

如何进行适当的活动提供？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T09:36:57.903

在研究[这个问题](https://stackoverflow.com/questions/17128533/why-doesnt-my-qdeclarativeitem-get-any-mouse-keyboard-events)时，我得到了一般的印象`QDeclarativeItem`- 继承的`QGraphicsItem`鼠标事件与“正常”事件的行为不太一样`QWidget`。很难在没有进一步测试的情况下具体/确定，但我有一个想法（来自 QtQuick 和 QML 之前的 Qt 的遥远记忆），对于`QWidget`鼠标移动事件，你会得到一个`mouseMoveEvent`没有`buttons()`按下的终止，而在`QGraphicsItem`唯一的通知中你会获取鼠标移动完成是一个`mouseReleaseEvent`.

`GraphWidget`如果您的组件依赖于所有按钮都打开但没有得到一个按钮，这似乎可以解释您观察到的行为`mouseMoveEvent`......但我不知道如何使用这些信息来解决问题抱歉。

# android - 这个 Handler 类应该是静态的，否则可能会发生泄漏

> ID：13321904
> 
> 赞同：5
> 
> 时间：2012-11-10T12:08:18.203
> 
> 标签：android, warnings, handler

我有一个非常简单的代码：

```
package com.example.conn08;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;

public class MainActivity extends Activity
{
    private static CustomHandler mHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        updateUI();
    }
    private class CustomHandler extends Handler
    {
        @Override  
        public void handleMessage(Message msg) 
        {  
            MainActivity.this.updateUI();  
        }  
        public void sleep(long delayMillis)
        {  
            this.removeMessages(0);  
            sendMessageDelayed(obtainMessage(0), delayMillis);  
        }  
    }
    private void updateUI()
    {
        mHandler.sleep(1000);
        Log.v("updateUI", "kokoko");
    }
} 
```

但在

```
MainActivity.this.updateUI(); 
```

我懂了

> 这个 Handler 类应该是静态的，否则可能会发生泄漏 (com.example.conn08.MainActivity.CustomHandler)

为什么？请帮忙

* * *

编辑代码：

```
package com.example.conn08;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;

public class MainActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        updateUI();
    }
    static class CustomHandler extends Handler
    {
        WeakReference<MainActivity> mActivity;

        CustomHandler(MainActivity aFragment) 
        {
            mActivity = new WeakReference<MainActivity>(aFragment);
        }
        @Override
        public void handleMessage(Message message) 
        {
            MainActivity theActivity = mActivity.get();
            theActivity.this.updateUI();  
        }
    }
    private CustomHandler mHandler = new CustomHandler(this);

    private void updateUI()
    {
        //mHandler.sleep(1000);
        Log.v("updateUI", "kokoko");
    }

} 
```

我已经像这里的例子一样编辑了它[Handlers and memory leaks in Android](https://stackoverflow.com/questions/11278875/handlers-and-memory-leaks-in-android)，但现在我有“theActivity cannot be resolve to a type”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T09:55:47.850

改变：

```
theActivity.this.updateUI(); 
```

至：

```
theActivity.updateUI(); 
```

因为当你说 theActivity 时，就像是这样说的。

# actionscript-3 - Actionscript：在加载的图像中添加按钮模式

> ID：13321905
> 
> 赞同：0
> 
> 时间：2012-11-10T12:08:37.260
> 
> 标签：actionscript-3, load, displayobject

我试图在我加载的图像中添加一个按钮模式。显示此错误：

```
Error #1056: Cannot create property buttonMode on flash.display.Loader. 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:34:44.997

Loader 扩展了 DisplayObjectContainer，但 buttonMode（和 useHandCursor）属性属于 Sprite 类和子类。

所以 - 最简单的解决方案是简单地创建一个新的 Sprite() 然后 addChild(yourLoader) 到精灵。并将 Sprite 添加到您希望加载程序所在的位置。然后将 buttonMode 和任何单击事件侦听器分配给该精灵。

对我来说，Loader 类可以调度点击事件但不能分配 buttonMode 从来没有意义，所以在这方面你的困惑是共享的！

# java - Javadoc 没有为扩展另一个类的类创建文档？

> ID：13321911
> 
> 赞同：2
> 
> 时间：2012-11-10T12:09:32.157
> 
> 标签：java, javadoc

我已经制作了一个由几个类组成的程序，一个扩展的类，但是一个类不产生任何 JavaDoc 或出现在程序树中。它是这样声明的：

```
class myClass extends anotherClassOfMine {

} 
```

我需要添加什么特别的东西`anotherClassOfMine`来确保创建 JavaDoc`myClass`吗？

TIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T20:51:28.413

正如评论中提到的，默认情况下 Javadoc 仅包含公共和受保护的元素。您的课程不是公开的，Javadoc 认为它不打算记录在案。

您可以公开您的类（添加），或者通过添加[访问选项](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#public)`public`之一来更改 Javadoc 的行为或. 其他值为或（默认值）。 `-package``-private``-public``-protected`

（当然，您还应该添加一些实际的文档，但上述更改之一应该足以让您的课程出现。）

# asp.net - 使用月饼模板

> ID：13321915
> 
> 赞同：1
> 
> 时间：2012-11-10T12:09:41.950
> 
> 标签：asp.net, html, templates

这是月饼模板链接：[月饼模板](http://themeforest.net/item/mooncake-responsive-admin-template/3138068)。有人用过吗？我正在尝试使用 ASP.NET 控件将此模板应用于我的 ASP.NET 网站，但对此我有一些问题。

首先，在`Forget password`菜单中，当用户单击`Reset`按钮时，它将回传到服务器并进行一些验证。如果它没有通过验证，表单将再次显示错误消息。问题是当页面重新加载时，它会变回默认视图，即`Login`菜单，所以我必须更改为`Forget password`菜单才能看到错误消息。如何让它`Forget password`直接显示菜单？

第二件事是如何将表格格式应用于我的网格视图？此模板中的表格列可以通过单击标题进行排序而无需回发。您的任何帮助将不胜感激。提前致谢 ：）

# java - Java JNI 内存管理

> ID：13321916
> 
> 赞同：2
> 
> 时间：2012-11-10T12:09:51.500
> 
> 标签：java, c++, memory-management, java-native-interface, embedded

我想使用 Java Native Interface 包装一个 C++ 库。我想知道如何进行内存管理，因为不能保证调用*afaik 。* `Object.finalize()`我想避免用户需要调用`free()`方法。此外，该库将在嵌入式系统中使用，这意味着一些对象归应用程序所有，而一些对象归 Java 运行时所有。当 Java 插件保存对应用程序拥有的内存的引用时，可能会发生应用程序已经释放它并且因此引用无效的情况。

够清楚吗？

谢谢，

# java - 参数类型不是协变的吗？

> ID：13321921
> 
> 赞同：18
> 
> 时间：2012-11-10T12:11:00.690
> 
> 标签：java, scala

我理解协方差和反方差这两个术语。但是有一件小事我无法理解。在 coursera 上的“Scala 中的函数式编程”课程中，Martin Ordersky 提到：

> 函数的参数类型是逆变的，返回类型是协变的

因此，例如在 Java 中， let `Dog`extends `Animal`。让一个函数为：

```
void getSomething(Animal a){ 
```

我有函数调用

```
Dog d = new Dog();
getSomething(d) 
```

所以基本上发生的事情就是这样`Animal a = d`。根据[wiki](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)协方差是“将更宽转换为窄”。上面我们正在从狗转换为动物。那么参数类型不是协变而不是逆变吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-10T12:27:02.027

这是[在 Scala 中定义函数的方式](http://www.scala-lang.org/api/2.9.1/scala/Function1.html)：

```
trait Function1 [-T1, +R]  extends AnyRef 
```

在英语中，参数`T1`是逆变的，结果类型`R`是协变的。这是什么意思？

当一段代码需要一个`Dog => Animal`类型的函数时，你可以提供一个`Animal => Animal`类型的函数，这要归功于参数的逆变（你可以使用更广泛的类型）。

`Dog => Dog`由于结果类型的协方差，您还可以提供类型的函数（您可以使用更窄的类型）。

这实际上是有道理的：有人想要一个将狗变成任何动物的功能。你可以提供一个函数来改变任何动物（包括狗）。您的函数也只能返回狗，但狗仍然是动物。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T12:15:17.440

转换`Dog`为`Animal`将窄转换为宽，因此它不是协方差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T12:21:27.270

我记得在 2007 年阅读 Scala Book 时，我被这句话弄糊涂了。Martin 说得好像他在谈论一种语言特性，但在那句话中他只陈述了关于函数的一般事实。具体来说，Scala 仅通过常规*trait*来模拟该事实。由于 Scala 具有声明站点差异，因此表达这些语义对于该语言来说是很自然的。

另一方面，Java 泛型仅支持使用点变化，因此最接近 Java 中函数类型协/逆变的方法是在每个使用点手动编码：

```
public int secondOrderFunction(Function<? super Integer, ? extends Number> fn) {
     ....
} 
```

（假设一个适当声明的接口`Function<P, R>`，`P`代表参数类型和`R`返回类型）。自然地，由于这段代码在客户端手中，并且根本不特定于函数，所以关于参数类型/返回类型差异的声明不适用于 Java 的任何语言特性。它仅适用于更广泛的意义，与功能的*性质*有关。

Java 8 将引入闭包，这意味着一流的函数，但是，根据 Jörg 在下面的评论，实现将不包括完整的函数类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-24T09:58:34.530

我认为关于将*Dog*转换为*Animal*的原始问题已经得到澄清，但可能有趣的是，函数在其参数中定义为逆变，在其返回类型中定义为协变是有原因的。假设您有两个功能：

`val f: Vertebrate => Mammal = ??? val g: Mammal => Primate = ???`

当我们谈论函数时，您会期望[函数组合](https://www.mathsisfun.com/sets/functions-composition.html)成为您的原始操作之一。实际上，您可以组合 f 和 g ( *gof* ) 并获得一个函数：

`val h: Vertebrate => Primate = f andThen g`

但我可以`g`用一个子类型替换：

`val gChild: Animal => Primate`

在不破坏可组合性的情况下。And`gChild`是 的子类型，`g`正是因为我们在其参数中定义了 Function 逆变。作为结论，您可以看到，如果您想捕捉和保留*函数可组合性*的概念，就必须以这种方式定义函数。[您可以在此处](https://lansalo.com/2017/10/)找到更多详细信息和一些有助于消化该主题的图形

# c++ - 在物体破坏时留下“僵尸”标志

> ID：13321922
> 
> 赞同：3
> 
> 时间：2012-11-10T12:11:08.927
> 
> 标签：c++

我想显式地销毁一个对象（调用它及其所有字段的析构函数），但可能会发生我仍然持有一些指向相关对象的指针。因此，我还不想释放内存；相反，我想留下一种标志“我是一个被破坏的物体”。

我想到了以下方法：

```
class BaseClass { //all objects in question derive from this class
public:
    BaseClass() : destroyed(false) {}
    virtual ~BaseClass() {}
private:
    bool destroyed;
public:
    bool isDestroyed() { return destroyed; }
    void destroy() {
        this->~BaseClass(); //this will call the virtual destructor of a derivative class
        new(this) BaseClass();
        destroyed=true;
    }
}; 
```

当`destroy`被调用时，我基本上会破坏我拥有的任何对象（可能是派生对象）并在同一个地方创建一个新的“僵尸”对象。因此，我希望实现：

*   `ptr`以前指向该对象的任何其他指针仍然可以调用`ptr->isDestroyed()`以验证其存在。
*   我知道，如果我不检查僵尸标志并尝试访问属于任何派生对象的字段，则可能会发生不好的事情
*   我知道僵尸对象仍然消耗与被破坏对象一样多的内存（因为它可能是 的派生对象`BaseClass`）
*   我仍然必须释放被破坏对象的内存。但是，我希望那个调用`delete`仍然正确吗？

**问题：**

使用上述模式时还有其他问题需要考虑吗？

调用`delete`僵尸对象会正确释放前一个（正常）对象消耗的整个内存吗？

* * *

虽然我很欣赏您对如何以不同方式进行操作的意见，并且我可能倾向于按照您的方式进行操作 - 我仍然想了解上述代码带来的所有风险。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T12:49:50.463

> 有一个使用智能指针的建议。事实上 - 我正在这样做，但我的参考是循环的。我可以使用一些成熟的垃圾收集器，但是因为我知道自己在哪里（以及何时！）循环链可以被破坏，我想自己利用它。

然后您可以显式地使循环智能指针之一无效（如果您正在使用则[重置](http://msdn.microsoft.com/en-us/library/bb982757.aspx)`shared_ptr`）并打破循环。

或者，如果您提前知道循环在哪里，您也应该能够提前*避免*使用它们来`weak_ptr`代替一些`shared_ptr`s.

**- - 编辑 - -**

> 如果仅由弱指针引用的对象只会被标记为“无效”并释放对其包含的所有指针的控制（这句话清楚吗？），我会很高兴。

那么`weak_ptr::expired`应该会让你开心:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T22:28:21.173

你对你的问题有一些讨厌的评论。现在我认为他们不值得，尽管可能有更好的方法来做你想做的事。我知道您来自哪里，但实际上您使用析构函数的方式与使用您拒绝编写的重置函数的方式相同。实际上，调用析构函数并没有任何好处，因为调用析构函数与实际删除或重置任何内容无关，除非您实际编写代码在析构函数中执行此操作。

至于你关于安置新的问题：

您可能已经知道放置 new 不会分配任何内存，因此调用它只会在同一个位置创建对象。我知道这正是您想要的，但这不是必需的。由于您不会在对象上调用 delete 只是破坏，因此您可以在不初始化类的情况下将 destroy 设置为 true。

把它们加起来：

1.  如果您将析构函数用作常规虚函数，您将一无所获。不要这样做，因为如果析构函数被调用两次，你可能会遇到麻烦
2.  对放置 new 的调用不会分配内存，只会执行不必​​要的初始化。您可以将destroyed设置为true。

为了正确地做你想做的事情并获得析构函数的好处，你应该重载类的 new 和 delete 运算符并使用正常的销毁机制。然后，您可以选择不释放内存但将其标记为无效，或者可能释放大部分内存但让指针指向某些标志。

**编辑**

根据评论，我决定总结一下我看到的所有风险以及其他人指出的风险：

1.  在多线程环境中访问无效指针：使用您的方法可以在析构函数运行之后但在设置破坏标志之前访问一个类（至于您在其中一个评论中的问题 - shared_ptr 在大多数情况下是线程安全的）
2.  中继您无法完全控制的行为：您的方法依赖于析构函数自动调用未动态分配的其他成员的析构函数的方式：这意味着您仍然必须专门释放动态分配的内存，您无法控制如何正是这实现了，您无法控制调用其他析构函数的顺序。
3.  中继您无法完全控制的行为（第 2 点）：您正在中继编译器实现调用其他析构函数的析构函数部分的方式，您无法判断您的代码是否可移植，甚至如何移植处理两次调用它。
4.  析构函数可能会被调用两次：根据您的实现，这可能会导致内存泄漏或堆损坏，除非您防止两次释放相同的内存。您声称您通过调用放置 new 来防止这种情况 - 但是在多线程环境中，这不能进一步保证您假设所有内存分配都由默认构造函数完成 - 取决于您的具体实现，这可能是也可能不是真的。
5.  你违背了每个回答你的问题或评论它的人的更好判断 - 你可能是天才，但很可能你只是通过将你的实施限制在它可以正常工作的一小部分情况下，给自己开枪. 这就像当你使用错误的螺丝刀时，你最终会损坏螺丝。同样，以不打算使用的方式使用语言构造可能最终会导致程序有问题 - 析构函数旨在从删除和编译器生成的代码中调用以清除堆栈。直接使用它是不明智的。

我重复我的建议 - 重载删除和新的你想要的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T00:12:48.390

与其他人一样，我建议您只使用`weak_ptr`. 但是你问为什么你的方法不起作用。有一些优雅的实现和您的代码遍历的关注点分离的问题，但我不会争论这些。相反，我只想指出您的代码非常不安全。

考虑以下两个控制线程的执行顺序：

```
// Thread One
if ( ! ptr -> isDestroyed() ) {     // Step One
    // ... interruption ...
    ptr -> something();             // Step Three 
```

和另外一个：

```
// Thread Two
ptr -> destroy();                   // Step Two 
```

到第 3 步到来时，指针不再有效。现在可以通过实现`lock()`或类似的方法来解决这个问题，但是现在您可能会出现不释放锁的缺陷。大家推荐的原因`weak_ptr`是，这整个类的问题，无论是在类的接口还是在它的实现上，都已经解决了。

一个问题仍然存在。您似乎想要一个可以随意杀死物体的设施。这相当于要求指向对象的唯一指针是弱指针，不存在在手动删除对象时会中断的强指针。（我会规定这不是一个坏主意，尽管我必须说我不知道​​为什么它不是你的情况。）你可以通过在`weak_ptr`and之上构建来获得这个`shared_ptr`。这些类是通用的，所以如果你想禁止`shared_ptr`访问`BaseClass`，那么你可以编写一个特殊化的`shared_ptr<BaseClass>`行为不同的。隐藏一个实例`shared_ptr<BaseClass>`以防止删除，并通过您控制的工厂方法提供此类指针。

在这个模型中`destroy()`需要注意语义。第一个选择是您想要同步还是异步操作。同步`destroy()`将阻塞，直到所有外部指针都被释放并且不允许发布新指针。（我假设指针上的复制构造函数已经被禁用。）有两种异步`destroy()`。如果仍然存在外部引用，则两者中较简单的一个会失败。调用`unique()`hidden`shared_ptr()`使其成为一个简单的实现。更复杂的行为类似于异步 I/O 调用，将销毁安排在未来的某个时间点发生，大概是在所有外部引用消失后。这个函数可能被调用`mark_for_death()`反映语义，因为对象可能会或可能不会在返回时被销毁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T12:20:40.193

我会考虑使用一种适当的智能指针模式。访问已删除对象的行为仍未定义，“僵尸”标志并没有真正的帮助。与被删除的对象实例关联的内存可能会立即被创建的任何其他对象占用，因此访问僵尸标志不是您可以信任的信息。

恕我直言，安置新运营商

```
new(this) BaseClass(); 
```

在您的`destroy()`方法中使用不会真正有帮助。取决于如何使用此方法。而不是删除派生对象或已删除对象的内部析构函数。在后一种情况下，无论如何都会释放内存。

**更新：**

根据您的编辑，使用共享指针/弱指针习语来解决循环引用的出现不是更好吗？否则，我会将这些视为设计缺陷。

# java - 如何从 Internet 访问本地 IP 设备

> ID：13321929
> 
> 赞同：0
> 
> 时间：2012-11-10T12:11:34.660
> 
> 标签：java, network-programming

我想制作一个基于 android 的信使，我正在设计这样一种方式，即彼此聊天的两个用户都是彼此的服务器和客户端。访问具有一个基于公共 IP 的路由器且设备具有本地 IP 地址的不同网络中的设备时存在问题。我可以向公共 IP 设备发送消息，但我无法使用公共接口路由器访问本地网络内的设备。说发件人 IP：130.190.93.68 路由器 IP 是：130.190.09.54 路由器专用网络中接收者的 IP：192.168.15.186

发送方想与接收方通信。如何使用套接字编程实现它。

**从评论编辑**代码：

```
public class SocketClient extends Activity {
    private Socket socket;
    private String serverIpAddress = "192.168.15.186";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        bt = (Button) findViewById(R.id.myButton);
        tv = (TextView) findViewById(R.id.myTextView);

        InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
        socket = new Socket(serverAddr, 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:20:24.160

一种解决方案是拥有一个用户必须登录的中央服务器，当用户想要与其他人聊天时，如果其中一个客户端在专用网络上而另一个不在专用网络上，那么专用网络上的客户端将获得公共网络上客户端的地址并启动聊天会话。

如果*两个*客户端都在专用网络上，那么它必须通过服务器。如果没有客户端在专用网络上，则服务器随机决定哪个客户端应该是发起连接的客户端。

# c++ - 查找图中被一个顶点分隔的顶点

> ID：13321932
> 
> 赞同：1
> 
> 时间：2012-11-10T12:11:51.797
> 
> 标签：c++, algorithm, graph, vertex

你知道一些算法（比蛮力更好），它可以在图中找到被一个顶点分开并且彼此之间没有连接的顶点。例子：

![图表示例](../Images/f8130e86c85dba19d72a55491a2af81f.png)

在此图中找到的路径将是：

*   1 - 4
*   2 - 4
*   3 - 5

最好的是使用 stl 列表数组作为图形表示的 c++ 代码，但任何其他过程语言或伪代码的代码也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:44:32.523

一种方法是基于广度优先式搜索，对于`i`图中的每个顶点，我们扫描与相邻顶点相邻的顶点`i`（即两级邻接！）。

```
mark = array[0..n-1] of 0
flag = 1

for i = nodes in graph do

// mark pattern of nodes adjacent to i 
    mark[i] = flag
    for j = nodes adjacent to i do
        mark[j] = flag
    endfor

// scan nodes adjacent to those adjacent to i
// (separated by one vertex!)
    for j = nodes adjacent to i do
    for k = nodes adjacent to j do
        if mark[k] != flag  and k > i then
        // i,k are separated by another vertex
        // and there is no edge i,k

        // prevent duplicates
            mark[k] = flag
        endif
    endfor
    endfor

// implicit unmarking of current pattern
    flag += 1

endfor 
```

如果图的`m`每个顶点都有边，这将是一个`O(n * m^2)`需要`O(n)`额外空间的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:04:49.220

这个问题的一个简单而直观的解决方案在于邻接矩阵。我们知道，邻接矩阵的 n 次方的第 (i,j) 个元素列出了 i 和 j 之间长度正好为 n 的所有路径。
所以我只是读入A，邻接矩阵，然后计算A ^ 2。最后，我列出了它们之间恰好有一条长度为 2 的路径的所有对。

```
//sg
#include<stdio.h>
#define MAX_NODE 10
int main()
{
    int a[MAX_NODE][MAX_NODE],c[MAX_NODE][MAX_NODE];
    int i,j,k,n;
    printf("Enter the number of nodes : ");
    scanf("%d",&n);
    for(i=0;i<n;i++)
    for(j=0;j<=i;j++)
    {
        printf("Edge from %d to %d (1 yes/0 no) ? : ",i+1,j+1);
        scanf("%d",&a[i][j]);
        a[j][i]=a[i][j]; //undirected graph
    }
    //dump the graph
    for(i=0;i<n;i++)
    {
    for(j=0;j<n;j++)
    {
        c[i][j]=0;
        printf("%d",a[i][j]);
    }
    printf("\n");
    }
    printf("\n");

    //multiply
    for(i=0;i<n;i++)
    for(j=0;j<n;j++)
    for(k=0;k<n;k++)
    {
        c[i][j]+=a[i][k]*a[k][j];
    }
    //result of the multiplication
    for(i=0;i<n;i++)
    {
    for(j=0;j<n;j++)
    {
        printf("%d",c[i][j]);
    }
    printf("\n");
    }
    for(i=0;i<n;i++)
    for(j=0;j<=i;j++)
    {
        if(c[i][j]==1&&(!a[i][j])&&(i!=j)) //list the paths
        {
            printf("\n%d - %d",i+1, j+1 );

        }
    }
    return 0;
} 
```

**图表的示例运行**

```
[aman@aman c]$ ./Adjacency2 
Enter the number of nodes : 5
Edge from 1 to 1 (1 yes/0 no) ? : 0
Edge from 2 to 1 (1 yes/0 no) ? : 1
Edge from 2 to 2 (1 yes/0 no) ? : 0
Edge from 3 to 1 (1 yes/0 no) ? : 1
Edge from 3 to 2 (1 yes/0 no) ? : 1
Edge from 3 to 3 (1 yes/0 no) ? : 0
Edge from 4 to 1 (1 yes/0 no) ? : 0
Edge from 4 to 2 (1 yes/0 no) ? : 0
Edge from 4 to 3 (1 yes/0 no) ? : 1
Edge from 4 to 4 (1 yes/0 no) ? : 0
Edge from 5 to 1 (1 yes/0 no) ? : 0
Edge from 5 to 2 (1 yes/0 no) ? : 0
Edge from 5 to 3 (1 yes/0 no) ? : 0
Edge from 5 to 4 (1 yes/0 no) ? : 1
Edge from 5 to 5 (1 yes/0 no) ? : 0
01100
10100
11010
00101
00010

21110
12110
11301
11020
00101

4 - 1
4 - 2
5 - 3 
```

 **对 n 个顶点的**分析：****

 ***   时间： O(n^3) 。可以减少到[O(n^2.32)](http://en.wikipedia.org/wiki/Coppersmith%E2%80%93Winograd_algorithm)，非常好。

*   空间：O(n^2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T21:51:51.000

您可以使用经过改编的[Warshall 算法](http://datastructures.itgo.com/graphs/transclosure.htm)版本来做到这一点。以下代码示例中的算法使用图形的邻接矩阵并打印`i j`是否存在从 to 的边和从`i`to的`k`边，但没有直接的方式 from to 。`k``j``i``j`

```
#include <iostream>

int main() {
    // Adjacency Matrix of your graph
    const int n = 5;
    bool d[n][n] = {
       { 0, 1, 1, 0, 0 },
       { 0, 0, 1, 0, 0 }, 
       { 0, 0, 0, 1, 0 },
       { 0, 0, 0, 0, 1 },
       { 0, 0, 0, 0, 0 },
    };

    // Modified Warshall Algorithm
    for (int k = 0; k < n; k++)
        for (int i = 0; i < n; i++)
            if (d[i][k])
                for (int j = 0; j < n; j++)
                    if (d[k][j] && !d[i][j])
                        std::cout << i + 1 << " " j + 1 << std::endl;
} 
```

您可以[在线](http://codepad.org/VmSAqTpv)查看结果。**

# .net - WCF 合约操作，其参数类型仅在运行时已知

> ID：13321933
> 
> 赞同：1
> 
> 时间：2012-11-10T12:12:15.587
> 
> 标签：.net, wcf, design-patterns, soa

我有一个应用程序将使用 WCF 作为应用程序协议的底层传输机制，但这个问题更多的是关于面向服务的设计，而不是专门针对 WCF。

我在服务器上运行了不同的数据源插件，客户端可以在服务上调用 GetData 并指定数据源名称来引用这些插件。这样的函数调用将返回数据列表，例如过期发票数组：

```
class OverdueAccounts
{
    float Amount;
    int Days;
    string Reference;
} 
```

或一系列开放的支持案例：

```
class OpenTickets
{
    DateTime Date;
    Guid TicketId;
    TicketStatus Status;
} 
```

只有在加载插件时，我们才会知道将返回的类型以及可用的数据访问方法。

```
public interface IDataSourcePlugin /* plugin running on server */
{
  string Name;
  Type DataType;
  object GetDataType(); // returns a type of the type specified above by DataType
}

public interface IAppService /* service contract */
{ 
  [OperationContract]
  object GetData(string datasourceName); // will call plugins IDataSourcePlugin.GetDataType
} 
```

我的问题是这些类型只会在运行时知道，我不喜欢无类型的对象，但不知道任何其他推荐的方式来实现我需要的东西。

我曾考虑通过返回一串 XML 并指定要验证的 DTD 来传输数据对象，但这在 WCF 已经可以为我做的事情之上增加了一个额外的层。

或者，我可以设置一组具体的操作，例如`ReadString(string fieldname)`，`ReadInt(string fieldname)`等等，但这可能意味着很多调用。

重要的是保持数据流和消息在设置的协议内，并且都从客户端到服务器，然后服务器到数据源，而不是每个客户端直接到数据源。这是出于缓存和其他业务需求的原因。

关于如何为只能在运行时或替代设计中知道的类型构建传输和结构的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:16:46.100

您需要为服务添加`ServiceBehavior`一个自定义项`DataContractResolver`。在这个自定义`DataContractResolver`中，您可以动态添加您的类型和相应的名称。

在客户端，您很可能还必须添加一个类似的合约解析器，因此只有在您知道可以从服务中获取哪些类型的情况下，这才有效。

我在两个解析器中都使用了一个简单的字典。

# php - Mysql统计加入两个表后一个字段上的用户总数

> ID：13321934
> 
> 赞同：1
> 
> 时间：2012-11-10T12:12:25.120
> 
> 标签：php, mysql

需要知道获取每个管理员角色的用户总数并打印出来的语法是什么。

```
Roles
id  |  name
---    ----
1   |  admin
2   |  moderator
3   |  user 
```

表 2

```
users
id  |  name | role
--     ----   ----
1   |  a    |  1
2   |  b    |  2
3   |  c    |  2
4   |  d    |  2
5   |  e    |  3
6   |  f    |  3
7   |  g    |  3
8   |  h    |  1
9   |  i    |  1 
```

代码

```
 <?php
   $sql = "select r.name, r.id from role r, users u where r.id=u.role";
   $result = mysql_query($sql);
   $count = 0;
   while($row = mysql_fetch_array($result))
    {
      if($count!=$row['1'])
        {
          echo $row['0']."- NEED TOTAL NUMBER OF USERS ON EACH ROLES TO BE PRINTED HERE.";
          $count=$row['1'];
        }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T12:14:18.770

```
SELECT  COUNT(b.role)
FROM    roles a
        LEFT JOIN  users b
            ON a.ID = b.role
WHERE   a.name = 'admin' 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/0d62b/5)

**更新 1**

```
SELECT  a.name, COUNT(b.role) totalCount
FROM    roles a
        LEFT JOIN  users b
            ON a.ID = b.role
GROUP BY a.Name 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/0d62b/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T12:30:47.887

你需要一个 group by 子句:)

```
SELECT a.name, COUNT(b.id) "Total num of Users"
FROM    roles a, users b
        WHERE a.ID = b.role
group by a.ID,b.role 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T13:05:34.873

```
$result=mysql_fetch_array(mysql_query('select count(*) as total from users where role="1" '));
$result = $result['total'];
echo "Total Admins: ".$result; 
```

现在可以了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T12:28:06.743

可能对您有帮助：

```
<?php
$sql = "select r.name, r.id, count(u.role) as ct from role r, users u where r.id=u.role group by u.role";
$result = mysql_query($sql);
$count = 0;
while($row = mysql_fetch_array($result))
{
    if($row['2']==0)
    {
        echo $row['0']."- NEED TOTAL NUMBER OF USERS ON EACH ROLES";
    }
?> 
```

# search - github.com 上的代码片段存储库搜索

> ID：13321936
> 
> 赞同：8
> 
> 时间：2012-11-10T12:12:43.503
> 
> 标签：search, github, full-text-search, code-search

如何在[github.com](https://github.com/search)上搜索代码片段？`MSG_PREPARE`当我在存储库中搜索时，`ErikZalm/Marlin`github[什么也没](https://github.com/search?q=repo:ErikZalm/Marlin%20MSG_PREPARE&repo=&langOverride=&start_value=1&type=Everything&language=)显示。

我正在使用[https://github.com/search](https://github.com/search)上描述的存储库代码搜索语法

```
repo:ErikZalm/Marlin MSG_PREPARE 
```

没有结果，但`MSG_PREPARE`可以在此存储库中[找到](https://github.com/ErikZalm/Marlin/blob/Marlin_v1/Marlin/ultralcd.cpp#L2446)。我错过了什么吗？github.com上没有代码搜索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-01-29T08:55:50.743

在撰写此答案时，与大约 8 年前提出这个问题的时间相比，github 已经取得了很好的进展，尽管仍然没有达到您正在查看的长度。

GitHub 代码搜索受限于以下规则：[https](https://docs.github.com/en/github/searching-for-information-on-github/searching-code) ://docs.github.com/en/github/searching-for-information-on-github/searching-code 。引用相同的：

```
Code in forks is only searchable if the fork has more stars than the parent repository.
Forks with fewer stars than the parent repository are not indexed for code search.
To include forks with more stars than their parent in the search results, you will need to add fork:true or fork:only to your query.
For more information, see "Searching in forks." 
```

因此，我们可以使用该选项在 fork 中搜索`fork:true`，尽管正如预期的那样，由于`ErikZalm/Marlin`与 parent 相比，repo 的星数较低`MarlinFirmware/Marlin`，所以 fork 中的代码仍然没有被索引。因此，[除了与 repo 匹配之外，高级搜索没有任何好处。](https://github.com/search?q=repo%3AErikZalm%2FMarlin%20fork%3Atrue&type=Everything)

但是，如果您对父项执行相同的搜索，它会在代码上显示匹配项。[这是父 repo MarlinFirmware/Marlin 中 MSG_PREPARE 的匹配项](https://github.com/search?q=MSG_PREPARE%20repo%3AMarlinFirmware%2FMarlin&type=code)

幸运的是，我知道在这个领域工作的一家公司是 SourceGraph：[https ://about.sourcegraph.com/](https://about.sourcegraph.com/)

因此，您可以使用 SourceGraph 轻松搜索您想要的内容： [以下是使用 SourceGraph Cloud 的 ErikZalm/Marlin 中 MSG_PREPARE 的匹配项](https://sourcegraph.com/search?q=repo:%5Egithub%5C.com/ErikZalm/Marlin%24%20MSG_PREPARE&patternType=literal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:27:45.723

2013 年 7 月更新：“[预览新的搜索 API](http://developer.github.com/changes/2013-07-19-preview-the-new-search-api/) ”

代码上的[GitHub 搜索 API](http://developer.github.com/v3/search/#search-code)现在通过[文本匹配元数据](http://developer.github.com/v3/search/#text-match-metadata)**支持片段**。

![文本匹配元数据](../Images/c9b3f9ef3e631d83972a0539fbb77f1b.png)

> 一些 API 使用者会希望在显示搜索结果时突出显示匹配的搜索词。API 提供了额外的元数据来支持这个用例。要在搜索结果中获取此元数据，请在 Accept 标头中指定文本匹配媒体类型。例如，通过`curl`，上面的查询看起来像这样：

```
curl -H 'Accept: application/vnd.github.preview.text-match+json' \
  https://api.github.com/search/code?q=octokit+in:file+extension:gemspec+-repo:octokit/octokit.rb&sort=indexed 
```

> 这会产生与上面相同的 JSON 有效负载，并带有一个名为 text_matches 的额外键，它是一个对象数组。这些对象提供诸如搜索词在文本中的位置以及包含搜索词的属性等信息。

* * *

原始答案（2012 年 11 月）

我认为您不会错过任何事情。

如果您搜索[，`SdFile`](https://github.com/search?q=repo:ErikZalm/Marlin%20SdFile&repo=&langOverride=&start_value=1&type=Code&language=)您会在文件中找到结果`.pde`，但在 cpp 文件中没有结果，如在此[`SdFile.cpp`](https://github.com/ErikZalm/Marlin/blob/Marlin_v1/Marlin/SdFile.cpp)文件中。

搜索是在[4 年前（2008 年 11 月）引入](https://github.com/blog/202-github-code-search)的，但是，正如“[在 github 存储库中搜索定义给定函数的文件](https://stackoverflow.com/a/9402591/6309)”中所述，**GitHub 存储库代码根本没有完全索引**。

# javascript - 使用 jquery 找到锚点并设置为活动状态

> ID：13321943
> 
> 赞同：0
> 
> 时间：2012-11-10T12:13:20.257
> 
> 标签：javascript, jquery, anchor

我有 3 个内容框，并且都有一个带有指向下面内容框的锚链接的菜单！（链接是包括和动态的）

昨天我[收到了有关脚本的帮助](https://stackoverflow.com/questions/13306545/set-anchor-as-active-with-jquery)。当我有一个大的内容框时，它的工作非常好。

见这里：http: [//jsfiddle.net/wv9EQ/7/](http://jsfiddle.net/wv9EQ/7/)

现在当我有一个小的内容框时我遇到了问题

见这里：http: [//jsfiddle.net/wv9EQ/8/](http://jsfiddle.net/wv9EQ/8/)

例如，当我在框 2 和框 3 之间时，两个锚都变得活跃。有什么想法可以解决这个问题吗？我只想为我目前在里面的盒子设置一个活动锚

我使用这个脚本：

```
$(function(){
    var sections = {},
        _height  = $(window).height(),
        i        = 0;

    //// Grab positions of our sections
    $('.section').each(function(){
        sections[this.name] = $(this).offset().top;
    });

    $(document).scroll(function(){
        var $this = $(this),
            pos   = $this.scrollTop();

        for(i in sections){
            if(sections[i] > pos && sections[i] < pos + _height){
                $('a').removeClass('active');
                $('.nav_' + i).addClass('active');
            }  
        }
    });

    $('.head-nav-button').click(function()
    {
        $('a').removeClass('active');
        $('.nav_' + $(this).attr('href').replace('#', '')).addClass('active');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:33:40.613

将部分设置为活动后离开该功能：http: [//fiddle.jshell.net/doktormolle/nCasy/](http://fiddle.jshell.net/doktormolle/nCasy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:51:36.833

使用偏移量并`break`在第一个激活的菜单之后似乎有效：

**琐碎的部分：**

```
offset   = 50; // Should be at least the height of your nav bar

if(sections[i] - pos + offset > 0){
    $('a').removeClass('active');
    $('.nav_' + i).addClass('active');
    break;            
} 
```

小提琴的完整代码在这里：http: [//jsfiddle.net/wv9EQ/10/](http://jsfiddle.net/wv9EQ/10/)

# java - Eclipse插件，调用C++ dll

> ID：13321945
> 
> 赞同：4
> 
> 时间：2012-11-10T12:13:31.387
> 
> 标签：java, c++, eclipse, java-native-interface

我有一个自己的构建 Eclipse 插件，我需要在其中调用 C++ dll。

我尝试分两步执行此操作： 1\. 在我的 Eclipse 插件之外通过调用 C++ dll 的 Java 主程序 2\. 尝试将其放入我的插件中（这就是问题所在）

1.  Eclipse 插件之外。

主要 Java 代码 HelloWorld.java。

```
class HelloWorld {
    //public native void print();  //native method
    public native String print(String msg);  //native method

    static   //static initializer code
    {
        System.loadLibrary("CLibHelloWorld");
    } 

    public static void main(String[] args)
    {
    //HelloWorld hw = new HelloWorld();
        //hw.print();

    String result = new HelloWorld().print("Hello from Java");

    System.out.println("In Java, the returned string is: " + result);
    }
} 
```

通过命令编译：“C:\Program Files\Java\jdk1.6.0_34\bin\javac”HelloWorld.java

然后我通过以下方式为 C++ dll 制作了一个 h 文件 HelloWorld.h：

"C:\Program Files\Java\jdk1.6.0_34\bin\javah" HelloWorld

h 文件如下所示：

```
#include <jni.h>
/* Header for class HelloWorld */

#ifndef _Included_HelloWorld
#define _Included_HelloWorld
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     HelloWorld
 * Method:    print
 * Signature: (Ljava/lang/String;)Ljava/lang/String;
 */
JNIEXPORT jstring JNICALL Java_HelloWorld_print
  (JNIEnv *, jobject, jstring);

#ifdef __cplusplus
}
#endif
#endif 
```

现在是 C++ dll CLibHelloWorld.cpp ：

```
#include "HelloWorld.h"
#include "jni.h"
#include "stdafx.h"
#include "tchar.h"

#import "..\ManagedVBDLL\bin\Debug\ManagedVBDLL.tlb" raw_interfaces_only
using namespace ManagedVBDLL;

JNIEXPORT jstring JNICALL Java_HelloWorld_print(JNIEnv *env, jobject thisObj, jstring inJNIStr) {
   jboolean blnIsCopy;
   const char *inCStr;
   char outCStr [128] = "string from C++";

   inCStr = env->GetStringUTFChars(inJNIStr, &blnIsCopy);
   if (NULL == inCStr) return NULL;

   printf("In C, the received string is: %s\n", inCStr);
   env->ReleaseStringUTFChars(inJNIStr, inCStr);  

   return env->NewStringUTF(outCStr);
} 
```

构建 dll

当我运行 java 主程序时……一切正常！

1.  尝试将它放入我的 Eclipse 插件中（这就是问题所在）

我做了一个应该调用 C++ dll 的类：

```
package org.eclipse.ui.examples.recipeeditor.support;
import org.eclipse.jface.dialogs.MessageDialog;

public class HelloWorld {
    public native String print(String msg);  //native method

    static   //static initializer code
    {
        try {
            System.loadLibrary("CLibHelloWorld"); //$NON-NLS-1$
        } catch (Exception e) {
            e.printStackTrace();
            MessageDialog.openInformation(null, "HelloWorld", "HelloWorld Catch: " + e.getMessage());
        }
    } 
} 
```

并这样称呼它：

```
HelloWorld hw = new HelloWorld();
result = hw.print("Hi from Eclipse"); 
```

然后我在 hw.print 上得到这个错误（dll 的加载完成）：

java.lang.UnsatisfiedLinkError: org.eclipse.ui.examples.recipeeditor.support.HelloWorld.print(Ljava/lang/String;)Ljava/lang/String;

一个很长的故事，但我该如何解决呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:50:15.290

System.loadLibrary 仅在 LD_LIBRARY_PATH (Linux) 或 PATH (Windows) 中可用时才加载库。您还需要尊重正确的名称。不确定在 Windows 中，但在 linux 中，如果您`CLibHelloWorld`像以前一样加载，您的 DLL 应该被调用`libCLibHelloWorld.so`。我想有一个 System.getNativeMethodName 或类似的东西，所以你可以找到它。

无论如何，这不是我加载 DLL 的首选方式，因为您依赖于很多环境设置。相反，您可以使用它`System.load (dll_full_path)`来加载您的 DLL。它具有相同的效果，但你有更多的控制权。

但是，如果您使用此方法成功加载了 DLL，并且在尝试调用本机方法时不断收到上述错误，请查看 DLL 依赖项。您应该先加载依赖项，然后再加载要调用的库。

例如，如果你想加载依赖于 dll2 的 dll1，而后者又依赖于 dll3，你应该这样做：

```
System.load(dll3_path);
System.load(dll2_path);
System.load(dll1_path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T06:57:01.273

本机代码中的方法名必须与java-class的*类名和包名相对应。*由于您的 HelloWorld-class 从 default-package 更改为 org.eclipse.ui.examples.recipeeditor.support，您必须更改方法名称。

只需使用新类重新运行 javah 即可获得正确的头文件。

顺便说一句，如果您使用类似的东西在 OSGI 捆绑包中正确定义 dll，则不需要设置单独的库路径

```
Bundle-NativeCode: mydll.dll ; osname=win32 ; processor=x86 
```

并将 dll 包含在插件的根目录中。

# solr - 更新请求不成功。响应代码 0。（空）在 solr 中进行索引时

> ID：13321946
> 
> 赞同：1
> 
> 时间：2012-11-10T12:13:35.247
> 
> 标签：solr, indexing

我坚持使用新的本地安装的 solr。每件事都正常工作，直到某一点。

我可以毫无问题地访问 solr 的管理员：`http://localhost:8983/solr/admin/`

但是当我索引我的mysql内容时，我抛出了错误：

> 更新请求不成功。响应代码 0。（空）

没有别的了。我到处看了看，但我真的不知道问题出在哪里。

任何想法 ？

以下是关于我尝试索引的一些信息：

我的 schema.xml 中的字段：

```
<field name="pl_album_id" type="string" indexed="true" stored="true" required="true" />
   <field name="pl_album_num_id" type="int" indexed="true" stored="true" required="true" />
   <field name="pl_album_title" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_album_number" type="int" indexed="true" stored="true"/>
   <field name="pl_album_keywords" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_album_summary" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_album_general_mark" type="int" indexed="true" stored="true"/>
   <field name="pl_album_authors" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_album_signer_id" type="int" indexed="true" stored="true" multiValued="true"/>
   <field name="pl_album_format" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_album_is_complete" type="int" indexed="true" stored="true"/>
   <field name="pl_album_status_id" type="int" indexed="true" stored="true"/>
   <field name="pl_album_sort_status_id" type="int" indexed="true" stored="true"/>
   <field name="pl_album_is_online" type="int" indexed="true" stored="true"/>
   <field name="pl_album_review_created_at" type="date" indexed="true" stored="true"/>
   <field name="pl_album_review_year" type="int" indexed="true" stored="true"/>
   <field name="pl_series_id" type="int" indexed="true" stored="true"/>
   <field name="pl_series_title" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_series_title_copy_for_sorting" type="string" indexed="true" stored="true"/>
   <field name="pl_series_prefix" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_series_type_id" type="int" indexed="true" stored="true"/>
   <field name="pl_series_origin_id" type="int" indexed="true" stored="true"/>
   <field name="pl_series_genre_id" type="int" indexed="true" stored="true" multiValued="true"/>
   <field name="pl_series_genres" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_series_targeted_public_id" type="int" indexed="true" stored="true" multiValued="true"/>
   <field name="pl_collection_id" type="int" indexed="true" stored="true"/>
   <field name="pl_collection_label" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_publisher_id" type="int" indexed="true" stored="true"/>
   <field name="pl_publisher_name" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_published_at" type="date" indexed="true" stored="true"/>
   <field name="pl_visit_counter" type="int" indexed="true" stored="true"/>
   <field name="pl_user_id" type="int" indexed="true" stored="true"/>
   <field name="pl_user_first_name" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_user_last_name" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_cycle_type_id" type="int" indexed="true" stored="true"/>
   <field name="pl_cycle_title" type="text_general_fr" indexed="true" stored="true"/>
   <field name="pl_cycle_number" type="int" indexed="true" stored="true"/> 
```

我用那个函数索引它们：

```
public function solrIndex($AlbumId = null)
    {
      $album = new Album();
      $album_list = $album->getForSolrIndex($AlbumId);

      $options = array
      (
          'hostname' => sfConfig::get('plconfig_solr_hostname'),
          'port'     => sfConfig::get('plconfig_solr_port')
      );
      $solr_client = new SolrClient($options);

      foreach($album_list as $album_details)
      {
        $solr_client->deleteByQuery("pl_album_num_id:".$album_details['id']);
      }
      $solr_client->commit();

      foreach($album_list as $album_details)
      {
        $doc = new SolrInputDocument();

        $doc->addField('pl_album_id', $album_details['id']);
        $doc->addField('pl_album_num_id', $album_details['id']);
        $doc->addField('pl_album_title', $album_details['title']);
        if($album_details['number'])
        {
          $doc->addField('pl_album_number', $album_details['number']);
        }
        $doc->addField('pl_album_keywords', $album_details['keywords']);
        $doc->addField('pl_album_summary', $album_details['summary']);
        if($album_details['general_mark'])
        {
          $doc->addField('pl_album_general_mark', $album_details['general_mark']);
        }
        $doc->addField('pl_album_authors', $album_details['authors']);
        $doc->addField('pl_album_is_complete', $album_details['album_is_complete'] ? $album_details['album_is_complete'] : 0);
        $doc->addField('pl_album_status_id', $album_details['status_id'] ? $album_details['status_id'] : 0);
        $sort_status_id = 8;
        if($album_details['status_id'] == Album::TO_REREAD)
        {
          $sort_status_id = 1;
        }
        if($album_details['status_id'] == Album::TO_IMPROVE)
        {
          $sort_status_id = 2;
        }
        if($album_details['status_id'] == Album::TO_REVIEW)
        {
          $sort_status_id = 3;
        }
        if($album_details['status_id'] == Album::TO_RECEIVE)
        {
          $sort_status_id = 4;
        }
        if($album_details['status_id'] == Album::ONLINE)
        {
          $sort_status_id = 5;
        }
        if($album_details['status_id'] == Album::ABANDON_BY_PUBLISHER)
        {
          $sort_status_id = 6;
        }
        if($album_details['status_id'] == Album::ABANDON_BY_PLANETEBD)
        {
          $sort_status_id = 7;
        }
        $doc->addField('pl_album_sort_status_id', $sort_status_id);
        $doc->addField('pl_album_format', $album_details['format']);
        $doc->addField('pl_album_is_online', $album_details['is_online'] ? $album_details['is_online'] : 0);
        if($album_details['album_review_created_at'])
        {
          $doc->addField('pl_album_review_created_at', date('Y-m-d\TH:i:s\Z', strtotime($album_details['album_review_created_at'])));
          $doc->addField('pl_album_review_year', date('Y', strtotime($album_details['album_review_created_at'])));
        }
        $doc->addField('pl_series_id', $album_details['series_id']);
        $doc->addField('pl_series_title', $album_details['series_title']);
        $doc->addField('pl_series_title_copy_for_sorting', $album_details['series_title']);
        $doc->addField('pl_series_prefix', $album_details['series_prefix']);
        if($album_details['type_id'])
        {
          $doc->addField('pl_series_type_id', $album_details['type_id']);
        }
        $doc->addField('pl_series_genres', $album_details['series_genres']);
        $doc->addField('pl_series_origin_id', $album_details['series_origin_id'] ? $album_details['series_origin_id'] : 0);
        $doc->addField('pl_collection_id', $album_details['collection_id'] ? $album_details['collection_id'] : 0);
        $doc->addField('pl_collection_label', $album_details['label']);
        $doc->addField('pl_publisher_id', $album_details['publisher_id']);
        $doc->addField('pl_publisher_name', $album_details['name']);
        if($album_details['published_at'])
        {
          $doc->addField('pl_published_at', $album_details['published_at'].'T00:00:00Z');
        }
        $doc->addField('pl_visit_counter', $album_details['visit_counter'] ? $album_details['visit_counter'] : 0);
        $doc->addField('pl_user_id', $album_details['user_id'] ? $album_details['user_id'] : 0);
        $doc->addField('pl_user_first_name', $album_details['user_first_name']);
        $doc->addField('pl_user_last_name', $album_details['user_last_name']);
        $doc->addField('pl_cycle_type_id', $album_details['cycle_type_id'] ? $album_details['cycle_type_id'] : 0);
        $doc->addField('pl_cycle_title', $album_details['cycle_title']);
        $doc->addField('pl_cycle_number', $album_details['cycle_number'] ? $album_details['cycle_number'] : 0);

        foreach($album_details['signers'] as $signer_id) {
          $doc->addField('pl_album_signer_id', $signer_id);
        }

        foreach($album_details['genres'] as $genre_id) {
          $doc->addField('pl_series_genre_id', $genre_id);
        }

        foreach($album_details['targeted_public'] as $targeted_public_id) {
          $doc->addField('pl_series_targeted_public_id', $targeted_public_id);
        }        

        $updateResponse = $solr_client->addDocument($doc);
      }
      $solr_client->commit();

      return count($album_list);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:43:04.967

您使用的是什么 Solr 版本？是solr4吗？您是否已在架构中定义？

# google-app-engine - 谷歌应用引擎从内存缓存中检索空值

> ID：13321956
> 
> 赞同：0
> 
> 时间：2012-11-10T12:14:45.053
> 
> 标签：google-app-engine

我想在谷歌应用引擎中使用内存缓存，我是这样实现的：

```
public static UserDictionary userDictionary = null;
private MemcacheService syncCache;
public static final Logger log = Logger.getLogger(UserDictionary.class.getName());

@SuppressWarnings(value = { "unchecked" })
private UserDictionary() {      
    syncCache = MemcacheServiceFactory.getMemcacheService();
    syncCache.setErrorHandler(ErrorHandlers.getConsistentLogAndContinue(Level.INFO));
}

public static UserDictionary getInstance() {
    if(userDictionary == null) {                
                userDictionary = new UserDictionary();
    }
    return userDictionary;
}

public Entity getFromCache(String userId) {     
        return (Entity) syncCache.get(userId);      
}

public void putInCache(String userId, Entity userEntity) {
    syncCache.put(userId, userEntity,Expiration.byDeltaSeconds(999999999), MemcacheService.SetPolicy.SET_ALWAYS);
}

public boolean isCacheEmpty() {
    long itemCount = syncCache.getStatistics().getItemCount();
    return itemCount == 0L;     
} 
```

问题是在我将一个对象放入缓存然后我尝试获取它之后，get 方法返回 null。我查看了我的谷歌应用程序引擎，它显示这是内存缓存中的一个对象。关键是一个 java 字符串。key 和 value 都实现了 Serializable。

命中数：0 未命中数：31522 命中率：0% 项目数：15 个项目

# c++-cli - 无法从 C++/Cli 项目添加对 PCL 的引用

> ID：13321958
> 
> 赞同：0
> 
> 时间：2012-11-10T12:14:50.483
> 
> 标签：c++-cli, portable-class-library

我有一个 Portable Class Library 项目，激活了 Net 4.5 平台。我可以在其他 C# 项目中毫无问题地使用它。现在，我有一个 C++/Cli 项目，我需要使用上述 PCL 项目的一些类。当我添加对 PCL 项目的引用时，由于目标平台不同，Visual Studio 2012 给我一个错误。

从 C++/Cli 项目添加对 PCL 项目的引用是否有问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:50:47.910

此问题已回复，但由于某种未知原因，回复已被删除：

解决方法是编辑vcxproj文件并更改

```
 <TargetFrameworkVersion>v4.0</TargetFrameworkVersion> 
```

到

```
 <TargetFrameworkVersion>v4.5</TargetFrameworkVersion> 
```

# javascript - Phonegap后退按钮事件，检测历史第一页？

> ID：13321960
> 
> 赞同：2
> 
> 时间：2012-11-10T12:15:20.737
> 
> 标签：javascript, cordova

向我的 Phonegap 2.0 移动应用程序添加`backbutton`事件侦听器可防止用户使用返回键退出。

在添加事件侦听器之前，这是可行的：如果用户访问了 N 个页面并单击返回 N+1 次，则应用程序将关闭（或者对于 android 4.0 或更高版本进入后台）。

请在下面查看我的代码。

```
document.addEventListener("backbutton", function(){
    if (window.history.length == 0) { // this does not work
        function quitApp(){
            navigator.app.exitApp();
        }
        navigator.notification.confirm(
            "Are you sure you want to quit?",
            quitApp,
            'App Title',
            'Cancel,Ok');
        return;
    }
    if (typeof(window.activePage.onBack) === 'function') {
        window.activePage.onBack();
    } else {
        window.history.back();          
    }
}, false); 
```

知道如何实现这一点：允许用户使用后退按钮退出，同时保持我的事件监听器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:27:29.363

尝试绑定标题页上的后退按钮，可能是这样的：

```
$('#home-page-title').bind( 'pageinit',function(event){

      document.addEventListener("backbutton", function(){
           navigator.app.exitApp();
  }, false);

}); 
```

# mysql - 如何在 Rails 中管理 mysql2 连接，而不使用 activerecord

> ID：13321965
> 
> 赞同：0
> 
> 时间：2012-11-10T12:15:57.383
> 
> 标签：mysql, ruby-on-rails, heroku, mysql2

我经常需要访问一个 mysql 数据库，我的主要数据存储是 mongo，我使用 mongoid 访问它。我想知道在不使用活动记录的情况下管理与 mysql 的连接（使用 mysql2 gem - 0.2.7）的最佳方法。

我目前做以下...

```
# In config/initializers/mysql.rb
class MySqlConnection

  def self.client
    @client ||= Mysql2::Client.new(host: ENV['mysql_host'], 
                                   username: ENV['mysql_username'],
                                   password: ENV['mysql_password'], 
                                   database: ENV['mysql_database'])
  end

end 
```

然后我使用连接，就像这样......

```
rows_q = "SELECT * FROM amaizng_table WHERE great_column = '#{cool_value}' "
rows = ::MySqlConnection.client.query(rows_q) 
```

一切正常——但我有一种潜意识的怀疑，我做错了可怕的事情，事情会在路上爆炸。

另请注意，该应用程序托管在 heroku 上

有人知道解决这个问题的最佳方法吗？

谢谢！

乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:37:20.400

为什么，为什么你要摆脱 ActiveRecord 的真棒（或任何其他 ORM，真的）？

```
class Amazing < ActiveRecord::Base
  establish_connection :mysql_database
end 
```

如此简单，它很痛。有关更多详细信息，请参阅[此](http://pullmonkey.com/2008/4/21/ruby-on-rails-multiple-database-connections/)内容。

# c - 另一个MinGW“gcc：错误：CreateProcess：没有这样的文件或目录”

> ID：13321980
> 
> 赞同：15
> 
> 时间：2012-11-10T12:17:44.527
> 
> 标签：c, gcc, windows-8, mingw

我已经通过 GUI 安装程序在 Windows 8（64 位）中安装了 MinGW C 编译器。但是当我尝试编译一个 C 程序时，gcc 说：**gcc: CreateProcess: No such file or directory**

这是一个常见的错误，我已经尝试了我找到的所有解决方案，但没有成功。

特别是，（在[CreateProcess: No such file or directory](https://stackoverflow.com/questions/3848357/gcc-createprocess-no-such-file-or-directory)之后）我试图：

1.  [已编辑] 将**C:\MinGw\libexec\gcc\mingw32\4.7.2**添加到我的系统路径
2.  通过 mingw-get CLI 卸载并重新安装 gcc：

    mingw-get 删除 mingw32-gcc
    mingw-get 安装 mingw32-gcc

其他建议？

编辑：详细的 gcc 输出：

```
> gcc -v helloWorld.c
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.7.2/lto-
wrapper.exe
Target: mingw32
Configured with: ../gcc-4.7.2/configure --enable-languages=c,c++,ada,fortran,obj
c,obj-c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgo
mp --disable-win32-registry --enable-libstdcxx-debug --disable-build-poststage1-
with-cxx --enable-version-specific-runtime-libs --build=mingw32 --prefix=/mingw
Thread model: win32
gcc version 4.7.2 (GCC)
COLLECT_GCC_OPTIONS='-v' '-mtune=i386' '-march=i386'
cc1plus -quiet -v -iprefix c:\mingw\bin\../lib/gcc/mingw32/4.7.2/
OPTIONS.C -quiet -dumpbase OPTIONS.C -mtune=i386 -march=i386 -auxbase OPTIONS -
version -o C:\Users\elvis\AppData\Local\Temp\cc4fWSvg.s
gcc: error: CreateProcess: No such file or directory 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T21:36:01.067

您不应该添加`C:\MinGw\libexec\gcc\mingw32\4.7.2`到路径中。

添加：`c:\MinGW\bin`

您可能需要重新启动以确保该路径对所有进程都可用。

另一个建议是使用不同的 MinGW 发行版。自从我使用“官方”MinGW 发行版以来已经有很长时间了，因为安装步骤是如此的拜占庭式和脆弱的。我听说他们在安装程序方面取得了很大进步，但据我所知，它似乎仍然相当复杂和脆弱。

[TDM 的安装程序](http://tdm-gcc.tdragon.net/download)可以正常工作，但我认为 TDM 版本还不是 4.7.2。

nuwen[发行版的](http://nuwen.net/mingw.html)安装只是将档案解压到你想要的地方（我喜欢那个！）并确保路径指向 gcc.exe 的位置。Nuwen 还打包了 boost 库，这很好。

* * *

我认为它会有所帮助，这就是我从中得到的`gcc -v hello.c`（`c:\mingw.4.7.2\bin`在路径中）：

```
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=c:/mingw.4.7.2/bin/../libexec/gcc/i686-pc-mingw32/4.7.2/lto-wrapper.exe
Target: i686-pc-mingw32
Configured with: ../src/configure --prefix=/c/temp/gcc/dest --with-gmp=/c/temp/gcc/gmp --with-mpfr=/c/temp/gcc/mpfr --with-mpc=/c/temp/gcc/mpc --enable-languages=c,c++ --with-arch=i686 --with-tune=generic --disable-libstdcxx-pch --disable-nls --disable-shared --disable-sjlj-exceptions --disable-win32-registry --enable-checking=release --enable-lto
Thread model: win32
gcc version 4.7.2 (GCC) 
COLLECT_GCC_OPTIONS='-v' '-mtune=generic' '-march=i686'
 c:/mingw.4.7.2/bin/../libexec/gcc/i686-pc-mingw32/4.7.2/cc1.exe -quiet -v -iprefix c:\mingw.4.7.2\bin\../lib/gcc/i686-pc-mingw32/4.7.2/ hello.c -quiet -dumpbase hello.c -mtune=generic -march=i686 -auxbase hello -version -o C:\Users\mikeb\AppData\Local\Temp\cct1oltc.s
GNU C (GCC) version 4.7.2 (i686-pc-mingw32)
    compiled by GNU C version 4.7.2, GMP version 5.0.5, MPFR version 3.1.1-p2, MPC version 1.0.1
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "c:\mingw.4.7.2\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../i686-pc-mingw32/include"
ignoring duplicate directory "c:/mingw.4.7.2/lib/gcc/../../lib/gcc/i686-pc-mingw32/4.7.2/include"
ignoring nonexistent directory "c:/temp/gcc/dest/include"
ignoring nonexistent directory "/c/temp/gcc/dest/include"
ignoring duplicate directory "c:/mingw.4.7.2/lib/gcc/../../lib/gcc/i686-pc-mingw32/4.7.2/include-fixed"
ignoring nonexistent directory "c:/mingw.4.7.2/lib/gcc/../../lib/gcc/i686-pc-mingw32/4.7.2/../../../../i686-pc-mingw32/include"
ignoring nonexistent directory "/mingw/include"
#include "..." search starts here:
#include <...> search starts here:
 c:\mingw.4.7.2\bin\../lib/gcc/i686-pc-mingw32/4.7.2/include
 c:\mingw.4.7.2\bin\../lib/gcc/i686-pc-mingw32/4.7.2/../../../../include
 c:\mingw.4.7.2\bin\../lib/gcc/i686-pc-mingw32/4.7.2/include-fixed
End of search list.
GNU C (GCC) version 4.7.2 (i686-pc-mingw32)
    compiled by GNU C version 4.7.2, GMP version 5.0.5, MPFR version 3.1.1-p2, MPC version 1.0.1
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 8461a53e6fc78ff58191bda61fe9586d
COLLECT_GCC_OPTIONS='-v' '-mtune=generic' '-march=i686'
 as -v -o C:\Users\mikeb\AppData\Local\Temp\ccqRcYAj.o C:\Users\mikeb\AppData\Local\Temp\cct1oltc.s
GNU assembler version 2.22 (i686-pc-mingw32) using BFD version (GNU Binutils) 2.22
COMPILER_PATH=c:/mingw.4.7.2/bin/../libexec/gcc/i686-pc-mingw32/4.7.2/;c:/mingw.4.7.2/bin/../libexec/gcc/
LIBRARY_PATH=c:/mingw.4.7.2/bin/../lib/gcc/i686-pc-mingw32/4.7.2/;c:/mingw.4.7.2/bin/../lib/gcc/;c:/mingw.4.7.2/bin/../lib/gcc/i686-pc-mingw32/4.7.2/../../../
COLLECT_GCC_OPTIONS='-v' '-mtune=generic' '-march=i686'
 c:/mingw.4.7.2/bin/../libexec/gcc/i686-pc-mingw32/4.7.2/collect2.exe -Bdynamic c:/mingw.4.7.2/bin/../lib/gcc/i686-pc-mingw32/4.7.2/../../../crt2.o c:/mingw.4.7.2/bin/../lib/gcc/i686-pc-mingw32/4.7.2/crtbegin.o -Lc:/mingw.4.7.2/bin/../lib/gcc/i686-pc-mingw32/4.7.2 -Lc:/mingw.4.7.2/bin/../lib/gcc -Lc:/mingw.4.7.2/bin/../lib/gcc/i686-pc-mingw32/4.7.2/../../.. C:\Users\mikeb\AppData\Local\Temp\ccqRcYAj.o -lmingw32 -lgcc -lmoldname -lmingwex -lmsvcrt -ladvapi32 -lshell32 -luser32 -lkernel32 -lmingw32 -lgcc -lmoldname -lmingwex -lmsvcrt c:/mingw.4.7.2/bin/../lib/gcc/i686-pc-mingw32/4.7.2/crtend.o 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T17:14:27.163

就我而言，我卸载了 MinGW 中的一些项目以节省 SSD 上的空间。安装 mingw32-gcc 开发类为我解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-02T12:09:49.740

我有同样的错误。我有 64 位 win 7 操作系统。首先我安装了 32 位 MinGW，gcc 安装成功但显示此错误。尝试安装 64 位 MinGW 但无法安装。搜索了很多，尝试了很多东西，但没有任何效果。

最后从这个链接安装“tdm64-gcc-5.1.0-2”>> [https://sourceforge.net/projects/tdm-gcc/?source=typ_redirect](https://sourceforge.net/projects/tdm-gcc/?source=typ_redirect)

它在一次尝试中安装和工作，没有任何错误。没有什么特别的尝试。

最重要的一点是，安装后需要在 env 路径上添加“bin”目录（在我的例子中是“C:\TDM-GCC-64\bin”）。然后在控制台 >> "gcc --version" 上通过此命令检查 gcc 安装，这将显示已安装的 gcc 版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-27T23:15:00.473

[我安装了官网](http://www.mingw.org/ "官网")的MinGW 。
我选择**“基本设置”**（我只想要获取 c 编译器），并标记了所有包，在此安装之后，我添加了路径，就我而言。

> C:\MinGW\bin。

我在中创建了 ac 文件

> C:\Users\christian\Documents\C 项目\

名称为 untitled1.c

文我尝试使用命令

> gcc untitled.c

命令提示符向我显示了该消息。

> gcc：CreateProcess：没有这样的文件或目录

* * *

**我是如何解决这个问题的？**
我删除了所有包裹，

> -打开“MinGW 安装管理器” -
> 选择“基本设置”。
> - 标记删除所有包。
> - 选择“安装”点击。
> - 单击应用更改。
> - 之后您可以再次安装它们。

* * *

**操作系统**

*   版本：Windows 10 专业版
*   版本：1607
*   操作系统构建：14393.187

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-23T03:16:47.087

我也有同样的问题。

我的文件夹中有一个`startgcc.bat` 。在我的作业
中删除双引号后对我来说没关系。`PATH`我的蝙蝠脚本：

```
@title gcc-mingw
@rem @cd /d %~dp0

@rem below line will fail and got error: gcc.exe: error: createprocess: no such file or directory
@rem @set path="C:\mingw64\bin";%path%

@rem below lines works ok without double quotation marks
@set path=C:\mingw64\bin;%path%
@set path=C:\mingw64\opt\bin\;%path%
@cmd 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-22T11:52:26.847

在我的情况下，安装程序`mingw-get-setup.exe`无法下载某些文件，因此 gcc 复杂工具链被破坏，当重新运行`mingw-get-setup.exe`并获取丢失的文件时，就可以了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-21T14:50:35.017

就我而言，多个工具链已将不同的 gcc 安装放入 PATH 中。

（这变成了开关！）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-15T09:21:34.617

就我而言，在指定时去掉`[=n]`参数`-flto`解决了这个问题。

具体来说，而不是使用

```
-flto=6 
```

在 CFLAGS、CXXFLAGS 和 LDFLAGS 中，我现在简单地使用

```
-flto 
```

看起来这是一个 MinGW-w64 错误，在这一点上我想我不确定这是否可能是由于我`-j6`在调用*make*时使用了参数引起的。

为了将来参考，我的整个命令行如下：

```
mingw32-make -f makefile.gcc CFLAGS="-std=c11 -pipe -O3 -flto" CXXFLAGS="-std=c++14 -pipe -O3 -flto" LDFLAGS="-pipe -O3 -flto -static-libgcc -static-libstdc++ -s -Wl,--allow-multiple-definition" BUILD=release RUNTIME_LIBS=static DEBUG_FLAG=0 USE_AUI=0 USE_HTML=0 USE_MEDIA=0 USE_OPENGL=0 USE_PROPGRID=0 USE_QA=0 USE_RIBBON=0 USE_RICHTEXT=0 USE_STC=0 USE_WEBVIEW=0 USE_XRC=0 CFG="-stl-static_runtime-O3-flto" -j6 
```

这是用于构建[wxWidgets](https://www.wxwidgets.org)的“最小样本”。关于`-Wl,--allow-multiple-definition`：它旨在规避另一个工具链错误。更多信息[在这里](http://wiki.codeblocks.org/index.php/FAQ-Compiling_(errors)#Q:_My_build_fails_to_link_due_to_multiple_definition_of_xyz_errors.3F)和[这里](http://sourceware.org/bugzilla/show_bug.cgi?id=12762)。

# java - Android DownloadManager 获取文件名

> ID：13321984
> 
> 赞同：26
> 
> 时间：2012-11-10T12:18:44.537
> 
> 标签：java, android, broadcastreceiver, android-download-manager, receiver

在我的应用程序中，您可以下载一些文件。我使用 Android`DownloadManager`类进行下载。下载完成后，它应该向我显示文件已下载的消息。问题是，可能同时有 2,3 或 4 个下载。我的`BroadcastReceiver`代码如下所示：

```
receiver_complete = new BroadcastReceiver(){
         @Override
          public void onReceive(Context context, Intent intent) {
             String action = intent.getAction();
                if (action.equals(DownloadManager.ACTION_DOWNLOAD_COMPLETE) ){
                    Toast.makeText(MainActivity.this, MainActivity.this.getString(R.string.download_finished, "Here should be the name", Toast.LENGTH_SHORT).show();
                }
         }
     }; 
```

如何获取已完成下载的当前文件名？

非常感谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-10T13:03:28.297

我想你想把这样的东西放在你的`if`街区里。替换`YOUR_DM`为您的 DownloadManager 实例。

```
Bundle extras = intent.getExtras();
DownloadManager.Query q = new DownloadManager.Query();
q.setFilterById(extras.getLong(DownloadManager.EXTRA_DOWNLOAD_ID));
Cursor c = YOUR_DM.query(q);

if (c.moveToFirst()) {
    int status = c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS));
    if (status == DownloadManager.STATUS_SUCCESSFUL) {
        // process download
        title = c.getString(c.getColumnIndex(DownloadManager.COLUMN_TITLE));
        // get other required data by changing the constant passed to getColumnIndex
    }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-02T16:17:21.663

Ian Shannon 的回答完全正确，但我建议改进：

*   记得`Cursor`在使用后关闭它，避免“Cursor Leaking”。这`Cursor`会消耗大量资源，必须尽快释放。

*   如果您为下载添加了一些标题，例如：

    ```
    DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
    request.setTitle("Some title"); 
    ```

    给出的值`DownloadManager.COLUMN_TITLE`将`"Some title"`代替文件名。所以我会推荐这个：

    ```
    String filePath = c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_FILENAME));
    title = filePath.substring( filePath.lastIndexOf('/')+1, filePath.length() ); 
    ```

    返回整个`COLUMN_LOCAL_FILENAME`路径 ( `/storage/sdcard0/Android/data/.../filename.ext`)，但是使用此代码，我们将仅获取文件名。

最终代码：

```
Bundle extras = intent.getExtras();
DownloadManager.Query q = new DownloadManager.Query();
q.setFilterById(extras.getLong(DownloadManager.EXTRA_DOWNLOAD_ID));
Cursor c = YOUR_DM.query(q);

if (c.moveToFirst()) {
    int status = c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS));
    if (status == DownloadManager.STATUS_SUCCESSFUL) {
        String filePath = c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_FILENAME));
        filename = filePath.substring( filePath.lastIndexOf('/')+1, filePath.length() );
    }
}
c.close(); 
```

**编辑：**将 YOUR_DM 替换为您的 DownloadManager 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T12:32:49.460

我认为你正在寻找的是`DownloadManager.COLUMN_TITLE`

这是 Android 文档的链接：http: [//developer.android.com/reference/android/app/DownloadManager.html#COLUMN_TITLE](http://developer.android.com/reference/android/app/DownloadManager.html#COLUMN_TITLE)

这是一个教程，它将解释的不仅仅是获得标题。它用于从 URL 下载图像，然后将其显示在应用程序中。总的来说，我认为非常有用。

[http://wptrafficanalyzer.in/blog/downloading-an-image-from-an-http-url-using-downloadmanager-and-displaying-in-imageview-by-dynamically-registered-broadcastreceiver/](http://wptrafficanalyzer.in/blog/downloading-an-image-from-an-http-url-using-downloadmanager-and-displaying-in-imageview-by-dynamically-registered-broadcastreceiver/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-20T18:16:16.837

有一种更简单的方法来检索下载的文件 URI，那就是`getUriForDownloadedFile`：

```
download_receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle b = intent.getExtras();
        DownloadManager dm = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
        long file_id = b.getLong(DownloadManager.EXTRA_DOWNLOAD_ID);
        Uri uri = dm.getUriForDownloadedFile(downloaded_file_id);

    }
} 
```

我在[这里](https://stackoverflow.com/a/31275425/4562156)找到了这个方法，详细描述了如何使用 BroadcastReceiver 来处理 DOWNLOAD_COMPLETE 事件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-10T12:25:09.967

你试试这个代码来获取文件名

下载管理器.COLUMN_LOCAL_FILENAME

我不确定

# r - 计算从基准年 (t0) 到随后但有限的一系列年 (t1, ..., tk) 的百分比变化

> ID：13321990
> 
> 赞同：2
> 
> 时间：2012-11-10T12:19:36.267
> 
> 标签：r, time, plyr

想象一下，您有某种费用的年度数据。您对第一个值 (t0) 和每个后续值 (t1, ... -> tx) 之间的百分比差异感兴趣，但仅针对特定的一组观察值，即下一组，新的一系列后续年份开始.

**例子：**

```
 value <- c(10225,10287,10225,10087,10344,10387,10387,14567,13992,15432)
    case <- c(A,A,A,B,B,B,B,B,C,C)

    year    value   case   change
    1989    10225   A      0.00
    1990    10287   A      0.61 # ((100/10225)*10287)-100
    1991    10262   A      0.36
    1995    10087   B      0.00
    1996    10344   B      2.55 # ((100/10087)*10344)-100
    1997    10387   B      2.97 
    1978    10387   B      2.97
    1979    14567   B      ...
    1980    13992   C
    1981    15432   C 
```

*如何计算 R 的百分比变化？*

我之前的帖子和类似帖子（例如， [这篇关于计算相对差异的](https://stackoverflow.com/questions/13301406/calculating-relative-difference-to-the-first-element-in-a-vector)帖子）的答案非常有帮助。再次感谢！

但是，我不得不意识到我的情况更复杂，并相应地编辑了我的问题。问题是我没有一个系列的后续年份，而是一系列有限的后续年份，每组案例一个。

任何想法都受到高度赞赏！

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T12:23:09.737

那这个呢？

```
((value[-1]/value[1])-1)*100
[1]  0.6063570  0.0000000 -1.3496333  1.1638142  1.5843521  0.7334963 
```

另一种选择

```
((value - value[1]) / value[1]) * 100
[1]  0.0000000  0.6063570  0.0000000 -1.3496333  1.1638142  1.5843521  0.7334963 
```

对于您更新的问题，这里有两个 R 基础解决方案：

```
transform(df, Change = unlist(sapply(split(value, case), function(x) ((x - x[1]) / x[1]) * 100)))
   value case    Change
A1 10225    A  0.000000
A2 10287    A  0.606357
A3 10225    A  0.000000
B1 10087    B  0.000000
B2 10344    B  2.547834
B3 10387    B  2.974125
B4 10387    B  2.974125
B5 14567    B 44.413602
C1 13992    C  0.000000
C2 15432    C 10.291595

 transform(df, Change = unlist(aggregate(value ~ case, function(x) ((x - x[1]) / x[1]) * 100, data=df)$value))
   value case    Change
01 10225    A  0.000000
02 10287    A  0.606357
03 10225    A  0.000000
11 10087    B  0.000000
12 10344    B  2.547834
13 10387    B  2.974125
14 10387    B  2.974125
15 14567    B 44.413602
21 13992    C  0.000000
22 15432    C 10.291595 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:58:34.077

要回答您的扩展问题，请`transform`结合使用`ddply`plyr 包中的 with：

```
ddply(df, .(case), transform, change = ((100 / value[1]) * value) - 100) 
```

关于您对 NA 和 Inf 值的评论，这是预期的行为，因为您除以零，使更改毫无意义。您可以删除这些条目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T12:30:13.660

如果您的数据框被称为 ，请`df`尝试以下操作：

```
transform(df, change = 100*(value/value[year==1989] - 1)) 
```

请注意，这将给出`0`1989 年的值，而不是`NA`：

```
#   year value     change
# 1 1989 10225  0.0000000
# 2 1990 10287  0.6063570
# 3 1991 10225  0.0000000
# 4 1992 10087 -1.3496333
# 5 1993 10344  1.1638142
# 6 1994 10387  1.5843521
# 7 1995 10300  0.7334963 
```

如果你知道你想要第一条记录作为基础，你可以简单地使用

```
transform(df, change = 100*(value/value[1] - 1)) 
```

# c - 河豚浮点数

> ID：13321993
> 
> 赞同：0
> 
> 时间：2012-11-10T12:19:59.633
> 
> 标签：c, encryption

我有一些浮点数据，例如“3.9389005e-01”，我想用[Blowfish](http://www.schneier.com/blowfish.html)加密。strtod 用于从字符串中获取浮点数。

但是 Blowfish 只加密整数。

所以我的计划是将每个 FP 值加密为两个整数，一个尾数和一个指数。然后存储为两个单独的加密值。

解密将返回尾数和指数，从而能够重构原始 FP 数。

有更整洁的解决方案吗？

河豚的一些演示代码在[这里](http://www.schneier.com/code/bsfh-koc.zip)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:09:22.090

在需要加密的数组和相同大小的数组`union`之间声明一个。`double``uint8_t`

要加密，请填写双字节，加密字节。要解密，请解密字节并读取双精度。

这种方法可以扩展到任何非字节数据类型，**前提是您使用的密码输出相同大小的消息**。

在填充的情况下，“获取`uint8_t *`任何数据是`will sometimes work, sometimes not; AES-256 will work with a`双`of size 8, but block implementations are liable to crash or corrupt data when working with a`浮点浮点”的更快方法`of size 4 (they will attempt to read 8 bytes, and write 8 bytes; where only four are actually available). Due to platform and compiler quirks, this may *still* work because after the`可能有一些“内存填充”可用。

为了安全起见，例如，如果将密码填充到 256 位（32 字节），您将必须固定要同样填充的字节数组的长度。这样做的一种不太干净的方法是将字节数增加一个完整的填充数：

```
#include <stdio.h>

typedef struct {
        double a;
        long v;
        // Whatever else.
        // ...
} payload_t;

union {
        payload_t payload;
        unsigned char bytes[sizeof(payload_t)+32]; // 256 bits of margin
} data;

int main(void)
{
        data.payload.a = 3.14159;
        data.payload.v = 123456789;
        ...
        // Encrypt data.bytes, for a length integer multiple of 32 bytes
        size_t length = ((sizeof(payload_t)+31)/32)*32; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T16:59:04.917

如果代码想要将 FP 值转换为字符串，然后对字符串进行加密，然后想要返回*准确的*FP 值，则需要以足够的精度转换 FP 数。使用`"%.*e"`和`DBL_DECIMAL_DIG`（或`DBL_DIG + 3`如果不可用）。

```
#include <float.h>
// sign digit . fraction e sign expo \0 CYA
#define FP_BUF_SIZE (1+1+1+ (DBL_DECIMAL_DIG-1) + 1 + 1 + 4 + 1 + 10)

double x;
char buf[FP_BUF_SIZE];
sprintf(buf, "%.*e", DBL_DECIMAL_DIG - 1, x);
Encode(buf); 
```

Ref [Printf 宽度说明符以保持浮点值的精度](https://stackoverflow.com/questions/16839658/printf-width-specificer-to-maintain-precision-of-floating-point-value/19897395)

或者，代码可以使用`sprintf(buf, "%a", x);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:28:03.857

您可以像访问任何其他指针一样访问任何指针。作为另一种数据类型，数据可能没有意义，但有可能：

```
double value = 123.456;
int *ptr = (int *) &value; 
```

现在你有一个指向可以加密的`sizeof(double)`字节（或整数）内存区域的指针。`sizeof(double) / sizeof(int)`

要取回`double`解密后，您可以执行以下操作：

```
double new_value = *((double *) ptr); 
```

# javascript - 如何在 e2e AngularJS 测试中进行文件上传？

> ID：13321994
> 
> 赞同：14
> 
> 时间：2012-11-10T12:20:07.653
> 
> 标签：javascript, testing, file-upload, angularjs, drag-and-drop

在我的一个观点中，我有一个文件上传控件。它支持通过拖放或单击按钮后打开的标准文件对话框来上传文件。

如何在我的 e2e 测试¹中执行此操作？

* * *

¹两个选项中的一个就足够了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T14:45:45.420

您可以使用 Javascript blob 上传文件。[这需要 FileApi，它与旧版浏览器 ( http://caniuse.com/fileapi](http://caniuse.com/fileapi) )不兼容。但是由于您提到使用使用 FileApi 的拖放上传，所以它应该没有太大关系。

有两种方法可以使用 blob API 上传文件。一个很容易，另一个只是第一个的延续。

使用 Javascript，您可以创建一个新的 blob：

```
var blob = new Blob("content", contentType); 
```

例如，这将创建一个包含文本“Hello World!”的 blob 对象。

```
var foo = new Blob("Hello World!", {type: "text/plain"}); 
```

* * *

您也可以使用以下方法更好地处理非纯文本文件，例如 pdf。[您必须将文件转换为 Base64（您可以使用类似的](http://www.opinionatedgeek.com/dotnet/tools/base64encode/)东西）并使用 Base64 数据创建 blob。

[使用此函数（此](https://stackoverflow.com/questions/16245767/creating-a-blob-from-a-base64-string-in-javascript)函数的略微修改版本）创建 blob。

```
function b64toBlob(b64Data, contentType, sliceSize) {
b64Data = b64Data.replace(/\s/g, '');
contentType = contentType || '';
sliceSize = sliceSize || 1024;

function charCodeFromCharacter(c) {
    return c.charCodeAt(0);
}

var byteCharacters = atob(b64Data);
var byteArrays = [];

for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
    var slice = byteCharacters.slice(offset, offset + sliceSize);
    var byteNumbers = Array.prototype.map.call(slice, charCodeFromCharacter);
    var byteArray = new Uint8Array(byteNumbers);

    byteArrays.push(byteArray);
}

var blob = new Blob(byteArrays, {type: contentType});
return blob;
} 
```

例如，这将创建一个 PDF blob 对象。

```
var pdf = "JVBERi0xLjQKJcfsj6IKNSAwIG9...=="; //base64 encoded file as a String
var pdfBlob = b64toBlob(pdf, "application/pdf", 1024); 
```

* * *

使用上述方法之一创建 Blob 后，可以将其视为文件。例如，您可以将文件放入 FormData 对象（如果您正在执行这样的上传[）](http://jsfiddle.net/danielzen/utp7j/)：

```
var fd = new FormData();
fd.append("uploadedFile", pdfBlob, "My PDF.pdf"*); 
```

*文件名参数目前似乎只在 Chrome 上工作。

# c++ - 将数据从循环存储到数组

> ID：13321996
> 
> 赞同：3
> 
> 时间：2012-11-10T12:20:12.673
> 
> 标签：c++, loops

我是 C++ 新手，我的问题是如何将循环中的数据存储到数组中，然后打印出来？我需要再做一个循环吗？如果是这样，我该怎么做？另外，如果我问的是可能的，当我每次重新运行编译器时，上面的数组会被重新写入或擦除（希望如此）？

```
int getcard()
{
    srand((unsigned)time(0));

    int x;
    string mix[10];
    string h;

    do
    {
        for (int index = 0; index < 10; index++)
        {
            x = rand() % 18;
            h = master[x];

            cout << h << endl;
        }

        mix[10] = h;
    }
    while (false);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:31:35.237

这段代码创建了一个字符串数组，将其元素初始化为“字符串”并将其打印出来。

```
string array[10];

for (int i=0; i<10; i++){

    array[i] = "string";
}

for (int i=0; i<10; i++){

cout<<array[i] <<"       ";
} 
```

你应该试试这行中的一些东西。