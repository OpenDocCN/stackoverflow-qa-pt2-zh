# StackOverflow 问答 14203000-14203999

# facebook - Facebook 应用程序在幕后为多个用户使用访问令牌

> ID：14203001
> 
> 赞同：0
> 
> 时间：2013-01-07T19:51:23.577
> 
> 标签：facebook, facebook-php-sdk, facebook-access-token

我正在构建一个 Facebook 应用程序，其目的是通过每隔一段时间查询他们的个人资料页面来收集有关 Facebook 用户的统计信息。有一个注册过程，用户同意该应用程序并被重定向到 Facebook 以授权该应用程序。应用程序获得用户许可后，将访问令牌与用户的 Facebook ID 号一起存储。

每隔一段时间，我都希望能够运行一个脚本，该脚本循环遍历数据库中的所有访问令牌并查询相应用户的个人资料页面。我正在使用 Facebook 的 PHP SDK 进行开发，因此会收到长期访问令牌。

但是，我遇到了访问令牌 60 天到期的问题。我不知道如何更新这些访问令牌，因为用户没有发起 API 调用；我自己的脚本确实如此，因此在尝试运行 API 调用时它没有关于用户是否登录的信息。有没有办法在没有关于我试图查询的用户的任何信息的情况下在幕后更新这些访问令牌？

# javascript - CKEditor - 链接对话框 - 内部链接

> ID：14203003
> 
> 赞同：0
> 
> 时间：2013-01-07T19:51:25.980
> 
> 标签：javascript, ckeditor

我需要能够为链接选择内部页面。CKEditor 的开发网站上已经有一张[“已确认的新功能”票](http://dev.ckeditor.com/ticket/9806)。它定于二月发布。如何将此功能改进到 4.0 版本，以便在此之前利用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:21:49.247

如果此[拉取请求](https://github.com/ckeditor/ckeditor-dev/pull/9)满足您的需求，您可以：

1.  克隆[ckeditor-dev](https://github.com/ckeditor/ckeditor-dev)存储库，
2.  从补丁作者的存储库中获取更改，
3.  将他的补丁合并到 ckeditor-dev 的 4.0 分支中，
4.  使用命令行生成器（ -config`dev/builder/build.sh`在`dev/builder/build-config.js`）创建 CKEditor 包。

但我宁愿建议你等待官方补丁。它还没有准备好，但 90% 将在 2 月份完成。

# java - 如何使用调度程序让 Spring Quartz 触发器触发

> ID：14203004
> 
> 赞同：2
> 
> 时间：2013-01-07T19:51:25.423
> 
> 标签：java, spring, quartz-scheduler

我以前从未使用过石英调度程序，并且在创建石英作业时遇到了麻烦。我通过 a 配置的触发器`cronExpression`不会触发，我看不到我缺少什么。

提前感谢您的任何帮助或建议！

我在用：

*   石英版本 1.6.3

*   春季版本 3.1.1

调度器：

```
<beans default-autowire="byName"
    xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"  
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Quartz Scheduler -->
    <bean id="scheduler"
        class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="dataSource" ref="itc5DataSource" />
        <property name="applicationContextSchedulerContextKey" value="applicationContext" />
        <property name="quartzProperties">
            <props>
                <prop key="org.quartz.scheduler.instanceName">${cepis.portal.scheduler.name}</prop>
                <prop key="org.quartz.scheduler.instanceId">${cepis.portal.scheduler.instanceId}</prop>
                <prop key="org.quartz.threadPool.class">${cepis.portal.scheduler.threadPool.class}</prop>
                <prop key="org.quartz.threadPool.threadCount">${cepis.portal.scheduler.threadPool.threadCount}
                </prop>
                <prop key="org.quartz.jobStore.class">${cepis.portal.scheduler.jobStore.class}</prop>
                <prop key="org.quartz.jobStore.isClustered">${cepis.portal.scheduler.jobStore.isClustered}</prop>
                <prop key="org.quartz.jobStore.useProperties">${cepis.portal.scheduler.jobStore.useProperties}
                </prop>
                <prop key="org.quartz.jobStore.tablePrefix">${cepis.portal.scheduler.jobStore.tablePrefix}</prop>
                <prop key="org.quartz.jobStore.driverDelegateClass">${cepis.portal.scheduler.jobStore.driverDelegateClass}
                </prop>
                <prop key="org.quartz.jobStore.selectWithLockSQL">${cepis.portal.scheduler.jobStore.selectWithLockSQL}
                </prop>
            </props>
        </property>

        <property name="jobDetails">
            <list>
                <ref bean="updateNoShowAppointmentJob" />           
            </list>
        </property>

        <property name="triggers">
            <list>
                <ref bean="updateNoShowTrigger" />          
            </list>
        </property>

    </bean>

    <!-- *************************************************************************************************  -->

    <bean id="updateNoShowAppointmentJob" class="org.springframework.scheduling.quartz.JobDetailBean">
        <property name="name" value="CEPIS-UpdateNoShows" />
        <property name="group" value="Appointments" />              
        <property name="jobClass" value="edu.uky.cepis.util.cron.job.UpdateNoShowAppointmentJob" />
    </bean>

    <!-- *************************************************************************************************  --> 

    <bean id="updateNoShowTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="name" value="UpdateNoShow" />
        <property name="group" value="Appointments" />
        <property name="jobDetail" ref="updateNoShowAppointmentJob" />
        <!--  Do this every 60 seconds.-->
        <property name="cronExpression" value="0 * * * * ?" />
    </bean>

</beans> 
```

工作：

```
/**
 * 
 */
package edu.uky.cepis.util.cron.job;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import org.apache.log4j.Logger;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;
import org.quartz.SchedulerException;
import org.springframework.context.ApplicationContext;
import org.springframework.scheduling.quartz.QuartzJobBean;

import edu.uky.cepis.service.AdvisingSessionService;
import edu.uky.cepis.domain.AdvisingSession;

/**
 * @author cawalk4
 * 
 * Purpose: Update all appointments with a date before the current date time
 * Setting the appointmentStatus to "No Show"
 * 
 */
public class UpdateNoShowAppointmentJob extends QuartzJobBean {

    private static Logger log = Logger.getLogger(
        UpdateNoShowAppointmentJob.class);

    private AdvisingSessionService advisingSessionService;

    private static String NO_SHOW = "No Show";

    @Override
    protected void executeInternal(JobExecutionContext context)
            throws JobExecutionException {

        log.debug("Running UpdateNoShowAppointmentJob at " + new Date());

        ApplicationContext appContext = null;

        try {
            appContext = (ApplicationContext) context.getScheduler()
                .getContext().get("applicationContext");
        } catch (SchedulerException se) {
            System.err.println(se);
        }

        try {
            advisingSessionService = (AdvisingSessionService) appContext
                .getBean("advisingSessionService", AdvisingSessionService.class);
        } catch (Exception e) {
            System.err.println(e);
        }
        if (advisingSessionService != null) {
            List<AdvisingSession> advisingSessionList =
                new ArrayList<AdvisingSession>(0);

            advisingSessionList = advisingSessionService.getNewNoShowAdvisingSessions();

            if (advisingSessionList == null) {
                log.debug("advisingSessionSlotlist is null.");
                return;
            } else if (advisingSessionList.isEmpty()) {
                log.debug("There are no new No Show advising appointments.");
                return;
            }

            log.debug("Total no show e-mails are: " + advisingSessionList.size());

            // Update the appointments 

            for(AdvisingSession advisingSession : advisingSessionList){

                advisingSessionService.updateAdvisingSession(                   
                        advisingSession,
                        advisingSession.getSessionType(), 
                        NO_SHOW,
                        advisingSession.getPreSessionText(), 
                        advisingSession.getSessionText(), 
                        advisingSession.getStudentNotes(), 
                        advisingSession.getAdvisorNotes(), 
                        advisingSession.getAdvisingSessionSlot(), 
                        advisingSession.getNoShowEmailSentBoolean());
            }
        } else {
            log.debug("advisingSessionService is null.");
        }
    }

    public void setadvisingSessionService(AdvisingSessionService advisingSessionService) {
        this.advisingSessionService = advisingSessionService;
    }

    public AdvisingSessionService getadvisingSessionService() {
        return advisingSessionService;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:16:12.083

如果您删除设置bean`jobDetails`属性的 XML 部分，它应该可以按预期工作。`scheduler`

如果您查看`setTriggers`Spring`SchedulerAccessor`类（即 的超类`SchedulerFactoryBean`）的 javadoc，您会看到：

> 如果Trigger自己确定了对应的JobDetail，job就会自动注册到Scheduler中。否则，需要通过此 FactoryBean 的“jobDetails”属性注册相应的 JobDetail。

他们没有提到的是，如果您已经注册了`JobDetail`，它将阻止`Trigger`安排其引用的作业。`addTriggerToScheduler`方法的源代码`SchedulerAccessor`有这段代码：

```
JobDetail jobDetail = findJobDetail(trigger);
if (jobDetail != null) {
    // Automatically register the JobDetail too.
    if (!this.jobDetails.contains(jobDetail) && addJobToScheduler(jobDetail)) {
        this.jobDetails.add(jobDetail);
    }
} 
```

然后，您可以看到，如果`jobDetails`已经包含您的作业，则`if`条件将快速失败并且`addJobToScheduler`永远不会调用该方法。

# c# - DropDownList 总是发布空字段

> ID：14203008
> 
> 赞同：0
> 
> 时间：2013-01-07T19:51:47.327
> 
> 标签：c#, asp.net-mvc-3

我正在编写一个 MVC3 项目，该项目显示创建事件时可供选择的用户主题。但是，每当从下拉列表中选择一个值时，“主题”字段的值始终为空。

这是课程：

```
public class VolunteerEvent
{
        public int VolunteerEventID { get; set; }   
        public DateTime VolunteerDate { get; set; }
        public int ZIPcode { get; set; }
        public int Hours { get; set; }
        public string Topic { get; set; }  
} 
```

存储字符串的虚拟类

```
public class VolunteerTopic
{
    public int VolunteerTopicID { get; set; }
    public string VolunteerTopicName { get; set; }
} 
```

创建动作控制器

```
 public ActionResult Create()
    {
        ViewBag.VolunteerTopicID = new SelectList(db.VolunteerTopics, "VolunteerTopicID", "VolunteerTopicName");
        return View();
    } 

//
// POST: /LogVolunteerEvent/Create
[HttpPost]
public ActionResult Create(VolunteerEvent volunteerevent)
{

    if (ModelState.IsValid)
    {
        db.VolunteerEvents.Add(volunteerevent);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }
    ViewBag.VolunteerTopics = new SelectList(db.VolunteerTopics, "VolunteerTopicID", "VolunteerTopicName", 
        volunteerevent.Topic);

    return View(volunteerevent);
} 
```

和视图的相关部分

```
<div class="editor-label">
            @Html.LabelFor(model => model.Topic)
        </div>
        <div class="editor-field">
            @Html.DropDownList("VolunteerTopicID")
            @Html.ValidationMessageFor(model => model.Topic)
        </div> 
```

感兴趣的人的html结果

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Create</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/modernizr-2.5.3.js" type="text/javascript"></script>
</head>
<body>
    <div class="page">

<h2>Create</h2>

<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

<form action="/logvolunteerEvent/Create" method="post">    <fieldset>
        <legend>VolunteerEvent</legend>

        <div class="editor-label">
            <label for="VolunteerDate">VolunteerDate</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="The VolunteerDate field is required." id="VolunteerDate" name="VolunteerDate" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="VolunteerDate" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="ZIPcode">ZIPcode</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-number="The field ZIPcode must be a number." data-val-required="The ZIPcode field is required." id="ZIPcode" name="ZIPcode" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="ZIPcode" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Hours">Hours</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-number="The field Hours must be a number." data-val-required="The Hours field is required." id="Hours" name="Hours" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="Hours" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Topic">Topic</label>
        </div>
        <div class="editor-field">
            <select id="VolunteerTopicID" name="VolunteerTopicID">
<option value="1">      Advocacy</option>
...a bunch of values...
</select>
            <span class="field-validation-valid" data-valmsg-for="Topic" data-valmsg-replace="true"></span>
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
</form>
<div>
    <a href="/logvolunteerEvent">Back to List</a>
</div>

        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:21:13.463

我认为你弄错了，这是你应该这样做的方式：

模型：

```
public class VolunteerEvent
{
    // other fields
    public int TopicId { get; set; }  
} 
```

看法：

```
@model VolunteerEvent

(inside some form)
@Html.DropDownListFor(m => m.TopicId, new SelectList(aListOfTopics, "Id", "Name")) 
```

（这是用于列的`Topic`对象列表`Id`和`Name`）

控制器：

```
[HttpPost]
public void Create(VolunteerEvent volunteerEvent, FormCollection collection)
{
    var topicId = volunteerEvent.TopicId;
    // do something
    // you can also get the value from collection["TopicId"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:34:18.143

这里的问题是您的`Dropdown`列表是绑定的，`VoluteerTopicId,`但这不是您传递给 post 操作的模型的一部分。

最快的解决方法是创建一个视图模型：

```
public class VolunteerViewModel
{
  public VolunteerEvent VolunteerEvent {get; set;}
  public VolunteerTopic {get; set;}
} 
```

现在将您的视图强输入到此视图模型中，而不是`VolunteerEvent`相应地重构。

然后将您的发布操作的签名更改为`public ActionResult Create(VolunteerViewModel viewModel)`

现在您的列表应该绑定到模型，并且可以在以下位置访问所选值`viewModel.VolunteerTopic.VolunteerTopicId`

# .net - 用 .NET 替换 ActiveX exe？

> ID：14203010
> 
> 赞同：0
> 
> 时间：2013-01-07T19:51:48.887
> 
> 标签：.net, delphi, activex

我们有一个旧的 ActiveX exe，我们提供给第三方用于特定目的。他们获取我们的 exe 并从他们自己的软件包中调用它来执行给定的任务（查看表单文档），然后关闭我们的应用程序。我们希望摆脱 ActiveX exe 模型，并将其替换为 .NET 等价物。我知道使用 .NET 无法创建 ActiveX exe，那么仍然可以满足我们需求的等效替代品是什么？调用应用程序必须能够打开/关闭应用程序并调用它的一些方法（添加文件、删除文件等）。.NET 完全有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:20:44.453

您可能想查看 RemObject Hydra (http://www.remobjects.com/hydra/)，您可以将两个平台与它混合使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:41:04.643

.NET 支持本地 COM 服务器（也称为：Out of Process COM 服务器，也称为：DCOM）。有关示例，请参阅此（长）文章：http: [//www.codeproject.com/Articles/12579/Building-COM-Servers-in-NET](http://www.codeproject.com/Articles/12579/Building-COM-Servers-in-NET)。
使用 .NET 或 c# 搜索上述任何 aka 并找到许多其他示例。

编辑：这是来自 Microsoft 的示例（简短、准确、演练）：http: [//code.msdn.microsoft.com/CSExeCOMServer-3b1c1054](http://code.msdn.microsoft.com/CSExeCOMServer-3b1c1054)。使用此示例作为您的起点。

# sql - SQL查询交货代码

> ID：14203013
> 
> 赞同：0
> 
> 时间：2013-01-07T19:51:53.287
> 
> 标签：sql

我正在尝试为*等待交付的订单数*创建一个查询。

这涉及使用`delivery_status_code`表中的`customer_orders_delivery`。

状态码包括-`Delivered`和。`Processing``Dispatched`

我想选择正在处理和发送的订单数量。

目前我写过：

```
Select COUNT ORDER_ID 
FROM customer_orders_delivery 
WHERE delivery_status_code LIKE 'Dispatched%'OR'Processing%' 
```

然而，这是不正确的。有人可以帮忙解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:53:47.063

您是否尝试将`count()`聚合与 a 一起使用`group by`：

```
Select delivery_status_code, COUNT(ORDER_ID)
FROM customer_orders_delivery 
WHERE delivery_status_code LIKE 'Dispatched%'
  OR  delivery_status_code LIKE 'Processing%'
GROUP BY delivery_status_code 
```

我将 添加`delivery_status_code`到选择列表中，以便您知道每个代码的计数。

我不确定你为什么使用`LIKE`，你也许可以使用：

```
Select delivery_status_code, COUNT(ORDER_ID)
FROM customer_orders_delivery 
WHERE delivery_status_code IN ('Dispatched', 'Processing')
GROUP BY delivery_status_code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:53:52.920

由于您不希望您的答案按 ORDER_ID 分组，因此无需提及。

```
SELECT COUNT(*) as NumPendingOrders, delivery_status_code
FROM customer_orders_delivery 
WHERE delivery_status_code LIKE 'Dispatched%'
OR delivery_status_code LIKE 'Processing%'
GROUP BY delivery_status_code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:54:41.093

```
SELECT COUNT(Order_ID)
FROM customer_orders_delivery
WHERE delivery_status_code LIKE 'Dispatched%' 
OR delivery_status_code LIKE 'Processing%' 
```

# java - Netbeans 7.2.1 在调试时要求提供 netx.jar 和 plugin.jar 文件

> ID：14203014
> 
> 赞同：1
> 
> 时间：2013-01-07T19:51:57.143
> 
> 标签：java, netbeans, openjdk

我该如何解决这个问题。它还没有引起任何问题

```
Have no file for /usr/lib/jvm/java-6-openjdk-i386/jre/lib/netx.jar
Have no file for /usr/lib/jvm/java-6-openjdk-i386/jre/lib/plugin.jar 
```

操作系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:16:19.530

我遇到了同样的问题。通过删除我已经拥有的 jdk 并在此处使用 Netbeans 安装 jdk，在 Ubuntu 12.0.4 上修复了它：

[http://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html)

不确定这是否是您正在寻找的答案，但可能对您有用。

# java - Android按顺序从图库接收图像

> ID：14203017
> 
> 赞同：3
> 
> 时间：2013-01-07T19:52:10.713
> 
> 标签：java, android, image, gallery

我目前有一个 Android 应用程序，它有一个意图过滤器来接收来自画廊的图像。以用户选择它们的相同顺序接收图像很重要。这似乎是大多数设备上的默认行为，但在某些设备上（到目前为止，我已经在摩托罗拉运行的 Android 4.x 上看到了这一点）订单似乎未定义。有谁知道一种方式来声明应该按顺序接收图像的意图？或者在收到图像后确定所选订单的方法？

这是清单中的相关代码

```
 <activity
       android:label="@string/app_name"
       android:name=".activities.ImportImagesActivity" > 
       <intent-filter>   
           <action android:name="android.intent.action.SEND" />
           <category android:name="android.intent.category.DEFAULT" /> 
           <data android:mimeType="image/*" />
       </intent-filter>
       <intent-filter>   
           <action android:name="android.intent.action.SEND_MULTIPLE" />
           <category android:name="android.intent.category.DEFAULT" /> 
           <data android:mimeType="image/*" />
       </intent-filter>
   </activity> 
```

并来自 ImportImagesActivity

```
private List<Uri> parseIncomingData() {
    List<Uri> uriList = null;

    Intent intent = this.getIntent();
    if(intent != null) {
        String action = intent.getAction();
        //Single Image
        if (action.equalsIgnoreCase("android.intent.action.SEND")) {
            //removed for brevity
            }
        }
        //Multiple Images
        else if (action.equalsIgnoreCase("android.intent.action.SEND_MULTIPLE")) {
            uriList  = intent.getParcelableArrayListExtra(Intent.EXTRA_STREAM);
        }
    }

    //more code - at this point images have been recieved

    return uriList;
} 
```

**编辑**

为了提供一些背景信息，让我解释一下应用程序的一般流程。用户打开图库并选择图像。他们选择与我的应用程序“共享”它们。我的应用程序收到一个 Uri 列表，然后使用自定义适配器类支持的内部库显示这些列表。图像根据 Uri 列表正确显示，**问题是 List<Uri> 的顺序有时不正确**。对我的用户来说，重要的是图像以他们选择它们的顺序出现。

**澄清** 当我使用术语库时，我指的是内置的 Android 应用程序库。当我使用“共享”一词时，我指的是图库应用程序中的“共享”按钮。这允许用户从服务列表中进行选择，例如 Facebook、电子邮件，在本例中是我的应用程序。

例如，想象一个包含 3 张图像的图库，以任意顺序显示：A、B 和 C。用户先选择 C，然后选择 A，然后选择 B，然后选择与我的应用程序共享它们。在大多数手机上，我的列表将正确排序{C，A，B}，在违规手机上，这个顺序似乎是随机的。

我不能使用创建时间戳，因为创建时间通常与选择顺序无关。添加自定义元数据也无济于事，因为我不知道正确的初始顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T19:05:24.953

我的观察是，Android 画廊根据它们的新近显示图像。

对于无法确定顺序的设备，您可以从图库中导入图片并查看其创建时间。这是一种[方法](https://stackoverflow.com/questions/2723838/determine-file-creation-date-in-java)。或者您可以使用元数据提取器应用程序，可以找到许多 jar。

现在，你可以按照最近的顺序排列图像，你应该完成了。

**[编辑]**

我有个问题。您说他们可以按任何顺序选择，那么他们是通过“共享”将其“上传”到服务器上吗？

如果是这样，那么一种方法是检查上传了哪个图像，或者如果您想要选择顺序，您可以这样做。编辑图片的元数据，肯定会有一个无用的标签，选择一个并触摸编辑。所以，如果我选择图像 A，它会变为 1，然后我选择图像 B，它会变成 2。但是如果我现在取消选择图像 A，那么图像 B 应该变成 1。所以，你可以在这里使用节点。这是先进先出 (FIFO) 方法。取消选择后，A 被排除在列表之外，B 替换它。

这是你想要的吗？

**编辑** 对不起，我认为如果不创建自己的画廊就无法做到这一点。为什么不直接将 android 库导入到应用程序的网格视图中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:02:39.813

是的，我现在也遇到了同样的问题。我也在使用 Fedor 的延迟加载概念。我不确定这会有多大帮助以及这是否是正确的方法。但它仍然为我解决了问题。

我不得不在 getView() 中做一些修改，

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    System.gc();

    ImageView view;

    if(convertView == null) {

        view = new ImageView(context);

        view.setScaleType(ImageView.ScaleType.FIT_CENTER);
        view.setLayoutParams(new GridView.LayoutParams(screenWidth/4, screenHeight/4));
        view.setAdjustViewBounds(false);
        view.setPadding(2, 2, 2, 2);

        System.gc();

    }else {
        view = (ImageView) convertView;
    }
      if(view!=null)
        {
               imageLoader.DisplayImage(urlList.get(position), view);
               notifyDataSetChanged();  //Calling this helped to solve the problem. 
        }

    System.gc();

    return view;
} 
```

# c# - 在 Object 中加入字符串的最佳方法

> ID：14203023
> 
> 赞同：0
> 
> 时间：2013-01-07T19:52:38.373
> 
> 标签：c#, html-agility-pack

在 Object ( HTMLcollection ) 中加入字符串的最佳方法？我使用带有 HTMLagilityPack 的 microsoft studio 2008，NET 3.5

这里的 HTML

```
<div class="content">
<ul>
    <li>Text that I want to scrape </li>
    <li>Text that I want to scrape </li>
    <li>Text that I want to scrape </li>
</ul>
</div> 
```

这里是我的代码

```
var productfeature = 
    document.DocumentNode.SelectNodes("//div[@class='content']/ul/li");

if (productfeature != null)
{
    StringBuilder sb = new StringBuilder();
    foreach (HtmlNode node in productfeature)
    {
        //Make sure nothing {} inside title
        string safeint = node.InnerText.Replace("}", "").Replace("{",""); 
        sb.Append(safeint + "}"); //adding } for marking 
    }
} 
```

这里的一些文章说，最好使用**string.join**，但是我不知道如何使用对象元素来做到这一点

注意：我想要更快更轻的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:13:48.797

这是一个使用`string.Join`

```
string delimiter = safeint + "}";
string result = "{" + string.Join(delimiter,
    productfeature.Select(node => removeBraces(node.InnerText)).ToArray()) + "}";

public static string removeBraces(string value)
{
    return value.Replace("}", "").Replace("{", "");
} 
```

# jquery - logs_in_timeout 之前的 Authlogic jQuery 警报

> ID：14203024
> 
> 赞同：0
> 
> 时间：2013-01-07T19:52:51.317
> 
> 标签：jquery, authlogic

我很抱歉没有任何初始代码来支持这个问题

我在 20 分钟后将 authlogic 设置为 logged_in_timeout。我想做的是构建一个 jQuery 函数，该函数将从我的用户模型中提取“last_request_at”值，然后运行一个计时器，该计时器将在 18 分钟时提醒用户“你即将被注销”。

```
Can jQuery pull directly from the DB, or should I pass a session to the function? 
```

然后，我想在模型/警报“注销我”或“保持登录”中有两个按钮。

```
 If the user clicks "Stay Logged In" how would I have jQuery update the last_request_at field in the DB? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:34:20.863

我只是使用咖啡脚本来完成这项工作。

```
 setTimeout (->
    setTimeout (->
      parent.location.reload true
    ), 70000
 $('#inactivity_modal').modal()
   $("#inactivity_modal").bind "hidden", ->
   parent.location.reload true
   ), 540000 
```

在我的应用程序中，用户在上次请求后 10 分钟自动注销。因此，在 9 分钟（54000 毫秒）时，此函数会激活一个包含两个按钮的模式；一个注销，一个保持登录。保持登录按钮只是关闭模式并刷新父级，从而更新 Authlogics last_request_at 字段并给用户另外 9 分钟，直到它再次发生。当然，任何时候页面加载计时器都会重置，因此任何活动用户都不会看到模式。如果用户没有响应警告模式，Authlogic 会在一分钟后（10 分钟）结束他们的会话，然后在 10 秒后（70000）刷新父页面以隐藏前一页上可能可见的任何内容。

# c# - 有一个 ComboBox 不“使用” F4 键

> ID：14203026
> 
> 赞同：2
> 
> 时间：2013-01-07T19:53:01.847
> 
> 标签：c#, .net, wpf

我有一个应用程序，用户希望 F4 成为“处理订单”按钮。（执行此功能的那个键有很长的历史。）

今天我发现如果焦点在 ComboBox 中，那么 F4 会使 ComboBox 执行下拉。

**有没有办法让这种情况不发生？**

*更新：*我用 Delphi 试过这个，它也发生在那里。虽然我仍然很好奇，但这似乎是 Windows 的“成熟”事物。我将要求用户选择另一个快捷方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:56:18.077

用这个

```
cboTest.PreviewKeyDown += (o,e) => {
    if (e.Key == Key.F4)
        e.Handled = true;
}; 
```

cboTest 是您的组合框名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-07T12:05:41.387

解决方案：使用这样的组合框：

```
 public class myComboBox : ComboBox
    {
        protected override void OnKeyDown(KeyEventArgs e)
        {
            if (e.Key != Key.F4)
            {
                base.OnKeyDown(e);
            }
        }
    } 
```

这就是你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-27T10:48:33.630

除了上面的答案，这里是一个无需创建自定义控件的可重用解决方案：

```
public static class ComboBoxHelper
{
    public static readonly DependencyProperty DisableF4HotKeyProperty =
        DependencyProperty.RegisterAttached("DisableF4HotKey", typeof(bool),
            typeof(ComboBoxHelper), new PropertyMetadata(false, OnDisableF4HotKeyChanged));

    public static bool GetDisableF4HotKey(DependencyObject obj)
    {
        return (bool)obj.GetValue(DisableF4HotKeyProperty);
    }

    public static void SetDisableF4HotKey(DependencyObject obj, bool value)
    {
        obj.SetValue(DisableF4HotKeyProperty, value);
    }

    private static void OnDisableF4HotKeyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var box = d as ComboBox;
        if (d == null) return;

        box.PreviewKeyDown -= OnComboBoxKeyDown;
        box.PreviewKeyDown += OnComboBoxKeyDown;
    }

    private static void OnComboBoxKeyDown(object _, KeyEventArgs e)
    {
        if (e.Key == System.Windows.Input.Key.F4)
        {
            e.Handled = true;
        }
    }
} 
```

在您的 xaml 文件中，添加对该`ComboBoxHelper`类的命名空间引用并在您的 ComboBox 上设置附加属性：

```
 <ComboBox h:ComboBoxHelper.DisableF4HotKey="True" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T20:25:11.407

你是怎么抓住F4键的？如果您使用 keypreview，您可以覆盖它，从冒泡到组合框：

```
private void Form1_Load(object sender, EventArgs e)
{
    this.KeyPreview = true;
    this.KeyDown += new KeyEventHandler(Form1_KeyDown);
}

void Form1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.F4)
    {
        e.Handled = true;
        MessageBox.Show("F4 Pressed");
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T16:26:59.860

默认情况下 F4 键打开或关闭组合框的下拉列表。可以更改此行为以忽略 F4 键并改用向下箭头键打开列表。这是通过将 a 发送[`CB_SETEXTENDEDUI`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775905.aspx "CB_SETEXTENDEDUI 消息")到提供`TRUE`参数的组合框来完成的。这是假设 WPF 实际上在内部使用本机通用控件。

# matlab - 提高 matlab 代码中的运行时间

> ID：14203029
> 
> 赞同：2
> 
> 时间：2013-01-07T19:53:05.080
> 
> 标签：matlab, optimization, image-processing

我编写了一个 matlab 代码，用于使用霍夫变换检测灰度图像中的圆圈。我想尽可能减少运行时间。

我使用的边缘检测是自定义实现，但它的运行时间足够快，可以满足我的需要（大约 0.06 秒）。然而，瓶颈是其余的代码（总运行时间约为 6.35 秒）。顺便说一句，我使用 tic/toc 来计算运行时间。

这是代码，如果有人可以看一下，我将不胜感激：

```
function [ circles ] = findCircles(img)

 % set low and high bounds for radii values
    minR = 9; 
    [imgRows, imgCols] = size(img);
    maxR = ceil(min(imgRows, imgCols)/2);

    tic

    % run edge detection on image
    edgeImg = edgeDetect(img);    
    % get image size
    [rows, cols] = size(edgeImg); 
    % initialize accumulator
    houghAcc = zeros(rows, cols, maxR);
    % get all edge pixels from image
    edges = find(edgeImg);

    % find number of edge pixels
    edgeNum = size(edges);

    % scan each edge 
    for currEdge = 1 : edgeNum

        % get current edge x and y coordinations
        [edgeY edgeX] =  ind2sub([rows, cols], edges(currEdge));
        % scan each all possible radii
        for r = minR : maxR
            % go over all possible 2*pi*r circle centers
            for ang = 0 : 360
                t = (ang * pi) / 180;
                cX = round(edgeX - r*cos(t));
                cY = round(edgeY - r*sin(t));

                % check if center found is within image boundaries
                if ( cX < cols && cX > 0 && cY < rows && cY > 0 )
                    % found circle with (cX,cY) as center and r as radius
                    houghAcc(cY,cX,r)=houghAcc(cY,cX,r)+1; % increment matching counter

                end
            end
        end
    end

    % initialize circle list
    circles = []; 
    % intialize index for next found circle
    nextCircleIndx = 1;
    % get counter list dimensions
    [sizeX sizeY sizeR] = size(houghAcc);

    % get max counter value from hough counter matrix
    m = max(max(max(houghAcc))); 
    % calculate the minimal pixels that circle should have on perimeter
    t = m * 0.42; 

    % scan each found circle
    for cX = 1 : sizeX
        for cY = 1 : sizeY
            for r = 1 : sizeR

                % threshold values
                if houghAcc(cX, cY, r) > t
                    % circle is dominant enough, add it
                    circles(nextCircleIndx,:) = [cY , cX , r ,houghAcc(cX, cY, r)];
                    % increment index
                    nextCircleIndx = nextCircleIndx + 1;                    
                end

            end

        end
    end

     % sort counters in descending order (according to votes for each
    % circle)
    circles = flipud(sortrows(circles,4));

    % get circle list's size
    [rows cols] = size(circles);

    % scan circle list and check each pair of found circles 
    for i = 1 : rows-1
        % get first circle's details:
        % center
        cX1 = circles(i,1);
        cY1 = circles(i,2);
        % radius
        r1 = circles(i,3);
        %hough counter
        h1 = circles(i,4); 

        for j = i+1 : rows

            %get second circle's details:
            % center
            cX2 = circles(j,1);
            cY2 = circles(j,2);
            % radius
            r2 = circles(j,3);
            %hough counter
            h2 = circles(j,4); 

            % check if circle's actual difference is smaller than minimal
            % radius allowed
            if (cX1 - cX2)*(cX1 - cX2)+ (cY1 - cY2)*(cY1 - cY2) < (min(r1,r2))*(min(r1,r2))  && abs(r1 - r2) < minR
                % both circles are similar, sum their counters and merge
                % them to a circle with their avaraged values
                circles(i,:)=[(cX1+cX2)/2, (cY1+cY2)/2, (r1+r2)/2, h1+h2];
                % remove similar circle
                circles(j,:)=[0,0,0,0]; 
            end
        end

    end

    sortParam = 3; % 1: x-center, 2: y-center, 3: radius, 4: hough counter

    % sort the circles by the sort parameter, in descending order
    circles = flipud(sortrows(circles,sortParam));

    % get number of remained circles (= rows with non-zero values)
    len = length(find(circles~=0))/4;

    % remove duplicate similar circles from previus step
    circles(circles == 0) = [];

    % reshape circle list back to matrix form (previous step converted it
    % to a vector)
    circles = reshape(circles,len,4);

    % get max value according to sort parameter
    m = max(circles(:,sortParam));

    %get size of new circle list (with no duplicate circles)
    [newH newW] = size(circles);

    % thresholding: remove hough counters that are less than 30% from sort
    % parameter
    for  i= 1 : newH
        % check if current circle's sorting parameter's value is smaller
        % than threshold
        if  m - circles(i,sortParam) < m * 0.3 
    %         plot(circles(i,1),circles(i,2),'xr'); % DEBUG - show centers
        else
            % remove current circle
            circles(i,:)=[0,0,0,0];
        end
    end

    % find number of remaining circles after thresholding
    len = length(find(circles~=0))/4;
    % delete rows that match circles removed in thresholding
    circles(circles==0)=[];
    % reshape circle list back to matrix form
    circles=reshape(circles,len,4);

    % convert circle list's values to integers (hough counters are already
    % integers)
    circles = uint8(circles(:,1:3));
    toc
end 
```

这段代码在哪里可以改进？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:16:21.083

对于`for`填充`houghAcc`矩阵的第一个块，我建议进行以下替换：

```
r = minR : maxR;    
t = ( 0 : 359 ) * pi / 180; % following HighPerformaceMark suggestion
rsin = bsxfun( @times, r', sin(t) ); %'
rcos = bsxfun( @times, r', cos(t) ); %'
[edgeY edgeX] = find( edgeImg );
cX = round( bsxfun( @minus, edgeX, permute( rcos, [3 1 2] ) ) );
cY = round( bsxfun( @minus, edgeY, permute( rsin, [3 1 2] ) ) );
R = permute( repmat( r', [ 1 size(cX,1) size(cX,3) ] ), [2 1 3] ); %' to index accHough
% select valid indices
sel = ( cX > 0 & cY > 0 & cY < rows & cX < cols );
houghAcc = accumarray( {cY(sel(:)), cX(sel(:)), R(sel(:))}, 1, [rows, cols, maxR] ); 
```

对于`for`扫描每个找到的圆圈的第二个块，我建议进行以下替换：

```
ind = find( houghAcc > t );
% sort the scores
sc = houghAcc(ind);
[sc si] = sort(  sc , 'descend' );
% convert linear indices to x,y,r
[cX cY r] = ind2sub( size( houghAcc ), ind(si) );
circles = [ cX(:) cY(:) r(:) sc(:) ]; 
```

# jquery - 如何使用 html 和 Jquery 创建多页应用程序

> ID：14203032
> 
> 赞同：-3
> 
> 时间：2013-01-07T19:53:13.163
> 
> 标签：jquery, iphone, html, xml, cordova

我正在为 iphone 开发本机应用程序。此应用程序从 XML 读取内容。我有许多从 XML 读取内容的链接和按钮。一切都很好，除了后退按钮。因为，我创建了一个单页应用程序，因此后退按钮不起作用。我想将此应用程序转换为多页。但我不确定使用 jquery、XML 和 html 的最佳方法是什么。我已阅读 xml 并将所有值放入数组并处理数组。

我正在使用阅读 XML

```
<html>
    <head>
        <script>
            $(document).ready(function() {
                var meetingName = [];
                var buildingName = [];
                var floorInfo = [];
                var officeContact = [];
                var roomEmail = [];
                var capacity = [];
                var phoneNotes = [];
                var pdfName = [];
                var pdfRoomName=[];
                var myHTMLOutput = '';
                var indexVal='';
                $('#menu').hide();
                var location='';

                // Open the IMRM.xml file
                $.get("xml/IMRM.xml",{},function(xml) {

                    // Build an HTML string
                    // Run the function for each Room tag in the XML file
                    $('Room',xml).each(function(i) {
                        meetingName[i] = $(this).find("meetingRoomName").text();
                        buildingName[i] = $(this).find("buildingName").text();
                        floorInfo[i] = $(this).find("floorInfo").text();
                        officeContact[i] = $(this).find("officeContact").text();
                        roomEmail[i] = $(this).find("roomEmail").text();
                        capacity[i] = $(this).find("capacity").text();
                        phoneNotes[i] = $(this).find("phoneNotes").text();
                        pdfName[i] = $(this).find("pdfName").text();
                        pdfRoomName[i] = $(this).find("pdfRoomName").text();
                    }
                );
                document.getElementById("title").innerHTML = "Muncipal Building";               

                //Capture button click and show information for each room
                $(".left").click(function() {
                    buttonClick($(this).attr("data-value"));
                });
            }
        </script>
    </head>
    <body >
        <div id="wrapper" class="imr">    
            <div data-role="page" data-theme="bu" id="imr">      
                <div data-role="header" data-theme="bk" class="ui-header" role="banner">
                    <a href="#" data-rel="back" data-add-back-btn="true"  data-back-btn-text="Back" data-theme="bk" class="header-btn-bk back-btn" id="back"></a>
                    <h1 class="font-narrow font-bold imr-header-title" id= "title"></h1>
                    <a href= "Terms_of_use.html" data-theme="bk" class="header-btn-bk info-btn"></a>
                </div>          

                <div data-role="content" data-theme="bu" class="content">  
                    <div id="information" >
                        <!-- <a class = "policy" href= "Terms_of_use.html" style="display:inline"> Terms of Use </a> -->
                    </div>            

                    <div id= "main" style="display:none">
                        <div id= "inputArea">
                            <input type="text" id ="roomInput" /> <input id= "cancel" type="button" value ="Cancel" disabled/>
                            <ul id= "auto_suggest" data-role="listview" data-insert="true"> </ul>
                        </div>
                        <div class="floor-btn">    
                            <a href= "#" data-role="button" class="left" data-ajax= "false" data-value="1"> 1 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button" class="right" data-ajax= "false" data-value="2"> 2 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button"class="left" data-ajax= "false" data-value="3"> 3 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button" class="right" data-ajax= "false" data-value="4"> 4 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button"class="left" data-ajax= "false" data-value="5"> 5 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button" class="right" data-ajax= "false" data-value="6"> 6 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button"class="left" data-ajax= "false" data-value="7"> 7 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#"  data-role="button" class="right" data-ajax= "false" data-value="8"> 8 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button"class="left" data-ajax= "false" data-value="9"> 9 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button" class="right" data-ajax= "false" data-value="10"> 10 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button"class="left" data-ajax= "false" data-value="11"> 11 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button" class="right" data-ajax= "false" data-value="12"> 12 <span class="floor-btn-bgtxt"></span></a>
                            <a href= "#" data-role="button" class="left" data-ajax= "false" data-value="B"> B <span class="floor-btn-bgtxt"></span></a>
                        </div> 
                    </div>
                </div><!-- End: content -->  
            </div><!-- End: page -->
        </div><!-- End: wrapper -->
    </body>   
</html> 
```

在此我正在读取 xml 并将每个节点保存到一个数组中。在 HTML 中，我有几个按钮（从 1 到 12 命名）、自动完成文本框、从 JS 中的这些数组中获取点击内容的链接。这一切都发生在一个 HTML 页面中并使用一个 XML 页面。现在，如果我点击按钮 1 并显示链接列表，如果我点击链接，它会提供一些信息。

附上请看结构：
index.html(有)--> Button1,button2,button3, etc (点击Button1)-->显示链接列表a1,a2,a3 etc (点击a1)--> Shows一些信息。

所有这些都发生在 index.html 页面上，并相应地显示或隐藏内容。因为，它只是一页，并且 URL 没有变化，因此后退按钮不起作用。我想显示单击后退按钮的最后状态。例如：在最后一个信息页面上，如果我单击返回按钮，它应该带我到链接列表页面。

由于那个后发问题，我想使用多页应用程序。但它正在从 XML 中读取所有内容，因此我不确定在不同的 html 页面上读取 XML 的最佳方式是什么。我发现了不同的方法，比如使用 cookie 或使用 JSON 来获取值。但我不确定将其中任何一个用于 iphone 本机应用程序是否好。

请建议我将我的应用程序设置为多页应用程序的最佳方法是什么。我对 jquery 还很陌生。

任何建议将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:51:30.847

我已经通过使用 cookie 处理了这个问题。我已将所有状态保存在 cookie 中，并在单击后退按钮时调用所有这些状态。

所以，我不需要将我的应用程序作为多页应用程序。

不过还是非常感谢！！

# c# - 页面导航中的绑定

> ID：14203033
> 
> 赞同：1
> 
> 时间：2013-01-07T19:53:19.117
> 
> 标签：c#, windows-phone-7, variables, binding

我对 windows phone 7 dev 有另一个问题。我正在创建包含项目和一个文本块的列表框，这类似于指向另一页面的链接。每个链接都会有另一个“页面”变量值。

```
<TextBlock Tap="TextBlock_Tap" Foreground="#FF40AA2F" Text="View details">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseLeftButtonDown">
                    <ec:NavigateToPageAction TargetPage="/details.xaml?page={Binding Index}" />

                </i:EventTrigger>
            </i:Interaction.Triggers> 
</TextBlock> 
```

但它不适用于目标页面中的当前值，因为 Visual Studio 将其视为普通字符串。如何将此绑定嵌入到页面变量中？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:51:02.307

尝试使用 StringFormat：

```
<ec:NavigateToPageAction TargetPage="{Binding Path=Index, StringFormat='/details.xaml?page={0}'}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:30:43.533

不是在触发器上而是在文本块的 MouseLeftButtonDown 事件后面的代码中进行导航，并从列表框的当前选择中提取目标页面。

# internet-explorer - X-XSS-Protection 预防不起作用

> ID：14203039
> 
> 赞同：4
> 
> 时间：2013-01-07T19:53:36.107
> 
> 标签：internet-explorer, coldfusion, coldfusion-9, coldfusion-8, coldfusion-10

当我通过 JavaScript 重定向页面时，IE 正在修改我的页面并将 # 自动添加到超链接中。

这是我看到的消息：

> Internet Explorer 已修改此页面以帮助防止跨站点脚本。
> 点击这里查看更多信息...

![在此处输入图像描述](../Images/f921254672a093f63f7694cad846314e.png)

我尝试了以下两种方法来以编程方式阻止 IE 这样做。

```
<meta http-equiv="X-XSS-Protection" content="0"> 
```

通过冷融合：

```
<cfheader name="X-XSS-Protection" value="0"> 
```

但他们都没有为我工作。我做错了什么？

要重定向，我正在做这样的简单 javascript：

```
windows.location = "?param1=val_1&param2=val_2";

/* Sample URL to redirect:
?grp=3&set=1&KEYWORDS=&BADWORDS=&jt_BADWORDS=&OPT='or'&JOBTITLE=&searchType=full&zipcode=&radius=9999&EMPLOYER=&Edu_Keywords=&RDfrom=&RDto=01/07/2013&FULLNAME=test&EX_C=1&JT_C=1&JT_B=1&EMAIL=&BOOL1=1&BOOL2=1&stateField='All'&CountryField='All'&sourcenames=0&RemovePrev=&my_thumbsup=&prev_sent_clients=&is_bounce_back=&is_refused=&getmarketproducts=&experience=&JOBINDUSTRY=&Specialization=&SubDiscipline=&Certification=&EDUCATION=&bool=1&seniority=&Sen_cur=1&sort=score,max_res_date&RemoveEmailed=&Removeemailed_Anyone=&experimental=1&paging_clicked=1
*/ 
```

# python - 如何在 python 中使用 urllib2 发送 cookie 和 phpssid？

> ID：14203042
> 
> 赞同：0
> 
> 时间：2013-01-07T19:53:47.267
> 
> 标签：python, cookies

我想知道如何在 python 中使用 urllib2 发送 cookie 和 phpssid？实际上我想阅读一个我用浏览器登录的页面，但是当我尝试用这个脚本阅读它时，我遇到一个似乎说你错过了什么的文本。我的脚本：

```
#!/usr/bin/python
import urllib2
f = urllib2.urlopen('http://mywebsite.com/sub/create.php?id=20')
content = f.read()
file = open('file.txt', 'w')
file.write(content)
file.close() 
```

我保存的错误消息而不是真实页面：

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/number/domains/1number.com/public_html/s4/app/mywidgets.php:1) in /home/number/domains/1number.com/public_html/s4/app/mywidgets.php on line 23

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/number/domains/1number.com/public_html/s4/app/mywidgets.php:1) in /home/number/domains/1number.com/public_html/s4/app/mywidgets.php on line 23

Warning: Cannot modify header information - headers already sent by (output started at /home/number/domains/1number.com/public_html/s4/app/mywidgets.php:1) in /home/number/domains/1number.com/public_html/s4/lib/webservice.php on line 0 
```

确切的问题是什么？（请给我一个简单的方法来实现我想要的）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:31:38.843

对于 SID，其中一种发送方式是作为查询字符串的一部分，而您已经在这样做了。至少我认为这就是`id=20`您的 URL 的一部分。

对于 cookie，您想要的一切都在[`cookielib`](http://docs.python.org/2/library/cookielib.html).

只需创建一个`CookieJar`用于与服务器的会话是微不足道的。如果您想从浏览器导入 cookie，有以下三种可能性：

1.  如果您的浏览器使用旧的 Netscape cookie 文件格式，您可以使用`FileCookieJar`.
2.  如果您的浏览器使用 sqlite 数据库（至少 Firefox 和 Safari/Chrome 是这样做的），请使用该模块来读取它，然后手动`sqlite3`填充。`CookieJar`
3.  如果最坏的情况变得最糟，请将浏览器中的 cookie 作为硬编码字符串复制并粘贴到脚本中，并`CookieJar`手动进行流行。

如果您不想阅读有关如何使用的文档`cookielib`，只需查看[最后的示例](http://docs.python.org/2/library/cookielib.html#examples)，这些示例展示了如何使用`CookieJar`with `urllib2`，这正是您想要做的。

如果您有问题，请阅读文档。

同时，您向我们展示的是（a）警告，而不是错误，以及（b）显然是服务器端的问题，而不是您的脚本。服务器永远不应该喷出一堆警告和一个空白页面。如果您或您的一位同事负责服务器代码，则需要首先修复（并且您当前的简单 Python 脚本可以作为一个很好的回归测试用例）。

# iphone - 如何弹出到不同的视图控制器

> ID：14203045
> 
> 赞同：1
> 
> 时间：2013-01-07T19:53:59.303
> 
> 标签：iphone, ios, view, pushviewcontroller, popviewcontroller

我有四个视图控制器类 A、B、C、D。

当从 A 类和 B 类按下“开始”按钮时，D 类被按下。

我在应用程序委托中有一个方法可以为我做到这一点

```
-(void)showViewController {
    self.ViewController = [[[ViewController alloc] initWithNibName:@"View"     bundle:nil] autorelease];
    [self.navigationController pushViewController:self.ViewController animated:YES];
} 
```

当从 D 类按下“返回”按钮时，它会弹回到 A 类和 B 类，具体取决于按下哪个类 D 类

```
- (void)popViewController {
    [self.navigationController popViewControllerAnimated:YES];
} 
```

我想要实现的是假设如果 A 类推动 D 类，但是当在 D 类中按下“后退”按钮时，我希望它转到 C 类而不是 A 类

我试图实现以下代码

```
-(void)popToViewController{
    [self.navigationcontroller popToViewController:self.ClassCViewController animated:YES]
} 
```

这会导致 B 类发生我不想要的变化。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:00:11.523

因此，我建议您花一些时间阅读有关[代表](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)的苹果文档。他们会在这里做你想要的，两个视图可以有相同的子视图。从那里让子视图调用委托来确定它需要做什么。

要记住的另一件事是，让任何视图推动视图也成为负责弹出该视图的视图是一种很好的做法。

编辑：只是为了帮助您解决原始问题并让您思考正确的道路。当在 D 类中按下后退按钮时。您希望它从那里调用委托（可以是 A 类或 B 类）上的方法，您可以让它转到同一个类。或者，如果你想呈现另一个视图，让委托视图呈现 C 类。使用委托允许你让 A 类呈现 C 类，同时允许 B 类在按下返回时停留在 B 上。我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:06:16.407

当你在导航控制器中推送你的 ViewController 时，所有的 ViewController 都被推送到导航控制器中。

从导航控制器堆栈中找出 viewController 并弹出到该选定的视图控制器。

假设你从 A-> B -> C -> D 导航。然后，如果你通常使用 [self.navigationController popViewControllerAnimated:YES] 从 D 类弹出你的视图控制器；

然后它弹出到 C 类。

但是，如果您想跳到 B 类或 A 类，请使用以下命令：

```
-(void)popToSelectedViewController
{
  //get all view Controller from Stack of navigation controller
    NSArray *viewControllers=[self.navigationController viewControllers];

  //Declare an Object your selected class
    B  *homeVC=nil;

  //Find out you selected class where u want to pop
    for (int i=0; i<[viewControllers count]; i++)
    {
        UIViewController *tempVC=[viewControllers objectAtIndex:i];
        if([tempVC isKindOfClass:[B class]])
        {
            homeVC=[viewControllers objectAtIndex:i];
            break;
        }
    }

//pop to that selected class if found in stack otherwise popTo RootView
    if(homeVC)
        [self.navigationController popToViewController:homeVC animated:YES];
    else
        [self.navigationController popToRootViewControllerAnimated:YES];

} 
```

我希望这会帮助你

# sql - 2 错误：无法绑定多部分标识符“inserted.name”

> ID：14203052
> 
> 赞同：15
> 
> 时间：2013-01-07T19:54:30.380
> 
> 标签：sql, sql-server-2008, triggers

我正在尝试创建一个触发器，以在更改存储库时更新联系人信息。

```
CREATE TRIGGER contacts_f_tr
ON contacts_f
AFTER UPDATE
AS
BEGIN
  ---
  ---Update repository data
  ---
  IF UPDATE (mail)
    BEGIN
      UPDATE mails
      SET contact = inserted.name, mail = inserted.mail
      WHERE mails.idcontact IN (SELECT mail FROM deleted) AND mails.tablecontact = 2
    END
END 
```

我对此很陌生，我得到了这个错误：

```
The multi-part identifier "INSERTED.name" could not be bound.
The multi-part identifier "INSERTED.mail" could not be bound. 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-07T19:55:58.803

你`FROM Inserted`在你的`UPDATE`陈述中遗漏了 - 试试这个：

```
CREATE TRIGGER contacts_f_tr
ON contacts_f
AFTER UPDATE
AS
BEGIN
  ---
  ---Update repository data
  ---
  IF UPDATE (mail)
    BEGIN
      UPDATE mails
      SET contact = inserted.name, mail = inserted.mail
      FROM Inserted     <<==== add this line here!
      WHERE mails.idcontact IN (SELECT mail FROM deleted) AND mails.tablecontact = 2
    END
END 
```

另外 - 一旦你包含了那个伪表，你应该以某种方式引用它/将它连接到其他东西......

**更新：**`WHERE`好吧，如果您将伪表添加到等式中，您可能需要添加一些额外的子句`Inserted`- 这完全取决于您的要求，我不知道 - 但它可能类似于

```
WHERE mails.idcontact IN (SELECT mail FROM deleted) 
  AND mails.tablecontact = 2
  AND mails.MailId = Inserted.MailId 
```

或类似的东西（以避免在您的`UPDATE`声明中使用笛卡尔积）。

# windows - 使用节点检查器在 Windows 上的服务器端进行 Meteor 调试

> ID：14203055
> 
> 赞同：1
> 
> 时间：2013-01-07T19:54:39.347
> 
> 标签：windows, meteor, node-inspector

我在 Windows 上运行流星，这里可能是少数。我搜索并找到了适用于 Linux 和可能是 Mac 的解决方案，但没有人提供适用于 Windows 的解决方案。也许有人可以帮忙？

首先，我修改了包含在其他帖子中的`meteor.bat`文件：`C:\Program Files (x86)\Meteor``--debug`

```
@echo off&&"%METEOR_PATH%\bin\node.exe" --debug "%METEOR_PATH%\app\meteor\meteor.js" %* 
```

我启动了我的节点检查器并收到了访问`0.0.0.0:8080/debug?port=5858`以开始调试的指令

然后我启动了我的流星应用程序，但是当我去的时候，`http://127.0.0.1:8080/debug?port=5858`我看到了两个方块：一个用于脚本，一个用于控制台。选择脚本时什么都没有出现。

Windows 是否有与 Linux 相同的问题，产生两个进程但只有一个带有调试标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:59:50.407

0.5.3 版添加了 NODE_OPTIONS 环境变量，将这些参数直接传递给节点。

所以启动你最喜欢的 js 调试器，比如 node-inspector 假设你已经安装了它，调用

```
node-inspector 
```

然后

```
set NODE_OPTIONS = --debug
meteor 
```

在您的项目文件夹中执行此操作，您也可以使用 --debug-brk 在启动时立即中断

在 Chrome 中，在新选项卡中打开 localhost:8080

玩得开心

# xml - XSLT - 如何按顺序读取所有子节点，具有相同和不同的名称标签

> ID：14203060
> 
> 赞同：3
> 
> 时间：2013-01-07T19:55:10.690
> 
> 标签：xml, xslt, xpath

我有以下要解析以创建 HTML 的 XML 文件。我的问题是我无法按照我的意愿解析它。

我想要做的是将我的输出`<items>`为 html。所以我希望 a`<paragraph>`成为 a `<div>`，`<image>`成为 an `<img>`并且它的子节点成为它的属性 'src' 和 'alt'。

```
<itemlist>
    <item>
        <paragraph>pA</paragraph>
        <image>
            <url>http://www.com/image.jpg</url>
            <title>default image</title>
        </image>
        <paragraph>pB</paragraph>
        <paragraph>pC</paragraph>
        <link target='#'>linkA</link>
        <paragraph>pD</paragraph>
        <link target='#' >linkB</link>
        <image>
            <url>http://www.com/image2.jpg</url>
            <title>default image 2</title>
        </image>
        </item>
        <item>      
        <paragraph>pB</paragraph>
        <paragraph>pC</paragraph>
        <image>
            <url>http://www.com/image2.jpg</url>
            <title>default image 2</title>
        </image>
        <link target='#'>linkA</link>
        <paragraph>pD</paragraph>
        <link target='#'>linkB</link>
        </item>
    </itemlist> 
```

如果我 `<item>`通过应用模板执行 foreach 循环并写入值，例如 match='paragraph' 后跟 match='image'，那么所有内容都`<paragraph>`将写在 之前`<image>`，这不会导致正确的输出。

下面是我期待的输出。有人知道怎么做吗？

```
<div id="item">
    <div>pA</div>
    <img src='http://www.com/image.jpg' title='default image' />
    <div>pB</div>
    <div>pC</div>
    <a href='#'>linkA</a>
    <div>pD</div>
    <img src='http://www.com/image2.jpg' title='default image 2' />
</div>
<div id="item">
    <div>pB</div>
    <div>pC</div>
    <img src='http://www.com/image2.jpg' title='default image 2' />
    <a href='#'>linkA</a>
    <div>pD</div>
    <a href='#'>linkB</a>
</div> 
```

-----编辑----目前我有这样的东西

```
 <xsl:for-each select="itemlist/item">
<xsl:apply-templates select="paragraph"/>
<xsl:apply-templates select="link"/>

  <xsl:template match="paragraph">
<xsl:value-of select="." />
  </xsl:template>

  <xsl:template match="link">
<xsl:value-of select="." />
  </xsl:template>

</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:14:27.507

这是你想要的 ？：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" encoding="UTF-8" />

    <xsl:template match="//paragraph">
        <div>
            <xsl:apply-templates select="@*|node()"/>
        </div>
    </xsl:template>

    <xsl:template match="//image">
        <img>
            <xsl:apply-templates select="@*|node()"/>
        </img>
    </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# jquery-select2 - Select2 - 如何为“无限滚动”示例设置默认值？

> ID：14203061
> 
> 赞同：2
> 
> 时间：2013-01-07T19:55:18.973
> 
> 标签：jquery-select2

我正在打开一个表格来编辑一些记录。我正在使用“无限滚动选择2”。

我希望输入显示已保存到该字段的选项（我正在编辑记录...）

我怎样才能做到这一点？这种方式行不通：

```
 $('#e7').select2('data', { id: 8, text: 'foo' }); 
```

我创建了一个 jsfiddle 来表明：http: [//jsfiddle.net/lucianocosta/Dyh8W/1/](http://jsfiddle.net/lucianocosta/Dyh8W/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:38:35.313

ivaynberg 回答了我：[https ://github.com/ivaynberg/select2/issues/688#issuecomment-11971899](https://github.com/ivaynberg/select2/issues/688#issuecomment-11971899)

> 您必须传入一个与渲染器所期望的格式相同的对象。在这种情况下，您指定的渲染器需要标题属性，而不是文本。见这里：http: [//jsfiddle.net/Dyh8W/2/](http://jsfiddle.net/Dyh8W/2/)

所以这里的解决方案是：

```
$('#e7').select2('data', { id: 8, title: 'foo' }); 
```

# devexpress - ASPxGridview 从服务器端获取行数据

> ID：14203064
> 
> 赞同：-1
> 
> 时间：2013-01-07T19:55:36.867
> 
> 标签：devexpress, aspxgridview

我正在开发 DevExpress Gridview，我想获取所选行的数据（当时只能选择一行）。我在服务器端工作，我正在使用 FocusedRowChanged 函数。

编辑： FocusedRowChanged 着火，但什么也没发生，文本框不会改变值

```
protected void dxgrDepartement_FocusedRowChanged(object sender, EventArgs e)
        {
            Page.ClientScript.RegisterClientScriptBlock(GetType(), "FetchData", "<script                          language='javascript'>FetchData('4654654646')</script>");
            txtDescription.Text = "patate";
            //txtComments.Text = dxgrDepartement.GetRowValues(dxgrDepartement.FocusedRowIndex, "IdDepartment").ToString();
        } 
```

和“FetchData：

```
 function FetchData(text) {
        //ClearField();
        document.getElementById("<%= txtDescription.ClientID %>").value = text.toString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:34:54.833

采用：

```
gridView.GetRowValues(gridView.FocusedRowIndex, columnFieldName1, columnFieldName2, ..., columnFieldNameN) 
```

方法[ASPxGridView.GetRowValues](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_GetRowValuestopic)
属性[ASPxGridView.FocusedRowIndex](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FocusedRowIndextopic)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:29:25.047

`grid.EnableCallback = false;`解决了我的问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:11:08.100

顺便说一句 - 更改回调属性对我们没有任何影响。我们需要其他功能的回调，所以无论如何都无法关闭它。

GetRowValues 方法也不起作用。

这是 DevExpress 网站上描述的一种技术，只要我们不使用 DevExpress 的控件（ASPxDateEdit、ASPxTextBox），它就对我们有用：

ASPX 页面：

```
 <dxwgv:GridViewDataTextColumn Caption="Dist. %" FieldName="DistributionPerc" VisibleIndex="3"
        Width="50px">
        <DataItemTemplate>
            <asp:TextBox ID="txtDistPerc" runat="server" Text='<%# Eval("DistributionPercent") %>'
                Width="50px" />
        </DataItemTemplate>
    </dxwgv:GridViewDataTextColumn> 
```

后面的代码：

```
for (int i = 0; i < grdHistory.VisibleRowCount; i++)
{
    TextBox textbox = grdHistory.FindRowCellTemplateControl(i, grdHistory.Columns["DistributionPerc"] as GridViewDataColumn, "txtDistPerc") as TextBox;
    var anything = textbox.Text;
} 
```

# android - Android Viewgroup：淡入淡出/混合两个视图

> ID：14203067
> 
> 赞同：1
> 
> 时间：2013-01-07T19:56:03.713
> 
> 标签：android, animation, view, transition

我想在`ViewGroup`. 目前我正在使用 进行过渡`setAlpha`，但问题是只呈现一个视图，即位于顶部且正在淡出的视图。

*   视图数组是否`ViewGroup`按 z 轴排列？
*   只渲染顶视图吗？

我的`layout`方法如下所示：

```
@Override
protected void onLayout(final boolean changed, final int l, final int t, final int r, final int b) {
    L.debug("laying out {} children", this.getChildCount());
    for (int i = 0; i < this.getChildCount(); i++) {
        L.debug("layout out {}", i);

        View view = this.getChildAt(0);
        view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:11:32.160

为什么不想使用 ViewSwitcher？它完全符合您的要求。这是一个[例子](https://stackoverflow.com/questions/8720626/android-fade-in-and-fade-out-with-imageview)。

> ViewGroup 中的视图数组是按 z 轴排列的吗？

android中没有像Z-order这样的东西。视图按照添加到 ViewGroup 的顺序绘制。先加抽奖。

> 是否仅渲染顶视图

不，即使它们完全被其他视图重叠，android 也会在可见矩形中绘制所有视图。

我认为你应该修复这个地方 this.getChildAt(0) 并在你的 ViewGroup 中布局所有孩子。

# ruby-on-rails-3 - 如何在 Rails 3 中重新构建表单验证错误的嵌套属性字段

> ID：14203068
> 
> 赞同：0
> 
> 时间：2013-01-07T19:56:06.190
> 
> 标签：ruby-on-rails-3, validation, nested-attributes, http-status-code-406

我有一个简单的推荐表格。推荐 has_many 资产。

所以在我的控制器中，我正在做一个简单的事情：

```
 6.times {@recommendation.assets.build} 
```

当我尝试保存推荐并且存在验证错误时，会出现我的问题。我的创建操作：

```
def create
    @recommendation = Recommendation.new(params[:recommendation])
    @recommendation.user_id = current_user.id
    respond_to do |format|
      if @recommendation.save
        format.html { redirect_to thankyou_path, notice: 'Recommendation was successfully created.' }
      else
        6.times {@recommendation.assets.build} if @recommendation.assets.blank?
        render action: "new"

      end
    end
  end 
```

运行此页面并提交（带有验证错误）会导致以下日志输出和 http 406 错误

```
Started POST "/categories/1/awards/9/recommendations" for 127.0.0.1 at 2013-01-07 11:50:13 -0800
  Processing by RecommendationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"8PVfFZGa72+3KU/km2weZhNy0rxRfp0Qd+CkHdBoQM8=", "recommendation"=>{"nominee"=>"", "title"=>"", "department"=>"", "award_id"=>"9", "summary"=>"", "accomplishments"=>"", "caption"=>"", "url"=>"", "supervisor"=>"You ARE NOT the nominee’s direct manager / supervisor", "approvals_attributes"=>{"0"=>{"email"=>""}}}, "commit"=>"Save/Submit", "category_id"=>"1", "award_id"=>"9"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
   (0.2ms)  BEGIN
   (0.1ms)  ROLLBACK
Rendered shared/_recommend_timeline.html.erb (1.2ms)
  Award Load (20.1ms)  SELECT "awards".* FROM "awards" WHERE "awards"."id" = 9 LIMIT 1
Rendered recommendations/_form.html.erb (66.7ms)
Rendered recommendations/new.html.erb within layouts/application (69.8ms)
   (0.5ms)  SELECT COUNT(*) FROM "recommendations" WHERE "recommendations"."user_id" = 2
   (0.6ms)  SELECT COUNT(*) FROM "approvals" WHERE "approvals"."email" = 'tj@ravennainteractive.com' AND "approvals"."approved" IS NULL
Completed 406 Not Acceptable in 556ms (Views: 188.6ms | ActiveRecord: 31.5ms) 
```

我查看了堆栈上的多个问题，这些问题看起来相似但

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:03:34.433

我不确定是否有足够的信息可以很有信心地回答，但我认为您不想准确地重建 6 次。根据您的模型设置，验证可能会取消一个，但不是所有的关联。

也许你应该尝试：

```
(6-@recommendation.assets.count).times {@recommendation.assets.build} 
```

我的猜测是，您的视图期望正好有 6 个资产，但在抛出无效资产后只能找到 1-5 个，这会导致内部错误。

如果这不能解决问题，我认为您可能需要提供更多关于资产上正在运行哪些验证以及您的视图是什么样子的信息。

# android - 如何允许用户选择放置应用程序的位置？（如果在内部或外部存储中）

> ID：14203069
> 
> 赞同：0
> 
> 时间：2013-01-07T19:56:08.397
> 
> 标签：android

我的应用程序始终保留在设备的内部存储器中，如果用户尝试将其移动到 SD 卡，则“移动到 sd 卡”按钮不可能被禁用，我想知道如何赋予用户权力选择如何放置我的应用程序；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:56:52.257

将此添加到您的清单文件中

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xy.package"
    android:versionCode="1"
    android:versionName="1.0"
    android:installLocation="preferExternal" > 
```

如果您将其设置为自动，系统会选择安装位置，如果可用（例如小部件不可用），用户可以移动到外部/内部存储器。可用选项：`"auto"`, `"internalOnly"`, `"preferExternal"`. 更多信息：[Android 开发者应用安装位置](http://developer.android.com/guide/topics/data/install-location.html)

# initialization - Ember.js：“autoinit：false”不再工作

> ID：14203081
> 
> 赞同：1
> 
> 时间：2013-01-07T19:56:52.773
> 
> 标签：initialization, ember.js, curl.js

我正在分部分加载我的整个应用程序，所以在这个初始化过程的开始的某个地方我创建了我的应用程序

```
window.Sp = Em.Application.create( {
    VERSION: '1.0.0',
    autoinit: false
}) ; 
```

然后我开始加载其他东西，比如路由器设置。当一切准备就绪时，我调用了初始化

```
Sp.initialize() ; 
```

[这工作得很好，直到我从https://github.com/emberjs/ember.js](https://github.com/emberjs/ember.js)下载了最新的 ember.js

事实证明，“autoinit”作为配置选项已被删除。为什么？但更重要的是，如果我想手动调用“初始化”，我该怎么办？

我已经找到了解决这个问题的一种方法，就是将**isDestroyed**设置为 true，然后在调用 initialize() 之前将其设置为 false :)

# c - 方法（void * param）在C中是什么意思？

> ID：14203084
> 
> 赞同：1
> 
> 时间：2013-01-07T19:57:00.863
> 
> 标签：c

我需要知道当一个函数有一个`void *`参数时它意味着什么。例如：

```
function(void * param){} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:58:35.940

它是一个接收`void*`. 这可用于在 C 中传递任何类型的指针。

一个很好的例子是[`pthread_create`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html)函数和 pthread 启动例程。

但是请注意，如果未指定返回类型，则默认返回 an `int`，而在您的示例中没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:58:57.060

A`void *`是指向*任何*数据的指针，即指向未知或未指定类型的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T19:59:08.680

`param`is a void pointer 表示指向任何数据类型的指针。您可以调用泛型类型指针。

例如

```
func(void *param)
{
// body 
} 
```

像这样打电话：

```
char* cptr;
int* iptr;
float* fptr;

func(cptr);
func(iptr);
func(fptr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T20:35:23.657

`param`具有 type `void *`，在 C 中用作“通用”指针类型；任何对象指针类型都可以转换为`void *`，反之亦然，无需显式强制转换（某些实现允许将函数指针类型转换为`void *`，但这不是通用的，语言标准也不能保证）。

请注意，`void`指针可能不会被取消引用，因此您不能`x = *param`在函数体中执行类似的操作。您必须将指针转换为不同的类型，例如`int *`or`double *`或任何其他类型以获得它所指向的内容。这取决于`function`应该如何处理它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T19:59:56.327

它表示 void* 类型的参数（对 void 的引用），即内存位置的大小。您可以使用它来引用任何内存位置，这实际上是任何东西。

# mysql - MySQL binlog：何时在 INSERT 之前记录 DELETE

> ID：14203086
> 
> 赞同：0
> 
> 时间：2013-01-07T19:57:02.233
> 
> 标签：mysql, replication, innodb, myisam

一些相关的 my.cnf 设置：

```
binlog-format=ROW
init_connect='SET autocommit=1'
autocommit=1
innodb_flush_log_at_trx_commit=1 
```

我也有一个正在运行的复制......现在，大多数时候事情运行得很好。

但有时我确实得到了这个：

```
Could not execute Delete_rows/Update_rows event on table auto.parcels_to_cache; Can't find record in 'parcels_to_cache'. 
```

这是因为：

```
mysql-bin.000021.decoded-26373095-### DELETE FROM auto.parcels_to_cache
mysql-bin.000021.decoded-26373096-### WHERE
mysql-bin.000021.decoded-26373097-###   @1='0101'
mysql-bin.000021.decoded-26373098-###   @2='2013:01:05'
mysql-bin.000021.decoded:26373099:###   @3='01014700669249'
--
mysql-bin.000022.decoded-4143326-### INSERT INTO auto.parcels_to_cache
mysql-bin.000022.decoded-4143327-### SET
mysql-bin.000022.decoded-4143328-###   @1='0101'
mysql-bin.000022.decoded-4143329-###   @2='2013:01:05'
mysql-bin.000022.decoded:4143330:###   @3='01014700669249' 
```

这是来自主服务器的解码二进制日志。复制服务器反映了这一点。

而且这似乎只发生在 InnoDB 表上。但不总是。尽管我认为 MyISAM 的复制问题与另一个问题有关。

我最近重新编码了所有来源，以删除其中的少数交易以删除所有这些交易。所以没有开始，没有提交，没有回滚......然后我添加到 mysql 数据库类中以始终关闭提交。

这是因为我在 MySQL 网站上阅读了事务、可事务和非事务表的问题。

例如这个 auto.parcels_to_lifecycle 表被大量使用，有时它可能同时被 20 个线程访问。因此，InnoDB。否则，当只有 1 个线程正在更新时，每个线程将等待...

任何人都知道如何在 INSERT 问题之前解决此 DELETE 问题？或者也许有某种方法来解决问题并解决它？

谢谢！

# dependency-injection - 依赖注入有多有用？

> ID：14203091
> 
> 赞同：3
> 
> 时间：2013-01-07T19:57:09.617
> 
> 标签：dependency-injection

我是依赖注入的新手，使用 C#，所以请原谅我的蹩脚问题。无论如何，我想在投入时间和购买关于这个主题的昂贵书籍之前发布这个问题。

在浏览了一些在线文档之后，似乎可以使用依赖容器和配置文件来从一种实现类型切换到另一种实现类型。但是，这可以通过 if/else 语句和一些配置设置轻松完成。

使用如此繁琐的实现只是为了从一个类更改为另一个类有什么好处？我认为抽象和工厂模式更有用。也许我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:08:21.757

简而言之，依赖注入用于能够丢失耦合类。通过使用 if else 语句，您可以在类之间引入依赖关系。在您的 if else 语句中添加 à 新实现时，您需要添加另一个 else 语句。

您可能已经阅读过[http://en.m.wikipedia.org/wiki/Dependency_injection](http://en.m.wikipedia.org/wiki/Dependency_injection)，因为他们有一个非常好的动机部分。

也许用不同的代码示例来完成你的 q 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:11:28.207

我有一个需要依赖注入的真实世界案例：

2个组件：1个负责在您进行搜索时计算价格（我们称之为搜索），第二个负责计算包含所有选项的预订价格（我们称之为预订）。

Booking 程序集已经在引用 Search（因为它需要知道初始价格来计算全价）。

但这里有一个要求：我们需要搜索的价格包括所有强制性选项（是的，在旅游业中，您有强制性选项），例如“全房间清洁”。

所以我无法在搜索中引用 Booking（因为循环引用）。所以我决定使用依赖注入。

我的搜索程序集定义了一个接口

```
public interface IAddMandatoryOptionService{
  void ChangeResultsWithMandatoryOptions(SearchResult[] results);
} 
```

然后我的 Booking Assembly 可以实现这个接口。

```
public class AddMandatoryOptionService : IAddMandatoryOptionService{
  public void ChangeResultsWithMandatoryOptions(SearchResult[] results){
  ...
  }
} 
```

我的 SearchService 类现在看起来像

```
public class SearchService{
  public SearchService(IAddMandatoryOptionService optionService){
    this.OptionService = optionService;
  }
  public SearchResult[] Search(Filter filter){
    ...
    this.OptionService.ChangeResultsWithMandatoryOptions(results); 
    ...
    return results;
  }
} 
```

所以我的搜索服务不依赖于 AddMandatoryOptionService 类（和 Booking 程序集），但它正在使用它的功能。当我创建我的服务时（在我的 Application_Start 或使用 DI 框架中）将注入良好的 IAddMandatoryOptionService

优点是：

*   解决循环引用问题。
*   如果我想对我的 SearchService 进行单元测试，我将不得不模拟/伪造 IAddMandatoryOptionService。

这里需要注入更多的是技术性而非逻辑性，但我认为这种现实世界的场景可以帮助你理解这一点。

# apache-flex - 如果客户端使用不同的 SSL 证书，则拒绝访问

> ID：14203093
> 
> 赞同：1
> 
> 时间：2013-01-07T19:57:12.877
> 
> 标签：apache-flex, ssl, https, security

我已经尽我所能搜索了这个论坛，但没有找到合理的答案，谷歌也没有帮助。

我有一个使用 AMFPHP over HTTPS (Flex RemoteObject) 的 FLEX 3 应用程序。如果浏览器客户端 SSL 证书不是我的服务器提供的证书，我想阻止客户端发出任何 HTTPS 请求，从而使 Charles、Burp 等更难以通过代理读取进入服务器的数据联系。

当有人使用其中一个代理服务器时，会出现证书错误，即 Charles 向浏览器提供自己的证书，并作为普通客户端与服务器建立 HTTPS 连接，因此在服务器端没有区别。

如果我的证书是客户端使用的证书，是否有任何方法只允许连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:07:39.233

使用 SecureSockets（需要升级到 SDK 4.6）我能够检查浏览器使用的 SSL 证书的有效性。

默认行为是任何不正确的证书（类似于浏览器证书警告）都会导致 SecureSockets 失败。这使得使用 Adob​​e 文档中的示例代码创建检查非常容易：

```
private var secureSocket:SecureSocket = new SecureSocket();

    public function SecureSocketExample()
    {
        secureSocket.addEventListener( Event.CONNECT, onConnect )
        secureSocket.addEventListener( IOErrorEvent.IO_ERROR, onError );

        try
        {
            secureSocket.connect( "ip address here", 443 );
        }
        catch ( error:Error )
        {
            trace ( error.toString() );
        }
    } 
```

[文档在这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SecureSocket.html#includeExamplesSummary)

将此添加到 creationComplete 侦听器足以确保用户没有遵循不安全的证书或中间人。应用程序的其余通信可以通过“正常”SSL AMF 通道进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:18:10.917

一种通用方法可能是使用[严格的传输安全性](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)

# android - 识别没有登录的用户

> ID：14203094
> 
> 赞同：3
> 
> 时间：2013-01-07T19:57:20.557
> 
> 标签：android

我有一个使用 webview load html 将用户位置数据发送到服务器的应用程序。由于用户是卡车司机，我不希望他们每次使用 app 时都知道使用密码和用户名登录，所以我的解决方案是让每个用户制作一个应用程序，并将其自己的用户名和密码嵌入到应用程序中使用发送到 php 页面的 id 字段。

```
`enter code here`url="http://mywebsite.php?id=16"+"&longitude="+longitude+"&latitude="+latitude+"&brzina="+speed+"&vreme="+cal.getTime()+"&datum="+date; 
```

我在 url 中更改的是发送到 php page 的 id 字段。有没有办法让我自动创建 Android 应用程序而无需每次我必须向驱动程序提供新应用程序时编译应用程序。假设我得到了一个驱动程序列表及其 ID 号我得到了 15 个驱动程序 15 个 android 应用程序，它们都在 url 中具有不同的 id 部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:41:13.380

在他们第一次连接之前您需要知道 ID 吗？

如果没有，您可以在手机上存储一个 GUID，它是在第一次运行时创建的。作为标识符。当 GUID 第一次进入服务器时，您将它们作为具有该 ID 的新用户登录，然后从那时起，再次知道它们。

为了生成 GUID，我推荐[UUID 类](http://developer.android.com/reference/java/util/UUID.html)

并存储/检索它，也许是[SharedPreferences 类。](http://developer.android.com/reference/android/content/SharedPreferences.html)

或者，在您的应用程序运行的 ini 文件中给他们一个 GUID。（您事先知道 ID。）

# jms - 可以通过异步消息系统完成有效的数据库复制吗？

> ID：14203095
> 
> 赞同：1
> 
> 时间：2013-01-07T19:57:22.663
> 
> 标签：jms, messaging, database-replication

给定一个预生产 oracle 数据库和一个生产 oracle 数据库，如果大约 300K 记录需要从前者传输到后者，那么使用诸如 ESB/JMS/TIBCO 之类的消息传递系统是否是一个不错的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:18:53.237

我不了解 Oracle，但如果我尝试使用 SQL Server 异步复制数据，我会使用他们自己的内部工具来完成它。我想 Oracle 有类似的工具来运行在两个 Oracle 数据库之间复制的作业。

但是，我确实有相当多的使用 ESB (Mule) 和 ActiveMQ 来跨数据库技术复制数据的经验。具体来说，我已经使用 Mule 和 ActiveMQ 完成了 SQL Server->Mongo 和 MySQL->Mongo。

到目前为止，我发现 Mule 是一个很好的解决方案——尤其是与 ActiveMQ 结合使用。我已经能够在大约 20 分钟内将大约 400k Wordpress 博客文章（来自 MySQL）复制到 Mongo。要从 CMS 系统传输 10 万篇文章，我们能够在大约 30 分钟内完成。

我想我会参与进来，因为您提到了 ESB 和消息传递。如果集成点是异构的，我会走那条路。如果你真的走那条路，骡子很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:05:35.070

如果您尝试将数据从旧数据库移动到新数据库而不是异步执行，则可能更简单的方法是 sql 注入。假设您的旧数据库允许您“导出”您的数据库，当您导出它时，您将下载一个 sql 文件。然后，您可以在记事本之类的程序中打开该 sql 文件，并将该代码复制粘贴到新数据库的 sql 执行器中，它将重新创建所有表并用旧数据填充它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:52:50.537

实际上使用数据库工具将是在数据库之间复制数据的推荐方法。

使用消息传递时，不能保证数据将以与发送时相同的顺序传输，也不能保证表之间的关系，这可能会导致复制错误，除非在 JMS 接收方建立某种机制来维护序列。但这看起来更像是开销。

# php - 从流中获取文件类型/文件大小

> ID：14203096
> 
> 赞同：4
> 
> 时间：2013-01-07T19:57:23.733
> 
> 标签：php

我正在从流中获取文件内容

```
$src_file = file_get_contents("php://input"); 
```

但我还需要知道文件的文件类型和文件大小。这不起作用：

```
$src_type = filetype("php://input");
$src_size = count($src_file); 
```

我想我可以编写文件，然后在其上调用 filetype/filesize，但是有没有办法从流或变量的内容中获取文件类型和文件大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:15:23.583

要获取字符串的完整长度，请使用`strlen`，这*必须*有效。没有简单的方法可以嗅探流的文件类型，您不应该尝试这样做。

但是由于您正在处理`php://input`，可能来自`PUT`请求，客户端通常应在标头中设置适当的 mimetype `Content-Type`。您可以从sapi`$_SERVER['CONTENT_TYPE']`或`$_SERVER['HTTP_CONTENT_TYPE']`根据 sapi 获得此信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T20:04:21.717

在流中，文件的“类型”没有任何意义。流仅表示位的输入。所以`filetype`调用会失败，因为 PHP 根本找不到类型。但`php://input`不是文件。它是给 php.ini 的输入。例如，在 linux 中，它将能够执行以下操作：

```
ls | php file.php 
```

在这种情况下，PHP 的输入不是文件，而是另一个程序的输出。

# iphone - 如何将 RKObjectMapping (Reskit) 转换为 json 字符串？

> ID：14203097
> 
> 赞同：0
> 
> 时间：2013-01-07T19:57:26.777
> 
> 标签：iphone, ios

我有以下代码：

```
NSString *url =     @"http://mysite.com"
RKURL *baseURL = [RKURL URLWithBaseURLString:url];
objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
objectManager.client.baseURL = baseURL;
objectManager.serializationMIMEType = RKMIMETypeJSON;

NSString *token = @"Token is getting from rest API"
[[objectManager client] setValue:token forHTTPHeaderField:@"token"];  

RKClient *client= [objectManager client];     
RKRequest * therequest = [client requestWithResourcePath:@"/create"]; 

[therequest setHTTPBodyString:@"{user:user}"]; //Here receive a JSON value
[therequest setMethod:RKRequestMethodPOST];   
[therequest setDelegate:self];                               
[therequest send]; 
```

这段代码工作正常......但我有一个问题，我需要向 Rest API 发送一个 JSON 对象（如字符串），并且我有一个 RKObjectMapping，其中包含应该发送到 Rest Api 的值。

可以将 RKObjectMapping 转换为 JSON 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:59:40.637

除非您自己编写 JSON 库，否则您无法在本地执行此操作。否则，考虑利用[JSONKit](https://github.com/johnezang/JSONKit)之类的东西，它易于使用且运行良好。

[这是一个示例用法](http://maniacdev.com/2011/08/jsonkit-tutorial-for-beginners-demonstrating-use-with-the-rotten-tomatoes-api/)。

# java - 打开自定义枚举值的值

> ID：14203100
> 
> 赞同：4
> 
> 时间：2013-01-07T19:57:48.967
> 
> 标签：java, enums

> **可能重复：**
> [在开关/案例中使用枚举](https://stackoverflow.com/questions/14154784/using-enum-in-switch-case)

给定枚举

```
public enum ExitCodes {

    DESPITE_MULTIPLE_ATTEMPTS_CONNECTION_TO_SERVER_FAILED(-1),
    PROGRAM_FINISHED_SUCCESSFULLY(0),
    // ... more stuff

    private final int id;

    ExitCodes(final int id) {
        this.id = id;
    }

    public int getValue() {
        return id;
    }
} 
```

作为另一堂课的一部分，我想

```
switch (exitCode) {
    case ExitCodes.PROGRAM_FINISHED_SUCCESSFULLY.getValue():
       // do stuff 
```

失败`Constant expression required`

为什么是这样？据我了解，分配给 id in 的数值`ExitCodes`是 Constant ( `final`)

请问这个怎么改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:20:38.857

一种非映射方法是“遍历”枚举条目，如下所示`ExitCodes`：

```
public static ExitCodes getByID(int id) {
   for (final ExitCodes element : EnumSet.allOf(ExitCodes.class)) {
    if (element.id == id) {
      return element;
    }
   }

   throw new IllegalArgumentException("Can't find " + id);
} 
```

然后查找您可以执行以下操作：

```
switch (ExitCodes.getByID(exitCode)) {
    case PROGRAM_FINSHED_SUCCESSFULLY:
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:04:48.600

您需要创建一个退出代码映射来`ExitCode`枚举值。然后你可以做

```
switch(ExitCode.lookup(exitCode)) {
    case PROGRAM_FINSHED_SUCCESSFULLY: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:05:09.310

在我的工作中，我们也有类似的模式。

更改您的枚举类以添加反向查找映射：

```
public enum ExitCodes {

    // All the same until here
    private static HashMap<Integer, ExitCodes> valueToExitCodeMap = null;

    public static ExitCodes getEnumByValue(int value)
    {
        if(valueToExitCodeMap == null)
        {
            valueToExitCodeMap = new HashMap<Integer, ExitCodes>();
            for(ExitCodes code : values())
            {
                valueToExitCodeMap.put(new Integer(code.id), code);
            }
        }
        return valueToExitCodeMap.get(new Integer(value));
    }
} 
```

然后改变这个：

```
switch (ExitCodes.getEnumByValue(exitCode)) {
case PROGRAM_FINISHED_SUCCESSFULLY:
   // do stuff 
```

# jquery - 如何让 Div 在不同的时间出现

> ID：14203103
> 
> 赞同：0
> 
> 时间：2013-01-07T19:58:03.320
> 
> 标签：jquery, html, scrolltop

编辑：（我对这种编码很陌生，所以我知道我在下面提供的以下代码效率低下，可能是荒谬的。我正在寻找可以解决我的问题并告诉我如何做的人它以一种有效的方式，而不是我在下面所做的复制/粘贴方式。谢谢！）

一旦用户滚动到特定点，我希望在页面上显示 7 种不同的“树”。到目前为止，我可以让树出现的唯一方法是淡入它们，并且仍然使用我拥有的代码，它们同时出现，而不是按照需要一个接一个出现。这是我所拥有的：

```
$(window).scroll(function(){
if($(window).scrollTop() > 2800){
  $("#minitree1").fadeIn("slow");
}
});
$(window).scroll(function(){
if($(window).scrollTop() < 2800){
  $("#minitree1").fadeOut("fast");
}
});

$(window).scroll(function(){
if($(window).scrollTop() > 2800){
  $("#minitree2").fadeIn("slow");
}
});
$(window).scroll(function(){
if($(window).scrollTop() < 2800){
  $("#minitree2").fadeOut("fast");
}
});

$(window).scroll(function(){
if($(window).scrollTop() > 2800){
  $("#minitree3").fadeIn("slow");
}
});
$(window).scroll(function(){
if($(window).scrollTop() < 2800){
  $("#minitree3").fadeOut("fast");
}
});

$(window).scroll(function(){
if($(window).scrollTop() > 2800){
  $("#minitree4").fadeIn("slow");
}
});
$(window).scroll(function(){
if($(window).scrollTop() < 2800){
  $("#minitree4").fadeOut("fast");
}
});

$(window).scroll(function(){
if($(window).scrollTop() > 2800){
  $("#minitree5").fadeIn("slow");
}
});
$(window).scroll(function(){
if($(window).scrollTop() < 2800){
  $("#minitree5").fadeOut("fast");
}
});

$(window).scroll(function(){
if($(window).scrollTop() > 2800){
  $("#minitree6").fadeIn("slow");
}
});
$(window).scroll(function(){
if($(window).scrollTop() < 2800){
  $("#minitree6").fadeOut("fast");
}
});

$(window).scroll(function(){
if($(window).scrollTop() > 2800){
  $("#minitree7").fadeIn("slow");
}
});
$(window).scroll(function(){
if($(window).scrollTop() < 2800){
  $("#minitree7").fadeOut("fast");
}
}); 
```

因此，使用此代码，一旦用户从顶部滚动 2800 像素，所有七棵树都会“淡入”，而当用户滚动到上方时，它们会“淡出”。

我的目标是不同的：我希望每棵树都以向上弹跳的方式出现（就像它们从地面发芽一样）而不是逐渐消失，并且我希望它们一个接一个地发生。

如果用户滚动回触发点上方，我不确定是否希望它们消失，但我真的只是关心它们现在的显示方式。

如果您能提供一些建议，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:20:18.253

通过在每个元素上设置一个类，为每个元素 ID 制作淡入/淡出省去了一大麻烦

```
<div id="minitree1" class="minitrees">...</div>
<div id="minitree2" class="minitrees">...</div>
etc... 
```

然后像这样编写脚本：

```
// cache reusable jQuery objects to variables
var $window = $(window), 
    $minitrees = $('.minitrees');

// one event with one scrollTop() check
$window.scroll(function(){
  if($window.scrollTop() > 2800){
    $minitrees.fadeIn("slow");
  } else {
    $minitrees.fadeOut("fast");
  }
}); 
```

[**演示 jsfiddle**](http://jsfiddle.net/95sdc/)

* * *

编辑 - 独立树动画：

[**演示 jsfiddle**](http://jsfiddle.net/95sdc/2/)

```
var $window = $(window),
  $minitrees = $('.minitrees'),
  delay = 0,
  delayIncrement = 500;

$window.scroll(function () {
  if ($window.scrollTop() > 2800) {
    // loop through the trees increasing the delay each time
    $minitrees.each(function () {
      // 1\. delay 0, 500, 1000
      // 2\. show the tree
      // 3\. animate the tree up from the ground (css starts with -100px animates to 0) 
      $(this).delay(delay).show().animate({
        bottom: '0'
      });
      delay += delayIncrement;
    });
    delay = 0;
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:20:20.727

这并不像最初看起来那么简单。

你需要 ：

*   仅在超过阈值 (2800) 时触发动画，而不是每次`scroll`触发事件时。
*   一种使树木“向上弹跳（好像它们从地面发芽）”的方法。
*   一种给每棵树自己的时间的方法。
*   在开始新动画之前停止任何正在进行的动画。

这是一些代码：

```
$(function(){
    //To keep the data tidy, we have an object with a bunch of properties 
    var treeData = {
        show = [0, 700, 200, 1000, {'top': '0px'}, 'easeOutElastic'],//minDelay(ms), maxDelay(ms), minDuration(ms), maxDuration(ms), cssMap, easing (adjust as necessary)
        hide = [0, 500, 50, 400, {'top': '200px'}, 'swing'],//minDelay(ms), maxDelay(ms), minDuration(ms), maxDuration(ms), cssMap, easing (adjust as necessary)
        timeOuts = {},
        animState = 0//0: <2800; 1: >=2800
    };

    //Note, animateTree() doesn't actually perform the animation, rather it returns a function that will perform the animation at some point in the near future.
    function animateTree(el, treeArray) {
        return function(){
            var duration = treeArray[2] + Math.random() * (treeArray[3] - treeArray[2]);
            var cssMap = treeArray[4];
            var easing = treeArray[5];
            $(el).animate(cssMap, duration, easing);
        }
    }
    function establishAnimation(el, treeArray){
            var id = el.id;
            if(treeData.timeOuts[id]) {
                clearTimeout(treeData.timeOuts[id]);
            }
            treeData.timeOuts[id] = setTimeout(animateTree(el, treeArray), treeArray[0] + Math.random() * (treeArray[1] - treeArray[0]));
    }
    $(window).scroll(function(){
        if(treeData.animState == 0 && $(window).scrollTop() >= 2800){
            $(".minitree").stop().each(function() {
                establishAnimation(this, treeData.show);
            });
            treeData.animState = 1;
        }
        else if(treeData.animState == 1 && $(window).scrollTop() < 2800){
            $(".minitree").stop().each(function() {
                establishAnimation(this, treeData.hide);
            });
            treeData.animState = 0;
        }
    });
}); 
```

*未经测试*

笔记：

*   每个 minitree 都需要被赋予 class="minitree";

*   需要在页面上安装 jQuery UI 才能获得“easeOutElastic”效果。

*   就目前而言，代码假设每棵树都隐藏在掩码后面，并且通过更改其 css`top`属性对其进行动画处理。这将要求 tgheminitgrees 是带有`position:absolute`or`position:relative`和 for的样式，`top`以强制最初隐藏树。如果设计不同，则对代码进行组织以使该方面易于更改。

*   要仅在超过阈值 (2800) 时触发动画，使用属性跟踪要触发的最后一个动画`treeData.animState`。

*   `stop()`jQuery 使用它的方法使停止动画变得简单。

*   需要调整数组中的值`treeData.show`以获得所需的动画效果。`treeData.hide`代码中的注释应该足以解释每个值的用途。

# javascript - 隐藏 Google Rich Snippets

> ID：14203105
> 
> 赞同：2
> 
> 时间：2013-01-07T19:58:09.307
> 
> 标签：javascript, css, microdata, schema.org, rich-snippets

正如谷歌关于向用户隐藏丰富网页摘要所说：

> 将与丰富网页摘要相关的所有内容添加到页面上的一个位置，标记它，然后使用 CSS 或其他技术隐藏整个文本块可能很诱人。不要这样做！标记已经存在的内容。

然而，我看到的问题是，在某些框架中，这过于繁琐，因为每个所需的丰富片段都存在于几十个模板中的一个中。从开发人员的角度来看，这会在各处创建零散的代码，从而使框架的模块化性质变得复杂。

主要问题是，使用什么技术可以使丰富的片段可以全部存在于一个模板中？我考虑过扩展“SEO 块”的概念，它将位于页面底部并提供所需的丰富片段，但这看起来很混乱并导致重复内容。

是否有任何其他可能的技巧可以在这里使用，以便可以对用户隐藏此标记？如果我将丰富的片段内容放入使用 jQuery 的 div 中`slideToggle()`，就谷歌而言，这是否仍然“隐藏”内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T15:44:48.870

可以使用 meta 关键字隐藏您的丰富网页摘要。我已经在我的个人网站 (victorlava.com) 上完成了这项工作。看一看：

```
<article itemscope="" itemtype="http://data-vocabulary.org/Person">
                <meta itemprop="name" content="Victor Lava">
                <meta itemprop="photo" content="http://www.victorlava.com/external/victor-lava.png">
                <h2>I am a Professional <span itemprop="title">Web Developer</span> who creates web applications</h2>
                <p itemprop="description">I am a professional <b>web developer</b> from <span itemprop="location">Lithuania</span>, who trully enjoys <b itemprop="role">coding</b>. I develop all kind of <b>web</b> things. Web things like: <b>web applications</b>, <b>websites</b> and <b>custom cms</b>.  
                   For my frontend development I like to use: <b>HTML5</b>, <b>CSS3</b> and <b>Javascript</b>. These are the latest web technologies, which must be used in the development process by <b>professional</b> web developer. For my backend development I usually use web technologies like: <b>PHP</b>, <b>MySQL</b>, other <b>APIs</b> and <b>CodeIgniter</b>.
                   I am that kind of <b>web developer</b>, who isn't afraid to experiment. By experimenting I am able to create unique and eye-catching <b>websites</b> for my clients. I am open for new proposals, so feel free to <b><a href="http://victorlava.com/contact.html" title="Hire Web Developer">hire me</a></b>.</p>
            </article> 
```

使用：`<meta itemprop="name" content="Your Content">` 元属性工作得很好，你不需要用 CSS 或 Javascript 隐藏任何东西。在我看来，元属性将是您的最佳选择。顺便说一句，你可以在这里阅读更多关于丰富片段以及如何测试它们的信息[http://blog.victorlava.com/rich-snippets-testing-tool-webmaster-seo-very-useful/](http://blog.victorlava.com/rich-snippets-testing-tool-webmaster-seo-very-useful/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:26:39.297

谷歌也会对同一页面上的重复内容进行处罚。

我假设我们谈论的是一个展示许多不同类型东西的网站（即一个销售书籍、电影、CD 等的网站），不可能为每个页面只选择一个实体。

在这种情况下，硬编码微数据可能过于复杂，特别是如果您使用的框架（或 CMS）您不知道如何满足您的需求。

无论如何，您可以尝试设置自定义字段（我正在考虑 Wordpress，但这可以扩展到几乎任何东西）以至少识别页面主要实体。

从那里开始应该会更容易，因为每个实体或多或少都具有几乎相同的一组属性，您最终可以硬编码。

# node.js - 将多个条目从 Node.js 应用程序的 CSV 文件导入 MongoDB

> ID：14203108
> 
> 赞同：4
> 
> 时间：2013-01-07T19:58:18.407
> 
> 标签：node.js, mongodb, csv

首先，我是 Node.js 和 MongoDB 的新手。我有一个关于我目前正在开发的网络应用程序的想法。它涉及将数据分配给数据库中的代表，然后在应用程序中访问该数据。

我必须使用的数据在 Excel 文件中。我能够获取该 Excel 文件并从中创建一个 CSV 文件以导入 MongoDB。我的问题是，我有多个与个人代表相关的机会。我正在尝试弄清楚如何为我的应用程序设置数据库，以便我可以导入此 CSV 文件，并将代表的所有数据保存到数据库中的特定代表。

以下是数据示例：
Rep Name,Opp ID,Opp Name,Prior Amount,Amount
Rep 1,1234561,Opp 1,10000,8000
Rep 1,1234562,Opp 2,15000,9000
Rep 2,1234563,Opp 3, 20000,10000
代表 1,1234564,Opp 4,25000,11000
代表 2,1234565,Opp 5,30000,12000

基本上我希望能够以这种格式导入 csv 文件，在 node.js 中有一个模型，它将支持这种导入，然后能够为应用程序中的每个代表提取数据。例如，所有代表的概览将显示如下内容：代表 1 将显示 3 个 Opps，代表 2 将显示 2 个 Opps

这甚至可能吗？我会以错误的方式解决这个问题吗？有没有更好的方法来做到这一点？任何可以帮助指导我的提示、技巧、建议或示例都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T21:43:42.513

由于您似乎熟悉 ORM 模式，我建议您使用[“mongoose”模块](http://mongoosejs.com/)。虽然我猜想你会在 NodeJS 和 Mongo 方面有很长的学习曲线来制作一个可靠的应用程序。

这是一个可以帮助您入门的工作示例：

```
#! /usr/bin/node

var mongoose = require('mongoose');
mongoose.connect('localhost', 'test');

var fs = require('fs');
var lineList = fs.readFileSync('mytest.csv').toString().split('\n');
lineList.shift(); // Shift the headings off the list of records.

var schemaKeyList = ['RepName', 'OppID', 'OppName', 'PriorAmount', 'Amount'];

var RepOppSchema = new mongoose.Schema({
    RepName: String,
    OppID: String,
    OppName: String,
    PriorAmount: Number,
    Amount: Number
});
var RepOppDoc = mongoose.model('RepOpp', RepOppSchema);

function queryAllEntries () {
    RepOppDoc.aggregate(
        {$group: {_id: '$RepName', oppArray: {$push: {
            OppID: '$OppID', 
            OppName: '$OppName',
            PriorAmount: '$PriorAmount',
            Amount: '$Amount'
            }}
        }}, function(err, qDocList) {
        console.log(util.inspect(qDocList, false, 10));
        process.exit(0);
    });
}

// Recursively go through list adding documents.
// (This will overload the stack when lots of entries
// are inserted.  In practice I make heavy use the NodeJS 
// "async" module to avoid such situations.)
function createDocRecurse (err) {
    if (err) {
        console.log(err);
        process.exit(1);
    }
    if (lineList.length) {
        var line = lineList.shift();
        var doc = new RepOppDoc();
        line.split(',').forEach(function (entry, i) {
            doc[schemaKeyList[i]] = entry;
        });
        doc.save(createDocRecurse);
    } else {
        // After the last entry query to show the result.
        queryAllEntries();
    }
}

createDocRecurse(null); 
```

您在“mytest.csv”中的数据：

```
Rep Name,Opp ID,Opp Name,Prior Amount,Amount
Rep 1,1234561,Opp 1,10000,8000
Rep 1,1234562,Opp 2,15000,9000
Rep 2,1234563,Opp 3,20000,10000
Rep 1,1234564,Opp 4,25000,11000
Rep 2,1234565,Opp 5,30000,12000 
```

# java - 我一直在尝试安装 jdk7u10，但下载后我无法安装它

> ID：14203111
> 
> 赞同：0
> 
> 时间：2013-01-07T19:58:33.517
> 
> 标签：java

我收到一个名为“C:.......\jdk-7u10-windows-i586.exe 不是有效的 Win32 应用程序”的错误，这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:00:25.673

该文件可能已损坏。重新下载。

# php - 排队旧的点击事件值。

> ID：14203118
> 
> 赞同：0
> 
> 时间：2013-01-07T19:59:09.283
> 
> 标签：php, javascript, jquery, ajax

我有一个问题，只是找不到旧值的来源。我拥有的是一个论坛和回复列表，用户可以在其中对每个回复的好建议和坏建议进行评分。如果您单击一个，它会触发一个 java 脚本并更新数据库......另一个按钮隐藏以显示发生的事情。我遇到问题的地方是在新页面刷新上，第一个按钮按设计工作，但所有其他按钮不仅传递下一个单击事件值（脚本在您已经投票的地方响应），而且传递所有先前单击的值。如果我对四个不同的帖子进行投票，那么所有四个值都会发布，三个显示我已经投票。如何清除之前的点击事件值？

```
 <script>
     function doGABAbad(forum_post_id,type){
         $(".badadviceclick").click(function(){
         var element = $(this);
         var I = element.attr("id");
         var info = 'id=' + I; 
        $("#gaba_float_right").html('<img src="loader.gif"/>').show();
       $.post('updateGABA.php', {forum_post_id: forum_post_id,type: type}, function(data){
           if(isNaN(parseFloat(data))){
              alert(data);
           }else{
            $('#'+forum_post_id+'_'+type+'s').text(data);
           }

           $('#goodadvice'+I).fadeOut(200).show();

        });
         });
     }
  </script>
        <script>
     function doGABAgood(forum_post_id,type){
         $(".badadviceclick").click(function(){
         var element = $(this);
         var I = element.attr("id");
         var info = 'id=' + I; 
        $("#gaba_float_right").html('<img src="loader.gif"/>').show();
       $.post('updateGABA.php', {forum_post_id: forum_post_id,type: type}, function(data){
           if(isNaN(parseFloat(data))){
              alert(data);
           }else{
            $('#'+forum_post_id+'_'+type+'s').text(data);
           }
          $('#badadvice'+I).fadeOut(200).show();

        });
         });
     }
  </script> 
```

这是我正在构建我的 Div 的地方

```
<div id="goodadvice'.$forum_post_id.'">
<a id="'.$forum_post_id.'"  class="badadviceclick"  href="#" onClick="return false" onmousedown="javascript:doGABAgood('.$forum_post_id.',\'goodadvice\');">Good Advice '.$good_advice.'</a>
</div>

<div id="badadvice'.$forum_post_id.'">
<a id="'.$forum_post_id.'"  class="badadviceclick"  href="#" onClick="return false" onmousedown="javascript:doGABAbad('.$forum_post_id.',\'badadvice\');">Bad Advice '.$bad_advice.'</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:04:41.547

原因是您在 javascript 和 jquery 中附加事件（基于 javascript 的事件中的基于 jquery 的事件）。你需要使用一个或另一个。

```
 <script>
     function doGABAbad(forum_post_id,type){
         var element = $(this);
         var I = element.attr("id");
         var info = 'id=' + I; 
        $("#gaba_float_right").html('<img src="loader.gif"/>').show();
       $.post('updateGABA.php', {forum_post_id: forum_post_id,type: type}, function(data){
           if(isNaN(parseFloat(data))){
              alert(data);
           }else{
            $('#'+forum_post_id+'_'+type+'s').text(data);
           }

           $('#goodadvice'+I).fadeOut(200).show();

        });
     }
     function doGABAgood(forum_post_id,type){
         var element = $(this);
         var I = element.attr("id");
         var info = 'id=' + I; 
        $("#gaba_float_right").html('<img src="loader.gif"/>').show();
       $.post('updateGABA.php', {forum_post_id: forum_post_id,type: type}, function(data){
           if(isNaN(parseFloat(data))){
              alert(data);
           }else{
            $('#'+forum_post_id+'_'+type+'s').text(data);
           }
          $('#badadvice'+I).fadeOut(200).show();

        });
     }
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:16:29.533

首先像这样修改HTML：

```
<div id="goodadvice'.$forum_post_id.'">
<a id="'.$forum_post_id.'"  class="goodadviceclick"  href="javascript:void(0);">Good Advice '.$good_advice.'</a>
</div>

<div id="badadvice'.$forum_post_id.'">
<a id="'.$forum_post_id.'"  class="badadviceclick"  href="javascript:void(0);">Bad Advice'.$bad_advice.'</a>
</div> 
```

接下来，您可以像这样重构函数：

```
function doGABA(e) {
    e.preventDefault();
    var element = $(this);
    var forum_post_id = element.attr("id");
    var type = element.hasClass('goodadviceclick') ? 'good' : 'bad';
    var info = 'id=' + I; 
    $("#gaba_float_right").html('<img src="loader.gif"/>').show();
    $.post('updateGABA.php', {forum_post_id: forum_post_id, type: type + 'advice'}, function(data){
        if(isNaN(parseFloat(data))){
            alert(data);
        }else{
            $('#'+forum_post_id+'_'+type+'s').text(data);
        }
         $('#' + type + 'advice'+I).fadeOut(200).show();
    });
} 
```

然后删除锚标记上的 onmousedown 属性，并在 jQuery 中执行此操作：

```
$('.goodaviceclick, .badadviceclick').click(doGABA); 
```

# regex - 为 Cron 语句创建正则表达式

> ID：14203122
> 
> 赞同：12
> 
> 时间：2013-01-07T19:59:34.330
> 
> 标签：regex

我需要编写一个与[Cron 时间表达式](https://en.wikipedia.org/wiki/Cron)匹配的正则表达式，例如：

*   28 2 7 1 1
*   28 2 7 1 *
*   28 2 7 * *
*   28 2 * * *
*   28 * * * *
*   * * * * *

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2019-08-24T16:24:04.513

*要验证一般*的cron 表达式，很大程度上取决于您使用的具体实现

## 规则

### [一般格式](https://en.wikipedia.org/wiki/Cron#CRON_expression)

一般来说，大多数遵循以下格式：

| 字段名称 | 强制的？ | 允许值 | 特殊的角色 |
| --- | --- | --- | --- |
| 秒 | 不* | 0-59 | `* / , -` |
| 分钟 | 是的 | 0-59 | `* / , -` |
| 小时 | 是的 | 0-23 | `* / , -` |
| 一个月中的哪一天 | 是的 | 1-31 | `* / , - L W` |
| 月 | 是的 | 1-12 或 1-12 月 | `* / , -` |
| 星期几 | 是的 | 0-6 或 SUN-SAT | `* / , - L #` |
| 年 | 不* | 1970–2099 | `* / , -` |

^(*其中秒和年是非标准的，有时不包括在内)

### [预定义的调度宏](https://en.wikipedia.org/wiki/Cron#Nonstandard_predefined_scheduling_definitions)：

一些风格允许像这样的预定义时间段：

| 入口 | 相当于 |
| --- | --- |
| @每年 | `0 0 0 1 1 * *` |
| @每年 | `0 0 0 1 1 * *` |
| @月刊 | `0 0 0 1 * * *` |
| @每周 | `0 0 0 * * 0 *` |
| @日常 | `0 0 0 * * * *` |
| @hourly | `0 0 * * * * *` |
| @重启 |  |

### [间隔](https://godoc.org/github.com/robfig/cron#hdr-Intervals)

一些风格允许使用`@every <duration>`具有以下时间跨度单位的语法：

| 单元 | [定义](https://en.wikipedia.org/wiki/Orders_of_magnitude_(time)) |
| --- | --- |
| `ns` | 纳秒 |
| `us`,`µs` | 微秒 |
| `ms` | 毫秒 |
| `s` | 第二 |
| `m` | 分钟 |
| `h` | 小时 |

## 证实

### 预定义的宏正则表达式

要验证预定义的宏，您可以使用[以下正则表达式](https://regexr.com/4jp79)：

```
/@(annually|yearly|monthly|weekly|daily|hourly|reboot)/ 
```

它将通过以下测试用例：

```
@daily
@hourly 
```

### `@every`正则表达式

要验证`@every`持续时间，您可以使用[以下正则表达式](https://regexr.com/4jp7f)：

```
/@every (\d+(ns|us|µs|ms|s|m|h))+/ 
```

它将通过以下测试用例：

```
@every 5s
@every 20h30m 
```

### 单个 Cron 术语

在正则表达式中验证 cron 术语有点棘手，因为有很多变体。

**只关注一个术语**，以下都是有效的：

*   两个*或多个*数字用 a 隔开`,`
*   两个数字由一个`/`或分隔`-`
*   1-2 位数字
*   一个`*`

要验证单个术语，我们可以使用[以下正则表达式](https://regexr.com/4jp7i)：

```
/(\d+,)+\d+|(\d+(\/|-)\d+)|\d+|\*/ 
```

^(只保证你有`\d+`1 个或多个数字)

它将通过以下测试用例：

```
1,2,3
1,2
1/2
1-2
1
* 
```

### 组合 Cron 术语

要检查完整的表达式，我们可以确保我们有`{5,7}`以下[正则表达式](https://regexr.com/4jp7o)：

```
/(((\d+,)+\d+|(\d+(\/|-)\d+)|\d+|\*) ?){5,7}/ 
```

如果我们想区分每个术语，我们需要[验证一定范围内的数字](https://stackoverflow.com/a/57639368/1366033)：

| 允许值 | 正则表达式 |
| --- | --- |
| 0-59 | `[1-5]?[0-9]` |
| 0-23 | `2[0-3]&#124;1[0-9]&#124;[0-9]` |
| 1-31 | `3[01]&#124;[12][0-9]&#124;[1-9]` |
| 1-12 | `1[0-2]&#124;[1-9]` |
| 0-6 | `[0-6]` |
| 1970–2099 | `19[7-9][0-9]&#124;20[0-9][0-9]` |

但是，如果我们只是想确保某些东西*看起来*像一个正则表达式，而不用担心哪个术语是天与小时，那么表达式会保持得更清晰，所以为了简单起见，这就是我要使用的

### 把它们放在一起

[通过结合上述语句，我们可以使用以下表达式](https://regexr.com/4jp54)进行一个相对简单的完整性检查，即该术语看起来是 regex-y ：

```
/(@(annually|yearly|monthly|weekly|daily|hourly|reboot))|(@every (\d+(ns|us|µs|ms|s|m|h))+)|((((\d+,)+\d+|(\d+(\/|-)\d+)|\d+|\*) ?){5,7})/ 
```

### 其他资源

*   [crontab.guru](https://crontab.guru/)
*   [正则表达式.com](https://regexr.com/4jp54)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-25T12:50:06.337

刚写完，就写到这里，希望对你有帮助。

这应该允许 * 或 */num 并且还将数值限制在它们的逻辑范围内（1-12 个月，0-24 小时，等等）

```
/^(\*|([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])|\*\/([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])) (\*|([0-9]|1[0-9]|2[0-3])|\*\/([0-9]|1[0-9]|2[0-3])) (\*|([1-9]|1[0-9]|2[0-9]|3[0-1])|\*\/([1-9]|1[0-9]|2[0-9]|3[0-1])) (\*|([1-9]|1[0-2])|\*\/([1-9]|1[0-2])) (\*|([0-6])|\*\/([0-6]))$/ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-27T09:10:04.243

花了我一段时间：D 它根据以下文档进行验证：[http](http://en.wikipedia.org/wiki/Cron) ://en.wikipedia.org/wiki/Cron 但是它没有考虑到您不能指定星期几和月份中的某一天，即您可以指定两者都根据这个正则表达式。这可以用于 boost::regex

```
 (((([*])|(((([0-5])?[0-9])((-(([0-5])?[0-9])))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))(,(((([*])|(((([0-5])?[0-9])((-(([0-5])?[0-9])))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?)))* (((([*])|(((((([0-1])?[0-9]))|(([2][0-3])))((-(((([0-1])?[0-9]))|(([2][0-3])))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))(,(((([*])|(((((([0-1])?[0-9]))|(([2][0-3])))((-(((([0-1])?[0-9]))|(([2][0-3])))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?)))* (((((((([*])|(((((([1-2])?[0-9]))|(([3][0-1]))|(([1-9])))((-(((([1-2])?[0-9]))|(([3][0-1]))|(([1-9])))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))|(L)|(((((([1-2])?[0-9]))|(([3][0-1]))|(([1-9])))W))))(,(((((([*])|(((((([1-2])?[0-9]))|(([3][0-1]))|(([1-9])))((-(((([1-2])?[0-9]))|(([3][0-1]))|(([1-9])))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))|(L)|(((((([1-2])?[0-9]))|(([3][0-1]))|(([1-9])))W)))))*)|([?])) (((([*])|((((([1-9]))|(([1][0-2])))((-((([1-9]))|(([1][0-2])))))?))|((((JAN)|(FEB)|(MAR)|(APR)|(MAY)|(JUN)|(JUL)|(AUG)|(SEP)|(OKT)|(NOV)|(DEC))((-((JAN)|(FEB)|(MAR)|(APR)|(MAY)|(JUN)|(JUL)|(AUG)|(SEP)|(OKT)|(NOV)|(DEC))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))(,(((([*])|((((([1-9]))|(([1][0-2])))((-((([1-9]))|(([1][0-2])))))?))|((((JAN)|(FEB)|(MAR)|(APR)|(MAY)|(JUN)|(JUL)|(AUG)|(SEP)|(OKT)|(NOV)|(DEC))((-((JAN)|(FEB)|(MAR)|(APR)|(MAY)|(JUN)|(JUL)|(AUG)|(SEP)|(OKT)|(NOV)|(DEC))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?)))* (((((((([*])|((([0-6])((-([0-6])))?))|((((SUN)|(MON)|(TUE)|(WED)|(THU)|(FRI)|(SAT))((-((SUN)|(MON)|(TUE)|(WED)|(THU)|(FRI)|(SAT))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))|((([0-6])L))|(W)|(([#][1-5]))))(,(((((([*])|((([0-6])((-([0-6])))?))|((((SUN)|(MON)|(TUE)|(WED)|(THU)|(FRI)|(SAT))((-((SUN)|(MON)|(TUE)|(WED)|(THU)|(FRI)|(SAT))))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))|((([0-6])L))|(W)|(([#][1-5])))))*)|([?]))((( (((([*])|((([1-2][0-9][0-9][0-9])((-([1-2][0-9][0-9][0-9])))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?))(,(((([*])|((([1-2][0-9][0-9][0-9])((-([1-2][0-9][0-9][0-9])))?)))((/(([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?([0-9])?[0-9])))?)))*))?) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-03T18:29:14.823

## 完整 cron 表达式的正则表达式

*   正确处理 ' **L** ' 和 ' **#** ' 的情况。
*   特定日期和月份的文本范围
*   仍然允许数字、月份名称和工作日的任何值

```
/^((((\d+,)+\d+|(\d+(\/|-|#)\d+)|\d+L?|\*(\/\d+)?|L(-\d+)?|\?|[A-Z]{3}(-[A-Z]{3})?) ?){5,7})$/ 
```

在以下位置进行测试：[https ://regexr.com/5bdes](https://regexr.com/5bdes)

### 使用非捕获组

用于`(?:`隐藏组。

```
^(?:(?:(?:(?:\d+,)+\d+|(?:\d+(?:\/|-|#)\d+)|\d+L?|\*(?:\/\d+)?|L(?:-\d+)?|\?|[A-Z]{3}(?:-[A-Z]{3})?) ?){5,7})$ 
```

### 把它们放在一起

```
/^((((\d+,)+\d+|(\d+(\/|-|#)\d+)|\d+L?|\*(\/\d+)?|L(-\d+)?|\?|[A-Z]{3}(-[A-Z]{3})?) ?){5,7})$|(@(annually|yearly|monthly|weekly|daily|hourly|reboot))|(@every (\d+(ns|us|µs|ms|s|m|h))+)/ 
```

### 一些测试用例

*   来自：[https ://www.baeldung.com/cron-expressions#2-cron-expression-examples](https://www.baeldung.com/cron-expressions#2-cron-expression-examples)

```
# At 12:00 pm (noon) every day during the year 2017:
0 0 12 * * ? 2017
# Every 5 minutes starting at 1 pm and ending on 1:55 pm and then starting at 6 pm and ending at 6:55 pm, every day:
0 0/5 13,18 * * ?
# Every minute starting at 1 pm and ending on 1:05 pm, every day:
0 0-5 13 * * ?
# At 1:15 pm and 1:45 pm every Tuesday in the month of June:
0 15,45 13 ? 6 Tue
# At 9:30 am every Monday, Tuesday, Wednesday, Thursday, and Friday:
0 30 9 ? * MON-FRI
# At 9:30 am on 15th day of every month:
0 30 9 15 * ?
# At 6 pm on the last day of every month:
0 0 18 L * ?
# At 6 pm on the 3rd to last day of every month:
0 0 18 L-3 * ?
# At 10:30 am on the last Thursday of every month:
0 30 10 ? * 5L
# At 6 pm on the last Friday of every month during the years 2015, 2016 and 2017:
0 0 18 ? * 6L 2015-2017
# At 10 am on the third Monday of every month:
0 0 10 ? * 2#3
# At 12 am midnight on every day for five days starting on the 10th day of the month:
0 0 0 10/5 * ? 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T20:02:22.460

如果不知道您将使用哪个程序来运行它，很难制作一个精确的正则表达式，但这应该可以：

```
(28|\*) (2|\*) (7|\*) (1|\*) (1|\*) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-14T10:36:56.303

为了避免很长的行，您可以拆分 cron 字符串，然后将每个字段与以下模式匹配。**支持值范围、步长和逗号组！**

```
// minute: 0-59
/^(\*|[1-5]?[0-9](-[1-5]?[0-9])?)(\/[1-9][0-9]*)?(,(\*|[1-5]?[0-9](-[1-5]?[0-9])?)(\/[1-9][0-9]*)?)*$/

// hour: 0-23
/^(\*|(1?[0-9]|2[0-3])(-(1?[0-9]|2[0-3]))?)(\/[1-9][0-9]*)?(,(\*|(1?[0-9]|2[0-3])(-(1?[0-9]|2[0-3]))?)(\/[1-9][0-9]*)?)*$/

// monthDay: 1-31
/^(\*|([1-9]|[1-2][0-9]?|3[0-1])(-([1-9]|[1-2][0-9]?|3[0-1]))?)(\/[1-9][0-9]*)?(,(\*|([1-9]|[1-2][0-9]?|3[0-1])(-([1-9]|[1-2][0-9]?|3[0-1]))?)(\/[1-9][0-9]*)?)*$/

// month: 1-12
/^(\*|([1-9]|1[0-2]?)(-([1-9]|1[0-2]?))?)(\/[1-9][0-9]*)?(,(\*|([1-9]|1[0-2]?)(-([1-9]|1[0-2]?))?)(\/[1-9][0-9]*)?)*$/

// weekDay: 0-6
/^(\*|[0-6](-[0-6])?)(\/[1-9][0-9]*)?(,(\*|[0-6](-[0-6])?)(\/[1-9][0-9]*)?)*$/ 
```

它无法验证范围边界，即`0,*/3,6-1/20`在这里可以接受

一个非常有用的网站，可能会有所帮助：[https ://crontab.guru/](https://crontab.guru/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-29T17:50:45.337

这是我的解决方案，因为我发现了这个问题并且答案不符合我的目的。这个 .NET 正则表达式有条件地解析一个 5-7 部分的 cron 语句，包括（afaik）我见过的大多数特殊字符，并且只会填充任何长度的正确捕获（秒组等）。它也不会尝试验证日期输入的数字，即。您可以输入第 67 分钟，这更详细，为了便于阅读，我进行了简化。它也没有锚定在任何地方，您可能需要在行尾进行一些惰性匹配以干净地捕获倍数，但我将其剥离以免混淆。

你会希望这是多行，忽略空格，显式捕获。

```
((?<seconds>\*|([0-5]?[0-9])((-|,|\/)?([0-5]?[0-9])?)+)[ \t]+)?(?#seconds)
(?<minutes>\*|([0-5]?[0-9])((-|,|\/)?([0-5]?[0-9])?)+)[ \t]+(?#minutes)
(?<hours>\*|([0-2]?[0-9])((-|,|\/)?([0-2]?[0-9])?)+)[ \t]+(?#hours)
(?<dom>\*|\?|L|([1-2]?[0-9])((-|,|\/)?([1-2]?[0-9])?)+)\s(?#dayofmonth)
(?<month>((\*)|(1?[0-9])|(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))((\/|,|-|\#)((\*)|(1?[0-9])|(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)))?)\s(?#month)
(?<dow>(\*|\?|L|(MON|TUE|WED|THU|FRI|SAT|SUN)|[1-7])((-|,|\/|L|W|C|\#)?((MON|TUE|WED|THU|FRI|SAT|SUN)|[1-7])?)+)\s(?#day of week)
(?(seconds)(?<year>([1-2][0-9]{3})((,|-|\/)([1-2][0-9]{3}))?)?)(?#year, cond on seconds match) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-20T08:21:43.743

您可以使用以下正则表达式并在输入上使用测试方法来检查输入是否有效。

```
pattern: new RegExp(
        /^((\*(?!(-))|([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])|\*\/([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])(?!(-)))(?!(-\d-)))(([-]{1}(\*(?!(-))|[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]))|([,]{1}(\*(?!(-))|[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|\*\/([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])(?!(-))))(?!(-\d-)))* ((\*(?!(-))|([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])|\*\/([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])(?!(-)))(?!(-\d-)))(([-]{1}(\*(?!(-))|[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]))|([,]{1}(\*(?!(-))|[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|\*\/([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])(?!(-))))(?!(-\d-)))* ((\*(?!(-))|([0-9]|1[0-9]|2[0-3])|\*\/([0-9]|1[0-9]|2[0-3])(?!(-)))(?!(-\d-)))(([-]{1}(\*(?!(-))|[0-9]|1[0-9]|2[0-3]))|([,]{1}(\*(?!(-))|[0-9]|1[0-9]|2[0-3]|\*\/([0-9]|1[0-9]|2[0-3])(?!(-))))(?!(-\d-)))* ((\*(?!(-))|([1-9]|1[0-9]|2[0-9]|3[0-1])|\*\/([1-9]|1[0-9]|2[0-9]|3[0-1])(?!(-)))(?!(-\d-)))(([-]{1}(\*(?!(-))|[1-9]|1[0-9]|2[0-9]|3[0-1]))|([,]{1}(\*(?!(-))|[1-9]|1[0-9]|2[0-9]|3[0-1]|\*\/([1-9]|1[0-9]|2[0-9]|3[0-1])(?!(-))))(?!(-\d-)))* ((\*(?!(-))|([1-9]|1[0-2])|\*\/([1-9]|1[0-2])(?!(-)))(?!(-\d-)))(([-]{1}(\*(?!(-))|[1-9]|1[0-2]))|([,]{1}(\*(?!(-))|[1-9]|1[0-2]|\*\/([1-9]|1[0-2])(?!(-))))(?!(-\d-)))* ((\*(?!(-))|([0-6])|\*\/([0-6])(?!(-)))(?!(-\d-)))(([-]{1}(\*(?!(-))|[0-6]))|([,]{1}(\*(?!(-))|[0-6]|\*\/([0-6])(?!(-))))(?!(-\d-)))*$/
      ), 
```

它是基于以下格式开发的：'second[0-59] minute[0-59] hour[0-23] day-of-month[1-31] month[1-12] day-of-week[0 -6]'

例如，如果您`*,*/5,5-10 5-6,10-12 20 2 * 3-4`在输入中使用类似的东西并运行 pattern.test（您的输入变量），您将得到真实的结果。

上面的正则表达式一般都可以正常工作，但是如果你用大数-小数，比如4-3，最终的结果会为真，这是不可接受的。因此，要解决此问题，您也可以对输入的 onkeyup 或 onblur 属性使用以下函数，并使其等于以下函数名称，例如“dashCheck”来检查这种情况。

```
dashCheck() {
  let dashNumber = 0;
  let text = your input name.pattern;
  if (text.match(/-/g)) {
    dashNumber = text.match(/-/g).length;
  }

  let x = -1;
  for (let i = 0; i < dashNumber; ++i) {
    x = text.indexOf("-", x + 1);
    if (isNaN(text[x + 2]) === false && text[x + 2] !== " ") {
      if (isNaN(text[x - 2]) === false) {
        if (text.slice(x + 1, x + 3) >= text.slice(x - 2, x)) {
        } else {
          return false;
        }
      } else {
      }
    } else if (isNaN(text[x + 1]) === false) {
      if (isNaN(text[x - 2]) === false && text[x - 2] !== " ") {
        return false;
      } else {
        if (text.slice(x + 1, x + 2) >= text.slice(x - 1, x)) {
        } else {
          return false;
        }
      }
    }
  }
  return true;
} 
```

现在，如果您使用正则表达式并同时调用上述函数，您的 cronjob 将被完美地检查和工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-07T20:02:10.230

您当前的正则表达式只能匹配 5 个字符，因为每个字符类只能匹配一个字符。对于您想要匹配数字或`*`的每个位置，每个位置之间有一个或多个空格，您可以使用以下方法来做到这一点：

```
(28|\*) +[2*] +[7*] +[1*] +[1*] 
```

请注意，由于第一个数字有两位数，因此您需要使用交替而不是字符类。

您可能还想在您的正则表达式中添加一些锚点，以便它不只匹配字符串的一部分，如果有必要添加`^`到开头和`$`结尾。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-07T20:03:20.403

做可能可行的最简单的事情

```
"^28 2 7 1 1$|^28 2 7 1 \*$|^28 2 7 \* \*$|^28 2 \* \* \*$|^28 \* \* \* \*$|^\* \* \* \* \*$" 
```

[http://rubular.com/r/Z0hfT5X9K8](http://rubular.com/r/Z0hfT5X9K8)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-16T11:30:24.893

不确定这是否可以帮助某人，但这里有一些正则表达式来检查时间参数值，而没有写出工作日名称的功能。

```
//string validation
function allowed_characters($value, $mode){
    switch ($mode) {
        case '0': //0-59
            $preg_code = "^(((([0-5]?[0-9]|60)(-([0-5]?[0-9]|60)){0,1}?)|\*)(,([0-5]?[0-9]|60)((-([0-5]?[0-9]|60)){0,1}?))*?)$";
            break;
        case '1': //0-23
            $preg_code = "^(((([0-1]?[0-9]|2[0-4])(-([0-1]?[0-9]|2[0-4])){0,1}?)|\*)(,([0-1]?[0-9]|2[0-4])((-([0-1]?[0-9]|2[0-4])){0,1}?))*?)$";
            break;
        case '2': //1-31
            $preg_code = "^(((([0-2]?[0-9]|3[0-1])(-([0-2]?[0-9]|3[0-1])){0,1}?)|\*)(,([0-2]?[0-9]|3[0-1])((-([0-2]?[0-9]|3[0-1])){0,1}?))*?)$";
            break;
        case '3': //0-12
            $preg_code = "^(((([0]?[0-9]|1[0-2])(-([0]?[0-9]|1[0-2])){0,1}?)|\*)(,([0]?[0-9]|1[0-2])((-([0]?[0-9]|1[0-2])){0,1}?))*?)$";
            break;
        case '4': //0-6
            $preg_code = "^(((([0]?[[0-7])(-([0]?[0-7])){0,1}?)|\*)(,([0]?[0-7])((-([0]?[0-7])){0,1}?))*?)$";
            break;
        default:
            return false;
            break;
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-16T12:49:50.357

### 单个表达式的正则表达式（仍然简单但功能强大）

*   目前没有“ **L** ”和“ **#** ”案例。
*   没有特定的数字范围

*   [https://regex101.com/r/k7U1l7/1](https://regex101.com/r/k7U1l7/1)

```
^(?:(?:(?:\d+-\d+\/\d+|\d+(?:[-,\/]\d+)?|\*\/\d+)(?:,(?:\d+-\d+\/\d+|\d+(?:[-,\/]\d+)?|\*\/\d+))*)|\*)$ 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-06T14:08:18.423

[@KyleMit](https://stackoverflow.com/a/57639657/9595106) answer's 是一个很好的起点，但我发现他的正则表达式也捕获了一些[无效的用例](https://regex101.com/r/d4WKkP/1)，例如：

*   *-* * * * *
*   *1 * 1 * *
*   1* * 1 * *

所以我更新了他的正则表达式：

```
/(^((\*\/)?([1-5]?[0-9])((\,|\-|\/)\d+)*|\*)\s((\*\/)?((2[0-3]|1[0-9]|[0-9]))((\,|\-|\/)\d+)*|\*)\s((\*\/)?([1-9]|[12][0-9]|3[01])((\,|\-|\/)\d+)*|\*)\s((\*\/)?([1-9]|1[0-2])((\,|\-|\/)\d+)*|\*)\s((\*\/)?[0-6]((\,|\-|\/)\d+)*|\*)$)|@(annually|yearly|monthly|weekly|daily|hourly|reboot)/ 
```

**现在它[按预期工作](https://regex101.com/r/3hkz4r/1)**。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-16T13:00:00.720

对于想要验证允许值的人

```
^(((([1-5]?[0-9],)+[1-5]?[0-9]|([1-5]?[0-9](\/|-)[1-5]?[0-9](\/\d+)?)|[1-5]?[0-9]|\*(\/\d+)?) )((([1-5]?[0-9],)+[1-5]?[0-9]|([1-5]?[0-9](\/|-)[1-5]?[0-9](\/\d+)?)|[1-5]?[0-9]|\*(\/\d+)?) )((((2[0-3]|1[0-9]|[0-9]),)+(2[0-3]|1[0-9]|[0-9])|((2[0-3]|1[0-9]|[0-9])(\/|-)(2[0-3]|1[0-9]|[0-9])(\/\d+)?)|(2[0-3]|1[0-9]|[0-9])|\*(\/\d+)?) )((((3[01]|[12][0-9]|[1-9]),)+(3[01]|[12][0-9]|[1-9])|((3[01]|[12][0-9]|[1-9])(\/|-)(3[01]|[12][0-9]|[1-9])(\/\d+)?)|(3[01]|[12][0-9]|[1-9])|\*(\/\d+)?) )((((1[0-2]|[1-9]),)+(3[01]|[12][0-9]|[1-9])|((1[0-2]|[1-9])(\/|-)(1[0-2]|[1-9])(\/\d+)?)|(1[0-2]|[1-9])|[A-Z]{3}|\*(\/\d+)?) )((([0-6],)+[0-6]|([0-6](\/|-)[0-6]((\/|-)\d+)?)|[0-6]|\*(\/\d+)?|[A-Z]{3}?)))$|(@(annually|yearly|monthly|weekly|daily|hourly|reboot))|(@every (\d+(ns|us|µs|ms|s|m|h))+) 
```

# jquery - TypeError: $(...) is null error in firebug 但代码适用于 jsFiddle

> ID：14203125
> 
> 赞同：2
> 
> 时间：2013-01-07T19:59:40.917
> 
> 标签：jquery, typeerror, blackboard

您可以在以下位置查看我的 js（以及相关的 html 和 css）：http: [//jsfiddle.net/twsx7/9/](http://jsfiddle.net/twsx7/9/)

我正在对 Blackboard Learn 9.1 进行调整（因此，如果有人使用过学习管理系统或调整构建块，他们可能已经对我遇到此问题的原因有所了解）。

我所做的更改涉及检查应用了哪些课程主题，然后基于该主题将类添加到表中，以便表的样式与主题相匹配。

当我在我们的服务器上运行它时，我得到错误**$(...) is null** 当它到达**var theme_id = $(".current").attr("id");** . JS 的其余部分工作（请注意，JS 的顶部通常是页面中包含的另一个文件，无法将其链接到 jsfiddle，因为它在经过身份验证的服务器上）

我对这个文件的贡献是（以及代码失败的地方）：

第 242 行

```
$unitMap.addClass(getTheme()); 
```

第 381 - 385 行

```
function getTheme() {
    var theme_id = $(".current").attr("id"); // error occurs this line
    var theme = $("#"+theme_id).find("a").html();
    return theme.toUpperCase();
} 
```

这是我对 jQuery 的第一次尝试，所以我担心的一个问题是我对编写代码的 jQuery 版本使用了错误的语法。

当您选择包含调整时，我在代码中找到了以下内容：

```
<script src='/webapps/qut-tweakbb-BBLEARN/jquery.js' type='text/javascript'></script><script src='/webapps/qut-tweakbb-BBLEARN/jquery.tweakSetup.js' type='text/javascript'></script> 
```

jsFiddle 顶部的代码来自**jquery.tweakSetup.js**

*我希望我刚刚为 jQuery 的版本使用了错误的标记（尽管我*无法找到原始代码编写的版本）任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T20:09:34.600

1.  在运行自定义脚本之前确保已加载 jQuery
2.  您是否从 JSFiddle 复制代码然后立即使用它？小提琴代码有腐败的习惯。经常被`;`定义为无效字符。删除它并自己重新输入。

**补充**： 3\. 正如 John Fontaine 指出的，jQuery 可能与另一个库发生冲突。要绕过这个，你可以使用 jQuery noConflict 模式。[文档](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)对此非常清楚，但我会举一些例子，以防万一。

最好的方法如下，或者至少这是我的偏好：

使用另一个变量代替`$`，例如`$j`。通过这样做，您和您的代码的任何其他修订者都清楚该代码依赖于另一个库而不是`$`.

**示例**：

```
var $j = jQuery.noConflict();

// Use jQuery via $j(...)
$j(document).ready(function () {
  var secondary = $j("#secondary-footer");
  secondary.hide().addClass("fixed").fadeIn("fast");

  $j(window).scroll(function () {
    if (secondary.offset().top >= ($j(document).height() - 350)) {
      secondary.removeClass("fixed");
    } else if (secondary + ":not('.fixed')") {
      secondary.addClass("fixed");
    }
  });
}); 
```

这种方法的“危险”是你有时可能会忘记使用这个变量。你可以做的是使用普通的美元符号开始，当你完成后，进行查找替换。

可能是最直接的方法：

```
jQuery(function ($) {
  var secondary = $("#secondary-footer");
  secondary.hide().addClass("fixed").fadeIn("fast");

  $(window).scroll(function () {
    if (secondary.offset().top >= ($(document).height() - 350)) {
      secondary.removeClass("fixed");
    } else if (secondary + ":not('.fixed')") {
      secondary.addClass("fixed");
    }
  });
}); 
```

这允许您**在该块**中使用 jQuery ，即以 . 开头`jQuery(function ($) {`和以 . 结尾的块`});`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:53:19.167

Blackboard Learn在大多数页面上使用prototypejs [http://www.prototypejs.org/库。](http://www.prototypejs.org/)如果您想使用 JQuery 脚本和插件，您必须使用无冲突模式并调用您的 $('') 样式调用作为 JQuery('') 调用。[请参阅http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)上的 JQuery 文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-27T06:40:05.227

我有几个使用**jQuery.noConflict() 在同一页面上运行的脚本；**

```
var $j = jQuery.noConflict();

function getTheme() {
    var theme_id = $j(".current").attr("id"); // error occurs this line
    var theme = $j("#"+theme_id).find("a").html();
    return theme.toUpperCase();
} 
```

只需使用**$j** where **$**或者您可以使用**jQuery.noConflict()创建更多**

# java - 将包含 size_t 的结构从 Java 传递到 OpenCL

> ID：14203128
> 
> 赞同：1
> 
> 时间：2013-01-07T19:59:58.453
> 
> 标签：java, struct, opencl, lwjgl

for 的参数之一`CL12.clCreateImage()`是`ByteBuffer`包含这个[struct](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/imageDescriptor.html)。我将使用[OpenCL 内核参数](https://stackoverflow.com/questions/8778070/opencl-kernel-arguments)中描述的方法来传递结构，但不确定将什么用于 type 的参数`size_t`。从 Java 中，当我将参数放入 中时，如果我使用 32 位系统`ByteBuffer`，我应该使用（有符号 32 位）还是使用 64 位系统时应该使用（有符号 64 位）？`int``long`

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-07T20:26:36.787

size_t 类型是“无符号整数”。您绝对可以使用 int 类型，但要确保它不是负数，否则没有意义。

考虑到上述情况时，您不必担心 32 位和 64 位系统，也不需要使用很长的

所以你可以做类似的事情

```
int param = value; //this is the value to pass
if (param >= 0) {
  pclFunc((size_t)param)
} else {
  //see how you want to handle this
} 
```

# api - Github API - 尝试访问 /users 的多个页面

> ID：14203129
> 
> 赞同：1
> 
> 时间：2013-01-07T19:59:59.087
> 
> 标签：api, github

我正在玩 Github 的 API，我注意到它们允许任何人请求所有按时间顺序注册的用户。

```
https://api.github.com/users 
```

[http://developer.github.com/v3/users/](http://developer.github.com/v3/users/)

我试图获得第二页，但由于某种原因，他们的分页对我不起作用。我不确定我做错了什么。

```
https://api.github.com/users?page=2
https://api.github.com/users?start_page=2 
```

[http://developer.github.com/v3/](http://developer.github.com/v3/)在“分页”下。

有人知道这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:56:00.780

查看`https://api.github.com/users`资源的返回 HTTP 标头。具体来说，寻找`Link`标题，它看起来像这样：

```
Link:<https://api.github.com/users?since=135>; rel="next", <https://api.github.com/users{?since}>; rel="first" 
```

因此，您需要做的是执行 HTTP GET`https://api.github.com/users?since=135`以获取下一页。之后，`Link`再次检查标题，您将进入下一页等。还要注意提供的 URI 模板`https://api.github.com/users{?since}`，它使您可以从任何`id`.

# android - Android：我想在 ListView 选择更改后隐藏进度条

> ID：14203130
> 
> 赞同：0
> 
> 时间：2013-01-07T20:00:04.490
> 
> 标签：android, progress-bar

由于 ListView 中的项目内容有点复杂，我的 ListView 需要几秒钟才能滚动到特定项目。所以我想添加一个 Indeterminate 进度条以使其流畅。

要滚动到特定项目，我使用 listView.setSelection(n) 来做到这一点。然后我倾向于使用“setOnItemSelectedListener”事件处理程序来隐藏滚动后的进度条。但是事件处理程序没有被调用。

可能是我的概念完全错误，我不知道该怎么做（像这种情况下使用进度条）。如果您向我展示这个概念，也欢迎提供更多详细信息。

非常感谢。

```
public class ListViewAdapter extends BaseAdapter {

private ProgressBar progressBar;
private Handler progressBarHandler = new Handler();
boolean isProgressBarDone;

private void jumpToSelectedItem(View arg0) {
        ...
        listView.setSelection(selectedDaYunItem);
}

ListView listView = (ListView)((MyActivity)cellView.getContext()).findViewById(R.id.listview);
listView.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        // onItemSelected event handler has not triggered.
        @Override
        public void onItemSelected(AdapterView<?> arg0,
                View arg1, int arg2, long arg3) {
            isProgressBarDone = true;
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub                  
        }
});

public class LiouYunCellAdapter {

    cellView.setOnTouchListener(new View.OnTouchListener() {

        // It takes a little seconds to operate.
        private void jumpToSelectedItem(View arg0) {
            ....
        }

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                progressBar = findProgressBar(arg0);

                // ProgressBar start.
                new Thread(new Runnable() {
                    public void run() {
                        isProgressBarDone = false;
                        while (!isProgressBarDone) {                                                
                            // Update the progress bar
                            progressBarHandler.post(new Runnable() {
                                public void run() {
                                            progressBar.setVisibility(View.VISIBLE);
                                    }
                                }
                            });                                           
                        }                                                                               
                    }).start();

                    jumpToSelectedItem(arg0);  
                }               
            }

            return true;
        }
    });      
    // End setOnTouchListener().

}    
// end class LiouYunCellAdapter. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:02:10.543

好的，我没有看到您触发任何 onclick excpet 将 isProgressBarDone 设置为 true。您需要做的是使用下面的格式（您已经拥有），但将您的代码滚动到那里。OnClick 您将获得所选内容的位置。然后使用该 id 触发滚动。您还应该在此处启动进度条并在该方法结束时结束它。现在你的进度条在它自己的线程上运行，我没有看到任何可以阻止它的东西。

listView.setOnItemClickListener(new OnItemClickListener() {

```
 @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,long id) {

            //You will get the positino of the item clicked here
            //This is where your code to scroll should go as well as
            //starting the progress bar
        }

}); 
```

看看我在下面链接到的示例。它处理在加载自定义列表视图时使用进度对话框，但我认为这个概念适用于您的代码。您需要做的是修复调用进度条并将其关闭时的问题。

[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

# python - Pygame 闪烁

> ID：14203132
> 
> 赞同：1
> 
> 时间：2013-01-07T20:00:13.503
> 
> 标签：python, pygame

Pygame 一直在闪烁，即使它调用了`pygame.display.update`一次。

我相信问题出在`screen.fill`(src.py, function `clear`)，但没有它就无法工作。

编辑：

完整代码：在[http://mindgamestore.tk/pygame_code/找到](http://mindgamestore.tk/pygame_code/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:50:47.043

解决了问题：在函数`pygame.display.flip`上被多次调用。`idraw`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:15:39.387

问题是pygame需要在做任何事情之前清除屏幕。

所以：在你的 while 循环中，在屏幕上绘制任何东西之前，用一种颜色填充屏幕。

```
screen.fill([255,255,255]) 
```

如果你有背景图片，只需在上面的代码之后绘制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-04T19:49:22.763

恢复它以提供替代解决方案。

因此，最后，如果没有任何效果，可以简单地删除`pygame.HWSURFACE`和`pygame.DOUBLEBUF`从`pygame.display.set_mode`. 这对我来说效果很好。

# java - getResource() 没有在类路径上找到资源

> ID：14203138
> 
> 赞同：2
> 
> 时间：2013-01-07T20:00:31.303
> 
> 标签：java, maven, classpath, classloader

我已经在 java SE 中设置了基本的 maven 项目，并带有一个资源：

```
main 
  -java
  -resources
    -config -> database.properties 
```

现在因为我不想在最终的 jar 中使用这个资源，所以我定义：

```
 <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <excludes>
                    <exclude>config/database.properties</exclude>
                </excludes>
            </configuration>
            <executions>
                <execution>
                    <id>make-jar-ultimateParser</id>
                    <phase>package</phase>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/dist</outputDirectory>
                        <finalName>testApp</finalName>
                        <archive>
                            <compress>false</compress>
                            <!-- Manifest - MainClass & ClassPath -->
                            <manifest>
                                <mainClass>aa.bb.Class</mainClass>
                                <addClasspath>true</addClasspath>
                                <classpathPrefix>lib/</classpathPrefix>
                            </manifest>
                            <manifestEntries>
                                <Class-Path>config/database.properties</Class-Path>
                            </manifestEntries>
                        </archive>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <!-- Copy configuration files -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.6</version>
            <executions>
                <execution>
                    <id>copy-resources</id>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy-resources</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/dist/config</outputDirectory>
                        <resources>
                            <resource>
                                <directory>src/main/resources/config</directory>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

因此资源位于类路径中，并且包含资源的目录被复制到最终的 jar 中。

我的清单如下所示：“Class-Path: config/database.properties”

但我无法阅读它：

```
String db = "/config/database.properties";
properties = new Properties();
properties.load(getClass().getResourceAsStream(db)); 
```

我尝试了绝对/相对路径，`getClass()/ClassLoader`. 没有什么。它在 NetBeans 中完美运行，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:31:40.460

您误解了 Maven 资源插件的作用。它只是将资源（可能带有转换）复制到构建输出目录中。然后将它们包含在构建工件（JAR、WAR 等）中。

为了使这项工作（使用`Class-Path`清单条目引用 JAR 的目录），您需要单独分发配置文件。或者使用 a 引用它`File`，而不用打扰类路径。

更好的方法是将应用程序作为程序集分发，其中包含核心应用程序、任何依赖项和配置文件。这通常会打包为 ZIP 文件，用户将其解压缩以进行安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T01:29:10.500

我不明白你为什么要排除它。Maven 使用自己的资源目录。项目 |-- pom.xml `-- src` -- main `- 资源，它使程序员的生活更轻松。当您使用这种方式时，无需获取类补丁或其他。

# networking - 远程主机上的 Debian KVM 桥接网络

> ID：14203139
> 
> 赞同：0
> 
> 时间：2013-01-07T20:00:33.593
> 
> 标签：networking, debian, kvm

我有一台专用服务器，我想在使用 KVM 时运行一些虚拟机。

我正在尝试设置桥接网络，以便可以使用专用 IP 从外部访问虚拟机。

我尝试使用[这篇文章](http://wiki.debian.org/BridgeNetworkConnections)执行此操作，但是一旦我打开 br0，我就会失去通过 ssh 与我的服务器的连接（以及与此相关的任何其他内容）。

这是我的 /etc/network/interfaces：

```
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
allow-hotplug eth0
iface eth0 inet static
        address 66.147.230.23
        netmask 255.255.255.0
        network 66.147.230.0
        broadcast 66.147.230.255
        gateway 66.147.230.1
        # dns-* options are implemented by the resolvconf package, if installed
        dns-nameservers 208.67.222.222 208.67.220.220
        dns-search samgwydir.com

# bridge
auto br0
iface br0 inet static
#       address 216.120.250.44
#       netmask 255.255.255.0
#       network 216.120.250.0
#       broadcast 216.120.250.255
#       gateway 216.120.250.1
        address 192.168.1.1
        network 192.168.1.0
        netmask 255.255.255.0
        broadcast 192.168.1.255
        gateway 192.168.1.254
        bridge_ports eth0
        bridge_stp off
        bridge_fd 0 
```

我已经注释掉了一个失败的设置，它让 br0 使用专用 IP，而是尝试使用本地 IP 无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:54:34.147

不要配置`eth0`，就像`eth0`桥接设备（使用 IP `192.168.1.1`）一样：

```
auto lo
iface lo inet loopback

# The primary network interface
allow-hotplug eth0
iface eth0 inet manual

# bridge
auto br0
iface br0 inet static
        address 192.168.1.1
        network 192.168.1.0
        netmask 255.255.255.0
        broadcast 192.168.1.255
        gateway 192.168.1.254
        bridge_ports eth0
        bridge_stp off
        bridge_fd 0 
```

`br0`如果您希望您的主机是多宿主的，您可以分配多个 IP 地址

# dart - 是什么导致了 NoSuchMethodErrorImplementation？

> ID：14203141
> 
> 赞同：2
> 
> 时间：2013-01-07T20:00:47.730
> 
> 标签：dart, dart-webui

我收到以下错误：

```
Stack Trace: #0      NoSuchMethodErrorImplementation._throwNew (dart:core-patch:641:3)
#1      init_autogenerated (http://127.0.0.1:3030/C:/dev/CalendarDatePicker/CalendarDatePicker/web/out/CalendarDatePicker.dart:43:26)
#2      main (http://127.0.0.1:3030/C:/dev/CalendarDatePicker/CalendarDatePicker/web/out/CalendarDatePicker.html_bootstrap.dart:7:30) 
```

这是我的视图代码：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>CalendarDatePicker</title>
    <link rel="stylesheet" href="CalendarDatePicker.css">
  </head>
  <body>
    <element name="calendar" constructor="Calendar" extends="div">
      <template>
        <table>
          <tr>
            <th>Sun</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
          </tr>
        </table>
      </template>
    </element>
    <div is="calendar"></div>
    <script type="application/dart" src="CalendarDatePicker.dart"></script>
    <script type="text/javascript" src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

这是我的主要脚本：

```
import 'dart:html';
import 'dart:core';
import 'package:web_ui/web_ui.dart';

void main() {

}

class Calendar extends WebComponent
{

} 
```

此行的自动生成代码失败：

```
new Calendar.forElement(__e0)
  ..created_autogenerated() //Exception: No such method: 'Calendar.forElement'
  ..created()
  ..composeChildren(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:23:05.920

您应该更改`<element>` `name`它，使其以 开头`x-`：

```
<element name="x-calendar" constructor="Calendar" extends="div"> 
```

和`<div is="calendar"></div>`到：

```
<x-calendar></x-calendar> 
```

`is=`或者，如果您愿意，也可以使用语法。

这些是建议的更改，但不能解决问题。这将起作用的方式是，如果

```
class Calendar extends WebComponent {} 
```

进入`<element>`自身（作为`<template>``<script>`标签） 。

另一种方法是将您的组件代码隔离在一个单独的文件中，并使用正确的语法显式导入它。像这样的东西：

```
<link rel="components" href="calendar_component.html"> 
```

因此，我已将您的应用程序分解为 4 个文件。`calendarPicker.html`，主 html 文件，如下所示：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>CalendarDatePicker</title>
    <link rel="stylesheet" href="calendarDatePicker.css">
    <link rel="components" href="calendar_component.html">
  </head>
  <body>
    <x-calendar></x-calendar>

    <script type="application/dart" src="calendarDatePicker.dart"></script>
    <script type="text/javascript" src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

`calendarDatePicker.dart`非常小：

```
import 'dart:html';
import 'package:web_ui/web_ui.dart';

void main() {} 
```

您的组件代码 ( `calendar_component.dart`) 具有以下代码：

```
<!DOCTYPE html>
<html>
  <body>
    <element name="x-calendar" constructor="CalendarComponent" extends="div">
      <template>
        <table>
          <tr>
            <th>Sun</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
          </tr>
        </table>
      </template>
      <script type="application/dart" src="calendar_component.dart"></script>
    </element>
  </body>
</html> 
```

随附的 dart 文件 ( `calendar_component.dart`) 中包含组件类：

```
import 'package:web_ui/web_ui.dart';

class CalendarComponent extends WebComponent {} 
```

希望这可以帮助。我使用您提供的代码构建了应用程序并复制了错误；然后，我使用此处显示的代码对其进行了重建。它运行没有任何错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T00:52:41.190

正如 Shailen 所说，`<element>`标签应该包含一个`<script>`定义日历类型的标签（可能带有 src= 属性）。

更多信息在这里： [http ://www.dartlang.org/articles/dart-web-components/#component-declaration](http://www.dartlang.org/articles/dart-web-components/#component-declaration)

我还提交了错误[https://github.com/dart-lang/web-ui/issues/297](https://github.com/dart-lang/web-ui/issues/297)，因为您不应该收到 noSuchMethod 错误:)

# c# - DIDISOFT - 解密时打开 PGP 空指针异常

> ID：14203143
> 
> 赞同：0
> 
> 时间：2013-01-07T20:00:59.403
> 
> 标签：c#, pgp

我正在使用来自 didisoft 的 OpenPGP 来加密和解密文件。我有一个加密文件和与加密密钥对应的私钥。但是当我尝试使用 DecryptFile () 方法时，我得到一个空指针异常。我无法弄清楚问题是什么。任何帮助，将不胜感激。代码：

```
public void decryptFile(string filename, string destPath)

string password = "xxx";
                string encFile = System.IO.Path.GetTempPath() + filename;
                string keyFile = ConfigurationManager.AppSettings["DecryptKeyFile"].ToString();
                PGPLib pgpDecrypter = new PGPLib();
                File.Create(destPath + filename);
                string a = pgpDecrypter.DecryptFile(encFile, keyFile, password, destPath+filename);  // I get the error on this line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:24:12.080

此支持请求已在[滴滴软件官方支持论坛上处理](https://groups.google.com/forum/?fromgroups=#!topic/didisoft_forum/GnPCGkh4Jh8)

DidiSoft 产品的主要支持渠道是通过电子邮件发送至 support@didisoft.com，并保证在格林威治标准时间晚上 8:00 / 中部标准时间下午 3:00 之前发出的支持请求在当天回复

其他支持方法可以在[DidiSoft 支持信息页面上](http://didisoft.com/support/)找到。

# asp.net-mvc-3 - MVC 3 何时填充 Controller.ViewData.ModelState

> ID：14203145
> 
> 赞同：3
> 
> 时间：2013-01-07T20:01:04.707
> 
> 标签：asp.net-mvc-3

目前我正在阅读 MVC 3 源代码以尝试查找何时设置了 Controller 的 ModelState。

从我可以从 Controller.cs 中看到的代码中，ModelState 属性被委托给其 ViewData 的 ModelStata 属性，如下面的代码：

```
 public ModelStateDictionary ModelState {
        get {
            return ViewData.ModelState;
        }
    } 
```

但是我只能看到 ViewData.ModelState 似乎只能通过 Controller.cs 中的 ValidateModel() 方法填充，如下面的代码：

```
 protected internal void ValidateModel(object model, string prefix) {
        if (!TryValidateModel(model, prefix)) {
            throw new InvalidOperationException(
                String.Format(
                    CultureInfo.CurrentCulture,
                    MvcResources.Controller_Validate_ValidationFailed,
                    model.GetType().FullName
                )
            );
        }
    } 
```

在上面的代码中， TryValidateModel() 方法将间接填充 Controller.ModelState ，如下面的代码：

```
 foreach (ModelValidationResult validationResult in ModelValidator.GetModelValidator(metadata, ControllerContext).Validate(null)) {
            ModelState.AddModelError(DefaultModelBinder.CreateSubPropertyName(prefix, validationResult.MemberName), validationResult.Message);
        } 
```

但是我搜索了所有的源代码，并没有找到任何调用 ValidateModel() 方法的地方，而且从访问修饰符来看，这个方法是受保护的，我想知道 MVC 3 框架在请求处理过程中是如何调用这个方法的，或者ValidateModel() 只应该由继承的控制器类中的用户调用。

# c# - .NET MVC：如何让模型绑定器将 null 分配给列表属性？

> ID：14203150
> 
> 赞同：1
> 
> 时间：2013-01-07T20:01:18.433
> 
> 标签：c#, asp.net-mvc, model-binding, defaultmodelbinder

我有一个这样的模型：

```
class Model {
    public IList<Item> Items { get; set; }
}

class Item { public int Id { get; set; } } 
```

我正在向以模型作为参数的操作方法发送请求。该请求包含以下键值对：" `Items=" (i. e.` `Items=null`)。默认模型绑定器将 Items 设置为 1`null`项的列表，我希望列表属性本身为`null`（或至少为空）。

有没有办法做到这一点？

显然，我可以进行某种自定义模型绑定，但我更喜欢使用默认模型绑定器的解决方案（也许修改请求的格式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:24:00.210

假设您使用 jQuery，我将扩展它以能够将表单序列化为对象

```
$.fn.serializeObject = function()
{
var o = {};
var a = this.serializeArray();
$.each(a, function() {
    if (o[this.name] !== undefined) {
        if (!o[this.name].push) {
            o[this.name] = [o[this.name]];
        }
        o[this.name].push(this.value || '');
    } else {
        o[this.name] = this.value || '';
    }
});
return o;
}; 
```

然后我可以简单地将表单放入一个变量中：

```
var data = $('form').serializeObject(); 
```

做我的测试以确定我是否要删除属性

```
if(true){
    delete data.Items;
} 
```

然后正常继续使用ajax提交数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:04:48.363

您可以使用您想要的行为向类添加一个属性。

```
public property MySanitizedItemsList
{
    get
    {
        if (Items.Length == 1 && Items[0] == null)
            return null
        else
            return Items;
    }
} 
```

# iis-6 - WIN2003/IIS6 Ping 到唯一 IP 超时的站点

> ID：14203154
> 
> 赞同：0
> 
> 时间：2013-01-07T20:01:39.400
> 
> 标签：iis-6, windows-server-2003

我在运行其他站点的服务器上添加了一个新站点，一些“全部未分配”（那些不需要 SSL）并且是具有唯一 IP 的第 4 个站点（这些需要 SSL）。所有其他站点，包括它们的 SSL（如果适用）都在工作。

当我从网络中 ping LAN IP 时，我得到“请求超时”。对其他唯一 IP 的 Ping 会得到响应。

我试过了：

*   其他唯一的 LAN IP
*   在 IIS6 中创建了一个新网站
*   创建了一个“测试”文件夹并将 IIS 指向那里
*   系统或应用程序的事件查看器日志不显示错误消息。

每次变化后我都重新启动了 IIS。

*   据我所知，从网络内部 ping 不会通过我的防火墙，所以我没有被它愚弄。
*   一个 ASP.NET 版本问题会 ping，但会引发浏览器错误，所以我没有上当。

关于如何调试此问题的任何想法？

欢迎任何建议，并提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:08:34.870

您是否已将 IP 地址添加到 Windows 机器上的网络配置中？Ping 与您的 Web 服务器配置或 IIS 没有任何关系。

调试：确保在控制面板 -> 网络 -> TCP/IP 配置下，您的服务器输入了所需的 IP，并且您的子网掩码条目正确。

从命令行 ping，所以 start -> run -> cmd 然后在提示 ping -ip address-

确保您的 Windows 防火墙允许 ICMP 数据包进出。如果您的网络通过单独的防火墙保护免受 Internet 的影响，您可以关闭 Windows 防火墙进行测试。

# sql - SQL在一行中按类别连接字符串

> ID：14203158
> 
> 赞同：1
> 
> 时间：2013-01-07T20:02:07.813
> 
> 标签：sql, sql-server, sql-server-2005, string-concatenation

我在 SQL Server 2005 中有一些表：

*   `Product`：`ID, Name`
*   `Category`：`ID, Name`
*   `Tags`：`ID, tagName`
*   `ProductCategory`：`productId, tagId`
*   `CategoryTags`：`categoryId, tagId`

基本上我需要一个查询，它将在一行上显示与每个产品关联的标签的类别和列表。

例如，有 3 个类别：`Animals, Countries, Color`.

每一个都有一堆标签。

假设产品 1 有一堆相关的标签，例如：`bird, duck, dog, canada, russia, japan, black, red, white`

我需要查询结果采用以下格式：

```
productId, [Category:tag,tag,tag;Category:tag,tag,tag:Category:tag,tag,tag]

1, [Animal:bird,duck,dog;Country:canada,russia,japan;Color:black,red,white] 
```

方括号中的文本应位于 SQL 返回的一列中。

我在这里发现了类似的东西：[Concatenate many rows into a single text string?](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

但我需要更进一步，将它们全部放在一行上，而不是在不同的行上返回不同的类别。

有点难以解释，但希望你能明白。

这可能吗？

提前致谢。

更新：感谢大家的帮助和投入。真的很感激！到目前为止，这是我所拥有的，很接近，但还没有。也许它会帮助你为我弄清楚：D

[http://sqlfiddle.com/#!3/eed14/5](http://sqlfiddle.com/#!3/eed14/5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:12:39.870

[SQL小提琴](http://sqlfiddle.com/#!3/e1019/1)

**MS SQL Server 2008 架构设置**：

```
create table Product
(
  ID int, 
  Name varchar(10)
)

create table Category
(
  ID int, 
  Name varchar(10)
)

create table Tags
(
  ID int, 
  Name varchar(10)
)

create table ProductCategory
(
  productId int,
  categoryId int
)

create table CategoryTags
(
  categoryId int, 
  tagId int
)

insert into Product values(1, 'Product 1')

insert into Category values(1, 'Animals')
insert into Category values(2, 'Countries')
insert into Category values(3, 'Color')

insert into Tags values(1, 'Bird') 
insert into Tags values(2, 'Duck') 
insert into Tags values(3, 'Dog') 
insert into Tags values(4, 'Candada') 
insert into Tags values(5, 'Russia') 
insert into Tags values(6, 'Japan') 
insert into Tags values(7, 'Black') 
insert into Tags values(8, 'Red') 
insert into Tags values(9, 'White') 

insert into ProductCategory values(1, 1)
insert into ProductCategory values(1, 2)
insert into ProductCategory values(1, 3)

insert into CategoryTags values(1, 1)
insert into CategoryTags values(1, 2)
insert into CategoryTags values(1, 3)
insert into CategoryTags values(2, 4)
insert into CategoryTags values(2, 5)
insert into CategoryTags values(2, 6)
insert into CategoryTags values(3, 7)
insert into CategoryTags values(3, 8)
insert into CategoryTags values(3, 9) 
```

**查询 1**：

```
select P.ID,
       P.Name,
       (
       select ';'+C.Name+':'+
              (
              select ','+T.Name
              from CategoryTags as CT
                inner join Tags as T
                  on CT.tagId = T.ID
              where CT.categoryId = C.ID
              for xml path(''), type
              ).value('substring(text()[1], 2)', 'varchar(max)') 
       from ProductCategory as PC
         inner join Category as C
           on PC.categoryId = C.ID
       where PC.productId = P.ID
       for xml path(''), type
       ).value('substring(text()[1], 2)', 'varchar(max)') as ColumnName
from Product as P 
```

**[结果](http://sqlfiddle.com/#!3/e1019/1/0)**：

```
| ID |      NAME |                                                                 COLUMNNAME |
-----------------------------------------------------------------------------------------------
|  1 | Product 1 | Animals:Bird,Duck,Dog;Countries:Candada,Russia,Japan;Color:Black,Red,White | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:30:51.320

只是给一个示例，请试试这个：嗯，这是在 MYSQL 中完成的，它具有最简单的`group_concat`功能......不过。因为您没有提到您正在使用哪个 RDBMS。

```
select x.productid, group_concat(c.name), 
group_concat(x.tags)
from (
select p.productid, ct.categoryid,
group_concat(t.tagname) as tags
from productcategory p
left join tags t
on t.id = p.tagid
left join  
categorytags ct
on t.id = ct.tagid
group by p.productid, ct.categoryid) x
left join category c
on c.id = x.categoryid
group by x.productid
; 
```

结果：

```
PRODUCTID   GROUP_CONCAT(C.NAME)    GROUP_CONCAT(X.TAGS)
1       cat1,cat2                   tag2,tag1,tag1
2       cat1                        tag2 
```

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/72550/11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:08:51.333

这是将这些数据放入单个字符串的一种非常丑陋的方式。但是你可以使用这样的东西：

```
select distinct 
  p.name ProductName,
  STUFF((SELECT distinct ', ' + 
           c.name +':'+ STUFF((SELECT DISTINCT ', ' + Name 
                               FROM tags t
                               LEFT JOIN CategoryTags ct
                                  on t.id = ct.tagid
                               WHERE c.id = ct.categoryid
                               FOR XML PATH('')), 1, 1, '')
         FROM category c 
         LEFT JOIN CategoryTags ct
           ON ct.categoryid = c.id
         LEFT JOIN productcategory pc
           ON pc.tagid = ct.tagid
         WHERE p.id = pc.productid
         FOR XML PATH('')), 1, 1, '')  List
from product p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/27477/55)

结果是：

```
| PRODUCTNAME |                                                                               LIST |
----------------------------------------------------------------------------------------------------
|        Test |  Animal: Bird, dog, duck, Color: black, red, white, Country: canada, japan, russia | 
```

编辑＃1：这将产生您想要的结果：

```
select distinct 
  p.name ProductName,
  STUFF((SELECT distinct '; ' + 
           c.name +':'+ STUFF((SELECT DISTINCT ', ' + Name 
                               FROM catalogTags t
                               LEFT JOIN catalogProductTags pt
                                 on t.id = pt.catalogTagId
                               LEFT JOIN catalogCategoryTags ct
                                 on pt.catalogTagId = ct.catalogTagId
                               WHERE c.id = ct.catalogCategoryId
                                  AND p.id = pt.catalogProductId
                               FOR XML PATH('')), 1, 1, '')
         FROM catalogProductTags pt
         LEFT JOIN catalogCategoryTags ct
           ON pt.catalogTagId = ct.catalogTagId
         LEFT JOIN catalogCategory c 
           ON ct.catalogCategoryId = c.id
         WHERE p.id = pt.catalogProductId
         FOR XML PATH('')), 1, 1, '')  List
from catalogProduct p; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/eed14/42)。这可能可以重构为更清洁的版本。

结果是：

```
| PRODUCTNAME |                                                        LIST |
-----------------------------------------------------------------------------
|     tshirt1 |                           Animals: dog; Color: black, white |
|     tshirt2 |              Animals: dog; Color: blue, red; Countries: USA |
|     tshirt3 |  Color: blue, pink, red, white; Countries: Australia, Japan | 
```

# templates - 避免在模板名称中使用包名称

> ID：14203161
> 
> 赞同：1
> 
> 时间：2013-01-07T20:02:20.893
> 
> 标签：templates, symfony, bundle

我对我为包含模板而编写的大量代码感到沮丧，并且想知道是否有一种方法可以将来自控制器的模板或模板包含在同一个包中而无需编写包名称？

所以而不是这个：

```
$this->render('AcmeBlogBundle:Controller:template.html.php'); 
```

我可以这样写：

```
$this->render('::template.html.php') 
```

这是重复代码，这是一种耻辱。

# sockets - 如何在 Corona SDK Lua 中运行阻塞操作？

> ID：14203163
> 
> 赞同：3
> 
> 时间：2013-01-07T20:02:24.857
> 
> 标签：sockets, asynchronous, tcp, lua, coroutine

我是 LUA 的新手，我正在使用 Corona SDK 在 LUA 中编写一个 tcp 消息传递库。我遇到了一个问题，即套接字读取操作会挂起应用程序 UI，即使它是在协程中运行的。

我如何启动协程：

```
function Messaging:readLoop()
   self.readCoroutine = coroutine.create(function() self:blockingLoop() end)
   coroutine.resume(self.readCoroutine)
end 
```

阻塞循环：

```
function Messaging:blockingLoop()
   line,err,rest = self.sock:receive(BUFSIZE) -- <= Hangs UI if there is no incoming data 
end 
```

当然我知道协程不等于线程，但我希望 LUA 解释器在阻塞操作上切换到另一个协程（比如带有 GIL 的 Python 线程）。是否有可能在不阻塞 UI 的情况下从套接字读取？例如使用真正的线程或异步方法？谢谢。

PS 消除 BUFSIZ 不是选项，因为我根本不想阻止 UI，即使是 0.2..0.4 秒（移动网络延迟慢）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:52:43.523

[Corona 包含 LuaSockets](http://docs.coronalabs.com/api/library/socket/index.html)，它可以让您进行异步套接字通信，如此[处所示](http://web-c2.anscamobile.com/forum/2011/06/06/code-snippet-how-do-non-blocking-multiplexed-raw-socket-transmission)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:56:28.007

Corona 有一个用于异步调用的[network.request API。](http://docs.coronalabs.com/api/library/network/request.html)

如果您不想使用它，请查看[这个异步 http 库](http://developer.coronalabs.com/code/cross-platform-asynchronous-http-request)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:03:48.850

基于**Mud**和**SatheeshJM**发布的链接，我终于制作了一个消息类，它可能对某人有所帮助

```
-- Messaging prototype
Messaging = {sock = nil, sockTimer = nil}

-- Messaging constructor
function Messaging:new (o)
   o = o or {}
   setmetatable(o, self)
   self.__index = self
   return o
end

function Messaging:connect()
   self.sock = socket.tcp()
   print( self.sock:connect(HOST, PORT) )
   self.sock:settimeout(0)
   self.sockTimer = timer.performWithDelay(50, function() self:checkData() end, 0)
end

function Messaging:close()
   timer.cancel(self.sockTimer)
   self.sock:close()
end

function Messaging:checkData()
   local data, status, rest = self.sock:receive()
   local s
   if data then
      s = data
   else
      s = rest
   end
   if s:len() ~= 0 then
      print ('received', s)
   end
end 
```

重要笔记：

1.  **self.sock:settimeout(0)**需要使套接字非阻塞
2.  **local data, status, rest = self.sock:receive()** <- 在大多数情况下，当出现“超时”错误时，数据将在“rest”变量中，这就是为什么我们需要在下面检查以了解数据传输的准确方式

# javascript - 在图像长按/单击 android webview 时停止“设置为墙纸”

> ID：14203164
> 
> 赞同：0
> 
> 时间：2013-01-07T20:02:30.133
> 
> 标签：javascript, android, html, webview

我制作了一个在我的 android 平板电脑上的 webview 中运行的 web 应用程序。我已经能够合并一个长按事件来使某些事情发生，但是如果有图像 android 会显示图像的“设置为墙纸/另存为”对话框。我可以禁用这个吗？

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:53:38.997

好吧，“Samuel”的解决方案解决了图像“设置为墙纸”对话框出现的问题，并且“文本选择”功能在长按时被禁用！

[Android：禁用网页视图中的文本选择](https://stackoverflow.com/questions/5107651/android-disable-text-selection-in-a-webview)

# java - 使其成为android中的GridLayout方式

> ID：14203165
> 
> 赞同：0
> 
> 时间：2013-01-07T20:02:37.860
> 
> 标签：java, android, grid-layout

你好我有这个屏幕

![在此处输入图像描述](../Images/be7e1bd9773b5015f20617375d80f36a.png)

我用这段代码制作的。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.example.test.project"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="1" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="2" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="3" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="4" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="5" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="6" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="7" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="8" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="9" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="10" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="11" />

            <Button
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                app:layout_gravity="fill_horizontal"
                android:text="12" />
        </LinearLayout>
    </LinearLayout>

</RelativeLayout> 
```

有没有办法做到这一点`GridLayout`，我尝试使用 GridLayout 但它只能连续使用 2 个按钮，但使用 3 个按钮不起作用，我使用了[这个](https://stackoverflow.com/a/10033481/838793)答案中的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:45:40.473

你不会喜欢我的回答，但说​​白了，你不能。GridLayout 不支持任何类型的布局“加权”。对于文本，您通常可以使用 app:layout_gravity 选项，但对于按钮等项目，这将不起作用。

最好的办法是在 GridLayout 中使用线性布局。与您已有的相比并没有真正改善，但至少您可以摆脱您拥有的第一个线性布局。您需要的只是顶部的 GridLayout，然后是每行按钮的 1 个线性布局。这将提高性能。

[http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)

“从其他布局模拟功能”部分提示如何在此场景中使用 GridLayout 中的 LinearLayout 是更好的选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T20:06:47.830

您必须更改 GridLayout android:rowCount="3"。试试这个[链接](http://blog.stylingandroid.com/archives/669)和[这个](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-creating-a-numeric-keypad-with-gridlayout/)

```
<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:columnCount="3"
    android:rowCount="3" >

    <TextView
        android:text="1,1" />

    <TextView
        android:text="1,2" />

    <TextView
        android:text="1,3" />

    <TextView
        android:text="2,1" />

    <TextView
        android:text="2,2" />

    <TextView
        android:text="2,3" />

    <TextView
        android:text="3,1" />

    <TextView
        android:text="3,2" />

    <TextView
        android:text="3,3" />

</GridLayout> 
```

编辑：阅读此[链接](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)，[链接](http://android-meda.blogspot.com/2012/02/tutorial-using-layouts-in-your-android.html)

# database - BDB JE 嵌入式数据库的替代品

> ID：14203166
> 
> 赞同：2
> 
> 时间：2013-01-07T20:02:43.797
> 
> 标签：database, jvm-languages, berkeley-db-je

我一直在使用 BDB JE，因为它是由 SleepyCat 开发的，后来被 Oracle 收购了，而且许可政策现在还不清楚。那么这种键值数据库的替代品是什么

*   键和值对象的自定义序列化器
*   拥有二次收藏的能力
*   高吞吐量
*   存储数千万条记录的能力
*   嵌入到基于 JVM 的应用程序中，没有单独的服务/应用程序
*   低内存占用

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:10:42.950

JDBM4 又名 MapDB：[https ://github.com/jankotek/mapdb](https://github.com/jankotek/mapdb)

“MapDB 提供由磁盘存储或堆外内存支持的并发 TreeMap 和 HashMap。它是一个快速、可扩展且易于使用的嵌入式 Java 数据库引擎。它很小（160KB jar），但包含事务、空间等功能高效的序列化、实例缓存和透明压缩/加密。它还具有只有原生嵌入式数据库引擎才能匹敌的出色性能。”

# google-drive-api - 使用 q 参数搜索文件没有“或”运算符？

> ID：14203168
> 
> 赞同：1
> 
> 时间：2013-01-07T20:02:52.883
> 
> 标签：google-drive-api

我想用 'q' 参数和 'or' 运算符触发文件搜索。意图是查找标题 = 'apple' 或 'orange' 的文件

```
$params = array (
  'q'=> "title = 'apple' or title = 'orange'"
); 
```

但是我没有在文档中找到“或”运算符。因此，可以使用 'not' 和 'and' 的组合来创建等价的 'or'，而不是使用 'or'，如下所示：

```
$params = array(
  'q'=> "not ( title !='apple' and title != 'orange' )"
); 
```

这行得通吗？或者如何使用“或”运算符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:06:15.517

抱歉，OR 目前不可用，但 Google 正在努力。

# operating-system - 跨平台文件类型关联

> ID：14203170
> 
> 赞同：2
> 
> 时间：2013-01-07T20:02:54.697
> 
> 标签：operating-system

我目前正在开发一个用 Java 编写的 BitTorrent 客户端，我想知道如何将它与 Linux、Windows 和 Mac 上的 *.torrent 文件相关联。

具体来说，我正在寻找三个操作系统上的两个操作：

*   查找给定文件类型（MIME 或文件扩展名）的关联程序
*   为给定文件类型设置关联程序

# sql - vb.net 返回具有多种类型的 json 对象？

> ID：14203171
> 
> 赞同：0
> 
> 时间：2013-01-07T20:02:55.513
> 
> 标签：sql, vb.net, object, multidimensional-array, flexigrid

我需要从看起来像这样的 Web 服务返回一些数据：

```
data.page = 1
data.count = 12883
data.rows(0).id = 1
data.rows(0).name = "bob"
data.rows(1).id = 2
data.rows(1).name = "steve"
data.rows(2).id = 3
data.rows(2).name = "fred" 
```

我不知道该怎么做。我已经返回简单类型和简单数组，但从来没有这样的对象。

数据源是一个sql数据库。目标是一个 javascript/ajax 函数。我目前成功地将行本身作为数据集返回并且它可以工作，但是我需要添加计数和其他几个“父级”变量。

为了充分披露，这里是有效的代码：

```
<WebMethod()> _
Public Function rptPendingServerRequests() As DataSet
    Dim connetionString As String
    Dim connection As SqlConnection
    Dim command As SqlCommand
    Dim adapter As New SqlDataAdapter
    Dim ds As New DataSet
    Dim sql As String

    connetionString = "..."
    sql = "SELECT usm_request.request_id, usm_request.status, usm_request.req_by_user_id " +
        "FROM usm_request " +
        "WHERE usm_request.request_id in " +
        "(SELECT distinct(usm_request.request_id) from usm_request, usm_subscription_detail WHERE usm_request.request_id = usm_subscription_detail.request_id " +
        "AND usm_subscription_detail.offering_id = 10307) ORDER BY usm_request.request_id DESC"
    connection = New SqlConnection(connetionString)

    Try
        connection.Open()
        command = New SqlCommand(sql, connection)
        adapter.SelectCommand = command
        adapter.Fill(ds)
        adapter.Dispose()
        command.Dispose()
        connection.Close()

        Return ds

    Catch ex As Exception
    End Try
End Function 
```

我正在尝试使用 FlexiGrid 来使用它。我已经工作了几个小时没有运气。我基本上需要将以下站点的 PHP 转换为 .net

[http://code.google.com/p/flexigrid/wiki/TutorialPropertiesAndDocumentation](http://code.google.com/p/flexigrid/wiki/TutorialPropertiesAndDocumentation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:34:55.480

我认为你最好只创建几个类并将数据从数据库移动到这些类中。例如：

```
Public Class MyDataClass
    Public Property Page As Integer

    Public ReadOnly Property Count As Integer
        Get
            If Me.Rows IsNot Nothing Then
                Return Me.Rows.Count
            Else
                Return 0
            End If
        End Get
    End Property

    Public Property Rows As List(Of MyDataRow)

    ' Parameterless constructor to support serialization.
    Public Sub New()
        Me.Rows = New List(Of MyDataRow)
    End Sub
    Public Sub New(wPage As Integer, ds As DataSet)
        Me.New()

        Me.Page = wPage

        For Each oRow As DataRow In ds.Tables(0).Rows
            Dim oMyRow As New MyDataRow

            oMyRow.Id = oRow("id")
            oMyRow.Name = oRow("Name")

            Me.Rows.Add(oMyRow)
        Next
    End Sub
End Class

Public Class MyDataRow
    Public Property Id As Integer
    Public Property Name As String

    ' Parameterless constructor to support serialization
    Public Sub New()

    End Sub
End Class 
```

然后把方法的返回类型改成MyDataClass，把返回改成：

```
 Return New MyDataClass(1, ds) 
```

# arrays - 如何在 TCL 中使用 foreach 创建两个元素的所有组合

> ID：14203174
> 
> 赞同：1
> 
> 时间：2013-01-07T20:03:07.047
> 
> 标签：arrays, list, foreach, tcl, combinations

我想像这样创建 2 的所有组合，但似乎不起作用。

我在这里错过了什么吗？

```
 foreach swt "$Agg1 $Agg2" {

      foreach acc "$Acc1 $Acc2 $Acc3" {

      Function (swt acc) {
      } 
    }
 } 
```

我希望将所有组合（如 Agg1 Acc1、Agg1 Acc2、Agg1 Acc3、Agg2 Acc1、Agg2 Acc2、Agg2 Acc3）传递给函数。

但它似乎不适用于上面的代码。我能想到的唯一其他方法是创建 6 个代码块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T23:08:37.533

您正在插入（可能）尚不存在的变量。取出美元符号。

```
foreach swt "Agg1 Agg2" {
    foreach acc "Acc1 Acc2 Acc3" {
        puts "$swt $acc"
    }
} 
```

我还建议在那里使用花括号，尽管您可以使用引号。

```
foreach swt {Agg1 Agg2} {
    foreach acc {Acc1 Acc2 Acc3} {
        puts "$swt $acc"
    }
} 
```

# c++ - 詹金斯关于无尽程序启动的 valgrind：如何阻止它？

> ID：14203176
> 
> 赞同：3
> 
> 时间：2013-01-07T20:03:17.133
> 
> 标签：c++, jenkins, valgrind

我想在一个无尽的程序上使用 valgrind - 它是一个 QT 程序，当它运行时我无法停止它。

该程序的分析由 Jenkins 启动，以输入 Sonar 报告。但是，如果我不杀死它，valgrind 将不会生成报告。

有没有办法在没有人工干预的情况下停止 valgrind？我尝试了谷歌搜索，但没有找到任何东西。

请帮我。谢谢。肖索拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:31:18.187

如果您使用最新版本的 Valgrind，则可以从 GDB 或命令行（使用 vgdb 实用程序，Valgrind 的一部分）触发泄漏搜索和其他功能。

参见例如[gdbserver 命令处理](http://www.valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver-commandhandling)和[memcheck 监控命令](http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.monitor-commands) 你也可以使用 v.kill 监控命令杀死 Valgrind

# dreamweaver - Dreamweaver CS6 更好的代码

> ID：14203178
> 
> 赞同：2
> 
> 时间：2013-01-07T20:03:31.707
> 
> 标签：dreamweaver, code-formatting, komodoedit

为什么 Dreamweaver CS6 无法像 Komodo Edit 7 一样编写代码？

使用 DREAMWEAVER CS6，我的代码如下所示：

```
<!DOCTYPE html>
<html>
<head>
<title>Test DW</title>
</head>
<body>
<h1>Main Heading</h1>
<p>Some body content.</p>
</body>
</html> 
```

使用 KOMODO EDIT 7，它看起来是这样的：

```
<!DOCTYPE html>
    <html>
        <head>
            <title>Test Komod Edit</title>
        </head>
        <body>
            <div class="wrapper">
                <h1>Main Heading</h1>
                <p>Some body content.</p>
            </div>
        </body>
    </html> 
```

如何使用 Dreamweaver 实现相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:30:07.913

转到命令并选择“应用源格式”，这将对所有代码应用缩进格式。如果您只想格式化代码选择，请使用下面的“将源格式应用于选择”选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:08:00.820

Dreamweaver 首选项（Ctrl 或 Cmd + U）> 代码格式。还有高级格式菜单，它允许不同语言的特定格式（例如 css 与 javascript）。如果这仍然不符合您的喜好，请在键入时使用标签。. .

# c++ - 获取标题栏双击

> ID：14203181
> 
> 赞同：1
> 
> 时间：2013-01-07T20:03:50.103
> 
> 标签：c++, visual-c++, mfc, message-queue

我正在开发一个 MFC C++ 应用程序。我正在处理一个`SystemMenu`属性设置为的对话框`FALSE`，因此它无法最大化。我想处理标题栏上的双击消息。我怎样才能做到这一点？

编辑：

我希望这一次大家都清楚。我有一个没有系统菜单（和系统按钮或图标）的对话框。当用户双击该对话框的标题栏时，我希望程序调用 function `x();`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:17:52.447

从技术上讲，您必须处理[WM_NCLBUTTONDBLCLK](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645619.aspx)并检查双击是否发生在窗口的标题区域，可能通过发送[WM_NCHITTEST](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645618.aspx)并测试返回值是否为`HTCAPTION`.

*（更新：正如 JohnCz 正确指出的那样，发送`WM_NCHITTEST`实际上并不是必需的，因为`WM_NCLBUTTONDBLCLK`它的结果已经包含在`wParam`.）*

然后你只需要发送[WM_SYSCOMMAND](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646360.aspx)到窗口来最大化它`SC_MAXIMIZE`。`wParam`

然而，在实践中，如果您的对话框还没有准备好处理大小更改并相应地布局其控件，那么它不会取得太大的成就。上次我检查时，这个功能在 MFC 中没有开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T23:29:32.740

我认为这里存在某种混乱：

**弗雷德里克·哈米迪**

你是对的，处理 WM_NCLBUTTONDBLCLK 消息是正确的方法，但是没有必要调用 HitTest，因为 WM_NCLBUTTONDBLCLK 消息传递了 MFC 框架在 WM_NCLBUTTONDBLCLK 处理程序中转换的命中信息。

**胜利者，**

通过处理 WM_NCLBUTTONDBLCLK 消息，您究竟想达到什么目的？

一旦您向我们说明清楚，也许还有其他方法可以满足您的要求。您没有系统菜单这一事实不会阻止您的应用程序接收非客户区消息。

# android - OAuth1a retrieveRequestToken throw null

> ID：14203182
> 
> 赞同：0
> 
> 时间：2013-01-07T20:04:16.463
> 
> 标签：android, oauth

我在 OAuth 签名方面遇到了一些问题。

在我希望获得retrieveRequestToken的这一点上，我收到以下错误：

```
01-05 17:26:02.775: W/System.err(24358): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: null 
```

我不知道为什么我会得到这个。这里有什么建议吗？

我的代码：

```
connectionDec = new ConnectionDetector(getApplicationContext());

// Check if Internet present
if (!connectionDec.isConnectingToInternet())
{
// Internet Connection is not present
// alert.showAlertDialog(MainActivity.this,
// "Internet Connection Error",
// "Please connect to working Internet connection", false);
// stop executing code by return
return;
}

CommonsHttpOAuthConsumer consumer =
new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
CommonsHttpOAuthProvider provider =
new CommonsHttpOAuthProvider(REQUEST_TOKEN_URL, ACCESS_TOKEN_URL,
AUTHORIZE_URL);
provider.setOAuth10a(true);

sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
String token = sharedPreferences.getString("token", null);
String tokenSecret = sharedPreferences.getString("token_secret", null);

if (token == null || tokenSecret == null) 
{
Map requestHeaders = provider.getRequestHeaders();
requestHeaders.put("User-Agent", USER_AGENT);
requestHeaders.put("Accept-Encoding", "gzip");

try 
{
String authUrl = provider.retrieveRequestToken(consumer, CALLBACK_URL);
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl)));
}
catch (OAuthMessageSignerException e) 
{
e.printStackTrace();
}
catch (OAuthNotAuthorizedException e) 
{
e.printStackTrace();
}
catch (OAuthExpectationFailedException e) 
{
e.printStackTrace();
}
catch (OAuthCommunicationException e) 
{
e.printStackTrace();
}
}
else
{
} 
```

任何提示和帮助...谢谢

PS：这是Discogs而不是Twitter

迎接疯狂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:47:13.047

好的，我自己已经回答了这个问题......我已经实现了一个如下所示的异步任务并且它可以工作：

```
public class StartUpActivity extends Activity implements OnClickListener
{

    private static String CONSUMER_KEY = "consumerkey";
    private static String CONSUMER_SECRET = "yourconsumersecret";
    private static String REQUEST_TOKEN_URL = "http://api.discogs.com/oauth/request_token";
    private static String AUTHORIZE_URL = "http://www.discogs.com/oauth/authorize";
    private static String ACCESS_TOKEN_URL = "http://api.discogs.com/oauth/access_token";
    private static String USER_AGENT = "youruseragent";
    private static String CALLBACK_URL = "http://www.callback.com";

    private ConnectionDetector connectionDec;
    private SharedPreferences sharedPreferences;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.start_up_layout);

        connectionDec = new ConnectionDetector(getApplicationContext());

        // Check if Internet present
        if (!connectionDec.isConnectingToInternet())
        {
            // Internet Connection is not present
            // alert.showAlertDialog(MainActivity.this,
            // "Internet Connection Error",
            // "Please connect to working Internet connection", false);
            // stop executing code by return
            return;
        }

    }

    class ProgressTask extends AsyncTask<Integer, Integer, Void>{

        @Override
        protected void onPreExecute() {
            // initialize the progress bar
            // set maximum progress to 100.
        }

        @Override
        protected void onCancelled() {
            // stop the progress
        }

        @Override
        protected Void doInBackground(Integer... params) {
            // get the initial starting value
            int start=params[0];
            // increment the progress
                try {
                    CommonsHttpOAuthConsumer consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
                    CommonsHttpOAuthProvider provider =
                            new CommonsHttpOAuthProvider(REQUEST_TOKEN_URL, ACCESS_TOKEN_URL, AUTHORIZE_URL);
                    provider.setOAuth10a(true);

                    // Check if token and tokensecret are already stored at app preferences
                    sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
                    String token = sharedPreferences.getString("token", null);
                    String tokenSecret = sharedPreferences.getString("token_secret", null);

                    if (token == null || tokenSecret == null)
                    {
                        Map<String, String> requestHeaders = provider.getRequestHeaders();
                        requestHeaders.put("User-Agent", USER_AGENT);
                        requestHeaders.put("Accept-Encoding", "gzip");

                        try
                        {
                            String authUrl = provider.retrieveRequestToken(consumer, CALLBACK_URL);
                            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl)));
                        }
                        catch (OAuthMessageSignerException e)
                        {
                            e.printStackTrace();
                        }
                        catch (OAuthNotAuthorizedException e)
                        {
                            e.printStackTrace();
                        }
                        catch (OAuthExpectationFailedException e)
                        {
                            e.printStackTrace();
                        }
                        catch (OAuthCommunicationException e)
                        {
                            e.printStackTrace();
                        }
                    }
                    else
                    {

                    }

                    }

                 catch (Exception e) {
                }

            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // increment progress bar by progress value
        }

        @Override
        protected void onPostExecute(Void result) {
            // async task finished
        }
    } 
} 
```

# php - 传递给 Doctrine\ORM\UnitOfWork::getCollectionPersister() 的参数 1 必须是一个数组，给定 null

> ID：14203183
> 
> 赞同：1
> 
> 时间：2013-01-07T20:04:19.123
> 
> 标签：php, doctrine, doctrine-orm

我的实体看起来像这样（仅粘贴相关部分）：

用户.php

```
 /**
     * @ManyToMany(targetEntity="Startup", inversedBy="members", cascade={"persist"})
     * @OrderBy({"name"="ASC"})
     * @var Startup[]
     */
    private $startups;

    public function __construct($data = array()) 
    {
        $this->startups = new ArrayCollection();
        $this->joined = new DateTime("now");
        parent::__construct($data);
    } 
```

启动.php

```
 /**
     * @ManyToOne(targetEntity="User", cascade={"persist"})
     * @var User
     */
    private $founder = null;

    /**
     * @ManyToMany(targetEntity="User", mappedBy="startups", cascade={"persist"})
     * @OrderBy({"lastName" = "ASC"})
     * @var User[]
     */
    private $members;

    public function __construct($data = array())
    {
        $this->files = new ArrayCollection();
        $this->topics = new ArrayCollection();
        $this->members = new ArrayCollection();

        $this->founded = new DateTime("now");

        parent::__construct($data);
    } 
```

现在，我正在运行这段代码（$this->identity instanceof User，$values 只是一些用字符串填充的结构，$this->model 是 EntityManager）：

```
 $startup = new Startup();
          $startup->name = $values->name;
          $startup->founder = $this->identity;
          $this->model->persist($startup);
          $this->identity->startups[] = $startup;
          $this->model->flush(); 
```

我明白了：

> 传递给 Doctrine\ORM\UnitOfWork::getCollectionPersister() 的参数 1 必须是一个数组，给定 null，在第 332 行的 .../libs/Doctrine/ORM/UnitOfWork.php 中调用并定义

显然是在冲洗时触发的。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:44:15.210

固定的。`$this->identity`是问题。框架将其序列化然后反序列化。

# android - 如何在android中使用新线程调用新活动

> ID：14203184
> 
> 赞同：-4
> 
> 时间：2013-01-07T20:04:17.877
> 
> 标签：android, android-intent, android-activity, android-service

我即将调用一个新活动，但我希望它在一个新线程而不是同一个线程中打开。请任何人都可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:09:23.397

您不能在新线程上打开 Activity，因为 Activity 具有 UI，并且所有 UI 工作都*必须*在主线程上完成。

相反，您可以将某些处理、网络等任务卸载到后台线程或 AsyncTasks 中。

# ios - iOS 应用和订阅？

> ID：14203185
> 
> 赞同：4
> 
> 时间：2013-01-07T20:04:19.470
> 
> 标签：ios, in-app-purchase, subscription

如果我希望在我的应用中允许订阅，我是否*需要*使用 Apple 的应用内购买支持？我目前正在开发一个可以免费下载和使用的应用程序。它将受广告支持，但我还将提供不会显示广告的服务的高级版本。我可以自己在应用程序/后端服务（注册、信用卡处理等）中实现订阅功能吗？或者，我是否需要使用 Apple 的应用内购买支持（因此也放弃了 30% 的订阅费）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:51:05.270

是的，你是必需的。苹果将​​拒绝任何试图绕过他们 30% 的削减

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T00:21:47.437

实际上......有一种解决方法，您可以保留 100% 的收入：

“如果您想在应用程序之外提供订阅优惠，则必须在应用程序内为希望从应用程序内订阅的用户提供相同（或更好）的订阅价格。” 来源：[https ://developer.apple.com/appstore/in-app-purchase/subscriptions.html](https://developer.apple.com/appstore/in-app-purchase/subscriptions.html)

不确定这是否直接说明了您免费制作应用广告的问题，但如果您提供与应用内购买相同的优惠，则可以保留 100% 的收入。

苹果不久前撤销了这些指导方针，允许开发者标记应用内购买，但我不确定这是否仍然相关。

请参阅： http: [//www.macworld.com/article/1160430/apple_removes_pricing_restrictions_in_app_subscriptions.html](http://www.macworld.com/article/1160430/apple_removes_pricing_restrictions_in_app_subscriptions.html)

和

[http://help.rdio.com/customer/portal/questions/433219-price-discrepancy](http://help.rdio.com/customer/portal/questions/433219-price-discrepancy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T11:57:54.243

正如已经说过的，您需要使用原始的 Apple API。此外，根据 Apple 的政策，开发人员无法选择为其应用程序使用哪种类型的应用内购买。您可以在开发人员的帖子中了解更多信息

[iOS 应用内购买概览：我们的亲身体验](http://blog.azoft.com/ios-in-app-purchases/)

简而言之，有 3 种订阅类型：

*   **免费**——被免费提供问题的应用程序使用
*   **auto-renewable** - 在第一次成功购买后，如果用户的信用卡有效并且他没有手动停止，他们会自动延长自己
*   **不续订**——订阅由用户发起，持续一定时间，到期停止，再次订阅需要用户手动发起订阅。

    自动续订订阅的使用**仅限于大众媒体**类别的应用程序。免费订阅不能用于商业目的分发的演示版本。当然，如果某个应用违反了 Apple 关于应用内购买使用和限制的要求，它将被 AppStore 禁止。

# iphone - iPhone - Xcode 找不到 plist，或 plist 未正确读取

> ID：14203186
> 
> 赞同：0
> 
> 时间：2013-01-07T20:04:20.500
> 
> 标签：iphone, plist

我在从自定义 plist 中读取时遇到问题。我在这里和其他地方找到了 Apple 文档以及许多帖子，但我不明白我做错了什么。

我的 plist 是一个包含两个字符串（url）的字典。

这是我的代码，就像 Apple 和其他网站一样：

```
- (void)accessPlistForURLDictionary
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPath = [paths objectAtIndex:0];
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"server_urls.plist"];

    if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath])
    {
        // if not in documents, get property list from main bundle
        plistPath = [[NSBundle mainBundle] pathForResource:@"server_urls" ofType:@"plist"];
        NSLog(@"bundle");
    }

    NSData *xml = [[NSFileManager defaultManager] contentsAtPath:plistPath];
    NSString *error = nil;
    NSPropertyListFormat format;
    // convert static property liost into dictionary object
    NSDictionary *plistDictionary = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:xml mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&error];
    if (!plistDictionary)
    {
        NSLog(@"Error reading plist: %@, format: %d", error, format);
    }

    serverURL = [[plistDictionary objectForKey:@"Root"] objectForKey:@"get_firstview"];
    NSLog(@"serverURL in accessPlist is: %@", serverURL);
} 
```

这是日志....我不明白为什么 serverURL（合成的字符串变量）为“空”

```
2013-01-07 12:47:06.742 ME[2305:c07] bundle
2013-01-07 12:47:06.744 ME[2305:c07] serverURL in accessPlist is: (null)
2013-01-07 12:47:06.744 ME[2305:c07] serverURL is: (null) 
```

最后一次检查是在我在 viewDidLoad 中使用 serverURL 之前完成的

我在构建设置中添加了 plist（我认为）。这一定是我的代码有问题，但我找不到什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:16:21.823

有更简单的加载`plist`方式`NSDictionary`

```
NSMutableDictionary *plistDictionary = [[NSMutableDictionary alloc] initWithContentsOfFile: plistPath]; 
```

试试看。

# sql - 显示 4 条记录的 SQL 查询

> ID：14203188
> 
> 赞同：1
> 
> 时间：2013-01-07T20:04:34.727
> 
> 标签：sql, select

以下语句正常工作，但每条记录显示 4 次。重复; 我知道这种关系是错误的，但不知道如何解决？抱歉，如果这很简单并且我错过了它。

```
SELECT Customers.First_Name, Customers.Last_Name, Plants.Common_Name, Plants.Flower_Colour, Plants.Flowering_Season, Staff.First_Name, Staff.Last_Name
FROM Customers, Plants, Orders, Staff
INNER JOIN Orders AS t2 ON t2.Order_ID = Staff.Order_ID
WHERE Orders.Order_Date
BETWEEN  '2011/01/01'
AND  '2013/03/01' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T20:08:04.590

您正在表之间生成笛卡尔积，因为您没有在任何表之间提供连接语法：

```
SELECT c.First_Name, c.Last_Name, 
    p.Common_Name, p.Flower_Colour, p.Flowering_Season, 
    s.First_Name, s.Last_Name
FROM Customers c
INNER JOIN Orders o
    on c.customerId = o.customer_id 
INNER JOIN  Plants p
    on o.plant_id = p.plant_id
INNER JOIN Staff s
    ON o.Order_ID = s.Order_ID
WHERE o.Order_Date BETWEEN  '2011/01/01' AND  '2013/03/01' 
```

*注意：*我在猜测连接的列名

这是一个很好[的连接的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)，可以帮助学习正确的语法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:07:08.670

在该`FROM...`条款中，您正在执行交叉连接 - 将每个客户与每个工厂以及每个订单与每个员工相结合。

您应该只在子句中提及一个表，`FROM`然后将其他表连接起来`INNER JOINS`以仅获取相关记录。

我不知道你的数据库到底长什么样，但是是这样的：

```
SELECT Customers.First_Name, Customers.Last_Name, Plants.Common_Name,
Plants.Flower_Colour, Plants.Flowering_Season, Staff.First_Name, Staff.Last_Name
FROM Customers
INNER JOIN Orders ON Orders.Customer_ID = Customers.Customer_ID
INNER JOIN Staff ON Staff.Staff_ID = Orders.Staff_ID
INNER JOIN Plants ON Plants.Plants_ID = Orders.Plants_ID
WHERE Orders.Order_Date
BETWEEN  '2011/01/01'
AND  '2013/03/01' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T20:09:52.040

这是因为您从四个表中进行选择，它们之间没有任何连接，并且还因为您要连接`Orders`两次。结果，得到了*笛卡尔积*。

以下是您应该如何修复它：使用 ANSI 语法重新编写 theta 连接，并提供适当的连接条件：

```
SELECT Customers.First_Name, Customers.Last_Name, Plants.Common_Name, Plants.Flower_Colour, Plants.Flowering_Season, Staff.First_Name, Staff.Last_Name
FROM Customers
JOIN Plants ON ...
JOIN Orders ON ...
JOIN Staff ON ...
INNER JOIN Orders AS t2 ON t2.Order_ID = Staff.Order_ID
WHERE Orders.Order_Date BETWEEN  '2011/01/01' AND  '2013/03/01' 
```

替换`...`为适当的连接条件；这应该使结果看起来像预期的那样。

# eclipse - 是否有 Eclipse 插件可以显示我的程序中最近的编辑历史？

> ID：14203189
> 
> 赞同：1
> 
> 时间：2013-01-07T20:04:37.970
> 
> 标签：eclipse, eclipse-plugin

是否有一个 Eclipse 插件可以显示我最近在我的程序中编辑的历史？有点提醒上次编辑的内容和位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:08:37.213

Eclipse 有一个内置的“本地历史”特性。如果您右键单击一个文件，应该有一个“显示本地历史记录”选项。您还可以区分本地版本并恢复更改。我相信有一个滚动的变化窗口，所以你可能无法走到时间的开始。它也只显示本地更改，而不是其他开发人员所做的更改。

如果您正在使用版本控制系统（您应该这样做），大多数版本控制系统都会维护文件历史记录，并且 Eclipse 通常与此功能集成以比较或恢复文件。但是，它的功能和具体实现取决于您正在使用的系统的版本控制系统和 Eclipse 插件。

# asp.net-mvc - 如何让 MvcBuildViews 继续其他视图出错？

> ID：14203190
> 
> 赞同：5
> 
> 时间：2013-01-07T20:04:37.610
> 
> 标签：asp.net-mvc, visual-studio, msbuild, msbuild-4.0

我有一个方便的 Visual Studio 外部工具快捷方式，可以在启用 MvcBuildViews 的情况下构建当前项目。

参数：`/m:2 $(ProjectFileName) /p:MvcBuildViews=true` 命令行：`C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe /m:2 "ProviderPortal.csproj" /p:MvcBuildViews=true`

每当视图出现错误时，它就会停止并报告它。我想知道所有有错误的视图，而不仅仅是停留在第一个。

我将如何告诉 Aspnet-Compiler 继续处理错误？或者有没有办法让 msbuild 改为按视图调用 aspnet-compiler 而不是一次性调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T19:36:24.957

您可以尝试将 ContinueOnError 设置为 ErrorAndContinue：

```
<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
    <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" ContinueOnError="ErrorAndContinue" />
</Target> 
```

[http://msdn.microsoft.com/en-us/library/ms171484.aspx](http://msdn.microsoft.com/en-us/library/ms171484.aspx)

# applescript - 连续播放 iTunes

> ID：14203191
> 
> 赞同：0
> 
> 时间：2013-01-07T20:04:40.793
> 
> 标签：applescript

我有一个播放特定 iTunes 播放列表的 applescript。

```
tell application "iTunes"
  play user playlist myPlaylist
end tell 
```

但这只会播放一次播放列表，然后停止。我想要的是重新加载播放列表，然后 24/7 连续播放，直到有人真正停止或暂停 iTunes。

我试图将代码修改为此，但它不起作用。

```
on idle
  tell application "iTunes"
    play user playlist myPlaylist
  end tell
end idle 
```

即使在 iTunes 停止之后，on idle 代码实际上什么也不做。

我也尝试重新加载用户播放列表，但也不起作用。

```
tell application "iTunes"
    repeat until player state is stopped
        play user playlist myPlaylist
    end repeat
end tell 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:40:16.963

如果您在 iTune 的 applescript 字典中查看“播放列表”类，您会看到它有一个名为“歌曲重复”的命令。也许这会对你有所帮助。

```
tell application "iTunes"
    tell user playlist myPlaylist
        set song repeat to all
        play
    end tell
end tell 
```

***编辑***：从 iTunes 版本 11 开始，上述代码不再有效。请参阅[此问题](https://stackoverflow.com/questions/14674517/how-to-set-itunes-11-in-shuffle-or-repeat-mode-via-applescript/14679365#14679365)以获取解决方案。我在那里发布了一个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:58:17.643

重复播放列表的代码在 iTunes 11 上不起作用。发布的链接 regulusy6633 包含答案。下面的代码适用于 iTunes 11。

```
 tell application "System Events" to tell process "iTunes"'s menu bar 1's menu bar item "Controls"'s menu 1's menu item "Repeat"'s menu 1
        perform action "AXPress" of menu item "All"
    end tell 
```

# javascript - 使用文档片段真的可以提高性能吗？

> ID：14203196
> 
> 赞同：43
> 
> 时间：2013-01-07T20:04:49.677
> 
> 标签：javascript, performance, documentfragment

我对 JS 的性能有疑问。

说，我有下一个代码：

```
var divContainer = document.createElement("div"); divContainer.id="container";
var divHeader = document.createElement("div"); divHeader.id="header";
var divData = document.createElement("div"); divData.id="data";
var divFooter = document.createElement("div"); divFooter.id="footer";
divContainer.appendChild( divHeader );
divContainer.appendChild( divData );
divContainer.appendChild( divFooter );
document.getElementById("someElement").appendChild( divContainer ); 
```

这段代码只是为其他一些函数创建了 shell 来创建一个网格，创建网格的过程非常复杂并且有很多验证，目前我使用 2 种方法来填充网格，一种在数组变量中创建整个 html另一个创建元素并将它们附加到`documentFragment`.

我的问题是，据我了解，使用片段时是否真的有性能改进——它们管理内存中的元素，因此它们不会附加到文档，因此不会触发 DOM 重新计算和其他讨厌的东西。但是我创建变量的方式是，在我将容器附加到实际页面之前，它们不会附加到任何 DOM 元素。

所以我想知道前面的代码是否比使用像这样包装它的文档片段具有更好的性能：

```
var fragment = document.createDocumentFragment();
var divContainer = document.createElement("div"); divContainer.id="container";
var divHeader = document.createElement("div"); divHeader.id="header";
var divData = document.createElement("div"); divData.id="data";
var divFooter = document.createElement("div"); divFooter.id="footer";
divContainer.appendChild( divHeader );
divContainer.appendChild( divData );
divContainer.appendChild( divFooter );
fragment.appendChild( divContainer )
document.getElementById("someElement").appendChild( fragment.cloneNode(true) ); 
```

正如我已经说过的，这是一个关于性能的问题，我知道作为最佳实践建议使用片段，但我不能忘记这样做只会在内存中创建一个新对象并且什么都不做，所以我认为在这种情况下放弃片段是有效的。

希望一些 js 大师/上帝会在这里照亮希望并帮助我们解决这个问题。

* * *

**编辑**：所以，我一直在寻找与这个问题相关的东西，似乎 documentFragments 并不一定意味着更好的性能。

它只是节点的“内存中”容器。片段和 a 之间的区别在于`<div>`片段没有父级，它永远不会在 DOM 上，只是在内存中，这意味着对片段进行的操作更快，因为没有对 DOM 的操作。

[W3C](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-B63ED1A3)关于 documentFragments 的文档非常含糊，但重点是，每个人最喜欢的浏览器都没有使用真正的片段，而是根据[这个 MSDN 文档创建一个新文档](http://msdn.microsoft.com/en-us/library/ms536387%28VS.85%29.aspx)。这意味着，IE 上的片段速度较慢。

*所以，问题是，**如果我在变量中创建一个元素**（`<div>`例如 a）**但不将它附加到 DOM，添加元素**（div、表等）**和东西，然后在所有工作完成之后**（循环、验证，元素样式），**该元素被附加，它与片段相同吗？***

鉴于 IE 使用“假”片段这一事实，我至少在 IE 中使用这种方法（使用诸如 div 之类的元素，而不是片段）会更好，我真的不在乎 IE，但我需要测试它（办公室的政策）。

另外，如果我像这样在数组上创建所有 html：

```
var arrHTML = ["<table>","<tr>", ....]; 
```

然后这样做

```
document.getElementById("someElement").innerHTML = arrHTML.join(""); 
```

它在 IE 上要快得多，但其他主要浏览器（FF、Chrome、Safari 和 Opera）在使用容器然后附加它（片段或 div）时表现更好。

所有这一切都是因为创建所有元素的过程非常快，大约 8 - 10 秒创建多达 24 列的 20,000 行，这是很多元素/标签，但是浏览器似乎冻结了几秒钟它们都是一次附加的，如果我尝试一个接一个地附加它们，那就太糟糕了。

再次感谢大家，这真的很有趣。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-02-06T15:16:21.587

*Document Fragment* is **much faster** when it is used to insert a *set of elements* in **multiple places**. Most answers here point out its un-utility, but this is to demonstrate its strength.

Lets take an example.

Say we need to append *20 divs* in *10 elements* with class *container*.

*Without:*

```
var elements = [];
for(var i=20; i--;) elements.push(document.createElement("div"));

var e = document.getElementsByClassName("container");
for(var i=e.length; i--;) {
  for(var j=20; j--;) e[i].appendChild(elements[j].cloneNode(true));
} 
```

*With:*

```
var frag = document.createDocumentFragment();
for(var i=20; i--;) frag.appendChild(document.createElement("div"));

var e = document.getElementsByClassName("container");
for(var i=e.length; i--;) e[i].appendChild(frag.cloneNode(true)); 
```

For me using a document fragment turns out to be 16 times faster on Chrome 48.

[Test on JsPerf](http://jsperf.com/document-fragment-test-peluchetti/38)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-07T21:00:24.747

通常，您希望使用片段来避免重排（重新绘制页面）。一个很好的情况是，如果您循环某些内容并在循环中附加，但是，我认为现代浏览器已经对此进行了优化。

[我在这里](http://jsperf.com/docfragment-test)设置了一个 jsPerf 来说明何时使用片段的一个很好的例子。您会注意到在 Chrome 中几乎没有区别（我认为现代优化在工作中），但是，在 IE7 中，我得到 0.08 ops/sec 没有片段，3.28 ops/sec 有片段。

因此，如果您要遍历一个大型数据集并附加很多元素，请改用片段，这样您就只有一个回流。如果您只附加到 dom 几次，或者您只针对现代浏览器，则没有必要。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-07T20:11:31.837

我写了一个jspref来测试它，节点片段似乎快了2.34%

[http://jsperf.com/document-fragment-test-peluchetti](http://jsperf.com/document-fragment-test-peluchetti)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-25T13:21:52.497

以我的经验，dom 操作通常仅在调用堆栈为空后发生。如果我将很多 dom 操作放在循环中，浏览器会冻结一段时间，然后立即显示所有内容。如果需要，您可以使用 setTimeout 更频繁地显示结果来打破堆栈。出于这个原因，我相信这两种方法的表现应该相似。有时这实际上很奇怪，因为如果在一个堆栈中更改了某个元素，则在更改之前您将永远看不到它的状态（进度通知对象有这个问题，在循环期间从未更新过 innerHTML - 只是开始状态，然后是最终状态）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-18T07:50:04.303

```
<!DOCTYPE html>
<html>
<head>
    <title>TODO supply a title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<div ms-controller='for1'>
    <ul>

    </ul>
</div>

<script>
    var ul = document.querySelector('ul');
    console.time('no fragment');
    for(var i=0;i<1000000;i++){
        var li = document.createElement('li');
        li.innerText = i;

        ul.appendChild(li);
    }
    console.timeEnd('no fragment');

    console.time('has fragment');;
    var frg = document.createDocumentFragment()
    for(var i=0;i<1000000;i++){
        var li = document.createElement('li');
        li.innerText = i+'fragment';
        frg.appendChild(li);

    }
    ul.appendChild(frg)
    console.timeEnd('has fragment');
</script>
</body>
</html>
```

结果是没有片段：1615.278ms testFragment.html:36 有片段：2908.286ms

所以，没有 Fragment 更快。我认为原因是铬做了一些事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-16T04:50:55.370

我有与 OP 完全相同的问题，在阅读了所有答案和评论后，似乎没有人真正理解 OP 的要求。

我从 Nicola Peluchetti 发布的测试中得到启发，并对其进行了一些修改。

片段测试不是将元素附加到 a`<div>`然后附加到，而是将元素直接附加到它 (the ) 而不是首先**附加**到. 此外，为了避免任何隐藏的开销成本，两个测试都从创建容器和 .开始，而每个测试只使用一个或另一个。`documentFragment``documentFragment``<div>``<div>``documentFragment`

我认为最初的问题是，基本上，使用 a或 a作为容器执行**单个**节点附加是否更快？`<div>``documentFragment`

看起来使用 a`<div>`更快，至少在 Chrome 49 上。

[http://jsperf.com/document-fragment-test-peluchetti/39](http://jsperf.com/document-fragment-test-peluchetti/39)

我能想到的唯一用例`documentFragment`（目前）是它是否需要更少的内存（这可能可以忽略不计），或者如果你有一堆你不想放入“容器”的兄弟节点要附加“ 元素。`documentFragment`就像一个包装器，它会溶解，只留下它的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-11T23:15:09.413

来自 wolfram77 的 jsperf 在非片段示例中包含一个额外的 for 循环，这是导致性能差异的主要原因，而不是 DocumentFragment。通过删除这个额外的 for 循环，您可以获得相同的结果，但性能完全不同：

[jsperf.com 上的示例](https://jsperf.com/document-fragment-without-jquery-and-nested-for-loop/1)

所以我仍然看不到脚本部分的性能优势，但是当它必须为每个附加元素重新绘制时，浏览器中可能会有一个。

# javascript - 如何根据另一个下拉列表从下拉列表中排除项目

> ID：14203198
> 
> 赞同：-4
> 
> 时间：2013-01-07T20:04:57.363
> 
> 标签：javascript, jquery

我有三个相同的下拉菜单。我想从 drop1 中选择一个值并将该值从 drop2 中排除。那么 drop3 中的选择应该排除 1 和 2。有什么想法吗？

```
<select name="drop1">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select>
<select name="drop2">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select>
<select name="drop3">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:19:32.653

您可以使用更改事件并从 dom 中删除选定的元素

```
$('select[name=drop1]').change(function() {
    var drop2 = $('select[name=drop2]').empty().hide();
    var exclude = $(this).val();
    var size = $(this).children().length;
    for (var i=0; i<size; ++i) {
        if (i != exclude) {
           drop2.append('<option value="' + i + '">' + i + '</option>';
        }
    }
}); 
```

如果您有更复杂的示例并且您需要基于价值的 explude，您可以创建一个克隆。

```
var clone = $('select[name=drop2]').clone();
$('select[name=drop1]').change(function() {
    var copy = clone.clone();
    copy.find('option[value=' + $(this).val() + ']').remove().end();
    $('select[name=drop2]').replaceWith(copy);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:11:35.650

根据您对 PHP 或 AJAX 的熟悉程度，您有两种解决方案。如果您对 PHP 更熟悉，您可以让用户从一个选择表单中提交数据，然后使用 if 语句，例如

```
if $value != '1'{ 
echo '<option value="1">1</option>'; 
} 
```

并为第二种形式的每个字段执行此操作；然后将其复制到第三种形式。

看起来更流畅的解决方案是使用 AJAX 使用侦听器来查看用户单击字段时将 java 值设置为该字段并在 java-script 变量上使用类似的“if then show”方法来隐藏包含的字段其他形式的值。

最简单的解决方案之一也是允许多项选择（假设您对使用一种表单的外观没问题，并且表单之间的值与您上面给出的示例相同）......该示例是：

```
<select id="my_num" name="my_num" size="5" multiple="multiple" >
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
</select> 
```

# scala - Scala 'null' 算作另一种类型的实例吗？

> ID：14203201
> 
> 赞同：3
> 
> 时间：2013-01-07T20:05:09.467
> 
> 标签：scala, types, parameters

我有这个代码：

```
class MyLinkedList[T](h: T, tail: MyLinkedList[T]) {
    def prepend(v: T): MyLinkedList[T] = new MyLinkedList(v, this) 
} 
```

我想知道为什么我可以将第二个参数作为 null 传递并且它可以工作：

```
val l: MyLinkedList[Int] = new MyLinkedList(1, null) 
```

`null`是 MyLinkedList[Int] 的一个实例？？似乎没有：

```
println(null.isInstanceOf[MyLinkedList[Int]]) 
```

输出`false`。

所以为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:20:02.100

[这篇博](http://oldfashionedsoftware.com/2008/08/20/a-post-about-nothing/)文在 Scala 中很好地解释了（`null`连同[`Null`](http://www.scala-lang.org/api/current/index.html#scala.Null)、[`Nil`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Nil%24)和）：[`Nothing`](http://www.scala-lang.org/api/current/index.html#scala.Nothing)[`None`](http://www.scala-lang.org/api/current/index.html#scala.None%24)

> `Null`是一个 trait，它（如果你不熟悉 trait）有点像 Java 中的一个抽象类。只存在一个 的实例`Null`，那就是`null`。没那么难。文字`null`的用途与在 Java 中的用途相同。它是不引用任何对象的引用的值。因此，如果您编写一个接受 type 参数的方法，`Null`则只能传入两件事：`null`它本身或 type 的引用`Null`。

因此`null`不是 Scala 类型系统中任何类型的实例，除了`Null`：

```
scala>  null.isInstanceOf[Any]
res1: Boolean = false 
```

好的，所以它一定是`Null`then 的一个实例，对吧？好...

```
scala>  null.isInstanceOf[Null]
<console>:8: error: type Null cannot be used in a type pattern or isInstanceOf test
       null.isInstanceOf[Null] 
```

总的来说，正如其他人所指出的那样，`Null`它的`null`存在仅仅是为了向后兼容 Java。否则，`Null`与 处于相同状态`Nothing`，但后者没有实例，它是 Scala 类型系统中更有机的一部分，因为它在特定使用场景中具有良好定义的角色，例如定义空集合或异常退出从函数调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T20:08:33.183

`null`是 Scala 支持的东西，用于与在 JVM 和 .NET 框架上运行的其他语言反向兼容。语言设计者对此并不特别兴奋，但是是的，它的编译就像 Java 代码一样。你永远不应该在原生 Scala 情况下使用它。Scala 提供了最惯用的替代方案，例如`Option`使用实例`Some`，`None`它本质上是一个`Nullable`包装器，用于当您确实需要允许 null 选项时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:42:07.737

看这个

```
class A
println(null.isInstanceOf[A])  // false 
```

虽然我不知道为什么，但它似乎`isInstanceOf`不像我们预期的那样工作`null`。另一种进行类型检查的方法是

```
null: MyLinkedList[Int] 
```

哪个有效。

# exception - 没有例外的语言如何呈现失败？

> ID：14203202
> 
> 赞同：0
> 
> 时间：2013-01-07T20:05:09.377
> 
> 标签：exception, programming-languages, theory

> **可能重复：**
> [C 代码中的错误处理](https://stackoverflow.com/questions/385975/error-handling-in-c-code)

我的意思是，我想不是所有的语言都有例外，所以我如何在 C 中找到更多关于失败的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:06:07.080

从您的函数返回错误代码，或指示成功/失败的布尔值。

# php - 在查询中找不到上传的 tmp 文件

> ID：14203203
> 
> 赞同：0
> 
> 时间：2013-01-07T20:05:16.020
> 
> 标签：php, mysql, cakephp

我对 php 和 CakePHP 还很陌生，我在上传一个文本文件（2kb）后尝试执行以下代码：

```
$filefullname = $this->request->data['File']['file']['tmp_name'];
debug($filefullname);
move_uploaded_file($filefullname, WWW_ROOT.'tmp.txt');
$query = 'LOAD DATA LOW_PRIORITY INFILE "'.WWW_ROOT.'tmp.txt'.'" INTO TABLE agencies FIELDS TERMINATED BY "," OPTIONALLY ENCLOSED BY """" LINES TERMINATED BY "\r" IGNORE 1 LINES';
debug($query);
$this->Agency->query($query); 
```

虽然可以找到该文件，但我得到以下输出：

```
'C:\Windows\Temp\phpB413.tmp'
'LOAD DATA LOW_PRIORITY INFILE "C:\Data\myphpapplication\app\webroot\tmp.txt" INTO TABLE agencies FIELDS TERMINATED BY "," OPTIONALLY ENCLOSED BY """" LINES TERMINATED BY "\r" IGNORE 1 LINES'
Error: SQLSTATE[HY000]: General error: 29 File 'C:\Data\myphpapplication\app\webroot\tmp.txt' not found (Errcode: 13)
SQL Query: LOAD DATA LOW_PRIORITY INFILE "C:\Data\myphpapplication\app\webroot\tmp.txt" INTO TABLE agencies FIELDS TERMINATED BY "," OPTIONALLY ENCLOSED BY """" LINES TERMINATED BY "\r" IGNORE 1 LINES 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:07:32.807

该文件很可能在那里，但 MySQL 不允许您从该位置读取文件。MySQL 从读取 LOAD DATA ... INFILE 的位置相当严格，这是有充分理由的。您可能需要先将文件移动到 MySQL 可以读取的路径，或更改 MySQL 服务器的设置。

从 MySQL 5.1 手册：

> 请注意，在非本地情况下，这些规则意味着从服务器的数据目录读取名为 ./myfile.txt 的文件，而从默认数据库的数据库目录读取名为 myfile.txt 的文件。[...]

和：

> Windows 路径名使用正斜杠而不是反斜杠指定。如果确实使用了反斜杠，则必须将它们加倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:47:22.377

@JvO 正在引导您走上正确的道路。我认为您缺少几个重要元素，其中之一是将上传的文件从服务器上的初始临时目录移动到 MySQL 可以正式读取它的位置（为了安全起见，它不会从临时目录中读取它原因）。

这是我做的一个项目的一个例子，它上传了一个 CSV 文件，然后将它移动到一个可读的目录中。我首先使用`move_uploaded_file`函数上传了它，然后创建了一个变量来描述新文件的上传路径，以用于 LOAD DATA 查询。

`move_uploaded_file($_FILES["fCSV"]["tmp_name"],"user_uploads/SG".$dapID ."/". $_FILES["fCSV"]["name"]);`

`$csvfile = "user_uploads/SG".$dapID ."/". $_FILES["fCSV"]["name"];`

在您的 LOAD DATA 查询中，您缺少“LOCAL”关键字，它告诉 MySQL 从指定目录读取文件，否则它会在数据库目录中查找它（下面使用“Field1”等用于演示仅用于目的，您应该在其中包含真实的表字段名称）：

`$sqlLoad = "LOAD DATA LOCAL INFILE '".$csvfile."' INTO TABLE my_table FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES (Field1,Field2,Field3,Field4) SET ID =".$id`

最后，您确实需要通读 MySQL 手册中的这一页。它涵盖了您正在处理的许多问题，并提供了示例：

[MySQL LOAD DATA INFILE 语法](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

# pear - Opencart 导入/导出工具上传 XLS 文件，停止无错误

> ID：14203204
> 
> 赞同：0
> 
> 时间：2013-01-07T20:05:17.017
> 
> 标签：pear, opencart, phpexcel, import-from-excel

我正在使用 Opencart 导入/导出工具（由 Neuhoff 先生编写的工具）来更新我们的产品数据库。直到现在我还没有遇到任何问题......当我尝试上传超过 12,000 种产品时。上传 XLS 文件后，脚本会停止。没有错误。没有什么。

所有错误报告都已打开。该工具使用 PHP Pear (mini) 库和 PHPExcel 来解析数据。我的 php.ini 文件设置为允许最多 8 GB 的 RAM，并且几乎在每个类别中都达到了极限。我完全不知道为什么会发生这种情况。

在这一点上，我对想法完全持开放态度。我可以尝试的任何东西都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:46:16.680

这是 post_max_size 错误。感谢 J.Neuhoff 通过[此处](http://forum.opencart.com/viewtopic.php?f=119&t=81305&start=60#p371728)的 OC 论坛帖子对此进行了说明。

# ios - Tableview 渲染故障

> ID：14203211
> 
> 赞同：1
> 
> 时间：2013-01-07T20:05:34.990
> 
> 标签：ios

我正在尝试在 tableview 单元格的缩略图周围放置阴影。但是，当我这样做时，它无法正确呈现，如下面的屏幕截图所示：

[http://imageshack.us/photo/my-images/27/iossimulatorscreenshot7r.png/](http://imageshack.us/photo/my-images/27/iossimulatorscreenshot7r.png/)

（抱歉不能以新用户的身份嵌入截图！）

在应用程序的另一个 tableview 上，相同的代码可以完美运行，如下所示：

[http://imageshack.us/photo/my-images/4/iossimulatorscreenshot7.png/](http://imageshack.us/photo/my-images/4/iossimulatorscreenshot7.png/)

我使用的代码对两者完全相同：

```
ImageView.image = [UIImage imageNamed:image];
ImageView.layer.borderColor = [UIColor blackColor].CGColor;
ImageView.layer.borderWidth = 1; 
```

当我也尝试在 tableview 上放置阴影时会出现问题：

imageshack.us/content_round.php?page=done&l=img577/1947/iossimulatorscreenshot7.png

有任何想法吗？

我主要使用 Storyboards 设置所有内容，所以可能与此有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:36:03.990

（来自我的原始评论）第一张图片看起来像你已经与`UITableViewCell`对象而不是`UIImageView`单元格内的对象接壤。

它确实解释了它。

您`UIImageView`实际上不是您的图像视图，它是对整体的引用，`UITableViewCell`这就是为什么边框围绕整个单元格绘制的原因，而不仅仅是图像。由于您调用的边框方法适用于所有`UIView`和两者`UITableViewCell`，并且`UIImageView`恰好是`UIView`您的应用程序的子类，因此不会崩溃。

问题是……为什么他们错了。你是如何分配你的`ImageView`变量的？它是用代码还是 IBOutlet 完成的？如果它是 IBOutlet，请检查视图控制器上的“连接检查器”，并确保您没有意外连接单元而不是图像（这是我的猜测）。如果您是在代码中完成的，我们可能需要查看代码。

**旁注：**约定说变量名应该以小写字母开头。类名应以大写字母开头。所以`UIImageView *imageView;`

# php - 如何在网页上制作日期下拉菜单

> ID：14203216
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:05:53.540
> 
> 标签：php, html, date, drop-down-menu

我有一个带有 PHP 的 Web 服务器，并且我需要能够选择某些文件夹下的一些文件。文件名的格式为“YYYY-MM-DD_XXXXXXX.php”。Y 代表年，M 代表月，D 代表日期。我需要做的是制作一个动态下拉菜单，其中包含文件夹中某个文件的日期。例如。有两个文件：2013-01-01_xxxxx.php 和 2013-01-07_xxxx.php，这样下拉列表中应该有两个选项可用，分别是“2013-01-01”和“2013-01- 07”。一旦我选择其中一个，相应的文件将显示在网页的下方。我不知道如何制作这样的下拉菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:28:41.240

```
<select>
    <option value="one">First Text</option>
    <option value="two">Second Text</option>
</select> 
```

创建一个下拉菜单。由于您希望它动态分配值，您可以这样做：

```
foreach (myArray as row) {
   echo '<option value='" . $row['value'] . '">' . $row['text'] . '</option>';
}
echo '</select>'; 
```

通过将选择发布到将从文件中读取的页面来动态创建菜单......很痛苦。

我要做的是使用 jQuery（特别是 ajax）从文件中读取。

假设你有：

```
<?php
$cities = array(
    'IL' => array( 'Chicago', 'Naperville', 'Decatur', 'Saint Charles' ),
    'IN' => array( 'Gary', 'Miller', 'Portage', 'Merrillville' )
);

print json_encode( $cities[ $_POST[ 'selection' ] ] );
exit;
?> 
```

您使用 json_encode 函数在页面中传递打印（或回显）结果。

你的javascript会是这样的：

```
$(document).ready(function() {

$('#selection').change(function() {
    $.post(
        'some-url.php',
        {
            'selection':$('#selection').val()
        },
        function(data, textStatus) {
            $.each(data, function(index, value) {
                $('#city').append('<option value="' + value + '">' + value + '</option>');
            });
        },
        'json'
    );
}); 
```

});

这是一个相当不错的教程：[http](http://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/) ://remysharp.com/2007/01/20/auto-populating-select-boxes-using-jquery-ajax/和[http://www.9lessons.info/2010/08/动态相关选择框using.html](http://www.9lessons.info/2010/08/dynamic-dependent-select-box-using.html)

和一个例子： http: [//jsfiddle.net/vjkaG/](http://jsfiddle.net/vjkaG/) 和 [http://jsfiddle.net/g7wzT/1/](http://jsfiddle.net/g7wzT/1/)

# c# - system.timers.timer 不会导致回发

> ID：14203219
> 
> 赞同：0
> 
> 时间：2013-01-07T20:06:04.753
> 
> 标签：c#, asp.net, timer

有人可以告诉我为什么这段代码不起作用。我猜这是因为没有回发解雇。如何启用回发？我正在尝试启用一个触发回发并运行方法的计时器（此处简化）。我需要在 .NET 2.0 中实现它，所以不能使用 UpdatePanel 或 Ajax Timer。

输出是；

页面加载

定时器滴答

我的方法

但是标签不可见。

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        System.Diagnostics.Trace.WriteLine("Page Load");
        System.Timers.Timer timer = new System.Timers.Timer();
        timer.Interval = 5000;
        timer.Enabled = true;
        timer.Start();
        timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);

    }
    protected void timer_Elapsed(object sender, EventArgs e)
    {
        System.Diagnostics.Trace.WriteLine("Timer Tick");
        my_method();  
    }

    protected void my_method()
    {
        System.Diagnostics.Trace.WriteLine("my_method");
        Label1.Visible = true;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:08:54.583

计时器在页面的旧丢弃实例上运行。该实例仍在内存中，但已经执行了其渲染阶段，并且永远不会再次使用它。

要获得 PostBack，您需要使用 Ajax Timer 或纯 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:09:14.107

计时器正在服务器上触发。客户端已经拥有该页面，并且在客户端（如 javascript）没有触发新请求的情况下不会自动请求更新；一旦发生这种情况，将呈现页面的新版本。

您需要在 javascript 端实现一些东西来触发事件以查找更新的信息，然后它可以根据需要更新它所拥有的 DOM。

# javascript - 没有内部图像的响应式引导轮播

> ID：14203220
> 
> 赞同：1
> 
> 时间：2013-01-07T20:06:04.723
> 
> 标签：javascript, css, twitter-bootstrap, carousel

我正在尝试实现一个 twitter 引导轮播。除了，我需要将内容（容器、行、跨度、副本）放在幻灯片而不是大图像中。但是，我确实有一个大图像（1366x450）显示为每张幻灯片的背景，可缩放/响应。

我找不到一种方法来做到这一点，以便背景图像正确缩放并且幻灯片以所需的响应尺寸显示。我需要在内容的顶部和底部进行大量填充。

任何想法从哪里开始？

# xslt - XSLT 动态行

> ID：14203222
> 
> 赞同：1
> 
> 时间：2013-01-07T20:06:11.417
> 
> 标签：xslt

我在正确格式化数据时遇到问题。顶层节点是 Part。节点下方的元素是 AML 和 Documents。AML 和 Documents 可以是不同的值。AML 可以大于 Documents，Documents 可以大于 AML。我需要 Documents 和 AML 的元素位于同一行，以便表格格式正确。如果您需要更多信息，请告诉我，并感谢您的帮助，非常感谢。

数据

```
<Item type="Part">
    <item_number>E008643</item_number>
    <Relationships>
      <Item type="Part AML">
        <related_id keyed_name="0000-009" type="Manufacturer Part">
          <Item type="Manufacturer Part">
            <manufacturer keyed_name="Fasteners Co." type="Manufacturer"></manufacturer>
            <item_number>0000-009</item_number>
          </Item>
        </related_id>
        <state>Preliminary</state>
      </Item>
      <Item type="Part AML">
        <related_id keyed_name="1234" type="Manufacturer Part">
          <Item type="Manufacturer Part">
            <id keyed_name="1234" type="Manufacturer Part"></id>
            <manufacturer keyed_name="Vishay/Dale" type="Manufacturer"></manufacturer>
            <item_number>1234</item_number>
          </Item>
        </related_id>
        <state>Preliminary</state>
      </Item>
      <Item type="Part Document">
        <related_id keyed_name="D000006" type="Document">
          <Item type="Document">
            <id keyed_name="D000006" type="Document"></id>
            <major_rev>B</major_rev>
            <name>Hardware Doc</name>
            <item_number>D000006</item_number>
          </Item>
        </related_id>
      </Item>
      <Item type="Part Document">
        <related_id keyed_name="D000005" type="Document">
          <Item type="Document">
            <major_rev>B</major_rev>
            <name>Firmware</name>
            <item_number>D000005</item_number>
          </Item>
        </related_id>
      </Item>
      <Item type="Part Document">
        <related_id keyed_name="D000003" type="Document">
          <Item type="Document">
            <major_rev>A</major_rev>
            <name>Design Spec</name>
            <item_number>D000003</item_number>
          </Item>
        </related_id>
      </Item>
      <Item type="Part BOM">
        <related_id keyed_name="E000371" type="Part">
          <Item type="Part">
             <item_number>E000371</item_number>
            <Relationships>
              <Item type="Part AML">
                <related_id keyed_name="3Z1JTTD" type="Manufacturer Part">
                  <Item type="Manufacturer Part">
                    <manufacturer keyed_name="Speer" type="Manufacturer"></manufacturer>
                    <item_number>3Z1JTTD</item_number>
                  </Item>
                </related_id>
                <state>Preliminary</state>
              </Item>
              <Item type="Part AML">
                <related_id keyed_name="000T" type="Manufacturer Part">
                  <Item type="Manufacturer Part">
                    <manufacturer keyed_name="Nickel" type="Manufacturer"></manufacturer>
                    <item_number>000T</item_number>
                  </Item>
                </related_id>
                <source_id keyed_name="E000371" type="Part"></source_id>
                <state>Preliminary</state>
              </Item>
              <Item type="Part AML">
                <related_id keyed_name="R00V" type="Manufacturer Part">
                  <Item type="Manufacturer Part">
                    <manufacturer keyed_name="Sonic" type="Manufacturer"></manufacturer>
                    <item_number>R00V</item_number>
                  </Item>
                </related_id>
                <state>Preliminary</state>
              </Item>
              <Item type="Part AML">
                <related_id keyed_name="TRF" type="Manufacturer Part">
                  <Item type="Manufacturer Part">
                    <manufacturer keyed_name="Components" type="Manufacturer"></manufacturer>
                    <item_number>TRF</item_number>
                  </Item>
                </related_id>
                <state>Preliminary</state>
              </Item>
              <Item type="Part AML">
                <related_id keyed_name="70RL" type="Manufacturer Part">
                  <Item type="Manufacturer Part">
                    <manufacturer keyed_name="Comp" type="Manufacturer"></manufacturer>
                    <item_number>70RL</item_number>
                  </Item>
                </related_id>
                <state>Preliminary</state>
              </Item>
              <Item type="Part Document">
                <related_id keyed_name="D000007" type="Document">
                  <Item type="Document">
                    <major_rev>B</major_rev>
                    <name>BOX</name>
                    <item_number>D000007</item_number>
                  </Item>
                </related_id>
                <state is_null="1" />
              </Item>
              <Item type="Part Document">
                <related_id keyed_name="D000008" type="Document">
                  <Item type="Document">
                    <major_rev>A</major_rev>
                    <name>SOCKET</name>
                    <item_number>D000008</item_number>
                  </Item>
                </related_id>
                <state is_null="1" />
              </Item>
            </Relationships>
          </Item>
        </related_id>
      </Item>
</Relationships> 
```

样式表

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:aras="http://www.aras-corp.com" exclude-result-prefixes="msxsl">
     <xsl:output method="html" omit-xml-declaration="yes" standalone="yes" indent="yes"></xsl:output>

     <xsl:template match="/">
        <html>
          <head></head>
          <style type="text/css" userData="Global">
        table  {empty-cells:show; border-collapse:collapse;}
        th {font-family:helvetica; font-size:8pt;  padding:2px; border:1px #000000 solid; background-color:#CCCCCC; text-transform:capitalize;}
        td {font-family:helvetica; font-size:8pt;  padding:2px; border:1px #000000 solid;}
        td.noBorder {font-family:helvetica; font-size:8pt;  padding:2px; border-width:0;}
       </style>
          <body topmargin="50" leftmargin="50">
            <table border="0" cellspacing="0" cellpadding="0" width="1850">
              <tr valign="top">
                <td class="noBorder" align="left" colspan="9" uniqueID="ms__id39">
          </td>
         </tr>
              <tr valign="bottom">
                <td class="noBorder" colspan="13" style="font-family:helvetica;font-size:15pt;color:#DA1943;padding:2px;" align="left" uniqueID="ms__id22">Bill of Materials Report -              <xsl:value-of select="//Item/name"></xsl:value-of> Rev              <xsl:value-of select="//Item/major_rev"></xsl:value-of>
                </td>
                <td class="noBorder" colspan="7" style="font-family:helvetica;font-size:10pt;padding:2px;" align="right" uniqueID="ms__id23">Generated on:              <script>function m00(r, n){r += ""; if (!n) n = 2; while(r.length &lt; n){r = "0" + r;} return r;} var dt = new Date(); var a = top.opener.top.aras; if (a){var s = m00(dt.getUTCFullYear(),4)+"-"+m00((dt.getUTCMonth()+1))+"-"+m00(dt.getUTCDate())+"T"+m00(dt.getUTCHours())+":"+m00(dt.getUTCMinutes())+":"+m00(dt.getUTCSeconds())+"+0000"; s = a.convertToNeutral(s, "date", "yyyy-MM-ddTHH:mm:sszzz"); s = a.convertFromNeutral(s, "date", "short_date"); document.write(s);}</script>
                </td>
         </tr>
              <tr>
                <th>Part Number</th>
                <th>Manufacturer</th>
                <th>Manufacturer Part</th>
                <th>Document Number</th>
                <th>Document Name</th>
                <th>Document Rev</th>
           </tr>
         <xsl:apply-templates select="//Item[@type='Part']"></xsl:apply-templates>
        </table>
       </body>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
        </html>
     </xsl:template>
      <xsl:template match="Item[@type='Part']">

      <!-- Find the number Row Span -->
        <xsl:variable name="AML">
          <xsl:choose>
            <xsl:when test="count(Relationships/Item[@type='Part AML'])=0">1</xsl:when>        
            <xsl:otherwise>
              <xsl:value-of select="count(Relationships/Item[@type='Part AML'])"></xsl:value-of>
            </xsl:otherwise>
       </xsl:choose>
      </xsl:variable>
      <xsl:variable name="Doc">
          <xsl:choose>
            <xsl:when test="count(Relationships/Item[@type='Part Document'])=0">1</xsl:when>        
            <xsl:otherwise>
              <xsl:value-of select="count(Relationships/Item[@type='Part Document'])"></xsl:value-of>
            </xsl:otherwise>
       </xsl:choose>
      </xsl:variable>
      <xsl:variable name="rowCount">
         <xsl:choose>
          <xsl:when test="$AML &lt; $Doc"><xsl:value-of select="$Doc"></xsl:value-of></xsl:when> 
            <xsl:otherwise>
            <xsl:value-of select="$AML"></xsl:value-of>    
            </xsl:otherwise>
         </xsl:choose>  
      </xsl:variable>

     <!-- Grab values -->
       <tr>
          <td rowspan="{$rowCount}" width="5%" align="center" uniqueID="ms__id16">
            <xsl:value-of select="item_number"></xsl:value-of>
          </td>      
          <td width="13%" align="center" uniqueID="ms__id26">
            <xsl:value-of select="Relationships/Item[@type='Part AML'][1]/related_id/Item/manufacturer/@keyed_name"></xsl:value-of>
          </td>
          <td width="13%" align="center" uniqueID="ms__id27">
            <xsl:value-of select="Relationships/Item[@type='Part AML'][1]/related_id/Item/item_number"></xsl:value-of>
          </td>
          <td width="5%" align="center" uniqueID="ms__id28">
            <xsl:value-of select="Relationships/Item[@type='Part Document'][1]/related_id/Item/item_number"></xsl:value-of>
          </td>
          <td width="13%px" align="center" uniqueID="ms__id29">
            <xsl:value-of select="Relationships/Item[@type='Part Document'][1]/related_id/Item/name"></xsl:value-of>
          </td>
          <td width="8%" align="center" uniqueID="ms__id30">
            <xsl:value-of select="Relationships/Item[@type='Part Document'][1]/related_id/Item/major_rev"></xsl:value-of>
          </td>
          <td rowspan="{$rowCount}" width="8%" align="center" uniqueID="ms__id37">
            <xsl:value-of select="count(Relationships/Item[@type='Part AML'])"></xsl:value-of>
          </td>
          <td  rowspan="{$rowCount}" width="8%" align="center" uniqueID="ms__id38">
            <xsl:value-of select="count(Relationships/Item[@type='Part Document'])"></xsl:value-of>
          </td>
          <td rowspan="{$rowCount}" width="8%" align="center" uniqueID="ms__id40">
            <xsl:value-of select="position() mod 2 = 1"></xsl:value-of>
          </td>
        </tr>

    <!-- Assing first row for AML and Doc -->
        <xsl:apply-templates select="Relationships/Item[@type='Part AML'][position()!=1]|Relationships/Item[@type='Part Document'][position()!=1]"></xsl:apply-templates>
     </xsl:template>

     <!-- AML and Doc Rows 2+ -->    
        <xsl:template match="text()" />

       <xsl:template match="Item[@type = 'Part AML'][not(following-sibling::Item[1]/@type = 'Part Document')]">
        <xsl:call-template name="ItemRow">
          <xsl:with-param name="AmlItem" select="." />
        </xsl:call-template>
      </xsl:template>

      <xsl:template match="Item[@type='Part Document']">
        <xsl:variable name="lastItem" select="preceding-sibling::Item[1][@type = 'Part AML']" />

        <xsl:call-template name="ItemRow">
          <xsl:with-param name="AmlItem" select="$lastItem" />
          <xsl:with-param name="PartDocument" select="." />
        </xsl:call-template>
      </xsl:template>

      <xsl:template name="ItemRow">
        <xsl:param name="AmlItem" />
        <xsl:param name="PartDocument" select="_" />

        <xsl:variable name="rowData">
          <row value="{$AmlItem/related_id/Item/manufacturer/@keyed_name}" id="32" />
          <row value="{$AmlItem/related_id/Item[@type='Manufacturer Part']/item_number}" id="33" />
          <row value="{$PartDocument/related_id[@type='Document']/Item/item_number}" id="34" />
          <row value="{$PartDocument/related_id[@type='Document']/Item/name}" id="35" />
          <row value="{$PartDocument/related_id[@type='Document']/Item/major_rev}" id="36" />
        </xsl:variable>

        <tr>
          <xsl:for-each select="msxsl:node-set($rowData)/row">
            <td width="13%" align="center" uniqueID="ms__id{@id}">
              <xsl:value-of select="@value"/>
            </td>
          </xsl:for-each>
        </tr>
      </xsl:template>
    </xsl:stylesheet> 
```

输出 1-7-12

```
 <td width="13%" align="center" uniqueID="ms__id32">Bobs Workshop</td>
     <td width="13%" align="center" uniqueID="ms__id33">1234</td>
     <td width="13%" align="center" uniqueID="ms__id34">D000005</td>
     <td width="13%" align="center" uniqueID="ms__id35">Firmware</td>
     <td width="13%" align="center" uniqueID="ms__id36">B</td>
     <td width="13%" align="center" uniqueID="ms__id34">D000003</td>
     <td width="13%" align="center" uniqueID="ms__id35">Design Spec</td>
     <td width="13%" align="center" uniqueID="ms__id36">A</td> 
```

期望的输出

```
 <!-- If both present -->
    <tr>
     <td width="13%" align="center" uniqueID="ms__id32">Bobs Workshop</td>
     <td width="13%" align="center" uniqueID="ms__id33">1234</td>
     <td width="13%" align="center" uniqueID="ms__id34">D000005</td>
     <td width="13%" align="center" uniqueID="ms__id35">Firmware</td>
     <td width="13%" align="center" uniqueID="ms__id36">B</td>
    </tr>        
<!-- If only Doc is present -->
    <tr>
     <td width="13%" align="center" uniqueID="ms__id32">""</td>
     <td width="13%" align="center" uniqueID="ms__id33">""</td>
     <td width="13%" align="center" uniqueID="ms__id34">D000003</td>
     <td width="13%" align="center" uniqueID="ms__id35">Design Spec</td>
     <td width="13%" align="center" uniqueID="ms__id36">A</td>
    </tr>   
<!-- If only AML is present -->
     <tr>
     <td width="13%" align="center" uniqueID="ms__id32">Nickel</td>
     <td width="13%" align="center" uniqueID="ms__id33">000T</td>
     <td width="13%" align="center" uniqueID="ms__id34">""</td>
     <td width="13%" align="center" uniqueID="ms__id35">""</td>
     <td width="13%" align="center" uniqueID="ms__id36">""</td>
    </tr> 
```

所需的完整 HTML 输出

```
 <html xmlns:aras="http://www.aras-corp.com">
      <head>
        <META http-equiv="Content-Type" content="text/html; charset=utf-16">
      </head>
      <style type="text/css" userData="Global">
        table  {empty-cells:show; border-collapse:collapse;}
        th {font-family:helvetica; font-size:8pt;  padding:2px; border:1px #000000 solid; background-color:#CCCCCC; text-transform:capitalize;}
        td {font-family:helvetica; font-size:8pt;  padding:2px; border:1px #000000 solid;}
        td.noBorder {font-family:helvetica; font-size:8pt;  padding:2px; border-width:0;}
       </style>
      <body topmargin="50" leftmargin="50">
        <table border="0" cellspacing="0" cellpadding="0" width="1850">
          <tr valign="top">
          </tr>
          <tr valign="bottom">
            <td class="noBorder" colspan="13" style="font-family:helvetica;font-size:15pt;color:#DA1943;padding:2px;" align="left" uniqueID="ms__id22">Bill of Materials Report -             9.6 Hz Parts Rev              1</td>
            <td class="noBorder" colspan="7" style="font-family:helvetica;font-size:10pt;padding:2px;" align="right" uniqueID="ms__id23">Generated on:              <script>function m00(r, n){r += ""; if (!n) n = 2; while(r.length < n){r = "0" + r;} return r;} var dt = new Date(); var a = top.opener.top.aras; if (a){var s = m00(dt.getUTCFullYear(),4)+"-"+m00((dt.getUTCMonth()+1))+"-"+m00(dt.getUTCDate())+"T"+m00(dt.getUTCHours())+":"+m00(dt.getUTCMinutes())+":"+m00(dt.getUTCSeconds())+"+0000"; s = a.convertToNeutral(s, "date", "yyyy-MM-ddTHH:mm:sszzz"); s = a.convertFromNeutral(s, "date", "short_date"); document.write(s);}</script></td>
          </tr>
          <tr>
            <th colspan="6">Indenture Level</th>
            <th>Part Number</th>
            <th>Legacy Part Number</th>
            <th>Revision</th>
            <th>Name</th>
            <th>Description</th>
            <th>Parameters</th>
            <th>RoHS/Pb-Free</th>
            <th>Quantity</th>
            <th>Reference Designator</th>
            <th>Manufacturer</th>
            <th>Manufacturer Part</th>
            <th>Document Number</th>
            <th>Document Name</th>
            <th>Document Rev</th>
            <th>Pos AML</th>
            <th>Pos Doc</th>
            <th>Mod</th>
          </tr>
          <tr>
            <td rowspan="3" width="2%" align="center" uniqueID="ms__id10">0</td>
            <td rowspan="3" width="2%" align="center" uniqueID="ms__id11"></td>
            <td rowspan="3" width="2%" align="center" uniqueID="ms__id12"></td>
            <td rowspan="3" width="2%" align="center" uniqueID="ms__id13"></td>
            <td rowspan="3" width="2%" align="center" uniqueID="ms__id14"></td>
            <td rowspan="3" width="2%" align="center" uniqueID="ms__id15"></td>
            <td rowspan="3" width="5%" align="center" uniqueID="ms__id16">E008643</td>
            <td rowspan="3" width="5%" align="center" uniqueID="ms__id17"></td>
            <td rowspan="3" width="2%" align="center" uniqueID="ms__id18">1</td>
            <td rowspan="3" width="13%" align="center" uniqueID="ms__id19">9.6 Hz Parts</td>
            <td rowspan="3" width="13%" align="center" uniqueID="ms__id20">Test</td>
            <td rowspan="3" width="13%" align="center" uniqueID="ms__id21">Assembly</td>
            <td rowspan="3" width="5%" align="center" uniqueID="ms__id22"></td>
            <td rowspan="3" width="5%" align="center" uniqueID="ms__id23">1</td>
            <td rowspan="3" width="5%" align="center" uniqueID="ms__id24"></td>
            <td width="13%" align="center" uniqueID="ms__id26">Fasteners Co.</td>
            <td width="13%" align="center" uniqueID="ms__id27">009</td>
            <td width="5%" align="center" uniqueID="ms__id28">D000006</td>
            <td width="13%px" align="center" uniqueID="ms__id29">Hardware Doc</td>
            <td width="8%" align="center" uniqueID="ms__id30">B</td>
            <td rowspan="3" width="8%" align="center" uniqueID="ms__id37">2</td>
            <td rowspan="3" width="8%" align="center" uniqueID="ms__id38">3</td>
            <td rowspan="3" width="8%" align="center" uniqueID="ms__id40">true</td>
          </tr>
          <tr>
            <td width="13%" align="center" uniqueID="ms__id32">Vishay/Dale</td>
            <td width="13%" align="center" uniqueID="ms__id33">1234</td>
            <td width="13%" align="center" uniqueID="ms__id34">D000005</td>
            <td width="13%" align="center" uniqueID="ms__id35">Firmware</td>
            <td width="13%" align="center" uniqueID="ms__id36">B</td>
          </tr>
          <tr>
            <td width="13%" align="center" uniqueID="ms__id32"></td>
            <td width="13%" align="center" uniqueID="ms__id33"></td>
            <td width="13%" align="center" uniqueID="ms__id34">D000003</td>
            <td width="13%" align="center" uniqueID="ms__id35">Design Spec</td>
            <td width="13%" align="center" uniqueID="ms__id36">A</td>
          </tr>
          <tr>
            <td rowspan="5" width="2%" align="center" uniqueID="ms__id10"></td>
            <td rowspan="5" width="2%" align="center" uniqueID="ms__id11">1</td>
            <td rowspan="5" width="2%" align="center" uniqueID="ms__id12"></td>
            <td rowspan="5" width="2%" align="center" uniqueID="ms__id13"></td>
            <td rowspan="5" width="2%" align="center" uniqueID="ms__id14"></td>
            <td rowspan="5" width="2%" align="center" uniqueID="ms__id15"></td>
            <td rowspan="5" width="5%" align="center" uniqueID="ms__id16">E000371</td>
            <td rowspan="5" width="5%" align="center" uniqueID="ms__id17">0061</td>
            <td rowspan="5" width="2%" align="center" uniqueID="ms__id18">A</td>
            <td rowspan="5" width="13%" align="center" uniqueID="ms__id19">0?</td>
            <td rowspan="5" width="13%" align="center" uniqueID="ms__id20">Thick Film ''</td>
            <td rowspan="5" width="13%" align="center" uniqueID="ms__id21">0, 100, 0.05</td>
            <td rowspan="5" width="5%" align="center" uniqueID="ms__id22">Yes</td>
            <td rowspan="5" width="5%" align="center" uniqueID="ms__id23">1</td>
            <td rowspan="5" width="5%" align="center" uniqueID="ms__id24">R34</td>
            <td width="13%" align="center" uniqueID="ms__id26">Speer</td>
            <td width="13%" align="center" uniqueID="ms__id27">RK73Z1JTTD</td>
            <td width="5%" align="center" uniqueID="ms__id28">D000010</td>
            <td width="13%px" align="center" uniqueID="ms__id29">BOX</td>
            <td width="8%" align="center" uniqueID="ms__id30">B</td>
            <td rowspan="5" width="8%" align="center" uniqueID="ms__id37">5</td>
            <td rowspan="5" width="8%" align="center" uniqueID="ms__id38">3</td>
            <td rowspan="5" width="8%" align="center" uniqueID="ms__id40">false</td>
          </tr>
          <tr>
            <td width="13%" align="center" uniqueID="ms__id32">Nickel</td>
            <td width="13%" align="center" uniqueID="ms__id33">000T</td>
            <td width="13%" align="center" uniqueID="ms__id34">D000011</td>
            <td width="13%" align="center" uniqueID="ms__id35">SOCKET</td>
            <td width="13%" align="center" uniqueID="ms__id36">A</td>
          </tr>
          <tr>
            <td width="13%" align="center" uniqueID="ms__id32">Sonic</td>
            <td width="13%" align="center" uniqueID="ms__id33">R00V</td>
            <td width="13%" align="center" uniqueID="ms__id34">D000007</td>
            <td width="13%" align="center" uniqueID="ms__id35">MOUNT</td>
            <td width="13%" align="center" uniqueID="ms__id36">A</td>
          </tr>
          <tr>
            <td width="13%" align="center" uniqueID="ms__id32">NIC</td>
            <td width="13%" align="center" uniqueID="ms__id33">OTRF</td>
            <td width="13%" align="center" uniqueID="ms__id34"></td>
            <td width="13%" align="center" uniqueID="ms__id35"></td>
            <td width="13%" align="center" uniqueID="ms__id36"></td>
          </tr>
          <tr>
            <td width="13%" align="center" uniqueID="ms__id32">Test</td>
            <td width="13%" align="center" uniqueID="ms__id33">9874</td>
            <td width="13%" align="center" uniqueID="ms__id34"></td>
            <td width="13%" align="center" uniqueID="ms__id35"></td>
            <td width="13%" align="center" uniqueID="ms__id36"></td>
          </tr>
          <tr>
            <td rowspan="2" width="2%" align="center" uniqueID="ms__id10"></td>
            <td rowspan="2" width="2%" align="center" uniqueID="ms__id11">1</td>
            <td rowspan="2" width="2%" align="center" uniqueID="ms__id12"></td>
            <td rowspan="2" width="2%" align="center" uniqueID="ms__id13"></td>
            <td rowspan="2" width="2%" align="center" uniqueID="ms__id14"></td>
            <td rowspan="2" width="2%" align="center" uniqueID="ms__id15"></td>
            <td rowspan="2" width="5%" align="center" uniqueID="ms__id16">E001163</td>
            <td rowspan="2" width="5%" align="center" uniqueID="ms__id17">0145</td>
            <td rowspan="2" width="2%" align="center" uniqueID="ms__id18">A</td>
            <td rowspan="2" width="13%" align="center" uniqueID="ms__id19">8200</td>
            <td rowspan="2" width="13%" align="center" uniqueID="ms__id20">PPS Film ''</td>
            <td rowspan="2" width="13%" align="center" uniqueID="ms__id21">
            </td>
            <td rowspan="2" width="5%" align="center" uniqueID="ms__id22">Yes</td>
            <td rowspan="2" width="5%" align="center" uniqueID="ms__id23">30</td>
            <td rowspan="2" width="5%" align="center" uniqueID="ms__id24">C1-C5,C12,C17,C22,C25,C27-C29,C31</td>
            <td width="13%" align="center" uniqueID="ms__id26">Sonic</td>
            <td width="13%" align="center" uniqueID="ms__id27">822GX5</td>
            <td width="5%" align="center" uniqueID="ms__id28">D000012</td>
            <td width="13%px" align="center" uniqueID="ms__id29">Doc Test</td>
            <td width="8%" align="center" uniqueID="ms__id30">A</td>
            <td rowspan="2" width="8%" align="center" uniqueID="ms__id37">2</td>
            <td rowspan="2" width="8%" align="center" uniqueID="ms__id38">2</td>
            <td rowspan="2" width="8%" align="center" uniqueID="ms__id40">true</td>
          </tr>
          <tr>
            <td width="13%" align="center" uniqueID="ms__id32"></td>
            <td width="13%" align="center" uniqueID="ms__id33"></td>
            <td width="13%" align="center" uniqueID="ms__id34">D000008</td>
            <td width="13%" align="center" uniqueID="ms__id35">ADAPTER</td>
            <td width="13%" align="center" uniqueID="ms__id36">A</td>
          </tr>
        </table>
      </body><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:35:30.373

您使用的是什么 XSLT 处理器？

我相信这应该做你想要的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:aras="http://www.aras-corp.com" exclude-result-prefixes="msxsl">
  <xsl:output method="html" omit-xml-declaration="yes" standalone="yes" indent="yes"></xsl:output>

  <xsl:template match="/">
    <html>
      <head></head>
      <style type="text/css" userData="Global">
        table  {empty-cells:show; border-collapse:collapse;}
        th {font-family:helvetica; font-size:8pt;  padding:2px; border:1px #000000 solid; background-color:#CCCCCC; text-transform:capitalize;}
        td {font-family:helvetica; font-size:8pt;  padding:2px; border:1px #000000 solid;}
        td.noBorder {font-family:helvetica; font-size:8pt;  padding:2px; border-width:0;}
      </style>
      <body topmargin="50" leftmargin="50">
        <table border="0" cellspacing="0" cellpadding="0" width="1850">
          <tr valign="top">
            <td class="noBorder" align="left" colspan="9" uniqueID="ms__id39">
            </td>
          </tr>
          <tr valign="bottom">
            <td class="noBorder" colspan="13" style="font-family:helvetica;font-size:15pt;color:#DA1943;padding:2px;" align="left" uniqueID="ms__id22">
              Bill of Materials Report -              <xsl:value-of select="//Item/name"></xsl:value-of> Rev              <xsl:value-of select="//Item/major_rev"></xsl:value-of>
            </td>
            <td class="noBorder" colspan="7" style="font-family:helvetica;font-size:10pt;padding:2px;" align="right" uniqueID="ms__id23">
              Generated on:              <script>function m00(r, n){r += ""; if (!n) n = 2; while(r.length &lt; n){r = "0" + r;} return r;} var dt = new Date(); var a = top.opener.top.aras; if (a){var s = m00(dt.getUTCFullYear(),4)+"-"+m00((dt.getUTCMonth()+1))+"-"+m00(dt.getUTCDate())+"T"+m00(dt.getUTCHours())+":"+m00(dt.getUTCMinutes())+":"+m00(dt.getUTCSeconds())+"+0000"; s = a.convertToNeutral(s, "date", "yyyy-MM-ddTHH:mm:sszzz"); s = a.convertFromNeutral(s, "date", "short_date"); document.write(s);}</script>
            </td>
          </tr>
          <tr>
            <th width="12%" colspan="6">Indent Level</th>
            <th width="5%">Part Number</th>
            <th width="13%">Manufacturer</th>
            <th width="13%">Manufacturer Part</th>
            <th width="13%">Document Number</th>
            <th width="13%">Document Name</th>
            <th width="13%">Document Rev</th>
            <th width="8%">Pos AML</th>
            <th width="8%">Pos Doc</th>
            <th width="8%">Mod</th>
          </tr>
          <xsl:apply-templates select="//Item[@type='Part']"></xsl:apply-templates>
        </table>
      </body>
      <script src="../../javascript/PopupMenu.js"></script>
      <script src="../../javascript/PopupMenu.js"></script>
      <script src="../../javascript/PopupMenu.js"></script>
      <script src="../../javascript/PopupMenu.js"></script>
    </html>
  </xsl:template>
  <xsl:template match="Item[@type='Part']">

    <xsl:variable name="AmlItems" select="Relationships/Item[@type='Part AML']"/>
    <xsl:variable name="DocItems" select="Relationships/Item[@type='Part Document']"/>

    <xsl:variable name="MoreAmlItems" select="count($AmlItems) > count($DocItems)" />

    <xsl:variable name="largerGroup" select="$AmlItems[$MoreAmlItems] | $DocItems[not($MoreAmlItems)]" />

    <!-- Ensure rowCount is at least 1 -->
    <xsl:variable name="rowCount" select="count($largerGroup) + (count($largerGroup) = 0)"/>

    <!-- Grab values -->
    <tr>
      <xsl:call-template name="IndentLevel">
        <xsl:with-param name="rowSpan" select="$rowCount" />
      </xsl:call-template>
      <td rowspan="{$rowCount}" align="center" uniqueID="ms__id16">
        <xsl:value-of select="item_number"></xsl:value-of>
      </td>
      <xsl:apply-templates select="$largerGroup[1]" />
      <td rowspan="{$rowCount}" align="center" uniqueID="ms__id37">
        <xsl:value-of select="count($AmlItems)"></xsl:value-of>
      </td>
      <td  rowspan="{$rowCount}" align="center" uniqueID="ms__id38">
        <xsl:value-of select="count($DocItems)"></xsl:value-of>
      </td>
      <td rowspan="{$rowCount}" align="center" uniqueID="ms__id40">
        <xsl:value-of select="position() mod 2 = 1"></xsl:value-of>
      </td>
    </tr>

    <!-- Assing first row for AML and Doc -->
    <xsl:apply-templates select="$largerGroup[position() > 1]"></xsl:apply-templates>
  </xsl:template>

  <xsl:template name="IndentLevel">
    <xsl:param name="level" select="0" />
    <xsl:param name="rowSpan" />

    <td rowspan="{$rowSpan}" width="2%" align="center" uniqueID="ms__id{10+$level}">
      <xsl:if test="count(ancestor::Item[@type = 'Part']) = $level">
        <xsl:value-of select="$level"/>
      </xsl:if>
    </td>
    <!-- Stop when we reach 5 -->
    <xsl:if test="$level &lt; 5">
      <xsl:call-template name="IndentLevel">
        <xsl:with-param name="level" select="$level + 1" />
        <xsl:with-param name="rowSpan" select="$rowSpan" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <!-- AML and Doc Rows 2+ -->
  <xsl:template match="text()" />

  <xsl:template match="Item[@type = 'Part AML']">
    <xsl:variable name="pos" select="position()" />
    <xsl:variable name="isTop" select="not(preceding-sibling::Item[@type = 'Part AML'])"/>
    <xsl:call-template name="ItemRow">
      <xsl:with-param name="AmlItem" select="." />
      <xsl:with-param name="PartDocument" select="../Item[@type = 'Part Document'][position() = $pos + not($isTop)]" />
      <xsl:with-param name="IsTop" select="$isTop" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template match="Item[@type='Part Document']">
    <xsl:variable name="pos" select="position()" />
    <xsl:variable name="isTop" select="not(preceding-sibling::Item[@type = 'Part Document'])"/>
    <xsl:call-template name="ItemRow">
      <xsl:with-param name="AmlItem" select="../Item[@type = 'Part AML'][position() = $pos + not($isTop)]" />
      <xsl:with-param name="PartDocument" select="." />
      <xsl:with-param name="IsTop" select="$isTop" />
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="ItemRow">
    <xsl:param name="AmlItem" />
    <xsl:param name="PartDocument" select="_" />
    <xsl:param name="IsTop" />

    <xsl:variable name="startingId" select="26 * $IsTop + 32 * not($IsTop)" />

    <xsl:variable name="rowData">
      <cell value="{$AmlItem/related_id/Item/manufacturer/@keyed_name}" />
      <cell value="{$AmlItem/related_id/Item[@type='Manufacturer Part']/item_number}" />
      <cell value="{$PartDocument/related_id[@type='Document']/Item/item_number}" />
      <cell value="{$PartDocument/related_id[@type='Document']/Item/name}" />
      <cell value="{$PartDocument/related_id[@type='Document']/Item/major_rev}" />
    </xsl:variable>

    <xsl:variable name="rowCells">
      <xsl:call-template name="RowCells">
        <xsl:with-param name="rowData" select="$rowData" />
        <xsl:with-param name="startingId" select="$startingId" />
      </xsl:call-template>
    </xsl:variable>
    <xsl:choose>
      <xsl:when test="$IsTop">
        <xsl:copy-of select="$rowCells"/>
      </xsl:when>
      <xsl:otherwise>
        <tr>
          <xsl:copy-of select="$rowCells"/>
        </tr>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template name="RowCells">
    <xsl:param name="rowData" />
    <xsl:param name="startingId" />

    <xsl:for-each select="msxsl:node-set($rowData)/cell">
      <td align="center" uniqueID="ms__id{$startingId + position() - 1}">
        <xsl:value-of select="@value"/>
      </td>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

如果您使用的是非 Microsoft XSLT 处理器，则需要根据此页面上的表格将 msxsl 命名空间更改为其他名称： [http ://www.xml.com/pub/a/2003/07/16 /nodeset.html](http://www.xml.com/pub/a/2003/07/16/nodeset.html)

您的源 XML 和输出之间似乎存在不一致。第`<related_id>`一个 Item 中的 没有`type`属性，因此您的 [@type='Manufacturer Part'] 过滤器将无法找到任何内容。那里应该有一个`type`属性吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:54:04.803

在您的第一个模板中，我会像这样更改它。

```
<xsl:template match="Item[@type='Part AML']|Item[@type='Part Document']">
  <tr>
    <xsl:apply-templates select="related_id/Item/manufacturer/@keyed_name"/>
    ...
  </tr>
</xsl:template> 
```

这应该像你想要的那样构建你的行。

# c++ - 使 NetBeans 包含 IDE 知道的目录

> ID：14203224
> 
> 赞同：0
> 
> 时间：2013-01-07T20:06:20.607
> 
> 标签：c++, netbeans, include

我最近在 Java 中进行了很多开发，但有人要求我考虑将我的一个项目切换到 C++，我在设置包含时遇到了一些麻烦。不幸的是，我的 C++ 知识范围是我在大学里做过的几个学术项目。

我在 NetBeans 中创建了一个项目，并尝试从外部库 (pugixml) 添加一些标头。我有

```
#include "pugixml.hpp" 
```

在文件的顶部我打算使用它。问题是当我编译时我得到

```
main.cpp:9:23: pugixml.hpp: No such file or directory 
```

这对我来说似乎很奇怪，因为 IDE 肯定知道文件在哪里。库内部类的代码完成工作并控制和将鼠标悬停在文件名上会向我显示文件所在的正确目录。如何说服编译器包含此目录？

我知道这对谷歌来说确实感觉应该很容易，但我没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:40:23.750

如果您在 linux 上使用 makefile：

检查您的 makefile 并在其编译配方的选项中添加 -I Path_to_your_pugixml_hearders。

或者，将您的路径添加到环境变量 $CPLUS_INCLUDE_PATH。例如，在 bash 中导出 CPLUS_INCLUDE_PATH=Path_to_your_pugixml_hearder:$CPLUS_INCLUDE_PATH

# java - LWJGL 倾斜纹理

> ID：14203226
> 
> 赞同：1
> 
> 时间：2013-01-07T20:06:31.447
> 
> 标签：java, colors, textures, lwjgl, skew

我试图在 LWJGL 中使用纹理，结果发现 RBG-png 有点歪斜。示例： [原始图片](http://www.haz.de/var/storage/images/haz/nachrichten/politik/deutschland-welt/druck-auf-philipp-roesler-waechst/30055087-1-ger-DE/Druck-auf-Philipp-Roesler-waechst_ArtikelQuer.jpg)/[纹理](http://picload.org/image/agdwdpo/fail.png)

加载代码是lwjgl wiki space入侵者示例的98%.. Texture.java：

```
public int target, textureID, height, width, texWidth, texHeight;
private float widthRatio, heightRatio;

public Texture(int target, int textureID) {

    this.target = target;
    this.textureID = textureID;
}

public void bind() {

    GL11.glBindTexture(target, textureID);
}

public void setWidth(int width) {

    this.width = width;
    setWidth();
}

public void setHeight(int height) {

    this.height = height;
    setHeight();
}

public int getImageWidth() {

    return width;
}

public int getImageHeight() {

    return height;
}

public float getWidth() {

    return widthRatio;
}

public float getHeight() {

    return heightRatio;
}

public void setTextureWidth(int texWidth) {

    this.texWidth = texWidth;
    setWidth();
}

public void setTextureHeight(int texHeight) {

    this.texHeight = texHeight;
    setHeight();
}

private void setWidth() {

    if (texWidth != 0)
        widthRatio = ((float) width) / texWidth;
}

private void setHeight() {

    if (texHeight != 0)
        heightRatio = ((float) height) / texHeight;
} 
```

TextureLoader.java：

```
private static HashMap<String, Texture> table = new HashMap<String, Texture>();

    private static ColorModel glAlphaColorModel, glColorModel;
    private static IntBuffer textureIDBuffer = BufferUtils.createIntBuffer(1);

    static {
        glAlphaColorModel = new ComponentColorModel(
                ColorSpace.getInstance(ColorSpace.CS_sRGB), new int[] { 8, 8,
                        8, 8 }, true, false, ComponentColorModel.TRANSLUCENT,
                DataBuffer.TYPE_BYTE);

        glColorModel = new ComponentColorModel(
                ColorSpace.getInstance(ColorSpace.CS_sRGB), new int[] { 8, 8,
                        8, 0 }, false, false, ComponentColorModel.OPAQUE,
                DataBuffer.TYPE_BYTE);
    }

    private static int createTextureID() {

        GL11.glGenTextures(textureIDBuffer);
        return textureIDBuffer.get(0);
    }

    public static Texture getTexture(String name, BufferedImage image)
            throws IOException {

        Texture tex = table.get(name);

        if (tex != null)
            return tex;

        tex = getTexture(image, GL11.GL_TEXTURE_2D, GL11.GL_RGBA,
                GL11.GL_LINEAR, GL11.GL_LINEAR);

        table.put(name, tex);

        return tex;
    }

    public static Texture getTexture(BufferedImage image, int target,
            int dstPixelFormat, int minFilter, int magFilter)
            throws IOException {

        int srcPixelFormat;

        int textureID = createTextureID();
        Texture texture = new Texture(target, textureID);

        GL11.glBindTexture(target, textureID);

        texture.setWidth(image.getWidth());
        texture.setHeight(image.getHeight());

        if (image.getColorModel().hasAlpha())
            srcPixelFormat = GL11.GL_RGBA;
        else
            srcPixelFormat = GL11.GL_RGB;

        ByteBuffer textureBuffer = convertImageData(image, texture);

        if (target == GL11.GL_TEXTURE_2D) {

            GL11.glTexParameteri(target, GL11.GL_TEXTURE_MIN_FILTER, minFilter);
            GL11.glTexParameteri(target, GL11.GL_TEXTURE_MAG_FILTER, magFilter);
        }

        GL11.glTexImage2D(target, 0, dstPixelFormat, image.getWidth(),
                image.getHeight(), 0, srcPixelFormat,
                GL11.GL_UNSIGNED_BYTE, textureBuffer);

        return texture;
    }

    private static ByteBuffer convertImageData(BufferedImage bufferedImage,
            Texture texture) {

        ByteBuffer imageBuffer;
        WritableRaster raster;
        BufferedImage texImage;

        int texWidth = bufferedImage.getWidth();
        int texHeight = bufferedImage.getHeight();

        texture.setTextureHeight(texHeight);
        texture.setTextureWidth(texWidth);

        if (bufferedImage.getColorModel().hasAlpha()) {
            raster = Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE,
                    texWidth, texHeight, 4, null);
            texImage = new BufferedImage(glAlphaColorModel, raster, false,
                    new Hashtable());
        } else {
            raster = Raster.createInterleavedRaster(DataBuffer.TYPE_BYTE,
                    texWidth, texHeight, 3, null);
            texImage = new BufferedImage(glColorModel, raster, false,
                    new Hashtable());
        }

        Graphics g = texImage.getGraphics();
        g.setColor(new Color(0f, 0f, 0f, 0f));
        g.fillRect(0, 0, texWidth, texHeight);
        g.drawImage(bufferedImage, 0, 0, null);

        // texImage is NOT skewed at this point

        byte[] data = ((DataBufferByte) texImage.getRaster().getDataBuffer())
                .getData();

        imageBuffer = ByteBuffer.allocateDirect(data.length);
        imageBuffer.order(ByteOrder.nativeOrder());
        imageBuffer.put(data, 0, data.length);
        imageBuffer.flip();

        return imageBuffer;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:48:42.540

我知道这是一个老问题，但我刚才自己也遇到了这个问题。希望其他人会受益，假设您已经自己解决了这个问题。

纹理歪斜和变色的原因是因为它与您的`UNPACK_ALIGNMENT`. `UNPACK_ALIGNMENT`据我了解，每行中的字节数必须是设置为（默认为 4）的倍数。

对于 4 分量格式，这不是问题，因为每个像素由 4 个字节组成，因此任何维度的图像都可以正确对齐。但是对于其他格式，数据会被填充以保持正确对齐，这会导致这样的问题。

您可以更改图像的大小以使其正确对齐`((width * formatComponents) % 4 == 0)`，将格式更改为 4-component 格式，或更改为`UNPACK_ALIGNMENT`不填充图像的内容：

`glPixelStore(GL_UNPACK_ALIGNMENT, alignment); //Alignment must be 1, 2, 4, or 8`.

[http://www.opengl.org/wiki/Common_Mistakes#Texture_upload_and_pixel_reads](http://www.opengl.org/wiki/Common_Mistakes#Texture_upload_and_pixel_reads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:53:44.387

您可能对 PNG 在文件中的存储方式以及 Java 加载方式存在疑问。我不确定我之前是否确实遇到过这个问题，但我知道我曾经在 LWJGL 中加载图像时遇到了问题。这是我整理的一个类，可确保将 PNG 转换为 OpenGL 可以理解的格式，而不会出现倾斜或颜色问题。作为警告，这适用于我的 PNG，但是 BufferedImage 可以采用大量可能的格式，我不相信这段代码涵盖了所有情况。希望这可以帮助你。它应该是完全独立的，除了另一个类（SimpleTexture），我也会在这里为您介绍。请注意，BasicTextureLoader 类实际上是一个 Runnable，因为它最初是为在后台加载纹理而设计的。

```
import org.lwjgl.opengl.OpenGLException;

import javax.imageio.ImageIO;

import static org.lwjgl.opengl.GL11.*;

import java.awt.*;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferByte;
import java.io.IOException;
import java.net.URL;
import java.nio.BufferOverflowException;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;

/**
 * User: FreezerburnVinny
 * Date: 1/1/12
 * Time: 5:59 PM
 */
public class BasicTextureLoader implements Runnable {
    public SimpleTexture texture;
    public BufferedImage image;
    public int width, height;
    protected String mFile;
    protected boolean mShouldRemoveBackground, mKeepBufferedImage;

    public BasicTextureLoader( String file, boolean shouldRemoveBackground ) {
        mFile = file;
        this.texture = null;
        this.width = 0;
        this.height = 0;
        this.mShouldRemoveBackground = shouldRemoveBackground;
        this.mKeepBufferedImage = false;
    }

    public BasicTextureLoader( String file, boolean shouldRemoveBackground, boolean keepBufferedImage ) {
        mFile = file;
        this.texture = null;
        this.width = 0;
        this.height = 0;
        this.mShouldRemoveBackground = shouldRemoveBackground;
        this.mKeepBufferedImage = keepBufferedImage;
    }

     protected ByteBuffer convertBufferedImageToByteBuffer( BufferedImage image ) {
        ByteBuffer buffer = ByteBuffer.allocateDirect( width * height * 4 );
        buffer.order( ByteOrder.nativeOrder() );
        byte[] bytes = ( (DataBufferByte) image.getRaster().getDataBuffer() ).getData();
        switch( image.getType() ) {
            case BufferedImage.TYPE_3BYTE_BGR:
                convertBGRBufferedImageToByteBuffer( buffer, bytes );
                break;
            case BufferedImage.TYPE_4BYTE_ABGR:
                convertABGRBufferedImageToByteBuffer( buffer, bytes );
                break;
            case BufferedImage.TYPE_4BYTE_ABGR_PRE:
                convertBGRBufferedImageToByteBuffer( buffer, bytes );
                break;
            case BufferedImage.TYPE_INT_ARGB:
                convertARGBBufferedImageToByteBuffer( buffer, bytes );
                break;
            case BufferedImage.TYPE_INT_BGR:
                convertBGRBufferedImageToByteBuffer( buffer, bytes );
                break;
            case BufferedImage.TYPE_INT_RGB:
                convertRGBBufferedImageToByteBuffer( buffer, bytes );
                break;
            case 12:
                convertRGBBufferedImageToByteBuffer( buffer, bytes );
                break;
            default:
                throw new OpenGLException( "Unsupported image type: " + image.getType() );
        }
        return buffer;
    }

    protected void convertARGBBufferedImageToByteBuffer( ByteBuffer buffer, byte[] bytes ) {
        byte backgrounda = (byte) 255;
        byte backgroundr = (byte) 255;
        byte backgroundg = (byte) 255;
        byte backgroundb = (byte) 255;
        for( int i = 0; i < bytes.length; i+=4 ) {
            byte alpha = bytes[ i ];
            byte red = bytes[ i + 1 ];
            byte green = bytes[ i + 2 ];
            byte blue = bytes[ i + 3 ];
            if( mShouldRemoveBackground ) {
                if( i == 0 ) {
                    backgrounda = alpha;
                    backgroundr = red;
                    backgroundg = green;
                    backgroundb = blue;
                }
                else if( alpha == backgrounda && red == backgroundr &&
                        green == backgroundg && blue == backgroundb ) {
                    alpha = 0;
                }
            }
            buffer.put( red );
            buffer.put( green );
            buffer.put( blue );
            buffer.put( alpha );
        }
        buffer.rewind();
    }

    protected void convertABGRBufferedImageToByteBuffer( ByteBuffer buffer, byte[] bytes ) {
        byte backgrounda = (byte) 255;
        byte backgroundr = (byte) 255;
        byte backgroundg = (byte) 255;
        byte backgroundb = (byte) 255;
//        System.err.println( buffer.limit() );
        for( int i = 0; i < bytes.length; i+=4 ) {
            byte alpha = bytes[ i ];
            byte blue = bytes[ i + 1 ];
            byte green = bytes[ i + 2 ];
            byte red = bytes[ i + 3 ];
            if( mShouldRemoveBackground ) {
                if( i == 0 ) {
                    backgrounda = alpha;
                    backgroundr = red;
                    backgroundg = green;
                    backgroundb = blue;
                }
                else if( alpha == backgrounda && red == backgroundr &&
                        green == backgroundg && blue == backgroundb ) {
                    alpha = 0;
                }
            }
            buffer.put( red );
            buffer.put( green );
            buffer.put( blue );
            buffer.put( alpha );
        }
        buffer.rewind();
    }

    protected void convertBGRBufferedImageToByteBuffer( ByteBuffer buffer, byte[] bytes ) {
        byte backgrounda = (byte) 255;
        byte backgroundr = (byte) 255;
        byte backgroundg = (byte) 255;
        byte backgroundb = (byte) 255;
        for( int i = 0; i < bytes.length; i+=3 ) {
            byte blue = bytes[ i ];
            byte green = bytes[ i + 1 ];
            byte red = bytes[ i + 2 ];
            byte alpha = (byte) 0xFF;
            buffer.put( red );
            buffer.put( green );
            buffer.put( blue );
            if( mShouldRemoveBackground ) {
                if( i == 0 ) {
                    backgrounda = alpha;
                    backgroundr = red;
                    backgroundg = green;
                    backgroundb = blue;
                }
                else if( alpha == backgrounda && red == backgroundr &&
                        green == backgroundg && blue == backgroundb ) {
                    alpha = 0;
                }
            }
            buffer.put( alpha );
        }
        buffer.rewind();
    }

    protected void convertRGBBufferedImageToByteBuffer( ByteBuffer buffer, byte[] bytes ) {
        byte backgrounda = (byte) 255;
        byte backgroundr = (byte) 255;
        byte backgroundg = (byte) 255;
        byte backgroundb = (byte) 255;
        for( int i = 0; i < bytes.length; i+=3 ) {
            byte red = bytes[ i ];
            byte green = bytes[ i + 1 ];
            byte blue = bytes[ i + 2 ];
            byte alpha = (byte) 0xFF;
            buffer.put( red );
            buffer.put( green );
            buffer.put( blue );
            if( mShouldRemoveBackground ) {
                if( i == 0 ) {
                    backgrounda = alpha;
                    backgroundr = red;
                    backgroundg = green;
                    backgroundb = blue;
                }
                else if( alpha == backgrounda && red == backgroundr &&
                        green == backgroundg && blue == backgroundb ) {
                    alpha = 0;
                }
            }
            buffer.put( alpha );
        }
        buffer.rewind();
    }

    protected int nextPowerOf2( int num ) {
        int ret = 2;
        while( ret < num ) ret *= 2;
        return ret;
    }

    protected int genTextureFromBufferedImage( BufferedImage image ) {
        int tex = -1;
        try {
//            width = nextPowerOf2( image.getWidth() );
//            height = nextPowerOf2( image.getHeight() );
            width = image.getWidth();
            height = image.getHeight();
            ByteBuffer imageBuffer = convertBufferedImageToByteBuffer( image );
            tex = glGenTextures();
            glBindTexture( GL_TEXTURE_2D, tex );
            glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height,
                    0, GL_RGBA, GL_UNSIGNED_BYTE, imageBuffer );
            glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
            glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
        }
        catch( IndexOutOfBoundsException e ) {
            e.printStackTrace();
            glDeleteTextures( tex );
            tex = -1;
        }
        catch( OpenGLException e ) {
            e.printStackTrace();
            glDeleteTextures( tex );
            tex = -1;
        }
        return tex;
    }

    protected int genTexture( String file ) {
        try {
            if( System.getProperty( "os.name" ).toLowerCase().contains( "win"  ) ) {
                String fileName = System.getProperty( "user.dir" );
                fileName = fileName.substring( 2 );
                fileName = "file:" + fileName + "\\" + file;
                image = ImageIO.read( new URL( fileName ) );
            }
            else {
                String fileName = "file:" + System.getProperty( "user.dir" ) + "/" + file;
//                System.err.println( fileName );
                image = ImageIO.read( new URL( fileName ) );
            }
            return genTextureFromBufferedImage( image );
        }
        catch( IOException e ) {
            e.printStackTrace();
        }
        // If we reach here, an error happened
        return -1;
    }

    @Override
    public void run() {
        texture = new SimpleTexture( GL_TEXTURE_2D, genTexture( mFile ) );
        if( !mKeepBufferedImage ) {
            image.flush();
            image = null;
        }
        texture.setWidth( width );
        texture.setHeight( height );
    }
} 
```

和 SimpleTexture 类：

```
import org.lwjgl.opengl.GL11;

/**
 * Author: FreezerburnVinny
 * Date: 1/5/12
 * Time: $(TIME}
 */
public class SimpleTexture extends Texture {
    private int mTarget, mName;
    private double mWidth, mHeight;
    private double mx1, mx2, my1, my2;

    public SimpleTexture( int target, int name ) {
        this.mTarget = target;
        this.mName = name;
        this.mWidth = 0.0;
        this.mHeight = 0.0;
        this.mx1 = 0.0;
        this.mx2 = 1.0;
        this.my1 = 0.0;
        this.my2 = 1.0;
    }
    public SimpleTexture( int target, int name, double width, double height ) {
        this.mTarget = target;
        this.mName = name;
        this.mWidth = width;
        this.mHeight = height;
    }

    public SimpleTexture( int target, int name, double width, double height,
                          double x1, double x2, double y1, double y2 ) {
        this.mTarget = target;
        this.mName = name;
        this.mWidth = width;
        this.mHeight = height;
        this.mx1 = x1;
        this.mx2 = x2;
        this.my1 = y1;
        this.my2 = y2;
    }

    public double getTexCoordx1() { return mx2; }
    public double getTexCoordy1() { return my1; }
    public double getTexCoordx2() { return mx2; }
    public double getTexCoordy2() { return my2; }
    public double getTexCoordx3() { return mx1; }
    public double getTexCoordy3() { return my2; }
    public double getTexCoordx4() { return mx1; }
    public double getTexCoordy4() { return my1; }

    public double getWidth() { return mWidth; }
    public double getHeight()  { return mHeight; }
    public int getName() { return mName; }
    public int getTarget() { return mTarget; }

    public void setWidth( double width ) { this.mWidth = width; }
    public void setHeight( double height) { this.mHeight = height; }

    public void bind() {
        if( Texture.lastBound != mName ) {
            GL11.glBindTexture( mTarget, mName );
            Texture.lastBound = mName;
        }
    }

    public boolean isValidTexture() {
        if( mName == -1 ) return false;
        return GL11.glIsTexture( mName );
    }

    @Override
    public void restart() {
    }

    @Override
    public void pause() {
    }

    @Override
    public void resume() {
    }

    @Override
    public void stopAt( int frame ) {
    }

    @Override
    public void stopAfterFullCycle() {
    }

    @Override
    public int numFrames() {
        return 1;
    }
} 
```

编辑：糟糕，几乎忘记了 SimpleTexture 依赖于 Texture 类。干得好：

```
/**
 * Author: FreezerburnVinny
 * Date: 1/10/12
 * Time: $(TIME}
 */
public abstract class Texture {
    protected static int lastBound = -1;

    public abstract double getTexCoordx1();
    public abstract double getTexCoordx2();
    public abstract double getTexCoordx3();
    public abstract double getTexCoordx4();

    public abstract double getTexCoordy1();
    public abstract double getTexCoordy2();
    public abstract double getTexCoordy3();
    public abstract double getTexCoordy4();

    public abstract double getWidth();
    public abstract double getHeight();
    public abstract int getName();
    public abstract int getTarget();

    public abstract void setWidth( double width );
    public abstract void setHeight( double height );

    public abstract void bind();

    public abstract boolean isValidTexture();

    public abstract void restart();
    public abstract void pause();
    public abstract void resume();
    public abstract void stopAt( int frame );
    public abstract void stopAfterFullCycle();
    public abstract int numFrames();
} 
```

# php - 偶尔需要一次

> ID：14203227
> 
> 赞同：0
> 
> 时间：2013-01-07T20:06:36.127
> 
> 标签：php, jquery

我有这个代码：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    if($i++%2==0){
       $color="#FFFFFF";
    }else{
       $color="#CCCCCC";
    }

    ?>

    <tr bgcolor='<?php echo $color; ?>' onmouseover="this.style.background='#ABFB04';" onmouseout="this.style.background='<?php echo $color; ?>';">
    <?php

echo "<td class=tablelist>";

echo $row["ICAO"] . '</td><td class=tablelist>';

echo $row["Name"] . '</td><td class=tablelist>';

echo $row["WeightEmpty"] . '</td><td class=tablelist>';

echo $row["WeightFull"] . '</td><td class=tablelist>';

echo $row["CargoFull"] . '</td><td class=tablelist>';

echo $row["Range"] . '</td><td class=tablelist>';

echo $row["Price"] . '</td><td class=tablelist>';

echo $row["FirstClassSeats"] . '</td><td class=tablelist>';

echo $row["BusinessClassSeats"] . '</td><td class=tablelist>';

echo $row["EconomyClassSeats"]. '</td><td class=tablelist>';

echo "<img class='editaircraft' src='./images/info.png'></td></tr>"; 

?>
<script>
    $(function() {
        $( "#editaircraftdialog" ).dialog({
            autoOpen: false,
            width: 425
        });

        $( ".editaircraft" ).click(function() {
            $( "#editaircraftdialog" ).dialog( "open" );
            return false;
        });
    }); 
</script>

<div id="editaircraftdialog" title="Edit Aircraft">
    <?php require_once('./new_aircraft.php'); ?> 
</div>

<?php
}

echo "</table>";
$pagination->render();
?> 
```

问题在这里：

```
<div id="editaircraftdialog" title="Edit Aircraft">
        <?php require_once('./new_aircraft.php'); ?> 
    </div> 
```

如果我偶尔使用 require 它不起作用。但是，如果需要一段时间，它会很有趣。如果我更改 require_once 并输入文本，它会很有趣。

问题是我在这样的对话框中看到了 require_once 的内容：http: [//i50.tinypic.com/k1aslk.png](http://i50.tinypic.com/k1aslk.png)

当它到达时 while 停止`<div>`。

new_aircraft.php

```
<script>
    $(function() {
        $("#insertaircraft")
            .button()
            .click(function(event) {
        });
    });
</script>

<form action="new_aircraft_process.php" method="post" enctype="application/x-www-form-urlencoded">
    <table>

    <tr><td class="forms">ICAO:</td><td><input maxlength="4" type="text" name="icao" size="30"/></td></tr>

    <tr><td class="forms">Name:</td><td><input type="text" name="name" size="30"/></td></tr>

    <tr><td class="forms">Weight Empty:</td><td><input type="text" name="weightempty" size="30"/></td></tr>

    <tr><td class="forms">Weight Full:</td><td><input type="text" name="weightfull" size="30"/></td></tr>

    <tr><td class="forms">Cargo Full:</td><td><input type="text" name="cargofull" size="30"/></td></tr>

    <tr><td class="forms">Cruise Speed:</td><td><input type="text" name="cruisespeed" size="30"/></td></tr>

    <tr><td class="forms">Range:</td><td><input type="text" name="range" size="30"/></td></tr>

    <tr><td class="forms">Price:</td><td><input type="text" name="price" size="30"/></td></tr>

    <tr><td class="forms">Number Classes:</td><td><select name="numberclasses" id="numberclasses">
        <option value="0">Select Number of Classes</option>
        <?php
        echo '<option value="1">One Classes (Economy)</option>';
        echo '<option value="2">Two Classes (Business & Economy)</option>';
        echo '<option value="3">Three Classes (First, Business & Economy)</option>';
        ?>
    </select></td></tr>

    <tr><td class="forms">First Class Seats:</td><td><input disabled="disabled" type="text" id="firstclassseats" name="firstclassseats" size="30"/></td></tr>

    <tr><td class="forms">Business Class Seats:</td><td><input disabled="disabled" type="text" id="businessclassseats" name="businessclassseats" size="30"/></td></tr>

    <tr><td class="forms">Economy Class Seats:</td><td><input disabled="disabled" type="text" id="economyclassseats" name="economyclassseats" size="30"/></td></tr>

<script type="text/javascript">

$("#numberclasses").change(function() {
value = $(this).val();

str = parseInt(value);

switch(str)
  {
    case 0:
    $(document).ready(function() {
        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");
        $("#economyclassseats").attr("disabled","disabled");
});
    break;

    case 1:
    $(document).ready(function() {
        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");
        $("#businessclassseats").attr("disabled","disabled");
});
    break;

     case 2:
    $(document).ready(function() {
        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');
        $("#firstclassseats").attr("disabled","disabled");
});
    break;

    case 3:
    $(document).ready(function() {
        $("#firstclassseats").removeAttr('disabled');
        $("#businessclassseats").removeAttr('disabled');
        $("#economyclassseats").removeAttr('disabled');
});
    break;

  }
});

</script>

    <tr><td></td><td><input id="insertaircraft" type="submit" value="Insert Aircraft"/></td></tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:08:51.440

注意**_once**部分。包含该文件后，在脚本退出并启动新实例之前不会再次包含该文件。这是设计使然。如果您每次都想要该文件，请`require()`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:09:49.197

更改`require_once`为`require`或`include`。由于“一次”，您的脚本将仅在第一次迭代时包含该文件。

`require`和之间的区别在于，如果 PHP 无法找到该文件，它将破坏您的代码并报错`include`。`require`

`include`将触发警告，但允许您的脚本继续。

# django - Django 在表单选择中设置单个选项的样式

> ID：14203232
> 
> 赞同：0
> 
> 时间：2013-01-07T20:06:53.870
> 
> 标签：django, django-forms, django-templates

我有一个简单的表格，例如：

```
class ProjectInfoForm(forms.Form):
    module = forms.ModelChoiceField(
        queryset=Module.objects.all().order_by('name'),
        initial=184
    )
    ... 
```

在模板中：

```
<!-- module -->
<h2>Select A Module</h2>
<p>{{ form.module }}</p> 
```

我想做的是在数据库（Module.name == 'Typical'）中使用`<span>`标签设置单个“特殊”条目的样式。我已经尝试将对象保存为数据库中的典型，但`{{ form.module|safe }}`没有取消 html 元素。

有没有更好的方法来做到这一点？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:19:49.687

您不应该在`<option>`.

我建议您使用 JavaScript 将类/id 应用到这个特定`<option>`的 .

# asp.net - 对网站进行 SQL 注入测试

> ID：14203233
> 
> 赞同：0
> 
> 时间：2013-01-07T20:06:55.957
> 
> 标签：asp.net, sql-server, security, sql-injection

我使用`ASP.NET`and创建了一个网站`SQL Server`。现在我正在测试网站的漏洞。当我针对各种输入测试网络时，它拒绝了无效输入。然而，一些输入，例如：`admin' or 1=1--`当输入网站时，网站会一直加载，然后超时。这是否表明存在`SQL Injection`漏洞？

PS：我在使用参数化查询而不是连接字符串方面做了功课，我也知道用于自动化的各种工具，`SQL Injection`例如`SQL Map`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:31:11.987

1=1--可能会导致选择数据库中的所有用户，如果你有这么多的用户，可能会导致挂起。否则会发生其他事情。

总的来说，我认为您应该使用 Sqlmap 等自动化 SQL 注入工具检查您的网站是否存在 SQL 注入。它是开源的并用 Python 编码。您还可以使用 Acunetix 扫描整个网站以查找所有类型的安全漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T18:35:26.640

既然您说这是您创建的网站，您应该了解登录的 SQL 语句。

例如，如果 SQL 语句如下所示。

```
SELECT username, passwd  FROM table_name WHERE username='<userinput>' AND passwd='<userinput>'; 
```

这是您在登录表单中提供的内容。现在将上述内容作为查询，想一想可以使上述陈述成立的各种方法。

例如：

假设评论没有被转义。

> '有效用户名' AND '1'='1'-- //
> 
> ' OR '1'='1'-- //

如果注释字符被转义或不起作用：

> ' 或 '1'='1

这些是登录页面上 SQLi 的一些基本攻击向量。您可以参考此[链接](http://pentestmonkey.net/cheat-sheet/sql-injection/mysql-sql-injection-cheat-sheet)上的备忘单了解更多信息。

由于您是开发人员，因此查看代码是了解 SQLi 是否可行的更好方法。我只是想让你了解一下渗透测试者。

# android - 恢复应用程序后出现 NullPointerException

> ID：14203234
> 
> 赞同：1
> 
> 时间：2013-01-07T20:07:05.580
> 
> 标签：android, nullpointerexception, onresume

好的，这个烦人的问题可能很熟悉，但我不知道它叫什么以及如何解决它。当我打开我的应用程序并转到菜单时，一段时间后，当我恢复应用程序时，我丢失了所有数据。看来 android 喜欢清理数据以保持操作系统尽可能快和稳定。在恢复应用程序之前，当清除任何类型的变量/为空时，建议使用哪种方法将数据保存在内部存储器中并将其取回？我尝试 setSharedPreferences 将 ArrayList 解析为 Object 并将 Object 解析为 String 以保存数据并检索它，但我得到 cannot parse Object to String 异常。必须有更好的选择。

任何帮助将不胜感激。

编辑：

这就是我检索和存储数据的方式：

```
JSONObject data = (JSONObject) new JSONTokener(result).nextValue();

Helper.RAW_PEOPLE_INFO = data.getJSONArray("people");
Helper.PEOPLE_CONTAINER = new ArrayList<PeopleInfoStorage>();
for( int i = 0; i < Helper.RAW_PEOPLE_INFO.length(); i++ ){
    Helper.PEOPLE_CONTAINER.add( new PeopleInfoStorage(Helper.RAW_PEOPLE_INFO.getJSONObject(i)) );
} 
```

我使用 PEOPLE_CONTAINER ArrayList 稍后在需要时使用它。在我恢复我的应用程序之前，PEOPLE_CONTAINER ArrayList 可能会被清理，所以有人可以帮我举例说明如何将此 ArrayList 存储在内部存储器中，以便我可以从内部存储器中检索数据并将其放回 PEOPLE_CONTAINER ArrayList 以供何时使用它再次为空。

它需要是这样的：

```
@Override
protected void onPause() {  
    if( Helper.PEOPLE_CONTAINER != null ){
        //save the Helper.PEOPLE_CONTAINER ArrayList to the internal memory
    }
    super.onPause();
}

@Override
protected void onResume() {
    if( Helper.PEOPLE_CONTAINER == null ){
        //retrieve the data and store it back to Helper.PEOPLE_CONTAINER ArrayList
    }
    super.onResume();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:15:10.227

以下是在什么时间使用哪个存储选项的简要说明：

**Shared Preferences**：这些基本上适用于存储应用程序首选项和其他少量数据。SharedPreferences 是一个键/值存储，您可以在其中将数据保存在某个键下。要从存储中读取数据，您必须知道数据的键。因此，读取数据变得容易。但是对于大型数据集，这可能会变得有点困难，因为您必须为数据集中的每个键定义一个唯一键。例如：在 SharedPreferences 中存储用户登录的会话密钥。

**内部存储**：这有利于存储用户不需要访问的应用程序数据。可能适用于存储日志或应用程序将创建/更新/删除的任何内容。

**SQLite**: Large amounts of same structured data should be stored in a SQLite database as databases are designed for this kind of data. As the data is structured and managed by the database, it can be queried to get a sub set of the data which matches certain criteria using a query language like SQL. Searching becomes easy here. While SQLite might not scale nearly as big as the dedicated databases, it is very quick and convenient for smaller applications, like Android apps. Ex: Storing your listview items OR storing recipes for a recipe app.

Hope this helps!!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:10:16.477

有很多方法可以在应用程序中保存数据；我不会在这里详细介绍，但您应该查看以下资源：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

如果你有一个数组列表，听起来它可能值得 SQLite。

# php - 我的 php 代码有什么问题？

> ID：14203238
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:07:40.640
> 
> 标签：php, arrays

我试图在数组中找到最低的奇数。

这是我的代码：

```
$a=array(81,10,6,71,13,61,8,16,0,9,12);
$b=count($a);
for($i=0;$i<$b;$i++)
{
    if($a[$i]/2!=0)
    {
        $flag=0;

        for($j=0;$j<$b;$j++)
        {
            if($a[$j]<=$a[$i] and $a[$j]/2!=0)
            {
                $a[$i]=$a[$j];
                $flag=1;        
            }
        }

        if($flag==1)
        {
            echo('lowest odd number is'.$a[$i]);
        }

        break;
    }

    break;
} 
```

我不是在寻找新的逻辑，我只是​​想在上面的代码中找到一个错误。为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:09:51.173

您想要 mod ( `%`) 而不是除法 ( `/`)，如

```
if($a[$i]%2!=0) 
```

# .net - 将对象 ByRef 传递给 sub 而不是使用函数 - 这是不好的编程习惯......为什么？

> ID：14203240
> 
> 赞同：1
> 
> 时间：2013-01-07T20:07:46.223
> 
> 标签：.net, vb.net, oop

我创建了以下递归例程来获取树视图中的所有检查节点：

```
 Sub GetAllCheckedNodes(ByVal tn As TreeNode, ByRef NodesList As List(Of TreeNode))
        If tn.Checked Then NodesList.Add(tn)

        For Each nd As TreeNode In tn.Nodes
            GetAllCheckedNodes(nd, NodesList)
        Next
    End Sub 
```

基本上，我使用它的方式是声明一个空`List(Of Treenode)`，然后将它作为第二个参数传递到这个例程中。我的问题是有人告诉我这是“不是很好”的编程实践——为什么以及会出现什么问题？

这似乎是我能想出的最优雅的解决方案来让它发挥作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:10:11.687

不需要传递列表`ByRef`——它已经是一个引用类型。只需按值传递它，您仍然可以将选中的项目添加到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:19:27.083

这里更常见的解决方案是，而不是改变传入的集合，而是返回代表所有满足条件的节点的集合/序列。我个人认为`IEnumerable`很适合这种情况，因为您可以使用迭代器块或将结果连接在一起，以便该方法可以选择添加自身，然后从递归调用中返回所有内容。

这有几个好处。第一，更容易调用；无需创建列表，传入，确保没有线程/并发修改问题，然后使用它，您可以调用方法并使用结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:11:02.123

问题在于其他程序员的期望以及您依赖副作用（即更改传入参数）的事实。

当有人看到 a`Get*`时，期望它会*返回*一个值。

您仍然可以使用递归*函数*，而不必依赖更改传入的参数。

# latex - 如何插入纯文本？

> ID：14203243
> 
> 赞同：31
> 
> 时间：2013-01-07T20:08:15.640
> 
> 标签：latex, tex

我有一些 xml 文本要作为纯文本插入到文档中。我直接插入，但它给出了奇怪的符号。我怎样才能避免这种情况？

我要添加的 XML：

```
\begin{tabular}{|c|}

<table>
<tr>
<td> Title and Logo</td>
</tr>
<tr>
<td> left Column </td>
<td> main table </td>
</tr>
</table>

\end{tabular} 
```

输出如下：

```
¡table¿ ¡tr¿ ¡td¿ Title and Logo¡/td¿ ¡/tr¿ ¡tr¿ ¡td¿ left Column ¡/td¿ ¡td¿ main table ¡/td¿ ¡/tr¿ ¡/table 
```

基本上我想在表格中添加 HTML 代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-07T20:14:41.197

你试过`verbatim`环境吗？

```
\begin{verbatim}
  Your text here.
\end{verbatim} 
```

在不知道您的“奇怪符号”是什么的情况下，很难为您的问题提出解决方案。

* * *

**更新：**为了`verbatim`在表格单元格中嵌入环境，您需要将列更改为段落列（使用`p`、`m`或`b`作为列说明符）；例如

```
\begin{tabular}{|p{10cm}|}
  \begin{verbatim}
    Your text here.
  \end{verbatim}
\end{tabular} 
```

有关更多信息，请参阅[Wikibooks](https://en.wikibooks.org/wiki/LaTeX/Tables#Other_environments_inside_tables)。

# wsdl - CXF 如何将 WSDL 的 localhost 转换为实际的服务器 URL？

> ID：14203245
> 
> 赞同：3
> 
> 时间：2013-01-07T20:08:18.200
> 
> 标签：wsdl, jax-ws, cxf, wsdl2java

到目前为止，我看到的所有 WSDL 都使用**localhost**来描述服务地址。例如：

```
<wsdl:service name="SQLService">
  <wsdl:port name="SQLServiceSoap" binding="tns:SQLServiceSoap">
     <soap:address location="http://localhost:8080/rservice/services/SQLServiceSoap" />
  </wsdl:port>
</wsdl:service> 
```

但是，当此类服务的**客户端运行时，它***以某种方式*知道该服务的真实 URL 在哪里，即使在**远程**机器上运行！

CXF 是如何发挥这种“魔力”的？

**IOW，在不是**运行服务的机器上的测试机器上的客户端 JAR 如何知道该服务器的位置及其地址？

我`grep`编辑了源代码并`strings`编辑了客户端的 jar 文件，但没有发现任何对服务器 URL 的跟踪。

那么这是如何工作的呢？

**更新**：在我超自然的侦探工作中，我刚刚在**客户端的**JAR 文件`config.xml`所在的目录中找到了一个名为的文件。其中包含实际服务器的 URL 。因此，在我继承的项目的特定情况下，这似乎就是这样做的。**`config.xml`**

 **现在的问题是：

1.  这是这样做的**标准**方式吗？
2.  CXF 中是否有标准（或推荐的方式）？
3.  还是由开发人员决定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T20:00:22.617

在许多情况下，Web 服务将具有一个生产 URL 和一个测试/QA/UAT URL。开发人员将针对测试 URL 进行开发，然后一旦准备好投入生产，他将切换 URL 以指向生产。

由开发人员决定如何完成，并且没有标准的处理方式。**

# html - 有没有办法从客户端编辑缓存清单

> ID：14203250
> 
> 赞同：0
> 
> 时间：2013-01-07T20:08:30.567
> 
> 标签：html, application-cache

在[http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/) 中说明了尝试更新缓存`requires the manifest file to have changed`。这意味着服务器端的人每次想要更新他想要缓存的内容时都必须手动更改清单文件。

出于测试目的，服务器端是否有办法使清单可从客户端编辑，以便用户可以更改清单，以便用户可以将他想要存储的任何内容存储在缓存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:53:45.960

从这篇文章**的客户端**看来，答案是不可能的：[动态触发 HTML5 缓存清单文件？](https://stackoverflow.com/questions/4548342/dynamically-trigger-html5-cache-manifest-file)

# c# - 从 C# 调用的 C++ 托管包装器

> ID：14203251
> 
> 赞同：0
> 
> 时间：2013-01-07T20:08:31.980
> 
> 标签：c#, dll, dllimport, managed-c++, dllexport

我有一些本机 C++ 代码，然后我创建了一个包装器来绕过它。创建者.h

```
#pragma once
#include "file.h"
#define EXPORT __declspec(dllexport)
class EXPORT creator{
public:
  creator();
  ~creator();
  bool function1(int);
  bool startFunction1(char *in, char *cache, char *out, long, double);
}; 
```

包装器.h

```
#pragma once
using namespace System;
namespace nativeWrapper
{
public ref class Wrapper{
public:
creator *c;
Wrapper();
~Wrapper();
bool wStartCreating(System::String ^_in, System:: ^_cache, System:: ^_out);
};
} 
```

wrapper.cpp 让我们直接进入 wStartCreating 函数

```
bool Wrapper::wStartCreating(System::String ^_in, System:: ^_cache, System:: ^_out)
{
char *in = marshaling(_in);
char *out = marshaling(_out);
char *cache = marshaling(_cache);
return c->startFunction(in, cache, out, 0.0, 0.0);
} 
```

在 C# 代码中：

```
[DllImport("wrapper.dll")]
private static extern bool wStartCreating(String _in, String cache, String _out); 
```

然后，我想调用 wStartCreating(String, String, String) 但每当我尝试拨打电话时都会收到 dllnotfoundexception。我尝试添加引用（顺便说一句，这是在 Visual Studio 2005 中），并在构建事件中将 dll 复制到引用的文件夹中。需要一些帮助来了解为什么会出现此运行时错误。谢谢-汤米

# sql-server-2008 - 存储过程错误处理 - 清理但返回原始错误

> ID：14203256
> 
> 赞同：1
> 
> 时间：2013-01-07T20:08:43.843
> 
> 标签：sql-server-2008, stored-procedures, error-handling

`insert`我正在编写一个存储过程，如果失败需要清理一些数据。我希望它执行清理，但如果此插入失败，则返回原始错误（主要用于记录，因为我想确切地了解`insert`失败的原因）。基本上像一个`throw;`in `C#`。有没有一种简单的方法可以做到这一点？

```
BEGIN TRY
    Insert into table (col1) values ('1")
END TRY
BEGIN CATCH
    --do clean up here
    --then throw original error
END TRY 
```

这是可行/良好的做法吗？在调用 proc 的应用程序代码中，我从应用程序的角度处理错误，但清理语句似乎更适合 proc 内部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:10:56.750

我通常会这样做：

```
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[procedure_name]') AND ObjectProperty(id, N'IsProcedure') = 1)
    DROP PROCEDURE [dbo].[procedure_name]
GO

CREATE PROCEDURE [dbo].[procedure_name]
(
    @param1 VARCHAR(100)
   ,@param2 INT
)

AS

/*
*******************************************************************************
<Name>
[procedure_name]
</Name>

<Purpose>
[Purpose]
</Purpose>

<Notes>
</Notes>

<OutsideRef>
Called From: [Called From]
</OutsideRef>

<ChangeLog>
Change No:   Date:          Author:       Description:                          
_________    ___________    __________    _____________________________________
   001       [DATE]         [YOU]         Created.                           
</ChangeLog>
*******************************************************************************
*/
BEGIN
    SET NOCOUNT ON
    SET XACT_ABORT OFF -- Allow procedure to continue after error

    -- *****************************************
    -- Parameter string. Used for error handling
    -- *****************************************
    DECLARE  @ErrorNumber       INT 
            ,@ErrorMessage      VARCHAR(400)
            ,@ErrorSeverity     INT
            ,@ErrorState        INT
            ,@ErrorLine         INT
            ,@ErrorProcedure    VARCHAR(128)
            ,@ErrorMsg          VARCHAR(2000)
            ,@NestedProc        BIT = 1
            ,@Params            VARCHAR(255);    -- String representing parameters, make it an appropriate size given your parameters.

    --Be Careful of the CONVERT here, GUIDs (if you use them) need 36 characters, ints need 10, etc.        
    SET @Params = ''
                + CHAR(13) + '@param1 = ' + COALESCE(CONVERT(VARCHAR(100), @param1), 'NULL') 
                + CHAR(13) + '@param2 = ' + COALESCE(CONVERT(VARCHAR(10), @param2), 'NULL')

    BEGIN TRY
        --If you're using transactions, and want an 'all or nothing' approach, use this so that
        --you only start a single transaction in the outermost calling procedure (or handle 
        --that through your application layer)
        IF @@TRANCOUNT = 0
        BEGIN
            SET @NestedProc = 0
            BEGIN TRANSACTION
        END

        INSERT INTO [TABLE]
            (
             COL1
            ,COL2
            )
        VALUES
            (
             @param1
            ,@param2
            );

        --Commit the transaction if this is the outtermost procedure and if there is a transaction to rollback.
        IF @@TRANCOUNT > 0 AND @NestedProc = 0
        BEGIN
            COMMIT TRANSACTION
        END
    END TRY

    BEGIN CATCH
        --Roll back the transaction if this is the outtermost procedure and if there is a transaction to rollback.
        IF @@TRANCOUNT > 0 AND @NestedProc = 0
        BEGIN
            ROLLBACK TRANSACTION
        END

        -- Execute the error retrieval routine.
        SELECT 
            @ErrorNumber = ERROR_NUMBER(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorProcedure = ERROR_PROCEDURE(),
            @ErrorState = ERROR_STATE(),
            @ErrorLine = ERROR_LINE(),
            @ErrorMessage = ERROR_MESSAGE();

        SET @ErrorMsg = 'Error Number   : ' + CAST(@ErrorNumber AS VARCHAR(5)) + CHAR(13)
                      + 'Procedure Name : ' + @ErrorProcedure + CHAR(13)
                      + 'Procedure Line : ' + CAST(@ErrorLine AS VARCHAR(5)) + CHAR(13)
                      + 'Error Message  : ' + @ErrorMessage + CHAR(13)
                      + 'Parameters     : ' + CHAR(13) + @Params + CHAR(13);

        --Raise the exception.
        RAISERROR (@ErrorMsg, @ErrorSeverity, @ErrorState);
    END CATCH
END
GO 
```

这种类型的过程允许您使用事务嵌套过程（只要期望的效果是，如果在任何地方抛出错误，您最终会返回到外部过程然后回滚）。我认为这个模板无法处理的一个非常重要的场景是抛出一个严重到足以完全终止该过程的错误的情况。也许其他人可以在这方面插话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T14:12:47.230

假设我们使用的表 MyTable 定义为

```
CREATE TABLE [dbo].[MyTable](
    [Col1] [int] NOT NULL
) ON [PRIMARY] 
```

我将使用类似于下面的过程。

在插入失败的情况下，代码将进入 Catch 块，在那里可以执行和分配错误号/消息的检查。

一旦分配了事务，就可以回滚并返回错误号/消息。

您可能需要更改 RAISERROR 错误行中的 SQL Server 错误编号，具体取决于您正在执行的操作。

```
CREATE PROCEDURE [dbo].[zTestProc]

AS
BEGIN

    SET NOCOUNT ON;
    DECLARE 
            @LocalError     INT,
            @ErrorMessage   VARCHAR(4000)

    BEGIN TRY
        BEGIN TRANSACTION TestTransaction

        Insert into MyTable(col1) values ('01/01/2002')

        COMMIT TRANSACTION TestTransaction

    END TRY
    BEGIN CATCH

        SELECT  @LocalError     =   ERROR_NUMBER(),
                @ErrorMessage   =   ERROR_MESSAGE()

        IF( XACT_STATE()) <>0
        BEGIN
            ROLLBACK TRANSACTION TestTransaction
        END

        RAISERROR ('TestSP: %d: %s', 16, 1, @LocalError, @ErrorMessage) ;
        RETURN(0)

    END CATCH

END 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-07T20:16:26.187

试试下面的代码片段。

```
DECLARE @errNum int
DECLARE @rowCount int

BEGIN TRY
    INSERT INTO [TABLE] (COL1) VALUES ('1")
END TRY
BEGIN CATCH
    SET @errNum = @@ERROR
    SET @rowCount = @@ROWCOUNT
    RAISEERROR(@errNum)
END CATCH 
```

# c++ - 如何在 C++ 中为人工神经网络处理多个输入

> ID：14203262
> 
> 赞同：0
> 
> 时间：2013-01-07T20:09:18.403
> 
> 标签：c++, artificial-intelligence, neural-network

C++ 如何实时处理人工神经网络的多个输入？

我假设这没有使用尖峰神经网络，而是一个更传统的网络（即只是一个基本的神经网络，如此处所述）

[http://www.ai-junkie.com/ann/evolved/nnt1.html](http://www.ai-junkie.com/ann/evolved/nnt1.html)

这在实时世界中可能吗？我在想一个人必须单独处理每个输入（这总是会导致相同的输出，因此会出现困境），或者每个时间阈值累积一定数量的输入，然后一次处理它们......

再说一次，有人对同一输入的多个实例做了什么？处理两次？

我问这个是因为我在看神经机器人，我相信它使用了一个普通的神经网络，但我试图在深入研究之前先了解 ANN，并且不确定 ANN 在处理目标输出之前如何处理多个输入（ s)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:54:26.087

你的问题不是很清楚，但我会尽力回答。:)

您可以看到 ANN（*人工神经网络*），例如自适应滤波器的特殊情况。

![一般 AF 示意图](../Images/c0b51bfcac66d9ed28c28365fbba3704.png)

有三个主要要素：

1.  **输入序列**x(n) 。
2.  *参数变量过滤*器。在这种情况下，过滤器是 ANN，参数是神经元权重。
3.  一种*更新算法*，根据所需的实际输出之间的误差更新过滤器参数。在 ANN 中，最常用的更新算法是[反向传播算法](http://en.wikipedia.org/wiki/Backpropagation)。

在ANN中有两个步骤：

*   **训练步骤**。这是困难的部分。你从随机神经元权重开始。您有一系列输入及其所需的输出，并在更新算法开启的情况下运行 ANN。当误差低于某个阈值时，您可以说您的 ANN 已经过训练。这一步通常是*离线*完成的（不是实时的）。

*   **执行步骤**。你有训练有素的 ANN。现在只需将输入**按顺序**放入其中并使用输出。这通常是一个快速的操作，并且可以实时完成（如果这是您的意思）。

现在..“一次多个输入”是什么意思？首先，标准计算机一次只能执行非常少量的操作，标准 PC 有 4/8 个内核，因此*一次*可以执行几乎 4-8 个操作。这个数字对于每个现实世界的 ANN 应用来说都太低了。

你说：

> 有人如何处理相同输入的多个实例？处理两次？

答案是*肯定*的。“执行步骤”是如此之快，以至于没有理由不这样做。在“训练步骤”中，可以在训练开始之前删除重复的输入（因为训练输入是*先验已知的*）。所以这没有问题。:)

# facebook - 当用户可能无法访问 FB 帐户时，此过程对于维护长期存在的 Facebook 访问令牌是否正确？

> ID：14203268
> 
> 赞同：0
> 
> 时间：2013-01-07T20:09:36.053
> 
> 标签：facebook, oauth, facebook-oauth

我正在创建一个系统，以允许我们的客户创建文章并将其发布在我们的 CMS 中。我们被要求实现的一个功能是，当编辑发布一篇文章时，该文章也会发布到公司的 Facebook 墙上。

棘手的部分是被允许发布文章的人可能没有公司整体 FB 帐户的登录凭据。这意味着我不能依靠正常过程来检索帐户的访问令牌（或者看起来如此）。

我做了很多研究，并提出了以下文档来源：

*   [http://developers.facebook.com/docs/howtos/login/extending-tokens/](http://developers.facebook.com/docs/howtos/login/extending-tokens/)
*   [http://developers.facebook.com/docs/howtos/login/server-side-login/](http://developers.facebook.com/docs/howtos/login/server-side-login/)
*   [http://developers.facebook.com/docs/concepts/login/login-architecture/](http://developers.facebook.com/docs/concepts/login/login-architecture/)
*   [http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

从这些看来，为了允许本地授权用户发布到公司的 facebook 墙上，我必须：

*   让具有有效 FB 凭据的用户登录到管理页面
*   单击按钮开始授权过程
*   从 FB 响应中检索短期访问令牌并将其交换为 60 天的长期令牌
*   将 60 天令牌存储在我们的数据库中
*   每次用户尝试发布文章时，测试令牌是否已过期，如果已过期，则提醒管理员他们需要重新授权。

这是完成此任务的唯一工作流程，还是有更简单的方法，最好是不需要最后一步的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:41:34.847

使用页面令牌。使用长期存在的用户访问令牌获取它——然后页面令牌默认不会过期。

# excel - 在 vlookup 结果中删除 #N/A

> ID：14203272
> 
> 赞同：54
> 
> 时间：2013-01-07T20:09:58.773
> 
> 标签：excel, vlookup

如果 B2 在该单元格中没有任何内容，我如何修改此函数以便结果将只是一个空白单元格而不是显示 #N/A？

我*想*我可能需要像 ISERROR 检查这样的东西，但我不是 100% 知道我在做什么。

```
=VLOOKUP(B2,Index!A1:B12,2,FALSE) 
```

谢谢！

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-01-07T20:14:30.473

如果您只想在 B2 为空白时返回空白，则可以专门针对该场景使用附加的 IF 函数，即

`=IF(B2="","",VLOOKUP(B2,Index!A1:B12,2,FALSE))`

或从 VLOOKUP 返回一个空白并显示**任何错误**（例如，包括是否填充了 B2 但 VLOOKUP 未找到该值）如果您有**Excel 2007**或更高版本，则可以使用 IFERROR 函数，即

`=IFERROR(VLOOKUP(B2,Index!A1:B12,2,FALSE),"")`

在早期版本中，您需要重复 VLOOKUP，例如

`=IF(ISNA(VLOOKUP(B2,Index!A1:B12,2,FALSE)),"",VLOOKUP(B2,Index!A1:B12,2,FALSE))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T14:48:30.077

如果您希望在出现 vlookup 错误的情况下更改单元格的颜色，请使用条件格式。为此，请转到“条件格式”>“新规则”。在此选择“选择规则类型”=“仅格式化包含的单元格”。在此之后，下面的窗口会发生变化，在第一个下拉菜单中选择“错误”。之后进行相应的操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-15T06:09:35.537

为避免任何 Excel 函数出现错误，请在 Excel 中使用以 IS* 开头的错误处理函数。使用这些错误处理函数嵌入您的函数，并避免结果中出现不需要的文本。[OfficeTricks 页面](http://officetricks.com/remove-na-excel-error-vlookup/)中的更多信息

# java - Java 夏令时和休眠

> ID：14203274
> 
> 赞同：3
> 
> 时间：2013-01-07T20:10:14.013
> 
> 标签：java, hibernate, h2, dts

我找到了一种使用 UTC 时区创建我想要的日期的方法： [Java Date and Daylight Saving](https://stackoverflow.com/questions/14201469/java-date-and-daylight-saving/14202071)

所以我可以创建“Sun Mar 25 02:00:00”，但是当我在 Hibernate 中插入这个日期时，它没有写它，似乎休眠使用了我无法覆盖的不同时区。

我的问题是，如果我使用 UTC 时区，我无法在这个日期插入我的 Hibernate/H2 数据库：“Sun Mar 25 02:00:00”。

更新1：我正在尝试插入这些值：

```
Sun Mar 25 01:00:00 UTC 2012
Sun Mar 25 02:00:00 UTC 2012
Sun Mar 25 03:00:00 UTC 2012
Sun Mar 25 04:00:00 UTC 2012
Sun Mar 25 05:00:00 UTC 2012
Sun Mar 25 06:00:00 UTC 2012
Sun Mar 25 07:00:00 UTC 2012
Sun Mar 25 08:00:00 UTC 2012
Sun Mar 25 09:00:00 UTC 2012
Sun Mar 25 10:00:00 UTC 2012
Sun Mar 25 11:00:00 UTC 2012
Sun Mar 25 12:00:00 UTC 2012
Sun Mar 25 13:00:00 UTC 2012
Sun Mar 25 14:00:00 UTC 2012
Sun Mar 25 15:00:00 UTC 2012
Sun Mar 25 16:00:00 UTC 2012
Sun Mar 25 17:00:00 UTC 2012
Sun Mar 25 18:00:00 UTC 2012
Sun Mar 25 19:00:00 UTC 2012
Sun Mar 25 20:00:00 UTC 2012
Sun Mar 25 21:00:00 UTC 2012
Sun Mar 25 22:00:00 UTC 2012
Sun Mar 25 23:00:00 UTC 2012 
```

但在数据库中有这些：

![在数据库中](../Images/9ad65d701eb9e9ee9ace7c7a665b5ba4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:45:59.687

这是 JDBC 的“特性”，而不是 Hibernate。因此，您可以在 jdbc 选项（hibernate.cfg.xml 中的 jdbc 连接字符串）中而不是在 Hibernate 选项中更改此行为。默认情况下，日期值始终保存在客户端应用程序的时区中（而不是数据库的时区，因为它似乎更符合逻辑）。例如，MySQL 知道一个 jdbc 连接选项，它强制数据库始终以 UTC 存储日期值。我不知道 H2 是否知道这样的选择，可能不是。

在您的示例中，3 月 25 日是您的白天时间的第一天。3 月 25 日 02:00 在您的时区中不存在，这就是您在数据库中找不到它的原因。

如果您不想要连接字符串中的选项（它的缺点可能并非在所有数据库上都可用），那么有三种可能性可以解决这个问题：

1.  在插入之前和阅读之后，您会在程序中进行时区对话。为此，除了您的普通 getter get/setMyTime() 之外，您还为 Hibernate get/setHibernateMyTime() 编写了一个额外的 getter 和 setter，您可以在其中进行时区转换，并在映射文件或注释中使用它们。对于时区转换，您可以使用 TimeZone.getOffset()。

2.  使用字符串而不是日期。在这种情况下，您不需要进行时区转换，但您必须将字符串转换为日期，反之亦然。

3.  以 UTC 作为本地时间运行应用程序。如果在任何地方都需要用户的本地时间，例如在用户界面中，这将具有缺点。

我们在我们的应用程序中做了解决方案 1.。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T20:14:54.293

你能解释一下你的表的数据结构吗？您在为该列使用 DATETIME 或 TIMESTAMP 吗？

根据 MySQL 官方文档 - MySQL 将 TIMESTAMP 值从当前时区转换为 UTC 进行存储，然后从 UTC 转换回当前时区进行检索。它使用 JDBC 连接的当前时区进行此转换。

这种行为很奇怪但正确，“Sun Mar 25 02:00:00”在您的时区（可能是欧洲中部）中不存在。如果您需要保存该日期，您可以将列创建为 DATETIME。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T15:09:07.543

正如 Johanna 所提到的，有几种方法可以处理这个时区偏移问题。还有一篇文章更详细地解释了这个问题，提供了更多的例子和解决方案。

考虑到上一个答案中的选项 1 并且您不想自己编写所有代码，您可以使用小型开源库[`DbAssist`](https://github.com/montrosesoftware/DbAssist) 。`java.util.Date`它将and映射`java.util.Timestamp`到一个 custom `UtcDateType`，它在内部覆盖 setter 和 getter，以便在读取或写入数据库时​​将数据库中的日期视为 UTC 时区。这是一个方便的解决方案，因为您根本不需要更改实体类。

您所要做的就是添加依赖项（将 5.2.2 替换为您的 Hibernate 版本）：

```
<dependency>
    <groupId>com.montrosesoftware</groupId>
    <artifactId>DbAssist-5.2.2</artifactId>
    <version>1.0-RELEASE</version>
</dependency> 
```

[然后按照项目github](https://github.com/montrosesoftware/DbAssist/wiki#installation-of-the-fix)上的安装指南中的说明应用修复程序。我不会在这里复制它，因为它会根据您是使用 JPA 注释还是 HBM 文件来映射您的实体字段而有所不同；不过，这是一个简单的单线设置。

# javascript - 引导关闭响应菜单“点击”

> ID：14203279
> 
> 赞同：87
> 
> 时间：2013-01-07T20:10:37.053
> 
> 标签：javascript, html, css, twitter-bootstrap

在“产品”上单击我向上滑动一个白色 div（如附件所示）。在响应式（手机和平板电脑）时，我想自动关闭响应式导航栏，只显示白条。

我试过：

```
$('.btn-navbar').click(); 
```

也试过：

```
$('.nav-collapse').toggle(); 
```

它确实有效。然而，在桌面尺寸中，它也被称为并对菜单做一些时髦的事情，它会缩小一秒钟。

有任何想法吗？

![在此处输入图像描述](../Images/9ffe297a51edbaadd778c5827c9c912f.png)

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2014-02-13T02:29:38.433

您不必在引导折叠选项中已包含的内容中添加任何额外的 javascript。相反，只需在菜单列表项中包含数据切换和数据目标选择器，就像使用导航栏切换按钮一样。因此，对于您的 Products 菜单项，它看起来像这样

```
<li><a href="#Products" data-toggle="collapse" data-target=".navbar-collapse">Products</a></li> 
```

然后您需要为每个菜单项重复数据切换和数据目标选择器

**编辑！！！** 为了修复溢出问题并在此修复上闪烁，我添加了更多代码来修复此问题，但仍然没有任何额外的 javascript。这是新代码：

```
<li><a href="#products" class="hidden-xs">Products</a></li>
<li><a href="#products" class="visible-xs" data-toggle="collapse" data-target=".navbar-collapse">Products</a></li> 
```

这是在工作[http://jsfiddle.net/jaketaylor/84mqazgq/](http://jsfiddle.net/jaketaylor/84mqazgq/)

这将使您的切换和目标选择器特定于屏幕尺寸，并消除较大菜单上的故障。如果有人仍然遇到故障问题，请告诉我，我会找到解决办法。谢谢

**编辑**：在引导程序 v4.1.3 和 v5.0 中，我不能使用可见/隐藏类。而不是`hidden-xs`使用`d-none d-sm-block`，而不是`visible-xs`使用`d-block d-sm-none`。

**编辑**：在 bootstrap v5 中，代替`data-toggle`use`data-bs-toggle`和代替`data-target`use `data-bs-target`。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2013-06-26T10:09:57.097

我已经把它与动画一起工作了！

html中的菜单：

```
<div id="nav-main" class="nav-collapse collapse">
     <ul class="nav">
         <li>
             <a href='#somewhere'>Somewhere</a>
         </li>
     </ul>
 </div> 
```

将导航中所有元素的单击事件绑定到折叠菜单（Bootstrap 折叠插件）：

```
 $(function(){ 
     var navMain = $("#nav-main");
     navMain.on("click", "a", null, function () {
         navMain.collapse('hide');
     });
 }); 
```

**编辑** 为了使其更通用，我们可以使用以下代码片段

```
 $(function(){ 
     var navMain = $(".navbar-collapse"); // avoid dependency on #id
     // "a:not([data-toggle])" - to avoid issues caused
     // when you have dropdown inside navbar
     navMain.on("click", "a:not([data-toggle])", null, function () {
         navMain.collapse('hide');
     });
 }); 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-04-19T14:59:49.230

我认为你是工程师..

```
 $('.navbar-collapse ul li a').click(function(){ 
            $('.navbar-toggle:visible').click();
    }); 
```

编辑：要处理子菜单，请确保他们的切换锚点上有下拉切换类。

```
 $(function () { 
            $('.navbar-collapse ul li a:not(.dropdown-toggle)').click(function () { 
                    $('.navbar-toggle:visible').click(); 
            }); 
    }); 
```

编辑 2：添加对电话触摸的支持。

```
 $(function () {
            $('.navbar-collapse ul li a:not(.dropdown-toggle)').bind('click touchstart', function () {
                    $('.navbar-toggle:visible').click();
            });
    }); 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2014-09-20T23:36:11.040

我真的很喜欢 Jake Taylor 的想法，即无需额外的 JavaScript 并利用 Bootstrap 的折叠切换。`data-target`我发现您可以通过稍微修改选择器以包含`in`该类来解决菜单未处于折叠模式时出现的“闪烁”问题。所以它看起来像这样：

```
<li><a href="#Products" data-toggle="collapse" data-target=".navbar-collapse.in">Products</a></li> 
```

我没有用嵌套的下拉菜单/菜单测试它，所以 YMMV。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-08-22T13:15:32.483

为了完整起见，在 Bootstrap 4.0.0-beta 中使用*.show*为我工作......

```
<li>
  <a href="#Products" data-toggle="collapse" data-target=".navbar-collapse.show">Products</a>
</li> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-06-21T19:37:11.187

我假设你有这样一行定义导航区域，基于 Bootstrap 示例和所有

```
<div class="nav-collapse collapse" > 
```

只需添加这样的属性，例如在菜单按钮上

```
<div class="nav-collapse collapse" data-toggle="collapse"  data-target=".nav-collapse"> 
```

我也添加了`<body>`，工作。不能说我已经分析过它或其他任何东西，但对我来说似乎是一种享受......直到你点击 UI 的随机点打开菜单，所以不太好。

丹麦

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-07T22:27:25.343

这有效，但没有动画。

```
$('.btn-navbar').addClass('collapsed');
$('.nav-collapse').removeClass('in').css('height', '0'); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-04-20T18:12:36.930

在 HTML 中，我在每个导航链接的**a**标签中添加了一个**nav-link类。**

 **```
$('.nav-link').click(
    function () {
        $('.navbar-collapse').removeClass('in');
    }
); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-12-12T14:28:58.800

该解决方案在台式机和移动设备上都表现出色。

```
<div id="navbar" class="navbar-collapse collapse" data-toggle="collapse"  data-target=".navbar-collapse collapse"> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-06-20T13:15:11.357

只是为了说明 user1040259 的解决方案，将此代码添加到您的 $(document).ready(function() {});

```
 $('.nav').click( function() {
        $('.btn-navbar').addClass('collapsed');
        $('.nav-collapse').removeClass('in').css('height', '0');
    }); 
```

正如他们所提到的，这不会为移动设置动画......但它确实关闭了项目选择的导航栏

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-11-20T17:38:24.617

对于那些使用 AngularJS 和 Angular UI Router 的人，这是我的解决方案（使用 mollwe 的切换）。其中“.navbar-main-collapse”是我的“数据目标”。

创建指令：

```
module.directive('navbarMainCollapse', ['$rootScope', function ($rootScope) {
    return {
        restrict: 'C',
        link: function (scope, element) {
            //watch for state/route change (Angular UI Router specific)
            $rootScope.$on('$stateChangeSuccess', function () {
                if (!element.hasClass('collapse')) {
                    element.collapse('hide');
                }
            });
        }
    };
}]); 
```

使用指令：

```
<div class="collapse navbar-collapse navbar-main-collapse">
    <your menu> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-08-25T17:49:52.483

这应该可以解决问题。

需要 bootstrap.js。

示例 => [http://getbootstrap.com/javascript/#collapse](http://getbootstrap.com/javascript/#collapse)

```
 $('.nav li a').click(function() {
      $('#nav-main').collapse('hide');
    }); 
```

这与将 'data-toggle="collapse"' 和 'href="yournavigationID"' 属性添加到导航菜单标签的作用相同。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-08-25T17:53:46.140

我正在使用 mollwe 函数，尽管我添加了 2 个改进：

a) 如果单击的链接折叠（包括其他链接），请避免关闭下拉菜单

b) 如果您单击可见的 Web 内容，也隐藏下拉菜单。

```
jQuery.fn.exists = function() {
                  return this.length > 0;
              }

    $(function() {
                var navMain = $(".navbar-collapse");
                navMain.on("click", "a", null, function() {
                    if ($(this).attr("href") !== "#") {
                        navMain.collapse('hide');
                    }
                });

                $("#content").bind("click", function() {
                     if ($(".navbar-collapse.navbar-ex1-collapse.in").exists()) {
                        navMain.collapse('hide');
                    }
                });

            }); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-11-05T12:29:42.557

不是最新的线程，但我搜索了相同问题的解决方案并找到了一个（其他一些问题的混合）。

我给了导航按钮：

```
<type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> ... 
```

一个 id / 标识符，如：

```
 <button id="navcop" type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> 
```

不是最好的“想法”——但是：对我有用！现在您可以检查按钮的可见性（使用 jquery），例如：

```
 var target = $('#navcop');
   if(target.is(":visible")){
   $('#navcop').click();
   } 
```

（注意：这只是一个代码片段！我在导航链接上使用了“onclick”事件！（启动 AJAX 请求。）

结果是：如果按钮是“可见的”，它会被“点击”......所以：如果您使用 Bootstrap 的“全屏视图”（宽度超过 940 像素），则没有错误。

问候拉尔夫

PS：它适用于 IE9、IE10 和 Firefox 25。没有检查其他人 - 但我看不到问题 :-)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-01-06T00:38:46.190

这对我有用。我已经这样做了，当我单击菜单按钮时，我会添加或删除“in”类，因为通过添加或删除该类，默认情况下切换是有效的。'e.stopPropagation()' 是通过引导程序停止默认动画（我猜）你也可以使用'toggleClass' 代替添加或删除类。

$('#ChangeToggle').on('点击', function (e) {

```
 if ($('.navbar-collapse').hasClass('in')) {
            $('.navbar-collapse').removeClass('in');
            e.stopPropagation();
        } else {
            $('.navbar-collapse').addClass('in');
            $('.navbar-collapse').collapse();
        }

    }); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-06-28T16:01:47.023

你可以使用

```
ul.nav {
    display: none;
} 
```

这将默认关闭导航栏。请让我知道有人觉得这很有用

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-03T10:23:32.187

例如，如果您的可切换图标仅对超小型设备可见，那么您可以执行以下操作：

```
$('[data-toggle="offcanvas"]').click(function () {
    $('#side-menu').toggleClass('hidden-xs');
}); 
```

单击 [data-toggle="offcanvas"] 会将引导程序的 .hidden-xs 添加到我的 #side-menu 中，这将隐藏侧面菜单内容，但如果您增加窗口大小，它将再次可见。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-01-25T13:13:57.360

```
$('.navbar-toggle').trigger('click'); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-03-17T05:48:44.867

如果菜单 html 是

```
<div id="nav-main" class="nav-collapse collapse">
     <ul class="nav">
         <li>
             <a href='#somewhere'>Somewhere</a>
         </li>
     </ul>
</div> 
```

on nav toggle 'in' 类被添加并从切换中删除。检查是否打开了响应式菜单，然后执行关闭切换。

```
$('.nav-collapse .nav a').on('click', function(){
    if ( $( '.nav-collapse' ).hasClass('in') ) {
        $('.navbar-toggle').click();
    }
}); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-12-03T12:32:01.387

Tuggle Nav Close，IE 浏览器兼容答案，没有任何控制台错误。如果您使用的是引导程序，请使用此

```
$('.nav li a').on('click', function () {
    if ($("#navbar").hasClass("in")) {
        $('.navbar-collapse.in').show();
    }
    else {
        $('.navbar-collapse.in').hide();
    }
}) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-12-15T04:13:18.427

没有任何 Javascript 的 Bootstrap 4 解决方案

将属性添加`data-toggle="collapse" data-target="#navbarSupportedContent.show"` 到 div`<div class="collapse navbar-collapse">`

确保您提供正确`id`的`data-target`

```
<div className="collapse navbar-collapse" id="navbarSupportedContent" data-toggle="collapse" data-target="#navbarSupportedContent.show"> 
```

> `.show`是为了避免在大分辨率下菜单闪烁

```
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Navbar</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent" data-toggle="collapse" data-target="#navbarSupportedContent.show">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Dropdown
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-09-13T14:29:21.967

我找到了一个简单的解决方案。只需在导航栏链接上添加按钮的切换代码即可。在下面的示例中是代码`data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02"`。

这将在单击时关闭菜单并点击链接

```
 <!--data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" from toggle button --> 
           <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse nav-format-mobile" id="navbarTogglerDemo02">
              <ul class="navbar-nav ms-auto mb-2 mb-lg-0"> <!--https://stackoverflow.com/a/65365121/5763690-->
                <li class="nav-item">

<!--data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" from toggle button to nav item --> 
                  <a class="nav-link" aria-current="page" [routerLink]="'about'" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">About</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Services
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" [routerLink]="'services'" fragment="why-us" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">Overview</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" [routerLink]="'services'" fragment="project" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">For companies</a></li>
                    <li><a class="dropdown-item" [routerLink]="'services'" fragment="startups" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">For Startups</a></li>
                    <li><a class="dropdown-item" [routerLink]="'/services'" fragment="ngos" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">For NGOs</a></li>
                  </ul>
                </li>
                <li class="nav-item">
<!--data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" from toggle button to nav item --> 
                  <a class="nav-link" [routerLink]="'products'" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">Products</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" [routerLink]="'career'" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">Career</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" [routerLink]="'contact'" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">Contact</a>
                </li>
              </ul>
            </div> 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-11-07T23:50:01.587

我在我的 Vue.js 3 应用程序中尝试了其他建议，但是我的 vue-router 路由器链接不再起作用。

如果菜单具有“显示”类，我创建了一个小功能来单击菜单切换。在所有情况下，这对我都很有用。

```
<template>
...
<div
    id="navbarNavigation"
    class="collapse navbar-collapse"
  >
    <ul
      class="navbar-nav me-auto mb-2 mb-lg-0"
    >
      <li class="nav-item">
        <router-link
          :to="route.url"
          class="nav-link"
          @click="closeMenu('navbarNavigation')"
        >
          My route name
        </router-link>
      </li>
    </ul>
  </div>
...
</template>

<script>
setup (props) {
    const closeMenu = (id) => {
      const menuShown = document.getElementById(id).classList.contains('show')
      if (menuShown) {
        const menuToggle = document.getElementsByClassName('navbar-toggler')[0]
        menuToggle.click()
      }
    }

    return { closeMenu }
  }
</script> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-02-07T23:36:28.780

对于使用**Bootstrap 5** + **-attributes**寻找有关**Vue 3`router-link`**的解决方案的窥视者：****`data-bs`****

 **使用`data-bs`-attributes 直接在 Vue 上切换导航`router-link`似乎不起作用 - 因此，如果尚未完成，您需要将每个导航链接包装在父元素中（`li`这是显而易见的选择）并应用`data-bs`该元素的相关属性。

简而言之 - 而不是这个：

```
<li class="nav-item">
  <router-link
    to="/galaxy"
    class="nav-link d-flex"
    data-bs-toggle="collapse"
    data-bs-target="#navbarCollapse.show"
  >
    <v-icon name="gi-galaxy" size="1" class="align-middle" scale="1.5" />
    <span class="flex-fill align-middle text-start ms-3 ms-lg-1">The Galaxy</span>
  </router-link>
</li> 
```

用这个：

```
<li class="nav-item" data-bs-toggle="collapse" data-bs-target="#navbarCollapse.show">
  <router-link to="/galaxy" class="nav-link d-flex">
    <v-icon name="gi-galaxy" class="align-middle" scale="1.5" />
    <span class="flex-fill align-middle text-start ms-3 ms-lg-1">The Galaxy</span>
  </router-link>
</li> 
```****

# silverlight - 如何从删除触发器中获取数据？

> ID：14203280
> 
> 赞同：1
> 
> 时间：2013-01-07T20:10:38.630
> 
> 标签：silverlight, entity-framework, wcf-ria-services, silverlight-5.0, entity-framework-5

假设我有一个表选项卡（ID，名称，...）在删除触发器中，我可以从删除的临时表中获取删除数据，例如

```
declare @Name varchar(50)
select @Name = Name from deleted 
```

假设我在表格中有一行

```
(1, 'MyName), ...) 
```

然后在 SL 应用程序中，我通过从实体集中分离实体来使用 SubmitChange 从 WCF ria 服务中删除。但在此之前，我将 Name 更改为“Yourname”。所以像这样的代码

```
myinstance.Name="YourName";
Context.tabs.Detach(myinstance); 
```

所以我想在触发器中获取值“YourName”。如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:49:59.973

您在应用程序中所做的更改无关紧要。删除适用于存储在数据库中而不是应用程序中的信息。如果要在触发器中获取新值，则必须首先更新记录，然后执行删除。

# php - 向按钮单击添加警报

> ID：14203282
> 
> 赞同：2
> 
> 时间：2013-01-07T20:10:43.467
> 
> 标签：php, jquery, forms

我一直在尝试向我的按钮添加一个警报，以更新数据库中的用户详细信息。

我尝试将 onclick 方法直接添加到按钮并使用函数，但它似乎不起作用。

我的按钮是；

```
<input type="submit" id="profileclick" value="Update" class="button-link"/> 
```

我通过以下方式提交表格：（如果它很重要）

```
<form id="profile" method="post" action="../script/updateUserDetails.php"> 
```

我尝试的方法之一是

```
$('#profileclick').click(function(){
 alert('Your details have been updated');
 $('#profile').submit();
}); 
```

在所有情况下，详细信息都会更新，但我没有收到警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:12:07.713

```
$('#profileclick').click(function(){    
     alert('Your details have been updated');
     $('#profile').submit();
});

$('#profile').submit(function( e ){
         e.preventDefault();

         // ........ AJAX SUBMIT FORM
}); 
```

或者只是在提交之前添加延迟使用`setTimeout`...

```
$('#profileclick').click(function(){    
     alert('Your details have been updated');
     setTimeout(function(){
             $('#profile').submit();
     }, 2000);        
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:30:03.557

```
$('#profileclick').click(function(e) {
    e.preventDefault(); // prevents the form from being submitted by the button
    // Do your thing
    $('#profile').submit(); // now manually submit form
}); 
```

编辑：

只是一个注释。这不会阻止通过其他方式提交表单，例如在文本字段中按 Enter。为了防止表单被提交，您必须在表单本身上使用 preventDefault() ，如另一个答案中给出的那样。

# iphone - presentViewController 什么都不做

> ID：14203285
> 
> 赞同：0
> 
> 时间：2013-01-07T20:10:58.123
> 
> 标签：iphone, cocoa-touch

我有一个方法叫：

```
- (NSDictionary *)requestCompleted:(ASIHTTPRequest *)request{ 
```

正如您可能猜到的那样，它从我从 Web 服务器收到请求时开始。

我的问题是下一个命令运行，但没有做任何事情......</p>

```
[self presentViewController:loadingPageVC animated:YES completion:nil]; 
```

我觉得我忘了初始化一些东西，但我没有什么错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:01:48.840

尝试这个

```
dispatch_async(dispatch_get_main_queue(), ^{
   [self presentViewController:loadingPageVC animated:YES completion:nil];
}); 
```

# java - 在Java中的文本文件中保存换行符

> ID：14203294
> 
> 赞同：0
> 
> 时间：2013-01-07T20:11:45.703
> 
> 标签：java

我想将文本保存在文本文件中，并且需要保存 \n 字符来分隔文本中的元素。正文如下：

“这是一个 java 程序。它将文本保存在 .txt 文件中。

你可以选择它应该保存在哪里。”

如何将 \n （换行符）保存在 .txt 文件中？

以下是我用来将文本保存在文本文件中的代码段：

```
FileOutputStream fout = null;

try {

    fout = new FileOutputStream(destinationFile);

} catch (FileNotFoundException e) {

    System.out.println("output File not found");
    return false;
}

Scanner sc = new Scanner(text);
while (sc.hasNext()) {
    fout.write((sc.next().getBytes()));
}

fout.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:18:14.443

这应该可以解决问题：

```
while (sc.hasNext()) {
  fout.write((sc.next().getBytes()));
  fout.write("\n".getBytes());
} 
```

这会将您输入的行写入标准输入，然后写入换行符，以便文件将由换行符分隔

# c# - 错误：无法删除该对象，因为它在 ObjectStateManager 中找不到。C＃

> ID：14203296
> 
> 赞同：1
> 
> 时间：2013-01-07T20:11:48.657
> 
> 标签：c#, asp.net

我正在尝试从表中删除数据，`Ent_El_Tags{entel_id,tag_id}`当我将删除函数应用于我声明如下的关系时遇到错误，但它适用于添加功能。

```
 [HttpPost]
    public List<Ent_El_Tags> AddTagsToElements([FromUri]ParamsClass parameters)
    {
        var relationships = new List<Ent_El_Tags>();
        foreach (var el in parameters.element_ids)
        {
            foreach (var t_id in parameters.tag_ids)
            {

                var relationship = new Ent_El_Tags { entel_id = el, tag_id = t_id };
                relationships.Add(relationship);
                _context.Ent_El_Tags.Add(relationship);

            }

        }
        _context.SaveChanges();
        return relationships;
    }

    [HttpPost]
    public List<Ent_El_Tags> DeleteTagsToElements([FromUri]ParamsClass parameters)
    {
        var relationships = new List<Ent_El_Tags>();           
        foreach (var el in parameters.element_ids)
        {
            foreach (var t_id in parameters.assigned_ids)
            {
                var relationship = new Ent_El_Tags { entel_id = el, tag_id = t_id };
                relationships.Add(relationship);
                _context.Ent_El_Tags.Remove(relationship);
            }
        }
        _context.SaveChanges();
        return relationships;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:16:30.260

要使用 EntityFramework 删除记录，您需要使用 EntityFramework 从数据库中获取记录，因为该对象将位于 EF ObjectStateManager 中。

```
var relationship = new Ent_El_Tags { entel_id = el, tag_id = t_id };
_context.Ent_El_Tags.Remove(relationship); 
```

将其替换为

```
var relationship = _context.Ent_El_Tags.Where(x=>x.enterl_Id==el && x.tag_id==t_id).FirstOrDefault();
_context.Ent_El_Tags.Remove(relationship); 
```

# mysql - MySQL 使用表 JOIN 更改数据集 .. 我要问的可能吗？

> ID：14203297
> 
> 赞同：0
> 
> 时间：2013-01-07T20:11:55.827
> 
> 标签：mysql, sql, join

这是一个复杂的问题，所以请多多包涵。我正在使用 3 个不同的表来制作 1 个结果集。它们如下：

```
customer_address_entity
    entity_id | entity_type_id | attribute_set_id | increment_id | parent_id | create_at | update_at | is_active

customer_entity_int
    value_id | entity_type_id | attribute_id | entity_id | value

customer_address_entity_varchar
    value_id | entity_type_id | attribute_id | entity_id | value 
```

好的，现在你有了结构，这是我到目前为止构建的 SQL 调用：

```
SELECT CAE.entity_id, 
       CEI.value AS default_entity_id, 
       CAEV.attribute_id, 
       CAEV.value 
FROM   customer_address_entity AS CAE 
       JOIN customer_entity_int AS CEI 
         ON CEI.entity_id = CAE.parent_id 
            AND CEI.attribute_id = '13' 
       JOIN customer_address_entity_varchar AS CAEV 
         ON CAEV.entity_id = CAE.entity_id 
WHERE  CAE.parent_id = '2328' 
       AND CAE.is_active = 1 
```

这将输出以下示例数据集：

```
 ID     default  att   value

'1567', '1567', '19', 'John'
'1567', '1567', '21', 'Doe'
'1567', '1567', '23', 'Johns Company'
'1567', '1567', '25', 'Johns City'
'1567', '1567', '26', 'Johns Country'
'1567', '1567', '27', 'Johns State'
'1567', '1567', '29', 'Johns Zip Code'
'1567', '1567', '30', 'Johns Phone'
'1567', '1567', '31', 'Johns Fax'
'1568', '1567', '19', 'Jane'
'1568', '1567', '21', 'Doe'
'1568', '1567', '23', 'Janes Company'
'1568', '1567', '25', 'Janes City'
'1568', '1567', '26', 'Janes Country'
'1568', '1567', '27', 'Janes State'
'1568', '1567', '29', 'Janes Zip'
'1568', '1567', '30', 'Janes Phone'
'1568', '1567', '31', 'Janes Fax'
'1569', '1567', '19', 'Frank'
'1569', '1567', '21', 'Frunz'
'1569', '1567', '23', 'Franks Company'
'1569', '1567', '25', 'Franks City'
'1569', '1567', '26', 'Franks Country'
'1569', '1567', '27', 'Franks State'
'1569', '1567', '29', 'Franks Zip'
'1569', '1567', '30', 'Franks Phone'
'1569', '1567', '31', 'Franks Fax' 
```

这段代码的最后一部分，我想根据数字`UNIQUE` `entity_id`（返回数据集中的第 1 列，即 0.1567、1568 和 1569）创建 X 个 ROWS（在本例中为 3）。预期的最终结果是：

```
'1567', '1567', 'John', 'Doe', 'Johns Company', 'Johns City', 'Johns State', 'Johns Zip Code', 'Johns Phone', 'Johns Fax'
'1568', '1567', 'Jane', 'Doe', 'Janes Company', ...  etc
'1569', '1567', 'Frank', 'Franz', 'Franks Comapny', ...   etc 
```

这甚至可能吗？

**编辑**感谢 Gordon Linoff——答案既优雅又简单！我自己进行了一些编辑，但会接受 Gordons 的回答并投票。这是我所做的编辑，效果很好！！

```
select entity_id,
   if(entity_id = default_entity_id, 'true', 'false') as default_entity,
   max(case when attr = '19' then `value` end) as `FirstName`,
   max(case when attr = '21' then `value` end) as `LastName`,
   max(case when attr = '23' then `value` end) as `CompanyName`,
   max(case when attr = '25' then `value` end) as `City`,
   max(case when attr = '27' then `value` end) as `State`,
   max(case when attr = '29' then `value` end) as `ZipCode`,
   max(case when attr = '30' then `value` end) as `PhoneNumber`,
   max(case when attr = '31' then `value` end) as `Fax`

from (SELECT CAE.entity_id, CEI.value AS default_entity_id, CAEV.attribute_id AS attr, CAEV.value 
  FROM   customer_address_entity CAE 
         JOIN customer_entity_int CEI 
           ON CEI.entity_id = CAE.parent_id 
              AND CEI.attribute_id = '13' 
         JOIN customer_address_entity_varchar CAEV 
           ON CAEV.entity_id = CAE.entity_id 
  WHERE  CAE.parent_id = '2328' 
         AND CAE.is_active = 1
 ) as t
group by entity_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:21:03.043

您可以使用以下命令执行此操作`group by`：

```
select entity_id,
       MAX(default) as default,
       max(case when att = '19' then value end) as FirstName,
       max(case when att = '21' then value end) as LastName,
       max(case when att = '23' then value end) as CompanyName,
       max(case when att = '25' then value end) as City,
       max(case when att = '27' then value end) as State,
       max(case when att = '29' then value end) as ZipCode,
       max(case when att = '30' then value end) as PhoneNumber,
       max(case when att = '31' then value end) as Fax
from (SELECT CAE.entity_id, CEI.value AS default_entity_id, CAEV.attribute_id, CAEV.value 
      FROM   customer_address_entity CAE 
             JOIN customer_entity_int CEI 
               ON CEI.entity_id = CAE.parent_id 
                  AND CEI.attribute_id = '13' 
             JOIN customer_address_entity_varchar CAEV 
               ON CAEV.entity_id = CAE.entity_id 
      WHERE  CAE.parent_id = '2328' 
             AND CAE.is_active = 1
     ) t
group by entity_id 
```

此过程称为*旋转*，聚合是一种解决方案（某些数据库`pivot`为此提供了关键字）。这假设每个值在每个实体中仅出现一次。此外，如果某个值不存在，它将获得 NULL 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:34:15.440

正如[@Gordon 的](https://stackoverflow.com/questions/14203297/mysql-change-data-set-with-table-join-is-what-i-am-asking-possible/14204220#14204220)回答所指出的，这就是所谓的 a`PIVOT`但 MySQL 没有该功能。在 MySQL 中，您可以将聚合函数与`CASE`语句一起使用。

如果它们都是已知的，您可以对这些值进行硬编码：

```
SELECT CAE.entity_id, 
    CEI.value AS default_entity_id,
    MAX(case when CAEV.attribute_id = 19 then CAEV.value else null end) FirstName,
    MAX(case when CAEV.attribute_id = 21 then CAEV.value else null end) LastName,
    MAX(case when CAEV.attribute_id = 23 then CAEV.value else null end) Company,
    MAX(case when CAEV.attribute_id = 25 then CAEV.value else null end) City,
    MAX(case when CAEV.attribute_id = 26 then CAEV.value else null end) Country,
    MAX(case when CAEV.attribute_id = 27 then CAEV.value else null end) State,
    MAX(case when CAEV.attribute_id = 29 then CAEV.value else null end) ZipCode,
    MAX(case when CAEV.attribute_id = 30 then CAEV.value else null end) Phone,
    MAX(case when CAEV.attribute_id = 31 then CAEV.value else null end) Fax
FROM   customer_address_entity AS CAE 
JOIN customer_entity_int AS CEI 
    ON CEI.entity_id = CAE.parent_id 
    AND CEI.attribute_id = '13' 
JOIN customer_address_entity_varchar AS CAEV 
    ON CAEV.entity_id = CAE.entity_id 
WHERE  CAE.parent_id = '2328' 
    AND CAE.is_active = 1 
GROUP BY CAE.entity_id, CEI.value; 
```

或者你可以使用准备好的语句来实现动态sql。我假设您有一个将每个属性值与属性名称联系起来的表：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when CAEV.attribute_id = ''',
      attribute_id,
      ''' then CAEV.value else null end) AS `',
      attribute_id, '`'
    )
  ) INTO @sql
FROM customer_address_entity_varchar;

SET @sql = CONCAT('SELECT CAE.entity_id, 
                        CEI.value AS default_entity_id, ', @sql, '
                   FROM   customer_address_entity AS CAE 
                   JOIN customer_entity_int AS CEI 
                        ON CEI.entity_id = CAE.parent_id 
                        AND CEI.attribute_id = ''13' '
                    JOIN customer_address_entity_varchar AS CAEV 
                        ON CAEV.entity_id = CAE.entity_id 
                    WHERE  CAE.parent_id = ''2328''
                        AND CAE.is_active = 1 
                    GROUP BY CAE.entity_id, CEI.value');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# java - 奇怪的数组返回类型

> ID：14203298
> 
> 赞同：73
> 
> 时间：2013-01-07T20:11:56.670
> 
> 标签：java, arrays, syntax, declaration

`[]`有没有人看到像这样放置在方法签名之后的数组？

```
public static String mySplit(String s)[] {
    return s.split(",");
}

public static void main(String... args) {
    String[] words = mySplit("a,b,c,d,e");
    System.out.println(Arrays.toString(words));
} 
```

印刷

```
[a, b, c, d, e] 
```

过去，奇怪的符号是“C”兼容性，但我也不会想象有人用 C 写这个。

有谁知道为什么甚至允许这样做？

我正在使用 Java 7 update 10，以防万一。

这在 Java 6 中做同样的事情。[http://ideone.com/91rZV1](http://ideone.com/91rZV1)

* * *

顺便说一句，这不会编译，我也不希望它编译

```
public static <T> List mySplit(String s)<T> {
    return Collections.emptyList();
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-07T20:15:55.253

> 有谁知道为什么甚至允许这样做？

在这种情况下，它是为了向后兼容 Java 本身。从[JLS 第 8.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)：

> 为了与旧版本的 Java SE 平台兼容，允许返回数组的方法声明将（部分或全部）空括号对放置在形参列表之后，这些空括号对构成数组类型的声明。以下过时的产品支持这一点，但不应在新代码中使用。

是的，您确实应该将其视为一种可憎的东西，除了震惊其他开发人员之外没有其他任何目的。实际上，你可以用它在派对上赢一些钱，赌它会编译，对抗那些从未见过它的人......

以下是思想正确的编码人员认为无效的方法：

```
public String[] mwahahaha(String[] evil[])[] {
    return evil;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-07T20:17:30.410

就像是

```
 String[] a; 
```

是相同的

```
 String a[]; 
```

同样适用于方法返回类型的语法

```
 public static String mySplit(String s)[] { 
```

是相同的

```
 public static String[] mySplit(String s) { 
```

但我想我还没有看到你在生产代码中提到的版本。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-07T20:16:01.490

我认为这是相同的原因，以下变量声明都是等价的

```
String[] array
String array[] 
```

这是 C 开发人员所做的事情，所以它被包括在内以帮助他们。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-07T20:16:03.957

我相信它只是告诉Java返回类型是一个数组`Strings`，与声明相同

```
static String[] mySplit(String s) {... 
```

类似于声明变量：

```
String myStringArray[]; 
```

相当于

```
String[] myStringArray; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-08T23:22:36.143

好问题; 当我实现一个 Java 解析器时，我记得此时我被 JLS 语法弄糊涂了。

为了扩展约翰的答案，这是发生了什么：

*   这在规范中称为[“混合表示法”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2)
*   [语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)将类型声明分成两部分，每部分可能有 0 个或多个`[]`s

（至少）有 5 个地方很重要：

*   方法类型签名
*   局部变量声明
*   字段声明
*   形式参数
*   `for`-循环

这是语法的摘录，重点是方法声明：

```
MethodOrFieldDecl:
    Type Identifier MethodOrFieldRest

MethodOrFieldRest:  
    FieldDeclaratorsRest ;
    MethodDeclaratorRest

MethodDeclaratorRest:
    FormalParameters {[]} [throws QualifiedIdentifierList] (Block | ;)

Type:
    BasicType {[]}
    ReferenceType  {[]} 
```

*（警告：语法很难阅读，因为方括号和大括号有时是文字，有时是元字符。）*

这表明`[]`它既可以出现在`Type`规则下，也可以作为规则的一部分出现`MethodDeclaratorRest`。在这两个地方都是可选的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T09:19:47.653

是的，这是允许的，

相同的原因：

```
String[] myArray; 
```

相当于

```
String myArray[]; 
```

# jquery - 在对列进行排序之前，Kendo 网格最初不会分页

> ID：14203300
> 
> 赞同：3
> 
> 时间：2013-01-07T20:11:58.313
> 
> 标签：jquery, asp.net, kendo-ui

再次分页不起作用，直到我单击列标题进行排序，然后分页似乎工作正常。

```
<script type="text/javascript">
$(document).ready(function () {

    $('#reportContainer').load('Reports/Scaffold.html', function () {
        var dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    type: "POST",
                    url: Reports.ServiceURL.MyService,
                    dataType: "JSON",
                    contentType: "application/json",
                    data: { myParam: "1" },
                    serverPaging: true,
                    serverSorting: true
                },

                parameterMap: function (data, operation) {
                    return kendo.stringify(data);
                }
            },

            batch: true,
            pageSize: 50,
            schema: {
                data: "d"
            }
        });

        $("#allGrids").kendoGrid({
            dataSource: dataSource,
            sortable: true,
            pageable: true,
            filterable: false,
            height: 400,
            columns: myModel
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T22:38:36.323

似乎你想选择`serverPaging` *但*你把它放在错误的地方。它是 的`DataSource`而不是 的领域`transport.read`。您应该将其定义为：

```
var dataSource = new kendo.data.DataSource({
    transport    : {
        read        : {
            type       : "POST",
            url        : Reports.ServiceURL.MyService,
            dataType   : "JSON",
            contentType: "application/json",
            data       : { myParam: "1" }
        },
        parameterMap: function (data, operation) {
            return kendo.stringify(data);
        }
    },
    serverPaging : true,
    serverSorting: true,
    batch        : true,
    pageSize     : 50,
    schema       : {
        data: "d"
    }
}); 
```

**注意：**不要忘记，当您定义时`schema.data`，您还需要定义记录总数，如果它来自服务器，您可能会有类似的内容：

```
schema       : {
    data: "d",
    total: "total"
} 
```

并且服务器应该返回一些如下所示的 JSON：

```
{
    "d": [
        ...
    ],
    "total": 100
} 
```

哪里`100`是服务器中的总数或记录，而不是 中的记录数`d`。

如果**不是** `serverPaging`，你可以简单地做：

```
schema   : {
    data: "d",
    total: function(data) { return data.d.length; }
} 
```

@BurkeHolland，如果您想知道正在发生的事情是网格实际上没有做`serverPaging`，并且可能没有接收`total`或无法计算它。它既不是`serverPaging`模式也不是`serverSorting`模式，所以当@SkildLobster 点击标题时，它对结果进行排序（可能它们已经排序），然后它从最终能够计算页面的网格数据长度计算记录总数.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T12:29:29.217

在 MVC Kendo 网格的情况下，我看不到添加模式的明显方法。我通过在加载后对网格进行排序来解决问题，如下所示。在网格中，我添加了一个数据绑定事件：

```
@(Html.Kendo().Grid<tpnconnect.com.Models.Tools.NonWorkingDay>()
            .Name("Holiday_Grid")
            .Events(e => e
                .DataBound("sortHolidayGridByDate")
            ) 
```

我使用了一个 JavaScript 变量来防止事件被多次触发：

```
<script>
    var firstBind = true;

    function sortHolidayGridByDate() {
        if (firstBind == true) {
            firstBind = false;
            var grid = $("#Holiday_Grid").data("kendoGrid");
            var dsSort = [];
            dsSort.push({ field: "NonWorkingDate", dir: "desc" });
            grid.dataSource.sort(dsSort);
        }
    }
</script> 
```

# .net - 功能键的标准操作列表

> ID：14203301
> 
> 赞同：4
> 
> 时间：2013-01-07T20:12:00.793
> 
> 标签：.net, windows

我正在尝试为我的应用程序设置一些快捷方式。一些快捷键应该使用功能键。

用户想要使用的一个特别是 F4 用于“处理订单”。我（偶然）发现 F4 会导致 ComboBox 下拉。（不触发我的命令。）

这让我问，其他按钮有什么作用？

*   **F1**：帮助
*   **F2**：重命名
*   **F3**：？
*   **F4**：组合框下拉
*   **F5**：？
*   **F6**：？
*   **F7**：？
*   **F8**：？
*   **F9**：？
*   **F10**：？
*   **F11**：？
*   **F12**：？

**任何其他功能键是否有标准功能或普遍接受的用途？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:26:43.717

这似乎是一个很好的起点，因为它提到了 F4 下拉组合：

[http://msdn.microsoft.com/en-us/library/ms971323.aspx#atg_keyboardshortcuts_windows_shortcut_keys](http://msdn.microsoft.com/en-us/library/ms971323.aspx#atg_keyboardshortcuts_windows_shortcut_keys)

具体看标题下：`Dialog Box and Common Controls Shortcut Keys`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:47:01.337

Windows 7 的键盘快捷键列表在[此处](http://windows.microsoft.com/en-US/Windows7/Keyboard-shortcuts)。这是一个很长的列表，我会注释你要求的那些：

*   F1：帮助
*   F2：重命名
*   F3：搜索
*   F4：显示活动列表中的项目
*   F5：刷新
*   F6：选择下一步
*   F10：激活菜单
*   F11：最大化/恢复窗口

请注意，其中大多数仅在相关命令有意义时才需要实现。如果程序有菜单，则默认情况下始终只执行 F10。是的，ComboBox 可以识别 F4，当我更好地使用该键时，我不会太担心，快捷键是模糊的。您唯一的选择是是否让 ComboBox 使用密钥。在 ComboBox 使用 ProcessCmdKey() 之前，您劫持了它。

并注意 Visual Studio 也不完全遵守此列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:15:56.047

请参阅此参考：[http ://www.guidingtech.com/10678/best-uses-of-function-keys-f1-f2-f12-windows/](http://www.guidingtech.com/10678/best-uses-of-function-keys-f1-f2-f12-windows/)

最重要和最常见的：

```
F1：帮助
F2：启用编辑（例如文件重命名）
F3：搜索
F4：
F5：刷新或开始
F6：切换选项卡/窗格
F7：
F8：
F9
F10：菜单访问
F11：全屏模式
F12：另存为

```

# php - 在特定日期执行代码

> ID：14203302
> 
> 赞同：-4
> 
> 时间：2013-01-07T20:12:06.567
> 
> 标签：php

是否可以在特定日期执行代码？例如：我希望明天（07/01/2013）到来时，将一个新用户添加到数据库中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:14:26.347

是的，但您应该手动执行它。

或使用[cron](https://en.wikipedia.org/wiki/Cron)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:18:23.640

Cron 可能是最好的选择。

如果您有一个频繁触发的 PHP 应用程序（例如，一分钟加载多次的网页），您还可以将您的业务逻辑放在该应用程序中，并希望它在您需要的窗口期间触发。

# ios - iOS MPMediaPickerController 获取文件数据或文件url

> ID：14203304
> 
> 赞同：0
> 
> 时间：2013-01-07T20:12:10.317
> 
> 标签：ios, media-player, mpmediaitem

我正在寻找一种使用 MPMediPickerController/MPMediaItem 获取本地文件：/// url 或所选音频文件的音频数据字节流的方法。

有谁知道这是否可能？到目前为止，根据我正在为 MediaPlayer 框架阅读的文档，这似乎是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:42:17.957

[MPMediaItems 原始歌曲数据](https://stackoverflow.com/questions/1656124/mpmediaitems-raw-song-data)

我对同样的问题感到震惊。请尝试上面的链接，让我知道这是否对您有用。

# vba - Excel VBA - WorkbookBeforeSave 事件

> ID：14203305
> 
> 赞同：5
> 
> 时间：2013-01-07T20:12:12.153
> 
> 标签：vba, excel

我有一个带有应用程序对象的加载项。该对象被声明为 WithEvents。这使我能够在每次用户保存文件时将一些数据点刷新到中央数据库。这在大多数情况下都有效。但是，有一位用户退出了 Excel 应用程序，该应用程序调用了“保存”对话框。使用未保存的文件退出 Excel 似乎意味着 WorkbookBeforeSave 事件不会触发。

只是为了强调，我已经确认当用户按下 CTRL-S 或按下保存按钮时该事件会触发。我还确认如果我退出应用程序，该事件不会触发。

我可以想到一些解决方法（例如，每 10 秒自动保存一次），但我对此并不感兴趣。任何人都可以确认这种行为和/或是否有人有补救措施？

```
Option Explicit

Private WithEvents mapp As Excel.Application

Private Sub mapp_WorkbookBeforeSave(ByVal Wb As Workbook, ByVal SaveAsUI As Boolean, Cancel As Boolean)

    ' Sanity preservation device
    Msgbox "WorkbookBeforeSave event fired."
    SaveSomeData Wb

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:36:12.847

您可以使用`Workbook_BeforeClose`例程和工作簿对象的`Saved`属性。

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)

    If ThisWorkbook.Saved = False Then
        'Call save function
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:33:58.927

您是否考虑过在 BeforeClose 之前使用？这可能是一个更好的选择。

# ios - 如何始终将视图控制器保持在纵向模式？

> ID：14203310
> 
> 赞同：0
> 
> 时间：2013-01-07T20:12:58.150
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uiinterfaceorientation

这是解释它的最简单方法，请记住视图嵌套在导航控制器中：

1.) 应用程序启动，无论设备处于什么方向，应用程序都是纵向的。我有 shouldRotate 方法返回 no，所以它永远不会旋转。

2.）我单击一个按钮，转到另一个视图并将其转为横向（这很好）

3.) 在另一个视图中处于横向时，我点击了导航控制器上的“返回”按钮，它会将我返回到视图控制器，我不想横向旋转。

什么是让我的主视图控制器始终保持纵向的好方法，同时来自横向的视图控制器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:15:34.283

如果您的设计允许，您可能只想隐藏后退按钮，直到应用程序旋转回纵向。这将迫使它们在导航返回时处于您需要的方向。

# c++ - 如果父/主线程死亡，std::async 调用会发生什么

> ID：14203311
> 
> 赞同：2
> 
> 时间：2013-01-07T20:12:59.767
> 
> 标签：c++, c++11, std, stdthread, stdasync

如果我是对的，std::async 使用一个新线程并调用其中的方法。我想知道如果主线程或父线程死了会发生什么。控制异步方法的线程是否也会死亡。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T20:23:05.000

C++ 中没有“父”线程的概念，每个线程都独立于创建它的线程。但是，`main`线程是特殊的，如果它返回`main()`或调用`exit()`，那么即使其他线程仍在运行，整个应用程序也会终止。一旦发生这种情况，如果仍在运行的线程访问主线程堆栈上的任何全局变量或自动对象，或者使用任何标准库对象或调用信号处理程序中不允许的任何函数，则程序将具有未定义的行为。

简而言之，`main`如果您期望得到合理的结果，请不要让其他线程在完成后运行。

# android - 可加载内核模块：未知符号 malloc_sizes (err 0)

> ID：14203312
> 
> 赞同：0
> 
> 时间：2013-01-07T20:13:08.803
> 
> 标签：android, android-ndk, malloc, kernel-module

我为 android 开发了一个可加载内核模块 (LKM)。

我使用`kzalloc`：

```
device = kzalloc(ndevices * sizeof (*device), GFP_KERNEL); 
```

它工作了一段时间，但在我的 android 更新后（因为 4.1 它不再工作），我收到以下错误`insmod`：

```
insmod module.ko
insmod: init_module 'module.ko' failed (No such file or directory)

DMESG says:
Unknown symbol malloc_sizes (err 0) 
```

这有关系`inux/slab.h`，这就是我所知道的。

我在谷歌上搜索了几天，我很沮丧没有找到解决这个问题的解决方案并让 LKM 再次工作。

也许有人可以帮助我吗？

结论：

接受的答案是正确的：尝试删除slab.h 并将缺少的方法定义为“extern”。或者在您的内核源代码中，使用“make menuconfig”并将 SLAB 更改为 SLUB（有关详细信息，请参阅答案中的第一条评论）。

剩下的问题在一个新的、更具体的主题中处理：

[已编译 LKM 的可互换性](https://stackoverflow.com/questions/14241174/interchangeability-of-compiled-lkms)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:19:47.143

所以你需要告诉我们内核版本。但是查看 linux 内核版本和内存分配器，看起来默认的主线内核从 SLAB 切换到了 SLUB。

> 默认情况下，Linux 内核使用 SLAB 分配系统，直到版本 2.6.23，当 SLUB 分配成为默认值时。

除非您正在编写模块或依赖于 SLAB 的东西（这极不可能），否则您可能不想包含`linux/slab.h`标头。

# jms - 如何指示 Websphere MQ 不显示 JMS 标头？

> ID：14203313
> 
> 赞同：4
> 
> 时间：2013-01-07T20:13:09.247
> 
> 标签：jms, ibm-mq

我在 Linux 上运行 Weblogic 10.3，并且已经设置了一个到 Webspere MQ 的桥。我正在从 Weblogic 发送一个 TextMesasge，它正在传输到 MQ。但是当我在 MQ 端阅读消息时

```
// Receiver reader - my class
reader.qMgr = new MQQueueManager(qManager);
int openOptions = MQOO_INPUT_AS_Q_DEF | MQOO_OUTPUT ;

MQQueue localQueue = reader.qMgr.accessQueue(queueName, openOptions);
MQMessage msg = new MQMessage();
MQGetMessageOptions gmo = new MQGetMessageOptions(); 
localQueue.get(msg, gmo);

int n = msg.getDataLength();
System.out.println("The message is " + n + " bytes long");
String msgText = msg.readStringOfByteLength(n);
System.out.println("The message is: " + msgText); 
```

我正进入（状态：

消息长度为 154 字节 消息为：RFH ��MQSTR � jms_text Hqueue:///Q113575850399442 ABCDE

“ABCDE”是我的信息。

我是否必须以某种方式指示 Websphere MQ 执行 JMS->MQ 转换，以便将消息读取为简单的“ABCDE”？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T07:42:26.710

发送消息的程序应按[此处](http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/topic/com.ibm.mq.csqzaw.doc/uj25510_.htm)`TARGCLIENT`所述设置参数。

请记住，所有 WMQ V6.x 都不支持。如果您要使用受支持的版本之一（所有 v7.x），您将能够设置队列的`PROPCTL`属性以使 QMgr 剥离 JMS 标头而无需或几乎没有代码更改。

如果您的公司有支持协议，您可以通过 Passport Advantage 获得新版本的 WMQ。新客户端作为[SupportPac MQC75 免费提供。](http://ibm.co/SupptPacMQC75) 您可以混合使用客户端和 QMgr 版本，新客户端有许多错误修复和新功能（其中许多即使在连接到旧 QMgr 时也可以使用）。较新的客户端和 QMgr 还将具有 V6 代码中不存在的安全补丁。请尝试至少获得客户端的受支持版本，因为它是免费的，但最好也是 QMgr 的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:38:06.230

如果您在 WebSphere MQ 端使用受支持的 JMS API，则无需执行任何转换即可获取消息的内容。

您只需调用将返回消息内容 (ABCDE) 的 javax.jms.TextMessage.getText() 方法。

# android - 为什么我在 Android SDK Manager 中没有触摸屏支持？

> ID：14203315
> 
> 赞同：0
> 
> 时间：2013-01-07T20:13:14.757
> 
> 标签：android, sdk

我想创建一个支持触摸屏的新 AVD，但硬件规格选项中没有。我在网上搜索，发现当我尝试创建新的 AVD 时，我应该可以选择添加新硬件。为什么我没有这个选项？我已经下载了 SDK，并安装了 Android 2.3 API 和所有额外的包。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:14:58.043

所有 AVD 都支持触摸屏。我看不到*阻止*触摸屏支持的选项。

# ios - 我可以在我的应用启动时加载所有标签的数据吗？

> ID：14203317
> 
> 赞同：0
> 
> 时间：2013-01-07T20:13:21.437
> 
> 标签：ios, performance

我有一个工作正常的选项卡栏应用程序，但如果应用程序在没有在后台运行的情况下打开，那么选项卡的打开速度会比平时慢一些，因为它们正在加载 plist。

应用程序启动时是否可以将所有数据加载到视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:24:52.763

我建议使用所有视图控制器都可以查询的服务类。定义此类帮助器类的常用方法是使用单例设计模式。单例模式只允许实例化单例类的一个实例。使用此方法，您知道将使用此服务的所有其他实例都将通过这个实例。

这是我通常使用的片段，它可能不是最佳的，所以我邀请其他用户提出更改建议：

```
//.h:

+ (MySingletonServiceInstance *)sharedInstance;

//.m:

static MySingletonServiceInstance *sharedInstance = nil;

+ (MySingletonServiceInstance *)sharedInstance{
    @synchronized(self){
        if(sharedInstance == nil)
            sharedInstance = [[self alloc] init];
    }
    return sharedInstance;
}

- (id)init {    
    if ((self = [super init])) {
        //Set up
    }
    return self;
} 
```

现在在任何其他类（例如需要一些数据的视图控制器）中，您可以执行以下操作：

```
[[MySingletonServiceInstance sharedInstance] doSomething]; 
```

或者

```
NSDictionary *myData = [MySingletonServiceInstance sharedInstance].data; 
```

它会调用同一个对象。我经常使用单例对象来加载数据等，无论它是 Web 服务的接口还是本地 CoreData 的接口。这是一个非常有用的设计模式，我通过学习它学到了很多东西。

# c - 为什么 fopen() 会改变数组中元素的值？

> ID：14203321
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:13:54.800
> 
> 标签：c

```
int getbit(int * list, int n)
{
    return (list[n / 32] >> (n % 32)) & 1;
}
void setbit(int * list, int n)
{
    list[n / 32] |= 1 << (n % 32);
}
int main()
{
    FILE * out;
    int size = 99; //2000000000;
    int root = sqrt(size);
    int * list = malloc(size / 8.0); //(2*10^9)/8
    memset(list, 0, sizeof list);
    int i, j;
    for (i = 2; i <= root; i++)
        for (j = 2 * i; j < size; j += i)
            setbit(list, j);
    printf("i=%d j=%d 98=%d\n", i, j, getbit(list, 98));
    out = fopen("output.txt", "w");
    printf("i=%d j=%d 98=%d\n", i, j, getbit(list, 98));
    /*for (i=2; i<size; i++)
    if (!getbit(list, i))
        fprintf(out, "%d\n", i);
     fclose(out);*/
    return 0;
} 
```

每当我在 printf 之间使用 fopen() 时，第三个参数的值就会从 1 变为 0。如果我注释掉该行，那么该值是相同的。这背后的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:21:55.237

您会看到未定义的行为：`sizeof(list)`可能是 4 或 8 个字节，具体取决于架构，因此`memset`零不会超过第四个字节。您正在读取第三个 32 位*word*，它来自`malloc`并且尚未被初始化`memset`。此外，您分配了 12 个字节（`size/8.0`转换为；将 a或 a传递给`int`永远没有意义，因为您不能分配小数字节），因此访问第 98 位会超出分配的区域。`float``double``malloc`

您应该修复这些未定义的行为：通过使用分配足够的内存

```
// count needs to be a multiple of sizeof(int)
// The math gets pretty ugly here, but it should work:
int count = sizeof(int)*(size+(8*sizeof(int))-1)/(8*sizeof(int));
int * list = malloc(count); 
```

然后使用适当的大小将数据初始化为零：

```
memset(list, 0, count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:25:18.913

您正在写入您不拥有的内存，具有未定义的行为。

首先，您在这里只分配 12 个字节：

```
int* list = malloc(size / 8.0); 
```

你应该这样做（只是给你的想法，我不知道你真正想要分配多少字节..）：

```
int* list = malloc((size / 8.0) * sizeof(*list)); 
```

其次，你在这里只设置 4 个字节（如果你在 32 位系统上）：

```
memset(list, 0, sizeof list); 
```

你应该做这个：

```
memset(list, 0, (size / 8.0) * sizeof(*list)); 
```

最后，您调用`fopen()`更改内容的唯一原因是`fopen()`分配内存。

祝你好运。

# iphone - GCDAsyncSocket 并发送 SIP 数据包

> ID：14203326
> 
> 赞同：0
> 
> 时间：2013-01-07T20:14:10.660
> 
> 标签：iphone, cocoa, sockets, gcdasyncsocket

我尝试将邀请发送到 SIP 服务器：

```
 GCDAsyncSocket *outgoingCallSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:socketOutgoingCallQueue];

        BOOL result = [outgoingCallSocket connectToHost:currentSoftswitch.ip onPort:5060 error:&error]; 
```

里面

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag 
```

然后，当套接字连接时：

```
- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port;
{
    NSLog(@"Connected socket to %@:%hu", host, port);
    [sock writeData:finalData withTimeout:-1 tag:OUTGOING_CALL];
    NSLog(@"\n===================SEND START TO currentSoftswitch.ip->%@:5060 =================\n%@\n===================SEND FINISH=================\n",host,[[NSString alloc] initWithData:finalData encoding:NSUTF8StringEncoding]); 
```

这是结果：

```
> ===================SEND START TO currentSoftswitch.ip->195.26.84.147:5060 ================= INVITE
> sip:380442399740@91.224.223.42;transport=tcp;lr SIP/2.0 Via:
> SIP/2.0/TCP 195.26.84.147:5060;rport;lr SIP/2.0 Max-Forwards: 70 From:
> "alex@ixc.ua"
> <sip:897542@91.224.223.42>;tag=Ztr3.0MabqPlVkNJHHVdvAdeNGUXsz8E To:
> sip:380442399740@195.26.84.147 Contact: "alex@ixc.ua"
> <sip:897542@10.129.244.143:5060;transport=TCP;ob> Call-ID:
> zu.MBTPcv87dylX2i-BsA.b551Kyflic CSeq: 25575 INVITE Route:
> <sip:195.26.84.147;transport=tcp;lr> Route: <sip:195.26.84.147;lr>
> Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY,
> REFER, MESSAGE, OPTIONS Supported: replaces, 100rel, timer, norefersub
> Session-Expires: 1800 Min-SE: 90 User-Agent: CallsFreeCalls
> SSContent-Type: application/sdp Content-Length: 480
> 
> v=0 o=- 3566574154 3566574154 IN IP4 46.211.183.202 s=pjmedia c=IN IP4
> 46.211.183.202 b=AS:84 t=0 0 a=X-nat:6 m=audio 40000 RTP/AVP 104 18 108 3 8 0 96 c=IN IP4 46.211.183.202 b=TIAS:64000 a=rtcp:40001 IN IP4
> 46.211.183.204 a=sendrecv a=rtpmap:104 SILK/8000 a=fmtp:104 useinbandfec=0 a=rtpmap:18 G729/8000 a=rtpmap:108 iLBC/8000 a=fmtp:108
> mode=30 a=rtpmap:3 GSM/8000 a=rtpmap:8 PCMA/8000 a=rtpmap:0 PCMU/8000
> a=rtpmap:96 telephone-event/8000
> 
> ===================SEND FINISH================= 
```

但是当我签入 whireshark 时，没有像 SIP 那样检测到数据包。我哪里错了？

![在此处输入图像描述](../Images/21080f265cb6534877a01f835182699b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:57:37.580

简单的答案 - 错误的内容长度！

# iphone - cocos 2d 检测 2 个精灵中的同时触摸 - 就像在水果忍者游戏中一样

> ID：14203331
> 
> 赞同：0
> 
> 时间：2013-01-07T20:14:30.457
> 
> 标签：iphone, cocos2d-iphone, touch, sprite

我想知道如何在 cocos2d 中同时触摸 2 个精灵时检测到。我正在创建一个类似于水果忍者的游戏，我想在我用刀片同时粉碎两个精灵时添加一些奖励积分。我已经尝试过类似的方法，但它不起作用：

```
(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

    //Add a new body/atlas sprite at the touched location
    for( UITouch *touch in touches ) {
        CGPoint location = [touch locationInView: [touch view]];

        location = [[CCDirector sharedDirector] convertToGL: location];

        //[self addNewSpriteAtPosition: location];
        [_blade dim:YES];
        [_bladeSparkle stopSystem];

        for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
        {

            if (b->GetUserData() != NULL) {
                PolygonSprite *sprite = (PolygonSprite*)b->GetUserData();
                NSLog(@"sprite entered, exited %d, %d",sprite.sliceEntered,sprite.sliceExited);
                if(sprite.type == kTypeTrapPrice && CGRectContainsPoint(sprite.boundingBox, location))
                {
                    NSLog(@"TOUCHED");

                    noTouch++;
                }
            }
        }
    }
     // NSLog(@"NO TOUCH %i",noTouch);
    [self clearSlices];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:51:25.210

你看过下面的教程吗？

[http://www.raywenderlich.com/14302/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-1](http://www.raywenderlich.com/14302/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-1)

另外，那里还有很多其他很棒的。

# javascript - CRM for Outlook 中的布局问题

> ID：14203332
> 
> 赞同：0
> 
> 时间：2013-01-07T20:14:33.303
> 
> 标签：javascript, outlook, dynamics-crm-2011

我刚刚意识到，在线版本中带有网络资源的表单的一个很好且有效的布局在通过 Outlook 访问时会丢失一些（但不是全部）格式。它看起来很丑，而且我也遇到错误。

它在某种程度上与添加到解决方案中的 JavaScript 有关。或者，更确切地说，网络资源，我会说。关于如何调试的任何建议？从 Outlook 运行时，F12 不显示控制台。我对那个版本没有做太多，所以任何提示都可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:49:22.743

你能把你的问题缩小到脚本的一部分吗？例如，您能否禁用和启用部分脚本以查看哪些有效，哪些无效？

由于布局也受到影响，我认为您正在做一些（或很多？）DOM操作。[MSDN 上的此页面](http://msdn.microsoft.com/en-us/library/hh771584.aspx)指出：

> 不支持 HTML DOM 操作

但是使用 Outlook 应该不会有那么大的问题（之前听说过……）：[Dynamics CRM 2011 Outlook 客户端和浏览器呈现](https://stackoverflow.com/questions/13518636/dynamics-crm-2011-outlook-client-and-browser-rendering)

编辑：只是为了防止人们从评论中忽略指向相关帖子的链接：[CRM 2011 Outlook 客户端中的随机 JavaScript 错误](https://stackoverflow.com/questions/10128333/random-javascript-errors-in-crm-2011-outlook-client)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:16:34.933

尽管您在 CRM-Outlook 中看到的页面确实是由 IE 呈现的，但它是从另一个版本的引擎提供的，而不是用于浏览的。在呈现过程中，它是“*图像化的”（没有更好的词来形容*它），因此您看到的内容源自网页，但不是网页。

我认为没有办法调试**该**版本。您只能相信您测试过的开发将按预期工作。注意，没有IE的连接进程与Outlook客户端同时运行。

我很乐意纠正，但到目前为止我已经尝试过（而且我已经尝试了很多**很多**），没有办法到达那里。

# c# - 在控件之间同步鼠标点击

> ID：14203333
> 
> 赞同：0
> 
> 时间：2013-01-07T20:14:36.683
> 
> 标签：c#, treeview, .net-2.0, tablelayoutpanel, window-messages

我有一个 TableLayoutPanel 和一个 Treeview，我想彼此同步鼠标点击。这样做的原因是我希望能够在我的 TableLayoutPanel 中选择一些东西，然后它也应该在 Treeview 中选择一些东西。

这是它的外观：

![在此处输入图像描述](../Images/54ece6c51f71d4736da64c8a5eda9692.png)

我的第一次尝试有效，但有一些延迟。我将 Treeview 连接到 NodeMouseClick 事件，当该事件触发时，我*Refresh()* TableLayoutPanel 以便调用 CellPaint 事件并绘制整行。使用这种方法，我看到一些延迟，因为先绘制 Treeview，然后绘制 TableLayoutPanel。

当我使用相同的方法但反过来（单击 TableLayoutPanel 并在 Treeview 中选择相应的节点）时，我没有得到尽可能多的*延迟*。我猜这是因为绘制行所需的时间比选择节点所需的时间长。

我尝试了不同的解决方案：

```
class TableControl : TableLayoutPanel
{
    TreeViewWithPaint m_TreeviewChild;

    public void AddChildControl(TreeViewWithPaint treeview)
    {
        m_TreeviewChild = treeview;
    }

    protected override void WndProc(ref Message message)
    {
        const int WM_LBUTTONDOWN = 0x201;

        switch (message.Msg)
        {
            case WM_LBUTTONDOWN:
                //invalidate our table control so the OnPaint Method gets fired
                this.Update();
                //now copy the message and send it to the treeview
                Message copy = new Message
                {
                    HWnd = m_TreeviewChild.Handle,
                    LParam = message.LParam,
                    Msg = message.Msg,
                    Result = message.Result,
                    WParam = message.WParam
                };
                //pass the message onto the linked tree view
                m_TreeviewChild.RecieveWndProc(ref copy);
                break;
        }
        base.WndProc(ref message);
    } 
```

在我的 Treeview 类中，我添加了这个：

```
 public void RecieveWndProc(ref Message m)
    {
        base.WndProc(ref m);
    } 
```

*我想到了一个[如何同步 Treeview 滚动条的例子](https://stackoverflow.com/questions/6442911/how-do-i-sync-scrolling-in-2-treeviews-using-the-slider)*

问题在于 TableLayoutPanel 中的 CellPaint 事件不再被触发，即使使用*Update()* ......它确实在 Treeview 中选择了正确的节点：

![在此处输入图像描述](../Images/731a92b798457d0b9d2ce56aa1f010c2.png)

如果我尝试在 Treeview 中实现相同的东西（覆盖 WndProc），我也预见到会出现一些问题，这会导致复制消息的疯狂循环吗？

那么有没有（n）（简单）方法可以做到这一点？

谢谢</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:38:13.387

解决了它，而不是尝试向 TableLayoutPanel 发送另一个点击消息，我只是在 Treeview WM_LBUTTONDOWN 中完成了所有的绘画（我对 TableLayoutPanel WM_LBUTTONDOWN 消息做了同样的事情）

```
const int WM_LBUTTONDOWN = 0x201;

switch( message.Msg ) 
{
    case WM_LBUTTONDOWN:
        Int16 x = (Int16)message.LParam;
        Int16 y = (Int16)((int)message.LParam >> 16);

        //Getting the control at the correct position
        Control control = m_TableControl.GetControlFromPosition(0, (y / 16));

        if (control != null)
            m_TableControl.Refresh();

        TreeNode node = this.GetNodeAt(x, y);
        this.SelectedNode = node;
        break;
} 
```

# ant - 蚂蚁 对比 任务

> ID：14203337
> 
> 赞同：25
> 
> 时间：2013-01-07T20:14:52.770
> 
> 标签：ant, import, include

我现在看到 Ant 既有`<include>`任务又有`<import>`任务。

根据描述：

> ## 包括
> 
> 在当前项目中包含另一个构建文件。

和

> ## 进口
> 
> 将另一个构建文件导入当前项目。

那么，为什么要使用另一种呢？

这是我的实际问题：

在我们当前的构建系统中，我们连接了一堆 JavaScript，然后将它们最小化。JavaScript 位于十几个不同的目录中，我们从每个目录中获取批次并将它们连接成五到六个超级最小化的 JavaScript。其中一些文件被复制到多个超级 JavaScript 中。

为了使调试更容易，并且构建更灵活，我想将所有文件复制到`target/work/resources2`目录中，其中每个子目录代表不同的超级最小化 JavaScript。出于调试目的，我们将包括非最小化的超级 JavaScript 和原件。构建脚本并不复杂，但整个部分占用了很多行。我想把这些`<copy>`东西放到一个单独的 XML 文件中，所以整个东西看起来像这样：

```
<target name="process-resources"
     description="Concatenate and minimize the JavaScripts (using Maven lifecycle names for our targets">
     <!-- The following include the copying stuff -->
     <here.be.dragons file="${basedir}/reservations.xml"/>
     <here.be.dragons file="${basedir}/date.xml"/>
     <here.be.dragons file="${basedir}/select.xml"/>

     <for param="concat.dir">
         <fileset dir="${work.dir]/resources2"/>
         <sequential>
            <here.I.am.concatenating.and.minimizing/>
         </sequential>
    </for>
</target> 
```

我看到有四种可能：

*   用于`<ant/>`调用进行复制的文件
*   使用`<import/>`（这可能不起作用，因为它可能无法包含在目标中）
*   使用`<include/>`（这可能不起作用，因为它可能无法包含在目标中）
*   使用[实体包括](http://ant.apache.org/faq.html#xml-entity-include)。

我从不疯狂使用`<ant/>`，或者`<antcall>`尽管这可能是这样做的好时机。实体包含的想法会起作用，但这是大多数人不理解的，我担心它会给那些必须支持我正在做的事情的人带来困惑。`<import>`和`<include>`可能无法在这种情况下使用，但我仍然很好奇有什么区别。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-07T20:28:53.350

[import 的文档解释了差异](http://ant.apache.org/manual/Tasks/import.html)：

## 导入与包含有何不同？

> 简短版本：如果您打算覆盖目标，请使用 import，否则使用 include。
> 
> 使用 import 时，导入的目标最多可使用两个名称。它们的“正常”名称没有任何前缀，并且可能带有前缀名称（as 属性的值或导入项目的 name 属性，如果有的话）。
> 
> 使用 include 时，包含的目标仅以前缀形式提供。
> 
> 使用 import 时，导入目标的依赖属性保持不变，即它使用“普通”名称并允许您覆盖依赖列表中的目标。
> 
> 使用 include 时，包含的目标不能被覆盖，并且它们的依赖属性被重写，以便使用前缀名称。这允许包含文件的编写者控制作为依赖项的一部分调用哪个目标。
> 
> 可以通过使用不同的前缀多次包含同一个文件，不能多次导入同一个文件。

# coffeescript - Coffeescript 记忆？

> ID：14203348
> 
> 赞同：1
> 
> 时间：2013-01-07T20:15:24.130
> 
> 标签：coffeescript

我有一个函数可以将数字显示为格式正确的价格（以美元为单位）。

```
var showPrice = (function() {
  var commaRe = /([^,$])(\d{3})\b/;
  return function(price) {
    var formatted = (price < 0 ? "-" : "") + "$" + Math.abs(Number(price)).toFixed(2);
    while (commaRe.test(formatted)) {
      formatted = formatted.replace(commaRe, "$1,$2");
    }
    return formatted;
  }
})(); 
```

据我所知，重复使用的正则表达式应该存储在一个变量中，以便它们只编译一次。假设这仍然是正确的，那么这段代码应该如何在 Coffeescript 中重写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:29:27.760

这是 CoffeeScript 中的等价物

```
showPrice = do ->
  commaRe = /([^,$])(\d{3})\b/
  (price) ->
    formatted = (if price < 0 then "-" else "") + "$" + Math.abs(Number price).toFixed(2)
    while commaRe.test(formatted)
      formatted = formatted.replace commaRe, "$1,$2"
    formatted 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T20:31:38.127

您可以使用[js2coffee](http://js2coffee.org/)将您的 JavaScript 代码翻译成 CoffeeScript 。对于给定的代码，结果是：

```
showPrice = (->
  commaRe = /([^,$])(\d{3})\b/
  (price) ->
    formatted = ((if price < 0 then "-" else "")) + "$" + Math.abs(Number(price)).toFixed(2)
    formatted = formatted.replace(commaRe, "$1,$2")  while commaRe.test(formatted)
    formatted
)() 
```

我自己的版本是：

```
showPrice = do ->
  commaRe = /([^,$])(\d{3})\b/
  (price) ->
    formatted = (if price < 0 then '-' else '') + '$' +
                Math.abs(Number price).toFixed(2)
    while commaRe.test formatted
      formatted = formatted.replace commaRe, '$1,$2'
    formatted 
```

至于重复使用的正则表达式，我不知道。

# mysql - MySQL存储过程中创建的临时表的范围

> ID：14203353
> 
> 赞同：15
> 
> 时间：2013-01-07T20:15:47.950
> 
> 标签：mysql, stored-procedures, temp-tables

问题撤回！当我正确拼写所有内容时，问题就消失了！

我有一个创建临时表的 MySQL 存储过程。当我从 mysql 提示符调用该过程时，它似乎运行成功，但是如果我从临时表中选择 COUNT(*)，则会收到一条错误消息，指出该表不存在。

当存储过程结束时，在存储过程中创建的临时表是否不复存在？

```
mysql> delimiter //
mysql> drop procedure if exists sp_temp_reciepts//
mysql> create procedure sp_temp_receipts ()
begin
  drop temporary table if exists receipts;
  create temporary table receipts
  (  ... snip ...
  );
  insert into receipts
  select ... snip ...
end//
mysql> delimiter ;
mysql> call sp_temp_reciepts();
Query OK, 46903 rows affected, 1 warning (2.15 sec)
mysql> select count(*) from receipts;
ERROR 1146 (42S02): Table 'receipts' doesn't exist 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-31T16:13:55.460

这个问题已经有一年多了。它值得一个答案。它是这样的：

我今天刚刚在 DBA StackExchange 中看到了这个问题：[如果我不删除它，临时 MEMORY 表会持续多久（MySQL）](https://dba.stackexchange.com/q/57971/877)。我刚刚回答了。我有一部分是这样说的：

根据[**书**](https://rads.stackoverflow.com/amzn/click/com/0596100892)

![kdsjx](../Images/029a04df4d13c06a54d90845ac9c1108.png)

第 5 章有一个副标题**将结果集返回到另一个存储过程**。

它在第 117 页的第 2 段中说：

> 不幸的是，将结果集从一个存储过程传递到另一个存储过程的唯一方法是通过临时表传递结果。这是一个尴尬的解决方案 b，而且——因为临时表在整个会话中都有范围——它会产生许多与使用全局变量相同的可维护性问题。但是如果一个存储程序需要为另一个存储程序提供结果，那么临时表可能是最好的解决方案。

尽管由于表格拼写错误而放弃了这个问题，但所有调用 MySQL 存储过程并需要其数据可用的人都需要表达和学习这个观点。

# android - 识别哪个 android 应用程序正在与我的 appengine 应用程序联系

> ID：14203357
> 
> 赞同：3
> 
> 时间：2013-01-07T20:16:03.110
> 
> 标签：android, google-app-engine, oauth-2.0

这是一个“这可能吗？” 问题。我有一个适用于 android 手机的应用程序和另一个适用于 appengine 平台的应用程序。appengine的东西真的只是一个高分的db，而手机应用程序真的只是一个游戏。我可以使用一些 json/gson/httppost 的东西，将分数从游戏发送到数据库。现在我想确保我收集到的分数来自游戏，而不是某个人，可能有编程天赋但手头有太多时间。

这是问题。我可以使用 google OAuth 2.0 以某种方式验证我获得的分数来自运行我的游戏的手机吗？

我想我会这样做：我会使用 OAuth 从谷歌（从手机）获取某种令牌，然后将该令牌传递给 appengine 数据库（使用 json 记录），然后使用该令牌从谷歌上的用户。这可以像电子邮件地址一样简单。然后我会对自己说“好吧，只要我得到用户的电子邮件地址，我就知道用户正在使用游戏，我可以存储他们的分数。” 这听起来可能吗？我感觉一旦我使用手机从谷歌获取令牌，appengine 程序就无法使用它。

我在想我会使用与appengine db关联的client_id和client_secret（以及我需要的任何其他东西）从手机中获取令牌，然后当我通过json将令牌发送到appenging程序以获取电子邮件时地址，他们会从 appengine 工作。这似乎谷歌 OAuth 会以某种方式知道我试图从手机中获取令牌，然后会拒绝整个事情。再说一次，也许它会起作用。他们说虽然安卓手机不能保密（指的是client_secret）。

最后我想知道是否有任何其他更简单的方法来确保我在 appengine 端记录的分数真的来自运行我的游戏的安卓手机？我可以设置自己的身份验证方案吗？这有多难做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:39:34.583

好时机; Google 刚刚发布的一项功能将解决您的问题： [http ://android-developers.blogspot.ca/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.ca/2013/01/verifying-back-end-calls-from-android.html)

> 这样做是一个多步骤的过程，我将对其进行完整概述，但这里有一个简短的版本：您使用可通过 Google Play 服务获得的 GoogleAuthUtil 类来检索称为“ID 令牌”的字符串。您将令牌发送到您的后端，您的后端可以使用它来快速、廉价地验证哪个应用程序发送了它以及谁在使用该应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T06:10:02.977

使用 OAuth 2.0（Open ID 连接），您可以识别正在使用您的游戏的*用户。*不过，您似乎想对*应用程序*进行身份验证。有多种方法可以做到这一点，但您仍然必须在应用程序中嵌入凭据或创建某种注册机制。通常，只要您的攻击者（熟练的用户）拥有对应用程序代码和设备（root 等）的完全访问权限，您就无能为力了。唯一的问题是你想让谁努力。

[或者，您可以使用Parse](https://www.parse.com/)等第三方服务，并相信他们会花一些时间完善他们的应用程序身份验证机制。

# objective-c - 如何将 NSString 转换为 id 或 UIView objective-c iphone

> ID：14203361
> 
> 赞同：-6
> 
> 时间：2013-01-07T20:16:16.387
> 
> 标签：objective-c, cocoa-touch, nsstring

如何将 my 转换`NSString *myString = @"myUIView";`为 UIView: myUIView 以便可以在代码中使用 UIView？

我有一个要更改为视图名称的字符串。

我想使用 NSString 中的视图名称更改视图，因此我的 Nsstring 可能设置为“self.view”，但每次使用 UIView transitionFromView 切换视图时我都会更改它：**self.view** toView ：View2 持续时间：0.4 选项：UIViewAnimationOptionTransitionCrossDissolve 完成：^（BOOL 完成）{}

但是如何用我的字符串替换粗体部分，该字符串是 UIView 的名称而不是字符串形式（因为它不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:21:42.543

假设您已`myUIView`定义为属性，例如

```
@property (nonatomic, strong) IBOutlet UIView *myUIView; 
```

然后您可以使用该方法从字符串中访问它`-valueForKey:`，如

```
[self valueForKey:@"myUIView"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:20:01.680

假设您想`NSString`通过使用 a`UILabel`来显示`UIView`. 您不会“转换”`NSString`为`UIView`. 这`NSString`是一个需要使用`UIView`子类呈现的数据结构。

下面的代码会将您的字符串放在屏幕上。

```
UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0,100,100)];
[myLabel setText:myString];
[self.view addSubview:myLabel]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:22:41.040

这将为您提供从 xib 加载的 UIViewController。

```
 Class vcClass = NSClassFromString (@"myUIView");
    UIViewController *detailViewController = [[vcClass alloc] initWithNibName:@"myUIView" bundle:nil]; 
```

如果您只想要一个 UIView 对象，只需执行以下操作：

```
 UIView* myView = [[vcClass alloc] init]; 
```

但实际上，正如迄今为止的三个答案所表明的那样，根本不清楚你是什么。你能说清楚一点吗？你想做什么？

# svg - 为什么 svg 字体是镜像的？

> ID：14203365
> 
> 赞同：6
> 
> 时间：2013-01-07T20:16:45.350
> 
> 标签：svg, svg-font

我有带有元素的 SVG 文件`<path d="..." />`

我将该文件转换为 SVG 字体：

```
<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg">
    <defs>
        <font id="somefont" horiz-adv-x="1000">
            <font-face font-family="somefont" units-per-em="1000"/>
            <glyph unicode="a" d="..."/>
        </font>
    </defs>
</svg> 
```

属性`d`没有改变，但字体由 x 轴镜像。

为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T22:11:18.640

> *“与 SVG 中的标准图形不同，其中初始坐标系的 y 轴指向下方（请参阅初始坐标系），SVG 字体的设计网格以及字形的初始坐标系具有 y 轴指向向上以与许多流行字体格式的公认行业惯例保持一致。”*

来源：[http ://www.w3.org/TR/SVG/fonts.html](http://www.w3.org/TR/SVG/fonts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T02:42:35.727

可以使用该脚本转换为正确的字形：

```
#!/usr/bin/env fontforge
Open("source.svg")
Generate("converted.svg") 
```

# css - 限制：悬停到父元素

> ID：14203378
> 
> 赞同：0
> 
> 时间：2013-01-07T20:17:52.257
> 
> 标签：css, css-selectors

这是我的例子（在互联网上为你找到了一些漂亮的照片）：http: [//jsfiddle.net/xGPys/](http://jsfiddle.net/xGPys/) *（仅适用于 chrome，如果有人发现 Firefox 不喜欢它的原因）*

所以给我带来麻烦的部分就在那里：

```
.imagepreview:hover a {
    top: -61px;
    height: 150px;
    z-index: 1000;
} 
```

我想要实现的是：你应该能够在整列上通过鼠标，并且每个图像应该一个接一个地打开和关闭，现在，打开的照片覆盖了其他的，所以`:hover`状态是注释删除从`<td>`.

我可以使用一点 Javascript，但我更喜欢保持纯 CSS。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:20:36.507

只需设置[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)为`none`：

```
.imagepreview a {
    /* ... other styles ... */
    pointer-events: none;
}
.imagepreview:hover a {
    top: -61px;
    height: 150px;
    z-index: 1000;
} 
```

这是你的小提琴：http: [//jsfiddle.net/xGPys/1/](http://jsfiddle.net/xGPys/1/)

* * *

**警告：** `pointer-events`是*实验性*的。自行决定使用。

# java - Richfaces 3 如何让datascroller做真正的分页

> ID：14203379
> 
> 赞同：5
> 
> 时间：2013-01-07T20:17:51.107
> 
> 标签：java, jsf, richfaces, jsf-1.2

我试图弄清楚如何使用richfaces datascroller 进行真正的分页。

目前我的查询从表中提取所有数据，我想要它，所以当您单击数据滚动器的下一步按钮时，它将查询数据库以获取接下来的 20 行。

我了解如何编写查询来限制行，但我不确定如何让数据滚动条的下一步按钮调用特定方法。

我看到有很多人在 Richfaces 论坛上发布潜在解决方案，但他们都使用数据模型。由于我没有使用 ORM，我不确定如何将这些解决方案适合我所拥有的。

任何帮助表示赞赏。

```
<rich:extendedDataTable id="resultsTable" value="#{tableBacking.results}" var="results" sortMode="single" rowKeyVar="row">
    <rich:columns value="#{tableBacking.columns == null ? '' : tableBacking.columns}" var="columns" index="ind" id="column#{ind}" sortBy="#{results[ind].data}" rendered="#{tableBacking.columns != null}">
        <f:facet name="header">
            <h:outputText value="#{columns.columnDescription}" />
        </f:facet>

        <h:outputText value="#{results[ind].data}" />

    </rich:columns>

</rich:extendedDataTable>

<rich:datascroller for="resultsTable" page="#{tableBacking.page}" renderIfSinglePage="false" /> 
```

支持豆

```
public class TableBacking {
    private List<List<TableData>> results = null;
    private int page = 0;

    public int getPage() {
    return page;
    }
    public void setPage(int page) {
    this.page = page;
    }
    public List<List<TableData>> getResults() throws Exception {
    return results;
    }
    public void setResults(List<List<TableData>> results) {
    this.results = results;
    }

    private void getData(String whereClause) {

    try {
    DataDao dd = new DataDao();
    results = dd.getData();    // dd.getData just runs a query on a table and puts the results in a List of lists.
    } catch (Exception e) {}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:23:11.387

尝试这样做：

**JSF 的东西：**

```
 <rich:dataTable id="listTable" var="record" rows="10" value="#{personBean.data}">
   ....
   <f:facet name="footer">
      <rich:column colspan="8">
        <rich:dataScroller page="#{personBean.page}" for="listTable"
                scrollListener="#{personBean.scrollPage}" render="listTable" />
      </rich:column>
      Records  : #{personBean.data.size()}
   </f:facet>
 </rich:dataTable> 
```

**Java BackBean 的东西：**

```
public class PersonBean {
    // List of Persons
    private PagedList<Person> data;

    // Current page
    private Integer page;

    // Default rows to display
    private Integer rows = 10;

    // Persistence layer
    private DaoService daoService;

    @PostConstruct
    public void init(){
        page= 1;
    }

    // Event trigger on scroll page
    public void scrollPage(DataScrollEvent ev) {
        log.debug("Scroll event");
        reset();

        // getPersons execute 2 queries : the first query is the count(*) and the result is set in TotalElements 
        // the second query gets the 'n' records defined in rows , something like this  :
        //  select * from Persons  LIMIT page*rows, (page*rows) + rows and the result is set in Content
        Page<Person> pageResult = this.daoService.getPersons(filter, page - 1, rows);

        // Now create a pagedList with the constructor 
        this.data = new PagedList<Person>(pageResult.getContent(), (int) pageResult.getTotalElements(), this.pageSize);
    }
} 
```

**Java分页列表**

```
public final class PagedList<E> extends AbstractList<E> {

    private final List<E> lista;
    private final int total;
    private final int pageSize;

    public PagedList(List<E> lista, int total, int pageSize) {
        this.lista = lista;
        this.total = total;
        this.pageSize = pageSize;
    }

    public int size() {
        return total;
    } 

    public E get(int i) {
        i = i % this.pageSize;
        return lista.get(i);
    }
} 
```

`PagedList`诀窍是使用数据库中的计数来设置类的总属性，`dataTable`并且只在 的列表中设置分页元素`PageList`。

对不起我的英语不好：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T21:30:23.767

我发现的最佳解决方案是将 dataTable 的“值”属性映射到 org.richfaces.model.ExtendedTableDataModelproperty。然后使用 org.richfaces.model.DataProvider 的实例初始化 ExtendedTableDataModel。样本：

在视图中：

```
<rich:dataTable id="table" value="#{bean.model}" rows="#{bean.rows}">
    <!-- columns -->
    <f:facet name="footer">
        <rich:dataScroller for="table"/>
    </f:facet>
</rich:dataTable> 
```

在豆子里：

```
@ManagedBean
public class Bean {
    private int rows = 15; // the ammount of rows per page.
    private org.richfaces.model.ExtendedTableDataModel model = new org.richfaces.model.ExtendedTableDataModel(
        new org.richfaces.model.DataProvider(
        public int getRowCount() {
            // count your rows.
        }

        public List<T> getItemsByRange(int first, int quantity) {
            // fetch the page's rows. 
        }

        public T getItemByKey(Object o) {
            return null; // no need to implement this.
        }

        public Object getKey(T t) {
            return null; // no need to implement this.
        )
    );

    public int getRows() { return rows; }
    public ExtendedTableDataModel getModel() { return model; }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:55:10.767

您需要将您绑定`rich:extendedDataTable`到支持 bean 中的属性。

**爪哇**

```
private HtmlExtendedDataTable Table;
//Getter and setter 
```

之后你绑定你的视图

**xhtml**

`<rich:extendedDataTable id="resultsTable" value="#{tableBacking.results}" var="results" sortMode="single" rowKeyVar="row" binding="#{tableBacking.Table}">`

Richfaces[`HtmlExtendedDataTable`](http://docs.jboss.org/richfaces/latest_3_3_X/en/apidoc/org/richfaces/component/html/HtmlExtendedDataTable.html)有一种方法可以检查每页显示多少行，称为`getRows()`. 当bean初始化时，只加载第一页的值，根据那个（你可以只加载其余页面上元素的id，稍后当你要访问页面时根据id加载它们）。

`<rich:datascroller/>`还有一个事件，当单击页面按钮时触发，您可以通过以下方式从支持 bean 获取该事件：

**xhtml**

```
 <f:facet name="footer">
<rich:datascroller id="ds"
                scrollerListener="#{tableBacking.actionOnPageChange}" />
</f:facet> 
```

**爪哇**

`public String actionOnPageChange(DataScrollerEvent event)`

这[`DataScrollerEvent`](http://docs.jboss.org/richfaces/latest_3_3_X/en/apidoc_framework/org/richfaces/event/DataScrollerEvent.html)包括用户点击了哪个页面，您可以使用`getNewScrolVal()`. 发生这种情况时，只需在表中加载相应页面的值即可。

# ios - 如何使导航栏上的“添加”按钮执行某些操作？

> ID：14203383
> 
> 赞同：2
> 
> 时间：2013-01-07T20:18:10.447
> 
> 标签：ios, xcode

因此，自从上一次 iPhone 编程冒险以来，我已经休息了几年，而且我显然已经忘记了我上次学到的大部分内容。加上 XCode 看起来完全不同，所以我也必须重新学习。

我已经使用 Storyboard 功能来布置我下一个项目的基本 UI。主屏幕嵌入在导航控制器中，主屏幕上有四个按钮。按下任何按钮都会加载一个子视图；我还没有通过子视图。所以，总而言之，我现在拥有的是一个主/主屏幕，加上四个独立的子视图，每个子视图都可以通过点击主/主屏幕上的按钮来访问。到目前为止，这一切都很顺利。

所以。在我的第一个子视图中 - 称之为“人物”屏幕 - 我有一个带有“添加”功能 ([+]) 的条形按钮项目。我想要做的是在点击添加按钮时显示一个操作表。不幸的是，从这个按钮拖动到我项目中任何 .h/.m 文件中的任何位置的任何控制都不会产生我可以设置动作/出口的小弹出窗口。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T22:46:28.377

```
addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addItem:)];

self.navigationItem.rightBarButtonItem = addButton; 
```

然后您必须添加一个名为“addItem”的 void 方法，您必须在其中定义您希望“添加”按钮做什么（在您的情况下为操作表）。

# javascript - jQuery weekcalendar：无法调用未定义的方法“getTime”

> ID：14203384
> 
> 赞同：1
> 
> 时间：2013-01-07T20:18:11.317
> 
> 标签：javascript, jquery, json

我正在使用[jQuery Weekcalendar](https://github.com/themouette/jquery-week-calendar)，而不是静态数据，我想使用我的数据库中的数据。下面的脚本创建`eventData1`包含日历的所有约会的变量。当我手动粘贴下面的输出时，一切正常。当我通过变量添加它时，它会崩溃并显示以下错误消息：

```
Uncaught TypeError: Cannot call method 'getTime' of undefined 
```

所以我认为它无法将日期转换为新的 Date 对象。这就是为什么我尝试使用一个单独的函数来将字符串转换为日期，但没有成功。

```
events : [{'id': 25, 'start': new Date( '2013-01-07 14:45:00'), 'end': new Date('2013-01-07 15:45:00'), 'title': 'test appointment from javascript', userId: 0},{'id': 26, 'start': new Date( '2013-01-10 11:15:00'), 'end': new Date('2013-01-10 12:15:00'), 'title': 'test appointment from javascript', userId: 0},{'id': 22, 'start': new Date( '2013-01-09 12:45:00'), 'end': new Date('2013-01-09 14:45:00'), 'title': 'test appointment from javascript', userId: 0},{'id': 21, 'start': new Date( '2013-01-09 15:00:00'), 'end': new Date('2013-01-09 17:00:00'), 'title': 'test appointment from javascript', userId: 0},{'id': 20, 'start': new Date( '2013-01-08 16:00:00'), 'end': new Date('2013-01-08 17:00:00'), 'title': 'test appointment from javascript', userId: 0},{'id': 27, 'start': new Date( '2013-01-10 15:45:00'), 'end': new Date('2013-01-10 16:45:00'), 'title': 'test appointment from javascript', userId: 0}] 
```

这是我的 JavaScript：

```
 <script type="text/javascript">

      function dateReviver(value) {
        if (typeof value === 'string') {
          var re = /^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/
          var result = re.exec(value);
          if (result) {
              return new Date(Date.UTC(+result[1], +result[2] - 1, +result[3], +result[4],+result[5], +result[6]));
          }
        }
        return value;
      }

      var appointments = "[";
      var eventData1 = new Array();
      var counter = 0;

      $.ajax({
        url: 'http://www.slinder.ch/admin/php/termin_getappointments.php',
        dataType: 'json',
        async: false,
        success: function(data) {

            console.log('entered getJSON()');
            console.log(data);
            $.each(data, function(i, appointment) {
                var id = appointment.appointmentId;
                var start = appointment.start;
                var end = appointment.end;
                var title = appointment.prename;
                var userid = appointment.workerid;

                appointments += "{'id': " + id + ", 'start': new Date( '" + start + "'), 'end': new Date('" + end + "'), 'title': 'test appointment from javascript', userId: 0}";

                console.log(start);
                console.log(end);

                if (i === (data.length - 1)) {
                    // this is the last                    
                } else {
                    appointments += ",";
                }             
                counter++;
            });

            appointments += "]";
            console.log('first: ' + appointments);

            eventData1 = {
                options: {
                  timeslotsPerHour: 4,
                  timeslotHeight: 20,
                  defaultFreeBusy: {free: true}
                },
                events : appointments,

                freebusys: []
            };
        }
  });

  </script> 
```

谁能告诉我我必须改变什么才能像这样使用我的约会：

```
events : appointments, 
```

SO上有一个类似的[问题](https://stackoverflow.com/questions/12903342/passing-events-data-to-jquery-week-calender-received-from-web-api-as-json)，但也没有批准的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:24:58.543

您正在`appointments`变量中构建一个字符串。因此，它不能用作数组。相反，使用对象构建一个普通的 JavaScript 数组。

```
var appointments = [];
....
appointments.push({
    id: id,
    start: new Date(start),
    end: new Date(end), 
    title: 'test appointment from javascript', 
    userId: 0
});
... 
```

编辑：

或者您可以简单地推送您从服务器获得的数据，因为它看起来不像您实际上正在修改它。如果您只是重命名密钥，则可能不值得付出额外的努力。

# mod-rewrite - 如何避免重复/相似的 mod_rewrite 规则？

> ID：14203386
> 
> 赞同：0
> 
> 时间：2013-01-07T20:18:19.980
> 
> 标签：mod-rewrite

我有许多 URI，如下所示；

1.  [http://www.domain.com/index.php?route=information/information&information_id=2](http://www.domain.com/index.php?route=information/information&information_id=2)（关于）
2.  [http://www.domain.com/index.php?route=information/information&information_id=4](http://www.domain.com/index.php?route=information/information&information_id=4)（帮助）
3.  [http://www.domain.com/index.php?route=information/information&information_id=7](http://www.domain.com/index.php?route=information/information&information_id=7)（联系方式）
4.  ……

有没有办法可以避免编写明确但类似的重写规则？

**例子**

```
 RewriteRule    ^contact$    index.php?route=information/information&information_id=2    [NC,L]    # About

 RewriteRule    ^help$    index.php?route=information/information&information_id=4    [NC,L]    # Help 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:20:56.970

很多可能性。最简单的可能是这样的：

```
^(.*)$ index.php?route=information/information&information_id=$1 
```

然后处理你的`information_id` *字符串*`index.php`。确保它只允许可接受的值和 404 其他一切。

或者在`mod_rewrite`级别上更具限制性：

```
^(contact|help|foo)$ index.php?route=information/information&information_id=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:22:24.083

如果您要重写的页面不只少数，关键是在索引页面中拥有一个结合逻辑的单一、简单的重写规则，以根据请求的 URL 提供正确的内容。

查看任何支持 url 重写的流行 CMS 的 .htaccess 和 index.php ，你会找到你想要的。

# python - win32com DLL 加载失败

> ID：14203392
> 
> 赞同：1
> 
> 时间：2013-01-07T20:18:38.033
> 
> 标签：python, eclipse, python-2.7, pydev, win32com

我正在尝试将 win32com 添加到 Python 2.7。看了[这个](https://stackoverflow.com/questions/5394887/unresolved-import-in-pydev?rq=1)之后，我添加了带有 _init 文件的目录（Python27\Lib\site-packages\win32com），但我仍然得到它。我什至尝试将一堆不同的文件夹添加到似乎必须处理 win32com 的路径中，但我仍然收到错误消息。如果它知道文件在哪里并且我将该文件夹添加到 PYTHONPATH，为什么会发生这种情况？我将 PyDev 与 Eclipse Juno 一起使用。我的代码：

```
import win32com.client

print("hello world") 
```

当我尝试运行它时，我收到了这个错误

```
Traceback (most recent call last):
  File "C:\Users\Daniel\EclipseWorkspace\PhotoScript\src\scriptLaunch.py", line 1, in     <module>
    import win32com.client
  File "C:\Python27\Lib\site-packages\win32com\__init__.py", line 5, in <module>
   import win32api, sys, os
ImportError: DLL load failed: The specified module could not be found. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-17T16:33:23.090

在我的情况下，输入 cmd： **python C:\Python27\Scripts\pywin32_postinstall.py -install** [cmd Windows](https://i.stack.imgur.com/iRoKX.png)

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:46:08.453

尝试安装[ActivePython](http://www.activestate.com/activepython)，它包括 win32com：

> *适用于 Windows 扩展的 Python（PyWin32 版本 214）。Win32 API (win32api) 的接口。Win32 COM 的接口（win32com 和 win32comext）。Pythonwin 开发环境。*

```
 *ActivePython is fully binary compatible with python.org Python builds to ensure that 3rd-party binary extensions just work* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T22:33:15.740

尝试为 windows 扩展安装 python：

[https://sourceforge.net/projects/pywin32/files/pywin32/Build%20210/](https://sourceforge.net/projects/pywin32/files/pywin32/Build%20210/)

# javascript - youtube api 播放列表生成（仅限标题）

> ID：14203394
> 
> 赞同：-2
> 
> 时间：2013-01-07T20:18:46.087
> 
> 标签：javascript, jquery, youtube-api, playlist

**我有这个大代码：**

```
function _buildPlaylist() {
        //console.log('_buildPlaylist');

        _lastThumbOrientation=null;//important, make thumb holder every time on new playlist
        _playlistOpened=false;//reset for bottom this._autoOpenPlaylist selection

        var len = _videoProcessData.length, i = 0, thumb, div, _item, active_icon;
        //console.log('len = ', len);

        if(getDeeplinkData){
            dlink = baseURL + strict + firstLevel + '/';
            var str_to_filter, tempArr = categoryArr[activeCategory].mediaName;
        }

        for (i; i < len; i++) {
            //console.log(_item.description);

            _item = _videoProcessData[i];

            //deeplinks
            if(useDeeplink && getDeeplinkData){
                str_to_filter = filterAllowedChars(_item.deeplink);
                //console.log(str_to_filter);
                tempArr.push(str_to_filter);
            }

            playlistLength+=1;

            if(outputDeeplinkData){
                if(_item.type == 'local'){//aspect ratio always present
                    if(mp4Support){
                        loc_path = _item.mp4Path;
                    }else if(vorbisSupport){
                        loc_path = _item.ogvPath;
                    }else if(webmSupport){
                        if(_item.webmPath)loc_path = _item.webmPath;
                    }
                    if(loc_path.lastIndexOf('/')){
                        loc_name = loc_path.substr(loc_path.lastIndexOf('/')+1);
                    }else{
                        loc_name = loc_path;
                    }
                    deeplinkData.push({'id': playlistLength, 'name': loc_name, 'type':_item.type ,'video-id': loc_path, 'deeplink': dlink+_item.deeplink});
                }else{
                    deeplinkData.push({'id': playlistLength, 'name': _item.title?_item.title:'', 'type':_item.type ,'video-id': _item.id, 'deeplink': dlink+_item.deeplink});
                }
            }

            div = $('<div/>').addClass('thumbs').attr({'data-id': playlistLength-1, 'data-type': _item.type});
            if(thumbHolder)div.appendTo(thumbInnerContainer).bind('click', clickPlaylistItem);

            if(_item.type == 'local'){//aspect ratio always present
                div.attr({'mp4Path': _item.mp4Path, 'ogvPath': _item.ogvPath, 'webmPath': _item.webmPath?_item.webmPath:'', 'imagePath': _item.imagePath, 'data-aspectRatio': _item.aspectRatio});
            }else{
                div.attr('path', _item.id);
                if(currentObj.ytSizeSet){//if we have width and height, aspect ratio always present
                    div.attr({'data-width': currentObj.mediaWidth, 'data-height': currentObj.mediaHeight, 'data-aspectRatio': currentObj.aspectRatio});
                }
            }

            if(thumbHolder){
                //create thumb
                if(_item.thumbnail){
                    thumb=$(new Image()).addClass('thumb_img').appendTo(div).attr('alt', _item.title?_item.title:'').css({
                       cursor:'pointer',
                       opacity:0
                    }).load(function() {
                        //console.log($(this))
                        $(this).stop().animate({ 'opacity':1}, {duration: 500, easing: 'easeOutSine'});//fade in thumb
                    }).error(function(e) {
                        //console.log("thumb error " + e);
                    }).attr('src', _item.thumbnail);
                }

                //active icon
                active_icon = $(new Image()).appendTo(div).css({
                    position: 'absolute',
                    display: 'none'
                }).load(function() {
                    //console.log(width,height);
                    $(this).css({
                        width: this.width,
                        height: this.height,
                        left: 50+'%',
                        top: 50+'%',
                        marginLeft: -this.width/2+'px',
                        marginTop: -this.height/2+'px'
                    })
                }).error(function(e) {
                    //console.log("error " + e);
                }).attr('src', ic_active_thumb);

                div.data('active_icon',active_icon);
            }

            _thumbHolderArr.push(div);//we need to have data to manipulate
        }

        checkPlaylistProcess();
    } 
```

（这是一个 youtube api javascript 代码。它的作用是生成带有视频的 alt 属性标题的缩略图。

我想要的是只生成视频的标题。没有缩略图。

**该代码生成以下 html（带有缩略图）**

```
<div class="thumbInnerContainer" style="top: 0px; left: 0px; width: 3500px;">

<div class="thumbs playlistSelected" data-id="0" data-type="youtube" path="tRe8JfAQmpI" data-width="640" data-height="360" data-aspectratio="2"><img class="thumb_img" alt="Accelerator after effects project file" style="cursor: pointer; opacity: 1;" src="http://i.ytimg.com/vi/tRe8JfAQmpI/hqdefault.jpg"><img style="position: absolute; display: block; width: 37px; height: 37px; left: 50%; top: 50%; margin-left: -18.5px; margin-top: -18.5px;" src="data/icons/active_item.png">
</div>
<div class="thumbs" data-id="1" data-type="youtube" path="QeusWQ4LFmY" data-width="640" data-height="360" data-aspectratio="2"><img class="thumb_img" alt="After Effects Template Platform" style="cursor: pointer; opacity: 1;" src="http://i.ytimg.com/vi/QeusWQ4LFmY/hqdefault.jpg"><img style="position: absolute; display: none; width: 37px; height: 37px; left: 50%; top: 50%; margin-left: -18.5px; margin-top: -18.5px;" src="data/icons/active_item.png">
</div> 
<div class="thumbs" data-id="2" data-type="youtube" path="srGUFQwONXc" data-width="640" data-height="360" data-aspectratio="2"><img class="thumb_img" alt="Photo Album - After Effects Template" style="cursor: pointer; opacity: 1;" src="http://i.ytimg.com/vi/srGUFQwONXc/hqdefault.jpg"><img style="position: absolute; display: none; width: 37px; height: 37px; left: 50%; top: 50%; margin-left: -18.5px; margin-top: -18.5px;" src="data/icons/active_item.png">
</div>
</div> 
```

**现在，这就是我想要生成的。**（仅图像 alt Title attr，没有缩略图。）

```
<div class="thumbInnerContainer" style="top: 0px; left: 0px; width: 3500px;">

<div class="thumbs playlistSelected" data-id="0" data-type="youtube" path="tRe8JfAQmpI" data-width="640" data-height="360" data-aspectratio="2">
  Accelerator after effects project file
</div>
<div class="thumbs" data-id="1" data-type="youtube" path="QeusWQ4LFmY" data-width="640" data-height="360" data-aspectratio="2">
   After Effects Template Platform 
</div>
<div class="thumbs" data-id="2" data-type="youtube" path="srGUFQwONXc" data-width="640" data-height="360" data-aspectratio="2">
    Photo Album - After Effects Template
</div>
</div> 
```

**注意：找到这些行以查看它是如何生成 html 的**

```
//create thumb
                if(_item.thumbnail){
                    thumb=$(new Image()).addClass('thumb_img').appendTo(div).attr('alt', _item.title?_item.title:'').css({
                       cursor:'pointer',
                       opacity:0
                    }).load(function() {
                        //console.log($(this))
                        $(this).stop().animate({ 'opacity':1}, {duration: 500, easing: 'easeOutSine'});//fade in thumb
                    }).error(function(e) {
                        //console.log("thumb error " + e);
                    }).attr('src', _item.thumbnail);
                } 
```

**如何更改为仅生成标题，没有缩略图。？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:35:28.627

您需要修改此行。

```
div = $('<div/>').text(_item.title ? _item.title : '').... 
```

并删除`if`下面生成两个`<img/>`元素并将它们附加到新创建的`<div/>`元素的所有子句`div`。既然你不想要它，那么你可以把它全部扔掉。

```
if (thumbHolder) {
  ...
} 
```

# apache - .htaccess 无扩展名页面，包含扩展名时为 404

> ID：14203395
> 
> 赞同：0
> 
> 时间：2013-01-07T20:19:01.480
> 
> 标签：apache

我正在通过删除它们的文件扩展名来清理我的页面的 URL，并且网络很快提供了以下 .htaccess 代码：

RewriteEngine On RewriteCond %{REQUEST_FILENAME} !-d RewriteCond %{REQUEST_FILENAME}.php -f RewriteRule ^(.*)$ /$1.php

它可以工作，但仍然可以像以前一样通过在末尾添加 .php 来访问文件。我不要这个！理想情况下，我希望每个以 .php 结尾的访问页面都被视为仅在没有 .php 部分的情况下键入的内容。这可以实现吗？

总结一下：

*   www.page.com/example.php 显示 404
*   www.page.com/example 显示 example.php

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T20:47:27.947

您可能还没有在这里寻找答案，但以防万一有人偶然发现这个问题，您可以这样做：

首先，做一个外部重定向：

```
## hide .php extension
## To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}s([^.]+).php [NC]
RewriteRule ^ %1 [R,L,NC] 
```

然后，进行内部重定向：

```
## To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*?)/([a-zA-Z0-9_-]+)/([0-9]+)$ /new/$1.php?ID=$3 [L] 
```

那会让你到达那里！如果它不起作用，请确保这些位于 htaccess 文件的顶部：

```
RewriteEngine On
RewriteOptions inherit
Options +FollowSymlinks
Options -Multiviews 
```

而已！我在我的博客上解释了编码：http: [//kimjoyfox.com/writing-seo-friendly-urls-using-htaccess/](http://kimjoyfox.com/writing-seo-friendly-urls-using-htaccess/)

# google-drive-api - 如何在 iOS 中取消或备份谷歌驱动器登录

> ID：14203396
> 
> 赞同：0
> 
> 时间：2013-01-07T20:19:04.260
> 
> 标签：google-drive-api

我在我的 iOS 应用程序中使用标准 OAuth2 viewControllerTouch 进​​行用户登录。如果用户感到沮丧并且无法完成登录，有哪些方法可以实现“返回”或“取消”以将 UI 返回到我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:05:37.083

[查看gtm-OAuth2](http://code.google.com/p/gtm-oauth2/source/browse/#svn/trunk/Examples/OAuth2SampleTouch)中包含的示例。简短的回答是，当您创建控制器时，您应该将其推送到导航控制器。导航栏应提供返回/取消功能。

# java - java是否有将尖括号转换为实体代码的内置方法？

> ID：14203399
> 
> 赞同：1
> 
> 时间：2013-01-07T20:19:31.463
> 
> 标签：java

> **可能重复：**
> [Java 中转义 HTML 的推荐方法 用 Ja​​va 中](https://stackoverflow.com/questions/1265282/recommended-method-for-escaping-html-in-java)
> [的 HTML 实体替换字符](https://stackoverflow.com/questions/10978098/replace-characters-with-html-entities-in-java)

我有一些java代码将包括尖括号的文本写入数据库；此文本显示在网页上。

与其将我的 java 代码更改为充满实体代码，我想知道我是否可以保留像“ `<test>`”这样的常量并使用标准库函数来生成基于实体的字符串“ `&lt;test&gt;`”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:24:26.437

如果你只想做尖括号，我会看看 Java 的[字符串替换](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)功能。

但是如果你想要一个更完整的解决方案，你可能应该看看[StringEscapeUtils](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html)

特别是，[public static String escapeHtml(String str)](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml%28java.lang.String%29)看起来像一个有前途的功能

* * *

从那个签名来看，我猜

```
string myEscapedHTML = escapeHtml(myUnescapedHTML); 
```

是使用它的方法。

# excel - 将项目添加到数据透视表

> ID：14203406
> 
> 赞同：0
> 
> 时间：2013-01-07T20:19:50.700
> 
> 标签：excel, pivot-table

我在 Excel 中有一个带有组的数据透视表。但后来我意识到我想在该组中添加另一个项目。如何在不导致另一个下拉子组的情况下添加项目？

我正在处理大约 800 个项目（职位描述），但大多数是设计师描述（首席软件工程师、软件开发负责人等），所以我想将它们全部归为“技术”等。但是有 800 个项目，我可能会分组捕获 50 个，但他们稍后会看到 4 个。并且不想要层层叠叠的嵌套项目。

**到目前为止，它看起来像**

```
Group 1
  item 1
  item 2
  item 3
     added item 4 
```

**相反，我想要**

```
Group 1
  item 1
  item 2
  item 3
  added item 4 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:27:37.933

如果您使用的是最新版本的 Excel，计算项可能是快速分组和取消分组行标签的方法。

按照此处的教程了解它们是如何工作的：[数据透视表：计算项](http://blogs.office.com/b/microsoft-excel/archive/2008/05/09/pivottables-calculated-items.aspx)

# c - C：阵列元素可用性差异？

> ID：14203407
> 
> 赞同：0
> 
> 时间：2013-01-07T20:19:52.837
> 
> 标签：c, arrays, memory

因此，我发现了一个“差异”——或者，更可能的是，我对 C 中的数组的理解存在差距。下面是一个用于反转字符串的简单程序。代码注释中指出了差异。

```
#include <stdio.h>
#include <string.h>

void reverser(char to_bb[]){
    printf("%s\n", to_bb[some_valid_number]); /* This results in a bus error */
    int counter = strlen(to_bb);              /* ^ Assume actual integer */
    char reversed[counter];         
    int counter2 = 0;
    for(--counter; counter >= 0; counter--){     
        reversed[counter2] = to_bb[counter];  /* This does not */
        counter2++;
    }
    reversed[counter2] = '\0';
    printf("The reversed: %s\n", reversed);
}

int main(){
    char to_be_reversed[20];
    puts("Enter the string to be reversed: ");
    scanf("%19s", to_be_reversed);
    reverser(to_be_reversed);
    return 0;
} 
```

为什么会`printf();`导致总线错误，而调用元素将它们交换到不同的数组中却不会？他们不是叫同一个东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T20:21:03.020

```
printf("%s\n", to_bb[some_valid_number]); 
```

`s`转换说明符需要一个指向`char`但`to_bb[some_valid_number]`类型为的指针`char`。

要获取指向`to_bb[some_valid_number]`对象的指针，您可以使用`&`运算符：

```
printf("%s\n", &to_bb[some_valid_number]); 
```

如果您想打印`to_bb[some_valid_number]`字符，请使用`c`转换说明符：

```
printf("%c\n", to_bb[some_valid_number]); 
```

# ruby-on-rails - environment.rb 中缺少 Rails 路径名

> ID：14203410
> 
> 赞同：2
> 
> 时间：2013-01-07T20:20:09.047
> 
> 标签：ruby-on-rails, diaspora

当我尝试安装 Diaspora* 并在我的 rake db:setup 之后尝试从浏览器打开它时出现以下错误：

```
NameError: uninitialized constant Pathname
/Users/myself/diaspora/config/environment.rb:15:in `<top (required)>' 
```

第 15 行是评论后的第一行：

```
# Load the rails application
require Pathname.new(__FILE__).dirname.expand_path.join('application')
require Rails.root.join("lib", "exceptions") 
```

我也在使用 Pow。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:45:47.437

`require 'pathname'`在顶部添加`environment.rb`以使这个核心 Ruby 库可用。

# ravendb - RavenDb Patching Api 是否适用于递归对象？

> ID：14203411
> 
> 赞同：2
> 
> 时间：2013-01-07T20:20:08.737
> 
> 标签：ravendb

这是我的对象：

```
public class CMSContentItemFolder
{
    int Id {get; set; }
    public Guid InstanceId { get; set; }
    public List<CMSContentItemFolder> ContentItemFolders { get; set; }
    public List<CMSContentItem> ContentItems { get; set; }
} 
```

因此该文件夹可以有无限层的子文件夹，就像您的 C 盘上的系统文件夹一样。

为了让我在文件夹及其子文件夹上执行 CRUD，我必须编写递归方法，这可行但有点痛苦。我知道 Patching API 会更好，但我还没有看到它适用于递归对象的示例。

在 RavenDb 中执行此操作的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:50:22.973

您应该使用封装***或***引用进行建模，***而不是同时使用***. 在您的对象中，嵌套 CMSContentItemFolder 上的 Id 的目的是什么？您可能应该参考。这同样适用于内容项。他们可能都在自己的文档中。

```
public List<int> ContentItemFolderIds { get; set; }
public List<int> ContentItemIds { get; set; } 
```

那么你在修补时就没有任何递归要处理。

# c# - 从数据表填写报告

> ID：14203414
> 
> 赞同：0
> 
> 时间：2013-01-07T20:20:22.693
> 
> 标签：c#, asp.net, sql-server-2005, datatable, report

我需要问你，因为我到处搜索并且无法理解逻辑所以请耐心等待我尝试以 C# 表单创建一个报表查看器并希望通过数据表中已经从查询中填充的数据来填充此报表

```
 SqlCommand cmd1 = new SqlCommand("query_string", Welcome.con);
    SqlDataAdapter da = new SqlDataAdapter(cmd1);
    DataTable dt = new DataTable();
    dt.TableName = "DataTable1";
    da.Fill(dt); 
```

直到这里我填写了数据表并且没有问题但是当我尝试使用这个我发现每个人都使用的代码时它给了我“找不到命名空间”：

```
 ReportDataSource source = new ReportDataSource("DataTable1", dt);
    reportViewer1.LocalReport.DataSources.Clear();
    reportViewer1.LocalReport.DataSources.Add(source);
    reportViewer1.DataBind();
    reportViewer1.LocalReport.Refresh(); 
```

我不知道我是否必须包括图书馆或其他东西？我想知道这段代码是否足以用查询结果填充报告？所以请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:22:05.473

`using`您必须在 .cs 源文件的顶部添加一个块：

```
using Microsoft.Reporting.WebForms 
```

`ReportDataSource`是在程序集中定义的，`Microsoft.ReportViewer.WebForms`因此您可能还必须手动将对它的引用添加到项目中。

# windows - Windows Phone SDK 8.0 在 Windows 8 上的安装问题

> ID：14203423
> 
> 赞同：2
> 
> 时间：2013-01-07T20:20:59.620
> 
> 标签：windows, sdk, windows-phone-8

我正在尝试在 Windows 8 上安装 Windows Phone SDK 8.0（它不是 PRO 版，它是我购买笔记本电脑时附带的版本），但安装卡住了，如下图所示：

![在此处输入图像描述](../Images/c3a7b55eda93a9897f56de8db9080cfa.png)

已经这样一个小时了，我不知道是什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T07:48:05.570

这并不是真正的“卡住”。它正在后台下载大型安装（~1.6GB）。最好先单击下载链接下方的 ISO 映像链接下载光盘映像，然后挂载并从那里安装。

我尝试了 1MB 的安装文件，完成安装需要 5 个多小时，下载速度约为每秒 150kb。

# parsing - 可以解析二进制！在 Rebol 2 中捕获二进制文件！而不是一个字符串！（就像在 Rebol 3 中一样）？

> ID：14203426
> 
> 赞同：1
> 
> 时间：2013-01-07T20:21:06.843
> 
> 标签：parsing, binary-data, rebol

考虑以下：

```
>> bin: to-binary {Rebol}
== #{5265626F6C}

>> parse/all bin [s: to end]
== true 
```

我希望`s`已经捕获了二进制系列的头部，并且是 BINARY 类型！在 Rebol 3 中是这样的：

```
>> type? s
== binary!

>> s == bin
== true 
```

在 Rebol 2 中，似乎 parse 必须将数据转换为字符串（或者至少将二进制“成像”为字符串！在后台，而不是比较相等）

```
>> type? s
== string!

>> s == bin
== false 
```

因为 Rebol 2 不是 Unicode，所以二进制字节串和字符串基本上是等价的。但是使用 Rebol 3 的 Unicode，我猜如果你写的话，你最终会得到非常不同的行为：

```
parse/all to-string bin [s: to end] 
```

因为它会开始将多个字节序列解释为字符串编码，如果您真正想要的是未解释的字节，这将不起作用。:-(

如果有人想编写在 Rebol 2 或 Rebol 3 中同样适用于解析 BINARY! 的代码，你将如何解决这个问题？ *（当然，理想情况下，让 Rebol 2 的行为更像 3。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:21:06.843

事实上，Rebol 2 实际上只是将数据“成像”为字符串！而不是复制它，请注意以下几点

```
>> bin: to-binary {Rebol}
== #{5265626F6C}

>> parse bin [s: (clear s)] 
== true

>> s
== ""

>> bin
== #{} 
```

这是因为 Rebol 2 有可用于将字符串数据别名为二进制的例程，反之亦然：[AS-BINARY](http://www.rebol.com/r3/docs/functions/as-binary.html)和[AS-STRING](http://www.rebol.com/r3/docs/functions/as-string.html)。与它们的 TO-BINARY 和 TO-STRING 变体不同，它们实际上并不复制数据。

这是一个想法，你*（嗯，嗯，我）*可以尝试......制作一个兼容性函数（我们称之为`bin-pos`）：

```
bin-pos: func [pos [binary! string!]] [
    return either string? pos [
        ;; we must be using r2, image the parse position back to binary
        as-binary pos
    ] [
        ;; just a no-op in r3, binary parse input yields binary parse positions
        pos
    ]
] 
```

所以在上面的例子中，对于 Rebol 2，正确的事情发生了，如果你在任何地方使用`s`你来代替`bin-pos s`：

```
>> type? (bin-pos s)
== binary!

>> (bin-pos s) == bin
== true 
```

对于使用 COPY 方言词并创建新字符串的情况，相同的技术将起作用……但也许应该使用不同的包装器名称。 `bin-capture`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:44:32.520

您可以在规则中添加一个解析操作，以确保捕获的数据是`binary!`：

```
>> bin: to binary! {Rebol}

>> parse/all bin [s: to end (s: to binary! s)]

>> type? s
== binary! 
```

您可以将此转换包装在`ensure-binary`帮助程序中以用于文档目的。

（请注意，如果我正确理解您答案的最后一段，这基本上就是您在那里的建议。但是，我认为即使是在没有 . 的情况下进行的捕获，您也可以使用这种方法`copy`。）

# objective-c - 是iOS免打扰Bug导致这个Bug吗？

> ID：14203430
> 
> 赞同：0
> 
> 时间：2013-01-07T20:21:14.260
> 
> 标签：objective-c, ios, nsdate, nsdatecomponents

我试图找出最近的“请勿打扰”错误（[Ars Technica 链接](http://arstechnica.com/apple/2013/01/ask-ars-why-will-apples-do-not-disturb-bug-fix-itself-next-week/)）是否影响了我的代码。我正在尝试获取上周一午夜的日期和时间戳。由于我是在星期一写这篇文章，我希望得到今天的日期（2013 年 1 月 7 日），但我是 2013 年 1 月 4 日。

我正在关注[Apple 发布的指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW12)，但我正在尝试修改它以找到前一个星期一，而不是星期天。

```
+(NSTimeInterval)StartOfWeekMonday {
    NSTimeInterval finalTime = -1;

    NSInteger weekday;

    NSDate *monday  = 0;

    NSCalendar *greg = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    NSDateComponents *weekdays = [greg components:NSWeekdayCalendarUnit fromDate:[NSDate date]];
    NSDateComponents *subtract = [[NSDateComponents alloc] init];
    NSDateComponents *final    = 0;

    weekday = ( weekdays.weekday == 1 ) ? 6 : weekdays.weekday;

    [subtract setDay:(0 - weekday - 1)];

    monday = [greg dateByAddingComponents:subtract toDate:[NSDate date] options:0];
    final  = [greg components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:monday];
    monday = [greg dateFromComponents:final];

#ifdef DEBUG
    NSLog( @"%s - %d -> Weekday: %d", __FILE__, __LINE__, weekday );
    NSLog( @"%s - %d -> Monday: %@", __FILE__, __LINE__, [monday descriptionWithLocale:[NSLocale currentLocale]] );
#endif

    finalTime = [monday timeIntervalSince1970];

    return finalTime;
} 
```

我的日志放在下面，工作日是正确的（我是在星期一写的），但日期显然是错误的，应该是`Monday: Monday, January 7, 2013, 12:00 AM`

```
2013-01-07 15:07:33.792 MY-APP[5524:14c03] Weekday: 2
2013-01-07 15:07:36.757 MY-APP[5524:14c03] Monday: Friday, January 4, 2013, 12:00:00 AM Eastern Standard Time 
```

现在正在模拟器中，但我所有其他日期计算都给出了预期值。

我是否可能受到最近的“请勿打扰”错误的影响，并且必须等待明天（2013 年 1 月 8 日）才能看到预期的结果，还是我错过了一些完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:20:19.603

问题在于如何计算减法。要么我完全误解了 Apple 提供的示例，要么不够清楚。计算减法的解决方案如下：

```
weekday = ( weekdays.weekday == 1 ) ? 8 : weekdays.weekday;
toSubtract = ( 2 - weekday );

[subtract setDay:toSubtract]; 
```

运行各种测试产生了正确的“星期一”。最后，这与影响请勿打扰的日期错误无关。

# php - PHP中的MYSQL表连接

> ID：14203434
> 
> 赞同：1
> 
> 时间：2013-01-07T20:21:23.287
> 
> 标签：php, mysql

我已经搜索了我的问题，但似乎没有一个能回答我的特殊需求。这是一个简单的表连接，但我尝试过的每件事都失败了。也许你可以帮忙。注意：所有行在 POSTS 中都有 post_id，但并非所有 post_id 在 CALENDAR 中都相关，即并非所有帖子都有日历条目。我在 PHP 中使用 MYSQL，而不是 MYSQLi。

POST_CAT- post_id, cat_id POSTS- post_id, title, description CALENDAR- post_id, on_date, to_date

目前我通过多对多选择找到了相关的 post_ids，然后使用一系列 for 循环从单个表中输出。这行得通。但我需要将相关 post_id 的日历条目包含在一个数组中：

```
mysql_connect("localhost", "root", "root") or die(mysql_error());
mysql_select_db("adamsmap_db") or die(mysql_error());

if (isset($_POST['activities'])) {

$post_id = mysql_query("SELECT post_id FROM post_cat WHERE cat_id = '1'");
    while ($row = mysql_fetch_array($post_id, MYSQL_NUM)) {

    for ($i=0;$i < count($row); $i++) {

$output = mysql_query("SELECT user_id, title, description FROM posts WHERE post_id='$row[$i]'");
    while ($rowoutput = mysql_fetch_array($output, MYSQL_NUM)) {

    for($i=0;$i < count($rowoutput);$i++) {

echo $rowoutput[$i]."&nbsp";

}

echo"<br /> <br />";

}}}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:26:39.333

此查询将复制您编写的业务逻辑和日历信息：

```
SELECT 
    zpc.ost_id, p.user_id, p.title, p.description, c.*
FROM Z_post_cat zpc
INNER JOIN posts p ON zpc.post_id = p.post_id 
INNER JOIN calendar c ON c.post_id = = p.post_id
WHERE zpc.cat_id = '1' 
```

如果您希望包含没有帖子的类别，请使用 LEFT JOIN 而不是 INNER JOIN。

此外，出于安全考虑，建议您迁移到 PDO 或 Mysqli 而不是 mysql。

# ruby-on-rails - 当我对新闻源帖子状态发表评论时会发生什么

> ID：14203436
> 
> 赞同：1
> 
> 时间：2013-01-07T20:21:28.720
> 
> 标签：ruby-on-rails, database, facebook, database-design

新闻源有一个应用程序中发生的一些活动的列表。

例如，来自 facebook 的新闻源结合了

*   **组名变更 [ [1](https://i.stack.imgur.com/LqAz7.png) ]**
*   **参加活动的人的状态 [ [2](https://i.stack.imgur.com/86c9T.png) ]**
*   **更新状态**[ [3](https://i.stack.imgur.com/Mg3Jz.png) ]
*   ETC..

* * *

图**1**

![图。1](../Images/d5ab20f4d0b46e0e85d5cc0c5e3d3e6c.png)

图**2**

![在此处输入图像描述](../Images/1165abe3b4ea3e0a041bf639a71ca645.png)

图**3**

![在此处输入图像描述](../Images/1bac2ae1caf287cf788359ef495533f9.png)

* * *

这些混合活动被组合成一个提要并显示出来。请注意，它们中的每一个都可以被点赞、评论等……

但在新闻源中，它不是那里的真实对象。例如，对于 [ [3](https://i.stack.imgur.com/Mg3Jz.png) ] “hello world”，此活动引用原始帖子，但在新闻源中是另一条总结帖子的记录，并且是被看到的记录（活动）。

假设 Post 的 ID 为 #111，表示它的活动条目是 #222。

当我评论帖子 [ [3](https://i.stack.imgur.com/Mg3Jz.png) ] 时，我将发送哪些参数到我的服务器？我需要引用活动或帖子中的 id 吗？

我认为我应该从帖子 #111 发送 ID，并在服务器端创建评论记录，然后他们为此生成另一个活动，引用父活动“hello world”[ [3](https://i.stack.imgur.com/Mg3Jz.png) ]。

但是请记住，新闻源有很多类型的 os 对象，在这种情况下只发送 ID 似乎是不对的，因为我必须知道我在评论或喜欢什么（帖子、问题等）。所以有什么问题。

这个想法是我需要扩展基本的公共活动（[https://github.com/pokonski/public_activity](https://github.com/pokonski/public_activity/)，[http://public-activity-example.herokuapp.com/feed](http://public-activity-example.herokuapp.com/feed)）以允许评论和喜欢。

我需要一些建议。

# kineticjs - 使用 KineticJS 实时绘制路径

> ID：14203437
> 
> 赞同：0
> 
> 时间：2013-01-07T20:21:29.983
> 
> 标签：kineticjs

我想在我的画布上即时绘制一条路径。我知道如何使用以下 HTML5 画布代码来做到这一点：

```
$('#drawing-canvas').mousedown(function(e){
    startx = e.pageX;
    starty = e.pageY;
    cxt.beginPath();
    cxt.moveTo(startx,starty);
 });

$('#drawing-canvas').mousemove(function(e){
    cxt.lineTo(e.pageX,e.pageY);
    cxt.strokeStyle='red'; 
    cxt.lineWidth = 1;     
    cxt.stroke();
 }); 
```

我的问题是如何使用 KineticJS 完成同样的事情。

更新：

我认为这样的事情可能会奏效。

```
 $('#container').mousemove(function(e){
  var pen = new Kinetic.Shape({
    drawFunc: function(canvas) {
      var context = canvas.getContext();
      if(moving == false){ // grab the start xy coords from mousedown event
      context.beginPath();
      context.moveTo(startx,starty);
      moving = true;
      }
      context.lineTo(e.pageX,e.pageY);
      context.strokeStyle='#ff00ff'; 
      context.lineWidth = 1;     
      context.stroke();
   }
     penlayer.add(pen);
     stage.add(penlayer); 
  });
 }); 
```

然而，处理 beginPath() 和 moveTo(..) 被证明是有问题的。我需要在 mousedown 事件上设置这些。有任何想法吗？

更新：

[通过在http://www.redshiftsolutions.com/demos/whiteboard/whiteboard.html](http://www.redshiftsolutions.com/demos/whiteboard/whiteboard.html)选择笔选项可以看到我想要获得的效果。这是一个使用画布和 jQuery 的简单协作白板。由于添加了拖放功能，我想将其转换为 KineticJS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:38:34.643

在这里： http: [//jsfiddle.net/akhiyadav1/k4qB8/22/](http://jsfiddle.net/akhiyadav1/k4qB8/22/)看看这个人是怎么做到的。

基本上，您确实会创建一个新的 Kinetic.Line() 并在每次鼠标移动时向其推送点。

试试这个代码：

```
<!DOCTYPE HTML>
<html>
  <head>
      <style>
        body {
            margin: 0px;
            padding: 0px;
        }
        canvas {
            border: 1px solid #9C9898;
        }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.1.js"></script>
    <script>
        window.onload = function() {
            layer = new Kinetic.Layer();
            stage = new Kinetic.Stage({
                container: "container",
                width: 320,
                height: 320
            });

            background = new Kinetic.Rect({
                x: 0, 
                y: 0, 
                width: stage.getWidth(),
                height: stage.getHeight(),
                fill: "white"
            });

            line = new Kinetic.Line({
                points: [0, 0, 50, 50],
                stroke: "red"
            });

            layer.add(background);
            layer.add(line);
            stage.add(layer);

            moving = false;

            stage.on("mousedown", function(){
                if (moving){
                    moving = false;layer.draw();
                } else {
                    var mousePos = stage.getMousePosition();
                    //start point and end point are the same
                    line.getPoints()[0].x = mousePos.x;
                    line.getPoints()[0].y = mousePos.y;
                    line.getPoints()[1].x = mousePos.x;
                    line.getPoints()[1].y = mousePos.y;

                    moving = true;    
                    layer.drawScene();            
                }

            });

            stage.on("mousemove", function(){
                if (moving) {
                    var mousePos = stage.getMousePosition();
                    var x = mousePos.x;
                    var y = mousePos.y;
                    line.getPoints()[1].x = mousePos.x;
                    line.getPoints()[1].y = mousePos.y;
                    moving = true;
                    layer.drawScene();
                }
            });

            stage.on("mouseup", function(){
                moving = false; 
            });

        };
    </script>
</head>
<body>
    <div id="container" ></div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:45:05.840

将您的代码放在 jsfiddle 中，我将使用它。但是看着它，您的代码似乎有点错误。

每次鼠标移动时，您都在重新定义局部变量笔并重新添加相同的笔层。它的结构有点偏离。尝试：

```
$('#container').mousemove(function(e){
   var pen = new Kinetic.Shape({
      drawFunc: function(canvas) {
          var context = canvas.getContext();
          if(moving == false){ 
              context.beginPath();
              context.moveTo(startx,starty);
              moving = true;
          }
          context.lineTo(e.pageX,e.pageY);
          context.strokeStyle='#ff00ff'; 
          context.lineWidth = 1;     
          context.stroke();
      } 
  });

  penlayer.add(pen);
  stage.add(penlayer);
}); 
```

假设您要创建直线，那么使用其他鼠标事件进行更好的控制也会更好。

```
 $('#container').mousedown(function(e){
       //draw temporary shape
 }
 $('#container').mousemove(function(e){
       //redraw shape
 }
 $('#container').mouseup(function(e){
       //add shape to layer
 } 
```

另外，你为什么不使用 Kinetic.Line() 和类似的东西：

```
 var startLine; // make this global because this can be redefined 
 $('#container').mousedown(function(e){
    startLine = new Kinetic.Line({
         points: [stage.getUserPosition().x, stage.getUserPosition().y],
         stroke: 'red',
         strokeWidth: 15,
         lineCap: 'round',
         lineJoin: 'round'
    });
 }
 $('#container').mouseUp(function(e){
    var endLine = new Kinetic.Line({
         points: [startLine.getX(), startLine.getY(), stage.getUserPosition().x, stage.getUserPosition().y],
         stroke: 'red',
         strokeWidth: 15,
         lineCap: 'round',
         lineJoin: 'round'
    });
    layer.add(endLine);
 } 
```

这是一个非常粗略的解决方案，您必须解决 startLine 和 endLine 的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T20:51:53.890

这里是我如何实现它。关键是在 mousemove 和 mouseup 期间使用 kineticJS 的样条形状并在其中推动点。[ev._x, ev._y 是根据这篇文章Tracking mouse position in canvas when no](https://stackoverflow.com/questions/5085689/tracking-mouse-position-in-canvas-when-no-surrounding-element-exists/5086147#5086147) around element exists 计算的 x 和 y 点

请让我知道是否有帮助

```
tools.pencil = function () {
var tool = this;
this.started = false;
var drawObject;

this.mousedown = function (ev) {
    drawObject = new DrawObject();
    drawObject.Tool = DrawTool.Pencil;
    tool.started = true;
    drawObject.currentState = DrawState.Started;
    drawObject.StartX = ev._x;
    drawObject.StartY = ev._y;
    tool.DrawIt(drawObject);

};

this.mousemove = function (ev) {
    if (tool.started) {
        drawObject.currentState = DrawState.Inprogress;
        drawObject.CurrentX = ev._x;
        drawObject.CurrentY = ev._y;
        tool.DrawIt(drawObject);

    }
};

this.mouseup = function (ev) {
    if (tool.started) {
        tool.started = false;
        drawObject.currentState = DrawState.Completed;
        drawObject.CurrentX = ev._x;
        drawObject.CurrentY = ev._y;
        tool.DrawIt(drawObject);
    }
};
this.mouseout = function (ev) {
    if (tool.started) {
    }
    tool.started = false;

};

this.DrawIt = function (drawObject) {

        switch (drawObject.currentState) {
            case DrawState.Started:
                var x= drawObject.StartX, 
                    y = drawObject.StartY;
                var pencil = new Kinetic.Spline({
                    points: [{
                        x: x,
                        y: y
                    }],
                    stroke: 'red',
                    strokeWidth: 2,
                    lineCap: 'round',
                    tension: 1,
                    name: shapes.length
                });

                drawObject.Shape = pencil;
                layer.add(pencil);
                layer.draw();

                break;
            case DrawState.Inprogress:
            case DrawState.Completed:
                var x = drawObject.CurrentX,
                    y = drawObject.CurrentY;

                var pencil = drawObject.Shape;
                pencil.attrs.points.push({ x: x, y: y });
                pencil.setPoints(pencil.attrs.points);
                layer.draw();
                if (drawObject.currentState == DrawState.Completed) {
                    // dosomething
                }

                break;
        }

} 
```

哪里绘制对象是javascript中的简单空函数

```
function DrawObject()
{
} 
```

而drawstate是铅笔工具的所有可用状态

```
var DrawState =
{
 Started: 0,
 Inprogress: 1,
 Completed: 2
} 
```

并且“层”是在 KineticJS 阶段已经添加的简单 KineticJS 层

# java - 正则表达式：如何不匹配几个字母

> ID：14203439
> 
> 赞同：2
> 
> 时间：2013-01-07T20:21:35.003
> 
> 标签：java, regex

我有以下字符串：`SEE ATTACHED ADDENDUM TO HUD-1194,520.07`

在那个字符串里面是`HUD-1`，之后是`194,520.07`。我想要的是那个`194,520.07`部分。

我编写了以下正则表达式来提取该值：

`[^D\-1](?:-|\()?\$?(?:\d{1,3}[ ,]?)*(?:\.\d+)\)?`

然而，这拉出来：`94,520.07`

我知道这与这部分有关：`[^D\-1]`对许多人来说“吃” `1`。`1`在出现第一个之后，我有什么想法可以阻止它“吃”`HUD-1`吗？

更新：

所有其他东西的原因是，如果 HUD-1 之后的值是金额，我也只想匹配。该正则表达式的其余部分试图确定可以写入金额的所有不同方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:24:51.547

为什么不这么简单：

```
.*HUD\-1(.*+) 
```

好的，根据您更新的问题，您需要更加严格。尝试更改`[^D\-1]`为 just `(?:HUD\-1)?`。就其价值而言，您的货币 RegEx 是宽松的，允许输入如下：

> 001 001 .31412341234123

您可能会考虑*不在*那里重新发明轮子，我相信您可以通过 Google 快速找到货币 RegEx。否则，我还建议您在 RegEx`$`的末尾加上 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:36:52.710

此更改将使正则表达式的第二个匹配组包含您想要的完整数字（第一个 1 之后的所有内容），并将可能的 HUD-1 放在单独的匹配组中（如果存在）。

```
(HUD-1)?((?:-|\()?\$?(?:\d{1,3}[ ,]?)*(?:\.\d+)\)?) 
```

# testing - 软件测试和软件检查之间有什么区别？

> ID：14203441
> 
> 赞同：4
> 
> 时间：2013-01-07T20:21:44.003
> 
> 标签：testing, inspection

所以我已经阅读了一些关于这两种方法的报告，但我无法真正掌握两者之间的差异。如果有人可以为我总结或尝试解释它，我将不胜感激！BR，弗雷德里克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T20:29:07.590

类似于汽车。如果您对其进行测试，您通常会驾驶它或至少打开它。如果您通常检查它，您会检查液体，可能会拔出火花塞，将其连接到计算机并检查其设置，摆弄按钮和开关以确保连接。在检查期间，您可以测试车辆，但在测试期间您并不总是检查车辆。

软件测试很有用，因为它允许使用生产环境的模型来查看是否存在错误或错误，这些错误会引发异常或导致逻辑错误，例如使关系失去状态。

软件检查涉及更多。它可能涉及测试，但也可能涉及进行代码审查以确保使用有效的流程，并且可读性和可维护性是适当的。它有助于确保功能正确解耦，程序尽可能快地运行，并且在幕后没有发生任何不受欢迎的事情。

# sql - 处理 SQL 语句的替代方法 如果不存在任何行，则显示所有

> ID：14203446
> 
> 赞同：1
> 
> 时间：2013-01-07T20:22:08.247
> 
> 标签：sql, tsql

想知道那里是否有人可能知道一个小 sql 脚本的技巧。

[http://sqlfiddle.com/#!3/09638/3](http://sqlfiddle.com/#!3/09638/3)

我希望只返回具有手动变速器并且是福特制造的行。如果不存在行，则返回所有福特制造的车辆。我目前使用 IF EXISTs 条件来执行此操作。我考虑使用临时表来存储第一组数据，然后查看表的 rowcount()（插入的行数 == 0），看看是否需要插入更多数据。除了我描述的两个选项之外，可能没有其他方法可以做到这一点。也许社区对此有一些想法。

### 示例 DDL

```
CREATE TABLE Cars
(
  Make varchar(50),
  Model varchar(50),
  ManualTransmission bit
);

INSERT INTO Cars
(Make, Model, ManualTransmission)
VALUES
('Ford', 'Taurus', 0),
('Ford', 'Contour', 0),
('Ford', 'Mustang', 0),
('Jeep', 'Liberty', 1),
('Jeep', 'Cherokee', 0); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T20:26:26.670

单程

```
WITH CTE
     AS (SELECT *,
                RANK() OVER (ORDER BY ManualTransmission DESC) AS Rnk
         FROM   Cars
         WHERE  Make = 'Ford')
SELECT Make,
       Model,
       ManualTransmission
FROM   CTE
WHERE  Rnk = 1 
```

或其他

```
SELECT TOP 1 WITH TIES Make,
                       Model,
                       ManualTransmission
FROM   Cars
WHERE  Make = 'Ford'
ORDER  BY ManualTransmission DESC 
```

`ManualTransmission`这两个答案都利用了`BIT`数据类型这一事实，并且`1`是它可以拥有的最大可能值。如果`ManualTransmission`可以为空，那么您需要将它们更改为

```
ORDER BY ISNULL(ManualTransmission,0) DESC 
```

或者

```
ORDER BY CASE WHEN ManualTransmission = 1 THEN 0 ELSE 1 END 
```

该`CASE`版本还将适用于更复杂的条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:30:26.217

试试这个：

```
select *
from (select *,
             max(cast(ManualTransmission as int)) over (partition by make) as hasManual
      from cars
      where make = 'Ford'
     ) t
where hasManual = 0 or ManualTransmission = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:58:43.410

我想我找到了一个相当便宜的方法？它似乎更便宜，因为它不需要做任何排序

```
;WITH CTE AS
(
    SELECT   *
            ,HasManual = SUM(CAST(ManualTransmission AS INT)) OVER (PARTITION BY Make)
    FROM Cars
)
SELECT Make, Model, ManualTransmission
FROM CTE 
WHERE   (Make = 'Ford' AND ManualTransmission = 1)
OR      (Make = 'Ford' AND HasManual = 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T20:26:56.560

您可以尝试以下方法：

```
SELECT * FROM Cars
 WHERE Make = COALESCE('Ford', Make)
   AND ManualTransmission = COALESCE(1,ManualTransmission) 
```

# db2 - 请问真正的唯一索引能站起来吗？

> ID：14203450
> 
> 赞同：0
> 
> 时间：2013-01-07T20:22:33.070
> 
> 标签：db2, indexing, unique-constraint, unique-index

我最近遇到了一个 DB2 表，它具有三个不同的唯一索引。

```
Index 1 (Columns: A, B, C)
Index 2 (Columns: A, B, C, D)
Index 3 (Columns: A, B, C, D, E) 
```

最具体的一个是*实际*的唯一索引吗？或者唯一性的定义是否因 DB2 使用哪个索引来访问表而有所不同？

我有点困惑，因为索引 1 表明只要我对 A、B、C 的值是唯一的，我就可以对 D 和 E 有重复的值。但是索引 3 表示 A、B、C、D , E 是唯一的，所以我毕竟不能有 D 和 E 的重复值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-26T09:11:10.553

恰恰相反，唯一重要的唯一索引是索引 1（用于唯一性）。

我没有尝试过，但是为了访问目的，DB2 会使用更适合您正在执行的实际查询的索引。

例如，如果您查询 { A=1, B=2, C=3 } 它应该使用索引 1；如果您正在查询 {A =1, B=2, C=3, D=4 } 它应该使用索引 2，即使它可以只使用索引 1，但您不会看到任何性能提升。

# html - 超链接输入图像

> ID：14203456
> 
> 赞同：0
> 
> 时间：2013-01-07T20:22:46.560
> 
> 标签：html, css, image, forms, input

[我正在努力复制PayPal 网站](https://www.paypal.com/uk/webapps/mpp/home)顶部的登录表单。

我已经能够通过在网上搜索教程来创建用户名和密码字段，包括“蓝色光芒”；但是，我找不到任何编码来将“可点击”问号添加到该字段。

我希望能够在单击问号时复制下拉列表。

任何帮助将不胜感激。

我希望我已经说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:31:35.297

你可以做的是在你的表单中让问号图像触发一个java函数......例如：

```
<img src="my_image.jpg" onClick="myjava_function()"> 
```

然后在您的 java 函数中，您可以显示一个包含下拉列表的 div。

```
<script type="text/javascript">
myjava_function(){
document.getElementById('mydiv').style.display="block"
}
</script> 
```

然后在表单附近，您可以让包含下拉列表的 div 首先被隐藏但在点击时显示。

```
<div id="mydiv" style="display:none;"><form><select><option value=1>1</option></select></form></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:30:11.763

这将是我完成它的方法。首先，尝试获取类似于问号的日志，并将其放置在您要放置区域的 div 中。在徽标的 CSS 中应用浮动右侧，以便徽标出现在该 div 的右侧。然后构建一个在您事先单击日志时出现的整个 div，并给它 CSS display none，因此它不会显示。编写一个 javascript 函数，该函数与您在徽标上应用的 onclick 一起工作，该函数将该 div 的 CSS 更改为显示块，因此当您单击它时会出现整个 div。div 本身有一个十字标记，可以触发另一个 javascript 调用以将 CSS 更改为不显示。祝你好运。

# java - getResourceAsStream 返回 InputStream 但 Scanner 无法读取

> ID：14203460
> 
> 赞同：3
> 
> 时间：2013-01-07T20:23:04.860
> 
> 标签：java, file-io

我正在尝试从 .jar 文件的根目录加载一个文本文件。我尝试过这样的事情：

```
InputStream is = getClass().getResourceAsStream("/infobook.txt");
Scanner scan = new Scanner(is);
ArrayList<String> strings = new ArrayList<String>();
while(scan.hasNextLine())
{
    strings.add(scan.nextLine());
} 
```

我没有得到任何运行时异常，但是，ArrayList 中没有添加任何行。然后我尝试了类似的东西`System.out.println(scan.nextLine());`，但我遇到了一个`java.util.NoSuchElementException: No line found`例外。现在我很困，需要你的帮助。文本文件有 21 行文本。我将如何从 jar 中加载此文本文件？

[编辑] 我也尝试过像这样读取输入流：

```
InputStream is = getClass().getResourceAsStream("/infobook.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(is));
System.out.println(br.readLine()); 
```

给出以下错误：`java.util.zip.ZipException: invalid stored block lengths`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:30:07.863

我会检查你的类路径中没有一个文件（你不期望的）是空的。尝试打印

```
// print where the file is found.
System.out.println(getClass().getResource("/infobook.txt")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:33:21.237

我试图创建类似的场景，但我一直成功运行。但即使你给出错误的文件名，它也会产生不同的异常。我的意思是扫描仪无法读取它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:35:36.350

可能是字符集问题；明确选择此项。

```
Scanner scan = new Scanner(is, "Windows-1252"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:47:32.367

如果您将来要查看此内容 - 如果您在 OSX 上，请尝试更新您的 java.lang. 这对我有用，也可能对你有用。否则，请尝试下面/上面的其他答案。

# c# - 如何从 Xslt 中的现有程序集访问 C# 静态方法（可能在静态类中）？

> ID：14203461
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:23:05.160
> 
> 标签：c#, .net, xml, xslt

我们如何从 Xslt 中的静态类访问静态方法？静态类已在程序集中定义。

这是我要参考的静态类的定义

```
namespace Helper
{
    public static class StaticXsltHelper
    {
        public static double CalclutePerctange(int a, int b)
        {
            return b == 0 ? 0 : ((double)a * 100) / b;
        }
    }
} 
```

我们如何`StaticXsltHelper.CalclutePerctange`在 Xslt 中引用方法？

对于非静态类和非静态方法，我可以使用以下语法

```
XslCompiledTransform t = new XslCompiledTransform();
XsltArgumentList l = new XsltArgumentList();
l.AddExtensionObject("a:b", new XsltHelper());
t.Load("XSLTFile.xslt", new XsltSettings(true, true), null);
using (StreamWriter w = new StreamWriter("XMLFileOut.xml"))
{
    t.Transform("XMLFile.xml", l, w);
} 
```

这是 XsltHelper 类的定义

```
namespace Helper
{
    public class XsltHelper
    {
        public double CalclutePerctange(int a, int b)
        {
            return b == 0 ? 0 : ((double)a * 100) / b;
        }
    }
} 
```

xslt 看起来像

```
 <xsl:stylesheet version="1.0" xmlns:prefix_1="http://www.w3.org/2001/XMLSchema-instance" xmlns:helper="a:b" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes"/>
  <xsl:template match="/">
    <xsl:for-each select="Entity">
      <Entity>
          <Percent>
            <xsl:value-of select="helper:CalclutePerctange(Value, Total)"/>
          </Percent> 
```

但我没有找到任何关于静态方法的信息。

任何形式的帮助/评论将不胜感激。另外我想知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T05:51:10.450

你想做这件事的主要原因是什么？

很可能没有办法为 XSLT 扩展对象使用静态类。

如果问题是方法已经在另一个程序集中定义，您无法修改如何在您可以修改的程序集中使用类似的东西：

```
public class XsltHelper
{
        public double CalculatePerctange(int a, int b)
        {
             return StaticXsltHelper.CalculatePercentage(a, b);            
        }
} 
```

或者，如果您担心创建了太多对象，则可以使用单例：

```
namespace Helper
{
    public class XsltHelper
    {
        private XsltHelper();
        public readonly XsltHelper Instance = new XsltHelper();

        public double CalculatePerctange(int a, int b)
        {
            return b == 0 ? 0 : ((double)a * 100) / b;
        }
    }
} 
```

然后使用：

```
l.AddExtensionObject("a:b", XsltHelper.Instance); 
```

# web-applications - 在本机“Web”应用程序中滚动

> ID：14203467
> 
> 赞同：1
> 
> 时间：2013-01-07T20:24:04.490
> 
> 标签：web-applications, jquery-mobile, scroll

我已经开发原生 iOS 应用程序 2 年了。由于一些客户需要 iOS、Android 和 Winphone 支持，我决定尝试使用 WebApps（HTML、JQuery 移动......）和 PhoneGap。一切都像魅力一样，但现在我遇到了一些问题。

我想创建一个原生应用程序的感觉，但是当我向下滚动时，正如您在下面附加的图像中看到的那样，标题总是随着屏幕滚动。

我希望有人可以帮助我解决这个问题。

最好的问候，卢卡斯

![在此处输入图像描述](../Images/316841fab319126a512160ed884d8967.png)

![没有任何](../Images/dc581b4a924bcde576337060924c1c48.png)

编辑：我正在寻找一个 JS 解决方案。（如果可能的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:51:36.273

在您的`viewDidLoad`方法中，添加`webView.scrollView.bounces = NO;`

这将处理“有弹性”的 webView，并防止用户滚动到页面顶部之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:34:08.640

有更多的解决方案来实现，我想做的事。我只想添加以下信息以供其他人寻找解决方案。如果您使用 phonegab，您可以将以下代码添加到您的 config.xml 以禁用弹跳。

```
<preference name="webviewbounce" value="false" /> 
```

# c# - 动态版本控制

> ID：14203468
> 
> 赞同：8
> 
> 时间：2013-01-07T20:24:08.183
> 
> 标签：c#, vb.net, assemblyfileversion

我有一种情况，我希望版本控制在构建时是动态的。

版本模式：`<year>.<month>.<day>.<hhmm>`

但是我已经阅读了在编译时重新解析属性中使用的字符串值的位置。

有关如何完成此动态版本控制的任何建议？

理想情况：

```
<Assembly: AssemblyVersion("4.0.0.0")> 
<Assembly: AssemblyFileVersion(Year(Now) & "." & Month(Now()) & "." & Day(Now()) & "." & String.format("hhmm", now()))> 
```

我知道它不会起作用，但应该明白这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:03:26.980

您可以使用[MsbuildCommunityTasks](https://github.com/loresoft/msbuildtasks/downloads)生成内部版本号并在预构建时自定义程序集文件版本。

*   [在MsbuildCommunityTasks](https://github.com/loresoft/msbuildtasks/downloads)下载 zip

*   解压到文件夹 [SolutionFolder]\MsBuildExtensions\MSBuildCommunityTasks

*   在 Microsoft.CSharp.Targets 导入之后，在您的项目 (csproj) 中添加以下示例。

```
 <PropertyGroup>
  <MSBuildCommunityTasksPath>$(MSBuildThisFileDirectory)..\MsBuildExtensions\MSBuildCommunityTasks</MSBuildCommunityTasksPath>  
    <My-PropertiesDir>Properties</My-PropertiesDir>
  </PropertyGroup>
  <Import Project="$(MSBuildCommunityTasksPath)\MSBuild.Community.Tasks.Targets"/>
  <Target Name="BeforeBuild">
    <Time Format="yyyy.MM.dd.HHmm">
      <Output TaskParameter="FormattedTime" PropertyName="My-VersionNumber" />
    </Time>
    <Message Text="Building $(My-VersionNumber) ...">
    </Message>
    <ItemGroup>
      <My-AssemblyInfo Include="$(My-PropertiesDir)\AssemblyVersionInfo.cs" />
      <Compile Include="@(My-AssemblyInfo)" />
    </ItemGroup>
    <MakeDir Directories="$(My-PropertiesDir)" />
    <AssemblyInfo OutputFile="@(My-AssemblyInfo)"
          CodeLanguage="CS"
          AssemblyFileVersion="$(My-VersionNumber)"
          AssemblyInformationalVersion="$(My-VersionNumber)"
          Condition="$(My-VersionNumber) != '' "
          />
  </Target>
  <Target Name="AfterBuild">
    <Delete Files="@(My-AssemblyInfo)" />
  </Target> 
```

*   从您的 AssemblyInfo.cs 中擦除 AssemblyFileVersion 属性。它将在构建时生成。

*   构建时，您会在控制台上看到打印的版本号。生成的文件在 AfterBuild 目标上被删除，以保持源代码管理干净。

    *构建前：*

    构建 2013.01.14.1016 ... 创建了 AssemblyInfo 文件“Properties\AssemblyVersionInfo.cs”。

    (...)

    *构建后：*

    删除文件“Properties\AssemblyVersionInfo.cs”。

*   如果您想对许多具有较少 msbuild 代码的项目执行此操作，则有必要创建一个自定义的构建脚本来包装您的解决方案。

# html - 如何使用 css3 水平居中始终位于顶部（粘性）的元素？

> ID：14203469
> 
> 赞同：0
> 
> 时间：2013-01-07T20:24:09.583
> 
> 标签：html, css

我需要实现图像上的内容。我不能把我的菜单放在蓝色区域（水平中心+垂直顶部+粘性）

尝试使用 position:fixed 但这是我能得到的最好的。

![我的问题](../Images/b800a4dd7ffb4d297f864a198ce9baec.png)

CSS：

```
.menu 
{   
position:fixed;
height: 40px;
width: 505px;

background: #4c4e5a;
background: -webkit-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
background: -moz-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
background: -o-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
background: -ms-linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);
background: linear-gradient(top, #4c4e5a 0%,#2c2d33 100%);

-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:27:02.510

诀窍是设置`left`为，然后用相当于元素宽度一半的`50%`负数将其拉回：`margin-left`

```
.menu {   
    position:fixed;
    width: 505px;
    top: 0; left: 50%;
    margin-left: -252px; /* 505 / 2 */
} 
```

这是小提琴：http: [//jsfiddle.net/heXR7/](http://jsfiddle.net/heXR7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-28T11:39:31.497

您应该将 left 设置为 50%，然后添加 transform 属性：

```
.menu {
  position:fixed;
  width: 505px;
  left: 50%;
  transform: translateX(-50%);
} 
```

# unity3d - 如何在 Vuforia SDK for Unity 3D 中在运行时为 ImageTarget 设置 TrackableName？

> ID：14203475
> 
> 赞同：1
> 
> 时间：2013-01-07T20:24:35.857
> 
> 标签：unity3d

我正在为 Unity 3D 平台使用 Vuforia 的 SDK。我正在尝试在运行时动态设置 TrackableName。我找到了一个代码

```
GameObject prefab = Instantiate(imageTarget) as GameObject;
ImageTargetBehaviour imgTargetBeh = prefab.GetComponent();
imgTargetBeh.DataSetPath = "QCAR/Test.xml";
imgTargetBeh.TrackableName = "Daddy";
imgTargetBeh.mInitializedInEditor = true;
myModel.transform.parent = prefab.transform; 
```

问题是 DataSetPath、TrackableName、mInitializedInEditor 出现错误。ImageTargetBehaviour 类没有上述属性。那么如何/在哪里设置属性？

谢谢， 斯里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:09:49.343

我还不能发表全球评论，所以我会在这里询问更多信息并在我有它时更新它。

第二行让我担心，因为你没有告诉 Unity 要获得什么样的组件。尝试`GetComponent(typeof(ImageTargetBehaviour))`代替空参数。

> 问题是 DataSetPath、TrackableName、mInitializedInEditor 出现错误。ImageTargetBehaviour 类没有上述属性。那么如何/在哪里设置属性？

如果 ImageTargetBehaviour 类没有这些属性，那么您为什么要尝试访问它们？文档是否指示您这样做？如果是这样，那么您的 ImageTargetBehaviour.js 脚本有问题。

# c - 向 USB-to-Prallel (D-Sub 25pins) 端口发送字节时程序暂停

> ID：14203481
> 
> 赞同：0
> 
> 时间：2013-01-07T20:25:14.793
> 
> 标签：c

我有一根 USB 转 25 针并行端口电缆。我将它连接到笔记本电脑并在 /dev/usb/lp0 处获得一个端口，然后我将并行端口的 pin1/pin25 与它点亮的 +/- LED 连接。现在我将 LED 的 +pin 移动到并行端口的 pin 2，并尝试将字节发送到端口，它应该会亮起，但不会。以下是我在 linux 中的 c 代码。

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/io.h>      
void main(void)
{
int port=0x378;
outb(0xff,port);
outb(0x01,port+2);
sleep(1);
outb(0x00,port+2);
printf("‌​End");
} 
```

这是我的完整程序，我也用 port=0x3bc 检查了它，但没有用。即使我通过连接 LED 的 + 来检查频闪引脚 1，它也一直亮但不会变低。可能是端口地址有问题。

对于 /dev/usb/lp0 我还使用了命令行命令，例如 $echo $'\xFF' > /dev/usb/lp0 我观察到它做了一些事情但没有点亮 LED。当我将 LED 与 pin2 和 25 连接为 + 和 - 时。一开始我可以在 LED 的一侧看到非常小的光，但是当我在命令上方运行时，非常小的光消失了，但 LED 并没有像我将它与闪光灯引脚连接时那样高亮。另外我只能执行上述命令两次。第三次和以后的时间，我的东西命令在它似乎停止时不起作用。任何人都可以帮助它为什么停止或者我怎样才能在数据引脚上打开/关闭 LED 开关？谢谢

# mod-rewrite - 如何解释以下 mod_rewrite 条件？

> ID：14203483
> 
> 赞同：0
> 
> 时间：2013-01-07T20:25:18.570
> 
> 标签：mod-rewrite

我有以下重写条件

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css) 
```

我已经阅读了 Apache mod_rewrite 手册，但是在解释上述内容时遇到了困难。

1.  我知道条件`RewriteCond %{REQUEST_FILENAME} !-f`意味着如果请求的文件名丢失

2.  条件`RewriteCond %{REQUEST_FILENAME} !-d`表示请求的目录是否丢失。

3.  我不知道是什么`RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)`意思

我的理解是，如果条件被评估为真，则应用规则处理条件，但我处理条件的规则是`RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]`

由于我还不知道第 3 点指的是什么，如果第 1 点评估为真，即如果请求文件丢失和第 2 点，即如果请求目录丢失，那么我是否正确解释`RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]`

**编辑**

在进一步挖掘之后，它似乎`RewriteCond %{REQUEST_FILENAME} !-f`意味着`RewriteCond %{REQUEST_FILENAME} !-d`当任何不是文件或目录并且不是它们丢失的东西时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:29:34.810

最后一行是说“请求的 URI 不以列出的后缀之一结尾。” （严格来说，正如 KingCrunch 所指出的，它会检查其中一个后缀是否在字符串中，无论是在末尾还是在中间。）

如果条件为真，则应用**以下**条件的规则；条件之前的规则是独立的，与条件无关。

您是正确的，如果条件 1 和条件 2 和条件 3 都评估为真，那么将执行以下规则。

要分解最后一个正则表达式：

表示不匹配，`!`即如果 REQUEST_URI 不匹配表达式；

`.*`指任何字符零次或多次；

`\.`表示句点（或句号）——用反斜杠转义，否则`.`表示任何字符；

`(ico|gif|jpg|jpeg|png|js|css)`表示由竖线分隔的字符串之一`|`，即“`ico`或`gif`或`jpg`等”。

如果正则表达式以`$`（字符串结束标记）结尾，则后缀后面可能没有字符；正如现在所写，任何字符都可以跟随。

因此，RewriteCond 正在检查 REQUEST_URI 是否与某些字符不匹配，后跟一个句点，然后是列出的文件类型后缀之一。如果不是，则条件评估为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:29:56.017

最后一个条件表示“当`REQUEST_URI`不包含 [1] 'ico'、'gif'、'jpg'（等等）之一”。当所有三个规则的计算结果为 时`true`，将应用（未显示）`RewriteRule`。

[1] 这有点……不完整，因为它*应该*说“not end in”，但事实并非如此。但这是不同的点:)

# ruby - Watir 打开多个浏览器或选项卡

> ID：14203486
> 
> 赞同：5
> 
> 时间：2013-01-07T20:25:36.433
> 
> 标签：ruby, watir, watir-webdriver

如何使用我的 code-watir 打开多个浏览器，例如通过`while`从 0 到 10 的循环？

这是我的代码：

```
require 'watir-webdriver'
require 'headless'
class Page
    @headless = Headless.new
    @headless.start
    @browser = Watir::Browser.start 'bit.ly/***'
    def self.get_connection

        puts "Browser started"  
        puts @browser.title
        @browser.driver.manage.timeouts.implicit_wait = 3 #3 seconds

        @browser.select_list(:name => 'ctl00$tresc$111').select_value('6')
        puts "Selected country"  
        @browser.select_list(:name => 'ctl00$tresc$222').wait_until_present
        @browser.select_list(:name => 'ctl00$tresc$333').select_value('95')
        puts "Selected city" 
    end

    def self.close_connection
        @browser.close
        @headless.destroy
    end
end

Page.get_connection
Page.close_connection 
```

但是如何做这样的事情呢？

```
while i < 10
Page.get_connection
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:48:06.967

这应该打开十个浏览器：

```
10.times {Watir::Browser.new} 
```

如果您想稍后使用浏览器，可以将它们放在哈希中：

```
browsers = {}
(0..9).each {|i| browsers[i] = Watir::Browser.new}
browsers[0].goto "google.com"
browsers[1].goto "yahoo.com" 
```

# html - 为什么我应该是“发布”请求时收到“获取”请求

> ID：14203487
> 
> 赞同：0
> 
> 时间：2013-01-07T20:25:45.203
> 
> 标签：html, forms, post, get, request

我正在尝试提交下面的表单以上传文件，但是每当我提交表单时，遇到的请求都是“GET REQUEST”。这只是我的浏览器有问题吗？

```
<form enctype="multipart/form-data" id="frmUploadDoc2" target="hiddenIframe" method=”POST” action="/rest/wle">
   <input id="myFileName" type="file" name="data" />
   <input type="text" name="action" value="addDocument" />
   <input type="text" name="accept" value="application/json" />
   <input type="text" name="parts" value="none" />
   <input type="text" name="name" value="myTestQ1" />
   <input type="text" name="docType" value="file" />
   <input type="submit" value="Submit"/>
</form>
<iframe name="hiddenIframe" id="hiddenIframe" style="display: none;"> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T20:28:45.827

特殊字符引号可能是罪魁祸首：

```
method=”POST” 
```

这些是`&rdquo;`生成的报价。用简单的键盘替换那些`"`（双引号）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T20:29:04.397

# tfs - TF218027 用户创建新团队项目时出错

> ID：14203488
> 
> 赞同：0
> 
> 时间：2013-01-07T20:25:51.627
> 
> 标签：tfs

我有一个用户在尝试创建新团队项目时收到以下错误：

> TF218027: 无法在运行 SQL Server Reporting Services 的服务器上创建以下报告文件夹[...]

在多次尝试使用来自该站点以及其他站点的反馈进行修复后，我已经缩小了问题的范围，但不确定下一步该怎么做。

用户在 SSRS 中的相应组中，具有 Content Manager 和 Team Foundation Content Manager 角色。我还打破了[这篇](https://stackoverflow.com/questions/9214632/tfs-permissions-to-create-team-projects-in-a-specific-collection)stackoverflow 文章的权限继承。

我观察到的奇怪的事情是，通过将用户直接放入 SSRS，它可以工作。相反，通过成为组的成员，它不起作用。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:28:33.743

Windows 组成员仅在登录时刷新。如果您现在将用户添加到组中，则用户可能需要注销并重新登录才能使新的组成员身份生效。

# xmpp - Ejabberd vCard：URI 图像不起作用

> ID：14203490
> 
> 赞同：0
> 
> 时间：2013-01-07T20:25:55.547
> 
> 标签：xmpp, ejabberd, pidgin

[根据xep-0054](http://xmpp.org/extensions/xep-0054.html#dtd)，我正在尝试使用后端提供的 URI 设置 PHOTO vCard 属性，

```
<!-- Photograph property. Value is either a BASE64 encoded
binary value or a URI to the external content. -->
<!ELEMENT PHOTO ((TYPE, BINVAL) | EXTVAL)> 
```

我正在使用`ejabberdctl`扩展`mod_admin_extra`程序。

```
ejabberdctl set_vcard foo chat.myjabber.com PHOTO http://link_to_image.jpg
ejabberdctl set_vcard2 foo chat.myjabber.com PHOTO EXTVAL http://link_to_image.jpg 
```

但似乎不起作用，我在 pidgin & psy 中什么也没看到（值已正确保存在数据库中）

我正在运行 Archlinux、Pidgin 2.10.6 (libpurple 2.10.6) 和 ejabberd 2.1.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:28:32.077

我在[https://github.com/processone/ejabberd/issues/47](https://github.com/processone/ejabberd/issues/47)上问过，大多数流行的客户端都不支持 EXTVAL

xep-0054 与 xep-0153 相矛盾

```
4.5 XML Syntax

The following rules apply to the XML syntax:

The <PHOTO/> element SHOULD contain a <BINVAL/> child whose XML character data is Base64-encoded data for the avatar image.

The <PHOTO/> element SHOULD NOT contain an <EXTVAL/> that points to a URI for the image file.

The <PHOTO/> element MUST NOT contain the avatar image itself.

The <PHOTO/> element SHOULD contain a <TYPE/> child whose XML character data specifies the content-type of the image data. The XML character data SHOULD be "image/gif", "image/jpeg", or "image/png".

The <PHOTO/> element MUST NOT possess a 'mime-type' attribute. 
```

# facebook-apps - 设置请求对话框多朋友选择器以仅显示用户 21+

> ID：14203497
> 
> 赞同：0
> 
> 时间：2013-01-07T20:26:28.083
> 
> 标签：facebook-apps, facebook-app-requests, multi-friend-selector

我在页面选项卡应用程序中有一个请求对话框。我希望不必向用户询问任何权限。我希望用户能够向朋友发送请求（请求对话框工作正常），但我只希望 21 岁以上的朋友出现在用户多朋友选择器中。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:36:55.220

[Requests 对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)有一个参数，您可以使用该`filters`参数来定义哪些用户出现/不出现在请求对话框中。

您还可以向您的用户请求 friends_birthday 权限，并过滤掉没有可见生日或小于 21 岁的朋友。

如果用户在 21 岁以下绝对不能看到该应用程序，只需通过 API 或应用程序设置限制您的整个应用程序，以便这些用户看不到该应用程序、其内容或来自它的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:53:00.240

您可以为此使用自定义多朋友选择器，就像： [mikebrevoort 的](http://archives-mike.brevoort.com/2010/08/10/introducing-the-jquery-facebook-multi-friend-selector-plugin/index.html)插件一样，并检查年龄并发送请求。

# gunicorn - Gunicorn、Flask 和 SQLAlchemy：并发请求

> ID：14203503
> 
> 赞同：4
> 
> 时间：2013-01-07T20:26:47.927
> 
> 标签：gunicorn

我正在使用 Gunicorn 在 Nginx 上托管一个 Flask 应用程序——它通过 SQLAlchemy 连接到数据库。目前 Gunicorn 配置为总共使用 5 个工人。

简而言之，当按下按钮时，应用程序会检查数据库以确保该项目可用，如果可用，则将其提供给用户。

但是，当使用 Gunicorn 使用 5 名工人时，如果两个用户同时按下按钮，他们都会获得该物品。我将工人减少到 1，这个问题就消失了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T23:05:17.260

这似乎是一个标准的并发控制问题，而不是 Gunicorn 的问题。

问题可能是您的“检查数据库”是这样实现的：

assign_item（项目 X，用户 U）：

1.  检查项目 X 在一个查询中是否可用
2.  将项目 X 分配给用户 U 并返回该值。

假设两个用户（A 和 B）试图同时认领项目 X，因此 assign_item(X, A) 在 Worker #1 上运行，assign_item(X, B) 在 Worker #2 上运行。

Worker #1 可以运行 assign_item(X, A) 的第一行，然后 Worker #2 运行 assign_item(X, B) 的第一行。此时，两个检查都返回 True；该项目可用。因此，现在两个工作人员都运行各自的下一个操作，并将相同的项目返回给用户。

使用数据库解决这个问题的方法是在 assign_item 中使用 BEGIN TRANSACTION 和 END TRANSACTION，确保这两个操作原子发生。

这是一个众所周知的问题，可以在[http://en.wikipedia.org/wiki/Concurrency_control找到更多信息](http://en.wikipedia.org/wiki/Concurrency_control)

# iphone - CFString 内存管理问题

> ID：14203505
> 
> 赞同：1
> 
> 时间：2013-01-07T20:26:55.350
> 
> 标签：iphone, ios, ios6

我正在为 iPhone 开发一个应用程序，但遇到了一些内存管理问题。在应用程序执行期间，活动字节数不断增加而不受限制。我试图在我的代码中追踪问题，但似乎找不到任何会导致活动字节急剧增加的东西。我在执行过程中注意到的一件事是 CFString(Immutable) 的分配增长最快，并且永远不会减少或保持不变。有谁知道为什么会发生这种情况？在此执行期间，应用程序所做的所有事情都是从本地数组或字符串填充表视图，然后下载另一个字符串对象数组并填充不同的表视图。我正在使用 ARC。

![在此处输入图像描述](../Images/791ffe313a1014a1460859380479bd44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:36:56.443

鉴于缺乏任何具体的进展，我会给你一些一般建议：

*   有关如何使用 Instruments[查找泄漏的指导，请参阅使用 Instruments 查找泄漏。](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW4)

*   有关如何从您的分配到对这些分配的来源进行更有意义的分析的具体建议，请参阅此[Stack Overflow 答案](https://stackoverflow.com/questions/14104556/ios-app-with-arc-find-who-is-owner-of-an-object/14105056#14105056)的第 4 点。简而言之，突出显示您在分配中无法解释的跳跃，设置底部窗口以显示调用树，隐藏系统库，并查看您的哪些例程正在消耗内存。

*   此外，不要忽视[静态分析器](http://developer.apple.com/library/ios/#recipes/xcode_help-source_editor/Analyze/Analyze.html)，如果您不使用 ARC，或者如果您使用任何 Core Foundation 调用，这一点尤其重要。

*   你在用 Core Foundation 函数做任何事情吗？如果是这样，您显然需要知道您要么必须明确地将所有权转移给 ARC（使用 要么`CFBridgingRelease`） ，`__bridge_transfer`要么手动调用`CFRelease`. 不过，我之前的静态分析器会向您指出这一点。

# datasource - 具有多个条件的 Kendo 数据源过滤

> ID：14203509
> 
> 赞同：4
> 
> 时间：2013-01-07T20:27:04.403
> 
> 标签：datasource, kendo-ui

我想为具有多个条件的数据源构建过滤器。我发现了这个线程（[HERE](http://www.kendoui.com/forums/framework/data-source/multiple-filters-on-datasource.aspx)），这些人几乎有同样的问题，但我想在我的两个操作之间做一个 OR 而不是 AND。

到目前为止，我有代码：

```
 var filter = { logic: "OR", filters: [] };

        var filterProduct = { logic: "AND", filters: [] };
        var supplierValue = dropdownSupplier.value();
        if (supplierValue != "00000000-0000-0000-0000-000000000000") {
            filterProduct.filters.push({ field: "SupplierId", operator: "eq", value: supplierValue });
        }

        var categoryValue = dropdownCategory.value();
        if (categoryValue != "00000000-0000-0000-0000-000000000000") {
            filterProduct.filters.push({ field: "CategoryId", operator: "eq", value: categoryValue });
        }

        var typeValue = dropdownType.value();
        if (typeValue != "00000000-0000-0000-0000-000000000000") {
            filterProduct.filters.push({ field: "TypeId", operator: "eq", value: typeValue });
        }

        var filterSelect = { logic: "OR", filters: [] };
        filterSelect.filters.push({ field: "Id", operator: "eq", value: "00000000-0000-0000-0000-000000000000" });

        filter.filters.push(filterProduct);
        filter.filters.push(filterSelect);

        dropdownProduct.dataSource.query({ filter: filter }); 
```

事实上，我想要做的是：（filterProduct）或（filterSelect）但如果我没有在变量过滤器中使用“逻辑”，过滤器将是一个“AND”。

非常感谢

编辑：有一个 jsFiddle 接近我想要做的，但使用“AND”：[示例](http://jsfiddle.net/valchev/MG89G/)在此示例中，过滤器是：[ {[ Freight = 11.61 OR Freight = 51.30 ]} AND {[ City startswith "Charleroi" ]} ]

但我想要一些类似的东西：[ {[ Freight = 11.61 OR Freight = 51.30 ]} **OR** {[ City startswith "Charleroi" ]} ]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T14:13:21.947

最终代码正常工作：

关键字 AND 和 OR 需要小写，我不需要使用变量 filterSelect

> ```
>  var filter = { logic: "or", filters: [] };
>     var filterProduct = { logic: "and", filters: [] };
>     var supplierValue = dropdownSupplier.value();
>     if (supplierValue != "00000000-0000-0000-0000-000000000000") {
>         filterProduct.filters.push({ field: "SupplierId", operator: "eq", value: supplierValue });
>     }
>     var categoryValue = dropdownCategory.value();
>     if (categoryValue != "00000000-0000-0000-0000-000000000000") {
>         filterProduct.filters.push({ field: "CategoryId", operator: "eq", value: categoryValue });
>     }
>     var typeValue = dropdownType.value();
>     if (typeValue != "00000000-0000-0000-0000-000000000000") {
>         filterProduct.filters.push({ field: "TypeId", operator: "eq", value: typeValue });
>     }
>     if (filterProduct.filters.length > 0) {
>         filter.filters.push(filterProduct);
>     }
>     filter.filters.push({ field: "Id", operator: "eq", value: "00000000-0000-0000-0000-000000000000" });
>     dropdownProduct.dataSource.query({ filter: filter }); 
> ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-29T15:28:39.450

谢谢forumma，你的例子帮助了我。对于其他试图解读 Kendo UI 的人（因为有多种未记录的做事方式），我已经包含了在两个不同字段上设置过滤器的示例，并且一个字段具有复合 OR 过滤器：

```
var initialFilter = { logic: "or", filters: [] };
var filterStatus = [
    { field: "impStatus", operator: "neq", value: "Complete" }
    ];
var filterDeveloper = { logic: "or", filters: [
      { field: "developer", operator: "eq", value: "Unassigned" }
    ] };

filterDeveloper.filters.push( { field: "developer", operator: "eq", value: "Bob" } );

initialFilter.filters.push( filterStatus );
initialFilter.filters.push( filterDeveloper );

dataSource.filter( initialFilter ); 
```

# entity-framework - 如何解决“在程序集中找不到视图或可以为表生成视图”？

> ID：14203511
> 
> 赞同：1
> 
> 时间：2013-01-07T20:27:08.450
> 
> 标签：entity-framework, entity-framework-5, asp.net-web-api

我正在使用 Entity Framework 5 中的数据库优先模型，当我尝试添加行时，出现以下错误：“在程序集中找不到视图或可以为表 'ui_renewals' 生成视图。”

该表存在于我的 EDMX 中，并且模板生成了一个 ui_renewals 类。我已经从 EDMX 中删除了该表，并使用“从数据库更新模型”选项再次添加它，我得到了同样的错误。为它创建一个单独的连接可以解决这个问题，但这似乎是一个不太理想的解决方案（更像是一个杂物），更不用说它使将来更难以维护。

关于如何解决这个问题的任何想法，以便我可以在 ui_renewals 中添加或更新（我都尝试过）一行？

这是我目前正在使用的代码 - 之前唯一的区别是使用 db 作为 DBContext 而不是 ui （是的，收据拼写错误 - 必须喜欢遗留的东西）

```
 [HttpPost]
    public bool UpdateTeacher(string login_id, string password, UIRenewal data)
    {
        if (ModelState.IsValid)
        {
            // map from UIRenewal VM to ui_renewal
            ui_renewals Renewal = Mapper.Map<UIRenewal, ui_renewals>(data);
            // check to see if this is a new entry or not
            var tmp = ui.ui_renewals.Find(Renewal.reciept);
            if (tmp == null)
                ui.ui_renewals.Add(Renewal);
            else
            {
                // mark as modified
                db.Entry(Renewal).State = EntityState.Modified;
            }
            // save it
            try
            {
                ui.SaveChanges();
            }
            catch (DBConcurrencyException)
            {
                return false;
            }
            return true;
        }
        return false;
    } 
```

我应该提到我在模型中确实有一个视图（v_recent_license）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T08:15:34.550

我知道这是一个非常古老的问题，但是由于我还没有找到任何其他类似的主题，所以我会发布我的答案。

我抛出了同样的异常。我发现，在尝试优化 EF 性能失败时，按照[此处](http://msdn.microsoft.com/en-us/data/hh949853)找到的建议，我在 EF .edmx 代码隐藏中留下了这段代码：

```
<EntityContainerMapping StorageEntityContainer="XXXModelStoreContainer" CdmEntityContainer="YYYEntities" GenerateUpdateViews="false"> 
```

我删除了`GenerateUpdateViews="false"`字符串，一切都恢复了。

（在我看来，异常消息有点误导）。

# ruby-on-rails - Postgres 时区应该从 UTC 更改吗？

> ID：14203513
> 
> 赞同：1
> 
> 时间：2013-01-07T20:27:17.257
> 
> 标签：ruby-on-rails, postgresql, timezone, utc

我有一个 cron，它每小时在我的 rails 应用程序中运行一个脚本，以查找要运行的新事务。通常，这只会获取设置为在当天开始的新交易，直到 UTC 午夜，当第二天的所有交易到期时。我的 rails 应用程序在中央时间运行，但 Postgres 设置为 UTC。由于我使用的是带有`where`子句的范围，并且`now()`为了比较日期，新一天的交易在傍晚（在美国）运行。将 Postgres 的时区切换到中央时间有不利之处吗？据我所知，它无论如何都会以 UTC 记录所有时间戳，但会根据其时区设置运行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:32:03.447

您应该始终在应用程序内使用 UTC，并且仅在必要时在应用程序边缘执行到其他时区的转换 - 例如在控制器或视图中。

在您的查询中，执行一些[日期操作](http://www.postgresql.org/docs/9.2/static/functions-datetime.html)以`now()`将其转换为您需要的时区。

# c# - C# 中的 C 样式联合

> ID：14203514
> 
> 赞同：5
> 
> 时间：2013-01-07T20:27:18.173
> 
> 标签：c#, c, pinvoke

对于这些字段的命名，我深表歉意，但我必须根据 NDA 屏蔽字段名称等内容。

所以基本上我在 C# 中，我使用 Interop 与外部库进行通信，这需要通过引用传递特定结构，其中一个使用联合。这是一个似乎让我头疼的结构，因为我在网上找到了一些关于如何将两种数据类型而不是两个结构联合在一起的参考资料。这是两个结构的基础知识

```
struct datatype1
{ 
    char field1; 
    char field2; 
    char field3;
    char field4;
    char field5; 
    char field6; 
    char field7; 
};

struct datatype2
{
    public uint field8;
    public uint field9;
}

struct datatype3
{
    unsigned int field10;
    union
    {
        datatype1 field11;
        datatype2 field12;
    } field13;
    uint field14;
    unsigned char field15;
    uint field16;
} 
```

在 c# 中生成的结构会是什么样子？我有一些想法，其中一些似乎可行，但一段时间后会导致蓝屏并显示 reference_by_pointer 消息，我在想也许我的结构定义有些问题是错误的，并且不知何故数据不合适在结构中正确。这是我目前拥有的：

```
 [StructLayout( LayoutKind.Sequential )]
    public struct datatype1
    {
        public byte field1;
        public byte field2;
        public byte field3;
        public byte field4;
        public byte field5;
        public byte field6;
        public byte field7;
    }

    [StructLayout( LayoutKind.Sequential )]
    public struct datatype2
    {
        public uint field8; // Digital i/p event
        public uint field9;
    }

    public struct datatype3
    {
        public uint field10;

        [StructLayout( LayoutKind.Explicit )]
        public struct AnonymousStruct
        {
            [FieldOffset( 0 )]
            public datatype1 field11;

            [FieldOffset( 0 )]
            public datatype2 field12;
        }

        public AnonymousStruct field13;

        public uint field14;

        public byte[] field15;

        public uint field16;
    } 
```

我做这一切都错了吗？

**编辑：为了响应更多信息的请求，这里是一个示例用法，但并不是说我无法提供字段的数量，因为它隐藏在 API 中。**

此外，这可能是 API 的问题，但这比我把 Interop 搞砸的可能性更大。

```
 ...inside thread....
    datatype3 dt = new datatype3();
    while( true )
    {
        api.get_next_value( ref dt );
        PrintData( dt );
        Thread.Sleep( 55 );
    }

    /// <summary>
    /// Prints the data from the event.  Used for debugging purposes.
    /// </summary>
    /// <param name="evp"></param>
    private void PrintData( datatype3 evp )
    {
        if( evp.field10 == 2 )
        {
            Console.WriteLine( "datatype2" );
            Console.WriteLine( "\tfield8val: " + evp.field13.field12.field8);
            Console.WriteLine( "\tfield9val: " + evp.field13.field12.field9 );
        }
        else if( evp.de_type == 1 )
        {
            Console.WriteLine( "datatype1" );
            Console.WriteLine( "\tfield1val:  " + evp.field13.field12.field1 );
            Console.WriteLine( "\tfield2val:  " + evp.field13.field12.field2 );
            Console.WriteLine( "\tfield3val:  " + evp.field13.field12.field3 );
            Console.WriteLine( "\tfield4val:  " + evp.field13.field12.field4 );
            Console.WriteLine( "\tfield5val:  " + evp.field13.field12.field5 );
            Console.WriteLine( "\tfield6val:  " + evp.field13.field12.field6 );
            Console.WriteLine( "\tfield7val:  " + evp.field13.field12.field7 );
        }
        else
        {
            return;
        }
    } 
```

对于无法提供绝对的电话或真实的上下文，我深表歉意，但我必须尊重 NDA，即使这意味着降低答案的质量。

**编辑2：这两种不同大小的数据类型联合在一起是否有可能对这种情况产生任何影响？我知道 datatype1 的大小为 7 个字节，而 datatype2 的大小为 8 个字节。这会导致某种内存问题吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:04:02.813

您的 C# union 没有问题。然而，`field15`是错误的。它`char`在 C 代码和`byte[]`C# 代码中。您需要像`byte`在 C# 代码中一样声明它。

对于它的价值，您可以放心省略`LayoutKind.Sequential`，因为这是结构的默认设置。

# html5-video - 使用 video.js 播放器时，控制栏在全屏模式下不会消失

> ID：14203517
> 
> 赞同：0
> 
> 时间：2013-01-07T20:27:49.640
> 
> 标签：html5-video

我正在使用 video.js 视频播放器。进入全屏后，控制栏不会淡出。如何让控件在全屏模式下淡出。当不处于全屏模式时，控制栏会在几秒钟后消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T23:03:00.397

控制栏隐藏问题已修复，将在 4.2 版中发布。

有一篇关于变化的文章。 [http://blog.videojs.com/post/57828375480/hiding-and-showing-video-player-controls](http://blog.videojs.com/post/57828375480/hiding-and-showing-video-player-controls)

# java - H2 设置默认时区

> ID：14203519
> 
> 赞同：8
> 
> 时间：2013-01-07T20:28:14.513
> 
> 标签：java, hibernate, timezone, h2

如何设置H2数据库的时区？我正在使用 Hibernate 创建数据库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T20:38:01.990

**编辑**：我发现我的答案可能不正确，至少会产生误导。我试图删除它，但显​​然这是不可能的。

请参阅：[How to store date/time and timestamps in UTC time zone with JPA and Hibernate](https://stackoverflow.com/questions/508019/jpa-hibernate-store-date-in-utc-time-zone?rq=1)

# objective-c - 带有 NSPrivateQueueConcurrencyType 的 KVO

> ID：14203522
> 
> 赞同：1
> 
> 时间：2013-01-07T20:28:36.863
> 
> 标签：objective-c, core-data, key-value-observing

我想确定核心数据中的属性是否发生变化并更新我的 UI。该属性可能会因在 NSPrivateQueueConcurrencyType 类型的托管对象上下文中运行的后台提取而改变。

我添加了一个监听器：[myCoreDataEntity addObserver:self forKeyPath:myCoreDataAttribute options:NSKeyValueObservingOptionNew context:nil]

但该事件永远不会触发。知道为什么吗？对象在另一个上下文中被更改 - 这可能是原因吗？（当 save: 在父上下文中完成时，什么都不会触发）。

我可以使用手动 KVO，但由于对象尚未保存到父上下文，刷新 UI 不起作用，因为当对象在与 NSPrivateQueueConcurrencyType 关联的上下文中更改时，它指向 NSMainQueueConcurrencyType 中的上下文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:35:15.197

您没有收到通知是因为您观察到了错误的对象。在`NSEntityDescription`运行时从不改变。它代表了实体在数据模型中的定义方式。但是，使用实体描述的实例`NSManagedObject`可以并且确实在运行时发生变化。如果您想知道特定托管对象的属性是否发生变化，则需要观察该特定对象。

如果您需要在*任何*托管对象更改该属性的值时得到通知，您最好的选择是为该属性编写一个自定义设置器并在那里处理它。您可能还会发现`NSManagedObjectContextObjectsDidChangeNotification`它很有用，但它会在任何属性更改时触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T06:44:02.950

假设`myCoreDataEntity`在您的示例中是托管对象，则问题在于建模属性[1](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW1)的自动外部更改通知 [由托管对象的核心数据禁用] ：

> NSManagedObject 为建模属性禁用自动键值观察 (KVO) 更改通知，并且原始访问器方法不调用访问和更改通知方法。对于未建模的属性，在 OS X v10.4 Core Data 上也禁用了自动 KVO；在 OS X v10.5 及更高版本上，Core Data 采用了 NSObject 的行为。

您可以为特定属性或托管对象子类或托管对象子类上的类别中的所有属性[打开它们：](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVOCompliance.html#//apple_ref/doc/uid/20002178-SW1)

单一属性：

```
- (BOOL) automaticallyNotifiesObserversFoMyCoreDataAttribute {
    return YES;
} 
```

所有属性（不推荐）：

```
+ (BOOL)automaticallyNotifiesObserversForKey:(NSString *)theKey {
    return YES;
} 
```

它不发送自动更改通知的原因主要是性能。自动更改通知确实会增加一些开销，尽管在最近的硬件上它相当小，即使在处理数千个对象时也是如此。与往常一样，配置文件以查看适合您的方法。

# c - 是否可以将 printf 作为参数转换为另一个函数？

> ID：14203529
> 
> 赞同：2
> 
> 时间：2013-01-07T20:29:08.283
> 
> 标签：c, pointers, linked-list, function-pointers

我正在研究一个链表库，这是我写的一个函数：

```
/**
 * go through a linked list and perform function func for every node of the
 * linked list
 *
 * func is a function pointer to the function you would to apply on the node.
 * it should return 0 if it is successful and non-zero value otherwise.
 */
void traverse_list(linkedlist * ll, int (* func)(void * args)){
    node * temp;

    temp = ll->head;
    while( temp != NULL ){
        if((* func)(temp->val))
            fprintf(stderr,"Error processing value!\n");
        temp = temp->next;
    }
} 
```

我的问题很简单，我尝试了类似 `travers_list(testlinkedlist,printf)`但它无法工作（printf 没有打印任何东西），我做错了什么？我能做到吗，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:35:06.513

这是一个可以帮助您的代码片段：

```
#include <stdio.h>

typedef int (*func)(const char* format, ...);

int main()
{
    func a = printf;
    a("Hello World\n");
    return 0;
} 
```

现在，如果你想在 C 语言中创建自己的函数，它接受可变数量的参数，[GNU 手册中的这个页面](http://www.gnu.org/software/libc/manual/html_node/Variadic-Functions.html#Variadic-Functions)是一个很好的资源，可以用来解释可变参数函数的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:42:04.277

创建您自己的函数类型，将您的列表元素作为参数。如果唯一匹配的函数是 ，则创建以函数为参数的遍历过程是没有意义的`printf`。（printf 有非常独特的签名）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:36:37.093

您应该将 printf 转换为函数的参数类型：

```
traverse_list(my_list, (int (*) (void*))&printf); 
```

请记住在使用它之前将其转换回来，否则这将导致未定义的行为。

（我假设您不想在这里更改函数的参数。）

编辑：

如果你真正要问的是你的函数应该采用什么参数，那么它应该是一个指向对应于 printf 概要的函数的指针，你可以在以下位置找到它`man 3 printf`：

```
int printf(const char *format, ...); 
```

# ios - 自定义按钮推回

> ID：14203530
> 
> 赞同：1
> 
> 时间：2013-01-07T20:29:08.943
> 
> 标签：ios, uiview, uinavigationcontroller, push, slide

我有两个使用 UINavigationController 的视图。当我点击自定义按钮时，我希望第二个视图通过动画“滑动”回第一个视图。（不是导航栏中的原始文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:30:18.370

在那个按钮动作上尝试这样的事情，

```
[self.navigationController popToViewController:aViewController animated:YES]; 
```

或者

```
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:([self.navigationController.viewControllers count] - 2)] animated:YES]; 
```

这里`aViewController`代表之前的视图控制器。同样，您可以使用类似的代码弹出到您想要的任何视图控制器。

`[self.navigationController popToRootViewControllerAnimated:YES];`将带您到根视图控制器。

# c# - 将静态属性传递给通用输入参数

> ID：14203533
> 
> 赞同：0
> 
> 时间：2013-01-07T20:29:30.813
> 
> 标签：c#

当我尝试在 RegisterMethod 中传递 x.Bar 时出现以下错误。

> 无法使用实例引用访问成员“TestProject2.Foo.Bar.get”；改为使用类型名称来限定它

**问：是否有可能让 Bar 属性保持静态？**

```
namespace TestProject2
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void TestMethod1()
        {

            RegisterMethod<Foo, string>(x => x.Bar); <-- error here

        }

        static void RegisterMethod<TSelf, TProp>(Expression<Func<TSelf, TProp>> expression)
        {
            var member_expression = expression.Body as MemberExpression;
            if (member_expression == null)
                return;

            var member = member_expression.Member;
            if (member.MemberType != MemberTypes.Property)
                return;

            var property = member as PropertyInfo;
            Console.WriteLine(property.Name);
            Console.WriteLine(property.DeclaringType);

        }

    }

    public class Foo
    {
        private string _bar;
        public static string Bar  <-- would very much want to keep this static
        {
            get { return _bar; }
            set { _bar = value; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:31:56.923

由于您知道类型，因此可以替换`x.Bar`为`Foo.Bar`，如下所示：

```
RegisterMethod<Foo, string>(x => Foo.Bar); 
```

这应该处理错误消息。您首先看到错误的原因是，当您通过实例语法访问静态成员时，您正在向编译器发送一条混合消息。一方面，您告诉它您认为这`Bar`是一个成员属性；另一方面，您已将其声明为`static`属性。像这样的不一致通常发生在不成功的重构期间，因此编译器会触发一个错误，让您仔细检查您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:32:49.340

您可以将调用重写为`RegisterMethod`：

```
RegisterMethod(x => Foo.Bar); 
```

您不需要指定类型参数，它们是使用成员推断推断出来的。

但是，您需要扩展该`RegisterMethod`方法以不总是假设`MemberExpression`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:32:38.013

要回答您的粗体问题：

> **问：是否有可能让 Bar 属性保持静态？**

为了保持`Bar`静态，你**必须**使`_bar`静态。否则它甚至没有意义。

`x.Bar``Bar`当是静态的时候也没有意义。你可以`Bar`访问`Foo.Bar`

静态属性不与您的类的任何特定实例相关联。只有一个静态 p 的实例

* * *

如果你需要`_bar`是非静态的并且`Bar`是静态的，那么你的设计就存在根本性的问题。

# javascript - 我应该声明更多函数还是将开关参数传递给 JavaScript 中的一个函数？

> ID：14203536
> 
> 赞同：1
> 
> 时间：2013-01-07T20:29:43.337
> 
> 标签：javascript

我的问题涉及使用 JavaScript 声明和使用函数时的性能增益或损失。假设我有一个函数`foo()`，定义如下：

```
function foo(arg1) {
    //a simple CSS change, such as changing background color
} 
```

`arg1`用于标识 HTML 元素的字符串在哪里。`foo()`在鼠标悬停事件上触发。CSS 更改使用 jQuery 进行，但我认为这对我的问题并不重要。我想在 mouseout 事件上将 CSS 属性恢复为默认值。声明另一个函数是否会有性能优势`foo2()`，例如：

```
function foo2(arg1) {
    //undo the CSS change
} 
```

或者最好重新定义`foo()`如下，使用第二个参数作为开关：

```
function foo(arg1,arg2) {
    if(arg2 == 'change') {
        //make the CSS change for arg1
    }else if(arg2 == 'revert') {
        //revert the change for arg1
    }
} 
```

我不关心页面的加载时间。我的目标是尽量减少我的代码量，但不妨碍 CSS 更改的速度。

**编辑**：`arg1`不会严格指一个元素。它可用于标识一组元素，例如`<td>`列中的 's 共享的类名。这就是为什么`:hover`CSS 选择器不会做我需要做的事情的原因。

**编辑**：再次，为了清楚起见，假设我有一组包含 class 的元素`arg1`。我希望所有元素都能体验 CSS 更改，即使只有一个具有该类名称的元素触发了事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:32:57.600

您可能需要考虑使用 CSS `:hover`psuedoselector 而不是在 javascript 中实现它。要使用更改背景颜色的示例：

```
#yourElementID {
    background-color: blue;
}

#yourElementID:hover { 
    background-color: green;
} 
```

这将在鼠标悬停在元素上时将背景颜色更改为绿色，并在鼠标离开时将背景颜色更改为蓝色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:33:47.487

至于代码维护目的的最佳选择，您可能希望将这两个函数组合成一个函数。这使您的代码对未来的人们更具可读性。

`true`作为一个额外的好处，组合这些函数留下了非常雄辩的代码的可能性，例如使用简单的条件或否定 a值`false`等切换 CSS 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:37:48.747

*清洁代码*中的 Robert C. Martin写道

> 功能应该做一件事。他们应该做得很好。他们应该只做。

他接着说

> 标志参数很丑陋。将布尔值传递给函数是一种非常糟糕的做法。它立即使方法的签名复杂化，大声宣称该函数不止一件事。如果标志是真的，它会做一件事，如果标志是假的，它会做另一件事！

虽然您的情况不是布尔参数，但我将 Martin 的建议解释为适用于用于分支的任何参数以“做不止一件事”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:11:15.887

就像许多其他人所说的那样，如果您只是根据鼠标是否悬停在 HTML 元素上来更改 CSS，那么您可能应该在 CSS 中使用`:hover:`.

如果您出于某种原因必须使用 jQuery，这可能是最好的方法。

```
// Add event listener for mouseover to element(s) 
$(".myHtmlElements").on("mouseover", function(){

    // 'this' always refers to the element that triggered the event in jQuery
    $(this).css("background-color", "#FF0000"); // Red
});

// Add event listener for mouseout to element(s)
$(".myHtmlElements").on("mouseout", function(){
    // 'this' always refers to the element that triggered the event in jQuery
    $(this).css("background-color", "#0000FF"); // Blue
}); 
```

# mysql - MySQL：如何实现行级事务锁定而不是表锁定

> ID：14203537
> 
> 赞同：3
> 
> 时间：2013-01-07T20:29:54.463
> 
> 标签：mysql, innodb

这是用例：

我有一张桌子，上面有一堆可用或不可用的唯一代码。作为事务的一部分，我想从表中选择一个可用的代码，然后稍后在事务中更新该行。由于这可能同时发生在许多会话中，我希望理想地选择一个随机记录并在表上使用行级锁定，这样其他事务就不会被从中选择行的查询阻塞桌子。

我使用 InnoDB 作为存储引擎，我的查询看起来像这样：

```
select * from tbl_codes where available = 1 order by rand() limit 1 for update 
```

但是，它最终锁定了整个表，而不是只锁定表中的一行。谁能给我一些关于如何做到这一点的指示，以便这个查询不会锁定整个表而只是锁定行？

**更新**

附录：我能够通过在我的选择中指定一个显式键而不是执行 rand() 来实现行级锁定。当我的查询如下所示：

查询一：

```
 select * from tbl_codes where available = 1 and id=5 limit 1 for update 
```

查询 2：

```
 select * from tbl_codes where available = 1 and id=10 limit 1 for update 
```

但是，这并不能真正帮助解决问题。

**附录 2：我选择的最终解决方案**

鉴于 rand() 在 MySQL 中存在一些问题，我选择的策略是：

1.  我选择 50 个代码 id，其中可用 = 1，然后我在应用程序层中对数组进行洗牌，以向顺序添加一定程度的随机性。

    从可用的 tbl_codes 中选择 id = 1 限制 50

2.  我开始循环从我的洗牌数组中弹出代码，直到我能够选择一个带锁的代码

    select * from tbl_codes where available = 1 and id = :id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:27:39.333

It may be useful to look at how this query is actually executed by MySQL:

```
select * from tbl_codes where available = 1 order by rand() limit 1 for update 
```

This will read and sort all rows that match the `WHERE` condition, generate a random number using `rand()` into a virtual column for each row, sort all rows (in a temporary table) based on that virtual column, and then return rows to the client from the sorted set until the `LIMIT` is reached (in this case just one). The `FOR UPDATE` affects locking done by the entire statement while it is executing, and as such the clause is applied as rows are read *within InnoDB*, **not** as they are returned to the client.

Putting aside the obvious performance implications of the above (it's terrible), you're never going to get reasonable locking behavior from it.

Short answer:

1.  Select the row you want, using `RAND()` or any other strategy you like, in order to find the `PRIMARY KEY` value of that row. E.g.: `SELECT id FROM tbl_codes WHERE available = 1 ORDER BY rand() LIMIT 1`
2.  Lock the row you want using its `PRIMARY KEY` only. E.g.: `SELECT * FROM tbl_codes WHERE id = N`

Hopefully that helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:05:34.160

即使不完全映射到您的问题，这里也讨论了这个问题：http: [//akinas.com/pages/en/blog/mysql_random_row/](http://akinas.com/pages/en/blog/mysql_random_row/)

> 这种方法的问题是它非常慢。它如此缓慢的原因是 MySQL 创建了一个包含所有结果行的临时表，并为每个结果行分配了一个随机排序索引。然后对结果进行排序并返回。

这篇文章不涉及锁。但是，也许 MySQL 会锁定所有具有的行，`available = 1`直到事务结束才释放它们！

那篇文章提出了一些解决方案，它们似乎都不适合你，除了这个，不幸的是，非常hacky，我没有探讨它的正确性。

> SELECT * FROM `table`WHERE id >= (SELECT FLOOR( MAX(id) * RAND()) FROM `table`) ORDER BY id LIMIT 1;

这是我能为你做的最好的事情，因为我不指挥 MySQL 内部。而且，这篇文章很老了。

# php - PDO 语句属性存储为对象属性并由对象方法访问

> ID：14203539
> 
> 赞同：2
> 
> 时间：2013-01-07T20:29:57.590
> 
> 标签：php, pdo

我知道标题并没有提供太多关于我所要求的线索，所以这里是简化的情况：

```
class MyPDO extends PDO
{
    private $stmt;

    function __construct($dsn...)
    {
        parent:__construct($dsn...);
    }

    function myQuery($sql)
    {
        $this->stmt = $this->query($query);
    }

    function myFetchAll()
    {
        return $this->stmt->fetchAll($mode);
    }

    function myFetchRow()
    {
        return $this->stmt->fetch();
    } 
```

}

在整个应用程序中，我有一个 MyPDO 的基本实例并将其传递给不同的对象、映射器。

```
$adapter = new MyPDO($dsn...);
$adapter->myQuery('SELECT * FROM table');
$rows = $adapter->myFetchAll();

$another_object = new ObjectThatNeedsPDO($adapter);
$another_object->adapter->myQuery('SELECT * from another_table');
$rows = $another_object->adapter->myFetchAll(); 
```

这种方法安全吗，尤其是从 MyPDO::stmt 的角度来看？应用程序流程是否会搞砸，所以我最终可以从另一个 $stmt 获取数据而不是预期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:37:42.617

就个人而言，我不会采取你的方法。原因是我不希望一个类创建的语句对象暴露给另一个不相关的类。此外，每个实现类可能有不同类型的参数绑定，它需要执行，它需要访问数据的方式（即获取所有行，获取每一行，获取作为对象与数组等），方式以特定于类的方式处理错误，等等。

对我来说，通过在基本 PDO 类的某个子类中包含此逻辑，您将一无所获。我的意思是真的很难做到：

```
$stmt = $this->pdo->query(...)
$data = $stmt->fetchAll(); 
```

比：

```
$this->myPDO->query(...);
$data = $this->myPDO->myFetchAll(); 
```

除了将这个附加类不必要地耦合到所有将使用它的类之外，您还能获得什么？确实，语句交互总是非常特定于类，只有基本 PDO 实例提供的唯一通用功能（DB 连接）。

因此，当然可以随意在类之间传递一个公共 PDO 实例，这绝对是一个很好的做法（即依赖注入）。

仔细考虑一下，当您对提议的 myPDO 类进行更改时，您是否希望潜在地更改每个实现类，或者您是否想在每次某些实现类需要一些自定义方式与语句对象交互时更改您的 myPDO 类。

根据下面的讨论，您可能需要考虑扩展 PDOStatement 以提供最大的灵活性。

这可能看起来像这样：

```
class myPDOFactory {
    public static function getInstance($dsn, $pdo_statement_class = 'myPDOStatement', $pdo_constructor_args = NULL);
        $pdo = new PDO($dsn);
        if (empty($pdo_statement_class)) {
            $pdo_statement_class = 'PDOStatement';
        }
        if (empty($pdo_constructor_args) || !is_array($pdo_constructor_args)) {
            $pdo_constructor_args = array();
        }
        $config_array = array($pdo_statement_class, $pdo_constructor_args);
        $pdo->setAttribute(PDO::ATTR_STATEMENT_CLASS, $config_array);
        return $pdo;
    }
}

class myPDOStatement extends PDO Statement {
    public function __construct(<any custom parameters you may need to have passed - items in $pdo_constructor_args from myPDOFactory class>) {
        parent::__construct();
        // any special stuff you want to do with any passed parameters here
    }

    public function fetchAll() {
        // override any functionality you desire here
    }

    public function fetchAllObjects() {
        return $this->fetchAll(PDO::FETCH_OBJ);
    }
}

class someClassThatNeedsPDO {
    protected $pdo = NULL;
    public function __construct($pdo) {
        if($pdo instanceof PDO) {
            $this->pdo = $pdo;
        } else {
            throw new Exception('Ooops!');
        }
    }

    public function doSomethingWithPDO() {
        $stmt = $this->PDO->prepare('SELECT * FROM sometable');
        $stmt = execute();
        return $stmt->fetchAllObjects();
    }
} 
```

使用示例：

```
$pdo = myPDOFactory::getInstance($dsn, 'myPDOStatement', $constructor_args);
$consuming_class = new someClassThatNeedsPDO($pdo);
$object_array = $consuming_class->doSomethingWithPDO(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:37:15.437

您的方法看起来像是不必要的障碍，但这应该可以正常工作。我会在您的`fetch`方法中添加一个检查，以确保在调用本机 fetch/fetchall 之前存在有效的 PDOstatement。

另外，我建议不要为每个 MyPDO 对象创建新连接。传入 PDO 连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:45:51.933

在处理 PDO（之前使用 mysqli 包装器）时，我总是使用单例模式。这意味着您只有一个实例，而不必将其传递给其他类。你这样做的方式是好的和安全的，但使用单例更好。

制作单例真的很容易：

```
class myClass{
    private static $instance;

    public static function singleton()
    {
        if (!self::$instance) {
            return self::$instance = new myClass();
        } else {
            return self::$instance;
        }       
    }

    public static function myQuery($query)
    {
        #Do stuff
    }
} 
```

创建实例时，只需调用：

```
myClass::singleton() 
```

然后，如果您想使用这些方法，只需使用以下命令：

```
myClass::myQuery($query) 
```

如果您使用命名空间，则需要使用完全限定名称，例如 my\namespace\myClass

希望这是有道理的！

# ember.js - TransitionTo 和新的 Ember 路由器

> ID：14203547
> 
> 赞同：6
> 
> 时间：2013-01-07T20:30:50.493
> 
> 标签：ember.js, ember-router

新的 ember 路由器一直让我陷入困境。有谁知道当您 (1) 不在路由器中使用重定向 (2) 不使用 linkTo 帮助器时如何手动触发 url 更改？

这似乎是：

```
App.container.lookup('router:main').router 
```

从今天的版本开始，不再有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T23:33:03.033

这在新的 ember 路由器中似乎很难做到，因为 ember 正在努力阻止您以这种风格编写代码。与其通过您的 ember 应用程序代码访问路由器的实例（或其他任何东西），不如使用`App`框架在运行时注入的属性。正如上面提到的@sly7_7，您的视图将可以访问控制器，并且控制器可以触发如下转换：

```
view.get('controller').transitionTo('state') 
```

根据您的第三方库的工作方式，您可以通过触发 dom 中的事件（由视图处理）或在视图从内部呈现时注册回调来执行此操作`didInsertElement`

要记住的主要事情是，这`App.anything-in-lowercase`通常是不好的做法。尽可能尝试让框架负责实例化和连接您的应用程序类。

有关更多详细信息，请参阅此提交的注释：[https ://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8](https://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T16:38:34.957

你可以试试这个：

```
App.__container__.lookup('router:main').transitionTo('name_of_your_route'); 
```

# javascript - 在当前窗口中获取高亮文本并在弹出窗口中发送

> ID：14203551
> 
> 赞同：2
> 
> 时间：2013-01-07T20:31:05.313
> 
> 标签：javascript, google-chrome-extension, popup

我想制作一个使用弹出窗口的 chrome 扩展：

1.  选择文本
2.  单击 chrome 扩展程序图标
3.  在弹出窗口中获取它（textarea，...）

这个问题已经在这里问过了，但谷歌做了更新，我发现的代码不再工作了......

**选择.js**

```
 chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if (request.method == "getSelection")
      sendResponse({data: window.getSelection().toString()});
    else
      sendResponse({}); // snub them.
}); 
```

**popup.html**

```
 <!DOCTYPE html> 
<html>
<head>
<style>
  body { width: 300px; }
  textarea { width: 250px; height: 100px;}
</style>
<script>

function pasteSelection() {
  chrome.tabs.getSelected(null, function(tab) {
    chrome.tabs.sendRequest(tab.id, {method: "getSelection"}, function (response) {
      var text = document.getElementById('text'); 
      text.innerHTML = response.data;
    });
  });
}

function getSelectedText(){
   if (window.getSelection){
      var str = window.getSelection();
   }else if (document.getSelection){
      var str = document.getSelection();
   }else {
      var str = document.selection.createRange().text;
   }
   return str;
}

function affichage(){
var sel = getSelectedText();
alert(sel);
}

function addtext() {
    document.form.champ.value = getSelectedText();
}

</script>
</head>
<body>
<form>
<textarea id="text"></textarea>
<button onclick="pasteSelection(); " type="submit">get text</button>
</form>
</body>
</html> 
```

**清单.json**

```
 {
 "name": "Selected Text",
 "version": "0.1",
 "description": "Selected Text",
 "options_page": "page_options.html",
 "browser_action": {
   "default_title": "Selected Text",
   "default_icon": "icon.png",
   "default_popup": "popup.html" 
 },
 "permissions": [
   "tabs",
   "chrome://favicon/",
   "http://*/*", 
   "https://*/*"
 ],
 "content_scripts": [
  {
    "matches": ["http://*/*"],
    "js": ["selection.js"],
    "run_at": "document_start",
    "all_frames": true
  }
 ],
 "manifest_version": 2
} 
```

我提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:33:36.647

您的脚本中有多个问题

*   chrome.extension.onRequest 已被弃用，取而代之的是 chrome.extension.onMessage
*   chrome.tabs.sendRequest 已被弃用，取而代之的是 chrome.tabs.sendMessage
*   CSP 不允许`<script>`在 html 代码中使用内联脚本和标记。
*   Content Script 的 window 对象不同于普通的页面窗口对象。

对代码应用多项更改后，我得到了它的工作

### 清单.json

消除了清单中不适用的部分

```
{
 "name": "Selected Text",
 "version": "0.1",
 "description": "Selected Text",
 "browser_action": {
   "default_title": "Selected Text",
   "default_popup": "popup.html" 
 },
 "permissions": [
   "tabs",
   "http://*/*", 
   "https://*/*"
 ],
 "content_scripts": [
  {
    "matches": ["<all_urls>"],
    "js": ["selection.js"],
    "run_at": "document_start",
    "all_frames": true
  }
 ],
 "manifest_version": 2
} 
```

### popup.html

确保`popup.html`遵守 CSP

```
<!DOCTYPE html>
<html>

    <head>
        <style>
            body {
                width: 300px;
            }
            textarea {
                width: 250px;
                height: 100px;
            }
        </style>
        <script src="popup.js"></script>
    </head>

    <body>
        <textarea id="text"></textarea>
        <button id="submit">get text</button>
    </body>

</html> 
```

### popup.js

用于选择当前选项卡并发送消息和更新 DOM 的脚本。

```
function pasteSelection() {
    //Select current tab to send message
    chrome.tabs.query({
        "active": true,
        "currentWindow": true,
        "status": "complete",
        "windowType": "normal"
    }, function (tabs) {
        //It returns array so looping over tabs result
        for (tab in tabs) {

            //Send Message to a tab
            chrome.tabs.sendMessage(tabs[tab].id, {
                method: "getSelection"
            });
        }
    });
}
//Adding a handler when message is recieved from content scripts
chrome.extension.onMessage.addListener(function (response, sender) {

    //Set text to text area
    var text = document.getElementById('text');
    text.value = response.data;
});

// Bind On click event to pasteSelection() function
document.addEventListener("DOMContentLoaded", function () {

    document.getElementById("submit").onclick = pasteSelection;
}); 
```

### 选择.js

将选定的文本传递给`popup.html`

```
 //Add a handler to handle message sent from popup.html
 chrome.extension.onMessage.addListener(function (request, sender) {
     //Hanlde request based on method
     if (request.method == "getSelection")
     //Send selected text back to popup.html
     chrome.extension.sendMessage({
         data: document.getSelection().toString()
     });
     else chrome.extension.sendMessage({}); // snub them.
 }); 
```

# 参考

*   [tabs.query()](https://developer.chrome.com/extensions/tabs.html#method-query)
*   [tabs.sendMessage()](https://developer.chrome.com/extensions/tabs.html#method-sendMessage)
*   [扩展.onMessage()](https://developer.chrome.com/extensions/extension.html#event-onMessage)
*   [extension.sendMessage()](https://developer.chrome.com/extensions/extension.html#method-sendMessage)
*   [CSP](https://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)

# c++ - 在另一个全局函子中引用全局函子

> ID：14203555
> 
> 赞同：1
> 
> 时间：2013-01-07T20:31:31.870
> 
> 标签：c++, c++11

下面的代码产生一个`Segmentation Fault`就`y = anotherFunctor()`行了。据我了解，发生这种情况是因为创建`globalFunctor`时变量不存在`anotherFunctor`。`std::function<int(int)>`但是，如果我用替换它为什么会起作用`GlobalFunctor`？我将如何解决它？

```
#include <functional>

struct GlobalFunctor
{
    int operator()() const { return 42; }
};
extern GlobalFunctor globalFunctor;

struct AnotherFunctor
{
    AnotherFunctor() : g_(globalFunctor) {}

    int operator()() const { return g_(); }

    const std::function<int()>& g_;
} anotherFunctor;

GlobalFunctor globalFunctor;

int main()
{
    AnotherFunctor af;
    int x = af();
    int y = anotherFunctor();
    int z = x + y;
    return 0;
} 
```

**编辑：**我尝试用`clang`而不是编译`gcc`它，它警告我`binding reference member 'g_' to a temporary value`——但是编译它时它崩溃了。演员会`std::function`创建一个临时参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:52:55.413

At `g_(globalFunctor)`,`globalFunctor`必须转换为 an`std::function`因为它的类型是`GlobalFunctor`。所以产生了一个临时的，这被绑定到常量引用。您可以将代码视为做`g_(std::function<int()>(globalFunctor))`. 但是，这个临时变量只存在到构造函数的末尾，因为 C++ 中有一条特殊规则，即成员初始化器列表中的临时变量只存在到构造函数的末尾。这给你留下了一个悬而未决的参考。

替换为时代码有效`std::function<int(int)>`，`GlobalFunctor`因为不涉及转换。因此，不会产生临时对象，并且引用直接引用全局对象。

您要么不需要使用引用并在`std::function`内部存储 a ，要么制作一个全局`std::function`并对其进行引用。

# php - 未定义的 POST 和我的 bcrypt 系统好吗？

> ID：14203566
> 
> 赞同：0
> 
> 时间：2013-01-07T20:32:05.613
> 
> 标签：php, post, sql-injection, salt, crypt

所以我一直在寻找互联网来加密我的密码，我从 youtube 上得到了这个代码，我不确定这是否是我需要的，因为这是我第一次做这样的事情。而且我收到一个错误，说用户、密码和邮件是未定义的，在我使用的函数和上面的 if 语句中你的工作正常。这段代码正在进行中，我还没有在 if 语句中添加 salting 和 crypt 函数。继承人代码：

```
<?php require_once("session.php");?>
<?php require_once("connect.php");?>
<?php
if(isset($_POST["createUser"]) && isset($_POST["user"], $_POST["pass"], $_POST["mail"])){
    createUser ($_POST["user"], $_POST["pass"], $_POST["mail"]);
} 
else if(isset($_POST["userGames"])){
    userGamesUpdate ($_POST("selectedGameId"));
}
else if(isset($_POST["userLogin"])){
    login ($_POST["user"], $_POST["pass"]);
}
else if (!isset ($_POST)){
    echo "error";
}

?>
<?php 

$lenght = 21;
function random_string($lenght){

    $charset = array_merge˙(range("a", "z"), range("A", "Z"), range("0", "9"));
    shuffle($charset);
    global $randozoz;
    $randozoz = array_slice($charset, 0, $lenght);
    return implode("", $randozoz);

}
$username = $_POST["user"];
$password = $_POST["pass"];
$email = $_POST["mail"];

function prevent($wha) {

    $wha = stripslashes($wha);
    $wha = mysql_real_escape_string($wha);
    return $wha;
}

prevent($username);
prevent($password);
prevent($email);

$str = substr($username, 0, 6);
$salt = "$2a$12$".$randozoz."".$str."$";

//register
function createUser ($username, $password, $email ){
    //Get from form

    $hashedPassword = crypt($password); 
    //Submit to database
    //make query
    $query = ("INSERT INTO users ( username , email , hashPass ) VALUES ( '$username' , '$email' , '$hashedPassword')");
    //use query
    if (mysql_query($query)) {
        //userMade.php
        $query = ("SELECT id FROM users WHERE username = '{$username}'");
        $userId = mysql_fetch_array($query);
        $_SESSION["userId"] = $userId;
        $_SESSION["username"] = $username; 
        header("Location: ../userMade.php");
        exit;
    } else {
        echo "<p>".mysql_error()."</p>";
    }
}

function login ($username, $password){

    $hashedPassword = sha1($password); 
    //Submit to database
    //make query
    $query = ("SELECT id, username FROM users WHERE username = '{$username}' AND hashPass = '{$hashedPassword}'");
    $result_set = mysql_query($query);

    if (mysql_num_rows($result_set) == 1) {
        //frontpage, session
        //$userFound = mysql_fetch_array($result_set);
        $foundUser = mysql_fetch_array($result_set); 
        $_SESSION["userId"] = $foundUser["id"];
        $_SESSION["username"] = $foundUser["username"];
        header("Location: ../frontpage.php");
        exit;
    } else {
        $message = "Your username and/or password is wrong! Please try again.";
    }
}
?> 
```

登录系统未与 crypt 和 salting 系统集成。但是我做盐腌对吗？

以下是来自该系统的一些随机密码：

```
$1$gc5.pn/.$txhBJZBDG3xgraJYIYY0I1
$1$8e0.vX3.$RfFLRT/iE.MXfws2fnz30. 
```

并且错误部分显示了我试图防止 SQL 注入的地方，该系统也可以工作吗？老实说，我真的不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:13:31.213

你的代码充满了不好的东西，很难找到开始的地方。它甚至无法正常工作。

但是要回答你关于 bcrypt 的问题：不，你做错了。为了让每个人都更容易使用密码散列，从 PHP 5.5 开始会有一个 PHP 散列 API。

因为 PHP 5.5 仍在开发中，所以有一个兼容性库可以将这些函数向后移植到最新的 PHP 版本 5.4 和向下直到 5.3.7。早期的 PHP 在其 bcrypt 实现中存在安全问题。

下载这个库：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

# r - R中的ggplot函数中的语法错误

> ID：14203567
> 
> 赞同：-5
> 
> 时间：2013-01-07T20:32:18.093
> 
> 标签：r, function, plot, ggplot2, syntax-error

我想使用以下代码创建自动绘图功能：

```
plotTimeSeries <- list(temp1,temp2)

lapply(1:length(plotTimeSeries) , function(i) 
i$dt=strptime(i$dt, "%Y-%m-%d %H:%M:%S")
ggplot(i, aes(dt, ambtemp)) + geom_line() +
  scale_x_datetime(breaks = date_breaks("2 hour"),labels=date_format("%H:%M")) + xlab("Time 00.00 ~ 24:00 (2007-09-29)") + ylab("Ambient Tempreture")+
  opts(title = ("Node i"))) 
```

但是我遇到了以下错误：

```
Error: unexpected ')' in:
"           scale_x_datetime(breaks = date_breaks("2 hour"),labels=date_format("%H:%M")) + xlab("Time 00.00 ~ 24:00 (2007-09-29)") + ylab("Ambient Tempreture")+
           opts(title = ("Node i")))" 
```

样本数据属性：

```
'data.frame':   731 obs. of  2 variables:
 $ ambtemp: num  0.23 0.26 0.35 0.31 0.32 0.3 0.36 0.33 0.27 0.27 ...
 $ dt     : POSIXct, format: "2007-09-29 23:39:05" "2007-09-29 23:41:05" "2007-09-29 23:43:05" ... 
```

样本数据：

温度1：

```
 surtemp    date_time
1    0.23 2007-09-29 23:39:05
2    0.26 2007-09-29 23:41:05
3    0.35 2007-09-29 23:43:05
4    0.31 2007-09-29 23:45:05
5    0.32 2007-09-29 23:47:05
6    0.30 2007-09-29 23:49:05 
```

温度2：

```
 surtemp    date_time
1   -1.42 2007-09-28 23:39:09
2   -1.24 2007-09-28 23:41:09
3   -1.28 2007-09-28 23:43:09
4   -1.28 2007-09-28 23:45:09
5   -1.24 2007-09-28 23:47:09
6   -1.42 2007-09-28 23:49:09 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:57:07.100

`for`我认为恢复到循环不会那么混乱。尝试：

```
plotTimeSeries <- list(temp1,temp2,temp3,temp4)
for (i in plotTimeSeries) {
   i$dt <- strptime(i$dt, "%Y-%m-%d %H:%M:%S")
   ggplot(i, aes(dt, ambtemp)) + geom_line() +
     scale_x_datetime(breaks = date_breaks("2 hour"),
                      labels=date_format("%H:%M")) + 
       labs(x="Time 00.00 ~ 24:00 (2007-09-29)",y="Ambient Temperature",
           title = (paste("Node",i)))
} 
```

# r - Rmpfr 列表变量：如何强制向量？

> ID：14203568
> 
> 赞同：0
> 
> 时间：2013-01-07T20:32:29.647
> 
> 标签：r

有人可以解释这个示例代码中发生了什么吗？我有一个执行计算循环的函数，并且一如既往地想要初始化我的输出向量，而不是每次通过循环递增它。

```
Rgames> library(Rmpfr)
Rgames> foo<-rep(NA,5)
Rgames> foo
[1] NA NA NA NA NA
Rgames> rfoo<-mpfr(rep(NA,5),20)
Rgames> rfoo
5 'mpfr' numbers of precision  20   bits 
[1] NaN NaN NaN NaN NaN
Rgames> for(jj in 1:5) {
+ foo[jj]<- mpfr(jj,10)
+ rfoo[jj]<-mpfr(jj,10)
+ }
Rgames> rfoo
5 'mpfr' numbers of precision  10   bits 
[1] 1 2 3 4 5
Rgames> foo
[[1]]
'mpfr1' 1

[[2]]
'mpfr1' 2

[[3]]
'mpfr1' 3

[[4]]
'mpfr1' 4

[[5]]
'mpfr1' 5 
```

我不明白为什么，显然，现有的非 mpfr 向量`foo`不仅被强制到一个列表中，而且每次通过循环时，新值都`foo[jj]`作为列表插入，给我一个令人不快的“列表列表” . 在这两种情况下，`mpfr`向量`rfoo`都符合我的预期。（我检查了，如果我不初始化，并在循环中放入一些东西，就像 `foo<-c(foo,mpfr(jj,10))`我得到的结果相当于`rfoo`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:10:05.937

这里发生的事情与使用列表而不是`mpfr`对象时会发生的事情相同。例如，如下。我相信这是有道理的，因为 S4 对象的存储方式与列表类似，但我不是 S4 专家。

```
> foo <- rep(NA,2)
> foo
[1] NA NA
> foo[1] <- list(1)
> foo
[[1]]
[1] 1

[[2]]
[1] NA 
```

我相信发生的事情是原始原子向量被强制到一个列表中，以便能够包含您要求放在那里的对象。我在这里找不到任何相关文档；我认为这在钱伯斯的书中有所讨论，但手头没有。

也可以使用方法轻松地重新创建这种行为`S3`；首先是`S3`创建新类的方法：

```
mynum <- function(x) {structure(as.list(x), class="mynum")}
print.mynum <- function(x) { cat("My numbers are:\n")
                             print(do.call(paste, x), quote=FALSE) } 
```

如果您从原子向量开始，会发生以下情况：

```
> (foo <- rep(NA, 2))
[1] NA NA
> foo[1] <- mynum(1)
> foo
[[1]]
[1] 1

[[2]]
[1] NA 
```

如果您从`mynum`向量开始，会发生以下情况：

```
> (rfoo <- mynum(rep(NA, 2)))
My numbers are:
[1] NA NA
> rfoo[1] <- mynum(1)
> rfoo
My numbers are:
[1] 1 NA 
```

# c# - LINQ 查询从一个表中检索，然后从另一个表中检索

> ID：14203577
> 
> 赞同：1
> 
> 时间：2013-01-07T20:32:56.380
> 
> 标签：c#, linq, linq-to-sql

我有 2 个包含相同字段的表，例如`id`, `name`, `invoiceNo`..etc

我想使用 c# ling 从两个表中获取所有数据

我有以下 1 个表的示例，如何添加第二个表？

```
 return query = from tb1 in dataContext.tbl1
                    select new customer
                    {
                       name= tbl1.name
                    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:36:24.457

`Concat`一旦你有两个相同类型的序列，你就可以使用。

```
return dataContext.tbl1.Select(tb1 => new customer()
{
    name = tb1.name,
})
.Concat(dataContext.tbl2
    .Select(tb2 => new customer()
    {
         name = tb2.name,
    })); 
```

您可以对调用使用查询语法`select`，但我发现在这种特殊情况下方法语法更可取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:38:57.277

您可以使用`Union`或`Concat`：

```
query1 = from tb1 in dataContext.tbl1
                select new customer
                {
                   name= tbl1.name
                };

query2 = from tb2 in dataContext.tbl2
                    select new customer
                    {
                       name= tbl1.name
                    };

var resQuery = query1.Union(query2); 
```

这将与`Concat`. `Union`和之间的主要区别在于`Concat`消除`Union`了结果中的重复性。

# c# - 覆盖实体框架连接逻辑

> ID：14203578
> 
> 赞同：3
> 
> 时间：2013-01-07T20:32:57.180
> 
> 标签：c#, entity-framework, entity-framework-5

我正在使用 EF 5，我需要以某种方式侵入连接创建管道。这是我的情况。在生产中，我们在 web.config 中指定了 2 个 SQL 服务器（我对此没有任何控制权）。如果一个连接失败，我需要尝试另一个。再一次，我知道 SQL 故障转移集群，但就像我说的，我无法控制它。

我尝试使用`DbContext`需要`DbConnection`. 然后我尝试自己打开连接，看看是否成功，然后将其传递给 EF。那里的问题是 EF 只想要一个关闭的连接。打开一个连接，然后关闭它，只是让 EF 再次打开它，这似乎真的很糟糕！

有没有更好的办法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:37:53.503

如果在 Web.config 文件中指定了两个连接，则应使用DbContext 类的[此重载](http://msdn.microsoft.com/en-us/library/gg679467%28v=vs.103%29.aspx)。您需要做的就是传递在`<connectionStrings>`您尝试连接的记录中找到的名称，它将进入 Web.config 文件，获取该连接字符串，然后打开连接。

一个示例（使用带有 SQLEXPRESS 的普通本地主机——很容易转换为您的进程）

```
 <connectionStrings>
    <add name="Connection1" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog = FirstDB;Integrated Security=True" providerName="System.Data.SqlClient;MultipleActiveResultSets=true;" />
    <add name="Connection2" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog = SecondDB;Integrated Security=True" providerName="System.Data.SqlClient;MultipleActiveResultSets=true;" />
 </connectionStrings> 
```

然后在您的 DbContext 类中存在以下构造函数：

```
public MyDbContext(string connectionString) : base(connectionString)
{

} 
```

`connectionString`“Connection1”或“Connection2”在哪里。

编辑：根据评论，我认为您需要在您的 DbContext 上创建一个图层，该图层将为您简单地进行切换。您可能需要考虑执行以下步骤：

1) 创建一个具有 DbContext 对象的类（我们称之为 ContextLayer）。这个类是否是静态的取决于你。您可能还想让它实现 IDisposable。

2) 在该项目的 Web.Config 文件中，确保为您可能连接的所有数据库都有一个连接字符串条目。

3) 在层类上有一个方法，该方法将为您提供 DbContext 对象，使用在您的配置文件中找到的第一个连接字符串。作为替代方案，您还可以将您的层放入存储库本身，该存储库本身将 DbContext 对象作为私有字段，并仅公开存储库方法以获取特定信息。

4) 在这个层类中，有一个返回 int 的 SaveChanges() 方法，就像 DbContext.SaveChanges() 一样。在 SaveChanges() 内部检查连接是否良好。否则，使用 DbContext 类的新实例（与当前类中的对象不同的对象）检查 Web.Config 文件中的每个其他连接字符串条目并测试它们。如果其中一个有效，请执行所有逻辑以将更改放在另一个 DbContext 类上。如果您决定将其设为静态类，则可能需要将类上的 DbContext 对象设置为此上下文，具体取决于您的需要。

5) 如果所有上下文都不起作用，则可能让方法返回 -1，并在屏幕上弹出无法保存的信息，因为找不到要保存的数据库。

通过执行此编码一次，您将保证每次尝试保存到数据库时，您只需要对图层类进行 1 次非常简单的调用即可，即使它不起作用，您也会得到一个不错的，干净的方式向客户端显示它无法连接。

# java - For 循环，将 2 添加到 int 打印的每一行

> ID：14203580
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:32:57.420
> 
> 标签：java, for-loop, increment

好的，所以我正在为我的 Comp Programming 课程编写一个程序，我需要制作一个程序来获取行数，并通过将 2 添加到每行来打印一个金字塔。视觉效果如下所示：![鉴于行的输入是：5](../Images/9153d671b8d5176703e6de794bf40be1.png)

所以输入是 5，如您所见，它有 5 行，并且每行向下添加 2 个 *。好吧，我不确定如何使*的数量以 2 为增量增加。到目前为止，这是我的代码：

```
public static void pyramid(){

    System.out.println("Columns:");
    rows = input.nextInt();

    for(int s = 0; s <= rows; s++){

        for(){

        }
    }

} 
```

我在第一个循环中开始了另一个 for 循环，因为我知道我需要它来完成这项工作。我的问题是，我将如何让它在它下降的每一行中添加 2 *。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:42:14.147

每行中 *s 的数量是`2*s + 1`，对吗？所以这很容易计算，只需在每个循环中循环到那个数字，每次都输出一个`*`。

你还需要在每组 *s 之前写下正确数量的空格 - 这也是`s`- 尝试一些数字，看看你是否能弄清楚这个函数。一旦你得到了正确的函数，只需在你的主循环中循环到那个数字，每次都添加空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:09:35.913

如果您使用迭代方法来查看问题（如我所推荐的那样）。您会发现您正在寻找的并不是在循环中的每个 int 中添加三个。

让我们先让金字塔的一半正确。这样做需要一个简单的循环。（我将在 Python 中运行它，使它有点像伪代码）：

```
def pyramid(rows):
    for row_num in range(1,rows+1):
        print '*' * row_num 
```

这为我们提供了 5 的以下输出：

```
*
**
***
****
***** 
```

我们已经完成了一半，我们现在真正需要的是从另一侧金字塔的中间开始的镜像。

对于初学者，我们可以计算出每行的星数，如果我们看看它总是小于两倍行数的事实。（1、3、5、7等）

这给了我们以下代码：

```
def pyramid(rows):
    for row_num in range(1,rows+1):
        num_stars = (row_num * 2) - 1
        print '*' * num_stars 
```

产生以下输出：

```
*
***
*****
*******
********* 
```

现在我们唯一缺少的是对齐。为了计算每行正确缩进所需的空格数，我们可以再次查看模式。在这种情况下，为了使线条居中，我们需要将每条线偏移一个以每行一个减少的值的值。

第一行开始之前需要四个空格，第二行需要三个空格，等等。那么，该值与什么相关？行数本身。

我们可以从这个模式中看出，偏移输出所需的空格数实际上等于行数减去 row_num。这给了我们以下代码：

```
def pyramid(rows):
    for row_num in range(1,rows+1):
        num_stars = (row_num * 2) - 1
        offset = rows - row_num
        print (' ' * offset) + ('*' * num_stars) 
```

现在我们得到最终结果：

```
 *
   ***
  *****
 *******
********* 
```

而且……我们完成了！

为简洁起见，我在此代码示例中使用了 Python。由于您使用的是较低级别的语言，因此您无法将字符相乘以生成字符串。

很多人会说“写一些嵌套循环”。我，我相信最好编写一个模仿高级语言所需功能的函数。

如果您可以创建一个函数来为您执行字符串乘法，那么您可以使用相同的代码两次！

如果 Python 没有内置的字符串乘法，您可以轻松地创建一个函数，例如：

```
def multiply_char(char,number_of_times):
    s = ''
    for i in range(number_of_times):
        s += char
    return s 
```

现在，您可以在此分配中使用该函数两次，并且在没有嵌套循环的情况下保持代码看起来更干净（它提供了稍后函数调用不会提供的可读性）。

我们在头脑中分解这些小程序的方式是编写好代码的一半。你的老师正试图让你分析问题并将其分解成更小的部分。最好从做某事的代码开始，然后对其进行迭代，直到它功能完整。

快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:45:49.430

这里有一些提示：

对于`n`行，您需要以`(n - 1)`空格开头。要么在一个简单的嵌套循环中自己输出这些空格，要么用于`Arrays.fill(chars, '0')`创建一个可以传递给的字符数组`new String()`。您可以使用`substring()`在每次迭代中删除一个空格。

你需要从一个开始`*`。对于后续行，您*可以*这样做，`s = s + "**"`尽管使用 a`StringBuffer`更有效。

FWIW，这是我现在能想到的最好的：

```
static void pyramid(int n) {

    // create first line
    StringBuffer out = new StringBuffer(2 * n + 1);
    for (int i = 0; i < n - 1; ++i) {
        out.append(' ');
    }
    out.append('*');

    // repeatedly remove a space and add two stars
    while (n-- > 0) {
        System.out.println(out);
        out.deleteCharAt(0);
        out.append("**");
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T20:45:50.463

要执行此任务，您需要两个嵌套循环。第一个计算当前行所需的星数。在打印空间内循环（制作“好看的树”）并打印星星

```
public static void pyramid(int numberOfRows){

    int curentAmountOfStars = 1; // first row has one star
    for(int i = 0; i < numberOfRows; i++){

        for(int j=0; j<numberOfRows-i-1;j++){ // this for prints spaces
            System.out.print(" ");
        }

        for(int j= curentAmountOfStars; j>0; j--){ //this one prints stars
            System.out.print("*");
        }
        System.out.println(); //go to new row
        curentAmountOfStars += 2; // increase amount of stars
    }

} 
```

结果你有一棵美丽的树！

```
 *
     ***
    *****
   *******
  *********
 ***********
************* 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T20:53:18.943

有几种方法可以做到这一点

1.  在循环中，将 2 加到一个累加变量上。
2.  通过根据行推导长度公式来计算该变量的整个值。

第一种方法很可能是您将使用的方法，但第二种方法更有可能在未来的工作中变得更加健壮。由于这个程序可能没有太多的未来（这是一个常见的 CS 101 类型的家庭作业问题），我猜你会选择 #1。

```
int numAsterisks = 1;
for (row = 0; ...) {
  doStuff();
  numAsterisks += 2;
} 
```

第二种方法是意识到你要为每一行添加两个

```
numAsterisks = 2*row + 1; 
```

最后一种技术的**主要**优点是 numAsterisks 的后续值不会出错，即使不适当的因素弄乱了 numAsterisks 的中间值之一。一个较小的优势是您不需要存储 numAsterisks 的中间值，因此您*可能*还会得到运行速度更快的代码（只有分析才能确定）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-07T20:41:22.483

我知道你是如何尝试这个的，但可能一个 while 循环会更容易，然后只需使用字符串操作来创建你想要的每一行。

```
 public static void pyramid(){
        line=1;
        i=1;
        while(line <= 5){
                      System.out.println("*"*i);
                      i +=2;
                      line +=1;
                     }
    } 
```

另外我不知道您的意思是“将星星增加 3 颗”是指每行的星星数会变为 (1,4,7,10) 还是加速 3 颗，例如 num+2, num+5, num +8 喜欢 (1,3,8,16)。

如果您想以第二种方式进行操作，则应该可以。

```
public static void pyramid(){
            line=1;
            i=1;
            a=3;
            while(line <= 5){
                          System.out.println("*"*i);
                          i += 2+a*(i-1);
                          line +=1;
                         }
        } 
```

# sql - SQL内部连接来自不同数据库的两个表并更新其中一个

> ID：14203581
> 
> 赞同：4
> 
> 时间：2013-01-07T20:33:00.983
> 
> 标签：sql, sql-server, sql-server-2008-r2, sql-server-2012

我有以下 SQL 查询：

```
UPDATE db1.dbo.oitems
SET f2 = oo.f2,
f3 = oo.f3,
f4 = oo.f4
FROM db1.dbo.oitems o
       INNER JOIN db2.dbo.oitems oo 
               ON o.orderid = oo.orderid 
```

每个表都在不同的数据库中，它们具有相同的列但不同的数据在 id 中有一些匹配但在数据中没有。我只想为表中的列 f2、f3、f4 设置值，如果它们具有相同的 orderid，我想更新为第二个表中的值。上面的命令一直说 0 行受影响，那么我的逻辑有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T21:08:42.563

你有两个选择来解决这个问题。第一个是由 Gordon Linoff 在对这个线程的另一个回答中描述的。第二个看起来像这样：

```
UPDATE o
SET f2 = oo.f2,
f3 = oo.f3,
f4 = oo.f4,
FROM db1.dbo.oitems o
INNER JOIN db2.dbo.oitems oo 
ON o.orderid = oo.orderid; 
```

我更喜欢第二种有几个原因。一个原因是您可以替换`UPDATE o SET`为`SELECT`以获取可执行的 SELECT 语句。另一个是意图没有像第一个选项那样被隐藏。您还可以使用第一个选项未提供的 LEFT OUTER 或其他连接类型。

有关所有这些的更深入的解释，请查看 [http://sqlity.net/en/1595/a-join-a-day-update-delete/](http://sqlity.net/en/1595/a-join-a-day-update-delete/) 以及 http://sqlity.net 的其余[部分/en/1146/a-join-a-day-introduction/](http://sqlity.net/en/1146/a-join-a-day-introduction/)系列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T20:37:37.950

您问题中的查询有语法错误，所以我很惊讶它运行（`set`子句中的最后一个逗号）。我会将查询写为：

```
UPDATE db1.dbo.oitems
    SET f2 = oo.f2,
        f3 = oo.f3,
        f4 = oo.f4
    FROM db2.dbo.oitems oo 
    WHERE oitems.orderid = oo.orderid 
```

# apache-flex - flex中模块的加载和卸载消耗指数内存

> ID：14203582
> 
> 赞同：0
> 
> 时间：2013-01-07T20:33:05.433
> 
> 标签：apache-flex, memory

每当我使用 loadModule() 函数加载模块时，内存使用量都会增加。它很好。\ 但是当我使用 unloadModule() 函数时，内存使用量也会增加。我也在取消引用变量或对象。并且还使用 removeAllChildren() 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:29:48.793

有很多网站提供这方面的信息 - 大多数情况下他们会告诉你

1.  flex 使用垃圾收集器模型。您的内存可能已被释放，但 flex 尚未回收空间。
2.  对任何事件监听器使用弱引用。
3.  确保模块也能很好地使用内存。您的分析器应该能够告诉您谁在进行较大的分配以及分配的频率。

# asp.net-mvc - 类型转换错误：System.Linq.IQueryable(string)' 到 System.Linq.ParallelQuery(int)'

> ID：14203583
> 
> 赞同：1
> 
> 时间：2013-01-07T20:33:04.730
> 
> 标签：asp.net-mvc, linq-to-sql

我的数据库 Element 和 Entity 中有两个表，给定一个 el_id(element id) 我想从 Element 表中提取 ent_id(entity id) 并从 Entity 表中提取 ent_type_id(Entity type)，我有一个 ent_id 列常见于两个表，但它在 Element 表中是 int ，在 Entity 表中是 String ，以下是代码，帮我解决它。

```
 var ent_ids = _context.Elements.Where(e => el_ids.Contains(e.el_id)).Select(el => el.ent_id);
  var ent_type_ids = _context.Entities.Where(e => ent_ids.Contains(e.ent_id)).Select(el => el.ent_type_id); 
```

错误：

```
Instance argument: cannot convert from 'System.Linq.IQueryable(string)' to 'System.Linq.ParallelQuery(int)' 
```

这是代码的第二行。

编辑：从下面的评论中添加模型。

实体模型：

```
public partial class Entity 
{ 
    public int ent_id { get; set; } 
    public Nullable<int> document_id { get; set; } 
} 
```

元素模型：

```
public partial class Element 
{ 
    public int el_id { get; set; } 
    public string ent_id { get; set; } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:12:53.470

[在这篇文章中查看 Brian Cauthon 的回答](https://stackoverflow.com/questions/1228318/linq-int-to-string)。你应该能够做这样的事情：

```
//according to the models you posted...

//this is a collection of strings right?
var ent_ids = _context.Elements.Where(e => el_ids.Contains(e.el_id)).Select(el => el.ent_id);

//e.ent_id should be an int right?.
var ent_type_ids = _context.Entities.Where(e => ent_ids.Contains(SqlFunctions.StringConvert((double)e.ent_id))).Select(el => el.ent_type_id); 
```

无论出于何种原因，没有采用 int 的 SqlFunctions.StringConvert() 重载，因此您必须强制转换为 double。

# c++ - std::async 中的超时

> ID：14203584
> 
> 赞同：5
> 
> 时间：2013-01-07T20:33:09.603
> 
> 标签：c++, c++11, std, stdthread, stdasync

有没有办法在 std::async 方法中实现超时，所以如果线程在指定的时间内没有完成，我希望这个调用超时并完成。我怎样才能实现这个功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T21:04:50.253

没有（标准）方法可以进入线程并杀死它，无论如何这通常是一个坏主意。更简洁的选择是将开始时间和最大持续时间传递给函数，然后（可能随着计算的进行多次）检查当前时间减去开始时间是否太长。

我会做这样的事情：

```
#include <chrono>

template <typename Clock = std::chrono::steady_clock>
class timeout
{
public:
    typedef Clock clock_type;
    typedef typename clock_type::time_point time_point;
    typedef typename clock_type::duration duration;

    explicit timeout(duration maxDuration) :
    mStartTime(clock_type::now()),
    mMaxDuration(maxDuration)
    {}

    time_point start_time() const
    {
        return mStartTime;
    }

    duration max_duration() const
    {
        return mMaxDuration;
    }

    bool is_expired() const
    {
        const auto endTime = clock_type::now();

        return (endTime - start_time()) > max_duration();
    }

    static timeout infinity()
    {
        return timeout(duration::max());
    }

private:
    time_point mStartTime;
    duration mMaxDuration;
}; 
```

这个简单的实用程序跟踪开始时间和最大持续时间（并提供一种指定无穷大的方法），并允许用户查询简单的事实，最重要的是是否发生了超时。

下面测试；您可以通过定义/取消定义来添加假延迟`FAKE_DELAY`：

```
#include <iostream>
#include <future>

#define FAKE_DELAY

void fake_delay()
{
    #ifdef FAKE_DELAY
    std::this_thread::sleep_for(std::chrono::milliseconds(1000));
    #endif
}

void short_running_function(timeout<> timelimit)
{
    fake_delay();

    if (timelimit.is_expired())
        std::cout << "short running thread ran out of time" << std::endl;
    else
        std::cout << "short running function finished" << std::endl;
}

void long_running_function(timeout<> timelimit)
{
    for (unsigned i = 0; i < 10; ++i) {
        if (timelimit.is_expired())
        {
            std::cout << "long running thread ran out of time" << std::endl;
            return;
        }

        std::cout << "long running thread doing work" << std::endl;
        fake_delay();
    }

    std::cout << "long running function finished" << std::endl;
}

int main()
{
    std::async(short_running_function,
               timeout<>(std::chrono::milliseconds(500))).wait();

    std::async(short_running_function,
               timeout<>(std::chrono::milliseconds(5000))).wait();

    std::async(long_running_function,
               timeout<>(std::chrono::milliseconds(500))).wait();

    std::async(long_running_function,
               timeout<>(std::chrono::milliseconds(5000))).wait();

    std::async(long_running_function,
               timeout<>::infinity()).wait();
} 
```

一种可能的输出为`FAKE_DELAY` **off**：

> 短期运行功能完成
> 短期运行功能完成
> 长期运行线程正在工作
> 长期运行线程正在工作
> 长期运行线程正在工作
> 长期运行线程正在工作
> 长期运行线程正在工作
> 长期运行线程正在工作
> 长期运行线程正在工作
> 长期运行线程正在工作
> 长期运行线程工作
> 长时间运行 线程工作
> 长时间运行功能完成
> 长时间运行线程工作
> 长时间运行线程工作
> 长时间运行线程工作
> 长时间运行线程工作
> 长时间运行线程工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行功能完成
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作长时间运行线程正在 长时间
> 工作
> 正在运行的线程正在
> 运行 长时间运行的线程正在运行 长时间运行
> 的线程正在
> 运行 长时间运行的线程正在运行
> 长时间运行的线程正在运行
> 长时间运行的线程正在运行
> 长时间运行的功能完成

一种可能的输出`FAKE_DELAY` **on**：

> 短运行线程超时
> 短运行函数完成
> 长时间运行线程正在工作
> 长时间运行线程超时
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程正在工作
> 长时间运行线程超时
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的线程正在工作
> 长时间运行的功能已完成

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T21:02:25.113

该标准没有提供任何非合作终止线程的方法。缺少自动超时功能只是另一个例子。

相反，您必须实现您传递给的代码以`std::async`协同处理此操作。协作杀死线程的一种模式是向函数传递一个对象，该对象提供了一种方法来检查异步函数是否应该继续，如果不继续，则抛出异常。

```
struct Time_out {
    std::chrono::steady_clock start = std::chrono::steady_clock::now();
    std::chrono::milliseconds timeout;
    Time_out(std::chrono::milliseconds t) : timeout(t) {}

    void check() {
        if (start + timeout < std::chrono::steady_clock::now())
            throw timeout_exception();
    }
};

std::future<void> f = std::async([](Time_out t) {
    while(more work) {
        // do work
        t.check();
    }
}, Time_out(std::chrono::seconds(2));

f.get(); 
```

# c++ - __declspec(align) 用于多个声明

> ID：14203586
> 
> 赞同：3
> 
> 时间：2013-01-07T20:33:29.427
> 
> 标签：c++, visual-studio-2010, syntax, memory-alignment, declspec

很抱歉这个非常简单的问题，找不到可谷歌搜索的答案。

这个声明语法是：

```
__declspec(align(16)) float rF[4];
__declspec(align(16)) float gF[4];
__declspec(align(16)) float bF[4]; 
```

相当于：

```
__declspec(align(16)) float rF[4], gF[4], bF[4]; 
```

还是只有第一个变量在后一种语法中对齐？

如果重要的话，这些是全局方法中的局部变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:53:14.933

是的。A`__declspec`是存储类的一部分，适用于声明中的所有声明符。

# loops - Common Lisp：执行一个表单直到 nil

> ID：14203588
> 
> 赞同：2
> 
> 时间：2013-01-07T20:33:29.380
> 
> 标签：loops, common-lisp

我想执行一个 CL 表单，直到它变为 nil。我怎样才能？（我是 RTFM，但找不到。也许我快精神崩溃了）。

无论如何，我们将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:37:52.347

```
(loop while your-form) 
```

或者

```
(do () ((not your-form))) 
```

# c++ - C4100 在模板中使用时“未引用的形式参数”

> ID：14203593
> 
> 赞同：3
> 
> 时间：2013-01-07T20:33:57.593
> 
> 标签：c++, templates, visual-c++, compiler-warnings, visual-c++-2012

这看起来很简单，应该不是问题，但我没有看到它，所以任何帮助将不胜感激。

我有一个接受参数的函数，然后在模板中使用该参数。编译器（Visual C++ 2012）正在生成 C4100“未引用的形式参数”警告……这很烦人。我不明白为什么它认为该参数未被引用。

```
#define FactoryRegister(f, T) \
{ \
    shared_ptr<FactoryCreator<T>> creator(new FactoryCreator<T>()); \
    f.instance().Register(#T, creator); \
    f.instance().Register(typeid(T).name(), creator); \
}

void FactoryRegister(hive::Factory& factory)
{
    FactoryRegister(factory, MyClass);
} 
```

编译此生成：“警告 C4100：'工厂'：未引用的形式参数”

我会认为“工厂”很明显被引用，因为它的“instance（）”函数在宏扩展后被调用了两次。我在这里假设代码扩展为：

```
void FactoryRegister(Factory& factory)
{
    shared_ptr<FactoryCreator<MyClass>> creator(new FactoryCreator<MyClass>());
    factory.instance().Register("MyClass", creator);
    factory.instance().Register(typeid(MyClass).name(), creator);
} 
```

代码运行良好，它只是抛出一个我不明白的警告。请注意，在我的实际代码中，宏和函数位于不同的项目和不同的文件中，但为了简单起见，它们一起包含在此处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:05:24.367

根据`instance`名称，它看起来`factory`可能是一个单例，并且`instance`是一个静态函数。在这种情况下，`factory`确实从不使用 的值，您可以直接在类上调用该函数，这实际上是编译器所做的：

```
Factory::instance().Register(...); 
```

然后您可以完全删除该参数，并且您将避免明显的编译器错误，该错误将参数的使用与参数值的使用混为一谈。

# .net - Visual Studio 2010 中的参考问题

> ID：14203600
> 
> 赞同：1
> 
> 时间：2013-01-07T20:34:12.853
> 
> 标签：.net, visual-studio-2010, visual-c++, reference, dependencies

我有一个带有两个项目的 Visual Studios 解决方案，一个是 VB.net，另一个是 VC++。VC++ 项目是 Nvidia 的 Driver API 的包装器，称为 Nvapi。它是一个 nvapi.lib 文件和相关的头文件。我的代码在我的开发机器上编译并运行良好，但我尝试将整个解决方案目录复制到另一台计算机并运行可执行文件，但出现错误，提示无法找到/加载 VC++ 项目 dll 或其依赖项之一。它运行良好，直到我的代码使用 nvapi 包装器但随后崩溃。我尝试发布该项目，以便它生成一个安装程序并以这种方式安装程序，但我得到了同样的错误。

我决定在另一台计算机上安装 VS2010，看看是否可以调试问题。安装 VS2010 后，我制作了解决方案文件夹的备份副本。然后我打开解决方案并编译并运行代码正常。现在这是我真的不明白的部分我去了解决方案的备份副本（在我的开发机器上编译的那个）导航到可执行文件并运行它，它现在工作正常。我唯一能想到的是编译代码将 Nvapi.lib 文件复制到系统目录，以便 exe 工作。有谁知道什么会导致这个问题，以及如何在不安装 Visual Studio 的情况下让我的代码在其他机器上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:06:43.957

一个常见的错误是将 C++ 项目的调试版本复制到另一台机器上。它将无法找到运行时 DLL 的调试版本，例如 msvcr100d.dll。只部署发布版本。

如果您部署了 Release 版本但仍有问题，那么您可能忘记运行 vcredist 安装程序。当您只有一个 DLL 和一个不使用 C++ 标准库类的 EXE 时，您可以通过使用 /MT 进行编译，从技术上避免这种依赖关系。如果您不知道缺少的依赖项可能是什么，请使用 SysInternals 的 ProcMon。

# android - RadioGroup 可以检查所有答案

> ID：14203603
> 
> 赞同：1
> 
> 时间：2013-01-07T20:34:18.343
> 
> 标签：android, radio-group

我已经制作了一个`RadioGroup`，并且我正在`RadioButtons`以编程方式添加它。问题是，运行时我可以检查所有选项并且不能取消选中它们。这是我的代码：

```
 optionsContainer = new RadioGroup(_myActivity);
        this.setId(IdDispencer.DispenceID());

        for (int i=0; i < options.size(); i++){

            RadioButton asw = new RadioButton(_myActivity);
            asw.setText(options.get(i));
            asw.setId(IdDispencer.DispenceID());
            optionsContainer.addView(asw);
        } 
```

PS 1 - 我试图设置一个数组来保存单选按钮，如下所示： [Android RadioGroup checks more than one RadioButton?](https://stackoverflow.com/questions/8265034/android-radiogroup-checks-more-than-one-radiobutton) 但没有成功。

PS 2 - 这很奇怪，行为不一致。有时它起作用，有时它不起作用。在我运行 2.3.3 的模拟器上，它显示了这种行为，但在我的带有 CM9 的 SGS1 上，它一直显示有问题的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:59:02.120

我遇到了同样的问题，我找到的解决方案是为每个单选按钮设置一个 id（我根本没有这样做）。

在您的代码中，您似乎为每个按钮提供了相同的 ID。也许问题就在这里。

# lambda - lambda 内部的非法函数调用

> ID：14203604
> 
> 赞同：1
> 
> 时间：2013-01-07T20:34:22.170
> 
> 标签：lambda, lisp, common-lisp, chess

我正在研究一个函数来计算国际象棋游戏中棋子的有效移动。该功能`white-pawn-move`有效。当我试图将它概括为任一玩家的棋子 ( `pawn-move`) 时，我遇到了一个非法的函数调用。我已经在 repl 中测试了 funcall，但我认为这不是问题。

我究竟做错了什么？

[http://pastebin.com/fEiQTwi5](http://pastebin.com/fEiQTwi5)

```
(defun white-pawn-move (file rank)       
  (let ((movelist '()))
    (if (and (within-boardp file (+ rank 1))
             (eql #\s (aref *board* (+ rank 1) file)))
        (push (cons file (+ rank 1)) movelist))
    (if (= rank 1) 
        (push (cons file (+ rank 2)) movelist))
    (if (and (within-boardp (- file 1) (+ rank 1))
             (belongs-to-opponent (aref *board*  (+ rank 1) (- file 1))))
        (push (cons (- file 1) (+ rank 1)) movelist))
    (if (and (within-boardp (+ file 1) (+ rank 1))
             (belongs-to-opponent (aref *board* (+ rank 1) (+ file 1))))
        (push (cons (+ file 1) (+ rank 1)) movelist))
    movelist))      

;refactor:
;file / rank numeric      
(defun pawn-move (direction)
  (let ((startrank (if (eql direction #'+)
                       1
                       6)))
    (lambda (file rank)
      (let ((movelist '()))
        (if (and (within-boardp file (funcall direction rank 1))
                 (eql #\s (aref *board* (funcall direction rank 1) file)))
            (push (cons file (funcall direction rank 1)) movelist))
        (if (= rank startrank) 
            (push (cons file (funcall direction rank 2)) movelist))
        (if (and (within-boardp (- file 1) (funcall direction rank 1))
                 (belongs-to-opponent (aref *board* 
                                            (funcall direction rank 1)
                                            (- file 1))))
            (push (cons (- file 1) (funcall direction rank 1)) movelist))
        (if (and (within-boardp (+ file 1) (funcall direction rank 1))
                 (belongs-to-opponent (aref *board*
                                            (funcall direction rank 1)
                                            (+ file 1))))
            (push (cons (+ file 1) (funcall direction rank 1)) movelist))
        movelist))))
;desired usage
(setf (gethash #\P *move-table*) (pawn-move #'+))    
(setf (gethash #\p *move-table*) (pawn-move #'-)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T23:37:03.943

您`white-pawn-move`返回一个移动列表，而您`pawn-move`返回一个可以返回移动列表的函数。我猜你试图调用`(pawn-move #'+)`你以前调用的地方`(white-pawn-move)`，但你必须调用`(funcall (pawn-move #'+))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T04:29:04.473

你能显示你得到的错误吗？

我刚刚使用 Emacs Lisp 尝试了您的代码（将字符表示更改为 Emacs-Lisp），并且我没有收到 sexps`(pawn-move #'+)`和`(pawn-move #'-)`. 他们是什么给你带来了错误吗？我得到这个`(pawn-move #'+)`，例如：

```
     (lambda (文件等级)
       (让 ((movelist 'nil))
         (if (and (within-boardp)
                   文件
                   （功能方向排名1））
                  （当量 115
                       （参考*板*
                             （功能方向排名1）
                             文件）））
             (push (cons file (funcall direction rank 1))
                   移动列表））
         （如果（= 排名 startrank）
             (push (cons file (funcall direction rank 2))
                   移动列表））
         (if (and (within-boardp)
                   (- 文件 1)
                   （功能方向排名1））
                  （属于对手
                   (aref *board* (funcall direction rank 1)
                         (- 文件 1))))
             (push (cons (-file 1) (funcall direction rank 1))
                   移动列表））
         (if (and (within-boardp)
                   （+ 文件 1）
                   （功能方向排名1））
                  （属于对手
                   （参考*板*
                         （功能方向排名1）
                         (+ 文件 1))))
             (push (cons (+ file 1) (funcall direction rank 1))
                   移动列表））
         移动列表））

```

总而言之，也许就您所看到的内容提供更多细节。

# java - 是否可以阻止 Ruby 脚本在 JRuby 中导入 Java？

> ID：14203605
> 
> 赞同：2
> 
> 时间：2013-01-07T20:34:31.933
> 
> 标签：java, ruby, jruby

从这个页面：[https ://github.com/jruby/jruby/wiki/CallingJavaFromJRuby](https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby)

在 Ruby 脚本中，如果您使用`require 'java'`，该脚本将能够创建诸如`JFrame`s 之类的东西。

听起来可能很奇怪，但是，是否有可能以任何方式*不允许此类功能*（禁用导入`Java`）？

* * *

如果你好奇我为什么要问，那是因为我正在开发某种基于 Java 的游戏引擎，但它允许用户使用 Ruby 编写脚本来控制游戏逻辑 -*只有*游戏逻辑。我不想给创建`JFrame`s 的自由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:14:03.267

一种技巧是将“java”放入已加载的功能（$”数组）中。Requires 会假设它已经加载，而不是尝试再次加载它。用户当然可以从该数组中删除它，然后再试一次。

# mysql - 多个连接到一列

> ID：14203608
> 
> 赞同：1
> 
> 时间：2013-01-07T20:34:59.500
> 
> 标签：mysql

我有查询 LEFT 连接来自两个表的信息。使用具有以下连接的代码

```
LEFT JOIN A on source = news_id 
LEFT JOIN B on source = other_news_id 
```

如何连接或显示来自两列的数据，以便生成一列信息。

```
ID  source    Left Join on ID a   Left Join on ID b   
a    1            info1             <null>
a    2            info2             <null>
b    3            <null>            info3
b    4            <null>            info4 
```

类似的东西

```
ID  source   info
a    1       info1             
a    2       info2
b    3       info3             
b    4       info4 
```

如何将所有左连接放在一列中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:37:52.097

`COALESCE()`如果始终只有一个值，则可以使用。它返回第一个非空参数。

```
SELECT ID, source, COALESCE(infoa, infob) AS info FROM ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:37:42.657

该`COALESCE`函数将执行此操作。

有关如何使用此函数的示例，请参阅[MySQL 文档。](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T20:47:50.930

从样本数据来看，似乎 no`A.news_id`永远不等于 a`B.other_news_id`并且您希望两列`COALESCE`至少有一个`NULL`值。

我也猜你的`FROM`条款是这样的：

```
FROM  T
  LEFT JOIN A on T.source = A.news_id 
  LEFT JOIN B on T.source = B.other_news_id 
```

如果是这种情况，您还可以使用以下命令重写查询`UNION`：

```
SELECT ID, source, infoa AS info
FROM  T
  JOIN A on T.source = A.news_id 
WHERE ...

UNION ALL

SELECT ID, source, infob
FROM  T
  JOIN B on T.source = B.other_news_id
WHERE ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T20:37:38.717

如果我理解正确，您需要使用 INNER JOINs 而不是 LEFT JOINs

# ruby-on-rails - html_safe 并且仍然转义 html

> ID：14203611
> 
> 赞同：1
> 
> 时间：2013-01-07T20:35:09.320
> 
> 标签：ruby-on-rails

html_safe 并且仍然转义 html

我有以下回复助手：

```
def mb_reply_login post
  if current_user
    "<button data-depth='" + post.depth.to_s + "' data-post-id='" + post.id.to_s + "'  class='mb_btn mb_reply btn'>reply</button>".html_safe
  else
    ...
  end 
```

并从这样的视图中调用它：

```
<%=mb_reply_login post %> 
```

但是，它返回了转义的 html，并且对为什么感到困惑？似乎它不应该根据[Don't escape html in ruby​​ on rails](https://stackoverflow.com/questions/3932267/dont-escape-html-in-ruby-on-rails)和 rails api。

我将如何返回未转义的 html？我试过

```
"<button data-depth='" + post.depth.to_s.html_safe + "' data-post-id='" + post.id.to_s.html_safe + "'  class='mb_btn mb_reply btn'>reply</button>".html_safe 
```

但没有骰子

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:46:10.683

当您在 Ruby on Rails 中连接字符串时，每个未标记为 html_safe 的字符串在连接之前首先被转义。

使用第二个片段，确保在每个字符串上调用 .html_safe （包括常量，例如：

```
"<button data-depth='" 
```

更好的是，您可以使用插值，例如：

```
"<button data-depth='#{post.depth.to_s.html_safe}' 
 data-post-id='#{post.id.to_s.html_safe}' 
 class='mb_btn mb_reply btn'>reply</button>".html_safe 
```

# java - Powermock没有返回正确的对象静态方法

> ID：14203612
> 
> 赞同：1
> 
> 时间：2013-01-07T20:35:17.693
> 
> 标签：java, easymock, powermock

我正在使用 PowerMock 尝试使用静态方法模拟最终类，但是每当我的代码调用`MyClass.getInstance()`它时它都会返回`null`

在我的测试中，我注释了测试类

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(MyClass.class) 
```

在我制作模拟的方法中，我执行以下操作

```
suppressConstructor(MyClass.class);
PowerMock.mockStatic(MyClass.class);
mockClass = PowerMock.createMock(MyClass.class);
expect(MyClass.getInstance()).andReturn(mockClass); 
```

应该`PowerMock.createMock`创建一个`EasyMock`类吗？

当我在我的代码中调用它`MyClass.getInstance()`时（`null``mockClass`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:14:58.217

似乎您使用的是 EasyMock 模拟方式。您是否在调用`getInstance()`方法之前重放了 MyClass，例如

```
PowerMock.replay(MyClass.class); 
```

?

来自 PowerMock [MockStatic](http://code.google.com/p/powermock/wiki/MockStatic)文档：

> 使用 PowerMock.mockStatic(ClassThatContainsStaticMethod.class) 模拟该类的所有方法。使用 PowerMock.replay(ClassThatContainsStaticMethod.class) 将类更改为重播模式。使用 PowerMock.verify(ClassThatContainsStaticMethod.class) 将类更改为验证模式。

# c# - 如何在 Windows iis 服务器中使用我的个人计算机在 Internet 上发布我的网站？

> ID：14203617
> 
> 赞同：1
> 
> 时间：2013-01-07T20:35:38.493
> 
> 标签：c#, asp.net, windows-7, iis-7

我用 asp.net 编写了一个网站，我想在我的电脑上在互联网上发布我的网站，我没有静态 IP 地址。

可能吗？如果可能，怎么做？我正在运行 Windows7、IIS7 和 asp.net

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:40:18.053

首先：这不是一个编程问题。

现在回答你的问题：

可以在更改 IP 地址的“家庭路由器”后面托管网站。您只需要一个[动态 DNS](https://en.wikipedia.org/wiki/Dynamic_DNS)（例如[DynDNS](http://dyndns.org)）解决方案即可为您的主机 (IP) 获取静态域地址。

**但**我不会推荐它。在您的专用网络上托管主页时，您必须注意许多潜在风险（黑客，（D）[DoS](https://en.wikipedia.org/wiki/Denial-of-service_attack)，...）。万一发生什么事，它*会*影响你的**私人**家庭网络。

此外，您的网络带宽可能不够快（关于上传速度）来处理传出流量。

如果你想使用 ASP.Net，我建议你以大约 5 美元/月的价格租用一个网络空间，包括一个静态地址和/或域或一个 V-Server。

2017 年更新：您可以使用[Mono-Project for Linux 运行 ASP.Net Pages（最高 .Net 2.0）](http://www.mono-project.com/docs/web/aspnet/)，这是 .NET 框架的一个端口。此外，我推荐微软支持的新创建的[ASP.Net Core 。](https://www.asp.net/core)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:04:26.220

也许下面的教程可以帮助你[http://www.dotnetfunda.com/articles/article1247-how-to-host-aspnet-application-on-the-web-server-iis.aspx](http://www.dotnetfunda.com/articles/article1247-how-to-host-aspnet-application-on-the-web-server-iis.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:42:07.483

您需要使用允许动态 ip 的 dns 服务。我想[no-ip](http://www.no-ip.com/)可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T20:38:10.690

如果您的计算机始终处于打开状态并且您的 Internet 连接始终处于打开状态，这是可能的。

对于 dns，使用 no-ip.org 之类的服务来获取动态 ip 的 dns 名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T20:41:37.290

首先，您需要一个动态 DNS。[http://www.dyndns.com](http://www.dyndns.com)（推荐）

然后将他们的客户端下载到您的服务器并运行它。

DYNUpdater 会将您的动态 IP 与 DNS 相关联。

之后，打开路由器上的 80 端口并将其转发到您的服务器。首选服务器上的静态 IP。

最后一件事，导航到您之前创建的动态 DNS，您将可以访问服务器。

# c - Windows API：等待数据在非 GUI 控制台输入（基于 PIPE 的 STDIN）上可用

> ID：14203618
> 
> 赞同：3
> 
> 时间：2013-01-07T20:35:40.877
> 
> 标签：c, windows, winapi, mingw, stdin

**背景**

我目前正在开发一个类似于 Windows 的 select 函数，它不仅支持 SOCKET 句柄，还支持其他类型的可等待句柄。我的目标是等待标准控制台句柄，以便为[curl](http://curl.haxx.se/) [testsuite](http://curl.haxx.se/dev/testcurl.html)提供选择功能。

相关程序可以在 curl git 仓库中找到：[sockfilt.c](https://github.com/bagder/curl/blob/master/tests/server/sockfilt.c)

**问题**

是否可以在非基于 GUI 的控制台输入上等待数据可用？问题是[WaitFor*](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687028.aspx)方法不支持 PIPE 句柄，因此如果进程输入来自另一个进程，例如使用管道 | 则不支持 STDIN。cmd的功能。

* * *

以下示例程序说明了该问题：select_ws.c

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>

#include <windows.h>
#include <winsock2.h>
#include <malloc.h>

#include <conio.h>
#include <fcntl.h>

#define SET_SOCKERRNO(x)  (WSASetLastError((int)(x)))

typedef SOCKET curl_socket_t;

/*
 * select function with support for WINSOCK2 sockets and all
 * other handle types supported by WaitForMultipleObjectsEx.
 * http://msdn.microsoft.com/en-us/library/windows/desktop/ms687028.aspx
 * http://msdn.microsoft.com/en-us/library/windows/desktop/ms741572.aspx
 */
static int select_ws(int nfds, fd_set *readfds, fd_set *writefds,
                     fd_set *exceptfds, struct timeval *timeout)
{
  long networkevents;
  DWORD milliseconds, wait, idx, avail, events, inputs;
  WSAEVENT wsaevent, *wsaevents;
  WSANETWORKEVENTS wsanetevents;
  INPUT_RECORD *inputrecords;
  HANDLE handle, *handles;
  curl_socket_t sock, *fdarr, *wsasocks;
  int error, fds;
  DWORD nfd = 0, wsa = 0;
  int ret = 0;

  /* check if the input value is valid */
  if(nfds < 0) {
    SET_SOCKERRNO(EINVAL);
    return -1;
  }

  /* check if we got descriptors, sleep in case we got none */
  if(!nfds) {
    Sleep((timeout->tv_sec * 1000) + (timeout->tv_usec / 1000));
    return 0;
  }

  /* allocate internal array for the original input handles */
  fdarr = malloc(nfds * sizeof(curl_socket_t));
  if(fdarr == NULL) {
    SET_SOCKERRNO(ENOMEM);
    return -1;
  }

  /* allocate internal array for the internal event handles */
  handles = malloc(nfds * sizeof(HANDLE));
  if(handles == NULL) {
    SET_SOCKERRNO(ENOMEM);
    return -1;
  }

  /* allocate internal array for the internal socket handles */
  wsasocks = malloc(nfds * sizeof(curl_socket_t));
  if(wsasocks == NULL) {
    SET_SOCKERRNO(ENOMEM);
    return -1;
  }

  /* allocate internal array for the internal WINSOCK2 events */
  wsaevents = malloc(nfds * sizeof(WSAEVENT));
  if(wsaevents == NULL) {
    SET_SOCKERRNO(ENOMEM);
    return -1;
  }

  /* loop over the handles in the input descriptor sets */
  for(fds = 0; fds < nfds; fds++) {
    networkevents = 0;
    handles[nfd] = 0;

    if(FD_ISSET(fds, readfds))
      networkevents |= FD_READ|FD_ACCEPT|FD_CLOSE;

    if(FD_ISSET(fds, writefds))
      networkevents |= FD_WRITE|FD_CONNECT;

    if(FD_ISSET(fds, exceptfds))
      networkevents |= FD_OOB;

    /* only wait for events for which we actually care */
    if(networkevents) {
      fdarr[nfd] = (curl_socket_t)fds;
      if(fds == fileno(stdin)) {
        handles[nfd] = GetStdHandle(STD_INPUT_HANDLE);
      }
      else if(fds == fileno(stdout)) {
        handles[nfd] = GetStdHandle(STD_OUTPUT_HANDLE);
      }
      else if(fds == fileno(stderr)) {
        handles[nfd] = GetStdHandle(STD_ERROR_HANDLE);
      }
      else {
        wsaevent = WSACreateEvent();
        if(wsaevent != WSA_INVALID_EVENT) {
          error = WSAEventSelect(fds, wsaevent, networkevents);
          if(error != SOCKET_ERROR) {
            handles[nfd] = wsaevent;
            wsasocks[wsa] = (curl_socket_t)fds;
            wsaevents[wsa] = wsaevent;
            wsa++;
          }
          else {
            handles[nfd] = (HANDLE)fds;
            WSACloseEvent(wsaevent);
          }
        }
      }
      nfd++;
    }
  }

  /* convert struct timeval to milliseconds */
  if(timeout) {
    milliseconds = ((timeout->tv_sec * 1000) + (timeout->tv_usec / 1000));
  }
  else {
    milliseconds = INFINITE;
  }

  /* wait for one of the internal handles to trigger */
  wait = WaitForMultipleObjectsEx(nfd, handles, FALSE, milliseconds, FALSE);

  /* loop over the internal handles returned in the descriptors */
  for(idx = 0; idx < nfd; idx++) {
    fds = fdarr[idx];
    handle = handles[idx];
    sock = (curl_socket_t)fds;

    /* check if the current internal handle was triggered */
    if(wait != WAIT_FAILED && (wait - WAIT_OBJECT_0) >= idx &&
       WaitForSingleObjectEx(handle, 0, FALSE) == WAIT_OBJECT_0) {
      /* try to handle the event with STD* handle functions */
      if(fds == fileno(stdin)) {
        /* check if there is no data in the input buffer */
        if(!stdin->_cnt) {
          /* check if we are getting data from a PIPE */
          if(!GetConsoleMode(handle, &avail)) {
            /* check if there is no data from PIPE input */
            if(!PeekNamedPipe(handle, NULL, 0, NULL, &avail, NULL))
              avail = 0;
            if(!avail)
              FD_CLR(sock, readfds);
          } /* check if there is no data from keyboard input */
          else if (!_kbhit()) {
            /* check if there are INPUT_RECORDs in the input buffer */
            if(GetNumberOfConsoleInputEvents(handle, &events)) {
              if(events > 0) {
                /* remove INPUT_RECORDs from the input buffer */
                inputrecords = (INPUT_RECORD*)malloc(events *
                                                     sizeof(INPUT_RECORD));
                if(inputrecords) {
                  if(!ReadConsoleInput(handle, inputrecords,
                                       events, &inputs))
                    inputs = 0;
                  free(inputrecords);
                }

                /* check if we got all inputs, otherwise clear buffer */
                if(events != inputs)
                  FlushConsoleInputBuffer(handle);
              }
            }

            /* remove from descriptor set since there is no real data */
            FD_CLR(sock, readfds);
          }
        }

        /* stdin is never ready for write or exceptional */
        FD_CLR(sock, writefds);
        FD_CLR(sock, exceptfds);
      }
      else if(fds == fileno(stdout) || fds == fileno(stderr)) {
        /* stdout and stderr are never ready for read or exceptional */
        FD_CLR(sock, readfds);
        FD_CLR(sock, exceptfds);
      }
      else {
        /* try to handle the event with the WINSOCK2 functions */
        error = WSAEnumNetworkEvents(fds, NULL, &wsanetevents);
        if(error != SOCKET_ERROR) {
          /* remove from descriptor set if not ready for read/accept/close */
          if(!(wsanetevents.lNetworkEvents & (FD_READ|FD_ACCEPT|FD_CLOSE)))
            FD_CLR(sock, readfds);

          /* remove from descriptor set if not ready for write/connect */
          if(!(wsanetevents.lNetworkEvents & (FD_WRITE|FD_CONNECT)))
            FD_CLR(sock, writefds);

          /* remove from descriptor set if not exceptional */
          if(!(wsanetevents.lNetworkEvents & FD_OOB))
            FD_CLR(sock, exceptfds);
        }
      }

      /* check if the event has not been filtered using specific tests */
      if(FD_ISSET(sock, readfds) || FD_ISSET(sock, writefds) ||
         FD_ISSET(sock, exceptfds)) {
        ret++;
      }
    }
    else {
      /* remove from all descriptor sets since this handle did not trigger */
      FD_CLR(sock, readfds);
      FD_CLR(sock, writefds);
      FD_CLR(sock, exceptfds);
    }
  }

  for(idx = 0; idx < wsa; idx++) {
    WSAEventSelect(wsasocks[idx], NULL, 0);
    WSACloseEvent(wsaevents[idx]);
  }

  free(wsaevents);
  free(wsasocks);
  free(handles);
  free(fdarr);

  return ret;
}

int main(void)
{
  WORD wVersionRequested;
  WSADATA wsaData;
  SOCKET sock[4];
  struct sockaddr_in sockaddr[4];
  fd_set readfds;
  fd_set writefds;
  fd_set exceptfds;
  SOCKET maxfd = 0;
  int selfd = 0;
  void *buffer = malloc(1024);
  ssize_t nread;

  setmode(fileno(stdin), O_BINARY);

  wVersionRequested = MAKEWORD(2, 2);
  WSAStartup(wVersionRequested, &wsaData);

  sock[0] = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
  sockaddr[0].sin_family = AF_INET;
  sockaddr[0].sin_addr.s_addr = inet_addr("74.125.134.26");
  sockaddr[0].sin_port = htons(25);
  connect(sock[0], (struct sockaddr *) &sockaddr[0], sizeof(sockaddr[0]));

  sock[1] = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
  sockaddr[1].sin_family = AF_INET;
  sockaddr[1].sin_addr.s_addr = inet_addr("74.125.134.27");
  sockaddr[1].sin_port = htons(25);
  connect(sock[1], (struct sockaddr *) &sockaddr[1], sizeof(sockaddr[1]));

  sock[2] = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
  sockaddr[2].sin_family = AF_INET;
  sockaddr[2].sin_addr.s_addr = inet_addr("127.0.0.1");
  sockaddr[2].sin_port = htons(1337);
  printf("bind = %d\n", bind(sock[2], (struct sockaddr *) &sockaddr[2], sizeof(sockaddr[2])));
  printf("listen = %d\n", listen(sock[2], 5));

  sock[3] = INVALID_SOCKET;

  while(1) {
    FD_ZERO(&readfds);
    FD_ZERO(&writefds);
    FD_ZERO(&exceptfds);

    FD_SET(sock[0], &readfds);
    FD_SET(sock[0], &exceptfds);
    maxfd = maxfd > sock[0] ? maxfd : sock[0];

    FD_SET(sock[1], &readfds);
    FD_SET(sock[1], &exceptfds);
    maxfd = maxfd > sock[1] ? maxfd : sock[1];

    FD_SET(sock[2], &readfds);
    FD_SET(sock[2], &exceptfds);
    maxfd = maxfd > sock[2] ? maxfd : sock[2];

    FD_SET((SOCKET)fileno(stdin), &readfds);
    maxfd = maxfd > (SOCKET)fileno(stdin) ? maxfd : (SOCKET)fileno(stdin);

    printf("maxfd = %d\n", maxfd);
    selfd = select_ws(maxfd + 1, &readfds, &writefds, &exceptfds, NULL);
    printf("selfd = %d\n", selfd);

    if(FD_ISSET(sock[0], &readfds)) {
      printf("read sock[0]\n");
      nread = recv(sock[0], buffer, 1024, 0);
      printf("read sock[0] = %d\n", nread);
    }
    if(FD_ISSET(sock[0], &exceptfds)) {
      printf("exception sock[0]\n");
    }

    if(FD_ISSET(sock[1], &readfds)) {
      printf("read sock[1]\n");
      nread = recv(sock[1], buffer, 1024, 0);
      printf("read sock[1] = %d\n", nread);
    }
    if(FD_ISSET(sock[1], &exceptfds)) {
      printf("exception sock[1]\n");
    }

    if(FD_ISSET(sock[2], &readfds)) {
      if(sock[3] != INVALID_SOCKET)
        closesocket(sock[3]);

      printf("accept sock[2] = %d\n", sock[2]);
      nread = sizeof(sockaddr[3]);
      printf("WSAGetLastError = %d\n", WSAGetLastError());
      sock[3] = accept(sock[2], (struct sockaddr *) &sockaddr[3], &nread);
      printf("WSAGetLastError = %d\n", WSAGetLastError());
      printf("accept sock[2] = %d\n", sock[3]);
    }
    if(FD_ISSET(sock[2], &exceptfds)) {
      printf("exception sock[2]\n");
    }

    if(FD_ISSET(fileno(stdin), &readfds)) {
      printf("read fileno(stdin)\n");
      nread = read(fileno(stdin), buffer, 1024);
      printf("read fileno(stdin) = %d\n", nread);
    }
  }

  WSACleanup();
  free(buffer);
} 
```

通过以下命令使用 MinGW 进行编译：

```
mingw32-gcc select_ws.c -Wl,-lws2_32 -g -o select_ws.exe 
```

使用以下命令直接从控制台运行程序有效：

```
select_ws.exe 
```

但是对管道做同样的事情会不断地向 WaitForMultipleObjectsEx 发出信号：

```
ping -t 8.8.8.8 | select_ws.exe 
```

在父进程完成之前，管道已准备好读取，例如：

```
ping 8.8.8.8 | select_ws.exe 
```

* * *

是否有兼容的方法来模拟基于 PIPE 的控制台输入句柄与其他句柄的阻塞等待？应避免使用螺纹。

[欢迎您对本要点](https://gist.github.com/4478231)中的示例程序做出更改。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:14:33.953

用于`GetStdHandle(STD_INPUT_HANDLE)`获取 STDIN 管道句柄，然后使用其成员设置为手动重置事件的`ReadFile/Ex()`结构。然后，您可以使用任何函数来等待事件。如果超时，调用以中止读取操作。`OVERLAPPED``hEvent``CreateEvent()``WaitFor*()``CancelIo()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T00:14:35.563

我实际上找到了一种使用单独的等待线程使其工作的方法。请参阅 github.com 上 curl 存储库中的以下[提交](https://github.com/bagder/curl/commit/49b63cf30d4242b51bd49295f9f20cfbfb641a7d)。

感谢您的意见！

# jquery - jquery clone() 打破表单验证

> ID：14203619
> 
> 赞同：0
> 
> 时间：2013-01-07T20:35:47.213
> 
> 标签：jquery, ruby-on-rails, forms, coffeescript, angularjs

我有一个通过指令生成的表单字段：

它以 ng-pristine、ng-valid、ng-valid-required 开始。（它通过服务器端请求填充）。

有一个删除按钮，为了确保与 rails 表单处理的兼容性，只需将其删除并在提交按钮之前将其克隆并添加为不可见。

onclick逻辑如下：

```
 scope.removeDecisionRule = (index, e) ->
     parent = angular.element(e.target).parent()
     unless parent.hasClass('brand-new')
       parent = parent.clone()
#      parent.css("display", "none")
       parent.find('input[name$="[_destroy]"]').val("1")
       parent.appendTo('form').eq(0)
       scope.decisionRules.splice(index, 1) 
```

拼接将其从填充初始表单的数组中删除，从而将控制权交给一个指令，然后从页面中删除该元素，而 ['_destroy'] 字段是 rails 的要求。

该元素出现在页面上（这就是为什么 display=none 被注释掉的原因）。

然而，在表单提交时，它似乎被 angulars 验证标记（输入框轮廓变为红色）。它仍然设置为 ng-pristine、ng-valid、ng-valid-required。

输入输入框并编辑其值（删除一个字符，然后读取），删除该块。所以一个hack是在scope.decisionRules.splice之前添加以下内容：

```
 parent.find("input").each (index, element)->
      angular.element(element).val(angular.element(element).val()) 
```

现在我的问题是：为什么会发生这种情况，如果没有上述客观上可怕的黑客攻击，我该如何避免它？

谢谢！

# iphone - 阻止 UIWebView 重新加载

> ID：14203620
> 
> 赞同：1
> 
> 时间：2013-01-07T20:35:50.250
> 
> 标签：iphone, xcode, uiwebview

所以我有`UIWebView`一个非常简单的代码行`viewDidLoad`：

```
[bandcamp loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://hatfilms.bandcamp.com"]]]; 
```

它的工作原理是，当我按下按钮时，会加载一个新视图，这是执行的代码。麻烦的是，当我然后转到另一个视图，然后再回到 webView ViewController 时，webView 会重新加载。当我在 webView 中播放音乐时，音乐继续播放，但 webView 重新加载 - 就像它创建了自己的另一个实例一样。

我将如何阻止这种情况发生？

# hadoop - Hadoop 作业抛出 java.io.IOException：尝试从关闭的流中读取

> ID：14203621
> 
> 赞同：0
> 
> 时间：2013-01-07T20:35:53.203
> 
> 标签：hadoop, mapreduce

我正在运行一个简单的 map-reduce 作业。此作业使用来自常见爬网数据的 250 个文件。

例如 s3://aws-publicdatasets/common-crawl/parse-output/segment/1341690169105/

如果我使用 50、100 个文件，一切正常。但是有 250 个文件我得到了这个错误

```
java.io.IOException: Attempted read from closed stream.
    at org.apache.commons.httpclient.ContentLengthInputStream.read(ContentLengthInputStream.java:159)
    at java.io.FilterInputStream.read(FilterInputStream.java:116)
    at org.apache.commons.httpclient.AutoCloseInputStream.read(AutoCloseInputStream.java:107)
    at org.jets3t.service.io.InterruptableInputStream.read(InterruptableInputStream.java:76)
    at org.jets3t.service.impl.rest.httpclient.HttpMethodReleaseInputStream.read(HttpMethodReleaseInputStream.java:136)
    at org.apache.hadoop.fs.s3native.NativeS3FileSystem$NativeS3FsInputStream.read(NativeS3FileSystem.java:111)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at java.io.DataInputStream.readByte(DataInputStream.java:248)
    at org.apache.hadoop.io.WritableUtils.readVLong(WritableUtils.java:299)
    at org.apache.hadoop.io.WritableUtils.readVInt(WritableUtils.java:320)
    at org.apache.hadoop.io.SequenceFile$Reader.readBuffer(SequenceFile.java:1707)
    at org.apache.hadoop.io.SequenceFile$Reader.seekToCurrentValue(SequenceFile.java:1773)
    at org.apache.hadoop.io.SequenceFile$Reader.getCurrentValue(SequenceFile.java:1849)
    at org.apache.hadoop.mapreduce.lib.input.SequenceFileRecordReader.nextKeyValue(SequenceFileRecordReader.java:74)
    at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:532)
    at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67)
    at org.apache.hadoop.mapreduce.lib.map.MultithreadedMapper$SubMapRecordReader.nextKeyValue(MultithreadedMapper.java:180)
    at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143)
    at org.apache.hadoop.mapreduce.lib.map.MultithreadedMapper$MapRunner.run(MultithreadedMapper.java:268) 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:06:45.327

你有多少地图槽来处理输入？是不是接近100？

这是一个猜测，但在您处理第一批文件时，与 S3 的连接可能会超时，并且当插槽可用于处理更多文件时，连接不再打开。我相信 NativeS3FileSystem 的超时错误会显示为 IOExceptions。

# javascript - 如何将 TinyMCE 组件与 SSL 一起使用？

> ID：14203622
> 
> 赞同：1
> 
> 时间：2013-01-07T20:35:56.067
> 
> 标签：javascript, ruby-on-rails, ssl, tinymce

我有一个受 SSL 证书保护的 Ruby on Rails 管理部分。`public/javascripts`不幸的是，TinyMCE 是从目录中加载的。由于该站点正在加载未加密的脚本，所有需要弹出窗口的功能都不起作用（特别是 HTML/链接功能）。有没有办法可以在浏览器中覆盖它？

如果不是，我唯一的做法是包括带有 SSL 保护的 JavaScript 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:04:29.037

有一种方法可以避免弹出窗口。您可以使用模态对话。这是相关的tinymce init 配置参数

```
dialog_type: "modal", 
```

此外，您需要确保已加载 inlinepopups：

```
plugins: '...,paste,style,inlinepopups' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:45:59.803

是的，您需要从安全位置提供 javascript 文件以避免加载不安全内容的问题。

# .htaccess - .htaccess - 将动态 url 从多个域重定向到单个动态 url

> ID：14203629
> 
> 赞同：0
> 
> 时间：2013-01-07T20:36:28.743
> 
> 标签：.htaccess, dynamic

我有一个奇怪的情况，客户端一直在为同一个站点使用多个域，但没有在它们上使用 301 重定向。所以搜索引擎已经索引：

```
www.site1.com/pageid=2
www.site2.com/pageid=2
www.site3.com/pageid=2
www.site4.com/pageid=2 
```

全部用于同一页面。我现在需要将（全部）重定向到 www.site1.com/about

在过去，我成功地使用了这种格式：

```
RewriteCond %{QUERY_STRING} ^page_id=2$
RewriteRule ^/?site/$ http://www.site.com/about/ [L,R=301] 
```

但这只是来自一个域。有没有办法告诉它在 site2、site3 和 site4 上也为页面列表重定向同一页面？

如果可能的话，我想将所有这些都保存在同一个 .htaccess 文件中。

# c++ - 如何使 std::regex 在字符串中的特定位置开始匹配？

> ID：14203633
> 
> 赞同：5
> 
> 时间：2013-01-07T20:36:39.900
> 
> 标签：c++, regex, c++11

C# 的[`Regex.Match`方法具有](http://msdn.microsoft.com/en-us/library/3583dcyh.aspx)允许匹配从特定偏移量开始的重载。

如何`std::regex`在字符串中的指定位置开始匹配？

### 关于天真的解决方案的注意事项：

不，我**不能**只传递从该位置开始的子字符串——前缀可能会改变事情。

例如，前缀可能表示给定位置*不是*新行的开头，而如果我切断字符串，它将看起来像一个新行，并且对于需要检测换行符的模式我会得到不正确的匹配。对于lookbehinds等也存在同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:47:40.403

关键是您希望使用匹配标志来指定迭代器是较大字符串的一部分。

您需要使用@ildjarn 建议的高级迭代器，然后使用`std::regex_constants::match_prev_avail`指定迭代器可取消`--first`引用的标志。这将允许正则表达式匹配器使用前一个元素作为其测试的一部分。

# c# - 给定日期范围列表，我如何验证日期范围内的所有日期是否都包含在列表中？

> ID：14203636
> 
> 赞同：0
> 
> 时间：2013-01-07T20:36:55.340
> 
> 标签：c#, java, date

我有一个日期范围列表。

```
05/01/2012 - 07/01/2012
07/02/2012 - 09/05/2012
01/01/2012 - 03/31/2012
08/01/2012 - 12/31/2012 
```

现在的问题是验证给定列表是否涵盖特定范围内的所有日期。例如，此列表涵盖 05/01/2012 - 12/31/2012 范围内的所有日期，但非 01/01/2012-12/31/2012，因为此列表未涵盖 4 月日期。假设是，

1.  日期范围有效 - 开始日期 <= 结束日期。
2.  日期范围可能会重叠，如上述第 2 和第 4 的情况。
3.  列表不以任何方式排序。

到目前为止，我所做的是测试异常值，例如，

> 查找最小开始日期和最大结束日期 - 如果测试日期范围的开始日期和/或结束日期分别小于/大于这些日期，则测试失败。

但是，在中间检查任何错过的日期的最佳策略是什么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:42:04.543

最简单的策略是解析所有涉及的日期。`O(N)`

按开始日期对日期进行排序。 `O(N log N)`时间

将结束日期与下一个开始日期进行比较（忽略任何倒退的结束日期）`O(N)`

如果到下一个开始日期的一端超过一天，则您有一个差距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:44:02.167

首先要做的是修复您的输入数据。

1.  按开始日期排序所有范围
2.  通过设置开始日期删除所有重叠
3.  消除任何因 2 而消失的范围

所以你的范围会变成

```
01/01/2012 - 03/31/2012
05/01/2012 - 07/01/2012
07/02/2012 - 09/05/2012
09/06/2012 - 12/31/2012 
```

然后你只需要找到丢失的日期，看看你是否能弄清楚如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:42:54.557

将日期转换为自 1970 年 1 月 1 日（或其他参考日期）以来的天数。

那么你的问题就变成了找到丢失的整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T20:42:58.240

生成范围内的每个日期，将它们放入列表中并测试以查看您的候选人是否在该列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T20:51:30.737

尝试以下操作（按最小日期对列表范围进行排序后）：-

```
 i=0
  a=min_date at 0 position
b=max_date corresponding to a

while list has elements
   c= min_date at (i+1) position
   d=max_date corresponding to c

if (b< (c - 1 day))
then there is a gap;
else 
{ 
if(b<d)   // done to handle the situation :- 06/07/2012 - 12/31/2012
          // 08/07/2012 - 11/31/2012\. Then b will still remain 12/31/2012 after if condition
{
  b=d;
}
}
i=i+2;
end while; 
```

以上只会在列表中找到任何缺失的日期。

# java - 模拟器的背景被拉伸

> ID：14203639
> 
> 赞同：0
> 
> 时间：2013-01-07T20:37:21.330
> 
> 标签：java, android

我的 android 应用程序有一个背景，是一个 png 图像。它的大小为 800 x 480 像素。它在宽度上被拉伸，因此看起来不像我想要的那样。由于图像实际上是应用程序的背景，而不仅仅是一个 imageView，我无法使用 android:scaleType="centerCrop" 来使图像均匀缩放。

我需要图像来均匀地填充背景。

我也尝试过使用 NinePatch drawable，但结果并不好 - 图像变得模糊或在垂直拉伸时还可以，但不是宽度方向。

![图像前](../Images/595855b4c794880bf3616d816840708d.png) ![在模拟器上看到的图像后](../Images/74c57c61d6bdf5f5f6117914676fa3ea.png)

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@drawable/menu"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
```

有没有其他命令可以让背景正确显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:53:28.927

解决这个使用 draw9patch

android-sdk/工具/draw9patch

[https://developer.android.com/tools/help/draw9patch.html](https://developer.android.com/tools/help/draw9patch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:54:28.027

使用图像视图

```
<ImageView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/your_image"
android:scaleType="fitCenter"
/> 
```

检查这个也[链接](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

```
ImageView.ScaleType     CENTER_CROP

Scale the image uniformly (maintain the image's aspect ratio) so that both dimensions (width and height) of the image will be equal to or larger than the corresponding dimension of the view (minus padding). 
```

# php - 消息系统上的区分大小写问题

> ID：14203641
> 
> 赞同：0
> 
> 时间：2013-01-07T20:37:26.010
> 
> 标签：php

有人可以告诉这里出了什么问题吗？

我的用户名是：系统

在我的收件箱中，我有 2 条消息。1 个被发送到**System**，另一个被发送到**system**。

我可以删除**系统**邮件，但是当我尝试删除**系统**邮件时，我的代码中出现了“不是您的邮件”错误。

这是查看消息页面中的删除代码：

```
$delmsg=$_GET['delete'];

$idcheck = mysql_query("SELECT * FROM `inbox` WHERE `id`='$delmsg'");
$idfetch = mysql_fetch_object($idcheck);

    if ($delmsg !=''){
      if ($idfetch->to != $username){
         $errormsg = "Error - This is not your message to delete. Returning to your inbox... ";
         echo "<meta http-equiv=Refresh content=1;url=messages.php>";
      }else{
mysql_query("DELETE FROM `inbox` WHERE `to`='$username' AND `id`='$delmsg'");
         $errormsg = "Message deleted. Returning to your inbox...";
         echo "<meta http-equiv=Refresh content=1;url=messages.php>";
}
} 
```

这是发送消息页面中的代码：

```
if(strip_tags($_POST['send'])){

    $recipient= $_POST['sendto'];
    $subjectmsg= $_POST['subject'];
    $msgfull= $_POST['messagetext'];
    $date = date('Y-m-d H:i:s');

      if (!$recipient){
        $errormsg=" You must enter a recipient or your recipient's username must contain 3 or more characters. ";

    }elseif ($msgfull =="" || !msgfull){
        $errormsg="You cannot send a blank message. Please type your message in the text area above.";

    }elseif ($recipient && $msgfull){
        $checker=mysql_query("SELECT * FROM `user` WHERE `username`='$recipient'");
        $checkrows=mysql_num_rows($checker);

          if ($checkrows =="0"){
              $errormsg="User does not exist. Please check your SEND TO field";

    }elseif (!$subjectmsg){
    mysql_query("INSERT INTO `inbox` (`id`, `to`, `from`, `message`, `date`, `read`, `saved`, `subject`) VALUES 
                                     ('', '$recipient', '$username', '$msgfull', '$date', '0', '0', 'No Subject')");
                                     echo "<meta http-equiv=Refresh content=0;url=messages.php>";
    }else{
    mysql_query("INSERT INTO `inbox` (`id`, `to`, `from`, `message`, `date`, `read`, `saved`, `subject`) VALUES 
                                     ('', '$recipient', '$username', '$msgfull', '$date', '0', '0', '$subjectmsg')");
                                     echo "<meta http-equiv=Refresh content=0;url=messages.php>";
    }}
} 
```

USER 表中的 'username' 和 INBOX 表中的 'to' 都设置为 latin, varchar(255) 如果有帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:41:33.430

更改以下行：

```
if ($idfetch->to != $username){ 
```

到：

```
if (strtolower($idfetch->to) !== strtolower($username)){ 
```

用于在比较之前将[`strtolower()`](http://php.net/strtolower)数据库中的名称和消息名称都转换为小写。还将 (!=) 更改为 (!==) 因为我们想要类型和值的绝对匹配。

这不是一个完美的解决方案，但它是一种无需更改大量代码的选择。

# c++ - std::numeric_limits::is_exact ...什么是可用的定义？

> ID：14203654
> 
> 赞同：10
> 
> 时间：2013-01-07T20:38:08.410
> 
> 标签：c++, numeric-limits

正如我所解释的，[MSDN 的定义](http://msdn.microsoft.com/en-us/library/97ss307d%28v=vs.110%29.aspx)几乎`numeric_limits::is_exact`总是错误的：

> 在 [this] 类型上完成的 [all] 计算没有舍入误差。

而且[IBM的定义](http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.cbcsl01/header_limits_classes.htm)几乎总是正确的：（或者循环定义，取决于你怎么读）

> 一种对其所有值都有精确表示的类型

我可以肯定的是，我可以将 a 存储`2`在 a`double`和 a中`long`，并且它们都将被*精确*地表示。

然后我可以将它们除以并且两者都不能*准确地*`10`保持数学结果。

 ***给定任何数字数据类型`T`，正确的定义方法是`std::numeric_limits<T>::is_exact`什么？**

*编辑：我已经从许多答案中提供的详细信息中发布了我认为对该问题 [的准确答案。](https://stackoverflow.com/a/14297563/16287)[这个答案不是赏金的竞争者](https://meta.stackexchange.com/questions/54998/i-just-awarded-myself-a-bounty)。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T22:41:38.790

标准中的定义（见 NPE 的回答）不是很准确，是吗？相反，它是循环的和模糊的。

鉴于 IEC 浮点标准具有“不精确”数字的概念（以及计算产生不精确数字时的不精确异常），我怀疑这就是 name 的由来`is_exact`。请注意，在标准类型中，`is_exact`仅对`float`、`double`和为假`long double`。

目的是表明该类型是否*准确地*表示了基础数学类型的所有数字。对于整数类型，基础数学类型是整数的某个有限子集。由于每个整数类型准确地表示该类型所针对的整数子集的每个成员，`is_exact`对于所有整数类型都是如此。对于浮点类型，基础数学类型是实数的某个有限范围子集。（有限范围子集的一个示例是“0 到 1 之间的所有实数”。）甚至没有办法准确地表示实数的有限范围子集。几乎所有都是不可计算的。IEC/IEEE 格式使事情变得更糟。使用这种格式，计算机甚至不能精确地表示有理数的有限范围子集（更不用说可计算数的有限范围子集了）。

我怀疑该术语的起源`is_exact`是各种浮点表示模型中“不精确”数字的长期概念。也许一个更好的名字会是`is_complete`。

**附录**
语言定义的数字类型并不是“数字”表示的全部和全部。定点表示本质上是整数，因此它们也是精确的（表示中没有漏洞）。将有理数表示为一对标准整数类型（例如`int/int`）并不精确，但是将有理数表示为一`Bignum`对的类至少在理论上是“精确的”。

实物呢？没有办法准确地表示实数，因为几乎所有的实数都是不可计算的。我们可以用计算机做的最好的事情就是可计算的数字。这需要将一个数字表示为某种算法。虽然这在理论上可能有用，但从实践的角度来看，它根本没用。

**第二个附录**
开始的地方是标准。C++03 和 C++11 都定义`is_exact`为

> 如果类型使用精确表示，则为真。

这既模糊又循环。这是没有意义的。并非完全没有意义的是整数类型（`char`, `short`, `int`, `long`, 等）对于法令来说是“精确的”：

> 所有整数类型都是精确的，...

其他算术类型呢？首先要注意的是，唯一的其他算术类型是浮点类型`float`、`double`和`long double`(3.9.1/8)：

> 共有三种浮点类型：`float`、`double`和`long double`。...浮点类型的值表示是实现定义的。整数和浮点类型统称为算术类型。

C++ 中浮点类型的含义非常模糊。与 Fortran 比较：

> 实数据是处理器对实数值的近似值。

与 ISO/IEC 10967-1 语言无关算术（C++ 标准在脚注中引用，但从不作为规范性参考）进行比较：

> 浮点类型*F*应该是 ℝ 的有限子集。

另一方面，关于浮点类型应该表示的内容，C++ 没有实际意义。据我所知，一个实现可以通过`float`为`int`、的`double`同义词`long`和.`long double``long long`

再次来自标准`is_exact`：

> ...但并非所有确切类型都是整数。例如，有理和固定指数表示是精确的但不是整数。

这显然不适用于用户开发的扩展，原因很简单，用户不允许定义`std::whatever<MyType>`. 这样做，您正在调用未定义的行为。这个最后的条款只能与实现有关

*   以某种特殊的方式定义`float`、`double`和，或`long double`
*   提供一些非标准的有理或定点类型作为算术类型，并决定`std::numeric_limits<non_standard_type>`为这些非标准扩展提供一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T15:55:44.073

我建议 is_exact 为真，如果该类型的所有文字都有其确切值。所以 is_exact 对于浮点类型是假的，因为字面量 0.1 的值不完全是 0.1。

根据 Christian Rau 的评论，当类型的任何两个值之间的四个算术运算的结果超出范围或可以使用该类型的运算定义精确表示时，我们可以改为将 is_exact 定义为 true（即，截断整数除法，无符号环绕）。通过这个定义，您可以发现浮点运算被*定义*为产生最接近的可表示值。不 ：-）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T23:37:55.717

精确的问题不限于 C，所以让我们进一步看。

Germane 关于修订标准的讨论分开，不精确必须适用于需要舍入以表示具有相同类型的结果的数学运算。例如，Scheme 通过精确运算和精确字面常量来定义精确/不精确，参见 R5RS §6。[来自http://www.schemers.org/Documents/Standards/R5RS/HTML](http://www.schemers.org/Documents/Standards/R5RS/HTML)的标准程序

对于我们的情况，`double x=0.1`我们要么认为 0.1 是一个定义明确的双精度字面量，要么就像在 Scheme 中那样，该字面量是由不精确的编译时操作形成的不精确的常量（四舍五入到最接近的双精度操作 1/10 的结果，这很好Q) 中定义。所以我们总是以运营告终。

让我们专注于 +，其他可以通过 + 和 group 属性在数学上定义。

不精确的可能定义可能是：

```
If there exists any pair of values (a,b) of a type such that a+b-a-b != 0,
then this type is inexact (in the sense that + operation is inexact). 
```

对于我们知道的每一个浮点表示（nan 和 inf 分开的微不足道的情况），显然存在这样的对，所以我们可以说浮点（操作）是不精确的。

对于定义明确的无符号算术模型，+ 是精确的。

对于带符号的 int，我们在溢出的情况下会遇到 UB 的问题，因此不能保证准确性......除非我们改进规则以应对这种破碎的算术模型：

```
If there exists any pair (a,b) such that (a+b) is well defined
and a+b-a-b != 0,
then the + operation is inexact. 
```

上述明确定义也可以帮助我们扩展到其他操作，但这并不是必需的。
然后，我们将不得不将 / 的情况视为假多态性而不是不精确性
（/ 被定义为 int 的欧几里得除法的商）。

当然，这不是官方规定，这个答案的有效性仅限于理性思考的努力

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T20:40:28.927

C++ 标准中给出的定义似乎相当明确：

> `static constexpr bool is_exact;`
> 
> 如果类型使用精确表示，则为真。所有整数类型都是精确的，但并非所有精确类型都是整数。例如，有理和固定指数表示是精确的但不是整数。
> 
> 对所有专业都有意义。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-11T02:36:38.073

在 C++ 中，int 类型用于表示数学整数类型（即 {..., -1, 0, 1, ...} 集合中的一个）。由于实现的实际限制，该语言定义了该类型应保存[的值的最小范围](http://www.cplusplus.com/doc/tutorial/variables/)，并且该范围内的所有有效值必须在所有已知架构上无歧义地表示。

该标准还定义了用于保存浮点数的类型，每个类型都有自己的有效值范围。您找不到的是有效浮点数列表。同样，由于实际限制，该标准允许这些类型的近似值。许多人试图说只有 IEEE 浮点标准可以表示的数字才是这些类型的精确值，但这不是标准的一部分。尽管在二进制计算机上实现该语言确实有一个标准来表示双精度和浮点数，但该语言中没有任何内容表明它必须在二进制计算机上实现。换句话说，浮点数不是由 IEEE 标准定义的，IEEE 标准只是一个可接受的实现。像这样，

严格来说，T 不能是判断类型是否为“is_exact”的唯一论据，但我们可以推断出其他一些论据。因为您可能正在使用具有标准硬件和任何公开可用的 C++ 编译器的二进制计算机，所以当您分配 0.1 的两倍值（在浮点类型的可接受范围内）时，这不是计算机将在计算中使用该变量。它使用 IEEE 标准定义的最接近的近似值。当然，如果您将文字与自身进行比较，您的编译器应该返回 true，因为 IEEE 标准非常明确。我们知道计算机没有无限的精度，因此我们期望值为 0.1 的计算将不会 t 必然以与文字值相同的近似表示结束。输入可怕的 epsilon 比较。

为了实际回答您的问题，我想说，对于任何需要进行 epsilon 比较来测试近似相等性的类型，is_exact 应该返回 false。如果该类型的严格比较就足够了，它应该返回 true。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-12T20:18:10.857

**`std::numeric_limits<T>::is_exact`应该是`false`当且仅当`T`的定义允许可能无法存储的值。**

C++ 认为任何浮点文字都是其类型的有效值。并且允许实现决定哪些值具有精确的存储表示。

因此，对于允许范围内的每个实数（例如`2.0`or `0.2`），C++**始终**承诺该数字是有效的`double`，并且**从不**承诺该值可以准确存储。

*这意味着问题中做出的两个假设——虽然对于普遍存在的[IEEE 浮点](http://en.wikipedia.org/wiki/IEEE_floating_point)标准是**正确的——但对于 C++ 定义是不正确的：***

> 我确信我可以将 a`2`完全存储在 double 中。
> 
> 然后我可以将 [it] 除以 [ `10`double**不会]***准确地*保持数学结果。*

# jquery - 如何在子模板中的 JavaScript 标记之前从布局模板加载带有 Assetic 的 jQuery？

> ID：14203662
> 
> 赞同：1
> 
> 时间：2013-01-07T20:39:00.210
> 
> 标签：jquery, symfony, twig, assetic

正如我们在[Symfony2 文档](http://symfony.com/doc/2.0/book/templating.html#including-stylesheets-and-javascripts-in-twig)中所读到的，JavaScript 文件必须在 body 标记的底部声明。

但是，如果我在布局模板中声明 jQuery 库，并且如果我想在子模板中使用 jQuery，则会出现以下错误：

> $ 未定义

似乎 jQuery 是在我的脚本标记之后加载的。当我在 jQuery 文件的顶部放置一条警报消息时，会显示警报。

知道之前加载 jQuery 吗？

在我的基础、布局和子模板下方找到。

应用程序/资源/视图/layout.html.twig：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        {% block stylesheets %}
                {# ... #}
        {% endblock %}
    </head>

    <body>            
        <div id="container">
            {# ... #}
        </div>

        {% block javascripts %}
        {% endblock %}
    </body>
</html> 
```

src/MyBundle/resources/views/layout.html.twig：

```
{% extends "::layout.html.twig" %}

{% block main %}
    {% block mybundle_body %}
    {% endblock %}
{% endblock %}

{% block javascripts %} 
    {% javascripts
        '@MyBlogBundle/Resources/public/js/jquery-1.8.3.min.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock javascripts %} 
```

src/MyBundle/resources/views/MyBundle/modify.html.twig：

```
{% extends "MyBundle::layout.html.twig" %}

{% block mybundle_body %}

    <script type="text/javascript">
    // Enable the file uploader
    $(function() { // my error here : $ is not defined
        new PunkAveFileUploader({ 
            {# ... #}
        });
    });
    </script>
{% endblock %} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T07:55:20.023

好吧，就像你说的，jQuery 是在你的标签**之后**加载的`<script>`，所以当你的脚本尝试使用 jQuery（带`$`符号）时，jQuery 还没有定义。

我会移动`{% block javascripts %}`到头部标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T09:04:43.327

你可以建立一个新的继承。所以你的脚本将永远在你的 jQuery 之后。

```
{% block javascripts %} 
    {% javascripts
        '@MyBlogBundle/Resources/public/js/jquery-1.8.3.min.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
    {% block script %}
    {% endblock script %}
{% endblock javascripts %} 
```

src/MyBundle/resources/views/MyBundle/modify.html.twig：

```
{% extends "MyBundle::layout.html.twig" %}

{% block mybundle_body %}
   //some stuff
{% endblock %}

{% block script %}

<script type="text/javascript">
    // Enable the file uploader
    $(function() { // my error here : $ is not defined
        new PunkAveFileUploader({ 
            {# ... #}
        });
    });
    </script>
{% endblock %} 
```

# objective-c - 多个 valueForKey：调用给出与 valueForKeyPath 不同的结果：使用相同的键

> ID：14203663
> 
> 赞同：3
> 
> 时间：2013-01-07T20:39:10.080
> 
> 标签：objective-c, cocoa, nsarray, key-value-coding, abperson

在 OS X (Mac 10.8.2) 中，我添加了一个类别以`ABPerson`将电话号码作为对象数组返回`Phone`。该`Phone`对象有两个属性，`label`和`value`。我想获取所有电话号码并过滤它们以仅包含`label`与输入匹配的电话号码。

`valueForKey:`如果我在整个`ABPerson`s 数组或带有键的个人上使用嵌套调用`@"phones"`and `@"label"`，那么我会得到所需的结果。但是，如果我将`valueForKey:`s 连接到单个`valueForKeyPath:`，那么在搜索整个数组时我仍然会得到正确的结果，但**在评估单个 person 对象时不会**：

```
 #import <Cocoa/Cocoa.h>
    #import <AddressBook/AddressBook.h>

    @interface Phone : NSObject
    @property (retain) NSString *label;
    @property (retain) NSString *value;
    @end

    @implementation Phone
    - (void)dealloc {
        self.label = nil;
        self.value = nil;
        [super dealloc];
    }
    @end

    @interface ABPerson (phones)
    - (NSArray *)phones;
    @end

    @implementation ABPerson (phones)
    - (NSArray *)phones {
        NSMutableArray *phones = [NSMutableArray array];
        ABMultiValue *values = [self valueForProperty:kABPhoneProperty];
        for (NSInteger i = 0; i < [values count]; i++) {
            Phone *phone = [[Phone alloc] init];
            phone.label = ABLocalizedPropertyOrLabel([values labelAtIndex:i]);
            phone.value = [values valueAtIndex:i];
            [phones addObject:phone];
            [phone release];
        }
        return [NSArray arrayWithArray:phones];
    }
    @end

    int main(int argc, char *argv[]) {
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

        NSArray *people = [[ABAddressBook sharedAddressBook] people];
        ABPerson *person = [people objectAtIndex:0];

        NSArray *a0 = [[people valueForKey:@"phones"] valueForKey:@"label"];
        NSArray *a1 = [people valueForKeyPath:@"phones.label"];
        NSLog(@"a0 == a1: %d", [a0 isEqualTo:a1]);

        NSArray *a2 = [[person valueForKey:@"phones"] valueForKey:@"label"];
        NSArray *a3 = [person valueForKeyPath:@"phones.label"];
        NSLog(@"a2 == a3: %d", [a2 isEqualTo:a3]);

        NSLog(@"people count                                         : %3ld", [people count]);
        NSLog(@"people phones label count   (valueForKey.valueForKey): %3ld", [a0 count]);
        NSLog(@"people phones label count           (valueForKeyPath): %3ld", [a1 count]);
        NSLog(@"person phones label count   (valueForKey.valueForKey): %3ld", [a2 count]);
        NSLog(@"person phones label count           (valueForKeyPath): %3ld", [a3 count]);
        NSLog(@"----------------------------------------------------------");
        NSLog(@"people phones label objectAtIndex:0 (valueForKeyPath): %@", [a1 objectAtIndex:0]);
        NSLog(@"person phones label         (valueForKey.valueForKey): %@", a2);
        NSLog(@"person phones label                 (valueForKeyPath): %@", a3);

        [pool release];
        return 0;
    } 
```

这输出：

```
2013-01-07 15:03:42.537 test[51919:303] a0 == a1: 1
2013-01-07 15:03:42.540 test[51919:303] a2 == a3: 0
2013-01-07 15:03:42.541 test[51919:303] people count                                         : 200
2013-01-07 15:03:42.543 test[51919:303] people phones label count   (valueForKey.valueForKey): 200
2013-01-07 15:03:42.544 test[51919:303] people phones label count           (valueForKeyPath): 200
2013-01-07 15:03:42.545 test[51919:303] person phones label count   (valueForKey.valueForKey):   2
2013-01-07 15:03:42.546 test[51919:303] person phones label count           (valueForKeyPath):   0
2013-01-07 15:03:42.547 test[51919:303] ----------------------------------------------------------
2013-01-07 15:03:42.548 test[51919:303] people phones label objectAtIndex:0 (valueForKeyPath): (
    mobile,
    home
)
2013-01-07 15:03:42.549 test[51919:303] person phones label         (valueForKey.valueForKey): (
    mobile,
    home
)
2013-01-07 15:03:42.551 test[51919:303] person phones label                 (valueForKeyPath): (null) 
```

为什么不`[[person valueForKey:@"phones"] valueForKey:@"label"]`等于`[person valueForKeyPath:@"phones.label"]`？这很重要，因为我想使用完整的`@"phone.label"`密钥路径对所有联系人使用谓词过滤器，如下所示：

```
 NSString *value = @"home";
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY phones.label == %@", value];
    NSArray *a4 = [people filteredArrayUsingPredicate:predicate]; 
```

在此示例中，`a4`始终为空（使用不带“ANY”标志的谓词仍会导致过滤后的数组为空）。我相信这是因为`filteredArrayUsingPredicate:`本质上是在评估每个对象（人），`valueForKeyPath:`并且如上所述，这不适用于单个人对象。它是否正确？

如果有人可以阐明对象失败`valueForKeyPath:`的原因`ABPerson`，或者提供一个谓词来过滤返回所需结果的人员数组，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:40:57.670

这是一个相当古老的问题`ABRecord`。[（从 2007 年开始](http://www.cocoabuilder.com/archive/cocoa/182890-problem-accessing-category-method-with-bindings.html)查看这个线程；我相信可能会回到 10.2 的原始代码。）它们会覆盖`valueForKeyPath:`并且它不会以默认方式运行。密钥必须列在`+properties`. 虽然您可以添加自己的属性，但这并没有真正的帮助。它将返回在数据库中找到的结果。它永远不会调用您的类别方法。添加您自己的属性会修改 AB 数据库模式，因此无论如何它都是一个非常大的锤子。您绝对不应该将电话号码复制到单独的属性中。

我的建议是包装`ABPerson`到另一个对象中并对其执行查询。这将使您对记录有更多的控制权。

顺便说一句，对于一个明显的问题“但是为什么当你调用它时它会起作用`people`？” 那是因为您正在使用*另一个*专门编写的版本`valueForKeyPath:`，即`NSArray`覆盖的版本。它调用`valueForKey:`每条记录，并且`ABPerson`不会覆盖`valueForKey:`，只是`valueForKeyPath:`. 很奇怪吧？

如果这给您带来麻烦，您应该打开一个雷达 (bugreport.apple.com)。只有这样才能改变这种情况。

这是[另一篇](http://www.gladimdim.org/2012/01/cocoa-bindings-for-non-standart-objects.html)针对同一问题的博客文章。他是子类化`ABPerson`而不是包装它。由于`ABPerson`toll-free 桥接到`ABPersonRef`，并且没有明确说您可以对其进行子类化，因此我可能会改用包装器。但是博客文章可能会让您对这个问题有更多的了解，并且子类化可能很好。有关更多信息，请参阅有关此问题的[更古老的线程](http://www.cocoabuilder.com/archive/cocoa/115235-abperson-sub-classable.html)。

# jquery - jQuery change() 参数

> ID：14203665
> 
> 赞同：0
> 
> 时间：2013-01-07T20:39:37.560
> 
> 标签：jquery, parameters

我有一个问题，我创建了一个用户可以多次创建的 div。

```
var innerdiv = $('<div>');
innerdiv.attr('class','dropzoneobject');
innerdiv.attr('onclick', 'changeText(this)').appendTo(div); 
```

这个 div 有一个以 this 为参数的 onclick 动作。

```
function changeText(object) {
var editor = document.getElementById('editortools');
var display = editor.style.display = 'block';
var text = object.firstChild;   

$('#color').change(function(object) {
var color = document.getElementById('color').value;
var text = object.firstChild;
text.style.color = color;   
    });
            } 
```

在函数 changeText 中，我可以通过 onclick 事件从 div 获得的对象参数发出警报并执行所有操作。

但是在change（）函数中..对象参数不见了！:(

我的问题：如何在第二个函数中获得相同的对象？

```
function changeText(object) {
alert(object);
//I can see the object !
$('#color').change(function() {
alert(object);
// no object here :C
});
} 
```

修复了它:) 这是有同样问题的窥视代码

```
function changeText(object) {
            selectedDiv = object;
            $("#editortools").fadeIn();
        }

        var selectedDiv = null;

        $(document).ready(function() {
            $('#color').change(function() {
                if(selectedDiv != null){
                    selectedDiv.style.color = $('#color').val();
                }
            }); 
```

# haskell - 生成随机值列表并获得一个新的生成器

> ID：14203666
> 
> 赞同：13
> 
> 时间：2013-01-07T20:39:39.563
> 
> 标签：haskell, random

我正在使用我的应用程序中的类型类来生成随机数`System.Random`。`Random`但是我想用一个函数生成一个任意长度的随机浮点列表`randoms :: StdGen -> Int -> ([Float], StdGen)`

没有获得新生成器的限制，我可以轻松编写 `randoms gen n = (take n $ randoms gen) :: [Float]`

然而，这给我留下了与我开始时相同的随机生成器，这意味着如果我要连续两次运行这个函数，我会得到相同的列表，除非我去其他地方使用生成器来获得一个新的。

如何生成无限（或任意长度）的随机值列表，同时“刷新”我的随机生成器。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-07T20:46:42.397

好吧，让我们看看您拥有的功能：

```
random :: StdGen -> (Float, StdGen)  -- From System.Random 
```

我们可以将其包装在`State`monad 中以获得有状态的计算：

```
state :: (s -> (a, s)) -> State s a  -- From Control.Monad.Trans.State

random' :: State StdGen Float
random' = state random 
```

现在，我们可以使用以下方法生成一堆浮点数`replicateM`：

```
replicateM :: (Monad m) => Int -> m a -> m [a]  -- From Control.Monad

randoms' :: Int -> State StdGen [Float]
randoms' n = replicateM n random' 
```

最后，我们解包`State`以取回显式生成器传递：

```
randoms :: Int -> StdGen -> ([Float], StdGen)
randoms n = runState (randoms' n) 
```

如果将所有这些组合到一个函数定义中，您将得到：

```
randoms :: Int -> StdGen -> ([Float], StdGen)
randoms n = runState (replicateM n (state random)) 
```

换句话说，我们可以将这个过程描述为：

*   包裹`random`在`State`单子中
*   复制它`n`的时间
*   打开它

这就是为什么单子是一个如此重要的概念。从 monad 接口的角度来看，起初看起来很棘手的事情往往是简单的计算。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T21:29:14.840

Gabriel 的回答是正确的，这几乎就是 MonadRandom 包的实现方式（使用随机生成器参数化的状态 Monad）。

它可以节省您每次定义它的时间，并且它还带有一个 Monad 转换器，因此您可以将任何其他 Monad 转换为也可以产生随机值的 Monad。

您的示例可以很容易地实现为：

```
(runRand $ take n `fmap` getRandoms) :: RandomGen g => g -> ([Int], g) 
```

StdGen 恰好是 RandomGen 的一个实例，因此您只需将其插入即可！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T21:28:10.780

An alternative without `State` or `split`, using `mapAccumL` from `Data.List` (and `swap` from `Data.Tuple`):

```
nRandoms n gen =  mapAccumL(\g _ -> swap $ random g) gen [1..n] 
```

though I have to say I don't have a convincing argument for why this should be better in any way.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:33:43.733

您可以定义一个函数，其类型与您想要的类型相匹配，尽管更普遍。

```
import System.Random

randoms' :: (RandomGen g, Random a) => g -> Int -> ([a], g)
randoms' g n =
  let (g1, g2) = split g
  in (take n $ randoms g1, g2) 
```

尽管它使用[`split`](http://hackage.haskell.org/packages/archive/random/1.0.1.1/doc/html/System-Random.html#v:split)

> `split :: g -> (g, g)`
> 
> 该`split`操作允许获得两个不同的随机数生成器。这在函数式程序中非常有用（例如，在将随机数生成器向下传递给递归调用时），但在统计上稳健的实现方面所做的工作却很少`split`……</p>

它仍然没有做你想做的事。（我`Bool`在下面的示例中使用以便更容易进行视觉比较。）

```
ghci> g <- getStdGen
ghci> randoms' g 5 :: ([Bool], StdGen)
([False,False,False,True,False],1648254783 2147483398)
ghci> randoms' g 5 :: ([Bool], StdGen)
([False,False,False,True,False],1648254783 2147483398) 
```

请注意，随机数组是相同的。

尽管该函数很麻烦地拆分了生成器，但我们还是立即将其丢弃。相反，`g2`通过将其线程化到后续调用来使用，如

```
ghci> let (a1,g2) = randoms' g 5 :: ([Bool], StdGen)
ghci> let (a2,_) = randoms' g2 5 :: ([Bool], StdGen)
ghci> (a1,a2)
([False,False,False,True,False],[True,True,True,False,True] 
```

如果您的代码在`IO`monad 中运行，则可以[`setStdGen`](http://hackage.haskell.org/packages/archive/random/1.0.1.1/doc/html/System-Random.html#v:setStdGen)在末尾使用替换全局随机数生成器，如

```
myAction :: Int -> IO ([Float],[Float])
myAction n = do
  g <- getStdGen
  let (f1,g2) = randoms' g n
  let (f2,g3) = randoms' g2 n
  setStdGen g3
  return (f1, f2) 
```

线程状态是尴尬且容易出错的。考虑使用`State`或者`ST`如果你有很多重复的样板。

# css - 列表元素中的换行

> ID：14203673
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:40:19.553
> 
> 标签：css

> **可能重复：**
> [是否可以通过 CSS 缩进代码块内的换行？](https://stackoverflow.com/questions/3477625/is-it-possible-to-indent-wrapped-lines-within-code-blocks-via-css)

有没有办法让列表元素中的文本行相互对齐？

![在此处输入图像描述](../Images/5acbf178b1f9be7660e539073af4ced3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:42:42.187

尝试添加这个 CSS：

```
li { list-style-position: outside; } 
```

# sql-server - 由于初始化提供程序时出错，测试连接失败。'OraOLEDB.Oracle.1' 提供程序未在本地计算机上注册

> ID：14203678
> 
> 赞同：1
> 
> 时间：2013-01-07T20:40:32.650
> 
> 标签：sql-server, oracle, ssis, oracle11g

在运行 Windows 7 的笔记本电脑上尝试从 SSIS 2008 连接到 Oracle 11g 数据库时出现此错误。

> 由于初始化提供程序时出错，测试连接失败。'OraOLEDB.Oracle.1' 提供程序未在本地计算机上注册

我被困在这里：我可以使用 TOAD 连接到 Oracle 数据库，但不能从同一台笔记本电脑连接到 SSIS 2008。感谢您对我如何解决问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:52:33.020

在安装 Oracle 时，Oracle ole db 驱动程序并不总是作为标准安装。重新运行您的 oracle 安装并确保您已安装它

# c# - 为什么相同的 msdn C# 示例程序输出与我的不同？

> ID：14203679
> 
> 赞同：1
> 
> 时间：2013-01-07T20:40:35.433
> 
> 标签：c#, boolean

这是一个初学者类型的问题，我很抱歉我的英语不好。

这是程序：

```
using System;
public class BoolTest 
{
    static void Main() 
    {
        Console.Write("Enter a character: "); 
        char c = (char)Console.Read();
        if (Char.IsLetter(c))
        {
            if (Char.IsLower(c))
            {
                Console.WriteLine("The character is lowercase.");
            }
            else
            {
                Console.WriteLine("The character is uppercase.");
            }
        }
        else
        {
            Console.WriteLine("Not an alphabetic character.");
        }
    }
} 
```

MSDN 输出为：

输入一个字符：X

字符是大写的。

其他示例运行可能如下所示：

> 输入一个字符：x
> 
> 字符是小写的。
> 
> 输入一个字符：2
> 
> 该字符不是字母字符。

我的输出没有说明这个版本的代码。如果我在 if 语句之前添加了一个 while(1==1) 行，我会采用三行输出，例如：

> 输入一个字符：X
> 
> 字符是大写的。
> 
> 该字符不是字母字符。
> 
> 该字符不是字母字符。
> 
> 输入一个字符：x
> 
> 字符是小写的。
> 
> 该字符不是字母字符。
> 
> 该字符不是字母字符。
> 
> 输入一个字符：2
> 
> 该字符不是字母字符。
> 
> 该字符不是字母字符。
> 
> 该字符不是字母字符。

我尝试了 else 语句的 Console.ReadLine() 结尾，但不起作用。我还用 while (1==1) 测试了 else 块的注释，我只得到 1 个输出行..

我想知道为什么对于相同的示例代码，输出包含 3 行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:45:26.720

我的第一个答案是错误的 -`Console.Read()`块。从 Visual Studio 运行程序时，您可能只是错过了输出，因为窗口会立即关闭。只需`Console.ReadLine();`在程序末尾附加两次以保持窗口打开。第一个`Console.ReadLine();`将消耗您在角色之后按下的回车，第二个将等到您再次按下回车并因此保持窗口打开。

或者稍微修改一下程序来使用`Console.ReadKey()`——使用

```
var c = Console.ReadKey().KeyChar;

// Insert a line break to get the output on a new line.
Console.WriteLine(); 
```

`Console.ReadLine();`并在程序末尾添加一个。`Console.ReadKey()`在您点击 return 之前不会阻塞，因此无需再消耗新行`Console.ReadLine();`。

**原始答案**

`Console.Read()`不会阻塞，`-1`如果没有可用的字符将立即返回。你可以插入

```
while (!Console.KeyAvailable) { } 
```

就在之前

```
 char c = (char)Console.Read(); 
```

等到一个字符可用。

# jquery - JQuery 自动完成 - 从源中选择多个值

> ID：14203682
> 
> 赞同：0
> 
> 时间：2013-01-07T20:40:53.737
> 
> 标签：jquery, jquery-autocomplete

我是自动完成的新手。我能够从 API 调用中获取数据并将其设置为源，并在基本级别上进行自动完成工作。但是当我选择一个值时，我也希望能够：

1.  在文本输入中显示标签，同时使文本输入值成为源的值。
2.  自动填写其他一些输入。

例如，我有 3 个输入框，其 id 如下：customer、customer_number、customer_representative。我有一个 API 以以下 json 格式返回数据：

```
{"request":
   {"request_type":"whatever",
   "response":[
   {
      "customer_id":"123456",
      "customer_name":"TEST CUSTOMER",
      "customer_account":"ABC987",
      "customer_rep_id":"567",
       "customer_rep_id":"John Smith",
   }
   ]

   }
} 
```

到目前为止，这是我的代码：

```
var url = [API URL W/ PARAMS];
$.getJSON(url, function(data) 
{       
    var src = [];
    $.each(data.response, function(index, value) {
        var customer= data.response[index]['customer_name'];
        src.push(customer);
    });     

    $( "#customer" ).autocomplete({
        source: src
    });
} 
```

这将为客户输入框启用自动完成功能，但值与客户名称相同。在阅读了官方文档（http://api.jqueryui.com/autocomplete/）之后，似乎我应该能够使用 select( event, ui ) 至少填充其他 2 个输入框，但我不知如何。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:09:52.743

Checkout 轻量级 DevBridge jQuery 自动完成功能：[https ://github.com/devbridge/jQuery-Autocomplete](https://github.com/devbridge/jQuery-Autocomplete)

您可以通过您的建议传递任何数据并设置 onSelect 回调以相应地处理值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:47:19.540

在玩了一会儿之后，它终于在我的脑海中点击了。为了实现这两者，我只是将源设为一个多维数组，其中包含我想要检索的额外值，然后添加一个回调函数来填充我想要填写的任何其他字段。

```
 var src = [];
     $.each(data.response, function(index, value) {
    var customer= data.response[index]['customer_name'];

     //Also retrieve other values that I want to use
     var customer_id= data.response[index]['customer_id'];
     var customer_rep_id= data.response[index]['customer_rep_id'];
     var customer_rep_name= data.response[index]['customer_rep_name'];

    //Make this a multi array
    src.push({label: customer, value:customer_id, rep_id = customer_rep_id, rep = customer_rep_name });
});   

//Added a callback function
$( "#customer" ).autocomplete({
    source: src,
    select: AutoCompleteSelectHandler
});

//This function auto-populates other inputs
function AutoCompleteSelectHandler(event, ui) { 
    //Populate rep box
    $("#customer_representative").val(ui.item.customer_rep_name);
 } 
```

# serial-port - 如何在 Arduino 上通过串行方式获取传入字节？

> ID：14203685
> 
> 赞同：3
> 
> 时间：2013-01-07T20:41:20.443
> 
> 标签：serial-port, arduino

我有以下 Arduino 代码。

```
void setup()
{
    Serial.begin(9600);
}

void loop()
{
    if(Serial.available() > 0)
    {
        int b=Serial.read();
        Serial.println(b);
    }
} 
```

如果我打开串行监视器并输入 00000001 我得到输出

```
48

48

48

48

48

48

48

49 
```

好的，首先为什么是 48 行（最后一行是 49 行），其次为什么有这么多行？

我期待得到'1'的简单输出。

如果我将行更改`Serial.println(b);`为`Serial.println(00000001,DEC);`，我会得到我所期望的（即“1”）。但是，如果我将行更改为`Serial.println(b,DEC);`，我会得到与以前相同的奇怪输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:46:11.553

48 和 49 是“0”和“1”的十进制表示。它打印 8 行，因为您在循环中调用 Serial.println。

你的最终目标到底是什么？Serial.read() 正在返回字符，而不是值：[http ://arduino.cc/en/Serial/read](http://arduino.cc/en/Serial/read)

希望这可以帮助！

- 例子：

```
if(Serial.available() > 0)
{ 
    int num = 0;
    for( int i=7; i>=0; i-- )
    {
        if( Serial.read() == '1' )
            num |= (1 << i);
    }
    Serial.println(num);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:38:09.523

您可以通过更改 b = Serial.read() - '0' 来解决这个问题。发生这种情况是因为 arduino 使用的是十进制代码，而不是字符。这是一个转换表：[http](http://www.asciitable.com/) ://www.asciitable.com/ 。

希望我有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:44:22.367

如果我理解正确，您希望接收一个 ascii 字符串 '000001' 并将其转换为整数。以下未经测试的示例将需要回车来指示字符串的结尾。

```
#include<stdio.h>
#include<stdlib.h>

int x=0;
int char_rev;
char buf0[20];

while(buf0[x]!=0) {

    char_rev = Serial.ReadData(buf0[x],1);
    if (char_rev==1) {
        if (buf0[x]=='/r') {
            buf0[x]=0;
        }
        else {             
            x++;
        }
    }        
}
x=atoi(buf0[]);

Serial.Println(x); 
```

# c# - 策略 - Gridview 到 Excel 导出完整记录

> ID：14203688
> 
> 赞同：0
> 
> 时间：2013-01-07T20:41:33.247
> 
> 标签：c#, asp.net, excel, gridview, export

我知道有很多关于从 gridview 导出到 excel 的详细说明的问题，但我找不到我的特殊情况。

我有一个网格视图，它显示来自搜索的五个字段的记录。用户可以在复选框中选中任意数量的记录。单击按钮后，我可以仅将检查的记录成功导出到 Excel。导出为 HTML。我在这里使用 Matt Berseth 的技术：http: [//mattberseth.com/blog/2007/04/export_gridview_to_excel_1.html](http://mattberseth.com/blog/2007/04/export_gridview_to_excel_1.html)

我添加了一个检查记录是否由用户检查，这工作正常。

但我有一个要求，对于导出的检查记录，用户希望查看整个记录（即仅选定记录中的所有字段）。

实现这一目标的好策略是什么？

我已经尝试检索网格视图中的所有字段，并将除五个所需字段之外的所有字段设置为不可见。然后在导出按钮单击事件中，将字段设置为可见并重新绑定。那里没有运气。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:06:06.770

听起来您应该遍历行以查看已检查的行。

```
foreach (GridViewRow row in gridView.Rows) 
{
    if(row.RowType == DataControlRowType.DataRow)
    {
      CheckBox cb = row.FindControl("CheckBoxID") as CheckBox;

      if(cb != null && cb.Checked) 
      {
        // Logic here.
      }
} 
```

从那里，您可以使用几种不同的机制导出到 excel，具体取决于您的需要。如果您只需要 xls 文件，我过去使用过的一个是 NPOI——它是开源的，并为它提供了一个不错的框架。这是他们网站的链接：

[http://npoi.codeplex.com/](http://npoi.codeplex.com/)

- 编辑

阅读您的评论后，也许这会有所帮助。

ASPX 代码：

```
 <asp:GridView ID="gridView" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:TemplateField HeaderText="Checkbox Column">
                <ItemTemplate>
                    <asp:CheckBox ID="CheckBoxID" runat="server" />
                </ItemTemplate>
            </asp:TemplateField> 
            <asp:TemplateField HeaderText="Visible Column">
                <ItemTemplate>
                    <asp:Label ID="lblVisibleColumn"  runat="server" Text='<%# Eval("VisibleColumn")%>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField> 
            <asp:TemplateField HeaderText="Hidden Column" Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblHiddenColumn"  runat="server" Text='<%# Eval("HiddenColumn")%>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField> 
        </Columns>
    </asp:GridView>

    <asp:Button ID="btnExport" runat="server" Text="Export" OnClick="btnExport_Click" /> 
```

后端代码：

```
 public class MyDataColumn
        {
            public string visibleColumn { get; set; }
            public string hiddenColumn { get; set; }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                DataTable dataTable = new DataTable();
                List<MyDataColumn> dataColumns = new List<MyDataColumn>();

                for (int i = 0; i < 10; i++)
                {
                    dataColumns.Add(new MyDataColumn()
                    {
                        visibleColumn = string.Format("Visible Column {0}", i),
                        hiddenColumn = string.Format("Hidden Column {0}", i)
                    });
                }

                gridView.DataSource = dataColumns;
                gridView.DataBind();
            }
        }

        protected void btnExport_Click(object sender, EventArgs e)
        {
            List<MyDataColumn> dataColumnsToExport = new List<MyDataColumn>();

            foreach (GridViewRow row in gridView.Rows) 
            {
                if (row.RowType == DataControlRowType.DataRow)
                {
                    CheckBox cb = row.FindControl("CheckBoxID") as CheckBox;

                    if (cb != null && cb.Checked)
                    {
                        Label lblVisibleColumn = row.FindControl("lblVisibleColumn") as Label;
                        Label lblHiddenColumn = row.FindControl("lblHiddenColumn") as Label;

                        dataColumnsToExport.Add(new MyDataColumn()
                        {
                            visibleColumn = lblVisibleColumn.Text,
                            hiddenColumn = lblHiddenColumn.Text
                        });
                    }
                }
            }

            GridView gridViewToExport = new GridView();
            gridViewToExport.DataSource = dataColumnsToExport;
            gridViewToExport.DataBind();

            //Do Something With gridViewToExport
            //GridViewExportUtil.Export("GridView.xls", gridViewToExport);
        } 
```

如果需要，这应该很容易转换为 DataTable——我使用自己的类来缩短代码。

# apache - 用于压缩具有自定义扩展名的文件的 .htaccess 规则

> ID：14203693
> 
> 赞同：1
> 
> 时间：2013-01-07T20:41:43.550
> 
> 标签：apache, .htaccess, mod-deflate

我`.htaccess`直接从[html5boilerplate.com](http://html5boilerplate.com/)复制了以下文件：

```
<IfModule mod_deflate.c>
    # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
    <IfModule mod_setenvif.c>
        <IfModule mod_headers.c>
          SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
          RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
        </IfModule>
    </IfModule>

    AddOutputFilterByType DEFLATE application/atom+xml \
                                application/javascript \
                                application/json \
                                application/rss+xml \
                                application/vnd.ms-fontobject \
                                application/x-font-ttf \
                                application/xhtml+xml \
                                application/xml \
                                font/opentype \
                                image/svg+xml \
                                image/x-icon \
                                text/css \
                                text/html \
                                text/plain \
                                text/x-component \
                                text/xml
</IfModule> 
```

[YSlow](http://yslow.org/)只显示一个未压缩的文件，它的文件名是`testing.cache`，它的内容是 html 和 css 的混合。我将文件重命名为，`testing.html`文件被压缩得很好。我预计该`testing.cache`文件也会被压缩，因为它属于该`text/html`组（这是我在页面加载时通过 ajax 加载的文件）。所以，我想知道我是否可以这样：

```
<FilesMatch "\.(cache)$">
    someDirectiveToCache .cache file
</FilesMatch> 
```

我查看了[mod_deflate](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)是否有任何匹配的指令，但没有运气。当然我可以保留它，`testing.html`但我想知道它是如何完成的`testing.cache`。另外，我认为`FilesMatch`可以在`<IfModule mod_deflate.c>`模块中使用，因为它可以（测试和使用）在`<IfModule mod_expires.c>`这样的内部使用：

```
<FilesMatch "\.(cache)$">
    ExpiresDefault "access plus 1 hour"
</FilesMatch> 
```

我的 Apache 版本（如果重要）是：**2.2.15**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:47:59.927

我设法让这个工作，实际上很容易。我浏览了所有文档以找到`AddOutputFilter`简单且实际适用于扩展的指令。

2.2 版文档中所述的[AddOutputFilter 指令语法](http://httpd.apache.org/docs/2.2/mod/mod_mime.html)为：

```
AddOutputFilter filter[;filter...] extension [extension] ... 
```

在我`AddOutputFilterByType`添加的指令之后的示例中：

```
AddOutputFilter DEFLATE cache 
```

希望这对将来的某人有所帮助。

# jquery - 如何定义骨干路由的默认行为？

> ID：14203695
> 
> 赞同：2
> 
> 时间：2013-01-07T20:41:47.690
> 
> 标签：jquery, backbone.js

我将backbone.js 用于应用程序的前端。导航规则之一与身份验证流程非常相似：应用程序仅应在有特定信息可用时呈现用户请求的视图。否则，应该呈现另一个视图。信息是否可用可以通过查询服务器来决定。到目前为止我已经尝试过：

```
 //Router table definition, etc...

  var initialize = function(){

    var appRouter = new AppRouter;

    appRouter.on('route:somePage', withInfo(function(){
      //render view for 'somePage'
    }));

  ... 
```

`withInfo`功能如下：

```
function withInfo(f) {
  $.ajax({
    type: 'GET',
    dataType: 'json',
    url: '/path/to/info',
    success: function (data, status, request) {
      var info = $.parseJSON(request.responseText);
      if (info){
        f.call();
      } else {
        var defaultView = new DefaultView();
        defaultView.render();
      }
    }
  });
} 
```

基本上，我想要做的是定义一个具有默认行为的高阶函数。`f`如果默认行为不适用，它应该调用另一个函数（在上面的代码中命名）。但这并没有按预期工作。实际作为参数传递的函数并不总是在第一个代码片段中声明的函数。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:50:34.437

这可能不是最好的“干”方式，但它可以工作并且不需要任何 Backbone 插件，除了已经包含的 Underscore 库。这使用了`_.wrap`函数，它将第一个函数包装在第二个函数中。

```
appRouter.on('route:somePage', _.wrap(function(){
  #render view for some Page
}, withInfo)); 
```

对于`withInfo`函数，唯一改变的行是条件：

```
 function withInfo(f) {
   $.ajax({
     type: 'GET',
     dataType: 'json',
     url: '/path/to/info',
     success: function (data, status, request) {
       var info = $.parseJSON(request.responseText);
       if (info){
         f();
       } else {
         var defaultView = new DefaultView();
         defaultView.render();
      }
     }
   });
 } 
```

# java - 用 google-guice 注入列表的最佳方法是什么？

> ID：14203696
> 
> 赞同：16
> 
> 时间：2013-01-07T20:41:48.773
> 
> 标签：java, dependency-injection, guice

我有三个类`CircleBuilder`，`SquareBuilder`和`TriangleBuilder`实现`ShapeBuilder`接口。

我需要使用 google-guice 用每个类的一个实例初始化我的`FormBuilder`，特别是一个`BuilderList`（扩展）。`List<ShapeBuilder>`

什么是最好的方法？

我知道提供程序的方法和类似的东西：

```
@Provides
FormBuilder provideFormBuilder() {
    DatabaseTransactionLog instance = new FormBuilder ( <numerous parameters> );

    ShapeBuilder builder = null ; 
    builder = new CircleBuilder( <numerous parameters> ) ;  
    instance.addBuilder( builder ) ;

    builder = new SquareBuilder( <numerous parameters> ) ;  
    instance.addBuilder( builder ) ;

    // And so on

    return instance;
} 
```

但这意味着我必须`FormBuilder`手动创建，这违背了使用 guice 的目的（因为`FormBuilder`是我的对象图中的顶部元素）。

我很想能够写出这样的东西：

```
bind(BuilderList.class).to(CircleBuilder.class);
bind(BuilderList.class).to(TriangleBuilder.class);
bind(BuilderList.class).to(SquareBuilder.class); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-07T22:33:38.570

考虑[Multibindings](https://github.com/google/guice/wiki/Multibindings)，它将非常像您的代码片段那样收集绑定。没有通过 Multibinder 提供列表，因为 Multibinder 旨在绑定到多个模块中的同一集合，并且 Multibinder 列表的元素顺序将取决于您的模块被评估的顺序。

```
Multibinder<ShapeBuilder> shapeBinder =
    Multibinder.newSetBinder(binder(), ShapeBuilder.class);
shapeBinder.addBinding().to(CircleBuilder.class);
shapeBinder.addBinding().to(TriangleBuilder.class);
shapeBinder.addBinding().to(SquareBuilder.class);

// Now you can inject Set<ShapeBuilder>. 
```

或者，[您的`@Provides`方法](https://github.com/google/guice/wiki/ProvidesMethods)可以接受参数（例如`CircleBuilder`或`Provider<CircleBuilder>`），这样您就可以让 Guice 创建除 List 本身之外的所有内容。Guice 不仅会自动绑定所有绑定类型的 Provider，而且还会在任何`@Provides`方法中注入每个参数。

```
@Provides List<ShapeBuilder> provideShapeBuilders(
    CircleBuilder circleBuilder,
    SquareBuilder squareBuilder,
    TriangleBuilder triangleBuilder,
    Provider<TrapezoidBuilder> trapezoidBuilderProvider) {
  return new ArrayList<ShapeBuilder>(
      circleBuilder,
      squareBuilder,
      triangleBuilder,
      trapezoidBuilderProvider.get(),
      trapezoidBuilderProvider.get());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-22T00:48:11.330

我们可以这样做：-

```
@Override
protected void configure() {
    bind(ShapeBuilder.class).annotatedWith(Names.named("Circle")).to(CircleBuilder.class);
    bind(ShapeBuilder.class).annotatedWith(Names.named("Triangle")).to(TriangleBuilder.class);
    bind(ShapeBuilder.class).annotatedWith(Names.named("Square")).to(SquareBuilder.class);
} 
```

在您的 FormBuilder 类中：-

```
class FormBuilder{
   List<ShapeBuilder> shapeBuilderList;
   @Inject
   public FormBuilder(@Named("Circle")ShapeBuilder circle, @Named("Triangle")ShapeBuilder triangle,@Named("Square")ShapeBuilder square){
       shapeBuilderList = new ArrayList<>();
       //add all of them
       shapeBuilderList.add(circle);
    }
} 
```

# c# - 使用 SqlDependency 与定期轮询表（性能影响）

> ID：14203704
> 
> 赞同：24
> 
> 时间：2013-01-07T20:42:13.897
> 
> 标签：c#, sql-server, sqldependency

在我们的应用程序开发之初，我们大量使用 SqlDependency 来缓存数据库结果，直到通知告诉我们的应用程序获取一个新副本。

在测试过程中，我们注意到 SQL DB 的性能受到 SqlDependency 通知服务的影响。我们缩减了使用 SqlDependency 的表的数量，并注意到性能有了很大的提高。所以，我们认为我们已经用完了它，我们继续前进。我们现在只剩下几张桌子了。

后来，我们发现我们无法缩减将建立依赖关系的用户名的安全访问级别。我们可以为每个 DB 设置多个连接字符串（一个用于依赖项，一个用于应用程序的其余部分），但是对于多个 DB 和 DB 镜像，这是一种痛苦（从 SQL DB 管理员和应用程序开发的角度来看）。

此时，我们只是在考虑基于以下逻辑完全摆脱 SqlDependency：

1.  我们不需要数据已更改的“即时”通知。如果我们在 1 秒内知道，那就足够快了。
2.  通过一些轻微的重构，我们可以将其缩减为仅 1 个表并每秒轮询该表一次。

有人看到这个逻辑有缺陷吗？

与 SqlDependency 相比，每秒轮询一个表会导致更多或更少的数据库负载吗？

有没有人对 SqlDependency 有类似的性能问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T19:23:33.190

我敢尝试回答你的问题。但我不确定你会得到你希望的答案......

我记得早在 90 年代初期，当 Borland 在他们的数据库 Interbase 中推广“回调”这一宏伟的新功能时，它将通过一些非常漂亮的新技术向调用者（Delphi）提供“通知”，其中承诺数据库可以“活跃” '。

这后来被称为“[浪费时间理论](http://www.youtube.com/watch?v=MjbwCS_KKnw)”。

我猜为什么这从未发生过，也许是因为虽然 DBMS 的概念看起来非常有前途，但数据库是您只能扩展而不是水平扩展的层之一。

所以编程语言来拯救。或者更确切地说，是面向服务架构 (SOA) 的理念。许多人将 SOA 与“Web 服务”混为一谈，这确实是这个新概念中包含的炒作。

但是，如果您查看 Fiefdom/Emissary 设计模式（或重命名 Master/Agent 模式以使其听起来更酷和更专业），您会发现其主要思想是对其资源（读取数据库）进行独占控制，并且所有调用正在通过一个单一的数据适配器汇集。

显然，这样的设计根本不适用于触发器或任何回调框架。

但我认为你应该重新考虑你的整个设计。如果您通过单个“DataLayer”汇集所有操作和所有调用，可能使用实体框架，并且可能在缓存机制之上，您将不必依赖数据库将消息转发回食物链。

为了展示“以数据库为中心”时事情会变得多么奇怪，这里有一个极端的实际例子，说明如何不发送电子邮件，很久以前写的，由我印象不深的编码员写的：

事实 1：Sql Server 可以发送电子邮件。

事实 2：Asp3 编码器不知道这是否或如何在 VbScript 中完成。

Asp3：读取文本框电子邮件地址，发送到 com+ 层

Com+：获取电子邮件地址并转发到数据层

数据层：获取电子邮件地址并转发到存储过程

Sproc：获取电子邮件地址并转发到 sql 函数

功能：做奇怪的子字符串检查电子邮件地址是否有 @ 。在里面。返回真或假。

Sproc：返回一个记录集，其中一列一行包含 1 或 0

数据层：按原样返回表。

Com+：将值为1或0的第一列和第一行转换为真或假

Asp3：如果为真，则将带有电子邮件主题和电子邮件文本的电子邮件地址发送到 com+

Com+：将准确的信息发送到数据层

数据层：调用存储过程..

Sproc：调用一个sql函数...

功能：使用sql server email agent发送邮件

如果你读到这里，我的建议是让 sql server 管理表、关系、索引和事务。它非常擅长这一点。除了这些任务之外，我确实在存储过程中包含游标，通过适当的代码可以更好地处理。

# drupal - 将内容从开发复制到 Drupal 中的实时站点

> ID：14203707
> 
> 赞同：2
> 
> 时间：2013-01-07T20:42:36.647
> 
> 标签：drupal, drupal-6, migrate

我们有几个 Drupal 6 站点。在大多数网站上，我们都会有一些内容编辑器，他们会以最佳方式登录开发/测试网站并创建内容。大多数只是普通的香草页面。将这些新创建的页面迁移到实时服务器的最佳方法是什么？我知道有部署模块以及备份和迁移。这些是事实上的标准吗？我想知道是否还有其他我可能会忽略的东西，或者是否有更好/更简单的解决方案。我只对移动内容感兴趣。我们将使用 GIT 来移动代码，并使用功能模块来迁移管理员更改。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:58:11.740

过去我使用过 node_export，最近我发现（在 drupal 7 中）uuid 模块非常宝贵。这意味着您可以跟踪内容，即使在您移动它时 nid 发生了变化。

也有一些遗留模块也做得很好，但它们的功能确实被你提到的模块和上面的模块所超越。

如果您使用 cck 添加的字段创建所有内容，那么您应该没有问题。我个人使用 node_export 和功能来轻松导入和更新。

您可能要在 node_export 上查找的一个问题是在新站点上导入时，如果找到具有相同 uuid 的节点（即您正在执行和更新），则默认是创建一个新节点。我更喜欢创建一个新的修订版。值得追踪该设置（它在 d7 中也有可能在 d6 中）。

编辑： node_export 目前不能很好地导出面板，如果有的话 - 以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:46:24.707

这取决于节点的结构和多样性（哪种类型的字段有多少，节点类型有多少）。我的第一次尝试是在开发站点上生成一个带有 XML 输出（[views_datasource.module](http://drupal.org/project/views_datasource)或[views_data_export](http://drupal.org/project/views_data_export)）的视图，并使用[feeds.module](http://drupal.org/project/feeds)在实时站点上进行 XML 导入。

上述 XML 导出模块适用于 D6 和 D7。在 Drupal 6 中，我使用[views_bonus.module](https://drupal.org/project/views_bonus)进行 XML 导出。

# api - 是否有包含全球公共/银行假日的综合 API 或 JSON/XML 列表？

> ID：14203708
> 
> 赞同：36
> 
> 时间：2013-01-07T20:42:39.533
> 
> 标签：api, calendar

当我正在构建一个包含日历作为其功能之一并且可以在世界各地使用的网络应用程序时，为了方便用户，我希望他们轻松地包括他们当地的假期。理想情况下，我只想存储他们的国家并从 API 中提取列表。

理想的 API 是根据请求返回给定年份和国家/地区的银行假期。

到目前为止我发现了什么：

## **[wikipedia.org - 假日国家列表](http://en.wikipedia.org/wiki/List_of_holidays_by_country)**

*   不错的列表，可能是未来几年的噩梦。

* * *

## **[bank-holidays.com](http://www.bank-holidays.com)**

*   商业供应商似乎拥有一切，尽管更新后的提要的定价尚不清楚。还没有回复我的邮件。公开的价格点是 250 欧元，但每次下载/更新。

* * *

## **谷歌日历列表**

例如 en.german%23holiday@group.v.calendar.google.com 看起来不错，但并不总是完全最新，并且不确定是否可以使用该信息。

谷歌支持的国家：澳大利亚、奥地利、巴西、柬埔寨、加拿大、中国、基督教、丹麦、荷兰、芬兰、法国、德国、希腊、香港 (C)、香港、印度、印度尼西亚、伊朗、爱尔兰、伊斯兰、意大利、日本、犹太人、马来西亚、墨西哥、新西兰、挪威、菲律宾、波兰、葡萄牙、俄罗斯、新加坡、南非、韩国、西班牙、瑞典、台湾、泰国、英国、美国和越南假期

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-22T14:10:00.667

[Enrico 服务](http://kayaposoft.com/enrico/)看起来很有希望，至少对于没有高可靠性需求的小站点来说

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-27T09:13:43.897

WebCal.fi 有大约 30 个国家/地区的假期和其他以 XML、JSON 和其他一些格式提供的内容，更多国家/地区即将推出。免费或至少便宜。

[http://www.webcal.fi/en-US/other_file_formats.php](http://www.webcal.fi/en-US/other_file_formats.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-18T04:21:33.753

可能：[http ://www.timeanddate.com/services/api/holiday-api.html](http://www.timeanddate.com/services/api/holiday-api.html)

```
$100 / year
Ability to get lists of holidays for one country, selected at time of ordering.
100,000 requests
1 Country 
```

*（不知道如何看待定价，对我来说看起来很贵）*

# ios - NSURLConnection sendSynchronousRequest 响应在无效凭据上为零

> ID：14203712
> 
> 赞同：2
> 
> 时间：2013-01-07T20:42:55.163
> 
> 标签：ios, nsurlconnection

我遇到了一个奇怪的行为，使用`sendSynchronousRequest`或`sendAsynchronousRequest`使用无效的凭据会使 nsurlresponse 为零。但是`[[NSURLConnection alloc] initWithRequest:request delegate:self];`我得到 401 响应代码的旧方法。

使用 `sendSynchronousRequest`or的错误值`sendAsynchronousRequest`是

> `Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x756ecb0 {NSErrorFailingURLKey=myurl, NSErrorFailingURLStringKey=myurl, NSUnderlyingError=0x75704d0 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012.)"`

有人知道为什么会这样吗？对此的任何信息表示赞赏。我期待收到来自 `sendSynchronousRequest`或的 401 响应`sendAsynchronousRequest`

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T14:01:14.520

当`WWW-Authenticate:`HTTP 标头与 401 响应一起返回时会导致此错误，要求用户交互以输入有效凭据。处理 HTTP标`NSURLConnection`头和响应正文，将响应数据作为`NSData`对象正确返回，但将`returningResponse`对象保留为`nil`.

根据 Apple 的[Foundation Constants Reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003793-CH3g-SW40)，错误 -1012 是：

> `NSURLErrorUserCancelledAuthentication`
> 
> 当用户取消身份验证的异步请求时返回。
> 
> 这通常是通过单击用户名/密码对话框中的“取消”按钮引起的，而不是用户尝试进行身份验证。

我推测它会自动将`WWW-Authenticate:`标头视为用户取消的凭据请求（因为它是[headless](http://en.wikipedia.org/wiki/Headless_computer)）并生成错误。然后应该设置响应的代码路径的其他部分没有执行，因为出现错误。我个人认为这是一个错误或糟糕的设计。应该可以同时获得有效的 HTTP 响应和错误，无论哪种方式，您都会获得有效的 HTTP 响应，因此`returningResponse`应该设置。坏苹果！

# java - 一个 JFrame 中有两个面板？

> ID：14203714
> 
> 赞同：1
> 
> 时间：2013-01-07T20:43:05.553
> 
> 标签：java, swing, panels

我有两个面板，希望它们显示在我的 JFrame 中，但是当我这样尝试时，我只能看到第二个。有人可以帮帮我吗？:(

```
import javax.swing.JFrame;

public class MainWindow {

CardLayout layout;
JFrame frame;
Player panel1;
Block panel2;

public MainWindow() {
    frame = new JFrame("Rechteck");
    panel1 = new Player();
    panel2 = new Block();
    panel1.addKeyListener(new KeyListen(panel1));
    frame.add(panel1);
    frame.add(panel2);
    frame.setSize(500,500);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:49:20.347

您已将两个面板都添加到`BorderLayout.CENTER`您的`JFrame`- 只有一个可以占据该位置。`panel2`在这种情况下，这将是最后一个添加的。

为了让面板均匀地占据空间，您可以使用`GridLayout`：

```
frame.setLayout(new GridLayout(2, 1)); 
```

*另外：*在 Swing 中为组件注册键事件时最好使用[键绑定。](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:45:54.263

创建一个 JPanel 将其添加到 JFrame。将 panel1 和 panel2 添加到新面板。JFrame 只能有一个孩子，通常通过调用 JFrame.setContentPane() 来设置。

# c - 如何使用 JNI/JNA 可以使用的 automake 创建共享库（dylib）？

> ID：14203717
> 
> 赞同：2
> 
> 时间：2013-01-07T20:43:31.203
> 
> 标签：c, shared-libraries, jna, automake, libtool

如何说服 LibTools 生成与 gcc 自动执行的库相同的库？

如果我明确地做事，这会起作用：

```
gcc -o libclique.dylib -shared disc.c  phylip.c Slist.c  clique.c
cp libclique.dylib [JavaTestDir]/libclique.dylib 
```

但如果我这样做：

```
Makefile libclique.la (which is what automake generates)
cp .libs/libclique.1.dylib [JavaTestDir]/libclique.dylib 
```

Java 找到库但找不到入口点。

我阅读了“如何在 automake 脚本中创建共享库 (.so)？” 线程，它有很大帮助。我得到了使用 -shared 标志创建的 dylib（根据生成的 Makefile）。但是当我尝试从 Java Native Access 中使用它时，我得到一个“找不到符号”错误。

查看`libclique.la`Makefile 生成的内容，它似乎没有任何关键信息，只是看起来是链接重载和移动内容以方便后续 C/C++ 编译器步骤（我没有），所以我希望`libclique.1.dylib`成为一个正常运行的动态库。

我猜这就是我出错的地方，但是，鉴于 JNA 直接链接到一个 dylib 并且没有用它编译（根据上面引用的讨论中的示例），似乎所有后续编译步骤都在LibTools 手册没有实际意义。

注意：我在 Mac 上进行测试，但我也必须在 Windows 和 Linux 机器上执行此操作，这就是我尝试将其放入 Automake 的原因。

注意 2：我使用 Eclipse 进行 Java 开发，是的，我确实导入了 dylib。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-06T21:21:08.253

您应该[构建一个插件](https://autotools.io/libtool/plugins.html)，特别是通过

```
libclique_la_LDFLAGS = -avoid-version -module -shared -export-dynamic 
```

这样你告诉 libtool 你想要一个动态加载的模块而不是一个共享库（对于 ELF 是一样的，但对于 Mach-O 不是。）

# actionscript-3 - AS3 Starling：尝试添加视频

> ID：14203719
> 
> 赞同：3
> 
> 时间：2013-01-07T20:43:42.477
> 
> 标签：actionscript-3, flash-builder, starling-framework

我是一个完整的 AS3 / Starling 新手，但我正在尝试（以编程方式）将 FLV 视频文件添加到本质上是闪屏的“背景”。

我在网上找到的示例代码基本上是... var v:Video = new Video(100, 100); this.addChild(v);

这在扩展 flash.display.Sprite 的顶级类中有效，但是我的 Game 类（扩展 starling.display.Spite）失败，抱怨“将 Video 类型的值隐式强制转换为不相关的 DisplayObject 类型。”

奇怪的是，Starling Sprite 类的 addChild 函数的签名与 Flash Sprite 类的签名相同。

所以基本上问题是：为什么我似乎无法将 Video 对象作为孩子添加到 Starling Sprite 类（但成功添加到 Flash Sprite 类）？

我确信答案非常简单......如果我需要添加更多代码或任何东西，请告诉我。或者，如果我正在做的是完全错误的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T23:14:18.300

或者您可以将视频添加到 Starling 上方的 Flash 层：

Starling.current.nativeOverlay.addChild(v);

和

Starling.current.nativeOverlay.removeChild(v);

请记住，您并没有使用 Starling GPU 绘图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T21:00:11.583

这是因为 Starling 框架旨在模仿常规的 Flash DisplayList（虽然没有完全重新创建所有功能）。具体来说，您试图传递对类型对象的引用`starling.display.DisplayObject`而不是`flash.display.DisplayObject`，这会给出适当的错误。

为了使用 Starling 播放视频，您可以将电影的每一帧上传到纹理。在 Starling 的论坛上查看[此主题。](http://forum.starling-framework.org/topic/video-in-starling)

# android - 自定义ActionBar形状android

> ID：14203720
> 
> 赞同：2
> 
> 时间：2013-01-07T20:43:42.333
> 
> 标签：android, android-actionbar

我正在尝试创建一个具有不同形状（不是矩形）的自定义 actionBar，如下图所示，有谁知道指出我正确的方向？

![你怎么能在图片中看到](../Images/c744c709dfff350924f9b85aa690ee3e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:47:57.217

此时，它不再是一个 ActionBar。类似的东西将是自定义视图。它缺少 ActionBar 的许多关键组件，例如应用程序图标和后退箭头，并且缺少 ActionBar 的所有样式。

您可以创建一个[完全自定义的 View 类](http://developer.android.com/training/custom-views/index.html)并使用它，或者制作一个[可重用的布局](http://developer.android.com/training/improving-layouts/reusing-layouts.html)并在任何需要的地方使用 include 标签包含它。

# magento - Magento 产品页面上的自定义错误消息

> ID：14203723
> 
> 赞同：0
> 
> 时间：2013-01-07T20:44:16.357
> 
> 标签：magento

我创建了一个观察者，当特定事件发生时，我需要在产品页面上填充 messages_product_view div。我该如何填充这个div？下面是我需要填充的区域的屏幕截图。

[截图在这里](http://cl.ly/image/262x3P2I0i2c)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:08:00.937

查看 Magento 会话模型，即核心/会话、客户/会话等。

要添加一条消息，您可以使用例如：

```
Mage::getSingleton('core/session')->addSuccess($message); // Add green success message
Mage::getSingleton('core/session')->addError($message); // Add red error message
Mage::getSingleton('core/session')->addNotice($message); // Add yellow notice message 
```

模板文件调用以下内容来呈现会话消息。寻找这个：

```
<?php echo $this->getMessagesBlock()->getGroupedHtml() ?> 
```

消息也可以像这样手动检索：

```
$messages = Mage::getSingleton('core/session')->getMessages(true);
foreach($messages->getItems() as $message)
{ 
   $message->getText();
   //...
} 
```

# playframework-2.0 - 如何从抽象类正确扩展类

> ID：14203724
> 
> 赞同：4
> 
> 时间：2013-01-07T20:44:17.347
> 
> 标签：playframework-2.0, ebean

你好我有这样的东西

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Person extends Model {
@Id  
public int id;

public String name;

public String lastName;
} 
```

和

```
@Entity
public class User extends Person {
public Date registrationDate;

@ManyToMany(mappedBy="holders")
public List<Loan> loans = new ArrayList<Loan>();

public static Finder<Integer, User> find = new Finder<Integer, User>(Integer.class, User.class);
} 
```

首先。该表是按我的意愿创建的，这没关系，但我有两个问题

首先我不能做这样的事情

```
User user = new User();
user.name = "Dawid";
user.save(); 
```

我不能这样做，因为我收到 dtype 不能为 null 但我无法设置它的错误（或者我只是不知道该怎么做）

第二件事是，如果我从 db 添加用户，当我这样做时，我无法通过 id 获取他，我得到 sql 错误导致 where clausule 看起来像这样

```
WHERE t0\. AND t0.id = 1 
```

如您所见，有 t0。点之后什么都没有，这破坏了一切，我不知道它在那里做什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T20:55:36.513

有关信息，请勿`User`用作表名，因为它是许多数据库服务器中的关键字：

```
@Entity
@Table(name = "myUserTable")
public class User extends Person {
...
} 
```

但这不是你的问题。AFAIK，Ebean 仅支持该`SINGLE_TABLE`策略，因此您必须使用此策略，并且您可以使用注释`dtype`在子类上指定鉴别器（即）名称：`@DiscriminatorValue`

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public abstract class Person extends Model {
...
}

@Entity
@DiscriminatorValue("aUser")
public class User extends Person {
...
} 
```

# c# - 仅在页面未显示时打开浏览器

> ID：14203730
> 
> 赞同：0
> 
> 时间：2013-01-07T20:44:40.493
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，我需要使用浏览器应用程序。我正在使用 Process.Start({url}) 方法来执行此操作。

但是，如果 url 已经显示在浏览器中，我不想打开另一个浏览器窗口或选项卡；我想导航到已经打开的浏览器/选项卡。

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:28:42.150

您可以使用以下方法枚举打开的 IE 窗口：

```
SHDocVw.ShellWindows shellWindows = new SHDocVw.ShellWindows();

string filename;

foreach (SHDocVw.InternetExplorer ie in shellWindows)
{
    filename = Path.GetFileNameWithoutExtension(ie.FullName).ToLower();

    if (filename.Equals("iexplore"))
    {
        try
        {
            Uri test = new Uri(ie.LocationURL);
        }
        catch
        {

        }
    }
} 
```

您需要添加对 SHDocVw COM 组件的引用。

此外，如果您使用的是 IE 以外的浏览器，这将不起作用。

另一种方法是使用 GeckoFX [https://bitbucket.org/geckofx](https://bitbucket.org/geckofx)之类的东西或带有 WebBrowser 控件的单独 winform 应用程序，而不是使用 Process.Start

# algorithm - 解析 GIF 栅格数据 - LZW

> ID：14203731
> 
> 赞同：9
> 
> 时间：2013-01-07T20:44:42.863
> 
> 标签：algorithm, gif, decoding, lzw

我一直在尝试在 PHP 中解压缩 GIF，似乎除了 LZW 解压缩之外的所有东西都已完成。我保存了显示的图像：![示例图像](../Images/25e4df9a0d438f99e7e06092dd825a09.png)

此图像是 3 x 5，如下所示：

```
Blue  Black Black
Black Blue  Black
Black Black Black
White White White
White White White 
```

我决定在 Binary 中手动完成并解析这个文件。手动解析的结果如下。我仍然对如何在这里解码栅格数据感到困惑。有人可以分解栅格数据如何成为图像吗？我已经能够分解一张图片，但没有别的（不是这张图片）。我已经发表了我对这应该如何分解的理解，但我显然做错了。

```
01000111 G
01001001 I
01000110 F
00111000 8
00111001 9
01100001 a

Screen Descriptor
WIDTH
00000011 3
00000000

00000101 5
00000000

10010001 GCM (1), CR (001), BPP (001), CD = 2, COLORS = 4

00000000 BGCOLOR Index

00000000 Aspect Ratio

GCM
BLUE
00110101 | 53
00000000 | 0
11000001 | 193

WHITE
11111111 | 255
11111111 | 255
11111111 | 255

BLACK
00000000 | 0
00000000 | 0
00000000 | 0

00000000 | 0
00000000 | 0
00000000 | 0

Extension
00100001 | 21
Function Code
11111001 | F9
Length
00000100 | 4
00000000
00000000
00000000
00000000
Terminator
00000000

Local Descriptor
00101100 Header
XPOS
00000000 | 0
00000000

YPOS
00000000 | 0
00000000

Width
00000011 | 3
00000000

Height
00000101 | 5
00000000

Flags
00000000 (LCM = 0, Interlaced = 0, Sorted = 0, Reserved = 0, Pixel Bits = 0)

RASTER DATA
Initial Code Size
00000010 | 2
Length
00000101 | 5

Data
10000100
01101110
00100111
11000001
01011101

Terminator
00000000

00111011 | ;
00000000 
```

**我的尝试**

```
10000100
01101110
00100111
11000001
01011101 
```

初始代码大小 = 3 一次读取 2 位

```
10
00
Append last bit to first (010)
String becomes 010 or 2\. 2 would be color # 3 or BLACK 
```

在这一点上，我已经错了。第一种颜色应该是蓝色。

我一直在使用的资源：

[http://www.daubnet.com/en/file-format-gif](http://www.daubnet.com/en/file-format-gif) [http://en.wikipedia.org/wiki/Graphics_Interchange_Format](http://en.wikipedia.org/wiki/Graphics_Interchange_Format) [http://www.w3.org/Graphics/GIF/spec-gif87.txt](http://www.w3.org/Graphics/GIF/spec-gif87.txt)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T00:42:31.910

# GIF 解析器

您说您想编写自己的 GIF 解析器以了解其工作原理。我建议您查看任何包含 GIF 阅读器的库的源代码，例如事实上的参考实现[GIFLIB](http://sourceforge.net/projects/giflib/)。相关的源文件是[`dgif_lib.c`](http://sourceforge.net/p/giflib/code/ci/5889d00ac21d92aeea3ded203dfa2b658210a277/tree/lib/dgif_lib.c)；从解码开始[，`slurp`](http://sourceforge.net/p/giflib/code/ci/5889d00ac21d92aeea3ded203dfa2b658210a277/tree/lib/dgif_lib.c#l1056)或者跳转到[LZW解压实现](http://sourceforge.net/p/giflib/code/ci/5889d00ac21d92aeea3ded203dfa2b658210a277/tree/lib/dgif_lib.c#l740)。

# 这是您的图像解码的方式。

我认为问题在于您将输入字节错误地拆分为 LZW 代码。

颜色数为`(0b001 + 1) * 2 = 4`。

代码大小从 2 + 1 = 3 位开始。

所以最初的字典是

```
000 = color 0 = [blue]
001 = color 1 = [white]
010 = color 2 = [black]
011 = color 3 = [black]
100 = clear dictionary
101 = end of data 
```

现在，[GIF 以 LSB 优先顺序将 LZW 代码打包成字节。](https://en.wikipedia.org/w/index.php?title=Lempel%E2%80%93Ziv%E2%80%93Welch&oldid=531967504#Packing_order)因此，第一个代码被存储为第一个字节的 3 个最低有效位；第二个代码作为接下来的 3 位；等等。在您的示例（第一个字节：`0x84`= `10000100`）中，前两个代码是`100`（清晰）和`000`（蓝色）。整个东西

```
01011101 11000001 00100111 01101110 10000100 
```

被分成代码（在读取最高 3 位代码后切换到 4 位组，`111`）为

```
0101 1101 1100 0001 0010 0111 0110 111 010 000 100 
```

这解码为：

```
 last
code code
 100      clear dictionary
 000      output [blue] (1st pixel)
 010  000 new code in table:
              output 010 = [black]
              add 110 = old + 1st byte of new = [blue black] to table
 111  010 new code not in table:
              output last string followed by copy of first byte, [black black]
              add 111 = [black black] to table
              111 is largest possible 3-bit code, so switch to 4 bits
0110 0111 new code in table:
              output 0110 = [blue black]
              add 1000 = old + 1st byte of new = [black black blue] to table
0111 0110 new code in table:
              output 0111 = [black black]
              add 1001 = old + 1st byte of new = [blue black black] to table
... 
```

所以输出开始（包装到 3 列）：

```
blue  black black
black blue  black
black black ... 
```

这就是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-08T14:00:51.070

这个站点是一个关于 GIF 格式的优秀资源，并且对 LZW 压缩和解压缩过程提供了很好的解释：

[http://www.matthewflickinger.com/lab/whatsinagif/index.html](http://www.matthewflickinger.com/lab/whatsinagif/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T22:53:35.390

# 无需编写自己的 GIF 阅读器的解决方案

对于您自己的教化以外的其他用途，试试这个。

## 几点注意事项

*   您的 GIF 文件是 GIF89a。您链接到 GIF87a 规范；89a 规范在[这里](http://www.w3.org/Graphics/GIF/spec-gif89a.txt)。
*   您似乎担心使用库来解析图像会损害性能。这是没有意义的。这些库通常以优化的 C 语言实现；您的手动解决方案将使用 PHP（一种解释性语言）编​​写。
*   你提到了 PCX，像 imagemagick 这样的库确实支持。

## 或者只使用PNG

根据[ZPL 2 编程手册](http://www.zebra.com/id/zebra/na/en/documentlibrary/manuals/en/zpl_ii_programming2.html)，支持 PNG。例如，`~DY`（下载图形）命令采用`b`（格式）参数，其中`P`(PNG) 是一个选项，除了默认的 GRF。另请参阅[将 PNG 图像打印到 zebra 网络打印机](https://stackoverflow.com/questions/8818688/printing-images-png-to-a-network-zebra-printer-zpl-z64-b64)。

有*很多*用于将 GIF 转换为 PNG 的库。您可以使用[ImageMagick（PHP 绑定）](http://www.php.net/imagick)，或者只使用 PHP 函数[`imagecreatefromgif`](http://www.php.net/imagecreatefromgif)和[`imagepng`](http://www.php.net/imagepng).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T20:57:16.533

我无法帮助您进行 LZW 解码，但是仅使用[`imagecreatefromgif()`](http://php.net/imagecreatefromgif)PHP GD 扩展中的库函数来解析 GIF 文件并提取图像数据，然后您可以将其转换为您的目标格式，这不是更容易吗?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T16:18:35.520

您想知道如何在不使用其他人编写的库的情况下进行 LZW 是很好的。LZW 不会逐像素解码图像。它在数据流中查找重复块，将它们保存在字典中并重新引用它们。如果 100 个像素在某处重复，则仅使用一个代码来再现这 100 个像素，而不是像位图 (BMP) 图像那样使用 100 个。这就是为什么 GIF 非常适合图表，其中您可能有许多 100 白色像素系列，然后是一些黑色像素来绘制一条线。另一方面，它对于照片来说很糟糕，因为很少有长时间的重复，而且除非你使用一些复杂的技巧，否则 GIF 通常被限制为 256 色。

压缩文件中使用的代码比原始图像中每个像素的颜色代码长。只是因为长重复块在图表中很常见，才可能进行大规模压缩。

# java - 为什么我的框架是空的？

> ID：14203732
> 
> 赞同：0
> 
> 时间：2013-01-07T20:44:48.220
> 
> 标签：java, swing, frame

我尝试了 2 个小时来制作带有滚动条的 JEditorPane，但我即将放弃！

这是我的代码的一部分：

```
 JEditorPane editorPane = new JEditorPane();
    URL helpURL = GUIMain.class
            .getResource("/resources/einleitungstext1.html");
    this.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    try {
        editorPane.setPage(helpURL);
    } catch (IOException e) {
        System.err.println("Attempted to read a bad URL: " + helpURL);
    }
    editorPane.setEditable(false);
    JScrollPane editorScrollPane = new JScrollPane(editorPane);
    editorScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    editorScrollPane.setMinimumSize(new Dimension(100, 100));
    editorScrollPane.setPreferredSize(new Dimension(main.screenWidth-200, main.screenHeight-200));
    c.gridx = 0;
    c.gridy = 0;
    this.add(editorScrollPane, c);
    this.setVisible(true); 
```

当我这样做时 this.add(editorScrollPane,c) 框架是空的，但是当我这样做时 this.add(editorPane, c) 面板正在显示。即使使用 this.add(new JLabel("test"),c) 框架也是空的。

我的错误在哪里？

谢谢

PS我不能发布整个代码，因为它很大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:42:05.883

1.  编辑器窗格在后台加载它的内容，这可能意味着当容器准备好布局时，内容尚未加载
2.  您正在使用的布局管理器和您提供的约束意味着它将使用滚动窗格的首选大小，这可能不足以满足内容的需要（这是滚动窗格的功能，这是方式它是设计的）。

要么提供限制以`GridBagLayout`鼓励使用更多可用空间，要么提供不依赖于组件首选大小的布局管理器（如`BorderLayout`）

![在此处输入图像描述](../Images/3eeff36309007a771016d80af0c5e1c1.png)

```
public class TestLayout18 {

    public static void main(String[] args) {
        new TestLayout18();
    }

    public TestLayout18() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());

                JEditorPane editorPane = new JEditorPane();
                try {
                    editorPane.setPage(new URL("http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html"));
                } catch (IOException e) {
                    System.err.println("Attempted to read a bad URL");
                }
                editorPane.setEditable(false);
                JScrollPane editorScrollPane = new JScrollPane(editorPane);
                frame.add(editorScrollPane);

                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:53:36.820

在 editorPane 上设置首选大小。scrollPane 正在寻找它的视口大小。您可能还想在框架上设置最小尺寸。

# javascript - 当我拖动时，dragend、dragenter 和 dragleave 立即触发

> ID：14203734
> 
> 赞同：26
> 
> 时间：2013-01-07T20:44:57.573
> 
> 标签：javascript, jquery, html, drag-and-drop, draggable

我正在尝试制作一个可以通过拖放重新定位的元素列表。第一个元素 Box 1 在 100% 的时间里都能正常工作。有时第二个盒子可以工作，但其他盒子都不能按预期工作。一旦您开始拖动它们，它们似乎就会立即触发所有拖动事件。

如果这很重要，我正在使用最新的 Chrome (v23)。

```
var $questionItems = $('.question-item');

$questionItems
  .on('dragstart', startDrag)
  .on('dragend', removeDropSpaces)
  .on('dragenter', toggleDropStyles)
  .on('dragleave', toggleDropStyles);

function startDrag(){
  console.log('dragging...');
  addDropSpaces();
}

function toggleDropStyles(){
  $(this).toggleClass('drag-over');
  console.log(this);
}

function addDropSpaces(){
  $questionItems.after('<div class="empty-drop-target"></div>');
  console.log('drop spaces added');
}

function removeDropSpaces(){
  $('.empty-drop-target').remove();
  console.log('drop spaces removed');
} 
```

这是HTML：

```
<div class="question-item" draggable="true">Box 1: Milk was a bad choice.</div>
<div class="question-item" draggable="true">Box 2: I'm Ron Burgundy?</div>
<div class="question-item" draggable="true">Box 3: You ate the entire wheel of cheese?</div>
<div class="question-item" draggable="true">Box 4: Scotch scotch scotch</div> 
```

这是我的代码的 jsFiddle：http: [//jsfiddle.net/zGSpP/5/](http://jsfiddle.net/zGSpP/5/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-12-22T20:42:08.930

刚刚遇到这个问题 - 这是一个 Chrome 错误，你不能在 dragStart 事件中操作 DOM，否则 dragEnd 会立即触发。我的解决方案原来是 - 使用 setTimeout() 并在你超时的函数内操作 DOM。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-07T21:15:49.743

这似乎是一个 Chrome 错误：[https ://groups.google.com/a/chromium.org/forum/?fromgroups=#!msg/chromium-bugs/YHs3orFC8Dc/ryT25b7J-NwJ](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!msg/chromium-bugs/YHs3orFC8Dc/ryT25b7J-NwJ)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-29T15:52:36.547

不确定这是否是一个错误，但我认为当您在 dragstart 处理程序中更改 DOM 时问题就出现了。我认为第一个框起作用的原因与它的位置在 DOM 中的其他框之前以及当您更改 DOM 时，第一个框的位置（？）不受影响和拖放事件有关可靠地点火。

您将需要对代码进行一些重构，并在 dragenter 事件处理程序中添加 dropSpaces。不过，您需要更改 addDropSpaces 方法以适应它将被多次调用的事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:21:10.230

使用 jQuery 让生活更轻松。这正是您使用 jQueryUI 描述的您想要的。

[http://jqueryui.com/draggable/#sortable](http://jqueryui.com/draggable/#sortable)

允许排序。编码：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Draggable + Sortable</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    ul { list-style-type: none; margin: 0; padding: 0; margin-bottom: 10px; }
    li { margin: 5px; padding: 5px; width: 150px; }
    </style>
    <script>
    $(function() {
        $( "#sortable" ).sortable({
            revert: true
        });
        $( "#draggable" ).draggable({
            connectToSortable: "#sortable",
            helper: "clone",
            revert: "invalid"
        });
        $( "ul, li" ).disableSelection();
    });
    </script>
</head>
<body> 
<ul>
    <li id="draggable" class="ui-state-highlight">Drag me down</li>
</ul>

<ul id="sortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

</body>
</html> 
```

另见：http: [//jqueryui.com/sortable/](http://jqueryui.com/sortable/)

尝试手动添加事件，很长的路要走，例如：

```
$questionItems[0].on('dragstart', startDrag); 
$questionItems[0].on('dragend', removeDropSpaces) 
$questionItems[0].on('dragenter', toggleDropStyles) 
$questionItems[0].on('dragleave', toggleDropStyles); 
$questionItems[1].on('dragstart', startDrag); 
$questionItems[1].on('dragend', removeDropSpaces) 
$questionItems[1].on('dragenter', toggleDropStyles)     
$questionItems[1].on('dragleave', toggleDropStyles); 
```

等只是为了看看效果？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-07T21:21:26.923

您需要防止“事件”冒泡，以免引发其他事件。请参阅[https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

对于 startDrag、toggleDropStyles、removeDropSpaces 函数，你可以这样写：

```
function startDrag(ev) {
   ev.stopPropagation();
   ... your code here ...
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-07T20:57:45.787

改变这个功能

```
function addDropSpaces()
{
  $(this).after('<div class="empty-drop-target"></div>');
} 
```

在您的版本中，您在每个 $questionItems 之后添加该 div。

# java - GWT celltable 加载列表 进表

> ID：14203737
> 
> 赞同：0
> 
> 时间：2013-01-07T20:44:59.313
> 
> 标签：java, string, list, gwt, gwt-celltable

[我在这里](http://google-web-toolkit.googlecode.com/svn/javadoc/2.2/com/google/gwt/user/cellview/client/CellTable.html)阅读了一个 celltable 的示例，它使用这个结构来加载数据：

```
 private static final List<Contact> CONTACTS = Arrays.asList(
  new Contact("John", new Date(80, 4, 12), "123 Fourth Avenue"),
  new Contact("Joe", new Date(85, 2, 22), "22 Lance Ln"),
  new Contact("George", new Date(46, 6, 6), "1600 Pennsylvania Avenue")); 
```

如果我有一个简单的字符串列表，如何将我的列表放入这种类型的结构中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:32:24.140

如果您有一个字符串列表，那么您将在[ListBox](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwListBox)中显示它们。如果您仍打算在 CellTable 中使用它，则将 String 包装在 Model/POJO/Bean 对象中。

```
Example - String "name" is wrapped in "ContactInfo" Bean. 
```

然后，您可以将 ContactInfo 与 CellTable 一起使用。单元小部件都适用于 MVP 设计模型 -> 视图 -> 演示者

```
ContactInfo -> Model
CellTable -> View
ListDataProvider -> Presenter 
```

# css - 如何在被前端框架覆盖的属性上强制用户代理（浏览器）默认？

> ID：14203742
> 
> 赞同：1
> 
> 时间：2013-01-07T20:45:19.350
> 
> 标签：css

我使用[Foundation](http://foundation.zurb.com/)（没有 SCSS）作为我的 Web 项目的前端框架。在自定义方面，我不喜欢修改我的项目引用的任何第三方模块，而是使用 CSS 的级联顺序规则来覆盖我想要覆盖的框架中定义的任何属性。然而，我在这里有一个棘手的场景。

Foundation 禁用了用户代理的`outline`for `text:focused`with属性`text:focused {outline: none !important}`。有什么方法可以在不修改框架的 CSS 的情况下强制使用用户代理的`outline`属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:30:57.403

您不能编写另一个 CSS 规则来将元素的样式重置为默认值。在大多数情况下，您可以定义一个新规则来将样式设置回大多数用户代理默认值：

```
text:focused { outline: solid black 1px; } 
```

不幸的是，您将无法`!important`使用 CSS 覆盖 Foundation 的声明。但是，您可以使用 JavaScript 来做到这一点；像这样的东西：

```
document.theText.style.outline = "solid black 1px"; 
```

（我没有对此进行测试，但如果您提供您的场景的 JSFiddle 演示，我可以测试。）

# python - 检查 for 循环中的字符串是否有多个正则表达式

> ID：14203744
> 
> 赞同：0
> 
> 时间：2013-01-07T20:45:27.750
> 
> 标签：python, regex, string

我正在跟踪某人的日志文件，它们完全是一团糟（没有换行符和分隔符）。所以我做了一些简单的正则表达式来整理日志。日志记录#codes# 现在在一个列表中很好地分开，它们的字符串在一个子字典中附加到它上面。就像这样：

```
Dict [
    0 : [LOGCODE_53 : 'The string etc etc']
] 
```

因为这很容易，所以我也打算直接向它添加一些日志识别。现在我可以匹配 LOGCODE，但问题是代码不会抱怨任何东西，而且通常不同的 LOGCODE 包含相同的输出字符串。

所以我写了一些 REGEX 匹配来检测日志的内容。我现在的问题是；检测大量字符串模式的智慧是什么？可能有大约 110 种不同类型的字符串，它们是如此不同，以至于不可能“超级匹配”它们。如何在字符串上运行 ~110 REGEXes 以找出字符串的意图，从而在逻辑寄存器中索引它们。

有点像；“拿这个 $STRING 并测试这个 $LIST 中的所有 $REGEXes，让我知道哪个 $REGEX(es)（索引）与字符串匹配”。

我的代码：

```
import re

# Open, Read-out and close; Log file
f = open('000000df.log', "rb")
text = f.read()
f.close()

matches = re.findall(r'00([a-zA-Z0-9]{2})::((?:(?!00[a-zA-Z0-9]{2}::).)+)', text)

print 'Matches: ' + str(len(matches))
print '=========================================================================================='

for match in matches:
    submatching = re.findall(r'(.*?)\'s (.*?) connected (.*?) with ZZZ device (.*?)\.', match[1])

    print match[0] + ' >>> ' + match[1]
    print match[0] + ' >>> ' + submatching[0][0] + ', ' + submatching[0][1] + ',',
    print submatching[0][2] + ', ' + submatching[0][3] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:01:41.523

`re.match`,`re.search`并在特定的正则表达式不匹配时`re.findall`返回，因此您可以迭代您可能的正则表达式并测试它们：`None`

```
tests = [
    re.compile(r'...'),
    re.compile(r'...'),
    re.compile(r'...'),
    re.compile(r'...')
]

for test in tests:
    matches = test.findall(your_string):

    if matches:
        print test, 'works' 
```

# c# - 如何将配置输出设置到特殊文件夹（LocalApplicationData）？

> ID：14203749
> 
> 赞同：2
> 
> 时间：2013-01-07T20:45:57.343
> 
> 标签：c#, wcf, configuration, windows-xp, special-folders

有没有办法为我的 WCF 服务设置我的 app.config，以便它输出到[LocalApplicationData 文件夹](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)而无需硬编码任何东西？

`%LOCALAPPDATA%`XP下不行，需要支持XP

我发现这`shell:Local AppData`可行，但我不确定如何将其放入 app.config

我能找到的下一个最接近的是`%APPDATA%`，但我不相信这与 LocalApplicationData 不同

最坏的情况，我可以（但不希望）使用代码来执行此操作（直接使用 SpecialFolders），但我不确定如何在保持其余设置可配置的同时进行设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:16:45.563

您可以从 Environment 对象中获取它。

```
string path;
path = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData); 
```

根据评论编辑：

现在我明白了。您可以创建自己的环境变量以用作配置中路径的一部分。

命令：

```
set mylocalapplicationdata="somewhere" 
```

或 C#：

```
string name = "mylocalapplicationdata";
string value = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData);
Environment.SetEnvironmentVariable(name, value); 
```

在此之后，您可以`%mylocalapplicationdata%`像使用其他系统变量一样使用。

您可以为一个会话（进程）、用户或机器（对于需要管理员权限的机器）设置变量。

更多信息 (MSDN)：http: [//msdn.microsoft.com/en-us/library/z46c489x.aspx](http://msdn.microsoft.com/en-us/library/z46c489x.aspx)

或者，您可以使用这样的字符串：

```
%USERPROFILE%\Local Settings\Application Data 
```

但这仅适用于 windows xp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:22:03.207

我认为没有办法仅使用内置环境变量来获取您想要的信息。从 Windows XP 到 Windows Vista/7 的信息不一致，所以我认为您最好的选择是在安装期间更新您的配置文件，您可以在其中确定操作系统并访问其他 Windows API。

# tomcat - Tomcat 试图访问 Windows Server 2008 上的文件系统

> ID：14203757
> 
> 赞同：0
> 
> 时间：2013-01-07T20:46:29.947
> 
> 标签：tomcat, windows-server-2008, tomcat7, filenotfoundexception

这次我遇到了在 Windows 2008 R2 上作为服务运行的 tomcat7 的问题。我将读取一些存储在`Web-inf/classes/`文件夹下的内部文件。

尽管 tomcat 是从管理员帐户启动的，但我无法读取所需的文件。如果我将它直接放在 C: 驱动器或类文件夹中，它不会计量 - 我一直得到`FileNotFoundException`.

我试图列出文件夹中的所有文件，但它似乎是空的，但事实并非如此。我可以通过资源管理器访问那里。试图在java中读取属性我得到'假'。我一直在努力解决它，不知道出了什么问题。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:08:08.403

对于任何有同样问题的人。似乎 Tomcat 无法与包含空格的路径一起正常工作。它位于“程序文件文件夹”中，它正在寻找的文件位于 web-inf 文件夹下的类中。问候简

# facebook - Facebook PHP SDK 使用独立 - Facebook 会话/cookie 是如何工作的？

> ID：14203758
> 
> 赞同：0
> 
> 时间：2013-01-07T20:46:34.813
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我自己使用 Facebook PHP SDK。我根本不想使用 JS SDK。

因为 getUser(); 即使用户未登录，SDK 也可以返回用户 ID，我选择使用 try/catch 语句来检查用户是否已登录。

```
 try
{
    $me = $CI->facebook->api('/me');
    $CI->our_fb['is_fb']='YES';
    echo "hello";
}
    catch(FacebookApiException $e) 
{               
    echo "catch";
} 
```

此语句包含在我所有文件的全局包含文件中（为简单起见）。

因此，根据具体情况，我会生成一个 Facebook 登录 URL。预期的功能是用户登录 Facebook，授权应用程序，返回到登录 URL 中设置的重定向 URI，此时将执行 try 语句，并设置 $CI->our_fb['is_fb']。

然而，这并没有发生。

*   如果用户已经登录 Facebook 并且该应用程序已获得授权，则它可以完美运行。成功

*   如果用户没有登录到 Facebook，一旦重定向，变量就不会被设置。失败

*   如果用户已登录，但在重定向后未授权应用程序，则未设置变量。失败。

在后两种情况下，如果您只是刷新页面，则设置变量 - SUCCESS。然而，刷新页面是不必要的/毫无意义的额外工作。

我的问题是，如果您需要登录 FB/或授权应用程序，例如您第一次使用 FB 登录时，您有额外的不必要的刷新，我不知道为什么。

我怀疑这与 cookie/会话有关？哪个保存了我认为不会同时自动返回/传递给 SDK 的访问令牌？

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:54:58.590

基本上，cookie 用于保存签名请求，会话用于保存“状态”、“代码”、“访问令牌”、“用户 ID”。如果存在上述情况，PHP SDK 会使用它们，无论它们是否有效。

我认为您的问题在于facebook发送的代码。特别是 base_facebook.php 中的这些行：

```
if ($code && $code != $this->getPersistentData('code')) {
  $access_token = $this->getAccessTokenFromCode($code); 
```

...

```
protected function getAccessTokenFromCode($code, $redirect_uri = null) {
if (empty($code)) {
  return false;
}

if ($redirect_uri === null) {
  $redirect_uri = $this->getCurrentUrl();
}
... 
```

由于 CODE 是针对特定 url 发布的，有时会出现这样的情况：访问者到达 www.example.com。他授予权限并被重定向到 example.com/login。但是代码在那里无效，因此 getUserAccessToken 返回 false。当您刷新页面时，您会得到相同的网址，一切都很好。

您处于不使用 getUser() 的正确轨道上，因为正如我在上面所写的，它是从会话中获取的（如果可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:15:41.553

我看到的方式是，如果用户未登录并且在页面初始加载后登录之前，您将尝试避免刷新。因此，您可以做的是向您网站上的另一个页面发出 ajax 请求，例如 id.php，它只加载 php sdk 并回显 $userid; 然后您可以在登录后获取用户 ID 而无需刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T15:28:49.983

如果您**在 facebook（标签或画布）上有一个应用程序**。PHP SDK 仅在初始加载页面时获取用户 ID，因为 a`signed_request`随请求一起发送到您的应用程序。

但是，当应用程序刷新时，signed_request 会丢失（因为发送它的是 facebook）。

因此，在这种情况下，您可以将 附加`signed_request`到您在应用程序中使用的每个 URL - 但这确实不是最佳的，因为`signed_request`不会重新生成 - 也不会刷新。

您唯一真正的选择是依靠 JS SDK 正确设置 cookie 并允许`getUser`按预期工作。这是必需的，因为您在 Facebook 中被视为第三方应用程序（在 iframe 中），并且大多数浏览器会阻止您设置 cookie - 因此您需要由 JS SDK 为您处理的工作。您可以搜索`cross-domain cookies`或`third-party cookie`了解有关变通办法的说明，但这些变通办法只能通过 JS 脚本和 iframe 管理工作。

此外，请务必正确设置 JS SDK：[通道文件](https://developers.facebook.com/docs/reference/javascript/#channel)、[允许 cookie](https://developers.facebook.com/docs/reference/javascript/FB.init/)和发送 P3P 标头（适用于 IE）。

您还可以检查这个相关问题：[A proper approach to FB auth](https://stackoverflow.com/questions/13351235/a-proper-approach-to-fb-auth)

**关于 website**，大多数情况下都是一样的（但你没有`signed_request`）。此时，请认真考虑使用 JS SDK，因为它更容易。或者，您可以确保您的应用程序流程遵循以下准则：[https ://developers.facebook.com/docs/concepts/login/login-architecture/](https://developers.facebook.com/docs/concepts/login/login-architecture/)

# extjs - 使用多选网格 sencha ext js 4.1

> ID：14203760
> 
> 赞同：0
> 
> 时间：2013-01-07T20:46:52.707
> 
> 标签：extjs, grid, extjs4.1, multi-select, sencha-architect

我是 Sencha 的新手。在我的一个项目中，我必须使用多选网格面板并在网格之间更新商店。我不知道如何实现这一目标。如果有人可以将他们的示例代码甚至显示多选网格用法的链接发送给我，我将不胜感激。我找到了一些，但不幸的是这些链接不使用 Ext JS 4.1。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:12:53.853

首先，看一下 API 文档：

*   [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.RowModel-cfg-mode](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.RowModel-cfg-mode)
*   [http://docs.sencha.com/ext-js/4-1/#!/example](http://docs.sencha.com/ext-js/4-1/#!/example)

然后看无限网格示例：

*   [http://docs.sencha.com/ext-js/4-1/#!/example/grid/infinite-scroll.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/infinite-scroll.html)

奇怪的是，这个例子在网格上使用了一个未记录的“multiSelect”配置......但它可以根据 API 文档在选择模型上定义。

# vb.net - 使用 VB.net 检查表是否存在的 SQLite 查询

> ID：14203765
> 
> 赞同：0
> 
> 时间：2013-01-07T20:47:20.570
> 
> 标签：vb.net, sqlite

我正在编写一个函数来检查 SQLite 数据库文件中是否存在表，如果表不存在则返回 dataout = "Table Not Found in Database" 并继续检查其中的其他表和项目。我有用于检查数据库文件是否存在以及数据库表中是否存在项目的代码，我需要在检查表中是否存在项目之前检查表是否存在。以下是我的代码：

```
 Dim LocalDirectory As String = "bogus"
        Try
        Dim SQLconnect As New SQLite.SQLiteConnection
        Dim SQLcommand As SQLite.SQLiteCommand
        Dim SQLreader As SQLite.SQLiteDataReader
        Dim SQLTablereader As SQLite.SQLiteDataReader
        Dim Table As String
        Dim Name As String
        Dim NameColumn As String
        Dim ValueColumn As String
        Dim LocalFile As String
        Dim NameIndex, ValueIndex As Integer
        Dim dbfile As String

        Table = CPV.GetTokenValue(TokenString, "Table")
        Name = CPV.GetTokenValue(TokenString, "Name")

        If Table = "" Then
            DataOut = "No Datebase Table specified in Tokenstring"
            OK_to_SelectCase = False
            Return 1
        End If

        If Name = "" Then
            DataOut = "No Datebase Entry Name specified in Tokenstring"
            OK_to_SelectCase = False
            Return 1
        End If

        NameColumn = CPV.GetTokenValue(TokenString, "NameColumn")
        If NameColumn = "" Then NameColumn = "name"

        ValueColumn = CPV.GetTokenValue(TokenString, "ValueColumn")
        If ValueColumn = "" Then ValueColumn = "value"

        dbfile = CPV.GetTokenValue(TokenString, "Source File")

        LocalFile = CPV.GetAppPath & "\TempFiles\" & dbfile
        LocalDirectory = CPV.GetAppPath & "\TempFiles\" & Mid(dbfile, 1, dbfile.LastIndexOf("\"))

        If Not System.IO.File.Exists(LocalFile) Then
            If UCase(CPV.GetTokenValue(TokenString, "ON_ABSENT_FILE")) = "TEST MANUALLY" Then
                DataOut = "<MANUAL>"
            Else
                DataOut = "Datebase File failed to downloaded, verify that ADB interface is enumerated and try again"
            End If
            OK_to_SelectCase = False
            Return 1
        End If

        SQLconnect.ConnectionString = "Data Source=" & LocalFile & ";"
        SQLconnect.Open()

        SQLcommand = SQLconnect.CreateCommand

        If UCase(CPV.GetTokenValue(TokenString, "WALmode")) = "TRUE" Then
            SQLcommand.CommandText = "PRAGMA journal_mode=OFF;"
            SQLcommand.ExecuteNonQuery()
        End If

        <I need the code/query here to check if table exists if not return dataout = "Table Not Found in Database" and continue>

        SQLcommand.CommandText = "SELECT * FROM " & Table
        SQLreader = SQLcommand.ExecuteReader()

        NameIndex = ValueIndex = -1

        NameIndex = SQLreader.GetOrdinal(NameColumn)
        ValueIndex = SQLreader.GetOrdinal(ValueColumn)

        DataOut = "Feature Name Not Found in Database"

        While SQLreader.Read
            If SQLreader.Item(NameIndex) = Name Then
                DataOut = SQLreader.Item(ValueIndex)
                Exit While
            End If
        End While

        SQLcommand.Dispose()
        SQLconnect.Close()

    Catch ex As Exception
        CPV.ErrorHandler(ex, "")
    Finally
        If Directory.Exists(LocalDirectory) Then
            Directory.Delete(LocalDirectory, True)
        End If
    End Try

    If DataOut = "Table Not Found in Database" Then
        OK_to_SelectCase = False
        If UCase(CPV.GetTokenValue(TokenString, "ON_ABSENT_TABLE")) = "TEST MANUALLY" Then
            DataOut = "<MANUAL>"
        End If
    End If

    If DataOut = "Feature Name Not Found in Database" Then
        OK_to_SelectCase = False
        If UCase(CPV.GetTokenValue(TokenString, "ON_ABSENT_ITEM")) = "TEST MANUALLY" Then
            DataOut = "<MANUAL>"
        End If
    End If

    Return 1

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:54:15.793

这是我们在 iPad 中用于确定表是否存在的 SQL：

```
sSQL = string.Format("SELECT 1 FROM sqlite_master WHERE name = '{0}' and type = 'table'", sName); 
```

我怀疑在您的实施中也应该如此。

# python - 如何使用南非荷兰语语言单词作为 nltk 语料库访问文本文件

> ID：14203767
> 
> 赞同：1
> 
> 时间：2013-01-07T20:47:33.313
> 
> 标签：python, nltk, corpus

我有一个带有南非荷兰语纯文本句子的文本文件。我希望能够在此文本文件上执行 nltk 语料库功能，但找不到任何有关如何执行此操作的示例。

我想做一些事情，例如：

```
mytext.concordance("woord")
mytext.similar("woord") 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:10:25.020

设法弄清楚了一些事情：

```
# How to load a text file as a corpus.
import nltk
from nltk.corpus import PlaintextCorpusReader
from nltk.corpus.util import LazyCorpusLoader
afrikaans = LazyCorpusLoader('afrikaans', PlaintextCorpusReader, r'(?!\.).*\.txt')
afrikaans.sents()[1]
af = nltk.Text(afrikaans.words())
af.concordance("mense") 
```

这假设您的语料库文本文件位于 C:\nltk_data\corpora\afrikaans\afrikaans.txt

# c# - 在处理 C# ASP.NET 4.5 中的数据传输对象和实体的汇编程序中实现“UpdateDomainObject”方法的可接受方法是什么？

> ID：14203772
> 
> 赞同：1
> 
> 时间：2013-01-07T20:47:52.333
> 
> 标签：c#, entity, design-patterns, dto, n-tier-architecture

我正在将“域对象”->“汇编程序”->“数据传输对象”（DTO）模式写入我的共享库中，以允许表示层和服务层通过 DTO 进行通信。我避免了任何共享接口以允许在 DTO 中进行粗粒度聚合。我对“CreateDTO”方法有扎实的掌握，但想知道如何在 C# 的汇编程序中实现 UpdateDomainObject(DTO dto) 方法。我正在考虑使用以下结构来简化我的代码：

```
public class SomeAssembler
{
public static SomeDTO CreateDTO(SomeDomainObject obj)
{
dto.Property1 = obj.Property1;
...
}
//METHOD IN QUESTION:
public static void UpdateDomainObject(SomeDTO dto, SomeDomainObject obj)
    {obj.Property1 = dto.Property1 ...}
} 
```

我在方法中包含域对象参数的原因是允许如下代码：

```
//Presentation Layer Code (PL signifies presentation layer type)
ContactPL : IContact //(IContact is an Entity library contract shared across layers in separate DLL)
{
#region Properties
//Note Mixed Types, so params not an option
public int Id {get;set}
public String FirstName {get;set;}
public string LastName {get;set;}
public string PhoneNumber {get;set;}
public Address address {get;set;}
#endregion

#region Methods
//METHOD IN QUESTION:
public void GetContact(int id)
{
ContactDTO dto = ContactService.GetContactbyId(id);
ContactAssembler.UpdateContact(dot, this);
}

// Other Methods...

#endregion
} 
```

请注意上面标记为“//METHOD IN QUESTION:”的方法。我的问题是，“这种结构是否可以接受和/或以这种方式编写代码是否有任何顾虑？”

我知道Java处理这些问题如下。我想确保“UpdateDomainObject”的 My Assembler 方法及其在表示层模型对象中的包含是可接受的或理想的。如果没有，有什么更好的给猫剥皮的方法吗？

Java 示例 - 从 DTO 更新的汇编程序方法（仅用于比较 - 请用 C# 术语回答）：

```
public static void updateCustomer(CustomerDTO dto) {
Customer target = null;
for(Customer c: Domain.customers) {
if (dto.name.equals(c.getName())) {
target = c;
break;
}
}
if (target != null) {
target.setAddress(dto.address);
target.setPhone(dto.phone);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:08:53.390

通过在“更新”方法中同时包含 DTO 和域对象，您将强制表示层同时处理 DTO 和域对象。

让表示层只处理与其相关的对象类型会更简单，无论是 DTO、域对象还是单独的表示层特定的对象类，并让汇编器负责翻译。

您的 Java 示例是将这种翻译隔离到汇编程序的一个很好的示例。

这种隔离的好处是减少了代码中的耦合，从而使您的代码更灵活（即更容易更改）以及降低复杂性，而我又使您的代码更易于维护。

# jquery - jQuery 相当于 underscore.js' groupBy

> ID：14203778
> 
> 赞同：5
> 
> 时间：2013-01-07T20:48:25.153
> 
> 标签：jquery, arrays, underscore.js

[jQuery 中是否有相当于http://underscorejs.org/#groupBy](http://underscorejs.org/#groupBy)的内置函数？

任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T20:51:24.437

不。jQuery 不是为数据处理而设计的，而是为 DOM、Ajax 和 Animations 设计的——这些[实用程序功能](http://api.jquery.com/category/utilities/)，或者内部需要`each`的功能很糟糕。`map``grep`

使用下划线，没有错！如果您不想加载整个脚本，您可以轻松地将[`groupby`函数从源代码](http://underscorejs.org/docs/underscore.html#section-42)复制到您需要的任何地方。不要忘记添加对其来源的评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-31T17:37:32.243

这是[squint 的原生 Javascript 答案的](https://stackoverflow.com/questions/8578814/groupby-in-javascript-to-group-json-data-and-populate-on-optgroup/8578875#8578875)**jQuery**改编版：

```
$.fn.groupBy = function(predicate) {
  var $array = $(this),
      grouped = {};

  $.each($array, function (idx, obj) {
    var $obj = $(obj);
        groupKey = predicate($obj);
    if (typeof(grouped[groupKey]) === "undefined") {
      grouped[groupKey] = $();
    }
    grouped[groupKey] = grouped[groupKey].add($obj);
  });

  return grouped;
} 
```

## ^这将返回 { key_name: jQueryObjects } 的哈希值

* * *

在这种情况下，使用**HTML****属性对****元素 ( ) 进行分组`$yourElements``name`**：

```
var groupedByName = $yourElements.groupBy(function (obj) {
  return $(obj).attr('name');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T09:18:23.270

我用过这个，它对我很有效

```
function groupBy(array, keyOrIterator) {
  var iterator, key;

  // use the function passed in, or create one
  if(typeof key !== 'function') {
    key = String(keyOrIterator);
    iterator = function (item) { return item[key]; };
  } else {
    iterator = keyOrIterator;
  }

  return array.reduce(function (memo, item) {
    var key = iterator(item);
    memo[key] = memo[key] || [];
    memo[key].push(item);
    return memo;
  }, {});
}
```

来自[链接](https://codereview.stackexchange.com/a/66752/214853)

# algorithm - 包装矩形 IOI 95

> ID：14203780
> 
> 赞同：4
> 
> 时间：2013-01-07T20:48:30.183
> 
> 标签：algorithm, packing

我正在通过[usaco](http://train.usaco.org/usacogate)培训页面工作，遇到了这个问题[http://olympiads.win.tue.nl/ioi95/task/pack.html](http://olympiads.win.tue.nl/ioi95/task/pack.html)我不明白示例输入和输出，即我找不到哪个6 个包装表示对应于 4,10 和 5,8 长度，产生 40 的最小总面积。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:05:09.487

右二？

```
1222
1222
3333
3333
3333
4444
4444
4444
4444
4444 
```

左边第三个？

```
33311
33322
33322
33322
44444
44444
44444
44444 
```

# node.js - 如何监听mongodb中某个集合的文档中的变化

> ID：14203783
> 
> 赞同：2
> 
> 时间：2013-01-07T20:48:47.507
> 
> 标签：node.js, mongodb, socket.io, real-time-updates

我正在使用 socket.io 进行服务器和客户端之间的实时通信，所以我想监听特定文档中的更改以将在线列表更新到客户端
这是我的集合架构：

```
var registerCompanySchema = new Schema({
              sn : { type: Number, unique:true }
              , companyName: String
              , employees:[String],
               companyId:{type:Number,unique:true},
               onlineEmployees:[String]  //uname
          });
```

我正在使用数组“onlineEmployees”来存储当前在线的员工的用户名
我是 mongoDB 的新手......请提供一些详细信息以及您的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:00:35.083

[如本问题](https://stackoverflow.com/questions/10014839/get-notification-for-changed-documents-in-mongodb)所述，观看 oplog 可能是您最好的选择。

*   [在 mongodb 中获取更改文档的通知](https://stackoverflow.com/questions/10014839/get-notification-for-changed-documents-in-mongodb)
*   [Replication Internals](http://www.kchodorow.com/blog/2010/10/12/replication-internals/) - 包括关于 oplog 的大量细节

如果您正在使用，您可以[从他们的 wiki](https://github.com/kissjs/node-mongoskin/wiki/Using-tailable-cursors)`mongoskin`尝试此示例的变体：

```
skin = require "mongoskin"
db = skin.db "localhost:27017/local"

#Cursor on oplog (a capped collection) which maintains a history for replication
#oplog can be used only when replication is enabled
# Use oplog.rs instead of oplog.$main if you are using replica set

oplog = db.collection "oplog.$main"
cursor = oplog.find({'ns': "icanvc.projects"},{tailable: yes, awaitData: yes})

#Using cursor.nextObject will be slow
cursor.each (err, log)->
    console.error err if err
    console.log log if not err 
```

# ruby-on-rails - 设计临时邀请码

> ID：14203784
> 
> 赞同：0
> 
> 时间：2013-01-07T20:49:03.363
> 
> 标签：ruby-on-rails, ruby, devise

我在我的 Rails 应用程序中使用设计进行身份验证，想知道是否有一种简单的方法可以禁止用户注册并拥有一个临时的邀请码系统。

我想要一种简单的方法，因为它只是允许少数用户在向公众开放之前注册并测试 Rails 应用程序。

易于添加和删除将是完美的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:57:24.513

这个 Railscast 描述了如何创建简单的邀请系统。

[`#124 Beta Invitations`](http://railscasts.com/episodes/124-beta-invitations)

# php - 第 34 行的意外 t_if

> ID：14203786
> 
> 赞同：-5
> 
> 时间：2013-01-07T20:49:12.203
> 
> 标签：php

```
<!DOCTYPE html>
<html>
<head>
    <link href="aadab.css" rel="stylesheet" type="text/css">
    <link rel="icon" href="images/favicon.png">
</head>
<body>
<h2>REGISTRATION FORM</h2>
<div id="form">

  <?php
    if(isset($_POST['submit']))
        {
            $name= stripslashes($_POST['name']);
            $phone= stripslashes($_POST['phone']);
            $email= stripslashes($_POST['email']);
            $college= stripslashes($_POST['namecolg']);
            $team= stripslashes($_POST['team']);
            $im= stripslashes($_POST['im']);
            $events= stripslashes($_POST['eventopts']);
            $detail= stripslashes($_POST['detail']);
            $subject= 'Registration for aadab 2013';
            $output_form= false

            if ( (empty($name)) || (empty($phone)) || (empty($email)) || (empty($college)) || (empty($events)) || (empty($detail)) )
                {
                    echo '<p id="fillall">It is necessary that you fill at least the required fields that are marked with a star</p>';
                    $output_form= true;
                }
            else
                {
                    $to= "xyz@yahoo.in, $email";
                    $msg="Registration Detail: \n\n"."Name: $name \n"."Contact: $phone \n"."Email: $email \n"."College: $namecolg \n"."Team(if any): $team \n"."Instant message: $im \n"."Event(s) registered for: $team \n"."Details of the event(s): $team \n";

                    mail($to, $subject, $msg)
                    echo 'Congratulations! You have successfully registered! You have been sent a confirmatory email.';
                }
        }
    else
        {?>
    <form action="<?php echo $_SERVER['PHP_SELF'] ?>" autocomplete="on">
        <table>
            <tr>
                <th><label for="name">Your fullname*</label></th>
                <td><input type="text" id="name" name="name" value="<?php echo $name ?>" required></td>
            </tr>

            <tr>
                <th><label for="phone">Your contact number*</label></th>
                <td><input type="tel" id="phone" name="phone" value="<?php echo $phone ?>" required></td>
            </tr>

            <tr>
                <th><label for="email">Your email-id*</label></th>
                <td><input type="email" id="email" name="email" value="<?php echo $email ?>" required></td>
            </tr>

            <tr>
                <th><label for="namecolg">Name of your college*</label></th>
                <td><input type="text" id="namecolg" name="namecolg" value="<?php echo $college ?>" required></td>
            </tr>

            <tr>
                <th><label for="team">The name of your team<br>(if registering for a team event)</label></th>
                <td><input type="text" id="team" name="team" value="<?php echo $team ?>" ></td>
            </tr>

            <tr>
                <th><label for="im">Bbm pin/iMessage id/Whatsapp<br>(if any, separate each id by a comma)</label></th>
                <td><input type="text" id="im" name="im" value="<?php echo $im ?>" ></td>
            </tr>

            <tr>
                <th>Event(s) you would like to register for*</th>
                <td>
                <input type="checkbox" name="eventopts" value="Literary"><span style="color: #DBDBDB;">Literary Event<br>
                <input type="checkbox" name="eventopts" value="Art">Art Event<br>
                <input type="checkbox" name="eventopts" value="Cultural">Cultural Event</span>
                </td>
            </tr>

            <tr>
                <th><label for="detail">Details of the event(s) you want to register for*</label></th>
                <td><input type="text" id="detail" name="detail" value="<?php echo $detail ?>" required></td>
            </tr>

            <tr><td colspan="2" style="text-align: center; padding: 40px 0px 0px 0px;"><input type="submit" value="Register"></td</tr>
        </table>
    </form>
    <?php } ?>
    </div>
    </body>
    </html> 
```

为什么我在第 34 行得到一个意外的 t_if？我尝试了所有方法，但到目前为止没有任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:51:17.870

就您的问题而言，您在`;`这里忘记了`$output_form= false`FIX IT！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:51:23.973

你错过了一个分号：

```
$output_form= false 
```

# java - 对多线程概念有点困惑

> ID：14203790
> 
> 赞同：2
> 
> 时间：2013-01-07T20:49:36.450
> 
> 标签：java, multithreading

我有几个关于 Java 多线程的问题。我目前正在学习不同的多线程方法。我的第一个问题是，在其中的代码完成运行后线程会发生什么？我需要停止/终止线程吗？我目前正在为每个线程创建一个类并在每个类中实现 Runnable。然后我在主类中使用`new ThreadClass();.`Thread 类的构造函数启动线程，我将其设置为创建一个名为“second”的线程。如果我`new ThreadClass()`在 main 方法中添加两次，两个线程都命名为“second”吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:52:58.183

> 我的第一个问题是，在其中的代码完成运行后线程会发生什么？我需要停止/终止线程吗？

线程在无事可做时停止。如果你有一个 ExecutorService，你必须在完成后使用 shutdown。

> 如果我在 main 方法中添加了两次 new ThreadClass()，两个线程都命名为“second”吗？

您正在使代码相同。这并不意味着线程的名称必须相同（反之亦然）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:57:57.830

我假设您的意思是[Thread](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)而不是`ThreadClass`.

当`run`线程的方法返回时，线程将停止。如果您只在第二个线程中指定名称，那么只有该线程的名称为“second”。第一个线程不受影响。

如果可能的话，您应该避免调用[stop](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#stop%28%29)，因为它不允许线程干净地退出。

# c# - ASP.NET Web API PUT 动作参数不通过

> ID：14203791
> 
> 赞同：2
> 
> 时间：2013-01-07T20:49:36.347
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, mediatypeformatter

好的，所以我有一个 MediaTypeFormatter：

```
public class iOSDeviceXmlFormatter : BufferedMediaTypeFormatter
{
    public iOSDeviceXmlFormatter() {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));
    }
    public override bool CanReadType(Type type) {
        if (type == typeof(iOSDevice)) {
            return true;
        }
        return false;
    }

    public override object ReadFromStream(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger) {
        iOSDevice device = null;
        using (XmlReader reader = XmlReader.Create(readStream)) {
            if (reader.ReadToFollowing("iOSDevice")) {
                if (!reader.IsEmptyElement) {
                    device = new iOSDevice();
                    ... do processing here ...
                }
            }
        }
        readStream.Close();
        return device;
    } 
```

我有这个动作来处理 PUT：

```
 public void Put(string id, iOSDevice model)
    {
    } 
```

我也试过这个：

```
 public void Put(string id, [FromBody]iOSDevice model)
    {
    } 
```

我试过这个：

```
 public void Put(string id, [FromBody]string value)
    {
    } 
```

当我这样做时，这些都不起作用：

```
string data = "<iOSDevice>xml_goes_here</iOSDevice>";
WebClient client = new WebClient();
client.UploadString(url, "PUT", data); 
```

该操作拒绝触发我的 iOSDeviceXmlFormatter，它甚至不会将其读取为 [FromBody] 字符串。你怎么得到这个东西的地图？

谢谢，

艾莉森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:46:02.900

你是如何注册你的格式化程序的？您需要在第一个位置注册此格式化程序，以便它优先于 WebAPI 的默认格式化程序。代码如下所示：

```
config.Formatters.Insert(0, new iOSDeviceXmlFormatter()); 
```

这应该确保任何带有内容类型 application/xml 或 text/xml 类型 iOSDevice 的请求都使用您的格式化程序进行反序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:55:46.763

您已指定将为以下请求`Content-Type`标头触发格式化程序：

```
SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml")); 
```

但是您还没有在请求中设置它们。这就是为什么您的自定义格式化程序永远不会被触发的原因。因此，一旦您在全局配置中注册它：

```
config.Formatters.Insert(0, new iOSDeviceXmlFormatter()); 
```

您应该确保设置正确的请求`Content-Type`标头：

```
string data = "<iOSDevice>xml_goes_here</iOSDevice>";
using (WebClient client = new WebClient())
{
    // That's the important part that you are missing in your request
    client.Headers[HttpRequestHeader.ContentType] = "text/xml";
    var result = client.UploadString(url, "PUT", data);
} 
```

现在将触发以下操作：

```
public void Put(string id, iOSDevice model)
{
} 
```

当然，您的自定义格式化程序将在之前被调用，以便`iOSDevice`从请求中实例化您。

# reporting-services - 如何在 SSRS 2008 R2 中格式化饼图中的标签

> ID：14203794
> 
> 赞同：2
> 
> 时间：2013-01-07T20:49:52.123
> 
> 标签：reporting-services, ssrs-2008

在我的 SSRS 2008 R2 饼图中，我想显示 3 个值，它们是我的数据集中的计算字段。

该数据集为呼叫中心代理收集了一堆统计数据。其中包括 ProductiveTime、ExcepctionTime、NonProductiveTime，当然，对于给定的时间段。

*如果您认为需要更多详细信息，请阅读本段：系统跟踪代理中的每次状态更改。例如，休息、午餐、会议、培训等。然后在我的存储过程中，我创建了一个具有该状态类别的附加列，因此，例如，午餐、休息将是 NonProductiveTime，等等. 在选定的时间段之间，每次状态发生变化时都会记录数百个条目，以及状态持续多长时间。*

回到饼图，我`SUM`将这 3 个值中的一个添加到图表数据中，每个值都是一个系列。

我遇到的问题是，当我选择**Series Label Properties并配置****Number**的格式时，只有第一个系列会选择它。如果我使用 UI 或属性窗口执行此操作，这没有什么区别。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T04:52:47.180

我遇到了同样的问题，如果您只使用箭头（图表数据框顶部的蓝色小箭头）将值移动到列表顶部，您可以编辑该系列的标签详细信息/代码/表达式等。然后对您添加的所有值重复此操作。

我敢肯定有更好的方法，但这很有效，所以我就是这样做的。似乎当您编辑标签时，它只会编辑列表顶部的项目/值，在您完成标签之后，只需将它们重新排列成您希望它们列出的顺序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T20:55:31.860

我发现您可以通过格式化集合“图表系列标签”的“标签”属性来获得此信息。我还遇到了获取有关如何格式化的足够信息的问题。我认为你可以通过使用一些内置的“系统语法”来获得你想要的东西。

这是我用来格式化 YValue 并给我一个百分比的例子：

#VALY{###,##0} (#PERCENT{p0})

请在此 msdn 页面上查看更具包容性的列表：http: [//msdn.microsoft.com/en-us/library/bb677551.aspx](http://msdn.microsoft.com/en-us/library/bb677551.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T10:29:39.257

您可以通过转到每个标签的属性来格式化您的系列标签，首先右键单击所有系列属性并勾选“显示数据标签”，然后选择第一个属性并按 F4a 属性窗口将打开 - >在标签下 - >找到你的字体可以在这里设置。您也可以在此处设置其他属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:01:01.600

我无法弄清楚这一点，所以我继续创建了一个新的存储过程，它将数据作为具有两列的行提供给我：一列用于属性，一列用于值。这样我可以只使用一个系列的图表，并显示为百分比，我发现这个非常有用：[http ://bipassion.wordpress.com/tag/ssrs-pie-chart/](http://bipassion.wordpress.com/tag/ssrs-pie-chart/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-24T23:45:07.000

查看上面的答案和我最新的 VS 2015 我使用了这些步骤

1-单击**“图表数据”**框中的值

2-点击**“显示数据标签”**

3- 按**F4**打开侧面的**“属性”窗口**

4-在“属性”窗口中展开**“标签”部分**

5-在**“属性”窗口**的“标签”部分下更改**“标签”**和**“格式”属性**

 **6- 我收到一个消息框，说如果我想更改标签属性，那么我必须将**“UseValueASLabel”**设置为**False****

# javascript - extjs 模型覆盖

> ID：14203795
> 
> 赞同：0
> 
> 时间：2013-01-07T20:50:09.673
> 
> 标签：javascript, extjs

我正在尝试覆盖基本模型类，因此它会影响我的所有模型。我基本上需要一个地方来检查任何操作错误，这样我就可以处理它，而不是在整个地方重复我的代码，所以，如果我的任何模型出现错误，我可以管理它：

```
Ext.override(Ext.data.Model, {
    listeners: {
        failure: function (proxy, response, operation) {
            if(!operation.success) {
                Ext.Msg.alert('An error occurred', operation.error);
            }
        }
    }
}); 
```

问题是它在失败时不会做任何事情。顺便说一句，我最后加载了我的 overrides.js 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:16:59.293

那是因为`Model`没有“失败”事件。

您可以在其中覆盖`Ext.Ajax`单例`Ext.data.Connection`，检查[Ext.Ajax的文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax)

例子：

```
Ext.Ajax.on('requestexception', function ( conn, response, options, eOpts ) {
        Ext.Msg.alert('An error occurred');
    }); 
```

# ios - 在通知中心永久显示数据的应用

> ID：14203799
> 
> 赞同：2
> 
> 时间：2013-01-07T20:50:37.630
> 
> 标签：ios, notificationcenter

我想创建一个可以在 iOS 通知中心永久显示数据的应用程序，例如内置的 Weather 或 Stocks 应用程序。

那可能吗？有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:56:06.990

使用官方 SDK 是不可能的。尽管通过使用私有 API，它已在越狱社区中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:56:10.030

不可能。您可能显示的只是推送通知或本地通知。你根本无法影响外观。股票、天气和 Twitter/Facebook 小部件直接来自苹果并内置于 iOS。

# excel - 打开对话框默认为指定的网络路径（不是驱动器）

> ID：14203801
> 
> 赞同：3
> 
> 时间：2013-01-07T20:50:48.237
> 
> 标签：excel, vba

我正在尝试将打开的对话框指定为默认设置为网络上的特定文件夹。让我们使用路径：

```
\\test\yes\no\ 
```

下面的代码不起作用，但也不会出错。我无法弄清楚我做错了什么。

```
Private Declare Function SetCurrentDirectory _
Lib "kernel32" _
Alias "SetCurrentDirectoryA" ( _
ByVal lpPathName As String) _
As Long

SetCurrentDirectory "\\test\yes\no\" 
```

我已经看到人们这样做的几种方式，但似乎没有什么对我有用。如果有帮助，我正在使用 excel 2010。

我的目录代码：

```
With Application.FileDialog(msoFileDialogFolderPicker)
    SetCurrentDirectory "\\test\yes\no\"
    .AllowMultiSelect = False
        If .Show <> -1 Then MsgBox "No folder selected! Exiting script.": Exit Sub
    myDir = .SelectedItems(1)
        End With

    MsgBox "Please choose the folder."
    Application.DisplayAlerts = False
        '*********************************************************************************************
    'Check for .xls cutsheets; open one at a time with a loop until all file data has been copied
    '*********************************************************************************************
    folderPath = myDir
        If Right(folderPath, 1) <> "\" Then folderPath = folderPath + "\"
    fileName = Dir(folderPath & "*.xls")
        Do While fileName <> ""
    Application.ScreenUpdating = False
        Set wbkCS = Workbooks.Open(folderPath & fileName) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T22:45:44.333

`Application.FileDialog`我也不能使用and让它工作`SetCurrentDirectory`。但是，使用该`InitialFileName`属性并将其设置为`"\\test\yes\no\"`（即仅指定路径）确实有效。

```
With Application.FileDialog(msoFileDialogFolderPicker)
    .InitialFileName = "\\test\yes\no\"
    .AllowMultiSelect = False
    If .Show <> -1 Then MsgBox "No folder selected! Exiting script.": Exit Sub
        myDir = .SelectedItems(1)
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:45:20.770

我可以使用以下命令打开一个对话框：

```
Private Declare Function SetCurrentDirectory _
Lib "kernel32" _
Alias "SetCurrentDirectoryA" ( _
ByVal lpPathName As String) _
As Long

Sub OpenDialogInNetworkPath()
    SetCurrentDirectory "\\test\yes\no\"
    FileToOpen = Application.GetOpenFilename _
    (Title:="Please choose a file to import", _
    FileFilter:="Excel Files *.xls (*.xls),")
    Workbooks.Open Filename:=FileToOpen
End Sub 
```

这有帮助吗？可以发一下完整的宏吗？

# php - 用关联的对象数组刷新对象时出错

> ID：14203808
> 
> 赞同：1
> 
> 时间：2013-01-07T20:51:15.283
> 
> 标签：php, doctrine-orm, symfony-2.1

在持久化和刷新具有关联的对象时，我收到以下错误消息：

```
Catchable Fatal Error: Argument 1 passed to
Doctrine\Common\Collections\ArrayCollection::__construct() must be of
the type array, object given, called in  
.../vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php on line 519 and defined in 
.../vendor/doctrine/common/lib/Doctrine/Common/Collections/ArrayCollection.php line 48 
```

我所拥有的是一个以此为基础对象的单表继承：

```
use Doctrine\ORM\Mapping as ORM;

/**
 * ObjectData
 *
 * @ORM\Table(name="object_data")
 * @ORM\Entity(repositoryClass="Edexp\CoreBundle\Entity\ObjectDataRepository")
 * @ORM\InheritanceType("SINGLE_TABLE")
 * @ORM\DiscriminatorColumn(name="entity_name", type="string")
 * @ORM\DiscriminatorMap({
 *      "request" = "Edexp\MessageBundle\Entity\RequestData"
 * })
 * @ORM\HasLifecycleCallbacks
 */
class ObjectData
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="created_at", type="datetime")
 */
private $created_at;

/**
 * @var User
 *
 * @ORM\OneToMany(targetEntity="User", mappedBy="data")
 */
private $user;

/**
 * @var string
 *
 * @ORM\Column(name="`key`", type="string", length=255)
 */
private $key;

/**
 * @var string
 *
 * @ORM\Column(name="data", type="blob")
 */
private $data;

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set created_at
 *
 * @param \DateTime $createdAt
 * @return ObjectData
 */
public function setCreatedAt($createdAt)
{
    $this->created_at = $createdAt;

    return $this;
}

/**
 * Get created_at
 *
 * @return \DateTime
 */
public function getCreatedAt()
{
    return $this->created_at;
}

/**
 * Set user
 *
 * @param User $user
 * @return ObjectData
 */
public function setUser($user)
{
    $this->user = $user;

    return $this;
}

/**
 * Get user
 *
 * @return User
 */
public function getUser()
{
    return $this->user;
}

/**
 * Set key
 *
 * @param string $key
 * @return ObjectData
 */
public function setKey($key)
{
    $this->key = $key;

    return $this;
}

/**
 * Get key
 *
 * @return string
 */
public function getKey()
{
    return $this->key;
}

/**
 * Set data
 *
 * @param string $data
 * @return ObjectData
 */
public function setData($data)
{
    $this->data = $data;

    return $this;
}

/**
 * Get data
 *
 * @return string
 */
public function getData()
{
    return $this->data;
}

/**
 * @ORM\PrePersist
 */
public function prepareForPersist()
{
    $this->created_at = new \DateTime();
}
} 
```

以及一个从 ObjectData 继承的附加对象：

```
use Doctrine\ORM\Mapping as ORM;

use MyProject\CoreBundle\Entity\ObjectData;

/**
* RequestData
*
* @ORM\Entity()
*/
class RequestData extends ObjectData
{
    /**
    * var Request $request
    *
    * @ORM\ManyToOne(targetEntity="Request", inversedBy="data")
    * @ORM\JoinColumn(name="object_id", referencedColumnName="id")
    */
    private $request;

    /**
    * Set request
    *
    * @param Request $request
    * @return RequestData
    */
    public function setRequest($request)
    {
        $this->request = $request;
        return $this;
    }

    /**
    * Get request
    *
    * @return Request
    */
    public function getRequest()
    {
        return $this->request;
    }
} 
```

这是利用 RequestData 实体的对象：

```
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

/**
* Request
*
* @ORM\Table(name="requests")
* @ORM\Entity(repositoryClass="RequestRepository")
* @ORM\HasLifecycleCallbacks()
*/
class Request
{
    /**
    * @var integer $id
    *
    * @ORM\Column(name="id", type="integer")
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    private $id;

    /**
    * @var Message $message
    *
    * @ORM\ManyToOne(targetEntity="Message", inversedBy="requests")
    */
    private $message;

    /**
    * @var RequestType $type
    *
    * @ORM\ManyToOne(targetEntity="RequestType")
    * @ORM\JoinColumn(name="type_id", referencedColumnName="id")
    */
    private $type;

    /**
    * @var ArrayCollection $data
    *
    * @ORM\OneToMany(
    *       targetEntity="RequestData",
    *       mappedBy="request",
    *       cascade={"persist","remove"}
    * )
    */
    private $data;

    /**
    * @var datetime $created_at
    *
    * @ORM\Column(name="created_at", type="datetime")
    */
    private $created_at;

    /**
    * @var text $comment
    *
    * @ORM\Column(name="comment", type="text")
    */
    private $comment;

    /**
    * @var ArrayCollection $responses
    *
    * @ORM\OneToMany(
    *       targetEntity="Response",
    *       mappedBy="request",
    *       cascade={"persist","remove"}
    * )
    */
    private $responses;

    public function __construct()
    {
        $this->data      = new ArrayCollection();
        $this->responses = new ArrayCollection();
    }

    /**
    * Get id
    *
    * @return integer
    */
    public function getId()
    {
        return $this->id;
    }

    /**
    * Set message
    *
    * @param Message $message
    */
    public function setMessage($message)
    {
        $this->message = $message;
    }

    /**
    * Get message
    *
    * @return Message
    */
    public function getMessage()
    {
        return $this->message;
    }

    /**
    * Set type
    *
    * @param RequestType $type
    */
    public function setType($type)
    {
        $this->type = $type;
    }

    /**
    * Get type
    *
    * @return RequestType
    */
    public function getType()
    {
        return $this->type;
    }

    /**
    * Set created_at
    *
    * @param datetime $createdAt
    */
    public function setCreatedAt($createdAt)
    {
        $this->created_at = $createdAt;
    }

    /**
    * Get created_at
    *
    * @return datetime
    */
    public function getCreatedAt()
    {
        return $this->created_at;
    }

    /**
    * Set comment
    *
    * @param text $comment
    */
    public function setComment($comment)
    {
        $this->comment = $comment;
    }

    /**
    * Get comment
    *
    * @return text
    */
    public function getComment()
    {
        return $this->comment;
    }

    /**
    * Add response
    *
    * @param Response $response
    */
    public function addResponse($response)
    {
        foreach ( $this->responses as $r ) {
            if ( $r->getUser() == $response->getUser() )
                return;
        }

        $this->responses->add($response);
    }

    /**
    * Get responses
    *
    * @return ArrayCollection
    */
    public function getResponses()
    {
        return $this->responses;
    }

    public function hasResponse($user)
    {
        foreach ( $this->responses as $r ) {
            if ( $r->getUser() == $user )
                return $r;
        }
        return null;
    }

    public function addData($data)
    {
        $data->setRequest($this);
        $this->data->add($data);
    }

    public function getData()
    {
        return $this->data;
    }

    /**
    * @ORM\PrePersist
    */
    public function prePersist()
    {
        $this->created_at = new \DateTime();
    }
} 
```

最后是导致错误的代码：

```
 use MyProject\MessageBundle\Entity\Request as MyRequest;

    $data = new RequestData();
    $data->setUser($user);
    $data->setKey('user_id');
    $data->setData(6);

    $req = new MyRequest();
    $req->setMessage($message);
    $req->setComment('bla');
    $req->setType($doctrine->getRepository('MessageBundle:RequestType')->find(1));
    $req->addData($data);

    $em->persist($req);
    $em->flush(); 
```

关于这里可能有什么问题的任何建议？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:21:32.637

所以这就是我必须做的才能让它工作。

我不得不将 ObjectData 中的关联从：

```
@ORM\OneToMany(targetEntity="User", mappedBy="data") 
```

到

```
@ORM\ManyToOne(targetEntity="User", inversedBy="data") 
```

相应地将数据字段添加到用户实体。

```
/**
 * @var ArrayCollection $data
 *
 * @ORM\OneToMany(targetEntity="ObjectData", mappedBy="user")
 */
private $data; 
```

瞧，它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:37:59.173

尝试：

```
$req->addData(array($data)); 
```

解释：

arrayCollection 构造函数类型提示一个数组作为其参数，因此您需要始终向其传递一个数组。

# java - 如何在java中的套接字之间传递/写入哈希表作为对象

> ID：14203815
> 
> 赞同：1
> 
> 时间：2013-01-07T20:51:26.570
> 
> 标签：java, sockets, hashtable

我试图在 java 中的套接字之间编写哈希表，但收到此错误：错误：写入中止；java.io.NotSerializableException: java.net.Socket

我怎么写

**编辑：**

```
 socktmp= mainSocket.accept();
        rdr= new BufferedReader( new InputStreamReader(socktmp.getInputStream()));
        String t="";
        String name=rdr.readLine();

        //rdr.close();
        LstClient.AddClient(name, socktmp);

        objwriter = new ObjectOutputStream(socktmp.getOutputStream());
        objwriter.writeObject(LstClient.clients);
        objwriter.flush();  
        objwriter.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:55:37.943

您不能序列化套接字。您只能序列化可序列化对象的 HashMap。检查您是否添加了任何匿名或嵌套类，其中隐式引用了对包含 Socket 的对象的隐式引用。

顺便说一句：如果可以避免，请不要使用 Hashtable。请改用 HashMap 或 LinkedHashMap 或 ConcurrentHashMap。

# jquery - 如何在 jQuery 中隐藏表单提交上的滑块？

> ID：14203820
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:51:46.543
> 
> 标签：jquery, forms, slider, submit, hide

我正在使用 jQuery 插件在我的页面上显示一个滑块，我想在用户按下搜索按钮（提交表单）时隐藏它。我怎样才能做到这一点 ？调用 Slider 的代码：

```
 <!-- Initialize the csstubeslider plugin -->
<script type="text/javascript">
    $(window).load(function(){
        $("#gallery").csstubeslider();
    });
</script> 
```

我的html：

```
 <div id="gallery"><a href="#" class="show">
<img src="images/slider/s1.jpg" id="slideimg" />
</a>
<a href="#" <img src="images/slider/s2.jpg" id="slideimg" />
</a> 
```

这是表格：

```
 <form class="searchform" action="webpage.php" method="POST">
<input class="searchfield autosuggest" type="text" name="name"  placeholder="Search for a name " onFocus="if (this.value == 'Search...') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'Search...';}" />
<input class="searchbutton" type="submit" name"name" value="Go" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:53:23.013

利用：

```
$('body').on('submit', '#formID', function(){
    $('#gallery').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:55:32.767

您可以使用 jquery 在此表单上收听提交，如下所示：

```
$('.searchbutton').submit(function() {
    $("#gallery").hide(); // hides the gallery 
    // alternative way: $("#gallery").css("display","none");
}); 
```

# mysql - mysql：如何对相乘的部分求和

> ID：14203821
> 
> 赞同：5
> 
> 时间：2013-01-07T20:51:51.547
> 
> 标签：mysql, sum, multiplication

有这样的表：

已售商品：

```
code   | size   | quantity 
abc123 | small  | 4
abc123 | medium | 2  
xyz987 | small  | 3
xyz987 | medium | 1
xyz987 | large  | 2 
```

价位表：

```
code   | size   | price 
abc123 | small  | 5
abc123 | medium | 7  
abc123 | large  | 9 
xyz987 | small  | 10
xyz987 | medium | 13
xyz987 | large  | 15 
```

这将是您获得的最佳（更快的查询）方法

结果：

```
code   | sold_items | cash
abc123 | 6          | 34
xyz987 | 6          | 73 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:57:03.573

这应该有效：

```
 SELECT si.code, SUM(si.quantity), SUM(si.quantity * pl.price) as cash
 FROM sold_items si
 INNER JOIN price_list pl ON pl.code = si.code AND pl.size = si.size
 GROUP BY si.code 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T21:07:27.220

请试试这个。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/2bb6c/13)

代码：

```
select p.code, sum(p.quantity), sum(q.quantity * p.price)
from prc p
inner join 
qty q
on p.code = q.code
and p.size = q.size
group by p.code
; 
```

结果：

```
CODE    SUM(Q.QUANTITY)     SUM(Q.QUANTITY * P.PRICE)
abc123      6                   34
xyz987      6                   73 
```

# css - 与第 n 个孩子悬停

> ID：14203823
> 
> 赞同：19
> 
> 时间：2013-01-07T20:52:01.977
> 
> 标签：css, css-selectors

我想知道是否可以像这样对第 n 个孩子使用悬停

```
#gallery a img:hover {
    display: block;
    height:300px;
    width:450px;
    position:absolute;
    z-index:99;
    margin-left:-112.5px;
    margin-top:-75px;
    -webkit-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
    box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);

} 
```

从这里到这里的一些东西，只是它不起作用

```
 #gallery a img:hover:nth-child(1n+4) {
        display: block;
        height:300px;
        width:450px;
        position:absolute;
        z-index:99;
        margin-left:-112.5px;
        margin-top:-75px;
        -webkit-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
        -moz-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
        box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);

    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-08T15:22:01.800

```
#gallery a:hover:nth-child(1n+4) 
```

将正常工作，但样式 A 标签而不是里面的 IMG。

当你有标记时......

```
<a href="#"><img src=""/></a>
<a href="#"><img src=""/></a>
<a href="#"><img src=""/></a>
<a href="#"><img src=""/></a>
<a href="#"><img src=""/></a> 
```

您不能选择内部 IMG，然后尝试在其上应用第 n 个子项，因为 A 标记内只有 1 个 IMG。

参考我创建的 JSFIDDLE [http://jsfiddle.net/fXS93/2/](http://jsfiddle.net/fXS93/2/)

IMG 标记包装方式的任何更改都将重置 CSS 匹配和 NTH-CHILD 计算。即使您在所有 IMG 共享的 CLASS 上匹配，这也适用。

这适用于最新的 FF、Chrome 和 IE9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:46:43.387

您在哪个浏览器中尝试过这个？你在多少个元素上运行了这个公式？它将从父元素中的第三个元素运行，并且**您**
应该 `:hover`
像这样在第 n 个子元素之后添加：`:nth-child(1n+4):hover`
尽管它在 IE8 或更早版本中不起作用
**编辑：**
我尝试过并且该顺序不会影响您可以`:hover`放在`:nthchild()`

# android - 使用 Java 代码将 TableLayout 行居中

> ID：14203824
> 
> 赞同：1
> 
> 时间：2013-01-07T20:52:03.407
> 
> 标签：android, tablelayout

我会创建一个 TableLayout 并将其内容居中。我写了这段代码：

```
TableLayout tl = new TableLayout(this);
tl.setGravity(Gravity.CENTER);

TableRow firstRow = new TableRow(this);
TableRow secondRow = new TableRow(this); 
```

但它不起作用。行居中但仅垂直...我该怎么办？

提前致谢。

编辑：

```
TableLayout tl = new TableLayout(this);
tl.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, Gravity.CENTER_HORIZONTAL));

TableRow firstRow = new TableRow(this);
TableRow secondRow = new TableRow(this);

firstRow.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.FILL_PARENT, Gravity.CENTER));
secondRow.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.FILL_PARENT, Gravity.CENTER)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:04:04.743

您应该为 TableLayout 设置一个 LayoutParams 并在其上设置重力：

```
tl.setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.CENTER_HORIZONTAL) ); 
```

# visual-studio-2010 - .NET 4.5 的 WiX 引导程序

> ID：14203827
> 
> 赞同：3
> 
> 时间：2013-01-07T20:52:17.460
> 
> 标签：visual-studio-2010, wix, wix-extension

我是 WiX 的新手，并且已经构建了一个独立的安装程序。我想检测系统上是否有[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5 并提示用户安装它。我的开发环境是使用 WiX 3.7 工具集的[Visual Studio 2010 。](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)

从我看到的一些教程中，我应该使用 WiX 3.6 [Burn](http://en.wikipedia.org/wiki/WiX#Burn)或使用 Visual Studio 2010 中的 WiX 引导程序项目模板。

出于某种原因，当我安装 Wix 3.7 时，我没有引导程序模板（我不确定我是否缺少要下载的扩展）。

使用引导程序模板而不是 Burn 更好吗？有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:40:19.633

您需要创建一个名为“Bootstrapper Project”的新项目（此模板必须在您的 Visual Studio 2010 安装中，与 Windows Installer XML 相关）。以下是非常好的带有手册的博客文章：

*   Heath Stewart*[介绍托管引导程序应用程序](http://blogs.msdn.com/b/heaths/archive/2011/10/28/introducing-managed-bootstrapper-applications.aspx)*
*   *[WiX Burn –](http://neilsleightholm.blogspot.ru/2012/05/wix-burn-tipstricks.html)* Neil Sleightholm 的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-10T15:03:09.073

Wix 烧录，是Wix Bootstrapper。他们是一样的东西。Burn 只是 Wix Bootstrapper 的名称，但他们确实倾向于在称其为“wix burn”和“wix bootstrapper”之间切换。但正如我所说，它们是同一回事。

这是我的 wix 引导程序，它检查 .net 的版本，然后在安装我的 .msi 之前下载并安装它 您需要添加对 WixNetFxExtension.dll 的引用

```
<?xml version="1.0" encoding="UTF-8"?>

<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"  xmlns:bal="http://schemas.microsoft.com/wix/BalExtension" xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">

  <Bundle Name="MyProgramInstaller" Version="1.0.0.0" Manufacturer="myCompany" UpgradeCode="yourcodehere">

<!-- here's the license statement, would suggest you update this to something more useful. -->
    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />

		<Chain>
    <!-- here's the .net download installer you can change this using the following chart -->
    <!-- http://wixtoolset.org/documentation/manual/v3/customactions/wixnetfxextension.html -->
      <PackageGroupRef Id="NetFx451Web"/>
      <MsiPackage Id="myProgram" SourceFile="$(var.SolutionDir)SetupProject1/bin/Release/myProgramInstaller.msi"/>
		</Chain>

	</Bundle>
</Wix>
```

# jquery - 如何从 servlet 显示 ArrayList 内容？

> ID：14203830
> 
> 赞同：0
> 
> 时间：2013-01-07T20:52:32.330
> 
> 标签：jquery, html, jsp, servlets

我在一个 ArrayList 中有大量数据，其中包含我学院的大约 2,600 个课程。我正在尝试为他们构建一个将显示此信息的 JSP 页面。我无法弄清楚如何在表格中显示这些数据。

为了在一开始进行测试，我这样做只是为了验证我可以访问数据。

HTML：

```
 <html>
  <head>
  <body>
   <button id="btnData">Get all classes.</button>
   <div id="dataDisp></div>
  <script>
   $(document).ready(function(){
     $("#btnData).click(function(){
       $.get('daoServlet', function(responseText){ 
         $("#dataDisp").text(responseText);
       });
     });
   });
  </body>
 <html> 
```

小服务程序：

```
 @WebServlet("/daoServlet/*")
 public class ClassDAO extends HttpServlet
 {
   //Code getting my ArrayList<ClassInfo> set up, etc.

   @Override
   protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException
   {
      String text = fallClassListings.toString();

      response.setContentType("text/html");
      response.setCharacterEncoding("UTF-8");
      response.getWriter().write(text);
   }
 } 
```

这将显示每个类。那么，我可以采取什么方向将这些数据格式化为 index.jsp 页面中的表格？我试着做类似的事情

```
 text = "<h1>This is an h1 tag</h1>"; 
```

只是想看看我是否可以返回一些 HTML，但这只是打印出整个字符串文字，而不是 h1 标记。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:58:50.077

我在 jquery 中看到的唯一问题是“.text()”。相反，将其替换为“div”的“.html()”，如下所示。

```
$("#dataDisp").html(responseText); 
```

此外，您可以在列表上有一个 for 循环，并在 Index.jsp 文件中使用“tr”s 和“td”s 构建表，并将其返回给 jquery。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:02:22.237

如果您使用 jquery html 方法而不是 text 方法，您会看到 h1 正确显示：

```
$("#dataDisp").html(responseText); 
```

执行此类操作的最佳方法是在服务器上生成一个 json 序列化字符串，然后您可以在 javascript 中迭代对象。此外，您可以使用像 mustache 这样的 javascript 模板引擎来构建您的表格，请参阅[https://github.com/janl/mustache.js](https://github.com/janl/mustache.js)

# java - Android：计算到另一个精确点的距离

> ID：14203832
> 
> 赞同：0
> 
> 时间：2013-01-07T20:52:39.873
> 
> 标签：java, android, google-maps, gps, geopoints

我创建了一种方法来计算从当前位置到硬编码位置的距离。但它不起作用。计算器不显示距离。这里有什么问题？

```
public void ourLocation() 

{

    myLocation = new MyLocationOverlay(this, map);
    map.getOverlays().add(myLocation);
    myLocation.enableMyLocation();

    // Find my position
    locationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            20000, 0, this);

    controller = map.getController();

} 
```

我的 onLocationChanged 方法。

```
public void onLocationChanged(Location location1) {
        // Updating location and zoom
        controller.setCenter(new GeoPoint(
                (int) (location.getLatitude() * 1000000), (int) (location
                        .getLongitude() * 1000000)));
        controller.setZoom(15);

    Criteria crit = new Criteria();
    towers = locationManager.getBestProvider(crit, false);

    location = locationManager.getLastKnownLocation(towers);

    //Trying to get MyPostion.
    Location myLocation = new Location("point A");

    myLocation.setLongitude(location.getLongitude());
    myLocation.setLatitude(location.getLatitude());

    Location locationB = new Location("point B");

    locationB.setLatitude(55777816);
    locationB.setLongitude(12533358);

    float distance = myLocation.distanceTo(locationB);

    //Showing the distance
        AlertDialog alert = new AlertDialog.Builder(GoogleMaps.this)
                .create();
        alert.setTitle((int)distance);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:01:48.480

从外观上看，您正在接收位置更新。Location 对象具有计算到另一个位置的距离的功能。这样你就可以检查你是否在半径范围内。

# php - 本地主机、apache 和 Macintosh

> ID：14203834
> 
> 赞同：2
> 
> 时间：2013-01-07T20:52:48.567
> 
> 标签：php, apache, localhost

服务器/端口新手在这里。我刚刚为我的 Mac OS X Lion 下载了最新的 Apache。当我输入 http://localhost/（没有空格）时，它会出现一个网页，上面写着“它可以工作”。但是，我无法打开任何其他网页。我试图让它读取移动 Web 应用程序的 PHP 文档，但它一直 404 并说该文档不存在（到目前为止，它读取的唯一文档是 index.html 文档，上面写着“它可以工作”）。我尝试过诸如 http://local host/User/directoryofthemobileapp/index.php 之类的东西，以及各种类似的东西，然后我尝试将移动应用程序的副本放入带有“It works”html doc 的文件夹中，它仍然无法识别它。“It works”文档的路径是 /Library/WebServer/Documents/index.html.en，但此信息没有 还没有帮助我。我尝试了很多不同的 URL 来访问我的 Mac 上的文档，但无济于事。

提前致谢！帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:02:30.400

更改 index.html.en 的内容，将其放入其中

```
<?php
phpinfo();
?> 
```

如果可行，它应该告诉您 php 确实设置正确以及您的所有目录在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:05:06.570

如果您希望进行一些 PHP 开发，我建议您使用所谓的 MAMP 堆栈进行设置。它代表 Mac、Apache、PHP、MySQL。

这里有一个很棒的（免费）程序，可让您轻松设置：http: [//www.mamp.info/en/index.html](http://www.mamp.info/en/index.html)

通过 MAMP 的简单界面，您可以手动将 Apache 文档根目录设置到 Mac 上的任何位置，这样您就可以开始在本地提供文件。

一旦您对配置和服务器端技术感到更舒服，我就不能推荐 Vagrant (http://www.vagrantup.com)。它允许您设置和配置虚拟服务器。我在 LAMP 堆栈上进行所有的 PHP 开发，并且我可以完全控制。这是一次很棒的学习经历。使用 Puppet 和 Chef 之类的配置工具，您可以在任何机器上部署您的开发环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:58:47.687

Mac OSX (Lion + atleast) 上 apache 的默认文档根目录是

```
/Library/WebServer/Documents/ 
```

您需要将文档放在这里以便能够从浏览器访问它们或更改 apache 配置以将文档根目录指向您机器上的相应目录。

您还必须确保网络服务器有权读取您尝试通过 Internet 提供的文件。例如下面的目录结构代表我的 Mac 的 /Library/WebServer/Documents/ 目录：

```
-rw-r--r--  1 root  wheel  31958 Jun 20  2012 PoweredByMacOSXLarge.gif
-rw-r--r--  1 root  wheel   3726 Jun 20  2012 PoweredByMacOSX.gif
-rw-r--r--  1 root  wheel     44 Jul 31 13:53 index.html.en
-rw-r--r--  1 root  wheel     44 Jan  7 16:00 index.php 
```

由于 apache 在我的机器上以 Root 身份运行（顺便说一句，apache 不应该作为特权用户运行，但是我的网络服务器没有暴露在互联网上，所以在我的情况下几乎没有风险）它可以读取所有目录中的文件，当我将浏览器指向 http://localhost/index.php 时，我看到了 index.php 的内容：

```
<?php
    echo '<h1>This also works</h1>';
?> 
```

# mysql - MYSQL_DUMP 导出数据库

> ID：14203838
> 
> 赞同：1
> 
> 时间：2013-01-07T20:52:58.637
> 
> 标签：mysql

尝试从 MAMP 服务器导出数据库。我试过命令：

```
# mysql_dump -u root -proot db_name > db_name.sql

# Applications/MAMP/Library/bin/mysql_dump -u root -proot db_name > db_name.sql 
```

有和没有# 符号。

我得到的只是一个里面什么都没有的文件。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:55:17.193

mysqldump -u root -proot **yourdatabase** > export.sql 工作正常

# sitecore - Sitecore 内容编辑器深度链接

> ID：14203841
> 
> 赞同：2
> 
> 时间：2013-01-07T20:53:13.380
> 
> 标签：sitecore

在 Sitecore 6 中，有没有办法深度链接到内容编辑器？我想为类似的东西添加书签

`https://mysite.com/sitecore/shell/Applications/Content%20editor.aspx?item=/sitecore/Content/Data/foo`

并让该书签直接转到内容编辑器中的该项目。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:41:29.077

您需要做的是使用**fo**参数和项目 id 而不是路径，例如：

```
http://localhost/sitecore/shell/Applications/Content%20Editor.aspx?fo={4142d44b-2237-4795-b219-85e70420fced} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:00:46.577

QueryString 参数在`ro`某种程度上起作用；例如：`https://mysite.com/sitecore/shell/Applications/Content%20editor.aspx?ro=/sitecore/Content/Data/foo`工作，除了它把那个项目放在内容编辑器的根目录下。

任何人都知道如何在指定项目打开的情况下显示整个树？

# intellij-idea - 使用 IntelliJ 从源代码构建 Joda？

> ID：14203845
> 
> 赞同：1
> 
> 时间：2013-01-07T20:53:24.713
> 
> 标签：intellij-idea, jodatime

我已经导入了 Joda 源的 maven 项目（https://github.com/JodaOrg/joda-time）并尝试构建该项目。当我这样做时，我得到以下堆栈跟踪：

> 线程“主”java.io.IOException 中的异常：找不到资源：“org/joda/time/tz/data/ZoneInfoMap”类加载器：org.joda.time.tz.ZoneInfoProvider 的 sun.misc.Launcher$AppClassLoader@1f3e8d89 .openResource(ZoneInfoProvider.java:212) 在 org.joda.time.tz.ZoneInfoProvider.(ZoneInfoProvider.java:123) 在 org.joda.time.tz.ZoneInfoProvider.(ZoneInfoProvider.java:82) 在 org.joda。 time.DateTimeZone.getDefaultProvider(DateTimeZone.java:462) 在 org.joda.time.DateTimeZone.setProvider0(DateTimeZone.java:416) 在 org.joda.time.DateTimeZone.(DateTimeZone.java:115) 在 org.joda。 time.DateTimeUtils.(DateTimeUtils.java:48) 在 org.joda.time.base.BaseDateTime.(BaseDateTime.java:61) 在 org.joda.time.DateTime.(DateTime.java:155) 在 org.joda。 sun.reflect 的 time.MainTest.main(MainTest.java:12)。NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method. java:597) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

下面是 ZoneInfoProvider 类的样子：

```
/*
 *  Copyright 2001-2009 Stephen Colebourne
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
package org.joda.time.tz;

import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.lang.ref.SoftReference;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;
import java.util.concurrent.ConcurrentHashMap;

import org.joda.time.DateTimeZone;

/**
 * ZoneInfoProvider loads compiled data files as generated by
 * {@link ZoneInfoCompiler}.
 * <p>
 * ZoneInfoProvider is thread-safe and publicly immutable.
 *
 * @author Brian S O'Neill
 * @since 1.0
 */
public class ZoneInfoProvider implements Provider {

    /** The directory where the files are held. */
    private final File iFileDir;
    /** The resource path. */
    private final String iResourcePath;
    /** The class loader to use. */
    private final ClassLoader iLoader;
    /** Maps ids to strings or SoftReferences to DateTimeZones. */
    private final Map<String, Object> iZoneInfoMap;

    /**
     * ZoneInfoProvider searches the given directory for compiled data files.
     *
     * @throws IOException if directory or map file cannot be read
     */
    public ZoneInfoProvider(File fileDir) throws IOException {
        if (fileDir == null) {
            throw new IllegalArgumentException("No file directory provided");
        }
        if (!fileDir.exists()) {
            throw new IOException("File directory doesn't exist: " + fileDir);
        }
        if (!fileDir.isDirectory()) {
            throw new IOException("File doesn't refer to a directory: " + fileDir);
        }

        iFileDir = fileDir;
        iResourcePath = null;
        iLoader = null;

        iZoneInfoMap = loadZoneInfoMap(openResource("ZoneInfoMap"));
    }

    /**
     * ZoneInfoProvider searches the given ClassLoader resource path for
     * compiled data files. Resources are loaded from the ClassLoader that
     * loaded this class.
     *
     * @throws IOException if directory or map file cannot be read
     */
    public ZoneInfoProvider(String resourcePath) throws IOException {
        this(resourcePath, null, false);
    }

    /**
     * ZoneInfoProvider searches the given ClassLoader resource path for
     * compiled data files.
     *
     * @param loader ClassLoader to load compiled data files from. If null,
     * use system ClassLoader.
     * @throws IOException if directory or map file cannot be read
     */
    public ZoneInfoProvider(String resourcePath, ClassLoader loader)
        throws IOException
    {
        this(resourcePath, loader, true);
    }

    /**
     * @param favorSystemLoader when true, use the system class loader if
     * loader null. When false, use the current class loader if loader is null.
     */
    private ZoneInfoProvider(String resourcePath,
                             ClassLoader loader, boolean favorSystemLoader) 
        throws IOException
    {
        if (resourcePath == null) {
            throw new IllegalArgumentException("No resource path provided");
        }
        if (!resourcePath.endsWith("/")) {
            resourcePath += '/';
        }

        iFileDir = null;
        iResourcePath = resourcePath;

        if (loader == null && !favorSystemLoader) {
            loader = getClass().getClassLoader();
        }

        iLoader = loader;

        iZoneInfoMap = loadZoneInfoMap(openResource("ZoneInfoMap"));
    }

    //-----------------------------------------------------------------------
    /**
     * If an error is thrown while loading zone data, uncaughtException is
     * called to log the error and null is returned for this and all future
     * requests.
     * 
     * @param id  the id to load
     * @return the loaded zone
     */
    public DateTimeZone getZone(String id) {
        if (id == null) {
            return null;
        }

        Object obj = iZoneInfoMap.get(id);
        if (obj == null) {
            return null;
        }

        if (id.equals(obj)) {
            // Load zone data for the first time.
            return loadZoneData(id);
        }

        if (obj instanceof SoftReference<?>) {
            @SuppressWarnings("unchecked")
            SoftReference<DateTimeZone> ref = (SoftReference<DateTimeZone>) obj;
            DateTimeZone tz = ref.get();
            if (tz != null) {
                return tz;
            }
            // Reference cleared; load data again.
            return loadZoneData(id);
        }

        // If this point is reached, mapping must link to another.
        return getZone((String)obj);
    }

    /**
     * Gets a list of all the available zone ids.
     * 
     * @return the zone ids
     */
    public Set<String> getAvailableIDs() {
        // Return a copy of the keys rather than an umodifiable collection.
        // This prevents ConcurrentModificationExceptions from being thrown by
        // some JVMs if zones are opened while this set is iterated over.
        return new TreeSet<String>(iZoneInfoMap.keySet());
    }

    /**
     * Called if an exception is thrown from getZone while loading zone data.
     * 
     * @param ex  the exception
     */
    protected void uncaughtException(Exception ex) {
        Thread t = Thread.currentThread();
        t.getThreadGroup().uncaughtException(t, ex);
    }

    /**
     * Opens a resource from file or classpath.
     * 
     * @param name  the name to open
     * @return the input stream
     * @throws IOException if an error occurs
     */
    private InputStream openResource(String name) throws IOException {
        InputStream in;
        if (iFileDir != null) {
            in = new FileInputStream(new File(iFileDir, name));
        } else {
            String path = iResourcePath.concat(name);
            if (iLoader != null) {
                in = iLoader.getResourceAsStream(path);
            } else {
                in = ClassLoader.getSystemResourceAsStream(path);
            }
            if (in == null) {
                StringBuilder buf = new StringBuilder(40)
                    .append("Resource not found: \"")
                    .append(path)
                    .append("\" ClassLoader: ")
                    .append(iLoader != null ? iLoader.toString() : "system");
                throw new IOException(buf.toString());
            }
        }
        return in;
    }

    /**
     * Loads the time zone data for one id.
     * 
     * @param id  the id to load
     * @return the zone
     */
    private DateTimeZone loadZoneData(String id) {
        InputStream in = null;
        try {
            in = openResource(id);
            DateTimeZone tz = DateTimeZoneBuilder.readFrom(in, id);
            iZoneInfoMap.put(id, new SoftReference<DateTimeZone>(tz));
            return tz;
        } catch (IOException ex) {
            uncaughtException(ex);
            iZoneInfoMap.remove(id);
            return null;
        } finally {
            try {
                if (in != null) {
                    in.close();
                }
            } catch (IOException ex) {
            }
        }
    }

    //-----------------------------------------------------------------------
    /**
     * Loads the zone info map.
     * 
     * @param in  the input stream
     * @return the map
     */
    private static Map<String, Object> loadZoneInfoMap(InputStream in) throws IOException {
        Map<String, Object> map = new ConcurrentHashMap<String, Object>();
        DataInputStream din = new DataInputStream(in);
        try {
            readZoneInfoMap(din, map);
        } finally {
            try {
                din.close();
            } catch (IOException ex) {
            }
        }
        map.put("UTC", new SoftReference<DateTimeZone>(DateTimeZone.UTC));
        return map;
    }

    /**
     * Reads the zone info map from file.
     * 
     * @param din  the input stream
     * @param zimap  gets filled with string id to string id mappings
     */
    private static void readZoneInfoMap(DataInputStream din, Map<String, Object> zimap) throws IOException {
        // Read the string pool.
        int size = din.readUnsignedShort();
        String[] pool = new String[size];
        for (int i=0; i<size; i++) {
            pool[i] = din.readUTF().intern();
        }

        // Read the mappings.
        size = din.readUnsignedShort();
        for (int i=0; i<size; i++) {
            try {
                zimap.put(pool[din.readUnsignedShort()], pool[din.readUnsignedShort()]);
            } catch (ArrayIndexOutOfBoundsException ex) {
                throw new IOException("Corrupt zone info map");
            }
        }
    }

} 
```

另外值得注意的是 pom.xml 文件部分包含以下内容：

> ```
>  <execution>
>         <phase>compile</phase>
>         <configuration>
>           <target>
>             <property name="tz.src" value="${project.build.sourceDirectory}/org/joda/time/tz/src" />
>             <property name="tz.dst" value="${project.build.outputDirectory}/org/joda/time/tz/data" />
>             <!--uptodate property="tz.build.notneeded" targetfile="${tz.dst}/ZoneInfoMap" >
>               <srcfiles dir="${tz.src}" includes="**/*.*"/>
>             </uptodate-->
>             <mkdir dir="${tz.dst}" />
>             <java classname="org.joda.time.tz.ZoneInfoCompiler" fork="true" failonerror="true">
>               <classpath refid="maven.compile.classpath" />
>               <sysproperty key="org.joda.time.DateTimeZone.Provider" 
> ```
> 
> value="org.joda.time.tz.UTCProvider" /> 运行

我不确定如何解决这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-07T17:36:16.713

如果您错过初始化，可能会发生这种情况：

```
JodaTimeAndroid.init(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:04:07.600

转到运行配置 > 启动前 > 单击 + 号 > 单击“maven 目标”> 查找并添加“joda time: compile”

# ruby-on-rails - heroku worker 的替代 rake 任务？

> ID：14203847
> 
> 赞同：0
> 
> 时间：2013-01-07T20:53:31.160
> 
> 标签：ruby-on-rails, ruby, heroku

我试图找到一种解决方案，每隔几个小时在 heroku 上运行一个后台任务，而无需支付昂贵的工人费用。

到目前为止，我已经实现了一个带有特定 def 的 rails 控制器，它调用该作业。所以，每当我点击网址时，它都会正常运行。现在我正试图找到一个解决方案，每隔几个小时点击一次这个网址。

当然，我可以使用类似的东西从另一台服务器运行 cron 任务

`/usr/bin/curl -s "http://url/of/hourly/task" > /dev/null`

或者只是使用 webcron 服务，但我想要更多的控制。我在第二个 Rails 应用程序上尝试了`whenever`gem [https://github.com/javan/whenever](https://github.com/javan/whenever)，但我无法让它正常运行。无论如何，我是红宝石的新手。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T22:05:24.263

使用[`Heroku Scheduler`](https://devcenter.heroku.com/articles/scheduler)插件。它可以在指定时间每 10 分钟、每小时或每天运行一次作业。

# salesforce - Salesforce.com Apex 测试类问题：需要硬编码商机自定义字段值

> ID：14203851
> 
> 赞同：2
> 
> 时间：2013-01-07T20:54:11.050
> 
> 标签：salesforce

我有一个带有文本字段的 VF 页面表单。此文本字段的值与现有机会自定义字段进行比较。如果此文本字段的值存在于商机中，我会继续创建新记录。

一切正常，除非我创建了 Apex 测试类。

我需要创建一个机会并对自定义字段的值进行硬编码。不幸的是，这个字段是不可写的。

有没有人遇到过这个问题？

这是我得到的错误：错误：编译错误：字段不可写：Opportunity.Deal_Registration_ID__c 在第 9 行第 103 列

下面是我的 Apex 课程。

我的测试班在最底层。

任何帮助是极大的赞赏。

干杯! 隆美尔

```
public with sharing class VaultVF {

public Vault__c vault {get; set;}
public List<String> errorMsgs {get; set;}
public String saveResult {get; set;}
public String dealReg {get; set;}
public String oppId {get; set;}
public String email {get; set;}
public Boolean scenario1{get; set;}
public Boolean scenario2{get; set;}
public Boolean scenario3{get; set;}

// Generates country dropdown from country settings 

public List<SelectOption> getCountriesSelectList() {
    List<SelectOption> options = new List<SelectOption>();
    options.add(new SelectOption('', '-- Select One --'));        

    // Find all the countries in the custom setting 

    Map<String, Country__c> countries = Country__c.getAll();

    // Sort them by name 

    List<String> countryNames = new List<String>();
    countryNames.addAll(countries.keySet());
    countryNames.sort();

    // Create the Select Options. 

    for (String countryName : countryNames) {
        Country__c country = countries.get(countryName);
        options.add(new SelectOption(country.Two_Letter_Code__c, country.Name));
    }
    return options;
}

//Constructor, set defaults
public VaultVF(ApexPages.StandardController controller) {

    vault = (vault__c)controller.getRecord();

    //Populate list of random characters for CAPTCHA verification
    characters = new List<String>{'a','b','c','d','e','f','g','h',
        'i','j','k','m','n','p','q','r','s','t','u','v','w',
        'x','y','z','1','2','3','4','5','6','7','8','9'
    };

    errorMsgs = new List<String>();

}

//Determine if page has error so errors message can be displayed
public boolean getHasErrors(){
    if(ApexPages.hasMessages() == true){
        if(errorMsgs == null){
            errorMsgs = new List<String>();             
        }

        //Loop through errors and add to a list
        for(ApexPages.Message m : ApexPages.getMessages()){
            if(m.getSummary().startsWith('Uh oh.')){
                errorMsgs.add(String.valueOf(m.getSummary()));
            }
        }
    }
    return ApexPages.hasMessages();     
}

public void save(){
    errorMsgs = new List<String>();

    //Make sure captcha was correct
    if(validateCAPTCHA() == false){
        errorMsgs.add('Verification code was incorrect.');
        captchaInput = '';
    }

    //Make sure the Scenario is selected        
    if(scenario1 == true){
        vault.Scenario__c = 'BIG-IP as a Firewall';
    }else if(scenario2 == true){
        vault.Scenario__c = 'BIG-IP providing firewall service in conjunction with other vendors';
    }else if(scenario3 == true){
        vault.Scenario__c = 'BIG-IP front ending Firewalls';
        if(vault.Load_Balancer_is_a_Firewall__c == null){
           errorMsgs.add('Please specify if the load balancer is a firewall.');
        }
        if(vault.Providing_DDos_Connection__c == null){
           errorMsgs.add('Please specify if this is providing DDos connection level protection for firewalls or both.');
        }
        if(vault.Providing_DDos_protection_except_ASM__c == null){
           errorMsgs.add('Please specify if we are providing DDos protection (except ASM).');
        }
        if(vault.No_Traffic_Traverse__c == null){
           errorMsgs.add('Please specify if there is Traffic that does not traverse the Firewalls.');
        }
        if(vault.Firewall_Vendor_Name__c == null){
           errorMsgs.add('Please specify a Firewall Vendor.');
        }
    } else {
        errorMsgs.add('Please select one of three Scenarios that is similar to your setup');
    }     

    //-----Need to make sure deal registration number on opportuntiy is valid.-----

    //Set some sort of is valid deal reg flag to false. We will assume the deal reg Id entered is invalid until we determine it is valid
    vault.isValidDealReg__c = false;

    //Query Account Id, and Deal_Registration_Id__c from the opportunity object where the deal registration Id equals the value entered in the form
    List<Opportunity> opps = [select Id, Deal_Registration_ID__c from Opportunity where Deal_Registration_ID__c = :vault.Deal_Registration__c];

    //check to see if  registration id on the opp match the entered value    
    if(opps.size() > 0 && opps[0].Deal_Registration_ID__c == vault.Deal_Registration__c){

    //If they do match set the valid deal reg Id flat to true
        vault.isValidDealReg__c = true;
        vault.Related_Opp__c = opps[0].Id;

    //If they don't match then query all contacts on the account related to the opportunity
    }

    //If is valid deal reg flag is false add a message to the errorMSgs list indicated the entered
    //deal registration is not valid with details on who they should contact
    if(errorMsgs.size()>0){
        //stop here
    } else if(vault.isValidDealReg__c == false){
        errorMsgs.add('Deal Registration # was incorrect. Please contact your representative.');
    } else {
        try{
            vault.Status__c = 'Application Received';
            insert vault;
            saveResult = 'success';

        }catch(exception e){
            ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.FATAL, 'Uh oh. Something didn\'t work quite right. Please contact partners@f5.com for assistance. \n\n' + e.getMessage()));                
            saveResult = 'fail';
        }
    }

}

//------------------------Code for CAPTCHA verification----------------------------
public String captchaInput {get; set;}
List<String> characters;
String char1; 
String char3; 
String char5;

//This methods simply returns a random number between 0 and the size of the character list
public Integer randomNumber(){
    Integer random = Math.Round(Math.Random() * characters.Size());
    if(random == characters.size()){
        random--;
    }
    return random;
}

/*Here we have 6 get methods that return 6 random characters to the page.
For chars 1,3, and 5 (the black characters) we are saving the the values so 
that we can compare them with the user's input */
public String getChar1(){
    char1 = characters[randomNumber()];
    return char1;
}
public String getChar2(){
    return characters[randomNumber()];
}
public String getChar3(){
    char3 = characters[randomNumber()];
    return char3;
}
public String getChar4(){
    return characters[randomNumber()];
}
public String getChar5(){
    char5 = characters[randomNumber()];
    return char5;
}
public String getChar6(){
    return characters[randomNumber()];
}

public String correctAnswer(){
    return char1 + char3 + char5;   
}

public Boolean validateCAPTCHA(){
    if(captchaInput.length() == 3 && captchaInput.subString(0,1) == char1 && captchaInput.subString(1,2) == char3 && captchaInput.subString(2,3) == char5){
        return true;
    }else{
        return false;
    }
} 
```

}

下面是测试类

```
@isTest
public class VaultVFTEST {

/*This tests the VaultVF class on the Vault__c object*/

static testMethod void VaultVFTEST() {

    //Create opp, hardcode the Deal_Registration_Id__c field with 'x111111111' and insert opp
    Opportunity opp = new Opportunity(Name='test opp', StageName='stage', Deal_Registration_Id__c='x111111111', Probability = 95, CloseDate=system.today());
    insert opp;

    //Create and insert Vault record
    Vault__c vault = new Vault__c(
        Deal_Registration__c = 'x111111111',
        Scenario__c = 'BIG-IP front ending Firewalls',
        isValidDealReg__c = true,
        Status__c = 'Application Received',
        Load_Balancer_is_a_Firewall__c = 'Yes',
        Providing_DDos_Connection__c = 'Firewalls',
        Providing_DDos_protection_except_ASM__c = 'Yes',
        No_Traffic_Traverse__c = 'Yes',
        Firewall_Vendor_Name__c = 'Firewall Vendor Company',
        First_Name__c = 'Test First Name',
        Last_Name__c = 'Test Last Name',
        Company_Name__c = 'Test Company Name',
        Phone__c = '(206) 946-3126',
        Email__c = 'test@email.com',
        Country__c = 'United States',
        Additional_Info__c = 'Test Additional Info',
        Related_Opp__c = opp.Id
    );

    //Now insert the vault record to invoke the VaultVF class
    Test.startTest();
    insert vault;
    Test.stopTest();

    //Assertion Testing - Check to make sure the Deal_Registration__c value
    //matches the Deal_Registration_Id__c value of the related opportunity
    for(Vault__c v : [select Id, Deal_Registration__c from Vault__c where Deal_Registration__c IN :vault]){
        system.assertEquals(v.Deal_Registration__c, opp.Deal_Registration_Id__c);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:45:15.543

什么是`Opportunity.Deal_Registration_ID__c`字段类型？如果它是公式字段或自动编号，那么 Apex 真的无法写入。

一般来说，在这种情况下，您必须插入机会（没有设置此字段），然后在成功插入后从数据库中读取它。如果它是自动编号 - 魔术会自行发生（尽管我不会说最好有一些连续的许可证号码并且容易伪造;）），如果它是一个公式字段 - 确保你已经设置了所有在插入之前用于计算的字段。

所以这样的事情应该可以解决问题：

```
Opportunity opp = new Opportunity(Name='test opp', StageName='stage', Probability = 95, CloseDate=system.today());
insert opp;
opp = [SELECT Id, Name, Deal_Registration_ID__c FROM Opportunity WHERE Id = :opp.Id];

// Optionally - make sure value was set
System.assertNotEquals(null, opp.Deal_Registration_ID__c);
System.assert(opp.Deal_Registration_ID__c.length() > 0); // if it's a String

Vault__c vault = new Vault__c(
    Deal_Registration__c = opp.Deal_Registration_ID__c ,
    Scenario__c = 'BIG-IP front ending Firewalls',
    isValidDealReg__c = true,
    Status__c = 'Application Received',
    Load_Balancer_is_a_Firewall__c = 'Yes',
    Providing_DDos_Connection__c = 'Firewalls',
    Providing_DDos_protection_except_ASM__c = 'Yes',
    No_Traffic_Traverse__c = 'Yes',
    Firewall_Vendor_Name__c = 'Firewall Vendor Company',
    First_Name__c = 'Test First Name',
    Last_Name__c = 'Test Last Name',
    Company_Name__c = 'Test Company Name',
    Phone__c = '(206) 946-3126',
    Email__c = 'test@email.com',
    Country__c = 'United States',
    Additional_Info__c = 'Test Additional Info',
    Related_Opp__c = opp.Id
); 
```

# servicestack - ServiceStack.OrmLite 中 SQL Server 异常处理的最佳实践？

> ID：14203855
> 
> 赞同：1
> 
> 时间：2013-01-07T20:54:29.987
> 
> 标签：servicestack, ormlite-servicestack

我将 ServiceStack.OrmLite 与 SQL Server 提供程序一起使用。

给定下面的代码片段：

1.  是否有检索 SQL Server 异常的最佳实践？

2.  知道一条记录是否在 db.Single 调用的结果中的最佳方法是什么？当使用无效的消息 ID（即不在数据集中的消息 ID）调用 db.Single 时，似乎出现异常。如果数据库中存在消息 ID，则调用无异常返回。有没有办法在没有 try catch 块的情况下做到这一点？

如果在没有 try/catch 块的情况下进行调用，则会出现异常：

> ArgumentNullException 值不能为空。
> 参数名称：ENSMessageEntry: 'ID = 25' 不存在

这是我的代码：

```
public ENSStatusResponse GetMessageStatus(int messageID)
{
    var statusResponse = new ENSStatusResponse();

    using (var db = DBConnectionFactory.OpenDbConnection())
    {
        try
        { 
            ENSMessageEntry mes = db.Single<ENSMessageEntry>("ID = " + messageID);
            statusResponse.ENSMessageStatus = mes.Id;
        }
        catch  
        {   
            statusResponse.ENSMessageStatus = 0;
        }
    } 

    return statusResponse;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T22:24:03.100

1.  我认为这个查询不会生成 SQL Server 异常，异常来自`.Single`假设会有结果，如果没有则抛出。

2.  使用`Db.GetByIdOrDefault<ENSMessageEntry>(messageID)`并检查 null

# php - mysql 数据从 php 发送到电子邮件

> ID：14203856
> 
> 赞同：0
> 
> 时间：2013-01-07T20:54:36.497
> 
> 标签：php, mysql

在 php 文件中显示来自 mysql 查询的数据：

```
while ($row = mysql_fetch_array($sql)){ 
  echo 'ID: '.$row['ID']; 
  echo ' First Name: '.$row['First']; 
  echo ' Last Name: '.$row['Last']; 
  echo ' Phone: '.$row['Phone']; 
```

}

我需要将这些结果发送到电子邮件
怎么做？喜欢：

```
$message = 'ID: '.$row['ID']; 
```

不工作：我收到没有结果的消息“ID：”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:57:42.013

你没有`$to`地址。此外，请删除`@`并且不要抑制错误。另外，检查是否`$headers`已定义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T20:57:24.323

看看[PHPMailer 库](http://code.google.com/a/apache-extras.org/p/phpmailer/)。它被许多 php 开发人员使用，它非常易于使用且功能强大。

# c# - 如何在 Silverlight 和 WCF 中与域交互？

> ID：14203860
> 
> 赞同：0
> 
> 时间：2013-01-07T20:54:52.503
> 
> 标签：c#, .net, wcf, silverlight

目前，我正在开发一个项目，该项目直接使用**WCF**与 Service 功能而不是**WCF RIA**进行交互。问题是我为silverlight客户端应用程序中的每个实体（服务中）创建模型以进行验证，没关系。但是每次我想在数据库中插入或更新实体时，我都应该使用客户端模型填充服务器实体。有什么办法可以防止这些额外的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:35:50.743

一个典型的 MVVM (Silverlight) 客户端和 (WCF) 服务的第一个版本有很多重复的类型、逻辑和类型之间的映射。

这是创建 WCF RIA 服务的原因之一。

在 MVVM 应用程序的第一个版本中，模型和视图模型将非常相似。当出现新的需求并且视图添加了越来越多的功能时，这些将出现分歧，模型将与视图模型变得非常不同。

模型将由服务确定，而 ViewModel 由视图确定。这将导致映射越来越不重要。

我使用 T4 模板来生成基于 XML 定义的 ViewModel。这避免了编写无聊、重复的映射代码的需要。

**编辑** 请参阅Codeplex 上[的 MVMMapper 项目](http://mvmmapper.codeplex.com/)以使用 T4 生成 ViewModel

# enumeration - 如何在 Pharo 工作区中枚举所有工作区窗口？

> ID：14203861
> 
> 赞同：1
> 
> 时间：2013-01-07T20:54:54.330
> 
> 标签：enumeration, pharo, class-hierarchy

我想在 Pharo 窗口中列出所有工作区窗口。当我移动单击工作区窗口时，选择的项目通常是 PluggableTextMorph 或 TextMorphForEditView。当它是 PluggableTextMorph 时，它拥有一个 TextMorphforEditView，它不是通过单击选择的。

检查或探索层次结构显示模型工作区的 SystemWindow 拥有的层​​次结构更进一步。

我需要什么代码首先列出系统中的所有 TextMorphforEditView(s) 并查找所有权层次结构以确定 SystemWindow 的模型是 Workspace 还是 Transcript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:58:19.837

要获得所有工作区，您可以简单地探索或检查：

```
Workspace allInstances 
```

如果您对所有包含工作区的窗口感兴趣，您可以探索或检查：

```
| listOfWindows |

listOfWindows := Workspace allInstances collect: 
    [:eachWorkspace | eachWorkspace containingWindow] 
```

# image - Kineticjs - 帮助从输入文件上传图像到舞台

> ID：14203871
> 
> 赞同：3
> 
> 时间：2013-01-07T20:55:36.353
> 
> 标签：image, kineticjs

我试图让用户通过 html 中的输入将他​​们自己的图像上传到 kineticJS 阶段。我更喜欢将所有代码保存在一个单独的 js 文件中，这是我目前所拥有的：

```
$(document).ready(function() {

    var stage = new Kinetic.Stage({
        container: 'container',
        width: 900,
        height: 500
    });
    var layer = new Kinetic.Layer();
});

function addImage(){

  var imageObj = new Image();
  imageObj.onload = function() {
    var myImage = new Kinetic.Image({
      x: 140,
      y: stage.getHeight() / 2 - 59,
      image: imageObj,
      width: 106,
      height: 118
    });
    layer.add(myImage);
    stage.add(layer);
  }  

  var f = document.getElementById('uploadimage').files[0];
  var name = f.name;
  var url = window.URL;
  var src = url.createObjectURL(f);

  imageObj.src = src;

} 
```

如何将舞台暴露给 addImage() 方法？目前它超出了它的范围，我无法弄清楚如何解决这个问题，因为在向其添加内容之前，画布不会显示在 html 中。我需要将这些图像添加为图层以供将来操作，因此希望使用 kineticJS。我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:04:31.610

[http://jsfiddle.net/8XKBM/12/](http://jsfiddle.net/8XKBM/12/)

我设法通过附加一个事件来让你的 addImage 函数工作。如果您在 Firefox 中使用 Firebug 控制台或仅按 Ctrl+Shift+J，您可能会收到 javascript 错误。原来你的函数被读取为未定义，所以现在警报正在工作，但你的图像没有被添加，因为它们还没有存储在任何地方，比如服务器上（必须先上传到某个地方）

我使用 jQuery 来附加事件，因为您应该使用它而不是 onclick='function()'

```
$('#addImg').on('click', function() {
    addImage();
  }); 
```

并改变了

```
<div>
    <input type="file" name="img" size="5" id="uploadimage" />
    <button id='addImg' value="Upload" >Upload</button>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:32:35.580

您真正想做的是让用户使用 AJAX 即时上传照片（到服务器），（可用于 jQuery，不干扰 KineticJS）。然后，成功后，您可以使用您的功能将照片绘制到画布上。确保使用：

```
layer.draw() 
```

或者

```
stage.draw() 
```

在 addImage() 函数的末尾，以便在您的画布上绘制照片，因为浏览器在页面加载和最后定义 img.src 之后才会绘制图像。所以，这基本上只需要事情的顺序正确而不是困难。

所以，第 1 步：使用 AJAX 上传（到服务器），第 2 步：添加到阶段，第 3 步：重绘阶段

# regex - 第一次匹配时使用或使用第二个正则表达式的正则表达式？

> ID：14203872
> 
> 赞同：4
> 
> 时间：2013-01-07T20:55:42.277
> 
> 标签：regex, coldfusion

我有一种情况是我需要删除字符串的一部分，我想我可以为此使用正则表达式。

测试用例类似于

```
LINDA L
LINDSAY GRIFFIN
LINDSAY LIGHTHOUSE
LINDSAY PETERSON 
```

我想删除第一个的尾随`L\b`或第二个和第三个的前导`L.*?\b`，这应该让我知道：

```
LINDA
GRIFFIN
LIGHTHOUSE
PETERSON 
```

`L\b|L.*?\b`删除整个第一行和第三行（除了空格），这不是我想要的。有没有办法用一种表达方式做到这一点？我假设因为第一个正则表达式匹配，它不会移动到第二个。

谢谢大家，我们最终只使用了 CF 条件和两个替换而不是一个复杂的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:31:21.670

我认为这完成了你想做的事情：

```
(\bL$)|((?!.*\bL$)^L.*?\b) 
```

解释一下，`(\bL$)`匹配第一个模式：单词边界，然后是 L，然后是行尾。

`((?!.*\bL$)^L.*?\b)`匹配一行开头的 L，然后是单词的其余部分（`.*?\b`正如您所拥有的，是到达单词末尾的合理模式）。This:`(?!.*\bL$)`是一个否定的前瞻，如果后面的模式匹配，则阻止匹配`?!`。`\bL$`在这种情况下，如果模式出现在行中的任何位置，它将阻止匹配。

反正我就是这么想的。当然是丑陋的。正如您在问题中所暗示的那样，一个更好的解决方法是使用两个单独的正则表达式模式，只有在第一个没有找到该行的匹配项时才运行第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:39:51.977

@femtoRgon 几乎得到了它，但留下了一些空白。一个完整的 CF 解决方案是：

```
result = reReplace(string, "(\s*\bL$)|((?!.*\bL$)^L.*?\b\s*)", "", "ONE"); 
```

`string`“LINDA L”或“LINDSAY GRIFFIN”等在哪里？

这对您提供的所有示例进行了测试，但它对您指定的规则非常字面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T00:10:12.660

***注意：**这是假设您有一个字符串并希望在相关时应用两个操作（即第二个不依赖于第一个）；如果这不是你想要的，你需要澄清这个问题。*

用一个正则表达式来做只会让事情变得不必要地丑陋（因此难以维护）——这是一种用两个来做的方法：

```
Input.replaceFirst('\s+L(?=\n)','').replaceAll('(?<=\n)L\w+\s+','') 
```

第一个表达式从第一行删除 L（和前面的空格）（因为我们使用的是 replaceFirst，所以只有第一行）。

第二个表达式删除了行首的所有 L 字（第一行除外，它之前没有换行符）。

*（因为在这两种情况下我们总是有`\s+`匹配的，这里不需要显式的`\b`；如果你不想删除空格，你可以使用一个来代替。）*

如果您更喜欢使用 CFML 替换功能，则等效为：

```
rereplace( rereplace(Input,'\s+L(?=\n)','') , '(\n)L\w+\s+' , '\1' , 'all' ) 
```

就我个人而言，我发现另一种方式更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T21:21:27.053

您应该检查条件正则表达式。

[http://www.regular-expressions.info/conditional.html](http://www.regular-expressions.info/conditional.html)

# raspberry-pi - 使用 dd 命令从 Linux 克隆可引导 SD 卡

> ID：14203873
> 
> 赞同：-1
> 
> 时间：2013-01-07T20:55:42.703
> 
> 标签：raspberry-pi

我有一个 Raspberry Pi，上面有默认的商店购买的操作系统。我想将 SD 卡擦干净，以便安装新的操作系统，但我想将原始操作系统保留在备份光盘映像中。我计划将它存储在一个 .bin 文件中。SD 卡有两个分区。

我使用以下命令来确定哪个驱动器是 SD 卡。

```
sudo dmesg | tail 
```

- 输出 -

```
[ 2954.642182] sd 3:0:0:0: [sdb] Attached SCSI removable disk _
[ 2955.149750] EXT4-fs (sdb2): mounted filesystem with ordered data mode. Opts: (null) 
```

我相信这告诉我它在 dev/sdb2 下，但我也尝试过 dev/sdb、~/dev/sdb 和 ~/dev/sdb2。我使用以下命令创建图像：

```
dd if="dev/sdb2" of="~/Desktop/Pi Backup/Pi.bin" 
```

但是当我尝试这样做时，它会返回错误消息

```
dd: opening `dev/sdb2': No such file or directory 
```

我正在运行 Linux Mint，Cinnamon。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:39:54.453

而不是这样做：

```
sudo dd if="/dev/mmcblk0p1" of="Pi_1.bin"
sudo dd if="/dev/mmcblk0p2" of="Pi_2.bin" 
```

尝试：

```
sudo dd if="/dev/mmcblk0" of="Pi.bin" 
```

`p1`并且`p2`是该设备中的分区，并且您想要制作整个设备的映像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:15:27.690

所有设备都在 /dev 下

dev 在当前目录下寻找 dev 并且 ~/dev 在你的主目录下寻找 dev。

/dev/sdb2 如果是第二个分区，我希望使用也有 /dev/sdb1 （第一个分区）。

须藤dmesg | 尾巴 -30

会给你最后 30 行，那么你应该也能看到 sdb1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T22:19:37.993

我在 Mint 14 上，我做到`mount`了，SD 卡显示为 2 个分区，如下所示

`/dev/mmcblk0p1 on /media/nig/3312-932F type vfat (rw,nosuid,nodev,uid=1000,gid=1000,shortname=mixed,dmask=0077,utf8=1,showexec,flush,uhelper=udisks2)`

`/dev/mmcblk0p2 on /media/nig/b7b5ddff-ddb4-48dd-84d2-dd47bf00564a type ext4 (rw,nosuid,nodev,uhelper=udisks2)`

所以我做了

`sudo dd if="/dev/mmcblk0p1" of="Pi_1.bin"`

`sudo dd if="/dev/mmcblk0p2" of="Pi_2.bin"`

似乎工作，不确定恢复，还没有尝试过

# php - 在 Wordpress 数据库中动态设置永久链接结构会创建 404

> ID：14203876
> 
> 赞同：1
> 
> 时间：2013-01-07T20:56:05.530
> 
> 标签：php, database, wordpress, .htaccess, permalinks

似乎其他人过去在这个问题上遇到过与我类似的问题，但没有人提供完整的答案。

我正在尝试运行一个 PHP 脚本来更新`wp_options`表格中大量 Wordpress 博客的永久链接结构。我想连接到每个数据库并更新永久链接，而无需登录每个博客并通过 UI 更新设置。

我成功连接到数据库并`permalink_structure`使用正确的代码更新了字段，但是在尝试查看任何帖子时会导致 404。

Wordpress 是否更新其他表/字段以完全启用永久链接？我很难找到完整的答案。

**顺便说一句：**如果`.htaccess`通过 Wordpress 用户界面对时间进行了编辑，我看不到它。当我通过 UI 执行此操作时，htaccess 看起来没有变化。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:37:01.567

Wordpress 永久链接 rewrite_rules 有点麻烦。如果你想做一些基本的事情，它们很棒，但是用它来做一些复杂的规则是非常困难的。

你想使用什么确切的结构？

请记住，由 Wordpress 创建的 htaccess 只是将所有内容重定向到 index.php，它会加载 Wordpress 系统 (wp_load())，并且其中一个组件会解析 REQUEST_URI。

首先它尝试将 REQUEST_URI 绑定到它的一个正则表达式中，这使它了解正在请求的资源类型（类别、标签、页面、帖子等），然后它尝试查找它是哪个资源（如果它是一个帖子, 找出哪个帖子是蛞蝓）。

# c# - MVC4 索引操作无法正常工作

> ID：14203881
> 
> 赞同：6
> 
> 时间：2013-01-07T20:56:19.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我创建了一个带有索引操作的控制器。我所有的其他操作都可以很好地返回视图……但由于某种原因，我必须指定完整的 url 才能返回索引视图。这几乎就像我的路线无法正常工作一样。

例如，要转到属性页面，您必须转到 /Properties/Index 而不仅仅是 /Properties/。我的路线如下。任何帮助将不胜感激！

```
routes.MapRoute(
            name: "Index",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T21:01:24.363

通常，出于 ASP.NET 中的安全原因，您不能拥有“属性”路径。默认情况下，C# 项目都带有一个 Properties 文件夹，ASP 会在直接访问时忽略它，以防止文件访问它。

# javascript - JQuery .getJson 不会加载本地文件以及如何转换为 JavaScript 对象。

> ID：14203885
> 
> 赞同：0
> 
> 时间：2013-01-07T20:56:56.180
> 
> 标签：javascript, jquery, html, json, getjson

嘿伙计们，我正在尝试学习如何使用 JSON 文件。我了解基础知识，但我正在尝试将它们加载到 HTML 文件中，但遇到了一些困难。

我遇到的第一个困难是，如果我输入完整的文件扩展名来加载文件，我会收到一个错误“预期的十六进制数字”。我对它进行了一些研究，我认为这是因为在文件扩展名中它是 \u 所以它需要一个十六进制但我不知道如何解决它。

我遇到的第二个问题是，如果我只使用文件扩展名 users.json 它可以在我的编辑器中使用，但不能在浏览器中使用。它根本没有加载文件，代码很好（我相信）。我认为它只是因为文件扩展名而没有加载文件。

关于如何解决我的问题的建议？提前致谢。

```
<body>
for output
<div id="forOutput"></div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>
 var output;
 $(document).ready(function(){
  alert("JQuery loaded");
 });
 $.getJSON('C:\Users\Spencer\Desktop\JSJqueryTesting\JSONTesting\users.json', function(data) {
  output = data;
for (var i in data.users) {
 alert(data.users[i].firstName + " " + data.users[i].lastName+ " " + data.users[i].joined.month);
    }
});
 $("#forOutput").html("User 1 lastname: " + output.users[1].lastName);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:01:45.390

文件扩展名是完美的（.json），但是，您不能加载本地文件（出于安全原因）。如果您尝试做的事情是可能的，那将意味着任何网站都可以访问您的**所有**本地文件。现在这真的不是一个好主意，因此（默认情况下）只允许共享相同域的文件（例如 stackoverflow.com/*）。这称为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

# java - 解析 HTML (android)

> ID：14203892
> 
> 赞同：0
> 
> 时间：2013-01-07T20:57:12.277
> 
> 标签：java, android, html, parsing, jsoup

怎么了？当我单击 BTN 时，它正在停止（意外）。这是代码出错的部分，我使用的库是 Jsoap。请帮帮我

```
btn.setOnClickListener(new OnClickListener() {      
    public void onClick(View v) {

        try {
            doc = Jsoup.connect("http://hitage.ru").get();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //Elements nodes = doc.getElementsByAttributeValueStarting("class", "page node");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:05:15.007

您不能在 UI 线程上进行网络调用。您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或类似的东西。另外，请确保您有

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

在你的`AndroidManifest.xml`.

# codeigniter - codeigniter 通过子文件夹中的 IP 地址访问

> ID：14203895
> 
> 赞同：1
> 
> 时间：2013-01-07T20:57:26.050
> 
> 标签：codeigniter, routes

我在 codeigniter 中有一个后台模块。我将它上传到 a.setver.into backoffice/ 文件夹。服务器只能通过 IP 地址访问，例如 http:// IP ADDRESS /~user/backoffice/ 但它不起作用。我将它上传到另一台服务器上，该服务器可以像 www.domainname.com/backoffice/ 这样访问，它在那里工作正常。我必须在不编辑主机文件的情况下使其在第一台服务器上工作。我想网址中的段顺序一定有问题。

我打开了找不到 sais 文件的错误日志 usr/local/apache/htdocs/home 。home 是默认控制器。

配置 bse url 设置得很好。

# c# - 如何在 VB 2010 中运行 COSMOS OS

> ID：14203902
> 
> 赞同：1
> 
> 时间：2013-01-07T20:57:52.183
> 
> 标签：c#, vb.net, visual-studio-2010, operating-system, cosmos

我正在尝试在（Visual C# Express 2010，对不起，我出于习惯键入 VB）中构建 OS COSMOS，当我按下调试时，我有 VB 2010 COSMOS 文件而不是 VB 2008 文件，它说它是一个类库。我对 COSMOS 很陌生，我之前有 VB 2008 版本，当我按下调试时，它提出了 QEMU、Virtualbox 和 ISO（还有更多，但这是我使用的三个），那么我该如何运行我的操作系统?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-28T21:49:21.123

如果您在 5 年 3 个月后仍然想知道。

你真的不能。除非您在旧的 cosmos 构建上花费了很多时间，但在 Visual Studio 2017 上获得 2018 版的 cosmos 会更容易。在他们编码 cosmos 的 7-8 年内，使用最新版本的 Visual Studio 和 Cosmos 会更有效。但是，如果您习惯了旧的，那么我不会阻止您使用它。但我只是建议获取最新版本并继续查看最新更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-13T17:10:59.303

同样从我的最后一个答案来看，vb.net 和 c# 一样不受支持。最好使用 c#，因为其中一位创建者对我说，与 c# 相比，对 VB.net 的支持并不多。

c# 也与 vb 相同，但只是使用 ; 最后并带有 { } 和更多括号。

对话的链接在这里：[github #964](https://github.com/CosmosOS/Cosmos/issues/964)

最后一个答案：

如果您在 5 年 3 个月后仍然想知道。

你真的不能。除非您在旧的 cosmos 构建上花费了很多时间，但在 Visual Studio 2017 上获得 2018 版 cosmos 会更容易。在他们编码 cosmos 的 7-8 年内，使用最新版本的 Visual Studio 和 Cosmos 会更有效。但是，如果您习惯了旧的，那么我不会阻止您使用它。但我只是建议获取最新版本并继续查看最新更新。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-03T01:46:00.863

有时，Cosmos 无法正确安装 VMware 播放器。您可以尝试[直接从 VMware 网站](https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/7_0)安装它。

# sql - SSIS 上游数据源修改

> ID：14203906
> 
> 赞同：1
> 
> 时间：2013-01-07T20:58:00.967
> 
> 标签：sql, ssis

我创建了一个 SSIS 包，它指定了一个表的 5 列，其中包含 10 列作为我的数据源。该数据源被馈送到下游的几个其他 SSIS 组件。

如果我想更改数据源中引用的列以包含其他 5 列或从我指定的原始 5 列中删除列，有没有办法轻松地将附加列或缺少的列传播到下游组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:07:42.647

这取决于您在 SSIS 包中所做的工作。如果您有任何[异步组件](http://sqlblog.com/blogs/jorg_klein/archive/2008/02/12/ssis-lookup-transformation-is-case-sensitive.aspx)，则需要触摸其中的每一个，让它知道新列应该通过它们。

如果您的数据类型相同并且您只想换出`column6`，`column4`您可以在查询中完成它并且它会正常工作。因此

```
SELECT column6 as column4, ... FROM mysource 
```

只要数据类型匹配，SSIS 就应该顺其自然。不过，您的软件包的未来维护者可能不会欣赏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:08:24.097

新的元数据将自动向下游传播。只要你不在下游使用它们，你就不需要修改任何东西。但是，如果您从源中修改“原始”列，则需要在使用该列的所有组件中刷新元数据。如果没有任何组件使用它，你应该没问题。

更改无法自行传播，需要程序员进入并相应地检查每个组件的元数据。

# html - 将顶部和底部部分添加到 IFRAME

> ID：14203907
> 
> 赞同：1
> 
> 时间：2013-01-07T20:58:01.960
> 
> 标签：html, css, iframe

我目前有一个 iframe，它设置为覆盖我的大部分网页，点击它的链接。现在我在 iframe 的顶部有一个显示我的网站徽标和关闭它的按钮。这是我为此使用的代码：

```
<div id="iframe1_div" class="iframe1">

    <div class="iframe1_points" id="iframe1_points">
        <table cellspacing="0" cellpadding="0" width="100%" height="50px">
        <tr>
        <td width="110px" align="center"><img src="http://mysite.com/logo.png" alt="Website TItle" /></td>
        <td>Website Name</div></td>
        <td width="50px" align="center"><a href="#;" class="close"><img src="http://mysite.com/close.png" class="noborder" title="Close Window" alt="Close" /></a></td></tr>
        </table>
    </div>

    <iframe id="iframe1_self" style="width:100%;height:100%;" scrolling="yes" frameborder="0"></iframe>

</div> 
```

这是与之关联的 CSS：

```
.iframe1{display: none;background: #FFFFFF;margin-top:50px;margin-bottom:50px;float: left;position: fixed;top: 50%; left: 50%;z-index:99999;}

.iframe1_points{display:none;background:#505469;background-repeat:repeat-x;background-position:bottom;color:#f0f0f0;font-size:12px;font-weight:normal;font-size:12px;} 
```

现在这是我无法弄清楚的更棘手的部分。我正在尝试在 iframe 的底部添加一个部分，就像我在顶部一样，并且需要它高 64 像素而不是像顶部那样高 50 像素。

因此，我尝试复制顶部所做的操作，并将高度修改为 64px 并将其添加到下面，如下所示：

```
<div id="iframe1_div" class="iframe1">

    <div class="iframe1_points" id="iframe1_points">
        <table cellspacing="0" cellpadding="0" width="100%" height="50px">
        <tr>
        <td width="110px" align="center"><img src="http://mysite.com/logo.png" alt="Website TItle" /></td>
        <td>Website Name</div></td>
        <td width="50px" align="center"><a href="#;" class="close"><img src="http://mysite.com/close.png" class="noborder" title="Close Window" alt="Close" /></a></td></tr>
        </table>
    </div>

    <iframe id="iframe1_self" style="width:100%;height:100%;" scrolling="yes" frameborder="0"></iframe>

    <div class="iframe1_points" id="iframe1_points">
        <table cellspacing="0" cellpadding="0" width="100%" height="64px">
        <tr>
        <td width="110px" align="center"><img src="http://mysite.com/logo.png" alt="Website TItle" /></td>
        <td>Website Name</div></td>
        <td width="50px" align="center"><a href="#;" class="close"><img src="http://mysite.com/close.png" class="noborder" title="Close Window" alt="Close" /></a></td></tr>
        </table>
    </div>

</div> 
```

然而，问题是现在顶部和底部都延伸到页面之外，只显示了大约一半的内容。任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:37:08.837

这是一个 redev，其中包括您的表格，但 HTML 的其余部分与您的原始文件有点不同。我希望结果是你所追求的。

html部分

```
<body>
        <div id="container">
            <div id="controls">
                <table>
                    <tr>
                        <td width="110px" align="center"><img src="http://mysite.com/logo.png" alt="Website TItle" /></td>
                        <td>Website Name </td>
                        <td width="50px" align="center"><a href="#;" class="close"><img src="http://mysite.com/close.png" class="noborder" title="Close Window" alt="Close" /></a></td>
                    </tr>
                </table>
            </div>
            <iframe src="http://ebay.com/">
                &nbsp;
            </iframe>
            <div id="bottom">
                <table>
                    <tr>
                        <td width="110px" align="center"><img src="http://mysite.com/logo.png" alt="Website TItle" /></td>
                        <td>Website Name </td>
                        <td width="50px" align="center"><a href="#;" class="close"><img src="http://mysite.com/close.png" class="noborder" title="Close Window" alt="Close" /></a></td>
                    </tr>
                </table>
            </div>
        </div>
    </body> 
```

CSS部分

```
<style>
    div {border: 1px solid red;display: block;}
    #container {border: 1px solid blue;}
    #controls {height: 50px;}
    iframe {width: 100%;height: 500px;}
    #bottom {height: 64px;overflow: hidden;}
    table{width:100%;padding:0;}
</style> 
```

# ruby-on-rails - Rails 表单：实现处理存储在同一文本字段中的多个虚拟属性的用户表单

> ID：14203908
> 
> 赞同：0
> 
> 时间：2013-01-07T20:58:02.917
> 
> 标签：ruby-on-rails, forms

我正在寻找让表单编辑多个虚拟属性的“正确”导轨方式，这些虚拟属性保存在单个文本字段中。

现在，我们将 8 个虚拟属性存储在单个文本字段中，并将它们存储为易于解析的字符串，例如：`"weekday=monday; repeat_weekly_for= 5; repeat_monthly_for=4; ..."`

然后（如下详述）表单对每个虚拟属性都有一个 text_field，模型对每个虚拟属性都有一个 getter 和 setter。

当我们需要一个属性值，或者需要设置一个属性值时，我们首先使用正则表达式将字符串解析成哈希。

有用。问题是每次用户显示然后更新表单时，同一个正则表达式解析器被调用 16 次（8 次“读取”8 个虚拟属性，8 次“写入”8 个虚拟属性中的每一个）。

有没有办法一次为所有 8 个虚拟属性实现 getter 和 setter？

规格：

目前，我们的表单如下所示：

```
= f.text_field :weekday  /first virtual attribute
= f.text_field :repeat_weekly_for  /second virtual attribute
= f.text_field :repeat_monthly_for  /third virtual attribute
... 
```

所以我们为每个看起来相同的虚拟属性设置了 getter 和 setter：

```
def weekday
  self.schedule_to_hash['weekday'] # this gets done 8 times for 8 attributes
end
def weekday=(the_weekday)
  schedule_hash = self.schedule_to_hash  # this gets done 8 times for 8 attributes
  schedule_hash['weekday'] = the_weekday
  self.hash_to_schedule(schedule_hash) # this gets done 8 times for 8 attributes
end 
```

每个 getter 和 setter 都使用这两种方法在哈希和字符串格式之间进行转换：

```
def schedule_to_hash()
  # takes string self.schedule, does regex to split into hash, returns the hash
end

def hash_to_schedule(some_hash)
  # put the hash into a string format compatible with the regex in schedule_to_hash()
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:34:14.147

ActiveRecord 有一个称为序列化的方法[http://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize](http://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize)

你可以像这样使用它：

```
class MyModel < ActiveRecord::Base
  serialize :schedule, Hash

  def weekday
    schedule ||= {}
    schedule['weekday']
  end

  def weekday=(the_weekday)
    schedule ||= {}
    schedule['weekday'] = the_weekday
  end
end 
```

保存/加载对象时，Rails 将为您执行序列化/反序列化。

# javascript - 如何在 jQuery 中使用其中心作为参考点来缩小 div？

> ID：14203910
> 
> 赞同：6
> 
> 时间：2013-01-07T20:58:11.973
> 
> 标签：javascript, jquery, css, html

我有以下 div ：

```
<div id = "shrink-test" style = "position:absolute;top:100px;left:50%;margin-left:-50px;height:100px;width:100px;background-color: red;" /> 
```

我想使用 jQuery`animate()`将 div 缩小到其大小的一半，但保持 div 的动画和位置居中。

我正在努力：

```
$("#shrink-test").animate(
{
   height: 50,
   width: 50
}); 
```

但它使用左上角作为参考来缩小 div。我怎样才能让它使用它的中心作为参考点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T21:03:19.363

`top`由于您的 div 使用and绝对定位`margin-left`，因此您还需要为它们设置动画：

```
$("#shrink-test").animate({
   height: 50,
   top: 125, // 100 + 50 / 2
   width: 50,
   marginLeft: -25 // 50 / -2
}); 
```

对于编程方法，也可能更容易为 y 轴使用负边距。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T21:28:59.670

这只是一个简单的 jQuery 插件

```
$.fn.resize = function( w, h ) {
  w = ( undefined !== w ? w : 50 );
  h = ( undefined !== h ? h : 50 );

  var cw = this.width();
  var ch = this.height();

  if ( 'static' === this.css( 'position' ) ) {
    this.css( {
      'position'    : 'relative',
      'top'         : '0px',
      'left'        : '0px'
    } );
  }

  this.stop().width( cw ).height( ch ).animate( {
    'top'    : '+=' + ( (ch - h) / 2 ) + 'px',
    'left'   : '+=' + ( (cw - w) / 2 ) + 'px',
    'width'  : w + 'px',
    'height' : h + 'px'
  } );
};

$( function() {
  $( '#shrink-test' ).resize(50,50);
} ); 
```

在这里测试它：http: [//jsfiddle.net/bukfixart/nPjMa/1/](http://jsfiddle.net/bukfixart/nPjMa/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T21:06:49.470

您可以像这样为顶部和左侧设置动画：

```
 $("#shrink-test").animate(
  {
      height: 50,
      width: 50,
      top: '+=25px',
      left: '+=25px'
  }); 
```

看到[这个小提琴](http://jsfiddle.net/H6Rry/2/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T21:00:28.277

您必须同时使用类似`top`and `left`or`margin`属性为页面上的位置设置动画，如下所示：

```
$("#shrink-test").animate(
{
   height: 50,
   width: 50,
   top: '150px',
   left: '75%'
}); 
```

为每个使用适当的值。

# arrays - 打印数组内容时的空白字符

> ID：14203912
> 
> 赞同：0
> 
> 时间：2013-01-07T20:58:39.250
> 
> 标签：arrays, assembly, x86, dos

我在写入数组内容时遇到问题。在下面的代码中，我尝试在屏幕上打印它。但是，当论点数量很少时，我并不总是能看到所有内容。有时，前 n 个参数的位置是空格。但是当有更多参数时，所有 32 都会显示出来。（数组为 128 字节）

```
mov     ax,32
mov     cx,ax
xor     si,si
pet:
    mov     dl,tablica[si]
    mov     ah,2h
    int     21h
    inc     si
loop pet 
```

这是数组的声明。当然 ds 是由 dane seg 初始化的。

```
dane    segment
    tablica     db  128 dup('$')
dane    ends 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:47:14.857

我没有看到那里的错误。但另一方面，这不是整个程序。

您只打印大小为 128 字节的数组的 32 个字节。这对调试没有帮助，因为您无法说出数组的哪些字节被打印出来。出于调试目的，我建议您替换`tablica db 128 dup('$')`为可以让您知道具体打印哪些字节的内容，例如：

```
tablica db 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ' 
```

然后你得到`abcdefghijklmnopqrstuvwxyzABCDEF`输出吗？如果不是，那么您可能在打印之前在代码中的其他地方损坏了您的数组，或者您`ds`指向错误的位置，或者您已经挂钩或损坏`int 21h`了中断（如果您没有在代码中处理中断向量，这是非常不可能的）。

# python - 从特定客户端 UDP (Python) 捕获数据包

> ID：14203914
> 
> 赞同：1
> 
> 时间：2013-01-07T20:58:42.350
> 
> 标签：python, sockets, network-programming

我有一个关于从特定客户端嗅探数据包的问题。我正在运行一个非常简单的 UDP 服务器，如下所示：

```
from socket import *

IPv4 = ""
Port = 54345

ServerSock = socket(AF_INET, SOCK_DGRAM) # UDP
ServerSock.bind((IPv4, Port))
print "Socket is ready to receive data.."

while True:
    data, addr = ServerSock.recvfrom(1024) # buffer size is 1024 bytes
    print data 
```

我打算捕获到达端口号（54345）的每个数据包并解析其标头值。我认为如果将数据包保存到 .pcap 文件并可能使用 scapy 处理它们是可行的，但是是否可以使用“socket.recvfrom”处理每个数据包到达后？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:07:00.227

你已经得到了数据。但是，您得到的是 UDP 数据包和源地址；如果您想要带有 IPv4 和 UDP 标头的完整原始数据包，那就不同了。

在某些平台上，您可以将普通的 UDP 套接字设置为`IP_HDRINCL`，或者有其他等效项。如果你这样做，每个`recvfrom`都会在数据中包含标题，所以你已经得到了你想要的一切。

在其他平台上，您可以`SOCK_RAW`使用`SOCK_DGRAM`. 你可以用原始套接字做什么变化很大。在许多 Unix 平台上，您可以使用`IPPROTO_UDP`with `SOCK_RAW`，然后`bind`使用普通的 UDP 地址和端口，尽管可能有限制，并且它们在每个平台上都不同。例如，在 OS X 上，您必须是 root 才能创建原始套接字，并且您只能将原始套接字绑定到单接口地址（意味着没有`''`/ `INADDR_ANY`/ `'0.0.0.0'`）。如果你用谷歌搜索“SOCK_RAW Python”和“SOCK_RAW”，你应该能够找到你需要的东西。[（套接字模块文档](http://docs.python.org/2/library/socket.html)中的最后一个示例显示了如何在 Windows 上使用原始套接字。）

获得数据后，将其保存到`pcap`文件中并不难。该格式记录在Wireshark Wiki的[LibpcapFileFormat中。](http://wiki.wireshark.org/Development/LibpcapFileFormat)如果您熟悉 stdlib`struct`模块，应该很容易弄清楚如何编写这种格式。这是一个简短的示例：

```
pcap_hdr = struct.pack('=IHHiIII',
                       0xa1b2c3d4, # magic number
                       2, 4,       # pcap 2.4 format
                       0,          # UTC timezone for timestamps
                       0,          # "in practice, all tools set it to 0"
                       65535,      # max packet length
                       228)        # LINKTYPE_IPV4, or maybe you want LINKTYPE_RAW
pcapfile.write(pcap_hdr) 
```

如果您不想自己这样做，我没有任何使用库编写 pcap 文件的经验，但`scapy`我会首先查看，然后是/的[`python-libpcap`](http://sourceforge.net/projects/pylibpcap/)绑定。如果这些都不起作用，请检查 PyPI。[`libpcap`](http://www.tcpdump.org/)[`WinPcap`](http://www.winpcap.org/)

如果所有这些听起来都超出了您的想象，那么您可能不想以这种方式做事。只需运行您的 UDP 服务器，并使用 Wireshark 捕获发送给它的所有数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:05:53.390

是的，有可能。这就是你的程序实际上已经做的事情。

# actionscript-3 - 之后的 ActionScript 重复动作

> ID：14203919
> 
> 赞同：1
> 
> 时间：2013-01-07T20:59:04.443
> 
> 标签：actionscript-3, flash

我试图每隔 10 秒将 xml 文件重新加载到变量中。我已经尝试了许多关于计时器的教程，但是每一个都等待计时器时间，然后每毫秒左右重复一次操作。

```
var timer:Timer = new Timer(10000);
timer.addEventListener(TimerEvent.TIMER, onTimer);
timer.start();

function onTimer(evt:TimerEvent):void {
    trace("10 seconds");
} 
```

我想做的就是每 10 秒重复一次，但到目前为止，它会等待 10 秒，然后像每个 milisencod 一样将“10 秒”放在跟踪中......

我已经为这个 ActionScript 事情苦苦挣扎了很长时间，在我看来，这一定很简单，不是吗？

谢谢你的时间，玛特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:36:39.897

尝试使用`TimerEvent.TIMER_COMPLETE`而不是`TimerEvent.TIMER`这样：

```
var timer:Timer = new Timer(10000, 1); // Add a 1 to repeat count
timer.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete);
timer.start();

function onTimerComplete(evt:TimerEvent):void {
    trace("10 seconds");
    timer.reset(); // Reset the timer count back to 0
    timer.start(); // Start the timer again
} 
```

上面的代码每十秒重复一次，下面的代码十秒后触发一次，**不再**触发：

```
var timer:Timer = new Timer(10000, 1); // Add a 1 to repeat count
timer.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete);
timer.start();

function onTimerComplete(evt:TimerEvent):void {
    trace("10 seconds");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:34:59.597

你有一个框架问题，我认为你没有运行播放器的调试器版本。
试试这个。

```
var timer:Timer = new Timer(10000, 1); // Add a 1 to repeat count
timer.addEventListener(TimerEvent.TIMER_COMPLETE, function(evt:TimerEvent):void {trace("10 seconds");});
timer.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:44:32.417

您很可能在您的框架中有此代码，并且它在每个框架中创建一个新的计时器和侦听器：

```
var timer:Timer = new Timer(10000);
timer.addEventListener(TimerEvent.TIMER, onTimer);
timer.start(); 
```

# command-line - awk 打印长度正好为 11 并且从零开始的所有行？

> ID：14203920
> 
> 赞同：1
> 
> 时间：2013-01-07T20:59:05.927
> 
> 标签：command-line, printing, sed, awk

我正在解析一些数据，并且正在寻找一个命令，该命令允许我在字符长度正好为 11 并且从零开始时打印行。

听起来像是 sed 或 awk 命令，但我找不到我要找的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:27:06.777

Using sed:

```
sed -n '/^0.\{10\}$/p' input 
```

And using grep:

```
grep '^0.\{10\}$' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:01:34.337

grep/ack 将是这项工作的正确工具。

我发布了另一个 awk oneliner ：

```
awk 'BEGIN{FS=""} NF==11&&$1=="0"' file 
```

应该给你那些线

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:01:45.220

```
awk '/^0..........$/' infile >outfile 
```

# objective-c - 在旧的 c 标头中包含目标 c 代码的问题

> ID：14203922
> 
> 赞同：0
> 
> 时间：2013-01-07T20:59:14.847
> 
> 标签：objective-c, xcode, header, compilation

这主要是一个xcode问题。我有一个带有小协议定义和单独 C 函数声明的 Objective-C 标头。我想将这几个标头声明合并到一个更大的文件中，该文件以前都是 C 代码，但 xcode 编译器抱怨。
似乎应该是可能的，因为包含这些声明的原始文件也是一个 .h 文件。是否有一个编译器标志我应该翻转以使我的旧头文件被识别为目标 C 头文件？

问题是，当我在目标 C 代码中包含旧标头时，我在目标 C 的部分（特别是 @protocol 和 @end 部分）上遇到错误。我想在不将目标 C 代码移出旧标头的情况下解决此错误。

```
@protocol ConnectorDelegate

-(void)connectorDidReturnValue:(int)value;
@end

initializeConnector(id<ConnectorDelegate> delegate); 
```

我在@protocol 和@end 部分得到“预期标识符或'('”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:24:40.120

我可以问你为什么要在 C 环境中执行此操作（也许你正在转向 Objective-C？），但我将专注于消除你的错误，以便你可以继续前进。

虽然您可能在头文件中工作，但它仍然包含在 C 源文件中。C 对协议一无所知；他们是Objective-C的领域。

鉴于 Objective-C 是 C 的超集，您应该能够将包含此标头的文件的扩展名从 .c 更改为 .m 而不会产生不良影响，并且应该消除编译器错误。

**编辑**

您还可以使用`#ifdef __objc__`and来构建您的协议声明`#endif`；这将预先更改您的 .c 文件的扩展名。

# objective-c - 带有 ARC 的 CLGeocoder 完成处理程序总是在完成处理程序块中崩溃 (EXEC_BAD_ACCESS)

> ID：14203924
> 
> 赞同：1
> 
> 时间：2013-01-07T20:59:18.193
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我在使用该`[CLGeocoder geocodeAddressString:completionHandler:]`方法对`Address string`. 在 iOS 5 上运行的应用程序总是`(EXEC_BAD_ACCESS)`在`completion handler block`.

```
- (void)geocodeLocationComponents:(NSDictionary *)location
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    NSString *searchString = [self stringFromLocation:location
                                             forStage:self.stage];
    [geocoder geocodeAddressString:searchString
                 completionHandler:^(NSArray *placemarks, NSError *error) {
                     self.stage++;
                     if (!error &&
                         placemarks &&
                         placemarks.count > 0) {
                         [self.delegate geocoder:self
                    didFinishCodingWithPlacemark:[placemarks objectAtIndex:0]];
                     } else {
                         ...
                     }
                 }];
} 
```

寻找解决方案，我发现这是由于在块中调用 self 引起的。提到的解决方案（对于 ARC！）是创建一个弱引用，就像那样

```
__weak MyClass *blockSaveSelf = self; 
```

并在块中调用它。我试过了，但这个参考总是零。顺便说一句，为什么只有在 iOS5 上运行才会出现这种情况？（iOS 6 没有问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:43:33.377

> 寻找解决方案，我发现这是由于在块中调用 self 引起的。

这没有一点意义。首先，块中的常见问题`self`是它保留`self`并`self`保留块，从而导致保留循环。这里没有保留循环，因为`self`没有对地理编码器的强引用。其次，即使有一个保留周期，它也会导致泄漏，绝不会崩溃。

您的代码有很多问题，包括在此函数返回后没有对地理编码器的强引用，因此它可能会被释放（启动的地理编码会发生什么，我不知道）。

此外，EXEC_BAD_ACCESS 可能是发送给已释放实例的消息，因此启用僵尸将是获取有关正在向哪些已释放事物发送消息的更多信息的第一步。

# android - 检查时如何在列表视图中删除文本项？

> ID：14203925
> 
> 赞同：4
> 
> 时间：2013-01-07T20:59:22.550
> 
> 标签：android, listview, checkbox, strikethrough

我试图在选中列表项时删除它们，但是，有一个问题：一旦选中一个项目，另一个项目就会被删除，但是，对于每个选中或未选中的项目，toast 消息都会正确显示。但我找不到设置删除线功能位置的方法。将不胜感激任何帮助:)

```
OnItemClickListener itemClickListener = new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> a, View v, int position, long id) {

    ListView lv = (ListView) a;
    if (lv.isItemChecked(position)) {
        Toast.makeText(getBaseContext(), "You checked " + values.get(position), Toast.LENGTH_SHORT).show();

        TextView row = (TextView) findViewById(android.R.id.text1);
        row.setPaintFlags(row.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);

    } 
    else {
        Toast.makeText(getBaseContext(), "You unchecked " + values.get(position), Toast.LENGTH_SHORT).show();

        TextView row = (TextView) findViewById(android.R.id.text1);
        row.setPaintFlags(row.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG);

    }
}
}; 
```

如果使用 TextView row = (TextView)lv.getItemAtPosition(position)，则应用程序崩溃 - logcat：

1-08 16:39:30.373：E/AndroidRuntime(1934)：未捕获的处理程序：线程主因未捕获的异常而退出 01-08 16:39:30.383：E/AndroidRuntime(1934)：java.lang.ClassCastException：java。 lang.String 01-08 16:39:30.383: E/AndroidRuntime(1934): at com.jms.purchaseexamples.MainActivity$1.onItemClick(MainActivity.java:72) 01-08 16:39:30.383: E/AndroidRuntime( 1934): 在 android.widget.AdapterView.performItemClick(AdapterView.java:284) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 android.widget.ListView.performItemClick(ListView.java:3285) 01 -08 16:39:30.383: E/AndroidRuntime(1934): 在 android.widget.AbsListView$PerformClick.run(AbsListView.java:1640) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 android .os.Handler.handleCallback(Handler.java:587) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 android.os.Handler。dispatchMessage(Handler.java:92) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 android.os.Looper.loop(Looper.java:123) 01-08 16:39:30.383: E/ AndroidRuntime(1934): 在 android.app.ActivityThread.main(ActivityThread.java:4363) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 java.lang.reflect.Method.invokeNative(Native Method) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 java.lang.reflect.Method.invoke(Method.java:521) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 01-08 16:39:30.383: E/AndroidRuntime(1934): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:618) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 dalvik.system.NativeStart.main(Native Method)Looper.loop(Looper.java:123) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 android.app.ActivityThread.main(ActivityThread.java:4363) 01-08 16:39:30.383: E/AndroidRuntime(1934): at java.lang.reflect.Method.invokeNative(Native Method) 01-08 16:39:30.383: E/AndroidRuntime(1934): at java.lang.reflect.Method.invoke(Method. java:521) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 dalvik.system.NativeStart.main （本机方法）Looper.loop(Looper.java:123) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 android.app.ActivityThread.main(ActivityThread.java:4363) 01-08 16:39:30.383: E/AndroidRuntime(1934): at java.lang.reflect.Method.invokeNative(Native Method) 01-08 16:39:30.383: E/AndroidRuntime(1934): at java.lang.reflect.Method.invoke(Method. java:521) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 dalvik.system.NativeStart.main （本机方法）在 java.lang.reflect.Method.invokeNative(Native Method) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 java.lang.reflect.Method.invoke(Method.java:521) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 01-08 16:39:30.383: E/AndroidRuntime(1934):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 dalvik.system.NativeStart.main(Native Method)在 java.lang.reflect.Method.invokeNative(Native Method) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 java.lang.reflect.Method.invoke(Method.java:521) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 01-08 16:39:30.383: E/AndroidRuntime(1934):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 01-08 16:39:30.383: E/AndroidRuntime(1934): 在 dalvik.system.NativeStart.main(Native Method)os.ZygoteInit.main(ZygoteInit.java:618) 01-08 16:39:30.383: E/AndroidRuntime(1934): at dalvik.system.NativeStart.main(Native Method)os.ZygoteInit.main(ZygoteInit.java:618) 01-08 16:39:30.383: E/AndroidRuntime(1934): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:05:49.453

我没有看到您实际选择单击以检查它的行的位置？findViewById(android.R.id.text1) 看起来不像你想要的..

怎么样：

```
//Actually select the correct item from the listview
TextView row = (TextView)lv.getItemAtPosition(position);
row.setPaintFlags(row.getPaintFlags() & ~Paint.STRIKE_THRU_TEXT_FLAG); 
```

# javascript - 随每个骨干网同步请求发送令牌

> ID：14203928
> 
> 赞同：10
> 
> 时间：2013-01-07T20:59:29.310
> 
> 标签：javascript, api, backbone.js, coffeescript

我的 PHP api 要求我的前端 Backbone 应用程序的每个请求都提交一个用户令牌，以确保用户...

1.  活跃
2.  有权访问资源

在 Backbone 中进行设置的最简单方法是什么？我猜唯一的方法是覆盖 Backbone.sync，但代码会是什么样子？首选 CoffeeScript。

## 编辑

还有两件事
1.`/login`如果我得到一个，我想将用户重定向到`403: Access Forbidden Error`
2\. 当应用程序启动时，我从 localStorage 中提取包含令牌的用户模型
3\. 我有一个 baseModel 和 baseCollection，所有模型/集合都来自

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-03T00:42:28.920

Backbone 使用 jQuery 的[$.ajax](http://api.jquery.com/jQuery.ajax/)，因此您可以使用[$.ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)来“为未来的 Ajax 请求设置默认值”：

```
$.ajaxSetup({
   headers: {
     "accept": "application/json",
     "token": YOUR_TOKEN
   }
}); 
```

更新：对这个想法的改进（感谢@Glen）是使用[$.ajaxSend](http://api.jquery.com/ajaxSend/)每次在请求标头中设置令牌之前检查是否存在令牌：

```
$(document).ajaxSend(function(event, request) {
   var token = App.getAuthToken();
   if (token) {
      request.setRequestHeader("token", token);
   }
}); 
```

其中 App.getAuthToken() 是 Backbone 应用程序中的一个函数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-07T22:24:44.163

你可以这样做：

```
var _sync = Backbone.sync;
Backbone.sync = function(method, model, options) {

    if( model && (method === 'create' || method === 'update' || method === 'patch') ) {
        options.contentType = 'application/json';
        options.data = JSON.stringify(options.attrs || model.toJSON());
    }

    _.extend( options.data, {
        "access_token": "some-token"
    });

    return _sync.call( this, method, model, options );
} 
```

只需监听 fetch/save 方法的失败事件即可将用户重定向到`/login`

```
model.fetch().fail( /* redirect */ ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-01T23:13:09.793

**身份验证是应用程序的责任。**

对于 Backbone 应用程序，身份验证逻辑应该在 Backbone 代码中，并且**应该不惜一切代价避免****更改全局 jQuery 的行为。`ajax`**

# `ajaxSetup`或的缺点`ajaxSend`

来自 jQuery 文档[`ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)：

> **注意：**此处指定的设置将影响对所有调用`$.ajax`或基于 Ajax 的派生类的调用，例如`$.get()`. 这可能会导致不良行为，因为其他调用者（例如插件）可能期望正常的默认设置。因此，我们强烈建议不要使用此 API。相反，请在调用中明确设置选项或定义一个简单的插件来执行此操作。

`ajaxSend`和上面提到的有同样的问题。它的唯一优势`ajaxSetup`是每次都调用一个函数，比传递给`ajaxSetup`.

# 最安全的方法，`AuthModel`和`AuthCollection`

将身份验证逻辑放入基本模型和集合中。这是范围最广的解决方案。

在这里，您可以使用您已经存在的`BaseModel`，但我仍然倾向于将 与 分开，`BaseModel`因为`AuthModel`您可能希望创建一个自定义模型，该模型使用您的基本模型，但也使用不同的外部 API。

由于模型和集合的新`sync`函数相似，但两者可能有不同的父实现，我做了一个简单的函数生成器。

```
/**
 * Generates a new sync function which adds the token to the request header 
 * and handles a redirect on error.
 * @param  {Function} syncFn the parent `sync` function to call.
 * @return {Function}  a new version of sync which implements the auth logic.
 */
var authSyncFunction = function(syncFn) {
    return function(method, model, options) {
        options = options || {};

        var beforeSend = options.beforeSend,
            error = options.error;

        _.extend(options, {
            // Add auth headers
            beforeSend: function(xhr) {
                xhr.setRequestHeader('Authorization', "Bearer " + yourTokenHere);
                if (beforeSend) return beforeSend.apply(this, arguments);
            },

            // handle unauthorized error (401)
            error: function(xhr, textStatus, errorThrown) {
                if (error) error.call(options.context, xhr, textStatus, errorThrown);
                if (xhr.status === 401) {
                    Backbone.history.navigate('login');
                }
            }
        });

        return syncFn.call(this, method, model, options);
    };
}; 
```

在模型和集合上使用生成器。

```
var AuthModel = BaseModel.extend({
    sync: authSyncFunction(BaseModel.prototype.sync)
});

var AuthCollection = BaseCollection.extend({
    sync: authSyncFunction(BaseCollection.prototype.sync)
}); 
```

然后您就可以在您确定需要身份验证的模型和集合上使用它们了。由于您已经在使用基本模型和集合，因此只需`BaseModel.extend`将`AuthModel.extend`.

虽然我知道您要求对`403 Forbidden`响应进行重定向，但我认为它应该在`401 Unauthorized`. 请参阅[403 Forbidden 与 401 Unauthorized HTTP 响应](https://stackoverflow.com/questions/3297048/403-forbidden-vs-401-unauthorized-http-responses)

# 覆盖主干`sync`

如果您此时不想更改所有模型和集合，但仍想遵循良好实践并避免更改全局 ajax 设置，则覆盖该`Backbone.sync`函数是一个简单的选择。

使用我们之前定义的`sync`生成器：

```
Backbone.sync = authSyncFunction(Backbone.sync); 
```

# 管理本地存储和身份验证

要管理本地存储中的数据，请检查[Backbone-session](https://github.com/cofounders/backbone-session)。

这是一个很好的 Backbone 模型实现，它与本地存储而不是 REST API 同步。它还提供了一个很好的界面来管理身份验证。

> ```
> // Extend from Session to implement your API's behaviour
> var Account = Session.extend({
>   signIn: function () {},
>   signOut: function () {},
>   getAuthStatus: function () {}
> });
> 
> // Using the custom Account implementation
> var session = new Account();
> session.fetch()
>   .then(session.getAuthStatus)
>   .then(function () {
>     console.log('Logged in as %s', session.get('name'));
>   })
>   .fail(function () {
>     console.log('Not yet logged in!');
>   }); 
> ```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-06-04T22:18:11.030

```
Backbone.$.ajaxSetup({
   headers: { 'sid': 'blabla' }
}); 
```

# jquery - 使用 jQuery 在导航中仅返回 false 的第一个 ul（排除子链接）

> ID：14203929
> 
> 赞同：0
> 
> 时间：2013-01-07T20:59:46.610
> 
> 标签：jquery, navigation, nav

我目前正在研究导航并且遇到了一些麻烦。它有一个固定的导航，带有一个用于导航子项的 slideToggle 菜单。我需要让带有“父”类的“li”返回false，这样它就不会在单击时跳回页面顶部。但是，当我这样做时，它会禁用所有子链接。是否可以只针对父母本身并仅返回那个错误？

HTML：

```
<nav>
 <ul>
  <li><a href="#"></a></li>
  <li class="parent">
    <a href="#"></a>
    <ul>
      <li><a href="#"></a></li>
      <li><a href="#"></a></li>
    </ul>
  </li>
  <li><a href="#"></a></li>
 </ul>
</nav> 
```

JS：

```
$("li.parent").click(function(){
   $(this).children("ul").slideToggle(300);
   return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:01:56.323

尝试`eq(0)`仅匹配`<ul>`s的第一次出现

```
$("li.parent").click(function(){
    $(this).children("ul").eq(0).slideToggle(300);
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:58:10.347

所以我通过使用 and if 语句和 .preventDefault() 找到了解决方案

以下代码是我最终得到的

```
$("li.parent").click(function(e){
  if($(this).children("ul").is(':hidden')) {
      e.preventDefault();
  };
  $(this).children("ul").first().slideToggle(300);
}); 
```

# sql - 是否可以将所有其他人添加到 SQL Server 的 PIVOT 中的列中

> ID：14203930
> 
> 赞同：1
> 
> 时间：2013-01-07T20:59:59.773
> 
> 标签：sql, sql-server-2008, pivot

我在 SQL Server 中有一个 Pet.Info 表，如下所示：

```
pet      age ...
--------------------
dog       4
cat       3
pig       2
dog       3
... 
```

现在，我想把它转换成一个表格来计算狗和猫的平均年龄，以及所有其他人的平均年龄。如下所示：

```
dog    cat   others
-------------------------
3.5      3       2 
```

可以用 PIVOT 做到这一点吗？

这是我得到的，但似乎没有办法让它成为其他人的专栏

```
SELECT * FROM 
(SELECT * FROM Pet.Info) AS B
PIVOT (AVG(age) FOR pet IN ([dog],[cat])) AS C 
```

感谢您提前提供建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:02:10.737

尝试这个：

```
SELECT * 
FROM (  SELECT  CASE WHEN pet NOT IN ('dog','cat') THEN 'others' ELSE pet END pet, 
                age
        FROM Pet.Info) AS B
PIVOT (AVG(age) FOR pet IN ([dog],[cat],[others])) AS C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:03:08.353

您不需要为此使用枢轴。

```
select avg(case when pet = 'dog' then age end) as dog,
       avg(case when pet = 'cat' then age end) as cat,
       avg(case when pet in ('dog', 'cat') then null else age end) as others
from pet.info 
```

对于其他人，我设置了语句，以便将 NULL 包含在其他人中。

# objective-c - 学习开放GL

> ID：14203932
> 
> 赞同：0
> 
> 时间：2013-01-07T21:00:19.550
> 
> 标签：objective-c, ios, opengl-es

我正在尝试通过网站学习opengl。我先看例子，然后自己尝试而不看，这样我就有信心提高我的学习水平。但是，自从 20 天以来，我一直在看 opengl 教程，我知道基础知识非常基础，当我尝试用它做一个非常基础的程序时，我失败了。

我有一个 UIView 子类，我正在尝试用 opengl 绘制一个简单的三角形。但是，似乎我什至无法将背景颜色设置为某种恒定颜色。我的 UIView 子类是这样的；

```
@implementation GLView{
    GLuint framebuffer;
    GLuint renderbuffer;
    EAGLContext *context;
}

+(Class)layerClass{
    return [CAEAGLLayer class];
}

-(void)drawView{
     glLoadIdentity();
     glClearColor(0.7, 0.7, 0.7, 1.0);
     glClear(GL_COLOR_BUFFER_BIT);

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
       context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
        CAEAGLLayer *layer = (CAEAGLLayer*)self.layer;
        layer.opaque = YES;
        [EAGLContext setCurrentContext:context];
        if(!context){
            NSLog(@"Could not create context");
        }
        glGenFramebuffers(1, &framebuffer);
        glGenRenderbuffers(1, &renderbuffer);
        glBindFramebuffer(GL_FRAMEBUFFER_OES, framebuffer);
        glBindRenderbuffer(GL_RENDERBUFFER_OES, renderbuffer);
        glFramebufferRenderbuffer(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, renderbuffer);
        [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)layer];
        glViewport(0, 0, CGRectGetWidth(frame), CGRectGetHeight(frame));
        [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer];
        [context presentRenderbuffer:GL_RENDERBUFFER_OES];
        [self drawView];

    }
    return self;
} 
```

如果我理解正确，上面的代码应该将我的视图背景设置为灰色。但是，我确信我错过了一些非常简单的概念。如果有人能指出，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:05:42.650

在 glClear() 之后，您缺少 glFlush()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:17:39.013

您没有正确使用 Cocoa Touch 框架。`drawView`在将视图插入视图层次结构之前，您的调用只发生一次。也许如果您将`drawView`方法中的代码移动到`drawInRect:`方法中，这可能会起作用。更好的解决方案是放弃这行编程，而使用 GLKit。

GLKit 提供 GLKView 和 GLKViewController 类来设置和管理 OpenGL ES 将内容绘制到 iOS 设备屏幕所需的大部分内容。只需继承 GLKViewController 并实现一些委托方法，它就非常容易使用。

Jason L. McKesson 的在线书籍*[Learning Modern 3D Graphics Programming](http://www.arcsynthesis.org/gltut/)*是学习 OpenGL 的可编程管道版本（例如 iOS 上的 OpenGL ES 2.0）的良好开端。我正在阅读这本书，[将 McKesson 的示例移植到 iOS](https://bitbucket.org/mr_berna/ios-gl-tutorial/src)，并[分享我学到的东西](http://ericberna.com/2012/01/learning-modern-3d-graphics-programming-on-ios/)。因为我在 GLKit 上构建了我的端口，所以它们是一堆关于如何使用 GLKit 的示例。

# ruby - 迭代数组，修改和插入其他元素

> ID：14203936
> 
> 赞同：0
> 
> 时间：2013-01-07T21:00:31.147
> 
> 标签：ruby

我想迭代一个数组，根据一个标准修改它的元素，并希望在每个元素之后插入另一个元素，除了最后一个元素之后。这样做最符合 Ruby 习惯的方式是什么？

```
def transform(input)
  words = input.split
  words.collect {|w|
    if w == "case1"
      "add that"
    else
      "add these" + w
    end
    # plus insert "x" after every element, but not after the last
  }
end 
```

例子：

```
transform("Hello case1 world!") => ["add theseHello", "x", "add that", "x", "add theseworld!"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:18:06.047

```
def transform input
  input.split.map do |w|
    [
      if w == 'case1'
        'add that'
      else
        'add these' + w
      end,
      'x'
    ]
  end.flatten[0..-2]
end 
```

这通常会写成：

```
def transform input
  input.split.map do |w|
    [ w == 'case1' ? 'add that' : 'add these' + w, 'x' ]
  end.flatten[0..-2]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:19:14.353

对所需输出做出一些假设并进行编辑：

```
def transform(input)
  input.split.inject([]) do |ar, w|
    ar << (w == "case1" ? "add that" : "add these" + w) << "x"
  end[0..-2]
end

p transform("Hello case1 world!")

#=> ["add theseHello", "x", "add that", "x", "add theseworld!"] 
```

# json - 谷歌可视化 api 的 json 格式不正确

> ID：14203937
> 
> 赞同：0
> 
> 时间：2013-01-07T21:00:31.757
> 
> 标签：json, google-visualization

嘿伙计们！

我有一个 JSON 文件，我想从中提取数据以在谷歌条形图中可视化数据。谷歌图表有特定的 JSON 格式，但我的文件中的数据是不同的 JSON 格式。我的问题是，是否可以将我的 JSON 文件转换为该格式，以便它操纵 google 可视化 api 的格式？

谷歌格式：

```
{
  "cols": [
        {"id":"","label":"Topping","pattern":"","type":"string"},
        {"id":"","label":"Slices","pattern":"","type":"number"}
      ],
  "rows": [
        {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
        {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
        {"c":[{"v":"Olives","f":null},{"v":1,"f":null}]},
        {"c":[{"v":"Zucchini","f":null},{"v":1,"f":null}]},
        {"c":[{"v":"Pepperoni","f":null},{"v":2,"f":null}]}
      ]
} 
```

JSON 文件格式：

```
{
    "table.kot.educations": [
                            {"education":"Math","count":"8"},
                            {"education":"english","count":"15"},
                            {"education":"Management","count":"27"},
                            {"education":"Science","count":"14"},
                            {"education":"Social studies","count":"15"},
                            {"education":"Physics","count":"59"},
                            {"education":"Chemestry","count":"7"}
                            ],
    "table.user.educations":[
                            {"education":"Test i afdelingen med et meget meget meget meget langt navn","count":"2"},
                            {"education":"Test i IT-afdelingen","count":"3"},
                            {"education":"Test i PR-afdelingen","count":"2"}
                            ],
    "table.user.education.answer":[
                            {"education":"Math","answer":"N","count":"2"},
                            {"education":"Science","answer":"Y","count":"1"},
                            {"education":"Chemistry","answer":"N","count":"1"},
                            {"education":"Physics","answer":"Y","count":"1"}
                                  ]
} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:10:42.463

这两个 JSON 文件对我来说似乎完全有效。JSON 解析器应该忽略缩进，因为它仅用于提高可读性。

例如，在 PHP 中使用 *json_encode* 创建 JSON 字符串时，您可以提供附加参数“JSON_PRETTY_PRINT”，但它不应该更改数据本身 - 只会让人们更容易阅读它。 [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

如果您无论如何都想转换它，通常将文件解析为另一种数据格式（如 YAML - 它确实依赖于缩进 btw）并将其转换回来，您最终可能会得到相同的缩进。

# xml - 子 swf 中的 LoaderMax

> ID：14203939
> 
> 赞同：1
> 
> 时间：2013-01-07T21:00:37.087
> 
> 标签：xml, actionscript-3, flash, gsap, loadermax

我有 2 个子 swf 被加载到父 swf 中。每个子 swf 加载自己的 XML 文件。当我加载子 swfs 时，我得到一个空值，因为他们还没有加载他们的 XML 文件。我正在使用greensock 的LoaderMax。无论如何，父母是否知道所有子 XML 何时已加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:11:37.837

听起来您不想在加载时计算子级，而是在子级完成加载某些 XML 时计算。考虑首先为每个/所有将加载 xml 的孩子创建一个类，例如：

```
package  {
    import flash.display.MovieClip;

    public class ChildToLoad extends MovieClip{

        public function ChildToLoad() {
            // Load xml here, optionally use URLLoader or XMLLoader,
            // but regardless of what you use, listen for when XML load 
            // is complete and handle it with the loadComplete() function
            ...
            someXMLLoader.addEventListener(Event.COMPLETE, loadComplete);
            ...
        }

        private function loadComplete(evt:* = null)
        {
            var padre:MovieClip = parent as MovieClip;
            padre.childLoaded(); // Call function of parent
        }
    }
} 
```

然后在您的主 swf（您的父母）中执行以下操作：

```
var child1:ChildToLoad = new ChildToLoad();
var child2:ChildToLoad = new ChildToLoad();
addChild(child1);
addChild(child2);

var loadedChildrenCount:int = 0;

function childLoaded() // Called by all children after they load XML
{
    trace("childLoaded()");
    loadedChildrenCount++;

    if(loadedChildrenCount == 2)
    {
        trace("All children have loaded! Do Stuff!");
    }
} 
```

然而; 如果我对你的问题读得太多了......

LoaderMax 有一个`onChildComplete`你可以使用的处理程序

> LoaderEvent.CHILD_COMPLETE 事件的处理函数，每次加载程序的一个子项（或任何后代）成功完成加载时调度。确保您的 onChildComplete 函数接受 LoaderEvent (com.greensock.events.LoaderEvent) 类型的单个参数。

您可以尝试以下方法：

```
var childrenLoadedCount:int = 0;
var queue:LoaderMax = new LoaderMax({
    onChildComplete:AChildWasLoaded,
    TODO:AddYourOtherArgumentsHere
}); 
...
function AChildWasLoaded(evt:LoaderEvent) 
{
    childrenLoadedCount++;
    if(childrenLoadedCount = 2)
    {
        // All children have loaded
    }
} 
```

[阅读文档以获取更多选项](http://www.greensock.com/as/docs/tween/_loadermax.html)

# c# - 在“using”语句中使用 yield 时，Dispose 何时发生？

> ID：14203941
> 
> 赞同：22
> 
> 时间：2013-01-07T21:00:47.447
> 
> 标签：c#, file-io, using, deferred-execution

我有一个关于延迟执行和数据处理的问题。

考虑以下示例：

```
private IEnumerable<string> ParseFile(string fileName)
{
    using(StreamReader sr = new StreamReader(fileName))
    {
        string line;
        while((line = sr.ReadLine()) != null)
        {
            yield return line;
        }
    }
}

private void LineReader(string fileName)
{
    int counter = 0;

    foreach(string line in ParseFile(fileName))
    {
        if(counter == 2)
        {
            break; // will this cause a dispose on the StreamReader?
        } else
        {
            Console.WriteLine(line);
            counter++;
        }
    }
} 
```

该`break`语句是否会立即导致阅读器`ParseFile`进行处理，或者它是否仍然在上下文中考虑并将锁定文件打开直到程序本身关闭？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-07T21:07:10.233

所以我们这里有几个单独的问题。

首先，处理`using`迭代器块中的 。 `IEnumerator`延伸`IDisposable`。生成迭代器块的代码实际上足够健壮，以至于任何 try/finally 块（`using`导致`try/finally`创建块）都会导致`finally`块的内容在枚举器的方法中被调用`Dispose`，如果它还没有被调用的话。所以只要枚举器被释放，它就不会泄漏`StreamReader`.

所以现在我们问自己，枚举数是否被释放。所有`foreach`语句都将调用`Dispose`枚举器（如果它实现`IDisposable`）。即使您使用`break`or`return`语句退出以及正常完成时，它们也会这样做。

因此，您可以确保在任何情况下资源都不会泄露，除非出现无法防止泄露的情况*（*即有人拔掉机器）。

# design-patterns - 如果在 Repository 实现中我们只计划使用 O/RM，我们是否可以使用 TransactionScope 方法而不是 IUnitOfWork？

> ID：14203943
> 
> 赞同：0
> 
> 时间：2013-01-07T21:00:56.950
> 
> 标签：design-patterns, domain-driven-design, unit-of-work

```
public interface IUnitOfWork
{        
    void Save();
} 
```

假设我们计划只在不同的 O/RM 之间切换（对这些 O/RM 的访问是使用 Repository 模式封装的），它们已经提供了自己的工作单元模式的实现，有什么理由不应该使用`TransactionScope`方法而不是`IUnitOfWork`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:51:38.473

The implementation of your IUnitOfWork can use whatever technological means of "transactionalizing" the changes between different aggregates at one time that you wish, be it TransactionScope, SqlTransaction, or whatever means you choose to use. This does not negate the need for IUnitOfWork though.

Repositories are designed for a specific aggregate. If you are only persisting changes to a single aggregate type at a time, then you may use only the repository. But, if you are persisting different aggregates at the same time and need that persistence to be "transactionalized" so that the changes are persisted all or nothing, then this is where the Unit of Work pattern comes into play.

Per your example, we'll say you are using Linq as your OR/M and you're persisting your aggregates to a SQL data store, but want to wrap the persistence into a TransactionScope. You may have an IUnitOfWork definition like so:

```
public interface IUnitOfWork 
{
  void MarkDirty(IAggregateRoot entity);
  void MarkNew(IAggregateRoot entity);
  void MarkDeleted(IAggregateRoot entity);
  void Commit();
  void Rollback();
} 
```

Then, your implementation may be like this:

```
public LinqTransactionScopeUnitOfWork : IUnitOfWork
{
    public void Commit()
    {
        using (TransactionScope scope = new TransactionScope())
        {
            foreach (IAggregateRoot root in Changes)
            {
                //Save root based on how it was marked and what it's concrete type is using Linq.
            }

            scope.Complete();
        }
    }
} 
```

The main idea here is that TransactionScope is one way of implementing IUnitOfWork, but having the Unit of Work contract allows you to provide different implementations based on your environment.

Hope this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:21:20.807

There is one technical reason : you might have difficulties using TransactionScope in your environment, you need to start a service & unlock firewall port. I you don't have these problems I'd suggest you to use TransactionScope : it's already done / debugged, why would you think you'd do something better ?

# sublimetext2 - Sublime Text folder_exclude_patterns 停止工作

> ID：14203944
> 
> 赞同：18
> 
> 时间：2013-01-07T21:01:09.460
> 
> 标签：sublimetext2

我在`myapp.sublime-project`项目根目录的文件中有这个。

```
{
    "folders":
    [
        {
      "path": ".",
      "folder_exclude_patterns": ["log", "tmp"],
      "file_exclude_patterns": ["*.sublime-workspace"]
        }
    ],
  "settings":
  {
    "tab_size": 2
  }
} 
```

以前这是有效的（例如 log/development.log 将被排除在搜索结果中）。但不知何故，它在一两个星期前停止工作，我不知道为什么。

关于如何调试这个的任何想法是或者这个语法在最新的崇高中仍然正确吗？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-17T13:26:37.777

如果你`subl .`像我经常做的那样从命令行打开你的项目：

```
# project_folder> subl . 
```

这些设置被忽略。作为一种解决方法，我使用 Project 菜单并使用其中一个`Open Recent`or `Quick Switch Project`。然后，`sublime-project`文件中的设置被应用。是的，确实很奇怪。

我已经向论坛询问了这个问题：[http ://www.sublimetext.com/forum/viewtopic.php?f=3&t=14129](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=14129)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-13T00:50:19.173

我没有 appname.sublime-workspace 因此我的 appname.sublime-project 没有工作。

打开文件夹并尝试将项目另存为“项目：另存为”

它创建了2个文件

*   appname.sublime-项目
*   appname.sublime-工作区

之后，folder_exclude_patterns 设置开始正常工作。

谢谢-> [https://coderwall.com/p/znswpq](https://coderwall.com/p/znswpq)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-07T16:11:56.613

我必须同时做@Chengjian 和@Case 的回答：

1.  关闭项目。
2.  删除 .sublime-workspace 文件。
3.  重新打开。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-09T20:46:01.137

对我来说，以下“解决方案”在 Sublimetext **3**中起作用：

1.  在 Sublimetext 中保存并关闭所有打开的文件
2.  去`Project > Open Project...`
3.  `project.sublime-project`在项目文件夹中选择您的

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-06T19:16:54.757

您需要删除该`*.sublime-workspace`文件才能使新设置生效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-04T19:25:17.843

有点相关：我添加`"folder_exclude_patterns": ["bower_components"]`到我的全局用户首选项文件中，但它并没有立即开始在我的活动项目中工作。它开始工作，但在关闭然后重新打开项目后。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-10T16:53:27.473

我将您的项目文件逐字复制到准系统项目文件夹中：

```
myapp
    log
        development.log
    Valid logfile.log
    myapp.sublime-project
    myapp.sublime-workspace 
```

正如预期的那样，`development.log`被排除在我的 Goto Anything 结果之外，而`Valid log file.log`被包括在内。据我所知，从 Sublime Text 2 2.0.1，Build 2217 开始，您的语法是正确的。

通过检查标题栏确保项目已打开：`filename — myapp`表示项目`myapp`已打开。您还可以尝试`log`通过添加`"log/*"`到`file_exclude_patterns`. 这应该保证日志文件夹中没有文件包含在您的项目中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-14T13:00:11.603

正如 SelimOber 已经说过的，试图打开一个`subl .`不会查看`*.sublime-project`设置的项目，因此`folder_exclude_patterns`不会工作。

您可以简单地创建一个别名来解决这个问题。添加`alias lime='subl *.sublime-project'`到您的`.bashrc`（或者`.zshrc`如果您使用的是 zsh）。

然后，您可以运行`lime`以在当前路径中打开 Sublime 以及`.sublime-project`文件中的设置。当然，`lime`可以随心所欲。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-28T22:49:18.300

我不知道为什么这对我有用，但请尝试重命名您的文件

```
myapp.sublime-project -> .myapp.sublime-project 
```

只需在名称前添加点。关闭然后打开项目->打开项目

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-13T00:26:15.393

检查部分：`"project": "",`在`.sublime-workspace`文件中。那应该是坏了。

您有两种选择如何解决此问题，具体取决于您不想丢失哪些信息。

*   如果您不想在`.sublime-project`文件中丢失信息

您必须修复/删除文件中的`"project": ""`部分`.sublime-workspace`。搜索`"project": "`不能为空。应该有关联`.sublime-project`文件的名称。

*   如果您不想丢失 Sublime 中可见的实际文件夹列表，但不关心删除`.sublime-project`文件

`.sublime-workspace`通过打开并执行 Project > Save Project As...转到 Sublime Text重写`.sublime-project`文件（此步骤将修复`.sublime-workspace`文件中的该部分）

* * *

如果该`"project": "",`值为空或错误，`.sublime-project`则忽略文件`folders`，并从文件中创建和使用通常从文件中读取的`build_systems`部分。`settings``.sublime-project``.sublime-workspace`

如果同一文件夹中有同名文件，则从文件中删除坏`"project": "",`部分有效。Sublime 将在下次使用它的实例启动时重新创建正确的项目部分。`.sublime-workspace``.sublime-project`

注意：`.sublime-workspace`文件不能在使用它的 Sublime 实例中更新，更改将被忽略。这与`.sublime-project`文件不同，文件可以并且应该在同一实例中进行编辑。

`folders``.sublime-workspace`部分将在下次运行时从文件中消失

这种情况通常不应该发生。
就我而言，我确实保存了一个项目的 Workplace，然后一个脚本`.sublime-project`在下次运行之前创建了一个空文件。
如果您在外部重命名这些文件，也可能会发生这种情况。

# c# - 扫描图像的自动增强

> ID：14203945
> 
> 赞同：31
> 
> 时间：2013-01-07T21:01:13.483
> 
> 标签：c#, image, algorithm, image-processing, aforge

我正在开发一个用于自动增强扫描的 35 毫米幻灯片的例程。我正在寻找一种很好的算法来增加对比度和消除偏色。该算法必须是完全自动化的，因为需要处理数千张图像。这些是直接来自扫描仪的几个示例图像，仅针对网络进行了裁剪和缩小：

![A_裁剪](../Images/b009556fc27f47c33e31a439c93e19ef.png)![B_裁剪](../Images/4bb1eec19ba870c44f668beebbed4fca.png)

我正在使用 AForge.NET 库并尝试了`HistogramEqualization`和`ContrastStretch`过滤器。`HistogramEqualization`有利于最大化局部对比度，但总体上不会产生令人满意的结果。`ContrastStretch`更好，但由于它单独拉伸每个色带的直方图，因此有时会产生强烈的色偏：

![A_拉伸](../Images/ccda7b472e0bd6b08a6b606c3161a0ff.png)

为了减少颜色偏移，我使用和类自己创建了一个`UniformContrastStretch`过滤器。这对所有色带使用相同的范围，以降低对比度为代价保留颜色。`ImageStatistics``LevelsLinear`

```
 ImageStatistics stats = new ImageStatistics(image);
    int min = Math.Min(Math.Min(stats.Red.Min, stats.Green.Min), stats.Blue.Min);
    int max = Math.Max(Math.Max(stats.Red.Max, stats.Green.Max), stats.Blue.Max);
    LevelsLinear levelsLinear = new LevelsLinear();
    levelsLinear.Input = new IntRange(min, max);
    Bitmap stretched = levelsLinear.Apply(image); 
```

![A_UniformStretched](../Images/94ce008ff24e092c53b0f04cfdf05f28.png)

虽然图像仍然很蓝，所以我创建了一个`ColorCorrection`过滤器，首先计算图像的平均亮度。然后为每个颜色通道计算伽马校正值，以便每个颜色通道的平均值等于平均亮度。均匀对比度拉伸图像具有平均值`R=70 G=64 B=93`，平均亮度为`(70 + 64 + 93) / 3 = 76`。伽马值被计算为`R=1.09 G=1.18 B=0.80`，结果，非常中性，图像的平均值`R=76 G=76 B=76`如预期的那样：

![A_UniformStretchedCorrected](../Images/c87d0e128b98c5e21f782e13dac255b7.png)

**现在，解决真正的问题......**我想将图像的平均颜色校正为灰色有点过于激烈，并且会使一些图像看起来很暗淡，比如第二个样本（第一个图像是均匀拉伸的，接下来是相同的图像颜色校正）：

![B_UniformStretched](../Images/86581addbee0e618a6d15a97249993d4.png) ![B_UniformStretchedCorrected](../Images/dab8e50ce332767cee238a480f8b0949.png)

在照片编辑程序中手动执行颜色校正的一种方法是对已知中性色（白色/灰色/黑色）的颜色进行采样，并将图像的其余部分调整为该颜色。但由于这个程序必须是完全自动的，所以这不是一个选择。

我想我可以在我的`ColorCorrection`过滤器中添加一个强度设置，这样 0.5 的强度会将平均值移动到平均亮度的一半距离。但另一方面，有些图像可能在没有任何颜色校正的情况下表现最好。

有更好算法的想法吗？或者一些方法来检测图像是否有偏色或只是有很多颜色，比如第二个样本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:05:44.440

使用以下方法将 RGB 转换为 HSL：

```
 System.Drawing.Color color = System.Drawing.Color.FromArgb(red, green, blue);
    float hue = color.GetHue();
    float saturation = color.GetSaturation();
    float lightness = color.GetBrightness(); 
```

相应地调整饱和度和亮度

通过以下方式将 HSL 转换回 RGB：

```
/// <summary>
/// Convert HSV to RGB
/// h is from 0-360
/// s,v values are 0-1
/// r,g,b values are 0-255
/// Based upon http://ilab.usc.edu/wiki/index.php/HSV_And_H2SV_Color_Space#HSV_Transformation_C_.2F_C.2B.2B_Code_2
/// </summary>
void HsvToRgb(double h, double S, double V, out int r, out int g, out int b)
{
  // ######################################################################
  // T. Nathan Mundhenk
  // mundhenk@usc.edu
  // C/C++ Macro HSV to RGB

  double H = h;
  while (H < 0) { H += 360; };
  while (H >= 360) { H -= 360; };
  double R, G, B;
  if (V <= 0)
    { R = G = B = 0; }
  else if (S <= 0)
  {
    R = G = B = V;
  }
  else
  {
    double hf = H / 60.0;
    int i = (int)Math.Floor(hf);
    double f = hf - i;
    double pv = V * (1 - S);
    double qv = V * (1 - S * f);
    double tv = V * (1 - S * (1 - f));
    switch (i)
    {

      // Red is the dominant color

      case 0:
        R = V;
        G = tv;
        B = pv;
        break;

      // Green is the dominant color

      case 1:
        R = qv;
        G = V;
        B = pv;
        break;
      case 2:
        R = pv;
        G = V;
        B = tv;
        break;

      // Blue is the dominant color

      case 3:
        R = pv;
        G = qv;
        B = V;
        break;
      case 4:
        R = tv;
        G = pv;
        B = V;
        break;

      // Red is the dominant color

      case 5:
        R = V;
        G = pv;
        B = qv;
        break;

      // Just in case we overshoot on our math by a little, we put these here. Since its a switch it won't slow us down at all to put these here.

      case 6:
        R = V;
        G = tv;
        B = pv;
        break;
      case -1:
        R = V;
        G = pv;
        B = qv;
        break;

      // The color is not defined, we should throw an error.

      default:
        //LFATAL("i Value error in Pixel conversion, Value is %d", i);
        R = G = B = V; // Just pretend its black/white
        break;
    }
  }
  r = Clamp((int)(R * 255.0));
  g = Clamp((int)(G * 255.0));
  b = Clamp((int)(B * 255.0));
}

/// <summary>
/// Clamp a value to 0-255
/// </summary>
int Clamp(int i)
{
  if (i < 0) return 0;
  if (i > 255) return 255;
  return i;
} 
```

原始代码：

*   [如何将 RGB 颜色更改为 HSV？](https://stackoverflow.com/questions/359612/how-to-change-rgb-color-to-hsv)
*   [http://www.splinter.com.au/converting-hsv-to-rgb-colour-using-c/](http://www.splinter.com.au/converting-hsv-to-rgb-colour-using-c/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:11:05.247

*   翻译成hsv
*   V 层通过从 (min,max) 范围到 (0,255) 范围的缩放值进行校正
*   组装回rgb
*   通过与第二步的 V 层相同的想法来校正 R、G、B 层的结果

没有 aforge.net 代码，因为它是由 php 原型代码处理的，但是 afaik 用 aforge.net 这样做没有任何问题。结果是：

![在此处输入图像描述](../Images/5a6476fcf4f28888dee2ea851ae2203d.png) ![在此处输入图像描述](../Images/be3d1a7d9180e9e9a4c25497da6b032c.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-26T05:19:34.320

您可以从此链接尝试自动亮度和对比度：http: [//answers.opencv.org/question/75510/how-to-make-auto-adjustmentsbrightness-and-contrast-for-image-android-opencv-image-correction /](http://answers.opencv.org/question/75510/how-to-make-auto-adjustmentsbrightness-and-contrast-for-image-android-opencv-image-correction/)

```
void Utils::BrightnessAndContrastAuto(const cv::Mat &src, cv::Mat &dst, float clipHistPercent)
{

    CV_Assert(clipHistPercent >= 0);
    CV_Assert((src.type() == CV_8UC1) || (src.type() == CV_8UC3) || (src.type() == CV_8UC4));

    int histSize = 256;
    float alpha, beta;
    double minGray = 0, maxGray = 0;

    //to calculate grayscale histogram
    cv::Mat gray;
    if (src.type() == CV_8UC1) gray = src;
    else if (src.type() == CV_8UC3) cvtColor(src, gray, CV_BGR2GRAY);
    else if (src.type() == CV_8UC4) cvtColor(src, gray, CV_BGRA2GRAY);
    if (clipHistPercent == 0)
    {
        // keep full available range
        cv::minMaxLoc(gray, &minGray, &maxGray);
    }
    else
    {
        cv::Mat hist; //the grayscale histogram

        float range[] = { 0, 256 };
        const float* histRange = { range };
        bool uniform = true;
        bool accumulate = false;
        calcHist(&gray, 1, 0, cv::Mat(), hist, 1, &histSize, &histRange, uniform, accumulate);

        // calculate cumulative distribution from the histogram
        std::vector<float> accumulator(histSize);
        accumulator[0] = hist.at<float>(0);
        for (int i = 1; i < histSize; i++)
        {
            accumulator[i] = accumulator[i - 1] + hist.at<float>(i);
        }

        // locate points that cuts at required value
        float max = accumulator.back();
        clipHistPercent *= (max / 100.0); //make percent as absolute
        clipHistPercent /= 2.0; // left and right wings
        // locate left cut
        minGray = 0;
        while (accumulator[minGray] < clipHistPercent)
            minGray++;

        // locate right cut
        maxGray = histSize - 1;
        while (accumulator[maxGray] >= (max - clipHistPercent))
            maxGray--;
    }

    // current range
    float inputRange = maxGray - minGray;

    alpha = (histSize - 1) / inputRange;   // alpha expands current range to histsize range
    beta = -minGray * alpha;             // beta shifts current range so that minGray will go to 0

    // Apply brightness and contrast normalization
    // convertTo operates with saurate_cast
    src.convertTo(dst, -1, alpha, beta);

    // restore alpha channel from source 
    if (dst.type() == CV_8UC4)
    {
        int from_to[] = { 3, 3 };
        cv::mixChannels(&src, 4, &dst, 1, from_to, 1);
    }
    return;
} 
```

或从此链接应用自动色彩平衡：[http ://www.morethantechnical.com/2015/01/14/simplest-color-balance-with-opencv-wcode/](http://www.morethantechnical.com/2015/01/14/simplest-color-balance-with-opencv-wcode/)

```
void Utils::SimplestCB(Mat& in, Mat& out, float percent) {
    assert(in.channels() == 3);
    assert(percent > 0 && percent < 100);

    float half_percent = percent / 200.0f;

    vector<Mat> tmpsplit; split(in, tmpsplit);
    for (int i = 0; i < 3; i++) {
        //find the low and high precentile values (based on the input percentile)
        Mat flat; tmpsplit[i].reshape(1, 1).copyTo(flat);
        cv::sort(flat, flat, CV_SORT_EVERY_ROW + CV_SORT_ASCENDING);
        int lowval = flat.at<uchar>(cvFloor(((float)flat.cols) * half_percent));
        int highval = flat.at<uchar>(cvCeil(((float)flat.cols) * (1.0 - half_percent)));
        cout << lowval << " " << highval << endl;

        //saturate below the low percentile and above the high percentile
        tmpsplit[i].setTo(lowval, tmpsplit[i] < lowval);
        tmpsplit[i].setTo(highval, tmpsplit[i] > highval);

        //scale the channel
        normalize(tmpsplit[i], tmpsplit[i], 0, 255, NORM_MINMAX);
    }
    merge(tmpsplit, out);
} 
```

或将 CLAHE 应用于 BGR 图像

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T14:22:51.690

为了避免在拉伸对比度时改变图像的颜色，请先将其转换为 HSV/HSL 颜色空间。然后，在 L 或 V 通道中应用常规对比拉伸，但不要改变 H 或 S 通道。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T17:49:34.753

我需要对一个庞大的视频缩略图库做同样的事情。我想要一个保守的解决方案，这样我就不必抽查缩略图是否完全被破坏了。这是我使用的乱七八糟的解决方案。

我首先使用这个类来计算图像中颜色的分布。我首先在 HSV 色彩空间中做了一个，但发现基于灰度的一个更快，而且几乎一样好：

```
class GrayHistogram
  def initialize(filename)
    @hist = hist(filename)
    @percentile = {}
  end

  def percentile(x)
    return @percentile[x] if @percentile[x]
    bin = @hist.find{ |h| h[:count] > x }
    c = bin[:color]
    return @percentile[x] ||= c/256.0
  end

  def midpoint
    (percentile(0.25) + percentile(0.75)) / 2.0
  end

  def spread
    percentile(0.75) - percentile(0.25)
  end

private
  def hist(imgFilename)
    histFilename = "/tmp/gray_hist.txt"

    safesystem("convert #{imgFilename} -depth 8 -resize 50% -colorspace GRAY /tmp/out.png")
    safesystem("convert /tmp/out.png -define histogram:unique-colors=true " +
               "        -format \"%c\" histogram:info:- > #{histFilename}")

    f = File.open(histFilename)
    lines = f.readlines[0..-2] # the last line is always blank
    hist = lines.map { |line| { :count => /([0-9]*):/.match(line)[1].to_i, :color => /,([0-9]*),/.match(line)[1].to_i } }
    f.close

    tot = 0
    cumhist = hist.map do |h|
      tot += h[:count]
      {:count=>tot, :color=>h[:color]}
    end
    tot = tot.to_f
    cumhist.each { |h| h[:count] = h[:count] / tot }

    safesystem("rm /tmp/out.png #{histFilename}")

    return cumhist
  end
end 
```

然后我创建了这个类来使用直方图来确定如何校正图像：

```
def safesystem(str)
  out = `#{str}`
  if $? != 0
    puts "shell command failed:"
    puts "\tcmd: #{str}"
    puts "\treturn code: #{$?}"
    puts "\toutput: #{out}"
    raise
  end
end

def generateHist(thumb, hist)
  safesystem("convert #{thumb} histogram:hist.jpg && mv hist.jpg #{hist}")
end

class ImgCorrector
  def initialize(filename)
    @filename = filename
    @grayHist = GrayHistogram.new(filename)
  end

  def flawClass
    if !@flawClass
      gapLeft  = (@grayHist.percentile(0.10) > 0.13) || (@grayHist.percentile(0.25) > 0.30)
      gapRight = (@grayHist.percentile(0.75) < 0.60) || (@grayHist.percentile(0.90) < 0.80)

      return (@flawClass="low"   ) if (!gapLeft &&  gapRight)
      return (@flawClass="high"  ) if ( gapLeft && !gapRight)
      return (@flawClass="narrow") if ( gapLeft &&  gapRight)
      return (@flawClass="fine"  )
    end
    return @flawClass
  end

  def percentileSummary
    [ @grayHist.percentile(0.10),
      @grayHist.percentile(0.25),
      @grayHist.percentile(0.75),
      @grayHist.percentile(0.90) ].map{ |x| (((x*100.0*10.0).round)/10.0).to_s }.join(', ') +
    "<br />" +
    "spread: " + @grayHist.spread.to_s
  end

  def writeCorrected(filenameOut)
    if flawClass=="fine"
      safesystem("cp #{@filename} #{filenameOut}")
      return
    end

    # spread out the histogram, centered at the midpoint
    midpt = 100.0*@grayHist.midpoint

    # map the histogram's spread to a sigmoidal concept (linearly)
    minSpread = 0.10
    maxSpread = 0.60
    minS = 1.0
    maxS = case flawClass
      when "low"    then 5.0
      when "high"   then 5.0
      when "narrow" then 6.0
    end
    s = ((1.0 - [[(@grayHist.spread - minSpread)/(maxSpread-minSpread), 0.0].max, 1.0].min) * (maxS - minS)) + minS

    #puts "s: #{s}"
    safesystem("convert #{@filename} -sigmoidal-contrast #{s},#{midpt}% #{filenameOut}")
  end
end 
```

我像这样运行它：

```
origThumbs = `find thumbs | grep jpg`.split("\n")
origThumbs.each do |origThumb|
  newThumb = origThumb.gsub(/thumb/, "newthumb")
  imgCorrector = ImgCorrector.new(origThumb)
  imgCorrector.writeCorrected(newThumb)
end 
```

# matlab - 在Matlab中从具有已知端点（像素）坐标的斜三角形中提取角度

> ID：14203948
> 
> 赞同：0
> 
> 时间：2013-01-07T21:01:20.587
> 
> 标签：matlab, geometry, angle, coordinate-systems

我需要在 Matlab (R2012a) 中的大量图像中计算斜三角形的角度 (A)。我知道每个三角形的所有 3 个端点（像素）坐标。我可以仅使用端点坐标（独立于图像）找出三角形的角度，还是需要找出所有边的长度，然后对每个三角形应用余弦定律？[http://en.wikipedia.org/wiki/Law_of_cosines](http://en.wikipedia.org/wiki/Law_of_cosines) 感谢您的帮助，我是 Matlab 和三角函数的新手！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:04:42.850

我能想到的最简单的方法是使用点积。尝试

```
 a=p1-p2;
  b=p1-p3;
  A = acos(dot(a,b)/norm(a)/norm(b)); 
```

# sql - 用 SQL 编写此查询的正确方法是什么？

> ID：14203950
> 
> 赞同：2
> 
> 时间：2013-01-07T21:01:25.907
> 
> 标签：sql, oracle

我有两张桌子：

```
Names
- id (int)
- name (string) 
```

和

```
Relationships
- id1 (int)
- id2 (int) 
```

我想查询具有特定 id1 的所有关系的列表，并且我想在结果查询中包含 Names 中的名称。

所以，结果将有四列

*   id1
*   id2
*   name_for_id1
*   name_for_id2

这可能吗？我知道我可以进行内部连接以包含其中一个名称，但我不确定如何包含两个名称。

对于一个名字，我会做类似的事情：

```
select Relationships.id1, Relationships.id2, Names.name from Relationships
inner join Names
on Names.id1 = Relationships.id1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:03:48.090

您可以加入一个表两次。

```
SELECT
   r.id1,
   r.id2,
   n1.name,
   n2.name
FROM Relationships r
INNER JOIN Names n1 ON r.id1 = n1.id
INNER JOIN Names n2 ON r.id2 = n2.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:06:11.373

您想再次加入`Names`. 您可以使用表别名来指定哪个联接是哪个。

```
select r.id1, r.id2, n1.name, n2.name
from Relationships r
inner join Names n1
    on n1.id = r.id1
inner join Names n2
    on n2.id = r.id2 
```

# ios - UIImage的裁剪中心正方形

> ID：14203951
> 
> 赞同：34
> 
> 时间：2013-01-07T21:01:28.777
> 
> 标签：ios, image, uiimage

所以这就是我到目前为止所做的。我正在使用从相机捕获的 UIImage，并且可以在横向时裁剪中心正方形。由于某种原因，这并没有像预期的那样转换为纵向模式。我将发布我的代码和日志仅供参考。

代码：

```
CGRect squareRect = CGRectMake(offsetX, offsetY, newWidth, newHeight);
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], squareRect);
image = [UIImage imageWithCGImage:imageRef scale:1 orientation:image.imageOrientation]; 
```

纵向结果（非方形）：

```
original image size: {1536, 2048}, with orientation: 3
squareRect: {{0, 256}, {1536, 1536}}
new image size: {1280, 1536}, with orientation: 3 <--- not expected 
```

景观结果（正方形）：

```
original image size: {2048, 1536}, with orientation: 1
squareRect: {{256, 0}, {1536, 1536}}
new image size: {1536, 1536}, with orientation: 1 
```

这是 CGImageCreateWithImageInRect() 中的错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-05-26T07:22:18.613

I think here would be the perfect solution!
It is NOT good idea to crop image basis on the `toSize`'s **size**. It will look weird when the image resolution (size) is very large.
Following code will crop the image as per the `toSize`'s **ratio**.
Improved from **@BlackRider**'s answer.

```
- (UIImage *)imageByCroppingImage:(UIImage *)image toSize:(CGSize)size
{
    double newCropWidth, newCropHeight;

    //=== To crop more efficently =====//
    if(image.size.width < image.size.height){
         if (image.size.width < size.width) {
                 newCropWidth = size.width;
          }
          else {
                 newCropWidth = image.size.width;
          }
          newCropHeight = (newCropWidth * size.height)/size.width;
    } else {
          if (image.size.height < size.height) {
                newCropHeight = size.height;
          }
          else {
                newCropHeight = image.size.height;
          }
          newCropWidth = (newCropHeight * size.width)/size.height;
    }
    //==============================//

    double x = image.size.width/2.0 - newCropWidth/2.0;
    double y = image.size.height/2.0 - newCropHeight/2.0;

    CGRect cropRect = CGRectMake(x, y, newCropWidth, newCropHeight);
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);

    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return cropped;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-01-06T06:52:25.523

这适用于不同的方向。纵向和横向都可以正常工作。

```
- (UIImage *)imageByCroppingImage:(UIImage *)image toSize:(CGSize)size
{
    // not equivalent to image.size (which depends on the imageOrientation)!
    double refWidth = CGImageGetWidth(image.CGImage);
    double refHeight = CGImageGetHeight(image.CGImage);

    double x = (refWidth - size.width) / 2.0;
    double y = (refHeight - size.height) / 2.0;

    CGRect cropRect = CGRectMake(x, y, size.height, size.width);
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);

    UIImage *cropped = [UIImage imageWithCGImage:imageRef scale:0.0 orientation:self.imageOrientation];
    CGImageRelease(imageRef);

    return cropped;
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-11-23T12:25:53.100

根据 Elmundo 的检查答案和 Imbrue 的快速版本，这里是自动计算图像中心大小的相同解决方案（考虑到方向），并考虑错误：

```
func cropImageToSquare(image: UIImage) -> UIImage? {
    var imageHeight = image.size.height
    var imageWidth = image.size.width

    if imageHeight > imageWidth {
        imageHeight = imageWidth
    }
    else {
        imageWidth = imageHeight
    }

    let size = CGSize(width: imageWidth, height: imageHeight)

    let refWidth : CGFloat = CGFloat(CGImageGetWidth(image.CGImage))
    let refHeight : CGFloat = CGFloat(CGImageGetHeight(image.CGImage))

    let x = (refWidth - size.width) / 2
    let y = (refHeight - size.height) / 2

    let cropRect = CGRectMake(x, y, size.height, size.width)
    if let imageRef = CGImageCreateWithImageInRect(image.CGImage, cropRect) {
        return UIImage(CGImage: imageRef, scale: 0, orientation: image.imageOrientation)
    }

   return nil
} 
```

* * *

**斯威夫特 3**版本

```
func cropImageToSquare(image: UIImage) -> UIImage? {
    var imageHeight = image.size.height
    var imageWidth = image.size.width

    if imageHeight > imageWidth {
        imageHeight = imageWidth
    }
    else {
        imageWidth = imageHeight
    }

    let size = CGSize(width: imageWidth, height: imageHeight)

    let refWidth : CGFloat = CGFloat(image.cgImage!.width)
    let refHeight : CGFloat = CGFloat(image.cgImage!.height)

    let x = (refWidth - size.width) / 2
    let y = (refHeight - size.height) / 2

    let cropRect = CGRect(x: x, y: y, width: size.height, height: size.width)
    if let imageRef = image.cgImage!.cropping(to: cropRect) {
        return UIImage(cgImage: imageRef, scale: 0, orientation: image.imageOrientation)
    }

    return nil
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-07T21:29:36.807

尝试这样的事情：

```
- (UIImage *)imageByCroppingImage:(UIImage *)image toSize:(CGSize)size
{
    double x = (image.size.width - size.width) / 2.0;
    double y = (image.size.height - size.height) / 2.0;

    CGRect cropRect = CGRectMake(x, y, size.height, size.width);
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);

    UIImage *cropped = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);

    return cropped;
} 
```

如您所见，我没有在调用中指定方向`UIImage imageWithCGImage:`。我想知道这是否是您的代码中的问题。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-23T16:02:34.183

检查解决方案有快速版本：

```
private func imageByCroppingImage(image : UIImage, size : CGSize) -> UIImage{
        var refWidth : CGFloat = CGFloat(CGImageGetWidth(image.CGImage))
        var refHeight : CGFloat = CGFloat(CGImageGetHeight(image.CGImage))

        var x = (refWidth - size.width) / 2
        var y = (refHeight - size.height) / 2

        let cropRect = CGRectMake(x, y, size.height, size.width)
        let imageRef = CGImageCreateWithImageInRect(image.CGImage, cropRect)

        let cropped : UIImage = UIImage(CGImage: imageRef, scale: 0, orientation: image.imageOrientation)!

        return cropped
    } 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-04-15T07:02:21.040

从@Elmundo的回答改进

```
+(UIImage *)getCenterMaxSquareImageByCroppingImage:(UIImage *)image withOrientation:(UIImageOrientation)imageOrientation

{
    CGSize centerSquareSize;
    double oriImgWid = CGImageGetWidth(image.CGImage);
    double oriImgHgt = CGImageGetHeight(image.CGImage);
    NSLog(@"oriImgWid==[%.1f], oriImgHgt==[%.1f]", oriImgWid, oriImgHgt);
    if(oriImgHgt <= oriImgWid) {
        centerSquareSize.width = oriImgHgt;
        centerSquareSize.height = oriImgHgt;
    }else {
        centerSquareSize.width = oriImgWid;
        centerSquareSize.height = oriImgWid;
    }

    NSLog(@"squareWid==[%.1f], squareHgt==[%.1f]", centerSquareSize.width, centerSquareSize.height);

    double x = (oriImgWid - centerSquareSize.width) / 2.0;
    double y = (oriImgHgt - centerSquareSize.height) / 2.0;
    NSLog(@"x==[%.1f], x==[%.1f]", x, y);

    CGRect cropRect = CGRectMake(x, y, centerSquareSize.height, centerSquareSize.width);
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);

    UIImage *cropped = [UIImage imageWithCGImage:imageRef scale:0.0 orientation:imageOrientation];
    CGImageRelease(imageRef);

    return cropped;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-06-08T14:20:58.790

这是基于上面@Alonzo 的 Swift 3 答案，简化和简化了代码，使其更易于理解和简洁。如果图像已经是方形的，它也会退出。

```
extension UIImage {
    func square() -> UIImage? {
        if size.width == size.height {
            return self
        }

        let cropWidth = min(size.width, size.height)

        let cropRect = CGRect(
            x: (size.width - cropWidth) * scale / 2.0,
            y: (size.height - cropWidth) * scale / 2.0,
            width: cropWidth * scale,
            height: cropWidth * scale
        )

        guard let imageRef = cgImage?.cropping(to: cropRect) else {
            return nil
        }

        return UIImage(cgImage: imageRef, scale: scale, orientation: imageOrientation)
    }
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-06-15T18:07:44.360

这是一个古老的问题，但没有一个答案是真正正确的（即使是公认的答案）。要理解的重要一点是`UIImageOrientation`( `image.imageOrientation`) 实际上是正确的，但是它对 UP 的定义**和**我们对**UP**的定义是不同的。对我们来说，**UP**是设备的顶部（电源按钮所在的位置）。对于`UIImageOrientation`，**UP**是音量控制按钮的*对面*。因此，如果设备在降低音量控制的情况下拍照，则为`UIImageOrientationUp`. 如果您以纵向模式（按下主页按钮）拍照，则为`UIImageOrientationLeft`.

因此，您可以计算纵向中心，然后您可以将以下变换应用于图像，以便裁剪在正确的位置。

```
- (UIImage *)cropImage:(UIImage*)image toRect:(CGRect)rect {
    CGFloat (^rad)(CGFloat) = ^CGFloat(CGFloat deg) {
        return deg / 180.0f * (CGFloat) M_PI;
    };

    // determine the orientation of the image and apply a transformation to the crop rectangle to shift it to the correct position
    CGAffineTransform rectTransform;
    switch (image.imageOrientation) {
        case UIImageOrientationLeft:
            rectTransform = CGAffineTransformTranslate(CGAffineTransformMakeRotation(rad(90)), 0, -image.size.height);
            break;
        case UIImageOrientationRight:
            rectTransform = CGAffineTransformTranslate(CGAffineTransformMakeRotation(rad(-90)), -image.size.width, 0);
            break;
        case UIImageOrientationDown:
            rectTransform = CGAffineTransformTranslate(CGAffineTransformMakeRotation(rad(-180)), -image.size.width, -image.size.height);
            break;
        default:
            rectTransform = CGAffineTransformIdentity;
    };

    // adjust the transformation scale based on the image scale
    rectTransform = CGAffineTransformScale(rectTransform, image.scale, image.scale);

    // apply the transformation to the rect to create a new, shifted rect
    CGRect transformedCropSquare = CGRectApplyAffineTransform(rect, rectTransform);
    // use the rect to crop the image
    CGImageRef imageRef = CGImageCreateWithImageInRect(image.CGImage, transformedCropSquare);
    // create a new UIImage and set the scale and orientation appropriately
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:image.scale orientation:image.imageOrientation];
    // memory cleanup
    CGImageRelease(imageRef);

    return result;
} 
```

此代码移动裁剪方块，使其处于正确的相对位置。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-09-15T15:34:43.897

斯威夫特 3

```
 let refWidth : CGFloat = CGFloat(image.cgImage!.width)
    let refHeight : CGFloat = CGFloat(image.cgImage!.height)

    let x = (refWidth - size.width) / 2
    let y = (refHeight - size.height) / 2

    let cropRect = CGRect(x: x, y: y, width: size.width, height: size.height)
    let imageRef = image.cgImage!.cropping(to: cropRect)

    let cropped : UIImage = UIImage(cgImage: imageRef!, scale: 0, orientation: image.imageOrientation)

    return cropped 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-03-17T19:56:40.450

Swift 2 使用 UIImage 扩展

```
extension UIImage
{    
    func imageByCroppingImage(size : CGSize) -> UIImage
    {
        let refWidth : CGFloat = CGFloat(CGImageGetWidth(self.CGImage))
        let refHeight : CGFloat = CGFloat(CGImageGetHeight(self.CGImage))

        let x = (refWidth - size.width) / 2
        let y = (refHeight - size.height) / 2

        let cropRect = CGRectMake(x, y, size.width, size.height)
        let imageRef = CGImageCreateWithImageInRect(self.CGImage, cropRect)

        let cropped : UIImage = UIImage(CGImage: imageRef!, scale: 0, orientation: self.imageOrientation)

        return cropped
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-13T08:55:33.963

从 UIImageView 获得帮助怎么样

```
+ (UIImage *)laodSquareImage:(UIImage *)image withDiameter:(CGFloat)diameter  
{
    CGRect frame = CGRectMake(0.0f, 0.0f, diameter, diameter);
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];
    imageView.contentMode = UIViewContentModeScaleAspectFill;
    imageView.clipsToBounds = YES;
    imageView.image = image;
    CALayer *layer = imageView.layer;

    layer.masksToBounds = YES;
    UIGraphicsBeginImageContextWithOptions(imageView.bounds.size,NO, [UIScreen mainScreen].scale);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [layer renderInContext:context];

    UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return roundedImage;
} 
```

您也可以通过仅添加一条线来制作图像圆圈。

```
layer.cornerRadius =MAX( imageView.frame.size.height,imageView.frame.size.width)/2; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-22T13:52:53.013

斯威夫特 5

```
extension UIImage {

    var squared: UIImage? {
        guard let cgImage = cgImage else {
            return nil
        }

        let length = min(cgImage.width, cgImage.height)

        let x = cgImage.width / 2 - length / 2
        let y = cgImage.height / 2 - length / 2
        let cropRect = CGRect(x: x, y: y, width: length, height: length)

        guard let croppedCGImage = cgImage.cropping(to: cropRect) else {
            return nil
        }

        return UIImage(cgImage: croppedCGImage, scale: scale, orientation: imageOrientation)
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-07-20T06:53:58.440

已经有很多解决方案，但我想发布我的：

```
 extension UIImage {

    var cgImageWidth: Int { return cgImage?.width ?? 0 }
    var cgImageheight: Int { return cgImage?.height ?? 0 }
    var blance: CGFloat { return min(size.width, size.height)}
    var blanceSize: CGSize { return CGSize(width: blance, height: blance) }
    var blanceRect: CGRect { return CGRect(origin: .zero, size: blanceSize) }

    var roundedImage: UIImage? {
        UIGraphicsBeginImageContextWithOptions(blanceSize, false, scale)
        defer { UIGraphicsEndImageContext() }
        guard let cgImage = cgImage?.cropping(to: CGRect(origin: CGPoint(x: max(0, CGFloat(cgImageWidth) - blance)/2.0, y: max(0, CGFloat(cgImageheight) - blance)/2.0), size: blanceSize)) else { return nil }
        UIBezierPath(ovalIn: blanceRect).addClip()

        UIImage(cgImage: cgImage, scale: 1.0, orientation: self.imageOrientation).draw(in: blanceRect)
        return UIGraphicsGetImageFromCurrentImageContext()
    }

} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-02-27T04:23:13.657

Xamarin：

```
UIImage ImageByCroppingImage(UIImage image, CGSize size)
{
    double newCropWidth, newCropHeight;

    if (image.Size.Width < image.Size.Height)
    {
        newCropWidth = image.Size.Width < size.Width ? size.Width : image.Size.Width;
        newCropHeight = (newCropWidth * size.Height) / size.Width;
    }
    else
    {
        newCropHeight = image.Size.Height < size.Height ? size.Height : image.Size.Height;
        newCropWidth = (newCropHeight * size.Width) / size.Height;
    }

    double x = image.Size.Width / 2.0 - newCropWidth / 2.0;
    double y = image.Size.Height / 2.0 - newCropHeight / 2.0;

    CGRect cropRect = new CGRect(x, y, newCropWidth, newCropHeight);
    var imageRef = image.CGImage.WithImageInRect(cropRect);

    var cropped = new UIImage(imageRef);

    return cropped;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-08-12T03:38:24.180

Swift 5 最干净的版本。

```
func cropImage() -> UIImage? {
    let size = min(self.size.width, self.size.height)
    UIGraphicsBeginImageContextWithOptions(CGSize(width: size, height: size), true, 1.0)
    defer { UIGraphicsEndImageContext() }
    self.draw(in: CGRect(x: (size - self.size.width) / 2.0,
                          y: (size - self.size.height) / 2.0,
                          width: self.size.width,
                          height: self.size.height))
    return UIGraphicsGetImageFromCurrentImageContext()
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-04-10T22:44:32.940

这是根据给定尺寸从中心裁剪图像的 Swift 5 版本。

```
extension UIImage {

     func imageByCroppingImage(size : CGSize) -> UIImage{
        let refWidth : CGFloat = CGFloat(self.cgImage!.width)
        let refHeight : CGFloat = CGFloat(self.cgImage!.height)
        let x = (refWidth - size.width) / 2
        let y = (refHeight - size.height) / 2
        let cropRect = CGRect(x: x, y: y, width: size.width, height: size.height)
        let imageRef = self.cgImage!.cropping(to: cropRect)
        let cropped : UIImage = UIImage(cgImage: imageRef!, scale: 0, orientation: self.imageOrientation)
        return cropped
    }
    } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-07-20T07:07:33.687

我正在处理以下问题

```
 extension UIImage {

    var cgImageWidth: Int { return cgImage?.width ?? 0 }
    var cgImageheight: Int { return cgImage?.height ?? 0 }
    var blance: CGFloat { return min(size.width, size.height)}
    var blanceSize: CGSize { return CGSize(width: blance, height: blance) }
    var blanceRect: CGRect { return CGRect(origin: .zero, size: blanceSize) }

    var roundedImage: UIImage? {
        UIGraphicsBeginImageContextWithOptions(blanceSize, false, scale)
        defer { UIGraphicsEndImageContext() }
        guard let cgImage = cgImage?.cropping(to: CGRect(origin: CGPoint(x: max(0, CGFloat(cgImageWidth) - blance)/2.0, y: max(0, CGFloat(cgImageheight) - blance)/2.0), size: blanceSize)) else { return nil }
        UIBezierPath(ovalIn: blanceRect).addClip()

        UIImage(cgImage: cgImage, scale: 1.0, orientation: self.imageOrientation).draw(in: blanceRect)
        return UIGraphicsGetImageFromCurrentImageContext()
    }

} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-05-12T04:56:43.593

基于 Swift 2 扩展的解决方案。由@Geoffrey 和@Nirav Dangi 即兴创作。请注意，当 newCropWidth 和 newCropHeight 小于给定的宽度或高度时，我们将它们设置为图像的宽度或高度。

```
extension UIImage {
    func imageByCroppingImage(size: CGSize) -> UIImage {
        let newCropWidth, newCropHeight : CGFloat;

        if(self.size.width < self.size.height) {
            if (self.size.width < size.width) {
                newCropWidth = self.size.width;
            }
            else {
                newCropWidth = size.width;
            }
            newCropHeight = (newCropWidth * size.height)/size.width;
        } else {
            if (self.size.height < size.height) {
                newCropHeight = self.size.height;
            }
            else {
                newCropHeight = size.height;
            }
            newCropWidth = (newCropHeight * size.width)/size.height;
        }

        let x = self.size.width / 2 - newCropWidth / 2;
        let y = self.size.height / 2 - newCropHeight / 2;

        let cropRect = CGRectMake(x, y, newCropWidth, newCropHeight);
        let imageRef = CGImageCreateWithImageInRect(self.CGImage, cropRect);

        let croppedImage : UIImage = UIImage(CGImage: imageRef!, scale: 0, orientation: self.imageOrientation);

        return croppedImage;
    }
} 
```

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2013-02-25T17:36:33.300

我能够通过以下方式完成它：

```
 UIImage *thisImage = [[UIImage alloc] initWithContentsOfFile:imagePath];
                double x = (thisImage.size.width )/2.0;
                double y = (thisImage.size.height)/2.0;
                mediaImage = [self imageByCropping:thisImage toRect:CGRectMake(x, y, 60, 60)];
                [thisImage release]; 
```

# git - git reset 询问“更多？”

> ID：14203952
> 
> 赞同：99
> 
> 时间：2013-01-07T21:01:30.103
> 
> 标签：git, version-control

Git windows命令行，1.8.0版

到目前为止，我有 3 次提交，当我输入

```
git reset --soft HEAD^ 
```

新线路提出

```
More? 
```

和闪烁的光标输入

然后，无论我输入什么，我总是得到

> 致命：模棱两可的参数“头”：未知的修订或路径不在工作树中。使用 '--' 将路径与修订分开，如下所示：'git [...] -- [...]

所有其他命令在同一个文件夹中都可以正常工作。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-01-07T21:27:14.630

see if `git log HEAD^` works. If it doesn't, it may be something with your localization or terminal. It seems to be filtering out the `^` symbol. As a workaround, use `git reset --soft HEAD~1` for now.

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-01-08T10:23:00.427

您的 shell 将该`^`符号解释为续行符号。要么`^`像[亚当](https://stackoverflow.com/users/1864976/adam-dymitruk) [建议](https://stackoverflow.com/a/14204318/220155)的那样避免使用：

```
git reset --soft HEAD~1 
```

或引用参数，以便 shell 不会尝试解释它（我不确定您使用的是哪个 shell，但如果这不起作用，我会感到惊讶）：

```
git reset --soft "HEAD^" 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-01-24T22:52:09.683

^ 是 Windows 命令行中的转义字符。使用 ^^ 代替 ^。

```
git reset --soft HEAD^^ 
```

[有关转义字符](http://www.robvanderwoude.com/escapechars.php)的详细信息，请参阅*Rob Van Der Woude 的脚本页面*。

# javascript - 使用 jQuery 定义点击导航

> ID：14203953
> 
> 赞同：0
> 
> 时间：2013-01-07T21:01:28.857
> 
> 标签：javascript, jquery, html, navigation

我正在尝试执行 onClick 功能，它将在将特定文本输入到搜索页面后重定向用户......在函数定义中我只使用简单的 if... 否则一切都很好。当我尝试使用多个 else if 时出现问题。

```
<input id="naszInput"></input>
<button onclick="searchMe();">Search</button> 
```

和功能定义：

```
<script>
function searchMe () {

if ($("#naszInput").val().toLowerCase() == "zara")
{
    window.location.href = 'zara.html';
}

    else if ($("#naszInput").val().toLowerCase() == "orsay")
{
    window.location.href = 'orsay.html';
}

else
{
    $("#naszLabel").text("cannot find!");
}
}
</script> 
```

任何想法为什么会这样？这就是 Chrome 控制台告诉我的有关此错误的信息： Uncaught ReferenceError: searchMe is not defined app.html:1 onclick

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:09:55.123

我将删除按钮上的 onclick 属性，并添加一个可用于连接单击事件的 id 属性。另外，我建议将您的 javascript 移动到外部文件中。

```
<button id="btnSearch">Search</button>

<script>
function searchMe () {

if ($("#naszInput").val().toLowerCase() == "zara")
{
    window.location.href = 'zara.html';
}

    else if ($("#naszInput").val().toLowerCase() == "orsay")
{
    window.location.href = 'orsay.html';
}

else
{
    $("#naszLabel").text("cannot find!");
}
}
    $(function(){
      $('#btnSearch').click(searchMe);

    })
</script> 
```

# c# - 如何改进这个 LINQ TO SQL 的可查询性？

> ID：14203955
> 
> 赞同：0
> 
> 时间：2013-01-07T21:01:33.920
> 
> 标签：c#, linq, entity-framework, linq-to-sql, iqueryable

我有一个学生列表，我想在其中创建一个查询，其中获取所有项目，而不是 1 x 1，因为我在下面显示代码：

```
 IEnumerable<Student> = ...
            List<AnsweredTest> ats = new List<AnsweredTest>();

            foreach (var s in students)
            {
                query = from at in Database.Current.AnsweredTests
                        where at.StudentId == s.StudentId
                        select at;

                ats.Add(query.Single());
            }

            listView.ItemsSource = ats; 
```

这对性能不利。我希望让自己清楚，如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:13:14.863

要么加入：

```
 query = from at in Database.Current.AnsweredTests 
    join s in Database.Current.Students on at.StudentId == s.StudentId
    where s... // filter s if needed.
    select at; 
```

或者获取学生 ID 列表并将其传递到查询中：

```
 int[] studentIds = students.Select(s => s.StudentId).ToArray();
   query = from at in Database.Current.AnsweredTests
     where studentIds.Any(id => at.StudentId == id)
     select at; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:11:05.367

```
var ats = Database.Current.AnsweredTests
    .Where(at => students.Any(s => s.StudentId == at.StudentId).ToList() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T21:19:48.520

也许是这样的：

```
var studentIds = students.Select(s => s.StudentId);
var ats = Database.Current.AnsweredTests.Where(at => studentIds.Contains(at.StudentId)); 
```

# http - 保持连接 (http) 处于打开状态的建议时间长度是多少？

> ID：14203956
> 
> 赞同：1
> 
> 时间：2013-01-07T21:01:35.453
> 
> 标签：http, http-headers, keep-alive

我的问题是：

保持连接 (http) 处于打开状态的建议时间长度是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:50:38.877

对于服务器，您希望尽可能长时间地保留它，因为对于客户端，重用连接总是比打开新连接更快。

然而，这方面的回报是递减的——只需几秒钟，您就可以快速下载该网站。较长的持续时间只会稍微加快后续导航。

在典型的 Apache 配置和其他服务器中，每个打开的连接都保持线程运行，这涉及到内存成本，因此最好将其保持在 2-3 秒，甚至禁用它并通过 haproxy 等添加保持活动支持。

在像 nginx、lighttpd（和带有实验性事件 mpm 的 Apache）这样的事件服务器中，成本相对较小，因此您可以拥有较长的 KeepAliveTimeout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:22:56.717

如果您认为“KeepAliveTimeout”值 - 这取决于您的站点。如果它类似于带有页面内图像等的论坛主题，那么您可以将 KeepAliveTimeout 设置为 2 或 3 秒。如果它是非常简单的页面，没有很多页内图像，您可以停止使用 keep-alive。我认为最好使用它并运行一些基准测试。它总是更好:)

# joomla - 允许访问组件文件或安装在根目录下

> ID：14203957
> 
> 赞同：0
> 
> 时间：2013-01-07T21:01:36.373
> 
> 标签：joomla, joomla2.5, joomla-component

我正在开发 Joomla 2.5 组件，但遇到了一些问题：

似乎在 htaccess 文件中设置为禁止访问 /components 文件夹中的 php 文件。但是我的组件需要有一个可以从外部应用程序访问的文件（该文件将接收来自外部服务器/域的请求）。

一种解决方案是在安装组件期间以某种方式更改 htaccess，但我认为这是愚蠢且不安全的事情。

其他想法是将该文件放置到站点的根文件夹中，但是如何进行安装来执行此操作（可能在主 xml 文件中更改/添加某些内容或.....）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:33:52.217

在您要访问的文件中，尝试替换它：

```
defined('_JEXEC') or die; 
```

具有以下内容：

```
define('_JEXEC', 1); 
```

否则完全删除这行代码，但是我应该警告你这确实构成了安全威胁。

# c# - 定义两者的目的是什么 和 在 C# 自动实现的属性中？

> ID：14203967
> 
> 赞同：3
> 
> 时间：2013-01-07T21:02:10.677
> 
> 标签：c#, documentation

C# 规范/StyleCop（不确定是哪个）建议使用两个标签对自动属性进行注释 -`<summary>`和`<value>`，给出如下内容：

```
class Foo
{
    /// <summary>Gets bar.</summary>
    /// <value>Bar.</value>
    public Example Bar { get; set; }
} 
```

但出于所有实际目的， 的值`<summary>`始终是`Gets <whatever you said for value here\>.`

这里的单独标签是为了帮助特定的文档生成器，还是与编译器标记自动属性的方式有关，或者其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T11:29:51.527

正如您所指出的，这两个标签的自动建议内容是多余的。但是，对于一个有据可查的类，例如作为公共 API 的一部分，您在这两个标签中放置的文本应该是不同的。

例如，让我们看一下 Microsoft 的[DateTime.Date 属性](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)的公共 API 文档。

注释中的`<summary>`和`<value>`标记对应于文档的两个不同部分。在这种情况下，文档可能是从如下评论生成的：

```
/// <summary>
///   Gets the date component of this instance.
/// </summary>
/// <value>
///   A new object with the same date as this instance, and the time value
///   set to 12:00:00 midnight (00:00:00).
/// </value> 
```

所以你可以看到，在tooltips中使用的“summary”是属性的缩写，而“value”是对返回值的更详细的描述。

阅读[<summary>](http://msdn.microsoft.com/en-us/library/2d6dt3kf.aspx)和[<value>](http://msdn.microsoft.com/en-us/library/azda5z79.aspx)标记的完整文档以了解更多详细信息。

# c - 每次请求时猫鼬中的堆栈溢出

> ID：14203968
> 
> 赞同：3
> 
> 时间：2013-01-07T21:02:13.280
> 
> 标签：c, stack-overflow, mongoose-web-server

我正在开发一个简单的基于 Moongose 的 Web 服务器，以通过 HTTP 发送作为参数传递的文件，无论请求是什么，但在每个请求上，我都会收到**堆栈溢出**错误。

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include "mongoose.h"

// file path
char *path;

static void *callback(enum mg_event event, struct mg_connection *conn) 
{
    const struct mg_request_info *request_info = mg_get_request_info(conn);
    mg_send_file(conn, path);

    return "";
}

int main(int argc,char *argv[]) 
{    
    struct mg_context *ctx;
    const char *options[] = {"listening_ports", "8081", NULL};

    // registers file
    path = argv[1];
    ctx = mg_start(&callback, NULL, options);
    printf("%s", path);
    getchar();  // Wait until user hits "enter"
    mg_stop(ctx);

    return 0;
} 
```

我正在使用 Visual Studio 2010 来构建项目

有谁知道可能导致此错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:56:28.430

您没有为回调函数分配返回值，根据定义，这是未定义的行为。检查回调的正确返回结果要求，因为`void *`不是`void`. 我很确定返回值取决于回调事件，但不要引用我的话。（该死的……太晚了）。

取自 mongoose 标头（至少是我可以访问的版本），描述了提供给的回调函数的目的和职责`mg_start()`：

```
// Prototype for the user-defined function. Mongoose calls this function
// on every event mentioned above.
//
// Parameters:
//   event: which event has been triggered.
//   conn: opaque connection handler. Could be used to read, write data to the
//         client, etc. See functions below that accept "mg_connection *".
//   request_info: Information about HTTP request.
//
// Return:
//   If handler returns non-NULL, that means that handler has processed the
//   request by sending appropriate HTTP reply to the client. Mongoose treats
//   the request as served.
//   If callback returns NULL, that means that callback has not processed
//   the request. Handler must not send any data to the client in this case.
//   Mongoose proceeds with request handling as if nothing happened.

typedef void * (*mg_callback_t)(enum mg_event event,
                   struct mg_connection *conn,
                   const struct mg_request_info *request_info); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T09:57:23.830

确保“路径”不为 NULL。分配一个默认值。

# backbone.js - 将 jquery UI 与 require.js 和 CDN 一起使用

> ID：14203974
> 
> 赞同：3
> 
> 时间：2013-01-07T21:02:51.483
> 
> 标签：backbone.js, requirejs

我正在尝试使用 requirejs 通过 CDN 加载 jqueryui，这是我的配置：

```
paths:
 jqueryui: "http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"

shim:
 jqueryui:
   deps: ['jquery'] 
```

现在在我的主模块中，我只使用require ['jqueryui']，几乎是标准方式，其他所有内容都从我的私有CDN加载得很好，但是requirejs也尝试从私有CDN加载jqueryui，似乎认为jqueryui 是一个本地模块。不知道出了什么问题。另外，我使用 requirejs-rails gem 作为 require.js 的包装器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:01:30.697

当您在具有远程模块引用（例如 CDN 内容）的项目上运行 RequireJS 优化器 (r.js) 时，您应该`empty:`在构建配置中使用该方案。

从[文档](http://www.requirejs.org/docs/optimization.html#empty)中：

> 您可能想要从内容交付网络 (CDN) 或不同域上的任何其他服务器加载脚本。[...] 但是，您更有可能不想在构建中包含该资源。如果脚本没有任何依赖项，或者您不想包含其依赖项或将以其他方式包含它们，那么您可以在路径配置中使用特殊的“空：”方案在执行时跳过文件优化。

因此，请尝试在您的构建配置文件中指定：

```
paths: {
    jqueryui: "empty:"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:48:42.280

requirejs-rails 的作者在这里。这似乎是 r.js 中的回归，它应该自动替换`empty:`配置中的 CDN URL。[当jrburke/r.js#163](https://github.com/jrburke/r.js/issues/163)在 r.js 2.0 及更高版本中发布时，requirejs-rails 的显式替换`empty:`被删除。

# tsql - Transact-SQL 对原始投票进行排名（排序）

> ID：14203977
> 
> 赞同：0
> 
> 时间：2013-01-07T21:03:12.423
> 
> 标签：tsql, sorting, ranking

我在开发一种算法来对原始选票进行排序时遇到了困难。投票表如下所示：

```
CREATE TABLE [dbo].[Votes](
  RecordId int IDENTITY(1,1) NOT NULL,
  FirstNameId int NOT NULL,
  SecondNameId int NOT NULL,
  FirstPreferred bit NULL) 
```

FirstNameId 和 SecondNameId 是对同一个 Names 表的 PK 的引用。用户对名字或名字成对投票，具体取决于 FirstPreferred 列取 1（真）或 0（假）。

请帮忙。我真的没有比在投票表中移动光标更好的办法了。

投票表已经填满了数据，所以我不能影响投票过程。

投票数据：

```
RecordId  FirstNameId  SecondNameId  FirstPreferred
   1          41            60            0
   2          49           108            0
   3         110           118            0
   4          35            41            0
   5          15           100            0
   6          12            74            1
   7          16           122            1
   8          46           118            0
   9          46           105            1
  10          93           117            0 
```

Names 表中的数据样本：

```
NameId    Name
  5      Nicolas
  6      Sergio
 11      Alexander
 12      Alexei
 13      Albert
 15      Anatoly
 16      Andreas 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:28:23.540

如果我理解正确，您想计算每个名字被投票的频率，然后输出按该计数排序的结果？如果是这样，你可以使用这个：

```
CREATE TABLE dbo.Names(
  NameId INT,
  FullName NVARCHAR(20)
)
CREATE TABLE [dbo].[Votes](
  RecordId int IDENTITY(1,1) NOT NULL,
  FirstNameId int NOT NULL,
  SecondNameId int NOT NULL,
  FirstPreferred bit NULL)
GO
INSERT INTO dbo.Names
VALUES(1,'p1'),
      (2,'p2'),
      (3,'p3'),
      (4,'p4');

INSERT INTO dbo.Votes
VALUES (1,2,1),
       (1,3,1),
       (1,4,0),
       (2,3,1),
       (2,4,0),
       (3,4,0);

WITH VotedNames AS(       
SELECT CASE WHEN FirstPreferred = 1
            THEN FirstNameId
            ELSE SecondNameId
       END AS NameId
FROM dbo.Votes
)
SELECT NameId, COUNT(1) AS Votes
FROM VotedNames
GROUP BY NameId
ORDER BY Votes DESC;

WITH VotedNames AS(       
SELECT CASE WHEN FirstPreferred = 1
            THEN FirstNameId
            ELSE SecondNameId
       END AS NameId
FROM dbo.Votes
)
,VoteCounts AS(
SELECT NameId, COUNT(1) AS Votes
FROM VotedNames
GROUP BY NameId
)
SELECT n.*,ISNULL(v.Votes,0) AS Votes
FROM dbo.Names AS n
LEFT JOIN VoteCounts AS v
ON n.NameId = v.NameId
ORDER BY v.Votes DESC; 
```

第一个选择排除了根本没有投票的 NameId。第二个选择连接到名称表，也包括非投票者。

# c# - WCF DataServiceProviderMethods.Compare() 与 string.Compare()

> ID：14203978
> 
> 赞同：0
> 
> 时间：2013-01-07T21:03:13.653
> 
> 标签：c#, .net, wcf, wcf-data-services

似乎 WCF 数据服务生成的一些查询将构建调用以下方法的表达式（可能只是一个存根）：

DataServiceProviderMethods.Compare 方法（字符串，字符串）
[http://msdn.microsoft.com/en-us/library/ff452689.aspx](http://msdn.microsoft.com/en-us/library/ff452689.aspx)

已经有静态 string.Compare(string, string) 加上各种重载。

有谁知道为什么这种新方法被认为是合理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:17:08.173

DataServiceProviderMethods 类中的方法实际上并不打算直接调用。您所指的方法是占位符方法。dataServiceProviderMethods 类用于表达式树。如果节点需要比较，则生成表达式树，因此此类中的方法被引用为该节点中的占位符。实际的提供者应该通过表达式树进行解析，并用他们自己的方法修补这些方法。通过利用这些独特的方法，可以识别需要由提供者在表达式树中修补的方法。

它的阅读时间很长......但我想如果你阅读这个，你会得到更好的理解：http: [//msdn.microsoft.com/en-us/data/gg191846.aspx](http://msdn.microsoft.com/en-us/data/gg191846.aspx)

（如果您想跳过很多解释，请在该文档中搜索“UnTyped\RO 示例中的查询”）

# actionscript-3 - 当集合中有 1 个项目时，AS3 过滤器功能不起作用

> ID：14203984
> 
> 赞同：0
> 
> 时间：2013-01-07T21:03:36.600
> 
> 标签：actionscript-3, apache-flex, flex4.5, flash-builder4.5

我有一个房间对象列表，它绑定到一个名为 roomsGroup 的数组集合（在模型中）。通过从服务器调用相应的服务，我具有从列表中添加或删除房间的功能。一切正常——直到没有房间，我将第一个添加到列表中。然后，即使它被正确添加（从服务器返回的房间对象的长度为 1），它也不会显示在 UI 中。如果我添加第二个房间，那么他们都会出现。

整个模型类（单例）被标记为 Bindable，因此 public roomsGroup 变量也自动为 Bindable。

在“添加房间”服务的结果处理程序中，我检查服务器返回的房间，并将它们放入名为房间的本地数组集合中。然后我在model=rooms中设置Bound roomsGroup：

```
 model.roomsGroup = rooms;
    model.roomsGroup.refresh(); //I tried adding this but it doesn't help.
    model.roomsGroup.filterFunction = null; //Also tried this, but it doesn't help. 
```

在面板中，列表组件的源绑定到 model.roomsGroup 数组集合：

```
 <myPanel:RoomsComponent id="roomsList" roomSource="{model.roomsGroup}" 
```

另一件事——在 myPanel 中有一个文本框，其中在 keyup 上调用了一个名为 searchContact() 的函数。它所做的其中一件事是：

```
 model.roomsGroup.filterFunction = roomFilterFunction;
 model.roomsGroup.refresh(); 
```

所以我打电话给服务，第一个/唯一创建的房间没有出现。但是如果我在文本框中输入一些东西，它就会显示出来。换句话说，过滤器功能确实会导致它显示。

想知道为什么，如果绑定设置正确（而且它们是，因为它在其他所有情况下都有效，而不是当我们在列表中从零到一个项目时）它不会工作。我最好的猜测是它与过滤功能有关，但我不知道具体是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:45:49.657

在这里，您需要将这行代码向上移动，`model.roomsGroup.filterFunction = null;`然后您的问题就会解决。

```
model.roomsGroup = rooms;
model.roomsGroup.refresh(); //I tried adding this but it doesn't help.
model.roomsGroup.filterFunction = null; //Also tried this, but it doesn't help. 
```

代码块更改为

```
model.roomsGroup = rooms;
model.roomsGroup.filterFunction = null; //This should be first line.
model.roomsGroup.refresh(); //This should be second line. 
```

# android - 从资产文件夹中打开一个 pdf 文件

> ID：14203987
> 
> 赞同：0
> 
> 时间：2013-01-07T21:03:46.997
> 
> 标签：android

我可以像这样从我的资产文件夹中获取文件

```
Intent i = new Intent(Intent.ACTION_VIEW);
        i.setDataAndType(Uri.parse("file:///android_asset/help_doc.pdf"), "application/pdf");
        i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        try{
            startActivity(i);
        }catch(ActivityNotFoundException e){
            Toast.makeText(this, "No Application Available to View PDF", Toast.LENGTH_SHORT).show();
        } 
```

但是当我选择应用程序打开它时，它要么没有打开，要么给我一个错误提示，`error opening file. it does not exist or cannot be read`但是如果我把它放在我的 sdcard 上并点击它来打开它，我没有收到这个错误，所以我的操作有什么问题?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:08:01.143

`file://android_asset`仅适用于您的应用程序。您告诉这些其他应用程序要做的是读`help_doc.pdf`出*他们的*资产，而他们没有这样的文件。

您将需要：

*   将文件复制到外部存储，或
*   将文件复制到内部存储并使用 a`ContentProvider`使其可用于 PDF 查看应用程序

[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Files)演示了后一种方法。

# asp.net - MVC：使用远程托管布局查看

> ID：14203990
> 
> 赞同：1
> 
> 时间：2013-01-07T21:03:58.770
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, razor

因此，我们的客户希望将我们的 MVC 应用程序嵌入到他们的站点中。我想到的第一个解决方案 - 将我们的应用程序加载到他们网站上的 iFrame 中，我们就完成了。

结果他们想要的东西有点复杂（而且我很愚蠢）。我们仍然必须托管我们的应用程序，但是当用户访问我们的站点时，它必须看起来像他们的站点以及我们的内容 - 我们的视图，他们的布局 - 但他们想要托管布局。

因此，每次发出请求时，都会从客户端的站点检索一个页面（布局），将我们渲染的视图推入其中并显示给最终用户。

所以问题是：是否有可能做客户想要的，因为我无法理解如何使用 MVC 来完成？

有什么意见或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:10:39.223

最好的解决方案是简单地将您的数据公开给他们，让他们以任何他们想要的方式呈现它。你可以让你的控制器简单地为他们吐出 JSON，让他们随心所欲地处理它。然而，这一切都假设没有对视图进行任何繁重的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:17:21.113

他们所要求的实际上超出了 MVC 视图引擎的功能，但它仍然是可能的。视图引擎不像 Web 浏览器那样从各种 Web 资源组装一个网页。浏览器将根据 html 中指定的内容加载 JS、CSS 和图像。视图引擎将根据 MVC 应用程序的目录结构中的内容加载视图、模板和布局。它并非旨在从另一台服务器获取这些文件。

但是，我认为您可以完成这项工作，尽管它会充满安全问题。您可以在 Views 目录中创建一个符号链接，该链接链接到您的客户端托管的网络共享。在此共享中将是他们希望您使用的布局。现在，从 Views 目录中（不在网络共享中）您自己的视图中，您可以引用布局：

```
@{
    Layout = "~/Views/HostedNetworkShare/layout.cshtml";
} 
```

由于安全问题，我**不**推荐这种方法，但我也看不出它为什么不能工作。它还需要您的客户在托管网络共享方面进行一些合作。

# php - Magento 网站的标题中未显示搜索栏

> ID：14203993
> 
> 赞同：1
> 
> 时间：2013-01-07T21:04:03.253
> 
> 标签：php, magento

我在 Magento 网站上工作，由于某种原因，搜索栏没有出现在标题中。我查看了头模板文件，这行仍然存在：

```
echo $this->getChildHtml('topSearch') 
```

我还检查了是否在管理员中启用了搜索，方法是转到`System->Configuration->Advanced->Disable Modules Output`

并且`Mage_CatalogSearch`已启用。

关于为什么搜索栏从标题中消失的任何想法？

谢谢

# python - 为什么 url 映射无法在谷歌应用引擎上显示 404？

> ID：14203998
> 
> 赞同：1
> 
> 时间：2013-01-07T21:04:10.390
> 
> 标签：python, google-app-engine

```
class BookMe(Handler):
    def render_book(self, deal=""):
        deals = db.GqlQuery("SELECT * FROM Book ORDER BY created DESC")
        self.render("book.html", deal=deal,deals = deals)

    def get(self):
        render_book()

    def post(self):
        deal = self.request.get("deal")
        if deal:
            b = Book(deal = deal)
            b.put()
            self.redirect("/")

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/unit2/rot13', Rot13),
                           ('/book', BookMe),
                           ('/unit2/signup', Unit2Signup),
                           ('/unit2/welcome', Welcome),
                           ('/blog/?', BlogFront),
                            ],debug=True) 
```

我表示“书”正在映射到 BookMe 处理程序，但是当我键入 /book 时，它会引发 404，并且说 /book 与应用程序配置中的任何模式都不匹配。

任何人都可以给我小费吗？

这是我的 app.yaml

```
application: byrdnee
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: blog.app

libraries:
- name: jinja2
  version: latest 
```

我的主文件名是 blog.py

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:42:35.417

我没有你的完整代码，但类似下面的东西应该可以

```
import webapp2
from google.appengine.ext.webapp import template

class BookMe(webapp2.RequestHandler):
    def get(self):
        deals = db.GqlQuery("SELECT * FROM Book ORDER BY created DESC")
        template_values = {
            'deals': deals,
        }

    self.response.write(template.render("book.html", template_values)) 
```

# machine-learning - 欧几里得距离定义

> ID：14203999
> 
> 赞同：-1
> 
> 时间：2013-01-07T21:04:24.350
> 
> 标签：machine-learning, data-mining, cluster-analysis, euclidean-distance

我有一个问题。我已经看到了欧几里得距离的两种不同定义。第一个来自维基百科（ [http://en.wikipedia.org/wiki/Euclidean_distance）：http://upload.wikimedia.org/math/3/e/3/3e31af0e62dd2780540f796b51a0ce4e.png](http://upload.wikimedia.org/math/3/e/3/3e31af0e62dd2780540f796b51a0ce4e.png)

第二个来自一本书： [https ://dl.dropbox.com/u/46038869/1.jpg](https://dl.dropbox.com/u/46038869/1.jpg)

你能解释一下区别吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:18:12.627

如果它应该是欧几里得距离，这本书似乎有它的权力错误。

像这样的距离有一个概括，可以涵盖两个称为 Minkowski 距离：[http ://en.wikipedia.org/wiki/Minkowski_distance](http://en.wikipedia.org/wiki/Minkowski_distance)

如果您查看文章中的公式，以及这张图片：http: [//upload.wikimedia.org/wikipedia/commons/e/e6/Minkowski3.png](http://upload.wikimedia.org/wikipedia/commons/e/e6/Minkowski3.png)

p=0.5 的那个是书中的那个，而关于欧几里得距离的维基百科文章是 p=2。