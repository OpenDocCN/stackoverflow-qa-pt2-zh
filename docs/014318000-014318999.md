# StackOverflow 问答 14318000-14318999

# mobile - Any way to use AirPush in Adobe AIR Mobile application

> ID：14318002
> 
> 赞同：2
> 
> 时间：2013-01-14T11:57:45.803
> 
> 标签：mobile, air, adobe

I working on creating mobile app for Android, and because of some useful features of Adobe AIR such as easy to use video support, P2P etc., I have using it.

I need to integrate my app with mobile ads from Airpush (http://www.airpush.com), but documentation says: "Is there an Adobe AIR version of the Airpush SDK ? Unfortunately no."

Is that true? Can I add Airpush SDK support via Native Extensions (ANE)? Any suggestions?

# c# - How can I verify if an object is visible on Windows Phone?

> ID：14318003
> 
> 赞同：1
> 
> 时间：2013-01-14T11:57:48.427
> 
> 标签：c#, visibility, windows-phone

I need to verify whether an object is visible or not, I tried to write this code, but It doesn't work (NullReferenceException):

```
if (PasswordConfirm.Visibility != Visibility.Collapsed)
                {
                    labelInsertPassword.Visibility = Visibility.Collapsed;
                    PasswordConfirm.Visibility = Visibility.Collapsed;
                } 
```

How can I do that? Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:51:25.037

以下片段在我的情况下工作正常。您需要显示与该代码相关的其他代码以获得良好的解决方案..

```
 if (passwordBox1.Visibility == Visibility.Visible)
        MessageBox.Show("Visible");
    else
        MessageBox.Show("Not visible"); 
```

# mysql - 错误 1064 参考第 8 行 mysql

> ID：14318010
> 
> 赞同：0
> 
> 时间：2013-01-14T11:58:24.173
> 
> 标签：mysql, reference

嘿伙计们，我对整个 mysql 世界有点陌生，我目前遇到的问题是我无法弄清楚为什么这不起作用，这可能与 2 个主键有关吗？还是参考文献？提前致谢

```
CREATE TABLE IsSeenBy 
(  PatientCode int (11) NOT NULL,
   DoctorCode int (11) NOT NULL,
   Date VARCHAR (10) NOT NULL, 
   Time VARCHAR (5) NOT NULL,
   PRIMARY KEY (PatientCode), 
   PRIMARY KEY (DoctorCode),
   PatientCode REFERENCES (Patient),
   DoctorCode REFERENCES (Doctor)
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:01:38.473

表中不能有 2 个 PK。如果你想要复合 PK 使用

```
PRIMARY KEY (PatientCode, DoctorCode), 
```

反而。

您也必须探索外键参考文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:17:22.733

日期是一个保​​留字，所以如果你想命名一个列，你需要引用它。此外，我强烈建议对该列使用实际的日期类型，而不是 VARCHAR。（除非它需要像明星日期一样。）是的，你不能有两个主键。你需要一个或一个复合的。您的外键定义看起来也不正确

```
CREATE TABLE IsSeenBy 
(PatientCode int (11) NOT NULL,
DoctorCode int (11) NOT NULL,
`Date` DATETIME NOT NULL,
PRIMARY KEY (PatientCode, DoctorCode),
FOREIGN KEY (PatientCode)
REFERENCES Patient(PatientCode)
ON UPDATE CASCADE ON DELETE RESTRICT,
FOREIGN KEY (DoctorCode)
REFERENCES Doctor(`DoctorCode`)
ON UPDATE CASCADE ON DELETE RESTRICT

); 
```

# mysql - Xcode need help merging GPS project, Accelerometer project, Compass project and MySQL project

> ID：14318012
> 
> 赞同：0
> 
> 时间：2013-01-14T11:58:29.190
> 
> 标签：mysql, xcode, gps, accelerometer, compass-geolocation

I have 4 Xcode projects ( GPS, Accelerometer, Compass and MySQL).

Each of them individually are compiling fine and are working fine.

I will like to combine all of them into one project so I can send the GPS, Accelerometer and Compass info to a mySQL database.

I have tried to copy the `.h` and the `.m` and the frameworks required from project to another.

Mainly the problem arises here :

```
- (IBAction)insert:(id)sender
{
    // create string contains url address for php file, the file name is phpFile.php, it receives parameter :name
    //NSString *strURL = [NSString stringWithFormat:@"http://localhost/phpFile.php?name=%@",txtName.text];
    NSString *strURL = [NSString stringWithFormat:@"http://localhost/phpFile.php?name=%@",speedLabel.text]; ************<   use of undefined identifier 'speedLabel'****

    // to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    // to receive the returend value
    NSString *strResult = [[[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding]autorelease];

    NSLog(@"%@", strResult);
} 
```

Here is the structure which speedLabel is contained :

```
@interface CoreLocationDemoViewController : UIViewController <CoreLocationControllerDelegate> {
    CoreLocationController *CLController;
    IBOutlet UILabel *speedLabel;
    IBOutlet UILabel *latitudeLabel;
    IBOutlet UILabel *longitudeLabel;
    IBOutlet UILabel *altitudeLabel;
    IBOutlet UILabel *timeLabel;
} 
```

Thanks for your help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:58:44.530

您是否正在导入 .h 文件：

```
#import "CoreLocationDemoViewController.h" 
```

否则，我看不出您的代码中有任何缺陷。

该代码是否在`@implementation`and`@end`范围内调用？您是否将其声明为财产，然后`@synthesize`呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:03:41.797

为了查看来自 GPS 接口的变量，我确实使用了我在 stackoverflow 某处找到的以下技术：

```
// Globals.h
#ifndef Globals_h
#define Globals_h

extern NSInteger globalVariable;

#endif

// main.m 

NSInteger globalVariable;

int main(int argc, char *argv[])
{
   globalVariable = <# initial value #>;
    ...
}

// Prefix.pch

#ifdef __OBJC__
    #import 
    #import <Foundation/Foundation.h>
    #import "Globals.h"
#endif 
```

我确实使用了这项技术：

```
NSString *strURL = [NSString stringWithFormat:@"http://localhost/phpFile.php?name=%@",speedLabel.text]; 
```

将信息发送到 mysql 数据库。

但我仍然需要一点帮助。

我有一个用于 GPS 的接口，另一个用于加速度计，另一个用于指南针。如何调用它们中的每一个，以便通过单击 Iphone 上的一个按钮将相关数据存储到它们中？

非常感谢

注册表

# java - 日期选择器不适用于 jqgrid

> ID：14318014
> 
> 赞同：1
> 
> 时间：2013-01-14T11:58:32.240
> 
> 标签：java, jquery, jqgrid, datepicker

我无法将 DatePicker 添加到 jqGrid，

以下是我的代码。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>My Date time example</title>
<script src="js/jquery-1.7.2.min.js"  type="text/javascript"></script>
<link href="js/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" />
<link href="css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.datepicker.css" />
<link href="css/ui.multiselect.css" rel="stylesheet" type="text/css" />
<script src="js/grid.locale-en.js"  type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
<link href="css/jquery.ui.theme.css" rel="stylesheet" type="text/css" />
<link href="css/jquery-ui.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" media="screen" href="css/jquery.ui.datepicker.css"/>
</head>
<script>

var lastsel3;
function FillGridOnEvent()
{
jQuery("#rowed6").jqGrid({
datatype: "local",
height: 250,
colNames:['ID Number','Last Sales','Name', 'Stock', 'Ship via','Notes'],
colModel:[
{name:'id',index:'id', width:90, sorttype:"int", editable: true},
{name:'sdate',index:'sdate',width:90, editable:true, sorttype:"date",editoptions:{        dataInit: function(el) { setTimeout(function() { $(el).datepicker(); }, 200); }}},
{name:'name',index:'name', width:150,editable: true,editoptions{size:"20",maxlength:"30"}},
{name:'stock',index:'stock', width:60, editable: true,edittype:"checkbox",editoptions:
{value:"Yes:No"}},
{name:'ship',index:'ship', width:90, editable: true,edittype:"select",editoptions:    
{value:"FE:FedEx;IN:InTime;TN:TNT;AR:ARAMEX"}},
{name:'note',index:'note', width:200, sortable:false,editable: true,edittype:"textarea",   
editoptions:{rows:"2",cols:"10"}},
],
onSelectRow: function(id){
    if(id && id!==lastsel3){
        jQuery('#rowed6').jqGrid('restoreRow',lastsel3);
        jQuery('#rowed6').jqGrid('editRow',id,true,pickdates);
        lastsel3=id;
    }
},
editurl: "/MyServletNameHere",
caption: "Date Picker Integration"
});
var mydata3 = [
        {id:"12345",name:"Desktop Computer",note:"note",stock:"Yes",ship:"FedEx", sdate:"2007-12-03"},
        {id:"23456",name:"Laptop",note:"Long text ",stock:"Yes",ship:"InTime",sdate:"2007-12-03"},
        {id:"34567",name:"LCD Monitor",note:"note3",stock:"Yes",ship:"TNT",sdate:"2007-12-03"},                                                 
        {id:"45678",name:"Speakers",note:"note",stock:"No",ship:"ARAMEX",sdate:"2007-12-03"},
        {id:"56789",name:"Laser Printer",note:"note2",stock:"Yes",ship:"FedEx",sdate:"2007-12-03"},
        {id:"67890",name:"Play Station",note:"note3",stock:"No", ship:"FedEx",sdate:"2007-12-03"},
        {id:"76543",name:"MobileTelephone", note:"note", stock:"Yes", ship:"ARAMEX", sdate:"2007-12-03"},
        {id:"87654",name:"Server",note:"note2",stock:"Yes",ship:"TNT",sdate:"2007-12-03"},
        {id:"98765",name:"Matrix Printer",note:"note3",stock:"No", ship:"FedEx",sdate:"2007-12-03"}
        ];
for(var i=0;i < mydata3.length;i++)
jQuery("#rowed6").jqGrid('addRowData',mydata3[i].id,mydata3[i]);
}
function pickdates(id){
    jQuery("#"+id+"_sdate","#rowed6").datepicker({dateFormat:"yy-mm-dd"});
}
</script>
<body>
<body onload="FillGridOnEvent();">
    <table id="rowed6"></table>
</body>
</html> 
```

当上面的代码执行时，它会显示输出，但不会`datepicker`在`sdate`列中显示。如果我在代码中的某个地方错了，请让我知道！

我想我犯了一个愚蠢的错误，但找不到它！

**更新** 以下是使用 jqGrid 的日期选择器的工作示例，

以下是`datepicker`使用 jqGrid 的工作示例。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>My Date time example</title>
<script src="js/jquery-1.7.2.min.js"  type="text/javascript"></script>
<link href="js/jquery-ui-1.9.2.custom.css" rel="stylesheet" type="text/css" />
<link href="css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.datepicker.css" />
<link href="css/ui.multiselect.css" rel="stylesheet" type="text/css" />
<script src="js/grid.locale-en.js"  type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
<link href="css/jquery.ui.theme.css" rel="stylesheet" type="text/css" />
<link href="css/jquery-ui.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" media="screen" href="css/jquery.ui.datepicker.css"/>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
</head>
<script>

var lastsel3;
function FillGridOnEvent()
{
jQuery("#rowed6").jqGrid({
datatype: "local",
height: 250,
colNames:['ID Number','Last Sales','Name', 'Stock', 'Ship via','Notes'],
colModel:[
{name:'id',index:'id', width:90, sorttype:"int", editable: true},
{name:'sdate',index:'sdate',width:90, editable:true, sorttype:"date",editoptions:{        dataInit: function(el) { setTimeout(function() { $(el).datepicker(); }, 200); }}},
{name:'name',index:'name', width:150,editable: true,editoptions{size:"20",maxlength:"30"}},
{name:'stock',index:'stock', width:60, editable: true,edittype:"checkbox",editoptions:
{value:"Yes:No"}},
{name:'ship',index:'ship', width:90, editable: true,edittype:"select",editoptions:    
{value:"FE:FedEx;IN:InTime;TN:TNT;AR:ARAMEX"}},
{name:'note',index:'note', width:200, sortable:false,editable: true,edittype:"textarea",   
editoptions:{rows:"2",cols:"10"}},
],
onSelectRow: function(id){
    if(id && id!==lastsel3){
        jQuery('#rowed6').jqGrid('restoreRow',lastsel3);
        jQuery('#rowed6').jqGrid('editRow',id,true,pickdates);
        lastsel3=id;
    }
},
editurl: "/MyServletNameHere",
caption: "Date Picker Integration"
});
var mydata3 = [
        {id:"12345",name:"Desktop Computer",note:"note",stock:"Yes",ship:"FedEx", sdate:"2007-12-03"},
        {id:"23456",name:"Laptop",note:"Long text ",stock:"Yes",ship:"InTime",sdate:"2007-12-03"},
        {id:"34567",name:"LCD Monitor",note:"note3",stock:"Yes",ship:"TNT",sdate:"2007-12-03"},                                                 
        {id:"45678",name:"Speakers",note:"note",stock:"No",ship:"ARAMEX",sdate:"2007-12-03"},
        {id:"56789",name:"Laser Printer",note:"note2",stock:"Yes",ship:"FedEx",sdate:"2007-12-03"},
        {id:"67890",name:"Play Station",note:"note3",stock:"No", ship:"FedEx",sdate:"2007-12-03"},
        {id:"76543",name:"MobileTelephone", note:"note", stock:"Yes", ship:"ARAMEX", sdate:"2007-12-03"},
        {id:"87654",name:"Server",note:"note2",stock:"Yes",ship:"TNT",sdate:"2007-12-03"},
        {id:"98765",name:"Matrix Printer",note:"note3",stock:"No", ship:"FedEx",sdate:"2007-12-03"}
    ];
for(var i=0;i < mydata3.length;i++)
jQuery("#rowed6").jqGrid('addRowData',mydata3[i].id,mydata3[i]);
}
function pickdates(id){
    jQuery("#"+id+"_sdate","#rowed6").datepicker({dateFormat:"yy-mm-dd"});
}
</script>
<body>
<body onload="FillGridOnEvent();">
    <table id="rowed6"></table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:15:35.930

我建议你完全重写你的代码。最重要的问题：

*   你需要使用`<!DOCTYPE html ...>`。这非常重要，因为没有`<!DOCTYPE>`语句的 HTML 会打开jQuery UI 和 jqGrid 不支持的[quirks 模式。](http://en.wikipedia.org/wiki/Quirks_mode)
*   您应该在循环中使用`data: mydata3`而不是填充网格`addRowData`
*   你需要调用`datepicker` **一次**（目前你`datepicker`同时调用-`dataInit`和`oneditfunc`参数）`editRow``pickdates`
*   您需要包含每个 CSS 和 JavaScript 文件**一次**。例如`"js/jquery-ui-1.9.2.custom.css"`应该足够了。它应该包含 jQuery UI 的所有 CSS（包括`ui.datepicker.css`）。所以你应该删除带有`"css/ui.datepicker.css"`,`"css/jquery-ui.css"`和`css/jquery.ui.theme.css``"css/jquery.ui.datepicker.css"`
*   你应该使用[jQuery.ready](http://api.jquery.com/ready/)而不是 usage `onload`。
*   您应该在某个函数内部定义所有变量（例如内部`$(function () {/*here*/})`）。顺便说一句，您将没有*全局*变量。
*   `<`如果在 HTML 页面中使用内联代码，您应该小心特殊字符（如）的编码。例如，尝试验证[http://validator.w3.org/](http://validator.w3.org/)上的页面，您会发现我的意思的错误。
*   我强烈建议您使用它`gridview: true`来提高性能并`autoencode: true`确保 jqGrid 可以在网格中显示任何文本。

**更新**：[演示](http://www.ok-soft-gmbh.com/jqGrid/John2.htm)显示了如何修改代码的示例。下面是完整的 HTML 代码。为了更好地调试，我使用了所有 JavaScript 文件的非最小化版本。生产代码应使用相应文件的最小化版本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>http://stackoverflow.com/q/14318014/315935</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/redmond/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.2/css/ui.jqgrid.css" />
    <style type="text/css">
        html, body { font-size: 75%; }
    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
    <script type="text/javascript">
        $.jgrid.no_legacy_api = true;
        $.jgrid.useJSON = true;
    </script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.src.js"></script>

    <script type="text/javascript">
    //<![CDATA[
        /*global $ */
        $(function () {
            "use strict";
            var mydata = [
                    {id: "12345", name: "Desktop Computer", note: "note",      stock: "Yes", ship: "FE", sdate: "2007-12-03"},
                    {id: "23456", name: "Laptop",           note: "Long text", stock: "Yes", ship: "IN", sdate: "2007-12-03"},
                    {id: "34567", name: "LCD Monitor",      note: "note3",     stock: "Yes", ship: "TN", sdate: "2007-12-03"},
                    {id: "45678", name: "Speakers",         note: "note",      stock: "No",  ship: "AR", sdate: "2007-12-03"},
                    {id: "56789", name: "Laser Printer",    note: "note2",     stock: "Yes", ship: "FE", sdate: "2007-12-03"},
                    {id: "67890", name: "Play Station",     note: "note3",     stock: "No",  ship: "FE", sdate: "2007-12-03"},
                    {id: "76543", name: "MobileTelephone",  note: "note",      stock: "Yes", ship: "AR", sdate: "2007-12-03"},
                    {id: "87654", name: "Server",           note: "note2",     stock: "Yes", ship: "TN", sdate: "2007-12-03"},
                    {id: "98765", name: "Matrix Printer",   note: "note3",     stock: "No",  ship: "FE", sdate: "2007-12-03"}
                ],
                $grid = $("#rowed6"),
                initDate = function (elem) {
                    $(elem).datepicker({
                        dateFormat: "yy-mm-dd",
                        //autoSize: true,
                        defaultDate: new Date(2007, 11, 3),
                        changeYear: true,
                        changeMonth: true,
                        showButtonPanel: true,
                        showWeek: true,
                        onSelect: function () {
                            var $grid, grid;
                            if (typeof (elem.id) === "string" && elem.id.substr(0, 3) === "gs_") {
                                $grid = $(elem).closest("div.ui-jqgrid-hdiv")
                                            .next("div.ui-jqgrid-bdiv")
                                            .find("table.ui-jqgrid-btable:first");
                                if ($grid.length > 0) {
                                    grid = $grid[0];
                                    if ($.isFunction(grid.triggerToolbar)) {
                                        grid.triggerToolbar();
                                    }
                                }
                            } else {
                                // to refresh the filter
                                $(elem).trigger("change");
                            }
                        }
                    });
                },
                dateTemplate = {align: "center", sorttype: "date", width: 94,
                    editrules: { date: true }, editoptions: { dataInit: initDate },
                    searchoptions: {
                        sopt: ["eq", "ne", "lt", "le", "gt", "ge"],
                        attr: { maxlength: 10, size: 11 }, // for searching toolbar
                        maxlength: 10, size: 11, // for searching dialog
                        dataInit: initDate
                    },
                    formatter: "date", formatoptions: { srcformat: "ISO8601Short", newformat: "Y-m-d" }},
                lastsel3;

            $grid.jqGrid({
                datatype: "local",
                data: mydata,
                colNames: ["Last Sales", "Name", "Stock", "Ship via", "Notes"],
                colModel: [
                    { name: "sdate", template: dateTemplate },
                    { name: "name", width: 115, editoptions: {maxlength: "30"} },
                    { name: "stock", width: 70, align: "center", editable: true, formatter: "checkbox",
                        edittype: "checkbox", editoptions: {value: "Yes:No", defaultValue: "Yes"},
                        stype: "select", searchoptions: { sopt: ["eq", "ne"], value: ":Any;true:Yes;false:No" } },
                    { name: "ship", width: 105, align: "center", editable: true, formatter: "select",
                        edittype: "select", editoptions: { value: "FE:FedEx;IN:InTime;TN:TNT;AR:ARAMEX", defaultValue: "AR" },
                        stype: "select", searchoptions: { sopt: ["eq", "ne"],
                        value: ":Any;FE:FedEx;IN:InTime;TN:TNT;AR:ARAMEX" } },
                    { name: "note", width: 60, sortable: false, editable: true, edittype: "textarea" }
                ],
                cmTemplate: {editable: true},
                rowNum: 10,
                rowList: [5, 10, 100],
                pager: "#pager",
                gridview: true,
                rownumbers: true,
                autoencode: true,
                ignoreCase: false,
                viewrecords: true,
                sortname: "sdate",
                sortorder: "desc",
                height: "100%",
                onSelectRow: function (id) {
                    if (id && id !== lastsel3) {
                        $(this).jqGrid("restoreRow", lastsel3);
                        $(this).jqGrid("editRow", id, true);
                        lastsel3 = id;
                    }
                },
                editurl: "/MyServletNameHere",
                caption: "Date Picker Integration"
            });
            $.extend($.jgrid.search, {
                recreateFilter: true,
                multipleSearch: true,
                multipleGroup: true,
                closeOnEscape: true,
                closeAfterSearch: true,
                overlay: 0,
                searchOnEnter: true
            });

            $grid.jqGrid("navGrid", "#pager", {add: false, edit: false, del: false});
            $grid.jqGrid("filterToolbar", {defaultSearch: "cn", stringResult: true});
        });
    //]]>
    </script>
</head>
<body>
    <table id="rowed6"><tr><td></td></tr></table>
    <div id="pager"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:24:05.397

我没有看到您的代码中包含任何 jquery-ui.js 脚本。例如：

```
 <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

如果您不包含该脚本，则您没有加载 jQuery-UI，并且您不能使用 datepicker 小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:11:17.300

也许试试这个：

```
function pickdates(id){
    jQuery("#rowed6 .hasDatepicker").datepicker('destroy');
    jQuery("#"+id+"_sdate","#rowed6").datepicker({dateFormat:"yy-mm-dd"});
} 
```

或者通过在末尾添加 click() 自动触发 click() 处理程序：

```
jQuery("#"+id+"_sdate","#rowed6").datepicker({dateFormat:"yy-mm-dd"}).click(); 
```

# .net - is it possible to Declare MultiBindning in Resources and use it in Controls?

> ID：14318016
> 
> 赞同：0
> 
> 时间：2013-01-14T11:58:38.930
> 
> 标签：.net, wpf, multibinding

Here is the Code snippet which i want to use in Resource Section

```
 <UserControl.Resources> 
  <MultiBinding Converter="{StaticResource ResourceKey=EnableConference}" 
                  x:Key="EnableifConferenceIsNotNullAndIsStarted">
        <Binding Path="SelectedConference" Mode="OneWay"/>
        <Binding Path="SelectedConference.ConferenceStatus" Mode="OneWay"/>
  </MultiBinding>
</UserControl.Resources> 
```

and i want to use this in a control like the fallowing

```
<ComboBox><ComboBox.IsEnabled><StaticResource ResourceKey="EnableifConferenceIsNotNullAndIsStarted"></ComboBox.IsEnabled></ComboBox> 
```

it is not allowing this and saying as invalid type in the usage

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:53:15.160

错误信息很清楚：

> 不能在“MainWindow”类型的“资源”属性上设置“MultiBinding”。只能在 DependencyObject 的 DependencyProperty 上设置“MultiBinding”。

但是，您可以在 ComboBoxes 的样式中声明绑定：

```
<Style TargetType="ComboBox" x:Key="MyComboBoxStyle">
    <Setter Property="IsEnabled">
        <Setter.Value>
            <MultiBinding Converter="{StaticResource ResourceKey=EnableConference}">
                <Binding Path="SelectedConference" Mode="OneWay"/>
                <Binding Path="SelectedConference.ConferenceStatus" Mode="OneWay"/>
            </MultiBinding>
        </Setter.Value>
    </Setter>
</Style> 
```

并在适用的情况下使用它：

```
<ComboBox Style="{StaticResource MyComboBoxStyle}"/> 
```

* * *

当然不一定需要将其放入 Style 中。您也可以直接将 MultiBinding 分配给`IsEnabled`ComboBox 的属性：

```
<ComboBox>
    <ComboBox.IsEnabled>
        <MultiBinding Converter="{StaticResource ResourceKey=EnableConference}">
            <Binding Path="SelectedConference" Mode="OneWay"/>
            <Binding Path="SelectedConference.ConferenceStatus" Mode="OneWay"/>
        </MultiBinding>
    </ComboBox.IsEnabled>
</ComboBox> 
```

# iphone - 使用 NSSortDescriptor 对 NSMutableArray 中的 NSDate 对象进行排序？

> ID：14318018
> 
> 赞同：4
> 
> 时间：2013-01-14T11:58:54.273
> 
> 标签：iphone, ios, objective-c, nsdate, nssortdescriptor

在我的项目中，我从 a 获取一些数据，然后通过解析将`APi`数据检索到 a中。它有一个名为“ **StartDate** ”的键，其格式为：“ ”，如下所示`NSMutableArray``JSON`**`mm/dd/yyyy hh:mm:ss`**

 **```
StartDate: "5/18/2013 12:00:00 AM" 
```

我将这些数据保存到`resultArray`. 还有 4 个对象的键，因为我`JSON`的形式是

```
{
    EventId: "xxxx",
    Title: "xxx",
    Location: "xxxx",
    StartDate: "5/18/2013 12:00:00 AM",
    Link: null
} 
```

这里有多个这样的对象。我需要做的就是对`resultArray`基于日期的内容进行排序（升序或降序），我使用以下代码

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"StartDate" ascending:TRUE];
[resultArray sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

但是我得到了一个打乱的结果，整个排序都不正确，谁能告诉我我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:20:56.553

应该管用

```
[resultArray sortUsingComparator:^NSComparisonResult(id a, id b) {

    static NSDateFormatter *dateFormatter = nil;

    if (!dateFormatter) {
        dateFormatter = [[NSDateFormatter alloc] init];
        dateFormatter.dateFormat = @"mm/dd/yyyy hh:mm:ss"; 
    }

    NSString *date1String = [a valueForKey:@"StartDate"];
    NSString *date2String = [b valueForKey:@"StartDate"];

    NSDate *date1 = [dateFormatter dateFromString:date1String];
    NSDate *date2 = [dateFormatter dateFromString:date2String];

    return [date1 compare:date2];
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T12:01:00.293

您的 StartDate 似乎是字符串格式，我相信它会将其改组为字符串。您应该先转换为 NSDate，然后再应用此描述符...希望这会有所帮助。**

# perl - 如何在 Perl 中将变量打印到文件中？

> ID：14318020
> 
> 赞同：5
> 
> 时间：2013-01-14T11:58:58.027
> 
> 标签：perl, file, variables, printing

我正在使用以下代码尝试将变量打印到文件中。

```
my $filename = "test/test.csv";
open FILE, "<$filename";
my $xml = get "http://someurl.com";
print $xml;
print FILE $xml;
close FILE; 
```

因此`print $xml`将正确的输出打印到屏幕上。但是`print FILE $xml`什么都不做。

为什么打印到文件行不起作用？Perl 似乎经常有这些不起作用的东西......

为了使打印到文件行正常工作，文件是否必须已经存在？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-14T11:59:30.360

`<`打开一个文件以供阅读。用于`>`打开文件进行写入（或`>>`追加）。

添加一些错误处理也是值得的：

```
use strict;
use warnings;
use LWP::Simple;

my $filename = "test/test.csv";
open my $fh, ">", $filename or die("Could not open file. $!");
my $xml = get "http://example.com";
print $xml;
print $fh $xml;
close $fh; 
```

# javascript - JavaScript: Getting the right object when handling events

> ID：14318025
> 
> 赞同：0
> 
> 时间：2013-01-14T11:59:05.773
> 
> 标签：javascript

So, I have code like this:

```
function Shape() {
  ...
  var canvas = document.getElementById('canvas');
  ...

  canvas.onmousedown = handleMouseDown;       

}

function handleMouseDown(e) {
  this.width // Doesn't refer to the shape
  // How do I get a reference to the shape here?
} 
```

Question - how do I get a reference to the Shape in my event handler?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:03:56.770

```
function handleMouseDown(e) {
    console.log(e);
} 
```

然后在 Web 浏览器控制台中查看`e`对象内部的内容。尤其是`e.target`物体内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:48:10.850

在您要引用的事件处理程序代码中

```
this.width // in function handleMouseDown(e) 
```

我想知道你认为这个变量应该包含什么。它是函数 Shape() 上下文中的可变宽度吗？您没有在示例中定义它，所以我只是猜测。无论如何，这有什么好处？

我想，如果我做对了，你想在画布内管理一些形状，并想在你的程序中引用它们。如果这是正确的，我将尝试概述您可以针对此问题采取的措施。

从 mouseclick 事件中获取位置：[如何获取鼠标单击画布元素的坐标？](https://stackoverflow.com/questions/55677/how-do-i-get-the-coordinates-of-a-mouse-click-on-a-canvas-element)

然后使用您相对于画布的鼠标位置，使用您自己的代码检查不同形状的矩形区域。

为程序中每个形状的 x、y 位置和宽度/高度创建一个对象。

向此形状添加一个函数，该函数可由 mouseclick 事件处理程序代码调用，或者仅在事件处理程序代码中使用形状的坐标和其他相关属性来应用任何更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T12:06:55.117

您可以使用[*^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)`this`将函数内部绑定到`Shape`实例：[`.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

```
canvas.onmousedown = handleMouseDown.bind(this); 
```

或者如果浏览器不支持`.bind`，使用闭包：

```
var self = this;
canvas.onmousedown = function(event) {
    handleMouseDown.call(self, event);
}; 
```

但这也意味着`this`不再引用 DOM 元素。您可以通过`event.target`或`event.currentTarget`虽然访问它。

# regex - Vim - sed 类似标签或仅在模式内替换

> ID：14318027
> 
> 赞同：3
> 
> 时间：2013-01-14T11:59:23.403
> 
> 标签：regex, vim, sed, labels

在一些 html 编辑的基础上，我想出了需要一些 VIM 大师的帮助。

我不想完成简单的任务 - 我有带有损坏 url 的 html 文件。

```
<a href="http://some/wrong/url with variable number of spaces">Just description</a> <a href="http://some/wrong/url with three spaces">Just description</a>
...
<a href="http://anoter/wrong/url with completely other number of spaces">Just description</a> 
```

不幸的是，它不是“每行一个 url”。

我知道三种方法：

1.  我希望只能在`'"http://[^"]*"'`正则表达式中替换（类似于仅在匹配行中替换 - 但这次不是整行，而是应该只涉及匹配模式）

2.  或者使用类似 sed 的标签——我可以用 sed -e 来完成这个任务：a -e`'s#\("http://[^" ]*\) \([^"]*"\)#\1_\2#g;ta'`

3.  我也知道有类似的东西，`"\@<="`但我不是母语人士，这方面的 vim 手册超出了我的理解范围。

非常感谢所有帮助。

如果可能的话，我想知道所有三个问题的答案（因为这些问题非常有趣并且对其他任务有帮助），但其中任何一个都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:13:37.113

回复： 1.您可以通过将 vim 的“将替换评估为表达式”功能 ( `:h :s\=`) 与`substitute`函数 ( `:h substitute()`) 组合来递归替换：

```
:%s!"http://[^"]*"!\=substitute(submatch(0), ' ', '_', 'g')!g 
```

回复：2。我不知道`sed`，所以我无法帮助你。

回复： 3\. 我不知道`\@<=`在这里有什么帮助。至于它的作用：相当于Perl的`(?<=...)`特性，也称为“正向后视”。您可以将其理解为“如果在前面”：

```
:%s/\%(foo\)\@<=bar/X/g 
```

“如果它前面是”，则替换`bar`为，即把每个变成（这里只是为了分组）。在 Perl 中，你可以这样写：`X``foo``foobar``fooX``\%( ... \)`

```
s/(?<=foo)bar/X/g; 
```

更多示例和解释可以在 中找到[`perldoc perlretut`](http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:07:37.163

我认为您想要做的是将 http:// url 中的所有空格替换为`_`.

为了实现这个目标，@melpomene 的解决方案很简单。你可以在你的vim中试试。

另一方面，如果你想模拟你的 sed 线，你可以尝试以下。

```
:let @s=':%s#\("http://[^" ]*\)\@<= #_#g^M'

^M means Ctrl-V then Enter 
```

然后

```
200@s 
```

这与您的 sed 行（标签、替换、返回标签...）的工作方式相同，并且`@<=`也被使用过。

一个问题是，通过这种方式，vim 无法检测到所有匹配模式何时被替换。因此给出了一个相对较大的数字（在我的示例中为 200）。最后显示错误消息“E486：未找到模式...”。

需要一个脚本来避免该消息。

# ios - 加载视图控制器时如何使保存数据出现？

> ID：14318029
> 
> 赞同：0
> 
> 时间：2013-01-14T11:59:27.067
> 
> 标签：ios, objective-c, cocoa-touch

下面的代码是保存数据和加载，但是加载视图控制器时并没有显示数据。它只是说标签（Xcode默认的uilabel）。我相信我必须使用同步，但我不太确定。有人可以帮帮我。

实现文件：

```
- (IBAction)minus
{
    mini = mini - 1;
    minus.text = [NSString stringWithFormat:@"%i", mini];
    [[NSUserDefaults standardUserDefaults] setInteger:mini forKey:@"M"];
}

- (void)viewDidLoad
{
    mini = [[NSUserDefaults standardUserDefaults] integerForKey:@"M"];
} 
```

头文件：

```
IBOutlet UILabel *minus; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:06:47.307

改变：

```
[[NSUserDefaults standardUserDefaults]setInteger:mini forKey:@"M"]; 
```

进入：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setInteger:mini forKey:@"M"];
[prefs synchronize]; 
```

它应该工作。

而且我没有看到您在 viewdidload 中设置 minus.text。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:09:31.217

正如 H2CO3 所说，您需要结束保存过程

[首选同步]；

为什么不打开 iPhone Simulator 文件夹来查看是否在 Library > Preferences 中创建了 plist 文件？

# java - 覆盖Android上的删除键？

> ID：14318032
> 
> 赞同：16
> 
> 时间：2013-01-14T11:59:38.567
> 
> 标签：java, android, serial-port

我主要解决了 dispatchKeyEvent 中这些行的问题：

```
byte[] cmdLeft = { (byte) 27, (byte) '[', (byte) 'D' };
byte[] cmdErase = { (byte) 27, (byte) '[', (byte) 'P' };

mSession.appendToEmulator(cmdLeft, 0, cmdLeft.length);
mSession.appendToEmulator(cmdErase, 0, cmdErase.length); 
```

现在唯一的问题是，如果我选择 editText 并点击删除，则删除一个字符，但屏幕上似乎有两个字符。所以如果我写启用并点击删除它会变成启用但实际发送的是启用

我覆盖了 dispatchKeyEvent，它有点工作。如果选择了editText，终端现在通过串行删除字符，这是一个很好的步骤。然而，主要问题仍然存在，如果终端本身被选中，奇怪的小框会被写入屏幕而不是删除一个字符。写好了一个，如果我一直按删除它会停留在那个框，但是下次我输入我按下的删除量会显示为框。这很奇怪...

就像它只是被edittext覆盖而不是终端。

奇怪的小盒子在他们所有的荣耀中：

![在此处输入图像描述](../Images/93598d58fc96edd12faa364b95f07503.png)

```
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event != null && event.getAction() == KeyEvent.ACTION_UP) {

        return false;
    }
    if (event.getKeyCode() == KeyEvent.KEYCODE_DEL) {

        try {
            sendOverSerial("\b".getBytes("UTF-8"));
        }
        catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    return super.dispatchKeyEvent(event);
}; 
```

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并显示发送/接收的数据。我通过终端下方的文本框或在终端本身输入并在两种情况下按键盘上的 Enter 键通过连接发送数据。它只会是使用的软键盘。如果我发送了不正确的字符串，由于没有删除键实现，我处于不可恢复的状态。我的 editTxt 中的退格键工作正常，我只希望它在终端突出显示并且我正在写它时工作。

目前，如果我按下删除，一个奇怪的盒子字符出现并且没有其他任何事情发生，我有时会在日志中得到一个异常（[http://i.imgur.com/wMRaLPX.png](https://i.imgur.com/wMRaLPX.png)）。我想知道的是如何更改删除键功能，以便当我按下它时，我可以发送这样的删除字符，但也保留在编辑文本框中删除字符的能力等：

```
sendOverSerial("\b".getBytes("UTF-8")) 
```

这发送了一个正确的后退空间，我只需要合并它。

但是软键盘似乎没有注册按键？我一直得到一个 0 的键码，只有输入才会起作用。

我目前正在尝试[https://stackoverflow.com/questions/4...62035_11377462](https://stackoverflow.com/questions/4...62035_11377462)，但任何其他建议都会很棒，因为到目前为止大约有 10 条建议没有奏效。我的退格键不会与 editText 相关联，而是与终端视图相关联。我什至无法检测到被按下的删除键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T23:55:53.330

看起来您正在使用的终端控件必须使用 KEYCODE_DEL 而不是让它传播到窗口，并且它必须向远程端发送不同的字符而不是 \b。因此，当您的编辑文本聚焦时，您的 dispatchKeyEvent 正在处理新闻 - 但是当终端有焦点时您看不到它。当终端有焦点时，您是否确认偶数处理程序正在通过调试器触发？你没有说你正在为终端使用哪个库，但我会看一下，看看你是否可以设置一个密钥处理程序或其他东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T19:31:07.990

我对 Android 没有任何经验，而且我也承认我从未尝试过实现删除/退格键绑定。但是，如果我试图这样做，并且我不知道一个好的标准实现，我可以想到一个可能会正常工作的解决方法。使用关联的操作侦听器进行键绑定以删除。将动作侦听器 getText() 从您的文本字段中取出并将其存储为字符串。该字符串的子字符串以包含除最后一个字符之外的所有内容。然后对带有新字符串的文本字段使用 setText()。一种手动的方式，但它肯定会工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:47:26.830

我建议捕获完整的字符串并在用户按下时一次性发送`Send`，就像聊天程序一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T15:31:48.590

解决方案是将写入屏幕的方法移动到另一个类，然后一切正常。

# javascript - HTML5: receiving mouseUp events on element without mouseDown event

> ID：14318040
> 
> 赞同：0
> 
> 时间：2013-01-14T11:59:57.253
> 
> 标签：javascript, html, gwt

If i perform mouse down on element A and release the mouse when i am on element B, neither of the elements receive the mouseUp event. Is it possible that one of them will receive the event (it does not matter to me which of the two)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:27:52.217

在您所描述的情况下，这两个元素都不会收到 mouseup 事件，因为您将事件类型*mouseup的**事件侦听*器附加到元素 A。我会得出结论，如果您在悬停在任何东西上时释放鼠标按钮，特定的 mouseup 事件侦听器将不会触发不包含在元素 A 中。

# c# - DevExpress Grid App (DXTREME) - 如何绑定到 ItemNavigationTargetType？

> ID：14318041
> 
> 赞同：0
> 
> 时间：2013-01-14T12:00:11.890
> 
> 标签：c#, wpf, data-binding, windows-8, devexpress

我正在使用新建向导中提供的 devexpress 网格应用程序模板开发我的第一个 Windows 8 应用程序。一切正常，但是，我想将 绑定`MenuItems`到特定页面，而不是对`ItemsDetailPage`我的所有菜单项使用 。我设法弄清楚我需要将以下内容更改为我要使用的页面：

`ItemNavigationTargetType="ItemsDetailPage"`到`ItemNavigationTargetType="MyPage"`

这工作正常。我为我的菜单项创建了另一个参数，即“字符串 TargetType”。我用它来指定菜单项应该打开的页面。然后我想将此属性绑定到上面的代码中，如下所示：

```
ItemNavigationTargetType="{Binding TargetType}" 
```

但这行不通。有没有另一种方法可以做到这一点。请协助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:20:44.863

您可以使用[DXGridView.ItemNavigationTargetTypeBinding](http://help.devexpress.com/#XAML/DevExpressUIXamlLayoutDXGridView_ItemNavigationTargetTypeBindingtopic)属性来指定最终用户单击[DXGridView](http://help.devexpress.com/#XAML/clsDevExpressUIXamlLayoutDXGridViewtopic)项目时要打开的 Page 类的名称。

**PS 我相信获得任何 DevExpress 控件的保证帮助**的最佳方式是直接联系[DevExpress 支持](http://www.devexpress.com/Support/Center)。请注意，在评估期间（30 天），完全支持是免费的。

# java - Java - 设计验证器，类层次结构

> ID：14318045
> 
> 赞同：6
> 
> 时间：2013-01-14T12:00:23.093
> 
> 标签：java, inheritance, validation, class-hierarchy

我正在为某些对象（这些对象的字段）设计验证器。这些对象被封装在一个更大的对象 - 容器中。

示例：汽车作为容器。由车轮、发动机、车身组成。假设我需要验证车轮是否有正确的直径，发动机是否有正确的容量，车身是否有一定的长度等。

从理论上讲，我认为我应该在建造容器（汽车）之前验证一切。

实现这一目标的最佳方法是什么？我是否使用 validate() 方法创建一个抽象验证器类并在每个封闭类中实现它？容器呢，我是否根本不将它包含在验证过程中？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:05:13.010

我建议您不要将验证逻辑*放在*要验证的类中。

我发现最好将这些类保留为单纯的*值对象*，并创建一个并行的验证器层次结构，每个要验证的实体大致一个。或者，您也可以创建一个可以验证所有实体的单个验证器：但是，此解决方案的可扩展性较差，并且当您必须添加新实体时（例如，您[还想](http://en.wikipedia.org/wiki/Open-Closed_Principle)处理汽车的后视镜）。

假设您选择了该`one entity : one validator`方法，容器的验证器将首先验证容器内的组件，然后验证它们是否适合在一起。

还请考虑使用验证器框架（例如[Apache Commons Validator](http://commons.apache.org/validator/) ）的可能性，这可以使您免于编写样板代码。但是，由于我不知道您必须执行什么样的复杂验证，所以我不知道它是否符合您的需求。

此外，我认为您不必担心在构建所有内容之前对其进行验证。只需构造它并在之后进行验证：然后，如果它违反了验证规则，您可以将其丢弃（即不要将其保留在任何地方）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T04:15:59.587

我同意 gd1 的答案。一种方法是为每个值对象设置一个 ValidatorAdapter。所以它看起来像这样：

```
public class GreenCarValidator {
   public GreenCarValidator(Car car) {
      // save reference
   }

   @Override 
   public boolean isValid() {
      return car.getColor().equals("green");
   }
}

public class RedCarValidator {
   public RedCarValidator(Car car) {
      // save reference
   }

   @Override 
   public boolean isValid() {
      // you could compose more validators here for each property in the car object as needed
      return car.getColor().equals("red");
   }
} 
```

现在，您可以为单一类型的对象拥有多种类型的验证器，在运行时动态且可配置。如果您将“valid()”方法放在类中，而 gd1 建议您不要这样做，您将失去这种灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:07:40.000

您可以使用 validate 方法创建一个 ValidatablePart 接口，让所有部件都实现此接口，然后让容器在将所有封闭部件添加到容器时或在调用容器的构建或任何应该的方法时验证它们构建它。

您的 Container 类可以遵循[模板方法设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

# mysql - MySQL Group By Year Results are changing

> ID：14318048
> 
> 赞同：1
> 
> 时间：2013-01-14T12:00:34.037
> 
> 标签：mysql, sql

I have an SQL statement that selects a range of values and then groups them by year/month/day. This appears to work fine.

What is really confusing, is that if I run this SQL on the next day, the result numbers change. I think overall, the numbers are correct, but they change by one or two when run on different days.

eg.

```
select Date_format(startDate, "%Y-%m-%d") as Date, count(*) as Online 
from 
`promotion` p, `subscription` s 
where 
p.`uid` = s.`uid` and 
s.`productId` = "groupproduct"
startDate < now() 
GROUP BY YEAR(startDate), MONTH(startDate), DAYOFMONTH(startDate); 
```

**Results on Day X**

```
2012-12-25  265
2012-12-26  264
2012-12-27  232
2012-12-28  187
2012-12-29  171
2012-12-30  8935
2012-12-31  3117 
```

**Results on Day X+1**

```
2012-12-25  265
2012-12-26  264
2012-12-27  231
2012-12-28  187
2012-12-29  171
2012-12-30  8933
2012-12-31  3114 
```

Notice how on 27.12.2012 and 30.12.2012 the result are off by one. What am I missing? I assume there is a counting error using the Group by functions, but I don't know what.

NB. This SQL is run by a cronjob each day in the morning. Not by hand, so I don't think user error is to blame here (except in the creation of the statement).

EDIT: Sorry, there was a mistake in the printed SQL (I changed it slightly for the public). It should be startDate every where. The issue still stands.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:52:14.523

有几件事。首先，真的可以有记录`startDate >= now()`吗？这不应该导致您遇到的问题，但我只是不认为需要它。其次，您的`GROUP BY`子句将分组到每个独特的日子，那么您为什么不简单地使用`GROUP BY DATE(startDate)`？

这两个建议会将您的查询减少到

```
select Date_format(startDate, "%Y-%m-%d") as Date, count(*) as Online 
from 
`promotion` p, `subscription` s 
where 
p.`uid` = s.`uid` and 
s.`productId` = "groupproduct"
GROUP BY DATE(startDate); 
```

这些更改改进了您的查询，但无论是此版本还是您的原始版本的结果都不应在日常基础上有所不同。所有改变的结果都显示更少的记录，所以我猜用户正在删除记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:44:14.447

为什么你分组`startDate`但输出`purchaseDate` `(Date_format(purchaseDate, "%Y-%m-%d"))`。`PurchaseDate`MySQL 将为每个组选择什么？

我认为您的 SQL 应该如下所示：

```
select Date_format(startDate, "%Y-%m-%d") as Date, count(*) as Online 
from 
`promotion` p, `subscription` s 
where 
p.`uid` = s.`uid` and 
s.`productId` = "groupproduct"
startDate < now() 
GROUP BY Date_format(startDate, "%Y-%m-%d"); 
```

或者如果你需要`purchaseDate`

```
select Date_format(purchaseDate, "%Y-%m-%d") as Date, count(*) as Online 
from 
`promotion` p, `subscription` s 
where 
p.`uid` = s.`uid` and 
s.`productId` = "groupproduct"
startDate < now() 
GROUP BY Date_format(purchaseDate, "%Y-%m-%d"); 
```

# asp.net-mvc-3 - Unable to change App_Data permissions in msi instalation

> ID：14318049
> 
> 赞同：0
> 
> 时间：2013-01-14T12:00:37.247
> 
> 标签：asp.net-mvc-3, visual-studio-2010, windows-7, iis-7, windows-installer

In the file system of setup i had given **Read & Write permissions** to the app_data folder. But when installed it has only **Read permissions**.

![enter image description here](../Images/76a86f2caffcdced46267920971ad388.png)

I'm running on VS2010 , Windows 7, IIS 7 , MVC3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:35:20.653

Visual Studio 安装项目不支持基础 Windows Installer LockPermissions 表。此项目类型从 VS2012 中删除的众多原因之一。切换到不同的工具或使用自定义操作重新发明轮子。

# php - php 函数将子菜单从其父主菜单项中拆分出来并显示在另一个 div 中

> ID：14318055
> 
> 赞同：0
> 
> 时间：2013-01-14T12:01:01.567
> 
> 标签：php, html, function, drop-down-menu, submenu

我们能否从父主菜单项中拆分子菜单并将其显示在布局中的另一个位置。我的标记是由我的应用程序动态生成的，因此没有手动控制。

**我的标记是这样生成的：**

```
<div class="wrapper" style="margin:0 auto; width:900px;">
    <div class="nav">
        <ul class="menu">
            <li class="item"><a href="#">Item 1</a></li>
            <li class="item"> <a href="#">Item 2</a>
                <ul class="sub-menu">
                    <li class="sub-item"><a href="#">Sub Item 1</a></li>
                    <li class="sub-item"><a href="#">Sub Item 2</a></li>
                    <li class="sub-item"><a href="#">Sub Item 3</a></li>
                </ul>
            </li>
            <li class="item"><a href="#">Item 3</a></li>
        </ul>
    </div>
    <div class="content">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse suscipit imperdiet convallis. Aliquam erat volutpat. Vestibulum consectetur tellus a est aliquam imperdiet. Aliquam sed dolor ut nulla porta pellentesque. Vivamus et tortor at tortor interdum pretium. Donec vel ante tellus, id iaculis elit. Duis nec eros quis nulla vestibulum sagittis. Nam a auctor ipsum. Curabitur nulla elit, volutpat eu porta a, mollis sed tellus. Integer eleifend nulla non nibh tristique euismod. </p>
    </div>
    <div class="sidebar">
        <div class="split-menu">
        </div>
    </div>
</div> 
```

**任务：**

如果我单击第 2 项，那么第 2`<ul class="sub-menu">`项的必须显示在`<div class="split-menu">`其中，同样，当我单击第 3 项时，第 3 项子菜单必须显示在那里？

![在此处输入图像描述](../Images/7d4025cb3e5d460f84cd4d3fdfbbe74e.png)

**我的问题：**

1.  我们可以使用 php 做到这一点吗？
2.  如果不是如何做到这一点？

**更新：**

我的目标是在禁用 JavaScript 的旧 IE6 浏览器上展示这一点，因为我的客户端的目标访问者来自中国，而在中国仍然有很多不理解`:hover`css 的 IE6 漂浮在周围。

最后，我使用 WordPress 和 Magento 作为基础应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:08:31.827

这种 DOM 操作不能使用`PHP`服务器`PHP`端脚本来完成。这意味着您希望 PHP 处理的任何内容都必须发送到服务器，然后响应将被发回。

接受的解决方案有效的唯一原因是因为 Wordpress`PHP`功能`wp_list_pages`（虽然我不熟悉它）将生成或者`CSS`实现`Javascript`您想要的。因此，它实际上是不正确的，因为您说您不能使用该`CSS` `:hover`方法，并且您不能使用`Javascript`.

实现这种 DOM 操作的唯一两种方法是使用`CSS`或`Javascript`，因此我建议您将样式表应用于已`Javascript`关闭的浏览器，或者特别是 IE 6 或更早版本。这可以使用以下代码轻松完成：

```
<noscript>
    <!-- Attach a stylesheet to permanently hide drop down menus, -->
    <!-- and instead show the content elsewhere -->
    <link rel="stylesheet" href="//example.net/_css/noscript.css" />
</noscript> 
```

或者，您可以像这样使用 IE 条件语句：

```
<!--[if lte IE 6]>
    <!-- Attach this stylesheet if using IE6 or earlier -->
    <link rel="stylesheet" href="//example.net/_css/ie6.css" />
<![endif]--> 
```

为了测试上述内容，您需要在 IE6 中运行您的网站，然后`Javascript`关闭。这样你就知道它是否有效。

总而言之（如果我正确理解了这个问题），在 IE6 中显示/隐藏悬停/鼠标悬停的子菜单（不带`Javascript`）是不可能的。

但是，如果我没有正确理解这个问题，请告诉我，我很乐意为您提供进一步的帮助......

***一个快速说明：**您似乎正在尝试使用 Wordpress 来实现这一点，如果知道这一点，我不会尝试回答这个问题，因为我不熟悉 Wordpress。*

* * *

## 原始答案

这里不需要`PHP`，你只需要使用`CSS`and `Javascript`/的组合`jQuery`。

对于您的子菜单，请使用以下内容`CSS`：

```
.sub-menu {display:none;}
.menu:hover .sub-menu {display:block;} 
```

以上只是告诉浏览器`sub-menu`在父元素悬停（鼠标悬停）时显示该项目。

**更新**

由于您不想使用`Javascript`，因此`split-menu`无法应用该功能。`PHP`是一种服务器端语言，因此无法监听客户端事件，例如`mouseover`. 您可以这样做的唯一方法是使用`Javascript`or `CSS`！

至于专门为IE6建一个网站…………祝你好运！

`:hover`方法是`CSS`从不`Javascript`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:27:41.390

首先兄弟这不能用 PHP 完成。由于 HTML 标记是固定的，我们对此无能为力。我们需要另外两种技术的支持，即：CSS 和 javascript。

*   CSS ：用于将所有菜单的子菜单重新分配到特定位置。
*   Javascript(jQuery) : 用于处理菜单的点击事件并显示出来。

这是我建议您使用 CSS 做的事情。将以下代码添加到您的样式表中。

```
.sub-menu{
    position:absolute;
    left:1000px;
    top:150px;
    /* And Your Custom Styling for the Sub-Menu */
 } 
```

在标记的开头添加此 jQuery 代码。

```
$(document).ready(function(){
   // This hides all the Sub Menus, when the page loads.
   $(".sub-menu").hide();
});

$(".sub-menu").click(function(){
   // Hides the previously shown menu.
   $(".sub-menu").hide();
   // Show the Currently selected Menu's Sub menu.
   $(this).get(0).show();
}); 
```

请务必在使用 jquery 代码之前添加 jquery 链接。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js"></script> 
```

希望这能解决你的问题兄弟.. :) :) :) :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:49:30.330

我注意到你说你试图在 WordPress 中实现这一点。如果是这样的话，

在 WordPress 中导航。

头文件.php

```
wp_list_pages('depth=-1&title_li='); 
```

这将删除下拉列表（将深度参数设置为 -1）

页面.php

```
wp_list_pages("title_li=&child_of=$id&show_date=modified"); 
```

这将显示当前页面的子菜单项。（将 child_of 参数设置为当前页面）将其放置在您想要的布局中的任何位置。

在 Magento 中：

在：app/design/frontend/default/default/template/catalog/navigation/top.phtml 替换

```
<?php foreach ($this->getStoreCategories() as $_category): ?>
<?php echo $this->drawItem($_category) ?>
<?php endforeach ?> 
```

有了这个：

```
<?php foreach ($this->getStoreCategories() as $_category): ?>
<a href="<?php echo $this->getCategoryUrl($_category); ?>"><?php echo $this->htmlEscape($_category->getName()); ?></a>
<?php endforeach ?> 
```

仍在研究 Magento 的子类别（Magento 中的菜鸟）

编辑：我认为循环起来而不是弄清楚会更快:-)试试这个，[在这里](https://stackoverflow.com/questions/5564647/magento-get-a-parent-category-and-all-sub-sub-categories)

# ruby - How to match any quoted strings containing Cyrillic symbols

> ID：14318057
> 
> 赞同：1
> 
> 时间：2013-01-14T12:01:07.840
> 
> 标签：ruby, regex

Need parse a lot of text files and replace any quoted strings containing cyrillic symbols. They are may contains new lines, non-alphabetic characters and special symbols (for example '$' or escaped quote). Can anyone help with regex?

From comments:

for example php code

```
function hello($word) {
    $word2 = "ха-ха!";
    echo "Привет, $word $word2\n"; 
}
hello('Мир'); 
```

I need match "ха-ха!", "Привет, $word $word2\n" and 'Мир'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:58:33.037

这应该有效：

```
str = 'The cat is under the "таблица"'
regex = /"\p{Cyrillic}+.*?\.?"/ui

str.match(regex){|s| do_stuff_with_each_matching s} 

# or...

str.gsub!(regex){|s| method_that_translates_russian s} 
```

[在http://rubular.com/r/0Mwbfinjvp](http://rubular.com/r/0Mwbfinjvp)现场查看。
[http://www.ruby-doc.org/core-1.9.3/Regexp.html](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:32:04.660

`".*[^a-zA-Z\d]+.*"`匹配任何包含**至少一个非字母数字字符的****引用**字符序列。

 **即它匹配`"aa$bb"`并且`"a1$b1"`

它不匹配`"aabb"`或`a$b`。

希望这是您想要的（添加所需的转义）。**

# ios - HTTP Live Streaming (HLS) 广播电台音频流，带有“在野外”的定时元数据

> ID：14318064
> 
> 赞同：3
> 
> 时间：2013-01-14T12:01:35.290
> 
> 标签：ios, audio-streaming, http-live-streaming, live-streaming

我一直找不到使用定时元数据的 HLS 广播电台。我发现了许多 HLS 流，但没有一个流中有实际的元数据。我需要找到一个现有的流进行测试。

任何关于车站的建议，或如何找到一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T05:08:34.307

它不是广播电台，但 Apple 的[HTTP Live Streaming 开发人员资源](https://developer.apple.com/streaming/)包括两个[示例流](https://developer.apple.com/streaming/examples/)。“高级”流提到包括定时元数据，每五秒有一个时间码。

# c# - Windows 8 中连接状态更改的事件

> ID：14318066
> 
> 赞同：0
> 
> 时间：2013-01-14T12:01:40.787
> 
> 标签：c#, windows-runtime

连接状态发生变化时是否有要处理的事件？

例如，我的应用程序就像`OutLook`. 我想处理一个事件以了解何时有 Internet 连接，然后发送所有待处理的电子邮件。

现在我可以定期检查是否有 Internet 连接，但这对我来说似乎是一个糟糕的解决方案。我会使用一个事件来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:49:14.497

您最好的选择是实施[后台任务](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977056.aspx)。这样，即使您的应用程序在互联网连接可用时不再打开，您也可以发送待处理的电子邮件。

注册后台任务时，您可以设置触发器和条件，以便在您希望任务运行时进行配置：

```
var trigger = new SystemTrigger(SystemTriggerType.InternetAvailable, false);
var condition = new SystemCondition(SystemConditionType.InternetAvailable);

var builder = new BackgroundTaskBuilder();
builder.Name = "Send pending e-mails task";
builder.TaskEntryPoint = "Tasks.SendPendingEmailTask";
builder.SetTrigger(trigger);
builder.AddCondition(condition);
var task = builder.Register(); 
```

您的后台任务必须实现该`IBackgroundTask`接口。当任务被触发时，该`Run`方法将被调用：

```
public sealed class SendPendingEmailTask : IBackgroundTask
{
    public void Run(IBackgroundTaskInstance taskInstance)
    {
        var deferral = taskInstance.GetDeferral();
        // send your e-mails here
        deferral.Complete();
    }
} 
```

# .net - 从表中读取旧数据，而某些事务正在写入同一个表

> ID：14318067
> 
> 赞同：2
> 
> 时间：2013-01-14T12:01:40.963
> 
> 标签：.net, transactions, sql-server-2008-r2, transactionscope, isolation-level

我想要的是能够从表中读取旧数据，而一些事务正在写入同一个表。当这样的原子写入完成后，我想用新的数据替换旧数据。

我正在处理的事务很长，我不想启用脏读，也不想阻止读取的可能性。

我在我的数据库上打开了快照隔离级别：

```
SET ALLOW_SNAPSHOT_ISOLATION ON 
```

并使用这样的代码在事务中写入数据：

```
using (var scope = new TransactionScope(TransactionScopeOption.RequiresNew,
                       new TransactionOptions
                           { IsolationLevel = IsolationLevel.Snapshot }))
{
    update();
    scope.Complete();
} 
```

不幸的是，当我尝试使用`SELECT * FROM [Table]`Microsoft SQL Server Management Studio 读取一些数据时，查询执行正在等待消息`Executing query...`，并在事务完成后检索数据。我错过了什么？

**编辑：** update() 的代码 - 基本上是循环中的简单插入，混合了与 WCF 连接的没有 db 相关的东西，这会减慢进程：

```
var val = Web.Download();
using (var connection = new SqlConnection(connection))
{
    connection.Open();
    using (var command = connection.CreateCommand())
    {
        command.CommandType = CommandType.Text;
        command.CommandText = "INSERT INTO [table]([value]) VALUES (@val)";
        command.Parameters.Add(CreateParam(command, "@val", val, DbType.String));
        command.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:12:46.910

您还需要为您的选择设置隔离级别。在你之前`SELECT * FROM [Table]`，添加`SET TRANSACTION ISOLATION LEVEL SNAPSHOT`.

# c# - 设置Listbox的滚动条位置

> ID：14318069
> 
> 赞同：1
> 
> 时间：2013-01-14T12:01:43.967
> 
> 标签：c#, wpf, listbox

> **可能重复：**
> [设置列表框的滚动条位置](https://stackoverflow.com/questions/159506/setting-the-scrollbar-position-of-a-listbox)

如何将 WPF 列表框滚动条位置设置为最后添加的项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:08:53.097

您可以简单地使用[ScrollIntoView](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.scrollintoview.aspx)方法：

```
object item = ...
listBox.Items.Add(item);
listBox.ScrollIntoView(item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:10:21.510

在 WPF 中，您必须使用`ScrollIntoView`. 我添加了这个例子：

```
int i = 0;
private void button1_Click(object sender, RoutedEventArgs e)
{   
   listBox1.Items.Add("Item nr. " + i.ToString());
   listBox1.ScrollIntoView("Item nr. " + i.ToString());
   i++;
} 
```

在 Windows 窗体中，您有：

```
int visibleItems = myListBox.ClientSize.Height / myListBox.ItemHeight;
myListBox.TopIndex = Math.Max(myListBox.Items.Count - visibleItems + 1, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:17:58.677

您可以使用本文中解释的想法以与 MVVM 对齐的方式执行[此](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)操作- 只需映射到 ListViewItem 而不是 TreeViewItem（而不是 IsSelected 作为触发器，您可以将其设置为要添加的新项目）。

# windows-phone-8 - windows phone 8 的内存使用限制

> ID：14318070
> 
> 赞同：2
> 
> 时间：2013-01-14T12:01:55.823
> 
> 标签：windows-phone-8

windows phone 8 应用程序的应用程序内存使用限制是多少，我需要三种可用设备的内存限制（如 720p、WXVGA 等）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T00:10:06.590

The zen of WP8 memory caps has three aspects: default baseline (150MB+), extended memory (180MB+) and low-memory device opt-out (300MB+).

**Baseline:**

By default all apps (D3D, XAML and XNA) on WP8 have at least 150MB which is up from 90MB on WP7\. The increase from 90MB to 150MB is done to accommodate the extra memory needed for more detailed visuals on HD displays.

**Extended Memory Caps**

Apps can also ask for additional memory by specifying ID_FUNCCAP_EXTEND_MEM. When asking for additional memory you're guaranteed at least 180MB on all devices. When asking for additional memory your app may actually get all the way up to 380MB memory on high-memory devices.

**Low memory device opt-out**

Apps can also opt-out of low-memory devices (512MB RAM) by specifying ID_REQ_MEMORY_300\. That guaranteed your app will only run on high-memory devices (more then 1GB of RAM) and with at least 300MB of memory.

The way you should think about "high memory devices" is that it's just like having an optional sensor (Gyroscope, Compass, etc) or any other optional hardware (NFC, etc). Don't assume users have this extra memory unless you want to limit the distribution of your app considerably. Public statistics show that low-memory devices sell pretty well and you shouldn't disqualify your app from those devices unless it's an absolute must.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:04:12.917

[Windows Phone 8 (MSDN) 的应用程序内存限制](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681682%28v=vs.105%29.aspx)

# node.js - 在示例 express-jade 项目中获取样式表和 js 的 404

> ID：14318078
> 
> 赞同：5
> 
> 时间：2013-01-14T12:02:36.543
> 
> 标签：node.js, express, http-status-code-404, static-files

我使用默认的 express 库在 nodejs 中创建了一个简单的静态页面。但是，当我运行它时，nodejs 无法获取公共文件并在它们上抛出 404。

我相信我给出的路径是正确的。这让我发疯。我知道问题必须如此微小和简单才能值得面对，但我无法找到它。

你能帮帮我吗？

代码位于 [Rishavs/ComingSoonPage的 github 上](https://github.com/rishavs/ComingSoonPage)

感谢您的时间和帮助。

~ 里沙夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:19:40.373

在您的`app.js`中，更早地挂载静态文件，如下所示：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.static(path.join(__dirname, '/public')));
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
}); 
```

**编辑**：注意`/public`VS`public`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T13:00:18.397

就像提到的markt。您的 html 不应引用“公共”。

```
<link href="../../styles/site.css" rel="stylesheet" /> 
```

对比

```
<link href="../../public/styles/site.css" rel="stylesheet" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T16:05:45.880

在我的情况下，*有*必要指定子目录，以及主要的“公共”静态目录，例如：

```
app.use(express.static(path.join(__dirname, 'public')));
app.use('/public/uploads', express.static(path.join(__dirname, '/public/uploads'))); 
```

同样在玩耍之后，我发现“public”静态目录被声明为“/public”还是“public”（有或没有前导斜杠）没有区别。

但是，如果我错过了子目录中的前导斜杠，它确实会有所不同，即这给了我 404：

```
app.use('public/uploads', express.static(path.join(__dirname, 'public/uploads'))); 
```

但这工作正常：

```
app.use('/public/uploads', express.static(path.join(__dirname, '/public/uploads'))); 
```

当然还有确保在目录上正确设置权限的老栗子！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T14:55:12.247

我正在使用 express 2.5.8 我能够像这样访问公共：

```
app.use(express.static(__dirname + '/public')); 
```

然后我注意到当我的布局中有这样的东西时：

```
<link rel="stylesheet" type="text/css" href="style.css"> 
```

它没有像预期的那样为我的 style.css 服务，它希望我做类似的事情

```
<link rel="stylesheet" type="text/css" href="../stylesheets/style.css"> 
```

将以下内容添加到我的 app.js 文件中为我解决了这个问题：

```
 app.use(express.static(__dirname + '/public/stylesheets'));
  app.use(express.static(__dirname + '/public/javascripts')); 
```

一切看起来都是这样：

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'handlebars');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
  app.use(express.static(__dirname + '/public/stylesheets'));
  app.use(express.static(__dirname + '/public/javascripts'));
}); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-14T12:32:33.080

该`express.static`方法不包括递归子文件夹。您的脚本和样式分别位于 public/javascripts 和 public/stylesheets 下。您必须让 express 知道这些文件夹包含应直接提供的静态文件，如下所示：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
  app.use('public/javascripts', express.static(path.join(__dirname, 'public/javascripts')));
  app.use('public/stylesheets', express.static(path.join(__dirname, 'public/stylesheets')));
}); 
```

最后两行是重要的。请注意，有两个参数传递给该`app.use`方法。第一个告诉脚本将被提供的路径是什么（也就是你必须在浏览器中输入什么才能得到它）。第二个是文件在服务器上的物理位置。

# ruby - 如何列出从 Ruby 中的类创建的所有对象？

> ID：14318079
> 
> 赞同：33
> 
> 时间：2013-01-14T12:02:38.660
> 
> 标签：ruby, oop, class-method

Ruby 中有没有办法让一个类知道它存在多少个实例并且可以列出它们？

这是一个示例类：

```
class Project

  attr_accessor :name, :tasks

  def initialize(options)
    @name = options[:name]
    @tasks = options[:tasks]
  end

  def self.all
    # return listing of project objects
  end

    def self.count
          # return a count of existing projects
    end

end 
```

现在我创建这个类的项目对象：

```
options1 = {
  name: 'Building house',
  priority: 2,
  tasks: []
}

options2 = {
  name: 'Getting a loan from the Bank',
  priority: 3,
  tasks: []
}

@project1 = Project.new(options1)
@project2 = Project.new(options2) 
```

我想要的是有类方法`Project.all`，并`Project.count`返回当前项目的列表和计数。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-14T12:50:06.103

您可以使用`ObjectSpace`模块来执行此操作，特别是[`each_object`](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#method-c-each_object)方法。

```
ObjectSpace.each_object(Project).count 
```

为了完整起见，以下是您在课堂上使用它的方式（向sawa 致敬）

```
class Project
  # ...

  def self.all
    ObjectSpace.each_object(self).to_a
  end

  def self.count
    all.count
  end
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T12:24:27.687

一种方法是在创建新实例时跟踪它。

```
class Project

    @@count = 0
    @@instances = []

    def initialize(options)
           @@count += 1
           @@instances << self
    end

    def self.all
        @@instances.inspect
    end

    def self.count
        @@count
    end

end 
```

如果你想使用`ObjectSpace`，那么它

```
def self.count
    ObjectSpace.each_object(self).count
end

def self.all
    ObjectSpace.each_object(self).to_a
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T12:50:56.757

```
class Project
    def self.all; ObjectSpace.each_object(self).to_a end
    def self.count; all.length end
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T12:29:02.570

也许这会起作用：

```
class Project
  class << self; attr_accessor :instances; end

  attr_accessor :name, :tasks

  def initialize(options)
    @name = options[:name]
    @tasks = options[:tasks]

    self.class.instances ||= Array.new
    self.class.instances << self
  end

  def self.all
    # return listing of project objects
    instances ? instances.dup : []
  end

  def self.count
    # return a count of existing projects
    instances ? instances.count : 0 
  end

  def destroy
    self.class.instances.delete(self)
  end
end 
```

但是您将不得不手动销毁这些对象。也许可以基于 ObjectSpace 模块构建其他解决方案。

# gwt - SmartGwt 添加成员后获取 VLayout 高度

> ID：14318080
> 
> 赞同：1
> 
> 时间：2013-01-14T12:02:48.547
> 
> 标签：gwt, smartgwt

`VLayout`添加成员后，我的身高有问题

```
VLayot layout = new VLayout(); 
```

在演示者中我有代码

```
display.getAnswerPanel().removeMembers(display.getAnswerPanel().getMembers()); 
```

清除所有成员，然后添加另一个（我有按钮，当我单击它们时，它会清除所有`VLayout`成员并添加新成员）

```
layout.addMember(new Button("Example")); 
```

我需要在开始时得到`offsetHeight`这个`VLayout`，每次单击按钮时，我的问题是第一次加载页面时，我的`offsetHeigh 为 1px，每次单击按钮时都可以，它显示了正确的值. 有人能帮我吗？

我尝试使用此代码

```
scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand() {
    layout.getOffsetHeight();
} 
```

但情况是一样的，第一次我没有正确的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T11:52:04.613

只有在加载小部件或单击按钮后，我们才能获取任何小部件的高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T22:24:45.160

Scheduler#scheduleDeferred() 在 GWT 循环结束时执行，因此仍然没有时间更新布局。我想除了使用传统的计时器黑客之外，您无能为力（如果任何读者有疑问，是的，我的意思是使用 setTimeout() 或 Scheduler.get().scheduleWithFixedDelay(cmd, 200) ）。

# sql - 3 个布尔字段或 1 个具有 3 个值的字段 - 关系模型数据库

> ID：14318086
> 
> 赞同：0
> 
> 时间：2013-01-14T12:03:20.703
> 
> 标签：sql, database, database-design, mysqli, relational-database

这可能是一个非常简单的问题，但我想知道从关系模型的角度来看，哪种方法更好。

我有 3 种类型的用户：

*   顾客
*   工作人员
*   超级客户

它们**都具有完全相同的字段**。我将它们全部放在同`users`一张表中，这也使我使用的框架更容易使用。

我的问题是：是使用 3 个不同的布尔字段来区分每种类型的用户还是只使用一个具有 3 个值的字段更好？

目前我有 3 个布尔字段：**admin**、**staff**、**superuser**。

这会比只创建一个具有 3 个值的字段更清楚吗？（例如，管理员 1 个，员工 2 个，超级用户 3 个）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:07:27.827

我建议一个字段可能是 UserType 表的外键，如下所示：

```
-- UserType table
-- UserTypeID INT -- PK
-- Type NVARCHAR(50) 
```

并在您的用户表中添加一个字段`UserTypeID`。

`types`一些用户更喜欢可读性，因此当他们知道列表相对较短时，请使用单字符字符字段而不是整数 ID 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:14:19.230

如果一个用户只能属于一种用户类型：使用一个包含三个值的字段。

如果一个用户可以属于多个用户类型：使用三个布尔字段。

# python - py2exe 打包数据文件

> ID：14318088
> 
> 赞同：1
> 
> 时间：2013-01-14T12:03:23.933
> 
> 标签：python, file, installation, py2exe

我有一个要打包的应用程序，其中包含一个图像作为数据文件，我尝试运行这个 setup.py 脚本：

```
from distutils.core import setup
import py2exe
import matplotlib

file_dati=[]
file_dati.append(matplotlib.get_py2exe_datafiles())
file_dati.append(('img1','C:\Users\MZompetta.000\Desktop\20130114_assortimenti\img1.gif'))

setup(console=[{"script": "Int_assortimenti.py"}],
       options = {
        "py2exe": {
            "dll_excludes": ["libzmq.dll", "MSVCP90.dll"]
        }
    }, data_files=file_dati
) 
```

但我收到此错误：

> AttributeError：“元组”对象没有属性“拆分”

错误是指该行：`data_files=file_dati`

我尝试了其他方法来编写 data_files 但没有办法。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:50:17.593

```
import os
import logging
from distutils.core import setup
import py2exe
import matplotlib
import shutil

distDir = "dist"

# Remove the build and dist folders
shutil.rmtree("build", ignore_errors=True)
shutil.rmtree("dist", ignore_errors=True)

try:
    os.mkdir(os.path.abspath(distDir))
except:
    logging.exception('')

data_files = matplotlib.get_py2exe_datafiles()
shutil.copyfile('C:\Users\MZompetta.000\Desktop\20130114_assortimenti\img1.gif', os.path.join(distDir, "img1.gif"))

setup(
    options = {"py2exe": {
            "dll_excludes": ["libzmq.dll", "MSVCP90.dll"],
            "dist_dir": distDir,
        }
    }
    data_files = data_files,
    console=[{"script": "Int_assortimenti.py"}],
) 
```

# objective-c - NSTableView 从不同的控制器重新加载数据

> ID：14318089
> 
> 赞同：1
> 
> 时间：2013-01-14T12:03:23.600
> 
> 标签：objective-c, nstableview, nstabview

我在更新两个表的内容时遇到问题，这些表位于 a 的两个不同选项卡中`NSTabView`，每个选项卡由第三个控制器 (Controller2) 的不同控制器 (Controller1 和 Controller3) 控制。我尝试了三种不同的方法：

方法 #1：我在 Controller1 （表的控制器`invitesTableView`）中创建了方法 refreshTable ：

```
- (void)refreshTable {
  invites = //fill my mutable array
  NSLog(@"%@",invites); 
  [self.invitesTableView reloadData];
  NSLog(@"invite's table view updated");
} 
```

我后来从 Controller2 调用：

```
Controller1 *controller1 = [[Controller1 alloc] init];
[controller1  refreshTable]; 
```

`NSLog`正确打印数组邀请的内容，但表格未更新。我应该说，在应用程序启动时，我在 Controller1 中调用了相同的方法，并且数组邀请的内容已正确加载到表中。

方法 #2：在 Controller2 中时，我会：

```
Controller1 *controller1 = [[Controller1 alloc] init];
controller1.invites = //fill my mutable array
NSLog(@"%@",controller1.invites);
[controller1.invitesTableView reloadData]; 
```

但是即使`NSLog`显示正确的内容，表格的内容也不会更新。

方法#3：由于 Controller1 控制 a 的内容`NSTabViewItem`，我在 Controller1 中集成了该方法：

```
- (void)tabView:(NSTabView *)tabView didSelectTabViewItem:(NSTabViewItem *)inviteTab 
```

它工作得很好，因为我一`refreshTable`打开由Controller1控制的选项卡就调用了该方法。问题是我在不同的选项卡中有不同的表，但我只能将一个控制器设置为 的委托`NSTabView`，因此我无法在不同的表中更新由 Controller3 控制的表。除了合并 Controller1 和 Controller3 之外，我认为没有一个简单的方法可以解决方法 #3，但我认为我只是缺少前两种方法的一些东西。

希望我清楚地解释自己。任何人都可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:11:48.780

您可以使用通知/观察者重新加载 tableview。

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(reloadTable:)
                                             name:@"reloadNotification"
                                           object:nil];

- (void)reloadTable:(NSNotification *)notif {
    [self.tableName reloadData];
} 
```

在你的第一个标签中使用这个：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadNotification" 
                                                    object:nil]; 
```

# java - JMockit 多个异常作为方法调用的结果

> ID：14318094
> 
> 赞同：6
> 
> 时间：2013-01-14T12:03:54.463
> 
> 标签：java, unit-testing, junit, jmockit

这是来自官方的 JMockit 教程：

```
@Test
   public void doSomethingHandlesSomeCheckedException() throws Exception
   {
      new Expectations() {
         DependencyAbc abc;

         {
            abc.stringReturningMethod();
            returns("str1", "str2");
            result = new SomeCheckedException();
         }
      };

      new UnitUnderTest().doSomething();
   } 
```

是否可以说明相反的情况，即多个结果和一个返回 - 我需要抛出 2 个异常，然后才返回一个好的值。我正在寻找这样的东西：

```
 abc.stringReturningMethod();
  returns(new SomeCheckedException(), new SomeOtherException(),"third"); 
```

这不起作用，JMockit 无法将这些异常转换为`String`（这是 的返回类型`stringReturningMethod`）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T14:11:12.170

像这样写：

```
 abc.stringReturningMethod();
    result = new SomeCheckedException();
    result = new SomeOtherException();
    result = "third"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:15:32.193

我不知道是否有捷径可以做到这一点，但您总是可以记录该方法将被多次调用：

```
abc.stringReturningMethod();
result = new SomeCheckedException();

abc.stringReturningMethod();
result = new SomeOtherException();

abc.stringReturningMethod();
result = "third"; 
```

# mysql - 连接中有 2 个字段的 MySQL 连接

> ID：14318098
> 
> 赞同：0
> 
> 时间：2013-01-14T12:04:11.043
> 
> 标签：mysql, join

我正在为飞行学校创建一个预订数据库，其中包含时间表和飞行员作为当天航班的视觉日程表类型表示。我让它工作正常，直到他们获得了一架有时需要副驾驶的飞机。

他们有一些永久在名单上的飞行员（他们想一直在计划器上看到），还有一些偶尔使用（他们只想在当天为他们预订时在那里）。他们还希望能够在计划器上设置自己的飞行员顺序，所以我`int_LISTORDER`在员工记录中设置了一个字段，在列表中设置了顺序，并且`int_LISTORDER`只有在预订时才会出现 500 及以上的任何人为他们。为了在组合中添加一名副驾驶，`txt_STAFFNAME2`除了机长之外，预订还添加了一个字段`txt_STAFFNAME`。

我使用原始的仅飞行员版本进行了以下查询，以选择在任何特定日期（`$tl_date`变量）进行预订的所有飞行员，这些飞行员​​与工作人员列表中的飞行员列表匹配并获取他们的列表顺序，并将其与列表顺序低于 500 的飞行员列表：

```
 (SELECT DISTINCT tbl_booking_details.txt_STAFFNAME AS txt_PILOT,
                           tbl_staff_details.int_LISTORDER AS int_ORDER
            FROM tbl_booking_details
            INNER JOIN tbl_staff_details
            ON
            tbl_staff_details.txt_PILOTNAME = tbl_booking_details.txt_STAFFNAME
            WHERE tbl_booking_details.date_DATE = '{$tl_date}'
                AND tbl_staff_details.txt_PILOTNAME !='--none--'
                AND tbl_booking_details.txt_COMPLETECODE !='CANCELLED')
            UNION
            (SELECT tbl_staff_details.txt_PILOTNAME AS txt_PILOT,
                    tbl_staff_details.int_LISTORDER AS int_ORDER
            FROM `tbl_staff_details`
            WHERE tbl_staff_details.bool_ISPILOT =1
                AND tbl_staff_details.bool_CURRENT =1
                AND tbl_staff_details.txt_PILOTNAME != '--none--'
                AND tbl_staff_details.int_LISTORDER <500)
            ORDER BY ".STAFF_LIST_ORDER; 
```

这个查询扩展了我对 MySQL 的了解，所以我需要弄清楚如何在语句之前修改查询的第一部分，`UNION`以获取'tbl_booking_detail'中的飞行员 ( `txt_STAFFNAME`) 和副驾驶 ( ) 列表及其列表-将在该特定日期有预订的“tbl_staff_detail”`txt_STAFFNAME2`订购（`int_LISTORDER`）作为“txt_PILOT”和“int_ORDER”放入一张桌子。希望 WHERE 子句中的字段和值的名称是自解释的。

任何人都可以协助修改此查询以满足新标准吗？

问候

布雷登。

编辑：@bonCodigo

表详细信息是（减去许多不相关的字段）：

```
tbl_booking_details
------------------------------------------------------------------------------
ID   |   txt_STAFFNAME | txt_STAFFNAME2 |  date_DATE | txt_COMPLETECODE  | ...
------------------------------------------------------------------------------
475  | Joe A           | Joe B          | 2013-01-14 | CONFIRMED         | ...
------------------------------------------------------------------------------
476  | Joe A           | --none--       | 2013-01-14 | CONFIRMED         | ...
------------------------------------------------------------------------------
476  | Joe C           | Joe A          | 2013-01-14 | CANCELLED         | ...
------------------------------------------------------------------------------
477  | Joe B           | Jane D         | 2013-01-14 | CONFIRMED         | ...
------------------------------------------------------------------------------
478  | Joe E           | Jane D         | 2013-01-14 | CONFIRMED         | ...
------------------------------------------------------------------------------

tbl_staff_details
----------------------------------------------------------------------------
ID | txt_PILOTNAME | bool_CURRENT| bool_ISPILOT |  int_LISTORDER | ...
----------------------------------------------------------------------------
1  | --none--      | 1           | 1            |  0             | ...
----------------------------------------------------------------------------
2  | Joe A         | 1           | 1            |  5             | ...
----------------------------------------------------------------------------
4  | Joe B         | 1           | 1            |  15            | ...
----------------------------------------------------------------------------
5  | Joe C         | 1           | 1            |  510           | ...
----------------------------------------------------------------------------
6  | Jane D        | 1           | 1            |  20            | ...
----------------------------------------------------------------------------
7  | Joe E         | 1           | 1            |  520           | ...
---------------------------------------------------------------------------- 
```

期望的结果：

```
--------------------------
| txt_PILOT |  int_ORDER |
--------------------------
| Joe A     |  5         |
--------------------------
| Joe B     | 15         |
--------------------------
| Jane D    | 20         |
--------------------------
| Joe E     | 520        |
-------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:01:19.347

经过进一步研究，似乎我可能过度设计或复杂了我原来的解决方案，因为我可能是从“错误的角度”来的。完全重新考虑查询并使用人员表作为查询的左侧而不是右侧，提出了以下似乎可行的方法：

```
SELECT DISTINCT tbl_staff_details.txt_PILOTNAME AS txt_PILOTNAME,
                tbl_staff_details.int_LISTORDER AS int_LISTORDER
    FROM tbl_staff_details,tbl_booking_details
    WHERE tbl_booking_details.date_DATE = '{$tl_date}'
        AND tbl_booking_details.txt_COMPLETECODE != 'CANCELLED'
        AND tbl_staff_details.txt_PILOTNAME != '--none--'
        AND (tbl_staff_details.txt_PILOTNAME = tbl_booking_details.txt_STAFFNAME
         OR tbl_staff_details.txt_PILOTNAME = tbl_booking_details.txt_STAFFNAME2)
UNION
    SELECT tbl_staff_details.txt_PILOTNAME AS txt_PILOTNAME,
                tbl_staff_details.int_LISTORDER AS int_LISTORDER
    FROM `tbl_staff_details`
    WHERE tbl_staff_details.bool_ISPILOT =1
        AND tbl_staff_details.bool_CURRENT =1
        AND tbl_staff_details.txt_PILOTNAME != '--none--'
        AND tbl_staff_details.int_LISTORDER <500
    ORDER BY int_LISTORDER ASC, txt_PILOTNAME ASC 
```

只需使用一个简单的 JOIN。我认为只有当有一名飞行员和副驾驶的指数高于 500 时，它才可能只返回第一个飞行员姓名，但如果我当天有一个预订并且两名飞行员都高于 500，它会返回他们两个，所以成功！

感谢任何看过并考虑过的人，即使他们没有发布任何内容或提出解决方案。

干杯

布雷登

# javascript - 使用 Javascript 进行缓存

> ID：14318099
> 
> 赞同：1
> 
> 时间：2013-01-14T12:04:10.700
> 
> 标签：javascript, caching

我正在使用 IE 7.0。我想为每个新请求清除缓存。所以我需要java脚本代码来清除缓存。在 IE 中，我使用一种设置来修复缓存问题。这是位置：工具-Internet选项-浏览历史设置-每次访问网页-确定。它适用于当前的 IE 浏览器。现在我需要使用 Java 脚本来实现这个概念。请给我建议。

```
Response.Buffer = False
Response.CacheControl = "no-cache" 
```

我试过了，但没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:07:37.127

您**无法**使用 JavaScript 清除缓存。但是，您可以通过在 URL 末尾附加一个数字来欺骗浏览器，使其认为该页面与缓存中存储的页面不同。

因此，例如，如果您想确保浏览器使用的是最新的 JS，请在源属性的末尾附加一个数字（每次您希望“欺骗”浏览器缓存时都需要一个不同的数字）：

```
<script src="myScript.js?1" /> 
```

如果要清除整个页面的缓存，则需要问一个不同的问题：如何使用 [在此处输入服务器端语言] 控制缓存？

注意：如果需要，您的新问题应在关于 SO 的新问题中提出。

# java - 哪种数据结构最好？

> ID：14318103
> 
> 赞同：2
> 
> 时间：2013-01-14T12:04:36.253
> 
> 标签：java, data-structures, collections

在我的应用程序中，我们已经有了

```
Map<String, List<String>> 
```

现在我们有了另一个用例，需要找到一个映射到列表中特定字符串的键。

我正在考虑写以下内容：

```
string getKey(Map<String, List<String>> m, String str) {
  for (Entry<String, List<String>> entry :m.entrySet()) {
    if(entry.getValue().contains(str)) {
      retrun entry.getKey();
    }
  }
  return null;
} 
```

`Map`最多可以有 2000 个条目。每个`List`最多可以有 500`String`秒。

有什么更适合的建议吗？`Map`如果有更好的方法，我也可以更改初始数据结构（ ）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T12:08:36.123

我建议您添加另一个提供反向映射的映射 - 从字符串到键列表。这将需要更多的工作来与第一张地图保持同步，但会为您的任务提供最佳性能。

尽管如此，如果您认为此类查询的频率相对较低，也许您的解决方案可能会更好（虽然速度较慢，但​​您为保持两个地图同步而节省的时间将弥补这一点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:14:16.623

你熟悉 Guava API 吗？如果您可以自由添加/更改依赖项，那么绝对值得一试，尤其是[`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)接口的实现。它正是为同一个键可以映射到多个值的情况而构建的。

如果我误解了这个问题并且同一个键不会映射到多个值，那么您可能需要重新制定/重新考虑您的问题，因为您当前的想法`Map<String, List<String>>`基本上就是这样。

# android - android中的电话板和Qwerty键盘

> ID：14318106
> 
> 赞同：2
> 
> 时间：2013-01-14T12:04:50.643
> 
> 标签：android, android-edittext

我希望在Android中同时在Android中实现手机垫和键盘。根据我的要求，`EditText`应显示默认的电话垫。但用户也必须能够输入字母。请建议我一种方法来实现这一点。

```
 <EditText
                android:id="@+id/editTextref1"
                android:layout_width="210dp"
                android:layout_height="45dp"
                android:layout_alignParentRight="true"
                android:layout_marginTop="10dp"
                android:ellipsize="start"
                android:hint="@string/custom1"
                android:imeOptions="actionNext|actionDone"
                 android:inputType="text"
                android:nextFocusDown="@+id/editTextref2"
                android:shadowDy="10"
                android:textColor="#383838"
                android:textSize="14sp"
                android:textStyle="bold"
                android:maxLength="15"
                android:typeface="serif" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:34:59.253

我想假设不可能以简单而优雅的方式做到这一点。问题是您输入的类型是`InputType.TYPE_CLASS_TEXT`并且不能更改为，`InputType.TYPE_CLASS_NUMBER`因为您还需要输入字母。

问题是输入法会检查输入的类型，并根据字段输入类型的类型为您提供带有数字或字母的适当键盘。如果您要求输入法为您提供数字键盘并且您已经`EditText`获得焦点，则您不能在代码中强制输入法切换到字母键盘。我可能错了，但这就是我的想法。

问题是您是否可以在编辑文本时要求任何第三方输入法为您提供不同的键盘 - 我认为您不能在代码中这样做。输入法会根据您的情况为您提供数字或字母，`EditText`但您无法动态切换它们，因为输入法不知道您的设计问题。您可以做到这一点的唯一方法是制作自己的输入法，允许您动态切换数字和字母键盘。

# objective-c - NSOperation 子类发布使 Instruments 崩溃

> ID：14318110
> 
> 赞同：1
> 
> 时间：2013-01-14T12:05:11.093
> 
> 标签：objective-c, crash, instruments, nsoperation

我在我的 Mac OS X 应用程序上以`Xcode 4.5`. 我有两个`NSOperation`依赖子类，在将它们添加到进程队列后忘记释放它们。所以我在将它们添加到队列后就释放了它们。该应用程序运行良好。我在 Instruments 上对其进行了分析，但它崩溃了。

```
processQueue = [[NSOperationQueue alloc] init];
NSUInteger max = [[NSUserDefaults standardUserDefaults] integerForKey:@"jobsKey"];
processQueue.maxConcurrentOperationCount = max;
GeocacheDownloadOperation * downloadOp = [[GeocacheDownloadOperation alloc]  initWithGeocache:cache InPath:directoryPath withDelegate:self];        
GeocacheJPGConversionOperation * conversionOp = [[GeocacheJPGConversionOperation alloc] initWithCache:cache WithPath:directoryPath WithDelegate:self];

[conversionOp addDependency:downloadOp];     
[processQueue addOperation:downloadOp];
[processQueue addOperation:conversionOp];

[downloadOp release];
[conversionOp release]; //This line makes Instruments crash 
```

`Instruments`当我想释放最后一个操作时崩溃（参见代码），但应用程序似乎运行良好。

有人有建议吗？是仪器错误还是我编码错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:33:49.000

我发现了错误，但我无法解释为什么它是单独工作而不是在 Instruments 中工作。我在子类中使用了一个已发布的变量，这是我在 NSOperation 子类`NSOperation`的函数中第二次发布的。`dealloc`现在，我`[super dealloc]`不再在`NSOperation`子类中覆盖它并且它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:39:37.610

我的猜测是，conversionOp 在释放时会释放每个依赖项（在这种情况下是 downloadOp）。所以你在两个操作完成后调用[conversionOp release]（这取决于线程的调度方式），所以你过度释放了downloadOp。

# android - 在 android 中使用带有 ASP.NET 服务器的 GCM 推送通知（如何动态获取和发送 id。）

> ID：14318115
> 
> 赞同：1
> 
> 时间：2013-01-14T12:05:28.013
> 
> 标签：android, cloud, google-cloud-messaging

有一些疑问......

```
final String regId = GCMRegistrar.getRegistrationId(this);               // MainActivity.java class 
```

通过此语句，我将动态接收运行此应用程序的设备的注册 ID，从而发送到 Web 服务器。但正如您所说，除了将任何其他识别因素（用户 ID 或电话 ID）发送到网络服务器之外。如何动态获取和发送这些 ID。

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
 for (int i = 0; i < Vars.length; i++) {
            nameValuePairs.add(new BasicNameValuePair(Vars[i][0], Vars[i][1])); 
```

如何动态设置数组维度，因为根据注册的设备，我正在为所有注册的设备设置注册 ID 数组并将其发送到 Web 服务器。请粘贴 GCMIntentService 类的 OnRegistered 和 UnRegistered 方法。

此外，服务器端 .net 开发人员如何将该数组数据发送到 GCM 服务器。现在他正在为多个设备发送 json 格式的注册 ID，但它没有执行。我们收到 404 错误或错误请求。对于使用以下语句的单个注册 ID，它在服务器端执行。

```
string postData = "collapse_key=score_update&time_to_live=108&delay_while_idle=1&data.message=" + value + "&data.time=" + System.DateTime.Now.ToString() + "&registration_id=" + deviceIDs + ""; 
```

请让我知道是否必须传递任何其他 ID。因为让我感到困惑的是，一个应用程序可以被 1000 多个用户安装。将那么多ID存储在数据库中是否有效？？？因为我们的服务器必须将这么多的 id 发送到 GCM 服务器，否则每个人都不会收到推送通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:53:33.637

注册 id 会定期更改。我同意 zhydian id 将不再有效。

对于识别设备，您可以使用唯一的设备编号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:34:08.887

如果您只打算使用该应用程序发送给每个人，那么您不需要存储除 GCM ID 之外的任何其他信息。但是，如果您不单独存储它们，您最终将拥有不再有效的 ID。有时手机会获得新的 id，如果您将它们存储在 1 条记录中，那么您将不知道哪些 id 发生了变化

nameValuePairs 列表将保存表单请求的值。例如 gcmid、OtherUniquePhoneInfo 以及您想要发送的任何其他内容。如果您将所有 GCM Id 存储在 1 条记录中，那么您只需发送 GCM Id。您只需将 1 个字段添加到 nameValuePairs 列表

如果您想发送到所有拥有您的应用程序的设备，那么您必须将每个 ID 发送到 GCM 服务器。

# c# - 使用 .NET sslstream 理解服务器/代理/客户端证书

> ID：14318116
> 
> 赞同：4
> 
> 时间：2013-01-14T12:05:29.600
> 
> 标签：c#, ssl, proxy, certificate, sslstream

我正在使用 C# 创建一个 TCP 代理，使用 TcpListener 作为代理服务器，使用 TcpCLient 进行客户端和代理之间以及代理和目标服务器之间的通信。这真的很好用。

我还必须支持 SSL 和 TLS 加密通信。这几乎可以正常工作。我使用以下代码创建从代理到目标服务器的 SslStream：

```
var sslStream = new SslStream(remoteStream, false);
sslStream.AuthenticateAsClient(state.RemoteHost); 
```

我使用以下代码创建了一个从代理到客户端的 SslStream：

```
var sslStream = new SslStream(state.ClientStream, false);
sslStream.AuthenticateAsServer(certificate, false, SslProtocols.Tls | SslProtocols.Ssl3 | SslProtocols.Ssl2, true); 
```

证书从 X509Store 加载：

```
X509Certificate2 certificate;
var store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly);
var certificates = store.Certificates.Find(X509FindType.FindBySubjectDistinguishedName, "CN=localhost", false);
store.Close();

if (certificates.Count == 0)
{
    Console.WriteLine("Server certificate not found...");
    return;
}
else
{
    certificate = certificates[0];
} 
```

如果我强制客户端手动信任证书，这也很有效。

我的问题是：

1.  如何强制（所有）客户端信任证书？
2.  我在代理上需要哪种证书对所有客户端都有效？
3.  如果需要，我必须安装哪种客户端证书才能强制客户端信任代理？
4.  如何使用 openssl 或 makecert 创建所需的代理类型？

我不想隧道 SSL 通信抛出代理，因为我需要读取和操作流。

[更新] 是的，我使用了 Google 和 StackOverflow 中的搜索，我尝试了一些不同的解决方案，但没有成功。我还尝试了以下线程中的解决方案：

[SSLStream 示例 - 我如何获得有效的证书？](https://stackoverflow.com/questions/9982865/sslstream-example-how-do-i-get-certificates-that-work)

[如何在 C# 中识别我的服务器名称以供客户端进行服务器身份验证](https://stackoverflow.com/questions/12120630/how-do-i-identify-my-server-name-for-server-authentication-by-client-in-c-sharp)

[UPDATE2] 这是使用 openssl 创建 CA 和服务器证书的非常好的教程，但它对我不起作用： [http ://webserver.codeplex.com/wikipage?title=HTTPS&referringTitle=Home](http://webserver.codeplex.com/wikipage?title=HTTPS&referringTitle=Home)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:00:58.910

没有对所有请求都有效的单一证书。所以我的想法行不通。因为不可能为每个域名生成一个许可证。

但答案比预期的要容易：为了解决我的问题，我必须为每个请求创建一个证书。

我需要做的就是：

*   创建自签名根证书作为证书颁发机构
    *   将其安装在客户端“受信任的根证书颁发机构”商店中。
*   为每个传入请求即时创建服务器证书
    *   使用根证书树签署此证书以设置颁发者
    *   如果需要，我可以将证书缓存在文件或系统证书存储中。

（这在 fiddler 中是完全一样的）

# html - 从两个 MySQL 表中填充 html 选择组合框

> ID：14318122
> 
> 赞同：0
> 
> 时间：2013-01-14T12:05:46.537
> 
> 标签：html, mysql, select

我有两张表，一张给管理员，一张给用户。我想要一个包含管理员和用户的 html 选择框。我只想要活动用户/管理员，该用户/管理员在 foo 表中也有一个条目。到目前为止，这是我的 MySQL 查询：

```
SELECT * FROM users u, admins a, foo f WHERE u.active ='1' AND (a.admin_id = f.admin_id OR u.user_id = f.user_id) 
```

不幸的是，这得出了一个无意义的结果。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:45:44.957

我猜你的桌子是这样设置的。

```
foo (user_id, admin_id, ...)
users (user_id, active, ...)
admin (admin_id, active, ...) 
```

如果是这种情况，那么除了重新考虑您的数据库设计（为所有用户分配一个表，每个用户都被分配一个 user_level）之外，您还可以尝试`UNION`

```
SELECT users.user_id AS id
FROM foo INNER JOIN users ON foo.user_id = users.user_id
WHERE users.active = '1'
UNION
SELECT admins.admin_id
FROM foo INNER JOIN admins ON foo.user_id = admins.admin_id
WHERE admins.active = '1' 
```

# java - Guava Lists.transform - 如果一个输入不好怎么办？

> ID：14318124
> 
> 赞同：1
> 
> 时间：2013-01-14T12:05:51.143
> 
> 标签：java, collections, exception-handling, guava

我正在使用[Lists.transform](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#transform%28java.util.List,%20com.google.common.base.Function%29)方法。在此我有一个字符串输入和一个 CustomObject 输出。字符串输入应包含一个冒号。然后我在这个冒号上拆分，然后从字符串的两个部分创建自定义对象。

所以输入是

```
a:b
c:d
e:f 
```

并且输出是三个 CustomObject 包含`a, b` `c, d`和`e, f`

我的代码类似于

```
return new ArrayList(Lists.transform(groups, new Function<String, CustomObject>() {
        @Override
        public CustomObject apply(String input) {
            String[] split = input.split(":");
            String one = split[0];
            String two = split[1];
            return new CustomObject(one, two);
        }
    })); 
```

我的问题是我收到的列表来自用户。如果我输入错误，我想跳过列表中的那个项目

所以如果输入列表包含

```
a:b
d
e,f
g:h 
```

然后我想要两个 CustomObject 包含`a:b`和`g:h`

这在番石榴中可行吗？

如果我以冗长的方式执行此操作，我将在 for 循环中继续并记录错误。

例如作为伪代码

```
for loop {
   if no colon present
      continue;
   create CustomObject
} 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T12:17:48.127

如果你真的不想走“经典”的方式，你总是可以在转换之前使用[Iterables.removeIf](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#removeIf%28java.lang.Iterable,%20com.google.common.base.Predicate%29)。

但是“好的旧循环”方式可能更适合您。Guava 开发人员对滥用这些功能性习语感到不满，因为他们[在此处解释](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)：

> 过度使用 Guava 的函数式编程习惯会导致冗长、混乱、不可读和低效的代码。到目前为止，这些是 Guava 中最容易（也是最常见）被滥用的部分，当你不遗余力地让你的代码“单行”时，Guava 团队会哭泣。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T14:01:23.390

我的方法会更实用，我会使用[`FluentIterable`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/FluentIterable.html)：

```
return FluentIterable.from(groups).transform(new Function<String, CustomObject>() {
        @Override
        public CustomObject apply(String input) {
            String[] split = Iterables.toArray(
               Splitter.on(':').trimResults().omitEmptyStrings().split(input),
               String.class);
            if(split.length!=2) return null; // bad input data
            String one = split[0];
            String two = split[1];
            return new CustomObject(one, two);
        }
    }).filter(notNull()).toImmutableList();
         //   ^^  -- Predicates.* 
```

我会将 Function 和 Splitter 都转换为常量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T14:57:07.217

您可以更改函数以返回 Optional，并使用 Optional.presentInstances()：

```
 return Optional.presentInstances(Iterables.transform(groups, new Function<String, Optional<CustomObject>>() {
        @Override
        public Optional<CustomObject> apply(String input) {
            if (*/ bad input data */) {
                return Optional.absent();
            }
            // ...
            return Optional.of(new CustomObject("", ""));
        }
    })); 
```

# hibernate - 对象引用了一个未保存的瞬态实例 - 在刷新 Hibernate 之前保存瞬态实例

> ID：14318125
> 
> 赞同：4
> 
> 时间：2013-01-14T12:05:55.520
> 
> 标签：hibernate, jakarta-ee, seam2, seam-conversation

我正在使用 Seam 框架。我有 2 个实体：

**请求.java**

```
@Entity
@Table(name = "SRV_REQUEST")
public class Request {

private Long id;

@Id 
@Column(name = "ID_")
public Long getId() {
   return id;
} 
```

和**RequestEvent.java**

```
@Entity
@Table(name = "SRV_REQUEST_EVENT")
public class RequestEvent {

private Long id;
private Request request;

@Id
@GeneratedValue
@Column(name = "ID_")
public Long getId() {
   return id;
}

@ManyToOne
public Request getRequest() {
   return request;
} 
```

当我进行此交易时：

```
Request request = new Request();
// I have to set ID manually
request.setId(12345);

entityManager.persist(request);

RequestEvent event = new RequestEvent();
event.setRequest(request);

entityManager.persist(event); 
```

我收到了这个错误：

```
object references an unsaved transient instance - save the transient instance before flushing: kz.gov.mci.ipsc.services.RequestEvent.request -> kz.gov.mci.ipsc.services.Request 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:12:48.487

尝试这个

```
 Request request = new Request();
    // I have to set ID manually
    request.setId(12345);

    entityManager.persist(request);

    entityManager.flush();//this point is important

    RequestEvent event = new RequestEvent();
    event.setRequest(request);

    entityManager.persist(event); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:19:10.690

尝试在 getRequest 方法上添加 {CascadeType.PERSIST, CascadeType.MERGE}

# sql-server - SQL Server：查明数据库表是否已更改（使用实体框架）

> ID：14318126
> 
> 赞同：3
> 
> 时间：2013-01-14T12:06:01.873
> 
> 标签：sql-server, database, entity-framework, caching, crud

我想找出以下场景的最佳实践：我们有一个使用实体框架（代码优先）创建的数据库表。有一个`DBContext`和一个本地集合用作缓存，对应表中的数据。

我们需要查明是否以及何时有人手动更新数据库（任何 CRUD 操作），以便始终保持缓存与数据库同步。Ops 将访问数据库并且没有办法绕过它 - 所以它必须是一种技术解决方案，而不是 BI 解决方案。如何才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:19:21.813

您可以使用 SqlDependency 对象。

订阅其 onChange 事件，您将能够在数据更改时做出响应。

*   在您的数据库上启用服务代理
*   向您的 asp.net 帐户授予订阅查询通知

# macos - 程序中的杂散“@”

> ID：14318127
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:06:06.943
> 
> 标签：macos, cocoa, qt

我想`NSRunningApplication`在 Mac OS X 上的 Qt 应用程序中使用。我试图将这些头文件包含在`mainwindow.cpp`：

```
#include Cocoa/Cocoa.h
#include Foundation/Foundation.h
#include AppKit/NSRunningApplication.h
#include AppKit/NSWorkspace.h
#include ApplicationServices/ApplicationServices.h
#include "CGWindow.h". 
```

还包括在`.pro`文件中

```
INCLUDEPATH     += /System/Library/Frameworks/Foundation.framework/Headers 
```

但这会产生错误：`stray '@' in program`

```
/System/Library/Frameworks/Foundation.framework/Headers/NSObject.h:6:
In file included from /System/Library/Frameworks/Foundation.framework/Headers/NSObject.h:6,
/System/Library/Frameworks/Foundation.framework/Headers/NSZone.h:8 : error: stray '@' in program. 
```

我的问题是：
如何`NSRunningApplication`在我的应用程序中使用？要包含哪些文件以及在何处/如何删除这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:14:25.103

您需要制作一个 objc 文件。将扩展名更改为 .mm 并使用 objc 指令导入框架：

```
#import <Foundation/Foundation.h> 
```

# ruby - 如何知道类中包含了哪些模块

> ID：14318131
> 
> 赞同：2
> 
> 时间：2013-01-14T12:06:39.780
> 
> 标签：ruby, module, metaprogramming

我想查找特定类中包含哪些模块，不包括其祖先。例如：

```
module M; end
module N; end

class A; include M; end
class B < A; include N; end

p B.included_modules

#=> [N, M, Kernel]
# I want only N 
```

我无法使用`B.included_modules[0]`，因为我不知道包含多少模块`B`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:32:02.987

如果你知道 A 是 B 的超类，那么

`p B.included_modules - A.included_modules`应该给你你正在寻找的东西

`p B.included_modules - B.superclass.included_modules`

```
module M; end
module N; end
module O; end

class A; include M; end
class B < A; include N; include O; end

p B.included_modules - A.included_modules
#=> [O, N] 
```

# google-maps - 如何在 drupal 6 中更新到 google map api 版本 3

> ID：14318134
> 
> 赞同：0
> 
> 时间：2013-01-14T12:06:57.577
> 
> 标签：google-maps, drupal, drupal-gmap

在我的 drupal 站点中，我已经安装了 gmap 模块。但那是在版本 2.115 中。现在我收到一封来自谷歌的邮件，更新了谷歌 API 版本。我已经生成了 API 密钥版本 3。但不知道将它们实现到模块文件中。drupal_set_html_head('$query))) .'" type="text/javascript">');

这个我改成了 drupal_set_html_head('');

同样在 gmap.js obj.map = new GMap2(elem, obj.opts); 改为 obj.map = new google.maps.Map(elem, obj.opts);

但添加后，需要 Javascript 才能查看此地图。正在显示。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:38:29.623

请参阅d.org 上的[此线程](http://drupal.org/node/818638)。有几个补丁和解决方案。

# iphone - 如何在安装期间（部署后）更改应用程序图标？

> ID：14318144
> 
> 赞同：0
> 
> 时间：2013-01-14T12:07:38.347
> 
> 标签：iphone

> **可能重复：**
> [iPhone - 更改应用程序中 info.plist 指向的应用程序图标？](https://stackoverflow.com/questions/1223787/iphone-change-app-icon-pointed-to-by-info-plist-within-the-application)

应用程序图标应在安装期间更改/或/更改图标。我不知道这样做。请问有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:14:50.057

苹果不允许这样做。

您的应用程序转到 iTunes，然后只有您安装它。从那里下载并安装后，您将无法更改它。

# jakarta-mail - JavaMail 不阅读 MimeMultipart 电子邮件

> ID：14318148
> 
> 赞同：0
> 
> 时间：2013-01-14T12:08:02.137
> 
> 标签：jakarta-mail

```
if (contentType.contains("multipart")) {
    // content may contain attachments
    Multipart multiPart = (Multipart) message.getContent();
    numberOfParts = multiPart.getCount();

    for (int partCount = 0; partCount < numberOfParts; partCount++) {

            BodyPart part = multiPart.getBodyPart(partCount);
        String disposition = part.getDisposition();
        InputStream inputStream = null;

        if (disposition == null)
        {

        MimeBodyPart mbp = (MimeBodyPart) multiPart.getBodyPart(partCount);
        if (mbp.getContent() instanceof MimeMultipart){

                MimeMultipart mmp = (MimeMultipart) mbp.getContent();

                messageContent = mmp.getBodyPart(0).getContent().toString();

            //System.out.println("bodyContent " + bodyContent);
        }
          else
        {        
                messageContent = multiPart.getBodyPart(partCount).getContent().toString();
         }
        }
        else if (Part.ATTACHMENT.equalsIgnoreCase(part.getDisposition())) {
            // this part is attachment
            String fileName = part.getFileName();
            attachFiles += fileName + ", ";
            //part.saveFile(saveDirectory + File.separator + fileName);
        }else if (Part.INLINE.equalsIgnoreCase(part.getDisposition())) {
            // this part is attachment
            String fileName = part.getFileName();
            attachFiles += fileName + ", ";
           // mbp.saveFile(saveDirectory + File.separator + fileName);
        }
        else {
            // this part may be the message content
            messageContent = part.getContent().toString();
        }
    }

    if (attachFiles.length() > 1) {
        attachFiles = attachFiles.substring(0, attachFiles.length() - 2);
    }
} else if (contentType.contains("text/plain") || contentType.contains("text/html")) {
    Object content = message.getContent();
    if (content != null) {messageContent = content.toString(); }
} 
```

现在这种类型的消息 text/plain，text/html 变得很好。问题是当邮件有附件并且内容是 HTML 时，电子邮件多部分/相关，然后得到一些新闻而有些没有。我注意到它依赖于这条线：

messageContent = mmp.getBodyPart (0)。获取内容（）。toString();

如果不是“0”是“partCount”，除了一个特定的，如果不是“0”是“1”，我会得到这个特定的并且不向其他人收费。numberOfParts 这个特定消息是“3”，另一个是“2”。我不知道出了什么问题，也许传递了错误的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:11:00.890

我不确定您要解决什么问题，但以防万一这个[JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)可能会有所帮助。

multipart/mixed 和 multipart/related 非常相似，因为它们有一个主要部分和一堆通常被认为是“附件”的其他部分。有时性情会告诉你这是执着，有时不会。一些邮寄者在使用处置方面不是很一致。

一种不寻常的情况是多部分/替代，但听起来这不是您遇到的问题。

# android - android函数'setTextColor'内部泄漏

> ID：14318152
> 
> 赞同：2
> 
> 时间：2013-01-14T12:08:14.353
> 
> 标签：android, memory, memory-leaks

我开发了带有笔划文本的按钮

```
import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint.Join;
import android.graphics.Paint.Style;
import android.text.TextPaint;
import android.util.AttributeSet;
import android.widget.Button;

public class ButtonStrokeText extends Button
{
    private int strokeColor=Color.TRANSPARENT;
    private int strokeWidth=2;

    public ButtonStrokeText(Context context)
    {
        super(context);
    }
    public ButtonStrokeText(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        TypedArray a = context.obtainStyledAttributes(attrs,R.styleable.ButtonStrokeText);
        strokeColor=a.getColor(R.styleable.ButtonStrokeText_textStrokeColor, strokeColor);
        strokeWidth=a.getDimensionPixelSize(R.styleable.ButtonStrokeText_textStrokeWidth, strokeWidth);
        a.recycle();
    }
    @Override
    public void onDraw(Canvas canvas)
    {
        final ColorStateList textColor = getTextColors();

        TextPaint paint = getPaint();

        paint.setStyle(Style.STROKE);
        paint.setStrokeJoin(Join.ROUND);
        paint.setStrokeMiter(10);
        setTextColor(strokeColor);
        paint.setStrokeWidth(strokeWidth);

        super.onDraw(canvas);
        paint.setStyle(Style.FILL);

        setTextColor(textColor);
        super.onDraw(canvas);
    }
} 
```

但是 setTextColor(strokeColor) 内部有泄漏。如果我评论这条线活动没有泄漏，否则我有泄漏。

我的问题是，我怎样才能避免这种泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:17:44.117

我认为你的问题是当你实例化你的`ButtonStrokeText`. `getApplicationContext()`在您的通话中使用而不是`this`（活动上下文）。我可以看到`strokeColor`参考`a`和`a`参考`context`。活动上下文可能会导致泄漏，因此请使用应用程序上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:11:36.287

我解决了这个泄漏使用。

```
@Override
public void invalidate()
{
} 
```

也许它是错误的，但它正在工作）

# asp.net-mvc - 如何更改 MvcScaffolding 生成控制器、视图和存储库的项目和文件夹

> ID：14318159
> 
> 赞同：1
> 
> 时间：2013-01-14T12:09:00.933
> 
> 标签：asp.net-mvc, asp.net-mvc-scaffolding

是否有可能更改 MvcScaffolding 生成存储库、视图和控制器的默认项目和文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:01:53.210

如果您从命令行窗口触发脚手架，则可以

例如：

```
> Scaffold DbContext <modelType> <dbContextName> -Folder /Models/Entities 
```

更多信息[http://blog.stevensanderson.com/2011/01/13/mvcscaffolding-standard-usage/](http://blog.stevensanderson.com/2011/01/13/mvcscaffolding-standard-usage/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:45:38.897

输出文件夹在运行模板的 powershell 脚本中指定。您需要生成自定义脚手架，并将它们设置为默认脚手架。这是我为存储库所做的：

1.  在包管理器控制台中：`Scaffold CustomScaffolder MyRepository`
2.  右键单击解决方案和“在 Windows 资源管理器中打开文件夹”
3.  导航到“packages\T4Scaffolding.1.0.8\tools\EFRepository”
4.  将 ps1 powershell 脚本的内容和 t4 模板文件复制到步骤 1 中创建的 ps1 和 t4 文件中（覆盖脚手架文本）。
5.  更改 ps1 文件中指定的输出路径，例如 `$outputPath = Join-Path Repositories ($foundModelType.Name + "Repository")`
6.  将新的 ps1 文件中指定的模板文件更改为新的模板文件名 eg`Add-ProjectItemViaTemplate $outputPath -Template MyRepository`
7.  将存储库的默认模板更改为新模板：`Set-DefaultScaffolder Repository MyRepository`

视图和控制器应该是类似的过程，除了原始的 ps1 和 t4 文件在“packages\MvcScaffolding.1.0.9\tools”中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T16:33:35.413

关于存储库脚手架：

1.  转到解决方案文件夹中的**packages\T4Scaffolding.1.0.8\tools\EFRepository**。
2.  右键单击**T4Scaffolding.EFRepository**脚本并选择**编辑**
3.  找到行**$outputPath = Join-Path Models ($foundModelType.Name + "Repository")**并用您想要的文件夹名称/路径替换单词“ **Models ”**
4.  关闭并保存脚本

关于其他脚手架（动作、视图等）

1.  与上述步骤相同，只是脚本位于**packages\MvcScaffolding.1.0.9\tools**文件夹中

# c# - FilterExpression 的多个条件

> ID：14318160
> 
> 赞同：12
> 
> 时间：2013-01-14T12:09:01.980
> 
> 标签：c#, dynamics-crm-2011, query-expressions

我正在使用 Condition 表达式，但我无法向`FilterExpression`. 任何人都可以帮忙吗？我在这里发布了我的源代码。

带有过滤器的条件表达式：

```
 // Filter1
FilterExpression filter1 = new FilterExpression();
filter1.FilterOperator = LogicalOperator.And;
filter1.Conditions.Add(new ConditionExpression("A_LogicalName", ConditionOperator.Equal, id1));
filter1.Conditions.Add(new ConditionExpression("B_LogicalName", ConditionOperator.Equal, id2));
query.Criteria.Filters.Add(filter1); 
```

// 过滤器2

```
FilterExpression filter2 = new FilterExpression();
filter2.FilterOperator = LogicalOperator.And;
filter2.Conditions.Add(new ConditionExpression("B_LogicalName", ConditionOperator.Equal, id3));
filter2.Conditions.Add(new ConditionExpression("C_LogicalName", ConditionOperator.Equal, id4));
q_ShoppingCartItemQuantityCheck.Criteria.Filters.Add(filter2); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-14T12:59:26.693

不确定我是否正确理解了您的问题。如果我做对了，你想构建一个像这样的层次表达式：

> (A_logicalName AND B_LogicalName) 或 (B_LogicalName AND C_LogicalName)

那是对的吗？

以下内容不能解决您的问题吗？

```
query.Criteria = new FilterExpression(); 
query.Criteria.FilterOperator = LogicalOperator.Or;

FilterExpression filter1 = query.Criteria.AddFilter(LogicalOperator.And);
filter1.Conditions.Add(new ConditionExpression("A_LogicalName", ConditionOperator.Equal, id1));
filter1.Conditions.Add(new ConditionExpression("B_LogicalName", ConditionOperator.Equal, id2));

FilterExpression filter2 = query.Criteria.AddFilter(LogicalOperator.And);
filter2.Conditions.Add(new ConditionExpression("B_LogicalName", ConditionOperator.Equal, id2));
filter2.Conditions.Add(new ConditionExpression("C_LogicalName", ConditionOperator.Equal, id3)); 
```

另请参阅[MSDN](http://msdn.microsoft.com/en-us/library/gg309410.aspx)上的示例。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-15T07:54:11.710

这是我正在使用的。出于某种原因，我发现它更容易掌握。这可能是因为我使用初始化语法所以 YMMV。

```
...
Criteria = new FilterExpression
{
  FilterOperator = LogicalOperator.Or,
  Filters =
  {
    new FilterExpression
    {
      FilterOperator = LogicalOperator.And,
      Conditions =
      {
        new ConditionExpression("field1", ConditionOperator.NotNull),
        new ConditionExpression("field2", ConditionOperator.NotNull)
      }
    },
    new FilterExpression
    {
      FilterOperator = LogicalOperator.And,
      Conditions =
      {
        new ConditionExpression("field3", ConditionOperator.NotNull),
        new ConditionExpression("field4", ConditionOperator.NotNull)
      }
    }
  }
}
... 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-12-27T16:47:27.113

健康）状况：

```
(A_logicalName AND B_LogicalName) OR (B_LogicalName AND C_LogicalName) 
```

也可以这样表达：

```
FilterExpression filter = new FilterExpression(LogicalOperator.Or);

FilterExpression filter1 = new FilterExpression(LogicalOperator.And);
filter1.Conditions.Add(new ConditionExpression("A_LogicalName", ConditionOperator.Equal, id1));
filter1.Conditions.Add(new ConditionExpression("B_LogicalName", ConditionOperator.Equal, id2));

FilterExpression filter2 = new FilterExpression(LogicalOperator.And);
filter2.Conditions.Add(new ConditionExpression("B_LogicalName", ConditionOperator.Equal, id2));
filter2.Conditions.Add(new ConditionExpression("C_LogicalName", ConditionOperator.Equal, id3));

filter.AddFilter(filter1);
filter.AddFilter(filter2);

query.Criteria = filter; 
```

可以在[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.query.queryexpression.aspx)上找到更复杂的查询。

# javascript - 为什么我不能在屏幕或 Forever 中运行 node.js 和 socket.io？

> ID：14318164
> 
> 赞同：1
> 
> 时间：2013-01-14T12:09:28.317
> 
> 标签：javascript, node.js, ubuntu, express, socket.io

我遇到了一些烦人的问题，那就是我在屏幕上运行 nodejs 时遇到了麻烦。因为只要我离开屏幕并且没有连接任何套接字，下一个要连接的人将面临错误消息，直到再次打开屏幕。一旦屏幕打开`screen -R node`（例如），它将再次开始接受连接。

但是请注意，如果屏幕关闭（在后台运行）并且有人已经打开了套接字，它将继续响应新连接。

当我尝试再次启动应用程序时，使用命令`node app`我收到以下消息：

```
module.js:340
    throw err;
          ^
Error: Cannot find module '(unreachable)/square_defense/app'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

**服务器端代码**：

```
var app = require('express')()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server);

server.listen(3000);

app.get('/', function (req, res) {
  console.log(__dirname);
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {
    socket.on('user-message', function (data) {
        console.log(data);
        sendMessage.call(socket, data.message);
    });
});
var sendMessage = function(message) {
      this.emit('server-message', {message: message});
      this.broadcast.emit('server-message', {message: message});
} 
```

我已经尝试了很多东西，比如在app.js`npm install app`的目录中。`..`无法理解为什么它不想工作。我真的只是想要一个服务器，我可以将它用于测试目的而不会崩溃。

**编辑：**我认为这与加密的主文件夹有关？

我认为无法访问的文件夹是问题所在。错误：找不到模块“ **（无法访问）** /square_defense/app”。但我不知道为什么会这样。现在，我正在使用 Forever 运行该应用程序，并且只要我有一个 ssh-session 就可以工作。但是一旦我退出连接并重新加载页面。它会产生一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:01:45.080

正如你所说，你的主目录是加密的，根据[来自 Ubuntu 的文档](https://help.ubuntu.com/community/EncryptedHome)：

> 此目录在登录时自动挂载，并在注销时卸载。

所以你的猜测是正确的，这正是导致错误的原因。`screen`操作系统不会考虑运行分离会话，因为用户仍处于登录状态*。用户的所有 shell 会话结束时，加密的主目录被卸载。

* * *

解决方案：您可以将您的应用程序移动到 以外的目录`$HOME`，然后我认为*GNU Screen*或*永远*可以完成这项工作而不会出错。†</p>

* * *

[* 您可以自行测试：登录、启动`screen`会话、运行类似`vim`、分离；使用命令`w`查看谁登录以及他们在做什么]

[†我认为，如果您为此编写自己的新贵脚本，那么应用程序文件不放置在自动加密的主目录中仍然至关重要。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:53:52.760

由于您已经在 Ubuntu 机器上，我建议使用[Upstart](http://upstart.ubuntu.com/)和[monit](http://mmonit.com/monit/)，如本文所述：http: [//howtonode.org/deploying-node-upstart-monit](http://howtonode.org/deploying-node-upstart-monit)

我唯一添加到组合中的是前端代理服务器（在我的情况下为 HAProxy，但 nginx 也可以），以便在端口 80 上为我的应用程序提供服务。

大约一个月前，我自己在 Amazon EC2 上使用此技术堆栈部署了一个 socket.io/express 应用程序，效果惊人！

**编辑：**

以下是我收集的一些关于使用 node.js/nginx/monit/git 进行正确生产设置的资源：

*   [http://cuppster.com/2011/05/12/diy-node-js-server-on-amazon-ec2/](http://cuppster.com/2011/05/12/diy-node-js-server-on-amazon-ec2/)（很棒的指南，帮了我很多！）
*   [http://howtonode.org/deploying-node-upstart-monit](http://howtonode.org/deploying-node-upstart-monit)

我真的推荐第一个，你可能需要跳过一些部分（比如 npm 模块安装或系统设置），但是关于 nginx/git 和 supervisor 的部分值得一读。

# mongodb - 带有 ignoreNull 和忽略 bool 默认值的 Mongodb C# 驱动程序

> ID：14318165
> 
> 赞同：0
> 
> 时间：2013-01-14T12:09:28.400
> 
> 标签：mongodb, mongodb-.net-driver

将 ignoreNull 和 ignoreDefault 一起设置是不可能的。是否可以设置忽略所有空值和布尔值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:49:29.107

不，这些是相互排斥的。您不需要同时设置这两个，因为一个属性只有 1 个默认值。对于引用类型，它是 null，对于值类型，它是一个值（例如，布尔值是 false）。您应该能够设置 IgnoreIfDefault 并且没问题。

# c# - 以编程方式检查远程服务器 A 和远程服务器 B 之间的“连接性”

> ID：14318166
> 
> 赞同：0
> 
> 时间：2013-01-14T12:09:29.580
> 
> 标签：c#, sql, web-services, tcp, psexec

我们有一个要求（我相信作为构建/部署后验证测试（BVT）的一部分）来测试远程服务器 A 可以“连接”到远程服务器 B。

我想在我的本地开发人员 VM 上使用 C# 开发一个控制台应用程序。然后这应该“连接”到远程服务器 A。然后需要检查远程服务器 A 是否可以“连接”到远程服务器 B（通过从 LOCAL 到远程服务器 A 的原始连接）。

目前，我已经生成了一个简单的“帮助程序”exe，它连接到远程服务器 B（使用先前已知的连接字符串指向远程服务器 B 和 SqlConnection 类）。作为构建过程的一部分（最后），该 exe 被复制到远程服务器 A。构建服务器上的 PSEXEC.exe 然后远程启动远程服务器 A 上的“帮助程序”exe 并检查 %errorcode%。然后，这将确定 BVT 是否应该通过或失败（然后从远程服务器 A 中删除“helper”exe）。

仅供参考，所有机器都运行 Windows Server 2008 R2 x64 Enterprise 并且位于同一个本地域中。我是所有 3 台机器的管理员。

远程服务器 A 是 Web 服务器，远程服务器 B 是 SQL 数据库服务器。本地机器将/确实代表构建服务器。这个测试很简单，就是说“网络服务器能否连接到数据库服务器”。困难在于如何远程做到这一点。

我知道我可以进行系统/集成/端到端测试（使用编码 UI 等），我们正在这样做，但也想考虑这个要求/测试（因为服务器和网络配置等是“共同的责任” “与外部方合作，我们不能保证在我们不知情的情况下任何事情已经/将会发生变化（除了通过服务台流程做出反应））

我采用的过程似乎是 OTT，但似乎确实有效（如果我关闭端口等）。是否有使用 TCPCLient 类或其他东西的完全 .NET 方式来做到这一点？做网络服务并将它们托管在网络服务器上并从构建服务器调用它们怎么样？其他需要考虑的想法和事情非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:04:38.383

为什么不在对 SQL 服务器执行无害操作的 Web 服务器上创建一个测试页面。

例如，该页面可能会执行一个简单的查询（从人员中选择顶部（1）名）。

我可以看到您的问题中标记的网络服务。如果您想验证与托管 Web 服务的服务器或托管 Web 服务的服务器与底层后端服务器（例如数据库）之间的连接，最好的方法（在我看来）是调用一个无害的服务做一个简单的阅读。检索 WSDL 是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:38:56.597

您可以使用管理对象来查询和控制域中的计算机和服务器。 [http://msdn.microsoft.com/en-us/library/system.management.aspx](http://msdn.microsoft.com/en-us/library/system.management.aspx)

SQL Server 包括一些特定于管理 SQL Server 的额外对象。 [http://msdn.microsoft.com/en-us/library/ms220749.aspx](http://msdn.microsoft.com/en-us/library/ms220749.aspx)

如果您有 Linqpad：

```
ManagedComputer mc = new ManagedComputer( "yourserver" );
mc.Dump(); 
```

否则创建一个控制台应用程序并创建一个 ManagedComputer 实例并使用调试器查询计算机的 SQL 服务器，以查看可用信息的种类。

如您所见，这是一个很大的主题...

# magento-1.7 - Magento 在管理员订单视图上显示可配置的产品 SKU

> ID：14318168
> 
> 赞同：1
> 
> 时间：2013-01-14T12:09:32.060
> 
> 标签：magento-1.7, magento-1.6, magento

我想在 Magento 管理员订单视图和 Magento 管理员订单发票部分显示可配置产品 SKU。目前它正在显示简单产品的 sku，但我需要显示可配置的产品 sku 而不是它。请指导我，以便我可以做出相应的更改。

![http://i.stack.imgur.com/E1QWF.png](../Images/e73e1fbcdbc25ac1ac86497128a7b6de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:22:31.537

看看这个块：

```
Mage_Adminhtml_Block_Sales_Items_Column_Name 
```

这个模板：

```
adminhtml/default/default/template/sales/items/column/name.phtml 
```

您可以覆盖该块，或者只是对模板进行一些更改。

如果你看这个：

```
Mage_Adminhtml_Block_Sales_Items_Column_Default 
```

你会看到这里有一个你需要做的例子，这里注释掉了。您可以检查它是否可配置，如果可以，则获取子 SKU 代码。

```
public function getSku()
{
    /*if ($this->getItem()->getProductType() == Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE) {
        return $this->getItem()->getProductOptionByCode('simple_sku');
    }*/
    return $this->getItem()->getSku();
} 
```

# actionscript-3 - Flash 中的 URLLoader 事件

> ID：14318169
> 
> 赞同：0
> 
> 时间：2013-01-14T12:09:34.947
> 
> 标签：actionscript-3, flash

我们可以使用 URLLoader 从服务器发送 HTTP 请求和监听事件。我的问题是 URLLoader 在哪里以及如何调度 complete、progress、ioError 事件？由于在服务器端，我们不调用 dispatchEvent。

代码如下：

```
var loader:URLLoader = new URLLoader();
loader.addEventListener(Event.COMPLETE, completeHandler);
loader.addEventListener(ProgressEvent.PROGRESS, progressHandler);
loader.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
loader.load(new URLRequest("http://example/lookup")); 
```

哪个对象调度上述事件，它在哪里调度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:41:04.623

[它们是由虚拟机触发的，最初它发生在 NPAPI（例如 Gecko API 参考](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference)）的浏览器实现或 chrome 中的 PPAPI 的某个地方（我猜，我不确定） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:09:20.033

`URLLoader`通过 HTTP 标头执行此操作。我对 HTTP 标头并不太熟悉，但我确实知道以下内容（来自经验和阅读 LiveDocs）：

*   `ProgressEvent.PROGRESS`只要下载取得了进展，就会定期发送（在 Flash SDK 中预定义）。它不会在下载的每个字节上分派，也没有任何关于它是如何分派的押韵或理由，除了似乎是一个固定的时间间隔
*   ProgressEvent.PROGRESS 事件的`bytesTotal`属性取自`Content-Length`标头。如果您在请求中发送 Range 标头，它应该否定响应中的 Content-Length 标头，您会得到 0 bytesTotal。您可以通过侦听`HTTPStatusEvent.HTTP_STATUS_RESPONSE`、循环标头并找到 Content-Range 标头来解决此问题。您可以使用 RegEx 从该对象中获取长度。
*   ProgressEvent.PROGRESS 事件的`bytesLoaded`属性在内部处理。URLLoader 将下载的每个字节保存到 a`ByteArray`中，而 bytesLoaded 只是 ByteArray 的`length`属性
*   我不确定是如何`Event.COMPLETE`起火的，但我相信它会在连接断开时发生。
*   `IOErrorEvent.IO_ERROR`根据 Flash SDK 内部预定义的情况进行调度。最常见的是，它会在发生 404 错误时调度。除此之外，我不确定。

除了在每个请求中发送有效的 HTTP 标头以使这些事件正确触发之外，您不必在服务器端执行任何操作。在大多数情况下，一切都在内部处理。

我强烈建议阅读[LiveDocs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)。它们非常详细，并且仍然以非常有用和信息丰富的方式编写，这对于编码文档来说是非常罕见的

# android - 无法接收 android.intent.action.USB_DGTL_MIC_PLUG

> ID：14318172
> 
> 赞同：1
> 
> 时间：2013-01-14T12:09:44.477
> 
> 标签：android, audio, usb, broadcastreceiver, microphone

这里有一个有趣的。安卓 4.1.1。当 USB 麦克风连接（状态 = 1）/断开连接（状态 = 0）时，将发送以下广播：

```
VERBOSE/WiredAccessoryObserver(260): android.intent.action.USB_DGTL_MIC_PLUG: state: 1 name: usb_audio_capture
VERBOSE/AudioService(260): Broadcast Receiver: Got ACTION_USB_DGTL_MIC_PLUG, state = 1 
```

为什么我的广播接收器收不到这个？我确实手动启动了主要活动。

```
<receiver android:name=".UsbMic" android:enabled="true" android:exported="true">
    <intent-filter>
        <action android:name="android.intent.action.USB_DGTL_MIC_PLUG" />
    </intent-filter>
</receiver>

public class UsbMic extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i("Test", "USB Mic");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:30:10.323

> 当 USB 麦克风连接（状态 = 1）/断开连接（状态 = 0）时，将发送以下广播

情况不一定如此，所以你不应该依赖它。
例如，在最近的 Qualcomm 平台上检测到主机供电的 USB 音频附件时发出的意图是 (IIRC) `android.intent.action.ANALOG_AUDIO_DOCK_PLUG`。这并没有说明配件是否有麦克风，因为该检查是由音频 HAL 在内部完成的，不会导致任何意图被广播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:23:28.173

我在 Android API 中找不到 USB_DGTL_MIC_PLUG 作为系统意图，所以我无法自己验证它（似乎是特定于设备的东西）。当您从代码而不是清单注册接收器时，只能接收某些意图。您是否尝试过创建自定义接收器并从您的活动中手动启动它？

```
IntentFilter filter = new IntentFilter();
filter.addAction("android.intent.action.USB_DGTL_MIC_PLUG");

receiver = new UsbMic();       
registerReceiver(receiver, filter); 
```

# ruby - 在 Middleman 中移动博客文章位置

> ID：14318174
> 
> 赞同：6
> 
> 时间：2013-01-14T12:09:50.253
> 
> 标签：ruby, blogs, middleman

我正在为我的网站使用 Middleman Blog gem，但默认情况下，博客文章似乎需要位于`/source`其中，当在 vim 中查看树并尝试在其中找到其他文件之一时，这并不是特别好（例如模板）。

通过查看文档，我看不出是否有任何方法可以移动博客文章，以便将它们存储在其他位置，例如`blog_articles`文件夹或类似位置。

这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T10:28:52.860

将以下内容放入您的 config.rb 文件中。

```
activate :blog do |blog|
  blog.permalink = ":year-:month-:day-:title.html"
  blog.sources = "blog_articles/:title.html"
end 
```

假设您有一个帖子`2012-01-01-example-article.html.markdown`存储在文件夹中`source/blog_articles`。

您现在应该会看到带有此 URL 的帖子：`http://localhost:4567/2012-01-01-example-article.html`。（更改文件时可能需要重新启动中间人`config.rb`。）

请注意，我还必须设置`blog.permalink`，`blog.sources`仅设置并没有解决问题。

额外提示：我`activate :directory_indexes`的`config.rb`文件中有。此设置为您提供了漂亮的 URL，没有`.html`部分。如果你希望你的博客文章也一样，你可以`.html`从你的`blog.permalink`设置中删除。像这样：

```
activate :blog do |blog|
  blog.permalink = ":year-:month-:day-:title"
  blog.sources = "blog_articles/:title.html"
end 
```

现在您可以使用以下 URL 查看您的帖子：`http://localhost:4567/2012-01-01-example-article`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:38:24.887

我搞砸了中间人博客扩展，但因为它相对不透明而放弃了。但是，在查看[源代码](https://github.com/middleman/middleman-blog/blob/master/lib/middleman-blog/extension.rb#L79-L87)时，该选项似乎`prefix`可以为您解决问题？有点不清楚前缀是 URL 前缀还是本地路径前缀：

```
activate :blog do |blog|
  blog.prefix = "/blog_articles"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:07:46.827

通过查看它发生的代码`:sources`，您可以使用一个选项。如果您在源代码中四处寻找，则有一个示例：

[https://github.com/middleman/middleman-blog/tree/master/fixtures/article-dirs-app](https://github.com/middleman/middleman-blog/tree/master/fixtures/article-dirs-app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-01T17:21:53.987

当我对永久链接/源配置选项进行以下更改时，上述解决方案对我有用：

```
blog.permalink = ":title.html"
blog.sources   = "posts/:year-:month-:day-:title.html" 
```

永久链接是它将出现在 Web 浏览器 url 中的位置，其中源是帖子的位置。

使用中间人 3.2.1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-23T13:45:03.910

我在源目录中创建了博客文件夹。然后我创建帖子目录并将我所有的帖子移到那里。来源/博客/帖子/...

然后在 config.rb 里面

```
activate :blog do |blog|
..........
  blog.permalink = "blog/:year/:month/:day/:title.html"
  blog.sources = "blog/posts/:year-:month-:day-:title.html"
  .........
end 
```

# c# - 拆分 WF 实例

> ID：14318175
> 
> 赞同：0
> 
> 时间：2013-01-14T12:10:01.793
> 
> 标签：c#, .net, workflow-foundation-4, workflow-foundation

我有一个工作流服务 (.xamlx)，一种流程图工作流 (WF4)。WF 服务通过 IIS 7 托管。我使用了请求-响应 MEP。服务和运营合同是使用接收活动定义的。工作流实例代表培训请求并包含培训的候选人。培训是多阶段的，每个阶段都以会议结束。我的问题是，如果一些候选人没有参加会议，他需要回到工作流程中的上一步，而其他人则进入下一个阶段。在这种情况下如何拆分实例或如何支持这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:53:10.430

听起来每个学生都可以通过独立于其他人的工作流程拥有自己的一部分。这表明每个学生都应该是一个单独的工作流实例。

# java - 如何处理 JFrame 的提交按钮

> ID：14318185
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:10:35.557
> 
> 标签：java, swing, awt

我有一个问题，我一直在制作一个 Swing 应用程序。

我的问题是关于如何处理`Jbutton`像 a `JOptionPane`，如果可能的话？

我想像处理按钮一样处理所有`JOptionpane`按钮，但是我们在 main 函数中编写的消息`System.out.println("this line executes...how to prevent..");` 这个函数是显示消息，直到`Jframe`可见。

谁能让我知道如何预防和处理按钮功能？尤其是当我单击按钮时它会进一步执行。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.Border;

@SuppressWarnings("serial")
public class InputVerifierExample extends JPanel {
   public static final Color WARNING_COLOR = Color.red;
   private JTextField firstNameField = new JTextField(10);
   private JTextField middleNameField = new JTextField(10);
   private JTextField lastNameField = new JTextField(10);
   JLabel name=new JLabel("Name:");
   private JTextField[] nameFields = { 
         firstNameField, 
         middleNameField,
         lastNameField };
   private JLabel warningLabel = new JLabel("  ");

   public InputVerifierExample() {
      warningLabel.setOpaque(false);

      JPanel namePanel = new JPanel();
      namePanel.add(name);
      MyInputVerifier verifier = new MyInputVerifier();
      for (JTextField field : nameFields) {
         field.setInputVerifier(verifier);
         namePanel.add(field);
      }
      namePanel.add(new JButton(new SubmitBtnAction()));

      setLayout(new BorderLayout());
      add(namePanel, BorderLayout.CENTER);
      warningLabel.setForeground(Color.red);
      add(warningLabel, BorderLayout.NORTH);
   }

   private class SubmitBtnAction extends AbstractAction {
      public SubmitBtnAction() {
         super("Submit");
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         // first check all fields aren't empty
         for (JTextField field : nameFields) {
            if (field.getText().trim().isEmpty()) {
               return ;  // return if empty
            }
         }
         String name = "";
         for (JTextField field : nameFields) {
            name += field.getText() + " ";
            field.setText("");
         }
         name = name.trim();
         JOptionPane.showMessageDialog(InputVerifierExample.this, name, "Name Entered",
               JOptionPane.INFORMATION_MESSAGE);
      }
   }

   private class MyInputVerifier extends InputVerifier {

      @Override
      public boolean verify(JComponent input) {
         JTextField field = (JTextField) input;
         if (field.getText().trim().isEmpty()) {
            warningLabel.setText("Please do not leave this field empty :"+name.getText());
            warningLabel.setBackground(WARNING_COLOR);
            //firstNameField.setText("sorry");
            return false;
         }
         warningLabel.setText("");
         warningLabel.setBackground(null);
         return true;
      }

   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("InputVerifier Example");
      frame.setSize(200, 500);
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new InputVerifierExample());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
            createAndShowGui();
      System.out.println("this line executes...how to prevent..");
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:39:57.947

基本上，你有这样的东西：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class TestButton {

    protected void createAndShowGUI() {
        JFrame frame = new JFrame("Test button");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JButton button = new JButton("Click me");
        frame.add(button);
        frame.setSize(200, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestButton().createAndShowGUI();
            }
        });
        System.err.println("Executed once the button has been clicked");
    }

} 
```

并且您希望在`System.err.println("Executed once the button has been clicked");`按下按钮时执行该行（上面不是这种情况）。

解决方案实际上非常简单：在另一个方法中单击按钮后移动要执行的代码（参见下面的 `proceed()`方法），然后从 调用该行`ActionListener`：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class TestButton {

    protected void createAndShowGUI() {
        JFrame frame = new JFrame("Test button");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JButton button = new JButton("Click me");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                proceed();
            }
        });
        frame.add(button);
        frame.setSize(200, 200);
        frame.setVisible(true);
    }

    protected void proceed() {
        System.err.println("Executed once the button has been clicked");
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestButton().createAndShowGUI();
            }
        });

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:43:13.447

好吧，这个问题不是很清楚，但从你的评论来看，你不想做任何事情，直到 a`JButton`被点击？或者您想在单击按钮后执行任务？

如果是这样，不要把你的进一步代码放在你的主块中，调用一个`function`from块。`actionPerformed`像这样的东西：

```
 public void actionPerformed(ActionEvent e) {
     // first check all fields aren't empty
     for (JTextField field : nameFields) {
        if (field.getText().trim().isEmpty()) {
           return ;  // return if empty
        }
     }
     String name = "";
     for (JTextField field : nameFields) {
        name += field.getText() + " ";
        field.setText("");
     }
     name = name.trim();
     JOptionPane.showMessageDialog(InputVerifierExample.this, name, "Name Entered",
           JOptionPane.INFORMATION_MESSAGE);
     display();///////////this is the function containing further code
     }
    }
    //this is display
    public void display()
      {
      System.out.println("this line executes...how to prevent..");

      } 
```

# fonts - 如何为 apache 服务器添加 http 请求？

> ID：14318186
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:10:41.137
> 
> 标签：fonts

如何为 apache 服务器添加 http 请求？我需要添加一个 http 请求`X-UA-Compatible: IE=7`，基本上我需要将此请求放在网站的每个页面上，因为我的网站[www.earnonlinepk.com](http://www.earnonlinepk.com)的字体在 Internet Explorer 上显示不正确。因此需要为 Internet Explorer 启用兼容模式，以便正确呈现字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:22:10.073

您想要的术语是“HTTP 标头”，而不是“HTTP 请求”。相关文档位于[http://httpd.apache.org/docs/2.4/mod/mod_headers.html](http://httpd.apache.org/docs/2.4/mod/mod_headers.html)。

（我不确定为什么这被标记为“字体”。）

# asp-classic - SumTotal 在每组经典 asp 的末尾

> ID：14318190
> 
> 赞同：0
> 
> 时间：2013-01-14T12:10:48.597
> 
> 标签：asp-classic

我想要做的是在最后一行得到总和。这是一个带有 2 组元素和总和的示例：

我有：

```
1000 (group number)

TitleUm   TitleTres   TitleQuatro
Apple     1           20
Pear      5           12

1001 (group number)

TV        1           20
Mobile    1           12
Car       1           15
Bicycle   1            5

 TOTAL   10           84 
```

* * *

我在寻找：

```
1000 (group number)

TitleUm   TitleTres   TitleQuatro
Apple     1           20
Pear      5           12

 TOTAL    6           32 
```

* * *

```
1001 (group number)

TV        1           20
Mobile    1           12
Car       1           15
Bicycle   1            5

 TOTAL    4           52 
```

* * *

下面的代码几乎做了所有事情，列出了每行的项目和每个值，但它现在确实显示了总和：

```
<table class="Itens">
<%
currentGroupName = ""
previousGroupName = ""
Do Until ItensList.EOF
currentGroupName = ItensList("oito")
Um= ItensList("um")
Tres= ItensList("tres")
Quatro= CCur(ItensList("quatro"))

If currentGroupName <> previousGroupName Then
%>

<tr>
<td><% Response.Write currentGroupName %></td>
</tr>
<tr>            
<th><% Response.Write TituloUm %></th>
<th><% Response.Write TituloTres %></th>
<th><% Response.Write TituloQuatro %></th>
</tr>

<%
End If
%>

<%
Um= CCur(ItensList("um"))
Tres= CCur(ItensList("tres"))
Quatro= CCur(ItensList("quatro"))
%>

<tr>
<td><% Response.Write Um %></td>
<td><% Response.Write Tres %></td>
<td><% Response.Write Quatro %></td>
</tr>

<%
previousGroupName = currentGroupName
ItensList.MoveNext
Loop
ItensList.Close
%>

<tr class="Total">
<td>TOTAL</td>
<td><% Response.Write ShowSumTotalTresHere %></td>
<td><% Response.Write ShowSumTotalQuatroHere %></td>
</tr>
</table> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:23:10.297

将每个添加到循环内的变量中，如下所示：

```
<%
SumSomething = 0

Do Until objRs.EoF
     SumSomething = SumSomething + objRs("SomeValue")
objRs.MoveNext
Loop
%>
...
<tr>
  <td><%= SumSomething%></td>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:23:40.923

您需要在循环时保持一个运行总数，以下面的示例代码为例，我在循环之前声明了两个新变量：

```
Total_Tres          = 0
Total_Quatro        = 0 
```

然后我在你的循环中增加这些：

```
'Maintain Running Total
Total_Tres          = Total_Tres + Tres
Total_Quatro        = Total_Quatro + Quatro 
```

最后，输出总变量：

```
<td>TOTAL</td>
<td><% = Total_Tres %></td>
<td><% = Total_Quatro %></td> 
```

**完整示例（未经测试）**

```
<table class="Itens">
<%
currentGroupName    = ""
previousGroupName   = ""
Total_Tres          = 0
Total_Quatro        = 0
Do Until ItensList.EOF
    currentGroupName    = ItensList("oito")
    Um                  = ItensList("um")
    Tres                = ItensList("tres")
    Quatro              = CCur(ItensList("quatro"))

    If currentGroupName <> previousGroupName Then
        %>
        <tr>
            <td><% = currentGroupName %></td>
        </tr>
        <tr>            
            <th><% = TituloUm %></th>
            <th><% = TituloTres %></th>
            <th><% = TituloQuatro %></th>
        </tr>
        <%
    End If

    Um      = CCur(ItensList("um"))
    Tres    = CCur(ItensList("tres"))
    Quatro  = CCur(ItensList("quatro"))
    %>
    <tr>
        <td><% = Um %></td>
        <td><% = Tres %></td>
        <td><% = Quatro %></td>
    </tr>
    <%
    '#### Maintain Running Total
    Total_Tres          = Total_Tres + Tres
    Total_Quatro        = Total_Quatro + Quatro

    '### Flag current group
    previousGroupName   = currentGroupName
    ItensList.MoveNext
Loop
ItensList.Close
%>
<tr class="Total">
<td>TOTAL</td>
<td><% = Total_Tres %></td>
<td><% = Total_Quatro %></td>
</tr>
</table> 
```

# java - SHIFT + ENTER, & ENTER 在 Java 中的同一组件中

> ID：14318191
> 
> 赞同：2
> 
> 时间：2013-01-14T12:10:53.170
> 
> 标签：java, swing, key, behavior, key-bindings

在我的程序中 hte `SHIFT`+`ENTER`键在文本区域中换行，但是当您删除键的既定行为时`ENTER`程序崩溃，我可以这样做吗？添加`SHIFT`+`ENTER`键的功能并删除 Enter 键的标准行为。我的以下代码是，对于 Enter 键的删除行为：

```
public void removeEnterBehavior(){
    KeyStroke enter = KeyStroke.getKeyStroke("ENTER");
    InputMap inputMap = messageTextArea.getInputMap();
    inputMap.put(enter, "none");
} 
```

对于带有`SHIFT`+`Enter`键的新行，我的代码是：

```
@Override
    public void keyPressed(KeyEvent e) {   
         if(e.getKeyCode() == KeyEvent.VK_ENTER && (e.getModifiers() & InputEvent.SHIFT_MASK) != 0){
             addNewLine();
         }
    } 
```

键也`ENTER`必须调用 keyPressed 方法中的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:33:12.297

你为什么混合`KeyBinding`和`KeyListener`？

不要将`KeyListener`/`KeyAdapter`与 Swing 一起使用。始终使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

你应该做这样的事情来听`SHIFT`+ `ENTER` **（它可以在按键释放或按键按下）**：

```
jta.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, KeyEvent.SHIFT_DOWN_MASK, true), "Shift+Enter released");
jta.getActionMap().put("Shift+Enter released", new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent ae) {
        System.out.println("Shift+Enter released");
    }
}); 
```

重要的部分是：

```
KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, KeyEvent.SHIFT_DOWN_MASK, true) 
```

注意最后两个参数。`true`用于在*释放*`Keybinding`键时添加，但您可以在按下键时使用，并且会出现相同的结果。另一个参数用于何时关闭。*`false``SHIFT`*

 *另外要删除`ENTER`，您应该在按下的**键**上进行：

```
KeyStroke enter = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, false);
InputMap inputMap = jta.getInputMap();
inputMap.put(enter, "none"); 
```

请注意，我使用这意味着在*按下*`false`键时放置键绑定。

 *这是一个例子：

```
public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                JTextArea jta = new JTextArea(20, 20);

                //remove enter pressed
                KeyStroke enter = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, false);
                InputMap inputMap = jta.getInputMap();
                inputMap.put(enter, "none");

                //add shift+enter keybinding can be on pressed or released i.e false or true
                jta.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, KeyEvent.SHIFT_DOWN_MASK, true), "Shift+Enter released");
                jta.getActionMap().put("Shift+Enter released", new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent ae) {
                        System.out.println("Shift+Enter released");
                    }
                });

                frame.add(jta);

                frame.pack();
                frame.setVisible(true);
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:18:04.217

我认为您的问题类似于[带有 keyPressed 的 keyEventIssue](https://stackoverflow.com/questions/14055039/keyevent-issue-on-jtextarea/14055233#14055233)

您应该使用`keyReleased`而不是`keyPressed`避免输入行为。

请检查我在上面链接中的答案，如果它没有帮助或者您的问题是否不同，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T05:38:03.540

这是我用来删除在 enter 和 shift-enter 上工作的默认 JTable 行导航的代码

```
 ActionMap am = table.getActionMap();        
    table.getInputMap(JTable.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,0), "Enter pressed");
    table.getInputMap(JTable.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, InputEvent.SHIFT_DOWN_MASK, false), "Shift+Enter pressed");
    am.put("Enter pressed",null);
    am.put("Shift+Enter pressed", null); 
```

该空值可以由您需要的任何自定义操作（例如 AbstractAction）替换。在我的例子中，我在自定义 JTable 的构造函数上使用了自定义接口参数中的方法。**

# datetime - 将 Go Time 从 UnixDate 转换为 RFC3339 无法保留 TimeZone

> ID：14318193
> 
> 赞同：1
> 
> 时间：2013-01-14T12:10:58.470
> 
> 标签：datetime, go

我正在使用 Go 的时间包将`UnixDate`格式化的时间字符串转换为格式化的时间。`RFC3339`这似乎很容易并且在我的本地机器上运行良好，但是当在远程主机上运行时，时区信息似乎丢失了。

输入时间是澳大利亚东部标准时间 (EST)，似乎被解释为 UTC `time.Parse()`。

[此处](http://play.golang.org/p/FhHHlzuKfm)提供的代码段：

```
package main

import "fmt"
import "time"

func main() {
    t,_ := time.Parse(time.UnixDate,"Mon Jan 14 21:50:45 EST 2013")
    fmt.Println(t.Format(time.RFC3339))  // prints time as Z

    t2,_:=time.Parse(time.RFC3339,t.Format(time.RFC3339))
    fmt.Println(t2.Format(time.UnixDate)) // prints time as UTC
} 
```

我需要专门设置语言环境或其他任何东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:48:35.373

Go 中的时区解析并不总是按预期工作。但这很重要，因为时区缩写名称不明确。例如，您方案中的 EST 是指澳大利亚东部标准时间 (GMT+11) 还是东部标准时间 (GMT-5)？

如果您的当地时间是“澳大利亚东部标准时间”，Go 将假定您指的是当地时间。这就是它在您的本地计算机上工作的原因。但是由于服务器没有将其用作当地时间，因此没有理由假设您的意思是悉尼时间。相反，Go 不选择任何 EST 时区并创建一个名为“EST”但效果为 UTC 的假 time.Location。告诉它最初是 EST 的唯一方法是调用`t.Location().String()`.

time 包的作者写了一个错误报告来解释时区解析是如何工作 [的](http://code.google.com/p/go/issues/detail?id=3604)。

# video - 上传后php sdk检索并存储video_id

> ID：14318194
> 
> 赞同：0
> 
> 时间：2013-01-14T12:11:11.433
> 
> 标签：video, facebook-php-sdk

我目前正在开发一个应用程序，供用户上传视频，然后我想在我的应用程序中显示这些视频。

我一直在看这个方法：http: [//developers.facebook.com/blog/post/515/#video_upload](http://developers.facebook.com/blog/post/515/#video_upload)

我可能错了，但据我了解（并尝试过），用户只能将视频上传到他们拥有管理员权限的页面。因此，除非此类应用程序仅针对页面管理员，否则我不了解操作方法的目的？

但这不是我的主要问题，因为我可以将用户的视频上传到他自己的页面。

我的主要问题在于检索用户上传视频后返回的视频 ID。

当我根据上面提到的 How-to 脚本测试应用程序时，一旦选择了文件并通过表单发送，页面就会以`video_id`这种方式显示：

```
{
id:xxxxxxxx
} 
```

而且我不明白我应该如何在我的 php 脚本中检索它？此外，如何将用户重定向回我的应用程序？

例如，Youtube 的 API`'nexturl'`添加了一个变量`$posturl`以重定向到一个 URL，该 URL 还包括一个`video_id`可通过该`GET`方法访问的变量。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:34:29.043

$data = json_decode(file_get_contents("php://input"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:14:21.417

听起来您需要创建自己的 PHP 脚本来处理表单，并在该脚本中使用 curl 之类的东西将 POST 发送到 facebook，以便您可以捕获响应。

# html - 网页字体渲染

> ID：14318196
> 
> 赞同：1
> 
> 时间：2013-01-14T12:11:16.023
> 
> 标签：html, css, fonts, font-face

我在 Windows 系统上的 Firefox 和 Chrome 中出现字体渲染问题。这是字体：

```
@font-face {
    font-family: 'Museo500';
    src: url('../fonts/museo500/MuseoSans_500-webfont.eot');
    src: local('?'), 
    url('../fonts/museo500/MuseoSans_500-webfont.woff') format('woff'), 
    url('../fonts/museo500/MuseoSans_500-webfont.ttf') format('truetype'), 
    url('../fonts/museo500/MuseoSans_500-webfont.svg#webfontr3rD8cn7') format('svg');
} 
```

这是一个输入类：

```
input {
    font-family: Museo500, sans-serif;
    letter-spacing: 0;
    color: #ff0000;
    margin: 0px;
    padding: 10px;
    font-size: 20px;
    font-weight: normal;
} 
```

我无法理解如何在 IE8 上很好地呈现字体，而在 Firefox 和 Chrome 上，字体无法正确呈现。如果有人可以给我一个建议，我将不胜感激。或者也许是替换 museo500、museo700 的字体。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:31:54.880

我在这里回答了一个类似的问题：[Font-Face Not loaded](https://stackoverflow.com/questions/14287465/font-face-not-loaded/14287894#14287894)

您可能需要通过 .htaccess 或 MIME 类型将类型添加到 IIS。

# javascript - 水平滑动jquery

> ID：14318198
> 
> 赞同：1
> 
> 时间：2013-01-14T12:11:17.720
> 
> 标签：javascript, jquery, css, click

基本上，我目前有一个下拉菜单，当您单击标题时会显示链接。我希望将其更改为水平幻灯片，但我目前仅了解 HTML 和 CSS，换句话说，我不太擅长 jquery/javascript。

所以，是的，这是一个示例（单击类别）[http://newsunken.tumblr.com/](http://newsunken.tumblr.com/) 我希望这样当您单击类别时，类别会从左向右滑动并显示为“CATEGORIES TEES JUMPERS HEADWEAR”菜鸟问题！

```
$('#box').click(function()
{ 
$(this).animate({
    width: '350px'
  }, 300, function() {
    // Animation complete.
  });
}); 
```

和

```
<div id="box" style="width:70px; height: 20px;overflow:hidden; border:1px solid black;">Categories Tees Jumpers Headwear Gift Vouchers</div> 
```

这是我能想出的最好的东西，但不像 newsunken.tumblr.com 上的那样时尚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:29:49.513

我不确定它是否是您正在寻找的东西，但试试这个：

```
$('#box').click(function()
{ 
$(this).animate({
    height: 'toggle',
    width: '350px'
  }, 300, function() {
    // Animation complete.
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:39:20.513

这个脚本可以水平滑动，以防我显示整个页面。请注意 document.ready 功能

```
<html>
<head>
<title>sliding</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function()
{
     $('#box').click(function()
    { 
        $(this).animate({width: '350px'}, 300, function() {
        // Animation complete.
        });
    });    
});
</script>
</head>
<body>
    <div id="box" style="width:70px; height: 20px;overflow:hidden; border:1px solid black;">Categories Tees Jumpers Headwear Gift Vouchers</div>
</body>
</html> 
```

# javascript - jquery .css/.attr/.addClass 不适用于 span 标签

> ID：14318200
> 
> 赞同：4
> 
> 时间：2013-01-14T12:11:27.647
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 jquery 设置跨度的背景颜色。我已经使用了标题中的所有功能，但都给了我一个错误：

> SCRIPT438：对象不支持属性或方法'css'/'attr'/'addClass'

知道如何解决这个问题吗？我想要的只是改变背景颜色，但如果我可以设置类，我更喜欢。

代码：

```
var liList = ul.find('li span');
        $.each(liList, function(index, value){
            if(value.innerText == currPage){
                value.css('background-color', '#D94A38');
            }
        }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T12:15:05.707

[**each()**](http://api.jquery.com/jQuery.each/)函数为您提供对象而`DOM`不是`jQuery`对象

改成

```
$(value).css('background-color', '#D94A38'); 
```

你的代码是

```
var liList = ul.find('li span');
    $.each(liList, function(index, value){
        if(value.innerText == currPage){
            $(value).css('background-color', '#D94A38');
        }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T12:15:03.400

`value`不是 jQuery 对象（它是 DOM 对象）。

这：

```
value.css('background-color', '#D94A38'); 
```

应该：

```
$(value).css('background-color', '#D94A38'); 
```

查看[`.each()`文档](http://api.jquery.com/jQuery.each/)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:17:02.580

我想如果你用 $(value) 替换 value 你的问题就会解决

# rest - 在 cakephp 中使用 Rest 插件时出错

> ID：14318203
> 
> 赞同：0
> 
> 时间：2013-01-14T12:11:32.603
> 
> 标签：rest, cakephp, controller

我在 cakephp 中实现 web 服务。

[我在这里](https://github.com/kvz/cakephp-rest-plugin)找到了一个插件来做到这一点。当我执行安装步骤时，任何尝试访问 controller/action.json 请求我都会收到此错误：

```
Strict (2048): Declaration of RestComponent::initialize() 
should be compatible with Component::initialize(Controller $controller) 
```

它应该兼容是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:39:54.827

覆盖父类方法的类方法应该实现与被覆盖的方法相同的签名，即，中的`intialize`方法`RestComponent`应该如下所示（[https://github.com/cakephp/.../Component.php# L109](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Component.php#L109) ):

```
public function initialize(Controller $controller) 
```

而不是这个（[https://github.com/kvz/cakephp-rest-plugin/...RestComponent.php#L153](https://github.com/kvz/cakephp-rest-plugin/blob/master/Controller/Component/RestComponent.php#L153)）：

```
public function initialize(&$Controller) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:56:18.387

[CakePHP 有一个内置的 REST API](http://book.cakephp.org/2.0/en/development/rest.html)，除非您正在做一些尚未完成的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-07T07:54:32.923

用这个

公共函数初始化（控制器$控制器）

# php - Laravel 连接查询 AS

> ID：14318205
> 
> 赞同：31
> 
> 时间：2013-01-14T12:11:36.570
> 
> 标签：php, mysql, pagination, laravel, eloquent

任何定义`AS`查询的方式？

我尝试了以下方法：

```
$data = News::order_by('news.id', 'desc')
    ->join('categories', 'news.category_id', '=', 'categories.id')
    ->left_join('users', 'news.user_id', '=', 'users.id') // ['created_by']
    ->left_join('users', 'news.modified_by', '=', 'users.id') // ['modified_by']
    ->paginate(30, array('news.title', 'categories.name as categories', 'users.name as username')); 
```

问题是`['name']`from 类别将被替换为 from `users`。有什么方法可以让它们具有不同的名称？

拥有上面的别名...如何创建两个连接都返回的别名`users.name`？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-01-14T14:24:40.490

`paginate()`方法的第二个参数接受要在查询中选择的表列**数组。**所以这部分：

```
paginate(30, array('news.title, category.name')); 
```

必须是这样的：

```
paginate(30, array('news.title', 'category.name')); 
```

**更新** *（在您更改问题后）*

尝试这个：

```
->paginate(30, array('news.title', 'categories.name as category_name', 'users.name as user_name')); 
```

**更新 2** *（再次更改问题后）*

您也可以在表上使用别名：

```
$data = News::order_by('news.id', 'desc')
    ->join('categories', 'news.category_id', '=', 'categories.id')
    ->join('users as u1', 'news.user_id', '=', 'u1.id') // ['created_by']
    ->join('users as u2', 'news.modified_by', '=', 'u2.id') // ['modified_by']
    ->paginate(30, array('news.title', 'categories.name as categories', 'u1.name as creater_username', 'u2.name as modifier_username')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-12T12:19:01.003

对这个问题更简单明了的答案是，我一直在寻找 Eloquent 直接使用表名或列支持别名，例如：

```
$users = DB::table('really_long_table_name AS t')
           ->select('t.id AS uid')
           ->get(); 
```

# algorithm - 绘制多项式

> ID：14318208
> 
> 赞同：0
> 
> 时间：2013-01-14T12:11:54.450
> 
> 标签：algorithm

我有一个多项式形式：

> `w(x) = a +b(x-x1) + c(x-x1)^2*(x-x2) + d(x-x1)^2*(x-x2)^2+....`

有人知道计算这个多项式的快速算法吗？

我想画这个多项式，但首先我必须计算值，但我找不到任何快速有趣的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:37:21.870

我认为没有比迭代整个多项式更快的算法了。由于从您的描述中不清楚您形成术语的确切规则是什么，我无法提供解决方案，但如果您自己想出它会更好。

从我所见，每个连续项的 x 相关部分是通过将您到目前为止所拥有的内容乘以另一个单项式来形成的。如果是这样，请保持循环迭代之间的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:39:57.980

编写一个解析器来获取表达式的各个元素，例如`a`, `b`, `x`,`x1`等和`2`, `*`, `+`, `^`, `(`,`)`等。

然后使用[Shutting-yard 算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)将表达式转换为[Reverse Polish Notation](http://en.wikipedia.org/wiki/Reverse_Polish_notation)。

然后使用堆栈或树对其进行评估。

如果您打算多次计算同一个表达式，您可能希望消除常见的子表达式（例如`x - x1`，重复多次，您可能只计算一次）。也有办法做到这一点。但是在你去那里之前，先看看你没有这样的优化得到的东西是不是真的不够用。

# javascript - 打印 CSS 类的属性列表

> ID：14318209
> 
> 赞同：1
> 
> 时间：2013-01-14T12:11:58.100
> 
> 标签：javascript, getelementsbyclassname

我尝试使用 getElementsByClassName 方法打印特定 CSS 类中的属性值列表，如下所示：

```
<html>
    <head>
        <style>
            .toto {
                width:200px;
                height:50px;
                background-color:red;
            }
        </style>
    </head>
    <body>
        <div id="lol" class="toto"></div>
        <script language="javascript" type="text/javascript">
            var toto = document.getElementsByClassName('toto');
            if (toto) {
                for (int i; i < toto.length; i++)
                    document.write(toto[i]);
            }
        </script>
    </body>
</html> 
```

但在所有情况下，toto.length = 1。我想打印值“200px”、“50px”和“red”。有人可以帮助我吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:14:35.363

我想你误解了什么`getElementsByClassName`。

`getElementsByClassName`返回分配了一个类的所有 HTML 元素（标签） - 在您的示例中，这是一个`div`，这就是为什么`toto.length == 1`.

我不知道任何用于枚举给定 CSS 选择器的属性的 DOM 方法。但是，您可以使用[FireBug](http://getfirebug.com/)或 Chrome 的开发人员工具等工具来检查元素并查看已应用哪些 CSS 规则以及已修改哪些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:16:36.427

如果您通过 JavaScript 获取对元素的引用，您通常只能使用元素的样式属性获取通过内联 CSS 设置的 CSS 属性。通过 CSS 应用的属性不能通过元素作为该元素的属性读取。

但是，您可以[`window.getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)在循环中使用来获取已应用于元素的最终计算 CSS。

在您的情况下，它将类似于：

```
var toto = document.getElementsByClassName('toto');
if (toto) {
   for (int i; i < toto.length; i++)
      // Log the height of each element
      console.log(getComputedStyle(toto[i], null).getPropertyValue("height"));
   }
} 
```

***请注意，浏览器支持有些有限（IE9+）。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:20:21.387

我不会重复其他人已经指出的关于`getElementsByClassName`返回多个元素的内容，但我认为如果您有兴趣了解您的风格中的内容而不是特定元素中的内容（许多通常应用样式）。

这是一个解决方案，即使没有具有类的元素`toto`：

```
function findStyle(selector) {
  for (var i=document.styleSheets.length; i-->0;) {
    for (var j = document.styleSheets[i].cssRules.length; j-->0;) {
      var r = document.styleSheets[i].cssRules[j];
      if (r.selectorText==selector) return r;
    }
  }
}
var style = findStyle('.toto');
console.log(style.style.width, style.style.height, style.style['background-color']); 
```

这将登录控制台`200px 50px red`

[示范](http://jsfiddle.net/ULDEC/)

# android - 创建秒表计时器时钟倒数计时器，图像每秒翻转一次android

> ID：14318210
> 
> 赞同：0
> 
> 时间：2013-01-14T12:12:14.833
> 
> 标签：android, image, timer, countdown, stopwatch

我在网上看了很多，但只找到了如何每秒更改文本或显示甚至几毫秒的示例。

当秒变时，我正在使用这些示例来更改图片，但计时器不再准确。在图像更改时，应用程序会随机延迟大约 20 毫秒或 200 毫秒响应。

我正在使用 Runnable 类`postDelay`和`AsynTask`where`onPostExecute`刷新 UI，但两者在延迟时的工作方式完全相同。

每秒更换图片的最佳做法是什么？在未来，我有一个想法，每秒开始 5 张图像的动画（更花哨的时钟计时器）。

我会发布我的代码，但现在真的是我到目前为止找到的所有示例的混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:19:01.453

好吧，您还没有共享代码，所以我只能猜测，

我建议已经将图像作为**位图或可绘制对象初始化，可能在哈希表中。**

之后，启动您的计时器并将替换图像的代码放置在正确的位置。 **重点是除了替换线程中的图像之外，您不应该花时间。**

**编辑：** 如果你想通过代码做到这一点：

在开始你的动画之前创建一个位图数组而不是可绘制的 ids（或 Drawble 类的对象）。为什么，因为您需要节省系统花费在从您在数组中提供的 id 创建位图然后设置为您的图像视图的时间。

此外，您可以为此使用 AnimateDrawbles，这是非常容易优化和可靠的。

这是一个[样本](http://android-support-akkilis.blogspot.com/2011/12/animation-drawbles-in-android.html "样本")。只需根据需要调整 xml 中的持续时间变量即可。

# xslt-1.0 - 使用 xslt 实现计数器

> ID：14318213
> 
> 赞同：1
> 
> 时间：2013-01-14T12:12:19.670
> 
> 标签：xslt-1.0

我有这个xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Input>   
<Properties>
  <Type Name="Type1">
    <Property NAME="Prop1"/>
    <Property NAME="Prop2"/>
    <Property NAME="Prop3"/>
  </Type>
  <Type Name="Type2">
    <Property NAME="Prop4"/>
    <Property NAME="Prop5"/>
  </Type>
  <Type Name="Type3">
    <Property NAME="Prop6"/>
  </Type>
  <Type Name="Type4">
    <Property NAME="Prop7"/>
    <Property NAME="Prop8"/>
  </Type>
  <Type Name="Type5">
    <Property NAME="Prop9"/>
  </Type>
</Properties>
 </Input> 
```

我需要使用 xslt 实现一个计数器，它将为我提供所有类型下的总属性计数（在本例中为 9 ）。可以在 xslt 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:05:50.307

> 我需要使用 xslt 实现一个计数器，它将为我提供所有类型下的总属性计数（在本例中为 9 ）。

**不，您不需要实现 counter**。

**只需使用**：

```
count(/*/*/Type/Property) 
```

要回答您的下一个问题：

> 可以在 xslt 中完成吗？

**不，可变变量在函数式语言（XSLT 所属的类别）**中是不可能的——根据定义。**并且没有必要拥有可变变量。**

 **任何可以通过命令方式（使用可变变量）解决的问题，也可以通过函数方式解决——不使用可变变量。**

# xml-namespaces - 在 Nancy 中定义自定义 xmlns

> ID：14318215
> 
> 赞同：2
> 
> 时间：2013-01-14T12:12:47.407
> 
> 标签：xml-namespaces, nancy

在 Nancy .Net REST web 服务中，我需要能够为使用以下代码时生成的 xml-tree 的根元素指定自定义 xmlns:xsd - 这可能吗？：

```
public class RequestModule : NancyModule
{
    Get["/books"] = parameters =>
    {
        return Response.AsXml(List<Book>);
    };
} 
```

使用上面的代码调用 /books 会产生类似于...的输出

```
<ArrayOfBook
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Book>
    ...
    </Book>
    ...
</ArrayOfBook> 
```

Nancy 是否提供将 xmlns:xsd 的值更改为某些自定义架构 url 的可能性？所以我会得到类似...

```
<ArrayOfBook
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://myschemaurl.com/2007/MyCustomXMLSchema">
    <Book>
    ...
    </Book>
    ...
</ArrayOfBook> 
```

如果开箱即用的 Nancy 无法实现上述操作，有人可以指出我可以在 Nancy 框架源代码中更改代码以实现目标的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:37:32.460

Response.AsXml 只是一个返回 XML 的精美助手。您可以自己返回一个 Response 对象，并将 ContentType 和 Content 设置为您想要的任何内容。使用您想要的任何序列化程序，只需将其粘贴在响应中即可

如果您想使用 Response.AsXml，那么您应该考虑实现 ISerializer 并将其注册到 Bootstrapper -> InternalConfiguration => Serializers。Response.AsXml 将使用第一个表示它可以处理 xml 媒体类型的 ISerializer

# google-chrome - Telerik 框架看不到谷歌浏览器

> ID：14318225
> 
> 赞同：0
> 
> 时间：2013-01-14T12:14:03.880
> 
> 标签：google-chrome, testing, telerik

测试使用 NUnit + Telerik 框架

浏览器：Google Chrome v24 + Telerik 的标准扩展

运行测试时出现错误“SetUp: System.IO.FileNotFoundException: Chrome browser is not installed on this machine TearDown: System.NullReferenc”

重新安装 Telerik 和谷歌浏览器没有帮助。

请告诉我，如何解决这个问题？

由谷歌翻译翻译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:18:18.813

问题解决了。

错误原因 - Telerik 不适用于 Google Chrome v.24

安装 Chrome v.20 - 它工作

**UPD：**
在自动浏览器更新到版本 24 之后 - Telerik 工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:27:49.407

重新安装chrome，不要对UAC提示说yes。如果 chrome 以管理员权限安装，因此它安装到程序文件中，最有可能发生什么。Telerik 的测试框架要求 chrome 安装在 %appdata% 中。通过对 UAC 提示说不，对没有管理员提示的安装说是，chrome 将恢复到在 %appdata% 中安装

# javascript - 选择 div 中的所有表单并阻止默认操作

> ID：14318229
> 
> 赞同：0
> 
> 时间：2013-01-14T12:14:19.440
> 
> 标签：javascript, jquery

我想在中途停留中显示我网站的一部分。如果用户没有 javascript，则停留显示为普通网站。

我正在获取网站，`getController`我的问题发生在`handleLinksAndForm`.

```
$("#Popup > a").click(function(e){
        e.preventDefault();
        getController($(this).attr("href").substr(1),element);
    }); 
```

这按预期工作。每当点击 Popover div 中的 Anchor 元素时，都会阻止默认操作，并在弹出框中加载新网站。

```
$("#Popup > form").each(function() {
               alert(this.name);
});
$("#Popup > form").submit(function(e) {
            alert("form");
            e.preventDefault();
            getPostController($(this).attr("action"),$(this).serialize(),element);
            return false;
}); 
```

但是，这部分不起作用。无论是 foreach 部分还是 .submit()。

所以我的问题是：我的错误是什么？如果我使用`$("form").each(function() {...`所有表单都可以识别，但是如果我添加额外的选择器 #Popup 则不会识别。

完整代码：

```
function getController(ctrl,element)
{
    $.get('/service/controller/' + ctrl, function(data){
        handleLinksAndForm(data,element)        
    })
}
function getPostController(ctrl,args,element)
{
    $.post('/service/controller/' + ctrl,args, function(data) {
        handleLinksAndForm(data,element)        
    });
}

function handleLinksAndForm(data,element)
{
    element.html(data);
    element.prepend("<div id=\"popupClose\">x</a>");
    centerPopup();
    $("#popupClose").click(function(){
        disablePopup();
   });
    $("#Popup > a").click(function(e){
        e.preventDefault();
        getController($(this).attr("href").substr(1),element);
    });
    $("#Popup > form").each(function() {
           alert(this.name);
        });
    $("#Popup > form").submit(function(e) {
        alert("form");
        e.preventDefault();
        getPostController($(this).attr("action"),$(this).serialize(),element);
        return false;
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:22:42.790

您没有提供任何 html 代码。很难说这里是否还有更多问题，例如是否真的是#popup 的子元素。但首先尝试使用：

```
return false; 
```

反而：

```
e.preventDefault(); 
```

您也可以使用： $("#Popup form") 而不是 $("#Popup > form") 这是更安全的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:26:12.547

发现我的错误：

我有：

```
<table>
<form>
   <tr><td>...</td></tr>
</form>
</table> 
```

正确的方法是：

```
<form>
<table>
    ...
</table>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:21:07.990

我刚刚使用下面的代码进行了测试，并且能够找到子元素。

```
$("form", "#Popup").submit(function(e) {
  alert("form");
  ...
}); 
```

NB 这个语法也调用 .find() 但在眼睛上稍微容易一些。

# git - 如何忽略“git pull”上关于我的本地更改将被合并覆盖的错误？

> ID：14318234
> 
> 赞同：762
> 
> 时间：2013-01-14T12:14:43.180
> 
> 标签：git, git-pull, git-stash

如何忽略 Git pull 上的以下错误消息？

> 您对以下文件的本地更改将被合并覆盖

如果我**想**覆盖它们怎么办？

我已经尝试过类似的东西`git pull -f`，但没有任何效果。

需要明确的是，我只想覆盖特定的更改，而不是所有内容。

* * *

## 回答 #1

> 赞同：579
> 
> 时间：2013-01-14T12:17:14.840

如果你想从你的工作副本中删除所有本地更改 - 包括 git 未跟踪的文件 - 只需存储它们：

```
git stash push --include-untracked 
```

如果您不再需要它们，您现在可以删除该存储：

```
git stash drop 
```

如果您不想隐藏您已经暂存的更改 - 例如使用`git add`- 然后添加选项`--keep-index`。但是请注意，如果这些分阶段的更改与上游的更改发生冲突，这仍然会阻止合并。

* * *

如果您只想覆盖本地更改的特定部分，有两种可能性：

1.  提交您不想覆盖的所有内容，其余部分使用上述方法。

2.  用于`git checkout path/to/file/to/revert`您要覆盖的更改。确保该文件不是通过`git reset HEAD path/to/file/to/revert`.

* * *

## 回答 #2

> 赞同：395
> 
> 时间：2013-01-14T14:04:31.867

好吧，在其他两个答案的帮助下，我想出了一个直接的解决方案：

```
git checkout HEAD^ file/to/overwrite
git pull 
```

* * *

## 回答 #3

> 赞同：365
> 
> 时间：2015-10-01T01:07:30.600

这对我来说可以覆盖所有本地更改并且不需要身份：

```
git reset --hard
git pull 
```

* * *

## 回答 #4

> 赞同：91
> 
> 时间：2020-01-21T18:21:01.947

这里有这么多答案，我不想再添加另一个答案，但以上所有答案都比他们需要的要笨拙。我必须一直这样做，因为 Git 似乎变得困惑并说我修改了未更改的文件（无法恢复，因为它们没有更改，但我无法拉动，因为它们应该已经更改）最简单和到目前为止我发现的最快的是：

```
git stash
git stash drop
git pull 
```

**注意**：**本地**更改将丢失

* * *

## 回答 #5

> 赞同：80
> 
> 时间：2013-10-31T13:45:56.457

这是一个丢弃分阶段更改的解决方案：

```
git reset file/to/overwrite
git checkout file/to/overwrite 
```

* * *

## 回答 #6

> 赞同：79
> 
> 时间：2014-03-18T12:14:51.127

您可以在进行合并之前提交更改，也可以将它们存储起来：

1.  `git stash save`
2.  `git merge origin/master`
3.  `git stash pop`

* * *

## 回答 #7

> 赞同：55
> 
> 时间：2015-08-04T12:38:39.310

如果要放弃对一个文件的本地更改，可以执行以下操作：

```
git checkout -- <file> 
```

然后你可以用最新版本覆盖文件[s]：

```
git pull 
```

* * *

## 回答 #8

> 赞同：32
> 
> 时间：2020-02-11T15:48:00.667

```
git pull --rebase --autostash 
```

> ```
>  -r, --rebase[=false|true|merges|preserve|interactive]
>       When true, rebase the current branch on top of the 
>       upstream branch after fetching. If there is a 
>       remote-tracking branch corresponding to the upstream 
> ```

> ```
>  --autostash, --no-autostash
>       Before starting rebase, stash local modifications away if
>       needed, and apply the stash entry when done 
> ```

* * *

我不知道为什么这还没有回答，但解决方案，如您所见，很简单。这里的所有答案都建议相同：删除/保存您的本地更改并应用上游，然后（如果您`save`）在顶部应用您的本地更改。

什么`git pull --rebase --autostash`是一步一步：

```
1\. your local changes saved by `--autostash`
2\. your local commits saved by `--rebase`
3\. commits from upstream applied to your branch
4\. your local commits are restored on top of upstream
5\. your local changes are restored to working directory 
```

我的情况（可能也是你的）：

我有本地更改（工作目录的更改）：

[![在此处输入图像描述](../Images/462e45a2e95fc322893cf327e2ad8523.png)](https://i.stack.imgur.com/EO6CF.jpg)

当我尝试提取远程更改时出现错误：

[![在此处输入图像描述](../Images/93c5689998ab00e8692cfebb7d2ea244.png)](https://i.stack.imgur.com/KWldG.jpg)

此更改不与本地更改相交：

[![在此处输入图像描述](../Images/4955902f7a1a1897be4a59ef95a846e1.png)](https://i.stack.imgur.com/dxEai.jpg)

因此，当我**自动**`pull --rebase --autostash`保存并应用本地更改时没有任何问题

 **[![在此处输入图像描述](../Images/30d141cdbc78c2e497f775a9f55de51a.png)](https://i.stack.imgur.com/vX1XC.jpg)

现在我的本地更改要低一些： [![在此处输入图像描述](../Images/95d0c92d62c2959e85238737d7866f30.png)](https://i.stack.imgur.com/Csxqj.jpg)

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2014-02-05T06:24:39.287

如果您的存储库包含一些已从以下位置删除的文件`master`：

1.  `git checkout master`
2.  `git fetch origin`
3.  `git reset --hard origin/master`
4.  `git checkout -b newbranch`

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2015-08-20T18:37:29.920

有时，这些都不起作用。烦人的是，由于我认为 LF 的原因，可以*删除*文件，*然后*拉取。并不是我推荐这个解决方案，但如果文件不存在，git 不会无用地通知您您的更改（甚至可能不是更改）将被覆盖，并让您继续。

使用风险自负。

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2018-05-20T07:03:22.150

`git stash save --keep-index`没有为我工作。

下面的命令按预期工作。

```
git reset --hard
git pull 
```

**如果您不需要它们，它会覆盖所有本地更改。**

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2016-03-16T12:41:44.483

在最近的 Git 中，您可以添加`-r`/ `--rebase`on`pull`命令以在获取后将当前分支重新定位到上游分支之上。警告应该会消失，但您可能会遇到一些需要解决的冲突。

* * *

或者，您可以强制签出不同的分支，然后再返回`master`，例如：

```
git checkout origin/master -f
git checkout master -f 
```

然后像往常一样再次拉动它：

```
git pull origin master 
```

使用此方法可以节省您的时间来避免存储 ( `git stash`) 和潜在的权限问题、重置文件 ( `git reset HEAD --hard`)、删除文件 ( `git clean -fd`) 等。此外，上述内容更容易记住。

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2020-12-23T01:26:45.507

尝试这个

```
git fetch --all 

git reset --hard origin/master

git pull origin master 
```

强制拉动对我来说是有效的

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2018-01-14T13:19:33.223

这个问题是因为您在本地对文件/s 进行了更改，并且 Git 存储库中存在相同的文件/s 更改，因此在拉/推之前，您需要存储本地更改：

覆盖单个文件的本地更改：

```
git reset file/to/overwrite
git checkout file/to/overwrite 
```

覆盖所有本地更改（所有文件中的更改）：

```
git stash
git pull
git stash pop 
```

此问题也可能是因为您位于未与主分支合并的分支上。

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2018-06-13T09:49:05.963

`git reset --hard && git clean -df`

**注意**：这将重置并删除所有未跟踪的文件。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2017-04-16T13:54:00.253

这是我解决问题的策略。

**问题陈述**

我们需要对超过 10 个文件进行更改。我们试过了`PULL (git pull origin master)`，但 Git 喊道：

> 错误：您对以下文件的本地更改将被合并覆盖：请在合并之前提交您的更改或存储它们。

我们尝试执行`commit`then `pull`，但它们也没有工作。

**解决方案**

实际上，我们处于*肮脏*阶段，因为文件位于“暂存区”又名“索引区”中，而有些文件位于“头区”又名“本地 Git 目录”中。我们想从服务器中提取更改。

以清晰的方式检查此链接以获取有关 Git 不同阶段的信息：*[GIT Stages](http://rogerdudler.github.io/git-guide/)*

我们遵循以下步骤

*   `git stash`（这使我们的工作目录变得干净。您的更改由 Git 存储在堆栈中）。
*   `git pull origin master`（从服务器拉取更改）
*   `git stash apply`（应用堆栈中的所有更改）
*   `git commit -m 'message'`（提交更改）
*   `git push origin master`（将更改推送到服务器）
*   `git stash drop`（丢弃堆栈）

**让我们了解何时以及为什么需要存储**

如果您处于*脏*状态，则意味着您正在对文件进行更改，然后由于任何原因，您被迫*拉动*或*切换*到另一个分支以进行一些非常紧急的工作，因此此时您不能拉动或切换直到您提交更改。该`stash`命令在这里起到了帮助的作用。

从书*ProGIT*，第 2 版：

> 通常，当您一直在处理项目的一部分时，事情处于混乱状态，您想切换分支以处理其他事情。问题是，您不想提交完成了一半的工作，以便以后可以回到这一点。这个问题的答案是 git stash 命令。Stashing 获取工作目录的脏状态——即修改后的跟踪文件和暂存的更改——并将其保存在未完成的更改堆栈中，您可以随时重新应用。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2016-04-20T12:31:07.830

这对我来说可以丢弃实时远程服务器上的更改并从源代码控制 GitHub 中提取：

```
git reset --hard
git pull origin master 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2015-06-27T10:06:42.610

您可以使用它来覆盖文件

```
git checkout file_to_overwrite 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2017-04-12T09:19:18.057

解决此问题的最佳方法是：

```
git checkout -- <path/file_name> 
```

之后，您可以通过以下方式覆盖文件：

```
git pull origin master 
```

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2017-04-19T11:49:11.630

如果您想在服务器上保留生产更改，只需合并到一个新的配置项中。处理方法如下：

```
git stash
git pull
git stash pop 
```

也许您没有执行所有操作。你可以知道接下来你能做什么。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2013-01-14T12:21:46.583

如果你想覆盖特定的更改，你需要某种方式告诉它你想忘记哪些。

您可以尝试有选择地存储您想要放弃使用的更改`git stash --patch`，然后使用`git stash drop`. 然后，您可以拉入远程更改并正常合并它们。

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2019-10-23T18:00:06.810

出现错误“您对以下文件的本地更改将被合并覆盖”是因为您在本地存储库中有一些尚未提交的更改，因此在从远程存储库中提取之前，只需提交本地存储库中的更改。

假设您的远程仓库有一些分支 xyz，然后您希望将远程仓库 xyz 分支合并到（复制到）本地仓库 xyz 分支，

```
{
git checkout xyz                  //check out to the respective branch in local repo
git commit -m "commiting message" //commit changes if any, in local repo branch xyz
git pull                          //it pulls remote xyz branch into local xyz branch
} 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2019-08-30T00:56:08.403

最简单的解决方案是：

```
git reset --hard && git pull 
```

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2021-07-06T07:51:31.650

**对我来说，这很有效：-**

1.  首先，我清理了所有未跟踪的文件， run-> `git clean -f`。
2.  `git pull`

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2016-06-23T20:36:03.250

我有一个特殊情况：我有一个带有 --assume-unchanged 的​​文件。很难找到，因为`git status`命令没有显示任何更改

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-10-02T17:54:36.030

我是 git 新手，不确定我的解决方案是否是个好主意。

我已经测试了所有答案，但没有一个对我有用！

但我找到了另一个解决方案：

```
1\. Backup both of local and repository versions of the file.
2\. Delete the file from repository.
3\. git add .
4\. git commit
5\. git push 
```

希望这可以帮助。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-05-21T06:02:51.583

我已经尝试过并且成功了，在拉取之前，让您提交所有未提交的文件，那么您将不会收到来自 AS 的消息。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-11-30T12:48:07.860

由于您的分支在 xx 提交后位于 'origin/dev' 后面，并且可以快速转发。试试这个命令：

```
git checkout .
git pullenter code here 
```

希望能解决您的问题。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2017-03-14T14:43:59.210

我忽略了我的仓库中的一个文件，当我这样做时，`git pull upstream master`我得到了以下错误：

> 错误：您对以下文件的本地更改将被合并覆盖：myfile.js 请在合并之前提交您的更改或存储它们。中止

为了解决它，我做了以下

```
git update-index --no-assume-unchanged myfile.js 
```

然后我做`git status`了并收到了这个消息

> 在分支 master 你的分支在 'origin/master' 后面 4 次提交，并且可以快进。（使用“git pull”来更新你的本地分支）
> 
> 未为提交暂存的更改：（使用“git add ...”更新将提交的内容）（使用“git checkout -- ...”放弃工作目录中的更改）
> 
> 修改：myfile.js
> 
> 没有添加到提交的更改（使用“git add”和/或“git commit -a”）

然后我确实`git checkout myfile.js`跟着`git pull upstream master`。这次 git pull 操作成功了。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2017-09-19T19:53:48.273

我从主人那里拉出来时遇到了这个。

我使用 Visual Studio 处理它的方式；

1.  首先，我对我的解决方案执行了撤消提交。
2.  然后我做了 Git 拉取过程。

希望这可以帮助！

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2019-11-26T06:16:06.227

我的解决方案是`delete`来自 IDE 外部的文件将被覆盖，然后`pull`.

（您可以随时备份和手动合并未跟踪的数据）

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2017-05-08T14:38:40.907

如果此错误是由于行尾引起的，

```
git add
git checkout mybranch 
```

将工作。我不太确定它为什么会起作用。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-01-23T21:53:02.013

对于 Pycharm，您可以执行 Git-->Revert 然后拉取。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2020-07-03T07:28:14.387

检查您可以覆盖并丢失本地更改的文件，然后

```
git checkout --ours ${filePath}
git merge upstream/master 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2019-05-06T15:27:38.107

我从 vim 编辑器命令行执行
***:PluginUpdate命令时收到相同的错误消息***

> “请在合并之前提交您的更改或存储它们”

**1.**只是从物理上删除了包含插件的*文件夹*

```
rm -rf ~/.vim/bundle/plugin-folder/ 
```

**2.**并从 vim 命令行重新安装它，
**:PluginInstall!**
因为我的 ~/.vimrc 包含将插件构建到该目的地的说明：

[![在此处输入图像描述](../Images/7d17d58d1a3ace7d1c6606ba12bd2cb7.png)](https://i.stack.imgur.com/70b5j.png)

这创建了正确的文件夹，
并将新包放入该文件夹 ~./.vim/bundle/ ***reinstalled-plugins-folder***
“ **！** ”符号（由于*PluginUpdate*命令不成功）更改
为“ **+** ”符号，然后使用***PluginUpdate***命令。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2018-05-16T21:30:30.033

`git-lfs`如果使用并且文件指针被真实文件覆盖，也会发生此消息。

然后你使用：

```
git stash
git lfs migrate import
git pull 
```

我的案例的全部输出

```
λ git stash
Saved working directory and index state WIP on master: 5d4ad47 Merge branch 'feature/...' into 'master'
Encountered 1 file(s) that should have been pointers, but weren't:
        public/apple-touch-icon.png

λ git pull
Updating 5a4ad44..b25f79d
error: Your local changes to the following files would be overwritten by merge:
        public/apple-touch-icon.png
Please commit your changes or stash them before you merge.
Aborting

λ git lfs migrate import
migrate: Fetching remote refs: ..., done
migrate: Sorting commits: ..., done
migrate: Rewriting commits: 100% (0/0), done
migrate: Updating refs: ..., done
migrate: checkout: ..., done

λ git pull
Updating 5d4ad47..a25c79a
Fast-forward
 public/apple-touch-icon.png | Bin 2092 -> 130 bytes
 public/favicon.ico          | Bin 6518 -> 1150 bytes
 2 files changed, 0 insertions(+), 0 deletions(-) 
```

见[https://github.com/git-lfs/git-lfs/issues/2839](https://github.com/git-lfs/git-lfs/issues/2839)

* * *

## 回答 #37

> 赞同：-3
> 
> 时间：2020-06-15T14:54:12.360

只需提交本地更改并合并 commit -a**

# objective-c - 在目标c中的两个类之间传递静态对象

> ID：14318235
> 
> 赞同：0
> 
> 时间：2013-01-14T12:14:46.133
> 
> 标签：objective-c

有人知道如何在目标 c 中传递静态对象吗？

在java中它类似于：

```
class A {

    static int x;

    ...
}

class B {

    ...

    A.x = 4;

} 
```

类似的东西。

有人知道如何使用 Objective C NSString 实现相同的结果吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:20:01.483

在 Objective-C 中，没有类（静态）变量。您可以做的一件事是使用全局变量，但通常不鼓励这样做：

```
// A.h
extern int x;

// A.m
int x;

// B.m
#import "A.h"
x = 4; 
```

但是，您应该重新考虑您的代码设计，您应该能够在不使用全局变量的情况下摆脱困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:20:07.910

您必须在 .m 的顶部声明您的变量，并为静态变量创建一个 getter 和 setter 并使用它

```
static int x;

+ (int)getX {
    return x;
}

+ (void)setX:(int)newX {
    x = newX;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:20:46.317

Objective-C 没有静态/类变量（请注意，静态方法和类方法之间的区别是微妙但重要的）。

相反，您可以在类对象上创建访问器并使用全局静态来存储值：

```
@interface MyClass : NSObject
+(NSString *)thing;
+(void)setThing:(NSString *)aThing;
@end

@implementation MyClass

//static ivars can be placed inside the @implementation or outside it.
static NSString *_class_thing = nil;

+(void)setThing:(NSString *)aThing {
    _class_thing = [aThing copy];
}

+(NSString *)thing {
    return _class_thing;
}

//...
@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:21:27.097

在 Obj-C 中没有直接的方法。

您需要创建一个将访问静态属性的类方法。

```
// class.h
@interface Foo {

}

+(NSString *) string;

// class.m
+(NSString *) string
{
  static NSString *string = nil;

  if (string == nil)
  {
    // do your stuff
  }

  return string;
} 
```

# url-rewriting - SEO 301 重定向限制

> ID：14318239
> 
> 赞同：4
> 
> 时间：2013-01-14T12:14:58.303
> 
> 标签：url-rewriting, seo

我正在考虑做这样的结构来访问一些假设的页面：

/foo/ID/一些友好的字符串

这里的关键部分是标识页面的“ID”，因此所有不是 ID 的内容都只与 SEO 相关。我还希望所有不是“/foo/ID/some-friendly-string”的东西都重定向到原始链接。例如。：

*   /foo/ID ---> /foo/ID/some-friendly-string
*   /foo/ID/some-friendly-string-blah ---> /foo/ID/some-friendly-string

但是，如果这些链接以某种方式在互联网上的某个地方被“污染”并且蜘蛛开始使用“/foo/ID/some-friendly-string-blah-blah-pollution” URL 访问它们怎么办？我什至不知道这是否会发生，但是如果某个坏人决定在一些知名论坛或类似的论坛上发布数千个这样的“不同”链接，那么谷歌会找到数千个“不同”的 URL 301-重定向到同一页面。

在这种情况下 - 是否会有某种惩罚，或者只要端点是唯一的并且没有内容重复，谷歌是否都一样？

我可能对此有点偏执，但这只是我调查可解释情况的本性:)

谢谢你的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:38:29.217

您使用 301 重定向的方法是正确的。

如果人们通过多个不同的 URL 访问您的网站，301 重定向非常有用。例如，可以通过多种方式访问​​给定 ID 的页面，例如：

*   [http://yoursite.com/foo/ID](http://yoursite.com/foo/ID)
*   [http://yoursite.com/foo/ID/some-friendly-string](http://yoursite.com/foo/ID/some-friendly-string)（首选）
*   [http://yoursite.com/foo/ID/some-friendly-string-blah](http://yoursite.com/foo/ID/some-friendly-string-blah)
*   [http://yoursite.com/some-friendly-string-blah-blah-pollution](http://yoursite.com/some-friendly-string-blah-blah-pollution)

选择其中一个 URL（您已决定这样做`http://yoursite.com/foo/ID/some-friendly-string`）作为首选 URL 并使用 301 重定向将流量从其他 URL 发送到首选 URL 是一个好主意。

我还建议将**规范**链接添加到页面上的**HEAD**部分，例如

```
<link rel="canonical" href="http://yourwebsite.com/foo/ID/some-friendly-string"/> 
```

您可以在以下位置获取有关 301 重定向的更多详细信息：

*   [谷歌网站管理员工具](https://www.google.com/webmasters/tools/home)- 配置 > 地址更改
*   Google 网站管理员工具文档 - [301 重定向](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)

我希望这将帮助您做出有关重定向的决定。

**编辑**

我忘了提一个很好的例子，即 Stack Overflow。此问题的 URL 是， `http://stackoverflow.com/questions/14318239/seo-301-redirect-limits`但您可以使用它访问它，`http://stackoverflow.com/questions/14318239/blahblah`并将重定向到原始 URL。

# facebook - 通过 API 调用更新 Facebook 对象

> ID：14318240
> 
> 赞同：1
> 
> 时间：2013-01-14T12:15:00.543
> 
> 标签：facebook, facebook-graph-api

是否可以从 GRAPH API 更新 Facebook 对象，例如页面的相册。

在我的例子中，我想更新专辑的名称和描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:48:54.003

根据[相册端点的 Facebook 文档，](http://developers.facebook.com/docs/reference/api/album/)无法更新相册的任何字段。

根据我的经验，无法更新图形 API 对象的*字段*。有时您可以更新*连接*，例如能够[更改照片中特定用户的标签位置](http://developers.facebook.com/docs/reference/api/photo/)。

# php - 注意：未定义索引：post_id

> ID：14318247
> 
> 赞同：0
> 
> 时间：2013-01-14T12:15:43.527
> 
> 标签：php

嘿，在我的博客上，我想创建博客文章的标题，并让它可以点击到一个只有该文章的新页面。当我尝试它时，虽然我得到了错误：

> 注意：未定义索引：第 264 行 C:\wamp\www\blog_test\index.php 中的 post_id 调用堆栈 #TimeMemoryFunctionLocation 10.0009322712{main}( )..\index.php:0 ">Fanboy-ism

这是第 264 行：

```
<h3><a href="post.php?post_id=<?php echo $row_getDisplay['post_id']; ?>"><?php echo $row_getDisplay['title']; ?></a></h3> 
```

有谁知道如何解决它，这让我感到困惑。请&&谢谢

编辑：

服务器行为的代码如下：

```
$maxRows_getArchives = 10;
$pageNum_getArchives = 0;
if (isset($_GET['pageNum_getArchives'])) {
  $pageNum_getArchives = $_GET['pageNum_getArchives'];
}
$startRow_getArchives = $pageNum_getArchives * $maxRows_getArchives;

mysql_select_db($database_blog, $blog);
$query_getArchives = "SELECT DISTINCT DATE_FORMAT(news.updated, '%M %Y') AS archive, DATE_FORMAT(news.updated, '%Y-%m') AS link FROM news ORDER BY news.updated DESC";
$query_limit_getArchives = sprintf("%s LIMIT %d, %d", $query_getArchives, $startRow_getArchives, $maxRows_getArchives);
$getArchives = mysql_query($query_limit_getArchives, $blog) or die(mysql_error());
$row_getArchives = mysql_fetch_assoc($getArchives);

if (isset($_GET['totalRows_getArchives'])) {
  $totalRows_getArchives = $_GET['totalRows_getArchives'];
} else {
  $all_getArchives = mysql_query($query_getArchives);
  $totalRows_getArchives = mysql_num_rows($all_getArchives);
}
$totalPages_getArchives = ceil($totalRows_getArchives/$maxRows_getArchives)-1;

mysql_select_db($database_blog, $blog);
$query_getRecent = "SELECT news.post_id, news.title FROM news ORDER BY news.post_id DESC LIMIT 10";
$getRecent = mysql_query($query_getRecent, $blog) or die(mysql_error());
$row_getRecent = mysql_fetch_assoc($getRecent);
$totalRows_getRecent = mysql_num_rows($getRecent);

$maxRows_getDisplay = 1;
$pageNum_getDisplay = 0;
if (isset($_GET['pageNum_getDisplay'])) {
  $pageNum_getDisplay = $_GET['pageNum_getDisplay'];
}
$startRow_getDisplay = $pageNum_getDisplay * $maxRows_getDisplay;

mysql_select_db($database_blog, $blog);
$query_getDisplay = "SELECT  news.post_id, news.title, news.pre,  DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC";
$query_limit_getDisplay = sprintf("%s LIMIT %d, %d", $query_getDisplay, $startRow_getDisplay, $maxRows_getDisplay);
$getDisplay = mysql_query($query_limit_getDisplay, $blog) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);

if (isset($_GET['totalRows_getDisplay'])) {
  $totalRows_getDisplay = $_GET['totalRows_getDisplay'];
} else {
  $all_getDisplay = mysql_query($query_getDisplay);
  $totalRows_getDisplay = mysql_num_rows($all_getDisplay);
}
$totalPages_getDisplay = ceil($totalRows_getDisplay/$maxRows_getDisplay)-1;

mysql_select_db($database_blog, $blog);
$query_getPosts = "SELECT post_id, title, updated FROM news ORDER BY updated DESC";
$getPosts = mysql_query($query_getPosts, $blog) or die(mysql_error());
$row_getPosts = mysql_fetch_assoc($getPosts);
$totalRows_getPosts = mysql_num_rows($getPosts);

$queryString_getDisplay = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_getDisplay") == false && 
        stristr($param, "totalRows_getDisplay") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_getDisplay = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_getDisplay = sprintf("&totalRows_getDisplay=%d%s", $totalRows_getDisplay, $queryString_getDisplay);

$queryString_getArchives = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_getArchives") == false && 
        stristr($param, "totalRows_getArchives") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_getArchives = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_getArchives = sprintf("&totalRows_getArchives=%d%s", $totalRows_getArchives, $queryString_getArchives);

$var1_getDisplay2 = "-1";
if (isset($_GET['archive'])) {
  $var1_getDisplay2 = $_GET['archive'];
  $query_getDisplay = sprintf("SELECT news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y'), news. AS formatted FROM news WHERE DATE_FORMAT(news.updated, '%%Y-%%m') = %s ORDER BY news.updated DESC", GetSQLValueString($var1_getDisplay2, "text"));
} elseif (isset($_GET['post_id'])) {
  $var2_getDisplay3 = $_GET['post_id'];
  $query_getDisplay = sprintf("SELECT news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE news.post_id = %s", GetSQLValueString($var2_getDisplay3, "int"));
} else {
  $query_getDisplay = "SELECT news.title, news.blog_entry, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT ".$pageNum_getDisplay.", 5";
}
$getDisplay = mysql_query($query_getDisplay, $blog) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);
$totalRows_getDisplay = mysql_num_rows($getDisplay);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:17:25.477

我编辑了整个答案，

您没有在查询中选择 post_id：将查询更改为：

```
if (isset($_GET['archive'])) {
  $var1_getDisplay2 = $_GET['archive'];
  $query_getDisplay = sprintf("SELECT news.post_id, news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y'), news. AS formatted FROM news WHERE DATE_FORMAT(news.updated, '%%Y-%%m') = %s ORDER BY news.updated DESC", GetSQLValueString($var1_getDisplay2, "text"));
} elseif (isset($_GET['post_id'])) {
  $var2_getDisplay3 = $_GET['post_id'];
  $query_getDisplay = sprintf("SELECT news.post_id, news.title, news.blog_entry, DATE_FORMAT(news.updated, '%%M %%e, %%Y') AS formatted FROM news WHERE news.post_id = %s", GetSQLValueString($var2_getDisplay3, "int"));
} else {
  $query_getDisplay = "SELECT news.post_id, news.title, news.blog_entry, DATE_FORMAT(news.updated, '%M %e, %Y') AS formatted FROM news ORDER BY news.updated DESC LIMIT ".$pageNum_getDisplay.", 5";
} 
```

这还将在您的代码中选择 post_id 以供进一步参考，这可能会解决您的所有问题。（取决于您的数据库的外观）

添加了 news.post_id 用于从数据库中进行选择。我认为这是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:17:58.350

奇怪的是，此时尚未设置该变量。

但是您可以检查变量是否已设置并回显，如果没有。

例子：

```
echo (isset($row_getDisplay['post_id']) ? $row_getDisplay['post_id'] : ''); 
```

以下是如何在代码中实现它：

```
<h3><a href="post.php?post_id=<?php echo (isset($row_getDisplay['post_id']) ? $row_getDisplay['post_id'] : ''); ?>"><?php echo (isset($row_getDisplay['title']) ? $row_getDisplay['title'] : ''); ?></a></h3> 
```

# angularjs - 卡住创建自定义 css 样式指令

> ID：14318249
> 
> 赞同：8
> 
> 时间：2013-01-14T12:15:56.263
> 
> 标签：angularjs

对于唯一的可视化编辑器，我正在尝试创建一个编写 CSS 样式的新指令。当单击复选框以使 background-color 属性透明时，我一直试图让指令更新。

这是我的（非工作）指令：

```
myApp.directive('customstyle', function () {
return {
    restrict: 'E',
    link: function (scope, element, attrs) {
      var bgColor;
      scope.$watch(attrs.myTransparent, function (value) {
        if (value) {
          bgColor = 'transparent';
        } else {
          bgColor = attrs.myBgcolor;
        }
        updateStyle();
      }, true);

      function updateStyle() {
        var htmlText = '<style>.' + attrs.myClass + '{';
        htmlText += 'background-color: ' + bgColor + ';';
        htmlText += "}</style>";
        element.replaceWith(htmlText);
      }
      updateStyle();
  }
}
}); 
```

和 html 元素：

```
<customstyle my-class="examplediv" my-transparent="settings.Window.Transparent" my-bgcolor="settings.Window.BackgroundColor"></customstyle> 
```

这是一种情况的jsfiddle：http: [//jsfiddle.net/psinke/jYQc6/](http://jsfiddle.net/psinke/jYQc6/)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T14:03:51.373

尝试直接在要更改的元素上使用该指令，它更容易执行和维护。

HTML：

```
<div class="examplediv customstyle" 
     my-transparent="settings.Window.Transparent" 
     my-bgcolor="{{settings.Window.BackgroundColor}}">
</div> 
```

注意：`{{settings.Window.BackgroundColor}}`用于传递属性的值而不是字符串。

指示：

```
myApp.directive('customstyle', function () {
    return {
        restrict: 'AC',
        link: function (scope, element, attrs) {          
           scope.$watch(attrs.myTransparent, function (value) {     
             element.css('background-color', (value ? 'transparent' : attrs.myBgcolor));            
           });                      
        }
    }
}); 
```

注意：用于`element.css()`直接在元素上更改 CSS 属性。

**jsFiddler**：http: [//jsfiddle.net/jYQc6/8/](http://jsfiddle.net/jYQc6/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T22:00:13.550

我遇到了同样的问题，使用 bmleite 的解决方案解决了它。我有一个自定义元素，其自定义属性与上面的非常相似，并且更改了要应用于常规 DIV 的指令，而不是自定义属性为我修复了它。

在我的解决方案中，在元素被修改后，我也有以下代码行：

```
 $compile(element.contents())(scope); 
```

记得在指令函数声明中注入 $compile 服务：

```
 myApp.directive('directiveName', function ($compile) { ... 
```

谢谢你的好帖子！

# c++ - Qt5。QMediaPlayer bufferStatusChanged(int) 的信号不起作用

> ID：14318250
> 
> 赞同：1
> 
> 时间：2013-01-14T12:15:59.813
> 
> 标签：c++, qt, media-player

我的环境是`Qt5 32bit` `Windows 7 64bit` `MSVC 2010 32bit`

我的代码是一个简单的音乐播放器

这是主要代码

```
slider = new QSlider(Qt::Horizontal);
slider->setRange(0, 100);
player->setMedia(QUrl::fromLocalFile("D://test.mp3"));
player->setVolume(50);
...
connect(player, SIGNAL(bufferStatusChanged(int)), slider, SLOT(setValue(int))); 
```

当我运行这个播放器时，它可以播放音乐，但它的值`slider`从未改变。

然后我添加这个：

```
connect(player, SIGNAL(bufferStatusChanged(int)), slider, SLOT(helloWorld(int)));
...
void player::helloWorld(int)
{
    qDebug() << "hello, world";
} 
```

我再次运行它，发现字符串`hello, world`永远不会被打印。

没有打印任何东西。

为什么`slider`不改变值？

-------------------------完整代码------------------------ ---

```
#include "mainwindow.h"

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
{

    mainWidget = new QWidget();
    HLayout = new QHBoxLayout();
    VLayout = new QVBoxLayout();

    playButton = new QPushButton("Okay");
    exitButton = new QPushButton("Exit");
    slider = new QSlider(Qt::Horizontal);
    player = new QMediaPlayer();

    connect(playButton, SIGNAL(toggled(bool)), this, SLOT(playOrPause(bool)));
    connect(player, SIGNAL(bufferStatusChanged(int)), slider, SLOT(setValue(int)));
    connect(player, SIGNAL(bufferStatusChanged(int)), this, SLOT(test(int)));
    player->setMedia(QUrl::fromLocalFile("D://test.mp3"));
    player->play();
    player->setVolume(50);
    slider->setRange(0, 100);

    //UI
    exitButton->setAutoDefault(true);
    playButton->setAutoDefault(true);
    playButton->setCheckable(true);

    HLayout->addStretch();
    HLayout->addWidget(playButton);
    HLayout->addWidget(exitButton);

    VLayout->addWidget(slider);
    VLayout->addStretch();
    VLayout->addLayout(HLayout);

    mainWidget->setLayout(VLayout);

    setCentralWidget(mainWidget);
    setWindowIcon(QIcon(":/icons/icon.png"));
    setWindowTitle("YUCOAT");

    //connect(playButton, SIGNAL(toggled(bool)), this, SLOT(playOrPause(bool)));
    //connect(player, SIGNAL(bufferStatusChanged(int)), slider, SLOT(setValue(int)));

}

MainWindow::~MainWindow()
{

}

void MainWindow::playOrPause(bool s)
{
    if (s)
        player->play();
    else
        player->pause();

}

void MainWindow::test(int s)
{
    qDebug() << "hello, world!";
    qDebug() << s;
    qDebug() << player->mediaStatus();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:27:57.283

根据[文档](http://doc.qt.digia.com/qtmobility/qmediaplayer.html#bufferStatus-prop)：

> 当播放器对象正在缓冲时；此属性保存已填充的临时缓冲区的百分比。缓冲区需要达到 100% 填充才能恢复播放，此时 MediaStatus 将为 BufferedMedia。

您在加载媒体**后**建立连接，因此缓冲区可能已经处于某种`QMediaPlayer::BufferedMedia`状态，因此不会发出信号。您可以通过在连接前打印[媒体状态来检查它：](http://doc.qt.digia.com/qtmobility/qmediaplayer.html#mediaStatus-prop)

```
qDebug() << player->mediaStatus(); 
```

# amazon-web-services - 配置 cloudwatch 警报 - 警报操作选项

> ID：14318252
> 
> 赞同：1
> 
> 时间：2013-01-14T12:16:06.687
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudwatch

我是 aws 新手，我正在尝试使用 mon-put-metric-alarm 命令为我的扩展组创建一个监视器，我的问题是我不了解警报操作选项，这似乎很重要。

我已经在许多博客和用户指南中看到过这个选项，但我不知道这些值来自哪里。

我已经设置了一个启动配置和自动缩放组，请您指出正确的方向，以了解我将如何确定 mon-put-metric-alarm 命令的警报操作选项的值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:43:16.737

事实证明我需要使用 as-put-scaling-policy 命令。

谢谢。

# c# - 如何使用对话框保存文件？

> ID：14318253
> 
> 赞同：-2
> 
> 时间：2013-01-14T12:16:09.463
> 
> 标签：c#

我正在尝试使用下面的代码保存打印屏幕，但它不起作用

```
 private void button3_Click(object sender, EventArgs e)
    {

        SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            button1.Visible = false;
            button2.Visible = false;
            Bitmap bitmap = new Bitmap(this.Width, this.Height);
            this.DrawToBitmap(bitmap, this.ClientRectangle);
            bitmap.Save("myPrintScreen.bmp");
            button1.Visible = true;
            button2.Visible = true;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:19:17.630

使用[SaveFileDialog](http://msdn.microsoft.com/de-de/library/system.windows.forms.savefiledialog.aspx)

```
 SaveFileDialog saveFileDialog1 = new SaveFileDialog();
 if(saveFileDialog1.ShowDialog() == DialogResult.OK)
 {
     // Save file, use saveFileDialog1.FileName
 } 
```

您可以使用`Filename` [Property](http://msdn.microsoft.com/de-de/library/system.windows.forms.filedialog.filename.aspx)设置文件名。对于您的示例：

```
saveFileDialog1.FileName = "myPrintScreen.bmp"; 
```

[编辑问题后编辑] 更改

```
this.DrawToBitmap(bitmap, this.ClientRectangle); 
```

至：

```
using(var Stream = saveFileDialog1.OpenFile())
{
    bitmap.Save(Stream , ImageFormat.Bmp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:19:32.093

您需要[SaveFileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.aspx)。看看那里提供的示例。

# java - 结合两个java正则表达式

> ID：14318255
> 
> 赞同：4
> 
> 时间：2013-01-14T12:16:16.773
> 
> 标签：java, regex, string, replace, replaceall

第一次必须使用正则表达式，虽然我几乎达到了我的要求，但我似乎无法组合成一个语句。

`\n`如果前面没有点或前面没有点空格，我希望替换一串单词。

我可以运行这两个语句中的任何一个来实现所需的结果。但是，如果我一个接一个地运行它们或尝试将它们组合成一个正则表达式，它就不起作用。

```
//replaces \n if not preceded by dot space
xx = xx.replaceAll("(.+)(?<!\\. )\n", "$1 ");

//replaces \n if not preceded by dot
xx = xx.replaceAll("(.+)(?<!\\.)\n", "$1 "); 

//one of my attempts to combine into a single statement
xx = xx.replaceAll("(.+)(?<!\\. )\n|(?<!\\.)\n", "$1 "); 
```

我正在尝试修复的字符串示例。

前

```
这是一些可能\n
有一个换行符来换行\n
但我只想在它前面没有完整的情况下删除它。\n
或者它前面没有句号和空格。\n

```

后

```
这是一些可能
有一个换行符来换行
但我只想在它前面没有完整的情况下删除它。\n
或者它前面没有句号和空格。\n

```

我想我已经很接近了，但是对于正则表达式的新手，我读的越多，我就越困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:21:34.007

这比你想象的要容易：

```
String resultString = subjectString.replaceAll("(?<!\\. ?)\n", " "); 
```

**解释：**

```
(?<!   # Assert that the previous characters are not...
 \.    # a dot
 [ ]?  # optionally followed by a space
)      # End of lookbehind
\n     # Match a newline character 
```

因此，您不需要首先匹配`(.+)`，只需在之后将其替换为自身即可。顺便说一句，这就是让你绊倒的地方：

```
(.+)(?<!\. )\n|(?<!\.)\n 
```

在逻辑上被分组为

```
(.+)(?<!\. )\n   # Match this
|                # or
(?<!\.)\n        # this 
```

所以`(.+)`只有在点后没有空格时才匹配。

# android - Google Maps Android API v2 如何处理视图外的标记是

> ID：14318258
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:16:38.727
> 
> 标签：android, google-maps-android-api-2

在 CameraChange 事件期间，我向地图添加了新标记，因此我想知道当它们随着相机移动而变得不可见时是否会自动删除它们。

有人有这个信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:51:34.610

您的意思是，平移地图时是否会删除标记以使标记不再出现在屏幕上？如果是这样，答案是否定的，即使“屏幕外”，标记仍然“在地图上”。

如果您想在标记移出地图时删除它们，请参阅我对[这个问题的回答](https://stackoverflow.com/questions/13713066/google-maps-android-api-v2-very-slow-when-adding-lots-of-markers)

# eclipse - Eclipse juno：javaw.exe 多次引用 wc.db - 导致锁定

> ID：14318270
> 
> 赞同：1
> 
> 时间：2013-01-14T12:17:25.733
> 
> 标签：eclipse, locking, subversive

当我使用 时`eclipse juno`，我的 Eclipse 经常冻结，或者我的 Eclipse 失去了与项目的 svn 连接。巧合的是`svn info`，我在我的项目的命令行上执行了一个并且返回了一个：

```
svn: E200033: database is locked, executing statement 'PRAGMA synchronous=OFF;PRAGMA recursive_triggers=ON;' 
```

当我搜索谁指的是`wc.db`（我使用`procexp.exe`）时，我注意到日食`javaw.exe`有多个相同的引用`wc.db`。当我关闭 eclipse 或杀死 javaw 时，锁确实被删除了（svn info 返回正常信息）。

在eclipse中我使用颠覆性的。

更新：一段时间以来，我使用 subclipse svn 插件而不是颠覆性插件，这为我“解决”了这个问题。

# javascript - 如何禁用引导样式

> ID：14318278
> 
> 赞同：0
> 
> 时间：2013-01-14T12:18:20.297
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我`modal.js`从引导程序中使用，但在隐藏模式后，我的 div 看起来像它有一个蓝色边框：

![在此处输入图像描述](../Images/8e43de64986db2a0962a20bb6e8b6a33.png)

如何在 .js/.css 中禁用或删除此边框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:35:59.640

大多数浏览器都内置了 Web 开发工具。

Chrome 和 IE 内置了自己的开发工具，但 FireFox 有 Firebug（您必须将其作为扩展安装）。

使用这些工具，您可以“检查” DOM（文档对象模型）并查看 CSS 样式是如何应用的。

这是来自 Chrome 的屏幕截图（通过单击左侧的标签，您将在右侧的“Computed Style”和“Styles”下看到应用了哪些 CSS）：

![在此处输入图像描述](../Images/3855bad2855aa80f9e647e054008f226.png)

在您的情况下，您必须遍历 DOM，直到找到您要查找的 div，然后查看哪个 CSS 选择器正在应用您要删除的边框。

# pagination - 在不订阅整个集合的情况下获取客户端的集合大小

> ID：14318284
> 
> 赞同：2
> 
> 时间：2013-01-14T12:18:47.477
> 
> 标签：pagination, meteor

我正在尝试为我的应用设置分页。除了获取页数外，大多数事情都可以正常工作。分页的要点是在客户端请求之前不要将完整集合发送给客户端，因此我限制订阅服务器端。因此，收集`.count()`总是受限于客户端上的页面大小。

我尝试过这样的事情，但它不起作用：

```
Meteor.publish 'count', -> Items.find().count() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:28:06.270

基本上，您需要一个由自定义发布功能提供的仅限客户端的集合。请参阅[http://docs.meteor.com/#meteor_publish](http://docs.meteor.com/#meteor_publish)关于如何执行此操作的第二个示例。使用此方法，您无需任何相应的服务器端集合即可生成数据。

沿着这些思路：

```
Meteor.publish("counts", function() {
  var self = this,
      count = 0,
      uuid = Meteor.uuid();

  var handle = TargetCollection.find({}).observe(function() {
    added: function() {
      // Document added, increase count and push it down the pipe.
      count++;
      self.set("counts", uuid, {count: count});
      self.flush();
    },
    removed: function() {
      // Document removed, decrease count and push it down the pipe.
      count--;
      self.set("counts", uuid, {count: count});
      self.flush();
    }
  }
  // Observe only returns after the initial added callbacks have
  // run.  Now mark the subscription as ready.
  self.complete();
  self.flush();

  // stop observing the cursor when client unsubs
  self.onStop(function () {
    handle.stop();
  });
} 
```

# d3.js - 坚持使用 D3 V3 缩放行为文档

> ID：14318286
> 
> 赞同：1
> 
> 时间：2013-01-14T12:18:49.313
> 
> 标签：d3.js, zooming

我是 D3 库的新手，我一直在缩放图表。

我在多个图表上正确显示了我的数据。但是当我放大时，一切都出错了。我不知道我是否错过了域或范围或任何东西......所以我问。

你可以在这里找到我的代码演示：http: [//pastehtml.com/view/cos13vodt.html](http://pastehtml.com/view/cos13vodt.html)

这是 jsFiddle 示例：http: [//jsfiddle.net/84mSQ/](http://jsfiddle.net/84mSQ/)

我的JS代码在那里：

```
var margin = {top: 30, right: 150, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

//To parse dates as they are into the CSV
var parseDate = d3.time.format("%Y/%m/%d-%H:%M").parse;

var format = d3.time.format("%d/%m/%y-%H:%M");

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var color = d3.scale.category10();

var xAxis = d3.svg.axis().scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis().scale(y)
    .orient("left")/*.ticks(30)*/;

var zoom = d3.behavior.zoom()
    .x(x)
    .scaleExtent([1, 2])
    .on("zoom", function(scale, translate){
        console.log("fonction zoom");
        console.log(scale); console.log(translate);
        zoomed(scale, translate);
    });

// A line generator.
var line = d3.svg.line()
    .interpolate("basis")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.value); });

var svg = d3.select("body")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
    .append("svg:g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
        .call(zoom);

svg.append("rect")
    .attr("class", "pane")
    .attr("width", width)
    .attr("height", height);

// Get the data
d3.csv("./enregistrement-subset2.csv", function(data) {
    color.domain(d3.keys(data[0])
    .filter(function(key) { 
        return key !== "date" && key !== "ECS - Button A" ; 
    }));

    data.forEach(function(d) {
        //Parse the date
        d.date = parseDate(d.date);
    });

    var dataSet = color.domain().map(function(name) {

        return {
            name: name,
            values: data.map(function(d) {
                //parses the number by using the '+' operator
                if(name == "CO2 chambre"){
                    return { date: d.date, value: (+d[name])/10};
                }
                else{
                    return { date: d.date, value: +d[name]};
                    }
            })
        };
    });

    // Scale the range of the data
    x.domain(d3.extent(data, function(d) { return d.date; }));
    y.domain([
        d3.min(dataSet, function(c) { var mini = d3.min(c.values, function(v) { return v.value; }); return mini; }),
        d3.max(dataSet, function(c) { var maxi = d3.max(c.values, function(v) { return v.value; }); return maxi; })
      ]);

    svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

    svg.append("g")
          .attr("class", "y axis")
          .call(yAxis)
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("Value of");

    var valueSet = svg.selectAll(".valueSet")
          .data(dataSet)
        .enter().append("g")
          .attr("class", "valueSet");

    valueSet.append("path")
      .attr("class", "line")
      .attr("d", function(d) { return line(d.values); })
      .style("stroke", function(d) { return color(d.name); })
      .call(line);

    valueSet.append("text")
      .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
      .attr("transform", function(d) { return "translate(" + x(d.value.date) + "," + y(d.value.value) + ")"; })
      .attr("x", 3)
      .attr("dy", ".35em")
      .text(function(d) { return d.name; });

    //zoomed();

});

function zoomed() {
    console.log("here", d3.event);

    svg.select("g.x.axis").call(xAxis);
    svg.select("g.y.axis").call(yAxis);
    //svg.selectAll("path.line").call(line);
    svg.selectAll("path.line").attr("d", line);
    //d3.select("#footer span").text("Période de temps: " + x.domain().map(format).join("-"));
} 
```

谁能告诉我这段代码我做错了什么？

我应该重新设计吗？

如果我使用大量数据，是否存在性能问题要预览，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T09:53:02.553

```
var zoom = d3.behavior.zoom()
    .x(x)
    **.scaleExtent([1, 2])**    <---
    .on("zoom", function(scale, translate){
        console.log("fonction zoom");
        console.log(scale); console.log(translate);
        zoomed(scale, translate);
    }); 
```

**取出 .scaleExtent([1, 2])**并检查它是否正常工作

* * *

应该

```
var zoom = d3.behavior.zoom()
    .x(x)
    .on("zoom", function(scale, translate){
        console.log("fonction zoom");
        console.log(scale); console.log(translate);
        zoomed(scale, translate);
    }); 
```

这是因为您的 x 轴是时间。

# android - 如何在本地网络中使用 iOS 应用程序从 android 应用程序读取数据

> ID：14318287
> 
> 赞同：2
> 
> 时间：2013-01-14T12:18:51.750
> 
> 标签：android, ios

这是架构描述：

*   wifi路由器为其他2个设备创建本地网络：
*   带有 android 主应用程序的银河选项卡。它执行计算。计算结果每 10 秒更新一次。
*   ipad 3.它需要从android读取计算。android app 和 iOS app 上的值必须同步（android 计算更新后在 ipad 上显示结果延迟 1-2 秒）

如何实现此解决方案？是否可以在 android 上运行 HTTP-server 为 iPAD 提供 REST API？也许其他一些变种？

谢谢。

# node.js - 分组和管理 node.js 中间件

> ID：14318292
> 
> 赞同：5
> 
> 时间：2013-01-14T12:19:18.660
> 
> 标签：node.js, express, connect, middleware

如果我制作了一些可以协同工作的中间件，那么分组和管理功能的最佳约定是什么？

在我的`server.js`档案中，我目前只是让他们一个接一个地列出`app.use`来电。

然而，我突然想到，如果我的集合中的第一个没有产生任何数据，那么该组中的后续数据可以跳过。我想这最终是一个聚合，尽管我在其他项目中没有看到任何这样的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:48:59.950

[连接](http://www.senchalabs.org/connect/)中间件有一个很好的例子来解决这类问题。看一下[bodyParser](http://www.senchalabs.org/connect/bodyParser.html)：

```
app.use(connect.bodyParser());  // use your own grouping here 
```

相当于

```
app.use(connect.json());
app.use(connect.urlencoded());
app.use(connect.multipart()); 
```

在内部，该`bodyParser`函数只是将`req`and`res`对象传递给前面提到的每个中间件函数

```
exports = module.exports = function bodyParser(options){
  var _urlencoded = urlencoded(options)
    , _multipart = multipart(options)
    , _json = json(options);

  return function bodyParser(req, res, next) {
    _json(req, res, function(err){
      if (err) return next(err);
      _urlencoded(req, res, function(err){
        if (err) return next(err);
        _multipart(req, res, next);
      });
    });
  }  
}; 
```

完整代码可以在 github [repo中找到](https://github.com/senchalabs/connect/blob/master/lib/middleware/bodyParser.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T12:16:19.813

***编辑***

在下面的评论中得知，传递一个数组将获得完全相同的东西，因此不需要额外的模块。:-)

* * *

我也在寻找一种方法来做到这一点，因为我的应用程序非常精细，但我不想像其他答案那样嵌套所有内容。

我敢肯定那里已经有更全面的东西，但我最终做到了：

```
 /**
 * Macro method to group together middleware.
 */
function macro (...middlewares) {
    // list of middlewares is passed in and a new one is returned
    return (req, res, next) => {
        // express objects are locked in this scope and then
        // _innerMacro calls itself with access to them
        let index = 0;
        (function _innerMacro() {
            // methods are called in order and passes itself in as next
            if(index < middlewares.length){
                middlewares[index++](req, res, _innerMacro)
            } else {

                // finally, next is called
                next();
            }
        })();
    }
} 
```

然后像这样使用它：

```
var macro = macro(
    middleware1,
    middleware2,
    middleware3
);

app.post('/rout', macro); 
```

# java - 网络声音识别

> ID：14318293
> 
> 赞同：1
> 
> 时间：2013-01-14T12:19:19.797
> 
> 标签：java, audio, web, sound-recognition

我正在构建一个网页，当麦克风捕捉到特定声音时我需要做一些事情。我搜索了很多，找到了这个链接：

[编写一个识别声音并执行动作的程序](https://stackoverflow.com/questions/840405/write-a-program-which-recognizes-a-sound-and-performs-action)

我被困在两件事上：

1.  如何通过网页或 javascript 使用基于 java 的声音识别器
2.  如何使用任何识别器匹配两种声音（一种来自麦克风，另一种来自保存的文件）

对于声音识别器，我使用的是[Sphinx-4](http://cmusphinx.sourceforge.net/sphinx4/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:54:56.547

要使用 java 声音识别器，您需要：提交/流式传输浏览器中记录的内容，或使用本地处理 (applet/javafx)。

[小程序](http://tapas4web.blogspot.com.br/2009/11/audio-capture-applet-source-code100.html)/javafx[可能根本不是一个坏](http://createdigitalmusic.com/2009/06/record-it-live-to-the-internet-indaba-reveals-javafx-powered-online-recording-studio/)主意。由于记录可能会产生大量数据块，因此您可以在本地计算机中进行处理。我敢打赌，小程序需要签名才能访问麦克风。您还可以将音频数据流式传输到服务器，[websockets](https://stackoverflow.com/questions/4220672/implementing-webbased-real-time-video-chat-using-html5-websockets)可能是个不错的选择。

对于 Javascript，我认为您需要使用[HTML5 进行麦克风录音](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)或[Flash](https://code.google.com/p/wami-recorder/)。

* * *

对于音频比较，我认为您需要[音频指纹识别](https://en.wikipedia.org/wiki/Audio_fingerprint)。这是音频文件的摘要。您需要在您自己的数据库中搜索您所拥有的内容中的“最佳匹配”。

我不确定斯芬克斯是不是这里的人。Musicg和[MusicUri](http://code.google.com/p/musicg/)[都有](http://people.seerc.org/kourtesis/musicuri/)音频指纹识别。

# ios - 根据要求将应用数据与 iCloud 同步

> ID：14318301
> 
> 赞同：1
> 
> 时间：2013-01-14T12:19:52.120
> 
> 标签：ios, objective-c, icloud

我想将我的一些应用程序数据存储在 iCloud 中，并且我希望在应用程序进入后台或关闭时将其保存。

我有一`MyDocument`堂课，是按照[这个苹果教程](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloud101/DefiningYourDocumentSubclass/DefiningYourDocumentSubclass.html)写的。事实上，我这样做：

```
// this function called from applicationDidEnterBackground
void SaveICloudData( const char *rawData )
{
    MyDocument *doc = AppDelegate.getICloudDocument;     // MyDocument is subclass of UIDocument, like in tutorial

    NSString *str = [[NSString alloc] initWithUTF8String:rawData];
    [doc setDocumentText:str];
} 
```

我的应用程序进入后台，只有当我再次打开它时才会同步。但我想手动将我的数据与 iCloud 同步。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:35:06.190

退出前，`UIDocument`检查文件是否`hasUnsavedChanges`. 如果`YES`，则调用保存。
您正在[applicationDidEnterBackground](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)委托方法中设置文档文本，这可能为时已晚。

从方法文档：

> 您应该在此方法退出之前执行与调整用户界面相关的任何任务，但其他任务（例如保存状态）应根据需要移动到并发调度队列或辅助线程。因为您在 applicationDidEnterBackground: 中启动的任何后台任务很可能在该方法退出之前不会运行，因此您应该在启动这些任务之前请求额外的后台执行时间。换句话说，首先调用 beginBackgroundTaskWithExpirationHandler: 然后在调度队列或辅助线程上运行任务。

# sql-server - SQL Server - 在 catch 中获取错误参数

> ID：14318311
> 
> 赞同：3
> 
> 时间：2013-01-14T12:20:18.250
> 
> 标签：sql-server, key, unique, message

> **可能重复：**
> [如何从 SQL Server 中找出 _exact_ 错误](https://stackoverflow.com/questions/5411521/how-do-i-find-out-the-exact-error-from-sql-server)

我们的一位客户希望在违反 UNIQUE KEY 时获得自定义错误消息。

鉴于以下情况：

```
CREATE TABLE [dbo].[Pip]
(
    id int IDENTITY(1,1) NOT NULL,
    code NVARCHAR(50) NOT NULL,
    CONSTRAINT [PK_Pip] PRIMARY KEY ([id]), 
    CONSTRAINT [UQ_Pip_Code] UNIQUE([code]), 
)

BEGIN TRY
    INSERT INTO Pip(code) VALUES('TEST')
    INSERT INTO Pip(code) VALUES('TEST')
END TRY
BEGIN CATCH
    DECLARE @error INT, @message VARCHAR(4000), @xstate INT;
    SELECT @error = ERROR_NUMBER(), @message = ERROR_MESSAGE(), @xstate = XACT_STATE();

    IF @errorNumber = 2627 OR @errorNumber = 2601 BEGIN
        RAISERROR('<custom unique key violation error message>', 16, 1)
    END
END CATCH 
```

我需要的是 CATCH 部分中违反的唯一键的名称，以便我可以为每个定义的唯一键指定错误消息。

显然，我可以在访问该表的不同存储过程中手动添加检查 - 但是，这会导致代码的可维护性降低，这不是我们想要的。

SQL Server（2008R2）中是否有这种可能性？

我考虑过基于 sys.messages-table 用某种正则表达式解析 ERROR_MESSAGE() 。然而，这*感觉*像是做错了事。

谢谢！
桑德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:25:38.563

RaiseError 具有可选参数，因此您可以传入诸如表名之类的参数并将其替换。

直接来自帮助

```
RAISERROR (N'This is message %s %d.', -- Message text.
           10, -- Severity,
           1, -- State,
           N'number', -- First argument.
           5); -- Second argument.
-- The message text returned is: This is message number 5.
GO 
```

# validation - Struts2 validation.xml 和 validate() 方法

> ID：14318312
> 
> 赞同：0
> 
> 时间：2013-01-14T12:20:19.317
> 
> 标签：validation, struts2

我有一个 struts2`validation.xml`文件来做一些简单的验证，但我需要一个更复杂的验证，需要从数据库中获取数据并检查它。

我正在使用`validate()`from 方法进行操作，`ActionSupport`并且效果很好。我只是不明白为什么当页面从验证中返回时，jsp 页面显示验证表单validation.xml 有自己的`<ul>`标签，而`validate()`方法验证有另一个标签。有什么方法可以将两者结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:41:16.930

如果您愿意，您可以放弃 s:fielderror（或您正在使用的任何错误标签）并使用普通的 OGNL。查看 ActionSupport，您会看到 getFieldErrors()，就像处理集合 Map 一样。相同的方法可以应用于其他错误。

# json - 播放 2.1-RC2：从 JSON 中读取密钥

> ID：14318314
> 
> 赞同：2
> 
> 时间：2013-01-14T12:20:29.580
> 
> 标签：json, scala, playframework, playframework-2.0, playframework-2.1

我尝试将我的 Web 应用程序从 Play 2.0.4 迁移到 Play 2.1-RC2。

我有一个带有未知键列表的 JSON 数据（`key1`, `key2`），如下所示：

```
{description: "Blah",
 tags: [
   key1: ["value1", "value2"],
   key2: ["value3"]
 ]
} 
```

我想将 JSON 中的数据存储在元标记列表中。在 Play 2.0.4 中，我使用了类似的东西来读取`tags`-list：

```
def readMetatags(meta: JsObject): List[Metatag] =
  meta.keys.toList.map(x => Metatag(x, (meta \ x).as[List[String]]) 
```

现在我想使用新的 Play 2.1-JSON-API（原型）：

```
import play.api.libs.json._
import play.api.libs.functional.syntax._

object Metatags {  
  implicit val metatagsRead: Read[Metatags] = (
    (JsPath \ "description").read[String] and
    (JsPath \ "tags").read[List[Metatag]]
  )(Metatags.apply _, unlift(Metatags.unapply _))

  implicit val metatagRead: Read[Metatag] = (
    JsPath().key. ?? read[String] and              // ?!? read key
    JsPath().values. ?? read[List[String]]         // ?!? read value list
  )(Metatag.apply _, unlift(Metatag.unapply _))

}

case class Metatags(description: String, tags: List[Metatag])
case class Metatag(key: String, data: List[String]) 
```

如何从 JSON 中读取密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T19:48:40.097

这是一个为`MetaTag`班级定制阅读器的解决方案。read 只是将 转换`JsValue`为 a `JsObject`，它具有有用的`fieldSet`方法。

因为`MetaTags`, 宏 inception 完美运行

```
object Application extends Controller {

  case class MetaTags(description: String, tags: List[MetaTag])
  case class MetaTag(key: String, data: List[String])

  implicit val readMetaTag = Reads(js => 
    JsSuccess(js.as[JsObject].fieldSet.map(tag => 
      MetaTag(tag._1, tag._2.as[List[String]])).toList))

  implicit val readMetaTags = Json.reads[MetaTags]

  def index = Action {
    val json = Json.obj(
      "description" -> "Hello world",
      "tags" -> Map(
        "key1" -> Seq("key1a", "key1b"),
        "key2" -> Seq("key2a"),
        "key3" -> Seq("Key3a", "key3b", "key3c")))

    val meta = json.as[MetaTags]
    Ok(meta.tags.map(_.data.mkString(",")).mkString("/"))
    // key1a,key1b/key2a/Key3a,key3b,key3c
  }

} 
```

# django - 使用 IIS 和 PyISAPIe 加载 cx_Oracle 模块时出错

> ID：14318317
> 
> 赞同：0
> 
> 时间：2013-01-14T12:20:47.867
> 
> 标签：django, iis-6, cx-oracle, pyisapie

我开发了一个 Django 应用程序，我试图让它在 Windows Server 2003 上的 IIS 下运行。我通常遵循[Django 演练](https://code.djangoproject.com/wiki/DjangoOnWindowsWithIISAndSQLServer)，但我的数据库是 Oracle。

如果我从命令提示符运行 python 并 import `cx_Oracle`，它工作得很好。如果我使用 django 的开发服务器运行该项目，一切正常。我还没有设法在 IIS6 上得到它，但是当`test.py`IIS 加载 a 时`PyISAPIe`，它说它无法加载`cx_Oracle`并显示以下错误：

> 加载 cx_Oracle 模块时出错：DLL 加载失败：找不到指定的模块。

我正在使用以下 32 位版本：

```
Python 2.6.6,
PyISAPIe 1.1.0 rc4 py2.6,
Django 1.4.3,
Oracle Client 11.2, 
cx_Oracle 5.1 (for Oracle 11g, Python 2.6) 
```

关于为什么会发生这种情况的任何想法？

编辑：我尝试降级到 cx_Oracle 4.4.1，现在我收到错误：ImportError: cannot import name utils

# webrtc - WebRTC - 浏览器不要求本地 html 文件的麦克风访问权限

> ID：14318319
> 
> 赞同：6
> 
> 时间：2013-01-14T12:20:55.727
> 
> 标签：webrtc, getusermedia

我有一些简单的 webRTC 代码，用于`getUserMedia`访问用户的麦克风。现在，当我在浏览器中加载该 html 文件（保存在我的本地主机中）时，浏览器不会请求麦克风访问权限，因此无法访问。

但是当我在 w3schools.com 编辑器中运行相同的 html 时，它会请求麦克风访问权限，并且在允许它访问我的麦克风时，它工作正常......

为什么会出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:26:13.983

当您直接从文件系统（file:// 前缀）打开 html 文件时，Chrome 将自动阻止 getUserMedia 权限。您必须在本地运行服务器。

我像这样启动了一个 sinatra 服务器：

```
# server.rb
require 'sinatra'

get '/' do
  File.read('index.html')
end 
```

那就先给吧。

```
$ gem install sinatra
$ ruby server.rb 
```

`http://localhost:4567`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T21:54:43.483

This behavior is caused by Chrome security settings.

If you have PHP installed and you don't wanna setup Apache or other more advanced web server, probably the easiest way would be to run internal PHP web server this way (assuming you have your web files in /home/user/web/):

`php -S 127.0.0.1:3000 -t /home/user/web/`

Here is a description of the parameters:

`-S <addr>:<port> Run with built-in web server.`

`-t <docroot> Specify document root <docroot> for built-in web server.`

After you run the server start your browser and open this URL (assuming your test file is called webrtc.html):

`http://127.0.0.1:3000/webrtc.html`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-18T08:32:37.997

`file:/*`出于安全考虑，Chrome 在执行文档时不会打开用户媒体，例如 WebCam 。

`--disable-web-security`但是，您可以通过使用命令行选项启动 chrome 来覆盖安全策略。

对于测试，还要检查该`--use-fake-device-for-media-stream`选项。

**注意**指定命令行选项时，请确保没有运行 chrome/chromium 进程。 **PS**通过创建一个`test.html`包含

```
<!DOCTYPE HTML>
<video autoplay/>
<script>
  navigator.webkitGetUserMedia({audio:true,video:true},
    function(stream){
      document.querySelector('video').src =
        URL.createObjectURL(stream);
    });
</script> 
```

而不是杀死所有 chrome 实例并像这样启动 chrome：

```
 chrome.exe --use-fake-device-for-media-stream --disable-web-security test.html 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-27T21:02:01.007

如果不使用本地服务器，则无法在本地运行使用 getUsermedia API 的 HTML5。使用 WampServer 并将您的 HTML5 文件放在 www 文件夹中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T04:48:10.300

只是一些故障排除建议：

*   检查 chrome://settings/content（向下滚动到“媒体”），查看您是否不小心选择了始终允许或始终拒绝该站点。（我使用的是 Chrome 26[dev]；这可能位于 Chrome 24 的其他位置。）

*   还可以尝试重新启动您的浏览器 - 根据我的经验，这部分 Chrome 仍然存在相当大的问题，有时重新启动可以修复它。

*   并确保您的 getUserMedia() 调用中有一个错误处理程序 - 那里可能有一些额外的信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-16T06:33:02.767

您是否通过类似 file:// 的方式加载文件？似乎 chromium 根本不提供对这些文件的访问权限，并且完全忽略了该请求。刚刚尝试过，将文件上传到开发服务器后它工作正常。

即使将其设置为始终允许，它仍然不适用于 file://。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-25T08:43:21.160

**这个答案适用于 chrome**

在 Chrome 中，您可以使用该`--allow-file-access-from-files`标志来允许从本地文件访问网络摄像头。

**苹果电脑**

在 Mac 上，您可以打开终端并输入：

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --allow-file-access-from-files /path/to/file.html 
```

改变`/path/to/file.html`你的路径

**视窗**

在 Windows 中，您可以创建快捷方式。右键单击 Google Chrome 并在菜单中选择：`Copy To -> Desktop (shortcut)`，然后右键单击快捷方式并单击`properties`添加标志：

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --allow-file-access-from-files C:\path\to\file.html 
```

希望这个答案有帮助！

# git - 与不同的团队合作

> ID：14318320
> 
> 赞同：0
> 
> 时间：2013-01-14T12:21:03.073
> 
> 标签：git, collaboration

在过去的 6 个月里，合作伙伴 A 一直在帮助我们建立我们的网站。我们需要额外的技能组合，因此我们最近增加了合作伙伴 B 的帮助。话虽如此，我们需要一个解决方案，使我们能够在相同的代码库上进行协作，同时最大限度地减少冲突；但是，我觉得我们正在考虑的解决方案增加了一层复杂性并且错过了 git 的优势。

我们的解决方案如下所示：

```
Partner A --> DevServer(A) --> StagingServer(A)
                                               \
                                                StagingFinal --> Production
                                               /
Partner B --> DevServer(B) --> StagingServer(B) 
```

简而言之，每个合作伙伴都有自己的开发和登台服务器，然后我们将从每个合作伙伴的登台服务器推送到最终登台服务器（我们将解决冲突），然后再推送到生产环境。

由于我以前没有与不同的团队合作过，我想知道这是否是最好的方法。如果它有所作为，我们目前正在使用 git-flow 并将我们的代码托管在 Beanstalkapp 上，但如果这能让事情变得更容易，我们愿意使用 github。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:24:00.850

在部署到 StagingFinal 之前合并代码库是一个非常糟糕的主意。您现在在 StagingFinal 中基本上拥有一个完全未经测试的代码库，因为您无法预测两个合作伙伴的更改可能如何交互。

要解决此问题，请在每个合作伙伴部署到他们的 DevServer 之前引入“DevServerFinal”或合并代码库。

# file - 需要一个bat文件来超级隐藏flash中的文件夹吗？

> ID：14318323
> 
> 赞同：0
> 
> 时间：2013-01-14T12:21:21.947
> 
> 标签：file, batch-file, hidden, super

我知道我可以通过在 cmd 中使用以下代码来超级隐藏文件夹： attrib +S +H FolderName 但是当我的闪存连接到计算机时，我需要一个 .bat 文件来自动为我执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:14:22.130

如果您知道闪存驱动器号（或可能的字母范围），您可以使用

```
:LOOP
for %%a in (E: F: G:) do (
if exist %%a\FolderToHide attrib +s +h %%a\FolderToHide
)
timeout /t 5
goto :LOOP 
```

超时只是为了使批处理不会使 CPU 周期超载，如果您不确定驱动器号，只需`A:`执行`Z:`.

# c# - DataSet.GetXmlSchema 总是导致 xsd 属性有 type='xs:string'

> ID：14318328
> 
> 赞同：1
> 
> 时间：2013-01-14T12:21:36.800
> 
> 标签：c#, xml, xsd, linq-to-xml

谁能帮我解决这个问题？我正在使用 Linq XElement 类创建一个 XML 文档。创建文档后，我将其放入数据集对象中。数据集允许对象允许我从创建的 XML 推断 XSD 模式，这很方便。但是...... XSD 中的数据类型都以字符串类型出现，即使对于数值也是如此。

下面是一些重现该问题的示例代码：

```
class Person
{
    public int ID { get; set; }
    public String Name { get; set; }
    public int Age { get; set; }
    public double Score { get; set; }

    public XElement GetXML()
    {
        var person = new XElement("Person", new XAttribute("ID", ID));
        person.Add(new XElement("Name", Name));
        person.Add(new XElement("Age", Age));
        person.Add(new XElement("Score", Score));
        return person;
    }
}

static void Main(string[] args)
{
    var set = new DataSet("Test");
    var root = new XElement("root");

    var p1 = new Person() { ID = 1, Name = "P1", Age = 32, Score = 50.4 };
    var p2 = new Person() {ID = 2, Name = "P2", Age = 40, Score = 0 };

    root.Add(p1.GetXML());
    root.Add(p2.GetXML());

    set.ReadXml(root.CreateReader());
    var xml = set.GetXml();
    var schema = set.GetXmlSchema();

    Console.WriteLine(schema);
    Console.WriteLine(xml);
    Console.ReadKey(true);
} 
```

运行代码时，架构将包含如下项目：

```
<xs:element name="Age" type="xs:string" minOccurs="0" msdata:Ordinal="1" /> 
```

例如，我看不到如何将其类型设置为整数。

我尝试更改以下行：
*set.ReadXml(root.CreateReader());*
到：
*set.ReadXml(root.CreateReader(), XmlReadMode.InferTypedSchema);*
这几乎奏效了，但它仍然没有产生我想要的确切类型。此外，使用导致值不一致（有时具有十进制类型的值，例如 Score 将是 type='xs:double'，其他时候它们会是 type='xs:Anonymous'

有什么方法可以指定属性和节点的数据类型？请注意，我处于必须使用 Syste.Data.DataSet 类最终保存 xml 的位置，但我不一定必须使用 linq XElement 类来构造要放置在其中的 XML。我怀疑这个问题可能与调用 CreateReader 创建的 XNodeReader 对象以及 XElement 类的简单性有关。

任何建议，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:31:31.690

问题是当您生成 XML 时，您会丢失所有类型信息 - XML 仅包含字符串。你应该直接通过`DataTable`- 像这样的东西：

```
class Person
{
    public int ID { get; set; }
    public String Name { get; set; }
    public int Age { get; set; }
    public double Score { get; set; }

    public DataTable GetDataTable()
    {
      DataTable result = new DataTable();
      result.Columns.Add("ID", ID.GetType());
      result.Columns.Add("Name", Name.GetType());
      result.Columns.Add("Age", Age.GetType());
      result.Columns.Add("Score", ID.GetType());
      return result;
    } 
}

class Program {
  static void Main(string[] args)
  {
    var set = new DataSet("Test");

    var p1 = new Person() { ID = 1, Name = "P1", Age = 32, Score = 50.4 };
    set.Tables.Add(p1.GetDataTable());
    var schema = set.GetXmlSchema();

    Console.WriteLine(schema);

  }
} 
```

# java - 将Java对象（反）序列化为文件的最佳方法是什么

> ID：14318329
> 
> 赞同：3
> 
> 时间：2013-01-14T12:21:41.387
> 
> 标签：java, serialization

我想将一个 Java 对象保存到文件中（以便稍后进行单元测试）。我尝试过 JSON，但由于我不拥有我正在序列化的对象的类，因此反序列化变得比它值得付出更多的努力。（现有类的 getter 和 setter 被不同的类型重载，Jackson 无法弄清楚如何反序列化对象）

现在我正在探索其他途径（即序列化为二进制或其他格式）。我想知道是否有任何东西可以将 Java 对象转储到二进制/文件，以便反序列化变得微不足道。我知道您可以使用`Serializable`接口执行此操作，但是我不拥有这些不实现此接口的类，因此无法修改它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T12:27:06.363

您还可以使用不依赖于已实现接口的类的[XStream 。](http://xstream.codehaus.org/tutorial.html)`Serializable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:25:09.873

如果他们实现`Serializable`了您不需要拥有它们（也不需要修改它们），您可以使用 a 将它们写入文件`ObjectOutputStream`并使用 a 将它们读回`ObjectInputStream`

假设这些类有适当的 getter 和 setter，你应该没有问题这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:08:44.697

您也可以使用[Kryo](http://code.google.com/p/kryo/)。基准（[这里](http://code.google.com/p/kryo/wiki/V1Benchmarks)和[这里](http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking)）说它是最快的序列化/反序列化之一，并且使用的空间也更少。它也不需要`Serializable`实施。也就是说，我从未亲自使用过它。

# ios5 - UIview清空一个区域

> ID：14318334
> 
> 赞同：0
> 
> 时间：2013-01-14T12:22:10.137
> 
> 标签：ios5, uiviewcontroller, ios6, iphone-5, ios4

这是一个继承的代码，我想尽可能少地改变，只支持iphone5（taler）屏幕尺寸。

在某处我有这样的代码：

```
[self.view addSubview:leftSwipedViewController.view]; 
```

问题是：父 UIViewController 已经填充了 480x2 -> 568x2 区域（iphone4 和 iphone5 之间的差异），新的滑动 UIController 将填充 0->480x2 高度区域。我想用漂亮的白色清除剩余空间。怎么做？

类似的东西，`[self.view clearRectangle(0,568-480,320,568, color.white)];`但这个功能并不存在。

有没有更好、更快的解决方案？- 我不想为组件从代码内放置到 X、Y 坐标的代码创建 xib 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:26:22.540

是的，其实很简单

在添加视图之前，请执行以下操作：

```
UIView *whiteView = [[UIView alloc] initWithFrame:self.view.bounds];
whiteView.tag = 123; // you'll need it if you want to remove it later.
whiteView.backgroundColor = [UIColor whiteColor];
[self.view addSubview:whiteView];

[self.view addSubview:leftSwipedViewController.view]; 
```

当您想删除它时，请执行以下操作：

```
[[self.view viewWithTag:123] removeFromSuperview]; 
```

但是，正确的方法是让您的 leftSwipedViewController 支持两个高度

# oracle - 数据仓库中的星型与雪花模式？

> ID：14318335
> 
> 赞同：2
> 
> 时间：2013-01-14T12:22:10.777
> 
> 标签：oracle, oracle11g, data-warehouse, star-schema, snowflake-schema

目前，我参与了一个**基于仓库的智能交易分析银行系统，该系统**具有客户流失行为、欺诈检测和 CRM 分析功能。我们一直使用`Oracle`它作为数据库，它完全是一个数据仓库项目，带有用于分析的数据挖掘算法。

我们有大约 1000 名银行客户的记录。对于建模，使用星型模式、雪花模式还是星座模式哪个更好？我知道星型和雪花模式的基本区别 - 维度表的规范化发生在雪花（又名雪花）模式中，这在大型数据库的情况下可能会出现问题。

那么，哪种模式更适合我的情况？非常欢迎参与数据仓库的经验丰富的程序员回答！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:54:15.253

简而言之，我对这样一个项目的假设是星型模式是合适的。我可能会修改，如果看起来一个维度变得太大而无法有效地进行完整扫描*，并且*通过雪花化可以有意义地提高对它的查询效率，*除非*该维度在分区键上连接到事实表（由于应用分区的困难）修剪放置在雪花维度上的谓词）。

# iphone - 让 UIImageView 填满整个 UITableViewCell

> ID：14318336
> 
> 赞同：1
> 
> 时间：2013-01-14T12:22:11.487
> 
> 标签：iphone, ios, objective-c, uitableview

如何使整个 UITableViewCell 成为自定义图像？我这样做是为了原型设计，但我找不到从哪里开始。我基本上需要 3 个具有相同图像的 UITableViewCells - 所以它们都是可重复使用的单元格。

关于如何做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T12:29:57.797

我想你想要的是：`backgroundView`财产`UITableViewCell`

**你可以这样做：**

```
-(void)  tableView:(UITableView*)tableView 
   willDisplayCell:(UITableViewCell*)cell 
 forRowAtIndexPath:(NSIndexPath*)indexPath;
{
    static UIImage* bgImage = nil;
    if (bgImage == nil) {
        bgImage = [[UIImage imageNamed:@"myimage.png"] retain];
    }
    cell.backgroundView = [[[UIImageView alloc] initWithImage:bgImage] autorelease];
} 
```

**或简单地使用：**

```
((UIImageView*)cell.backgroundView).image = [UIImage imageNamed:@"customBackground"];
((UIImageView*)cell.selectedBackgroundView).image = [UIImage imageNamed:@"selectedBackground"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:30:24.873

如果你打算改变细胞中的很多东西，我会这样：

您可以创建自定义单元格类并使用完整的单元格图像背景对其进行设计。然后，您将在 cellForRowAtIndexPath 方法中创建该单元格类的单元格。

如果您只需要添加和图像作为背景并且不需要其他任何东西，那么只需创建一个具有适当大小的图像视图并将其添加为单元视图的子视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:27:09.593

为此，您必须创建一个自定义的 UITableViewCell。您可以创建一个单元格并为其分配背景图像。

此背景图像将用于所有单元格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T12:31:39.047

您可以使用单元格的**backgrounView**添加图像，或者您可以使用单元格的**contentView**并将子视图添加到单元格从图像开始看[**这个**](https://stackoverflow.com/questions/10535637/reusablecellwithidentifier-issue-in-cellforrowatindexpath/10535788#10535788)线程你会得到一个想法

[UITableViewCell 参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938)

# ruby-on-rails - DelayedJob gem 在本地和 heroku 上表现不同

> ID：14318337
> 
> 赞同：0
> 
> 时间：2013-01-14T12:22:35.843
> 
> 标签：ruby-on-rails, heroku, delayed-job

我是延迟工作的新手，但在本地，宝石工作完美。在生产中，gem 在delayed_jobs 表中记录一个条目，然后在几毫秒内完成它，将其删除而不进行处理。

我发现的一个关键区别是在数据库中创建的处理程序条目。

当地的

```
--- !ruby/object:Delayed::PerformableMethod
object: !ruby/ActiveRecord:User
 attributes:
 id: '1'
 email: abc@example.com.au
 is_pending: pending
method_name: :job_without_delay
args:
- false 
```

Heroku

```
--- !ruby/object:Delayed::PerformableMethod
attributes:
 id: 1
 email: abc@example.com.au
 is_pending: pending 
```

到底是怎么回事？有人可以帮忙吗？

控制器

```
def make_pending
@user = current_user
@user.job(false)
redirect_to user_path(current_user)
end 
```

用户模型

```
def job(silence)
Project.job(self.id, silence)
end
handle_asynchronously :job, :run_at => Proc.new { 5.minutes.from_now } 
```

另一个区别

本地日志

```
[Worker(host:__.local pid:5179)] Starting job worker
[Worker(host:__.local pid:5179)] User#job_without_delay completed after 417.0975
[Worker(host:__.local pid:5179)] 1 jobs processed at 0.0024 j/s, 0 failed ... 
```

Heroku 日志

```
013-01-14T12:15:37+00:00 app[worker.1]: [Worker(host:19edbbfb-b8b9-4528-bca6-46ecac4e66bc pid:2)] NilClass# completed after 0.0119
2013-01-14T12:15:37+00:00 app[worker.1]: [Worker(host:19edbbfb-b8b9-4528-bca6-46ecac4e66bc pid:2)] 1 jobs processed at 26.9897 j/s, 0 failed ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:10:45.507

终于找到解决方案

添加了一个新模型 dj.rb

```
class Dj < Struct.new(:uid, :silence)

  def perform
......
  end
end 
```

# javascript - 从 iFrame 中更改 div 内容

> ID：14318338
> 
> 赞同：1
> 
> 时间：2013-01-14T12:22:36.460
> 
> 标签：javascript, iframe

我有以下页面布局

```
<div id="userscore" >test</div>
<iframe name="frameContent" id="frameContent" width="100%" height="100%" frameborder="0" /> 
```

iFrame 动态获取其内容，包括其 javascript。

当我尝试从 iFrame 中访问用户分数时

```
console.log(window.parent.document.getElementById('user-score')); 
```

我进入控制台

```
<div id="userscore" >test</div> 
```

当我尝试使用

```
window.parent.document.getElementById('user-score').html('Change the content'); 
```

我明白了

```
Object [object HTMLDivElement] has no method 'html' 
```

有没有解决的办法？或者任何人都可以对正在发生的事情有所了解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T12:25:41.480

DOM 元素没有方法`.html()`。该方法是 jQuery 等 JavaScript 库中常见的扩展。

使用纯 JavaScript 时，`.innerHTML`如果要更改元素的内容，则必须设置属性。

```
window.parent.document.getElementById('user-score').innerHTML = "New content"; 
```

# google-maps - 将地球划分为区域

> ID：14318340
> 
> 赞同：2
> 
> 时间：2013-01-14T12:22:45.253
> 
> 标签：google-maps, gis

我想将地球划分为可以分配对象的单独区域。

基本上，我有一张地图（来自谷歌地图或其他地方，确切的来源并不重要）。在这张地图上，我想定义不同类型的区域，例如，您可能有 A、B 或 C 类型的区域 - 甚至没有类型的区域。

我的问题是：你怎么能实现这个？使用哪些技术？

基本上，我想到了几个选择：

*   使用地图投影将地图投影到 2D 矩形（子问题：使用哪个？），并将区域定义为矩形。明显的优势是，除了投影之外，我不必关心复杂的数学公式。缺点是我需要将每个输入投影到投影地图。

*   使用球体，并使用三角函数计算该区域的面积。这绝对是关于公式的更多工作，但是您不需要投影。

还有哪些其他可能性？个人优势和劣势是什么？

我之所以要这样做是因为最终用户可能会使用他或她的移动设备来获取他/她的当前位置。然后应用程序应该能够获取用户所在的区域类型。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:29:14.880

最有可能的地图应用程序使用空间索引来细分地图。空间索引是空间填充曲线。还有一个更复杂的曲线，比如希尔伯特曲线。Microsoft bing 地图使用 az 曲线。也可以使用 3d 空间索引，但它非常复杂。但很可能只是为了平铺和更快地查询地图。

1.  [http://msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-17T14:34:24.353

我有好消息要告诉你：你正在寻找的地图（谷歌地图等）已经是 2d 投影的，所以你不必担心投影。

祝你好运

# c# - 如何加快将大字节数组写入文件？

> ID：14318345
> 
> 赞同：0
> 
> 时间：2013-01-14T12:23:24.613
> 
> 标签：c#, hex, byte, filestream

我需要将十六进制字符串转换为字节数组，然后将其写入文件。下面的代码给出了**3 秒**的延迟。**十六进制**下面 是一个长度为 1600 的十六进制字符串。有没有其他方法可以使它更快？

```
 Stopwatch sw = new Stopwatch();
        sw.Start();
        for (int i = 0; i < 5000; i++)
        {

            FileStream objFileStream = new FileStream("E://CRec Correcting Copy//Reader//bin//Debug//Files//Raw Data//a123.txt", FileMode.Append, FileAccess.Write);
            objFileStream.Seek(0, SeekOrigin.End);
            objFileStream.Write(stringTobyte(hex), 0, stringTobyte(hex).Length);
            objFileStream.Close();
        }
        sw.Stop();
        Console.WriteLine(sw.ElapsedMilliseconds); 
```

stringTobyte 是将十六进制字符串转换为字节数组的方法。

```
public static byte[] stringTobyte(string hexString)
    {
        try
        {
            int bytesCount = (hexString.Length) / 2;
            byte[] bytes = new byte[bytesCount];
            for (int x = 0; x < bytesCount; ++x)
            {
                bytes[x] = Convert.ToByte(hexString.Substring(x * 2, 2), 16);
            }
            return bytes;
        }
        catch
        {
            throw;
        }
    } 
```

请告诉我延迟发生在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:41:33.453

你想**的**太复杂了。首先，不需要您的自定义函数将其转换为字节数组。`System.Text.UTF8Encoding.GetBytes(string)`会为你做的！另外，这里不需要流，看看`File.WriteAllBytes(string, byte[])`方法。

然后它应该看起来像这样：

```
System.IO.File.WriteAllBytes("E://CRec Correcting Copy//Reader//bin//Debug//Files//Raw Data//a123.txt", new System.Text.UTF8Encoding().GetBytes(hex)); 
```

或多行版本，如果您坚持：

```
string filePath = "E://CRec Correcting Copy//Reader//bin//Debug//Files//Raw Data//a123.txt";
System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();
byte[] bytes = encoder.GetBytes(hex);
System.IO.File.WriteAllBytes(filePath, bytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:25:51.293

哇。首先这样做：

```
objFileStream.Write(stringTobyte(hex), 0, stringTobyte(hex).Length);

byte[] bytes = stringTobyte(hex);
objFileStream.Write(bytes , 0, bytes.Length); 
```

# xml - php/java 中是否有任何外部工具可以为所有数据库对象生成Changelog 文件？

> ID：14318346
> 
> 赞同：0
> 
> 时间：2013-01-14T12:23:31.993
> 
> 标签：xml, bash, xslt, liquibase, xmllint

我正在尝试将该`liquibase`工具添加到我的开发环境中以管理数据库迁移。鉴于功能集，它看起来非常灵活和有前途。我的第一个明显问题是如何将所有现有模式导出到单个文件（表、触发器、函数和存储过程）中。?

liquibase 是否有任何工具/扩展来执行此类任务。

我尝试过命令行选项`liquibase generateChangelogs`，但不幸的是它会生成单个更改日志文件（没有存储对象-fun/pro/trig）

任何使用 bash/java/任何 linux 标准 xml 处理命令行工具的东西都是可观的

**这是我想做的：** - 有 mysql 函数/存储过程/触发器/表等的 xml 模板

*   查询所有表/函数触发器等的现有数据库。遍历每个并解析相应的模板并为每个对象生成更改日志文件

*   -- 将每个文件存储在当前位置下的相应目录中，例如

    /数据库

    ```
     ---/functions

     ---/procedures

     ---/triggers

     ---/views

     ---/tables 
    ```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:19:13.170

这是不可能的，但您可以使用该命令生成初始更改日志，然后编写一个脚本来分隔对象。之后只需创建一个包含其他内容的主变更日志。

查看我在 Liquibase ( [http://scalabilitycookbook.com/2012/10/05/control-your-database-schema/](http://scalabilitycookbook.com/2012/10/05/control-your-database-schema/) ) 上的帖子了解详细信息。

# c++ - 命名空间内全局变量的外部局部变量

> ID：14318348
> 
> 赞同：8
> 
> 时间：2013-01-14T12:23:58.067
> 
> 标签：c++, namespaces, extern

以下代码正常工作：

文件1.cpp

```
//global variable
int g_myvar1 = 5; 
```

文件2.cpp

```
int myfunc()
{
   extern int g_myvar1;
   g_myvar1++
} 
```

如果 file1.cpp 如下，我该怎么做 file2.cpp：

文件1.cpp

```
namespace myns
{
    //global variable
    int g_myvar1 = 5;
} 
```

NOTE1，以下给出了 GCC 4.7“无效使用限定名”的编译错误。我也尝试了“使用命名空间”，但也没有运气。

```
int myfunc()
{
   extern int myns::g_myvar1;
   g_myvar1++
} 
```

NOTE2，以下工作，但我正在寻找仅局部变量定义。

```
namespace myns
{
    //global variable
    extern int g_myvar1;
}
int myfunc()
{
   myns::g_myvar1++
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T12:27:18.297

使用`using`：

```
void f()
{ 
   using myns::g_myvar1;

   ++g_myvar1;
} 
```

您已在命名空间的文件中*声明*变量（使用`extern`关键字），并在文件中*定义*它们。并在要使用变量的任何地方包含头文件。`.h``myns`*`.cpp`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:27:25.817

将带有`extern`声明的命名空间放在头文件中，并将该头文件包含在需要该变量的所有源文件中。*

# sql - 优化 SQL Server 中的 XML 导入

> ID：14318350
> 
> 赞同：3
> 
> 时间：2013-01-14T12:24:02.240
> 
> 标签：sql, sql-server, xml, sql-server-2005

我有这段代码可以导入一个 50mb 的 XML，其中包含大约 26.280 个实体。但这需要很长时间，有 50 分钟并且仍在运行，可以吗？或者这段代码可以优化？

```
INSERT INTO OSUSR_DFP_PEP_ENTITIES (ENT_ID, NAME, FIRSTNAME, LASTNAME, PREFIX, SUFFIX,
                      AKA, NAMESOURCE, PARENTID, GOVDESIGNATION, ENTRYTYPE, ENTRYCATEGORY, ENTRYSUBCATEGORY,
                      ORGANIZATION, POSITIONS, REMARKS, DOB, POB, COUNTRY, EXPIRATIONDATE, EFFECTIVEDATE, 
                      PICTUREFILE, LINKEDTO, RELATED_ID, SOURCEWEBLINK, TOUCHDATE, DIRECTID, PASSPORTID, 
                      NATIONALID, OTHERID, DOB2, ENTLEVEL, MASTERID, WATCH, RELATIONSHIPS) 
SELECT X.product.query('Ent_ID').value('.', 'INT'),
       X.product.query('Name').value('.', 'nvarchar(1000)'),
       X.product.query('FirstName').value('.', 'nvarchar(500)'),
       X.product.query('LastName').value('.', 'nvarchar(500)'),
       X.product.query('Prefix').value('.', 'nvarchar(500)'),
       X.product.query('Suffix').value('.', 'nvarchar(500)'),

       X.product.query('Aka').value('.', 'nvarchar(500)'),
       X.product.query('NameSource').value('.', 'nvarchar(500)'),
       X.product.query('ParentID').value('.', 'INT'),
       X.product.query('GovDesignation').value('.', 'nvarchar(500)'),
       X.product.query('EntryType').value('.', 'nvarchar(500)'),
       X.product.query('EntryCategory').value('.', 'nvarchar(500)'),
       X.product.query('EntrySubCategory').value('.', 'nvarchar(500)'),

       X.product.query('Organization').value('.', 'nvarchar(500)'),
       X.product.query('Positions').value('.', 'nvarchar(500)'),
       X.product.query('Remarks').value('.', 'nvarchar(max)'),
       X.product.query('DOB').value('.', 'nvarchar(500)'),
       X.product.query('POB').value('.', 'nvarchar(500)'),
       X.product.query('Country').value('.', 'nvarchar(500)'),
       X.product.query('ExpirationDate').value('.', 'nvarchar(500)'),
       X.product.query('EffectiveDate').value('.', 'nvarchar(500)'),

       X.product.query('PictureFile').value('.', 'nvarchar(500)'),
       X.product.query('LinkedTo').value('.', 'nvarchar(500)'),
       X.product.query('Related_ID').value('.', 'INT'),
       X.product.query('SourceWebLink').value('.', 'nvarchar(max)'),
       X.product.query('TouchDate').value('.', 'nvarchar(500)'),
       X.product.query('DirectID').value('.', 'nvarchar(500)'),
       X.product.query('PassportID').value('.', 'nvarchar(500)'),

       X.product.query('NationalID').value('.', 'nvarchar(500)'),
       X.product.query('OtherID').value('.', 'nvarchar(50)'),
       X.product.query('DOB2').value('.', 'nvarchar(500)'),
       X.product.query('EntLevel').value('.', 'nvarchar(500)'),
       X.product.query('MasterID').value('.', 'int'),
       X.product.query('Watch').value('.', 'bit'),
       X.product.query('Relationships').value('.', 'bit')
FROM ( 
SELECT CAST(x AS XML)
FROM OPENROWSET(
     BULK 'C:\temp\teste.xml',
     SINGLE_BLOB) AS T(x)
     ) AS T(x)
CROSS APPLY x.nodes('Export/Entities') AS X(product); 
```

--- 工作版，仅需 42 秒

```
DECLARE @X XML

SELECT @X = CAST(x AS XML)
FROM OPENROWSET(
     BULK 'C:\temp\teste.xml',
     SINGLE_BLOB) AS T(x)

INSERT INTO OSUSR_DFP_PEP_ENTITIES (ENT_ID, NAME, FIRSTNAME, LASTNAME, PREFIX, SUFFIX,
                      AKA, NAMESOURCE, PARENTID, GOVDESIGNATION, ENTRYTYPE, ENTRYCATEGORY, ENTRYSUBCATEGORY,
                      ORGANIZATION, POSITIONS, REMARKS, DOB, POB, COUNTRY, EXPIRATIONDATE, EFFECTIVEDATE, 
                      PICTUREFILE, LINKEDTO, RELATED_ID, SOURCEWEBLINK, TOUCHDATE, DIRECTID, PASSPORTID, 
                      NATIONALID, OTHERID, DOB2, ENTLEVEL, MASTERID, WATCH, RELATIONSHIPS) 
SELECT X.product.value('(Ent_ID/text())[1]', 'INT'),
       X.product.value('(Name/text())[1]', 'nvarchar(1000)'),
       X.product.value('(FirstName/text())[1]', 'nvarchar(500)'),
       X.product.value('(LastName/text())[1]', 'nvarchar(500)'),
       X.product.value('(Prefix/text())[1]', 'nvarchar(500)'),
       X.product.value('(Suffix/text())[1]', 'nvarchar(500)'),

       X.product.value('(Aka/text())[1]', 'nvarchar(500)'),
       X.product.value('(NameSource/text())[1]', 'nvarchar(500)'),
       X.product.value('(ParentID/text())[1]', 'INT'),
       X.product.value('(GovDesignation/text())[1]', 'nvarchar(500)'),
       X.product.value('(EntryType/text())[1]', 'nvarchar(500)'),
       X.product.value('(EntryCategory/text())[1]', 'nvarchar(500)'),
       X.product.value('(EntrySubCategory/text())[1]', 'nvarchar(500)'),

       X.product.value('(Organization/text())[1]', 'nvarchar(500)'),
       X.product.value('(Positions/text())[1]', 'nvarchar(500)'),
       X.product.value('(Remarks/text())[1]', 'nvarchar(max)'),
       X.product.value('(DOB/text())[1]', 'nvarchar(500)'),
       X.product.value('(POB/text())[1]', 'nvarchar(500)'),
       X.product.value('(Country/text())[1]', 'nvarchar(500)'),
       X.product.value('(ExpirationDate/text())[1]', 'nvarchar(500)'),
       X.product.value('(EffectiveDate/text())[1]', 'nvarchar(500)'),

       X.product.value('(PictureFile/text())[1]', 'nvarchar(500)'),
       X.product.value('(LinkedTo/text())[1]', 'nvarchar(500)'),
       X.product.value('(Related_ID/text())[1]', 'INT'),
       X.product.value('(SourceWebLink/text())[1]', 'nvarchar(max)'),
       X.product.value('(TouchDate/text())[1]', 'nvarchar(500)'),
       X.product.value('(DirectID/text())[1]', 'nvarchar(500)'),
       X.product.value('(PassportID/text())[1]', 'nvarchar(500)'),

       X.product.value('(NationalID/text())[1]', 'nvarchar(500)'),
       X.product.value('(OtherID/text())[1]', 'nvarchar(50)'),
       X.product.value('(DOB2/text())[1]', 'nvarchar(500)'),
       X.product.value('(EntLevel/text())[1]', 'nvarchar(500)'),
       X.product.value('(MasterID/text())[1]', 'INT'),
       X.product.value('(Watch/text())[1]'), 'bit',
       X.product.value('(Relationships/text())[1]', 'bit')

FROM @X.nodes('Export/Entities') AS X(product); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:45:54.453

我建议两件事。

1.  将 XML 加载到 XML 变量并在查询中使用 XML 变量。
2.  将提取值的代码更改为仅使用`.value`和使用`text()`。

试试这个：

```
DECLARE @X XML

SELECT @X = CAST(x AS XML)
FROM OPENROWSET(
     BULK 'C:\temp\teste.xml',
     SINGLE_BLOB) AS T(x)

INSERT INTO OSUSR_DFP_PEP_ENTITIES
.
.
.
SELECT X.product.value('(Ent_ID/text())[1]'), 'INT'),
       X.product.value('(Name/text())[1]', 'nvarchar(1000)'),
.
.
.
FROM @X.nodes('Export/Entities') AS X(product); 
```

# apache - Apache 配置/Catch-all 子域/特定子域异常

> ID：14318353
> 
> 赞同：0
> 
> 时间：2013-01-14T12:24:27.433
> 
> 标签：apache, apache2, virtualhost

从一些简单的域设置开始：

```
<VirtualHost *:80>
        ServerName site.com
        ServerAlias *.site.com
        DocumentRoot /path/to/site.com
        <Directory /path/to/site.com>
                AllowOverride all
                Options -MultiViews
        </Directory>
        RewriteEngine On
        RewriteCond %{REQUEST_URI} ^(.*)//(.*)$ [NC]
        RewriteRule . %1/%2 [R=301,L]
        RewriteCond %{HTTP_HOST} ^(.*).site.com$ [NC]
        RewriteRule ^(.*)$ http://site.com$1 [R=301]
        RailsEnv production
</VirtualHost> 
```

所以我很高兴，任何放在我的域之前的东西都将被删除，我的网址将永远是干净的：[http ://site.com](http://site.com)

凉爽的！

** 但 **

我想设置一个特定的子域（在这种情况下是一个例外），它将指向同一服务器上的另一个站点（另一个文件夹，另一个稍微不同的 apache 配置等......）

上面的这个设置总是先于我为我的“例外”dubdomain 做的设置。我怎样才能达到所描述的目标？包含一个（或更多）子域设置异常的全部 apache 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:33:14.967

尝试在此代码上方添加所需子域的配置，它应该会有所帮助。

# android-sensors - Android接近传感器给出错误的结果

> ID：14318356
> 
> 赞同：0
> 
> 时间：2013-01-14T12:24:32.160
> 
> 标签：android-sensors, proximity

第一篇文章在这里，但是stackoverflow为我解决了很多问题。不过这个，我好像想不通。我正在创建一个 android 应用程序，该应用程序在每次接近检测时将 TextView 值减 1。出于某种原因，当 Activity 启动或恢复（电源按钮）时，它会记录 2 次接近命中。我已经仔细检查以确保在按下电源按钮时我离探测器不够近。

这是代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.exercise);
    //start proximity
    startProximitySensor(sensorListener());
}

private SensorEventListener sensorListener(){
    listener = new SensorEventListener(){

        @Override
        public void onAccuracyChanged(Sensor arg0, int arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onSensorChanged(SensorEvent event) {
            if(event.sensor.getType() == Sensor.TYPE_PROXIMITY){
                String maxRange = String.valueOf(mProximitySensor.getMaximumRange());
                if(event.values[0] == Float.parseFloat(maxRange)){
                    updateTextView();
                    Log.i(TAG,"Proximity Sensor Reading: "+ String.valueOf(event.values[0]));

                }

            }

        }

    };

    return listener;
}

private void startProximitySensor(SensorEventListener proximitySensorEventListener){
    mSensorManager = (SensorManager)getSystemService(getApplicationContext().SENSOR_SERVICE);
    mProximitySensor = mSensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);
    if(mProximitySensor == null){
        Log.i(TAG,"No proximity sensor found!");
    }else{
        proximityStarted = true;
        Log.i(TAG,"Proximity started");
        mSensorManager.registerListener(proximitySensorEventListener,mProximitySensor,SensorManager.SENSOR_DELAY_UI);
    }
} 
```

我设法通过在 onResume 中创建一个时间戳来解决它，并将其与每次传感器更改时生成的 SystemTime 进行比较。如果它们的差异小于 1 秒，则 TextView 不会更新。这行得通，但我仍然想知道我是否遗漏了什么。

提前致谢

# processing - UnsatisfiedLinkError - 处理中的 GSvideo 库

> ID：14318357
> 
> 赞同：1
> 
> 时间：2013-01-14T12:24:44.600
> 
> 标签：processing

我们目前正在开展一个艺术项目，我们正在使用 GSvideo 库录制视频并同时使用 VLC 显示另一个视频。我们的项目在我们尝试过的三台 Windows 7 计算机上运行良好，但我们可用于展览的计算机出现以下错误：

> 线程“动画线程”中的异常 java.lang.UnsatisfiedLinkError: can't load library gio-2.0 (gio-2.0|libgio-2.0|libgio-2.0-0) with -Djna.library.path=//Desktop/media_art_installation/ sktetch/库/GSVideo/库\gstreamer\windows64。最后一个错误：java.lang.UnsatisfiedLinkError：无法加载库'gio-2.0'：找不到指定的模块。

我们注意到路径包含“/”和“\”。我们知道我们学校的计算机使用 Java 1.6。我们或我们的老师或技术支持都无法找到我们问题的答案。那么，为什么它不能在学校计算机上运行呢？

在我们的代码中给出错误的行如下：

```
 movieMaker = new GSMovieMaker(this, 640, 480, "data/" + getCurrentFileName(), GSMovieMaker.THEORA, GSMovieMaker.MEDIUM, fps); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:55:04.697

现在让我们假设库路径的拼写不是问题......

如果您解析您提到的错误，您会发现它找不到模块。它列出了一个库路径，在用于展览的机器上一定是不正确的。Win 7 机器是 32 位还是 64 位？展览使用什么类型的机器？（Win XP？Mac？32 位 64 位）。测试机和展览机之间的任何差异都是危险信号。

另外，你是怎么指向这个库的？谷歌搜索了一下后，我想出了以下内容：

*   sourceforce 上的一个[线程](http://sourceforge.net/p/gsvideo/discussion/813596/thread/87f463dd)建议使用`GSVideo.localGStreamerPath`to 指向 gstreamer 库。

*   另一个[线程](http://www.velocityreviews.com/forums/t390018-java-lang-unsatisfiedlinkerror-cant-load-library-from-jni-code.html)指出使用`System.loadLibrary`解决了这个问题（线程中的倒数第二个帖子）。

* * *

所以第二个建议对你来说可能是这样的：

```
System.loadLibrary("/Desktop/media_art_installation/sketch/libraries/GSVideo/library/gstreamer/windows64"); 
```

# c# - 更新绑定 WPF 后扩展器未更新

> ID：14318358
> 
> 赞同：0
> 
> 时间：2013-01-14T12:24:59.280
> 
> 标签：c#, wpf, binding

我有一个带有数据绑定项的 WPF 扩展器。我试图在后面的代码中的数据绑定项中设置一个 bool 标志，以便在设置 bool 时使扩展器崩溃。我在数据绑定对象中设置了布尔值，但扩展器没有反映更改和折叠。如果您需要更多信息，请告诉我。

仔细一看，我似乎没有实现 InotifyPropertyChanged。现在阅读它，但对于我的问题的具体答案将不胜感激。

这是我的 XAML：

```
<Expander Header="{Binding SubSection.SubSectionName}" Expanded="Expander_Expanded" Collapsed="Expander_Collapsed" IsExpanded="{Binding SubSection.Expanded}"> 
```

这是我背后的代码：

```
loopSubVM.SubSection.Expanded = false; 
```

扩展定义：

```
public class SubSectionViewModel
    {
        ObservableCollection<MaterialViewModel> _materials = new ObservableCollection<MaterialViewModel>();
        ObservableCollection<SubSectionViewModel> _subSections = new ObservableCollection<SubSectionViewModel>();
        SubSection _subSection;
        SectionViewModel _sectionVM;

public class SubSection
    {
        string _subSectionName;
        object _subSectionValue;
        List<GX3MaterialInterface.GX3MaterialInterface.MATERIAL_TYPE> _sectionTypes;
        int _currentTypePosition;
        List<List<object>> _paramterList;
        bool _expanded = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:34:48.003

确保该设置`Expanded`引发[`PropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件。

# web-services - 将 XML 发送到 Web 服务时，Visual Basic 6.0 中的错误 -2147467259

> ID：14318359
> 
> 赞同：0
> 
> 时间：2013-01-14T12:25:01.200
> 
> 标签：web-services, vb6, payment-gateway, system-error

我正在为支付网关使用 Web 服务。我写了下面的代码。它在 Windows XP 操作系统中运行。

但是当我在“Windows Embedded System（操作系统）”中运行此应用程序时，它显示为“系统错误-2147467259”。

我无法追踪错误。请帮我。

这是代码： Dim vXML Set httpReq = CreateObject("Microsoft.XMLHTTP") vXML = BuildXML() vXML = SoapWrapper(vXML)

```
httpReq.open &quot;POST&quot;, webServiceUrl, False
httpReq.setRequestHeader &quot;Content-Type&quot;, &quot;text/xml&quot;
httpReq.setRequestHeader &quot;Connection&quot;, &quot;close&quot;
httpReq.setRequestHeader &quot;SOAPAction&quot;, transactionUrl
httpReq.send vXML 
```

我在“httpReq.send vXML”行中遇到错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:36:41.930

尝试这个

```
httpReq.send pvToByteArray(vXML)
...

Private Function pvToByteArray(sText As String) As Byte()
    pvToByteArray = StrConv(sText, vbFromUnicode)
End Function 
```

您可能以某种方式在 XML 字符串中包含“特殊”字符。

# authentication - 使用 Google 身份验证和 Google Oauth 2.0 登录单页应用程序

> ID：14318362
> 
> 赞同：11
> 
> 时间：2013-01-14T12:25:14.303
> 
> 标签：authentication, oauth-2.0, single-page-application, google-oauth

我们正在开发一个 SPA - 完整的客户端 JavaScript 应用程序，需要对我们的用户进行身份验证才能访问内部。

正如我从搜索中发现的那样，我们可以外包我们的身份验证机制并为此使用**Google 帐户**。我从这个站点 **[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)** - *How to deal with Google API and mechanism for authentication*了解到。

简而言之，我们需要：

*   向带有参数的 google url 发送请求，要求用户允许 SPA 使用他们的个人数据
*   如果成功，我们会从 Google 获得一个令牌
*   我们可以使用这个令牌来访问我们被询问的 API 并使用它。

这描述得很好，我理解它并且有一些 JS 代码来实现它。

**什么我不明白**。

我有一个带有私有数据的应用程序。我想使用用户的电子邮件作为登录名或用户 ID（不管如何调用它）来访问应用程序的内部，例如用户创建的任务、用户的个人资料等。因此，在我的 SPA 中显示用户创建的任务我需要使用用户的电子邮件查询数据库。

我想象下一个场景：

*   用户点击`Login with Google`按钮
*   我们获得了一个令牌 - 这意味着用户已成功通过身份验证
*   我们**坚持用户和他的电子邮件与 SPA 合作**
*   当用户点击`Logout`我们清除所有访问数据

**我应该在哪里保存这些数据？**

如果`Forms Authentication`我知道我们将登录名/密码传递给服务器，并且如果它们与我们创建的数据库匹配`Forms Ticket`并将**其存储在 cookie 中**。

**Google 的 auth 有没有类似的案例？**如果我将用户的电子邮件存储在 cookie 中，我认为出于安全原因这不是很好。如果我要保存一个令牌 - 我不确定我为什么需要它以及如何在我的 SPA 中使用它，我在身份验证后没有使用任何 Google API。

**您是否有任何示例案例我们如何在类似案例中构建我们的流程？**

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:50:55.680

如果您只需要用户的电子邮件地址，那么最好使用 OpenID 而不是 OAuth。OAuth 提供对用户帐户和服务的访问权限，范围仅限于特定资源或一组资源。OpendID 专为登录第三方服务而设计。然后，您可以从 OpenID 登录中提取用户的 ID 和电子邮件地址。注意：将始终发送 ID，但必须在身份验证期间明确请求电子邮件地址。

Google 还支持混合 OpenID+OAuth 方案，如果需要验证某些资源，您可以在 OpenID 登录之上搭载 OAuth 请求。[查看身份验证文档以了解两种协议的工作方式以及哪种协议更适合您的方案。](https://developers.google.com/accounts/docs/OpenID)

一旦您返回了电子邮件地址，您可能不应该将其保存在 cookie 中。通常推荐的处理方法是将其添加为会话参数。这样，只有会话 cookie 存储在客户端上，服务器可以使用它找到所需的值。[这个答案很好地解释了差异以及何时使用会话与 cookie。](https://stackoverflow.com/questions/2240556/when-should-i-use-session-variables-instead-of-cookies)

# forms - 包含新客户和编辑现有客户的相同表格。如何使用“设定值”？

> ID：14318364
> 
> 赞同：0
> 
> 时间：2013-01-14T12:25:27.730
> 
> 标签：forms, codeigniter, validation, edit, setvalue

我对新客户端使用相同的表单并在 Code Igniter 中编辑客户端。有时我会包含新客户，因此该字段必须为空。然而，有时我会编辑一个客户，我必须把尊重价值放在一个字段上。例如：

```
echo form_input('client_name', $client_to_edit['client_name']); 
```

如何使用“set_values()”和 $client_to_edit['client_name'] 将数据传递到字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:18:52.460

set_value() 实际上只需要 form_validation ，在这种情况下你可能也需要它。基本上，您需要确定表单是正在编辑还是新客户端，如果正在编辑它需要在数据库上运行查询以返回该用户数据并将其传递给变量。

```
echo form_input('client_name',set_value
('client_name',($user['client_name'] ? $user['client_name']:''))); 
```

基本上发生的情况是，如果表单正在编辑，您将使用该用户数据填充控制器中的 $user 变量。设置值语句有 3 个选项。首先，如果表单从 form_validation 返回，则将其设置为发布表单时输入的内容，如果没有发布数据，则查看 $user['client_name'] 是否存在，如果存在，则使用它，如果它不只是返回空白。

# ios - UIBarButtonItem：我怎样才能找到它的框架？

> ID：14318368
> 
> 赞同：70
> 
> 时间：2013-01-14T12:25:39.100
> 
> 标签：ios, objective-c, swift

我在工具栏中有一个按钮。我怎样才能抓住它的框架？没有财产吗`UIBarButtonItem`？`frame`

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-14T12:29:07.050

试试这个；

```
UIBarButtonItem *item = ... ;
UIView *view = [item valueForKey:@"view"];
CGFloat width;
if(view){
    width=[view frame].size.width;
}
else{
    width=(CGFloat)0.0 ;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-08-20T21:01:26.157

这种方式最适合我：

```
UIView *targetView = (UIView *)[yourBarButton performSelector:@selector(view)];
CGRect rect = targetView.frame; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-07-28T12:49:40.457

使用***Swift***，如果您需要经常使用条形按钮项目，您应该实现这样的扩展：

```
extension UIBarButtonItem {

    var frame: CGRect? {
        guard let view = self.value(forKey: "view") as? UIView else {
            return nil
        }
        return view.frame
    }

} 
```

然后在您的代码中，您可以轻松访问：

```
if let frame = self.navigationItem.rightBarButtonItems?.first?.frame {
    // do whatever with frame            
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-10-26T23:05:50.310

哎呀，这个线程中有很多粗略的答案。这是正确的方法：

```
import UIKit

class ViewController: UIViewController {

    let customButton = UIButton(type: .system)

    override func viewDidLoad() {
        super.viewDidLoad()

        customButton.setImage(UIImage(named: "myImage"), for: .normal)
        self.navigationItem.rightBarButtonItem = UIBarButtonItem(customView: customButton)
    }

    override func viewDidAppear(_ animated: Bool) {
        super.viewDidAppear(animated)
        print(self.customButton.convert(self.customButton.frame, to: nil))
    }
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-01-14T13:21:25.570

感谢 Anoop Vaidya 的建议答案。另一种可能是（假设您知道工具栏中按钮的位置）

```
UIView *view= (UIView *)[self.toolbar.subviews objectAtIndex:0]; // 0 for the first item

CGRect viewframe = view.frame; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-31T22:16:19.427

这是我在 iOS 11 和 Swift 4 中使用的内容。如果没有可选选项，它可能会更干净一些，但我玩得安全：

```
extension UIBarButtonItem {
    var view: UIView? {
        return perform(#selector(getter: UIViewController.view)).takeRetainedValue() as? UIView
    }
} 
```

和用法：

```
if let barButtonFrame = myBarButtonItem.view?.frame {
    // etc...
} 
```

**编辑**：我不建议再使用它了。我最终改变了我的实现以使用带有自定义视图的 UIBarButtonItems，比如[Dan 的回答](https://stackoverflow.com/a/46965131/3007461)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-01-13T07:21:07.337

```
-(CGRect) getBarItemRc :(UIBarButtonItem *)item{
    UIView *view = [item valueForKey:@"view"];
    return [view frame];
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-19T17:52:20.923

`layoutMargins`您可以使用导航栏上的和等属性粗略计算它`frame`，并结合[人机界面指南](https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/custom-icons/)中的图标大小指南，并考虑当前设备方向：

```
- (CGRect)rightBarButtonFrame {
    CGFloat imageWidth = 28.0;
    CGFloat imageHeight = UIDevice.currentDevice.orientation == UIDeviceOrientationLandscapeLeft || UIDevice.currentDevice.orientation == UIDeviceOrientationLandscapeRight ? 18.0 : 28.0;
    UIEdgeInsets navigationBarLayoutMargins = self.navigationController.navigationBar.layoutMargins;
    CGRect navigationBarFrame = self.navigationController.navigationBar.frame;
    return CGRectMake(navigationBarFrame.size.width-(navigationBarLayoutMargins.right + imageWidth), navigationBarFrame.origin.y + navigationBarLayoutMargins.top, imageWidth, imageHeight);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-16T16:12:31.800

您可以使用自定义视图创建一个 UIBarButtonItem，它是一个 UIButton，然后您可以做任何您想做的事情。:]

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-24T11:40:09.910

试试这个实现：

```
@implementation UIBarButtonItem(Extras)

- (CGRect)frameInView:(UIView *)v {

    UIView *theView = self.customView;
    if (!theView.superview && [self respondsToSelector:@selector(view)]) {
        theView = [self performSelector:@selector(view)];
    }

    UIView *parentView = theView.superview;
    NSArray *subviews = parentView.subviews;

    NSUInteger indexOfView = [subviews indexOfObject:theView];
    NSUInteger subviewCount = subviews.count;

    if (subviewCount > 0 && indexOfView != NSNotFound) {
        UIView *button = [parentView.subviews objectAtIndex:indexOfView];
        return [button convertRect:button.bounds toView:v];
    } else {
        return CGRectZero;
    }
}

@end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-10T20:37:21.173

您应该对子视图进行循环并检查它们的类型或它们的内容以进行识别。通过 kvo 访问视图是不安全的，并且您无法确定索引。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-02T22:11:58.197

我在条形按钮项目上使用了一个视图，视图上有一个标签：

```
for view in bottomToolbar.subviews {
   if let stackView = view.subviews.filter({$0 is UIStackView}).first {
       //target view has tag = 88
       if let targetView = stackView.subviews.filter({$0.viewWithTag(88) != nil}).first {                                
          //do something with target view
   }
} 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-28T14:39:46.640

在 Swift 4.2 中并受到 luca 的启发

```
extension UIBarButtonItem {

    var frame:CGRect?{
        return (value(forKey: "view") as? UIView)?.frame
    }

}

guard let frame = self.navigationItem.rightBarButtonItems?.first?.frame else{ return } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-10-06T09:47:16.657

看看这个答案：[如何将边框和角半径应用于 UIBarButtonItem？](https://stackoverflow.com/questions/35611106/how-to-apply-borders-and-corner-radius-to-uibarbuttonitem)它解释了如何遍历子视图以找到按钮的框架。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2020-02-29T17:07:39.517

**Swift 4** up 目前最好的方法是从以下位置访问它的框架：

`self.navigationItem.rightBarButtonItems`经过

```
let customView = navigationItem.rightBarButtonItems?.first?.customView // access the first added customView 
```

以这种方式访问​​比访问私有 api 更安全。

*   看看这个答案：

[将CustomView添加到navigationItem后，CustomView总是返回nil](https://stackoverflow.com/questions/60183720/after-add-a-customview-to-navigationitem-customview-always-return-nil?noredirect=1#comment106658947_60183720)

# c# - 如何将动态片段更改为静态片段？

> ID：14318369
> 
> 赞同：0
> 
> 时间：2013-01-14T12:25:39.803
> 
> 标签：c#, winforms, visual-studio-2010, memory

我在这个函数中出现内存不足警报，称为`500K`时间：

```
public void DoStuff(string msg)
{
     rtfTerminal.Invoke(new EventHandler(delegate
            {
                rtfTerminal.SelectedText = string.Empty;
                rtfTerminal.AppendText(msg);
                rtfTerminal.ScrollToCaret();

            }));

} 
```

在我声明的全局范围内：

```
 private System.Windows.Forms.RichTextBox rtfTerminal; 
```

*   我想我`new EventHandler`每次打电话都会内存不足，我该如何避免这种情况？
*   我因为内存不足而合理 `rtfTerminal.AppendText(msg);`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:32:17.380

这`new EventHandler`不是一个大问题，你不能真正看到（但存在）的匿名对象也不是：这两者都将是短暂的，即 GEN-0 并且几乎可以免费收集。此外，如果事情开始运行不足，GC 将启动，所以这*不应该*是一个问题。不断将文本添加到`RichTextBox`无限制可能是一个问题。我会尽量避免这种情况。文件通常是从长时间运行的进程中转储输出的更好选择。

最终，如果这没有帮助：您需要使用内存分析器之类的东西来查看内存的去向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:32:01.977

内存不足异常可能与“invoke”调用相对应，但几乎可以肯定来自添加到richTextBox。

在 debug->exceptions->CLR Exceptions 中勾选“throw”以在调试时看到这一点。

每毫秒 100 个 unicode 字符应该每小时消耗大约 686MB，检查任务管理器中的可用 MB 以查看这是否是罪魁祸首。

# php - 在 search.php 中找不到结果时，wordpress 侧边栏循环将不起作用

> ID：14318375
> 
> 赞同：0
> 
> 时间：2013-01-14T12:26:07.250
> 
> 标签：php, wordpress, search

在search.php的wordpress中我有这个..

```
get_header(); ?>
...html/css
 <?php if ( have_posts() ) : ?>   
 <?php while (have_posts()) : the_post(); 
 ...loop stuff
 <?php endwhile; ?>
 <?php wp_pagenavi(); ?>
 <?php else : ?>
 <h3><?php _e( 'Sorry, but nothing matched your search criteria. Please try again with some different keywords.', 'hartyinternational' ); ?></h3>
                    <div class="nothing-found"><?php get_search_form(); ?></div>
    <?php endif; ?>
   <?php wp_reset_query(); ?> 
```

然后我用`WP_Query`循环构建了自己的侧边栏，例如

```
 if ( have_posts() ) :
$counter = 0;

            $the_query =  new WP_Query( array( 'posts_per_page' => 5, 'cat' => 4 ) );
            while ($the_query->have_posts() ) : $the_query->the_post(); 
            $counter++;
            if ( $counter == 1 || $counter == 3 || $counter == 5   ){
            ?>
            <a href="<?php the_permalink(); ?>"><div class="recent-position-single"><?php the_title();  ?></div> </a>
        <?php }
            else {
            ?> <a href="<?php the_permalink(); ?>"><div class="recent-position-single darker-shade"><?php the_title();  ?></div> </a>
        <?php }

            endwhile;
 wp_reset_query();
 endif; 
 wp_reset_postdata(); ?> 
```

和另一个类似的，当找到搜索结果时，这些工作完全正常，但是当没有找到结果时，循环无法加载任何内容，有什么建议吗？

似乎没有循环中存在循环或类似情况的情况，我似乎无法弄清楚可能出了什么问题，任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:47:41.697

我`if ( have_posts() ):`从我的查询中删除并解决了这个问题。

# mysql - mysql - 通过控制台将 ft_min_word_len 设置为 2

> ID：14318388
> 
> 赞同：0
> 
> 时间：2013-01-14T12:27:13.993
> 
> 标签：mysql, sql, console, putty

好的，我已经通过 PuTTY SSH 进入我的 mysql 控制台。反正我进去了

我这样做是因为我所在的数据库是共享主机。我无权访问该`my.ini`文件。

我如何设置`ft_min_word_len`为`2`. 它当前的默认值为`4`. 如何通过 mysql 控制台更改它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:34:02.150

根据这篇文章[我可以在共享主机上更改“ft_min_word_len”吗？](https://stackoverflow.com/questions/1024456/how-to-change-ft-min-word-len)没有管理员权限，您无法设置。此外，将全文最小长度设置为 2 会降低全文性能并导致搜索大量停用词。

# api - Disqus API：获取论坛评论/帖子的总数

> ID：14318391
> 
> 赞同：2
> 
> 时间：2013-01-14T12:27:18.830
> 
> 标签：api, disqus

我正在尝试获取给定论坛中已撰写的评论总数。

看着[http://disqus.com/api/docs/](http://disqus.com/api/docs/)我看不到这样的东西。老实说，这听起来很奇怪。论坛详细信息 ( [http://disqus.com/api/docs/forums/details/](http://disqus.com/api/docs/forums/details/) ) 显示了除此之外的任何内容。

任何黑客/一段代码/隐藏的 API 调用可以解决问题吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:47:11.747

我发现的最好方法是获取所有线程的列表，然后将每个线程的帖子数相加：

`curl -0 -L "https://disqus.com/api/3.0/forums/listThreads.json?api_key=YOUR_API_KEY&forum=YOUR_FORUM_NAME&limit=100"`

如果你得到一个“下一个”光标（response['cursor']['next']），不要忘记遍历不同的结果页面。

有关完整的 JavaScript 示例（旨在在 Google Script 上运行），请参阅此要点： [https ://gist.github.com/sarfata/5068200](https://gist.github.com/sarfata/5068200)

# jsf-2 - 如何在 Pretty-Faces 中将参数传递给 view-id？

> ID：14318396
> 
> 赞同：4
> 
> 时间：2013-01-14T12:27:56.847
> 
> 标签：jsf-2, prettyfaces

我想将一些变量值传递给 pretty-config.xml 配置文件中的 view-id 节点。样品：

我想做这样的事情：

```
 <url-mapping id="allReports">
        <pattern value="/report/#{type}" />
        <view-id value="/pages/report/#{type}.xhtml" />
    </url-mapping> 
```

但我得到了错误：

```
java.lang.IllegalArgumentException: java.net.URISyntaxException: Illegal character in fragment at index 18: http://localhost/#{type}.xhtml 
```

有人知道该怎么做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:13:14.137

正如[Prettyfaces 主网站](http://ocpsoft.org/prettyfaces/)所说，您必须执行以下操作：

```
<url-mapping id="view-user">
    <pattern value="/user/{username}" />
    <view-id value="/user/view.xhtml" />
</url-mapping> 
```

这相当于`/user/view.xhtml?username=yourParam`。如果你输入这个 url `/user/Administrator`，你会在你的视图中收到一个请求参数，名字是`username`，值是`Administrator`。只需遵循这个约定。

如果您想从父 id**继承，只需**[为每个 type 编写一个映射](http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html/Configuration.html#config.mapping.parents)。例如你可以写：

```
<url-mapping parentId="view-user" id="admins">
   <pattern value="/admin/#{user}" /> 
   <view-id value="/user/admins/view.xhtml" />
</url-mapping>

<url-mapping parentId="view-user" id="externals">
    <pattern value="/external/#{user}" /> 
    <view-id value="/user/externals/view.xhtml" />
</url-mapping> 
```

您也有[动态视图 id](http://ocpsoft.org/docs/prettyfaces/3.3.3/en-US/html/Configuration.html#config.dynaview)，但我认为不可能将它们与静态字符串片段连接起来。要以您希望的方式使用它们，您应该从请求中获取参数并在您的 bean 中处理完整的目标 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T08:23:48.450

我是这样创建的：

漂亮的配置.xml

```
<url-mapping id="static">
    <pattern value="/s/#{staticViewBean.requestPath}" />
    <view-id value="#{staticViewBean.getViewId}" />
</url-mapping> 
```

静态视图Bean.java

```
@Controller("staticViewBean")
@Scope("request")
public class StaticViewBean {

    private String requestPath;

    public String getViewId() {
        return "/WEB-INF/pages/s/" + requestPath + ".xhtml";
    }

    public String getRequestPath() {
        return requestPath;
    }

    public void setRequestPath(String requestPath) {
        this.requestPath = requestPath;
    }

} 
```

# java - 消除 Web 开发中的硬编码文件路径和 url

> ID：14318399
> 
> 赞同：1
> 
> 时间：2013-01-14T12:27:58.423
> 
> 标签：java, file, jsp, path, hardcoded

我目前正在使用 servlet 和 spring 框架开发一个网站。像往常一样，它包含很多文件（jsp、js、css、图像、各种资源等）。我试图避免在任何文件中写入任何硬编码路径或域......

例如，您可能知道在处理请求时将其“转发”到 jsp 页面（它的路径可能会被硬编码）。其他示例是在 jsp 文件中导入图像/css/js 等...

是否有任何通用方法（或工具）来避免硬编码路径/url，因此任何重构都不会造成麻烦？

**编辑**
我使用 netbeans 7.1.2 ...不幸的是 netbeans 只对纯 java 代码有帮助。当使用 jsp 文件时，事情是有限的，如果你添加自定义标签文件和 Jsp 2.0 EL 就像在控制台模式下编程：p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:47:58.917

在 JSP 文件本身中，您可以通过使用来避免几乎所有硬编码的域/url`JSTL`

例如，当创建指向另一个页面的链接时，您可以这样做：

```
<a href="<c:url value="/referrals/send.html"/>" target="_blank">Refer an Entrepreneur!</a> 
```

这意味着，无论您的 web 应用程序在哪里，链接都将始终具有正确的 url。例如，在我的开发框中，此链接将是：

```
http://localhost:8080/accounts/referrals/send.html 
```

但在我的生产服务器上，它正确解析为：

```
http://wwww.mydomain.com/referrals/send.html 
```

您可以看到，在我的开发服务器中，webapp 上下文位于 /accounts 下，但在生产机器上，它位于 / 下，因为 webapp 位于根上下文下。

[你可以在这里](http://www.tutorialspoint.com/jsp/jstl_core_url_tag.htm)阅读一个小教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:49:00.547

如果您引用任何静态内容（js、图像、css 等），则不必对整个文件路径进行硬编码。相反，您可以这样做：-

```
<img src="${pageContext.request.contextPath}/resources/images/test.jpg"/> 
```

其余的文件路径（Hibernate 域映射、Spring 控制器中的转发页面等）应该与您的项目结构相关，并且大多数 IDE 都足够聪明，可以毫无问题地重构它们……或者至少在我的情况下，IntelliJ 似乎为我处理这一切。

在某个时间点，您需要问自己，有多少硬编码是可以接受的，多少是不可接受的？此外，我不会试图偏离 Spring/Hibernate 推荐的解决方案太远。如果你把所有的东西都弄得太抽象，你就会有一组不同的问题需要处理，而且对于将来可能继承你项目的其他同行来说，这会适得其反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:52:45.193

属性文件始终是一个不错的选择，因此您必须在某一点进行更改（如果有的话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:19:25.713

其实我只是想出了一个主意。由于 netbeans 会分析并显示对 java 代码的依赖关系，因此将所有路径和域作为 java 变量处理可能会更好。

我在我的项目上创建了一个名为 FileResolver 的包，在里面我为项目中的每种文件类型都有一个类（例如，一个类用于 Jsp 文件，一个用于 Css 文件等）。在这些文件中，我将在公共静态最终字符串变量中记录和硬编码所有文件的所有路径。样本：

```
public class Jsps {

    public class layouts{
        public static final String main =       "layouts/main.jsp";
    }

    public class pages{
        public static final String error =      "pages/error.jsp";
        public static final String login =      "pages/login.jsp";
        public static final String register =   "pages/register.jsp";
    }
    ...
} 
```

在我的整个项目中，我应该使用变量而不是路径。然后，每当我重构一个文件时，我只有一个文件需要更改，即这些变量中的映射值......如果我需要更改变量，netbeans 将立即在项目中重构所有这些......我认为这会很好，因为我让我的项目从文件路径中保持干净，我唯一需要担心的是该文件中的变量映射到适当的文件路径。

**编辑**
我将编写一个简单的解析器来创建这些 java 文件，而不是为所有文件手动编写......我会在完成后更新

* * *

***更新***
这是我的 FileResolverGenerator

```
public class FileResolverGenerator {

    private static final String newFilePath = "C:/Users/Foo/Desktop/Jsps.java";
    private static final String scanRootFolder = "C:/Users/Foo/Desktop/myProject/web/WEB-INF/jsp";

    private static final String varValueReplaceSource = "C:/Users/Foo/Desktop/myProject/web/WEB-INF/jsp/";
    private static final String varValueReplaceTarget = "";

    private static final boolean valueAlign = true;
    private static final int varNameSpaces = 15;

    public static void main(String[] args){
        try {
            // Create file and a writer
            File f = new File(newFilePath);
            f.createNewFile();
            bw = new BufferedWriter( new FileWriter(f) );
            // Execute
            filesParser( new File(scanRootFolder) );
            // 'Burn' file
            bw.close();
        } catch (FileNotFoundException ex) {
            Logger.getLogger(ResolverGenerator.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(ResolverGenerator.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    // ================================================================================================ //
    // ============================================= WORK ============================================= //
    // ================================================================================================ //

    private static void filesParser(File rootFolder) throws FileNotFoundException, IOException{

        folderIn(rootFolder);
        // Files first
        if(!rootFolder.exists()) throw new FileNotFoundException();
        for(File f : rootFolder.listFiles()){
            if(f==null){ return; }
            if(f.isDirectory()){ continue; }
            else if(f.isFile()){ writeFileVariable(f); }
        }
        // Folders next
        for(File f : rootFolder.listFiles()){
            if(f==null){ return; }
            if(f.isDirectory()){ filesParser(f); }
            else if(f.isFile()){ continue; }
        }
        folderOut(rootFolder);
    }

    // ================================================================================================ //
    // ============================================ PRINTS ============================================ //
    // ================================================================================================ //
    private static BufferedWriter bw;
    private static int tabCount = 0;

    private static void folderIn(File f) throws IOException{
        bw.append("\n\n");
        for(int i=0; i<tabCount; i++)
            bw.append("\t");
        bw.append("public class "+f.getName()+"{\n");
        tabCount++;
    }

    private static void folderOut(File f) throws IOException{
        tabCount--;
        for(int i=0; i<tabCount; i++)
            bw.append("\t");
        bw.append("}\n");
    }

    private static void writeFileVariable(File f) throws IOException{
        String varName = f.getName().split("\\.")[0].replaceAll("-", "");
        String varValue = f.getPath().replaceAll("\\\\","/")
           .replace(varValueReplaceSource.replaceAll("\\\\","/"),varValueReplaceTarget.replaceAll("\\\\","/"));

        for(int i=0; i<tabCount; i++)
            bw.append("\t");
        bw.append("public static final String "+varName+" = ");
        if(valueAlign){
            for(int i=0; i<varNameSpaces-varName.length(); i++) bw.append(" ");
            bw.append("\t"); }
        bw.append("\""+varValue+"\";\n");
    }

} 
```

具体来说......这会扫描“/WEB-INF/jsp/”下的所有文件并创建一个java文件，其中所有jsp文件都“注册”到每个路径的公共静态最终字符串变量......这个想法是使用生成的 java 文件作为所有 jsps 的参考都在项目中......始终使用这些变量而不是硬编码路径.. *这与项目或任何项目无关。它只是一个可以节省您时间的工具，而不是手动为项目中的每个文件执行此操作。*

我还创建了另一个类 ResolverConsistencyChecker，它接受所有变量并检查文件路径是否正确（文件存在）......因为我们没有对文件名和文件路径进行任何更改，所以所有测试都通过了。
*在测试项目的“错误”时应该运行此方法*

```
public class ResolverConsistencyChecker {

    private static Class checkClass = Jsps.class;
    private static String fullPathPrefix = "C:/Users/Foo/Desktop/myProject/web/WEB-INF/jsp/";

    public static void main(String[] args){
        try {
            filesChecker( checkClass );
            System.out.println( "Tests passed. All files locations are valid" );
        } catch (FileNotFoundException ex) {
            Logger.getLogger(ResolverConsistencyChecker.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(ResolverConsistencyChecker.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    // ================================================================================================ //
    // ============================================= WORK ============================================= //
    // ================================================================================================ //

    private static void filesChecker(Class rootClass) throws FileNotFoundException, IOException{

        // Check file paths in current class depth
        for(Field f : rootClass.getFields()){
            try {
                String fullFilePath = fullPathPrefix+f.get(f.getName()).toString();
                File file = new File( fullFilePath );
                if( !file.exists() )
                    throw new FileNotFoundException("Variable: '"+f.getName()+"'\nFile "+fullFilePath);
            } catch (IllegalArgumentException ex) {
                Logger.getLogger(ResolverConsistencyChecker.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                Logger.getLogger(ResolverConsistencyChecker.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
        // Check for embedded classes
        for(Class c : rootClass.getClasses()){
            filesChecker(c);
        }
    }

} 
```

# c# - 阻止用户从我的网站下载视频

> ID：14318401
> 
> 赞同：-3
> 
> 时间：2013-01-14T12:28:09.670
> 
> 标签：c#, javascript, asp.net

我制作了一个新的网络应用程序，我会在上面显示更多视频，但我需要阻止用户通过浏览器或任何下载程序下载这些视频。有没有办法通过 java 脚本、JQuery、C# 或 asp.net 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:30:44.473

是的。删除视频或使它们根本无法通过 HTTP 访问。如果您想“阻止浏览器下载”，这也意味着阻止您的网站播放它。

更严肃的一点是：你可以让它变得更难。但是如果他们愿意，人们会绕过它，并且如果您的网站变得足够流行，JDownloader 等工具很可能最终会为他们提供一个插件。

当使用 flash 播放它们时，我认为有一些方法可以通过使用 RTMP 并将其绑定到用于在您的站点上播放它的 SWF 来使其更难。但即便如此，也有可用的工具来规避它。而且您需要一个专有的（并且很可能是昂贵的）闪存流媒体服务器..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:30:33.730

不允许用户通过您的网站观看视频但阻止他们下载视频是不可能的。

# asp.net-mvc - 上一页链接出现在 MVC3 Razor 应用程序的地址栏中？

> ID：14318403
> 
> 赞同：2
> 
> 时间：2013-01-14T12:28:20.607
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, routing, asp.net-mvc-routing

我正在使用 MVC3/Razor。登录网站后，出现主页，但我不明白为什么会出现上一页网址。

场景：当我将用户从登录页面重定向到主页时，地址栏中的 url 显示为“http://localhost:55104/Account/LogOn”而不是“http://localhost:55104/Home/Index”

帐户控制器

```
 // GET: /Account/LogOn
    public ActionResult LogOn()
    {
        if (HttpContext.User.Identity.IsAuthenticated == true)
        {
            return RedirectToAction("Index", "Home");
        }
        else
        {
            return View();
        }
    }

    // POST: /Account/LogOn
    [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            try
            {
                if (AppAuthentication.Authenticate(model.UserName, model.Password, "10.0.3.18"))
                {
                    string userName = model.UserName;
                    var user = new List<String>();
                    MySqlConnection con = DAL.GetMySqlConnection();
                    MySqlCommand cmd = new MySqlCommand("SELECT user_id, user_fname FROM users  WHERE  user_code='" + userName + "' AND user_treeCode <> 'xxx'", con);
                    MySqlDataReader rdr = cmd.ExecuteReader();
                    while (rdr.Read())
                    {
                        user.Add(rdr.GetString(0));
                        user.Add(rdr.GetString(1));
                    }
                    con.Close();
                    FormsAuthentication.SetAuthCookie(user[0], model.RememberMe);
                    Session["userID"] = user[0];
                    Session["userName"] = user[1];
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    ViewBag.OpenID = "Invalid credentials ";
                }
            }
            catch (Exception ex)
            {
            }
        }
        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

Gloabal.asax

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );           
    }

 protected void Application_Start()
    {                       
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:33:47.167

Your login form must be an Ajax form. In that case, RedirectToAction acts like a View method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:43:25.843

你可以用这种方式

```
 if (ModelState.IsValid)
    {
        if (string.IsNullOrEmpty(returnUrl))
        {
            returnUrl = Url.Action("Index", "App");
        }
        if (Request.IsAjaxRequest())
        {
            return Json(new { returnUrl = returnUrl });
        }
        return Redirect(returnUrl);
    } 
```

在视图中：

```
<% using (Ajax.BeginForm(
    "LogOn", 
    null, 
    new AjaxOptions { 
        HttpMethod = "POST", 
        OnSuccess = "success" 
    }, 
    new { 
        id = "SignInForm", ReturnUrl = Request.QueryString["ReturnUrl"] 
    })) { %>
        <<Page HTML Controls>>
        <input type="submit" value="Log On" />
<% } %>

<script type="text/javascript">
function success(context) {
    var returnUrl = context.get_data().returnUrl;
    if (returnUrl) {
        window.location.href = returnUrl;
    } else {
        // TODO: update the target form element with the returned partial html
    }
}
</script> 
```

# regex - 正则表达式以避免控制器名称中的“图像”

> ID：14318404
> 
> 赞同：0
> 
> 时间：2013-01-14T12:28:24.723
> 
> 标签：regex, asp.net-mvc, maproute

在这一刻，我有下一个 MapRoute

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },// Parameter defaults
            new { controller = @"[^\.]*" }                          // Parameter constraints 
        ); 
```

我定义的约束是 controller = @"[^.]*"

我需要一个约束来避免名称为“图像”的控制器。

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:30:30.060

不需要反斜杠来转义点，因为点在字符类中没有特殊含义。

为此，您可以使用负前瞻：

```
new { controller = @"(?!Images)[^.]*" } 
```

负前瞻是一个锚点，就像`^`or一样`$`，它不会消耗正则表达式中的文本，它正在寻找输入文本中的*位置*。环视的另一个名称是零宽度断言。

# sql - 根据不同表中的值获取列

> ID：14318408
> 
> 赞同：0
> 
> 时间：2013-01-14T12:28:36.067
> 
> 标签：sql, sql-server

我有以下查询：

```
 SELECT pn.PhoneId,
       pn.CountryId,
       c.ITUCode,
       pn.AreaCode,
       pn.PhoneNumber,
       pn.PhoneExtension,
       pn.PhoneNumberTypeId,
       pnt.PhoneNumberType,
       pn.Comments,
       ppn.IsPrimaryNumber,
       cpn.IsPrimaryNumber
FROM PhoneNumbers AS pn
INNER JOIN PeoplePhoneNumbers AS ppn ON ppn.PhoneId = pn.PhoneId
INNER JOIN CompanyPhoneNumbers AS cpn ON cpn.PhoneId = pn.PhoneId
INNER JOIN Countries AS c ON c.CountryId = pn.CountryId
INNER JOIN PhoneNumberTypes AS pnt ON pnt.PhoneNumberTypeId = pn.PhoneNumberTypeId
WHERE pn.PhoneId = @PhoneId
ORDER BY ppn.IsPrimaryNumber DESC, pnt.PhoneNumberType 
```

现在你可以 c 来获取`IsPrimaryKey`我必须使用两个不同的`innerjoins`并从中获取两个值。

其中一个将是`null`，另一个将具有始终如此的值。

那么我可以将此查询更改`innerjoin`为他们两个的单个联接，然后`IsPrimaryNumber`从中获取单个字段而不是另一个字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:32:23.253

`LEFT JOIN`这两个表`ppn`，`cpn`将`COALESCE`它们放在一列中，如下所示：

```
SELECT 
  pn.PhoneId, 
  pn.CountryId, 
  c.ITUCode, 
  pn.AreaCode, 
  pn.PhoneNumber, 
  pn.PhoneExtension,
  pn.PhoneNumberTypeId, 
  pnt.PhoneNumberType, 
  pn.Comments, 
  COALESCE(ppn.IsPrimaryNumber, cpn.IsPrimaryNumber) IsPrimaryNumber
FROM PhoneNumbers AS pn
INNER JOIN Countries          AS c   ON c.CountryId = pn.CountryId
INNER JOIN PhoneNumberTypes   AS pnt 
        ON pnt.PhoneNumberTypeId = pn.PhoneNumberTypeId
LEFT JOIN PeoplePhoneNumbers  AS ppn ON ppn.PhoneId = pn.PhoneId
LEFT JOIN CompanyPhoneNumbers AS cpn ON cpn.PhoneId = pn.PhoneId
WHERE pn.PhoneId = @PhoneId
ORDER BY ppn.IsPrimaryNumber DESC, pnt.PhoneNumberType; 
```

# eclipse - 在 Eclipse Juno 上安装 pydev

> ID：14318409
> 
> 赞同：0
> 
> 时间：2013-01-14T12:28:37.227
> 
> 标签：eclipse, eclipse-plugin, pydev, eclipse-juno

我刚刚下载了一个新的副本`eclipse 4.2.1`并尝试安装`PyDev`，我不断收到以下错误：

```
 An error occurred while collecting items to be installed
    session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
    No repository found containing: osgi.bundle,com.aptana.interactive_console,2.7.1.2012100913
    No repository found containing: osgi.bundle,com.aptana.shared_core,2.7.1.2012100913
    No repository found containing: osgi.bundle,com.python.pydev,2.7.1.2012100913
    No repository found containing: osgi.bundle,com.python.pydev.analysis,2.7.1.2012100913
    No repository found containing: osgi.bundle,com.python.pydev.codecompletion,2.7.1.2012100913
    No repository found containing: osgi.bundle,com.python.pydev.debug,2.7.1.2012100913
    No repository found containing: osgi.bundle,com.python.pydev.fastparser,2.7.1.2012100913
    No repository found containing: osgi.bundle,com.python.pydev.refactoring,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.ast,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.core,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.customizations,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.debug,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.django,2.7.1.2012100913
    No repository found containing: org.eclipse.update.feature,org.python.pydev.feature,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.help,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.jython,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.parser,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.red_core,2.7.1.2012100913
    No repository found containing: osgi.bundle,org.python.pydev.refactoring,2.7.1.2012100913 
```

我还测试了安装`PyDev`并`eclipse 4.2`得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:45:59.787

在测试不同版本`eclipse`并得到相同的错误之后。我下载了它`PyDev Zip files`并放置并解压缩`eclipse/dropins`，重新启动eclipse，它工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-27T05:32:34.430

对于 Eclipse 中的 PyDev，请使用以下 URL：

[http://update-production-pydev.s3.amazonaws.com/pydev/updates/site.xml](http://update-production-pydev.s3.amazonaws.com/pydev/updates/site.xml)

即在你的 eclipse=>Help=>Install new software=>Add=>Location 中：*使用上面的 URL*

eclipse重启后转到Window=>preferences=>PyDev=>Interpreters=>Python Interpreters=>提供python路径

# maven - 使用 Maven 部署后如何运行测试？

> ID：14318415
> 
> 赞同：6
> 
> 时间：2013-01-14T12:29:03.897
> 
> 标签：maven, deployment, junit, integration-testing, acceptance-testing

我正在尝试决定如何为 Java-EE Web 应用程序创建一组验收测试。

设置如下： Maven 用于生成 WAR 文件并将其部署到 Glassfish。在部署时，MySQL 数据库模式使用 Hibernate（“hbm2ddl=auto”选项）从模型类自动更新。

验收测试需要通过调用各种方法来测试部署的代码并检查结果是否符合预期（*）。我们编写了一组额外的包来连接到现有系统，因此验收测试应该显示如何将这些包集成到现有代码库中。

(*) 这听起来更像是单元/集成测试，但它们是验收测试，因为它们应该证明我们所做的工作是有效的，并且它们需要在部署后运行，以便有一个适当的数据库。

综上所述，我目前的想法是使用 JUnit 来检查预期值等。我正在努力解决的问题是如何在部署*后调用这些测试。*“部署”是 Maven 的最后一个阶段，所以不确定这是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T16:10:40.947

仅仅因为该阶段被调用`deploy`并不意味着您必须使用它来部署您的应用程序进行测试。事实上，它应该只用于将工件“部署”到 maven 存储库。通读[Maven 生命周期阶段](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)的描述，您会发现有一些阶段专门用于您的用例：

```
pre-integration-test
integration-test
post-integration-test 
```

看看[Cargo Maven 插件](http://cargo.codehaus.org/Maven2+plugin)。它用于将您的 WAR 文件部署到各种容器进行测试。他们肯定会展示您在网站上描述的用例演示。我希望最终，您可以使用 Cargo 部署到您的容器（从早期阶段之一，如预集成测试）

注意，Jenkins 还有一个插件，它是 Cargo 插件的包装器。所以你可以通过 Jenkins 做你需要的事情。另请注意，您不需要将 Jenkins 构建作业作为 mvn clean deploy 运行。您可以拥有一个仅运行集成测试的构建作业，并仅在成功时触发另一个“部署”作业。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T13:04:45.300

如果您真的需要在部署后做一些事情，那么您可以运行故障安全，并暗示 JUnit）作为部署阶段的一部分。

如果有单独的模块，我通常会做什么。因此，您可以拥有一个 maven 项目，其中包含您的项目和一个单独的“部署测试”项目。然后，构建父项目将构建并运行您的战争，然后运行部署测试。您可以正常使用junit。

第二个更适合詹金斯，因为你仍然会有一个项目。

# javascript - javascript: for 循环

> ID：14318416
> 
> 赞同：0
> 
> 时间：2013-01-14T12:29:04.527
> 
> 标签：javascript

为什么这个 for 循环不起作用？

javascript:

```
function create(){
    var newDiv = document.createElement("input");
    var character = "piyush";

    var i =0;

    newDiv.type = "text";
    newDiv.style.background = "red";
    newDiv.style.width ="20px";
    newDiv.style.height ="20px";
    for( i =0; i< character.length ; i++)
    {

    document.getElementById("tryingin").appendChild(newDiv);
    }

 } 
```

html:

```
<div id="tryingin" onMouseOut="create()" style="width:200px; height:200px; background-color:black"> </div> 
```

现在当我在 for 循环中提醒某些东西时。我一个接一个地看到警报框 6 次（作为 character.length == 6）。但为什么我没有看到该部门附加了 6 个文本框？什么应该是一次附加所有 6 个文本框的正确代码。

帮助表示赞赏。问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:31:42.343

如果一个元素已经是 DOM 的一部分，`.appendChild`将首先将它从其当前父级中**分离出来并将其附加到新的父级。**从[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)：

> 如果`child`是对文档中现有节点的引用，`appendChild`则将其从当前位置移动到新位置（即，在将节点附加到其他节点之前，不需要从其父节点中删除该节点）。

在您的情况下，您只有**一个**DOM 元素。如果要复制元素，可以[克隆它](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)：

```
var parent = document.getElementById("tryingin");
for (...) {
    parent.appendChild(newDiv.cloneNode());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:32:20.200

如果将节点附加到新位置，[它会被移动](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)：

> 将一个节点添加到指定父节点的子节点列表的末尾。**如果节点已经存在，则将其从当前父节点中删除**，然后添加到新的父节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:31:59.037

因为您只创建了一个并一遍又一遍地附加它。您必须多次调用`document.createElement("input")`才能创建多个元素。

```
var character = "piyush";

for(var i =0; i < character.length; i++) {
    var newDiv = document.createElement("input");
    newDiv.type = "text";
    newDiv.style.background = "red";
    newDiv.style.width ="20px";
    newDiv.style.height ="20px";
    document.getElementById("tryingin").appendChild(newDiv);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:31:52.317

请将您的代码更改为此功能，它可能会帮助您...

```
 function create(){
        var character = "piyush";
        var i =0;

        for( i =0; i< character.length ; i++)
        {
            var newDiv = document.createElement("input");
            newDiv.type = "text";
            newDiv.style.background = "red";
            newDiv.style.width ="20px";
            newDiv.style.height ="20px";
            document.getElementById("tryingin").appendChild(newDiv);
        }

 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T12:40:13.760

在你的脚本中试试这个

```
 var character = "piyush";

    for(var i =0; i < character.length; i++) 
    {
    var div = document.createElement("input");
    div.style.width = "100px";
    div.style.height = "100px";
    div.style.background = "red";
    div.style.color = "white";
    div.innerHTML = "Hello";

    document.body.appendChild(character );
    } 
```

我希望这对你有用。

# c# - html 列表框点击事件（html 助手类）

> ID：14318418
> 
> 赞同：1
> 
> 时间：2013-01-14T12:29:07.703
> 
> 标签：c#, asp.net-mvc-4, html-helper

我正在使用 asp .net mvc 4.0，vs2010

我有一个列表框和文本区域：

```
<div class="editor-list-field">
        @Html.ListBoxFor(model => model.TableColumn, new SelectList(Model.TableColumn), new { @class = "listofcolumn" , name="listofcolumn"})
        @Html.ValidationMessageFor(model => model.TableColumn)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Content)
    </div>

    <div class="editor-multiline-field">
        @Html.TextAreaFor(model => model.Content, new { cols=60,@rows=10, @class = "textarea" name = "textarea"})
        @Html.ValidationMessageFor(model => model.Content)
    </div> 
```

我想知道，我怎样才能生成一个类似的事件`listbox_doubleclick`（例如：它可能像任何东西一样）并做我必须做的事情。

我必须显示从列表框到 textarea 的选定项目。我想简单地做到这一点。

从昨天开始，我一直在网上寻找解决方案，但无法应用任何东西来完成工作。

**编辑：**

我尝试过一些 jQuery 但没有结果：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js">
$(function() {
    ​$('#listofcolumn')​.dblclick(function() { alert('clicked');
        if ($(this).is(':selected')) {
            var selectedId = $(this).val();
            var selectedText = $(this).text();
            alert(selectedText);
            $('#textarea').val(selectedText);
        }

      });
 });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:42:26.947

你可以使用 jQuery 和[dblClick](http://api.jquery.com/dblclick/)

```
$('textarea').on('dblclick', function () {
  alert('hola');
}); 
```

# java - 如何使用 ResultSet 获取 mysql 数据库中的记录数？

> ID：14318419
> 
> 赞同：0
> 
> 时间：2013-01-14T12:29:08.250
> 
> 标签：java, mysql, jdbc

我正在尝试执行以下代码。正在成功建立连接。

```
String selectq = "select max(id) as max_id from items";
currentCon = (Connection) ConnectionManager.getConnection();
            stmt=(Statement) currentCon.createStatement();
ResultSet rSelect = stmt.executeQuery(selectq); 
```

在执行以下命令时，即使表中没有行，输出也会为 1。

```
rSelect.next();
System.out.println(rSelect.getRow()); 
```

我的要求是检查表中是否没有记录，否则我需要从该表中获取 id 列的最大值。

我尝试了很多事情，比如

```
rSelect.last();
rSelect.next(); 
```

但是，我无法获得所需的结果。

我在用

*   日食靛蓝 3.7
*   JDK 1.6.0_37
*   雄猫 7
*   MySQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:35:52.787

你不应该忽视[`ResultSet#next()`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29). `false`如果没有行，则返回。此外，要获得第一列作为`int`，您应该使用[`ResultSet#getInt()`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getInt%28int%29)，传递列索引或列标签。

```
if (resultSet.next()) {
    int max = resultSet.getInt("max_id");
} else {
    // There are no records. Set max to -1 or something?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:32:31.127

您必须使用`rSelect.getInt(1)`而不是`rSelect.getRow()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:38:35.353

像这样使用 ResultSet：

```
while (resultSet.next()) {
  //do something with this row, e.g:
  int id = resultSet.getInt(1);
  //...
} 
```

while 循环将遍历所有行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:53:49.310

它在添加如下 If 语句后起作用：

```
String id = "";

if(rSelect.next()){
    id = rSelect.getString(1);
} 
```

因为，根据我的查询，只能存在一行或不存在。

# jsf - 咆哮消息：仅显示可粘贴的错误消息（JSF Primefaces）

> ID：14318421
> 
> 赞同：1
> 
> 时间：2013-01-14T12:29:11.293
> 
> 标签：jsf, primefaces, growl

我正在寻找一种解决方案，**仅在 primefaces** **stickable**中显示咆哮元素的*错误消息*。我找到了这个[答案](https://stackoverflow.com/questions/4701102/show-messages-based-on-severity-in-two-pgrowl)，但它是从 2011 年 1 月开始的。关于这个或另一个人的想法是否有任何更新？

 **我期待着答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:44:50.477

您应该看看 PrimeFaces 3.3 中的新功能。

[http://blog.primefaces.org/?p=1894](http://blog.primefaces.org/?p=1894)

现在有一个属性`severity`允许您指定仅显示某些严重级别的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:39:59.880

尝试使用

```
<p:growl severity="error"/> 
```**

# windows - Window 2008 Tomcat 7 MS SQL Server 2008R2 - 无法识别 JNDI JDBC 驱动程序

> ID：14318423
> 
> 赞同：3
> 
> 时间：2013-01-14T12:29:29.300
> 
> 标签：windows, tomcat, jdbc, sql-server-2008-r2, jndi

首先我必须说我已经寻找过这个问题并且我找到了几个答案，没有一个对我有用。

我在带有 JDK 1.7.0.10 的 Windows 2008 x64 上将 Tomcat 7 作为服务运行。

我正在尝试使用已在 Windows 7 x86 上的 Tomcat 6.0.36（未作为服务安装）中成功运行的 JDBC 连接池。配置很简单：

1-。将 sqljdbc4.jar 复制到 %CATALINA_HOME%\lib 目录中。

2-。编辑 %CATALINA_HOME%\webapps\APP_NAME\META-INF\context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/APP_NAME">
    <Resource name="jdbc/poolConexiones"
            auth="Container"
            driverclassname="com.microsoft.sqlserver.jdbc.SQLServerDriver"
            maxactive="100"
            maxidle="30"
            maxwait="10000"
            username="user"
            password="pass"
            type="javax.sql.DataSource"
            url="jdbc:sqlserver://localhost:1433;databaseName=Name">
    </Resource>
</Context> 
```

3-。编辑 web.xml：

```
<resource-ref>
    <res-ref-name>jdbc/poolConexiones</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
    <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
```

它工作正常！

但是，当我尝试在

*   a) 作为服务安装的 w2008 x64 和 tomcat (v 6 和 7)
*   b) wXP x86 和 tomcat (v 6 和 7) 作为服务安装

按照**相同的步骤**，我得到：

```
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044) 
```

然后我尝试了不同的东西：

*   在 service laucher 上修改 jvm 的类路径：

    Java 类路径：C:\Program Files\Apache Software Foundation\Tomcat 7.0\lib\sqljdbc4.jar;C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation \Tomcat 7.0\bin\tomcat-juli.jar

适用于WinXP，但不适用于w2008。

*   使用常规 Tomcat 版本（不是服务），修改 Catalina.bat 以在类路径中包含 sqljdbc4.jar：

    if "%CLASSPATH%" == "" goto emptyClasspath set "CLASSPATH=%CATALINA_HOME%\lib\sqljdbc4.jar;%CLASSPATH%;" :emptyClasspath 设置“CLASSPATH=%CATALINA_HOME%\lib\sqljdbc4.jar;%CLASSPATH%%CATALINA_HOME%\bin\bootstrap.jar”

    如果不是 "%CATALINA_TMPDIR%" == "" goto gotTmpdir set "CATALINA_TMPDIR=%CATALINA_BASE%\temp" :gotTmpdir

在 WinXP 上工作，但在 w2008 上没有工作

所以，在以不同的顺序重复几次相同的步骤并尝试不同版本的 tomcat 和 Java 之后，**我不知道还能做什么**。

请记住，此应用程序在 w7 x86 和 tomcat 6 到 Netbeans 6.91 中以这种配置运行，无需任何修改，它在 Win XP x86 上运行，编辑类路径。

那有什么问题呢？

对不起，我的英语不好。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T03:21:05.420

另外需要注意的是，如果您的数据库服务中运行了多个 SQLServer 实例，则需要通过在 context.xml 中提供**instanceName**属性来限定您要连接的实例。在 Tomcat 6 中，context.xml 位于 CATALINA_HOME/conf 文件夹中。

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/APP_NAME">
   <Resource name="jdbc/poolConexiones"
        auth="Container"
        driverclassname="com.microsoft.sqlserver.jdbc.SQLServerDriver"
        maxactive="100"
        maxidle="30"
        maxwait="10000"
        username="user"
        password="pass"
        type="javax.sql.DataSource"
      url="jdbc:sqlserver://localhost:1433;instanceName=myInstance;databaseName=Name">
   </Resource>
</Context> 
```

# annotations - xtext检查注释问题

> ID：14318424
> 
> 赞同：0
> 
> 时间：2013-01-14T12:29:43.023
> 
> 标签：annotations, xtext

我正在使用 @Check 注释来验证我的 dsl。我的 dsl 用于 json。

起初，该方法是为特定对象调用的，每次更改一次，但它突然不再以相同的方式工作（我不确定我做了什么影响它）方法签名是：

```
@Check 
public void validateJson(ObjectValue object) {...} 
```

现在它为gui中的每个节点输入这个方法虽然我只编辑一个节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:11:58.700

验证器在这种情况下正常工作。当 Xtext 重新解析您的模型时，它不能总是避免重新创建在 Check 表达式中验证的 EMF 模型 - 换句话说，该模型实际上每次都重新创建，因此需要完全验证。

但是，在某些情况下，可能只需要重新创建模型的一部分 - 在这些情况下，可能并非所有元素都经过重新验证（但是，我不确定是否包含此优化）。

# c++ - 模板类中静态字段的初始化器列表因 clang 而失败

> ID：14318426
> 
> 赞同：6
> 
> 时间：2013-01-14T12:29:46.690
> 
> 标签：c++, templates, static, c++11, clang

以下代码片段在 g++ 和 clang++ 下运行良好：

```
// bsp1.cc
class A {
public:
  A(int, char const *);

  int value;
  const char * name;
};

class B {
public:
  static const A many_as[];
};

A const B::many_as[] 
{ { 0, "zero" }, 
    { 1, "one" }, 
    { 2, "two" }, 
    { 3, "three" }, 
    { 77, 0 } }; 
```

当我将 B 类更改为模板时：

```
// bsp2.cc
class A {
public:
  A(int, char const *);

  int value;
  const char * name;
};

template<typename T>
class B {
public:
  static const A many_as[];
};

template<>
A const B< int >::many_as[] 
{ { 0, "zero" }, 
  { 1, "one" }, 
  { 2, "two" }, 
  { 3, "three" }, 
  { 77, 0 } }; 
```

clang++ 失败：

```
tmp/bsp2.cc:19:1: error: expected ';' after top level declarator
{ { 0, "zero" }, 
^
1 error generated. 
```

g++ 仍然对此感到满意。

版本信息：g++（Debian 4.7.2-4）4.7.2，clang 3.3版（主干171722）

当我添加`=`为

```
A const B< int >::many_as[] = 
```

clang++ 也很高兴。

我的问题：

1.  bsp2.cc 有效吗？（换句话说：这是clang++的问题吗？）
2.  带和不带 的 bsp2 之间是否存在语义差异`=`？（即我可以使用该版本`=`作为“解决方法”吗？）
3.  （额外的问题：）你能指出我描述这个的 C++ 11 标准的段落吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:41:26.357

9.4.2p2 规定了非模板静态数据成员的定义；暗示，它的语法与任何其他定义相同，因此大*括号或相等初始化器*的大*括号初始化列表*绝对没问题。14p1 和 14.5.1.3 涵盖了模板静态数据成员的显式特化的定义，并且再次暗示静态数据成员的任何有效*定义*对于模板静态数据成员显式特化的定义都是有效的。

 **实际上，14.7.3p13 显式演示了在模板静态数据成员显式特化中使用花*括号初始化列表*来区分默认初始化和定义：

```
struct X {};
template<typename> struct Q { static X i; };
template<> X Q<int>::i{}; 
```

由于 clang 无法从标准中的示例中接受此语法，因此很明显该 bug 存在于 clang 中。

在这种情况下，您的解决方法绝对有效。插入 an 的语义含义（8.5p14）`=`是*直接初始化*（8.5p16）变为*复制初始化*（8.5p15）。由于您的初始化程序是一个花*括号初始化列表*（8.5p17），因此执行*列表初始化*（8.5.4），并从*直接列表初始化*更改为*复制列表初始化*（8.5.4p1），但由于您的对象是一个数组，因此是一个聚合（8.5.1p1），执行聚合初始化，这对直接/复制初始化的区别是盲目的。

请注意，构造函数的存在`A`防止它成为聚合，这意味着构造函数很可能在运行时被调用。如果您删除构造函数，那么数组`A`将是一个递归聚合，并且可以在编译时完全初始化（数据将直接放入您的目标文件中）。**

# php - 在网站上直播谁在线

> ID：14318430
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:29:59.887
> 
> 标签：php, javascript, ajax

我有一个小脚本，它告诉我谁在线 o 网站，但在 db 中由 ip2long 存储，我想存储用户的真实 IP 地址....请 sombody 可以帮助我吗？这是我的代码`

```
<?php

require "connect.php";
require "functions.php";

// We don't want web bots scewing our stats:
if(is_bot()) die();

$stringIp = $_SERVER['REMOTE_ADDR'];
$intIp = long2ip($stringIp);

// Checking wheter the visitor is already marked as being online:
$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip=".$intIp);

if(!mysql_num_rows($inDB))
{
    // This user is not in the database, so we must fetch
    // the geoip data and insert it into the online table:

    if($_COOKIE['geoData'])
    {
        // A "geoData" cookie has been previously set by the script, so we will use it

        // Always escape any user input, including cookies:
        list($city,$countryName,$countryAbbrev) = explode('|',mysql_real_escape_string(strip_tags($_COOKIE['geoData'])));
    }
    else
    {
        // Making an API call to Hostip:

        $xml = file_get_contents('http://api.hostip.info/?ip='.$stringIp);

        $city = get_tag('gml:name',$xml);
        $city = $city[1];

        $countryName = get_tag('countryName',$xml);
        $countryName = $countryName[0];

        $countryAbbrev = get_tag('countryAbbrev',$xml);
        $countryAbbrev = $countryAbbrev[0];

        // Setting a cookie with the data, which is set to expire in a month:
        setcookie('geoData',$city.'|'.$countryName.'|'.$countryAbbrev, time()+60*60*24*30,'/');
    }

    $countryName = str_replace('(Unknown Country?)','UNKNOWN',$countryName);

    // In case the Hostip API fails:

    if (!$countryName)
    {
        $countryName='UNKNOWN';
        $countryAbbrev='XX';
        $city='(Unknown City?)';
    }

    mysql_query("   INSERT INTO tz_who_is_online (ip,city,country,countrycode)
                    VALUES(".$intIp.",'".$city."','".$countryName."','".$countryAbbrev."')");
}
else
{
    // If the visitor is already online, just update the dt value of the row:
    mysql_query("UPDATE tz_who_is_online SET dt=NOW() WHERE ip=".$intIp);
}

// Removing entries not updated in the last 10 minutes:
mysql_query("DELETE FROM tz_who_is_online WHERE dt<SUBTIME(NOW(),'0 0:10:0')");

// Counting all the online visitors:
list($totalOnline) = mysql_fetch_array(mysql_query("SELECT COUNT(*) FROM tz_who_is_online"));

// Outputting the number as plain text:
echo $totalOnline;

?>

and this is for functions:

<?php

function get_tag($tag,$xml)
{
    preg_match_all('/<'.$tag.'>(.*)<\/'.$tag.'>$/imU',$xml,$match);
    return $match[1];
}

function is_bot()
{
    /* This function will check whether the visitor is a search engine robot */

    $botlist = array("Teoma", "alexa", "froogle", "Gigabot", "inktomi",
    "looksmart", "URL_Spider_SQL", "Firefly", "NationalDirectory",
    "Ask Jeeves", "TECNOSEEK", "InfoSeek", "WebFindBot", "girafabot",
    "crawler", "www.galaxy.com", "Googlebot", "Scooter", "Slurp",
    "msnbot", "appie", "FAST", "WebBug", "Spade", "ZyBorg", "rabaz",
    "Baiduspider", "Feedfetcher-Google", "TechnoratiSnoop", "Rankivabot",
    "Mediapartners-Google", "Sogou web spider", "WebAlta Crawler","TweetmemeBot",
    "Butterfly","Twitturls","Me.dium","Twiceler");

    foreach($botlist as $bot)
    {
        if(strpos($_SERVER['HTTP_USER_AGENT'],$bot)!==false)
        return true;    // Is a bot
    }

    return false;   // Not a bot
}
?> 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:34:37.050

IP 地址*应*作为`ip2long`函数的结果存储。然后，当您从数据库中获取结果时，您可以使用该`long2ip`函数将整数转换为点表示法 IP 地址。

准备要从数据库中插入的 IP 地址：

```
$ip = ip2long($_SERVER['REMOTE_ADDR']); 
```

从数据库中取出一个数据库并以点分格式返回它：

```
$ip = long2ip($row['ip_address']); 
```

简单的。

# c# - 在win8 Metro应用程序中旋转视频文件

> ID：14318433
> 
> 赞同：1
> 
> 时间：2013-01-14T12:30:09.597
> 
> 标签：c#, video, rotation, microsoft-metro

我通过以下代码观察了属性

```
VideoProperties videoProperties = await file.Properties.GetVideoPropertiesAsync();
List<string> tmp = new List<string> { };
var fileProperties2 = await file.Properties.RetrievePropertiesAsync(tmp);
foreach (var p in fileProperties2)
{                    
    Debug.WriteLine(p);  
} 
```

我注意到属性“ `System.Video.Orientation`”与两个视频流不同（当 MSFT 相机 ap 正在录制视频时`Landscape`）`Portrait`我的问题是有没有办法修改这个属性？
我可以使用`MF_MT_XXX`媒体类型吗？（详细属性如下快捷方式）（[http://msdn.microsoft.com/zh-tw/library/windows/apps/hh452756.aspx](http://msdn.microsoft.com/zh-tw/library/windows/apps/hh452756.aspx)）还是有其他方法可以修改此属性？
我尝试了很多方法，但未能设置此属性。

# java - java中如何保证注解的执行顺序？

> ID：14318438
> 
> 赞同：12
> 
> 时间：2013-01-14T12:30:18.800
> 
> 标签：java, spring, annotations

我有 2 个自定义注释，但一个应该始终在另一个之前执行。我如何确保这一点？是否有某种排序或使用其他方法定义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-19T13:29:27.527

您可以使用 @Order 注释确保自定义注释的顺序。

[https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/core/annotation/Order.html](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/core/annotation/Order.html)

例子：

第一个注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface CustomAnnotation {
}

@Aspect
@Component
@Order(value = 1)
public class CustomAnnotationInterceptor {

    @Before("@annotation(customAnnotation )")
    public void intercept(JoinPoint method, CustomAnnotation customAnnotation ) {
        //Code here
    }
} 
```

第二个注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface CustomAnnotationTwo {
}

@Aspect
@Component
@Order(value = 2)
public class CustomAnnotationInterceptorTwo {

    @Before("@annotation(customAnnotationTwo )")
    public void intercept(JoinPoint method, CustomAnnotationTwo customAnnotationTwo ) {
        //Code here
    } 
```

使用它们：

```
@CustomAnnotationTwo
@CustomAnnotation
public void someMethod(){
} 
```

在此示例中，CustomAnnotationInterceptor 将首先执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T23:45:40.350

From [http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-ataspectj-advice-ordering](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html#aop-ataspectj-advice-ordering)

Spring AOP follows the same precedence rules as AspectJ to determine the order of advice execution. The highest precedence advice runs first "on the way in" (so given two pieces of before advice, the one with highest precedence runs first). "On the way out" from a join point, the highest precedence advice runs last (so given two pieces of after advice, the one with the highest precedence will run second).

When two pieces of advice defined in different aspects both need to run at the same join point, unless you specify otherwise the order of execution is undefined. You can control the order of execution by specifying precedence. This is done in the normal Spring way by either implementing the org.springframework.core.Ordered interface in the aspect class or annotating it with the Order annotation. Given two aspects, the aspect returning the lower value from Ordered.getValue() (or the annotation value) has the higher precedence.

When two pieces of advice defined in the same aspect both need to run at the same join point, the ordering is undefined (since there is no way to retrieve the declaration order via reflection for javac-compiled classes). Consider collapsing such advice methods into one advice method per join point in each aspect class, or refactor the pieces of advice into separate aspect classes - which can be ordered at the aspect level.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-15T02:20:44.123

我知道这是一个非常古老的问题，但我只是想记录我的发现。谁能确认这些是否正确？此页面中已经提到，Spring 文档说除非使用 @Order 注释，否则注释的执行是未定义的。我尝试重命名Aspect类，测试了很多次，发现Aspect类是按照名字的字母顺序执行的，结果是一致的。

下面是我的示例代码：

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface A {}

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface B {}

@Aspect
public class A_Aspect {

@Around("@annotation(mypackage.A)")
public void around(ProceedingJoinPoint joinPoint) {
    System.out.println("A_Aspect");
    joinPoint.proceed();
    }
}

@Aspect
public class B_Aspect {

    @Around("@annotation(mypackage.B)")
    public void around(ProceedingJoinPoint joinPoint) {
        System.out.println("B_Aspect");
        joinPoint.proceed();
    }
}

class AdvisedClass{
    @B
    @A
    public void advisedMethod(){}
} 
```

当我尝试执行建议方法（）时，以下是我收到的日志：

```
A_Aspect
B_Aspect 
```

我更改了注释声明顺序：

```
@A
@B  
public void advisedMethod(){} 
```

以下是日志：

```
A_Aspect
B_Aspect 
```

我将注释@A 重命名为@C，以下是日志：

```
A_Aspect
B_Aspect 
```

但是，当我尝试将 Aspect 类 A_Aspect 重命名为 C_Aspect 时，以下是日志：

```
B_Aspect
C_Aspect 
```

正如我所说，我希望有人确认这一点，因为我找不到任何文档

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-14T13:20:36.170

结帐[https://stackoverflow.com/a/30222541/810109](https://stackoverflow.com/a/30222541/810109)：至少在 Java 8 中，您可以按保证的顺序检索注解，因此您只需按正确的顺序声明它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T12:49:26.790

您可以使用 EJB 拦截器来实现。

您可以简单地通过@Interceptors( { MyInterceptor.class } ) 添加拦截器，然后添加第二个 @MyInterceptorConfiguration(value=something)。

正如 bkail 在[他们的回答](https://stackoverflow.com/questions/11326862/adding-ejb-interceptors-with-custom-annotations/11330748#11330748)中所说：

> 这仅在 EE 6 (EJB 3.1) 中使用 CDI 原型注释（参见拦截器绑定页面的示例）才有可能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T21:35:36.240

第一个注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface FirstAnnotation {
  String value() default "";
} 
```

第二个注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface SecondAnnotation {
  String value() default "";
} 
```

使用示例：

```
public class Test {

  @SecondAnnotation("second annotation")
  @FirstAnnotation("first annotation")
  private String annotatedField1 = "value of field 1";

  @SecondAnnotation("second annotation")
  @FirstAnnotation("first annotation")
  private String annotatedField2 = "value of field 2";

  @SecondAnnotation("second annotation")
  private String annotatedField3 = "value of field 3";

  @FirstAnnotation("first annotation")
  private String annotatedField4 = "value of field 4";

  // Sample
  public static void processAnnotatedFields( final Object obj ) throws IllegalArgumentException, IllegalAccessException {

    for ( final Field field : getFieldsFornAnotation( obj, FirstAnnotation.class ) ) {
      // Do something with fields that are annotated with @FirstAnnotation
      final FirstAnnotation an = field.getAnnotation( FirstAnnotation.class );
      System.out.print( "@" +an.annotationType().getSimpleName()+ "(" +an.value()+ "): " );
      System.out.println( field.getName()+ " = '" +field.get(obj)+ "'" );
    }

    System.out.println();

    for ( final Field field : getFieldsFornAnotation( obj, SecondAnnotation.class ) ) {
      // Do something with fields that are annotated with @SecondAnnotation
      final SecondAnnotation an = field.getAnnotation( SecondAnnotation.class );
      System.out.print( "@" +an.annotationType().getSimpleName()+ "(" +an.value()+ "): " );
      System.out.println( field.getName()+ " = '" +field.get(obj)+ "'" );
    }

  }

  /**
   * Collect object fields annotated with "annotationClass"
   * This can be saved in static map to increase performance.
   */
  private static final Set<Field> getFieldsFornAnotation( final Object o, final Class<? extends Annotation> annotationClass ) {
    final Set<Field> fields = new LinkedHashSet<Field>();

    if ( o == null || annotationClass == null )
      return fields;

    for (final Field field : o.getClass().getDeclaredFields()) {
      if (field.isAnnotationPresent(annotationClass)) {
        field.setAccessible( true );
        fields.add( field );
      }
    }
    return fields;
  }

  public static void main(final String[] args) throws IllegalArgumentException, IllegalAccessException {

    processAnnotatedFields( new Test() );

  }

} 
```

结果/输出：

```
@FirstAnnotation(first annotation): annotatedField1 = 'value of field 1'
@FirstAnnotation(first annotation): annotatedField2 = 'value of field 2'
@FirstAnnotation(first annotation): annotatedField4 = 'value of field 4'

@SecondAnnotation(second annotation): annotatedField1 = 'value of field 1'
@SecondAnnotation(second annotation): annotatedField2 = 'value of field 2'
@SecondAnnotation(second annotation): annotatedField3 = 'value of field 3' 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-14T12:43:20.560

是的，我认为注释本身为 @First 和 @Second 等提供注释，因此您可以尝试

# mingw - SDL 1.3/2.0 设置

> ID：14318447
> 
> 赞同：13
> 
> 时间：2013-01-14T12:30:48.777
> 
> 标签：mingw, sdl, codeblocks

过去几个月我一直在使用 sdl 1.2（在 Windows 上）。我正在考虑迁移到 1.3。所以我使用 cmake 和代码块来创建静态和动态库。现在我很困惑如何编译程序。我包含了 sdl.h 头文件。在链接器中添加了静态库。但是当我尝试编译很多未定义的错误不断发生：

```
D:\using font\sdl_2test\main.c||In function 'SDL_main':|
D:\using font\sdl_2test\main.c|9|warning: passing argument 6 of 'SDL_CreateWindow' makes integer from pointer without a cast|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\include\SDL_video.h|405|note: expected 'Uint32' but argument is of type 'void *'|
D:\using font\sdl_2test\main.c|11|warning: control reaches end of non-void function|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsmodes.c.obj)||In function `WIN_GetDisplayMode':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsmodes.c|62|undefined reference to `CreateDCW@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsmodes.c|71|undefined reference to `CreateCompatibleBitmap@12'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsmodes.c|72|undefined reference to `GetDIBits@28'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsmodes.c|73|undefined reference to `GetDIBits@28'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsmodes.c|74|undefined reference to `DeleteObject@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsmodes.c|75|undefined reference to `DeleteDC@4'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowswindow.c.obj)||In function `WIN_GetWindowGammaRamp':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|530|undefined reference to `CreateDCW@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|532|undefined reference to `GetDeviceGammaRamp@8'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|536|undefined reference to `DeleteDC@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|536|undefined reference to `DeleteDC@4'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowswindow.c.obj)||In function `WIN_SetWindowGammaRamp':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|511|undefined reference to `CreateDCW@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|513|undefined reference to `SetDeviceGammaRamp@8'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|517|undefined reference to `DeleteDC@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowswindow.c|517|undefined reference to `DeleteDC@4'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsframebuffer.c.obj)||In function `WIN_DestroyWindowFramebuffer':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|114|undefined reference to `DeleteDC@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|118|undefined reference to `DeleteObject@4'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsframebuffer.c.obj)||In function `WIN_UpdateWindowFramebuffer':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|100|undefined reference to `BitBlt@36'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsframebuffer.c.obj)||In function `WIN_CreateWindowFramebuffer':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|36|undefined reference to `DeleteDC@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|39|undefined reference to `DeleteObject@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|50|undefined reference to `CreateCompatibleBitmap@12'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|51|undefined reference to `GetDIBits@28'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|52|undefined reference to `GetDIBits@28'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|53|undefined reference to `DeleteObject@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|83|undefined reference to `CreateCompatibleDC@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|84|undefined reference to `CreateDIBSection@24'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsframebuffer.c|91|undefined reference to `SelectObject@8'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsshape.c.obj)||In function `CombineRectRegions':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsshape.c|53|undefined reference to `CreateRectRgn@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsshape.c|55|undefined reference to `CombineRgn@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsshape.c|56|undefined reference to `DeleteObject@4'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsopengl.c.obj)||In function `WIN_GL_SwapWindow':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsopengl.c|668|undefined reference to `SwapBuffers@4'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsopengl.c.obj)||In function `WIN_GL_ChoosePixelFormatARB':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsopengl.c|399|undefined reference to `ChoosePixelFormat@8'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsopengl.c|399|undefined reference to `SetPixelFormat@12'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsopengl.c.obj)||In function `WIN_GL_SetupWindow':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsopengl.c|518|undefined reference to `SetPixelFormat@12'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowsopengl.c.obj)||In function `WIN_GL_ChoosePixelFormat':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsopengl.c|206|undefined reference to `DescribePixelFormat@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowsopengl.c|210|undefined reference to `DescribePixelFormat@16'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowskeyboard.c.obj)||In function `IPPASink_QueryInterface@12':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|1117|undefined reference to `IID_IUnknown'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowskeyboard.c.obj)||In function `UIElementSink_QueryInterface@12':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|1011|undefined reference to `IID_IUnknown'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowskeyboard.c.obj)||In function `IME_SetupAPI':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|613|undefined reference to `ImmGetIMEFileNameA@12'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|626|undefined reference to `ImmGetContext@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|629|undefined reference to `ImmReleaseContext@8'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowskeyboard.c.obj)||In function `IME_ClearComposition':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|679|undefined reference to `ImmGetContext@4'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|683|undefined reference to `ImmNotifyIME@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|687|undefined reference to `ImmNotifyIME@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|688|undefined reference to `ImmReleaseContext@8'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|685|undefined reference to `ImmSetCompositionStringW@24'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowskeyboard.c.obj)||In function `IME_GetCompositionString':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|695|undefined reference to `ImmGetCompositionStringW@16'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|700|undefined reference to `ImmGetCompositionStringW@16'|
..\..\GameDev\SDL_2\static\libSDL2.a(SDL_windowskeyboard.c.obj)||In function `IME_GetId':|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|547|undefined reference to `ImmGetIMEFileNameA@12'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|562|undefined reference to `GetFileVersionInfoSizeA@8'|
D:\GameDev\SDL-2.0\SDL-2.0.0-6799\src\video\windows\SDL_windowskeyboard.c|566|undefined reference to `GetFileVersionInfoA@16'|
||More errors follow but not being shown.|
||Edit the max errors limit in compiler options...|
||=== Build finished: 50 errors, 2 warnings ===| 
```

我错过了什么？：/

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-10T13:59:44.323

我也在寻找这个问题的答案，因为我找不到，这对我有用：

如果使用 mingw 作为编译器，则必须按此顺序链接到以下库：

```
-lmingw32 -lSDL2main -lSDL2 -lm -ldinput8 -ldxguid -ldxerr8 -luser32 -lgdi32 -lwinmm -limm32 -lole32 -loleaut32 -lshell32 -lversion -luuid 
```

# android - Android - 如何在共享菜单中列出？

> ID：14318449
> 
> 赞同：3
> 
> 时间：2013-01-14T12:30:56.190
> 
> 标签：android, air, share

我正在使用适用于 Android 的 Air 创建一个消息传递应用程序。我想让其他应用程序通过共享菜单选项将文本共享到我的应用程序。

如何在其中列出我的应用程序？

（这是我想列出的菜单：） ![在此处输入图像描述](../Images/c5f2e8037854be78d97d9fee33d00260.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:35:06.987

在清单文件的 Activity 标记中添加适当的意图过滤器。

```
 <intent-filter>
           <action android:name="android.intent.action.SEND" />
           <category android:name="android.intent.category.DEFAULT" />
           <data android:mimeType="text/plain" />
       </intent-filter> 
```

当 Android 搜索此类 Share Intent 处理程序时，您的 Activity 将显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:36:16.473

要`Activity`处理任何共享内容，`Intent Filter`请将`Manifest`. 例如：

```
<intent-filter>
    <action android:name="android.intent.action.SEND" />

    <category android:name="android.intent.category.DEFAULT" />

    <data android:mimeType="text/plain" />
    <data android:mimeType="image/*" />

</intent-filter> 
```

# jquery - 提交后没有出现确认

> ID：14318450
> 
> 赞同：1
> 
> 时间：2013-01-14T12:30:58.963
> 
> 标签：jquery, html

我希望在用户提交表单时出现确认。问题是确认没有出现，而只是将表单直接导航到目的地。为什么没有出现确认信息？它甚至没有在确认之前检查验证。

下面是html代码：

```
<form id='choiceForm' action='assessment.php' method='post'>
    <select name='currentperson' id='currentperson'>
        <option value=''>Select</option>
        <option value='one'>John Trigger</option>
    </select>

    <p id='submitchoicebtn'><button id='choiceSubmit'>Choose Assessment</button></p>
    <div id='currentAlert'></div>
</form> 
```

下面是jquery：

```
 function choicevalidation() {
var isDataValid = true;
var currentPerson = document.getElementById("currentperson");
var currentPersonMsg = document.getElementById("currentAlert");
currentPersonMsg.innerHTML = "";

if (currentPerson.value == "") {
    currentPersonMsg.innerHTML = "Please Select a Person";
    isDataValid = false; 
}
else {
    currentPersonMsg.innerHTML = "";
}
    return isDataValid;
}

function showConfirm(){
   console.log(choicevalidation());
   if (choicevalidation()) {
      var confirmMsg = confirm("Are you sure you want to Proceed");
      if (confirmMsg == true) {
        return true;   
      } else {
        return false;
      }
   } else
   {
      return false;
   }
} 

$('#choiceForm').on('submit', showConfirm); 
```

**更新：**

下面是我的实际代码，但我收到的问题是这个错误：

jQuery代码：

```
 <script type="text/javascript">

       function choicevalidation() {

                var isDataValid = true;

                var currentAssesO = document.getElementById("currentAssessment");

                var currentAssesMsgO = document.getElementById("currentAlert");

          currentAssesMsgO.innerHTML = "";

      if (currentAssesO.value == ""){
          $('#targetdiv').hide();
          currentAssesMsgO.innerHTML = "Please Select an Assessment to edit from the Assessment Drop Down Menu";
          isDataValid = false; 
        }else{
            currentAssesMsgO.innerHTML = "";
        }
            return isDataValid;

        }

             function showConfirm(){

              var examInput = document.getElementById('curentAssessment').value;
              var dateInput = document.getElementById('currentDate').value;
              var timeInput = document.getElementById('currentTime').value;

              if (choicevalidation()) {

             var confirmMsg=confirm("Are you sure you want to take the following Assessment:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

             if (confirmMsg==true)
             {
             return true;    
         }else {
        return false;
      }
  } else{
      return false;
   }
} 

   $('#choiceForm').on('submit', showConfirm);    

    </script> 
```

PHP/HTML 代码：

```
<?php

// connect to the database

//query which compiles modules drop down menu

$moduleHTML = "";
$moduleHTML .= '<select name="modules" id="modulesDrop">' . PHP_EOL;
$moduleHTML .= '<option value="">Please Select</option>' . PHP_EOL;

while ($sqlstmt->fetch()) {
    $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>' . PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
}

$moduleHTML .= '</select>';

$pHTML = "";

?> 

<h1>TAKE AN ASSESSMENT</h1>   

<form action="<?php
echo htmlentities($_SERVER['PHP_SELF']);
?>" method="post" onsubmit="return validation(event);"> 
<table> 
<tr> 
<th>Module: <?php
echo $moduleHTML;
?></th> 
</tr> 
</table> 
<p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p> 
<div id="moduleAlert"></div> 
<div id="targetdiv"></div> 
</form> 

<?php

if (isset($_POST['moduleSubmit'])) {
    //query which compiles drop down menu below

    $sessionHTML = '<select name="session" id="sessionsDrop">' . PHP_EOL;
    $sessionHTML .= '<option value="">Please Select</option>' . PHP_EOL;

    while ($sessionqrystmt->fetch()) {
        $sessionHTML .= sprintf("<option value='%s'>%s - %s - %s</option>", $dbSessionId, $dbSessionName, date("d-m-Y", strtotime($dbSessionDate)), date("H:i", strtotime($dbSessionTime))) . PHP_EOL;
    }

    $sessionHTML .= '</select>';

    $assessmentform = "<div id='lt-container'> 
<form action='" . htmlentities($_SERVER['PHP_SELF']) . "' method='post' id='assessmentForm'> 
<p id='warnings'>{$pHTML}</p> 
{$outputmodule} 
<p><strong>Assessments:</strong> {$sessionHTML} </p>   
</form> 
</div>";

    echo $assessmentform;

    $choosesession = " 
<div id='rt-container'> 
<form id='choiceForm' action='assessment.php' method='post'> 

    <p><strong>Chosen Assessment:</strong></p> 
    <table> 
    <tr> 
    <th></th> 
    <td><input type='hidden' id='currentId' name='Idcurrent' readonly='readonly' value='' /> </td> 
    </tr> 
    </table> 
    <p id='submitchoicebtn'><button id='choiceSubmit'>Choose Assessment</button></p> 
    <div id='currentAlert'></div> 
    </form> 

    </div> 
";

    echo $choosesession;

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:33:04.827

您有语法错误，因此 JS 失败并且浏览器正在提交表单。

此行缺少结尾 '"'。

```
 var confirmMsg=confirm("Are you sure you want to Proceed); 
```

将其更改为：

```
 var confirmMsg=confirm("Are you sure you want to Proceed"); 
```

**编辑**

更改触发确认的事件。您在“onClick”上触发它，这可能在表单已经提交之后发生，将您的最后一行更改为：

```
 $('#choiceForm').on('submit', showConfirm); 
```

*这将在执行提交之前*触发该框。让我知道是否可以为您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:24:08.593

Deleteman 回答有效，但您需要阻止提交，当没有选择任何内容或单击确认弹出窗口中的取消时。所以我将添加到条件：

```
return false; 
```

所以整个js将是：

```
function choicevalidation() {
var isDataValid = true;
var currentPerson = document.getElementById("currentperson");
var currentPersonMsg = document.getElementById("currentAlert");
currentPersonMsg.innerHTML = "";

if (currentPerson.value == "") {
    currentPersonMsg.innerHTML = "Please Select a Person";
    isDataValid = false; 
}
else {
    currentPersonMsg.innerHTML = "";
}
    return isDataValid;
}

function showConfirm(){
   console.log(choicevalidation());
   if (choicevalidation()) {
      var confirmMsg = confirm("Are you sure you want to Proceed");
      if (confirmMsg == true) {
        return true;   
      } else {
        return false;
      }
   } else
   {
      return false;
   }
} 

$('#choiceForm').on('submit', showConfirm); 
```

# bash - 如何在 if 语句中使用位运算符？

> ID：14318451
> 
> 赞同：16
> 
> 时间：2013-01-14T12:31:09.047
> 
> 标签：bash, shell, bit-manipulation

我想写这样的东西：

```
if [[ ( releases["token"] & $MASK ) -eq 1 ]]; then 
```

但我得到的错误是：

> 意外标记“&”，应为条件二元运算符

如何在 if 语句中使用位运算符？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-14T12:51:33.727

您可以使用[`Arithmetic Expansion`](http://www.gnu.org/software/bash/manual/bashref.html#Arithmetic-Expansion)：

```
(((5&3)==1)) && echo YES || echo NO 
```

它会打印**YES**

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-03-11T04:37:55.493

# 逻辑与语法

## .... 或者：“还有什么要说的？”

乍一看，正如@chepner 的[评论](https://stackoverflow.com/questions/14318451/how-to-use-bitwise-operators-in-if-statements/23917229#comment59522097_35932323)中指出的那样，问题可能只是语法之一，这会导致编译错误（`unexpected token '&', conditional binary operator expected`）。事实上，[@kev 的答案](https://stackoverflow.com/a/14318764/3102305)通过使用[算术扩展](http://www.gnu.org/software/bash/manual/bashref.html#Arithmetic-Expansion)来解决这个问题，这适用于[@Gustavo 的答案](https://stackoverflow.com/a/23917229/3102305)`If`中的语句 。

然而，**“*如何*在 if 语句**中使用按位运算符”的问题以更一般的方式表述，并寻求关于如何***使用***按位运算符进行检查的答案`$MASK`（这不是“如何避免语法错误的问题”使用二进制比较”）。

实际上，可以假设示例代码

> ```
> if [[ ( releases["token"] & $MASK ) -eq 1 ]]; then 
> ```

是一项正在寻找解决方案的工作，并被明确标记为“类似......”。现在@kev 的任意假设

```
 releases["token"]=3
 MASK=5 
```

可能会隐藏一个事实，即在使用中也存在逻辑上的误解`-eq 1`。因此，虽然@kev 的答案适用于所选值，但输入例如`4`line in

```
 (((5&4)==1)) && echo YES || echo NO 
```

会打印**NO**，即使在这种情况下也会期望 YES ，因为`4`两者`5`都设置了第 3 位。

**因此，*此*答案解决了问题示例中的此*逻辑*错误，并尝试对问题的标题进行一般性回答。**

# 最重要的事情！

## ...或：“按位表示的背景”

> 要理解按位比较，以位表示形式可视化数字会很有帮助（在以下示例中自上而下列出）：
> 
> ```
> |-----------------------------------------------------------|
> |         |     hexadecimal representation of the value     |
> | bit val |  0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F |
> |---------|---------------------- bit ----------------------|
> |         |  shows if the given value has the given bit set |
> |  0      |  -  x  -  x  -  x  -  x  -  x  -  x  -  x  -  x |
> |  1      |  -  -  x  x  -  -  x  x  -  -  x  x  -  -  x  x |
> |  2      |  -  -  -  -  x  x  x  x  -  -  -  -  x  x  x  x |
> |  3      |  -  -  -  -  -  -  -  -  x  x  x  x  x  x  x  x |
> |---------|---------------------- val ----------------------|
> |     shows the value that the given bit adds to the number |
> |  0   1  |  0  1  0  1  0  1  0  1  0  1  0  1  0  1  0  1 |
> |  1   2  |  0  0  2  2  0  0  2  2  0  0  2  2  0  0  2  2 |
> |  2   4  |  0  0  0  0  4  4  4  4  0  0  0  0  4  4  4  4 |
> |  3   8  |  0  0  0  0  0  0  0  0  8  8  8  8  8  8  8  8 |
> |---------|-------------------------------------------------|
> |sum:  15 |  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 |
> |         |       decimal representation of the value       |
> |===========================================================| 
> ```

它由以下代码段创建：

```
( # start a subshell to encapsulate vars for easy copy-paste into the terminal
  # do not use this in a script!
echo ;
echo "|-----------------------------------------------------------|";
echo "|         |     hexadecimal representation of the value     |";
echo "| bit val |  0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F |";
echo "|---------|---------------------- bit ----------------------|";
echo "|         |  shows if the given value has the given bit set |";
mask=0;
for (( bit=0; bit<4; bit++)); do
    mask=$((1<<bit));
    echo -n "|  $bit      |"
    for ((x=0;x<16;x++)); do ((((x&mask)>0))&&echo -n '  x'||echo -n '  -'); done
    echo " |";
done ;
echo "|---------|---------------------- val ----------------------|";
echo "|     shows the value that the given bit adds to the number |";
mask=0;
for (( bit=0; bit<4; bit++)); do
    mask=$((1<<bit));
    echo -n "|  $bit   $mask  |"
    for ((x=0;x<16;x++)); do echo -n "  $((x&mask))"; done
    echo " |";
done ;
echo "|---------|-------------------------------------------------|";
echo "|sum:  15 |  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 |";
echo "|         |       decimal representation of the value       |";
echo "|===========================================================|";
echo ;
) 
```

# `3 & 5`vs的奇怪案例`4 & 5`

## ... 或：“`==1`与、和`>0`的区别”`&``|``^`

> 如果我们现在检查所提到示例的特殊情况，我们将看到缺点：
> 
> ```
> |------------------ value: 3 / mask: 5 -------------------|
> |         | value | mask  |  and  |  or   |  xor  | xnor  |
> |         |   3   |   5   | 3 & 5 | 3 | 5 | 3 ^ 5 |       |
> | bit val |bit:val|bit:val|bit:val|bit:val|bit:val|bit:val|
> |---------|-------|-------|-------|-------|-------|-------|
> |  0   1  | 1   1 | 1   1 | 1   1 | 1   1 | 0   0 | 0   0 |
> |  1   2  | 2   1 | 0   0 | 0   0 | 1   2 | 1   2 | 1   2 |
> |  2   4  | 0   0 | 4   1 | 0   0 | 1   4 | 1   4 | 1   4 |
> |  3   8  | 0   0 | 0   0 | 0   0 | 0   0 | 0   0 | 0   0 |
> |---------|-------|-------|-------|-------|-------|-------|
> |sum:     |     3 |     5 | ==> 1 |     7 |     6 |     6 |
> |---------|-----------------------------------------------|
> |check:   |  3 & 5 == 1 ? YES     |                       |
> |         |  3 & 5 >= 1 ? YES     | ==>  3 & 5 > 0 ? YES  |
> |=========================================================|
> 
> |------------------ value: 4 / mask: 5 -------------------|
> |         | value | mask  |  and  |  or   |  xor  | xnor  |
> |         |   4   |   5   | 4 & 5 | 4 | 5 | 4 ^ 5 |       |
> | bit val |bit:val|bit:val|bit:val|bit:val|bit:val|bit:val|
> |---------|-------|-------|-------|-------|-------|-------|
> |  0   1  | 0   0 | 1   1 | 0   0 | 1   1 | 1   1 | 1   1 |
> |  1   2  | 0   0 | 0   0 | 0   0 | 0   0 | 0   0 | 0   0 |
> |  2   4  | 4   1 | 4   1 | 1   4 | 1   4 | 0   0 | 0   0 |
> |  3   8  | 0   0 | 0   0 | 0   0 | 0   0 | 0   0 | 0   0 |
> |---------|-------|-------|-------|-------|-------|-------|
> |sum:     |     4 |     5 | ==> 4 |     5 |     1 |     1 |
> |---------|-----------------------------------------------|
> |check:   |  4 & 5 == 1 ? NO      |                       |
> |         |  4 & 5 >= 1 ? YES     | ==>  4 & 5 > 0 ? YES  |
> |=========================================================| 
> ```

**请特别注意以下检查：**

> > ```
> > |---------|-----------------------------------------------|
> > |check:   |  3 & 5 == 1 ? YES     |                       |
> > |         |  3 & 5 >= 1 ? YES     | ==>  3 & 5 > 0 ? YES  |
> > ---------|------------------------------------------------|
> > |check:   |  4 & 5 == 1 ? NO      |                       |
> > |         |  4 & 5 >= 1 ? YES     | ==>  4 & 5 > 0 ? YES  |
> > |---------|-----------------------------------------------| 
> > ```

上面的输出由以下代码段创建：

```
( # start a sub-shell to encapsulate vars for easy copy-paste into the terminal
  # do not use this in a script!
echo ;
for o in 3 4; do
echo "|------------------ value: $o / mask: 5 -------------------|";
echo "|         | value | mask  |  and  |  or   |  xor  | xnor  |";
echo "|         |   $o   |   5   | $o & 5 | $o | 5 | $o ^ 5 |       |";
echo "| bit val |bit:val|bit:val|bit:val|bit:val|bit:val|bit:val|";
echo "|---------|-------|-------|-------|-------|-------|-------|";
mask=0;
for (( bit=0; bit<4; bit++)); do
    mask=$((1<<bit));
    echo -n "|  $bit   $mask "
    echo -n " | $(($o&mask))   $((($o&mask)>0))"
    echo -n " | $((5&mask))   $(((5&mask)>0))"
    echo -n " | $(((($o&mask)&(5&mask))>0))   $((($o&mask)&(5&mask)))"
    echo -n " | $(((($o&mask)|(5&mask))>0))   $((($o&mask)|(5&mask)))"
    echo -n " | $(((($o&mask)^(5&mask))>0))   $((($o&mask)^(5&mask)))"
    echo -n " | $(((($o&mask)^(5&mask))>0))   $((($o&mask)^(5&mask)))"
    echo " |";
done ;
echo "|---------|-------|-------|-------|-------|-------|-------|";
echo -n "|sum:     |     $o |     5 |";
echo " ==> $(($o&5)) |     $(($o|5)) |     $(($o^5)) |     $(($o^5)) |";
echo "|---------|-----------------------------------------------|";
echo -n "|check:   |  $o & 5 == 1 ? $(((($o&5)==1))&&echo YES||echo "NO ")     ";
echo "|                       |";
echo -n "|         |  $o & 5 >= 1 ? $(((($o&5)>=1))&&echo YES||echo "NO ")     ";
echo "| ==>  $o & 5 > 0 ? $(((($o&5)>0))&&echo YES||echo "NO ")  |";
echo "|=========================================================|";
echo ;
done
echo ;
) 
```

# 你好世界！

## ...或：“崛起和闪耀！”

> 那么我们现在该怎么做呢？！让我们想象一下，我们有以下选项集：
> 
> ```
> # option set:
> option_1=1
> option_2=2
> option_3=4
> option_4=8
> option_5=16
> option_6=32
> option_7=64
> option_8=128
> option_9=256 
> ```
> 
> 例如，我们可以在函数中设置这些选项的选择，并将组合代码作为返回值返回。或者反过来：将选择的选项作为一个数字参数传递。无论您的用例是什么，这些选项都将汇总在一起：
> 
> ```
> # set options:
> option = option_1
>        + option_4
>        + option_5
>        + option_9 
> ```
> 
> 我们如何最好地检查设置了哪些选项（`1`, `4`, `5`, & `9`）？当然，这又取决于您的用例，但我有点喜欢这个`case`构造！就像是 ...
> 
> ```
> case $option in
>   0) echo "no option set!";;
>   1) echo "option 1";;
>   2) echo "option 2";;
>   3) echo "option 1 and 2";;
>   *) echo "...";;
> esac 
> ```
> 
> 可以工作，但不是很好，因为我们必须构建每个组合！

# 最终获胜者是 ...

## ……或者：“真实的`Case`”

> 我们可以改用`case`以下方式...
> 
> ```
> echo "check for options using >0:"
> case 1 in
>   $(( (option & option_1) >0 )) ) echo "- option_1 is set";;&
>   $(( (option & option_2) >0 )) ) echo "- option_2 is set";;&
>   $(( (option & option_3) >0 )) ) echo "- option_3 is set";;&
>   $(( (option & option_4) >0 )) ) echo "- option_4 is set";;&
>   $(( (option & option_5) >0 )) ) echo "- option_5 is set";;&
>   $(( (option & option_6) >0 )) ) echo "- option_6 is set";;&
>   $(( (option & option_7) >0 )) ) echo "- option_7 is set";;&
>   $(( (option & option_8) >0 )) ) echo "- option_8 is set";;&
>   $(( (option & option_9) >0 )) ) echo "- option_9 is set";;&
> esac 
> ```
> 
> **请**注意
> 
> *   里面的空格`$(( (option & option_1) >0 )) )`是完全可选的，是为了可读性而添加的。最后一个右括号`)`用于`case`构造。
> *   *command-list*以, 结尾 [`;;&`](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)，以便继续使用下一个选项测试进行评估。如果您想中止对列表的进一步处理，请将`option=0`或 设置为您当前的`option=option_X`.
> 
> ...我们得到以下结果：
> 
> > ```
> > check for options using >0:
> > - option_1 is set
> > - option_4 is set
> > - option_5 is set
> > - option_9 is set 
> > ```
> 
> ### 欢呼！:-)

## 而且`if`我是个有钱人！

> ```
> echo "# to use it in an if statement:";
> if (((option&option_5)>0)); then
>   echo "- option_5 is set"    
> else
>   echo "- option_5 is NOT set"
> fi
> 
> # to use it in an if statement:
> - option_5 is set 
> ```

## 但最后穷人的状况：

> ```
> echo "# or to use it just for conditional execution:";
> (((option&option_6)>0)) \
> && echo "- option_6 is set" \
> || echo "- option_6 is NOT set"
> 
> # or to use it just for conditional execution:
> - option_6 is NOT set 
> ```

# “不回答问题的人已经通过了测试。”

## ……或者：“留下来，”他说，“那只是一个考验。”

（卡夫卡，1975：181）

> 因此，完全有可能使用问题中发布的解决方案，只需稍作改动如下：
> 
> ```
> (
> declare -A releases=([token]=4)
> declare -i MASK=5
> 
> if [[ $(( releases["token"] & $MASK )) -gt 0 ]]; then
>   echo YES
> else
>   echo NO
> fi
> ) 
> ```
> 
> 更改如下： - 使用`$(())`代替进行`()`测试，这将返回按位比较的值 - 使用`-gt 0`代替`-eq 1`

完全在行动：

```
( # start a sub-shell to encapsulate vars for easy copy-paste into the terminal
  # do not use this in a script!
echo ;

for ((i=0; i<9;i++)); do
    o="option_$((i+1))"
    declare -i $o=$((1<<$i))
    echo "$o = ${!o}"
done

echo ;
echo ;

echo "# set options:"
echo "option = option_1"
echo "       + option_4"
echo "       + option_5"
echo "       + option_9"

option=option_1+option_4+option_5+option_9

echo ;
echo ;

echo "check for options using >0:"
case 1 in
  $(( (option & option_1) >0 )) ) echo "- option_1 is set";;&
  $(( (option & option_2) >0 )) ) echo "- option_2 is set";;&
  $(( (option & option_3) >0 )) ) echo "- option_3 is set";;&
  $(( (option & option_4) >0 )) ) echo "- option_4 is set";;&
  $(( (option & option_5) >0 )) ) echo "- option_5 is set";;&
  $(( (option & option_6) >0 )) ) echo "- option_6 is set";;&
  $(( (option & option_7) >0 )) ) echo "- option_7 is set";;&
  $(( (option & option_8) >0 )) ) echo "- option_8 is set";;&
  $(( (option & option_9) >0 )) ) echo "- option_9 is set";;&
esac

echo ;
echo ;

echo "# to use it in an if statement:";
echo "  => if (((option&option_5)>0));";
if (((option&option_5)>0)); then
    echo "- option_5 is set"    
else
    echo "- option_5 is NOT set"
fi

echo ;
echo ;

declare -A releases=([token]=4)
declare -i MASK=5

echo "# Does 4 pass the mask 5 in the test construct?";
echo "  => if [[ $(( releases["token"] & $MASK )) -gt 0 ]];";
if [[ $(( releases["token"] & $MASK )) -gt 0 ]]; then
    echo YES
else
    echo NO
fi

echo ;
echo ;

echo "# or to use it just for conditional execution:";
echo "  => (((option&option_6)>0)) && do || dont";
(((option&option_6)>0)) \
&& echo "- option_6 is set" \
|| echo "- option_6 is NOT set"

) 
```

# 结束

```
Exit 0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-28T16:33:38.677

在 if 语句中：

```
if (((releases["token"] & $MASK) == 1)); then 
  echo YES
else 
  echo NO
fi 
```

# jquery - 带有悬停在线效果的Jqplot折线图

> ID：14318453
> 
> 赞同：2
> 
> 时间：2013-01-14T12:31:14.600
> 
> 标签：jquery, jqplot

我有 jqplot 折线图，其中 y 轴为金额，x 轴为日期。我需要详细说明将鼠标悬停在图表线上时显示的金额。如果有人知道请重播。谢谢……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:27:16.200

你试过**荧光笔**插件吗？

[http://www.jqplot.com/deploy/dist/examples/cursor-highlighter.html](http://www.jqplot.com/deploy/dist/examples/cursor-highlighter.html)

```
<script type="text/javascript" src="../jquery.min.js"></script>
<script type="text/javascript" src="../jquery.jqplot.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.highlighter.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.cursor.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.dateAxisRenderer.min.js"></script>
<link rel="stylesheet" type="text/css" hrf="../jquery.jqplot.min.css" />

$(document).ready(function(){
var line1=[['23-May-08', 578.55], ['20-Jun-08', 566.5], ['25-Jul-08', 480.88], ['22-Aug-08', 509.84],
  ['26-Sep-08', 454.13], ['24-Oct-08', 379.75], ['21-Nov-08', 303], ['26-Dec-08', 308.56],
  ['23-Jan-09', 299.14], ['20-Feb-09', 346.51], ['20-Mar-09', 325.99], ['24-Apr-09', 386.15]];
 var plot1 = $.jqplot('chart1', [line1], {
  title:'Data Point Highlighting',
  axes:{
    xaxis:{
      renderer:$.jqplot.DateAxisRenderer,
      tickOptions:{
        formatString:'%b&nbsp;%#d'
      } 
    },
    yaxis:{
      tickOptions:{
        formatString:'$%.2f'
        }
    }
  },
  highlighter: {
    show: true,
    sizeAdjust: 7.5
  },
  cursor: {
    show: false
  }
 });
}); 
```

# android - 文件上传使用 在 Android 上使用 trigger.io 无法使用纯 HTML元素上传文件。在 iOS 上，这工作正常。 潜在的问题似乎源于 webview 没有本机文件选择器，并且 trigger.io 还没有为他们的 webview 实现一个。 问问题 问问题 2013-01-14T12:31:42.730 634 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在 Android 上使用 trigger.io 无法使用纯 HTML元素上传文件。在 iOS 上，这工作正常。 潜在的问题似乎源于 webview 没有本机文件选择器，并且 trigger.io 还没有为他们的 webview 实现一个。 这个问题显示了原生（非 trigger.io）应用程序的解决方案： WebView 中的文件上传 有谁知道这是否可以解决？ （不使用forge.file.getImage，这是我们现在使用的。问题forge.file.getImage是该文件不是普通的 Javascript 文件对象，无法使用 FormData/XHR2 等上传）。 在安卓应用上添加评分功能 嗨，我有一个拼写游戏应用程序，上面有 10 个阶段。每个阶段都有一个类别，例如第 1 阶段动物、第 2 阶段事物等，每个阶段也很少有问题。现在我想在其上添加评分功能，该功能将为每个正确答案增加并为每个错误答案扣除。当用户完成所有 10 个阶段时，将出现一个高分，用户可以在上面输入他们的名字并将其保存到数据库中。知道我该怎么做吗？我是android和JAVA的初学者。提前致谢。 androidhtmltrigger.io 4 1 回答 1 This answer is useful 1 You can use the file module to allow the user to select a file to upload which you can then upload using forge.ajax.request. See http://docs.trigger.io/en/v1.4/modules/file.html for more details. 于 2013-01-14T13:33:18.737 回答 Related 5 c - 如何将输入与数组索引匹配？ 1 php - 搜索未在分页上运行 1 html - 如何更改 div 块的顺序？ 1 jquery - 无法让 cookie 正常工作 3 java - 序列不存在 0 ios - iPhone：自定义键盘布局和主题 3 php - 从组合框 PHP 更改值时更改价格 2 php - 谁能解释这个php代码？ 2 grep - grep 模式单引号和双引号 1 python - 子类化 Tkinter.Tcl Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14318458
> 
> 赞同：1
> 
> 时间：
> 
> 标签：android, html, trigger.io

在 Android 上使用 trigger.io 无法使用纯 HTML`<input type="file">`元素上传文件。在 iOS 上，这工作正常。

潜在的问题似乎源于 webview 没有本机文件选择器，并且 trigger.io 还没有为他们的 webview 实现一个。

这个问题显示了原生（非 trigger.io）应用程序的解决方案： [WebView 中的文件上传](https://stackoverflow.com/questions/5907369/file-upload-in-webview)

**有谁知道这是否可以解决？**

（不使用`forge.file.getImage`，这是我们现在使用的。问题`forge.file.getImage`是该文件不是普通的 Javascript 文件对象，无法使用 FormData/XHR2 等上传）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:33:18.737

You can use the file module to allow the user to select a file to upload which you can then upload using `forge.ajax.request.`

See [http://docs.trigger.io/en/v1.4/modules/file.html](http://docs.trigger.io/en/v1.4/modules/file.html) for more details.

# android - 在安卓应用上添加评分功能

> ID：14318459
> 
> 赞同：0
> 
> 时间：2013-01-14T12:31:51.380
> 
> 标签：android

嗨，我有一个拼写游戏应用程序，上面有 10 个阶段。每个阶段都有一个类别，例如第 1 阶段动物、第 2 阶段事物等，每个阶段也很少有问题。现在我想在其上添加评分功能，该功能将为每个正确答案增加并为每个错误答案扣除。当用户完成所有 10 个阶段时，将出现一个高分，用户可以在上面输入他们的名字并将其保存到数据库中。知道我该怎么做吗？我是android和JAVA的初学者。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:37:20.590

为了实现这一点，我建议您使用本地数据库。您将不得不暂时创建一个表格高分

*   ID
*   姓名
*   分数

一个好的做法可能是创建一个表用户和一个表分数（并将它们连接在一起），因此您的用户将具有多个属性（如果使用单个表，则为名称）。

对于数据库，Android 使用 SQLite：参见：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

然后，在您的应用程序中，您将不得不捕捉一个步骤（级别）何时完成。完成后，您可以获得数据库和所需表的实例，并在其中插入数据。

当所有关卡完成后，您可以显示高分并询问用户的姓名，如果需要还可以提供更多信息。

学习如何在 Android（以及所有其他语言）中管理数据库非常重要。如果您是初学者，这并不容易，但是有一些很好的教程，例如：

*   [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)
*   [http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:41:09.427

在这里使用共享偏好。取一个 int 类型变量，将其增加 +10，并使用简单的 if else 减去 -10。最后使用自定义对话框，如果他/她是高分者，它应该要求用户输入姓名。高分也可以存储在 sharedprefrences 中，或者您也可以将其存储在数据库中。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:36:20.110

我建议使用 SQLite 数据库来存储每个用户/游戏的进度和当前分数，并使用单独的表来存储实际的高分。

Android 中的 SQLite 实际上非常简单。最好从阅读[在 SQL 数据库中保存数据](http://developer.android.com/training/basics/data-storage/databases.html)开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:38:44.050

您可以使用从不同类调用的单例类并添加点

```
import android.util.SparseArray;

public class Score{

public int score;
private static Scoreinstance;

private Score()
{

}

public static Score getInstance()
{
    if (instance == null) {
        instance = new Score();
    }
    return instance;
} 
```

}

然后调用它

```
Score.getInstance().score += "points to be added" 
```

然后最后将其保存到您的数据库中

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html) 这家伙做了一些很棒且易于理解的教程

# c# - 如何显示隐藏一列GridView？

> ID：14318461
> 
> 赞同：0
> 
> 时间：2013-01-14T12:31:53.470
> 
> 标签：c#, asp.net, gridview

我在 Asp 中有一个用户控件，它有一个 GridView，'AutoGenerateColumns="False"。我必须根据 UC 的属性隐藏或显示一列。我怎样才能做到这一点？

这就是我的想法：

```
<asp:TemplateField HeaderText="<%=SelezionaColumnName  %>" HeaderStyle-Width="80px"> 
```

请注意，此处的 headerText 未设置为公共 const 字符串 SelezionaColumnName 但它完全按原样呈现（在字符串中），而不是值，而是带有`<%= %>`. 不知道为什么，是因为绑定吗？

后面的代码：

```
public const string SelezionaColumnName = "Seleziona";

        public bool ShowSeleziona
        {
            set
            {
                grdMaterialiArt.Columns[GetColumnIndexByName(grdMaterialiArt, SelezionaColumnName)].Visible = value;
            }
        }

 protected int GetColumnIndexByName(GridView grid, string name)
        {
            foreach (DataControlField col in grid.Columns)
            {
                if (col.HeaderText.ToLower().Trim() == name.ToLower().Trim())
                {
                    return grid.Columns.IndexOf(col);
                }
            }

            return -1;
        } 
```

注意：我必须注意使用 0 索引。可以在我的列之前添加列，因此我必须唯一标识该列。我继续按名称识别方法，因为 TemplateField 不能有 ID：| 希望我描述的场景足够好，我也搜索了很多，但没有找到类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:41:26.923

```
 protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {

        try
        {
            DataTable dt = (DataTable ) GridView1.DataSource;
            if (!dt.Columns.Contains("COLLUMN_YOU_WANNA_HIDE")) return;
            int j = dt.Columns.IndexOf("COLLUMN_YOU_WANNA_HIDE");
            e.Row.Cells[j].Visible = false;
            e.Row.Cells[j].Width = 0;
        }
        catch (Exception)
        {

        }

    } 
```

# javascript - JavaScript 中的 DEBUG 指令

> ID：14318469
> 
> 赞同：1
> 
> 时间：2013-01-14T12:32:14.543
> 
> 标签：javascript

有没有办法在 JS 代码中使用某种 DEBUG 指令导致调试代码不包含在生产中？例子：

```
// #if debug
console.log('Initializing');
// #endif

var url =
// #if debug
    '/foo/debug';
// #else
    '/foo';
// #endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:34:12.297

不，但是您可以简单地`console.log`用虚拟函数替换生产：

```
window.console = window.console || {};
window.console.log = function() { /* do nothing */ }; 
```

然后您只需要配置您的构建工具（假设您有一些）以仅在生产构建中包含该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:35:45.633

好吧，你可以定义全局变量：

```
var DEBUG = true;

// Somewhere else:
if (DEBUG)
    console.log('Initializing'); 
```

但它没有像`#define`.

# java - 将 Grizzly2.2.X 与 Jersey 和 Spring 集成

> ID：14318470
> 
> 赞同：5
> 
> 时间：2013-01-14T12:32:16.773
> 
> 标签：java, spring, web, jersey, grizzly

我已成功`Grizzly v2.1.9`与`Jersey`和集成`Spring`。`Grizzly`但是在尝试迁移到 version时无法使其工作`2.2.19`。

原始代码`Grizzly v2.1.9`如下。

```
HttpServer server = new HttpServer();
NetworkListener listener = new NetworkListener("grizzly2", "localhost", 3388);
server.addListener(listener);

ServletHandler sa = new ServletHandler();       
sa.setContextPath("/");     
sa.setServletInstance(new SpringServlet());
sa.addContextParameter("contextConfigLocation", "classpath:spring-context.xml");                
sa.addServletListener("org.springframework.web.context.ContextLoaderListener");
sa.addServletListener("org.springframework.web.context.request.RequestContextListener");                

ServerConfiguration config = server.getServerConfiguration();
config.addHttpHandler(sa, new String[] {"/"});
server.start(); 
```

新代码`Grizzly v2.2.19`如下

```
HttpServer server = new HttpServer();
NetworkListener listener = new NetworkListener("grizzly2", "localhost", 3388);
WebappContext ctx = new WebappContext("ctx","/");       
final ServletRegistration reg = ctx.addServlet("spring", new SpringServlet());
reg.addMapping("/*");
ctx.addContextInitParameter("contextConfigLocation", "classpath:spring-context.xml");
ctx.addListener("org.springframework.web.context.ContextLoaderListener");         
ctx.addListener("org.springframework.web.context.request.RequestContextListener");
ctx.deploy(server);
server.start(); 
```

新代码可以毫无例外地编译和执行。但是，所有应该转发到不同方法的 url`Jersey`现在都转发到默认页面“/”。

**更新**

对于遇到同样问题的人。

在 Grizzly2.2.20 之后修复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:35:57.980

最后，我在向 java.net 发送电子邮件后得到了解决方法。

改变

```
WebappContext ctx = new WebappContext("ctx","/"); 
```

到

```
WebappContext ctx = new WebappContext("ctx",""); 
```

可以点击此[链接](http://grizzly.1045725.n5.nabble.com/Integration-Grizzly2-2-X-with-Jersey-and-Spring-td5710024.html)了解更多详情。

# java - 在 JavaFX 中使用 JavaScript 调用 java。可能吗？

> ID：14318472
> 
> 赞同：5
> 
> 时间：2013-01-14T12:32:18.777
> 
> 标签：java, javascript, javafx

我正在使用`WebEngine`&`WebView`来自`JavaFX`. 现在我想使用运行在里面的 javascript 来执行 Java `WebEngine`。

我的问题是是否可以这样做，如果可以，有任何提示。

我想做类似下面的事情

```
<script type="text/javascript">
  function runSampleJava() {
    var number = new java.lang.Integer(1234);
    var random = new java.util.Random();
    java.lang.System.out.println(random.nextInt());
  }
</script> 
```

现在，如果我调用`runSampleJava()`内部`WebEngine`，它将执行该代码。

* * *

# 需要注意的点

*   这与`Rhino`Java 的 JavaScript 引擎无关
*   我知道可以注入 java 对象，例如：`JSObject window = (JSObject) webEngine.executeScript("window");`等等。但这不是我要找的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:03:25.790

我没有设法创建 Java 实例，但我设法将在 Java 中创建的对象实例推送到 JavaScript 中并回调它们。

所以我的 Java 代码如下所示：

```
JSObject win = (JSObject) engine.executeScript("window");
win.setMember("jHelper", new JavaHelper()); 
```

`JavaHelper`示例（[必须是公开的](https://blogs.oracle.com/javafx/entry/communicating_between_javascript_and_javafx#comment-1362464352708)）：

```
public static class JavaHelper {
    public int newInteger(int input) {
        // ...
    }
    public Random newRandom() {
        // ...
    }
} 
```

然后在 JavaScript 中：

```
function bla() {
  var number = jHelper.newInteger(1234);
  var random = jHelper.newRandom();
  // ...
} 
```

您可以在[https://github.com/tomsontom/fx-ide/tree/master/at.bestsolution.javafx.ide.editor](https://github.com/tomsontom/fx-ide/tree/master/at.bestsolution.javafx.ide.editor)和在[http://github.com/ /tomsondev.bestsolution.at/2012/10/29/eclipsecon-javafx-demo-app-videos/](http://tomsondev.bestsolution.at/2012/10/29/eclipsecon-javafx-demo-app-videos/)

# php - 为什么我的 facebook 按钮的标题与我的喜欢按钮相同

> ID：14318480
> 
> 赞同：0
> 
> 时间：2013-01-14T12:32:39.737
> 
> 标签：php, facebook

我有两个页面（case_1.html，blog_1.html），另外两个页面包含两个页面（case.html，blog.html）的 facebook like it 按钮。当我喜欢 case_1.html 时，我得到的喜欢按钮的标题与我喜欢 blog_1.html 的标题相同。

我还在 case_1.html 中使用了开放图形标记，但我得到了与 blog_1.html 相同的标题。

请帮我。我的 case_1.html 代码是

```
 <title>Case Study </title>
  <meta property="og:title" content="Case Study " />
   <meta property="og:type" content="article" />
  <meta property="og:url" content="http://mywebsites.com/case_1.html" />
 <meta property="og:image" content="http://mywebsites.com/img/case_study/Arvind.JPG" />
 <meta property="og:site_name" content="mywebsites.com" />
 <meta property="fb:app_id" content="my_id" /> 
```

我在标签下面的case.html上使用下面的代码来喜欢它

```
 <div id="fb-root"></div>
   <script>(function(d, s, id) {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <div class="fb-like" data-href="http://mywebsites.com/case_1.html" data-send="true" data-layout="button_count" data-width="450" data-show-faces="false" data-font="arial"></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:45:51.867

也许您在更新元数据**之前**复制`blog_1.html`并输入了 Facebook 上的链接？Facebook 将元信息缓存了很长时间。您可以调用[facebook 调试器](http://developers.facebook.com/tools/debug)来测试您的数据。当您在调试器中输入 url 时，缓存也会被清除。因此，在您输入网址并且一切正确后，正常共享也应该可以正常工作。

# iphone - ARC：将self设置为班级成员的代表会阻止self被释放吗？

> ID：14318481
> 
> 赞同：0
> 
> 时间：2013-01-14T12:32:49.593
> 
> 标签：iphone, ios, objective-c, ipad, automatic-ref-counting

这是一个伪类来演示：

```
myView : UIView

- (void) init {

    UIScrollView * scroller = [[UIScrollView alloc] init];
    scroller.delegate = self;
    [myView addSubview:scroller];

    return self;
} 
```

在 ARC 下，当所有其他对 myView 的引用都被删除时，我是否需要做任何其他事情才能正确释放内存？两个对象之间的引用会让它们在没有任何干预的情况下永远存在吗？

这是否取决于 scroller 是类属性，还是只是函数中声明的局部变量？

* * *

只是想找出为什么我有一些不应该存在的类的多个实例存在-半相关的问题，是否有一种简单的方法可以找出对象保留在内存中的原因（例如，查看对此对象的所有引用)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:39:28.310

iOS 类（如`UIScrollView`和`UIWebView`）已经正确处理了这个问题。

但是，如果您有自己的委托协议和委托属性，则需要确保将它们设置为分配而不是保留。为此，无论您在何处声明委托（或任何类型的协议），都需要添加 __unsafe_unretained 标记：

```
@protocol FooBarDelegate {
//...
}

@interface Foo : Bar {
    __unsafe_unretained id <FooBarDelegate> delegate;
}

@property (nonatomic, assign) id <FooBarDelegate> delegate; 
```

> 这是否取决于 scroller 是类属性，还是只是函数中声明的局部变量？

它没有。但是请记住，添加某些内容作为子视图，父视图将自动保留它，无论您是否有属性。

# javascript - 使用Javascript更改下拉列表以选择多个图像？

> ID：14318483
> 
> 赞同：0
> 
> 时间：2013-01-14T12:32:57.713
> 
> 标签：javascript, html, drop-down-menu, html-table, webpage

我在网页中有一个下拉列表，它当前所做的是显示在列表中选择的单个图像。

我想要实现的是，如果选择了一个部门，例如酒吧，它将显示一组酒吧图像而不是一个单独的图像，任何知道这样做的人吗？如果我选择另一个选项，例如大学，它将显示大学徽标的多个图像。

即使我将其用作下拉列表，是否还有一种方法可以将鼠标单击超链接添加到图像？

我认为这是可能的，但我找不到有关该主题的太多信息。

任何帮助都会很棒。

我的 HTML 代码：

```
<table border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td width="100%">
            <form name="mygallery">
                <p>
                    <select name="picture" size="1" onChange="showimage()">
                        <option selected value="gfx/Marstons.jpg">Marstons pubs</option>
                        <option value="gfx/NorthUni.jpg" href="http://www.northumbria.ac.uk/">Northumbria University</option>
                    </select>
                </p>
            </form>
        </td>
    </tr>
    <tr>
        <td width="100%">
            <p align="center">
                <img src="gfx/Marstons.jpg" name="pictures" width="99" height="100">
        </td>
    </tr>
</table> 
```

**我的 Javascript**

```
function showimage() {
    if (!document.images) return
    document.images.pictures.src = document.mygallery.picture.options[document.mygallery.picture.selectedIndex].value
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:30:24.620

我不确定您的需求是什么，但您不能直接在选择选项上添加 href 属性。

如果您只想添加 url on you 选项以在用户选择它时将其应用到您的 img 上，您可以使用 html5 提供的 data-* 属性。

这是您根据请求提供的代码示例。

用于现场测试的 JS 小提琴：http://jsfiddle.net/BVAkh/1/

html部分：

```
<html>
  <head></head>
  <body>
    <table border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td width="100%">
            <form name="mygallery">
                <p>
                    <select name="picture" size="1" onChange="javascript:showimage()">
                        <option selected value="gfx/Marstons.jpg">Marstons pubs</option>
                        <option value="gfx/NorthUni.jpg" data-href="http://www.northumbria.ac.uk/">Northumbria University</option>
                    </select>
                </p>
            </form>
        </td>
    </tr>
    <tr>
        <td width="100%">
            <p align="center">
              <img src="gfx/Marstons.jpg" name="pictures" width="99" height="100" />
          </p>
        </td>
    </tr>
</table>
      </body>
    </html> 
```

Js部分：

```
function showimage() {
    if (!document.images) return;
    var selectedItem = document.mygallery.picture.options[document.mygallery.picture.selectedIndex];
    document.images.pictures.src = selectedItem.value;   

    if(selectedItem.getAttribute("data-href")) {
      document.images.pictures.onclick = function() {
        window.location.href = selectedItem.getAttribute("data-href");
      }
    }
    else {
      document.images.pictures.onclick = null;
    }  
} 
```

但我认为你应该重新考虑形象变化。也许为您的 p 设置一个 id 并使用 innerHTML 更改内容。如果提供了 data-href，您将能够为`<a></a>`您的图像添加标签。

# android - GridView 只显示两列

> ID：14318486
> 
> 赞同：7
> 
> 时间：2013-01-14T12:33:30.070
> 
> 标签：android, android-gridview

我以编程方式创建了要在对话框中使用的图像 GridView。如果我将列设置为自动调整，无论图像大小和屏幕大小如何，我总是会得到两列。如果我将列数强制为固定数量，那么它可以工作，但我无法避免图像在某些屏幕尺寸上重叠，因此自动管理列数会好得多。更重要的是，当我尝试设置拉伸时，它根本不显示任何东西！

我的图像适配器：

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

public int getCount() {
    return (IconC.Res.length);
}

public Object getItem(int position) {
    return (IconC.Res[position]);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {
        imageView = new ImageView(mContext);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setImageResource(IconC.Res[position]);
    return (imageView);
}
 } 
```

以及创建 Dialog 的函数（在其他地方使用 .show() 调用）

```
 private void createPopUp() {
    d_icons = new Dialog(this);
    GridView gv_icons = new GridView(this);

//  gv_icons.setNumColumns(GridView.AUTO_FIT);  // autofit disabled, shows ONLY TWO COLUMNS
    gv_icons.setNumColumns(4); // instead, autofit forced, now it works, but I don't want it fixed!
    gv_icons.setGravity(Gravity.CENTER);
    gv_icons.setHorizontalSpacing(3);
    gv_icons.setVerticalSpacing(1);
//  gv_icons.setStretchMode(GridView.STRETCH_SPACING);  // stretching disabled, shows ZERO COLUMNS
    gv_icons.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    gv_icons.setAdapter(new ImageAdapter(this));
    gv_icons.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick (AdapterView<?> parent, View view, int position, long id) {
            eventIcons.set(selectedItem, position);
            updateEventView();
            d_icons.dismiss();
        }
    });

    d_icons.setTitle(R.string.text_chooseicon);
    d_icons.addContentView(gv_icons, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    d_icons.setCancelable(true);
} 
```

谁能发现为什么会这样？谢谢！！

以下是 4 个固定列的显示方式：i50.tinypic.com/2ebdfec.png

这是自动调整的方式：i50.tinypic.com/25jxo9s.png

这是水平选项卡上自动调整的布局：i49.tinypic.com/23r7qj5.png

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T23:31:09.420

这篇文章回答了您的问题： [Android：GridView auto_fit 如何找到列数？](https://stackoverflow.com/questions/6912922/android-how-does-gridview-auto-fit-find-the-number-of-columns)

为了使 auto_fit 工作，您需要指定列宽：gridView.setColumnWidth(width);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:37:30.947

实际上，这取决于设备大小。当您第一次使用固定列数测试您的应用程序时，网格仅显示 2 列，因为 3 图像的空间不够大，无法容纳。

# ruby - 努力启动WEBrick

> ID：14318487
> 
> 赞同：1
> 
> 时间：2013-01-14T12:33:43.320
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2, webrick

首先说明我正在运行的内容：

*   操作系统：**Windows 8 64 位**
*   红宝石版本：**1.9.3p362**
*   导轨版本：**3.2.11**

我创建了一个名为`simple_cms`under的新 rails 项目`C:\Users\Dean\Documents\Ruby_Projects\`。

然后我导航到项目目录，所以我的路径是`C:\Users\Dean\Documents\Ruby_Projects\simple_cms\`

然后我运行（使用我的管理员命令提示符）

> 导轨服务器

但随后我得到了很多错误，但最突出的错误是：

> 找不到指定的模块 some\path\mysql2\1.9\mysql2.so

有任何想法吗？

**编辑：附件是我的完整命令提示符输出...**

![在此处输入图像描述](../Images/34a22375f55486713e0d598596b6bd0f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:15:51.013

看起来您的`mysql2`gem 没有正确安装。

查看[此问题的答案以](https://stackoverflow.com/a/7534054/749004)获取有关正确安装`mysql2`gem 的信息。这应该可以解决您的其余错误。

# php - Magento 获取按“位置”字段排序的某个类别中的所有产品

> ID：14318488
> 
> 赞同：6
> 
> 时间：2013-01-14T12:33:57.377
> 
> 标签：php, magento, magento-1.7

我只是想按照后端设置`category ID`的顺序获取属于某个特定的所有产品。`Position`

我似乎尝试了所有可用的示例，但无济于事。

我正在使用的基本代码如下（手动加载magento的外部php文件）：

```
// Load Magento
require_once $_SERVER['DOCUMENT_ROOT'] . "/app/Mage.php";
umask(0);
Mage::app();
// set Store ID
$store_id = Mage::app()->getStore()->getStoreId();
// set Cat ID
$cat_id = 345;

$cat = Mage::getModel('catalog/product')->setId(345);

$products = Mage::getModel('catalog/product')
    ->getCollection()
    ->addCategoryFilter($cat)
    ->addAttributeToSelect("*")
    ->setOrder('name','asc')
    ->load();

foreach($products as $p) {
    var_dump($p->getName());
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-14T13:44:13.733

这就是最终奏效的方法：

```
$cat_id = 345;

$category = Mage::getModel('catalog/category')->load($cat_id);
$collection = $category->getProductCollection()->addAttributeToSort('position');
Mage::getModel('catalog/layer')->prepareProductCollection($collection);

foreach ($collection as $product) {
    var_dump( $product->getName() );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-19T05:01:20.920

```
$product_position_array = Mage::getModel('catalog/category')->load($CategoryID)->getProductsPosition(); 
```

这应该返回一个数组`$product_id = $position`。

# java - 从 JSONObject 内部获取价值

> ID：14318495
> 
> 赞同：0
> 
> 时间：2013-01-14T12:34:19.063
> 
> 标签：java, android, json

我有这个 Bing Maps JSON 文件，我想从里面检索“++formattedAddress++”

```
{
    "statusCode": 200,
    "statusDescription": "OK",
    "copyright": "Copyright Â© 2013 Microsoft and its suppliers. All rights reserved. This API cannot be accessed and the content and any results may not be used, reproduced or transmitted in any manner without express written permission from Microsoft Corporation.",
    "authenticationResultCode": "ValidCredentials",
    "resourceSets": [
        {
            "resources": [
                {
                    "__type": "Location:http://schemas.microsoft.com/search/local/ws/rest/v1",
                    "point": {
                        "type": "Point",
                        "coordinates": [
                            63.8185213804245,
                            12.105498909950256
                        ]
                    },
                    "matchCodes": [
                        "Good"
                    ],
                    "address": {
                        "addressLine": "55 Stuff",
                        "locality": "Stuff",
                        "++formattedAddress++": "55 Stuff, 51512 Stuff",
                        "postalCode": "25521",
                        "adminDistrict2": "Stuff-Stuff",
                        "countryRegion": "UK",
                        "adminDistrict": "NL"
                    },
                    "bbox": [
                        84.81465866285382,
                        12.097347537264563,
                        50.822384097995176,
                        7.11365028263595
                    ],
                    "name": "55 Stuff, 51122 Stuff",
                    "confidence": "Medium",
                    "entityType": "Address",
                    "geocodePoints": [
                        {
                            "calculationMethod": "Interpolation",
                            "type": "Point",
                            "usageTypes": [
                                "Display",
                                "Route"
                            ],
                            "coordinates": [
                                50.8185213804245,
                                7.105498909950256
                            ]
                        }
                    ]
                }
            ],
            "estimatedTotal": 1
        }
    ],
    "traceId": "8a13f73cab93472db1253e4c1621c651|BL2M002306|02.00.83.1900|BL2MSNVM001274, BL2MSNVM003152",
    "brandLogoUri": "http://dev.virtualearth.net/Branding/logo_powered_by.png"
} 
```

到目前为止我尝试过的是这样的：

```
final JSONArray jsonMainArr = locationData.getJSONArray("resourceSets").getJSONObject(0).getJSONArray("resources");
final JSONObject childJSONObject = jsonMainArr.getJSONObject(0);
return childJSONObject.getString("formattedAddress"); 
```

childJSONObject 仍然比 formattedAddress 高 2-3 级，查询变得非常低效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:44:33.303

从当前 json String 获取 formattedAddress 地址值：

```
final JSONObject childJSONObject = jsonMainArr.getJSONObject(0)
                                                .getJSONObject("address");
return childJSONObject.getString("++formattedAddress++"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:51:26.253

有很多在线站点，您可以在其中粘贴复杂的代码并以简单的方式获取它。例如[http://json.parser.online.fr/](http://json.parser.online.fr/)

# r - R中的反向轴

> ID：14318498
> 
> 赞同：3
> 
> 时间：2013-01-14T12:34:32.950
> 
> 标签：r, reverse

我试图绘制这样的简单图片，使用 3 个值 - 从文本文件加载的 xyz。

![在此处输入图像描述](../Images/618c28df98a511c8ff3f91ee61d62d34.png)

现在我需要 X 轴从最大数字到最小数字（现在是右边的最大数字，我需要它们在左边），以便两个零在同一个角落相遇。我正在使用这个简单的代码：

```
xyz <- read.table("excel")
scatterplot3d(xyz,xlim = c(0, 100000))
xyz 
```

我试过“rev”但没有成功。图片看起来总是一样的。帮助将不胜感激。

存储在名为“excel”的文件中的示例数据：

```
8884    20964   2
8928    5   1
9033    6   2
9261    61307   1
9435    64914   3
9605    5   2
9626    7   3
9718    5   3
10117   48941   7
10599   399 9
20834   5802    10
21337   3   8
21479   556 8 
```

我希望我的 0,0,0 点位于右前下角。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T12:52:15.737

您可以选择 >90 到 <270 之间的角度

```
 scatterplot3d(xyz,xlim = c(0, 100000),angle=ang) 
```

例如：

```
z <- seq(-10, 10, 0.01)
x <- cos(z)+1
y <- sin(z)+1
scatterplot3d(x, y, z, highlight.3d=TRUE, col.axis="blue",angle=120,
              col.grid="lightblue", main="scatterplot3d - 1", pch=20) 
```

![在此处输入图像描述](../Images/27d73ee36e17fafb6c1df4a9492ece83.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T13:12:14.343

如果您不介意使用 lattice 包中的云函数，那么您可以简单地将 xlim 的参数以相反的顺序排列：

```
require(lattice)

xyz <- read.table( text = 
"0 1 2
1 2 3
2 3 4
3 4 5")

cloud(V3~V1*V2,data = xyz, scales = list(arrows = FALSE), drape = T, xlim = c(3,0)) 
```

您可以使用参数旋转轴`screen`以使其看起来像您喜欢的方式。
![在此处输入图像描述](../Images/76b505ab87aab51ae71b47d0872abeec.png)

# java - 如何让我的 HttpUrlConnection 以 JSON 格式返回数据？

> ID：14318499
> 
> 赞同：0
> 
> 时间：2013-01-14T12:34:32.983
> 
> 标签：java, jquery, json, get, httpurlconnection

我`HttpUrlConnection`在 Java 应用程序和 Web 应用程序之间有一个。在 Java 应用程序上，我有代码：

```
exchange.sendResponseHeaders(HttpURLConnection.HTTP_OK, response.getBytes().length);
exchange.getResponseHeaders().set("content-type", "application/json");
exchange.getResponseBody().write(response.getBytes());
exchange.close(); 
```

我认为错误的代码在第二行，但我不知道该怎么做。交换是类型`HttpExchange`。

字符串响应包含：`{ batteryMax: 22000, batteryCharge: 860, carRange: 350 }`

我使用以下代码检索数据：

```
var jsonData;
var jqxhr = $.getJSON("http://145.93.73.69:8080/getInfo", function(data) {
    jsonData = data
})
.error(function() { alert("error"); }); 
```

`error`总是收到警报，`jsonData`保持未定义并`jqxhr.responseText`包含`{ batteryMax: 22000, batteryCharge: 860, carRange: 350 }`.

为了使这项工作，我必须改变什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T12:38:08.170

json一定是这样的

```
{ "batteryMax": 22000, "batteryCharge": 860, "carRange": 350 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:35:32.687

我找到了解决方案：

```
 ObjectMapper mapper = new ObjectMapper();
                mapper.configure(JsonParser.Feature.ALLOW_SINGLE_QUOTES, true);
                //JsonNode df = mapper.readValue(response, JsonNode.class);
                byte[] responseInBytes = mapper.writeValueAsBytes(response); 
```

我使用杰克逊从我拥有的字符串中创建一个 JSON 节点（+ 单引号围绕键）并且它可以工作。

# actionscript-3 - AS3 TLFTextField : 部分文本的不同背景颜色

> ID：14318502
> 
> 赞同：0
> 
> 时间：2013-01-14T12:34:39.640
> 
> 标签：actionscript-3, flash

我是 AS3 的新手。
在我的应用程序中，我想在输出文本字段中做一些背景色。

textField 中的 Text 有不同的字符串，由空格分隔，如下所示：

“AAA BBB CCC AAA BBB AAA CCC”。

*   我的大问题是：
    如何将textField中所有**AAA** -Stings的**背景颜色更改为蓝色。**

 **请每一个建议都会有所帮助。现在两天我正在尝试解决它。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:14:32.687

使用[setTextFormat()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#setTextFormat%28%29)设置除统一格式之外的任何格式。您必须解析所有“AAA”、“CCC”等的 TF属性，以及使用适当格式`text`调用的每个找到的实例。`setTextFormat()`**

# api - Monotouch 对话框反射日期元素

> ID：14318510
> 
> 赞同：0
> 
> 时间：2013-01-14T12:35:11.667
> 
> 标签：api, reflection, dialog, xamarin.ios

我正在尝试使用 Monotouch Dialog 反射 API 绑定到一个类。

我的课堂上有以下内容：

[Entry("Birth Date")] public DateTime BirthDate;

当它呈现时，它呈现为 DateTime，我想这是预期的。

反正有没有强迫这只是一个日期

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:40:51.377

应该阅读文档。

您可以通过使用装饰字段来获得仅日期选择

[日期] 而不是 [条目（....

# asp.net - 多租户 - 用户关系 - 一些现实生活中的例子？（asp.net/网络安全）

> ID：14318511
> 
> 赞同：1
> 
> 时间：2013-01-14T12:35:13.247
> 
> 标签：asp.net, asp.net-mvc, cloud, multi-tenant

我很难将多租户的概念与网络安全（来自微软的 webmatrix 框架）结合起来。我正在建立一个多租户网站：

*   mvc4
*   实体框架6
*   网络安全（来自 webmatrix）

**认证**

我可以允许用户使用 WebSecurity 方法注册和登录。我可以验证用户是否已登录/是否通过`User.Identy.IsAuthenticated`.

**确定租户**

我通过 url ( `[companyname].domain.com`) 确定租户。

**注册新客户**

新客户可以通过我的应用程序中的注册表单创建租户。如果用户注册（网址中没有公司名称），他将必须提供一些帐户输入作为一些公司输入。然后，他将创建一个新别名，即符合 companyname.domain.com。**因此，长话短说，租户总是与 1 个或多个用户 (1-N) 耦合。**

**要求**

我需要保证租户“abc”的用户永远无法登录租户“xyz”。（因此我也不太喜欢 WebSecurity 框架，因为它似乎是我所有租户的共享数据库（或者我错了吗？））。

**我的问题**

你们能否分享一些关于如何处理现实世界多租户应用程序中“租户”和“经过身份验证的用户”检查的见解？

我的热门话题：

*   您是验证一次租户+经过身份验证的用户，还是在每个控制器的每个操作中验证一次？
*   依赖默认的网络安全类是否安全，或者我会更好地设计自己的用户表，还是客户 MembershipProviders 是更好的选择？
*   我应该使用 cookie 还是这是一个非常糟糕的选择。

如果你能分享一些我可以阅读所有关于这些问题的文档，我会非常有帮助。我强烈希望看到更多关于多租户的详细文档，这些文档深入到实际设计中（甚至可能是代码示例）。

我已经阅读了大部分“一般文档”/“商业演示”：

*   [http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)
*   [http://www.businesscloud9.com/content/identifying-tenant-multi-tenant-azure-applications-part-2/10245](http://www.businesscloud9.com/content/identifying-tenant-multi-tenant-azure-applications-part-2/10245)
*   [http://msdn.microsoft.com/en-us/library/windowsazure/hh689716.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh689716.aspx)
*   [http://www.developer.com/design/article.php/3801931/Introduction-to-Multi-Tenant-Architecture.htm](http://www.developer.com/design/article.php/3801931/Introduction-to-Multi-Tenant-Architecture.htm)

如果需要，我会改写/添加代码/做任何需要帮助的事情。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:44:37.333

您可以在此处获得的每个解决方案都取决于您的应用程序的功能以及它如何处理数据，如果您使用存储库模式，是否使用 IoC 等。您可以考虑通过将用户 ID 传递给存储库类并在每次应用程序时进行过滤来实例化存储库需要数据，你可以在你的控制器中做到这一点——这种方法经常使用（即使在 VS SampleProjects 中——比如“SinglePage 应用程序”，你可能想下载一些开源项目并看看它是如何完成的。

我在一些不需要“真正花哨”并且我不希望有巨大负载的项目中所做的是： - 我设置了每个其他控制器都需要实现的 BaseController - 在我做的 BaseController 的 onActionExecuting 事件中

```
public Employee CurrentEmployee { get; set; }

protected override void OnActionExecuting(ActionExecutingContext ctx)
{
    base.OnActionExecuting(ctx);
    string authenticatedUser = User.Identity.Name;
    CurrentEmployee = mortenDb.Employees.FirstOrDefault(e => e.Account.Login == authenticatedUser );
} 
```

所以在所有其他控制器中，我可以引用属于当前登录用户的 Employee 对象。您可以对您的 Company 对象执行相同的操作。所以我假设你会像我一样查询员工并检索公司引用并将其传递给 BaseController 上的公共属性。这可能不是最好的解决方案，但只要您记得通过 Company 对象导航属性（例如，Employees、Tickets、Requests 等您在 Model 中拥有的任何内容）提取数据，它就相当安全

# memory - CUDA：使用共享内存从设备函数返回数组

> ID：14318513
> 
> 赞同：1
> 
> 时间：2013-01-14T12:35:21.483
> 
> 标签：memory, cuda, return, device, shared

是否可以为内核（内部或外部）分配共享内存并将其用于从内核调用的其他设备函数中？对我来说特别有趣的是，如果/如何将它用作返回的参数/数组。

在设备函数中使用共享内存作为输入参数似乎没有问题（至少我没有遇到任何问题、错误或意外结果。

当我将它用作返回参数时，我遇到了几个问题：

*   从调试配置构建程序时，我可以运行该程序。

*   但是我无法调试它->当我使用共享内存时它在设备功能中崩溃

*   我也收到错误`cuda-memchecker`- >无效`__global__`读取，因为地址超出范围，它从共享地址空间读取

那么是否可以使用共享内存将数组从设备函数返回到内核？

编辑：

我写了一个非常简单的例子来排除我犯的其他错误。

```
#define CUDA_CHECK_RETURN(value) {                                      \
    cudaError_t _m_cudaStat = (value);                                  \
    if (_m_cudaStat != cudaSuccess) {                                   \
        printf( "Error %s at line %d in file %s\n",                     \
                cudaGetErrorString(_m_cudaStat), __LINE__, __FILE__);   \
        exit(-1);                                                       \
    } }

__device__ void Function( const int *aInput, volatile int *aOutput )
{
    for( int i = 0; i < 10; i++ )
        aOutput[i] = aInput[i] * aInput[i];
}

__global__ void Kernel( int *aInOut )
{
     __shared__ int aShared[10];

    for(int i=0; i<10; i++)
        aShared[i] = i+1;

    Function( aShared, aInOut );
}

int main( int argc, char** argv )
{
    int *hArray = NULL;
    int *dArray = NULL;

    hArray = ( int* )malloc( 10*sizeof(int) );
    CUDA_CHECK_RETURN( cudaMalloc( (void**)&dArray, 10*sizeof(int) ) );

    for( int i = 0; i < 10; i++ )
            hArray[i] = i+1;

    CUDA_CHECK_RETURN( cudaMemcpy( dArray, hArray, 10*sizeof(int), cudaMemcpyHostToDevice ) );
    cudaMemcpy( dArray, hArray, 10*sizeof(int), cudaMemcpyHostToDevice );

    Kernel<<<1,1>>>( dArray );

    CUDA_CHECK_RETURN( cudaMemcpy( hArray, dArray, 10*sizeof(int), cudaMemcpyDeviceToHost ) );
    cudaMemcpy( hArray, dArray, 10*sizeof(int), cudaMemcpyDeviceToHost );

    free( hArray );
    CUDA_CHECK_RETURN( cudaFree( dArray ) );
    cudaFree( dArray );

    return 0;
} 
```

我通过一个线程块和每个块一个线程来执行内核。构建程序并运行它是没有问题的。我得到了预期的结果。但是如果程序是带有 cuda-memchecker 的 testet，它会终止内核并出现以下日志。

```
Error unspecified launch failure at line 49 in file ../CuTest.cu
========= Invalid __global__ read of size 4
=========     at 0x00000078 in /home/strautz/Develop/Software/CuTest/Debug/../CuTest.cu:14:Function(int const *, int volatile *)
=========     by thread (0,0,0) in block (0,0,0)
=========     Address 0x01000000 is out of bounds
=========     Device Frame:/home/strautz/Develop/Software/CuTest/Debug/../CuTest.cu:25:Kernel(int*) (Kernel(int*) : 0xd0)
=========     Saved host backtrace up to driver entry point at kernel launch time
=========     Host Frame:/usr/lib/libcuda.so (cuLaunchKernel + 0x34b) [0x55d0b]
=========     Host Frame:/usr/lib/libcudart.so.5.0 [0x8f6a]
=========
========= Program hit error 4 on CUDA API call to cudaMemcpy 
=========     Saved host backtrace up to driver entry point at error
=========     Host Frame:/usr/lib/libcuda.so [0x24e129]
=========     Host Frame:/usr/lib/libcudart.so.5.0 (cudaMemcpy + 0x2bc) [0x3772c]
=========     Host Frame:[0x5400000]
=========
========= ERROR SUMMARY: 2 errors 
```

共享内存是否必须对齐，我必须做其他事情还是可以忽略它 - 不这么认为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:58:57.590

见 CUDA 5.0 安装文件 /usr/local/cuda-5.0/samples/6_Advanced/reduction/doc/reduction.ppt

`sdata`是设备函数的本地变量`warpReduce()`。它存储共享内存的地址。共享内存可以由设备函数中的地址读取/写入。然后从外部的共享内存中读取最终的缩减结果`warpReduce()`

```
template <unsigned int blockSize>
__device__ void warpReduce(volatile int *sdata, unsigned int tid) {
    if (blockSize >=  64) sdata[tid] += sdata[tid + 32];
    if (blockSize >=  32) sdata[tid] += sdata[tid + 16];
    if (blockSize >=  16) sdata[tid] += sdata[tid +  8];
    if (blockSize >=   8) sdata[tid] += sdata[tid +  4];
    if (blockSize >=   4) sdata[tid] += sdata[tid +  2];
    if (blockSize >=   2) sdata[tid] += sdata[tid +  1];
}
template <unsigned int blockSize>
__global__ void reduce6(int *g_idata, int *g_odata, unsigned int n) {
    extern __shared__ int sdata[];
    unsigned int tid = threadIdx.x;
    unsigned int i = blockIdx.x*(blockSize*2) + tid;
    unsigned int gridSize = blockSize*2*gridDim.x;
    sdata[tid] = 0;

    while (i < n) { sdata[tid] += g_idata[i] + g_idata[i+blockSize];  i += gridSize;  }
    __syncthreads();

    if (blockSize >= 512) { if (tid < 256) { sdata[tid] += sdata[tid + 256]; } __syncthreads(); }
    if (blockSize >= 256) { if (tid < 128) { sdata[tid] += sdata[tid + 128]; } __syncthreads(); }
    if (blockSize >= 128) { if (tid <  64) { sdata[tid] += sdata[tid +  64]; } __syncthreads(); }

    if (tid < 32) warpReduce(sdata, tid);
    if (tid == 0) g_odata[blockIdx.x] = sdata[0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:56:19.633

正如[这里](https://stackoverflow.com/questions/14357827/a-bug-of-cuda-memcheck)所描述的，这只是一个驱动程序问题。在我更新到当前版本后，一切正常。

# c# - System.ExecutionEngineException 仅在调试时

> ID：14318516
> 
> 赞同：1
> 
> 时间：2013-01-14T12:35:45.380
> 
> 标签：c#, c++, debugging, exception, dll

我是一名 C++ 开发人员，所以我对 C# 没有太多经验，但是无论如何我都必须解决这个问题。

有一个使用一些 C++ DLL 的 C# GUI。从 DLL 之一调用方法之一时，会发生 System.ExecutionEngineException。显然我无法进入 C++ 代码来查看这段代码是否有问题。所以我构建了一个小型 C++ 测试应用程序，这个应用程序运行良好。在 C# 代码中调用该方法的参数对我来说也很好（在我的 C++ 测试应用程序中使用了相同的值）。尽管 GUI 中的某处可能与此问题相关，也可能与此问题无关，但在没有 Visual Studio 的情况下启动的相同可执行文件可以正常工作。

我目前不知道如何找出导致问题的原因。任何提示将不胜感激。

调用 C# 代码中的方法，其中 caseID 是 int 类型，paramID 是 System.Int32 类型，paramData 是自定义结构。

```
getParameter(caseID, dataID, paramID, ref paramData) 
```

C# 代码中方法的签名如下所示：

```
[ DllImport ("helper.dll", CallingConvention=CallingConvention.Cdecl/*, CharSet = CharSet.Auto*/ )]
public static extern ERROR getParameter(System.Int32 caseID, System.Int32 dataID, System.Int32 paramID, ref PARAMETER_DATA data); 
```

C++ DLL 中相应方法的签名如下所示：

```
ERROR _stdcall getParameter(const long caseID, const long dataID, long number, PARAMETER_DATA *data); 
```

对我来说看起来很奇怪的是，C++ 代码明确指出应该使用调用约定“stdcall”调用该方法，而 C# 代码想要使用 Cdecl。但是，这段代码似乎已经工作了很长时间。我还尝试将两种调用约定都更改为 stdcall ，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:10:11.197

问题是 C++ 中的 char[] 结构成员改变了它的大小。在 C# 代码中有这个属性

```
[MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValTStr, SizeConst=11)] 
```

所以我不得不改变 SizeConst 属性的值。不知道为什么当我第一次检查结构的差异时我没有看到这个......

我还修复了调用约定问题，现在一切正常。

# jquery - 如何删除所有父母子女的班级？

> ID：14318522
> 
> 赞同：3
> 
> 时间：2013-01-14T12:35:59.903
> 
> 标签：jquery, siblings

我有一个简单的列表，我需要`selected`通过单击第一个元素来删除样式。有人可以提供一些信息吗？

HTML：

```
<ul id="select-list">
    <li value="null">All</li>
    <li value="1" class="selected">1</li>
    <li value="2" class="selected">2</li>
</ul> 
```

CSS：

```
#select-list li{
   border: 1px solid #ECECEC;
      /* margin-left: -15px; */
    overflow-x: auto;
    font-size: 10px;
    padding: 2px;
    margin-bottom: 5px;
    cursor: pointer;
}

.selected{
  border: 1px solid red !important;
} 
```

jQuery：

```
jQuery('#select-list li').click(function(){
        console.log(jQuery(this).siblings());

        if(jQuery(this).val() == 'null')
            jQuery(this).siblings('li').removeClass('selected')
    }); 
```

[http://jsfiddle.net/nonamez/pKGcD/](http://jsfiddle.net/nonamez/pKGcD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:40:21.097

您不能`val()`在 an 上使用`li`- 它仅适用于字段。我建议添加一个`data-value`属性，然后可以使用`.data('value')`- 或更有用地在您的情况下将其用于属性选择器：`#select-list li[data-value="null"]`。

所以：

```
<ul id="select-list">
    <li data-value="null">All</li>
    <li data-value="1" class="selected">1</li>
    <li data-value="2" class="selected">2</li>
</ul> 
```

和：

```
jQuery('#select-list li[data-value="null"]').click(function(){
    jQuery(this).siblings('.selected').removeClass('selected')
}); 
```

现场示例：http: [//jsfiddle.net/7QcwY/](http://jsfiddle.net/7QcwY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:37:26.610

试试这个：

```
$('#select-list li:first').parent().find('.selected').removeClass('selected'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T12:41:44.073

“value”的属性会导致访问它的问题，将其更改为 valueset 并且非常简单。

```
 $("#select-list>li").click(function () {
  if ($(this).attr('valueset') == "null") {
    $('.selected ').removeClass('selected ');
  }
}); 
```

编辑：针对评论，这里有一些不按特定顺序隔离的选项：

```
$('#select-list li.selected').removeClass('selected');

$(this).parent().find('.selected').removeClass('selected');

$('#select-list>li.selected').removeClass('selected');
//probably the best one selecting only direct decendant of the list that contain class- check performance to see if that fits

$('#select-list').find('li.selected').removeClass('selected');

$(this).siblings('.selected').removeClass('selected');
//only works if current one does not have this class that needs removed

$(this).siblings('.selected').andSelf().removeClass('selected');
//current one does have this class that also needs removed

 $('#select-list').children('li.selected').removeClass('selected'); 
```

在这里我们看到它在行动：http: [//jsfiddle.net/XKz3N/5/](http://jsfiddle.net/XKz3N/5/)

编辑：与 jQuery 版本 1.8 和 1.9+ 相关。

在 jQuery 1.8 版中，该`addBack()`方法被创建，而在 1.9 版中`andSelf()`被删除。对于 jQuery 1.8 及更高版本，请使用：

```
$(this).siblings('.selected').addBack().removeClass('selected'); 
```

在这段代码中，效果是一样的。`addBack()`还实现了一个选择器，以在需要时减少添加回选择组的元素。

# xslt-2.0 - Saxon-ce 获得组合框选项值

> ID：14318523
> 
> 赞同：0
> 
> 时间：2013-01-14T12:36:00.950
> 
> 标签：xslt-2.0, saxon

我正在使用 Saxon-CE 和 XSLT 2.0 来生成和操作页面上的控件。生成一个组合框没有问题，但是当我更改组合框时，我似乎无法从组合框的选项条目中获取值。这是说明性的 XSLT 代码：

```
<xsl:stylesheet version="2.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:ixsl="http://saxonica.com/ns/interactiveXSLT"
extension-element-prefixes="ixsl">

<xsl:template match="/">

<xsl:result-document href="#comboBox">
  <select id="myBox">
     <option value="1">One</option>
     <option value="2">two</option>
  </select>
</xsl:result-document>

</xsl:template>

<xsl:template match="select[@id='myBox'] mode=ixsl:onchange">
  <xsl:variable name="myVal" select="option/@value'/>
   .... code that affects what is displayed ...
</xsl:template>

</xsl:stylesheet> 
```

我想要做的是当用户更改组合框的值时，他们选择的选项的值存储在变量 $myVal 中。然后我使用该变量来影响主页上的转换。现在我所拥有的根本不起作用（目前它获取所有选项的所有值，而不是用户选择的那个）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:51:39.890

尝试

```
<xsl:variable name="control" select="."/>
<xsl:variable name="value" select="ixsl:get($control, 'value')"/> 
```

带有命名空间声明`xmlns:ixsl="http://saxonica.com/ns/interactiveXSLT"`

# c# - 使用 IN 作为列表的数据集和查询

> ID：14318524
> 
> 赞同：2
> 
> 时间：2013-01-14T12:36:02.307
> 
> 标签：c#, wpf, dataset, tableadapter

我的问题是我有带表格的数据集，我想返回值

```
'where DocumentType IN (@list)' 
```

，但@list 就像：

```
string.Join(",",DocTypes.List1); 
```

我曾尝试像 `SELECT........ WHERE DocumentType IN (@list)`（在 DataSet 表适配器向导中）那样使用它，但是当我执行 Fill 方法时，出现错误：

```
adapter1.Fill(ds.allDocuments, string.Join(",",DocTypes.List1); 
```

参数 2 应该是 int，而不是 string。声明也不会在数据集中工作..

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:41:20.680

你需要一个`Split`函数，然后这个工作：

```
WHERE
    ([DocumentType IN] IN
        (SELECT  Item
         FROM    dbo.Split(@list, ',') AS DocumentSplit)) 
```

这是表值函数的可能实现：

```
CREATE FUNCTION [dbo].[Split]
(
    @ItemList NVARCHAR(MAX), 
    @delimiter CHAR(1)
)
RETURNS @IDTable TABLE (Item VARCHAR(50))  
AS      

BEGIN    
    DECLARE @tempItemList NVARCHAR(MAX)
    SET @tempItemList = @ItemList

    DECLARE @i INT    
    DECLARE @Item NVARCHAR(4000)

    SET @tempItemList = REPLACE (@tempItemList, ' ', '')
    SET @i = CHARINDEX(@delimiter, @tempItemList)

    WHILE (LEN(@tempItemList) > 0)
    BEGIN
        IF @i = 0
            SET @Item = @tempItemList
        ELSE
            SET @Item = LEFT(@tempItemList, @i - 1)
        INSERT INTO @IDTable(Item) VALUES(@Item)
        IF @i = 0
            SET @tempItemList = ''
        ELSE
            SET @tempItemList = RIGHT(@tempItemList, LEN(@tempItemList) - @i)
        SET @i = CHARINDEX(@delimiter, @tempItemList)
    END 
    RETURN
END 
```

也许您需要在 tableadapter 的参数中手动确保它`DbType`是字符串：

![在此处输入图像描述](../Images/757077e269c524f6e24d6fe24d13d3c8.png)

# c# - 在代码隐藏中加载的事件

> ID：14318525
> 
> 赞同：0
> 
> 时间：2013-01-14T12:36:02.417
> 
> 标签：c#, xaml, code-behind

我在 xaml 中有一个带有加载事件的扩展器，它运行良好：

```
<Expander Name="exp" Loaded="expander_Loaded"> 
```

但我尝试使用代码隐藏：

```
 Expander ex = new Expander();
   ex.Loaded += new RoutedEventHandler(expander_Loaded);

   void expander_Loaded(object sender, RoutedEventArgs e)
   {
        //code
   } 
```

它不起作用。

当我的扩展器已加载时，我该如何调用`expander_Loaded`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:42:45.847

当你使用

```
<Expander Name="exp" Loaded="expander_Loaded"> 
```

您将一个新的扩展器插入您的 XAML，即显示器知道它并使用它。

当你这样做时：

```
Expander ex = new Expander();
ex.Loaded += new RoutedEventHandler(expander_Loaded);

void expander_Loaded(object sender, RoutedEventArgs e)
{
    //code
} 
```

您创建一个新`Expander`对象，为其分配一个事件，然后，如果在该行之后没有使用它，则立即丢弃它。尝试

```
<Expander Name="exp"> 
```

和

```
//refers to the declared object
exp.Loaded += new RoutedEventHandler(expander_Loaded);

void expander_Loaded(object sender, RoutedEventArgs e)
{
    //code
} 
```

看看它会起作用。此外，如果您想在运行时创建和添加控件，请查看[这个问题](https://stackoverflow.com/questions/7884185/wpf-how-to-dynamically-add-controls-in-dynamically-created-wpf-window)，它解释了使用[`Children`](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children.aspx)集合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:38:55.330

您不需要在代码*和*标记中连接事件。删除`Loaded="expander_Loaded"`或删除`ex.Loaded += new RoutedEventHandler(expander_Loaded);`。这样做两次可能会产生这种意想不到的效果。

# kineticjs - 动态改变偏移量会修改元素的位置

> ID：14318528
> 
> 赞同：1
> 
> 时间：2013-01-14T12:36:18.723
> 
> 标签：kineticjs

在我的程序中，我将矩形放置在 处`[75,75]`，但是当我更改偏移量时，矩形位置会根据偏移量进行更改。我想避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:49:28.900

偏移量改变了位置。所以就这样做：

```
 rectangle.setOffset(0,0); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T18:09:14.747

在更改偏移量之前获取形状的绝对位置。

更改形状的偏移位置后，形状将移动到新位置。

现在将形状的绝对位置设置为偏移更改之前的绝对位置

```
var currPos = rect.getAbsolutePosition();
rect.setOffset(rect.getWidth()/2,rect.getHeight()/2);
rect.setAbsolutePosition(currPos); 
```

这适用于调整形状大小后偏移量发生变化的情况。

# php - 将动态数据设置到另一个字段时获取另一个字段值

> ID：14318530
> 
> 赞同：0
> 
> 时间：2013-01-14T12:36:20.090
> 
> 标签：php, typo3

在 flexforms 中，我有一个动态字段，例如：

```
<dynField>
    <TCEforms>
        <onChange>reload</onChange>
        <label>SELECT FOLDER</label>
        <config>
            <type>select</type>
                    <itemsProcFunc>tx_myext_fillBEData->fillFoldersField</itemsProcFunc>
        </config>
    </TCEforms>
</dynField> 
```

它工作得很好，我实际上可以把运行时值放在那里。我将 onChange reload 属性设置为在项目更改时重新加载页面，以便下一个动态字段加载取决于当前字段的值。

问题是我似乎无法从其他字段中获取选定的项目以相应地填充数据。

我搜索了很多，没有任何参考。

有什么提示吗？

更新 1：我不能在下一个字段上使用 displayCond，因为我根本不知道我会得到多少项目，所以我不能编写具有所有可能性的通用 XML 并使用 displayCond。

更新 2：所以我需要一些方法来获取像 tx_myext_fillBEData->fillFoldersField 这样的函数中的当前选定值，以获取具有其他字段条件的新值*。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:52:09.507

我设法解决了这个问题，我想分享它。$config 参数（第一个参数）包含一个 XML，其中包含当前 flexform 选择的数据。您可以通过数组访问它：

```
t3lib_div::xml2array($config['row']['pi_flexform']); 
```

这样我们就可以收集到所需的数据：

```
public function fillFoldersField($config) {
    $piValues  = t3lib_div::xml2array($config['row']['pi_flexform']);
    if (is_array($piValues)) {
        $FieldData = $piValues['data']['SHEETNAME']['lDEF']['FIELDNAME']['vDEF'];
        //Inside FieldData we will have the selected data from any field we specified before
    }
    else {
        //An error, there is no data, for example, the first load, without user interaction
    }
    //Below this, we insert the other values
    return $config;
} 
```

# ios - 我的 iOS 应用标识符应该是什么才能与我的配置文件一起使用？

> ID：14318531
> 
> 赞同：0
> 
> 时间：2013-01-14T12:36:22.480
> 
> 标签：ios, testflight

我正在尝试使用 Testflight 将 IPA 上传到我的应用程序测试人员，但它失败并出现以下错误：

> IPA 无效：embedded.mobileprovision 中的 keychain-access-group 与您的二进制文件不匹配。

我很困惑，因为我认为我的设置非常标准，而且我还有另一个可以构建和分发的应用程序（注意：使用第二个开发人员帐户但在同一个 Xcode 实例中）。

这是我的设置：

*   我在 Provisioning Portal 中创建的应用程序 ID 是`com.bubblefoundry.Clear`. 自然，它会以 Apple 分配的数字标识符作为前缀。
*   我使用应用程序 ID 和所需设备创建了一个临时分发配置文件。我将它下载到 Xcode 中。
*   产品名称`Clear`在 Xcode 中。
*   目标的“Summary”选项卡下的包名称为`com.bubblefoundry.Clear`，其中 Clear 为浅灰色并由 Xcode 自动填充。虽然我可以在 之前或之后添加文本`Clear`，但我无法删除它。“信息”选项卡下的名称是`com.bubblefoundry.${PRODUCT_NAME:rfc1034identifier}`。
*   在项目和目标的代码签名构建设置中，Debug 和 Release 都设置为 Automatic Profile Selector 下的 iPhone Developer。我想我可能需要将 Release 设置为我的分发配置文件，但我没有在另一个工作项目中这样做。

我可以很好地归档我的应用程序。然后在管理器中，我可以告诉它分发它以进行临时开发，然后选择使用我之前创建的分发配置文件重新签名。没有错误报告。同样，我可以连接我的 iPhone 并在手机上运行应用程序而不会出现问题。只有当我尝试使用 Testflight.app 上传 IPA 时，我才被告知该文件无效。

因为它提到了`embedded.mobileprovision`，我想我会戳进 IPA 并检查文件。这是相关数据（减去唯一信息）：

```
<plist version="1.0">
<dict>
    <key>AppIDName</key>
    <string>Project Clear</string>
    <key>ApplicationIdentifierPrefix</key>
    <array>
        <string>app-id</string>
    </array>
    <key>CreationDate</key>
    <date>2013-01-11T17:44:51Z</date>
    <key>DeveloperCertificates</key>
    <array>
        <data>
      my-certificate
        </data>
    </array>
    <key>Entitlements</key>
    <dict>
        <key>application-identifier</key>
        <string>app-id.com.bubblefoundry.Clear</string>
        <key>get-task-allow</key>
        <false/>
        <key>keychain-access-groups</key>
        <array>
            <string>app-id.*</string>
        </array>
    </dict>
    <key>ExpirationDate</key>
    <date>2013-10-07T17:44:51Z</date>
    <key>Name</key>
    <string>Project Clear Testers</string>
    <key>ProvisionedDevices</key>
    <array>
        <string>device1</string>
        <string>device2</string>
        <string>device3</string>
        <string>device4</string>
        <string>device5</string>
    </array>
    <key>TeamIdentifier</key>
    <array>
        <string>app-id</string>
    </array>
    <key>TeamName</key>
    <string>Bubble Foundry</string>
    <key>TimeToLive</key>
    <integer>269</integer>
    <key>UUID</key>
    <string>uuid</string>
    <key>Version</key>
    <integer>1</integer>
</dict>
</plist> 
```

看看这个，几乎所有的东西看起来都和我之前设置的一致。唯一的想法是，`AppIDName`是`Project Clear`，不是`Clear`。这是问题的根源吗？或者也许`keychain-access-groups`应该是`app-id.com.bubblefoundry.Clear`，不是`app-id.*`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:40:50.550

在这种情况下，您的应用程序 ID 应该是`com.bubblefoundry.Clear`.

如果您创建了配置文件，例如：

```
com.bubblefoundry.* 
```

您可以将此配置文件与各种 ID 一起使用。

```
com.bubblefoundry.Clear
com.bubblefoundry.my
com.bubblefoundry.Clear.newApp
com.bubblefoundry.testApp
com.bubblefoundry.yoyo 
```

您可以在 indo.plist 中更改应用程序 ID

替换`com.bubblefoundry.${PRODUCT_NAME:rfc1034identifier}.`为所需的 ID，例如：`com.bubblefoundry.myTestApp`。

# jquery - 部分圆圈的jquery悬停菜单 - 如何？

> ID：14318532
> 
> 赞同：3
> 
> 时间：2013-01-14T12:36:22.930
> 
> 标签：jquery, effects

我有一个有趣的问题，我不知道解决方案...

如果您检查此索引图像：（[来源：][[naprej.net](http://naprej.net/index.jpg)][）][![http://naprej.net/index.jpg](../Images/77b31e1e637f75c9e96fc5eea91cf2f0.png)](https://i.stack.imgur.com/UTiV6.jpg)

我怎样才能使菜单的每个部分都有翻转效果 - 例如 jquery 淡入淡出。

问题是它是圆形的。你如何定义像那张图片一样形状的物体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:06:41.210

试试这个用于图像映射的 jquery 插件：

[http://archive.plugins.jquery.com/project/maphilight](http://archive.plugins.jquery.com/project/maphilight)

# entity-framework-4 - Windows 服务中的实体框架（客户端-服务器应用程序）

> ID：14318533
> 
> 赞同：1
> 
> 时间：2013-01-14T12:36:34.740
> 
> 标签：entity-framework-4, ado.net, windows-services

我刚刚使用实体框架和代码优先开发了一个 MVC Web 应用程序。此应用程序将作业排入表中。

现在我正在开发一个读取此作业表并处理作业的 Windows 服务。完美的解决方案是在此 Windows 服务中使用实体框架。

我的问题是如何在 Windows 服务中实现实体框架，更重要的是，如何在 Windows 服务中使用（认为是客户端）MVC Web 应用程序的模型（认为是服务器）。

我已经看到 Code First 与 ADO.NET Self-Tracking Entity Generator 不兼容，这似乎是服务器-客户端环境的正确解决方案。我是否需要将 Code First EF 应用程序更改为 STE，或者是否有其他解决方案可以在 windows 服务中获取模型？

我搜索了如何在充当客户端的 Windows 服务中实现 EF，但一无所获。操作方法/教程将是完美的。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:42:22.650

1）共享数据层：

您应该将数据层代码分离到一个单独的程序集（项目）中，并从您的 Web 应用程序和您的服务中引用它。

2) 自我追踪实体：

你不应该再使用这些了。它们在 EF 4.1 之前很有用，但现在已经过时了。在您的服务中使用您的 POCO 对象很好。

# objective-c - RestKit：将键值对数组映射到 NSDictionary

> ID：14318534
> 
> 赞同：0
> 
> 时间：2013-01-14T12:36:36.093
> 
> 标签：objective-c, restkit

Webservice 向我发送如下所示的 JSON：

```
[
    {"key":"key1","value":"value1"},
    {"key":"key2","value":"value2"},
    {"key":"key3","value":"value3"}
] 
```

我应该如何设置 RestKit 映射以获取以下 NSDictionary？

```
@{ @"key1" : @"value1", @"key2" : @"value2", @"key3": @"value3" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:49:27.147

这可能对你有帮助，试试这个。

```
 NSDictionary *dict1 = [[NSMutableDictionary alloc] init];
            NSArray *arr = [[NSArray alloc] initWithArray:<Parse the array here from RESTkit>];
            for (int i = 0;i < [arr count], i++)
            {
                NSDictionary *dict = [arr objectAtIndex:i];
                NSString *key = [dict objectForKey:@"key"];
                NSString *value = [dict objectForKey:@"value"];
                [dict1 setObject:value forKey:key];

            }

        NSLog(@" Dictionary %@", dict1);
[dict1 release]; 
```

# android - Android：使用动画从右侧滑动窗口

> ID：14318548
> 
> 赞同：0
> 
> 时间：2013-01-14T12:37:44.163
> 
> 标签：android, mobile, titanium

我有行数，点击每一行都会打开一个相应的窗口。

// 行点击事件

```
function function description() { return function(){

        var des =require('/ui/common/events/EventDescription');
        var w=des()
        w.open()
}

} 
```

我希望通过从右向左滑动来打开新窗口。

试过这个但没有运气

```
function description() { return function(){

        var des =require('/ui/common/events/EventDescription');
        var w=des()

       var slide_it_left = Titanium.UI.createAnimation(); 
       slide_it_left.left = 0; 
       slide_it_left.duration = 300;
       win open(slide_it_left);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:11:52.127

正如我必须学习的那样：你不能`Ti.UI.Window`在 android 上制作动画。这没有真正记录，因为某些动画应该可以工作。最（有用的）动画将不起作用。

所以滑动动画（设置顶部、左侧、右侧或底部；宽度/高度）不起作用。如果你想在 Android 上使用动画，你需要在 Views 上使用它们。

# sitefinity - 如何在 Sitefinity 5.3 中添加自定义控件“abc.ascx”文件

> ID：14318549
> 
> 赞同：1
> 
> 时间：2013-01-14T12:37:44.973
> 
> 标签：sitefinity, sitefinity-5

我是 Sitefinity 5.3 的新手，我想在 Visualstudio 2012 中创建我的用户控件并将其添加到 sitefinitty

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:51:41.163

实现该控件与在纯 ASP.NET 中实现它完全相同 - 没有区别。

要将其包含在 Sitefinity 中，您必须在工具箱中注册它。以下是相关文档：[http ://www.sitefinity.com/documentation/documentationarticles/adding-controls-to-the-toolbox](http://www.sitefinity.com/documentation/documentationarticles/adding-controls-to-the-toolbox)

完成后，您可以在 Sitefinity 中创建一个页面，并使用拖放操作将您的自定义控件放在上面。这是一个视频展示如何：[http ://www.youtube.com/watch?v=LZ4VHGKQsrg](http://www.youtube.com/watch?v=LZ4VHGKQsrg)

# ajax - lilypond 的 Mathjax 模拟

> ID：14318551
> 
> 赞同：11
> 
> 时间：2013-01-14T12:37:56.570
> 
> 标签：ajax, web, lilypond

有什么东西可以将[Lilypond](http://lilypond.org)内容渲染到图像上，比如 mathjax？

另外，在我看来，打开一个关于音乐的 Stack Exchange 论坛会很好。这样的东西会给它带来很好的功能，比如[http://math.stackexchange.com](http://math.stackexchange.com)中的 LaTeX等等。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T11:44:24.577

## 为什么是 Lilypond，还有什么？

受过音乐教育的人讨厌[ABC 表示法](http://en.wikipedia.org/wiki/ABC_notation)，但显然它非常适合论坛，就像 TeX 用于数学公式（例如通过 MathJax）。Lilypond 在集成（TeX、HTML）和平台支持（Windows、Linux、Mac）方面非常先进。热衷于制作精美便签纸的学徒也推荐使用它（请参阅[http://lilypond.org/web/switch/advantages](http://lilypond.org/web/switch/advantages)）。

这是[对笔记编辑器的一个很好的评论](http://www.linuxjournal.com/content/music-notation-programs-recent-releases)，因此 Lilypond 不仅限于 TeX 集成 - 它还可以生成漂亮的 .PS 和 .SVG 文件。

[Vexflow](http://vexflow.com/)是一个很好的基于 Raphael 的 JavaScript 引擎，用于以编程方式绘制音乐符号，但它确实是为程序员准备的。如[0xfe 博客](http://0xfe.blogspot.ch/2013/01/hear-your-music.html)所述，它还有一个基于 Web 的 SaaS [http://static.vexflow.com/](http://static.vexflow.com/)。

其他支持 ABC 表示法的 javascript 渲染库是[abcjs](https://code.google.com/p/abcjs/)和[abcnode](https://github.com/sergi/abcnode)。IMO abcjs 在 HTML5 js 渲染的意义上是最接近 MathJax 的。

[MusicXML](http://en.wikipedia.org/wiki/MusicXML)实现了一种非 ABC 方法。自 2012 年以来，这种 XML 表示法得到了很好的支持，但本质上它非常麻烦（就像 MathML 与 TeX 一样）。还有许多支持 MusicXML 的 JS 渲染器，例如[score-library](https://code.google.com/p/score-library/)。

## 有音乐排版的堆栈交换论坛吗？

似乎有[排版](http://area51.stackexchange.com/proposals/47147/music-typesetting-with-lilypond)的提议，但有人提议将所有与计算机音乐符号相关的问题合并到[https://music.stackexchange.com/](https://music.stackexchange.com/)

## 配合播放音乐

[http://0xfe.blogspot.ch/2010/05/music-notation-with-html5-canvas.html](http://0xfe.blogspot.ch/2010/05/music-notation-with-html5-canvas.html)

这是另一个有趣的任务，即将符号呈现为 MIDI 或 HTML5 音频元素，但这是一个不同问题的主题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T12:57:41.843

有一个名为[ScoreRender](http://scorerender.abelcheung.org/demo/demo-lilypond/)的 WordPress 插件。还有一些云服务，如[LilyBin](http://lilybin.com/)或[WebLily](http://weblily.net)，但实际上不可能将它们的输出嵌入到网页中。

有一个[关于音乐排版的 Area51 提案](http://area51.stackexchange.com/proposals/47147/music-typesetting-with-lilypond)（它被提议为 LilyPond 特定的，但尽管我自己多年来只用 LilyPond 排版音乐，我建议它更通用）。如果您喜欢这个想法，请遵循并传播信息！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T01:48:52.503

我能想到的最接近的是[Vexflow](http://www.vexflow.com/)，它是一个 Javascript/HTML5 布局引擎。它不会直接渲染 Lilypond 符号文件（因为 Lilypond 文件基本上是 Scheme 宏，除了 Scheme 之外很难得到任何东西来解析更复杂的 Lilypond）。如果你绝对需要解析 Lilypond，你可以破解[Abjad](http://packages.python.org/Abjad/ "阿贾德")，一个可以解析 Lilypond 的 Python 包，并可能将它与我的 Python 包[music21](http://web.mit.edu/music21)的 Vexflow 输出机制链接起来。但是您最好将纯 Javascript 转换器制作为 Vexflow 中间表示。这很困难，但要知道其他人正在做这些事情，所以你并不孤单。

# wordpress - 需要重定向404到首页。

> ID：14318552
> 
> 赞同：0
> 
> 时间：2013-01-14T12:38:03.880
> 
> 标签：wordpress, .htaccess, redirect, http-status-code-404

我只剩下一个 404 并且不知道如何修复它。所以我需要将该单个页面重定向到主页。

我需要[http://www.name.co.uk/blog/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif](http://www.name.co.uk/blog/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif)重定向到 .htaccess 文件中的主页。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:18:33.033

对其进行排序。

重定向 301 /blog/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif [http://www.name.co.uk/](http://www.name.co.uk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:45:49.917

只需将以下行添加到您的 .htaccess 文件中：

```
ErrorDocument 404 /index.php 
```

这对我有用。

# css - CSS 背景图像在某些浏览器上不是全尺寸

> ID：14318560
> 
> 赞同：2
> 
> 时间：2013-01-14T12:38:45.377
> 
> 标签：css, responsive-design

我正在为我姐姐的婚礼做一个小演示，我基本上想在用户向下滚动页面时将身体背景设置为不同的图像。

[这是该页面的功能版本。](http://james.is.agoodman.com.au/carla_and_jamie/)

该过程本身可以正常工作，但是在：

**运行 Chrome 的桌面 mac（浏览器宽度约为 1900 像素）**

尽管背景保持固定（应该如此），但图像不会在页面上延伸。

[这个问题的截图](http://i.imgur.com/u87Hu.jpg)

**一部手机（android chrome）**

背景图像不会保持固定（当用户向下滚动时，背景图像会留在后面）。有趣的是，我无法通过缩小窗口在我的笔记本电脑浏览器中重现这一点——可能是移动浏览器本身的限制？

[这个问题的截图](http://imgur.com/jNZBY)

关于我在这里缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:19:13.100

图像宽 1200 像素。因此，在 1900 分辨率下，图像不会拉伸并且更小:)。如果你使用背景尺寸：100%；它应该伸展。

至于手机：[这个问题与您的解决方案相同。](https://stackoverflow.com/questions/8011085/keep-image-on-top-while-scrolling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:14:25.537

设置

```
width:100%
margin-left:auto;
margin-right:auto; 
```

在您的图像标签或 div 中

如果 100% 不起作用，请使用 px 作为宽度

# oracle - 是否可以在存储过程中评估表达式？

> ID：14318563
> 
> 赞同：1
> 
> 时间：2013-01-14T12:38:51.553
> 
> 标签：oracle, stored-procedures, plsql, expression

我有两张桌子

```

表1
+-------+----------+
| 编号 | 号码 |
+-------+----------+
| a001 | 001 |
| a002 | 002 |
| a003 | 003 |
| a004 | 004 |
| a005 | 002 |
+-------+----------+

表2
+----+-----------------------------------+-------- ----+
| 编号 | 拉伸 | 真/假 |
+----+-----------------------------------+-------- ----+
| 01 | `a003=a001+a002` | |
| 02 | `a004=a001+a002` | |
| 03 | `a004 + a005 =a001 + a002 + a003` | |
+----+-----------------------------------+-------- ----+

```

我想根据表达式的结果更新 True/False 列。在这种情况下，01 为真，02 为假，03 为真。我已经在 c# 代码中完成了这项工作。但是由于通过作业运行 exe 的限制，我想通过 oracle 中的程序来执行此操作。这可能吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:53:52.100

是的，你可以这么做。看起来您需要编写一个过程来解析和评估您的表达式，但假设您已经这样做并调用了过程 EVALUATOR_PROC 您的插入看起来像

```
INSERT INTO TBL2 (ID,   EXTRESSION,        TRUE_FALSE)
           VALUES('01', 'a003=a001+ a002', EVALUATOR_PROC('a003=a001+ a002')) 
```

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:55:50.507

您可以将所有查找放入一个数组中，然后在其上运行一个 pl/sql 块。

```
SQL> create package pkg_eval
  2  as
  3    function eval_expr(p_str in tbl2.expression%type)
  4      return varchar2;
  5  end pkg_eval;
  6  /

Package created.

SQL> create package body pkg_eval
  2  as
  3    --  Type to hold lookup values
  4    type lookup_tab is table of number index  by varchar2(4000);
  5    t_lookup lookup_tab;
  6
  7    function eval_expr(p_str in tbl2.expression%type)
  8      return varchar2
  9    is
 10      v_str varchar2(32767) := p_str;
 11      v_idx tbl1.id%type;
 12      v_res varchar2(5);
 13    begin
 14
 15      -- iterate through each lookup and replace it in the input expression
 16      v_idx := t_lookup.FIRST;
 17      while v_idx is not null
 18      loop
 19        v_str := replace(v_str, v_idx, t_lookup(v_idx));
 20        v_idx := t_lookup.NEXT(v_idx);
 21      end loop;
 22      -- Run the expression.
 23      execute immediate '
 24      declare
 25        v_res varchar2(5);
 26      begin
 27        if ((' || v_str || '))
 28        then
 29          v_res := ''true'';
 30        else
 31          v_res := ''false'';
 32      end if;
 33        :a := v_res;
 34      end;' using out v_res;
 35
 36      return v_res;
 37    end eval_expr;
 38
 39  -- Populate lookup values, once per session.
 40  begin
 41    for r_row in (select id, val
 42                     from tbl1)
 43    loop
 44      t_lookup(r_row.id) := r_row.val;
 45    end loop;
 46  end pkg_eval;
 47  /

Package body created.

SQL> col result  format a10
SQL> select t.*, pkg_eval.eval_expr(t.expression) result from tbl2 t;

        ID EXPRESSION                      RESULT
---------- ------------------------------- ----------
         1 a003=a001+ a002                 true
         2 a004=a001+ a002                 false
         3 a004 + a005 =a001 + a002 + a003 true 
```

ps 用于错误处理，您可能需要处理损坏的表达式等，例如

```
 return v_res;
  exception
    when others
    then
      return 'unknown';
  end eval_expr; 
```

# php - 如果条件有一个变量以便理解

> ID：14318566
> 
> 赞同：0
> 
> 时间：2013-01-14T12:39:02.397
> 
> 标签：php

> **可能重复：**
> [关于 PHP 中的 if 语句](https://stackoverflow.com/questions/6554384/regarding-if-statements-in-php)

这是一个简单的问题。但是在这里我需要知道如果条件仅适用于一个变量。

```
$category='';

if ($category) {

} 
```

你能说出在 If 条件中实际检查的内容吗？条件只有一个变量..

检查变量是真还是假？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:42:44.510

PHP 是一种[弱类型语言](http://php.net/manual/en/language.types.type-juggling.php)。要了解`if`条件中评估的内容，请参阅[booleans 的转换规则](http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)。

引用手册：

> 转换为布尔值时，会考虑以下值`FALSE`：
> 
> *   布尔值`FALSE`本身
> *   整数`0`（零）
> *   浮点数`0.0`（零）
> *   **空字符串**和字符串`"0"`
> *   一个元素为零的数组
> *   具有零成员变量的对象（仅限 PHP 4）
> *   特殊类型`NULL`（包括未设置的变量）
> *   `SimpleXML`从空标签创建的对象

因此，您的条件将被评估为`FALSE`, 因为`$category == ''`和`(bool) '' === FALSE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:47:57.257

## 类型 1

```
$category = '';
if ($category) {
   echo 'category';
} else {
   echo 'no category';
} 
```

// 输出：无类别

## 类型 2

```
$category = TRUE;
if ($category) {
   echo 'category';
} else {
   echo 'no category';
} 
```

// 输出：类别

## 类型 3

```
$category = '';
if (!empty($category)) {
   echo 'category';
} else {
   echo 'no category';
} 
```

// 输出：无类别

## 类型 4

```
$category = 0;
if (!empty($category)) {
   echo 'category';
} else {
   echo 'no category';
} 
```

// 输出：无类别

## 类型 5

```
$category = 0;
if (isset($category)) {
   echo 'category';
} else {
   echo 'no category';
} 
```

// 输出：类别

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:40:19.287

这将检查`TRUE`

```
if ($category) {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T12:42:00.933

`false`在这种情况下，您的空字符串将被转换为布尔值。见[`manual on Booleans`](http://php.net/manual/en/language.types.boolean.php)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T12:42:13.590

这将检查变量`true`的计算结果是否为 ，它相当于：

```
if( (bool)$category === true) ) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T12:42:58.070

是 它正在检查 TRUE 或 FALSE。如果表达式计算结果为 TRUE，PHP 将执行语句，如果计算结果为 FALSE - 它会忽略它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-14T12:43:22.537

如果（$类别）{

}

将简单地检查 $category 是否有值。你没有给 $category 一个值。在这种情况下，它将给出 FALSE。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-14T12:45:52.840

只要评估的语句为真，if 条件块就会激活。

PHP 中的空字符串计算结果为 false，因此不会被激活。您可以通过指定您的期望来更具体，例如：

```
 $category = '';
   if (empty($category)) {

   } 
```

...如果您希望它在空时激活。这真的取决于你想要做什么，但像这样我假设条件永远不会满足。

# python - wxPython AboutDialog 图标未居中

> ID：14318567
> 
> 赞同：3
> 
> 时间：2013-01-14T12:39:11.610
> 
> 标签：python, image, wxpython

我有一个问题`wx.AboutBox`。我的图像（或您想要的图标）没有像教程中的那样居中 - 我在 Windows 7 上，并且本教程可能会在 Ubuntu 上进行测试 - 是这样吗？

![我的关于对话框：](../Images/8267bac15d3e65595f8879c53c4ceca6.png)

![教程：](../Images/739583f1fc24b0aceb3da3c74593ac74.png)

编码：

```
 about = wx.AboutDialogInfo() 

    about.SetIcon(wx.Icon('Fartberegneren.png', wx.BITMAP_TYPE_PNG))
    about.SetName('Fart Beregneren')
    about.SetVersion('1.0')
    about.SetDescription(description)
    about.SetCopyright('(C) 2012 - 2013 Casper William Medom Nielsen')
    about.SetWebSite('http://www.casperwmn.dk')
    about.AddDeveloper('Casper William Medom Nielsen')
    about.AddDeveloper('Rasmus Bøje Larsen')
    about.AddDocWriter('Casper William Medom Nielsen')
    about.AddDocWriter('Rasmus Bøje Larsen')

    wx.AboutBox(about) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:21:03.930

我通过报告得到了答案：

“这不是一个错误，它是一种近似原生行为的尝试。Windows 下的 about 框没有明确定义的标准，但最常见的布局是将图标放在左侧。更一般地说，wxAboutBox 不会做任何保证它在给定平台下的外观，因为它包装了本机对话框（如果可用）。如果您需要在所有平台下以相同方式查看的内容，您可以（轻松）在您自己的代码中使用通用对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:53:52.597

不仅是您的代码，甚至演示也为我在带有 wxPython 2.8.12.1 的 Windows 7 上演示了同样的问题。对我来说似乎是一个错误。

# java - 我无法按名称切换窗口 (driver.switchTo("windowName"))

> ID：14318569
> 
> 赞同：2
> 
> 时间：2013-01-14T12:39:26.233
> 
> 标签：java, selenium-webdriver

我正在写一个测试，我发现我无法按名称切换到特定窗口。在测试的这一点上，打开了三个窗口，我想切换到的窗口名称唯一不寻常的是它包含一个连字符。我可以使用以下解决方法（使用窗口句柄而不是名称）切换到它，但我宁愿使用名称。有人知道我为什么不能吗？

```
Set <String> handles = driver.getWindowHandles();
        for (String i : handles) {
            waitForWindowAndSwitchToIt(i); //this function is basically a wrapper for switchTo() - the problem is not here
            if (driver.getTitle().equals("My website - test")) { 
                break;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:57:55.147

WebDriver 没有采用“title”参数的 .switchTo 方法。如果你想做这样的事情，你必须重写并提供你自己的重载方法。就个人而言，我认为使用窗口句柄更优雅，因为它们是唯一的，而标题并不能保证是唯一的。

# c# - 如何读取 Dapper 生成的 SQL 查询？

> ID：14318571
> 
> 赞同：15
> 
> 时间：2013-01-14T12:39:28.167
> 
> 标签：c#, logging, dapper

我有一个标准代码：

```
public IEnumerable ExperimentSelect(object parameters)
{
    using (var connection = new SqlConnection(ConnectionString))
    {
        connection.Open();
        var dynamicparam = new DynamicParameters(parameters);

        var rows = connection.Query("[dbo].[ptbSapOrderSelect]", dynamicparam, 
                commandType: CommandType.StoredProcedure);

        if (rows.Any())
            TotalRows = ((long)rows.ToList()[0].TotalRows);

        return rows;
    }
} 
```

如何使用例如 NLog 自动将 Dapper 生成的查询保存到文件中？我正在考虑获取 SQL Server Profiler 中所示的 SQL 查询源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-30T17:25:21.643

我设法使用[MiniProfiler 在 ASP.Net MVC 应用程序中完成这项工作。](http://miniprofiler.com/)

首先，按照文档配置 MiniProfiler。确保将 SqlConnection 包装在 ProfiledDbConnection 中。

请注意，您不需要启用可视化小部件来使其工作，只需确保配置文件在每个请求之前启动并在每个请求之后结束。

接下来，在停止该请求的配置文件的 global.asax.cs 中，将其修改如下：

```
protected void Application_EndRequest()
{
    // not production code!
    MiniProfiler.Stop();

    var logger = NLog.LogManager.GetCurrentClassLogger();

    var instance = MiniProfiler.Current;

    if (instance == null) return;

    var t = instance.GetSqlTimings();

    foreach (var sqlTiming in t)
    {
        logger.Debug(sqlTiming.CommandString);
    }
} 
```

这实际上会转储执行的 SQL 命令，但如果您想报告更高级的信息，模型中包含更多信息。

# sql - 棘手的 sql 查询 - 寻找替代供应商（关系部门）

> ID：14318572
> 
> 赞同：3
> 
> 时间：2013-01-14T12:39:35.663
> 
> 标签：sql, relational-division

这是我从一本书中得到的一个问题（不记得是哪个），它是这样的：

你有三个表：

*   **供应商**( `supId, name`)
*   **产品**( `prodId, name`)
*   **库存**( `supId, prodId`)

您需要通过一次查询找到所有在其库存中拥有供应商 X 拥有的所有产品（或更多）的供应商（假设供应商 X 是具有 的供应商`supId=1`）。

（所以如果供应商 1 在他的库存中有香蕉和苹果，你需要找到所有至少有香蕉和苹果的供应商）

您只能使用标准 SQL（包括连接）。

显然这是一个已知问题/问题，您应该查看这个问题： [How to filter SQL results in a has-many-through relationship](https://stackoverflow.com/q/7364969/1110327) (优秀的解决方案和分析)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T12:48:49.957

这个问题被称为[关系划分](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。

一种解决方案是双重否定。您可以选择不存在供应商 X 交付的产品的所有供应商，而不是他们交付的产品：

```
select  distinct other_supplier.SupID
from    Inventory other_supplier
where   not exists
        (
        select  *
        from    Inventory supplier_X
        where   supplier_X.supId = 1 -- For supplier X
                and not exists
                (        
                select  *
                from    Inventory other_product
                where   other_supplier.supId = other_product.Supid
                        and supplier_X.prodId = other_product.prodId
                )
        ) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/26fdf/4/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:07:15.833

我相信这个解决方案使用标准 SQL，除了参数定义。

```
DECLARE @supplierX int = 4

SELECT 
  [s].[supid],
  [s].[name]
FROM [Inventory] [i1]
INNER JOIN [Inventory] [i2] ON [i1].[prodid] = [i2].[prodid]
INNER JOIN [Supplier] [s] ON [i1].[supid] = [s].[supid]
WHERE
  [i1].[supid] <> @supplierX
  AND [i2].[supid] = @supplierX
GROUP BY 
  [s].[supid],
  [s].[name]
HAVING 
  COUNT(*) >= (SELECT COUNT(*) FROM [Inventory] [i3] WHERE [i3].[supid] = @supplierX) 
```

[在这里](http://www.sqlfiddle.com/#!3/00549/4)可以找到小提琴。

上述查询的细分：

*   确定供应商 X 在其库存中的产品数量 ( `count(*)`)
*   确定其他供应商与供应商X 共享的产品（`join`按prodid）
*   确保共享产品的数量大于或等于供应商X 在其库存中的产品数量 ( `HAVING COUNT() >= ...`)

# android - android放大/缩小在自定义相机应用程序中不起作用

> ID：14318574
> 
> 赞同：3
> 
> 时间：2013-01-14T12:39:37.203
> 
> 标签：android, camera, zooming, customization

我有这个功能可以为我的相机应用程序添加缩放控制。这个函数是从surfaceChanged()调用的

但在许多设备上按 + / - 缩小/缩小显示没有效果。这些设备支持缩放。代码也在 Sony xperia 上运行，所以代码必须是正确的。

请帮我修复它。还有什么我需要做的。

```
public void setZoomControl(Camera.Parameters params) {
    ZoomControls zoomControls = (ZoomControls) findViewById(R.id.CAMERA_ZOOM_CONTROLS);

    if (params.isZoomSupported()) {
        maxZoomLevel = params.getMaxZoom();
        Log.i("max ZOOM ", "is " + maxZoomLevel);
        ;

        zoomControls.setIsZoomInEnabled(true);
        zoomControls.setIsZoomOutEnabled(true);

        zoomControls.setOnZoomInClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (currentZoomLevel < maxZoomLevel) {
                    currentZoomLevel++;
                    camera.startSmoothZoom(currentZoomLevel);
                }
            }
        });

        zoomControls.setOnZoomOutClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (currentZoomLevel > 0) {
                    currentZoomLevel--;
                    camera.startSmoothZoom(currentZoomLevel);
                }
            }
        });
    } else
        zoomControls.setVisibility(View.GONE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-26T19:06:02.173

我解决了这个问题。

不要使用 startSmoothZoom() 方法

```
Camera.Parameters params = camera.getParameters();
params.setZoom(zoom_value);
camera.setParameters(params); 
```

# c# - 以编程方式为图形卡注册应用程序

> ID：14318579
> 
> 赞同：0
> 
> 时间：2013-01-14T12:39:55.780
> 
> 标签：c#, graphics, installation, registry

我正在尝试使用 Inno Setup 为应用程序编写安装程序，顺便说一句，这很整洁；），但现在我遇到了关于显卡的问题。

我正在安装一个 3D 应用程序并想配置该程序，使其默认使用某个图形卡。对我来说，注册表中的某个地方必须是配置它的东西，这听起来很合乎逻辑。我尝试手动更改默认显卡并比较注册表中的更改，但找不到与更改相关的任何条目

我知道像 Adob​​e Photoshop 这样的程序默认使用高性能显卡，所以必须有某种解决方案来解决我的问题。

我正在使用 inno 脚本来编写我的设置，但我可以调用外部程序来执行一些任务，这样我就可以编写一个 C# 程序来执行这个任务。

此选项主要与 Windows 7 和 Windows 8 相关，因为我只在那里看到它。

你们中有人知道如何以编程方式更改应用程序的默认图形卡吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:43:01.110

对不起，你的方法很糟糕。这不是您在设置过程中应该做的事情。卡变了怎么办？

在应用程序启动期间检查它。如果您没有找到任何东西，让用户选择。让他更新。不是每个人都只有一张显卡。人们确实更新了显卡。为什么我要重新运行安装程序才能完成这项工作？

而且识别显卡很容易，性能是另一回事。哪一个是你眼中的“高性能”？

# castle-windsor - Windsor 使用密钥解决依赖关系

> ID：14318582
> 
> 赞同：1
> 
> 时间：2013-01-14T12:40:04.583
> 
> 标签：castle-windsor

我已经通过以下方式使用 Castle Windsor 注册了多个接口实例：

```
ServiceLocatorHelper.Register(
    Component.For<ISerializerAdapter>()
        .ImplementedBy<SerializerAdapter>(),
    Component.For<IDriver>()
        .ImplementedBy<FileDriver>()
        .Named(SerializationType.Binary.ToString()),
    Component.For<IDriver>()
        .ImplementedBy<XmlDriver>()
        .Named(SerializationType.Xml.ToString()),
    Component.For<IBroker>().ImplementedBy<Broker>()
    ); 
```

依赖关系如下：

```
+ IBroker
  - IDriver
    types
    {
     - FileDriver
     - XmlDriver
    }
  - ISerializerAdapter 
```

所以为了创建一个新对象，这是默认的构造函数顺序：

```
IBroker broker = new Broker(new IDriver(new ISerializerAdapter)); 
```

**问题是：** 当我通过以下方式使用城堡解决新的 IDriver 时：

```
IBroker broker = container.Resolve<IBroker>();
IDriver driver = broker.Driver;
Assert.IsTrue(driver.GetType() == typeof(FileDriver)); 
```

属性 IDriver 始终是**FileDriver**类型，而如果我使用密钥解析 IDriver 它会返回正确的类型：

```
IDriver fileDriver = container.Resolve<IDriver>(SerializationType.Binary.ToString());
Assert.IsTrue(fileDriver.GetType() == typeof(FileDriver));

IDriver fileDriver = container.Resolve<IDriver>(SerializationType.Xml.ToString());
Assert.IsTrue(fileDriver.GetType() == typeof(XmlDriver)); 
```

**我怎么能说这样的话？**

```
IBroker broker = container.Resolve<IBroker>("Xml");
Assert.IsTrue(broker.Driver.GetType() == typeof(XmlDriver)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:39:30.417

这是使用[Typed Factory Facility](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)的典型场景。

只需声明工厂接口：

```
public interface IBrokerFactory {
    IBroker GetXmlBroker();
    IBroker GetBinaryBroker();
} 
```

并像这样注册它：

```
Component.For<IBrokerFactory>().AsFactory(),
Component.For<IBroker>().
          ImplementedBy<Broker>().
          Named("BinaryBroker").
          DependsOn(Dependency.OnComponent("BinaryDriver")),
Component.For<IBroker>().
          ImplementedBy<Broker>().
          Named("XmlBroker").
          DependsOn(Dependency.OnComponent("XmlDriver")),
Component.For<IDriver>().ImplementedBy<FileDriver>().Named("BinaryDriver"),
Component.For<IDriver>().ImplementedBy<XmlDriver>().Named("XmlDriver"), 
```

`GetXxx()`方法名称应与 匹配，仅此`.Named("Xxx")`而已。用法：

```
var factory = container.Resolve<IBrokerFactory>();
IBroker broker = factory.GetXmlBroker();
Assert.IsTrue(broker.Driver.GetType() == typeof(XmlDriver)); 
```

# prolog - Prolog：按奇偶性划分整数列表项

> ID：14318589
> 
> 赞同：2
> 
> 时间：2013-01-14T12:40:41.347
> 
> 标签：prolog, clpfd

编写一个谓词，将整数列表作为输入`L`，并生成两个列表：包含来自`L`的偶数元素的列表和来自 的奇数元素的列表`L`。

```
?- separate_parity([1,2,3,4,5,6], Es, Os).
Es = [2,4,6], Os = [1,3,5] ? ;
no 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:40:01.570

只需在列表上使用结构递归。写下每个互斥情况的等价关系：

```
parity_partition([A|B], [A|X], Y):- 0 is A mod 2, parity_partition(B,X,Y).
parity_partition([A|B], X, [A|Y]):- 1 is A mod 2, parity_partition(B,X,Y).
parity_partition([],[],[]). 
```

这意味着：关系`parity_partition(L,E,O)` *成立*，

1.  如果`L=[A|B]`和`A`是偶数，当*和* 关系成立。`E=[A|X]``O=Y``parity_partition(B,X,Y)`
2.  如果`L=[A|B]`和`A`是奇数，当*和* 关系成立。`E=X``O=[A|Y]``parity_partition(B,X,Y)`
3.  万一`L=[]`，当`E=[]`和`O=[]`。

只要写下这些等价，我们就可以使用 Prolog 程序来解决这个问题。

* * *

在操作上，这意味着：将列表`L`分为偶数`E`列表和赔率列表`O`，

```
  1.如果`L`是一个非空列表`[A|B]`，
     1a。如果 `A` 是偶数，
              为`E=[H|T]`分配新的列表节点，
              设置其数据字段“H=A”，
              并继续分离输入列表的其余部分“B”
                           进入 `T` 和 `O` ; 或者
     1b。如果`A`是奇数，
              为 `O=[H|T]` 分配新的列表节点，
              设置其数据字段“H=A”，
              并继续分离输入列表的其余部分“B”
                           进入 `E` 和 `T` ; 或者
  2.如果`L`是一个空列表，将`E`和`O`都设置为空列表

```

实际的操作顺序可能有点不同，但在概念上是相同的：

```
  1.尽量统一L=[A|B], E=[A|X]。如果没有，请转到 2。
     1a。检查A是否是偶数。
         如果没有，请放弃所做的实例化
                 作为统一的一部分，然后转到 2。
     1b。继续使用 B、X 和相同的 O：使用 B 作为 L，使用 X 作为 E，然后转到 1。
  2.尝试统一L=[A|B]，O=[A|Y]。如果没有，请转到 3。
     2a. 检查 A 是否为奇数。
         如果没有，请放弃所做的实例化
                 作为统一的一部分，然后转到 3。
     2b。继续使用 B、Y 和相同的 E：使用 B 作为 L，使用 Y 作为 O，然后转到 1。
  3\. 用 [] 统一 L,E,O。

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:21:27.227

您可以为此使用[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")。通过这种方式，你得到一个纯粹的关系：

```
:- use_module(library(clpfd)).
list_evens_odds([], [], []).
list_evens_odds([E|Zs], [E|Es], Os) :-
   0 #= E mod 2,
   list_evens_odds(Zs, Es, Os).
list_evens_odds([E|Zs], Es, [E|Os]) :-
   1 #= E mod 2,
   list_evens_odds(Zs, Es, Os). 
```

您不仅可以使用它来将列表拆分为偶数和赔率。但你可以走得更远。以下交互是使用 SWI 进行的，但您在 SICStus 中使用`asserta(clpfd:full_answer)`.

```
?- list_evens_odds([1, 2, 3, 4, 5, 6], Es, Os)。
Es = [2, 4, 6],
os = [1, 3, 5] ;
错误的。

?- Zs = [A,B,C], list_evens_odds(Zs, Es, Os)。
Zs = [A, B, C],
Es = [A, B, C],
奥斯= []，
一个 mod 2#=0,
B mod 2#=0,
C mod 2#=0 ;
Zs = [A, B, C],
Es = [A, B],
奥斯= [C]，
一个 mod 2#=0,
B mod 2#=0,
C mod 2#=1 ;
Zs = [A, B, C],
Es = [A, C],
奥斯= [B]，
一个 mod 2#=0,
B mod 2#=1,
C mod 2#=0 ...

?- Es = [E], Os = [O], list_evens_odds(Zs, Es, Os)。
Es = [E]，
奥斯 = [O]，
Zs = [E, O],
E mod 2#=0,
O mod 2#=1 ;
Es = [E]，
奥斯 = [O]，
Zs = [O, E],
E mod 2#=0,
O mod 2#=1 ;
错误的。

```

接下来可能是最烦人的：在这里，我们询问是否存在一个`EO`既是偶数又是奇数的整数。当然，这样的整数是不可能存在的。但我们仍然得到两个答案！

```
?- EOs=[EO], list_evens_odds(Zs, EOs, EOs)。
EO = [EO]，
Zs = [EO，EO]，
EO mod 2#=1,
EO mod 2#=0 ;
EO = [EO]，
Zs = [EO，EO]，
EO mod 2#=0,
EO mod 2#=1 ;
错误的。

```

这说明了答案和解决方案之间的区别。我们在这里得到两个答案，但两者都不包含解决方案。大多数情况下，答案包含一个或多个解决方案，但也可以不包含任何解决方案，就像在这种情况下一样。这样的答案有时被称为不一致。

不一致不一定被认为是实现的*错误*。它们是一种工程折衷：与实际收益相比，确保一致性的成本可能非常高。并且： Prolog 不会产生不正确的答案：对于必须保持的条件已显示。即使那个条件被证明是错误的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-10T15:31:35.183

此答案基于[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")、[meta-predicate](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") [`tpartition/4`](https://stackoverflow.com/a/29867514/4609915)和 reified test [`zodd_t/2`](https://stackoverflow.com/a/29459595/4609915)：

```
:- use_module(library(clpfd)). 
```

`tpartition/4`结合使用我们`zodd_t/2`可以简单地写：

```
?- tpartition(zodd_truth,[1,2,3,4,5,6],Es,Os).
Es = [1,3,5], Os = [2,4,6].                 % succeeds deterministically 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T14:03:17.757

@Will Ness 的回答很好而且很详细。如果您的 Prolog 提供它，我将添加使用“高阶”内置函数的可能性（即接收谓词作为参数的谓词）：

```
separate_parity(L, E, O) :-
    partition(is_even, L, E, O).
is_even(N) :- N mod 2 =:= 0. 
```

您可以在[此处](http://www.swi-prolog.org/pldoc/doc_for?object=partition/4)找到内置函数的简要说明。

# delphi - Delphi GLScene 导出场景为 stl

> ID：14318593
> 
> 赞同：6
> 
> 时间：2013-01-14T12:40:52.610
> 
> 标签：delphi, stl, export, scene, glscene

我有一个`GLScene`项目。在`SceneViewer`我将一些 stl 文件导入为自由格式。用户可以与这些对象进行交互（用鼠标移动和旋转它们）。

现在我必须将整个导出`Scene`到一个*stl 文件中，因此**自由形式*的位置和旋转应该与`Scene`导出（“合并”）之后的一样。

我发现这个线程关于同样的问题：[Export "Scene" to STL File](http://glscene.general.free-usenet.eu/Export-Scene-to-STL-File_T25486686_S1)但这会创建一个损坏的 stl 文件（尝试使用 meshlab 打开）。

我希望有一些想法来创建解决方案。如果有人知道另一种 3d 文件格式的解决方案，那也太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:05:06.847

我找到了解决方案:-)

答案中的链接几乎是正确的，但我必须以其他方式计算标题信息（小面数）。现在我使用一个循环来计算标题，然后再写这一切。有时解决方案是如此接近。

```
var j :integer ; 
var i:integer; 
var header: TSTLHeader; 
var dataFace: TSTLFace; 
var list: TaffineVectorlist; 

//objects  = list of steFreeform objects
//astream  = created stream 
for  j := 0 to objects.count - 1 do 
begin
  list := TGLFREEForm(objects[j].MeshObjects.ExtractTriangles; 
  header.nbfaces :0 header.nbFaces + list.count div 3 ; 
end; 
aStream.write(header.SizeOf(header)); 
//rest see above link in the question 
```

# jfreechart - JFreeChart - 由于大量范围轴确定图表不可见的时刻

> ID：14318594
> 
> 赞同：2
> 
> 时间：2013-01-14T12:41:03.367
> 
> 标签：jfreechart

我正在使用 JFreeChart 库来创建图表。我需要在同一张图表上呈现大量数据。因此，我有许多范围轴描述。不幸的是，当范围轴太多时，图表不再可见。可以通过调用这个简单的线条使图表可见（其中 plot 是一个 XYPlot 实例）：

```
int axises = plot.getRangeAxisCount();
for (int i = 0; i < axises; i++) {
   plot.getRangeAxis(i).setVisible(false);
} 
```

这个简单的代码部分隐藏了所有 RangeAxes。执行该代码后，图表没有范围轴的任何描述，但它是可见的。

但不幸的是，我无法弄清楚如何确定图表在处理期间是否可见。

对我来说重要的信息在：

```
chartPanel.getChartRenderingInfo().getPlotInfo().getDataArea().getWidth() 
```

但不幸的是，我在图表上执行了许多操作（例如缩放、移动等），因此当图表状态发生变化时，我每次都需要获取这些信息。每当调用 PlotChangeListener 接口的 plotChanged() 方法时，我都无法获取该信息，因为没有绘图（未触发此事件）。ChartChangeListener 中的 chartChanged() 方法过早触发 - chartPanel.getChartRenderingInfo().getPlotInfo().getDataArea().getWidth() 返回旧值。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:56:02.147

您可以[`ChartProgressListener`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/event/ChartProgressListener.html)在`ChartPanel`.

```
chart.addProgressListener(new ChartProgressListener() {

    @Override
    public void chartProgress(ChartProgressEvent event) {
        System.out.println(event.getType() + " "
            + event.getPercent() + " "
            + chartPanel.getChartRenderingInfo()
                .getPlotInfo().getDataArea().getWidth());
    }
}); 
```

# android - Android Google Oauth 问题

> ID：14318598
> 
> 赞同：2
> 
> 时间：2013-01-14T12:41:08.897
> 
> 标签：android, google-oauth

我正在尝试此处介绍的 Android-Google_web_app 集成身份验证：[http ://android-developers.blogspot.pt/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.pt/2013/01/verifying-back-end-calls-from-android.html)

基本上，Android 应用程序应该获得一个链接到我现有的 Web 应用程序 client_id 的 OAuth 令牌。当我从 google api 获取令牌时，我的示例应用程序运行良好，例如：“oauth2:https://www.googleapis.com/auth/userinfo.profile”。

当我将范围更改为我的网络应用程序客户端 ID 时：“audience:server:client_id:1044492925447-9vr9sqjsb7kqs51ks89jfcufeq0rfvu6.apps.googleusercontent.com”

GoogleAuthUtil.getToken 会抛出带有空白消息的 GoogleAuthException，所以我不知道发生了什么。

感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:34:22.180

我找到了问题的原因。

Android 应用程序的**包名称**与 Google API 控制台上的“已安装应用程序的客户端 ID”不匹配。

我为测试目的创建了一个示例应用程序，并认为包名称无关紧要。

# c# - Windows Phone 7 广告未显示

> ID：14318601
> 
> 赞同：0
> 
> 时间：2013-01-14T12:41:17.567
> 
> 标签：c#, visual-studio-2010, windows-phone-7, ads

我创建了一个应用程序，在其中放置了 adcontrols。我还为我的应用程序配置了 ID，但更改后没有显示任何广告。我已经通过模拟器和我自己的 Windows Phone 对其进行了测试，但广告没有显示，可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:22:49.220

我遇到了同样的问题。对我有用的是在代码中设置 AdControl 的高度和宽度（不仅仅是在 xaml 中）。

这可能不适用于..所以要清楚地了解你哪里出错了添加 adcontrol.erroroccured 函数。我的代码是这样的。

```
 public HomePage()
    {
        InitializeComponent();

        String AppId = SResources.Ad_App_ID;
        String AdUnitID = SResources.Ad_Unit_ID;
        sAdControl.AdUnitId = AdUnitID;
        sAdControl.ApplicationId = AppId;
        sAdControl.Width = 480;
        sAdControl.Height = 80;
        sAdControl.ErrorOccurred += new EventHandler<Microsoft.Advertising.AdErrorEventArgs>(sAdControl_ErrorOccurred);
    }

    void sAdControl_ErrorOccurred(object sender, Microsoft.Advertising.AdErrorEventArgs e)
    {
           string error=e.Error.ToString();
    } 
```

希望这可以帮助！！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T06:53:22.983

我有同样的问题。我实现了

```
void sAdControl_ErrorOccurred 
```

发现缺少该功能，所以我添加了`ID_CAP_PHONEDIALER, ID_CAP_IDENTITY_USER, ID_CAP_MEDIALIB, ID_CAP_WEBBROWSERCOMPONENT`，现在它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:04:23.437

问题依然存在！虽然我现在知道为什么了，但代码错误或任何东西都没有。

微软的广告服务器有问题，有几个人和我有同样的问题。

似乎这一切都在 2013 年 1 月开始了。人们甚至看不到测试 Adcontrols，我也看不到。这是微软必须解决的问题。

我将此链接发布到他们的论坛，以便您可以阅读更多内容并了解其他几个 Adcontrols 有类似问题。希望这可以帮助！

[http://community.bingads.microsoft.com/ads/en/publisher/f/32/t/74426.aspx](http://community.bingads.microsoft.com/ads/en/publisher/f/32/t/74426.aspx)

问候威廉！

# api - 为Windows应用程序中的按钮创建键盘快捷键？

> ID：14318606
> 
> 赞同：0
> 
> 时间：2013-01-14T12:41:28.037
> 
> 标签：api, keyboard-shortcuts

为Windows应用程序中的按钮创建键盘快捷键？

我有一个用于 CAD 的 Autodesk Revit 应用程序。

此应用程序中有一个按钮可以执行“适合查看”命令。单击它，一个 3D 视图以对象为中心。

该应用程序不允许我将此“操作”绑定到当前版本的键盘快捷键。

如果您使用 Spacepilot 3D 鼠标，则此操作可用于其中一个按钮。

有没有办法使用某种软件将其绑定到键盘快捷键？

Revit 还允许通过其 API 进行扩展，因此这也可能是一种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:10:34.767

显然有一个“Zoom to awesome”插件，它使用 API 来做到这一点，但只能在平面视图中，而不是像 viewcube 那样的 3d 相机透视图。

[http://www.architecture-tech.com/2012/09/zoom-to-awesome.html](http://www.architecture-tech.com/2012/09/zoom-to-awesome.html)

# android - onClick - 将数据输出到新页面或布局？

> ID：14318607
> 
> 赞同：0
> 
> 时间：2013-01-14T12:41:29.623
> 
> 标签：android, android-layout

这可能是非常基本的，但我现在只需要使用这样的功能。我有一个按钮，当我点击它时会执行计算。输出是一个数字。我想将该数字放入不同布局的 TextView 中。基本上在它自己的页面上。

我已经可以在同一页面上得到我想要的了。只做整体

```
TextView.setText(); 
```

谁能帮我把数据放到它自己的页面上？因此，当我单击按钮时，它会执行计算并打开这个新页面以将答案放在上面？

我尝试将 TextView 放在一个新的布局文件中并通过 findViewById 调用它，但这给了我一个强制关闭。

有什么解决办法吗？谢谢。

编辑：这是代码，我正在尝试在另一页上显示时间。见下文

```
public void getWakeUpTime (View v) {

    LocalTime localtime = new LocalTime();
    LocalTime dt = new LocalTime(localtime.getHourOfDay(), localtime.getMinuteOfHour());
    LocalTime twoHoursLater = dt.plusHours(2);

    DateTimeFormatter formatter = DateTimeFormat.forPattern("HH:mm");
    Text1.setText("Time: " + twoHoursLater.toString(formatter));

} 
```

现在它显示在 TextView Text1 下的同一页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:47:09.013

您可以使用以下代码将整数传递给下一个活动：

```
String num;
Intent i = new Intent(this, NextActivity.class);
i.putExtra("value", num);
startActivity(i); 
```

您可以检索下一个活动的数据，如下所示：

```
Intent i = getIntent();
String num = i.getStringExtra("value");
textview.setText("Number is: "+num); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:54:06.757

所以兄弟，你想要的是你在第一页计算了一个值，你想在第二页显示它，对吗？

对于这个兄弟，您需要在调用下一个活动时传递一些数据（即 Bundle）。

这是我几个月前构建的类似应用程序。它将在一个活动中创建的消息传递给另一个活动。希望这对你有用。

以下代码来自创建消息的第一个活动，并将其捆绑并发送到下一个活动。

```
 public void yourMethod(View view ){

        // Fetching the message to be sent to the next activity.
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();

        Intent intent = new Intent(this, DisplayMessageActivity.class);
        // Remember this constant(or any string you can give). to be used on other activity.
        intent.putExtra(EXTRA_MESSAGE, message);

        startActivity(intent);

} 
```

这就是我对上一个 Activity 调用的 Activity 的 onCreate 方法所做的。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Get the message from the intent
    Intent intent = getIntent();
   // save the passed message as string so that it can be displayed anywhere in this activity.
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    // Set the text view as the activity layout
    setContentView(textView);
} 
```

希望我的程序为您提供足够的解决方案。希望能让你满意。谢了，兄弟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:46:56.087

您需要将数据作为 Extra 发送。[开始另一个活动](http://developer.android.com/training/basics/firstapp/starting-activity.html)具有您需要的所有信息。

# css - 交错的颜色环绕文本

> ID：14318617
> 
> 赞同：1
> 
> 时间：2013-01-14T12:42:12.530
> 
> 标签：css

我正在寻找创建下图所示的效果：

![在此处输入图像描述](../Images/312ea0a1d38209c7cf8c15f338b525bb.png)

文本后面的黑色背景交错，而不是在字符串换行时创建一个黑框。这可以通过动态字符串上的 CSS 来实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:47:39.650

这实际上是内联元素的默认行为，例如 span。下面的代码应该有这个效果。

```
<span style="background-color: black; color: white">EYES ON<br/>FILM</span> 
```

请注意，这`<br/>`是为了说明目的，如果文本被浏览器包装，它也可以工作。如果您需要为 div 执行此操作，请确保在`display: inline`其上设置样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:48:44.623

[这](http://jsfiddle.net/ebn7z/)是你如何做到的。基本思想是将每个单词包装在一个单独的 div 中，并将这些 div 嵌套在另一个 div 中，其宽度包含内联 div。

```
<style>
    .foo {
      display: inline;
      background-color: #000;
      color: #fff;
      margin: 0;
    }

    .wrapper {
      width: 100px;
    }
</style>
<div class="wrapper">
<div class="foo">Here </div><div class="foo">is </div><div class="foo">some </div><div class="foo">text </div><div class="foo">exciting </div><div class="foo">isn't </div><div class="foo">it </div>
 </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:50:36.600

这些方面的东西？

[http://jsfiddle.net/wxDa7/](http://jsfiddle.net/wxDa7/)

```
<style>
    #a 
    { 
        width:50px; 
        font-size:20px; 
        line-height: 90%; 
        text-transform:uppercase; 
    }
    #a .b 
    {
         background-color:black; 
         color:white;  
    } 
</style>
<div id="a">
      <span class="b">Test&nbsp; test&nbsp;</span>
</div> 
```

这会在定义的宽度处自动中断。使用 %nbsp; 在文本之后获得额外的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:56:28.873

它可以将文本放在 a`<span>`内`<p>`，或者使用 Teletype 文本元素 ( `<tt>`) 或`<code>`标签。

**`<tt>`在 HTML5 中不被接受**。

示例 jsfiddle：http: [//jsfiddle.net/gmDWP/](http://jsfiddle.net/gmDWP/)

# ios - Xcode：多个目录和子目录

> ID：14318623
> 
> 赞同：0
> 
> 时间：2013-01-14T12:42:27.663
> 
> 标签：ios, xcode

我试图弄清楚如何将我所有的地图图块放入 XCode，以便我可以这样称呼它们：

/0/0/0.png

/1/0/1.png

... ETC

到目前为止似乎没有工作，所以我想知道是否有人可以建议如何这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:50:17.743

在向 Xcode 添加资源时，如果您选择“为任何添加的文件夹创建文件夹引用”，那么 Xcode 将在将这些文件夹复制到 bundle 时保留分层结构。引用的文件夹在项目导航器中具有蓝色文件夹图标。

这种方法的一个缺点是 Xcode 不会监视引用文件夹中文件的更改，因此如果您更改已添加的文件，则必须进行干净的构建，否则应用程序包将具有该文件的旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:45:20.883

当您构建您的 XCode 项目时，所有资源都直接复制到应用程序的包中，因此如果您有多个名称相同的图像（即使它们位于不同的目录中），则只会获取一个，其余的将被忽略/覆盖。

如果你有类似的东西`0/0/0.png`，`1/0/0.png`我很抱歉我必须告诉你，但你必须将你的瓷砖重命名为类似的东西`000.png`，`100.png`等等。

此外，要获取您在项目中添加的图像，您可以按名称获取它，如下所示：

```
UIImage *tileImage = [UIImage imageNamed:@"000.png"]; 
```

# android - 如何以编程方式检测视频录制时间

> ID：14318627
> 
> 赞同：1
> 
> 时间：2013-01-14T12:42:48.787
> 
> 标签：android, android-camera, android-mediarecorder

我`mEdiaRecorder.setMaxDuration(60 * 1000);`在我的视频录制应用程序中设置了（60 秒），我想在录制时间到期时触发一个方法。帮助我找到一种方法来做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T12:34:02.347

```
mMediaRecorder.setOnInfoListener(new medialistener());

class medialistener implements MediaRecorder.OnInfoListener {     
    public void onInfo(MediaRecorder recorder, int what, int extra)
    { 
        if(what==MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED)
        {
                // Do what you want to do...
        }

     // Log.i("video test", "Video Info: "+what+", "+extra);  
     } 
} 
```

# android - 应用程序无法安装在设备/模拟器中

> ID：14318641
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:44:01.647 元素？
> 
> 标签：android, google-maps

我正在为 android 开发一个基于地图的应用程序，并处于检测当前位置的最后阶段。但现在我的应用程序无法正常工作。它既不能安装在模拟器中，也不能安装在真实设备中。每当我尝试时，我都会在控制台中收到一条消息，上面写着：

无法安装应用程序 (map.apk)。

这是我的日志：

```
01-14 18:08:20.576: D/dalvikvm(342): GC_FOR_MALLOC freed 4859 objects / 301296 bytes in 100ms
01-14 18:08:20.916: D/dalvikvm(342): GC_FOR_MALLOC freed 10156 objects / 616976 bytes in 96ms
01-14 18:08:21.216: D/dalvikvm(342): GC_FOR_MALLOC freed 4664 objects / 306384 bytes in 88ms
01-14 18:08:21.576: D/dalvikvm(342): GC_FOR_MALLOC freed 6137 objects / 374304 bytes in 152ms
01-14 18:08:21.956: D/dalvikvm(342): GC_FOR_MALLOC freed 8481 objects / 648904 bytes in 98ms
01-14 18:08:22.266: D/dalvikvm(342): GC_FOR_MALLOC freed 6080 objects / 370008 bytes in 98ms
01-14 18:08:22.407: D/AndroidRuntime(342): Shutting down VM
01-14 18:08:22.407: W/dalvikvm(342): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-14 18:08:22.427: E/AndroidRuntime(342): FATAL EXCEPTION: main
01-14 18:08:22.427: E/AndroidRuntime(342): java.lang.RuntimeException: Unable to start activity ComponentInfo{g.g.g/g.g.g.GPSLocatorActivity}: java.lang.NullPointerException
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.os.Looper.loop(Looper.java:123)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-14 18:08:22.427: E/AndroidRuntime(342):  at java.lang.reflect.Method.invokeNative(Native Method)
01-14 18:08:22.427: E/AndroidRuntime(342):  at java.lang.reflect.Method.invoke(Method.java:521)
01-14 18:08:22.427: E/AndroidRuntime(342):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-14 18:08:22.427: E/AndroidRuntime(342):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-14 18:08:22.427: E/AndroidRuntime(342):  at dalvik.system.NativeStart.main(Native Method)
01-14 18:08:22.427: E/AndroidRuntime(342): Caused by: java.lang.NullPointerException
01-14 18:08:22.427: E/AndroidRuntime(342):  at g.g.g.GPSLocatorActivity.onCreate(GPSLocatorActivity.java:50)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-14 18:08:22.427: E/AndroidRuntime(342):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-14 18:08:22.427: E/AndroidRuntime(342):  ... 11 more 
```

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

      mapView = (MapView) findViewById(R.id.mapView);
      mapView.setTraffic(true);
      mapView.setBuiltInZoomControls(true);

      List<Overlay> mapOverlays = mapView.getOverlays();
      Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
      HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
      GeoPoint point = new GeoPoint(
              (int) (location.getLatitude() * 1E6), 
              (int) (location.getLongitude() * 1E6));

          OverlayItem overlayitem = new OverlayItem(point,"","" );
      itemizedoverlay.addOverlay(overlayitem);
      mapOverlays.add(itemizedoverlay);
      }

      @Override
      protected boolean isRouteDisplayed()
      {
      return false;
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:36:19.130

可能是您的位置检测器引起的问题。试试这个以知道“位置”是否为空

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

      mapView = (MapView) findViewById(R.id.mapView);
      mapView.setTraffic(true);
      mapView.setBuiltInZoomControls(true);

      List<Overlay> mapOverlays = mapView.getOverlays();
      Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
      HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);

       //see here;
      location = getGpsLocation();
      if(location!=null){
          GeoPoint point = new GeoPoint(
              (int) (location.getLatitude() * 1E6), 
              (int) (location.getLongitude() * 1E6));

          OverlayItem overlayitem = new OverlayItem(point,"","" );
          itemizedoverlay.addOverlay(overlayitem);
          mapOverlays.add(itemizedoverlay);
      }else{
         Toast.makeText(getApplicationContext(), "GPS error", Toast.LENGTH_LONG).show();
      }
  }

  //see here;
  public Location getGpsLocation()
  {
          Location res = new Location("");
          res.setLatitude(0);
      res.setLongitude(0);

          // res = ; try some code to find you your current location

          return res;
  }
  @Override
  protected boolean isRouteDisplayed()
  {
  return false;
  } 
```

# php - JSON 中的异常字符会破坏格式吗？

> ID：14318647
> 
> 赞同：1
> 
> 时间：2013-01-14T12:44:48.780
> 
> 标签：php, json

我有一个关于 JSON 的快速问题。我刚开始熟悉它，在我看来它类似于 XML，一种以通用/开放方式存储和传输数据的技术。

我的问题是数据完整性。例如，在我看来，我的 PHP 应用程序的 JSON 输出如下所示：

```
{"stat":"ok","statMsg":"json works"} 
```

现在与 XML 不同的是，它使用 <> 字符。JSON 似乎使用了更常见的字符，例如引号和双引号等。

这让我想知道，解析器是否将 JSON 格式视为纯文本？如果解析器遇到诸如斜线、双引号等“定界”字符怎么办？

我做了很多数据处理，在传递时必须维护文本数据，引号和所有（处理代码和其他东西），我害怕使用 JSON，因为我的数据可能会破坏格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:47:44.703

xml 文件也被解析器视为“纯文本”。就像 JSON 中的 XML 一样，特殊字符应该被转义（还记得`&amp;`，`&gt;` `&lt;`还有更多吗？）。因此，只要您或您正在使用的图书馆照顾好这一点，您就不必担心。当然，推荐使用库来处理这类东西。例如，对于 php 使用`json_encode`。

我个人认为 JSON 的转义更简单，因为它更接近于在许多语言的字符串中转义特殊字符的方式。

也看看[这里](https://stackoverflow.com/questions/5417344/json-net-escaping-of-special-characters)。实际上只有非常有限的一组字符需要转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T18:58:46.933

使用 \ 转义分隔符，如引号

{a : "这是一个 \" 有效的 json"}

# php - 在回复的消息主题中仅添加一个“Re:”

> ID：14318650
> 
> 赞同：0
> 
> 时间：2013-01-14T12:45:01.650
> 
> 标签：php, wordpress, email, message, title

我使用私人消息脚本，它会`Re:`在每次回复时向消息主题添加一个。不幸的是，如果对同一条消息有多个回复，它会添加另一个`Re:`，所以当几个 PM 被交换时，它看起来像这样：

`Re: Re: Re: Re: Re: Re: Re: Re: Hello World!`

以下是执行此操作的脚本的相关部分：

```
 | <a class="reply"
                    href="<?php echo wp_nonce_url( "?page=rwpm_send&recipient=$msg->sender&id=$msg->id&subject=Re: " . stripcslashes( $msg->subject ), 'rwpm-reply_inbox_msg_' . $msg->id ); ?>"><?php _e( 'Reply', 'pm4wp' ); ?></a> 
```

所以我想调整脚本，以便它只在有回复时添加**一个。** `Re:`我怎么做？我猜可能是一个 IF 语句检查是否已经`Re:`存在...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:50:01.297

一个简单的正则表达式怎么样？

```
$replysubject = preg_replace('/^(Re: )*/', 'Re: ', stripcslashes( $subject )); 
```

这将输出一个开头只有一个 'Re: ' 的字符串，无论输入字符串中有多少个。

在你的情况下：

`href="<?php echo wp_nonce_url( "?page=rwpm_send&recipient=$msg->sender&id=$msg->id&subject=" . $replysubject, 'rwpm-reply_inbox_msg_' . $msg->id ); ?>"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:50:47.273

因此，只有在没有时才添加“Re:”：

```
| <a class="reply" href="<?php echo wp_nonce_url( "?page=rwpm_send&recipient=$msg->sender&id=$msg->id&subject=".(strpos($msg->subject, "Re:") === false ? "Re: " : ""). stripcslashes( $msg->subject ), 'rwpm-reply_inbox_msg_' . $msg->id ); ?>"><?php _e( 'Reply', 'pm4wp' ); ?></a> 
```

而且，当它只应该停留在开头时：

```
 | <a class="reply" href="<?php echo wp_nonce_url( "?page=rwpm_send&recipient=$msg->sender&id=$msg->id&subject=".(substr($msg->subject, 0, 3) != "Re:" ? "Re: " : ""). stripcslashes( $msg->subject ), 'rwpm-reply_inbox_msg_' . $msg->id ); ?>"><?php _e( 'Reply', 'pm4wp' ); ?></a> 
```

# c# - nHibernate 神秘地从多对一关系中删除项目

> ID：14318653
> 
> 赞同：1
> 
> 时间：2013-01-14T12:45:10.307
> 
> 标签：c#, .net, nhibernate

我有一个简单的应用程序，用户可以在其中打开订单，对其进行更改，然后将它们保存回数据库。打开订单后，我会像这样从数据库中检索它

```
ISession session = SessionFactory.OpenSession();

...

Order order = session.Query<Order>()
                     .Where(o => o.Id == id)
                     .FirstOrDefault(); 
```

为了启用 order.Comments 的延迟加载，我保持会话打开，直到订单关闭。以下是映射：

```
<class name="Order">
    <id name="Id">
        <generator class="identity" />
    </id>    

...

    <set name="Comments" access="field.camelcase-underscore" cascade="all-delete-orphan"    lazy="true" order-by="Created">
      <key column="OrderId" />
      <one-to-many class="Comment" />
    </set>     
</class>

<class name="Comment" table="OrderComment" lazy="false">
    <id name="Id">
      <generator class="identity" />
    </id>
    <many-to-one name="Author" />
    <property name="Created" />
    <property name="Text" length="1000" />
</class> 
```

该应用程序的设计使得在订单打开时，可以在关闭之前多次保存。我这样保存：

```
using (ITransaction trans = session.BeginTransaction())
{
    session.SaveOrUpdate(order)
    trans.Commit();
} 
```

最后，当用户关闭订单时，我处理了会话。

这里有问题：如果用户添加评论，保存，然后在关闭订单之前添加另一个评论并再次保存，则在第二次保存期间删除第一个评论。这是第二次保存输出的sql：

```
NHibernate: INSERT INTO OrderComment (Id, Author, Created, Text) VALUES (hibernate_sequence.nextval, :p0, :p1, :p2) returning Id into :nhIdOutParam;:p0 = 1 [Type: Int32 (0)], :p1 = 14.01.2013 12:53:20 [Type: DateTime (0)], :p2 = '2' [Type: String (0)], :nhIdOutParam = NULL [Type: Int32 (0)]

**NHibernate: UPDATE OrderComment SET OrderId = null WHERE OrderId = :p0 AND Id = :p1;:p0 = 465 [Type: Int32 (0)], :p1 = 591 [Type: Int32 (0)]**

NHibernate: UPDATE OrderComment SET OrderId = :p0 WHERE Id = :p1;:p0 = 465 [Type: Int32 (0)], :p1 = 592 [Type: Int32 (0)] 
```

所以问题是粗体的那一行——第一条评论的 OrderId 被设置为空。谁能告诉我为什么？

我在这里使用 nHibernate 的方式有什么问题吗？重申我的工作：

1.  打开会话
2.  检索对象
3.  用户更新对象
4.  通过开始事务保存对象，调用 session.SaveOrUpdate(object)，然后提交事务。
5.  重复步骤 3 和 4 任意次数。
6.  处理会话。

这是一种可接受的使用方式`nHibernate`吗？

**编辑**

这是 Order 类中的 comments 属性：

```
ICollection<Comment> _comments = new List<Comment>();
public virtual ReadOnlyCollection<Comment> Comments
{
    get 
    {
        return _comments.ToList().AsReadOnly(); 
    }
} 
```

然后通过调用以下方法添加注释：

```
public virtual void AddComment(Comment comment)
{
    _comments.Add(comment);    
}

 ...

Comment comment = new Comment()
{
    Author = User.Current,
    Created = DateTime.Now,
    Text = text
};

order.AddComment(comment); 
```

这是评论类。Id 在基类中实现`PersistentObject<T>`：

```
public class Comment : PersistentObject<int>
{        
    public User Author { get; private set; }
    public DateTime Created { get; private set; }
    public string Text { get; private set; }                                             
}

public abstract class PersistentObject<T>
{        
    public virtual T Id { get; protected internal set; }       

    public override bool Equals(object obj)
    {
        // If both objects have not been saved to database, then can't compare Id because this
        // will be 0 for both.  In this case use reference equality.

        PersistentObject<T> other = obj as PersistentObject<T>;
        if (other == null)
            return false;

        bool thisIsDefault = object.Equals(Id, default(T));
        bool otherIsDefault = object.Equals(other.Id, default(T));

        if (thisIsDefault && otherIsDefault)
            return object.ReferenceEquals(this, other);
        else if (thisIsDefault || otherIsDefault)
            return false;
        else
            return object.Equals(this.Id, other.Id);
    }

    public override int GetHashCode()
    {
        return Id.GetHashCode();
    }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:14:00.740

我不认为`HashCode`应该从`Id`. `Order.Comments`是一个集合，它基于散列。`0`评论的开头都有一个ID 。`HashCode`是在添加到集合时采用的，当它是时`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:05:47.553

您能否展示用于将项目添加到评论集合中的代码？

您需要让 NHibernate 管理评论的集合，因此请确保您没有将 Comments 属性重新设置为 a`new List<OrderComment>`或类似的东西，确保您保留相同的 NHibernate 实例化代理并根据需要添加/删除/清除其值。

# javascript - 为什么我的 jQuery 不能在本地工作？

> ID：14318654
> 
> 赞同：2
> 
> 时间：2013-01-14T12:45:11.807
> 
> 标签：javascript, jquery, click, attr, jsfiddle

我在 jsfiddle.net 上使用以下代码并且实时预览有效。运行我自己的本地副本，什么都没有...

复选框应在单选按钮单击时更改。

**jsfiddle 预览：http: [//jsfiddle.net/XqFDN/](http://jsfiddle.net/XqFDN/)**

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" ></script>
    <script>
        jQuery('#3day').click(function () {
            jQuery('#mon , #tue , #wed').attr('checked', true);
        });
        jQuery('#2day , #1day').click(function () {
            jQuery('#mon , #tue , #wed').attr('checked', false);
        });
    </script>
</head>

<body>
    <form>
        <input type="radio" name="passes" value="3day" id="3day" />3-Day
        <input type="radio" name="passes" value="2day" id="2day" />2-Day
        <input type="radio" name="passes" value="1day" id="1day" />1-Day
        <br />

        <input type="checkbox" name="mon" value="mon" id="mon" />Mon
        <input type="checkbox" name="tue" value="tue" id="tue" />Tue
        <input type="checkbox" name="wed" value="wed" id="wed" />Wed
        <br />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T12:46:09.823

您需要将 jQuery 代码包装在文档就绪处理程序中。尝试这个：

```
<script type="text/javascript">
    jQuery(function() { // alternative: $(document).ready(function() {
        jQuery('#3day').click(function () {
            jQuery('#mon , #tue , #wed').attr('checked', true);
        });
        jQuery('#2day , #1day').click(function () {
            jQuery('#mon , #tue , #wed').attr('checked', false);
        });
    });
</script> 
```

此附件可确保在加载 DOM 时运行其中的代码。目前，您的代码正在尝试将`click`事件附加到尚不存在的元素。

# android - 如何让应用程序进入睡眠模式

> ID：14318655
> 
> 赞同：0
> 
> 时间：2013-01-14T12:45:14.073
> 
> 标签：android

为了省电，我想将我的android应用程序置于睡眠模式。如何**手动**将我的应用程序置于睡眠模式？

在睡眠模式下，我知道它使用较少的 CPU 和 RAM。为此，我想要 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:47:51.640

> 如何手动将我的应用程序置于睡眠模式？

应用程序不会进入“睡眠模式”。设备进入睡眠模式。

您不能手动将设备置于睡眠模式，因为用户当时可能正在使用它。请让设备正常入睡。

> 在睡眠模式下，我知道它使用较少的 CPU 和 RAM。

当设备处于睡眠模式时，应用程序不会使用更少的 RAM。设备的 CPU 在睡眠模式下会断电（或进入低功耗状态），但同样，这是设备的特性，而不是应用程序的特性。

# html - iFrame 的替代品是什么？

> ID：14318661
> 
> 赞同：0
> 
> 时间：2013-01-14T12:45:40.930
> 
> 标签：html

我的老板只是让我重新创建一个旧的 Web 部件。它基本上是图像图块，在被单击后，将另一个页面动态加载到该主页上的 iframe 中。像这样的东西：

```
images___________
  [][]|
  [][]|
  [][]|  iframe
      |
      | 
```

她不希望我使用 iFrame。但是，动态内容必须存储在单独的页面中并具有单独的 URL。如何使用 URL 获取单独的页面内容并将其加载到没有 iFrame 的主页中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:48:54.900

您可以使用 Ajax 并将内容加载到 div 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:51:03.807

另一种方法是`<object>`标记，或使用 Ajax 加载内容，然后将其添加到 html 元素中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T12:53:57.253

您可以使用[jquery.load();](http://api.jquery.com/load/) 执行那个。您可以尝试一下，如果遇到问题，请使用代码和问题更新您的问题，我/有人可以帮助您。

`load()`看起来的基本思想是这样的

```
$('#result').load('ajax/test.html', function() {
  //here you can update a div on your page with content from the file/page
}); 
```

# jsp - 没有找到另一个jsp

> ID：14318665
> 
> 赞同：0
> 
> 时间：2013-01-14T12:45:51.560
> 
> 标签：jsp, liferay

制作一个超级简单的portlet。它有两个 jsp 页面，一个告诉它是第一个，一个按钮指向第二个，反之亦然。

这是它的原始代码：

```
<portlet:renderURL var="goURL">
    <portlet:param name="mvcPath" value="/second.jsp" /> 
</portlet:renderURL>

<h2>First view</h2>
<aui:button type="submit" value="Go second" onClick="<%= goURL%>"/> 
```

当我在 Eclipse 部署后在本地服务器上运行它时 - 一切都很好。但！当我制作战争文件并将其部署在远程服务器上时，单击此按钮“未找到”和一些野地址后，就好像我在显示的整个门户中搜索它一样。

应该如何在远程服务器上正常工作？

# android - Blackberry 和 Android 上的 Java ME 和 LWUIT

> ID：14318670
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:46:08.230
> 
> 标签：android, blackberry, java-me, lwuit

是否可以在 Java ME 和 LWUIT 中编写独立于平台的应用程序？

更具体地说，我可以编写在 Android 和 Blackberry 上运行的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:55:52.247

答案是否定的。LWUIT 非常适合 J2ME 开发，因为它在 J2ME 中启用了 SWING 类型的开发方法，但对于 Android 和 BlackBerry，LWUIT 并没有那么有用。有两个原因

1.  Android 是不断发展的技术，您将获得最新的视图和不同的选项来增强您的应用程序功能。所以使用 LWUIT for Android 并不是一个好的选择

2.  您也可以使用 LWUIT 开发 BlackBerry 应用程序，但我再次建议使用本机 BB 开发，因为它提供了 LWUIT 中不存在的屏幕堆栈和许多其他选项

除了这个最新版本的 BlackBerry 还有助于在 BB 设备上运行 Android 代码，以便更好地进行 Android 开发和 BB 开发（如果需要）

回答您的最后一个问题，**Java ME & LWUIT 技术值得探索吗？**再次回答是**否定**的。

原因是 J2ME 是为配置较低且内存较少的设备开发的，这不是当前移动设备的情况。并且 J2ME 是通过减小 Java 的大小来开发的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:50:12.980

> 具体来说，我能否使用 Java ME 和 LWUIT 为 Android 和 Blackberry 编写应用程序？

我不能代表黑莓。Android 不使用 Java ME，而且我不知道有任何 Android 设备有单独授权 Java ME 来运行此类应用程序。我听说过兼容性库有助于将 Java ME 应用程序移植到 Android 的传言，但我没有使用此类库的经验。

关于 LWUIT，虽然可以使用它创建 Android 应用程序，但它似乎并不是特别流行。

# javascript - 调整大小时 IE9 SVG 模糊

> ID：14318671
> 
> 赞同：2
> 
> 时间：2013-01-14T12:46:09.317
> 
> 标签：javascript, internet-explorer, svg, raphael

`<svg>`当 IE9浮动在另一个元素旁边时，我有一个非常奇怪的情况，它显示模糊的图形。

这是我能想到的最简单的情况，类似于我们的应用程序：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/2000/svg">
<head>
    <meta content="IE=Edge,chrome=1" http-equiv="X-UA-Compatible">
    <title>IE9 SVG Resize Issue</title>

<script type="text/javascript">
window.onload = function() {

    var i = 0;
    var increaseWidth = function() {
        var w = 500 + i++;
        window.resizeTo(w, 500);
        document.getElementById('currentWidth').innerHTML = w + 'px';
    };

    document.getElementById('btn').addEventListener('click', increaseWidth);

    increaseWidth();
};
</script>

</head>
<body>

<div style="float: left; width: 20%">

Left
</div>

<div style="float: left; width: 80%">

  <svg width="200" height="200" version="1.1">

    <rect fill="#fff" stroke="#000" x="0.5" y="0.5" width="100" height="100" />

  </svg>

</div>

<span style="color: #999; display: block">NOTE: In IE9 you can only have one tab open to resize the window</span>
<button type="button" id="btn">Increase Width</button>
<span id="currentWidth" style="color: #666; font-size: 15pt"></span>

</body>
</html> 
```

[这是一个画廊](http://imgur.com/a/smsXO#0)，显示将窗口大小从 调整`500px`为`507px`。您可以看到，当调整一个像素的大小时，矩形的线条从模糊变为清晰。当两列具有百分比宽度时，似乎会出现该错误。`div`当包含`svg`溢出到新行时也会发生这种情况（事情变得有点模糊）。FWIW，在实际应用程序中，我们使用的是 Raphael.js。

是否存在与此相关的已知问题，是否有一个简单的修复方法可以保持线条清晰（通常通过`0.5px`修复偏移）？

# html - 为什么会出现水平滚动条

> ID：14318673
> 
> 赞同：0
> 
> 时间：2013-01-14T12:46:11.040
> 
> 标签：html, css, responsive-design

如果您转到[此页面](http://festivals.ie/festival/list?types=HEADLINE&types=MUSIC&types=COMEDY&types=SPORT&types=ARTS&types=FILM&types=FOOD_AND_DRINK&types=OTHER&location=IRELAND)（或实际上是同一站点上的许多其他页面），并使浏览器窗口变窄，则内容区域会响应浏览器宽度的变化。但是，会出现一个水平滚动条，表明在页面的可见部分之外有一些内容，但没有。

当页面的可见部分之外没有内容（除了背景图像）时，为什么会出现这个水平滚动条，我该如何解决这个问题？

## 更新

我应该提到我在使用 Firefox 时遇到了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:56:51.253

我在 Firefox 18 中得到了单杠。

您有一个`div`with `id` `AutocompleteContainter_xxxxx`（页面上的最后一个 div），它的`left`位置已设置。当窗口调整窗口大小时，此值可能会更改以反映窗口的大小。

在我的全屏浏览器中，它呈现为

```
<div id="AutocompleteContainter_c04ef" style="position: absolute; z-index: 9999; top: 38px; left: 991.467px;">
    ...
</div> 
```

# regex - Perl中的不贪婪的正则表达式

> ID：14318675
> 
> 赞同：0
> 
> 时间：2013-01-14T12:46:24.783
> 
> 标签：regex, perl, non-greedy

我正在尝试捕获这样的字符串：

```
document.all._NameOfTag_ != null ; 
```

如何捕获子字符串：

```
document.all._NameOfTag_ 
```

和标签名称：

```
_NameOfTag_ 
```

到目前为止我的尝试：

```
if($_line_ =~ m/document\.all\.(.*?).*/)
{

} 
```

但它总是贪婪并捕获`_NameOfTag_ != null`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T12:50:42.057

懒惰的`(.*?)`人总是什么都不匹配，因为后面的贪婪`.*`总是匹配一切。

你需要更加详细：

```
if($_line_ =~ m/document\.all\.(\w+)/) 
```

之后将只匹配字母数字字符 `document.all.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:55:36.890

你的问题是惰性量词。惰性量词将始终首先尝试取消匹配正则表达式中的下一个组件，并且仅当所述下一个组件不匹配时才会使用文本。

但是在这里，您的下一个组件是`.*`, 并`.*`匹配所有内容，直到您的输入结束。

改用这个：

```
if ($_line_ =~ m/document\.all\.(\w+)/) 
```

另请注意，不需要匹配所有文本。正则表达式只需要匹配它必须匹配的内容，其他什么都不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:51:13.650

请尝试以下方法，个人我觉得它更清楚：

```
document\.all\.([^ ]*) 
```

# twitter-bootstrap - Twitter Bootstrap 中每行有多个跨度

> ID：14318677
> 
> 赞同：1
> 
> 时间：2013-01-14T12:46:45.627
> 
> 标签：twitter-bootstrap

我正在开发一个使用 Bootstrap 2.2.2 的项目。由于其性质，最方便的是不要每 12 列关闭该行，即：

```
<div class="container">
    <div class="row">
        <div class="span4">content</div>
        <div class="span4">content</div>
        <div class="span4">content</div>
        <div class="span4">content</div>
        <div class="span4">content</div>
        <div class="span4">content</div>
        <div class="span4">content</div>
        (...)
    </div>
</div> 
```

这种方法有什么缺点吗？到目前为止，在测试期间，我没有发现在 Chrome、Firefox 或 IE 9 下此类布局存在任何问题。但是，如果您发现任何问题，我将不胜感激（尤其是如果它破坏了任何旧版的布局）浏览器，虽然我不关心 IE7 或更早版本）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T18:39:01.323

需要注意的一件事是，如果跨度的高度不同，则您的内容顺序可能会被抛出，因为在每三个跨度之后没有等效的 clearfix4。

有关此示例， 请参见[http://jsfiddle.net/panchroma/czxJB/](http://jsfiddle.net/panchroma/czxJB/)上的第二行。

不过，这可以通过一些自定义 CSS 来克服。查看应用了这个额外 CSS 的第三行的结果

```
.row.multiple .span4:nth-child(3n+4) {  
clear:left;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:12:28.733

大卫的好回答！这是我从答案派生的css，并针对所有可能的行/跨度进行了扩展，希望对您有所帮助

```
.row.multiple .span6:nth-child(2n+3), .row-fluid.multiple .span6:nth-child(2n+3) {  
    clear:left;
    margin-left: 0px;
}

.row.multiple .span4:nth-child(3n+4), .row-fluid.multiple .span4:nth-child(3n+4) {  
    clear:left;
    margin-left: 0px;
}

.row.multiple .span3:nth-child(4n+5), .row-fluid.multiple .span3:nth-child(4n+5) {  
    clear:left;
    margin-left: 0px;
}

.row.multiple .span2:nth-child(6n+7), .row-fluid.multiple .span2:nth-child(6n+7) {  
    clear:left;
    margin-left: 0px;
} 
```

# android - javascript暂停直到webview关闭？

> ID：14318680
> 
> 赞同：1
> 
> 时间：2013-01-14T12:46:53.113
> 
> 标签：android, web-applications, webview, settimeout, suspend

我正在编写一些在 android WebView 中运行的网络应用程序。WebView 在我从应用程序的主菜单中打开的一些简单的 Activity 类中。html文件和js文件是本地文件。我在 Asus Transformer TF300、OS 4.1.1 上进行测试。

WebView 加载 html 文件，一秒钟后调用 loadUrl('javascript:start()'); 执行：

```
console.log("hello");
setTimeout("console.log('world');", 1000); 
```

当我运行它时，logcat 中只显示“hello”。当我关闭活动（它有一个关闭按钮）时，我突然可以在 logcat 中看到“世界”。就好像 js 暂停了自己，直到我导致 WebView 关闭......

知道为什么会发生这种情况以及如何让代码运行吗？

注意我尝试了各种各样的东西，比如将 js 代码更改为：

```
var func = function() { console.log("world"); };
setTimeout(myfunc, 1000); 
```

或者：

```
setTimeout(function() { console.log("world"); }, 1000); 
```

但它没有帮助..

谢谢。

# dependency-injection - Castle Windsor ISubDependencyResolver 获取参数名称

> ID：14318682
> 
> 赞同：1
> 
> 时间：2013-01-14T12:47:03.480
> 
> 标签：dependency-injection, castle-windsor, windsor-3.0

我在使用 Castle Windsor ISubDependencyResolver 获取参数名称时遇到了一点问题。我有类似下面的代码，对于 Foo，我希望 myBar.BarName 为“Foo_myBar”

```
Public Class Foo
{
    private readonly IBar myBar;
    Public Foo(IBar myBar){
        this.myBar = myBar;
    }
}

Public Class Bar: IBar
{
    Public string BarName {get; private set;}

    Public Bar(string barName){
        BarName = barName;
    }
}

public class BarNameResolver : ISubDependencyResolver
{
    public bool CanResolve(CreationContext context, 
            ISubDependencyResolver contextHandlerResolver, 
            ComponentModel model, 
            DependencyModel dependency)
    {
        return context.RequestedType == typeof (IBar)
               && dependency.TargetType == typeof (string)
               && dependency.DependencyKey.Equals("barName");
    }

    public object Resolve(CreationContext context, 
            ISubDependencyResolver contextHandlerResolver, 
            ComponentModel model,
            DependencyModel dependency)
    {

        return string.Format("{0}_{1}", 
                  context.Handler.ComponentModel.Name, 
                  **NameOfFooBarParameter**);

    }
} 
```

有什么方法可以在 ISubDependencyResolver 中获取“myBar”？

我需要这个在 Foo 中有多个具有不同配置的 IBar 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:30:46.130

由于 BarNameResolver 是一个子依赖解析，因此很容易混淆组件和依赖项

```
public bool CanResolve(
   CreationContext context,
   ISubDependencyResolver contextHandlerResolver,
   ComponentModel model,
   DependencyModel dependency)
   {
       return context.RequestedType == typeof(Foo)
           && dependency.TargetType == typeof(IBar);
   }

   public object Resolve(
       CreationContext context,
       ISubDependencyResolver contextHandlerResolver,
       ComponentModel model,
       DependencyModel dependency)
       {
            var myBar  = dependency.DependencyKey;
            return null;
       } 
```

在您的示例中，变量 myBar 现在将包含字符串“myBar”。您可以使用它来解决依赖关系。

# networking - 接收 udp 数据速率测量

> ID：14318683
> 
> 赞同：3
> 
> 时间：2013-01-14T12:47:07.263
> 
> 标签：networking, udp, rate

我想测量我在特定端口上的 pc 上接收的 udp 数据包速率。是否有任何应用程序可以显示接收到的 udp 吞吐量及其随时间的变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:58:17.783

您可以尝试使用[Wireshark](http://www.wireshark.org/)嗅探主机上的流量，通过某个 UDP 端口进行过滤，然后访问统计菜单。

查看此示例输出：

![在此处输入图像描述](../Images/1a738497c0c1252fd6906a0167c5023e.png)

请点击此链接了解 Wireshark 静态功能的简要说明：[Wireshark Statistics](http://wiki.wireshark.org/Statistics)

# nhibernate - Fluent NHibernate 映射实体，使其只能执行更新和选择

> ID：14318684
> 
> 赞同：0
> 
> 时间：2013-01-14T12:47:08.240
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我在数据库中触发器丰富的遗留系统上。

因此，我在 Fluent NHB 中映射了一个实体，我想在该实体上强制执行只能执行更新和选择，因为另一个表上有一个触发器，该触发器执行对该表的插入。

简而言之，我想确保无法使用该实体进行插入。

沿着 .Not.Insert() 行的东西，但对于实体而不是列。

**注意：**对于这样的事情，触发器通常是一个不好的选择，但由于复杂性，我还没有删除触发器的选项。

这可以用 Fluent NHB 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:49:19.783

我认为没有一种简单（“设计”）的方法可以做到这一点，但我可以想到以下可能的选择：

自定义 IEntityPersister (IClassPersister)。从默认持久化器派生，然后重写 Insert() 方法以抛出 NotSupportedException。必须在映射中配置（不确定这一步是否可以通过 FluentNH 完成）： http: [//nhibernate.info/doc/nh/en/index.html#mapping-declaration-class](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-class)

或者实现一个合适的 NHibernate 事件监听器，它可以检测多个表的 INSERT 语句，并通过抛出来防止这些。

或者让你的域类对 Id 属性具有私有/受保护的设置器，然后使用映射告诉 NHibernate 应该使用“分配”的 id 生成器。NHibernate 现在不能插入此类对象，除非应用程序设置了 Id，因为它是受保护的（有点......），所以这永远不会发生。

# c# - 如果当前失败，如何继续队列中的其他任务？

> ID：14318686
> 
> 赞同：4
> 
> 时间：2013-01-14T12:47:28.723
> 
> 标签：c#, multithreading, task-parallel-library, system.reactive, producer-consumer

我有一些执行如下队列的代码

```
Queue
    .GetConsumingEnumerable()
    .ToObservable()
    .Select(x => x.ObserveOn(NewThreadScheduler.Default))
    .SubscribeOn(NewThreadScheduler.Default)
    .Subscribe(
        grp => grp.ForEachAsync(b => b.Execute())
                  .ContinueWith(ExecuteOnTaskFailure, TaskContinuationOptions.OnlyOnFaulted)); 
```

ExecuteOnTaskFailure 方法定义如下

```
private static void ExecuteOnTaskFailure(Task previousTask)
{
    if (!previousTask.IsFaulted)
        return;

    if (previousTask.Exception != null && previousTask.Exception.InnerExceptions != null)
        foreach (var exception in previousTask.Exception.InnerExceptions)
        {
            Logger.Error("Task failed continued to the next task : " + exception.Message, exception);
        }
} 
```

这不起作用。我似乎无法弄清楚如何让队列中的任务继续执行，即使其中一个任务无法执行。还有一种方法可以让我在队列末尾重新排队这个失败的任务吗？

非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:33:09.370

听起来您想要的是`try`-`catch`在您的循环中：

```
grp.ForEachAsync(async b =>
{
    try
    {
        await b.Execute();
    }
    catch (Exception ex)
    {
        Logger.Error(ex);
        Queue.Add(b);
    }
}) 
```

但是`BlockingCollection`对异步不是很友好，因为当它为空时它会阻塞（正如它的名字所暗示的那样）。您可能需要考虑一种不同的方法。

# xamarin.ios - Monotouch.Dialog，试图获取 EntryElement.ShouldReturn += () => {...}; 去工作

> ID：14318690
> 
> 赞同：1
> 
> 时间：2013-01-14T12:47:39.690
> 
> 标签：xamarin.ios, monotouch.dialog

我想在进入 EntryElement 时出现的 UIKeyboard 上的“开始”按钮中添加一个事件处理程序。这是我的代码

```
EntryElement cPassword;
//
cPassword = new EntryElement (" ", "Password", "", true) {
    ReturnKeyType = UIReturnKeyType.Go
};
//
cPassword.ShouldReturn += () => { Login (); }; 
```

Login 方法返回 void 并使用用户提供的条目详细信息执行基本的日志记录操作。

```
private void Login ()
{
    // Do login stuff
    //
} 
```

但我认为它需要一个返回类型为 func 的方法，因为这是我在尝试使用当前代码时收到的错误消息：

```
Not all code paths return a value in anonymous method of type 'System.Func<bool>' 
(CS1643) 
```

这是我第一次遇到这种类型的事情，以前从未见过 func<> ：/ 并希望有人能指出我正确使用它的正确方向。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:41:24.603

您的匿名方法应该返回一个布尔值：

```
cPassword.ShouldReturn = () => {

    Login();
    return true;

}; 
```

~~另请注意，由于 ShouldReturn 是委托类型的属性，因此最佳做法是分配值，而不是像使用事件 ("+=") 那样添加值。~~

# php - 将图像缩放（适合）到 php 上的区域而不拉伸图像

> ID：14318691
> 
> 赞同：0
> 
> 时间：2013-01-14T12:47:39.493
> 
> 标签：php, image, gd

我需要按 gd 的区域的最大尺寸大小和图像的比例缩放。

我有面积大小：$Ax$B

我有图像大小：$ax$b

我需要不裁剪图片的比例比例（函数（$A，$B，$a，$b）），它将返回给我（WidthXHeight）的新图像。

看看这个例子：

[http://file.qip.ru/photo/Dryu3yhl/two_towers.html](http://file.qip.ru/photo/Dryu3yhl/two_towers.html)？

**更新：**

图像必须按最大图像宽度/高度调整大小（但不能超出父容器 AxB 大小的范围）。

该比例算法使用简单的 Windows 图片查看器。

如果图像大小 < 容器大小而不是图像大小 = 原生图像大小。如果 imagesize > containerize by width 它按宽度缩放，如果 imagesize > containerize by width 它按高度缩放，但不是超出范围自己的容器。

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:29:10.893

你的意思是这样的：

```
function new_size($area_width, $area_height, $pic_width, $pic_height) {
    if ($pic_width <= $area_width && $pic_height <= $area_height) return Array('w'=>$pic_width, 'h'=>$pic_height);
    if ($pic_width <= $area_width && $pic_height > $area_height) return Array('w'=>$pic_width*($area_height/$pic_height), 'h'=>$area_height);
    if ($pic_width > $area_width && $pic_height <= $area_height) return Array('w'=>$area_width, 'h'=>$pic_height*($area_width/$pic_width));

    if ($pic_width == $pic_height) {
        if ($area_width > $area_height) return Array('w'=>$pic_width*($area_height/$pic_height), 'h'=>$area_height);
        if ($area_width <= $area_height) return Array('w'=>$area_width, 'h'=>$pic_height*($area_width/$pic_width));
    }

} 
```

# xampp - Xampp 虚拟主机 - 拒绝访问

> ID：14318699
> 
> 赞同：5
> 
> 时间：2013-01-14T12:47:58.987
> 
> 标签：xampp, apache

我正在笔记本电脑上运行 XAMPP 服务器，并且正在尝试设置虚拟主机。

我的主机文件如下所示：

```
127.0.0.1      localhost
127.0.0.1      localhost.com
127.0.0.1      ehc.local
127.0.0.1      bal.local 
```

httpd-vhosts.conf 文件如下所示：

```
NameVirtualHost *:80
<VirtualHost ehc.local:80>
   DocumentRoot "C:/wamp/EHC/src/main/php/www"
   ServerName ehc.local
   SetEnv APPLICATION_ENV "local"

   <Directory "C:/wamp/EHC/src/main/php/www">
      Options Indexes MultiViews FollowSymLinks
      AllowOverride All
      Order allow,deny
      Allow from all
   </Directory>
   ErrorLog "logs/ehc.dev-error_log"
   CustomLog "logs/ehc.dev-access_log" common
</VirtualHost> 
```

当我浏览到“ehc.local”时，我只得到默认的 403 错误页面。

我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T14:49:41.940

*这适用于 osx，但在 Windows 中必须相同（或相似）：*

由于 Apache 默认以 'nobody' 用户身份运行，它可能没有足够的权限浏览您的 [OSX/Win] 用户目录或其某些子目录，在这种情况下，您会看到 403 'access denied' 错误尝试查看您的开发站点。同样，您可能会发现，虽然您可以查看您的开发站点，但当您尝试在文件系统上写入文件或创建目录时，PHP 会抛出错误。

要解决此问题，您可以将 Apache 配置为以 [OSX/Win] 用户身份运行。打开 httpd.conf 并查找以下行：

```
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User nobody
Group nogroup 
```

将用户更改为您的 [OSX/Win] 用户名，然后保存文件：

```
User yourusername 
```

重新启动 Apache，您现在应该能够毫无问题地浏览您的站点，包括使用 PHP 操作文件和文件夹。

[资源](http://f6design.com/journal/2012/03/11/configuring-virtualhosts-in-xampp-on-mac/)

我希望它会有所帮助，问候！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-22T09:37:20.327

更改用户无效。对我来说，正是这个答案成功了： [添加 VirtualHost 失败：访问禁止错误 403 (XAMPP) (Windows 7)](https://stackoverflow.com/questions/9110179/adding-virtualhost-fails-access-forbidden-error-403-xampp-windows-7)

只需添加`Require all granted`到您的`<Directory>`设置中，它应该可以按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T12:53:16.390

你应该试试这个：

-> 转到 XAMPP 文件夹，

-> 打开 apache-conf-extra 文件夹

-> 使用您选择的文本编辑器打开 httpd-xampp.conf

一直向下滚动，直到找到`Deny from all`并更改它`Allow from all`

# c++ - __int128 加法/减法

> ID：14318700
> 
> 赞同：1
> 
> 时间：2013-01-14T12:48:05.403
> 
> 标签：c++, c

有没有其他使用 __int128 数字但没有类的方法？我还实现了一个压缩器/解压缩器，并想用 __int128 数字对其进行测试。这些源文件的主要目的是测试低于 enwik8 文件的 Hutter Prize 限制 15932968 的可能性。您是否知道特定于 __int128 类型的内部错误可能与强制转换导致的溢出有关？很难相信文件 15932968 可以再次压缩，但我认为 __int128 方法是一种未经压缩限制测试的新方法。

我也在以下链接上发布了这个问题，并在那里添加了 c 源文件：[https ://sourceforge.net/projects/mingw-w64/forums/forum/723797/topic/6592960](https://sourceforge.net/projects/mingw-w64/forums/forum/723797/topic/6592960)

您是否对如何进行加法/减法、演员转换有任何提示，以避免在执行这些操作时出现不可信的数据？

# scala - 有没有办法在 scala 2.10 中正确报告运行时编译错误？

> ID：14318702
> 
> 赞同：8
> 
> 时间：2013-01-14T12:48:18.633
> 
> 标签：scala, reflection, toolbox, scala-2.10

在 scala 2.9.x 中，我`tools.nsc.Global`直接将某些字符串编译成一个类并执行它。

在 scala 2.10 中，可以将其替换为以下内容：

```
import scala.reflect.runtime._;
val cm = universe.runtimeMirror(getClass.getClassLoader)
import scala.tools.reflect.ToolBox;
val tb = cm.mkToolBox()
tb.eval(tb.parse("class C; new C")) 
```

它完美无缺。唯一的问题是，使用旧的（已弃用）方法，我可以使用 StoreReporter 获得所有编译失败的非常漂亮的摘要（带有错误消息、行号），而新方法只会在编译错误时引发异常。

有什么办法可以具体化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:26:59.387

```
scala> import scala.reflect.runtime._
import scala.reflect.runtime._

scala> val cm = universe.runtimeMirror(getClass.getClassLoader)
cm: reflect.runtime.universe.Mirror = JavaMirror with ...

scala> import scala.tools.reflect.ToolBox
import scala.tools.reflect.ToolBox

scala> val tb = cm.mkToolBox()
tb: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = scala.tools.reflect.ToolBoxFactory$ToolBoxImpl@712fe0c0

scala> tb.eval(tb.parse("class C; new D"))
scala.tools.reflect.ToolBoxError: reflective compilation has failed: 

not found: type D
  at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl$ToolBoxGlobal.throwIfErrors(ToolBoxFactory.scala:312)
  at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl$ToolBoxGlobal.compile(ToolBoxFactory.scala:248)
  at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl.compile(ToolBoxFactory.scala:407)
  at scala.tools.reflect.ToolBoxFactory$ToolBoxImpl.eval(ToolBoxFactory.scala:410)
  ...

scala> tb.frontEnd.infos
res1: ... = Set(Info(NoPosition,not found: type D,ERROR)) 
```

# android - 无法通过 WIndowsExplorer 查看文件夹

> ID：14318703
> 
> 赞同：1
> 
> 时间：2013-01-14T12:48:21.053
> 
> 标签：android, android-sdcard

我使用以下代码在 SdCard 中创建了一个文件夹：

```
if (Environment.MEDIA_MOUNTED.equals(state)) {
        // We can read and write the media

        Log.v("Storage","ablo to read and write");
        //create Beatss folder
        File direct = new File(Environment.getExternalStorageDirectory() + "/Beatss");
            boolean success = true;
            if (!direct.exists()) {
                success = direct.mkdir();
            } 
```

我可以看到这个文件夹是通过 DDMS 创建的。当我通过 USB 将手机连接到计算机并浏览 sdCard 时，我看不到这个文件夹。但是，正如我提到的，我可以通过 DDMS 看到它。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:30:09.017

如果运行您的应用程序的设备版本是`Android 3.0+`，您还必须使用**`scanFile()`** on**`MediaScannerConnection`**才能将其实际显示在 PC 的文件资源管理器上。只需参考[此](http://commonsware.com/blog/2011/08/31/mtp-external-storage.html)确认即可。如果您仍然对如何执行此操作有疑问，请让我知道，将编辑我的答案。

# wpf - 将依赖属性添加到现有的 .NET 类

> ID：14318707
> 
> 赞同：-1
> 
> 时间：2013-01-14T12:48:30.760
> 
> 标签：wpf, dependency-properties

在 WPF 项目中，我有一堆控件，我希望能够在其中设置单个`Margin`属性并保存其他值。因此，我想避免将完整边距设置为新的`Thickness`( `Margin="0,5,0,15"`)。因为许多边距是从样式等设置的。但在个别情况下，我想偏离某些控件的通用样式。

我想，为什么不像这样在 .NET 类上注册几个新的依赖属性`FrameWorkElement`（例如只显示 MarginLeft）：

```
public class FrameWorkElementExtensions: FrameworkElement
{
    public static readonly DependencyProperty MarginLeftProperty = DependencyProperty.Register("MarginLeft", typeof(Int16?), typeof(FrameworkElement), new PropertyMetadata(null, OnMarginLeftPropertyChanged));
    public Int16? MarginLeft
    {
        get { return (Int16?)GetValue(MarginLeftProperty); }
        set { SetValue(MarginLeftProperty, value); }
    }

    private static void OnMarginLeftPropertyChanged(object obj, DependencyPropertyChangedEventArgs e)
    {
        if (obj != null && obj is UIElement)
        {
            FrameworkElement element = (FrameworkElement)obj;

            element.Margin = new Thickness((Int16?)e.NewValue ?? 0, element.Margin.Top, element.Margin.Right, element.Margin.Bottom);
        }
    }
} 
```

但此属性在代码隐藏或 XAML 中不可用。我能以某种方式理解它，因为这个虚拟类永远不会被实例化。试图使它成为一个静态类，但你不能从 FrameWorkElement 派生（我需要 GetValue 和 SetValue 方法）。

我在网上找不到任何处理更通用问题的资源：您可以将依赖项属性添加到现有的 .NET 类吗？

感谢任何帮助/明智的建议。

顺便说一句：仅更改边距（厚度）的一个组件的解决方案也值得赞赏；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:26:57.953

如果要定义要在不属于您的对象上设置的属性，则要定义附加属性，在这种情况下，您将使用[RegisterAttached](http://msdn.microsoft.com/en-us/library/ms597497.aspx)方法而不是 Register。此外，您可以将属性定义为静态 get/set 方法而不是实例属性，因为这不会设置在对象的实例上，而是设置在某个未知的框架元素上。链接中的帮助主题显示了一个示例。其他评论中的链接也提供了更多信息和示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T13:15:15.237

如果您只想更改 xaml Margin="1,2,3,4" 中使用的边距的一个组件，其中 1 - 左，2 - 上，3 - 右，4 - 下

# javascript - AJAX 获取状态正常，但 jsonp 回调返回未定义数据

> ID：14318710
> 
> 赞同：1
> 
> 时间：2013-01-14T12:48:39.263
> 
> 标签：javascript, jquery

我正在发送一个 ajax 请求以使用 jsonp 从 salesforce 检索数据，但 jsonp 回调数据返回未定义

我的ajax请求是，

```
$j.ajax({
            type: "POST",
            async: this.asyncAjax,
            url: "https://na14.salesforce.com/services/data/v26.0/
                      sobjects/customobject?callback=mycallback",
            contentType: 'application/json',
            cache: false,
            processData: false,
            data: payload,
            jsonp: false,
            jsonpCallback: function(data, textStatus, jqXHR){
                    alert('Data is '+data);
                    alert('Text status is '+textStatus);
                    alert('jqXHR is '+jqXHR);
            },
            error: (!this.refreshToken || retry ) ? error : function(jqXHR, textStatus, errorThrown) {
                if (jqXHR.status === 401) {
                    that.refreshAccessToken(function(oauthResponse) {
                        that.setSessionToken(oauthResponse.access_token, null,
                        oauthResponse.instance_url);
                        that.ajax(path, callback, error, method, payload, true);
                    },
                    error);
                } else {
                    error(jqXHR, textStatus, errorThrown);
                }
            },
            dataType: "jsonp",
            beforeSend: function(xhr) {
                if (that.proxyUrl !== null) {
                    xhr.setRequestHeader('SalesforceProxy-Endpoint', url);
                }
                xhr.setRequestHeader(that.authzHeader, "OAuth " + that.sessionId);
                xhr.setRequestHeader('X-User-Agent', 'salesforce-toolkit-rest-javascript/' + that.apiVersion);

                if (that.userAgentString !== null) {
                    xhr.setRequestHeader('User-Agent',that.userAgentString);
                }
            }
        }); 
```

但是，我得到的回应是，

```
Data is undefined.
Text status is undefined.
jqXhr is undefined. 
```

我该如何解决这个问题？该ajax请求的格式是否正确？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:23:54.420

您正在手动设置发送到 URL 的回调参数的名称，但没有调用函数`mycallback`。

您正在设置`jsonpCallback`一个功能。jQuery 将获取该函数的***返回值***并将其作为`callback`参数发送（如果您让它发送该参数）。

做 JSONP的*正确方法是：*

```
$j.ajax({
            type: "POST",
            async: this.asyncAjax,
            url: "https://na14.salesforce.com/services/data/v26.0/sobjects/customobject",
            contentType: 'application/json',
            cache: false,
            processData: false,
            data: payload,
            dataType: 'jsonp',
            success: function(data, textStatus, jqXHR){
                    alert('Data is '+data);
                    alert('Text status is '+textStatus);
                    alert('jqXHR is '+jqXHR);
            }, 
```

# iphone - 头文件和实现文件中声明的属性有什么区别

> ID：14318724
> 
> 赞同：0
> 
> 时间：2013-01-14T12:49:14.170
> 
> 标签：iphone

我真的认为保罗的讲座很棒..我只是有一个问题，如果他们不介意的话，也许有人可以回答..在第 4 课中，在为 CalculatorBrain 类实现新 api 时，为什么在中声明 (id)program 属性头文件（使其成为公共属性），为什么不像 programStack 属性那样在实现文件中声明。此外，实现文件中声明的属性的访问器方法（本质上是像 programStack 这样的私有属性）是否公开可用？我看到他在实例方法“performOperation”中调用了self.program堆栈）。如果有人能提供帮助，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:52:37.547

`properties declared in header and implementation file`

在标头中意味着它可用于所有其他类。根据您的访问说明符（@publilc，@protected），这些是受保护的或公开的

在实现文件中，它对外界隐藏。（这些是私有的，所以不能继承）

理论上：您的头文件应该只为您的类公开公共接口，其他所有内容都属于实现。

另外：实现文件 ivars 对子类不可见，如果您手动生成需要子类化的 setter 和 getter，这有时会有点尴尬。

# php - 无法使用嵌套的 while 循环执行准备好的语句

> ID：14318731
> 
> 赞同：1
> 
> 时间：2013-01-14T12:49:34.213
> 
> 标签：php, mysql, mysqli

我无法将一些代码从旧式 mysql 查询更改为准备就绪。我认为问题是由于我使用了多个whiles，每个whiles都有自己的查询，导致问题导致一次只能激活一个准备好的语句。

编辑：如果有人在乎，我已经让它只使用 2 个循环，就像这样 -

```
function createDeskMenu()
{
    global $bookingTimes, $dbconn;
    $day0 = mktime(0, 0, 0, date("m")  , date("d"), date("Y"));

    $query = "SELECT location FROM location";
    $result = mysqli_query($dbconn,$query);
    mysqli_num_rows($result);
    while ($row = mysqli_fetch_array($result))
    {
        $location = $row['location'];
        echo "<h3>$location</h3><div>";
        $query = $dbconn -> prepare("SELECT COALESCE( CountDesk, 0 ) total, name, d.desk_id, phone, fax, dock, pc FROM desk d LEFT JOIN (SELECT COUNT(booked.desk_id) CountDesk, desk_id FROM booked WHERE booking_id >=?)b ON d.desk_id = b.desk_id WHERE location=?");
        $query->bind_param("is",$day0, $location);
        $query->execute();
        $query->bind_result($totalCount,$name,$desk_id,$phone,$fax,$dock,$pc);
        while($query->fetch()) {
            $total = count($bookingTimes) * 14 - $totalCount;
            echo '<a href="?page=desk&desk='.$desk_id.'"><div class="desk"><b>'.$name.' 
            ('.$total.' Available Bookings)</b><li>Facilities:';
            if($phone){echo " Phone,";}if($fax){echo " Fax Machine,";}if($dock){echo " Laptop Dock.";}if($pc){echo " Desktop Workstation.";}
            echo '</li></div></a><hr />';
        }
        $query->close();
        echo '</div>';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:05:18.707

当连接中有行等待从另一个语句中获取时，您不能`prepare()`使用语句。您必须首先关闭前一个结果集或从中获取所有行。

### 然而...

`location` *我认为根本*不需要检索外部查询，因为它没有`WHERE`子句。您正在选择*所有*位置，因此可以完全省略该部分。您使用的所有外部循环都是`<h3>`为每个位置创建一个，这是非常浪费的（除了最初会导致您破坏代码）

相反，执行一次查询并在 fetch 循环中检查位置是否已更改。当它改变时，输出你的标题

```
echo "<h3>$location</h3><div>"; 
```

因此，完全删除外部查询和循环，并使用如下模式来检测`location`. 确保`ORDER BY location`为您分类。

**不需要**绑定参数。您可以使用 query() 调用来执行此操作，因为位置不再是可变的，并且`$day0`已知是来自`mktime()`.

```
// Substitute a query() call and $day0 can be inserted directly.
// This one query fetches all locations sorted...
$query = $dbconn->query("
  SELECT
   COALESCE( CountDesk, 0 ) total,
   name,
   d.desk_id,
   phone,
   fax,
   dock,
   pc
 FROM 
   desk d
   LEFT JOIN (
     SELECT COUNT(booked.desk_id) CountDesk, desk_id FROM booked WHERE booking_id >= $day0
   )b ON d.desk_id = b.desk_id 
 ORDER BY location");

// Store the last location in a variable which starts empty...
$location = "";

while($row = $query->fetch_assoc()) {
  // on change of $location, update the variable.
  if ($location !== $row['location']) {
    $location = $row['location'];
    // And output the new location value
     echo "<h3>$location</h3><div>";
  }

  // Do the rest of your loop.
  $total = count($bookingTimes) * 14 - $row['total'];
  echo '<a href="?page=desk&desk='.$row['desk_id'].'"><div class="desk"><b>'.$row['name'].' 
  ('.$total.' Available Bookings)</b><li>Facilities:';
  if($row['phone']){
    echo " Phone,";
  }
  if($row['fax']){ 
    echo " Fax Machine,";
  }
  if($row['dock']){
    echo " Laptop Dock.";
  }
  if($row['pc']){
    echo " Desktop Workstation.";
  }
  echo '</li></div></a><hr />';
}
$row->close();
echo '</div>'; 
```

`prepare()`现在谈谈它失败的原因......当有剩余的行要从先前的语句或查询中获取时，您不能创建新语句。您必须首先获取所有行，或者使用 关闭语句`$stmt->close()`。因此，您不能嵌套 fetch 循环。

更好的方法是首先将所有行提取到一个数组中，然后遍历该数组：

```
while ($row = $first_query->fetch()) {
  // Append all onto an array
  $first_query_rows[] = $row;
}
// Then loop over that
foreach ($first_query_rows as $row) {
  // Do a new query with $row
} 
```

通常，这可以通过适当的`JOIN`.

# javascript - 继承：如何在覆盖方法中模拟 super.method

> ID：14318732
> 
> 赞同：1
> 
> 时间：2013-01-14T12:49:37.130
> 
> 标签：javascript, inheritance, overriding

我正在尝试以最简单的方式实现继承。我知道 JS 继承是基于原型的，但由于我更精通基于 OO 类的语言，我有点偏向于将“类”逻辑封装在“构造函数”函数中。我还试图避免在原型对象中定义新成员，因为该代码应该放在“类”函数之外。这是我尝试过的：

```
 function Car(color, year, plate) { 
        this.color = color;
        this.year = year;
        this.plate = plate;
        this.hasFuel = true;
        this.fuel = 100;    

        this.run = function(km) {
            this.fuel = this.fuel - km*this.getFuelConsumptionRate(); 
            if(this.fuel < 0){
                this.fuel = 0;
            }
            if(this.fuel == 0){
                this.hasFuel = false;
            }
        };  

        this.getFuelConsumptionRate = function(){
            return 4.2;
        };
    }

    function EfficientCar(color, year, plate, weight){
        //Emulating a super call
        Car.call(this, color, year, plate);

        this.weight = weight;

        //Overriden method
        this.getFuelConsumptionRate = function(){
            return 2.2;
        };  
    }
    //Inheritance 
    //(I don't like this out of the method, but it is needed for the thing to work)
    EfficientCar.prototype = Car;
    EfficientCar.prototype.constructor = EfficientCar; 
```

此代码按预期工作：高效汽车在调用相同公里数后剩余的燃料更多。但现在我想在覆盖的子版本中使用函数的父版本。像这样的东西：

```
 function EfficientCar(color, year, plate, weight){
        //Emulating a super call
        Car.call(this, color, year, plate);

        this.weight = weight;

        this.getFuelConsumptionRate = function(){
            return super.getFuelConsumptionRate() / 2;  //If only I could do this...
        };  
    } 
```

有没有办法以类方式实现这一目标？我希望几乎所有内容都包含在`Car`and `EfficientCar` ~~classes~~中，对不起，函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:51:30.767

如果你想在 javascript 中使用继承，我建议你使用 John Resig 的这个小宝石：

[http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

来自博客的示例：

```
var Person = Class.extend({
  init: function(isDancing){
    this.dancing = isDancing;
  },
  dance: function(){
    return this.dancing;
  }
});

var Ninja = Person.extend({
  init: function(){
    this._super( false );
  },
  dance: function(){
    // Call the inherited version of dance()
    return this._super();
  },
  swingSword: function(){
    return true;
  }
});

var p = new Person(true);
p.dance(); // => true

var n = new Ninja();
n.dance(); // => false
n.swingSword(); // => true

// Should all be true
p instanceof Person && p instanceof Class &&
n instanceof Ninja && n instanceof Person && n instanceof Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:01:01.913

如果要调用“超类”中定义的函数，则应正确使用原型，即在原型上而不是在实例上定义函数：

```
Car.prototype.getFuelConsumptionRate = function() {
 return 4.2; 
} 
```

和继承

```
EfficientCar.prototype = new Car(); 
```

然后，您将能够调用超级函数：

```
EfficientCar.prototype.getFuelConsumptionRate = function(){
   var superfun = this.constructor.prototype.constructor.prototype.getFuelConsumptionRate;
   return superfun.call(this) / 2;
}; 
```

[完整演示](http://jsfiddle.net/eB9BC/)（打开控制台）

如果您将调用超级函数（我认为这是一个糟糕的函数）作为一种做法，那么您可以构建一个嵌入的小方法并缩短方法的获取。

如果您确切知道继承的目标级别，那当然更容易，因为您可以简单地替换

```
var superfun = this.constructor.prototype.constructor.prototype.getFuelConsumptionRate; 
```

和

```
var superfun = EfficientCar.prototype.getFuelConsumptionRate; 
```

请注意，javascript 与您似乎更习惯的其他语言并不完全相同。尝试应用外来模式通常会导致程序更冗长、更不灵活和更难维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:21:04.350

我这样做，在 Object.create() 不受支持时使用 shim。

```
var Car = function() {
    // code
};

Car.prototype.getFuelConsumptionRate = function() {
    // code
};

var EfficientCar = function() {
    Car.call(this);
};

EfficientCar.prototype = Object.create(Car.prototype);

EfficientCar.prototype.getFuelConsumptionRate = function() {
    var result = Car.prototype.getFuelConsumptionRate.call(this)
    // code
}; 
```

# php - 在现有 PHP 代码中添加新功能

> ID：14318734
> 
> 赞同：0
> 
> 时间：2013-01-14T12:49:43.897
> 
> 标签：php, function, checkbox

我一直试图弄清楚这一点。这是很久以前别人写的代码，现在我被要求添加一些新功能。简而言之，有一个表单提交到 mysql db 并生成填充字段的 pdf。有可能返回并编辑表格并重新创建 pdf。

我的任务是在表单中添加两个复选框。一切正常，复选框值被发送到数据库，并在选中或未选中复选框的情况下创建 pdf 文件。

但是，当我返回编辑表单时，复选框始终处于未选中状态，它不会从数据库中获取值。

因此，填写表格的现有代码如下所示。我看到有文本、文本区域和选择...如何在此处添加复选框？谢谢您的帮助！

```
function fillEoi($eoiFile, $oldPost="NULL") {
if (is_array($oldPost) && count($oldPost)>2) {
    $handle = fopen($eoiFile, "r");
    $contents = fread($handle, filesize ($eoiFile));
    fclose ($handle);

    $tempName = tempnam("/tmp", "FOO");
    $handle = fopen($tempName ,"w");

    $fileContent=explode("\n",$contents);

    foreach ($fileContent as $key => $item) {
        //Get fieldname;
        unset($fieldName);
        $fieldName=strrev(stristr(str_replace("/", "\/", $item),"DB_"));
        $fieldName=strrev(substr(strrchr($fieldName,"'"),1));

        // If is an input field
        if (stripos($item, "type='text'") && stripos($item, $fieldName)) {      
                //if (stristr($item, $fieldName))   
            //  $valueAdd=" value='".$oldPost[$fieldName]."'";
                $oldPost[$fieldName] = (strpos($item,'DB_INSUREDVALUE')) ? showValue($oldPost[$fieldName]) : $oldPost[$fieldName];
                $item=str_replace($fieldName, $fieldName."' value='".$oldPost[$fieldName]."",$item);
        } elseif (stripos($item, "</textarea>") && stripos($item, $fieldName)) {
            // If is an Textarea
                $item=str_replace("</textarea>", $oldPost[$fieldName]."</textarea>" , $item);
        } elseif ((stripos($item, $fieldName) && stripos($item, "<select"))) /* or $selectField==1)*/   {
            $returnVar['EoiDate'][$fieldName]=$oldPost[$fieldName];
    }

        }

        $fileContent[$key]=$item;
    }
    $newContent=implode("\n",$fileContent);
    fwrite ($handle, $newContent);
    fclose($handle);
    $newEoiFile=$tempName;
    unset($eoiFile);
} else {
    $newEoiFile=$eoiFile;
}
$returnVar['EoiPath']=$newEoiFile;
return $returnVar; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:08:33.073

您可以使用 checked 属性将复选框元素设置为选中

```
// Get the checkbox state from db, I assume here it is checked
$checked = 1;

if ($checked) {
    echo '<input type="checkbox" name="DB_KGS" checked="checked">';
} else {
    echo '<input type="checkbox" name="DB_KGS">';
} 
```

# android - Android 在没有 GPS 的情况下确定移动的开始

> ID：14318736
> 
> 赞同：2
> 
> 时间：2013-01-14T12:49:49.917
> 
> 标签：android, accelerometer, move

在没有 GPS 的情况下如何确定运动开始的时间？

我想我可以通过内置的加速度传感器确定它，但我不知道从移动开始到设备实现移动之间的响应时间是多少。加速度传感器有点不准确，我需要用低通滤波器过滤这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:08:36.290

根据采样率（传感器速度），它可能会非常快地检测到运动 - 大约 20 毫秒 - 但它高度依赖于设备。至少 motorola defy 仅在传感器速度较慢时才发送传感器事件。（如用户界面）

你可以抓住这个项目并玩一下：

[https://github.com/ko5tik/accanalyser](https://github.com/ko5tik/accanalyser)

（编译和签名的apk：[https](https://play.google.com/store/apps/details?id=de.pribluda.android.accanalyzer&feature=search_result#?t=W251bGwsMSwyLDEsImRlLnByaWJsdWRhLmFuZHJvaWQuYWNjYW5hbHl6ZXIiXQ) ://play.google.com/store/apps/details?id=de.pribluda.android.accanalyzer&feature=search_result#?t=W251bGwsMSwyLDEsImRlLnByaWJsdWRhLmFuZHJvaWQuYWNjYW5hbHl6ZXIiXQ ..）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:27:05.277

你是对的，你需要用低通滤波器过滤加速度计值。

时间延迟将取决于您的滤波器延迟（滤波器阶数）和加速度计的频率。

无论如何，它会少于 1 秒。

# python - 庞大数据集的热图

> ID：14318737
> 
> 赞同：1
> 
> 时间：2013-01-14T12:49:57.017
> 
> 标签：python, bioinformatics, heatmap

我有一个制表符分隔的文件，其中包含区域和在这些区域中找到的各个生物实体（我检查了 67 个，因此您说每个区域都检查了这 67 个实体的存在或不存在及其频率）。

我有所有这些表格格式的数据。

下面给出了一个示例数据

```
Region  ATF3    BCL3    BCLAF1  BDP1    BRF1    BRF2    Brg1    CCNT2   CEBPB   CHD2    CTCF    CTCFL   E2F6    ELF1
chr1:109102470:109102970    0   0   1   0   0   0   0   1   0   0   4   1   4   1
chr1:110526886:110527386    0   0   0   0   0   0   0   1   1   0   4   1   0   1
chr1:115300671:115301171    0   0   1   0   0   0   0   0   1   1   4   1   1   1
chr1:115323308:115323808    0   0   0   0   0   0   0   1   0   0   2   1   1   0
chr1:11795641:11796141  1   0   0   0   0   0   0   1   2   0   0   0   1   0
chr1:118148103:118148603    0   0   0   0   0   0   0   1   0   0   0   0   0   1
chr1:150521397:150521897    0   0   0   0   0   0   0   2   2   0   6   2   4   0
chr1:150601609:150602109    0   0   0   0   0   0   0   0   3   2   0   0   1   0
chr1:150602098:150602598    0   0   0   0   0   0   0   0   1   1   0   0   0   0
chr1:151119140:151119640    0   0   0   0   0   0   0   1   0   0   0   0   1   0
chr1:151128604:151129104    0   0   0   0   0   0   0   0   0   0   3   0   0   0
chr1:153517729:153518229    0   0   0   0   0   0   0   0   0   0   0   0   0   0
chr1:153962738:153963238    0   0   0   0   0   0   0   1   1   0   0   0   0   1
chr1:154155682:154156182    0   0   0   0   0   0   0   1   0   0   0   0   1   1
chr1:154155725:154156225    0   0   0   0   0   0   0   1   0   0   0   0   1   1
chr1:154192154:154192654    0   0   0   0   0   0   0   0   0   0   0   0   0   0
chr1:154192824:154193324    1   0   0   0   0   0   0   1   0   1   0   0   1   1
chr1:154192943:154193443    1   0   0   0   0   0   0   1   0   2   0   0   1   1
chr1:154193273:154193773    1   0   0   0   0   0   0   1   0   2   0   0   2   1
chr1:154193313:154193813    0   0   0   0   0   0   0   1   0   2   0   0   2   1
chr1:155904188:155904688    0   0   0   0   0   0   0   1   0   0   0   0   1   1
chr1:155947966:155948466    0   0   0   0   0   0   0   1   0   0   3   0   0   1
chr1:155948336:155948836    0   0   0   0   0   0   0   1   0   0   5   1   0   1
chr1:156023516:156024016    0   0   0   0   0   0   0   1   0   1   4   1   1   1
chr1:156024016:156024516    0   1   1   0   0   0   0   0   0   2   0   0   1   1
chr1:156163229:156163729    0   0   0   0   0   0   0   0   0   0   2   0   0   1
chr1:160990902:160991402    0   0   0   0   0   0   0   0   0   1   0   0   1   2
chr1:160991133:160991633    0   0   0   0   0   0   0   0   0   1   0   0   1   2
chr1:161474704:161475204    0   0   0   0   0   0   0   0   0   0   0   0   0   0
chr1:161509530:161510030    0   0   1   1   1   0   0   0   1   0   1   0   0   1
chr1:161590964:161591464    0   0   0   1   1   0   0   0   0   0   0   0   0   0
chr1:169075446:169075946    0   0   0   0   0   0   0   2   0   0   4   0   3   0
chr1:17053279:17053779  0   0   0   1   0   0   0   0   0   1   0   0   0   0
chr1:1709909:1710409    0   0   0   0   0   0   0   2   0   1   0   0   3   1
chr1:1710297:1710797    0   0   0   0   0   0   0   0   0   1   6   0   1   1 
```

现在我怎么能把它放在从颜色代码浅红色到深红色的热图中（取决于频率和白色，如果没有的话）？

还有其他更好的方法来表示这种类型的数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:16:15.297

使用[Matplotlib](http://matplotlib.org/)

```
import pylab as plt
import numpy as np

data = np.loadtxt("14318737.txt", skiprows=1, converters={0:lambda x: 0})
plot_data = np.ma.masked_equal(data[:,1:], 0)

plt.imshow(plot_data, cmap=plt.cm.get_cmap("Reds"), interpolation="nearest")
plt.colorbar()

plt.show() 
```

我忽略了第一行和第一列（如果您需要它们作为标签，我们需要更改它）。对于剩余的数据，所有零值都被屏蔽（因此它们在图中显示为白色），然后将这些数据绘制为彩色图。

`imshow`有一堆其他参数来控制结果，例如原点（下/上），方面（自动/相等/some_ratio）。

你写的是地区——你是指地理区域吗？然后你可能想看看[Matplotlib 的 Basemap Toolkit](http://matplotlib.org/basemap/)来创建颜色编码的地图。

**编辑**

新要求，新范例

```
import pylab as plt
import numpy as np

fn = "14318737.txt"
with open(fn, "r") as f:
    labels = f.readline().rstrip("\n").split()[1:]
data = np.loadtxt(fn, skiprows=1, converters={0:lambda x: 0})
plot_data = np.ma.masked_equal(data[:,1:], 0)

plt.subplots_adjust(left=0.1, bottom=0.15, right=0.99, top=0.95)
plt.imshow(plot_data, cmap=plt.cm.get_cmap("Reds"), interpolation="nearest", aspect = "auto")
plt.xticks(range(len(labels)), labels, rotation=90, va="top", ha="center")
plt.colorbar()

plt.show() 
```

现在我首先从第一行读取标签。`aspect`我在`imshow`-call 中添加了关键字参数。我为每个因素创建标签。

此外，我使用`subplots_adjust`. 您可以使用这些参数，直到它们满足您的需求。

现在的结果是： ![结果热图](../Images/368d9228abd856892d8ee4934d984cc4.png)

如果您想要 y 轴的其他刻度，请使用`plt.yticks`，就像`xticks`在我的示例中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T07:19:57.573

由于对我的其他答案的评论，OP 有另一个关于搜索 2d 集群的问题。这是一些答案。

取自我的图书馆[eegpy](https://github.com/thorstenkranz/eegpy/blob/master/eegpy/stats/cluster.py)，我使用了一种方法 find_clusters。它遍历二维数组，找到高于/低于给定阈值的所有集群。

这是我的代码：

```
import pylab as plt
import numpy as np
from Queue import Queue

def find_clusters(ar,thres,cmp_type="greater"):
    """For a given 2d-array (test statistic), find all clusters which
are above/below a certain threshold.
"""
    if not cmp_type in ["lower","greater","abs_greater"]:
        raise ValueError("cmp_type must be in [\"lower\",\"greater\",\"abs_greater\"]")
    clusters = []
    if cmp_type=="lower":
        ar_in = (ar<thres).astype(np.bool)
    elif cmp_type=="greater":
        ar_in = (ar>thres).astype(np.bool)
    else: #cmp_type=="abs_greater":
        ar_in = (abs(ar)>thres).astype(np.bool)

    already_visited = np.zeros(ar_in.shape,np.bool)
    for i_s in range(ar_in.shape[0]): #i_s wie i_sample
        for i_f in range(ar_in.shape[1]):
            if not already_visited[i_s,i_f]:
                if ar_in[i_s,i_f]:
                    #print "Anzahl cluster:", len(clusters)
                    mask = np.zeros(ar_in.shape,np.bool)
                    check_queue = Queue()
                    check_queue.put((i_s,i_f))
                    while not check_queue.empty():
                        pos_x,pos_y = check_queue.get()
                        if not already_visited[pos_x,pos_y]:
                            #print pos_x,pos_y
                            already_visited[pos_x,pos_y] = True
                            if ar_in[pos_x,pos_y]:
                                mask[pos_x,pos_y] = True
                                for coords in [(pos_x-1,pos_y),(pos_x+1,pos_y),(pos_x,pos_y-1),(pos_x,pos_y+1)]: #Direct Neighbors
                                    if 0<=coords[0]<ar_in.shape[0] and 0<=coords[1]<ar_in.shape[1]:
                                        check_queue.put(coords)
                    clusters.append(mask)
    return clusters

fn = "14318737.txt"
with open(fn, "r") as f:
    labels = f.readline().rstrip("\n").split()[1:]
data = np.loadtxt(fn, skiprows=1, converters={0:lambda x: 0})

clusters = find_clusters(data, 0, "greater")

plot_data = np.ma.masked_equal(data[:,1:], 0)

plt.subplots_adjust(left=0.1, bottom=0.15, right=0.99, top=0.95)
plt.imshow(plot_data, cmap=plt.cm.get_cmap("Reds"), interpolation="nearest", aspect = "auto", 
           vmin=0, extent=[0.5,plot_data.shape[1]+0.5, plot_data.shape[0] - 0.5, -0.5])
plt.colorbar()

for cl in clusters:
    plt.contour(cl.astype(np.int),[0.5], colors="k", lw=2)
plt.xticks(np.arange(1, len(labels)+2), labels, rotation=90, va="top", ha="center")

plt.show() 
```

它给出了以下形式的图像：

![在集群周围绘制轮廓](../Images/0914372d29f4d93d311fc5283a148b6f.png)

`clusters`是布尔二维数组 (True / False) 的列表。每个数组代表一个簇，其中每个布尔值指示特定“点”是否是该簇的一部分。您可以在任何进一步的分析中使用它。

***编辑***

现在在集群上有更多的乐趣

```
import pylab as plt
import numpy as np
from Queue import Queue

def find_clusters(ar,thres,cmp_type="greater"):
    """For a given 2d-array (test statistic), find all clusters which
are above/below a certain threshold.
"""
    if not cmp_type in ["lower","greater","abs_greater"]:
        raise ValueError("cmp_type must be in [\"lower\",\"greater\",\"abs_greater\"]")
    clusters = []
    if cmp_type=="lower":
        ar_in = (ar<thres).astype(np.bool)
    elif cmp_type=="greater":
        ar_in = (ar>thres).astype(np.bool)
    else: #cmp_type=="abs_greater":
        ar_in = (abs(ar)>thres).astype(np.bool)

    already_visited = np.zeros(ar_in.shape,np.bool)
    for i_s in range(ar_in.shape[0]): #i_s wie i_sample
        for i_f in range(ar_in.shape[1]):
            if not already_visited[i_s,i_f]:
                if ar_in[i_s,i_f]:
                    #print "Anzahl cluster:", len(clusters)
                    mask = np.zeros(ar_in.shape,np.bool)
                    check_queue = Queue()
                    check_queue.put((i_s,i_f))
                    while not check_queue.empty():
                        pos_x,pos_y = check_queue.get()
                        if not already_visited[pos_x,pos_y]:
                            #print pos_x,pos_y
                            already_visited[pos_x,pos_y] = True
                            if ar_in[pos_x,pos_y]:
                                mask[pos_x,pos_y] = True
                                for coords in [(pos_x-1,pos_y),(pos_x+1,pos_y),(pos_x,pos_y-1),(pos_x,pos_y+1)]: #Direct Neighbors
                                    if 0<=coords[0]<ar_in.shape[0] and 0<=coords[1]<ar_in.shape[1]:
                                        check_queue.put(coords)
                    clusters.append(mask)
    return clusters

fn = "14318737.txt"
data = []
with open(fn, "r") as f:
    labels = f.readline().rstrip("\n").split()[1:]
    for line in f:
        data.append([int(v) for v in line.split()[1:]])
data = np.array(data) #np.loadtxt(fn, skiprows=1, usecols=range(1,15))#converters={0:lambda x: 0})

clusters = find_clusters(data, 0, "greater")
large_clusters = filter(lambda cl: cl.sum()>5, clusters) #Only take clusters with five or more items
large_clusters = sorted(large_clusters, key=lambda cl: -cl.sum())

plot_data = np.ma.masked_equal(data[:,:], 0)

plt.subplots_adjust(left=0.1, bottom=0.15, right=0.99, top=0.95)
plt.imshow(plot_data, cmap=plt.cm.get_cmap("Reds"), interpolation="nearest", aspect = "auto", 
           vmin=0, extent=[-0.5,plot_data.shape[1]-0.5, plot_data.shape[0] - 0.5, -0.5])
plt.colorbar()

for cl in large_clusters:
    plt.contour(cl.astype(np.int),[.5], colors="k", lw=2)
plt.xticks(np.arange(0, len(labels)+1), labels, rotation=90, va="top", ha="center")

print "Summary of all large clusters:\n"
print "#\tSize\tIn regions"
for i, cl in enumerate(large_clusters):
    print "%i\t%i\t" % (i, cl.sum()),
    regions_in_cluster = np.where(np.any(cl, axis=0))[0]
    min_region = labels[min(regions_in_cluster)]
    max_region = labels[max(regions_in_cluster)]
    print "%s to %s" % (min_region, max_region)

plt.xlim(-0.5,plot_data.shape[1]-0.5)

plt.show() 
```

我过滤了所有包含五个以上点的集群。我只绘制这些。您也可以使用`data`每个集群内部的总和。然后我按它们的大小对这些大集群进行降序排序。

最后，我打印了所有大型集群的摘要，包括它们所在的所有集群的名称。 ![仅限大型集群](../Images/38c2a051697d756dca09b981c953b9f2.png)

# php - 无法调试 eclipse helios 3.6

> ID：14318739
> 
> 赞同：0
> 
> 时间：2013-01-14T12:50:04.287
> 
> 标签：php, xdebug, eclipse-3.6

我有以下情况：

xdebug 2.0.0rc1-5.1.2 Eclipse Helios php 5.1.6

我正在尝试在 Eclipse 上调试 php 应用程序，但它不会在断点处停止。浏览器已正确初始化。我认为 xdebug 、 eclipse helios 和 php 的版本是兼容的。我已经删除了所有断点，并再次创建了它。xdebug 出现在配置为扩展的 phpinfo 中。

任何人都知道为什么它不起作用？

提前致谢。

phpinfo 中的 xdebug 详细信息：

版本 2.0.0RC1

```
Supported protocols Revision 
DBGp - Common DeBuGger Protocol  $Revision: 1.99 $  
GDB - GNU Debugger protocol  $Revision: 1.81 $  
PHP3 - PHP 3 Debugger protocol  $Revision: 1.20 $  

Directive Local Value Master Value 
xdebug.allowed_clients no value no value 
xdebug.auto_trace Off Off 
xdebug.collect_includes On On 
xdebug.collect_params Off Off 
xdebug.collect_return Off Off 
xdebug.collect_vars Off Off 
xdebug.default_enable On On 
xdebug.dump.COOKIE no value no value 
xdebug.dump.ENV no value no value 
xdebug.dump.FILES no value no value 
xdebug.dump.GET no value no value 
xdebug.dump.POST no value no value 
xdebug.dump.REQUEST no value no value 
xdebug.dump.SERVER no value no value 
xdebug.dump.SESSION no value no value 
xdebug.dump_globals On On 
xdebug.dump_once On On 
xdebug.dump_undefined Off Off 
xdebug.extended_info On On 
xdebug.idekey francescjp no value 
xdebug.manual_url http://www.php.net http://www.php.net 
xdebug.max_nesting_level 100 100 
xdebug.profiler_aggregate Off Off 
xdebug.profiler_append Off Off 
xdebug.profiler_enable Off Off 
xdebug.profiler_enable_trigger Off Off 
xdebug.profiler_output_dir /tmp /tmp 
xdebug.profiler_output_name crc32 crc32 
xdebug.remote_autostart Off Off 
xdebug.remote_enable On On 
xdebug.remote_handler ”dbgp” ”dbgp” 
xdebug.remote_host 127.0.0.1 127.0.0.1 
xdebug.remote_log no value no value 
xdebug.remote_mode req req 
xdebug.remote_port 9000 9000 
xdebug.show_exception_trace Off Off 
xdebug.show_local_vars Off Off 
xdebug.show_mem_delta Off Off 
xdebug.trace_format 0 0 
xdebug.trace_options 0 0 
xdebug.trace_output_dir /tmp /tmp 
xdebug.trace_output_name crc32 crc32 
xdebug.var_display_max_data 512 512 
xdebug.var_display_max_depth 2 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:58:55.487

您是否检查过您是否使用了正确版本的 Xdebug？向导将帮助您选择 wright 版本[http://www.xdebug.org/wizard.php](http://www.xdebug.org/wizard.php)。

我不知道您使用的是哪个操作系统，但我猜它是 Windows。我在 Unbuntu 和 Windows 上遇到了与 netbeans 类似的问题（[Xdebug 和 Netbeans 没有相互通信](https://stackoverflow.com/questions/13880415/xdebug-and-netbeans-are-not-communicating-with-each-other)）。因为 Netbeans 和 Eclipse 似乎共享许多共同的元素，这可能会有所帮助。在 Eclipse 中将端口号设置为 9001。

**编辑：更多信息**

这是我的配置：

> ```
> XAMPP Version 1.8.1.
> Windows 7
> Eclipse PDT 32bit version
> Xdebug 2.2.1 
> ```

我的建议是将所有内容更新到最新版本或使用完全相同的配置。

在我的 php.ini 文件 (C:\xampp\php\php.ini) 中，我有以下设置。您可以通过控制面板 -> 配置 -> PHP (php.ini) 访问 php.ini。

```
[XDebug]
zend_extension = C:\xampp\php\ext\php_xdebug-2.2.1-5.4-vc9.dll
;xdebug.profiler_append = 0
;xdebug.profiler_enable = 1
;xdebug.profiler_enable_trigger = 0
;xdebug.profiler_output_dir = "C:\xampp\tmp"
;xdebug.profiler_output_name = "cachegrind.out.%t-%s"
;xdebug.remote_enable = 1
;xdebug.remote_handler = "dbgp"
;xdebug.remote_host = "127.0.0.1"
;xdebug.trace_output_dir = "C:\xampp\tmp"
;xdebug.remote_port="9000"
;xdebug.remote_autostart = 1
;xdebug.remote_mode=reg
;xdebug.idekey=netbeans-xdebug
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

AND 关闭报告 php.ini 中的 zend 调试

```
; This setting is on by default.
report_zend_debug = 0 
```

Eclipse 中的 Xdebug 配置：

启动 Eclipse -> Explorer window -> File -> Properties -> PHP -> PHP debug -> 在默认设置下选择 Xdebug 而不是 Zend。（如果需要配置：Xdebug 到端口 9000）。

# windows-phone-7 - 如何在 Windows Phone 上使网格可滚动？

> ID：14318744
> 
> 赞同：0
> 
> 时间：2013-01-14T12:50:27.630
> 
> 标签：windows-phone-7

我需要让我的网格可滚动。我有一个最终将保存 30-40 行数据的网格控件。我用代码动态填充/创建这些行。每次这些行在屏幕上呈现时，它们都会尝试适应我为网格设置的高度。我尝试将我的网格包装在滚动查看器中，但这没有用。我想远离列表框，因为文本会错位。这是我构建网格的 XAML 代码：

```
 <ScrollViewer Canvas.Left="56" Canvas.Top="354">
        <Grid x:Name="grdWeather"  Canvas.Left="56" Canvas.Top="354" Width="371" ShowGridLines="True" Background="#FFDCB3B3" ScrollViewer.VerticalScrollBarVisibility="Visible" MaxHeight="196">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="100"/>
            </Grid.ColumnDefinitions>
            </Grid>
        </ScrollViewer> 
```

这是我创建行的代码：

```
 for (int t = 0; t <= 30; t++) 
            {
                RowDefinition row1 = new RowDefinition();
                grdWeather.RowDefinitions.Add(row1);

                TextBlock txtTime = new TextBlock();
                txtTime.Text = time;
                txtTime.SetValue(Grid.RowProperty, t);
                txtTime.SetValue(Grid.ColumnProperty, 0);
                txtTime.Width = 100;
                grdWeather.Children.Add(txtTime);

                TextBlock txtTemp = new TextBlock();
                txtTemp.Text = time;
                txtTemp.Width = 100;
                txtTemp.SetValue(Grid.RowProperty, t);
                txtTemp.SetValue(Grid.ColumnProperty, 1);
                grdWeather.Children.Add(txtTemp);
            } 
```

任何建议/反馈表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:17:32.807

使用 ListBox 绝对是一个更好的主意。您的代码的问题是网格上的 MaxHeight=196。删除它就可以了

# android - 根据用户位置发送通知

> ID：14318755
> 
> 赞同：7
> 
> 时间：2013-01-14T12:51:06.427
> 
> 标签：android, notifications, location, google-cloud-messaging

在我正在开发的 android 应用程序中，我希望能够根据用户的位置向用户的手机发送通知。例如，用户在其当前位置本地的餐厅收到特价优惠通知。

我想知道做到这一点的最佳方法？（没有代码，只是如何做的一般结构）。

我想到了两种可能的方法：

方式一：

1) 让应用程序获取用户位置并每 5 分钟向服务器报告一次。2）如果用户在该位置的设置半径内，向他们发送通知。

方式二：

1）发送通知并使用应用程序广播接收器方法过滤并仅向正确区域的用户显示通知。

两者似乎都非常低效，因为方式 1 依赖于持续运行的服务，而方式 2 向应用程序的所有用户发送通知，并且由于通知将非常特定于区域，几乎 100% 的时间通知与用户（因此未显示）。

我已经编写了 GCM 代码并且还可以获取用户的位置，我只需要一种方法将它们链接起来。

我希望我已经把我的问题说清楚了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T12:59:02.293

' *Way 1.5* '（1 和 2 的组合）怎么样？

您可以获取用户的位置并将其发送到服务。它将使用广泛的范围（例如城市范围）响应通知。该应用程序将仅显示实际范围的通知。

但是，应用程序知道广泛范围的通知，因此如果用户移动，应用程序能够显示新通知（在广泛范围内）而无需连接到服务。

一些额外的想法：

*   如果用户离开大范围，应用程序可以自动再次连接到您的服务以请求新的一批通知。
*   您可以使广泛的范围可配置，因此用户可以更喜欢大量的通信或更广泛的范围。
*   根据用户的速度（例如，如果他在车里或步行），可以调整广泛的通知范围。

# c# - 在 linq 查询中设置和使用值

> ID：14318765
> 
> 赞同：1
> 
> 时间：2013-01-14T12:51:37.817
> 
> 标签：c#, .net, linq

我正在过滤`PropertyInfo`这样的列表：

```
foreach (PropertyInfo propertyInfo in 
            ClassUtils.GetProperties(patternType).
            Where(pi => pi.GetCustomAttribute<TemplateParamAttribute>() != null).
            OrderBy(pi1 => pi1.GetCustomAttribute<TemplateParamAttribute>().Order))
{
    TemplateParamAttribute attr = propertyInfo.GetCustomAttribute<TemplateParamAttribute>();
... 
```

这可以正常工作，但我对`GetCustomAttribute`每次迭代中的 3 次调用并不满意。有没有办法减少`GetCustomAttribute`调用次数（并且仍然使用 linq）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:55:44.587

> 有没有办法减少 GetCustomAttribute 调用的数量（并且仍然使用 linq）？

绝对 - 尽早进行投影。不过，为了可读性，我会在 foreach 循环*之前声明的查询中执行此操作：*

```
var query = from property in ClassUtils.GetProperties(patternType)
            let attribute = property.GetCustomAttribute<TemplateParamAttribute>()
            where attribute != null
            orderby attribute.Order
            select new { property, attribute };

foreach (var result in query)
{
    // Use result.attribute and result.property
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:55:20.520

您可以使用以下查询，它使用`let`声明匿名类型的关键字。

```
var select = from propertyInfo in typeof (ClassUtils).GetProperties(patternType)
             let attr = propertyInfo.GetCustomAttribute<TemplateParamAttribute>()
             where attr != null
             orderby attr.Order
             select propertyInfo;
foreach (var propertyInfo in select)
{
    //Operate
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:55:40.523

怎么样：

```
foreach(TemplateParamAttribute attr in
    ClassUtils.GetProperties(patternType).
        Select(pi => pi.GetCustomAttribute<TemplateParamAttribute()).
        Where(pa => pa != null).
        OrderBy(pa.Order))
 {
      // Use attr
 } 
```

如果您需要访问循环中的属性和属性，您可以这样做：

```
foreach(var info in
    ClassUtils.GetProperties(patternType).
        Select(pi => new {prop = pi, attr = pi.GetCustomAttribute<TemplateParamAttribute()}).
        Where(pia => pia.attr != null).
        OrderBy(pia.attr.Order))
 {
      // Use info.prop and info.attr
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T12:54:51.433

如果您没有使用任何其他东西而不是`GetCustomAttribute`您的`propertyInfo`对象：

```
foreach (TemplateParamAttribute attr in ClassUtils.GetProperties(patternType)
    .Select(pi => pi.GetCustomAttribute<TemplateParamAttribute>())
    .Where(a => a != null)
    .OrderBy(a => a.Order))
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T12:56:32.843

为避免多次`GetCustomAttribut`调用，您可以为查询引入新的范围变量`tpa`。此外，如果您只需要循环中的属性，则获取您的自定义属性并对其进行迭代：

```
var attributes = from pi in ClassUtils.GetProperties(patternType)
                 let tpa = pi.GetCustomAttribute<TemplateParamAttribute>()
                 where tpa != null 
                 orderby tpa.Order
                 select tpa;

foreach(TemplateParamAttribute attr in attributes)
{
    // ...
} 
```

# php - 如何将图像、视频和音频从数据库显示到网页作为输出？

> ID：14318767
> 
> 赞同：0
> 
> 时间：2013-01-14T12:51:50.140
> 
> 标签：php, jquery, html, database

我不知道这是可能的，但我正在使用它们的目录和文件名从我的数据库中输出图像、音频和视频文件。例如在数据库中：

```
Image:                    Audio:                           Video:

ImageFiles/tulips.png     AudioFiles/LadyintheNight.mp3    VideoFiles/training.mpeg 
```

以下是数据库中每个值存储和输出的变量：

```
echo $dbImage;
echo $dbAudio;
echo $dbVideo; 
```

所以输出很简单：

```
ImageFiles/tulips.png 
AudioFiles/LadyintheNight.mp3
VideoFiles/training.mpeg 
```

但我想用这些字符串做两件事：

*   如果我将每个值作为超链接回显，有没有办法可以单击其中一个链接并显示图像、播放音频的播放器或将视频放在单独页面中的播放器？

*   如果我`$dbImage`以图像标签值的形式回显，它会将 url 显示为图像。我的问题是如何显示音频或视频播放器，以便用户可以看到音频/视频并播放它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:54:09.020

我正在考虑像 JavaScript 那样为视频创建 iframe 的东西。这只是一个简单的例子，但它会给你一个想法。如果需要，您可以添加精美的灯箱效果，并且为了提高兼容性，最好使用至少 2 种类型的视频格式，mp4 和 ogv。

```
$('<div id="VideoBackground"></div>').appendTo('body').css({
    opacity: 0.6, 
    position: 'fixed',
    top: 0,
    left: 0,
    width: '100%',
    'z-index':'999',
    'background-color': '#CCCCCC',
    height: $(window).height() + 'px'}).hide();
$('<div id="UpperElement"><iframe id="VideoFrame" frameborder="0" scrolling="no" style="width: 320px; height: 240px;"></iframe></div>').appendTo('#VideoBackground');
$('#UpperElement').css({
    'z-index':'1000',
    'margin':'0 auto',
    'width': '320px',
    'height': '240px'
});

document.getElementById('VideoFrame').onload = function() {
    $('#VideoFrame').contents().find('body').append('<video width="320" height="240" controls><source src="http://www.808.dk/pics/video/gizmo.mp4" type="video/mp4"><source src="http://www.808.dk/pics/video/gizmo.ogv" type="video/ogg">Your browser does not support the video tag.</video>');
}

$('#VideoBackground').show();
$('#UpperElement').show(); 
```

# django - 带有预览和确认功能的 Django 表单

> ID：14318771
> 
> 赞同：1
> 
> 时间：2013-01-14T12:52:10.233
> 
> 标签：django, forms, validation, preview, confirmation

免责声明：我是 Django 的初学者。

我正在尝试创建一个应用程序，希望客户在提交之前预览并确认表单。我尝试使用内置的 Django FormPreview，但发现它不支持 File 字段，所以我把它扔掉了。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:21:14.843

一个概念想法是：

在您的模板中：

```
<input name='preview' type='submit' />
<input name='submit' type='submit' /> 
```

为了获取您的帖子：

```
form = YourFormName(request.POST)
if 'preview' in request.POST:
    # here you return the response you wish
    # the user to see when trying preview
    # for example form.is_valid()
    # could be nice to deal with
if 'submit' in request.POST:
    # normal form handling 
```

# java - 生成特定的数列

> ID：14318779
> 
> 赞同：1
> 
> 时间：2013-01-14T12:52:48.157
> 
> 标签：java, java, algorithm, layout, numbers, sequence

假设我有一个简单的 for 循环，其索引`i`从`0`to `n`。我希望能够循环`i`，每个循环按以下顺序生成两个数字：

```
i | a | b
=========
0 | 2 | 1
1 | 2 | 3
2 | 2 | 5
3 | 5 | 1
4 | 5 | 3
5 | 5 | 5
6 | 9 | 1
7 | 9 | 3
8 | 9 | 5
9 | 12| 1
10| 12| 3
11| 12| 5
12| 16| 1
   ... 
```

基本上，该算法是，因为`a`它从开始并依次`2`递增，而因为它总是经过，然后重新开始。`3``4``b``1``3``5`

我一直在尝试制作一些没有太多结果的东西。我更喜欢[java](/questions/tagged/java "显示标记为“java”的问题")的答案，但伪代码或任何非深奥的语言都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:04:40.097

```
class Main
{
    public static void main (String[] args)
    {
        for(int i = 0 ; i < 20 ; i++)
        {
            int a = (i / 6) * 7 + 2 + ((i / 3) & 1) * 3;
            int b = (i % 3) * 2 + 1;
            System.out.println(i + " | " + a + " | " + b);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:11:20.640

只是为了好玩，这就是在[clojure](/questions/tagged/clojure "显示标记为“clojure”的问题")中的做法：

```
(for [a (reductions + 2 (apply concat (repeat [3 4])))
      b [1 3 5]] 
   [a b]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:00:12.040

假设 n=20，我有以下解决方案：

```
public static void main(String[] args) {
    int i = 0;
    int n = 20;
    for (int a = 2; a <= n; a += 3) {
        for (int b = 1; b <= 5; b += 2) {
            System.out.println(i++ + " | " + a + " | " + b);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:01:55.230

在 C 中，可以如下这样更容易阅读和理解；

```
#include <stdio.h>

int main(void)
{
   int i = 0;
   int N = 10;
   int a = 2;
   int b = 1;
   int odd = 1;

   printf("i |a | b\n"); 
   for(;i<N;i++) {
    if(b == 5) {
       if(odd) {
        a += 3;
        odd = 0;
       }else{
         a+=4;
         odd = 1;
       }
      }
      b +=2;
     if(b >5) b = 1;
    printf("%d |%d | %d \n", i, a, b);

   }
   return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T13:10:06.637

```
for(int i = 0; i < n; i++){
    int a = ((i + 3) / 6) * 3 + ((i + 0) / 6) * 4 + 2;
    int b = i % 3 * 2 + 1;
    System.out.println(i++ + " | " + a + " | " + b);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T13:11:55.013

尝试（C 中的答案）

```
int increments[3] = {2, 3, 4};
for(i = 0; i < limit; i++){
    if((i/3) % 3 == 0) a += increments[(i/3) % 3];
    b = 2 * (i % 3) + 1;
} 
```

# php - 使用 php Exchange Web 服务回复电子邮件

> ID：14318780
> 
> 赞同：0
> 
> 时间：2013-01-14T12:52:49.267
> 
> 标签：php, email, exchange-server, exchangewebservices

我正在使用[php-ews](https://github.com/jamesiarmes/php-ews)访问 Exchange 电子邮件服务器。

我能够阅读用户收件箱中的所有电子邮件，但是，我无法回复特定电子邮件。我尝试用谷歌搜索寻求帮助，但找不到。

这是我的代码：

```
$ews        = new ExchangeWebServices('serveraddress', 'username', 'password', ExchangeWebServices::VERSION_2010_SP1);
$message_id = $conversationid;
$change_id  = $changekey;
// Build the request for the parts.
$request = new EWSType_GetItemType();
$request->ItemShape = new EWSType_ItemResponseShapeType();
$request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;
// You can get the body as HTML, text or "best".
$request->ItemShape->BodyType = EWSType_BodyTypeResponseType::HTML;

// Add the body property.
$body_property = new EWSType_PathToUnindexedFieldType();
$body_property->FieldURI = 'item:Body';
$request->ItemShape->AdditionalProperties = new EWSType_NonEmptyArrayOfPathsToElementType();
$request->ItemShape->AdditionalProperties->FieldURI = array($body_property);

$request->ItemIds = new EWSType_NonEmptyArrayOfBaseItemIdsType();
$request->ItemIds->ItemId = array();

// Add the message to the request.
$message_item = new EWSType_ItemIdType();
$message_item->Id = trim($message_id);
$request->ItemIds->ItemId[] = $message_item;
try
{
    $response = $ews->GetItem($request);
    //print '<pre>' . print_r($response, true) . '</pre><hr/>';
    $message = $response->ResponseMessages->GetItemResponseMessage->Items->Message;

    $data['conversationid'] = $message_id;
    $data['changekey'] = $change_id;
    $data['displayname'] = $message->Sender->Mailbox->Name;
    $data['mailfrom'] = $message->Sender->Mailbox->EmailAddress;

    $data['mailto'] = '';
    if (isset($message->ToRecipients))
    {
        $tempto = $message->ToRecipients->Mailbox;
        if (is_array($tempto))
        {
            foreach ($tempto as $key => $value)
            {
                $data['mailto'] .= $value->EmailAddress . ';';
            }
        }
        else
        {
            $data['mailto'] .= $message->ToRecipients->Mailbox->EmailAddress . ';';
        }
    }

    $data['mailcc'] = '';
    if (isset($message->CcRecipients))
    {
        $tempcc = $message->CcRecipients->Mailbox;
        if (is_array($tempcc))
        {
            foreach ($tempcc as $key => $value)
            {
                $data['mailcc'] .= $value->EmailAddress . ';';
            }
        }
        else
        {
            $data['mailcc'] .= $message->CcRecipients->Mailbox->EmailAddress . ';';
        }
    }

    $this->load->model('update_mail_model');
    $id = $this->update_mail_model->getnextid();

    $save_dir = 'emailattachments' . DIRECTORY_SEPARATOR . $id;

    if (!is_dir($save_dir))
    {
        mkdir($save_dir);
    }

    $attcount = 0;

    if ($response->ResponseMessages->GetItemResponseMessage->ResponseCode == 'NoError' && $response->ResponseMessages->GetItemResponseMessage->ResponseClass == 'Success')
    {
        $message = $response->ResponseMessages->GetItemResponseMessage->Items->Message;

        if (!empty($message->Attachments->FileAttachment))
        {
            // FileAttachment attribute can either be an array or
            // instance of stdClass...
            $attachments = array();
            if (is_array($message->Attachments->FileAttachment) === FALSE)
            {
                $attachments[] = $message->Attachments->FileAttachment;
            }
            else
            {
                $attachments = $message->Attachments->FileAttachment;
            }

            $attid = '';

            foreach ($attachments as $attachment)
            {
                $request = new EWSType_GetAttachmentType();
                $request->AttachmentIds->AttachmentId = $attachment->AttachmentId;
                $response = $ews->GetAttachment($request);

                // Assuming response was successful ...
                $attachments = $response->ResponseMessages->GetAttachmentResponseMessage->Attachments;
                $content = $attachments->FileAttachment->Content;
                $att['attachmentid'] = $attachments->FileAttachment->AttachmentId->Id;
                $att['attachment_name'] = $attachments->FileAttachment->Name;
                $att['contenttype'] = $attachments->FileAttachment->ContentType;
                $att['contentid'] = $attachments->FileAttachment->ContentId;
                $att['contenturl'] = $save_dir . DIRECTORY_SEPARATOR . $attachment->Name;
                $att['mailid'] = $id;
                //print '<pre>'.print_r($attachments,TRUE).'</pre>';

                //print $save_dir . DIRECTORY_SEPARATOR . $attachment
                //->Name;

                file_put_contents($save_dir . DIRECTORY_SEPARATOR . $attachment->Name, $content);
                $attid .= $this->update_mail_model->updateattachment($att) . ',';
                $attcount = $attcount + 1;
            }
        }
        else
        {
            //echo "No attachments found\n";
        }
    }

    $messageType = new EWSType_MessageType();
    $messageType->IsRead = true;

    $path = new EWSType_PathToUnindexedFieldType();
    $path->FieldURI = 'message:IsRead';

    $setField = new EWSType_SetItemFieldType();
    $setField->Message = $messageType;
    $setField->FieldURI = $path;

    $u = new EWSType_ItemChangeType();
    $u->Updates = new EWSType_NonEmptyArrayOfItemChangeDescriptionsType();
    $u->Updates->SetItemField[] = $setField;
    $u->ItemId = new EWSType_ItemIdType();
    $u->ItemId->Id = $message_id;
    $u->ItemId->ChangeKey = $change_id;

    $updatedItems = new EWSType_NonEmptyArrayOfItemChangesType();
    $updatedItems->ItemChange = $u;

    $updateMessenger = new EWSType_UpdateItemType();
    $updateMessenger->ItemChanges = $updatedItems;
    $updateMessenger->MessageDisposition = 'SaveOnly';
    $updateMessenger->ConflictResolution = 'AutoResolve';
    //print 'Trying Now...';
    try
    {
        $update_response = $ews->UpdateItem($updateMessenger);
    }
    catch (Exception $e)
    {
        print $e->getMessage();
    }

    $data['subject'] = $message->Subject;
    $data['mailbody'] = $message->Body->_;
    $data['mailtime'] = $message->DateTimeReceived;
    $data['mailtime'] = str_replace("T", " ", $data['mailtime']);
    $data['mailtime'] = str_replace("Z", "", $data['mailtime']);
    $data['account'] = $account_array['username'];
    $data['accountid'] = $account_array['accountid'];
    $data['assignedto'] = 'false';
    $data['attachments'] = $attcount;
    $data['attachment_ids'] = $attid;
    $this->load->model('update_mail_model');
    $mailid = $this->update_mail_model->update_default($data);
    print '<code>EMail with ID <strong>' . $mailid . '</strong> updated successfully. E-Mail from <strong>' . $data['mailfrom'] . '</strong></code><hr/>';
}
catch (Exception $e)
{
    print 'Error for Conv ID ' . $message_id . ':<br/>' . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T12:46:11.257

> **终于找到了关于如何使用 PHP-EWS 回复电子邮件的答案。**

首先，我们需要修改 EWSType/MessageType.php 并在关闭类之前在类的末尾添加以下行：

```
public $NewBodyContent; 
```

回复功能如下：

```
Public function replyToMessage($id,$changeKey)
    {
        $ews = new ExchangeWebServices($this->server_url, $this->username, $this->password, ExchangeWebServices::VERSION_2010_SP1);

        //$msg = new EWSType_ReplyAllToItemType();
        $msg = new EWSType_MessageType();

//In Case you need to add anyone in CC
        $cc = new EWSType_ArrayOfRecipientsType();
        $cc->Mailbox = new EWSType_EmailAddressType();
        $cc->Mailbox->EmailAddress = 'emailaddresshere';
        $cc->Mailbox->Name = 'displaynamehere';
        $msg->CcRecipients = $cc;

        $msg->ReferenceItemId = new EWSType_ItemIdType();
        $msg->ReferenceItemId->Id = $id;
        $msg->ReferenceItemId->ChangeKey = $changeKey;

        $msg->NewBodyContent = new EWSType_BodyType();
        $msg->NewBodyContent->BodyType = 'HTML';
        $msg->NewBodyContent->_ = 'HTML Content Goes Here';

        $msgRequest = new EWSType_CreateItemType();
        $msgRequest->Items = new EWSType_NonEmptyArrayOfAllItemsType();
        $msgRequest->Items->ReplyAllToItem = $msg;
        $msgRequest->MessageDisposition = 'SendAndSaveCopy';
        $msgRequest->MessageDispositionSpecified = TRUE;

        $response = $ews->CreateItem($msgRequest);

        return $response->ResponseMessages->CreateItemResponseMessage->ResponseCode;

    } 
```

这将向指定的 ID 和 ChangeKey 发送回复

# qt - 带分页符的 QTextEdit

> ID：14318783
> 
> 赞同：0
> 
> 时间：2013-01-14T12:53:03.770
> 
> 标签：qt, text, qtextedit, page-break, qtextdocument

我需要打破页面而不是在 QTextEdit 中滚动富文本内容。

我试图用 QTextCursor 和 QFontmetrics 做到这一点，但准确性不够好。

有人可以帮助我吗？

提前致谢 ！！！！

ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:40:51.867

您可以使用简单的水平布局、滚动区域和更多文本编辑器来模拟它...当达到所需的文本行时添加一个新的文本编辑器..

# javascript - 通过单击链接添加新的下拉菜单框

> ID：14318787
> 
> 赞同：2
> 
> 时间：2013-01-14T12:53:15.910
> 
> 标签：javascript, html, drop-down-menu

下面是一个添加新下拉菜单框的 javascript 函数。它可以工作，但是当我`name`在选择名称和`value`选项值中输入一个时，它将不起作用。

```
function add() {
  var ni = document.getElementById('myDiv');
  var numi = document.getElementById('theValue');
  var num = (document.getElementById('theValue').value -1)+ 2;
  numi.value = num;
  var newdiv = document.createElement('div');
  var divIdName = 'my'+num+'Div';
  newdiv.setAttribute('id',divIdName);
  newdiv.innerHTML = "<select> <option> Apple </option> <option> Orange </option> </select>";  
} 
```

问题可能是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:56:11.253

如果使用双引号定义该字符串，则需要转义 innerHTML 字符串中的双引号：

```
newdiv.innerHTML = "<select name=\"name\"> <option value=\"value\"> Apple </option> <option> Orange </option> </select>"; 
```

或者，使用单引号来定义字符串，或 HTML 属性值（尽管 HTML 属性的标准是双引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:47:03.673

您还需要将元素放置/附加到正文。这是您需要在函数中添加的内容：

```
document.body.appendChild(newdiv); 
```

检查[输出/使用情况](http://jsfiddle.net/dWp3b/embedded/result/)。

# java - 从字符串中形成一系列值

> ID：14318789
> 
> 赞同：-3
> 
> 时间：2013-01-14T12:53:18.933
> 
> 标签：java

我需要遍历矩阵结构中的每个元素。例如，

```
SeatingType Model Back  Mech 
1              6   120   58
               7   121   59
               8 
```

在 java 中，值将以逗号分隔值中的字符串形式作为参数出现，例如 SeatingTpe (1)、Model (6,7,8) 等。

我需要得到结果

```
1,6,120,58
1,6,120,59
1,6,121,58
1,6,121,59
1,7,120,58
1,7,120,59
1,7,121,58
1,7,121,59
1,8,120,58
1,8,120,59
1,8,121,58
1,8,121,59 
```

请注意，Model、Back 和 Mech 可能为 null。因此，如果 Model 值为 null，则输出应为 1、6、58 和 1、6、59，依此类推。任何帮助请

作为一个开端，我尝试从最后一个元素循环（在本例中为“Mech”）>但这非常乏味。还有其他方法吗？我在这里只提供了 4 个属性。但是reqmnt 是针对11 个属性的。我希望如果我能得到 4 个属性的解决方案，那可以应用于休息 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:14:59.893

遍历 4 个循环：

```
List<String> seatTypeValues = ...
List<String> modelValues = ...
List<String> backValues = ...
List<String> mechValues = ...

if (seatTypeValues.isEmpty()) { seatTypeValues.add(null); }
... // all 4 lists

for(String seatType : seatTypeValues) {
  for(String model : modelValues) {
    for(String back : backValues) {
      for(String mech : mechValues) {
        // print the CSV
        if (seatType != null) {
          writer.write(seatType);
        }
        if (model != null) {
          writer.write(',');
          writer.write(model);
        }
        if (back != null) {
          writer.write(',');
          writer.write(back);
        }
        if (mech != null) {
          writer.write(',');
          writer.write(mech);
        }
        writer.write("\r\n");
      }
    }
  }
} 
```

# extjs - ExtJS 4.1：另一种为生产加载 ExtJS 应用程序的方法

> ID：14318793
> 
> 赞同：1
> 
> 时间：2013-01-14T12:53:35.813
> 
> 标签：extjs, loading, production

我想知道是否可以包含我们需要的所有组件，例如 JAVA 导入，而不在索引文件中包含 ext-all.js。我的问题是，即使 ext-all.js 被缩小，我的应用程序仍然加载缓慢（生产模式），我认为我没有使用此文件中的所有功能。

所以，如果有人知道如何做到这一点，它将对我和我的应用程序非常有用！:)

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:00:08.173

你试过 Sencha Cmd 吗？

该工具可以在您的应用程序中搜索所需的类（您自己的和 ExtJS 的）并将它们合并到一个文件中。

从来没有让这个工具工作，但如果你使用 ExtJS 的 MVC，它应该适合你。

[http://www.sencha.com/blog/all-new-sencha-cmd](http://www.sencha.com/blog/all-new-sencha-cmd)

# javascript - 用 jquery 函数替换 document.getElementById？

> ID：14318794
> 
> 赞同：1
> 
> 时间：2013-01-14T12:53:43.067
> 
> 标签：javascript, jquery, html

我有这个代码片段：

```
$('#selector1,#selector2').change(function(){
    checkDate(document.getElementById($(this).attr("id")));
}); 
```

以上工作正常，但我想使用 jQuery`$`而不是`document.getElementById`. 所以，我尝试了这个，但它给了我一个 javascript 错误：`TypeError: valueToTest is undefined`

```
$('#selector1,#selector2').change(function(){
    checkDate($("#" + $(this).attr("id")));
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T12:57:55.580

您将 jQuery 对象作为参数传递给`checkDate()`而不是 DOM 元素，以获取 DOM 元素，您可以这样做：

```
$('#selector1,#selector2').change(function(){
    checkDate(this);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T13:01:41.450

当您调用时，`document.getElementById('id')`您将获得对 DOM 节点本身的引用，而调用`$('#id')`将返回一个 jQuery 对象，该对象具有对匹配选择器的 DOM 节点的引用（如果存在具有给定 id 的元素）。使用前者，您可以直接访问其属性（`this.id`、`this.value`等），而使用后者您需要使用 jQuery 函数（`.prop()`、`.val()`等）。

如果您想传递一个 jQuery 对象，您可能还需要对您的`checkDate`函数进行更改以避免在您直接访问属性时出现错误，并且这些属性不再存在于 jQuery 对象上。

话虽如此，这一行：

```
checkDate(document.getElementById($(this).attr("id"))); 
```

远比它需要的复杂。您已经获得了对该元素的引用`this`——因此访问它`id`并将其传递给它`document.getElementById()`以获得对它的另一个引用是没有意义的。你可以简单地做：

```
checkDate(this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:48:46.267

您的代码片段：

```
document.getElementById($(this).attr("id")) 
```

上面的代码返回一个 HTML `DOM Object`。如果你使用`$(this);`你不会得到`DOM Object`但是一个`jQuery object`. 所以，你需要修改它，`$(this)[0]`或者只是`this`为了让`DOM Object`你的代码可以正常工作。

**代码：**

```
$('#selector1,#selector2').change(function(){
    checkDate($(this)[0]);
}); 
```

或者

```
$('#selector1,#selector2').change(function(){
    checkDate(this);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T17:20:01.823

document.getElementById 检索一个（一个）DOM 节点，而 jQuery 返回一个实际上是 DOM 节点数组的 jQuery 对象。因此，要替换

```
var element = document.getElementById($(this).attr("id")); 
```

使用 jquery，执行此操作

```
var element = $($(this).attr("id"))[0];
// or
var element = $($(this).attr("id")).get(0); 
```

# installation - Installshield 不安装 prerqe（框架 3.5）

> ID：14318795
> 
> 赞同：0
> 
> 时间：2013-01-14T12:53:44.120
> 
> 标签：installation, installshield

我正在使用 Framework 3.5 开发一个应用程序。我希望 Installshield 检查是否已经安装了 Framework 3.5。如果没有安装，我希望它从互联网上下载然后安装。

在我的 App Data -> Redistributables 上，我有 Microsoft Framework 3.5 SP1 作为 Installshield Prerqe。它是“本地安装”并构建位置“从源媒体复制”。

我有安装所需的 Framework 3.5。

在 Windows XP 上，它运行良好。如果需要，它会要求用户安装 Framework 3.5。

在 Windows 7、8、2008 上：即使未安装 Framework 3.5。它不会要求用户下载/安装它。它只会提示他们安装无法继续，因为没有安装 3.5。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:18:21.627

提供的 prereq 仅在 Win 7 之前有效。从 Win7 开始，.NET 3.5 作为 windows 组件包含，不能使用 prereq 安装。您必须使用 DISM 命令来安装该功能。从 Win8 开始，.NET 3.5 位不会缓存在 Windows 安装媒体中，它需要 Internet 连接才能在 DISM 命令期间从 Windows 更新下载。

是的。我也不喜欢。从部署的角度来看，最简单的做法是在已安装 .NET 3.5 或 4.0 的情况下允许安装，并测试您的应用程序以确保它可以在 CLR 2.0 和 4.0 上运行。

# regex - 在小于号前匹配任何数字、单词字符或空格 46 次或更多次

> ID：14318804
> 
> 赞同：3
> 
> 时间：2013-01-14T12:54:02.590
> 
> 标签：regex, notepad++

## 客观的

我想在符号前匹配任何数字、单词字符或空格**46 次或更多次**`<`。

**一个注意事项**是，在将其插入 C# 代码之前，我正在尝试在 Notepad++ 中使用此 RegEx。

## 数据

```
<Elem1>123 ABC Street</Elem1> // should NOT match
<Elem1>123637 ABC Street Suite 1, Kalamzoo, FL 15264-8574</Elem1> 
```

## 正则表达式

我目前有以下正则表达式：

```
^.*<Elem1>[\d\w\s]{46,}? 
```

而且我无法弄清楚为什么这`[\d\w\s]{46,}?`与元素的内部部分不匹配。

我期待着您的回答！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T12:57:44.447

它不匹配，因为输入包含逗号和连字符，它们不属于您包含的三个字符类中的任何一个。

这将匹配：

```
^.*<Elem1>[\d\w\s,-]{46,}? 
```

`<Elem1>`此外，如果正则表达式在多行模式下运行，则仅包含输入锚的开头然后继续说“哦，忽略您在“之前找到的任何字符”才有意义。否则，只需

```
<Elem1>[\d\w\s,-]{46,}? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T12:56:36.383

使用这个正则表达式`<Elem1>[\w\s]{46,}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T13:03:30.800

反斜杠组仅包含数字、单词字符和空格，因此不包括逗号和破折号（如您的示例）。此外，如果您真的想匹配标签之间的*所有内容*`?`，您应该删除它以使其变得贪婪，并且也可以添加结束标签。然后，您可以使用捕获组来获取内部内容：（[示例](http://regexr.com?33d62)）

```
^.*<Elem1>([\d\w\s,-]{46,})</ 
```

或者，如果您想确保也捕获其他字符，您可以只接受`<`标签内符号以外的任何字符：

```
^.*<Elem1>([^<]{46,})</ 
```

# delphi - 在 OnShow 事件之后自动启动操作的最佳方式是什么？

> ID：14318807
> 
> 赞同：14
> 
> 时间：2013-01-14T12:54:11.960
> 
> 标签：delphi, delphi-2007

我有一个小应用程序，大部分时间在开始按钮后面都有一个动作，应该从命令行参数 /AUTORUN 触发。如果缺少该参数，用户也可以手动按下它。

我的问题是我应该在哪里放置这个命令行检查，这样当它被给定时，GUI 仍然会更新。当前的解决方案是这样，但在操作完成之前不会更新 GUI。

```
procedure TfrmMainForm.FormShow(Sender: TObject);
begin
  if FindCmdLineSwitch('AUTORUN') then
    btnStart.Click;
end; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-14T13:20:53.057

`OnShow`从您的事件处理程序中向自己发布一条消息。一旦您的应用程序开始为其消息队列提供服务，这将被处理。这只发生在应用程序准备好接收输入时。这符合你我对你的要求的理解。

```
const
  WM_STARTUP = WM_USER;
....
procedure TfrmMainForm.FormShow(Sender: TObject);
begin
  PostMessage(Handle, WM_STARTUP, 0, 0);
  OnShow := nil;//only ever post the message once
end; 
```

添加消息处理程序来处理消息：

```
procedure WMStartup(var Msg: TMessage); message WM_STARTUP; 
```

你会这样实现：

```
procedure TfrmMainForm.WMStartup(var Msg: TMessage);
begin
  inherited;
  if FindCmdLineSwitch('AUTORUN') then
    btnStart.Click;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T13:22:47.293

在 FormShow 中给自己留言。在消息处理程序中运行您的 btnStart。

```
TfrmMainForm = class(TForm)
// snip
private
  procedure AutoStart(var Message: TMessage); message wm_user;
// snip
end

procedure TfrmMainForm.FormShow(Sender: TObject);
begin
  if FindCmdLineSwitch('AUTORUN') then
    PostMessage(Handle, wm_user, 0, 0);
end;

procedure TfrmMainForm.AutoStart(var Message: TMessage);
begin
  btnStart.Click;
end; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T12:58:40.780

一种简单的方法是使用计时器，其事件如下：

```
begin
  Timer1.Enabled := False;
  if FindCmdLineSwitch('AUTORUN') then
    btnStart.Click;
end; 
```

以及几千毫秒的间隔。

# php - 如何通过 Symfony 安全性在 login_path / login_check 上使用路由参数

> ID：14318809
> 
> 赞同：0
> 
> 时间：2013-01-14T12:54:17.247
> 
> 标签：php, security, authentication, symfony

我有一个使用 Silex 的项目，而且我真的是这个 symfony 框架的新人。Silex 带有安全插件，我相信它与 symfony 库相同。那么问题是我需要在 login_path 防火墙配置上使用一些路由参数，如下例所示

我这样设置我的路由，cname 将是路由变量，我试图用secured_area 模式中的cname 变量替换{cname}，

```
 $app->match('/{cname}/dashboard/users','Dashboard\Controller\DashboardController::userAction')->method('GET|POST')->bind('dashboard_users'); 
```

这个想法是用路由变量替换“{cname}”。

```
$app->register(new Silex\Provider\SecurityServiceProvider());

$app['security.firewalls'] = array(
                                'secured_area' => array(
                                    'pattern' => '^/(\w+)/dashboard/',
                                    'form' => array('login_path' => '/{cname}/login', 
                                                    'check_path' => '/{cname}/dashboard/login_check',
                                                     'default_target_path' => '/{cname}/dashboard/home'
                                                    ),
                                    'users' => $app->share(function () use ($app) {
                                                    return new Dashboard\Service\UserProvider($app['db']);
                                                }),

                                    'logout' => array('logout_path' => '/{cname}/dashboard/logout',
                                                      'target' => '/'),

                                ),
                            ); 
```

我已经尝试过了，但它不起作用，然后我在 4 个核心文件中放了一些代码补丁 AbstractAuthenticationListener、FormAuthenticationEntryPoint、DefaultAuthenticationSuccessHandler、LogoutListener 所以我放了几行代码只是为了替换某些方法中的“{cname}”班级，

```
 on AbstractAuthenticationListener class,
     protected function requiresAuthentication(Request $request)
        {
            /* PATCH */
            if($route_params = $request->attributes->get("_route_params")){
                foreach($route_params as $key => $val){
                   $this->options['check_path'] = str_replace("{".$key."}", $val, $this->options['check_path']);
                }
            }
            /**/
            return $this->httpUtils->checkRequestPath($request, $this->options['check_path']);
        }

    On FormAuthenticationEntryPoint Class
    public function start(Request $request, AuthenticationException $authException = null)
        {
            /* PATCH */
            if($route_params = $request->attributes->get("_route_params")){
                foreach($route_params as $key => $val){
                   $this->loginPath = str_replace("{".$key."}", $val, $this->loginPath);
                }
            }
            /**/

            if ($this->useForward) {
                $subRequest = $this->httpUtils->createRequest($request, $this->loginPath);

                return $this->httpKernel->handle($subRequest, HttpKernelInterface::SUB_REQUEST);
            }

            return $this->httpUtils->createRedirectResponse($request, $this->loginPath);
        }

    On DefaultAuthenticationSuccessHandler
    protected function determineTargetUrl(Request $request)
        {
            /* PATCH */
            if($route_params = $request->attributes->get("_route_params")){
                foreach($route_params as $key => $val){
                   $this->options['default_target_path'] = str_replace("{".$key."}", $val, $this->options['default_target_path']);
                   $this->options['login_path'] = str_replace("{".$key."}", $val, $this->options['login_path']);
                }
            }
            /**/

            if ($this->options['always_use_default_target_path']) {
                return $this->options['default_target_path'];
            }

            if ($targetUrl = $request->get($this->options['target_path_parameter'], null, true)) {
                return $targetUrl;
            }

            if (null !== $this->providerKey && $targetUrl = $request->getSession()->get('_security.'.$this->providerKey.'.target_path')) {
                $request->getSession()->remove('_security.'.$this->providerKey.'.target_path');

                return $targetUrl;
            }

            if ($this->options['use_referer'] && ($targetUrl = $request->headers->get('Referer')) && $targetUrl !== $this->httpUtils->generateUri($request, $this->options['login_path'])) {
                return $targetUrl;
            }

            return $this->options['default_target_path'];
        }

on LogoutListener
protected function requiresLogout(Request $request)
    {
        /* PATCH */
        if($route_params = $request->attributes->get("_route_params")){
            foreach($route_params as $key => $val){
               $this->options['logout_path'] = str_replace("{".$key."}", $val, $this->options['logout_path']);
            }
        }
        /**/

        return $this->httpUtils->checkRequestPath($request, $this->options['logout_path']);
    } 
```

我知道这不是正确的做法。如果有任何适当的方法可以做到这一点，我真的很期待它，thx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:47:15.123

如果像这样修改代码有效，您可能只想扩展修改后的类。`Silex\Application`是 的一个实例`\Pimple`，一个服务容器，它允许您动态地重新定义或扩展现有服务。我自己没有尝试过，但是您很可能能够替换防火墙的入口点（以及您更改的其他类）。

# hibernate - 休眠的 Junit 测试用例

> ID：14318812
> 
> 赞同：1
> 
> 时间：2013-01-14T12:54:39.810
> 
> 标签：hibernate, struts2, junit4, testcase

我已经开发了一个 web 项目（struts2+hibernate），我需要对其进行代码覆盖。我不知道如何为这个 Hibernate 部分编写 junit 测试用例。任何人都可以建议我的想法。我希望我的测试用例检查我的数据库，如果我提供了不在数据库中的输入，它应该通过错误。我使用eclipse-indigo，Mysql数据库提前谢谢

```
 package proj.dao.impl;
    import java.util.List; 
    import org.hibernate.Session;
    import org.hibernate.Transaction;
    import com.googlecode.s2hibernate.struts2.plugin.annotations.SessionTarget;
    import com.googlecode.s2hibernate.struts2.plugin.annotations.TransactionTarget;
    import proj.dao.EmployeeDAO;
    import proj.model.Employee;

    public class EmployeeDAOImp  implements EmployeeDAO{

        @SessionTarget
        Session session;

        @TransactionTarget
        Transaction transaction; 

        //return all the Employees in list
        public List<Employee> listEmployee(){

            return session.createQuery("from Employee").list();

        }

    } 
```

EmployeeDAOImplTest.java

```
package proj.Test;
import static org.junit.Assert.*;
import org.junit.Test;
import proj.dao.EmployeeDAO;
import proj.dao.impl.EmployeeDAOImp;
public class EmployeeDAOImplTest {
    @Test
    public void testListEmployee() {
        EmployeeDAO dbo = new EmployeeDAOImp();
        assertTrue("There were no errors in Register", dbo.listEmployee().size()!=0);

    }

} 
```

仅此单独的测试用例

指向该 DAOImpl 类中的实际 listemployee 方法的空指针异常

# javascript - 导航视图 Sencha Touch 2

> ID：14318814
> 
> 赞同：3
> 
> 时间：2013-01-14T12:54:44.617
> 
> 标签：javascript, sencha-touch-2

我在 Sencha Touch 2 中的 NavigationView 出现问题。当我按下“返回”按钮时，我无法浏览多个窗口。

我使用 view.push() 和 view.pop() 进行导航。

视图.js：

```
Ext.define('MyApp.view.view', {
extend: 'Ext.navigation.View',
alias: 'widget.View',

config: {
    id: 'nvView',
    items: [
        {
            xtype: 'toolbar',
            docked: 'bottom',
            layout: {
                align: 'center',
                pack: 'center',
                type: 'hbox'
            },
            items: [
                {
                    xtype: 'button',
                    iconAlign: 'center',
                    iconCls: 'info',
                    iconMask: true,
                    text: 'Ayuda'
                },
                {
                    xtype: 'button',
                    iconAlign: 'center',
                    iconCls: 'compose',
                    iconMask: true,
                    text: 'Guardar'
                },
                {
                    xtype: 'button',
                    id: 'volver',
                    iconAlign: 'center',
                    iconCls: 'reply',
                    iconMask: true,
                    text: 'Volver'
                }
            ]
        },
        {
            xtype: 'formpanel',
            title: 'View',
            html: 'View1',
            id: 'View1',
            styleHtmlContent: true,
            items: [
                {
                    xtype: 'button',
                    docked: 'bottom',
                    id: 'bView1',
                    margin: 10,
                    ui: 'forward',
                    text: 'siguiente'
                }
            ]
        }
    ]
}
}); 
```

view2.js：

```
Ext.define('MyApp.view.View2', {
extend: 'Ext.form.Panel',
alias: 'widget.View2',

config: {
    fullscreen: true,
    html: 'View2',
    id: 'View2',
    styleHtmlContent: true,
    items: [
        {
            xtype: 'button',
            docked: 'bottom',
            id: 'bView2',
            margin: 10,
            ui: 'forward',
            text: 'siguiente'
        }
    ]
}
}); 
```

view3.js：

```
Ext.define('MyApp.view.View3', {
extend: 'Ext.form.Panel',
alias: 'widget.View3',

config: {
    fullscreen: true,
    html: 'View3',
    id: 'View3',
    styleHtmlContent: true,
    items: [
        {
            xtype: 'button',
            docked: 'bottom',
            id: 'bView3',
            margin: 10,
            ui: 'forward',
            text: 'siguiente'
        }
    ]
}
}); 
```

ViewController.js：

```
Ext.define('MyApp.controller.ViewController', {
extend: 'Ext.app.Controller',

config: {
    views: [
        'View'
    ],

    refs: {
        bView1: 'bView1',
        bView2: 'bView2'
    },

    control: {
        "#bView1": {
            tap: 'onView1'
        },
        "#bView2": {
            tap: 'onView2'
        }
    }
},

onView1: function(button, e, options) {
    button.up('navigationview').push({
        xtype: 'View2',
        title: 'View2'
    });
},

onView2: function(button, e, options) {
    button.up('navigationview').push({
        xtype: 'View3',
        title: 'View3'
    });
}
}); 
```

我的问题的一个例子是：我从 view1 开始，然后按下按钮“siguiente”，然后转到 view2。如果我按下“返回”按钮（在导航视图中），我会进入 view1，然后按下按钮“siguiente”并进入 view2，但在 view2 中，我按下按钮“siguiente”我无法进入 view3。

非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:23:19.597

这是因为您使用`id`，所以当您第二次启动它时，它会发生冲突，显示警告并且功能无法正常工作。如果您使用`itemId`.

```
itemId: 'bView1' //same for other view bView2, bView3 
```

要引用您的`itemId`in 控制器，只需执行以下操作：

```
refs: {
    bView1: '[itemId=bView1]',
    bhView2: '[itemId=bView2]',
    bhView3: '[itemId=bView3]'
},

control: {
     bView1: {
         tap: 'onView1'
     },
     bhView2: {
         tap: 'onView2'
     },
},

onView1: function(button, e, options) {
    button.up('navigationview').push({
        xtype: 'View2',
        title: 'View2'
    });
},

onView2: function(button, e, options) {
    button.up('navigationview').push({
        xtype: 'View3',
        title: 'View3'
    });
} 
```

希望能帮助到你 ：）

# jquery - 我的 javascript 无法正常工作

> ID：14318816
> 
> 赞同：0
> 
> 时间：2013-01-14T12:54:53.740
> 
> 标签：jquery, html, json

我正在尝试在 HTML 中创建一个网站，该网站使用 javascript 接收 JSON 格式的数据，然后它将将该数据注入我的网站。

问题是我找不到任何错误。我使用了这个[示例代码](http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/)。将数据从我的网络服务器获取到我的 HTML 中。我使用上面链接的示例建立了与我的数据库的连接。但是后来我想把现有的代码[移到这里](http://tympanus.net/codrops/2012/05/07/experimental-page-layout-inspired-by-flipboard/)的这个例子中。

在上面的示例中，我链接了我的 javascript 文件，该文件获取数据并使用 a 创建一个 div，与获取数据的 javascript 文件中分配`id`的相同。`id`但它根本行不通。在`div`那个将充满数据的地方，只是空的。

获取.js

```
$(document).ready(function(){
    var output = $('#output');

    $.ajax({
        url: 'http://samcroft.co.uk/demos/updated-load-data-into-phonegap/landmarks.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){ 
                var landmark = '<h1>'+item.name+'</h1>'
                + '<p>'+item.latitude+'<br>'
                + item.longitude+'</p>';

                output.append(landmark);
            });
        },
        error: function(){
            output.text('There was an error loading the data.')
        }
    });
}); 
```

这是一个现场演示，代码在网络服务器上在线时正在加载。但不是在本地时。这是什么原因造成的？

[http://codele.se/app/flip/debatt.html](http://codele.se/app/flip/debatt.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:38:11.743

由于增加了安全规则，混合文件和 http 是不好的。我有一种感觉，这就是问题所在。您可以启动 chrome，因此它对安全规则的要求不那么严格。

尝试

```
chrome.exe -–allow-file-access-from-files 
```

或者

```
chrome.exe --disable-web-security 
```

或信息亭模式

```
chrome.exe  --enable-kiosk-mode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:46:26.683

在您的网站上使用 firebug 时，我发现您的 html 包含更新的数据，如下所示：

![代码](../Images/556016312f79b76ea180a4a4c2239748.png)

问题是您使用的背景图像在从您的站点中删除这行代码时将其隐藏：

```
<div style="z-index: 3; left: 512px; transform: rotateY(0deg);" class="page cover"> 
```

我得到这个输出：

![输出](../Images/23c198247e28d298b5b7144af88aca12.png)

仔细一看，我发现您在 html 中有两个具有相同 ID 输出的 div，因此请确保只有一个 div 具有`output`id bcoz ID 在 html 中应该是唯一的。

![错误](../Images/80dfe3cae4903c8838f675b26dbc83ab.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:14:05.853

如果此代码对您无法正常工作，则一定有其他事情发生。根据[这个 JSFiddle](http://jsfiddle.net/Yw3J4/)，代码可以正常工作。

检查以确保您的`output`HTML 中有一个 id 为 的 div，并且您实际上`fetch.js`在页面上包含了该脚本。检查浏览器开发工具的 JS 控制台是否有其他错误。

编辑：您的 CSS 图像放置和`h1`标签属性导致数据无法正确显示。如果我在您的 CSS 中更改为`h1`，`h2`标题（例如“Big Ben”）会正确显示。但是，由于您的 div 没有滚动`output`，并且图像 div`img-cont img-1`和 div`front`覆盖了您的一部分，您`output`将永远看不到整个文本。

这是 CSS/布局问题，而不是 Javascript 问题。修复你的 CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:28:37.987

您正在尝试实现 JSONP，这是一种从不同域中的服务器请求数据的方法。应该告诉您的数据源（通常是 web 服务）用围绕它的函数调用来包装它的响应。如果您的数据源没有包装响应，那么如果部署到实时环境，您的客户端将无法接收响应，尽管它在本地工作。

如果您有控制权或可以修改数据源函数，则可以执行以下操作。（如果不是，则不可能实现 JSONP）。我的示例中的数据源是 REST 服务。

//数据源（REST服务）

```
 [WebGet(UriTemplate = "getdata?callback={callback}&testParam1={p1}&testParam2={p2}")]
    public void GetData(string testParam1, string testParam2, string callback)
    {
        //Callback method is one of the parameters
        WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";
        var data = _db.GetRecords(testParam1, testParam2);
        //wrap the response 
        HttpContext.Current.Response.Write(string.Format("{0}( {{ result:\"{1}\"}} )", callback, data));
    } 
```

//客户端实现

```
function GetMainMarket(holder, template, testParam1, testParam2) {
$.ajax({
    type: 'GET',
    url: 'http://localhost:2520/DataServices/getdata',
    data: { testParam1: 'test1', testParam2: 'test2' },
    dataType: 'jsonp',
    success: function (data) {
        eval(data.result);
        var output = $(template).parseTemplate(json);
        $('#' + holder).html(output);
    }
}); 
```

};

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T13:05:13.583

尝试使用[Firebug](http://getfirebug.com/)（或其他浏览器开发工具）并在 Firebug 控制台中检查从服务器接收到的错误和数据。

编辑：好的。您发布了您的 JS 代码。您的代码看起来不错。接收来自服务器的数据。如果你在运行这个之后什么也没看到。可能您的 HTML 格式不正确。您的页面中是 div 元素还是其他 id="output" 的元素？

# ios - 从 UIPanGestureRecognizer 获取向量

> ID：14318820
> 
> 赞同：3
> 
> 时间：2013-01-14T12:55:12.913
> 
> 标签：ios, objective-c, cocoa-touch, uigesturerecognizer, uipangesturerecognizer

我试图`vector`从 a 中获取 a `UIPanGestureRecognizer`，关于屏幕的轴 in `Portrait Orientation`。我知道我可以获得速度，这是战斗的一半，但理想情况下，我想要一种获得关于屏幕垂直轴的角度（罗盘度或弧度）的方法。例如，从左下角到右上角的拖动是 45 度角，从上到下是 180 度，或者从下到上是 0（或 360）。

这可能吗？它没有方向属性，文档中对翻译的解释有点混乱。我是否需要手动创建一个中心点（关于我的视图中心），并将起点/终点与该点进行比较`Pan Touch`？我有点不确定需要的数学。

提前致谢！^_^

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:14:49.690

如果你能得到速度：

```
CGPoint velocity = [recognizer velocityInView:self.view] 
```

然后您可以计算相对于 x 轴的角度：

```
float x = velocity.x;
float y = velocity.y;

double angle = atan2(y, x) * 180.0f / 3.14159f;
if (angle < 0) angle += 360.0f; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T11:07:20.010

```
CGPoint startLocation = [sender locationInView:self.view];
if (sender.state == UIGestureRecognizerStateBegan) {
     startLocation = [sender locationInView:self.view];
}
else if (sender.state == UIGestureRecognizerStateEnded) {
     CGPoint stopLocation = [sender locationInView:self.view];
     CGFloat dx = stopLocation.x - startLocation.x;
     CGFloat dy = stopLocation.y - startLocation.y;

     double angle = atan2(dy, dx) * 180.0f / M_PI;
     if (angle < 0) angle += 360.0f;
     NSLog(@"angle: %f",angle);
} 
```

# java - 如何在netbeans中使用servlet和jsp根据第一个下拉列表中的类别选择在下拉列表中显示相关子类别？

> ID：14318828
> 
> 赞同：1
> 
> 时间：2013-01-14T12:55:47.417
> 
> 标签：java, jsp, servlets, netbeans

我正在使用 netbeans 和 mysql 在 java 中制作一个 Web 应用程序。数据库“Categroy”和“SubCat”中有两个表。并且有实体类和会话 bean 可以从数据库中提取数据。jsp 表单中有两个下拉列表。我希望当在第一个下拉列表中选择一个类别时，它的类别 ID 在 servlet 中消失了，从那里，只有相关子类别的列表显示在第二个下拉列表中。我怎么能得到那个？

我的 JSP 代码如下

```
 <form action="<c:url value='submit_site'/>" method="POST">
    <table border="0">
        <tbody>
               <tr>
                <td><label for="cat">Category</label></td>
                <td> 
                    <select name="category">

                        <c:forEach var="cat" items="${categories}">
                            <option name="catId" value="${category.id}">${cat.id}. ${cat.catName}</option>
                        </c:forEach>
                    </select> 
                </td>
            </tr>   
            <tr>
                <td><label for="SuCat">SubCategory</label></td>
                <td>
                    <select name="subcat">
                        <option>Select...</option>
                        <c:forEach var="subcat" items="${subCategories}">
                            <option name="subId" value="${subcat.subId}">${subcat.subCatName}</option>
                        </c:forEach>
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" 
                           value="Submit"/>
                </td>
                <td colspan="2">
                    <input type="reset" 
                           value="Reset" />
                </td>

            </tr>
        </tbody>
    </table>

</form> 
```

数据库中的所有类别都显示在第一个下拉列表中，但从第一个下拉列表中，所选类别的 id 未进入 servlet，并且子类别未显示在第二个下拉列表中。如何在第二个下拉列表中获取相关子类别？请指导我，我从两个星期开始就坚持这一点。

我在网上搜索过，但无法解决我的困惑。下拉列表中有 javascript，但我无法理解这些脚本。我可以在不使用 javascript cod 的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:12:36.650

好吧，我认为您将无法摆脱 javascript :-)。您可以使用按钮进行完整提交。加载第二个组合，用户选择第二个组合。这将是一个非常奇怪的用户体验:-)。

您的问题可以通过两种方式解决：

*   一个javascript整页提交
*   AJAX 调用

AJAX 调用更可取且对用户更友好。完整提交更容易实现，但页面会闪烁并重新加载内容。

可以在组合框中选择选项时使用提交来完成完整提交（如果文档中只有一个表单）：

```
<select name="subcat" onchange="document.forms[0].submit()">
  <option>Select...</option>
  <c:forEach var="subcat" items="${subCategories}">
    <option name="subId" value="${subcat.subId}">${subcat.subCatName}</option>
  </c:forEach>
</select> 
```

对于 AJAX 调用，您可以使用 XmlHttpObject 自己实现它，但这是在重新发明轮子；坚持使用像 jquery 这样的 JS 框架。

* * *

**更新：**对不起，我以错误的顺序发布了链接。[这](https://stackoverflow.com/questions/4423693/jquery-ajax-with-servlet)是使用带有 servlet 的 jquery 的示例。基本上，您会很酷地使用 JSON（或 HTML，[如此链接](https://stackoverflow.com/questions/8697862/populate-dropdown-on-change-of-another-using-servlet)）序列化整个子类别列表，然后使用 javascript 重新加载组合框

# magento - Magento 1.7 - 安装程序脚本不运行

> ID：14318831
> 
> 赞同：1
> 
> 时间：2013-01-14T12:55:57.953
> 
> 标签：magento, magento-1.7

我的安装程序脚本没有运行。

/app/etc/modules/Starmall_Salesorder.xml

```
<?xml version="1.0"?>
<config>
<modules>
    <Starmall_Salesorder>
        <active>true</active>
        <version>0.1.0</version>
        <codePool>local</codePool>
    </Starmall_Salesorder>
</modules> 
```

配置文件

```
<modules>
    <Starmall_Salesorder>
        <version>0.1.0</version>
    </Starmall_Salesorder>
</modules>

...
    <resources>
        <starmall_salesorder_setup>
            <setup>
                <module>Starmall_Salesorder</module>
            </setup>
        </starmall_salesorder_setup>
    </resources>

... 
```

/app/code/local/Starmall/Salesorder/sql/starmall_salesorder_setup/mysql4-install-0.1.0.php：

```
<?php echo 'Running installer: '.get_class($this)."\n <br /> \n";  
die("Exit for now"); 
```

加载页面时，我看不到测试输出。
此模块中没有行`core_resource`。

在 /var/log 中看不到任何错误

为什么这个安装程序不运行？

`app/code/core/Mage/Core/Model/Resource/Setup.php`
我在这个函数中添加了调试行`_installResourceDb($newVersion)`

```
 protected function _installResourceDb($newVersion)
{
    Mage::log("this line is not added to log file");

    $oldVersion = $this->_modifyResourceDb(self::TYPE_DB_INSTALL, '', $newVersion);
    $this->_modifyResourceDb(self::TYPE_DB_UPGRADE, $oldVersion, $newVersion);
    $this->_getResource()->setDbVersion($this->_resourceName, $newVersion);

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:58:46.327

假设您有一个包含与`modules`您的帖子匹配的节点的模块声明文件，并且您位于区分大小写的文件系统上，那么应用程序不会加载您的模块配置文件。

Magento 初始化时， 的子节点`<modules>`与值一起使用，`codePool`作为每个模块配置文件路径的一部分。节点名称（例如`starmall_salesorder`）被转换为目录路径*Starmall/Salesorder*（注意大写）。要解决此问题，请在声明和配置文件中更正模块的节点名称，`Starmall_Salesorder`并将其值更改`global/resources/starmall_salesorder_setup/setup/module`为匹配。

进一步说明：在 Magento CE 1.6 及更高版本中，模型层被重新设计为与数据库无关，因此适用于 1.6+ 的新模块将安装文件名（例如*install-1.0.php）*用于与后端无关的升级脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T11:44:12.623

今天我也遇到了一些麻烦。我必须清除缓存，即使它已被禁用。因此，每当更新/更改/运行安装程序脚本时，请确保首先手动清除缓存。

# html - 我可以在涵盖所有浏览器的 html5 视频中使用任何视频格式吗？

> ID：14318835
> 
> 赞同：0
> 
> 时间：2013-01-14T12:56:14.883
> 
> 标签：html, video

据我了解，所有浏览器都禁止 Firefox 和 Opera 支持 h.264/mp​​4 视频文件，为了覆盖 Firefox，我需要提供 Flash 后备文件或 .ogg 文件。这是正确的还是我可以使用一种文件类型来涵盖所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:58:58.097

我认为那是正确的。查看此表以获取 html5 视频浏览器支持

[http://www.w3schools.com/html/html5_video.asp](http://www.w3schools.com/html/html5_video.asp)

# sql-server-2008 - 视图上的外键引用

> ID：14318837
> 
> 赞同：1
> 
> 时间：2013-01-14T12:56:26.017
> 
> 标签：sql-server-2008, tsql

是否有可能参考某个视野以确保完整性？

伪代码示例：

```
CREATE VIEW V_ONE AS SELECT .....
CREATE TABLE TWO ( ID INT REFERENCES V_ONE ( field )) 
```

我**不想**而`CREATE TABLE T_ONE`不是`V_ONE`首先能够引用`T_ONE`.

@编辑：

View`V_ONE`从 erp 系统的多个表中收集数据并对其进行预处理。表`TWO`扩展`V_ONE`了一些额外的数据，这些数据不应该包含在`V_ONE`. `TWO`表中的每个条目都不能有一个条目`V_ONE`，但我想确保表中没有条目`TWO`在`V_ONE`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T12:58:30.533

简短的回答：没有。Sql Server 不允许在视图上使用外键。

您可以将外键约束放在视图中引用的“表之一”上，但没有上下文......很难给出方便的答案。

编辑：好吧，对两个[检查约束](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.100%29.aspx)怎么样，对 v_one 进行查询？

但是您必须找到一种方法来管理 v_one 的“源表”上的删除（和更新）。

您可以在视图 (V_ONE) 上使用（未经测试的） [INSTEAD OF DELETE](http://msdn.microsoft.com/en-us/library/ms191208%28v=sql.105%29.aspx)（如果需要，还可以使用[INSTEAD OF UPDATE ）触发器和表上的检查约束（TWO）。](http://msdn.microsoft.com/en-us/library/ms188601%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:22:19.053

您可以使用检查约束而不是外键来获得类似的结果：

```
-- CREATE VIEW THAT RETURNS DUMMY DATA
CREATE VIEW V_ONE
AS
SELECT  Field
FROM    (VALUES (1), (2), (3)) T (Field);
GO

-- CREATE FUNCTION THAT VALIDATES CRITERIA
CREATE FUNCTION dbo.CheckFunction (@ID INT)
RETURNS BIT AS
BEGIN

    IF EXISTS (SELECT 1 FROM V_ONE WHERE Field = @ID)
    BEGIN
        RETURN 1;
    END

    RETURN 0;

END
GO
-- CREATE TABLE THAT REFERENCES VIEW
CREATE TABLE T_TWO (ID INT NOT NULL CONSTRAINT CHK_T_TWO_ID CHECK (dbo.CheckFunction(ID) = 1));

-- TRY INSERTING A VALUE NOT RETURNED BY V_ONE
INSERT T_TWO VALUES (4); 
```

您可能需要实现触发器来处理对 V_One 源的删除/更新，您也应该向源添加一个外键。

# loadrunner - LoadRunner 警告：带有参数分隔符的字符串“SomeString”不是参数

> ID：14318839
> 
> 赞同：0
> 
> 时间：2013-01-14T12:56:32.440
> 
> 标签：loadrunner

我正在使用以下 C/LR 代码保存参数：

```
web_reg_save_param("Number",
 "LB=myleftboundry/",
 "RB=/myrioghtboundry",
 LAST);

lr_output_message("%s", lr_eval_string("my number: {Number}")); 
```

但是在运行脚本时，我在日志中得到了一些连线的东西：

```
Action.c(66): Registering web_reg_save_param was successful      [MsgId: MMSG-26390]
Action.c(67): Warning: The string 'Number' with parameter delimiters is not a parameter.
Action.c(67): Number: {Number}
Action.c(69): Notify: Transaction "trans1" started.
Action.c(73): Notify: Saving Parameter "Number = 4588". 
```

有人知道我在这里做错了什么吗？

也许它与我的输出语句的构建有关？

干杯

马格努斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:03:42.827

我找到了一个解决方案，为此必须执行另一个动作功能才能执行`web_reg_save_param`。因此，我将`web_reg_save_param`最初放入脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T15:24:30.723

我意识到我在这里的反应有点慢，但我遇到了这个问题，通过找到这篇文章，它为我指明了正确的方向，所以我想我会把我的解决方案放在这里供其他人阅读。

只需将您的 web_reg_save_param 更改为 web_reg_save_param_ex。这将解决您的问题。

# deployment - 部署 heroku 应用程序 - 内部服务器错误

> ID：14318842
> 
> 赞同：0
> 
> 时间：2013-01-14T12:56:34.583
> 
> 标签：deployment, heroku

我正在尝试将静态网页部署到 Heroku 并遵循以下内容： [官方教程](https://devcenter.heroku.com/articles/static-sites-on-heroku)

当我想在浏览器中查看我的页面时，我收到以下错误消息：

```
内部服务器错误
没有这样的文件或目录 - public/index.html
WEBrick/1.3.1 (Ruby/1.9.2/2011-07-09) 在 dosasite2013.herokuapp.com:80

```

我的config.ru如下（根据官方教程）

```
        使用机架::静态，
        :urls => ["/stylesheets", "/images"],
        :root => "公共"

    运行 lambda { |env|
      [
          200,
          {
              '内容类型' => '文本/html',
              '缓存控制' => '公共，最大年龄 = 86400'
          },
          File.open('public/index.html',File::RDONLY)
      ]
    }

```

当我通过 rackup 在内部运行应用程序时……public/index.html 页面显示正常……

[这是我的目录结构链接](http://i.imgur.com/gkr2T.jpg?1)

怎么做才能在 Heroku 上看到我的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:13:27.727

它已解决。在 config.ru 文件中我更改`public/index.html`为`Public/index.html`，与`:root => "Public".`

原因是我的目录以大写 P 而不是小“p”开头。

# jquery - 用 PageMethods 填充 Asp.net 页面以使用 Ajax 是个好主意吗？

> ID：14318846
> 
> 赞同：0
> 
> 时间：2013-01-14T12:56:53.907
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc

我仍在使用网络表单。目前我不打算使用 MVS，尽管我需要/我想将 Ajax 与 jQuery 一起使用，但要做到这一点，我需要创建一个`[WebMethod]`充当静态的静态，不能使用会话或常见的东西，例如使用存储在会话中的用户数据从数据库中获取东西，至少是简单的方法`session[]=`。

```
[WebMethod]
    public static void setAsRead(string rowid){} 
```

（在前面的代码中，我需要将需要其数据的表格行的rowid作为隐藏字段存储在页面中）

所以我想知道放置**很多**页面方法是否是“正常的”或者我们必须避免这种方法。我个人认为看到这个很难看，因为页面性质，它是一个网络表单，一个页面，而不是一个网络服务堆栈。

所以你怎么看？有**安全问题**吗？我是否必须避免使用 webforms 的 ajax 并考虑迁移到 MVC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:02:48.550

经典 WebForms 中的 PageMethods 在安全性或性能方面没有任何问题。它们比 UpdatePanel 好得多，因为您可以完全控制客户端和服务器之间正在交换的数据。与原始 IHttpHandler 相比，使用 PageMethods 的好处是框架将为您处理 JSON 序列化和管道代码。

因此，您可以使用 PageMethods，直到您决定升级到可以公开 REST API 的 ASP.NET MVC、ASP.NET Web API 或 ServiceStack。

> 我是否必须避免使用 webforms 的 ajax 并考虑迁移到 MVC？

不，在 WebForms 中做 AJAX 绝对没有错。在 ASP.NET MVC 出现之前，人们就已经在使用它了。但是，如果您正在开始一个新项目，您可能会真正考虑迁移到 ASP.NET MVC 是否值得。这将在很大程度上取决于您的项目的具体要求、现有的代码库……确保在开始迁移过程之前评估所有可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:06:54.333

您不需要移动 Asp.net MVC 来实现 ajax。您仍然可以在 Web 表单中选择。大多数技术都不是 Mvc 专用的。您可以将许多技术用于后端。

*   **[Http Handler](http://msdn.microsoft.com/en-us/library/f3ff8w4a%28v=vs.71%29.aspx)**：这是最基本的一个，也是大多数时候我个人的选择。您可以通过实现 IRequiresSessionState 来使用 session[如何将数据 POST 到 ASP.NET HttpHandler？](https://stackoverflow.com/questions/909002/how-to-post-data-to-asp-net-httphandler)

*   **[Asp.net web-api](http://www.asp.net/web-api)**这是新的闪亮的东西。神仙多多。支持自托管等

*   **[服务堆栈](http://www.servicestack.net/)**如果您被允许使用 3rd 方库。这个绝对值得一看。有据可查、受支持的开源项目。

# delphi - 客户端在尝试连接 Indy 10 服务器时收到“连接被拒绝”

> ID：14318847
> 
> 赞同：2
> 
> 时间：2013-01-14T12:56:54.433
> 
> 标签：delphi, connection, indy

我们最近发布了一个使用 Indy 10 TIdTCPServer 用 Delphi 2010 编写的服务器。远程现场工程师使用他们的智能手机在预定义的端口上连接到服务器。我们有一个特定的客户告诉我们，在一段时间（1 天、2 天）等之后，客户在他的设备上收到 ECONNREFUSED (ConnectionRefused)。此时远程工程师都无法连接到服务器。有人知道为什么会这样吗？

任何帮助将不胜感激。

亲切的问候

骗局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:21:27.913

我最初的怀疑是 OnConnection OnExecute 或 OnDisconnect 的事件处理程序出现死锁。

您是否在连接上下文（线程）之间正确同步？

但是您需要发布您的服务器代码，以便我们检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T07:05:45.820

`ECONNREFUSED`表示两种可能的情况之一：

1.  在所连接的 IP/端口上没有服务器套接字侦听。
2.  有一个服务器正在侦听，但它的待处理连接积压已满，此时无法接受新客户端的连接请求。

对于 #1，使用端口查看工具（例如 NETSTAT 或 TCPView）验证您的服务器仍在运行，并且正在侦听的端口仍处于打开状态并处于 LISTENING 状态。

对于＃2，检查您的服务器`OnListenException`事件是否被触发，这表明服务器在接受来自其积压的连接时遇到问题。

# graphics - 什么是占位符纹理？

> ID：14318848
> 
> 赞同：1
> 
> 时间：2013-01-14T12:57:01.377
> 
> 标签：graphics, textures, game-engine

我是游戏和图形的新手。我遇到了标签“占位符纹理”，但不太理解这个词。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:05:29.153

我猜占位符纹理是一种纹理，如果它不可用或未被开发人员创建，则用于表示最终纹理。

占位符纹理可用作开发人员在最终纹理可用之前尚未创建或获得的纹理的替代。

如果有人能想出更好的表达方式，请随时编辑这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:06:28.967

游戏设计中的占位符纹理是一种纹理（用于为渲染场景的各个部分着色的图像），用于尚未具有专用纹理或根本不打算看到的事物。它通常颜色非常鲜艳，因此在设计和测试期间，您可以轻松查看您可能遗漏的内容，例如关卡中的孔或未完成的内容。很多开发者也会在游戏发布后为其选择中性色，这样最终用户就不会看到错误。

# ruby - `Hash#hash` 和 `Hash#initialize_copy` 是如何工作的？

> ID：14318850
> 
> 赞同：0
> 
> 时间：2013-01-14T12:57:21.010
> 
> 标签：ruby, hash

我找到了一个实例方法`Hash#initialize_copy`。但没有任何记录。任何人都可以在这方面用一些代码帮助我吗？

如何`Hash#hash`计算哈希码？其背后的逻辑是什么？哈希码的使用场景有哪些？例如，散列的每个键是否`h`总是具有不同的散列码？

***编辑***

我尝试了以下方法：

```
C:\Documents and Settings\rakshiar>irb
irb(main):001:0> h=Hash.new
=> {}
irb(main):002:0> h["a"]=2
=> 2
irb(main):003:0> h["b"]=2
=> 2
irb(main):004:0> "a".hash
=> 100
irb(main):005:0> "b".hash
=> 101
irb(main):006:0> h1=Hash.new
=> {}
irb(main):007:0> h1["a"]=2
=> 2
irb(main):008:0> h1["b"]=2
=> 2
irb(main):009:0> "a".hash
=> 100
irb(main):010:0> "b".hash
=> 101
irb(main):011:0> exit 
```

*但是您可以看到两个哈希 -`h and h1`具有相同的`key/value`组合。但是他们的哈希码怎么也一样呢？它也在文件中提到 - 我知道。但原因是什么？- 有人澄清一下吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:21:44.140

`What are the scenarios where hash codes are used?`

记住这一点：“b ={}”？现在 b 是一个散列，每次你在其中插入一些东西时，散列码都用于放置新元素。同样用于通过键获取值以及几乎所有其他哈希操作。

`Does each key of a hash, say h, always have different hash code?`

不，这几乎是不可能的。然而，当发生碰撞时可以（并且）应用不同的算法，因此永远不会发生具有相同哈希的两个元素相互替换。

`How does Hash#hash compute hash code?What is the logic behind it?`

这是一个有点宽泛和普遍的问题，因为对于不同类型的对象，哈希的计算方式不同。**真正**重要的是为此`hash`调用了该方法。因此，如果您覆盖此方法，您可以将对象的哈希码设置为您想要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:04:13.777

基本上，做一些和`initialize_copy`使用的内部东西（[Jon Leighton 写过博客](http://www.jonathanleighton.com/articles/2011/initialize_clone-initialize_dup-and-initialize_copy-in-ruby/)）。正如他所指出的，你真的不需要担心它在做什么，但如果你真的很好奇，你可以挖掘[源代码](https://github.com/ruby/ruby/blob/trunk/hash.c#L1216-L1238)。`clone``dup`

`Hash`至于您的第二点，我认为您在类和`hash`方法之间感到困惑。

`Hash`类是我们都知道和喜爱的数据结构。

`hash`该方法在每个对象上定义，并为该对象返回一个“哈希码”。不同类型的对象可能有不同的计算哈希码的方法。这些代码在`Hash`数据结构内部用于查找键（有关这些“哈希表”的更多信息，请参见[Wikipedia](http://en.wikipedia.org/wiki/Hash_function#Hash_tables)）。

这就是为什么在您的示例`"a".hash`中始终相同（并且重要的是，始终与“b”.hash 不同）-这是因为`"a".hash`（方法）不受（尽管它用于）`h`和`h2`（`Hash`es）的影响。

# fitnesse - Fitnesse 能否为套件中的每项测试使用新流程

> ID：14318851
> 
> 赞同：0
> 
> 时间：2013-01-14T12:57:37.603
> 
> 标签：fitnesse

我们经常有单独通过但作为套件的一部分运行时失败的 Fitnesse 测试（反之亦然）。

这是因为在每次测试之间保留了一些设置。有没有办法告诉 Fitnesse 在运行每个测试之前使用新的线程/进程/任何东西，以便保证测试在两种情况下都以相同的方式运行。

目前，我们在持续集成服务器中使用套件结果，这意味着单独失败的测试可以通过我们的发布。这让我们很紧张！

在下面的示例中，AlarmDefintionSet 是 AlarmDefinition 的父对象。AlarmDefinitionSetSetUpFixture 创建一个 AlarmDefinitionSet 并将其存储在内存中。AlarmDefinitionFixture 找到内存中的父级（这可以通过 id，但在下面的示例中使用默认值），将其设置为属性，然后设置 Code、InitialWTGStopped 和 RunAlarm 属性。然后它调用 Valid 和 ValidationMessage 方法作为测试。

当作为套件的一部分或单独运行时，此测试工作正常。但是，如果我要删除 AlarmDefinitionSetSetUpFixture，它会在单独运行时失败，因为它无法找到合适的父级。但是，如果它作为套件的一部分运行，并且较早的测试包含一个 AlarmDefinitionSetSetUpFixture，那么它将通过。这是一个温和的简化，但它说明了相关点。我可以使用 Fitnesse "[SuiteName].SetUpFixture" 文件来调用一个方法来清除内存中的所有内容，我们确实可以这样做。将这样的文件添加到我们所有的套件中将需要大量工作，并且还要确保它调用的方法正确地从内存中删除所有内容。

![示例 Fitnesse 测试](../Images/9f224885bb90db317bc413fd10921440.png)

本例中的fixture都是fit.ColumnFixture的

谢谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:41:23.617

简短的回答 - 不，没有 FitNesse 设置可以使每个测试独立。你需要自己处理。有时我会使用设置页面（包含在每个测试页面的开头）来执行一个固定装置，以确保我为每个测试提供一个干净的环境。

# android - 使用 ADT 2.0 及更高版本进行本机和 Java 调试（同时）

> ID：14318854
> 
> 赞同：2
> 
> 时间：2013-01-14T12:57:45.573
> 
> 标签：android, android-ndk

到目前为止，我一直使用 sequoyah 插件同时调试 Java 和原生代码。它有效但是我使用的是 ADT Build v21.0.0.1 - 543035，并且我遵循了[http://tools.android.com/recent/usingthendkplugin](http://tools.android.com/recent/usingthendkplugin)

像往常一样，谷歌似乎忽略了原生开发者，并且提供了很少的信息如何同时无缝地调试 Java 和原生代码，如果有人有见解请提供信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:14:05.623

您是否遵循此处的指南：http: [//wiki.eclipse.org/Sequoyah/ndk_guide](http://wiki.eclipse.org/Sequoyah/ndk_guide)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:46:37.970

经过一天的努力，我可以和同一个好老朋友 Seqyuoyah 一起调试 Java 和本机代码，逐字逐句地跟踪这个文档:) ~~[https://docs.google.com/viewer?url=http://www.doc.ic .ac.uk/~cb908/Android%2520NDK%2520Debugging.pdf&pli=1](https://docs.google.com/viewer?url=http://www.doc.ic.ac.uk/~cb908/Android%2520NDK%2520Debugging.pdf&pli=1)~~

如果您收到 xxx_scd.mk 错误，请尝试禁用 Project->properties->Discovery Options -> Automate discovery of paths and symbols

# sorting - 用 yii 进行两个数据库排序

> ID：14318856
> 
> 赞同：0
> 
> 时间：2013-01-14T12:57:55.603
> 
> 标签：sorting, yii

我有 2 个模型：类别和新闻。每个新闻在 tbl_category 中都有相关的类别。在我的**新闻**视图文件中，记录按 desc 和 CActiveDataProvider 排序。现在我想对数据 DESC 进行排序，但无法处理。这是类别的视图文件。

```
<div id="newsy">
<?php $this->renderPartial('_news',array('news'=>$model->news));?>  /calling _news view
</div> 
```

我是类别中的 renderPartial 视图，例如。1 (host/category/1)，它给出了所有与 id=1 相关的新闻，但它不是按 create_time desc 排序的。有没有办法显示没有 DataProvider 排序的数据？下面是来自 /views/category 文件夹的 _news.php 视图。我应该在哪里更改排序？

```
<?php foreach($news as $news): ?>
<div class="c"><img src="../images/news/news<?php echo CHtml::encode($news>id); ?><?php echo CHtml::encode($news->image);?>" /></div>
<h2 class="n"><?php echo CHtml::link(CHtml::encode($news->name),array('news/view','id'=>$news->id)); ?></h2>
<?php echo CHtml::encode($news->shortDescription); ?>
<?php echo CHtml::link("Comments: ({$news->commentCount})",$news->url.'#comments', array ('class' => 'acom')); ?> 
```

我想我们需要控制器采取行动：

```
public function actionView($id)
{
    $this->render('view',array(
        'model'=>$this->loadModel($id),
    ));
} 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:27:24.553

如果您总是想按某个字段对模型进行排序，您可以为该模型添加一个默认范围，并在该范围中包含一个“订单”参数。

例如，如果您想始终按您的`news`模型排序，`create_time`您可以执行以下操作；

```
class News extends CActiveRecord
{
    ...
    public function defaultScope()
    {
        $alias = $this->getTableAlias(false,false);
        return array(
            'order'=>"`$alias`.`create_time` DESC",
        );
    }
    ...
} 
```

这会将`order`参数添加到`CDbCriteria`对数据库进行的每个调用，因此您的模型将始终按`create_time DESC`.

使用该`getTableAlias()`方法可确保您始终使用正确的表别名来防止出现 sql 错误。

# javascript - 用于 websocket 通信的自定义 Extjs 4 代理

> ID：14318857
> 
> 赞同：4
> 
> 时间：2013-01-14T12:58:01.293
> 
> 标签：javascript, extjs4, websocket

我有 ExtJS 4 MVC 应用程序和以 Socket.IO 作为主要传输层的 websocket 通道（由 nginx 提供的静态文件和所有数据通信 - 通过 websocket|json|rpc）。

所以，我想将所有代理请求包装到我的 websocket 通道。Extjs 没有内置的代理。

最好的方法是什么？创建自定义代理类或使用现有的（例如内存）并在事件处理程序中拦截请求？

# qt - 使用来自 C++ 的精美 QT Quick Effects

> ID：14318858
> 
> 赞同：0
> 
> 时间：2013-01-14T12:58:11.263
> 
> 标签：qt, qt-quick

有没有办法在不使用 QT Quick 的情况下使用 Shader Effects、Particles、Sprites 等东西？我想利用这些效果，但只在 QGraphicsView 中使用 C++ 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:56:40.463

是的，Qt 提供了通过 C++ 代码实现到达图形的能力。

你需要看看[Graphics View Framework](http://doc.qt.digia.com/qt/graphicsview.html)。

Qt 也提供了很好的例子。例如，在 Qt 4.8.3 中，我建议查看*图形视图*和*绘画*分区。

# c - 在 C 中使用 if 语句调用函数

> ID：14318859
> 
> 赞同：1
> 
> 时间：2013-01-14T12:58:17.163
> 
> 标签：c, function, if-statement

我有一个程序可以计算出分子质量的减少，并想用 if 函数调用它。这是我目前的代码：

```
int program ();
int main()
{
    printf("Press 1 to calculate the reduced mass of a molecule or press any other button to exit:");
    scanf ("%lg",&repeat);

    if(repeat==1)
    {
    program();
    }
    else
    {
    return(0);
    }
}

int program ()
//etc... 
```

我对C不太熟悉，所以解释一下可能有用。这也可以让您可以根据需要多次重复该功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:22:25.050

如果你从 C 开始，你可以从使用程序（你编译的 C）参数开始。这样，您可以向程序提供*N*`program()`次要调用该函数的次数。

例如

```
 // Includes that have some library functions declarations
   #include <stdio.h>
   #include <stdlib.h>

   // argc and argc can be provided to the main function.
   // argv is an array of pointers to the arguments strings (starting from 0)
   int main(int argc, char *argv[]) {
      if (argc < 2) return 1; // argc number of parameters including the program name itself
      int repeat = atoi(argv[1]); // atoi convert a string to integer

      // repeat-- decrements repeat after its value was tested against 0 in the while
      while (repeat-- > 0) {
         program();
      }

      return 0;
   } 
```

*argc*针对 2 进行测试，因为程序名称本身是第一个参数，所以您至少需要 2，使用 NEg

```
 ./myprog 5 
```

将运行*program()* 5 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:22:31.880

`I'm not too experienced with C, so an explanation might be useful.`
不确定您到底需要什么解释：

```
int program (); <-- function prototype for "program" defined here so you can call it in
int main()      <--  main. 
{
    // Display a message
    printf("Press 1 to calculate the reduced mass of a molecule or press any other button to exit:");
    // store the value typed by the user as a double, also it will accept scientific 
    // notation (that’s he g part). So you could enter 3.964e+2 if you wanted... an 
    // int or even a char would have been fine here
    scanf ("%lg",&repeat); 
```

`Also would this make it so that you can repeat the function as many times as you like?` 不，那不是。首先，它不会编译，因为没有“重复”的定义；其次，您缺少循环机制。`for`, `while`, `do/while`, 递归......无论如何。您的代码可以很容易地通过无限循环完成：

```
int main()
{
    double repeat = 0;
    for(;;) {
        printf("Press 1 to calculate the reduced mass of a molecule or press any other button to exit:");
        scanf ("%lg",&repeat);

        if(repeat==1)
        {
            program();
        }
        else
        {
            return(0);
        }
    }
} 
```

# qt - Qt，手势。TapAndHold 和 Swipe 无法识别

> ID：14318861
> 
> 赞同：12
> 
> 时间：2013-01-14T12:58:23.853
> 
> 标签：qt, gesture

[我尝试了来自http://doc.qt.digia.com/4.6/gestures-imagegestures.html](http://doc.qt.digia.com/4.6/gestures-imagegestures.html)的“图像手势示例” 。在此示例中，您只有 3 个手势：PanGesture、PinchGesture 和 SwipeGesture。但 Qt 提供了 5 种手势：

*   点击手势
*   点击并按住手势
*   泛手势
*   捏手势
*   滑动手势

为了识别所有 5 个手势，我们需要写入 ImageWidget-Constructor：

```
 grabGesture(Qt::TapGesture);
 grabGesture(Qt::TapAndHoldGesture);
 grabGesture(Qt::PanGesture);
 grabGesture(Qt::PinchGesture);
 grabGesture(Qt::SwipeGesture); 
```

我还添加了方法gestureEvent()

```
bool ImageWidget::gestureEvent(QGestureEvent *event)
 {
     if (QGesture *swipe = event->gesture(Qt::SwipeGesture))
         swipeTriggered(static_cast<QSwipeGesture *>(swipe));
     else if (QGesture *pan = event->gesture(Qt::PanGesture))
         panTriggered(static_cast<QPanGesture *>(pan));
     if (QGesture *pinch = event->gesture(Qt::PinchGesture))
         pinchTriggered(static_cast<QPinchGesture *>(pinch));
     if (QGesture *tap = event->gesture(Qt::TapGesture))
         tapTriggered(static_cast<QTapGesture *>(tap));
     if (QGesture *tapandhold = event->gesture(Qt::TapAndHoldGesture))
     {
         tapandholdTriggered(static_cast<QTapAndHoldGesture *>(tapandhold));
      }
     return true;
 } 
```

并编写缺少的方法，例如

```
void ImageWidget::tapTriggered(QTapGesture *gesture)
 {
    qDebug() << "TAP" << gesture->position();
 }

 void ImageWidget::tapandholdTriggered(QTapAndHoldGesture *tapandhold)
 {
     qDebug() << "TAPANDHOLD";
 } 
```

所以，我的问题是，为什么手势 Swipe 和 TapAndHold 无法识别？这些手势同样实现为三个可识别的手势（平移、捏合和轻敲）。为什么它不起作用？

我提前感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-08T14:55:57.497

同样，如果您描述您的平台和触摸硬件，这将有所帮助。

在 OSX、Qt5、PyQt 上，使用 Apple TouchPad，我发现某些手势事件不会到达，除非您接受 QGestureOverride 类型的 QEvent。文档对此类事件的目的非常模糊。文档确实说默认情况下会忽略它，这是例外：默认情况下接受大多数其他手势，这意味着同一手势的更多事件将会到来。

这种“接受”手势的含义不同于“接受”事件的一般含义。“接受”一个手势似乎意味着“让更多事件发生”，而“接受”一个事件意味着“不要通过小部件链传播这个事件”。此外，文档对于接受 QGestureEvent 与接受 QGesture 非常混淆。QGestureEvent 是 QGesture 的组合。接受 QGestureEvent 是否与接受包含的手势相同是非常令人困惑的。注意QGesture没有accept()方法，QGestureEvent有几个重载和方便的方法：accept(), setAccepted(bool), setAccepted(gesture, bool), setAccepted(gestureType, bool)等。

回到 QGestureOverride 类型的 QEvent：Qt.QEvent 枚举显示“Qt.QGestureOverride ...(QGestureEvent)”，这对我来说意味着 QGestureOverride 类型的事件是 QGestureEvent 的子类，但它不是：没有手势（） QGestureOverride 类型事件的方法。（那么如何知道您正在接受哪种手势覆盖？）而且似乎忽略事件的默认设置不仅允许它传播，而且阻止包含的（原文如此）手势的后续事件（不管它们是什么。）

例如，在我的一些测试中，真正的两指捏合从未生成任何具有 Pinch 类型手势的手势事件，但确实生成了 Pan 类型，直到我接受 QGestureOverride 类型的 QEvent。然后，Pinch 手势事件首先出现，然后是 Pinch 和 Pan 手势事件，当我在捏的时候或在我捏之后草率地平移我的两根手指时。（请注意，至少在 OSX TrackPad 上，平移（滚动操作）是用两个手指，由设备驱动程序或控制面板定义的相同？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T15:54:03.937

尝试更新版本的 Qt（并且您没有提及您的操作系统或设备。）我不知道更新版本会更好，但我知道大约一年前，整个堆栈（X11 事件，设备驱动程序、操作系统支持等）不断变化且不完整。例如，我记得在我尝试的时候，只有 Windows 上的 Qt 中的手势有效，并且 Linux/Ubuntu（来自 Canonical）正在进行中。

# ruby-on-rails - 在现有数据库之上开始使用 ROR

> ID：14318862
> 
> 赞同：1
> 
> 时间：2013-01-14T12:58:26.473
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我有一个使用数据库作为其内容的 Web 界面。该数据库几乎是任意设计的，没有遵循任何标准。

我想在这个数据库之上编写一些 API。我的前端将使用这些 API。

我使用 ActiveRecord 作为 ORM。问题是我无法在现有表上定义任何关联或联接，因为这两个操作都需要`id`在引用表中命名的列。

鉴于我不想修改现有的数据库模式，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:05:01.717

当您定义关联时，您可以使用附加选项，例如 :foreign_key 和 :primary_key 来指定有关此类字段名称的详细信息。

```
belongs_to :person, :primary_key => "name", :foreign_key => "person_name" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T13:28:34.667

过去，我尝试使用 ActiveRecord 处理遗留数据库，并且成功了，但是，这样做肯定是在逆流而上。ActiveRecord 不想使用具有不同命名约定的字段和表，因此需要做很多工作。从那以后，它变得更加文明，并且在“不是这里发明”的态度上更加宽容。但是，它也不是镇上唯一的 ORM，而且我已经成为这类任务的 Sequel 的忠实粉丝。

您可以使用[Sequel](http://sequel.rubyforge.org)作为 ActiveRecord 的替代品。这是一个很棒的 ORM，可以很好地与遗留数据库配合使用。您可以定义您的`:id`字段应该是什么，以及指定所有真实字段和表名（如果它们未映射到预期格式）。

查看[“备忘单”](http://sequel.rubyforge.org/rdoc/files/doc/cheat_sheet_rdoc.html)了解 Sequel 的工作原理，[查看“Sequel for ActiveRecord Users”](http://sequel.rubyforge.org/rdoc/files/doc/cheat_sheet_rdoc.html)了解它如何替代 ActiveRecord 供您使用。

利用：

*   “[连接到数据库](http://sequel.rubyforge.org/rdoc/files/doc/opening_databases_rdoc.html)”获取有关连接到数据库的信息。
*   “[关联基础知识](http://sequel.rubyforge.org/rdoc/files/doc/association_basics_rdoc.html)”和“[高级模型关联](http://sequel.rubyforge.org/rdoc/files/doc/advanced_associations_rdoc.html)”了解有关关联模型以及使用与默认映射假设不同的字段和表名称的信息。

[Sequel-talk 小组](http://sequel.rubyforge.org/rdoc/files/doc/advanced_associations_rdoc.html)非常活跃，如果您需要帮助，可以为您指明正确的方向。而且，主要作者 Jeremy Evens 是项目负责人的一个很好的例子——他总是乐于助人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:15:27.357

我为您看到了一些选择：

1.  您使用 ActiveRecord 重建架构，然后编写一些脚本将旧数据导入新架构；（最好的解决方案 IMO，虽然很耗时）
2.  您不使用 ActiveRecord，而是直接访问数据库；（丑陋的）
3.  正如 thorsten müller 所建议的那样，您继续将 ActiveRecord 与旧数据一起使用，并使用特殊参数来告诉 Rails 将哪些列用作键等。（最丑陋的，需要相当多的修改）

选择其中一个很大程度上取决于您的要求——应该完成多快，是否必须保留旧数据（在这种情况下，您不能真正使用 1.），当前模式有多混乱等等.，但我认为你应该尝试推动选项1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:07:17.443

考虑使用 Sinatra 而不是 Rails。如果您只想为“丑陋”的数据库提供 API，请不要从 activerecord 开始。

添加您的路线，并直接在您的操作中定义 SQL 语句。不应该比修改 activerecord 的期望更昂贵。

# android - XPCOM 和火狐手机

> ID：14318864
> 
> 赞同：4
> 
> 时间：2013-01-14T12:58:28.113
> 
> 标签：android, c++, firefox, mobile, xpcom

为了为android开发一个浏览器插件，我发现了很多问题。我必须使用几个C++库，所以我需要编写C++代码。

我可以用 C++ XPCOM 核心开发一个 firefox 移动扩展吗？

如果是——我在哪里可以找到一些例子？

非常感谢您对毛罗的支持

# facebook - 多语言标签 - 不同的标题

> ID：14318866
> 
> 赞同：0
> 
> 时间：2013-01-14T12:58:31.497
> 
> 标签：facebook, tabs, multilingual

我们为客户开发了多语言 Facebook 标签/应用程序。因此，当有人用英语使用 Facebook 时，该选项卡会以英语显示。当有人用德语使用 Facebook 时，相同的选项卡会以德语显示。到目前为止，一切都很好。

我们的问题是，我们只能给出一个标题。因此，选项卡的标题不正确，具体取决于语言设置。有没有可能，我们可以创建不同的标签，只有正确的标签（使用正确的语言）显示在 facebook 页面上？

你将如何解决这个问题？

谢谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:07:15.940

为选项卡准备图像。渲染并相应地应用于选项卡。

# javascript - JavaScript - 使用语言环境日期字符串格式设置日期

> ID：14318867
> 
> 赞同：1
> 
> 时间：2013-01-14T12:58:33.713
> 
> 标签：javascript, date, locale

我想使用本地日期字符串格式在 JS 中初始化一个日期对象，例如：

```
var d = new Date("ma, 14 tammi 2013 10:56:19 +0200"); //invalid Date 
```

怎么可能这样做？

# safari - 在 Safari for Mac 中渲染边框半径

> ID：14318876
> 
> 赞同：0
> 
> 时间：2013-01-14T12:59:10.050
> 
> 标签：safari, border, css

我在渲染具有边界半径的元素角时遇到问题。

我使用以下代码，它适用于 Windows 上的所有主要浏览器，包括 Safari。

```
border: 1px solid #555;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px; 
```

现在我的客户有一个 Mac 和一个 Safari 浏览器，下面是丑陋的边框渲染的屏幕截图，这就是问题所在。 ![Mac Safari 中的角落](../Images/851ccac90d627aea527e73eaab890470.png)

有谁知道这种渲染的原因是什么？（[原页面](http://imd-engineering.com)）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T14:27:42.077

你应该试试 Mac Safari

```
-webkit-background-clip: padding-box; 
```

# sencha-touch-2 - Sencha Touch 2 组件在列表 emptyText

> ID：14318877
> 
> 赞同：2
> 
> 时间：2013-01-14T12:59:16.513
> 
> 标签：sencha-touch-2

我有一个列表组件，我想显示一个按钮，以便在没有结果的情况下发送关于要包含的数据的建议。

List 组件本身是这样实现的：

```
 {
            xtype: 'list',
            itemTpl: '{name}',

            // This is not ideal!
            emptyText: [
                '<div class="x-button-normal x-button">',
                    '<span class="x-button-label">',
                        'Suggest <i><span id="suggest-name"></i>',
                    '</span>',
                '</div>'
            ].join(''),

            store: 'TheStore'
        } 
```

这是搜索字段的处理程序，它只是在商店中设置子字符串过滤器：

```
 'keyup': function(self, e, eOpts) {
            queryString = self.getValue();

            var store = Ext.getStore('TheStore');
            store.clearFilter();

            if(queryString){
                var thisRegEx = new RegExp(queryString, "i");
                store.filterBy(function(record) {
                    if (thisRegEx.test(record.get('name'))) {
                        return true;
                    };
                    return false;
                });
                // Changes the button so it shows name
                document.getElementById('suggest-name').innerText = queryString;
            }
        }, 
```

现在，我将 emptyText 设置为一些简单的 HTML，模拟 Sencha Touch 按钮的外观，但这意味着我没有任何按钮行为，因为它没有绑定到组件系统（例如在点击时被按下）。由于显示的是正确的按钮，如何设置 emptyText 属性（或模拟它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:01:06.867

尝试查看下面的两个截屏视频

*   [Sencha Touch - 嵌套列表组件介绍](http://vimeo.com/20580117)
*   [Sencha Touch 2 - 列表组件介绍](http://vimeo.com/37212149)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T16:12:17.640

我知道这已经晚了大约 2 年......但我遇到了与 @Hampus Nilsson 相同的问题，当我找到解决方案时，我想如果我在 2 年后遇到这个问题，其他人也可能会遇到它。

话虽如此......我目前正在运行**Sencha Touch 版本 2.3.1**。与该版本相关的解决方案非常容易实现，只是非常难以找到。问题是 Sencha 在 emptyText 组件（x-list-emptytext 类）上有一个 CSS 属性，它忽略了所有调用的指针交互`pointer-events: none;` （谁知道？！）

该属性位于：

*[sdk_root]/resources/themes/stylesheets/sencha-touch/base/src/dataview/_List.scss*

```
.x-list-emptytext {
        text-align: center;
        pointer-events: none;  // THIS ONE!!
        font-color: #333333;
        @include st-box();
        @include st-box-orient(vertical);
        @include st-box-pack(center);
} 
```

要解决此问题，只需在您自己的 sass/css 中覆盖该属性。我选择用它覆盖它，`pointer-events: inherit;`但您的里程可能会有所不同。

**那么**，你需要做的就是在你的列表上设置一个监听器，*我建议在你的列表类的初始化函数中*，像这样：

```
this.emptyTextCmp.element.on({
    delegate: '.x-button-normal',
    scope: this,
    tap: this.yourCustomFunction
}); 
```

`this`您的列表组件在哪里。请务必注意，您需要一个“。”。在您的代表的班级名称前面。在上面的示例中，我将委托设置为：'.x-button-normal'，因为这是问题代码中列出的两个类之一。我也可以使用'.x-button'。 **如果是 me**，我会给你的 html 一个额外的类，用作委托，这有助于更好地识别它，而不是仅仅使用默认的 Sencha 类作为你的委托。这是意见，不是要求。

就是这样，我希望这对其他人有帮助！

# iphone - 如何将 iPhone SDK 3.1 中的 Like 功能与 Facebook 共享应用程序集成

> ID：14318880
> 
> 赞同：1
> 
> 时间：2013-01-14T12:59:32.567
> 
> 标签：iphone, ios

我是 iPhone 开发的新手。我添加了 Facebook 分享功能，我还想添加 Facebook 的点赞功能。我遵循了其中一个示例；如果 Facebook 共享功能尚未实现，它会起作用，因为某些文件会产生矛盾（特别是`FBRequest.h`）。但我想同时添加两组功能。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:47:50.417

如果您是新手，那么这不是问题。每个人都有相同的大脑。所以这不是一个大问题。查看

这个链接：`http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app`

首先理解它然后实施它。我知道你肯定会在你的

应用程序。祝你好运。

# php - 如何在 Yii 引导程序的 TbActiveForm 中放置客户端验证？

> ID：14318881
> 
> 赞同：3
> 
> 时间：2013-01-14T12:59:47.717
> 
> 标签：php, twitter-bootstrap, yii

我使用小部件 -bootstrap.widgets.TbActiveForm 创建了一个表单，其中包含 textFieldRow、TbTypeahead、CJuiDatePicker 和 TbButton 等表单元素。我已经实现了 ajax 表单提交，它工作正常。我已经包含了一个简单的客户端验证，规则在 EmployeeRegister 模型中定义。它仅对空字段进行简单验证。问题是，当我提交必填字段为空的表单时，表单会被提交。即，不执行验证。但它显示错误消息“名称不能为空”。或“地址不能为空。”。谁能帮我解决这个问题？？我在下面附上我的代码。// 模型- EmployeeRegister

```
class EmployeeRegister extends CActiveRecord{

    public $name;
    public $address;
    public $position;
    public $joinDate;
    public $age;
    public $phone;
    public $search;
    public $id;

    private $_identity;

    public function rules(){

        return array(
            array('name,address,position,phone','required'),
            array('joinDate,age,search,id','safe'),

        );
    }

 public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

 public function tableName()
    {
        return 'emp_registration';
    } 
```

//查看-edit.php

```
$form = $this->beginWidget('bootstrap.widgets.TbActiveForm', array(
'id'=>'employeeregister-form',
//'enableAjaxValidation'=>true,
'enableClientValidation'=>true,
'clientOptions'=>array('validateOnSubmit'=>true),
'htmlOptions'=>array('class'=>'well',),
)); ?>

<?php echo $form->textFieldRow($model, 'name',array('class'=>'span3','style'=>'height:30px','id'=>'emp_name')); ?>

<?php echo $form->textFieldRow($model, 'address', array('class'=>'span3','style'=>'height:30px','id'=>'emp_address')); ?>

<?php // echo $form->textFieldRow($model, 'position', array('class'=>'span3','value'=>$result['position'],'style'=>'height:30px')); ?>

<?php echo "<br/> Position <br/>";?>
<?php     $this->widget('bootstrap.widgets.TbTypeahead', array(
    'model'=>$model,
    'htmlOptions'=>array('style'=>'height:30px','id'=>'emp_position'),
     'attribute'=>'position',
     'options'=>array(
     'source'=>array(
     'Junior Software Engineer','Software Engineer','Designer'),
     'items'=>4,
     'matcher'=>"js:function(item) {
     return ~item.toLowerCase().indexOf(this.query.toLowerCase());
      }",
    )));
    ?>
<?php //echo $form->textFieldRow($model, 'joinDate', array('class'=>'span3','value'=>$result['joinDate'],'id'=>'datepicker')); ?>

<?php echo "<br/> Join Date <br/>";?>
<?php $this->widget('zii.widgets.jui.CJuiDatePicker',array(
            'model'=>$model,
            'attribute'=>'joinDate',
            //'value'=>$result['joinDate']  ? $result['joinDate'] : "",
        // additional javascript options for the date picker plugin
        'options'=>array(
            'showAnim'=>'fold',
                    'dateFormat'=>'yy-mm-dd',
        ),
        'htmlOptions'=>array(
            'style'=>'height:30px;','id'=>'emp_date'
        )
    )); ?>

    <?php echo $form->textFieldRow($model, 'age', array('class'=>'span3','style'=>'height:30px','id'=>'emp_age')); ?>
    <?php echo $form->textFieldRow($model, 'phone', array('class'=>'span3','style'=>'height:30px','id'=>'emp_phone')); ?>
    <?php echo $form->textFieldRow($model, 'id', array('class'=>'span3','style'=>'height:30px; display:none;','id'=>'emp_id')); ?>

    <?php echo "<br/>";?>
    <?php $this->widget('bootstrap.widgets.TbButton', array('buttonType'=>'ajaxSubmit', 'label'=>'Update','type'=>'primary','htmlOptions'=>array('name'=>'update_button',),
'url'=>CController::createUrl('site/update'),
'ajaxOptions'=>array(
'type'=>'POST',
'dataType'=>'json',
'data'=>'js:$("#employeeregister-form").serialize()',
'success'=>'js:function(data){
//$("#update_err").html(data);
alert(data);
  }',
'async' => true,
)); ?>

    <?php //echo $form->error($model,'name,address,position,phone'); ?>
    <?php $this->endWidget(); ?>
    <div id="update_err"></div>
    <?php echo CHtml::link('Back to List',array('site/index')); ?> 
```

//控制器

```
$model= new EmployeeRegister();
$model->attributes  =   $_POST['EmployeeRegister'];
                                if(Yii::app()->getRequest()->getIsAjaxRequest()) {
echo CActiveForm::validate( array( $model)); 
Yii::app()->end(); 
}
$update_id= $model->id;
$name           =   $model->name;
$address    =   $model->address;
$position   =   $model->position;
$joinDate   =   $model->joinDate;
$age            =   $model->age;
$phone      =   $model->phone;

if(EmployeeRegister::model()->updateByPk($update_id, array('id'=>$update_id,'name'=>$name,'address'=>$address,'position'=>$position,'joinDate'=>$joinDate,'age'=>$age,'phone'=>$phone)))
      echo $name."'s details updated successfully";
    else 
    echo "Update failed"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:14:53.023

使用最新版本的 yii 框架可以解决你的问题 [，你可以参考这个页面](http://www.yiiframework.com/forum/index.php/topic/23982-extension-bootstrap/page__st__600)

# iphone - iPhone 4 和 iPhone 5 上不同的地图缩放

> ID：14318887
> 
> 赞同：0
> 
> 时间：2013-01-14T13:00:31.670
> 
> 标签：iphone, ios, mapkit

我正在`MapKit`为我的项目使用，到目前为止它一直非常好。这是我用于显示和居中地图的一段代码。

```
CLLocation *locSouthWest = [[CLLocation alloc] initWithLatitude:southWest.latitude longitude:southWest.longitude];
CLLocation *locNorthEast = [[CLLocation alloc] initWithLatitude:northEast.latitude longitude:northEast.longitude];
CLLocationDistance meters = [locSouthWest distanceFromLocation:locNorthEast];

MKCoordinateRegion region;
region.center.latitude = (southWest.latitude + northEast.latitude) / 2.0;
region.center.longitude = (southWest.longitude + northEast.longitude) / 2.0;
region.span.latitudeDelta = meters / 111319.5;
region.span.longitudeDelta = 0.0;

[self.mapView setRegion:region animated:YES]; 
```

问题是，它在 iPhone **4**和 iPhone **5上的工作方式****不同**。

 ****这是**iPhone 4**（*iOS5 和 iOS6 的结果相同*）：

![iPhone 4](../Images/be7aa639e4bc42da5a4934495616f419.png)

这是**iPhone 5**（使用相同的坐标）：

![iphone 5](../Images/55698c836d4724721acb1f185f029fe8.png)

**有没有人有同样的经历？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:44:03.890

这些是导致差异的代码行：

```
region.center.latitude = (southWest.latitude + northEast.latitude) / 2.0;
region.center.longitude = (southWest.longitude + northEast.longitude) / 2.0; 
```

由于屏幕尺寸不同，这必然会产生差异。

您可以在这里使地图居中的方法是使用`mapView.centerCoordinate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:56:55.187

MapKit 具有固定的缩放级别。设置地图的区域可确保该区域在地图中可见，但不会设置精确的缩放比例。这有几个好处，主要是您不能创建不成比例地缩放纬度和经度的地图（导致混乱和/或误导性的地图）。地图的框架大小不同，因此您选择的区域可以在每个设备上以不同的缩放级别显示。

作为一个实验，尝试在两个设备上将地图视图的框架设置为相同的大小。然后，如果您绝对需要地图以相同的比例显示，您可以做一些数学运算来根据地图的框架计算适当的区域。****

# facebook - 脸书开放图。元标记、本地主机、自定义操作和测试

> ID：14318893
> 
> 赞同：1
> 
> 时间：2013-01-14T13:01:23.230
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-opengraph

这是一系列关于使用 Facebook 开放图实现的问题。

因此，我对 api 进行了这样的查询： `$this->facebook->api('me/namespace:action', 'post', $args );`

我的第一个问题是帖子出现在哪里？例如，如果我使用以下参数进行调用：

```
 $args = array(
            //'message'   => 'I just posted a pub review at PubJudge.com',
        'website'=>'www.pubjudge.com',
        'user'=>current_url(),
        'link'      => 'http://www.pubjudge.com/',
        'caption'   => 'Independent, social, pub reviews.'
    ); 
```

该帖子出现在我的时间线上的“活动”下

据我了解，如果用户明确分享一个动作，它将出现在时间线上。它是否正确？

“fb:explicitly_shared”是应该在 $args 数组中传递的参数吗？

接下来是 Facebook 的自定义元数据。在这种情况下，我的对象是一个用户，我通过 $args 数组传递他们的 URL。然后，Facebook 会抓取该数组以从此链接上的自定义元标记中获取数据。它是否正确？此 url 是否必须是启动操作的 url？我可以在我的网站上没有一个页面，它只是基于 $_GET 变量生成自定义元标记 - 这样我可以让所有这些复杂的 Facebook 内容独立于主站点。

有谁知道为什么 Facebook 会为这样的开放图形操作获取数据？

最后，因为 Facebook 会像这样抓取数据，所以我无法在本地主机上测试此功能。（我可以这样做，但它会非常复杂）我选择的是 testing.domain.com 地址来测试我的网站和此功能，同时将 domain.com 作为我的主要实时稳定站点。

我还创建了两个应用程序.. 我的主应用程序和一个测试应用程序，因为如果我使用我的主应用程序，我必须将站点 url 更改为 testing.domain.com，这会破坏我的稳定站点。这是一个合适的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:42:28.870

> 据我了解，如果用户明确分享一个动作，它将出现在时间线上。它是否正确？

对，那是正确的。您可以在[Facebook 文档中找到有关显式共享](http://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/)的更多信息。要从文档中注意到，您必须将您的操作标记为能够在您的应用仪表板上明确分享，并且 Facebook 必须批准它。

> “fb:explicitly_shared”是应该在 $args 数组中传递的参数吗？

是的。

> 接下来是 Facebook 的自定义元数据。在这种情况下，我的对象是一个用户，我通过 $args 数组传递他们的 URL。然后，Facebook 会抓取该数组以从此链接上的自定义元标记中获取数据。它是否正确？

是的，Facebook 会抓取您传递的 URL，以便他们可以从该链接的 OG 标签中获取数据。

> 此 url 是否必须是启动操作的 url？我可以在我的网站上没有一个页面，它只是基于 $_GET 变量生成自定义元标记 - 这样我可以让所有这些复杂的 Facebook 内容独立于主站点。

不，它不必是生成操作的 url。您可以在您的网站上有一个单独的页面，实际上您甚至可以使用 javascript 将登陆该页面的用户重定向到更合适的页面。

> 有谁知道为什么 Facebook 会为这样的开放图形操作获取数据？

这可能是一个比你意识到的更深层次的问题。简而言之，他们正在尝试创建一个语义网。长答案将是一篇论文。

> 最后，因为 Facebook 会像这样抓取数据，所以我无法在本地主机上测试此功能。

您可以使用在大多数情况下都有效的反向代理（如果您使用反向代理的端口，我已经看到照片问题）。不是很复杂。像下面这样的东西效果很好：

```
ssh -nN -f -R externalhost.com:49080:localhost:80 your@credentials.biz 
```

> 我还创建了两个应用程序.. 我的主应用程序和一个测试应用程序，因为如果我使用我的主应用程序，我必须将站点 url 更改为 testing.domain.com，这会破坏我的稳定站点。这是一个合适的方法吗？

是的，这很正常。我们通常有一个开发应用程序 (localhost)、一个临时应用程序（用于测试的外部主机）和一个生产应用程序。

# javascript - 设置 jquery 鼠标悬停以访问 javascript 循环中的数组键？

> ID：14318894
> 
> 赞同：0
> 
> 时间：2013-01-14T13:01:27.627
> 
> 标签：javascript, jquery, google-maps

在我的循环中，用 x 正确分配了 ID，但是当我尝试用 x 分配数组函数时，它会抛出错误“此方法未定义”。我只是想知道如何正确构建这种类型的动态鼠标？任何帮助都会很棒！非常感谢，乔

```
for (x = 0; x < mapEastData.length; x++) {
    $('#marker' + x).on({
        mouseenter: function () {
            mapEastMarkers[x].setVisible(true);
        },
        mouseleave: function () {
            mapEastMarkers[x].setVisible(false);
        }
    })
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:19:57.460

我会选择使用类而不是 id 来触发悬停。

所以使用一个类，比如`marker-class`你的悬停选择器。

然后在 mouseenter / mouseleave 函数中，您应该能够使用以下内容访问该确切元素的 id： `$(this).attr('id').replace("marker" , "")`

然后替换清除 ID，以便您最终获得 ID 号。

我希望这对你有意义。我认为您当前代码的问题是 mouseenter/leave 函数不知道 var X 是什么。如果您想坚持当前的方法，您可能需要将您的 x 参数传递给这些函数。

# django - django如何注册管理命令

> ID：14318899
> 
> 赞同：2
> 
> 时间：2013-01-14T13:01:47.327
> 
> 标签：django, command, system

我在部署的 django 应用程序中遇到了一个奇怪的问题（长篇[故事](https://stackoverflow.com/questions/14317950/custom-django-management-command-not-working-when-deployed-as-egg)）。可能对我有帮助的是知道：

**django 如何检测和维护活动管理命令列表？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:50:49.317

如果您在执行管理命令时遇到问题，您应该考虑以下事项：

1.  包含该命令的应用程序必须位于`settings.INSTALLED_APPS`.
2.  要被识别为一个应用程序包必须包含一个`models.py`（虽然它可以是空的）。
3.  所有包都需要有一个`__init__.py`文件（您的应用程序的目录以及`management`and`command`文件夹）。
4.  有时 Django 似乎会因`ImportError`无法正确显示的东西而窒息 - 所以打开 a`manage.py shell`并尝试类似的东西可能会有所帮助`import MyCommand from myapp.management.commands.mycommand`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:03:53.257

`management.commands`它在已安装的应用程序中查找任何模块。有关更多详细信息，请参阅[https://docs.djangoproject.com/en/dev/howto/custom-management-commands/](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)。

# c# - 如何将 XamDataTree 图标设置为位图而不是文件名

> ID：14318902
> 
> 赞同：1
> 
> 时间：2013-01-14T13:01:56.903
> 
> 标签：c#, wpf, infragistics

我已经[设置了 XamDataTree 图像](http://help.infragistics.com/Help/NetAdvantage/WPF/2011.2/CLR4.0/html/xamDataTree_Expanded_and_Collapsed_xamDataTree_Nodes.html)，但我不想每次都将图像文件夹复制到我的调试文件夹中。相反，我想[将图像添加到我的项目资源中](https://stackoverflow.com/questions/3521883/path-for-image-files-in-project)并从那里使用它。目前没有显示图像，因为它需要一个图像路径，我给它一个实际的位图。TreeNode 中的 Icon 属性在代码的另一部分中设置。

这是我的 Xaml 代码：

```
<ig:XamDataTree
    Grid.Row="1"
    Name="MyTree" 
    ScrollViewer.CanContentScroll="True"
    ItemsSource="{Binding ComparedContents}"
    HorizontalAlignment="Stretch"
    VerticalAlignment="Stretch"
    >
    <ig:XamDataTree.CheckBoxSettings>
        <ig:CheckBoxSettings CheckBoxVisibility="Visible" />
    </ig:XamDataTree.CheckBoxSettings>
    <ig:XamDataTree.CollapsedIconTemplate>
        <DataTemplate>
            <Image Source="{Binding Path=Icon}"/>
        </DataTemplate>
    </ig:XamDataTree.CollapsedIconTemplate>
    <ig:XamDataTree.ExpandedIconTemplate>
        <DataTemplate>
            <Image Source="{Binding Path=Icon}"/>
        </DataTemplate>
    </ig:XamDataTree.ExpandedIconTemplate>
    <ig:XamDataTree.GlobalNodeLayouts>
        <ig:NodeLayout
            Key="Children"
            DisplayMemberPath="Text"
            TargetTypeName="Model.TreeNode" 
            >
        </ig:NodeLayout>
    </ig:XamDataTree.GlobalNodeLayouts>
</ig:XamDataTree> 
```

这是我的模型，每个属性都有一个私有存储值，并在它发生变化时触发一个事件。

```
public class TreeNode : INotifyPropertyChanged
{
    public Label Text;
    public System.Drawing.Image Icon;
    public ObservableCollection<TreeNode> Children;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:02:34.370

Assuming you embedded the image into your application, you can use a pack uri to load the image into the node template. Instead of using an Image type on your Icon property you should use Uri and set it equal to something like this:

```
Icon = new Uri("pack://application:,,,/Resources/Images/icon.png"); 
```

You need to modify the binding in your templates a bit because the DataContext of this template is going to be a XamDataTreeNodeDataContext. This object has a Data property which will be your TreeNode object. Your binding should be updated to:

```
<Image Source="{Binding Path=Data.Icon}"/> 
```

# algorithm - 掠夺者困境算法

> ID：14318905
> 
> 赞同：2
> 
> 时间：2013-01-14T13:02:02.463
> 
> 标签：algorithm, language-agnostic

我在[这里](https://stackoverflow.com/questions/14306193/travelling-salesman-with-profit)的前一篇文章之后重新发布了这篇文章，并提供了更多详细信息。

问题：问题包括一个掠夺者，他必须前往分布在地图上的不同城市。起始位置是已知的。每个城市都有与之相关的固定战利品。掠夺者的目的是穿越各种性质的地形。根据地形的性质，我的意思是每对城市之间的旅行成本各不相同。他必须最大化获得的战利品。

**我们所做的：** 我们生成了一个邻接矩阵（每个节点的战利品路径成本），然后采用启发式分析。它给出了一些合理的输出。

现在，现在**的问题**是，每个城市都有很少或更多的车辆，可以（通过支付）购买，可以用来旅行。车辆实际做的是降低路径成本。一旦购买了一辆车，它会一直持续到购买下一辆车的时间。是否购买车辆以及如何购买车辆由您自行决定。

我现在需要帮助。如何将车辆的概念融入我们已有的东西中？另外，任何可以帮助我们最大化利润的进一步想法。如果需要，我可以发布代码。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:44:20.603

一种方法是让一个有向边承担车辆成本，以降低成本。如果你愿意的话，你甚至可以做到这一点，减少比只是一个百分比更好。

不利的一面是，这可能会大大增加图表的大小（与您拥有不同车辆的副本数量以及它们之间的链接一样多），并且如果您的启发式不是最佳的，您可能必须对其进行修改以使其考虑新的优势积极。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:41:38.150

听起来好像[波束搜索](http://en.wikipedia.org/wiki/Beam_search)可以解决这个问题。束搜索使用启发式函数*H*和参数*k*并且工作方式如下：

1.  将集合*S*初始化为初始游戏位置。

2.  将*T*设置为空集。

3.  对于 S 中的每个游戏位置，*在*掠夺者移动后生成*S的所有可能的后继位置。*（一个*动作*是抢劫、购买车辆、移动到相邻的城市，或者掠夺者可以做的任何其他事情。）将每个这样的后继位置添加到集合*T*中。

****   *对于T*中的每个位置*p*，计算*H* ( *p* ) 以获得启发式函数*H*。（启发式函数可以考虑战利品的数量、车辆的拥有量、剩余未抢劫城市的数量以及您认为相关且易于计算的任何其他内容。）

    *****   如果您已用完搜索时间，请返回*T*中得分最高的位置。

    *   否则，将*S设置为**T*中得分最高的*k*个位置，然后返回步骤 2。******* 

 ****如果您以具有*k*个元素的[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)的形式存储*T* ，则该算法运行良好。****

# c++ - 双链表函数的一部分无法正常工作

> ID：14318909
> 
> 赞同：0
> 
> 时间：2013-01-14T13:02:38.457
> 
> 标签：c++

在这个函数中，我使用了 2 个条件，对于 response == 1 ，指针由注册号返回，并且该函数工作得很好，另一方面，如果 response==2 ，指针由字符串名称返回，在这种情况下它采用新的输入名称，但程序突然结束，

我已经添加了指针返回功能和编辑功能！请帮忙

```
 // edit student function , helping functions , pointer by registration and name 
     // at end    
 void LAB_PROJECT::edit_student()
 {
    int response = 0;
    string search_name;
    int search_reg = 0;

    cout << "\n \n  -- Select Search Option 1 or 2 Accordingly" << endl;
    cout << "\n       1--Registration ";
    cout << "\n       2--Student's Name" << " >>  " ;
    cin >> response;

    if (response==1)
    {
        cout << "\n \n Enter Registration No: ";
        cin >> search_reg;

        Node*temp1;

        temp1 = pointer_by_registration(search_reg);

        cin.ignore(1,'\n');
        string new_name;

        cout << "\n \n Enter New Name ";
        getline(cin,new_name,'\n');
        temp1->student_name = new_name;
        return;

    }
    else if(response==2)
    {
        cout << "\n \n Enter Student's Name , that you want to search " << endl;
        getline(cin,search_name,'\n');
        cin.ignore(1,'\n');
        Node*temp2;

        temp2 = pointer_by_name(search_name);
        string new_name;

        cout << "\n \n Enter New Name";
        getline(cin,new_name,'\n');
        cin.ignore(1,'\n');
        temp2->student_name=new_name;
        return;
    }
 }

 Node* LAB_PROJECT::pointer_by_name(string getin)
 {
       string checker;
       checker = getin;

       Node*temp1;
       temp1 = startptr;

       while(temp1 != NULL)
       {
           if (checker == temp1->student_name)
           {
               return (temp1);
           }
           temp1=temp1->nextptr;
       }
  }

 Node* LAB_PROJECT::pointer_by_registration(int reg_key)
{
int key = 0;
key = reg_key;

Node* temp1;
temp1 = startptr;

while(temp1 !=NULL)
{
    if(key == temp1->registration)
    {
        return(temp1);
    }
    temp1=temp1->nextptr;
 }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:16:25.540

我发现了问题，Pointer_by_name 的代码很好，

问题是我进入 `cin.ignore(1,'\n');`后

```
 `cout << "\n \n Enter New Name";`
         getline(cin,new_name,'\n');` 
```

这导致名称的最后一个字符从流线中刷新，它返回一个 NULL 指针，但程序在与另一个函数一起使用时冻结，现在工作得非常好.. 谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:23:56.470

我在这里看到的唯一一件事是您的两个搜索功能中的未定义行为：

```
Node* LAB_PROJECT::pointer_by_registration(int reg_key);
Node* LAB_PROJECT::pointer_by_name(string getin); 
```

在这两种情况下，如果未找到搜索条件，则不会返回值。你的编译器应该给你一个警告。我希望你会想要回来`NULL`。

哦，我想我应该补充一点，你真的需要测试`NULL`而不是假设函数返回了一个有效的指针。

# c# - WIF - 每个实体的索赔

> ID：14318910
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:02:38.727
> 
> 标签：c#, asp.net, wif, claims

在我的应用程序中，有分层数据（如树），用户可以访问树的任何节点，而与父节点无关。WIF 如何在此处提供帮助以及属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:53:30.223

我对 WIF 很陌生，但我想您不应该尝试将这种实体数据存储在声明中。

如果您没有使用参考会话，那么您要求您的用户通过 cookie 中的每个请求（包括图像等）向您传输潜在的大量数据。

您可能只想包含一些声明，也许考虑一下树的顶层。低于您需要检查数据库的任何内容（您与数据库的连接总是比您的用户与您的 Web 应用程序的连接快得多）。

# c++ - Win32 - xCode 4.3.3

> ID：14318911
> 
> 赞同：-3
> 
> 时间：2013-01-14T13:02:43.700
> 
> 标签：c++, xcode, winapi

我对 C++/OpenGL 等相当陌生。

我目前正在 Apple Mac 上的 xCode 中学习。我知道 Glut 文件等的标题是不同的（这是我前一段时间遇到的一个问题）。

有没有办法使用Win32等？我正在使用 xCode 4.3.3。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:53:41.970

Win32 是微软的 Windows API。在 Mac 上使用它需要的不仅仅是 Xcode 的插件；它需要一个独立的 Win32 实现。

有一些 Win32 的非 Microsoft 实现，例如 Wine，但是这些实现是为了与使用 Window 的工具链为 Windows 构建的可执行文件兼容，而不是允许知道或想要使用 Win32 的人构建 Mac 应用程序。借助 Clang 的自然交叉编译支持，很可能有一种方法可以使它工作，但至少可以说，这似乎是一种编写 Mac 应用程序的复杂方法。

相反，对于依赖于操作系统特定 API 的程序部分，您应该找到 OS X 的 API 的教程或文档。对于特定于 OpenGL 的部分，您可以使用为 Windows 制作的教程，但您需要知道如何识别哪些部分可移植地应用于 OpenGL，哪些是必须针对其他平台修改的 OpenGL*，或者是特定于 Windows 的。

[`*`例如，上次我为 Windows 做 OpenGL 时，最新的头文件是用于 OpenGL 1.1 的，其他一切都必须通过扩展而不是根据最新的 OpenGL 规范来完成，或者必须使用第三方头文件来使使用扩展看起来像标准 OpenGL .]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:04:47.883

不，这不是真的，因为您需要虚拟化 MacOSX 库。如果您使用任何标准 C++，您可以（或者可能将您的应用程序移植到 macosx）。XCode 仅适用于 Mac。

# vb.net - 获取本周的日期不能按预期工作

> ID：14318914
> 
> 赞同：0
> 
> 时间：2013-01-14T13:02:50.080
> 
> 标签：vb.net, datetime

我正在尝试获取当前周的日期（周一 - 周日）。

这是我当前的代码：

```
 Dim kw As Integer = DatePart(DateInterval.WeekOfYear, Now, , FirstWeekOfYear.FirstFourDays)
            If DatePart(DateInterval.Weekday, Now, Microsoft.VisualBasic.FirstDayOfWeek.Sunday) = 6 Then
                kw = kw + 1
            End If
            Dim CurrDateFirstDay As Date = DateAdd(DateInterval.Day, 1, ReturnDateForWeekNumber(kw))
            For i = 1 To 7

                strCurrDay = FormatDateTime(CurrDateFirstDay, DateFormat.LongDate)

........ 
```

我的问题是我的代码从 16.01.2013 开始，最后日期是下周 22.01.2013 星期四。这是为什么？为什么他从 2013 年 1 月 16 日星期三而不是 2013 年 1 月 14 日星期一开始？为什么我会得到下周的返回日期？我在做什么错？

编辑：

ReturnDateForWeekNumber:

```
Public Shared Function ReturnDateForWeekNumber(ByVal iWeek As Integer) As DateTime
    Return DateAdd(DateInterval.WeekOfYear, iWeek - 1, FirstDayOfYear)
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:51:36.313

> 我究竟做错了什么？

您应该像我一样在调试器中单步执行您的代码并观察结果：

```
Dim kw As Integer = DatePart(DateInterval.WeekOfYear, Now, , FirstWeekOfYear.FirstFourDays) 
```

这将返回当前周，即第 3 周。

```
If DatePart(DateInterval.Weekday, Now, Microsoft.VisualBasic.FirstDayOfWeek.Sunday) = 6 Then
    kw = kw + 1
End If 
```

这将检查工作日是否是一周的第 6 天（星期五）。我们不是星期五，所以如果没有输入条件。

```
Dim CurrDateFirstDay As Date = DateAdd(DateInterval.Day, 1, ReturnDateForWeekNumber(kw)) 
```

这会将 ReturnDateForWeekNumber 的结果增加一天，返回：

```
Return DateAdd(DateInterval.WeekOfYear, iWeek - 1, FirstDayOfYear) 
```

这会在一年的第一天（1 月 1 日）增加 2 周（第 3 周减去 1）周，即星期二。1 月 1 日 + 2 周 = 1 月 15 日。

现在请记住，您将一天添加到 ReturnDateForWeekNumber，这就是为什么`CurrDateFirstDay`值为 1 月 16 日。

**编辑**

我认为您的代码过于复杂，并且使用了很多遗留的 VB6 函数。我会这样做：

```
Dim myDate As Date = DateTime.Today
Dim dayDiff As Integer = myDate.DayOfWeek - DayOfWeek.Monday
Dim currentDay As Date = myDate.AddDays(-dayDiff) 'Monday

For i = 1 to 7
    Console.WriteLine(currentDay)
    'Do something with current day
    currentDay = currentDay.AddDays(1)
Next 
```

您可能需要针对您的情况进行一些调整，但我相信这种方法更简单且不易出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T09:48:39.540

```
 Dim dateStartDateOfWeek As Date = GetWeekStartDate(52, 2014)
    Dim dateEndDateOfWeek As Date = DateAdd(DateInterval.Day, 7, dateStartDateOfWeek)

Private Function GetWeekStartDate(ByVal weekNumber As Integer, ByVal year As Integer) As Date
    Dim startDate As New DateTime(year, 1, 1)
    Dim weekDate As DateTime = DateAdd(DateInterval.WeekOfYear, weekNumber - 1, startDate)
    Return DateAdd(DateInterval.Day, (-weekDate.DayOfWeek) + 1, weekDate)
End Function 
```

# php - 如何验证检查按钮和单选按钮

> ID：14318918
> 
> 赞同：0
> 
> 时间：2013-01-14T13:03:05.233
> 
> 标签：php, validation, checkbox, radio-button

我已经准备好验证号码、电子邮件和消息等。

我现在的问题是如何验证无线电/检查 btn。

这是我验证等消息的方式：

```
// Validates msg

if (!isset($_POST[$field]) || empty($_POST['message'])) {
    $error_msg .= " ";  
    $fieldStatusMessage = 'style="border:1px solid #F00"';
}
else {
    $fieldStatusEmail = '';
} 
```

如果有人可以解释或向我展示会很有帮助。我认为它真的很接近我现在在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:09:29.283

您可以执行以下操作

**示例 1**

PHP

```
<?php
  if($_Post[]) {
        if($_POST['list'] == -1)
                echo 'Please select one on the List';
         else {
                ............
         }
}
?> 
```

HTML

```
<form method="post">
 <select name="list">
         <option value="-1">Select One</option>
         <option value="1">One</option>
         <option value="2">Two</option>
</select>
<input type="submit" name="submit">
</form> 
```

**示例 2**

HTML

```
<form name="frm1" action="action.php" method="post">
    Active ? 
    <input type="radio" name="myrdo" value="Y" /> Yes
    <input type="radio" name="myrdo" value="N" /> No
    <br />
    Education:
    <input type="checkbox" name="mychk" value="G" /> Graduate
    <br />
    Country:
    <select name="country">
        <option value="" selected="selected">Select</option>
        <option value="1">USA</option>
        <option value="2">UK</option>
        <option value="3">Canada</option>
    </select>
    <br />
    <input type="submit" name="btnSubmit" value="Submit Form" />
</form> 
```

PHP

```
if($_SERVER['REQUEST_METHOD'] == 'POST'){ 
    $error_msg = array(); 
    if(!isset($_POST['myrdo'])){ 
        $error_msg[] = "No radio buttons were checked."; 
    } 
    if(!isset($_POST['mychk'])){ 
        $error_msg[] = "Graguate was checked"; 
    } 
    if(!isset($_POST['country'])){ 
        $error_msg[] = "No country as selected."; 
    } 

    if(isset($error_msg) && count($error_msg) == 0){ 
        // do some form processing 
    } 
    else{ 
        // redirect to the form again. 
    } 
} 
```

[***阅读更多***](http://www.homeandlearn.co.uk/php/php4p10.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:10:22.890

对于复选框，如果用户选中它，您将有一个 $_POST['checkboxName'] 等于“on”。如果用户取消选中它， $_POST['checkboxName'] 将不存在。

对于单选按钮，您将有一个 $_POST['radioName'] 等于所选值（html 属性值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:16:23.073

```
// if not checked consider FALSE
$checkbox = (empty($_POST['checkbox_name'])) ? FALSE : TRUE;

// if not selected consider FALSE otherwise use value from HTML.
$radio = (empty($_POST['radio_name'])) ? FALSE : $_POST['radio_name']; 
```

# asp.net - Onclick javascript引号 - ASP.NET

> ID：14318920
> 
> 赞同：1
> 
> 时间：2013-01-14T13:03:22.907
> 
> 标签：asp.net

当变量有引号或单引号时，该函数不起作用。

代码：

```
<a onclick="javascript:return OpenModal('<%# GeraLog(Eval("loe_id")) %>')" style="cursor:   pointer"> <img src="../Imagens/Visualizar.png" alt="Descrição" /></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:06:07.330

尝试使用字符串连接来解决嵌套引号冲突。

```
<a onclick='<%# "javascript:return OpenModal(" + GeraLog(Eval("loe_id")) + ");" %>'  style="cursor:   pointer"> <img src="../Imagens/Visualizar.png" alt="Descrição" /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:57:01.003

我找到了解决办法！我保留了我的代码：

```
<a onclick="javascript:return OpenModal('<%# GeraLog(Eval("loe_id")) %>')" style="cursor:   pointer"> <img src="../Imagens/Visualizar.png" alt="Descrição" /></a> 
```

在我后面的代码中，我使用了：

```
public string GeraLog(object loe_id)
    {
        tab_log tabLog = new tab_log { Tab_usuarios = { usu_id = Convert.ToInt32(ddlUsuario.SelectedValue) } };

        DateTime? Nulo = null;

        tabLog.log_data_inicio = txtPeriodoDe.Text == string.Empty ? Nulo : DateTime.Parse(txtPeriodoDe.Text);
        tabLog.log_data_final = txtPeriodoAte.Text == string.Empty ? Nulo : DateTime.Parse(txtPeriodoAte.Text);
        tabLog.Tab_usuarios.usu_id = Convert.ToInt32(ddlUsuario.SelectedValue);
        tabLog.loe_id = (int)loe_id;

        string tabela = ddlModulos.SelectedValue;

        DataTable table = tabLog.SelectLogModal(tabLog, tabela);

        System.Text.StringBuilder sb = new System.Text.StringBuilder();

        foreach (DataRow row in table.Rows)
        {
            sb.Append("O usuário: ");
            sb.Append(row["quem_alterou"]);
            sb.Append(" alterou o campo ");
            sb.Append(row["campo_alterado"]);
            sb.Append(" de ");
            sb.Append(row["valor_anterior"].ToString().Replace("\"", "&quot").Replace("\'", "&lsquo;"));
            sb.Append(" para ");
            sb.Append(row["valor_atual"].ToString().Replace("\"", "&quot").Replace("\'", "&lsquo;"));
            sb.Append(" | ");
            sb.Append(row["data"]);
            sb.Append(" - ");
            sb.Append(row["hora"]);
            sb.Append("<br>");
        }

        loe_id = sb;

        if (loe_id.ToString() == "")
        {
            loe_id = "Nenhuma informação alterada";
        }

        return loe_id.ToString();
    } 
```

感谢你们。

# android - 三星 Galaxy S3 上不显示 Toast（最新更新 4.1.2）

> ID：14318921
> 
> 赞同：8
> 
> 时间：2013-01-14T13:03:23.343
> 
> 标签：android, toast, galaxy, samsung-mobile

我有一个以下列方式显示的吐司：

```
Toast.makeText(context, "The message", Toast.LENGTH_LONG).show(); 
```

我绝对确定我正在从 UI 线程显示 toast，我可以补充一点，它适用于许多设备，包括**Galaxy S3**的旧更新，但在最新更新之后，我的 toast 都没有显示。

有没有其他人经历过这个并有解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T13:11:46.053

在较新的 Android 手机中，应用设置中有一个“显示通知”复选框，出于某种原因，如果禁用通知，它也会禁用 Toast。该问题已在此处报告：

[http://code.google.com/p/android/issues/detail?id=35013](http://code.google.com/p/android/issues/detail?id=35013)

但是查看源代码：

[https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/services/java/com/android/server/NotificationManagerService.java](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/services/java/com/android/server/NotificationManagerService.java)

看起来可能是故意的：

第 114 行：

```
private static final boolean ENABLE_BLOCKED_TOASTS = true; 
```

第 693-707 行：

```
final boolean isSystemToast = ("android".equals(pkg));
if (ENABLE_BLOCKED_TOASTS && !isSystemToast && !areNotificationsEnabledForPackageInt(pkg))     {
    Slog.e(TAG, "Suppressing toast from package " + pkg + " by user request.");
    return;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T10:03:02.900

由于 OP 在过去 24 小时内没有出现，我将发布在[android-developers Google Group的一个](https://groups.google.com/forum/?fromgroups#!forum/android-developers)[线程](https://groups.google.com/d/topic/android-developers/K7pjy3Gm5Lk/discussion)上找到的解决方案。

问题是`Show Notifications`在设置中未选中此应用程序的选项（这在较新版本的 Android 中是可能的）。这不仅可以防止在通知栏中显示通知，还可以防止显示 toast。

[在这里](http://code.google.com/p/android/issues/detail?id=35013)打开了一个错误。

# silverlight - 如何在不在 xaml 中的代码中设置 ListBox.ItemsPanel？

> ID：14318929
> 
> 赞同：1
> 
> 时间：2013-01-14T13:03:36.447
> 
> 标签：silverlight

我在 C# 代码中创建了一个 ListBox（在转换器中我决定必须显示哪个控件）。不幸的是，我无法在 C# 代码中将 ItemsPanel 设置为 WrapPanel。目前我有这样的代码（作为解决方法）：

在 xaml 文件 (ResourceDictionary) 中：

```
<ItemsPanelTemplate x:Key="HorizontalWrapPanelItemsPanelTemplate" >
    <toolkit:WrapPanel Orientation="Horizontal" />
</ItemsPanelTemplate> 
```

在 C# 文件（转换器）中：

```
listBox.ItemsPanel = Application.Current.Resources["HorizontalWrapPanelItemsPanelTemplate"] as ItemsPanelTemplate; 
```

它工作正常，但我会有这样的代码：

```
listBoxEdit.ItemsPanel = new WrapPanel();   //Not Work 
```

或者

```
WrapPanel wrapPanel = new WrapPanel();
listBoxEdit.ItemsPanel = new ItemsPanelTemplate(wrapPanel);   //Not Work 
```

我有可能有这样的代码吗？或者从我目前的解决方法中是否存在更好的代码？

坦克 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:12:18.240

在 WPF 中，您将使用 FrameworkElementFactory ：

```
FrameworkElementFactory factoryPanel = new FrameworkElementFactory(typeof(WrapPanel));
factoryPanel.SetValue(WrapPanel.OrientationProperty, Orientation.Horizontal);

ItemsPanelTemplate template = new ItemsPanelTemplate();
template.VisualTree = factoryPanel;

menu.ItemsPanel = template; 
```

在 Silverlight 中这不起作用，您必须使用 XAMLReader ：

```
listBoxEdit.ItemsPanel = (ItemsPanelTemplate)XamlReader.Load(@"<ItemsPanelTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' >
    <toolkit:WrapPanel Orientation="Horizontal" />
</ItemsPanelTemplate>"); 
```

来自：http: [//blogs.msdn.com/b/scmorris/archive/2008/04/14/defining-silverlight-datagrid-columns-at-runtime.aspx](http://blogs.msdn.com/b/scmorris/archive/2008/04/14/defining-silverlight-datagrid-columns-at-runtime.aspx)

# sqlite - 在 WinRT 上查找 SQLite 数据库

> ID：14318931
> 
> 赞同：1
> 
> 时间：2013-01-14T13:03:44.763
> 
> 标签：sqlite, windows-8, windows-runtime

当我的应用程序启动时，我可以按照此处的建议将预填充的 SQLite 数据库复制到应用程序 LocalFolder (http://timheuer.com/blog/archive/2012/06/28/seeding-your-metro-style-app-with -sqlite-database.aspx）。

现在我希望能够在调试时获取数据库的副本，以便我可以检查其内容并检查它是否符合预期。无论如何，在使用模拟器时，或者甚至在本地运行时，如果没有这样做？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:09:53.600

它将位于以下某处：

```
C:\Users\<your-username>\AppData\Local\Packages\<your-application-package>\LocalState\ 
```

模拟器和本地应用程序都使用相同的存储位置。

# c++ - 在多线程程序中调用 fftw

> ID：14318933
> 
> 赞同：2
> 
> 时间：2013-01-14T13:04:00.847
> 
> 标签：c++, multithreading, fftw

我想在线程中使用 fftw3。但是粘贴在[http://codepad.org/lIjdGF5z](http://codepad.org/lIjdGF5z)的代码会导致“双重释放或损坏”错误。如何正确调用线程中的 fftw3 例程。谢谢！您可以通过命令“g++ test.cpp -lfftw3_threads -lfftw3 -lboost_thread”编译代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:36:25.160

我相信调用`fftw_plan_dft_2d`是不可重入的，这意味着它不能同时在多个线程中调用，即使你正在创建不同的计划。唯一线程安全的 fftw 函数是`fftw_execute`根据文档[线程安全页面](http://www.fftw.org/fftw3_doc/Thread-safety.html#Thread-safety)第 2 段的变体。

此外，正如评论中提到的 Paul R.，您应该只在开始时创建一次计划，然后一遍又一遍地使用它们。它会快得多。此外，根据线程安全文档页面的第 3 段，您可以在多个同时调用`fftw_execute`. 因此，如果您的变换大小相同，则所有线程只需要一个计划。

# rest - HttpClient 4.1.x - 处理正文内容的协议错误

> ID：14318935
> 
> 赞同：0
> 
> 时间：2013-01-14T13:04:13.997
> 
> 标签：rest, error-handling, apache-httpclient-4.x

我一直在研究使用 HttpClient 4.1.x 在 Spring 下处理 RESTful 调用的应用程序系统。

虽然我在直接处理 httpclient 以及用作 RestTemplate 的传输方面都做得很好，但我发现我需要一些我不确定在执行中是否涵盖的东西。

“BasicResponseHandler”将内容响应视为字符串并返回它，前提是来自服务器的响应小于 300。我正在使用的 RESTful 系统提供 XML 文档作为错误响应的一部分（状态代码 >= 400 ）。此 XML 响应包含一些*可能*对客户端开发人员有用的信息。

我想看看是否有人有任何通过 ResponseHandler 接口处理此问题的经验。本质上，BasicResponseHandler 将在状态 >= 300 的情况下抛出 ClientProtocolException。处理 AbstractHttpClient 实现将捕获该异常，静默消耗实体，然后重新抛出抛出的 IOException (ClientProtocolException)。

是否建议创建一个 ClientProtocolException 的子类来包含附加信息？

在错误状态的情况下，将任何现有文档解组为其各自的类型（如果可用），然后将其抛出，从而保留响应的内容。

还是我缺少另一种机制来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:45:25.540

该`ResponseHandler`接口的目的是使调用者能够消化 HTTP 响应，而无需在内存中缓冲消息内容。使用此接口的一个额外好处是不必担心由 HttpClient 自动处理的资源释放问题。

在您的特定情况下，您应该考虑从低级 HTTP 响应内容构建更高级别的域对象，而不是返回一个简单的、不具代表性的字符串。

因此，与其抛出异常，不如考虑向调用者返回一个对象，该对象由请求状态（成功、失败、部分响应等）和已解析的 XML 文档或表示消息内容的 JAXB 对象组成。

# android - 如何获取访问过的网站历史记录（Android）？

> ID：14318938
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:04:25.980
> 
> 标签：android, web

我想开发一个可以获取所有**访问过的网站的 Android 应用程序**

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:11:27.400

每个浏览器都会为自己保存历史记录。所以你需要为每个浏览器实现一个实现（如果可能的话）。我希望大多数浏览器对历史文件进行加密，使它们不可读。除非我明确允许，否则我不想让应用程序查看我的浏览历史记录。但是没有android许可，所以这是不可能的。也许有一种方法可以访问浏览器的历史文件，但这可能需要 root，我仍然认为你不应该这样做。

# jquery-ui - 如何使用 jqueryUI 使 fancybox 可调整大小

> ID：14318939
> 
> 赞同：0
> 
> 时间：2013-01-14T13:04:35.167
> 
> 标签：jquery-ui, fancybox

我使用 fancybox 来改善我的图像体验。为了使图像可调整大小，我尝试使用 jqueryUI 的 api：

```
$("#fancybox-content").resizable(); 
```

遗憾的是 .resizable() api 不起作用。我未能调整fancybox 的大小。有什么建议吗？多谢。

# msbuild - NuGet 包还原不获取构建目标程序集（工具）

> ID：14318945
> 
> 赞同：4
> 
> 时间：2013-01-14T13:05:08.260
> 
> 标签：msbuild, continuous-integration, nuget, nuget-package, fody

我将[Fody ProperyChanged](https://github.com/Fody/PropertyChanged)添加到我的解决方案中的两个项目中。解决方案上启用了包还原。但是，TFS 构建服务构建失败并出现以下错误：

> WindowsUI.csproj (443)：未找到导入的项目“SolutionDir\Tools\Fody\Fody.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。

该文件夹确实不存在。显然，我可以将其签入源代码控制。但是，它不应该由 NuGet 包还原填充吗？还是我误解了 NuGet 包还原的作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-09T09:31:29.083

我在尝试在 Visual Studio Online 上构建解决方案时遇到了类似的问题。问题是包在项目构建之前被恢复，但在此之前项目文件和包中的目标包含（仍待恢复）已经被解释。

使用这里描述的 before build 钩子：

[http://sedodream.com/2010/10/22/MSBuildExtendingTheSolutionBuild.aspx](http://sedodream.com/2010/10/22/MSBuildExtendingTheSolutionBuild.aspx)

在您的 before.solutionname.sln.targets 文件中放置类似这样的内容，以强制在构建第一个项目之前恢复所有包：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0"
     DefaultTargets="Build"
     xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

<Target Name="BeforeBuild" BeforeTargets="Build">
 <Message Text="Restoring all nuget packages before build" Importance="high">
 </Message>
<Exec Command=".\.nuget\NuGet.exe restore YourSolution.sln" />
</Target>
</Project> 
```

如果您有外部包源，请在您的 nuget.config 文件中配置它们，该文件也应该在 .nuget 文件夹中。例如：

```
<configuration>
  <solution>
    <add key="disableSourceControlIntegration" value="true" />
  </solution>
  <packageSources>
    <add key="NuGet official package source" value="https://nuget.org/api/v2/" />
    <add key="YourSource" value="http://yoursource.somewhere.net/nuget" />
  </packageSources>
  <packageRestore>
    <!-- Allow NuGet to download missing packages -->
    <add key="enabled" value="True" />

    <!-- Automatically check for missing packages during build in Visual Studio -->
    <add key="automatic" value="True" />
  </packageRestore>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T00:47:09.190

更新：此答案现在仅适用于 1.13.0.0 之前的版本。

里面的文件`SolutionDir\Tools\Fody`不能通过nuget部署，需要签入源码管理

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T22:17:53.210

从 1.13.0.0 版（2013 年 3 月 23 日发布）开始，Fody 是一个 100% 的 nuget 部署工具，因此它可以与包还原一起使用。

[https://nuget.org/packages/Fody/](https://nuget.org/packages/Fody/)

这将在您安装 Fody Nuget 时出现 [https://github.com/Fody/Fody/blob/master/NuGet/readme.txt](https://github.com/Fody/Fody/blob/master/NuGet/readme.txt)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T18:02:06.963

当我尝试在 NuGet 包中发布构建更新时，您遇到了同样的问题。**问题是在**构建过程中调用了 NuGet 包还原。因此，如果 NuGet 包还原还原已导入的 .targets 文件，则还原为时已晚。到文件写入磁盘时，`<Import`由于文件不在磁盘上，该元素已被评估并跳过。

我发现的最好的事情是构建另一个项目来为您调用包还原。为了在安装 NuGet 包时为我自己的[SlowCheetah NuGet](http://nuget.org/packages/SlowCheetah)`packageRestore.proj`包解决这个问题，我在与 .csproj/.vbproj 相同的目录中创建了一个文件。然后用户可以构建此项目文件，然后构建 .sln/.csproj/.vbproj。通过这样做，NuGet 包被恢复，然后构建过程开始。

如果您有兴趣使用我的`packageRestore.proj`我可以将 SlowCheetah NuGet 包的那一部分重新分解为它自己的一部分，并且您的 NuGet 包可以依赖于那个。如果您对此感兴趣，请告诉我。

# unicode - 常见脚本的示例文本

> ID：14318946
> 
> 赞同：1
> 
> 时间：2013-01-14T13:05:10.027
> 
> 标签：unicode, localization, fonts, internationalization

Windows 字体选择器对话框根据所选的“脚本”显示不同的文本（我认为对应于旧版[Windows 代码页](http://en.wikipedia.org/wiki/Code_page#Windows_.28ANSI.29_code_pages)）。但是，我想预览支持未在此处列出的脚本的字体，并且我想知道是否有用于此目的的短（约 8-12 个字符）字符串资源。

这是我目前所得到的，基于 Windows 字体选择器中的预览文本：

*   拉丁语：AaBbYyZz
*   希腊语：AaBbΑαΒβ
*   西里尔文：AaBbБбФф
*   希伯来语：AaBbנסשת
*   阿拉伯语：AaBbابجدهوز
*   泰语：AaBbอักษรไทย
*   韩语: 가나다AaBbYyZz
*   日文：Aaあアァ亜宇
*   中文：中文字型翻译
*   梵文：माता
*   古尔穆基语：ਮਾਤਾ
*   古吉拉特语：માતા
*   泰米尔语：அம்மா</li>
*   泰卢固语：అమ్మ
*   卡纳达语：ಅಮ್ಮ

中文文本来自字体选择器对话框中的繁体中文预览文本 - 我想要适合简体和繁体字体的文本，所以我不确定这个。

列表末尾的六个南亚文字都使用了“母亲”这个词，这似乎有点奇怪，但我会为马拉雅拉姆语使用相同的模式：

*   马拉雅拉姆语：അമ്മ

然而，在[孟加拉语](http://bn.wikipedia.org/wiki/%E0%A6%AE%E0%A6%BE)中，“母亲”显然只有两个字符长 (মা)，所以我更愿意为该语言找到其他内容。

我缺少以下语言/脚本的示例文本：

*   亚美尼亚人：？
*   孟加拉语：？
*   奥里亚：？
*   老：？
*   藏语：？
*   格鲁吉亚语：？

# asp.net-mvc - 在 Azure 云服务中看不到应用程序错误

> ID：14318949
> 
> 赞同：0
> 
> 时间：2013-01-14T13:05:20.117
> 
> 标签：asp.net-mvc, azure

所以最后我将我的 MVC 应用程序发布到 Azure 云服务。我的数据库也在上面。将 WindowsAzure 项目添加到我的解决方案并将我的 2 个项目（模型和 Web）添加为角色后，我可以在本地运行该应用程序。

但是当我运行 URL 时出现错误：

> **说明：**服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。

所以我设置并重新发布，但我仍然得到同样的错误

我需要强制 Azure 告诉我发生了什么并揭示错误，有人知道吗？

[http://bizoptcloudservice01.cloudapp.net](http://bizoptcloudservice01.cloudapp.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:25:54.840

不，Azure 云服务中没有内置日志。您可以实现自己的，但这涉及一些实现。在我的解决方案中，我创建了一个自定义错误页面。我的网络配置如下所示：

```
<customErrors mode="On" defaultRedirect="~/error/Error">
 ...
</customErrors> 
```

我的视图/共享目录中有一个名为“Error.cshtml”的视图。使用上面的配置，只要我的应用程序出现错误，就会显示它。

```
@model System.Web.Mvc.HandleErrorInfo

@{
    ViewBag.Title = "Error";
}

<h2> Sorry, an error occurred while processing your request!!?!</h2>

<div>
    Try again.  If the problem persists...
    Close all your browser windows and re-login to the application. If the problem still persists...
    Contact the service desk with the details of this error.
</div>

        <h3>Error Details</h3>
        <div>
        <strong>
        @Model.Exception.Message
        </strong>
            <pre>@Model.Exception.StackTrace</pre>
    </div>
    </div>
</div> 
```

此外，为了使上述工作正常，您需要将其添加到 Global.ascx.cs。它定义了出现错误时应用程序的默认行为。像这样：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute()); 
    } 
```

[这是一篇博客文章，其中详细讨论了它。](http://blog.dantup.com/2009/04/aspnet-mvc-handleerror-attribute-custom.html)

那篇文章和这个答案也记录了错误。如果你想走那条应该让你开始的路线：

[在 ASP.NET MVC 控制器结果中设置 HTTP 状态不会呈现视图](https://stackoverflow.com/questions/3159727/setting-http-status-in-asp-net-mvc-controller-results-does-not-render-view/3160526#3160526)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T05:23:00.287

检查您是否没有使用转换覆盖您的 web.config 设置。适用于 MVC 项目的 Visual Studio 2012 模板会自动将此行添加到 web.config.release 文件中：

发布应用程序时，您的 web.config 可能正在转换。

**编辑：**另外，您可能想查看 ELMAH，它是一个很棒的日志记录工具，很容易添加到您的项目中，并且会让您看到每个错误的信息丢失：

*   项目页面：[http ://code.google.com/p/elmah/](http://code.google.com/p/elmah/)
*   Hanselman 的解释：[http ://www.hanselman.com/blog/ELMAHErrorLoggingModulesAndHandlersForASPNETAndMVCToo.aspx](http://www.hanselman.com/blog/ELMAHErrorLoggingModulesAndHandlersForASPNETAndMVCToo.aspx)
*   Nuget 包：[http ://nuget.org/packages/elmah/](http://nuget.org/packages/elmah/)

# sql - 从具有 SQLite 中的公共字段的数据库表中选择行

> ID：14318950
> 
> 赞同：1
> 
> 时间：2013-01-14T13:05:28.060
> 
> 标签：sql, sqlite

我有一张如下表：

创建表table1（id整数，名字文本，姓氏文本）；

### 名字姓氏

======== =========
1 本·泰勒
2 抢劫·泰勒
3 抢劫·史密斯
4 抢劫僵尸
5 彼得·史密斯
6 本·史密斯
7 彼得·泰勒

我想选择带有 lastname 的行，其中 lastname 必须由 ben 和 rob 共享，firstnames 必须是 ben 和 rob。
因此在上表中，选择查询的结果必须是：
1 ben taylor
2 rob taylor
3 rob smith
6 ben smith

获得上述结果的 sql 查询必须是什么？
我试过 - `select * from table1 as a,table1 as b where a.firstname='ben' and b.firstname='rob' and a.lastname=b.lastname`这加入了所有结果行，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:16:48.993

您可以使用两个过滤连接来要求与 Ben 和 Rob 共享姓氏：

```
select  *
from    Table1 t1
join    Table1 rob
on      rob.firstname = 'rob'
        and t1.lastname = rob.lastname
join    Table1 ben
on      ben.firstname = 'ben'
        and t1.lastname = ben.lastname
where   t1.firstname in ('ben', 'rob') 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/7790d/2/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:20:10.127

```
select * 
from table1 where first_name = 'ben' or first_name = 'rob' 
and last_name 
in (select last_name from table1 where first_name = 'rob' and last_name 
in (select last_name from table1 where first_name = 'ben')) 
```

# php - 在正则表达式中重用匹配组

> ID：14318955
> 
> 赞同：3
> 
> 时间：2013-01-14T13:05:38.717
> 
> 标签：php, regex

我正在尝试匹配：“{{ loop (something) }}”和第一个 {{ /loop (that something) }} 之间的所有内容

文本示例：

```
{{ LOOP data }}
  <span> Member key       =  {{.key}}  </span>
  <span> Member value     =  {{.}}     </span>
  <span> Member member    =  {{name}}  </span>
  <span> Iteration number = {{.counter}} </span>
{{ /LOOP data }} 
```

这是正则表达式不起作用：

```
/\{\{\s+loop\s+(.+?)\s+\}\}([\w\W]+?)\{\{\s+\/loop\s$1\s+\}\}/i 
```

如您所见，我正在尝试使用“$1”重用第一个匹配的组：我错过了什么？

php代码如下：

```
$text = '
{{ LOOP data }}
  <span> Member key       =  {{.key}}  </span>
  <span> Member value     =  {{.}}     </span>
  <span> Member member    =  {{name}}  </span>
  <span> Iteration number = {{.counter}} </span>
{{ /LOOP data }}   
';

preg_match('/\{\{\s+loop\s+(.+?)\s+\}\}([\w\W]+?)\{\{\s+\/loop\s\1\s+\}\}/i', $text, $match);
print_r($match);
die; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T13:07:25.137

相信你想要`\1`的，不会`$1`的。

更多信息：[http ://www.regular-expressions.info/brackets.html#usebackrefinregex](http://www.regular-expressions.info/brackets.html#usebackrefinregex)

# android - 在editText中的每个数字之间自动添加点

> ID：14318956
> 
> 赞同：0
> 
> 时间：2013-01-14T13:05:40.023
> 
> 标签：android, android-edittext

我正在制作一个 android 应用程序，但我有一个问题，如何自动添加点以插入连字符和数字 EditText。

```
EditText editText1 = (EditText) findViewById(R.id.editText1); 
```

例子：

我插入 123456789 和 EditText 应该显示 12.234.5678-9 或者当你插入时，添加点和破折号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:10:03.580

我认为您正在寻找[`addTextChangedListener`](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)方法。您可以为您的edittext添加一个侦听器，然后使用[`afterTextChanged`](http://developer.android.com/reference/android/text/TextWatcher.html#afterTextChanged%28android.text.Editable%29)方法直接修改其中的文本以添加您的点。

我希望这能帮到您 ：）

# c++ - 在模板虚拟类层次结构中调用基类方法

> ID：14318958
> 
> 赞同：4
> 
> 时间：2013-01-14T13:05:52.847
> 
> 标签：c++, templates, virtual

假设我有以下类层次结构：

```
template< class T >
class TestBase {

public:

    virtual T const & do_foo() = 0;

};

template< class T >
class TestDerived : public virtual TestBase< T > {

public:

    virtual int do_bar() {
        return do_foo() + 1;
    }

}; 
```

GCC 吐出以下内容：

```
error: there are no arguments to ‘do_foo’ that depend on a template parameter, so a declaration of ‘do_foo’ must be available [-fpermissive]
note: (if you use ‘-fpermissive’, G++ will accept your code, but allowing the use of an undeclared name is deprecated) 
```

现在，如果我将其更改为从从已知类型实例化的 TestBase 派生（例如`class TestDerived : public virtual TestBase< int >`，此代码段编译得很好，因此问题显然与编译时未知的基类类型有关。但由于我没有实例化对象任何地方的任何一个班级，我都不明白为什么这很重要。

基本上，我将如何在不求助于的情况下解决错误`-fpermissive`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T13:14:18.100

解析模板时会查找非依赖名称（即不依赖于模板参数的名称），而不是在实例化模板时查找。您需要创建`do_foo`一个从属名称。基本上有两种方法可以实现这一点：

```
virtual int do_bar() {
    return this->do_foo() + 1;
} 
```

或者

```
template< class T >
class TestDerived : public virtual TestBase< T > {

public:
    using TestBase<T>::do_foo;

    virtual int do_bar() {
        return do_foo() + 1;
    }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:17:58.483

它不会因为它的美丽而赢得任何奖项，但这段代码按预期工作，编译器没有抱怨。

```
virtual int do_bar() {
    return ((TestBase<T> *) this)->do_foo() + 1;
} 
```

# fortran - fortran openmp lapack ZGEEV

> ID：14318959
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:05:53.560
> 
> 标签：fortran, openmp, lapack

是否可以多线程子例程？我喜欢使用 openmp 在多核上的 lapack 模块中运行 ZGEEV 子例程，以加快速度。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:41:19.450

是的，在这种情况下。LAPACK 使用 BLAS 来获得性能，并且有许多高效的多线程 BLAS 版本（例如 MKL、ACML、ATLAS）。因此，您可以使用该级别的线程来提高性能，但我必须说，根据我的经验，对角化器的加速是有限的。

但是，更一般地说，您必须自己并行化代码。在这种情况下，您会很幸运，因为重要层的线程版本已经存在。

# .net - 在引用程序集的多个版本之间自动切换

> ID：14318964
> 
> 赞同：-1
> 
> 时间：2013-01-14T13:06:12.160
> 
> 标签：.net, reflection, reference, emgucv, early-binding

我需要从包含一个 C# WinForms 项目的解决方案中引用 EmguCV。

同一个库有四个版本，即 x86 和 x64，每个版本都支持和不支持 GPU。该库需要引用 EmguCV 的托管 DLL 以及 OpenCV 的非托管 DLL。通过构建后事件将正确的非托管版本复制到`[Bin]`文件夹很容易。

我希望能够通过代码轻松地在托管引用之间切换。可能类似于以下内容：

```
public enum EnumEmguCvTarget
{
    None, // Do not use EmguCv
    EmguCvTargetTbb86, // Target EmguCv for x86 without GPU.
    EmguCvTargetGpu86, // Target EmguCv for x86 with GPU.
    EmguCvTargetTbb64, // Target EmguCv for x64 without GPU.
    EmguCvTargetGpu64, // Target EmguCv for x64 with GPU.
}

public EnumEmguCvTarget EmguCvTarget
{ get { return (EnumEmguCvTarget.EmguCvTargetGpu64); } } 
```

由于我在编译时引用这些程序集（不是后期绑定），有没有一种方法可以基于 的值以编程方式在版本之间切换`[EmguCvTarget]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:07:39.323

第 1 步：为您正在使用的对象创建接口`EmguCv`并将它们放在单独的`AnyCpu`项目中。如果这些对象没有通用接口，或者当您无法更改这些对象时，您需要为这些类创建自己的包装对象。这些接口在它们自己的程序集中定义很重要，因为您将从自己的所有代码中引用此程序集。

```
 public interface IEmguCv{ /* methods and proeprties */ }
 public class EmguCv : IEmguCv { } 
```

现在在您现有的应用程序中，使用反射或`Activator.CreateInstance`加载正确的程序集：

```
 // which assembly to load depends on your configuration
 Assembly emguAssembly = Assembly.Load("EmguX64");
 Type emguType = emguAssembly.GetType("EmguCvClassYouAddedInterfacesTo");
 IEmguCv object = (IEmguCv)Activator.CreateInstance(emguType); 
```

从这里您可以使用 IEmguCv 接口，该接口将为您提供强大的绑定、IntelliSense 和您期望的所有其他功能，但您将能够根据您所在的上下文动态加载程序集。

如果您需要在 EmguCv 对象上调用非默认构造函数，那么您可以使用[`Activator.CreateInstance(Type, Object[], Object[])`](http://msdn.microsoft.com/en-us/library/4b0ww1we.aspx)重载，或者通过[`Type.GetConstructor(Type[]).Invoke()`](http://msdn.microsoft.com/en-us/library/h93ya84h.aspx).

一旦定义了接口，您还可以使用 Unity 或 NInject 等库，以便您可以使用这些 DI 容器为您完成反射工作。

# angularjs - 如何为 AngularJS 模块提供配置？

> ID：14318965
> 
> 赞同：10
> 
> 时间：2013-01-14T13:06:24.657
> 
> 标签：angularjs, configuration, dependency-injection

目前，我正在将传统应用程序与一些使用 AngularJS 编写的动态部分结合起来。我想从我的服务器提供一些配置到我的模块。在这种情况下，我想配置应用程序“基本”URL。所有模板都可以在特定位置找到，该位置由服务器确定。

所以我尝试了这样的事情：

```
angularForm.config(
 function($routeProvider, TemplateLocator) {
    $routeProvider.when('/', {
        controller : TestController,
        templateUrl : TemplateLocator.getTemplate('FormOuterContainer')
 });
}); 
```

在服务器上：

```
<script type="text/javascript">
 angular.module('BoekingsModule.config', []).provider('TemplateLocator', function() {
        this.$get = function() {
            return // something
        }

        this.getTemplate = function(name) { return 'location...'; }
    });
 </script> 
```

但是，我不确定这是正确的方法。简而言之：**如何在不更改模块本身的情况下为模块提供一些（外部）配置？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T07:55:08.217

你可以做几件事

1.  在服务器上渲染 js 中的位置。

    **优点**：更少的请求 -> 更好的性能（通常）

    **缺点**：

    *   将服务器端渲染与 SPA 相结合会使系统更加复杂，从而导致更高的维护成本。
    *   如果要在服务器端渲染中混合使用，则很难正确压缩 js 文件，在 html 中嵌入 js 也很丑陋。
2.  将模板位置提取到[服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)。

    从此服务中，您可以使用[$resource](http://docs.angularjs.org/api/ngResource.$resource)从服务器获取 json 格式的数据。这使事情变得更简单，但它也可能增加您的 Web 服务器的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T13:27:17.410

哇，已经很久了。我完全忘记了这篇文章。

所以，最后我决定最好使用另一种方法。就像 iwein 所说，将 SPA 与服务器端渲染相结合会使应用程序变得更加复杂。因此，我将 SPA 部分提取到一个单独的应用程序中，该应用程序又从（在我的情况下）JSP 中引用。

当我的模块需要一些额外的配置时，它会使用 REST API 来获取它。这样，应用程序的 SPA 部分与服务器端渲染部分完全分离。

# titanium - 共享一台安卓设备进行开发

> ID：14318970
> 
> 赞同：0
> 
> 时间：2013-01-14T13:06:40.887
> 
> 标签：titanium

我们有几个人（在不同的城市）开发钛。我们只有一台设备来检查应用程序在真实设备上的工作方式。我们可以以某种方式共享一台设备来检查应用程序在真实设备上的工作方式吗？

这个想法是让一台具有远程访问功能的 PC 和 Titanium 运行连接的 git\mercurial 存储库。通过 USB 连接到此 PC 的 Android 设备。用户通过远程控制连接到 PC，从存储库中提取数据并在设备上运行应用程序。

我们遇到的问题是如何在 PC 上访问 Android 设备的屏幕来控制它。

有人知道如何组织它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:23:02.993

这个链接（http://code.google.com/p/androidscreencast/）说它会有所帮助，但它有局限性。如果您在本地模拟器上进行大部分测试并且物理设备是功能的最终检查，我想这个解决方案会很有意义。

# nosql - 2013年nosql的状态如何？

> ID：14318971
> 
> 赞同：0
> 
> 时间：2013-01-14T13:06:42.557
> 
> 标签：nosql

我的问题似乎是dump，但是因为我在研究这个新技术，所以我发现NoSql从一开始就发生了变化，例如一开始就有*看到你自己的更新*的问题，例如Facebook没有让用户更新他们的评论由于*一次写，读很多*

那么，我是否更改了我在 2010-2012 教程中阅读的所有概念？

NoSql 是否击败了[CAP 定理](http://en.wikipedia.org/wiki/CAP_theorem)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:56:11.350

我同意这很容易变成讨论。我将根据我的经验简要回答您的两个问题：

1.  不，概念没有改变。随着许多公司进入 NoSQL 领域，这种情况似乎在增长。谨防供应商承诺！

2.  没门。今天早上刚读了这篇文章，它很好地解释了 CAP 定理的一些问题：http: [//codahale.com/you-cant-sacrifice-partition-tolerance/](http://codahale.com/you-cant-sacrifice-partition-tolerance/)

# excel - 从用户输入变量中查找和替换单独 Word 文档中的文本

> ID：14318973
> 
> 赞同：0
> 
> 时间：2013-01-14T13:06:47.230
> 
> 标签：excel, vba, ms-word

我制作了一个 VBA 宏，它从 Excel 电子表格生成 MailMerge，在 Word 中创建新文档。

我需要使用用户输入变量 InputtedModuleCode 对 Word 文档中的特定短语（'ANTHXXXX'）运行查找和**替换**。

宏运行没有错误，但我无法找到并替换它。我在下面包含了整个宏脚本。脚本的相关行位于注释下方：

**' 查找和替换模块代码**

...距离脚本底部大约 10 行。

```
Sub AAMerge()
'
' AAMerge Macro
'

'
    'Prompt user to input Module Code
    Dim InputtedModuleCode As String
    InputtedModuleCode = InputBox("Enter Module Code here, e.g. ANTH1001")
    'Prompt user to input Module Code
    Dim InputtedSubmissionDeadline As String
    InputtedSubmissionDeadline = InputBox("Enter essay submission deadline. Must be format dd/mm/yyyy hh:mm:ss")
    'Copy data into new spreadsheet
    Cells.Select
    Selection.Copy
    Workbooks.Add
    ActiveSheet.Paste
    Application.CutCopyMode = False
    With Selection.Font
        .Name = "Arial"
        .Size = 12
        .StrikeThrough = False
        .Superscript = False
        .Subscript = False
        .OutlineFont = False
        .Shadow = False
        .Underline = xlUnderlineStyleNone
    End With
    With Selection.Font
        .Name = "Arial"
        .Size = 10
        .StrikeThrough = False
        .Superscript = False
        .Subscript = False
        .OutlineFont = False
        .Shadow = False
        .Underline = xlUnderlineStyleNone
    End With
    ' Move GradeMark Grade Column
    Columns("H:H").Select
    Selection.Copy
    Columns("P:P").Select
    ActiveSheet.Paste
    ' Delete Overlap/Internet Overlap/Publications Overlap/Student Papers Overlap columns
    Columns("C:C").Select
    Selection.Delete Shift:=xlToLeft
    Selection.Delete Shift:=xlToLeft
    Columns("F:J").Select
    Selection.Delete Shift:=xlToLeft
    ' insert Portico SCN formula
    Range("F2").Select
    ActiveCell.FormulaR1C1 = "SCN (Portico)"
    Range("F3").Select
    ActiveCell.FormulaR1C1 = "=IFERROR(VLOOKUP((UPPER(CONCATENATE(RC[-5],""_"",(LEFT(RC[-4],1)),""_" & InputtedModuleCode & """))),'N:\EssaySubTrial\[Student List 201213.xls]Sheet1'!C1:C9,6,FALSE),"""")"
    Range("F3").Select
    Dim LR As Integer
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("F3").AutoFill Destination:=Range("F3:F" & LR), Type:=xlFillDefault
    ' insert Portico student email
    Range("G2").Select
    ActiveCell.FormulaR1C1 = "Email (Portico)"
    Range("G3").Select
    ActiveCell.FormulaR1C1 = "=IFERROR(VLOOKUP((UPPER(CONCATENATE(RC[-6],""_"",(LEFT(RC[-5],1)),""_" & InputtedModuleCode & """))),'N:\EssaySubTrial\[Student List 201213.xls]Sheet1'!C1:C9,7,FALSE),"""")"
    Range("G3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("G3").AutoFill Destination:=Range("G3:G" & LR), Type:=xlFillDefault
    ' insert Portico student department name
    Range("H2").Select
    ActiveCell.FormulaR1C1 = "Dept (Portico)"
    Range("H3").Select
    ActiveCell.FormulaR1C1 = "=IFERROR(VLOOKUP((UPPER(CONCATENATE(RC[-7],""_"",(LEFT(RC[-6],1)),""_" & InputtedModuleCode & """))),'N:\EssaySubTrial\[Student List 201213.xls]Sheet1'!C1:C9,9,FALSE),"""")"
    Range("H3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("H3").AutoFill Destination:=Range("H3:H" & LR), Type:=xlFillDefault
    ' Format column headers and widths
    Rows("2:2").Select
    Selection.Font.Bold = True
    Columns("G:G").EntireColumn.AutoFit
    Columns("H:H").EntireColumn.AutoFit
    'Sort alphabetically by surname/firstname
    Range("A3").Select
    ActiveWorkbook.Worksheets("Sheet1").Sort.SortFields.Clear
    ActiveWorkbook.Worksheets("Sheet1").Sort.SortFields.Add Key:=Range("A3:A" & LR) _
        , SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
    ActiveWorkbook.Worksheets("Sheet1").Sort.SortFields.Add Key:=Range("B3:B" & LR) _
        , SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
    With ActiveWorkbook.Worksheets("Sheet1").Sort
        .SetRange Range("A2:H" & LR)
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
    End With
    ' Move SCN column from Column G to Column C
    Columns("C:C").Select
    Selection.Insert Shift:=xlToRight
    Columns("G:G").Select
    Selection.Cut Destination:=Columns("C:C")
    Columns("C:C").Select
    ' Remove ' at ' from Date Uploaded column
    Columns("F").Replace What:=" at ", Replacement:=" ", LookAt:=xlPart
    ' Format date and add extra date columns
    Columns("F:F").Select
    Selection.NumberFormat = "dd/mm/yyyy hh:mm:ss"
    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
    Range("G2").Select
    ActiveCell.FormulaR1C1 = "Extension Date"
    Range("F2").Select
    ActiveCell.FormulaR1C1 = "Essay Deadline"
    Columns("F:G").Select
    Selection.NumberFormat = "dd/mm/yyyy hh:mm:ss"
    ' Add user inputted submission date
    Range("F3").Select
    ActiveCell.FormulaR1C1 = CDate(InputtedSubmissionDeadline)
        Range("F3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("F3").AutoFill Destination:=Range("F3:F" & LR), Type:=xlFillCopy
     ' Cleanup column width and add extra column
         Columns("F:F").EntireColumn.AutoFit
    Range("I2").Select
    ActiveCell.FormulaR1C1 = "Days late"
    Columns("J:J").Select
    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
    Range("J2").Select
    ActiveCell.FormulaR1C1 = "Penalty (%pts)"
    ' Number of days late column
    Range("I3").Select
    ActiveCell.FormulaR1C1 = _
        "=IF((RC[-1]-(IF(RC[-2]=0,RC[-3],RC[-2]))<=0), 0, (ROUNDUP(RC[-1]-(IF(RC[-2]=0,RC[-3],RC[-2])),0)))"
    Range("I3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("I3").AutoFill Destination:=Range("I3:I" & LR), Type:=xlFillDefault
     ' Penalty %pts column
         Range("J3").Select
    ActiveCell.FormulaR1C1 = _
        "=(IF(RC[-1]>7,100,(IF(RC[-1]>1,10,IF(RC[-1]>0,5,0)))))"
    Range("J3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("J3").AutoFill Destination:=Range("J3:J" & LR), Type:=xlFillDefault
     ' Add marks columns
        Range("M2").Select
    ActiveCell.FormulaR1C1 = "1stM Grade"
    Range("N2").Select
    ActiveCell.FormulaR1C1 = "2ndM Grade"
    Range("O2").Select
    ActiveCell.FormulaR1C1 = "Final Grade"
    Range("O2").Select
    ActiveCell.FormulaR1C1 = "Agreed Grade"
      ' Add final grade colum
    Range("P2").Select
    ActiveCell.FormulaR1C1 = "Final Grade (after penalty)"
    Range("P3").Select
    ActiveCell.FormulaR1C1 = "=MAX(0,(RC[-1]-RC[-6]))"
    Range("P3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("P3").AutoFill Destination:=Range("P3:P" & LR), Type:=xlFillDefault
     ' Add column with formatted submission deadline date that can be read by MailMerge in word
    Range("Q2").Select
    ActiveCell.FormulaR1C1 = "Submission Deadline (formatted)"
    Range("Q3").Select
    ActiveCell.FormulaR1C1 = "=TEXT(RC[-11],""dd-mmm-YYYY HH:mm:ss"")"
    Range("Q3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("Q3").AutoFill Destination:=Range("Q3:Q" & LR), Type:=xlFillDefault
    ' Add column with formatted submission deadline date that can be read by MailMerge in word
    Range("R2").Select
    ActiveCell.FormulaR1C1 = "Date Uploaded (formatted)"
    Range("R3").Select
    ActiveCell.FormulaR1C1 = "=TEXT(RC[-10], ""dd-mmm-YYYY HH:mm:ss"")"
    Range("R3").Select
     LR = Range("A" & Rows.Count).End(xlUp).Row
     Range("R3").AutoFill Destination:=Range("R3:R" & LR), Type:=xlFillDefault
    'Save file
    ActiveWorkbook.SaveAs Filename:="N:\EssaySubTrial\" & InputtedModuleCode & " Datasheet " & _
    Format(Now(), "yyyy-mm-dd HHmmss") & ".xlsx", FileFormat:=xlOpenXMLWorkbook, Password:="", _
    WriteResPassword:="", ReadOnlyRecommended:=False, CreateBackup:=False
    Sheets("Sheet3").Select
    ActiveWindow.SelectedSheets.Delete
    Sheets("Sheet2").Select
    ActiveWindow.SelectedSheets.Delete

    ' do Mailmerge

    Dim wdOutputName, wdInputName As String
    wdOutputName = ThisWorkbook.Path & "\Coversheet " & Format(Date, "d mmm yyyy")
    wdInputName = ThisWorkbook.Path & "\coursework-coversheet-template-merged-updated.docx"

    ' open the mail merge layout file
    Dim wdDoc As Object
    Set wdDoc = GetObject(wdInputName, "Word.document")
    wdDoc.Application.Visible = True

    With wdDoc.MailMerge
         .MainDocumentType = wdFormLetters
         .Destination = wdSendToNewDocument
         .SuppressBlankLines = True
         .Execute Pause:=False
    End With

    ' find and replace module code
    wdDoc.Application.ActiveDocument.Content.Find.Execute "ANTHXXXX", ReplaceWith:=InputtedModuleCode, Replace:=wdReplaceAll

    ' show and save output file
    wdDoc.Application.Visible = True
    wdDoc.Application.ActiveDocument.SaveAs wdOutputName

    ' cleanup
    wdDoc.Close SaveChanges:=False
    Set wdDoc = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:17:46.013

我没有检查代码的其余部分，但如果您的问题仅仅是代码底部的查找和替换，那么以下应该可以完成工作（从字符串设置替换应该无关紧要）：

```
 'I'd recommend leaving all these options in
    With wdDoc.Application.Selection.Find
        .ClearFormatting
        .Text = "ANTHXXXX"
        .Replacement.Text = InputtedModuleCode
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchKashida = False
        .MatchDiacritics = False
        .MatchAlefHamza = False
        .MatchControl = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
        .Execute Replace:=wdReplaceAll
    End With 
```

*另一件事*，如果您有兴趣，代码的`wdDoc.Application.ActiveDocument.SaveAs`作用与.*`wdDoc.SaveAs`*

# html - 宽度自动的div，彼此相邻

> ID：14318977
> 
> 赞同：0
> 
> 时间：2013-01-14T13:07:03.947
> 
> 标签：html, css

我对彼此相邻的 3 个 div 有疑问。左边的那个是恒定的，它的宽度不会改变。中间的需要根据右边的 div 收缩和扩展，因为它也是一个购物车，所以它也在扩展。我有你的网站，所以你可以看到问题。

这就是我要的：

```
[div=constant width]
[div=expanding/contracting]
[div=expanding/contracting] 
```

细节：

*   网站：[http ://ssdbutikken.dk/](http://ssdbutikken.dk/)
*   用户：测试
*   通过：qwertytest

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:22:48.050

您可以为此使用 display:table 。像这样写：

**HTML**

```
<div class="parent">
  <div class="left">left</div>
  <div class="middle">middle</div>
  <div class="right">right</div>
</div> 
```

**CSS**

```
.parent{
  width:100%;
  display:table;
}
.left,.middle,.right{
  display:table-cell;
  background:red;
}
.left{
  width:100px;
}
.middle{
  background:yellow;
}
.right{
  background:blue;
} 
```

检查这个[http://jsfiddle.net/jAquQ/](http://jsfiddle.net/jAquQ/)

它可以工作到 IE8 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:09:38.100

浮动：左将完成工作：试试这个

```
 <div style="float:left;background-color:red;width:200px">left</div>
  <div style="float:left;background-color:green">middle</div>
  <div style="float:left;background-color:blue">right</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T13:19:02.900

```
.constant 
{
float:left;
width:200px;
margin-left:auto;
margin-right:auto;
}

.constant_2 
{
float:right;
width:700px;
margin-left:auto;
margin-right:auto;
}
<div>
<div class="constant "></div>
<div align="center"></div>

<div  class="constant_2 "></div>
</div> 
```

# actionscript-3 - FLVPlaybackCaptioning + 自定义位置

> ID：14318978
> 
> 赞同：2
> 
> 时间：2013-01-14T13:07:14.727
> 
> 标签：actionscript-3, flvplayback, subtitle, captions

使用 FLVPlayback Captioning 组件我想在 y 位置的某些部分移动字幕文本。这在 AS3 中可能吗？

解析字幕时会忽略我自己的所有自定义参数，并且用某种字符包装特定部分也不会这样做，因为我无法在运行时更改文本。

原因是在我的视频流中有包含文本内容的框，我不希望将字幕放在上面，而是为了阅读目的而放在上面。

我正在考虑做一个自己的手动字幕功能或自定义闪光提示点，我可以访问但想知道是否有人以前做过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:41:33.383

像这样的事情会做到这一点。我发现 autoLayout 被字幕 xml 覆盖，所以我强迫它每次“更改”都为假。

```
public function Init() : void
{
    // captions
    _captions = new FLVPlaybackCaptioning();
    _captions.autoLayout = false;
    _captions.flvPlayback = _video;
    _captions.addEventListener(CaptionChangeEvent.CAPTION_CHANGE, onCaptionChange);
    _captions.source = "mySubs.xml";

    addChild(_captions);
}

private function onCaptionChange(pEvent : CaptionChangeEvent) : void
{
    if(!_captions.captionTarget)
        return;

    _captions.autoLayout = false; // force autoLayout
    _captions.captionTarget.y = 666; // position of choice
} 
```

# java - 左移无符号字节，更好的方法？

> ID：14318984
> 
> 赞同：1
> 
> 时间：2013-01-14T13:07:21.877
> 
> 标签：java, bit-manipulation

我有一个字节数组（因为无符号字节不是一个选项）并且需要将其中的 4 个转换为 32 位 int。我正在使用这个：

```
byte rdbuf[] = new byte[fileLen+1];
int i = (rdbuf[i++]) | ((rdbuf[i++]<<8)&0xff00) | ((rdbuf[i++]<<16)&0xff0000) | ((rdbuf[i++]<<24)&0xff000000); 
```

如果我不做所有的逻辑和，它会扩展字节，这显然不是我想要的。

在 c 中，这将是一个明智的选择。Java有更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T13:09:25.730

您不必这样做，您可以使用`ByteBuffer`：

```
int i = ByteBuffer.wrap(rdbuf).order(ByteOrder.LITTLE_ENDIAN).getInt(); 
```

如果您有许多整数要阅读，则代码变为：

```
ByteBuffer buf = ByteBuffer.wrap(rdbuf).order(ByteOrder.LITTLE_ENDIAN);

while (buf.remaining() >= 4) // at least four bytes
    i = bb.getInt(); 
```

Javadoc[在这里](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)。推荐用于必须处理二进制数据的任何情况（无论您是读取还是写入此类数据）。可以进行小端、大端甚至本地排序。（注意：默认为大端）。

（编辑：@PeterLawrey 正确地提到这看起来像小端数据，固定代码提取 - 另外，请参阅他的答案，了解如何将文件的内容直接包装到 a 中`ByteBuffer`）

笔记：

*   `ByteOrder`有一个名为 的静态方法`.nativeOrder()`，它返回底层架构使用的字节顺序；
*   a`ByteBuffer`有一个内置的偏移量；可以使用 查询当前偏移量`.position()`，并使用 修改当前偏移量`.position(int)`；`.remaining()`将返回从当前偏移量到结束要读取的剩余字节数；
*   有相对方法将在缓冲区的当前偏移量处读取/写入，而绝对方法将在您指定的偏移量处读取/写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:19:55.797

您可以使用直接的 ByteBuffer 来避免所有这些开销，而不是读入必须用 ByteBuffer 包装的 byte[] 来为您执行移位/掩码。

```
FileChannel fc = new FileInputStream(filename).getChannel();
ByteBuffer bb = ByteBuffer.allocateDirect(fc.size()).order(ByteBuffer.nativeOrder());
fc.read(bb);
bb.flip();
while(bb.remaining() > 0) {
    int n = bb.getInt(); // grab 32-bit from direct memory without shift/mask etc.
    short s = bb.getShort(); // grab 16-bit from direct memory without shift/mask etc.

    // get a String with an unsigned 16 bit length followed by ISO-8859-1 encoding.
    int len = bb.getShort() & 0xFFFF;
    StringBuilder sb = new StringBuilder(len);
    for(int i=0;i<len;i++) sb.append((char) (bb.get() & 0xFF));
    String text = sb.toString(); 
}
fc.close(); 
```

# facebook - 不使用 Twitter 的 API 嵌入推文是否违法？

> ID：14318986
> 
> 赞同：1
> 
> 时间：2013-01-14T13:07:32.760
> 
> 标签：facebook, twitter, youtube, feed, tumblr

我正在尝试将 Twitter 时间线添加到我的网站。

而不是使用 Twitter API，

如果我只是使用 HttpWebRequest 获取该 Twitter 页面的 HTML，然后以我喜欢的方式使用附加的 CSS 和 HTML 解析和实现它怎么办？

```
 string strResult;
    WebResponse objResponse;
    WebRequest objRequest =HttpWebRequest.Create("https://www.twitter.com/<username>");
    objResponse = objRequest.GetResponse();

    using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
    {
        strResult = sr.ReadToEnd();
        sr.Close();
    } 
```

当您查看页面的源代码时，上面的代码会获取 HTML。

以这种方式使用 Twitter 的内容是否违法？

而主要问题...

如果我对我的 Facebook、Tumblr、Pinterest 和 Youtube 帐户做同样的事情，这样我就可以将我的所有提要合并到一个页面中，并创建一个包含许多帐户的巨大时间线会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:51:48.150

我认为除非您通过 HTML/CSS 或 JS 更改某些内容，例如删除广告/徽标或修改原始内容，否则任何人都不会起诉您。IMO 可以“按原样”包含页面，但您不应该修改它的内容。毕竟，这是一个冒险的过程，因为这些页面的 HTML 可能会发生变化，瞬间破坏您的部分或全部工作。最好的方法是使用 API。您不想使用 API 的任何原因？它非常简单易用，并且可能比从各种提要解析原始 HTML 并将它们组合起来更容易。

# jquery - 如果 div 不是对话框，则使其成为对话框，否则不要

> ID：14318987
> 
> 赞同：0
> 
> 时间：2013-01-14T13:07:34.310
> 
> 标签：jquery, jquery-ui

我有一个 div：

```
<div id="dialog">Dialog content here</div> 
```

我有一个功能：

```
function process() {
    $("#dialog").dialog({autoOpen:false});
} 
```

只有当它尚未创建时，我才会创建对话框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T13:09:58.413

检查`data`. 如果对话框是在元素上创建的，则它具有“对话框”作为以下属性`data`：

```
function process()
{
    if( !$('#dialog').data('dialog') ){
        $("#dialog").dialog({autoOpen:false});
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:11:02.280

只需投入`$("#dialog").dialog({autoOpen:false});`您的`document.ready()`活动。最后，在您的`process()`函数中，添加

```
$( "#dialog" ).dialog( "open" ); 
```

# postgis - PostGIS：ST_Covers 对于极值点位置失败

> ID：14318990
> 
> 赞同：0
> 
> 时间：2013-01-14T13:07:54.057
> 
> 标签：postgis

我正在使用 PostGis 保存地理数据，然后使用`ST_Covers()`函数来查找某个点或位置是否位于地理中。

我可以保存具有极值的位置，例如：

```
-90,180;90,180;90,-180;-90,-180;-90,180 
```

这些值将倾向于覆盖整个地球（位于两极旁边）。我可以保存这样的位置，并且可以放心地检索它。但是，当我调用`ST_Covers()`这些位置以查找某个位置是否位于该位置内时，该函数将失败并给出解析错误。

我正在使用 Postgis 1.5.3，升级到 2.0.2 但运气不佳。

如果这样的事情是可能的，任何人都可以帮助我。以及如何`ST_Covers()`在没有任何错误的情况下调用这样的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:46:13.180

PostGIS 地理将无法正确解释任何大于或等于 180 度的边。用较短的边缘重新设计你的盒子，你应该得到你想要的。

# java - 在 Java 中解析之前执行点击网页元素

> ID：14318991
> 
> 赞同：5
> 
> 时间：2013-01-14T13:07:54.913
> 
> 标签：java, html, jsoup

我正在尝试使用 DOM 解析器和[jsoup](https://jsoup.org/)库来解析 HTML 页面。我面临的问题是：

在网站上有两个按钮显示两个不同的表格。我需要解析单击第二个按钮时显示的表格。单击第二个按钮后设置了不同的属性值。

当我做`Jsoup.connect("example.com")`

我得到响应，就像选择了第一个按钮一样，我不需要该数据。

有没有办法点击第二个按钮，然后开始从网站解析和检索数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T13:10:58.943

Jsoup 只是一个解析器，即它不能处理诸如点击按钮之类的事件。看看浏览器自动化工具（例如[Selenium](http://seleniumhq.org/)）来执行这种工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T13:11:00.833

JSoup 是一个 HTML 解析器，而不是浏览器的替代品。看看[Html 单元](http://htmlunit.sourceforge.net/)

> HtmlUnit 是“Java 程序的无 GUI 浏览器”。它对 HTML 文档进行建模并提供一个 API，允许您调用页面、填写表单、单击链接等……就像您在“普通”浏览器中所做的一样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T13:13:25.760

JSoup 无法控制网页，只能解析内容。对于操作和交互，有一些工具。我推荐[Geb](http://www.gebish.org/)，它使用 Groovy DSL 和类似 JQuery 的语法，使其非常流畅。用它解析 xml/html 也很容易。

# c++ - 为什么 DYNAMIC_DOWNCAST 需要 DECLARE_DYNAMIC 和 IMPLEMENT_DYNAMIC？

> ID：14318993
> 
> 赞同：2
> 
> 时间：2013-01-14T13:07:58.300
> 
> 标签：c++, dynamic, mfc, downcast

我有两节课：

```
/*Switch.h*/
    class CSwitch : public CDeviceEntity {}
/*EndSystem.h*/
    class CEndSystem : public CDeviceEntity {} 
```

但是当我使用时：

```
CDeviceEntity* dev = NULL;
dev = topo->headList[i]->node;
if ( DYNAMIC_DOWNCAST( CEndSystem, dev ) != NULL ) {} 
```

" `DYNAMIC_DOWNCAST`" 总是`not NULL`在 dev 是`class CEndSystem`or时返回`class CSwitch`。

如果使用：

```
/*Switch.h*/
    class CSwitch : public CDeviceEntity { DECLARE_DYNAMIC(CSwitch) } 
    and
/*Switch.cpp*/
    IMPLEMENT_DYNAMIC(CSwitch, CDeviceEntity)
/*EndSystem.h*/
    class CEndSystem : public CDeviceEntity { DECLARE_DYNAMIC(CEndSystem) }
    and
/*EndSystem.cpp*/
    IMPLEMENT_DYNAMIC(CEndSystem, CDeviceEntity) 
```

" "根据or`DYNAMIC_DOWNCAST`返回`NULL`or 。`not NULL``class CEndSystem``class CSwitch`

为什么“ `DECLARE_DYNAMIC`”和“ `IMPLEMENT_DYNAMIC`”对“ ”是必需的`DYNAMIC_DOWNCAST`？

```
/*Algorithm.h*/
static int getESNum();

/*Algorithm.cpp*/
int CAlgorithm::getESNum()
{
    int count = 0;
    CDeviceEntity* dev = NULL;
    for (int i = 0; i < topo->nodeNum; i++)
    {
        dev = topo->headList[i]->node;
        if ( DYNAMIC_DOWNCAST( CEndSystem, dev ) != NULL )
        {
            count++;
        }
    }

    return count;
}

/*Algorithm.h*/
static int getSWNum();

/*Algorithm.cpp*/
int CAlgorithm::getSWNum()
{
    int count = 0;
    CDeviceEntity* dev = NULL;
    for (int i = 0; i < topo->nodeNum; i++)
    {
        dev = topo->headList[i]->node;
        if ( DYNAMIC_DOWNCAST(CSwitch, dev) != NULL )
        {
            count++;
        }
    }

    return count;
} 
```

并且在保存文档时会在序列化中调用这些函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T13:48:17.310

DYNAMIC_DOWNCAST 是对您过去在编译器提供[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)信息之前必须进行动态转换的方式的回归。转换信息是使用宏 DECLARE_DYNAMIC 和 IMPLEMENT_DYNAMIC 创建的，它们使用类 CRuntimeClass 来确定转换是否有效。

DYNAMIC_DOWNCAST 只是这样做：

```
CObject* AFX_CDECL AfxDynamicDownCast(CRuntimeClass* pClass, CObject* pObject)
{
    if (pObject != NULL && pObject->IsKindOf(pClass))
        return pObject;
    else
        return NULL;
} 
```

DECLARE_DYNAMIC 宏添加了以下代码：

```
#define DECLARE_DYNAMIC(class_name) \
protected: \
    static CRuntimeClass* PASCAL _GetBaseClass(); \
public: \
    static const CRuntimeClass class##class_name; \
    static CRuntimeClass* PASCAL GetThisClass(); \
    virtual CRuntimeClass* GetRuntimeClass() const; \ 
```

添加 IMPLEMENT_DYNAMIC 添加此代码：

```
#define IMPLEMENT_RUNTIMECLASS(class_name, base_class_name, wSchema, pfnNew, class_init) \
CRuntimeClass* PASCAL class_name::_GetBaseClass() \
    { return RUNTIME_CLASS(base_class_name); } \
AFX_COMDAT const CRuntimeClass class_name::class##class_name = { \
    #class_name, sizeof(class class_name), wSchema, pfnNew, \
        &class_name::_GetBaseClass, NULL, class_init }; \
CRuntimeClass* PASCAL class_name::GetThisClass() \
    { return _RUNTIME_CLASS(class_name); } \
CRuntimeClass* class_name::GetRuntimeClass() const \
    { return _RUNTIME_CLASS(class_name); }

#define IMPLEMENT_DYNAMIC(class_name, base_class_name) \
    IMPLEMENT_RUNTIMECLASS(class_name, base_class_name, 0xFFFF, NULL, NULL) 
```

我想很少有人仍然将它用于新项目，而是更喜欢 C++ 标准`dynamic_cast<>`调用（以及`static_cast`and `reinterpret_cast`）。

# c# - 在 Windows 应用商店应用中唤醒计算机

> ID：14318994
> 
> 赞同：1
> 
> 时间：2013-01-14T13:08:09.153
> 
> 标签：c#, .net, windows-8, microsoft-metro

我们如何在 Windows 8 Metro 风格的应用程序中将计算机从待机、睡眠和/或休眠状态唤醒？

我已经尝试使用我的旧 Winforms 和 WPF 应用程序的代码，甚至阅读并尝试了许多在线教程，但没有任何效果。此外，在搜索此内容时，似乎没有任何结果指向任何类型的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:16:09.093

如果我是正确的，Windows RT 不会公开如此低级的 API。Windows 应用商店应用程序简单易用 - 主要是消费应用程序。

但是，您可以将您的 Windows 商店应用程序与您的 Windows 商店应用程序与之通信的一个完整的 Windows 应用程序（桌面/传统应用程序）（WCF 等）结合起来。传统的应用程序可以做它以前所做的一切。

唯一的缺点是您无法在 Windows RT 上安装传统应用程序

# ios - 我应该如何从合适的选择中保存用户设置？

> ID：14318997
> 
> 赞同：1
> 
> 时间：2013-01-14T13:08:13.250
> 
> 标签：ios, objective-c, uitableview, nsuserdefaults

我有一个表格视图，用户可以在其中选择多行。我想保存用户的选择。NSUserDefaults 是处理这个问题的最好方法吗？用户只能做出几个选择。其中之一是他们可以选择并保存他们希望在另一个表格视图中的搜索结果中出现的几个类别。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:12:39.913

可能会将您的数据存储在中`NSDictionary`，然后将其存储在`NSUserDefaults`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:14:30.683

尝试这个

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSObject *tempSelectedObject = [yourTableArray objectAtIndex:indexPath.row];
    NSMutableArray *yourSelectedArray;
    [yourSelectedArray addObject:tempSelectedList];

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
} 
```

在这种情况下，您选择的表中的任何行都将从列表中删除并存储在`yourSelectedArray`. 你以后可以做任何你想做的事。如果你想将它保存在文件中，或者你可以`NSDictionary`在旁边使用`NSMutableArray`.