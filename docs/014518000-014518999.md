# StackOverflow 问答 14518000-14518999

# c# - 将解压缩的字符串反序列化为 json 时出错

> ID：14518000
> 
> 赞同：1
> 
> 时间：2013-01-25T08:25:47.873
> 
> 标签：c#, utf-8, json.net, dotnetzip

我创建了一个 zip 文件，并在其中复制了一个包含序列化对象列表的文件。文件编码为 UTF8。然后我解压缩文件并尝试反序列化它，但我会收到此错误：

解析值时遇到意外字符：﻿。路径 ''，第 0 行，第 0 位置

如果我使用 ASCII 编码而不是 UTF8，则问题不存在。但我需要使用 UTF8。所以我想知道 DotNetZip 库是否不完全支持 UTF8，或者我可能缺少其他东西。

为了重现错误：

Json 库位于：http: [//json.codeplex.com/](http://json.codeplex.com/)

Zip 库位于：[http ://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

创建一个简单的类“狗”：

```
public class Dog
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

然后使用这段代码（最后一行会导致错误）：

```
 var list = new List<Dog>();          
        list.Add(new Dog { FirstName = "Arasd", LastName = "1234123" });
        list.Add(new Dog { FirstName = "fghfgh", LastName = "vbnvbn" });

        var serialized = JsonConvert.SerializeObject(list, Formatting.Indented);

        var zipFile = new ZipFile(@"C:\Users\daviko\Desktop\test.zip");

        using (zipFile)
        {
            zipFile.CompressionLevel = Ionic.Zlib.CompressionLevel.BestCompression;
            zipFile.UpdateEntry("dogs.txt", serialized, UTF8Encoding.UTF8);
            zipFile.Save();
        }

        var readFromZipFile = string.Empty;

        using (var input = new MemoryStream())
        {
            using (zipFile)
            {
                var entry = zipFile["dogs.txt"];
                entry.Extract(input);
            }
            using (var output = new MemoryStream())
            {
                input.CopyTo(output);
                readFromZipFile = new UTF8Encoding().GetString( input.ToArray());
            }
        }

        var deserialized = JsonConvert.DeserializeObject<List<Dog>>(readFromZipFile); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:40:11.383

以下代码：

```
 using (zipFile)
    {
        zipFile.CompressionLevel = Ionic.Zlib.CompressionLevel.BestCompression;
        zipFile.UpdateEntry("dogs.txt", serialized, UTF8Encoding.UTF8);
        zipFile.Save();
    } 
```

将在执行时处理 zipFile。因此，您必须再次创建 zipFile，然后再尝试再次阅读它。

# spring - Servlet 3.0 的错误页面

> ID：14518003
> 
> 赞同：2
> 
> 时间：2013-01-25T08:26:14.967
> 
> 标签：spring, servlets, web.xml, servlet-3.0

在`web.xml`文件中，我试图指定一个错误页面，如下所示。

```
<error-page>
    <location>/WEB-INF/jsp/admin/ErrorPage.jsp</location>
</error-page> 
```

根据 Servlet 3.0，我希望它不会出现错误代码，但事实并非如此。我必须明确指定适当的错误代码才能使其工作如下。

```
<error-page>
    <description>Missing page</description>
    <error-code>404</error-code>
    <location>/WEB-INF/jsp/admin/ErrorPage.jsp</location>
</error-page> 
```

为什么前一种方法不适用于 Servlet 3.0？

* * *

我已经升级了 NetBeans 7.2.1。它支持具有 Servlet 3.0 API 的 Apache Tomcat 7.0.27.0。

顺便说一句，我已禁用 HTTP 监视器，因为它会引发以下警告。

> MonitorFilter::WARNING：监视器过滤器必须是链中的第一个过滤器。

当我在我的应用程序中使用 Spring 安全性时发生了这种情况，它被报告为[jira](http://netbeans.org/bugzilla/show_bug.cgi?id=204775)问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:42:17.490

看看[这个帖子](https://stackoverflow.com/questions/7997286/new-servlet-3-0-global-error-page-feature-does-not-work-on-tomcat-7)。我从来没有亲自做过这个

```
<error-page>
    <location>/WEB-INF/jsp/admin/ErrorPage.jsp</location>
</error-page> 
```

在 Tomcat 7 上工作，至于我给你的链接中描述的错误。~~我不知道 Apache 是否在更高版本的 Tomcat 中解决了它，但我怀疑~~.
我之前的陈述可能是错误的。挖掘了一下，我发现了这个：[https](https://issues.apache.org/bugzilla/show_bug.cgi?id=52135) : //issues.apache.org/bugzilla/show_bug.cgi?id=52135 并且问题应该已经在 Tomcat 7.0.29 中解决了，所以你唯一的解决方案是更新到 post- 29 版本。

在这里：[http://tomcat.apache.org/tomcat-7.0-doc/changelog.html](http://tomcat.apache.org/tomcat-7.0-doc/changelog.html)，在版本 7.0.29 的更新日志中，您可以阅读为什么会出现这样的问题：

> 通过定义仅具有嵌套位置元素的错误页面，添加对要在 web.xml 中定义的默认错误页面的支持。看起来这个特性原本打算包含在 Servlet 3.0 规范中，但被意外遗漏了。（市场）

# c++ - Linux/CUPS 打印示例/教程？

> ID：14518004
> 
> 赞同：11
> 
> 时间：2013-01-25T08:26:16.353
> 
> 标签：c++, c, linux, printing, cups

我需要使用 Linux 打印一些矢量数据（或者更准确地说：一些点和折线）。当我向谷歌询问时，它向我展示了许多教程和文档——但都是针对最终用户的，没有编程示例。

那么有人知道在 Linux 下显示打印的优秀程序员 HOWTO/教程吗？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T21:26:15.417

CUPS 没有自己的文档描述 API。它不需要：PostScript、PDF 和 JPEG 等格式是 CUPS 的一等公民。您可以使用您喜欢的任何程序或 API 创建这样的文件，然后将其发送到 CUPS（使用`lpr`或使用 CUPS API），CUPS 会将其转换为适当的内部格式并将其发送到打印机。

因此，对于您的情况，您可以使用像[Cairo](http://www.cairographics.org/manual/)这样的矢量图形库来创作 PostScript，然后将其发送到 CUPS 进行打印。这是一个简单的 C 示例：

```
// compile with:
//   gcc -Wall -o cairo_print cairo_print.c `pkg-config --cflags --libs cairo` `cups-config --cflags --libs`

#include <stdio.h>
#include <cairo.h>
#include <cairo-ps.h>
#include <cups/cups.h>

// A4 width, height in points, from GhostView manual:
//   http://www.gnu.org/software/gv/manual/html_node/Paper-Keywords-and-paper-size-in-points.html
#define WIDTH  595  
#define HEIGHT 842  

int main(int argc, char** argv) {
  if (argc!= 2){
    fprintf (stderr, "usage: %s word\n", argv[0]);
    return 1;
  }

  // setup
  char* tmpfilename = tempnam(NULL,NULL);
  cairo_surface_t* surface = cairo_ps_surface_create(tmpfilename, 
                                                     WIDTH, 
                                                     HEIGHT);
  cairo_t *context = cairo_create(surface);

  // draw some text
  cairo_select_font_face(context, 
                         "Arial Black", 
                         CAIRO_FONT_SLANT_NORMAL, 
                         CAIRO_FONT_WEIGHT_NORMAL);
  cairo_set_font_size(context, 30);
  cairo_move_to(context, WIDTH/2, HEIGHT/2);
  cairo_show_text(context, argv[1]); // the text we got as a parameter

  // draw a dotted box
  const double pattern[] = {15.0, 10.0};
  cairo_set_dash(context, pattern, 2, 0);
  cairo_set_line_width(context, 5);
  cairo_rectangle(context, WIDTH*0.33, HEIGHT*0.33, WIDTH*0.5, WIDTH*0.5);
  cairo_stroke(context);

  // finish up
  cairo_show_page(context);
  cairo_destroy(context);
  cairo_surface_flush(surface);
  cairo_surface_destroy(surface);

  // print
  cupsPrintFile(cupsGetDefault(), tmpfilename, "cairo PS", 0, NULL);
  unlink(tmpfilename);

  return 0;
} 
```

严格来说，您不需要该临时文件：CUPS API 允许您构建一个流，并且您可以将页面数据发送到其中（但一个文件便于调试）。

# python-2.7 - 在开罗使用网格渐变为路径着色

> ID：14518005
> 
> 赞同：1
> 
> 时间：2013-01-25T08:26:18.437
> 
> 标签：python-2.7, cairo, pycairo

我是这种编程方法的新手，因为我真的不关心硬核图形生成。我使用 python 设计、编写、运行和研究参数化气候模型。但是，最后，我遇到了一个可视化问题。

我在 Cairo 库中寻找一些东西，它允许我将线性渐变映射到任意曲线（不一定是圆周）上，这样我的路径上的颜色（或阴影）或多或少会平滑变化。然后我一直在寻找一些模式，我终于发现也许开罗的网格渐变是解决方案。

但是，我无法使用 cairo.pattern_create_mesh() 从我的 python 脚本创建新的网格渐变！

因此，我的问题是：我如何在开罗使用网格渐变？有没有其他简单的方法可以用开罗做我想做的事情（我不知道，比如通过参数化从线段到曲线的简单映射，我知道我问的太多了）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:18:34.120

最新版本的 cairo 1.12 中添加了网格图案。因此，大多数语言绑定可能还不支持它们。我对 python 和 cairo 的组合一无所知，因此不知道任何解决方法。

我不知道有什么简单的方法可以用其他模式来模拟你需要的东西，对不起。（虽然我也不确定你想如何通过网格渐变进行映射......）

# php - 在 codeigniter 中调用 $CI 和使用 `this` 有什么不同吗？

> ID：14518009
> 
> 赞同：1
> 
> 时间：2013-01-25T08:26:36.183
> 
> 标签：php, codeigniter, frameworks

> **可能重复：**
> [Codeigniter 中的 get_instance()：为什么将其分配给变量？](https://stackoverflow.com/questions/7195544/get-instance-in-codeigniter-why-assign-it-to-a-variable)

我有一个控制器，它有很多功能，我想将它们分成不同的 cmd 对象。但是在控制器中，我可以发挥作用`$this`，例如，我可以这样调用：

`$this->form_validation->run('myAction');`

但是当我将此代码移动到一个不是控制器的对象时，我这样调用该函数：

```
 $CI =& get_instance();
    $CI->form_validation->run('myAction'); 
```

我意识到他们可以跑，结果正是我想要的。但是，我的问题是，这两个操作或代码有什么不同吗？里面的`get_instance()`黑魔法是什么？控制器`$this`指的是相同的`get_instance()`吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:37:33.927

使用`$ci = &get_instance()`，您将直接使用 codeigniter 本机库，而不是对其进行复制。“ `$this`”命令只能在控制器内部使用，因此将 CI 对象分配给变量是您必须进入控制器外部 Ci 核心库的唯一方法。请注意，`$this`模型中的“”命令指的是模型对象本身。

# perl - 用于在 perl 中解析多行文本的正则表达式

> ID：14518014
> 
> 赞同：0
> 
> 时间：2013-01-25T08:27:24.200
> 
> 标签：perl, multiline

我正在解析一个具有以下内容的输入文件。

```
 &lt;tr&gt;
 &lt;th width="50%"&gt;ABC&lt;/th&gt;&lt;th width="50%"&gt;XYZ&lt;/th&gt;
   &lt;/tr&gt;
   &lt;tr&gt;       
   &lt;tr&gt;
        &lt;td&gt;avc&lt;/td&gt;
        &lt;td&gt;fds&lt;/td&gt;
   &lt;/tr&gt; 
```

代码：

```
 #!/usr/bin/perl
 open(fh,$ARGV[0]) or die "could not open a file\n";
 $input=<fh>
 #print($input)
 if($input =~ /&lt;tr&gt;(\n)?(.*)(\n)?tr&gt;/)
 { 
     print($1);
 } 
```

但是没有输出。如何获得具有 th 标签的中间线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:29:20.700

如果您只阅读一行，如何匹配跨多行的文本？也许您正在尝试加载整个文件，您可以执行以下操作；

```
my $input; { local $/; $input = <fh>; } 
```

顺便说一句，总是使用`use strict; use warnings;`！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:29:43.287

看起来你只是在阅读第一行......

你为什么不把你的代码放在一个while循环中？

（此外，通过将 $/ 设置为 '' 来获取整个文件是一个更好的主意，因为您正在寻找匹配多行的模式）

此代码有效：

```
 #!/usr/bin/perl
 open(fh,$ARGV[0]) or die "could not open a file\n";
 {
    local $/;
    $input=<fh>;
    if($input =~ /&lt;tr&gt;\s*(.*)\s*&lt;\/tr&gt;/)
     { 
         print($1);
     }
    } 
```

（请注意，我删除了 \n 周围的括号，这是无用的）

不过不是很干净...

另外，你为什么不开始：

```
$input=~s/&lt/</g;
$input=~s/&gt/>/g; 
```

这将有助于您的代码更具可读性？

# android - Google Map Android API v2：GoogleMap 为空

> ID：14518024
> 
> 赞同：3
> 
> 时间：2013-01-25T08:28:12.690
> 
> 标签：android, android-mapview, android-maps-v2

我正在尝试使用 MapView 类进行 GoogleMap 显示，但没有运气，因为大多数代码示例都使用我不想要的 MapFragment。

我正在使用 Google Maps Android API v2。

起初，只是为了[在 Google 的示例](https://developers.google.com/maps/documentation/android/start)中进行测试，我设法获得了要显示的典型法线贴图。

```
public class POnlineMapView extends Activity {

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.online_map_activity);
    }
} 
```

上面的代码完美运行，表明一切都已正确设置。

我现在正在尝试使用 MapView 类来操作显示设置，例如中心点，但似乎每次尝试获取 GoogleMap 对象时我都在获取一个空对象。为什么会这样？

```
public class POnlineMapView extends Activity {

    private MapView myMapView;
    private GoogleMap map;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        myMapView = new MapView(getApplicationContext());
        Bundle b = getIntent().getExtras();
        double longitude = b.getDouble("longitude");
        double latitude = b.getDouble("latitude");

        setContentView(R.layout.online_map_activity);
        map = myMapView.getMap();

        CameraUpdate center= CameraUpdateFactory.newLatLng(new LatLng(latitude,longitude));
        CameraUpdate zoom=CameraUpdateFactory.zoomTo(17);

        map.moveCamera(center); //this gives a NullPointerException, probably due to the myMapView.getMap() method?
        map.animateCamera(zoom);    
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-17T06:01:44.523

这似乎是一个老问题，但我在尝试使用 MapView 时遇到了同样的问题。

假设您已正确导入 Google Play Services 库，您必须检查您是否可以访问 Google 服务，您可以在 onCreate 方法中执行此操作，并且您必须初始化 Google Maps Android AP。您可以通过将以下代码添加到您的 onCreate 方法来做到这一点

```
try {
        MapsInitializer.initialize(this);
    } catch (GooglePlayServicesNotAvailableException e) {
        Log.e("Address Map", "Could not initialize google play", e);
    }

switch (GooglePlayServicesUtil.isGooglePlayServicesAvailable(this) )
{
  case ConnectionResult.SUCCESS:
      Toast.makeText(getApplicationContext(), "SUCCESS", Toast.LENGTH_SHORT).show();
      break;
  case ConnectionResult.SERVICE_MISSING: 
      Toast.makeText(getApplicationContext(), "SERVICE MISSING", Toast.LENGTH_SHORT).show();
      break;
  case ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED: 
      Toast.makeText(getApplicationContext(), "UPDATE REQUIRED", Toast.LENGTH_SHORT).show();
      break;
  default: Toast.makeText(getApplicationContext(), GooglePlayServicesUtil.isGooglePlayServicesAvailable(this), Toast.LENGTH_SHORT).show();
} 
```

如果您获得成功，那么到目前为止一切正常。您还必须实现 Activity lyfecycle 的方法，并在以下每个方法中调用地图视图的相应方法：

```
@Override
protected void onResume() {
    myMapView.onResume();
    super.onResume();

}

@Override
protected void onPause() {
    myMapView.onResume();
    super.onPause();

}

@Override
protected void onDestroy() {
    myMapView.onDestroy();
    super.onDestroy();
   //((MapView)findViewById(R.id.mapView)).onDestroy();
}

@Override
public void onLowMemory() {
    super.onLowMemory();
    myMapView.onLowMemory();
} 
```

最后，您必须检查您是否已将 Google Maps API 密钥添加到您的清单文件中：

```
<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="YOUR KEY"/> 
```

您可以在此处找到获取密钥的说明：[https ://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)

编辑：忘了提，您还必须在清单文件上设置您的应用程序权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

这必须在应用程序块内设置...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T09:43:52.113

检查是否已安装（和更新）Google Play 服务

见[Google Maps Android API v2 throws GooglePlayServicesNotAvailableException, out of date, SupportMapFragment.getMap() 返回 null](https://stackoverflow.com/questions/13722192/google-maps-android-api-v2-throws-googleplayservicesnotavailableexception-out-o)

另请阅读[https://developers.google.com/maps/documentation/android/map](https://developers.google.com/maps/documentation/android/map)（验证地图可用性部分）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-10T21:09:49.337

Thanks, you finally gave me a clue to initialize the Map programatically, how stupid I oversaw it :)

Well, sometimes there is no option to use MapFragment (or SupportMapFragment alike), i.e. when you want to use the map from a fragment! This is actually a very common case when working with tabs (ActionBar) where the pattern is to use fragments. So you've got your own fragment per tab and in that fragment for a map you want to inflate your layout which contains a fragment for the MapFragment, et voila - good luck!

Now, according to the MapView specs it is no way said that using of the MapView is discouraged or deprecated, so why should I not use it? I did not want hacks in maintaining nested fragments without having support from SDK ( even the recent support lib v13 seems to have bugs and nested fragments from layout are not supported ), so using MapView turned for me into KISS.

Below is my CustomMapFragment I use with layout inflation (allowing complex layout) and embedded map, you're welcome to use it. You may also want to extend the Fragment from support-lib rather than SDK.

The onCreateView() method inflates the layout (just provide you're own) and expects the layout to have viewgroup (relativelayout,linearlayout,etc) with id "mapViewHolder" where the mapView will be attached to upon layout creation. The activity has to implement CustomMapFragment.Handler interface, otherwise ClassCastException will be thrown.

```
import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

import com.google.android.gms.common.GooglePlayServicesNotAvailableException;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapView;
import com.google.android.gms.maps.MapsInitializer;
import R;

public class AppMapFragment extends Fragment {
  /*
   * to interact with activity
   */
  public static interface Handler {
    void onMapResume(GoogleMap map);
  }

  private Handler handler;
  private MapView mapView;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
      // initialize explicitely, since we're working with MapView (not MapFragment)
      MapsInitializer.initialize(getActivity());
      this.mapView = new MapView(getActivity());
      this.mapView.onCreate(savedInstanceState);
    } catch (GooglePlayServicesNotAvailableException e) {
      Toast.makeText(getActivity(), "Please install Google Play Store and retry again!", Toast.LENGTH_LONG).show();
      getActivity().finish();
    }
  }

  @Override
  public void onResume() {
    super.onResume();
    this.mapView.onResume();
    this.handler.onMapResume(this.mapView.getMap());
  }

  @Override
  public void onPause() {
    super.onPause();
    this.mapView.onPause();
  }

  @Override
  public void onDestroy() {
    super.onDestroy();
    this.mapView.onDestroy();
  }

  @Override
  public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    this.mapView.onSaveInstanceState(outState);
  }

  @Override
  public void onLowMemory() {
    super.onLowMemory();
    this.mapView.onLowMemory();
  }

  @Override
  public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
      this.handler = (Handler) activity;
    } catch (ClassCastException e) {
      throw new ClassCastException("Your activity has to implement the interface " + this.handler.getClass().getName());
    }
  }

  public AppMapFragment() {
  }

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.fragment_results_map, container, false);

    ((ViewGroup) rootView.findViewById(R.id.mapViewHolder)).addView(this.mapView);

    return rootView;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-06T15:12:29.633

MapFragment 和 MapView 之间的一个区别是您必须手动管理 MapView 的生命周期，而 MapFragment 会自行处理它。

您必须从父 Activity/Fragment 的相应方法中调用以下方法。

```
onCreate(Bundle)
onResume()
onPause()
onDestroy()
onSaveInstanceState()
onLowMemory() 
```

我在 Google Play 服务示例中使用 RawMapViewDemoActivity 验证了这一点，可以将其安装在 Android SDK 管理器的 Extras 部分。

示例首先显示地图，一旦我注释掉mMapView.onXXX() 的6 行，它显示一个空白页。

也许生命周期是我们随处可见的大多数示例使用 MapFragment 的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T21:12:48.000

我对地图视图也没有运气。
我确实对 MapFragment 很幸运。

尝试这个：

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;

public class TestActivity extends FragmentActivity {

  SupportMapFragment mapFragment;
  GoogleMap map;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (mapFragment == null) {
      mapFragment = new SupportMapFragment();
      getSupportFragmentManager().beginTransaction()
          .add(android.R.id.content, mapFragment).commit();
    }
  }

  @Override
  protected void onResume() {
    super.onResume();
    setupMap();
  }

  private void setupMap() {
    if (map != null)
      return;
    map = mapFragment.getMap();
    if (map == null)
      return;

    doZoom();
  }

  private void doZoom() {
    if (map != null) {
      map.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(45.424900,
          -75.694968), 17));
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T08:41:02.263

试试这种方式：

> ```
>  private MapView myMapView;   
>   private GoogleMap map;  
>       myMapView = (MapView) findViewById(R.id.map);     
>       if (map == null) {     
>                 map = ((MapView) findViewById(R.id.map)).getMap();     
>        } 
> ```

# javascript - 我怎样才能重用这个功能？

> ID：14518028
> 
> 赞同：0
> 
> 时间：2013-01-25T08:28:37.633
> 
> 标签：javascript, jquery, function

我编写了一个运行良好的函数，但是当我尝试在具有相同类的多个 html 块上重用它时，它会中断。我尝试使用`.next()`and`.closest()`方法但没有结果。我在哪里应用这些？`<select>`该功能是通过使用无序列表重新创建下拉列表。

重要的是，类和函数与由 CMS 生成的列表保持一致并且可以是一个页面多次，因此有一个解决方案让我更改代码并单独调用每个函数并不好..

**演示**

[下拉菜单工作正常](http://jsfiddle.net/6mukW/1/)（功能在一个无序列表上工作正常）

[下拉中断](http://jsfiddle.net/6mukW/2/)（重用函数和 html 代码时）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:39:18.220

您的脚本有许多需要更改的地方。[这应该可行](http://jsfiddle.net/6mukW/11/)，尽我所能理解你想要做什么。

重点是这样的：

```
$(".cloned").click(function(){
    $('.options').toggle();
    e.preventDefault();                 
}); 
```

处理程序中的`$('.options')`选择器选择**所有**具有该类的元素`options`，而不管您在文档中单击的位置。这就是为什么每个下拉菜单都会在点击时激活。

您应该只为点击选择特定`.options`元素。有很多方法可以做到这一点，但这就是我所做的：

```
$(this).next('.options').toggle(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:56:56.617

这可以更好..看看这个小提琴

使用`toggleClass()`

[小提琴](http://jsfiddle.net/6mukW/15/)

# android - 如何使应用程序可以在 Android 2.2 和最新的 4.2 上运行日历

> ID：14518031
> 
> 赞同：1
> 
> 时间：2013-01-25T08:28:43.740
> 
> 标签：android, events, calendar

我想让应用程序在 Android 2.2 和最新版本上运行。

当我想创建一个将事件插入日历的功能时，它无法实现。如何使以下功能起作用？

我使应用程序在具有 MinSDK 级别 8 的 Android 2.2 上运行

```
<uses-sdk android:minSdkVersion="8" /> 
```

我无法导入以下库：

```
import android.provider.CalendarContract;
import android.provider.CalendarContract.Events;

private void saveCalendarEventICS(ArrayList<EventItem> event, int position) {

        Intent intent = new Intent(Intent.ACTION_INSERT)
         .setType("vnd.android.cursor.item/event")
         .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, "1111111")
         .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, "222222")
         .putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY , false) // just included for completeness
         .putExtra(Events.TITLE,event.get(position).title)
         .putExtra(Events.DESCRIPTION, "dcscdsvvd")
         .putExtra(Events.EVENT_LOCATION, "Kuala Lumpur")
         .putExtra(Events.RRULE, "FREQ=DAILY;COUNT=10") 
         .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)
         .putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE)
         .putExtra(Events.ALLOWED_REMINDERS, "METHOD_DEFAULT")
         .putExtra(Intent.EXTRA_EMAIL, "");
        startActivity(intent);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:33:27.887

在你的代码中试试这个：

```
Calendar cal = Calendar.getInstance();              
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", cal.getTimeInMillis());
intent.putExtra("allDay", true);
intent.putExtra("rrule", "FREQ=YEARLY");
intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
intent.putExtra("title", "A Test Event from android app");
startActivity(intent); 
```

**编辑：**

检查此代码 [http://code.google.com/p/android-calendar-provider-tests/source/browse/trunk/src/com/androidbook/androidcalendar/CalendarActivity.java](http://code.google.com/p/android-calendar-provider-tests/source/browse/trunk/src/com/androidbook/androidcalendar/CalendarActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:48:38.463

在 Ics 中引入了一个新的 Calendar api，因此您的代码将无法在 ics 中运行。[ICS 中的新公共 API](http://android-developers.blogspot.com/2011/10/ics-and-non-public-apis.html)

为了支持在所有日历中添加事件，您可以像这样更改代码 -

```
if (Build.VERSION.SDK_INT >= 14) {
            saveCalendarEventICS();
        }
        else {
            int cal_id = getCalendar_ID();
            if(cal_id != 0){
                saveCalendarEvent(cal_id);
            }
        }

private int getCalendar_ID() {
            // TODO Auto-generated method stub
            int calendar_id         = 0;
            String[] projection     = new String[] { "_id", "name" };
            String selection        = "selected=1";
            String path             = "calendars";
            Cursor calendarCursor   = getCalendarCursor(projection, selection, path);

        if (calendarCursor != null && calendarCursor.moveToFirst()) {
            int nameColumn      = calendarCursor.getColumnIndex("name");
            int idColumn        = calendarCursor.getColumnIndex("_id");
            do {
                String calName  = calendarCursor.getString(nameColumn);
                String calId    = calendarCursor.getString(idColumn);
                if (calName != null /*&& calName.contains("Test")*/) {
                    calendar_id = Integer.parseInt(calId);
                }
            } while (calendarCursor.moveToNext());
        }
        return calendar_id;
    }

private void saveCalendarEventICS() {

        Intent intent = new Intent(Intent.ACTION_INSERT)
         .setType("vnd.android.cursor.item/event")
         .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, frsttime)
         .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, sncdtime)
         .putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY , false) // just included for completeness
         .putExtra(Events.TITLE, vl_hldr[0])
         .putExtra(Events.DESCRIPTION, vl_hldr[2])
         .putExtra(Events.EVENT_LOCATION, vl_hldr[1])
         .putExtra(Events.RRULE, "FREQ=DAILY;COUNT=10") 
         .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)
         .putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE)
         .putExtra(Events.ALLOWED_REMINDERS, "METHOD_DEFAULT")
         .putExtra(Intent.EXTRA_EMAIL, "");
        startActivity(intent);
    }

private void saveCalendarEvent(int calid) {
            // TODO Auto-generated method stub

//Create the event here -----------

            Uri newEvent;
            if (Build.VERSION.SDK_INT >= 8) {
                //newEvent = Uri.parse("content://com.android.calendar/events");
                newEvent = ctx.getContentResolver().insert(Uri.parse("content://com.android.calendar/events"), event);

                if (newEvent != null) {
                    long id = Long.parseLong( newEvent.getLastPathSegment() );
                    ContentValues values = new ContentValues();
                    values.put( "event_id", id );
                    values.put( "method", 1 );
                    values.put( "minutes", 15 ); // 15 minuti

                    getContentResolver().insert( Uri.parse( "content://com.android.calendar/reminders" ), values );
                }
            }
            else {
                newEvent = ctx.getContentResolver().insert(Uri.parse("content://calendar/events"), event);

                if (newEvent != null) {
                    long id = Long.parseLong( newEvent.getLastPathSegment() );
                    ContentValues values = new ContentValues();
                    values.put( "event_id", id );
                    values.put( "method", 1 );
                    values.put( "minutes", 15 ); // 15 minuti

                    getContentResolver().insert( Uri.parse( "content://calendar/reminders" ), values );
                }
            }

        }catch(Exception ee){}

    } 
```

# api - 产品匹配算法

> ID：14518033
> 
> 赞同：1
> 
> 时间：2013-01-25T08:28:49.907
> 
> 标签：api, commission-junction

我正在使用commision junction API通过他们提供的不同提要获取数据......

我想实现一种算法来从不同的卖家那里获取类似的产品..

与此相关的任何帮助

提前致谢

# sql - 在 SQL 中将列与时间数据类型进行比较

> ID：14518035
> 
> 赞同：0
> 
> 时间：2013-01-25T08:28:59.567
> 
> 标签：sql, sql-server, datetime

我有带有时间数据类型的列的表。我想比较 SQL 中的时间。主要问题是当我将任何时间与“00:00:00”/“00:10:00”进行比较时。

例如，从 trn_time > '19:00:00' 的火车中选择时间。然后在输出中我想要'00:00:00' 我也没有得到。而且我不想使用“日期时间”数据类型。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:37:00.937

我在 mysql 中创建了一个名为“table11”的表

```
CREATE TABLE `table11` (
    `id` INT(10) NULL DEFAULT NULL,
    `time_col` TIME NULL DEFAULT NULL
) 
```

并插入数据如下![在此处输入图像描述](../Images/9cc4f09c8ac65acddc5521d86b3d14e9.png)

当我使用以下查询时

```
select  * from table11 tbl where tbl.time_col< '19:00:00' 
```

我得到了结果

![在此处输入图像描述](../Images/bf7ac6f69e195b2b27688380c88db268.png)

如果你使用 tbl.time_col< '19:00:00' 那么只有你会在输出中得到 '00:00:00' 。我认为在你的情况下最好使用“日期时间”数据类型

# android - 是否存在可免费使用的基于肖像位置的增强现实框架？

> ID：14518037
> 
> 赞同：1
> 
> 时间：2013-01-25T08:29:08.613
> 
> 标签：android, augmented-reality

欢迎大家

我正在寻找基于位置的增强现实框架，例如 mixare。它必须显示摄像机视图，并且必须覆盖 POIS（位置）并显示到 POIS 的距离和视图。Mixare 非常适合它，但它是在 GPL 许可下发布的，所以我不能使用它。

是否存在一个框架，但具有许可许可证（如 apache 2 或更小的 gpl）？

我必须在商业应用程序上使用它。

PD：我找到了这个框架，但不幸的是不适用于肖像活动：[http](http://code.google.com/p/android-augment-reality-framework/) ://code.google.com/p/android-augment-reality-framework/ （它只适用于风景活动并且有一个布尔值来支持模拟肖像但不是完全支持，它必须与明确的肖像活动一起工作（强制在清单中显示为肖像），所以它对我不起作用）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:33:39.010

你是否用过wikitude？领先的增强现实 sdk [http://www.wikitude.com/](http://www.wikitude.com/)。

您可以在此处找到示例。[https://github.com/Wikitude/wikitude-phonegap/tree/master/Android](https://github.com/Wikitude/wikitude-phonegap/tree/master/Android)。它使用跨移动平台，phonegap。

希望它可以帮助你。

# php - jQuery 无法从 href 属性获取文件部分

> ID：14518038
> 
> 赞同：2
> 
> 时间：2013-01-25T08:29:10.010
> 
> 标签：php, jquery

我正在尝试使用 jquery 获取锚标记的 href 值，而不是获取绝对 url，jquery 只返回不带文件部分的 url：这就是我的意思：

我的 HTML/php

```
$url = "http://localhost/mysite/assets/data.txt";
<a class='view-chart' href="<?php echo $url?>">View Chart</a> 
```

我的 jQuery 代码：

```
var url = $('a.view-chart').attr('href');
alert(url); 
```

我得到这个警报：

```
http://localhost/mysite/assets/ 
```

但是当我在浏览器上查看源代码时，我看到了

```
http://localhost/mysite/assets/data.txt 
```

但如果我这样做：

```
<a class='view-chart' href="http://localhost/mysite/assets/data.txt">View Chart</a> 
```

我收到正确的警报消息，即：

```
http://localhost/mysite/assets/data.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:34:18.233

试试这个。它在本地主机中对我有用

```
<html>
    <head>
    <title></title>
    <meta charset="utf-8">
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script>
        $(document).ready(function(){ 
            var url = $('a.view-chart').attr('href');
            alert(url);
        });
    </script>
    </head>
    <body>
    <?php $url = "http://localhost/mysite/assets/data.txt"; ?>
     <a class='view-chart' href="<?php echo $url;?>">View Chart</a>

    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:54:58.650

使用此代码工作正常

```
<?php 
$url = "http://localhost/mysite/assets/data.txt";?>
 <a class='view-chart' href="<?php echo $url?>">View Chart</a> 
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
 <script>
    $(document).ready(function(){ 
        var url = $('a.view-chart').attr('href');
        alert(url);
    });
</script> 
```

我想问题出在工作 jquery implimentation

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:24:17.677

试试这个

```
var url = $('a.view-chart:first').attr('href'); 
```

如果您正在寻找第一个锚的 href。

或者您需要为它们中的每一个分配唯一的 ID，因为您有多个锚标记，然后使用 ID 来获取 href。像

```
$('#anchrId').attr('href'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:39:40.153

谢谢伙计们它工作。问题是有几个链接，所以我将 jquery 代码更改为：

```
$(this).attr('href') 
```

你的回答给了我提示。

# jsf-2 - 使用 在 JSF UIRepeat 中阻止渲染组件

> ID：14518046
> 
> 赞同：0
> 
> 时间：2013-01-25T08:29:37.423
> 
> 标签：jsf-2, primefaces

我有一个 jsf，我想在其中显示复选框列表。如果我在下面的示例中创建它，则复选框将正确呈现。

```
<p:outputPanel layout="block" rendered="#{scheduleConfigBean.selectedMonthType == 1}" style="width: 400px; margin-top: 45px">
  <ui:repeat var="monthDay" value="#{scheduleConfigBean.monthDays}">
    <p:selectBooleanCheckbox value="#{monthDay.checked}" />
    <h:outputText value="#{monthDay.name}" />
  </ui:repeat>
</p:outputPanel> 
```

但是当我向每个复选框添加一个 ajax 事件侦听器时，面板不再呈现。我的问题是什么？

```
<p:outputPanel layout="block" rendered="#{scheduleConfigBean.selectedMonthType == 1}" style="width: 400px; margin-top: 45px">
  <ui:repeat var="monthDay" value="#{scheduleConfigBean.monthDays}">
    <p:selectBooleanCheckbox value="#{monthDay.checked}">
      <p:ajax listener="#{scheduleConfigBean.updateMonthlyButtonState}" update="saveBtn" />
    </p:selectBooleanCheckbox>
    <h:outputText value="#{monthDay.name}" />
  </ui:repeat>
</p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:23:33.370

感谢达卡，他的回答给了我解决方案。

```
<p:outputPanel layout="block" rendered="#{scheduleCreate.selectedMonthType == 1}" style="width: 500px; margin-top: 45px">
  <c:forEach items="#{scheduleCreate.monthDays}" var="monthDay" varStatus="status">
    <p:selectBooleanCheckbox value="#{monthDay.checked}" style="margin-left: 8px">
      <p:ajax listener="#{scheduleCreate.updateButton}" update="saveBtn" />
    </p:selectBooleanCheckbox>
  </c:forEach>
</p:outputPanel> 
```

# mysql - mysql 触发器 - 有没有类似 FOR EACH TABLE 的东西

> ID：14518051
> 
> 赞同：0
> 
> 时间：2013-01-25T08:29:56.990
> 
> 标签：mysql, triggers

MySql 触发器很有趣，但也很棘手。

我有一些问题，我想运行一次触发器`after insert on`。我想在插入行后运行一次触发器，每个表都有类似的东西吗？？？？

如何使此触发器仅运行一次，而不是为创建的每一行运行。

```
CREATE
DEFINER=`root`@`localhost`
TRIGGER `mydb`.`leave_taken_trigger`
AFTER INSERT ON `mydb`.`leave`
FOR EACH ROW
BEGIN
    set @lt:= (SELECT count(*) FROM `leave` where  (staff_leave_application_staff_id_staff = new.staff_leave_application_staff_id_staff and leave_type_id_leave_type = new.leave_type_id_leave_type) and active = 1 );

        INSERT INTO `leave_taken`(leave_type_id_leave_type, staff_id_staff, taken_days, updated) 
        VALUES (new.leave_type_id_leave_type, new.staff_leave_application_staff_id_staff, IFNULL(@lt,0), CURDATE())
        ON DUPLICATE KEY UPDATE taken_days=IFNULL(@lt,0), updated = CURDATE(); 

END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:35:53.373

我认为您无法通过触发器实现您的要求。您的触发器将在创建的每一行中运行。我建议您在 INSERT 成功完成后使用代码中的存储过程。

# c - C 共享库中的函数重载（不同的返回类型，不同数量的参数）

> ID：14518052
> 
> 赞同：1
> 
> 时间：2013-01-25T08:30:13.317
> 
> 标签：c, operator-overloading, return-value

我的工作是创建一个共享库，它应该可以用来替代其他共享库的几个（旧）版本。

现在的问题：

我必须结合：

图书馆一：

```
const char *mixer_ctl_get_enum_string(struct mixer_ctl *ctl, unsigned int enum_id);
const char *mixer_ctl_get_name(struct mixer_ctl *ctl); 
```

图书馆 b：

```
int mixer_ctl_get_enum_string(struct mixer_ctl *ctl, unsigned int enum_id, char *string, unsigned int size);
int mixer_ctl_get_name(struct mixer_ctl *ctl, char *name, unsigned int size); 
```

我发现了如何处理多个输入参数，但现在它们也有不同的返回类型。我在 C++ 中找到了这方面的示例，但在 C 中没有。

我怎样才能做到这一点？

如果 C 可以像 Java 一样工作，我会同时实现两者，一切都很好，但是在 C 中呢？

感谢您的帮助和亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:36:56.820

C中没有函数重载。

原因是程序集生成中没有名称修饰。在 C++ 中，具有不同类型的重载函数将具有不同的重载名称，而在 C 中则不是。

所以通常的做法是为不同类型的函数指定不同的名称，比如

```
float sqrtf(float x);
double sqrt(double x);
long double sqrtl (long double x); 
```

等等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:36:57.217

C 不提供函数重载工具，共享库机制也不提供。区分函数调用的唯一方法是使用不同的名称。

为了解决您的不同接口（返回类型、参数等）的问题，我建议构建 3 个共享库：

1.  具有特定接口的组合功能的共享库
2.  应用程序 A 的代理共享库，提供预期的接口，将调用传递给组合库
3.  应用程序 B 的代理共享库，提供预期的接口，将调用传递给组合库

不用说，随着时间的推移，您可能会更改应用程序 A 和 B 以直接使用组合库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:44:40.670

没有简单或通用的解决方案。

在 C++ 中，您可以将函数打包到类中，并且函数名只需在类中是唯一的。C没有这个。

在 C++ 中，参数的返回类型和类型算作函数名称的一部分（因此`void foo(int)`实际上`void foo(float)`是不同的函数，编译器知道要调用哪个函数）。C没有这个。

在 C 中，有一个单一的全局命名空间，类型*不*计入函数名的一部分。正如其他人所指出的，标准 C 函数名称对于不同的返回类型是不同的：`sqrt()`返回`double`但`sqrtf()`返回`float`。

C 中有一些函数可以接受不同数量的参数。一个经典的例子是`printf()`. 但是这些写起来很棘手，而不是解决您的问题的一般方法。在`printf()`存在“格式字符串”参数的情况下，`printf()`函数只需要相信格式字符串与`printf()`. （好吧，由于`printf()`很常见，一些编译器实际上会根据参数检查格式字符串，但您的库函数没有这个优势！）

我在 C 中做了很多工作，单一的全局命名空间是 C 最烦人的限制之一。你有没有机会在这个项目中实际使用 C++？如果您使用 C++ 的基本特性，则可以将其视为“带类的 C”，并利用命名空间和函数重载。

否则，我认为您最好的选择是使用重构工具或文本编辑器中非常好的搜索和替换功能，将函数名称更改为全局唯一。一个明显的方法是更改​​每个函数以将库名称作为前缀：

```
const char *a_mixer_ctl_get_name(struct mixer_ctl *ctl);  // library a
int b_mixer_ctl_get_name(struct mixer_ctl *ctl, char *name, unsigned int size);  // library b 
```

然后，您将不得不使用旧库重构或搜索和替换程序，但由于这些库是相互矛盾的，您应该很容易让事情再次正常运行。

# ios - NSFileManager 不创建文件夹

> ID：14518054
> 
> 赞同：2
> 
> 时间：2013-01-25T08:30:22.810
> 
> 标签：ios, objective-c, xcode, nsfilemanager

```
- (NSURL *) applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

……

```
NSURL *folder = [[[Database sharedInstance] applicationDocumentsDirectory] URLByAppendingPathComponent:@"temp"];
BOOL isFolder;
NSLog(@"URL: %@", folder);
if ([[NSFileManager defaultManager] fileExistsAtPath:folder.absoluteString isDirectory:&isFolder] == NO)
{
    NSLog(@"IsFolder: %d", isFolder);
    [[NSFileManager defaultManager] createDirectoryAtURL:folder withIntermediateDirectories:YES attributes:nil error:&error];
    if (error)
        NSLog(@"Error: %@", error.localizedDescription);
} 
```

我运行这部分代码两次。

我希望该文件夹将被创建，但每次我收到一个日志：“IsFolder：7”。

为什么第一次运行后没有创建文件夹？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T08:51:58.620

问题出在`folder.absoluteString`.

应该是`folder.path`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-25T08:38:14.337

请将 folder.absoluteString 替换为文件夹，您的问题将得到解决。

循序渐进：

1) 获取文档文件夹

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentsDirectory, NSUserDomainMask, YES);
 NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

2) 获取文档文件夹和文件夹名称

```
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"MyFolder"]; 
```

3）检查alerdy是否存在

```
if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath]){

    NSError* error;
    if(  [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error])

        else
        {
            NSLog(@"[%@] ERROR: attempting to write create MyFolder directory", [self class]);
            NSAssert( FALSE, @"Failed to create directory maybe out of disk space?");
        } 
```

# javascript - 我的javascript会发生什么？它不能正常工作

> ID：14518055
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:30:25.033
> 
> 标签：javascript, jquery, html

我真的不知道我的代码有什么问题，但是当我预览我的 HTML 时它无法正常工作。我错过了什么吗！？

问题，当单击向下时，g1 和 g2 工作正常，但是当 g2 我单击向下按钮时，它应该出现 g3，但它跳转到 g4，并且我的向上和向下按钮不再工作:(

```
function chgPic(id) {
  $('#show').attr('src', id).stop(true, true).hide().fadeIn();
}

//tooltip (rename the element to put tooltip on it "title")
//$(document).ready(function() {
//  $("#simple").tiptip();
//});

function up() {
  if (document.getElementById('g1').style.display == 'block') {
    $('#g1').show();
    $('#g2').hide();
    $('#g3').hide();
    $('#g4').hide();
  }
  else if (document.getElementById('g2').style.display == 'block') {
    $('#g1').show();
    $('#g2').hide();
    $('#g3').hide();
    $('#g4').hide();
  }
  else if (document.getElementById('g3').style.display == 'block') {
    $('#g1').hide();
    $('#g2').show();
    $('#g3').hide();
    $('#g4').hide();
  }
  else if (document.getElementById('g4').style.display == 'block') {
    $('#g1').hide();
    $('#g2').hide();
    $('#g3').show();
    $('#g4').hide();
  }
  else {
    $('#g1').hide();
    $('#g2').hide();
    $('#g3').hide();
    $('#g4').show();
  }
}

function down() {
  if (document.getElementById('g1').style.display == 'block') {
    $('#g1').hide();
    $('#g2').show();
    $('#g3').hide();
    $('#g4').hide();
  }
  else if (document.getElementById('g2').style.display == 'block') {
    $('#g1').hide();
    $('#g2').hide();
    $('#g3').show();
    $('#g4').hide();
  }
  else if (document.getElementById('g3').style.display == 'block') {
    $('#g1').hide();
    $('#g2').hide();
    $('#g3').hide();
    $('#g4').show();
  }
  else {
    $('#g1').hide();
    $('#g2').hide();
    $('#g3').hide();
    $('#g4').show();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:56:49.520

我认为你的标记有问题，所以元素不是你想的那样。例如，如果您没有`#g3`正确关闭标签，则`#g4`标签可能在`#g3`标签内。

您的代码比您需要的多一点，但如果您正确设置了元素，它应该可以正常工作。

您可以使用 jQuery 来检查哪些元素是可见的，这样您就不需要专门为元素设置`display`样式以`block`使代码正常工作：

```
function up() {
    if ($('#g2').is(':visible')) {
    $('#g1').show();
    $('#g2').hide();
  }
    else if ($('#g3').is(':visible')) {
    $('#g2').show();
    $('#g3').hide();
  }
    else if ($('#g4').is(':visible')) {
    $('#g3').show();
    $('#g4').hide();
  }
}

function down() {
    if ($('#g1').is(':visible')) {
    $('#g1').hide();
    $('#g2').show();
  }
    else if ($('#g2').is(':visible')) {
    $('#g2').hide();
    $('#g3').show();
  }
    else if ($('#g3').is(':visible')) {
    $('#g3').hide();
    $('#g4').show();
  }
} 
```

演示：http: [//jsfiddle.net/86GVE/2/](http://jsfiddle.net/86GVE/2/)

如果您将元素选择到 jQuery 对象中，您可以获得更少重复的代码，并且您可以轻松添加任意数量的元素：

```
var g = $('#g1,#g2,#g3,#g4');

function up() {
    for (var i = 1; i < g.length; i++) {
        if (g.eq(i).is(':visible')) {
            g.eq(i - 1).show();
            g.eq(i).hide();
            break;
        }
    }
}

function down() {
    for (var i = 0; i < g.length - 1; i++) {
        if (g.eq(i).is(':visible')) {
            g.eq(i + 1).show();
            g.eq(i).hide();
            break;
        }
    }
} 
```

演示：http: [//jsfiddle.net/86GVE/1/](http://jsfiddle.net/86GVE/1/)

如果您使用类而不是 id 来定位元素，您甚至可以添加元素而无需对 Javascript 代码进行任何更改。只需将相同的类添加到您想要包含的所有元素，然后选择它们。例子：

```
var g = $('.g'); 
```

# sql - 选择特定列时 SQLDeveloper 输出更改

> ID：14518056
> 
> 赞同：2
> 
> 时间：2013-01-25T08:30:33.197
> 
> 标签：sql, oracle10g, oracle-sqldeveloper

我正在使用 Oracle SQL Developer，我正在尝试运行这样的查询

```
SELECT * FROM 
  (SELECT id1 CONTRACT_ID1, id2 CONTRACT_ID2 FROM contract_table)
  LEFT JOIN
  (SELECT id1 A_CONTRACT_ID, id2 A_SPECIAL_CONTRACT_ID from special_contract_table_a)
  on (CONTRACT_ID1 = A_CONTRACT_ID)
  LEFT JOIN
  (SELECT id1 B1_CONTRACT_ID, id2 B1_DOCUMENT_ID from document_table_b1)
  ON (CONTRACT_ID2 = B1_CONTRACT_ID)
  LEFT JOIN
  (SELECT id1 B2_CONTRACT_ID, id2 B2_DOCUMENT_ID from document_table_b2)
  ON (A_SPECIAL_CONTRACT_ID = B2_CONTRACT_ID)
  LEFT JOIN
  (SELECT id1 B3_CONTRACT_ID, id2 B3_DOCUMENT_ID from document_table_b3)
  ON (A_SPECIAL_CONTRACT_ID = B3_CONTRACT_ID)
  LEFT JOIN
  (SELECT page PAGE, id1 C1_DOCUMENT_ID, id2 C2_DOCUMENT_ID, id3 C3_DOCUMENT_ID from page_table_c)
  ON (C1_DOCUMENT_ID = B1_DOCUMENT_ID OR C2_DOCUMENT_ID = B2_DOCUMENT_ID OR C3_DOCUMENT_ID = B3_DOCUMENT_ID)
  LEFT JOIN
  (SELECT id2 B1_DOCUMENT_ID_2 from, status B1_DOCUMENT_STATUS from document_table_b1)
  ON (C1_DOCUMENT_ID = B1_DOCUMENT_ID_2)
  LEFT JOIN
  (SELECT id2 B2_DOCUMENT_ID_2 from, status B2_DOCUMENT_STATUS from document_table_b2)
  ON (C2_DOCUMENT_ID = B2_DOCUMENT_ID_2)
  LEFT JOIN
  (SELECT id2 B3_DOCUMENT_ID_2 from, status B3_DOCUMENT_STATUS from document_table_b3)
  ON (C3_DOCUMENT_ID = B3_DOCUMENT_ID_2)
; 
```

所以基本上这样做是，我选择我的两个基本 ID，然后获取所有关联组的所有成员，然后获取每个成员的状态（并且状态存储在组声明中）。只要我使用`SELECT * FROM`. 如果我将其更改为`SELECT CONTRACT_ID1, PAGE, B1_DOCUMENT_STATUS, B2_DOCUMENT_STATUS, B3_DOCUMENT_STATUS`输出从 24 行折叠到 4 行，则仅显示`document_table_b1`.

知道如何解决这个问题吗？

附加信息：DB 版本是 Oracle 10g。Oracle SQL Developer 版本是 3.2.09。Autotrace 和 Explainplan 之间的比较显示了从`ID_1(+) = ID_2`(Explainplan) 到`ID_1 = ID_2`(Autotrace) 的某些访问谓词与两个 select 语句的差异。我高度怀疑查询优化器在这里搞砸了。我还没有找到修改其设置的方法。在这个方向上的任何输入都可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:46:42.407

哦，太难读了，为什么要把每个表都放到select语句中

```
SELECT a.id1 as CONTRACT_ID1
,ptc.page as PAGE
,b1.status as B1_DOCUMENT_STATUS
,b2.status as B2_DOCUMENT_STATUS
,b3.status as B3_DOCUMENT_STATUS
FROM 
   contract_table ct 
  LEFT JOIN special_contract_table_a scta  on scta.id1 = ct.id1
  LEFT JOIN document_table_b1 b1 ON b1.id1 = ct.id2
  LEFT JOIN document_table_b2 b2 ON b2.id1 = scta.id2 
  LEFT JOIN document_table_b3 b3 ON b3.id1 = scta.id2
  LEFT JOIN page_table_c ptc ON c.id1 = b1.id1 or c.id2= b2.id1 or c.id3 = b3.id1
  where (YoursPredicateHere)
  --dont understand why you are joining them again 
  --LEFT JOIN document_table_b1 b1_2 ON (C1_DOCUMENT_ID = B1_DOCUMENT_ID_2)
  --LEFT JOIN document_table_b2 b2_2 ON (C2_DOCUMENT_ID = B2_DOCUMENT_ID_2)
  --LEFT JOIN document_table_b3 b3_2 ON (C3_DOCUMENT_ID = B3_DOCUMENT_ID_2) 
```

# java - 切入点涵盖了哪些方法？

> ID：14518057
> 
> 赞同：2
> 
> 时间：2013-01-25T08:30:33.413
> 
> 标签：java, aspectj, pointcut

是否有可能知道 AspectJ 中的切入点涵盖了哪些方法？

这个问题的背景是我有一个涵盖所有方法的切入点（除了它自己的方法）：

```
pointcut traceMethods() : (execution(* *(..))&& !cflow(within(MethodTrace))); 
```

*一旦应用程序启动，*我希望能够为切入点所涵盖的每个方法创建一个方法签名列表。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:46:15.117

对于您想要的以下内容：

```
pointcut traceMethods() : (execution(* *(..))&& !cflow(within(MethodTrace)));

before() : traceMethods()
{
     // Holds the signature the method intercepted by the pointcut traceMethods()
     String s = thisJoinPointStaticPart.getSignature().toString();  

     // do something with string 's'
} 
```

关于它的更多信息在[这里](http://www.eclipse.org/aspectj/doc/next/progguide/language-thisJoinPoint.html)：

> AspectJ 提供了一个特殊的引用变量 thisJoinPoint，它包含有关当前连接点的反射信息，供建议使用。thisJoinPoint 变量只能在通知上下文中使用，就像 this 只能在非静态方法和变量初始化器的上下文中使用一样。在建议中，thisJoinPoint 是 org.aspectj.lang.JoinPoint 类型的对象

# c# - 如何从 sql server 播放 mp3 字节块，使用 C# 传输到桌面客户端（通过 wcf）？

> ID：14518059
> 
> 赞同：8
> 
> 时间：2013-01-25T08:30:44.580
> 
> 标签：c#, sql, mp3, desktop, playback

我`"chunks"`在数据库上有音频（`mp3`格式），`sql`即，您可以想象一个`mp3`文件，分成相等大小的块，每个块都保存在`sql`服务器数据库的记录中。这些`chunks`通过`WCF`服务返回给桌面客户端。当然，客户端在收到一个块时会要求下一个块。（它们将按顺序接收，因此标题首先出现！）这是一个问题，我如何才能`chunks`在我的桌面应用程序中依次播放收到的这个？我可以使用每个块来缓冲播放器来背靠背播放它们吗？

**请注意：** - 桌面客户端是 C# - 如果它可以用于此目的，播放器可以是 wmp！-块以字节为单位保存-由于某些原因，“sql 上的块”系统已经由其他人实现..我只需要找到一种方法来像桌面上的流一样播放它们

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:14:50.020

假设您的 mp3 播放器可以从 System.IO.Stream 对象播放，请使用以下代码实现您自己的流类

```
 private byte[] GetDataBlock()
    {
        while (data.Count == 0)
        {
            //TODO: Read More Data from the database
            index = 0;
        }
        return data.Peek();
    }
    private void RemoveDataBlock()
    {
        data.Dequeue();
        index = 0;
    }

    Queue<byte[]> data = new Queue<byte[]>();
    int index = 0;
    public override int Read(byte[] buffer, int offset, int count)
    {            
        int left = count;
        int dstIndex = 0;

        while (left > 0)
        {
            byte[] front = GetDataBlock();

            int available = front.Length - index;
            // how much from the current block can we copy?
            int length = (available <= left) ? available : left;
            Array.Copy(front, index, buffer, dstIndex, length);
            dstIndex += length;
            left -= length;
            index += length;
            // read all the bytes in the array?
            if (length == available)
            {
                RemoveDataBlock();
            }
        }

        return count;
    } 
```

这样做是将数据块放入队列中。Read 方法按添加顺序读取它们。

此代码一次只能读取 1 个块，但可以扩展为在单独的线程上读取并缓冲多个块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:23:50.720

假设您有一种方法可以在用户请求它们时在数据库中适当地对它们进行排序，那么您的故障就相当简单了。在伪代码中

1.  用户请求 mp3
2.  做：
3.  检查并发送给客户端可用的块
4.  如果有要播放的块，按定义的顺序播放它们（将它们添加到流中）
5.  while: 在这些块中没有遇到页脚 //end do

本质上，将可用的块发送给用户，直到遇到页脚，播放块就好像它们已经完成一样。

# ruby-on-rails - 如何在捆绑器中为多个平台供应宝石

> ID：14518069
> 
> 赞同：4
> 
> 时间：2013-01-25T08:32:13.990
> 
> 标签：ruby-on-rails, bundler

如何在捆绑器中为多个平台供应宝石？

我在 Mac OSX 上开发，但在 ubuntu 上部署一个具有像 libv8 这样的本机依赖项的 gem 可以有一个名为

[https://rubygems.org/gems/libv8/versions/3.11.8.13-x86_64-darwin-10](https://rubygems.org/gems/libv8/versions/3.11.8.13-x86_64-darwin-10) 和[https://rubygems.org/gems/libv8/versions/3.11.8.13-x86_64-linux](https://rubygems.org/gems/libv8/versions/3.11.8.13-x86_64-linux) 所有版本都可以看到在[https://rubygems.org/gems/libv8/versions](https://rubygems.org/gems/libv8/versions)

所以在我的 Mac 上，当我运行捆绑包时。我想要：
libv8-3.11.8.13-x86_64-darwin-10.gem 和 libv8-3.11.8.13-x86_64-linux.gem 同样升级和删除 gem 必须删除和添加其他平台的 gem

现在在 Mac 上它只添加 libv8-3.11.8.13-x86_64-darwin-10.gem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:07:31.253

在您的应用程序的供应商/缓存文件夹中下载此 gem [https://rubygems.org/gems/libv8/versions/3.11.8.13-x86_64-linux](https://rubygems.org/gems/libv8/versions/3.11.8.13-x86_64-linux)。我不认为您经常更新此 gem 这是一个很正常的解决方案. 我也遇到了这个问题，没有找到其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-22T15:53:47.647

这是一个很老的问题，但今天我还是遇到了同样的问题，下面的命令解决了这个问题：

```
bundle config specific_platform true
bundle lock --add-platform universal-darwin
bundle lock --add-platform x86_64-linux
bundle package --all-platforms 
```

快速测试：

```
mkdir /tmp/test
cd /tmp/test
bundle config specific_platform true
bundle init
bundle lock --add-platform universal-darwin
bundle lock --add-platform x86_64-linux
bundle add google-protobuf
bundle cache --all-platforms 
```

# xml - TinyXPath：找不到相对后代

> ID：14518072
> 
> 赞同：1
> 
> 时间：2013-01-25T08:32:32.553
> 
> 标签：xml, xpath, tinyxpath

TinyXPath 的占用空间小，使其成为用于简单 XPath 查询的有吸引力的包。然而，它的一些功能似乎不像一个（新手）所期望的那样工作。具体来说，我似乎无法获得特定（非根）节点的琐碎后代的匹配。[这个问题](https://stackoverflow.com/questions/5617271/how-to-find-child-elements-of-a-specific-node-with-tinyxpath)涉及一个几乎相同的问题，但是当 XPath 表达式针对最近的孩子之外的后代时，建议的答案不起作用。

示例输入（test.xml）：

```
<A>
<B val="123">
    <C>
        <D val="321">123</D>
        <E>e</E>
    </C>
    <F>f</F>
</B>
<C>
    <D val="432">d1</D>
</C>
</A> 
```

代码：

```
#include "xpath_static.h"

int mainSO() 
{
    TiXmlDocument doc;
    if(doc.LoadFile("test.xml")) {
    TiXmlNode* pRoot = doc.RootElement();
    assert(pRoot);

    const TiXmlNode* pChild(nullptr);
    TinyXPath::o_xpath_node(pRoot, "/A/B", pChild);         // OK! Root-relative expressions work.

    const TiXmlNode* pChild2(nullptr);
    TinyXPath::o_xpath_node(pChild, "C", pChild2);          // OK!

    const TiXmlNode* pChild3(nullptr);
    TinyXPath::o_xpath_node(pChild, "C/D", pChild3);        // Fail!
    // TinyXPath::o_xpath_node(pChild, ".C/D", pChild3);    // Fail!
    // TinyXPath::o_xpath_node(pChild, ".//C/D", pChild3);  // Fail!
}
return 0;
} 
```

o_xpath_node 内部的 xpath_processor 没有报错；根本没有匹配项。

我也尝试了[这个](https://stackoverflow.com/questions/3988325/tinyxpath-v-get-xpath-base-second-parameter/3988371#3988371)答案中的公式——它确实返回了一个匹配项，但是它只返回节点 C，而不是 C/D。

有人有类似的问题吗？我是否错误地格式化了 XPath 表达式？

我曾希望 TinyXPath 文档可以提供一些指示，但是...

*文档！是！斯巴达！*

干杯，

克拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T13:18:03.117

为了其他人的利益，我想回答我自己的问题。

这个问题一直是 TinyXPath 的一个长期问题，正如[TinyXPath 讨论论坛上的这个线程中所讨论的那样](http://sourceforge.net/p/tinyxpath/discussion/341080/thread/73ea214b/)。

[从 TinyXPath TinyXPath非官方版本 1.3.2](http://kirinyale.net/files/treasury/tinyxpath_1_3_2.zip)开始，Andrey Antsut 终于解决了这个问题（这实际上是我发现的这个“版本”的唯一链接）。

# ocean - PropertyVersionBase 会被删除，还是被更具体的基类取代？

> ID：14518073
> 
> 赞同：1
> 
> 时间：2013-01-25T08:32:35.627
> 
> 标签：ocean

PropertyVersionBase 已被标记为过时了很长一段时间。目前，它是维护对 Template 或 DictionaryTemplate 或 WellLogVersion 或 DictionaryWellLogVersion 等的引用的唯一方法。

与 PropertyVersion[Base] 的混淆在于它也是 *WellLogVersion 之类的基类，它与 Template 类根本不同——Ocean 早期的一个有争议的设计决策（恕我直言）。

我希望得到一些澄清：

这个基类最终会被删除吗？

Template 和 DictionaryTemplate 会有基类吗？

WellLogVersion 和 DictionaryWellLogVersion 会有基类吗？

一般来说，这些类层次结构在未来会走向何方？

（我想标记第二个问题：任何基类也可以公开 Droid，好吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:50:00.290

PropertyVersionBase 在 2012.1 中被标记为过时，但 DictionaryPropertyVersion 被遗漏（仅在 2012.2 中被弃用）。因此，由于海洋稳定性承诺，我们将在 2013.1 中保留并在 2014.1 中删除它们。到目前为止还没有基类的计划（对象是常见的替换基类）。但我们可能会考虑为 2014.1 添加特定的基类。这也将简化我们的一些 API，其中附加的模板可以是字典或连续模板。谢谢你的建议。最好的问候，盖尔

# amazon-web-services - 亚马逊云计算中的虚拟化实现

> ID：14518075
> 
> 赞同：0
> 
> 时间：2013-01-25T08:32:53.543
> 
> 标签：amazon-web-services, scalability, virtualization

我是云计算的初学者，在亚马逊阅读了一些关于云计算的文档。我有一个关于 Xen 和在 Amazon Web 服务中实现的虚拟化艺术的问题。正如我们所知，云计算为部署应用程序提供了弹性和可扩展性。当我们将云应用程序部署到亚马逊时，当我们应用程序的用户数量增加时，我认为亚马逊会自动生成一个新的虚拟服务器来处理用户请求。最初，云应用程序运行在一个虚拟服务器上，现在它运行在两个虚拟服务器上。

有谁知道应用程序如何在亚马逊的两台虚拟服务器上运行？它如何同步数据，CPU资源的使用，......？

亚马逊是否有任何文件指出这个问题和虚拟化实施？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:36:53.553

When you create an instance on the Amazon EC2, they create a new virtual server(called as instance) for you to use it. They do not scale the number of instances based on the user requests. It is upto the user to create the instances for use.

The following [link](http://www.aosabook.org/en/distsys.html) has an exhaustive explanation about how the distributed and scalable applications work

# twig - 如何在 Twig 中更改没有 js 的活动菜单？

> ID：14518083
> 
> 赞同：2
> 
> 时间：2013-01-25T08:33:29.510
> 
> 标签：twig

我将[Twitter Bootstrap](http://getbootstrap.com/)和 Symfony 2 与 Twig 一起使用。我的所有页面都有这个：

```
<div class="navbar navbar-inverse navbar-static-top"> 
            <div class="navbar-inner">
                <a class="brand" href="{{ path('home') }}">BudgetTracker</a>
                <ul class="nav">
                    <li class="active"><a href="{{ path('expenses') }}">Expenses</a></li>
                    <li><a href="#about">Reports</a></li>
                    <li><a href="{{ path('categories') }}">Categories</a></li>
                    <li><a href="#contact">Months</a></li>
                    <li><a href="#contact">Bank Accounts</a></li>
                    </ul>
            </div>
</div> 
```

我不想在每一页上复制它......问题是类活动属性应该只用于当前页面。有没有办法在不使用 JavaScript 的情况下成功，只使用一些宏或包含之王？非常感谢您！

* * *

**更新**

```
<div class="navbar navbar-inverse navbar-static-top"> 
    <div class="navbar-inner">
        <a class="brand" href="{{ path('home') }}">BudgetTracker</a>
        <ul class="nav">
            {% if var == 'Expenses' %}
            <li class="active"><a href="{{ path('expenses') }}">Expenses</a></li>
            {% else %}
            <li><a href="{{ path('expenses') }}">Expenses</a></li>
            {% endif %}

            {% if var == 'Reports' %}
            <li class="active"><a href="#">Reports</a></li>
            {% else %}
            <li><a href="#">Reports</a></li>
            {% endif %}

            {% if var == 'Categories' %}
            <li class="active"><a href="{{ path('categories') }}">Categories</a></li>
            {% else %}
            <li><a href="{{ path('categories') }}">Categories</a></li>
            {% endif %}

            {% if var == 'Months' %}
            <li class="active"><a href="#">Months</a></li>
            {% else %}
            <li><a href="#">Months</a></li>
            {% endif %}

           {% if var == 'Bank Accounts' %}
            <li class="active"><li><a href="#">Bank Accounts</a></li>
            {% else %}
            <li><li><a href="#">Bank Accounts</a></li>
            {% endif %} 
            </ul>
    </div>
</div> 
```

我不是很优雅的尝试。我称之为：

```
{% include 'EMBudgetTrackerBundle::navbar.html.twig' with {'var':'Categories'} %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-31T12:12:29.070

执行此操作的简单方法是使用以下路线：

```
<ul class="nav nav-pills">

<li {% if app.request.attributes.get('_route') == 'your_route' %} class="active" {% endif %}>
<a href="{{ path('your_route') }}">MyTitle</a>
</li>

...
</ul> 
```

这是对@Winzou 提供的解决方案的改编。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:42:48.057

这很简单：

1.  将其定义为单个树枝
    `{% block menu_block %} //your content here {% endblock %}`
2.  在每一页中使用你的块
    `{% block menu_block %} {{ parent() }} {% endblock %}`
3.  在当前菜单元素处为您的班级制作条件语句。显然，您必须将页面的名称或 id 传递给您的树枝（或从请求中检索，即），才能完成您想要做的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T16:04:50.387

这是一个[**例子**](https://gist.github.com/Kristories/7235151)。

```
{% if menu.url == current_url %} class="active"{% endif %} 
```

# android - android fragment addToBackStack(null) ：如何将相同的片段添加到堆栈中一次？

> ID：14518086
> 
> 赞同：12
> 
> 时间：2013-01-25T08:34:00.267
> 
> 标签：android, fragment

当fragment使用addToBackStack(null)方法并且在一个activity中多次点击一个方法时，fragment页面每次都会保存到back stack，当我按back键时，它会恢复相同的页面，如何将相同的fragment添加到stack中一度？

```
 mSettingBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            SettingFragment settingFragment = new SettingFragment();

            FragmentTransaction transaction = getFragmentManager().beginTransaction();
            transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
            transaction.replace(R.id.left_framelayout, settingFragment);
            transaction.addToBackStack(null);
            transaction.commit();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T09:02:33.377

将您添加`Fragment`到后台堆栈时，您还应该传递 a`TAG`以便能够识别`Fragment`：

```
 .addToBackStack(SettingsFragment.TAG); 
```

在添加之前，`Fragment`您将能够使用以下命令检查这`Fragment`是否已经在后台堆栈中：

```
 getFragmentMangager().findFragmentByTag(SettingsFragment.TAG); 
```

`null`如果`Fragment`尚未添加，这将返回。

# java - java.lang.Exception：ServletConfig 尚未初始化

> ID：14518089
> 
> 赞同：3
> 
> 时间：2013-01-25T08:34:08.737
> 
> 标签：java, spring, servlets

我有一个问题是：

> java.lang.Exception：ServletConfig 尚未初始化

我搜索了将近 2 天，但没有找到适合我的解决方案。每个人都说 必须使用**super.init(config) 。**我已经尝试过了，但对我来说没有任何改变。

我的初始化方法；

```
@Override
public void init(ServletConfig config) throws ServletException {

    super.init(config);

    AppServiceServlet service = new AppServiceServlet();
    try {
        service.getir();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    AutoCheckStatus.autoCheckStatus(600000);
} 
```

和我的 AppServiceServlet；

```
 public List<SswAppServiceDto> getir() throws Exception {
    try {
        final WebApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(this
                .getServletContext());
        setiAppServiceBusinessManager((IAppServiceBusinessManager) context.getBean(BEAN_ADI));

        List<SswAppService> result = getiAppServiceBusinessManager().getir();

        List<SswAppServiceDto> list = DtoConverter.convertSswAppServiceDto(result);

        for (int i = 0; i < result.size(); i++) {
            AppService appService = new AppService();
            appService.setServiceName(result.get(i).getName());
            appService.setUid(result.get(i).getServiceUid());
            appService.setHost(result.get(i).getHost());
            appService.setPort((int) result.get(i).getPort());
            SystemConfiguration.appServiceList.put(appService.getUid(), appService);
        }
        return list;

    } catch (RuntimeException e) {
        throw new Exception(e.getMessage(), e.getCause());
    }
} 
```

该行抛出异常；

```
 final WebApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(this.getServletContext()); 
```

在 AppServiceServlet 中说：

> java.lang.Exception：ServletConfig 尚未初始化。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:03:03.530

这个电话：

```
AppServiceServlet service = new AppServiceServlet(); 
```

通过 实例化一个 servlet 实例`new`，这绕过了正常的容器管理的 servlet 创建。因此，关键类变量（例如 servlet 配置）没有正确初始化。

稍后，您正在调用`getServletContext`，它只是重定向到`getServletConfig().getServletContext()`，但是由于 servlet 配置从未完成，您会得到一个异常。

事实上，以您的方式调用`new`servlet 不符合规范 - servlet 应该由 Web 应用程序容器维护。启动启动 servlet 的正确方法是通过 web.xml 文件中的配置或通过注释。

# sql - SQL Server 中的递归查询

> ID：14518090
> 
> 赞同：34
> 
> 时间：2013-01-25T08:34:12.340
> 
> 标签：sql, sql-server

我有一个具有以下结构的表

表名：`matches`

![表名：匹配](../Images/5346e10c6f5e20fb0f2b85f320d1b8da.png)

这基本上存储了哪个产品与哪个产品匹配。我需要处理这个表并存储在一个组表中，如下所示。

表名：`groups`

![在此处输入图像描述](../Images/569011575c870486b150cae8a48ff746.png)

`group_ID`存储`MIN Product_ID`组成`Product_IDS`一个组的。举个例子让我们说

如果 A 匹配 B 并且 B 匹配 C 那么三行应该以格式进入组表`(A, A), (A, B), (A, C)`

我曾尝试研究共同相关的子查询和 CTE，但没有实现这一点。

我需要在 SQL 中完成这一切。

谢谢您的帮助 。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-25T08:48:57.940

试试这个：

```
;WITH CTE
AS
(
    SELECT DISTINCT
        M1.Product_ID Group_ID,
        M1.Product_ID
    FROM matches M1
        LEFT JOIN matches M2
            ON M1.Product_Id = M2.matching_Product_Id
    WHERE M2.matching_Product_Id IS NULL
    UNION ALL
    SELECT
        C.Group_ID,
        M.matching_Product_Id
    FROM CTE C
        JOIN matches M
            ON C.Product_ID = M.Product_ID
)
SELECT * FROM CTE ORDER BY Group_ID 
```

您可以使用它`OPTION(MAXRECURSION n)`来控制递归深度。

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/8028)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:48:44.717

像这样的东西（未测试）

```
with match_groups as (

  select product_id, 
         matching_product_id,
         product_id as group_id
  from matches
  where product_id not in (select matching_product_id from matches)

  union all

  select m.product_id, m.matching_product_id, p.group_id
  from matches m
    join match_groups p on m.product_id = p.matching_product_id
)
select group_id, product_id
from match_groups
order by group_id; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-19T18:18:16.637

递归级别的示例：

[![在此处输入图像描述](../Images/2ce53ea95c84b76cd81c3813dd6a63fd.png)](https://i.stack.imgur.com/9sqOv.png)

```
DECLARE @VALUE_CODE AS VARCHAR(5);

--SET @VALUE_CODE = 'A' -- Specify a level

WITH ViewValue AS
(
    SELECT ValueCode
    , ValueDesc
    , PrecedingValueCode
    FROM ValuesTable
    WHERE PrecedingValueCode IS NULL
    UNION ALL
    SELECT A.ValueCode
    , A.ValueDesc
    , A.PrecedingValueCode 
    FROM ValuesTable A
    INNER JOIN ViewValue V ON
        V.ValueCode = A.PrecedingValueCode
)

SELECT ValueCode, ValueDesc, PrecedingValueCode

FROM ViewValue

--WHERE PrecedingValueCode  = @VALUE_CODE -- Specific level

--WHERE PrecedingValueCode  IS NULL -- Root 
```

# xcode - 如何在 xcode 中显示 html 字符串 n uilabel

> ID：14518092
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:34:16.547
> 
> 标签：xcode

当我解析一个 URL 时，我得到的是 HTML 格式的结果，那么如何在 `UILabel` or中加载那个 HTML 字符串`UITextView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:17:33.057

我相信这不适用于 iOS，因为所需的 AppKit.framework 仅适用于 MacOS 开发。

到目前为止，这个问题的最佳解决方案似乎是GitHub 上提供的[DTCoreText类。](https://github.com/Cocoanetics/DTCoreText)

# python - 无法在 Python 中通过 Snappy 解压缩

> ID：14518098
> 
> 赞同：1
> 
> 时间：2013-01-25T08:34:39.523
> 
> 标签：python, unicode, snappy

在我的项目中，我在 Python 的 HTML 页面中使用[Snappy](https://github.com/andrix/python-snappy/blob/master/test_snappy.py)压缩。我成功地压缩了 HTML 页面。`html_page`包含网站的 html 字符串。

```
import json
import snappy
state_dict["html_page"] = unicode(snappy.compress(html_page),errors="ignore")
"""
If i miss this unicode function 
UnicodeDecodeError: 'utf8' codec can't decode byte 0xbc in position 0:    unexpected code byte

"""
........
........
return json.dumps(state_dict) 
```

但是我在解压缩压缩数据时遇到了问题：

```
d = json.loads(mydict)
snappy.uncompress(d['html_page'].encode("utf-8"))

In [122]: snappy.uncompress(d['html_page'].encode("utf-8"))
---------------------------------------------------------------------------
UncompressError                           Traceback (most recent call last)

/home/gridlex/workspace/MatrixInfrastructure/<ipython console> in <module>()

UncompressError: An error ocurred while uncompressing the string 
```

你能帮我解决一下 Snappy 的压缩和解压问题吗？或者哪种是通过网络传输数据的最佳压缩和解压缩方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:31:09.823

尝试这个：

```
>>> state_dict['test'] = snappy.compress('random string with ö, random string with ö, random string with ö, random string with ö, random string with ö, random string with ö, random string with ö, random string with ö, random string with ö, ')
>>> dump = json.dumps(state_dict, encoding='ISO-8859-2')
>>> load = json.loads(dump, encoding='ISO-8859-2')
>>> snappy.uncompress(load['test'].encode('ISO-8859-2')) 
```

# java - 通过修改 JRE 或 .so 库在 android 中捕获解密的 https 内容

> ID：14518101
> 
> 赞同：1
> 
> 时间：2013-01-25T08:34:47.007
> 
> 标签：java, android, security, networking, ssl

我想查看 android 中的应用程序发送的 https 内容。

我想我可以修改`javax.net.ssl.HttpsURLConnection`类来转储内容，或者如果 android`openssl`用作后端，那么我可以修改`openssl`库。

我只是想知道这可能吗？

如果我想修改`javax.net.ssl.HttpsURLConnection`类，我该怎么办？
我想我应该这样做：
1.下载src
2.根据我的需要编辑
3.替换原来的

但是原来的`javax.net.ssl.HttpsURLConnection`类在哪里？

在对 OpenSSL 进行了一些搜索之后，我决定先对其进行修改，因为我比 java 更了解 c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:42:31.207

你应该检查一下`libcore`。修改`luni/src/main/java/org/apache/harmony/luni/internal/net/www/protocol/https/HttpsURLConnectionImpl.java`以适应您的需求并构建`libcore`，在您的设备上替换它，您应该一切顺利。

您需要 root，我怀疑您的设备上安装了 Cyanogenmod。这是一个如何构建它的快速教程（在你修改了 libcore 之后）：

[http://nilvec.com/building-cyanogen-from-source/](http://nilvec.com/building-cyanogen-from-source/)

它可能有点过时了，它是2年前写的。Cyanogenmod wiki 也有关于如何构建操作系统的简短教程。

# android - 如何在彩票系统中随机选择不同数量的奖品，android / java

> ID：14518104
> 
> 赞同：0
> 
> 时间：2013-01-25T08:34:49.693
> 
> 标签：android, random

制作一个 android 应用程序来做一个彩票奖励系统。

我想随机选择获奖者。但每个奖品的金额不同。它们目前作为三列存储在数据库中，第一是索引 id，自动递增，第二是奖品名称，第三是每个奖品的数量。

例如，最贵的奖品是一辆汽车，而且只有一辆。但下一个更便宜的奖品将是一辆 50 cc 的小型摩托车，大约 10 辆。这份名单可以归结为铅笔和钢笔套装，其中有 800 名获奖者获得该奖项。

所以赢得铅笔和钢笔套装的机会比其他奖品要高得多。

我试图了解什么是最好的编码方式。我了解随机数生成器，甚至是一个更均匀分布真实随机数的更好的生成器。

我不清楚的是最好的方法是为每个奖项设置不同的频率。

有人可以为此指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:55:42.850

计算“每个奖品的数量”的总和。

在 1 和这个总和之间选择一个随机数。

然后根据一些标准对奖品进行排序，并为每个价格关联一个范围（唯一的汽车将具有范围 [1;1]）。

确保范围不相互重叠。每个范围的大小必须等于可用价格的数量。

找到包含你的随机数的范围，就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:43:57.783

最简单且最不容易出错的方式 => 将所有奖品放在一个数组中。每个奖品的投放次数应与给定类型的奖品一样多。然后生成一个最大为数组大小的随机数，并查看给定索引处的奖品是什么。

请注意，这仅考虑您知道给定用户**将赢得奖品**的情况。也许你应该首先给用户一个更大的机会**不赢得任何东西**，例如说你有 4000 个奖品，你希望用户以 1/40 的机会赢得奖品。所以生成一个随机数`40*4000 = 160000`，如果不小于`4000`用户什么都不中奖，否则他在生成的值对应的索引处中奖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:26:50.143

```
Random rand = new Random();
int pickedNumber = rand.nextInt(100);

if(pickednumber>99)

{
    pen or pencil
}

else
{
car
} 
```

我给你举个例子，你必须为滑板车或任何你想在彩票中添加的东西添加更多条件。

# outlook - 在 Outlook 中自动发送/接收电子邮件

> ID：14518106
> 
> 赞同：0
> 
> 时间：2013-01-25T08:34:56.177
> 
> 标签：outlook, outlook-addin, outlook-2013

有没有办法将 Outlook (2013) 设置为在激活时自动发送/接收电子邮件？您现在可以做的是指示 Outlook 定期检查电子邮件，当然，它会在开始时检查电子邮件。没关系，我是粉丝......但大多数时候 Outlook 运行最小化。一旦我恢复它（即把 Outlook 放在前面），我希望它执行自动同步，相当于按下发送/接收文件夹。我同意这根本不是一个关键问题，甚至不是很接近，但对我来说这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:31:11.533

您可以尝试使用`SendKeys`并发送`F9`执行发送/接收操作的热键。我可能会自己做这个击键，但你可以通过编程方式附加到`Explorer.Activate`事件并生成这个事件。您还可以添加去抖动来控制频率，以免使您的 Exchange 服务器不堪重负。

```
DateTime lastRun = DateTime.Now; // debouce control

void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    Application.Explorers.NewExplorer += new Outlook.ExplorersEvents_NewExplorerEventHandler(explorers_NewExplorer);
}

void explorers_NewExplorer(Outlook.Explorer explorer)
{
    ((Outlook.ExplorerEvents_10_Event)explorer).Activate += new Outlook.ExplorerEvents_10_ActivateEventHandler(ExplorerWrapper_Activate);
}

void ExplorerWrapper_Activate()
{
    if ((DateTime.Now - lastRun).TotalMilliseconds > 500) // trigger limit 500ms
    {
        lastRun = DateTime.Now;
        System.Windows.Forms.SendKeys.Send("{F9}"); // hotkey to send/receive
    }
 } 
```

# php - 在 Netbeans 中调试 PHP：复制变量名

> ID：14518110
> 
> 赞同：0
> 
> 时间：2013-01-25T08:35:36.230
> 
> 标签：php, variables, netbeans, xdebug

我正在使用 XDebugg 在 Netbeans 中调试 PHP。

在变量部分中，我看到了所有变量。如何将某些变量的名称复制到剪贴板？或者如何只复制对象属性的名称？例如我有变量`$user`，它有这样的属性：

```
$user->roles[0]->role_title = 'Webmaster'; 
```

如何在`$user`变量中复制属性名称及其路径，以便在源代码中键入它？（所以我将在我的剪贴板字符串中有`$user->roles[0]->role_title`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:56:17.647

可悲的是，但我不知道这是可能的。我建议你向 netbeans 的人发送一个功能请求：http: [//netbeans.org/community/issues.html](http://netbeans.org/community/issues.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T16:40:31.000

在调试时，您可以将鼠标悬停在一个变量上，该变量的内容就会出现。如果您点击刚刚出现的内容，您可以选择并复制它们。或者只是 Ctrl-A 然后 Ctrl-C。

# asp.net - 未在 asp.net 中调用 Web 服务

> ID：14518111
> 
> 赞同：0
> 
> 时间：2013-01-25T08:35:36.850
> 
> 标签：asp.net, ajax, web-services

我在 javascript 中有以下 ajax 调用

```
$.ajax({
    type: "Post",
    url: '../WebService/LoginService.asmx/LoginCheck',
    data: jsondata,
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (resp) {
        if (resp.d == true) {
            window.location.replace("../Admin/DashBoard.aspx");
            return;
        }
        jQuery("#lblex").css("display", "block");
    },
    error: function (response) {
        alert(response.responseText);
    }
}); 
```

这在我测试时在本地运行良好，但是当我在生产服务器上托管它时，它说找不到服务。但我可以浏览到路径

```
../WebService/LoginService.asmx 
```

如果我将网址更改为

```
 ../WebService/LoginService.asmx?op = LoginCheck 
```

它也在那里工作。

任何人都可以让我知道我需要在本地或生产服务器上进行哪些配置更改以使它们都以相同的方式工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:48:32.047

如果此脚本位于 WebForm 中，我建议您使用该`ResolveUrl`方法来确保生成正确的 url，无论您的应用程序托管在何处：

```
url: '<%= ResolveUrl("~/WebService/LoginService.asmx/LoginCheck")', 
```

如果脚本不在 WebForm 中，而是在单独的 javascript 文件中，您无法使用服务器端函数，则可以在 WebForm 中定义全局 javascript 变量：

```
<script type="text/javascript">
    var serviceUrl = '<%= ResolveUrl("~/WebService/LoginService.asmx/LoginCheck")';
</script> 
```

您以后可以在单独的 js 文件中使用：

```
url: serviceUrl, 
```

# .net - 总是使用 Form.Invoke() 是一种不好的做法吗？

> ID：14518112
> 
> 赞同：3
> 
> 时间：2013-01-25T08:35:37.493
> 
> 标签：.net, vb.net, winforms, delegates, invokerequired

我知道，这可能是一个非常简单的问题，但我不能确定。我在一个模块中有这个：

```
Public theHandle As IntPtr 
```

这在我的名为 Form1 的主要形式中：

```
Private Sub Form1_HandleCreated(sender As Object, e As System.EventArgs) Handles Me.HandleCreated
    theHandle = Me.Handle
End Sub 
```

我有许多其他类、模块和线程，并且没有使用`InvokeRequired`，我使用它来从任何地方调用委托。我的意思是来自其他线程、类、模块等。

```
DirectCast(Form1.FromHandle(theHandle), Form1).Invoke(D_Calculate) 
```

代替：

```
D_Calculate.Invoke() 
```

这是一个不好的做法吗？真的有`InvokeRequired`每次检查的目的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T08:42:04.593

您只需要检查`InvokeRequired`您在哪里使用多线程，并且需要将更新编组回 UI 线程。

我认为在任何地方都使用它可能**不是**一个好主意，因为您应该*定义和理解*您的线程模型，因此*确切地*知道线程边界在哪里以及需要此检查的点。

如果您在任何地方都随意使用它们，您基本上是在说“我不知道这是否只会由 UI 线程调用”并且（假设您实际上确实有多个线程）将导致调试痛苦的世界发现你错过了一点，或者结果执行了其他非线程安全的代码。

# javascript - 如何实现动态面包屑

> ID：14518115
> 
> 赞同：2
> 
> 时间：2013-01-25T08:35:55.160
> 
> 标签：javascript, knockout.js

我想实现动态面包屑，真的不知道我该怎么做。在互联网上找不到太多示例。请参阅我添加面包屑的附件图片。它的代码如下

```
 <div style="font-size: 10px;">
        <ul class="breadcrumb">
            <li>
                <a href="../Default.aspx">Home</a> <span class="divider">></span>
            </li>

            <li>

            <li><a id="navObject" href="../AgrProduct/Index.aspx" class="active" >Search</a></li>
        </ul>

    </div> 
```

![面包屑](../Images/0792d774a3e755310b69cd98f2c70525.png)

目前，我在面包屑中只有 2 个级别，即 Home 和 Search。当我单击按钮搜索时，它将显示产品列表，当我在产品上选择一个时，面包屑应显示为主页 > 搜索 > 产品。我还附上了单击“搜索”按钮时发生的情况的图像

![搜索结果](../Images/2c4ce18eaaf3c8985a7d4c66c7766ebf.png)

请让我知道我应该怎么做。我真的被困住了。我使用淘汰赛，jQuery。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T13:38:28.023

好吧，如果您创建了一个面包屑视图模型：

```
var breadCrumbViewModel = function()
{
    var self = this;
    self.breadCrumbs = ko.observableArray();

    self.addCrumb = function(url, text, active)
    {
        self.breadCrumbs.push({ 'url': url, 'text': text, 'active': active });
    }

    self.reset = function()
    {
        self.breadCrumbs.removeAll();
    }
} 
```

然后像这样使用它（我没有测试过这个，所以可能会有一些错误，但这个想法应该是好的！）

```
 <ul class="breadcrumb" data-bind="foreach: breadCrumbViewModel.breadCrumbs">
    <li>
        <a data-bind="attr: { href: url }, text: text, css: { active: active }"></a> <span data-bind="visible: $index < breadCrumbViewModel.breadCrumbs - 1" class="divider">></span>
    </li>
 </ul> 
```

您可以在每次导航到 SPA 中的“页面”时调用的函数中设置它：

```
function()
{
    breadCrumbViewModel.reset();
    breadCrumbViewModel.addCrumb('#/Home', 'Home');
    breadCrumbViewModel.addCrumb('#/Product/:id', 'Search', true);
} 
```

不要忘记将模型绑定到用于淘汰赛的 html 元素以完成其工作。

我正在使用[sammy.js](http://sammyjs.org/docs/tutorials/json_store_1)的示例代码进行导航，尽管我承认我以前没有使用过 sammy.js，但我从[Microsoft Big Shelf SPA 示例](http://www.asp.net/single-page-application/previous-version/sample-bigshelf-application/big-shelf-code)中获得了 navhistory.js 的自定义实现。但这应该足以让您在这方面取得领先。我假设您实际上希望这是一个 SPA，尽管您的链接中有实际的 URL 会带您进入另一个页面。

# css - DIV 未将宽度调整为另一个具有溢出的 DIV 内的内容：自动

> ID：14518118
> 
> 赞同：3
> 
> 时间：2013-01-25T08:36:36.787
> 
> 标签：css, html, overflow

我有以下 HTML 代码：

```
<div class="main">
    <div class="container">
        <div class="contents">
            Some funny stuff in here
        </div>
    </div>
</div> 
```

使用以下 CSS：

```
.main {
    overflow: auto;
    width: 200px;
}
.container {
    border: 1px solid black;
}
.contents {
    width: 300px;
} 
```

这就是这个页面的作用（参见[http://jsfiddle.net/C7RDh/7/](http://jsfiddle.net/C7RDh/7/)）：

*   `main`div 宽度为 200 像素，溢出：自动（即，如果宽度超过 200 像素，则滚动内容）。
*   因此，由于`contents`div 是 300px 宽，它水平滚动。
*   所以，我希望`container`div 也是 300px（因为它里面的元素是 300px 宽），**但事实并非如此！** 它的宽度为 200 像素。

怎么会？我希望它与它的内容一样宽（300px），我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:54:55.027

你只需要让你的容器漂浮

```
.container {
     border: 1px solid black;
     float: left;
 } 
```

Float 会自动将您的外部 div 调整为内部 div 宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:40:48.287

你需要稍微调整你的 CSS。这将起作用：

```
.main {
  overflow: auto;
  width: 200px;
  float: left;
}
.container {
  border: 1px solid black;
  float: left;
}

.contents {
  width: 300px;
  float: left;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T08:47:26.137

实际上，您应该添加`overflow: auto`容器中的 css 而不是主 css

# jenkins - 如何在 SCM 中复制没有 bin 文件夹的依赖项二进制文件

> ID：14518121
> 
> 赞同：1
> 
> 时间：2013-01-25T08:36:41.523
> 
> 标签：jenkins, jenkins-plugins

我有一个`project A`依赖于其他项目`B`的 , `C`, `D`.

如果`A`发生更改，那么我想`A`构建（完成）现在如果`B`，`C`或者`D`我希望构建它们（更改的那些），那么它们的二进制文件必须被复制到`A`然后`A`必须被构建。

我正在使用工件插件来复制二进制文件，但我没有将 bin 文件夹存储在我的`SCM`（颠覆）中。

如何设置我的“要复制的工件”和“目标位置”框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:30:54.403

你可以使用`Build triggers`里面的`project A`配置。您可以检查`Build after other projects are built`指定`B`,`C`和`D`项目。

然后您可以在`project A`构建过程中添加一个步骤，添加一个`command`您可以执行`shell script`从项目复制所需文件的步骤`B`，`C`以及在构建开始之前的`D`内部。`project A`

# c - 对 strcpy 的这种实现感到困惑，为什么需要三个临时变量？

> ID：14518122
> 
> 赞同：1
> 
> 时间：2013-01-25T08:36:45.397
> 
> 标签：c, gcc, assembly, x86, inline-assembly

**更新：请参阅 Eric Postpischil 的回答，我认为他是对的。**

当我学习内联汇编代码时，我在[这个页面](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)上找到了它。

```
static inline char * strcpy(char * dest,const char *src)
{
    int d0, d1, d2;
    __asm__ __volatile__(  "1:\n\t"
                           "lodsb\n\t"
                           "stosb\n\t"
                           "testb %%al,%%al\n\t"
                           "jne 1b"
                           : "=&S" (d0), "=&D" (d1), "=&a" (d2)
                           : "0" (src),"1" (dest) 
                           : "memory");
    return dest;
} 
```

我很困惑为什么需要三个临时变量？我尝试在不使用它们的情况下实现。

```
static inline char * strcpy(char * dest,const char *src)
{
    __asm__ __volatile__(  "1:\n\t"
                           "lodsb\n\t"
                           "stosb\n\t"
                           "testb %%al,%%al\n\t"
                           "jne 1b"
                           /* : "=&S" (d0), "=&D" (d1), "=&a" (d2) */
                           :
                           : "S" (src),"D" (dest) 
                           : "memory", "esi", "edi", "al");
    return dest;
} 
```

但是用 gcc 编译时出现错误。

```
inline.c: In function ‘strcpy’:
inline.c:6:9: error: can't find a register in class ‘SIREG’ while reloading ‘asm’
inline.c:6:9: error: ‘asm’ operand has impossible constraints 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:35:39.090

事情真的很简单。让我们回想一下，该约束`S`代表`esi`、`a`和寄存器。当您通知编译器这些家伙将被破坏时，您必须明确指出将它们溢出的位置（是临时存储 for ，for ，for ）。`al``D``edi``d0``esi``d1``edi``d2``al`

接下来在寄存器分配过程中，编译器决定他是否真的需要溢出并寻找可用的寄存器。例如我的编译器（gcc 4.7.2）如下：

```
movq  %rdi, %rdx
1:
lodsb
stosb
testb %al,%al
jne 1b
movq  %rdx, %rax
ret 
```

您可能会看到，它`d1`被分配给`rdx`，`d0`并被`d2`淘汰为过度。

如果您不向编译器提供该信息，它就无法猜测，因此会输出错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T15:18:43.070

原始代码试图处理`lodsb`and`stosb`指令修改寄存器 %ESI、%EDI 和 %AL 的事实。为此，它定义了`d0`、`d1`和 ，`d2`以便可以将它们声明为汇编代码的输出。它实际上并不希望这些值作为输出，因此它不会在组装后使用它们。但是，因为它们是输出，编译器知道它们是由汇编代码修改的，所以编译器知道不要在那些它希望通过汇编代码保持不变的寄存器中保留任何值。

应该可以用另一种方式执行此操作，并且您的代码可以更好地表达语义：它说输入是在 %ESI 和 %EDI 中提供的，并且内存、%ESI、%EDI 和 %AL 被更改。原始代码断言 %ESI、%EDI 和 %AL 是输出，这不是真正的意图；它们是不需要的副产品，不是想要的输出。

但是，您的 GCC 版本与我的不同（Apple/clang-418.0.60）；我的接受您编写的代码而没有错误。我怀疑您的 GCC 会因为 %ESI 被指定为输入寄存器（`"S"`在第二个冒号之后）和被破坏的东西（`"esi"`在第三个冒号之后）而感到困惑。也许这是 GCC 中的一个缺点，后来被修复了，原始代码正在解决这个缺点。

# javascript - 弹性滑块下一个/上一个按钮

> ID：14518125
> 
> 赞同：1
> 
> 时间：2013-01-25T08:36:59.313
> 
> 标签：javascript, jquery, html, css, slideshow

是否可以在弹性[幻灯片](http://tympanus.net/Tutorials/ElasticSlideshow/)中添加*下一个*和上一个*按钮*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:00:14.867

这里有一些滑块的jQuery插件..

其中一些已经有上一个和下一个按钮。

[http://www.designyourway.net/blog/resources/28-useful-jquery-sliders-you-need-to-download/](http://www.designyourway.net/blog/resources/28-useful-jquery-sliders-you-need-to-download/)

如何创建自己的 jQuery 内容滑块

[http://fearlessflyer.com/2010/08/how-to-create-your-own-jquery-content-slider/](http://fearlessflyer.com/2010/08/how-to-create-your-own-jquery-content-slider/)

如果您构建自己的上一个和下一个按钮，这些帖子将帮助您：

[Jquery 滑块下一个/上一个按钮](https://stackoverflow.com/questions/11836681/jquery-slider-next-previous-buttons)

# ios - 每次显示视图控制器时如何获取 Web 服务的数据？

> ID：14518126
> 
> 赞同：1
> 
> 时间：2013-01-25T08:36:59.793
> 
> 标签：ios, web-services, uiviewcontroller, lifecycle, nsnotifications

我在`UIViewController`.

基本上，我有一个由 a 组成的应用程序，`UINavigationController`它当前具有 a`UITableViewController`作为根视图控制器。这`UITableView`是`UITableViewController`通过对 Web 服务的异步调用来更新的。

到那时，一切正常！

一般来说，我希望`UITableViewController`每次显示 ViewController 时都重新加载 TableView 的数据。这意味着，如果我关闭应用程序并启动另一个应用程序，然后返回到我的应用程序，则应始终从 Web 服务重新加载数据。基本上，就像 Twitter 应用程序一样，每次重新启动应用程序时都会更新推文。

为了实现这一点，我在不同的地方调用了 Web 服务来测试行为。我试过, `viewDidLoad`, `viewWillAppear`&`viewDidAppear`但是所有这些方法都只是在创建 viewController 时调用一次。

我在stackoverflow中做了一些研究，并且有使用提示，`NSNotification` `applicationDidBecomeActive`但如果我将来向我的应用程序添加更多ViewControllers，我不确定这是否是正确的解决方案，因为我只想在这个控制器时更新viewController也向用户显示/可见。

非常欢迎对此问题提出任何建议！

非常感谢 Neo74

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:49:56.003

使用从 Web 服务更新信息没有任何问题`applicationDidBecomeActive`，如果您计划在未来添加更多视图控制器，最好在单个视图控制器之外使用 Web 服务逻辑。

您不应该做的是将访问您的 WS 的代码放在应用程序委托中，而是创建一个对此负责的单例类。

# jsp - JSTL sql:query 是否违反 MVC 原则？

> ID：14518128
> 
> 赞同：0
> 
> 时间：2013-01-25T08:37:01.760
> 
> 标签：jsp, model-view-controller, jstl

理想情况下，我们在 MVC 中分离视图、控制器和模型。

视图通常是 JSP，模型是 DAO java 类，控制器是 Sevlet。

但是，使用 JSTL sql:query，我们将数据功能放在 JSP 页面中。

那么，这是否意味着 JSTL sql:query 违反了 MVC？推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:41:47.443

是的，确实如此，[包装盒上就](http://docs.oracle.com/javaee/5/tutorial/doc/bnald.html)这么写着：

> 用于访问表 7-7 中列出的数据库的 JSTL SQL 标记是为快速原型设计和简单应用程序而设计的。对于生产应用程序，数据库操作通常封装在 JavaBeans 组件中。

# php - 从电子邮件中收集数据

> ID：14518129
> 
> 赞同：0
> 
> 时间：2013-01-25T08:37:05.983
> 
> 标签：php, mysql, email

我想使用 php 将数据从电子邮件收集到 mysql 数据库。

如果有人将邮件发送到他们的邮件帐户到我的邮件 ID。我希望该邮件信息存储在我的数据库中。以便进一步操作。这在 PHP 中是可能的，因为我在一个由 PHP 开发的 托管支持应用程序[Kayako Fusion中看到了此功能。](http://www.kayako.com/products/fusion/)

所以请提供一些信息来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:50:24.867

如果您想使用 PHP 进行解析，最好的方法是使用 3rd 方 API 来恢复电子邮件，然后使用 HTTP Post 将其发送到您的 PHP 脚本。

我建议使用[sendgrid.com](http://www.sendgrid.com)或[mailgun.com](http://www.mailgun.com)

这两个服务都将解析电子邮件并将信息以 http POST 的形式发送给您，然后您可以将其插入 mysql。两者的 API 文档：[MailGun Incoming Parse API](http://documentation.mailgun.net/user_manual.html#receiving-messages-via-http) / [SendGrid Incoming Parse API](http://sendgrid.com/docs/API_Reference/Webhooks/parse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:50:28.977

您可以使用[imap 函数](http://php.net/manual/en/ref.imap.php)，例如：

```
<?php
$imap = imap_open("{server.example.com:143}INBOX" , 'login' , 'password');

if( $imap ) {

     //Check no.of.msgs
     $num = imap_num_msg($imap);

     //if there is a message in your inbox
     if( $num >0 ) {
          //read that mail recently arrived
          $the_message = imap_body($imap, $num);

          //Do the stuff with $the_message
     }

     //close the stream
     imap_close($imap);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:57:29.693

您必须设置连接到 Exchange 或 POP 服务器的 cronjob（Windows 上的计划任务），检索上次运行的所有新电子邮件并将它们插入数据库。

如果是 POP 邮件服务器（我认为 POP 会更容易），这里有一条评论，其中包含您需要的所有功能 -> [here](http://php.net/manual/en/book.imap.php)。如果这不起作用，请尝试谷歌搜索“PHP POP wrapper”或类似的东西。

如果是 Microsoft Exchange 服务器，您必须使用 PHP Exchange 包装器，[这里](http://code.google.com/p/php-ews/)为您找到了一个。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:04:52.717

您可以将电子邮件通过管道传输到 php 脚本，然后提取电子邮件的每个部分并将其存储在数据库中。

**[检查这个例子](http://www.phpshare.org/articles/Piping-Incoming-Mail-with-PHP)**

当您收到电子邮件内容时，您可以随心所欲

# hibernate - 使用 postgis 和 hibernate-spatial 找不到类型几何

> ID：14518130
> 
> 赞同：0
> 
> 时间：2013-01-25T08:37:09.220
> 
> 标签：hibernate, postgis, hibernate-spatial

我正在尝试使用 postgis 设置一个带有休眠空间的项目。按照 hibernate-spatial 4.0-M1 的教程，我首先遇到了找不到依赖 postgis-jdbc-1.5.3.jar 的问题。就像有人在这里建议的那样，我使用了 1.5.2 版本并且教程编译了。

但是如果我尝试运行它，我会得到一个错误。我将休眠的调试级别设置为调试并偶然发现以下问题：

```
DEBUG SQL -
create table Event (
    id int8 not null,
    date timestamp,
    location GEOMETRY,
    title varchar(255),
    primary key (id)
)
Hibernate:
create table Event (
    id int8 not null,
    date timestamp,
    location GEOMETRY,
    title varchar(255),
    primary key (id)
)
ERROR SchemaExport - HHH000389: Unsuccessful: create table Event (id int8 not null, date timestamp, location GEOMETRY, title varchar(255), primary key (id))
ERROR SchemaExport - FEHLER: Typ ╗geometry½ existiert nicht  Position: 94 
```

错误是德语，但意味着“几何”类型不存在。

如果我使用 create table 语句并在 pgadmin 中执行它，它可以找到，所以我认为数据库设置正确。

我的版本：

```
postgres          - 9.0     64Bit
postgis           - 2.0.1   64Bit
hibernate-spatial - 4.0-M1
hibernate         - 4.0.0-Final
postgis-jdbc      - 1.5.2 
```

谢谢帮助

杰比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-31T17:27:31.370

您的 Postgresql 不支持几何。您需要为其添加`postgis`扩展名才能创建空间数据库。[所以从这里](http://download.osgeo.org/postgis/windows/)为你的 postgresql 下载合适的 postgis 扩展。然后将其安装在postgresql安装文件夹中，例如（在我的系统中）在以下路径中：

```
 C:\Program Files (x86)\OpenGeo\OpenGeo Suite\pgsql\9.1 
```

# jsf - Primefaces 显示多个动态内容面板

> ID：14518133
> 
> 赞同：6
> 
> 时间：2013-01-25T08:37:27.907
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试在我的网络应用程序中做一种简单的可定制新闻视图页面，就像[谷歌的](https://news.google.es/)那样，但更简单，带有框架。每个框架对象都只是有他的标题和一个要作为其内容添加的 url。

我正在使用**JSF 和 primefaces**，它们都是最新版本。因此，我的支持 bean 可以`@ViewScoped`访问已登录的用户，该用户存储在`@SessionScoped`bean 中，并且该用户已加载相应的帧。

当我尝试在`@ViewScoped`bean 上迭代它时，问题就来了，因为我发现这样做的唯一方法是使用`c:forEach`标签。我就是这样做的：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:p="http://primefaces.org/ui"
xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<h:form>
    <p:panel header="Noticias">
        <h:panelGrid columns="#{fn:length(navegableHomeManager._UserFrames)}"
            width="100%">
            <c:forEach var="frame" items="#{navegableHomeManager._UserFrames}">
                <p:column>
                    <p:panel header="#{frame._Name}" closable="true"
                        style="width:95%;height:500px;" id="#{frame._Name}">
                        <p:ajax event="close"
                            listener="#{navegableHomeManager.actionFrameClosed}" />
                        <ui:include src="#{frame._Path}" />
                    </p:panel>
                </p:column>
            </c:forEach>
        </h:panelGrid>
    </p:panel>
</h:form> 
```

该迭代显然不适用于`navegableHomeManager`bean，因为它是`@ViewScoped`. 因此 bean 将在每次迭代中重建。我达到的解决方案在和`@SessionScoped`之间使用了另一个 bean ，因此帧存储在那里，我可以在迭代中正确访问它们。这与上面的代码一起工作。`navegableHomeManager``loggedBean`

但是，我不认为`@SessionScoped`每次我想以这种方式迭代时都必须使用 bean（为每个案例创建一个特定的 bean）。**这就是为什么我尝试使用组件来避免迭代。**

```
<p:dataGrid columns="#{fn:length(navegableHomeManager._UserFrames)}"
            value="#{navegableHomeManager._UserFrames}" var="frame">
    <p:column>
        <p:panel header="#{frame._Name}" closable="true"
                    style="width:95%;height:500px;">
            <p:ajax event="close"
                        listener="#{navegableHomeManager.actionFrameClosed}" />
            <ui:include src="#{frame._Path}" />
        </p:panel>
    </p:column>
</p:dataGrid> 
```

`@ViewScoped`当 bean 为或时，它也不起作用`@SessionScoped`，因为即使设置了框架属性，`ui:include`标签也已经构建，没有目标路径，所以我无法动态渲染目标路径。我认为，正如`ui:include`与 一样`c:forEach`，使用`c:forEach`标签确实是解决这个问题的唯一方法。

汇集你的想法。

**更新**

在这里，我发布了更多的*xhtml*代码，以帮助理解上下文。新的页面被集成到模板中。那是目标页面（*/system/home/index.xhtml*）：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
template="/templates/general_template.xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:define name="metadata">
    <f:event type="preRenderView"
        listener="#{navegableHomeManager.initialize}" />
</ui:define>

<ui:define name="general_content">
    <ui:include src="/system/home/home_view.xhtml" />
</ui:define> 
```

这就是我也尝试这样做的方式，但没有使`c:forEach`标签工作：

```
<context-param>
    <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
    <param-value>/system/home/index.xhtml</param-value>
</context-param> 
```

这就是支持 bean 标头：

```
@ManagedBean
@ViewScoped
@URLMapping(id = "home", pattern = "/home", viewId = "/system/home/index.xhtml")
public class NavegableHomeManager extends SystemNavegable {

/**
 * 
 */
private static final long serialVersionUID = 6239319842919211716L;

@ManagedProperty(value = "#{loggedBean}")
private LoggedBean _LoggedBean;

//More stuff 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:02:44.327

坚持`<c:forEach>`。它可以完成您正在寻找的工作。在`<ui:include>`视图构建期间运行，因此迭代标记也应该在视图构建期间运行。

至于`@ViewScoped`bean 问题，您有 2 个选项：

1.  关闭特定视图的部分状态保存：

    ```
    <context-param>
        <param-name>javax.faces.FULL_STATE_SAVING_VIEW_IDS</param-name>
        <param-value>/news.xhtml</param-value>
    </context-param> 
    ```

2.  将其更改为`@RequestScoped`bean 并通过请求参数使用`<f:param>`和`@ManagedProperty`维护跨回发的状态。

如果 JSF 2.2 可用，还有第三种选择：只需升级到 JSF 2.2。他们在视图范围的 bean 和部分状态保存中修复了鸡蛋问题。

# c++ - 数组/指针混淆

> ID：14518138
> 
> 赞同：3
> 
> 时间：2013-01-25T08:37:47.343
> 
> 标签：c++

为什么会打印出以下代码`"0 0 0 0 0 0 0 "`？我期待着`"1 3 6 10 15 21 28 "`。

```
#include <iostream>

using namespace std;

void PrefixSum(float * input, float * output, int n){
    float sum = 0;
    for (int i=0;i<n;i++){
        float value = input[i];
        sum += value;
        output[n] = sum;
    }    
}

int main(int argc, const char * argv[])
{
    float input[] = {1,2,3,4,5,6,7};
    float output[] = {0,0,0,0,0,0,0};
    PrefixSum(input, output, 7);
    for (int i=0;i<7;i++){
        cout << output[i] << " ";
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T08:40:22.863

改为`output[n]`改为`output[i]`，您没有写入数组中的任何索引，因为`output[7]`超出了范围。`i`你的循环计数器不是`n`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T08:40:15.487

改变

```
output[n] = sum; 
```

至

```
output[i] = sum; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T08:51:56.243

正如每个人都指出的那样，您使用`n`的是索引而不是`i`，因此您永远不会修改数组中的任何值。

编写循环很容易出错，多年来我们中的许多人都会犯错误。最好重用现有代码。

你在计算[`partial_sum`](http://en.cppreference.com/w/cpp/algorithm/partial_sum). 使用标准库，您可以像这样编写代码：

```
#include <iostream>
#include <numeric>

int main(int argc, const char * argv[])
{
    using std::partial_sum;
    using std::cout;

    const int SIZE = 7;
    float input[SIZE] = {1,2,3,4,5,6,7};
    float output[SIZE] = {0,0,0,0,0,0,0};

    partial_sum(input, input+SIZE, output);

    for (int i=0;i<SIZE;i++){
        cout << output[i] << " ";
    }
    return 0;
} 
```

我们也可以消除循环打印结果：

```
#include <algorithm>
#include <iterator>

//...

using std::copy;
using std::ostream_iterator;

copy(output, output+SIZE,
     ostream_iterator<float>(cout, " ")); 
```

最后，如果您不需要中间结果数组，我们可以直接将结果放入`ostream`：

```
partial_sum(input, input+SIZE,
            ostream_iterator<float>(cout, " ")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-25T08:40:17.787

`output[n] = sum;`, `n`is`7`超出`output`数组边界，每次都向其写入数据。请注意，这也是未定义的行为。您正在`float value = input[i];`for 循环中访问，所以我想这只是一个错字。

更新

```
output[n] = sum; 
```

至

```
output[i] = sum; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-25T08:40:25.120

在 PrefixSum 的 for-iteration 中将 'n' 替换为 'i' ;)

# c# - 如何将 Generic T 转换为 Action<...> 以获取方法参数

> ID：14518139
> 
> 赞同：4
> 
> 时间：2013-01-25T08:38:07.920
> 
> 标签：c#, generics, parameters, action, code-generation

嗨，我正在尝试将泛型转换为具有未知数量和类型的参数的动作

目前它看起来像：

```
public class subscriber
{        
     public subscriber()
     {
        new Subscription<Action>(a);
        new Subscription<Action<string>>(b);
        new Subscription<Action<int,string>>(c);
     } 

     private void a() { }
     private void b(string gg){}
     private void c(int i, string g) { } 
}

public class Subscription<T>
{    
        public T MyAction {get {retun _action;}}
        public Type MyActionType {get;private set;}

        public Subscription( T action )
        {    
            MyAction  = action;
            MyActionType  = action.GetType();

        var gg = action.GetType().GetGenericArguments();// Contains the Sub generics
        }
} 
```

目前我们知道这将是一个动作，我们也知道子类型，但是如何将它们放在一起来执行我的`private void c(int i, string g)`方法

## 最终目标

是在交出一些参数时执行`Action`from a `Third-Class`（其中将包含 a `List<Subscription>`）`Fourth-Class`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:54:10.397

```
public abstract class SubscriptionBase
{
    public abstract void ExecuteAction(params object[] parameters);
}

public class Subscription<T> : SubscriptionBase
{
    private T _action;

    public Subscription(T a)
    {
        _action = a;
    }

    public override void ExecuteAction(params object[] parameters)
    {
        (_action as Delegate).DynamicInvoke(parameters);
    }
} 
```

你可以像这样使用它；

```
Action<int> func1 = (q) => q += 1;
Action<int, int> func2 = (q, w) => q += w;

Subscription<Action<int>> s1 = new Subscription<Action<int>>(func1);
Subscription<Action<int, int>> s2 = new Subscription<Action<int, int>>(func2);

List<SubscriptionBase> subscriptionBase = new List<SubscriptionBase>();
subscriptionBase.Add(s1);
subscriptionBase.Add(s2);

subscriptionBase[1].ExecuteAction(1, 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:45:26.210

你不能那样做。您不能将 a`Subscription<Action<int>>`放入与 相同的列表中`Subscription<Action<string, Foo>>`。

我建议，您创建一个如下所示的接口并将其存储在您的第三类中：

```
interface IActionExecutor
{
    bool CanExecuteForParameters(params object[] parameters);
    void Execute(params object[] parameters);
}

// Implementation for one parameter
// You need to create one class per additional parameter.
// This is similar to the Action delegates in the framework.
// You can probably extract a base class here that implements
// some of the repetitive pars
public class ActionExecutor<in T> : IActionExecutor
{
    private Action<T> _action;

    public ActionExecutor(Action<T> action)
    {
        if(action == null) throw new ArgumentNullException("action");
        _action = action;
    }

    public bool CanExecuteForParameters(params object[] parameters)
    {
        if(parameters == null) throw new ArgumentNullException("action");

        if(parameters.Length != 1) return false;
        return parameters[0] is T;
    }

    public void Execute(params object[] parameters)
    {
        if(parameters == null) throw new ArgumentNullException("action");
        if(parameters.Length != 1)
            throw new ArgumentOutOfRangeException("action");

        _action((T)parameters[0]);
    }
} 
```

在您的第三堂课中，您将拥有`IActionExecutor`s 的列表：

```
List<IActionExecutor> _subscriptions; 
```

你会像这样使用它：

```
public void Execute(params object[] parameters)
{
    var matchingSubscriptions =
        _subscriptions.Where(x => x.CanExecuteForParameters(parameters);
    foreach(var subscription in matchingSubscriptions)
        subscription.Execute(parameters);
} 
```

为了简化那些 ActionExecutor 实例的创建，您可以提供一个工厂类：

```
public static class ActionExecutor
{
    public IActionExecutor Create(Action action)
    {
        return new ActionExecutor(action);
    }

    public IActionExecutor Create<T>(Action<T> action)
    {
        return new ActionExecutor<T>(action);
    }

    public IActionExecutor Create<T1, T2>(Action<T1, T2> action)
    {
        return new ActionExecutor<T1, T2>(action);
    }

    // ... and so on
} 
```

现在的用法是这样的：

```
_subscriptions.Add(ActionExecutor.Create(a));
_subscriptions.Add(ActionExecutor.Create(b));
_subscriptions.Add(ActionExecutor.Create(c)); 
```

# javascript - CLEditor 多个实例以 100% 宽度调整大小

> ID：14518140
> 
> 赞同：2
> 
> 时间：2013-01-25T08:38:11.370
> 
> 标签：javascript, jquery, cleditor

我已经成功实现了 100% 宽度的 CLEditor，但我似乎无法解决无休止地调整大小的问题。

```
 //Initialize WYSIWYG
    var editorTextarea1 = $('#registration-confirmation'),
    editorWrapper1 = editorTextarea1.parent(),
    editor1 = editorTextarea1.cleditor({
        width:  '100%',
        height: 350
    })[0];

    // Update size when resizing
    editorWrapper1.sizechange(function()
    {
        editor1.refresh();
    });

    var editorTextarea2 = $('#thank-you-message'),
    editorWrapper2 = editorTextarea2.parent(),
    editor2 = editorTextarea2.cleditor({
        width:  '100%',
        height: 350
    })[0];

    // Update size when resizing
    editorWrapper2.sizechange(function()
    {
        editor2.refresh();
    }); 
```

# java - java thread System.in 如何“等待控制台命令”

> ID：14518143
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:38:19.877
> 
> 标签：java, console, command, serversocket

假设我有 System.in

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

result = br.readLine();
                while (!result.isEmpty()) {
                    if (result.equalsIgnoreCase("exit")) {
                        userStr="exit";
                        System.exit(0);
                    } else if (result.equalsIgnoreCase("list")) {
                        userStr="list";
                    } else if (result.equalsIgnoreCase("kill")) {
                        userStr="kill";
                    } else if (result.equalsIgnoreCase("help")) {
                        userStr="help";
} 
```

和

```
ServerSocket socketListener = new ServerSocket(port);
while (true) {
                Socket client = socketListener.accept();
                new ServerThread(client,userStr); //pass userStr to Thread               
            } 
```

我不明白如何“等待控制台命令”并将它们传递给活动线程。我需要接受（）客户端，将它们传递给线程。如果我在服务器控制台中输入命令，例如；“kill Username”（断开用户连接）或“list”（用户名列表）我的服务器应该将命令传递给线程。

p/s 我需要管理服务器，通过输入控制台命令来实现管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:07:19.480

作为简单的解决方案，您可以阻止线程，直到它收到要执行的任务：

```
class Task implements Runnable {
    AtomicReference<String> atomicReference = new AtomicReference<String>(null);

    @Override
    public void run() {
        while (true) {
            String command = atomicReference.getAndSet(null);
            if (command != null) {
                //do staff with command
            }
        }
    }

    public void executeCommand(String command) {
        atomicReference.set(command);
    }
} 
```

像这样使用它：

```
ServerSocket socketListener = new ServerSocket(port);
Task task = new Task();
new Thread(task).start();

while (true) {
            Socket client = socketListener.accept();
            task.executeCommand(userCommand);
        } 
```

但如果您需要更复杂的解决方案，我可以建议您阅读 Java Concurrency 包：

[关于那个的Avesome书](http://www.amazon.co.uk/dp/0321349601/?tag=hydra0b-21&hvadid=9550950909&ref=asc_df_0321349601)

[好文章](http://www.ibm.com/developerworks/library/j-5things4/index.html)

# heroku - Heroku 无法启动 jekyll 服务器模式

> ID：14518144
> 
> 赞同：0
> 
> 时间：2013-01-25T08:38:32.287
> 
> 标签：heroku, web-deployment, jekyll

Git 已将数据部署到 Heroku。我重新启动heroku，发现日志错误如下。

> $heroku 重启
> 
> 2013-01-25T08:17:27+00:00 heroku[web.1]：状态从崩溃变为开始 2013-01-25T08:17:30+00:00 heroku[web.1]：使用命令启动进程`jekyll --server 27519`2013-01-25T08:17:30+00:00 app[web.1]: /usr/bin/env: ruby​​1.9.1: 没有这样的文件或目录 2013-01-25T08:17:32+00:00 heroku [web.1]：进程以状态 127 退出 2013-01-25T08:17:32+00:00 heroku[web.1]：状态从开始变为崩溃 2013-01-25T08:28:01+00:00 heroku[web.1]：状态从崩溃变为开始

建议 @jordelver 改进 jkyell 文件。在 project_jkyell/bin/ 打开文件 jkyell 在线更改版本号

```
#!/usr/bin/env ruby1.9.1 
```

至

```
#!/usr/bin/env ruby 
```

# spring - 如何使用 Spring 的缓存抽象始终返回缓存对象

> ID：14518145
> 
> 赞同：1
> 
> 时间：2013-01-25T08:38:33.013
> 
> 标签：spring, caching

有没有办法使用 Spring Framework 的缓存抽象来*始终*返回对象的缓存化身？

我有一个图像调整大小的方法。该`resize()`方法返回一个临时文件，该临时文件使用我使用 Spring 的缓存抽象的`File`手动二进制文件进行缓存。`Cache`该方法本身是通过缓存的，`@Cacheable`并且一切正常。

困难在于，我需要在将这种方法生成的临时文件添加到缓存后以某种方式清理它们。

换句话说，当前的行为是：

1.  第一次调用`resize()`- 返回生成的文件，`/tmp/somefile.jpg`Spring 将其添加到缓存中。

2.  第二次调用`resize()`- 导致缓存命中，因此从`/myCache/somefile.jpg`

这导致临时文件挥之不去。

我无法在我的`Cache#put(Object key, Object value)`方法中删除源文件，因为这是从关联方法的非缓存调用返回的文件。

有没有人遇到过类似的情况并用优雅的解决方案解决了它？理想情况下，我希望所有可缓存方法的调用都返回缓存的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:33:03.330

我通过直接与`Cache#get()`and交互解决了这个问题`Cache#put()`，绕过了 Spring 更优雅的基于注释的方法。

它不漂亮，但它有效。

# entity-framework-5 - EntityFramework 4 升级到 5，lambda 不可用

> ID：14518149
> 
> 赞同：11
> 
> 时间：2013-01-25T08:39:08.640
> 
> 标签：entity-framework-5

我已将我的“实体框架 4”项目升级到 5。我想在包含（我的动机是取代字符串定义）括号中使用 lambda 表达式。

此时我有：

```
context.WarrantyContract.Include("Car"); 
```

并希望实现这一目标：

```
context.WarrantyContract.Include(w => w.Car); 
```

但是当我尝试替换字符串时，Visual Studio 无法识别我的意愿。

我会很感激任何正确的方向。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-25T08:45:53.133

[Include](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)的lambda 版本在`System.Data.Entity.DbExtensions`类中声明为[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。

为了使用它，您需要`using`在文件中添加一个具有正确命名空间的：

```
using System.Data.Entity;

//...

context.WarrantyContract.Include(w => w.Car); 
```

# macos - NSConnection 在 10.8 上一段时间后死了

> ID：14518152
> 
> 赞同：5
> 
> 时间：2013-01-25T08:39:27.190
> 
> 标签：macos, cocoa, distributed-objects, nsconnection

我将 DO 与 IPC 一起使用。我使用了以下代码。它在 10.6 和 10.7 中工作正常，但在 10.8 模具上，即使这两种应用程序都是理想的。

// 助手

```
NSConnection *connection =[NSConnection new];
[[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(connectionDidDie:)
                                                  name:NSConnectionDidDieNotification
                                                   object:nil];
[connection setRootObject:syncManager];  
if ([connection registerName:SYNC_SERVER_NAME] == NO){
       NSLog(@"Error registering server");
} 
- (void)connectionDidDie:(NSNotification *)aNotification{ 
     NSConnection     *deadConnection = [aNotification object];
     id    currentClient = [self.clientsList objectAtIndex:0];
     NS_DURING
     if([currentClient respondsToSelector:@selector(connectionForProxy)]) {
          if(deadConnection == [currentClient connectionForProxy]){
                 // remove proxy with dead connection
                 [clientsList removeObjectAtIndex:0];
                 NSLog(@"Removed client from client list.");
           }
     }
     NS_HANDLER
     [self.clientsList removeObjectAtIndex:0];
     NS_ENDHANDLER

} 
```

// 用户界面应用

```
// ------
self.server = [NSConnection rootProxyForConnectionWithRegisteredName:SYNC_SERVER_NAME host:nil];
if(nil != self.server){
[[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(connectionDidDie:)
                                                     name:NSConnectionDidDieNotification
                                                   object:nil];
[self.server addMessageClient:self];
[self.server setProtocolForProxy:@protocol(MDMessageProtocol)];
//------

- (void)connectionDidDie:(NSNotification *)aNotification{
    NSLog(@"Error: Connection to server is broken");
} 
```

# eclipse - STS 3.1.0 中的 XML 字体

> ID：14518153
> 
> 赞同：0
> 
> 时间：2013-01-25T08:39:36.203
> 
> 标签：eclipse, spring-tool-suite

我最近安装了用于 Java 开发的 Spring Tool Suite 3.1.0 版本。Java 代码的编辑器很好。但我对 XML 编辑器中的字体大小不太满意。我认为它比平时小或什么。我无法找到更改仅影响 XML 的字体的选项。或者，如果有人能说出对 Java 和 XML 编辑器都适用的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:29:47.857

I updated the font to Courier New 10\. Its working for both java and XML editor.

# c++ - 无法运行在 Qt Creator 中创建的程序？

> ID：14518157
> 
> 赞同：1
> 
> 时间：2013-01-25T08:39:55.593
> 
> 标签：c++, windows, qt, qt-creator

当我运行我在 Qt Creator 中制作的程序的发布版本时，它说它找不到 DLL。所以我将Qt`bin`文件夹中的所有DLL添加到程序目录中，现在程序没有出现错误，但无论如何它都没有启动？

我没有更改 Qt Creator 中的任何编译器设置，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:08:08.317

如果您使用的是 Qt4，这说明了需要哪些 .DLL 文件（同一个文档，两个链接用于将来验证答案）：

*   [http://doc.qt.digia.com/qt/deployment-windows.html#shared-libraries](http://doc.qt.digia.com/qt/deployment-windows.html#shared-libraries)
*   [http://qt-project.org/doc/qt-4.8/deployment-windows.html#shared-libraries](http://qt-project.org/doc/qt-4.8/deployment-windows.html#shared-libraries)

如果你使用的是Qt5，那就有点复杂了（*需要*在.EXE目录下的正确子文件夹中添加正确的插件），不知道有没有写过的文档...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:50:41.940

尝试静态编译QT：

[http://www.qtcentre.org/wiki/index.php?title=Building_static_Qt_on_Windows](http://www.qtcentre.org/wiki/index.php?title=Building_static_Qt_on_Windows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T02:52:19.957

我将 icudt49.dll、icuin49.dll、icuuc49.dll、libEGL.dll、libGLESv2、Qt5Core.dll、Qt5Gui.dll 和 Qt5Widgets.dll 卡在与 Exe 文件相同的目录中，它可以工作（所有这些文件都需要它工作）（这是发布版本）

# unix - 如何在单行中执行多个 FTP 命令？

> ID：14518166
> 
> 赞同：0
> 
> 时间：2013-01-25T08:40:28.210
> 
> 标签：unix, ftp

我需要在 FTP 提示符下在一行中执行多个 FTP 命令。在 Unix 中，这可以通过使用 ";" 或“&”等，但它们在 FTP 提示符下不起作用。

例如，在提示符下，我需要运行“cd /some/dir/”，然后运行“ls -l”，但在同一行，而不是不同的行。

任何人都知道实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:49:03.253

您不是向 shell 发送命令，而是向 FTP 服务器发送命令，因此 unix 方法行不通。并且 FTP 服务器并非设计为在一行中接收多个命令：协议规范要求发送命令并以 EOL 结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-16T02:34:17.860

我作为新手使用的一个简单技巧（“尽可能帮助自己”方法：P）：

1.  在 Excel 中编写所有命令行（每个 Excel 行一个命令行）。
2.  然后复制您编写的整列命令，并将其粘贴到您的 FTP 提示符上。

解释是 Excel 单元格的末尾被认为是输入点击，因此您的命令行将被连续执行（并且成功 :D ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T19:43:08.843

我知道这个问题很老但是......

[此选项并不完全是在单个 FTP 提示行中键入多个命令，但它可能很有用，因为您可以使用Here Documents](https://tldp.org/LDP/abs/html/here-docs.html)在单个“go”中将多个命令发送到 FTP 。我刚刚了解了它，所以我无法解释太多，但你可以这样做：

```
ftp << limitsOfTheInstruction
user "myName" "myPassword"
cd /home/myName
ls
#another instruction
exit
limitsOfTheInstruction 
```

# javascript - 点击事件的事件处理程序自动触发 - jQuery

> ID：14518170
> 
> 赞同：3
> 
> 时间：2013-01-25T08:40:39.020
> 
> 标签：javascript, jquery, function

> **可能重复：**
> [为什么单击事件处理程序在页面加载后立即触发？](https://stackoverflow.com/questions/7102413/why-does-click-event-handler-fire-immediately-upon-page-load)

我对 Javascript 函数的理解存在差距，所以我很难理解为什么如果我在没有匿名包装器的情况下定义事件处理程序会自动触发它。

**HTML**

```
<a href="#" id="change-html">Change HTML</a> 
```

**Javascript #1**

```
var btn = $('#change-html');
btn.click(bindClick(btn)); // bindClick gets executed right away and only once

function bindClick(source){
    console.log('get here');
} 
```

**Javascript #2**

```
var btn = $('#change-html');
btn.click(function(){
    bindClick(btn); // bindClick is only executed on the anchor's click event 
});

function bindClick(source){
    console.log('get here');
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T08:42:56.013

其实这里

```
btn.click(bindClick(btn)); 
```

您只是将函数的返回值绑定到单击事件，而不是函数本身。
因为在javascript中你可以返回一个函数，这会起作用

```
var btn = $('#change-html');
btn.click(bindClick(btn));

function bindClick(source){
    return function() {
        console.log('get here');
    }    
} 
```

[http://jsfiddle.net/VZ4Gq/](http://jsfiddle.net/VZ4Gq/)

编辑 - 第二个函数是闭包吗？是的，它可能是。让我们看看这个例子

```
var btn = $('#change-html');
btn.click(bindClick(btn));
// global scope
var inside = "i'm outside a closure";
console.log(inside);
function bindClick(source){
    // local scope 
    var inside = "i'm inside a closure";
    return function() {
        console.log(inside);
    }   
} 
```

[http://jsfiddle.net/VZ4Gq/1/](http://jsfiddle.net/VZ4Gq/1/)

当您尝试此操作时，您首先会记录“我在封闭之外”，然后当您单击按钮时，您会得到“我在封闭内部”。这是因为您实际上创建了一个闭包和 ffunction，当它执行时，它在其原始范围内执行，该范围位于 bindClick()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:46:26.160

问题是 ：

```
btn.click(bindClick(btn)); 
```

它将调用 bindClick 方法。尝试用这个来改变那行，看看行为是否与 JavaScript#2 相同：

```
btn.click({param1: btn }, bindClick); 
```

或者更简单：

```
btn.click({param1: btn }, $(this)); 
```

# c# - (1 和 3) OR (2 AND 4) AND (5 OR 6) 识别关系

> ID：14518174
> 
> 赞同：1
> 
> 时间：2013-01-25T08:41:00.710
> 
> 标签：c#, asp.net, string, formatting

我有字符串： -`(1 and 3) OR (2 AND 4) AND (5 OR 6)`

我想知道上面字符串中 C# 4.0 中每个数字与另一个数字之间的关系

喜欢 ：

```
relation between 1 , 3 is - AND 
relation between 1 , 2 is - OR
relation between 1 , 4 is - OR 
relation between 1 , 5 is - AND
relation between 1 , 6 is - AND 
```

与上面相同，我需要确定每个元素的关系。

做一些必要的，如果有人尝试过

# c# - 使用 Lambda 表达式将数据传递给线程

> ID：14518175
> 
> 赞同：3
> 
> 时间：2013-01-25T08:41:01.083
> 
> 标签：c#, multithreading

```
for (int i = 0; i < 10; i++)
  new Thread (() => Console.Write (i)).Start(); 
```

正如预期的那样，上述代码的输出是不确定的，因为 i 变量在循环的整个生命周期中引用相同的内存位置。因此，每个线程都会在一个变量上调用 Console.Write，该变量的值可能会在运行时发生变化

然而，

```
for (int i = 0; i < 10; i++)
{
  int temp = i;
  new Thread (() => Console.Write (temp)).Start();
} 
```

也给出了非确定性的输出！我认为变量 temp 是每个循环迭代的本地变量。因此，每个线程捕获了不同的内存位置，应该存在 np 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:51:18.217

您的程序应该有 10 个 lambdas，每个 lambdas 都会将 0 到 9 中的一个数字写入控制台。但是，不能保证线程将按顺序执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:51:45.877

> 也给出了非确定性的输出！

不，这不对。我检查了你的第一个代码（有重复的数字）和第二个（没有）十次。

所以一切正常。正如它应该的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T08:51:40.727

第二*个*代码片段应该是确定性的，因为每个线程最终都会写入它`temp`，并且它们的所有时间都会不同。

但是，它不保证线程将按其创建顺序安排执行。您会看到所有可能的温度，但不一定按升序排列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T05:48:25.560

这是 OP 正确且他的两段代码都不正确的证明。

并且也有一个有证据的解决方案。

但是需要注意，**“非确定性”意味着线程接收到错误的参数**。*订单**永远不会**得到保证。*

下面的代码检查了第二段 OP 代码并证明它按预期工作。

我正在存储这对（线程标识，参数），然后将其打印出来与线程输出进行比较，以证明这些对没有改变。我还添加了几百毫秒的随机睡眠，因此 for 索引在那些时候应该明显改变。

```
 Dictionary<int, int> hash = new Dictionary<int, int>();
        Random r = new Random(DateTime.Now.Millisecond);
        for (int i = 0; i < 10; i++)
        {
            int temp = i;
            var th = new Thread(() =>
            {
                Thread.Sleep(r.Next(9) * 100);
                Console.WriteLine("{0} {1}", 
                    Thread.CurrentThread.GetHashCode(), temp);
            });

            hash.Add(th.GetHashCode(), temp);

            th.Start();
        }

        Thread.Sleep(1000);
        Console.WriteLine();

        foreach (var kvp in hash)
            Console.WriteLine("{0} {1}", kvp.Key, kvp.Value); 
```

# visual-studio-2012 - 在 Visual Studio 2012 上面向英特尔项目的 OpenCL SDK

> ID：14518178
> 
> 赞同：0
> 
> 时间：2013-01-25T08:41:04.017
> 
> 标签：visual-studio-2012, opencl

实际上，我正在编写我的第一个 OpenCL 程序。正如我在许多教程中看到的那样，在 Visual Studio 中我必须配置属性并添加“附加包含目录”，大多数教程都是针对 nVIdia 和 Amd 的，因此根据它们必须添加`$(CUDA_INC_PATH)`和`$(AMDAPPSDKROOT)\include`. 但是我想为 INTEL 添加什么？[`CUDA_INC_PATH`不在系统路径变量中，所以我没有线索！]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:21:51.940

你安装[英特尔 SDK](http://software.intel.com/en-us/vcsource/tools/opencl-sdk)了吗？之后，我会在其位置查找库和标题。然后你可以创建环境。变量或简单地添加整个路径以包含 VS 中的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:07:13.907

如果您安装英特尔 SDK，它应该创建一个名为 INTELOCLSDKROOT 的环境变量。要查看它，请单击开始，右键单击计算机。单击高级设置设置。单击环境变量。

您只需要一个 SDK 即可进行开发。Nvidia SDK 一仅支持 OpenCL 1.1，不包括 cl.hpp C++ 绑定。我在使用 AMD SDK 的非 AMD 设备上运行时遇到问题。英特尔 SDK 对我来说适用于英特尔、Nvidia 和 AMD。

# spring - 使用 Secured Annotation for Controller 结合 CGLib 和 Mybatis Spring

> ID：14518180
> 
> 赞同：1
> 
> 时间：2013-01-25T08:41:11.490
> 
> 标签：spring, security, proxy, mybatis, cglib

我希望有人可以帮助我解决这个问题：

我想使用以下安全配置：

`<security:global-method-security secured-annotations="enabled" proxy-target-class="true" />`

使用 CGLib 作为代理而不是 JDK 动态代理的原因是因为使用了这样的扩展接口：

```
public abstract interface AbstractPromotionController {
    @RequestMapping(value = "edit", method = RequestMethod.GET)
    public void edit(final Model model, @RequestParam(value = "foo", required = false) final String foo, final HttpServletRequest request) throws IOException;
}

@RequestMapping("/foo/bar/blubb")
@Secured({ "ROLE_USER", "ROLE_ADMIN" })
public interface AmAktionController extends AbstractPromotionController {
} 
```

不幸的是，这不起作用，因为如果使用继承，JDK 动态代理会丢失 RequestMapping 信息，不是吗？！

所以我尝试使用`proxy-target-class="true"` 上面的属性。但这似乎不能与 mybatis spring MapperFactoryBean 结合使用，我想用它来动态生成 DAO 实现：

```
<bean class="org.mybatis.spring.mapper.MapperFactoryBean">
   <property name="mapperInterface" 
       value="com.foo.bar.dao.api.admin.servicestatistic.StatisticLogDAO" />
   <property name="sqlSessionFactory" ref="sqlSessionFactory" />
</bean> 
```

这些配置会产生以下异常：

`2013-01-24 10:30:12,216 [main] [ERROR] [] ContextLoader - Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pidbStatisticLogServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.foo.bar.dao.api.admin.servicestatistic.StatisticLogDAO com.foo.bar.service.impl.admin.servicestatistic.PidbStatisticLogServiceImpl.statisticLogDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.mybatis.spring.mapper.MapperFactoryBean#4': Post-processing of the FactoryBean's object failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class $Proxy25]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy25 at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607) at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479) at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206) at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705) at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) at org.apache.catalina.core.StandardHost.start(StandardHost.java:840) at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057) at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463) at org.apache.catalina.core.StandardService.start(StandardService.java:525) at org.apache.catalina.core.StandardServer.start(StandardServer.java:754) [...] Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.foo.bar.dao.api.admin.servicestatistic.StatisticLogDAO com.foo.bar.service.impl.admin.servicestatistic.PidbStatisticLogServiceImpl.statisticLogDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.mybatis.spring.mapper.MapperFactoryBean#4': Post-processing of the FactoryBean's object failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class $Proxy25]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy25 at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:514) at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87) at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285) ... 28 more Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.mybatis.spring.mapper.MapperFactoryBean#4': Post-processing of the FactoryBean's object failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class $Proxy25]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy25 at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:165) at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102) at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1443) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:249) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:873) at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:815) at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:730) at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:486) ... 30 more Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class $Proxy25]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy25 at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:217) at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:110) at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:473) at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:359) at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:319) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:412) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.postProcessObjectFromFactoryBean(AbstractAutowireCapableBeanFactory.java:1629) at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:162) ... 38 more Caused by: java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy25 at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:446) at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33) [...]`

这个问题有什么解决办法吗？`proxy-target-class="true"`我可以更改 mybatis spring org.mybatis.spring.mapper.MapperFactoryBean 的行为吗？如何创建与spring 安全配置的属性结合使用的代理？

请帮我。我正在使用 spring 3.2.0、spring security 3.1.3 和 mybatis spring 1.1.1

谢谢， 奥利德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T00:48:10.707

接口的注释不是从实现类继承的，因为不清楚如果两个具有相同注释和不同值的接口由同一个类实现会发生什么。如果手动生成动态代理，则必须将接口注解移动到代理类中。

# scala - 如何隐式地getClass

> ID：14518189
> 
> 赞同：1
> 
> 时间：2013-01-25T08:41:51.817
> 
> 标签：scala, reflection, implicits

我正在用方法签名在一些 Java 代码上编写 Scala 包装器，并且代码中的`method(cl: Class[_], name: String)`许多 getClass 方法看起来并不好：

```
Creator.create(getClass, "One")
Creator.create(getClass, "Two")
Creator.create(getClass, "Three")
Creator.create(getClass, "Four") 
```

那么我们能以某种方式隐含地获得封闭类`Creator.create("some name")`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:39:05.933

**回答 1。**

总的来说，我强烈反对反思。但是，如果你真的想这样做，在 Scala 2.9.1 中你可以使用 Manifest

```
def create[T:Manifest](name:String) = {
   val klass:Class[_] = t.erasure
} 
```

在 scala 2.10 中，你应该看看 TypeTag。

**回答 2。**

但是，正如我已经说过的，正确的方法不是使用类，而是使用隐式构建器

```
trait Builder[T]{
     def build(name:String):T
}

def create[T](name:String)(implicit builder:Builder[T]) = {
      builder.build(name)
} 
```

这样，您可以通过仅在范围内导入正确的隐式来限制您可以创建的内容，您不会依赖反射，也不会冒险获得可怕的 RuntimeExceptions

**发表评论回答**

如果您的目的是避免在每次调用时调用 getClass，您可以执行以下操作

```
def create(name:String)(implicit klass:Class[_]) {

} 
```

你可以这样称呼它

```
implicit val klass1 = myInstance.getClass
create("hello")
create("goodbye") 
```

# javascript - Ajax 表单提交未加载新提交的数据

> ID：14518190
> 
> 赞同：6
> 
> 时间：2013-01-25T08:41:53.163
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我更新了 jquery，所以我可以使用新的 jquery mobile ui 1.3 并且由于某种原因我的表单不再更新页面，它以前可以工作但它不是通过 ajax，它只是提交了没有 ajax 的表单，但我想ajax 只是获取新数据并将其附加到 div 而不是在弹出窗口关闭时再次重新加载整个页面。

我为表单使用了一个弹出模块，在提交时它应该将新信息附加到`#content ul`

JS。

```
<!-- Load Json data and events -->
<script type="text/javascript">
    jQuery('#new_rave').live('submit',function( event ) {
        $.ajax({
            url: 'http://whoops/goodtimes',
            type: 'POST',
            dataType: 'json',
            data: $('#new_rave').serialize(),
            success: function( data ) {
                for( var id in data ) {
                   jQuery('#').html(data[id]);
                }
            }
        });
        return false;
    });
    $(document).ready(function() {
        $.getJSON('http://whoops/goodtimes', function( goodtimes ) {
            $.each(goodtimes, function( goodtime ) {
        var output = 
            "<li><a href="+this.goodtime.id+">" + 
            "<h3>" + this.goodtime.title + "</h3>" +
            "<p>" + this.goodtime.post + "</p>" +
            "<p class='ui-li-aside'><strong>" + 
                this.goodtime.created_at + "</strong></p>" +
            "</a></li>";
            $('#content ul').append(output).listview('refresh');
        });
        });
    });
</script> 
```

表格

```
<!-- New item Popup -->
<div data-role="popup" class="ui-content"
data-overlay-theme="a" data-position-to="window" id="add">
    <form id="new_rave">
        <label for="goodtime_title">Title</label>
        <input type="text" name="goodtime[title]" id="goodtime_title">
        <label for="goodtime_post">Rave</label>
        <div data-role="fieldcontain">  
        <textarea name="goodtime[post]" id="goodtime_post"></textarea>
        </div>
        <input type="submit" value="submit">
    </form>
</div> 
```

和内容 div

```
<div id="content" data-role="content">  
    <ul data-role="listview" data-theme="d" data-divider-theme="d"></ul>
</div><!-- /content --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:47:10.670

## 介绍

您的问题可能是由于 **$(document).ready(function(){**。在**`jQuery Mobile`**中，Ajax 用于在**`DOM`**您导航时将每个页面的内容加载到其中。因为这**`$(document).ready()`**将在您的第一页加载和每个代码之前触发用于页面操作的将在页面刷新后执行。

这里的所有内容都可以在我的**个人博客** **[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中找到更详细的描述。

如果这不是问题，请使用 Firefox/Chrome 插件**`Firebug`**测试 ajax 调用是否已到达服务器以及是否已收到响应。

最后一件事，不要在**`listview`**每次添加新元素时刷新。**`listview`**刷新是一个巨大的时间槽，每次刷新可以持续大约 50 毫秒，但是多次刷新，你的重新设计可能会永远持续下去。

## 解决方案

所以改变这个：

```
 $.getJSON('http://whoops/goodtimes', function(goodtimes) {
      $.each(goodtimes, function(goodtime) { 
        var output = 
        "<li><a href="+this.goodtime.id+">" + 
                "<h3>" + this.goodtime.title + "</h3>" +
                "<p>" + this.goodtime.post + "</p>" +
                "<p class='ui-li-aside'><strong>" + this.goodtime.created_at + "</strong></p>" +
            "</a></li>";
        $('#content ul').append(output).listview('refresh');
     });
    }); 
```

对此：

```
 $.getJSON('http://whoops/goodtimes', function(goodtimes) {
      $.each(goodtimes, function(goodtime) { 
        var output = 
        "<li><a href="+this.goodtime.id+">" + 
                "<h3>" + this.goodtime.title + "</h3>" +
                "<p>" + this.goodtime.post + "</p>" +
                "<p class='ui-li-aside'><strong>" + this.goodtime.created_at + "</strong></p>" +
            "</a></li>";
        $('#content ul').append(output);
     });
     $('#content ul').listview('refresh');
    }); 
```

## 编辑

不断重复发帖的问题在于 jQuery Mobile 如何处理事件绑定。因为每次事件将被一遍又一遍地绑定时，页面会不断地被重新访问。在您的情况下，这将是一个执行 JSON 调用的事件。

这可以通过多种方式防止，最常见的一种是在绑定之前取消绑定事件。例如：

```
$('#test-button').off('click').on('click', function(e) {
    alert('Button click');
}); 
```

# java - 从组合框中删除项目

> ID：14518191
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:41:56.950
> 
> 标签：java, mysql, swing, netbeans, jcombobox

如果数据表的列中存在项目，我想从 java 上的组合框中删除项目。

例如comboBox items: **09:00, 10:00, 11:00** and Data table value: **10:00** 在这个例子中，它必须删除Combobox上的**“10:00”**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:54:23.907

您可以使用`DefaultComboBoxModel`which has`public void removeElementAt(int index)`方法。

或者只是在必要时重新创建模型并将新模型设置为已经存在的组合框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T09:04:49.400

可以使用的[`removeItemAt(int itemIndex)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#removeItemAt%28int%29)方法`JComboBox`。

# jquery - jQuery绑定keyup，keydown - 无法输入表单字段

> ID：14518192
> 
> 赞同：2
> 
> 时间：2013-01-25T08:42:01.537
> 
> 标签：jquery, coffeescript

经过大量调试后，我找到了无法在表单字段中输入任何文本的原因。

我有一个 jQuery 函数来捕获我在 JS 应用程序中使用的一些键。

```
$(document).bind 'keyup keydown', (e) -> 
    shifted = e.shiftKey
    cntrled = e.metaKey || e.ctrlKey 
```

Javascript：

```
$(document).bind('keyup keydown', function(e) {
      shifted = e.shiftKey;
      return cntrled = e.metaKey || e.ctrlKey;
    }); 
```

为什么我不能在适当的位置输入表单字段？

一旦我删除该部分，我就可以再次输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:48:15.020

您正在返回取消事件的值 cntrled。

在 Coffeescript 中，函数中的最后一个值将被返回。

返回 true 作为处理程序中的最后一行。

JavaScript 相当于你现在正在做的事情......

```
$(document).bind('keyup keydown', function (e) {
    var shifted = e.shiftKey
        , cntrled = e.metaKey || e.ctrlKey;
    return cntrled;
}); 
```

改成...

```
$(document).bind('keyup keydown', function (e) {
    var shifted = e.shiftKey
        , cntrled = e.metaKey || e.ctrlKey;
    return true;
}); 
```

# java - 如何将新项目添加到字符串数组？

> ID：14518195
> 
> 赞同：25
> 
> 时间：2013-01-25T08:42:05.460
> 
> 标签：java, arrays

> **可能重复：**
> [如何向 String[] 数组添加新元素？](https://stackoverflow.com/questions/2843366/how-to-add-new-elements-to-a-string-array)

如何将新项目添加到字符串数组？我正在尝试将项目添加到最初为空的字符串中。例子 ：

```
 String a [];

  a.add("kk" );
  a.add("pp"); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-25T09:01:33.230

从[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

> 数组是一个容器对象，它包含固定数量的单一类型的值。数组的长度是在创建数组时确定的。创建后，它的长度是固定的。您已经在“Hello World!”的 main 方法中看到了一个数组示例。应用。本节更详细地讨论数组。

![在此处输入图像描述](../Images/b97bd7ea65cdf725733b2139dd70e5cf.png)

因此，对于字符串数组，一旦创建了一定长度的数组，就无法修改它，但可以添加元素直到填充它。

```
String[] arr = new String[10]; // 10 is the length of the array.
arr[0] = "kk";
arr[1] = "pp";
... 
```

因此，如果您的要求是添加许多对象，建议您使用以下列表：

```
List<String> a = new ArrayList<String>();
a.add("kk");
a.add("pp"); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-25T08:46:24.267

你**不能**按照你想要的方式去做。

改用`ArrayList`：

```
List<String> a = new ArrayList<String>();
a.add("kk");
a.add("pp"); 
```

然后你可以通过使用再次拥有一个数组`toArray`：

```
String[] myArray = new String[a.size()];
a.toArray(myArray); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T08:43:09.430

简单的回答：你不能。Java中的数组是固定大小的。你会想要使用一个[`List<String>`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html).

或者，您可以创建一个固定大小的数组并将其放入其中：

```
String[] array = new String[2];
array[0] = "Hello";
array[1] = "World!"; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-25T08:43:53.123

你不能。Java 数组具有固定长度。如果您需要可调整大小的数组，请使用`java.util.ArrayList<String>`.

顺便说一句，您的代码无效：您在使用它之前没有初始化数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T09:31:51.203

```
String a []=new String[1];

  a[0].add("kk" );
  a[1].add("pp"); 
```

试试这个...

# mysql - 使用 mysql 进行时间计算和计数

> ID：14518208
> 
> 赞同：0
> 
> 时间：2013-01-25T08:43:25.083
> 
> 标签：mysql

这是我的数据库布局：

*   ID (int - 唯一主键
*   user (int) - 我按列搜索的用户的外`name`键
*   starttime (timestamp) - 会话开始时间
*   endtime (timestamp) - 会话结束时间
*   idletime (int) - 以分钟为单位的空闲时间

例如，我想知道特定玩家在线的分钟数。

以下查询工作正常。我得到大约 3443 分钟。

```
SELECT user, 
       SUM(TIMESTAMPDIFF(MINUTE,starttime,endtime)-idletime) 
FROM gc_sessions 
WHERE user = 139 
```

但是，如果我想通过连接来执行此操作，我可以使用以下查询得到 8。

```
 SELECT name, 
        SUM(TIMESTAMPDIFF(MINUTE,starttime,endtime)-idletime) 
 FROM gc_sessions 
 JOIN gc_users ON gc_user.id = gc_sessions.id
WHERE name LIKE "variell" 
```

我的查询有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:49:52.800

请尝试以下查询并告诉我结果

```
SELECT `name`, SUM(TIMESTAMPDIFF(MINUTE,`starttime`,`endtime`)-`idletime`) 
    FROM `gc_sessions` inner JOIN `gc_users` ON 
    `gc_sessions`.`user` =`gc_users`.`id` WHERE gc_users.`name` LIKE "variell" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:28:15.037

尝试`group by`：

```
 SELECT name, 
        SUM(TIMESTAMPDIFF(MINUTE,starttime,endtime)-idletime) 
 FROM gc_sessions 
 JOIN gc_users ON gc_user.id = gc_sessions.userid
WHERE name LIKE "variell"
GROUP BY name
; 
```

不确定您的整个表架构，但首先要注意的是您拥有`on gc_users.id = gc_seeions.id`. 它必须是两个用户标识。根据以下演示，即使没有`group by`. 下一个可能的问题可能与**LIKE**运算符有关。如果您想要确切的名称`Variell`，那么它不应该是`like`but `=`。如果您想使用`Like`它，只是说您可能还尝试获取包含此字符串的任何名称.. 但是在不知道表模式和示例数据的情况下，很难提交确切的原因。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/a17b45/6)

结果：

```
|    NAME | TOTALTIME |
-----------------------
| variell |       308 | 
```

*   [带通配符的 SQLFIDDLE 演示](http://sqlfiddle.com/#!2/a17b45/7)

询问：

```
SELECT gu.name, 
        SUM(TIMESTAMPDIFF(MINUTE,gs.starttime,
                          gs.endtime)-gs.idletime) AS TotalTime
 FROM gc_sessions gs 
 JOIN gc_users gu ON gs.userid = gu.id
WHERE gu.name LIKE "%variell%"
GROUP BY gu.name
;

|     NAME | TOTALTIME |
------------------------
| dvariell |       286 |
|  variell |       308 | 
```

# design-patterns - 寻找收据对象的设计模式方向

> ID：14518210
> 
> 赞同：0
> 
> 时间：2013-01-25T08:43:40.070
> 
> 标签：design-patterns, point-of-sale

我需要设计一个收据对象，它将在交易中获取行项目并将它们格式化为 40 列显示。将来我还需要另一种格式的常规尺寸打印纸。

交易具有不同类型的行项目（项目、评论、折扣、投标等）。

我的第一个想法是为这些中的每一个创建一个接口，以便它们负责格式化自己，并且我可以为我需要的每种收据格式的接口添加一个新方法。我的下一个想法是为我需要的每种收据格式创建一个类，并让它负责查看每行的类型并适当地格式化它。

所以我的问题是，是否有更好的设计模式我可能会忽略，如果没有，那么是否有充分的理由支持上述设计中的一种而不是另一种？

所以我可以添加这样的东西：

```
public interface IReceiptFormat
{
    string FormatFor40Column();
    string FormatForRegularPaper();
} 
```

到我的项目、评论等课程。或者我可以创建这样的东西：

```
public ReceiptFormatterFor40Column
{
    public Ticket Ticket {get; private set;}

    public ReceiptFormatterFor40Column(Ticket ticket)
    {
        Ticket = ticket;
    }

    public List<string> GenerateReceipt()
    {
        var lines = new List<string>();

        foreach(var line in Ticket.Lines)
        {
            // check what type of object line is and add
            // add an appropriately formatted string to lines
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:27:01.620

我最初的想法是您正在寻找一种策略模式。如果您想将格式与内容分开，这将很有用。该行可以在创建时注入其适当的格式化策略，并且为方便起见可能具有默认值。然后这些行都可以实现一个委托给注入策略的单个 IFormattable 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:41:05.243

为什么不直接创建一个`IRecieptPrinter`界面，然后创建一个`RegularPaperPrinter`and `ColumnPrinter`？

那么你可以这样做：

```
var printer = new RegularPaperPrinter();
printer.Print(receipt); 
```

如果您不想自己创建打印机，可以使用工厂模式：

```
var printer = printerFactory.Create("regularpaper");
printer.Print(receipt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-12T23:31:47.343

我有同样的情况要解决，最后我使用了一个桥接设计模式，将收据和他的内容与打印分开。

```
abstract class Receipt{
private Printer printer;

public Receipt (Printer printer){
if (printer==null){
throw new NullArgumentException ("Printer can't be null.");
}
this.printer=printer;
}

public abstract PrintJobStatus printReceipt ();
}

abstract class Printer {

public abstract void printLine (String txt, Alignement al, Font fo, Size si);
public abstract void printQrCode(String qrCodeStr, QrType qrType, Size si);
}

public class VatReceipt extend Receipt{

public VatReceipt (Printer printer){
super (printer);
}

@Overide
public PrintJobStatus printReceipt ()
PrintJobStatus result=PrintJobStatus.UNDEFINE;

printer.printLine ("Hello i'm the receipt.header",
Alignement.CENTER,  Font.A, Size.SMALL);
...
...
return result;
}

public class EpsonT88Printer extend Printer{
private EpsonPrinterSdk epsonSdkPrinter;

@Overide
public void printLine(String txt, Alignement al, Font fo, Size si){
int epsonAlignement=convertGenericAligToEpsonAlig(al);
int epsonFont=convertGenericFontToEpsonFont(fo);
...
epsonSdkPrinter.printTextLine (txt, epsonAlignement,...);
}
} 
```

我用手机接听...

# .net - .net 系列的第 2 代垃圾收集

> ID：14518211
> 
> 赞同：1
> 
> 时间：2013-01-25T08:43:40.660
> 
> 标签：.net, garbage-collection

我正在经历 GC Gen 2 收集以一系列方式发生的情况 - 一个接一个地发生，这使我的应用程序挂起长达 30 秒。这主要发生在执行 GUI 操作时，例如启动动画或导航到另一个站点（卸载和加载新控件）。它随机发生。与此同时，根本没有 Gen 2 系列。在进行导航之前将 LatencyMode 设置为低并在完成后将其设置回来并没有多大帮助。

事实：

*   .net 4.0，WPF
*   Gen 0 堆大小在 3 到 6 MB 之间
*   Gen 1 堆大小在 0 到 3 MB 之间
*   Gen 2 堆大小相当恒定 ~330 MB
*   LOH 堆大小相当恒定 ~70 MB

Gen 2 和 LOH 如此之大，因为我在字典中缓存了许多对象，以便在我的时间关键型应用程序中快速访问它们。

我也有一个很好的 perfmon 屏幕截图，但不允许发布它（所以防止新用户的垃圾邮件）:(

有任何想法吗？

![性能监视器](../Images/81921261693aee5931eaed711e188c26.png)

# c# - .NET 压缩库

> ID：14518212
> 
> 赞同：0
> 
> 时间：2013-01-25T08:43:50.253
> 
> 标签：c#, compression, zip

我目前正在寻找一个 .NET 压缩 (zip) 库。由于我们公司的政策，图书馆必须是商业图书馆。这意味着所有流行的东西（如 DotNetZip）都是毫无疑问的。

我唯一遇到的是 Xceed 库。有没有其他选择？

PS：.NET 4.5 目前不是一个选项，因为我们的产品仍在 4.0 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:18:30.970

在没有找到任何合理的商业 Zip 库之后，我们最终编写了自己的。实际上，由于在 .NET 4.0 中找到了 System.IO.Packaging.Package（不需要 .NET 4.5），因此工作量并不大。

因此，如果您不能使用 DotNetZip（由于开源问题）并且不想花太多钱，这是一个不错的第三选择。

# linux - 在 Squid 中启用 MAC 地址过滤

> ID：14518213
> 
> 赞同：1
> 
> 时间：2013-01-25T08:43:52.120
> 
> 标签：linux, squid

嗨，请告诉我如何在 Squid 上使用 MAC 地址过滤互联网访问......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:33:52.413

`/etc/squid/squid.conf`添加一些acls ：

```
acl mac_addr1 arp ff:ff:ee:aa:00:00
acl mac_addr2 arp 00:11:22:33:44:55
http_access allow mac_addr1
http_access allow mac_addr2
http_access deny all 
```

此示例仅允许 http_access`mac_addr1`和`mac_addr2`.

您必须在`squid`支持下编译`mac`。为了做到这一点，添加`–enable-arp-acl`到配置命令。

有关更多详细信息，请参阅[此](http://www.cyberciti.biz/faq/howto-linux-unix-squid-mac-address-filtering/)内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T03:14:29.573

这里有一些关于基于 MAC 的过滤的更多规则。

[](http://tecadmin.net/configure-squid-proxy-server-mac-address-based-filtering/)[http://tecadmin.net/configure-squid-proxy-server-mac-address-based-filtering/](http://tecadmin.net/configure-squid-proxy-server-mac-address-based-filtering/)

# orchardcms - 查看提交时出现 Orchard CMS 自定义表单错误

> ID：14518216
> 
> 赞同：0
> 
> 时间：2013-01-25T08:43:53.017
> 
> 标签：orchardcms, orchardcms-1.6

使用自定义表单模块（[教程](http://devdirective.com/post/160/how-to-create-custom-forms-in-orchard-cms-with-email-and-recaptcha)），我构建了一个简单的*联系我们*小部件。它正在正确保存，因为我可以在表格中看到一些数据`ciss_Orchard_Projections_StringFieldIndexRecord`

但是，单击`Submissions`链接后，我收到此错误：

```
The page cannot be displayed because an internal server error has occurred. 
```

我打开了错误日志，它显示：

> 2013-01-25 01:28:01,189 [14] Orchard.DisplayManagement.Implementation.DefaultDisplayManager - 动作`1 by System.Action`1 [[Orchard.DisplayManagement.Implementation.ShapeDisplayingContext, Orchard.Framework, Version=1.6.0.0, Culture=neutral, PublicKeyToken=null]] System.NullReferenceException：对象引用未设置为对象的实例。在 Orchard.Widgets.Shapes.b_e *（ShapeDisplayingContext 显示）在 Orchard.DisplayManagement.Implementation.DefaultDisplayManager.<>c* _DisplayClassc.b__3（动作`1 action) in c:\Users\sebros\My Projects\Orchard\src\Orchard\DisplayManagement\Implementation\DefaultDisplayManager.cs:line 68 at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 事件，动作`1 dispatch, ILogger logger) in c:\Users\sebros\My Projects\Orchard\src\Orchard\InvokeExtensions.cs:line 17 2013-01-25 01:29:39,785 [13] Orchard.DisplayManagement.Implementation.DefaultDisplayManager - NullReferenceException thrown from Action`1

我应该从哪里开始调试呢？

我可以“清理”数据库以删除此违规记录（也许）？

# maven - Maven：如何从 javadoc 中排除特定的源文件？

> ID：14518220
> 
> 赞同：14
> 
> 时间：2013-01-25T08:43:59.470
> 
> 标签：maven, javadoc

我需要使用 Maven 从 Javadoc 中排除特定的源文件（不仅仅是包）。<excludePackageNames> 设置对我不起作用：它只允许您排除某些包。有一个 <sourceFileExcludes> 设置，它基本上没有使用示例的文档。它只是说：

“sourceFileExcludes：排除源文件的过滤器。如果您指定子包或子包排除，这些将被忽略。”

所以，基本上，我需要忽略所有以 Mock 开头的 Java 文件，以及两个包中的所有 Java 文件。由于如果我指定 excludePackageNames，sourceFileExcludes 将被忽略，因此我无法将它们组合起来。所以我尝试了这个：

```
<sourceFileExcludes>
    <exclude>net/my/packagename/mock</exclude>
    <exclude>net/my/packagename/samples</exclude>
    <exclude>**/Mock*.java</exclude>
</sourceFileExcludes> 
```

但它没有用。没有排除任何预期的文件。

有人知道如何使用 sourceFileExcludes 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T19:33:37.177

那这个呢？

```
<sourceFileExcludes>
    <exclude>net/my/packagename/mock/*.java</exclude>
    <exclude>net/my/packagename/samples/*.java</exclude>
    <exclude>**Mock*.java</exclude>
</sourceFileExcludes> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-06T19:55:55.217

它目前可能无法正常工作。插件问题跟踪器中记录了错误 - [MJAVADOC-365](http://jira.codehaus.org/browse/MJAVADOC-365)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-26T10:12:51.350

您还需要指定源路径。然后 sourceFileExcludes 将起作用。

```
<sourceFileExcludes>
  <exclude>CryptoUtils.java</exclude>
</sourceFileExcludes>
<sourcepath>${basedir}/src/main/java/com/sdk/entity;${basedir}/src/main/java/com/sdk/main;${basedir}/src/main/java/com/sdk/util</sourcepath>
```

笔记 ：

CryptoUtils 在“/src/main/java/com/sdk/util”中

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2014-05-06T09:12:15.883

```
 <sourceFileIncludes>
    <includes>com/cod/user/**</includes>

   </sourceFileIncludes>
  <sourceFileExcludes>
 <exclude>com/cod/user/impl/**</exclude> 
```

包括你想要的，排除其他

# view - 插入表，从视图，Oracle，无法扩展临时段

> ID：14518221
> 
> 赞同：1
> 
> 时间：2013-01-25T08:44:01.873
> 
> 标签：view, insert, extend, temp, segment

我在 Oracle 中有以下代码：

插入 table_x
select * from view_y; 犯罪;

其中 view_y 需要大约半小时来执行并返回大约 400 000 条记录。

问题是当我尝试插入时。插入需要两个多小时，现在甚至无法完成。错误是“无法在表空间 TEMP 中将临时段扩展 64”。

请就另一种插入数据的方式提出建议 - 从视图到表中。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-02T08:31:17.217

在尝试插入之前，您应该首先处理大量记录，您应该首先使所有索引不可用。

普通插入作为选择不消耗任何 TEMP 空间，但它通过保持索引更新来使用。考虑到这一点，您宁愿在 table_x 上删除索引，然后执行索引语句并重新创建它们（或者使它们不可用并重新构建它们）。

# sockets - 向 https 服务器发送 SSL 加密消息

> ID：14518224
> 
> 赞同：0
> 
> 时间：2013-01-25T08:44:08.617
> 
> 标签：sockets, https

我有一条消息已由 https 服务器的证书（使用其公钥）加密。我是否应该将此消息发送到 https 服务器（我可以使用任何语言）而不进一步加密。

实际情况是这样的：1）在我的服务器上，我使用证书 https（例如 google）创建加密消息 2）将此消息发送给朋友（例如通过电子邮件），这样他就无法“阅读”消息的内容3）他应该将此消息（已加密）发送到谷歌，接收并阅读答案。

对不起我的英语不好。谢谢大家

* * *

我可能解释得很糟糕：我有两个参数要使用 post 方法（p1，p2）发送到 https 服务器：

字符串参数 = "p1=hello&p2=world"; 此字符串已使用服务器 https 证书的公钥加密，如下所示。

```
String encParms = encrpythWithCertificate (parms, "/tmp/localhost.localdomain.cer"); 
```

现在我必须将此字符串 (encParms) 发送到使用相同证书的 https 服务器。

所以我有这个代码：

```
HttpsURLConnection conn = .....
conn.setRequestProperty ("Content-Length", encParms.length ());
OutputStream outputStream = urlCon.getOutputStream ();
outputStream.write (encParms.toByteArray());
outputStream.close (); 
```

如果我发送 parms 一切正常。如果我发送 encParms 不起作用。我猜原因是 encParms 已经被加密，然后是“第二次加密传递”来为服务器生成一条难以理解的消息。

我的问题是：如何发送消息 encParms 以便 https 服务器正确接收消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:52:21.427

HTTPS（准确地说是 SSL 层）提供传输级别的安全性并加密整个通道。它不关心正在传输的内容。通常没有理由（在您的场景中）担心消息是否再次加密 - 双重加密不会显着影响传输速度。SSL 确实具有禁用加密的 NULL 密码套件，但正如所说，这在您的情况下没有意义。

# extjs - ExtJs 3.0 - 工具栏菜单中的日期范围

> ID：14518225
> 
> 赞同：0
> 
> 时间：2013-01-25T08:44:12.617
> 
> 标签：extjs, extjs3

是否可以在工具栏菜单（带有上下文菜单的按钮）中显示日期字段（我需要日期范围）？ **注意：Extjs 3.0**

所以它看起来像这样：

![带有日期字段的上下文菜单](../Images/d61f8501ff0543e1cae42d5db76cafe4.png)

编辑：

我尝试添加带有日期字段的表单：

```
items: [{
    text: 'Filter',
    iconCls: 'tracker-tb-filter',
    ref: '../trackerFilterBtn',
    menu: {
        items: [
            ... 

            '<b class="menu-title">Show:</b>',
            {
                text: 'All',
                checked: true,
                group: 'group-tracker-range',
                name: 'tracker-filter-range',
                value: 'all',
                handler: toolbar.filterTrackRecords.createDelegate(this)
            }, {
                xtype: 'form',
                text: 'From/To',
                group: 'group-tracker-range',
                checked: false,
                name: 'tracker-filter-range',
                handler: toolbar.filterTrackRecords.createDelegate(this),
                items: [
                    {
                        xtype: 'datefield'
                    }, {
                        xtype: 'datefield'
                    }
                ]
            }

            ...

        ]
    }
}] 
```

但是根本没有显示字段：

![字段未显示](../Images/e53f7b41bd2d94889782beaef1385068.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:20:37.867

经过研究，我还没有找到一种方法来实现我的需要。

我尝试了 ExtJs 3.4，但是当我们选择日期时保持菜单打开存在问题。如果有人仍然会找到方法 - 请在这里写。

* * *

所以我做了一个技巧 - 我生成了一个包含所有必填字段的东面板，当我们单击工具栏中的按钮时会显示它。它看起来是这样的：

![过滤器面板](../Images/0fb867461b0a9c41aa3bb111f62a98f0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T10:02:08.290

不错的替代解决方案。如果您仍然需要不生成面板的解决方案，我发现这个技巧很有效：在父菜单上，我们在侦听器上添加“beforehide”，它只是一个返回真值的单行函数。...菜单：{宽度：300，填充：10，侦听器：{ **之前隐藏：函数（）{返回假；}** }, ...

# wcf - 记录 WCF 服务收到的请求

> ID：14518227
> 
> 赞同：2
> 
> 时间：2013-01-25T08:44:13.033
> 
> 标签：wcf, logging, soap

有没有办法将传入请求记录到 WCF 服务？

我有一个作为 Windows 服务托管的简单 WCF 服务。WCF 服务每天都会写入日志。有时会有不好的请求进来，我也想登录。

有没有办法记录进来的 SOAP 请求？这样有助于向客户展示他们所犯的错误。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-19T06:51:22.090

我想添加到@RoelF 的回复，因为他在下面提到

> 虽然我不确定如何准确记录 SOAP 消息的内容，但这种方法可以为您提供很多额外的信息，尤其是在您实现定时记录的情况下。

因此，这是您用来从 AfterCall BeforeCall 方法中获取 SOAP 请求的行。

```
Message message = OperationContext.Current.RequestContext.RequestMessage; 
```

然后你可以记录 message.ToString() 。这应该记录您之后的 SOAP 请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:54:58.333

您可以尝试实现一个`IServiceBehavior`和一个`IParameterInspector`类，它将处理日志记录。

**IServiceBehavior**是最重要的实现方法
：`ApplyDispatchBehavior`

```
 public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)
        {
            foreach (var endpoint in dispatcher.Endpoints)
            {
                foreach (var dispatchOperation in endpoint.DispatchRuntime.Operations)
                {
                    dispatchOperation.ParameterInspectors.Add(new LoggingParameterInspector(/*reference to your logger*/));
                }
            }
        }
    } 
```

您必须将其应用`ServiceBehavior`到您的服务中，方法是使其成为`Attribute`您的服务实现类，或者在启动时将其添加到定义中。

**IParameterInspector**
这个接口有两个方法：`BeforeCall`和`AfterCall`。在这些方法的实现中，您可以访问操作名称和为方法提供的输入。这允许您创建对服务的所有调用的干净和简单的跟踪。

虽然我不确定如何准确记录 SOAP 消息的内容，但这种方法可以为您提供很多额外的信息，尤其是在您实现定时记录的情况下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:00:54.510

您可以在服务的配置文件中配置跟踪和跟踪级别。为了查看日志文件，Microsoft 提供了一个特殊的跟踪日志查看器。通常，您只需双击跟踪文件即可在此查看器中打开它们。

这在SO上已经回答了很多次，例如[How to turn on WCF tracking?](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)

MSDN 上的文档 [http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

示例配置

```
<configuration>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true" >
        <listeners>
             <add name="xml"/>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>
            <add name="xml"/>
        </listeners>
      </source>
      <source name="myUserTraceSource"
              switchValue="Information, ActivityTracing">
        <listeners>
            <add name="xml"/>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
        <add name="xml"
             type="System.Diagnostics.XmlWriterTraceListener"
             initializeData="Error.svclog" />
    </sharedListeners>
  </system.diagnostics>
</configuration> 
```

# regex - RegEx - 在匹配内容时删除前后空格

> ID：14518228
> 
> 赞同：3
> 
> 时间：2013-01-25T08:44:27.470
> 
> 标签：regex

我想尝试构建一个 RegEx 语句，该语句将从字符串中删除任何前置或尾随空格（但保留字符串中包含的任何空格），同时匹配所选格式。例如，字符串不能超过 20 个字符，可以包含 a-zA-Z0-9 中的任何字符以及下划线和连字符。但最重要的是，它必须修剪或忽略在字符串开头或结尾发现的任何空格，因此：

正确：“祝你有美好的一天”

错误：“祝你有美好的一天”

我已经尝试了许多不同的方法来做到这一点，但不幸的是，到目前为止，我还没有想出一个完全符合我想要的公式。任何人都可以帮助我使用合适的正则表达式吗？（这是最简单形式的正则表达式，而不是特定于平台的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:03:06.917

搜索此模式：

```
^\s*(.*?)\s*$ 
```

替换为这个：

```
\1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:48:41.007

从你的例子看来，字符串中间也允许有空格，所以试试这个

```
^((([a-zA-Z0-9\-_][a-zA-Z0-9\-_ ]{0,18}?[a-zA-Z0-9\-_]))|([a-zA-Z0-9\-_]))$ 
```

任何匹配的都是正确的。

模式中的`or`部分用于支持单个字符的句子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:56:02.423

这应该适合您的需求：

```
^\S[\w\s-]{0,18}\S$ 
```

`18`是`maxlength - 2`字符串的，因为这两个`\S`将匹配任何非空白字符。例如在这种情况下，如果字符串的长度大于`20`字符，则字符串将不匹配。此外，如果字符串的长度小于`2`字符，则字符串将不匹配，因为上述约束相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:57:39.943

使用这个正则表达式`^\S((.{0,18}\S)|)$`

`^`字符串开头

`\S`非空格符号

`(.{0,18}\S)?`末尾的任何符号和非空格符号（0-19 个符号）

`|`或者

`$`字符串结尾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T23:19:32.577

这是一个使用 sed 的示例

```
echo "  Have a nice day  "|sed -E "s/^ *([^ ]+.*[^ ]+) +$/\\1/" 
```

# caching - 清漆：POST数据后清除缓存

> ID：14518229
> 
> 赞同：2
> 
> 时间：2013-01-25T08:44:29.003
> 
> 标签：caching, varnish, varnish-vcl

我有一个位于 Varnish 后面的 Plone 网站。一切正常，除了一件事。

这是一个动态站点，因此不时会有新内容。场景如下：

我有一个显示项目列表的页面。此页面已被缓存。所以我通过某种形式添加了另一个项目，并返回到同一页面，但新项目未显示。这是因为显示的页面来自缓存并且仍在其 TTL 内。

如何确保在提交新项目后，从缓存中清除该页面，并显示来自后端服务器的新页面以及新项目？

我的简单VCL如图所示：

```
backend default { 
    .host = "127.0.0.1"; 
    .port = "8080"; 
} 

sub vcl_recv { 
    if (req.request != "GET" && req.request != "HEAD") {
        # We only deal with GET and HEAD by default
        return (pass);
    }

    # remove unnecessary cookies 
    if (req.http.cookie ~ "wc.cookiecredentials|Path|Domain") { 
        # found wc.cookiecredentials in request, passing to backend server 
        return (lookup); 
    } else { 
        unset req.http.cookie; 
    } 
} 

sub vcl_fetch { 
    #unset beresp.http.Set-Cookie; 
    set beresp.ttl = 12h; 
    return(deliver); 
} 

# Routine used to determine the cache key if storing/retrieving a cached page. 
sub vcl_hash { 
    # Do NOT use this unless you want to store per-user caches. 
    if (req.http.Cookie) { 
        set req.hash += req.http.Cookie; 
    } 
} 

sub vcl_deliver { 
    # send some handy statistics back, useful for checking cache 
    if (obj.hits > 0) { 
        set resp.http.X-Cache-Action = "HIT"; 
        set resp.http.X-Cache-Hits = obj.hits; 
    } else { 
        set resp.http.X-Cache-Action = "MISS"; 
    } 
} 
```

或者说白了，当我收到 POST 请求时，如何清除或清除域的整个缓存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:56:43.133

为此，您需要自定义 Varnish VCL 以处理`PURGE`请求和您的 Plone CMS，以便在内容更改时向 Varnish 发出清除请求。

Plone Developer Documentation 有关于[使用 Varnish 和 Plone](http://developer.plone.org/hosting/varnish.html)的非常好的和详尽的文档。您可以根据您的特定需求对其进行调整。

文档中的示例解释了如何在 VCL 中创建自定义 ACL 和正则表达式清除处理，然后如何在 Plone 中使用它来清除整个缓存。我已经从这里的示例中复制了 VCL 和 Plone 视图，以防它们在未来某个时间从 Plone 站点中删除：

```
acl purge {
        "localhost";
        # XXX: Add your local computer public IP here if you
        # want to test the code against the production server
        # from the development instance
}

...

sub vcl_recv {

        ...

        # Allow PURGE requests clearing everything
        if (req.request == "PURGE") {
                if (!client.ip ~ purge) {
                        error 405 "Not allowed.";
                }
                # Purge for the current host using reg-ex from X-Purge-Regex header
                purge("req.http.host == " req.http.host " && req.url ~ " req.http.X-Purge-Regex);
                error 200 "Purged.";
        }
} 
```

然后为 Plone 创建一个自定义视图，用于向 Varnish 发出`PURGE`请求：

```
import requests

from Products.CMFCore.interfaces import ISiteRoot
from five import grok

from requests.models import Request

class Purge(grok.CodeView):
    """
    Purge upstream cache from all entries.

    This is ideal to hook up for admins e.g. through portal_actions menu.

    You can access it as admin::

        http://site.com/@@purge

    """

    grok.context(ISiteRoot)

    # Onlyl site admins can use this
    grok.require("cmf.ManagePortal")

    def render(self):
        """
        Call the parent cache using Requets Python library and issue PURGE command for all URLs.

        Pipe through the response as is.
        """

        # This is the root URL which will be purged
        # - you might want to have different value here if
        # your site has different URLs for manage and themed versions
        site_url = self.context.portal_url() + "/"

        headers = {
                   # Match all pages
                   "X-Purge-Regex" : ".*"
        }

        resp = requests.request("PURGE", site_url + "*", headers=headers)

        self.request.response["Content-type"] = "text/plain"
        text = []

        text.append("HTTP " + str(resp.status_code))

        # Dump response headers as is to the Plone user,
        # so he/she can diagnose the problem
        for key, value in resp.headers.items():
            text.append(str(key) + ": " + str(value))

        # Add payload message from the server (if any)

        if hasattr(resp, "body"):
                text.append(str(resp.body)) 
```

如前所述，这只是按需清除整个缓存。我不是 Plone 方面的专家，所以我无法详细回答如何调整它以清除特定内容。基本上，您需要确定在特定情况下需要清除哪些页面，然后调整上面的示例，以便在 Plone 中处理请求时自动`PURGE`向 Varnish 发出请求。`POST`

仅在 VCL 中处理清除（即检测 POST 调用并基于这些调用清除内容）是相当复杂的。我相信在 Plone 中处理逻辑和清除会更有效。

**更新：**

如果您希望清除每个 上的整个缓存`POST`，可以按如下方式完成。

```
sub vcl_recv {
    if ( req.request == "POST") {
        ban("req.http.host == " + req.http.Host);
        return(pass);
    }
} 
```

现在，每个`POST`请求都会导致缓存在同一主机名下的所有页面从缓存中清除。不过，我建议从长远来看研究早期的解决方案。仅在发生a 时清除实际需要清除的页面会更有效`POST`。

# facebook - 如何使用 Devise 将 Facebook 帐户合并到现有帐户中

> ID：14518230
> 
> 赞同：0
> 
> 时间：2013-01-25T08:44:35.947
> 
> 标签：facebook, ruby-on-rails-3, session, devise, omniauth

我按照[此处](http://www.ruby-on-rails-outsourcing.com/articles/2011/05/06/how-to-merge-facebook-account-into-existing-user-account-using-devise/)的步骤操作，在合并帐户时遇到了一些问题

根据说明，我将以下方法添加到我的 ApplicationController

```
def after_sign_in_path_for(resource)
  # Merge data from Facebook with her current account
  if session["facebook_data"] && current_user.facebook_uid.nil?
    current_user.facebook_uid = session["facebook_data"]["uid"]
    current_user.save(:validate => false)
  end

  # Countermeasure against session fixation
  session.keys.grep(/^facebook\./).each { |k| session.delete(k) }

  super
end 
```

但是，我在 ApplicationController 中得到了一个空会话 ["facebook_data"]，即使我在调用此方法的回调 app/controllers/users/omniauth_callbacks_controller.rb 中看到了正确的会话值：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    user = User.find_for_facebook_oauth(env["omniauth.auth"], current_user)
    if user && user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
      sign_in_and_redirect user, :event => :authentication
    else
      session["facebook_data"] = env["omniauth.auth"]
      redirect_to new_user_session_url # this redirect invokes the after_sign_in_path_for method in ApplicationController
    end
  end

end 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:21:52.080

在众多原因中，有两个原因值得检查：

**1)**`session["facebook_data"]` in 在被`ApplicationController`设置之前被调用`omniauth_callbacks_controller.rb`。

**解决方案：**检查两个控制器的调用是否正确同步，**即**

*   它应该是 first`omniauth_callbacks_controller.rb`然后`ApplicationController`。

**2)**的值在设置后`session["facebook_data"]`重置为**空**`omniauth_callbacks_controller.rb`。

**解决方案：**跟踪`session["facebook_data"]`设置值之后的`omniauth_callbacks_controller.rb`调用直到调用`session["facebook_data"]`in `ApplicationController`。

# chef-infra - vagrant：如何从厨师食谱中获取主机IP地址？

> ID：14518236
> 
> 赞同：6
> 
> 时间：2013-01-25T08:45:07.433
> 
> 标签：chef-infra, vagrant

我正在尝试检索 Vagrantfile 中指定的主机 IP 地址：

```
config.vm.network :hostonly, "33.33.33.33" 
```

在配方文件中：

**mycookbook/files/default/xdebug.ini**

```
[xdebug]
zend_extension = "/usr/lib/php/modules/xdebug.so"
xdebug.remote_enable = 1
xdebug.remote_handler = "dbgp"
xdebug.remote_host = "***HERE***"
xdebug.trace_output_dir = "/tmp"
xdebug.max_nesting_level = 200 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T16:43:20.400

```
node[:network][:interfaces][:eth1][:addresses].detect{|k,v| v[:family] == "inet" }.first 
```

实际上，您可以通过登录虚拟机（使用**vagrant ssh**）并运行 shef. 并在那里检查节点对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:10:46.947

如果要检索主机的 IP，可以使用：

在你的食谱中：

**你的/食谱/路径/食谱/default.rb**

```
ip = node[:network][:interfaces][:eth1][:addresses].detect{|k,v| v[:family] == "inet" }.first
remote_ip = ip.gsub /\.\d+$/, '.1'

template "/etc/php.d/xdebug.ini" do
  source "xdebug.ini.erb"
  owner "root"
  group "root"
  mode 0644
  variables({
              "remote_host" => remote_ip
            })
end 
```

并在模板中： **your/cookbook/path/templates/default/xdebug.ini.erb**

```
[xdebug]
zend_extension = "/usr/lib/php/modules/xdebug.so"
xdebug.profiler_append = 0
xdebug.profiler_enable = 0
xdebug.profiler_enable_trigger = 0
xdebug.profiler_output_dir = "/tmp"
xdebug.profiler_output_name = "cachegrind.out.%t-%s"
xdebug.remote_enable = 1
xdebug.remote_handler = "dbgp"
xdebug.remote_host = <%= @remote_host %>
xdebug.trace_output_dir = "/tmp"
xdebug.max_nesting_level = 200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T21:07:31.090

我查看了**ohai**的 json 输出，并在提示之前寻找初始**vagrant ssh**登录输出中显示的内容：

```
$ vagrant ssh
Last login: Tue Sep 29 13:40:10 2015 from 10.0.2.2
vagrant@vagrant:~$ 
```

在 ohai 输出中，我在其他位置找到了 10.0.2.2

```
[:network][:default_gateway] 
```

根据 Draco 的信息，我通过在 ssh 中启动**shef**确认了这一点

```
chef >     node[:network][:default_gateway]
 => "10.0.2.2" 
```

这对我有用，我可以在 bash 中针对我在主机上设置的 python SimpleHTTPServer 手动卷曲。接下来是在厨师中使用它。

这是我在 Vagrantfile 中的网络条目，以防万一这仅适用于我的特定 vagrant 网络配置：

```
config.vm.network "public_network", bridge: "en1: Wi-Fi (AirPort)" 
```

FWIW，使用 Draco 的回答将我指向另一个 IP 地址，这对我不起作用。

# java - 使用Java中的Jfreechart和poi在Excel中创建图表

> ID：14518248
> 
> 赞同：2
> 
> 时间：2013-01-25T08:46:18.040
> 
> 标签：java, jfreechart

这是我得到的错误..

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 3, Size: 1
        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
        at java.util.ArrayList.get(ArrayList.java:322)
        at org.apache.poi.hssf.model.DrawingManager2.getDrawingGroup(DrawingManager2.java:125)
        at org.apache.poi.hssf.model.DrawingManager2.allocateShapeId(DrawingManager2.java:71)
        at org.apache.poi.hssf.record.EscherAggregate.convertPatriarch(EscherAggregate.java:988)
        at org.apache.poi.hssf.record.EscherAggregate.convertUserModelToRecords(EscherAggregate.java:821)
        at org.apache.poi.hssf.record.EscherAggregate.getRecordSize(EscherAggregate.java:508)
        at org.apache.poi.hssf.model.InternalSheet.preSerialize(InternalSheet.java:1567)
        at org.apache.poi.hssf.usermodel.HSSFWorkbook.getBytes(HSSFWorkbook.java:1285)
        at org.apache.poi.hssf.usermodel.HSSFWorkbook.write(HSSFWorkbook.java:1205)
        at NewTest.main(NewTest.java:94) 
```

这是代码..

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.util.Iterator;

import org.apache.poi.hssf.usermodel.HSSFClientAnchor;
import org.apache.poi.hssf.usermodel.HSSFPatriarch;
import org.apache.poi.hssf.usermodel.HSSFPicture;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.ClientAnchor;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.util.IOUtils;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;
import org.jfree.data.general.DefaultPieDataset;
public class NewTest {  
        public static void main(String[] args) throws Exception{

                /* Read Excel and the Chart Data */
                FileInputStream chart_file_input = new FileInputStream("/home/prasanna/jfree.xls");
                /* Read data into HSSFWorkbook */
                HSSFWorkbook my_workbook = new HSSFWorkbook(chart_file_input);
                /* This worksheet contains the Pie Chart Data */
                HSSFSheet my_sheet = my_workbook.getSheetAt(0);
                /* Create JFreeChart object that will hold the Pie Chart Data */
                DefaultPieDataset my_pie_chart_data = new DefaultPieDataset();
                /* We now iterate over the Excel Workbook data and Populate Pie Chart Data */
                /* Create an Iterator object */
                Iterator<Row> rowIterator = my_sheet.iterator(); 
                /* Loop through worksheet data and populate Pie Chart Dataset */
                String chart_label="a";
                Number chart_data=0;            
                while(rowIterator.hasNext()) {
                        //Read Rows from Excel document
                        Row row = rowIterator.next();  
                        //Read cells in Rows and get chart data
                        Iterator<Cell> cellIterator = row.cellIterator();
                                while(cellIterator.hasNext()) {
                                        Cell cell = cellIterator.next(); 
                                        switch(cell.getCellType()) { 
                                        case Cell.CELL_TYPE_NUMERIC:
                                                chart_data=cell.getNumericCellValue();
                                                break;
                                        case Cell.CELL_TYPE_STRING:
                                                chart_label=cell.getStringCellValue();
                                                break;
                                        }
                                }
                /* Add data to the data set */          
                my_pie_chart_data.setValue(chart_label,chart_data);
                }               
                /* Create a logical chart object with the chart data collected */
                JFreeChart myPieChart=ChartFactory.createPieChart("Excel Pie Chart Java Example",my_pie_chart_data,true,true,false);
                /* Specify the height and width of the Pie Chart */
                int width=640; /* Width of the chart */
                int height=480; /* Height of the chart */
                float quality=1; /* Quality factor */
                /* We don't want to create an intermediate file. So, we create a byte array output stream 
                and byte array input stream
                And we pass the chart data directly to input stream through this */             
                /* Write chart as JPG to Output Stream */
                ByteArrayOutputStream chart_out = new ByteArrayOutputStream();          
                ChartUtilities.writeChartAsJPEG(chart_out,quality,myPieChart,width,height);
                /* We now read from the output stream and frame the input chart data */
                InputStream feed_chart_to_excel=new ByteArrayInputStream(chart_out.toByteArray());
                byte[] bytes = IOUtils.toByteArray(feed_chart_to_excel);
                /* Add picture to workbook */
                int my_picture_id = my_workbook.addPicture(bytes, Workbook.PICTURE_TYPE_JPEG);
                /* We can close Piped Input Stream. We don't need this */
                feed_chart_to_excel.close();
                /* Close PipedOutputStream also */
                chart_out.close();
                /* Create the drawing container */
                HSSFPatriarch drawing = my_sheet.createDrawingPatriarch();
                /* Create an anchor point */
                ClientAnchor my_anchor = new HSSFClientAnchor();
                /* Define top left corner, and we can resize picture suitable from there */
                my_anchor.setCol1(4);
                my_anchor.setRow1(5);
                /* Invoke createPicture and pass the anchor point and ID */
                HSSFPicture  my_picture = drawing.createPicture(my_anchor, my_picture_id);
                /* Call resize method, which resizes the image */
                my_picture.resize();
                /* Close the FileInputStream */
                String file = "/home/prasanna/picture.xls";
                   //if(wb instanceof XSSFWorkbook) file += "x";
                FileOutputStream out = new FileOutputStream(file);
                my_workbook.write(out);
                out.close();            
        }
} 
```

# iphone - 如何将 HTML 解析为 XML 并保存到数据库？

> ID：14518252
> 
> 赞同：0
> 
> 时间：2013-01-25T08:46:35.227
> 
> 标签：iphone, xml-database

我想解析一些 HTML 网站信息并将其存储为 XML 作为我的数据库。正如我所看到的，有一个名为 hpple 的解析函数，它只是解析信息而不存储在数据库中，效率不是我所期望的。

# php - PHPUnit 未检测到缺少的参数

> ID：14518253
> 
> 赞同：1
> 
> 时间：2013-01-25T08:46:36.527
> 
> 标签：php, phpunit

我有以下配置：

1.  来自 xampp 1.7.7 的 PHP 5.3.8
2.  PHPUnit 3.7.13。

我正在从命令行和 Windows XP 上的 Netbeans 运行我的测试。这是我的代码。

```
class Wrapper
{
    public function wrap($text, $maxLength) {
        if(strlen($text) > $maxLength)
            return substr($text, 0, $maxLength) . "\n" . substr($text, $maxLength);
        return $text;
    }
}

class WrapperTest extends PHPUnit_Framework_TestCase
{
    protected $wrapper;
    protected function setUp() {
        $this->wrapper = new Wrapper;
    }

    public function testWrap() {
        $text = '';
        $this->assertEquals($text, $this->wrapper->wrap($text));
    }
} 
```

问题是测试通过了，尽管函数显然缺少一个参数。使用 Ubuntu 时，测试按预期失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T16:17:00.170

这是一种可捕获的错误类型。为了捕获错误，您可以创建自定义错误处理程序。请参阅（[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)）。

为了抓住这个。您可以尝试以下方法。

```
class Wrapper
{
    public function wrap($text, $maxLength) {
        if(strlen($text) > $maxLength)
            return substr($text, 0, $maxLength) . "\n" . substr($text, $maxLength);
        return $text;
    }
}

class WrapperTest extends PHPUnit_Framework_TestCase
{
    protected $wrapper;

    protected function setUp()
    {
        set_error_handler(array($this, 'errorHandler'));
    }

    public function errorHandler($errno, $errstr, $errfile, $errline)
    {
        throw new \InvalidArgumentException(
            sprintf(
                'Missing argument. %s %s %s %s',
                $errno,
                $errstr,
                $errfile,
                $errline
            )
        );
    }

    public function testShouldThrowExceptionWhenTheresNoParamPassed()
    {
        $this->setExpectedException('\InvalidArgumentException');
        new Wrapper;
    }
} 
```

# php - 无法使用 PHP 获取 XML 属性值

> ID：14518256
> 
> 赞同：0
> 
> 时间：2013-01-25T08:46:48.720
> 
> 标签：php, xml, xml-parsing, nodes, xmlnode

```
<Pages TotalPages="56" ProductCode="Headline" PubDate="2012-01-31" PubVersion="0" PubSubVersion="0" PageWidth="1622" PageHeight="1902">
              <Page PageNo="1" PageName="" PageType="" Section="Section" ThumbnailPath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/1/Pv001.png" ImagePath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/1/Pg001_142_p.jpg" OverlayFullPath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/1/Pg001_142_t.png" PreviewPath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/1/Pg001.png" IsPreview="true" ImageHeight="1902" ImageWidth="1622" WithResource="true" /> 
              <Page PageNo="2" PageName="" PageType="" Section="Section" ThumbnailPath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/2/Pv002.png" ImagePath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/2/Pg002_142_p.jpg" OverlayFullPath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/2/Pg002_142_t.png" PreviewPath="http://203.80.1.28/FlippingBook/Dev/Frontend/demo/Headline/2012/12/20/0/0/A/Content/2/Pg002.png" IsPreview="true" ImageHeight="1902" ImageWidth="1622" WithResource="true" /> 
</Pages> 
```

**PHP：**

```
$xml = simplexml_load_file($dir) 
       or die("Error: Cannot create object");
//$fileList = array();

foreach($xml->children() as $Pages){
    foreach($Pages->children() as $Page => $page){
    $fileLink = $page['ThumbnailPath'];
    echo $fileLink;
    }
} 
```

我要得到的是来自节点“Page”的 ThumbnailPath，我遍历 Pages 和 page 但结果一无所获，如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:55:00.490

很容易修复

```
$xml = simplexml_load_file("test.xml")
       or die("Error: Cannot create object");
//$fileList = array();

foreach($xml->children() as $Pages){
    print_r($Pages['ThumbnailPath']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:58:42.563

您不必遍历“Pages”，因为它已经是 xml 根元素。所以你可以省略第二个循环：

```
 $xml = simplexml_load_string($string) or die("Error: Cannot create object");
 //$fileList = array();

foreach($xml->children() as $Page){
    $fileLink = $Page['ThumbnailPath'];
    echo $fileLink;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:00:23.540

试试这个：

```
foreach($xml->children() as $Pages){
    echo $Pages['ThumbnailPath'][0].'<br>';
} 
```

# wordpress - 如何使用 Elastislide - wordpress 中的响应式 jQuery Carousel 插件

> ID：14518261
> 
> 赞同：0
> 
> 时间：2013-01-25T08:47:17.267
> 
> 标签：wordpress, jquery-plugins, twitter-bootstrap

我是 wordpress 新手，我想在我的网站中使用这个 jquery 插件。我开始在我的 wordpress 插件列表中添加它，但它不起作用，因为它不是插件，这就是为什么我想知道我如何在我的网站中使用它意味着我必须在我的主题中更改哪些文件。我应该必须更改我的 header.php 文件？请帮帮我。

这是我的 header.php 文件：

```
<?php
/** header.php
 *
 * Displays all of the <head> section and everything up till </header>
 *
 * @author      Konstantin Obenland
 * @package     The Bootstrap
 * @since       1.0 - 05.02.2012
 */

?>
<!DOCTYPE html>
<html class="no-js" <?php language_attributes(); ?>>
    <head>
        <?php tha_head_top(); ?>
        <link rel="profile" href="http://gmpg.org/xfn/11" />
        <meta charset="<?php bloginfo( 'charset' ); ?>" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title><?php wp_title( '&laquo;', true, 'right' ); ?></title>

        <?php tha_head_bottom(); ?>
        <?php wp_head(); ?>
    </head>

    <body <?php body_class(); ?>>
        <div class="container">
            <div id="page" class="hfeed row">
<?php if ( !function_exists('dynamic_sidebar') || !dynamic_sidebar("widgetized-page-top") ) : ?>

                    <?php endif; ?>
<div class="span8"> 

    <?php if ( the_bootstrap_options()->navbar_searchform ) {
                                            the_bootstrap_navbar_searchform();
                                        } ?> 
</div>
                <?php tha_header_before(); ?>
                <header id="branding" role="banner" class="span12">
                    <?php tha_header_top();
                    wp_nav_menu( array(
                        'container'         =>  'nav',
                        'container_class'   =>  'subnav clearfix',
                        'theme_location'    =>  'header-menu',
                        'menu_class'        =>  'nav nav-pills pull-right',
                        'depth'             =>  3,
                        'fallback_cb'       =>  false,
                        'walker'            =>  new The_Bootstrap_Nav_Walker,
                    ) ); ?>
                    <hgroup>
                        <h1 id="site-title">
                            <a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home">
                                <span><?php bloginfo( 'name' ); ?></span>
                            </a>
                        </h1>
                        <h2 id="site-description"><?php bloginfo( 'description' ); ?></h2>
                    </hgroup>

                    <?php if ( get_header_image() ) : ?>
                    <a id="header-image" href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home">
                        <img src="<?php header_image(); ?>" width="<?php echo get_custom_header()->width; ?>" height="<?php echo get_custom_header()->height; ?>" alt="" />
                    </a>
                    <?php endif; // if ( get_header_image() ) ?>

                    <nav id="access" role="navigation">
                        <h3 class="assistive-text"><?php _e( 'Main menu', 'the-bootstrap' ); ?></h3>
                        <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'the-bootstrap' ); ?>"><?php _e( 'Skip to primary content', 'the-bootstrap' ); ?></a></div>
                        <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'the-bootstrap' ); ?>"><?php _e( 'Skip to secondary content', 'the-bootstrap' ); ?></a></div>
                        <?php if ( has_nav_menu( 'primary' ) OR the_bootstrap_options()->navbar_site_name OR the_bootstrap_options()->navbar_searchform ) : ?>
                        <div <?php the_bootstrap_navbar_class(); ?>>
                            <div class="navbar-inner">
                                <div class="container">
                                    <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
                                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </a>
                                    <?php if ( the_bootstrap_options()->navbar_site_name ) : ?>
                                    <span class="brand"><?php bloginfo( 'name' ); ?></span>
                                    <?php endif;?>
                                    <div class="nav-collapse">
                                        <?php wp_nav_menu( array(
                                            'theme_location'    =>  'primary',
                                            'menu_class'        =>  'nav',
                                            'depth'             =>  3,
                                            'fallback_cb'       =>  false,
                                            'walker'            =>  new The_Bootstrap_Nav_Walker,
                                        ) ); 
                                         ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <?php endif; ?>
                    </nav><!-- #access -->
                    <?php if ( function_exists( 'yoast_breadcrumb' ) ) {
                        yoast_breadcrumb( '<nav id="breadcrumb" class="breadcrumb">', '</nav>' );
                    }
                    tha_header_bottom(); ?>
                </header><!-- #branding --><?php
                tha_header_after();

/* End of file header.php */
/* Location: ./wp-content/themes/the-bootstrap/header.php */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:38:21.390

在functions.php中需要包含jQuery插件的js和css文件：

```
wp_enqueue_style ('your_plugin_css_handler_name', get_bloginfo('template_url') . '/css/jquery-plugin-css-file.css', '', '1.0');
wp_enqueue_script( 'your_plugin_js_handler_name', get_bloginfo('template_url') . '/js/jquery-plugin-js-file.js', array('jquery'), '1.0', false ); 
```

更改上面的行，以便它们与您的插件一起使用。

现在您需要添加到 header.php 代码，该代码将变为轮播，并添加额外的 .js 文件，该文件将为元素标注插件。

```
wp_enqueue_script( 'theme_js', get_bloginfo('template_url') . '/js/theme.js', array('jquery'), '1.0', false ); 
```

将插件标注放在 theme.js 文件中，一切都应该工作。

对于 jquery 循环代码如下所示：functions.php

```
wp_enqueue_script( 'cycle_js', get_bloginfo('template_url') . '/js/jquery.cycle.all.js', array('jquery'), '2.9', false );
wp_enqueue_script( 'theme_js', get_bloginfo('template_url') . '/js/theme.js', array('jquery'), '1.0', false ); 
```

和theme.js：

```
jQuery(function($){
    $('#headerrotator').cycle();
}) 
```

#headerrotator 是一个元素，用于保存元素以循环它们。

# python - 在 pylibmc 中启用 buffer_request 行为的正确方法是什么？

> ID：14518263
> 
> 赞同：1
> 
> 时间：2013-01-25T08:47:25.193
> 
> 标签：python, memcached

如果我运行以下脚本，它会在设置时引发异常。

缓冲测试.py

```
import pylibmc
mc = pylibmc.Client(['localhost:11211'], behaviors={'buffer_requests': True})
mc.set('key1', 'value1')
print 'Reaching here'
print mc.get('key1') 
```

输出 ：

```
root@shady:~# python buffertest.py 
Traceback (most recent call last):
  File "buffertest.py", line 3, in <module>
    mc.set('key1', 'value1')
_pylibmc.MemcachedError: error 32 from memcached_set: SUCCESS 
```

如果我捕捉到那个异常，那么 get 会抛出一个错误：

```
import pylibmc
mc = pylibmc.Client(['localhost:11211'], behaviors={'buffer_requests': True})
try:   
        mc.set('key1', 'value1')
except:
        pass
print 'Reaching here'
print mc.get('key1') 
```

输出：

```
root@shady:~# python buffertest.py
Reaching here
Traceback (most recent call last):
  File "buffertest.py", line 8, in <module>
    print mc.get('key1')
_pylibmc.MemcachedError: error 47 from memcached_get(key1): SERVER HAS FAILED AND IS    DISABLED UNTIL TIMED RETRY 
```

我是否以错误的方式使用这种行为？我对这种行为的理解是 - 集合将在客户端缓冲，并在第一次到达时刷新到服务器。为什么会导致服务器错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:31:17.187

尝试将二进制选项设置为 False：

```
mc = pylibmc.Client(['localhost:11211'], binary=False, behaviors={'buffer_requests': True}) 
```

# database - Cassandra 和小页面？

> ID：14518269
> 
> 赞同：0
> 
> 时间：2013-01-25T08:47:53.640
> 
> 标签：database, cassandra, forum, ipb

Cassandra 稳定版本于 2013 年 1 月 2 日发布，我认为 IPB 会紧随其后，但我不知道这是否是在每个公共论坛上使用 cassandra 的好选择。cassandra 是否只提供给 Facebook 的 Twitter 等页面？我不知道将来尝试对小页面使用 cass 是否是一个好的决定。有人可以说 cassandra 是否是具有以下统计信息的页面的不错选择？

*   1958104 个帖子
*   41262注册用户
*   一天内在线人数最多的是 1212 人，最后一次是在 2010 年 4 月 11 日。
*   今日在线会员：138

IPB 论坛已有 8 年历史。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:44:35.893

有了这样的站点配置文件，您可能会更好地使用 MySQL 或类似的东西。如果您想要更多的文档或 KV 存储，您还可以查看其他一些技术，例如 MongoDB 或 Couchbase。它们比 Cassandra 更容易学习和操作，并且肯定会处理您的负载。

# javascript - Richfaces vs Primefaces：无法读取未定义的属性“请求”

> ID：14518270
> 
> 赞同：1
> 
> 时间：2013-01-25T08:47:59.427
> 
> 标签：javascript, primefaces, richfaces, compatibility

我正在 JSF 中开发一个使用 Richfaces 4.3.0 CRI 和 Primefaces 3.4.2 的 Web 应用程序。我刚刚通知在任何使用 Primefaces 组件的页面上，我都可以在 Javascript 控制台中看到这个错误发生：

> 未捕获的类型错误：无法读取未定义的 packed.js:3243 的属性“请求”

但是 packed.js 文件是 Richfaces 库包中包含的文件。但是在每个不使用 Primefaces 组件的页面上，都不会发生此错误。

问题是有时，这个错误会使其他一些 Javascript 代码停止工作（其他函数被中止）。

我想知道它是否存在修复它的方法或解决方法？我只是想避免其他脚本因为这个错误而中止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:28:57.567

最后，很明显，这是一个兼容性问题，因为 Richfaces 和 Primefaces 不使用相同版本的 jquery.js。但是感谢这篇文章：[努力实现 RichFaces(4.2.2-Fianl) / PrimeFaces(3.3) 兼容性](http://yyq2007aa.blog.163.com/blog/static/44181609201242794212780/)，我解决了这个问题。但它似乎只适用于文章中使用的 RichFaces 和 Primefaces 版本。不是最新版本。

# php - 提交按钮上的 PHP 函数不起作用（使用 REQUEST_URI）

> ID：14518286
> 
> 赞同：0
> 
> 时间：2013-01-25T08:49:08.647
> 
> 标签：php, wordpress, email, post

我不明白为什么我写的这个简单的邮件 php 函数不起作用。它安装在 Wordpress 页面中（这就是我使用 REQUEST_URI 而不是 PHP_SELF 的原因）。我只是一个php初学者，我忘记了什么吗？

```
<?php
echo '<form method="post" action="';
echo $_SERVER['REQUEST_URI'];
echo '"><input type="image" name="blabla" src="/image-path/image.png"></form>';
    if ($_POST['blabla'])
    { 
        $to = 'email@emailadress.com';
    $subject = 'Test mail';
    $message = 'Test.';
    mail($to,$subject,$message);
    echo "Email sent.";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:54:43.213

试试 if(isset($_POST['blabla_x']) 或 isset($_POST['blabla']))

因为，当您发布图像时，某些浏览器会发送您按下的点。

# php - 在多文件上传方面需要一些帮助

> ID：14518289
> 
> 赞同：0
> 
> 时间：2013-01-25T08:49:19.643
> 
> 标签：php, mysql, file-upload

我有这个代码

```
if(move_uploaded_file($_FILES['file1']['tmp_name'], $upload_directory . $filename)){
//http file
    $fullurl = $siteurl.'/'.$upload_directory.'/'.$filename;
    //insert db
    mysql_query("insert into up_guest(name,type,time,ip) values('$filename','$filetype',$time,'$ip')");
    print "<br><br>";
    print "فایل با موفقیت آپلود شد!";
    print "<br><br>";
    print "<font color='black'>Uploaded File is {$filename} and its size is {$_FILES['file1']['size']} bytes </font>";
}//file upload she
else{
    echo $_FILES['file1']['error'];
} 
```

如果它运行并成功上传文件，没有任何错误
ANDDDDDDDDDDDDD 也运行 !!!
文件错误为 0 ！
问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:54:33.820

多文件上传数组 move_uploaded_file($_FILES['file1']['tmp_name'], $upload_directory . $filename) 这不是缺少'/'

```
move_uploaded_file($_FILES['file1']['tmp_name'], $upload_directory .'/' . $filename) 
```

我看到你有使用'/'的下一行代码

# c# - 如何创建具有单个属性的对象，直到运行时才知道其名称

> ID：14518290
> 
> 赞同：2
> 
> 时间：2013-01-25T08:49:23.230
> 
> 标签：c#, dynamic

我需要创建一个具有单个属性的非常简单的对象。问题是这个属性的名称是可变的，直到运行时才知道。

我正在使用 c#。

我一直在环顾四周，发现了很多看起来很冗长的方法来做我想做的事情（例如[，在运行时添加属性](https://stackoverflow.com/questions/6166236/add-properties-at-runtime)）。但是，这种类型的解决方案似乎有点矫枉过正，所以我真的希望有一种更简单的方法。

**为什么？**

我正在开发一个 WPF 应用程序。在某些情况下，我有想要处理空值的组合框。我已经在这里找到了一个很棒的解决方案：http: [//philondotnet.wordpress.com/2009/09/18/how-to-select-null-none-in-a-combobox-listbox-listview/](http://philondotnet.wordpress.com/2009/09/18/how-to-select-null-none-in-a-combobox-listbox-listview/)

但是，此解决方案的主要问题（如第二条评论所述）是，如果设置了 Selector 的 DisplayMemberPath，则空值文本显示为空白。解决这个问题的方法是简单地修改 NullItem 以返回一个具有属性的对象，其中属性的名称是 DisplayMemberPath，值是空值的字符串表示形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:52:47.637

你可以考虑使用

[扩展对象](http://msdn.microsoft.com/it-it/library/system.dynamic.expandoobject.aspx)

考虑到 ExpandoObject 实现了`IDictionary`，您可以将其转换为：

```
var expando = new System.Dynamic.ExpandoObject(); 
var expandoDic= expando as IDictionary<String, Object>;

expandoDic["Name"] = "Jane";
expandoDic["Surname"] = "Eyre";     
var name  = expandoDic["Name"]; 
var surname = expandoDic["Surname"]; 
var book = name + " " + surname; 
```

这将是

《简爱》，果然不出所料；

# backbone.js - 充当链表和持久模型的主干集合

> ID：14518293
> 
> 赞同：0
> 
> 时间：2013-01-25T08:49:37.683
> 
> 标签：backbone.js, collections, stateless

您好，我需要您在以下方面的帮助：

我已经定义了作为链表的主干集合：集合中的每个模型都有对其前身和后继者的引用。

将新模型插入到集合中会触发一个事件，该事件会更新前任模型和后继模型以引用新插入的模型并将这些模型存储到数据库中。

模型的顺序是关键，应用程序必须保持无状态。

问题：当一个紧张的用户快速按下添加按钮时，我发现数据库显示了更多的模型实例，然后在我的应用程序中找到了。（我预计这是由于对数据库的异步 AJAX 调用）

我考虑过覆盖模型保存函数并在一个 AJAX 调用中执行模型更新，通过回调将模型保存调用排队。

但是，我认为我在找错树，并希望有更好的解决方案来解决这个问题。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:15:29.217

最简单的解决方案是禁用`add`按钮，直到上一个请求完成。假设您有一个带有`#add`按钮的视图：

```
addClicked: function(e) {
  var $add = this.$("#add");
  var model = new Model(this.parseAttributesFromView()); //or something...

  //disable add button
  $add.attr('disabled', true);

  model.save().done(function() {
    //enable add button after save succeeds
    $add.attr('disabled', false);
  });
} 
```

或者，您可以单击事件处理程序，使其每毫秒[`debounce`](http://underscorejs.org/#debounce)只能执行一次：`n`

```
//only allow add once every 100ms
addClicked: _.debounce(function() {
  //..
}, 100, true) 
```

无论如何，如果您可以在视图级别解决问题，那么实现基于数据包或队列的解决方案似乎有点过头了。

# ajax - 在 ajax 调用特定操作期间跳过 RenewTicketIfOld

> ID：14518294
> 
> 赞同：2
> 
> 时间：2013-01-25T08:49:43.980
> 
> 标签：ajax, asp.net-mvc-4, forms-authentication

我使用`setInterval`ajax 调用每分钟检查一次新消息。这个调用扩展了身份验证cookie（因为我将slidingExpiration 设置为true），因此身份验证永不过期。

[这个问题](https://stackoverflow.com/questions/6589755/prevent-ajax-timer-control-request-from-extending-formsauthentication-ticket)有类似的问题，但解决方案是针对类 .net 项目的，我看不出如何将它应用到我的 MVC 项目中。

如果一个解决方案是一种属性的形式`[DoNotExtendAuthentication]`，我可以在一个动作上拍打，那就太好了，但任何帮助都是值得赞赏的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:54:46.653

```
public class DoNotExtendAuthenticationAttribute : ActionFilterAttribute
{
    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        filterContext.HttpContext.Response.Cookies.Remove(
            FormsAuthentication.FormsCookieName
        );
    }
} 
```

进而：

```
[Authorize]
[DoNotExtendAuthentication]
public ActionResult SomeAction()
{
    ...
} 
```

# asp.net - 如何将 HTML/asp 代码转换为 ruby 字符串

> ID：14518296
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:49:54.033
> 
> 标签：asp.net, html, ruby

有什么方法可以轻松地将 HTML/asp 代码转换为格式，以便可以用作字符串？

所以，就像有一些 HTML/asp 代码一样，我想在 ruby​​ 代码中使用它作为字符串。有没有办法将 HTML 代码转换为 ruby​​ 字符串格式？

或者无论如何我可以制作 ruby​​ 代码的字符串来引用一些 HTML/asp 文件？

编辑：不，我想做的是，我在 HTML 文件中有一些 HTML 代码，我想将它完全用作 ruby​​ 代码中的字符串。

例如，

我有诸如 blahblah 和 asp 之类的代码

然后我想使用与此类似的确切代码：

var = 上面的代码。

但是 HTML/ASP 代码将具有特殊字符，这将使其难以嵌入为字符串。那么有没有办法将整个块用作字符串而不会遇到问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:57:45.197

这会检索一个网页并将其存储到一个字符串中：

```
require 'open-uri'
html = open('http://www.example.com').read
puts html[0, 60] 
```

哪个输出：

```
<!doctype html>
<html>
<head>
    <title>Example Domain</title> 
```

# javascript - 变量作为数组的值 (array[variable])

> ID：14518298
> 
> 赞同：-2
> 
> 时间：2013-01-25T08:49:59.103
> 
> 标签：javascript

我正在尝试编写一个函数，该函数从定义的数组中调用一个值：

```
var categories = [];
categories[caller1] = "asasd";
categories[caller2] = "asasd";
categories[caller3] = "asasd";

function getNewItem(caller){
    $("#"+categories[caller]).show();
} 
```

所以基本问题是，这不起作用：

```
function(VARIABLE){
    $("#"+ categories[VARIABLE]).show();
} 
```

这段代码被缩减到最少以显示问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:57:31.613

我想看看 caller1、caller2 和 caller3 的定义是什么。我假设，因为我确信我们都是，它们是整数。因此，它看起来像这样：

```
var caller1 = 0
  , caller2 = 1
  , caller3 = 2
;//var

var categories = [];
categories[caller1] = "asasd";
categories[caller2] = "asasd";
categories[caller3] = "asasd";

function getNewItem(caller){ $("#" + categories[caller]).show() } 
```

但我的另一个假设是它们可能是字符串，在这种情况下你做错了。使用对象而不是数组。

```
var caller1 = 'Gary'
  , caller2 = 'John'
  , caller3 = 'Paul'
;//var

var categories = {};
categories[caller1] = "asasd";
categories[caller2] = "asasd";
categories[caller3] = "asasd";

function getNewItem(caller){ $("#" + categories[caller]).show() } 
```

但这甚至可以扩展到函数和数字：

```
var caller1 = function(){ return 'blah' }
  , caller2 = 8
  , caller3 = 'aString'
;//var

var categories = {};
categories[caller1] = "asasd";
categories[caller2] = "asasd";
categories[caller3] = "asasd";

function getNewItem(caller){ $("#" + categories[caller]).show() } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:51:52.310

你必须连接：

```
"#" + categories[caller]
  --^-- 
```

你也有一个数组，但你应该使用一个对象：

```
var categories = {};
categories.caller1 = 'asd';
$("#"+ categories.caller1).show(); 
```

另外，您有一些严重的语法错误，但尝试上面的代码应该可以工作。

# python - 将 Python 程序打包成可执行文件（包括 python？）

> ID：14518299
> 
> 赞同：1
> 
> 时间：2013-01-25T08:50:10.980
> 
> 标签：python, executable

我已经完成了日志解析脚本，包括一个简单的 GUI，我想知道。是否可以将整个内容打包到一个文件（最好是 .exe）中，该文件甚至可以携带 python 本身，因此它可以从没有安装 python+modules 的站点启动？也许用C包装它？我对编程世界很陌生，因此这个问题听起来很愚蠢。

我曾尝试查看 py2exe 和 pyInstaller，但没有找到将其“全部”打包的方法。脚本是使用 GTK2x 和一些附加模块（dateutil、colorama）在 Python 2.7.3 中编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:43:18.170

你可能想看看**[这个](https://stackoverflow.com/questions/7879465/compiling-python-code-into-a-single-exe)**。你应该知道编译的 python 程序会给你一个巨大的可执行文件（5 或更多 MB），因为它将 python 添加到你的可执行文件中，这意味着即使是一个简单的单行程序（例如：）`print("hello world")`也会给你一个很大的 . exe文件

# jquery - TypeError：“未定义”不是对象（评估“$.browser.msie”）

> ID：14518300
> 
> 赞同：6
> 
> 时间：2013-01-25T08:50:24.253
> 
> 标签：jquery

> **可能重复：**
> [jQuery 最新的 $.browser](https://stackoverflow.com/questions/14505301/jquery-latest-browser)

jQuery 1.9 和 $.browser 出现错误；它为任何 $.browser 返回“未定义”；功能。我做错了什么？

> TypeError：“未定义”不是对象（评估“$.browser.msie”）

我使用以下代码：

```
setTimeout(function(){if($.browser.msie){$('.ovy').animate({top:"0"},ct); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T08:51:38.163

`$.browser`已从[1.9](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)中删除。您可以使用[jQuery Migrate](https://github.com/jquery/jquery-migrate/)获得`$.browser`支持。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-25T09:28:34.880

我这样解决了这个问题

```
if(navigator.appVersion.indexOf("MSIE") !== -1){
    // Only MSIE will evaluate this code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T08:51:54.330

[`$.browser`自 jQuery 1.9 起已被删除](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)。如果你想继续使用它，你需要使用 jQuery[`migrate`](https://github.com/jquery/jquery-migrate/)插件。

# javascript - 验证函数未定义

> ID：14518306
> 
> 赞同：0
> 
> 时间：2013-01-25T08:50:34.117
> 
> 标签：javascript, validation

我创建了一个函数：

```
function createValidatorForForm(id) {
    var formValidator = $(id).validate({
        errorClass:'help-inline',
        errorElement:'p',

        highlight:function (element, errorClass, validClass) {
            $(element.parentNode.parentNode).addClass('error')
        },
        unhighlight:function (element, errorClass, validClass) {
            $(element.parentNode.parentNode).removeClass('error')
        }
    });
    return formValidator;} 
```

然后我以下面的方式在我的代码中使用它：

```
var reportValidator = createValidatorForForm("#report-form");
var areaValidator = createValidatorForForm("#area-form");
var liquidationValidator = createValidatorForForm("#liquidation-form");
var comparableValidator = createValidatorForForm("#comparable-form"); 
```

但是尽管 Firebug 知道 formValidator 并且我可以在调试器中看到它的状态，但他提醒我 reportValidator 和另外三个变量未定义，我无法在我的代码中使用它们：reportValidator.form() 生成错误。但验证本身适用于所有形式。

```
function saveReport() {
if (!comparableValidator.form()){return};
$.ajax({
    url : SAVE_REPORT, // + "?json=" + ko.toJSON(reportModel),
    data : {
        json : ko.toJSON(reportModel)
    }, ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:07:05.067

像这样更改您的代码：

```
 reportValidator = createValidatorForForm("#report-form");
   areaValidator = createValidatorForForm("#area-form");
   liquidationValidator = createValidatorForForm("#liquidation-form");
   comparableValidator = createValidatorForForm("#comparable-form"); 
```

现在`reportValidator`和其他变量是全局的并且在`onDocumentReady`回调函数之外是可见的。如果你把一个`var`变量放在本地，并且只能在`onDocumentReady`回调函数中使用。

# database - 在moodle表单中按下“提交”按钮时将数据插入数据库

> ID：14518311
> 
> 赞同：1
> 
> 时间：2013-01-25T08:50:59.393
> 
> 标签：database, insert, moodle, form-api

我正在使用 Moodle 安装 v 2.3.4，并在 NEWMODULE 插件中创建了一个简单的表单，并使用它输入 2 个字段，名称和描述。

我想插入在数据库中输入的数据，但数据没有被插入。按下提交后，moodle 会查找 modedit.php，它当然不在当前目录中，因此会显示“找不到页面”错误。

代码片段如下所示：make_form.php（表单页面）：

```
<?php
require_once('../../config.php');
require_once('mod_form.php');
require_login($course, true);

echo $OUTPUT->header();
$mform = new mod_testform_mod_form();

if ($mform->is_cancelled()) {

}
else if ($fromform = $mform->get_data()) {

//      print_object($fromform);    
    $record = new stdClass();       
    $record->id='';
    $record->name= $fromform->name;
    $record->description= $fromform->desc;
    $DB=insert_record('testform_details', $record, false);
    $mform->display();
}
else {
    $mform->set_data($toform);
    $mform->display();
    print_footer($course);
}
?> 
```

mod_form.php

```
<?php

defined('MOODLE_INTERNAL') || die();
require_once($CFG->dirroot.'/course/moodleform_mod.php');

class mod_testform_mod_form extends moodleform_mod {

public function definition() {

    $mform = $this->_form;

    $mform->addElement('header', 'general', get_string('general', 'testform'));
    $mform->addElement('text', 'name', get_string('name', 'testform'));
    if (!empty($CFG->formatstringstriptags)) {
        $mform->setType('name', PARAM_TEXT);
    } else {
        $mform->setType('name', PARAM_CLEAN);
    }
    $mform->addRule('name', null, 'required', null, 'client');
    $mform->addHelpButton('name', 'name', 'testform');

//      $this->add_intro_editor();
    $mform->addElement('editor', 'desc', get_string('description','testform'));
    $mform->setType('desc', PARAM_RAW);
    $mform->addHelpButton('desc', 'description', 'testform');

    $buttonarray=array();
    $buttonarray[] = &$mform->createElement('submit', 'submitbutton', get_string('savechanges'));
    $buttonarray[] = &$mform->createElement('reset', 'resetbutton', get_string('reset'));
    $buttonarray[] = &$mform->createElement('cancel');
    $mform->addGroup($buttonarray, 'buttonar', '', array(' '), false);
    $mform->closeHeaderBefore('buttonar');
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T08:56:48.450

根据活动插件，您的文件结构和代码不正确 看看

[http://docs.moodle.org/dev/Activity_modules](http://docs.moodle.org/dev/Activity_modules)

严格按照文档进行。

您收到 modedit.php 的错误，因为您使用的是 mooodleform_mod 的类，并且您不需要在您的文件夹中创建此文件，一旦您根据 mod 插件遵循正确的语法，它的核心文件将自动打开。

如果您只想将数据存储到数据库中，那么使用本地插件比 mod 插件更容易。

谢谢。

# f# - 将列表作为位置参数传递给 F# 中的 Python 等函数

> ID：14518314
> 
> 赞同：3
> 
> 时间：2013-01-25T08:51:18.990
> 
> 标签：f#, iterable, function-parameter

在 Python 中，你可以这样写：

```
def add(a, b, c):
    return a + b + c

list_of_args = [4, 5, 6]
print(add(*list_of_args)) 
```

前面的星号`list_of_args`扩展了可迭代对象，使其元素是参数 a、b 和 c 的值。

你能在 F# 中做类似的事情吗？具体来说，我正在寻找一个好的或惯用的 F# 解决方案，并且不想乱用反射等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T15:35:24.493

你可以这样做：

```
type T =
  static member func([<ParamArray>] args: 'T[]) = printfn "%A" args

T.func(1, 2, 3)

let args = [|1; 2; 3|]
T.func(args) 
```

两者都调用 print `[|1; 2; 3|]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:48:40.467

F# 没有开箱即用的东西——主要是因为 F# 是静态类型语言，因此很难支持类似的模式（列表可能只包含一种类型的值，而函数可能有不同的参数）。

如[链接答案](https://stackoverflow.com/questions/2920094/how-can-i-convert-between-f-list-and-f-tuple)中所述，您可以使用反射来模拟类似的想法，这将是缓慢且不安全的，但如果您有充分的理由这样做，您可以尝试一下。

使用`tupleToList`上一个答案中的函数和一些活动模式，您可以编写：

```
// Converts any F# tuple to a list of objects using reflection
let tupleToList t = 
    if Microsoft.FSharp.Reflection.FSharpType.IsTuple(t.GetType()) 
        then Some (Microsoft.FSharp.Reflection.FSharpValue.GetTupleFields t |> Array.toList)
        else None

// Active pattern that accepts any object and extracts its members
// if it is a tuple or a sequence of values (e.g. list)
let (|Arguments|_|) (a:obj) = 
  match a, tupleToList a with
  | _, Some t -> Some t
  | :? System.Collections.IEnumerable as l, _ -> 
      l |> Seq.cast |> List.ofSeq |> Some
  | _ -> None

// Treat the argument as an int (this may fail)
let (|Int|_|) (a:obj) = match a with :? int as n -> Some n | _ -> None

// Function that assumes to get three integers
let f (Arguments [Int a;Int b;Int c]) = 
  printfn "%d" (a + b + c)

f (1, 2, 3) // Call with tuple
f [1;2;3]   // Call with a list
f (1, "hi", 3, 141.1)  // This will fail at runtime, but compiler allows it :-( 
```

这可能不是非常惯用的 F#，我会尽量避免它，但它可能会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T13:51:56.200

在这里了解您的意图会很有趣。如果您只需要一种将特定函数的参数视为一等值的方法，则可以简单地定义该函数以将值元组作为其单个参数：

```
let f (a, b, c) = a + b + c
let args = (1, 2, 3)
let result = f args 
```

对于方法，这实际上是“默认样式”。唯一的缺点：您不能真正将部分应用程序与此类功能/方法一起使用。

# storage - 当前的 EFI BIOS 是否原生支持 AHCI？

> ID：14518315
> 
> 赞同：0
> 
> 时间：2013-01-25T08:51:24.440
> 
> 标签：storage, hard-drive, bios, efi

我对当前 EFI BIOS 中的 AHCI 支持有一个疑问...

在我们插入外部存储卡（例如PCie-SATA）并连接SATA驱动器之前，BIOS总是会调用该卡上的Option ROM进行一些初始化并在POST期间提供UI进行配置......然后我们可以选择它作为启动设备 ！

我的问题是：（哪种情况是正确的？）

*   **（案例1）**当前的EFI BIOS原生支持这种外部卡的AHCI（这里的***“原生”***是指EFI BIOS不*调用Option ROM*并且可以完全配置这个卡*本身*然后启用AHCI功能......）
*   **（案例 2）**当前的 EFI BIOS 仅原生*支持 Intel 或 AMD 的 AHCI 控制器*
*   **(case 3)**当前的 EFI BIOS*仍然调用 Option ROM* (不管是内部控制器还是外部控制器) 来支持 AHCI 功能

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:52:06.517

实际上它比这更复杂一些。

为了扩展 UEFI 固件环境的功能，开发人员可以编写 UEFI 驱动程序。这些可能被嵌入到固件中*，或者*它们可能是 Option ROM 的一部分，它可能也可能有也可能没有支持 bios 的遗留代码块！

我不认为 UEFI 规范决定了固件环境在硬件设备方面必须或不能支持什么，但是，它确实提供了一个供 UEFI 驱动程序使用的接口。因此，这可以内置到供应商的固件中，也可以存在于选项 rom 中，这取决于他们决定如何做。

有关更多信息，请参阅[驱动程序开发演示文稿的最佳实践](http://www.uefi.org/learning_center/UPFS11_P6_OptionROM_AMI.pdf)，该演示文稿主要侧重于告诉驱动程序开发人员遵循 UEFI 规范，但也提示了驱动程序放置。特别是关于常见 OpROM 组合的页面。

# android - 在 Android 中转换另一种日期格式？

> ID：14518317
> 
> 赞同：0
> 
> 时间：2013-01-25T08:51:28.837
> 
> 标签：android, date-format

我从服务器获取日期作为响应，格式为**MM/DD/YYYY，数字为 8/14/2012**。

现在，我需要将此格式从**8/14/2012**转换为**14 Aug 2012**。

是否可以使用一些内置逻辑来做到这一点，或者我需要准备一些 Java 的自定义代码来获取所需的格式。

请给我建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:54:04.877

根据您的要求使用日期格式。

```
SimpleDateFormat format1 = new SimpleDateFormat("MM/dd/yyyy");
SimpleDateFormat format2 = new SimpleDateFormat("dd MMM yyyy");
Date date = format1.parse("8/14/2012");
System.out.println(format2.format(date));// which prints 14 Aug 2012\. 
```

[你可以在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)找到各种日期格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:56:18.880

```
DateFormat[] formats = new DateFormat[] {
   DateFormat.getDateInstance(),
   DateFormat.getDateTimeInstance(),
   DateFormat.getTimeInstance(),
 };
 for (DateFormat df : formats) {
   System.err.println(df.format(new Date(0)));
 } 
```

# c# - 具有动态过滤条件的报告

> ID：14518320
> 
> 赞同：0
> 
> 时间：2013-01-25T08:51:41.847
> 
> 标签：c#, asp.net, sql-server

我有一个要求，用户将为报告选择三个过滤条件。这些条件可以是表的任何字段。用户将为一个部门定义一次，对于其他部门可能会有所不同。

现在的挑战是使用这些动态标准建立一个查询。除了动态查询之外还有其他方法可以实现吗？如果动态查询是唯一可能的解决方案，我怎样才能最大限度地减少 SQL 注入。

我会很感激任何帮助。

## 编辑

我实际上正在寻找一种方法来获取设置为过滤条件的字段及其值。我们正在使用 SP。

现在我应该传递列名及其值还是有更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:06:42.470

尝试这个：

```
WHERE
      (Col1 = @Col1Value OR @Col1Value IS NULL)
  AND (Col2 = @Col2Value OR @Col2Value IS NULL)
  AND (Col3 = @Col3Value OR @Col3Value IS NULL)
..... 
```

然后，您可以为未选择的列传递实际（选择的）值或 DBNull.Value。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:59:15.983

```
AND (@variable1 = '-1' OR column = @variable1)
AND (@variable2 = '-1' OR column = @variable2)
AND (@variable3 = '-1' OR column = @variable3) 
```

这是另一种尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:04:20.003

我不确定你的意思

> 这些条件可以是表的任何字段。用户将为一个部门定义一次，对于其他部门可能会有所不同。

首先，访问数据库的方式有很多种。你如何读/写你的数据？

*   ADO.Net
*   休眠
*   实体框架
*   其他？

至于我自己，我只知道NHibernate。在这种情况下，我将创建一个所谓的查询类，并将所需的过滤器作为属性。该类本身将在内部创建 HQL（或 ICriteria），使用参数以避免任何注入。或者也有可能创建一个存储过程，将过滤器作为参数并返回一个视图。

还是我完全错过了这里的重点？

# java - 不调用 jsf 中的 setter 方法

> ID：14518328
> 
> 赞同：0
> 
> 时间：2013-01-25T08:52:04.793
> 
> 标签：java, jsf, file-upload, jsf-2, myfaces

我正在研究 javas 服务器的面孔。我使用 User.java 类作为模型，UserController 作为控制器，使用 index.xhtml,ViewProfile,xhtml 作为视图。我跟踪了以下代码，我观察到 setter 方法 set setUploadedFile(UploadedFile file){} 没有调用。而其他两个 setter 正在调用。它给出了 NullPointerException。是什么原因 ？我没有得到。这是代码

用户控制器.java

```
@Named("controller")
@RequestScoped

public class UserController implements Serializable
{
    private User user=new User();   

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String submit() throws IOException ,SQLException ,ClassNotFoundException, InstantiationException, IllegalAccessException
    {
        String fileName = FilenameUtils.getName(user.getUploadedFile().getName());
        byte[] bytes = user.getUploadedFile().getBytes();
        int index=fileName.indexOf('.');
        String extension=fileName.substring(index);
        File file;
        String path;
        path = "C:/Users/";
        if(extension.equalsIgnoreCase(".jpg")||extension.equalsIgnoreCase(".jpeg")||extension.equalsIgnoreCase(".png")||extension.equalsIgnoreCase(".gif")||extension.equalsIgnoreCase(".tif"))
        {
            file=new File(path);      
            if(!file.exists())
            {
                file.mkdir();                
            }
            path=file+"/"+fileName;
            FileOutputStream outfile=new FileOutputStream(path);           
            outfile.write(bytes);
            outfile.close();  
            PreparedStatement stmt;            
            Connection connection;
            String url="jdbc:mysql://localhost:3306/userprofile";
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            connection = DriverManager.getConnection(url, "root", "mysql"); 
            stmt = connection.prepareStatement("insert into table_profile values('"+user.getUserName()+"','"+user.getUserId()+"','"+path+"')");                                 
            stmt.executeUpdate();
            connection.close(); 
            return "SUCCESS";
        }
        else
        {
            return "fail";
        }              
    }
} 
```

用户.java

```
import org.apache.myfaces.custom.fileupload.UploadedFile;

public class User implements java.io.Serializable
{    
    private String userName;

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        System.out.println("in setter of username");
        this.userName = userName;
    }

    private String userId;

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
        System.out.println("in setter of userid");
    }

    private UploadedFile uploadedFile;

    public UploadedFile getUploadedFile()
    {
        return uploadedFile;
    }

    public void setUploadedFile(UploadedFile uploadedFile) 
    {
        this.uploadedFile = uploadedFile;
        System.out.println("in setter of upload");
    }
} 
```

索引.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk">

    <h:head>
        <title>Profile Demo</title>        
    </h:head>
    <h:body>

        <h:form>
            <h:panelGrid columns="2">

                <h:outputLabel for="userId">User Id</h:outputLabel>
                <h:inputText id="userId" value="#{controller.user.userName}" required="true"></h:inputText>

                <h:outputLabel for="username">Username</h:outputLabel>
                <h:inputText id="username" value="#{controller.user.userId}" required="true"></h:inputText>

               <h:outputLabel for="photo">Profile Picture</h:outputLabel>
               <t:inputFileUpload value="#{controller.user.uploadedFile}"  required="true"></t:inputFileUpload>

               <h:commandButton value="Register" action="#{controller.submit()}"></h:commandButton>            
          </h:panelGrid> 
        </h:form>

    </h:body> 

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:58:03.030

```
<h:form> 
```

在这里，您忘记设置正确的表单编码类型。

因此，默认值`application/x-www-form-urlencoded`意味着所有请求参数名称和值都以查询字符串格式（本质上是一个`String`！）发送。对于上传的文件，只会发送文件名，不会发送文件内容。这就是为什么你最终没有得到具体的`File`。

您需要设置正确的表单编码类型。

```
<h:form enctype="multipart/form-data"> 
```

这样，请求参数名称和值以不同且更灵活的格式发送，允许包含二进制数据，例如文件内容。但是，标准 JSF 不支持这种格式，这就是为什么您需要注册一个 servlet 过滤器来解析它并将其转换为通常的请求参数，以便 JSF 可以继续工作。

```
<filter>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

### 也可以看看：

*   [JSF 2.0 文件上传](https://stackoverflow.com/questions/5418292/jsf-2-0-file-upload/5424229#5424229)

# delphi - 在自定义 TShape 上设置宽度/高度

> ID：14518329
> 
> 赞同：0
> 
> 时间：2013-01-25T08:52:18.847
> 
> 标签：delphi, delphi-xe2

我已经像这样创建了一个新单元，它应该是一个自定义的 TShape。

```
unit MachineShape;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, extctrls,myDataModule,Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type

TMachine = class(TShape)
     count : Integer;
  private
    { Private declarations }
  public
    { Public declarations }
    procedure PlaceShape(sizeW,sizeH :integer; name, order,asset : string);
  end;
implementation

    Procedure PlaceShape(sizeW,sizeH :integer; name, order,asset : string);
    begin

    end;

end. 
```

接下来我将其传递给程序

```
MachineShape.TMachine.PlaceShape(44,49,'CM402','first','123/33/123'); 
```

如何在程序中将形状大小设置为 44 宽和 49 高？

我试过做 TMachine.Width 但它不起作用？谢谢格伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:56:39.923

您已声明`PlaceShape`为实例方法，因此需要这样实现它：

```
Procedure TMachine.PlaceShape(sizeW,sizeH :integer; name, order,asset : string);
begin
  Width := sizeW;
  Height := sizeH;
  ....
end; 
```

你声明了一个函数

```
Procedure PlaceShape(...); 
```

那不是类的方法。

这个问题表明您缺少对 Delphi 对象模型的一些理解。我建议您参考[语言指南的相关部分](http://docwiki.embarcadero.com/RADStudio/XE3/en/Methods)来填写缺失的知识。

我还建议您为尺寸参数使用不同的名称。您应该使用`AWidth`and`AHeight`以便将来的代码读者清楚这些参数将用于设置相应的形状属性。

# ios - 如何为 iOS 创建 Google Maps SDK API 密钥

> ID：14518333
> 
> 赞同：-2
> 
> 时间：2013-01-25T08:52:49.433
> 
> 标签：ios, google-maps, xcode6, google-maps-sdk-ios

我决定使用适用于 iOS 的 Google Maps SDK。有通过 Google APIs Console 获取 API 密钥的说明：

1.  在 Google API 控制台中创建一个 API 项目。
2.  在您的 API 项目中选择服务窗格，然后启用适用于 iOS 的 Google Maps SDK。这将显示 Google 地图服务条款。
3.  在控制台中选择 API Access 窗格，然后单击 Create new iOS key。
4.  输入应用程序的 .plist 文件中列出的一个或多个包标识符，例如 com.example.myapp。
5.  单击创建。
6.  在 API 访问页面中，找到 iOS 应用程序的密钥（带有捆绑标识符）部分并记下或复制 40 个字符的 API 密钥。

但我在**Services**中没有**Google Maps SDK for iOS**这样的东西。Google 是否不再支持 iOS API 密钥？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T04:48:42.957

来自[https://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start)：

> 重要提示：SDK 可供下载，您可以注册以访问 API 密钥。在您注册 API 密钥之前，您的 Google 帐户必须能够访问 Google Maps SDK for iOS。当 API 密钥可用时，我们会与您联系。

因此，您需要注册，然后等到 Google 回复您（这可能需要很长时间）。

**更新：**

看起来 SDK 现在可供所有人使用。**

# iphone - 检查 NSArray 中的自定义对象有哪个索引

> ID：14518336
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:53:06.810
> 
> 标签：iphone, ios, objective-c, nsarray

这里有一个非常简单的问题。我知道你如何检查数组中是否存在 NSString，我这样做是这样的：

```
if ([dataArray containsObject:paymentMethodString]) 
```

但除了检查它是否*存在*之外，我还想找出数组中相应元素的*索引。*你如何在 Objective-C 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:54:20.117

你应该使用

```
NSUInteger index = [dataArray indexOfObject:your_object]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T08:55:43.983

```
NSUInteger index = [dataArray indexOfObject:paymentMethodString];

if( index != NSNotFound ) {

    //the object is present at the index
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T08:54:47.853

尝试这个：

```
[dataArray indexOfObject:paymentMethodString] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T08:56:14.560

使用 NSArray 方法：

```
- (NSUInteger)indexOfObject:(id)anObject 
```

像这样：

```
NSUInteger myIndex = [dataArray indexOfObject:paymentMethodString]; 
```

# struts - 无法使用 struts 从 jsp 页面获取值到 ActionForm.java

> ID：14518338
> 
> 赞同：0
> 
> 时间：2013-01-25T08:53:18.590
> 
> 标签：struts, struts-1

当从下拉列表中选择**其他**选项时，我编写了一个代码来显示一个文本框。这个功能如下：（我没有提到下拉列表代码，如果需要请告诉我）

```
function showfield(name)
    {
        if(name=='Other')document.getElementById('div1').innerHTML='<input type="text" property="otherCategory" size="25" />';

        else document.getElementById('div1').innerHTML='';
    } 
```

我正在使用 Struts 框架，并在 registrationForm.java 中为**otherCategory**编写了 getter/setter 。但是在名为 registrationFormAction.java 的 actionForm 中，提交表单后，值并没有传递给 action 表单。我能得到的其他值。意味着我无法通过`registrationForm.getOtherCategory()`registrationFormAction.java 获取值。

对于其他领域，我将代码编写为

```
<html:text property="Name" size="25"> 
```

我也尝试过使用，但是当我使用**name="otherCategory"**`<input type="text" name="otherCategory"/>`时，我不确定如何将值传递给操作表单 registrationForm.java 。希望我能够解释我的问题，希望有人的帮助

 **谢谢。比斯瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:59:39.380

`property`不是 的有效属性`<input>`。该字段应为`<input type="text" name="otherCategory"/>`. 如果没有提交，可能是因为该字段在表单之外而不是在里面。但这只是一个猜测，因为您没有提供足够的代码来知道。

使用 Firebug 或 chrome 开发者控制台了解提交的内容。**

# gmp - GMP 是否支持 armv7s？

> ID：14518339
> 
> 赞同：1
> 
> 时间：2013-01-25T08:53:32.880
> 
> 标签：gmp, armv7

我尝试`GMP`用于 iPad 应用程序。

`XCode 4.5.1`不幸的是，由于库的架构不正确，它无法运行- `armv7s`.

```
Undefined symbols for architecture armv7s:
  "___gmpz_add", referenced from:
      _main in gmp.o
  "___gmpz_get_str", referenced from:
      _main in gmp.o
  "___gmpz_init_set_str", referenced from:
      _main in gmp.o
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我尝试使用 armv7 架构构建库，**并**使用我的 XCode 但不是**armv7s**成功运行。

我的 armv7 配置`GMP`是**：** -

> sudo sh ./configure CC="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2" CXX="/Applications/Xcode.app/Contents/Developer /Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-g++-4.2" CPP="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2 -E" LD="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ld" CPPFLAGS="-arch **armv7**-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -miphoneos-version-min=4.2" AR="/Applications/Xcode.app/Contents/Developer /Platforms/iPhoneOS.platform/Developer/usr/bin/ar" NM="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/nm" NMEDIT="/Applications/Xcode .app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/nmedit" LIBTOOL="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/libtool" LIPO ="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo" OTOOL="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr /bin/otool" RANLIB="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ranlib" STRIP="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin /strip" --disable-shared --enable-static --prefix=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/local/gmp/5.1.0/**armv7** --host=none-apple-darwin10

对于**armv7s**：-

> sudo sh ./configure CC="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2" CXX="/Applications/Xcode.app/Contents/Developer /Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-g++-4.2" CPP="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/llvm-gcc-4.2 -E" LD="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ld" CPPFLAGS="-arch **armv7s**-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -miphoneos-version-min=4.2" AR="/Applications/Xcode.app/Contents/Developer /Platforms/iPhoneOS.platform/Developer/usr/bin/ar" NM="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/nm" NMEDIT="/Applications/Xcode .app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/nmedit" LIBTOOL="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/libtool" LIPO ="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo" OTOOL="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr /bin/otool" RANLIB="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ranlib" STRIP="/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin /strip" --disable-shared --enable-static --prefix=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/local/gmp/5.1.0/**armv7s** --host=none-apple-darwin10

我试图谷歌看看是否`GMP`支持`armv7s`，但没有关于此的信息。

是不支持还是我之前的配置`MAKE`不正确？

# jquery - 在其他输入和 div 中垂直和水平居中 div

> ID：14518340
> 
> 赞同：1
> 
> 时间：2013-01-25T08:53:43.457
> 
> 标签：jquery, html, css, layout, stylesheet

我已经对此进行了一些搜索，这让我发疯了：

*   我需要使文本“ **CENTER & MIDDLE THIS** ”居中在`textarea`底部下方和上方的区域中，如下所示`.input`：

![在此处输入图像描述](../Images/a6ffb3efc0f2c2c4f0327d2a16dbb299.png)

代码：http: [//jsfiddle.net/qhoc/zqYUJ/2/](http://jsfiddle.net/qhoc/zqYUJ/2/)

现在它似乎是在底部`input1`和之间的中间对齐`input`

条件：

1.  我们知道`.input1 input`身高是`30px`
2.  我宁愿不指定高度，`textarea`但如果必须，那不太理想，但可以。
3.  `.input`代码中已经指定了高度和宽度。
4.  我也不喜欢使用 jQuery。我也不喜欢“硬编码”像素位置，因为稍后，`textarea`高度可能会由 jQuery 改变，具体取决于其中的文本量。

帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:15:01.437

尝试使用`dispaly:table-cell`

```
.input {
    height:300px;
    width: 400px;
    border: 1px solid black; display:table
}
.input1 input {
    width: 100%;
    height: 30px;     
}
.input2 textarea {
    width: 100%;    
}
.input3 {
    width: 100%;
    height:100%; display:table-row;
    text-align:center;     
}
.input3 div {
    display:table-cell; 
    vertical-align:middle;
    margin:auto 0
} 
```

**[演示](http://jsfiddle.net/zqYUJ/42/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:06:41.267

检查你更新的小提琴：只需设置`left`和`top` [小提琴](http://jsfiddle.net/zqYUJ/28/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:17:17.467

在您的情况下，它应该是：

```
top: 50%;
left:27%; 
```

[http://jsfiddle.net/zqYUJ/43/embedded/result/](http://jsfiddle.net/zqYUJ/43/embedded/result/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:06:29.207

只需像这样更改您的“.input3 div”样式。它可能会有所帮助...

```
 .input3 div {
     text-align: center;
     background: red;
     top: 50%;
     margin: 80px;
 } 
```

# python - 使用 pygeocoding 从地址获取纬度和经度

> ID：14518343
> 
> 赞同：2
> 
> 时间：2013-01-25T08:53:51.763
> 
> 标签：python, geolocation, python-2.x

问起来可能有点菜鸟。对于那个很抱歉。尝试了这个[https://github.com/mutaku/pygeocoding](https://github.com/mutaku/pygeocoding)库并像这样进行了查找

```
print LookUp(latlng="39.9518819802915,-75.1476150197085") 
```

但它给了我

> ' **init** () 应该返回 None'

我做错什么了？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:14:24.527

我认为该代码中存在错误，请替换以下行：

`return result`

和

```
self.result=result  #assign the result to a LookUp instance 
```

然后运行：

```
In [1]: from pygeocoding import *

In [2]: r=LookUp(latlng="39.9518819802915,-75.1476150197085")

In [3]: r.result
Out[3]: 

{u'results': [{u'address_components': [{u'long_name': u'400',
     u'short_name': u'400',
     u'types': [u'street_number']},
    {u'long_name': u'Arch Street',
     u'short_name': u'Arch St',
     u'types': [u'route']},
    {u'long_name': u'Center City',
     u'short_name': u'Center City',
     u'types': [u'neighborhood', u'politi ....................} 
```

# facebook - Facebook 分享/点赞使用根 URL 而不是页面的 URL

> ID：14518344
> 
> 赞同：0
> 
> 时间：2013-01-25T08:53:54.673
> 
> 标签：facebook, facebook-like

几周以来，我们遇到了一个奇怪的问题，即 Facebook 如何抓取我们页面的 URL。无论是使用页面上的点赞按钮还是从浏览器的地址栏中获取 URL 并粘贴到 Facebook 本身的“最新消息”框中，都没有任何区别。它使用根页面而不是链接的页面。

我查看了其他问题和答案，但那里发布的所有解决方案都已经实施。

有趣的是，如果我尝试从开发系统共享同一篇文章，共享工作正常。

网址是：

*   不工作：[http ://www.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn](http://www.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn)
*   工作：[http ://dev.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn](http://dev.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn)

分享第一个 URL 会导致分享[http://www.vorarlbergernachrichten.at](http://www.vorarlbergernachrichten.at)，分享第二个就可以了。文章是一样的，头信息（当然URL除外）也是一样的。

不工作：

```
<link rel='canonical' href='http://www.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn' />
<meta property="og:title" content="Jetzt zählt nur noch ein Sieg" />
<meta property="og:url" content="http://www.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn" />
<meta property="og:type" content="article" />
<meta property="og:description" content="Erstes Heimspiel in der Quali-Runde für Dornbirn – Znojmo hat man noch nie geschlagen." />
<meta property="og:image" content="http://www.vorarlbergernachrichten.at/2013/01/Bis-jetzt-konnten-die-Znojmo-Cracks-Luci.jpg" /><meta name="description" content="Erstes Heimspiel in der Quali-Runde für Dornbirn – Znojmo hat man noch nie geschlagen." />
<meta name="keywords" content="Jetzt,zählt,nur,noch,ein,Sieg" /> 
```

在职的：

```
<link rel='canonical' href='http://dev.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn' />
<meta property="og:title" content="Jetzt zählt nur noch ein Sieg" />
<meta property="og:url" content="http://dev.vorarlbergernachrichten.at/sport/2013/01/24/jetzt-zahlt-nur-noch-ein-sieg.vn" />
<meta property="og:type" content="article" />
<meta property="og:description" content="Erstes Heimspiel in der Quali-Runde für Dornbirn – Znojmo hat man noch nie geschlagen." />
<meta property="og:image" content="http://dev.vorarlbergernachrichten.at/2013/01/Bis-jetzt-konnten-die-Znojmo-Cracks-Luci.jpg" /><meta name="description" content="Erstes Heimspiel in der Quali-Runde für Dornbirn – Znojmo hat man noch nie geschlagen." />
<meta name="keywords" content="Jetzt,zählt,nur,noch,ein,Sieg" /> 
```

由于此功能直到几周前都可以正常工作，并且在开发系统上仍然有效，所以我不知道这种不当行为的原因可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:23:11.557

这真的很奇怪，但似乎问题出在缓存的 Facebook 数据上。您在评论中提供的第二个网址给出了“您必须登录才能阅读文章”。在 facebook 上分享它给出了一张图片，点击链接后有一个内容。

之后我通过调试器传递它并且图像发生了变化。之后分享它给了新的形象。

无论如何，您在[调试器](https://developers.facebook.com/tools/debug)上都会遇到一些错误，也许您应该从修复它们开始。另外检查为什么直接访问该页面需要登录。

你使用 HTTP_REFERER 或类似的东西吗？

# nuget - 在 NuGet 包目录之外复制文件

> ID：14518345
> 
> 赞同：2
> 
> 时间：2013-01-25T08:53:57.457
> 
> 标签：nuget, nuget-package

是否可以创建一个将文件复制到包文件夹之外的文件夹（即在目标项目的根目录中）的 NuGet 包？

我有以下声明：

```
<files>
    <file src="bin\net40\Ionic.Zip.dll" target="lib\net40" />
    <file src="bin\net40\HtmlAgilityPack.dll" target="lib\net40" />
    <file src="Web References\myWebService\*.*" target="content\Web References\myWebService" />
  </files> 
```

目前这会在包文件夹中创建 Web References 文件夹，但我想在项目根目录中创建 Web References 文件夹。我尝试将路径更改为“..\Web References\myWebService”，但这导致 Web References 文件夹根本无法复制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:38:38.403

目前无法配置包内容的目标位置。这是我们正在跟踪的下一个版本[@http://nuget.codeplex.com/workitem/1914](http://nuget.codeplex.com/workitem/1914)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:32:17.170

应该是这样的行为。NuGet 应在项目根目录下创建 WebReferences 文件夹。它不应该在包文件夹中创建文件夹。你有包的例子吗？

# jquery - append后没有jquery效果

> ID：14518346
> 
> 赞同：2
> 
> 时间：2013-01-25T08:53:59.680
> 
> 标签：jquery, append

我的文档中有一个 jquery 工具提示，用于`rel='tooltip'`. 然后我尝试在里面添加一个内容，如下所示：

```
$("#justfortesting").append("<a href='#' rel='tooltip' title='Delete 123'>Click to delete</a>"); 
```

但是添加了以上内容后，当我将鼠标悬停在“单击删除”上时，没有工具提示。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:58:00.333

定义工具提示事件，例如考虑动态创建的元素：

```
$(document).on('mouseover', '[rel="tooltip"]', function(e){
  //Code executed for all mouseover events on ALL elements with attribute rel equal to tooltip
}); 
```

**编辑**

在追加操作后创建提示

```
$("#justfortesting").append("<a id='my-new-link' href='#' rel='tooltip' title='Delete 123'>Click to delete</a>");
//Call the tootip creation method
$('#my-new-link').tooltip(...) 
```

# c++ - boost asio - 检查是否有任何东西可以从串口读取

> ID：14518353
> 
> 赞同：2
> 
> 时间：2013-01-25T08:54:25.503
> 
> 标签：c++, boost, serial-port, boost-asio

我正在使用 boost::asio 库来控制带有串行连接的电机。问题是 boost::asio::serial_port::read() 函数会使程序冻结，如果设备没有发送任何内容供我阅读。

如何通过端口检查设备是否有要告诉我的信息？

如果我向设备发送命令，我可以毫无问题地得到答复。但是有没有办法知道它是否在没有我发送命令的情况下发送了任何东西？或者这在串行连接中没有任何意义，其中命令仅作为对发送命令的响应接收？

请检查我的代码

```
try
{
    port = new boost::asio::serial_port(io_serial, comPort.c_str());
}
char rcvd;
std::string res;
while(1)
{
    boost::asio::read(*port,boost::asio::buffer(&rcvd, 1)); //here it freezes till something is read
    std::cout<<rcvd<<std::endl; //I know it froze in the last line because nothing was written from here
    if(rcvd == '\r' || rcvd == '\0')
    {
        break;
    }
    res.push_back(rcvd);
}
return res; 
```

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:17:20.203

对于串口，Boost.Asio 既不提供非阻塞同步读取，也不提供超时读取。因此，另一种选择是使用异步读取。Boost.Asio 提供了[这个](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/timeouts/async_tcp_client.cpp)例子。虽然该示例适用于 TCP，但它应该举例说明具有超时的异步读取的总体概念和方法。

此外，根据发布的逻辑，在回车或 NULL 之前读取数据，可能值得考虑使用基于[行的操作](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/overview/core/line_based.html)，例如[`boost::asio::async_read_until`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_read_until.html).

# jquery - Galleriffic 插件额外空间

> ID：14518355
> 
> 赞同：0
> 
> 时间：2013-01-25T08:54:26.933
> 
> 标签：jquery, jquery-plugins, galleriffic

我正在使用 jquery Galleriffic 插件，这是脚本生成的部分代码：

```
 <div id="slideshow" class="slideshow">
<span class="image-wrapper current" style="opacity: 1; ">
<a class="advance-link" rel="history" href="#2" title="Title #0">
&nbsp;<img alt="Title #0" src="images/products/Classic.jpg"></a></span></div> 
```

img 标签之前的这个空间导致图像显示在错误的位置，我不知道脚本为什么会生成这样的空间，但我认为我应该删除该空间。

我尝试了以下代码，但它没有工作。

```
$('a.advance-link').text( $('a.advance-link').text().replace(/\s+/g, "") ); 
```

我也试过这个

```
$('a.advance-link:contains("&nbsp;")').html(function(i, h) {
                        return h.replace(/\s+/g, '');
                      }); 
```

但没有运气，有人能弄清楚我将如何删除它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:09:39.517

看了下插件。

```
// Construct new hidden span for the image
var newSlide = this.$imageContainer
.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[nextIndex].hash+'" title="'+imageData.title+'">&nbsp;</a></span>')
.find('span.current').css('opacity', '0');

newSlide.find('a')
    .append(imageData.image)
    .click(function(e) {
        gallery.clickHandler(e, this);
}); 
```

您会注意到它首先构造您正在谈论的字符串，然后将 imageData 附加到锚点中。结果是`&nbsp;`标签永远不会被替换。您可以尝试简单地将其更改`.append(imageData.image)`为`.html(imageData.image)`并查看是否不能解决您的问题。

# function - C++如何调用IR函数

> ID：14518365
> 
> 赞同：0
> 
> 时间：2013-01-25T08:55:00.677
> 
> 标签：function, llvm, call, llvm-ir

我有一个 C++ 文件，它具有一些功能，例如：`int myMax(int a,int b)`，并将其编译为 llvm IR。现在我想在另一个 C++ 文件中操作 IR，我不知道如何调用我的 C++ 文件中的函数（例如：myMax）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:46:20.083

您可以将 IR 编译为您平台的目标文件（使用`llc`）。该目标文件与由 C++ 编译器生成的任何其他目标文件类似。所以你可以从你的 C++ 代码中调用它。

更具体地说。您将文件编译`int myMax(int a, int b)`成某个目标文件，例如`mymax.o`. 您的“用户”C++ 代码需要：

1.  `myMax`通过包含适当的标头或仅声明函数原型来查看声明。
2.  链接到`mymax.o`最终可执行文件中的实现。

* * *

或者，您可以使用 LLVM 的现有 JIT 功能对 C++ 代码中的 IR 模块进行 JIT，然后使用`getPointerToFunction`它来访问它。

# visual-c++ - 返回值不正确

> ID：14518366
> 
> 赞同：0
> 
> 时间：2013-01-25T08:55:10.307
> 
> 标签：visual-c++, email-validation

我正在使用这个功能

```
int spc_email_isvalid(const char *address) {

int        count = 0;
const char *c, *domain;
static char *rfc822_specials = "()<>@,;:\\\"[]";

/* first we validate the name portion (name@domain) */
for (c = address;  *c;  c++) {
if (*c == '\"' && (c == address || *(c - 1) == '.' || *(c - 1) == 
    '\"')) {
  while (*++c) {
    if (*c == '\"') break;
    if (*c == '\\' && (*++c == ' ')) continue;
    if (*c <= ' ' || *c >= 127) return 0;
  }
  if (!*c++) return 0;
  if (*c == '@') break;
  if (*c != '.') return 0;
  continue;
}
if (*c == '@') break;
if (*c <= ' ' || *c >= 127) return 0;
if (strchr(rfc822_specials, *c)) return 0;
}
if (c == address || *(c - 1) == '.') return 0;

/* next we validate the domain portion (name@domain) */
if (!*(domain = ++c)) return 0;
do {
if (*c == '.') {
  if (c == domain || *(c - 1) == '.') return 0;
  count++;
}
if (*c <= ' ' || *c >= 127) return 0;
if (strchr(rfc822_specials, *c)) return 0;
} while (*++c);

return (count >= 1);
} 
```

当我所有的功能 AfxMessageBox(spc_email_isvalid("abcd@hot.com")); 它返回空

如何根据电子邮件 ID 获取值 o 或 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:08:34.183

`AfxMessageBox`需要`LPCTSTR`作为第一个参数：

```
CString str;     
str.Format( _T("%d"), spc_email_isvalid("abcd@hot.com")); 

AfxMessageBox( str, MB_OK | MB_ICONINFORMATION ); 
```

# javascript - 如何在对象中传递数据？

> ID：14518367
> 
> 赞同：0
> 
> 时间：2013-01-25T08:55:16.440
> 
> 标签：javascript, oop, d3.js

我有一个图表对象，带有方法`draw`和`update`. [看到这个（非工作）小提琴](http://jsfiddle.net/MXWKD/3/)。

`draw`对对象的属性做了很多事情，最后绘制了一个图表。在这一点上，我可以定义一个`update`函数，因为所有被处理的数据都在`draw`那里。但是我不能`update`从范围外打电话。

如何将`update`方法定义为完全独立的方法，以便我可以从对象外部调用它，但它是否能够引用`draw`方法内的数据？

更新：[我发布了一些半伪代码](http://jsfiddle.net/MXWKD/3/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:02:30.303

也许像这样：

```
function MyChart(x,y){

   this.draw = function(){
      console.log('draw chart using variables x:' + x + ' y:' + y);

      return {
          update: function(){
               console.log('update chart using variables x:' + x + ' y:' + y);
          }
      }
   }
} 
```

用法：

```
 var chart = new MyChart(123,987);
 var drawResult = chart.draw();
 drawResult.update(); 
```

现场示例：http: [//jsfiddle.net/c9TeU/](http://jsfiddle.net/c9TeU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:00:25.120

```
function update(obj) {
}

var obj = {
    function draw() {
        update(this); // works
    }
}; 
```

您可能想阅读有关 Javascript[函数和函数作用域](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)以及[词法作用域](http://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scoping_and_dynamic_scoping)的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:00:35.600

由于您没有向我们提供太多信息，因此我将尝试猜测您想要什么。我假设你想要这个：

```
var updateFunction = function(){
   update();
};

return updateFunction(); 
```

但是你可以直接`return update;`在javascript函数中存储变量，所以如果你可以将一个变量传递到范围之外你也可以传递一个函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:25:49.170

您可以执行以下操作：

```
var TestObject = function () {
    var a, b;
    this.draw = function (aVal, bVal) {
        a = aVal;
        b = bVal;
    }
    this.update = function () {
        console.info("a = " + a + " | b = " + b);
    }
} 
```

然后你可以调用：

```
var obj = new TestObject();
obj.draw(3, 4);
obj.update(); 
```

jsfiddle - [http://jsfiddle.net/poonia/XAm52/](http://jsfiddle.net/poonia/XAm52/)

# java - 一次从数据库中获取所有需要的数据更好，还是更频繁地发出请求更好？

> ID：14518371
> 
> 赞同：0
> 
> 时间：2013-01-25T08:55:25.533
> 
> 标签：java, database, web-applications, aem

因此，我必须借助 CQ5（基于 OSGi、Sling、JCR 内容存储库的 Java CMS）开发一个 Web 组件

这个组件应该做以下事情：从用户那里收集三个问题的答案，然后根据用户的这些答案，将来自数据库的响应提供给用户（可以说它是一个计算器）

第一个问题有 5 个答案变体，第二个问题有 5 个变体，第三个问题也有 5 个变体。

但问题是，如果用户选择了选项 1 作为第一个问题的答案，则第二个问题的可能答案数量将减少 - 只剩下 3 个可能的答案。

例如，用户有问题：您来自哪个国家/地区？你来自哪个州？你来自哪个城市？

如果用户对第一个问题回答加拿大，那么他将能够仅选择加拿大各州作为对第二个问题的回答。

因此，当用户更改表单时，应通过 ajax 更新其中的数据

所以，问题是：一次从数据库中获取所有数据更好（没有你看到的那么多），还是在每个“表单更改事件”上向数据库发出请求更好？ ? 或者，它没有任何区别？

在我看来，从需要编写的代码量的角度来看，第二种变体更好，但从性能的角度来看，第二个变体更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:06:20.893

应避免过早的优化。我会采用多请求方法。就像你说的，它会让应用程序更干净。然后，只有当它被证明太慢时，您才可以考虑缓存或预先加载该数据。

关于过早优化有很多争论——一般的观点是在你证明你需要它之​​前避免它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:05:37.757

像往常一样：“这取决于”。对于您的州示例，如果它仅限于北美，则预加载所有州可能会很有用。一旦您的国家/地区列表增加并且州的数量也随之增加，最好只`onChange`从底层数据存储中获取所需的州。

我也根据人数做出这个选择

1.  用户可以选择的可能性（世界上只有少数几个国家或全部约 200 个国家？）
2.  第二个选择框中的项目数量
3.  如果用户应该能够在第二个选择框中看到不匹配的项目（如果项目仅在客户端被删除，没有 AJAX，只是普通的 JS）
4.  所需的性能（可以延迟加载第二个盒子的可能性还是需要接近即时？）

评估这些点通常会给你一个很好的经验法则。对于具有 3*5 可能性的实际情况，从数据库中预加载所有可能性并在程序代码中进行过滤似乎是一个合理的选择。

# java - 在 Java 中设置综合外观

> ID：14518373
> 
> 赞同：1
> 
> 时间：2013-01-25T08:55:33.740
> 
> 标签：java, netbeans, look-and-feel, synthetica

我使用 Netbeans 作为 IDE。我想用`SyntheticaOrangeMetallicLookAndFeel`. 我将 jar 文件添加到库中。以下代码段位于`initcomponents()`构造函数内的行之前。

```
 try{
     UIManager.setLookAndFeel(new SyntheticaOrangeMetallicLookAndFeel());
    }catch(Exception e){} 
```

执行时出现此错误：

> 线程“AWT-EventQueue-0”中的异常 java.lang.NoClassDefFoundError: sun/swing/plaf/synth/SynthUI。

帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:01:11.623

您将 Java7 与过时的 Synthetica 版本一起使用。使用 Java 6 或更好的最新 Synthetica 版本并支持 Java 7。

# jsf - 提交后如何取消选择 h:selectManyListbox

> ID：14518382
> 
> 赞同：1
> 
> 时间：2013-01-25T08:56:28.947
> 
> 标签：jsf, richfaces, selectmanylistbox

我正在用 jsf 和richfaces 做一个项目。有一个selectManyList。在 selectmanylist 中选择并保存后，SelectManyList 会再次打开。最后选择的项目在列表中被默认选择。但是我想阻止最后选择的项目。我能怎么做？

```
 <td valign="top">
                        <h:panelGroup id="ajaxAvailableProductPanel2">
                           <h:selectManyListbox
                            size="#{pc_ExternalProviderFrag.callServerBackingBean.availableProductsSelectItemsSize}"
                            id="availableProductsListbox2"
                            style="width: 100%;"
                            valueChangeListener="#{pc_ExternalProviderFrag.callServerBackingBean.handleAvailableProductsListboxValueChange}">
                            <f:selectItems
                                value="#{pc_ExternalProviderFrag.callServerBackingBean.availableProductsSelectItems}" />
                           </h:selectManyListbox>
                        </h:panelGroup>
                     </td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:42:43.383

只需在 action 方法中清除组件的值。

所以，给定一个

```
<h:selectManyListbox value="#{bean.selectedItems}"> 
```

您可以在操作方法中执行此操作：

```
public void submit() {
    // ...

    selectedItems = null;
} 
```

顺便说一句，我的印象是`valueChangeListener`根本不属于那里，但这是一个不同的问题/问题。

# javascript - Facebook 登录在 IE7 和 IE8 中没有响应

> ID：14518384
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:56:45.047
> 
> 标签：javascript, asp.net-mvc, facebook

我在 Asp.net MVC 3 应用程序中使用 facebook sdk。在 IE 9、Google Chrome 和 Mozilla Firefox 中一切正常。但是，如果我尝试以 IE7-IE8 浏览器模式登录，它没有响应。我在控制台中也没有收到任何错误，它什么也不做。

我试图为此寻找答案，但没有成功。

我`xmlns:fb="https://www.facebook.com/2008/fbml">` 在页面顶部的 html 元素中有。

问题是我无法提供更多信息，因为我的控制台中没有任何错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T09:19:31.553

好的，我找到了造成这种情况的原因。

FB.login 在里面被调用：

`window.fbAsyncInit = function() { ....}`

通过删除这个问题解决了。

# javascript - 单击取消时的 onchange 属性

> ID：14518386
> 
> 赞同：0
> 
> 时间：2013-01-25T08:56:46.870
> 
> 标签：javascript, jquery, html

我有

`<input type="file" id="file" onchange="filename();" /> <div id='filename'></div>`

函数是这样的

```
function filename() {
var input = document.getElementById("file");
if (filename == null) {
   document.getElementById("filename").innerHTML = "";
   return false;
}

var lastIndex = filename.lastIndexOf("\\");
if (lastIndex >= 0) {
   filename = filename.substring(lastIndex + 1);
}
document.getElementById("filename").innerHTML = "The filename is: "+filename+".";
} 
```

我的代码与上面类似，并且工作正常，但是当单击选择文件，然后选择一个文件时，会显示文件名。之后，如果我点击选择文件，然后点击取消。现在文件不再加载，但文件名的文本仍然存在。有没有我可以使用的代码，它会一直自动监听文件字段，当文件值为空时，它会更改文件名？

我想使用 JavaScript 或 jQuery 来做到这一点。

**编辑**

```
$("document").ready(function(){
    $("#file").change(function() {
         alert('changed');
    });
}); 
```

这将检测选择的新图像以及退出文件选择窗口时（按取消时）文件的名称 attr。改为“”，这就是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:14:15.413

我不完全确定您所说的“加载”或“文本”是什么意思。加载是否意味着：在输入框中显示？文本是否意味着：文件名 div 中的文本？

文件名 div 中的文本只有在输入框改变时才会改变。点击取消不会改变输入框。

如果点击取消后，输入框中的文件消失了，那么这应该会发生。

另外：您正在将函数文件名与空值进行比较。你可能想使用 input.value

# android - 在以位图为背景的画布上绘制

> ID：14518387
> 
> 赞同：2
> 
> 时间：2013-01-25T08:56:48.723
> 
> 标签：android, android-canvas, draw

我想在我拍的照片上画画。绘图工作没有绘制图片，但如果我绘制位图，我只看到位图但 n 绘图出现。我尝试了很多，但似乎没有任何帮助。提前致谢。

```
private class myView extends View implements OnTouchListener{

    File root = Environment.getExternalStorageDirectory();
    Path path;
    ArrayList<Path> _graphics = new ArrayList<Path>();
    Bitmap myBitmap;
    Paint myPaint;

    public myView(Context context) {
        super(context);

        File file = new File(root, "temp.jpg");
        myBitmap = null;
        if (file.exists()) {
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inPreferredConfig = Bitmap.Config.ARGB_8888;
            myBitmap = setBitmap(BitmapFactory.decodeFile(new File(root,
                    "temp.jpg").getPath(), options));
        }

        myPaint = new Paint();
        myPaint.setColor(Color.GREEN);
        myPaint.setStyle(Paint.Style.STROKE);
        myPaint.setStrokeWidth(3);
    }

    @Override
    protected void onDraw(Canvas canvas) {          
        canvas.drawBitmap(myBitmap, 0, 0, null);
        for (Path path : _graphics) {
             canvas.drawPath(path, myPaint);
        }
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            path = new Path();
            path.moveTo(event.getX(), event.getY());
        } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
            path.lineTo(event.getX(), event.getY());
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            path.lineTo(event.getX(), event.getY());
            _graphics.add(path);
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:35:03.787

```
public class DrawView extends View implements OnTouchListener {
private Canvas mCanvas;
private Path mPath;
private Paint mPaint;
private ArrayList<Path> paths = new ArrayList<Path>();
private ArrayList<Path> undonePaths = new ArrayList<Path>();

public DrawView(Context context) {
    mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);
    this.setOnTouchListener(this);
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.CYAN);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(4);
    mCanvas = new Canvas();
    mPath = new Path();
    paths.add(mPath);

}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
  super.onSizeChanged(w, h, oldw, oldh);
  BitmapFactory.Options opt = new BitmapFactory.Options();
          opt.inMutable = true;
  Bitmap tempbit = BitmapFactory.decodeFile(new File(root,
                "temp.jpg").getPath(),opt);
  Bitmap mBitmap=Bitmap.createBitmap(tempbit.getWidth, tempbit.getHeight, Bitmap.Config.ARGB_8888);
  mBitmap=Bitmap.createBitmap(tempbit);
  mCanvas = new Canvas(mBitmap);
}

@Override
protected void onDraw(Canvas canvas) {
canvas.drawBitmap(mBitmap,0,0,mBitmapPaint);
    for (Path p : paths) {
        canvas.drawPath(p, mPaint);
    }
}

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw
    mPath = new Path();
    paths.add(mPath);
}

public void onClickUndo() {
    if (paths.size() > 0) {
        undonePaths.add(paths.remove(paths.size() - 1));
        invalidate();
    } else {

    }
    // toast the user
}

public void onClickRedo() {
    if (undonePaths.size() > 0) {
        paths.add(undonePaths.remove(undonePaths.size() - 1));
        invalidate();
    } else {

    }
    // toast the user
}

public boolean onTouch(View arg0, MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();
            break;
    }
    return true;
} 
```

# java - 模板引擎应该渲染到输出流还是返回一个字符串

> ID：14518389
> 
> 赞同：2
> 
> 时间：2013-01-25T08:56:49.743
> 
> 标签：java, template-engine, templating

我正在创建一个[模板引擎基准](https://github.com/greenlaw110/template-engine-benchmarks)程序。最初，该程序旨在通过返回渲染结果（作为字符串）来测试模板引擎。然而，一些模板作者提出了一个担忧，即模板引擎不应该返回一个字符串作为结果，而是应该接受一个输出流或写入器实例作为参数并将渲染结果合并到它们中。他们声称该案例代表了正在使用的模板引擎的真实环境。

ASAIK，这个说法不是百分百正确的。Play!Framework（至少 1.x）要求模板引擎返回一个字符串，然后将它们放入输出流中。而且我认为以这种方式组织它是合理的。想想如果任何逻辑错误导致你的模板渲染过程失败，如果你的模板引擎直接输出到响应中，那么错误就变得不可恢复了。在 Play 中，您有很好的机会将响应定向到优雅的系统错误页面，而不是让浏览器运行一半混乱的数据。

另一方面，直接渲染成输出对性能和资源消耗有明显的好处。我很好奇哪一个应该是模板引擎设计师的更好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:02:36.880

写入 a `Writer`，因为这是最小的公分母。为方便起见，您的算法可能更喜欢将其包装在 a`PrintWriter`中，这样您就可以自由地接受 a `FileWriter`、`OutputStreamWriter`或`StringWriter`.

写入字符串似乎是个坏主意，因为在现实世界的使用中，您不太可能需要保留整个字符串以进行后期处理，而是让您能够以小的逻辑片段写入或发送文档 - 因此您的内存消耗图案会更逼真。

请记住，如果您接受 Writer，则可以使用 StringWriter 来获取 String。如果您使用字符串，即使 Writer（和流 API）就足够了，您也被迫永远分配该内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:03:16.033

在我看来，由于返回一个字符串可能会导致您出现各种性能问题（从需要尽快返回响应时的​​输出延迟到有人编写 HUGE 模板时的内存问题），因此您绝对应该使用流方法。

我也不同意不可恢复的错误点。例如，您可以向模板引擎添加一个配置选项以“缓冲”正在进行的模板（通过使用缓冲的输出流到文件/内存，并且在完成之前不向“真实”输出流写入任何内容）。在这种模式下，您可以实现完全相同的错误逻辑。当然，默认情况下应该关闭此模式 - 以提高性能。

# vb.net - 我们可以在 .NET 中进行 OLE 自动化吗？

> ID：14518391
> 
> 赞同：1
> 
> 时间：2013-01-25T08:56:55.110
> 
> 标签：vb.net, ole, vb6-migration

我一直在为 vb 到 vb.net 迁移项目工作。在 VB 中，我们有一个 OLE 容器来显示 word 文档和 pdf。我想知道，我们有这样的东西来显示word文档或PDF文档吗？

我在一些论坛中阅读过 OLE 自动化在 VB.NET 中不存在。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T23:19:12.280

OLE 自动化在 .NET 4.0 中出现在 VB.NET 中——我用它来将数据导出到 Excel。

我不确定，但我认为您需要通过“COM”选项卡而不是 Visual Studio 中的“.NET”选项卡链接适当的库。

# jquery - 通过javascript向表单添加额外的项目

> ID：14518394
> 
> 赞同：2
> 
> 时间：2013-01-25T08:57:05.903
> 
> 标签：jquery, asp.net-mvc, razor

我一直在寻找一段时间来完成以下工作：在表单通过后向表单添加项目。我已经设法将新项目的 HTML 添加到表单中，但发布后无法识别。所以，让我们让我的问题更清楚一点：

我有一个对象，即 Project。在那个项目中，我有一个列表，其中包含姓名/电子邮件和一个布尔值，用于检查是否已选择成员（当然，通过使用复选框）。

在视图中，它会生成一个表单，有人可以在其中输入项目详细信息并选择（预先存在的）成员。还有一个按钮，可以创建新成员。当按钮被按下时，项目表单被隐藏并呈现一个新的（PartialView/form）。填写所需的用户详细信息后，通过 AJAX 请求发送并返回 JSON 对象。

新用户已添加到用户表中，但表单似乎无法识别新添加的成员。我已经检查了由帮助程序（@CheckBoxFor 等）生成的 HTML 与我注入表中的 HTML：它是相同的。

我怀疑表单本身必须以某种方式重置（重新绑定？），但我的搜索尝试没有提出任何问题，除了解释如何在视图中绑定模型而不是重新绑定的教程/stackoverflow 问题。

我为缺少代码道歉，我希望解释足够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:13:02.543

我建议您阅读[`Editing Variable Length List`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)Steven Sanderson 撰写的文章，该文章说明了实现这一目标的一种非常好的方法。这个想法是，您不应该使用整数作为输入字段名称的索引，而是使用 Guids，并使用`.index`特殊的隐藏字段来指示模型绑定器的当前行的索引。这样，无论您从表单中动态添加或删除多少字段，模型绑定器都将始终能够成功绑定集合属性。

在他的文章中，他还展示了一个很好的`Html.BeginCollectionItem`自定义 HTML 助手，它隐藏了这项工作。

# html - 学习 HTML 5 的最佳方法是什么

> ID：14518395
> 
> 赞同：1
> 
> 时间：2013-01-25T08:57:14.593
> 
> 标签：html

我想学习 HTML 5，我想知道在哪里可以找到 HTML 5 的最佳资源。如果您与示例共享链接/资源，那就太好了。请提供您的建议。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:00:16.710

首先，我建议您尝试 Code School 的 HTML5 & CSS3 课程。每门课程都包含一个视频和类似 pastebin 的练习。不是免费的，但便宜且非常有用！

他们的网站： http: [//www.codeschool.com](http://www.codeschool.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:02:21.673

如果您正在寻找一些基本的东西，为什么不尝试 w3schools 一切都在那里。[http://www.w3schools.com/html/html5_intro.asp](http://www.w3schools.com/html/html5_intro.asp)。

否则您可以查看一些代码示例并通过玩代码来学习它们 [http://www.html5canvastutorials.com/](http://www.html5canvastutorials.com/)

# android - 我怎样才能在外面停止计时器。就像我单击倒数计时器方法之外的按钮一样？

> ID：14518396
> 
> 赞同：1
> 
> 时间：2013-01-25T08:57:14.483
> 
> 标签：android, countdowntimer

如果我在此方法之外单击 buttonstop，如何停止倒数计时器？我正在制作有计时器的游戏，当我点击按钮提交并且如果答案确定答案是正确的，计时器将停止。

请帮帮我。我的项目需要它。

```
 public void timer1(){
    timer = (TextView)findViewById(R.id.timer);

    final CountDownTimer Counter2 = new CountDownTimer(120000 , 1000) {

        public void onTick(long millisUntilFinished) {
            timer.setText( formatTime(millisUntilFinished));
        }

        public void onFinish() {
            timer.setText("GAME OVER");

        }
        };

        Context mcontext=this; 

    final AlertDialog.Builder alert = new AlertDialog.Builder(
          mcontext);

  alert.setTitle("LEVEL 1");
  alert.setPositiveButton("Start",
          new DialogInterface.OnClickListener() {

              @Override
              public void onClick(DialogInterface dialog,
                   int which) {
                  dialog.cancel();
                  Counter2.start();

                  question();
              }
          });
      alert.show();
}
public void timer2(){
    timer = (TextView)findViewById(R.id.timer);

    final CountDownTimer Counter1 = new CountDownTimer(120000 , 1000) {

        public void onTick(long millisUntilFinished) {
            timer.setText( formatTime(millisUntilFinished));
        }

        public void onFinish() {
            timer.setText("GAME OVER");

        }
        };

        Context mcontext=this; 

    final AlertDialog.Builder alert = new AlertDialog.Builder(
          mcontext);

  alert.setTitle("CORRECT");
  alert.setPositiveButton("OK",
          new DialogInterface.OnClickListener() {

              @Override
              public void onClick(DialogInterface dialog,
                      int which) {
                  dialog.cancel();
                  Counter1.start();

                  question();
              }
          });
      alert.show();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:19:03.353

在您的按钮内使用`Counter2.cancel`onclick ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:31:25.737

```
timer.cancel(); 
```

上面的代码方式来停止你的计时器。

# iphone - 在segue之后设置标签栏中第一个标签的值

> ID：14518397
> 
> 赞同：0
> 
> 时间：2013-01-25T08:57:25.217
> 
> 标签：iphone, ios, objective-c, storyboard, segue

我有以下情况。 ![在此处输入图像描述](../Images/75ca6d9ca56ddd4a18908d329c22fb69.png)

就像你看到的那样，我有一个转到 tabbarController 的 segue。但是我需要在 de VC 中设置一个指向屏幕的 id。你们有什么想法我怎么能做到这一点。

通常你会使用这个代码。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"showTab"]) {
        [segue.destinationViewController setPersonId:personobject.cu_id];
    }
} 
```

但这属于我的 tabbarController 而不是我的 FirstTabController。有什么帮助吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:18:13.723

您的目标视图控制器是一个`UITabBarController`. 您必须从该选项卡控制器获取一个实例到第一个选项卡中的控制器。

```
UITabBarController *tabController = (UITabBarController *) segue.destinationViewController;
FirstTabController *firstController = [tabController.viewControllers objectAtIndex:0];

[firstController setPersonId:personobject.cu_id]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:27:30.070

好的，

我通过以下方式将我的 personId 保存到 NSUserDefaults 中解决了我的问题。

```
 NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
                             [prefs setInteger:[personObject.cu_id intValue] forKey:@"personId"];
                             [prefs synchronize]; 
```

现在我可以通过调用以下命令在每个 VC 中访问它。

```
 NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    _personId = [NSNumber numberWithInt:[prefs integerForKey:@"personId"]]; 
```

# java - 无法存储作业：驱动程序的 Blob 表示是不受支持的类型：oracle.sql.BLOB

> ID：14518407
> 
> 赞同：9
> 
> 时间：2013-01-25T08:58:01.967
> 
> 标签：java, jdbc, quartz-scheduler

我收到此错误：

```
org.quartz.JobPersistenceException: Couldn't store job: Driver's Blob representation is of an unsupported type: oracle.sql.BLOB [See nested exception: java.sql.SQLException: Driver's Blob representation is of an unsupported type: oracle.sql.BLOB]
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.storeJob(JobStoreSupport.java:1103)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$3.execute(JobStoreSupport.java:1042)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$40.execute(JobStoreSupport.java:3670)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3742)
    at org.quartz.impl.jdbcjobstore.JobStoreTX.executeInLock(JobStoreTX.java:90)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInLock(JobStoreSupport.java:3666)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.storeJobAndTrigger(JobStoreSupport.java:1030)
    at org.quartz.core.QuartzScheduler.scheduleJob(QuartzScheduler.java:743)
    at org.quartz.impl.StdScheduler.scheduleJob(StdScheduler.java:243)
    at com.akbank.bsa.core.ApplicationStartup.run(ApplicationStartup.java:66)
    at com.akbank.bsa.core.ApplicationStartup.initialize(ApplicationStartup.java:24)
    at com.akbank.bsa.listener.Startup.contextInitialized(Startup.java:17)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850)
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.sql.SQLException: Driver's Blob representation is of an unsupported type: oracle.sql.BLOB
    at org.quartz.impl.jdbcjobstore.oracle.OracleDelegate.writeDataToBlob(OracleDelegate.java:646)
    at org.quartz.impl.jdbcjobstore.oracle.OracleDelegate.insertJobDetail(OracleDelegate.java:207)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.storeJob(JobStoreSupport.java:1097)
    ... 19 more 
```

使用：

**Jboss AS 7.1.1**

**Java 1.6**

Oracle Database 11g 企业版**11.2.0.2.0** - 64 位生产

**ojdbc6.jar**实现版本：11.2.0.2.0

**石英-2.1.6**

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:44:20.653

从类路径中删除 ojdbc6.jar 并添加 JBoss 模块（ojdbc6 模块）作为依赖项解决了该问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T12:56:52.953

我们找到了解决这个问题的优雅方法。有效。我们需要在 global-modules 中添加 oracle 模块，如下所示。

```
 <subsystem xmlns="urn:jboss:domain:ee:1.1">
        <global-modules>
            <module name="com.oracle" slot="main"/>
        </global-modules>

        <spec-descriptor-property-replacement>false</spec-descriptor-property-replacement>
        <jboss-descriptor-property-replacement>true</jboss-descriptor-property-replacement>
    </subsystem> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-25T14:59:47.970

成功解决了 JBoss EAP 6 的相同问题。主要思想是相同的 - 从战争中移除 jar（如果存在）并让应用服务器提供它。详情如下。

1）添加`WEB-INF/jboss-deployment-structure.xml`：

```
<jboss-deployment-structure>
<deployment>
    <dependencies>
        <module name="com.oracle" />
    </dependencies>
</deployment>
</jboss-deployment-structure> 
```

2) 定义`jboss\eap640\modules\system\layers\base\com\oracle\main\module.xml`

```
<module xmlns="urn:jboss:module:1.1" name="com.oracle">
  <resources>
    <resource-root path="ojdbc7.jar"/>
  </resources>
  <dependencies>
    ...
  </dependencies>
</module> 
```

3)`ojdbc7.jar`放入`jboss\eap640\modules\system\layers\base\com\oracle\main`。

# scripting - 将删除的谷歌驱动器文件恢复到目标文件夹

> ID：14518410
> 
> 赞同：2
> 
> 时间：2013-01-25T08:58:06.463
> 
> 标签：scripting, google-apps-script, google-drive-api

我需要将目前在我的谷歌驱动器垃圾箱中的所有文件移动到某个文件夹，或者，如果无法完成，请将它们恢复到原始位置。发生了一些混乱，我在垃圾箱中有一些有价值的文件，其中一些 6 gig，所以我宁愿将它们移动到单独的目录，备份或在本地同步，稍后再查看这些文件。

这是我到目前为止的脚本：

```
function moveFilesFromTrash() {
  var pageSize = 200;
  var files = null;
  var token = null;

  var cestisti = DocsList.getFolder('cestisti');

  do {
    var result = DocsList.getAllFilesForPaging(pageSize, token);
    files = result.getFiles();
    token = result.getToken();
    for (var i = 0; i < files.length; i++) {
      if (files[i].isTrashed == true) {
        Logger.log(files[i].getName());
//      files[i].setTrashed(false)
        files[i].addToFolder(cestisti);
    }
  } while (files.length == pageSize);
} 
```

问题是它不起作用。

浏览文件项的代码部分有效，我是从我的其他工作脚本中获得的。我只是不知道它是否将垃圾文件夹或标签解析为。我不知道是否`setTrashed()`或`addtofolder()`有效 - 我不知道。现在前者被注释掉了，因为我更喜欢复制项目而不是恢复它们，但如果这不可能，我可以恢复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:26:30.127

^([由于 DocsList 的弃用，此答案已更新，现在始终使用 DriveApp 方法。])

您必须先取消垃圾文件，然后才能移动它，但这样做会完成您所追求的。这是算法：

1.  获取所有已删除文件的文件列表（或文件 ID）
2.  对于每个文件，
    *   取消删除/取消垃圾文件
    *   将文件移动到目标文件夹（详细信息：从原始文件夹中删除文件，添加到目标恢复文件夹）

这个答案提供了脚本片段来完成这个；完整的脚本可作为[gist](https://gist.github.com/4644369#file-gdrive-trash-recovery)中的 Google 表格插件提供，包括菜单和 UI 元素。

## 恢复所有已删除的文件

此函数用于[`DriveApp.search()`](https://developers.google.com/apps-script/reference/drive/drive-app#searchfilesparams)获取所有已删除文件的列表，然后将它们恢复到指定的文件夹中，`rescueFldr`如果不存在则将创建该文件夹。

```
/**
 * Untrash then move all trashed files to rescue folder.
 * From: http://stackoverflow.com/a/14541247/1677912
 * 
 * @returns {Number}   Count of Rescued files.
 */
function rescueAllFiles() {
  // Find or create target folder
  var rescueFldrIterator = DriveApp.getFoldersByName(rescueFldrName);
  var rescueFldr = rescueFldrIterator.hasNext() ? rescueFldrIterator.next() : DriveApp.createFolder(rescueFldrName);

  // Get file iterator with all trashed files
  var trashed = DriveApp.searchFiles('trashed=true');

  var count = 0;
  while (trashed.hasNext()) {
    var file = trashed.next();
    // Untrash the file
    if (rescueFile( file, rescueFldr )) count++;
  }
  return(count);
}; 
```

## 恢复特定的垃圾文件

如果您想更好地控制将要恢复的文件，并且不能简单地修改上面使用的搜索参数，另一种方法可能是在电子表格中列出文件 ID，并让脚本将其用作输入.

### 用已删除的文件填充电子表格

```
/**
 * Get array of files in user's Google Drive trash, and write
 * into currently active sheet.
 * From: http://stackoverflow.com/a/14541247/1677912
 * 
 * @returns   {Object[]}   Array of DriveApp file objects
 */
function getTrashedFiles() {
  var trashedSearch = DriveApp.searchFiles('trashed=true');
  var files = [];
  files.push(["ID","File Name","Type","URL"]);
  while (trashedSearch.hasNext()) {
    var file = trashedSearch.next();
    files.push([file.getId(),file.getName(),docTypeToText_(file.getMimeType()),file.getUrl()]);
  }
  var sheet = SpreadsheetApp.getActiveSheet();
  sheet.clear();
  sheet.getRange(1, 1, files.length, files[0].length)
       .setValues(files);
  return files;
} 
```

### 手动文件 ID 收集

（自动检索的替代方法，仅供参考。）既然你只是这样做了一次，那么让我们作弊吧。在文件列表页面的底部，使用 API Explorer 检索所有已删除文件的 ID！

![API Explorer 文件列表](../Images/af35697d6aed910df6e910f2e7749805.png)

如果您从脚本调用 API，则会显示输出，就像您收到的一样。

![文件列表输出](../Images/8ab4b06c2b44dfaaa063fa486fb229ca.png)

将输出剪切并粘贴到文本文件中，然后将其剥离为文件 ID。（我是用 gvim 完成的，它只需要几个命令。）将结果保存为 csv 文件，并将其作为电子表格拉入云端硬盘。这就是它的样子。（一定要包含一个标题行；脚本假设有一个。）

[![带有已删除文件 ID 的电子表格](../Images/d00bb11531dab61dfba711ad5ff21067.png)](https://i.stack.imgur.com/sHBNP.png)

## 处理垃圾文件

现在已删除文件的列表在电子表格中，编写恢复和移动脚本很容易。

```
/**
 * Untrash then move files listed in spreadsheet to rescue folder.
 * From: http://stackoverflow.com/a/14541247/1677912
 * 
 * @returns {Number}   Count of Rescued files.
 */
function rescueListedFiles() {
  var fileList = SpreadsheetApp.getActiveSheet()
                               .getDataRange().getValues()
                               .splice(1);  // Skip header line
  // Find or create target folder
  var rescueFldrIterator = DriveApp.getFoldersByName(rescueFldrName);
  var rescueFldr = rescueFldrIterator.hasNext() ? rescueFldrIterator.next() : DriveApp.createFolder(rescueFldrName);

  var count = 0;  
  for (var i=0; i<fileList.length; i++) {
    var fileId = fileList[i][0];
    var file = DriveApp.getFileById(fileId);
    // Untrash the file
    if (rescueFile( file, rescueFldr )) count++;
  }
  return( count );
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:52:09.590

试试 **if (files[i].isTrashed() == true)**

我建议您放入一些诊断程序（Logger.log）以缩小问题范围

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T14:11:32.170

请记住，文件不在文件夹中。文件具有称为文件夹的标签，并且可以有多个文件夹（标签）。甚至“垃圾”也是一个标签。设置为垃圾只会创建一个覆盖其他标签（文件夹）的垃圾标签。下面的代码不会移动任何东西。它只是重置标签（文件夹）编辑：垃圾不是标签，而是一个条件：其他一切都成立

```
 for (var i = 0; i < files.length; i++) {
      if (files[i].isTrashed()) {  // don't forget ()
        Logger.log(files[i].getName());
        var folders = files[i].getParents();
        // remove existing folders(labels)
        for(var f = 0; f < folders.length; f++ ) {
          files[i].removeFromFolder( folders[f] );
        };
        // remove trashed label
        files[i].setTrashed(false);
        // add cestisti label(add to cestisti folder)
        files[i].addToFolder(cestisti);
       }
    } 
```

# windows-phone-7 - 如何从代码中获取 Windows Phone 系统语言？

> ID：14518411
> 
> 赞同：4
> 
> 时间：2013-01-25T08:58:10.923
> 
> 标签：windows-phone-7, localization, lang

解决方案： **使用 CultureInfo.CurrentUICulture**

用户可以在以下位置更改 Windows Phone 的系统语言：设置 > 语言+地区 > 手机语言

如何从 C# 代码中获取所选语言（电话语言）？

下面是我的手机设置：

![](../Images/4197d0ab373fe2ad8a720bdba824aded.png)

这是我的代码片段：

```
System.Diagnostics.Debug.WriteLine(
    "*************************************   CultureInfo.CurrentCulture.Name = " + CultureInfo.CurrentCulture.ToString() + ", "  +
    "CultureInfo.CurrentCulture.CompareInfo = " + CultureInfo.CurrentCulture.CompareInfo + ", " +
    "CultureInfo.CurrentCulture.DisplayName = " + CultureInfo.CurrentCulture.DisplayName + ", " +
    "CultureInfo.CurrentCulture.EnglishName = " + CultureInfo.CurrentCulture.EnglishName + ", " +
    "CultureInfo.CurrentCulture.Name = " + CultureInfo.CurrentCulture.Name + ", " +
    "CultureInfo.CurrentCulture.NativeName = " + CultureInfo.CurrentCulture.NativeName + ", " +
    "CultureInfo.CurrentCulture.TextInfo = " + CultureInfo.CurrentCulture.TextInfo
); 
```

这是输出：

```
CultureInfo.CurrentCulture.Name = zh-HK,
CultureInfo.CurrentCulture.CompareInfo = CompareInfo - zh-HK,
CultureInfo.CurrentCulture.DisplayName = Chinese (Traditional, Hong
Kong SAR), CultureInfo.CurrentCulture.EnglishName = Chinese
(Traditional, Hong Kong SAR), CultureInfo.CurrentCulture.Name = zh-HK,
CultureInfo.CurrentCulture.NativeName = 中文(香港特別行政區),
CultureInfo.CurrentCulture.TextInfo = TextInfo - zh-HK 
```

我找不到“电话语言”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:13:46.087

使用`System.Threading.Thread.CurrentThread.CurrentCulture`. 它应该正确反映电话语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T08:53:22.833

您可以查看我的答案，这将帮助您在运行时更改语言： [https ://stackoverflow.com/a/17131401/2467917](https://stackoverflow.com/a/17131401/2467917)

# javascript - ENTER键上没有在Chrome中生成按键事件？

> ID：14518412
> 
> 赞同：16
> 
> 时间：2013-01-25T08:58:14.047
> 
> 标签：javascript, jquery, html, google-chrome

我的应用程序需要用户输入，在文本框中输入值时，用户按 Enter（返回键），这会调用按钮 onclick 事件。这在 IE、FF 中运行良好，但在 Chrome 中运行良好。在 chrome 中输入时，不会生成按键事件这是我的代码片段

```
 $('#myDiv').keypress(function (e) {
    alert("Key  pressed");
    if (e.keyCode == $.ui.keyCode.ENTER) {

     alert("enter pressed");
    }
  }); 
```

任何人都可以对此提供意见吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-25T09:08:05.180

跨浏览器方法：

```
$('#myDiv').keydown( function(e) {
    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;
    if(key == 13) {
        e.preventDefault();
        alert("enter pressed");
    }
}); 
```

在 Chrome 24 上测试：http: [//jsfiddle.net/PTauw/1/](http://jsfiddle.net/PTauw/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T09:29:47.323

`keypress`是检测输入了哪个字符的正确事件（尽管在这种特殊情况下，检测回车键`keydown`也可以正常工作）。但是，如何获取按键事件中键入的字符在浏览器之间是不一致的，因此 jQuery 对`which`属性进行了规范化。这就是你想要的：

```
$('#myDiv').keypress(function (e) {
    alert("Key pressed");
    if (e.which == $.ui.keyCode.ENTER) {
        alert("enter pressed");
    }
}); 
```

关键事件的权威参考：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:12:21.287

此链接可能对您有帮助...
[Api Jquery Key Press](http://api.jquery.com/keypress/) 或尝试使用此代码

将按键更改为按键：

```
$('#myDiv').keydown(function(e) {

   // your logic
   alert("Key  pressed");
   if (e.keyCode == $.ui.keyCode.ENTER) {
       alert("enter pressed");
   }

}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-02T13:44:34.210

Chrome 似乎正在使用`ENTER`key 而不是`13`.

这适用于所有浏览器，包括`CHROME`.

```
 $('#myDiv').keydown(function(e) {
       if ((e.which == 13) || (e.which == keyCode.ENTER)) {

    alert("enter pressed");
  } 
```

# c++ - 在 std::deque 图像缓冲区中使用 delete（OFX 插件）

> ID：14518415
> 
> 赞同：0
> 
> 时间：2013-01-25T08:58:39.770
> 
> 标签：c++, video, ofx

我正在尝试在我的 OFX​​ 视频插件中的 std::deque 中对视频缓冲区进行编程。我想访问以前处理的图像以处理当前图像。我的想法是将处理后的图像推送到双端队列的前面，如果缓冲区超过最大大小，则从后面弹出它们。当我尝试在从缓冲区中删除图像之前使用 delete 释放图像的内存时，插件会崩溃。我发现我可以在缓冲区中添加一个或多个图像，然后立即删除它们，没有问题。但是，如果我尝试删除在较早周期中添加的图像，它会崩溃。插件由主类OFXPlugin和处理器类myplugin组成。OFXPlugin 的实例会随着时间的推移而停留，

我不确定我使用双端队列的方式是否有问题，是否不允许我释放由 myplugin 的另一个实例分配的内存，或者我是否在做与 OFX 相关的非法行为API。

下面的代码显示了与问题相关的插件的摘录。它基于 OFX 支持示例。`delete videoBuffer_.back().img;`它在函数中崩溃`OFXPlugin::addToVBuff(OFX::Image *img, double t)`。我无法捕获异常，显然它是在 OFX API 中处理（忽略）的。

非常感谢你的帮助！

**我的插件.h**

```
#include "ofxsImageEffect.h"
#include "ofxsMultiThread.h"
#include "../Support/Plugins/include/ofxsProcessing.H"

#include <deque>

// Video Buffer Element
typedef struct vBuffEl
{
    OFX::Image* img;
    double  time;
} vBuffEl;

inline
bool operator==(const vBuffEl &a, const double b)
{
    return a.time == b;
}

class myplugin : public OFX::ImageProcessor {
protected :
    OFX::Image *_srcImg;
    double   _time;
    OFXPlugin *_opInstance;

public :
    // ctor
    myplugin(OFX::ImageEffect &instance)
    : OFX::ImageProcessor(instance)
    , _srcImg(0)
    , _time(0)
    {}

    void multiThreadProcessImages(OfxRectI procWindow);

    void setOFXPlugin(OFXPlugin* opInstance) {_opInstance = opInstance;}

    OFXPlugin* getOFXPlugin() {return _opInstance;}

    void setTime(double argsTime) {_time = argsTime;}

    double getTime() {return _time;}

    void setSrcImg(OFX::Image *v) {_srcImg = v;}

    OFX::Image* getSrcImg() {return _srcImg;}

};

class OFXPlugin : public OFX::ImageEffect {
protected :
    OFX::Clip *dstClip_;
    OFX::Clip *srcClip_;

    double time_;
    std::deque<vBuffEl> videoBuffer_;

public :

  /** @brief ctor */
  OFXPlugin(OfxImageEffectHandle handle);

  /** @brief dtor */
  ~OFXPlugin();

  /* Override the render */
  virtual void render(const OFX::RenderArguments &args);

  /* get the source Clip */
  OFX::Clip* getSrcClip();

  /* get the current time */
  double getTime();

  /* set up and run a processor */
  void setupAndProcess(myplugin &, const OFX::RenderArguments &args);

  /* add to video buffer */
  void addToVBuff(OFX::Image *img, double t);

  /* fetch a dst image from buffer */
  void fetchDstImageBuff(double t, OFX::Image* &img, bool &buff);
}; 
```

**我的插件.cpp**

```
#include "myplugin.h"
#include <algorithm>

void myplugin::multiThreadProcessImages(OfxRectI procWindow)
{
    // Do some filtering of the source image and store result in destination image
    myfiltering(_dstImg, _srcImg, procWindow);

    // add to buffer
    _opInstance->addToVBuff(_dstImg, _time);

}

/* set up and run a processor */
void
OFXPlugin::setupAndProcess(myplugin &processor, const OFX::RenderArguments &args)
{
  // get a dst image
  std::auto_ptr<OFX::Image> dst(dstClip_->fetchImage(args.time));
  OFX::BitDepthEnum dstBitDepth       = dst->getPixelDepth();
  OFX::PixelComponentEnum dstComponents  = dst->getPixelComponents();

  // fetch main input image
  std::auto_ptr<OFX::Image> src(srcClip_->fetchImage(args.time));

  // set the images
  processor.setDstImg(dst.get());
  processor.setSrcImg(src.get());

  // set the render window
  processor.setRenderWindow(args.renderWindow);

  // set time
  processor.setTime(args.time);
  time_ = args.time;

  // set OFXPlugin instance
  processor.setOFXPlugin(this);

  // Call the base class process member, this will call the derived templated process code
  processor.process();
}

OFX::Clip* OFXPlugin::getSrcClip()
{
    return srcClip_;
}

/* get the current time */
double
OFXPlugin::getTime()
{
    return time_;
}

// the overridden render function
void
OFXPlugin::render(const OFX::RenderArguments &args)
{
    try {
          myplugin fred(*this);
          setupAndProcess(fred, args);
    } catch (...) {
      outputMessage("ERROR: An unknown error happened!");
    }
}

/* add to video buffer */
void
OFXPlugin::addToVBuff(OFX::Image *img, double t)
{
    try {
        // if frame already exists in buffer, remove
        std::deque<vBuffEl>::iterator it;
        it = find(videoBuffer_.begin(), videoBuffer_.end(), t);
        if(it != videoBuffer_.end())
        {
            delete it->img;
            videoBuffer_.erase(it);
        }

        // add new frame to the front
        vBuffEl e;
        e.time = t;
        e.img = new OFX::Image(img->getPropertySet().propSetHandle());
        memcpy(e.img, img, sizeof(img));
        videoBuffer_.push_front(e);

        // remove elements at the end, if the buffer exceeds the max size
        int LASTIMG_ARRAY_SIZE = 10;
        while(videoBuffer_.size() > LASTIMG_ARRAY_SIZE)
        {
            delete videoBuffer_.back().img;
            videoBuffer_.erase(--(videoBuffer_.end()));
        }
    } catch (...) {
      outputMessage("ERROR: An unknown error happened!");
    }
}

/* fetch a dst image from buffer */
void
OFXPlugin::fetchDstImageBuff(double t, OFX::Image* &img, bool &buff)
{
    try {
        std::deque<vBuffEl>::iterator it;
        it = find(videoBuffer_.begin(), videoBuffer_.end(), t);
        if(it != videoBuffer_.end())
        {
            img = it->img;      // return buffered dst image
            buff = true;
        }
        else
        {
            img = getSrcClip()->fetchImage(t);  // fetch and return src image
            buff = false;
        }
    } catch (...) {
      outputMessage("ERROR: An unknown error happened!");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:20:31.917

该声明

```
memcpy(e.img, img, sizeof(img)); 
```

不符合您的预期。

指针的`sizeof`操作返回指针的*大小*，而不是它指向的内容。这意味着在这种情况下，您只复制 4 或 8 个字节（取决于您是在 32 位还是 64 位平台上）。

然而，在那次通话中还隐藏着另一个*更糟糕的问题。*`memcpy`如果`OFX::Image`包含数据成员指针，则复制数据将复制指针而不是数据。是浅拷贝，不是深拷贝。这就是 C++ 具有复制构造函数和复制赋值运算符的原因。

你应该做的是一个简单的作业，并希望`OFX::Image`遵循[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)：

```
*e.img = *img; 
```

# python - python plot在ubuntu上不显示窗口

> ID：14518418
> 
> 赞同：1
> 
> 时间：2013-01-25T08:58:45.183
> 
> 标签：python, python-2.7, matplotlib

当我运行这个简单的代码时：

```
import matplotlib.pyplot as plt
plt.plot([1,2,3,4])
plt.ylabel('some numbers')
plt.show() 
```

我没有任何窗口。我试图将它保存到文件中并且它可以工作，但我想在屏幕上显示带有绘图的窗口。

我正在使用 python 2.7.3 版。我正在开发 Ubuntu。

如何显示窗口/情节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:06:59.277

你安装了numpy吗？matplotlib 需要 numpy 版本 1.4 或更高版本。您可以从[这里获取安装步骤](http://matplotlib.org/users/installing.html)

# java - 用 Java 开发后端服务器

> ID：14518419
> 
> 赞同：0
> 
> 时间：2013-01-25T08:58:58.680
> 
> 标签：java, hibernate, jakarta-ee, rabbitmq, akka

我正在寻找可能的方法来开发具有这些任务的后端服务器：

*   处理通过 RabbitMQ 到达的消息（处理基本上是这样的：使用 Hibernate 加载一些域模型实体并让它完成它的工作）
*   应该是可插拔的。对于不同的客户，将加载不同的模块。每个客户都是一个单独的实例。
*   其中一些模块可能必须公开不同类型的服务（REST，也许是 SOAP，...）
*   应该使我能够通过 AOP 或其他一些机制删除大部分样板代码（如事务管理、日志记录）。

对于一些背景。我使用 Windows 服务、Castle Windsor、NHibernate 和 NServiceBus 或其他一些消息传递解决方案在 .NET 中做了这些事情。所以我可以说我偏向于单一的整体解决方案（这是我对 Java EE 和类似的印象）并且宁愿使用一些较小的框架或库来实现这一切。只要它们运行在同一个应用服务器上。

我目前正在研究的选项是：

*   像 GlassFish 这样的 Java EE 应用程序服务器应该能够完成所有这些事情（JPA、Hibernate 等）
*   [Play 框架](http://www.playframework.org/)和连接到 RabbitMQ 的 Akka Actor，Akka Actor 在其中处理消息并调用域模型方法。在 Play 中开发的 Web UI 将有一个单独的应用程序。
*   [网状](https://netty.io/)
*   Spring 作为 Jetty 容器中 Java EE 的替代品

我刚开始涉足 Java 生态系统，所以如果我对某些事情感到困惑，我可以使用一些通用的指示和说明......

**编辑：**

添加其他选项：

*   操作系统
*   [轴突](http://www.axonframework.org/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:04:32.240

为此，我建议在您提到的应用程序服务器中使用 OSGi。

然后，您可以将 Web 容器用于诸如 REST 和 SOAP 服务之类的事情，并使用 OSGi 包来运行可以处理 MQ 消息的进程。

如果你想用 Spring 来管理样板的东西，它有很好的 AOP、事务管理，而且它还与 MQ 和 Hibernate 很好地集成。

使用 OSGi 包中的 Spring 集成来获取 MQ 内容。

对于应用程序服务器，您可以尝试使用 Spring DM Server。 [http://www.springsource.org/dmserver](http://www.springsource.org/dmserver)

尽管我承认我自己没有使用过，但这应该会给您很大的灵活性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:33:03.570

看看[骆驼集成框架](http://camel.apache.org/ "骆驼")。它允许您定义管道（或端点，Camel 术语），并定义如何以及在何处分发不同消息的规则。
举个例子，它可以接收 HTTP 消息，对其进行转换，然后继续传递，可能通过其他媒体类型（例如队列或邮件），并且所有这些都只需最少的编码。
它具有 Java、Scala 和 Spring DSL，并且可以作为独立、Web 或 OSGi 应用程序运行。根据我的经验，我强烈推荐它。

# oauth - Soundcloud 作为 Oauth 提供者：如何让它只连接一次

> ID：14518420
> 
> 赞同：3
> 
> 时间：2013-01-25T08:58:59.320
> 
> 标签：oauth, soundcloud, single-sign-on

我目前正在实施一个 Oauth 消费者服务，该服务也将使用 Soundcloud 作为 Oauth 服务提供者。但是我遇到了以下问题：以 Facebook 或 Twitter 为例，你去那里，你登录，你填写许可表，然后你被重定向回你的应用程序。如果您第二次去那里，并且您已经登录，您基本上会跳过所有步骤并立即重定向回来。这意味着，Facebook 认识到您已经向该第三方服务授予了许可，因此它不会不断地征求您的许可。

这就是我使用 Soundcloud 时发生的事情。基本上每次我将用户重定向到 Soundcloud Oauth 连接端点时，都会显示权限表单，即使我之前已经授予了该第 3 方服务的权限。我不得不每次都按“连接”，这从用户的角度来看是一种拖累（您可以向同一实体授予多少次权限）。我的问题是：是否有一个参数可以让 soundcloud 识别/验证用户帐户对特定第 3 方服务的先前权限？或者这是 Soundcloud Oauth 设计实现，我们必须忍受它？

编辑：

也许这不清楚，但每次我在 soundcloud 中按“连接”时，都会生成并传递一个新的访问令牌。由于我的应用程序使用此访问令牌来识别其用户，因此每次我想登录时访问令牌都会更新，这对我来说效果不佳，这让我每次都有效地“注册”。综上所述，我想将之前归属的令牌获取到我的帐户，这样我就可以在我的数据库中查找，识别它并登录他。

我也在寻找一种不涉及在客户端中存储可能被清理的状态的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:35:36.667

您可以做的是将用户的 oauth 令牌存储在本地存储中，并在以后的会话中重用它。这就是 soundcloud.com 上发生的情况。

*更长的解释：*

当您使用 Connect 流程时，用户会通过 SoundCloud 进行身份验证（通过使用用户名/密码、Facebook Connect 或 soundcloud.com 上的现有会话），然后当它成功时，您的应用会获得一个 oauth 令牌对于那个用户。这将传递到为您的应用注册的回调页面。

该令牌是让用户“登录”所需的唯一信息。除非令牌过期（按时间或用户手动撤销它），否则您可以在以后的会话中重用它。

我想我对您的应用程序的设计有点困惑：在哪里以及如何使用 oauth 令牌？我认为与其使用令牌作为标识符，也许用户的永久链接可能会更好？如果您有 oauth 令牌，您可以通过查询找到永久链接`api.soundcloud.com/me`。

# javascript - 如何更改此代码以使倒计时不会在重新加载时重置？

> ID：14518429
> 
> 赞同：1
> 
> 时间：2013-01-25T08:59:49.957
> 
> 标签：javascript

我从[这里](http://www.codingforums.com/showthread.php?t=149460)得到了这个代码。但是，我对 JS 不太了解，需要一点帮助才能让计时器在重新加载时不会重置。另外，我希望它倒计时天而不是小时、分钟和秒。有人可以帮我吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <title></title>
<script>
/*<![CDATA[*/

function zxcCountDown(id,mess,secs,mins,hrs,days){
 var obj=document.getElementById(id);
 var oop=obj.oop
 if (!oop){
  obj.oop=new zxcCountDownOOP(obj);
 }
 obj.oop.start(mess,secs,mins,hrs,days);
}

function zxcCountDownOOP(obj,mess){
 this.obj=obj;
 this.to=null;
}

zxcCountDownOOP.prototype={

 start:function(mess,secs,mins,hrs,days){
  clearTimeout(this.to);
  this.mess=mess;
  this.mhd=[mins,hrs,days];
  var date=new Date();
  this.fin=new Date(date.getFullYear(),date.getMonth(),date.getDate()+(days||0),date.getHours()+(hrs||0),date.getMinutes()+(mins||0),date.getSeconds()+(secs||0));
  this.cng();
 },

 cng:function(){
  var now=new Date(),s=(this.fin-now)/1000+1,d=Math.floor(s/60/60/24),h=Math.floor(s/60/60-d*24),m=Math.floor(s/60-h*60-d*24*60),s=Math.floor(s-m*60-h*3600-d*24*60*60);
  if (this.fin-now>-500){
   this.obj.innerHTML=(this.mhd[2]?(d>9?d:'0'+d)+' days ':'')+(this.mhd[1]||this.mhd[2]?(h>9?h:'0'+h)+' hours ':'')+(this.mhd[0]||this.mhd[1]||this.mhd[2]?(m>9?m:'0'+m)+' minutes ':'')+(s>9?s:'0'+s)+' seconds';
   this.to=setTimeout(function(oop){ return function(){ oop.cng(); }}(this),1000);
  }
  else if (this.mess){
   this.obj.innerHTML=this.mess;
  }
 }

}

/*]]>*/
</script></head>

<body onload="zxcCountDown('tst','message',20); zxcCountDown('tst1','message 1',0,0,2,0);">

<span id="tst" ></span> <input type="button" name="" value="Re-Start" onmouseup="zxcCountDown('tst','message',20);"/>
<br />
<span id="tst1" ></span>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:05:17.903

从技术上讲，你不能。Javascript 在加载时不保持状态。不过，有几种选择。

1.  您可以使用本地存储来保存当前计数并在页面加载时再次检索它。不过，这是一个较新的 API，不会向后兼容。 [http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)
2.  您可以将值存储在 cookie 中，并在重新加载页面时检索 cookie。 [http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

不过，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:04:31.797

javascript 是一个客户端脚本。并且每次重新加载页面时都会重新加载。要保留变量，您需要查看脚本之外的内容。

您是否尝试使用 cookie？它们可以保存您的变量值，只要您愿意。

只需在每次重新加载时从 cookie 中获取值

# backbone.js - Backbone.js - 无法在过滤器函数中获取模型

> ID：14518430
> 
> 赞同：-1
> 
> 时间：2013-01-25T08:59:53.343
> 
> 标签：backbone.js, backbone.js-collections

在我的项目中，我使用过滤器方法返回数据，在过滤器之外我得到了对象，但在过滤器内部却是未定义的......

他们的方式我做错了..？请有人指导我吗？

我的完整代码：

```
var taskListGenerator = function(params){

  var taskListPhraseI = {},
  column=params.column,
  leftSpine=params.leftSpine,
  topSpine = params.topSpine;//workspace to phrase one;

  taskListPhraseI.model = Backbone.Model.extend({
    url : 'data/data.json',
    defaults:{
      "id"                  :"id",
      "title"               :"Title",
      "projectName"         :"project",
      "dueDays"             :0,
      "dueTime"             :0,
      "dueDate"             :"0-0-0000",
      "totalTasks"          :0,
      "taskCompleted"       :0,
      "percent"             :65,
      "taskStatus"          :"Assigned",
      "jobtype"             :"vip",
      "username"        :"scott.pierce@groupfmg.com",
      "notes"               :"notes1"
    }  
  });

  taskListPhraseI.collection = Backbone.Collection.extend({
    model:taskListPhraseI.model,
    url : 'data/data.json',
    resetWithFilter : function(data,type) {      
      var filtered = data.models.filter(function (item) {
         return item.get("dueDays") === type;
      });
      return filtered;
    }
  });

  taskListPhraseI.oneView = Backbone.View.extend({
    template:$('#boardTemplate').html(),
    render:function(){
      var temp = _.template(this.template);
      return temp(this.model.toJSON());
    }
  });

  taskListPhraseI.allView = Backbone.View.extend({
    el:$('.boardHolder'),
    events:{
      'click span.green' : 'filterIt'
    },
    initialize:function(){
      var that = this;_.bindAll(this);
      this.collection = new taskListPhraseI.collection();
      this.collection.fetch({success:that.render});

      this.on('change:filterType', this.setNewType);
      //this.on('reset:filterType', this.setNewType);
    },
    setNewType:function(){
      var newCollection = new taskListPhraseI.collection();
      newCollection.fetch({context:this,update:true})
      .done(function(){
         this.collection.reset(newCollection,{ silent: true })
         var values = newCollection.resetWithFilter(newCollection,this.filterType);
         this.render(values);
      });
    },
    filterIt:function(e){
      this.filterType = parseInt($(e.target).text());
      this.trigger('change:filterType');
    },
    localVariable:{
      numElement:0,
      modelSize:0,
      stepElement:$('.stepValue'),
      stepRange : $('.stepRange'),
      stepWidth:0,
      compoundWidth:0,
      viewProter : $('.stepRangeCompound')
    },
    render:function(data){
      this.localVariable.modelSize = this.collection.models.length;
      console.log(data) // first time work fine, while it work on click event, show the error
      _.each(data.models, function(item){
          this.renderBoard(item)
      },this);
    },
    renderBoard:function(item){
      var singleView = new taskListPhraseI.oneView({model:item}),
      board = this.$el.append(singleView.render()),
      newBoard = board.find('.indBoard:last');
      this.positionBoards(newBoard);
    },
    positionBoards:function(tag){
      var prop = this.localVariable,
      boardWidth = tag.outerWidth(),
      boardHeight = tag.outerHeight(),
      topVal =  prop.numElement % column,
      lftVal = Math.floor(prop.numElement / column),
      holderWidth = 0;

      prop.stepWidth = boardWidth,
      prop.compoundWidth = $('.stepRangeCompound').width();

      this.$el.css({
         height: (boardHeight+topSpine) * column,
         width : Math.ceil((prop.numElement+1) / column) * (boardWidth+leftSpine),
      });

      holderWidth = this.$el.width();

      if(holderWidth <= prop.compoundWidth){
         $('.stepRange').hide();
      }else{
         $('.stepRange').show();
      }

      tag.css({
         left:(boardWidth * lftVal) + (lftVal * leftSpine),
         top:boardHeight * topVal +  (topVal* topSpine),
      });

      prop.numElement++;

      if(prop.modelSize === prop.numElement){
         this.initStepScroll();
      }

    },
    initStepScroll:function(){
      var prop = this.localVariable,
      stepNavi = prop.stepElement,
      stepMin = stepNavi.find('.stepMin'),
      stepMax = stepNavi.find('.stepMax'),
      stepHandler = prop.stepRange,
      maxScrollable = this.$el.width() - prop.compoundWidth,
      accomadable = Math.floor(prop.viewProter.width() / prop.stepWidth),
      showing = accomadable * column <= prop.modelSize ?  accomadable * column : prop.modelSize,
      startVal = 0,
      that = this;

      stepMax.text(prop.modelSize);
      stepMin.text(showing)

      var slideElement = stepHandler.slider({
         min:0,
         max:maxScrollable,
         step:prop.stepWidth,
         slide:function(i,ob){
            startVal = Math.abs(parseInt(that.$el.css('marginLeft')));
            that.$el.css({
               marginLeft:-ob.value
            });
            var currVal = Math.abs(parseInt(that.$el.css('marginLeft')));
            var dir = startVal < currVal ? 1 : startVal > currVal ? -1 :'';
            showing += dir * column
            var update = showing > prop.modelSize ? prop.modelSize : showing;
            stepMin.text(update);
         }
      });

      slideElement.find('.ui-slider-handle')
      .wrap(
         $('<div />').css({
            position:'relative',
            marginRight:slideElement.find('.ui-slider-handle').width(),
            height:'100%'
         })
      );

    }
  });

  var boards = new taskListPhraseI.allView();

} 
```

json样本：

```
{
    "id" :1, "title" :"Title1",
    "projectName" :"project1", "dueDays":7,
    "dueTime":2.45, "dueDate":"12-12-2010",
    "totalTasks" :15, "taskCompleted" :10,
    "taskStatus" :"Assigned", "jobtype"
    :"vip", "username"
    :"scott.pierce@groupfmg.com", "notes"
    :"notes1"

} 
```

错误：

```
undefined

tasklist.js (line 33)

TypeError: item is undefined 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:17:21.683

我将我的数组返回从过滤器转换为集合，像这样发送回集合方法..它工作正常

```
 setNewType:function(){
      var newCollection = new taskListPhraseI.collection();
      newCollection.fetch({context:this,update:true})
      .done(function(){
         var values = new taskListPhraseI.collection(newCollection.resetWithFilter(newCollection,this.filterType)); 
```

// 发送回集合将数组转换为集合，它解决了这个问题。this.render(值); }); },

谢谢大家。

# matlab - 在 Matlab 中将向量复制到向量

> ID：14518431
> 
> 赞同：0
> 
> 时间：2013-01-25T08:59:55.230
> 
> 标签：matlab, vector

我有一个关于如何将向量复制到另一个向量的简单问题。我有一个长度为 66x1 的向量，然后是另一个长度为 2151x1 的向量。我想将第一个的值复制到另一个的确切位置。我已经尝试过了，但它不起作用。

国米= 66x1 出= 2151x1

```
for i=1:numel(inter)
    out(101:167)= inter(i)
end 
```

我也试过这个：

```
for inter=(1:66);
    out(101:167)=inter;
end 
```

还有这个：

```
for k= (101:167)
    out(k)=inter(1:66);
end 
```

我做错了吗？提前致谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:10:30.430

假设您的向量是

```
a = [1; 2; 3];
b = [4; 5; 6; 7; 8; 9]; 
```

为简单起见。

无需使用循环。你可以继续这样做：

```
startIdx = 2; %101 in your case
finalIdx = startIdx + size(a,1) - 1; % 166 in your case
b(startIdx:finalIdx) = a; 
```

那么 b 将是：

```
b =

     4
     1
     2
     3
     8
     9 
```

* * *

这里非常重要的一点是`-1`in `finalIdx`。您需要从最终索引中减去 1。

# c# - DataList ASP.NET 捕获事件

> ID：14518433
> 
> 赞同：-3
> 
> 时间：2013-01-25T09:00:13.377
> 
> 标签：c#, asp.net, imagebutton, datalist

我有一个包含 Web 用户控件 (ascx2) 的 Web 用户控件 (ascx1)。在 ascx2 里面有一个 dataList。

**ASCX1**：

```
Page_Load 
{ 
var bp = (Mbp)Page.LoadControl(<b>ASCX2</b>); 
bp.dataSource = new List<...> { ... }; 
placeholder.Controls.Add(bp); 
} 
```

**ASCX2**

```
public List<TBusiness> dataSource; 
private static List<...> ds; 
private static ITemplate itemTemplate; 
private static ITemplate editTemplate; 

Page_Load
{ 
... 

    if (!this.IsPostBack) 
    { 
    ds = this.dataSource;   
    itemTemplate = new CustomTemplate(...);
    editTemplate = new CustomTemplate(...); 
    }

dataList.ItemTemplate = itemTemplate; 
dataList.EditItemTemplate = editTemplate; 
dataList.DataSource = ds; 
dataList.DataBind(); 
} 
```

**项目模板**

```
ImageButton {CommmandName="Edit"} 

protected void dataList_EditCommand(object source, DataListCommandEventArgs e) 
    { 
        dataList.EditItemIndex = e.Item.ItemIndex; 
        dataList.DataBind(); 
    } 
```

**编辑模板：**

```
ImageButton {CommmandName="Delete"} 
ImageButton {CommmandName="Cancel"} 
ImageButton {CommmandName="Update"} 
```

问题：单击`ImageButton{CommmandName="Edit"}`将模板更改为 EditTemplate。可以编辑元素，但忽略 EditTemplate 上的 ImageButton 事件（删除、取消、更新）。单击这些 Imagebuttons 什么都不做，只需更改回 itemTemplate。无法捕获这些 ImageButton 的事件（删除、取消、更新）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:24:25.997

您需要处理 ItemCommand 事件。我在您的代码中没有看到这方面的证据。

检查 CommandName 参数以确定要执行的操作。

```
void Item_Command(Object sender, DataListCommandEventArgs e) 
{
   if ( e.CommandName = "Delete" ){
     // Perform Delete, etc.
     MyDL.EditItemIndex = -1;
     DataList.DataBind();
   }    
} 
```

# ios - UITextField 中的奇怪崩溃

> ID：14518436
> 
> 赞同：2
> 
> 时间：2013-01-25T09:00:18.007
> 
> 标签：ios, objective-c, uitextfield

我以前没有这个问题。一切正常，但最近我的每个视图控制器中的**UITextField**在我触摸它时崩溃。它会抛出一些异常，例如 `-[UITextField window]:`发送到已释放实例 0x11843f80 的消息。我已经正确设置了 IBOutlet 和操作，代表 UITextField。直到最近我还没有遇到这个问题，但是随着新视图控制器的添加，我正在使用的所有视图控制器都遇到了这个问题。当我运行 lldb 命令来跟踪应用程序时，跟踪日志显示如下内容，

```
thread #1: tid = 0x1c03, 0x02fb3dee CoreFoundation`___forwarding___ + 206, stop reason = EXC_BREAKPOINT (code=EXC_I386_BPT, subcode=0x0)
    frame #0: 0x02fb3dee CoreFoundation`___forwarding___ + 206
    frame #1: 0x02fb3cb2 CoreFoundation`_CF_forwarding_prep_0 + 50
    frame #2: 0x00f6c592 UIKit`-[UITextSelectionView textSelectionViewActivated:] + 117
    frame #3: 0x0195ea29 Foundation`__57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 40
    frame #4: 0x03018855 CoreFoundation`___CFXNotificationPost_block_invoke_0 + 85
    frame #5: 0x03018778 CoreFoundation`_CFXNotificationPost + 1976
    frame #6: 0x018a319a Foundation`-[NSNotificationCenter postNotificationName:object:userInfo:] + 98
    frame #7: 0x018afb03 Foundation`-[NSNotificationCenter postNotificationName:object:] + 55
    frame #8: 0x00f6bcb3 UIKit`-[UITextSelectionView activate] + 83
    frame #9: 0x00d428bb UIKit`-[UIFieldEditor becomeFieldEditorForView:] + 1523
    frame #10: 0x00d2ff02 UIKit`-[UITextField _becomeFirstResponder] + 99
    frame #11: 0x00d6e093 UIKit`-[UIResponder becomeFirstResponder] + 351
    frame #12: 0x00f4d8fb UIKit`-[UITextInteractionAssistant setFirstResponderIfNecessary] + 208
    frame #13: 0x00f4f5f8 UIKit`-[UITextInteractionAssistant oneFingerTap:] + 1989
    frame #14: 0x00f47e29 UIKit`_UIGestureRecognizerSendActions + 143
    frame #15: 0x00f47133 UIKit`-[UIGestureRecognizer _updateGestureWithEvent:] + 379
    frame #16: 0x00f483bf UIKit`-[UIGestureRecognizer _delayedUpdateGesture] + 46
    frame #17: 0x00f4aa21 UIKit`___UIGestureRecognizerUpdate_block_invoke_0541 + 57
    frame #18: 0x00f4a97c UIKit`_UIGestureRecognizerApplyBlocksToArray + 277
    frame #19: 0x00f433d7 UIKit`_UIGestureRecognizerUpdate + 1026
    frame #20: 0x00ca81a2 UIKit`-[UIWindow _sendGesturesForEvent:] + 1121
    frame #21: 0x00ca8532 UIKit`-[UIWindow sendEvent:] + 93
    frame #22: 0x00c8edc4 UIKit`-[UIApplication sendEvent:] + 464
    frame #23: 0x00c82634 UIKit`_UIApplicationHandleEvent + 8196
    frame #24: 0x03451ef5 GraphicsServices`PurpleEventCallback + 1274
    frame #25: 0x03021195 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    frame #26: 0x02f85ff2 CoreFoundation`__CFRunLoopDoSource1 + 146
    frame #27: 0x02f848da CoreFoundation`__CFRunLoopRun + 2218
    frame #28: 0x02f83d84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #29: 0x02f83c9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #30: 0x034507d8 GraphicsServices`GSEventRunModal + 190
    frame #31: 0x0345088a GraphicsServices`GSEventRun + 103
    frame #32: 0x00c80626 UIKit`UIApplicationMain + 1163
    frame #33: 0x000a99bd Introdex`main + 141 at main.m:15
    frame #34: 0x000029d5 Introdex`start + 53

  thread #2: tid = 0x2103, 0x95de79ae libsystem_kernel.dylib`kevent + 10
    frame #0: 0x95de79ae libsystem_kernel.dylib`kevent + 10
    frame #1: 0x033f6372 libdispatch.dylib`_dispatch_mgr_invoke + 918
    frame #2: 0x033f4be1 libdispatch.dylib`_dispatch_mgr_thread + 53

  thread #4: tid = 0x2303, 0x95de691a libsystem_kernel.dylib`__psynch_mutexwait + 10
    frame #0: 0x95de691a libsystem_kernel.dylib`__psynch_mutexwait + 10
    frame #1: 0x969fa13b libsystem_c.dylib`pthread_mutex_lock + 595
    frame #2: 0x070e475e WebCore`_WebTryThreadLock(bool) + 46
    frame #3: 0x070e4455 WebCore`WebRunLoopLock(__CFRunLoopObserver*, unsigned long, void*) + 37
    frame #4: 0x0302199e CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30
    frame #5: 0x02fb8640 CoreFoundation`__CFRunLoopDoObservers + 384
    frame #6: 0x02f84635 CoreFoundation`__CFRunLoopRun + 1541
    frame #7: 0x02f83d84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #8: 0x02f83c9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #9: 0x070e4420 WebCore`RunWebThread(void*) + 560
    frame #10: 0x969f4557 libsystem_c.dylib`_pthread_start + 344

  thread #8: tid = 0x2703, 0x95de47d2 libsystem_kernel.dylib`mach_msg_trap + 10
    frame #0: 0x95de47d2 libsystem_kernel.dylib`mach_msg_trap + 10
    frame #1: 0x95de3cb0 libsystem_kernel.dylib`mach_msg + 68
    frame #2: 0x0302110a CoreFoundation`__CFRunLoopServiceMachPort + 186
    frame #3: 0x02f845d5 CoreFoundation`__CFRunLoopRun + 1445
    frame #4: 0x02f83d84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #5: 0x02f83c9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #6: 0x0199ce30 Foundation`+[NSURLConnection(Loader) _resourceLoadLoop:] + 398
    frame #7: 0x018ae4d6 Foundation`-[NSThread main] + 76
    frame #8: 0x018ae447 Foundation`__NSThread__main__ + 1258
    frame #9: 0x969f4557 libsystem_c.dylib`_pthread_start + 344

  thread #9: tid = 0x2803, 0x95de6be6 libsystem_kernel.dylib`select$DARWIN_EXTSN + 10
    frame #0: 0x95de6be6 libsystem_kernel.dylib`select$DARWIN_EXTSN + 10
    frame #1: 0x02fb57cb CoreFoundation`__CFSocketManager + 939
    frame #2: 0x969f4557 libsystem_c.dylib`_pthread_start + 344

  thread #10: tid = 0x2903, 0x95de47d2 libsystem_kernel.dylib`mach_msg_trap + 10
    frame #0: 0x95de47d2 libsystem_kernel.dylib`mach_msg_trap + 10
    frame #1: 0x95de3cb0 libsystem_kernel.dylib`mach_msg + 68
    frame #2: 0x0302110a CoreFoundation`__CFRunLoopServiceMachPort + 186
    frame #3: 0x02f845d5 CoreFoundation`__CFRunLoopRun + 1445
    frame #4: 0x02f83d84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #5: 0x02f83c9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #6: 0x06df9f50 WebCore`WebCore::runLoaderThread(void*) + 176
    frame #7: 0x086ce807 JavaScriptCore`WTF::threadEntryPoint(void*) + 71
    frame #8: 0x969f4557 libsystem_c.dylib`_pthread_start + 344

  thread #18: tid = 0x3103, 0x95de47d2 libsystem_kernel.dylib`mach_msg_trap + 10
    frame #0: 0x95de47d2 libsystem_kernel.dylib`mach_msg_trap + 10
    frame #1: 0x95de3cb0 libsystem_kernel.dylib`mach_msg + 68
    frame #2: 0x0302110a CoreFoundation`__CFRunLoopServiceMachPort + 186
    frame #3: 0x02f845d5 CoreFoundation`__CFRunLoopRun + 1445
    frame #4: 0x02f83d84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #5: 0x02f83c9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #6: 0x018e240f Foundation`-[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 300
    frame #7: 0x018e22d3 Foundation`-[NSRunLoop(NSRunLoop) run] + 76
    frame #8: 0x0012853f Introdex`+[AFURLConnectionOperation networkRequestThreadEntryPoint:] + 111 at AFURLConnectionOperation.m:156
    frame #9: 0x018ae4d6 Foundation`-[NSThread main] + 76
    frame #10: 0x018ae447 Foundation`__NSThread__main__ + 1258
    frame #11: 0x969f4557 libsystem_c.dylib`_pthread_start + 344

  thread #21: tid = 0x3403, 0x95de70ee libsystem_kernel.dylib`__workq_kernreturn + 10
    frame #0: 0x95de70ee libsystem_kernel.dylib`__workq_kernreturn + 10
    frame #1: 0x969f704c libsystem_c.dylib`_pthread_workq_return + 45
    frame #2: 0x969f6e19 libsystem_c.dylib`_pthread_wqthread + 448 
```

我这里有什么问题。请如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:55.647

为僵尸使用仪器。这将告诉你那里真正发生了什么。

# ant - 从 ant 执行：“未找到提供程序 com.sun.script.javascript.RhinoScriptEngineFactory”

> ID：14518438
> 
> 赞同：0
> 
> 时间：2013-01-25T09:00:23.777
> 
> 标签：ant, rhino, jsr223

我正在开发一个使用 JSR 223 的应用程序。

一切正常（单元测试和从命令行执行），除非从 Ant 执行。在这种情况下，通过此错误执行：

```
ScriptEngineManager providers.next(): javax.script.ScriptEngineFactory: Provider com.sun.script.javascript.RhinoScriptEngineFactory not found 
```

JDK7 包括一个 Rhino 的实现，我确信这个类在 rt.jar 中。为什么使用 Ant 执行时没有找到？

JDK 版本：java 版本 "1.7.0_11" Java(TM) SE Runtime Environment (build 1.7.0_11-b21) Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, 混合模式)

ANT 版本：2012 年 5 月 22 日编译的 Apache Ant(TM) 版本 1.8.4

谢谢

测试：

```
package testing;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;

public class TestingGetEngineJavascript {

    public static void main(String[] args) {
        new TestingGetEngineJavascript().test();

    }

    public void test() {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");
        if(engine == null) {
            throw new RuntimeException("Upps!!!!!!! Not ScriptEngine found for JavaScript");
        } else {
            System.out.println("ScriptEngine found for JavaScript");
        }
    }

}

<project name="test" default="test" basedir=".">
    <target name="test">
        <java classpath="dist/testAntJSR223.jar" classname="testing.TestingGetEngineJavascript">
        </java>
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T12:28:14.840

您可以尝试使用以下方法进行初始化： `ScriptEngineManager manager = new ScriptEngineManager(null);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:00:10.823

有一个“临时”解决方法：使用 fork="true"

但我认为这是一个错误：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=54484](https://issues.apache.org/bugzilla/show_bug.cgi?id=54484)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T12:02:44.520

我需要包括：

*   script-js.jar ( [http://download.oracle.com/otndocs/jcp/sjp-1.0-fr-oth-JPR/](http://download.oracle.com/otndocs/jcp/sjp-1.0-fr-oth-JPR/) )
*   和 Rhino_1.7R2.jar

使类似的示例工作...

# events - 500内部服务器错误。IIS 7 使用经典的 asp

> ID：14518448
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:01:29.673
> 
> 标签：events, iis-7, asp-classic, try-catch

```
500 - Internal server error.
There is a problem with the resource you are looking for, and it cannot be displayed. 
```

现在显示错误 res-one。请问，如何`asp classic`在 PC 中调试这种语言？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:47:06.110

如果可以，请在 IIS 中打开日志记录，然后在收到 500 服务器错误后检查日志。此外，您可以尝试使用 FireFox 浏览器，有时它会告诉您哪一行代码有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:29:38.537

尝试重新启动 ISS，检查路径，重新加载页面（Ctlr+F5）...

# javascript - 在其他元素中，不工作 phonegap 事件 api ex) 后退按钮

> ID：14518451
> 
> 赞同：1
> 
> 时间：2013-01-25T09:01:50.907
> 
> 标签：javascript, android, cordova

```
document.addEventListener("deviceready", function () {
    document.addEventListener("backbutton", function() {
        alert("hello");
    });
}); 
```

它正在工作，但是

```
var element = $("#score-screen")[0];
element.addEventListener("deviceready", function() {
    element.addEventListener("backbutton", function() {
        alert("hello");
    });
}); 
```

score-screen 是 div id 它不工作.. 帮帮我.. 请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:40:49.463

我认为仅在文档上触发设备就绪和 BackButton。

Phonegap 文档：[http ://docs.phonegap.com/en/2.3.0/cordova_events_events.md.html#deviceready](http://docs.phonegap.com/en/2.3.0/cordova_events_events.md.html#deviceready)

> 这是每个 Cordova 应用程序都应该使用的非常重要的事件。
> 
> Cordova 由两个代码库组成：native 和 JavaScript。在加载本机代码时，会显示自定义加载图像。但是，只有在 DOM 加载后才会加载 JavaScript。这意味着您的 Web 应用程序可能会在加载之前调用 Cordova JavaScript 函数。
> 
> 一旦 Cordova 完全加载，就会触发 Cordova deviceready 事件。设备启动后，您可以安全地调用 Cordova 函数。
> 
> 通常，一旦 HTML 文档的 DOM 加载完毕，您将希望使用 document.addEventListener 附加一个事件侦听器。
> 
> 此事件的行为与其他事件不同，因为在事件触发后注册的任何事件处理程序都将立即调用其回调函数。

# ruby-on-rails - 在 CentO 上安装 Ruby Rails 时出现问题

> ID：14518453
> 
> 赞同：4
> 
> 时间：2013-01-25T09:01:51.223
> 
> 标签：ruby-on-rails, postgresql, gem, centos

当我试图在我的 centos 服务器上安装 Ruby Rails 时。当我进入 Bundle install 时，我得到了错误

安装 pg (0.14.1) 时出错，Bundler 无法继续。`gem install pg -v '0.14.1'`在捆绑之前确保成功。

当我尝试`gem install pg -v '0.14.1 得到以下错误

Gem 文件将继续安装在 /usr/local/lib/ruby/gems/1.9.1/gems/pg-0.14.1 以供检查。结果记录到 /usr/local/lib/ruby/gems/1.9.1/gems/pg-0.14.1/ext/gem_make.out

有人知道我为什么会收到这个错误吗？高度赞赏帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T02:58:09.100

这应该可以帮助你——

```
$ sudo yum install postgresql-devel
Setting up Install Process
...
Complete!
$ sudo gem install pg
Building native extensions.  This could take a while...
Successfully installed pg-0.14.1
1 gem installed
Installing ri documentation for pg-0.14.1...
Installing RDoc documentation for pg-0.14.1... 
```

# database - 使用 pg_dump 工具创建转储文件

> ID：14518456
> 
> 赞同：0
> 
> 时间：2013-01-25T09:02:15.280
> 
> 标签：database, postgresql, command-line, port, heroku-toolbelt

我正在尝试使用[此处](https://devcenter.heroku.com/articles/heroku-postgres-import-export#import)指定的 pg_dump 工具创建转储文件，但我不断得到以下结果：

```
$ PGPASSWORD=mypassword pg_dump -Fc --no-acl --no-owner -h localhost -U myuser app_db > app_db.dump
  Is the server running on host "localhost" and accepting
  TCP/IP connections on port 5432?
could not connect to server: Connection refused
  Is the server running on host "localhost" and accepting
  TCP/IP connections on port 5432?
could not connect to server: Connection refused
  Is the server running on host "localhost" and accepting
  TCP/IP connections on port 5432? 
```

我正在使用 OSX Lion 进行集会排序时间，但仍然不知道如何打开或关闭端口，所以，如果这是问题，请告诉我如何打开它，如果问题是其他问题，请告诉我它是什么（以及如何解决它）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:13:14.200

您需要安装并运行 postgresql

# java - 要匹配的正则表达式：!$%^&*()_+|~-=`{}[]:";'<>?,./

> ID：14518467
> 
> 赞同：0
> 
> 时间：2013-01-25T09:02:41.377
> 
> 标签：java, android, regex

我知道这是一个具有几乎相同名称的问题的副本，但是，我无法让它在 Android 中运行！

我正在尝试这个：正则表达式匹配符号：

```
public Pattern bsymbols = Pattern.compile("[-!$%^&*()_+|~=`{}\\[\\]:\\";'<>?,.\/]"); 
```

但是，这是行不通的。有谁知道应用这种模式的正确方法？

PS 在 Regex 完成新手。:D

从这里开始 -[正则表达式匹配符号：!$%^&*()_+|~-=`{}[]:";'<>?,./](https://stackoverflow.com/questions/8359566/regex-to-match-symbols)

错误信息：`Syntax error on token(s), misplaced construct(s)`

更新：添加了额外的反斜杠...修复了很多 em，现在开始出错`;`。使用 Eclipse。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:09:04.917

我认为你的问题是“

```
public Pattern bsymbols = Pattern.compile("[-!$%^&*()_+|~=`{}\[\]:";'<>?,.\/]");
                                                                  ^ 
```

它正在结束你的字符串，所以你应该逃避它。您还需要在斜杠之前删除反斜杠，它不是特殊字符。

```
public Pattern bsymbols = Pattern.compile("[-!$%^&*()_+|~=`{}\\[\\]:\";'<>?,./]"); 
```

好的，再一次，你想匹配反斜杠，而不是转义斜杠，那么我们在这里结束：

```
public Pattern bsymbols = Pattern.compile("[-!$%^&*()_+|~=`{}\\[\\]:\";'<>?,.\\\\/]"); 
```

现在它与 jdb 的答案相同，因此对他 +1 更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T09:14:41.770

那个怎么样？

```
Pattern.compile("[-!$%^&*()_+|~=`{}\\[\\]:\";'<>?,.\\\\/]"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:19:03.920

在一个字符类中，只有`[`和`]`有特殊含义，所以你需要对它们进行转义。此外，在 Java 中，您需要使用额外的反斜杠进行转义。这就是 Java 特有的问题。因此，您需要使用`\\[`and `\\]`。是的，您需要`"`在字符串文字中使用单个反斜杠进行转义。

除此之外，连字符在中间某处使用时也具有特殊含义。如果要匹配 a `hyphen`，则需要在末尾使用它。

其余字符，不需要转义。他们只是普通的人物。

所以，你的模式应该是这样的： -

```
Pattern bsymbols = Pattern.compile("[-!$%^&*()_+|~=`{}\\[\\]:\";'<>?,./]"); 
```

如果你也想匹配`backslash (\)`，那么使用这个： -

```
Pattern bsymbols = Pattern.compile("[-!$%^&*()_+|~=`{}\\[\\]:\";'<>?,.\\\\/]"); 
```

# java - Android 是否支持类似模式的拦截器？想要在主逻辑之前捕获所有 403 响应

> ID：14518471
> 
> 赞同：0
> 
> 时间：2013-01-25T09:02:57.880
> 
> 标签：java, android, error-handling, client-server, interceptor

我正在制作一个通过 HTTP / JSON 进行大量通信的 android 应用程序，用于在 GUI 中填充不同的视图。

我有：

*   制作了登录屏幕和主要视图
*   如果您请求登录受保护的资源/主要是 JSON，则会引发 HTTP 403 的服务器。

我想：

*   一个类似 interseptor 的概念，如果遇到 403，可以将视图/活动设置为登录屏幕。

这样做的理由是，我不必在所有 AsyncTasks 中进行明确的 403 错误处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:10:27.413

Android没有这样的东西。

最好的解决方案是创建一个处理 HTTP 连接的实用程序方法，并返回`HttpResponse`, 或对 403 进行错误处理，并在代码中的任何地方使用该方法连接到服务器，而不是`HttpClients`手动`AsyncTask`构建.

# javascript - 协助实现我自己的 getElementByID()

> ID：14518479
> 
> 赞同：0
> 
> 时间：2013-01-25T09:03:22.930
> 
> 标签：javascript

我正在尝试在 Javascript 中实现我自己的 getElementById() 函数。我的想法/算法是这样的：

```
function myGetElemById(id){
    // rootNode I suppose will be the BODY tag.
    rootElem = get elements by TAGNAME (rootNode);
    elems = rootElems.getChildren();
    for(i=0; i<elems.length; i++){
        if(!elems[i].hasChildren()){
            myGetElemById(elems[i]);
        } else {
          if(elems[i].id == id)
              return elems[i];
          else
              return null;  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:09:51.030

方法一：

```
function myGetElemById(id){
  return document.getElementById(id);
} 
```

方法二：

```
function myGetElemById(id){
  return window[id];
} 
```

方法3：（较新的浏览器）

```
function myGetElemById(id){
  return document.querySelectorAll('#' + id);
} 
```

**完毕！**

好吧，说真的：

```
function getById(id, parent, list){
  parent = parent || document.body;
  list   = list   || [];

  var l, child, children = parent.children;

  if(children){
    l = children.length;
    while(l--){
      child = children[l];
      if(child.id == id) list.push(child);
      getById(id, child, list);
    }
  }

  return list;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:10:30.513

看看这个功能，也许你能得到想法

```
function getElementsStartsWithId( id ) {
  var children = document.body.getElementsByTagName('*');
  var elements = [], child;
  for (var i = 0, length = children.length; i < length; i++) {
    child = children[i];
    if (child.id.substr(0, id.length) == id)
      elements.push(child);
  }
  return elements;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:10:50.200

首先，必须处理有子元素，调用 myGetElemById() 并选择返回或不返回，取决于结果。像这样

```
 ...
    if(!elems[i].hasChildren()){
        var result = myGetElemById(elems[i]);
        if (result != null)
            return result;
    } else {
    ... 
```

其次，为什么要遍历 dom 的所有元素？本机功能要快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T23:15:42.107

使用 BFS 通过 ID 方法自定义获取元素：

```
function myGetElementById(id, root){
    let queue = [];  // Using array here but linkedList is more performant in both time and space complexity

    queue.push(root);

    let currentNode;

    while(queue.length){
        currentNode = queue.shift();
        if(currentNode.id === id){
            return currentNode;
        } 

        queue.push(...currentNode.children);
    }

    return false;
} 
```

# perl - 杀死后如何自动运行Perl？

> ID：14518480
> 
> 赞同：0
> 
> 时间：2013-01-25T09:03:40.377
> 
> 标签：perl, autorun

我有使用多个 $pid 的脚本。因此，如果子生成的连接过多，我的服务器挂起并且程序无法运行。

我想从我的服务器上的 cron 作业自动重新启动它，但它无法运行，因为我使用了alternatif cPanel。所以我想从它的脚本自动重启它。

我尝试使用以下命令重新启动它：

```
 kill 9, $pid;    
 sleep 60; 
```

并将显示输出：

```
Child Spawned : 15945

Killed 
```

但我不知道如何自动运行或重新执行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:54:07.793

看起来你想要一个每个分叉的工作池。您的服务器进程启动许多子进程来处理请求，并自动重新启动任何死机。

一个基本模板：

```
use strict;
use warnings;
use POSIX qw(sigprocmask SIG_BLOCK SIG_UNBLOCK SIGINT SIGTERM WNOHANG);

my $pool_size = 4;  # 4 workers
my %pool;

# When one or more workers die, delete them from the pool
$SIG{CHLD} = sub {
    while ((my $pid = waitpid(-1, WNOHANG)) > 0) {
        delete $pool{$pid};
    }
};

# If a fatal signal is sent to the server, kill all children and exit
for my $sig (qw(INT TERM)) {
    $SIG{$sig} = sub {
        local $SIG{CHLD} = 'IGNORE';
        kill $sig => keys %pool;
        exit;
    };
}

# HUP = restart all workers
$SIG{HUP} = sub {
    print "Caught HUP, restarting workers.\n";
    kill TERM => keys %pool
};

# Set up pool
make_worker() for (1..$pool_size);

# Maintain population
while (1) {
    sleep;  # wait for signal
    while (keys %pool < $pool_size) {
        make_worker();
    }
}

exit;

sub make_worker {
    # Block INT signal during fork, so parent handler is not called
    my $sigset = POSIX::SigSet->new(SIGINT, SIGTERM);
    sigprocmask(SIG_BLOCK, $sigset) or die "Couldn't block signals for fork: $!";
    my $pid = fork;
    die "fork: $!" if !defined $pid;
    if ($pid) {
        sigprocmask(SIG_UNBLOCK, $sigset) or die "Couldn't unblock signals for fork: $!";
        $pool{$pid} = 1;
        return;
    }
    else {
        $SIG{$_} = 'DEFAULT' for qw(INT TERM);
        sigprocmask(SIG_UNBLOCK, $sigset) or die "Couldn't unblock signals for child: $!";

        # Your worker code goes here.

        exit;
    }
} 
```

* * *

对于简单地在循环中重新启动单个命令，请尝试；

```
while(1) {
    system("/path/to/your-command", "--args");
} 
```

一旦命令终止（出于任何原因），它就会重新执行。处理系统的退出代码并不是那么简单，所以这里我推荐使用 IPC::System::Simple。

```
use IPC::System::Simple qw(system);
use Try::Tiny;

while(1) {
    try { system(...) } 
    catch { "Command failed, restarting: $!" };
} 
```

您还应该检测命令是否退出太快，这将表明一个致命错误。

# c# - C# 使用 System.Threading 发送 SMTP

> ID：14518482
> 
> 赞同：6
> 
> 时间：2013-01-25T09:03:56.010
> 
> 标签：c#, multithreading, smtp

我开发了一个主要使用 SMTP 发送电子邮件的应用程序。一条一条地发送消息很好，但是我希望加快这个过程。我创建了多个实例`SmtpClient`以及消息以避免彼此之间的冲突。由于单独的实例，我认为`.Send()`在多个线程上执行会很好。但是，`Thread`仅我的代码无法正常工作，因为我无法使用此代码在一个线程上发送一封电子邮件。我只是收到一个模糊的`"Failure sending mail"`例外。我将发布有效的代码，而`Thread`无效的代码。有人可以分享他们认为可能是什么原因吗？

**注意**我目前不打算使用更新的`async`功能，而是利用`Thread`

**工作声明和方法调用：**

```
var SMTP = new SmtpClient
    {
        Host = txtBxSenderHost.Text,
        Port = 587,
        EnableSsl = true,
        DeliveryMethod = SmtpDeliveryMethod.Network,
        UseDefaultCredentials = false,
        Credentials = new NetworkCredential(strSenderAddress, strSenderPassword)
    };

using (var message = new MailMessage(senderAdrress, toAddress)
    {
        Subject = strSubject,
        Body = strBody
    })

    {
        SMTP.Send(message);
    } 
```

**不工作线程声明和方法调用：**

```
var SMTP = new SmtpClient
    {
        Host = txtBxSenderHost.Text,
        Port = 587,
        EnableSsl = true,
        DeliveryMethod = SmtpDeliveryMethod.Network,
        UseDefaultCredentials = false,
        Credentials = new NetworkCredential(strSenderAddress, strSenderPassword)
    };

using (var message = new MailMessage(senderAdrress, toAddress)
    {
        Subject = strSubject,
        Body = strBody
    })

    {
        Thread T1 = new Thread(delegate() { SMTP.Send(message); } );
        T1.Start();
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T09:27:33.270

解决了：

```
var SMTP = new SmtpClient
        {
            Host = txtBxSenderHost.Text,
            Port = 587,
            EnableSsl = true,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            UseDefaultCredentials = false,
            Credentials = new NetworkCredential(strSenderAddress, strSenderPassword)
        };

        Thread T1 = new Thread(delegate()
        {
            using (var message = new MailMessage(senderAdrress, toAddress)
            {
                Subject = strSubject,
                Body = strBody
            })
            {
                {
                    SMTP.Send(message);
                }
            }
        });

        T1.Start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-22T13:57:55.830

您可以通过预先定义所有内容并调用新线程来更轻松地完成此操作。

```
//define everything above

Thread t1 = new Thread(delegate()
{

     SMTP.send(message);

});

t1.Start(); 
```

这就是我所做的，这些花括号让生活更轻松

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:41:39.933

为什么不直接使用 Smtp.SendAsync 方法？

[http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx](http://msdn.microsoft.com/en-us/library/x5x13z6h.aspx)

# java - 在石英中存储以后要做的工作

> ID：14518483
> 
> 赞同：1
> 
> 时间：2013-01-25T09:04:08.137
> 
> 标签：java, quartz-scheduler

我有一个用java制作的Web应用程序并使用我用来将html页面转换为pdf的tomcat。我想要的是当用户选择要转换为pdf的html页面时，作业排队并在一段时间后完成，通常是当服务器负担更轻。

> *1.Client向服务器发出请求，即example.com/topdf*
> 
> *2.请求被接收并存储并在服务器准备好时执行*

我正在阅读 Quartz 文档，我怀疑这是否是我应该使用作业调度程序的方式。我可以这样使用 Quartz 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:20:32.343

实现代码来处理用户的请求并以某种方式存储它们。

添加一个 Quartz 作业，例如每分钟运行一次，当它开始时检查是否有一些存储的请求需要评估。如果有一些检查服务器是否有足够的资源，如果有，则评估这些存储的请求。否则退出作业并等待一分钟后再次开始。

# ios - 从块内返回父方法

> ID：14518488
> 
> 赞同：0
> 
> 时间：2013-01-25T09:04:29.403
> 
> 标签：ios, objective-c, cocoa

嗨，我是在 Objective-C 中使用块的新手

我想我想要的是以下内容：

```
- (void) iNeedAToken {

  NSString *token = [self theMethodThatShouldReturnTheToken];

}

- (NSString) theMethodThatShouldReturnTheToken {

  [myAwesomeAsyncMethod success:^(id JSON) {

        NSString *token = [JSON objectForKey:@"FOO"];
        return token;

    }]

} 
```

这可能吗？或者这是错误的逻辑？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:09:45.913

您正在将异步代码与同步代码混合。在传递给的块完成之前，您`theMethodThatShouldReturnTheToken`已经返回（您缺少返回值）`success`。

最好的选择是从成功块继续您的过程。

```
- (void) tokenRequestContext1
{
    [self requestToken:^(NSString *token) {
        // do something with token
    }];
}

- (void) requestToken:(void(^)(NSString *))tokenBlock
{
    [myAwesomeAsyncMethod success:^(id JSON) {
        NSString *token = [JSON objectForKey:@"FOO"];
        if (tokenBlock) {
            tokenBlock(token);
        }
    }];
} 
```

您首先调用`requestToken`. 这将启动您的令牌的异步请求。一段时间可能会过去，但最终`doSomethingWithToken`会在您可以使用收到的令牌的地方调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T09:08:47.430

有一种等待完成块完成的方法的描述：http: [//omegadelta.net/2011/05/10/how-to-wait-for-ios-methods-with-completion-blocks-to-finish /](http://omegadelta.net/2011/05/10/how-to-wait-for-ios-methods-with-completion-blocks-to-finish/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T09:11:37.293

此代码的常规版本是：

```
- (void) iNeedAToken {
  [self theMethodThatShouldReturnTheToken:^(id res){ token = res;}];
  NSString *token = [self theMethodThatShouldReturnTheToken];

}

- (void) theMethodThatShouldReturnTheToken:(void  (^)(id res)result) {

  [myAwesomeAsyncMethod success:^(id JSON) {

        NSString *token = [JSON objectForKey:@"FOO"];
        result(token);

    }]

} 
```

# php - DataTables - 忽略 SQL 请求的排序

> ID：14518491
> 
> 赞同：1
> 
> 时间：2013-01-25T09:04:34.403
> 
> 标签：php, sql, datatables, jquery-datatables

我在 SQL 请求中按 ORDER BY 对表中的数据进行排序。但是当我在我的表上应用 DataTables 时，它完全改变了排序......我在所有列中都得到了“bSortable”：false......有人知道是什么原因造成的吗？:( 数据表代码如下所示：

```
oTable = $('#tabulkaKalk').dataTable({
        "bJQueryUI": true,
        "sDom": '<"H"f>rtS<"F"i>',
        "sScrollY": iHeight,  
        "bFilter": false,      
        "bAutoWidth": true,  
        "bPaginate": false,  
        "bRetrieve":true,
        "aoColumns": [      
            { "sType": "czech", "bSortable":false },
            { "sType": "natural", "bSortable":false },
            { "sType": "natural", "bSortable":false },
            { "sType": "natural", "bSortable":false }

        ]
    }); 
```

# c# - 使用导航属性更新/添加/删除 EF 不适用于 ApplyCurrentValues

> ID：14518496
> 
> 赞同：1
> 
> 时间：2013-01-25T09:04:54.837
> 
> 标签：c#, entity-framework, entity-framework-4.1

我尝试使用实体框架将现有用户对象更新到数据库中。

我新添加了一些 UserFavourite 项目并发送到 UpdateUser 方法。但它只保存 Id 和 Name，而不是 UserFavourites。

**我的控制器代码**

```
List<UserFavourite> submittedFavouriteCollection=//prepared from view

User existingDBUser = AdminService.SelectUserById(int Id);

foreach (UserFavourite fav in submittedFavouriteCollection)
   { 
      fav.Modified = currentTime;
      fav.Modifier = modifier;
      existingDBUser.UserFavourites.Add(fav);

   }
AdminService.UpdateUser(existingDBUser); 
```

**EF 类骨架和更新方法**

```
public class User{
    public int Id{get;set;}
    public string Name{get;set;}
    public EntityCollection<UserFavourite> UserFavourites{get;set;}
    //other EF properties
}

public User UpdateUser(User userToSave)
{
    using (MyContext entities = new MyContext(GetSqlConnectionString()))
    {
        var usr = from rd in entities.Users
                    where rd.Id == userToSave.Id
                    select rd;

        userToSave.Modified = DateTime.Now;

        entities.Users.ApplyCurrentValues(userToSave);

        entities.SaveChanges();
        return userToSave;
    }
 } 
```

***如何在实体框架中添加/删除/更新用户的收藏夹？正确的做法是什么？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:25:52.257

`EntityCollection<UserFavourite>`需要是虚拟的。

# c# - 如何在 C# 中实现多个返回值，如 python 风格

> ID：14518498
> 
> 赞同：5
> 
> 时间：2013-01-25T09:05:22.987
> 
> 标签：c#, python, function

我有一个 python 脚本：

```
def f():
    a = None
    b = None
    return (a, b)

a, b = f() 
```

在 python 中实现多个返回值非常容易。现在我想在 C# 中实现相同的结果。我尝试了几种方法，例如 return int[] 或 KeyValuePair。但两种方式看起来都不优雅。我想知道一个令人兴奋的解决方案。多谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:10:15.257

使用[元组](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)类。

```
 public Tuple<int,int> f()
  {
        Tuple<int,int> myTuple = new Tuple<int,int>(5,5);
        return myTuple;
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T09:07:27.430

不幸的是，C# 不支持这一点。您可以获得的最接近的是使用`out`参数：

```
void f(out int a, out int b) {
    a = 42;
    b = 9;
}

int a, b;
f(out a, out b); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T09:11:51.753

你显然可以做

```
object F(out object b)
{
    b = null;
    return null
}

object b;
var a = F(out b) 
```

但更好地`Tuple`与功能风格一起使用，

```
Tuple<object, object> F()
{
    return Tuple.Create<object, object>(null, null);
}

var r = F();
var a = r.Item1;
var b = r.Item2; 
```

但是，既然在 c# 中你可以是明确的，为什么不定义你的返回类型。

```
struct FResult
{
    public object A;
    public object B;
}

FResult F()
{
    return new FResult();
}

var r = F();
var a = F.A;
var b = F.B; 
```

这似乎是为语义利益付出的很小的代价。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-02T13:58:13.260

此功能在带有 .Net 4.7 的 C#7 中可用。

```
private (string a, string b) f()
{
    return (a: null, b: null);
    // or simply: return (null, null);
}

var (a, b) = f(); 
```

# java - 将字节数组写入文件的最快方法是什么？

> ID：14518502
> 
> 赞同：-4
> 
> 时间：2013-01-25T09:05:53.993
> 
> 标签：java, file

创建文件并将数据大小超过 100 MB 的字节数组写入其中的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:08:52.403

打开 FileOutputStream，写入字节，在 finally 块中关闭流（或使用 Java 7 try-with-resources）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:09:08.557

[`org.apache.commons.io.FileUtils.writeByteArrayToFile(file, data);`](http://goo.gl/xBziD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:24:35.153

虽然标准`java.io`类仍然很受欢迎，但我也会尝试`java.nio`（和[`FileChannels`](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/channels/FileChannel.html)）中的新 IO 机制。它们提供了一些较低级别的文件访问，并且可能更有效。

# php - wordpress 如果是页面

> ID：14518505
> 
> 赞同：0
> 
> 时间：2013-01-25T09:05:58.603
> 
> 标签：php, wordpress

我有一个自定义的 WordPress 主题，我在该主题上为不同的页面显示不同的背景。

例如

```
 <body <?php body_class(); ?>>
    <?php if (is_page('about')) : ?>
        <body style="background:url(background-stripe.gif); background-repeat: no-repeat;">
    <?php endif; ?> 
```

我目前正在尝试将其应用于自定义帖子类型（单个）页面，实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:13:34.460

而不是这些条件，我会在标签上使用[body_class()](http://codex.wordpress.org/Function_Reference/body_class)函数。`body`它为自定义类型添加了应该足够的类，但如果您需要更多，您可以在页面模板中添加一个带有过滤器的类。然后你只需要在 CSS 文件中设置背景`body.custom-page`或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:24:46.753

[is_singular](http://codex.wordpress.org/Function_Reference/is_singular)是特定帖子类型的条件标签。如果您不希望所有单个帖子/不同帖子类型具有不同的背景，则可以使用它。

话虽如此，我会像已经建议的那样使用 body_class 。

# php - php mysql 时间预订

> ID：14518507
> 
> 赞同：0
> 
> 时间：2013-01-25T09:06:05.620
> 
> 标签：php, mysql

我正忙于预订系统，需要检查 2 次是否重叠。到目前为止，这是我的查询，如果结果 > 1，那么在此期间已经有预订。尝试获取行数时出现错误/警告。（见下文）因此，我的计数不计算在内，并且进行了预订。请帮忙。另外，我在我的数据库中使用时间类型（starttime 和 endttime），但 post 变量是字符串时间，因此我使用 strtotime()。请看下面的错误：

```
$mystarttime = '07:00:00';
$myendtime = '08:00:00';
$sql    = "SELECT * FROM $tbl_name2 WHERE
            (
            (strtotime($mystarttime) < starttime AND strtotime($myendtime) > starttime)
            OR
            (strtotime($mystarttime) > starttime AND strtotime($myendtime) < endtime)
            OR
            (strtotime($mystarttime) > starttime AND strtotime($mystarttime) < endtime)
            OR
            (starttime < strtotime($mystarttime)  AND  starttime > strtotime($myendtime))
            OR
            (starttime > strtotime($mystarttime) AND endtime < strtotime($myendtime))
            OR
            (starttime > strtotime($mystarttime) AND endtime < strtotime($mystarttime))
            OR
            (strtotime($mystarttime) = starttime)
            OR
            (strtotime($mystarttime) = endtime)
            OR
            (strtotime($myendtime) = starttime)
            OR
            (strtotime($myendtime) = endtime)
            OR
            (starttime = strtotime($mystarttime))
            OR
            (starttime = strtotime($myendtime))
            OR
            (endtime = strtotime($mystarttime))
            OR
            (endtime = strtotime($myendtime))
            )
            AND
            hairdresserid = $myhairdresserid 
            AND
            date = $mydate";

            $result = mysql_query($sql);

            //Mysql_num_row is counting table row
            $count  = mysql_num_rows($result)or die('Query failed: ' . mysql_error() . $sql); 
```

我收到的警告信息：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /xxx/xxx/xxx/xxx/makebooking.php on line 165 
```

`Query failed: You have an error in your SQL syntax; check the manual that corresponds to` `your MySQL server version for the right syntax to use near ':00:00) < starttime AND strtotime(08:00:00) > starttime) OR ' at line 3SELECT * FROM bookings WHERE ( (strtotime(07:00:00) < starttime AND strtotime(08:00:00) > starttime) OR (strtotime(07:00:00) > starttime AND strtotime(08:00:00) < endtime) OR (strtotime(07:00:00) > starttime AND strtotime(07:00:00) < endtime) OR (starttime < strtotime(07:00:00) AND starttime > strtotime(08:00:00)) OR (starttime > strtotime(07:00:00) AND endtime < strtotime(08:00:00)) OR (starttime > strtotime(07:00:00) AND endtime < strtotime(07:00:00)) OR (strtotime(07:00:00) = starttime) OR (strtotime(07:00:00) = endtime) OR (strtotime(08:00:00) = starttime) OR (strtotime(08:00:00) = endtime) OR (starttime = strtotime(07:00:00)) OR (starttime = strtotime(08:00:00)) OR (endtime = strtotime(07:00:00)) OR (endtime = strtotime(08:00:00)) ) AND hairdresserid = 12 AND date = 2012-01-25`

## 编辑＃1：

```
Query failed: SELECT * FROM bookings WHERE ( (1359118800 < starttime AND 1359122400 > starttime) OR (1359118800 > starttime AND 1359122400 < endtime) OR (1359118800 > starttime AND 1359118800 < endtime) OR (starttime < 1359118800 AND starttime > 1359122400) OR (starttime > 1359118800 AND endtime < 1359122400) OR (starttime > 1359118800 AND endtime < 1359118800) OR (1359118800 = starttime) OR (1359118800 = endtime) OR (1359122400 = starttime) OR (1359122400 = endtime) OR (starttime = 1359118800) OR (starttime = 1359122400) OR (endtime = 1359118800) OR (endtime = 1359122400) ) AND hairdresserid = 12 AND date = 2012-01-25 
```

## 编辑＃2：

```
Query failed: SELECT * FROM bookings WHERE ( (1359118800 < starttime AND 1359122400 > starttime) OR (1359118800 > starttime AND 1359122400 < endtime) OR (1359118800 > starttime AND 1359118800 < endtime) OR (starttime < 1359118800 AND starttime > 1359122400) OR (starttime > 1359118800 AND endtime < 1359122400) OR (starttime > 1359118800 AND endtime < 1359118800) OR (1359118800 = starttime) OR (1359118800 = endtime) OR (1359122400 = starttime) OR (1359122400 = endtime) OR (starttime = 1359118800) OR (starttime = 1359122400) OR (endtime = 1359118800) OR (endtime = 1359122400) ) AND hairdresserid = 12 AND date = 2012-01-25 
```

## 编辑#3：

```
Query failed: SELECT * FROM bookings WHERE ( ('07:00:00' < starttime AND '08:00:00' > starttime) OR ('07:00:00' > starttime AND '08:00:00' < endtime) OR ('07:00:00' > starttime AND '07:00:00' < endtime) OR (starttime < '07:00:00' AND starttime > '08:00:00') OR (starttime > '07:00:00' AND endtime < '08:00:00') OR (starttime > '07:00:00' AND endtime < '07:00:00') OR ('07:00:00' = starttime) OR ('07:00:00' = endtime) OR ('08:00:00' = starttime) OR ('08:00:00' = endtime) OR (starttime = '07:00:00') OR (starttime = '08:00:00') OR (endtime = '07:00:00') OR (endtime = '08:00:00') ) AND hairdresserid = 12 AND date = 2012-01-25 
```

## 编辑＃4：

```
Query failed: SELECT * FROM bookings WHERE ( ('07:00:00' < starttime AND '08:00:00' > starttime) OR ('07:00:00' > starttime AND '08:00:00' < endtime) OR ('07:00:00' > starttime AND '07:00:00' < endtime) OR (starttime < '07:00:00' AND starttime > '08:00:00') OR (starttime > '07:00:00' AND endtime < '08:00:00') OR (starttime > '07:00:00' AND endtime < '07:00:00') OR ('07:00:00' = starttime) OR ('07:00:00' = endtime) OR ('08:00:00' = starttime) OR ('08:00:00' = endtime) OR (starttime = '07:00:00') OR (starttime = '08:00:00') OR (endtime = '07:00:00') OR (endtime = '08:00:00') ) AND hairdresserid = 12 AND date = '2012-01-25' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:11:33.503

mysql中没有`strtotime`函数，所以你必须执行以下操作

从查询中删除所有的`strtotime`并将其添加到`$mystarttime`( `$mystarttime = strtotime('07:00:00');`) 或替换每个出现的`strtotime($myendtime)`with `".strtotime($myendtime)."`。

我认为您可以更轻松地编写查询，您可以尝试以下操作：

```
"SELECT * FROM " . $tbl_name2 . " WHERE 
(starttime BETWEEN " . $mystarttime . " AND " . $myendtime . ") 
AND 
(endtime BETWEEN "    . $mystarttime . " AND " . $myendtime . ") 
AND 
hairdresserid = " . $myhairdresserid . "
AND
date = '" . $mydate . "';" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:15:49.850

[strtotime](http://php.net/manual/en/function.strtotime.php)是一个 PHP 函数。不能用 SQL 语句编写。相反，连接它。

如果您的字段`starttime`是**整数**数据类型，我会这样做：

```
$sql = "SELECT * FROM ".$tbl_name2."
        WHERE startime > '".strtotime($mystarttime)."' 
        AND starttime < '".strtotime($myendtime)."' 
        AND date = '".$mydate."'"; 
```

如果您的字段`starttime`是**时间**数据类型（例如，00:00:00），我会这样做：

```
$sql = "SELECT * FROM ".$tbl_name2."
        WHERE startime > '".$mystarttime."' 
        AND starttime < '".$myendtime."' 
        AND date = '".$mydate."'"; 
```

关于 PHP 中的字符串引号，更好的做法是在连接字符串时使用单引号并在内部使用双引号。单引号字符串在运行时可能更快，因为它们不需要被解析。

```
$sql = 'SELECT * FROM '.$tbl_name2.'
        WHERE startime > "'.$mystarttime.'"
        AND starttime < "'..$myendtime.'"
        AND date = "'.$mydate.'"'; 
```

# java - 奇怪的 PHP shell_exec Java 行为

> ID：14518510
> 
> 赞同：0
> 
> 时间：2013-01-25T09:06:10.970
> 
> 标签：java, php

我遇到了一个与 PHP shell_exec() 相关的非常不寻常的问题。好吧，我实际上要执行外部java程序。我做这样的测试

```
<?php
    $command = 'C:\\Program Files\\Java\\jdk1.6.0_35\\bin\\java.exe';
    $val = shell_exec($command);

    echo('command:' . $command);
    echo('<BR>');
    echo('val:' . $val);
?> 
```

一切都很好，但是当我尝试这样做时

```
<?php
    $command = 'C:\\Program Files\\Java\\jdk1.6.0_35\\bin\\javac.exe';
    $val = shell_exec($command);

    echo('command:' . $command);
    echo('<BR>');
    echo('val:' . $val);
?> 
```

没有产出。真的很奇怪。我也尝试过使用 exec() 但没有什么不同。下一件奇怪的事情是当我尝试这个时

```
<?php
    $command = 'C:\\Program Files\\Java\\jdk1.6.0_35\\bin\\java.exe -version';
    $val = shell_exec($command);

    echo('command:' . $command);
    echo('<BR>');
    echo('val:' . $val);
?> 
```

我使用确切的 java.exe，但添加了一个 -version 作为额外选项。没有输出出现。

java.exe 和 javac.exe 在命令行中执行时都会给出输出。我使用 Win 7 64 位、XAMPP 1.8.1（Apache 2.4.3、PHP 5.4.7）和 JDK 1.6 更新 35。

我在这里搜索了这个东西，并试图实现对相关问题的回答，但他们没有解决。

与此相关的任何解释，.? 感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:17:20.053

i searched an found the answer like this:

1.  java treat java.exe execution as a normal output when javac.exe as an error. this make the first code returns output but not with the second.
2.  the third code seems (un)like the first. yes it executes the java.exe, but with an aditional option -version. and java treat the output as an error. i have no idea why do they treat them differently.

so the code would be okay if we put and extra 2>&1 which will redirect the standard error to standard output.

```
<?php
    $command = '"C:\\Program Files\\Java\\jdk1.6.0_35\\bin\\javac.exe" 2>&1';
    $val = shell_exec($command);

    echo('command:' . $command);
    echo('<BR>');
    echo('val:' . $val);
?> 
```

and so with this

```
<?php
    $command = '"C:\\Program Files\\Java\\jdk1.6.0_35\\bin\\java.exe" -version 2>&1';
    $val = shell_exec($command);

    echo('command:' . $command);
    echo('<BR>');
    echo('val:' . $val);
?> 
```

# cron - seam-cron 、 @Expiration 和 @IntervalCron？

> ID：14518511
> 
> 赞同：0
> 
> 时间：2013-01-25T09:06:12.310
> 
> 标签：cron, quartz-scheduler, seam3

我正在将我的项目从**seam 2**迁移到**seam 3**。

在 seam 2 中，我们有`@Expiration`和`@IntervalCron`注解，但在**seam-cron**中，我们没有任何这样的注解。`@scheduled`在那里，但它不符合我的要求。

我浏览了文档，但找不到任何运气。

有没有办法处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T10:11:10.773

我不建议使用 Seam Cron，因为该项目处于非活动状态并且不会再有发布。至少据我所知。

所以目前我建议改用 EJB3 的调度功能。

我不知道提供此类功能的任何其他 CDI 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T10:10:58.473

当使用依赖 EJB 作为 CDI bean 时，EJB3 调度/定时器/异步是有问题的。

您可以考虑为 Cron 编写 CDI 扩展，例如使用 Quartz 进行调度，jaxenter.com 提供了一个很好的教程。

[http://jaxenter.com/tension-programming-42972.html](http://jaxenter.com/tension-programming-42972.html)

# c# - 如何删除具有未知 int 的字符串的最后一部分？

> ID：14518516
> 
> 赞同：0
> 
> 时间：2013-01-25T09:06:27.803
> 
> 标签：c#, string

所以，我正在制作一个从我家中的一台 PC 到另一台 PC 的文件传输程序。客户端可以查看服务器的文件并获取它想要的内容。（使移动项目/文档/音乐变得非常容易）。这是文件字符串的示例：

```
New Text Document.txt : "(FILE)-(" + f.Length + " Bytes)" 
```

我的问题是删除：“（文件）-（”+ f.Length +“字节）”。我怎样才能从字符串中删除那部分？f.Length 未知的地方...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:12:46.690

作为正则表达式答案的替代方法，一种选择是使用 LastIndexOf 查找字符串已知部分的最后一次出现（例如`(FILE)`）。

```
var oldString = "ThisIsAString (FILE)-(1234 Bytes";
int indexToRemoveTo = oldString.LastIndexOf("(FILE)");

// Get all the characters from the start of the string to "(FILE)"
var newString = oldString.Substring(0, indexToRemoveTo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:11:44.763

我希望我已经得到了你想要的

```
string contents = "some text (FILE)-(5435 Bytes)  another text";

string result = Regex.Replace(contents, @"\(FILE\)-\(\d+ Bytes\)", "");

Console.WriteLine (result); 
```

印刷：

```
some text   another text 
```

之后删除所有内容的解决方案`.txt`

```
string contents = "some text .txt (FILE)-(5435 Bytes)  another text";
string lastSegment = ".txt";
var result = contents.Substring(0, contents.IndexOf(lastSegment) + lastSegment.Length);
Console.WriteLine (result); 
```

印刷`some text .txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:12:04.267

```
var match = Regex.Match(pattern: @"\((.*)\)-\(\d+ Bytes\)$", input: name);
if(match.Success)
{
    string fileName = match.Groups[1].Value;
} 
```

# python - 为什么我在一种情况下得到这个“IndexError：字符串索引超出范围”，而在另一种情况下却没有？

> ID：14518519
> 
> 赞同：2
> 
> 时间：2013-01-25T09:06:29.927
> 
> 标签：python

```
#i couldnt find the difference in the code 
    >>> def match_ends(words):
     # +++your code here+++
     count=0
     for string in words:
      if len(string)>=2 and string[0]==string[-1]:
       count=count+1
     return count

>>> match_ends(['', 'x', 'xy', 'xyx', 'xx'])
2
>>> 
>>> def match_ends(words):
    # +++your code here+++
     count=0
     for string in words:
      if string[0]==string[-1] and len(string)>=2:
       count=count+1
     return count

>>> match_ends(['', 'x', 'xy', 'xyx', 'xx'])

   Traceback (most recent call last):
   File "<pyshell#26>", line 1, in <module>
   match_ends(['', 'x', 'xy', 'xyx', 'xx'])
   File "<pyshell#25>", line 5, in match_ends
   if string[0]==string[-1] and len(string)>=2:
   IndexError: string index out of range 
```

`if len(string)>=2 and string[0]==string[-1]:`除了第一个函数和 `if string[0]==string[-1] and len(string)>=2:`第二个函数中的 if 条件外，我找不到代码中的差异

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:08:30.847

首先，您首先检查是否有足够的字符进行测试，然后您没有：

```
if len(string)>=2 and string[0]==string[-1]: 
```

和

```
if string[0]==string[-1] and len(string)>=2: 
```

并传入一个*空*字符串：

```
match_ends(['', 'x', 'xy', 'xyx', 'xx']) 
```

空字符串的长度为 0，索引 0 处没有字符：

```
>>> len('')
0
>>> ''[0]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: string index out of range 
```

`if`布尔表达式正在从左到右进行评估，并且在测试`string[0]==string[-1]`之前评估表达式`len(string)>=2`，然后对该空字符串失败。

在另一个版本中，`len(string)>=2`首先评估该部分，发现是`False`针对空字符串（0 不大于或等于 2），然后 Python 根本不需要查看`and`表达式的另一半，因为有`and`表达式不可能变成`True`后半部分的结果。

请参阅python 文档中的[布尔表达式：](http://docs.python.org/2/reference/expressions.html#boolean-operations)

> 表达式`x and y`首先计算`x`; 如果`x`为假，则返回其值；否则，`y`评估并返回结果值。

# java - 类中的 Java 字符串数组 - Eclipse 中的大括号错误

> ID：14518530
> 
> 赞同：0
> 
> 时间：2013-01-25T09:07:15.817
> 
> 标签：java, arrays, string, curly-braces

我已经为此搜索过，并且看到了一些类似的问题，但不是专门针对这个问题（无论如何我都能找到）。

我在这两个语句之前和之后的行中收到一个大括号/分号错误。它们是类的成员（不在类方法中）。当我删除数组分配行（第二行）时，大括号/分号错误消失了。我傻眼了，但知道有一个简单的答案。

```
public class Test {
    private int var1 = 1;

    // These are the troublesome lines
    public String[] name = new String[10];
    name[0] = "Mary"; // When I remove this line, both the errors go away

    public int var2 = 10;
} 
```

我得到的 Eclipse (Juno) 中的错误是：

```
Syntax error on token ";", { expected after this token 
```

...关于“var1”行上的错误，并且：

```
Syntax error, insert "}" to complete Block 
```

...在“var2”行上。

我究竟做错了什么？我尝试了不同的差异，例如：

```
(String) name[0] = "Mary"; 
```

...等等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:09:18.320

问题是这个语句：

```
name[0] = "Mary"; 
```

不在方法、构造函数或实例初始化程序中。只有*声明*（和初始化程序）可以位于类的顶层 - 而不是语句。

我建议你把它放在构造函数中。

```
public Test() {
    names[0] = "Mary";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T09:10:13.567

```
public class Test {
    private int var1 = 1;

    // These are the troublesome lines
    public String[] name = new String[10];

    // Use a constructor for initialization or
    // declare the string array as   public String[] name = {"Mary" };
    public Test() {
       name[0] = "Mary"; // When I remove this line, both the errors go away
    }
    public int var2 = 10;
} 
```

在java中，您必须将语句放入方法/块中。

例如

```
public class TestB {
    public String[] s = new String[10];

    {
        s[0] = "10";
    }

} 
```

实际上是合法的（但我不会使用它，除了静态成员）

编辑：关于静态成员的说明

通常我们必须使用纯静态对象，在这种情况下，提供初始化的一种简单方法是使用匿名静态块。就像是：

```
public class TestStatic {
   private String [] someStaticStringArray = new String [10];
   static {
       someStaticStringArray[0] = "foo";
       someStaticStringArray[1] = "bar";
   }
   // Or better with static HashMaps
   private static HashMap<String, String> hm = new HashMap<String, String>();
   static {
     hm.put("key", "val");
     hm.put("key2", "val2");
     hm.put("key3", "val3");
   }
} 
```

对于静态数据成员，当我没有办法提供工厂方法或工厂对象时，我就使用这种方式。对于非静态数据成员，我更喜欢使用构造函数，即使匿名块也有效。

在 java 中提供初始化的方法有很多，我想个人喜好是选择其中一种的主要原因。

对于您的特殊情况，我会选择这样的东西：

```
public class TestC {
   // Static data member, constructor does not read data from XML
   private static YourDataObject obj = new YourDataObject();

   public static YourDataObject getInstance(String xmlFile) {
      // Read XML file

      // Actually initialize the instance
      obj.set...(); // 

      // return the instance
      return obj;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:11:20.247

试试这个解决方案：

```
public String[] name = new String[10];

//  instance initializer code block comes
{
    name[0] = "Mary";
} 
```

此代码块类似于*静态初始化程序*块 ( `static { ... }`)，但在初始化变量时在实例化时执行。

# matlab - Matlab中的同步

> ID：14518533
> 
> 赞同：1
> 
> 时间：2013-01-25T09:07:24.510
> 
> 标签：matlab, parallel-processing, synchronization, parfor

我`parfor`以这种方式并行处理数据：

```
iteration = 10;
result = zeros(1, iteration);

matlabpool open local 2
    parfor i = 1:iteration
        data = generate_data();
        result(i) = process_data(data);
    end
end
matlabpool close 
```

它工作正常，但我有一个问题。我的函数`generate_data`会生成唯一数据（即 0、1、2、3、4 ...），但实际上有时我会两次给出相同的值（我给出 0、1、1、2、3、4、4、5、 ...）。简单来说，我的函数如下所示：

```
function data = generate_data()

persistent counter generated_data;

if(isempty(counter))
    counter = 1;
    generated_data = [0 1 2 3 4 5 6 7 8 9]; 
end

data = generated_data(counter);
counter = counter + 1; 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:06:15.153

如果我理解正确，您要确保您的循环`generate_data`的两次迭代不会返回相同的值`PARFOR`。不幸的是，您不能直接在`PARFOR`循环中执行此操作，因为不允许通信。您的选择基本上是：要么调用`generate_data`MATLAB 客户端；要么调用 MATLAB 客户端；或运行两个`PARFOR`循环，可能是这样的：

```
parfor ii = 1:iteration
  generated(ii) = generate_data();
end

% omit duplicated values - perhaps you might wish to generate
% some more here too...
generated = unique(generated);

parfor ii=1:numel(generated)
  result(ii) = process_data(generated(ii));
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:23:52.263

我试过这个：

```
function data = generate_data(id)

persistent generated_data;
if(isempty(generated_data))
    generated_data = [0 1 2 3 4 5 6 7 8 9]; 
end

data = generated_data(mod(id - 1, length(generated_data)) + 1); 
```

在每次通话中，我都可以使用`id`. 我必须记住，一个数据集只能访问一个`id`. 它有效，但不能解决我的问题。我会`id`像第一篇文章一样消除参数并使用内部计数器。

# java - 可以在不使用构造函数的情况下链接 java 流吗？

> ID：14518537
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:07:30.797
> 
> 标签：java, stream, constructor-chaining

我知道有一种方法可以通过使用构造函数来链接流，如下所示：

```
BufferedReader bf=new BufferedReader(new InputStreamReader(io.openStream())); 
```

但是，还有其他方法吗？

```
SetSink/SetProcess(); 
```

也许？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:11:03.067

由于您不能在没有包装的情况下使用已包装的 Stream，因此答案是

a) 不，你不能和

b) 你不想。

> 一个原因可能是我已经构建了一个非常长的链，并且只想将接收器流更改为末端，而不是构建一个新的。

在这种情况下，您可以使用中间变量，例如

```
InputStream in = new FileInputStream(filename);
if (filename.endsWith(".gz"))
    in = new GZIPInputStream(in);
in = new BufferedInputStream(in);
if (objectStream)
   return new ObjectInputStream(in);
return DataInputStream(in); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:12:49.330

如果您查看[BufferedReader 类](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)的 javadoc ，构建它的唯一方法是在构造函数中传递一个阅读器。

有什么理由不使用构造函数？

# c# - 来自 .NET Compact Framework 3.5 应用程序的随机本机异常

> ID：14518539
> 
> 赞同：1
> 
> 时间：2013-01-25T09:07:43.690
> 
> 标签：c#, windows-mobile, compact-framework

我有一个完全用 C# 在 .NET 3.5 紧凑框架上编写的应用程序，它似乎在随机时刻崩溃并出现本机异常。我的应用程序从不记录任何它只是退出的异常。有时我的应用程序可以运行几个小时，或者您可以启动它，5 分钟后它会崩溃！

我一直在存储有时生成的转储文件，但很难理解问题所在，因为我缺少正在抛出的 dll 的调试符号（netcfagl3_5.dll）。该错误是访问冲突，但尝试读取 WinDbg 的输出让我感到沮丧：

```
FAULTING_IP: 
netcfagl3_5_7b37d000+152b4
7b3922b4 043092e5 ldr         r3,[r2,#4]

EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 7b3922b4 (netcfagl3_5_7b37d000+0x000152b4)
   ExceptionCode: c0000005 (Access violation)
  ExceptionFlags: 00000000
NumberParameters: 2
   Parameter[0]: 00000000
   Parameter[1]: ffffffd4
Attempt to read from address ffffffd4

FAULTING_THREAD:  890fa60a

ERROR_CODE: (NTSTATUS) 0xc0000005 - The instruction at 0x%08lx referenced memory at 0x%08lx. The memory could not be %s.

EXCEPTION_CODE: (NTSTATUS) 0xc0000005 - The instruction at 0x%08lx referenced memory at 0x%08lx. The memory could not be %s.

EXCEPTION_PARAMETER1:  00000000

EXCEPTION_PARAMETER2:  ffffffd4

READ_ADDRESS:  ffffffd4 

FOLLOWUP_IP: 
netcfagl3_5_7b37d000+152b4
7b3922b4 043092e5 ldr         r3,[r2,#4]

APP:  nk.exe

BUGCHECK_STR:  APPLICATION_FAULT_INVALID_POINTER_READ_ZEROED_STACK

PRIMARY_PROBLEM_CLASS:  INVALID_POINTER_READ

DEFAULT_BUCKET_ID:  INVALID_POINTER_READ

LAST_CONTROL_TRANSFER:  from 7b394094 to 7b3922b4

STACK_TEXT:  
2546ec78 7b394094 : 01d5ebec 890fa60a ffffffd0 ffffffd0 : netcfagl3_5_7b37d000+0x152b4
2546ec84 2551cc4c : 01d5ebec 890fa60a ffffffd0 ffffffd0 : netcfagl3_5_7b37d000+0x17094
2546ec90 7b385280 : 01d5ebec 890fa60a ffffffd0 ffffffd0 : 0x2551cc4c
2546ec9c 7b38536c : 01d5ebec 890fa60a ffffffd0 ffffffd0 : netcfagl3_5_7b37d000+0x8280
2546ece8 7b38eb2c : 01d5ebec 890fa60a ffffffd0 ffffffd0 : netcfagl3_5_7b37d000+0x836c
2546ed20 7b38ed84 : 01d5ebec 890fa60a ffffffd0 ffffffd0 : netcfagl3_5_7b37d000+0x11b2c
2546ed5c 7b38f0c4 : 01d5ebec 890fa60a ffffffd0 ffffffd0 : netcfagl3_5_7b37d000+0x11d84
2546eda4 00000000 : 01d5ebec 890fa60a ffffffd0 ffffffd0 : netcfagl3_5_7b37d000+0x120c4 
```

我在这里有 4 个转储文件[https://www.dropbox.com/s/9g6zjbxh4ghv5v3/DumpFiles.zip](https://www.dropbox.com/s/9g6zjbxh4ghv5v3/DumpFiles.zip)但我可以获得更多。

作为一个附带问题，我尝试在互联网上搜索以找出 netcfagl3_5.dll 的调试符号在哪里，但成功有限，所以如果有人知道在哪里可以找到它们，那就太好了。

我正在追赶摩托罗拉，因为具体来说，这似乎是 ES400 设备的一个问题，他们关于这个问题的任何更新我都会在这里更新。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T00:14:15.603

经过数小时的调试问题后，我相信我已经设法复制了该问题，从而确定了我的应用程序中的原因。

我有一个 TitleBar 控件，它位于每个表单的顶部，它显示了当前的表单标题、电池状态以及当前与我们的服务器同步的状态。

该控件订阅我们的同步引擎公开的事件以获取最新状态。引发此事件时，我们使用图标更新控件以显示其进度。

我遵循有关跨线程访问的所有规则，并确保控件仅使用 UI 线程进行操作，但似乎如果我们不断获得状态更改，则内部会导致 AccessViolation。

如果我使用 Timer 并每隔几秒钟更新一次控件，而不是在状态发生变化时，问题就会消失，我们不再会随机退出进程。

上面堆栈跟踪的关键部分比其他任何事情都更有帮助，因为 netcfagl3_5 是 Windows 窗体本机 dll，因此难题的各个部分似乎都融合在一起了。

# iphone - 如何在常量类中获取 NSuserdefaults 值？

> ID：14518540
> 
> 赞同：0
> 
> 时间：2013-01-25T09:07:48.107
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中我有一个 constants.h 类，它有一些预定义的 values.as

```
#define #define PUSHER_API_KEY@""
#define PUSHER_API_SECRET @""
#define PUSHER_APP_ID     @"" 
```

和一个身份验证 url `#define PRESENCE_AUTH_URL @"http://hdjhjf.com/presence-auth.php?uid=11&mdid=14"`，其中 uid 和 mdid 我需要是动态的。所以我需要从 userdefaults 中获取它。但是在那个 constant.h 类中我如何使用它。当我尝试使用它时，它给了我一个错误initiliser 不是编译时间常数。我必须将此硬编码 11&14 更改为动态值。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:47:18.957

如果您迫切希望将此作为`#define`声明。然后你可以这样做。

```
#define PRESENCE_AUTH_URL [NSString stringWithFormat:@"http://hdjhjf.com/presence-auth.php?uid=%@&mdid=%@", [[NSUserDefaults standardUserDefaults] objectForKey:@"UDIDKey"], [[NSUserDefaults standardUserDefaults] objectForKey:@"MDIDKey"]] 
```

看起来您正在使用 libPusher，您也可以通过这种方式设置 auth url。

```
pusher.authorizationURL = [NSString stringWithFormat:@"http://hdjhjf.com/presence-auth.php?uid=%@&mdid=%@", [[NSUserDefaults standardUserDefaults] objectForKey:@"UDIDKey"], [[NSUserDefaults standardUserDefaults] objectForKey:@"MDIDKey"]]; 
```

# vb.net - 声明登录查询

> ID：14518541
> 
> 赞同：0
> 
> 时间：2013-01-25T09:07:48.257
> 
> 标签：vb.net, parameters, oledb

```
Function Authenticate(ByVal UserName As String, ByVal Password As String)
    Dim con As New OleDbConnection(connectionstring)

    Dim cmdstring As String
    cmdstring = "SELECT username, password  FROM tblUsers where username = @user AND password = @pass"

    con.Open()

    Dim cmd As OleDbCommand = New OleDbCommand(cmdstring, con)

    cmd.Parameters.AddWithValue("@user", OleDbType.VarChar).Value = UserName
    cmd.Parameters.AddWithValue("@pass", OleDbType.VarChar).Value = Password

    Dim sdr As OleDbDataReader = cmd.ExecuteReader()
    If (sdr.HasRows) Then
        Authenticate = True
    Else
        Authenticate = False
    End If
    sdr.Close()
    con.Close()
    con = Nothing
    Return Authenticate
End Function 
```

任何人都可以帮忙，不知道为什么我`A scalar variable '@user' needs to be declared`一打到这条线就会得到：

```
Dim sdr As OleDbDataReader = cmd.ExecuteReader() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:20:30.693

您需要输入值而不是类型，并使用如下函数：

```
cmd.Parameters.AddWithValue("@user", UserName)
cmd.Parameters.AddWithValue("@pass", PassWord) 
```

这将解决您的错误。在这里你有更多信息： [文档](http://msdn.microsoft.com/es-es/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:04:41.300

答案如下

```
cmdstring = "SELECT username, password  FROM tblUsers where username = ? AND password = ?"

con.Open()

Dim cmd As OleDbCommand = New OleDbCommand(cmdstring, con)

cmd.Parameters.AddWithValue("@user", UserName)
cmd.Parameters.AddWithValue("@pass", Password) 
```

出于某种原因，？在查询中，addwithvalues 也添加了受尊敬的值？在查询中，我花了一段时间才找到这个，所以我想我会分享:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T14:21:45.073

在字符串 Dim cmdstring As String cmdstring = "SELECT username, password FROM tblUsers where username = @user AND password = @pass" 之后

cmdstring cmdstring.replace("@user","'" & UserName & "'").replace("pPassWord","'" & PassWord& "'")

这将创建正确的查询

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-25T09:16:52.313

尝试更改`.ExecuteReader()`为`ExecuteNonQuery()`

```
Dim sdr As OleDbDataReader = cmd.ExecuteNonQuery() 
```

这是关于 ExecuteReader、ExecuteNonQuery、ExecuteScalar 的一个很好的解释[……何时使用什么？](http://blogs.x2line.com/al/archive/2007/05/01/3049.aspx)

# android - Facebook 签入 FQL 查询

> ID：14518544
> 
> 赞同：0
> 
> 时间：2013-01-25T09:07:59.207
> 
> 标签：android, facebook-graph-api

我正在使用这个多重查询来查询 Facebook FQL，以获取上周在我的位置附近进行的所有签到。

奇怪的是，Facebook 回复了 author_uid 的签到，这些不是我的朋友（以为他会自动不允许我查看这些数据以保护那些人的隐私），这并没有真正帮助我..

我的目标是让我所有的朋友在我所在地区的所有签到。

我最大的问题是当你有很多朋友时——让他们所有的签到是不可能完成的任务——因为当使用

```
SELECT page_id, coords, author_uid, timestamp,message FROM checkin WHERE author_id IN (SELECT uid2 FROM friend where uid1 = me()) 
```

是一个永远不会结束的查询......或者至少我没有耐心等待足够长的时间......

这是我当前的查询：

```
{"checkin":"SELECT page_id, coords, author_uid, timestamp,message FROM checkin WHERE page_id IN (SELECT page_id FROM #places) AND timestamp >= 1358499380",
"places":"SELECT page_id, name, distance(latitude, longitude, '32.804752175000004', '34.980942025') FROM place WHERE checkin_count > 50 AND distance(latitude, longitude, '32.804752175000004', '34.980942025') <= 50000 LIMIT 50"} 
```

将非常感谢您的建议..

# c++ - SendNotifyMessage 控制 Windows 监视器导致 IE 选项卡重新排序

> ID：14518545
> 
> 赞同：0
> 
> 时间：2013-01-25T09:08:02.137
> 
> 标签：c++, windows, winapi

我有一个关于在 Windows 中发送消息以使用`winapi`功能打开监视器的技术问题。

当我发送这样的消息时：

```
SendNotifyMessage(HWND_BROADCAST,WM_SYSCOMMAND,SC_MONITORPOWER,-1) 
```

中的标签`Internet Explorer`被移动。这是我已经解决了三天的问题，至今还没有找到解决方案。你们能解释一下为什么我发送该消息时 IE 中的标签会移动吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:19:43.260

我希望发生的事情是这样的：

1.  您有多个显示器。
2.  消息到达 IE，它的监视器正在关闭。
3.  IE 通过将自身移动到其余监视器之一来对此做出响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:34:02.130

如果您想通过发送 SC_MONITORPOWER 来控制显示器的电源，您只需将此消息发送到您自己的程序本身（正在发送消息的程序）即可。此消息最终将过滤到 DefWindowProc 并由操作系统处理。

```
PostMessage(m_hWnd, WM_SYSCOMMAND, SC_MONITORPOWER, -1); 
```

用户程序广播这样的系统消息可能会导致意想不到的复杂性，因为所有应用程序都被迫对其进行响应并以自己的方式多次处理消息。

参考：http: [//blogs.msdn.com/b/oldnewthing/archive/2006/06/13/629451.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2006/06/13/629451.aspx)

# sql - 在数据库中表示无根树/图表/层次结构

> ID：14518549
> 
> 赞同：4
> 
> 时间：2013-01-25T09:08:19.657
> 
> 标签：sql, ms-access, database-design, relational-database

似乎有几个很好的选择来表示数据库中的分层数据，最流行的显然是树遍历算法。

在我的情况下可能可行的另一个选择是递归地进行。这可能涉及保存父 ID 并从那里开始 - 尽管这也需要某种方向。

现在我有一个问题，我有一组可以通过连接图来表征的项目，但是没有根，也不一定是起点。例如，可能会发生项目围绕自身循环，因此排序只是每个元素的元素而不是完整的。排序是“父”还是“子”取决于您从哪个方向开始，可以这么说。
此外，每个连接都应该由几个属性来表征，因此需要以某种方式识别连接。
![例子](../Images/f8a01e4ae4af8e721e1c89b5c197f734.png)

另一件事是我仅限于 Access，这意味着我几乎仅限于您的标准 SQL 命令，而没有 SQL 中的递归或函数。
例如，SQL 中的许多动态转换为左/右遍历树的算法不适用于 Access SQL。
我对解决这个问题有很大的兴趣，而不是过多地依赖 VBA。

就性能而言，我预计少于 5000 个项目，尽管有关元素属性及其连接的查询可能有数十个元素。最初，该数据库将被少于 10 个用户同时使用，尽管如果它们运行良好，这些东西往往会在这里迅速扩展。

那么，你将如何实现这个结构呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:16:53.673

我使用了 Joe Celko 的嵌套集合方法。它在正确的情况下工作得非常好。这不是其中一种情况。

一种更灵活的方法，我建议您使用的方法是 Bill Karwin 所说的**[闭包表](https://stackoverflow.com/a/192462/154439)**。

基本思想是**每条**可能的路径都有一个记录。Bill 建议使用两个字段，ancest_id 和 descendant_id。从您的图表中不清楚祖先/后代范式是否真的适用于您的情况。

我还发现为节点之间的跳数添加至少一个字段很有用。我会通过创建一个包含三个字段的表来调整 Bill 的方法：

1.  节点A
2.  节点B
3.  酒花

以下是图表的一些示例数据：

```
NodeA   NodeB  Hops
------  ------ ----
tog171  tog171  0
tog171  abb521  1
abb521  tog171  1
tog171  tog226  2
tog226  tog171  2
tog171  tog218  3
tog218  tog171  3 
```

如果不同颜色的线和实线与虚线有一些语义含义，则还可以将捕获该语义含义的附加字段添加到您的表中。

您的表格中确实有很多条目，但灵活性几乎是无限的。在查看您的图表时，灵活性似乎是您最大的需求。

**编辑**：我的示例数据中的第一行具有 0 个跃点实际上是我从 PJ Eby 在他的博客文章 [The simple(?) way to do based tree query in SQL](http://dirtsimple.org/2010/11/simplest-way-to-do-tree-based-queries.html)中学到的一种技术。这些节点的目的是使节点的插入和删除更简单。我强烈推荐该页面以详细了解实施闭包表。

我认为 PJ Eby 的页面实际上是*写入*闭包表的更好资源，而 Bill Karwin 的回答有一些从表中*读取的很好的例子。*

# java - 如果日志文件已轮换怎么办？

> ID：14518550
> 
> 赞同：0
> 
> 时间：2013-01-25T09:08:19.877
> 
> 标签：java, algorithm, file

如果我不断地解析一个日志文件并且我检测到它已经旋转，那么处理这个问题的最佳实践是什么？

1.  更新我的内部哈希图以反映新的文件指针（旋转文件结束）
2.  或者我应该将哈希图更新为 0，以便它可以从一开始就读取旋转的文件

我担心的是，在情况没有异常的情况下。2，我可能从一开始就间接解析一个大文件，给主机带来很大的负载。但是，如果我不使用。1 我可能会错过一些我正在解析日志文件的关键信息。

这是我放在一起的代码。

```
currentFilePointer = util.FileManagement.getLastFilePointerFromFile(file.getName());
lastFilePointer = Long.parseLong(lastReadFiles_.get(file.getName()).toString());

if (currentFilePointer < lastFilePointer) // file has grown
{
     processLineByLine(file.getName(), currentFilePointer, lastFilePointer);
} else if (currentFilePointer > lastFilePointer) // file has been rotated
{
     lastReadFiles_.put(file.getName(), currentFilePointer); // Option 1
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:31:42.180

从您发布的代码中，我看不到任何 Hashmap ...很难判断哪种解决方案更好:)

这是我用来“跟踪”文件的代码片段，它也支持旋转（在单独的线程中运行）：

```
@Override
public void start() {
    File file = ...
    long filePointer = 0;
    try {
        while (running) {
            Thread.sleep(updateInterval);
            long len = file.length();
            if (len < filePointer) {
                // File was rotated
                filePointer = 0;
            } else if (len > filePointer) {
                // File must have had something added to it!
                RandomAccessFile raf = new RandomAccessFile(file, "r");
                raf.seek(filePointer);

                // Here you can read the next lines using for example a BufferedReader

                filePointer = raf.getFilePointer();
                raf.close();
            }
        }
    } catch (Exception e) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:42:15.457

我认为您的问题一般是如何管理日志文件。此类操作可以使用诸如 bash 之类的脚本语言或诸如 python 之类的一些通用脚本语言来完成。使用 java 的一个广泛的教程是[管理 Java 子系统的日志](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Certificate_System/8.1/html/Admin_Guide/java-logs.html)。

# c# - C# .Net Sockets 缓冲区理解

> ID：14518551
> 
> 赞同：2
> 
> 时间：2013-01-25T09:08:20.030
> 
> 标签：c#, .net, sockets, asynchronous, tcp

我试图了解在事物的套接字方案中使用缓冲区。这是我的理解，如果有人能告诉我我是否正确或反馈我可能误解的地方，那就太好了。

使用 MSDN[示例](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)中详细介绍的异步套接字（以下所有内容均参考该示例）

下面描述了一个我理解的状态对象：

```
// State object for reading client data asynchronously
public class StateObject
{
    // Client  socket.
    public Socket workSocket = null;
    // Size of receive buffer.
    public const int BufferSize = 1024;
    // Receive buffer.
    public byte[] buffer = new byte[BufferSize];
    // Received data string.
    public StringBuilder sb = new StringBuilder();
} 
```

现在它说缓冲区是 1024 字节。当您接收数据时，您一次只要求 1024 个字节？在异步方法 ReceiveCallback 中，它只要求 1024，然后说这可能不是所有数据，所以现在检索下一个 1024。

所以基本上，发送到套接字的输入流以 1024 字节块的形式读取，并且您一直读取直到到达终点（根据您自己的定义）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:44:42.247

> 所以基本上，发送到套接字的输入流以 1024 字节块的形式读取，并且您一直读取直到到达终点（根据您自己的定义）？

正确的。由于 TCP 只是一个数据流，因此如果您的消息在流中，则实际上无法知道每个数据的长度（除非您始终具有固定长度）。因此，您需要使用某种缓冲区从流中读取，以便能够检测到消息的结尾。

# primefaces - PrimeFaces：如何增加 MindmapNode 的渲染大小

> ID：14518563
> 
> 赞同：2
> 
> 时间：2013-01-25T09:08:55.087
> 
> 标签：primefaces

我正在关注以下 PrimeFaces MindMap 示例：http: [//www.primefaces.org/showcase/ui/mindmap.jsf](http://www.primefaces.org/showcase/ui/mindmap.jsf)

我的问题是：如何增加“气泡”（MindmapNode）的大小，以便在其中显示更多文本？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T07:16:02.820

我花了很长时间试图找出如何做到这一点，所以对于其他任何挣扎的人来说，这里是如何做到的。

在 WinZip 等 ZIP 程序中打开您的 primefaces jar 文件。导航到 META-INF -> 资源 -> primefaces -> 思维导图并打开 mindmap.js 文件。即使在 Notepad++ 等编辑器中打开它时，它也会完全显示在一行上。因此，最简单的方法就是在文件中搜索这一行：

```
raphael.ellipse 
```

该行之后的括号内是 4 个值。最后两个是您正在寻找的。两者中的第一个是宽度，最后一个是高度。

然后，您需要做的就是保存 mindmap.js 文件，返回 WinZip 并更新 jar 中的文件，在 Eclipse（或您选择的 IDE）中转到您的项目，刷新项目并重新启动服务器。

你完成了。

我希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:22:20.993

我查看了生成的源代码，发现大小由 Eclipse 元素中的 rx 和 ry 控制。把你的号码放在那里。[这是一些思维导图的来源](http://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/mindmap/mindmap.js?r=7587)，也许会有用。

# javascript - 当配置依赖于 RequireJS 时使用 RequireJS 配置模块

> ID：14518569
> 
> 赞同：7
> 
> 时间：2013-01-25T09:09:16.460
> 
> 标签：javascript, node.js, requirejs

如果我在文档中错过了这一点，我们深表歉意。基本上我想使用 RequireJS 模块配置功能。我想集中管理给包中模块的配置值。

这是文档中的一个示例：

```
requirejs.config({
    config: {
        'bar': {
            size: 'large'
        },
        'baz': {
            color: 'blue'
        }
    }
});

//bar.js, which uses simplified CJS wrapping:
define(function (require, exports, module) {
    //Will be the value 'large'
    var size = module.config().size;
});

//baz.js which uses a dependency array,
define(['module'], function (module) {
    //Will be the value 'blue'
    var color = module.config().color;
}); 
```

我的问题是我的配置信息会更复杂一些，并且本身会有依赖关系。我想要做：

```
requirejs.config({
    config: {
        'bar': {
            path: path.dirname(module.uri)
            key: crypto.randomBytes(64)
        },
    }
}); 
```

我的配置中的变量需要使用 requireJS 来评估。

对我来说，在 RequireJS 配置（加载模块所需的配置）和用户的模块配置之间进行逻辑分离是有意义的。但我目前正在努力寻找这个:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T21:42:39.567

对于这种解决方案，我会让模块依赖于“配置”模块，您可以使用路径配置将其换成不同的模块。所以如果“bar”需要一些配置，“bar.js”看起来像：

```
define(['barConfig'], function (config) {
}); 
```

然后 barConfig.js 可以有你的其他依赖项：

```
define(['crypto'], function (crypto) {
    return {
      key: crypto.randomBytes(64)
    }
}); 
```

然后，如果您需要不同的配置，例如生产与开发，请使用路径配置将 barConfig 映射到其他值：

```
requirejs.config({
  paths: {
    barConfig: 'barConfig-prod'
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T08:33:12.863

我认为正确的方法是制作一个配置模块......

```
// config.js
define(['module', 'path', 'crypto'], function(module, path, crypto) {
    return {
        path: path.dirname(module.uri)
        key: crypto.randomBytes(64)
    };
}); 
```

然后在其他模块中使用它...

```
// bar.js
define(['config'], function (config) {
    var key = config.key;
}); 
```

然后你可以让它变得像你喜欢的那样复杂！

编辑：你可能会污染这个特殊类的全局命名空间......

```
define(['module', 'path', 'crypto'], function(module, path, crypto) {
    window.config = {
        path: path.dirname(module.uri)
        key: crypto.randomBytes(64)
    };
}); 
```

将其添加到顶层 require 调用：

```
require(['config', 'main']); 
```

然后你可以使用它而不总是将它添加到你的定义中：

```
// bar.js
define([], function() {
    var key = config.key;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:39:08.890

考虑到这一点，我想出了一个解决方法。它不是特别漂亮，但似乎确实有效。

我只需要两次 requireJS(...)，第一次是创建配置，第二次是使用配置加载应用程序模块。

```
requireJSConfig = 
    baseUrl: __dirname
    nodeRequire: require

# Create the require function with basic config
requireJS = require('requirejs').config(requireJSConfig)  
requireJS ['module', 'node.extend', 'crypto', 'path'], (module, extend, crypto, path) ->
    # Application configuration 
    appConfig =
        'bar':
            path:   path.dirname(module.uri)
            key:    crypto.randomBytes(64) # for doing cookie encryption

    # get a new requireJS function with CONFIG data
    requireJS = require('requirejs').config(extend(requireJSConfig, config: appConfig))
    requireJS ['bar'], (app) ->
        ###
            Load and start the server
        ###
        appServer = new app()

        #  And start the app on that interface (and port).
        appServer.start() 
```

在 bar.coffee

```
# bar.coffee
define ['module'], (module) ->
    # config is now available in this module
    console.log(module.config().key) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-05T17:26:46.143

回顾@jrburke 所说的内容，我发现以下模式非常有用：`main.js`在调用`require.config()`.

**main.js**

```
define('config', ['crypto'], function (crypto) {
  return {
    'bar': {
      key: crypto.randomBytes(64)
    },
  };
});

requirejs.config({
  deps: ['app'],
}); 
```

**应用程序.js**

```
require(['config'], function (config){

  // outputs value of: crypto.bar.key
  console.log(config.bar.key);
}); 
```

Plnkr 演示：[http ://plnkr.co/edit/I35bEgaazEAMD0u4cNuj](http://plnkr.co/edit/I35bEgaazEAMD0u4cNuj)

# selenium-webdriver - 如何使用 selenium Web 驱动程序执行数据驱动测试

> ID：14518570
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:09:17.527
> 
> 标签：selenium-webdriver

举一些在 java 中使用 selenium web driver 进行数据驱动测试的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:18:26.110

Selenium 不负责数据驱动测试，您使用的单元测试框架负责。我不使用 Java，但这是它在 C# 中的外观。

```
 [Row("Test1")]
    [Row("Test2")]
    [Row("Test3")]
    [Row("Test4")]
    [Row("Test5")]
    [Row("Test6")]
    [Row("Test7")]
    [Row("Test8")]
    [Row("Test9")]
    public void SomeTest(string dataDriven)
    {
                       // Test code that can use the dataDriven string for whatever
    } 
```

您也可以将行替换为对 cvs 或类似文件的引用。

注意：这是使用 MBUnit

# database - 依赖跟踪功能

> ID：14518572
> 
> 赞同：3
> 
> 时间：2013-01-25T09:09:18.313
> 
> 标签：database, postgresql, plpgsql, cascade

我只是想知道是否有人知道如何在运行后自动创建视图`DROP ... CASCADE`？现在我首先尝试使用经典`DROP VIEW myview`语句删除视图，如果我无法删除视图，因为其他对象仍然依赖它，然后检查 postgres 列出的所有对象名称并保存它们的创建，然后我使用级联运行 drop。有时它就像十几个物体。但也许你有一些想法以更自动化的方式处理这个问题？

也许有人有一些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:56:53.543

Next step... (continuation of my previous answer).

function **save_views(objectname text)** stores views depending on **objectname** (view or table) in table **saved_views**.

function **restore_views()** restores views from table **saved_views**.

```
create or replace function save_views_oid(objectid oid)
returns void language plpgsql as $$
declare
    r record;
begin
    for r in
        select distinct c.oid, c.relname, n.nspname
        from pg_depend d
        join pg_rewrite w on w.oid = d.objid
        join pg_class c on c.oid = w.ev_class
        join pg_namespace n on n.oid = c.relnamespace
        where d.refclassid = 'pg_class'::regclass 
        and d.classid = 'pg_rewrite'::regclass
        and d.refobjid = objectid
        and c.oid <> objectid
    loop
        insert into saved_views values (
            'CREATE VIEW ' || r.nspname || '.' || r.relname ||
            ' AS ' || pg_get_viewdef(r.oid, 'f'));
        perform save_views_oid(r.oid);
    end loop;
end; $$;

create or replace function save_views(objectname text)
returns void language plpgsql as $$
begin
    create table if not exists saved_views(viewbody text);
    truncate saved_views;
    perform save_views_oid(objectname::regclass);
end; $$;

create or replace function restore_views()
returns void language plpgsql as $$
declare
    viewtext text;
begin
    for viewtext in
        select viewbody from saved_views
    loop
        execute viewtext;
    end loop;
    drop table saved_views;
end; $$; 
```

Test:

```
select save_views('my_view'); -- may be save_views('my_schema.my_view');
select * from saved_views; 
```

Use:

```
select save_views('my_view'); 
drop view my_view cascade;
create view my_view as ...
select restore_views(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:49:06.467

表[pg_depend](http://www.postgresql.org/docs/current/static/catalog-pg-depend.html)包含所有必要的信息，但解释它们并不容易。在这里，您有草图递归函数来检索文本格式的 pg_class 对象的依赖关系。您可以根据需要调整功能（并向我们展示结果：）。

```
create or replace function dependency
    (class_id regclass, obj_id regclass, obj_subid integer, dep_type "char")
returns setof text language plpgsql as $$
declare
    r record;
begin
    return query 
        select pg_describe_object(class_id, obj_id, obj_subid)
            || ' ('|| dep_type|| ')';
    for r in
        select classid, objid, objsubid, deptype
        from pg_depend
        where class_id = refclassid
        and obj_id = refobjid
        and (obj_subid = refobjsubid or obj_subid = 0)
    loop
        return query select dependency(r.classid, r.objid, r.objsubid, r.deptype);
    end loop;
end; $$;

use:

select dependency('pg_class'::regclass, 'my_view'::regclass, 0, ' ');
select dependency('pg_class'::regclass, 'my_table'::regclass, 0, ' '); 
```

# groovy - 当 null 作为参数传递时，Groovy 选择了什么重载方法？

> ID：14518573
> 
> 赞同：5
> 
> 时间：2013-01-25T09:09:26.410
> 
> 标签：groovy

```
class SimpleTest {
    void met( Object a ) {
        println "Object"
    }

    void met( String b ) {
        println "String"
    }

    static main( args ) {
        SimpleTest i = new SimpleTest()
        i.met(null)
    }
} 
```

此代码将产生输出“对象”。它不会选择最专业的方法版本。在这种情况下，String 比 Object 更专业，因此该规则不适用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T14:37:24.147

Groovy 使用距离计算方法。基本上，如果您将类和接口想象为图中的节点并且它们通过它们的继承关系连接，那么我们会寻找从给定参数类型（参数的运行时类型）到我们的参数类型（静态类型方法参数有）。连接有不同的权重，基本上去超类意味着我认为距离为 3，到接口 1，包装原语也是 1，vargs 包装也有权重（并且不能再在图中真正表示，所以抱歉图片略有失败）

在 null 的情况下，这当然不能工作。这里我们改为查看参数类型到 Object 的距离。虽然非空情况是最可能的特殊方法，但我们对空部分采用最通用的方法。在 Java 中，您通常会使用静态类型或使用强制转换来确保选择什么。在 Groovy 中，我们没有静态类型，并且通常无法正确确定最特殊的类型。因此，我们决定采用最通用的方法来代替这种情况。一般来说，它工作得很好。

然后对象有点像一个后备，它允许你集中处理空值。在未来的版本中，我们可能会允许使用显式的 null 类型，如果存在的话，它将优先于 Object。

虽然您经常可以直接看到类的距离方法，但对于接口来说它有点复杂。基本上算法是这样的：如果我当前的类直接实现了我们正在寻找的接口，那么它与距离 1 匹配。如果该类实现的任何接口具有我们寻找的接口作为父接口，则计算“跳”，直到我们在那里作为距离。但是我们寻找最短的距离。所以我们也以同样的方式看待超类。来自那里的任何搜索结果都将具有 +1 的距离（对于超类跃点）。如果超类搜索给出的距离比在实现接口上搜索的距离短，则取而代之的是超类搜索结果。

至于使用接口处理 null ......如果接口不扩展另一个，则到 Object 的距离为 1。如果是，则为父界面的距离+1。如果扩展多个接口，又是最短路径。

让我们看看 List 和 Integer 是否为 null。
List 扩展 Collection，Collection 扩展 Iterable，Iterable 没有父级。Iterable 的距离为 1，Collection 的距离为 2，List 的距离为 3。整数扩展数字，数字扩展对象。因为我们跳了两次，所以这里的距离为 6（2x3），比另一种情况大得多。是的，这意味着通常我们更喜欢接口。实际上，我们这样做是出于实际原因，因为这种方式被证明最接近实际的编程实践。

# iphone - 仪器中的 VM Tracker 为空

> ID：14518576
> 
> 赞同：0
> 
> 时间：2013-01-25T09:09:31.170
> 
> 标签：iphone, ios, objective-c, profiling, instruments

尝试分析某个应用程序时，仪器中的 VM 跟踪器为空。我可以分析所有其他应用程序，但这个只是显示为空。

我打开了自动快照，但手动快照不起作用。

我不记得该项目是否有任何特定更改可能导致 VM Tracker 停止工作。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:26:54.753

好的，它现在正在工作。在方案中，我为 Profiling 设置了 Release 模式。更改为调试，现在它可以工作了。

# c# - 在会话中存储 ID，重定向到新页面并根据会话显示内容

> ID：14518577
> 
> 赞同：-2
> 
> 时间：2013-01-25T09:09:33.863
> 
> 标签：c#, session

我正在研究一个解决方案，其中我有一个显示我的记录列表的网格视图。当您单击一个时，您将被重定向到详细信息页面，我创建了一个仅存储 ID 的会话。一切正常。

我的问题是：如何获取新页面上的其余数据？有可能这样还是我需要将所有值存储在会话中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:15:32.653

尝试

```
Session.Add(ID, valueOfID); 
```

您可以通过以下方式访问它：

```
string str = (string)Session[ID]; 
```

# javascript - addthis 按钮消失了？

> ID：14518582
> 
> 赞同：0
> 
> 时间：2013-01-25T09:09:48.900
> 
> 标签：javascript, backbone.js, addthis

在我的主干应用程序中，我使用了`addthis`按钮。我的问题是，当我将应用程序导航到一条路线并返回主路线时，按钮（fb、twitter、share）消失了。但如果我刷新页面然后显示按钮，任何帮助表示赞赏。

提前致谢

代码如下...

```
var mainProfileView = Backbone.View.extend({
    el:"#inner",
    template: _.template($('#main-profile-tmpl').html()),
    initialize: function(){
        _.bindAll(this, "render");
        this.render();
    },
    events:{
        'click .profile-details' : 'detailedProfile',
        'click .credibility' : 'credibility',
        'click #moreReviews': 'moreReview',
        'click #moreReferences' : 'moreReferences'
    },
    detailedProfile:function(){
        router.navigate('/detailedProfile',true);
    },
    credibility : function() {
        router.navigate('/credit',true);
    },
    moreReview : function() {
        router.navigate('/moreReviews',true);
    },
    moreReferences : function() {
        router.navigate('/moreReferences',true);
    },
    render: function(){ 
        this.$el.html(this.template());
    }
});

var creditView = Backbone.View.extend({
    el:"#inner",
    template: _.template($('#credit-tmpl').html()),
    initialize: function(){
        _.bindAll(this, "render");
        this.render();
    },
    render: function(){
        this.$el.html(this.template());
    }
});

ProfileRouter = Backbone.Router.extend({
    initialize : function() {

    },
    routes : {
        '' : 'profile',
        'detailedProfile' : 'detailedProfile',
        'credit' : 'credit'
    },
    profile : function() {
        $('#img-loader').fadeIn();
        currentView = new mainProfileView();
        currentView.render();
    },
    credit : function() {
        $('#img-loader').fadeIn();
        if (currentView){
           currentView.undelegateEvents();
           delete currentView;
        }

        currentView = new creditView();
        currentView.render();
    },
    moreReviews : function() {
        $('#img-loader').fadeIn();
        if (currentView){
           currentView.undelegateEvents();
           delete currentView;
        }

        review = new Reviews;
        review.fetch({
            data: {
                  profile_id : profile_id
            },
            type : 'POST',
            success: function(model,response,options) {
                currentView = new moreReviewView({reviews : model});
                currentView.render();
            },
            error: function(model,response,options) {
                //console.log(response.responseText);
            }

        });
    }
}); 
```

我的模板文件的一部分是

```
<script type="text/template" id="main-profile-tmpl">
.......
            <div class="block with-padding service-area-container">
                <h5>Social</h5>
                <div class="addthis_toolbox addthis_default_style ">
                    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
                    <a class="addthis_button_tweet"></a>
                    <a class="addthis_button_pinterest_pinit"></a>
                    <a class="addthis_counter addthis_pill_style"></a>
                </div>
            </div>
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:29:49.670

您不仅需要在每次加载模板时调用 addthis_widget 脚本，还需要清除“缓存”变量。

```
 if (window.addthis) {
        window.addthis = null;
        window._adr = null;
        window._atc = null;
        window._atd = null;
        window._ate = null;
        window._atr = null;
        window._atw = null;
        }  
    var uniqueUrl = "http://s7.addthis.com/js/300/addthis_widget.js#pubid=XXX";
    $.getScript(uniqueUrl)
    .done(function(script) {
      addthis.init();
    }); 
```

# git - 使用提交属性将集市迁移到 git 以链接修复的错误

> ID：14518594
> 
> 赞同：5
> 
> 时间：2013-01-25T09:10:33.663
> 
> 标签：git, bazaar, git-fast-import

我们使用 bazaar-vcs 已经有几年了，但由于一些长期存在的烦人的错误决定迁移到 git 并停止了 bzr 的开发。

在使用 bazaar 时，我们广泛使用了 bazaar 的“错误跟踪元数据”功能 ( [http://doc.bazaar.canonical.com/bzr.dev/en/user-reference/bugs-help.html](http://doc.bazaar.canonical.com/bzr.dev/en/user-reference/bugs-help.html) )。所以每个 bug-fix 提交都包含对应 mantis-bug-Id 的 ID，这样我们就有了 source 和 mantis 之间的链接。

我们的 commit-message 不包含 mantis-id，我们只使用了“元数据功能”：

![在此处输入图像描述](../Images/a471be2384381b081d54f0dd2ccaeae9.png)

对我们来说，不要丢失这些信息非常重要，所以我需要一个解决方案来以某种形式迁移这些错误链接。

我已经尝试使用快速导入/快速导出命令将我们的集市存储库导出/导入到 git 中：

bzr 快速导出 --no-plain --rewrite-tag-names /var/www/source_branch/ | git 快速导入

不幸的是，我收到以下错误：

```
fatal: This version of fast-import does not support feature commit-properties. 
```

但是，如果我使用选项**--plain**而不是**--no-plain**导入工作，但我们失去了与我们的错误的所有连接。

是否有一些解决方案/解决方法可以从 bzr 迁移到 git 而不会丢失所有这些对我们如此重要的错误链接？

**[编辑]**：我刚刚分析了快速导入/快速导出文件格式，它非常简单。应该可以编写一些脚本来修改文件并将（属性错误...）行移动到相应的提交消息行中。但是，如果有开箱即用的解决方案，我会很高兴听到它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:40:13.510

Git 快速导入不支持元数据属性，因此无法仅使用现有工具迁移这些信息。

由于没有响应并且丢失所有这些 bug-id 对我们来说是没有选择的，我编写了一个快速导出流重写器，它能够以 git 理解的格式重写流，但包含我们所有的 bug id 信息。

C# 重写器通过执行以下步骤来工作：

1.  从输入流解析提交
2.  检查提交是否包含属性错误命令
3.  解析 bug id 并使用提取的 bug id 修改提交消息
4.  排除其他不受支持的 bzr-fastexport only 命令（“feature”、“property branch nick”））

有关此重写器 + 代码的更多信息可以在这里找到：[http ://www.fusonic.net/en/blog/2013/03/26/migrating-from-bazaar-to-git/](http://www.fusonic.net/en/blog/2013/03/26/migrating-from-bazaar-to-git/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-27T15:43:39.987

我也有类似的需求。我尝试了 David 的重写器，但它产生了 git import 会失败的输出。我怀疑这是在提交中重命名某些文件时的一个微妙错误。

我意识到只修改'bzr fast-export --plain' 来做我想做的可能更容易。

[我在LP：#1606973](https://bugs.launchpad.net/bzr-fastimport/+bug/1606973)提交了上游（bzr 快速导出）错误，并附上了一个对我有用的解决方案。修改 fastimport/exporter.py 后，我只是做了：

```
bzr fast-export --git-branch=master --plain | git fast-import 
```

# iphone - 从上次打开的 UIViewController 打开应用程序

> ID：14518599
> 
> 赞同：2
> 
> 时间：2013-01-25T09:11:00.680
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiviewcontroller

我需要我的应用程序记住上次`UIViewController`打开的应用程序，因此当应用程序加载到内存不足时，我用保存的一个`rootViewController`属性替换:`AppDelegate``NSUserDefaults`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window = window;

    frontViewController = [[SGLoginScreenViewController alloc] init];

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:frontViewController];

    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我想做的是在`ViewDidLoad`each 的方法中放入一些代码`ViewController`并记住它的名称`NSUserDefaults`以便以后在 中使用它`didFinishLaunchingWithOptions`，如下所示：

```
[[NSUserDefaults standardUserDefaults] setObject:self forKey:@"currentViewController"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然而，问题是 XCode 给了我这个警告：

```
*** -[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '<SGMainScreenFirstTimeViewController: 0x8e1fea0>' of class 'SGMainScreenFirstTimeViewController'.  Note that dictionaries and arrays in property lists must also contain only property values. 
```

关于如何实施这整件事的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T09:18:35.117

您只能保存符合键值编码（NSString、NSnumber 等）的用户默认对象。将类转换为字符串并在知道类名的情况下重新创建类将是实现您希望实现的目标的方法。这将是保存 NSUserDefaults 的好方法

```
[[NSUserDefaults standardUserDefaults] setObject:NSStringFromClass([self class]); forKey:@"currentViewController"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

为了重新加载，您可以根据保存的字符串重新创建类，如下所示：

```
NSString *savedClassName = [[NSUserDefaults standardUserDefaults] objectForKey:@"currentViewController"];
UIViewController *controller = [(UIViewController *)NSClassFromString(savedClassName) alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:15:46.447

`NSUSerDefaults`基本上是存储默认值......不是大对象*（可以保存的项目列表包括（NSString，NSData，NSDictionary，NSArray，NSNumber）* ......下次记住这一点。

更好的方法来完成功能。

```
[[NSUserDefaults standardUserDefaults] setObject:@"Second View" forKey:@"currentViewController"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后在应用加载

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"currentViewController"] isEqualToString:@"Second View"])
{
//your code/logic 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:16:36.723

根据文档：

> value 参数只能是属性列表对象：`NSData`, `NSString`, `NSNumber`, `NSDate`, `NSArray`, 或`NSDictionary`. 对于`NSArray`and`NSDictionary`对象，它们的内容必须是属性列表对象。

因此，您可以保存视图控制器的名称并在启动时恢复它，知道它的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:21:36.343

首先是你不能在 NSUserDefaults 中保存可变值。只需检查以下伪代码：

```
[[NSUserDefaults standardUserDefaults] setObject:@"nibnameofcurrentViewController" forKey:@"currentViewController"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

当您的应用再次启动时，请执行以下操作：

```
UIViewController *controller=[[UIViewController alloc]initWithNibName:[[NSUserDefault standerdDefault]objectForkey:@"currentViewController"] bundle:nil];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:frontViewController];
self.window.rootViewController = navController; 
```

# django - 无法将 Django 项目推送到 Heroku

> ID：14518601
> 
> 赞同：0
> 
> 时间：2013-01-25T09:11:12.630
> 
> 标签：django

将 Django 项目推送到 Heroku master 时出现此错误。我是 Django 的新手。任何帮助将不胜感激。

-----> 使用 Pip (1.2.1) 安装依赖项下载/解包 Brlapi==0.5.5（来自 -r requirements.txt（第 1 行））找不到任何满足要求的下载 Brlapi==0.5。 5（来自 -r requirements.txt（第 1 行））根本没有找到 Brlapi==0.5.5 的分布（来自 -r requirements.txt（第 1 行））在 /app/.pip/pip.log 中存储完整日志！Heroku 推送被拒绝，无法编译 Python 应用程序

到 git@heroku.com:enigmatic-plateau-3620.git ！[remote denied] master -> master (pre-receive hook denied)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:27:05.897

Use the `--no-site-packages` option to prevent the virtual environment from having access to all the packages on your system.

```
virtualenv --no-site-packages venv 
```

If you don't need the Brlapi for your Django app, try removing the Brlapi==0.5.5 line from your `requirements.txt` document. Then, commit the change:

```
git add requirements.txt
git commit
git push heroku master 
```

# jquery - jquery mobile 和 ajax 性能缓慢

> ID：14518602
> 
> 赞同：1
> 
> 时间：2013-01-25T09:11:16.610
> 
> 标签：jquery, ajax, mobile

当信息来自 Ajax 请求时，jquery mobile 出现问题。它发生在`listview`和`collapsible`上。问题是我有一个包含大约 500 个标题的列表，在我使用它之前`.listview()`它工作正常。但是当我`.listview`最后加载所有他的列表元素大约需要 1 分钟，并且出现 2 次询问我是否停止 jquery 脚本的消息。

我应该怎么办？有没有办法可以使用 jquery mobile listview 样式并保持速度性能？

# hadoop - 在自定义 RecordReader 中确定压缩文件的长度

> ID：14518612
> 
> 赞同：1
> 
> 时间：2013-01-25T09:11:46.923
> 
> 标签：hadoop, mapreduce

我编写了一个自定义记录阅读器来读取 Hadoop 中的文本和 gzip 文件，因为我有一个特殊要求，即拥有完整的文件数据作为键的值和文件名。来源如下：

```
public class WholeFileRecordReader extends RecordReader<Text, BytesWritable> {

    private CompressionCodecFactory compressionCodecs = null;
    private FileSplit fileSplit;
    private Configuration conf;
    private InputStream in;
    private Text key = new Text("");
    private BytesWritable value = new BytesWritable();
    private boolean processed = false;

    @Override
    public void initialize(InputSplit split, TaskAttemptContext context)
            throws IOException, InterruptedException {

        this.fileSplit = (FileSplit) split;
        this.conf = context.getConfiguration();

        final Path file = fileSplit.getPath();
        compressionCodecs = new CompressionCodecFactory(conf);

        final CompressionCodec codec = compressionCodecs.getCodec(file);
        System.out.println(codec);
        FileSystem fs = file.getFileSystem(conf);
        in = fs.open(file);

        if (codec != null) {
            in = codec.createInputStream(in);
        }
    }

    @Override
    public boolean nextKeyValue() throws IOException, InterruptedException {
        if (!processed) {
            byte[] contents = new byte[(int) fileSplit.getLength()];
            Path file = fileSplit.getPath();
            key.set(file.getName());

            try {
                IOUtils.readFully(in, contents, 0, contents.length);
                value.set(contents, 0, contents.length);
            } finally {
                IOUtils.closeStream(in);
            }

            processed = true;
            return true;
        }

        return false;
    }

    @Override
    public Text getCurrentKey() throws IOException, InterruptedException {
        return key;
    }

    @Override
    public BytesWritable getCurrentValue() throws IOException, InterruptedException {
        return value;
    }

    @Override
    public float getProgress() throws IOException {
        return processed ? 1.0f : 0.0f;
    }

    @Override
    public void close() throws IOException {
        // Do nothing
    }

} 
```

问题是我的代码正在读取不完整的文件数据。这可能是因为我使用 fileSplit（指向压缩文件）来确定内容的长度，因此我得到的值较小。因此，这会导致将不完整的数据传递给 Mapper。

有人可以指出如何获取 gizipped 文件数据的实际长度或修改 RecordReader 以使其读取完整数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:57:02.450

扩展@Chris White 的答案，我不得不对他给出的代码进行某些语法更改。如下：

```
fileLength = (int) fileSplit.getLength();
compressionCodecs = new CompressionCodecFactory(conf);

final CompressionCodec codec = compressionCodecs.getCodec(file);
FileSystem fs = file.getFileSystem(conf);
in = fs.open(file);

if (codec != null) {
    if (codec instanceof GzipCodec) {
        byte[] len = new byte[4];
        try {
            in.skip(fileLength - 4);
            IOUtils.readFully(in, len, 0, len.length);
            fileLength = (len[3] << 24) | (len[2] << 16) + (len[1] << 8) + len[0];
        } finally {
            in.close();
        }
    }

    in = fs.open(file);
    in = codec.createInputStream(in);
} 
```

非常感谢@Chris White 的投入。没有你就做不到:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:07:42.630

对于 GZip 文件，您可以跳到最后 4 个字节（根据规范），应该返回原始的未压缩文件大小）。请注意，该值是 2^32 的模，因此如果您希望原始文件大于此值，请小心。

*   [http://www.gzip.org/zlib/rfc-gzip.html](http://www.gzip.org/zlib/rfc-gzip.html)

因此，您的初始化方法可以修改为类似于此的内容（未经测试！）：

```
final CompressionCodec codec = compressionCodecs.getCodec(file);
System.out.println(codec);
FileSystem fs = file.getFileSystem(conf);
in = fs.open(file);

length = fileSplit.getLength();
if (codec instanceof GZipCodec) {
  // skip to last 4 bytes
  in.seek(length-4);

  // read size
  length = in.readInt();

  // reset stream position
  in.seek(0);
} 
```

现在您应该有实际的文件长度（对于未压缩和 Gzip 压缩），您可以在 nextKeyValue() 方法中使用它。

# jpa - ORA-01400: 不能在 @manytomany 单向插入 NULL

> ID：14518618
> 
> 赞同：1
> 
> 时间：2013-01-25T09:12:02.707
> 
> 标签：jpa, hibernate-mapping, spring-transactions

我正在插入一个带有角色（现有）角色的用户对象。它让我无法在 user_role.id 中插入 null

架构：

```
@Entity
@Table(name = "user_data")
public class User extends Serializable {

     @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    /**
     * user can have set of roles profiles
     */
    @ManyToMany(cascade = {CascadeType.ALL} ,fetch=FetchType.EAGER)
    @JoinTable(name = "user_role", joinColumns = { @JoinColumn(name = "user_id", referencedColumnName = "id") }, inverseJoinColumns = { @JoinColumn(name = "role_id", referencedColumnName = "id") })
    private Set<Role> roles;

}

@Entity @Table(name = "role")
public class Role extends Serializable {

    private static final long serialVersionUID = -5954247513572163065L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(name = "name")
    private String name;

    @ManyToMany
    @JoinTable(name = "role_permission", joinColumns = { @JoinColumn(name = "role_id",
        referencedColumnName = "id") },
        inverseJoinColumns = { @JoinColumn(name = "permission_id",
        referencedColumnName = "id") })
    private Set<Permission> permissions;

    [...] 
```

}

现在，当我尝试创建用户时，它给了我例外 `java.sql.SQLIntegrityConstraintViolationException: ORA-01400: cannot insert NULL into ("USER_ROLE"."ID"`）

为了创建用户，我使用如下 spring 存储库代码：

```
@Override
@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
public User createUser(User user) throws BusinessException {
    List<Error> errors = new ArrayList<Error>();
    validateUserRoles(user  ,errors);
    if ( errors.size() > 0 )
    {
        throw new BusinessException(errors);
    }

    user.setUserIdentifier(user.getUserIdentifier().trim());
    logger.info("Creating User with username: " + user.getUserIdentifier());
    return this.userRepositotry.save(user);
}

private void validateUserRoles(User user ,List<Error> errors) {
    Set<Role> roles = new HashSet<Role>();
    if (user.getRoles() != null) 
    {
        for(Role role : user.getRoles())
        {
            Role r = null;
            if(role.getId() != null)
            {
                r = this.roleRepository.findOne(role.getId());
            } else if( role.getName() != null ) 
            {
                r = this.roleRepository.findByName(role.getName());
            }
            if(r == null) 
            {
                errors.add(new Error(ErrorCode.INVALID_ARGUMENTS,"Invalid user Role.",r));
            } else
            {
                roles.add(r);
            }
        }
    }

    user.setRoles(roles);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:19:08.607

您的`user_role`连接表有一个`id`Hibernate 不知道的列。hibernate 只知道`role_id`和`user_id`列。该`id`列没有用，您应该将其从`user_role`表中删除。如果你把它留在那里，你需要让它可以为空，或者让它有一个默认值。

# java - 如何在我的 Tapestry 5 应用程序中创建简单且防重构的页面链接？

> ID：14518620
> 
> 赞同：2
> 
> 时间：2013-01-25T09:12:03.603
> 
> 标签：java, tapestry

假设我有一个`Grid`带有一些链接来编辑一个`Entity`. 这是我的`.tml`文件

```
<table t:id="personGrid">
    <!-- ... -->
    <p:editCell>
        <p t:id="edit">${person.lastName}</p>
    </p:editCell>
    <!-- ... -->
</table> 
```

在我的`.java`文件中，我有这个：

```
@Component(parameters = {"context=person.employeeNumber", "page=person/PersonPage"})
private PageLink edit; 
```

这很简洁，我不必编写很多样板代码。这里的陷阱是如果我重构或者`employeeNumber`重构`PersonPage`. 它不再起作用，最糟糕的是我不会收到错误消息。

我发现我可以`PageRenderLinkSource`像这样使用：

```
@Inject
private PageRenderLinkSource editPersonLink;
// ...
Object onActionFromEdit(String employeeNumber)
{
    return editPersonLink.createPageRenderLinkWithContext(PersonPage.class, employeeNumber);
} 
```

这是相当不错的。它没有更多的样板，但它是可重构的。

我的问题是我仍然必须保持

```
@Component(parameters = {"context=person.employeeNumber", "page=PersonPage"})
private PageLink edit; 
```

在我的`.java`文件中，否则 Tapestry 会抱怨缺少`@Component`.

所以我的问题是，如何在没有样板的情况下实现一些防重构的参数化页面链接？

我正在使用 Tapestry 5.3.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:37:32.300

看起来您正在使用*PageLink*作为*ActionLink*并且它的工作原理有点奇怪。

此外，这种方法的另一个问题是，您最终到服务器的往返次数比您需要的要多。

试试这个：

```
@Inject
private PageRenderLinkSource renderLinkSource;

public Link getEditLink() {
    return renderLinkSource.createPageRenderLinkWithContext(PersonPage.class, person.getEmployeeNumber());
} 
```

进而：

```
<a href="${editLink}">${person.lastName}</a> 
```

顺便说一句，这假设您的网格中有“ *row=person”*

# php - 获取子节点 XML 的属性 - PHP

> ID：14518624
> 
> 赞同：2
> 
> 时间：2013-01-25T09:12:15.307
> 
> 标签：php, xml

我正在使用 XML DOM 和 PHP 构建脚本

```
$troops = $xmlfile->getElementsByTagName("troops");

foreach( $troops as $troop ) {

    $sniper = $troop->getElementsByTagName( "sniper" );
    $otroop[0] = $sniper->item(0)->nodeValue;

    $riffle = $troop->getElementsByTagName( "riffle" );
    $otroop[1] = $riffle->item(0)->nodeValue;

    $riffle = $troop->getElementsByTagName( "shooter" );
    $otroop[2] = $riffle->item(0)->nodeValue;

    $riffle = $troop->getElementsByTagName( "missle" );
    $otroop[3] = $riffle->item(0)->nodeValue;

    $tank = $troop->getElementsByTagName( "tank" );
    $otroop[4] = $tank->item(0)->nodeValue;

    $bomber = $troop->getElementsByTagName( "bomber" );
    $otroop[5] = $bomber->item(0)->nodeValue;

    $patrol = $troop->getElementsByTagName( "patrol" );
    $otroop[6] = $patrol->item(0)->nodeValue;

    $surveillance = $troop->getElementsByTagName( "surveillance" );
    $otroop[7] = $surveillance->item(0)->nodeValue;

} 
```

XML

```
<troops>
    <sniper level="5">2</sniper>
    <riffle level="0">0</riffle>
    <shooter level="0">0</shooter>
    <missle level="0">0</missle>
    <tank level="0">0</tank>
    <bomber level="0">0</bomber>
    <patrol level="0">0</patrol>
    <surveillance level="0">0</surveillance>
</troops> 
```

我也希望能够拉动每个节点的级别，就像我尝试过的一样

```
$oresearch[0] = $sniper->getAttribute("level"); 
```

但这不起作用，这里的任何建议都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:19:58.653

在您的代码`$sniper`中是一个[`DOMNodeList`](http://de2.php.net/domnodelist). 在获得第一个节点的值的地方正确处理：

```
$sniper->item(0)->nodeValue 
```

对于第一个节点的属性，您必须进行类似的操作：

```
$sniper->item(0)->getAttribute('level') 
```

# ubuntu - 在 Ubuntu 上的 Netbeans 中按 CTRL+Tab 时出现灰色框

> ID：14518625
> 
> 赞同：0
> 
> 时间：2013-01-25T09:12:18.270
> 
> 标签：ubuntu, netbeans, java

多年来，我一直在 Ubuntu 上使用 Netbeans。我遇到的一个长期存在的问题是，当我在其中的窗口之间使用 CTRL + Tab 时，偶尔会在屏幕中央出现一个灰色框。虽然它不是一个大问题（我必须重新启动 Netbeans 才能摆脱它），但它很烦人。

有谁知道我怎样才能永久摆脱它？

**当前设置**
Netbeans 7.2.1 - 自 6.9 以来发生
Ubuntu 12.10
Oracle Java 1.7.0_11 - 当我也使用 Java 6/7 和 OpenJDK 6/7 时发生

# xslt - 使用 XSLT 将实体转换为键盘字符

> ID：14518626
> 
> 赞同：1
> 
> 时间：2013-01-25T09:12:19.373
> 
> 标签：xslt

我需要`&#x00A0;`使用 XSLT 1.0 将实体转换为普通空间（键盘空间）。但我得到的是实体`&#160;`而不是空间。

**示例 XML：**

```
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
<math display='block'>
 <mrow>
  <mtext>x&#x00A0;y&#x00A0;+&#x00A0;y&#x00A0;x</mtext>
 </mrow>
</math>
</chapter> 
```

**XSLT 1.0 试过：**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1998/Math/MathML">
<xsl:output method="xml" encoding="UTF-8" indent="no"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
<xsl:copy>
<xsl:apply-templates select="@* | node()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="mtext">
<xsl:for-each select="contains(.,'&#x00A0;')">
<xsl:text disable-output-escaping="yes"> </xsl:text>
</xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

所需输出：

```
<?xml version='1.0' encoding='UTF-8' ?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML"><math display="block"><mrow><mtext>x y + y x</mtext></mrow></math></chapter> 
```

输出：

```
<?xml version='1.0' encoding='UTF-8' ?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML"><math display="block"><mrow><mtext>x&#160;y&#160;+&#160;y&#160;x</mtext></mrow></math></chapter> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T14:06:38.170

**简单得多**：

```
<xsl:template match="text()">
  <xsl:value-of select="translate(., '&#xA0;', ' ')"/>
</xsl:template> 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="text()">
     <xsl:value-of select="translate(., '&#xA0;', ' ')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
<math display='block'>
 <mrow>
  <mtext>x&#x00A0;y&#x00A0;+&#x00A0;y&#x00A0;x</mtext>
 </mrow>
</math>
</chapter> 
```

**产生了想要的正确结果：**

```
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
   <math display="block">
      <mrow>
         <mtext>x y + y x</mtext>
      </mrow>
   </math>
</chapter> 
```

**记住**：

用另一个字符替换单个字符（或删除它）的最佳方法是使用标准 XPath 函数**[`translate()`](http://www.w3.org/TR/xpath/#function-translate)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:04:46.410

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1998/Math/MathML">
  <xsl:output method="xml" encoding="UTF-8" indent="no"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="mtext">
    <xsl:call-template name="replace-string">
      <xsl:with-param name="text" select="."/>
      <xsl:with-param name="from">&#x00A0;</xsl:with-param>
      <xsl:with-param name="to" select="' '"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="replace-string">
    <xsl:param name="text"/>
    <xsl:param name="from"/>
    <xsl:param name="to"/>
    <xsl:choose>
      <xsl:when test="contains($text, $from)">
        <xsl:variable name="before" select="substring-before($text, $from)"/>
        <xsl:variable name="after" select="substring-after($text, $from)"/>
        <xsl:variable name="prefix" select="concat($before, $to)"/>
        <xsl:copy-of select="$before"/>
          <xsl:value-of select="$to" disable-output-escaping="yes"/>
        <xsl:call-template name="replace-string">
          <xsl:with-param name="text" select="$after"/>
          <xsl:with-param name="from" select="$from"/>
          <xsl:with-param name="to" select="$to"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

# c# - 模态弹窗显示时暂停保存数据的处理

> ID：14518628
> 
> 赞同：3
> 
> 时间：2013-01-25T09:12:28.787
> 
> 标签：c#, asp.net, multithreading, modalpopupextender

显示模式弹出窗口时如何暂停保存数据的处理？当我单击该模式弹出窗口内的按钮时，保存数据的执行将继续处理。

我的模态弹出窗口就像一个消息框......

**这是我的示例代码：**

```
bool overlap= false;
foreach (ListItem item in chkMBoxEmployeeList.Items)
{
    if (overlap == true)
    {
      //Saving of data 
    }
    else if (overlap == false)
    {
       ModalpopupExtender2.Show();
       //In this condition, I will pause the execution of saving the data
    }
} 
```

* * *

```
//I used this after the ModalpopupExtender2.Show():
return;

//but I think, this will not be the answer, because my code will become very long if use that.  I will rewrite again my code in the button in modalpopup if I use that. 
```

我应该使用**线程**吗？**线程**在 ASP.Net 上工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:11:23.427

您的保存过程正在**服务器**上进行，但模式对话框将显示在**客户端**上。您不能让服务器等待浏览器中的用户响应。相反，服务器处理必须结束并将修改后的页面发送到浏览器。现在浏览器将再次提交所有数据以及确认信息。由于您使用的是 ASP.NET WebForms，您会很幸运，因为它会自动处理此类场景的状态。

```
public void Save(bool confirmed)
{
    if (!confirmed && NeedsConfirmation())
    {
        ShowModalWindow();
        return;
    }

    // here perform the operation.
}

public void ButtonSave_Click(object sender, EventArgs e)
{
    // this is the button that is normally displayed on the form
    this.Save(false);
}

public void ButtonConfirm_Click(object sender, EventArgs e)
{
    // this button is located within the modal dialog - so it is not shown before that.
    this.Save(true);
} 
```

# list - 包含列表 lwuit 时表单无法滚动

> ID：14518631
> 
> 赞同：1
> 
> 时间：2013-01-25T09:12:38.787
> 
> 标签：list, scroll, lwuit

这是我的代码：

```
public Form getMenuForm()
{
    if ( menuForm == null )
    {
        Form menuForm = new Form( "Tracking Main Menu" );
        menuForm.setLayout( new BoxLayout( BoxLayout.Y_AXIS ) );
        menuForm.setScrollable( true );
        menuForm.setScrollableY( true );
        menuForm.addComponent( this.getMenuList() );
        for(int i=0;i<30;i++)
        {
            Label lblTest = new Label("hello guys");
            menuForm.addComponent( lblTest );
        }
        menuForm.addCommand( new Command( "Exit" ) );
        menuForm.setTransitionOutAnimator( CommonTransitions.createSlide( CommonTransitions.SLIDE_HORIZONTAL, true,
            200 ) );
        menuForm.addCommandListener( this );
    }
    return menuForm;
}

 public List getMenuList()
{
    String[] menuItems = { "Find Person", "Person Registration", "Message", "Setting" };
    if ( menuList == null )
    {
        menuList = new List( menuItems );
        menuList.setListCellRenderer( new DefaultListCellRenderer( false ) );
        menuList.setSmoothScrolling( true );
        menuList.setFixedSelection( List.FIXED_NONE );
        menuList.addActionListener( this );
    }
    return menuList;
} 
```

我只能选择列表的 4 个选项，并且无法向下滚动查看屏幕底部。我在这里错过了什么吗，请帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:54:29.523

您需要设置`menuForm`为可滚动的 false 并让列表的可滚动性接管。您将可滚动的内容一个接一个地嵌套，这会产生糟糕的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:23:37.737

也许你需要这样做：

```
menuList.setScroable(true); 
```

# java - 如何使用带有 TNSNames 别名语法的 JDBC 瘦驱动程序连接到 Oracle 数据库

> ID：14518635
> 
> 赞同：3
> 
> 时间：2013-01-25T09:12:58.993
> 
> 标签：java, jdbc

我正在尝试使用 Oracle JDBC 瘦驱动程序（用于 11.2.0.2.0 的 ojdbc6.jar）和以下 JDBC URL 语法连接到 Oracle (11.2.0.2.0) 数据库：

```
jdbc:oracle:thin:@abcd 
```

其中“abcd”在我的 tnsnames.ora 文件中定义，如下所示：

```
 abcd, abcd.world, abcd.dk.xyz.com  =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = abcd.dk.xyz.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVICE_NAME = abcd)
    )
  ) 
```

我`-Doracle.net.tns_admin=/etc/tnsnames.ora`根据[Oracle® Database JDBC Developer's Guide and Reference](http://docs.oracle.com/cd/B19306_01/java.102/b14355/urls.htm#BEIJFHHB)提供了 VM 选项。

运行应用程序时出现以下错误：

```
 Listener refused the connection with the following error:
ORA-12504, TNS:listener was not given the SID in CONNECT_DATA 
```

但是当我从 tnsnames.ora 中删除别名 abcd.world 和 abcd.dk.xyz.com 时，我的应用程序能够连接到数据库。

当 tnsnames.ora 文件中有多个别名时，ojdbc 驱动程序是否存在问题？

我的 JDK 版本是 1.6.0_31。

谢谢，VJ

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-31T08:39:56.567

看起来，Oracle JDBC 驱动程序不能使用多个服务名称。使用这些条目

```
 abcd =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = abcd.dk.xyz.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVICE_NAME = abcd)
    )
  )
    abcd.world, abcd.dk.xyz.com  =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = abcd.dk.xyz.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVICE_NAME = abcd)
    )
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T08:49:30.670

我可以通过以下方式通过 tnsnames.ora 成功连接到 oracle

1.  下载并解压flyway

2.  从 oracle 站点下载最新的 ojdbcX.jar

3.  将驱动程序目录中的文件放入flyway文件夹

4.  将 flyway 文件夹（您可以在其中找到 flyway cli 脚本）放在路径中（es：在 linux 上 export PATH=/home/matteo/opt/flyway

5.  编辑 flyway 二进制文件 /home/matteo/opt/flyway/flyway 放入 JAVA_ARGS="-Doracle.net.tns_admin= 指向包含 tnsnames.ora 的文件夹

6.  **注意**：Linux 的 flyway 脚本在以下行中有一个错误 JAVA_ARGS="-Djava.security.egd=file:/dev/../dev/urandom $JAVA_ARGS" 您需要附加 $JAVA_ARGS 才能不被覆盖

7.  编辑项目文件夹中的文件，如您希望的那样命名，例如 flyway.conf

8.  使用此命令测试 flyway

    flyway -configFile=flyway.conf 信息

我收到这个输出

> Boxfuse 的 Flyway 4.0.3
> 
> 数据库：jdbc:oracle:thin:@PSR.LAB_CERT (Oracle 11.2)
> 
> +---------+-------------+---------+--- ------+
> 
> | 版本 | 说明 | 安装于 | 状态 |
> 
> +---------+-------------+---------+--- ------+
> 
> | 未找到迁移 |
> 
> +---------+-------------+---------+--- ------+

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T10:53:21.813

理想情况下，您不应该通过 TNS 连接，因为您需要在您的机器上安装 oracle 客户端。

如果您使用如下连接 url，则不需要 oracle 客户端：

```
jdbc:oracle:thin:@//host:port/service_name 
```

# ruby-on-rails - Heroku 删除了我上传的文件，为什么？

> ID：14518640
> 
> 赞同：1
> 
> 时间：2013-01-25T09:13:21.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, yaml

如果我在 Heroku 上的应用程序中加载文件，一切正常，但是当我再次尝试重新加载应用程序时，它给了我以下错误：

```
2013-01-25T08:48:31+00:00 app[web.1]:   app/controllers/main_controller.rb:20:in `index'
2013-01-25T08:48:31+00:00 app[web.1]: 
2013-01-25T08:48:31+00:00 app[web.1]: 
2013-01-25T08:48:31+00:00 app[web.1]: Errno::ENOENT (No such file or directory - /app/config/cases/casesID6.yml):
2013-01-25T08:48:31+00:00 app[web.1]:   app/controllers/main_controller.rb:20:in `read' 
```

本地它工作正常！

主控制器：

```
# importo yaml di configurazione
require 'yaml'
if Survey.exists?(1)
    @idOfSurvey = Survey.find {|s| s['active_state'] == true}['id']
    nameOfSurvey = "casesID"+String(@idOfSurvey)+".yml"
    @survey = YAML::load(ERB.new(IO.read(File.join(Rails.root, 'config/cases', nameOfSurvey))).result)
else
    render :action => 'noYaml' and return
end 
```

上传控制器：

```
#inserisco il nuovo questionario
            survey = Survey.new
            if Survey.exists?(1)
                n = String(Integer(Survey.maximum("Id"))+1)
                survey.name = "casesID#{n}"
            else
                survey.name = "casesID1"
            end
            File.open(Rails.root.join('config/cases', survey.name+".yml"), 'wb+') do |file|
                file.write(uploaded_io.read)
            end
            survey.save() 
```

我相信我上传到 Heroku 的文件可能会被平台清除，例如内存问题，或者因为它将它们保存为临时文件，这可能吗？解决方案！

我再说一遍，在本地一切正常:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T09:26:49.187

虽然您可以在扩展、重新启动或推送新版本的代码后写入 Heroku 文件系统，但该文件将消失。

您需要使用持久性文件存储，例如 Amazon S3、Rackspace 或类似的 - 在[https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)阅读更多内容并使用像 CarrierWave 或 Paperclip 这样的 gem 来连接到S3超级简单。

# xcode - 以编程方式调整 tableview 高度

> ID：14518644
> 
> 赞同：1
> 
> 时间：2013-01-25T09:13:54.210
> 
> 标签：xcode, resize, height, tableview

我在 xcode 4.5 中使用故事板。

在我的应用程序中有 2 个视图，view1 和 view2。

每个视图都有一个表视图。

导航控制器连接到视图。

我正在尝试根据 Iphone 显示屏的大小更改 tableview 的高度。

我正在使用以下代码：

```
- (void)viewDidAppear:(BOOL)animated {

[super viewDidAppear:animated];    

// Verify if the screen is iphone 5

if ([[UIScreen mainScreen] bounds].size.height == 568){

    // Resize table hight

    CGRect tvframe = [_myTableView frame];
    [_myTableView setFrame:CGRectMake(tvframe.origin.x,
                                      tvframe.origin.y,
                                      tvframe.size.width,
                                      tvframe.size.height + 64)];
} 
```

问题是当应用程序启动并出现view1时代码没有效果。

但是当我移动到 view2 然后回到 view1 时，调整大小就会生效。

我不明白为什么应用程序启动时调整大小不生效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:53:21.800

您是否尝试将代码移至 ViewWillAppear？那应该可以解决问题。

# jquery - 复选框上的jQuery表单验证

> ID：14518648
> 
> 赞同：0
> 
> 时间：2013-01-25T09:13:59.867
> 
> 标签：jquery, forms, validation, checkbox

我想要一条错误消息来显示用户是否未选中复选框上的选项...我尝试了以下代码：

```
if (!$('input[name="problems[]"]').is(':checked')) {
                    var error = true;
                    $('#option_error').fadeIn(500);
                }else{
                    $('#option_error').fadeOut(500);
                } 
```

但无论是否检查它都会显示错误消息？

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:40.253

尝试这个

```
function testing() {            
        if (document.getElementById('problems').checked == false) {               
            document.getElementById('option_error').style.display = "block";
            document.getElementById('option_error').fadeIn(500);
        } else {
            document.getElementById('option_error').style.display = "none";
            document.getElementById('option_error').fadeOut(500);

        }
    } 
```

# algorithm - 实施停车管理系统

> ID：14518650
> 
> 赞同：1
> 
> 时间：2013-01-25T09:14:09.140
> 
> 标签：algorithm

我正在尝试实施一个管理停车场的系统。这个停车场有 5 个阶段，在每个阶段我们有 6 个停车位（一个尺寸为 5*2*3 的 3D 矩阵），我们知道每时每刻至少有一个停车位是空的。当一辆车进入停车场时，我们保存它的号码并给它分配一个空的停车位，当汽车要离开时，它的号码又被给出，所以我们应该搜索找到它，然后移动其他汽车以便发送下车。但是我们想要做最少的动作来让汽车离开停车场。如果停车位空置，每辆车都可以移动到其相邻的上、下、后或前停车位。

有谁知道解决这个问题的算法？

任何帮助，将不胜感激！

# performance - 最小化大页面的 JSF ViewState

> ID：14518659
> 
> 赞同：3
> 
> 时间：2013-01-25T09:14:45.800
> 
> 标签：performance, jsf, session

我目前正在开发一个具有**单页设计的****JSF**应用程序，例如在桌面应用程序中。这些部分被放置在选项卡中，并且每个子操作，例如编辑或插入项目，都显示在对话框中。

 **成为问题的是 ViewState 的大小和每个请求的处理时间。目前，POST 中 ViewState 的初始大小为 200kb（并且启用了压缩）。请求持续 200 到 400 毫秒（在我自己的机器上，除了我之外没有其他用户）。

将状态保存设置为会话大大减少了请求，但大大增加了处理时间——现在从 350 到 600 毫秒。因为这是Intranet应用程序，网络传输很便宜，所以最好发送更多，过程更长。

我不知道如何处理这个问题。是否可以减少 JSF 组件占用的空间？它们中的大多数不会在每次点击时都发生变化，但它们似乎无论如何都被反序列化和处理了。或者我应该从 JSF bean 中丢弃所有数据（例如下拉列表的字典）并在服务层中使用密集缓存？还是我可以使用其他选项/技巧/改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:22:04.937

正如您已经发现的那样，整个表单的视图状态在每次异步回发时都会被序列化，以便服务器和客户端可以保持同步。ASP.NET 的工作方式几乎完全相同。

Primefaces 团队为他们的许多支持 Ajax 的组件添加了功能，这些组件允许部分页面发布。

[http://blog.primefaces.org/?p=1842](http://blog.primefaces.org/?p=1842)

该`partialSubmit`属性只会序列化在组件的`process`属性中指定的表单元素或`<p:ajax>`. 当然，这只是 Primefaces 组件的一种解决方案，但它显着减少了我一些较大的 JSF 页面上的请求大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-08T06:28:13.747

您可以利用 IFrame 和会话变量来减少组件树。每个 iframe 都将维护自己的视图。当然，在后端流程中，您的应用程序不再是单页应用程序。但是，用户仍然可以无缝地将其视为单一时代的应用程序。**

# php - 什么是更快地准备 sql 查询以使查询简约或做很多喜欢？

> ID：14518660
> 
> 赞同：1
> 
> 时间：2013-01-25T09:14:53.587
> 
> 标签：php, mysql

我有一个包含大约 100.000 名客户的数据库可供搜索，使用我的搜索表单更好的做法和最快的做法是：

这样做会更好吗

```
if(strlen($_POST['firstname']))
{
   $search .= "AND `firstname` like :firstname";
}
if(strlen($_POST['lastname']))
{
   $search .= "AND `lastname` like :lastname";
}
// and so on for about 16 possible fields 
```

或者做

```
$query = $this->db->query("SELECT * FROM `customers`
                           WHERE `firstname` LIKE :firstname,
                           AND `lastname` LIKE :lastname,
                           -- AND so on for about 16 elements"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:58:41.773

好久没用mysql了，所以根据我的sqlserver经验给个大概的回答（跑题见谅）

我假设您在所有 16 列上都有索引（或者至少是那些始终提供相关值的列）

在 SQL Server 中，我不会选择第二个选项，因为：

*   `NULL LIKE '%'`始终为假（在 sqlserver 中，您的第二个查询不会返回任何具有空值的行）
*   优化器会根据表统计信息做一些过于笼统的事情。当高优先级子句只是 '%' 时，这将导致可怕的性能（请注意，在 sqlserver 中，您可以让查询提示告诉您使用某些索引来始终提供相关值的列）

我在第二种情况下看到的唯一一点是要解释的代码更少（php端和mysqlside），但恐怕这不值得。

希望这会有所帮助，**不要忘记清理您的条目**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:17:21.153

这两个代码块不相等。
如果 firstname 未填写，则后者将一无所获，而前者将搜索 lastname。

在使用 LIKE 时询问“哪个更快”毫无意义 -无论您选择哪种语法，它**总是很慢。**

# c# - ASP.NET：在执行（长）回发时无法对同一程序执行 AJAX 调用

> ID：14518664
> 
> 赞同：0
> 
> 时间：2013-01-25T09:15:12.497
> 
> 标签：c#, asp.net, iis

我的程序做了一个很长的回发，我在屏幕上放了一些消息说它正在“工作”。现在我想用 AJAX 并行查询以更新该状态（例如“20% 完成......”）。

然而事实证明，在回发期间，没有执行对任何 webmethod 的并行调用，这些调用被延迟了。因此，Javascript 会进行这些调用（不那么定期），但在整个 PostBack 结束之前它们没有收到回复（这使得更新进度状态的整个尝试无法使用）。

有没有办法对 IIS / ASP.NET 应用程序进行并行查询？

我使用 ASP.NET 4.0 和 Visual Studio 2010 以及开发服务器组件

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:27:05.957

您可以查看使用 SignalR 进行此类操作。查看[http://www.signalr.net](http://www.signalr.net)了解更多信息。

这将允许您开始一个漫长的过程，然后将此操作的进度发送回客户端。

Scott Hanselman 在他的博客上提供了一个如何做这类事情的工作示例。见这里[http://www.hanselman.com/blog/SolvingTheShakespeareMillionMonkeysProblemInRealtimeWithParallelismAndSignalR.aspx](http://www.hanselman.com/blog/SolvingTheShakespeareMillionMonkeysProblemInRealtimeWithParallelismAndSignalR.aspx)

请注意，尽管他的博客文章使用的是旧版本的 SignalR，因此代码需要更改一些 API 才能使用最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:23:24.637

我也很感兴趣，并找到了下一个解释：

> 回发过程中不能进行AJAX调用，这是因为回发过程中页面在客户端被破坏，包括AJAX调用的回调函数，控制权转到服务器获取客户端的新内容，当控制返回客户端一切都在那里重建，我假设这是在进行 AJAX 调用的时候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:29:17.187

另一种选择是使用 AJAX 调用而不是回发来启动该过程。因此，第一次调用将在服务器上的另一个线程上启动进程。以下调用只会使用处理线程的某种共享变量检查进度。该过程完成后，您可以根据需要进行回发以刷新页面上的数据。

# jquery - jQuery UI 可排序位置问题

> ID：14518666
> 
> 赞同：0
> 
> 时间：2013-01-25T09:15:21.150
> 
> 标签：jquery, jquery-ui, position, jquery-ui-sortable

我正在使用带有 jquery ui 可排序的 twitter 引导响应/流体布局。

我正在尝试使`span1`, `span2`etc 在垂直和水平方向上都可以排序，但是在进行排序时似乎存在位置问题。

我现在得走了，但我会详细说明这一点，但[这里有一个 jsfiddle](http://jsfiddle.net/g8C3e/)。只需尝试拖动列，您就会看到。

有人知道处理这种行为的方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T22:53:42.927

这是我的代码中的一个错误。可排序的项目有不必要的边距。

# java - 包本地类的类文字和 Class.forName 的不同行为

> ID：14518669
> 
> 赞同：1
> 
> 时间：2013-01-25T09:15:30.957
> 
> 标签：java, reflection, class-visibility

仅举例让我们考虑包中的`ClassFileAssembler`类`sun.reflect`。

这个类是一个包本地类：

`class ClassFileAssembler implements sun.reflect.ClassFileConstants {...`

所以我们甚至不能使用它的名字`ClassFileAssembler`，我们不能直接导入它——这会导致编译器错误。

`sun.reflect`然而，我们可以在我们的项目中创建一个名为的包，并`ClassFileAssembler`在该包内部使用该名称 - Java 编译器会认为我们在`ClassFileAssembler`'s 包内。

如果是这样，为什么不尝试获取对类对象的引用，即`ClassFileAssembler.class`？

`Class<ClassFileAssembler> classFileAssemblerClass = ClassFileAssembler.class;`

出乎意料的是，这段代码会导致运行时错误：`java.lang.IllegalAccessError: tried to access class sun.reflect.ClassFileAssembler from class sun.reflect.Test`.

但是我们仍然能够获得`ClassFileAssembler`类对象：

```
Class<ClassFileAssembler> aClass = (Class<ClassFileAssembler>)Class.forName("sun.reflect.ClassFileAssembler"); 
```

它工作正常，并为我们提供了完整的类描述。

* * *

所以，问题是：

1）技术之间有什么区别，如何`Class.forName0`检索对类对象的引用，以及如何检索`.class`？

2）为什么他们有如此不同的安全检查？

3）以这种方式保护`.class`参考的原因是什么？

4) 这些技术是否使用不同的类加载器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:20:19.663

Class.forName 不关心一个类是否是本地包。正是当您尝试使用该类时，才会检查访问。顺便说一句，如果您执行 setAccessible(true) 您可以绕过这些访问限制。

反射库允许您做许多在 Java 代码中无法做到的事情。Java 有关于你能做什么和不能做什么的规则。例如，您不能`final`在构造函数之外或多次设置字段。注意：JVM 没有这个限制，在运行时你可以使用反射来改变它。

这个类是包本地的原因是为了限制类访问这个包之外的代码。这并不意味着如果您真的尝试就无法访问它，但您不太可能在没有认真考虑的情况下访问它。例如，当我在 IDE 中导入类时，它通常会建议来自 com.sun.* 的类，这不太可能是正确的选择。（我的 IDE 可以设置为忽略这些，但我经常似乎寻找一些我不想要的新包）

Reflections 可以做到这一点的原因是为了支持序列化等功能。使用序列化，您需要能够在序列化库的包之外序列化类，并在反序列化时获取字段并重置它们。许多控制反转库也使用反射，尽管我怀疑这不是他们设计时的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:19:57.840

如果您检查 的[javadoc`Class#forName`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String,%20boolean,%20java.lang.ClassLoader%29)，您将看到：

> 请注意，此方法不检查其调用者是否可以访问所请求的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:28:44.797

1.  没有区别。但您无法访问`.class`包私有（无修饰符）类的静态字段`ClassFileAssembler`。
2.  每个人都可以访问 Class 实例，但字段受到保护。
3.  事实上，没有人设计`.class`这种方式来保护引用，这是保护其他领域的副作用。
4.  我不这么认为。

# c# - 确保 ssl 可用性后重定向到 https

> ID：14518670
> 
> 赞同：1
> 
> 时间：2013-01-25T09:15:31.283
> 
> 标签：c#, asp.net, .net, vb.net, ssl

我正在使用此代码重定向

```
 If Not Request.IsSecureConnection Then
        Dim url As String = Request.Url.ToString().Replace("http:", "https:")
        Response.Redirect(url)
        Exit Sub
End If 
```

现在我只想在我的网站上有 ssl 时才重定向到 HTTPS。那么如何检查 ssl 可用性呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:56:41.920

使用在[https://stackoverflow.com/a/5378470/2012977](https://stackoverflow.com/a/5378470/2012977)创建的函数可以帮助检查 url 的可用性。请参见下面的示例。

```
public bool UrlExists(string url)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Timeout = 15000;
        request.Method = "HEAD"; 

        try
        {
            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                return response.StatusCode == HttpStatusCode.OK;
            }
        }
        catch (WebException)
        {
            return false;
        }
    } 
```

# windows-phone-8 - Windows phone 8 Emulator 并将测试图像复制到 CameraRoll

> ID：14518675
> 
> 赞同：5
> 
> 时间：2013-01-25T09:15:53.587
> 
> 标签：windows-phone-8, windows-phone

我想将一些图像复制到 windows phone 8 模拟器，但似乎找不到这样做的方法。

我希望当模拟器运行时，我能够按照真实设备通过 Windows 访问某些目录。

任何想法，我都忍不住想我错过了什么。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:42:57.407

我最近在该博客文章中详细介绍了如何做到这一点：

> [如何在 Windows Phone 模拟器上添加图像](https://web.archive.org/web/20160329201319/http://www.softwareisinthedetails.com/2012/11/add-test-images-on-windows-phone-emulator.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:50:43.817

检查电动工具。您可以使用此工具复制图像。 [http://wptools.codeplex.com/](http://wptools.codeplex.com/)

# ruby - 为什么我找不到 h1 标签？

> ID：14518677
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:16:04.047
> 
> 标签：ruby, rspec, capybara

这是我的测试：

```
require "rspec"

describe HomeController do
  render_views

  it "should renders the home" do
    get :home
    response.should render_template("home")
    find('H1').should have_content("Simulate Circuits Online")

  end

end 
```

但我得到：

```
1) HomeController should renders the home
     Failure/Error: find('H1').should have_content("Simulate Circuits Online")
     Capybara::ElementNotFound:
       Unable to find css "H1"
     # ./spec/controllers/home_controller_spec.rb:9:in `block (2 levels) in <top (required)>'
     # (eval):6:in `block in fork' 
```

如何找到标签、ID 或 CSS ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:42:16.690

您不能对从 , 等请求方法获得的响应使用 capybara 匹配器`get`。`post`对于 capybara 匹配器，您必须使用`visit`，如`visit 'home'`.

有关详细信息，请参阅[此帖子](http://blog.plataformatec.com.br/2012/06/improving-the-integration-between-capybara-and-rspec/)。尤其是这句话：

> Capybara 作为一个验收测试框架，不会暴露请求或响应对象等低级细节。为了使用 Capybara 访问网页，开发人员需要使用方法 visit（而不是 get）。要读取访问的页面正文，开发人员必须使用页面而不是操作响应。

另请参阅这篇文章：[使用 Capybara 检查多个页面上的页面响应](https://stackoverflow.com/questions/12648839/check-page-response-on-multiple-pages-with-capybara)

If you want to test the structure of an HTML string response, you might consider [rspec-html-matchers](https://github.com/kucaahbe/rspec-html-matchers).

# asp.net - 控件在使用空白参数的页面加载时未绑定到 SqlDataSource

> ID：14518682
> 
> 赞同：0
> 
> 时间：2013-01-25T09:16:28.123
> 
> 标签：asp.net, sqldatasource

假设您有一个如下所示的 SQLDataSource：

```
<asp:SqlDataSource ID="sqldsSample" runat="server" 
    ConnectionString="<%$ ConnectionStrings:myConnectionString %>" 
    SelectCommand="SELECT [col1], [col2] FROM [tbl] WHERE [col3] = @val) ORDER BY [col1] DESC;">
    <SelectParameters>
        <asp:Parameter DefaultValue="False" Name="val" Type="Boolean" />
        <asp:Parameter DefaultValue="" Name="val2" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

假设您已决定要在此处声明“val2”参数，并且您不想在后面的代码隐藏中添加和/或删除参数（例如，更改 SelectCommand 以进行一些额外的过滤标准）。

它会失败而没有错误 - 控件只会显示为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:16:28.123

即使不使用，您也必须为参数指定默认值。例如，只需输入一个空格字符即可：

`<asp:Parameter DefaultValue=" " Name="val2" Type="String" />`

请注意，如果您省略 DefaultValue 属性，它仍然不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T01:45:54.257

SqlDataSource 上还有`CancelSelectOnNullParameter`参数 - 如果您希望任何参数为空，则需要将其设置为 false。

这不是很明显，它已经抓住了我几次！

# c# - CSharpCodeProvider 和混淆

> ID：14518689
> 
> 赞同：1
> 
> 时间：2013-01-25T09:16:59.653
> 
> 标签：c#, obfuscation, csharpcodeprovider

我想在我的 Web 应用程序中动态创建一个 DLL，它可以生成一个唯一的类（特别是其中的一个唯一变量，对于这个下载来说是唯一的），然后可以由用户下载。

我可以用 CSharpCodeProvider 做到这一点，但是我不希望向任何反映 DLL 的人透露这个密钥。

有没有办法可以在程序集中混淆这个值？

# c# - C#抑制多个鼠标的鼠标单击

> ID：14518690
> 
> 赞同：3
> 
> 时间：2013-01-25T09:17:02.403
> 
> 标签：c#, winforms, hook, hid, wndproc

我编写了一个当前处理来自多个鼠标设备的点击的应用程序。

我使用[了这个项目](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)并进行了修改以处理与键盘相对的鼠标点击。

这工作正常，但是现在我需要知道如果我的应用程序已经处理了点击事件，是否有办法抑制它。该应用程序是一个问答游戏，因此其想法是问答大师将拥有（并且仍然能够使用）1 只鼠标，而其他参赛者将拥有自己的鼠标（作为蜂鸣器）。因此，当他们嗡嗡作响时，我不希望鼠标单击事件在操作系统（或至少此应用程序）中触发。

这个概念是对**void WndProc(ref Message message)**的熟悉覆盖，因此当我不希望触发点击事件时，我尝试不调用**base.WndProc(ref Message)**，但这没有奏效。

有人可以在这里指出我正确的方向吗？

我应该沿着[窗户挂钩](http://support.microsoft.com/kb/318804)路线走吗？我看过这个，但我似乎无法弄清楚如何单独连接到每个鼠标设备。

任何帮助将不胜感激。

**编辑：**

这是一个 Windows 窗体 UI 项目，而不是 WPF。所以[微软的 MultiPoint SDK](http://www.microsoft.com/multipoint/mouse-sdk/)将无法工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:42:18.200

解决这个问题的方法不是 WndProc，而是 PreFilterMessage()。通过在消息到达表单之前拦截消息，您可以将它们从消息泵中删除，从而导致它们永远无法到达被单击的控件。这也适用于表单中的子控件。

我回答了这个问题并在以下问题中发布了完整的来源：

[C# 获取鼠标句柄 (GetRawInputDeviceInfo)](https://stackoverflow.com/questions/14584280/c-sharp-get-mouse-handle-getrawinputdeviceinfo)

# memcached - 有什么办法可以让会话在 memcache 中保持很长时间

> ID：14518692
> 
> 赞同：0
> 
> 时间：2013-01-25T09:17:09.157
> 
> 标签：memcached

有什么方法可以让会话在 memcache 中保持很长时间，以防登录用户 1 个月？

我的意思是在服务器重新启动或崩溃后会话不会从内存缓存中消失？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:33:59.760

将唯一字符串写入用户浏览器上的 cookie，并确保该字符串可以匹配数据库中与用户对应的记录。然后在每次页面加载时，根据 users 表检查该 cookie 以查看是否有命中。如果是这样，那是你的人，他应该被认为是登录的，你可以写任何你想要的数据，服务器端，对应于那个用户。您可以将 cookie 设置为永不过期，这正是您想要的。

会话是 php 的东西，php 处理信息在服务器上的确切存储位置。您无法控制它使用的数据存储类型（mysql、memcached 等）。它存储在某个远离您的目录中。因此，从技术上讲，您的问题的答案是，不，您不能将会话存储在 memcached 或任何其他类型的数据存储中。

# android - 使用 Fragment 进行 Android NFC 开发

> ID：14518695
> 
> 赞同：6
> 
> 时间：2013-01-25T09:17:19.730
> 
> 标签：android, android-intent, android-fragments, nfc

NFC 的在线源代码是使用 Activity 完成的。我想问是否可以使用 Fragment 来开发？

这是我运行代码时遇到的错误

**java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.mobile.countmein/com.mobile.countmein.activities.NFCScanner}：java.lang.ClassCastException：com.mobile.countmein.activities.NFCScanner 无法转换为 android。应用程序.Activity**

```
public class TagViewer extends Fragment {

private static final SimpleDateFormat TIME_FORMAT = new SimpleDateFormat();
private LinearLayout mTagContent;

private NfcAdapter mAdapter;
private PendingIntent mPendingIntent;
private NdefMessage mNdefPushMessage;

private AlertDialog mDialog;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return inflater.inflate(R.layout.tag_viewer, container, false);
}

public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

      mTagContent = (LinearLayout)view.findViewById(R.id.list);
        resolveIntent(getActivity().getIntent());

        mDialog = new AlertDialog.Builder(getActivity()).setNeutralButton("Ok", null).create();

        mAdapter = NfcAdapter.getDefaultAdapter(getActivity());
        if (mAdapter == null) {
            showMessage(R.string.error, R.string.no_nfc);
        }

        mPendingIntent = PendingIntent.getActivity(getActivity(), 0,
                new Intent(getActivity(), getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
        mNdefPushMessage = new NdefMessage(new NdefRecord[] { newTextRecord(
                "Message from NFC Reader :-)", Locale.ENGLISH, true) });

}

private void showMessage(int title, int message) {
    mDialog.setTitle(title);
    mDialog.setMessage(getText(message));
    mDialog.show();
}

private NdefRecord newTextRecord(String text, Locale locale, boolean encodeInUtf8) {
    byte[] langBytes = locale.getLanguage().getBytes(Charset.forName("US-ASCII"));

    Charset utfEncoding = encodeInUtf8 ? Charset.forName("UTF-8") : Charset.forName("UTF-16");
    byte[] textBytes = text.getBytes(utfEncoding);

    int utfBit = encodeInUtf8 ? 0 : (1 << 7);
    char status = (char) (utfBit + langBytes.length);

    byte[] data = new byte[1 + langBytes.length + textBytes.length];
    data[0] = (byte) status;
    System.arraycopy(langBytes, 0, data, 1, langBytes.length);
    System.arraycopy(textBytes, 0, data, 1 + langBytes.length, textBytes.length);

    return new NdefRecord(NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_TEXT, new byte[0], data);
}

@Override
public void onResume() {
    super.onResume();
    if (mAdapter != null) {
        if (!mAdapter.isEnabled()) {
            showMessage(R.string.error, R.string.nfc_disabled);
        }
        mAdapter.enableForegroundDispatch(getActivity(), mPendingIntent, null, null);
        mAdapter.enableForegroundNdefPush(getActivity(), mNdefPushMessage);
    }
}

@Override
public void onPause() {
    super.onPause();
    if (mAdapter != null) {
        mAdapter.disableForegroundDispatch(getActivity());
        mAdapter.disableForegroundNdefPush(getActivity());
    }
}

private void resolveIntent(Intent intent) {
    String action = intent.getAction();
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)
            || NfcAdapter.ACTION_TECH_DISCOVERED.equals(action)
            || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        NdefMessage[] msgs;
        if (rawMsgs != null) {
            msgs = new NdefMessage[rawMsgs.length];
            for (int i = 0; i < rawMsgs.length; i++) {
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        } else {
            // Unknown tag type
            byte[] empty = new byte[0];
            byte[] id = intent.getByteArrayExtra(NfcAdapter.EXTRA_ID);
            Parcelable tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
            byte[] payload = dumpTagData(tag).getBytes();
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, id, payload);
            NdefMessage msg = new NdefMessage(new NdefRecord[] { record });
            msgs = new NdefMessage[] { msg };
        }
        // Setup the views
        buildTagViews(msgs);
    }
}

private String dumpTagData(Parcelable p) {
    StringBuilder sb = new StringBuilder();
    Tag tag = (Tag) p;
    byte[] id = tag.getId();
    sb.append("Tag ID (hex): ").append(getHex(id)).append("\n");
    sb.append("Tag ID (dec): ").append(getDec(id)).append("\n");

    String prefix = "android.nfc.tech.";
    sb.append("Technologies: ");
    for (String tech : tag.getTechList()) {
        sb.append(tech.substring(prefix.length()));
        sb.append(", ");
    }
    sb.delete(sb.length() - 2, sb.length());
    for (String tech : tag.getTechList()) {
        if (tech.equals(MifareClassic.class.getName())) {
            sb.append('\n');
            MifareClassic mifareTag = MifareClassic.get(tag);
            String type = "Unknown";
            switch (mifareTag.getType()) {
            case MifareClassic.TYPE_CLASSIC:
                type = "Classic";
                break;
            case MifareClassic.TYPE_PLUS:
                type = "Plus";
                break;
            case MifareClassic.TYPE_PRO:
                type = "Pro";
                break;
            }
            sb.append("Mifare Classic type: ");
            sb.append(type);
            sb.append('\n');

            sb.append("Mifare size: ");
            sb.append(mifareTag.getSize() + " bytes");
            sb.append('\n');

            sb.append("Mifare sectors: ");
            sb.append(mifareTag.getSectorCount());
            sb.append('\n');

            sb.append("Mifare blocks: ");
            sb.append(mifareTag.getBlockCount());
        }

        if (tech.equals(MifareUltralight.class.getName())) {
            sb.append('\n');
            MifareUltralight mifareUlTag = MifareUltralight.get(tag);
            String type = "Unknown";
            switch (mifareUlTag.getType()) {
            case MifareUltralight.TYPE_ULTRALIGHT:
                type = "Ultralight";
                break;
            case MifareUltralight.TYPE_ULTRALIGHT_C:
                type = "Ultralight C";
                break;
            }
            sb.append("Mifare Ultralight type: ");
            sb.append(type);
        }
    }

    return sb.toString();
}

private String getHex(byte[] bytes) {
    StringBuilder sb = new StringBuilder();
    for (int i = bytes.length - 1; i >= 0; --i) {
        int b = bytes[i] & 0xff;
        if (b < 0x10)
            sb.append('0');
        sb.append(Integer.toHexString(b));
        if (i > 0) {
            sb.append(" ");
        }
    }
    return sb.toString();
}

private long getDec(byte[] bytes) {
    long result = 0;
    long factor = 1;
    for (int i = 0; i < bytes.length; ++i) {
        long value = bytes[i] & 0xffl;
        result += value * factor;
        factor *= 256l;
    }
    return result;
}

void buildTagViews(NdefMessage[] msgs) {
    if (msgs == null || msgs.length == 0) {
        return;
    }
    LayoutInflater inflater = LayoutInflater.from(getActivity());
    LinearLayout content = mTagContent;

    // Parse the first message in the list
    // Build views for all of the sub records
    Date now = new Date();
    List<ParsedNdefRecord> records = NdefMessageParser.parse(msgs[0]);
    final int size = records.size();
    for (int i = 0; i < size; i++) {
        TextView timeView = new TextView(getActivity());
        timeView.setText(TIME_FORMAT.format(now));
        content.addView(timeView, 0);
        ParsedNdefRecord record = records.get(i);
        content.addView(record.getView(getActivity(), inflater, content, i), 1 + i);
        content.addView(inflater.inflate(R.layout.tag_divider, content, false), 2 + i);
    }
} 
```

}

我删除了以下内容，因为片段没有该方法：

```
@Override 
public void onNewIntent(Intent intent) {
  setIntent(intent);
  resolveIntent(intent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T12:22:50.933

一个fragment是用来控制一个Activity中用户界面的一部分。为什么不将您的 NFC 代码放入活动中？如果你真的需要片段中的 Intent，你可以在 Bundle 中传递它，因为 Intent 是 Parceable。

请参阅：[将意图传递给我的片段](https://stackoverflow.com/questions/17144512/pass-intent-to-my-fragment)

# windows - 无法将带有 Skype4COM 的 windows 服务附加到 Skype 客户端

> ID：14518698
> 
> 赞同：4
> 
> 时间：2013-01-25T09:17:32.010
> 
> 标签：windows, api, service, skype, skype4com

我试图创建一个允许与 Skype 客户端交互的 Windows 服务。

我正在使用 SKYPE4COM.DLL 库。

当我创建一个简单的控制台或 win32 应用程序时，一切正常（我有这个应用程序的 Skype 请求，它运行良好）。但是当我尝试将此应用程序作为服务运行时，出现错误

```
Service cannot be started. System.Runtime.InteropServices.COMException (0x80040201): Wait timeout.
at SKYPE4COMLib.SkypeClass.Attach(Int32 Protocol, Boolean Wait)
at Commander.Commander.OnStart(String[] args)
at System.ServiceProcess.ServiceBase.ServiceQueuedMainCallback(Object state) 
```

而且我没有关于连接到 Skype 的进程的通知。

你能给我一个建议，如何将服务附加到 Skype 客户端，或者我需要更改我的 Skype 设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:35:49.720

我认为由于 Windows 用户 ID 安全限制，这是不可能的。您必须在与 Skype 相同的用户下运行您的应用程序，否则它将无法附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T19:01:15.793

我遇到过同样的问题。通过将其转换为 Windows 应用程序并将其用作系统托盘应用程序来解决它：

```
[STAThread]
static void Main()
{
    Log.Info("starting app");

    //facade that contains all code for my app
    var facade = new MyAppFacade();

    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    using (ProcessIcon icon = new ProcessIcon(facade))
    {
        icon.Display();

        Application.Run();
    }
}

public class ProcessIcon : IDisposable
{
    private readonly MyAppFacade facade;
    private NotifyIcon ni;

    public ProcessIcon(MyAppFacade facade)
    {
        this.facade = facade;
        this.ni = new NotifyIcon();
    }

    public void Display()
    {
        ni.Icon = Resources.Resources.TrayIcon;
        ni.Text = "Skype soccer";
        ni.Visible = true;

        // Attach a context menu.
        ni.ContextMenuStrip = new ContextMenuStrip();

        var start = new ToolStripMenuItem("Start");
        start.Click += (sender, args) => facade.Start();
        ni.ContextMenuStrip.Items.Add(start);

        var stop = new ToolStripMenuItem("Stop");
        stop.Click += (sender, args) => facade.Stop();
        ni.ContextMenuStrip.Items.Add(stop);

        var exit = new ToolStripMenuItem("Exit");
        exit.Click += (sender, args) => Application.Exit();
        ni.ContextMenuStrip.Items.Add(exit);
    }

    public void Dispose()
    {
        ni.Dispose();
    }
} 
```

# ios - 我可以在 Phonegap Build 中为 iOS 定义自定义 URL 方案吗？

> ID：14518699
> 
> 赞同：2
> 
> 时间：2013-01-25T09:17:33.297
> 
> 标签：ios, cordova, url-scheme, phonegap-build

我确实知道我可以为我的应用程序实现自定义 URL 方案，`plist.info`像**[这样](https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Custom%20URL%20Scheme%20Handling.md)**在 xCode 中编辑我的，但我想知道这是否也可以通过使用 Phonegap Build 构建的应用程序来完成。**[文档](https://build.phonegap.com/docs/config-xml)**没有说明任何内容。

我担心这实际上是不可能的，但由于我在网上根本没有找到关于这个主题的任何内容，我认为在这里尝试一下可能是值得的，即使它只是为了创建一个不可能的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:45:55.500

此功能至少早在 2.2.0 版（2012 年 10 月 31 日）就内置在 PhoneGap 中，因此如果您使用 PG Build 并仅更新您的 plist 文件，它应该可以工作。这是一些适用于我的示例 XML：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>com.cams.myapp</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>myApp</string>
        </array>
    </dict>
</array> 
```

您应该使用属性编辑器来编辑此文件并获取正确的格式。

![在此处输入图像描述](../Images/8e91ae66bec7aec1828849a87c56ebd4.png)

# jquery - TinyMCE 剥离 HTML

> ID：14518701
> 
> 赞同：0
> 
> 时间：2013-01-25T09:17:40.690
> 
> 标签：jquery, tinymce

我遇到了 TinyMCE 的问题，在我的内容管理器系统中，我包含了几个 TinyMCE 字段。

由点击函数中的图标上的点击函数触发，它调用函数showNewTextEdit。

问题是在 Internet Explorer 8 中，所有 HTML 标记都被从文本中删除。我已经在其他浏览器（Firefox 和 Chrome）中对其进行了测试。它在那些方面完美无缺。

这是我用来创建tinymce的函数。

```
function showNewTextEdit(editdiv, value, existing) {
    var textedit = $("<textarea />").addClass("tinymce value").html(value);

    $(editdiv).append(textedit);

    $('.tinymce').tinymce({
        script_url : '/js/tinymce/jscripts/tiny_mce/tiny_mce.js',

        <?php // General options ?>
        language : 'nl',
        theme : "advanced",
        plugins : "safari,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template,imagemanager",

        theme_advanced_buttons1 : "bold,italic,underline,forecolor,|,bullist,numlist,hr,|,undo,redo",
        theme_advanced_buttons2 : "copy,paste,cut,|,link,unlink,|,search, removeformat",
        theme_advanced_buttons3 : "visualaid,tablecontrols",
        theme_advanced_buttons3 : "",

        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_resizing : true,

        content_css : "/css/tinyMceWMS.css",

        theme_advanced_blockformats : "h1,h2,h3,h4,h5,h6",
        forced_root_block : false,
        force_br_newlines : true,
        force_p_newlines : false,
        paste_create_paragraphs : false,
        paste_create_linebreaks : false,
        paste_use_dialog : false,
        paste_auto_cleanup_on_paste : true,
        paste_convert_middot_lists : false,
        paste_unindented_list_class : "unindentedList",
        paste_convert_headers_to_strong : true,
        theme_advanced_resize_horizontal: false,
        convert_urls : false,
        width : editbreedte,
        height: 400
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T20:02:32.737

您可能需要稍微更改插件选项。

看一下初始化示例： [http ://www.tinymce.com/wiki.php/Plugin3x:paste](http://www.tinymce.com/wiki.php/Plugin3x:paste)

每个插件选项旁边的摘要非常有用。

# ios - 在 iOS 中下载和使用 sqlite 文件

> ID：14518704
> 
> 赞同：0
> 
> 时间：2013-01-25T09:18:01.450
> 
> 标签：ios, database, sqlite, url, download

将 .sqlite 文件存储在我的项目文件夹中时，我已成功使用它。我现在正在尝试做同样的事情，除了从在线拉文件而不是在本地存储它。基于此代码的任何建议？我从代码底部收到错误消息“prepare statement 问题”。

```
 NSData *fetchedData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://www.dropbox.com/s/zpcieluo2qv43vy/builds.sqlite?dl=1"]];
    NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *filePath = [documentsPath stringByAppendingPathComponent:@"builds.sqlite"];
    [fetchedData writeToFile:filePath atomically:YES];

    NSFileManager *fileMgr = [NSFileManager defaultManager];

    BOOL success = [fileMgr fileExistsAtPath:filePath];
    if (!success) {
        NSLog(@"Cannot locate database file '%@'.", filePath);
    }
    if (!(sqlite3_open([filePath UTF8String], &db) == SQLITE_OK)) {
        NSLog(@"An error has occured.");
    }
    const char *sql = "SELECT * FROM builds";
    sqlite3_stmt *sqlStatement;

    if (sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK) {
        NSLog(@"Problem with prepare statement");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:02:17.490

您的保管箱 URL 将不起作用，您需要使用： [https ://www.dropbox.com/s/zpcieluo2qv43vy/builds.sqlite?dl=1](https://www.dropbox.com/s/zpcieluo2qv43vy/builds.sqlite?dl=1)

或者你只是在下载一个网页......

# ios - 无需用户交互即可自动开启 GPS

> ID：14518705
> 
> 赞同：1
> 
> 时间：2013-01-25T09:18:04.497
> 
> 标签：ios

是否可以在没有用户交互的情况下以编程方式打开 GPS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:20:53.153

不，在没有用户交互的情况下无法打开 GPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:23:15.743

第一次尝试打开它时，会有一个警报。用户启用后，即可随意开启/关闭。

见 CLLocationManager

[https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

# android - CADisplayLink(iOS) 或 CompositionTarget(WP) 的 android 相关性是什么

> ID：14518706
> 
> 赞同：8
> 
> 时间：2013-01-25T09:18:09.513
> 
> 标签：android, cadisplaylink

我需要更新每帧动画，在 iOS 上我有[`CADisplayLink`](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)，在 WinPhone 上我有[`CompositionTarget`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.compositiontarget.rendering)，但我如何在 Android 上做到这一点？

目前我正在使用 a `Timer`，`Handler`但我相信有一种方法可以将回调与刷新率同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-26T21:15:34.913

我所知道的最直接的等价物是[`Choreographer`](http://developer.android.com/reference/android/view/Choreographer.html)（从 API 16 开始）。

看起来您的动画编写方式决定了同步它的最佳方式。编舞一般用处不大。`ViewPropertyAnimator`如果您的动画是在 AFAIK 包含的“动画框架”之外编写的，并且......也许是 XML 定义的动画，Choreographer 会很有用？究竟是什么是无证的。

`Choreographer`看起来它主要用于同步`GLSurfaceView`动画。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:22:37.737

嗯，看起来[`ViewTreeObserver`](http://developer.android.com/reference/android/view/ViewTreeObserver.html)可能会帮助你。试试这个代码：

```
final ViewTreeObserver vto = myView.getViewTreeObserver();
vto.addOnDrawListener(new ViewTreeObserver.OnDrawListener() {
    @Override
    public void onDraw() {
        // Do whatever you need to do...
    }
}); 
```

几点注意事项：

*   `onDraw`您可以在其中做什么有很多限制。具体来说，您不能修改视图树。如果这是您需要做的事情，请查看[`ViewTreeObserver.OnPreDrawListener`](http://developer.android.com/reference/android/view/ViewTreeObserver.OnPreDrawListener.html)。
*   相机预览和媒体播放是在单独的路径上绘制的，并且很可能与此侦听器不同步，因此您无法使用它来与各个帧同步执行操作。

# jquery - 如何禁用所有超链接，直到使用 javascript 或 jquery 加载所有灯箱？

> ID：14518709
> 
> 赞同：0
> 
> 时间：2013-01-25T09:18:23.873
> 
> 标签：jquery

如何禁用所有超链接，直到`lightbox`加载。因为在`lightbox-js`加载之前，如果我点击超链接，那么它会被重定向到 HTML 页面，而不是显示在灯箱中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:20:27.920

### 使用`bind()`和`unbind()`。

```
$('a').click(function(e){
    e.preventDefault();
}); 
```

加载灯箱后，使用以下命令：

```
$('a').unbind('click'); 
```

# macos - 如何在macosx中将系统日期设置为一天后

> ID：14518715
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:18:51.340
> 
> 标签：macos

在 macOS 中，我可以将系统时间设置为静态时间，例如 2013-01-30 16:43:55 by

```
date 013016432013 
```

但是如果我使用这个命令来设置日期，我应该检查日期和月份，因为 30/31 天，如果在 12-30 之后添加年份。这很不方便。那么谁能告诉我是否有按间隔设置日期的方法，例如，我想将其设置为一天后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:17:05.093

您可以使用`date`'`-v`选项来调整输出日期；例如，`date -v+3d`将打印 3 天后的日期。如果你想像这样设置系统日期，你需要运行`date`两次，一次是为了得到一天中的日期，然后再次将系统日期设置为：

```
sudo date $(date -v+1d +%m%d%H%M%Y.%S) 
```

# c++ - C++ 函数 参数传递

> ID：14518716
> 
> 赞同：-4
> 
> 时间：2013-01-25T09:18:55.860
> 
> 标签：c++

我有一个功能

```
int C_MORPHO_Device::Capture(C_MORPHO_TemplateList& o_x_Template);  

I C_MORPHO_TemplateList::GetTemplate  ( UC  i_uc_indexTemplate,  
  T_MORPHO_TYPE_TEMPLATE &  o_uc_typTemplate,  
  UL &  o_ul_lenTemplate,  
  PUC &  o_puc_dataTemplate,  
  UC &  i_uc_dataIndex   
 ) 
```

如何将`o_x_Template`作为参数传递给我的`Capture`函数。

```
C_MORPHO_Device Capture;  
Capture.Capture(C_MORPHO_TemplateList& o_x_Template); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:22:54.647

你可能只需要写

```
C_MORPHO_Device Capture;  
Capture.Capture(o_x_Template); 
```

该函数需要一个作为引用传递的参数，它不需要任何特定的语法修饰，假设`o_x_Template`确实是一个`C_MORPHO_TemplateList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:23:45.183

这是你想要的吗？

```
C_MORPHO_Device Capture;  
C_MORPHO_TemplateList o_x_Template;
Capture.Capture(o_x_Template); 
```

调用函数时，需要传入真实对象，而不是声明。

# ios - 压缩 sqlite 数据，NSString 还是 NSData？

> ID：14518719
> 
> 赞同：0
> 
> 时间：2013-01-25T09:19:00.570
> 
> 标签：ios, core-data, compression

我使用 sqlite 文件来存储数据，并且我存储的很多数据都是 NSString 格式，如果我将这些数据存储为 NSData，它会使我的 sqlite 文件的大小更小吗？我还能做些什么来减少 sqlite 文件的大小吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:05:58.740

Prajwal 为优化 Core Data 存储提供了一些很好的通用技巧。但要回答您的具体问题：不，从转换`NSString`为`NSData`不会节省任何空间，实际上可能会使用更多空间。`NSData`不做任何压缩。要转换为`NSData`你想要的东西

```
NSData *myData = [myString dataUsingEncoding:NSUTF8StringEncoding]; 
```

但这无济于事，而且可能会使事情变得更糟。例如，如果您的字符串包含“é”，`NSString`则将其表示为一个字节。但是 UTF-8 需要两个字节，因此占用了`NSData`更多空间。

如果您真的想压缩字符串，可以使用开源实现来为您提供压缩`NSData`对象。不要这样做，除非你有**很多**你知道会压缩的字符串数据。它可能会节省空间，但是 (a) 它会以牺牲速度为代价，并且 (b) 您将无法使用这些字符串在数据存储中查找对象。

如果您**仍**需要减小数据存储的大小，请在描述数据模型的位置提出另一个问题。根据您的数据模型的外观，应用不同的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T11:37:03.223

正如其他人所说，SQLite / CoreData 并不能真正帮助您完成这项工作。您已经指出了正确的解决方案，即使用 NSData 将原始字节存储在 SQLite 存储中并自己进行内存转换。

这将异常缓慢，因为压缩本身就很昂贵。

这是您需要做的：

1.  将属性类型设置为 NSData
2.  查看[libz](http://www.zlib.net)并将其添加到 Xcode 中的项目中
3.  从 libz 中选择压缩风格
4.  实现自定义属性来进行翻译

    ```
    - (NSString *)getAttrString {
         NSData *bytes = self.attr
         //decompress
    }

    - (void)setAttrString:(NSString *)s {
        NSData *d = //compress
        self.attr = d;
    } 
    ```

正如其他人提到的那样，压缩小字符串并没有任何好处，因此您可能希望在模型中添加一个布尔值，以指示数据是否实际被压缩。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T09:36:07.540

你可以这样做： **保存图片链接**而不是图片。如果有很大的描述，那么您可以通过服务器获取它。删除多个数据。IE; **重复数据** 使用数据库中的数据删除运行时可以生成的数据。 **执行规范化**以优化数据库，这将避免并清理存在的混乱。

# c# - BackgroundTask 在 AirplaneMode 中禁用（之后不会自行启用）

> ID：14518727
> 
> 赞同：0
> 
> 时间：2013-01-25T09:19:19.883
> 
> 标签：c#, windows-phone-7, windows-phone-8

我开发了两个应用程序，它们都使用后台代理。当我昨晚打开飞行模式，明天醒来时，我看到（设置>后台任务）1个后台任务运行良好，而另一个则没有。

被禁用的一个从 Weather API 获取数据，另一个只是生成随机图块（没有互联网连接）。

当我打开应用程序并返回后台任务时，它会自行启用。

这里发生了什么？我知道当应用程序未使用 14（？）天时，后台任务会自行禁用，但事实并非如此。当然我知道当手机处于飞行模式时后台任务不会运行。

那么，我怎样才能让我的应用在飞行模式关闭时再次自动开启呢？就像我的其他（离线）应用一样。

亲切的问候，尼尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:29:55.967

这可能意味着您的后台任务没有很好地处理无连接错误。当您的后台代理连续两次失败时，它会被操作系统自动禁用。只需将您的网络调用放在 try/catch 块中即可解决问题。

# node.js - Node.js 和大量使用 fs 的观察者

> ID：14518728
> 
> 赞同：1
> 
> 时间：2013-01-25T09:19:28.730
> 
> 标签：node.js, file-watcher

我正在使用nodejs的文件系统本机库，但是我的fs.watch有问题，打开了大量的观察者，有时节点返回ENOSPC错误，我将linux内核的问题本地化以打开观察者并发现dropbox应用程序吃了很多旁观者。我的问题是，如果您知道另一个适用于该文件系统的 node 文件系统库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-14T11:35:40.313

您可以使用以下方法增加最大用户观看次数：

```
echo 10000 | sudo tee /proc/sys/fs/inotify/max_user_watches 
```

# ruby - 在我的 Rails 应用程序中包含 bundler gem 本身

> ID：14518731
> 
> 赞同：1
> 
> 时间：2013-01-25T09:19:33.863
> 
> 标签：ruby, deployment, configuration, rubygems, bundler

捆绑器很棒。但是有一个 gem 不能用，那就是`bundler`gem 本身，它仍然需要手动安装：

```
Could not load the bundler gem. Install it with `gem install bundler`. 
```

除了是一个额外的步骤之外，这还为与 Bundler 本身的版本不兼容打开了大门。

有没有办法在我的应用程序中包含 Bundler 本身，以便它依赖于包含的 bundler gem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:59:51.390

不可以。ruby gems 保留在用户环境中，你不能将它与你的项目一起分发，用户需要安装 bundler。并且 Bundler 不能自行捆绑。:)

# mysql - 如何使用另一个数据库的转储更新一个数据库 - MySQL

> ID：14518736
> 
> 赞同：1
> 
> 时间：2013-01-25T09:19:55.173
> 
> 标签：mysql

我已经制作了两个具有完全相同的表和列的数据库，在 mysql 中说 A 和 B。我创建了数据库 A 的转储，然后尝试使用数据库 A 的转储来更新数据库 B 的内容。我使用的是命令 -->source [path]; ./ 它做了什么数据库 A 的转储完全删除了数据库 B 的内容。我无法弄清楚如何使用另一个数据库的转储来更新一个数据库。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:11:50.623

您可以通过复制来做到这一点。浏览这些有用的链接[第一个链接](http://dev.mysql.com/doc/refman/5.5/en/replication-options-slave.html#option_mysqld_replicate-same-server-id)

[第二个链接](https://stackoverflow.com/questions/8104700/replicate-tables-from-different-database-of-same-mysql-server)

# ruby-on-rails-3.2 - rack-offline gem：生成的清单文件在哪里？

> ID：14518737
> 
> 赞同：0
> 
> 时间：2013-01-25T09:19:56.720
> 
> 标签：ruby-on-rails-3.2

我正在使用“rack-offline”gem 来管理 HTML5 清单

我安装了它，配置并运行了应用程序，但出现错误，但不清楚如何将它与 HTML 清单以及当前的 Rails 应用程序相关联：

*   match "/application.manifest" => Rails::Offline in routes.. 是它还是应用程序应该是 Rails 应用程序的名称...？即匹配“/workshop.manifest” => Rails::Offline

我在生成的 html 中看不到 manifest 属性：

*   我们应该在 mime_types.rb 初始化程序中添加一个 MIME 类型“text/cache-manifest”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:30:28.467

我猜缺少的信息如下（在添加 gem 并将配置设置为初始化文件 rack_offline.rb

在路线中：我插入了路径

```
match "/application.manifest" => Rails::Offline, :as => :manifest 
```

在我的应用程序布局（haml）中，我修改了 html 标签

```
%html{:lang => "en", :manifest => manifest_path }
# which generates the following html .. ( I have localized routes ... )
<html lang='en' manifest='/fr/application.manifest'> 
```

在我的 config/initializers/mime_types.rb 中，我添加了 Mime::Type.register "text/cache-manifest", :manifest

然后重新启动服务器，我可以在日志中看到：Started GET "/fr/application.manifest" for 127.0.0.1 at 2013-01-25 11:26:40 +0100

```
CACHE MANIFEST
# aba331a67ba974bf70c665dfc48a1bea5da7d8fe352c46a76af07f45c339d422
404.html
422.html
500.html
offline.html

NETWORK:
* 
```

这些都是公开的html文件......需要了解并检查它是否是正确生成的清单文件

# python - 如何使用 Python 脚本在文本文件或日志文件中写入时间（本地系统时间）？

> ID：14518740
> 
> 赞同：2
> 
> 时间：2013-01-25T09:20:04.160
> 
> 标签：python, sikuli

我必须编写一个测试用例，因为我使用的是在 Python 脚本上工作的 sikuli，在这里我无法在文本文件中写入本地系统时间。

```
import time;

localtime = time.localtime(time.time())
inp=file("C:\\Users\\%path%\\Log.txt", 'w')
inp.write('************** Full Process ****************\n')
inp.write('Local current time :', localtime)  incorrect 
```

在这里，我正在创建一个 .txt 文件，而且我必须编写时间，但我不知道如何编写代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:35:15.307

这几乎是正确的，但是您在编写时间时出错：

```
inp.write('Local current time :', localtime) 
```

如果要格式化这样的字符串，则需要使用`%`运算符：

```
inp.write('Local current time : %s' % localtime) 
```

此外，仅打印 Time 对象将打印一个非常奇怪的字符串。您想以更方便的方式编写日期，例如 YYYY/MM/DD - HH:MM:SS。你这样做：

```
localtime.strftime ('%Y/%m/%d - %H:%M:%S') 
```

所以你的一段代码将是：

```
import time

localtime = time.localtime(time.time())
timestring = time.strftime ('%Y/%m/%d - %H:%M:%S')
inp=file("Log.txt", 'w')
inp.write('************** Full Process ****************\n')
inp.write('Local current time : %s' % timestring) 
```

# gwt - 如何使用 maven 将另一个 gwt 项目添加到类路径？

> ID：14518743
> 
> 赞同：0
> 
> 时间：2013-01-25T09:20:14.323
> 
> 标签：gwt, maven, build

我有一个引用另一个 gwt 项目（子）的 gwt 项目（父），但是当我构建父项目时，我遇到了这个错误：

> [错误] 在您的类路径中找不到“com/company/package/conf.gwt.xml”；可能是拼写错误，或者您忘记包含源的类路径条目？

谁能告诉我如何使用 maven 将子项目添加到父项目的类路径中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:16:16.393

选择构建路径->配置构建路径->项目->添加->（选择您要添加的项目）单击订单并导出并选择项目

继承 .gwt.xml 文件中的上述模块

例如：（`<inherits name='com.mycompany.ProjectName'/>`如果您在包 com.mycompany 中有 ProjectName.gwt.xml，则像这样继承）

要添加外部 jar，请参阅以下链接：

[在 GWT 中添加外部 jar](https://stackoverflow.com/questions/14515459/adding-external-jar-in-gwt/14515943#14515943)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:04:45.783

父项目通常只是一个外壳。

理想情况下，您应该选择 Parent、Child 1 和 Child 2。Child 1 将具有 conf.gwt.xml 模块，而 Child 2 应该使用 Child 1 并构建/部署带有战争入口点的 gwt 模块！！！

```
Maven Parent Project A

 --> Maven Child Project B1 ( gwt-module common.gwt.xml )

 --> Maven Child Project B2 ( gwt-module b2.gwt.xml ) -> dependency on B1 and inherits common.gwt.xml

 --> Maven Child Project B3 ( gwt-module b3.gwt.xml )

 --> Maven Child Project B4 ( gwt-module app.gwt.xml ) -> dependency on B1, B2, B3 and inherits common.gwt.xml, b3.gwt.xml and b3.gwt.xml and has entrypoint tag in its app.gwt.xml file 
```

您对 Maven 项目组织提出了更多质疑。您可以找到有关 Maven 子模块的所有信息 - [http://www.sonatype.com/books/mvnref-book/reference/](http://www.sonatype.com/books/mvnref-book/reference/)

# php - 对数组进行排序的有效方法？

> ID：14518745
> 
> 赞同：2
> 
> 时间：2013-01-25T09:20:27.427
> 
> 标签：php, arrays, sorting

我有一个变量长度数组，包含按 startdate 排序的事件，如下所示：

```
Array
(
[0] => stdClass Object
    (
        [id] => 1978
        [date] => 2012-09-29
    )

[1] => stdClass Object
    (
        [id] => 1979
        [date] => 2012-10-14
    )

...etc.... 
```

我需要创建一个函数来获取其中一个事件，并将其放在一个长度正好为 7 的新数组的中间，并将事件的邻居放在每一侧。

因此，如果事件 5 传递给函数，则输出应为：

```
[2][3][4][5][6][7][8] 
```

如果第一个事件被传递给函数，并且事件的原始数量是 12，那么输出应该是：

```
[10][11][12][1][2][3][4] 
```

如果事件的原始数量为 6，并且通过了第五个事件，则输出应为：

```
[2][3][4][5][6][1][] 
```

所以事件列表应该总是在新数组中“环绕”并尽可能多地填充它。

我已经破解了一个解决方案，其中涉及相当多的步骤。我真的不喜欢它，这让我想知道：

这将如何以最有效和最优雅的方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:57:24.507

```
You need to change the values in this codes
  define('TO_SHOW',7); // number of items to show in your case it is 7
  $selected      = 1; //// which one you need need at center. 
```

和你的阵列；

执行此操作并尝试：

```
<?php 

define('TO_SHOW',7); // number of items to show in your case it is 7

function change_order($arry, $sel){
   $arr_cnt      = count($arry);   
   $shift_count  = $arr_cnt - (ceil(TO_SHOW/2)-$sel);
   for($i=0; $i<$shift_count; $i++){
      array_push($arry, array_shift($arry));
   }
   return array_slice($arry, 0, TO_SHOW);
} 

$arr            = array(array(
                    "id" => 1,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 2,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 3,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 4,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 5,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 6,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 7,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 8,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 9,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 10,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 11,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 12,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 13,
                    "date" => 2012-09-29
                    ),
                    array(
                    "id" => 14,
                    "date" => 2012-09-29
                    )
                );

$selected      = 1; //// centre one             
$test   = change_order($arr, $selected);

echo "<pre>";
print_r($test);
?> 
```

# php - Facebook 检索正确的 access_tokens

> ID：14518755
> 
> 赞同：0
> 
> 时间：2013-01-25T09:20:49.040
> 
> 标签：php, facebook

我无法找到正确的 access_tokens。我已经尝试了在 Google 和 developers.fb 上找到的所有方法，但是对于这个应用程序（我以前做过，并使它适用于另一个应用程序）我似乎并不成功。

我知道 FB 一直在更新他们的 API，所以也许我只是找到了过时的解决方案。

似乎有不同类型的访问令牌：用户访问令牌和页面访问令牌。我在 facebook 文档中找到了一些答案，但没有一个是我理解的。

我正在尝试创建的应用程序类似于生日提醒，因此它需要能够发送离线消息（fex。由 cron-job 运行，并仅发布到我拥有的一个 fb 页面，只是以应用程序本身的名义）

我已在此地址上的页面选项卡上注册了该应用程序：--`https://www.facebook.com/dialog/pagetab?app_id=MY_APP'S_ID&display=popup&next=MY_URL`现在可以从 Facebook 页面的设置中找到它。

然后我到达需要访问令牌的部分。我不知道哪个 URL 给了我什么样的访问令牌，所以我都尝试了：

我访问过这个 URL：（我写了所有重复的链接，教程中的答案，以及我重写的链接）（当然，出于安全原因，所有指向我的应用程序和网页的代码都被替换了）

-- `https://www.facebook.com/dialog/oauth?client_id=0123456789011121&redirect_uri=http://www.example.com&scope=read_stream,publish_stream,offline_access`--

-- `https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=MY_REDIRECT_URL&scope=read_stream,publish_stream,offline_access`--

并得到：

```
http://www.example.com/?code=XXXXX1x1X1xxXxxX1xXxXxX1X111xX11XXXXX1XXXXXxX_XxXxxXxX1xxxXx1xXxXx-x1XxXXXxXXx1xXxXXXxXl1xX-111xXxxxXxxx1xXxxx1xXx1X1X1Xx-xxxXXXxXXXX1XXXXxx1Xxx1_xXxXxxxXx1x1XxXxxXx1XXxX-x1x1xxxXXxXxX1XX1XX1x1-xxXxxxx1Xx1XxXXXxxX#_=_ 
```

换句话说（我相信），检索了代码：

```
XXXXX1x1X1xxXxxX1xXxXxX1X111xX11XXXXX1XXXXXxX_XxXxxXxX1xxxXx1xXxXx-x1XxXXXxXXx1xXxXXXxXl1xX-111xXxxxXxxx1xXxxx1xXx1X1X1Xx-xxxXXXxXXXX1XXXXxx1Xxx1_xXxXxxxXx1x1XxXxxXx1XXxX-x1x1xxxXXxXxX1XX1XX1x1-xxXxxxx1Xx1XxXXXxxX#_=_ 
```

正如我在谷歌上发现的那样，我似乎还需要获取另一个代码，所以我访问了这个 URL（当然我已经尝试了我首先得到的第一个代码）：

```
https://graph.facebook.com/oauth/access_token?client_id=0123456789011121&redirect_uri=http://www.example.com&client_secret=1x1111xx11111xXXx11x111111111x11&code=XXXXX1x1X1xxXxxX1xXxXxX1X111xX11XXXXX1XXXXXxX_XxXxxXxX1xxxXx1xXxXx-x1XxXXXxXXx1xXxXXXxXl1xX-111xXxxxXxxx1xXxxx1xXx1X1X1Xx-xxxXXXxXXXX1XXXXxx1Xxx1_xXxXxxxXx1x1XxXxxXx1XXxX-x1x1xxxXXxXxX1XX1XX1x1-xxXxxxx1Xx1XxXXXxxX#_=_ 
```

-- `https://graph.facebook.com/oauth/access_token?client_id=MY_APP_ID&redirect_uri=MY_REDIRECT_URL&client_secret=MY_APP_SECRET&code=THE_CODE_I_GOT_FROM_THE_PREVIOUS_RUN`--

但是当我尝试运行该应用程序时，我收到此错误消息：结果：`{"error":{"message":"Malformed access token XXXXX1x1X1xxXxxX1xXxXxX1X111xX11XXXXX1XXXXXxX_XxXxxXxX1xxxXx1xXxXx-x1XxXXXxXXx1xXxXXXxXl1xX-111xXxxxXxxx1xXxxx1xXx1X1X1Xx-xxxXXXxXXXX1XXXXxx1Xxx1_xXxXxxxXx1x1XxXxxXx1XXxX-x1x1xxxXXxXxX1XX1XX1x1-xxXxxxx1Xx1XxXXXxxX#_=_","type":"OAuthException","code":190}}`

我尝试过使用不同类型的访问令牌结尾（# *=*），因为我无法从上周检索到的另一个工作访问令牌到我构建的完全正常工作的应用程序中识别它。我记得那个没有那个结局。

如果有任何兴趣，我也会在此处发布脚本。我在教程中找到了它，它是非常简单的代码：

```
<?php
    // CURL function to send with post method
    function send_post_curl($url, $postdata = “”) {
    $ch = curl_init($url);
    curl_setopt ($ch, CURLOPT_POST, 1);
    curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    $data = curl_exec ($ch);
    curl_close ($ch);
    return $data;
    }
    // setup the message
    $fburl = 'https://graph.facebook.com/THE_FB_PAGE_ID/feed';
    $fbtoken = 'THE_ACCESS_TOKEN';
    $fbmsg = 'Great API to auto status, this is the message.
    Thank to WebDDR
    http://webddr.net/tips-and-tricks/facebook-offline-access-step-by-step-explanation/';
    $fbpcurl = 'access_token='. $fbtoken;
    $fbpcurl .= '&message='. str_replace('&', 'and', urlencode($fbmsg)) ;
    $result = send_post_curl($fburl, $fbpcurl);
    echo 'Result: '. $result;
?> 
```

我真的希望有人能帮助我，我这样做是为了在大学里接受教育。/约翰 PS。对不起，不得不与链接争吵，--link--因为论坛认为它是垃圾邮件Ds。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:54:30.047

试试这个代码：

```
<?php
session_start();   
$facebook_appid         = "facebook_appid";                                 // Facebook appplication id
$facebook_secret        = "facebook_secret";                // Facebook secret id
$redirect_uri           = "https://localhost/facebook_page/events.php";   // return url to our application after facebook login ## should be SAME as in facebook application
$scope                  = "user_photos,email,user_birthday,user_online_presence,offline_access,manage_pages,publish_stream,user_events,friends_events"; // User permission for facebook

$code                   = $_REQUEST["code"]?$_REQUEST["code"]:"";

if(empty($code)) {
    $_SESSION['state']  = time(); // CSRF protection
    $dialog_url         = "https://www.facebook.com/dialog/oauth?client_id=". $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri) . "&state=". $_SESSION['state'] . "&scope=".$scope;
    header("location:".$dialog_url);
}

if($_SESSION['state'] && ($_SESSION['state'] == $_REQUEST['state'])) {
    $token_url          = "https://graph.facebook.com/oauth/access_token?". "client_id=" . $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri). "&client_secret=" . $facebook_secret . "&code=" . $code;
    $response           = @file_get_contents($token_url);

    $params             = null;
    parse_str($response, $params);

    echo $params['access_token'];
    echo "<br>";

    //$offer_url        = "https://graph.facebook.com/".$dt->id."/conversations?access_token=".$dt->access_token;
    //$off              = @file_get_contents($offer_url);
    //$dto              = json_decode($off);

    //echo "<pre>";
    //print_r($dto);

}

?> 
```

# android - 为其他应用程序创建快捷方式，但 Android Jellybean 上的图标大小错误

> ID：14518758
> 
> 赞同：0
> 
> 时间：2013-01-25T09:20:58.947
> 
> 标签：android, icons, size, shortcut

我有一个`activity`可以检索所有像 Launcher 一样的应用程序`AllAppsList`（或者我应该准确地称它们为活动，因为一个应用程序可以有多个`activities`，比如谷歌地图）。这`activity`可以广播`Intent`为任何这些应用程序创建快捷方式。我的问题是关于创建的快捷方式。这是我的代码创建快捷方式：

```
public static void addShortcut(Context c, ActivityInfo actInfo){
    PackageManager pm = c.getPackageManager() ;
    String packageName = actInfo.packageName ;
    String className = actInfo.name ;
    CharSequence label = actInfo.loadLabel(pm) ;

    // Create an Intent to launch the application
    Intent shortcutIntent = new Intent (Intent.ACTION_MAIN) ;
    shortcutIntent.setComponent(new ComponentName(packageName, className)) ;
    shortcutIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP) ;
    // Create an Intent to notify Launcher to create a shortcut on home screen
    Intent addIntent = new Intent() ;
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent) ;
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, label) ;
    // Put in the shortcut's icon
    Log.i(TAG, "use actInfo.loadIcon(pm)") ;
    Drawable drawable = actInfo.loadIcon(pm) ;
    Bitmap b = ((BitmapDrawable)drawable).getBitmap() ;
    addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON, b) ;

    // Broadcast the Intent
    addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    c.sendBroadcast(addIntent) ;
} 
```

这可以成功地在主屏幕上创建快捷方式，但这些图标的大小几乎不正确。它们可能太小或太大。[像这张图片..](https://imgur.com/JeWdIJ9)上面一行是我创建的 2 个快捷方式。下面的2个快捷键是从Launcher拖出来的`AllAppsView`，都是正常的。貌似我的比较小。。。

我尝试的第一件事是调整图标的大小。但如果我这样做，创建的图标就不会像我从 Launcher 的 AllAppsView 中拖动的那样完美。换句话说，它们变得模糊。

另一个尝试是这段代码：

```
 if (actInfo.icon != 0){
        Log.i(TAG, "use actInfo.icon") ;
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
                Intent.ShortcutIconResource.fromContext(c, actInfo.icon)) ;
    }
    else if (actInfo.applicationInfo.icon != 0){
        Log.i(TAG, "use actInfo.applicationInfo.icon") ;
        addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,
                Intent.ShortcutIconResource.fromContext(c, actInfo.applicationInfo.icon)) ;
    } 
```

[这是从这里开始的](https://stackoverflow.com/questions/6424246/creating-shortcuts-in-android-via-intent)，但这也不起作用。

希望有人能帮帮我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:11:31.133

我认为你应该做的是：

```
final int appIconSize=(int)(getResources().getDisplayMetrics().density*48);
final Bitmap temp;
if(shortcutIconBitmap.getWidth()==appIconSize&&shortcutIconBitmap.getHeight()==appIconSize)
    temp=shortcutIconBitmap;
else temp=Bitmap.createScaledBitmap(shortcutIconBitmap,appIconSize,appIconSize,true);
putShortCutIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON,temp); 
```

如果您的应用程序仅在 API 11 及更高版本上运行，则可以改用[getLauncherLargeIconSize](http://developer.android.com/reference/android/app/ActivityManager.html#getLauncherLargeIconSize%28%29)，但我没有使用太多，所以我只能说对于 Galaxy s3，两种方法都返回相同的值 (96)。

# php - 保存使用 rest 和 php 检索到的 XML

> ID：14518759
> 
> 赞同：0
> 
> 时间：2013-01-25T09:21:02.287
> 
> 标签：php, xml, save

我可以使用 rest 命令检索某些信息，它显示的数据（在浏览器中）已经是 XML。检索信息后如何将其保存到服务器上的 XML 文件中。

我已经用 $dom-save 命令尝试过了，但我似乎做错了什么。任何帮助，将不胜感激。请参阅下面的代码（我想将 $response 保存到 XML。）

```
<?php

require_once 'includes/rest_connector.php';
require_once 'includes/session.php';

// check to see if we start a new session or maintain the current one
checksession();

$rest = new RESTConnector();

$url = "/api/tax_codes/0/";
$rest->createRequest($url,"GET", null, $_SESSION['cookies'][0]);
$rest->sendRequest();

$response = $rest->getResponse();
$error = $rest->getException();

// save our session cookies
if ($_SESSION['cookies']==null) 
$_SESSION['cookies'] = $rest->getCookies();

// display any error message
if ($error!=null)
echo $error;

// display the response
if ($response!=null)
echo $response;
else
echo "There was no response.";  

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:45:27.313

RESTConneconnector 是一个特定的 Lightspeed 类。我用这个解决了它：

```
ibxml_use_internal_errors(true);//load if improperly formatted
file_put_contents("exportProduct.xml", $responseProduct); 
```

所以最后很容易:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:38:08.407

我对 RESTConnector 类一无所知。但我想，您可以尝试类似的方法：

```
$dom = new DOMDocument('1.0','utf-8');
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;
$dom->loadXML($response->asXML());
$dom->save($this->fileexport); 
```

# python - wxpython wx.Notebook 没有得到任何宽度

> ID：14518761
> 
> 赞同：1
> 
> 时间：2013-01-25T09:21:03.807
> 
> 标签：python, wxpython

我正在尝试使用 wx.Notebook 创建一个项目工具，顶部带有选项卡，底部有一个常规面板。底部面板应独立于笔记本，并且在选项卡更改时不会更改。[当我只添加笔记本时，笔记本本身可以正常工作，但是当我还添加我的底部面板（扩展的 wx.Panel）时，笔记本会被挤压，](http://tinypic.com/view.php?pic=ayr69k&s=6)如图所示。

我有一个窗口面板，并将笔记本和底部面板（称为 BottomGroup，扩展 wx.Panel）添加到单独的面板中。任何人都可以发现问题吗？也许与sizer有关？我的窗口是这样的（没关系标签是错误的）：

```
class Window(wx.Frame):

def __init__(self, parent, title):

    wx.Frame.__init__(self, None, wx.ID_ANY, title)
    self.InitUI()

def InitUI(self):    

    menuBar = wx.MenuBar()
    menu = wx.Menu()
    menu_load = menu.Append(wx.ID_OPEN, 'Open', 'Open project')
    menu_save = menu.Append(wx.ID_SAVE, 'Save', 'Save project')
    menu_save_as = menu.Append(wx.ID_SAVEAS, 'Save as', 'Save project as')
    menu_exit = menu.Append(wx.ID_EXIT, 'Quit', 'Quit application')
    menuBar.Append(menu, '&File')
    self.SetMenuBar(menuBar)

    mainPanel = wx.Panel(self)

    self.noteBookPanel = wx.Panel(mainPanel)
    self.notebook = wx.Notebook(self.noteBookPanel)
    self.bottomPanel = wx.Panel(mainPanel)
    self.bottomGroup = BottomGroup(self.bottomPanel)

    mainSizer = wx.BoxSizer(wx.VERTICAL)

    self.pageNodePathsTables = PageNodesPathsTables(self.notebook)
    self.pageEscapeCriteria = PageEscapeCriteria(self.notebook)
    self.pageFileHandling = PageFileHandling(self.notebook)

    self.notebook.AddPage(self.pageNodePathsTables, "Define Paths and Nodes")
    self.notebook.AddPage(self.pageEscapeCriteria, "Define Escape Criteria")
    self.notebook.AddPage(self.pageFileHandling, "File Handling")

    mainSizer.Add(self.noteBookPanel,1,wx.TOP)
    mainSizer.Add(self.bottomGroup,1,wx.BOTTOM)

    self.Bind(wx.EVT_MENU, self.onSave, menu_save)
    self.Bind(wx.EVT_MENU, self.onLoad, menu_load)
    self.Bind(wx.EVT_MENU, self.OnQuit, menu_exit)

    self.SetDimensions(WindowOpenX,WindowOpenY,WindowWidth,WindowHeight) 
    self.Show(True) 
```

**更新：**

我已将代码重构为此（仅显示重构部分）：

```
 self.notebook = wx.Notebook(self)
    self.bottomGroup = BottomGroup(self)

    self.setupMenu()

    #frameSizer = wx.GridBagSizer(rowGap,columnGap)
    #frameSizer.Add(self.notebook,pos=(0,0), span=(1,1),
    #              flag=wx.LEFT|wx.TOP|wx.EXPAND, border = 5)
    #frameSizer.Add(self.bottomGroup,pos=(1,0), span=(1,1),
    #              flag=wx.LEFT|wx.BOTTOM|wx.EXPAND, border = 5)

    frameSizer = wx.BoxSizer(wx.VERTICAL)
    frameSizer.Add(self.notebook, 2, wx.EXPAND)
    frameSizer.Add(self.bottomGroup,0)
    self.SetSizer(frameSizer) 
```

其中`self.setupMenu()`定义为：

```
def setupMenu(self):
    self.pageNodePathsTables = PageNodesPathsTables(self.notebook)
    self.pageEscapeCriteria = PageEscapeCriteria(self.notebook)
    self.pageFileHandling = PageFileHandling(self.notebook)
    self.pagePlotHistoryData = PagePlotHistoryData(self.notebook)
    self.pageCalculateEscape = PageCalculateEscape(self.notebook)

    self.notebook.AddPage(self.pageNodePathsTables, "Define Paths and Nodes")
    self.notebook.AddPage(self.pageEscapeCriteria, "Define Escape Criteria")
    self.notebook.AddPage(self.pageFileHandling, "File Handling")
    self.notebook.AddPage(self.pagePlotHistoryData, "Plot History Data")
    self.notebook.AddPage(self.pageCalculateEscape, "Calculate Escape") 
```

这比上面的代码更清晰、更容易。它工作正常，除了`bottomGroup`现在堆叠在`notebook`（即两个元素都从 wx.Frame 的左上角开始）。我已经尝试了 the`wx.BoxSizer`和 the `wx.GridBagLayout`（如上所述）。你对这个问题有什么建议吗？

我的 BottomGroup 定义如下：

```
class BottomGroup(wx.Panel):

def __init__(self,parent):
    wx.Panel.__init__(self,parent)
    panelSizer = wx.GridBagSizer(rowGap,columnGap)

    btnSaveProject = wx.Button(parent, label="Save project", size=(100,50))
    btnLoadProject = wx.Button(parent, label="Open project", size=(100,50))

    panelSizer.Add(btnSaveProject, pos=(0,0), span=(1,1),
                             flag=wx.EXPAND|wx.LEFT, border = borderWidth)
    panelSizer.Add(btnLoadProject, pos=(0,1), span=(1,1),
                             flag=wx.EXPAND|wx.LEFT, border = borderWidth)

    self.SetSizer(panelSizer) 
```

我的主要方法是这样的：

```
if __name__ == '__main__':
    app = wx.App()
    Window(None, WindowHeader)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:16:48.670

I don't want to provide you with a full solution, but rather a little advice on UI programming.

You screwed up by creating to many panels and never setting a sizer. *Before writing UI code* always think of the structure (hierarchy) of widgets you want to create. Think of their layout. Then write down the code, grouped by principle of locality: approximately one level of the hierarchy should be handled in a few lines.

Good, let's apply the principle. Notebook and bottom panel at top level:

```
wx.Frame  
 +- wx.NoteBook
     +- PageNodesPathsTables
     +- ...
 +- BottomGroup

```

At this level, everything comes down to these four, simple lines:

```
sizer = wx.BoxSizer(wx.VERTICAL)
sizer.Add(self.notebook, 2, wx.EXPAND)
sizer.Add(self.bottomPanel, 0)
self.SetSizer(sizer) 
```

Obviously you know how to handle a `wx.NoteBook` properly. Very important is the call to `self.SetSizer` (non-existent in your code), because otherwise the frame has no idea which sizer it should use for layouting its children.
You demands about the partitioning in two halves where pretty clear. Words of wisdom: Don't do more nesting than needed. This might be more extensible (and can easily be postponed), but at the moment it's not needed. If you do something like this:

```
self.bottomPanel = wx.Panel(mainPanel)
self.bottomGroup = BottomGroup(self.bottomPanel) 
```

You have introduced at least one level (`self.bottomPanel`) with a single child (`self.bottomGroup`) that has no clue how to layout its child components. Erase the unnecessary nesting, and you will get rid of panel creation, sizer creation, sizer assignment, and so on. Collapsing it will get you a quicker overview. Todo:

*   Rewrite this section of you program. Get rid of superfluous instructions.
*   Make sure every panel has a sizer.
*   Refactor menu creation in a separate method.
*   Parameter `parent` in the Window constructor is unused. Fix.
*   Your example was missing a main method, imports, etc. Next time, supply an [`SSCCE`](http://sscce.org/).

# jquery-ui - 如何使用 jsplumb 连接到端点？

> ID：14518763
> 
> 赞同：0
> 
> 时间：2013-01-25T09:21:07.017
> 
> 标签：jquery-ui, jsplumb

我正在使用 JSplumb 进行连接，我从 JSON 中获取一些数据，并且基于我想在两个端点之间建立连接，我已经在每个节点上创建了结构并创建了端点，我试图在 jsplumb 文档中找到它但不能t..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T10:24:31.880

在添加端点时，请确保您还根据放置它​​的元素为其分配 Uuid。您可以将 jsPlumb 中的两个端点连接为：

```
jsPlumb.ready(function () {  
     var e0 = jsPlumb.addEndpoint("container0",{uuid:"ep0"}),  //set your own uuid for   endpoint for later access.
     e1 = jsPlumb.addEndpoint("container1",{uuid:"ep1"});  
     jsPlumb.connect({ uuids:[e0.getUuid(),e1.getUudi()] }); 
         // (or) 
     jsPlumb.connect({ uuids:["ep0","ep1"] });
}); 
```

# python - CentOS 6.3 上的 Python lxml etree

> ID：14518769
> 
> 赞同：3
> 
> 时间：2013-01-25T09:21:41.107
> 
> 标签：python, centos, lxml, centos6

我的服务器上有 Centos 6，我一直在尝试为它安装一些包（模块）。我只是将 Windows 上的那些带到了 ftp 客户端`/usr/lib/python2.6/site-packages`，但是当我运行其中一个脚本时 - lxml 给了我一个错误：

```
File "plugins/util/http.py", line 12, in <module>
    from lxml import etree, html
  File "/usr/lib/python2.6/site-packages/lxml/html/__init__.py", line 12, in <module>
ImportError: cannot import name etree 
```

相同的代码在 Windows 7 和 Linux Ubuntu 10.04 上运行良好。

有谁知道它为什么返回这个错误？我没有修改任何东西，只是将模块从 windows 移动到我的 vps 上的 python2.6 目录。

@根：

```
>>> import lxml;print lxml
<module 'lxml' from '/usr/lib/python2.6/site-packages/lxml/__init__.pyc'>
>>> 
```

@ig

> gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune= atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 - March=i686 -mtune=atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/libxml2 -I/tmp/pip-build/lxml/src/lxml/includes -I/usr/包括/python2.6 -c src/lxml/lxml.etree.c -o build/temp.linux-i686-2.6/src/lxml/lxml.etree.o

无法执行 gcc：没有这样的文件或目录

错误：命令“gcc”失败，退出状态为 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-21T10:01:40.827

或者从 EPEL 安装它（最简单的方法）：

```
# install EPEL if you don't have it yet
sudo rpm -Uvh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
# instal python-lxml
sudo yum -y install python-lxml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:25:33.293

`lxml`不是纯 Python 模块。它主要是用[Cython](http://cython.org/)编写的，因此可以编译为本机代码。Windows 机器上的二进制文件与 CentOS（和一般的 Linux）不兼容。

最好的办法是按照[安装说明进行`lxml`](http://lxml.de/installation.html)操作，即安装`libxslt-devel`和`libxml2-devel`包并使用自己手动`pip`编译或编译。`lxml`如果您自己编译它，那么网站上有一个包含一些有用信息和更多信息[的先前问题](https://stackoverflow.com/questions/4642942/setup-py-install-lxml-with-python2-6-on-centos#4643058)`lxml`。

* * *

**安装**

我没有 CentOS 机器来测试它。最简单的安装方法是通过 ip，它应该可以通过 Yum 以软件包的形式提供。如果没有，您可以使用以下命令安装它（来自[分发](http://packages.python.org/distribute/)的文档，pip 的先决条件）：

```
curl -O http://python-distribute.org/distribute_setup.py
python distribute_setup.py
easy_install pip 
```

从那里，只需运行：

```
pip install lxml 
```

它应该安装得很好。

如果您想跳过 pip（尽管最终，pip 使管理依赖项变得容易得多，因此值得一试）

1.  [在PyPI](http://pypi.python.org/pypi/lxml/)上找到合适版本的 lxml
2.  从下载地址下载源码（应该是`tar.gz`文件）
3.  使用解压 tar 存档`tar -xzf lxml-<version>.tar.gz`
4.  `cd`进入提取的目录并运行`python setup.py install`

请注意，如果您的安装只能由 root 修改，则可能需要以 root 身份运行上述任何命令。安装命令是`python distribute_setup.py`和。`easy_install pip``python setup.py install`

# android - 更改首选网络的意图

> ID：14518773
> 
> 赞同：0
> 
> 时间：2013-01-25T09:21:55.600
> 
> 标签：android, android-intent

在android上更改首选网络时是否会产生任何意图？

虽然当移动数据和WIFI都打开时WIFI具有更高的优先级。但是可以使用此语句更改它

```
connectivityManager.setNetworkPreference(ConnectivityManager.TYPE_MOBILE); 
```

但是，如果我在使用上述语句后立即查询首选网络

```
connectivityManager.getNetworkPreference() 
```

我仍然得到`ConnectivityManager.TYPE_WIFI`作为返回值。

因此，似乎`setNetworkPreference`不会立即更改首选网络。

我的问题，

**是否有任何改变网络偏好的意图？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:31:29.363

创建一个广播接收器监听：

```
<action android:name="android.net.conn.CONNECTIVITY_CHANGE"/> 
```

有关示例，请参阅 [Android，如何在轮询数据时处理网络变化（从 GPRS 到 Wi-fi，反之亦然） 。](https://stackoverflow.com/questions/5165099/android-how-to-handle-change-in-network-from-gprs-to-wi-fi-and-vice-versa-whi)

# c# - C#读取USB描述符

> ID：14518778
> 
> 赞同：2
> 
> 时间：2013-01-25T09:22:23.233
> 
> 标签：c#, usb, libusb, usb-descriptor

如何通过 C# 读取 USB 描述符？我找到了`LibUSB.NET`，但我无法获得示例中的 USB 设备：

```
UsbRegDeviceList allDevices = UsbDevice.AllDevices; 
```

它返回计数 = 0

# css - 如何在我的主题中添加自定义字体？

> ID：14518783
> 
> 赞同：1
> 
> 时间：2013-01-25T09:22:41.647
> 
> 标签：css, wordpress, wordpress-theming

现在，我想使用 Monotype Corsiva。我在我的主题中添加字体，然后在 css 文件中使用`font-family:Monotype Corsiva`，但有人提示我：如果用户系统上未安装用于站点标题和标题的字体，则该字体不起作用。您应该从主题目录中删除字体文件或以适当的方式将其包含在 css 文件中。

如何以适当的方式将其包含在 css 文件中？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:36:49.453

您需要在 .ttf 或 .eot 中将@font-face 与您的字体一起使用

下面是一个例子

```
@font-face {
font-family: 'RieslingRegular';
src: url('fonts/riesling.eot');
src: local('Riesling Regular'), local('Riesling'), url('fonts/riesling.ttf') format('truetype');
}

h1 {
  font-family: 'RieslingRegular', Arial, sans-serif;
} 
```

有关更多详细信息，请查看此处[http://bavotasan.com/2010/embedding-fonts-web-site-css-font-face/](http://bavotasan.com/2010/embedding-fonts-web-site-css-font-face/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:09:13.387

Monotype Corsiva 是一种受版权保护的字体。查看[http://www.fonts.com](http://www.fonts.com)了解使用条件和说明。他们有一项政策，允许免费的有限页面浏览量（25,000 次）。说明和过程可能有点令人困惑，但最终你会得到一个`script`由它们生成的元素来添加到你的页面中，然后你只需使用它们给你的名称下的字体（似乎是`Corsiva W01`）。

[或者，例如，尝试从Google Web Fonts](http://www.google.com/webfonts)中找到合适的类似免费字体。

# java - 使用 JavaMail MessageIDTerm 获取消息的所有标签名称

> ID：14518785
> 
> 赞同：1
> 
> 时间：2013-01-25T09:22:46.517
> 
> 标签：java, gmail, jakarta-mail, gmail-imap

我正在使用 JavaMail API 通过 IMAP 从 Gmail 读取邮件。现在我想使用[MessageIDTerm](http://javamail.kenai.com/nonav/javadocs/javax/mail/search/MessageIDTerm.html)。我有消息 ID，但如何搜索文件夹并将标签名称作为字符串？目前我在`Lcom.sun.mail.imap.IMAPMessage;@2651177`使用`MessageIDTerm`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:00:05.403

如果您想获取与邮件关联的所有 Gmail 标签，则需要使用 Gmail 扩展 IMAP 协议。标准的 JavaMail API 不支持此功能，但我创建了一个实验性的 Gmail 提供程序来添加此支持。这将在 JavaMail 1.4.6 中。[您可以在此处](http://kenai.com/projects/javamail/forums/forum/topics/532669-JavaMail-1-4-6-Release-Candidate-is-available)找到 1.4.6 候选版本。[此处](http://kenai.com/projects/javamail/lists/users/archive/2012-08/message/0)介绍了如何使用新的 Gmail 提供程序。

# wix - WIX edit binary file in custom action

> ID：14518786
> 
> 赞同：3
> 
> 时间：2013-01-25T09:22:47.313
> 
> 标签：wix, wix3.5, wix3.6, wix-extension, wixlib

I'm trying to do the following:

1.  during install open and edit sql file via custom action
2.  save edited changes and execute it during install.

In my product.wxs I have the following:

```
<Binary Id="SqlScriptSQLAuthentication"  SourceFile="$(sys.SOURCEFILEDIR)\MyDb.sql" />

        <Component Id='SqlComponent.SQLAuthentication' Guid='665D641C-3570-4b96-9CA5-2B4C12594A35' KeyPath='yes'>
            <Condition><![CDATA[USEINTEGRATEDSECURITY<>1]]></Condition>
            <sql:SqlDatabase Id='SqlDatabase.SQLAuthentication' Database='[DATABASE_NAME]' User='SQLUser' Server='[DATABASE_SERVER]' CreateOnInstall='yes' DropOnUninstall='yes' ContinueOnError='no' />
            <sql:SqlScript Id='SqlScriptSQLAuthentication' BinaryKey='SqlScriptSQLAuthentication' SqlDb='SqlDatabase.SQLAuthentication' ExecuteOnInstall='yes' />
        </Component> 
```

During setup I want to edit "MyDb.sql", write changes to it and save it back, so wix can run it during install.

what's the best approach? thanks

EDIT:

MyDb.sql file:

```
CREATE TABLE Test12345 (Value1 CHAR(50), Value2 INTEGER) 
```

In my custom action I have the following:

```
 View v = session.Database.OpenView("SELECT `Data` FROM `Binary` WHERE `Name` = '{0}'", binaryKeyName);

        v.Execute();

        var IsReadOnly = session.Database.IsReadOnly;

        Record r = v.Fetch();

        StreamReader reader = new StreamReader(r.GetStream("Data"));
        string text = reader.ReadToEnd();
        text = text.Replace(@"Test12345", "TTTest");

        byte[] byteArray = Encoding.ASCII.GetBytes(text);
        MemoryStream stream = new MemoryStream(byteArray);

        r.SetStream("Data", stream); 
```

// Up to this point it works and I read my sql text from .sql file

```
 session.Database.ExecuteStringQuery("UPDATE `Binary` SET `Data` = '{0}' WHERE `Name` = '{1}')", text, binaryKeyName);

    v.Close();
    session.Database.Commit(); 
```

it's when I try to update (not sure if i'm going it right) it fails.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:35:17.237

You can use this custom action to extract the binary data. You would then have to make your changes and resave it. Not sure how you would resave it back to binary as I have not done that before - I have used it to stream temporary data into the license agreement. This should give you a good start.

```
HRESULT ExtractBinary(__in LPCWSTR wzBinaryId,
                      __out BYTE** pbData,
                      __out DWORD* pcbData)
{
    HRESULT hr = S_OK;
    LPWSTR pwzSql = NULL;
    PMSIHANDLE hView;
    PMSIHANDLE hRec;

    // make sure we're not horked from the get-go
    hr = WcaTableExists(L"Binary");
    if (S_OK != hr)
    {
        if (SUCCEEDED(hr))
        {
            hr = E_UNEXPECTED;
        }
        ExitOnFailure(hr, "There is no Binary table.");
    }

    ExitOnNull(wzBinaryId, hr, E_INVALIDARG, "Binary ID cannot be null");
    ExitOnNull(*wzBinaryId, hr, E_INVALIDARG, "Binary ID cannot be empty string");

    hr = StrAllocFormatted(&pwzSql, L"SELECT `Data` FROM `Binary` WHERE `Name`=\'%s\'", wzBinaryId);
    ExitOnFailure(hr, "Failed to allocate Binary table query.");

    hr = WcaOpenExecuteView(pwzSql, &hView);
    ExitOnFailure(hr, "Failed to open view on Binary table");

    hr = WcaFetchSingleRecord(hView, &hRec);
    ExitOnFailure(hr, "Failed to retrieve request from Binary table");

    hr = WcaGetRecordStream(hRec, 1, pbData, pcbData);
    ExitOnFailure(hr, "Failed to read Binary.Data.");

    LExit:
    ReleaseStr(pwzSql);

    return hr;
} 
```

# hibernate - Java Struts - Hibernate - 创建 SessionFactory 时出错

> ID：14518789
> 
> 赞同：0
> 
> 时间：2013-01-25T09:22:57.100
> 
> 标签：hibernate

我的所有 Microsoft sql 数据库连接都运行良好，hql 编辑器通过返回结果证明了这一点，但是当我运行应用程序时，我得到了这个错误，它指向一个空指针异常：

```
SEVERE: Initial SessionFactory creation failed.java.lang.NullPointerException
WARNING: StandardWrapperValve[action]: PWC1406: Servlet.service() for servlet action threw 
exception
java.lang.ExceptionInInitializerError
at hibernate.HibernateUtil.<clinit>(HibernateUtil.java:34)
at hibernate.TimeSheetHelper.<init>(TimeSheetHelper.java:25)
at com.myapp.struts.LoginAction.populateTimeSheet(LoginAction.java:120)
at com.myapp.struts.LoginAction.execute(LoginAction.java:67)
at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)
at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call
(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
at org.hibernate.cfg.Configuration.configure(Configuration.java:1441)
at hibernate.HibernateUtil.<clinit>(HibernateUtil.java:29)
... 33 more 
```

这是我的 HibernateUtil 文件：

```
private static final SessionFactory sessionFactory;

static {
try {
// Create the SessionFactory from standard (hibernate.cfg.xml) 
// config file.
URL myUrl = Thread.currentThread().getContextClassLoader().getResource  
("C:\\java\\hibernate\\hibernate.cfg.xml");
Configuration c = new Configuration();
c.configure(myUrl);
sessionFactory = c.buildSessionFactory();
} catch (Throwable ex) {
// Log the exception. 
System.err.println("Initial SessionFactory creation failed." + ex);
throw new ExceptionInInitializerError(ex);
}
}

public static SessionFactory getSessionFactory() {
return sessionFactory;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:28:54.127

`ClassLoader.getResource()`不将文件路径作为参数。它采用从类路径加载的资源的路径。因此，您的文件必须位于应用程序类路径中的其中一个 jar（或目录）中，如果它在 package`foo.bar`中，则路径应该是`foo/bar/hibernate.cfg.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:01:13.430

我创建了 Session 对象并将其分配为 null。

删除 Null 使其工作。

# php - cakephp 中的 Auth 组件只支持 UsersController？

> ID：14518791
> 
> 赞同：1
> 
> 时间：2013-01-25T09:23:09.383
> 
> 标签：php, mysql, cakephp

我之前可能已经问过与此相关的问题，但对答案不满意，没有答案有效.....我的疑问有点不同，我有两个控制器 1.UsersController。2.成员控制器。

我怀疑 Auth 组件为 UsersControllers 创造了奇迹，但 Auth 不适用于 MembersController。简单来说，每当我尝试为我的 MembersController 使用 Auth 组件，而不是重定向到 Members 视图时。它正在显示用户控制器页面......当我删除用户控制器时，我得到以下错误......

错误：找不到用户控制器。

Auth 和 Users 之间是否有任何联系。如何为我的 MembersController 设置 Auth 组件......

这就是我使用它的方式......

```
public $components = array(
    'Session',
    'Auth' => array(
        'loginRedirect' => array('controller' => 'members', 'action' => 'home'),
        'logoutRedirect' => array('controller' => 'members', 'action' => 'index')
    )
);

public function beforeFilter() {
    $this->Auth->allow('index', 'view');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:27:47.870

在您的应用控制器中

```
class AppController extends Controller {
    public $components = array(
        'Auth' => array(
            'authorize' => 'actions',
            'actionPath' => 'controllers/',
            'loginAction' => array(
                'controller' => 'members',
                'action' => 'login',
                'plugin' => false,
               'admin' => false,
                ),
             ),
         );
} 
```

# javascript - 如何使用 javascript 在 buttonclick 上将浏览器窗口从背景返回到前面？

> ID：14518794
> 
> 赞同：0
> 
> 时间：2013-01-25T09:23:23.340
> 
> 标签：javascript, browser, focus

如果用户单击按钮，则会打开一个新窗口，用户可以在其中执行不相关的操作。如果用户单击前一页，新窗口将被推入后台，用户将无法再看到它。到目前为止，这是正常的行为。

我现在需要的是，已经打开的窗口在用户第二次单击按钮时返回到前面。这可能吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:27:28.803

您需要将窗口对象保存在变量中，例如`w`. 然后你可以用[`focus()`](https://developer.mozilla.org/en/DOM/window.focus)它再次把它带到前面：

```
w.focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:34:50.963

检查窗口是否存在。如果没有，请创建它。如果确实如此，请给它重点。像下面这样的东西应该可以解决问题。

```
<html>
<head>
<script language="JavaScript">

var popup;
function getWindow() {
    if(popup==null) {
    popup=window.open("http://www.stackoverflow.com");
    }
else {
    popup.focus();
    }
}
</script>
</head>
<body>
<input type="button" value="Click me..." onClick="getWindow()" />
</body>
</html> 
```

# javascript - 使用从 Web 服务（vb.net）获取值的 jq plot 创建饼图

> ID：14518806
> 
> 赞同：1
> 
> 时间：2013-01-25T09:24:23.323
> 
> 标签：javascript, jquery, html, vb.net, jqplot

我正在尝试创建一个示例饼图，该饼图从 Web 服务（vb.net）中获取值，但我被卡住了，因为该图表没有正确创建。

这是我的代码。函数图表（）{

```
 alert("clicked");

     $.ajax({
         type: "POST",
         url: "Service1.asmx/GetChart",
         contentType: "application/json; charset=utf-8",

         data: "{'sDB':'" + "sDB" + "'}",
         dataType: "json",

         success: OnGetMemberSuccess2,
         failure: function (errMsg) {
             $('#errorMessage').text(errMsg);
         }

     });

     function OnGetMemberSuccess2(data, status) {

       //RenderPieChart('container', [['Firefox', 45.0]]);
         RenderPieChart('container', [[data.d]]);
         alert(data.d);

 }

 function RenderPieChart(elementId, dataList) {

         new Highcharts.Chart({
             chart: {
                renderTo: dataList,
                 plotBackgroundColor: null,
                 plotBorderWidth: null,
                 plotShadow: false
             }, title: {
                 text: 'Browser market shares at a specific website, 2010'
             },
             tooltip: {
                 formatter: function () {
                    return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                     alert(tooltip);
                 }
             },
                             plotOptions: {
                                  pie: {
                                      allowPointSelect: true,
                                      cursor: 'pointer',
                                      dataLabels: {
                                          enabled: true,
                                          color: '#000000',
                                          connectorColor: '#000000',
                                          formatter: function () {
                                              return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                                          }
                                      }
                                 }
                              },
             series: [{
                 type: 'pie',
                 name: 'Browser share',
                 data: dataList
             }]
         });
     };
 } 
```

网络服务代码：

```
 Public Function GetChart(ByVal sDB As String)
    Dim oSB As New StringBuilder

    '  oSB.Insert(42, "Firefox")
    oSB.Append("Firefox")
    oSB.Append(",")
    oSB.Append("45.0")
    'oSB.Append("'Safari', 6.5")
    'oSB.Append("'Opera', 8.2")

    'oSB.Append("'Others', 0.7")

    Return oSB.ToString
End Function 
```

如果我给出，我会创建图表

```
 RenderPieChart('container', [['Firefox', 45.0]]); 
```

代替

```
 RenderPieChart('container', [[data.d]]); 
```

谁能帮我解决这个问题。

干杯。

# php - 如何在不使用标签的情况下获取相关内容？

> ID：14518808
> 
> 赞同：5
> 
> 时间：2013-01-25T09:24:30.047
> 
> 标签：php

我需要一种在不使用标签的情况下获取相关内容的方法，因为在我的情况下标签太多，并且这些标签是由用户插入的（所以在大多数情况下他们忘记了使用它们）。

Youtube 做同样的事情：例如，如果您正在观看一个有趣的视频，那么 youtube 会在相关内容中向您显示其他有趣的视频。

例如，如果文章的标题是“美国总统巴拉克奥巴马，去迈阿密”，我需要获取标题中包含“巴拉克奥巴马”、“美国”、“总统”或“迈阿密”的其他文章，并且，如果可能的话，相同主题的其他文章。

这可能非常复杂，所以我向您征求了一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:14:42.950

可能的解决方案是使用 Zend Lucene。
[http://framework.zend.com/manual/1.12/en/zend.search.lucene.html](http://framework.zend.com/manual/1.12/en/zend.search.lucene.html)

这是一个易于实现的完全在 php 中运行的搜索引擎。您可以将它用作与 Zend Framework 分开的组件，而且它很容易实现。

索引您的所有内容。使用（出于某种原因未记录的）提升功能使部分内容更相关（IE.标题，用户标签）
此处示例：http: [//davedash.com/2007/05/29/boosting-terms-in- zend-搜索-lucene/](http://davedash.com/2007/05/29/boosting-terms-in-zend-search-lucene/)

然后，将标题用作关键字查询，并向您的用户显示得分最高的 x 个结果。（确保过滤用户当前正在查看的内容）

为了优化，您可以兑现每页的搜索结果。

您可以调整结果：
- 哪些内容最能描述内容 - 在索引时提升这些项目
- 搜索您将使用的内容时（标题、用户标签、组合）

# html - 如何在 Confluence 中上传/查看 HTML5 动画

> ID：14518814
> 
> 赞同：0
> 
> 时间：2013-01-25T09:24:45.337
> 
> 标签：html, flash, confluence

目前，我们在 Confluence 上发布 .swf 动画（交互式）。我们只是将它们作为附件上传到页面并使用 {multimedia:name=animation.swf } 来显示它们。但我们想让它可供苹果用户使用，并转而使用 HTML5 而不是 .swf 制作这些交互式动画。

但是在 HTML5 中生成相同的动画而不是 .swf 会使用几个包含 css、javascript、图像和 html 文件的目录来代替 1 个 swf 文件。

如何将这些上传到融合并在融合的页面上显示动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:40:06.587

您正在使用哪个版本的 Confluence 可能很重要。

要使用所需的 javascript 和 css，您可以转到编辑 -> 管理 -> 编辑布局并在相应的选项卡中编辑空间范围的 css 和 js。

至于 html，你可以使用 {html} 标签在你的 confluence 页面中包含 html 代码，如下所示：

```
{html}<p>Insert your html here</p>{html} 
```

你知道你有哪个版本的 Confluence 吗？

您可能还想查看 gliffy 附加组件以进行融合。我相信它有能力完成你想要的。

[http://www.gliffy.com/products/confluence-plugin/](http://www.gliffy.com/products/confluence-plugin/)

# php - ereg_replace - 带正斜杠的字符串

> ID：14518818
> 
> 赞同：0
> 
> 时间：2013-01-25T09:25:15.513
> 
> 标签：php

我有这样的代码：

```
<?php
    $first = '<?xml version=\"1.0\" encoding=\"UTF-8\"?> TEST MESSAGE';
    echo ereg_replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "UPSS", $first);
?> 
```

它不起作用。我想收到：“UPSS 测试信息”

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:28:24.693

好的，这里有几件事：

# 第一个问题

您`$first`使用`'`而不是`"`'s 进行声明，但您正在转义双引号，这意味着您最终会得到一串`<?xml version=\"1.0\" encoding=\"UTF-8\"?> TEST MESSAGE`（带有反斜杠）。

```
$first = '<?xml version=\"1.0\" encoding=\"UTF-8\"?> TEST MESSAGE';
//       ^              ^    ^           ^      ^                ^
// You don't need to escape " when using ' to create the string. 
```

相反，要么做

```
$first = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> TEST MESSAGE";
//       ^              ^    ^           ^      ^                ^
// We escape because we've used " to create the string 
```

或者

```
$first = '<?xml version="1.0" encoding="UTF-8"?> TEST MESSAGE';
//       ^              ^   ^          ^     ^               ^
// We do not escape, because we used ' to create the string, and therefore only need to escape '. 
```

是正确的

# 第二个问题

**你正在使用`ereg_replace`. 为什么？首先，它用于正则表达式，你似乎没有使用任何一个，其次它已被弃用很长时间，第三你没有喂它正则表达式。**您还使用`"`'s 指定了替换，这意味着您正在替换没有反斜杠的字符串，因此它找不到匹配项（请记住，这`\"`与 不同`"`）。如果您现在想使用正则表达式，请查看[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)，但是您想[`str_replace`](http://php.net/manual/en/function.str-replace.php)改用，请查看您的问题：

```
echo str_replace('<?xml version="1.0" encoding="UTF-8"?>', 'UPSS', $first); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:28:44.273

尝试使用 str_replace()。如果你有解析内容的目的，你应该使用 XPath 库。

# session - Windows azure 服务器上的会话过期

> ID：14518819
> 
> 赞同：0
> 
> 时间：2013-01-25T09:25:16.840
> 
> 标签：session, azure, asp.net-mvc-4, session-state, session-timeout

我在 Session 中存储了一些数据。当我尝试在不同的视图文件 (*.cshtml) 上访问这些数据时，它在 localhost 上运行良好。但是当我在“windowsazure.com”上部署它时，结果是：

你调用的对象是空的。第 14 行：字符串 imageurl = Session["imageurl"].ToString();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:55:54.183

法赫德

此 anwser 是基于您拥有多个正在运行的 Web 角色实例的假设。

Windows Azure 使用基于循环规则的负载平衡。它也不支持粘性会话。结果是对您网站的第一个和第二个请求通常在 2 个不同的服务器上处理。这解释了空状态。您可以将部署配置为使用共享内存并使用 Azure 兑现模式来解决此问题。

此模式在 de windows Azure Training Kit 中进行了说明。

米歇尔

# jenkins - Jenkins：防止执行不必要的依赖作业

> ID：14518821
> 
> 赞同：1
> 
> 时间：2013-01-25T09:25:59.873
> 
> 标签：jenkins, dependencies

想象一下，我在 Jenkins 中有两个工作 A 和 B，它们将监视和构建项目 A 和项目 B。由于项目 B 依赖于项目 A，所以当项目 A 构建成功时，我为项目 B 添加一个触发器。在大多数情况下它工作正常，但是当我将代码签入项目 A 和项目 B 时，项目 B 由于依赖于项目 A 新添加的代码而构建失败，然后在项目 A 完成后构建成功。它确实很烦人。在这种情况下，有没有办法在项目 A 建成之前阻止项目 B 的建设？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:55:08.843

转到项目 B 配置。单击*Advanced...*在*Advanced Project Options*。上游项目正在构建时选择*块构建*。这将防止在 A 正在构建时构建 B。

# html - 2 列布局，带有粘性页眉和页脚

> ID：14518824
> 
> 赞同：1
> 
> 时间：2013-01-25T09:26:07.847
> 
> 标签：html, css

我想在 不使用框架的情况下创建这个[http://www.quackit.com/html/templates/frames/frames_example_5.html 。](http://www.quackit.com/html/templates/frames/frames_example_5.html)我希望能够在左侧菜单 div 上设置右边框，但在我找到的示例中，左侧菜单 div 没有从页眉延伸到页脚。其他示例使用重复的 .jpg 为左侧菜单 div 绘制右边框。这应该是一件容易的事，不是吗？请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:28:27.507

你应该试试`CSS layout generator`。[**http://csslayoutgenerator.com/**](http://csslayoutgenerator.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:45:29.950

你为什么使用框架？您还可以使用 css Float: right/left 和 div。

你也可以用 css 制作一个粘性页脚，它类似于：

```
CSS

.sticky_footer 
{
    width:                              760px;
    border-top:                         1px solid #BEC2C8;
    position:                           fixed;
    bottom:                             0px;
    right:                              0px;
    left:                               0px;
    padding:                            20px 0px 10px;
    background-color:                   whitesmoke;
    background-image:                   url('/img/bg_footer.png');
    background-repeat:                  repeat-x;
    background-position:                top;
} 
```

页（页脚）

```
<div id="footer">
    <div class="sticky_footer">
        <p class="text-info" style="color: #0088cc !important; text-align: center;">
            <small> copyright ...</small>
        </p>
    </div>
</div> 
```

# javascript - \n 换行符不起作用

> ID：14518829
> 
> 赞同：2
> 
> 时间：2013-01-25T09:26:26.637
> 
> 标签：javascript

我尝试通过写作来制作网页

```
document.write("This is the first line \n And this is the second"); 
```

想要的效果是：

```
This is the first line
And this is the second 
```

但我明白了：

```
This is the first line And this is the second 
```

我试着`<br>`在里面写，它奏效了。但是为什么写逃逸`\n`没有呢？有什么我做错了吗？我正在使用火狐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:27:55.357

你没有做错任何事。它只是`\n`字符在文本相关元素中有效，例如 alert() 和`<textarea>`.

该`document.write()`命令写入站点的正文或显示（在 HTML 中）。代替此处`<br>`，`\n`因为您正在页面中编写 HTML

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T09:27:07.713

而不是`\n`你必须使用`<br/>`，以便浏览器理解它

```
document.write("This is the first line <br/> And this is the second"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:29:19.600

您可以将`<pre>`标签用于`\n`, 和`<br/>`普通 HTML。

[http://jsfiddle.net/FxpcA/](http://jsfiddle.net/FxpcA/)

```
document.write("<pre>This is the first line \n And this is the second</pre>"); 
```

# jquery - 如何将 img 属性添加到其周围的 div 元素

> ID：14518831
> 
> 赞同：0
> 
> 时间：2013-01-25T09:26:34.913
> 
> 标签：jquery, attributes

我网站上的所有图像都包含在 div 中，因此我可以在它们之上添加图像悬停效果的蒙版。现在我需要将图像的宽度添加到其周围的 div 中。

那是我的 HTML：

```
<div class="imagecontainer">
  <a href="/abc.php">
    <div class="imagebackicon"></div> <!-- ignore, its only for the image mask -->
    <div class="imagebackground"></div> <!-- ignore, its only for the image mask -->
    <img src="image.jpg" width="300" height="200" />
  </a>
</div> 
```

我想将“300”的图像宽度添加到其周围的 div 中。我通过这样做来做到这一点：

```
$('.imagecontainer').width($(".imagecontainer").find('img').attr("width")); 
```

问题是，这段代码将第一个图像的宽度添加到我周围的所有图像 div 中。只要所有图像都具有相同的大小，这很好，但它们没有。

如果有人知道我如何将图像宽度仅添加到其周围的 div，而不是所有图像 div，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:29:30.320

要对所有图像/容器执行此操作，您需要迭代：

```
$('img').each(function(i, elem) {
    $(elem).closest('.imagecontainer').width($(elem).attr('width'));
}); 
```

或相反：

```
$('.imagecontainer').each(function(i, elem) {
    $(this).width( $(this).find('img').attr('width') );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:46:32.827

`div`另一种方法是首先使用相应值的数组将宽度应用于容器，然后设置`img`为`width:100%;`

JS：

```
var img = [100,300,200,600]; 
$(".imagecontainer").each(function(i){
$(this).width(img[i]);
}); 
```

（如果 div 是在服务器端通过循环动态生成的，您可以考虑使用内联样式来设置从服务器接收到的 HTML 的容器宽度）

CSS：

```
img {
    width:100%;
} 
```

# visual-c++ - 从 C++ 中的文本文件中提取随机数

> ID：14518832
> 
> 赞同：0
> 
> 时间：2013-01-25T09:26:46.003
> 
> 标签：visual-c++

如果文本文件包含 100 行 * 100 列中的数字（例如）。现在我希望我的程序从第 60 行和第 97 列中提取一个数字，然后将此值分配给一个变量并使用此变量执行一些计算。所以我想从一个包含很多数字的文本文件中提取一些随机数。我怎样才能做到这一点？？我做了一个练习代码，但它给出了一些错误。文本文件在 2 行和 3 列中包含 6 个不同的数字

```
#include <iostream>
#include <fstream>
using namespace std;
int main ()
{
 int data[6],i=0;
 ifstream myfile;
 myfile.open ("a.txt");
 while (i<<6)
       {
        myfile>>data[i];
        i=i+1;
       }
 myfile.close();
 cout<<data[0]<<"\t"<<data[1]<<"\t"<<data[2]<<"\t"<<data[3]<<"\t"<<data[4]<<"\t"   <<data[5]<<"\n";
 system("pause");
 return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:10.793

```
while (i < 6)
{
   myfile>>data[i];
   i=i+1;
} 
```

# wordpress - 在 wordpress 插件中查询 jquery 脚本

> ID：14518838
> 
> 赞同：0
> 
> 时间：2013-01-25T09:26:59.477
> 
> 标签：wordpress

我无法让任何 enqueue_script 工作，这是我的代码（在我的插件文件中）

```
function load_custom_wp_admin_style() {
    wp_enqueue_script( 'jquery-ui-datepicker', '', array('jquery'));
}
add_action( 'admin_enqueue_scripts', 'load_custom_wp_admin_style' ); 
```

我哪里错了？我似乎也无法加载自己的脚本

```
wp_enqueue_script('jquery');
wp_enqueue_script('jquery-ui-core');
wp_enqueue_script('jquery-ui-datepicker'); 
```

我现在正在加载 jquery-ui 脚本，但没有加载 datepicker 脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:04.480

jquery-ui-datepicker 与 WordPress（最新版本）捆绑在一起，因此您无需告诉它脚本句柄之外的任何内容。

```
wp_enqueue_script('jquery-ui-datepicker'); 
```

但是：“不能让它工作”到底是什么意思？您是否查看了页面源代码并没有找到正在加载的脚本？或者它加载了，但没有 CSS 样式？我怀疑您的问题是后者，因为您没有为 datepicker 排队任何 CSS（至少在上面）。

现在，问题是 WordPress 实际上并没有为日期选择器捆绑任何支持 CSS，因为 WordPress 本身不使用它。因此，您需要：

*   为您的管理样式表添加一些支持 CSS
*   将兼容的标准 jquery-ui 主题排入队列，例如来自 CDN

对于后者，我不久前[在博客上写过；](http://snippets.webaware.com.au/snippets/load-a-nice-jquery-ui-theme-in-wordpress/)这是一些应该为您处理的代码；将其添加到上面的函数中。

```
global $wp_scripts;

// get registered script object for jquery-ui
$ui = $wp_scripts->query('jquery-ui-core');

// tell WordPress to load the Smoothness theme from Google CDN
$url = "https://ajax.googleapis.com/ajax/libs/jqueryui/{$ui>ver}/themes/smoothness/jquery.ui.all.css";
wp_enqueue_style('jquery-ui-smoothness', $url, false, null); 
```

这会加载整个辣酱玉米饼馅，但您可能希望将其缩减为日期选择器所需的 CSS。

编辑：要在不将 datepicker 脚本与其他 jquery-ui 脚本捆绑在一起的旧版 WordPress 上获取 datepicker 脚本，最简单的解决方案是安装[Use Google Libraries](http://wordpress.org/extend/plugins/use-google-libraries/)。此插件将用 Google 的 CDN 托管版本替换本地 jquery 脚本，并且所有 jquery-ui 脚本将作为单个（缓存良好！）脚本下载。

# c++ - 模板类的模板成员函数

> ID：14518841
> 
> 赞同：4
> 
> 时间：2013-01-25T09:27:01.870
> 
> 标签：c++, templates, gcc

我有一个模板化的 C++ 类，它也有一个模板化的成员函数。这个成员函数的模板参数以特定的方式依赖于类的模板参数（请看下面的代码）。我正在为它的模板参数的两个不同值实例化（不是专门化）这个类。一切都编译到这一点。但是，如果我调用模板化成员函数，则仅对第一个实例化对象的调用会编译，而不是第二个。似乎编译器没有为模板类的第二次实例化实例化模板化成员函数。我正在使用“g++ filename.cpp”编译下面的代码，并收到以下错误：

filename.cpp:63: 错误: 没有匹配函数调用'Manager<(Base)1u>::init(Combination<(Base)1u, (Dependent2)0u>*)'</p>

这是线路调用`b.init(&combination_2)`

g++ --version => g++ (Ubuntu/Linaro 4.4.7-1ubuntu2) 4.4.7

uname -a => Linux 3.2.0-25-generic-pae #40-Ubuntu SMP i686 i686 i386 GNU/Linux

```
enum Base {
  AA,
  BB,
  CC
};

enum Dependent1 {
  PP,
  QQ,
  RR
};

enum Dependent2 {
  XX,
  YY,
  ZZ
};

template<Base B>
struct DependentProperty {
};

template<>
struct DependentProperty<AA> {
  typedef Dependent1 Dependent;
};

template<>
struct DependentProperty<BB> {
  typedef Dependent2 Dependent;
};

template <Base B, typename DependentProperty<B>::Dependent D>
class Combination {
 public:
  void reset() {}
  int o;
};

template <Base B>
class Manager {
 public:
  template <typename DependentProperty<B>::Dependent D,
            template<Base,
                    typename DependentProperty<B>::Dependent> class T>
  void init(T<B, D>* t);
};

template <Base B>
template <typename DependentProperty<B>::Dependent D,
          template<Base,
                  typename DependentProperty<B>::Dependent> class T>
void Manager<B>::init(T<B, D>* t) {
  t->reset();
}

int main(int argc, char** argv) {
  Manager<AA> a;
  Manager<BB> b;
  Combination<AA, PP> combination_1;
  Combination<BB, XX> combination_2;
  a.init(&combination_1);
  b.init(&combination_2);
  return 0;
} 
```

在我们的实际项目中，从我的示例代码中修改 Base、Dependent 或 Combination 对应的类是不可行的。我真正想知道的是我定义 Manager::init() 的语法是否错误，或者是否存在不允许此代码的 C++ 或 g++ 的某些已知属性/功能/约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:18:58.217

下面的代码为我编译，我稍微简化了你的代码，尽管它仍然做同样的事情。

```
template <Base B>
class Manager {
 public:
typedef typename DependentProperty<B>::Dependent D;  // if ever you need it
    template <typename TCombinaison>
    void init(TCombinaison* t)
    {
        t->reset();
    }

};

int main(int argc, char** argv) 
{
    typedef Combination<AA, PP> CombinaisonA;
    typedef Combination<BB, XX> CombinaisonB;

    typedef DependentProperty<AA> DependencyPropertyA;
    typedef DependentProperty<BB> DependencyPropertyB;

  CombinaisonA combination_1;
  CombinaisonB combination_2;

  Manager<AA> a;
  Manager<BB> b;

  a.init(&combination_1);
  b.init<&combination_2);

  return 0;
} 
```

**编辑**：第二个解决方案，以禁止在经理中混合使用组合，正如 OP 在下面的评论中注意到的那样。现在我正在使用 std::is_same 来检查“概念”合同。

```
template <Base B, typename DependentProperty<B>::Dependent D>
class Combination {
 public:
    typedef typename DependentProperty<B>::Dependent DependencyType;
  void reset() {}
  int o;
};

template <Base B>
class Manager {
 public:
    typedef typename DependentProperty<B>::Dependent DependencyType; 
    template <typename TCombinaison>
    void init(TCombinaison* t)
    {
        static_assert(std::is_same<TCombinaison::DependencyType, Manager::DependencyType>);
        t->reset();
    }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:09:31.597

如果您结合继承并远离常量模板参数，扩展 Combination 以提供有关其模板参数的信息，您可以获得要编译的代码，考虑到您不希望它编译：

```
b.init(&combination_1); 
```

您正在努力为您的 Manager 中的 init 成员模板**间接**指定和修复 Combination 的类型，即使 init 模板会推断出它，因为它是函数的唯一参数，并且无论如何在 main 中定义了类型 si .

你会考虑直接用组合模板化初始化吗？

这样，除了 init() 声明之外的所有内容都保持不变，并且您的代码按照您最初想要的方式编译：

```
class Base
{
};

class AA
:
    public Base
{
};

class BB
: 
    public Base
{
};

class Dependent1
{
};

class PP
:
    public Dependent1
{};

class Dependent2
{};

class XX
:
    public Dependent2
{};

template<class Base>
struct DependentProperty {
};

template<>
struct DependentProperty<AA> {
  typedef Dependent1 Dependent;
};

template<>
struct DependentProperty<BB> {
  typedef Dependent2 Dependent;
};

template <class Base> 
class Combination {
 public:

     typedef Base CombinationBase;
     typedef typename DependentProperty<Base>::Dependent CombinationDependent;

     void reset() 
     {

     }

     int o;
};

template <class Base>
class Manager
{
    public:

        // Any type C
        template<class C>
        void init (C* t)
        {
            // Any type C conforming to the implicit interface holding reset()
            t->reset(); 
            // Forcing specific combination
            Base b = typename C::CombinationBase(); 
            // Forcing it again
            typename DependentProperty<Base>::Dependent d = typename C::CombinationDependent();
        }
};

int main(int argc, char** argv) {

  Combination<AA> combination_1;
  Manager<AA> a;
  a.init(&combination_1);

  Manager<BB> b;
  Combination<BB> combination_2;
  b.init(&combination_2);

  b.init(&combination_1);

  return 0;
} 
```

在这种情况下，您可以扩展组合模板以向客户端代码提供对其模板参数的访问。当然，在这种情况下，只要您依赖它在 init 成员函数中的实现（访问存储的模板参数值等），模板 C 在这种情况下就会成为组合概念的改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T06:40:39.897

您的代码是正确的，除了函数调用部分。

```
a.init<PP, Combination>( &combination_1 );
b.init<XX, Combination> ( &combination_2 ); 
```

这编译并和平运行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T11:05:21.563

我唯一看到的是

```
template <typename DependentProperty<B>::Dependent D,
          template<Base, <-- wrong
                typename DependentProperty<B>::Dependent <-- wrong
          > class T>
void init(T<B, D>* t); 
```

你的类`Combination`等待**值**作为模板参数，但你想给他**类型**

我花了一些时间来修复它 - 就像那样

```
template <typename DependentProperty<B>::Dependent D,
          template<Base BB,
                typename DependentProperty<BB>::Dependent DD
          > class T>
void init(T<B, D>* t); 
```

和许多其他变体，但没有成功。

请原谅我把它作为一个答案，但我无法在评论中输入这么多代码

# iphone - UIButton 可能不响应 enumerateobjectsusingblock，在 iPhone 中？

> ID：14518853
> 
> 赞同：0
> 
> 时间：2013-01-25T09:27:30.260
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我想在我的应用程序中使用 BCGenieEffect。我从 github 下载演示示例。[https://github.com/Ciechan/BCGenieEffect](https://github.com/Ciechan/BCGenieEffect)

在这个例子中使用了 xib，并且 4 个 UIButtons 与 xib 一起使用。我想在没有 xib 的情况下使用此代码，并且仅用于一个按钮。我不想拖动我的视图，这就是我删除该代码的原因。

我有一个 UIButton：

```
UIButton *Pop_Hidebtn = [[UIButton alloc]initWithFrame:CGRectMake(290, 5, 15, 15)];
Pop_Hidebtn.backgroundColor = [UIColor clearColor];
[Pop_Hidebtn setImage:[UIImage imageNamed:@"close.png"] forState:UIControlStateNormal];

Pop_Hidebtn.titleLabel.textColor = [UIColor blueColor];
[Pop_Hidebtn addTarget:self action:@selector(Hidden_pop:)  forControlEvents:UIControlEventTouchUpInside];  
[popup_View addSubview:Pop_Hidebtn];

-(void)Hidden_pop:(UIButton *)sender{
    [self genieToRect:sender.frame edge:BCRectEdgeBottom];
}

// I modified this and it says-> UIButton may not respond to enumerateobjectsusingblock
// And Crash 

- (void) genieToRect: (CGRect)rect edge: (BCRectEdge) edge {
    NSTimeInterval duration = 3.0;

    CGRect endRect = CGRectInset(rect, 5.0, 5.0);

    [help_Button enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx, BOOL   *stop) { 
        help_Button.enabled = NO;
    }];

    if (self.viewIsIn) {

        [popup_View_under2 genieOutTransitionWithDuration:duration startRect:endRect      startEdge:edge completion:^{
            popup_View_under2.userInteractionEnabled = YES;

            [help_Button enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx,  BOOL  *stop) {
                help_Button.enabled = YES;

            }];
        }];

    } else {
        popup_View_under2.userInteractionEnabled = NO;

        //UIButton may not respond to enumerateobjectsusingblock
        // Crash on this line
        [popup_View_under2 genieInTransitionWithDuration:duration destinationRect:endRect      destinationEdge:edge completion: ^{
            [help_Button enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx,  BOOL *stop) {
                button.enabled = YES;
            }];
        }];
    }

    self.viewIsIn = ! self.viewIsIn;
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:31:07.273

```
- (void)enumerateObjectsUsingBlock:(void (^)(id obj, NSUInteger idx, BOOL *stop))block 
```

是`NSArray`,`NSOrderedSet`和`NSSet`类的实例方法。因此，如果您在我认为是`UIButton`.

该方法旨在用于枚举集合中的对象。因此，您必须以这种方式将按钮放入`NSArray`（或`NSMutableArray`）中：

```
[myButtons enumerateObjectsUsingBlock:^(UIButton *aButton, NSUInteger idx, BOOL   *stop) { 
    aButton.enabled = NO;
}]; 
```

将为数组中的每个对象调用该块`myButtons`，接收对象本身（在这种情况下，它将被强制转换为`UIButton *`）、所述对象的索引和指向 a 的指针`BOOL`，您可以使用它来提前退出循环。

请注意，既然您说您将只使用一个按钮，为什么不删除该方法调用并只使用

```
helpButton.enabled = YES; 
```

没有枚举？

# c# - 我可以从 Application_End() 参数中获得任何有趣的数据吗？

> ID：14518861
> 
> 赞同：1
> 
> 时间：2013-01-25T09:27:49.743
> 
> 标签：c#, asp.net, events, global-asax

在我部署在 Windows Azure 上的 ASP.NET 应用程序中，我想记录尽可能多的有用数据。有`Application_End()`办法：

```
protected void Application_End(object sender, EventArgs e)
{
} 
```

`sender`这是与being[`System.Web.HttpApplicationFactory`](https://stackoverflow.com/q/320861/57428)和`e`being just一起调用的`System.EventArgs`。有了这些参数，我所能做的就是记录它们的类型，这不是很有用。

我可以从这些参数中获得任何有用的数据吗？是否存在`Application_End()`使用具有其他更有用的实际类型的参数调用的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:50:02.053

IIS，`class HttpRuntime`包括在内，可以下载源代码。仔细分析表明，事件参数确实总是相同的，没有传达任何有用的信息。事件的调用堆栈也是无用的 - 它总是

```
my Application_End(Object sender, EventArgs e)
at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
at System.Web.HttpApplication.InvokeMethodWithAssert(MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs)
at System.Web.HttpApplication.ProcessSpecialRequest(HttpContext context, MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs, HttpSessionState session)
at System.Web.HttpApplicationFactory.Dispose()
at System.Web.HttpRuntime.Dispose()
at System.Web.HttpRuntime.ReleaseResourcesAndUnloadAppDomain(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
at System.Threading.ThreadPoolWorkQueue.Dispatch()
at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 
```

但是......[`System.Web.Hosting.HostingEnvironment.ShutdownReason`](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.shutdownreason%28v=vs.90%29.aspx)可以从内部检索，并且在启动应用程序关闭时`Application_End()`设置。`HttpRuntime`

所以“有趣的数据”是`System.Web.Hosting.HostingEnvironment.ShutdownReason`。

另请参阅[这个密切相关的问题](https://stackoverflow.com/q/14855938/57428)

# select - 在这种情况下，我怎样才能让 mooMasonry 工作？

> ID：14518864
> 
> 赞同：0
> 
> 时间：2013-01-25T09:27:53.280
> 
> 标签：select, mootools

我是 MooTools 新手，我在 Contao 工作，这让我更加困惑，但这是我想要做的：

我有一个包含 4 个元素的列表，每个元素都包含更多列表的列表 (ul.level_2)。我想要做的是 mason ul.level_2 以便它的所有子列表都被迫进入紧凑的布局。

```
window.addEvent('domready',function(){
    $('.nav_main ul.level_2').masonry({ singleMode: true });
}); 
```

我不确定如何选择这些列表，因为我正在做的是返回此错误：

```
Uncaught TypeError: Cannot call method 'masonry' of null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:36:32.863

该错误意味着您的选择器返回 null，因此基本上您正在尝试这样做：

```
null.masonry(); 
```

这显然是行不通的。

在 MooTools 中，$ 用于通过 id 选择元素。如果要选择元素数组，则需要使用 $$。请参阅[有关 Elements 的 MooTools 文档](http://mootools.net/docs/core/Element/Element)。

所以，在你的情况下，你应该这样做：

```
$$('.nav_main ul.level_2').masonry({ singleMode: true }); 
```

或者，更简单地说：

```
$$('.level_2').masonry({ singleMode: true }); 
```

# php - PHP：这是使用在类下定义的函数的正确方法吗？

> ID：14518867
> 
> 赞同：0
> 
> 时间：2013-01-25T09:27:57.237
> 
> 标签：php, wordpress, class

我的 Wordpress 插件中有一个 PHP 类，该类在网站中被激活。我想在另一个插件（也在同一个网站中激活）中使用在此类中定义的方法（doc_export 函数）。我添加了这个，它似乎工作：

```
<?php
        // Export doc
        if (defined('DOC_ADMIN_MODE')) {

            $my_Documentation = new Class_Documentation;
            $mydocexport = $my_Documentation->doc_export();
            $mydocexport_file = ABSPATH . '_export/' . basename($site['site_url']) . '/doc.xml';
            file_put_contents($mydocexport_file, $mydocexport);
        }
?> 
```

我想知道这是否是正确的方法..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:31:21.940

是的，这是正确的方法。您还可以在[http://php.net/manual/en/language.oop5.basic.php阅读 PHP 中的 OOP 基础](http://php.net/manual/en/language.oop5.basic.php)

# ios - 将 Google 移动分析与 MVVMCross 集成

> ID：14518876
> 
> 赞同：1
> 
> 时间：2013-01-25T09:28:28.797
> 
> 标签：ios, google-analytics, mvvmcross

新的 Google Analytics SDK 引入了一个新的子类`UIViewController`，您必须从中继承：`GAITrackedViewController`.

更多信息：[https ://developers.google.com/analytics/devguides/collection/ios/v2/screens](https://developers.google.com/analytics/devguides/collection/ios/v2/screens)

这显然与 冲突`MvxBindingTouchViewController`，因为您只能从 C# 中的一个类继承。

让这个工作的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:07:03.357

MvvmCross 的 MvxTouchViewController 很特别...

MvvmCross 的 MvxBindingTouchViewController 更特别……

但这些只是特殊之处在于它们继承自标准 UIViewController（UIVIewController、UITableViewController、UITabBarController 等），然后它们添加了以下功能：

*   Cirrious.MvvmCross 层的 ViewModel 构造和 ViewModel 属性
*   Cirrious.MvvmCross.Binding层的Bindings的构造和存储

* * *

看一些例子：

*   [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchViewController.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchViewController.cs)和[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious。 MvvmCross.Binding.Touch/Views/MvxBindingTouchViewController.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Touch/Views/MvxBindingTouchViewController.cs)

*   [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchTableViewController.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchTableViewController.cs)和[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious。 MvvmCross.Binding.Touch/Views/MvxBindingTouchTableViewController.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Touch/Views/MvxBindingTouchTableViewController.cs)

*   [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchCollectionViewController.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Touch/Views/MvxTouchCollectionViewController.cs)和[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious。 MvvmCross.Binding.Touch/Views/MvxBindingTouchCollectionViewController.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Touch/Views/MvxBindingTouchCollectionViewController.cs)

在这些中，您可以希望看到这涉及到大量的代码剪切和粘贴——尽管我们确实尝试使用扩展方法将其最小化。（如果 C# 有多重继承或混合，我们就不需要这样做 - 我很想拥有混合......但永远不想要多重继承！）

所以....如果你想添加自己的 MvxXXXXXBindingViewController，那么：

1.  参加你的基础 XXXXX 课程，
2.  继承它并添加“东西”来制作 MvxXXXXViewController，
3.  然后获取您的 MvxXXXXXViewController 并再次从它继承以制作您的 MvxBindingXXXXXViewController
4.  发布到您的博客和新的 GitHub 存储库，以便其他人可以背负您的辛勤工作
5.  任务完成

* * *

进阶说明：

*   如果您想在 Droid 中看到相同的内容，请参阅[Insert a Monogame view inside MvvmCross monodroid Activity](https://stackoverflow.com/questions/13201174/insert-a-monogame-view-inside-mvvmcross-monodroid-activity/13201800#13201800)

*   TabBarController 也很有趣——它有一些额外的方法

*   在某个时候“很快”（今年上半年），我们将创建 VeeThree，这会将 MvxViewController 切换为非通用格式 - 这是因为 MonoTouch 现在建议不要在 iOS 基类上使用泛型 - Rolf 说大多数情况下它是安全的时间，但当它导致错误时，它们是“heisenbugs”。

*   当前类 (ViewDidUnload) 中也有一些死掉的旧 iOS 代码——这些代码也将在 VeeThree 中被剔除。

# java - EasyMock 验证模拟对象的参数

> ID：14518885
> 
> 赞同：1
> 
> 时间：2013-01-25T09:28:48.673
> 
> 标签：java, parameters, easymock, verify

我想验证一个模拟对象的参数是否正确映射（在方法调用之前有一个映射）。我创建了两个对象，其中一个具有预期值。我希望 false 失败，但不知何故 easymock 不会验证参数是否包含预期值。我该如何解决？

真正的班级会：

```
public SomeObject methodname() {
    MyClass  parameter = mapper.map(source,Dest.class);
    serviceBeingMocked.doSomething(parameter); //<-- want to verify this parameter
} 
```

测试

```
 MyClass correct = ...;
 correct.setA=a;
 correct.setB=b;

 expect(serviceBeingMocked(correct)).andReturn(iDontCare); //this should work

 MyClass false = ...;
 false.setA=eeeeeeeeeee;
 false.setB=ffffffffff;

 expect(serviceBeingMocked(false)).andReturn(iDontCare); // this test should fail 
```

提前致谢！

编辑：找到答案（使用捕获记录参数并通过断言测试值）

捕获参数 = new Capitre(); 期望（serviceBeingMocked（EasyMock.capture（参数）））；

assertEquals(parameter.getValue().getWhatever().equals(正确.getWhatever());

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:11:44.977

如果我理解正确的话，这个测试就是一个测试敌人`methodname()`。你想测试一下，给定一个源，正确的 MyClass 参数是由映射器创建的，并传递给`serviceBeingMocked.doSomething()`.

所以实际上，您的单元测试`methodname()`实际上测试了该`mapper.map()`方法。那是错误的。您应该编写一个单元测试`mapper.map()`来测试它。一旦确保`mapper.map()`按预期工作，您可以`methodname()`通过模拟该`mapper.map()`方法进行测试，并验证此模拟方法的结果是否已传递给模拟服务（尽管此测试不会增加太多价值）。

为了完整起见，如果您真的想按照自己的方式检查传递给 的值`serviceBeingMocked()`，那么您应该使用[capture](http://www.easymock.org/api/easymock/3.1/org/easymock/EasyMock.html#capture%28org.easymock.Capture%29)。

# jquery - Jquery将几乎相似的调用合并在一起

> ID：14518886
> 
> 赞同：0
> 
> 时间：2013-01-25T09:28:48.180
> 
> 标签：jquery, keypress

我有一个登录表单，其中有一个单击调用 ajax 请求的按钮，只有当我鼠标单击按钮而不是按 Enter 键时才会触发请求，

```
<form id="signin_form">
    Email: <input type="text" id="email" name="email">
    Password: <input type="password" id="password" name="password">
    <input type="button" id="btn_signin" value="Sign In">
</form> 
```

我从这里找到了一个工作示例（感谢 Stackoverflow），如何在按键上制作它，下面几乎是相同的反应，下面的脚本可以合并在一起以使脚本干净吗？

```
$("#password").keypress(function(event) {
    if (event.which == 13) {
        event.preventDefault();

        var parameters = $('#signin_form').serialize();

        $.ajax({
            url: baseurl + 'loginRequest',
            type: 'POST',
            data: parameters,
            dataType: 'json',
            success: function(output_str){
                if(output_str == "success"){

                    window.location.replace(window.location);
                }else{
                    $('#result').html(output_str);
                }
            }
        });
    }
});

// login request
$('#btn_signin').click(function(){
    var parameters = $('#signin_form').serialize();

    $.ajax({
        url: baseurl + '/login',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str == "success"){

                window.location.replace(window.location);
            }else{
                $('#result').html(output_str);
            }
        }
    });
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:33:02.390

我想这就是你要的

```
$("#password").keypress(function (event) {
            if (event.which == 13) {
                event.preventDefault();
                performLogin();
            }
        });

    // login request
    $('#btn_signin').click(function () {
        var parameters = $('#signin_form').serialize();
        performLogin();
    });

    function performLogin() {
        var parameters = $('#signin_form').serialize();
        $.ajax({
            url: baseurl + '/login',
            type: 'POST',
            data: parameters,
            dataType: 'json',
            success: function (output_str) {
                if (output_str == "success") {

                    window.location.replace(window.location);
                } else {
                    $('#result').html(output_str);
                }
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:35:31.057

将两个事件绑定到同一个函数，并检查点击或输入键，如下所示：

```
$("#password").on('keypress click', function(event) {
    if (event.type == 'click' || event.which == 13) {
        event.preventDefault();
        var parameters = $('#signin_form').serialize();

        $.ajax({
            url: baseurl + 'loginRequest',
            type: 'POST',
            data: parameters,
            dataType: 'json',
            success: function(output_str){
                if(output_str == "success"){
                    window.location.replace(window.location);
                }else{
                    $('#result').html(output_str);
                }
            }
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:35:35.270

```
$("#password").keypress(function(event) {
    if (event.which == 13) {
        event.preventDefault();
        $('#btn_signin').click();
    }
});

// login request
$('#btn_signin').click(function(){
    var parameters = $('#signin_form').serialize();

    $.ajax({
        url: baseurl + '/login',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str == "success"){

                window.location.replace(window.location);
            }else{
                $('#result').html(output_str);
            }
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:36:30.080

查看以下[JSFiddle](http://jsfiddle.net/pc3EU/)。

从本质上讲，它归结为使用提交处理程序，当您**单击提交按钮**以及**在任何表单字段中按 Enter**时，该处理程序就会触发。就像您对表格的期望一样。

不能更清洁和更好地沟通你在做什么。

```
$("form").submit(function () {        
    // Your ajax code here...

    return false;
}); 
```

为了使它起作用，将您的输入类型从“按钮”更改为“提交”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T09:38:25.127

您可以使用单个 .submit() 函数实现两种表单提交功能，而不是使用按键和单击。你必须改变你`<input type="button" id="btn_signin" value="Sign In">`的`<input type="submit" id="btn_signin" value="Sign In">`

```
$("#password").submit(function(){

var parameters = $('#signin_form').serialize();

        $.ajax({
            url: baseurl + 'loginRequest',
            type: 'POST',
            data: parameters,
            dataType: 'json',
            success: function(output_str){
                if(output_str == "success"){

                    window.location.replace(window.location);
                }else{
                    $('#result').html(output_str);
                }
            }
        });

}); 
```

# android - Webview 发布后不显示 url

> ID：14518889
> 
> 赞同：1
> 
> 时间：2013-01-25T09:29:10.897
> 
> 标签：android, android-emulator, webview

我已经发布了一个我为这个网站构建的应用程序。模拟器中的一切都运行良好，但是在我发布我的应用程序并下载它之后，我发现 webview 中没有显示任何内容。加载的 URL，我知道这一点，因为我可以突出显示页面上的内容。它根本没有被展示出来。

为什么我的应用程序在我的手机上的 web 视图中不显示 url 内容，而它在模拟器上做得如此完美？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:51:39.493

不知道你在哪里做错编码。但我会列出可能的错误。

请在清单文件中指定最小和最大 sdk 版本。例如：

使用-sdk android:minSdkVersion="8" android:targetSdkVersion="16"

有时，在 4.0 以上的 android 中，如果你没有在活动中提供这个，

android:hardwareAccelerated="true"，webview 将是空白的，不会显示任何内容。

# reporting-services - TFS 报告功能

> ID：14518891
> 
> 赞同：-2
> 
> 时间：2013-01-25T09:29:15.927
> 
> 标签：reporting-services, tfs

我对 Team Foundation Server 的报告功能一无所知，因为我们在没有它们的情况下安装了它。

现在公司想要生成一份报告，其中包含每个人每天输入的小时数。这可以使用 TFS 的报告工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:53:13.917

**是**的，现在可以将报告配置为 TFS 的一部分，即使您之前没有这样做。

*   [将报表服务器添加到您的部署](http://bit.ly/11ZWDvx)

**是**的，*可以*报告用户每天输入 TFS 的小时数

**不**，这不是一个好主意，这是一个极差的监控指标，可能会导致您的团队/个人出现负面行为。

**不**，不可能在 TFS 中做时间表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T16:13:32.617

还有另一种选择（通过免费试用付费）：[http](http://www.tfs-timetracker.com) ://www.tfs-timetracker.com 。它完全集成到 TFS 中，专注于跟踪人们花费的时间。它兼容从 TFS 2012 到最新版本（当前为 TFS 2013 Update 2）。（我来自团队，希望您接受我在此线程中“宣传”我们的解决方案。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T22:39:00.623

TFS 不是用于跟踪“每个人每天输入的时间”的系统。暂时忘记报告，您必须首先询问这些数据来自哪里？您是否有用于输入时间的自定义工作项类型？

如果数据存在于工作项中，那么您当然可以使用与 Excel 的集成。您可以创建工作项查询并在 Excel 中轻松打开查询。这将为您提供数据，您可以使用 Excel 内置的工具进行进一步的格式化和分析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T13:03:35.920

顺便说一句，我发现了一些与 TFS 时间跟踪相关的工具：

*   自由：

    *   [TFS 时间表](http://tfstimesheet.codeplex.com/)
    *   [TFS 时间表](http://tfstimesheets.codeplex.com/)
*   有薪酬的：

    *   [团队扩展](http://www.teamexpand.com/page/tfs-timesheet-application?p=g&gclid=CLCA-ZeOi7UCFXDLtAodPl4Acw)
    *   [想象](http://www.imaginet.com/MicrosoftALMAdoptionServices/Pages/default.aspx)

只有第二个选项可以在 TFS 2012 中使用。

# ios - 横向/所有方向的 MPMoviePlayerViewController

> ID：14518894
> 
> 赞同：0
> 
> 时间：2013-01-25T09:29:21.517
> 
> 标签：ios, objective-c, mpmovieplayercontroller, screen-orientation

我的问题很简单，教程和答案并没有解决我的问题。

我有一个带有设置的应用程序：

![在此处输入图像描述](../Images/546088e4507dd2bf3843ee8df4916aea.png)

我希望在我的所有视图控制器中仅支持纵向/倒置方向，除非我想通过以下方式播放视频：

> MPMoviePlayerViewController

这是代码：

```
MPMoviePlayerViewController *mp = [[MPMoviePlayerViewController alloc] initWithContentURL:[Videos videoURL:video.hash]];
if (mp) {
    isVideoPlaying = YES;

    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(videoFinishedPlaying:)
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:mp.moviePlayer];

    [self presentMoviePlayerViewControllerAnimated:mp];
    mp.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [mp.moviePlayer play];
    [mp release];
} 
```

播放视频时`MPMoviePlayerViewController`，我希望支持所有方向。
需要你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:13:11.103

您应该通过以下方式允许轮换：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
     // Return YES for supported orientations
} 
```

IOS 6：

```
- (NSUInteger)supportedInterfaceOrientations
{

    return UIInterfaceOrientationMaskAll;
} 
```

将代码放在调用播放器的 .m 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T08:18:24.637

大家好，我有同样的问题我解决了 -

您需要先更改 appdelegate：

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
if ([[[NowPlaying sharedManager] playerViewController] allowRotation])//Place your condition here
{
    return UIInterfaceOrientationMaskAll;
}
return UIInterfaceOrientationMaskPortrait;
} 
```

为全屏控制注册通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerWillEnterFullscreenNotification:)
                                             name:MPMoviePlayerWillEnterFullscreenNotification
                                           object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerWillExitFullscreenNotification:)
                                             name:MPMoviePlayerWillExitFullscreenNotification
                                           object:nil]; 
```

然后在播放器控制器中添加一行代码：

```
- (void)moviePlayerWillEnterFullscreenNotification:(NSNotification *)notification
{
dispatch_async(dispatch_get_main_queue(), ^
               {
                   self.allowRotation = YES;
               });
}

- (void)moviePlayerWillExitFullscreenNotification:(NSNotification *)notification
{
self.allowRotation = NO;
[self.moviePlayerController setControlStyle:MPMovieControlStyleNone];

dispatch_async(dispatch_get_main_queue(), ^
               {

                   //Managing GUI in pause condition
                       if (self.currentContent.contentType == TypeVideo && self.moviePlayerController.playbackState == MPMoviePlaybackStatePaused)
                   {
                       [self.moviePlayerController pause];
                       if (self.playButton.selected)
                           self.playButton.selected = NO;
                   }
                   self.view.transform = CGAffineTransformMakeRotation(0);
                   [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait];
                   self.view.bounds = CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height);
               });
} 
```

此代码已在 iOS6 和 iOS7 中正常运行。谢谢

# vim - GVim标签栏：滚动标签栏而不是在箭头单击时更改缓冲区？

> ID：14518898
> 
> 赞同：0
> 
> 时间：2013-01-25T09:29:38.250
> 
> 标签：vim, scroll, tabs, click

我经常在 GVim 中同时打开 10-20 个文件（非常适合水平放入屏幕），并且我启用了标签栏 ( `set showtabline=1`)。我想更改标签栏的行为，以便当我单击标签栏任一端的箭头按钮时，标签栏会滚动而不是切换到下一个/上一个标签。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:47:26.733

不，我不认为这是可能的。标签页的所有方面都在 中进行了描述`:help tabpage`，但我没有在那里找到设置。

一般来说，您应该避免标签页过多，因为您会失去快速导航和跨缓冲区移动文本的机会。诸如快速修复和预览窗口之类的东西总是在窗口拆分中打开，因此请了解如何使用它们（以及窗口与缓冲区的基本概念）。

我知道今天很多人在他们的浏览器中打开了几十个标签，但 Vim 不同。我只使用标签页来分隔不同的工作区（例如，在标签 3 中编辑映射，而我在标签 1 中进行编码并在标签 2 中有文档）。

# php - SMTP服务器本地发送邮件php

> ID：14518902
> 
> 赞同：1
> 
> 时间：2013-01-25T09:29:50.760
> 
> 标签：php, smtp, local, hmail-server

> **可能重复：**
> [mail()：SMTP 服务器响应：550 The address is not valid error on hmailserver](https://stackoverflow.com/questions/12495509/mail-smtp-server-response-550-the-address-is-not-valid-error-on-hmailserver)

我想测试我的类 senderMail.php。

为了拥有一个 smtp 服务器，我使用 hMailServer。我已经创建了一个域，我已经创建了一个帐户，现在我配置了 SMTP 设置。

hMailServer 想要一个配置“SMTP RELAYER”。我使用以下信息进行测试：端口 587 上的 smtp.gmail.com 并且我也输入了我的标识符。

什么时候，我用我的类 senderMail.php 测试了这个，我有这个错误：

> > SMTP 服务器响应：550 地址无效

我的错误在哪里？它来自 SMTP RELAYER 还是其他配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:21:15.297

你为什么不尝试直接从本地主机发送它。

1.  转到您的`php.ini`文件并更改`SMTP = localhost to SMTP = aspmx.l.google.com`并取消注释`sendmail_from`并输入**您的发送 gmail 地址**。

2.  在php中，用`mail("youremail]@gmail.com", "subject", "body");`

**注意：**这仅在向谷歌托管的电子邮件地址发送电子邮件时有效。

**或者**

如果它不起作用，请尝试上面的尝试使用[**swiftmailer**](http://swiftmailer.org/)它的 php 邮件发送库，它还允许通过 SMTP 发送邮件，这在开发过程中非常有用。

# php - 创建分层多维关联数组

> ID：14518912
> 
> 赞同：0
> 
> 时间：2013-01-25T09:30:40.847
> 
> 标签：php, arrays, multidimensional-array, hierarchical-data, dynamic-arrays

我需要从“平面”数组创建一个巨大的多维关联数组，以使其符合 json 标准：

```
$data = array (
    'Europe',
    'West',
    'Germany',
    'France',
    'Switzerland',
    'East',
    'Czech Republic',
    'Slovakia',
    'Poland') 
```

对于每个实体，我可以说它是合并的（欧洲、西方和东方）还是基础元素（即没有子元素）

我想要实现的是以下数组：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [entity] => Europe
                    [children] => Array
                        (
                            [0] => Array
                                (
                                    [entity] => West
                                    [children] => Array
                                        (
                                            [0] => Array
                                                (
                                                    [entity] => France
                                                )
                                            [1] => Array
                                                (
                                                    [entity] => Germany
                                                )
                                            [2] => Array
                                                (
                                                    [entity] => Switzerland
                                                )
                                        )
                                )
                            [1] => Array
                                (
                                    [entity] => East
                                    [children] => Array
                                        (
                                            [0] => Array
                                                (
                                                    [entity] => Czech Republic
                                                )
                                            [1] => Array
                                                (
                                                    [entity] => Slovakia
                                                )
                                            [2] => Array
                                                (
                                                    [entity] => Poland
                                                )
                                        )
                                )
                        )
                )
        )
) 
```

我已经尝试为此编写一个递归函数：

```
function ListArray($top_elt)
{
    $myarray=array();   
    $myarray[0]['entity']=$top_elt;
        // foreach element of the list
        foreach($children as $child) 
        {
                //element is consolidated : call the recursive function to list the children
                // this is the function that returns whether the element is consolidated or not
                if(palo_etype($connect,'Demo','Regions',$child)=='consolidated')
                {
            $myarray[0]['children'][]['entity']=$child;
            ListArray($child);
        }
                else //basis element
                {
            $myarray[0]['children'][]['entity']=$child;
                }
        }        
        return $myarray;
} 
```

但它只返回欧洲，西方和东方......

你有想法吗 ？

提前感谢您的支持！

干杯，拉鲁恩

# c - C中的多客户端服务器实现

> ID：14518914
> 
> 赞同：0
> 
> 时间：2013-01-25T09:30:52.737
> 
> 标签：c, client-server

我正在尝试使用 C 实现多客户端服务器。我为服务器编写了代码，客户端是一个软件，它会不断地向服务器发送一些数据包。服务器将读取数据包并进行处理。我正在尝试一次与服务器建立 5 个连接。但是我编写的服务器代码存在一些问题，因此我无法将 5 个客户端连接到服务器。确切的问题是，当客户端尝试与服务器连接时，它会获得连接，但是当我关闭客户端软件并尝试重新启动时，它没有获得连接。以下是我的服务器端代码。任何人都可以帮助我解决这个问题。

```
#include <ctype.h>
#include <sys/time.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/utsname.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/select.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <unistd.h>
#include <sys/file.h>

int sock;                       /* The socket file descriptor for our "listening"socket */
int connectlist[15];            /* Array of connected sockets so we know who we are talking to */
fd_set socks;                   /* Socket file descriptors we want to wake up for, using select() */
int highsock = 1;               /* Highest #'d file descriptor, needed for select() */
struct sockaddr_in client_address[5];
unsigned int clientLength = sizeof(client_address) ;
#define PORTNO      (int)49153
int port;                       /* The port number after conversion from ascport */
struct sockaddr_in server_address; /* bind info structure */
int reuse_addr = 1;  
struct timeval timeout;         /* Timeout for select */
int readsocks;                  /* Number of sockets ready for reading */
int err = 0 ;

#define BACKLOG         (int)10

void deal_with_data(int listnum /* Current item in connectlist for for loops */)
{
    //Here I am trying to read packet from client s/w and process it
}

void setnonblocking(int sock)
{
    int opts;
    opts = fcntl(sock,F_GETFL);
    if (opts < 0) 
    {
        printf("fcntl(F_GETFL)_error");
        exit(0);
    }
    opts = (opts | O_NONBLOCK);
    if (fcntl(sock,F_SETFL,opts) < 0) 
    {
        printf("fcntl(F_SETFL)_error");
        exit(0);
    }
    return;
}

void build_select_list() 
{
    int listnum;         /* Current item in connectlist for for loops */
    FD_ZERO(&socks);
    FD_SET(sock,&socks);
    for (listnum = 0; listnum < 5; listnum++) 
    {
        if (connectlist[listnum] != 0) 
        {
            FD_SET(connectlist[listnum],&socks);
            if (connectlist[listnum] > highsock)
                highsock = connectlist[listnum];
        }
    }
}

void handle_new_connection() {
    int listnum;         /* Current item in connectlist for for loops */
    int connection; /* Socket file descriptor for incoming connections */
    connection = accept(sock, (struct sockaddr *)&client_address[highsock], &clientLength);
    if (connection < 0) 
    {
        printf("accept_error");
        exit(0);
    }
    setnonblocking(connection);
    for (listnum = 0; (listnum < 5) && (connection != -1); listnum ++)
        if (connectlist[listnum] == 0) 
        {
            printf("\nConnection accepted:   FD=%d; Slot=%d\n",
                connection,listnum);
            printf("Connection accepted from %s\n",inet_ntoa(client_address[highsock].sin_addr));
            connectlist[listnum] = connection;
            connection = -1;

        }
    if (connection != -1) 
    {
        printf("\nNo room left for new client.\n");
        write(connection,"Sorry, this server is too busy.Try again later!\r\n",80);
        close(connection);
    }
    printf("return from handle_new_connection\n");
}

void read_socks(void)
{
    int listnum;         /* Current item in connectlist for for loops */
    if (FD_ISSET(sock,&socks))
        handle_new_connection();
    for (listnum = 0; listnum < 5; listnum++) 
    {
        if (FD_ISSET(connectlist[listnum],&socks))
        {
            //printf("read_socks2\n");
            deal_with_data(listnum);
        }
    }
}

int main (/*int argc, char *argv[]*/)
{
    sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (sock < 0) 
    {
        printf("socket_error");
        exit(EXIT_FAILURE);
    }
    setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &reuse_addr,sizeof(reuse_addr));
    setnonblocking(sock);

    memset((char *) &server_address, 0, sizeof(server_address));
    server_address.sin_family = AF_INET;
    server_address.sin_addr.s_addr = htonl(INADDR_ANY);
    server_address.sin_port = htons(port);

    if (bind(sock, (struct sockaddr *) &server_address,sizeof(server_address)) < 0 ) 
    {
        printf("bind_error");
        close(sock);
        exit(EXIT_FAILURE);
    }

    if((err = listen(sock,10)) == -1)
    {
        printf("listen_error");
    }

    highsock = sock;
    memset((char *) &connectlist, 0, sizeof(connectlist));

    while (1) 
    { /* Main server loop - forever */
        build_select_list();
        timeout.tv_sec = 2;
        timeout.tv_usec = 0;

        readsocks = select(highsock+2, &socks, (fd_set *) 0,(fd_set *) 0, &timeout);
        if (readsocks < 0) 
        {
            printf("select_error");
            exit(EXIT_FAILURE);
        }
        if (readsocks == 0) 
        {
            printf(".");
            fflush(stdout);
        } 
        else
        {   
            read_socks();
        }
    } /* while(1) */
} /* main */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:31:25.073

您的问题是，当客户端关闭套接字时，您的主循环不会退出。这意味着它不能接受新的连接。我会用来`fork()`处理来自套接字的数据，以及`main()`接受连接和`fork()`进程的函数。此外，您需要有一些代码会杀死`fork()`ed（即检查客户端是否在`fork()`ed 进程中断开连接）进程（因为它不会自行关闭并且会占用内存）。

编辑：

`recv()`好的，我在你的程序中找不到调用。根据[recv（3）手册页](http://linux.die.net/man/3/recv)，`return 0`如果客户端“优雅地”断开连接，`return -1`并且如果客户端强制断开连接，它将设置`errno`为。`ECONNRESET`为了使用fork，我会（在`main()`函数中）将你的while循环包装在这个：

```
int childpid = fork();
if(childpid == -1) {
       printf("Could not fork process");
       exit(EXIT_FAILURE);
}
else if(childpid == 0) { /* in child process*/
       while(/* check if the socket has been closed */) {
               /* While loop stuff */
       }
       /* free up memory */
       exit(EXIT_SUCCESS);
} 
```

你的主要功能应该在一个循环中，等待新的连接。

注意我没有测试过任何这段代码，所以它可能不起作用。但是，如果您阅读手册页`fork(3)`，`recv(3)`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:14:31.273

使用像 Apache 这样现成的东西并根据需要对其进行自定义不是更好吗？

# c# - 如何在 WinRT Metro 应用程序 C# 中配置应用程序以使用 live coonect api？

> ID：14518915
> 
> 赞同：0
> 
> 时间：2013-01-25T09:30:54.060
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

我想在 C# 中配置我的 Windows RT 应用程序以使用实时连接 API（根据“ **http://msdn.microsoft.com/en-us/library/live/hh826541.aspx** ”）。如果我去 Windows Store Dashboard（“ **https://appdev.microsoft.com/StorePortals/en-us/account/signup/start** ”），它会要求我在商店注册应用程序，希望我能提供更多详细信息，价格为 i想想我不想那样做，因为我只是想为示例应用程序探索这个主题。我之前已经创建了包 ID ..但是我认为我已经失去了那个链接，如果我这样做了。那么如何配置我的示例应用程序使用实时连接 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:08:32.567

Windows 应用商店仪表板是正确的地方，您只需要注册一个名称，然后您就可以进入实时服务和推送通知的配置部分。在您准备好发布您的应用程序之前，您无需输入所有其他信息。

![在此处输入图像描述](../Images/945f230051f94efc14c4c60242cebbc6.png)

# android - 当单击 EditText 数字键盘时带有页脚布局

> ID：14518917
> 
> 赞同：0
> 
> 时间：2013-01-25T09:30:55.557
> 
> 标签：android, android-layout, android-linearlayout, numpad

我用一些编辑文本和一些 TextVies 以及“页眉”和“页脚”布局制作了一个简单的 android 活动，现在一切正常，但是在运行时，当我点击 EditText 上的任何一个时，数字键盘弹出并带有我的“页脚” ” 布局。我把我的活动图片放在下面，这样你就可以得到我的问题，我的代码如下：

**主要的.xml**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/relativeLayout2"
            android:layout_width="fill_parent"
            android:layout_height="56dp"
            android:padding="3dp" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:text="General Details"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textStyle="bold" />

            <Button
                android:id="@+id/back1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:text="Back" />

            <Button
                android:id="@+id/Next1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentRight="true"
                android:text="Next" />

        </RelativeLayout>
         <SeekBar
                        android:id="@+id/seekBar1"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_alignParentTop="true" />

            <ScrollView 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"  android:layout_weight="0.23" android:fillViewport="true">

                <RelativeLayout
                    android:id="@+id/relativeLayout2"
                    android:layout_width="fill_parent"
                    android:layout_height="509dp"
                    android:background="#fffff3"
                    android:padding="10dp" >

                    <EditText
                        android:id="@+id/editTextPropertyCalc1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignLeft="@+id/editTextPropertyCalc2"
                        android:layout_alignParentRight="true"
                        android:layout_alignParentTop="true"
                         android:inputType="numberDecimal" android:imeOptions="actionNext">

                    </EditText>

                    <EditText
                        android:id="@+id/editTextPropertyCalc2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/editTextPropertyCalc1"
                        android:layout_toRightOf="@+id/imageButtonCalcTip2"
                        android:inputType="numberDecimal" android:imeOptions="actionDone"/>

                    <EditText
                        android:id="@+id/editTextPropertyCalc3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignLeft="@+id/editTextPropertyCalc1"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/editTextPropertyCalc2"
                        android:inputType="numberDecimal" android:enabled="false" android:focusableInTouchMode="false" android:focusable="false"/>

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc3"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/editTextPropertyCalc3"
                        android:textAppearance="?android:attr/textAppearanceMediumInverse"
                        android:typeface="serif" />

                    <EditText
                        android:id="@+id/editTextPropertyCalc4"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignLeft="@+id/editTextPropertyCalc3"
                        android:layout_alignRight="@+id/textView2"
                        android:layout_below="@+id/textView2"
                        android:inputType="numberDecimal" android:imeOptions="actionNext"/>

                    <EditText
                        android:id="@+id/editTextPropertyCalc5"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignLeft="@+id/editTextPropertyCalc4"
                        android:layout_alignRight="@+id/textView2"
                        android:layout_below="@+id/editTextPropertyCalc4"
                        android:inputType="numberDecimal" android:imeOptions="actionNext"/>

                    <EditText
                        android:id="@+id/editTextPropertyCalc6"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignLeft="@+id/editTextPropertyCalc4"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/editTextPropertyCalc5"
                        android:inputType="numberDecimal" android:imeOptions="actionNext"/>

                    <EditText
                        android:id="@+id/editTextPropertyCalc7"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignLeft="@+id/editTextPropertyCalc5"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/editTextPropertyCalc6"
                        android:inputType="numberDecimal" android:imeOptions="actionDone"/>

                    <EditText
                        android:id="@+id/editTextPropertyCalc8"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignLeft="@+id/editTextPropertyCalc6"
                        android:layout_alignParentRight="true"
                        android:layout_below="@+id/editTextPropertyCalc7"
                        android:inputType="numberDecimal" android:enabled="false" android:focusableInTouchMode="false" android:focusable="false"/>

                    <Button
                        android:id="@+id/buttonPropertyCalcClear"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/togglebutton"
                        android:layout_centerHorizontal="true"
                        android:layout_marginTop="20dp"
                        android:text="Clear All" />

                    <TextView
                        android:id="@+id/TextView01"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/editTextPropertyCalc1"
                        android:layout_alignBottom="@+id/editTextPropertyCalc1"
                        android:layout_alignLeft="@+id/textView2"
                        android:text="Purchase Price"
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                    <TextView
                        android:id="@+id/textView3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc2"
                        android:layout_alignParentLeft="true"
                        android:layout_alignTop="@+id/imageButtonCalcTip2"
                        android:text="Refurnishment Cost"
                        android:gravity="center"
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                    <TextView
                        android:id="@+id/TextView03"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/editTextPropertyCalc3"
                        android:layout_alignBottom="@+id/editTextPropertyCalc3"
                        android:layout_alignLeft="@+id/textView2"
                        android:text="Legal Cost"
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                    <TextView
                        android:id="@+id/TextView02"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/editTextPropertyCalc4"
                        android:layout_alignBottom="@+id/editTextPropertyCalc4"
                        android:layout_alignParentLeft="true"
                        android:layout_alignRight="@+id/textView3"
                        android:text="Mortage Loan to Value(LTV)% "
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                    <TextView
                        android:id="@+id/TextView04"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/editTextPropertyCalc5"
                        android:layout_alignBottom="@+id/editTextPropertyCalc5"
                        android:layout_alignParentLeft="true"
                        android:layout_alignRight="@+id/TextView02"
                        android:text="Mortage Interest Rate %"
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                    <TextView
                        android:id="@+id/TextView05"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/editTextPropertyCalc6"
                        android:layout_alignBottom="@+id/editTextPropertyCalc6"
                        android:layout_alignParentLeft="true"
                        android:text="Monthly Rent"
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                    <TextView
                        android:id="@+id/TextView06"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBaseline="@+id/editTextPropertyCalc7"
                        android:layout_alignBottom="@+id/editTextPropertyCalc7"
                        android:layout_alignParentLeft="true"
                        android:text="Letting Agent Fees"
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                    <TextView
                        android:id="@+id/TextView07"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc8"
                        android:layout_alignLeft="@+id/TextView06"
                        android:layout_alignRight="@+id/TextView04"
                        android:layout_below="@+id/imageButtonCalcTip7"
                        android:text="Montlhly Operating Expenses %"
                        android:textAppearance="?android:attr/textAppearanceSmallInverse"
                        android:typeface="serif" />

                     <TextView
                         android:id="@+id/TextView8"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"

                         android:layout_marginTop="390dp"
                         android:layout_marginRight="180dp"            
                         android:text="Will you be borrowing any of the deposit money?"
                         android:textAppearance="?android:attr/textAppearanceSmallInverse"
                         android:typeface="serif" />

                        />

                    <ImageButton
                        android:id="@+id/imageButtonCalcTip1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc1"
                        android:layout_alignTop="@+id/editTextPropertyCalc1"
                        android:layout_toRightOf="@+id/TextView02"
                        android:background="#0000"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@android:drawable/ic_dialog_info" />
                    <ImageButton
                        android:id="@+id/imageButtonCalcTip2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc2"
                        android:layout_alignTop="@+id/editTextPropertyCalc2"
                        android:layout_toRightOf="@+id/TextView02"
                        android:background="#0000"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@android:drawable/ic_dialog_info" />

                    <ImageButton
                        android:id="@+id/imageButtonCalcTip3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc3"
                        android:layout_alignTop="@+id/editTextPropertyCalc3"
                        android:layout_toRightOf="@+id/TextView02"
                        android:background="#0000"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@android:drawable/ic_dialog_info" />

                    <ImageButton
                        android:id="@+id/imageButtonCalcTip4"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc4"
                        android:layout_alignTop="@+id/editTextPropertyCalc4"
                        android:layout_toRightOf="@+id/TextView02"
                        android:background="#0000"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@android:drawable/ic_dialog_info" />

                    <ImageButton
                        android:id="@+id/imageButtonCalcTip5"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc5"
                        android:layout_alignTop="@+id/editTextPropertyCalc5"
                        android:layout_toRightOf="@+id/TextView02"
                        android:background="#0000"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@android:drawable/ic_dialog_info" />

                    <ImageButton
                        android:id="@+id/imageButtonCalcTip7"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc7"
                        android:layout_alignTop="@+id/editTextPropertyCalc7"
                        android:layout_toRightOf="@+id/TextView02"
                        android:background="#0000"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@android:drawable/ic_dialog_info" />

                    <ImageButton
                        android:id="@+id/imageButtonCalcTip8"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc8"
                        android:layout_alignTop="@+id/editTextPropertyCalc8"
                        android:layout_toRightOf="@+id/TextView02"
                        android:background="#0000"
                        android:padding="10dp"
                        android:scaleType="fitCenter"
                        android:src="@android:drawable/ic_dialog_info" />

                    <Button
                        android:id="@+id/buttonMortgageAmount"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignBottom="@+id/editTextPropertyCalc3"
                        android:layout_alignLeft="@+id/editTextPropertyCalc3"
                        android:layout_alignRight="@+id/editTextPropertyCalc3"
                        android:layout_alignTop="@+id/editTextPropertyCalc3" android:background="#0000"/>

                    <ToggleButton
                        android:id="@+id/togglebutton"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="250dp"
                        android:layout_marginLeft="200dp"
                        android:layout_below="@+id/editTextPropertyCalc3"
                        android:textOff="No"
                        android:textOn="Yes" />

                </RelativeLayout>

    **</ScrollView>** 

   <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="fill_parent"
            android:layout_height="46dp"
            android:background="@drawable/gradient_grey" >

                <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" android:orientation="vertical">
                <ImageButton
                    android:id="@+id/imageButtonHome"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:src="@drawable/g3570" android:layout_weight="0.6" android:background="#0000" android:scaleType="fitCenter" android:layout_marginTop="5dp"/>

                <TextView                 android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                     android:layout_weight="1"
                     android:text="Home"
                    android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

                </LinearLayout> <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" android:orientation="vertical">

                <ImageButton
                    android:id="@+id/imageButtonTraining"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:src="@drawable/g4404" android:layout_weight="0.6" android:scaleType="fitCenter" android:background="#0000" android:layout_marginTop="5dp"/>
                    <TextView                 android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                     android:layout_weight="1"
                     android:text="Training"
                    android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

                </LinearLayout> <LinearLayout 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" android:orientation="vertical">
                <ImageButton
                    android:id="@+id/imageButtonContactUs"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:src="@drawable/icon_email" android:layout_weight="0.6" android:scaleType="fitCenter" android:background="#0000" android:layout_marginTop="5dp"/>
                   <TextView                 android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                     android:layout_weight="1"
                     android:text="Contact Us"
                    android:gravity="center" android:textAppearance="?android:attr/textAppearanceMediumInverse" android:textColor="#fff" android:textStyle="bold"/>

                </LinearLayout>
            </LinearLayout>
        </LinearLayout> 
```

我的活动图像如下：

![在此处输入图像描述](../Images/e08ee6fa6a0ae2e968deaa10ecd5e4f4.png)

请帮我解决这个错误。谢谢朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:19:53.997

试试这个代码，这对我有用......

```
 public class Calculator extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculator);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:10:25.193

使用下面的此代码将帮助您...

```
getWindow().setSoftInputMode(
WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

 or Use this code

 <application android:icon="@drawable/icon" android:label="@string/app_name">
<activity android:name=".Main"
          android:label="@string/app_name"
          android:windowSoftInputMode="stateHidden"
          > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-04T10:45:06.187

抱歉我迟到了

就我而言，我在 Oncreate 函数和布局顶部添加了这些代码行

像下面

[![在此处输入图像描述](../Images/1619eda07c6755bc79cbad02913ed0ef.png)](https://i.stack.imgur.com/HpD42.png)

代码在这里：

```
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN) 
```

# c# - 跟踪变更集的字符串比较

> ID：14518920
> 
> 赞同：1
> 
> 时间：2013-01-25T09:31:02.103
> 
> 标签：c#, asp.net, string

我在一个 asp.net 项目中工作（WebForms、C#、.net 4.O）。

我有一个基于某些标准动态填充的字符串列表，它可以有任意数量的字符串元素，具体取决于场景。这些字符串元素基本上是一些冗长的句子。例如，将以下内容作为示例列表

```
List<string> stringColl = new List<string>();
stringColl.Add("I am joining");
stringColl.Add("I not joining");
stringColl.Add("joining");
stringColl.Add("I may not be joining"); 
```

现在我需要通过与其他条目进行比较来跟踪列表中最终条目的变化。最终条目被视为最终版本，即如果从早期版本中添加/删除任何内容，则应存储在另一个列表中。

在上面的例子中，“may”是附加的单词，所以需要添加到结果字符串中。另外，“am”是早期版本中缺少的单词，所以也应该存储在另一个结果列表中.

有人可以帮助我实现这一目标吗？

# video - 抓取 1 个/多个摄像头并进行编码？

> ID：14518922
> 
> 赞同：0
> 
> 时间：2013-01-25T09:31:14.037
> 
> 标签：video, encoding, video-capture, video-processing

我终于设法从我们的相机中抓取了一段视频。该相机在 Windows 下抓取全高清存在几个问题，唯一的方法是使用抓取原始、巨大文件的工具。

所以我在ubuntu下找到了方法：

```
dvgrab -format mpeg2 -buffer 300 - | ffmpeg -deinterlace -f mpegts -i - -f flv -vcodec flv -s 1920x1080 -aspect 16:9 -qscale 3.5 -acodec libmp3lame -ab 32k -ar 22050 Videoname.flv 
```

这会抓住我的摄像头（佳能 XHA1）并将其保存为 flv。作品。有没有办法制作一个gui？

我想做的是一个带有视频预览的小工具/GUI，添加第二个和第三个摄像头，最后一步，以某种方式设法在图片编码中创建图片。

那么，我该怎么做或者有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:23:10.103

我在 AskUbuntu 上找到了你的问题。您的方法和结果存在几个问题。

首先，您选择 22050 Hz 作为音频采样率，这不足以正确捕获音频（20 Hz 到 20 kHz）。根据奈奎斯特（见[奈奎斯特频率](http://en.wikipedia.org/wiki/Nyquist_frequency)），你需要加倍。这就是 CD 使用 44.1 kHz 的原因。

然后你从相机中拉出隔行扫描的材料。确实存在像[TGMC](http://avisynth.org/mediawiki/TempGaussMC)这样的过滤器可以很好地处理隔行扫描的材料，但它们使用了大量的资源来实现这一点。此外，在 Wine 中使用该过滤器所需的所有插件设置 Avisynth 并让某种多线程可靠地工作是相当痛苦的。（VapourSynth 可能已经解决了多线程和稳定性问题。）

长话短说：没有简单快速的方法可以从这台相机获得蓝光质量的视频，所以我建议您使用 720p 输出，或者可能购买一台以 1080p 录制并以适当格式提供输出的新相机。

# php - 使PHP单击同一页面上的链接或处理表单

> ID：14518923
> 
> 赞同：0
> 
> 时间：2013-01-25T09:31:16.687
> 
> 标签：php

是否有任何 php 代码可用于单击链接或处理 php 所在页面上的表单？

我正在构建一个重定向脚本，我需要做的是使用 php 将用户移动到下一页，必须使用 php 的强制性 html 不起作用。在其中我有一个自我提交论坛，但它不起作用我如何加载脚本。有没有办法我可以使用 php 代码提交它？或者删除它并在那里放置一个链接然后使用php点击该链接？

这是下面的代码：

```
if ($_GET['ref_spoof'] != NULL) 
{
    $offer = urldecode($_GET['ref_spoof']);
    $p1 = strpos ($offer, '?') + 1;
    $url_par = substr ($offer , $p1);
    $paryval = split ('&', $url_par);
    $p = array();
    foreach ($paryval as $value) 
    {
        $p[] = split ('=',$value);
    }
    //header('Location: '.$offer.'') ;
    print 
    '
    <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body>
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">$("#mylink").click()</script>
    <a href="'.$offer.'" id="mylink">Index Page</a>
    <script type="text/javascript">$("#mylink").click()</script>
    <script type="text/javascript">document.getElementById("myLink").click();</script>

    <form action="'.$offer.'" method="get" id="myform">
    ';
    foreach ($p as $value) 
    {
        echo '<input type="hidden" name="'.$value[0].'" value="'.$value[1].'">';

    }
    echo '</form><script language="JavaScript"> document.getElementById(\'myform\').submit();</script></body></html>';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:29:06.703

看起来您正试图使这变得过于复杂。您正在加载一个使用 GET 提交表单的页面。

有什么理由你不能使用

```
 header("Location : ".$offer."?".http_build_query($p)); 
```

http_build_query 是一个从数组生成 URL 字符串的函数。假设 $p 是包含所有表单字段名+值的数组。

http_build_query 的示例：

```
 $data = array('foo'=>'bar',
          'baz'=>'boom',
          'cow'=>'milk',
          'php'=>'hypertext processor');

    echo http_build_query($data);
    will result in:
    foo=bar&baz=boom&cow=milk&php=hypertext+processor 
```

# php - 将大约 1500 个 mysql 条目复制到同一个表中的最佳方法是什么？

> ID：14518928
> 
> 赞同：0
> 
> 时间：2013-01-25T09:31:41.027
> 
> 标签：php, mysql, codeigniter, duplicates

我在数据库中有许多条目，这些条目分配给我的 php 应用程序中的特定帐户。我需要复制所有 account_id 为 5 的条目，并将重复的条目的 account_id 设置为 6，以便它们可以由 2 个不同的帐户独立编辑。

通常我会抓取所有 account_id 为 5 的条目，然后使用 php 循环遍历它们，为每个条目插入一个新条目，但有 1500 多个条目，我想这不是最好的主意！

有没有办法用 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:33:59.307

```
INSERT INTO table (account_id, column1, column2)
SELECT 6, column1, column2 FROM table WHERE account_id = 5; 
```

您可以[在此处](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)找到有关此的更多信息。

# delphi - 在运行时创建对象

> ID：14518930
> 
> 赞同：1
> 
> 时间：2013-01-25T09:31:50.480
> 
> 标签：delphi, delphi-xe2

假设我有一个名为 TMachine 的类，我目前像这样创建 1 个类

```
 Machine := MachineShape.TMachine.create(self); 
```

但我需要多于 1 个，永远不确定我需要多少个，因为它取决于当时数据库中的机器数量，不应该超过 20 个。所以我知道我需要在 var 部分中使用某种类型的数组。目前我有

```
procedure TFLayout1.GetClick(Sender: TObject);
var
  machine : TMachine;
begin
 .....

  //gets number of machines in total
  while not fdeptlayout.ADOQuery1.Eof do
    begin
      fdb.count := fdb.count+1;
      fdeptlayout.ADOQuery1.Next;
    end;

  //restarts back at first query
  fdeptlayout.ADOQuery1.First;

  //creates the shape
  while not fdeptlayout.ADOQuery1.Eof do
    begin
        machine := MachineShape.TMachine.Create(self);
        machine.PlaceShape(44,44,'CM402','first','123/33/123');
        fdeptlayout.ADOQuery1.Next;
    end;
end; 
```

目前这将在表格上放置 1 台机器`"Machine"`。我需要它来放置“Machine1”“Machine2”......查询中有多少。因此`"machine"`需要如何替换为数组？一切都是在运行时创建的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:40:36.523

最简单的是使用列表。使用来自 的通用列表`Generics.Collections`。

```
FList: TList<TMachine>; 
```

根据您的需要，您可以将列表声明为您的一个类中的一个字段。您要控制和管理所有机器的类。

像这样创建它：

```
FList := TList<TMachine>.Create; 
```

将新成员添加到列表中，如下所示：

```
FList.Add(Machine); 
```

像这样遍历列表：

```
for Machine in FList do
  Machine.DoSomething; 
```

* * *

如果您希望该列表控制机器的生命周期，请`TObjectList<T>`改用。

```
FList: TList<TMachine>;
....
FList := TObjectList<TMachine>.Create; 
```

然后当您从列表中删除项目、清除列表、销毁列表等时，机器也会被销毁。

Delphi 文档包含一个[说明`TObjectList<T>`](http://docwiki.embarcadero.com/CodeExamples/XE2/en/Generics_Collections_TObjectList_%28Delphi%29).

* * *

因此，为了清楚起见，您的`while`循环将如下所示：

```
while not fdeptlayout.ADOQuery1.Eof do
begin
  machine := MachineShape.TMachine.Create(self);
  FList.Add(machine);
  machine.PlaceShape(44,44,'CM402','first','123/33/123');
  fdeptlayout.ADOQuery1.Next;
end; 
```

然后在代码中的某个其他点，当您需要遍历所有机器时，请使用`for`上面循环中的代码。

* * *

当然，这可能都是一个完全的红鲱鱼。也许您永远不需要在问题的例程之外引用您的机器对象。在这种情况下，您根本不需要列表，并且问题中的代码已经完全足够了。

我注意到你说：

> 目前，这将在表单上放置一台机器。

事实并非如此。while 循环将为循环的每次迭代创建一个机器对象`while`。您重用局部变量的事实`machine`并没有改变这一点。每次循环您调用的循环`TMachine.Create`，因此每次迭代都会创建一个新实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:41:27.463

您可以将机器放在 TObjectList

在你的类定义中添加

```
FMachines: TObjectList<TMachine>; 
```

然后在您的 FormCreate 中：

```
FMachines:= TObjectList<TMachine>.Create; 
```

在 FormDestroy 中：

```
FMachines.Free; 
```

在您的 GetClick 方法中，将创建的机器添加到列表中，如下所示：

```
machine := MachineShape.TMachine.Create(self);
FMachines.Add(machine); 
```

You can then refer to the created machines by accessing the FMachines list.

# symfony - 检索模板上的当前页面，Symfony 2

> ID：14518932
> 
> 赞同：0
> 
> 时间：2013-01-25T09:31:57.583
> 
> 标签：symfony

目前我正在使用：

```
$route=$app->getRequest()->get('_route'); 
```

基于我的routing.yml：

```
done_punctis_brand_stats:
    pattern: /brand/{id}/stats/{type}
    defaults: {_controller: DonePunctisBundle:Brand:stats, type: 'general'}
    requirements:
        _method: GET
        id: \d+ #digit [0-9] 
```

所以考虑到这一点，路线会回显：**done_punctis_brand_stats**

问题是如果用户在 /brand/1/stats/general 或 /brand/1/stats/othervalue 输出将始终 **done_punctis_brand_stats**，我怎么知道区别（在 php 模板上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:40:31.603

它`{{ app.request.requesturi }}`在树枝中，所以`$route=$app->getRequest()->getRequestUri();`在您的 PHP 模板中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:41:02.533

尝试 ：

```
$app->getRequest()->getRequestUri(); 
```

# c# - 如何修改此代码以突出显示 Color.ForestGreen 中的 #703919，而不仅仅是 #？

> ID：14518937
> 
> 赞同：1
> 
> 时间：2013-01-25T09:32:21.203
> 
> 标签：c#, .net, c#-4.0

我正在制作一个小工具。下面的代码在大型 RichTextBox 更新时触发。

我如何修改此代码以突出显示`#703919`，`Color.ForestGreen`而不仅仅是`#`？

我想保持代码尽可能简洁。

![CSSGM](../Images/73b12045634eb66522107681b33755aa.png)

```
private void CSS_TextChanged(object sender, EventArgs e)
{
    CSS.Select(0, CSS.TextLength);
    CSS.SelectionColor = CSS.ForeColor;

    string[] Keywords = {"background", "filter", ":", "#"};
    Color[] Colours = {Color.DarkBlue, Color.DarkBlue, Color.Magenta, Color.ForestGreen};

    for(int i = 0; i < Keywords.Length; i++)
    {
        int Pointer = 0;
        int Index = 0;
        while(true)
        {
            Index = CSS.Text.IndexOf(Keywords[i], Pointer);
            if(Index == -1)
                break;
            CSS.Select(Index, Keywords[i].Length);
            CSS.SelectionColor = Colours[i];
            Pointer = Index + Keywords[i].Length;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:36:53.020

这取决于你想变得多灵活。

一个简单的解决方案是不从关键字中获取突出显示区域的长度，而是从其他来源获取：

```
var highlightLengthOverrides = new Dictionary<string, int> { { "#", 7 } };

int highlightLength;
if(!highlightLengthOverrides.TryGetValue(Keywords[i], out highlightLength))
    highlightLength = Keywords[i].Length;
CSS.Select(Index, highlightLength);
CSS.SelectionColor = Colours[i];
Pointer = Index + highlightLength; 
```

请注意，这确实是一个非常简单的实现。只有在井号后面总是正好有 6 位数字时，它才有效。

其他选择是：

*   编写或使用成熟的分词器
*   使用正则表达式作为关键字。

# php - Zend Framework 在外部脚本中加载

> ID：14518939
> 
> 赞同：1
> 
> 时间：2013-01-25T09:32:30.657
> 
> 标签：php, zend-framework

是否可以在某些外部脚本或系统中加载 Zend Framework？

例如，我想在我的 CMS 中使用 ZF 的全部功能。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:27:24.597

可以在任何 PHP 应用程序中包含 ZF。正如 ZF 团队在手册中所述，ZF 组件是松散耦合的，因此您只能在应用程序中使用库的某些部分。

我通常做的是将 ZF 的自动加载器堆叠到 spl_autoloader 中，并且只向 ZF 自动加载器注册“Zend_”名称空间。这样，如果您的 CMS 的自动加载器未能包含您正在使用的 ZF 类，它将继续使用 Zend 的自动加载器来完成这项工作。

如果您想在您的 CMS 中使用 ZF 的 MVC 来处理某些请求，这也是可能的，尽管有点棘手。

我确实在 Joomla 2.5 组件中包含过一次 ZF。在大多数 CMS 中，任何模块、组件、插件等都是通过包含一个文件来执行的，并且该文件中的任何内容都将继续执行。

使用 Joomla，我只需将 Zend_Controller_Front 发送到上述文件中即可。我在 preDispatch 钩子（方法）上将一个插件（扩展 Zend_Controller_Plugin_Abstract）附加到前端控制器，并在该钩子中手动设置控制器、操作和模块（如果有），从 php 的 $_GET 或 $_POST 中获取信息，具体取决于您的 CMS 如何处理请求。

在脚本开头设置 ZF 自动加载器并在最后取消设置将完成包含 ZF 工作所需的文件的工作。

不要忘记在 PHP 的包含路径中包含 ZF。

希望这个混乱的帖子有帮助:)

# java - 无法从 Windows 任务计划程序运行 Java GUI 应用程序

> ID：14518940
> 
> 赞同：1
> 
> 时间：2013-01-25T09:32:31.453
> 
> 标签：java, windows, swing, joptionpane, event-dispatch-thread

我正在编写一个 Java 程序来检查我的网站的一些统计数据。如果该站点存在一些问题，该程序应指出警报。由于我使用的是 Windows Vista 机器，我认为最简单的方法是从 Windows 调度程序创建一个任务，该任务每 n 分钟触发一次。
奇怪的是，任务计划程序无法显示 Java GUI。该程序只是停止（使用 java 或 javaw 运行）并且不显示任何内容。
这是一个最小的例子：

```
import javax.swing.JOptionPane;
public class Test {
public static void main(String[] args) {
    try {
        JOptionPane.showMessageDialog(null, "Message text", "Title", JOptionPane.ERROR_MESSAGE);
        System.out.println("Done");

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

我也尝试过使用其他一些 Swing 组件，但它没有显示任何内容。似乎它缺少图形界面。有什么线索吗？谢谢马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:46:13.367

有两个问题

1.  最重要的是，[JOptionPane](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)阻止代码执行，直到来自 JOptionPane 的事件被触发，这很简单，这是基本属性块代码执行并等待用户操作

2.  [JOptionPane 必须从 Initial Thread 调用](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)，否则什么也不会发生，屏幕上不可见，[或者 ( `MetalLookAndFeel`) 只有没有内容的 Toolbar 在屏幕上可见（来自 Native OS）](https://stackoverflow.com/a/12643642/714968)

# java - 图像序列化大约是 30 倍大小

> ID：14518944
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:32:50.123
> 
> 标签：java, image, serialization

我正在尝试序列化一个包含一个`ImageIcon`（实现可序列化）的对象。该图像是 ubuntu 的示例图像，大小约为 320k。

```
public static void write() {
    ImageIcon aww = null;
    aww = new ImageIcon("/home/javi/PRUEBA/img.jpg");
    ab hue = new ab("hola", "adios", 10, 1111, aww);
    ObjectOutputStream oos = null;
    FileOutputStream a = null;
    try {
        a = new FileOutputStream("/home/javi/PRUEBA/mapa.atd");
        oos = new ObjectOutputStream(a);
        oos.writeObject(hue);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            a.close();
            oos.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

class ab implements Serializable {
    private static final long serialVersionUID = -4377893644898458425L;

    String asdf;
    String b;
    int w;
    Integer ab;
    ImageIcon a;
    public ab(String asdf, String b, int w, Integer ab, ImageIcon ww) {
        super();
        this.asdf = asdf;
        this.b = b;
        this.w = w;
        this.ab = ab;
        a = ww;
    }
} 
```

这是我正在使用的代码，我不知道为什么图像约为320k而输出文件约为10Mb。如果需要，我可以上传 img ( `/usr/share/unity-2d/warty-final-ubuntu.jpg` )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:38:07.810

存储在 ImageIcon 中的图像数据可能是一个简单的、未压缩的等效位图。可能是整数数组。

如果你想有效地使用java序列化，你必须围绕这个类编写一个包装器并将原始二进制文件存储在内存中并将ImageIcon标记为`transient`- 并在反序列化后需要时从数据中重建ImageIcon。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:37:13.720

有什么问题。我认为的序列化方法`ImageIcon`是将图像视为未压缩的位图。并且未压缩的位图比压缩的要大得多。

# jquery - 多次调用同一个 Jquery 文件

> ID：14518945
> 
> 赞同：0
> 
> 时间：2013-01-25T09:32:53.397
> 
> 标签：jquery

我有多个在我的网站上使用 jquery 的实例（如图像滑块和导航），但如果我不多次调用 jquery，它们将不起作用。

例如，除非我两次调用脚本，否则下面的 2 个片段将不起作用。请帮忙。（我的页面上有更多的 jquery 调用以及调用不同的库）我不能只调用最新的库一次并完成它吗？我试过了，还是不行。

```
<!--menu -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/newnav.css" />
<script type="text/javascript" src="js/navdoublecolumn.js"></script>
<script>
<!--
ddmegamenu.docinit({
    menuid:'solidmenu',
    dur:0, 
    easing:'easeInOutCirc' //<--no comma after last setting
})
// -->
</script>

<!-- slide -->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="js/jquery.tabSlideOut.v1.3.js"></script>

<script type="text/javascript">
$(function(){
    $('.slideout1').tabSlideOut({
        tabHandle: '.slideouthandle1',             //class of the element that will become your tab
        pathToTabImage: 'images/slideouttab_chat.jpg',//path to the image for the tab //Optionally can be set using css
        imageHeight: '150px',                     //height of tab image           //Optionally can be set using css
        imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
        tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
        speed: 200,                               //speed of animation
        action: 'click',                          //options: 'click' or 'hover', action to trigger animation
        topPos: '215px',                          //position from the top/ use if tabLocation is left or right
        leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
        fixedPosition: true                       //options: true makes it stick(fixed position) on scroll
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:41:32.633

我预计其中的某些`navdoublecolumn.js`内容会覆盖或以其他方式破坏 jQuery 功能。通过第二次包含 jQuery，您正在重新定义方法/变量，从而恢复`navdoublecolumn.js`已损坏的功能。

通过查看删除第二个 jQuery 包含时得到的 javascript 控制台错误输出，您可能会了解发生了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:23:21.713

当你`jQuery.noconflict()`使用这个：

```
jQuery(function($){
    $('.slideout1').tabSlideOut({
        tabHandle: '.slideouthandle1',             //class of the element that will become your tab
        pathToTabImage: 'images/slideouttab_chat.jpg',//path to the image for the tab //Optionally can be set using css
        imageHeight: '150px',                     //height of tab image           //Optionally can be set using css
        imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
        tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
        speed: 200,                               //speed of animation
        action: 'click',                          //options: 'click' or 'hover', action to trigger animation
        topPos: '215px',                          //position from the top/ use if tabLocation is left or right
        leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
        fixedPosition: true                       //options: true makes it stick(fixed position) on scroll
    });

}); 
```

# php - Symfony2：将 APC 更改为 xcache

> ID：14518949
> 
> 赞同：1
> 
> 时间：2013-01-25T09:33:10.063
> 
> 标签：php, symfony, symfony-2.1, apc, xcache

因为 APC 中的一个错误，我不得不使用另一个缓存驱动器。我删除了 APC 并安装了 xcache。config.php 说*你的配置看起来很适合运行 Symfony*。

我应要求收到以下错误：

```
PHP Fatal error:  Uncaught exception 'RuntimeException' with message 'Unable to use ApcClassLoader as APC is not enabled.' in /var/.../app/bootstrap.php.cache:1039
Stack trace:
#0 /var/.../web/app.php(11): Symfony\\Component\\ClassLoader\\ApcClassLoader->__construct('sf2', Object(Composer\\Autoload\\ClassLoader))
#1 {main}
thrown in /var/...app/bootstrap.php.cache on line 1039 
```

我如何告诉 Symfony 使用 xcache 而不是 APC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T14:13:50.790

有同样的问题，我是这样做的：

在第 12 行替换

```
$loader = new ApcClassLoader('sf2', $loader); 
```

和

```
$loader = new XcacheClassLoader('sf2', $loader); 
```

（并定义正确的使用声明）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-07T08:37:25.993

替换并添加后`$loader = new ApcClassLoader('tcs_beta_prod', $loader);`我 `$loader = new XcacheClassLoader('tcs_beta_prod', $loader);`有`use Symfony\Component\ClassLoader\XcacheClassLoader;`这个错误`Fatal error: Class 'Symfony\Component\ClassLoader\XcacheClassLoader' not found in C:\xampp\htdocs\edt\web\app.php on line 11`。这是我的 app.php

```
<?php

use Symfony\Component\ClassLoader\XcacheClassLoader;
use Symfony\Component\HttpFoundation\Request;

$loader = require_once __DIR__.'/../app/bootstrap.php.cache';

// Use APC for autoloading to improve performance
// Change 'sf2' by the prefix you want in order to prevent key conflict with another application

$loader = new XcacheClassLoader('tcs_beta_prod', $loader);
$loader->register(true);

require_once __DIR__.'/../app/AppKernel.php';
require_once __DIR__.'/../app/AppCache.php';

$kernel = new AppKernel('prod', false);
$kernel->loadClassCache();
$kernel = new AppCache($kernel);
$request = Request::createFromGlobals();
Request::setTrustedProxies(array($request->server->get('REMOTE_ADDR'))); // per suggestion from Farid / Patrick to deal with ELB proxying
$response = $kernel->handle($request);
$response->send();
$kernel->terminate($request, $response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T09:13:19.400

您没有为 XCache 定义 use 语句：

```
use Symfony\Component\ClassLoader\XcacheClassLoader;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\ClassLoader\XcacheClassLoader; 
```

# ios - IOS 5.0 和 6.0 中 MFMessageComposeViewController 的不同行为

> ID：14518950
> 
> 赞同：0
> 
> 时间：2013-01-25T09:33:12.857
> 
> 标签：ios, ipad, imessage

我面临 2 个`MFMessageComposeViewController`问题`iOS 6.0`

*   当`iOS 6.0`我们用 关闭键盘时`cursor in the message body text view`，消息正文文本视图消失。但是当我们对 进行相同的操作时`To text field`，它工作正常。它在 iOS 5.0 中运行良好。这个问题似乎只在`iOS 6.0`.

*   关闭键盘时，顶部会出现一个透明间隙`message body text view`（见下图）。

![在此处输入图像描述](../Images/3b61c5326337da2dcbefeed3c5232eb7.png)

![在此处输入图像描述](../Images/2119150cf7ac0b79648556a9789acbd1.png)

# mysql - MySQL 数据的聚合平均值失败

> ID：14518951
> 
> 赞同：2
> 
> 时间：2013-01-25T09:33:12.607
> 
> 标签：mysql, sql

我有一张表格，里面装满了售出汽车的数据。

我想获得每日平均值，所以我正在使用聚合和以下函数。

```
SELECT
        DAYOFMONTH(TIMESTAMP) AS DAY,
        MONTH(TIMESTAMP) AS MONTH,
        AVG(number_sold) AS sold,
        AVG(amount_earned) AS earned,
        AVG(wages_spent) AS wages
FROM cardata
GROUP BY DAYOFMONTH(TIMESTAMP)
ORDER BY TIMESTAMP DESC
LIMIT 0, 12; 
```

我应该得到 12 行，每天 1 行。12 行返回，但问题是每天获得一行，即 2 月我只得到第 5 天和第 8 天。

我的陈述有问题吗？

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:34:00.997

我相信 GROUPBY 不在这里。

尝试：

```
GROUP BY DAYOFMONTH( TIMESTAMP ) , MONTH( TIMESTAMP ) 
```

这应该按照您的需要对数据进行分组。

或者，您可以执行以下操作：

```
SELECT
   DATE_FORMAT ( TIMESTAMP, '%m/%d' ) AS DAY,
   ...
FROM cardata
GROUP BY DAY
ORDER BY TIMESTAMP DESC
LIMIT 0, 12 
```

但是修复 GROUPBY 是应该修复它的主要内容。

# database - 在多个数据库 postgres 中更改表

> ID：14518952
> 
> 赞同：0
> 
> 时间：2013-01-25T09:33:14.877
> 
> 标签：database, postgresql, shell, alter-table

我有多个数据库，每个都有表“身份验证”。在每个表中，我想删除一个约束并将其替换为一个新约束。如果我不必手动执行此操作，那就太好了。

```
ALTER TABLE authentication DROP CONSTRAINT  uk_authentication_01;
ALTER TABLE authentication ADD CONSTRAINT uk_authentication_01 UNIQUE (authenticator, method); 
```

有没有办法用脚本进行批量修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:09:30.263

您可以在 shell 脚本中迭代您的数据库：

```
for db in dbname1 dbname2 dbname3...
do
 psql -d $db -U username << EOF
ALTER TABLE authentication DROP CONSTRAINT  uk_authentication_01;
ALTER TABLE authentication ADD CONSTRAINT uk_authentication_01 UNIQUE (authenticator, method);
EOF
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:41:03.237

我假设所有数据库都在同一台服务器上？如果这是真的，您可以简单地执行 SELECT：

```
SELECT 'SELECT * FROM  dblink_exec(''dbname=' || datname 
         || '''::text, ''ALTER TABLE authentication 
         DROP CONSTRAINT  uk_authentication_01;
         ALTER TABLE authentication ADD CONSTRAINT uk_authentication_01 
         UNIQUE (authenticator, method);''::text);'
FROM pg_database WHERE datistemplate = false; 
```

然后复制此查询的结果并运行它。

你需要那个 dblink 扩展：

```
CREATE EXTENSION dblink; 
```

# android - 在 linux 上使用 calabash-android 时出错

> ID：14518953
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:33:25.717
> 
> 标签：android, calabash

当我尝试运行此命令时出现此错误：“calabash-android run AndroidPdfViewer_1_0_1.apk”

```
 No test server found for this combination of app and calabash version. Recreating test           server.
  sh: 1: jarsigner: not found
  jarsigner command: jarsigner -sigalg MD5withRSA -digestalg SHA1 -signedjar test_servers/10243e69f88e0cec5718af94160c577f_0.3.8.apk -storepass  -keystore  "/home/avinashkumar_s/.android/debug.keystore" /tmp/d20130125-22494-1fp8e1x/TestServer.apk 
/var/lib/gems/1.8/gems/calabash-android-0.3.8/lib/calabash-android/helpers.rb:74:in `sign_apk': Could not sign app (/tmp/d20130125-22494-1fp8e1x/TestServer.apk (RuntimeError)
from /var/lib/gems/1.8/gems/calabash-android-0.3.8/bin/calabash-android-build.rb:28:in `calabash_build'
from /usr/lib/ruby/1.8/tmpdir.rb:129:in `mktmpdir'
from /var/lib/gems/1.8/gems/calabash-android-0.3.8/bin/calabash-android-build.rb:10:in `calabash_build'
from /var/lib/gems/1.8/gems/calabash-android-0.3.8/bin/calabash-android-run.rb:22:in `calabash_run'
from /var/lib/gems/1.8/gems/calabash-android-0.3.8/bin/calabash-android:51
from /usr/local/bin/calabash-android:19:in `load'
from /usr/local/bin/calabash-android:19 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:35:38.180

尝试在环境变量中设置 Java 路径。

JAVA_HOME -> "C:\Program Files\Java\jdk1.6.0_10"

# javascript - 在 javascript/Jquery 中解密字节数据

> ID：14518958
> 
> 赞同：0
> 
> 时间：2013-01-25T09:33:38.470
> 
> 标签：javascript, compression, gzip

我有一个项目，我在 .cs 文件中使用 gzip 压缩数据并在 html 页面中获取它。这是我的 gzip 代码。

```
public byte[] CustomerList()
    {
        SqlDataAdapter da = new SqlDataAdapter("select CustomerID from CustomerMaster", con);

        DataSet ds = new DataSet();
        da.Fill(ds);
        return CompressData(ds);
    }
    public byte[] CompressData(DataSet ds)
    {
        using (MemoryStream memory = new MemoryStream())
        {
            using (GZipStream gzip = new GZipStream(memory, CompressionMode.Compress))
            {
                var formatter = new BinaryFormatter();
                formatter.Serialize(gzip, ds);
                gzip.Close();
            }

            return memory.ToArray();
        }
    } 
```

我使用 ajax 函数成功地从 html 页面接收到数据。这是我的代码

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {

                    $.ajax({
                        type: "POST",
                        url: "Service1.svc/CustomerList",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        processdata: true,
                        success: function (data) {
                            alert(data.CustomerListResult);
                        },
                        error: function () {
                            alert("Error");
                        }
                    });
                });

</script> 
```

我收到了字节格式的数据。现在我想解密字节数据以获得原始数据。我在这里卡住了。请帮助我如何解密字节以获取原始数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:23.083

最好的解决方案是不压缩数据，而是在 Web 服务器上启用压缩。如果您必须预压缩数据，那么您需要在另一端对其进行解压缩（这不会是世界上最快的事情）。我不知道 C#，但看起来你使用的是标准 gzip；所以你必须要么编写自己的 gzip 库，要么找到一个以前已经制作过的库。一个快速的谷歌发现[了这个](https://github.com/beatgammit/gzip-js)：它适用于 node.js，但你可以将它移植到浏览器中使用。

**tl;dr**让您的网络服务器压缩数据，而不是自己做。

# nlp - 如何在启用 SELinux 的 Linux 机器上安装 brat 注释工具

> ID：14518961
> 
> 赞同：8
> 
> 时间：2013-01-25T09:33:55.100
> 
> 标签：nlp, brat

这是一个自我回答的问题，描述了如何解决在启用 SELinux 的普通 Linux 机器上安装[brat 注释工具](http://brat.nlplab.org/)时出现的问题，该工具用于创建用于 NLP 的注释语料库。这是基于该工具的 1.3 版。

[记录](http://brat.nlplab.org/installation.html)的安装过程包括以下步骤：

1.  将 .tar.gz 文件解压缩到 (Apache) Web 服务器目录中，通常是`/var/www/html`或`$HOME/public_html`
2.  可能将解压缩的目录从重命名为`brat-v1.3_Crunchy_Frog`简单的名称，例如`brat`
3.  进入目录并运行`sudo ./install.sh`
4.  如果Web 服务器 ( `sudo service httpd start`) 尚未运行，请启动它

**问题：**执行此过程时，在浏览器中使用 brat 的任何尝试（通过将其定向到`http://localhost/brat/index.xhtml`失败并在屏幕上显示以下错误消息：

```
Error: ActiongetCollectionInformation failed on error Internal Server Error
Error: Actionwhoami failed on error Internal Server Error
Error: ActionloadConf failed on error Internal Server Error 
```

Apache 错误日志（通常在 中找到`/var/log/httpd/error_log`）也显示错误：

```
(13)Permission denied: exec of '/var/www/html/new/ajax.cgi' failed, referer: http://localhost/new/index.xhtml
Premature end of script headers: ajax.cgi, referer: http://localhost/new/index.xhtml 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:33:55.100

这是由 SELinux 引起的。解决它的一种方法是禁用 SELinux，但一种不太激进的方法是根据 brat 的要求设置访问权限。

问题的根源是：

1.  brat 将可执行脚本（CGI 脚本）、静态文件以及带注释的数据都保存在同一个目录中，该`html`目录
2.  SELinux 默认配置为防止从非 CGI 目录执行 CGI 脚本。仅仅改变 Apache 配置在这里没有帮助
3.  SELinux 还配置为防止 CGI 脚本将数据写入磁盘

要修改 SELinux 配置，您需要授予对特定文件和目录的访问权限，如下所示（在 brat 安装目录中执行此操作）：

```
$> chcon -t httpd_sys_content_t .
$> chcon -t httpd_sys_script_exec_t *.cgi
$> sudo chcon -R -t httpd_sys_script_rw_t work data 
```

（`$>`代表命令提示符。）

第一个命令启用对当前目录的读取访问（有时可能不需要）。第二个命令启用以 CGI 结尾的所有文件的 CGI 脚本执行`.cgi`（这是必要的）。`work`第三个命令启用对and目录的写访问`data`（也是必要的）；每当您将文件或子目录添加到`work`或 `data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-22T10:53:34.520

我有同样的问题。可以通过如下更改`/etc/apache2/apache2.conf`文件来解决它。

```
<Directory /var/www>
    Options Indexes FollowSymLinks
    #AllowOverride Options Indexes FileInfo
    Require all granted
    AddType application/xhtml+xml .xhtml
    AddType font/ttf .ttf
    # For CGI support
    AddHandler cgi-script .cgi
    # Comment out the line above and uncomment the line below for FastCGI
    #AddHandler fastcgi-script fcgi
</Directory>

<Directory /var/www/html>
    Options Indexes FollowSymLinks
    #AllowOverride Options Indexes FileInfo
    Require all granted
    AddType application/xhtml+xml .xhtml
    AddType font/ttf .ttf
    # For CGI support
    AddHandler cgi-script .cgi
    # Comment out the line above and uncomment the line below for FastCGI
    #AddHandler fastcgi-script fcgi
</Directory>

<Directory /var/www/html/brat>
    Options Indexes FollowSymLinks
    AllowOverride Options Indexes FileInfo
    Require all granted
    AddType application/xhtml+xml .xhtml
    AddType font/ttf .ttf
    # For CGI support
    #AddHandler cgi-script .cgi
    # Comment out the line above and uncomment the line below for FastCGI
    AddHandler fastcgi-script fcgi
    # For FastCGI, Single user installs should be fine with anything over 8
    #FastCgiConfig -maxProcesses 8
</Directory> 
```

参考： [小问题](https://github.com/nlplab/brat/issues/1147)

# ios - 方法调配不适用于 NSFileHandle 类

> ID：14518968
> 
> 赞同：0
> 
> 时间：2013-01-25T09:34:22.307
> 
> 标签：ios, objective-c

我有以下代码来进行方法调配：

```
static inline void swizzleMethod(const char *clsName, const char *mthName, const char *clsName2, const char *mthName2) {
    Class cls1 = objc_getClass(clsName);
    SEL sel1 = sel_registerName(mthName);

    Class cls2 = objc_getClass(clsName2);
    SEL sel2 = sel_registerName(mthName2);
    Method mth = class_getInstanceMethod(cls2, sel2);
    IMP imp = method_getImplementation(mth);
    NSLog(@"method type encoding %s", method_getTypeEncoding(mth));

    class_replaceMethod(cls1, sel1, imp, method_getTypeEncoding(mth));
} 
```

我的 VGFileHandle 类：

```
@interface VGFileHandle : NSObject
@end

@implementation VGFileHandle
- (NSData *)readDataToEndOfFile {
    NSLog(@"readDataToEndOfFile");
    return nil;
}
@end 
```

在 main.m 中，我有以下调用：

```
int main(int argc, char *argv[])
{    
    swizzleMethod("NSFileHandle", "readDataToEndOfFile", "VGFileHandle", "readDataToEndOfFile");

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"myFile"];

    NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:filePath];
    NSData *data = [handle readDataToEndOfFile];

    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

正确的，当调用 [handle readDataToEndOfFile] 时，它应该从 VGFileHandle 调用 readDataToEndOfFile 并打印出“readDataToEndOfFile”。但是，在我的测试项目中，方法调配似乎根本没有取代方法实现。[handle readDataToEndOfFile] 仍然执行原始实现。

我想知道可能是什么原因。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:00:23.580

不看 NSFileHandle 的实现，是无法确定的。

很可能是因为 NSFileHandle 是作为类集群实现的，因此，您实际上没有抽象公共类的实例。相反，您有一些私有子类的实例（可能会因看似随机的、面向实现细节的、跨操作系统版本或配置的原因而改变）。

**Swizzling 方法是糟糕的代码。私有系统类中的混乱方法是更糟糕的代码，并且几乎肯定会导致调试和支持痛苦。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:43:16.063

[NSFileHandle fileHandleForReadingAtPath:filePath] 将返回 NSConcreteFileHandle 的实例，而不是 NSFileHandle。

您需要改为调用它：

```
swizzleMethod("NSConcreteFileHandle", "readDataToEndOfFile", "VGFileHandle", "readDataToEndOfFile"); 
```

# actionscript-3 - Flash AS3 处理 GET / POST 请求？

> ID：14518969
> 
> 赞同：1
> 
> 时间：2013-01-25T09:34:35.583
> 
> 标签：actionscript-3, flash, get

为什么这对我不起作用？

我需要的只是获取`index.php?mykey=123` `mykey`和`123`从 url

我只需要最短版本的波纹管即可获得上述信息并将其放入文本框中。

```
var dataSet:String;

var variables:URLVariables = new URLVariables("country_id=179");
var request:URLRequest = new URLRequest();
request.url = "http://admin.dev.ts.xxx.com/ajax/ttt_ttt.php";
request.method = URLRequestMethod.POST;
request.data = variables;

var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.VARIABLES;
loader.addEventListener(Event.COMPLETE, completeHandler);

try {
    loader.load(request);
} catch (error:Error) {
    trace("Unable to load URL");
}

function completeHandler(event:Event):void {
    trace(event.target.data.welcomeMessage);

    dataSet = loader.data;
    trace(dataSet);
    textbox.text = trace(dataSet);
} 
```

如果我调试，我也会收到一些错误

```
[SWF] E:\get_post.swf - 3495 bytes after decompression
Error #2044: Unhandled ioError:. text=Error #2032: Stream Error. URL: http://admin.dev.ts.xxx.com/ajax/ttt_ttt.php
    at get_post_fla::MainTimeline/frame1()[get_post_fla.MainTimeline::frame1:10] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:59:05.763

我认为这是因为您的网址不正确。我更经常遇到那个流错误。而且几乎总是因为 URL 错误。

# python - 使用 scipy.signal.spectral.lombscargle 的正确方法

> ID：14518970
> 
> 赞同：7
> 
> 时间：2013-01-25T09:34:38.220
> 
> 标签：python, numpy, scipy, signal-processing, scientific-computing

我指的是以下帖子：[使用 scipy.signal.spectral.lombscargle 进行经期发现](https://stackoverflow.com/questions/13349181/using-scipy-signal-spectral-lombscargle-for-period-discovery)

我意识到在某些情况下给出的答案是正确的。

## sin(x) 的频率，即 1/(2* pi)

```
# imports the numerical array and scientific computing packages
import numpy as np
import scipy as sp
from scipy.signal import spectral

# generates 100 evenly spaced points between 1 and 1000
time = np.linspace(1, 1000, 100)

# computes the sine value of each of those points
mags = np.sin(time)

# scales the sine values so that the mean is 0 and the variance is 1 (the documentation specifies that this must be done)
scaled_mags = (mags-mags.mean())/mags.std()

# generates 1000 frequencies between 0.01 and 1
freqs = np.linspace(0.01, 1, 1000)

# computes the Lomb Scargle Periodogram of the time and scaled magnitudes using each frequency as a guess
periodogram = spectral.lombscargle(time, scaled_mags, freqs)

# returns the inverse of the frequence (i.e. the period) of the largest periodogram value
print "1/2pi = " + str(1/(2*np.pi))
print "Frequency = " + str(freqs[np.argmax(periodogram)] / 2.0 / np.pi) 
```

打印以下内容。没问题。我猜。我们将`lombscargle`结果除以的原因`2pi`是，我们需要将弧度转换为频率。(f = 弧度 / 2pi)

```
1/2pi = 0.159154943092
Frequency = 0.159154943092 
```

但是，对于以下情况，事情似乎出了问题。

## sin(2x) 的频率，即 1/(pi)

```
# imports the numerical array and scientific computing packages
import numpy as np
import scipy as sp
from scipy.signal import spectral

# generates 100 evenly spaced points between 1 and 1000
time = np.linspace(1, 1000, 100)

# computes the sine value of each of those points
mags = np.sin(2 * time)

# scales the sine values so that the mean is 0 and the variance is 1 (the documentation specifies that this must be done)
scaled_mags = (mags-mags.mean())/mags.std()

# generates 1000 frequencies between 0.01 and 1
freqs = np.linspace(0.01, 1, 1000)

# computes the Lomb Scargle Periodogram of the time and scaled magnitudes using each frequency as a guess
periodogram = spectral.lombscargle(time, scaled_mags, freqs)

# returns the inverse of the frequence (i.e. the period) of the largest periodogram value
print "1/pi = " + str(1/(np.pi))
print "Frequency = " + str(freqs[np.argmax(periodogram)] / 2.0 / np.pi) 
```

正在打印以下内容。

```
1/pi = 0.318309886184
Frequency = 0.0780862900972 
```

似乎不正确。我错过了什么步骤？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T17:23:48.743

您理所当然地期望峰值出现在`1 / pi`，但是您正在测试的最高频率是`1 / 2 / pi`……尝试以下单个更改：

```
freqs = linspace(0.01, 3, 3000) 
```

现在输出是预期的：

```
1/pi = 0.318309886184
Frequency = 0.318311478264 
```

但是请注意，如果您`periodogram`针对 进行绘图`freqs / 2 / np.pi`，则图形如下所示：

![在此处输入图像描述](../Images/e3b05cd5324d696f5e5f832ff58e3e00.png)

所以对于更复杂的信号，你不能仅仅依靠寻找`max`周期图来找到主频率，因为谐波可能会欺骗你。

# asp.net - 如何将会话值推送到不同 aspx 页面中的文本字段

> ID：14518971
> 
> 赞同：0
> 
> 时间：2013-01-25T09:34:38.300
> 
> 标签：asp.net, vb.net, visual-studio-2008

您好，我有 2 个不同的 aspx 页面。第 1 页是带有文本字段的主页。第 2 页是另一个页面，我可以添加成员，并且它也在第 1 页的框架中。

在第 2 页中，我计算成员并将其保存到会话中：

```
 Dim anzahlExterneTeilnehmer As Integer = BookITVbSQL.SQLrunScalarBookit(externeTeilnehmerSQL)

    Session("anzahlExterneTeilnehmer") = anzahlExterneTeilnehmer 
```

第 1 页中的文本字段应该实时显示文本字段中的结果。

这可能吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:56:49.463

这是您可以在 page1 的 Page_Load 中执行此操作的方法：

```
If Session("anzahlExterneTeilnehmer") IsNot Nothing Then
    TextBox1.Text = Session("anzahlExterneTeilnehmer").ToString()
End If 
```

每次打开 page1 时，如果存在会话值，则会将其复制到文本框的文本属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:52:29.740

你可以做

第 2 页后面的代码：

```
 Dim anzahlExterneTeilnehmer As Integer =       BookITVbSQL.SQLrunScalarBookit(externeTeilnehmerSQL)

  Session("anzahlExterneTeilnehmer") = anzahlExterneTeilnehmer 
```

第 1 页后面的代码：

```
If Session("anzahlExterneTeilnehmer") Is Nothing Then
    'Session is not loaded on page 2
Else
    ' Session is loaded on page 2
     txtTextfield.Text = Session("anzahlExterneTeilnehmer").ToString
End If 
```

问候

# opengl - 纹理 Alpha 通道在 opengl 中不起作用

> ID：14518975
> 
> 赞同：3
> 
> 时间：2013-01-25T09:35:11.533
> 
> 标签：opengl, textures, alpha

如何使用带有 Alpha 通道的图像？从现在开始我已经尝试过这个：

```
glTexImage2D(GL_TEXTURE_2D,
             0,
             GL_RGBA,
             width, height,
             0,      
             GL_BGRA,
             GL_UNSIGNED_BYTE,
             bits); 
```

使用这个 opengl 命令：

```
glBindTexture(GL_TEXTURE_2D, texgun5);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glColor3f(1.0f, 1.0f, 1.0f);
glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glBegin(GL_QUADS);
        glTexCoord2f(0.0, 0.0);
        glVertex3f(gun5[0], gun5[1], gun5[2]);
        glTexCoord2f(1.0, 0.0);
        glVertex3f(gun5[3], gun5[4], gun5[5]);
        glTexCoord2f(1.0, 1.0);
        glVertex3f(gun5[6], gun5[7], gun5[8]);
        glTexCoord2f(0.0, 1.0);
        glVertex3f(gun5[9], gun5[10], gun5[11]);
    glEnd();
glDisable(GL_BLEND); 
```

我使用的是用 Freeimage 加载的 png 图像，但是透明像素都是黑色的，错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:49:09.073

我认为您忘记在纹理环境中指定混合。在你的 glTexParameteri 调用之后插入这个：

```
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-09T18:34:50.747

纹理已正确加载，但未显示。使用`glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);`而不是`glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);` 如果这还不够，请尝试`glDepthMask(GL_FALSE);`查看您是否至少具有 alpha 值。如果这还不够，请尝试

```
glEnable( GL_ALPHA_TEST );
glAlphaFunc( GL_NOTEQUAL, 0.0 ); 
```

在你的初始化函数中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:05:28.660

透明像素是白色的，因为您指定的颜色是白色。根据格式`GL_DECAL`参考，`RGBA`此处应用的公式是`Cp * (1- As) + Cs*As`，现在当您的纹理完全透明时，您`As`将变为`0`最终颜色值等于`Cp`您的四边形（白色）的颜色。

我认为在这种情况下，您应该使用将四边形的 alpha 设置为零`glColor4f(1.0f, 1.0f, 1.0f, 0.0f)`

# wso2esb - WSO2 调出调解器 - 重复故障触发“等待连接超时”

> ID：14518981
> 
> 赞同：0
> 
> 时间：2013-01-25T09:35:23.653
> 
> 标签：wso2esb

我们在 ESB 4.5.1 中遇到了 WSO2 标注调解器的问题。

假设一个简单的代理，如：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="EchoWrapper" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <callout serviceURL="http://[MY_HOSTNAME]:8280/services/echo?wsdl" action="urn:echoInt">
            <source xmlns:ns="http://org.apache.synapse/xsd" xpath="$body/*[1]"/>
            <target key="calloutBody"/>
         </callout>
         <property name="RESPONSE" value="true" scope="default" type="STRING"/>
         <header name="To" value="http://www.w3.org/2005/08/addressing/anonymous"/>
         <log level="full"/>
         <send/>
      </inSequence>
   </target>
   <publishWSDL uri="http://[MY_HOSTNAME]/services/echo?wsdl"/>
   <description></description>
</proxy> 
```

..如果我犯了一个错误，即传递一个需要int的字符串，我将得到一个立即的错误响应，一个缓慢的错误响应，然后端点将完全不活动，即使对于有效消息也是如此。在日志中，我们看到：

org.apache.commons.httpclient.ConnectionPoolTimeoutException：在 org.apache.commons.httpclient.MultiThreadedHttpConnectionManager.getConnectionWithTimeout（MultiThreadedHttpConnectionManager.java： 416) 在 org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:153) 在 org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397) ...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:42:01.843

似乎此问题已在其他地方报告（[https://wso2.org/jira/browse/ESBJAVA-922](https://wso2.org/jira/browse/ESBJAVA-922)）。发生的情况是，当抛出异常时连接没有被清理，这实际上意味着这个版本的 callout mediator 在收到错误或超时时实际上是无用的。

上面的链接中提供了有关如何解决此问题的详细信息（我想说这非常关键），只需添加一行以清理 catch 块中的连接即可。

# sql-server - SQL Server 数据库的安全问题

> ID：14518982
> 
> 赞同：1
> 
> 时间：2013-01-25T09:35:28.963
> 
> 标签：sql-server

我在一个文件夹中有一个 SQL Server DB，它附加到我的 SQL Server 的 SQLEXPRESS 实例。我想知道这个数据库的安全性是什么。我尝试复制该文件，它可以轻松复制到任何文件夹，任何人都可以将其附加到 SQL 并查看其中包含的数据。

请告知如何保护它不被未经授权的人复制和附加？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-23T21:03:47.537

如果您的服务器得到适当保护，未经授权的人应该无法看到文件系统。
你不能复制你看不到的东西。

当然，您的用户应该能够[通过使用服务器名称、数据库名称和某种身份验证](http://www.connectionstrings.com/sql-server/)来连接到数据库。

**这是您的用户应该拥有的对该服务器的唯一访问权限。**

只有管​​理员应该能够：

*   访问服务器的文件系统，以便他们甚至可以看到实际的数据库文件
*   可以物理访问实际的硬件服务器*（例如，其他人无法插入 USB 驱动器）*

# java - 为什么清除缓存后会话结束

> ID：14518983
> 
> 赞同：0
> 
> 时间：2013-01-25T09:35:29.863
> 
> 标签：java, session, browser-cache

为什么清除缓存后会话丢失或结束。虽然在服务器上提到了会话。我是 Java 开发人员，我从`HttpServletRequest`对象获得了会话。

我们在服务器端管理会话。那么它与浏览器和客户端有什么关系呢？为什么清除缓存后我们的网站会退出？

我用我的gmail帐户尝试过。当我关闭浏览器并再次打开 gmail 或清除缓存时，它显示我已注销。我做了谷歌但无法得到令人满意的答案。任何人都可以清除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:38:51.177

跟踪会话的标准机制是 cookie。清除浏览器的缓存，因此也清除 cookie，将导致在发出请求时不会将会话 ID 发送到服务器，因此它别无选择，只能开始新的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:37:41.423

您的服务器端框架使用客户端计算机上的 cookie 来跟踪会话。当它消失时，它会丢失会话上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:38:36.477

当您说“缓存已清除”时，我假设您正在谈论您的浏览器缓存。

如果是这样，您在清除缓存时正在做的事情之一就是删除您访问的网站设置的所有[cookie](http://en.wikipedia.org/wiki/HTTP_cookie)。cookie 是网站（例如 GMail）用来确定您与之前以“Abhendra Singh”身份登录的同一个人的标识符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T09:39:14.010

您在服务器上的 Session 对象只是表示。会话信息默认由浏览器中的 cookie 维护，cookie 名为`JSESSIONID`. [您可以在这里](https://stackoverflow.com/questions/1700390/best-option-for-session-management-in-java)找到更多信息，请参阅 BalusC 的答案。

如果在浏览器上禁用 cookie，则`JSESSIONID`必须将其作为参数附加到 URL。这意味着在重定向的情况下，您必须调用[HttpServletResponse#encodeRedirectURL](http://java.sun.com/javaee/5/docs/api/javax/servlet/http/HttpServletResponse.html#encodeRedirectURL%28java.lang.String%29)或使用`c:url`标签作为页面中的链接。

# android - 使用 MainActivity.this 是否安全

> ID：14518989
> 
> 赞同：0
> 
> 时间：2013-01-25T09:35:45.320
> 
> 标签：android

`MainActivity.this`开始新课程时在匿名课程中使用是否安全`Activity`，请检查下面的代码。我曾经创建一个 init`Activity`类型的变量，但这种方法对我来说看起来更好。

问题是，使用它**安全**吗？

```
button.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        startActivity(new Intent(MainActivity.this, SomeOtherActivity.class));
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:32.183

是的，这是从内部类中引用当前活动实例的标准方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:42:51.723

当然它是安全的，您可以在 API 演示和示例代码中看到这一点。它工作正常我从来没有遇到任何问题。

# c# - 来自 2 个列表的不同财产项目

> ID：14518993
> 
> 赞同：0
> 
> 时间：2013-01-25T09:36:06.053
> 
> 标签：c#, linq-to-objects

我有一个`Person`看起来像这样的类：

```
Person1: Id=1, Name="Test1"
Person2: Id=2, Name="Test2"
Person3: Id=3, Name="Test3" 
```

还有一个`IEnumerable<int>`具有唯一`Person`ID 的：

```
var personIds = new PersonRepository().GetAll().Select(x => x.Id); 
```

我需要一个列表，列出`Person`.id 文件中不存在 id 的位置`IEnumerable<int>`。

这是我的许多尝试之一：

```
from n in personIds 
from x in Person
where x.Id != n
select x; 
```

我只是不断取回所有内容，包括`personIds`.

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:38:20.207

```
var results = Persons.Where(p => !personIds.Contains(p.Id)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T09:41:39.173

```
from n in Persons 
where !Persons.Any(c=>personIds.Contains(c.Id));
select n 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:43:51.520

好的，

它应该是这样的，

```
var allButExclusions =
    PersonRepository.GetAll().Where(p => !exclusions.Contains(p.Id)); 
```

但是，如何导出所有`Person`s 的列表或`Id`要排除的 s 的列表并不明显。

# android - 从Android分享到Facebook：让帖子同时出现在用户墙和页面墙上

> ID：14518997
> 
> 赞同：0
> 
> 时间：2013-01-25T09:36:18.080
> 
> 标签：android, facebook, facebook-graph-api, android-intent

我正在创建一个包含共享功能的 Android 应用程序。除了让用户选择提供商的正常发送意图之外，我还有 Facebook 特定的共享。

每当用户完成挑战时，结果应自动发布到用户的墙上。此外，我的应用程序有一个 Facebook 页面，我不希望用户的墙贴也出现在我的 Facebook 页面上。

如何才能做到这一点？我的第一个想法是用@symbol“标记”我的页面，但据我所知，只有当用户已经喜欢我的页面时才有可能？

我正在寻找的结果是共享帖子同时出现在用户的墙上和我的 Facebook 页面上。

> 例如：詹姆斯刚刚完成淘金挑战，排名第 52 位！

# random - 批处理 - 随机数事物

> ID：14518998
> 
> 赞同：1
> 
> 时间：2013-01-25T09:36:26.703
> 
> 标签：random, batch-file

我正在尝试创建一个组成随机 DOB 的批处理文件。

```
@echo off
title Random DOB Generator!
echo Working...
echo.
:loop
set dd=%random%
if "%dd%" GTR 31 goto loop
if "%dd%" LSS 1 goto loop
:loop2
echo %dd%/??/????
echo.
:loop2a
set mm=%random%
if "%mm%" GTR 12 goto loop2a
if "%mm%" LSS 1 goto loop2a
:loop3
echo %dd%/%mm%/????
echo.
:loop3a
set yyyy=%random%
if "%yyyy%" GTR 2000 goto loop3a
if "%yyyy%" LSS 1900 goto loop3a
:win
echo.
echo Result: %dd%/%mm%/%yyyy%
pause > nul
exit 
```

但它什么也没做，它只是坐在那里。我究竟做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:52:17.677

问题是您如何生成随机数。

`%random%`返回一个介于 0 和 32767 之间的数字，因此尝试生成介于 1 和 31、1 和 12 以及 1900 和 2000 之间的数字将需要一些时间。

它没有做任何事情，只是需要很长时间才能找到看起来像这样的匹配数字。

您可以使用一些数学来找到某个范围之间的数字，因此您不必等待。

```
@echo off
title Random DOB Generator!
echo Working...
echo.
set /a dd=%random% * 31 / 32768 + 1
echo %dd%/??/????
echo.
set /a mm=%random% * 12 / 32768 + 1
echo %dd%/%mm%/????
echo.
set /a yyyy=%random% * (2000 - 1900 + 1) / 32768 + 1900
echo.
echo Result: %dd%/%mm%/%yyyy%
pause >nul
exit 
```

如果您从原始脚本中起飞`@echo off`，我想您会看到它生成了多少数字来找到匹配项:)